/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com



 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 9.2.0
 Created: 2025-04-24T12:23:58.424Z
 */
!function(t){"use strict";var n,i,e,r,o,u,s,f,h,c=t.window,a=t.document,v=(t.location,t.navigator),d=t.setTimeout,l=t.clearTimeout,w=t.setInterval,b=t.clearInterval,g=t.Error,m=t.TypeError,p=(t.SyntaxError,t.Object),y=t.Math,_=t.parseInt,S=t.parseFloat,T=t.isNaN,E=t.Uint8Array,I=(t.Worker,t.WorkerGlobalScope,t.XMLHttpRequest),k=p.create,R=p.defineProperty,O=p.getOwnPropertyDescriptor,N=p.getOwnPropertyNames,P=p.getPrototypeOf,A=p.prototype.hasOwnProperty,D=function(t,n){return function(){return t&&(n=t(t=0)),n}},C=function(t,n){return function(){return n||t((n={exports:{}}).exports,n),n.exports}},x=D((function(){"function"==typeof Symbol&&Symbol.iterator?(n=Symbol,i=null!=(u=Symbol.for)?u:Symbol,e=Symbol.iterator,r=null!=(s=Symbol.dispose)?s:i("Symbol.dispose"),o=null!=(f=Symbol.asyncDispose)?f:i("Symbol.asyncDispose")):(h=0,n=function(t){return"ul"+t+"_"+ ++h},e=(i=function(t){return"ul"+t})("Symbol.iterator"),r=i("Symbol.dispose"),o=i("Symbol.asyncDispose"),n.for=i,n.iterator=e,n.dispose=r,n.asyncDispose=o)}));function B(t){return t&&void 0!==n&&t.constructor===n?"symbol":typeof t}var M,L,U,F,z,W,H,V,q,X,j,Y,K,G,$,Z,J,Q,tt,nt=D((function(){x(),gt()}));function it(t){var n=this.constructor;return this.then((function(i){return n.resolve(t()).then((function(){return i}))}),(function(i){return n.resolve(t()).then((function(){return n.reject(i)}))}))}function et(t){return new this((function(n,i){if(!t||void 0===t.length)return i(new m((void 0===t?"undefined":B(t))+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var e=Array.prototype.slice.call(t);if(0===e.length)return n([]);var r=e.length;function o(t,i){if(i&&("object"===(void 0===i?"undefined":B(i))||"function"==typeof i)){var u=i.then;if("function"==typeof u)return void u.call(i,(function(n){o(t,n)}),(function(i){e[t]={status:"rejected",reason:i},0==--r&&n(e)}))}e[t]={status:"fulfilled",value:i},0==--r&&n(e)}for(var u=0;u<e.length;u++)o(u,e[u])}))}function rt(t){return Boolean(t&&void 0!==t.length)}function ot(){}function ut(t){if(!(this instanceof ut))throw new m("Promises must be constructed via new");if("function"!=typeof t)throw new m("not a function");this.Ba=0,this.ttn=!1,this.MTt=void 0,this.ntn=[],vt(t,this)}function st(t,n){for(;3===t.Ba;)t=t.MTt;0!==t.Ba?(t.ttn=!0,ut.itn((function(){var i=1===t.Ba?n.onFulfilled:n.onRejected;if(null!==i){var e;try{e=i(t.MTt)}catch(t){return void ht(n.promise,t)}ft(n.promise,e)}else(1===t.Ba?ft:ht)(n.promise,t.MTt)}))):t.ntn.push(n)}function ft(t,n){try{if(n===t)throw new m("A promise cannot be resolved with itself.");if(n&&("object"===(void 0===n?"undefined":B(n))||"function"==typeof n)){var i=n.then;if(n instanceof ut)return t.Ba=3,t.MTt=n,void ct(t);if("function"==typeof i)return void vt(function(t,n){return function(){t.apply(n,arguments)}}(i,n),t)}t.Ba=1,t.MTt=n,ct(t)}catch(n){ht(t,n)}}function ht(t,n){t.Ba=2,t.MTt=n,ct(t)}function ct(t){2===t.Ba&&0===t.ntn.length&&ut.itn((function(){t.ttn||ut.rtn(t.MTt)}));for(var n=0,i=t.ntn.length;n<i;n++)st(t,t.ntn[n]);t.ntn=null}function at(t,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=i}function vt(t,n){var i=!1;try{t((function(t){i||(i=!0,ft(n,t))}),(function(t){i||(i=!0,ht(n,t))}))}catch(t){if(i)return;i=!0,ht(n,t)}}function dt(t){return new Y(j,{reason:t,promise:L.reject(t).catch((function(){})),cancelable:!0})}function lt(t){var n=new K(j,{detail:{reason:t},cancelable:!0});return p.defineProperty(n,"reason",{value:t}),n}function wt(t){var n=a.createEvent("CustomEvent");return n.initCustomEvent(j,!1,!0,{reason:t}),n}var bt=D((function(){var t,n,i,e;x(),gt(),nt(),M=d,ut.prototype.catch=function(t){return this.then(null,t)},ut.prototype.then=function(t,n){var i=new this.constructor(ot);return st(this,new at(t,n,i)),i},ut.prototype.finally=it,ut.all=function(t){return new ut((function(n,i){if(!rt(t))return i(new m("Promise.all accepts an array"));var e=Array.prototype.slice.call(t);if(0===e.length)return n([]);var r=e.length;function o(t,u){try{if(u&&("object"===(void 0===u?"undefined":B(u))||"function"==typeof u)){var s=u.then;if("function"==typeof s)return void s.call(u,(function(n){o(t,n)}),i)}e[t]=u,0==--r&&n(e)}catch(t){i(t)}}for(var u=0;u<e.length;u++)o(u,e[u])}))},ut.allSettled=et,ut.resolve=function(t){return t&&"object"===(void 0===t?"undefined":B(t))&&t.constructor===ut?t:new ut((function(n){n(t)}))},ut.reject=function(t){return new ut((function(n,i){i(t)}))},ut.race=function(t){return new ut((function(n,i){if(!rt(t))return i(new m("Promise.race accepts an array"));for(var e=0,r=t.length;e<r;e++)ut.resolve(t[e]).then(n,i)}))},ut.itn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){M(t,0)},ut.rtn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},L=function(){var t=self.Promise;if(void 0!==t)try{if(-1!==t.toString().indexOf("[native code]"))return t}catch(t){}}(),U=v?v.userAgent:"",F=U.match(/Firefox\/([0-9]+)/i),z=null!=F,W=F?Number(F[1]):0,H=U.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),V=null!=H,q=H?Number(H[3]):0,X=function(){function t(t){this.Kb=0,this.Rd=0,this.Sp=[],this.etn=t}return t.prototype.utn=function(t){var n=this.length();this.stn(n+1);var i=this.Rd+n&this.etn-1;this.Sp[i]=t,this.Kb=n+1},t.prototype.push=function(t){var n=this.length()+1;if(this.etn<n)this.utn(t);else{var i=this.Rd+n-1,e=this.etn-1;this.Sp[i&e]=t,this.Kb=n}},t.prototype.shift=function(){var t=this.Rd,n=this.Sp[t];return this.Sp[t]=void 0,this.Rd=t+1&this.etn-1,this.Kb--,n},t.prototype.length=function(){return this.Kb},t.prototype.stn=function(t){this.etn<t&&this.otn(this.etn<<1)},t.prototype.otn=function(t){var n=this.etn;this.etn=t;var i=this.Rd+this.Kb&n-1;!function(t,n,i,e){for(var r=0;r<e;++r)t[r+i]=t[r+n],t[r+n]=void 0}(this.Sp,0,n,i)},t}(),j="unhandledrejection",Y=self.PromiseRejectionEvent,K=self.CustomEvent,G=function(t){return G=function(){try{var t=L.resolve(),n="error",i=new Y(j,{reason:n,promise:t});return j===i.type&&n===i.reason}catch(t){}return!1}()?dt:function(){try{var t="error",n=new K(j,{detail:{reason:t}});return j===n.type&&t===n.detail.reason}catch(t){}return!1}()?lt:wt,G(t)},Z=z&&W<60||V&&q<15,L&&!Z?(J=L,function(){}):(J=ut,Q=null!==($=function(){var t=self.queueMicrotask;if("function"==typeof t)return function(n){return t(n)};var n=L;if(n&&"function"==typeof n.resolve){var i=n.resolve();return function(t){return i.then(t)}}}())&&void 0!==$?$:ut.itn,t=Q,n=new X(16),i=!1,(tt={u6:function(r){n.push(r),i||(i=!0,t(e))},aY:e=function(){for(;n.length()>0;)n.shift()();i=!1}}).aY,ut.itn=tt.u6,ut.rtn=function(t){try{var n=G(t);if(!self.dispatchEvent(n)||n.defaultPrevented)return}catch(t){}d((function(){throw new g("Unhandled promise rejection: ".concat(t))}),0)})})),gt=D((function(){bt()})),mt=C((function(t,i){var r,o;x(),gt(),nt(),r=t,o=function(t){var i="function"==typeof n&&"symbol"===B(e)?n:function(t){return"Symbol("+t+")"};function r(){}var o=Number.isNaN||function(t){return t!=t},u=r;function s(t){return"object"===(void 0===t?"undefined":B(t))&&null!==t||"function"==typeof t}function f(t){return t.slice()}function h(t,n,i,e,r){new E(t).set(new E(i,e,r),n)}function c(t){return!1!==function(t){return"number"==typeof t&&(!o(t)&&!(t<0))}(t)&&t!==1/0}function a(t,n,i){if("function"!=typeof t)throw new m("Argument is not a function");return Function.prototype.apply.call(t,n,i)}function v(t,n,i,e){var r=t[n];if(void 0!==r){if("function"!=typeof r)throw new m(r+" is not a method");switch(i){case 0:return function(){return l(r,t,e)};case 1:return function(n){var i=[n].concat(e);return l(r,t,i)}}}return function(){return R(void 0)}}function d(t,n,i){var e=t[n];if(void 0!==e)return a(e,t,i)}function l(t,n,i){try{return R(a(t,n,i))}catch(t){return O(t)}}function w(t){if(t=Number(t),o(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function b(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new m("size property of a queuing strategy must be a function");return function(n){return t(n)}}var _=J,S=J.prototype.then,T=J.resolve.bind(_),I=J.reject.bind(_);function k(t){return new _(t)}function R(t){return T(t)}function O(t){return I(t)}function N(t,n,i){return S.call(t,n,i)}function P(t,n,i){N(N(t,n,i),void 0,u)}function A(t,n){P(t,n)}function D(t,n){P(t,void 0,n)}function C(t,n,i){return N(t,n,i)}function x(t){N(t,void 0,u)}var M=function(){function t(){this.hd=0,this.Ed=0,this.Rd={Id:[],Pd:void 0},this.Dd=this.Rd,this.hd=0,this.Ed=0}return p.defineProperty(t.prototype,"length",{get:function(){return this.Ed},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var n=this.Dd,i=n;16383===n.Id.length&&(i={Id:[],Pd:void 0}),n.Id.push(t),i!==n&&(this.Dd=i,n.Pd=i),++this.Ed},t.prototype.shift=function(){var t=this.Rd,n=t,i=this.hd,e=i+1,r=t.Id,o=r[i];return 16384===e&&(n=t.Pd,e=0),--this.Ed,this.hd=e,t!==n&&(this.Rd=n),r[i]=void 0,o},t.prototype.forEach=function(t){for(var n=this.hd,i=this.Rd,e=i.Id;!(n===e.length&&void 0===i.Pd||n===e.length&&(n=0,0===(e=(i=i.Pd).Id).length));)t(e[n]),++n},t.prototype.peek=function(){var t=this.Rd,n=this.hd;return t.Id[n]},t}();function L(t,n,i){var e=null;!0===i&&(e=p.prototype);var r=p.create(e);return r.value=t,r.done=n,r}function U(t,n){t.Nd=!0,t.Ld=n,n.Bd=t,"readable"===n.Ba?H(t):"closed"===n.Ba?function(t){H(t),X(t)}(t):V(t,n.Od)}function F(t,n){return Zn(t.Ld,n)}function z(t){"readable"===t.Ld.Ba?q(t,new m("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,n){V(t,n)}(t,new m("Reader was released and can no longer be used to monitor the stream's closedness")),t.Ld.Bd=void 0,t.Ld=void 0}function W(t){return new m("Cannot "+t+" a stream using a released reader")}function H(t){t.Fd=k((function(n,i){t.Vd=n,t.Wd=i}))}function V(t,n){H(t),q(t,n)}function q(t,n){x(t.Fd),t.Wd(n),t.Vd=void 0,t.Wd=void 0}function X(t){t.Vd(void 0),t.Vd=void 0,t.Wd=void 0}var j=i("[[CancelSteps]]"),Y=i("[[PullSteps]]");function K(t,n){void 0===n&&(n=!1);var i=new it(t);return i.Nd=n,i}function G(t){return k((function(n,i){var e={Ud:n,Gd:i};t.Bd.Hd.push(e)}))}function $(t,n,i){var e=t.Bd;e.Hd.shift().Ud(L(n,i,e.Nd))}function Z(t){return t.Bd.Hd.length}function Q(t){var n=t.Bd;return void 0!==n&&!!et(n)}var tt,nt,it=function(){function t(t){if(!1===Gn(t))throw new m("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===$n(t))throw new m("This stream has already been locked for exclusive reading by another reader");U(this,t),this.Hd=new M}return p.defineProperty(t.prototype,"closed",{get:function(){return et(this)?this.Fd:O(ot("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return et(this)?void 0===this.Ld?O(W("cancel")):F(this,t):O(ot("cancel"))},t.prototype.read=function(){return et(this)?void 0===this.Ld?O(W("read from")):rt(this):O(ot("read"))},t.prototype.releaseLock=function(){if(!et(this))throw ot("releaseLock");if(void 0!==this.Ld){if(this.Hd.length>0)throw new m("Tried to release a reader lock when that reader has pending read() calls un-settled");z(this)}},t}();function et(t){return!!s(t)&&!!p.prototype.hasOwnProperty.call(t,"Hd")}function rt(t){var n=t.Ld;return n.Zd=!0,"closed"===n.Ba?R(L(void 0,!0,t.Nd)):"errored"===n.Ba?O(n.Od):n.Xd[Y]()}function ot(t){return new m("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"===B(i.asyncIterator)&&((tt={})[i.asyncIterator]=function(){return this},nt=tt,p.defineProperty(nt,i.asyncIterator,{enumerable:!1}));var ut={next:function(){if(!1===st(this))return O(ft("next"));var t=this.zd;return void 0===t.Ld?O(W("iterate")):C(rt(t),(function(n){var i=n.done;return i&&z(t),L(n.value,i,!0)}))},return:function(t){if(!1===st(this))return O(ft("next"));var n=this.zd;if(void 0===n.Ld)return O(W("finish iterating"));if(n.Hd.length>0)return O(new m("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.qd){var i=F(n,t);return z(n),C(i,(function(){return L(t,!0,!0)}))}return z(n),R(L(t,!0,!0))}};function st(t){return!!s(t)&&!!p.prototype.hasOwnProperty.call(t,"zd")}function ft(t){return new m("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function ht(t){var n=t.Yd.shift();return t.Kd-=n.size,t.Kd<0&&(t.Kd=0),n.value}function ct(t,n,i){if(!c(i=Number(i)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.Yd.push({value:n,size:i}),t.Kd+=i}function at(t){t.Yd=new M,t.Kd=0}void 0!==nt&&p.setPrototypeOf(ut,nt),p.defineProperty(ut,"next",{enumerable:!1}),p.defineProperty(ut,"return",{enumerable:!1});var vt=i("[[AbortSteps]]"),dt=i("[[ErrorSteps]]"),lt=function(){function t(t,n){void 0===t&&(t={}),void 0===n&&(n={}),bt(this);var i=n.size,e=n.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var r=b(i);void 0===e&&(e=1),function(t,n,i,e){var r=p.create(xt.prototype);function o(){return d(n,"start",[r])}var u=v(n,"write",1,[r]),s=v(n,"close",0,[]),f=v(n,"abort",1,[]);Bt(t,r,o,u,s,f,i,e)}(this,t,e=w(e),r)}return p.defineProperty(t.prototype,"locked",{get:function(){if(!1===gt(this))throw Ht("locked");return mt(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===gt(this)?O(Ht("abort")):!0===mt(this)?O(new m("Cannot abort a stream that already has a writer")):pt(this,t)},t.prototype.close=function(){return!1===gt(this)?O(Ht("close")):!0===mt(this)?O(new m("Cannot close a stream that already has a writer")):!0===Et(this)?O(new m("Cannot close an already-closing stream")):yt(this)},t.prototype.getWriter=function(){if(!1===gt(this))throw Ht("getWriter");return wt(this)},t}();function wt(t){return new Rt(t)}function bt(t){t.Ba="writable",t.Od=void 0,t.Qd=void 0,t.Jd=void 0,t.$d=new M,t.tf=void 0,t.ef=void 0,t.nf=void 0,t.rf=void 0,t.hf=!1}function gt(t){return!!s(t)&&!!p.prototype.hasOwnProperty.call(t,"Jd")}function mt(t){return void 0!==t.Qd}function pt(t,n){var i=t.Ba;if("closed"===i||"errored"===i)return R(void 0);if(void 0!==t.rf)return t.rf.uf;var e=!1;"erroring"===i&&(e=!0,n=void 0);var r=k((function(i,r){t.rf={uf:void 0,Ud:i,Gd:r,cf:n,lf:e}}));return t.rf.uf=r,!1===e&&St(t,n),r}function yt(t){var n=t.Ba;if("closed"===n||"errored"===n)return O(new m("The stream (in "+n+" state) is not in the writable state and cannot be closed"));var i=k((function(n,i){var e={Ud:n,Gd:i};t.ef=e})),e=t.Qd;return void 0!==e&&!0===t.hf&&"writable"===n&&Qt(e),function(t){ct(t,"close",0),Ut(t)}(t.Jd),i}function _t(t,n){"writable"!==t.Ba?Tt(t):St(t,n)}function St(t,n){var i=t.Jd;t.Ba="erroring",t.Od=n;var e=t.Qd;void 0!==e&&At(e,n),!1===function(t){return void 0!==t.tf||void 0!==t.nf}(t)&&!0===i.df&&Tt(t)}function Tt(t){t.Ba="errored",t.Jd[dt]();var n=t.Od;if(t.$d.forEach((function(t){t.Gd(n)})),t.$d=new M,void 0!==t.rf){var i=t.rf;if(t.rf=void 0,!0===i.lf)return i.Gd(n),void It(t);P(t.Jd[vt](i.cf),(function(){i.Ud(),It(t)}),(function(n){i.Gd(n),It(t)}))}else It(t)}function Et(t){return void 0!==t.ef||void 0!==t.nf}function It(t){void 0!==t.ef&&(t.ef.Gd(t.Od),t.ef=void 0);var n=t.Qd;void 0!==n&&Yt(n,t.Od)}function kt(t,n){var i=t.Qd;void 0!==i&&n!==t.hf&&(!0===n?function(t){Gt(t)}(i):Qt(i)),t.hf=n}var Rt=function(){function t(t){if(!1===gt(t))throw new m("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===mt(t))throw new m("This stream has already been locked for exclusive writing by another writer");this._f=t,t.Qd=this;var n=t.Ba;if("writable"===n)!1===Et(t)&&!0===t.hf?Gt(this):Zt(this),Xt(this);else if("erroring"===n)$t(this,t.Od),Xt(this);else if("closed"===n)Zt(this),function(t){Xt(t),Kt(t)}(this);else{var i=t.Od;$t(this,i),jt(this,i)}}return p.defineProperty(t.prototype,"closed",{get:function(){return!1===Ot(this)?O(Vt("closed")):this.Fd},enumerable:!0,configurable:!0}),p.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Ot(this))throw Vt("desiredSize");if(void 0===this._f)throw qt("desiredSize");return function(t){var n=t._f,i=n.Ba;return"errored"===i||"erroring"===i?null:"closed"===i?0:Lt(n.Jd)}(this)},enumerable:!0,configurable:!0}),p.defineProperty(t.prototype,"ready",{get:function(){return!1===Ot(this)?O(Vt("ready")):this.vf},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===Ot(this)?O(Vt("abort")):void 0===this._f?O(qt("abort")):function(t,n){var i=t._f;return pt(i,n)}(this,t)},t.prototype.close=function(){if(!1===Ot(this))return O(Vt("close"));var t=this._f;return void 0===t?O(qt("close")):!0===Et(t)?O(new m("Cannot close an already-closing stream")):Nt(this)},t.prototype.releaseLock=function(){if(!1===Ot(this))throw Vt("releaseLock");void 0!==this._f&&Dt(this)},t.prototype.write=function(t){return!1===Ot(this)?O(Vt("write")):void 0===this._f?O(qt("write to")):Ct(this,t)},t}();function Ot(t){return!!s(t)&&!!p.prototype.hasOwnProperty.call(t,"_f")}function Nt(t){return yt(t._f)}function Pt(t,n){"pending"===t.mf?Yt(t,n):function(t,n){jt(t,n)}(t,n)}function At(t,n){"pending"===t.gf?Jt(t,n):function(t,n){$t(t,n)}(t,n)}function Dt(t){var n=t._f,i=new m("Writer was released and can no longer be used to monitor the stream's closedness");At(t,i),Pt(t,i),n.Qd=void 0,t._f=void 0}function Ct(t,n){var i=t._f,e=i.Jd,r=function(t,n){try{return t.pf(n)}catch(n){return Ft(t,n),1}}(e,n);if(i!==t._f)return O(qt("write to"));var o=i.Ba;if("errored"===o)return O(i.Od);if(!0===Et(i)||"closed"===o)return O(new m("The stream is closing or closed and cannot be written to"));if("erroring"===o)return O(i.Od);var u=function(t){return k((function(n,i){var e={Ud:n,Gd:i};t.$d.push(e)}))}(i);return function(t,n,i){var e={chunk:n};try{ct(t,e,i)}catch(n){return void Ft(t,n)}var r=t.wf;!1===Et(r)&&"writable"===r.Ba&&kt(r,zt(t)),Ut(t)}(e,n,r),u}var xt=function(){function t(){throw new m("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){return!!s(t)&&!!p.prototype.hasOwnProperty.call(t,"wf")}(this))throw new m("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.wf.Ba&&Wt(this,t)},t.prototype[vt]=function(t){var n=this.yf(t);return Mt(this),n},t.prototype[dt]=function(){at(this)},t}();function Bt(t,n,i,e,r,o,u,s){n.wf=t,t.Jd=n,n.Yd=void 0,n.Kd=void 0,at(n),n.df=!1,n.pf=s,n.bf=u,n.Af=e,n.Sf=r,n.yf=o;var f=zt(n);kt(t,f),P(R(i()),(function(){n.df=!0,Ut(n)}),(function(i){n.df=!0,_t(t,i)}))}function Mt(t){t.Af=void 0,t.Sf=void 0,t.yf=void 0,t.pf=void 0}function Lt(t){return t.bf-t.Kd}function Ut(t){var n=t.wf;if(!1!==t.df&&void 0===n.tf)if("erroring"!==n.Ba){if(0!==t.Yd.length){var i=function(t){return t.Yd.peek().value}(t);"close"===i?function(t){var n=t.wf;(function(t){t.nf=t.ef,t.ef=void 0})(n),ht(t);var i=t.Sf();Mt(t),P(i,(function(){!function(t){t.nf.Ud(void 0),t.nf=void 0,"erroring"===t.Ba&&(t.Od=void 0,void 0!==t.rf&&(t.rf.Ud(),t.rf=void 0)),t.Ba="closed";var n=t.Qd;void 0!==n&&Kt(n)}(n)}),(function(t){!function(t,n){t.nf.Gd(n),t.nf=void 0,void 0!==t.rf&&(t.rf.Gd(n),t.rf=void 0),_t(t,n)}(n,t)}))}(t):function(t,n){var i=t.wf;!function(t){t.tf=t.$d.shift()}(i);var e=t.Af(n);P(e,(function(){!function(t){t.tf.Ud(void 0),t.tf=void 0}(i);var n=i.Ba;if(ht(t),!1===Et(i)&&"writable"===n){var e=zt(t);kt(i,e)}Ut(t)}),(function(n){"writable"===i.Ba&&Mt(t),function(t,n){t.tf.Gd(n),t.tf=void 0,_t(t,n)}(i,n)}))}(t,i.chunk)}}else Tt(n)}function Ft(t,n){"writable"===t.wf.Ba&&Wt(t,n)}function zt(t){return Lt(t)<=0}function Wt(t,n){var i=t.wf;Mt(t),St(i,n)}function Ht(t){return new m("WritableStream.prototype."+t+" can only be used on a WritableStream")}function Vt(t){return new m("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function qt(t){return new m("Cannot "+t+" a stream using a released writer")}function Xt(t){t.Fd=k((function(n,i){t.Vd=n,t.Wd=i,t.mf="pending"}))}function jt(t,n){Xt(t),Yt(t,n)}function Yt(t,n){x(t.Fd),t.Wd(n),t.Vd=void 0,t.Wd=void 0,t.mf="rejected"}function Kt(t){t.Vd(void 0),t.Vd=void 0,t.Wd=void 0,t.mf="resolved"}function Gt(t){t.vf=k((function(n,i){t.Tf=n,t.kf=i})),t.gf="pending"}function $t(t,n){Gt(t),Jt(t,n)}function Zt(t){Gt(t),Qt(t)}function Jt(t,n){x(t.vf),t.kf(n),t.Tf=void 0,t.kf=void 0,t.gf="rejected"}function Qt(t){t.Tf(void 0),t.Tf=void 0,t.kf=void 0,t.gf="fulfilled"}function tn(t){if("object"!==(void 0===t?"undefined":B(t))||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var nn,en="undefined"!=typeof DOMException?DOMException:void 0,rn=function(t){if("function"!=typeof t&&"object"!==(void 0===t?"undefined":B(t)))return!1;try{return new t,!0}catch(t){return!1}}(en)?en:((nn=function(t,n){this.message=t||"",this.name=n||"Error",g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}).prototype=p.create(g.prototype),p.defineProperty(nn.prototype,"constructor",{value:nn,writable:!0,configurable:!0}),nn);function on(t,n,i,e,o,u){var s=K(t),f=wt(n);t.Zd=!0;var h=!1,c=R(void 0);return k((function(a,v){var d,l,w,b;if(void 0!==u){if(d=function(){var i=new rn("Aborted","AbortError"),r=[];!1===e&&r.push((function(){return"writable"===n.Ba?pt(n,i):R(void 0)})),!1===o&&r.push((function(){return"readable"===t.Ba?Zn(t,i):R(void 0)})),_((function(){return J.all(r.map((function(t){return t()})))}),!0,i)},!0===u.aborted)return void d();u.addEventListener("abort",d)}if(y(t,s.Fd,(function(t){!1===e?_((function(){return pt(n,t)}),!0,t):S(!0,t)})),y(n,f.Fd,(function(n){!1===o?_((function(){return Zn(t,n)}),!0,n):S(!0,n)})),l=t,w=s.Fd,b=function(){!1===i?_((function(){return function(t){var n=t._f,i=n.Ba;return!0===Et(n)||"closed"===i?R(void 0):"errored"===i?O(n.Od):Nt(t)}(f)})):S()},"closed"===l.Ba?b():A(w,b),!0===Et(n)||"closed"===n.Ba){var g=new m("the destination writable stream closed before all data could be piped to it");!1===o?_((function(){return Zn(t,g)}),!0,g):S(!0,g)}function p(){var t=c;return N(c,(function(){return t!==c?p():void 0}))}function y(t,n,i){"errored"===t.Ba?i(t.Od):D(n,i)}function _(t,i,e){function r(){P(t(),(function(){return T(i,e)}),(function(t){return T(!0,t)}))}!0!==h&&(h=!0,"writable"===n.Ba&&!1===Et(n)?A(p(),r):r())}function S(t,i){!0!==h&&(h=!0,"writable"===n.Ba&&!1===Et(n)?A(p(),(function(){return T(t,i)})):T(t,i))}function T(t,n){Dt(f),z(s),void 0!==u&&u.removeEventListener("abort",d),t?v(n):a(void 0)}x(k((function(t,n){!function i(e){e?t():N(!0===h?R(!0):N(f.vf,(function(){return N(rt(s),(function(t){return!0===t.done||(c=N(Ct(f,t.value),void 0,r),!1)}))})),i,n)}(!1)})))}))}var un=function(){function t(){throw new m}return p.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===sn(this))throw gn("desiredSize");return ln(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===sn(this))throw gn("close");if(!1===wn(this))throw new m("The stream is not in a state that permits close");an(this)},t.prototype.enqueue=function(t){if(!1===sn(this))throw gn("enqueue");if(!1===wn(this))throw new m("The stream is not in a state that permits enqueue");return vn(this,t)},t.prototype.error=function(t){if(!1===sn(this))throw gn("error");dn(this,t)},t.prototype[j]=function(t){at(this);var n=this.Ef(t);return cn(this),n},t.prototype[Y]=function(){var t=this.xf;if(this.Yd.length>0){var n=ht(this);return!0===this.Rf&&0===this.Yd.length?(cn(this),Jn(t)):fn(this),R(L(n,!1,t.Bd.Nd))}var i=G(t);return fn(this),i},t}();function sn(t){return!!s(t)&&!!p.prototype.hasOwnProperty.call(t,"xf")}function fn(t){!1!==hn(t)&&(!0!==t.If?(t.If=!0,P(t.Cf(),(function(){t.If=!1,!0===t.Pf&&(t.Pf=!1,fn(t))}),(function(n){dn(t,n)}))):t.Pf=!0)}function hn(t){var n=t.xf;return!1!==wn(t)&&!1!==t.df&&(!0===$n(n)&&Z(n)>0||ln(t)>0)}function cn(t){t.Cf=void 0,t.Ef=void 0,t.pf=void 0}function an(t){var n=t.xf;t.Rf=!0,0===t.Yd.length&&(cn(t),Jn(n))}function vn(t,n){var i=t.xf;if(!0===$n(i)&&Z(i)>0)$(i,n,!1);else{var e=void 0;try{e=t.pf(n)}catch(n){throw dn(t,n),n}try{ct(t,n,e)}catch(n){throw dn(t,n),n}}fn(t)}function dn(t,n){var i=t.xf;"readable"===i.Ba&&(at(t),cn(t),Qn(i,n))}function ln(t){var n=t.xf.Ba;return"errored"===n?null:"closed"===n?0:t.bf-t.Kd}function wn(t){var n=t.xf.Ba;return!1===t.Rf&&"readable"===n}function bn(t,n,i,e,r,o,u){n.xf=t,n.Yd=void 0,n.Kd=void 0,at(n),n.df=!1,n.Rf=!1,n.Pf=!1,n.If=!1,n.pf=u,n.bf=o,n.Cf=e,n.Ef=r,t.Xd=n,P(R(i()),(function(){n.df=!0,fn(n)}),(function(t){dn(n,t)}))}function gn(t){return new m("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var mn=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&y.floor(t)===t},pn=function(){function t(){throw new m("ReadableStreamBYOBRequest cannot be used directly")}return p.defineProperty(t.prototype,"view",{get:function(){if(!1===Sn(this))throw Un("view");return this.Df},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===Sn(this))throw Un("respond");if(void 0===this.Nf)throw new m("This BYOB request has been invalidated");this.Df.buffer,function(t,n){if(!1===c(n=Number(n)))throw new RangeError("bytesWritten must be a finite");Dn(t,n)}(this.Nf,t)},t.prototype.respondWithNewView=function(t){if(!1===Sn(this))throw Un("respond");if(void 0===this.Nf)throw new m("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new m("You can only respond with array buffer views");t.buffer,function(t,n){var i=t.Mf.peek();if(i.byteOffset+i.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.byteLength!==n.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");i.buffer=n.buffer,Dn(t,n.byteLength)}(this.Nf,t)},t}(),yn=function(){function t(){throw new m("ReadableByteStreamController constructor cannot be used directly")}return p.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===_n(this))throw Fn("byobRequest");if(void 0===this.Lf&&this.Mf.length>0){var t=this.Mf.peek(),n=new E(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),i=p.create(pn.prototype);!function(t,n,i){t.Nf=n,t.Df=i}(i,this,n),this.Lf=i}return this.Lf},enumerable:!0,configurable:!0}),p.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===_n(this))throw Fn("desiredSize");return Mn(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===_n(this))throw Fn("close");if(!0===this.Rf)throw new m("The stream has already been closed; do not close it again!");var t=this.Bf.Ba;if("readable"!==t)throw new m("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var n=t.Bf;if(t.Kd>0)t.Rf=!0;else{if(t.Mf.length>0&&t.Mf.peek().bytesFilled>0){var i=new m("Insufficient bytes to fill elements in the given buffer");throw Bn(t,i),i}xn(t),Jn(n)}}(this)},t.prototype.enqueue=function(t){if(!1===_n(this))throw Fn("enqueue");if(!0===this.Rf)throw new m("stream is closed or draining");var n=this.Bf.Ba;if("readable"!==n)throw new m("The stream (in "+n+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new m("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,n){var i=t.Bf,e=n.buffer,r=n.byteOffset,o=n.byteLength,u=e;!0===Q(i)?0===Z(i)?kn(t,u,r,o):$(i,new E(u,r,o),!1):!0===Hn(i)?(kn(t,u,r,o),An(t)):kn(t,u,r,o),Tn(t)}(this,t)},t.prototype.error=function(t){if(!1===_n(this))throw Fn("error");Bn(this,t)},t.prototype[j]=function(t){this.Mf.length>0&&(this.Mf.peek().bytesFilled=0),at(this);var n=this.Ef(t);return xn(this),n},t.prototype[Y]=function(){var t=this.Bf;if(this.Kd>0){var n=this.Yd.shift();this.Kd-=n.byteLength,Nn(this);var i=void 0;try{i=new E(n.buffer,n.byteOffset,n.byteLength)}catch(t){return O(t)}return R(L(i,!1,t.Bd.Nd))}var e=this.Of;if(void 0!==e){var r=void 0;try{r=new ArrayBuffer(e)}catch(t){return O(t)}var o={buffer:r,byteOffset:0,byteLength:e,bytesFilled:0,elementSize:1,ctor:E,readerType:"default"};this.Mf.push(o)}var u=G(t);return Tn(this),u},t}();function _n(t){return!!s(t)&&!!p.prototype.hasOwnProperty.call(t,"Bf")}function Sn(t){return!!s(t)&&!!p.prototype.hasOwnProperty.call(t,"Nf")}function Tn(t){var n=function(t){var n=t.Bf;if("readable"!==n.Ba)return!1;if(!0===t.Rf)return!1;if(!1===t.df)return!1;if(!0===Q(n)&&Z(n)>0)return!0;if(!0===Hn(n)&&Wn(n)>0)return!0;var i=Mn(t);return i>0}(t);!1!==n&&(!0!==t.If?(t.If=!0,P(t.Cf(),(function(){t.If=!1,!0===t.Pf&&(t.Pf=!1,Tn(t))}),(function(n){Bn(t,n)}))):t.Pf=!0)}function En(t,n){var i=!1;"closed"===t.Ba&&(i=!0);var e=In(n);"default"===n.readerType?$(t,e,i):function(t,n,i){var e=t.Bd,r=e.Ff.shift();r.Ud(L(n,i,e.Nd))}(t,e,i)}function In(t){var n=t.bytesFilled,i=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,n/i)}function kn(t,n,i,e){t.Yd.push({buffer:n,byteOffset:i,byteLength:e}),t.Kd+=e}function Rn(t,n){var i=n.elementSize,e=n.bytesFilled-n.bytesFilled%i,r=y.min(t.Kd,n.byteLength-n.bytesFilled),o=n.bytesFilled+r,u=o-o%i,s=r,f=!1;u>e&&(s=u-n.bytesFilled,f=!0);for(var c=t.Yd;s>0;){var a=c.peek(),v=y.min(s,a.byteLength),d=n.byteOffset+n.bytesFilled;h(n.buffer,d,a.buffer,a.byteOffset,v),a.byteLength===v?c.shift():(a.byteOffset+=v,a.byteLength-=v),t.Kd-=v,On(t,v,n),s-=v}return f}function On(t,n,i){Pn(t),i.bytesFilled+=n}function Nn(t){0===t.Kd&&!0===t.Rf?(xn(t),Jn(t.Bf)):Tn(t)}function Pn(t){void 0!==t.Lf&&(t.Lf.Nf=void 0,t.Lf.Df=void 0,t.Lf=void 0)}function An(t){for(;t.Mf.length>0;){if(0===t.Kd)return;var n=t.Mf.peek();!0===Rn(t,n)&&(Cn(t),En(t.Bf,n))}}function Dn(t,n){var i=t.Mf.peek();if("closed"===t.Bf.Ba){if(0!==n)throw new m("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,n){n.buffer=n.buffer;var i=t.Bf;if(!0===Hn(i))for(;Wn(i)>0;)En(i,Cn(t))}(t,i)}else!function(t,n,i){if(i.bytesFilled+n>i.byteLength)throw new RangeError("bytesWritten out of range");if(On(t,n,i),!(i.bytesFilled<i.elementSize)){Cn(t);var e=i.bytesFilled%i.elementSize;if(e>0){var r=i.byteOffset+i.bytesFilled,o=i.buffer.slice(r-e,r);kn(t,o,0,o.byteLength)}i.buffer=i.buffer,i.bytesFilled-=e,En(t.Bf,i),An(t)}}(t,n,i);Tn(t)}function Cn(t){var n=t.Mf.shift();return Pn(t),n}function xn(t){t.Cf=void 0,t.Ef=void 0}function Bn(t,n){var i=t.Bf;"readable"===i.Ba&&(function(t){Pn(t),t.Mf=new M}(t),at(t),xn(t),Qn(i,n))}function Mn(t){var n=t.Bf.Ba;return"errored"===n?null:"closed"===n?0:t.bf-t.Kd}function Ln(t,n,i){var e=p.create(yn.prototype),r=v(n,"pull",0,[e]),o=v(n,"cancel",1,[]),u=n.autoAllocateChunkSize;if(void 0!==u&&(u=Number(u),!1===mn(u)||u<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,n,i,e,r,o,u){n.Bf=t,n.Pf=!1,n.If=!1,n.Lf=void 0,n.Yd=n.Kd=void 0,at(n),n.Rf=!1,n.df=!1,n.bf=w(o),n.Cf=e,n.Ef=r,n.Of=u,n.Mf=new M,t.Xd=n,P(R(i()),(function(){n.df=!0,Tn(n)}),(function(t){Bn(n,t)}))}(t,e,(function(){return d(n,"start",[e])}),r,o,i,u)}function Un(t){return new m("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Fn(t){return new m("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function zn(t){return k((function(n,i){var e={Ud:n,Gd:i};t.Bd.Ff.push(e)}))}function Wn(t){return t.Bd.Ff.length}function Hn(t){var n=t.Bd;return void 0!==n&&!!qn(n)}var Vn=function(){function t(t){if(!Gn(t))throw new m("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===_n(t.Xd))throw new m("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if($n(t))throw new m("This stream has already been locked for exclusive reading by another reader");U(this,t),this.Ff=new M}return p.defineProperty(t.prototype,"closed",{get:function(){return qn(this)?this.Fd:O(Xn("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return qn(this)?void 0===this.Ld?O(W("cancel")):F(this,t):O(Xn("cancel"))},t.prototype.read=function(t){return qn(this)?void 0===this.Ld?O(W("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?O(new m("view must have non-zero byteLength")):function(t,n){var i=t.Ld;return i.Zd=!0,"errored"===i.Ba?O(i.Od):function(t,n){var i=t.Bf,e=1;n.constructor!==DataView&&(e=n.constructor.BYTES_PER_ELEMENT);var r=n.constructor,o={buffer:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:e,ctor:r,readerType:"byob"};if(t.Mf.length>0)return t.Mf.push(o),zn(i);if("closed"===i.Ba)return R(L(new r(o.buffer,o.byteOffset,0),!0,i.Bd.Nd));if(t.Kd>0){if(!0===Rn(t,o)){var u=In(o);return Nn(t),R(L(u,!1,i.Bd.Nd))}if(!0===t.Rf){var s=new m("Insufficient bytes to fill elements in the given buffer");return Bn(t,s),O(s)}}t.Mf.push(o);var f=zn(i);return Tn(t),f}(i.Xd,n)}(this,t)):O(new m("view must be an array buffer view")):O(Xn("read"))},t.prototype.releaseLock=function(){if(!qn(this))throw Xn("releaseLock");if(void 0!==this.Ld){if(this.Ff.length>0)throw new m("Tried to release a reader lock when that reader has pending read() calls un-settled");z(this)}},t}();function qn(t){return!!s(t)&&!!p.prototype.hasOwnProperty.call(t,"Ff")}function Xn(t){return new m("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var jn=function(){function t(t,n){void 0===t&&(t={}),void 0===n&&(n={}),Kn(this);var i=n.size,e=n.highWaterMark,r=t.type;if("bytes"===String(r)){if(void 0!==i)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===e&&(e=0),Ln(this,t,e=w(e))}else{if(void 0!==r)throw new RangeError("Invalid type is specified");var o=b(i);void 0===e&&(e=1),function(t,n,i,e){var r=p.create(un.prototype),o=v(n,"pull",0,[r]),u=v(n,"cancel",1,[]);bn(t,r,(function(){return d(n,"start",[r])}),o,u,i,e)}(this,t,e=w(e),o)}}return p.defineProperty(t.prototype,"locked",{get:function(){if(!1===Gn(this))throw ti("locked");return $n(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Gn(this)?O(ti("cancel")):!0===$n(this)?O(new m("Cannot cancel a stream that already has a reader")):Zn(this,t)},t.prototype.getReader=function(t){var n=(void 0===t?{}:t).mode;if(!1===Gn(this))throw ti("getReader");if(void 0===n)return K(this,!0);if("byob"===(n=String(n)))return function(t,n){void 0===n&&(n=!1);var i=new Vn(t);return i.Nd=n,i}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,n){var i=t.writable,e=t.readable,r=void 0===n?{}:n,o=r.preventClose,u=r.preventAbort,s=r.preventCancel,f=r.signal;if(!1===Gn(this))throw ti("pipeThrough");if(!1===gt(i))throw new m("writable argument to pipeThrough must be a WritableStream");if(!1===Gn(e))throw new m("readable argument to pipeThrough must be a ReadableStream");if(o=Boolean(o),u=Boolean(u),s=Boolean(s),void 0!==f&&!tn(f))throw new m("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===$n(this))throw new m("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===mt(i))throw new m("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return x(on(this,i,o,u,s,f)),e},t.prototype.pipeTo=function(t,n){var i=void 0===n?{}:n,e=i.preventClose,r=i.preventAbort,o=i.preventCancel,u=i.signal;return!1===Gn(this)?O(ti("pipeTo")):!1===gt(t)?O(new m("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(e=Boolean(e),r=Boolean(r),o=Boolean(o),void 0===u||tn(u)?!0===$n(this)?O(new m("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===mt(t)?O(new m("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):on(this,t,e,r,o,u):O(new m("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Gn(this))throw ti("tee");var t=function(t,n){var i,e,r,o,u,s=K(t),h=!1,c=!1,a=!1,v=k((function(t){u=t}));function d(){return!0===h||(h=!0,x(C(rt(s),(function(t){if(h=!1,!0===t.done)return!1===c&&an(r.Xd),void(!1===a&&an(o.Xd));var n=t.value,i=n,e=n;!1===c&&vn(r.Xd,i),!1===a&&vn(o.Xd,e)})))),R(void 0)}function l(){}return r=Yn(l,d,(function(n){if(c=!0,i=n,!0===a){var r=f([i,e]),o=Zn(t,r);u(o)}return v})),o=Yn(l,d,(function(n){if(a=!0,e=n,!0===c){var r=f([i,e]),o=Zn(t,r);u(o)}return v})),D(s.Fd,(function(t){dn(r.Xd,t),dn(o.Xd,t)})),[r,o]}(this);return f(t)},t.prototype.getIterator=function(t){var n=(void 0===t?{}:t).preventCancel,i=void 0!==n&&n;if(!1===Gn(this))throw ti("getIterator");return function(t,n){void 0===n&&(n=!1);var i=K(t),e=p.create(ut);return e.zd=i,e.qd=Boolean(n),e}(this,i)},t}();function Yn(t,n,i,e,r){void 0===e&&(e=1),void 0===r&&(r=function(){return 1});var o=p.create(jn.prototype);return Kn(o),bn(o,p.create(un.prototype),t,n,i,e,r),o}function Kn(t){t.Ba="readable",t.Bd=void 0,t.Od=void 0,t.Zd=!1}function Gn(t){return!!s(t)&&!!p.prototype.hasOwnProperty.call(t,"Xd")}function $n(t){return void 0!==t.Bd}function Zn(t,n){return t.Zd=!0,"closed"===t.Ba?R(void 0):"errored"===t.Ba?O(t.Od):(Jn(t),C(t.Xd[j](n),r))}function Jn(t){t.Ba="closed";var n=t.Bd;void 0!==n&&(et(n)&&(n.Hd.forEach((function(t){t.Ud(L(void 0,!0,n.Nd))})),n.Hd=new M),X(n))}function Qn(t,n){t.Ba="errored",t.Od=n;var i=t.Bd;void 0!==i&&(et(i)?(i.Hd.forEach((function(t){t.Gd(n)})),i.Hd=new M):(i.Ff.forEach((function(t){t.Gd(n)})),i.Ff=new M),q(i,n))}function ti(t){return new m("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"===B(i.asyncIterator)&&p.defineProperty(jn.prototype,i.asyncIterator,{value:jn.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var ni=function(){function t(t){var n=t.highWaterMark;this.highWaterMark=n}return t.prototype.size=function(t){return t.byteLength},t}(),ii=function(){function t(t){var n=t.highWaterMark;this.highWaterMark=n}return t.prototype.size=function(){return 1},t}(),ei=function(){function t(t,n,i){void 0===t&&(t={}),void 0===n&&(n={}),void 0===i&&(i={});var e=n.size,r=n.highWaterMark,o=i.size,u=i.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var s=b(e);if(void 0===r&&(r=1),r=w(r),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var f,h=b(o);void 0===u&&(u=0),u=w(u),function(t,n,i,e,r,o){function u(){return n}function s(n){return function(t,n){var i=t.Vf;return!0===t.hf?C(t.Wf,(function(){var e=t.Uf;if("erroring"===e.Ba)throw e.Od;return vi(i,n)})):vi(i,n)}(t,n)}function f(n){return function(t,n){return oi(t,n),R(void 0)}(t,n)}function h(){return function(t){var n=t.Gf,i=t.Vf,e=i.Hf();return ci(i),C(e,(function(){if("errored"===n.Ba)throw n.Od;var t=n.Xd;!0===wn(t)&&an(t)}),(function(i){throw oi(t,i),n.Od}))}(t)}function c(){return function(t){return si(t,!1),t.Wf}(t)}function a(n){return ui(t,n),R(void 0)}t.Uf=function(t,n,i,e,r,o){void 0===r&&(r=1),void 0===o&&(o=function(){return 1});var u=p.create(lt.prototype);return bt(u),Bt(u,p.create(xt.prototype),t,n,i,e,r,o),u}(u,s,h,f,i,e),t.Gf=Yn(u,c,a,r,o),t.hf=void 0,t.Wf=void 0,t.Zf=void 0,si(t,!0),t.Vf=void 0}(this,k((function(t){f=t})),r,s,u,h),function(t,n){var i=p.create(fi.prototype),e=function(t){try{return ai(i,t),R(void 0)}catch(t){return O(t)}},r=n.transform;if(void 0!==r){if("function"!=typeof r)throw new m("transform is not a method");e=function(t){return l(r,n,[t,i])}}var o=v(n,"flush",0,[i]);!function(t,n,i,e){n.Xf=t,t.Vf=n,n.zf=i,n.Hf=e}(t,i,e,o)}(this,t);var c=d(t,"start",[this.Vf]);f(c)}return p.defineProperty(t.prototype,"readable",{get:function(){if(!1===ri(this))throw li("readable");return this.Gf},enumerable:!0,configurable:!0}),p.defineProperty(t.prototype,"writable",{get:function(){if(!1===ri(this))throw li("writable");return this.Uf},enumerable:!0,configurable:!0}),t}();function ri(t){return!!s(t)&&!!p.prototype.hasOwnProperty.call(t,"Vf")}function oi(t,n){dn(t.Gf.Xd,n),ui(t,n)}function ui(t,n){ci(t.Vf),Ft(t.Uf.Jd,n),!0===t.hf&&si(t,!1)}function si(t,n){void 0!==t.Wf&&t.Zf(),t.Wf=k((function(n){t.Zf=n})),t.hf=n}var fi=function(){function t(){throw new m("TransformStreamDefaultController instances cannot be created directly")}return p.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===hi(this))throw di("desiredSize");return ln(this.Xf.Gf.Xd)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===hi(this))throw di("enqueue");ai(this,t)},t.prototype.error=function(t){if(!1===hi(this))throw di("error");!function(t,n){oi(t.Xf,n)}(this,t)},t.prototype.terminate=function(){if(!1===hi(this))throw di("terminate");!function(t){var n=t.Xf,i=n.Gf.Xd;!0===wn(i)&&an(i);var e=new m("TransformStream terminated");ui(n,e)}(this)},t}();function hi(t){return!!s(t)&&!!p.prototype.hasOwnProperty.call(t,"Xf")}function ci(t){t.zf=void 0,t.Hf=void 0}function ai(t,n){var i=t.Xf,e=i.Gf.Xd;if(!1===wn(e))throw new m("Readable side is not in a state that permits enqueue");try{vn(e,n)}catch(t){throw ui(i,t),i.Gf.Od}var r=function(t){return!0!==hn(t)}(e);r!==i.hf&&si(i,!0)}function vi(t,n){return C(t.zf(n),void 0,(function(n){throw oi(t.Xf,n),n}))}function di(t){return new m("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function li(t){return new m("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=ni,t.CountQueuingStrategy=ii,t.ReadableStream=jn,t.TransformStream=ei,t.WritableStream=lt,p.defineProperty(t,"__esModule",{value:!0})},"object"===(void 0===t?"undefined":B(t))&&void 0!==i?o(t):"function"==typeof define&&define.amd?define(["exports"],o):o((r=r||self).WebStreamsPolyfill={})})),pt=C((function(t){function n(){var t=mt();return n=function(){return t},t}x(),gt(),p.defineProperty(t,"__esModule",{value:!0}),function(t,n){for(var i in n)p.defineProperty(t,i,{enumerable:!0,get:n[i]})}(t,{ByteLengthQueuingStrategy:function(){return n().ByteLengthQueuingStrategy},CountQueuingStrategy:function(){return n().CountQueuingStrategy},ReadableStream:function(){return n().ReadableStream},TransformStream:function(){return n().TransformStream},WritableStream:function(){return n().WritableStream}})}));function yt(t,n){return(yt=p.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function _t(t,n){if("function"!=typeof n&&null!==n)throw new m("Super expression must either be null or a function");t.prototype=p.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&yt(t,n)}function St(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),p.defineProperty(t,e.key,e)}}function Tt(t,n,i){return n&&St(t.prototype,n),i&&St(t,i),t}x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt();var Et,It=((Et={}).Sv="web",Et.Tv="android",Et.Ev="android-tv",Et.xv="ios",Et.Rv="tvos",Et.Iv="chromecast",Et.Cv="theoliveweb",Et);var kt=v?v.userAgent:"",Rt=kt.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Ot=kt.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Nt=kt.match(/Android ([0-9\.]+)/i),Pt=kt.match(/Windows NT ([0-9\.]+)/i),At=kt.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),Dt=kt.match(/Firefox\/([0-9\.]+)/i),Ct=kt.match(/OPR\/(\d+\.\d+)/i),xt=kt.match(/Tizen ([0-9\.]+)/i),Bt=kt.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),Mt=kt.match(/HbbTV\/([0-9.]+)/i),Lt=function(){function t(){this.Pv=Boolean("ontouchstart"in self||self.DocumentTouch&&a instanceof self.DocumentTouch||v&&v.msMaxTouchPoints),this.Nv=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(kt)||/(macintosh|mac(?=_powerpc)\s)/i.test(kt),this.Lv=/Windows NT/i.test(kt),this.Ov=Pt?S(Pt[1]):0,this.Vv=/Android/i.test(kt),this.Uv=Nt?S(Nt[1]):0,this.Hv=/windows phone (8|8\.1)/i.test(kt),this.Xv=/iPhone/i.test(kt),this.qv=/iPad/i.test(kt),this.Kv=this.Nv&&this.Pv&&!this.qv,this.Jv=/iPod/i.test(kt),this.dm=/Mobile Safari/i.test(kt),this.um=/EOS\d*STB/i.test(kt),this.lm=/APP\d*STB/i.test(kt),this.$v=(this.Xv||this.qv||this.Kv||this.Jv)&&!this.Hv,this.nm=Bt?S(Bt[2]):0,this.fm=this.Hv||this.$v||this.Vv||this.dm,this.vm=/CriOS/i.test(kt),this.pm=Boolean(self.chrome&&/google/i.test(v.vendor))||this.vm,this.Tm=this.pm&&/Edg\//i.test(v.userAgent),this.xm=Ot?_(Ot[1],10):0,this.Og=Boolean(/CriOS/i.test(kt)),this.Bg=Boolean(self.chrome||/Chrome/i.test(kt)||this.Og),this.Am=Rt?_(Rt[1],10):0,this.Cm=/SMART-TV.*Tizen/i.test(kt),this.Dm=xt?S(xt[1]):0,this.ym=this.Dm>0?function(t){return t>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0}(this.Dm):void 0,this.Mm=/webos|web0s/i.test(kt),this.Bm=/HbbTV/i.test(kt),this.Fm=!!Mt&&function(t){if(!t)return!1;var n=t.split(".").map(Number);return 3===n.length&&1===n[0]&&2===n[1]}(Mt[1]),this.Wm=/VIZIO/i.test(kt),this.Gm=/Edge\/\d+/i.test(kt),this.Zm=/Trident/i.test(kt),this.zm=this.Zm&&!self.ActiveXObject&&"ActiveXObject"in self,this.Ym=/Vivaldi/i.test(kt),this.jm=/Firefox/i.test(kt)&&!/Seamonkey/i.test(kt),this.Jm=Dt?S(Dt[1]):0,this.eg=/Safari/i.test(kt)&&!/Chrome/i.test(kt)&&!this.Hv&&!this.Cm,this.og=At?S(At[2]):0,this.ag=Boolean(Ct),this.dg=Ct?S(Ct[1]):0,this._g=/CrKey/.test(kt),this.gg=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(kt),this.yg=/PlayStation 4/i.test(kt),this.Sg="web"===It.Ev,this.Eg="web"===It.Tv,this.Rg=this.Eg||this.Sg,this.Cg="web"===It.xv,this.Dg="web"===It.Rv,this.Mg="web"===It.Iv}return Tt(t,[{key:"Je",get:function(){return this.Pv}},{key:"Dv",get:function(){return this.Nv}},{key:"Mv",get:function(){return this.Lv}},{key:"Bv",get:function(){return this.Ov}},{key:"Fv",get:function(){return this.Vv}},{key:"Wv",get:function(){return this.Uv}},{key:"Gv",get:function(){return this.Hv}},{key:"Zv",get:function(){return this.Xv}},{key:"zv",get:function(){return this.qv}},{key:"Yv",get:function(){return this.Kv}},{key:"Qv",get:function(){return this.Jv}},{key:"iu",get:function(){return this.$v}},{key:"im",get:function(){return this.nm}},{key:"hm",get:function(){return this.um||this.lm}},{key:"ad",get:function(){return this.dm}},{key:"Qs",get:function(){return this.fm}},{key:"_m",get:function(){return this.vm}},{key:"gm",get:function(){return this.pm}},{key:"wm",get:function(){var t;return null!=(t=this.ym)?t:this.Am}},{key:"Sm",get:function(){return this.Tm}},{key:"Em",get:function(){var t;return(null==(t=c.chrome)?void 0:t.webview)&&this.xm>0}},{key:"Rm",get:function(){return this.xm}},{key:"Im",get:function(){return this.Cm}},{key:"Pm",get:function(){return this.Dm}},{key:"Nm",get:function(){return this.Mm}},{key:"Lm",get:function(){return this.Bm}},{key:"Om",get:function(){return this.Fm}},{key:"Vm",get:function(){return this.Wm}},{key:"Um",get:function(){return this.Gm}},{key:"Hm",get:function(){return this.Zm}},{key:"Xm",get:function(){return this.zm}},{key:"qm",get:function(){return this.Ym}},{key:"Km",get:function(){return this.jm}},{key:"Qm",get:function(){return this.Jm}},{key:"$m",get:function(){return this.eg}},{key:"rg",get:function(){return this.og}},{key:"hg",get:function(){return this.ag}},{key:"cg",get:function(){return this.dg}},{key:"fg",get:function(){return this._g}},{key:"vg",get:function(){return this.gg}},{key:"pg",get:function(){return!(!this.Nm&&!this.Im)&&this.wm<=56}},{key:"wg",get:function(){return this.yg}},{key:"Ag",get:function(){return this.Sg}},{key:"Tg",get:function(){return this.Eg}},{key:"xg",get:function(){return this.Rg}},{key:"Ig",get:function(){return this.Cg}},{key:"Pg",get:function(){return this.Dg}},{key:"Ng",get:function(){return this.Mg}},{key:"Lg",get:function(){return this.Bg}},{key:"IS_IOS_CHROME",get:function(){return this.Og}}]),t}();Lt.Fg=new Lt;var Ut=Lt.Fg;x(),gt(),nt();var Ft={}.toString;function zt(t){return null!=t}var Wt,Ht=Array.isArray||function(t){return"[object Array]"===Ft.call(t)};function Vt(t){return"object"===(void 0===t?"undefined":B(t))&&null!==t}function qt(t){return"function"==typeof t}function Xt(t){return qt(t)||Vt(t)}function jt(t){Wt=t}x(),gt(),x(),gt();var Yt=function(){};function Kt(t){var n;return function(){return void 0!==t&&(n=t(),t=void 0),n}}function Gt(){return void 0!==a?a.createElement("video"):void 0}var $t=Kt(Gt);Kt((function(){return"undefined"!=typeof HTMLVideoElement&&$t()instanceof HTMLVideoElement}));x(),gt(),x(),gt(),x(),gt();var Zt=null;try{Zt=new WebAssembly.Instance(new WebAssembly.Module(new E([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(Et){}function Jt(t,n,i){this.low=0|t,this.high=0|n,this.unsigned=!!i}function Qt(t){return!0===(t&&t.Gg)}function tn(t){var n=y.clz32(t&-t);return t?31-n:n}Jt.prototype.Gg,p.defineProperty(Jt.prototype,"Gg",{value:!0}),Jt.isLong=Qt;var nn={},en={};function rn(t,n){var i,e,r;return n?(r=0<=(t>>>=0)&&t<256)&&(e=en[t])?e:(i=un(t,0,!0),r&&(en[t]=i),i):(r=-128<=(t|=0)&&t<128)&&(e=nn[t])?e:(i=un(t,t<0?-1:0,!1),r&&(nn[t]=i),i)}function on(t,n){if(T(t))return n?wn:ln;if(n){if(t<0)return wn;if(t>=an)return yn}else{if(t<=-vn)return _n;if(t+1>=vn)return pn}return t<0?on(-t,n).neg():un(t%cn|0,t/cn|0,n)}function un(t,n,i){return new Jt(t,n,i)}Jt.fromInt=rn,Jt.fromNumber=on,Jt.fromBits=un;var sn=y.pow;function fn(t,n,i){if(0===t.length)throw g("empty string");if("number"==typeof n?(i=n,n=!1):n=!!n,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return n?wn:ln;if((i=i||10)<2||36<i)throw RangeError("radix");var e;if((e=t.indexOf("-"))>0)throw g("interior hyphen");if(0===e)return fn(t.substring(1),n,i).neg();for(var r=on(sn(i,8)),o=ln,u=0;u<t.length;u+=8){var s=y.min(8,t.length-u),f=_(t.substring(u,u+s),i);if(s<8){var h=on(sn(i,s));o=o.mul(h).add(on(f))}else o=(o=o.mul(r)).add(on(f))}return o.unsigned=n,o}function hn(t,n){return"number"==typeof t?on(t,n):"string"==typeof t?fn(t,n):un(t.low,t.high,"boolean"==typeof n?n:t.unsigned)}Jt.fromString=fn,Jt.fromValue=hn;var cn=4294967296,an=cn*cn,vn=an/2,dn=rn(1<<24),ln=rn(0);Jt.ZERO=ln;var wn=rn(0,!0);Jt.UZERO=wn;var bn=rn(1);Jt.ONE=bn;var gn=rn(1,!0);Jt.UONE=gn;var mn=rn(-1);Jt.NEG_ONE=mn;var pn=un(-1,2147483647,!1);Jt.MAX_VALUE=pn;var yn=un(-1,-1,!0);Jt.MAX_UNSIGNED_VALUE=yn;var _n=un(0,-2147483648,!1);Jt.MIN_VALUE=_n;var Sn=Jt.prototype;Sn.toInt=function(){return this.unsigned?this.low>>>0:this.low},Sn.toNumber=function(){return this.unsigned?(this.high>>>0)*cn+(this.low>>>0):this.high*cn+(this.low>>>0)},Sn.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_n)){var n=on(t),i=this.div(n),e=i.mul(n).sub(this);return i.toString(t)+e.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var r=on(sn(t,6),this.unsigned),o=this,u="";;){var s=o.div(r),f=(o.sub(s.mul(r)).toInt()>>>0).toString(t);if((o=s).isZero())return f+u;for(;f.length<6;)f="0"+f;u=""+f+u}},Sn.getHighBits=function(){return this.high},Sn.getHighBitsUnsigned=function(){return this.high>>>0},Sn.getLowBits=function(){return this.low},Sn.getLowBitsUnsigned=function(){return this.low>>>0},Sn.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_n)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,n=31;n>0&&0==(t&1<<n);n--);return 0!=this.high?n+33:n+1},Sn.isZero=function(){return 0===this.high&&0===this.low},Sn.eqz=Sn.isZero,Sn.isNegative=function(){return!this.unsigned&&this.high<0},Sn.isPositive=function(){return this.unsigned||this.high>=0},Sn.isOdd=function(){return 1==(1&this.low)},Sn.isEven=function(){return 0==(1&this.low)},Sn.equals=function(t){return Qt(t)||(t=hn(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},Sn.eq=Sn.equals,Sn.notEquals=function(t){return!this.eq(t)},Sn.neq=Sn.notEquals,Sn.ne=Sn.notEquals,Sn.lessThan=function(t){return this.comp(t)<0},Sn.lt=Sn.lessThan,Sn.lessThanOrEqual=function(t){return this.comp(t)<=0},Sn.lte=Sn.lessThanOrEqual,Sn.le=Sn.lessThanOrEqual,Sn.greaterThan=function(t){return this.comp(t)>0},Sn.gt=Sn.greaterThan,Sn.greaterThanOrEqual=function(t){return this.comp(t)>=0},Sn.gte=Sn.greaterThanOrEqual,Sn.ge=Sn.greaterThanOrEqual,Sn.compare=function(t){if(Qt(t)||(t=hn(t)),this.eq(t))return 0;var n=this.isNegative(),i=t.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Sn.comp=Sn.compare,Sn.negate=function(){return!this.unsigned&&this.eq(_n)?_n:this.not().add(bn)},Sn.neg=Sn.negate,Sn.add=function(t){Qt(t)||(t=hn(t));var n=this.high>>>16,i=65535&this.high,e=this.low>>>16,r=65535&this.low,o=t.high>>>16,u=65535&t.high,s=t.low>>>16,f=0,h=0,c=0,a=0;return c+=(a+=r+(65535&t.low))>>>16,h+=(c+=e+s)>>>16,f+=(h+=i+u)>>>16,f+=n+o,un((c&=65535)<<16|(a&=65535),(f&=65535)<<16|(h&=65535),this.unsigned)},Sn.subtract=function(t){return Qt(t)||(t=hn(t)),this.add(t.neg())},Sn.sub=Sn.subtract,Sn.multiply=function(t){if(this.isZero())return this;if(Qt(t)||(t=hn(t)),Zt)return un(Zt.mul(this.low,this.high,t.low,t.high),Zt.get_high(),this.unsigned);if(t.isZero())return this.unsigned?wn:ln;if(this.eq(_n))return t.isOdd()?_n:ln;if(t.eq(_n))return this.isOdd()?_n:ln;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(dn)&&t.lt(dn))return on(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,e=this.low>>>16,r=65535&this.low,o=t.high>>>16,u=65535&t.high,s=t.low>>>16,f=65535&t.low,h=0,c=0,a=0,v=0;return a+=(v+=r*f)>>>16,c+=(a+=e*f)>>>16,a&=65535,c+=(a+=r*s)>>>16,h+=(c+=i*f)>>>16,c&=65535,h+=(c+=e*s)>>>16,c&=65535,h+=(c+=r*u)>>>16,h+=n*f+i*s+e*u+r*o,un((a&=65535)<<16|(v&=65535),(h&=65535)<<16|(c&=65535),this.unsigned)},Sn.mul=Sn.multiply,Sn.divide=function(t){if(Qt(t)||(t=hn(t)),t.isZero())throw g("division by zero");var n,i,e;if(Zt)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?un((this.unsigned?Zt.div_u:Zt.div_s)(this.low,this.high,t.low,t.high),Zt.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?wn:ln;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return wn;if(t.gt(this.shru(1)))return gn;e=wn}else{if(this.eq(_n))return t.eq(bn)||t.eq(mn)?_n:t.eq(_n)?bn:(n=this.shr(1).div(t).shl(1)).eq(ln)?t.isNegative()?bn:mn:(i=this.sub(t.mul(n)),e=n.add(i.div(t)));if(t.eq(_n))return this.unsigned?wn:ln;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();e=ln}for(i=this;i.gte(t);){n=y.max(1,y.floor(i.toNumber()/t.toNumber()));for(var r=y.ceil(y.log(n)/y.LN2),o=r<=48?1:sn(2,r-48),u=on(n),s=u.mul(t);s.isNegative()||s.gt(i);)s=(u=on(n-=o,this.unsigned)).mul(t);u.isZero()&&(u=bn),e=e.add(u),i=i.sub(s)}return e},Sn.div=Sn.divide,Sn.modulo=function(t){return Qt(t)||(t=hn(t)),Zt?un((this.unsigned?Zt.rem_u:Zt.rem_s)(this.low,this.high,t.low,t.high),Zt.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},Sn.mod=Sn.modulo,Sn.rem=Sn.modulo,Sn.not=function(){return un(~this.low,~this.high,this.unsigned)},Sn.countLeadingZeros=function(){return this.high?y.clz32(this.high):y.clz32(this.low)+32},Sn.clz=Sn.countLeadingZeros,Sn.countTrailingZeros=function(){return this.low?tn(this.low):tn(this.high)+32},Sn.ctz=Sn.countTrailingZeros,Sn.and=function(t){return Qt(t)||(t=hn(t)),un(this.low&t.low,this.high&t.high,this.unsigned)},Sn.or=function(t){return Qt(t)||(t=hn(t)),un(this.low|t.low,this.high|t.high,this.unsigned)},Sn.xor=function(t){return Qt(t)||(t=hn(t)),un(this.low^t.low,this.high^t.high,this.unsigned)},Sn.shiftLeft=function(t){return Qt(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?un(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):un(0,this.low<<t-32,this.unsigned)},Sn.shl=Sn.shiftLeft,Sn.shiftRight=function(t){return Qt(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?un(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):un(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Sn.shr=Sn.shiftRight,Sn.shiftRightUnsigned=function(t){return Qt(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?un(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):un(32===t?this.high:this.high>>>t-32,0,this.unsigned)},Sn.shru=Sn.shiftRightUnsigned,Sn.shr_u=Sn.shiftRightUnsigned,Sn.rotateLeft=function(t){var n;return Qt(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?un(this.high,this.low,this.unsigned):t<32?(n=32-t,un(this.low<<t|this.high>>>n,this.high<<t|this.low>>>n,this.unsigned)):(n=32-(t-=32),un(this.high<<t|this.low>>>n,this.low<<t|this.high>>>n,this.unsigned))},Sn.rotl=Sn.rotateLeft,Sn.rotateRight=function(t){var n;return Qt(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?un(this.high,this.low,this.unsigned):t<32?(n=32-t,un(this.high<<n|this.low>>>t,this.low<<n|this.high>>>t,this.unsigned)):(n=32-(t-=32),un(this.low<<n|this.high>>>t,this.high<<n|this.low>>>t,this.unsigned))},Sn.rotr=Sn.rotateRight,Sn.toSigned=function(){return this.unsigned?un(this.low,this.high,!1):this},Sn.toUnsigned=function(){return this.unsigned?this:un(this.low,this.high,!0)},Sn.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Sn.toBytesLE=function(){var t=this.high,n=this.low;return[255&n,n>>>8&255,n>>>16&255,n>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},Sn.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,n>>>24,n>>>16&255,n>>>8&255,255&n]},Jt.fromBytes=function(t,n,i){return i?Jt.fromBytesLE(t,n):Jt.fromBytesBE(t,n)},Jt.fromBytesLE=function(t,n){return new Jt(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)},Jt.fromBytesBE=function(t,n){return new Jt(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)};var Tn=Jt;x(),gt();var En=9007199254740991;y.pow(2,-52);function In(){return Date.now()||(new Date).getTime()}Tn.fromNumber(En);var kn=!!("ontouchstart"in self||self.DocumentTouch&&a instanceof self.DocumentTouch)||!(!v||!v.msMaxTouchPoints),Rn=$t(),On=!(!Rn||!Rn.webkitShowPlaybackTargetPicker),Nn=function(){function t(){this.Zg=void 0,this.fp=!1,this.Je=kn,this.Qs=!1,this._p=!0}var n=t.prototype;return n.Xg=function(){return 0},n.lp=function(t,n){return!0},n.dp=function(t){return t>=.3333333333333333},Tt(t,[{key:"Hg",get:function(){return void 0===this.Zg&&(this.Zg=this.Xg()),this.Zg}},{key:"zg",get:function(){return!Ut.vg}},{key:"qg",get:function(){if(c.screen)return{width:c.screen.width,height:c.screen.height}}},{key:"Yg",get:function(){return c.devicePixelRatio||1}},{key:"Kg",get:function(){return On}},{key:"jg",get:function(){return!1}},{key:"Qg",get:function(){return!0}},{key:"Jg",get:function(){return!(!Ut.$m&&!Ut.iu)||!!Ut.Vm}},{key:"$g",get:function(){return Ut.Vm}},{key:"tp",get:function(){return!Ut.iu}},{key:"ep",get:function(){return!0}},{key:"sp",get:function(){return!0}},{key:"np",get:function(){return!1}},{key:"rp",get:function(){}},{key:"op",get:function(){return!0}},{key:"hp",get:function(){return!1}},{key:"ap",get:function(){return Ut.Vm}},{key:"cp",get:function(){return!1}}]),t}(),Pn=function(t){function n(){return t.call(this)||this}return _t(n,t),n}(Nn);x(),gt();var An=function(t){function n(){return t.apply(this,arguments)||this}return _t(n,t),n.prototype.lp=function(t,n){if(t&&t.vp&&n&&n.vp){var i=Dn(t.vp,"mp4a.40.2")&&Dn(n.vp,"mp4a.40.5"),e=Dn(t.vp,"mp4a.40.5")&&Dn(n.vp,"mp4a.40.2"),r=Dn(t.vp,"mp4a.40.2")&&Dn(n.vp,"mp4a.40.34"),o=Dn(t.vp,"mp4a.40.34")&&Dn(n.vp,"mp4a.40.2"),u=Dn(t.vp,"mp4a.40.5")&&Dn(n.vp,"mp4a.40.34"),s=Dn(t.vp,"mp4a.40.34")&&Dn(n.vp,"mp4a.40.5");return!(i||e||r||o||u||s)}return!0},Tt(n,[{key:"rp",get:function(){if(Ut.Dv)return 4096}}]),n}(Pn);function Dn(t,n){return t.indexOf(n)>-1}x(),gt();var Cn=function(t){function n(){return t.apply(this,arguments)||this}return _t(n,t),n.prototype.dp=function(t){return t>=2},n}(Pn);x(),gt();var xn=function(t){function n(){var n;return(n=t.call(this)||this).fp=Ut.rg>=11,n._p=Ut.$m&&!(Ut.iu&&Ut.rg<10),n}return _t(n,t),Tt(n,[{key:"cp",get:function(){return Ut.rg<17}}]),n}(Pn);x(),gt();var Bn,Mn=function(t){function n(){return t.apply(this,arguments)||this}return _t(n,t),Tt(n,[{key:"op",get:function(){return!Ut.Mv||(Ut.Sm?92!==Ut.Rm:Ut.wm>=100)}}]),n}(Pn);x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt();var Ln=function(){var t=Gt();if(!t)return!1;var n=t.muted;return t.muted=!n,t.muted!==n}();!function(){if(Ut.Yv)return!1;var t=Gt();if(!t)return!1;var n=t.volume;t.volume=n/2+.1,t.volume}();var Un=function(t){function n(n){var i;return(i=t.call(this)||this).mp=n,i.fp=i.mp.fp,i.Je=i.mp.Je,i._p=Ln&&i.mp._p,i}_t(n,t);var i=n.prototype;return i.Xg=function(){return this.mp.Hg},i.lp=function(t,n){return this.mp.lp(t,n)},i.dp=function(t){return this.mp.dp(t)},Tt(n,[{key:"rp",get:function(){return this.mp.rp}},{key:"op",get:function(){return this.mp.op}},{key:"cp",get:function(){return this.mp.cp}}]),n}(Nn),Fn=function(t){function n(n){var i;return(i=t.call(this,n)||this).fp=!0,i.Qs=!0,i}return _t(n,t),Tt(n,[{key:"np",get:function(){return Ut.iu}}]),n}(Un);x(),gt();var zn=function(t){function n(){return t.apply(this,arguments)||this}return _t(n,t),n.prototype.Xg=function(){return function(t){return t&&Xt(c.ManagedMediaSource)?c.ManagedMediaSource:Xt(c.MediaSource)?c.MediaSource:void 0}(!0)?t.prototype.Xg.call(this):1},Tt(n,[{key:"np",get:function(){return!0}}]),n}(Fn);x(),gt();var Wn=function(t){function n(){return t.apply(this,arguments)||this}return _t(n,t),n.prototype.lp=function(n,i){return t.prototype.lp.call(this,n,i)},Tt(n,[{key:"jg",get:function(){return Ut.Pm<3}},{key:"Qg",get:function(){return Ut.Pm>=3}},{key:"qg",get:function(){var t=this;return c.tizen&&!this.yp&&c.tizen.systeminfo.getPropertyValue("DISPLAY",(function(n){var i=n.resolutionWidth,e=n.resolutionHeight;1===i&&1===e||(t.yp={width:i,height:e})})),this.yp}},{key:"hp",get:function(){return Ut.Pm<3}}]),n}(Un);x(),gt();var Hn=function(t){function n(){return t.apply(this,arguments)||this}return _t(n,t),Tt(n,[{key:"qg",get:function(){var t=this;return c.webOS&&!this.yp&&c.webOS.deviceInfo((function(n){t.yp={width:n.screenWidth,height:n.screenHeight}})),this.yp}},{key:"ep",get:function(){return!1}}]),n}(Un);x(),gt();var Vn=function(t){function n(){return t.apply(this,arguments)||this}return _t(n,t),Tt(n,[{key:"np",get:function(){return!0}}]),n}(Un);function qn(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,e=new Array(n);i<n;i++)e[i]=t[i];return e}function Xn(t,n){if(t){if("string"==typeof t)return qn(t,n);var i=p.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?qn(t,n):void 0}}function jn(t){return function(t){if(Array.isArray(t))return qn(t)}(t)||function(t){if(void 0!==n&&null!=t[e]||null!=t["@@iterator"])return Array.from(t)}(t)||Xn(t)||function(){throw new m("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(t){Bn=t}(function(){var t=function(){if(Ut.Km)return new An;if(Ut.Um||Ut.Hm)return new Cn;if(Ut.$m)return new xn;if(Ut.gm)return new Mn;return new Pn}();return Ut.iu?new zn(t):Ut.Qs?new Fn(t):Ut.Im?new Wn(t):Ut.Nm?new Hn(t):Ut.Dv?new Vn(t):new Un(t)}()),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),nt(),x(),gt();var Yn=!(Ut.Hm&&!Ut.Xm),Kn=self.console;function Gn(t){if(Vt(t))try{return JSON.stringify(t)}catch(t){}return t}function $n(t){return t.map(Gn).join(" ")}function Zn(t){var n=Kn&&Kn[t];return n?n.bind&&Yn?n.bind(Kn):function(){for(var n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];Kn[t]($n(i))}:void 0}var Jn=Zn("log")||Yt,Qn=Zn("warn")||Jn.bind(void 0,"WARNING:"),ti=Zn("error")||Jn.bind(void 0,"ERROR:"),ni=function(){var t=Kn&&Kn.assert;return t?t.bind&&Yn?t.bind(Kn):function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),e=1;e<n;e++)i[e-1]=arguments[e];Kn.assert(t,$n(i))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),e=1;e<n;e++)i[e-1]=arguments[e];t||ti.apply(void 0,["Assertion failed:"].concat(jn(i)))}}();function ii(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),p.defineProperty(t,e.key,e)}}function ei(t,n){var i=function(t,n){var i=t.length;if(i<=1)return t;for(var e=new Array(i),r=1;r<i;r*=2){ri(t,n,r,e);var o=t;t=e,e=o}return t}(t,n);return i!==t&&ri(i,null,t.length,t),t}function ri(t,n,i,e){var r,o,u,s,f,h=t.length,c=0,a=2*i;for(r=0;r<h;r+=a)for(u=(o=r+i)+i,o>h&&(o=h),u>h&&(u=h),s=r,f=o;;)if(s<o&&f<u)n(t[s],t[f])<=0?e[c++]=t[s++]:e[c++]=t[f++];else if(s<o)e[c++]=t[s++];else{if(!(f<u))break;e[c++]=t[f++]}}x(),gt();var oi=/[a-zA-Z]/,ui=/[0-9]/,si=/[0-9a-fA-F]/,fi=/^0x/i,hi=/^[0-9]+$/,ci=/^[0-9a-fA-F]+$/,ai=/^[0-7]+$/,vi=p.prototype.toString,di=Array.isArray||function(t){return"[object Array]"===vi.call(t)},li=void 0!==n&&"symbol"==typeof e;function wi(t){return di(t)?t:Array.from(t)}function bi(t,n,i){var e=t[n];t[n]=t[i],t[i]=e}function gi(t){return t>=65&&t<=90}function mi(t){return gi(t)||function(t){return t>=97&&t<=122}(t)}function pi(t){return t>=48&&t<=57}function yi(t){return pi(t)||mi(t)}function _i(t){return pi(t)||t>=65&&t<=70||t>=97&&t<=102}function Si(t){return gi(t)?t+32:t}function Ti(t){return pi(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function Ei(t,n){return void 0===n&&(n=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(n?87:55):-1}var Ii=y.min,ki=String.fromCharCode,Ri=16384;function Oi(t){for(var n=t.length,i=[],e=0;e<n;e+=Ri){var r=Ii(e+Ri,n);i.push(ki.apply(null,t.slice(e,r)))}return i.join("")}var Ni=2147483647,Pi=/[^\0-\x7E]/,Ai=/[\x2E\u3002\uFF0E\uFF61]/g,Di={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ci=y.floor,xi=String.fromCharCode;function Bi(t){throw new RangeError(Di[t])}function Mi(t){for(var n=[],i=0,e=t.length;i<e;){var r=t.charCodeAt(i++);if(r>=55296&&r<=56319&&i<e){var o=t.charCodeAt(i++);56320==(64512&o)?n.push(((1023&r)<<10)+(1023&o)+65536):(n.push(r),i--)}else n.push(r)}return n}var Li,Ui,Fi,zi=function(t,n){return t+22+75*(t<26)-((0!=n)<<5)},Wi=function(t,n,i){var e=0;for(t=i?Ci(t/700):t>>1,t+=Ci(t/n);t>455;e+=36)t=Ci(t/35);return Ci(e+36*t/(t+38))},Hi=function(t){return function(t,n){var i=t.split("@"),e="";i.length>1&&(e=i[0]+"@",t=i[1]);var r=function(t,n){for(var i=[],e=t.length;e--;)i[e]=n(t[e]);return i}((t=t.replace(Ai,".")).split("."),n).join(".");return e+r}(t,(function(t){return Pi.test(t)?"xn--"+function(t){for(var n=[],i=(t=Mi(t)).length,e=128,r=0,o=72,u=0,s=t;u<s.length;u++){var f=s[u];f<128&&n.push(xi(f))}var h=n.length,c=h;for(h&&n.push("-");c<i;){for(var a=Ni,v=0,d=t;v<d.length;v++){var l=d[v];l>=e&&l<a&&(a=l)}var w=c+1;a-e>Ci((Ni-r)/w)&&Bi("overflow"),r+=(a-e)*w,e=a;for(var b=0,g=t;b<g.length;b++){var m=g[b];if(m<e&&++r>Ni&&Bi("overflow"),m==e){for(var p=r,y=36;;y+=36){var _=y<=o?1:y>=o+26?26:y-o;if(p<_)break;var S=p-_,T=36-_;n.push(xi(zi(_+S%T,0))),p=Ci(S/T)}n.push(xi(zi(p,0))),o=Wi(r,w,c==h),r=0,++c}}++r,++e}return n.join("")}(t):t}))};function Vi(t){for(var n=[],i=0;i<t.length;i++){var e=t[i];e>65535&&(e-=65536,n.push(e>>>10&1023|55296),e=56320|1023&e),n.push(e)}return Oi(n)}function qi(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Xi(t,n){return t>>n&63|128}function ji(t,n){0!=(4294967168&t)?(0==(4294965248&t)?n.push(t>>6&31|192):0==(4294901760&t)?(qi(t),n.push(t>>12&15|224),n.push(Xi(t,6))):0==(4292870144&t)&&(n.push(t>>18&7|240),n.push(Xi(t,12)),n.push(Xi(t,6))),n.push(63&t|128)):n.push(t)}function Yi(t){for(var n=[],i=0;i<t.length;i++){ji(t[i],n)}return n}function Ki(){if(Fi>=Ui)throw new g("Invalid byte index");var t=255&Li[Fi];if(Fi++,128==(192&t))return 63&t;throw new g("Invalid continuation byte")}function Gi(){var t,n;if(Fi>Ui)throw new g("Invalid byte index");if(Fi===Ui)return!1;if(t=255&Li[Fi],Fi++,0==(128&t))return t;if(192==(224&t)){if((n=(31&t)<<6|Ki())>=128)return n;throw new g("Invalid continuation byte")}if(224==(240&t)){if((n=(15&t)<<12|Ki()<<6|Ki())>=2048)return qi(n),n;throw new g("Invalid continuation byte")}if(240==(248&t)&&(n=(7&t)<<18|Ki()<<12|Ki()<<6|Ki())>=65536&&n<=1114111)return n;throw new g("Invalid UTF-8 detected")}function $i(t){return[37,Ei(t>>4),Ei(15&t)]}function Zi(t){return function(t){return t>=0&&t<=31}(t)||t>126}function Ji(t){return Zi(t)||32===t||34===t||60===t||62===t||96===t}function Qi(t){return Ji(t)||35===t||63===t||123===t||125===t}function te(t){return Qi(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function ne(t){return t<33||t>126||34===t||35===t||60===t||62===t}function ie(t){return ne(t)||39===t}function ee(t,n){if(!n(t))return[t];for(var i=Yi([t]),e=[],r=0;r<i.length;r++){var o=i[r];e.push.apply(e,$i(o))}return e}function re(t,n){for(var i=[],e=0,r=Mi(t);e<r.length;e++){var o=r[e];i.push.apply(i,ee(o,n))}return Vi(i)}function oe(t){return function(t){for(var n=[],i=t.length,e=0;e<i;e++){var r=t[e];if(37===r&&e+2<i&&_i(t[e+1])&&_i(t[e+2])){var o=Ti(t[e+1])<<4|Ti(t[e+2]);n.push(o),e+=2}else n.push(r)}return n}(Yi(t))}function ue(t){return Vi(function(t){Li=t.slice(),Ui=Li.length,Fi=0;for(var n,i=[];!1!==(n=Gi());)i.push(n);return i}(oe(Mi(t))))}function se(t){var n=t.length,i=[0,0,0,0,0,0,0,0],e=0,r=null,o=0;if(o<n&&":"===t[o]){if(!(o+1<n&&":"===t[o+1]))throw new m;o+=2,r=e+=1}for(;o<n;){if(8===e)throw new m("Too many groups");if(":"!==t[o]){for(var u=0,s=0;s<4&&o<n&&si.test(t[o]);)u=u<<4|_(t[o],16),o+=1,s+=1;if("."===t[o]){if(0===s)throw new m;if(o-=s,e>6)throw new m;for(var f=0;o<n;){var h=null;if(f>0){if(!("."===t[o]&&f<4))throw new m;o+=1}if(!ui.test(t[o]))throw new m;for(;o<n&&ui.test(t[o]);){var c=_(t[o],10);if(null===h)h=c;else{if(0===h)throw new m;if((h=10*h+c)>255)throw new m}o+=1}i[e]=i[e]<<8|h,2!==(f+=1)&&4!==f||(e+=1)}if(4!==f)throw new m;break}if(":"===t[o]){if((o+=1)===n)throw new m}else if(o<n)throw new m;i[e]=u,e+=1}else{if(null!==r)throw new m("Too many :: groups");o+=1,r=e+=1}}if(null!==r){var a=e-r;for(e=7;0!==e&&a>0;)bi(i,e,r+a-1),e-=1,a-=1}else if(8!==e)throw new m;return i}function fe(t){var n=10,i=hi;return fi.test(t)?(t=t.slice(2),n=16,i=ci):t.length>=2&&"0"===t[0]&&(t=t.slice(1),n=8,i=ai),""===t?0:i.test(t)?_(t,n):void 0}var he={bp:4},ce=/[\0\t\n\r #%/:?@\[\\\]]/,ae=/[\0\t\n\r #/:?@\[\\\]]/;function ve(t,n){if("["===t[0]){if("]"!==t[t.length-1])throw new m("Invalid IPv6 address");return{bp:2,Ap:se(t.slice(1,-1))}}if(!n)return function(t){if(ae.test(t))throw new m("Invalid code point in opaque host");var n=re(t,Zi);return""===n?he:{bp:3,Sp:n}}(t);var i=function(t){var n=function(t){return Hi(t.toLowerCase())}(t);return n}(ue(t));if(ce.test(i))throw new m("Invalid code point in host");var e=function(t){var n=t.split(".");if(""===n[n.length-1]&&n.pop(),!(n.length>4)){for(var i=[],e=0;e<n.length;e++){var r=n[e];if(""===r)return;var o=fe(r);if(void 0===o)return;i.push(o)}for(var u=0;u<i.length-1;u++)if(i[u]>255)throw new m;if(i[i.length-1]>=y.pow(256,5-i.length))throw new m;for(var s=i.pop(),f=0;f<i.length;f++)s+=i[f]*y.pow(256,3-f);return s}}(i);return void 0!==e?{bp:1,Ap:e}:""===i?he:{bp:0,Tp:i}}function de(t){switch(t.bp){case 0:return t.Tp;case 1:return function(t){for(var n=[],i=t,e=1;e<=4;e++)n.push(""+(255&i)),4!==e&&n.push("."),i>>>=8;return n.reverse().join("")}(t.Ap);case 2:return"["+function(t){for(var n="",i=function(t){for(var n=0,i=0,e=0,r=0,o=0;o<8;o++)0===t[o]?(0===r&&(e=o),r++):(r>i&&(n=e,i=r),r=0);return r>i&&(n=e,i=r),i>1?n:null}(t),e=!1,r=0;r<8;r++){if(e){if(0===t[r])continue;e=!1}i!==r?(n+=t[r].toString(16),7!==r&&(n+=":")):(n+=0===r?"::":":",e=!0)}return n}(t.Ap)+"]";case 3:return t.Sp;case 4:return""}}var le=/\+/g;function we(t){return 42===t||45===t||46===t||95===t||yi(t)}function be(t){for(var n=t.split("&"),i=[],e=0;e<n.length;e++){var r=n[e];if(""!==r){var o=r.indexOf("="),u=void 0,s=void 0;-1!==o?(u=r.slice(0,o),s=r.slice(o+1)):(u=r,s=""),u=u.replace(le," "),s=s.replace(le," ");var f=ue(u),h=ue(s);i.push([f,h])}}return i}function ge(t){for(var n="",i=0;i<t.length;i++){var e=t[i];i>0&&(n+="&"),n+=me(Yi(Mi(e[0])))+"="+me(Yi(Mi(e[1])))}return n}function me(t){for(var n=[],i=0;i<t.length;i++){var e=t[i];32===e?n.push(43):we(e)?n.push(e):n.push.apply(n,$i(e))}return Oi(n)}var pe=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function ye(t){var n=""+t,i=pe.exec(n);return i?function(t,n){for(var i=t.length,e=[],r=n;r<i;r++){var o=t.charCodeAt(r);if(Se(o))if(Te(o)||r===i-1)e.push(_e);else{var u=t.charCodeAt(r+1);Te(u)?(e.push(o,u),r++):e.push(_e)}else e.push(o)}return t.slice(0,n)+Oi(e)}(n,i.index):n}var _e=65533,Se=function(t){return 55296==(63488&t)},Te=function(t){return 0!=(1024&t)};function Ee(t,n){var i=t[0],e=n[0];return i===e?0:i<e?-1:1}function Ie(t){t.P_.length=0}function ke(t,n){!function(t,n){for(var i=0;i<n.length;i++)t[i]=n[i];t.length=n.length}(t.P_,be(n))}function Re(t){if(t.tc){var n=ge(t.P_);""===n&&(n=null),t.tc.tc.kp=n}}var Oe=function(){function t(t){if(void 0===t&&(t=void 0),this.tc=null,null==t)this.P_=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof Oe&&!!di(t.P_)&&(!li||t[e]===Ne)}(t))this.P_=t.P_.slice();else if(function(t){return null!=t&&(!!di(t)||!!li&&"function"==typeof t[e])}(t)){this.P_=[];for(var n=0,i=wi(t);n<i.length;n++){var r=wi(i[n]);if(2!==r.length)throw new m("Invalid name-value pair");this.P_.push([ye(r[0]),ye(r[1])])}}else for(var o in this.P_=[],t)p.prototype.hasOwnProperty.call(t,o)&&this.P_.push([ye(o),ye(t[o])]);else(t=ye(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.P_=be(t)}var n=t.prototype;return n.append=function(t,n){t=ye(t),n=ye(n),this.P_.push([t,n]),Re(this)},n.delete=function(t){t=ye(t);for(var n=this.P_,i=0;i<n.length;){n[i][0]===t?n.splice(i,1):i++}Re(this)},n.get=function(t){t=ye(t);for(var n=this.P_,i=0;i<n.length;i++){var e=n[i];if(e[0]===t)return e[1]}return null},n.getAll=function(t){t=ye(t);for(var n=this.P_,i=[],e=0;e<n.length;e++){var r=n[e];r[0]===t&&i.push(r[1])}return i},n.has=function(t){t=ye(t);for(var n=this.P_,i=0;i<n.length;i++){if(n[i][0]===t)return!0}return!1},n.set=function(t,n){t=ye(t),n=ye(n);for(var i=this.P_,e=!1,r=0;r<i.length;){var o=i[r];o[0]===t?e?i.splice(r,1):(o[1]=n,e=!0,r++):r++}e||i.push([t,n]),Re(this)},n.sort=function(){ei(this.P_,Ee),Re(this)},n.toString=function(){return ge(this.P_)},n.entries=function(){return new Ce(this.P_,Pe)},n.keys=function(){return new Ce(this.P_,Ae)},n.values=function(){return new Ce(this.P_,De)},n.forEach=function(t){var n=this;this.P_.forEach((function(i){return t(i[1],i[0],n)}))},t}(),Ne=Oe.prototype.entries;li&&(Oe.prototype[e]=Ne);var Pe=function(t){return[t[0],t[1]]},Ae=function(t){return t[0]},De=function(t){return t[1]},Ce=function(){function t(t,n){this.Ep=0,this.P_=t,this.xp=n}return t.prototype.next=function(){return this.Ep<this.P_.length?{done:!1,value:this.xp(this.P_[this.Ep++])}:{done:!0,value:void 0}},t}(),xe="null";var Be=p.create(null);Be.ftp=21,Be.file=0,Be.gopher=70,Be.http=80,Be.https=443,Be.ws=80,Be.wss=443;var Me=/^(?:\.|%2e)$/i,Le=/^(?:\.|%2e){2}$/i;function Ue(t){return Me.test(t)}function Fe(t){return Le.test(t)}function ze(t){return void 0!==Be[t]}function We(t){return ze(t.Rp)}function He(t){return""!==t.Ip||""!==t.Cp}function Ve(t){var n=t.length;if(!(n>=2))return!1;if(!Xe(t.slice(0,2)))return!1;if(2!==n){var i=t[2];if(47!==i&&92!==i&&63!==i&&35!==i)return!1}return!0}function qe(t){return 2===t.length&&oi.test(t[0])&&(":"===t[1]||"|"===t[1])}function Xe(t){return 2===t.length&&qe(Oi(t))}function je(t){return qe(t)&&":"===t[1]}function Ye(t){var n=t.Pp;0!==n.length&&("file"===t.Rp&&1===n.length&&je(n[0])||n.pop())}function Ke(t){return null===t.Dp||he===t.Dp||t.Np||"file"===t.Rp}var Ge=-1,$e=/\t|\n|\r/g,Ze=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function Je(t,n,i,e){void 0===i&&(i=null),void 0===e&&(e=null),i||(i=new tr,t=t.replace(Ze,""));var r=null!==e?e:0;n=n||null;for(var o=[],u=!1,s=!1,f=!1,h=Mi(t=t.replace($e,"")),c=h.length,a=0;a<=c;){var v=a<c?h[a]:Ge;switch(r){case 0:if(!mi(v)){if(null===e){o.length=0,r=2;continue}throw new m("Invalid scheme")}o.push(Si(v)),r=1;break;case 1:if(yi(v)||43===v||45===v||46===v)o.push(Si(v));else{if(58!==v){if(null===e){o.length=0,r=2,a=0;continue}throw new m("Invalid scheme")}var d=Vi(o);if(null!==e){if(ze(i.Rp)&&!ze(d))return;if(!ze(i.Rp)&&ze(d))return;if((He(i)||null!==i.Mp)&&"file"===d)return;if("file"===i.Rp&&(i.Dp===he||null===i.Dp))return}if(i.Rp=d,null!==e)return void(We(i)&&i.Mp===Be[i.Rp]&&(i.Mp=null));o.length=0,"file"===i.Rp?r=13:We(i)&&n&&n.Rp===i.Rp?r=3:We(i)?r=7:47===h[a+1]?(r=4,a+=1):(i.Np=!0,i.Pp.push(""),r=18)}break;case 2:if(!n||n.Np&&35!==v)throw new m("Invalid scheme");n.Np&&35===v?(i.Rp=n.Rp,i.Pp=n.Pp.slice(),i.kp=n.kp,i.Lp="",i.Np=!0,r=20):"file"!==n.Rp?(r=5,a-=1):(r=13,a-=1);break;case 3:47===v&&47===h[a+1]?r=8:(r=5,a-=1);break;case 4:47===v?r=9:(r=17,a-=1);break;case 5:i.Rp=n.Rp,Ge===v?(i.Ip=n.Ip,i.Cp=n.Cp,i.Dp=n.Dp,i.Mp=n.Mp,i.Pp=n.Pp.slice(),i.kp=n.kp):47===v?r=6:63===v?(i.Ip=n.Ip,i.Cp=n.Cp,i.Dp=n.Dp,i.Mp=n.Mp,i.Pp=n.Pp.slice(),i.kp="",r=19):35===v?(i.Ip=n.Ip,i.Cp=n.Cp,i.Dp=n.Dp,i.Mp=n.Mp,i.Pp=n.Pp.slice(),i.kp=n.kp,i.Lp="",r=20):92===v&&We(i)?r=6:(i.Ip=n.Ip,i.Cp=n.Cp,i.Dp=n.Dp,i.Mp=n.Mp,i.Pp=n.Pp.slice(),i.Pp.pop(),r=17,a-=1);break;case 6:!We(i)||47!==v&&92!==v?47===v?r=9:(i.Ip=n.Ip,i.Cp=n.Cp,i.Dp=n.Dp,i.Mp=n.Mp,r=17,a-=1):r=8;break;case 7:if(47!==v||47!==h[a+1]){r=8;continue}r=8,a+=1;break;case 8:47!==v&&92!==v&&(r=9,a-=1);break;case 9:if(64===v){u&&o.unshift(37,52,48),u=!0;for(var l=0;l<o.length;l++){var w=o[l];if(58!==w||f){var b=Vi(ee(w,te));f?i.Cp+=b:i.Ip+=b}else f=!0}o.length=0}else if(Ge===v||47===v||63===v||35===v||We(i)&&92===v){if(u&&0===o.length)throw new m("Invalid host");a-=o.length+1,o.length=0,r=10}else o.push(v);break;case 10:case 11:if(null!==e&&"file"===i.Rp)a-=1,r=15;else if(58!==v||s)if(Ge===v||47===v||63===v||35===v||We(i)&&92===v){if(a-=1,We(i)&&0===o.length)throw new m("Invalid host");if(null!==e&&0===o.length&&(He(i)||null!==i.Mp))return;var g=ve(Vi(o),We(i));if(i.Dp=g,o.length=0,r=16,null!==e)return}else 91===v?s=!0:93===v&&(s=!1),o.push(v);else{if(0===o.length)throw new m("Invalid host");var p=ve(Vi(o),We(i));if(i.Dp=p,o.length=0,r=12,11===e)return}break;case 12:if(pi(v))o.push(v);else{if(!(Ge===v||47===v||63===v||35===v||We(i)&&92===v||null!==e))throw new m("Invalid port");if(0!==o.length){var y=_(Vi(o),10);if(y>65535)throw new m("Invalid port");i.Mp=y===Be[i.Rp]?null:y,o.length=0}if(null!==e)return;r=16,a-=1}break;case 13:i.Rp="file",47===v||92===v?r=14:n&&"file"===n.Rp?Ge===v?(i.Dp=n.Dp,i.Pp=n.Pp.slice(),i.kp=n.kp):63===v?(i.Dp=n.Dp,i.Pp=n.Pp.slice(),i.kp="",r=19):35===v?(i.Dp=n.Dp,i.Pp=n.Pp.slice(),i.kp=n.kp,i.Lp="",r=20):(Ve(h.slice(a))||(i.Dp=n.Dp,i.Pp=n.Pp.slice(),Ye(i)),r=17,a-=1):(r=17,a-=1);break;case 14:47===v||92===v?r=15:(n&&"file"===n.Rp&&!Ve(h.slice(a))&&(je(n.Pp[0])?i.Pp.push(n.Pp[0]):i.Dp=n.Dp),r=17,a-=1);break;case 15:if(Ge===v||47===v||92===v||63===v||35===v)if(a-=1,null===e&&Xe(o))r=17;else if(0===o.length){if(i.Dp=he,null!==e)return;r=16}else{var S=ve(Vi(o),We(i));if(0===S.bp&&"localhost"===S.Tp&&(S=he),i.Dp=S,null!==e)return;o.length=0,r=16}else o.push(v);break;case 16:We(i)?(r=17,47!==v&&92!==v&&(a-=1)):null===e&&63===v?(i.kp="",r=19):null===e&&35===v?(i.Lp="",r=20):Ge!==v&&(r=17,47!==v&&(a-=1));break;case 17:if(Ge===v||47===v||We(i)&&92===v||null===e&&(63===v||35===v)){var T=Vi(o);if(Fe(T)?(Ye(i),47===v||We(i)&&92===v||i.Pp.push("")):!Ue(T)||47===v||We(i)&&92===v?Ue(T)||("file"===i.Rp&&0===i.Pp.length&&Xe(o)&&(he!==i.Dp&&null!==i.Dp&&(i.Dp=he),o[1]=58,T=Vi(o)),i.Pp.push(T)):i.Pp.push(""),o.length=0,"file"===i.Rp&&(Ge===v||63===v||35===v))for(;i.Pp.length>1&&""===i.Pp[0];)i.Pp.shift();63===v?(i.kp="",r=19):35===v&&(i.Lp="",r=20)}else o.push.apply(o,ee(v,Qi));break;case 18:63===v?(i.kp="",r=19):35===v?(i.Lp="",r=20):Ge!==v&&(i.Pp[0]+=Vi(ee(v,Zi)));break;case 19:null===e&&35===v?(i.Lp="",r=20):Ge!==v&&(i.kp+=Vi(ee(v,We(i)?ie:ne)));break;case 20:Ge===v||0===v||(i.Lp+=Vi(ee(v,Ji)))}a++}return i}function Qe(t,n,i,e){try{Je(t,n,i,e)}catch(t){}}var tr=function(){this.Rp="",this.Ip="",this.Cp="",this.Dp=null,this.Mp=null,this.Pp=[],this.kp=null,this.Lp=null,this.Np=!1};function nr(t){switch(t.Rp){case"blob":var n;try{n=Je(t.Pp[0],null)}catch(t){return xe}return nr(n);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,n,i){return t+"://"+de(n)+(null===i?"":":"+i)}(t.Rp,t.Dp,t.Mp);default:return xe}}var ir=function(){function t(t,n){var i,e=null;if(null!=n)if(function(t){return null!=t&&t instanceof ir&&"object"==typeof t.tc}(n))e=n.tc;else try{e=Je(String(n),null)}catch(t){throw new m("Invalid base URL: "+t.message)}try{i=Je(String(t),e)}catch(t){throw new m("Invalid URL: "+t.message)}var r=i.kp;this.tc=i,this.kp=function(t){var n=new Oe;return null!==t&&ke(n,t),n}(r),this.kp.tc=this}var n=t.prototype;return n.toString=function(){return this.href},n.toJSON=function(){return this.href},function(t,n,i){n&&ii(t.prototype,n),i&&ii(t,i)}(t,[{key:"href",get:function(){return function(t,n){void 0===n&&(n=!1);var i=t.Rp+":";if(null!==t.Dp?(i+="//",He(t)&&(i+=t.Ip,""!==t.Cp&&(i+=":"+t.Cp),i+="@"),i+=de(t.Dp),null!==t.Mp&&(i+=":"+t.Mp)):null===t.Dp&&"file"===t.Rp&&(i+="//"),t.Np)i+=t.Pp[0];else for(var e=0,r=t.Pp;e<r.length;e++)i+="/"+r[e];return null!==t.kp&&(i+="?"+t.kp),n||null===t.Lp||(i+="#"+t.Lp),i}(this.tc)},set:function(t){var n;try{n=Je(String(t),null)}catch(t){throw new m("Invalid URL: "+t.message)}this.tc=n,Ie(this.kp);var i=this.tc.kp;null!==i&&ke(this.kp,i)}},{key:"origin",get:function(){return nr(this.tc)}},{key:"protocol",get:function(){return this.tc.Rp+":"},set:function(t){Qe(t+":",null,this.tc,0)}},{key:"username",get:function(){return this.tc.Ip},set:function(t){Ke(this.tc)||(this.tc.Ip=re(t,te))}},{key:"password",get:function(){return this.tc.Cp},set:function(t){Ke(this.tc)||(this.tc.Cp=re(t,te))}},{key:"host",get:function(){var t=this.tc,n=t.Dp;if(null===n)return"";var i=t.Mp,e=de(n);return null!==i&&(e+=":"+i),e},set:function(t){this.tc.Np||Qe(t,null,this.tc,10)}},{key:"hostname",get:function(){var t=this.tc.Dp;return null===t?"":de(t)},set:function(t){this.tc.Np||Qe(t,null,this.tc,11)}},{key:"port",get:function(){var t=this.tc.Mp;return null===t?"":""+t},set:function(t){Ke(this.tc)||(""===t?this.tc.Mp=null:Qe(t,null,this.tc,12))}},{key:"pathname",get:function(){var t=this.tc.Pp;return this.tc.Np?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.tc.Np||(this.tc.Pp.length=0,Qe(t,null,this.tc,16))}},{key:"search",get:function(){var t=this.tc.kp;return null===t||""===t?"":"?"+t},set:function(t){t=ye(t);var n=this.tc;if(""===t)return n.kp=null,void Ie(this.kp);"?"===t[0]&&(t=t.slice(1)),n.kp="",Qe(t,null,n,19),ke(this.kp,t)}},{key:"searchParams",get:function(){return this.kp}},{key:"hash",get:function(){var t=this.tc.Lp;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.tc.Lp="",Qe(t,null,this.tc,20)):this.tc.Lp=null}}]),t}();function er(t){return t.document&&t.document.baseURI||t.location.href||""}x(),gt();var rr=function(){function t(){this.Qp=new or,this.ew=Bn,this.$p=ur(),self.performance&&self.performance.now?this.Vg=function(){return self.performance.now()}:this.Vg=In}var n=t.prototype;return n.Bp=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];Jn.apply(void 0,jn(n))},n.Op=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];Qn.apply(void 0,jn(n))},n.Fp=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];ti.apply(void 0,jn(n))},n.Vp=function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),e=1;e<n;e++)i[e-1]=arguments[e];ni.apply(void 0,[t].concat(jn(i)))},n.Ug=function(t,n){return d(t,n)},n.Wp=function(t,n){return w(t,n)},n.Wg=function(t){l(t)},n.Up=function(t){b(t)},n.Gp=function(){return this.Hp.Gp()},n.Zp=function(){return this.Hp.Zp()},n.Xp=function(){return this.Hp.Xp()},n.zp=function(){return this.Hp.zp()},n.qp=function(){return this.Hp.qp()},n.Yp=function(t,n){return this.Hp.Yp(t,n)},n.Kp=function(t){return this.Hp.Kp(t)},n.Nh=function(t,n){var i;return void 0===n&&(n=er(c)),i="object"!==(void 0===n?"undefined":B(n))||n instanceof ir?n:n.href,new ir(t,i)},n.Jp=function(t,n){if(void 0===n&&(n=er(c)),this.$p){var i=function(t){return"string"==typeof t}(n)?n:n.toString();return new self.URL(t,i).href}return this.Nh(t,n).href},Tt(t,[{key:"jp",get:function(){return this.Qp}},{key:"Ys",get:function(){return this.ew}},{key:"iw",get:function(){return{nw:v&&v.userAgent.match(/Android /i)?"Android":"other",ow:Boolean(v&&v.userAgent.match(/Android 8.0.0/i))}}},{key:"hw",get:function(){return self&&self.location&&"https:"===self.location.protocol}},{key:"aw",get:function(){return"languages"in v?v.languages.slice():[v.language]}}]),t}(),or=function(){function t(){}return Tt(t,[{key:"uw",get:function(){return v.oscpu}},{key:"Ys",get:function(){return v.platform}},{key:"cw",get:function(){return v.vendor}},{key:"lw",get:function(){return v.vendorSub}}]),t}();function ur(){if(self.URL)try{var t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}x(),gt();var sr=function(){function t(){}var n=t.prototype;return n.qp=function(){return J.resolve(!1)},n.Zp=function(){return J.resolve(!1)},n.zp=function(){return J.resolve(!1)},n.Xp=function(){return J.resolve(!1)},n.Kp=function(t){return J.resolve(!1)},n.Yp=function(t,n){return J.resolve(!1)},n.Gp=function(){return J.resolve(!1)},t}();x(),gt();var fr=function(){function t(){}var n=t.prototype;return n.gk=function(){},n.Bb=function(t){},n.Nb=function(t){},n.Mb=function(t,n){},t}();x(),gt();var hr="default",cr="unknown";x(),gt(),x(),gt(),x(),gt();var ar=function(t){return t.wk="arraybuffer",t.yk="json",t.bk="stream",t.Ak="text",t}({});function vr(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var r=null==t?null:void 0!==n&&t[e]||t["@@iterator"];if(null!=r){var o,u,s=[],f=!0,h=!1;try{for(r=r.call(t);!(f=(o=r.next()).done)&&(s.push(o.value),!i||s.length!==i);f=!0);}catch(t){h=!0,u=t}finally{try{f||null==r.return||r.return()}finally{if(h)throw u}}return s}}(t,i)||Xn(t,i)||function(){throw new m("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt();var dr=function(){function t(n){var i=this;this.C_={},n instanceof t?n.asList().forEach((function(t){var n=vr(t,2),e=n[0],r=n[1];i.append(e,r)})):Array.isArray(n)?n.forEach((function(t){var n=vr(t,2),e=n[0],r=n[1];i.append(e,r)})):n&&p.getOwnPropertyNames(n).forEach((function(t){i.append(t,n[t])}))}var n=t.prototype;return n.append=function(t,n){var i=t,e=n;i=lr(i),e=wr(e);var r=i.toLowerCase();if(this.C_.hasOwnProperty(r)){var o=this.C_[r],u=o[1];o[1]=u?u+", "+e:e}else this.C_[r]=[i,e]},n.delete=function(t){var n=lr(t).toLowerCase();delete this.C_[n]},n.get=function(t){var n=lr(t).toLowerCase();return this.C_.hasOwnProperty(n)?this.C_[n][1]:null},n.has=function(t){var n=lr(t).toLowerCase();return this.C_.hasOwnProperty(n)},n.set=function(t,n){var i=t,e=(i=lr(i)).toLowerCase();this.C_[e]=[i,wr(n)]},n.forEach=function(t,n){for(var i in this.C_)this.C_.hasOwnProperty(i)&&t.call(n,this.C_[i][1],i,this)},n.asList=function(){var t=[];for(var n in this.C_)if(this.C_.hasOwnProperty(n)){var i=vr(this.C_[n],2),e=i[0],r=i[1];t.push([e,r])}return t},n.Sk=function(){var t={};return this.forEach((function(n,i){t[i]=n})),t},n.Tk=function(t){var n=this;t.forEach((function(t,i){n.append(i,t)}))},n.Ek=function(t){var n=this;t.forEach((function(t,i){n.set(i,t)}))},t}();function lr(t){var n=t;if("string"!=typeof n&&(n=String(n)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(n))throw new m("Invalid character in header field name");return n}function wr(t){var n=t;return"string"!=typeof n&&(n=String(n)),n}function br(t,n,i,e,r,o,u){try{var s=t[o](u),f=s.value}catch(t){return void i(t)}s.done?n(f):J.resolve(f).then(e,r)}function gr(t){return function(){var n=this,i=arguments;return new J((function(e,r){var o=t.apply(n,i);function u(t){br(o,e,r,u,s,"next",t)}function s(t){br(o,e,r,u,s,"throw",t)}u(void 0)}))}}function mr(t,i){var r,o,u,s={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},f=p.create(("function"==typeof Iterator?Iterator:p).prototype);return f.next=h(0),f.throw=h(1),f.return=h(2),"function"==typeof n&&(f[e]=function(){return this}),f;function h(n){return function(e){return function(n){if(r)throw new m("Generator is already executing.");for(;f&&(f=0,n[0]&&(s=0)),s;)try{if(r=1,o&&(u=2&n[0]?o.return:n[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,n[1])).done)return u;switch(o=0,u&&(n=[2&n[0],u.value]),n[0]){case 0:case 1:u=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(u=s.trys,(u=u.length>0&&u[u.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){s.label=n[1];break}if(6===n[0]&&s.label<u[1]){s.label=u[1],u=n;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(n);break}u[2]&&s.ops.pop(),s.trys.pop();continue}n=i.call(t,s)}catch(t){n=[6,t],o=0}finally{r=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,e])}}}x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt();var pr="function"==typeof SuppressedError?SuppressedError:function(t,n,i){var e=new g(i);return e.name="SuppressedError",e.error=t,e.suppressed=n,e};x(),gt(),x(),gt();Array.prototype.find,Array.prototype.findLast;var yr="function"==typeof Array.prototype.findIndex?function(t,n){return t.findIndex(n)}:function(t,n){for(var i=0;i<t.length;i+=1){if(n(t[i],i,t))return i}return-1},_r="function"==typeof Array.prototype.findLastIndex?function(t,n){return t.findLastIndex(n)}:function(t,n){for(var i=t.length-1;i>=0;i-=1){if(n(t[i],i,t))return i}return-1};function Sr(t,n){var i=t.indexOf(n);return-1!==i&&(function(t,n){0===n?t.shift():t.splice(n,1)}(t,i),!0)}function Tr(t,n){for(var i=new Array(t.length),e=0,r=0;r<t.length;){if(t[r]===n){r++,i.length-=1;break}i[e++]=t[r++]}for(;r<t.length;)i[e++]=t[r++];return i}function Er(t,n){return-1!==t.indexOf(n)}function Ir(t){t.length=0}Array.prototype.flat,Array.prototype.flatMap;var kr=function(){function t(){this.Bw=!1,this.Uw=!1,this.Gw=[],this.Zw=[]}var n=t.prototype;return n.Ww=function(){if(!this.Bw&&!this.Uw){this.Bw=!0;for(var t=0,n=this.Gw.slice();t<n.length;t++){(0,n[t])()}this.Hw()}},n.Hw=function(){if(!this.Uw){this.Uw=!0;for(var t=0,n=this.Zw.slice();t<n.length;t++){(0,n[t])()}Ir(this.Gw),Ir(this.Zw)}},n.Fw=function(t){this.Uw||this.Gw.push(t)},n.Ow=function(t){this.Uw||Sr(this.Gw,t)},n.Xw=function(t){this.Uw||this.Zw.push(t)},n.zw=function(t){this.Uw||Sr(this.Zw,t)},t}(),Rr=function(){function t(){this.qw=new kr}var n=t.prototype;return n.Yw=function(){this.qw.Ww()},n.Hw=function(){this.qw.Hw()},n.Kw=function(t){var n=this.qw;if(!n.Bw)if(t.Bw)n.Ww();else if(!n.Uw&&!t.Uw){var i=function(){e(),n.Ww()},e=function(){t.Ow(i),t.zw(e),n.Ow(i),n.zw(e)};t.Fw(i),t.Xw(e),n.Fw(i),n.Xw(e)}},n.jw=function(){var n=new t,i=new t,e=n.Vw,r=i.Vw,o=this.qw,u=function(){e.Bw&&r.Uw||r.Bw&&e.Uw?o.Ww():e.Uw&&r.Uw&&o.Hw()};e.Fw(u),r.Fw(u),e.Xw(u),r.Xw(u),n.Kw(o),i.Kw(o);return o.Xw((function(){e.Ow(u),r.Ow(u),e.zw(u),r.zw(u)})),[n,i]},n[r]=function(){this.Yw()},t.Qw=function(n){for(var i=new t,e=0;e<n.length;e++){var r=n[e];void 0!==r&&i.Kw(r)}return i},Tt(t,[{key:"Vw",get:function(){return this.qw}}]),t}(),Or=function(t){return t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT",t}({}),Nr=function(t){return t.mE="same-origin",t.gE="no-cors",t.pE="cors",t.wE="navigate",t}({}),Pr=function(t,n){var i,e,r,o,u,s,f,h,c,a,v,d,l,w,b,g,m,p,y=t.Gu;n?(i=n.Nk,e=n.jk,r=n.yE,o=n.Yk,u=n.bE,s=n.AE,f=n.Vw,h=n.Aw,c=n.SE,a=n.TE,v=n.kE,d=n.EE,l=n.xE,w=n.RE,b=n.CE):(i=null,e={},r="GET",o=ar.Ak,u=0,s=0,h="",c="",a="",v=!1,l=void 0,w=!1,b=void 0),this.Gu=y,this.Nk=t.Nk||i,this.jk=new dr(t.jk||e),this.yE=t.yE||r,this.Yk=t.Yk||o,this.bE=void 0!==t.bE?Number(t.bE)||0:u,this.AE=void 0!==t.AE?Number(t.AE)||0:s,this.Vw=t.Vw||f||(new Rr).Vw,this.Aw=t.Aw||h,this.SE=t.SE||c,this.TE=t.TE||a,this.kE=void 0!==t.kE?Boolean(t.kE):v,this.EE=t.EE||d,this.xE=null!=(g=t.xE)?g:l,this.RE=null!=(m=t.RE)?m:w,this.CE=null!=(p=t.CE)?p:b};x(),gt(),x(),gt(),x(),gt();var Ar=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];g.apply(this,n)};(Ar.prototype=p.create(g.prototype)).constructor=Ar;var Dr=function(t){function n(n,i){var e;return(e=t.call(this)||this).message=n||"Unknown error",e.cause=i,g.captureStackTrace&&g.captureStackTrace(e,e.constructor),e}return _t(n,t),Tt(n,[{key:"name",get:function(){return"BaseError"}}]),n}(Ar),Cr=function(t){return t.WE="HttpOpenError",t.UE="HttpResponseError",t.GE="HttpTimeoutError",t}({}),xr=function(t){function n(n,i,e){var r;return(r=t.call(this,i,e)||this).HE=n,r}return _t(n,t),Tt(n,[{key:"Kk",get:function(){return this.HE}}]),n}(Dr);var Br=function(t){function n(n,i){return t.call(this,n,function(t){return"Error while opening "+t+". Invalid URL."}(n.Gu),i)||this}return _t(n,t),Tt(n,[{key:"name",get:function(){return Cr.WE}}]),n}(xr),Mr=function(){function t(){}var n=t.prototype;return n.Kk=function(t){return J.reject(new Br(new Pr(t)))},n.PE=function(t){},n.gn=function(){},t}();x(),gt();var Lr=function(t){function n(n){return t.call(this,"Invalid XML",n)||this}return _t(n,t),n}(Dr),Ur=function(t){function n(){var n;return(n=t.apply(this,arguments)||this).Jx=new sr,n.lW=new Mr,n.i=new fr,n}return _t(n,t),n.prototype.xx=function(t){throw new Lr},Tt(n,[{key:"Hp",get:function(){return this.Jx}},{key:"$x",get:function(){return!1}},{key:"eR",get:function(){return!1}},{key:"rR",get:function(){return!1}},{key:"sR",get:function(){return!1}},{key:"oR",get:function(){return this.i}},{key:"hR",get:function(){return{aR:Yt}}},{key:"uR",get:function(){return hr}},{key:"cR",get:function(){return cr}},{key:"lR",get:function(){return this.lW}}]),n}(rr);function Fr(){return Fr=p.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var e in i)p.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t},Fr.apply(this,arguments)}function zr(){var t=p.create(null);return t.dw=void 0,delete t.dw,t}function Wr(){return new Vr}jt(new Ur),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt();var Hr="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,Vr=Hr||function(){var t=function(){function t(t,n){this.index=0,this.data=t,this.selector=n,this.keys=p.keys(t)}return t.prototype.next=function(){var t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}},t}();return function(){function n(){this.data=zr(),this.size=0}var i=n.prototype;return i.get=function(t){return this.data[t]},i.set=function(t,n){return this.has(t)||this.size++,this.data[t]=n,this},i.has=function(t){return t in this.data},i.delete=function(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)},i.clear=function(){this.data=zr(),this.size=0},i.keys=function(){return new t(this.data,(function(t,n){return n}))},i.values=function(){return new t(this.data,(function(t,n){return t[n]}))},i.entries=function(){return new t(this.data,(function(t,n){return[n,t[n]]}))},i.forEach=function(t){for(var n in this.data)t(this.data[n],n)},n}()}();Hr||function(){var t=function(){function t(t,n){this.fw=t,this._w=n}return t.prototype.next=function(){var t=this.fw.next();return t.done?t:{value:this._w(t.value),done:!1}},t}();(function(){function n(){this.C_=Wr()}var i=n.prototype;i.get=function(t){return this.C_.get(""+t)},i.set=function(t,n){return this.C_.set(""+t,n),this},i.has=function(t){return this.C_.has(""+t)},i.delete=function(t){return this.C_.delete(""+t)},i.clear=function(){this.C_.clear()},i.keys=function(){return new t(this.C_.keys(),(function(t){return Number(t)}))},i.values=function(){return this.C_.values()},i.entries=function(){return new t(this.C_.entries(),(function(t){var n=vr(t,2),i=n[0],e=n[1];return[Number(i),e]}))},i.forEach=function(t){this.C_.forEach((function(n,i){t(n,Number(i))}))},Tt(n,[{key:"size",get:function(){return this.C_.size}}])})()}();x(),gt(),x(),gt();var qr="9a04f079-9840-4286-ab92-e65be0885f95",Xr="urn:uuid:"+qr,jr="com.microsoft.playready",Yr="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Kr="urn:uuid:"+Yr,Gr="com.widevine.alpha",$r="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Zr="urn:uuid:"+$r,Jr="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Qr="urn:uuid:"+Jr,to="com.apple.fps.1_0";x(),gt();var no=function(t){return t.mw="playready",t.gw="widevine",t.ww="fairplay",t.pw="clearkey",t.yw="aes128",t}({}),io={Aw:no.mw,Sw:jr,Tw:"cenc",Ew:qr,xw:Xr,Rw:"PlayReady"},eo={Aw:no.gw,Sw:Gr,Tw:"cenc",Ew:Yr,xw:Kr,Rw:"Widevine"},ro={Aw:no.ww,Sw:to,Tw:"skd",Ew:Jr,xw:Qr,Rw:"FairPlay"},oo=(no.ww,{Aw:no.pw,Sw:"org.w3.clearkey",Tw:"cenc",Ew:$r,xw:Zr,Rw:"ClearKey"});x(),gt();String.prototype.replaceAll;var uo="function"==typeof String.prototype.startsWith?function(t,n){return zt(t)&&t.startsWith(n)}:function(t,n){return zt(t)&&t.substr(0,n.length)===n},so=(String.prototype.endsWith,"function"==typeof String.prototype.repeat?function(t,n){return t.repeat(n)}:function(t,n){var i=0|n;if(0===t.length||0===i)return"";for(var e=t,r="";1==(1&i)&&(r+=e),0!=(i>>>=1);)e+=e;return r}),fo=(String.prototype.padStart,String.prototype.padEnd,16384),ho="function"==typeof String.fromCodePoint?function(t){var n;return t.length<=fo?(n=String).fromCodePoint.apply(n,jn(t)):ao(t,String.fromCodePoint)}:function(t){for(var n=[],i=0;i<t.length;i++){var e=t[i];e>65535&&(e-=65536,n.push(e>>>10&1023|55296),e=56320|1023&e),n.push(e)}return co(n)};function co(t){var n;return t.length<=fo?(n=String).fromCharCode.apply(n,jn(t)):ao(t,String.fromCharCode)}function ao(t,n){for(var i=[],e=0;e<t.length;e+=fo)i.push(n.apply(void 0,jn(t.slice(e,e+fo))));return i.join("")}var vo=Ut.gm&&Ut.wm>=42||Ut.Km&&Ut.Qm>=38||Ut.Um||Ut.Xm||Ut.hg&&Ut.cg>=29;function lo(t,n){return function(t,n){return zt(t)&&-1!==t.indexOf(n)}(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[Fr({contentType:t},n?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[Fr({contentType:t},n?{robustness:"SW_SECURE_CRYPTO"}:{})]}}var wo=function(){function t(t){this.Iw=Wr(),this.Dw=void 0,this.Pw=t}var n=t.prototype;return n.qp=function(){return this.Kp(eo)},n.Zp=function(){return this.Kp(oo)},n.zp=function(){return this.Kp(io)},n.Xp=function(){return this.Kp(ro)},n.Kp=function(t){var n=t.xw,i=this.Iw.get(n);if(i)return i;var e=this.Yp(t,'video/mp4; codecs="avc1.42000a"');return this.Iw.set(n,e),e},n.Yp=function(t,n){var i=this;return gr((function(){return mr(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,7]),[4,i.Pw.Cw(t.Sw,[lo(n,!0)])];case 1:return e.sent(),[2,!0];case 2:e.sent(),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,i.Pw.Cw(t.Sw,[lo(n,!1)])];case 4:return e.sent(),[2,!0];case 5:return e.sent(),[2,!1];case 6:return[3,7];case 7:return[2]}}))}))()},n.Gp=function(){return this.Dw||(this.Dw=this.Nw()),this.Dw},n.Nw=function(){var t=this;return gr((function(){return mr(this,(function(n){switch(n.label){case 0:return"https:"===c.location.protocol?[2,!1]:vo?[4,t.Zp()]:[2,!1];case 1:return n.sent()?[2,!1]:[2,!0]}}))}))()},t}();x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt();var bo=function(t){function n(n,i){return t.call(this,n||"Aborted",i)||this}return _t(n,t),Tt(n,[{key:"name",get:function(){return"AbortError"}}]),n}(Dr);function go(t){return t instanceof g&&"AbortError"===t.name}function mo(t,n){return n?new J((function(i,e){if(n.Bw)return t.catch(Yt),e(new bo);var r=function(){n.Ow(r),e(new bo)};n.Fw(r),t.then((function(t){n.Ow(r),i(t)}),(function(t){n.Ow(r),e(t)}))})):t}function po(t,n){return yo.apply(this,arguments)}function yo(){return yo=gr((function(t,n){var i,e;return mr(this,(function(u){switch(u.label){case 0:i={stack:[],error:void 0,hasError:!1},u.label=1;case 1:return u.trys.push([1,3,4,5]),function(t,n,i){if(null!=n){if("object"!=typeof n&&"function"!=typeof n)throw new m("Object expected.");var e,u;if(i){if(!o)throw new m("Symbol.asyncDispose is not defined.");e=n[o]}if(void 0===e){if(!r)throw new m("Symbol.dispose is not defined.");e=n[r],i&&(u=e)}if("function"!=typeof e)throw new m("Object not disposable.");u&&(e=function(){try{u.call(this)}catch(t){return J.reject(t)}}),t.stack.push({value:n,dispose:e,async:i})}else i&&t.stack.push({async:!0});return n}(i,n,!1),[4,t];case 2:return[2,u.sent()];case 3:return e=u.sent(),i.error=e,i.hasError=!0,[3,5];case 4:return function(t){function n(n){t.error=t.hasError?new pr(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}var i,e=0;(function r(){for(;i=t.stack.pop();)try{if(!i.async&&1===e)return e=0,t.stack.push(i),J.resolve().then(r);if(i.dispose){var o=i.dispose.call(i.value);if(i.async)return e|=2,J.resolve(o).then(r,(function(t){return n(t),r()}))}else e|=1}catch(t){n(t)}if(1===e)return t.hasError?J.reject(t.error):J.resolve();if(t.hasError)throw t.error})()}(i),[7];case 5:return[2]}}))})),yo.apply(this,arguments)}x(),gt();J.resolve();function _o(t,n){return new J((function(i,e){if(void 0!==n&&n.Bw)e(new bo);else{var r=Wt.Ug((function(){void 0!==n&&n.Ow(o),i()}),t),o=function(){Wt.Wg(r),e(new bo)};void 0!==n&&n.Fw(o)}}))}function So(t,n,i){if("function"==typeof i)i.call(t,n);else for(var e=0;e<i.length;e++){i[e].call(t,n)}}var To=function(){function t(t){var n=this;this.$w=zr(),this.sy=void 0,this.ey=0,this.Ds=function(t){n.wo(t)},this.oy=null!=t?t:this}var n=t.prototype;return n.yn=function(t,n){if("function"==typeof n)if("string"==typeof t)this.Jw(t,n);else for(var i=0;i<t.length;i++){var e=t[i];this.Jw(e,n)}},n.Jw=function(t,n){var i=this.$w[t];void 0===i?this.$w[t]=n:"function"==typeof i?this.$w[t]=[i,n]:0===this.ey?i.push(n):this.$w[t]=i.concat(n)},n.iy=function(t){if("function"==typeof t){var n=this.sy;void 0===n?this.sy=t:"function"==typeof n?this.sy=[n,t]:0===this.ey?n.push(t):this.sy=n.concat(t)}},n.$o=function(){this.$w=zr(),this.sy=void 0},n.wo=function(t){this.ey++;var n=this.$w[t.type],i=this.sy;void 0!==n&&So(this.oy,t,n),void 0!==i&&So(this.oy,t,i),this.ey--},n.fn=function(t,n){if("function"==typeof n)if("string"==typeof t)this.uy(t,n);else for(var i=0;i<t.length;i++){var e=t[i];this.uy(e,n)}},n.uy=function(t,n){var i=this.$w[t];void 0!==i&&("function"==typeof i?i===n&&(this.$w[t]=void 0):0===this.ey?Sr(i,n):this.$w[t]=Tr(i,n))},n.ly=function(t){if("string"==typeof t)this.$w[t]=void 0;else for(var n=0;n<t.length;n++){var i=t[n];this.$w[i]=void 0}},n._y=function(t){var n=this.sy;void 0!==n&&("function"==typeof n?n===t&&(this.sy=void 0):0===this.ey?Sr(n,t):this.sy=Tr(n,t))},n.vy=function(t,n){var i=this;return new J((function(e,r){if(n&&n.Bw)return r(new bo);var o=function(t){s(),e(t)},u=function(){s(),r(new bo)},s=function(){i.fn(t,o),n&&n.Ow(u)};i.yn(t,o),n&&n.Fw(u)}))},t}();x(),gt(),x(),gt();var Eo=function(t,n){void 0===n&&(n=new Date),this.type=t,this.date=n};x(),gt();var Io=function(t){return t.gy="py",t.wy="yy",t.Ay="contentprotectionerror",t.Sy="contentprotectionsuccess",t.Ty="currentsourcechange",t.Ey="destroy",t.xy="durationchange",t.Ry="emptied",t.Iy="encrypted",t.Cy="ended",t.Py="Dy",t.Ny="My",t.Ly="By",t.Oy="Fy",t.Vy="loadstart",t.Wy="manifestupdate",t.Uy="nosupportedrepresentationfound",t.Gy="offline",t.Hy="online",t.Zy="pause",t.ro="play",t.Xy="progress",t.zy="ratechange",t.qy="representationchange",t.Yy="resize",t.Ky="seeked",t.jy="seeking",t.Qy="segmentnotfound",t.Jy="$y",t.eb="ib",t.ao="sourcechange",t.sb="timeupdate",t.ob="volumechange",t.hb="ub",t.fb="_b",t.vb="metricschange",t}({}),ko=["cenc"],Ro=["cbcs","cbcs-1-9"],Oo=function(t){function n(n){var i;return(i=t.call(this,Io.fb)||this).mb=n,i}return _t(n,t),n}(Eo),No=function(t){function n(n,i,e,r){var o;return(o=t.call(this,"gb")||this).pb=n,o.wb=i,o.gb=e,o.yb=r,o}return _t(n,t),n}(Eo),Po=function(t){function n(){return t.call(this,"lt")||this}return _t(n,t),n}(Eo);x(),gt(),x(),gt(),x(),gt();var Ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Do=16383;function Co(t,n,i){return Ao[t>>2]+Ao[(3&t)<<4|n>>4]+Ao[(15&n)<<2|i>>6]+Ao[63&i]}function xo(t,n,i){for(var e=[],r=n;r<i;r+=3)e.push(Co(t[r],t[r+1],t[r+2]));return e.join("")}x(),gt(),x(),gt();var Bo=function(){function t(t){void 0===t&&(t=0),this.nc=t}var n=t.prototype;return n.kb=function(t){this.nc+=t},n.Eb=function(t){this.nc=t},n.xb=function(){return new t(this.ec)},Tt(t,[{key:"ec",get:function(){return this.nc}}]),t}();function Mo(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Lo(t,n){return t>>n&63|128}function Uo(t,n){0!=(4294967168&t)?(0==(4294965248&t)?n.push(t>>6&31|192):0==(4294901760&t)?(Mo(t),n.push(t>>12&15|224),n.push(Lo(t,6))):0==(4292870144&t)&&(n.push(t>>18&7|240),n.push(Lo(t,12)),n.push(Lo(t,6))),n.push(63&t|128)):n.push(t)}function Fo(t,n){if(n.ec>=t.length)throw new g("Invalid byte index");var i=255&t[n.ec];if(n.kb(1),128==(192&i))return 63&i;throw new g("Invalid continuation byte")}function zo(t,n){var i=n.ec;if(i>t.length)throw new g("Invalid byte index");if(i===t.length)return!1;var e=255&t[i];if(n.kb(1),0==(128&e))return e;if(192==(224&e)){var r=(31&e)<<6|Fo(t,n);if(r>=128)return r;throw new g("Invalid continuation byte")}if(224==(240&e)){var o=(15&e)<<12|Fo(t,n)<<6|Fo(t,n);if(o>=2048)return Mo(o),o;throw new g("Invalid continuation byte")}if(240==(248&e)){var u=(7&e)<<18|Fo(t,n)<<12|Fo(t,n)<<6|Fo(t,n);if(u>=65536&&u<=1114111)return u}throw new g("Invalid UTF-8 detected")}x(),gt(),x(),gt();var Wo=65279;function Ho(t,n,i){void 0===i&&(i=!1);var e=t.getUint16(n.ec,i);return n.kb(2),e}function Vo(t,n,i,e){void 0===e&&(e=!1),t.setUint16(n.ec,i,e),n.kb(2)}function qo(t,n,i,e){void 0===e&&(e=!1),t.setUint32(n.ec,i,e),n.kb(4)}function Xo(t,n,i,e){void 0===e&&(e=!1);for(var r=i.length,o=0;o<r;o+=1){Vo(t,n,i.charCodeAt(o),e)}}function jo(t,n){return void 0===n&&(n=!1),function(t,n,i,e){for(var r=[];n.ec+2<=t.byteLength;){var o=Ho(t,n,i);if(e&&!o)break;r.push(o)}return co(r)}(Go(t),new Qo,n,!1)}function Yo(t){return function(t){return ho(t)}(function(t,n){var i,e=[],r=new Qo;if(!n){if(!1===(i=zo(t,r)))return e;i===Wo||e.push(i)}for(;!1!==(i=zo(t,r));)e.push(i);return e}($o(t)))}function Ko(t){return new E(function(t){for(var n=[],i=0;i<t.length;i++)Uo(t[i],n);return n}(function(t){for(var n=[],i=0,e=t.length;i<e;){var r=t.charCodeAt(i++);if(r>=55296&&r<=56319&&i<e){var o=t.charCodeAt(i++);56320==(64512&o)?n.push(((1023&r)<<10)+(1023&o)+65536):(n.push(r),i--)}else n.push(r)}return n}(t)))}function Go(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function $o(t){return new E(t.buffer,t.byteOffset,t.byteLength)}function Zo(t){return t instanceof ArrayBuffer?new E(t):$o(t)}function Jo(t){if(t.slice)return t.slice(0);var n=new E(t.byteLength);return n.set(t,0),n}var Qo=function(){function t(t){void 0===t&&(t=0),this.nc=t}var n=t.prototype;return n.kb=function(t){this.nc+=t},n.Eb=function(t){this.nc=t},n.xb=function(){return new t(this.ec)},n.Cb=function(){return new Bo(this.ec<<3)},Tt(t,[{key:"ec",get:function(){return this.nc}}]),t}(),tu=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],nu=ArrayBuffer.isView||function(t){return t&&Er(tu,Ft.call(t))};function iu(t,n){return t===n||function(t,n){if(t===n)return!0;if(t.byteLength!==n.byteLength)return!1;if(t.buffer===n.buffer&&t.byteOffset===n.byteOffset)return!0;for(var i=0;i<t.length;i+=1)if(t[i]!==n[i])return!1;return!0}(Zo(t),Zo(n))}function eu(t){var n=t.reduce((function(t,n){return t+n.byteLength}),0);return function(t,n){for(var i=new E(n),e=0,r=0;r<t.length;r++){var o=t[r];i.set(o,e),e+=o.byteLength}return i}(t,n)}function ru(t){return function(t){for(var n=t.length,i=n%3,e=[],r=n-i,o=0;o<r;o+=Do)e.push(xo(t,o,y.min(r,o+Do)));if(1===i){var u=t[n-1];e.push(Ao[u>>2]+Ao[(3&u)<<4]+"==")}else if(2===i){var s=t[n-2],f=t[n-1];e.push(Ao[s>>2]+Ao[(3&s)<<4|f>>4]+Ao[(15&f)<<2]+"=")}return e.join("")}(new E(t))}var ou=new E([0]).buffer,uu=function(){function t(){this.Zu=[]}var n=t.prototype;return n.Db=function(t){for(var n=0,i=this.Zu;n<i.length;n++){if(iu(i[n][0],t))return!0}return!1},n.Nb=function(t){for(var n=0,i=this.Zu;n<i.length;n++){var e=i[n];if(iu(e[0],t))return e[1]}},n.Mb=function(t,n){for(var i=0,e=this.Zu;i<e.length;i++){var r=e[i];if(iu(r[0],t))return void(r[1]=n)}this.Zu.push([t,n])},n.Lb=function(t,n){this.Zu.forEach((function(n){return t(n[1],n[0])}),n)},n.Bb=function(){Ir(this.Zu)},Tt(t,[{key:"Pb",get:function(){return this.Zu.length}}]),t}();x(),gt();var su=function(){function t(){var t=this;this.Vb=new J((function(n,i){t.Ud=n,t.Gd=i}))}var n=t.prototype;return n.Ob=function(t){this.Ud&&(this.Ud(t),this.Hw())},n.Fb=function(t){this.Gd&&(this.Gd(t),this.Hw())},n.Yw=function(){this.Vb.catch(Yt),this.Fb(new bo)},n.Kw=function(t){var n=this;t.then((function(t){return n.Ob(t)}),(function(t){return n.Fb(t)}))},n.Hw=function(){this.Ud=void 0,this.Gd=void 0},t}();function fu(t,n){return t===jr?function(t){if(t.byteLength<2*hu.length)return t;var n=new DataView(t,0,2*hu.length),i=jo(n,!0);if(i===hu)return t;return function(t){var n='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',i='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',e=""+n+ru(t)+i;return function(t,n){void 0===n&&(n=!1);var i=new E(2*t.length);return Xo(Go(i),new Qo,t,n),i}(e,!0).buffer}(t)}(n):n}x(),gt();var hu="<PlayReady";x(),gt(),x(),gt();var cu=function(t){function n(n,i,e,r){var o;return(o=t.call(this,n,r)||this).Wb=i,o.Ub=e,o}return _t(n,t),n}(Dr);x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt();var au=function(t,n){return(au=p.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)p.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(t,n)};function vu(t,n){if("function"!=typeof n&&null!==n)throw new m("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}au(t,n),t.prototype=null===n?p.create(n):(i.prototype=n.prototype,new i)}function du(t,n,i){return t.indexOf?t.indexOf(n,i):Array.prototype.indexOf.call(t,n,i)}x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt();!function(){function t(t,n){this.Gb=t,this.Hb=n}t.prototype.get=function(t){var n=this.Gb.get(t);if(0===this.Hb||void 0===n)return n;var i=this.Gb.get(t+1)||0,e=n&(1<<8-this.Hb)-1,r=i>>8-this.Hb;return(e<<this.Hb)+r},t.prototype.getBit=function(t){if(!(t<0)){var n=this.Gb.get(y.floor((t+this.Hb)/8));if(void 0!==n)return(n&1<<7-this.Hb-t%8)>0?1:0}},p.defineProperty(t.prototype,"bitLength",{get:function(){return this.Gb.bitLength-this.Hb},enumerable:!1,configurable:!0}),p.defineProperty(t.prototype,"length",{get:function(){return this.Gb.length},enumerable:!1,configurable:!0})}();x(),gt(),x(),gt();y.pow(2,-52);function lu(t,n,i){return y.min(y.max(t,n),i)}function wu(t,n){return t>>8-n}function bu(t,n){return t&(1<<n)-1}var gu=function(){function t(t){this.Zb=t,this.Xb=0,this.zb=0}return p.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.Xb+this.zb},enumerable:!1,configurable:!0}),p.defineProperty(t.prototype,"done",{get:function(){return this.Xb===this.Zb.length&&0===this.zb},enumerable:!1,configurable:!0}),p.defineProperty(t.prototype,"location",{get:function(){return{byte:this.Xb,bit:this.zb}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var n=new t(this.Zb);return n.seek(this.Xb,this.zb),n},t.prototype.canReadBits=function(t){return 8*this.Xb+t+this.zb<=8*this.Zb.length},t.prototype.canReadBytes=function(t){return 0===this.zb?this.Xb+t<=this.Zb.length:this.Xb+t<this.Zb.length},t.prototype.incBit=function(){this.zb++,this.zb>7&&(this.Xb++,this.zb=0)},t.prototype.seek=function(t,n){this.Xb=t,this.zb=n},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new g("Cannot read past end of buffer.");return this.Zb.get(this.Xb)>>7-this.zb&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new g("Cannot read past end of buffer.");if(0===this.zb)return this.Zb.get(this.Xb++);var t=bu(this.Zb.get(this.Xb),8-this.zb),n=wu(this.Zb.get(this.Xb+1),this.zb);return this.Xb++,t<<this.zb|n},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");for(var n=[],i=0;i<t;i++)n.push(this.readBit());return n},t.prototype.readUInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var n=0;if(0===this.zb&&t%8==0)for(var i=t-8;i>=0;i-=8)n|=this.readByte()<<i;else for(i=t-1;i>=0;i--)n|=this.readBit()<<i;return n},t.prototype.readInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var n=this.readUInt(t);return 0===(n&1<<t-1)?n:n-y.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var n=1<<t;return n+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new g("Skipping over the buffer edge is not allowed.");var n=this.zb+t;this.Xb+=n>>3,this.zb=7&n},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new g("Cannot read past end of buffer.");for(var n=[],i=0;i<t;i++)n.push(this.readByte());return String.fromCharCode.apply(String,n)},t}();x(),gt(),x(),gt(),x(),gt();var mu=function(t,n){return t===n?0:t<n?-1:t>n?1:T(t)?T(n)?0:1:-1},pu=function(){function t(){this.qb=[],this.Yb=[],this.Kb=0}return t.from=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];for(var e=new t,r=0,o=n;r<o.length;r++){var u=o[r];e.pushRange(u)}return e},t.prototype.pushRange=function(t,n,i){if(void 0===n&&(n=0),void 0===i&&(i=t.length),i<0)throw new g("The buffer length must be positive.");if(0!==i){if(0===this.Yb.length)this.Yb.push(0);else{var e=this.Yb[this.Yb.length-1]+this.qb[this.qb.length-1].length;this.Yb.push(e)}this.qb.push(t.subarray(n,n+i)),this.Kb+=i}},t.prototype.concat=function(n){var i=new t;return i.pushRange(this.join()),i.pushRange(n.join()),i},t.prototype.copy=function(t,n,i,e){if(void 0===n&&(n=0),void 0===i&&(i=0),void 0===e&&(e=this.length),n<0||i<0||e<0)throw new RangeError;return this.slice(i,e).copyInternal(t,n)},t.prototype.copyInternal=function(t,n){for(var i=0,e=n,r=0,o=this.qb;r<o.length;r++){var u=o[r];t.set(u,e),i+=u.length,e+=u.length}return i},t.prototype.clear=function(){this.qb=[],this.Yb=[],this.Kb=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var n=this.findContainingBufferIndex(t),i=t-this.Yb[n];return this.qb[n][i]}},p.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.qb.length<1)return-1;if(this.qb.length>1){var n=this.join();this.clear(),this.pushRange(n)}var i=this.qb[0];return"number"==typeof t?du(i,t):"undefined"!=typeof Buffer?Buffer.from(i.buffer,i.byteOffset,i.byteLength).indexOf(t):function(t,n){if(0===n.length)return 0;for(var i=n[0],e=n.length,r=t.length-e,o=0;o<=r&&!((o=du(t,i,o))<0||o>r);o++){for(var u=o+1,s=o+e,f=1;u<s&&t[u]===n[f];u++,f++);if(u===s)return o}return-1}(i,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,n,i){if(0!==t.length){var e=0,r=t.length-1;if(1!==i(t[e],n)){if(1===i(n,t[r]))return r;for(;e!==r;){var o=y.ceil((e+r)/2);i(t[o],n)<=0?e=o:r=o-1}return e}}}(this.Yb,t,mu)},t.prototype.join=function(){if(1===this.qb.length)return this.qb[0];var t=new E(this.length);return this.copyInternal(t,0),t},p.defineProperty(t.prototype,"length",{get:function(){return this.Kb},enumerable:!1,configurable:!0}),p.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,n){if(n<=0||n>4)throw new g("Expected byteLength to be between 0 and 4 but was "+n);if(t<0||t>this.length-n)throw new g("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-n)+")");if(1===n)return this.get(t);for(var i=0,e=0;e<n;e++)i+=this.get(t+e)*y.pow(2,8*(n-e-1));return i},t.prototype.slice=function(n,i){void 0===i&&(i=this.length);var e=lu(n,0,this.length),r=lu(i,0,this.length);if(e>r)return new t;if(e===r)return new t;for(var o=new t,u=this.findContainingBufferIndex(e),s=this.qb[u],f=e,h=f-this.Yb[u];f+s.length-h<r;)o.pushRange(s,h,s.length-h),u+=1,h=(f+=s.length-h)-this.Yb[u],s=this.qb[u];var c=r-f;return o.pushRange(s,h,c),o},t.prototype.trim=function(){if(0===this.length)return new t;for(var n=this.length-1,i=this.qb.length-1,e=this.qb[i],r=e.length-1;n>=0&&i>=0;){if(0!==e[r])break;if(0===r){if(0===i)return new t;i-=1,r=(e=this.qb[i]).length-1}else r-=1;n-=1}return this.slice(0,n+1)},t}(),yu=function(){function t(n){this.jb=n||t.BUFFER_CHUNK_SIZE,this.Qb=!1,this.Jb=new pu,this.Zb=new E(this.jb),this.$b=0,this.tA=0,this.zb=7}return t.prototype.closeByte=function(){this.Zb[this.$b++]=this.tA,this.$b>=this.jb&&this.closeBuffer(),this.tA=0,this.zb=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.$b&&(this.Jb.pushRange(this.Zb,0,this.$b),t&&(this.Zb=new E(this.jb)),this.$b=0)},p.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.zb},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.Qb)throw new g("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.Qb=!0,this.Jb},t.prototype.writeBit=function(t){if(this.Qb)throw new g("Cannot write to a closed BitWriter.");this.tA|=t<<this.zb,0===this.zb?this.closeByte():this.zb--},t.prototype.writeByte=function(t){if(this.Qb)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.tA=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var n=this.zb;this.tA|=wu(t,n+1),this.closeByte(),this.tA=bu(t,8-n)<<n+1,this.zb=n},t.prototype.writeBits=function(t){for(var n=0,i=t;n<i.length;n++){var e=i[n];this.writeBit(e)}},t.prototype.writeBytes=function(t){if(this.Qb)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.$b+t.length<=this.jb?(this.Zb.set(t,this.$b),this.$b+=t.length,this.$b===this.jb&&this.closeBuffer()):(this.closeBuffer(),this.Jb.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var n=this.zb;this.tA|=wu(t[0],n+1),this.closeByte();for(var i=1;i<t.length;i++){var e=bu(t[i-1],8-n),r=wu(t[i],n+1);this.tA=e<<n+1|r,this.closeByte()}this.tA=bu(t[t.length-1],8-n)<<n+1,this.zb=n}},t.prototype.writeUInt=function(t,n){if(t<0)throw new g("Received a negative number.");if(n>32)throw new g("The max bitlength that can be provided is 32.");if(t>=y.pow(2,n))throw new g("Uint "+t+" cannot be represented in "+n+" bit(s).");if(this.isWritingStartBit&&n%8==0)for(var i=n-8;i>=0;i-=8)this.writeByte(t>>i&255);else for(i=n-1;i>=0;i--)this.writeBool((t&1<<i)>0)},t.prototype.writeInt=function(t,n){if(n>32)throw new g("The max bitlength that can be provided is 32.");if(y.abs(t)>=y.pow(2,n-1))throw new g("Signed integer "+t+" cannot be represented in "+n+" bit(s).");t<0?this.writeUInt(t+y.pow(2,n),n):this.writeUInt(t,n)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new g("Received a negative number.");for(var n=y.floor(y.log2(t+1))+1,i=0;i<n-1;i++)this.writeBit(0);this.writeUInt(t+1,n)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var n=function(t){for(var n=new E(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(t),i=0;i<n.length;i++)this.writeByte(n[i])},t.BUFFER_CHUNK_SIZE=1024,t}();x(),gt();var _u=function(){function t(t){this.rb=new pu,this.Qd=t}return t.prototype.closeWriter=function(){void 0!==this.Qd&&(this.rb=this.rb.concat(this.Qd.close()),this.Qd=void 0)},p.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.Qd&&(this.Qd=new yu),this.Qd},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),Su=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new g("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(n){var i=this.getSize(),e=i>=t.LARGE_SIZE/8,r=16===this.boxType.length;n.writeUInt(e?1:i,32),n.writeString(r?"uuid":this.boxType),e&&(n.writeUInt(y.floor(i/t.LARGE_SIZE),32),n.writeUInt(i%t.LARGE_SIZE,32)),r&&n.writeString(this.boxType)},t.prototype.getSize=function(){var n=8+(this.boxType.length>4?16:0),i=this.getBoxContentSize()+n;return i>=t.LARGE_SIZE/8&&(i+=8),i},t.prototype.serialize=function(){var t=new _u;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=y.pow(2,32),t}();function Tu(t,n){return t instanceof Tn?64===n:t<y.pow(2,n)}function Eu(t,n){return y.round(t*y.pow(2,n))}function Iu(t,n){for(var i=0;i<n.length;i++)t.writeByte(n[i])}function ku(t,n){return t/y.pow(2,n)}x(),gt();var Ru=function(t){function n(n,i,e){var r=t.call(this,n)||this;if(r.version=i,!Tu(i,8))throw new g("the provided version cannot fit in 8 bits.");return r.flags=e,r}return vu(n,t),p.defineProperty(n.prototype,"flags",{get:function(){return this.__},set:function(t){this.__=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return 4},n.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},n.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},n}(Su);x(),gt(),x(),gt();var Ou=function(t){function n(n,i){var e=t.call(this,n)||this;return e.data=i,e}return vu(n,t),n.prototype.getBoxContentSize=function(){return this.data.length},n.prototype.serializeBoxContent=function(t){t.concat(pu.from(this.data))},n}(Su);x(),gt(),x(),gt();var Nu=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();x(),gt();var Pu=16384;function Au(t){var n=t.length;if(n<=Pu)return String.fromCharCode.apply(String,t);for(var i=[],e=0;e<n;e+=Pu)i.push(String.fromCharCode.apply(String,t.slice(e,e+Pu)));return i.join("")}var Du=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,n){return(t&n)===n}(this.raw,t)},t}();function Cu(t,n){var i=t.getUint8(n.offset);return n.shift(1),i}function xu(t,n,i){var e=Wu(Vu(t),n.offset,n.offset+i);return n.shift(e.byteLength),e}function Bu(t,n,i){return n.offset+i<=t.byteLength}function Mu(t,n,i){void 0===i&&(i=!1);var e=t.getUint32(n.offset,i);return n.shift(4),e}function Lu(t,n,i){void 0===i&&(i=!1);var e=Mu(t,n,i),r=Mu(t,n,i),o=i?r:e,u=i?e:r;return Tn.fromBits(u,o,!0)}function Uu(t,n,i){return Au(function(t){return[].slice.call(t)}(xu(t,n,i)))}function Fu(t,n){var i,e=Cu(t,n);return 0==(128&e)?i=e:192==(224&e)?i=64*(31&e)+(63&Cu(t,n)):224==(240&e)?i=4096*(15&e)+64*(63&Cu(t,n))+(63&Cu(t,n)):240==(248&e)&&(i=262144*(7&e)+4096*(63&Cu(t,n))+64*(63&Cu(t,n))+(63&Cu(t,n))),i}function zu(t,n){return function(t,n,i){var e=[],r=function(t,n){return n.offset+3<=t.byteLength&&239===t.getUint8(n.offset)&&187===t.getUint8(n.offset+1)&&191===t.getUint8(n.offset+2)}(t,n);r&&n.shift(3);for(;n.offset<t.byteLength;){var o=Fu(t,n);if(void 0===o)break;if(i&&0===o)break;e.push(o)}return function(t){for(var n=[],i=0,e=t;i<e.length;i++){var r=e[i];r>65535&&(r-=65536,n.push(r>>>10&1023|55296),r=56320|1023&r),n.push(r)}return Au(n)}(e)}(t,n,!0)}function Wu(t,n,i){return void 0===n&&(n=0),void 0===i&&(i=t.byteLength),new E(t.buffer,t.byteOffset+n,i-n)}function Hu(t,n,i){return void 0===n&&(n=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+n,i-n)}function Vu(t){return new E(t.buffer,t.byteOffset,t.byteLength)}var qu=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new Nu(this.offset<<3)},t}();x(),gt();var Xu=function(){function t(t,n){this.data=t,this.cursor=n}return t.prototype.nextUint8=function(){return Cu(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,n,i){void 0===i&&(i=!1);var e=t.getUint16(n.offset,i);return n.shift(2),e}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,n,i){void 0===i&&(i=!1);var e=t.getInt16(n.offset,i);return n.shift(2),e}(this.data,this.cursor)},t.prototype.nextUint32=function(){return Mu(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,n,i){void 0===i&&(i=!1);var e=t.getInt32(n.offset,i);return n.shift(4),e}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,n,i){void 0===i&&(i=!1);var e=Mu(t,n,i),r=Mu(t,n,i),o=i?r:e,u=i?e:r;return Tn.fromBits(u,o,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return Lu(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return xu(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,n,i){for(var e=[],r=0;r<i;r++)e.push(Mu(t,n));return e}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return Uu(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return zu(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function ju(t,n){return t.type===n}var Yu=8;function Ku(t){var n=function(t,n){var i=[];for(;n.offset<t.byteLength;){var e=Gu(t,n);if(!e.complete)return{complete:!1,boxes:i};i.push(e.box)}return{complete:!0,boxes:i}}(t.data,t.cursor);if(!n.complete)throw new g("Data incomplete");return n.boxes}function Gu(t,n){var i=n.offset,e=function(t,n){var i=n.offset;if(!Bu(t,n,Yu)){return{complete:!1,neededOffset:o=n.offset+Yu}}var e=Mu(t,n),r=Uu(t,n,4);if(1===e){if(!Bu(t,n,8)){var o=n.offset+8;return n.seek(i),{complete:!1,neededOffset:o}}e=Lu(t,n).toNumber()}if("uuid"===r){if(!Bu(t,n,16)){o=n.offset+16;return n.seek(i),{complete:!1,neededOffset:o}}r=Uu(t,n,16)}var u=n.offset,s={type:r,size:e,headerSize:u-i};return{complete:!0,header:s}}(t,n);if(!e.complete)return e;var r=e.header,o=r.size;0===o&&(o=t.byteLength-i);var u=i+o;if(u>t.byteLength){var s=u;return n.seek(i),{complete:!1,neededOffset:s}}var f={type:r.type,offset:i,data:new Xu(Hu(t,i,u),new qu(r.headerSize))};return n.seek(u),{complete:!0,box:f}}function $u(t){return{version:t>>24,flags:new Du(16777215&t)}}function Zu(t,n){var i,e,r,o;return 1===n?(i=t.nextUint64(),e=t.nextUint64(),r=t.nextUint32(),o=t.nextUint64()):(i=t.nextUint32(),e=t.nextUint32(),r=t.nextUint32(),o=t.nextUint32()),{creation:i,modification:e,scale:r,duration:o}}function Ju(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function Qu(t){var n=t.nextUint32Array(9);return{a:ku(n[0],16),b:ku(n[1],16),u:ku(n[2],30),c:ku(n[3],16),d:ku(n[4],16),v:ku(n[5],30),x:ku(n[6],16),y:ku(n[7],16),w:ku(n[8],30)}}function ts(t){return new Ou(t.type,Wu(Vu(t.data.data),t.data.cursor.offset))}var ns=function(t){function n(n,i,e,r){void 0===e&&(e=0),void 0===r&&(r=0);var o=t.call(this,"hdlr",e,r)||this;return o.name=i,o.handlerType=n,o}return vu(n,t),p.defineProperty(n.prototype,"handlerType",{get:function(){return this.eA},set:function(t){this.eA=t},enumerable:!1,configurable:!0}),n.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},n.prototype.getBoxContentSize=function(){var n,i;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(i=null===(n=this.name)||void 0===n?void 0:n.length)&&void 0!==i?i:0)+1},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(0,32),n.writer.writeString(this.handlerType),this.serializeReserved(n),this.name&&n.writer.writeString(this.name),n.writer.writeByte(0)},n}(Ru);function is(t){var n=t.data,i=$u(n.nextUint32()),e=i.version,r=i.flags;n.skip(4);var o=n.nextChars(4);n.skip(12);var u=n.nextUTF8String();return new ns(o,u,e,r.raw)}!function(t){function n(){return t.call(this,"mdir")||this}vu(n,t),n.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(ns);x(),gt(),x(),gt(),x(),gt();var es=function(){function t(t,n){void 0===n&&(n=!1),this.fixed28BitMode=n,this.tag=t}return t.prototype.encodeSize=function(t){for(var n=[];t>0;)n.length>0&&(n[n.length-1]+=128),n.push(t%128),t>>=7;if(this.fixed28BitMode)for(;n.length<4;)n.push(128);return n.reverse()},p.defineProperty(t.prototype,"tag",{get:function(){return this.iA},set:function(t){if(!Tu(t,8))throw new g("Provided tag does not fit in 8 bits.");this.iA=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var n=0,i=this.encodeSize(this.getDescriptorSize());n<i.length;n++){var e=i[n];t.writer.writeByte(e)}this.serializeDescriptorContent(t)},t}();x(),gt();!function(t){function n(n,i,e,r,o,u,s){void 0===s&&(s={});var f=t.call(this,4,s.fixed28BitMode)||this;return f.upStream=e,f.decoderSpecificInfo=u,f.objectTypeIndication=n,f.streamType=i,f.bufferSizeDb=r,f.maxBitrate=o.max,f.avgBitrate=o.avg,f}vu(n,t),p.defineProperty(n.prototype,"objectTypeIndication",{get:function(){return this.sA},set:function(t){if(!Tu(t,8))throw new g("Provided objectTypeIndication does not fit in 8 bits.");this.sA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"streamType",{get:function(){return this.nA},set:function(t){if(!Tu(t,6))throw new g("Provided streamType does not fit in 6 bits.");this.nA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"bufferSizeDb",{get:function(){return this.rA},set:function(t){if(!Tu(t,24))throw new g("Provided bufferSizeDb does not fit in 24 bits.");this.rA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"maxBitrate",{get:function(){return this.oA},set:function(t){if(!Tu(t,32))throw new g("Provided maxBitrate does not fit in 32 bits.");this.oA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"avgBitrate",{get:function(){return this.hA},set:function(t){if(!Tu(t,32))throw new g("Provided avgBitrate does not fit in 32 bits.");this.hA=t},enumerable:!1,configurable:!0}),n.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,n){return t+n.getSize()}),0)},n.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var n=0,i=this.decoderSpecificInfo;n<i.length;n++){i[n].serialize(t)}}}(es);x(),gt();!function(t){function n(n,i){void 0===i&&(i={});var e=t.call(this,5,i.fixed28BitMode)||this;return e.data=n,e}vu(n,t),n.prototype.getDescriptorSize=function(){return this.data.length},n.prototype.serializeDescriptorContent=function(t){t.concat(pu.from(this.data))}}(es);x(),gt(),x(),gt();var rs=function(t){function n(n){void 0===n&&(n=!1);var i=t.call(this,6,n)||this;return i.predefined=2,i}return vu(n,t),n.prototype.getDescriptorSize=function(){return 1},n.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},n}(es);!function(t){function n(n,i,e,r){void 0===r&&(r={});var o=t.call(this,3,r.fixed28BitMode)||this;return o.decoderConfigDescriptor=e,o.esId=n,o.streamPriority=i,o.dependsOnEsId=null==r?void 0:r.dependsOnEsId,o.urlString=null==r?void 0:r.url,o.ocrEsId=null==r?void 0:r.ocrEsId,o.slConfigDescriptor=new rs(r.fixed28BitMode),o}vu(n,t),p.defineProperty(n.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"esId",{get:function(){return this.aA},set:function(t){if(!Tu(t,16))throw new g("Provided esId does not fit in 16 bits.");this.aA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"streamPriority",{get:function(){return this.uA},set:function(t){if(!Tu(t,5))throw new g("Provided streamPriority does not fit in 5 bits.");this.uA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"dependsOnEsId",{get:function(){return this.cA},set:function(t){if(t&&!Tu(t,16))throw new g("Provided dependsOnEsId does not fit in 16 bits.");this.cA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"ocrEsId",{get:function(){return this.lA},set:function(t){if(t&&!Tu(t,16))throw new g("Provided ocrEsId does not fit in 16 bits.");this.lA=t},enumerable:!1,configurable:!0}),n.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},n.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(es);x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt();var os=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.boxes=[],n}return vu(n,t),n.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,n){return t+n.getSize()}),0)},n.prototype.serialize=function(){for(var n=t.prototype.serialize.call(this),i=0,e=this.boxes;i<e.length;i++){var r=e[i];n=n.concat(r.serialize())}return n},n}(Su),us=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return vu(n,t),n.prototype.serializeBoxContent=function(t){},n.prototype.getBoxContentSize=function(){return 0},n}(os),ss=function(t){function n(n,i){var e=t.call(this,n)||this;return e.dataReferenceIndex=i,e}return vu(n,t),p.defineProperty(n.prototype,"dataReferenceIndex",{get:function(){return this.dA},set:function(t){if(!Tu(t,16))throw new g("Provided dataReferenceIndex does not fit in 16 bits.");this.dA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return 8},n.prototype.serializeBoxContent=function(t){for(var n=0;n<6;n++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},n}(us),fs=function(t){function n(n,i,e,r){var o,u,s=this;return(s=t.call(this,n,i)||this).extra=r,s.channelCount=null!==(o=e.channelCount)&&void 0!==o?o:2,s.sampleSize=null!==(u=e.sampleSize)&&void 0!==u?u:16,s.sampleRate=e.sampleRate,s}return vu(n,t),p.defineProperty(n.prototype,"channelCount",{get:function(){return this.fA},set:function(t){if(!Tu(t,16))throw new g("Provided channelCount does not fit in 16 bits.");this.fA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"sampleSize",{get:function(){return this._A},set:function(t){if(!Tu(t,16))throw new g("Provided sampleSize does not fit in 16 bits.");this._A=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"sampleRate",{get:function(){return this.vA},set:function(t){if(!Tu(Eu(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.vA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){var n,i;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(i=null===(n=this.extra)||void 0===n?void 0:n.length)&&void 0!==i?i:0)},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(0,32),n.writer.writeUInt(0,32),n.writer.writeUInt(this.channelCount,16),n.writer.writeUInt(this.sampleSize,16),n.writer.writeUInt(0,16),n.writer.writeUInt(0,16),n.writer.writeUInt(Eu(this.sampleRate,16),32),this.extra&&Iu(n.writer,this.extra)},n}(ss);x(),gt();!function(t){function n(n){var i=t.call(this,"stco",0,0)||this;return i.entries=n,i}vu(n,t),p.defineProperty(n.prototype,"entries",{get:function(){return this.mA},set:function(t){if(!Tu(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Tu(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.mA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.entries.length,32);for(var i=0,e=this.entries;i<e.length;i++){var r=e[i];n.writer.writeUInt(r,32)}}}(Ru);x(),gt();!function(t){function n(n){var i=t.call(this,"clap")||this;return i.cleanApertureWidthN=n.cleanApertureWidthN,i.cleanApertureWidthD=n.cleanApertureWidthD,i.cleanApertureHeightN=n.cleanApertureHeightN,i.cleanApertureHeightD=n.cleanApertureHeightD,i.horizOffN=n.horizOffN,i.horizOffD=n.horizOffD,i.vertOffN=n.vertOffN,i.vertOffD=n.vertOffD,i}vu(n,t),p.defineProperty(n.prototype,"cleanApertureWidthN",{get:function(){return this.gA},set:function(t){if(!Tu(t,32))throw new g("Provided cleanApertureWidthN does not fit in 32 bits.");this.gA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"cleanApertureWidthD",{get:function(){return this.pA},set:function(t){if(!Tu(t,32))throw new g("Provided cleanApertureWidthD does not fit in 32 bits.");this.pA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"cleanApertureHeightN",{get:function(){return this.wA},set:function(t){if(!Tu(t,32))throw new g("Provided cleanApertureHeightN does not fit in 32 bits.");this.wA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"cleanApertureHeightD",{get:function(){return this.yA},set:function(t){if(!Tu(t,32))throw new g("Provided cleanApertureHeightD does not fit in 32 bits.");this.yA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"horizOffN",{get:function(){return this.bA},set:function(t){if(!Tu(t,32))throw new g("Provided horizOffN does not fit in 32 bits.");this.bA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"horizOffD",{get:function(){return this.AA},set:function(t){if(!Tu(t,32))throw new g("Provided horizOffD does not fit in 32 bits.");this.AA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"vertOffN",{get:function(){return this.SA},set:function(t){if(!Tu(t,32))throw new g("Provided vertOffN does not fit in 32 bits.");this.SA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"vertOffD",{get:function(){return this.TA},set:function(t){if(!Tu(t,32))throw new g("Provided vertOffD does not fit in 32 bits.");this.TA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return 32},n.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(Su);x(),gt();!function(t){function n(n,i){var e=t.call(this,"ctts",n,0)||this;return e.entries=i,e}vu(n,t),p.defineProperty(n.prototype,"entries",{get:function(){return this.mA},set:function(t){if(!Tu(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Tu(t.sampleCount,32)||!Tu(t.sampleOffset,32)})))throw new g("Not all entries can be represented in 64 bits.");this.mA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.entries.length,32);for(var i=0,e=this.entries;i<e.length;i++){var r=e[i];n.writer.writeUInt(r.sampleCount,32),0===this.version?n.writer.writeUInt(r.sampleOffset,32):1===this.version&&n.writer.writeInt(r.sampleOffset,32)}}}(Ru);x(),gt();!function(t){function n(n){var i=t.call(this,"url ",0,void 0===n?1:0)||this;return i.location=n,i}vu(n,t),p.defineProperty(n.prototype,"location",{get:function(){return this.kA},set:function(t){this.flags=void 0===t?1:0,this.kA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){var n=t.prototype.getBoxContentSize.call(this);return this.location?n+this.location.length+1:n},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),this.location&&(n.writer.writeString(this.location),n.writer.writeByte(0))}}(Ru);x(),gt();!function(t){function n(n,i,e){var r=t.call(this,"urn ",0,e)||this;return r.name=n,r.location=i,r}vu(n,t),p.defineProperty(n.prototype,"location",{get:function(){return this.kA},set:function(t){if(1&this.flags)throw new g("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.kA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){var n=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?n+this.location.length+1:n},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeString(this.name),n.writer.writeByte(0),this.location&&(n.writer.writeString(this.location),n.writer.writeByte(0))}}(Ru);x(),gt();!function(t){function n(){return t.call(this,"dinf")||this}vu(n,t)}(us);x(),gt(),x(),gt();var hs=function(t){function n(n,i,e){var r=t.call(this,n)||this;if(r.version=i,!Tu(i,8))throw new g("the provided version cannot fit in 8 bits.");return r.flags=e,r}return vu(n,t),p.defineProperty(n.prototype,"flags",{get:function(){return this.__},set:function(t){this.__=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return 4},n.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},n.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},n}(os);!function(t){function n(){return t.call(this,"dref",0,0)||this}vu(n,t),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.boxes.length,32)}}(hs);x(),gt(),x(),gt();var cs=function(t){function n(n,i,e){void 0===e&&(e=0);var r=t.call(this,"elst",i,e)||this;return r.entries=n,r}return vu(n,t),p.defineProperty(n.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"entries",{get:function(){return this.mA},set:function(t){for(var n=0,i=t;n<i.length;n++){var e=i[n];if(!Tu(e.segmentDuration,this.bitSize))throw new g("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!Tu(e.mediaTime,this.bitSize))throw new g("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!Tu(e.mediaRateInteger,16))throw new g("Provided mediaRateInteger does not fit in 16 bits.");if(e.mediaRateFraction&&!Tu(e.mediaRateFraction,16))throw new g("Provided mediaRateFraction does not fit in 16 bits.")}this.mA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(n)},n}(Ru),as=function(t){function n(n,i){return void 0===i&&(i=0),t.call(this,n,0,i)||this}return vu(n,t),n.prototype.serializeElstBoxContent=function(t){for(var n,i=0,e=this.entries;i<e.length;i++){var r=e[i];t.writer.writeUInt(r.segmentDuration,32),t.writer.writeInt(r.mediaTime,32),t.writer.writeUInt(r.mediaRateInteger,16),t.writer.writeUInt(null!==(n=r.mediaRateFraction)&&void 0!==n?n:0,16)}},n}(cs),vs=function(t){function n(n,i){return void 0===i&&(i=0),t.call(this,n,1,i)||this}return vu(n,t),n.prototype.serializeElstBoxContent=function(t){for(var n,i=0,e=this.entries;i<e.length;i++){var r=e[i];t.writer.writeUInt(r.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(r.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(r.mediaTime.getHighBits(),32),t.writer.writeInt(r.mediaTime.getLowBits(),32),t.writer.writeUInt(r.mediaRateInteger,16),t.writer.writeUInt(null!==(n=r.mediaRateFraction)&&void 0!==n?n:0,16)}},n}(cs);function ds(t){for(var n=t.data,i=$u(n.nextUint32()),e=i.version,r=i.flags,o=n.nextUint32(),u=[],s=0;s<o;s++){var f=void 0,h=void 0;0===e?(f=n.nextUint32(),h=n.nextInt32()):(f=n.nextUint64(),h=n.nextInt64());var c=n.nextInt16(),a=n.nextInt16();u.push({segmentDuration:f,mediaTime:h,mediaRateFraction:a,mediaRateInteger:c})}return 0===e?new as(u,r.raw):new vs(u,r.raw)}var ls=function(t){function n(){return t.call(this,"edts")||this}return vu(n,t),n}(us);function ws(t){for(var n=new ls,i=0,e=Ku(t.data);i<e.length;i++){var r=e[i];ju(r,"elst")?n.boxes.push(ds(r)):n.boxes.push(ts(r))}return n}x(),gt(),x(),gt();var bs=function(t){function n(n,i,e,r){var o=t.call(this,n)||this;return o.majorBrand=i,o.minorVersion=e,o.compatibleBrands=r,o}return vu(n,t),p.defineProperty(n.prototype,"majorBrand",{get:function(){return this.EA},set:function(t){if(4!==t.length)throw new g("the provided major brand does not conform to the 4 character requirement");this.EA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"minorVersion",{get:function(){return this.xA},set:function(t){if(!Tu(t,32))throw new g("the provided minor version does not fit in 32 bits.");this.xA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"compatibleBrands",{get:function(){return this.RA},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new g("Some of the compatible brands do not conform to the 4 character requirement");this.RA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},n.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var n=0,i=this.compatibleBrands;n<i.length;n++){var e=i[n];t.writer.writeString(e)}},n}(Su);!function(t){function n(n,i,e){return t.call(this,"ftyp",n,i,e)||this}vu(n,t)}(bs);x(),gt();!function(t){function n(n,i){void 0===i&&(i="free");var e=t.call(this,i)||this;return e.data=n,e}vu(n,t),n.prototype.getBoxContentSize=function(){var t,n;return null!==(n=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==n?n:0},n.prototype.serializeBoxContent=function(t){this.data&&t.concat(pu.from(this.data))}}(Su);x(),gt(),x(),gt();var gs=function(t){function n(n,i,e,r){void 0===r&&(r=0);var o=t.call(this,"mdhd",e,r)||this;return o.creationTime=n.creation,o.modificationTime=n.modification,o.timescale=n.scale,o.duration=n.duration,o.language=i,o}return vu(n,t),p.defineProperty(n.prototype,"creationTime",{get:function(){return this.IA},set:function(t){if(!Tu(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.IA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"modificationTime",{get:function(){return this.CA},set:function(t){if(!Tu(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.CA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"timescale",{get:function(){return this.PA},set:function(t){if(!Tu(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.PA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"duration",{get:function(){return this.DA},set:function(t){if(!Tu(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.DA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"language",{get:function(){return this.NA},set:function(t){if(!_s(t))throw new g("Expected an ISO-639-2/T language code");this.NA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),this.serializeMdiaContent(n),n.writer.writeBit(0);for(var i=0,e=this.language;i<e.length;i++){var r=e[i];n.writer.writeUInt(r.charCodeAt(0)-96,5)}n.writer.writeUInt(0,16)},n}(Ru),ms=function(t){function n(n,i,e){return void 0===e&&(e=0),t.call(this,n,i,0,e)||this}return vu(n,t),n.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},n}(gs),ps=function(t){function n(n,i,e){return void 0===e&&(e=0),t.call(this,n,i,1,e)||this}return vu(n,t),n.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},n}(gs);function ys(t){var n=t.data,i=$u(n.nextUint32()),e=i.version,r=i.flags,o=Zu(n,e),u=new gu(pu.from(n.nextUint8Array(2)));u.skipBits(1);for(var s=[],f=0;f<3;f++)s.push(u.readUInt(5));var h=s.map((function(t){return String.fromCharCode(t+96)})).join("");return _s(h)||(h="und"),n.skip(2),0===e?new ms(o,h,r.raw):new ps(o,h,r.raw)}function _s(t){return/^[a-z]{3}$/.test(t)}var Ss=function(t){function n(){return t.call(this,"mdia")||this}return vu(n,t),n}(us);function Ts(t){for(var n=new Ss,i=0,e=Ku(t.data);i<e.length;i++){var r=e[i];ju(r,"mdhd")?n.boxes.push(ys(r)):ju(r,"hdlr")?n.boxes.push(is(r)):n.boxes.push(ts(r))}return n}x(),gt();!function(t){function n(){var n=t.call(this,"mdat")||this;return n.data=new pu,n}vu(n,t),n.prototype.getBoxContentSize=function(){return this.data.length},n.prototype.serializeBoxContent=function(t){t.concat(this.data)}}(Su);x(),gt();!function(t){function n(){return t.call(this,"minf")||this}vu(n,t)}(us);x(),gt();var Es;!function(t){function n(n){var i=t.call(this,"meta",0,0)||this;return i.handler=n,i}vu(n,t),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.concat(this.handler.serialize())}}(hs);x(),gt(),x(),gt(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(Es||(Es={})),x(),gt();var Is,ks,Rs={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function Os(t,n){n.writer.writeUInt(Eu(t.a,16),32),n.writer.writeUInt(Eu(t.b,16),32),n.writer.writeUInt(Eu(0,30),32),n.writer.writeUInt(Eu(t.c,16),32),n.writer.writeUInt(Eu(t.d,16),32),n.writer.writeUInt(Eu(0,30),32),n.writer.writeUInt(Eu(t.x,16),32),n.writer.writeUInt(Eu(t.y,16),32),n.writer.writeUInt(Eu(1,30),32)}function Ns(t,n){var i,e,r,o;n.writer.writeUInt(null!==(i=t.isLeading)&&void 0!==i?i:Is.UNKNOWN,2),n.writer.writeUInt(null!==(e=t.sampleDependsOn)&&void 0!==e?e:ks.UNKNOWN,2),n.writer.writeUInt(null!==(r=t.sampleIsDependedOn)&&void 0!==r?r:ks.UNKNOWN,2),n.writer.writeUInt(null!==(o=t.sampleHasRedundancy)&&void 0!==o?o:ks.UNKNOWN,2)}function Ps(t,n){var i,e,r;n.writer.writeUInt(0,4),Ns(t,n),n.writer.writeUInt(null!==(i=t.samplePaddingValue)&&void 0!==i?i:0,3),n.writer.writeBool(null!==(e=t.sampleIsNonSyncSample)&&void 0!==e&&e),n.writer.writeUInt(null!==(r=t.sampleDegradationPriority)&&void 0!==r?r:0,16)}x(),gt(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(Is||(Is={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(ks||(ks={})),x(),gt(),x(),gt();var As=function(){};x(),gt(),x(),gt(),x(),gt();var Ds=function(t){function n(n,i,e){var r=t.call(this,"pssh",n,0)||this;return r.systemId=i,r.data=e,r}return vu(n,t),p.defineProperty(n.prototype,"systemId",{get:function(){return this.MA},set:function(t){if(16!==t.length)throw new g("Provided systemId length is not 16.");this.MA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"data",{get:function(){return this.Sp},set:function(t){if(!Tu(t.length,32))throw new g("Provided data length does not fit in 32 bits.");this.Sp=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},n.prototype.serializeVersionBoxContent=function(t){},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.concat(pu.from(this.systemId)),this.serializeVersionBoxContent(n),n.writer.writeUInt(this.data.length,32),n.concat(pu.from(this.data))},n}(Ru),Cs=function(t){function n(n,i){return t.call(this,0,n,i)||this}return vu(n,t),n}(Ds),xs=function(t){function n(n,i,e){var r=t.call(this,1,n,i)||this;return r.kIds=e,r}return vu(n,t),p.defineProperty(n.prototype,"kIds",{get:function(){return this.LA},set:function(t){if(!Tu(t.length,32))throw new g("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new g("Not all provided key ids are 16 bytes long.");this.LA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},n.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var n=0,i=this.kIds;n<i.length;n++){var e=i[n];t.concat(pu.from(e))}},n}(Ds);function Bs(t){var n=t.data.nextUint8();t.data.skip(3);var i=t.data.nextUint8Array(16),e=[];if(1===n)for(var r=t.data.nextUint32(),o=0;o<r;o++)e.push(t.data.nextUint8Array(16));var u=t.data.nextUint32(),s=t.data.nextUint8Array(u);return 1===n?new xs(i,s,e):new Cs(i,s)}x(),gt(),x(),gt();var Ms=function(t){function n(n,i,e){void 0===e&&(e=0);var r=t.call(this,"mehd",i,e)||this;return r.fragmentDuration=n,r}return vu(n,t),p.defineProperty(n.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"fragmentDuration",{get:function(){return this.BA},set:function(t){if(!Tu(t,this.bitSize))throw new g("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.BA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},n}(Ru),Ls=function(t){function n(n,i){return void 0===i&&(i=0),t.call(this,n,0,i)||this}return vu(n,t),n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.fragmentDuration,32)},n}(Ms),Us=function(t){function n(n,i){return void 0===i&&(i=0),t.call(this,n,1,i)||this}return vu(n,t),n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),n.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},n}(Ms);function Fs(t){var n=t.data,i=$u(n.nextUint32()),e=i.version,r=i.flags;return 0===e?new Ls(n.nextUint32(),r.raw):new Us(n.nextUint64(),r.raw)}x(),gt();var zs=function(t){function n(n,i,e,r){void 0===i&&(i={}),void 0===e&&(e=0),void 0===r&&(r=0);var o,u,s,f=this;return(f=t.call(this,"trex",e,r)||this).trackId=n,f.defaultSampleDescriptionIndex=null!==(o=null==i?void 0:i.sampleDescriptionIndex)&&void 0!==o?o:0,f.defaultSampleDuration=null!==(u=i.sampleDuration)&&void 0!==u?u:0,f.defaultSampleSize=null!==(s=i.sampleSize)&&void 0!==s?s:0,f.defaultSampleFlags=i.sampleFlags,f}return vu(n,t),p.defineProperty(n.prototype,"trackId",{get:function(){return this.OA},set:function(t){if(!Tu(t,32))throw new g("Provided track id does not fit in 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.FA},set:function(t){if(!Tu(t,32))throw new g("Provided default sample description index does not fit in 32 bits.");this.FA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"defaultSampleDuration",{get:function(){return this.VA},set:function(t){if(!Tu(t,32))throw new g("Provided default sample duration does not fit in 32 bits.");this.VA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"defaultSampleSize",{get:function(){return this.WA},set:function(t){if(!Tu(t,32))throw new g("Provided default sample size does not fit in 32 bits.");this.WA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"defaultSampleFlags",{get:function(){return this.UA},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!Tu(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Tu(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.UA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},n.prototype.serializeBoxContent=function(n){var i;t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.trackId,32),n.writer.writeUInt(this.defaultSampleDescriptionIndex,32),n.writer.writeUInt(this.defaultSampleDuration,32),n.writer.writeUInt(this.defaultSampleSize,32),Ps(null!==(i=this.defaultSampleFlags)&&void 0!==i?i:{},n)},n}(Ru);function Ws(t){var n=t.data,i=$u(n.nextUint32()),e=i.version,r=i.flags,o=n.nextUint32(),u=n.nextUint32(),s=n.nextUint32(),f=n.nextUint32(),h=Ju(new gu(pu.from(n.nextUint8Array(4))));return new zs(o,{sampleDescriptionIndex:u,sampleDuration:s,sampleSize:f,sampleFlags:h},e,r.raw)}var Hs=function(t){function n(){return t.call(this,"mvex")||this}return vu(n,t),n}(us);function Vs(t){for(var n=new Hs,i=0,e=Ku(t.data);i<e.length;i++){var r=e[i];ju(r,"mehd")?n.boxes.push(Fs(r)):ju(r,"trex")?n.boxes.push(Ws(r)):n.boxes.push(ts(r))}return n}x(),gt();var qs=function(t){function n(i,e,r,o,u){void 0===u&&(u=0);var s,f,h,c=this;return(c=t.call(this,"mvhd",o,u)||this).creationTime=i.creation,c.modificationTime=i.modification,c.timescale=i.scale,c.duration=i.duration,c.rate=null!==(s=r.rate)&&void 0!==s?s:n.DEFAULT_RATE,c.volume=null!==(f=r.volume)&&void 0!==f?f:n.DEFAULT_VOLUME,c.matrix=null!==(h=r.matrix)&&void 0!==h?h:Rs,c.GA=e,c}return vu(n,t),p.defineProperty(n.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"creationTime",{get:function(){return this.IA},set:function(t){if(!Tu(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.IA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"modificationTime",{get:function(){return this.CA},set:function(t){if(!Tu(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.CA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"timescale",{get:function(){return this.PA},set:function(t){if(!Tu(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.PA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"duration",{get:function(){return this.DA},set:function(t){if(!Tu(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.DA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"rate",{get:function(){return this.HA},set:function(t){if(!Tu(Eu(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.HA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"volume",{get:function(){return this.ZA},set:function(t){if(!Tu(Eu(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.ZA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"matrix",{get:function(){return this.XA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.XA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"nextTrackId",{get:function(){return this.GA},set:function(t){if(0===t)throw new g("NextTrackId cannot be 0.");if(!Tu(t,32))throw new g("NextTrackId cannot exceed 32 bits.");this.GA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),this.serializeMvhdContent(n),n.writer.writeUInt(Eu(this.rate,16),32),n.writer.writeUInt(Eu(this.volume,8),16),n.writer.writeUInt(0,16),n.writer.writeUInt(0,32),n.writer.writeUInt(0,32),Os(this.matrix,n);for(var i=0;i<6;i++)n.writer.writeUInt(0,32);n.writer.writeUInt(this.nextTrackId,32)},n.DEFAULT_RATE=1,n.DEFAULT_VOLUME=1,n}(Ru),Xs=function(t){function n(n,i,e,r){return void 0===e&&(e={}),void 0===r&&(r=0),t.call(this,n,i,e,0,r)||this}return vu(n,t),n.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},n}(qs),js=function(t){function n(n,i,e,r){return void 0===e&&(e={}),void 0===r&&(r=0),t.call(this,n,i,e,1,r)||this}return vu(n,t),n.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},n}(qs);function Ys(t){var n=t.data,i=$u(n.nextUint32()),e=i.version,r=i.flags,o=Zu(n,e),u=ku(n.nextUint32(),16),s=ku(n.nextUint16(),8);n.skip(2),n.skip(8);var f=Qu(n);n.skip(24);var h=n.nextUint32();return 0===e?new Xs(o,h,{rate:u,volume:s,matrix:f},r.raw):new js(o,h,{rate:u,volume:s,matrix:f},r.raw)}x(),gt(),x(),gt();var Ks=function(t){function n(n,i,e,r,o,u,s){void 0===s&&(s={});var f,h,c,a=this;return a=t.call(this,"tkhd",n,function(t){var n,i,e,r;return{trackEnabled:null===(n=null==t?void 0:t.trackEnabled)||void 0===n||n,trackInMovie:null===(i=null==t?void 0:t.trackInMovie)||void 0===i||i,trackInPreview:null===(e=null==t?void 0:t.trackInPreview)||void 0===e||e,trackSizeIsAspectRatio:null!==(r=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==r&&r}}(s))||this,a.creationTime=i.creation,a.modificationTime=i.modification,a.trackId=e,a.duration=i.duration,a.volume=r,a.width=o,a.height=u,a.layer=null!==(f=s.layer)&&void 0!==f?f:0,a.alternateGroup=null!==(h=s.alternateGroup)&&void 0!==h?h:0,a.matrix=null!==(c=s.matrix)&&void 0!==c?c:Rs,a}return vu(n,t),p.defineProperty(n.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"creationTime",{get:function(){return this.IA},set:function(t){if(!Tu(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.IA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"modificationTime",{get:function(){return this.CA},set:function(t){if(!Tu(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.CA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"trackId",{get:function(){return this.OA},set:function(t){if(0===t)throw new g("trackId cannot be 0.");if(!Tu(t,32))throw new g("trackId cannot exceed 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"duration",{get:function(){return this.DA},set:function(t){if(!Tu(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.DA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"volume",{get:function(){return this.ZA},set:function(t){if(!Tu(Eu(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.ZA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"width",{get:function(){return this.zA},set:function(t){if(!Tu(Eu(t,16),32))throw new g("Provided width does not fit in 32 bits (fixed 16.16).");this.zA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"height",{get:function(){return this.qA},set:function(t){if(!Tu(Eu(t,16),32))throw new g("Provided height does not fit in 32 bits (fixed 16.16).");this.qA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"layer",{get:function(){return this.YA},set:function(t){if(!Tu(t,16))throw new g("Provided layer does not fit in 16 bits.");this.YA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"alternateGroup",{get:function(){return this.KA},set:function(t){if(!Tu(t,16))throw new g("Provided alternateGroup does not fit in 16 bits.");this.KA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"matrix",{get:function(){return this.XA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.XA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},n.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),this.serializeTkhdContent(n),n.writer.writeUInt(0,32),n.writer.writeUInt(0,32),n.writer.writeUInt(this.layer,16),n.writer.writeUInt(this.alternateGroup,16),n.writer.writeUInt(Eu(this.volume,8),16),n.writer.writeUInt(0,16),Os(this.matrix,n),n.writer.writeUInt(Eu(this.width,16),32),n.writer.writeUInt(Eu(this.height,16),32)},n}(Ru),Gs=function(t){function n(n,i,e,r,o,u){return t.call(this,0,n,i,e,r,o,u)||this}return vu(n,t),n.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},n}(Ks),$s=function(t){function n(n,i,e,r,o,u){return t.call(this,1,n,i,e,r,o,u)||this}return vu(n,t),n.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},n}(Ks);function Zs(t){var n,i,e,r,o=t.data,u=$u(o.nextUint32()),s=u.version,f=u.flags,h=f.isSet(8),c=f.isSet(4),a=f.isSet(2),v=f.isSet(1);0===s?(n=o.nextUint32(),i=o.nextUint32(),e=o.nextUint32(),o.skip(4),r=o.nextUint32()):(n=o.nextUint64(),i=o.nextUint64(),e=o.nextUint32(),o.skip(4),r=o.nextUint64()),o.skip(8);var d=o.nextInt16(),l=o.nextInt16(),w=ku(o.nextInt16(),8);o.skip(2);var b=Qu(o),g=ku(o.nextUint32(),16),m=ku(o.nextUint32(),16);return 0===s?new Gs({creation:n,modification:i,duration:r},e,w,g,m,{layer:d,matrix:b,alternateGroup:l,trackSizeIsAspectRatio:h,trackEnabled:v,trackInPreview:c,trackInMovie:a}):new $s({creation:n,modification:i,duration:r},e,w,g,m,{layer:d,matrix:b,alternateGroup:l,trackSizeIsAspectRatio:h,trackEnabled:v,trackInPreview:c,trackInMovie:a})}var Js=function(t){function n(){return t.call(this,"trak")||this}return vu(n,t),n}(us);function Qs(t){for(var n=new Js,i=0,e=Ku(t.data);i<e.length;i++){var r=e[i];ju(r,"tkhd")?n.boxes.push(Zs(r)):ju(r,"mdia")?n.boxes.push(Ts(r)):ju(r,"edts")?n.boxes.push(ws(r)):n.boxes.push(ts(r))}return n}var tf=function(t){function n(){return t.call(this,"moov")||this}return vu(n,t),n}(us);x(),gt(),x(),gt(),x(),gt();var nf=function(t){function n(n,i,e){void 0===e&&(e=0);var r=t.call(this,"tfdt",i,e)||this;return r.baseMediaDecodeTime=n,r}return vu(n,t),p.defineProperty(n.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"baseMediaDecodeTime",{get:function(){return this.jA},set:function(t){if(!Tu(t,this.bitSize))throw new g("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.jA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},n}(Ru),ef=function(t){function n(n,i){return void 0===i&&(i=0),t.call(this,n,0,i)||this}return vu(n,t),n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.baseMediaDecodeTime,32)},n}(nf),rf=function(t){function n(n,i){return void 0===i&&(i=0),t.call(this,n,1,i)||this}return vu(n,t),n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),n.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},n}(nf);function of(t){var n=t.data,i=$u(n.nextUint32()),e=i.version,r=i.flags;return 0===e?new ef(n.nextUint32(),r.raw):new rf(n.nextUint64(),r.raw)}x(),gt();var uf=function(t){function n(n,i){void 0===i&&(i=0);var e=t.call(this,"tfhd",i,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(n))||this;return e.trackId=n.trackId,e.baseDataOffset=n.baseDataOffset,e.sampleDescriptionIndex=n.sampleDescriptionIndex,e.defaultSampleDuration=n.defaultSampleDuration,e.defaultSampleSize=n.defaultSampleSize,e.defaultSampleFlags=n.defaultSampleFlags,e}return vu(n,t),p.defineProperty(n.prototype,"trackId",{get:function(){return this.OA},set:function(t){if(!Tu(t,32))throw new g("Provided track id does not fit in 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"baseDataOffset",{get:function(){return this.QA},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is not set.");if(t&&!Tu(t,64))throw new g("Provided baseDataOffset does not fit in 32 bits.");this.QA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"sampleDescriptionIndex",{get:function(){return this.JA},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is not set.");if(t&&!Tu(t,32))throw new g("Provided sampleDescriptionIndex does not fit in 32 bits.");this.JA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"defaultSampleDuration",{get:function(){return this.VA},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is not set.");if(t&&!Tu(t,32))throw new g("Provided defaultSampleDuration does not fit in 32 bits.");this.VA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"defaultSampleSize",{get:function(){return this.WA},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is not set.");if(t&&!Tu(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.WA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"defaultSampleFlags",{get:function(){return this.UA},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!Tu(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Tu(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.UA=t},enumerable:!1,configurable:!0}),n.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},n.prototype.getBoxContentSize=function(){var n=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(n+=8),this.flags.sampleDescriptionIndexPresent&&(n+=4),this.flags.defaultSampleDurationPresent&&(n+=4),this.flags.defaultSampleSizePresent&&(n+=4),this.flags.defaultSampleFlagsPresent&&(n+=4),n},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(n.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),n.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&n.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&n.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&n.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Ps(this.defaultSampleFlags,n)},n}(Ru);function sf(t){var n=t.data,i=n.nextUint8(),e=new gu(pu.from(n.nextUint8Array(3)));e.skipBits(6);var r=Boolean(e.readBit()),o=Boolean(e.readBit());e.skipBits(10);var u=Boolean(e.readBit()),s=Boolean(e.readBit()),f=Boolean(e.readBit());e.skipBits(1);var h=Boolean(e.readBit()),c=Boolean(e.readBit()),a=n.nextUint32(),v=c?n.nextUint64():void 0,d=h?n.nextUint32():void 0,l=f?n.nextUint32():void 0,w=s?n.nextUint32():void 0,b=u?Ju(new gu(pu.from(n.nextUint8Array(4)))):void 0;return new uf({trackId:a,defaultBaseIsMoof:r,durationIsEmpty:o,baseDataOffset:v,sampleDescriptionIndex:d,defaultSampleDuration:l,defaultSampleSize:w,defaultSampleFlags:b},i)}x(),gt();var ff=function(t){function n(n,i,e){var r=t.call(this,"trun",n,function(t){var n,i,e,r;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(n=t.sampleDurationPresent)&&void 0!==n&&n,sampleSizePresent:null!==(i=t.sampleSizePresent)&&void 0!==i&&i,sampleFlagsPresent:null!==(e=t.sampleFlagsPresent)&&void 0!==e&&e,sampleCompositionTimeOffsetsPresent:null!==(r=t.sampleCompositionTimeOffsetsPresent)&&void 0!==r&&r}}(i))||this;return r.dataOffset=i.dataOffset,r.samples=e,r.firstSampleFlags=i.firstSampleFlags,r}return vu(n,t),p.defineProperty(n.prototype,"dataOffset",{get:function(){return this.$A},set:function(t){if(t&&!Tu(t,32))throw new g("Provided data offset does not fit in 32 bits.");this.$A=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"firstSampleFlags",{get:function(){return this.tS},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!Tu(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Tu(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.tS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"samples",{get:function(){return this.eS},set:function(t){var n,i;if(!Tu(t.length,32))throw new g("The sample count cannot be represented in 32 bits.");for(var e=0,r=t;e<r.length;e++){var o=r[e];if(void 0===o.duration&&this.flags.sampleDurationPresent)throw new g("The sample duration present flag is set.");if(void 0!==o.duration&&!this.flags.sampleDurationPresent)throw new g("The sample duration present flag is not set.");if(o.duration&&!Tu(o.duration,32))throw new g("Provided sample duration does not fit in 32 bits.");if(void 0===o.size&&this.flags.sampleSizePresent)throw new g("The sample size present flag is set.");if(void 0!==o.size&&!this.flags.sampleSizePresent)throw new g("The sample size present flag is not set.");if(o.size&&!Tu(o.size,32))throw new g("Provided sample size does not fit in 32 bits.");if(void 0===o.flags&&this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is set.");if(void 0!==o.flags&&!this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is not set.");if((null===(n=o.flags)||void 0===n?void 0:n.samplePaddingValue)&&!Tu(o.flags.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null===(i=o.flags)||void 0===i?void 0:i.sampleDegradationPriority)&&!Tu(o.flags.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");if(void 0===o.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is set.");if(void 0!==o.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is not set.");if(o.compositionTimeOffset&&!Tu(o.compositionTimeOffset,32))throw new g("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.eS=t},enumerable:!1,configurable:!0}),n.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},n.prototype.getBoxContentSize=function(){var n=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(n+=4),this.flags.firstSampleFlagsPresent&&(n+=4),this.flags.sampleDurationPresent&&(n+=4*this.samples.length),this.flags.sampleSizePresent&&(n+=4*this.samples.length),this.flags.sampleFlagsPresent&&(n+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(n+=4*this.samples.length),n},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&n.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Ps(this.firstSampleFlags,n);for(var i=0,e=this.samples;i<e.length;i++){var r=e[i];this.flags.sampleDurationPresent&&n.writer.writeUInt(r.duration,32),this.flags.sampleSizePresent&&n.writer.writeUInt(r.size,32),this.flags.sampleFlagsPresent&&Ps(r.flags,n),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?n.writer.writeUInt(r.compositionTimeOffset,32):n.writer.writeInt(r.compositionTimeOffset,32))}},n}(Ru);function hf(t){var n=t.data,i=n.nextUint8(),e=new gu(pu.from(n.nextUint8Array(3)));e.skipBits(12);var r=Boolean(e.readBit()),o=Boolean(e.readBit()),u=Boolean(e.readBit()),s=Boolean(e.readBit());e.skipBits(5);var f=Boolean(e.readBit());e.skipBits(1);var h=Boolean(e.readBit()),c=n.nextUint32(),a={sampleDurationPresent:s,sampleSizePresent:u,sampleFlagsPresent:o,sampleCompositionTimeOffsetsPresent:r};h&&(a.dataOffset=n.nextInt32()),f&&(a.firstSampleFlags=Ju(new gu(pu.from(n.nextUint8Array(4)))));for(var v=[],d=0;d<c;d++){var l={};s&&(l.duration=n.nextUint32()),u&&(l.size=n.nextUint32()),o&&(l.flags=Ju(new gu(pu.from(n.nextUint8Array(4))))),r&&(l.compositionTimeOffset=0===i?n.nextUint32():n.nextInt32()),v.push(l)}return new ff(i,a,v)}var cf=function(t){function n(){return t.call(this,"traf")||this}return vu(n,t),n}(us);function af(t){for(var n=new cf,i=0,e=Ku(t.data);i<e.length;i++){var r=e[i];ju(r,"tfhd")?n.boxes.push(sf(r)):ju(r,"tfdt")?n.boxes.push(of(r)):ju(r,"trun")?n.boxes.push(hf(r)):n.boxes.push(ts(r))}return n}var vf=function(t){function n(){return t.call(this,"moof")||this}return vu(n,t),n}(us);x(),gt();!function(t){function n(n){var i=t.call(this,"mfhd",0,0)||this;return i.sequenceNumber=n,i}vu(n,t),p.defineProperty(n.prototype,"sequenceNumber",{get:function(){return this.iS},set:function(t){if(!Tu(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.iS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.sequenceNumber,32)}}(Ru);x(),gt();var df=function(t){function n(n){var i=t.call(this,"frma")||this;return i.codingName=n,i}return vu(n,t),p.defineProperty(n.prototype,"codingName",{get:function(){return this.sS},set:function(t){if(4!==t.length)throw new g("Provided coding name was not 4 characters long.");this.sS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return 4},n.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},n}(Su);x(),gt();!function(t){function n(n,i){var e=t.call(this,"pasp")||this;return e.hSpacing=n,e.vSpacing=i,e}vu(n,t),p.defineProperty(n.prototype,"hSpacing",{get:function(){return this.nS},set:function(t){if(!Tu(t,32))throw new g("Provided hSpacing does not fit in 32 bits.");this.nS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"vSpacing",{get:function(){return this.rS},set:function(t){if(!Tu(t,32))throw new g("Provided vSpacing does not fit in 32 bits.");this.rS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return 8},n.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(Su);x(),gt();!function(t){function n(n,i,e){var r=t.call(this,n)||this;return r.sample=i,r.sinf=e,r}vu(n,t),n.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},n.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(us);x(),gt();!function(t){function n(n,i,e){var r=t.call(this,"sinf")||this;return r.schm=i,r.schi=e,r.frma=new df(n),r}vu(n,t),n.prototype.getBoxContentSize=function(){var t,n,i,e;return this.frma.getSize()+(null!==(n=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==n?n:0)+(null!==(e=null===(i=this.schi)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)},n.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(Su);x(),gt();var lf=function(t){function n(n,i,e){var r=t.call(this,"saio",n,void 0===e?0:1)||this;return r.entries=i,r.explicitAuxInfoType=e,r}return vu(n,t),p.defineProperty(n.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"entries",{get:function(){return this.mA},set:function(t){var n=this;if(!Tu(t.length,32))throw new g("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!Tu(t,n.bitSize)})))throw new g("Not all provided entries fit in ".concat(this.bitSize," bits."));this.mA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"explicitAuxInfoType",{get:function(){return this.oS},set:function(t){if(void 0===t)this.flags=0;else{if(!Tu(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!Tu(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.oS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),void 0!==this.explicitAuxInfoType&&(n.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),n.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),n.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(n)},n}(Ru);(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}vu(n,t),n.prototype.serializeSaioContent=function(t){for(var n=0,i=this.entries;n<i.length;n++){var e=i[n];t.writer.writeUInt(e,32)}}})(lf),function(t){function n(){return null!==t&&t.apply(this,arguments)||this}vu(n,t),n.prototype.serializeSaioContent=function(t){for(var n=0,i=this.entries;n<i.length;n++){var e=i[n];t.writer.writeUInt(e.getHighBitsUnsigned(),32),t.writer.writeUInt(e.getLowBitsUnsigned(),32)}}}(lf);x(),gt();!function(t){function n(n,i,e){var r=t.call(this,"saiz",0,void 0===e?0:1)||this;return r.defaultSampleInfoSize=n,r.sampleInfoSizes=i,r.explicitAuxInfoType=e,r}vu(n,t),p.defineProperty(n.prototype,"defaultSampleInfoSize",{get:function(){return this.hS},set:function(t){if(!Tu(t,8))throw new g("Provided defaultSampleInfoSize does not fit in a single byte.");this.hS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"sampleInfoSizes",{get:function(){return this.aS},set:function(t){if(!Tu(t.length,32))throw new g("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!Tu(t,8)})))throw new g("Not all provided sampleInfoSizes fit in a byte.");this.aS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"explicitAuxInfoType",{get:function(){return this.oS},set:function(t){if(void 0===t)this.flags=0;else{if(!Tu(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!Tu(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.oS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},n.prototype.serializeBoxContent=function(n){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new g("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,n),void 0!==this.explicitAuxInfoType&&(n.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),n.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),n.writer.writeByte(this.defaultSampleInfoSize),n.writer.writeUInt(this.sampleInfoSizes.length,32);for(var i=0,e=this.sampleInfoSizes;i<e.length;i++){var r=e[i];n.writer.writeByte(r)}}}(Ru);x(),gt();!function(t){function n(n){var i=t.call(this,"sdtp",0,0)||this;return i.samples=n,i}vu(n,t),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n);for(var i=0,e=this.samples;i<e.length;i++){Ns(e[i],n)}}}(Ru);x(),gt();!function(t){function n(n){return t.call(this,"stsd",n,0)||this}vu(n,t),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.boxes.length,32)}}(hs);x(),gt();var wf=function(t){function n(n,i,e){var r=t.call(this,"sgpd",n,0)||this;return r.entries=e,r.groupingType=i,r}return vu(n,t),p.defineProperty(n.prototype,"groupingType",{get:function(){return this.uS},set:function(t){if(4!==t.length)throw new g("The provided groupingType does not equal 4 characters.");this.uS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeString(this.groupingType),this.serializeVersionBoxContent(n),n.writer.writeUInt(this.entries.length,32);for(var i=0,e=this.entries;i<e.length;i++){var r=e[i];this.serializeEntryBoxContent(n,r)}},n.prototype.serializeEntryBoxContent=function(t,n){n.serializeBoxContent(t)},n}(Ru);(function(t){function n(n,i){return t.call(this,0,n,i)||this}vu(n,t),n.prototype.serializeVersionBoxContent=function(t){}})(wf),function(t){function n(n,i,e){var r=t.call(this,1,n,e)||this;return r.defaultLength=i,r}vu(n,t),p.defineProperty(n.prototype,"defaultLength",{get:function(){return this.cS},set:function(t){if(!Tu(t,32))throw new g("The provided defaultLength does not fit in 32 bits.");this.cS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},n.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},n.prototype.serializeEntryBoxContent=function(t,n){0===this.defaultLength&&t.writer.writeUInt(n.getBoxContentSize(),32),n.serializeBoxContent(t)}}(wf),function(t){function n(n,i,e,r){void 0===r&&(r=0);var o=this;if(n<2)throw new g("This constructor is only meant for versions 2 and up.");return(o=t.call(this,n,i,e)||this).defaultSampleDescriptionIndex=r,o}vu(n,t),p.defineProperty(n.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.FA},set:function(t){if(!Tu(t,32))throw new g("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.FA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},n.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(wf);x(),gt();(function(t){function n(n){void 0===n&&(n=[]);var i=t.call(this,"stsz",0,0)||this;return i.sampleSizes=n,i}vu(n,t),p.defineProperty(n.prototype,"sampleSizes",{get:function(){return this.lS},set:function(t){if(!Tu(t.length,32))throw new g("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!Tu(t,32)})))throw new g("Not all sampleSizes can be represented in 32 bits.");this.lS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(0,32),n.writer.writeUInt(this.sampleSizes.length,32);for(var i=0,e=this.sampleSizes;i<e.length;i++){var r=e[i];n.writer.writeUInt(r,32)}}})(Ru),function(t){function n(n,i){void 0===n&&(n=0),void 0===i&&(i=0);var e=t.call(this,"stsz",0,0)||this;return e.defaultSampleSize=n,e.samples=i,e}vu(n,t),p.defineProperty(n.prototype,"defaultSampleSize",{get:function(){return this.WA},set:function(t){if(!Tu(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.WA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"samples",{get:function(){return this.eS},set:function(t){if(!Tu(t,32))throw new g("Number of allowed samples cannot fit in 32 bits.");this.eS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.defaultSampleSize,32),n.writer.writeUInt(this.samples,32)}}(Ru);x(),gt();!function(t){function n(){return t.call(this,"stbl")||this}vu(n,t)}(us);x(),gt();!function(t){function n(n){var i=t.call(this,"stsc",0,0)||this;return i.entries=n,i}vu(n,t),p.defineProperty(n.prototype,"entries",{get:function(){return this.mA},set:function(t){if(!Tu(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Tu(t.firstChunk,32)||!Tu(t.sampleDescriptionIndex,32)||!Tu(t.samplesPerChunk,32)})))throw new g("Not all entries can be represented in 96 bits.");this.mA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.entries.length,32);for(var i=0,e=this.entries;i<e.length;i++){var r=e[i];n.writer.writeUInt(r.firstChunk,32),n.writer.writeUInt(r.samplesPerChunk,32),n.writer.writeUInt(r.sampleDescriptionIndex,32)}}}(Ru);x(),gt();!function(t){function n(){return t.call(this,"schi")||this}vu(n,t)}(us);x(),gt();!function(t){function n(n,i,e){var r=t.call(this,"schm",0,void 0===e?0:1)||this;return r.schemeType=n,r.schemeVersion=i,r.schemeUri=e,r}vu(n,t),p.defineProperty(n.prototype,"schemeType",{get:function(){return this.dS},set:function(t){if(4!==t.length)throw new g("The provided schemeType does not have a length of 4.");this.dS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"schemeVersion",{get:function(){return this.fS},set:function(t){if(!Tu(t,32))throw new g("The provided schemeVersion does not fit in 23 bits.");this.fS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"schemeUri",{get:function(){return this._S},set:function(t){if(t&&4!==t.length)throw new g("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this._S=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeString(this.schemeType),n.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(n.writer.writeString(this.schemeUri),n.writer.writeByte(0))}}(Ru);x(),gt();var bf=function(t){function n(n,i,e,r,o,u,s){void 0===s&&(s=0);var f=t.call(this,"sidx",n,s)||this;return f.referenceId=i,f.timescale=e,f.earliestPresentationTime=r,f.firstOffset=o,f.references=u,f}return vu(n,t),p.defineProperty(n.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"referenceId",{get:function(){return this.vS},set:function(t){if(!Tu(t,32))throw new g("Provided referenceId does not fit in 32 bits.");this.vS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"timescale",{get:function(){return this.PA},set:function(t){if(!Tu(t,32))throw new g("Provided timescale does not fit in 32 bits.");this.PA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"earliestPresentationTime",{get:function(){return this.mS},set:function(t){if(!Tu(t,this.bitSize))throw new g("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.mS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"firstOffset",{get:function(){return this.gS},set:function(t){if(!Tu(t,this.bitSize))throw new g("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.gS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"references",{get:function(){return this.pS},set:function(t){if(!Tu(t.length,16))throw new g("The number of provided reference items does not fit in 16 bits.");for(var n=0,i=t;n<i.length;n++){var e=i[n];if(!Tu(e.referencedSize,31))throw new g("Provided referenced size does not fit in 31 bits.");if(!Tu(e.subsegmentDuration,32))throw new g("Provided subsegment duration does not fit in 31 bits.");if(!Tu(e.sapType,3))throw new g("Provided SAP type does not fit in 3 bits.");if(!Tu(e.sapDeltaTime,28))throw new g("Provided SAP delta time does not fit in 28 bits.")}this.pS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.referenceId,32),n.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(n),n.writer.writeUInt(0,16),n.writer.writeUInt(this.references.length,16);for(var i=0,e=this.references;i<e.length;i++){var r=e[i];n.writer.writeBit(r.referenceType),n.writer.writeUInt(r.referencedSize,31),n.writer.writeUInt(r.subsegmentDuration,32),n.writer.writeBool(r.startsWithSap),n.writer.writeUInt(r.sapType,3),n.writer.writeUInt(r.sapDeltaTime,28)}},n}(Ru),gf=function(t){function n(n,i,e,r,o,u){return void 0===u&&(u=0),t.call(this,0,n,i,e,r,o,u)||this}return vu(n,t),n.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},n}(bf),mf=function(t){function n(n,i,e,r,o,u){return void 0===u&&(u=0),t.call(this,1,n,i,e,r,o,u)||this}return vu(n,t),n.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},n}(bf);x(),gt();!function(t){function n(n,i,e){return t.call(this,"styp",n,i,e)||this}vu(n,t)}(bs);x(),gt();!function(t){function n(n){void 0===n&&(n=0);var i=t.call(this,"smhd",0,0)||this;return i.balance=n,i}vu(n,t),p.defineProperty(n.prototype,"balance",{get:function(){return this.wS},set:function(t){if(t<-1||t>1)throw new g("Provided balance does not fit in the allowed range [-1, 1].");if(!Tu(Eu(t,8),16))throw new g("Provided balance does not fit in 16 bits (fixed 8.8).");this.wS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(Eu(this.balance,8),16),n.writer.writeUInt(0,16)}}(Ru);x(),gt();!function(t){function n(n){var i=t.call(this,"stss",0,0)||this;return i.entries=n,i}vu(n,t),p.defineProperty(n.prototype,"entries",{get:function(){return this.mA},set:function(t){if(!Tu(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Tu(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.mA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.entries.length,32);for(var i=0,e=this.entries;i<e.length;i++){var r=e[i];n.writer.writeUInt(r,32)}}}(Ru);x(),gt();!function(t){function n(n){var i=t.call(this,"stts",0,0)||this;return i.entries=n,i}vu(n,t),p.defineProperty(n.prototype,"entries",{get:function(){return this.mA},set:function(t){if(!Tu(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Tu(t.sampleCount,32)||!Tu(t.sampleDelta,32)})))throw new g("Not all entries can be represented in 64 bits.");this.mA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.entries.length,32);for(var i=0,e=this.entries;i<e.length;i++){var r=e[i];n.writer.writeUInt(r.sampleCount,32),n.writer.writeUInt(r.sampleDelta,32)}}}(Ru);x(),gt();!function(t){function n(n){var i=t.call(this,"trep",0,0)||this;return i.trackId=n,i}vu(n,t),p.defineProperty(n.prototype,"trackId",{get:function(){return this.OA},set:function(t){if(!Tu(t,32))throw new g("The provided trackId does not fit in 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.trackId,32)}}(hs);x(),gt();!function(t){function n(){return t.call(this,"udta")||this}vu(n,t)}(us);x(),gt();var pf={red:0,green:0,blue:0};!function(t){function n(n,i){void 0===n&&(n=0),void 0===i&&(i=pf);var e=t.call(this,"vmhd",0,1)||this;return e.graphicsMode=n,e.opColor=i,e}vu(n,t),p.defineProperty(n.prototype,"opColor",{get:function(){return this.yS},set:function(t){if(!Tu(t.red,16)||!Tu(t.green,16)||!Tu(t.blue,16))throw new g("Not all colors could be represented in 16 bits.");this.yS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.graphicsMode,16),n.writer.writeUInt(this.opColor.red,16),n.writer.writeUInt(this.opColor.green,16),n.writer.writeUInt(this.opColor.blue,16)}}(Ru);x(),gt();var yf=function(t){function n(n,i,e,r,o){void 0===r&&(r={}),void 0===o&&(o=void 0);var u,s,f,h,c,a=this;return(a=t.call(this,n,i)||this).width=e.width,a.height=e.height,a.horizontalResolution=null!==(u=e.horizontal)&&void 0!==u?u:72,a.verticalResolution=null!==(s=e.vertical)&&void 0!==s?s:72,a.compressorName=null!==(f=r.compressorName)&&void 0!==f?f:"",a.frameCount=null!==(h=r.frameCount)&&void 0!==h?h:1,a.depth=null!==(c=r.depth)&&void 0!==c?c:24,a.clap=r.clap,a.pasp=r.pasp,a.extra=o,a}return vu(n,t),p.defineProperty(n.prototype,"width",{get:function(){return this.zA},set:function(t){if(!Tu(t,16))throw new g("Provided width does not fit in 16 bits.");this.zA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"height",{get:function(){return this.qA},set:function(t){if(!Tu(t,16))throw new g("Provided height does not fit in 16 bits.");this.qA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"horizontalResolution",{get:function(){return this.bS},set:function(t){if(!Tu(Eu(t,16),32))throw new g("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.bS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"verticalResolution",{get:function(){return this.SS},set:function(t){if(!Tu(Eu(t,16),32))throw new g("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.SS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"compressorName",{get:function(){return this.TS},set:function(t){if(t.length>31)throw new g("The provided compressorName should at most be 31 characters long.");this.TS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"frameCount",{get:function(){return this.kS},set:function(t){if(!Tu(t,16))throw new g("Provided frameCount does not fit in 16 bits.");this.kS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"depth",{get:function(){return this.ES},set:function(t){if(!Tu(t,16))throw new g("Provided depth does not fit in 16 bits.");this.ES=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){var n,i,e,r,o,u;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(i=null===(n=this.clap)||void 0===n?void 0:n.getSize())&&void 0!==i?i:0)+(null!==(r=null===(e=this.pasp)||void 0===e?void 0:e.getSize())&&void 0!==r?r:0)+(null!==(u=null===(o=this.extra)||void 0===o?void 0:o.length)&&void 0!==u?u:0)},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(0,16),n.writer.writeUInt(0,16),n.writer.writeUInt(0,32),n.writer.writeUInt(0,32),n.writer.writeUInt(0,32),n.writer.writeUInt(this.width,16),n.writer.writeUInt(this.height,16),n.writer.writeUInt(Eu(this.horizontalResolution,16),32),n.writer.writeUInt(Eu(this.verticalResolution,16),32),n.writer.writeUInt(0,32),n.writer.writeUInt(this.frameCount,16),n.writer.writeByte(this.compressorName.length),n.writer.writeString(this.compressorName);for(var i=0;i<31-this.compressorName.length;i++)n.writer.writeByte(0);n.writer.writeUInt(this.depth,16),n.writer.writeInt(-1,16),this.clap&&n.concat(this.clap.serialize()),this.pasp&&n.concat(this.pasp.serialize()),this.extra&&Iu(n.writer,this.extra)},n}(ss);x(),gt(),x(),gt();!function(t){function n(n){var i=t.call(this,"esds",0,0)||this;return i.esDescriptor=n,i}vu(n,t),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof E?this.esDescriptor.length:this.esDescriptor.getSize())},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),this.esDescriptor instanceof E?n.concat(pu.from(this.esDescriptor)):this.esDescriptor.serialize(n)}}(Ru);x(),gt();!function(t){function n(n,i,e){var r=t.call(this,"mp4a",n,e)||this;return r.esd=i,r}vu(n,t),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.concat(this.esd.serialize())}}(fs);x(),gt();!function(t){function n(n,i,e,r){void 0===r&&(r={});var o=t.call(this,"mp4v",n,i,r)||this;return o.esDescriptor=e,o}vu(n,t),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),this.esDescriptor.serialize(n)}}(yf);x(),gt();!function(t){function n(n,i){var e=t.call(this,"mp4s",n)||this;return e.esDescriptor=i,e}vu(n,t),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),this.esDescriptor.serialize(n)}}(ss);x(),gt(),x(),gt();!function(t){function n(n){var i=t.call(this,"avcC")||this;return i.decoderConfig=n,i}vu(n,t),n.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},n.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(Su);x(),gt();!function(){function t(t,n,i,e,r,o){void 0===o&&(o=1),this.lengthSizeMinusOne=i,this.version=o,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=n,this.spsSets=e,this.ppsSets=r}p.defineProperty(t.prototype,"version",{get:function(){return this.xS},set:function(t){if(!Tu(t,8))throw new g("Provided version does not fit in 8 bits.");this.xS=t},enumerable:!1,configurable:!0}),p.defineProperty(t.prototype,"profileIndication",{get:function(){return this.RS},set:function(t){if(!Tu(t,8))throw new g("Provided profileIndication does not fit in 8 bits.");this.RS=t},enumerable:!1,configurable:!0}),p.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.IS},set:function(t){if(!Tu(t,8))throw new g("Provided profileCompatibility does not fit in 8 bits.");this.IS=t},enumerable:!1,configurable:!0}),p.defineProperty(t.prototype,"levelIndication",{get:function(){return this.CS},set:function(t){if(!Tu(t,8))throw new g("Provided levelIndication does not fit in 8 bits.");this.CS=t},enumerable:!1,configurable:!0}),p.defineProperty(t.prototype,"spsSets",{get:function(){return this.PS},set:function(t){if(!Tu(t.length,5))throw new g("Provided number of spsSets exceeds the max (32)");this.PS=t},enumerable:!1,configurable:!0}),p.defineProperty(t.prototype,"ppsSets",{get:function(){return this.DS},set:function(t){if(!Tu(t.length,8))throw new g("Provided number of ppsSets exceeds the max (256)");this.DS=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,n){return t+n.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,n){return t+n.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var n=0,i=this.spsSets;n<i.length;n++){var e=i[n];t.writer.writeUInt(e.length,16),t.concat(pu.from(e))}t.writer.writeByte(this.ppsSets.length);for(var r=0,o=this.ppsSets;r<o.length;r++){var u=o[r];t.writer.writeUInt(u.length,16),t.concat(pu.from(u))}}}();x(),gt();!function(t){function n(n,i,e,r,o){void 0===r&&(r={}),void 0===o&&(o=void 0);var u=t.call(this,"avc1",n,i,r)||this;return u.configurationBox=e,u.bitrateBox=o,u}vu(n,t),n.prototype.getBoxContentSize=function(){var n,i;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(i=null===(n=this.bitrateBox)||void 0===n?void 0:n.getSize())&&void 0!==i?i:0)},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.concat(this.configurationBox.serialize()),this.bitrateBox&&n.concat(this.bitrateBox.serialize())}}(yf);x(),gt();!function(t){function n(n,i,e){var r=t.call(this,"btrt")||this;return r.bufferSizeDb=n,r.max=i,r.avg=e,r}vu(n,t),p.defineProperty(n.prototype,"bufferSizeDb",{get:function(){return this.rA},set:function(t){if(!Tu(t,32))throw new g("Provided bufferSizeDb does not fit in 32 bits.");this.rA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"max",{get:function(){return this.N_},set:function(t){if(!Tu(t,32))throw new g("Provided max does not fit in 32 bits.");this.N_=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"avg",{get:function(){return this.NS},set:function(t){if(!Tu(t,32))throw new g("Provided avg does not fit in 32 bits.");this.NS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return 12},n.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(Su);x(),gt(),x(),gt(),x(),gt();var _f=function(t){function n(n,i){var e,r,o,u,s=this;if(s=t.call(this,"tenc",n,0)||this,i.perSampleIvSize>0&&(null!==(r=null===(e=i.constantIv)||void 0===e?void 0:e.length)&&void 0!==r?r:0)>0)throw new g("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return s.kId=i.kId,s.isProtected=null!==(o=i.isProtected)&&void 0!==o?o:1,i.perSampleIvSize>0?s.perSampleIvSize=i.perSampleIvSize:s.constantIv=null!==(u=i.constantIv)&&void 0!==u?u:new E(0),s}return vu(n,t),p.defineProperty(n.prototype,"isProtected",{get:function(){return this.MS},set:function(t){if(!Tu(t,8))throw new g("Provided isProtected does not fit in 1 byte.");this.MS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"perSampleIvSize",{get:function(){return this.LS},set:function(t){if(![8,16].includes(t))throw new g("Provided perSampleIvSize does not match any allowed value [8, 16].");this.LS=t,this.FS=new E(0)},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"kId",{get:function(){return this.VS},set:function(t){if(16!==t.length)throw new g("Provided kId length is not 16.");this.VS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"constantIv",{get:function(){return this.FS},set:function(t){if(![8,16].includes(t.length))throw new g("Provided constant IV length does not match any allowed value [8, 16].");this.FS=t,this.LS=0},enumerable:!1,configurable:!0}),n.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},n.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),this.serializeOwnContent(n)},n.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),Iu(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),Iu(t.writer,this.constantIv))},n}(Ru),Sf=(function(t){function n(n){return t.call(this,0,n)||this}vu(n,t)}(_f),function(t){function n(n){var i=t.call(this,1,n)||this;return i.cryptByteBlocks=n.cryptByteBlock,i.skipByteBlocks=n.skipByteBlock,i}return vu(n,t),p.defineProperty(n.prototype,"cryptByteBlocks",{get:function(){return this.WS},set:function(t){if(!Tu(t,4))throw new g("Provided cryptByteBlocks does not fit in 4 bits.");this.WS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"skipByteBlocks",{get:function(){return this.US},set:function(t){if(!Tu(t,4))throw new g("Provided skipByteBlocks does not fit in 4 bits.");this.US=t},enumerable:!1,configurable:!0}),n.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},n}(_f));!function(t){function n(n){var i=t.call(this)||this;return i.tencBox=new Sf(n),i}vu(n,t),n.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},n.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(As);function Tf(t){return void 0!==t.iv}function Ef(t){return void 0!==t.subsamples}x(),gt();!function(t){function n(n){var i=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return i.samples=n,i}vu(n,t),p.defineProperty(n.prototype,"samples",{get:function(){return this.eS},set:function(t){var n;if(!Tu(t.length,32))throw new g("The number of samples provided does not fit in 32 bits.");for(var i=0,e=t;i<e.length;i++){var r=e[i];if(Tf(r)&&![8,16].includes(r.iv.length))throw new g("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===n&&(n=Ef(r)),!0===n&&!Ef(r)||!1===n&&Ef(r))throw new g("Mix of samples with and without subsamples detected.");if(Ef(r)){if(!Tu(r.subsamples.length,16))throw new g("Subsample length of one of the provided samples does not fit in 16 bits.");for(var o=0,u=r.subsamples;o<u.length;o++){var s=u[o];if(!Tu(s.clearData,16))throw new g("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!Tu(s.protectedData,23))throw new g("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=n&&n,this.eS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){for(var n=0,i=0,e=this.samples;i<e.length;i++){var r=e[i];Tf(r)&&(n+=r.iv.length),Ef(r)&&(n+=2+6*r.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+n},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeUInt(this.samples.length,32);for(var i=0,e=this.samples;i<e.length;i++){var r=e[i];if(Tf(r)&&Iu(n.writer,r.iv),Ef(r)){n.writer.writeUInt(r.subsamples.length,16);for(var o=0,u=r.subsamples;o<u.length;o++){var s=u[o];n.writer.writeUInt(s.clearData,16),n.writer.writeUInt(s.protectedData,32)}}}},n.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(Ru);x(),gt(),x(),gt();!function(t){function n(n,i,e,r,o){var u=t.call(this,"emsg",0,0)||this;return u.schemeIdUri=n,u.value=i,u.data=o,u.id=e,u.timescale=r.timescale,u.presentationTimeDelta=r.presentationTimeDelta,u.eventDuration=r.eventDuration,u}vu(n,t),p.defineProperty(n.prototype,"timescale",{get:function(){return this.PA},set:function(t){if(!Tu(t,32))throw new g("The provided timescale does not fit in 32 bits.");this.PA=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"presentationTimeDelta",{get:function(){return this.GS},set:function(t){if(!Tu(t,32))throw new g("The provided presentationTimeDelta does not fit in 32 bits.");this.GS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"eventDuration",{get:function(){return this.HS},set:function(t){if(!Tu(t,32))throw new g("The provided eventDuration does not fit in 32 bits.");this.HS=t},enumerable:!1,configurable:!0}),p.defineProperty(n.prototype,"id",{get:function(){return this.ZS},set:function(t){if(!Tu(t,32))throw new g("The provided id does not fit in 32 bits.");this.ZS=t},enumerable:!1,configurable:!0}),n.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},n.prototype.serializeBoxContent=function(n){t.prototype.serializeBoxContent.call(this,n),n.writer.writeString(this.schemeIdUri),n.writer.writeByte(0),n.writer.writeString(this.value),n.writer.writeByte(0),n.writer.writeUInt(this.timescale,32),n.writer.writeUInt(this.presentationTimeDelta,32),n.writer.writeUInt(this.eventDuration,32),n.writer.writeUInt(this.id,32),n.concat(pu.from(this.data))}}(Ru);x(),gt(),x(),gt(),x(),gt();!function(){function t(){this.boxes=[]}t.prototype.serialize=function(){for(var t=new _u,n=0,i=this.boxes;n<i.length;n++){var e=i[n];t.concat(e.serialize())}return t.toRangedBuffer()}}();function If(t,n){return function(i){var e=new Xu(function(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}(i),new qu),r=function(t,n){for(var i=t.data,e=t.cursor;e.offset<i.byteLength;){var r=Gu(i,e);if(!r.complete)return;if(ju(r.box,n))return r.box}}(e,t);if(!r)throw new g("".concat(t," box not found"));return n(r)}}If("moov",(function(t){for(var n=new tf,i=0,e=Ku(t.data);i<e.length;i++){var r=e[i];ju(r,"mvhd")?n.boxes.push(Ys(r)):ju(r,"trak")?n.boxes.push(Qs(r)):ju(r,"mvex")?n.boxes.push(Vs(r)):ju(r,"pssh")?n.boxes.push(Bs(r)):n.boxes.push(ts(r))}return n})),If("sidx",(function(t){var n,i,e=t.data,r=$u(e.nextUint32()),o=r.version,u=r.flags,s=e.nextUint32(),f=e.nextUint32();0===o?(n=e.nextUint32(),i=e.nextUint32()):(n=e.nextUint64(),i=e.nextUint64()),e.skip(2);for(var h=e.nextUint16(),c=[],a=0;a<h;a++){var v=new gu(pu.from(e.nextUint8Array(12))),d=v.readBit(),l=v.readUInt(31),w=v.readUInt(32),b=Boolean(v.readBit()),g=v.readUInt(3),m=v.readUInt(28);c.push({referenceType:d,referencedSize:l,subsegmentDuration:w,startsWithSap:b,sapType:g,sapDeltaTime:m})}return 0===o?new gf(s,f,n,i,c,u.raw):new mf(s,f,n,i,c,u.raw)})),If("moof",(function(t){for(var n=new vf,i=0,e=Ku(t.data);i<e.length;i++){var r=e[i];ju(r,"traf")?n.boxes.push(af(r)):ju(r,"pssh")?n.boxes.push(Bs(r)):n.boxes.push(ts(r))}return n}));var kf=If("pssh",Bs),Rf=function(t){function n(n,i){var e;(e=t.call(this)||this).qS=n,e.iT=i,e.jS=!1,e.sT=function(){e.tT()},e.nT=function(t){e.wo(new No(e,t.messageType,fu(e.iT,t.message)))},e.rT=function(){e.jS=!0,e.YS.Pb>0&&(e.YS.Bb(),e.wo(new Oo(e.YS))),e.qS.removeEventListener("keystatuseschange",e.sT),e.qS.removeEventListener("message",e.nT)},e.qS.addEventListener("keystatuseschange",e.sT),e.qS.addEventListener("message",e.nT),e.YS=new uu;var r=[];return e.qS.closed&&r.push(J.resolve(e.qS.closed)),e.QS=new su,r.push(e.QS.Vb),e.Fd=J.race(r).then(e.rT,e.rT),e.tT(),e}_t(n,t);var i=n.prototype;return i.Ws=function(){if(this.jS)return this.Fd;var t=[];return t.push(J.resolve(this.qS.close())),t.push(_o(1e3)),this.QS.Kw(J.race(t).catch(Of)),this.jS=!0,this.Fd},i.JS=function(t,n,i){if(Ut.hm){var e=kf(Zo(n));if(1===e.version)n=new Cs(e.systemId,e.data).serialize().join()}return J.resolve(this.qS.generateRequest(t,n)).catch(Of)},i.Dn=function(t){return J.resolve(this.qS.load(t)).catch(Of)},i.$S=function(){return J.resolve(this.qS.remove()).catch(Of)},i.tr=function(t){return J.resolve(this.qS.update(t)).catch(Of)},i.tT=function(){var t=this;this.YS.Bb(),this.qS.keyStatuses.forEach((function(n,i){t.eT(i,n)})),this.wo(new Oo(this.YS))},i.eT=function(t,n){if("string"==typeof t){var i=t;t=n,n=i}var e=Zo(t);if(this.iT===jr&&16===e.byteLength&&(Ut.Sm||Ut.wg)){var r=Go(e),o=r.getUint32(0,!0),u=r.getUint16(4,!0),s=r.getUint16(6,!0);r.setUint32(0,o,!1),r.setUint16(4,u,!1),r.setUint16(6,s,!1)}this.iT===jr&&"status-pending"===n&&(n="usable"),this.YS.Mb(e,n)},Tt(n,[{key:"XS",get:function(){return this.Fd}},{key:"zS",get:function(){return this.qS.expiration}},{key:"mb",get:function(){return this.YS}},{key:"KS",get:function(){return this.qS.sessionId}}]),n}(To);function Of(t){var n;if(t.message){var i=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);i&&(n=0|_(i[1],16))}throw new cu(t.message,void 0,n,t)}var Nf=function(){function t(t,n,i){this.hT=t,this.aT=n,this.bd=i}var n=t.prototype;return n.oT=function(t){var n=this;return gr((function(){return mr(this,(function(i){return[2,new Rf(n.hT.createSession(t),n.aT)]}))}))()},n.uT=function(t){return J.resolve(this.hT.setServerCertificate(t))},n.bn=function(t){return J.resolve(t.setMediaKeys(this.hT))},n.cT=function(t){return J.resolve(t.setMediaKeys(null))},n.er=function(){return J.resolve()},t}(),Pf=function(){function t(t,n,i){this.lT=t,this.iT=n,this.fT=i}var n=t.prototype;return n.dT=function(){var t=this;return gr((function(){var n;return mr(this,(function(i){switch(i.label){case 0:return[4,t.lT.createMediaKeys()];case 1:return n=i.sent(),[2,new Nf(n,t.iT,t.fT)]}}))}))()},n._T=function(){return this.fT},Tt(t,[{key:"aT",get:function(){return this.lT.keySystem}}]),t}();function Af(t){var n=t.trim(),i=n.indexOf(";");return i<0?n:n.substr(0,i).trim()}function Df(t,n,i,e){var r=!1;if(!(e.persistentState&&"optional"!==e.persistentState||e.distinctiveIdentifier&&"optional"!==e.distinctiveIdentifier)){var o={audioCapabilities:[],videoCapabilities:[],persistentState:e.persistentState||"optional",distinctiveIdentifier:e.distinctiveIdentifier||"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"],label:e.label,gT:e.gT},u=!1;if(e.audioCapabilities){var s=e.audioCapabilities.filter((function(t){return Boolean(t.contentType)}));s.length&&(o.audioCapabilities=s.filter((function(e){return Cf(t,n,i,e)})),u=!0,o.audioCapabilities.length&&(r=!0))}if(e.videoCapabilities){var f=e.videoCapabilities.filter((function(t){return Boolean(t.contentType)}));f.length&&(o.videoCapabilities=f.filter((function(e){return Cf(t,n,i,e)})),u=!0,o.videoCapabilities.length&&(r=!0))}return u||(r=t(i,"video/mp4")),r?o:void 0}}function Cf(t,n,i,e){return!!e.contentType&&(!(e.encryptionScheme&&!Er(n,e.encryptionScheme))&&(!e.robustness&&t(i,Af(e.contentType))))}function xf(t){if(t.videoCapabilities)for(var n=0,i=t.videoCapabilities;n<i.length;n++){var e=i[n];if(e.contentType)return e.contentType}if(t.audioCapabilities)for(var r=0,o=t.audioCapabilities;r<o.length;r++){var u=o[r];if(u.contentType)return u.contentType}}function Bf(t){for(var n=[],i=0;i<t.length;i++){var e=t[i];e.encryptionScheme&&n.push({contentType:e.contentType,robustness:e.robustness})}return t.concat(n)}function Mf(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(Lf))||!(!t.videoCapabilities||!t.videoCapabilities.some(Lf))}function Lf(t){return!t.robustness}function Uf(t,n){for(var i=[],e=0;e<t.length;e++){var r=t[e];r.robustness?i.push(r):i.push(Fr({},r,{robustness:n}))}return i}x(),gt(),x(),gt();var Ff=function(){function t(){}return t.prototype.Cw=function(t,n){return gr((function(){var i,e,r,o,u,s,f;return mr(this,(function(h){switch(h.label){case 0:for(n=n.filter((function(t){return!t.gT})),i=0;i<n.length;i++)(e=n[i]).audioCapabilities&&(e.audioCapabilities=Bf(e.audioCapabilities)),e.videoCapabilities&&(e.videoCapabilities=Bf(e.videoCapabilities));if(t!==Gr||!n.some(Mf))return[3,4];r=n.map((function(t){return function(t,n){return Fr({},t,{videoCapabilities:t.videoCapabilities?Uf(t.videoCapabilities,n):void 0,audioCapabilities:t.audioCapabilities?Uf(t.audioCapabilities,n):void 0})}(t,"SW_SECURE_CRYPTO")})),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,v.requestMediaKeySystemAccess(t,r)];case 2:return o=h.sent(),u=o.getConfiguration(),[2,new Pf(o,t,u)];case 3:return h.sent(),[3,4];case 4:return[4,v.requestMediaKeySystemAccess(t,n)];case 5:return s=h.sent(),f=s.getConfiguration(),[2,new Pf(s,t,f)]}}))}))()},t.pT=function(){return void 0!==v&&"function"==typeof v.requestMediaKeySystemAccess},t}();x(),gt(),x(),gt(),x(),gt(),x(),gt();var zf=function(t){function n(n,i){var e;return(e=t.call(this)||this).kT=n,e.ET=i,e.jS=!1,e.PT=void 0,e.ST=void 0,e.wT=void 0,e.rT=function(){e.jS=!0,e.yT.Ob(void 0),e.wT&&(e.wT.removeEventListener("mskeyclose",e.rT),e.wT.removeEventListener("mskeymessage",e.xT),e.wT.removeEventListener("mskeyerror",e.Ss),e.wT.removeEventListener("mskeyadded",e.IT))},e.xT=function(t){e.ST&&(e.ST.Ob(void 0),e.ST=void 0),e.wo(new No(e,"license-request",Jo(t.message).buffer,t.destinationURL||void 0))},e.Ss=function(){var t=e.wT&&e.wT.error;if(t){var n=new cu("Unknown CDM error",t.code,t.systemCode);if(e.ST)e.ST.Fb(n),e.ST=void 0;else if(e.PT)e.PT.Fb(n),e.PT=void 0;else switch(n.Wb){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:e.CT("output-not-allowed");break;default:e.CT("internal-error")}}},e.IT=function(){e.ST&&(e.CT("usable"),e.ST.Ob(void 0),e.ST=void 0),e.PT&&(e.CT("usable"),e.PT.Ob(void 0),e.PT=void 0)},e.yT=new su,e.bT=new uu,e}_t(n,t);var i=n.prototype;return i.JS=function(t,n,i){var e=this;return gr((function(){return mr(this,(function(t){switch(t.label){case 0:return e.AT(),e.ST=new su,e.oT(Zo(n),i),[4,e.ST.Vb];case 1:return t.sent(),[2]}}))}))()},i.oT=function(t,n){if(!t)throw new m("Expected initData to be defined but was "+t+".");var i,e=n&&n.playready&&n.playready.TT;return(i=n?this.kT.createSession(this.ET,t,e):this.kT.createSession(this.ET,t)).addEventListener("mskeyclose",this.rT),i.addEventListener("mskeymessage",this.xT),i.addEventListener("mskeyerror",this.Ss),i.addEventListener("mskeyadded",this.IT),this.wT=i,this.CT("status-pending"),i},i.Dn=function(t){var n=this;return gr((function(){return mr(this,(function(t){return n.AT(),[2,!0]}))}))()},i.tr=function(t){var n=this;return gr((function(){var i;return mr(this,(function(e){switch(e.label){case 0:if(n.PT=new su,n.AT(),!n.wT)return[2,J.resolve()];if(0===(i=Zo(t)).byteLength)throw new m("Cannot call update with an empty response.");return n.wT.update(i),[4,n.PT.Vb];case 1:return e.sent(),[2]}}))}))()},i.Ws=function(){return!this.jS&&this.wT&&(this.jS=!0,this.wT.close()),this.yT.Vb},i.$S=function(){var t=this;return gr((function(){return mr(this,(function(n){return t.AT(),[2]}))}))()},i.AT=function(){if(this.jS)throw new m("Already closing or closed.")},i.CT=function(t){this.bT.Bb(),this.bT.Mb(ou,t),this.wo(new Oo(this.bT))},Tt(n,[{key:"KS",get:function(){return this.wT&&this.wT.sessionId||""}},{key:"zS",get:function(){return NaN}},{key:"XS",get:function(){return this.yT.Vb}},{key:"mb",get:function(){return this.bT}}]),n}(To),Wf=function(){function t(t,n,i){this.kT=t,this.aT=n,this.bd=i;var e=xf(i)||"video/mp4";this.ET=Af(e)}var n=t.prototype;return n.oT=function(t){var n=this;return gr((function(){return mr(this,(function(t){return[2,new zf(n.kT,n.ET)]}))}))()},n.uT=function(t){return J.resolve(!1)},n.bn=function(t){var n=this,i=function(){t.msSetMediaKeys(n.kT),t.removeEventListener("loadedmetadata",i)};return t.readyState>=1?t.msSetMediaKeys(this.kT):t.addEventListener("loadedmetadata",i),J.resolve()},n.cT=function(t){return J.resolve()},n.er=function(){return J.resolve()},t}(),Hf=function(){function t(t,n){this.iT=t,this.DT=n}var n=t.prototype;return n._T=function(){return this.DT},n.dT=function(){var t=new c.MSMediaKeys(this.iT);return J.resolve(new Wf(t,this.iT,this.DT))},Tt(t,[{key:"aT",get:function(){return this.iT}}]),t}(),Vf=function(){function t(){}return t.prototype.Cw=function(t,n){try{return J.resolve(function(t,n){if(!qf())throw new m("Unsupported key system "+t);for(var i=0;i<n.length;i++){var e=n[i],r=Df(Xf,ko,t,e);if(r)return new Hf(t,r)}throw new m("Unsupported key system configuration for "+t)}(t,n))}catch(t){return J.reject(t)}},t.pT=function(){return qf()},t}();function qf(){return void 0!==c.MSMediaKeys&&"function"==typeof c.MSMediaKeys.isTypeSupported}function Xf(t,n){return c.MSMediaKeys.isTypeSupported(t,n)}x(),gt(),x(),gt(),x(),gt(),x(),gt();var jf=function(t){function n(n,i,e){var r;return(r=t.call(this)||this).BT=n,r.ET=i,r.LT=e,r.yT=new su,r.FT=void 0,r.bT=new uu,r.NT=void 0,r.OT=new su,r.Ss=function(){var t=r.NT&&r.NT.error;if(t){var n=new cu("Unknown CDM error",t.code,t.systemCode);r.FT?(r.FT.Fb(n),r.FT=void 0):n.Wb===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?r.CT("output-not-allowed"):r.CT("internal-error"),r.wo(new Po)}},r.xT=function(t){r.wo(new No(r,"license-request",Jo(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},r.IT=function(){r.FT&&(r.FT.Ob(void 0),r.FT=void 0),r.CT("usable")},r}_t(n,t);var i=n.prototype;return i.JS=function(t,n,i){var e=i&&i.fairplay&&i.fairplay.MT;if(!e)throw new m("Expected FairPlay contentId to be defined but was "+e+".");var r=function(t,n,i){var e=Yo(t),r=2*e.length,o=2*n.length,u=new ArrayBuffer(4+r+4+o+4+i.byteLength),s=new DataView(u),f=new Qo;return qo(s,f,r,!0),Xo(s,f,e,!0),qo(s,f,o,!0),Xo(s,f,n,!0),qo(s,f,i.byteLength,!0),function(t,n,i){$o(t).set($o(i),n.ec),n.kb(i.byteLength)}(s,f,i),new E(u)}(Zo(n),e,this.LT);return this.NT=this.BT.createSession(this.ET,r),this.NT.addEventListener("webkitkeymessage",this.xT,!1),this.NT.addEventListener("webkitkeyadded",this.IT,!1),this.NT.addEventListener("webkitkeyerror",this.Ss,!1),this.CT("status-pending"),this.OT.Ob(this.NT),this.OT=new su,J.resolve()},i.Dn=function(t){return J.resolve(!0)},i.tr=function(t){var n=this;return gr((function(){var i,e;return mr(this,(function(r){switch(r.label){case 0:if(0===(i=Zo(t)).byteLength)throw new m("Cannot call update with an empty response.");return n.FT=new su,(e=n.NT)?[3,2]:[4,n.OT.Vb];case 1:e=r.sent(),r.label=2;case 2:return e.update(i),[4,n.FT.Vb];case 3:return r.sent(),[2]}}))}))()},i.Ws=function(){var t,n=this.NT;return n&&(n.removeEventListener("webkitkeymessage",this.xT,!1),n.removeEventListener("webkitkeyadded",this.IT,!1),n.removeEventListener("webkitkeyerror",this.Ss,!1),n.close()),this.OT.Yw(),null==(t=this.FT)||t.Yw(),this.yT.Ob(void 0),this.yT.Vb},i.$S=function(){return J.resolve(void 0)},i.CT=function(t){this.bT.Bb(),this.bT.Mb(ou,t),this.wo(new Oo(this.bT))},Tt(n,[{key:"KS",get:function(){return this.NT?this.NT.sessionId:""}},{key:"zS",get:function(){return NaN}},{key:"XS",get:function(){return this.yT.Vb}},{key:"mb",get:function(){return this.bT}}]),n}(To);x(),gt(),x(),gt();var Yf=function(t){return t[t.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",t[t.LICENSE_ERROR=2e3]="LICENSE_ERROR",t[t.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",t[t.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",t[t.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",t[t.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",t[t.SOURCE_INVALID=3e3]="SOURCE_INVALID",t[t.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",t[t.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",t[t.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",t[t.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",t[t.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",t[t.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",t[t.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",t[t.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",t[t.MEDIA_ABORTED=5004]="MEDIA_ABORTED",t[t.NETWORK_ERROR=6e3]="NETWORK_ERROR",t[t.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",t[t.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",t[t.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",t[t.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",t[t.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",t[t.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",t[t.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",t[t.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",t[t.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",t[t.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",t[t.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",t[t.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",t[t.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",t[t.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",t[t.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",t[t.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",t[t.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",t[t.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",t[t.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",t[t.AD_ERROR=1e4]="AD_ERROR",t[t.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",t[t.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",t[t.PICTURE_IN_PICTURE_ERROR=11001]="PICTURE_IN_PICTURE_ERROR",t[t.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",t[t.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",t[t.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",t[t.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",t[t.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",t[t.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",t}({}),Kf=function(t){return t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE",t}({});!function(t){t.fromCode=function(n){var i=y.floor(n/1e3);if(i in t)return i;throw new m("Invalid error code: "+n)}}(Kf||(Kf={}));var Gf=function(t){function n(n,i,e){var r;return(r=t.call(this,i,e)||this).code=n,r}return _t(n,t),Tt(n,[{key:"name",get:function(){return"THEOplayerError"}},{key:"category",get:function(){return Kf.fromCode(this.code)}}]),n}(Dr),$f=function(){function t(t,n,i){this.BT=t,this.aT=n,this.bd=i,this.LT=void 0;var e=xf(i)||"video/mp4";this.ET=Af(e)}var n=t.prototype;return n.getInternalMediaKeys=function(){return this.BT},n.oT=function(t){var n=this;return gr((function(){return mr(this,(function(t){if(!n.LT)throw new Gf(Yf.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return[2,new jf(n.BT,n.ET,n.LT)]}))}))()},n.uT=function(t){return this.LT=Zo(t),J.resolve(!0)},n.bn=function(t){return t.webkitSetMediaKeys(this.BT),J.resolve()},n.cT=function(t){return t.webkitSetMediaKeys(null),J.resolve()},n.er=function(){return J.resolve()},t}(),Zf=function(){function t(t,n){this.iT=t,this.DT=n}var n=t.prototype;return n._T=function(){return this.DT},n.dT=function(){var t=new c.WebKitMediaKeys(this.iT);return J.resolve(new $f(t,this.iT,this.DT))},Tt(t,[{key:"aT",get:function(){return this.iT}}]),t}(),Jf=function(){function t(){}return t.prototype.Cw=function(t,n){try{return J.resolve(function(t,n){if(t!==to)throw new m(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!Qf())throw new m("Unsupported key system "+t);for(var i=0;i<n.length;i++){var e=n[i],r=Df(th,Ro,t,e);if(r)return new Zf(t,r)}throw new m("Unsupported key system configuration for "+t)}(t,n))}catch(t){return J.reject(t)}},t.pT=function(){return Qf()},t}();function Qf(){return void 0!==c.WebKitMediaKeys&&"function"==typeof c.WebKitMediaKeys.isTypeSupported}function th(t,n){return c.WebKitMediaKeys.isTypeSupported(t,n)}x(),gt();var nh=function(){function t(t){this.VT=t}return t.prototype.Cw=function(t,n){var i=this;return gr((function(){var e,r,o;return mr(this,(function(u){switch(u.label){case 0:e=0,r=i.VT,u.label=1;case 1:if(!(e<r.length))return[3,6];o=r[e],u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.Cw(t,n)];case 3:return[2,u.sent()];case 4:return u.sent(),[3,5];case 5:return e++,[3,1];case 6:throw new m("Unsupported key system configuration for "+t)}}))}))()},t}();x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt();var ih=function(){function t(t){var n=this;this.UT=[],this.GT=void 0,this.WT=new Rr,this.HT=function(){return 0===n.UT.length?n.XT?eh(n.XT,n.WT.Vw).then(n.zT,n.zT):n.zT():n.UT.shift()().then(n.HT)},this.zT=function(){if(0!==n.UT.length)return n.HT();n.GT=void 0},this.XT=t}var n=t.prototype;return n.Jo=function(t,n){var i=this;return new J((function(e){var r=Rr.Qw([i.WT.Vw,n]),o=function(){r.Hw()};i.UT.push((function(){var n=eh(t,r.Vw);return e(n),n.then(o,o)})),i.GT||(i.GT=i.HT())}))},n.Yw=function(){return this.ZT(!0)},n.gn=function(){return this.XT=void 0,this.ZT(!1)},n.ZT=function(t){var n=this.GT;return this.WT.Yw(),t&&(this.WT=new Rr),J.resolve(n)},t}();function eh(t,n){return new J((function(i){return i(t(n))}))}var rh=new ih,oh=function(t){function n(n){var i;return(i=t.call(this)||this).iT=n,i.ST=void 0,i.FT=void 0,i.Qb=!1,i.nk=void 0,i.QT=void 0,i.yT=new su,i.ek="",i.JT=new su,i.$T=new uu,i}_t(n,t);var i=n.prototype;return i.qT=function(){this.FT&&(this.CT("usable"),this.FT.Ob(void 0),this.FT=void 0)},i.YT=function(t){var n=new cu("Unknown CDM error",t.errorCode,t.systemCode);this.FT?(this.FT.Fb(n),this.FT=void 0):this.ST?(this.ST.Fb(n),this.ST=void 0):n.Wb===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.CT("output-restricted"):1===n.Ub?this.CT("expired"):this.CT("internal-error")},i.KT=function(t){0!==t.message.byteLength?(this.ST&&(this.ST.Ob(void 0),this.ST=void 0),this.wo(new No(this,"license-request",fu(this.iT,Jo(t.message).buffer),t.defaultURL||void 0))):this.ST&&(this.ST.Fb("Empty key message"),this.ST=void 0)},i.jT=function(t){this.QT||(this.QT=t,this.JT.Ob(t))},i.Ws=function(){var t=this;return gr((function(){return mr(this,(function(n){return t.throwIfClosed(),t.FT&&(t.FT.Fb(void 0),t.FT=void 0),t.Qb=!0,t.yT.Ob(void 0),[2]}))}))()},i.JS=function(t,n){var i=this;return gr((function(){var t;return mr(this,(function(e){switch(e.label){case 0:return i.throwIfClosed(),i.ST=new su,i.nk=Zo(n),(t=i.QT)?[3,2]:[4,i.JT.Vb];case 1:t=e.sent(),e.label=2;case 2:return t.webkitGenerateKeyRequest(i.iT,i.nk),[4,i.ST.Vb];case 3:return e.sent(),[2]}}))}))()},i.Dn=function(t){var n=this;return gr((function(){return mr(this,(function(t){return n.throwIfClosed(),[2,!1]}))}))()},i.$S=function(){var t=this;return gr((function(){return mr(this,(function(n){return t.throwIfClosed(),[2]}))}))()},i.tr=function(t){var n=this;return gr((function(){return mr(this,(function(i){switch(i.label){case 0:return n.throwIfClosed(),n.FT=new su,Ut.Nm||Ut.Im?[2,rh.Jo(gr((function(){return mr(this,(function(i){switch(i.label){case 0:return[4,n.doUpdate(t)];case 1:return i.sent(),[2]}}))})))]:[4,n.doUpdate(t)];case 1:return i.sent(),[2]}}))}))()},i.doUpdate=function(t){var n=this;return gr((function(){var i;return mr(this,(function(e){switch(e.label){case 0:return void 0===n.FT?[2]:(i=n.QT)?[3,2]:[4,n.JT.Vb];case 1:i=e.sent(),e.label=2;case 2:return i.webkitAddKey(n.iT,Zo(t),n.nk,n.KS),[4,n.FT.Vb];case 3:return e.sent(),Ut.Im?[4,_o(500)]:[3,5];case 4:e.sent(),e.label=5;case 5:return[2]}}))}))()},i.throwIfClosed=function(){if(this.Qb)throw new m("Already closing or closed.")},i.CT=function(t){this.$T.Bb(),this.$T.Mb(ou,t),this.wo(new Oo(this.$T))},i.rk=function(){var t=this;return gr((function(){var n,i;return mr(this,(function(e){switch(e.label){case 0:return(i=t.QT)?[3,2]:[4,t.JT.Vb];case 1:i=e.sent(),e.label=2;case 2:if(!(n=i).webkitCancelKeyRequest)return[3,7];e.label=3;case 3:return e.trys.push([3,4,5,7]),n.webkitCancelKeyRequest(t.iT,t.ek),[3,7];case 4:return e.sent(),[3,7];case 5:return[4,_o(500)];case 6:return e.sent(),[7];case 7:return[2]}}))}))()},Tt(n,[{key:"mb",get:function(){return this.$T}},{key:"KS",get:function(){return this.ek},set:function(t){this.ek=t}},{key:"XS",get:function(){return this.yT.Vb}},{key:"zS",get:function(){return NaN}}]),n}(To),uh=function(){function t(t,n){var i=this;this.aT=t,this.bd=n,this.QT=void 0,this.lk=Wr(),this.dk=[],this.IT=function(t){var n=i.fk(t.sessionId);n&&n.qT()},this.hk=function(t){var n=i.fk(t.sessionId);n&&n.YT(t)},this.ck=function(t){var n=i.fk(t.sessionId);n&&n.KT(t)}}var n=t.prototype;return n.bn=function(t){return this.QT=t,this.QT.addEventListener("webkitkeyadded",this.IT),this.QT.addEventListener("webkitkeyerror",this.hk),this.QT.addEventListener("webkitkeymessage",this.ck),this.lk.forEach((function(n,i){return n.jT(t)})),this.dk.forEach((function(n){return n.jT(t)})),J.resolve()},n.cT=function(t){return t.removeEventListener("webkitkeyadded",this.IT),t.removeEventListener("webkitkeyerror",this.hk),t.removeEventListener("webkitkeymessage",this.ck),this.QT=void 0,J.resolve()},n.er=function(){var t=this;return gr((function(){var n,i;return mr(this,(function(e){switch(e.label){case 0:n=t.lk.entries(),i=n.next(),e.label=1;case 1:return i.done?[3,3]:[4,i.value[1].rk()];case 2:return e.sent(),i=n.next(),[3,1];case 3:return t.lk.clear(),[2]}}))}))()},n.oT=function(t,n,i){var e=this;return gr((function(){var t;return mr(this,(function(n){return t=new oh(e.aT),e.QT&&t.jT(e.QT),e.dk.push(t),[2,t]}))}))()},n.uT=function(t){return J.resolve(!1)},n.fk=function(t){if(t){var n=this.lk.get(t);return n||((n=this.dk.shift())?(n.KS=t,this.lk.set(t,n),n):void 0)}},t}(),sh=function(){function t(t,n){this.aT=t,this._k=n}var n=t.prototype;return n.dT=function(){return J.resolve(new uh(this.aT,this._k))},n._T=function(){return this._k},t}(),fh=function(){function t(){}return t.prototype.Cw=function(t,n){try{return J.resolve(function(t,n){if(!fh.pT())throw new m("Unsupported key system "+t);for(var i=0;i<n.length;i++){var e=n[i],r=Df(hh,ko,t,e);if(r)return new sh(t,r)}throw new m("Unsupported key system configuration for "+t)}(t,n))}catch(t){return J.reject(t)}},t.pT=function(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest},t}();function hh(t,n){var i=$t();return!(!i||!i.canPlayType||""===i.canPlayType(n,t))}x(),gt();var ch,ah=function(){function t(){}return t.prototype.Cw=function(t,n){return t===Gr||t===jr?J.resolve(void 0):J.reject(new g("DRM configuration not supported"))},t}();function vh(){return ch||(ch=function(){var t=[];Jf.pT()&&t.push(new Jf);Ff.pT()&&t.push(new Ff);Vf.pT()&&t.push(new Vf);fh.pT()&&t.push(new fh);Ut.Lm&&t.push(new ah);return new nh(t)}()),ch}x(),gt(),x(),gt();var dh=function(){function t(){this.vk=Wr()}var n=t.prototype;return n.Bb=function(t){this.vk.delete(t)},n.gk=function(){this.vk.clear()},n.Nb=function(t){return this.vk.get(t)},n.Mb=function(t,n){this.vk.set(t,n)},t}(),lh=function(){function t(){}return t.pk=function(){return t.Fg||(t.Fg=wh.pT()?new wh:new dh),t.Fg},t.Bb=function(n){t.pk().Bb(n)},t.gk=function(){t.pk().gk()},t.Nb=function(n){return t.pk().Nb(n)},t.Mb=function(n,i){t.pk().Mb(n,i)},t}();lh.Fg=void 0;var wh=function(t){function n(){return t.apply(this,arguments)||this}_t(n,t);var i=n.prototype;return i.Bb=function(t){self.sessionStorage.removeItem(t)},i.gk=function(){self.sessionStorage.clear()},i.Nb=function(t){var n;return null!=(n=self.sessionStorage.getItem(t))?n:void 0},i.Mb=function(t,n){self.sessionStorage.setItem(t,n)},n.pT=function(){var t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}},n}(lh);x(),gt(),x(),gt();var bh=function(){var t=self.Blob;if(t)try{new t;return function(t){return function(n,i){return new t(n,i)}}(t)}catch(t){}var n=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(n)return function(t){return function(n,i){var e=new t;if(n)for(var r=0;r<n.length;r++){var o=n[r];e.append(o)}return e.getBlob(i&&i.type||"")}}(n)}();function gh(t,n,i){var e=bh([n],{type:"application/octet-stream"}),r=URL.createObjectURL(e),o=function(t,n){var i=t,e=i.indexOf("?");if(e>=0&&(i=i.substr(0,e)),i=i.substr(i.lastIndexOf("/")+1),n){var r=i.indexOf(".");r<0&&(r=i.length),i=i.substr(0,r)+n+i.substr(r)}return i}(t,i),u=a.createElement("a");u.href=r,u.download=o,a.body.appendChild(u),u.click(),a.body.removeChild(u),URL.revokeObjectURL(r)}x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt(),x(),gt();var mh=function(t,n,i){return i=null!=t?k(P(t)):{},function(t,n,i,e){if(n&&"object"==typeof n||"function"==typeof n)for(var r,o=N(n),u=0,s=o.length;u<s;u++)r=o[u],A.call(t,r)||r===i||R(t,r,{get:function(t){return n[t]}.bind(null,r),enumerable:!(e=O(n,r))||e.enumerable});return t}(!n&&t&&t.__esModule?i:R(i,"default",{value:t,enumerable:!0}),t)}(pt());x(),gt();var ph=t,yh=Xt(ph.ReadableStream)&&Xt(ph.WritableStream)&&Xt(ph.TransformStream)&&qt(ph.ReadableStream.prototype.pipeThrough)&&!Bn.cp,_h=yh?ph.ReadableStream:mh.ReadableStream,Sh=(yh?ph.WritableStream:mh.WritableStream,yh?ph.TransformStream:mh.TransformStream);yh&&ph.ByteLengthQueuingStrategy?ph.ByteLengthQueuingStrategy:mh.ByteLengthQueuingStrategy,yh&&ph.CountQueuingStrategy?ph.CountQueuingStrategy:mh.CountQueuingStrategy;function Th(t){return function(t){return new _h({start:function(n){for(var i=0;i<t.length;i++){var e=t[i];n.enqueue(e)}n.close()}})}([t])}function Eh(t){return Th(function(t){return new E(t)}(t))}function Ih(t,n){return function(t,n){var i=n,e=t.getReader(),r=new su,o=function(){u();var t=new bo;e.cancel(t).catch(Yt),r.Fb(t)},u=function(){i&&(i.Ow(o),i=void 0)};i&&(i.Bw?o():i.Fw(o));var s=[],f=function(t){return t.done?(u(),J.resolve(s)):(s.push(t.value),J.resolve(e.read()).then(f))};return J.resolve(e.read()).then(f).then((function(t){u(),r.Ob(t)}),(function(t){u(),r.Fb(t)})),r.Vb}(t,n).then((function(t){return eu(t).buffer}))}function kh(t,n){var i=n,e=new Sh,r=e.readable,o=e.writable,u=o.getWriter(),s=function(){i&&i.Yw()};return u.closed.then(s,s),t.then((function(t){return i=void 0,u.releaseLock(),t.pipeTo(o).catch(Yt)}),(function(t){return i=void 0,u.releaseLock(),o.abort(t).catch(Yt)})),r}function Rh(t){return Yo(new E(t))}function Oh(t){return Ko(t).buffer}x(),gt();var Nh="content-type",Ph="text/plain;charset=UTF-8",Ah=function(){function t(){}var n=t.prototype;return n.xk=function(t){return this.Rk(t).then(JSON.parse)},n.Ik=function(t,n){switch(t){case ar.wk:return this.Ck(n);case ar.yk:return this.xk(n);case ar.bk:return this.Pk();case ar.Ak:return this.Rk(n);default:throw new m}},t}();function Dh(t,n,i){if(t instanceof Ah)return t;if(t instanceof _h)return function(t,n){return new xh({Aw:0,Pk:t,Dk:Ch(n)})}(t,i);var e=Ch(i),r=J.resolve(t).then((function(t){return function(t,n){if(t){if("string"==typeof t)return{Aw:ar.Ak,Nk:t,Dk:n||Ph};if(t instanceof ArrayBuffer||nu(t))return{Aw:ar.wk,Nk:Wh(t),Dk:n};if(function(t){return Vt(t)&&t.constructor&&t.constructor===p}(t)||Ht(t))return{Aw:ar.yk,Nk:t,Dk:n};throw new m("Unsupported BodyInit type")}return{Aw:ar.Ak,Nk:null,Dk:n}}(t,e)}));return new xh({Aw:1,Vb:r,Mk:n})}function Ch(t){return(t.get(Nh)||"").toLowerCase()}var xh=function(t){function n(n){var i;return(i=t.call(this)||this).Bk=!1,i.Wk=new su,i.Wk.Vb.catch(Yt),i.Hk(n),i}_t(n,t);var i=n.prototype;return i.Vk=function(){return this.Wk.Vb},i.Rk=function(t){return this.Uk(Bh,t)},i.xk=function(t){return this.Uk(Lh,t)},i.Ck=function(t){return this.Uk(Fh,t)},i.Pk=function(){return this.Gk(function(t){return 0===t.Aw?t.Pk:kh(t.Vb.then(zh).then(Eh),t.Mk)}(this.Fk))},i.Uk=function(t,n){if(this.Bk)return J.reject(new m("Already used"));this.Bk=!0;var i=t(this.Fk,n);return this.Wk.Kw(i.then(Yt)),i},i.Gk=function(t){if(this.Bk)throw new m("Already used");if(t.locked)throw new m("Body stream is locked");this.Bk=!0;var n=new Sh,i=J.resolve(t.pipeTo(n.writable));return this.Wk.Kw(i),n.readable},i.Hk=function(t){this.Fk=t,1===t.Aw&&t.Vb.catch(Yt)},i.Zk=function(){if(this.Bk)throw new m("Already used");var t=function(t){if(0===t.Aw){var n=vr(t.Pk.tee(),2),i=n[0],e=n[1];return[{Aw:t.Aw,Pk:i,Dk:t.Dk},{Aw:t.Aw,Pk:e,Dk:t.Dk}]}var r=vr(t.Mk.jw(),2),o=r[0],u=r[1];return[{Aw:t.Aw,Vb:t.Vb,Mk:o},{Aw:t.Aw,Vb:t.Vb,Mk:u}]}(this.Fk),i=t[0],e=t[1];return this.Hk(i),new n(e)},Tt(n,[{key:"Lk",get:function(){return this.Bk}},{key:"Ok",get:function(){return 0===this.Fk.Aw}}]),n}(Ah);function Bh(t,n){return 0===t.Aw?Ih(t.Pk,n).then(Rh):(n&&t.Mk.Kw(n),po(t.Vb.then(Mh),t.Mk))}function Mh(t){switch(t.Aw){case ar.Ak:return J.resolve(t.Nk||"");case ar.wk:return J.resolve(t.Nk).then(Rh);case ar.yk:return J.resolve(t.Nk).then(JSON.stringify)}}function Lh(t,n){return 0===t.Aw?Bh(t,n).then(JSON.parse):(n&&t.Mk.Kw(n),po(t.Vb.then(Uh),t.Mk))}function Uh(t){return t.Aw===ar.yk?J.resolve(t.Nk):Mh(t).then(JSON.parse)}function Fh(t,n){return 0===t.Aw?Ih(t.Pk,n):(n&&t.Mk.Kw(n),po(t.Vb.then(zh),t.Mk))}function zh(t){switch(t.Aw){case ar.wk:return J.resolve(t.Nk);case ar.Ak:case ar.yk:return Mh(t).then(Oh)}}function Wh(t){return t instanceof ArrayBuffer?t:Jo($o(t)).buffer}var Hh=function(t){function n(n){var i;return(i=t.call(this)||this).Xk=n,i}_t(n,t);var i=n.prototype;return i.Vk=function(){return this.Xk.Vk()},i.Rk=function(t){return this.Xk.Rk(t)},i.xk=function(t){return this.Xk.xk(t)},i.Ck=function(t){return this.Xk.Ck(t)},i.Pk=function(t){return this.Xk.Pk(t)},i.Zk=function(){return this.Xk.Zk()},Tt(n,[{key:"Lk",get:function(){return this.Xk.Lk}},{key:"Ok",get:function(){return this.Xk.Ok}}]),n}(Ah);var Vh=function(t){function n(n,i){var e,r,o,u,s,f;i?(r=i.jk,o=i.Yk,u=i.zk,s=i.Qk,f=i.Jk):(r=[],o=ar.Ak,u=200,s="OK",f=!1);var h=n.Kk,c=new dr(n.jk||r),a=n.Yk||o,v=n.$k||(i&&i.Kk===h?i.$k:h.Gu),d=i?i.Xk:null,l=Dh(void 0!==n.qk?n.qk:d,n.Mk||new Rr,c);return(e=t.call(this,l)||this).jk=c,e.Kk=h,e.$k=v,e.Yk=a,e.zk=void 0!==n.zk?n.zk:u,e.Qk=void 0!==n.Qk?String(n.Qk):s,e.Jk=n.Jk||f,e}_t(n,t);var i=n.prototype;return i.qk=function(t){return this.Ik(this.Yk,t)},i.xb=function(){return new n({qk:this.Zk(),Kk:this.Kk},this)},n}(Hh),qh=function(){function t(){}var n=t.prototype;return n.Kk=function(t){var n=function(t){return new Vh({qk:null,jk:{},Kk:t,$k:t.Gu,Yk:t.Yk,zk:0,Qk:Io.Gy})}(new Pr(t));return J.resolve(n)},n.PE=function(t){},n.gn=function(){},t}();var Xh=function(){function t(t,n){void 0===n&&(n=!0),this.BE=t,this.FE=n}var n=t.prototype;return n.Kk=function(t){var n=this.LE(t);return this.BE.Kk(n)},n.PE=function(t){return this.BE.PE(this.OE(t))},n.LE=function(n){var i=new Pr(n);if(!this.FE){var e=t.VE(i.Gu);i=new Pr({Gu:e},i)}return i},n.OE=function(n){var i=n.Gu;return this.FE||(i=t.VE(i)),{Gu:i,Nk:n.Nk}},n.gn=function(){this.BE.gn()},t.VE=function(t){return Wt.hw&&uo(t,"http://")?t.replace(":","s:"):t},Tt(t,null,[{key:"DE",get:function(){return t.NE||(t.NE=new t(new qh)),t.NE}}]),t}();Xh.NE=void 0,x(),gt(),x(),gt(),x(),gt(),x(),gt();var jh=function(t){function n(n,i,e){var r;return(r=t.call(this,n.Kk,null!=e?e:function(t){return"Error while loading "+t.Kk.Gu+", status code "+t.zk}(n),i)||this).XE=n,r}return _t(n,t),Tt(n,[{key:"name",get:function(){return Cr.UE}},{key:"ZE",get:function(){return this.XE}}]),n}(xr);x(),gt();var Yh=function(t){function n(n,i){return t.call(this,n,function(t){return"Request for "+t.Gu+" timed out after "+t.bE+" seconds."}(n),i)||this}return _t(n,t),Tt(n,[{key:"name",get:function(){return Cr.GE}}]),n}(xr);x(),gt();var Kh=self.fetch,Gh=self.Request,$h=self.Response,Zh=self.Headers,Jh=self.ReadableStream,Qh=self.AbortSignal,tc=self.AbortController,nc=Kt((function(){try{return qt(Kh)&&Xt(Gh)&&Xt($h)&&Xt(Zh)&&"forEach"in Zh.prototype&&ur()}catch(t){return!1}})),ic=["http:","https:"];var ec=Kt((function(){try{return nc()&&Xt(Qh)&&Xt(tc)&&"signal"in Gh.prototype}catch(t){return!1}})),rc=Kt((function(){try{return nc()&&Xt(Jh)&&"body"in $h.prototype&&!Ut.hm}catch(t){return!1}}));function oc(t,n){var i,e=t.jk.has("content-length")?Number(t.jk.get("content-length")):void 0;return i=t.Ok?function(t,n,i){return t.pipeThrough(new Sh(new uc(n,i)))}(t.Pk(),n,e):function(t,n,i){return sc.apply(this,arguments)}(t.Ck(),n,e),new Vh({qk:i,Kk:t.Kk},t)}x(),gt(),x(),gt();var uc=function(){function t(t,n){this.qE=t,this.YE=n,this.zE=0}var n=t.prototype;return n.transform=function(t,n){this.zE+=t.byteLength,this.qE(this.zE,this.YE),n.enqueue(t)},n.flush=function(t){var n;this.qE(this.zE,null!=(n=this.YE)?n:this.zE)},t}();function sc(){return sc=gr((function(t,n,i){var e,r;return mr(this,(function(o){switch(o.label){case 0:return[4,J.resolve()];case 1:return o.sent(),n(0,i),[4,t];case 2:return e=o.sent(),r=e.byteLength,n(r,null!=i?i:r),[2,e]}}))})),sc.apply(this,arguments)}var fc=function(){function t(t){this.WT=new Rr,this.XE=void 0,this.jE=0,this.QE=!1,this.HE=t,this.WT.Kw(t.Vw),this.ZE=this.KE()}var n=t.prototype;return n.KE=function(){var t=this;return gr((function(){var n,i,e,r,o,u,s,f,h;return mr(this,(function(c){switch(c.label){case 0:(n=t.HE).bE&&(t.jE=d((function(){t.QE=!0,t.WT.Yw()}),n.bE),t.WT.Vw.Xw((function(){l(t.jE)})));try{i=Kh(n.Gu,{method:n.yE,headers:n.jk.Sk(),body:n.Nk,credentials:n.kE?"include":"same-origin",signal:ac(t.WT.Vw),mode:n.xE,keepalive:n.CE})}catch(t){throw new Br(n,t)}c.label=1;case 1:return c.trys.push([1,3,,4]),[4,i];case 2:return e=c.sent(),[3,4];case 3:throw r=c.sent(),go(o=t.JE(r))&&t.WT.Yw(),o;case 4:if(u=e.url||n.Gu,s=0===e.status&&"file:"===function(t){return Wt.Nh(t).protocol}(u)?200:e.status,f=new hc(t,e,t.WT),!function(t){return t.zk>=200&&t.zk<=299||304===t.zk}(h=new Vh({qk:f,Kk:n,Yk:n.Yk,jk:vc(e.headers),zk:s,Qk:e.statusText,$k:u})))throw new jh(h);return n.EE&&(h=oc(h,n.EE)),[2,h]}}))}))()},n.JE=function(t){return function(t){return t instanceof xr}(t)?t:go(t)?this.QE?new Yh(this.HE):new bo(t.message,t):this.XE?new jh(this.XE,t):new Br(this.HE,t)},t}(),hc=function(t){function n(n,i,e){var r;return(r=t.call(this)||this).Wk=new su,r.tx=n,r.$E=i,r.WT=e,r.Wk.Vb.catch(Yt),r}_t(n,t);var i=n.prototype;return i.Vk=function(){return this.Wk.Vb},i.Rk=function(t){return this.Uk(this.$E.text(),t)},i.Ck=function(t){return this.Uk(this.$E.arrayBuffer(),t)},i.Pk=function(){var t=this.$E.body;return t?this.Gk(t):kh(this.Ck().then(Eh),this.WT)},i.Zk=function(){var t=this.$E.clone(),i=vr(this.WT.jw(),2),e=i[0],r=i[1];return this.WT=e,new n(this.tx,t,r)},i.Uk=function(t,n){var i=this;n&&this.WT.Kw(n);var e=mo(J.resolve(t),this.WT.Vw).catch((function(t){throw i.tx.JE(t)}));return e=po(e,this.WT),this.Wk.Kw(e.then(Yt)),e},i.Gk=function(t){var n=this;return new _h(new dc(t,(function(t){return n.tx.JE(t)}),this.WT,this.Wk),{highWaterMark:0})},Tt(n,[{key:"Lk",get:function(){return this.$E.bodyUsed}},{key:"Ok",get:function(){return zt(this.$E.body)}}]),n}(Ah),cc="abort";function ac(t){if(ec()){var n=new tc;if(t.Bw)n.abort();else if(!t.Uw){var i=function(){e(),n.abort()},e=function(){n.signal.removeEventListener(cc,i),t.Ow(i),t.zw(e)};n.signal.addEventListener(cc,i),t.Fw(i),t.Xw(e)}return n.signal}}function vc(t){if(function(t){return Vt(t)&&"function"==typeof t.forEach}(t)){var n=new dr;return t.forEach((function(t,i){Array.isArray(t)&&2===t.length?n.append(t[0],t[1]):n.append(i,t)})),n}return new dr(t)}var dc=function(){function t(t,n,i,e){this.ix=t,this.sx=n,this.WT=i,this.Wk=e}var n=t.prototype;return n.start=function(t){this.Bd=this.ix.getReader()},n.pull=function(t){var n=this;return gr((function(){var i,e,r;return mr(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,mo(n.Bd.read(),n.WT.Vw)];case 1:return i=o.sent(),[3,3];case 2:return e=o.sent(),r=n.sx(e),n.Wk.Fb(r),n.WT.Yw(),n.Bd.cancel(r).catch(Yt),t.error(r),[2];case 3:return i.done?(n.Wk.Ob(),n.WT.Yw(),t.close()):t.enqueue(i.value),[2]}}))}))()},n.cancel=function(t){return this.WT.Yw(),this.Wk.Fb(t),this.Bd.cancel(t)},t}();x(),gt();var lc=function(){function t(t){var n=this;this.WT=new Rr,this.XE=void 0,this.nx=new su,this.wx=!1,this.gx=function(){var t;n.hx(),null==(t=n.ox)||t.abort()},this.HE=t,this.WT.Kw(t.Vw),this.ox=new I,this.KE()}var n=t.prototype;return n.KE=function(){var t=this,n=this.ox,i=this.HE;if(i.Vw.Bw)return this.hx();n.onreadystatechange=function(){return t.ux()},n.onprogress=function(n){return t.qE(n)},n.onload=function(){return t.lx()},n.onloadend=function(){return t._x()},n.onerror=function(){return t.vx()},n.ontimeout=function(){return t.mx()},n.onabort=function(){return t.hx()},n.open(i.yE,i.Gu,!0),n.withCredentials=Boolean(i.kE),"responseType"in n&&i.Yk&&(i.Yk===ar.Ak?n.responseType="text":n.responseType="arraybuffer"),i.jk.forEach((function(t,i){n.setRequestHeader(i,t)})),i.bE&&(n.timeout=i.bE),this.WT.Vw.Fw(this.gx);var e=i.Nk;e?n.send(e):n.send()},n.ux=function(){var t=this.ox;void 0!==t&&t.readyState>=2&&!this.wx&&(this.wx=!0,this.yx())},n.yx=function(){var t,n,i=this.ox,e=function(t){var n=new dr,i=t.replace(/\r?\n[\t ]+/g," ");return i.split(/\r?\n/).forEach((function(t){var i=t.split(":"),e=i.shift().trim();if(e){var r=i.join(":").trim();n.append(e,r)}})),n}(i.getAllResponseHeaders()||""),r=this.HE;this.bx=new su,this.XE=new Vh({Kk:r,Yk:r.Yk,qk:this.bx.Vb,zk:i.status,Qk:i.statusText,jk:e,$k:null!=(n=i.responseURL)?n:e.get("X-Request-URL")}),null==(t=this.nx)||t.Ob(this.XE)},n.lx=function(){var t,n=this.ox;if(void 0!==n){var i=n.response;if(!zt(i)){var e=this.HE.Yk;i=e===ar.Ak?n.responseText:e===ar.wk?new ArrayBuffer(0):{}}null==(t=this.bx)||t.Ob(i)}},n._x=function(){this.gn()},n.qE=function(t){void 0!==this.ox&&(null==this.HE.EE||this.HE.EE.call(this.HE,t.loaded,t.lengthComputable?t.total:void 0))},n.vx=function(){var t=new g("Network request failed");this.XE?this.Ss(new jh(this.XE,t)):this.Ss(new Br(this.HE,t))},n.mx=function(){this.Ss(new Yh(this.HE))},n.hx=function(){this.Ss(new bo),this.gn()},n.Ss=function(t){var n,i;null==(n=null!=(i=this.bx)?i:this.nx)||n.Fb(t)},n.gn=function(){this.ox=void 0,this.XE=void 0,this.nx=void 0,this.bx=void 0,this.WT.Hw()},Tt(t,[{key:"ZE",get:function(){return this.nx.Vb}}]),t}();x(),gt();var wc=function(){function t(){}var n=t.prototype;return n.Kk=function(t){return function(t){if(!nc()||!function(t){try{return ic.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.Gu))return!1;if(!rc()&&t.EE)return!1;if(!t.RE&&t.yE!==Or.POST){if(Ut.Nm&&Ut.wm<=68)return!1;if(Ut.Im)return!1}return!0}(t)?new fc(t).ZE:new lc(t).ZE},n.PE=function(t){var n=c.navigator;if(n&&n.sendBeacon)n.sendBeacon(t.Gu,bh([t.Nk],{type:t.Dk}));else{var i=t.Dk?{"Content-type":t.Dk}:void 0;this.Kk(new Pr({yE:Or.POST,Gu:t.Gu,Nk:t.Nk,jk:i,xE:Nr.gE})).then((function(t){!function(t){t.then(Yt,Yt)}(t.Ck())}),Yt)}},n.gn=function(){},t}();x(),gt(),x(),gt();var bc=function(t){return t[t.Ax=1]="Ax",t[t.Sx=2]="Sx",t[t.Ak=3]="Ak",t[t.Tx=4]="Tx",t[t.kx=9]="kx",t}({});var gc=function(){function t(){}return t.prototype.xx=function(t){var n,i=new DOMParser;try{n=i.parseFromString(t,"text/xml")}catch(t){throw new Lr(t)}if(!n||n.getElementsByTagName("parsererror").length>0)throw new Lr;return new Ec(n)},t}(),mc=function(){function t(t){this.Ix=t}var n=t.prototype;return n.Nx=function(t){return this.Ix.isEqualNode(t.Ix)},n.Mx=function(n){return new t(this.Ix.cloneNode(n))},Tt(t,[{key:"Ex",get:function(){return bc.Sx}},{key:"Rx",get:function(){var t;return null!=(t=this.Ix.localName)?t:Rc(this.Ix.nodeName)}},{key:"l",get:function(){return this.Ix.nodeName}},{key:"Cx",get:function(){var t;return null!=(t=this.Ix.namespaceURI)?t:void 0}},{key:"Px",get:function(){var t;return null!=(t=this.Ix.prefix)?t:void 0}},{key:"Dx",get:function(){return this.Ix.nodeValue}}]),t}(),pc=function(){function t(t){this.Bx=void 0,this.Ox=t}var n=t.prototype;return n.Fx=function(t){return this.Lx.filter((function(n){return Ic(n)&&n.Vx===t}))},n.Wx=function(t,n){return this.Lx.filter((function(i){return Ic(i)&&i.Rx===n&&i.Cx===t}))},n.Gx=function(t){this.Ox.appendChild(t.Ux),this.Bx&&this.Bx.push(t)},n.Nx=function(t){return this.Ox.isEqualNode(t.Ux)},Tt(t,[{key:"Lx",get:function(){return void 0===this.Bx&&(this.Bx=function(t){for(var n=[],i=0;i<t.length;i++){var e=kc(t.item(i));e&&n.push(e)}return n}(this.Ox.childNodes)),this.Bx}},{key:"m",get:function(){return this.Lx.filter(Ic)}},{key:"Ux",get:function(){return this.Ox}}]),t}(),yc=function(t){function n(n){return t.call(this,n)||this}_t(n,t);var i=n.prototype;return i.Xx=function(t){if(this.Ox.hasAttribute(t))return this.Ox.getAttribute(t)},i.zx=function(t,n){if(this.Ox.hasAttributeNS(t,n))return this.Ox.getAttributeNS(t,n)},i.qx=function(t){this.Ox.removeAttribute(t)},i.Yx=function(t,n){this.Ox.removeAttributeNS(t,n)},i.Kx=function(t,n){this.Ox.setAttribute(t,n)},i.jx=function(t,n,i){this.Ox.setAttributeNS(t,n,i)},i.Mx=function(t){return new n(this.Ox.cloneNode(t))},Tt(n,[{key:"Ex",get:function(){return bc.Ax}},{key:"Rx",get:function(){var t;return null!=(t=this.Ox.localName)?t:Rc(this.Ox.nodeName)}},{key:"Cx",get:function(){var t;return null!=(t=this.Ox.namespaceURI)?t:void 0}},{key:"Px",get:function(){var t;return null!=(t=this.Ox.prefix)?t:void 0}},{key:"Vx",get:function(){return this.Ox.nodeName}},{key:"Hx",get:function(){return function(t){for(var n=[],i=0;i<t.length;i++)n.push(new mc(t.item(i)));return n}(this.Ox.attributes)}},{key:"Zx",get:function(){return this.Ox.textContent}}]),n}(pc),_c=function(){function t(t){this.Ox=t}return t.prototype.Nx=function(t){return this.qk===t.qk},Tt(t,[{key:"qk",get:function(){return this.Ox.nodeValue}},{key:"Ux",get:function(){return this.Ox}}]),t}(),Sc=function(t){function n(n){return t.call(this,n)||this}return _t(n,t),n.prototype.Mx=function(t){return new n(this.Ox.cloneNode(t))},Tt(n,[{key:"Ex",get:function(){return bc.Ak}}]),n}(_c),Tc=function(t){function n(n){return t.call(this,n)||this}return _t(n,t),n.prototype.Mx=function(t){return new n(this.Ox.cloneNode(t))},Tt(n,[{key:"Ex",get:function(){return bc.Tx}}]),n}(_c),Ec=function(t){function n(n){return t.call(this,n)||this}return _t(n,t),n.prototype.Mx=function(t){return new n(this.Ox.cloneNode(t))},Tt(n,[{key:"Ex",get:function(){return bc.kx}},{key:"Qx",get:function(){return new yc(this.Ox.documentElement)}}]),n}(pc);function Ic(t){return function(t){return 1===t.Ex}(t)}function kc(t){switch(t.nodeType){case bc.Ax:return new yc(t);case bc.Ak:return new Sc(t);case bc.Tx:return new Tc(t)}}function Rc(t){var n=t.indexOf(":");return n<0?t:t.substr(n+1)}var Oc=function(t){function n(){var n;return(n=t.apply(this,arguments)||this).Jx=void 0,n.tR=rc(),n.iR=Ut.pg||Ut.hm,n.nR=(Ut.pg||Ut.Nm&&Ut.wm<=68||Ut.hm)&&!(Ut.Im&&Ut.Pm<3),n.dR=void 0,n.fR=new gc,n}return _t(n,t),n.prototype.xx=function(t){return this.fR.xx(t)},Tt(n,[{key:"Hp",get:function(){return this.Jx||(this.Jx=new wo(vh())),this.Jx}},{key:"$x",get:function(){return this.tR}},{key:"eR",get:function(){return this.iR}},{key:"sR",get:function(){return this.nR}},{key:"rR",get:function(){return!1}},{key:"oR",get:function(){return lh.pk()}},{key:"hR",get:function(){return{aR:gh}}},{key:"uR",get:function(){return v.connection&&v.connection.effectiveType||hr}},{key:"cR",get:function(){return v.connection&&v.connection.type||cr}},{key:"lR",get:function(){return this.dR||(this.dR=new Xh(new wc)),this.dR}}]),n}(rr);jt(new Oc),x(),gt(),x(),gt();x(),gt(),x(),gt(),x(),gt();var Nc=function(t){return t.fE="audio",t._E="video",t.$V="metadata",t}({});x(),gt(),x(),gt();var Pc=function(t){return t.iE="#EXTINF",t.iBt="#EXT-X-MAP",t.p="#EXTM3U",t.en="#EXT-X-VERSION",t.ui="#EXT-X-TARGETDURATION",t.oTt="#EXT-X-START",t.li="#EXT-X-INDEPENDENT-SEGMENTS",t.bk="#EXT-X-STREAM-INF",t.vr="#EXT-X-MEDIA-SEQUENCE",t.if="#EXT-X-ENDLIST",t.sf="#EXT-X-MEDIA",t.ff="#EXT-X-DISCONTINUITY",t.af="#EXT-X-DISCONTINUITY-SEQUENCE",t.tv="#EXT-X-PLAYLIST-TYPE",t.nv="#EXT-X-KEY",t}({}),Ac=function(){function t(t,n){this.Aw="#EXTINF",this.ev=t,this.sv=n}return t.prototype.hP=function(){return this.Aw+":"+this.ev+",\n"+this.sv},t}(),Dc=function(){function t(t){this.Aw="#EXT-X-MAP",this.sv=t}return t.prototype.hP=function(){return this.Aw+':URI="'+this.sv+'"'},t}(),Cc=function(){function t(){this.Aw="#EXTM3U"}return t.prototype.hP=function(){return this.Aw},t}(),xc=function(){function t(t){this.Aw="#EXT-X-VERSION",this.YD=t}return t.prototype.hP=function(){return this.Aw+":"+this.YD},t}(),Bc=function(){function t(t){this.Aw="#EXT-X-TARGETDURATION",this.qLt=t}return t.prototype.hP=function(){return this.Aw+":"+this.qLt},t}(),Mc=function(){function t(t){this.Aw="#EXT-X-START",this.YBt=t}return t.prototype.hP=function(){return this.Aw+":TIME-OFFSET="+this.YBt},t}(),Lc=function(){function t(t,n,i){this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.Aw="#EXT-X-KEY"}return t.prototype.hP=function(){return this.Aw+':METHOD=SAMPLE-AES,URI="'+this.uri+'",KEYFORMAT="'+this.keyFormat+'",KEYFORMATVERSIONS="'+this.keyFormatVersions+'"'},t}(),Uc=function(){function t(t){this.Aw="#EXT-X-STREAM-INF",this.wG=1,this.sv=t}return t.prototype.hP=function(){return this.Aw+":BANDWIDTH="+this.wG+',AUDIO="audio"\n'+this.sv},t}(),Fc=function(){function t(t){this.Aw="#EXT-X-MEDIA-SEQUENCE",this.eL=t}return t.prototype.hP=function(){return this.Aw+":"+this.eL},t}(),zc=function(){function t(t){this.Aw="#EXT-X-MEDIA",this.sv=t}return t.prototype.hP=function(){var t=Wr();t.set("TYPE","AUDIO"),t.set("GROUP-ID",'"audio"'),t.set("NAME",'"audio"'),t.set("AUTOSELECT","YES"),t.set("DEFAULT","YES"),t.set("CHANNELS",'"2"'),t.set("URI",'"'+this.sv+'"');var n=[];return t.forEach((function(t,i){return n.push(i+"="+t)})),this.Aw+":"+n.join(",")},t}();x(),gt();var Wc=function(){function t(t){this.mA=[],this.mA=t}var n=t.prototype;return n.VN=function(){return this.mA},n.cv=function(t){this.mA.push(t)},n.bVt=function(){for(var t="",n=0,i=this.VN();n<i.length;n++){t+=i[n].hP()+"\n"}return t},n.Hw=function(){this.mA.length=0},t}(),Hc=function(t){function n(n,i){var e;return e=t.call(this,[new Cc,new xc(8)])||this,i&&e.cv(new Uc("video/index.m3u8")),n&&e.cv(new zc("audio/index.m3u8")),e}return _t(n,t),n}(Wc);x(),gt(),x(),gt(),x(),gt();var Vc=function(t){return t.Het="HELLO",t.Zet="HI_THERE",t.Xet="INITIALIZE",t.zet="APPEND_INIT",t.qet="APPEND_DATA",t.Yet="ACK",t.Ket="REMOVE",t.jet="DESTROY_SESSION",t}({});x(),gt(),x(),gt();var qc,Xc=new Array(256);for(qc=0;qc<256;qc+=1)Xc[qc]=(qc<16?"0":"")+qc.toString(16);function jc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=16*y.random()|0;return("x"===t?n:3&n|8).toString(16)}))}x(),gt();var Yc=function(t){function n(n){var i;return(i=t.call(this,"append")||this).qk=n,i}return _t(n,t),n}(Eo),Kc=function(t){function n(){var n;return(n=t.apply(this,arguments)||this).Txt=0,n.Sp=new E(0),n.Qb=!1,n.av=!1,n}_t(n,t);var i=n.prototype;return i._2=function(t,n){this.Txt+=n,this.Sp=eu([this.Sp,t]),this.wo(new Yc(t))},i.Ws=function(){this.XS||(this.wo(new Eo("close")),this.Qb=!0)},Tt(n,[{key:"gR",get:function(){return this.Txt}},{key:"qk",get:function(){return this.Sp}},{key:"XS",get:function(){return this.Qb}},{key:"dv",get:function(){return this.av},set:function(t){this.av=t}}]),n}(To),Gc="sync-seg-",$c=function(){function t(t,n){this.lv=!1,this.wv=!1,this.o=Gc+jc(),this.gv=n?new Kc:void 0,this.kv=t?new Kc:void 0}return t.prototype.Ws=function(){this.gv&&this.gv.Ws(),this.kv&&this.kv.Ws()},Tt(t,[{key:"jv",get:function(){return this.lv},set:function(t){this.lv=t}},{key:"Ad",get:function(){return this.wv},set:function(t){this.wv=t}}]),t}();x(),gt();var Zc=1.1,Jc=function(t){function n(n,i,e){var r;return(r=t.call(this,[new Cc,new xc(8),new Bc(1),new Mc(0)])||this).tw=[],r.Fbt=Wr(),r.rw=0,r.sw=function(t){if(t.VO>=En)for(;r.tw.length>0;)r.bw()},e&&r.cv(new Lc(e,"com.apple.streamingkeydelivery","1")),r.out=n,r.Aot=i,r.Aot.yn("remove",r.sw),r.kw=new Fc(0),r.cv(r.kw),r}_t(n,t);var i=n.prototype;return i.vCt=function(){return this.out===Nc._E?this.Aot.tb:this.out===Nc.fE?this.Aot.nb:void 0},i.iut=function(t){return this.Fbt.get(t)},i.Hw=function(){this.tw.length=0,this.kw.eL=0,this.Fbt.clear(),this.rw=0},i.VN=function(){return this.cb(),jn(t.prototype.VN.call(this)).concat(jn(this.tw))},i.cb=function(){for(var t=this.Aot.ab(),n=0;n<t.length;n++){var i=t[n];if(!this.Fbt.has(i.o)){var e=void 0;if(this.out===Nc._E?(e=i.gv,i.Ad=!0):(e=i.kv,i.jv=!0),!e)return;this.Fbt.set(i.o,e),e.dv&&this.tw.push(new Dc(i.o+"-init")),this.tw.push(new Ac(Zc,i.o)),this.rw+=Zc}}this.lb()},i.lb=function(){for(;this.rw>60;)this.bw()},i.bw=function(){var t=this.tw.shift();void 0!==t&&function(t){return t.Aw===Pc.iE}(t)&&(this.Fbt.delete(t.sv),this.rw-=t.ev,this.kw.eL++)},n}(Wc);var Qc=function(t){function n(n){var i;return(i=t.call(this,"remove")||this).VO=n,i}return _t(n,t),n}(Eo),ta=function(t){function n(n,i){var e;return(e=t.call(this)||this).tg=n,e.ng=i,e.ig=[],e.ug=[],e.sg=Wr(),e.lg=Wr(),e.bg=Wr(),e.mg=0,e}_t(n,t);var i=n.prototype;return i.ab=function(){return this.kg?(this.ig=this.ig.filter((function(t){return!(t.Ad&&t.jv)})),jn(this.ig).concat([this.kg],jn(this.ug))):[]},i.w2=function(t){this.tm(t)},i._2=function(t){this.tm(t),this.rm(t),this.om(t)},i.$S=function(t){this.tm(t),this.om(t)},i.Hw=function(){var t;null==(t=this.kg)||t.Ws(),this.kg=void 0,this.ug.forEach((function(t){return t.Ws()})),this.ug.length=0,this.ig.length=0,this.bg=Wr(),this.mg=0},i.rm=function(t){var n=t.startPts,i=t.totalDuration;this.lg.set(t.mediaType,n+i)},i.sm=function(){if(this.kg){this.kg.Ws(),this.ig.push(this.kg);var t=this.ug.shift(),n=new $c(this.tg,this.ng);t?(this.kg=t,this.ug.push(n)):this.kg=n}},i.am=function(t){if(this.kg){var n=!this.kg.kv||0===this.kg.kv.gR,i=!this.kg.gv||0===this.kg.gv.gR,e=this.kg.kv&&this.kg.kv.dv,r=this.kg.gv&&this.kg.gv.dv,o=i&&(n&&!(this.kg.jv||this.kg.Ad)||e),u=n&&(i&&!(this.kg.jv||this.kg.Ad)||r);(t===Nc.fE&&!u||t===Nc._E&&!o)&&(this.sm(),this.sm())}},i.tm=function(t){var n=t.mediaType,i=t.kind,e=this.sg.get(n);if(void 0===e){if(i===Vc.zet||i===Vc.qet){var r=[t];this.sg.set(n,r)}}else e.push(t)},i.om=function(t){var n=this.bm(t);for(var i=0;i<n.length;i++){var e=n[i];switch(e.kind){case Vc.zet:this.km(e),this.bg=Wr(),this.mg=0;break;case Vc.Ket:this.ip(e);break;case Vc.qet:this.up(e)}}},i.km=function(t){var n=t.mediaType;void 0===this.kg?(this.kg=new $c(this.tg,this.ng),this.ug.push(new $c(this.tg,this.ng))):this.am(n),n===Nc._E?(this.ty=t.segment,this.kg.gv.dv=!0):n===Nc.fE&&(this.ny=t.segment,this.kg.kv.dv=!0)},i.up=function(t){var n,i,e=t.mediaType===Nc.fE,r=t.totalDuration,o=null!=(n=this.bg.get(t.mediaType))?n:0;e?(this.kg.kv._2(t.segment,r),i=o+this.kg.kv.gR):(this.kg.gv._2(t.segment,r),i=o+this.kg.gv.gR),i>=this.mg+Zc&&(this.bg.set(t.mediaType,i),this.mg+=Zc,this.sm())},i.ip=function(t){this.lg.set(t.mediaType,void 0),this.am(t.mediaType),this.ig.length=0,this.wo(new Qc(t.endTime))},i.bm=function(t){var n=this;if(t.kind===Vc.Ket)return this.hy(t);var i=[];return this.sg.forEach((function(t){if(t&&t.length>0){var e=yr(t,(function(t){return t.kind===Vc.Ket}));-1===e&&(e=t.length);for(var r=t.slice(0,e),o=0;o<r.length;o++){var u=r[o];if(!Er(i,u)){var s,f=n.hy(u);if(f.length>0)(s=i).push.apply(s,jn(f));else if(u.kind===Vc.qet)break}}}})),i},i.hy=function(t){var n=this.sg.get(t.mediaType),i=function(t){return t===Nc._E?Nc.fE:Nc._E}(t.mediaType);if(!(i===Nc._E?this.ng:this.tg))return n.splice(0,n.indexOf(t)+1);if(t.kind===Vc.zet)return[];var e=this.lg.get(i);if(void 0===e)return[];if(t.kind===Vc.Ket){var r=this.by(i);if(r.length>0){var o=n.splice(0,n.indexOf(t));return n.splice(0,1),jn(o).concat(jn(r),[t])}return[]}if(t.startPts<=e){var u=n.splice(0,n.indexOf(t));n.splice(0,1);var s=this.my(t,u,i);return jn(u).concat(jn(s),[t])}return[]},i.my=function(t,n,i){var e=this.sg.get(i);if(!e)return[];var r=t.startPts+t.totalDuration,o=yr(e,(function(t){return t.kind===Vc.Ket})),u=o-1;-1===o&&(u=e.length-1);for(var s=u+1,f=0;f<=u&&s===u+1;f++){var h=e[f];h.kind===Vc.qet&&h.startPts>r&&(s=f)}var c=-1;return-1!==yr(n,(function(t){return t.kind===Vc.zet}))&&(c=yr(e,(function(t){return t.kind===Vc.zet}))),c>s&&(s=c+1),s>0?(e[s-1].kind===Vc.zet&&(s-=1),e.splice(0,s)):[]},i.by=function(t){var n=this.sg.get(t);if(n){var i=yr(n,(function(t){return t.kind===Vc.Ket}));if(i>=0)return n.splice(0,i+1)}return[]},i.ky=function(){var t="[MEDIABUFFER] endPTS: ";this.lg.forEach((function(n,i){t=t.concat(i+" = "+n+" ")})),Wt.Bp(t)},i.OS=function(t,n){var i=t+": [";null==n||n.forEach((function(t){i=i.concat(" "+t.kind+"("+t.mediaType+")")})),i=i.concat(" ]"),Wt.Bp(i)},Tt(n,[{key:"nb",get:function(){var t;return null==(t=this.ny)?void 0:t.slice()}},{key:"tb",get:function(){var t;return null==(t=this.ty)?void 0:t.slice()}}]),n}(To);var na=function(){function t(t,n){var i=t.some((function(t){return t.match("audio")})),e=t.some((function(t){return t.match("video")}));this.AS=new ta(i,e),this.BS=new Hc(i,e),i&&(this.RT=new Jc(Nc.fE,this.AS,n)),e&&(this.IE=new Jc(Nc._E,this.AS,n))}var n=t.prototype;return n.ME=function(t){var n,i,e=ia(t);return e===Nc._E?null==(n=this.IE)?void 0:n.vCt():e===Nc.fE?null==(i=this.RT)?void 0:i.vCt():void 0},n.iut=function(t){var n,i,e=t.split("/")[1],r=ia(t);return r===Nc._E?null==(n=this.IE)?void 0:n.iut(e):r===Nc.fE?null==(i=this.RT)?void 0:i.iut(e):void 0},n.w2=function(t){this.AS.w2(t)},n._2=function(t){this.AS._2(t)},n._dt=function(t){this.AS.$S(t)},n.Hw=function(){var t,n;this.AS.Hw(),this.BS.Hw(),null==(t=this.RT)||t.Hw(),null==(n=this.IE)||n.Hw()},Tt(t,[{key:"tk",get:function(){return this.BS}},{key:"ik",get:function(){return this.RT}},{key:"uk",get:function(){return this.IE}}]),t}();function ia(t){return t.match(/video/)?Nc._E:Nc.fE}var ea=function(){function t(t,n){var i=this;this.sk=t,this.ak=n,this.Nut=void 0,this.Nzt=gr((function(t){var n,e;return mr(this,(function(r){switch((n=t.data).kind){case Vc.Xet:i.Nut=new na(n.mediaBufferConfigs,n.fairPlaySdkUri);break;case Vc.zet:i.Nut.w2(n);break;case Vc.qet:i.Nut._2(n);break;case Vc.Ket:i.Nut._dt(n)}return e={kind:Vc.Yet},i.sk.postMessage(e),[2]}))})),this.sk.onmessage=this.Nzt}var n=t.prototype;return n.bVt=function(t){return"master.m3u8"===t?this.Nut.tk:"video/index.m3u8"===t?this.Nut.uk:"audio/index.m3u8"===t?this.Nut.ik:void 0},n.mk=function(t){if(t.match(/m3u8/)){var n,i=null==(n=this.bVt(t))?void 0:n.bVt();return new Response(i,{headers:{"Content-Type":"application/x-mpegurl; charset=utf-8"}})}if(t.match(Gc)){var e={"Content-Type":t.match(/video/)?"video/mp4":"audio/mp4"};if(t.match(/init/)){var r,o=null==(r=this.Nut)?void 0:r.ME(t);return new Response(o,{headers:e})}var u=this.tut(t);if(!u)return new Response(void 0,{status:404,statusText:"Not Found"});var s=function(t){var n,i=function(t){n.enqueue(t.qk)},e=function(){n.close(),t.fn("append",i),t.fn("close",e)};return new self.ReadableStream({start:function(r){(n=r).enqueue(t.qk),t.XS?n.close():(t.yn("append",i),t.yn("close",e))},cancel:function(){t.fn("append",i),t.fn("close",e)}})}(u);return new Response(s,{headers:e})}return new Response(void 0,{status:404,statusText:"Not Found"})},n.tut=function(t){return this.Nut.iut(t)},n.close=function(){var t;this.sk.close(),null==(t=this.Nut)||t.Hw()},t}(),ra=function(){function t(){var t=this;this.W6=Wr(),this.Nzt=function(n){var i=n.data;if(i.kind===Vc.Het){t.kk().catch(Yt);var e=i.port,r=jc(),o=new ea(e,n.source.id);t.W6.set(r,o);var u=function(n){n.data.kind===Vc.jet&&(t.TR(r),e.removeEventListener("message",u))};e.addEventListener("message",u);var s={kind:Vc.Zet,sessionId:r};e.postMessage(s)}},this.CR=function(n){if(uo(n.request.url,"https://theo.proxy")){var i=new URL(n.request.url).pathname.split("/"),e=i[1],r=i.slice(2).join("/"),o=t.W6.get(e);if(void 0===o){var u=new Response(void 0,{headers:{message:"Given session ["+e+"] not found."},status:404,statusText:"Not Found"});return void n.respondWith(u)}if(void 0===r){var s=new Response(void 0,{headers:{message:"No resource ["+r+"] provided."},status:404,statusText:"Not Found"});return void n.respondWith(s)}var f=o.mk(r);n.respondWith(f)}}}var n=t.prototype;return n.dr=function(t){this.czt=t,t.addEventListener("message",this.Nzt),t.addEventListener("fetch",this.CR)},n.TR=function(t){var n=this.W6.get(t);n&&n.close(),this.W6.delete(t)},n.kk=function(){var t=this;return gr((function(){var n,i;return mr(this,(function(e){switch(e.label){case 0:return[4,t.czt.clients.matchAll()];case 1:return n=e.sent(),i=n.map((function(t){return t.id})),t.W6.forEach((function(n,e){Er(i,n.ak)||t.TR(e)})),[2]}}))}))()},t}();ra.BR=new ra;var oa=self;oa.addEventListener("install",(function(t){t.waitUntil(oa.skipWaiting())})),oa.addEventListener("activate",(function(t){t.waitUntil(oa.clients.claim())})),ra.BR.dr(oa)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof s?s:"undefined"!=typeof global?global:this);