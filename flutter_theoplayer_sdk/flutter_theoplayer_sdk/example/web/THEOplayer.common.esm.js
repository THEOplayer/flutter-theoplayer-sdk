/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 8.3.0
 Created: 2024-10-23T09:21:37.340Z
 */
var qa,r,kt,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,Nl=a.location,Il=a.navigator,u=a.setTimeout,c=a.clearTimeout,v=a.setInterval,m=a.clearInterval,g=a.Error,b=a.TypeError,w=(a.SyntaxError,a.Object),_=a.Math,x=a.parseInt,C=a.parseFloat,S=a.isNaN,j=a.Uint8Array,Dl=a.Worker,El=(a.WorkerGlobalScope,a.XMLHttpRequest),Ll=w.create,Ol=w.defineProperty,Rl=w.getOwnPropertyDescriptor,zl=w.getOwnPropertyNames,Bl=w.getPrototypeOf,Ul=w.prototype.hasOwnProperty,Ql=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),Fl=(t,i,e)=>(e=null!=t?Ll(Bl(t)):{},((t,i,e,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let n of zl(i))Ul.call(t,n)||n===e||Ol(t,n,{get:()=>i[n],enumerable:!(s=Rl(i,n))||s.enumerable});return t})(!i&&t&&t.__esModule?e:Ol(e,"default",{value:t,enumerable:!0}),t)),Yl=Ql(((t,i)=>{var e,n;e=t,n=function(t){"use strict";var i,e=w.defineProperty,n=w.defineProperties,r=w.getOwnPropertyDescriptors,o=w.getOwnPropertySymbols,h=w.prototype.hasOwnProperty,a=w.prototype.propertyIsEnumerable,c=(t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,l=(t,i)=>{for(var e in i||(i={}))h.call(i,e)&&c(t,e,i[e]);if(o)for(var e of o(i))a.call(i,e)&&c(t,e,i[e]);return t},d=(t,i)=>n(t,r(i)),f=(t,i)=>{var e={};for(var s in t)h.call(t,s)&&i.indexOf(s)<0&&(e[s]=t[s]);if(null!=t&&o)for(var s of o(t))i.indexOf(s)<0&&a.call(t,s)&&(e[s]=t[s]);return e},p=typeof globalThis<"u"?globalThis:typeof s<"u"?s:typeof global<"u"?global:typeof self<"u"?self:{};function A(t){return t&&t.__esModule&&w.prototype.hasOwnProperty.call(t,"default")?t.default:t}var y,M={exports:{}};y=M,function(t){var i,e={VERSION:"1.6.1"},s={},n=function(t,i){return function(){return i.apply(t,arguments)}},r=function(){var t,i,e=arguments,s=e[0];for(i=1;i<e.length;i++)for(t in e[i])!(t in s)&&e[i].hasOwnProperty(t)&&(s[t]=e[i][t]);return s},o=function(t,i){return{value:t,name:i}};e.TRACE=o(1,"TRACE"),e.DEBUG=o(2,"DEBUG"),e.INFO=o(3,"INFO"),e.TIME=o(4,"TIME"),e.WARN=o(5,"WARN"),e.ERROR=o(8,"ERROR"),e.OFF=o(99,"OFF");var h=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};h.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var i=this.context.filterLevel;return t.value>=i.value},trace:function(){this.invoke(e.TRACE,arguments)},debug:function(){this.invoke(e.DEBUG,arguments)},info:function(){this.invoke(e.INFO,arguments)},warn:function(){this.invoke(e.WARN,arguments)},error:function(){this.invoke(e.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(e.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(e.TIME,[t,"end"])},invoke:function(t,e){i&&this.enabledFor(t)&&i(e,r({level:t},this.context))}};var a,u=new h({filterLevel:e.OFF});(a=e).enabledFor=n(u,u.enabledFor),a.trace=n(u,u.trace),a.debug=n(u,u.debug),a.time=n(u,u.time),a.timeEnd=n(u,u.timeEnd),a.info=n(u,u.info),a.warn=n(u,u.warn),a.error=n(u,u.error),a.log=a.info,e.setHandler=function(t){i=t},e.setLevel=function(t){for(var i in u.setLevel(t),s)s.hasOwnProperty(i)&&s[i].setLevel(t)},e.getLevel=function(){return u.getLevel()},e.get=function(t){return s[t]||(s[t]=new h(r({name:t},u.context)))},e.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,i){i.name&&t.unshift("["+i.name+"]")};var i={},s=function(t,i){Function.prototype.apply.call(t,console,i)};return typeof console>"u"?function(){}:function(n,r){n=Array.prototype.slice.call(n);var o,h=console.log;r.level===e.TIME?(o=(r.name?"["+r.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(o):i[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):s(h,[o+": "+((new Date).getTime()-i[o])+"ms"])):(r.level===e.WARN&&console.warn?h=console.warn:r.level===e.ERROR&&console.error?h=console.error:r.level===e.INFO&&console.info?h=console.info:r.level===e.DEBUG&&console.debug?h=console.debug:r.level===e.TRACE&&console.trace&&(h=console.trace),t.formatter(n,r),s(h,n))}},e.useDefaults=function(t){e.setLevel(t&&t.defaultLevel||e.DEBUG),e.setHandler(e.createDefaultHandler(t))},e.setDefaults=e.useDefaults,y.exports?y.exports=e:(e.ul=t.Logger,e.noConflict=function(){return t.Logger=e.ul,e},t.Logger=e)}(p);const T=A(M.exports),N="0.2.1",I=(null==(i=null==s?void 0:s.navigator)?void 0:i.userAgent)||"No user agent available";let D="",E="",k="",L="",O="",R="",P="",z=0;const B=[],U=t=>{D=""===D?t:D},Q=t=>{E=""===E?t:E},F=t=>{k=""===k?t:k},Y=t=>{L=""===L?t:L},G=t=>{O=""===O?t:O},V=t=>{z=0===z?t:z},W=t=>{R=t},H=t=>{P=""===P?t:P},X=t=>{60===B.length&&B.shift(),B.push(t)},Z=(t,i)=>{let e;void 0===t&&(t=60),void 0===i&&(i="JSON"),e=!Number.isInteger(t)||t>60||t<=0?60:t;const s={client:"@millicast/millicast-sdk",version:N,timestamp:(new Date).toISOString(),userAgent:I,clusterId:P,accountId:D,streamName:E,subscriberId:k,connection:R,stats:B.slice(-e),connectionDurationMs:(new Date).getTime()-z};return""!==O?s.feedId=O:""!==L&&(s.streamViewId=L),"CMCD"===i?function(t){function i(t,i){return{ts:_.round(i.timestamp)||"",ot:"audio"===t?"a":"v",bl:i.jitterBufferDelay||0,br:_.round(i.bitrateBitsPerSecond||0),pld:i.packetsLostDeltaPerSecond||0,j:i.jitter||0,mtp:i.packetRate||0,mid:i.mid||"",mimeType:i.mimeType||""}}return t.stats=t.stats.reduce(((t,e)=>{const s=0!==e.audio.inbounds.length?e.audio.inbounds.map((t=>i("audio",t))):e.audio.outbounds.map((t=>i("audio",t))),n=0!==e.video.inbounds.length?e.video.inbounds.map((t=>i("video",t))):e.video.outbounds.map((t=>i("video",t)));return t.concat([...s,...n])}),[]),t}(s):s};T.useDefaults({defaultLevel:T.TRACE});const q=["TRACE","DEBUG","INFO","WARN","ERROR"],K=(t,i)=>{t.unshift("[".concat(i.name||"Global","] ").concat((new Date).toISOString()," - ").concat(i.level.name," -"))},J=(t,i)=>i?t.value>=st[i].value:t.value>=et.value,$=T.createDefaultHandler({formatter:K});T.setHandler(((t,i)=>{((t,i)=>{t=(t=Array.prototype.slice.call(t)).map((t=>"object"==typeof t?JSON.stringify(t):t)),K(t,i),0!==tt?(it.push(t.join(" ")),it.length>=tt&&(it=it.slice(-tt))):it=[]})(t,i),J(i.level,i.name)&&$(t,i);for(const{handler:e,level:s}of nt)i.level.value>=s.value&&e(t,i)}));let tt=1e4,it=[],et=T.OFF;const st={},nt=[],rt=d(l({},T),{enabledFor:J,getHistory:()=>it,getHistoryMaxSize:()=>tt,setHistoryMaxSize:t=>{tt=t},setLevel:t=>{et=t;for(const i in st)st[i]=t},getLevel:()=>et,get:t=>{st[t]||(st[t]=et);const i=T.get(t);return i.setLevel=i=>{st[t]=i},i.getLevel=()=>st[t],i},setHandler:(t,i)=>{nt.push({handler:t,level:i})},diagnose:t=>{let i;void 0===t&&(t={});const e={statsCount:60,historySize:1e3,minLogLevel:"TRACE",statsFormat:"JSON"};"number"==typeof t?(e.statsCount=t,i=e):i=l(l({},e),t);const{statsCount:s,historySize:n,minLogLevel:r,statsFormat:o}=i,h=Z(s,o),a=rt.getHistory();if(!Number.isInteger(n)||n<=0)throw new g("Invalid Argument Exception : historySize must be a positive integer.");if(!q.includes(r.toUpperCase()))throw new g('Invalid Argument Exception : the minLogLevel parameter only excepts "trace", "debug", "info", "warn", and "error" as arguments.');if(q.includes(r.toUpperCase())){const t=q.slice(q.indexOf(r.toUpperCase())),i=a.filter((i=>t.some((t=>i.includes(t)))));h.history=i.slice(-n)}return h},JSON:"JSON",CMCD:"CMCD",VERSION:N});var ot,ht={exports:{}},at="object"==typeof Reflect?Reflect:null,ut=at&&"function"==typeof at.apply?at.apply:function(t,i,e){return Function.prototype.apply.call(t,i,e)};ot=at&&"function"==typeof at.ownKeys?at.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var ct=Number.isNaN||function(t){return t!=t};function lt(){lt.init.call(this)}ht.exports=lt,ht.exports.once=function(t,i){return new Promise((function(e,s){function n(e){t.removeListener(i,r),s(e)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),e([].slice.call(arguments))}yt(t,i,r,{once:!0}),"error"!==i&&function(t,i,e){"function"==typeof t.on&&yt(t,"error",i,e)}(t,n,{once:!0})}))},lt.EventEmitter=lt,lt.prototype.hd=void 0,lt.prototype.Nd=0,lt.prototype.Id=void 0;var dt=10;function ft(t){if("function"!=typeof t)throw new b('The "listener" argument must be of type Function. Received type '+typeof t)}function _t(t){return void 0===t.Id?lt.defaultMaxListeners:t.Id}function gt(t,i,e,s){var n,r,o;if(ft(e),void 0===(r=t.hd)?(r=t.hd=w.create(null),t.Nd=0):(void 0!==r.newListener&&(t.emit("newListener",i,e.listener?e.listener:e),r=t.hd),o=r[i]),void 0===o)o=r[i]=e,++t.Nd;else if("function"==typeof o?o=r[i]=s?[e,o]:[o,e]:s?o.unshift(e):o.push(e),(n=_t(t))>0&&o.length>n&&!o.warned){o.warned=!0;var h=new g("Possible EventEmitter memory leak detected. "+o.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=i,h.count=o.length,function(t){console&&console.warn&&console.warn(t)}(h)}return t}function wt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function vt(t,i,e){var s={fired:!1,wrapFn:void 0,target:t,type:i,listener:e},n=wt.bind(s);return n.listener=e,s.wrapFn=n,n}function mt(t,i,e){var s=t.hd;if(void 0===s)return[];var n=s[i];return void 0===n?[]:"function"==typeof n?e?[n.listener||n]:[n]:e?function(t){for(var i=new Array(t.length),e=0;e<i.length;++e)i[e]=t[e].listener||t[e];return i}(n):At(n,n.length)}function pt(t){var i=this.hd;if(void 0!==i){var e=i[t];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function At(t,i){for(var e=new Array(i),s=0;s<i;++s)e[s]=t[s];return e}function yt(t,i,e,s){if("function"==typeof t.on)s.once?t.once(i,e):t.on(i,e);else{if("function"!=typeof t.addEventListener)throw new b('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,(function n(r){s.once&&t.removeEventListener(i,n),e(r)}))}}w.defineProperty(lt,"defaultMaxListeners",{enumerable:!0,get:function(){return dt},set:function(t){if("number"!=typeof t||t<0||ct(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");dt=t}}),lt.init=function(){(void 0===this.hd||this.hd===w.getPrototypeOf(this).hd)&&(this.hd=w.create(null),this.Nd=0),this.Id=this.Id||void 0},lt.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||ct(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.Id=t,this},lt.prototype.getMaxListeners=function(){return _t(this)},lt.prototype.emit=function(t){for(var i=[],e=1;e<arguments.length;e++)i.push(arguments[e]);var s="error"===t,n=this.hd;if(void 0!==n)s=s&&void 0===n.error;else if(!s)return!1;if(s){var r;if(i.length>0&&(r=i[0]),r instanceof g)throw r;var o=new g("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var h=n[t];if(void 0===h)return!1;if("function"==typeof h)ut(h,this,i);else{var a=h.length,u=At(h,a);for(e=0;e<a;++e)ut(u[e],this,i)}return!0},lt.prototype.addListener=function(t,i){return gt(this,t,i,!1)},lt.prototype.on=lt.prototype.addListener,lt.prototype.prependListener=function(t,i){return gt(this,t,i,!0)},lt.prototype.once=function(t,i){return ft(i),this.on(t,vt(this,t,i)),this},lt.prototype.prependOnceListener=function(t,i){return ft(i),this.prependListener(t,vt(this,t,i)),this},lt.prototype.removeListener=function(t,i){var e,s,n,r,o;if(ft(i),void 0===(s=this.hd))return this;if(void 0===(e=s[t]))return this;if(e===i||e.listener===i)0==--this.Nd?this.hd=w.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,e.listener||i));else if("function"!=typeof e){for(n=-1,r=e.length-1;r>=0;r--)if(e[r]===i||e[r].listener===i){o=e[r].listener,n=r;break}if(n<0)return this;0===n?e.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(e,n),1===e.length&&(s[t]=e[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||i)}return this},lt.prototype.off=lt.prototype.removeListener,lt.prototype.removeAllListeners=function(t){var i,e,s;if(void 0===(e=this.hd))return this;if(void 0===e.removeListener)return 0===arguments.length?(this.hd=w.create(null),this.Nd=0):void 0!==e[t]&&(0==--this.Nd?this.hd=w.create(null):delete e[t]),this;if(0===arguments.length){var n,r=w.keys(e);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.hd=w.create(null),this.Nd=0,this}if("function"==typeof(i=e[t]))this.removeListener(t,i);else if(void 0!==i)for(s=i.length-1;s>=0;s--)this.removeListener(t,i[s]);return this},lt.prototype.listeners=function(t){return mt(this,t,!0)},lt.prototype.rawListeners=function(t){return mt(this,t,!1)},lt.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):pt.call(t,i)},lt.prototype.listenerCount=pt,lt.prototype.eventNames=function(){return this.Nd>0?ot(this.hd):[]};var Mt=ht.exports;const bt=A(Mt);var Tt={exports:{}};Tt.exports=Nt,Tt.exports.filter=function(t,i){var e=new St;return Nt(t,e,i),e};var St=Mt.EventEmitter;function Nt(t,i,e){Array.isArray(e)||(e=[e]);var s=[];return e.forEach((function(e){var n=function(){var t=[].slice.call(arguments);t.unshift(e),i.emit.apply(i,t)};s.push(n),t.on(e,n)})),function(){e.forEach((function(i,e){t.removeListener(i,s[e])}))}}const It=A(Tt.exports);var Dt={exports:{}};!function(t,i){var e;self,e=()=>{return t={7:t=>{var i,e="object"==typeof Reflect?Reflect:null,s=e&&"function"==typeof e.apply?e.apply:function(t,i,e){return Function.prototype.apply.call(t,i,e)};i=e&&"function"==typeof e.ownKeys?e.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,i){return new Promise((function(e,s){function n(e){t.removeListener(i,r),s(e)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),e([].slice.call(arguments))}var o,h;v(t,i,r,{once:!0}),"error"!==i&&(h=n,"function"==typeof(o=t).on&&v(o,"error",h,{once:!0}))}))},r.EventEmitter=r,r.prototype.hd=void 0,r.prototype.Nd=0,r.prototype.Id=void 0;var o=10;function h(t){if("function"!=typeof t)throw new b('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t.Id?r.defaultMaxListeners:t.Id}function u(t,i,e,s){var n,r,o,u;if(h(e),void 0===(r=t.hd)?(r=t.hd=w.create(null),t.Nd=0):(void 0!==r.newListener&&(t.emit("newListener",i,e.listener?e.listener:e),r=t.hd),o=r[i]),void 0===o)o=r[i]=e,++t.Nd;else if("function"==typeof o?o=r[i]=s?[e,o]:[o,e]:s?o.unshift(e):o.push(e),(n=a(t))>0&&o.length>n&&!o.warned){o.warned=!0;var c=new g("Possible EventEmitter memory leak detected. "+o.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=i,c.count=o.length,u=c,console&&console.warn&&console.warn(u)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,i,e){var s={fired:!1,wrapFn:void 0,target:t,type:i,listener:e},n=c.bind(s);return n.listener=e,s.wrapFn=n,n}function d(t,i,e){var s=t.hd;if(void 0===s)return[];var n=s[i];return void 0===n?[]:"function"==typeof n?e?[n.listener||n]:[n]:e?function(t){for(var i=new Array(t.length),e=0;e<i.length;++e)i[e]=t[e].listener||t[e];return i}(n):_(n,n.length)}function f(t){var i=this.hd;if(void 0!==i){var e=i[t];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function _(t,i){for(var e=new Array(i),s=0;s<i;++s)e[s]=t[s];return e}function v(t,i,e,s){if("function"==typeof t.on)s.once?t.once(i,e):t.on(i,e);else{if("function"!=typeof t.addEventListener)throw new b('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,(function n(r){s.once&&t.removeEventListener(i,n),e(r)}))}}w.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),r.init=function(){void 0!==this.hd&&this.hd!==w.getPrototypeOf(this).hd||(this.hd=w.create(null),this.Nd=0),this.Id=this.Id||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.Id=t,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(t){for(var i=[],e=1;e<arguments.length;e++)i.push(arguments[e]);var n="error"===t,r=this.hd;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(i.length>0&&(o=i[0]),o instanceof g)throw o;var h=new g("Unhandled error."+(o?" ("+o.message+")":""));throw h.context=o,h}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)s(a,this,i);else{var u=a.length,c=_(a,u);for(e=0;e<u;++e)s(c[e],this,i)}return!0},r.prototype.addListener=function(t,i){return u(this,t,i,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,i){return u(this,t,i,!0)},r.prototype.once=function(t,i){return h(i),this.on(t,l(this,t,i)),this},r.prototype.prependOnceListener=function(t,i){return h(i),this.prependListener(t,l(this,t,i)),this},r.prototype.removeListener=function(t,i){var e,s,n,r,o;if(h(i),void 0===(s=this.hd))return this;if(void 0===(e=s[t]))return this;if(e===i||e.listener===i)0==--this.Nd?this.hd=w.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,e.listener||i));else if("function"!=typeof e){for(n=-1,r=e.length-1;r>=0;r--)if(e[r]===i||e[r].listener===i){o=e[r].listener,n=r;break}if(n<0)return this;0===n?e.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(e,n),1===e.length&&(s[t]=e[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||i)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var i,e,s;if(void 0===(e=this.hd))return this;if(void 0===e.removeListener)return 0===arguments.length?(this.hd=w.create(null),this.Nd=0):void 0!==e[t]&&(0==--this.Nd?this.hd=w.create(null):delete e[t]),this;if(0===arguments.length){var n,r=w.keys(e);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.hd=w.create(null),this.Nd=0,this}if("function"==typeof(i=e[t]))this.removeListener(t,i);else if(void 0!==i)for(s=i.length-1;s>=0;s--)this.removeListener(t,i[s]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):f.call(t,i)},r.prototype.listenerCount=f,r.prototype.eventNames=function(){return this.Nd>0?i(this.hd):[]}},586:function(t,i,e){var s,n;!function(r){var o,h={VERSION:"1.6.1"},a={},u=function(t,i){return function(){return i.apply(t,arguments)}},c=function(){var t,i,e=arguments,s=e[0];for(i=1;i<e.length;i++)for(t in e[i])!(t in s)&&e[i].hasOwnProperty(t)&&(s[t]=e[i][t]);return s},l=function(t,i){return{value:t,name:i}};h.TRACE=l(1,"TRACE"),h.DEBUG=l(2,"DEBUG"),h.INFO=l(3,"INFO"),h.TIME=l(4,"TIME"),h.WARN=l(5,"WARN"),h.ERROR=l(8,"ERROR"),h.OFF=l(99,"OFF");var d=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};d.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var i=this.context.filterLevel;return t.value>=i.value},trace:function(){this.invoke(h.TRACE,arguments)},debug:function(){this.invoke(h.DEBUG,arguments)},info:function(){this.invoke(h.INFO,arguments)},warn:function(){this.invoke(h.WARN,arguments)},error:function(){this.invoke(h.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"end"])},invoke:function(t,i){o&&this.enabledFor(t)&&o(i,c({level:t},this.context))}};var f,_=new d({filterLevel:h.OFF});(f=h).enabledFor=u(_,_.enabledFor),f.trace=u(_,_.trace),f.debug=u(_,_.debug),f.time=u(_,_.time),f.timeEnd=u(_,_.timeEnd),f.info=u(_,_.info),f.warn=u(_,_.warn),f.error=u(_,_.error),f.log=f.info,h.setHandler=function(t){o=t},h.setLevel=function(t){for(var i in _.setLevel(t),a)a.hasOwnProperty(i)&&a[i].setLevel(t)},h.getLevel=function(){return _.getLevel()},h.get=function(t){return a[t]||(a[t]=new d(c({name:t},_.context)))},h.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,i){i.name&&t.unshift("["+i.name+"]")};var i={},e=function(t,i){Function.prototype.apply.call(t,console,i)};return typeof console>"u"?function(){}:function(s,n){s=Array.prototype.slice.call(s);var r,o=console.log;n.level===h.TIME?(r=(n.name?"["+n.name+"] ":"")+s[0],"start"===s[1]?console.time?console.time(r):i[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):e(o,[r+": "+((new Date).getTime()-i[r])+"ms"])):(n.level===h.WARN&&console.warn?o=console.warn:n.level===h.ERROR&&console.error?o=console.error:n.level===h.INFO&&console.info?o=console.info:n.level===h.DEBUG&&console.debug?o=console.debug:n.level===h.TRACE&&console.trace&&(o=console.trace),t.formatter(s,n),e(o,s))}},h.useDefaults=function(t){h.setLevel(t&&t.defaultLevel||h.DEBUG),h.setHandler(h.createDefaultHandler(t))},h.setDefaults=h.useDefaults,void 0===(n="function"==typeof(s=h)?s.call(i,e,i,t):s)||(t.exports=n)}()},156:function(t,i,e){var s=this&&this.Dd||(w.create?function(t,i,e,s){void 0===s&&(s=e);var n=w.getOwnPropertyDescriptor(i,e);n&&!("get"in n?!i.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return i[e]}}),w.defineProperty(t,s,n)}:function(t,i,e,s){void 0===s&&(s=e),t[s]=i[e]}),n=this&&this.Ld||function(t,i){for(var e in t)"default"===e||w.prototype.hasOwnProperty.call(i,e)||s(i,t,e)},r=this&&this.Od||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(i,"__esModule",{value:!0}),i.Logger=void 0;var o=e(586);w.defineProperty(i,"Logger",{enumerable:!0,get:function(){return r(o).default}}),n(e(284),i),n(e(280),i),n(e(738),i),n(e(767),i)},738:(t,i)=>{var e,s;w.defineProperty(i,"__esModule",{value:!0}),i.QualityLimitationReason=void 0,(s=e||(i.QualityLimitationReason=e={}))[s.none=0]="none",s[s.cpu=1]="cpu",s[s.bandwidth=2]="bandwidth",s[s.other=3]="other"},280:(t,i)=>{w.defineProperty(i,"__esModule",{value:!0})},767:(t,i)=>{w.defineProperty(i,"__esModule",{value:!0})},185:(t,i)=>{w.defineProperty(i,"__esModule",{value:!0}),i.calculatePacketsLostRatio=i.calculateRate=i.getMediaKind=void 0,i.getMediaKind=t=>{let i=t.kind||t.mediaType;return["audio","video"].includes(i)||"inbound-rtp"!==t.type||(i=t.id.toLocaleLowerCase().includes("video")?"video":"audio"),i},i.calculateRate=(t,i,e,s)=>e&&s?(i-s)/((t-e)/1e3):0,i.calculatePacketsLostRatio=(t,i,e,s)=>0==i?0:(t-(null!=e?e:0))/(i-(null!=s?s:0))},284:function(t,i,e){var s,n,r,o,h,a,u,c,l,d,f,_,g,p,A,y,M=this&&this.Rd||function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))},T=this&&this.zd||function(t,i,e,s,n){if("m"===s)throw new b("Private method is not writable");if("a"===s&&!n)throw new b("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!n:!i.has(t))throw new b("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,e):n?n.value=e:i.set(t,e),e},S=this&&this.Bd||function(t,i,e,s){if("a"===e&&!s)throw new b("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!s:!i.has(t))throw new b("Cannot read private member from an object whose class did not declare it");return"m"===e?s:"a"===e?s.call(t):s?s.value:i.get(t)},N=this&&this.Od||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(i,"__esModule",{value:!0}),i.WebRTCStats=void 0;const I=e(7),D=N(e(586)),E=e(738),k=e(185);class L extends I.EventEmitter{constructor(t){super(),s.add(this),n.set(this,void 0),r.set(this,void 0),o.set(this,void 0),h.set(this,null),a.set(this,void 0),u.set(this,null),this.start=()=>{S(this,a,"f").info("WebRTC statistics collection is starting..."),T(this,u,null,"f"),T(this,h,v(S(this,c,"f"),S(this,r,"f")),"f")},this.stop=()=>{S(this,h,"f")&&(m(S(this,h,"f")),T(this,h,null,"f"),S(this,a,"f").info("WebRTC statistics collection has stopped."))},c.set(this,(()=>M(this,void 0,void 0,(function*(){let t,i;try{S(this,a,"f").trace("Requesting WebRTC statistics..."),t=yield S(this,n,"f").call(this),i=(new Date).toISOString()}catch(t){return S(this,a,"f").error("Problem collecting the WebRTC statistics.",t),void this.emit("error","Problem collecting the WebRTC statistics - ".concat(t))}const e=Array.from(t.values()),r={timestamp:i,input:{audio:[],video:[]},output:{audio:[],video:[]}};S(this,o,"f")&&(r.rawStats=t);for(let i=0;i<w.keys(e).length;i++){const n=e[i];switch(n.type){case"outbound-rtp":const i=n,e=(0,k.getMediaKind)(i);"audio"===e?yield S(this,s,"m",f).call(this,t,i,r):"video"===e&&(yield S(this,s,"m",_).call(this,t,i,r));break;case"inbound-rtp":const o=n;let h=(0,k.getMediaKind)(o);"audio"===h?yield S(this,s,"m",p).call(this,t,o,r):"video"===h&&(yield S(this,s,"m",A).call(this,t,o,r));break;case"candidate-pair":const a=n;a.nominated&&S(this,s,"m",y).call(this,a,r)}}T(this,u,r,"f"),this.emit("stats",r)})))),T(this,a,D.default.get("WebRTCStats"),"f"),T(this,n,t.getStats,"f"),T(this,r,t.getStatsInterval||1e3,"f"),T(this,o,!!t.includeRawStats,"f")}}i.WebRTCStats=L,n=new WeakMap,r=new WeakMap,o=new WeakMap,h=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,s=new WeakSet,l=function(t,i){if(i){const e=t.get(i);if(e)return{mimeType:e.mimeType}}return{}},d=function(t,i,e){return M(this,void 0,void 0,(function*(){var n,r,o,h;const a=(0,k.calculateRate)(i.timestamp,i.bytesSent,null==e?void 0:e.timestamp,null==e?void 0:e.totalBytesSent),u=(0,k.calculateRate)(i.timestamp,i.packetsSent,null==e?void 0:e.timestamp,null==e?void 0:e.totalPacketsSent),c=S(this,s,"m",l).call(this,t,i.codecId);return w.assign({id:i.id,timestamp:i.timestamp,mid:i.mid,totalBytesSent:i.bytesSent,bytesSentDelta:i.bytesSent-(null!==(n=null==e?void 0:e.totalBytesSent)&&void 0!==n?n:0),totalPacketsSent:i.packetsSent,packetsSentDelta:i.packetsSent-(null!==(r=null==e?void 0:e.totalPacketsSent)&&void 0!==r?r:0),bitrate:a,packetRate:u,targetBitrate:i.targetBitrate,retransmittedPacketsSent:i.retransmittedPacketsSent,retransmittedPacketsSentDelta:i.retransmittedPacketsSent-(null!==(o=null==e?void 0:e.retransmittedPacketsSent)&&void 0!==o?o:0),retransmittedBytesSent:i.retransmittedBytesSent,retransmittedBytesSentDelta:i.retransmittedBytesSent-(null!==(h=null==e?void 0:e.retransmittedBytesSent)&&void 0!==h?h:0)},c)}))},f=function(t,i,e){return M(this,void 0,void 0,(function*(){var n;const r=null===(n=S(this,u,"f"))||void 0===n?void 0:n.output.audio.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield S(this,s,"m",d).call(this,t,i,r),h=w.assign({},o);e.output.audio.push(h)}))},_=function(t,i,e){return M(this,void 0,void 0,(function*(){var n;const r=null===(n=S(this,u,"f"))||void 0===n?void 0:n.output.video.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield S(this,s,"m",d).call(this,t,i,r);let h=E.QualityLimitationReason.none;i.qualityLimitationReason&&(h=i.qualityLimitationReason);const a=w.assign(w.assign({},o),{frameWidth:i.frameWidth,frameHeight:i.frameHeight,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,qualityLimitationReason:h,qualityLimitationDurations:i.qualityLimitationDurations});e.output.video.push(a)}))},g=function(t,i,e){return M(this,void 0,void 0,(function*(){var n,r;const o=(0,k.calculateRate)(i.timestamp,i.bytesReceived,null==e?void 0:e.timestamp,null==e?void 0:e.totalBytesReceived),h=(0,k.calculateRate)(i.timestamp,i.packetsReceived,null==e?void 0:e.timestamp,null==e?void 0:e.totalPacketsReceived),a=(0,k.calculatePacketsLostRatio)(i.packetsReceived,i.packetsLost,null==e?void 0:e.totalPacketsReceived,null==e?void 0:e.totalPacketsLost),u=(null!==(n=i.packetsLost)&&void 0!==n?n:0)-(null!==(r=null==e?void 0:e.totalPacketsLost)&&void 0!==r?r:0),c=S(this,s,"m",l).call(this,t,i.codecId);return w.assign({id:i.id,timestamp:i.timestamp,mid:i.mid,trackIdentifier:i.trackIdentifier,jitter:i.jitter,jitterBufferDelay:i.jitterBufferDelay,jitterBufferEmittedCount:i.jitterBufferEmittedCount,totalBytesReceived:i.bytesReceived,totalPacketsReceived:i.packetsReceived,totalPacketsLost:i.packetsLost,bitrate:o,packetRate:h,packetLossRatio:a,packetLossDelta:u},c)}))},p=function(t,i,e){return M(this,void 0,void 0,(function*(){var n;const r=null===(n=S(this,u,"f"))||void 0===n?void 0:n.input.audio.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield S(this,s,"m",g).call(this,t,i,r);e.input.audio.push(o)}))},A=function(t,i,e){return M(this,void 0,void 0,(function*(){var n;const r=null===(n=S(this,u,"f"))||void 0===n?void 0:n.input.video.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield S(this,s,"m",g).call(this,t,i,r),h=w.assign(w.assign({},o),{keyFramesDecoded:i.keyFramesDecoded,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesDecoded:i.framesDecoded,framesDropped:i.framesDropped,framesPerSecond:i.framesPerSecond,framesReceived:i.framesReceived});e.input.video.push(h)}))},y=function(t,i){i.totalRoundTripTime=t.totalRoundTripTime,i.currentRoundTripTime=t.currentRoundTripTime,i.responsesReceived=t.responsesReceived,i.availableOutgoingBitrate=t.availableOutgoingBitrate,i.availableIncomingBitrate=t.availableIncomingBitrate}}},i={},function e(s){var n=i[s];if(void 0!==n)return n.exports;var r=i[s]={exports:{}};return t[s].call(r.exports,r,r.exports,e),r.exports}(156);var t,i},t.exports=e()}(Dt);var Et=Dt.exports;const kt=rt.get("PeerConnectionStats"),Lt="stats";class xt extends bt{init(t){if(this.initialized)return void kt.warn("PeerConnectionStats.init() has already been called. Automatic initialization occurs when the PeerConnectionStats object is constructed.");kt.info("Initializing peer connection stats");const i=this.peer;try{this.collection=new Et.WebRTCStats({getStatsInterval:t,getStats:()=>i.getStats(),includeRawStats:!0}),this.collection.on("stats",(t=>{const i=(t=>{const i=t,{input:e,output:s,rawStats:n}=i,r=f(i,["input","output","rawStats"]);return d(l({},r),{audio:{inbounds:t.input.audio.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=f(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.audio.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=f(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},video:{inbounds:t.input.video.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=f(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.video.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=f(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},raw:t.rawStats})})(t);X(i),this.emit(Lt,i)})),this.collection.start(),this.initialized=!0}catch(t){kt.error(t)}}parseStats(t){return kt.warn("The parseStats method is deprecated and will be removed in future releases."),null}stop(){kt.info("Stopping peer connection stats"),this.collection.stop()}constructor(t,i={statsIntervalMs:1e3,autoInitStats:!0}){super(),this.peer=t,this.collection=null,this.initialized=!1,i.autoInitStats&&this.init(i.statsIntervalMs)}}var Ct={},Ot={},jt={},Rt={exports:{}},Pt=Rt.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return null!=t.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return null!=t.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return null!=t.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var i="candidate:%s %d %s %d %s %d typ %s";return i+=null!=t.raddr?" raddr %s rport %d":"%v%v",i+=null!=t.tcptype?" tcptype %s":"%v",null!=t.generation&&(i+=" generation %d"),i+=null!=t["network-id"]?" network-id %d":"%v",i+=null!=t["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var i="ssrc:%d";return null!=t.attribute&&(i+=" %s",null!=t.value&&(i+=":%s")),i}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return null!=t.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(null!=t.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var i="mediaclk:";return i+=null!=t.id?"id=%s %s":"%v%s",i+=null!=t.mediaClockValue?"=%s":"",i+=null!=t.rateNumerator?" rate=%s":"",i+=null!=t.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};w.keys(Pt).forEach((function(t){Pt[t].forEach((function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")}))}));var zt=Rt.exports;!function(t){var i=function(t){return String(Number(t))===t?Number(t):t},e=function(t,e,s){var n=t.name&&t.names;t.push&&!e[t.push]?e[t.push]=[]:n&&!e[t.name]&&(e[t.name]={});var r=t.push?{}:n?e[t.name]:e;(function(t,e,s,n){if(n&&!s)e[n]=i(t[1]);else for(var r=0;r<s.length;r+=1)null!=t[r+1]&&(e[s[r]]=i(t[r+1]))})(s.match(t.reg),r,t.names,t.name),t.push&&e[t.push].push(r)},s=zt,n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(t){var i={},r=[],o=i;return t.split(/(\r\n|\r|\n)/).filter(n).forEach((function(t){var i=t[0],n=t.slice(2);"m"===i&&(r.push({rtp:[],fmtp:[]}),o=r[r.length-1]);for(var h=0;h<(s[i]||[]).length;h+=1){var a=s[i][h];if(a.reg.test(n))return e(a,o,n)}})),i.media=r,i};var r=function(t,e){var s=e.split(/=(.+)/,2);return 2===s.length?t[s[0]]=i(s[1]):1===s.length&&e.length>1&&(t[s[0]]=void 0),t};t.parseParams=function(t){return t.split(/;\s?/).reduce(r,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(t){return t.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(t){for(var e=[],s=t.split(" ").map(i),n=0;n<s.length;n+=3)e.push({component:s[n],ip:s[n+1],port:s[n+2]});return e},t.parseImageAttributes=function(t){return t.split(" ").map((function(t){return t.substring(1,t.length-1).split(",").reduce(r,{})}))},t.parseSimulcastStreamList=function(t){return t.split(";").map((function(t){return t.split(",").map((function(t){var e,s=!1;return"~"!==t[0]?e=i(t):(e=i(t.substring(1,t.length)),s=!0),{scid:e,paused:s}}))}))}}(jt);var Bt=zt,Ut=/%[sdv%]/g,Qt=function(t){var i=1,e=arguments,s=e.length;return t.replace(Ut,(function(t){if(i>=s)return t;var n=e[i];switch(i+=1,t){case"%%":return"%";case"%s":return String(n);case"%d":return Number(n);case"%v":return""}}))},Ft=function(t,i,e){var s=[t+"="+(i.format instanceof Function?i.format(i.push?e:e[i.name]):i.format)];if(i.names)for(var n=0;n<i.names.length;n+=1){var r=i.names[n];i.name?s.push(e[i.name][r]):s.push(e[i.names[n]])}else s.push(e[i.name]);return Qt.apply(null,s)},Yt=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Gt=["i","c","b","a"],Vt=jt,Wt=function(t,i){i=i||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach((function(t){null==t.payloads&&(t.payloads="")}));var e=i.outerOrder||Yt,s=i.innerOrder||Gt,n=[];return e.forEach((function(i){Bt[i].forEach((function(e){e.name in t&&null!=t[e.name]?n.push(Ft(i,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){n.push(Ft(i,e,t))}))}))})),t.media.forEach((function(t){n.push(Ft("m",Bt.m[0],t)),s.forEach((function(i){Bt[i].forEach((function(e){e.name in t&&null!=t[e.name]?n.push(Ft(i,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){n.push(Ft(i,e,t))}))}))}))})),n.join("\r\n")+"\r\n"};Ot.write=Wt,Ot.parse=Vt.parse,Ot.parseParams=Vt.parseParams,Ot.parseFmtpConfig=Vt.parseFmtpConfig,Ot.parsePayloads=Vt.parsePayloads,Ot.parseRemoteCandidates=Vt.parseRemoteCandidates,Ot.parseImageAttributes=Vt.parseImageAttributes,Ot.parseSimulcastStreamList=Vt.parseSimulcastStreamList;let Ht=class t{equals(t){return t.foundation===this.foundation&&t.componentId===this.componentId&&t.transport===this.transport&&t.priority===this.priority&&t.address===this.address&&t.port===this.port&&t.type===this.type&&t.relAddr===this.relAddr&&t.relPort===this.relPort}clone(){return new t(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.relAddr,this.relPort)}plain(){const t={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type};return this.relAddr&&(t.relAddr=this.relAddr),this.relPort&&(t.relPort=this.relPort),t}getFoundation(){return this.foundation}getComponentId(){return this.componentId}getTransport(){return this.transport}getPriority(){return this.priority}getAddress(){return this.address}getPort(){return this.port}getType(){return this.type}getRelAddr(){return this.relAddr}getRelPort(){return this.relPort}constructor(t,i,e,s,n,r,o,h,a){this.foundation=t,this.componentId=i,this.transport=e,this.priority=s,this.address=n,this.port=r,this.type=o,this.relAddr=h,this.relPort=a}};Ht.expand=function(t){return"CandidateInfo"===t.constructor.name?t:new Ht(t.foundation,t.componentId,t.transport,t.priority,t.address,t.port,t.type,t.relAddr,t.relPort)},Ht.clone=function(t){return"CandidateInfo"===t.constructor.name?t.clone():Ht.expand(t)};var Xt=Ht;let Zt=class t{clone(){return new t(this.id,this.params)}plain(){return this.params.length?{id:this.id,params:this.params}:{id:this.id}}getId(){return this.id}getParams(){return this.params}constructor(t,i){this.id=t,this.params=i||[]}};Zt.expand=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t:new Zt(t.id,t.params)},Zt.clone=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t.clone():Zt.expand(t)};var qt=Zt;const Kt=qt;let Jt=class t{clone(){const i=new t(this.codec,this.type,this.params);this.hasRTX()&&i.setRTX(this.getRTX());for(const t of this.rtcpfbs)i.addRTCPFeedback(t.clone());return this.hasChannels()&&i.setChannels(this.getChannels()),i}plain(){const t={codec:this.codec,type:this.type};this.rtx&&(t.rtx=this.rtx),this.channels&&(t.channels=this.channels),w.keys(this.params).length&&(t.params=this.params);for(const i of this.rtcpfbs)t.rtcpfbs||(t.rtcpfbs=[]),t.rtcpfbs.push(i.plain());return t}setRTX(t){this.rtx=t}getType(){return this.type}setType(t){this.type=t}getCodec(){return this.codec}getParams(){return this.params}addParams(t){for(const i in t)this.params[i]=t[i]}addParam(t,i){this.params[t]=i}hasParam(t){return w.hasOwnProperty.call(this.params,t)}getParam(t,i){if(void 0===i&&(i=void 0),this.hasParam(t))return this.params[t];if(void 0===i)throw new g("param ".concat(t," not found and no default value provided"));return""+i}hasRTX(){return this.rtx}getRTX(){return this.rtx}hasChannels(){return this.channels}getChannels(){return this.channels}setChannels(t){this.channels=t}addRTCPFeedback(t){this.rtcpfbs.add(t)}getRTCPFeedbacks(){return this.rtcpfbs}constructor(t,i,e){this.codec=t,this.type=i,this.params={},this.rtcpfbs=new Set,e&&this.addParams(e)}};Jt.expand=function(t){if("CodecInfo"===t.constructor.name)return t;const i=new Jt(t.codec,t.type,t.params);t.rtx&&i.setRTX(t.rtx),t.channels&&i.setChannels(t.channels);for(const e of t.rtcpfbs||[]){const t=Kt.expand(e);i.addRTCPFeedback(t)}return i},Jt.clone=function(t){return"CodecInfo"===t.constructor.name?t.clone():Jt.expand(t)},Jt.MapFromNames=function(t,i,e){var s;const n=new Map;let r=96;for(const o of t){let t;const h=o.split(";"),a=h.shift().toLowerCase().trim();t="pcmu"===a?0:"pcma"===a?8:++r;const u=new Jt(a,t);"opus"===a?u.setChannels(2):"multiopus"===a&&u.setChannels(6),i&&"ulpfec"!==a&&"flexfec-03"!==a&&"red"!==a&&u.setRTX(++r);for(const t of e||[])u.addRTCPFeedback(new Kt(t.id,t.params));for(const t of h){let i=t.split("=");u.addParam(i[0].trim(),null===(s=i[1])||void 0===s?void 0:s.trim())}n.set(t,u)}return n};var $t=Jt,ti=function t(){var i=this;if(!(this instanceof t))return new(Function.prototype.bind.apply(t,[null].concat(Array.prototype.slice.call(arguments))));Array.from(arguments).forEach((function(t){i[t]=Symbol.for("Ud"+t)}))};const ii=ti("ACTIVE","PASSIVE","ACTPASS","INACTIVE");ii.byValue=function(t){switch(t){case ii.ACTIVE:case ii.PASSIVE:case ii.ACTPASS:case ii.INACTIVE:return t}return ii[t.toUpperCase()]},ii.toString=function(t){switch(t){case ii.ACTIVE:return"active";case ii.PASSIVE:return"passive";case ii.ACTPASS:return"actpass";case ii.INACTIVE:return"inactive"}},ii.reverse=function(t,i){switch(t){case ii.ACTIVE:return ii.PASSIVE;case ii.PASSIVE:return ii.ACTIVE;case ii.ACTPASS:return i?ii.ACTIVE:ii.PASSIVE;case ii.INACTIVE:return ii.INACTIVE}};var ei=ii;const si=ei;let ni=class t{clone(){return new t(this.setup,this.hash,this.fingerprint)}plain(){return{setup:si.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}}getFingerprint(){return this.fingerprint}getHash(){return this.hash}getSetup(){return this.setup}setSetup(t){this.setup=t}constructor(t,i,e){this.setup=t,this.hash=i,this.fingerprint=e}};ni.expand=function(t){return"DTLSInfo"===t.constructor.name?t:new ni(t.setup?si.byValue(t.setup):si.ACTPASS,t.hash,t.fingerprint)},ni.clone=function(t){return"DTLSInfo"===t.constructor.name?t.clone():ni.expand(t)};var ri=ni;let oi=class t{clone(){return new t(this.tag,this.suite,this.keyParams,this.sessionParams)}plain(){return{tag:this.tag,suite:this.suite,keyParams:this.keyParams,sessionParams:this.sessionParams}}getSessionParams(){return this.sessionParams}getKeyParams(){return this.keyParams}getSuite(){return this.suite}getTag(){return this.tag}constructor(t,i,e,s){this.tag=t,this.suite=i,this.keyParams=e,this.sessionParams=s}};oi.expand=function(t){return"CryptoInfo"===t.constructor.name?t:new oi(t.tag,t.suite,t.keyParams,t.sessionParams)},oi.clone=function(t){return"CryptoInfo"===t.constructor.name?t.clone():oi.expand(t)};for(var hi=oi,ai={exports:{}},ui={exports:{}},ci={},li={byteLength:function(t){var i=vi(t),e=i[0],s=i[1];return 3*(e+s)/4-s},toByteArray:function(t){var i,e,s=vi(t),n=s[0],r=s[1],o=new _i(function(t,i,e){return 3*(i+e)/4-e}(0,n,r)),h=0,a=r>0?n-4:n;for(e=0;e<a;e+=4)i=fi[t.charCodeAt(e)]<<18|fi[t.charCodeAt(e+1)]<<12|fi[t.charCodeAt(e+2)]<<6|fi[t.charCodeAt(e+3)],o[h++]=i>>16&255,o[h++]=i>>8&255,o[h++]=255&i;return 2===r&&(i=fi[t.charCodeAt(e)]<<2|fi[t.charCodeAt(e+1)]>>4,o[h++]=255&i),1===r&&(i=fi[t.charCodeAt(e)]<<10|fi[t.charCodeAt(e+1)]<<4|fi[t.charCodeAt(e+2)]>>2,o[h++]=i>>8&255,o[h++]=255&i),o},fromByteArray:function(t){for(var i,e=t.length,s=e%3,n=[],r=16383,o=0,h=e-s;o<h;o+=r)n.push(pi(t,o,o+r>h?h:o+r));return 1===s?(i=t[e-1],n.push(di[i>>2]+di[i<<4&63]+"==")):2===s&&(i=(t[e-2]<<8)+t[e-1],n.push(di[i>>10]+di[i>>4&63]+di[i<<2&63]+"=")),n.join("")}},di=[],fi=[],_i=typeof j<"u"?j:Array,gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wi=0;wi<64;++wi)di[wi]=gi[wi],fi[gi.charCodeAt(wi)]=wi;function vi(t){var i=t.length;if(i%4>0)throw new g("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");return-1===e&&(e=i),[e,e===i?0:4-e%4]}function mi(t){return di[t>>18&63]+di[t>>12&63]+di[t>>6&63]+di[63&t]}function pi(t,i,e){for(var s,n=[],r=i;r<e;r+=3)s=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),n.push(mi(s));return n.join("")}fi[45]=62,fi[95]=63;var Ai={read:function(t,i,e,s,n){var r,o,h=8*n-s-1,a=(1<<h)-1,u=a>>1,c=-7,l=e?n-1:0,d=e?-1:1,f=t[i+l];for(l+=d,r=f&(1<<-c)-1,f>>=-c,c+=h;c>0;r=256*r+t[i+l],l+=d,c-=8);for(o=r&(1<<-c)-1,r>>=-c,c+=s;c>0;o=256*o+t[i+l],l+=d,c-=8);if(0===r)r=1-u;else{if(r===a)return o?NaN:1/0*(f?-1:1);o+=_.pow(2,s),r-=u}return(f?-1:1)*o*_.pow(2,r-s)},write:function(t,i,e,s,n,r){var o,h,a,u=8*r-n-1,c=(1<<u)-1,l=c>>1,d=23===n?_.pow(2,-24)-_.pow(2,-77):0,f=s?0:r-1,g=s?1:-1,w=i<0||0===i&&1/i<0?1:0;for(i=_.abs(i),S(i)||i===1/0?(h=S(i)?1:0,o=c):(o=_.floor(_.log(i)/_.LN2),i*(a=_.pow(2,-o))<1&&(o--,a*=2),(i+=o+l>=1?d/a:d*_.pow(2,1-l))*a>=2&&(o++,a/=2),o+l>=c?(h=0,o=c):o+l>=1?(h=(i*a-1)*_.pow(2,n),o+=l):(h=i*_.pow(2,l-1)*_.pow(2,n),o=0));n>=8;t[e+f]=255&h,f+=g,h/=256,n-=8);for(o=o<<n|h,u+=n;u>0;t[e+f]=255&o,f+=g,o/=256,u-=8);t[e+f-g]|=128*w}};(function(t){var i=li,e=Ai,s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},t.INSPECT_MAX_BYTES=50;var n=2147483647;function r(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');var i=new j(t);return w.setPrototypeOf(i,o.prototype),i}function o(t,i,e){if("number"==typeof t){if("string"==typeof i)throw new b('The "string" argument must be of type string. Received type number');return u(t)}return h(t,i,e)}function h(t,i,e){if("string"==typeof t)return function(t,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!o.isEncoding(i))throw new b("Unknown encoding: "+i);var e=0|f(t,i),s=r(e),n=s.write(t,i);return n!==e&&(s=s.slice(0,n)),s}(t,i);if(ArrayBuffer.isView(t))return function(t){if(V(t,j)){var i=new j(t);return l(i.buffer,i.byteOffset,i.byteLength)}return c(t)}(t);if(null==t)throw new b("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(V(t,ArrayBuffer)||t&&V(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(V(t,SharedArrayBuffer)||t&&V(t.buffer,SharedArrayBuffer)))return l(t,i,e);if("number"==typeof t)throw new b('The "value" argument must not be of type number. Received type number');var s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return o.from(s,i,e);var n=function(t){if(o.isBuffer(t)){var i=0|d(t.length),e=r(i);return 0===e.length||t.copy(e,0,0,i),e}return void 0!==t.length?"number"!=typeof t.length||W(t.length)?r(0):c(t):"Buffer"===t.type&&Array.isArray(t.data)?c(t.data):void 0}(t);if(n)return n;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),i,e);throw new b("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new b('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),r(t<0?0:0|d(t))}function c(t){for(var i=t.length<0?0:0|d(t.length),e=r(i),s=0;s<i;s+=1)e[s]=255&t[s];return e}function l(t,i,e){if(i<0||t.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<i+(e||0))throw new RangeError('"length" is outside of buffer bounds');var s;return s=void 0===i&&void 0===e?new j(t):void 0===e?new j(t,i):new j(t,i,e),w.setPrototypeOf(s,o.prototype),s}function d(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function f(t,i){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||V(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new b('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var e=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===e)return 0;for(var n=!1;;)switch(i){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return Y(t).length;default:if(n)return s?-1:F(t).length;i=(""+i).toLowerCase(),n=!0}}function v(t,i,e){var s=!1;if((void 0===i||i<0)&&(i=0),i>this.length||((void 0===e||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(i>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,i,e);case"utf8":case"utf-8":return D(this,i,e);case"ascii":return k(this,i,e);case"latin1":case"binary":return L(this,i,e);case"base64":return I(this,i,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,i,e);default:if(s)throw new b("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function m(t,i,e){var s=t[i];t[i]=t[e],t[e]=s}function p(t,i,e,s,n){if(0===t.length)return-1;if("string"==typeof e?(s=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),W(e=+e)&&(e=n?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(n)return-1;e=t.length-1}else if(e<0){if(!n)return-1;e=0}if("string"==typeof i&&(i=o.from(i,s)),o.isBuffer(i))return 0===i.length?-1:A(t,i,e,s,n);if("number"==typeof i)return i&=255,"function"==typeof j.prototype.indexOf?n?j.prototype.indexOf.call(t,i,e):j.prototype.lastIndexOf.call(t,i,e):A(t,[i],e,s,n);throw new b("val must be string, number or Buffer")}function A(t,i,e,s,n){var r,o=1,h=t.length,a=i.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||i.length<2)return-1;o=2,h/=2,a/=2,e/=2}function u(t,i){return 1===o?t[i]:t.readUInt16BE(i*o)}if(n){var c=-1;for(r=e;r<h;r++)if(u(t,r)===u(i,-1===c?0:r-c)){if(-1===c&&(c=r),r-c+1===a)return c*o}else-1!==c&&(r-=r-c),c=-1}else for(e+a>h&&(e=h-a),r=e;r>=0;r--){for(var l=!0,d=0;d<a;d++)if(u(t,r+d)!==u(i,d)){l=!1;break}if(l)return r}return-1}function y(t,i,e,s){e=Number(e)||0;var n=t.length-e;s?(s=Number(s))>n&&(s=n):s=n;var r=i.length;s>r/2&&(s=r/2);for(var o=0;o<s;++o){var h=x(i.substr(2*o,2),16);if(W(h))return o;t[e+o]=h}return o}function M(t,i,e,s){return G(F(i,t.length-e),t,e,s)}function T(t,i,e,s){return G(function(t){for(var i=[],e=0;e<t.length;++e)i.push(255&t.charCodeAt(e));return i}(i),t,e,s)}function S(t,i,e,s){return G(Y(i),t,e,s)}function N(t,i,e,s){return G(function(t,i){for(var e,s,n,r=[],o=0;o<t.length&&!((i-=2)<0);++o)e=t.charCodeAt(o),s=e>>8,n=e%256,r.push(n),r.push(s);return r}(i,t.length-e),t,e,s)}function I(t,e,s){return 0===e&&s===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,s))}function D(t,i,e){e=_.min(t.length,e);for(var s=[],n=i;n<e;){var r,o,h,a,u=t[n],c=null,l=u>239?4:u>223?3:u>191?2:1;if(n+l<=e)switch(l){case 1:u<128&&(c=u);break;case 2:128==(192&(r=t[n+1]))&&(a=(31&u)<<6|63&r)>127&&(c=a);break;case 3:r=t[n+1],o=t[n+2],128==(192&r)&&128==(192&o)&&(a=(15&u)<<12|(63&r)<<6|63&o)>2047&&(a<55296||a>57343)&&(c=a);break;case 4:r=t[n+1],o=t[n+2],h=t[n+3],128==(192&r)&&128==(192&o)&&128==(192&h)&&(a=(15&u)<<18|(63&r)<<12|(63&o)<<6|63&h)>65535&&a<1114112&&(c=a)}null===c?(c=65533,l=1):c>65535&&(c-=65536,s.push(c>>>10&1023|55296),c=56320|1023&c),s.push(c),n+=l}return function(t){var i=t.length;if(i<=E)return String.fromCharCode.apply(String,t);for(var e="",s=0;s<i;)e+=String.fromCharCode.apply(String,t.slice(s,s+=E));return e}(s)}t.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{var t=new j(1),i={foo:function(){return 42}};return w.setPrototypeOf(i,j.prototype),w.setPrototypeOf(t,i),42===t.foo()}catch(t){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),w.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),w.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,i,e){return h(t,i,e)},w.setPrototypeOf(o.prototype,j.prototype),w.setPrototypeOf(o,j),o.alloc=function(t,i,e){return function(t,i,e){return a(t),t<=0?r(t):void 0!==i?"string"==typeof e?r(t).fill(i,e):r(t).fill(i):r(t)}(t,i,e)},o.allocUnsafe=function(t){return u(t)},o.allocUnsafeSlow=function(t){return u(t)},o.isBuffer=function(t){return null!=t&&!0===t.Qd&&t!==o.prototype},o.compare=function(t,i){if(V(t,j)&&(t=o.from(t,t.offset,t.byteLength)),V(i,j)&&(i=o.from(i,i.offset,i.byteLength)),!o.isBuffer(t)||!o.isBuffer(i))throw new b('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===i)return 0;for(var e=t.length,s=i.length,n=0,r=_.min(e,s);n<r;++n)if(t[n]!==i[n]){e=t[n],s=i[n];break}return e<s?-1:s<e?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,i){if(!Array.isArray(t))throw new b('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var e;if(void 0===i)for(i=0,e=0;e<t.length;++e)i+=t[e].length;var s=o.allocUnsafe(i),n=0;for(e=0;e<t.length;++e){var r=t[e];if(V(r,j))n+r.length>s.length?o.from(r).copy(s,n):j.prototype.set.call(s,r,n);else{if(!o.isBuffer(r))throw new b('"list" argument must be an Array of Buffers');r.copy(s,n)}n+=r.length}return s},o.byteLength=f,o.prototype.Qd=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<t;i+=2)m(this,i,i+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<t;i+=4)m(this,i,i+3),m(this,i+1,i+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<t;i+=8)m(this,i,i+7),m(this,i+1,i+6),m(this,i+2,i+5),m(this,i+3,i+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?D(this,0,t):v.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new b("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var i="",e=t.INSPECT_MAX_BYTES;return i=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(i+=" ... "),"<Buffer "+i+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(t,i,e,s,n){if(V(t,j)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new b('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===i&&(i=0),void 0===e&&(e=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),i<0||e>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&i>=e)return 0;if(s>=n)return-1;if(i>=e)return 1;if(this===t)return 0;for(var r=(n>>>=0)-(s>>>=0),h=(e>>>=0)-(i>>>=0),a=_.min(r,h),u=this.slice(s,n),c=t.slice(i,e),l=0;l<a;++l)if(u[l]!==c[l]){r=u[l],h=c[l];break}return r<h?-1:h<r?1:0},o.prototype.includes=function(t,i,e){return-1!==this.indexOf(t,i,e)},o.prototype.indexOf=function(t,i,e){return p(this,t,i,e,!0)},o.prototype.lastIndexOf=function(t,i,e){return p(this,t,i,e,!1)},o.prototype.write=function(t,i,e,s){if(void 0===i)s="utf8",e=this.length,i=0;else if(void 0===e&&"string"==typeof i)s=i,e=this.length,i=0;else{if(!isFinite(i))throw new g("Buffer.write(string, encoding, offset[, length]) is no longer supported");i>>>=0,isFinite(e)?(e>>>=0,void 0===s&&(s="utf8")):(s=e,e=void 0)}var n=this.length-i;if((void 0===e||e>n)&&(e=n),t.length>0&&(e<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var r=!1;;)switch(s){case"hex":return y(this,t,i,e);case"utf8":case"utf-8":return M(this,t,i,e);case"ascii":case"latin1":case"binary":return T(this,t,i,e);case"base64":return S(this,t,i,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,i,e);default:if(r)throw new b("Unknown encoding: "+s);s=(""+s).toLowerCase(),r=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.Fd||this,0)}};var E=4096;function k(t,i,e){var s="";e=_.min(t.length,e);for(var n=i;n<e;++n)s+=String.fromCharCode(127&t[n]);return s}function L(t,i,e){var s="";e=_.min(t.length,e);for(var n=i;n<e;++n)s+=String.fromCharCode(t[n]);return s}function C(t,i,e){var s=t.length;(!i||i<0)&&(i=0),(!e||e<0||e>s)&&(e=s);for(var n="",r=i;r<e;++r)n+=H[t[r]];return n}function O(t,i,e){for(var s=t.slice(i,e),n="",r=0;r<s.length-1;r+=2)n+=String.fromCharCode(s[r]+256*s[r+1]);return n}function R(t,i,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+i>e)throw new RangeError("Trying to access beyond buffer length")}function P(t,i,e,s,n,r){if(!o.isBuffer(t))throw new b('"buffer" argument must be a Buffer instance');if(i>n||i<r)throw new RangeError('"value" argument is out of bounds');if(e+s>t.length)throw new RangeError("Index out of range")}function z(t,i,e,s,n,r){if(e+s>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function B(t,i,s,n,r){return i=+i,s>>>=0,r||z(t,0,s,4),e.write(t,i,s,n,23,4),s+4}function U(t,i,s,n,r){return i=+i,s>>>=0,r||z(t,0,s,8),e.write(t,i,s,n,52,8),s+8}o.prototype.slice=function(t,i){var e=this.length;(t=~~t)<0?(t+=e)<0&&(t=0):t>e&&(t=e),(i=void 0===i?e:~~i)<0?(i+=e)<0&&(i=0):i>e&&(i=e),i<t&&(i=t);var s=this.subarray(t,i);return w.setPrototypeOf(s,o.prototype),s},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,i,e){t>>>=0,i>>>=0,e||R(t,i,this.length);for(var s=this[t],n=1,r=0;++r<i&&(n*=256);)s+=this[t+r]*n;return s},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,i,e){t>>>=0,i>>>=0,e||R(t,i,this.length);for(var s=this[t+--i],n=1;i>0&&(n*=256);)s+=this[t+--i]*n;return s},o.prototype.readUint8=o.prototype.readUInt8=function(t,i){return t>>>=0,i||R(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,i){return t>>>=0,i||R(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,i){return t>>>=0,i||R(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,i){return t>>>=0,i||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,i){return t>>>=0,i||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,i,e){t>>>=0,i>>>=0,e||R(t,i,this.length);for(var s=this[t],n=1,r=0;++r<i&&(n*=256);)s+=this[t+r]*n;return s>=(n*=128)&&(s-=_.pow(2,8*i)),s},o.prototype.readIntBE=function(t,i,e){t>>>=0,i>>>=0,e||R(t,i,this.length);for(var s=i,n=1,r=this[t+--s];s>0&&(n*=256);)r+=this[t+--s]*n;return r>=(n*=128)&&(r-=_.pow(2,8*i)),r},o.prototype.readInt8=function(t,i){return t>>>=0,i||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,i){t>>>=0,i||R(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},o.prototype.readInt16BE=function(t,i){t>>>=0,i||R(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},o.prototype.readInt32LE=function(t,i){return t>>>=0,i||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,i){return t>>>=0,i||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,i){return t>>>=0,i||R(t,4,this.length),e.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,i){return t>>>=0,i||R(t,4,this.length),e.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,i){return t>>>=0,i||R(t,8,this.length),e.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,i){return t>>>=0,i||R(t,8,this.length),e.read(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,i,e,s){t=+t,i>>>=0,e>>>=0,s||P(this,t,i,e,_.pow(2,8*e)-1,0);var n=1,r=0;for(this[i]=255&t;++r<e&&(n*=256);)this[i+r]=t/n&255;return i+e},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,i,e,s){t=+t,i>>>=0,e>>>=0,s||P(this,t,i,e,_.pow(2,8*e)-1,0);var n=e-1,r=1;for(this[i+n]=255&t;--n>=0&&(r*=256);)this[i+n]=t/r&255;return i+e},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,1,255,0),this[i]=255&t,i+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,2,65535,0),this[i]=255&t,this[i+1]=t>>>8,i+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,2,65535,0),this[i]=t>>>8,this[i+1]=255&t,i+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,4,4294967295,0),this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=255&t,i+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,4,4294967295,0),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},o.prototype.writeIntLE=function(t,i,e,s){if(t=+t,i>>>=0,!s){var n=_.pow(2,8*e-1);P(this,t,i,e,n-1,-n)}var r=0,o=1,h=0;for(this[i]=255&t;++r<e&&(o*=256);)t<0&&0===h&&0!==this[i+r-1]&&(h=1),this[i+r]=(t/o>>0)-h&255;return i+e},o.prototype.writeIntBE=function(t,i,e,s){if(t=+t,i>>>=0,!s){var n=_.pow(2,8*e-1);P(this,t,i,e,n-1,-n)}var r=e-1,o=1,h=0;for(this[i+r]=255&t;--r>=0&&(o*=256);)t<0&&0===h&&0!==this[i+r+1]&&(h=1),this[i+r]=(t/o>>0)-h&255;return i+e},o.prototype.writeInt8=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,1,127,-128),t<0&&(t=255+t+1),this[i]=255&t,i+1},o.prototype.writeInt16LE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,2,32767,-32768),this[i]=255&t,this[i+1]=t>>>8,i+2},o.prototype.writeInt16BE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,2,32767,-32768),this[i]=t>>>8,this[i+1]=255&t,i+2},o.prototype.writeInt32LE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,4,2147483647,-2147483648),this[i]=255&t,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24,i+4},o.prototype.writeInt32BE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},o.prototype.writeFloatLE=function(t,i,e){return B(this,t,i,!0,e)},o.prototype.writeFloatBE=function(t,i,e){return B(this,t,i,!1,e)},o.prototype.writeDoubleLE=function(t,i,e){return U(this,t,i,!0,e)},o.prototype.writeDoubleBE=function(t,i,e){return U(this,t,i,!1,e)},o.prototype.copy=function(t,i,e,s){if(!o.isBuffer(t))throw new b("argument should be a Buffer");if(e||(e=0),!s&&0!==s&&(s=this.length),i>=t.length&&(i=t.length),i||(i=0),s>0&&s<e&&(s=e),s===e||0===t.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-i<s-e&&(s=t.length-i+e);var n=s-e;return this===t&&"function"==typeof j.prototype.copyWithin?this.copyWithin(i,e,s):j.prototype.set.call(t,this.subarray(e,s),i),n},o.prototype.fill=function(t,i,e,s){if("string"==typeof t){if("string"==typeof i?(s=i,i=0,e=this.length):"string"==typeof e&&(s=e,e=this.length),void 0!==s&&"string"!=typeof s)throw new b("encoding must be a string");if("string"==typeof s&&!o.isEncoding(s))throw new b("Unknown encoding: "+s);if(1===t.length){var n=t.charCodeAt(0);("utf8"===s&&n<128||"latin1"===s)&&(t=n)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(i<0||this.length<i||this.length<e)throw new RangeError("Out of range index");if(e<=i)return this;var r;if(i>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(r=i;r<e;++r)this[r]=t;else{var h=o.isBuffer(t)?t:o.from(t,s),a=h.length;if(0===a)throw new b('The value "'+t+'" is invalid for argument "value"');for(r=0;r<e-i;++r)this[r+i]=h[r%a]}return this};var Q=/[^+/0-9A-Za-z-_]/g;function F(t,i){i=i||1/0;for(var e,s=t.length,n=null,r=[],o=0;o<s;++o){if((e=t.charCodeAt(o))>55295&&e<57344){if(!n){if(e>56319){(i-=3)>-1&&r.push(239,191,189);continue}if(o+1===s){(i-=3)>-1&&r.push(239,191,189);continue}n=e;continue}if(e<56320){(i-=3)>-1&&r.push(239,191,189),n=e;continue}e=65536+(n-55296<<10|e-56320)}else n&&(i-=3)>-1&&r.push(239,191,189);if(n=null,e<128){if((i-=1)<0)break;r.push(e)}else if(e<2048){if((i-=2)<0)break;r.push(e>>6|192,63&e|128)}else if(e<65536){if((i-=3)<0)break;r.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new g("Invalid code point");if((i-=4)<0)break;r.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return r}function Y(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(Q,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,i,e,s){for(var n=0;n<s&&!(n+e>=i.length||n>=t.length);++n)i[n+e]=t[n];return n}function V(t,i){return t instanceof i||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===i.name}function W(t){return t!=t}var H=function(){for(var t="0123456789abcdef",i=new Array(256),e=0;e<16;++e)for(var s=16*e,n=0;n<16;++n)i[s+n]=t[e]+t[n];return i}()})(ci),function(t,i){var e=ci,s=e.Buffer;function n(t,i){for(var e in t)i[e]=t[e]}function r(t,i,e){return s(t,i,e)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=e:(n(e,i),i.Buffer=r),r.prototype=w.create(s.prototype),n(s,r),r.from=function(t,i,e){if("number"==typeof t)throw new b("Argument must not be a number");return s(t,i,e)},r.alloc=function(t,i,e){if("number"!=typeof t)throw new b("Argument must be a number");var n=s(t);return void 0!==i?"string"==typeof e?n.fill(i,e):n.fill(i):n.fill(0),n},r.allocUnsafe=function(t){if("number"!=typeof t)throw new b("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new b("Argument must be a number");return e.SlowBuffer(t)}}(ui,ui.exports);var yi=65536,Mi=ui.exports.Buffer,bi=p.crypto||p.msCrypto;bi&&bi.getRandomValues?ai.exports=function(t,i){if(t>4294967295)throw new RangeError("requested too many random bytes");var e=Mi.allocUnsafe(t);if(t>0)if(t>yi)for(var s=0;s<t;s+=yi)bi.getRandomValues(e.slice(s,s+yi));else bi.getRandomValues(e);return"function"==typeof i?process.nextTick((function(){i(null,e)})):e}:ai.exports=function(){throw new g("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")};const Ti=ai.exports;let Si=class t{clone(){const i=new t(this.ufrag,this.pwd);return i.setLite(this.lite),i.setEndOfCandidates(this.endOfCandidates),i}plain(){const t={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(t.lite=this.lite),this.endOfCandidates&&(t.endOfCandidates=this.endOfCandidates),t}getUfrag(){return this.ufrag}getPwd(){return this.pwd}isLite(){return this.lite}setLite(t){this.lite=t}isEndOfCandidates(){return this.endOfCandidates}setEndOfCandidates(t){this.endOfCandidates=t}constructor(t,i){this.ufrag=t,this.pwd=i,this.lite=!1,this.endOfCandidates=!1}};Si.generate=function(t){const i=new Si,e=Ti(8),s=Ti(24);return i.ufrag=e.toString("hex"),i.pwd=s.toString("hex"),i.lite=t,i},Si.expand=function(t){if("ICEInfo"===t.constructor.name)return t;const i=new Si(t.ufrag,t.pwd);return i.setLite(t.lite),i.setEndOfCandidates(t.endOfCandidates),i},Si.clone=function(t){return"ICEInfo"===t.constructor.name?t.clone():Si.expand(t)};var Ni=Si;const Ii=ti("SEND","RECV");Ii.byValue=function(t){return Ii[t.toUpperCase()]},Ii.toString=function(t){switch(t){case Ii.SEND:return"send";case Ii.RECV:return"recv"}},Ii.reverse=function(t){switch(t){case Ii.SEND:return Ii.RECV;case Ii.RECV:return Ii.SEND}};var Di=Ii;const Ei=Di;let ki=class t{clone(){var i=new t(this.id,this.direction);return i.setFormats(this.formats),i.setParams(this.params),i}plain(){var t={id:this.id,direction:Ei.toString(this.direction)};for(var[i,e]of(this.formats&&(t.formats=this.formats),this.params.entries()))t.params||(t.params={}),t.params[i]=e;return t}getId(){return this.id}getDirection(){return this.direction}setDirection(t){this.direction=t}getFormats(){return this.formats}setFormats(t){this.formats=[];for(let i=0;i<t.length;++i)this.formats.push(x(t[i]))}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,i){this.params.set(t,i)}constructor(t,i){this.id=t,this.direction=i,this.formats=[],this.params=new Map}};ki.expand=function(t){if("RIDInfo"===t.constructor.name)return t;const i=new ki(t.id,Ei.byValue(t.direction));for(const[e,s]of w.entries(t.params||{}))i.addParam(e,s);return t.formats&&i.setFormats(t.formats),i},ki.clone=function(t){return"RIDInfo"===t.constructor.name?t.clone():ki.expand(t)};var Li=ki;let xi=class t{clone(){return new t(this.id,this.paused)}plain(){return{id:this.id,paused:this.paused}}isPaused(){return this.paused}getId(){return this.id}constructor(t,i){this.paused=i,this.id=t}};xi.expand=function(t){return"SimulcastStreamInfo"===t.constructor.name?t:new xi(t.id,t.paused)},xi.clone=function(t){return"SimulcastStreamInfo"===t.constructor.name?t.clone():xi.expand(t)};var Ci=xi;const Oi=Ci,ji=Di;let Ri=class t{clone(){const i=new t;for(const t of this.send)i.addSimulcastAlternativeStreams(ji.SEND,t.map((t=>t.clone())));for(const t of this.recv)i.addSimulcastAlternativeStreams(ji.RECV,t.map((t=>t.clone())));return i}plain(){const t={send:[],recv:[]};for(const i of this.send)t.send.push(i.map((t=>t.plain())));for(const i of this.recv)t.recv.push(i.map((t=>t.plain())));return t}addSimulcastAlternativeStreams(t,i){return t===ji.SEND?this.send.push(i):this.recv.push(i)}addSimulcastStream(t,i){return t===ji.SEND?this.send.push([i]):this.recv.push([i])}getSimulcastStreams(t){return t===ji.SEND?this.send:this.recv}constructor(){this.send=[],this.recv=[]}};Ri.expand=function(t){if("SimulcastInfo"===t.constructor.name)return t;const i=new Ri;for(const e of t.send||[])i.addSimulcastAlternativeStreams(ji.SEND,e.map(Oi.expand));for(const e of t.recv||[])i.addSimulcastAlternativeStreams(ji.RECV,e.map(Oi.expand));return i},Ri.clone=function(t){return"SimulcastInfo"===t.constructor.name?t.clone():Ri.expand(t)};var Pi=Ri;const zi=ti("SENDRECV","SENDONLY","RECVONLY","INACTIVE");zi.byValue=function(t){return zi[t.toUpperCase()]},zi.toString=function(t){switch(t){case zi.SENDRECV:return"sendrecv";case zi.SENDONLY:return"sendonly";case zi.RECVONLY:return"recvonly";case zi.INACTIVE:return"inactive"}},zi.reverse=function(t){switch(t){case zi.SENDRECV:return zi.SENDRECV;case zi.SENDONLY:return zi.RECVONLY;case zi.RECVONLY:return zi.SENDONLY;case zi.INACTIVE:return zi.INACTIVE}};var Bi=zi;let Ui=class t{clone(){return new t(this.port,this.maxMessageSize)}plain(){return{port:this.port,maxMessageSize:this.maxMessageSize}}getPort(){return this.port}getMaxMessageSize(){return this.maxMessageSize}constructor(t,i){this.port=t,this.maxMessageSize=i}};Ui.expand=function(t){return"DataChannelInfo"===t.constructor.name?t:new Ui(t.port,t.maxMessageSize)},Ui.clone=function(t){return"DataChannelInfo"===t.constructor.name?t.clone():Ui.expand(t)};var Qi=Ui;const Fi=$t,Yi=Li,Gi=Pi,Vi=Bi,Wi=Di,Hi=Qi;let Xi=class t{clone(){const i=new t(this.id,this.type);i.setDirection(this.direction),i.setBitrate(this.bitrate);for(const t of this.codecs.values())i.addCodec(t.clone());for(const[t,e]of this.extensions.entries())i.addExtension(t,e);for(const t of this.rids.values())i.addRID(t.clone());return this.simulcast&&i.setSimulcast(this.simulcast.clone()),this.control&&i.setControl(this.control),this.dataChannel&&i.setDataChannel(this.dataChannel.clone()),i}plain(){const t={id:this.id,type:this.type,direction:Vi.toString(this.direction),codecs:[]};this.dataChannel&&(t.dataChannel=this.dataChannel.plain()),this.bitrate&&(t.bitrate=this.bitrate);for(const i of this.codecs.values())t.codecs.push(i.plain());for(const[i,e]of this.extensions.entries())t.extensions||(t.extensions={}),t.extensions[i]=e;for(const i of this.rids.values())t.rids||(t.rids=[]),t.rids.push(i.plain());return this.simulcast&&(t.simulcast=this.simulcast.plain()),this.control&&(t.control=this.control),t}getType(){return this.type}getId(){return this.id}setId(t){this.id=t}addExtension(t,i){this.extensions.set(t,i)}addRID(t){this.rids.set(t.getId(),t)}addCodec(t){this.codecs.set(t.getType(),t)}setCodecs(t){this.codecs=t}getCodecForType(t){return this.codecs.get(t)}getCodec(t){for(const i of this.codecs.values())if(i.getCodec().toLowerCase()===t.toLowerCase())return i;return null}hasCodec(t){return null!==this.getCodec(t)}getCodecs(){return this.codecs}hasRTX(){for(const t of this.codecs.values())if(t.hasRTX())return!0;return!1}getExtensions(){return this.extensions}getRIDs(){return this.rids}getRID(t){return this.rids.get(t)}getBitrate(){return this.bitrate}setBitrate(t){this.bitrate=t}getDirection(){return this.direction}setDirection(t){this.direction=t}hasControl(){return!!this.control}getControl(){return this.control}setControl(t){this.control=t}hasDataChannel(){return!!this.dataChannel}getDataChannel(){return this.dataChannel}setDataChannel(t){this.dataChannel=t}answer(i){const e=new t(this.id,this.type);if(i){e.setDirection(Vi.reverse(this.direction));const{codecs:t,dataChannel:s}=i;if(t){let s;s=Array.isArray(t)?Fi.MapFromNames(t,i.rtx,i.rtcpfbs):t;for(let t of this.codecs.values())for(let i of s.values()){if(i.getCodec().toLowerCase()!==t.getCodec().toLowerCase()||"h264"===i.getCodec()&&i.hasParam("packetization-mode")&&i.getParam("packetization-mode")!=t.getParam("packetization-mode","0")||"h264"===i.getCodec()&&i.hasParam("profile-level-id")&&t.hasParam("profile-level-id")&&i.getParam("profile-level-id")!=t.getParam("profile-level-id")||"multiopus"===i.getCodec()&&i.hasParam("num_streams")&&t.hasParam("num_streams")&&i.getParam("num_streams")!=t.getParam("num_streams"))continue;const s=i.clone();s.setType(t.getType()),s.hasRTX()&&s.setRTX(t.getRTX()),t.hasChannels()&&s.setChannels(t.getChannels()),s.addParams(t.getParams()),e.addCodec(s);break}}const n=new Set(i.extensions);for(let[t,i]of this.extensions)n.has(i)&&e.addExtension(t,i);if(i.simulcast&&this.simulcast){const t=new Gi,i=this.simulcast.getSimulcastStreams(Wi.SEND);if(i)for(const e of i){const i=e.map((t=>t.clone()));t.addSimulcastAlternativeStreams(Wi.RECV,i)}const s=this.simulcast.getSimulcastStreams(Wi.RECV);if(s)for(const i of s){const e=i.map((t=>t.clone()));t.addSimulcastAlternativeStreams(Wi.SEND,e)}for(const t of this.rids.values()){const i=t.clone();i.setDirection(Wi.reverse(t.getDirection())),e.addRID(i)}e.setSimulcast(t)}if(s&&this.dataChannel){const t=new Hi(this.dataChannel.getPort(),s.maxMessageSize?s.maxMessageSize:this.dataChannel.getMaxMessageSize());e.setDataChannel(t)}}else e.setDirection(Vi.INACTIVE);return e}getSimulcast(){return this.simulcast}setSimulcast(t){this.simulcast=t}constructor(t,i){this.id=t,this.type=i,this.direction=Vi.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.bitrate=0,this.control=null,this.dataChannel=null}};function Zi(t){const i=t.toString();if(!/^\d+$/.test(i))throw new g("invalid integer ".concat(i));return x(i)}Xi.create=function(t,i){const e=new Xi(t,t);if(i){const{codecs:t}=i;t&&(Array.isArray(t)?e.setCodecs(Fi.MapFromNames(t,i.rtx,i.rtcpfbs)):e.setCodecs(t))}else e.setDirection(Vi.INACTIVE);return e},Xi.expand=function(t){if("MediaInfo"===t.constructor.name)return t;const i=new Xi(t.id,t.type);if(t.direction&&i.setDirection(Vi.byValue(t.direction)),i.setBitrate(t.bitrate),t.dataChannel){const e=Hi.expand(t.dataChannel);e&&i.setDataChannel(e)}for(const[e,s]of w.entries(t.extensions))i.addExtension(Zi(e),s);for(const e of t.codecs){const t=Fi.expand(e);t&&i.addCodec(t)}for(const e of t.rids||[]){const t=Yi.expand(e);i.addRID(t)}return t.simulcast&&i.setSimulcast(Gi.expand(t.simulcast)),t.control&&i.setControl(t.control),i},Xi.clone=function(t){return"MediaInfo"===t.constructor.name?t.clone():Xi.expand(t)};var qi=Xi;let Ki=class t{clone(){return new t(this.semantics,this.ssrcs)}plain(){const t={semantics:this.semantics,ssrcs:[]};for(let i=0;i<this.ssrcs.length;++i)t.ssrcs.push(this.ssrcs[i]);return t}getSemantics(){return this.semantics}getSSRCs(){return this.ssrcs}constructor(t,i){this.semantics=t,this.ssrcs=[];for(let t=0;t<i.length;++t)this.ssrcs.push(x(i[t]))}};Ki.expand=function(t){return"SourceGroupInfo"===t.constructor.name?t:new Ki(t.semantics,t.ssrcs)},Ki.clone=function(t){return"SourceGroupInfo"===t.constructor.name?t.clone():Ki.expand(t)};var Ji=Ki;let $i=class t{clone(){const i=new t(this.ssrc);return i.setCName(this.cname),i.setStreamId(this.streamId),i.setTrackId(this.trackId),i}plain(){const t={ssrc:this.ssrc};return this.cname&&(t.cname=this.cname),this.streamId&&(t.streamId=this.streamId),this.trackId&&(t.trackId=this.trackId),t}getCName(){return this.cname}setCName(t){this.cname=t}getStreamId(){return this.streamId}setStreamId(t){this.streamId=t}getTrackId(){return this.trackId}setTrackId(t){this.trackId=t}getSSRC(){return this.ssrc}constructor(t){this.ssrc=t}};$i.expand=function(t){if("SourceInfo"===t.constructor.name)return t;const i=new $i(t.ssrc);return i.setCName(t.cname),i.setStreamId(t.streamId),i.setTrackId(t.trackId),i},$i.clone=function(t){return"SourceInfo"===t.constructor.name?t.clone():$i.expand(t)};var te=$i;const ie=$t;let ee=class t{clone(){var i=new t(this.id,this.paused);for(let t of this.codecs.values())i.addCodec(t.clone());return i.setParams(this.params),i}plain(){var t={id:this.id,paused:this.paused,codecs:{},params:{}};for(var[i,e]of this.codecs.entries())t.codecs[i]=e.plain();for(var[i,s]of this.params.entries())t.params[i]=s;return t}getId(){return this.id}getCodecs(){return this.codecs}addCodec(t){this.codecs.set(t.getType(),t)}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,i){this.params.set(t,i)}isPaused(){return this.paused}constructor(t,i=!1){this.id=t,this.paused=i,this.codecs=new Map,this.params=new Map}};ee.expand=function(t){if("TrackEncodingInfo"===t.constructor.name)return t;const i=new ee(t.id,t.paused);for(const e of w.values(t.codecs||{}))i.addCodec(ie.expand(e));for(const[e,s]of w.entries(t.params||{}))i.addParam(e,s);return i},ee.clone=function(t){return"TrackEncodingInfo"===t.constructor.name?t.clone():ee.expand(t)};var se=ee;const ne=Ji,re=se;let oe=class t{clone(){const i=new t(this.media,this.id);this.mediaId&&i.setMediaId(this.mediaId);for(let t=0;t<this.ssrcs.length;++t)i.addSSRC(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)i.addSourceGroup(this.groups[t].clone());for(let t=0;t<this.encodings.length;++t){const e=[];for(let i=0;i<this.encodings[t].length;++i)e.push(this.encodings[t][i].clone());i.addAlternativeEncodings(e)}return i}plain(){const t={media:this.media,id:this.id,ssrcs:[]};this.mediaId&&(t.mediaId=this.mediaId);for(let i=0;i<this.ssrcs.length;++i)t.ssrcs.push(this.ssrcs[i]);for(let i=0;i<this.groups.length;++i)t.groups||(t.groups=[]),t.groups.push(this.groups[i].plain());for(let i=0;i<this.encodings.length;++i){const e=[];for(let t=0;t<this.encodings[i].length;++t)e.push(this.encodings[i][t].plain());e.length&&(t.encodings||(t.encodings=[]),t.encodings.push(e))}return t}getMedia(){return this.media}setMediaId(t){this.mediaId=t}getMediaId(){return this.mediaId}getId(){return this.id}addSSRC(t){this.ssrcs.push(t)}getSSRCs(){return this.ssrcs}addSourceGroup(t){this.groups.push(t)}getSourceGroup(t){for(const i of this.groups)if(i.getSemantics().toLowerCase()===t.toLowerCase())return i;return null}getSourceGroups(){return this.groups}hasSourceGroup(t){for(const i of this.groups)if(i.getSemantics().toLowerCase()===t.toLowerCase())return!0;return!1}getEncodings(){return this.encodings}addEncoding(t){this.encodings.push([t])}addAlternativeEncodings(t){this.encodings.push(t)}setEncodings(t){this.encodings=t}constructor(t,i){this.media=t,this.id=i,this.ssrcs=[],this.groups=[],this.encodings=[]}};oe.expand=function(t){if("TrackInfo"===t.constructor.name)return t;const i=new oe(t.media,t.id);t.mediaId&&i.setMediaId(t.mediaId);for(const e of t.ssrcs||[])i.addSSRC(e);for(const e of t.groups||[])i.addSourceGroup(ne.expand(e));for(const e of t.encodings||[]){const t=[];for(const i of e)t.push(re.expand(i));i.addAlternativeEncodings(t)}return i},oe.clone=function(t){return"TrackInfo"===t.constructor.name?t.clone():oe.expand(t)};var he=oe;const ae=he;let ue=class t{clone(){const i=new t(this.id);for(const t of this.tracks.values())i.addTrack(t.clone());return i}plain(){const t={id:this.id,tracks:[]};for(const i of this.tracks.values())t.tracks.push(i.plain());return t}getId(){return this.id}addTrack(t){this.tracks.set(t.getId(),t)}removeTrack(t){return this.tracks.delete(t.getId())}removeTrackById(t){return this.tracks.delete(t)}getFirstTrack(t){for(let i of this.tracks.values())if(i.getMedia().toLowerCase()===t.toLowerCase())return i;return null}getTracks(){return this.tracks}removeAllTracks(){this.tracks.clear()}getTrack(t){return this.tracks.get(t)}constructor(t){this.id=t,this.tracks=new Map}};ue.expand=function(t){if("StreamInfo"===t.constructor.name)return t;const i=new ue(t.id);for(const e of t.tracks||[]){const t=ae.expand(e);t&&i.addTrack(t)}return i},ue.clone=function(t){return"StreamInfo"===t.constructor.name?t.clone():ue.expand(t)};var ce=ue;const le=Ot,de=function(t){const i=new Intl.Collator(t,{sensitivity:"base"});return(t,e)=>0==i.compare(t,e)}("en-US"),fe=Xt,_e=$t,ge=qt,we=ri,ve=hi,me=Ni,pe=qi,Ae=ei,ye=Bi,Me=Di,be=Ji,Te=te,Se=ce,Ne=he,Ie=se,De=Pi,Ee=Ci,ke=Li,Le=Qi;let xe=class t{clone(){const i=new t(this.version);for(const t of this.medias)i.addMedia(t.clone());for(const t of this.streams.values())i.addStream(t.clone());for(const t of this.candidates)i.addCandidate(t.clone());return i.setICE(this.ice.clone()),this.dtls&&i.setDTLS(this.dtls.clone()),this.crypto&&i.setCrypto(this.crypto.clone()),i.setExtmapAllowMixed(this.extmapAllowMixed),i}plain(){const t={version:this.version,streams:[],medias:[],candidates:[]};for(const i of this.medias)t.medias.push(i.plain());for(const i of this.streams.values())t.streams.push(i.plain());for(const i of this.candidates)t.candidates.push(i.plain());return this.ice&&(t.ice=this.ice.plain()),this.dtls&&(t.dtls=this.dtls.plain()),this.crypto&&(t.crypto=this.crypto.plain()),this.extmapAllowMixed||(t.extmapAllowMixedNotSupported=!this.extmapAllowMixed),t}unify(){const i=new t(this.version);for(const t of this.medias)i.addMedia(t.clone());const e={audio:i.getMediasByType("audio"),video:i.getMediasByType("video")};for(const t of this.streams.values()){const s=t.clone();for(const t of s.getTracks().values()){let s=e[t.getMedia()].pop();s||(s=this.getMedia(t.getMedia()).clone(),s.setId(t.getId()),i.addMedia(s)),t.setMediaId(s.getId())}i.addStream(s)}for(const t of this.candidates)i.addCandidate(t.clone());return this.ice&&i.setICE(this.ice.clone()),this.dtls&&i.setDTLS(this.dtls.clone()),this.crypto&&i.setCrypto(this.crypto.clone()),i}setVersion(t){this.version=t}addMedia(t){this.medias.push(t)}getMedia(t){for(let i in this.medias){let e=this.medias[i];if(de(e.getType(),t))return e}return null}getMediasByType(t){let i=[];for(let e in this.medias){let s=this.medias[e];de(s.getType(),t)&&i.push(s)}return i}getMediaById(t){for(const i of this.medias)if(de(i.getId(),t))return i;return null}replaceMedia(t){for(let i in this.medias)if(this.medias[i].getId()==t.getId())return this.medias[i]=t,!0;return!1}getMedias(){return this.medias}getVersion(){return this.version}getDTLS(){return this.dtls}setDTLS(t){this.dtls=t}hasCrypto(){return!!this.crypto}getCrypto(){return this.crypto}setCrypto(t){this.crypto=t}hasICE(){return!!this.ice}getICE(){return this.ice}setICE(t){this.ice=t}addCandidate(t){for(const i of this.candidates)if(i.equals(t))return;this.candidates.push(t)}addCandidates(t){for(const i of t)this.addCandidate(i)}getCandidates(){return this.candidates}getStream(t){return this.streams.get(t)}getStreams(){return this.streams}getFirstStream(){for(const t of this.streams.values())return t;return null}addStream(t){this.streams.set(t.getId(),t)}removeStream(t){return this.streams.delete(t.getId())}removeAllStreams(){this.streams.clear()}getTrackByMediaId(t){for(const i of this.streams.values())for(const[e,s]of i.getTracks())if(s.getMediaId()==t)return s;return null}getStreamByMediaId(t){for(const i of this.streams.values())for(const[e,s]of i.getTracks())if(s.getMediaId()==t)return i;return null}getExtmapAllowMixed(){return this.extmapAllowMixed}setExtmapAllowMixed(t){this.extmapAllowMixed=t}answer(i){const e=new t;i.ice&&(i.ice instanceof me?e.setICE(i.ice.clone()):e.setICE(me.expand(i.ice))),i.dtls&&(i.dtls instanceof we?e.setDTLS(i.dtls):e.setDTLS(we.expand(i.dtls))),i.crypto&&(i.crypto instanceof ve?e.setCrypto(i.crypto):e.setCrypto(ve.expand(i.crypto)));for(let t=0;i.candidates&&t<i.candidates.length;++t)i.candidates[t]instanceof fe?e.addCandidate(i.candidates[t].clone()):e.addCandidate(fe.expand(i.candidates[t]));for(const t of this.medias){const s=i&&i.capabilities&&i.capabilities[t.getType()];e.addMedia(t.answer(s))}return e.setExtmapAllowMixed(this.extmapAllowMixed),e}toString(){let t={version:0,media:[]};t.version=0,t.origin={username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},t.name="semantic-sdp",t.connection={version:4,ip:"0.0.0.0"},t.timing={start:0,stop:0},this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),t.msidSemantic={semantic:"WMS",token:"*"},t.groups=[],this.extmapAllowMixed&&(t.extmapAllowMixed="extmap-allow-mixed");const i=[];for(const e of this.medias){let s={type:e.getType(),port:9,protocol:"",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};s.direction=ye.toString(e.getDirection()),this.extmapAllowMixed&&(s.extmapAllowMixed="extmap-allow-mixed"),s.mid=e.getId(),i.push(e.getId()),e.hasControl()&&(s.control=e.getControl()),e.getBitrate()>0&&(s.bandwidth.push({type:"AS",limit:e.getBitrate()}),s.bandwidth.push({type:"TIAS",limit:1e3*e.getBitrate()}));let n=this.getCandidates();for(const t of n)s.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});if(this.getICE()&&(s.iceUfrag=this.getICE().getUfrag(),s.icePwd=this.getICE().getPwd()),de("audio",e.getType())||de("video",e.getType())){s.rtcpMux="rtcp-mux",s.rtcpRsize="rtcp-rsize",this.getDTLS()?(s.protocol="UDP/TLS/RTP/SAVPF",s.fingerprint={type:this.getDTLS().getHash(),hash:this.getDTLS().getFingerprint()},s.setup=Ae.toString(this.getDTLS().getSetup())):this.getCrypto()?(s.protocol="RTP/SAVPF",s.crypto=[{id:this.getCrypto().getTag(),suite:this.getCrypto().getSuite(),config:this.getCrypto().getKeyParams()}]):s.protocol="RTP/AVP";for(const t of e.getCodecs().values()){de("video",e.getType())?s.rtp.push({payload:t.getType(),codec:t.getCodec().toUpperCase(),rate:9e4}):de("opus",t.getCodec())||de("multiopus",t.getCodec())?s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:48e3,encoding:t.getChannels()}):s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:8e3});for(const i of t.getRTCPFeedbacks())s.rtcpFb.push({payload:t.getType(),type:i.getId(),subtype:i.getParams().join(" ")});t.hasRTX()&&(s.rtp.push({payload:t.getRTX(),codec:"rtx",rate:9e4}),s.fmtp.push({payload:t.getRTX(),config:"apt="+t.getType()}));const i=t.getParams();if(w.keys(i).length){const e={payload:t.getType(),config:""};for(const t in i)e.config.length&&(e.config+=";"),w.hasOwnProperty.call(i,t)?e.config+=t+"="+i[t]:e.config+=t;s.fmtp.push(e)}}const t=[];for(const i of s.rtp)t.push(i.payload);s.payloads=t.join(" ");for(let[t,i]of e.getExtensions().entries())s.ext.push({value:t,uri:i});for(let t of e.getRIDs().values()){let i={id:t.getId(),direction:Me.toString(t.getDirection()),params:""};t.getFormats().length&&(i.params="pt="+t.getFormats().join(","));for(let[e,s]of t.getParams().entries())i.params+=(i.params.length?";":"")+e+"="+s;s.rids.push(i)}const i=e.getSimulcast();if(i){let t=1;s.simulcast={};const e=i.getSimulcastStreams(Me.SEND),n=i.getSimulcastStreams(Me.RECV);if(e&&e.length){let i="";for(const t of e){let e="";for(const i of t)e+=(e.length?",":"")+(i.isPaused()?"~":"")+i.getId();i+=(i.length?";":"")+e}s.simulcast["dir"+t]="send",s.simulcast["list"+t]=i,t++}if(n&&n.length){let i="";for(const t of n){let e="";for(const i of t)e+=(e.length?",":"")+(i.isPaused()?"~":"")+i.getId();i+=(i.length?";":"")+e}s.simulcast["dir"+t]="recv",s.simulcast["list"+t]=i,t++}}}else if(e.hasDataChannel()){s.protocol="UDP/DTLS/SCTP",s.payloads="webrtc-datachannel";const t=e.getDataChannel();s.sctpPort=t.getPort(),s.maxMessageSize=t.getMaxMessageSize()}t.media.push(s)}for(let i of this.streams.values())for(let e of i.getTracks().values())for(let s in t.media){let n=t.media[s];if(e.getMediaId()){if(e.getMediaId()==n.mid){let t=e.getSourceGroups();for(let i in t){let e=t[i];n.ssrcGroups.push({semantics:e.getSemantics(),ssrcs:e.getSSRCs().join(" ")})}let s=e.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:i.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:i.getId()+" "+e.getId()});n.msid=i.getId()+" "+e.getId();break}}else if(de(n.type,e.getMedia())){let t=e.getSourceGroups();for(let i in t){let e=t[i];n.ssrcGroups.push({semantics:e.getSemantics(),ssrcs:e.getSSRCs().join(" ")})}let s=e.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:i.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:i.getId()+" "+e.getId()});break}}const e={type:"BUNDLE",mids:i.join(" ")};return t.groups.push(e),le.write(t)}toIceFragmentString(){let t={version:0,media:[],candidates:[]};this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),this.getICE()&&(t.iceUfrag=this.getICE().getUfrag(),t.icePwd=this.getICE().getPwd());for(const i of this.getCandidates())t.candidates.push({foundation:i.getFoundation(),component:i.getComponentId(),transport:i.getTransport(),priority:i.getPriority(),ip:i.getAddress(),port:i.getPort(),type:i.getType(),raddr:i.getRelAddr(),rport:i.getRelPort()});return le.write(t).slice(10)}constructor(t){this.version=t||1,this.streams=new Map,this.medias=new Array,this.candidates=new Array,this.ice=null,this.dtls=null,this.crypto=null,this.extmapAllowMixed=!0}};xe.create=function(t){const i=new xe;t.ice&&(t.ice instanceof me?i.setICE(t.ice.clone()):i.setICE(me.expand(t.ice))),t.dtls&&(t.dtls instanceof we?i.setDTLS(t.dtls):i.setDTLS(we.expand(t.dtls))),t.crypto&&(t.crypto instanceof ve?i.setCrypto(t.crypto):i.setCrypto(ve.expand(t.crypto)));for(const e of t.candidates||[])e instanceof fe?i.addCandidate(e.clone()):i.addCandidate(fe.expand(e));let e=96,s=1;for(const[n,r]of w.entries(t.capabilities||{})){const t=pe.create(n,r);for(const[i,s]of t.getCodecs())s.getType()>=96&&s.setType(e++),s.getRTX()&&s.setRTX(e++);if(r.extensions)for(let i of r.extensions)15===s&&s++,t.addExtension(s++,i);i.addMedia(t)}return i},xe.expand=function(t){if("SDPInfo"===t.constructor.name)return t;const i=new xe(t.version);for(const e of t.medias||[]){const t=pe.expand(e);t&&i.addMedia(t)}for(const e of t.streams||[]){const t=Se.expand(e);t&&i.addStream(t)}for(const e of t.candidates||[]){const t=fe.expand(e);t&&i.addCandidate(t)}return t.ice&&i.setICE(me.expand(t.ice)),t.dtls&&i.setDTLS(we.expand(t.dtls)),t.crypto&&i.setCrypto(ve.expand(t.crypto)),t.extmapAllowMixedNotSupported&&(this.extmapAllowMixed=!t.extmapAllowMixedNotSupported),i},xe.clone=function(t){return"SDPInfo"===t.constructor.name?t.clone():xe.expand(t)},xe.process=function(t){return xe.parse(t)},xe.parse=function(t){const i=le.parse(t),e=new xe;if(e.setVersion(i.version),i.iceUfrag&&i.icePwd){const t=String(i.iceUfrag),s=String(i.icePwd),n=new me(t,s);n.setLite("ice-lite"==i.icelite),n.setEndOfCandidates("end-of-candidates"==i.endOfCandidates),e.setICE(n)}for(let t in i.media){const s=i.media[t],n=s.type,r=s.mid?s.mid.toString():t,o=new pe(r,n);if(s.iceUfrag&&s.icePwd){const t=String(s.iceUfrag),n=String(s.icePwd),r=new me(t,n);r.setLite("ice-lite"==i.icelite),r.setEndOfCandidates("end-of-candidates"==s.endOfCandidates),e.setICE(r)}for(let t=0;s.candidates&&t<s.candidates.length;++t){const i=s.candidates[t],n=new fe(i.foundation,i.component,i.transport,i.priority,i.ip,i.port,i.type,i.raddr,i.rport);e.addCandidate(n)}const h=s.fingerprint||i.fingerprint;if(h){const t=h.type,i=h.hash;let n=Ae.ACTPASS;s.setup&&(n=Ae.byValue(s.setup)),e.setDTLS(new we(n,t,i))}if(s.crypto){const t=s.crypto[0];e.setCrypto(new ve(t.id,t.suite,t.config,t.sessionConfig))}let a=ye.SENDRECV;s.direction&&(a=ye.byValue(s.direction),o.setDirection(a)),s.control&&o.setControl(s.control),e.setExtmapAllowMixed("extmap-allow-mixed"==s.extmapAllowMixed||"extmap-allow-mixed"==i.extmapAllowMixed);const u=new Map;for(let t in s.rtp){const i=s.rtp[t],e=i.payload,n=i.codec;if("RED"===n.toUpperCase()||"ULPFEC"===n.toUpperCase())continue;let r={};for(let t in s.fmtp){const i=s.fmtp[t];if(i.payload===e){const t=i.config.split(";");for(let i in t){const e=t[i].split("="),s=e[0].trim(),n=e.splice(1).join("=").trim();r[s]=n}}}if("RTX"===n.toUpperCase())u.set(x(r.apt),e);else{const t=new _e(n,e,r);i.encoding>1&&t.setChannels(i.encoding),o.addCodec(t)}}for(let t of u.entries()){const i=o.getCodecForType(t[0]);i&&i.setRTX(t[1])}for(let t=0;s.rtcpFb&&t<s.rtcpFb.length;++t){const i=o.getCodecForType(s.rtcpFb[t].payload);if(i){const e=s.rtcpFb[t].type,n=s.rtcpFb[t].subtype?s.rtcpFb[t].subtype.split(" "):null;i.addRTCPFeedback(new ge(e,n))}}const c=s.ext;for(let t in c){const i=c[t];o.addExtension(i.value,i.uri)}const l=s.rids;for(let t in l){const i=l[t],e=new ke(i.id,Me.byValue(i.direction));let s=[];const n=new Map;if(i.params){const t=le.parseParams(i.params);for(let i in t)"pt"===i?s=t[i].split(","):n.set(i,t[i]);e.setFormats(s),e.setParams(n)}o.addRID(e)}const d=[];if(s.simulcast){const t=new De;if(s.simulcast.dir1){const i=Me.byValue(s.simulcast.dir1),e=le.parseSimulcastStreamList(s.simulcast.list1);for(let s=0;s<e.length;++s){const n=[];for(let t=0;t<e[s].length;++t)n.push(new Ee(e[s][t].scid,e[s][t].paused));t.addSimulcastAlternativeStreams(i,n)}}if(s.simulcast.dir2){const i=Me.byValue(s.simulcast.dir2),e=le.parseSimulcastStreamList(s.simulcast.list2);for(let s=0;s<e.length;++s){const n=[];for(let t=0;t<e[s].length;++t)n.push(new Ee(e[s][t].scid,e[s][t].paused));t.addSimulcastAlternativeStreams(i,n)}}for(let i of t.getSimulcastStreams(Me.SEND)){const t=[];for(let e=0;e<i.length;e++){const s=new Ie(i[e].getId(),i[e].isPaused()),n=o.getRID(s.getId());if(n){const i=n.getFormats();for(let t=0;i&&t<i.length;++t){const e=o.getCodecForType(i[t]);e&&s.addCodec(e)}s.setParams(n.getParams()),t.push(s)}}t.length&&d.push(t)}o.setSimulcast(t)}const f=new Map;if(s.ssrcs)for(let t in s.ssrcs){let i=s.ssrcs[t],o=i.id,h=i.attribute,a=i.value,u=f.get(o);if(u||(u=new Te(o),f.set(u.getSSRC(),u)),de("cname",h))u.setCName(a);else if(de("msid",h)){let t=a.split(" "),i=t[0],s=t[1];u.setStreamId(i),u.setTrackId(s);let h=e.getStream(i);h||(h=new Se(i),e.addStream(h));let c=h.getTrack(s);c||(c=new Ne(n,s),c.setMediaId(r),c.setEncodings(d),h.addTrack(c)),c.addSSRC(o)}}if(s.msid){let t=s.msid.split(" "),i=t[0],o=t[1],h=e.getStream(i);h||(h=new Se(i),e.addStream(h));let a=h.getTrack(o);a||(a=new Ne(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a));for(let[t,e]of f.entries())e.getStreamId()||(e.setStreamId(i),e.setTrackId(o),a.addSSRC(t))}for(let[t,i]of f.entries())if(!i.getStreamId()){let s=i.getCName(),o=r;i.setStreamId(s),i.setTrackId(o);let h=e.getStream(s);h||(h=new Se(s),e.addStream(h));let a=h.getTrack(o);a||(a=new Ne(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a)),a.addSSRC(t)}if(s.ssrcGroups)for(let t in s.ssrcGroups){let i=s.ssrcGroups[t],n=i.ssrcs.split(" "),r=new be(i.semantics,n),o=f.get(x(n[0]));o&&e.getStream(o.getStreamId()).getTrack(o.getTrackId()).addSourceGroup(r)}if("application"==s.type&&"webrtc-datachannel"==s.payloads){const t=new Le(s.sctpPort,s.maxMessageSize);o.setDataChannel(t)}e.addMedia(o)}return e};var Ce=xe;w.defineProperty(Ct,"__esModule",{value:!0});var Oe=Ct.SDPInfo=Ce;Ct.CandidateInfo=Xt,Ct.CodecInfo=$t,Ct.DTLSInfo=ri,Ct.CryptoInfo=hi,Ct.ICEInfo=Ni;var je=Ct.MediaInfo=qi;Ct.Setup=ei,Ct.SourceGroupInfo=Ji,Ct.SourceInfo=te,Ct.StreamInfo=ce,Ct.TrackInfo=he,Ct.RTCPFeedbackInfo=qt,Ct.TrackEncodingInfo=se,Ct.RIDInfo=Li,Ct.SimulcastInfo=Pi,Ct.SimulcastStreamInfo=Ci,Ct.DataChannelInfo=Qi;var Re=Ct.Direction=Bi,Pe={exports:{}};!function(t,i){!function(e,s){var n="function",r="undefined",o="object",h="string",a="major",u="model",c="name",l="type",d="vendor",f="version",_="architecture",g="console",w="mobile",v="tablet",m="smarttv",p="wearable",A="embedded",y="Amazon",M="Apple",b="ASUS",T="BlackBerry",S="Browser",N="Chrome",I="Firefox",D="Google",E="Huawei",k="LG",L="Microsoft",x="Motorola",C="Opera",O="Samsung",j="Sharp",R="Sony",P="Xiaomi",z="Zebra",B="Facebook",U="Chromium OS",Q="Mac OS",F=function(t){for(var i={},e=0;e<t.length;e++)i[t[e].toUpperCase()]=t[e];return i},Y=function(t,i){return typeof t===h&&-1!==G(i).indexOf(G(t))},G=function(t){return t.toLowerCase()},V=function(t,i){if(typeof t===h)return t=t.replace(/^\s\s*/,""),typeof i===r?t:t.substring(0,500)},W=function(t,i){for(var e,r,h,a,u,c,l=0;l<i.length&&!u;){var d=i[l],f=i[l+1];for(e=r=0;e<d.length&&!u&&d[e];)if(u=d[e++].exec(t))for(h=0;h<f.length;h++)c=u[++r],typeof(a=f[h])===o&&a.length>0?2===a.length?typeof a[1]==n?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==n||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):s:this[a[0]]=c?a[1].call(this,c,a[2]):s:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):s):this[a]=c||s;l+=2}},H=function(t,i){for(var e in i)if(typeof i[e]===o&&i[e].length>0){for(var n=0;n<i[e].length;n++)if(Y(i[e][n],t))return"?"===e?s:e}else if(Y(i[e],t))return"?"===e?s:e;return t},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,f],[/opios[\/ ]+([\w\.]+)/i],[f,[c,C+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[c,C]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[c,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[c,"UC"+S]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[c,"Smart Lenovo "+S]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+S],f],[/\bfocus\/([\w\.]+)/i],[f,[c,I+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[c,C+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[c,C+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI "+S]],[/fxios\/([-\w\.]+)/i],[f,[c,I]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 "+S]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 "+S],f],[/samsungbrowser\/([\w\.]+)/i],[f,[c,O+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[c,f],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,B],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[c,N+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,N+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[c,"Android "+S]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[f,H,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[c,I+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[c,f],[/(cobalt)\/([\w\.]+)/i],[c,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,G]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[d,O],[l,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[d,O],[l,w]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[d,M],[l,w]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[d,M],[l,v]],[/(macintosh);/i],[u,[d,M]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[d,j],[l,w]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[d,E],[l,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[d,E],[l,w]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[d,P],[l,w]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[d,P],[l,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[d,"OPPO"],[l,w]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[d,"Vivo"],[l,w]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[d,"Realme"],[l,w]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[d,x],[l,w]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[d,x],[l,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[d,k],[l,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[d,k],[l,w]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[d,"Lenovo"],[l,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[d,"Nokia"],[l,w]],[/(pixel c)\b/i],[u,[d,D],[l,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[d,D],[l,w]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,R],[l,w]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[d,R],[l,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[d,"OnePlus"],[l,w]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[d,y],[l,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[d,y],[l,w]],[/(playbook);[-\w\),; ]+(rim)/i],[u,d,[l,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[d,T],[l,w]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[d,b],[l,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[d,b],[l,w]],[/(nexus 9)/i],[u,[d,"HTC"],[l,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[u,/_/g," "],[l,w]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[d,"Acer"],[l,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[d,"Meizu"],[l,w]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[d,"Ulefone"],[l,w]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,u,[l,w]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,u,[l,v]],[/(surface duo)/i],[u,[d,L],[l,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[d,"Fairphone"],[l,w]],[/(u304aa)/i],[u,[d,"AT&T"],[l,w]],[/\bsie-(\w*)/i],[u,[d,"Siemens"],[l,w]],[/\b(rct\w+) b/i],[u,[d,"RCA"],[l,v]],[/\b(venue[\d ]{2,7}) b/i],[u,[d,"Dell"],[l,v]],[/\b(q(?:mv|ta)\w+) b/i],[u,[d,"Verizon"],[l,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[d,"Barnes & Noble"],[l,v]],[/\b(tm\d{3}\w+) b/i],[u,[d,"NuVision"],[l,v]],[/\b(k88) b/i],[u,[d,"ZTE"],[l,v]],[/\b(nx\d{3}j) b/i],[u,[d,"ZTE"],[l,w]],[/\b(gen\d{3}) b.+49h/i],[u,[d,"Swiss"],[l,w]],[/\b(zur\d{3}) b/i],[u,[d,"Swiss"],[l,v]],[/\b((zeki)?tb.*\b) b/i],[u,[d,"Zeki"],[l,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],u,[l,v]],[/\b(ns-?\w{0,9}) b/i],[u,[d,"Insignia"],[l,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[d,"NextBook"],[l,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],u,[l,w]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],u,[l,w]],[/\b(ph-1) /i],[u,[d,"Essential"],[l,w]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[d,"Envizen"],[l,v]],[/\b(trio[-\w\. ]+) b/i],[u,[d,"MachSpeed"],[l,v]],[/\btu_(1491) b/i],[u,[d,"Rotor"],[l,v]],[/(shield[\w ]+) b/i],[u,[d,"Nvidia"],[l,v]],[/(sprint) (\w+)/i],[d,u,[l,w]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,L],[l,w]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[d,z],[l,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[d,z],[l,w]],[/smart-tv.+(samsung)/i],[d,[l,m]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,O],[l,m]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,k],[l,m]],[/(apple) ?tv/i],[d,[u,M+" TV"],[l,m]],[/crkey/i],[[u,N+"cast"],[d,D],[l,m]],[/droid.+aft(\w+)( bui|\))/i],[u,[d,y],[l,m]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[d,j],[l,m]],[/(bravia[\w ]+)( bui|\))/i],[u,[d,R],[l,m]],[/(mitv-\w{5}) bui/i],[u,[d,P],[l,m]],[/Hbbtv.*(technisat) (.*);/i],[d,u,[l,m]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,V],[u,V],[l,m]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,u,[l,g]],[/droid.+; (shield) bui/i],[u,[d,"Nvidia"],[l,g]],[/(playstation [345portablevi]+)/i],[u,[d,R],[l,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[d,L],[l,g]],[/((pebble))app/i],[d,u,[l,p]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[d,M],[l,p]],[/droid.+; (glass) \d/i],[u,[d,D],[l,p]],[/droid.+; (wt63?0{2,3})\)/i],[u,[d,z],[l,p]],[/(quest( 2| pro)?)/i],[u,[d,B],[l,p]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[l,A]],[/(aeobc)\b/i],[u,[d,y],[l,A]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[l,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[l,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,w]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[f,H,X]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,H,X],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,Q],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,f],[/\(bb(10);/i],[f,[c,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[c,I+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[c,N+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,U],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,f],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,f]]},q=function(t,i){if(typeof t===o&&(i=t,t=s),!(this instanceof q))return new q(t,i).getResult();var g=typeof e!==r&&e.navigator?e.navigator:s,m=t||(g&&g.userAgent?g.userAgent:""),p=g&&g.userAgentData?g.userAgentData:s,A=i?function(t,i){var e={};for(var s in t)i[s]&&i[s].length%2==0?e[s]=i[s].concat(t[s]):e[s]=t[s];return e}(Z,i):Z,y=g&&g.userAgent==m;return this.getBrowser=function(){var t={};return t[c]=s,t[f]=s,W.call(t,m,A.browser),t[a]=function(t){return typeof t===h?t.replace(/[^\d\.]/g,"").split(".")[0]:s}(t[f]),y&&g&&g.brave&&typeof g.brave.isBrave==n&&(t[c]="Brave"),t},this.getCPU=function(){var t={};return t[_]=s,W.call(t,m,A.cpu),t},this.getDevice=function(){var t={};return t[d]=s,t[u]=s,t[l]=s,W.call(t,m,A.device),y&&!t[l]&&p&&p.mobile&&(t[l]=w),y&&"Macintosh"==t[u]&&g&&typeof g.standalone!==r&&g.maxTouchPoints&&g.maxTouchPoints>2&&(t[u]="iPad",t[l]=v),t},this.getEngine=function(){var t={};return t[c]=s,t[f]=s,W.call(t,m,A.engine),t},this.getOS=function(){var t={};return t[c]=s,t[f]=s,W.call(t,m,A.os),y&&!t[c]&&p&&"Unknown"!=p.platform&&(t[c]=p.platform.replace(/chrome os/i,U).replace(/macos/i,Q)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return m},this.setUA=function(t){return m=typeof t===h&&t.length>500?V(t,500):t,this},this.setUA(m),this};q.VERSION="0.7.37",q.BROWSER=F([c,f,a]),q.CPU=F([_]),q.DEVICE=F([u,d,l,g,w,m,v,p,A]),q.ENGINE=q.OS=F([c,f]),t.exports&&(i=t.exports=q),i.UAParser=q;var K=typeof e!==r&&(e.jQuery||e.Zepto);if(K&&!K.ua){var J=new q;K.ua=J.getResult(),K.ua.get=function(){return J.getUA()},K.ua.set=function(t){J.setUA(t);var i=J.getResult();for(var e in i)K.ua[e]=i[e]}}}("object"==typeof s?s:p)}(Pe,Pe.exports);const ze=A(Pe.exports),Be=["iOS"];class Ue extends ze{isChromium(){return this.getUA().match(/Chrome/i)}isChrome(){const t=this.getBrowser();if(!t.name)return!1;const i=this.getOS();let e=!0;return e=!new RegExp(Be.join("|"),"i").test(i.name),t.name.match(/Chrome/i)&&e}isFirefox(){const t=this.getBrowser();return!!t.name&&t.name.match(/Firefox/i)}isOpera(){const t=this.getBrowser();return!!t.name&&t.name.match(/Opera/i)}isSafari(){const t=this.getBrowser();return!!t.name&&t.name.match(/Safari/i)}constructor(){super(s.navigator.userAgent)}}const Qe=rt.get("SdpParser"),Fe=Array.from({length:31},((t,i)=>i+35)),Ye=Array.from({length:32},((t,i)=>i+96)),Ge=Array.from({length:14},((t,i)=>i+1)),Ve=Array.from({length:240},((t,i)=>i+16)),We={setSimulcast(t,i){if(Qe.info("Setting simulcast. Codec: ",i),!(new Ue).isChromium())return Qe.warn("Your browser does not appear to support Simulcast. For a better experience, use a Chromium based browser."),t;if("h264"!==i&&"vp8"!==i)return Qe.warn("Your selected codec ".concat(i," does not appear to support Simulcast.  To broadcast using simulcast, please use H.264 or VP8.")),t;if(!/m=video/.test(t))return Qe.warn("There is no available video for simulcast to be enabled."),t;try{const i=new RegExp("m=video.*?a=ssrc:(\\d*) cname:(.+?)\\r\\n","s"),e=new RegExp("m=video.*?a=ssrc:(\\d*) msid:(.+?)\\r\\n","s"),s=i.exec(t),n=s[1],r=s[2],o=e.exec(t)[2],h=2,a=[n];for(let i=0;i<h;++i){const e=100+2*i,s=e+1;a.push(e),t+="a=ssrc-group:FID "+e+" "+s+"\r\na=ssrc:"+e+" cname:"+r+"\r\na=ssrc:"+e+" msid:"+o+"\r\na=ssrc:"+s+" cname:"+r+"\r\na=ssrc:"+s+" msid:"+o+"\r\n"}return t+="a=ssrc-group:SIM "+a.join(" ")+"\r\n",Qe.info("Simulcast setted"),Qe.debug("Simulcast SDP: ",t),t}catch(t){throw Qe.error("Error setting SDP for simulcast: ",t),t}},setStereo:t=>(Qe.info("Replacing SDP response for support stereo"),t=t.replace(/useinbandfec=1/g,"useinbandfec=1; stereo=1"),Qe.info("Replaced SDP response for support stereo"),Qe.debug("New SDP value: ",t),t),setDTX:t=>(Qe.info("Replacing SDP response for support dtx"),t=t.replace("useinbandfec=1","useinbandfec=1; usedtx=1"),Qe.info("Replaced SDP response for support dtx"),Qe.debug("New SDP value: ",t),t),setAbsoluteCaptureTime(t){const i="a=extmap:"+We.getAvailableHeaderExtensionIdRange(t)[0]+" http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,e,s)=>e+i+s)),Qe.info("Replaced SDP response for setting absolute capture time"),Qe.debug("New SDP value: ",t),t},setDependencyDescriptor(t){const i="a=extmap:"+We.getAvailableHeaderExtensionIdRange(t)[0]+" https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,e,s)=>e+i+s)),Qe.info("Replaced SDP response for setting depency descriptor"),Qe.debug("New SDP value: ",t),t},setVideoBitrate(t,i){if(i<1)Qe.info("Remove bitrate restrictions"),t=t.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"");else{const e=Oe.parse(t),s=e.getMedia("video");Qe.info("Setting video bitrate"),s.setBitrate(i),t=e.toString()}return t},removeSdpLine:(t,i)=>(Qe.debug("SDP before trimming: ",t),t=t.split("\n").filter((t=>t.trim()!==i)).join("\n"),Qe.debug("SDP trimmed result: ",t),t),adaptCodecName(t,i,e){if(!t)return t;const s=new RegExp("".concat(i),"i");return t.replace(s,e)},setMultiopus(t,i){if(!(new Ue).isFirefox()&&(!i||He(i)))if(t.includes("multiopus/48000/6"))Qe.info("Multiopus already setted");else{Qe.info("Setting multiopus");const i=/m=audio 9 UDP\/TLS\/RTP\/SAVPF (.*)\r\n/.exec(t)[0],e=We.getAvailablePayloadTypeRange(t)[0],s=i.replace("\r\n"," ")+e+"\r\na=rtpmap:"+e+" multiopus/48000/6\r\na=fmtp:"+e+" channel_mapping=0,4,1,2,3,5;coupled_streams=2;minptime=10;num_streams=4;useinbandfec=1\r\n";t=t.replace(i,s),Qe.info("Multiopus offer created"),Qe.debug("SDP parsed for multioups: ",t)}return t},getAvailablePayloadTypeRange(t){const i=t.matchAll(/m=(?:.*) (?:.*) UDP\/TLS\/RTP\/SAVPF (.*)\r\n/gm);let e=Ye.concat(Fe);for(const t of i){const i=t[1].split(" ").map((t=>x(t)));e=e.filter((t=>!i.includes(t)))}return e},getAvailableHeaderExtensionIdRange(t){const i=t.matchAll(/a=extmap:(\d+)(?:.*)\r\n/gm);let e=Ge.concat(Ve);for(const t of i){const i=t[1].split(" ").map((t=>x(t)));e=e.filter((t=>!i.includes(t)))}return e},renegotiate(t,i){const e=Oe.parse(t),s=Oe.parse(i);for(const t of e.getMedias()){let i=s.getMediaById(t.getId());if(!i){i=new je(t.getId(),t.getType()),i.setDirection(Re.reverse(t.getDirection()));const e=s.getMedia(t.getType());if(e){i.setCodecs(e.getCodecs());for(const[t,s]of e.getExtensions())i.addExtension(t,s)}s.addMedia(i)}}return s.toString()},updateMissingVideoExtensions(t,i){var e;const s=Oe.parse(t),n=null==(e=Oe.parse(i).getMediasByType("video")[0])?void 0:e.getExtensions();if(n||n.length){for(const i of s.getMediasByType("video")){const e=i.getExtensions();n.forEach(((s,n)=>{if(!e.get(n)){const e=i.getId(),r="a=extmap:"+n+" "+s+"\r\n",o=new RegExp("(a=mid:"+e+"\r\n(?:.*\r\n)*?)","g");t=t.replace(o,((t,i,e)=>i+r))}}))}return t}},getCodecPayloadType(t){const i=t.matchAll(/a=rtpmap:(\d+) (\w+)\/\d+/g),e={};for(const t of i)e[t[1]]=t[2];return e}},He=t=>t.getAudioTracks().some((t=>t.getSettings().channelCount>2)),Xe={VP8:"vp8",VP9:"vp9",H264:"h264",AV1:"av1",H265:"h265"},Ze={OPUS:"opus",MULTIOPUS:"multiopus"},qe=rt.get("PeerConnection"),Ke="Publisher",Je="Viewer",$e={track:"track",connectionStateChange:"connectionStateChange"},ts={stereo:!1,mediaStream:null,codec:"h264",simulcast:!1,scalabilityMode:null,disableAudio:!1,disableVideo:!1,setSDPToPeer:!0};class is extends bt{async createRTCPeer(t,i){void 0===t&&(t={autoInitStats:!0,statsIntervalMs:1e3}),void 0===i&&(i=Je),qe.info("Creating new RTCPeerConnection"),qe.debug("RTC configuration provided by user: ",t),this.peer=ns(this,t),this.mode=i,t.autoInitStats&&this.initStats(t)}getRTCPeer(){return qe.info("Getting RTC Peer"),this.peer}async closeRTCPeer(){var t;qe.info("Closing RTCPeerConnection"),null==(t=this.peer)||t.close(),this.peer=null,this.stopStats(),this.emit($e.connectionStateChange,"closed")}async setRTCRemoteSDP(t){qe.info("Setting RTC Remote SDP");const i={type:"answer",sdp:t};try{await this.peer.setRemoteDescription(i),qe.info("RTC Remote SDP was set successfully."),qe.debug("RTC Remote SDP new value: ",t)}catch(t){throw qe.error("Error while setting RTC Remote SDP: ",t),t}}async getRTCLocalSDP(t){void 0===t&&(t=ts),qe.info("Getting RTC Local SDP"),t=l(l({},ts),t),qe.debug("Options: ",t);const i=ss(t.mediaStream);i?os(this.peer,i,t):hs(this.peer,t),qe.info("Creating peer offer");const e=await this.peer.createOffer();return qe.info("Peer offer created"),qe.debug("Peer offer response: ",e.sdp),this.sessionDescription=e,t.disableAudio||(t.stereo&&(this.sessionDescription.sdp=We.setStereo(this.sessionDescription.sdp)),t.dtx&&(this.sessionDescription.sdp=We.setDTX(this.sessionDescription.sdp)),this.sessionDescription.sdp=We.setMultiopus(this.sessionDescription.sdp,i)),!t.disableVideo&&t.simulcast&&(this.sessionDescription.sdp=We.setSimulcast(this.sessionDescription.sdp,t.codec)),t.absCaptureTime&&(this.sessionDescription.sdp=We.setAbsoluteCaptureTime(this.sessionDescription.sdp)),t.dependencyDescriptor&&(this.sessionDescription.sdp=We.setDependencyDescriptor(this.sessionDescription.sdp)),t.setSDPToPeer&&(await this.peer.setLocalDescription(this.sessionDescription),qe.info("Peer local description set")),this.sessionDescription.sdp}async addRemoteTrack(t,i){try{let e=this.peer.addTransceiver(t,{direction:"recvonly",streams:i});return e=await as(e,i),e}catch(t){throw qe.error("Error while adding the remote track: ",t),t}}updateBandwidthRestriction(t,i){if(this.mode===Je)throw qe.error("Viewer attempting to update bitrate, this is not allowed"),new g("It is not possible for a viewer to update the bitrate.");return qe.info("Updating bandwidth restriction, bitrate value: ",i),qe.debug("SDP value: ",t),We.setVideoBitrate(t,i)}async updateBitrate(t){if(void 0===t&&(t=0),this.mode===Je)throw qe.error("Viewer attempting to update bitrate, this is not allowed"),new g("It is not possible for a viewer to update the bitrate.");if(!this.peer)throw qe.error("Cannot update bitrate. No peer found."),new g("Cannot update bitrate. No peer found.");qe.info("Updating bitrate to value: ",t),this.sessionDescription=await this.peer.createOffer(),await this.peer.setLocalDescription(this.sessionDescription);const i=this.updateBandwidthRestriction(this.peer.remoteDescription.sdp,t);await this.setRTCRemoteSDP(i),qe.info("Bitrate restrictions updated: ","".concat(t>0?t:"unlimited"," kbps"))}getRTCPeerStatus(){if(qe.info("Getting RTC peer status"),!this.peer)return null;const t=us(this.peer);return qe.info("RTC peer status getted, value: ",t),t}replaceTrack(t){if(!this.peer)return void qe.error("Could not change track if there is not an active connection.");const i=this.peer.getSenders().find((i=>i.track.kind===t.kind));i?i.replaceTrack(t):qe.error("There is no ".concat(t.kind," track in active broadcast."))}static getCapabilities(t){const i=new Ue,e=RTCRtpSender.getCapabilities(t);if(e){const s={};let n=new RegExp("^video/(".concat(w.values(Xe).join("|"),")x?$"),"i");"audio"===t&&(n=new RegExp("^audio/(".concat(w.values(Ze).join("|"),")$"),"i"),i.isChrome()&&(s.multiopus={mimeType:"audio/multiopus",channels:6}));for(const t of e.codecs){const i=t.mimeType.match(n);if(i){const e=i[1].toLowerCase();if(s[e]=d(l({},s[e]),{mimeType:t.mimeType}),t.scalabilityModes){let i=s[e].scalabilityModes||[];i=[...i,...t.scalabilityModes],s[e].scalabilityModes=[...new Set(i)]}t.channels&&(s[e].channels=t.channels)}}e.codecs=w.keys(s).map((t=>l({codec:t},s[t])))}return e}getTracks(){var t,i;return null==(i=null==(t=this.peer)?void 0:t.getSenders())?void 0:i.map((t=>t.track))}initStats(t){this.peerConnectionStats?qe.warn("PeerConnection.initStats() has already been called. Automatic initialization occurs via View.connect(), Publish.connect() or this.createRTCPeer(). See options"):this.peer?(this.peerConnectionStats=new xt(this.peer,t),It(this.peerConnectionStats,this,[Lt])):qe.warn("Cannot init peer stats: RTCPeerConnection not initialized")}stopStats(){var t;null==(t=this.peerConnectionStats)||t.stop(),this.peerConnectionStats=null}constructor(){super(),this.mode=null,this.sessionDescription=null,this.peer=null,this.peerConnectionStats=null}}const es=t=>(null==t?void 0:t.getAudioTracks().length)<=1&&(null==t?void 0:t.getVideoTracks().length)<=1,ss=t=>{if(!t)return null;if(t instanceof MediaStream&&es(t))return t;if(!(t instanceof MediaStream)){qe.info("Creating MediaStream to add received tracks.");const i=new MediaStream;for(const e of t)i.addTrack(e);if(es(i))return i}throw qe.error("MediaStream must have 1 audio track and 1 video track, or at least one of them."),new g("MediaStream must have 1 audio track and 1 video track, or at least one of them.")},ns=(t,i)=>{const e=new RTCPeerConnection(i);return rs(t,e),e},rs=(t,i)=>{i.ontrack=i=>{qe.info("New track from peer."),qe.debug("Track event value: ",i),t.emit($e.track,i)},i.connectionState?i.onconnectionstatechange=e=>{qe.info("Peer connection state change: ",i.connectionState),t.emit($e.connectionStateChange,i.connectionState)}:i.oniceconnectionstatechange=e=>{qe.info("Peer ICE connection state change: ",i.iceConnectionState),t.emit($e.connectionStateChange,i.iceConnectionState)},i.onnegotiationneeded=async t=>{if(!i.remoteDescription)return;qe.info("Peer onnegotiationneeded, updating local description");const e=await i.createOffer();qe.info("Peer onnegotiationneeded, got local offer",e.sdp),e.sdp=We.updateMissingVideoExtensions(e.sdp,i.remoteDescription.sdp),await i.setLocalDescription(e);const s=We.renegotiate(e.sdp,i.remoteDescription.sdp);qe.info("Peer onnegotiationneeded, updating remote description",s),await i.setRemoteDescription({type:"answer",sdp:s}),qe.info("Peer onnegotiationneeded, renegotiation done")}},os=(t,i,e)=>{qe.info("Adding mediaStream tracks to RTCPeerConnection");for(const s of i.getTracks()){const n={streams:[i]};"audio"===s.kind&&(n.direction=e.disableAudio?"inactive":"sendonly"),"video"===s.kind&&(n.direction=e.disableVideo?"inactive":"sendonly",e.scalabilityMode&&(new Ue).isChrome()?(qe.debug("Video track with scalability mode: ".concat(e.scalabilityMode,".")),n.sendEncodings=[{scalabilityMode:e.scalabilityMode}]):e.scalabilityMode&&qe.warn("SVC is only supported in Google Chrome")),t.addTransceiver(s,n),qe.info("Track '".concat(s.label,"' added: "),"id: ".concat(s.id),"kind: ".concat(s.kind))}},hs=(t,i)=>{const e=new Ue;if(!i.disableVideo){const i=t.addTransceiver("video",{direction:"recvonly"});e.isOpera()&&i.setCodecPreferences(RTCRtpReceiver.getCapabilities("video").codecs.filter((t=>"video/H264"!==t.mimeType||t.sdpFmtpLine.includes("profile-level-id=4"))))}i.disableAudio||t.addTransceiver("audio",{direction:"recvonly"});for(let e=0;e<i.multiplexedAudioTracks;e++)t.addTransceiver("audio",{direction:"recvonly"})},as=async(t,i,e)=>(void 0===e&&(e=0),new Promise(((s,n)=>{if(t.mid){for(const e of i)e.addTrack(t.receiver.track);s(t)}else e>=10?n(new g("Error, maximum number of retries has been reached")):(e++,u((()=>{as(t,i,e).then(s).catch(n)}),50))}))),us=t=>{var i;const e=null!=(i=t.connectionState)?i:t.iceConnectionState;switch(e){case"checking":return"connecting";case"completed":return"connected";default:return e}};var cs={};w.defineProperty(cs,"__esModule",{value:!0}),cs.TypedEmitter=Mt.EventEmitter;const{TypedEmitter:ls}=cs;class ds extends ls{cmd(t,i){return this.tm.cmd(t,i,this.namespace)}event(t,i){return this.tm.event(t,i,this.namespace)}close(){return this.tm.namespaces.delete(this.namespace)}constructor(t,i){super(),this.namespace=t,this.tm=i}}const fs=A(class extends ls{Yd(t){this.transport.send(JSON.stringify(t))}cmd(t,i,e){return void 0===e&&(e=void 0),new Promise(((s,n)=>{if(!t||0===t.length)throw new g("Bad command name");const r={type:"cmd",transId:this.maxId++,name:t,data:i};e&&(r.namespace=e),this.transactions.set(r.transId,d(l({},r),{resolve:s,reject:n}));try{this.Yd(r)}catch(t){throw this.transactions.delete(r.transId),t}}))}event(t,i,e){if(void 0===e&&(e=void 0),!t||0===t.length)throw new g("Bad event name");const s={type:"event",name:t,data:i};e&&(s.namespace=e),this.Yd(s)}namespace(t){let i=this.namespaces.get(t);return i||(i=new ds(t,this),this.namespaces.set(t,i),i)}close(){for(const t of this.namespaces.values())t.close();this.transport.removeListener?this.transport.removeListener("message",this.listener):this.transport.removeEventListener("message",this.listener)}constructor(t){super(),this.maxId=0,this.namespaces=new Map,this.transactions=new Map,this.transport=t,this.listener=t=>{let i;try{i=JSON.parse(t.utf8Data||t.data||t)}catch(t){return}switch(i.type){case"cmd":const{transId:t}=i,s={name:i.name,data:i.data,namespace:i.namespace,accept:i=>{this.Yd({type:"response",transId:t,data:i})},reject:i=>{this.Yd({type:"error",transId:t,data:i})}};if(s.namespace){const t=this.namespaces.get(s.namespace);t?t.emit("cmd",s):this.emit("cmd",s)}else this.emit("cmd",s);break;case"response":{const t=this.transactions.get(i.transId);if(!t)return;this.transactions.delete(i.transId),t.resolve(i.data);break}case"error":{const t=this.transactions.get(i.transId);if(!t)return;this.transactions.delete(i.transId),t.reject(i.data);break}case"event":const n={name:i.name,data:i.data,namespace:i.namespace};if(n.namespace){var e=this.namespaces.get(n.namespace);e?e.emit("event",n):this.emit("event",n)}else this.emit("event",n)}},this.transport.addListener?this.transport.addListener("message",this.listener):this.transport.addEventListener("message",this.listener)}}),_s=rt.get("Signaling"),gs="wsConnectionSuccess",ws="wsConnectionError",vs="wsConnectionClose",ms="broadcastEvent";class ps extends bt{async connect(){var t;return _s.info("Connecting to Signaling Server"),this.transactionManager&&(null==(t=this.webSocket)?void 0:t.readyState)===WebSocket.OPEN?(_s.info("Connected to server: ",this.webSocket.url),_s.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(gs,{ws:this.webSocket,tm:this.transactionManager}),this.webSocket):new Promise(((t,i)=>{this.webSocket=new WebSocket(this.wsUrl),this.transactionManager=new fs(this.webSocket),this.webSocket.onopen=()=>{_s.info("WebSocket opened"),this.transactionManager.on("event",(t=>{this.emit(ms,t)})),_s.info("Connected to server: ",this.webSocket.url),_s.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(gs,{ws:this.webSocket,tm:this.transactionManager}),t(this.webSocket)},this.webSocket.onerror=()=>{_s.error("WebSocket not connected: ",this.webSocket.url),this.emit(ws,this.webSocket.url),i(this.webSocket.url)},this.webSocket.onclose=()=>{this.webSocket=null,this.transactionManager=null,_s.info("Connection closed with Signaling Server."),this.emit(vs)}}))}close(){var t;_s.info("Closing connection with Signaling Server."),null==(t=this.webSocket)||t.close()}async subscribe(t,i,e,s){var n,r,o,h;void 0===e&&(e=null),void 0===s&&(s=null),_s.info("Starting subscription to streamName: ",this.streamName),_s.debug("Subcription local description: ",t);const a=As(i,e,s),u={sdp:t=We.adaptCodecName(t,"AV1X",Xe.AV1),streamId:this.streamName,pinnedSourceId:a.pinnedSourceId,excludedSourceIds:a.excludedSourceIds};a.vad&&(u.vad=!0),Array.isArray(a.events)&&(u.events=a.events),a.forcePlayoutDelay&&(u.forcePlayoutDelay=a.forcePlayoutDelay),a.layer&&(u.layer=a.layer);try{await this.connect(),_s.info("Sending view command");const t=await this.transactionManager.cmd("view",u),i=null==(h=null==(o=null==(r=null==(n=RTCRtpReceiver.getCapabilities)?void 0:n.call(RTCRtpReceiver,"video"))?void 0:r.codecs)?void 0:o.find)?void 0:h.call(o,(t=>"video/AV1X"===t.mimeType));return t.sdp=i?We.adaptCodecName(t.sdp,Xe.AV1,"AV1X"):t.sdp,_s.info("Command sent, subscriberId: ",t.subscriberId),_s.debug("Command result: ",t),this.serverId=t.subscriberId,this.clusterId=t.clusterId,this.streamViewId=t.streamViewId,Q(this.streamName),F(this.serverId),Y(t.streamViewId),H(this.clusterId),t.sdp}catch(t){throw _s.error("Error sending view command, error: ",t),t}}async publish(t,i,e,s){var n,r,o,h,a,u,c,l;void 0===e&&(e=null),void 0===s&&(s=null);const d=ys(i,e,s);_s.info("Starting publishing to streamName: ".concat(this.streamName,", codec: ").concat(d.codec)),_s.debug("Publishing local description: ",t);const f=null!=(h=null==(o=null==(r=null==(n=is.getCapabilities)?void 0:n.call(is,"video"))?void 0:r.codecs)?void 0:o.map((t=>t.codec)))?h:[],_=w.values(Xe);if(-1===_.indexOf(d.codec))throw _s.error("Invalid codec ".concat(d.codec,". Possible values are: "),_),new g("Invalid codec ".concat(d.codec,". Possible values are: ").concat(_));if(f.length>0&&-1===f.indexOf(d.codec))throw _s.error("Unsupported codec ".concat(d.codec,". Possible values are: "),f),new g("Unsupported codec ".concat(d.codec,". Possible values are: ").concat(f));d.codec===Xe.AV1&&(t=We.adaptCodecName(t,"AV1X",Xe.AV1));const v={name:this.streamName,sdp:t,codec:d.codec,sourceId:d.sourceId};if(d.priority){if(!(Number.isInteger(d.priority)&&d.priority>=-2147483648&&d.priority<=2147483647))throw new g("Invalid value for priority option. It should be a decimal integer between the range [-2^31, +2^31 - 1]");v.priority=d.priority}null!==d.record&&(v.record=d.record),Array.isArray(d.events)&&(v.events=d.events);try{await this.connect(),_s.info("Sending publish command");const t=await this.transactionManager.cmd("publish",v);if(d.codec===Xe.AV1){const i=null==(l=null==(c=null==(u=null==(a=RTCRtpSender.getCapabilities)?void 0:a.call(RTCRtpSender,"video"))?void 0:u.codecs)?void 0:c.find)?void 0:l.call(c,(t=>"video/AV1X"===t.mimeType));t.sdp=i?We.adaptCodecName(t.sdp,Xe.AV1,"AV1X"):t.sdp}return _s.info("Command sent, publisherId: ",t.publisherId),_s.debug("Command result: ",t),this.serverId=t.publisherId,this.clusterId=t.clusterId,Q(this.streamName),F(this.serverId),G(t.feedId),H(this.clusterId),t.sdp}catch(t){throw _s.error("Error sending publish command, error: ",t),t}}async cmd(t,i){return _s.info("Sending cmd: ".concat(t)),this.transactionManager.cmd(t,i)}constructor(t={streamName:null,url:"ws://localhost:8080/"}){super(),this.streamName=t.streamName,this.wsUrl=t.url,this.webSocket=null,this.transactionManager=null,this.serverId=null,this.clusterId=null,this.streamViewId=null}}const As=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={vad:t,pinnedSourceId:i,excludedSourceIds:e}),s},ys=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={codec:null!=t?t:Xe.H264,record:i,sourceId:e}),s};class Ms extends g{constructor(t,i){super(t),this.name="FetchError",this.status=i}}const bs=rt.get("Director"),Ts="WebRtc";let Ss="",Ns="https://director.millicast.com";const Is={setEndpoint:t=>{Ns=t.replace(/\/$/,"")},getEndpoint:()=>Ns,setLiveDomain:t=>{Ss=t.replace(/\/$/,"")},getLiveDomain:()=>Ss,getPublisher:async(t,i,e)=>{void 0===i&&(i=null),void 0===e&&(e=Ts);const s=Ds(t,i,e);bs.info("Getting publisher connection path for stream name: ",s.streamName);const n={streamName:s.streamName,streamType:s.streamType},r={"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},o="".concat(Is.getEndpoint(),"/api/director/publish");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let i=await t.json();if("fail"===i.status)throw new Ms(i.data.message,t.status);return i=ks(i),bs.debug("Getting publisher response: ",i),U(i.data.streamAccountId),i.data}catch(t){throw bs.error("Error while getting publisher connection path. ",t),t}},getSubscriber:async(t,i,e)=>{void 0===i&&(i=null),void 0===e&&(e=null);const s=Es(t,i,e);U(s.streamAccountId),bs.info("Getting subscriber connection data for stream name: ".concat(s.streamName," and account id: ").concat(s.streamAccountId));const n={streamAccountId:s.streamAccountId,streamName:s.streamName};let r={"Content-Type":"application/json"};s.subscriberToken&&(r=d(l({},r),{Authorization:"Bearer ".concat(s.subscriberToken)}));const o="".concat(Is.getEndpoint(),"/api/director/subscribe");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let i=await t.json();if("fail"===i.status)throw new Ms(i.data.message,t.status);return i=ks(i),bs.debug("Getting subscriber response: ",i),i.data}catch(t){throw bs.error("Error while getting subscriber connection path. ",t),t}}},Ds=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={token:t,streamName:i,streamType:e}),s},Es=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={streamName:t,streamAccountId:i,subscriberToken:e}),s},ks=t=>{if(Is.getLiveDomain()){const i=/\/\/(.*?)\//,e=t.data.urls.map((t=>{const e=i.exec(t);return t.replace(e[1],Is.getLiveDomain())}));t.data.urls=e}return t};function Ls(t){this.message=t}Ls.prototype=new g,Ls.prototype.name="InvalidCharacterError";var Cs=typeof s<"u"&&s.atob&&s.atob.bind(s)||function(t){var i=String(t).replace(/=+$/,"");if(i.length%4==1)throw new Ls("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,s,n=0,r=0,o="";s=i.charAt(r++);~s&&(e=n%4?64*e+s:s,n++%4)?o+=String.fromCharCode(255&e>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return o};function Os(t){this.message=t}function js(t,i){if("string"!=typeof t)throw new Os("Invalid token specified");var e=!0===(i=i||{}).header?0:1;try{return JSON.parse(function(t){var i=t.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Cs(i).replace(/(.)/g,(function(t,i){var e=i.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e})))}catch(t){return Cs(i)}}(t.split(".")[e]))}catch(t){throw new Os("Invalid token specified: "+t.message)}}Os.prototype=new g,Os.prototype.name="InvalidTokenError";var Rs={exports:{}};!function(t,i){!function(e){if(null!=i&&"number"!=typeof i.nodeType)t.exports=e();else{var s=e(),n=typeof self<"u"?self:xs.global;"function"!=typeof n.btoa&&(n.btoa=s.btoa),"function"!=typeof n.atob&&(n.atob=s.atob)}}((function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(t){this.message=t}return i.prototype=new g,i.prototype.name="InvalidCharacterError",{btoa:function(e){for(var s,n,r,o,h=String(e),a=0,u="";a<h.length;){if(s=h.charCodeAt(a++),n=h.charCodeAt(a++),r=h.charCodeAt(a++),s>255||n>255||r>255)throw new i("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u+=t.charAt((o=s<<16|n<<8|r)>>18&63)+t.charAt(o>>12&63)+t.charAt(o>>6&63)+t.charAt(63&o)}switch(h.length%3){case 0:return u;case 1:return u.slice(0,-2)+"==";case 2:return u.slice(0,-1)+"="}},atob:function(e){var s=String(e).replace(/[=]+$/,"");if(s.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,h=0,a="";r=s.charAt(h++);~r&&(n=o%4?64*n+r:r,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)r=t.indexOf(r);return a}}}))}(Rs,Rs.exports);var Ps=Rs.exports,zs={exports:{}};!function(t,i){var e;self,e=()=>{return t={7629:(t,i,e)=>{const s=e(375),n=e(8571),r=e(9474),o=e(1687),h=e(8652),a=e(8160),u=e(3292),c=e(6354),l=e(8901),d=e(9708),f=e(6914),_=e(2294),v=e(6133),m=e(1152),p=e(8863),A=e(2036),y={Base:class{Gd(){this.Vd=new _.Ids,this.Wd=null,this.Hd=new v.Manager,this.Xd=null,this.Zd=null,this.qd=null,this.Kd={},this.Jd=[],this.$d=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return s("function"==typeof d.describe,"Manifest functionality disabled"),d.describe(this)}allow(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"allow"),this.tf(i,"Zd")}alter(t){s(t&&"object"==typeof t&&!Array.isArray(t),"Invalid targets argument"),s(!this.ef(),"Cannot set alterations inside a ruleset");const i=this.clone();i.$_terms.alterations=i.$_terms.alterations||[];for(const e in t){const n=t[e];s("function"==typeof n,"Alteration adjuster for",e,"must be a function"),i.$_terms.alterations.push({target:e,adjuster:n})}return i.$_temp.ruleset=!1,i}artifact(t){return s(void 0!==t,"Artifact cannot be undefined"),s(!this.Xd,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",t)}cast(t){return s(!1===t||"string"==typeof t,"Invalid to value"),s(!1===t||this.sf.cast[t],"Type",this.type,"does not support casting to",t),this.$_setFlag("cast",!1===t?void 0:t)}default(t,i){return this.nf("default",t,i)}description(t){return s(t&&"string"==typeof t,"Description must be a non-empty string"),this.$_setFlag("description",t)}empty(t){const i=this.clone();return void 0!==t&&(t=i.$_compile(t,{override:!1})),i.$_setFlag("empty",t,{clone:!1})}error(t){return s(t,"Missing error"),s(t instanceof g||"function"==typeof t,"Must provide a valid Error object or a function"),this.$_setFlag("error",t)}example(t,i){return void 0===i&&(i={}),s(void 0!==t,"Missing example"),a.assertOptions(i,["override"]),this.rf("examples",t,{single:!0,override:i.override})}external(t,i){return"object"==typeof t&&(s(!i,"Cannot combine options with description"),i=t.description,t=t.method),s("function"==typeof t,"Method must be a function"),s(void 0===i||i&&"string"==typeof i,"Description must be a non-empty string"),this.rf("externals",{method:t,description:i},{single:!0})}failover(t,i){return this.nf("failover",t,i)}forbidden(){return this.presence("forbidden")}id(t){return t?(s("string"==typeof t,"id must be a non-empty string"),s(/^[^\.]+$/.test(t),"id cannot contain period character"),this.$_setFlag("id",t)):this.$_setFlag("id",void 0)}invalid(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return this.tf(i,"qd")}label(t){return s(t&&"string"==typeof t,"Label name must be a non-empty string"),this.$_setFlag("label",t)}meta(t){return s(void 0!==t,"Meta cannot be undefined"),this.rf("metas",t,{single:!0})}note(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];s(i.length,"Missing notes");for(const t of i)s(t&&"string"==typeof t,"Notes must be non-empty strings");return this.rf("notes",i)}only(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"Invalid mode:",t),this.$_setFlag("only",t)}optional(){return this.presence("optional")}prefs(t){s(t,"Missing preferences"),s(void 0===t.context,"Cannot override context"),s(void 0===t.externals,"Cannot override externals"),s(void 0===t.warnings,"Cannot override warnings"),s(void 0===t.debug,"Cannot override debug"),a.checkPreferences(t);const i=this.clone();return i.Wd=a.preferences(i.Wd,t),i}presence(t){return s(["optional","required","forbidden"].includes(t),"Unknown presence mode",t),this.$_setFlag("presence",t)}raw(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"raw":void 0)}result(t){return s(["raw","strip"].includes(t),"Unknown result mode",t),this.$_setFlag("result",t)}required(){return this.presence("required")}strict(t){const i=this.clone(),e=void 0!==t&&!t;return i.Wd=a.preferences(i.Wd,{convert:e}),i}strip(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"strip":void 0)}tag(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];s(i.length,"Missing tags");for(const t of i)s(t&&"string"==typeof t,"Tags must be non-empty strings");return this.rf("tags",i)}unit(t){return s(t&&"string"==typeof t,"Unit name must be a non-empty string"),this.$_setFlag("unit",t)}valid(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];a.verifyFlat(i,"valid");const s=this.allow(...i);return s.$_setFlag("only",!!s.Zd,{clone:!1}),s}when(t,i){const e=this.clone();e.$_terms.whens||(e.$_terms.whens=[]);const n=u.when(e,t,i);if(!["any","link"].includes(e.type)){const t=n.is?[n]:n.switch;for(const i of t)s(!i.then||"any"===i.then.type||i.then.type===e.type,"Cannot combine",e.type,"with",i.then&&i.then.type),s(!i.otherwise||"any"===i.otherwise.type||i.otherwise.type===e.type,"Cannot combine",e.type,"with",i.otherwise&&i.otherwise.type)}return e.$_terms.whens.push(n),e.$_mutateRebuild()}cache(t){s(!this.ef(),"Cannot set caching inside a ruleset"),s(!this.Xd,"Cannot override schema cache"),s(void 0===this.Kd.artifact,"Cannot cache a rule with an artifact");const i=this.clone();return i.Xd=t||h.provider.provision(),i.$_temp.ruleset=!1,i}clone(){const t=w.create(w.getPrototypeOf(this));return this.hf(t)}concat(t){s(a.isSchema(t),"Invalid schema object"),s("any"===this.type||"any"===t.type||t.type===this.type,"Cannot merge type",this.type,"with another type:",t.type),s(!this.ef(),"Cannot concatenate onto a schema with open ruleset"),s(!t.ef(),"Cannot concatenate a schema with open ruleset");let i=this.clone();if("any"===this.type&&"any"!==t.type){const e=t.clone();for(const t of w.keys(i))"type"!==t&&(e[t]=i[t]);i=e}i.Vd.concat(t.Vd),i.Hd.register(t,v.toSibling),i.Wd=i.Wd?a.preferences(i.Wd,t.Wd):t.Wd,i.Zd=A.merge(i.Zd,t.Zd,t.qd),i.qd=A.merge(i.qd,t.qd,t.Zd);for(const e of t.$d.keys())i.$d.has(e)&&(i.Jd=i.Jd.filter((t=>t.keep||t.name!==e)),i.$d.delete(e));for(const e of t.Jd)t.sf.rules[e.method].multi||i.$d.set(e.name,e),i.Jd.push(e);if(i.Kd.empty&&t.Kd.empty){i.Kd.empty=i.Kd.empty.concat(t.Kd.empty);const e=w.assign({},t.Kd);delete e.empty,o(i.Kd,e)}else if(t.Kd.empty){i.Kd.empty=t.Kd.empty;const e=w.assign({},t.Kd);delete e.empty,o(i.Kd,e)}else o(i.Kd,t.Kd);for(const e in t.$_terms){const s=t.$_terms[e];s?i.$_terms[e]?i.$_terms[e]=i.$_terms[e].concat(s):i.$_terms[e]=s.slice():i.$_terms[e]||(i.$_terms[e]=s)}return this.$_root.uf&&this.$_root.uf.cf(i,[this,t]),i.$_mutateRebuild()}extend(t){return s(!t.base,"Cannot extend type with another base"),l.type(this,t)}extract(t){return t=Array.isArray(t)?t:t.split("."),this.Vd.reach(t)}fork(t,i){s(!this.ef(),"Cannot fork inside a ruleset");let e=this;for(let s of[].concat(t))s=Array.isArray(s)?s:s.split("."),e=e.Vd.fork(s,i,e);return e.$_temp.ruleset=!1,e}rule(t){const i=this.sf;a.assertOptions(t,w.keys(i.modifiers)),s(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const e=null===this.$_temp.ruleset?this.Jd.length-1:this.$_temp.ruleset;s(e>=0&&e<this.Jd.length,"Cannot apply rules to empty ruleset");const r=this.clone();for(let o=e;o<r.Jd.length;++o){const e=r.Jd[o],h=n(e);for(const n in t)i.modifiers[n](h,t[n]),s(h.name===e.name,"Cannot change rule name");r.Jd[o]=h,r.$d.get(h.name)===e&&r.$d.set(h.name,h)}return r.$_temp.ruleset=!1,r.$_mutateRebuild()}get ruleset(){s(!this.ef(),"Cannot start a new ruleset without closing the previous one");const t=this.clone();return t.$_temp.ruleset=t.Jd.length,t}get $(){return this.ruleset}tailor(t){t=[].concat(t),s(!this.ef(),"Cannot tailor inside a ruleset");let i=this;if(this.$_terms.alterations)for(const{target:e,adjuster:n}of this.$_terms.alterations)t.includes(e)&&(i=n(i),s(a.isSchema(i),"Alteration adjuster for",e,"failed to return a schema object"));return i=i.$_modify({each:i=>i.tailor(t),ref:!1}),i.$_temp.ruleset=!1,i.$_mutateRebuild()}tracer(){return m.location?m.location(this):this}validate(t,i){return p.entry(t,this,i)}validateAsync(t,i){return p.entryAsync(t,this,i)}$_addRule(t){"string"==typeof t&&(t={name:t}),s(t&&"object"==typeof t,"Invalid options"),s(t.name&&"string"==typeof t.name,"Invalid rule name");for(const i in t)s("_"!==i[0],"Cannot set private rule properties");const i=w.assign({},t);i.lf=[],i.method=i.method||i.name;const e=this.sf.rules[i.method],n=i.args;s(e,"Unknown rule",i.method);const r=this.clone();if(n){s(1===w.keys(n).length||w.keys(n).length===this.sf.rules[i.name].args.length,"Invalid rule definition for",this.type,i.name);for(const t in n){let o=n[t];if(e.argsByName){const h=e.argsByName.get(t);if(h.ref&&a.isResolvable(o))i.lf.push(t),r.$_mutateRegister(o);else if(h.normalize&&(o=h.normalize(o),n[t]=o),h.assert){const i=a.validateArg(o,t,h);s(!i,i,"or reference")}}void 0!==o?n[t]=o:delete n[t]}}return e.multi||(r.df(i.name,{clone:!1}),r.$d.set(i.name,i)),!1===r.$_temp.ruleset&&(r.$_temp.ruleset=null),e.priority?r.Jd.unshift(i):r.Jd.push(i),r}$_compile(t,i){return u.schema(this.$_root,t,i)}$_createError(t,i,e,s,n,r){void 0===r&&(r={});const o=!1!==r.flags?this.Kd:{},h=r.messages?f.merge(this.sf.messages,r.messages):this.sf.messages;return new c.Report(t,i,e,o,h,s,n)}$_getFlag(t){return this.Kd[t]}$_getRule(t){return this.$d.get(t)}$_mapLabels(t){return t=Array.isArray(t)?t:t.split("."),this.Vd.labels(t)}$_match(t,i,e,s){(e=w.assign({},e)).abortEarly=!0,e._f=!1,i.snapshot();const n=!p.validate(t,this,i,e,s).errors;return i.restore(),n}$_modify(t){return a.assertOptions(t,["each","once","ref","schema"]),_.schema(this,t)||this}$_mutateRebuild(){return s(!this.ef(),"Cannot add this rule inside a ruleset"),this.Hd.reset(),this.Vd.reset(),this.$_modify({each:(t,i)=>{let{source:e,name:s,path:n,key:r}=i;const o=this.sf[e][s]&&this.sf[e][s].register;!1!==o&&this.$_mutateRegister(t,{family:o,key:r})}}),this.sf.rebuild&&this.sf.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(t,i){let{family:e,key:s}=void 0===i?{}:i;this.Hd.register(t,e),this.Vd.register(t,{key:s})}$_property(t){return this.sf.properties[t]}$_reach(t){return this.Vd.reach(t)}$_rootReferences(){return this.Hd.roots()}$_setFlag(t,i,e){void 0===e&&(e={}),s("_"===t[0]||!this.ef(),"Cannot set flag inside a ruleset");const n=this.sf.flags[t]||{};if(r(i,n.default)&&(i=void 0),r(i,this.Kd[t]))return this;const o=!1!==e.clone?this.clone():this;return void 0!==i?(o.Kd[t]=i,o.$_mutateRegister(i)):delete o.Kd[t],"_"!==t[0]&&(o.$_temp.ruleset=!1),o}$_parent(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];return this[t][a.symbols.parent].call(this,...e)}$_validate(t,i,e){return p.validate(t,this,i,e)}hf(t){t.type=this.type,t.$_root=this.$_root,t.$_temp=w.assign({},this.$_temp),t.$_temp.whens={},t.Vd=this.Vd.clone(),t.Wd=this.Wd,t.Zd=this.Zd&&this.Zd.clone(),t.qd=this.qd&&this.qd.clone(),t.Jd=this.Jd.slice(),t.$d=n(this.$d,{shallow:!0}),t.Hd=this.Hd.clone(),t.Kd=w.assign({},this.Kd),t.Xd=null,t.$_terms={};for(const i in this.$_terms)t.$_terms[i]=this.$_terms[i]?this.$_terms[i].slice():null;t.$_super={};for(const i in this.$_super)t.$_super[i]=this.gf[i].bind(t);return t}wf(){const t=this.clone();t.Gd();const i=t.sf.terms;for(const e in i){const s=i[e];t.$_terms[e]=s.init}return t.$_mutateRebuild()}nf(t,i,e){return void 0===e&&(e={}),a.assertOptions(e,"literal"),s(void 0!==i,"Missing",t,"value"),s("function"==typeof i||!e.literal,"Only function value supports literal option"),"function"==typeof i&&e.literal&&(i={[a.symbols.literal]:!0,literal:i}),this.$_setFlag(t,i)}vf(t,i,e){if(!this.$_terms.whens)return{schema:this};const s=[],n=[];for(let r=0;r<this.$_terms.whens.length;++r){const o=this.$_terms.whens[r];if(o.concat){s.push(o.concat),n.push("".concat(r,".concat"));continue}const h=o.ref?o.ref.resolve(t,i,e):t,a=o.is?[o]:o.switch,u=n.length;for(let u=0;u<a.length;++u){const{is:c,then:l,otherwise:d}=a[u],f="".concat(r).concat(o.switch?"."+u:"");if(c.$_match(h,i.nest(c,"".concat(f,".is")),e)){if(l){const r=i.localize([...i.path,"".concat(f,".then")],i.ancestors,i.schemas),{schema:o,id:h}=l.vf(t,r,e);s.push(o),n.push("".concat(f,".then").concat(h?"(".concat(h,")"):""));break}}else if(d){const r=i.localize([...i.path,"".concat(f,".otherwise")],i.ancestors,i.schemas),{schema:o,id:h}=d.vf(t,r,e);s.push(o),n.push("".concat(f,".otherwise").concat(h?"(".concat(h,")"):""));break}}if(o.break&&n.length>u)break}const r=n.join(", ");if(i.mainstay.tracer.debug(i,"rule","when",r),!r)return{schema:this};if(!i.mainstay.tracer.active&&this.$_temp.whens[r])return{schema:this.$_temp.whens[r],id:r};let o=this;this.sf.generate&&(o=this.sf.generate(this,t,i,e));for(const t of s)o=o.concat(t);return this.$_root.uf&&this.$_root.uf.cf(o,[this,...s]),this.$_temp.whens[r]=o,{schema:o,id:r}}rf(t,i,e){void 0===e&&(e={}),s(!this.ef(),"Cannot set ".concat(t," inside a ruleset"));const n=this.clone();return n.$_terms[t]&&!e.override||(n.$_terms[t]=[]),e.single?n.$_terms[t].push(i):n.$_terms[t].push(...i),n.$_temp.ruleset=!1,n}ef(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}df(t,i){if(void 0===i&&(i={}),!this.$d.has(t))return this;const e=!1!==i.clone?this.clone():this;e.$d.delete(t);const s=[];for(let i=0;i<e.Jd.length;++i){const n=e.Jd[i];n.name!==t||n.keep?s.push(n):e.ef()&&i<e.$_temp.ruleset&&--e.$_temp.ruleset}return e.Jd=s,e}tf(t,i){a.verifyFlat(t,i.slice(1,-1));const e=this.clone(),n=t[0]===a.symbols.override;if(n&&(t=t.slice(1)),!e[i]&&t.length?e[i]=new A:n&&(e[i]=t.length?new A:null,e.$_mutateRebuild()),!e[i])return e;n&&e[i].override();for(const n of t){s(void 0!==n,"Cannot call allow/valid/invalid with undefined"),s(n!==a.symbols.override,"Override must be the first value");const t="qd"===i?"Zd":"qd";e[t]&&(e[t].remove(n),e[t].length||(s("Zd"===i||!e.Kd.only,"Setting invalid value",n,"leaves schema rejecting all values due to previous valid rule"),e[t]=null)),e[i].add(n,e.Hd)}return e}constructor(t){this.type=t,this.$_root=null,this.sf={},this.Gd()}}};y.Base.prototype[a.symbols.any]={version:a.version,compile:u.compile,root:"$_root"},y.Base.prototype.isImmutable=!0,y.Base.prototype.deny=y.Base.prototype.invalid,y.Base.prototype.disallow=y.Base.prototype.invalid,y.Base.prototype.equal=y.Base.prototype.valid,y.Base.prototype.exist=y.Base.prototype.required,y.Base.prototype.not=y.Base.prototype.invalid,y.Base.prototype.options=y.Base.prototype.prefs,y.Base.prototype.preferences=y.Base.prototype.prefs,t.exports=new y.Base},8652:(t,i,e)=>{const s=e(375),n=e(8571),r=e(8160),o={max:1e3,supported:new Set(["undefined","boolean","number","string"])};i.provider={provision:t=>new o.Cache(t)},o.Cache=class{get length(){return this.mf.size}set(t,i){if(null!==t&&!o.supported.has(typeof t))return;let e=this.mf.get(t);if(e)return e.value=i,void this.pf.first(e);e=this.pf.unshift({key:t,value:i}),this.mf.set(t,e),this.Af()}get(t){const i=this.mf.get(t);if(i)return this.pf.first(i),n(i.value)}Af(){if(this.mf.size>this.yf){const t=this.pf.pop();this.mf.delete(t.key)}}constructor(t={}){r.assertOptions(t,["max"]),s(void 0===t.max||t.max&&t.max>0&&isFinite(t.max),"Invalid max cache size"),this.yf=t.max||o.max,this.mf=new Map,this.pf=new o.List}},o.List=class{unshift(t){return t.next=null,t.prev=this.head,this.head&&(this.head.next=t),this.head=t,this.tail||(this.tail=t),t}first(t){t!==this.head&&(this.Mf(t),this.unshift(t))}pop(){return this.Mf(this.tail)}Mf(t){const{next:i,prev:e}=t;return i.prev=e,e&&(e.next=i),t===this.tail&&(this.tail=i),t.prev=null,t.next=null,t}constructor(){this.tail=null,this.head=null}}},8160:(t,i,e)=>{const s=e(375),n=e(7916),r=e(5934);let o,h;const a={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};i.version=r.version,i.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},i.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},i.assertOptions=function(t,i,e){void 0===e&&(e="Options"),s(t&&"object"==typeof t&&!Array.isArray(t),"Options must be of type object");const n=w.keys(t).filter((t=>!i.includes(t)));s(0===n.length,"".concat(e," contain unknown keys: ").concat(n))},i.checkPreferences=function(t){h=h||e(3378);const i=h.preferences.validate(t);if(i.error)throw new n([i.error.details[0].message])},i.compare=function(t,i,e){switch(e){case"=":return t===i;case">":return t>i;case"<":return t<i;case">=":return t>=i;case"<=":return t<=i}},i.default=function(t,i){return void 0===t?i:t},i.isIsoDate=function(t){return a.isoDate.test(t)},i.isNumber=function(t){return"number"==typeof t&&!S(t)},i.isResolvable=function(t){return!!t&&(t[i.symbols.ref]||t[i.symbols.template])},i.isSchema=function(t,e){void 0===e&&(e={});const n=t&&t[i.symbols.any];return!!n&&(s(e.legacy||n.version===i.version,"Cannot mix different versions of joi schemas"),!0)},i.isValues=function(t){return t[i.symbols.values]},i.limit=function(t){return Number.isSafeInteger(t)&&t>=0},i.preferences=function(t,s){o=o||e(6914),t=t||{},s=s||{};const n=w.assign({},t,s);return s.errors&&t.errors&&(n.errors=w.assign({},t.errors,s.errors),n.errors.wrap=w.assign({},t.errors.wrap,s.errors.wrap)),s.messages&&(n.messages=o.compile(s.messages,t.messages)),delete n[i.symbols.prefs],n},i.tryWithPath=function(t,i,e){void 0===e&&(e={});try{return t()}catch(t){throw void 0!==t.path?t.path=i+"."+t.path:t.path=i,e.append&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},i.validateArg=function(t,e,s){let{assert:n,message:r}=s;if(i.isSchema(n)){const i=n.validate(t);return i.error?i.error.message:void 0}if(!n(t))return e?"".concat(e," ").concat(r):r},i.verifyFlat=function(t,i){for(const e of t)s(!Array.isArray(e),"Method no longer accepts array arguments:",i)}},3292:(t,i,e)=>{const s=e(375),n=e(8160),r=e(6133),o={};i.schema=function(t,i,e){void 0===e&&(e={}),n.assertOptions(e,["appendPath","override"]);try{return o.schema(t,i,e)}catch(t){throw e.appendPath&&void 0!==t.path&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},o.schema=function(t,i,e){s(void 0!==i,"Invalid undefined schema"),Array.isArray(i)&&(s(i.length,"Invalid empty array schema"),1===i.length&&(i=i[0]));const r=function(i){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return!1!==e.override?i.valid(t.override,...n):i.valid(...n)};if(o.simple(i))return r(t,i);if("function"==typeof i)return t.custom(i);if(s("object"==typeof i,"Invalid schema content:",typeof i),n.isResolvable(i))return r(t,i);if(n.isSchema(i))return i;if(Array.isArray(i)){for(const e of i)if(!o.simple(e))return t.alternatives().try(...i);return r(t,...i)}return i instanceof RegExp?t.string().regex(i):i instanceof Date?r(t.date(),i):(s(w.getPrototypeOf(i)===w.getPrototypeOf({}),"Schema can only contain plain objects"),t.object().keys(i))},i.ref=function(t,i){return r.isRef(t)?t:r.create(t,i)},i.compile=function(t,e,r){void 0===r&&(r={}),n.assertOptions(r,["legacy"]);const h=e&&e[n.symbols.any];if(h)return s(r.legacy||h.version===n.version,"Cannot mix different versions of joi schemas:",h.version,n.version),e;if("object"!=typeof e||!r.legacy)return i.schema(t,e,{appendPath:!0});const a=o.walk(e);return a?a.compile(a.root,e):i.schema(t,e,{appendPath:!0})},o.walk=function(t){if("object"!=typeof t)return null;if(Array.isArray(t)){for(const i of t){const t=o.walk(i);if(t)return t}return null}const i=t[n.symbols.any];if(i)return{root:t[i.root],compile:i.compile};s(w.getPrototypeOf(t)===w.getPrototypeOf({}),"Schema can only contain plain objects");for(const i in t){const e=o.walk(t[i]);if(e)return e}return null},o.simple=function(t){return null===t||["boolean","string","number"].includes(typeof t)},i.when=function(t,e,h){if(void 0===h&&(s(e&&"object"==typeof e,"Missing options"),h=e,e=r.create(".")),Array.isArray(h)&&(h={switch:h}),n.assertOptions(h,["is","not","then","otherwise","switch","break"]),n.isSchema(e))return s(void 0===h.is,'"is" can not be used with a schema condition'),s(void 0===h.not,'"not" can not be used with a schema condition'),s(void 0===h.switch,'"switch" can not be used with a schema condition'),o.condition(t,{is:e,then:h.then,otherwise:h.otherwise,break:h.break});if(s(r.isRef(e)||"string"==typeof e,"Invalid condition:",e),s(void 0===h.not||void 0===h.is,'Cannot combine "is" with "not"'),void 0===h.switch){let a=h;void 0!==h.not&&(a={is:h.not,then:h.otherwise,otherwise:h.then,break:h.break});let u=void 0!==a.is?t.$_compile(a.is):t.$_root.invalid(null,!1,0,"").required();return s(void 0!==a.then||void 0!==a.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),s(void 0===a.break||void 0===a.then||void 0===a.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===h.is||r.isRef(h.is)||n.isSchema(h.is)||(u=u.required()),o.condition(t,{ref:i.ref(e),is:u,then:a.then,otherwise:a.otherwise,break:a.break})}s(Array.isArray(h.switch),'"switch" must be an array'),s(void 0===h.is,'Cannot combine "switch" with "is"'),s(void 0===h.not,'Cannot combine "switch" with "not"'),s(void 0===h.then,'Cannot combine "switch" with "then"');const a={ref:i.ref(e),switch:[],break:h.break};for(let i=0;i<h.switch.length;++i){const e=h.switch[i],o=i===h.switch.length-1;n.assertOptions(e,o?["is","then","otherwise"]:["is","then"]),s(void 0!==e.is,'Switch statement missing "is"'),s(void 0!==e.then,'Switch statement missing "then"');const u={is:t.$_compile(e.is),then:t.$_compile(e.then)};if(r.isRef(e.is)||n.isSchema(e.is)||(u.is=u.is.required()),o){s(void 0===h.otherwise||void 0===e.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const i=void 0!==h.otherwise?h.otherwise:e.otherwise;void 0!==i&&(s(void 0===a.break,"Cannot specify both otherwise and break"),u.otherwise=t.$_compile(i))}a.switch.push(u)}return a},o.condition=function(t,i){for(const e of["then","otherwise"])void 0===i[e]?delete i[e]:i[e]=t.$_compile(i[e]);return i}},6354:(t,i,e)=>{const s=e(5688),n=e(8160),r=e(3328);i.Report=class{bf(t){if(this.template=t,!this.flags.label&&0===this.path.length){const t=this.Tf(this.template,"root");t&&(this.local.label=t)}}toString(){if(this.message)return this.message;const t=this.code;if(!this.prefs.errors.render)return this.code;const i=this.Tf(this.template)||this.Tf(this.prefs.messages)||this.Tf(this.messages);return void 0===i?'Error code "'.concat(t,'" is not defined, your custom type is missing the correct messages definition'):(this.message=i.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}Tf(t,e){return i.template(this.value,t,e||this.code,this.state,this.prefs)}constructor(t,e,s,n,r,o,h){if(this.code=t,this.flags=n,this.messages=r,this.path=o.path,this.prefs=h,this.state=o,this.value=e,this.message=null,this.template=null,this.local=s||{},this.local.label=i.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const t=this.path[this.path.length-1];"object"!=typeof t&&(this.local.key=t)}}},i.path=function(t){let i="";for(const e of t)"object"!=typeof e&&("string"==typeof e?(i&&(i+="."),i+=e):i+="[".concat(e,"]"));return i},i.template=function(t,i,e,s,o){if(!i)return;if(r.isTemplate(i))return"root"!==e?i:null;let h=o.errors.language;if(n.isResolvable(h)&&(h=h.resolve(t,s,o)),h&&i[h]){if(void 0!==i[h][e])return i[h][e];if(void 0!==i[h]["*"])return i[h]["*"]}return i[e]?i[e]:i["*"]},i.label=function(t,e,s,n){if(t.label)return t.label;if(!s.errors.label)return"";let r=e.path;return"key"===s.errors.label&&e.path.length>1&&(r=e.path.slice(-1)),i.path(r)||i.template(null,s.messages,"root",e,s)||n&&i.template(null,n,"root",e,s)||"value"},i.process=function(t,e,s){if(!t)return null;const{override:n,message:r,details:o}=i.details(t);if(n)return n;if(s.errors.stack)return new i.ValidationError(r,o,e);const h=g.stackTraceLimit;g.stackTraceLimit=0;const a=new i.ValidationError(r,o,e);return g.stackTraceLimit=h,a},i.details=function(t,i){void 0===i&&(i={});let e=[];const s=[];for(const n of t){if(n instanceof g){if(!1!==i.override)return{override:n};const t=n.toString();e.push(t),s.push({message:t,type:"override",context:{error:n}});continue}const t=n.toString();e.push(t),s.push({message:t,path:n.path.filter((t=>"object"!=typeof t)),type:n.code,context:n.local})}return e.length>1&&(e=[...new Set(e)]),{message:e.join(". "),details:s}},i.ValidationError=class extends g{static isError(t){return t instanceof i.ValidationError}constructor(t,i,e){super(t),this.Sf=e,this.details=i}},i.ValidationError.prototype.isJoi=!0,i.ValidationError.prototype.name="ValidationError",i.ValidationError.prototype.annotate=s.error},8901:(t,i,e)=>{const s=e(375),n=e(8571),r=e(8160),o=e(6914),h={};i.type=function(t,i){const e=w.getPrototypeOf(t),a=n(e),u=t.hf(w.create(a)),c=w.assign({},i);delete c.base,a.sf=c;const l=e.sf||{};c.messages=o.merge(l.messages,c.messages),c.properties=w.assign({},l.properties,c.properties),u.type=c.type,c.flags=w.assign({},l.flags,c.flags);const d=w.assign({},l.terms);if(c.terms)for(const t in c.terms){const i=c.terms[t];s(void 0===u.$_terms[t],"Invalid term override for",c.type,t),u.$_terms[t]=i.init,d[t]=i}c.terms=d,c.args||(c.args=l.args),c.prepare=h.prepare(c.prepare,l.prepare),c.coerce&&("function"==typeof c.coerce&&(c.coerce={method:c.coerce}),c.coerce.from&&!Array.isArray(c.coerce.from)&&(c.coerce={method:c.coerce.method,from:[].concat(c.coerce.from)})),c.coerce=h.coerce(c.coerce,l.coerce),c.validate=h.validate(c.validate,l.validate);const f=w.assign({},l.rules);if(c.rules)for(const t in c.rules){const i=c.rules[t];s("object"==typeof i,"Invalid rule definition for",c.type,t);let e=i.method;if(void 0===e&&(e=function(){return this.$_addRule(t)}),e&&(s(!a[t],"Rule conflict in",c.type,t),a[t]=e),s(!f[t],"Rule conflict in",c.type,t),f[t]=i,i.alias){const t=[].concat(i.alias);for(const e of t)a[e]=i.method}i.args&&(i.argsByName=new Map,i.args=i.args.map((t=>("string"==typeof t&&(t={name:t}),s(!i.argsByName.has(t.name),"Duplicated argument name",t.name),r.isSchema(t.assert)&&(t.assert=t.assert.strict().label(t.name)),i.argsByName.set(t.name,t),t))))}c.rules=f;const _=w.assign({},l.modifiers);if(c.modifiers)for(const t in c.modifiers){s(!a[t],"Rule conflict in",c.type,t);const i=c.modifiers[t];s("function"==typeof i,"Invalid modifier definition for",c.type,t);const e=function(i){return this.rule({[t]:i})};a[t]=e,_[t]=i}if(c.modifiers=_,c.overrides){a.gf=e,u.$_super={};for(const t in c.overrides)s(e[t],"Cannot override missing",t),c.overrides[t][r.symbols.parent]=e[t],u.$_super[t]=e[t].bind(u);w.assign(a,c.overrides)}c.cast=w.assign({},l.cast,c.cast);const g=w.assign({},l.manifest,c.manifest);return g.build=h.build(c.manifest&&c.manifest.build,l.manifest&&l.manifest.build),c.manifest=g,c.rebuild=h.rebuild(c.rebuild,l.rebuild),u},h.build=function(t,i){return t&&i?function(e,s){return i(t(e,s),s)}:t||i},h.coerce=function(t,i){return t&&i?{from:t.from&&i.from?[...new Set([...t.from,...i.from])]:null,method(e,s){let n;if((!i.from||i.from.includes(typeof e))&&(n=i.method(e,s),n)){if(n.errors||void 0===n.value)return n;e=n.value}if(!t.from||t.from.includes(typeof e)){const i=t.method(e,s);if(i)return i}return n}}:t||i},h.prepare=function(t,i){return t&&i?function(e,s){const n=t(e,s);if(n){if(n.errors||void 0===n.value)return n;e=n.value}return i(e,s)||n}:t||i},h.rebuild=function(t,i){return t&&i?function(e){i(e),t(e)}:t||i},h.validate=function(t,i){return t&&i?function(e,s){const n=i(e,s);if(n){if(n.errors&&(!Array.isArray(n.errors)||n.errors.length))return n;e=n.value}return t(e,s)||n}:t||i}},5107:(t,i,e)=>{const s=e(375),n=e(8571),r=e(8652),o=e(8160),h=e(3292),a=e(6354),u=e(8901),c=e(9708),l=e(6133),d=e(3328),f=e(1152);let _;const v={types:{alternatives:e(4946),any:e(8068),array:e(546),boolean:e(4937),date:e(7500),function:e(390),link:e(8785),number:e(3832),object:e(8966),string:e(7417),symbol:e(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const t={Nf:new Set(w.keys(v.types))};for(const i of t.Nf)t[i]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return s(!e.length||["alternatives","link","object"].includes(i),"The",i,"type does not allow arguments"),v.generate(this,v.types[i],e)};for(const i of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])t[i]=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return this.any()[i](...e)};w.assign(t,v.methods);for(const i in v.aliases){const e=v.aliases[i];t[i]=t[e]}return t.x=t.expression,f.setup&&f.setup(t),t}};v.methods={ValidationError:a.ValidationError,version:o.version,cache:r.provider,assert(t,i){for(var e=arguments.length,s=new Array(e>2?e-2:0),n=2;n<e;n++)s[n-2]=arguments[n];v.assert(t,i,!0,s)},attempt:function(t,i){for(var e=arguments.length,s=new Array(e>2?e-2:0),n=2;n<e;n++)s[n-2]=arguments[n];return v.assert(t,i,!1,s)},build(t){return s("function"==typeof c.build,"Manifest functionality disabled"),c.build(this,t)},checkPreferences(t){o.checkPreferences(t)},compile(t,i){return h.compile(this,t,i)},defaults(t){s("function"==typeof t,"modifier must be a function");const i=w.assign({},this);for(const e of i.Nf){const n=t(i[e]());s(o.isSchema(n),"modifier must return a valid schema object"),i[e]=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return v.generate(this,n,i)}}return i},expression:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return new d(...i)},extend(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];o.verifyFlat(i,"extend"),_=_||e(3378),s(i.length,"You need to provide at least one extension"),this.assert(i,_.extensions);const r=w.assign({},this);r.Nf=new Set(r.Nf);for(let t of i){"function"==typeof t&&(t=t(r)),this.assert(t,_.extension);const i=v.expandExtension(t,r);for(const t of i){s(void 0===r[t.type]||r.Nf.has(t.type),"Cannot override name",t.type);const i=t.base||this.any(),e=u.type(i,t);r.Nf.add(t.type),r[t.type]=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return v.generate(this,e,i)}}}return r},isError:a.ValidationError.isError,isExpression:d.isTemplate,isRef:l.isRef,isSchema:o.isSchema,in:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return l.in(...i)},override:o.symbols.override,ref:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return l.create(...i)},types(){const t={};for(const i of this.Nf)t[i]=this[i]();for(const i in v.aliases)t[i]=this[i]();return t}},v.assert=function(t,i,e,s){const r=s[0]instanceof g||"string"==typeof s[0]?s[0]:null,h=null!==r?s[1]:s[0],u=i.validate(t,o.preferences({errors:{stack:!0}},h||{}));let c=u.error;if(!c)return u.value;if(r instanceof g)throw r;const l=e&&"function"==typeof c.annotate?c.annotate():c.message;throw c instanceof a.ValidationError==0&&(c=n(c)),c.message=r?"".concat(r," ").concat(l):l,c},v.generate=function(t,i,e){return s(t,"Must be invoked on a Joi instance."),i.$_root=t,i.sf.args&&e.length?i.sf.args(i,...e):i},v.expandExtension=function(t,i){if("string"==typeof t.type)return[t];const e=[];for(const s of i.Nf)if(t.type.test(s)){const n=w.assign({},t);n.type=s,n.base=i[s](),e.push(n)}return e},t.exports=v.root()},6914:(t,i,e)=>{const s=e(375),n=e(8571),r=e(3328);i.compile=function(t,i){if("string"==typeof t)return s(!i,"Cannot set single message string"),new r(t);if(r.isTemplate(t))return s(!i,"Cannot set single message template"),t;s("object"==typeof t&&!Array.isArray(t),"Invalid message options"),i=i?n(i):{};for(let e in t){const n=t[e];if("root"===e||r.isTemplate(n)){i[e]=n;continue}if("string"==typeof n){i[e]=new r(n);continue}s("object"==typeof n&&!Array.isArray(n),"Invalid message for",e);const o=e;for(e in i[o]=i[o]||{},n){const t=n[e];"root"===e||r.isTemplate(t)?i[o][e]=t:(s("string"==typeof t,"Invalid message for",e,"in",o),i[o][e]=new r(t))}}return i},i.decompile=function(t){const i={};for(let e in t){const s=t[e];if("root"===e){i.root=s;continue}if(r.isTemplate(s)){i[e]=s.describe({compact:!0});continue}const n=e;for(e in i[n]={},s){const t=s[e];"root"!==e?i[n][e]=t.describe({compact:!0}):i[n].root=t}}return i},i.merge=function(t,e){if(!t)return i.compile(e);if(!e)return t;if("string"==typeof e)return new r(e);if(r.isTemplate(e))return e;const o=n(t);for(let t in e){const i=e[t];if("root"===t||r.isTemplate(i)){o[t]=i;continue}if("string"==typeof i){o[t]=new r(i);continue}s("object"==typeof i&&!Array.isArray(i),"Invalid message for",t);const n=t;for(t in o[n]=o[n]||{},i){const e=i[t];"root"===t||r.isTemplate(e)?o[n][t]=e:(s("string"==typeof e,"Invalid message for",t,"in",n),o[n][t]=new r(e))}}return o}},2294:(t,i,e)=>{const s=e(375),n=e(8160),r=e(6133),o={};i.Ids=o.Ids=class{clone(){const t=new o.Ids;return t.If=new Map(this.If),t.Df=new Map(this.Df),t.Ef=this.Ef,t}concat(t){t.Ef&&(this.Ef=!0);for(const[i,e]of t.If.entries())s(!this.Df.has(i),"Schema id conflicts with existing key:",i),this.If.set(i,e);for(const[i,e]of t.Df.entries())s(!this.If.has(i),"Schema key conflicts with existing id:",i),this.Df.set(i,e)}fork(t,i,e){const r=this.kf(t);r.push({schema:e});const h=r.shift();let a={id:h.id,schema:i(h.schema)};s(n.isSchema(a.schema),"adjuster function failed to return a joi schema type");for(const t of r)a={id:t.id,schema:o.fork(t.schema,a.id,a.schema)};return a.schema}labels(t,i){void 0===i&&(i=[]);const e=t[0],s=this.Lf(e);if(!s)return[...i,...t].join(".");const n=t.slice(1);return i=[...i,s.schema.Kd.label||e],n.length?s.schema.Vd.labels(n,i):i.join(".")}reach(t,i){void 0===i&&(i=[]);const e=t[0],n=this.Lf(e);s(n,"Schema does not contain path",[...i,...t].join("."));const r=t.slice(1);return r.length?n.schema.Vd.reach(r,[...i,e]):n.schema}register(t,i){let{key:e}=void 0===i?{}:i;if(!t||!n.isSchema(t))return;(t.$_property("schemaChain")||t.Vd.Ef)&&(this.Ef=!0);const r=t.Kd.id;if(r){const i=this.If.get(r);s(!i||i.schema===t,"Cannot add different schemas with the same id:",r),s(!this.Df.has(r),"Schema id conflicts with existing key:",r),this.If.set(r,{schema:t,id:r})}e&&(s(!this.Df.has(e),"Schema already contains key:",e),s(!this.If.has(e),"Schema key conflicts with existing id:",e),this.Df.set(e,{schema:t,id:e}))}reset(){this.If=new Map,this.Df=new Map,this.Ef=!1}kf(t,i,e){void 0===i&&(i=[]),void 0===e&&(e=[]);const n=t[0],r=this.Lf(n);s(r,"Schema does not contain path",[...i,...t].join(".")),e=[r,...e];const o=t.slice(1);return o.length?r.schema.Vd.kf(o,[...i,n],e):e}Lf(t){return this.If.get(t)||this.Df.get(t)}constructor(){this.If=new Map,this.Df=new Map,this.Ef=!1}},o.fork=function(t,e,s){const n=i.schema(t,{each:(t,i)=>{let{key:n}=i;if(e===(t.Kd.id||n))return s},ref:!1});return n?n.$_mutateRebuild():t},i.schema=function(t,i){let e;for(const s in t.Kd){if("_"===s[0])continue;const n=o.scan(t.Kd[s],{source:"flags",name:s},i);void 0!==n&&(e=e||t.clone(),e.Kd[s]=n)}for(let s=0;s<t.Jd.length;++s){const n=t.Jd[s],r=o.scan(n.args,{source:"rules",name:n.name},i);if(void 0!==r){e=e||t.clone();const i=w.assign({},n);i.args=r,e.Jd[s]=i,e.$d.get(n.name)===n&&e.$d.set(n.name,i)}}for(const s in t.$_terms){if("_"===s[0])continue;const n=o.scan(t.$_terms[s],{source:"terms",name:s},i);void 0!==n&&(e=e||t.clone(),e.$_terms[s]=n)}return e},o.scan=function(t,i,e,s,h){const a=s||[];if(null===t||"object"!=typeof t)return;let u;if(Array.isArray(t)){for(let s=0;s<t.length;++s){const n="terms"===i.source&&"keys"===i.name&&t[s].key,r=o.scan(t[s],i,e,[s,...a],n);void 0!==r&&(u=u||t.slice(),u[s]=r)}return u}if(!1!==e.schema&&n.isSchema(t)||!1!==e.ref&&r.isRef(t)){const s=e.each(t,d(l({},i),{path:a,key:h}));return s===t?void 0:s}for(const s in t){if("_"===s[0])continue;const n=o.scan(t[s],i,e,[s,...a],h);void 0!==n&&(u=u||w.assign({},t),u[s]=n)}return u}},6133:(t,i,e)=>{const s=e(375),n=e(8571),r=e(9621),o=e(8160);let h;const a={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};i.create=function(t,i){void 0===i&&(i={}),s("string"==typeof t,"Invalid reference key:",t),o.assertOptions(i,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),s(!i.prefix||"object"==typeof i.prefix,"options.prefix must be of type object");const e=w.assign({},a.defaults,i);delete e.prefix;const n=e.separator,r=a.context(t,n,i.prefix);if(e.type=r.type,t=r.key,"value"===e.type)if(r.root&&(s(!n||t[0]!==n,"Cannot specify relative path with root prefix"),e.ancestor="root",t||(t=null)),n&&n===t)t=null,e.ancestor=0;else if(void 0!==e.ancestor)s(!n||!t||t[0]!==n,"Cannot combine prefix with ancestor option");else{const[i,s]=a.ancestor(t,n);s&&""===(t=t.slice(s))&&(t=null),e.ancestor=i}return e.path=n?null===t?[]:t.split(n):[t],new a.Ref(e)},i.in=function(t,e){return void 0===e&&(e={}),i.create(t,d(l({},e),{in:!0}))},i.isRef=function(t){return!!t&&!!t[o.symbols.ref]},a.Ref=class{resolve(t,i,e,n,r){return void 0===r&&(r={}),s(!this.in||r.in,"Invalid in() reference usage"),"global"===this.type?this.lf(e.context,i,r):"local"===this.type?this.lf(n,i,r):this.ancestor?"root"===this.ancestor?this.lf(i.ancestors[i.ancestors.length-1],i,r):(s(this.ancestor<=i.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this.lf(i.ancestors[this.ancestor-1],i,r)):this.lf(t,i,r)}lf(t,i,e){let s;if("value"===this.type&&i.mainstay.shadow&&!1!==e.shadow&&(s=i.mainstay.shadow.get(this.absolute(i))),void 0===s&&(s=r(t,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(s=this.adjust(s)),this.map){const t=this.map.get(s);void 0!==t&&(s=t)}return i.mainstay&&i.mainstay.tracer.resolve(i,this,s),s}toString(){return this.display}absolute(t){return[...t.path.slice(0,-this.ancestor),...this.path]}clone(){return new a.Ref(this)}describe(){const t={path:this.path};"value"!==this.type&&(t.type=this.type),"."!==this.separator&&(t.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(t.ancestor=this.ancestor),this.map&&(t.map=[...this.map]);for(const i of["adjust","iterables","render"])null!==this[i]&&void 0!==this[i]&&(t[i]=this[i]);return!1!==this.in&&(t.in=!0),{ref:t}}updateDisplay(){const t=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display="ref:".concat(this.type,":").concat(t));if(!this.separator)return void(this.display="ref:".concat(t));if(!this.ancestor)return void(this.display="ref:".concat(this.separator).concat(t));if("root"===this.ancestor)return void(this.display="ref:root:".concat(t));if(1===this.ancestor)return void(this.display="ref:".concat(t||".."));const i=new Array(this.ancestor+1).fill(this.separator).join("");this.display="ref:".concat(i).concat(t||"")}constructor(t){s("object"==typeof t,"Invalid reference construction"),o.assertOptions(t,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),s([!1,void 0].includes(t.separator)||"string"==typeof t.separator&&1===t.separator.length,"Invalid separator"),s(!t.adjust||"function"==typeof t.adjust,"options.adjust must be a function"),s(!t.map||Array.isArray(t.map),"options.map must be an array"),s(!t.map||!t.adjust,"Cannot set both map and adjust options"),w.assign(this,a.defaults,t),s("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}},a.Ref.prototype[o.symbols.ref]=!0,i.build=function(t){return"value"===(t=w.assign({},a.defaults,t)).type&&void 0===t.ancestor&&(t.ancestor=1),new a.Ref(t)},a.context=function(t,i,e){if(void 0===e&&(e={}),t=t.trim(),e){const s=void 0===e.global?"$":e.global;if(s!==i&&t.startsWith(s))return{key:t.slice(s.length),type:"global"};const n=void 0===e.local?"#":e.local;if(n!==i&&t.startsWith(n))return{key:t.slice(n.length),type:"local"};const r=void 0===e.root?"/":e.root;if(r!==i&&t.startsWith(r))return{key:t.slice(r.length),type:"value",root:!0}}return{key:t,type:"value"}},a.ancestor=function(t,i){if(!i)return[1,0];if(t[0]!==i)return[1,0];if(t[1]!==i)return[0,1];let e=2;for(;t[e]===i;)++e;return[e-1,e]},i.toSibling=0,i.toParent=1,i.Manager=class{register(t,s){if(t)if(s=void 0===s?i.toParent:s,Array.isArray(t))for(const i of t)this.register(i,s);else if(o.isSchema(t))for(const i of t.Hd.refs)i.ancestor-s>=0&&this.refs.push({ancestor:i.ancestor-s,root:i.root});else i.isRef(t)&&"value"===t.type&&t.ancestor-s>=0&&this.refs.push({ancestor:t.ancestor-s,root:t.root}),h=h||e(3328),h.isTemplate(t)&&this.register(t.refs(),s)}get length(){return this.refs.length}clone(){const t=new i.Manager;return t.refs=n(this.refs),t}reset(){this.refs=[]}roots(){return this.refs.filter((t=>!t.ancestor)).map((t=>t.root))}constructor(){this.refs=[]}}},3378:(t,i,e)=>{const s=e(5107),n={};n.wrap=s.string().min(1).max(2).allow(!1),i.preferences=s.object({allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),context:s.object(),convert:s.boolean(),dateFormat:s.valid("date","iso","string","time","utc"),debug:s.boolean(),errors:{escapeHtml:s.boolean(),label:s.valid("path","key",!1),language:[s.string(),s.object().ref()],render:s.boolean(),stack:s.boolean(),wrap:{label:n.wrap,array:n.wrap,string:n.wrap}},externals:s.boolean(),messages:s.object(),noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:s.valid("required","optional","forbidden"),skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()}).strict(),n.nameRx=/^[a-zA-Z0-9]\w*$/,n.rule=s.object({alias:s.array().items(s.string().pattern(n.nameRx)).single(),args:s.array().items(s.string(),s.object({name:s.string().pattern(n.nameRx).required(),ref:s.boolean(),assert:s.alternatives([s.function(),s.object().schema()]).conditional("ref",{is:!0,then:s.required()}),normalize:s.function(),message:s.string().when("assert",{is:s.function(),then:s.required()})})),convert:s.boolean(),manifest:s.boolean(),method:s.function().allow(!1),multi:s.boolean(),validate:s.function()}),i.extension=s.object({type:s.alternatives([s.string(),s.object().regex()]).required(),args:s.function(),cast:s.object().pattern(n.nameRx,s.object({from:s.function().maxArity(1).required(),to:s.function().minArity(1).maxArity(2).required()})),base:s.object().schema().when("type",{is:s.object().regex(),then:s.forbidden()}),coerce:[s.function().maxArity(3),s.object({method:s.function().maxArity(3).required(),from:s.array().items(s.string()).single()})],flags:s.object().pattern(n.nameRx,s.object({setter:s.string(),default:s.any()})),manifest:{build:s.function().arity(2)},messages:[s.object(),s.string()],modifiers:s.object().pattern(n.nameRx,s.function().minArity(1).maxArity(2)),overrides:s.object().pattern(n.nameRx,s.function()),prepare:s.function().maxArity(3),rebuild:s.function().arity(1),rules:s.object().pattern(n.nameRx,n.rule),terms:s.object().pattern(n.nameRx,s.object({init:s.array().allow(null).required(),manifest:s.object().pattern(/.+/,[s.valid("schema","single"),s.object({mapped:s.object({from:s.string().required(),to:s.string().required()}).required()})])})),validate:s.function().maxArity(3)}).strict(),i.extensions=s.array().items(s.object(),s.function().arity(1)).strict(),n.desc={buffer:s.object({buffer:s.string()}),func:s.object({function:s.function().required(),options:{literal:!0}}),override:s.object({override:!0}),ref:s.object({ref:s.object({type:s.valid("value","global","local"),path:s.array().required(),separator:s.string().length(1).allow(!1),ancestor:s.number().min(0).integer().allow("root"),map:s.array().items(s.array().length(2)).min(1),adjust:s.function(),iterables:s.boolean(),in:s.boolean(),render:s.boolean()}).required()}),regex:s.object({regex:s.string().min(3)}),special:s.object({special:s.valid("deep").required()}),template:s.object({template:s.string().required(),options:s.object()}),value:s.object({value:s.alternatives([s.object(),s.array()]).required()})},n.desc.entity=s.alternatives([s.array().items(s.link("...")),s.boolean(),s.function(),s.number(),s.string(),n.desc.buffer,n.desc.func,n.desc.ref,n.desc.regex,n.desc.special,n.desc.template,n.desc.value,s.link("/")]),n.desc.values=s.array().items(null,s.boolean(),s.function(),s.number().allow(1/0,-1/0),s.string().allow(""),s.symbol(),n.desc.buffer,n.desc.func,n.desc.override,n.desc.ref,n.desc.regex,n.desc.template,n.desc.value),n.desc.messages=s.object().pattern(/.+/,[s.string(),n.desc.template,s.object().pattern(/.+/,[s.string(),n.desc.template])]),i.description=s.object({type:s.string().required(),flags:s.object({cast:s.string(),default:s.any(),description:s.string(),empty:s.link("/"),failover:n.desc.entity,id:s.string(),label:s.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:s.boolean(),unit:s.string()}).unknown(),preferences:{allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),convert:s.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:s.boolean(),label:["path","key"],language:[s.string(),n.desc.ref],wrap:{label:n.wrap,array:n.wrap}},externals:s.boolean(),messages:n.desc.messages,noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:["required","optional","forbidden"],skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()},allow:n.desc.values,invalid:n.desc.values,rules:s.array().min(1).items({name:s.string().required(),args:s.object().min(1),keep:s.boolean(),message:[s.string(),n.desc.messages],warn:s.boolean()}),keys:s.object().pattern(/.*/,s.link("/")),link:n.desc.ref}).pattern(/^[a-z]\w*$/,s.any())},493:(t,i,e)=>{const s=e(8571),n=e(9621),r=e(8160),o={value:Symbol("value")};t.exports=o.State=class{localize(t,i,e){void 0===i&&(i=null),void 0===e&&(e=null);const s=new o.State(t,i,this);return e&&s.schemas&&(s.schemas=[o.schemas(e),...s.schemas]),s}nest(t,i){const e=new o.State(this.path,this.ancestors,this);return e.schemas=e.schemas&&[o.schemas(t),...e.schemas],e.debug=i,e}shadow(t,i){this.mainstay.shadow=this.mainstay.shadow||new o.Shadow,this.mainstay.shadow.set(this.path,t,i)}snapshot(){this.mainstay.shadow&&(this.xf=s(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.xf),this.xf=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.xf),this.xf=void 0),this.mainstay.commit()}constructor(t,i,e){this.path=t,this.ancestors=i,this.mainstay=e.mainstay,this.schemas=e.schemas,this.debug=null}},o.schemas=function(t){return r.isSchema(t)?{schema:t}:t},o.Shadow=class{set(t,i,e){if(!t.length||"strip"===e&&"number"==typeof t[t.length-1])return;this.tf=this.tf||new Map;let s=this.tf;for(let i=0;i<t.length;++i){const e=t[i];let n=s.get(e);n||(n=new Map,s.set(e,n)),s=n}s[o.value]=i}get(t){const i=this.node(t);if(i)return i[o.value]}node(t){if(this.tf)return n(this.tf,t,{iterables:!0})}override(t,i){if(!this.tf)return;const e=t.slice(0,-1),s=t[t.length-1],r=n(this.tf,e,{iterables:!0});i?r.set(s,i):r&&r.delete(s)}constructor(){this.tf=null}}},3328:(t,i,e)=>{const s=e(375),n=e(8571),r=e(5277),o=e(1447),h=e(8160),a=e(6354),u=e(6133),c={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join("\x01"),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};t.exports=c.Template=class{Cf(){if(!this.source.includes("{"))return;const t=c.encode(this.source),i=c.split(t);let e=!1;const s=[],n=i.shift();n&&s.push(n);for(const t of i){const i="{"!==t[0],n=i?"}":"}}",r=t.indexOf(n);if(-1===r||"{"===t[1]){s.push("{".concat(c.decode(t)));continue}let o=t.slice(i?0:1,r);const h=":"===o[0];h&&(o=o.slice(1));const a=this.Of(c.decode(o),{raw:i,wrapped:h});s.push(a),"string"!=typeof a&&(e=!0);const u=t.slice(r+n.length);u&&s.push(c.decode(u))}e?this.Tf=s:this.rendered=s.join("")}static date(t,i){return c.dateFormat[i.dateFormat].call(t)}describe(t){if(void 0===t&&(t={}),!this.jf&&t.compact)return this.source;const i={template:this.source};return this.jf&&(i.options=this.jf),this.Rf&&(i.functions=this.Rf),i}static build(t){return new c.Template(t.template,t.options||t.functions?d(l({},t.options),{functions:t.functions}):void 0)}isDynamic(){return!!this.Tf}static isTemplate(t){return!!t&&!!t[h.symbols.template]}refs(){if(!this.Tf)return;const t=[];for(const i of this.Tf)"string"!=typeof i&&t.push(...i.refs);return t}resolve(t,i,e,s){return this.Tf&&1===this.Tf.length?this.Pf(this.Tf[0],t,i,e,s,{}):this.render(t,i,e,s)}Pf(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];return t.ref?t.ref.resolve(...e):t.formula.evaluate(e)}render(t,i,e,s,n){if(void 0===n&&(n={}),!this.isDynamic())return this.rendered;const o=[];for(const h of this.Tf)if("string"==typeof h)o.push(h);else{const a=this.Pf(h,t,i,e,s,n),u=c.stringify(a,t,i,e,s,n);if(void 0!==u){const t=h.raw||!1===(n.errors&&n.errors.escapeHtml)?u:r(u);o.push(c.wrap(t,h.wrapped&&e.errors.wrap.label))}}return o.join("")}Of(t,i){let{raw:e,wrapped:s}=i;const n=[],r=t=>{const i=u.create(t,this.jf);return n.push(i),t=>{const e=i.resolve(...t);return void 0!==e?e:null}};try{const i=this.Rf?l(l({},c.functions),this.Rf):c.functions;var h=new o.Parser(t,{reference:r,functions:i,constants:c.constants})}catch(i){throw i.message='Invalid template variable "'.concat(t,'" fails due to: ').concat(i.message),i}if(h.single){if("reference"===h.single.type){const t=n[0];return{ref:t,raw:e,refs:n,wrapped:s||"local"===t.type&&"label"===t.key}}return c.stringify(h.single.value)}return{formula:h,raw:e,refs:n}}toString(){return this.source}constructor(t,i){if(s("string"==typeof t,"Template source must be a string"),s(!t.includes("\0")&&!t.includes("\x01"),"Template source cannot contain reserved control characters"),this.source=t,this.rendered=t,this.Tf=null,i){const t=i,{functions:e}=t,r=f(t,["functions"]);this.jf=w.keys(r).length?n(r):void 0,this.Rf=e,this.Rf&&(s(w.keys(this.Rf).every((t=>"string"==typeof t)),"Functions keys must be strings"),s(w.values(this.Rf).every((t=>"function"==typeof t)),"Functions values must be functions"))}else this.jf=void 0,this.Rf=void 0;this.Cf()}},c.Template.prototype[h.symbols.template]=!0,c.Template.prototype.isImmutable=!0,c.encode=function(t){return t.replace(/\\(\{+)/g,((t,i)=>c.opens.slice(0,i.length))).replace(/\\(\}+)/g,((t,i)=>c.closes.slice(0,i.length)))},c.decode=function(t){return t.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},c.split=function(t){const i=[];let e="";for(let s=0;s<t.length;++s){const n=t[s];if("{"===n){let n="";for(;s+1<t.length&&"{"===t[s+1];)n+="{",++s;i.push(e),e=n}else e+=n}return i.push(e),i},c.wrap=function(t,i){return i?1===i.length?"".concat(i).concat(t).concat(i):"".concat(i[0]).concat(t).concat(i[1]):t},c.stringify=function(t,i,e,s,n,r){void 0===r&&(r={});const o=typeof t,h=s&&s.errors&&s.errors.wrap||{};let a=!1;if(u.isRef(t)&&t.render&&(a=t.in,t=t.resolve(i,e,s,n,l({in:t.in},r))),null===t)return"null";if("string"===o)return c.wrap(t,r.arrayItems&&h.string);if("number"===o||"function"===o||"symbol"===o)return t.toString();if("object"!==o)return JSON.stringify(t);if(t instanceof Date)return c.Template.date(t,s);if(t instanceof Map){const i=[];for(const[e,s]of t.entries())i.push("".concat(e.toString()," -> ").concat(s.toString()));t=i}if(!Array.isArray(t))return t.toString();const d=[];for(const o of t)d.push(c.stringify(o,i,e,s,n,l({arrayItems:!0},r)));return c.wrap(d.join(", "),!a&&h.array)},c.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},c.functions={if:(t,i,e)=>t?i:e,length:t=>"string"==typeof t?t.length:t&&"object"==typeof t?Array.isArray(t)?t.length:w.keys(t).length:null,msg(t){const[i,e,s,n,r]=this,o=r.messages;if(!o)return"";const h=a.template(i,o[0],t,e,s)||a.template(i,o[1],t,e,s);return h?h.render(i,e,s,n,r):""},number:t=>"number"==typeof t?t:"string"==typeof t?C(t):"boolean"==typeof t?t?1:0:t instanceof Date?t.getTime():null}},4946:(t,i,e)=>{const s=e(375),n=e(1687),r=e(8068),o=e(8160),h=e(3292),a=e(6354),u=e(6133),c={};t.exports=r.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:u.toSibling}},args:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];return 1===e.length&&Array.isArray(e[0])?t.try(...e[0]):t.try(...e)},validate(t,i){const{schema:e,error:s,state:r,prefs:o}=i;if(e.Kd.match){const i=[],h=[];for(let s=0;s<e.$_terms.matches.length;++s){const n=e.$_terms.matches[s],a=r.nest(n.schema,"match.".concat(s));a.snapshot();const u=n.schema.$_validate(t,a,o);u.errors?(h.push(u.errors),a.restore()):(i.push(u.value),a.commit())}if(0===i.length)return{errors:s("alternatives.any",{details:h.map((t=>a.details(t,{override:!1})))})};if("one"===e.Kd.match)return 1===i.length?{value:i[0]}:{errors:s("alternatives.one")};if(i.length!==e.$_terms.matches.length)return{errors:s("alternatives.all",{details:h.map((t=>a.details(t,{override:!1})))})};const u=t=>t.$_terms.matches.some((t=>"object"===t.schema.type||"alternatives"===t.schema.type&&u(t.schema)));return u(e)?{value:i.reduce(((t,i)=>n(t,i,{mergeArrays:!1})))}:{value:i[i.length-1]}}const h=[];for(let i=0;i<e.$_terms.matches.length;++i){const s=e.$_terms.matches[i];if(s.schema){const e=r.nest(s.schema,"match.".concat(i));e.snapshot();const n=s.schema.$_validate(t,e,o);if(!n.errors)return e.commit(),n;e.restore(),h.push({schema:s.schema,reports:n.errors});continue}const n=s.ref?s.ref.resolve(t,r,o):t,a=s.is?[s]:s.switch;for(let e=0;e<a.length;++e){const h=a[e],{is:u,then:c,otherwise:l}=h,d="match.".concat(i).concat(s.switch?"."+e:"");if(u.$_match(n,r.nest(u,"".concat(d,".is")),o)){if(c)return c.$_validate(t,r.nest(c,"".concat(d,".then")),o)}else if(l)return l.$_validate(t,r.nest(l,"".concat(d,".otherwise")),o)}}return c.errors(h,i)},rules:{conditional:{method(t,i){s(!this.Kd.zf,"Unreachable condition"),s(!this.Kd.match,"Cannot combine match mode",this.Kd.match,"with conditional rule"),s(void 0===i.break,"Cannot use break option with alternatives conditional");const e=this.clone(),n=h.when(e,t,i),r=n.is?[n]:n.switch;for(const t of r)if(t.then&&t.otherwise){e.$_setFlag("zf",!0,{clone:!1});break}return e.$_terms.matches.push(n),e.$_mutateRebuild()}},match:{method(t){if(s(["any","one","all"].includes(t),"Invalid alternatives match mode",t),"any"!==t)for(const i of this.$_terms.matches)s(i.schema,"Cannot combine match mode",t,"with conditional rules");return this.$_setFlag("match",t)}},try:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];s(i.length,"Missing alternative schemas"),o.verifyFlat(i,"try"),s(!this.Kd.zf,"Unreachable condition");const n=this.clone();for(const t of i)n.$_terms.matches.push({schema:n.$_compile(t)});return n.$_mutateRebuild()}}},overrides:{label(t){return this.$_parent("label",t).$_modify({each:(i,e)=>"is"!==e.path[0]&&"string"!=typeof i.Kd.label?i.label(t):void 0,ref:!1})}},rebuild(t){t.$_modify({each:i=>{o.isSchema(i)&&"array"===i.type&&t.$_setFlag("Bf",!0,{clone:!1})}})},manifest:{build(t,i){if(i.matches)for(const e of i.matches){const{schema:i,ref:s,is:n,not:r,then:o,otherwise:h}=e;t=i?t.try(i):s?t.conditional(s,{is:n,then:o,not:r,otherwise:h,switch:e.switch}):t.conditional(n,{then:o,otherwise:h})}return t}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),c.errors=function(t,i){let{error:e,state:s}=i;if(!t.length)return{errors:e("alternatives.any")};if(1===t.length)return{errors:t[0].reports};const n=new Set,r=[];for(const{reports:i,schema:o}of t){if(i.length>1)return c.unmatched(t,e);const h=i[0];if(h instanceof a.Report==0)return c.unmatched(t,e);if(h.state.path.length!==s.path.length){r.push({type:o.type,report:h});continue}if("any.only"===h.code){for(const t of h.local.valids)n.add(t);continue}const[u,l]=h.code.split(".");"base"===l?n.add(u):r.push({type:o.type,report:h})}return r.length?1===r.length?{errors:r[0].report}:c.unmatched(t,e):{errors:e("alternatives.types",{types:[...n]})}},c.unmatched=function(t,i){const e=[];for(const i of t)e.push(...i.reports);return{errors:i("alternatives.match",a.details(e,{override:!1}))}}},8068:(t,i,e)=>{const s=e(375),n=e(7629),r=e(8160),o=e(6914);t.exports=n.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(t,i){return s("function"==typeof t,"Method must be a function"),s(void 0===i||i&&"string"==typeof i,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:t,description:i}})},validate(t,i,e){let{method:s}=e;try{return s(t,i)}catch(t){return i.error("any.custom",{error:t})}},args:["method","description"],multi:!0},messages:{method(t){return this.prefs({messages:t})}},shared:{method(t){s(r.isSchema(t)&&t.Kd.id,"Schema must be a schema with an id");const i=this.clone();return i.$_terms.shared=i.$_terms.shared||[],i.$_terms.shared.push(t),i.$_mutateRegister(t),i}},warning:{method(t,i){return s(t&&"string"==typeof t,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:t,local:i},warn:!0})},validate:(t,i,e)=>{let{code:s,local:n}=e;return i.error(s,n)},args:["code","local"],multi:!0}},modifiers:{keep(t,i){void 0===i&&(i=!0),t.keep=i},message(t,i){t.message=o.compile(i)},warn(t,i){void 0===i&&(i=!0),t.warn=i}},manifest:{build(t,i){for(const e in i){const s=i[e];if(["examples","externals","metas","notes","tags"].includes(e))for(const i of s)t=t[e.slice(0,-1)](i);else if("alterations"!==e)if("whens"!==e){if("shared"===e)for(const i of s)t=t.shared(i)}else for(const i of s){const{ref:e,is:s,not:n,then:r,otherwise:o,concat:h}=i;t=h?t.concat(h):e?t.when(e,{is:s,not:n,then:r,otherwise:o,switch:i.switch,break:i.break}):t.when(s,{then:r,otherwise:o,break:i.break})}else{const i={};for(const{target:t,adjuster:e}of s)i[t]=e;t=t.alter(i)}}return t}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(t,i,e)=>{const s=e(375),n=e(9474),r=e(9621),o=e(8068),h=e(8160),a=e(3292),u={};t.exports=o.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},Uf:{init:[]},Qf:{init:[]},Ff:{init:[]}},coerce:{from:"object",method(t,i){let{schema:e,state:s,prefs:n}=i;if(!Array.isArray(t))return;const r=e.$_getRule("sort");return r?u.sort(e,t,r.args.options,s,n):void 0}},validate(t,i){let{schema:e,error:s}=i;if(!Array.isArray(t)){if(e.Kd.single){const i=[t];return i[h.symbols.arraySingle]=!0,{value:i}}return{errors:s("array.base")}}if(e.$_getRule("items")||e.$_terms.externals)return{value:t.slice()}},rules:{has:{method(t){t=this.$_compile(t,{appendPath:!0});const i=this.$_addRule({name:"has",args:{schema:t}});return i.$_mutateRegister(t),i},validate(t,i,e){let{state:s,prefs:n,error:r}=i,{schema:o}=e;const h=[t,...s.ancestors];for(let i=0;i<t.length;++i){const e=s.localize([...s.path,i],h,o);if(o.$_match(t[i],e,n))return t}const a=o.Kd.label;return a?r("array.hasKnown",{patternLabel:a}):r("array.hasUnknown",null)},multi:!0},items:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];h.verifyFlat(i,"items");const s=this.$_addRule("items");for(let t=0;t<i.length;++t){const e=h.tryWithPath((()=>this.$_compile(i[t])),t,{append:!0});s.$_terms.items.push(e)}return s.$_mutateRebuild()},validate(t,i){let{schema:e,error:s,state:n,prefs:r,errorsArray:o}=i;const a=e.$_terms.Ff.slice(),c=e.$_terms.ordered.slice(),l=[...e.$_terms.Qf,...a],d=!t[h.symbols.arraySingle];delete t[h.symbols.arraySingle];const f=o();let _=t.length;for(let i=0;i<_;++i){const o=t[i];let h=!1,g=!1;const w=d?i:new Number(i),v=[...n.path,w];if(!e.Kd.sparse&&void 0===o){if(f.push(s("array.sparse",{key:w,path:v,pos:i,value:void 0},n.localize(v))),r.abortEarly)return f;c.shift();continue}const m=[t,...n.ancestors];for(const t of e.$_terms.Uf)if(t.$_match(o,n.localize(v,m,t),r,{presence:"ignore"})){if(f.push(s("array.excludes",{pos:i,value:o},n.localize(v))),r.abortEarly)return f;h=!0,c.shift();break}if(h)continue;if(e.$_terms.ordered.length){if(c.length){const h=c.shift(),a=h.$_validate(o,n.localize(v,m,h),r);if(a.errors){if(f.push(...a.errors),r.abortEarly)return f}else if("strip"===h.Kd.result)u.fastSplice(t,i),--i,--_;else{if(!e.Kd.sparse&&void 0===a.value){if(f.push(s("array.sparse",{key:w,path:v,pos:i,value:void 0},n.localize(v))),r.abortEarly)return f;continue}t[i]=a.value}continue}if(!e.$_terms.items.length){if(f.push(s("array.orderedLength",{pos:i,limit:e.$_terms.ordered.length})),r.abortEarly)return f;break}}const p=[];let A=a.length;for(let h=0;h<A;++h){const c=n.localize(v,m,a[h]);c.snapshot();const l=a[h].$_validate(o,c,r);if(p[h]=l,!l.errors){if(c.commit(),t[i]=l.value,g=!0,u.fastSplice(a,h),--h,--A,!e.Kd.sparse&&void 0===l.value&&(f.push(s("array.sparse",{key:w,path:v,pos:i,value:void 0},n.localize(v))),r.abortEarly))return f;break}c.restore()}if(g)continue;const y=r.stripUnknown&&!!r.stripUnknown.arrays||!1;A=l.length;for(const c of l){let l;const d=a.indexOf(c);if(-1!==d)l=p[d];else{const a=n.localize(v,m,c);if(a.snapshot(),l=c.$_validate(o,a,r),!l.errors){a.commit(),"strip"===c.Kd.result?(u.fastSplice(t,i),--i,--_):e.Kd.sparse||void 0!==l.value?t[i]=l.value:(f.push(s("array.sparse",{key:w,path:v,pos:i,value:void 0},n.localize(v))),h=!0),g=!0;break}a.restore()}if(1===A){if(y){u.fastSplice(t,i),--i,--_,g=!0;break}if(f.push(...l.errors),r.abortEarly)return f;h=!0;break}}if(!h&&(e.$_terms.Qf.length||e.$_terms.Ff.length)&&!g){if(y){u.fastSplice(t,i),--i,--_;continue}if(f.push(s("array.includes",{pos:i,value:o},n.localize(v))),r.abortEarly)return f}}return a.length&&u.fillMissedErrors(e,f,a,t,n,r),c.length&&(u.fillOrderedErrors(e,f,c,t,n,r),f.length||u.fillDefault(c,t,n,r)),f.length?f:t},priority:!0,manifest:!1},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,i,e,s)=>{let{limit:n}=e,{name:r,operator:o,args:a}=s;return h.compare(t.length,n,o)?t:i.error("array."+r,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},ordered:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];h.verifyFlat(i,"ordered");const s=this.$_addRule("items");for(let t=0;t<i.length;++t){const e=h.tryWithPath((()=>this.$_compile(i[t])),t,{append:!0});u.validateSingle(e,s),s.$_mutateRegister(e),s.$_terms.ordered.push(e)}return s.$_mutateRebuild()}},single:{method(t){const i=void 0===t||!!t;return s(!i||!this.Kd.Bf,"Cannot specify single rule when array has array items"),this.$_setFlag("single",i)}},sort:{method(t){void 0===t&&(t={}),h.assertOptions(t,["by","order"]);const i={order:t.order||"ascending"};return t.by&&(i.by=a.ref(t.by,{ancestor:0}),s(!i.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:i}})},validate(t,i,e){let{error:s,state:n,prefs:r,schema:o}=i,{options:h}=e;const{value:a,errors:c}=u.sort(o,t,h,n,r);if(c)return c;for(let i=0;i<t.length;++i)if(t[i]!==a[i])return s("array.sort",{order:h.order,by:h.by?h.by.key:"value"});return t},convert:!0},sparse:{method(t){const i=void 0===t||!!t;return this.Kd.sparse===i?this:(i?this.clone():this.$_addRule("items")).$_setFlag("sparse",i,{clone:!1})}},unique:{method(t,i){void 0===i&&(i={}),s(!t||"function"==typeof t||"string"==typeof t,"comparator must be a function or a string"),h.assertOptions(i,["ignoreUndefined","separator"]);const e={name:"unique",args:{options:i,comparator:t}};if(t)if("string"==typeof t){const s=h.default(i.separator,".");e.path=s?t.split(s):[t]}else e.comparator=t;return this.$_addRule(e)},validate(t,i,e,o){let{state:h,error:a,schema:u}=i,{comparator:c,options:l}=e,{comparator:d,path:f}=o;const _={string:w.create(null),number:w.create(null),undefined:w.create(null),boolean:w.create(null),bigint:w.create(null),object:new Map,function:new Map,custom:new Map},g=d||n,v=l.ignoreUndefined;for(let i=0;i<t.length;++i){const e=f?r(t[i],f):t[i],n=d?_.custom:_[typeof e];if(s(n,"Failed to find unique map container for type",typeof e),n instanceof Map){const s=n.entries();let r;for(;!(r=s.next()).done;)if(g(r.value[0],e)){const e=h.localize([...h.path,i],[t,...h.ancestors]),s={pos:i,value:t[i],dupePos:r.value[1],dupeValue:t[r.value[1]]};return f&&(s.path=c),a("array.unique",s,e)}n.set(e,i)}else{if((!v||void 0!==e)&&void 0!==n[e]){const s={pos:i,value:t[i],dupePos:n[e],dupeValue:t[n[e]]};return f&&(s.path=c),a("array.unique",s,h.localize([...h.path,i],[t,...h.ancestors]))}n[e]=i}}return t},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(t,i)=>new Set(t)}},rebuild(t){t.$_terms.Qf=[],t.$_terms.Uf=[],t.$_terms.Ff=[];for(const i of t.$_terms.items)u.validateSingle(i,t),"required"===i.Kd.presence?t.$_terms.Ff.push(i):"forbidden"===i.Kd.presence?t.$_terms.Uf.push(i):t.$_terms.Qf.push(i);for(const i of t.$_terms.ordered)u.validateSingle(i,t)},manifest:{build:(t,i)=>(i.items&&(t=t.items(...i.items)),i.ordered&&(t=t.ordered(...i.ordered)),t)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),u.fillMissedErrors=function(t,i,e,s,n,r){const o=[];let h=0;for(const t of e){const i=t.Kd.label;i?o.push(i):++h}o.length?h?i.push(t.$_createError("array.includesRequiredBoth",s,{knownMisses:o,unknownMisses:h},n,r)):i.push(t.$_createError("array.includesRequiredKnowns",s,{knownMisses:o},n,r)):i.push(t.$_createError("array.includesRequiredUnknowns",s,{unknownMisses:h},n,r))},u.fillOrderedErrors=function(t,i,e,s,n,r){const o=[];for(const t of e)"required"===t.Kd.presence&&o.push(t);o.length&&u.fillMissedErrors(t,i,o,s,n,r)},u.fillDefault=function(t,i,e,s){const n=[];let r=!0;for(let o=t.length-1;o>=0;--o){const h=t[o],a=[i,...e.ancestors],u=h.$_validate(void 0,e.localize(e.path,a,h),s).value;if(r){if(void 0===u)continue;r=!1}n.unshift(u)}n.length&&i.push(...n)},u.fastSplice=function(t,i){let e=i;for(;e<t.length;)t[e++]=t[e];--t.length},u.validateSingle=function(t,i){("array"===t.type||t.Kd.Bf)&&(s(!i.Kd.single,"Cannot specify array item with single rule enabled"),i.$_setFlag("Bf",!0,{clone:!1}))},u.sort=function(t,i,e,s,n){const r="ascending"===e.order?1:-1,o=-1*r,h=r,a=(a,c)=>{let l=u.compare(a,c,o,h);if(null!==l||(e.by&&(a=e.by.resolve(a,s,n),c=e.by.resolve(c,s,n)),l=u.compare(a,c,o,h),null!==l))return l;const d=typeof a;if(d!==typeof c)throw t.$_createError("array.sort.mismatching",i,null,s,n);if("number"!==d&&"string"!==d)throw t.$_createError("array.sort.unsupported",i,{type:d},s,n);return"number"===d?(a-c)*r:a<c?o:h};try{return{value:i.slice().sort(a)}}catch(t){return{errors:t}}},u.compare=function(t,i,e,s){return t===i?0:void 0===t?1:void 0===i?-1:null===t?s:null===i?e:null}},4937:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o=e(2036),h={isBool:function(t){return"boolean"==typeof t}};t.exports=n.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(t,i){let{schema:e}=i;if("boolean"!=typeof t){if("string"==typeof t){const i=e.Kd.sensitive?t:t.toLowerCase();t="true"===i||"false"!==i&&t}return"boolean"!=typeof t&&(t=e.$_terms.truthy&&e.$_terms.truthy.has(t,null,null,!e.Kd.sensitive)||(!e.$_terms.falsy||!e.$_terms.falsy.has(t,null,null,!e.Kd.sensitive))&&t),{value:t}}},validate(t,i){let{error:e}=i;if("boolean"!=typeof t)return{value:t,errors:e("boolean.base")}},rules:{truthy:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];r.verifyFlat(i,"truthy");const n=this.clone();n.$_terms.truthy=n.$_terms.truthy||new o;for(let t=0;t<i.length;++t){const e=i[t];s(void 0!==e,"Cannot call truthy with undefined"),n.$_terms.truthy.add(e)}return n}},falsy:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];r.verifyFlat(i,"falsy");const n=this.clone();n.$_terms.falsy=n.$_terms.falsy||new o;for(let t=0;t<i.length;++t){const e=i[t];s(void 0!==e,"Cannot call falsy with undefined"),n.$_terms.falsy.add(e)}return n}},sensitive:{method(t){return void 0===t&&(t=!0),this.$_setFlag("sensitive",t)}}},cast:{number:{from:h.isBool,to:(t,i)=>t?1:0},string:{from:h.isBool,to:(t,i)=>t?"true":"false"}},manifest:{build:(t,i)=>(i.truthy&&(t=t.truthy(...i.truthy)),i.falsy&&(t=t.falsy(...i.falsy)),t)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o=e(3328),h={isDate:function(t){return t instanceof Date}};t.exports=n.extend({type:"date",coerce:{from:["number","string"],method:(t,i)=>{let{schema:e}=i;return{value:h.parse(t,e.Kd.format)||t}}},validate(t,i){let{schema:e,error:s,prefs:n}=i;if(t instanceof Date&&!S(t.getTime()))return;const r=e.Kd.format;return n.convert&&r&&"string"==typeof t?{value:t,errors:s("date.format",{format:r})}:{value:t,errors:s("date.base")}},rules:{compare:{method:!1,validate(t,i,e,s){let{date:n}=e,{name:o,operator:h,args:a}=s;const u="now"===n?Date.now():n.getTime();return r.compare(t.getTime(),u,h)?t:i.error("date."+o,{limit:a.date,value:t})},args:[{name:"date",ref:!0,normalize:t=>"now"===t?t:h.parse(t),assert:t=>null!==t,message:"must have a valid date format"}]},format:{method(t){return s(["iso","javascript","unix"].includes(t),"Unknown date format",t),this.$_setFlag("format",t)}},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{date:t},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{date:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{date:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{date:t},operator:">="})}},timestamp:{method(t){return void 0===t&&(t="javascript"),s(["javascript","unix"].includes(t),'"type" must be one of "javascript, unix"'),this.format(t)}}},cast:{number:{from:h.isDate,to:(t,i)=>t.getTime()},string:{from:h.isDate,to:(t,i)=>{let{prefs:e}=i;return o.date(t,e)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),h.parse=function(t,i){if(t instanceof Date)return t;if("string"!=typeof t&&(S(t)||!isFinite(t))||/^\s*$/.test(t))return null;if("iso"===i)return r.isIsoDate(t)?h.date(t.toString()):null;const e=t;if("string"==typeof t&&/^[+-]?\d+(\.\d+)?$/.test(t)&&(t=C(t)),i){if("javascript"===i)return h.date(1*t);if("unix"===i)return h.date(1e3*t);if("string"==typeof e)return null}return h.date(t)},h.date=function(t){const i=new Date(t);return S(i.getTime())?null:i}},390:(t,i,e)=>{const s=e(375),n=e(7824);t.exports=n.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:t}})},validate:(t,i,e)=>{let{n:s}=e;return t.length===s?t:i.error("function.arity",{n:s})}},class:{method(){return this.$_addRule("class")},validate:(t,i)=>/^\s*class\s/.test(t.toString())?t:i.error("function.class",{value:t})},minArity:{method(t){return s(Number.isSafeInteger(t)&&t>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:t}})},validate:(t,i,e)=>{let{n:s}=e;return t.length>=s?t:i.error("function.minArity",{n:s})}},maxArity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:t}})},validate:(t,i,e)=>{let{n:s}=e;return t.length<=s?t:i.error("function.maxArity",{n:s})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(t,i,e)=>{const s=e(978),n=e(375),r=e(8571),o=e(3652),h=e(8068),a=e(8160),u=e(3292),c=e(6354),f=e(6133),_=e(3328),g={renameDefaults:{alias:!1,multiple:!1,override:!1}};t.exports=h.extend({type:"Yf",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(t,i)=>t.keys(i),validate(t,i){let{schema:e,error:s,state:n,prefs:r}=i;if(!t||typeof t!==e.$_property("typeof")||Array.isArray(t))return{value:t,errors:s("object.base",{type:e.$_property("typeof")})};if(!(e.$_terms.renames||e.$_terms.dependencies||e.$_terms.keys||e.$_terms.patterns||e.$_terms.externals))return;t=g.clone(t,r);const o=[];if(e.$_terms.renames&&!g.rename(e,t,n,r,o))return{value:t,errors:o};if(!e.$_terms.keys&&!e.$_terms.patterns&&!e.$_terms.dependencies)return{value:t,errors:o};const h=new Set(w.keys(t));if(e.$_terms.keys){const i=[t,...n.ancestors];for(const s of e.$_terms.keys){const e=s.key,a=t[e];h.delete(e);const u=n.localize([...n.path,e],i,s),c=s.schema.$_validate(a,u,r);if(c.errors){if(r.abortEarly)return{value:t,errors:c.errors};void 0!==c.value&&(t[e]=c.value),o.push(...c.errors)}else"strip"===s.schema.Kd.result||void 0===c.value&&void 0!==a?delete t[e]:void 0!==c.value&&(t[e]=c.value)}}if(h.size||e.Kd.Gf){const i=g.unknown(e,t,h,o,n,r);if(i)return i}if(e.$_terms.dependencies)for(const i of e.$_terms.dependencies){if(null!==i.key&&!1===g.isPresent(i.options)(i.key.resolve(t,n,r,null,{shadow:!1})))continue;const s=g.dependencies[i.rel](e,i,t,n,r);if(s){const i=e.$_createError(s.code,t,s.context,n,r);if(r.abortEarly)return{value:t,errors:i};o.push(i)}}return{value:t,errors:o}},rules:{and:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"and"),g.dependency(this,"and",null,i)}},append:{method(t){return null==t||0===w.keys(t).length?this:this.keys(t)}},assert:{method(t,i,e){_.isTemplate(t)||(t=u.ref(t)),n(void 0===e||"string"==typeof e,"Message must be a string"),i=this.$_compile(i,{appendPath:!0});const s=this.$_addRule({name:"assert",args:{subject:t,schema:i,message:e}});return s.$_mutateRegister(t),s.$_mutateRegister(i),s},validate(t,i,e){let{error:s,prefs:n,state:r}=i,{subject:o,schema:h,message:a}=e;const u=o.resolve(t,r,n),c=f.isRef(o)?o.absolute(r):[];return h.$_match(u,r.localize(c,[t,...r.ancestors],h),n)?t:s("object.assert",{subject:o,message:a})},args:["subject","schema","message"],multi:!0},instance:{method(t,i){return n("function"==typeof t,"constructor must be a function"),i=i||t.name,this.$_addRule({name:"instance",args:{constructor:t,name:i}})},validate:(t,i,e)=>{let{constructor:s,name:n}=e;return t instanceof s?t:i.error("object.instance",{type:n,value:t})},args:["constructor","name"]},keys:{method(t){n(void 0===t||"object"==typeof t,"Object schema must be a valid object"),n(!a.isSchema(t),"Object schema cannot be a joi schema");const i=this.clone();if(t)if(w.keys(t).length){i.$_terms.keys=i.$_terms.keys?i.$_terms.keys.filter((i=>!t.hasOwnProperty(i.key))):new g.Keys;for(const e in t)a.tryWithPath((()=>i.$_terms.keys.push({key:e,schema:this.$_compile(t[e])})),e)}else i.$_terms.keys=new g.Keys;else i.$_terms.keys=null;return i.$_mutateRebuild()}},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,i,e,s)=>{let{limit:n}=e,{name:r,operator:o,args:h}=s;return a.compare(w.keys(t).length,n,o)?t:i.error("object."+r,{limit:h.limit,value:t})},args:[{name:"limit",ref:!0,assert:a.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},nand:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"nand"),g.dependency(this,"nand",null,i)}},or:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"or"),g.dependency(this,"or",null,i)}},oxor:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return g.dependency(this,"oxor",null,i)}},pattern:{method(t,i,e){void 0===e&&(e={});const s=t instanceof RegExp;s||(t=this.$_compile(t,{appendPath:!0})),n(void 0!==i,"Invalid rule"),a.assertOptions(e,["fallthrough","matches"]),s&&n(!t.flags.includes("g")&&!t.flags.includes("y"),"pattern should not use global or sticky mode"),i=this.$_compile(i,{appendPath:!0});const r=this.clone();r.$_terms.patterns=r.$_terms.patterns||[];const o={[s?"regex":"schema"]:t,rule:i};return e.matches&&(o.matches=this.$_compile(e.matches),"array"!==o.matches.type&&(o.matches=o.matches.$_root.array().items(o.matches)),r.$_mutateRegister(o.matches),r.$_setFlag("Gf",!0,{clone:!1})),e.fallthrough&&(o.fallthrough=!0),r.$_terms.patterns.push(o),r.$_mutateRegister(i),r}},ref:{method(){return this.$_addRule("ref")},validate:(t,i)=>f.isRef(t)?t:i.error("object.refType",{value:t})},regex:{method(){return this.$_addRule("regex")},validate:(t,i)=>t instanceof RegExp?t:i.error("object.regex",{value:t})},rename:{method(t,i,e){void 0===e&&(e={}),n("string"==typeof t||t instanceof RegExp,"Rename missing the from argument"),n("string"==typeof i||i instanceof _,"Invalid rename to argument"),n(i!==t,"Cannot rename key to same name:",t),a.assertOptions(e,["alias","ignoreUndefined","override","multiple"]);const r=this.clone();r.$_terms.renames=r.$_terms.renames||[];for(const i of r.$_terms.renames)n(i.from!==t,"Cannot rename the same key multiple times");return i instanceof _&&r.$_mutateRegister(i),r.$_terms.renames.push({from:t,to:i,options:s(g.renameDefaults,e)}),r}},schema:{method(t){return void 0===t&&(t="any"),this.$_addRule({name:"schema",args:{type:t}})},validate:(t,i,e)=>{let{type:s}=e;return!a.isSchema(t)||"any"!==s&&t.type!==s?i.error("object.schema",{type:s}):t}},unknown:{method(t){return this.$_setFlag("unknown",!1!==t)}},with:{method(t,i,e){return void 0===e&&(e={}),g.dependency(this,"with",t,i,e)}},without:{method(t,i,e){return void 0===e&&(e={}),g.dependency(this,"without",t,i,e)}},xor:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"xor"),g.dependency(this,"xor",null,i)}}},overrides:{default(t,i){return void 0===t&&(t=a.symbols.deepDefault),this.$_parent("default",t,i)}},rebuild(t){if(t.$_terms.keys){const i=new o.Sorter;for(const e of t.$_terms.keys)a.tryWithPath((()=>i.add(e,{after:e.schema.$_rootReferences(),group:e.key})),e.key);t.$_terms.keys=new g.Keys(...i.nodes)}},manifest:{build(t,i){if(i.keys&&(t=t.keys(i.keys)),i.dependencies)for(const{rel:e,key:s=null,peers:n,options:r}of i.dependencies)t=g.dependency(t,e,s,n,r);if(i.patterns)for(const{regex:e,schema:s,rule:n,fallthrough:r,matches:o}of i.patterns)t=t.pattern(e||s,n,{fallthrough:r,matches:o});if(i.renames)for(const{from:e,to:s,options:n}of i.renames)t=t.rename(e,s,n);return t}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),g.clone=function(t,i){if("object"==typeof t){if(i.nonEnumerables)return r(t,{shallow:!0});const e=w.create(w.getPrototypeOf(t));return w.assign(e,t),e}const e=function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];return t.apply(this,e)};return e.prototype=r(t.prototype),w.defineProperty(e,"name",{value:t.name,writable:!1}),w.defineProperty(e,"length",{value:t.length,writable:!1}),w.assign(e,t),e},g.dependency=function(t,i,e,s,r){n(null===e||"string"==typeof e,i,"key must be a strings"),r||(r=s.length>1&&"object"==typeof s[s.length-1]?s.pop():{}),a.assertOptions(r,["separator","isPresent"]),s=[].concat(s);const o=a.default(r.separator,"."),h=[];for(const t of s)n("string"==typeof t,i,"peers must be strings"),h.push(u.ref(t,{separator:o,ancestor:0,prefix:!1}));null!==e&&(e=u.ref(e,{separator:o,ancestor:0,prefix:!1}));const c=t.clone();return c.$_terms.dependencies=c.$_terms.dependencies||[],c.$_terms.dependencies.push(new g.Dependency(i,e,h,s,r)),c},g.dependencies={and(t,i,e,s,n){const r=[],o=[],h=i.peers.length,a=g.isPresent(i.options);for(const t of i.peers)!1===a(t.resolve(e,s,n,null,{shadow:!1}))?r.push(t.key):o.push(t.key);if(r.length!==h&&o.length!==h)return{code:"object.and",context:{present:o,presentWithLabels:g.keysToLabels(t,o),missing:r,missingWithLabels:g.keysToLabels(t,r)}}},nand(t,i,e,s,n){const r=[],o=g.isPresent(i.options);for(const t of i.peers)o(t.resolve(e,s,n,null,{shadow:!1}))&&r.push(t.key);if(r.length!==i.peers.length)return;const h=i.paths[0],a=i.paths.slice(1);return{code:"object.nand",context:{main:h,mainWithLabel:g.keysToLabels(t,h),peers:a,peersWithLabels:g.keysToLabels(t,a)}}},or(t,i,e,s,n){const r=g.isPresent(i.options);for(const t of i.peers)if(r(t.resolve(e,s,n,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:i.paths,peersWithLabels:g.keysToLabels(t,i.paths)}}},oxor(t,i,e,s,n){const r=[],o=g.isPresent(i.options);for(const t of i.peers)o(t.resolve(e,s,n,null,{shadow:!1}))&&r.push(t.key);if(!r.length||1===r.length)return;const h={peers:i.paths,peersWithLabels:g.keysToLabels(t,i.paths)};return h.present=r,h.presentWithLabels=g.keysToLabels(t,r),{code:"object.oxor",context:h}},with(t,i,e,s,n){const r=g.isPresent(i.options);for(const o of i.peers)if(!1===r(o.resolve(e,s,n,null,{shadow:!1})))return{code:"object.with",context:{main:i.key.key,mainWithLabel:g.keysToLabels(t,i.key.key),peer:o.key,peerWithLabel:g.keysToLabels(t,o.key)}}},without(t,i,e,s,n){const r=g.isPresent(i.options);for(const o of i.peers)if(r(o.resolve(e,s,n,null,{shadow:!1})))return{code:"object.without",context:{main:i.key.key,mainWithLabel:g.keysToLabels(t,i.key.key),peer:o.key,peerWithLabel:g.keysToLabels(t,o.key)}}},xor(t,i,e,s,n){const r=[],o=g.isPresent(i.options);for(const t of i.peers)o(t.resolve(e,s,n,null,{shadow:!1}))&&r.push(t.key);if(1===r.length)return;const h={peers:i.paths,peersWithLabels:g.keysToLabels(t,i.paths)};return 0===r.length?{code:"object.missing",context:h}:(h.present=r,h.presentWithLabels=g.keysToLabels(t,r),{code:"object.xor",context:h})}},g.keysToLabels=function(t,i){return Array.isArray(i)?i.map((i=>t.$_mapLabels(i))):t.$_mapLabels(i)},g.isPresent=function(t){return"function"==typeof t.isPresent?t.isPresent:t=>void 0!==t},g.rename=function(t,i,e,s,n){const r={};for(const o of t.$_terms.renames){const h=[],a="string"!=typeof o.from;if(a)for(const t in i){if(void 0===i[t]&&o.options.ignoreUndefined||t===o.to)continue;const e=o.from.exec(t);e&&h.push({from:t,to:o.to,match:e})}else!w.prototype.hasOwnProperty.call(i,o.from)||void 0===i[o.from]&&o.options.ignoreUndefined||h.push(o);for(const u of h){const h=u.from;let c=u.to;if(c instanceof _&&(c=c.render(i,e,s,u.match)),h!==c){if(!o.options.multiple&&r[c]&&(n.push(t.$_createError("object.rename.multiple",i,{from:h,to:c,pattern:a},e,s)),s.abortEarly)||w.prototype.hasOwnProperty.call(i,c)&&!o.options.override&&!r[c]&&(n.push(t.$_createError("object.rename.override",i,{from:h,to:c,pattern:a},e,s)),s.abortEarly))return!1;void 0===i[h]?delete i[c]:i[c]=i[h],r[c]=!0,o.options.alias||delete i[h]}}}return!0},g.unknown=function(t,i,e,s,n,r){if(t.$_terms.patterns){let o=!1;const h=t.$_terms.patterns.map((t=>{if(t.matches)return o=!0,[]})),a=[i,...n.ancestors];for(const o of e){const u=i[o],c=[...n.path,o];for(let l=0;l<t.$_terms.patterns.length;++l){const d=t.$_terms.patterns[l];if(d.regex){const t=d.regex.test(o);if(n.mainstay.tracer.debug(n,"rule","pattern.".concat(l),t?"pass":"error"),!t)continue}else if(!d.schema.$_match(o,n.nest(d.schema,"pattern.".concat(l)),r))continue;e.delete(o);const f=n.localize(c,a,{schema:d.rule,key:o}),_=d.rule.$_validate(u,f,r);if(_.errors){if(r.abortEarly)return{value:i,errors:_.errors};s.push(..._.errors)}if(d.matches&&h[l].push(o),i[o]=_.value,!d.fallthrough)break}}if(o)for(let e=0;e<h.length;++e){const o=h[e];if(!o)continue;const u=t.$_terms.patterns[e].matches,l=n.localize(n.path,a,u),d=u.$_validate(o,l,r);if(d.errors){const e=c.details(d.errors,{override:!1});e.matches=o;const h=t.$_createError("object.pattern.match",i,e,n,r);if(r.abortEarly)return{value:i,errors:h};s.push(h)}}}if(e.size&&(t.$_terms.keys||t.$_terms.patterns)){if(r.stripUnknown&&!t.Kd.unknown||r.skipFunctions){const t=!(!r.stripUnknown||!0!==r.stripUnknown&&!r.stripUnknown.objects);for(const s of e)t?(delete i[s],e.delete(s)):"function"==typeof i[s]&&e.delete(s)}if(!a.default(t.Kd.unknown,r.allowUnknown))for(const o of e){const e=n.localize([...n.path,o],[]),h=t.$_createError("object.unknown",i[o],{child:o},e,r,{flags:!1});if(r.abortEarly)return{value:i,errors:h};s.push(h)}}},g.Dependency=class{describe(){const t={rel:this.rel,peers:this.paths};return null!==this.key&&(t.key=this.key.key),"."!==this.peers[0].separator&&(t.options=d(l({},t.options),{separator:this.peers[0].separator})),this.options.isPresent&&(t.options=d(l({},t.options),{isPresent:this.options.isPresent})),t}constructor(t,i,e,s,n){this.rel=t,this.key=i,this.peers=e,this.paths=s,this.options=n}},g.Keys=class extends Array{concat(t){const i=this.slice(),e=new Map;for(let t=0;t<i.length;++t)e.set(i[t].key,t);for(const s of t){const t=s.key,n=e.get(t);void 0!==n?i[n]={key:t,schema:i[n].schema.concat(s.schema)}:i.push(s)}return i}}},8785:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o=e(3292),h=e(6354),a={};t.exports=n.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(t,i)=>t.ref(i),validate(t,i){let{schema:e,state:n,prefs:r}=i;s(e.$_terms.link,"Uninitialized link schema");const o=a.generate(e,t,n,r),h=e.$_terms.link[0].ref;return o.$_validate(t,n.nest(o,"link:".concat(h.display,":").concat(o.type)),r)},generate:(t,i,e,s)=>a.generate(t,i,e,s),rules:{ref:{method(t){s(!this.$_terms.link,"Cannot reinitialize schema"),t=o.ref(t),s("value"===t.type||"local"===t.type,"Invalid reference type:",t.type),s("local"===t.type||"root"===t.ancestor||t.ancestor>0,"Link cannot reference itself");const i=this.clone();return i.$_terms.link=[{ref:t}],i}},relative:{method(t){return void 0===t&&(t=!0),this.$_setFlag("relative",t)}}},overrides:{concat(t){s(this.$_terms.link,"Uninitialized link schema"),s(r.isSchema(t),"Invalid schema object"),s("link"!==t.type,"Cannot merge type link with another link");const i=this.clone();return i.$_terms.whens||(i.$_terms.whens=[]),i.$_terms.whens.push({concat:t}),i.$_mutateRebuild()}},manifest:{build:(t,i)=>(s(i.link,"Invalid link description missing link"),t.ref(i.link))}}),a.generate=function(t,i,e,s){let n=e.mainstay.links.get(t);if(n)return n.vf(i,e,s).schema;const r=t.$_terms.link[0].ref,{perspective:o,path:h}=a.perspective(r,e);a.assert(o,"which is outside of schema boundaries",r,t,e,s);try{n=h.length?o.$_reach(h):o}catch(i){a.assert(!1,"to non-existing schema",r,t,e,s)}return a.assert("link"!==n.type,"which is another link",r,t,e,s),t.Kd.relative||e.mainstay.links.set(t,n),n.vf(i,e,s).schema},a.perspective=function(t,i){if("local"===t.type){for(const{schema:e,key:s}of i.schemas){if((e.Kd.id||s)===t.path[0])return{perspective:e,path:t.path.slice(1)};if(e.$_terms.shared)for(const i of e.$_terms.shared)if(i.Kd.id===t.path[0])return{perspective:i,path:t.path.slice(1)}}return{perspective:null,path:null}}return"root"===t.ancestor?{perspective:i.schemas[i.schemas.length-1].schema,path:t.path}:{perspective:i.schemas[t.ancestor]&&i.schemas[t.ancestor].schema,path:t.path}},a.assert=function(t,i,e,n,r,o){t||s(!1,'"'.concat(h.label(n.Kd,r,o),'" contains link reference "').concat(e.display,'" ').concat(i))}},3832:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(t){const i=t.toString(),e=i.indexOf("."),s=i.indexOf("e");return(e<0?0:(s<0?i.length:s)-e-1)+(s<0?0:_.max(0,-x(i.slice(s+1))))}};t.exports=n.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(t,i){let{schema:e,error:s}=i;if(!t.match(o.numberRx))return;t=t.trim();const n={value:C(t)};if(0===n.value&&(n.value=0),!e.Kd.unsafe)if(t.match(/e/i)){if(o.extractSignificantDigits(t)!==o.extractSignificantDigits(String(n.value)))return n.errors=s("number.unsafe"),n}else{const i=n.value.toString();if(i.match(/e/i))return n;if(i!==o.normalizeDecimal(t))return n.errors=s("number.unsafe"),n}return n}},validate(t,i){let{schema:e,error:s,prefs:n}=i;if(t===1/0||t===-1/0)return{value:t,errors:s("number.infinity")};if(!r.isNumber(t))return{value:t,errors:s("number.base")};const o={value:t};if(n.convert){const t=e.$_getRule("precision");if(t){const i=_.pow(10,t.args.limit);o.value=_.round(o.value*i)/i}}return 0===o.value&&(o.value=0),!e.Kd.unsafe&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&(o.errors=s("number.unsafe")),o},rules:{compare:{method:!1,validate:(t,i,e,s)=>{let{limit:n}=e,{name:o,operator:h,args:a}=s;return r.compare(t,n,h)?t:i.error("number."+o,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:r.isNumber,message:"must be a number"}]},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{limit:t},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(t,i)=>_.trunc(t)-t==0?t:i.error("number.integer")},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{limit:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{limit:t},operator:">="})}},multiple:{method(t){const i="number"==typeof t?o.decimalPlaces(t):null,e=_.pow(10,i);return this.$_addRule({name:"multiple",args:{base:t,baseDecimalPlace:i,pfactor:e}})},validate:(t,i,e,s)=>{let{base:n,baseDecimalPlace:r,pfactor:h}=e;return o.decimalPlaces(t)>r?i.error("number.multiple",{multiple:s.args.base,value:t}):_.round(h*t)%_.round(h*n)==0?t:i.error("number.multiple",{multiple:s.args.base,value:t})},args:[{name:"base",ref:!0,assert:t=>"number"==typeof t&&isFinite(t)&&t>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(t,i)=>Number.isSafeInteger(t)&&t>=0&&t<=65535?t:i.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(t){return s(Number.isSafeInteger(t),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:t}})},validate(t,i,e){let{limit:s}=e;const n=t.toString().match(o.precisionRx);return _.max((n[1]?n[1].length:0)-(n[2]?x(n[2],10):0),0)<=s?t:i.error("number.precision",{limit:s,value:t})},convert:!0},sign:{method(t){return s(["negative","positive"].includes(t),"Invalid sign",t),this.$_addRule({name:"sign",args:{sign:t}})},validate:(t,i,e)=>{let{sign:s}=e;return"negative"===s&&t<0||"positive"===s&&t>0?t:i.error("number.".concat(s))}},unsafe:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("unsafe",t)}}},cast:{string:{from:t=>"number"==typeof t,to:(t,i)=>t.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),o.extractSignificantDigits=function(t){return t.replace(o.exponentialPartRegex,"").replace(o.dotRegex,"").replace(o.trailingZerosRegex,"").replace(o.leadingSignAndZerosRegex,"")},o.normalizeDecimal=function(t){return(t=t.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&t.endsWith("0")&&(t=t.replace(/0+$/,"")),"-0"===t?"0":t}},8966:(t,i,e)=>{const s=e(7824);t.exports=s.extend({type:"object",cast:{map:{from:t=>t&&"object"==typeof t,to:(t,i)=>new Map(w.entries(t))}}})},7417:(t,i,e)=>{const s=e(375),n=e(5380),r=e(1745),o=e(9959),h=e(6064),a=e(9926),u=e(5752),c=e(8068),d=e(8160),f={tlds:a instanceof Set&&{tlds:{allow:a,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:o.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};t.exports=c.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(t,i){let{schema:e,state:s,prefs:n}=i;const r=e.$_getRule("normalize");r&&(t=t.normalize(r.args.form));const o=e.$_getRule("case");o&&(t="upper"===o.args.direction?t.toLocaleUpperCase():t.toLocaleLowerCase());const h=e.$_getRule("trim");if(h&&h.args.enabled&&(t=t.trim()),e.$_terms.replacements)for(const i of e.$_terms.replacements)t=t.replace(i.pattern,i.replacement);const a=e.$_getRule("hex");if(a&&a.args.options.byteAligned&&t.length%2!=0&&(t="0".concat(t)),e.$_getRule("isoDate")){const i=f.isoDate(t);i&&(t=i)}if(e.Kd.truncate){const i=e.$_getRule("max");if(i){let r=i.args.limit;if(d.isResolvable(r)&&(r=r.resolve(t,s,n),!d.limit(r)))return{value:t,errors:e.$_createError("any.ref",r,{ref:i.args.limit,arg:"limit",reason:"must be a positive integer"},s,n)};t=t.slice(0,r)}}return{value:t}}},validate(t,i){let{schema:e,error:s}=i;if("string"!=typeof t)return{value:t,errors:s("string.base")};if(""===t){const i=e.$_getRule("min");return i&&0===i.args.limit?void 0:{value:t,errors:s("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(t,i)=>/^[a-zA-Z0-9]+$/.test(t)?t:i.error("string.alphanum")},base64:{method(t){return void 0===t&&(t={}),d.assertOptions(t,["paddingRequired","urlSafe"]),t=l({urlSafe:!1,paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),s("boolean"==typeof t.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:t}})},validate:(t,i,e)=>{let{options:s}=e;return f.base64Regex[s.paddingRequired][s.urlSafe].test(t)?t:i.error("string.base64")}},case:{method(t){return s(["lower","upper"].includes(t),"Invalid case:",t),this.$_addRule({name:"case",args:{direction:t}})},validate:(t,i,e)=>{let{direction:s}=e;return"lower"===s&&t===t.toLocaleLowerCase()||"upper"===s&&t===t.toLocaleUpperCase()?t:i.error("string.".concat(s,"case"))},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(t,i){let e=t.length,s=0,n=1;for(;e--;){const i=t.charAt(e)*n;s+=i-9*(i>9),n^=3}return s>0&&s%10==0?t:i.error("string.creditCard")}},dataUri:{method(t){return void 0===t&&(t={}),d.assertOptions(t,["paddingRequired"]),t=l({paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:t}})},validate(t,i,e){let{options:s}=e;const n=t.match(f.dataUriRegex);return!n||n[2]&&"base64"===n[2]&&!f.base64Regex[s.paddingRequired].false.test(n[3])?i.error("string.dataUri"):t}},domain:{method(t){t&&d.assertOptions(t,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const i=f.addressOptions(t);return this.$_addRule({name:"domain",args:{options:t},address:i})},validate:(t,i,e,s)=>{let{address:r}=s;return n.isValid(t,r)?t:i.error("string.domain")}},email:{method(t){void 0===t&&(t={}),d.assertOptions(t,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),s(void 0===t.multiple||"boolean"==typeof t.multiple,"multiple option must be an boolean");const i=f.addressOptions(t),e=new RegExp("\\s*[".concat(t.separator?h(t.separator):",","]\\s*"));return this.$_addRule({name:"email",args:{options:t},regex:e,address:i})},validate(t,i,e,s){let{options:n}=e,{regex:o,address:h}=s;const a=n.multiple?t.split(o):[t],u=[];for(const t of a)r.isValid(t,h)||u.push(t);return u.length?i.error("string.email",{value:t,invalids:u}):t}},guid:{alias:"uuid",method(t){void 0===t&&(t={}),d.assertOptions(t,["version","separator"]);let i="";if(t.version){const e=[].concat(t.version);s(e.length>=1,"version must have at least 1 valid version specified");const n=new Set;for(let t=0;t<e.length;++t){const r=e[t];s("string"==typeof r,"version at position "+t+" must be a string");const o=f.guidVersions[r.toLowerCase()];s(o,"version at position "+t+" must be one of "+w.keys(f.guidVersions).join(", ")),s(!n.has(o),"version at position "+t+" must not be a duplicate"),i+=o,n.add(o)}}s(f.guidSeparators.has(t.separator),'separator must be one of true, false, "-", or ":"');const e=void 0===t.separator?"[:-]?":!0===t.separator?"[:-]":!1===t.separator?"[]?":"\\".concat(t.separator),n=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}(".concat(e,")[0-9A-F]{4}\\2?[").concat(i||"0-9A-F","][0-9A-F]{3}\\2?[").concat(i?"89AB":"0-9A-F","][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$"),"i");return this.$_addRule({name:"guid",args:{options:t},regex:n})},validate(t,i,e,s){let{regex:n}=s;const r=n.exec(t);return r?f.guidBrackets[r[1]]!==r[r.length-1]?i.error("string.guid"):t:i.error("string.guid")}},hex:{method(t){return void 0===t&&(t={}),d.assertOptions(t,["byteAligned","prefix"]),t=l({byteAligned:!1,prefix:!1},t),s("boolean"==typeof t.byteAligned,"byteAligned must be boolean"),s("boolean"==typeof t.prefix||"optional"===t.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:t}})},validate:(t,i,e)=>{let{options:s}=e;return("optional"===s.prefix?f.hexRegex.withOptionalPrefix:!0===s.prefix?f.hexRegex.withPrefix:f.hexRegex.withoutPrefix).test(t)?s.byteAligned&&t.length%2!=0?i.error("string.hexAlign"):t:i.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(t,i)=>n.isValid(t,{minDomainSegments:1})||f.ipRegex.test(t)?t:i.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(t){void 0===t&&(t={}),d.assertOptions(t,["cidr","version"]);const{cidr:i,versions:e,regex:s}=o.regex(t),n=t.version?e:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:i,version:n}},regex:s})},validate:(t,i,e,s)=>{let{options:n}=e,{regex:r}=s;return r.test(t)?t:n.version?i.error("string.ipVersion",{value:t,cidr:n.cidr,version:n.version}):i.error("string.ip",{value:t,cidr:n.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate:(t,i)=>{let{error:e}=i;return f.isoDate(t)?t:e("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(t,i)=>f.isoDurationRegex.test(t)?t:i.error("string.isoDuration")},length:{method(t,i){return f.length(this,"length",t,"=",i)},validate(t,i,e,s){let{limit:n,encoding:r}=e,{name:o,operator:h,args:a}=s;const u=!r&&t.length;return d.compare(u,n,h)?t:i.error("string."+o,{limit:a.limit,value:t,encoding:r})},args:[{name:"limit",ref:!0,assert:d.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(t,i){return f.length(this,"max",t,"<=",i)},args:["limit","encoding"]},min:{method(t,i){return f.length(this,"min",t,">=",i)},args:["limit","encoding"]},normalize:{method(t){return void 0===t&&(t="NFC"),s(f.normalizationForms.includes(t),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:t}})},validate:(t,i,e)=>{let{error:s}=i,{form:n}=e;return t===t.normalize(n)?t:s("string.normalize",{value:t,form:n})},convert:!0},pattern:{alias:"regex",method(t,i){void 0===i&&(i={}),s(t instanceof RegExp,"regex must be a RegExp"),s(!t.flags.includes("g")&&!t.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof i&&(i={name:i}),d.assertOptions(i,["invert","name"]);const e=["string.pattern",i.invert?".invert":"",i.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:t,options:i},errorCode:e})},validate:(t,i,e,s)=>{let{regex:n,options:r}=e,{errorCode:o}=s;return n.test(t)^r.invert?t:i.error(o,{name:r.name,regex:n,value:t})},args:["regex","options"],multi:!0},replace:{method(t,i){"string"==typeof t&&(t=new RegExp(h(t),"g")),s(t instanceof RegExp,"pattern must be a RegExp"),s("string"==typeof i,"replacement must be a String");const e=this.clone();return e.$_terms.replacements||(e.$_terms.replacements=[]),e.$_terms.replacements.push({pattern:t,replacement:i}),e}},token:{method(){return this.$_addRule("token")},validate:(t,i)=>/^\w+$/.test(t)?t:i.error("string.token")},trim:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:t}})},validate:(t,i,e)=>{let{enabled:s}=e;return s&&t!==t.trim()?i.error("string.trim"):t},convert:!0},truncate:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("truncate",t)}},uppercase:{method(){return this.case("upper")}},uri:{method(t){void 0===t&&(t={}),d.assertOptions(t,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),t.domain&&d.assertOptions(t.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:i,scheme:e}=u.regex(t),s=t.domain?f.addressOptions(t.domain):null;return this.$_addRule({name:"uri",args:{options:t},regex:i,domain:s,scheme:e})},validate(t,i,e,s){let{options:r}=e,{regex:o,domain:h,scheme:a}=s;if(["http:/","https:/"].includes(t))return i.error("string.uri");let u=o.exec(t);if(!u&&i.prefs.convert&&r.encodeUri){const i=encodeURI(t);u=o.exec(i),u&&(t=i)}if(u){const e=u[1]||u[2];return!h||r.allowRelative&&!e||n.isValid(e,h)?t:i.error("string.domain",{value:e})}return r.relativeOnly?i.error("string.uriRelativeOnly"):r.scheme?i.error("string.uriCustomScheme",{scheme:a,value:t}):i.error("string.uri")}}},manifest:{build(t,i){if(i.replacements)for(const{pattern:e,replacement:s}of i.replacements)t=t.replace(e,s);return t}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(t){if(!t)return f.tlds||t;if(s(void 0===t.minDomainSegments||Number.isSafeInteger(t.minDomainSegments)&&t.minDomainSegments>0,"minDomainSegments must be a positive integer"),s(void 0===t.maxDomainSegments||Number.isSafeInteger(t.maxDomainSegments)&&t.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===t.tlds)return t;if(!0===t.tlds||void 0===t.tlds)return s(f.tlds,"Built-in TLD list disabled"),w.assign({},t,f.tlds);s("object"==typeof t.tlds,"tlds must be true, false, or an object");const i=t.tlds.deny;if(i)return Array.isArray(i)&&(t=w.assign({},t,{tlds:{deny:new Set(i)}})),s(t.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),s(!t.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(t.tlds.deny,"tlds.deny"),t;const e=t.tlds.allow;return e?!0===e?(s(f.tlds,"Built-in TLD list disabled"),w.assign({},t,f.tlds)):(Array.isArray(e)&&(t=w.assign({},t,{tlds:{allow:new Set(e)}})),s(t.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(t.tlds.allow,"tlds.allow"),t):t},f.validateTlds=function(t,i){for(const e of t)s(n.isValid(e,{minDomainSegments:1,maxDomainSegments:1}),"".concat(i," must contain valid top level domain names"))},f.isoDate=function(t){if(!d.isIsoDate(t))return null;/.*T.*[+-]\d\d$/.test(t)&&(t+="00");const i=new Date(t);return S(i.getTime())?null:i.toISOString()},f.length=function(t,i,e,n,r){return s(!r||!1,"Invalid encoding:",r),t.$_addRule({name:i,method:"length",args:{limit:e,encoding:r},operator:n})}},8826:(t,i,e)=>{const s=e(375),n=e(8068),r={};r.Map=class extends Map{slice(){return new r.Map(this)}},t.exports=n.extend({type:"symbol",terms:{map:{init:new r.Map}},coerce:{method(t,i){let{schema:e,error:s}=i;const n=e.$_terms.map.get(t);return n&&(t=n),e.Kd.only&&"symbol"!=typeof t?{value:t,errors:s("symbol.map",{map:e.$_terms.map})}:{value:t}}},validate(t,i){let{error:e}=i;if("symbol"!=typeof t)return{value:t,errors:e("symbol.base")}},rules:{map:{method(t){t&&!t[Symbol.iterator]&&"object"==typeof t&&(t=w.entries(t)),s(t&&t[Symbol.iterator],"Iterable must be an iterable or object");const i=this.clone(),e=[];for(const n of t){s(n&&n[Symbol.iterator],"Entry must be an iterable");const[t,r]=n;s("object"!=typeof t&&"function"!=typeof t&&"symbol"!=typeof t,"Key must not be of type object, function, or Symbol"),s("symbol"==typeof r,"Value must be a Symbol"),i.$_terms.map.set(t,r),e.push(r)}return i.valid(...e)}}},manifest:{build:(t,i)=>(i.map&&(t=t.map(i.map)),t)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(t,i,e)=>{const s=e(375),n=e(8571),r=e(738),o=e(9621),h=e(8160),a=e(6354),u=e(493),c={result:Symbol("result")};i.entry=function(t,i,e){let n=h.defaults;e&&(s(void 0===e.warnings,"Cannot override warnings preference in synchronous validation"),s(void 0===e.artifacts,"Cannot override artifacts preference in synchronous validation"),n=h.preferences(h.defaults,e));const r=c.entry(t,i,n);s(!r.mainstay.externals.length,"Schema with external rules must use validateAsync()");const o={value:r.value};return r.error&&(o.error=r.error),r.mainstay.warnings.length&&(o.warning=a.details(r.mainstay.warnings)),r.mainstay.debug&&(o.debug=r.mainstay.debug),r.mainstay.artifacts&&(o.artifacts=r.mainstay.artifacts),o},i.entryAsync=async function(t,i,e){let s=h.defaults;e&&(s=h.preferences(h.defaults,e));const n=c.entry(t,i,s),r=n.mainstay;if(n.error)throw r.debug&&(n.error.debug=r.debug),n.error;if(r.externals.length){let i=n.value;const u=[];for(const n of r.externals){const l=n.state.path,d="link"===n.schema.type?r.links.get(n.schema):null;let f,_,g=i;const w=l.length?[i]:[],v=l.length?o(t,l):t;if(l.length){f=l[l.length-1];let t=i;for(const i of l.slice(0,-1))t=t[i],w.unshift(t);_=w[0],g=_[f]}try{const t=(t,i)=>(d||n.schema).$_createError(t,g,i,n.state,s),o=await n.method(g,{schema:n.schema,linked:d,state:n.state,prefs:e,original:v,error:t,errorsArray:c.errorsArray,warn:(t,i)=>r.warnings.push((d||n.schema).$_createError(t,g,i,n.state,s)),message:(t,i)=>(d||n.schema).$_createError("external",g,i,n.state,s,{messages:t})});if(void 0===o||o===g)continue;if(o instanceof a.Report){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(o),s.abortEarly)break;continue}if(Array.isArray(o)&&o[h.symbols.errors]){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(...o),s.abortEarly)break;continue}_?(r.tracer.value(n.state,"rule",g,o,"external"),_[f]=o):(r.tracer.value(n.state,"rule",i,o,"external"),i=o)}catch(t){throw s.errors.label&&(t.message+=" (".concat(n.label,")")),t}}if(n.value=i,u.length)throw n.error=a.process(u,t,s),r.debug&&(n.error.debug=r.debug),n.error}if(!s.warnings&&!s.debug&&!s.artifacts)return n.value;const u={value:n.value};return r.warnings.length&&(u.warning=a.details(r.warnings)),r.debug&&(u.debug=r.debug),r.artifacts&&(u.artifacts=r.artifacts),u},c.Mainstay=class{snapshot(){this.Vf.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const t=this.Vf.pop();this.externals=t.externals,this.warnings=t.warnings}commit(){this.Vf.pop()}constructor(t,i,e){this.externals=[],this.warnings=[],this.tracer=t,this.debug=i,this.links=e,this.shadow=null,this.artifacts=null,this.Vf=[]}},c.entry=function(t,e,s){const{tracer:n,cleanup:r}=c.tracer(e,s),o=s.debug?[]:null,h=e.Vd.Ef?new Map:null,l=new c.Mainstay(n,o,h),d=e.Vd.Ef?[{schema:e}]:null,f=new u([],[],{mainstay:l,schemas:d}),_=i.validate(t,e,f,s);r&&e.$_root.untrace();const g=a.process(_.errors,t,s);return{value:_.value,error:g,mainstay:l}},c.tracer=function(t,i){return t.$_root.uf?{tracer:t.$_root.uf.Wf(t)}:i.debug?(s(t.$_root.trace,"Debug mode not supported"),{tracer:t.$_root.trace().Wf(t),cleanup:!0}):{tracer:c.ignore}},i.validate=function(t,i,e,s,n){if(void 0===n&&(n={}),i.$_terms.whens&&(i=i.vf(t,e,s).schema),i.Wd&&(s=c.prefs(i,s)),i.Xd&&s.cache){const s=i.Xd.get(t);if(e.mainstay.tracer.debug(e,"validate","cached",!!s),s)return s}const r=(n,r,o)=>i.$_createError(n,t,r,o||e,s),o={original:t,prefs:s,schema:i,state:e,error:r,errorsArray:c.errorsArray,warn:(t,i,s)=>e.mainstay.warnings.push(r(t,i,s)),message:(n,r)=>i.$_createError("custom",t,r,e,s,{messages:n})};e.mainstay.tracer.entry(i,e);const a=i.sf;if(a.prepare&&void 0!==t&&s.convert){const i=a.prepare(t,o);if(i){if(e.mainstay.tracer.value(e,"prepare",t,i.value),i.errors)return c.finalize(i.value,[].concat(i.errors),o);t=i.value}}if(a.coerce&&void 0!==t&&s.convert&&(!a.coerce.from||a.coerce.from.includes(typeof t))){const i=a.coerce.method(t,o);if(i){if(e.mainstay.tracer.value(e,"coerced",t,i.value),i.errors)return c.finalize(i.value,[].concat(i.errors),o);t=i.value}}const u=i.Kd.empty;u&&u.$_match(c.trim(t,i),e.nest(u),h.defaults)&&(e.mainstay.tracer.value(e,"empty",t,void 0),t=void 0);const l=n.presence||i.Kd.presence||(i.Kd.zf?null:s.presence);if(void 0===t){if("forbidden"===l)return c.finalize(t,null,o);if("required"===l)return c.finalize(t,[i.$_createError("any.required",t,null,e,s)],o);if("optional"===l){if(i.Kd.default!==h.symbols.deepDefault)return c.finalize(t,null,o);e.mainstay.tracer.value(e,"default",t,{}),t={}}}else if("forbidden"===l)return c.finalize(t,[i.$_createError("any.unknown",t,null,e,s)],o);const d=[];if(i.Zd){const n=i.Zd.get(t,e,s,i.Kd.insensitive);if(n)return s.convert&&(e.mainstay.tracer.value(e,"valids",t,n.value),t=n.value),e.mainstay.tracer.filter(i,e,"valid",n),c.finalize(t,null,o);if(i.Kd.only){const n=i.$_createError("any.only",t,{valids:i.Zd.values({display:!0})},e,s);if(s.abortEarly)return c.finalize(t,[n],o);d.push(n)}}if(i.qd){const n=i.qd.get(t,e,s,i.Kd.insensitive);if(n){e.mainstay.tracer.filter(i,e,"invalid",n);const r=i.$_createError("any.invalid",t,{invalids:i.qd.values({display:!0})},e,s);if(s.abortEarly)return c.finalize(t,[r],o);d.push(r)}}if(a.validate){const i=a.validate(t,o);if(i&&(e.mainstay.tracer.value(e,"base",t,i.value),t=i.value,i.errors)){if(!Array.isArray(i.errors))return d.push(i.errors),c.finalize(t,d,o);if(i.errors.length)return d.push(...i.errors),c.finalize(t,d,o)}}return i.Jd.length?c.rules(t,d,o):c.finalize(t,d,o)},c.rules=function(t,i,e){const{schema:s,state:n,prefs:r}=e;for(const o of s.Jd){const a=s.sf.rules[o.method];if(a.convert&&r.convert){n.mainstay.tracer.log(s,n,"rule",o.name,"full");continue}let u,l=o.args;if(o.lf.length){l=w.assign({},l);for(const i of o.lf){const e=a.argsByName.get(i),o=l[i].resolve(t,n,r),c=e.normalize?e.normalize(o):o,d=h.validateArg(c,null,e);if(d){u=s.$_createError("any.ref",o,{arg:i,ref:l[i],reason:d},n,r);break}l[i]=c}}u=u||a.validate(t,e,l,o);const d=c.rule(u,o);if(d.errors){if(n.mainstay.tracer.log(s,n,"rule",o.name,"error"),o.warn){n.mainstay.warnings.push(...d.errors);continue}if(r.abortEarly)return c.finalize(t,d.errors,e);i.push(...d.errors)}else n.mainstay.tracer.log(s,n,"rule",o.name,"pass"),n.mainstay.tracer.value(n,"rule",t,d.value,o.name),t=d.value}return c.finalize(t,i,e)},c.rule=function(t,i){return t instanceof a.Report?(c.error(t,i),{errors:[t],value:null}):Array.isArray(t)&&t[h.symbols.errors]?(t.forEach((t=>c.error(t,i))),{errors:t,value:null}):{errors:null,value:t}},c.error=function(t,i){return i.message&&t.bf(i.message),t},c.finalize=function(t,i,e){i=i||[];const{schema:n,state:r,prefs:o}=e;if(i.length){const s=c.default("failover",void 0,i,e);void 0!==s&&(r.mainstay.tracer.value(r,"failover",t,s),t=s,i=[])}if(i.length&&n.Kd.error)if("function"==typeof n.Kd.error){i=n.Kd.error(i),Array.isArray(i)||(i=[i]);for(const t of i)s(t instanceof g||t instanceof a.Report,"error() must return an Error object")}else i=[n.Kd.error];if(void 0===t){const s=c.default("default",t,i,e);r.mainstay.tracer.value(r,"default",t,s),t=s}if(n.Kd.cast&&void 0!==t){const i=n.sf.cast[n.Kd.cast];if(i.from(t)){const s=i.to(t,e);r.mainstay.tracer.value(r,"cast",t,s,n.Kd.cast),t=s}}if(n.$_terms.externals&&o.externals&&!1!==o._f)for(const{method:t}of n.$_terms.externals)r.mainstay.externals.push({method:t,schema:n,state:r,label:a.label(n.Kd,r,o)});const h={value:t,errors:i.length?i:null};return n.Kd.result&&(h.value="strip"===n.Kd.result?void 0:e.original,r.mainstay.tracer.value(r,n.Kd.result,t,h.value),r.shadow(t,n.Kd.result)),n.Xd&&!1!==o.cache&&!n.Hd.length&&n.Xd.set(e.original,h),void 0===t||h.errors||void 0===n.Kd.artifact||(r.mainstay.artifacts=r.mainstay.artifacts||new Map,r.mainstay.artifacts.has(n.Kd.artifact)||r.mainstay.artifacts.set(n.Kd.artifact,[]),r.mainstay.artifacts.get(n.Kd.artifact).push(r.path)),h},c.prefs=function(t,i){const e=i===h.defaults;return e&&t.Wd[h.symbols.prefs]?t.Wd[h.symbols.prefs]:(i=h.preferences(i,t.Wd),e&&(t.Wd[h.symbols.prefs]=i),i)},c.default=function(t,i,e,s){const{schema:r,state:o,prefs:a}=s,u=r.Kd[t];if(a.noDefaults||void 0===u)return i;if(o.mainstay.tracer.log(r,o,"rule",t,"full"),!u)return u;if("function"==typeof u){const i=u.length?[n(o.ancestors[0]),s]:[];try{return u(...i)}catch(i){return void e.push(r.$_createError("any.".concat(t),null,{error:i},o,a))}}return"object"!=typeof u?u:u[h.symbols.literal]?u.literal:h.isResolvable(u)?u.resolve(i,o,a):n(u)},c.trim=function(t,i){if("string"!=typeof t)return t;const e=i.$_getRule("trim");return e&&e.args.enabled?t.trim():t},c.ignore={active:!1,debug:r,entry:r,filter:r,log:r,resolve:r,value:r},c.errorsArray=function(){const t=[];return t[h.symbols.errors]=!0,t}},2036:(t,i,e)=>{const s=e(375),n=e(9474),r=e(8160),o={};t.exports=o.Values=class{get length(){return this.tf.size+this.Hd.size}add(t,i){r.isResolvable(t)?this.Hd.has(t)||(this.Hd.add(t),i&&i.register(t)):this.has(t,null,null,!1)||(this.tf.add(t),"string"==typeof t&&this.Hf.set(t.toLowerCase(),t))}static merge(t,i,e){if(t=t||new o.Values,i){if(i.Xf)return i.clone();for(const e of[...i.tf,...i.Hd])t.add(e)}if(e)for(const i of[...e.tf,...e.Hd])t.remove(i);return t.length?t:null}remove(t){r.isResolvable(t)?this.Hd.delete(t):(this.tf.delete(t),"string"==typeof t&&this.Hf.delete(t.toLowerCase()))}has(t,i,e,s){return!!this.get(t,i,e,s)}get(t,i,e,s){if(!this.length)return!1;if(this.tf.has(t))return{value:t};if("string"==typeof t&&t&&s){const i=this.Hf.get(t.toLowerCase());if(i)return{value:i}}if(!this.Hd.size&&"object"!=typeof t)return!1;if("object"==typeof t)for(const i of this.tf)if(n(i,t))return{value:i};if(i)for(const r of this.Hd){const o=r.resolve(t,i,e,null,{in:!0});if(void 0===o)continue;const h=r.in&&"object"==typeof o?Array.isArray(o)?o:w.keys(o):[o];for(const i of h)if(typeof i==typeof t)if(s&&t&&"string"==typeof t){if(i.toLowerCase()===t.toLowerCase())return{value:i,ref:r}}else if(n(i,t))return{value:i,ref:r}}return!1}override(){this.Xf=!0}values(t){if(t&&t.display){const t=[];for(const i of[...this.tf,...this.Hd])void 0!==i&&t.push(i);return t}return Array.from([...this.tf,...this.Hd])}clone(){const t=new o.Values(this.tf,this.Hd);return t.Xf=this.Xf,t}concat(t){s(!t.Xf,"Cannot concat override set of values");const i=new o.Values([...this.tf,...t.tf],[...this.Hd,...t.Hd]);return i.Xf=this.Xf,i}describe(){const t=[];this.Xf&&t.push({override:!0});for(const i of this.tf.values())t.push(i&&"object"==typeof i?{value:i}:i);for(const i of this.Hd.values())t.push(i.describe());return t}constructor(t,i){this.tf=new Set(t),this.Hd=new Set(i),this.Hf=o.lowercases(t),this.Xf=!1}},o.Values.prototype[r.symbols.values]=!0,o.Values.prototype.slice=o.Values.prototype.clone,o.lowercases=function(t){const i=new Map;if(t)for(const e of t)"string"==typeof e&&i.set(e.toLowerCase(),e);return i}},978:(t,i,e)=>{const s=e(375),n=e(8571),r=e(1687),o=e(9621),h={};t.exports=function(t,i,e){if(void 0===e&&(e={}),s(t&&"object"==typeof t,"Invalid defaults value: must be an object"),s(!i||!0===i||"object"==typeof i,"Invalid source value: must be true, falsy or an object"),s("object"==typeof e,"Invalid options: must be an object"),!i)return null;if(e.shallow)return h.applyToDefaultsWithShallow(t,i,e);const o=n(t);if(!0===i)return o;const a=void 0!==e.nullOverride&&e.nullOverride;return r(o,i,{nullOverride:a,mergeArrays:!1})},h.applyToDefaultsWithShallow=function(t,i,e){const a=e.shallow;s(Array.isArray(a),"Invalid keys");const u=new Map,c=!0===i?null:new Set;for(let e of a){e=Array.isArray(e)?e:e.split(".");const s=o(t,e);s&&"object"==typeof s?u.set(s,c&&o(i,e)||s):c&&c.add(e)}const l=n(t,{},u);if(!c)return l;for(const t of c)h.reachCopy(l,i,t);const d=void 0!==e.nullOverride&&e.nullOverride;return r(l,i,{nullOverride:d,mergeArrays:!1})},h.reachCopy=function(t,i,e){for(const t of e){if(!(t in i))return;const e=i[t];if("object"!=typeof e||null===e)return;i=e}const s=i;let n=t;for(let t=0;t<e.length-1;++t){const i=e[t];"object"!=typeof n[i]&&(n[i]={}),n=n[i]}n[e[e.length-1]]=s}},375:(t,i,e)=>{const s=e(7916);t.exports=function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];if(!t)throw 1===e.length&&e[0]instanceof g?e[0]:new s(e)}},8571:(t,i,e)=>{const s=e(9621),n=e(4277),r=e(7043),o={needsProtoHack:new Set([n.set,n.map,n.weakSet,n.weakMap])};t.exports=o.clone=function(t,i,e){if(void 0===i&&(i={}),void 0===e&&(e=null),"object"!=typeof t||null===t)return t;let s=o.clone,h=e;if(i.shallow){if(!0!==i.shallow)return o.cloneWithShallow(t,i);s=t=>t}else if(h){const i=h.get(t);if(i)return i}else h=new Map;const a=n.getInternalProto(t);if(a===n.buffer)return!1;if(a===n.date)return new Date(t.getTime());if(a===n.regex)return new RegExp(t);const u=o.base(t,a,i);if(u===t)return t;if(h&&h.set(t,u),a===n.set)for(const e of t)u.add(s(e,i,h));else if(a===n.map)for(const[e,n]of t)u.set(e,s(n,i,h));const c=r.keys(t,i);for(const e of c){if("__proto__"===e)continue;if(a===n.array&&"length"===e){u.length=t.length;continue}const r=w.getOwnPropertyDescriptor(t,e);r?r.get||r.set?w.defineProperty(u,e,r):r.enumerable?u[e]=s(t[e],i,h):w.defineProperty(u,e,{enumerable:!1,writable:!0,configurable:!0,value:s(t[e],i,h)}):w.defineProperty(u,e,{enumerable:!0,writable:!0,configurable:!0,value:s(t[e],i,h)})}return u},o.cloneWithShallow=function(t,i){const e=i.shallow;(i=w.assign({},i)).shallow=!1;const n=new Map;for(const i of e){const e=s(t,i);"object"!=typeof e&&"function"!=typeof e||n.set(e,e)}return o.clone(t,i,n)},o.base=function(t,i,e){if(!1===e.prototype)return o.needsProtoHack.has(i)?new i.constructor:i===n.array?[]:{};const s=w.getPrototypeOf(t);if(s&&s.isImmutable)return t;if(i===n.array){const t=[];return s!==i&&w.setPrototypeOf(t,s),t}if(o.needsProtoHack.has(i)){const t=new s.constructor;return s!==i&&w.setPrototypeOf(t,s),t}return w.create(s)}},9474:(t,i,e)=>{const s=e(4277),n={mismatched:null};t.exports=function(t,i,e){return e=w.assign({prototype:!0},e),!!n.isDeepEqual(t,i,e,[])},n.isDeepEqual=function(t,i,e,r){if(t===i)return 0!==t||1/t==1/i;const o=typeof t;if(o!==typeof i||null===t||null===i)return!1;if("function"===o){if(!e.deepFunction||t.toString()!==i.toString())return!1}else if("object"!==o)return t!=t&&i!=i;const h=n.getSharedType(t,i,!!e.prototype);switch(h){case s.buffer:return!1;case s.promise:return t===i;case s.regex:return t.toString()===i.toString();case n.mismatched:return!1}for(let e=r.length-1;e>=0;--e)if(r[e].isSame(t,i))return!0;r.push(new n.SeenEntry(t,i));try{return!!n.isDeepEqualObj(h,t,i,e,r)}finally{r.pop()}},n.getSharedType=function(t,i,e){if(e)return w.getPrototypeOf(t)!==w.getPrototypeOf(i)?n.mismatched:s.getInternalProto(t);const r=s.getInternalProto(t);return r!==s.getInternalProto(i)?n.mismatched:r},n.valueOf=function(t){const i=t.valueOf;if(void 0===i)return t;try{return i.call(t)}catch(t){return t}},n.hasOwnEnumerableProperty=function(t,i){return w.prototype.propertyIsEnumerable.call(t,i)},n.isSetSimpleEqual=function(t,i){for(const e of Set.prototype.values.call(t))if(!Set.prototype.has.call(i,e))return!1;return!0},n.isDeepEqualObj=function(t,i,e,r,o){const{isDeepEqual:h,valueOf:a,hasOwnEnumerableProperty:u}=n,{keys:c,getOwnPropertySymbols:l}=w;if(t===s.array){if(!r.part){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!h(i[t],e[t],r,o))return!1;return!0}for(const t of i)for(const i of e)if(h(t,i,r,o))return!0}else if(t===s.set){if(i.size!==e.size)return!1;if(!n.isSetSimpleEqual(i,e)){const t=new Set(Set.prototype.values.call(e));for(const e of Set.prototype.values.call(i)){if(t.delete(e))continue;let i=!1;for(const s of t)if(h(e,s,r,o)){t.delete(s),i=!0;break}if(!i)return!1}}}else if(t===s.map){if(i.size!==e.size)return!1;for(const[t,s]of Map.prototype.entries.call(i))if(void 0===s&&!Map.prototype.has.call(e,t)||!h(s,Map.prototype.get.call(e,t),r,o))return!1}else if(t===s.error&&(i.name!==e.name||i.message!==e.message))return!1;const d=a(i),f=a(e);if((i!==d||e!==f)&&!h(d,f,r,o))return!1;const _=c(i);if(!r.part&&_.length!==c(e).length&&!r.skip)return!1;let g=0;for(const t of _)if(r.skip&&r.skip.includes(t))void 0===e[t]&&++g;else if(!u(e,t)||!h(i[t],e[t],r,o))return!1;if(!r.part&&_.length-g!==c(e).length)return!1;if(!1!==r.symbols){const t=l(i),s=new Set(l(e));for(const n of t){if(!r.skip||!r.skip.includes(n))if(u(i,n)){if(!u(e,n)||!h(i[n],e[n],r,o))return!1}else if(u(e,n))return!1;s.delete(n)}for(const t of s)if(u(e,t))return!1}return!0},n.SeenEntry=class{isSame(t,i){return this.obj===t&&this.ref===i}constructor(t,i){this.obj=t,this.ref=i}}},7916:(t,i,e)=>{const s=e(8761);t.exports=class extends g{constructor(t){super(t.filter((t=>""!==t)).map((t=>"string"==typeof t?t:t instanceof g?t.message:s(t))).join(" ")||"Unknown error"),"function"==typeof g.captureStackTrace&&g.captureStackTrace(this,i.assert)}}},5277:t=>{const i={};t.exports=function(t){if(!t)return"";let e="";for(let s=0;s<t.length;++s){const n=t.charCodeAt(s);i.isSafe(n)?e+=t[s]:e+=i.escapeHtmlChar(n)}return e},i.escapeHtmlChar=function(t){return i.namedHtml.get(t)||(t>=256?"&#"+t+";":"&#x".concat(t.toString(16).padStart(2,"0"),";"))},i.isSafe=function(t){return i.safeCharCodes.has(t)},i.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),i.safeCharCodes=function(){const t=new Set;for(let i=32;i<123;++i)(i>=97||i>=65&&i<=90||i>=48&&i<=57||32===i||46===i||44===i||45===i||58===i||95===i)&&t.add(i);return t}()},6064:t=>{t.exports=function(t){return t.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:t=>{t.exports=function(){}},1687:(t,i,e)=>{const s=e(375),n=e(8571),r=e(7043),o={};t.exports=o.merge=function(t,i,e){if(s(t&&"object"==typeof t,"Invalid target value: must be an object"),s(null==i||"object"==typeof i,"Invalid source value: must be null, undefined, or an object"),!i)return t;if(e=w.assign({nullOverride:!0,mergeArrays:!0},e),Array.isArray(i)){s(Array.isArray(t),"Cannot merge array onto an object"),e.mergeArrays||(t.length=0);for(let s=0;s<i.length;++s)t.push(n(i[s],{symbols:e.symbols}));return t}const h=r.keys(i,e);for(let s=0;s<h.length;++s){const r=h[s];if("__proto__"===r||!w.prototype.propertyIsEnumerable.call(i,r))continue;const a=i[r];if(a&&"object"==typeof a){if(t[r]===a)continue;!t[r]||"object"!=typeof t[r]||Array.isArray(t[r])!==Array.isArray(a)||a instanceof Date||a instanceof RegExp?t[r]=n(a,{symbols:e.symbols}):o.merge(t[r],a,e)}else(null!=a||e.nullOverride)&&(t[r]=a)}return t}},9621:(t,i,e)=>{const s=e(375),n={};t.exports=function(t,i,e){if(!1===i||null==i)return t;"string"==typeof(e=e||{})&&(e={separator:e});const r=Array.isArray(i);s(!r||!e.separator,"Separator option is not valid for array-based chain");const o=r?i:i.split(e.separator||".");let h=t;for(let t=0;t<o.length;++t){let r=o[t];const a=e.iterables&&n.iterables(h);if(Array.isArray(h)||"set"===a){const t=Number(r);Number.isInteger(t)&&(r=t<0?h.length+t:t)}if(!h||"function"==typeof h&&!1===e.functions||!a&&void 0===h[r]){s(!e.strict||t+1===o.length,"Missing segment",r,"in reach path ",i),s("object"==typeof h||!0===e.functions||"function"!=typeof h,"Invalid segment",r,"in reach path ",i),h=e.default;break}h=a?"set"===a?[...h][r]:h.get(r):h[r]}return h},n.iterables=function(t){return t instanceof Set?"set":t instanceof Map?"map":void 0}},8761:t=>{t.exports=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];try{return JSON.stringify(...i)}catch(t){return"[Cannot display object: "+t.message+"]"}}},4277:(t,i)=>{const e={};i=t.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:g.prototype,generic:w.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},e.typeMap=new Map([["[object Error]",i.error],["[object Map]",i.map],["[object Promise]",i.promise],["[object Set]",i.set],["[object WeakMap]",i.weakMap],["[object WeakSet]",i.weakSet]]),i.getInternalProto=function(t){if(Array.isArray(t))return i.array;if(t instanceof Date)return i.date;if(t instanceof RegExp)return i.regex;if(t instanceof g)return i.error;const s=w.prototype.toString.call(t);return e.typeMap.get(s)||i.generic}},7043:(t,i)=>{i.keys=function(t,i){return void 0===i&&(i={}),!1!==i.symbols?Reflect.ownKeys(t):w.getOwnPropertyNames(t)}},3652:(t,i,e)=>{const s=e(375),n={};i.Sorter=class{add(t,i){const e=[].concat((i=i||{}).before||[]),n=[].concat(i.after||[]),r=i.group||"?",o=i.sort||0;s(!e.includes(r),"Item cannot come before itself: ".concat(r)),s(!e.includes("?"),"Item cannot come before unassociated items"),s(!n.includes(r),"Item cannot come after itself: ".concat(r)),s(!n.includes("?"),"Item cannot come after unassociated items"),Array.isArray(t)||(t=[t]);for(const i of t){const t={seq:this.Xu.length,sort:o,before:e,after:n,group:r,node:i};this.Xu.push(t)}if(!i.manual){const t=this.Zf();s(t,"item","?"!==r?"added into group ".concat(r):"","created a dependencies error")}return this.nodes}merge(t){Array.isArray(t)||(t=[t]);for(const i of t)if(i)for(const t of i.Xu)this.Xu.push(w.assign({},t));this.Xu.sort(n.mergeSort);for(let t=0;t<this.Xu.length;++t)this.Xu[t].seq=t;const i=this.Zf();return s(i,"merge created a dependencies error"),this.nodes}sort(){const t=this.Zf();return s(t,"sort created a dependencies error"),this.nodes}Zf(){const t={},i=w.create(null),e=w.create(null);for(const s of this.Xu){const n=s.seq,r=s.group;e[r]=e[r]||[],e[r].push(n),t[n]=s.before;for(const t of s.after)i[t]=i[t]||[],i[t].push(n)}for(const i in t){const s=[];for(const n in t[i]){const r=t[i][n];e[r]=e[r]||[],s.push(...e[r])}t[i]=s}for(const s in i)if(e[s])for(const n of e[s])t[n].push(...i[s]);const s={};for(const i in t){const e=t[i];for(const t of e)s[t]=s[t]||[],s[t].push(i)}const n={},r=[];for(let t=0;t<this.Xu.length;++t){let i=t;if(s[t]){i=null;for(let t=0;t<this.Xu.length;++t){if(!0===n[t])continue;s[t]||(s[t]=[]);const e=s[t].length;let r=0;for(let i=0;i<e;++i)n[s[t][i]]&&++r;if(r===e){i=t;break}}}null!==i&&(n[i]=!0,r.push(i))}if(r.length!==this.Xu.length)return!1;const o={};for(const t of this.Xu)o[t.seq]=t;this.Xu=[],this.nodes=[];for(const t of r){const i=o[t];this.nodes.push(i.node),this.Xu.push(i)}return!0}constructor(){this.Xu=[],this.nodes=[]}},n.mergeSort=(t,i)=>t.sort===i.sort?0:t.sort<i.sort?-1:1},5380:(t,i,e)=>{const s=e(443),n=e(2178),r={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:s.URL||URL};i.analyze=function(t,i){if(void 0===i&&(i={}),!t)return n.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof t)throw new g("Invalid input: domain must be a string");if(t.length>256)return n.code("DOMAIN_TOO_LONG");if(r.nonAsciiRx.test(t)){if(!1===i.allowUnicode)return n.code("DOMAIN_INVALID_UNICODE_CHARS");t=t.normalize("NFC")}if(r.domainControlRx.test(t))return n.code("DOMAIN_INVALID_CHARS");t=r.punycode(t),i.allowFullyQualified&&"."===t[t.length-1]&&(t=t.slice(0,-1));const e=i.minDomainSegments||r.minDomainSegments,s=t.split(".");if(s.length<e)return n.code("DOMAIN_SEGMENTS_COUNT");if(i.maxDomainSegments&&s.length>i.maxDomainSegments)return n.code("DOMAIN_SEGMENTS_COUNT_MAX");const o=i.tlds;if(o){const t=s[s.length-1].toLowerCase();if(o.deny&&o.deny.has(t)||o.allow&&!o.allow.has(t))return n.code("DOMAIN_FORBIDDEN_TLDS")}for(let t=0;t<s.length;++t){const i=s[t];if(!i.length)return n.code("DOMAIN_EMPTY_SEGMENT");if(i.length>63)return n.code("DOMAIN_LONG_SEGMENT");if(t<s.length-1){if(!r.domainSegmentRx.test(i))return n.code("DOMAIN_INVALID_CHARS")}else if(!r.tldSegmentRx.test(i))return n.code("DOMAIN_INVALID_TLDS_CHARS")}return null},i.isValid=function(t,e){return!i.analyze(t,e)},r.punycode=function(t){t.includes("%")&&(t=t.replace(/%/g,"%25"));try{return new r.URL("http://".concat(t)).host}catch(i){return t}}},1745:(t,i,e)=>{const s=e(9848),n=e(5380),r=e(2178),o={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(s.TextEncoder||TextEncoder)};i.analyze=function(t,i){return o.email(t,i)},i.isValid=function(t,i){return!o.email(t,i)},o.email=function(t,i){if(void 0===i&&(i={}),"string"!=typeof t)throw new g("Invalid input: email must be a string");if(!t)return r.code("EMPTY_STRING");const e=!o.nonAsciiRx.test(t);if(!e){if(!1===i.allowUnicode)return r.code("FORBIDDEN_UNICODE");t=t.normalize("NFC")}const s=t.split("@");if(2!==s.length)return s.length>2?r.code("MULTIPLE_AT_CHAR"):r.code("MISSING_AT_CHAR");const[h,a]=s;if(!h)return r.code("EMPTY_LOCAL");if(!i.ignoreLength){if(t.length>254)return r.code("ADDRESS_TOO_LONG");if(o.encoder.encode(h).length>64)return r.code("LOCAL_TOO_LONG")}return o.local(h,e)||n.analyze(a,i)},o.local=function(t,i){const e=t.split(".");for(const t of e){if(!t.length)return r.code("EMPTY_LOCAL_SEGMENT");if(i){if(!o.atextRx.test(t))return r.code("INVALID_LOCAL_CHARS")}else for(const i of t){if(o.atextRx.test(i))continue;const t=o.binary(i);if(!o.atomRx.test(t))return r.code("INVALID_LOCAL_CHARS")}}},o.binary=function(t){return Array.from(o.encoder.encode(t)).map((t=>String.fromCharCode(t))).join("")},o.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,o.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(t,i)=>{i.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},i.code=function(t){return{code:t,error:i.codes[t]}}},9959:(t,i,e)=>{const s=e(375),n=e(5752);i.regex=function(t){void 0===t&&(t={}),s(void 0===t.cidr||"string"==typeof t.cidr,"options.cidr must be a string");const i=t.cidr?t.cidr.toLowerCase():"optional";s(["required","optional","forbidden"].includes(i),"options.cidr must be one of required, optional, forbidden"),s(void 0===t.version||"string"==typeof t.version||Array.isArray(t.version),"options.version must be a string or an array of string");let e=t.version||["ipv4","ipv6","ipvfuture"];Array.isArray(e)||(e=[e]),s(e.length>=1,"options.version must have at least 1 version specified");for(let t=0;t<e.length;++t)s("string"==typeof e[t],"options.version must only contain strings"),e[t]=e[t].toLowerCase(),s(["ipv4","ipv6","ipvfuture"].includes(e[t]),"options.version contains unknown version "+e[t]+" - must be one of ipv4, ipv6, ipvfuture");e=Array.from(new Set(e));const r="(?:".concat(e.map((t=>{if("forbidden"===i)return n.ip[t];const e="\\/".concat("ipv4"===t?n.ip.v4Cidr:n.ip.v6Cidr);return"required"===i?"".concat(n.ip[t]).concat(e):"".concat(n.ip[t],"(?:").concat(e,")?")})).join("|"),")"),o=new RegExp("^".concat(r,"$"));return{cidr:i,versions:e,regex:o,raw:r}}},5752:(t,i,e)=>{const s=e(375),n=e(6064),r={generate:function(){const t={},i="\\dA-Fa-f",e="["+i+"]",s="\\w-\\.~",n="!\\$&'\\(\\)\\*\\+,;=",r="%"+i,o=s+r+n+":@",h="["+o+"]",a="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";t.ipv4address="(?:"+a+"\\.){3}"+a;const u=e+"{1,4}",c="(?:"+u+":"+u+"|"+t.ipv4address+")",l="(?:"+u+":){6}"+c,d="::(?:"+u+":){5}"+c,f="(?:"+u+")?::(?:"+u+":){4}"+c,_="(?:(?:"+u+":){0,1}"+u+")?::(?:"+u+":){3}"+c,g="(?:(?:"+u+":){0,2}"+u+")?::(?:"+u+":){2}"+c,w="(?:(?:"+u+":){0,3}"+u+")?::"+u+":"+c,v="(?:(?:"+u+":){0,4}"+u+")?::"+c,m="(?:(?:"+u+":){0,5}"+u+")?::"+u,p="(?:(?:"+u+":){0,6}"+u+")?::";t.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",t.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",t.ipv6address="(?:"+l+"|"+d+"|"+f+"|"+_+"|"+g+"|"+w+"|"+v+"|"+m+"|"+p+")",t.ipvFuture="v"+e+"+\\.["+s+n+":]+",t.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",t.schemeRegex=new RegExp(t.scheme);const A="["+s+r+n+":]*",y="["+s+r+n+"]{1,255}",M="(?:\\[(?:"+t.ipv6address+"|"+t.ipvFuture+")\\]|"+t.ipv4address+"|"+y+")",b="(?:"+A+"@)?"+M+"(?::\\d*)?",T="(?:"+A+"@)?("+M+")(?::\\d*)?",S=h+"*",N=h+"+",I="(?:\\/"+S+")*",D="\\/(?:"+N+I+")?",E=N+I,k="["+s+r+n+"@]+"+I,L="(?:\\/\\/\\/"+S+I+")";return t.hierPart="(?:(?:\\/\\/"+b+I+")|"+D+"|"+E+"|"+L+")",t.hierPartCapture="(?:(?:\\/\\/"+T+I+")|"+D+"|"+E+")",t.relativeRef="(?:(?:\\/\\/"+b+I+")|"+D+"|"+k+"|)",t.relativeRefCapture="(?:(?:\\/\\/"+T+I+")|"+D+"|"+k+"|)",t.query="["+o+"\\/\\?]*(?=#|$)",t.queryWithSquareBrackets="["+o+"\\[\\]\\/\\?]*(?=#|$)",t.fragment="["+o+"\\/\\?]*",t}};r.rfc3986=r.generate(),i.ip={v4Cidr:r.rfc3986.ipv4Cidr,v6Cidr:r.rfc3986.ipv6Cidr,ipv4:r.rfc3986.ipv4address,ipv6:r.rfc3986.ipv6address,ipvfuture:r.rfc3986.ipvFuture},r.createRegex=function(t){const i=r.rfc3986,e="(?:\\?"+(t.allowQuerySquareBrackets?i.queryWithSquareBrackets:i.query)+")?(?:#"+i.fragment+")?",o=t.domain?i.relativeRefCapture:i.relativeRef;if(t.relativeOnly)return r.wrap(o+e);let h="";if(t.scheme){s(t.scheme instanceof RegExp||"string"==typeof t.scheme||Array.isArray(t.scheme),"scheme must be a RegExp, String, or Array");const e=[].concat(t.scheme);s(e.length>=1,"scheme must have at least 1 scheme specified");const r=[];for(let t=0;t<e.length;++t){const o=e[t];s(o instanceof RegExp||"string"==typeof o,"scheme at position "+t+" must be a RegExp or String"),o instanceof RegExp?r.push(o.source.toString()):(s(i.schemeRegex.test(o),"scheme at position "+t+" must be a valid scheme"),r.push(n(o)))}h=r.join("|")}const a="(?:"+(h?"(?:"+h+")":i.scheme)+":"+(t.domain?i.hierPartCapture:i.hierPart)+")",u=t.allowRelative?"(?:"+a+"|"+o+")":a;return r.wrap(u+e,h)},r.wrap=function(t,i){return{raw:t="(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])".concat(t),regex:new RegExp("^".concat(t,"$")),scheme:i}},r.uriRegex=r.createRegex({}),i.regex=function(t){return void 0===t&&(t={}),t.scheme||t.allowRelative||t.relativeOnly||t.allowQuerySquareBrackets||t.domain?r.createRegex(t):r.uriRegex}},1447:(t,i)=>{const e={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};i.Parser=class{Cf(t){let s=[],n="",r=0,o=!1;const h=t=>{if(r)throw new g("Formula missing closing parenthesis");const h=s.length?s[s.length-1]:null;if(o||n||t){if(h&&"reference"===h.type&&")"===t)return h.type="function",h.value=this.qf(n,h.value),void(n="");if(")"===t){const t=new i.Parser(n,this.settings);s.push({type:"segment",value:t})}else if(o){if("]"===o)return s.push({type:"reference",value:n}),void(n="");s.push({type:"literal",value:n})}else if(e.operatorCharacters.includes(n))h&&"operator"===h.type&&e.operators.includes(h.value+n)?h.value+=n:s.push({type:"operator",value:n});else if(n.match(e.numberRx))s.push({type:"constant",value:C(n)});else if(void 0!==this.settings.constants[n])s.push({type:"constant",value:this.settings.constants[n]});else{if(!n.match(e.tokenRx))throw new g("Formula contains invalid token: ".concat(n));s.push({type:"reference",value:n})}n=""}};for(const i of t)o?i===o?(h(),o=!1):n+=i:r?"("===i?(n+=i,++r):")"===i?(--r,r?n+=i:h(i)):n+=i:i in e.literals?o=e.literals[i]:"("===i?(h(),++r):e.operatorCharacters.includes(i)?(h(),n=i,h()):" "!==i?n+=i:h();h(),s=s.map(((t,i)=>"operator"!==t.type||"-"!==t.value||i&&"operator"!==s[i-1].type?t:{type:"operator",value:"n"}));let a=!1;for(const t of s){if("operator"===t.type){if(e.operatorsPrefix.includes(t.value))continue;if(!a)throw new g("Formula contains an operator in invalid position");if(!e.operators.includes(t.value))throw new g("Formula contains an unknown operator ".concat(t.value))}else if(a)throw new g("Formula missing expected operator");a=!a}if(!a)throw new g("Formula contains invalid trailing operator");1===s.length&&["reference","literal","constant"].includes(s[0].type)&&(this.single={type:"reference"===s[0].type?"reference":"value",value:s[0].value}),this.Kf=s.map((t=>{if("operator"===t.type)return e.operatorsPrefix.includes(t.value)?t:t.value;if("reference"!==t.type)return t.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(t.value))throw new g("Formula contains invalid reference ".concat(t.value));return this.settings.reference?this.settings.reference(t.value):e.reference(t.value)}))}qf(t,s){const n=this.settings.functions[s];if("function"!=typeof n)throw new g("Formula contains unknown function ".concat(s));let r=[];if(t){let i="",n=0,o=!1;const h=()=>{if(!i)throw new g("Formula contains function ".concat(s," with invalid arguments ").concat(t));r.push(i),i=""};for(let s=0;s<t.length;++s){const r=t[s];o?(i+=r,r===o&&(o=!1)):r in e.literals&&!n?(i+=r,o=e.literals[r]):","!==r||n?(i+=r,"("===r?++n:")"===r&&--n):h()}h()}return r=r.map((t=>new i.Parser(t,this.settings))),function(t){const i=[];for(const e of r)i.push(e.evaluate(t));return n.call(t,...i)}}evaluate(t){const i=this.Kf.slice();for(let s=i.length-2;s>=0;--s){const n=i[s];if(n&&"operator"===n.type){const r=i[s+1];i.splice(s+1,1);const o=e.evaluate(r,t);i[s]=e.single(n.value,o)}}return e.operatorsOrder.forEach((s=>{for(let n=1;n<i.length-1;)if(s.includes(i[n])){const s=i[n],r=e.evaluate(i[n-1],t),o=e.evaluate(i[n+1],t);i.splice(n,2);const h=e.calculate(s,r,o);i[n-1]=0===h?0:h}else n+=2})),e.evaluate(i[0],t)}constructor(t,i={}){if(!i[e.settings]&&i.constants)for(const t in i.constants){const e=i.constants[t];if(null!==e&&!["boolean","number","string"].includes(typeof e))throw new g("Formula constant ".concat(t," contains invalid ").concat(typeof e," value type"))}this.settings=i[e.settings]?i:w.assign({[e.settings]:!0,constants:{},functions:{}},i),this.single=null,this.Kf=null,this.Cf(t)}},i.Parser.prototype[e.symbol]=!0,e.reference=function(t){return function(i){return i&&void 0!==i[t]?i[t]:null}},e.evaluate=function(t,i){return null===t?null:"function"==typeof t?t(i):t[e.symbol]?t.evaluate(i):t},e.single=function(t,i){if("!"===t)return!i;const e=-i;return 0===e?0:e},e.calculate=function(t,i,s){if("??"===t)return e.exists(i)?i:s;if("string"==typeof i||"string"==typeof s){if("+"===t)return(i=e.exists(i)?i:"")+(e.exists(s)?s:"")}else switch(t){case"^":return _.pow(i,s);case"*":return i*s;case"/":return i/s;case"%":return i%s;case"+":return i+s;case"-":return i-s}switch(t){case"<":return i<s;case"<=":return i<=s;case">":return i>s;case">=":return i>=s;case"==":return i===s;case"!=":return i!==s;case"&&":return i&&s;case"||":return i||s}return null},e.exists=function(t){return null!=t}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:t=>{t.exports=JSON.parse('{"version":"17.13.0"}')}},i={},function e(s){var n=i[s];if(void 0!==n)return n.exports;var r=i[s]={exports:{}};return t[s](r,r.exports,e),r.exports}(5107);var t,i},t.exports=e()}(zs);const Bs=A(zs.exports);let Us;class Qs extends bt{getRTCPeerConnection(){return this.webRTCPeer?this.webRTCPeer.getRTCPeer():null}stop(){var t;Us.info("Stopping"),this.webRTCPeer.closeRTCPeer(),null==(t=this.signaling)||t.close(),this.signaling=null,this.stopReconnection=!0,this.webRTCPeer=new is}isActive(){const t=this.webRTCPeer.getRTCPeerStatus();return Us.info("Broadcast status: ",t||"not_established"),"connected"===t}setReconnect(){this.signaling.on("migrate",(()=>this.replaceConnection())),this.autoReconnect&&(this.signaling.on(ws,(()=>{(this.firstReconnection||!this.alreadyDisconnected)&&(this.firstReconnection=!1,this.reconnect({error:new g("Signaling error: wsConnectionError")}))})),this.webRTCPeer.on($e.connectionStateChange,(t=>{W(t),"connected"===t&&V(new Date),("failed"===t||"disconnected"===t&&this.alreadyDisconnected)&&this.firstReconnection?(this.firstReconnection=!1,this.reconnect({error:new g("Connection state change: RTCPeerConnectionState disconnected")})):"disconnected"===t?(this.alreadyDisconnected=!0,u((()=>this.reconnect({error:new g("Connection state change: RTCPeerConnectionState disconnected")})),1500)):this.alreadyDisconnected=!1})))}async reconnect(t){try{Us.info("Attempting to reconnect..."),!this.isActive()&&!this.stopReconnection&&!this.isReconnecting&&(this.stop(),this.emit("reconnect",{timeout:Fs(this.reconnectionInterval),error:null!=t&&t.error?null==t?void 0:t.error:new g("Attempting to reconnect")}),this.isReconnecting=!0,await this.connect(this.options),this.alreadyDisconnected=!1,this.reconnectionInterval=1e3,this.firstReconnection=!0,this.isReconnecting=!1)}catch(t){this.isReconnecting=!1,this.reconnectionInterval=Fs(this.reconnectionInterval),Us.error("Reconnection failed, retrying in ".concat(this.reconnectionInterval,"ms. "),t),u((()=>this.reconnect({error:t})),this.reconnectionInterval)}}constructor(t,i,e,s){if(super(),Us=e,!i)throw Us.error("Token generator is required to construct this module."),new g("Token generator is required to construct this module.");this.webRTCPeer=new is,this.signaling=null,this.autoReconnect=s,this.reconnectionInterval=1e3,this.alreadyDisconnected=!1,this.firstReconnection=!0,this.stopReconnection=!1,this.isReconnecting=!1,this.tokenGenerator=i,this.options=null}}const Fs=t=>t<32e3?2*t:t,Ys=s.RTCRtpSender&&!!RTCRtpSender.prototype.createEncodedStreams&&s.RTCRtpReceiver&&!!RTCRtpReceiver.prototype.createEncodedStreams,Gs="RTCRtpScriptTransform"in s,Vs="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NsYXNzIHd7Y29uc3RydWN0b3IodCl7dGhpcy5kYXRhPXQsdGhpcy5iaXRPZmZzZXQ9MH1yZWFkQml0cyh0KXtpZih0aGlzLmJpdE9mZnNldCt0PnRoaXMuZGF0YS5sZW5ndGgqOCl0aHJvdyBuZXcgRXJyb3IoIkF0dGVtcHRlZCB0byByZWFkIHBhc3QgdGhlIGVuZCBvZiB0aGUgYml0c3RyZWFtIik7bGV0IGU9MDtmb3IobGV0IGk9MDtpPHQ7aSsrKXtjb25zdCBzPU1hdGguZmxvb3IodGhpcy5iaXRPZmZzZXQvOCksYT03LXRoaXMuYml0T2Zmc2V0JTgscj10aGlzLmRhdGFbc10+PmEmMTtlfD1yPDx0LTEtaSx0aGlzLmJpdE9mZnNldCsrfXJldHVybiBlfXNraXAodCl7dGhpcy5iaXRPZmZzZXQrPXR9cmVhZEV4cEdvbG9tYlVuc2lnbmVkKCl7bGV0IHQ9LTE7Zm9yKGxldCBlPTA7ZT09PTA7dCsrKWU9dGhpcy5yZWFkQml0cygxKTtyZXR1cm4oMTw8dCktMSt0aGlzLnJlYWRCaXRzKHQpfXJlYWRFeHBHb2xvbWJTaWduZWQoKXtjb25zdCB0PXRoaXMucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7cmV0dXJuIHQlMj09PTA/LSh0LzIpOih0KzEpLzJ9fWNvbnN0IF89e1NMSUNFX05PTl9JRFI6MSxTTElDRV9QQVJUSVRJT05fQToyLFNMSUNFX0lEUjo1LFNFSV9IMjY0OjYsU0VJX0gyNjVfUFJFRklYOjM5LFNFSV9IMjY1X1NVRkZJWDo0MCxTUFNfSDI2NDo3LFNQU19IMjY1OjMzLFBQU19IMjY0OjgsUFBTX0gyNjU6MzR9LEg9e1BJQ19USU1JTkc6MSxVU0VSX0RBVEFfVU5SRUdJU1RFUkVEOjV9LGg9e0xFR0FDWToxLE5FVzoyLFRJTUVDT0RFOjMsT1RIRVI6NH0sUj0iNmU5Y2ZkMmEtNTkwNy00OWZmLWIzNjMtODk3OGE2ZTgzNDBlIixOPSI5YTIxZjNiZS0zMWYwLTRiNzgtYjBiZS1jN2Y3ZGJiOTcyNTAiLEE9ImQ0MGUzOGVhLWQ0MTktNGM2Mi05NGVkLTIwYWMzN2I0ZTRmYSI7Y2xhc3Mgentjb25zdHJ1Y3Rvcih0PSJIMjY0Iil7dGhpcy5zcHM9bmV3IE1hcCx0aGlzLnBwcz1uZXcgTWFwLHRoaXMuYWN0aXZlU1BTPW51bGwsdGhpcy5jb2RlYz10fWNvbGxlY3RQUFModCl7dGhpcy5jb2RlYz09PSJIMjY0Ij90aGlzLmNvbGxlY3RIMjY0UFBTKHQpOnRoaXMuY29sbGVjdEgyNjVQUFModCl9Y29sbGVjdFNQUyh0KXt0aGlzLmNvZGVjPT09IkgyNjQiP3RoaXMuY29sbGVjdEgyNjRTUFModCk6dGhpcy5jb2xsZWN0SDI2NVNQUyh0KX1jb2xsZWN0SDI2NFNQUyh0KXtjb25zdCBlPW5ldyB3KHQpLGk9ZS5yZWFkQml0cyg4KSxzPVsxMDAsMTEwLDEyMiwyNDQsNDQsODMsODYsMTE4LDEyOCwxMzgsMTM5LDEzNCwxMzVdO2Uuc2tpcCg4KSxlLnNraXAoOCk7Y29uc3QgYT1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKGE+MzF8fGE8MCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgc2VxX3BhcmFtZXRlcl9zZXRfaWQiKTtpZihzLmluY2x1ZGVzKGkpKXtjb25zdCBvPWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7aWYobz09PTMmJmUuc2tpcCgxKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5za2lwKDEpLGUucmVhZEJpdHMoMSkpe2NvbnN0IG09byE9PTM/ODoxMjtmb3IobGV0IHA9MDtwPG07cCsrKWlmKGUucmVhZEJpdHMoMSkpe2NvbnN0IEU9cDw2PzE2OjY0O2xldCBkPTgsdT04O2ZvcihsZXQgST0wO0k8RTtJKyspe2lmKHUhPT0wKXtjb25zdCBsPWUucmVhZEV4cEdvbG9tYlNpZ25lZCgpO3U9KGQrbCsyNTYpJTI1Nn1kPXU9PT0wP2Q6dX19fX1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2NvbnN0IHI9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtpZihyPT09MCllLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2Vsc2UgaWYocj09PTEpe2Uuc2tpcCgxKSxlLnJlYWRFeHBHb2xvbWJTaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJTaWduZWQoKTtjb25zdCBvPWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Zm9yKGxldCBmPTA7ZjxvO2YrKyllLnJlYWRFeHBHb2xvbWJTaWduZWQoKX1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUuc2tpcCgxKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkQml0cygxKT09PTAmJmUuc2tpcCgxKSxlLnNraXAoMSksZS5yZWFkQml0cygxKSYmKGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCkpO2xldCBjO2lmKGUucmVhZEJpdHMoMSkpe2xldCBmPWZ1bmN0aW9uKGQpe2NvbnN0IHU9ZC5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtkLnNraXAoNCksZC5za2lwKDQpO2ZvcihsZXQgVT0wO1U8PXU7VSsrKWQucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZC5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxkLnNraXAoMSk7ZC5za2lwKDUpO2NvbnN0IEk9ZC5yZWFkQml0cyg1KSxsPWQucmVhZEJpdHMoNSksRz1kLnJlYWRCaXRzKDUpO3JldHVybntjcGJfcmVtb3ZhbF9kZWxheV9sZW5ndGhfbWludXMxOkksZHBiX291dHB1dF9kZWxheV9sZW5ndGhfbWludXMxOmwsdGltZV9vZmZzZXRfbGVuZ3RoOkd9fTtlLnJlYWRCaXRzKDEpJiZlLnJlYWRCaXRzKDgpPT09MjU1JiYoZS5za2lwKDE2KSxlLnNraXAoMTYpKSxlLnJlYWRCaXRzKDEpJiZlLnNraXAoMSksZS5yZWFkQml0cygxKSYmKGUuc2tpcCgzKSxlLnNraXAoMSksZS5yZWFkQml0cygxKSYmZS5za2lwKDI0KSksZS5yZWFkQml0cygxKSYmKGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSk7Y29uc3Qgbz1lLnJlYWRCaXRzKDEpP3tudW1fdW5pdHNfaW5fdGljazplLnJlYWRCaXRzKDMyKSx0aW1lX3NjYWxlOmUucmVhZEJpdHMoMzIpLGZpeGVkX2ZyYW1lX3JhdGVfZmxhZzplLnJlYWRCaXRzKDEpfTp2b2lkIDAsbT1lLnJlYWRCaXRzKDEpP2YoZSk6dm9pZCAwLHA9ZS5yZWFkQml0cygxKT9mKGUpOnZvaWQgMDsobXx8cCkmJmUuc2tpcCgxKTtjb25zdCBFPWUucmVhZEJpdHMoMSk7Yz17dGltaW5nX2luZm86byxuYWxfaHJkX3BhcmFtZXRlcnM6bSx2Y2xfaHJkX3BhcmFtZXRlcnM6cCxwaWNfc3RydWN0X3ByZXNlbnRfZmxhZzpFfX10aGlzLnNwcy5zZXQoYSx7dnVpX3BhcmFtZXRlcnM6Y30pfWNvbGxlY3RIMjY1U1BTKHQpe31jb2xsZWN0SDI2NFBQUyh0KXtjb25zdCBlPW5ldyB3KHQpLGk9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtpZihpPjI1NXx8aTwwKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwaWNfcGFyYW1ldGVyX3NldF9pZCIpO2NvbnN0IHM9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTt0aGlzLnBwcy5zZXQoaSx7c2VxX3BhcmFtZXRlcl9zZXRfaWQ6c30pfWNvbGxlY3RIMjY1UFBTKHQpe31maW5kQWN0aXZlU1BTKHQpe2NvbnN0IGU9bmV3IHcodCk7ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2NvbnN0IGk9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxzPXRoaXMucHBzLmdldChpKTtpZihzKXtjb25zdCBhPXRoaXMuc3BzLmdldChzLnNlcV9wYXJhbWV0ZXJfc2V0X2lkKTtpZihhKXt0aGlzLmFjdGl2ZVNQUz1hO3JldHVybn19dGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgZmluZCB0aGUgYWN0aXZlIFNQUyIpfX1jb25zdCBnPW5ldyB6O2Z1bmN0aW9uIEMobix0KXtmb3IoO3Q8bi5ieXRlTGVuZ3RoLTQ7KXtpZihuW3RdPT09MCYmblt0KzFdPT09MCYmKG5bdCsyXT09PTF8fG5bdCsyXT09PTAmJm5bdCszXT09PTEpKXJldHVybiB0O3QrPTF9cmV0dXJuLTF9ZnVuY3Rpb24gUChuKXtjb25zdCB0PW5ldyBVaW50OEFycmF5KG4uYnl0ZUxlbmd0aCk7bGV0IGU9MCxpPTA7Zm9yKGxldCBzPTI7czxuLmJ5dGVMZW5ndGg7cysrKW5bc109PT0zJiZuW3MtMV09PT0wJiZuW3MtMl09PT0wJiYodC5zZXQobi5zdWJhcnJheShpLHMpLGUpLGUrPXMtaSxpPXMrMSk7cmV0dXJuIGk8bi5ieXRlTGVuZ3RoJiZ0LnNldChuLnN1YmFycmF5KGkpLGUpLHR9ZnVuY3Rpb24gVyhuLHQpe2xldCBlPTA7Y29uc3QgaT10PT09IkgyNjQiPzE6MixzPVtdO2Zvcig7ZTxuLmJ5dGVMZW5ndGgtNDspe2NvbnN0IGE9QyhuLGUpO2lmKGE+PWUpe2NvbnN0IHI9blthKzJdPT09MT8zOjQsYz1DKG4sYStyK2kpO2lmKGM+YSlzLnB1c2gobi5zdWJhcnJheShhLGMpKSxlPWM7ZWxzZXtzLnB1c2gobi5zdWJhcnJheShhKSk7YnJlYWt9fWVsc2UgYnJlYWt9cmV0dXJuIHN9ZnVuY3Rpb24gRihuLHQpe2xldCBlPSEwO3JldHVybiBXKG4sdCkuZmlsdGVyKGk9Pntjb25zdCBzPWlbMl09PT0xPzM6NCxhPXQ9PT0iSDI2NCI/MToyLHI9aVtzXSxjPXQ9PT0iSDI2NCI/ciYzMTpyPj4xJjYzO2lmKGUpc3dpdGNoKGMpe2Nhc2UgXy5QUFNfSDI2NDpjYXNlIF8uUFBTX0gyNjU6Zy5jb2xsZWN0UFBTKFAoaS5zdWJhcnJheShzK2EpKSk7YnJlYWs7Y2FzZSBfLlNQU19IMjY0OmNhc2UgXy5TUFNfSDI2NTpnLmNvbGxlY3RTUFMoUChpLnN1YmFycmF5KHMrYSkpKTticmVhaztjYXNlIF8uU0xJQ0VfSURSOmNhc2UgXy5TTElDRV9OT05fSURSOmNhc2UgXy5TTElDRV9QQVJUSVRJT05fQTp0cnl7Zy5maW5kQWN0aXZlU1BTKFAoaS5zdWJhcnJheShzK2EpKSksZT0hMX1jYXRjaChvKXtjb25zb2xlLmluZm8oIkZhaWxlZCB0byBmaW5kIGFjdGl2ZSBTUFMuIFdpbGwgbm90IGJlIGFibGUgdG8gZXh0cmFjdCBQSUMgdGltaW5nIG1ldGFkYXRhIil9YnJlYWt9cmV0dXJuW18uU0VJX0gyNjQsXy5TRUlfSDI2NV9QUkVGSVgsXy5TRUlfSDI2NV9TVUZGSVhdLmluY2x1ZGVzKGMpfSl9ZnVuY3Rpb24gcShuKXtsZXQgdD0wLGU9MDtmb3IoO25bZV09PT0yNTU7KXQrPTI1NSxlKys7dCs9bltlXSxlKys7bGV0IGk9MDtmb3IoO25bZV09PT0yNTU7KWkrPTI1NSxlKys7cmV0dXJuIGkrPW5bZV0sZSsrLHt0eXBlOnQsY29udGVudDpuLnN1YmFycmF5KGUsZStpKX19ZnVuY3Rpb24gVihuKXtjb25zdCB0PW5ldyBVaW50OEFycmF5KFQoTikpLGU9bmV3IFVpbnQ4QXJyYXkoVChSKSksaT1uZXcgVWludDhBcnJheShUKEEpKTtyZXR1cm4gdC5ldmVyeSgocyxhKT0+cz09PW5bYV0pP2guVElNRUNPREU6ZS5ldmVyeSgocyxhKT0+cz09PW5bYV0pP2guTEVHQUNZOmkuZXZlcnkoKHMsYSk9PnM9PT1uW2FdKT9oLk5FVzpoLk9USEVSfWZ1bmN0aW9uIFkobix0KXtsZXQgZT0wO24udXVpZD10LnN1YmFycmF5KGUsZSsxNiksZSs9MTY7Y29uc3QgaT1WKG4udXVpZCkscz10LnN1YmFycmF5KGUpO3N3aXRjaChpKXtjYXNlIGguTEVHQUNZOmNhc2UgaC5PVEhFUjpuLnVucmVnaXN0ZXJlZD1zO2JyZWFrO2Nhc2UgaC5USU1FQ09ERTpuLnRpbWVjb2RlPUQocyk7YnJlYWs7Y2FzZSBoLk5FVzp7bGV0IGE9MDtjb25zdCByPUwoRGF0ZS5ub3coKSkubGVuZ3RoLGM9cy5zdWJhcnJheShhLHIpO2ErPXI7Y29uc3Qgbz1zLnN1YmFycmF5KGEpO24udGltZWNvZGU9RChjKSxuLnVucmVnaXN0ZXJlZD1vO2JyZWFrfX19ZnVuY3Rpb24gRChuKXtjb25zdCB0PW4ucmVkdWNlKChhLHIpPT4oYTw8QmlnSW50KDgpKStCaWdJbnQociksQmlnSW50KDApKSxlPU51bWJlcih0KSxpPW5ldyBEYXRlKGUpO3JldHVybiBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoaS50b0lTT1N0cmluZygpKX1mdW5jdGlvbiBqKG4sdCl7dmFyIGYsbSxwLEUsZDtpZighZy5hY3RpdmVTUFMpe2NvbnNvbGUud2FybigiQ2Fubm90IGZpbmQgdGhlIGFjdGl2ZSBTUFMiKTtyZXR1cm59Y29uc3QgZT0oZj1nLmFjdGl2ZVNQUy52dWlfcGFyYW1ldGVycy5uYWxfaHJkX3BhcmFtZXRlcnMpIT1udWxsP2Y6Zy5hY3RpdmVTUFMudnVpX3BhcmFtZXRlcnMudmNsX2hyZF9wYXJhbWV0ZXJzLGk9e2NwYl9kcGJfZGVsYXlzX3ByZXNlbnRfZmxhZzplPzE6MCxjcGJfcmVtb3ZhbF9kZWxheV9sZW5ndGhfbWludXMxOihtPWU9PW51bGw/dm9pZCAwOmUuY3BiX3JlbW92YWxfZGVsYXlfbGVuZ3RoX21pbnVzMSkhPW51bGw/bToyMyxkcGJfb3V0cHV0X2RlbGF5X2xlbmd0aF9taW51czE6KHA9ZT09bnVsbD92b2lkIDA6ZS5kcGJfb3V0cHV0X2RlbGF5X2xlbmd0aF9taW51czEpIT1udWxsP3A6MjMsdGltZV9vZmZzZXRfbGVuZ3RoOmU/KEU9ZS50aW1lX29mZnNldF9sZW5ndGgpIT1udWxsP0U6MjQ6dm9pZCAwLHBpY19zdHJ1Y3RfcHJlc2VudF9mbGFnOihkPWcuYWN0aXZlU1BTLnZ1aV9wYXJhbWV0ZXJzLnBpY19zdHJ1Y3RfcHJlc2VudF9mbGFnKSE9bnVsbD9kOjB9O2lmKCFpLnBpY19zdHJ1Y3RfcHJlc2VudF9mbGFnKXtjb25zb2xlLndhcm4oInBpY19zdHJ1Y3RfcHJlc2VudF9mbGFnIGlzIG5vdCBwcmVzZW50Iik7cmV0dXJufWNvbnN0IHM9bmV3IHcodCk7aS5jcGJfZHBiX2RlbGF5c19wcmVzZW50X2ZsYWcmJihzLnNraXAoaS5jcGJfcmVtb3ZhbF9kZWxheV9sZW5ndGhfbWludXMxKzEpLHMuc2tpcChpLmRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMSsxKSk7Y29uc3QgYT1bMSwxLDEsMiwyLDMsMywyLDNdLHI9cy5yZWFkQml0cyg0KTtpZihyPj1hLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGljX3N0cnVjdCIpO2NvbnN0IGM9YVtyXSxvPVtdO2ZvcihsZXQgdT0wO3U8Yzt1KyspaWYocy5yZWFkQml0cygxKSl7Y29uc3QgbD17fTtzLnNraXAoMikscy5za2lwKDEpLHMuc2tpcCg1KTtjb25zdCBHPXMucmVhZEJpdHMoMSk7aWYocy5za2lwKDIpLGwubl9mcmFtZXM9cy5yZWFkQml0cyg4KSxHPyhsLnNlY29uZHNfdmFsdWU9cy5yZWFkQml0cyg2KSxsLm1pbnV0ZXNfdmFsdWU9cy5yZWFkQml0cyg2KSxsLmhvdXJzX3ZhbHVlPXMucmVhZEJpdHMoNSkpOnMucmVhZEJpdHMoMSkmJihsLnNlY29uZHNfdmFsdWU9cy5yZWFkQml0cyg2KSxzLnJlYWRCaXRzKDEpJiYobC5taW51dGVzX3ZhbHVlPXMucmVhZEJpdHMoNikscy5yZWFkQml0cygxKSYmKGwuaG91cnNfdmFsdWU9cy5yZWFkQml0cyg1KSkpKSxpLnRpbWVfb2Zmc2V0X2xlbmd0aCl0cnl7bC50aW1lX29mZnNldD1zLnJlYWRCaXRzKGkudGltZV9vZmZzZXRfbGVuZ3RoKX1jYXRjaChVKXtjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gcmVhZCB0aW1lX29mZnNldCIsVSksbC50aW1lX29mZnNldD0wfWVsc2UgbC50aW1lX29mZnNldD0wO28ucHVzaChsKX1uLnNlaVBpY1RpbWluZ1RpbWVDb2RlQXJyYXk9b31mdW5jdGlvbiBYKG4sdCl7aWYodCE9PSJIMjY0IiYmdCE9PSJIMjY1Iil0aHJvdyBuZXcgRXJyb3IoIlVuc3VwcG9ydGVkIGNvZGVjICIuY29uY2F0KHQpKTtjb25zdCBlPXt9O3JldHVybiBnLmNvZGVjPXQsRihuZXcgVWludDhBcnJheShuLmRhdGEpLHQpLmZvckVhY2goaT0+e2NvbnN0IHM9aVsyXT09PTE/Mzo0LGE9dD09PSJIMjY0Ij8xOjIscj1QKGkuc3ViYXJyYXkocythKSksYz1xKHIpO3N3aXRjaChjLnR5cGUpe2Nhc2UgSC5QSUNfVElNSU5HOmooZSxjLmNvbnRlbnQpO2JyZWFrO2Nhc2UgSC5VU0VSX0RBVEFfVU5SRUdJU1RFUkVEOlkoZSxjLmNvbnRlbnQpO2JyZWFrfX0pLGV9ZnVuY3Rpb24gJChuKXtyZXR1cm4vXlswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezEyfSQvLnRlc3Qobil9ZnVuY3Rpb24gVChuKXtyZXR1cm4gbi5yZXBsYWNlKC8tL2csIiIpLm1hdGNoKC8uezEsMn0vZykubWFwKHQ9PnBhcnNlSW50KHQsMTYpKX1mdW5jdGlvbiBKKG4sdCxlKXtjb25zdCBpPW5ldyBVaW50OEFycmF5KFQobikpLHM9TChlKSxhPW5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShKU09OLnN0cmluZ2lmeSh0KSkscj1uZXcgVWludDhBcnJheShpLmxlbmd0aCtzLmxlbmd0aCthLmxlbmd0aCk7cmV0dXJuIHIuc2V0KGkpLHIuc2V0KHMsaS5sZW5ndGgpLHIuc2V0KGEscy5sZW5ndGgraS5sZW5ndGgpLHJ9ZnVuY3Rpb24gSyhuKXtjb25zdCB0PVtdLGU9TWF0aC5mbG9vcihuLmJ5dGVMZW5ndGgvMjU1KSxpPW4uYnl0ZUxlbmd0aCUyNTU7Zm9yKGxldCBzPTA7czxlO3MrKyl0LnB1c2goMjU1KTtyZXR1cm4gdC5wdXNoKGkpLG5ldyBVaW50OEFycmF5KFs1LC4uLnRdKX1mdW5jdGlvbiBaKG4pe2NvbnN0IHQ9W107Zm9yKGxldCBlPTA7ZTxuLmJ5dGVMZW5ndGg7ZSsrKWUrMjxuLmJ5dGVMZW5ndGgmJlswLDEsMiwzXS5pbmNsdWRlcyhuW2UrMl0pJiZuW2VdPT09MCYmbltlKzFdPT09MD8odC5wdXNoKG5bZV0pLHQucHVzaChuW2UrMV0pLGUrPTIsdC5wdXNoKDMpKTp0LnB1c2gobltlXSk7cmV0dXJuIHQucHVzaCgxMjgpLG5ldyBVaW50OEFycmF5KHQpfWZ1bmN0aW9uIEwobil7Y29uc3QgdD1bXTtpZighaXNOYU4obikpe2NvbnN0IGU9QmlnSW50KG4pO2ZvcihsZXQgaT0wO2k8TWF0aC5jZWlsKE1hdGguZmxvb3IoTWF0aC5sb2cyKG5ldyBOdW1iZXIobikpKzEpLzgpO2krKyl0LnVuc2hpZnQobmV3IE51bWJlcihlPj5CaWdJbnQoOCppKSZCaWdJbnQoMjU1KSkpfXJldHVybiBuZXcgVWludDhBcnJheSh0KX1mdW5jdGlvbiBRKHt1dWlkOm4scGF5bG9hZDp0LHRpbWVjb2RlOmV9KXtjb25zdCBpPVswLDAsMCwxXSxzPVsxMDJdLGE9SihuLHQsZSkscj1LKGEpLGM9WihhKSxvPW5ldyBVaW50OEFycmF5KGkubGVuZ3RoK3MubGVuZ3RoK3IubGVuZ3RoK2MubGVuZ3RoKTtyZXR1cm4gby5zZXQoaSksby5zZXQocyxpLmxlbmd0aCksby5zZXQocixpLmxlbmd0aCtzLmxlbmd0aCksby5zZXQoYyxpLmxlbmd0aCtzLmxlbmd0aCtyLmxlbmd0aCksb31mdW5jdGlvbiBlZSh7dXVpZDpuLHBheWxvYWQ6dCx0aW1lY29kZTplfSxpKXtpZihuPT09IiJ8fHQ9PT0iIil0aHJvdyBuZXcgRXJyb3IoInV1aWQgYW5kIHBheWxvYWQgY2Fubm90IGJlIGVtcHR5Iik7JChuKXx8KGNvbnNvbGUud2FybigiSW52YWxpZCBVVUlELiBVc2luZyBkZWZhdWx0IFVVSUQuIiksbj1BLGU9RGF0ZS5ub3coKSk7Y29uc3Qgcz1RKHt1dWlkOm4scGF5bG9hZDp0LHRpbWVjb2RlOmV9KSxhPW5ldyBEYXRhVmlldyhpLmRhdGEpLHI9bmV3IEFycmF5QnVmZmVyKGkuZGF0YS5ieXRlTGVuZ3RoK3MuYnl0ZUxlbmd0aCksYz1uZXcgRGF0YVZpZXcocik7Zm9yKGxldCBvPTA7bzxpLmRhdGEuYnl0ZUxlbmd0aDtvKyspYy5zZXRVaW50OChvLGEuZ2V0VWludDgobykpO2ZvcihsZXQgbz0wO288cy5ieXRlTGVuZ3RoO28rKyljLnNldFVpbnQ4KGkuZGF0YS5ieXRlTGVuZ3RoK28sc1tvXSk7aS5kYXRhPXJ9Y29uc3QgdGU9MmUzLHk9W107bGV0IFM9IiIsaz17fTtjb25zdCBiPXt9O2xldCB4PVtdO2Z1bmN0aW9uIHYobil7cmV0dXJuIG5ldyBUcmFuc2Zvcm1TdHJlYW0oe3N0YXJ0KCl7fSxmbHVzaCgpe30sYXN5bmMgdHJhbnNmb3JtKHQsZSl7dmFyIGkscztpZih0IGluc3RhbmNlb2YgUlRDRW5jb2RlZFZpZGVvRnJhbWUpe2NvbnN0IGE9KChpPWtbdC5nZXRNZXRhZGF0YSgpLnBheWxvYWRUeXBlXSk9PW51bGw/dm9pZCAwOmkudG9VcHBlckNhc2UoKSl8fChTPT1udWxsP3ZvaWQgMDpTLnRvVXBwZXJDYXNlKCkpO2lmKGE9PT0iSDI2NCIpe2NvbnN0IHI9WCh0LGEpOyhyLnRpbWVjb2RlfHxyLnVucmVnaXN0ZXJlZHx8KChzPXIuc2VpUGljVGltaW5nVGltZUNvZGVBcnJheSk9PW51bGw/dm9pZCAwOnMubGVuZ3RoKT4wKSYmc2VsZi5wb3N0TWVzc2FnZSh7bWlkOm4sbWV0YWRhdGE6cn0pfX1lLmVucXVldWUodCl9fSl9ZnVuY3Rpb24gTygpe09iamVjdC5rZXlzKGIpLnNvcnQoKS5qb2luKCk9PT14LnNvcnQoKS5qb2luKCkmJih5LnNoaWZ0KCkseD1bXSl9ZnVuY3Rpb24gbmUobil7Y29uc3QgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTtiW25dPXQsT2JqZWN0LmtleXMoYikuZmlsdGVyKGk9PnQtYltpXT50ZSkuZm9yRWFjaChpPT57ZGVsZXRlIGJbaV0sZGVsZXRlIHhbaV19KSxPKCl9ZnVuY3Rpb24gTSgpe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybShuLHQpe2lmKG4gaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgaT1uLmdldE1ldGFkYXRhKCkuc3luY2hyb25pemF0aW9uU291cmNlO2lmKG5lKGkpLCF4LmluY2x1ZGVzKGkpJiZ5Lmxlbmd0aCl0cnl7aWYoIS8oaDI2WzRdKS8udGVzdChTKSl0aHJvdyBuZXcgRXJyb3IoIlNlbmRpbmcgbWV0YWRhdGEgaXMgbm90IHN1cHBvcnRlZCB3aXRoIGFueSBvdGhlciBjb2RlYyBvdGhlciB0aGFuIEguMjY0Iik7eVswXS51dWlkPT09QSYmKHlbMF0udGltZWNvZGU9RGF0ZS5ub3coKSksZWUoeVswXSxuKSx4LnB1c2goaSl9Y2F0Y2gocyl7Y29uc29sZS5lcnJvcihzKX1maW5hbGx5e08oKX19dC5lbnF1ZXVlKG4pfX0pfWZ1bmN0aW9uIEIoe3JlYWRhYmxlOm4sd3JpdGFibGU6dH0sZSl7bi5waXBlVGhyb3VnaChlKS5waXBlVG8odCl9YWRkRXZlbnRMaXN0ZW5lcigicnRjdHJhbnNmb3JtIixuPT57bGV0IHQ7aWYobi50cmFuc2Zvcm1lci5vcHRpb25zLm5hbWU9PT0ic2VuZGVyVHJhbnNmb3JtIilTPW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlYyx0PU0oKTtlbHNlIGlmKG4udHJhbnNmb3JtZXIub3B0aW9ucy5uYW1lPT09InJlY2VpdmVyVHJhbnNmb3JtIilrPW4udHJhbnNmb3JtZXIub3B0aW9ucy5wYXlsb2FkVHlwZUNvZGVjfHx7fSxTPW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlY3x8IiIsdD12KG4udHJhbnNmb3JtZXIub3B0aW9ucy5taWQpO2Vsc2UgcmV0dXJuO0Iobi50cmFuc2Zvcm1lcix0KX0pLGFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG49Pntjb25zdHthY3Rpb246dH09bi5kYXRhO3N3aXRjaCh0KXtjYXNlImluc2VydGFibGUtc3RyZWFtcy1zZW5kZXIiOlM9bi5kYXRhLmNvZGVjLEIobi5kYXRhLE0oKSk7YnJlYWs7Y2FzZSJpbnNlcnRhYmxlLXN0cmVhbXMtcmVjZWl2ZXIiOms9bi5kYXRhLnBheWxvYWRUeXBlQ29kZWN8fHt9LFM9bi5kYXRhLmNvZGVjfHwiIixCKG4uZGF0YSx2KG4uZGF0YS5taWQpKTticmVhaztjYXNlIm1ldGFkYXRhLXNlaS11c2VyLWRhdGEtdW5yZWdpc3RlcmVkIjp5LnB1c2goe3V1aWQ6bi5kYXRhLnV1aWQscGF5bG9hZDpuLmRhdGEucGF5bG9hZH0pO2JyZWFrfX0pfSkoKTsK",Ws=typeof s<"u"&&s.Blob&&new Blob([(t=>j.from(atob(t),(t=>t.charCodeAt(0))))(Vs)],{type:"text/javascript;charset=utf-8"});function Hs(t){let i;try{if(i=Ws&&(s.URL||s.webkitURL).createObjectURL(Ws),!i)throw"";const e=new Dl(i,{name:null==t?void 0:t.name});return e.addEventListener("error",(()=>{(s.URL||s.webkitURL).revokeObjectURL(i)})),e}catch(i){return new Dl("data:text/javascript;base64,"+Vs,{name:null==t?void 0:t.name})}finally{i&&(s.URL||s.webkitURL).revokeObjectURL(i)}}const Xs=rt.get("Publish"),Zs={mediaStream:null,bandwidth:0,metadata:!1,disableVideo:!1,disableAudio:!1,codec:Xe.H264,simulcast:!1,scalabilityMode:null,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}},qs=rt.get("View"),Ks={metadata:!1,disableVideo:!1,disableAudio:!1,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};t.Director=Is,t.Logger=rt,t.PeerConnection=is,t.Publish=class extends Qs{async connect(t){void 0===t&&(t=Zs);const i=Bs.object({sourceId:Bs.string(),stereo:Bs.boolean(),dtx:Bs.boolean(),absCaptureTime:Bs.boolean(),dependencyDescriptor:Bs.boolean(),mediaStream:Bs.alternatives().try(Bs.array().items(Bs.object()),Bs.object()),bandwidth:Bs.number(),metadata:Bs.boolean(),disableVideo:Bs.boolean(),disableAudio:Bs.boolean(),codec:Bs.string().valid(...w.values(Xe)),simulcast:Bs.boolean(),scalabilityMode:Bs.string(),peerConfig:Bs.object(),record:Bs.boolean(),events:Bs.array().items(Bs.string().valid("active","inactive","viewercount")),priority:Bs.number()}),{error:e,value:s}=i.validate(t);e&&Xs.warn(e,s),this.options=d(l(l({},Zs),t),{peerConfig:l(l({},Zs.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.options.metadata=this.options.metadata&&this.options.codec===Xe.H264&&!this.options.disableVideo,await this.initConnection({migrate:!1})}async reconnect(t){var i,e;this.options.mediaStream=null!=(e=null==(i=this.webRTCPeer)?void 0:i.getTracks())?e:this.options.mediaStream,super.reconnect(t)}async replaceConnection(){var t,i;Xs.info("Migrating current connection"),this.options.mediaStream=null!=(i=null==(t=this.webRTCPeer)?void 0:t.getTracks())?i:this.options.mediaStream,await this.initConnection({migrate:!0})}async record(){var t;this.recordingAvailable?(this.options.record=!0,await(null==(t=this.signaling)?void 0:t.cmd("record")),Xs.info("Broadcaster start recording")):Xs.error("Record not available")}async unrecord(){var t;this.recordingAvailable?(this.options.record=!1,await(null==(t=this.signaling)?void 0:t.cmd("unrecord")),Xs.info("Broadcaster stop recording")):Xs.error("Unrecord not available")}stop(){var t;super.stop(),null==(t=this.worker)||t.terminate(),this.worker=null}async initConnection(t){var i,e;let s,n;if(Xs.debug("Broadcast option values: ",this.options),this.stopReconnection=!1,!this.options.mediaStream)throw Xs.error("Error while broadcasting. MediaStream required"),new g("MediaStream required");if(!t.migrate&&this.isActive())throw Xs.warn("Broadcast currently working"),new g("Broadcast currently working");try{n=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==n?void 0:n.iceServers,this.options.peerConfig.encodedInsertableStreams=this.options.metadata}catch(t){throw Xs.error("Error generating token."),t instanceof Ms&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!n)throw Xs.error("Error while broadcasting. Publisher data required"),new g("Publisher data required");const r=js(n.jwt);if(this.streamName=r.millicast.streamName,this.recordingAvailable=r[Ps.atob("bWlsbGljYXN0")].record,this.options.record&&!this.recordingAvailable)throw Xs.error("Error while broadcasting. Record option detected but recording is not available"),new g("Record option detected but recording is not available");const o=new ps({streamName:this.streamName,url:"".concat(n.urls[0],"?token=").concat(n.jwt)}),h=t.migrate?new is:this.webRTCPeer;await h.createRTCPeer(this.options.peerConfig,Ke),null==(i=this.stopReemitingWebRTCPeerInstanceEvents)||i.call(this),null==(e=this.stopReemitingSignalingInstanceEvents)||e.call(this),this.stopReemitingWebRTCPeerInstanceEvents=It(h,this,[$e.connectionStateChange]),this.stopReemitingSignalingInstanceEvents=It(o,this,[ms]);const a=h.getRTCLocalSDP(this.options),u=o.connect();s=await Promise.all([a,u]);const c=s[0];this.options.metadata&&(this.worker||(this.worker=new Hs),this.getRTCPeerConnection().getSenders().forEach((t=>{if(Gs)t.transform=new RTCRtpScriptTransform(this.worker,{name:"senderTransform",codec:this.options.codec});else if(Ys){const{readable:i,writable:e}=t.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-sender",codec:this.options.codec,readable:i,writable:e},[i,e])}})));let l=this.signaling;this.signaling=o;const d=this.signaling.publish(c,this.options),f=h.peer.setLocalDescription(h.sessionDescription);s=await Promise.all([d,f]);let _=s[0];!this.options.disableVideo&&this.options.bandwidth>0&&(_=h.updateBandwidthRestriction(_,this.options.bandwidth)),await h.setRTCRemoteSDP(_),Xs.info("Broadcasting to streamName: ",this.streamName);let w=this.webRTCPeer;this.webRTCPeer=h,this.setReconnect(),t.migrate&&this.webRTCPeer.on($e.connectionStateChange,(t=>{var i,e;["connected","disconnected","failed","closed"].includes(t)&&(null==(i=null==l?void 0:l.close)||i.call(l),null==(e=null==w?void 0:w.closeRTCPeer)||e.call(w),l=w=null)}))}sendMetadata(t,i){var e;if(void 0===i&&(i="d40e38ea-d419-4c62-94ed-20ac37b4e4fa"),null!=(e=this.options)&&e.metadata&&this.worker)this.worker.postMessage({action:"metadata-sei-user-data-unregistered",uuid:i,payload:t});else{let t="Could not send metadata due to:";this.options?this.options.metadata?this.worker||(t+="\n- Stream not being published."):(t+="\n- Metadata option is not enabled.",this.options.codec!==Xe.H264&&(t+="\n- Incompatible codec. Only H264 available."),this.options.disableVideo&&(t+="\n- Video disabled.")):t+="\n- Stream not being published.",Xs.warn(t)}}constructor(t,i,e=!0){t&&Xs.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,i,Xs,e)}},t.Signaling=ps,t.View=class extends Qs{async connect(t){void 0===t&&(t=Ks),this.options=d(l(l({},Ks),t),{peerConfig:l(l({},Ks.peerConfig),t.peerConfig),setSDPToPeer:!1}),await this.initConnection({migrate:!1})}async select(t){void 0===t&&(t={}),qs.debug("Viewer select layer values: ",t),await this.signaling.cmd("select",{layer:t}),qs.info("Connected to streamName: ",this.streamName)}async addRemoteTrack(t,i){return qs.info("Viewer adding remote % track",t),this.webRTCPeer.addRemoteTrack(t,i)}async project(t,i){for(const t of i){if(!t.trackId&&!t.media)throw qs.error("Error in projection mapping, trackId or mediaId must be set"),new g("Error in projection mapping, trackId or mediaId must be set");const i=this.webRTCPeer.getRTCPeer();if(t.mediaId&&!i.getTransceivers().find((i=>i.mid===t.mediaId.toString())))throw qs.error("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers")),new g("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers"))}qs.debug("Viewer project source: layer mappings: ",t,i),await this.signaling.cmd("project",{sourceId:t,mapping:i}),qs.info("Projection done")}async unproject(t){qs.debug("Viewer unproject mediaIds: ",t),await this.signaling.cmd("unproject",{mediaIds:t}),qs.info("Unprojection done")}async replaceConnection(){qs.info("Migrating current connection"),await this.initConnection({migrate:!0})}stop(){var t;super.stop(),null==(t=this.worker)||t.terminate(),this.worker=null,this.payloadTypeCodec={},this.tracksMidValues={}}async initConnection(t){var i,e;let s,n;if(qs.debug("Viewer connect options values: ",this.options),this.stopReconnection=!1,!t.migrate&&this.isActive())throw qs.warn("Viewer currently subscribed"),new g("Viewer currently subscribed");try{n=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==n?void 0:n.iceServers,this.options.metadata&&(this.options.peerConfig.encodedInsertableStreams=Ys)}catch(t){throw qs.error("Error generating token."),t instanceof Ms&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!n)throw qs.error("Error while subscribing. Subscriber data required"),new g("Subscriber data required");const r=js(n.jwt);this.streamName=r.millicast.streamName;const o=new ps({streamName:this.streamName,url:"".concat(n.urls[0],"?token=").concat(n.jwt)}),h=t.migrate?new is:this.webRTCPeer;await h.createRTCPeer(this.options.peerConfig),null==(i=this.stopReemitingWebRTCPeerInstanceEvents)||i.call(this),null==(e=this.stopReemitingSignalingInstanceEvents)||e.call(this),this.stopReemitingWebRTCPeerInstanceEvents=It(h,this,w.values($e)),this.stopReemitingSignalingInstanceEvents=It(o,this,[ms]),this.options.metadata&&(this.worker||(this.worker=new Hs),h.on("track",(t=>{var i,e,s;if(this.tracksMidValues[null==(i=t.transceiver)?void 0:i.mid]=t.track,Gs)t.receiver.transform=new RTCRtpScriptTransform(this.worker,{name:"receiverTransform",payloadTypeCodec:l({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(e=t.transceiver)?void 0:e.mid});else if(Ys){const{readable:i,writable:e}=t.receiver.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-receiver",payloadTypeCodec:l({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(s=t.transceiver)?void 0:s.mid,readable:i,writable:e},[i,e])}})),this.worker.onmessage=t=>{const i=new TextDecoder,e=t.data.metadata;if(e.mid=t.data.mid,e.track=this.tracksMidValues[t.data.mid],e.uuid){const t=e.uuid;e.uuid=t.reduce(((t,i)=>t+i.toString(16).padStart(2,"0")),""),e.uuid=e.uuid.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}if(e.timecode&&(e.timecode=new Date(i.decode(e.timecode))),e.unregistered){const t=i.decode(e.unregistered);try{const i=JSON.parse(t);e.unregistered=i}catch(t){qs.info("The content could not be converted to JSON, returning raw bytes instead")}}this.emit("metadata",e),this.emit("onMetadata",e)});const a=h.getRTCLocalSDP(d(l({},this.options),{stereo:!0})),c=o.connect();s=await Promise.all([a,c]);const f=s[0];let _=this.signaling;this.signaling=o;const v=this.signaling.subscribe(f,d(l({},this.options),{vad:this.options.multiplexedAudioTracks>0})),m=h.peer.setLocalDescription(h.sessionDescription);s=await Promise.all([v,m]);const p=s[0];this.payloadTypeCodec=We.getCodecPayloadType(p),await h.setRTCRemoteSDP(p),qs.info("Connected to streamName: ",this.streamName);let A=this.webRTCPeer;this.webRTCPeer=h,this.setReconnect(),t.migrate&&this.webRTCPeer.on($e.connectionStateChange,(t=>{var i,e;"connected"===t?u((()=>{var t,i;null==(t=null==_?void 0:_.close)||t.call(_),null==(i=null==A?void 0:A.closeRTCPeer)||i.call(A),_=A=null,qs.info("Current connection migrated")}),1e3):["disconnected","failed","closed"].includes(t)&&(null==(i=null==_?void 0:_.close)||i.call(_),null==(e=null==A?void 0:A.closeRTCPeer)||e.call(A),_=A=null)}))}constructor(t,i,e=null,s=!0){t&&qs.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,i,qs,s),this.payloadTypeCodec={},this.tracksMidValues={},e&&this.on($e.track,(t=>{e.srcObject=t.streams[0]}))}},w.defineProperty(t,Symbol.toStringTag,{value:"Module"})},"object"==typeof t&&typeof i<"u"?n(t):"function"==typeof define&&define.amd?define(["exports"],n):n((e=typeof globalThis<"u"?globalThis:e||self).millicast={})})),Gl=Ql(((t,i)=>{i.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Vl=Ql(((t,i)=>{i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],o=e+e,h=s+s,a=n+n,u=e*o,c=s*o,l=s*h,d=n*o,f=n*h,_=n*a,g=r*o,w=r*h,v=r*a;return t[0]=1-l-_,t[1]=c+v,t[2]=d-w,t[3]=0,t[4]=c-v,t[5]=1-u-_,t[6]=f+g,t[7]=0,t[8]=d+w,t[9]=f-g,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Wl=Ql(((t,i)=>{i.exports=function(t,i,e){var s,n,r,o=e[0],h=e[1],a=e[2],u=_.sqrt(o*o+h*h+a*a);if(_.abs(u)<1e-6)return null;return o*=u=1/u,h*=u,a*=u,s=_.sin(i),n=_.cos(i),r=1-n,t[0]=o*o*r+n,t[1]=h*o*r+a*s,t[2]=a*o*r-h*s,t[3]=0,t[4]=o*h*r-a*s,t[5]=h*h*r+n,t[6]=a*h*r+o*s,t[7]=0,t[8]=o*a*r+h*s,t[9]=h*a*r-o*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Hl=Ql(((t,i)=>{i.exports=function(t,i){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}})),Xl=Ql(((t,i)=>{i.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Zl=Ql(((t,i)=>{i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],o=i[4],h=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],_=i[12],g=i[13],w=i[14],v=i[15],m=e*h-s*o,p=e*a-n*o,A=e*u-r*o,y=s*a-n*h,M=s*u-r*h,b=n*u-r*a,T=c*g-l*_,S=c*w-d*_,N=c*v-f*_,I=l*w-d*g,D=l*v-f*g,E=d*v-f*w,k=m*E-p*D+A*I+y*N-M*S+b*T;if(!k)return null;return k=1/k,t[0]=(h*E-a*D+u*I)*k,t[1]=(n*D-s*E-r*I)*k,t[2]=(g*b-w*M+v*y)*k,t[3]=(d*M-l*b-f*y)*k,t[4]=(a*N-o*E-u*S)*k,t[5]=(e*E-n*N+r*S)*k,t[6]=(w*A-_*b-v*p)*k,t[7]=(c*b-d*A+f*p)*k,t[8]=(o*D-h*N+u*T)*k,t[9]=(s*N-e*D-r*T)*k,t[10]=(_*M-g*A+v*m)*k,t[11]=(l*A-c*M-f*m)*k,t[12]=(h*S-o*I-a*T)*k,t[13]=(e*I-s*S+n*T)*k,t[14]=(g*p-_*y-w*m)*k,t[15]=(c*y-l*p+d*m)*k,t}})),ql=Ql(((t,i)=>{i.exports=function(t,i,e){var s=i[0],n=i[1],r=i[2],o=i[3],h=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],g=i[12],w=i[13],v=i[14],m=i[15],p=e[0],A=e[1],y=e[2],M=e[3];return t[0]=p*s+A*h+y*l+M*g,t[1]=p*n+A*a+y*d+M*w,t[2]=p*r+A*u+y*f+M*v,t[3]=p*o+A*c+y*_+M*m,p=e[4],A=e[5],y=e[6],M=e[7],t[4]=p*s+A*h+y*l+M*g,t[5]=p*n+A*a+y*d+M*w,t[6]=p*r+A*u+y*f+M*v,t[7]=p*o+A*c+y*_+M*m,p=e[8],A=e[9],y=e[10],M=e[11],t[8]=p*s+A*h+y*l+M*g,t[9]=p*n+A*a+y*d+M*w,t[10]=p*r+A*u+y*f+M*v,t[11]=p*o+A*c+y*_+M*m,p=e[12],A=e[13],y=e[14],M=e[15],t[12]=p*s+A*h+y*l+M*g,t[13]=p*n+A*a+y*d+M*w,t[14]=p*r+A*u+y*f+M*v,t[15]=p*o+A*c+y*_+M*m,t}})),Kl=Ql(((t,i)=>{i.exports=function(t,i,e,s,n){var r=1/_.tan(i/2),o=1/(s-n);return t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*o,t[15]=0,t}})),Jl=Ql(((t,i)=>{i.exports=function(t,i,e,s){var n,r,o,h,a,u,c,l,d,f,g,w,v,m,p,A,y,M,b,T,S,N,I,D,E=s[0],k=s[1],L=s[2],x=_.sqrt(E*E+k*k+L*L);if(_.abs(x)<1e-6)return null;E*=x=1/x,k*=x,L*=x,n=_.sin(e),r=_.cos(e),o=1-r,h=i[0],a=i[1],u=i[2],c=i[3],l=i[4],d=i[5],f=i[6],g=i[7],w=i[8],v=i[9],m=i[10],p=i[11],A=E*E*o+r,y=k*E*o+L*n,M=L*E*o-k*n,b=E*k*o-L*n,T=k*k*o+r,S=L*k*o+E*n,N=E*L*o+k*n,I=k*L*o-E*n,D=L*L*o+r,t[0]=h*A+l*y+w*M,t[1]=a*A+d*y+v*M,t[2]=u*A+f*y+m*M,t[3]=c*A+g*y+p*M,t[4]=h*b+l*T+w*S,t[5]=a*b+d*T+v*S,t[6]=u*b+f*T+m*S,t[7]=c*b+g*T+p*S,t[8]=h*N+l*I+w*D,t[9]=a*N+d*I+v*D,t[10]=u*N+f*I+m*D,t[11]=c*N+g*I+p*D,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]);return t}})),$l=Ql(((t,i)=>{i.exports=function(t,i,e){var s,n,r,o,h,a,u,c,l,d,f,_,g=e[0],w=e[1],v=e[2];i===t?(t[12]=i[0]*g+i[4]*w+i[8]*v+i[12],t[13]=i[1]*g+i[5]*w+i[9]*v+i[13],t[14]=i[2]*g+i[6]*w+i[10]*v+i[14],t[15]=i[3]*g+i[7]*w+i[11]*v+i[15]):(s=i[0],n=i[1],r=i[2],o=i[3],h=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=h,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*g+h*w+l*v+i[12],t[13]=n*g+a*w+d*v+i[13],t[14]=r*g+u*w+f*v+i[14],t[15]=o*g+c*w+_*v+i[15]);return t}}));function td(t,i){return ed(t.slice(),i)}function id(t,i){const e=ed(t,i);return e!==t&&sd(e,void 0,t.length,t),t}function ed(t,i){let e=t;const s=e.length;if(s<=1)return e;let n=new Array(s);for(let t=1;t<s;t*=2){sd(e,i,t,n);const s=e;e=n,n=s}return e}function sd(t,i,e,s){const n=t.length;let r=0;const o=2*e;let h,a,u,c,l;for(a=0;a<n;a+=o)for(u=a+e,h=u+e,u>n&&(u=n),h>n&&(h=n),c=a,l=u;;)if(c<u&&l<h)i&&i(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<h))break;s[r++]=t[l++]}}(r=qa||(qa={}))[r.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",r[r.LICENSE_ERROR=2e3]="LICENSE_ERROR",r[r.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",r[r.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",r[r.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",r[r.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",r[r.SOURCE_INVALID=3e3]="SOURCE_INVALID",r[r.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",r[r.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",r[r.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",r[r.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",r[r.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",r[r.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",r[r.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",r[r.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",r[r.MEDIA_ABORTED=5004]="MEDIA_ABORTED",r[r.NETWORK_ERROR=6e3]="NETWORK_ERROR",r[r.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",r[r.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",r[r.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",r[r.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",r[r.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",r[r.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",r[r.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",r[r.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",r[r.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",r[r.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",r[r.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",r[r.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",r[r.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",r[r.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",r[r.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",r[r.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",r[r.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",r[r.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",r[r.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",r[r.AD_ERROR=1e4]="AD_ERROR",r[r.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",r[r.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",r[r.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",r[r.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",r[r.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",r[r.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",r[r.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",r[r.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",function(t){t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE"}(kt||(kt={})),function(t){t.fromCode=function(i){const e=_.floor(i/1e3);if(e in t)return e;throw new b("Invalid error code: "+i)}}(kt||(kt={}));var nd={}.hasOwnProperty,rd={}.toString;function Ks(t){return null!=t}function Bn(t){return void 0===t}var tr=Array.isArray||function(t){return"[object Array]"===rd.call(t)};function Cu(t){return Vu(t)&&nd.call(t,"length")&&he(t.length)}function Vu(t){return"object"==typeof t&&null!==t}function od(t){return Vu(t)&&t.constructor&&t.constructor===w}function Sn(t){return"string"==typeof t}function tu(t){return"boolean"==typeof t}function Ci(t){return Ks(t)&&"function"==typeof t.then}function hd(t){return"[object Date]"===rd.call(t)}function he(t){return"number"==typeof t}function ad(t){return"function"==typeof t}function Oa(t){return ad(t)||Vu(t)}var ws,pu=9007199254740991,ud=2**-52;function Qh(t,i,e){return _.min(_.max(t,i),e)}function Jn(t,i,e){return t===i||_.abs(t-i)<=e}function Ya(t,i){if(t===i)return!0;const e=_.abs(t-i);if(e<ud)return!0;return e<_.max(_.abs(t),_.abs(i))*ud}function cd(t,i){return t%i+(t<0?i:0)}function ld(t){return t!=t}function dd(t,i){return t===i||ld(t)&&ld(i)}function fd(t,i){let e=t,s=i;for(;0!==s;){const t=e%s;e=s,s=t}return e<0?-e:e}function _d(t,i){return t.reduce(((t,e)=>t+i(e)),0)}!function(t){t[t.Zr=0]="Zr",t[t.Jf=1]="Jf",t[t.$f=-1]="$f"}(ws||(ws={}));var gd=(t,i)=>(0|t)-(0|i),wd=(t,i)=>t===i?0:t<i?-1:t>i?1:S(t)?S(i)?0:1:-1;function vd(t,i,e){return Jn(t,i,e)?0:wd(t,i)}var md=(t,i)=>Ya(t,i)?0:wd(t,i);var pd="function"==typeof Array.prototype.find?(t,i)=>t.find(i):(t,i)=>{const e=gt(t,i);return-1===e?void 0:t[e]},bo=pd,Ad="function"==typeof Array.prototype.findLast?(t,i)=>t.findLast(i):(t,i)=>{const e=yd(t,i);return-1===e?void 0:t[e]},ru=Ad,gt="function"==typeof Array.prototype.findIndex?(t,i)=>t.findIndex(i):(t,i)=>{for(let e=0;e<t.length;e+=1){if(i(t[e],e,t))return e}return-1},yd="function"==typeof Array.prototype.findLastIndex?(t,i)=>t.findLastIndex(i):(t,i)=>{for(let e=t.length-1;e>=0;e-=1){if(i(t[e],e,t))return e}return-1};function jn(t,i){const e=t.indexOf(i);return-1!==e&&(Ns(t,e),!0)}function Ns(t,i){0===i?t.shift():t.splice(i,1)}function Md(t,i){const e=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===i){n++,e.length-=1;break}e[s++]=t[n++]}for(;n<t.length;)e[s++]=t[n++];return e}function Ai(t,i){return-1!==t.indexOf(i)}function bd(t,i,e){if(t===i)return!0;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s+=1)if(!e(t[s],i[s]))return!1;return!0}function To(t){t.length=0}function Td(t,i){if(t.length!==i.length)return!1;for(const e of t)if(!Ai(i,e))return!1;return!0}Array.prototype.flat;var Pe="function"==typeof Array.prototype.flatMap?(t,i)=>t.flatMap(i):(t,i)=>{const e=[];for(let s=0;s<t.length;s++)e.push(...i(t[s],s));return e};function _u(t,i){return Nd(t,((t,e)=>wd(i(t),i(e))))}function Sd(t,i){return Id(t,((t,e)=>wd(i(t),i(e))))}function Nd(t,i){if(0!==t.length)return t.reduce(((t,e)=>i(t,e)<=0?t:e))}function Id(t,i){return Nd(t,((t,e)=>i(e,t)))}function Dd(t){return t.filter(((i,e)=>t.indexOf(i)===e))}function Ed(t,i){return Promise.all(t.map(i)).then((i=>t.filter(((t,e)=>i[e]))))}function kd(t,i,e){if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],i[s]))return!1;return!0}function Ld(){const t=w.create(null);return t.t_=void 0,delete t.t_,t}function Pu(){return new jd}function Gs(){return new Rd}function xd(t){const i=Pu();for(const e in t)nd.call(t,e)&&i.set(e,t[e]);return i}function Cd(t){const i=[];return t.forEach((t=>i.push(t))),i}var Od="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,jd=Od||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,i){this.index=0,this.data=t,this.selector=i,this.keys=w.keys(t)}}return class{get(t){return this.data[t]}set(t,i){return this.has(t)||this.size++,this.data[t]=i,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=Ld(),this.size=0}keys(){return new t(this.data,((t,i)=>i))}values(){return new t(this.data,((t,i)=>t[i]))}entries(){return new t(this.data,((t,i)=>[i,t[i]]))}forEach(t){for(const i in this.data)t(this.data[i],i)}constructor(){this.data=Ld(),this.size=0}}}();var Rd=Od||function(){class t{next(){const t=this.i_.next();return t.done?t:{value:this.e_(t.value),done:!1}}constructor(t,i){this.i_=t,this.e_=i}}return class{get size(){return this.mf.size}get(t){return this.mf.get(""+t)}set(t,i){return this.mf.set(""+t,i),this}has(t){return this.mf.has(""+t)}delete(t){return this.mf.delete(""+t)}clear(){this.mf.clear()}keys(){return new t(this.mf.keys(),(t=>Number(t)))}values(){return this.mf.values()}entries(){return new t(this.mf.entries(),(t=>{let[i,e]=t;return[Number(i),e]}))}forEach(t){this.mf.forEach(((i,e)=>{t(i,Number(e))}))}constructor(){this.mf=Pu()}}}();var Pd=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];g.apply(this,i)};(Pd.prototype=w.create(g.prototype)).constructor=Pd;var ra,tt=class extends Pd{get name(){return"BaseError"}constructor(t,i){super(),this.message=t||"Unknown error",this.cause=i,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}},zd=class{s_(){if(!this.n_&&!this.r_){this.n_=!0;for(const t of this.o_.slice())t();this.h_()}}h_(){if(!this.r_){this.r_=!0;for(const t of this.a_.slice())t();To(this.o_),To(this.a_)}}u_(t){this.r_||this.o_.push(t)}c_(t){this.r_||jn(this.o_,t)}l_(t){this.r_||this.a_.push(t)}d_(t){this.r_||jn(this.a_,t)}constructor(){this.n_=!1,this.r_=!1,this.o_=[],this.a_=[]}},Bd=class t{get f_(){return this.__}g_(){this.__.s_()}h_(){this.__.h_()}w_(t){const i=this.__;if(i.n_)return;if(t.n_)return void i.s_();if(i.r_||t.r_)return;const e=()=>{s(),i.s_()},s=()=>{t.c_(e),t.d_(s),i.c_(e),i.d_(s)};t.u_(e),t.l_(s),i.u_(e),i.l_(s)}v_(){const i=new t,e=new t,s=i.f_,n=e.f_,r=this.__,o=()=>{s.n_&&n.r_||n.n_&&s.r_?r.s_():s.r_&&n.r_&&r.h_()};s.u_(o),n.u_(o),s.l_(o),n.l_(o),i.w_(r),e.w_(r);return r.l_((()=>{s.c_(o),n.c_(o),s.d_(o),n.d_(o)})),[i,e]}constructor(){this.__=new zd}};var Br=()=>{},Ud=t=>t;function hu(t,i){let e=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=ra.m_();o-e>=i&&(t.apply(this,n),e=o)}}function Qd(t,i){let e=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=this;0!==e&&ra.p_(e),e=ra.A_((()=>{e=0,t.apply(o,n)}),i)}}function ei(t){let i;return()=>(void 0!==t&&(i=t(),t=void 0),i)}var Fh=class extends tt{get name(){return"AbortError"}constructor(t,i){super(t||"Aborted",i)}};function be(t){return t instanceof g&&"AbortError"===t.name}function Vr(t){if(t&&t.n_)throw new Fh}function me(t){if(be(t))throw t}function _t(t){if(!be(t))throw t}function Jr(t,i){return i?new Promise(((e,s)=>{if(i.n_)return t.catch(Br),s(new Fh);const n=()=>{i.c_(n),s(new Fh)};i.u_(n),t.then((t=>{i.c_(n),e(t)}),(t=>{i.c_(n),s(t)}))})):t}function Fd(t,i){return t.then((t=>(i.g_(),t)),(t=>{throw i.g_(),t}))}function at(t,i){const e=new Bd;return i&&e.w_(i),Fd(t(e.f_),e)}var Yd=Promise.resolve(),Gd="function"==typeof queueMicrotask?queueMicrotask:t=>{Yd.then(t)};function $r(t){t.then(Br,Br)}async function Wr(t){try{return await Promise.all(t)}catch(i){throw await Promise.all(t.map((t=>t.catch(Br)))),i}}function Si(t,i){return new Promise(((e,s)=>{if(void 0!==i&&i.n_)return void s(new Fh);const n=ra.A_((()=>{void 0!==i&&i.c_(r),e()}),t),r=()=>{ra.p_(n),s(new Fh)};void 0!==i&&i.u_(r)}))}function Vd(t,i){return at((e=>Promise.race([t,Si(i,e).then((()=>{throw new g("Timeout")}))])))}function Wd(t,i,e){if("function"==typeof e)e.call(t,i);else for(const s of e)s.call(t,i)}var rc,Mo=class{yn(t,i){if("function"==typeof i)if("string"==typeof t)this.y_(t,i);else for(const e of t)this.y_(e,i)}y_(t,i){const e=this.M_[t];void 0===e?this.M_[t]=i:"function"==typeof e?this.M_[t]=[e,i]:0===this.b_?e.push(i):this.M_[t]=e.concat(i)}T_(t){if("function"!=typeof t)return;const i=this.S_;void 0===i?this.S_=t:"function"==typeof i?this.S_=[i,t]:0===this.b_?i.push(t):this.S_=i.concat(t)}Vo(){this.M_=Ld(),this.S_=void 0}Co(t){this.b_++;const i=this.M_[t.type],e=this.S_;void 0!==i&&Wd(this.N_,t,i),void 0!==e&&Wd(this.N_,t,e),this.b_--}fn(t,i){if("function"==typeof i)if("string"==typeof t)this.I_(t,i);else for(const e of t)this.I_(e,i)}I_(t,i){const e=this.M_[t];void 0!==e&&("function"==typeof e?e===i&&(this.M_[t]=void 0):0===this.b_?jn(e,i):this.M_[t]=Md(e,i))}D_(t){if("string"==typeof t)this.M_[t]=void 0;else for(const i of t)this.M_[i]=void 0}E_(t){const i=this.S_;void 0!==i&&("function"==typeof i?i===t&&(this.S_=void 0):0===this.b_?jn(i,t):this.S_=Md(i,t))}k_(t,i){return new Promise(((e,s)=>{if(i&&i.n_)return s(new Fh);const n=t=>{o(),e(t)},r=()=>{o(),s(new Fh)},o=()=>{this.fn(t,n),i&&i.c_(r)};this.yn(t,n),i&&i.u_(r)}))}constructor(t){this.M_=Ld(),this.S_=void 0,this.b_=0,this.Ds=t=>{this.Co(t)},this.N_=null!=t?t:this}},bs=class extends Mo{Co(t){Gd((()=>{super.Co(t)}))}},B=class extends Mo{T_(t){super.T_(t)}E_(t){super.E_(t)}},Hd=class extends B{},Xd=class extends B{get ht(){return this.L_()}L_(){return this.x_.ht}C_(){return this.x_.C_()}get O_(){return this.j_()}j_(){return this.x_.O_}get R_(){return this.P_()}set R_(t){this.z_(t)}P_(){return this.x_.R_}z_(t){this.x_.R_=t}get bt(){return this.B_()}B_(){return this.x_.bt}get U_(){return this.Q_()}set U_(t){this.F_(t)}Q_(){return this.x_.U_}F_(t,i){this.x_.F_(t,i)}get ct(){return this.Td()}Td(){return this.x_.ct}get we(){return this.Y_()}Y_(){return this.x_.we}get G_(){return this.V_()}V_(){return this.x_.G_}get lt(){return this.W_()}get H_(){return this.X_()}W_(){return this.x_.lt}X_(){return this.x_.H_}get Z_(){return this.q_()}q_(){return this.x_.Z_}get K_(){return this.J_()}J_(){return this.x_.K_}get eg(){return this.rg()}rg(){return this.x_.eg}get og(){return this.hg()}set og(t){this.ag(t)}hg(){return this.x_.og}ag(t){this.x_.og=t}get cg(){return this.dg()}dg(){return this.x_.cg}get fg(){return this._g()}_g(){return this.x_.fg}get gg(){return this.wg()}set gg(t){this.vg(t)}wg(){return this.x_.gg}vg(t){this.x_.gg=t}get pg(){return this.Ag()}Ag(){return this.x_.pg}get yg(){return this.Mg()}set yg(t){this.Tg(t)}Mg(){return this.x_.yg}Tg(t){this.x_.yg=t}get Sg(){return this.Ng()}Ng(){return this.x_.Sg}get Ig(){return this.Dg()}Dg(){return this.x_.Ig}get Eg(){return this.Lg()}Lg(){return this.x_.Eg}Wa(){return this.x_.Wa()}ga(t,i){return this.x_.ga(t,i)}get nt(){return this.xg()}xg(){return this.x_.nt}get Cg(){return this.Og()}Og(){return this.x_.Cg}get rt(){return this.jg()}jg(){return this.x_.rt}get Rg(){return this.Pg()}Pg(){return this.x_.Rg}get zg(){return this.Bg()}set zg(t){this.Ug(t)}get Qg(){return this.Fg()}Fg(){return this.x_.Qg}Bg(){return this.x_.zg}Ug(t){this.x_.zg=t}get Yg(){return this.x_.Yg}set Yg(t){this.x_.Yg=t}Gg(){return this.x_.Gg()}Vg(){return this.x_.Vg()}ur(t){this.x_.ur(t)}ar(){this.x_.ar()}be(){this.x_.be()}Wg(){this.x_.Wg()}Hg(){this.x_.Hg()}Xg(){this.x_.Xg()}ge(){this.x_.ge()}Zg(){return this.x_.Zg()}qg(){return this.x_.qg()}Kg(){this.x_.Kg()}Jg(){this.x_.Jg()}tr(){return this.x_.tr()}$g(){this.x_.$g()}iw(){this.x_.iw()}ew(t){return this.x_.ew(t)}nw(t){return!1}async gn(){this.Vo(),await this.x_.gn()}constructor(t){super(),this.ow=t=>{this.nw(t)||this.Co(t)},this.x_=t,t.T_(this.ow)}};!function(t){t.hw="aw",t.uw="cw"}(rc||(rc={}));var Os=class{constructor(t,i=new Date){this.type=t,this.date=i}},os=class extends Os{get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}constructor(t,i){super(t,i),this.Xa=void 0}};function Zd(t){return Boolean(t&&t.va)}var ct,Oe=class extends os{constructor(t){super(t)}},Hn=class extends Os{constructor(t){super(t)}},qd=class extends Oe{fa(){return new Kd(this.Lt.va)}constructor(t){super(rc.hw),this.Lt=t}},Kd=class extends Hn{constructor(t){super("addtrack"),this.track=t}},Jd=class extends Oe{fa(){return new $d(this.Lt.va)}constructor(t){super(rc.uw),this.Lt=t}},$d=class extends Hn{constructor(t){super("removetrack"),this.track=t}};!function(t){t.lw="dw",t.fw="_w",t.gw="ww",t.mw="pw",t.Aw="yw",t.Mw="Tw",t.ra="Sw",t.Nw="Iw",t.Dw="Ew",t.Lw="Yn",t.xw="Cw",t.Ow="jw",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality"}(ct||(ct={}));var La=class extends Mo{get Rw(){return this.Pw}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}get U(){return this.Pw.length}zw(t){return this.Pw[t]}tt(t){return!(!t||Ai(this.Pw,t))&&(this.Pw.push(t),this.Xa&&this.Xa.push(t.va),t.yn(ct.ra,this.Ds),this.Co(new qd(t)),!0)}it(t){if(!t)return!1;const i=this.Pw.indexOf(t);return!(i<0)&&(Ns(this.Pw,i),this.Xa&&Ns(this.Xa,i),t.fn(ct.ra,this.Ds),this.Co(new Jd(t)),!0)}Bw(t){return Ai(this.Pw,t)}tr(){const t=this.Pw;for(let i=t.length-1;i>=0;i-=1)this.it(t[i])}gn(){this.tr(),this.Vo()}constructor(){super(),this.Pw=[],this.Xa=void 0}},uc=class extends Oe{fa(){return new tf(this.Lt.va)}constructor(t){super(ct.ra),this.Lt=t}},tf=class extends Hn{constructor(t){super("change"),this.track=t}},ef=class extends La{get Uw(){return this.Qw}set Uw(t){const i=this.Qw;if(t!==i){if(i){this.Fw(i);for(const e of i.Rw)t&&t.Bw(e)||this.it(e)}if(this.Qw=t,t){const i=[];for(const e of t.Rw)this.tt(e),this.Yw(e)&&i.push(e);this.Gw(t);for(const t of i)t.Co(new uc(t))}}}Gw(t){t.yn(rc.hw,this.Vw),t.yn(rc.uw,this.Ww)}Fw(t){t.fn(rc.hw,this.Vw),t.fn(rc.uw,this.Ww)}gn(t){!t&&this.Qw&&this.Qw.gn(),super.gn()}constructor(){super(),this.Qw=void 0,this.Vw=t=>{const i=t.Lt;this.tt(i)},this.Ww=t=>{const i=t.Lt;this.it(i)}}},sf=w.freeze||Ud;function nf(t,i,e){w.defineProperty(t,i,{writable:!1,enumerable:!0,value:e})}function rf(t){return sf(t)}function ro(t,i){for(const e of w.getOwnPropertyNames(i))w.defineProperty(t,e,w.getOwnPropertyDescriptor(i,e));return t}function Ca(t){if(od(t)){const i={};for(const e in t)nd.call(t,e)&&(i[e]=Ca(t[e]));return i}if(tr(t)){const i=new Array(t.length);for(let e=0;e<i.length;e++)e in t&&(i[e]=Ca(t[e]));return i}return t}function of(t,i){return t===i||!(!t||!i)&&(!(!Vu(t)||!Vu(i))&&(Cu(t)?!!Cu(i)&&function(t,i){const e=t.length,s=i.length;if(e!==s)return!1;for(let s=0;s<e;s+=1)if(!of(t[s],i[s]))return!1;return!0}(t,i):!Cu(i)&&function(t,i){const e=w.keys(t),s=w.keys(i);if(!e||!s||e.length!==s.length)return!1;for(const s of e)if(!nd.call(i,s)||!of(t[s],i[s]))return!1;return!0}(t,i)))}function hf(t,i){if(!Vu(t))return!1;for(const e of i)if(!(e in t))return!1;return!0}function af(t,i){return t.constructor===i.constructor}function uf(t){const i={};for(const e of w.keys(t)){const s=t[e];null!=s&&(i[e]=s)}return i}function cf(t){const i={};for(const e of w.keys(t)){const s=t[e];if(Cu(s)){const t=[];for(let i=0;i<s.length;i+=1){const e=s[i];if(null!=e){const i=Vu(e)?cf(e):e;t.push(i)}}i[e]=t}else null!=s&&(i[e]=Vu(s)?cf(s):s)}return i}function Ia(t){let i=t;if("string"==typeof i){if(i=i.toLowerCase(),"true"===i)return!0;if("false"===i)return!1}return Boolean(i)}function lt(t){return Ks(t)?Ia(t):void 0}function ji(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function lf(t){const i=ji(t);if(S(i))throw new g("Expected a valid number.");return i}function wo(t){return"string"==typeof t?t:""}function df(t,i){if(!Cu(t))return[];const e=0|t.length,s=new Array(e);for(let n=0;n<e;n++)s[n]=i(t[n]);return s}function Za(t,i){let e;return e=Cu(t)?df(t,i):i(t),e}var ff,_f=[rc.hw,rc.uw,ct.ra];function gf(t){let i;const e=t.Rw.map((t=>t.va));return e.item=i=>{const e=0|i,s=t.zw(e);return s&&s.va||void 0},e.addEventListener=(t,e)=>{i.yn(t,e)},e.removeEventListener=(t,e)=>{i.fn(t,e)},i=new bs(e),t.yn(_f,(t=>i.Co(t.va))),e}function wf(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function vf(){}function Mi(t){const i=[ct.Lw,ct.ra,ct.xw,ct.Ow,ct.QUALITY_UNAVAILABLE];let e;const s={get activeQuality(){return t.Hw&&t.Hw.va},get enabled(){return t.Rt},set enabled(i){t.Rt=Ia(i)},get id(){return t.o},get uid(){return t.Xw},get kind(){return t.zt},get label(){return t.kh},set label(i){t.kh=wo(i)},get accessibility(){var i,e;return null!=(e=null==(i=t.Zw)?void 0:i.map(wf))?e:[]},get language(){return t.gs},get qualities(){return t.qw.va},set targetQuality(i){let e;e=i?function(t,i){const e=[];for(const s of t.qw.Rw)for(const t of i)s.va===t&&e.push(s);return e}(t,tr(i)?i:[i]):[],e.length>0?t.Kw=e:t.Kw=void 0},get targetQuality(){if(t.Kw)return 1===t.Kw.length?t.Kw[0].va:t.Kw.map((t=>t.va))},addEventListener(t,i){const s=Za(t,wo);e.yn(s,i)},removeEventListener(t,i){const s=Za(t,wo);e.fn(s,i)}};return e=new bs(s),t.yn(i,(t=>e.Co(t.va))),w.defineProperty(s,"constructor",{value:vf}),s}function mf(){}function pf(t){const i=gf(t);return w.defineProperty(i,"constructor",{value:mf}),i}!function(t){t[t.Jw=0]="Jw",t[t.$w=1]="$w",t[t.rv=2]="rv",t[t.ov=3]="ov",t[t.hv=4]="hv",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.uv=7]="uv"}(ff||(ff={}));var yi,hi,ul=class extends ef{fa(){return pf(this)}Yw(t){return t.Rt}};function Af(t){if("string"==typeof t){const i=t.toLowerCase();switch(i){case"disabled":case"hidden":case"showing":return i}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}function yf(){}function $n(t){const i=[ct.ra,ct.Lw,ct.lw,ct.fw,ct.mw,ct.Aw,ct.gw,ct.Mw,ct.Nw,ct.Dw],e=[hi.ha];let s;const n={get kind(){return t.zt},get label(){return t.kh},set label(i){t.kh=wo(i)},get language(){return t.gs},get id(){return t.o},get uid(){return t.Xw},get inBandMetadataTrackDispatchType(){return t.fv},get mode(){return t._v},set mode(i){i!==yi.Jn&&i!==yi.vv&&i!==yi.Ch||t.mv(i)},get forced(){return Boolean(t.pv)},get accessibility(){var i,e;return null!=(e=null==(i=t.Zw)?void 0:i.map(wf))?e:[]},get type(){return t.Av},get readyState(){return t.Sg},get cues(){return t._v===yi.Ch?null:t.L.va},get activeCues(){return t._v===yi.Ch?null:t.q.va},get src(){return t.yv||""},addEventListener(t,i){const e=Za(t,wo);s.yn(e,i)},removeEventListener(t,i){const e=Za(t,wo);s.fn(e,i)}};return s=new bs(t),t.yn(i,(t=>s.Co(t.va))),t.yn(e,(t=>s.Co(t))),w.defineProperty(n,"constructor",{value:yf}),n}function Mf(){}function bf(t){const i=gf(t);return w.defineProperty(i,"constructor",{value:Mf}),i}!function(t){t.Ch="disabled",t.vv="hidden",t.Jn="showing"}(yi||(yi={})),(hi||(hi={})).ha="error";var Tf,$,Sf=class extends ef{fa(){return bf(this)}Yw(t){return t._v===yi.Jn}};!function(t){t.Mv="bv",t.Tv="Sv",t.Nv="contentprotectionerror",t.Iv="contentprotectionsuccess",t.Dv="currentsourcechange",t.Ev="destroy",t.Lv="durationchange",t.xv="emptied",t.Cv="encrypted",t.Ov="ended",t.Rv="Pv",t.zv="Bv",t.Uv="Qv",t.Fv="Yv",t.Gv="loadstart",t.Vv="manifestupdate",t.Wv="nosupportedrepresentationfound",t.Hv="offline",t.Xv="online",t.Sh="pause",t.jh="play",t.Zv="progress",t.qv="ratechange",t.Kv="representationchange",t.Jv="resize",t.$v="seeked",t.im="seeking",t.nm="segmentnotfound",t.hm="um",t.lm="dm",t.lo="sourcechange",t.fm="timeupdate",t._m="volumechange",t.gm="wm",t.vm="metricschange"}(Tf||(Tf={})),function(t){t.pm="canplay",t.Am="canplaythrough",t.ym="loadeddata",t.Mm="loadedmetadata",t.Nw="readystatechange",t.Tm="waiting",t.Sm="playing"}($||($={}));var Hs=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"],Zt=.92,pi=1.08,Nf=.25,If=class extends Mo{Nm(){this.Im(),this.Dm=ra.A_((()=>this.Em()),500)}Im(){void 0!==this.Dm&&(ra.p_(this.Dm),this.Dm=void 0)}get Lm(){return this.Le&&this.ho}get xm(){return this.Cm}get Om(){return this.jm}set Om(t){this.jm=t,this.Rm()}get Rt(){return this.Le}set Rt(t){this.Le=t,t?this.Cn():this.Zg()}Pm(t){this.zm.push(t),this.Rm()}Bm(t){jn(this.zm,t),this.Rm()}Rm(){this.Cm=this.Um(),this.ho&&this.Em()}Cn(){this.Le&&this.Qm&&(this.ho||this.Fm.yn(Tf.fm,this.Em),this.Nm(),this.ho=!0)}Zg(){this.ho&&(this.Im(),this.Fm.fn(Tf.fm,this.Em),this.Ym(1),this.ho=!1)}h_(){this.Zg(),this.Qo.fn($.Tm,this.Gm),this.Qo.fn($.Sm,this.Vm),this.Vo()}Ym(t){this.Fm.Hm.Wm||this.Qo.gg!==t&&(this.Qo.gg=t)}Um(){const t=this.Xm;var i;const e=[null!=(i=this.jm)?i:this.Zm,...this.zm],s=e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.minimumOffset)?e:0)}),t),n=e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.targetOffset)?e:0)}),s+Nf),r=e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.maximumOffset)?e:0)}),n+Nf);return{minimumOffset:s,targetOffset:n,maximumOffset:r,forceSeekOffset:e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.forceSeekOffset)?e:0)}),r+Nf),minimumPlaybackRate:Zt,maximumPlaybackRate:pi}}get qm(){return this.Qo.Km}constructor(t,i,e){super(),this.ho=!1,this.Le=!1,this.Qm=!1,this.Xm=0,this.Dm=void 0,this.zm=[],this.jm=void 0,this.Gm=()=>{const t=this.Fm.O_,i=this.Fm.U_,e=t.Jm(i);e&&(this.Xm=Qh(e.jn(0)-i,this.Xm,.5),this.Rm())},this.Vm=()=>{this.Qm=!0,this.Qo.fn($.Sm,this.Vm),this.Le&&this.Cn()},this.Em=()=>{this.Im(),this.Nm();const t=this.qm;if(!t)return;const i=this.$m();if(t>this.Cm.forceSeekOffset)return this.Co(new Os("latencyrecoveryseek")),void this.tp();const{minimumOffset:e,targetOffset:s,maximumOffset:n}=this.Cm,r=this.Fm.gg;i>n?this.Ym(this.Cm.maximumPlaybackRate):i<e&&!ra.Ys.ep?this.Ym(this.Cm.minimumPlaybackRate):(r>1&&i<s||r<1&&i>s)&&this.Ym(1)},this.Qo=t,this.Fm=i,this.Zm=e,this.Cm=e,this.Qo.yn($.Tm,this.Gm),this.Qo.yn($.Sm,this.Vm)}},Df=.25,Ef=400,kf={minimumOffset:.2,targetOffset:.45,maximumOffset:.7,forceSeekOffset:3,minimumPlaybackRate:Zt,maximumPlaybackRate:pi},Lf={minimumOffset:.4,targetOffset:.65,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:Zt,maximumPlaybackRate:pi},xf={minimumOffset:.4,targetOffset:.7,maximumOffset:.9,forceSeekOffset:3,minimumPlaybackRate:Zt,maximumPlaybackRate:pi},Cf={minimumOffset:.2,targetOffset:.45,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:Zt,maximumPlaybackRate:pi},Of={minimumOffset:.5,targetOffset:1.125,maximumOffset:1.75,forceSeekOffset:2.55,minimumPlaybackRate:Zt,maximumPlaybackRate:pi};function jf(t){if(ra.np.sp){const i=(Ef+250)/1e3,e=_.max(i,t.minimumOffset),s=_.max(e+Df,t.targetOffset),n=_.max(s+Df,t.maximumOffset);return{minimumOffset:e,targetOffset:s,maximumOffset:n,forceSeekOffset:_.max(n+Df,t.forceSeekOffset),minimumPlaybackRate:Zt,maximumPlaybackRate:pi}}return t}function Qs(){let t;return t=ra.Ys.ep?Cf:ra.Ys.rp?Lf:ra.Ys.op?"Android"===ra.np.hp?xf:kf:Of,ra.np.sp?jf(t):t}function Rf(t){return{minimumOffset:t.windowStart,maximumOffset:t.windowEnd,targetOffset:t.target,forceSeekOffset:t.maxOffset,minimumPlaybackRate:Zt,maximumPlaybackRate:pi}}function Pf(t){return{windowStart:t.minimumOffset,windowEnd:t.maximumOffset,target:t.targetOffset,maxOffset:t.forceSeekOffset}}var zf=class extends If{$m(){const t=this.Fm.O_;return 0===t.U?0:t.jn(t.U-1)-this.Fm.U_}tp(){this.Qo.tp()}Um(){return jf(super.Um())}constructor(t,i,e){super(t,i,e)}},Bf=class extends Mo{get ap(){return Pf(Qs())}get cp(){}get Km(){}get lp(){}get dp(){return!1}get fp(){}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=Uf(this)}tp(){}constructor(...t){super(...t),this._p=void 0}};function Uf(t){return{goLive:()=>t.tp(),get isLive(){return t.dp},get currentServerLiveTime(){return t.cp},get currentLatency(){return t.Km},get latencies(){return t.lp},get latency(){return t.ap},set latency(i){if(!function(t){if(!Vu(t))return!1;const i=t;return"number"==typeof i.target&&"number"==typeof i.windowEnd&&"number"==typeof i.windowStart&&"number"==typeof i.maxOffset&&(i.windowStart>=0&&i.windowStart<=i.target&&i.target<=i.windowEnd&&i.maxOffset>=i.windowEnd)}(i))throw new g("Invalid latency configuration");t._p=i},get manifest(){return t.fp},addEventListener(i,e){t.yn(Ff(i),e)},removeEventListener(i,e){t.fn(Ff(i),e)}}}var Qf=["golive","latencyrecoveryseek"];function Ff(t){const i=Za(t,wo);return(Sn(i)?[i]:i).filter((t=>Ai(Qf,t)))}var Yf=class extends Mo{set Uw(t){const i=this.Qw;t!==i&&(i&&this.Fw(i),t&&this.Gw(t),this.Qw=t,this.Qw&&(this.Qw._p=this.gp))}get Uw(){return this.Qw}get va(){return this.Xa||(this.Xa=Uf(this)),this.Xa}Gw(t){t.yn(Qf,this.Ds)}Fw(t){t.fn(Qf,this.Ds)}tp(){var t;null==(t=this.Qw)||t.tp()}get cp(){var t;return null==(t=this.Qw)?void 0:t.cp}get Km(){var t;return null==(t=this.Qw)?void 0:t.Km}get lp(){var t;return null==(t=this.Qw)?void 0:t.lp}get dp(){return!!this.Qw&&this.Qw.dp}get ap(){return this.Qw?this.Qw.ap:null!=(t=this.gp)?t:Pf(Qs());var t}get _p(){return this.Qw?this.Qw._p:this.gp}set _p(t){this.Qw&&(this.Qw._p=t),this.gp=t}get fp(){var t;return null==(t=this.Qw)?void 0:t.fp}gn(){this.Vo(),this.Qw&&this.Fw(this.Qw),this.Qw=void 0}constructor(){super(),this.Qw=void 0,this.Xa=void 0,this.gp=void 0,this.Qw=void 0}};function ol(){return ol=w.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)w.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},ol.apply(this,arguments)}var Gf="function"==typeof String.prototype.replaceAll?(t,i,e)=>t.replaceAll(i,e):(t,i,e)=>t.split(i).join(e);function $i(t,i){return Ks(t)&&-1!==t.indexOf(i)}var I="function"==typeof String.prototype.startsWith?(t,i)=>Ks(t)&&t.startsWith(i):(t,i)=>Ks(t)&&t.substr(0,i.length)===i,el="function"==typeof String.prototype.endsWith?(t,i)=>Ks(t)&&t.endsWith(i):(t,i)=>Ks(t)&&t.substr(t.length-i.length,i.length)===i;function Da(t,i){return t.length===i.length&&t.toUpperCase()===i.toUpperCase()}var Vf="function"==typeof String.prototype.repeat?(t,i)=>t.repeat(i):(t,i)=>{let e=0|i;if(0===t.length||0===e)return"";let s=t,n="";for(;1==(1&e)&&(n+=s),e>>>=1,0!==e;)s+=s;return n},Aa="function"==typeof String.prototype.padStart?(t,i,e)=>(void 0===e&&(e=" "),t.padStart(i,e)):(t,i,e)=>{void 0===e&&(e=" ");let s=e;const n=(0|i)-t.length;return n<=0?t:(n>s.length&&(s+=Vf(s,n/s.length)),s.slice(0,n)+t)},Wf=(String.prototype.padEnd,16384),Hf="function"==typeof String.fromCodePoint?t=>t.length<=Wf?String.fromCodePoint(...t):Zf(t,String.fromCodePoint):t=>{const i=[];for(let e of t)e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e);return Xf(i)};function Xf(t){return t.length<=Wf?String.fromCharCode(...t):Zf(t,String.fromCharCode)}function Zf(t,i){const e=[];for(let s=0;s<t.length;s+=Wf)e.push(i(...t.slice(s,s+Wf)));return e.join("")}function qf(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}function qn(t,i){const e=ra.Dh(t);return Kf(e,i),e.toString()}function Kf(t,i){for(const e of w.keys(i))t.searchParams.set(e,i[e])}function fi(t,i){let e=ra.wp(t);return i&&!el(e,"/")&&(e+="/"),e}var Jf=/cache:(.+)?(?=&|$)/,$f="http://webcache.googleusercontent.com/search?q=cache:";function t_(t){if(!I(t,$f))return"";const i=ra.Dh(t).search.match(Jf);return i&&i.length>1?i[1]:""}function i_(t){return ra.Dh(".",t)}var e_,ba,Pl,s_="8E80B9CE";function n_(t){return{appID:t&&t.appID?wo(t.appID):s_}}function r_(t){if(null!==t)return t}function o_(t){const i={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:r_(t.streamActivityMonitorID),adTagParameters:Vu(t.adTagParameters)?t.adTagParameters:{},authToken:r_(t.authToken),omidAccessModeRules:r_(t.omidAccessModeRules)};if("vod"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.videoID&&i.contentSourceID)}(t)){const e=t.videoID,s=t.contentSourceID;return e?s?ol({},i,{availabilityType:"vod",videoID:e,contentSourceID:s}):void ra.vp("A VOD DAI configuration was provided without valid contentSourceID which is required."):void ra.vp("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.assetKey)}(t)){const e=t.assetKey;return e?ol({},i,{availabilityType:"live",assetKey:e}):void ra.vp("A Live DAI configuration was provided without valid assetKey which is required.")}ra.vp("A DAI configuration was provided without a valid availabilityType which is required.")}function h_(t){switch(t.integration){case"google-dai":return o_(t);case"imagine":return function(t){return{integration:t.integration}}(t);default:return ol({},t,{integration:String(t.integration)})}}!function(t){t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled"}(e_||(e_={})),function(t){t.mp="",t.pp="anonymous",t.Ap="use-credentials"}(ba||(ba={})),function(t){t.yp="application/dash+xml",t.Mp="application/vnd.apple.mpegurl",t.bp="application/x-mpegurl",t.Tp="video/mp4",t.Sp="application/vnd.theoplayer.hesp+json",t.Np="application/vnd.theo.hesp+json",t.Ip="millicast"}(Pl||(Pl={}));var ho,na,lu="titanium",sc="conax",a_="ezdrm",u_="irdeto",c_="vudrm",l_="verimatrix",Ru="keyos",Ie="drmtoday",d_="expressplay",nc="azure",je="xstream",f_="vimond",__="axinom",g_="uplynk",w_="comcast",v_="custom";function m_(t,i){if(null==t)return{};var e,s,n={},r=w.keys(t);for(s=0;s<r.length;s++)e=r[s],i.indexOf(e)>=0||(n[e]=t[e]);return n}function p_(t){return Ks(t.token&&t.deviceId)}function A_(t){var i;const e=null==(i=t.fairplay)?void 0:i.headers;return void 0!==e&&Ks(e.PreAuthorization)}function y_(t){const i=t;return p_(i)&&""!==i.token&&""!==i.deviceId&&!A_(i)}!function(t){t.Dp="playready",t.Ep="widevine",t.kp="fairplay",t.Lp="clearkey",t.xp="aes128"}(ho||(ho={})),function(t){t.Cp=!1,t.Op=!1,t.jp=!1,t.Rp=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.Pp=!1,t.zp=!1,t.LOG_LCEVC_DETAILS=!1}(na||(na={}));var ao=class extends tt{get name(){return"THEOplayerError"}get category(){return kt.fromCode(this.code)}constructor(t,i,e){super(i,e),this.code=t}};function M_(t,i){return t instanceof ao?t:t instanceof g?new ao(i,t.message,t):new ao(i,String(t))}var ss=class extends ao{get name(){return"ContentProtectionError"}constructor(t,i,e,s,n,r,o,h){super(t,i,e),this.url=s,this.status=n,this.statusText=r,this.response=o,this.systemCode=h}};var Iu,b_=class{get Bp(){return this.Up}get Qp(){return this.Fp}Yp(t){return function(t){const i=t.onCertificateRequest;if(void 0!==i&&"function"!=typeof i)throw new b("ContentProtectionIntegration.onCertificateRequest is not a function.");const e=t.onCertificateResponse;if(void 0!==e&&"function"!=typeof e)throw new b("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new b("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new b("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new b("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.Gp.build(t))}constructor(t,i,e){this.Up=t,this.Fp=i,this.Gp=e}};!function(t){t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED"}(Iu||(Iu={}));var T_,cc=class{registerContentProtectionIntegration(t,i,e){switch(this.Vp(t,i,e)){case Iu.FAILED:throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+i+".");case Iu.OVERRIDDEN:{const e=Aw(i);ra.vp("Warning: Overwriting an earlier registered integration for "+t+" and "+e+".");break}case Iu.SUCCEEDED:Aw(i);0;break}}Vp(t,i,e){const s=Aw(i);if(!s)return Iu.FAILED;let n=Iu.SUCCEEDED;for(const i of this.Wp.slice())i.Bp===t&&i.Qp===s&&(n=Iu.OVERRIDDEN,jn(this.Wp,i));return this.Wp.push(new b_(t,s,e)),n}Hp(t,i){return void 0!==this.Xp(t,i)}Zp(t,i,e){const s=this.Xp(t,i);if(!s)throw g("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+i);return s.Yp(e)}Xp(t,i){for(const e of this.Wp)if(e.Bp===t&&(!i||e.Qp===i))return e}constructor(){this.Wp=[]}};cc.qp=new cc,function(t){t.Dp="9a04f079-9840-4286-ab92-e65be0885f95",t.Ep="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.Lp="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.kp="94ce86fb-07ff-4f43-adb8-93d2fa968ca2"}(T_||(T_={}));var X,S_,Dn,Fs,N_,I_="urn:mpeg:dash:mp4protection:2011",D_="cenc",E_="sinf",k_="skd",L_="9a04f079-9840-4286-ab92-e65be0885f95",du="urn:uuid:"+L_,Fu="com.microsoft.playready",x_="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",ie="urn:uuid:"+x_,C_="com.widevine.alpha",O_="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",j_="urn:uuid:"+O_,R_="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Bt="urn:uuid:"+R_,P_="com.apple.fps.1_0",z_="com.apple.streamingkeydelivery",B_="identity";!function(t){t.Kp="moov",t.Jp="mvhd",t.$p="trak",t.tA="tkhd",t.iA="mdia",t.eA="mdhd",t.sA="hdlr",t.nA="minf",t.rA="stbl",t.oA="stsd",t.hA="stsc",t.aA="mvex",t.uA="trex",t.cA="avc1",t.lA="avcC",t.dA="hev1",t.fA="hvc1",t._A="hvcC",t.gA="vp09",t.wA="vpcC",t.vA="av01",t.mA="av1C",t.pA="colr",t.AA="pasp",t.yA="mp4a",t.MA="esds",t.bA="fLaC",t.TA="dfLa",t.SA="wvtt",t.NA="vttC",t.IA="vlab",t.DA="enca",t.EA="encv",t.kA="moof",t.LA="mfhd",t.xA="traf",t.CA="tfhd",t.OA="trun",t.jA="tfdt",t.RA="senc",t.PA="mdat",t.zA="pssh",t.BA="emsg",t.UA="sidx",t.QA="styp",t.FA="ftyp",t.YA="sinf",t.GA="frma"}(X||(X={})),function(t){t.VA="vide",t.WA="soun",t.HA="subt",t.XA="hint",t.ZA="meta",t.qA="auxv"}(S_||(S_={})),function(t){t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof"}(Dn||(Dn={})),function(t){t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF"}(Fs||(Fs={})),function(t){t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT"}(N_||(N_={}));var $u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),U_=16383,Q_=/[\t\n\f\r ]/g;function F_(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:Y_()}function Y_(){throw new g("Invalid base64 input")}function $s(t){let i=t;Q_.test(i)&&(i=i.replace(Q_,""));let e=i.length;e%4==0&&e>=1&&"="===i[e-1]&&(e>=2&&"="===i[e-2]?e-=2:e-=1,i=i.substr(0,e));const s=e%4;if(1===s)return Y_();const n=0===s?0:4-s,r=new j(function(t,i){return 3*(t+i)/4-i}(e,n)),o=n>0?e-4:e;let h,a=0,u=0;for(;a<o;a+=4)h=F_(i.charCodeAt(a))<<18|F_(i.charCodeAt(a+1))<<12|F_(i.charCodeAt(a+2))<<6|F_(i.charCodeAt(a+3)),r[u++]=h>>16&255,r[u++]=h>>8&255,r[u++]=255&h;return 2===n?(h=F_(i.charCodeAt(a))<<2|F_(i.charCodeAt(a+1))>>4,r[u++]=255&h):1===n&&(h=F_(i.charCodeAt(a))<<10|F_(i.charCodeAt(a+1))<<4|F_(i.charCodeAt(a+2))>>2,r[u++]=h>>8&255,r[u++]=255&h),r}function G_(t,i,e){return $u[t>>2]+$u[(3&t)<<4|i>>4]+$u[(15&i)<<2|e>>6]+$u[63&e]}function V_(t,i,e){const s=[];for(let n=i;n<e;n+=3)s.push(G_(t[n],t[n+1],t[n+2]));return s.join("")}function dn(t){const i=t.length,e=i%3,s=[],n=i-e;for(let i=0;i<n;i+=U_)s.push(V_(t,i,_.min(n,i+U_)));if(1===e){const e=t[i-1];s.push($u[e>>2]+$u[(3&e)<<4]+"==")}else if(2===e){const e=t[i-2],n=t[i-1];s.push($u[e>>2]+$u[(3&e)<<4|n>>4]+$u[(15&n)<<2]+"=")}return s.join("")}function W_(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}var H_=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],X_=ArrayBuffer.isView||(t=>t&&Ai(H_,rd.call(t)));function Ln(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;return Z_(new j(t),new j(i))}function Z_(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;for(let e=0;e<t.length;e+=1)if(t[e]!==i[e])return!1;return!0}function M(t){const i=t.reduce(((t,i)=>t+i.byteLength),0);return q_(t,i)}function q_(t,i){const e=new j(i);let s=0;for(const i of t)e.set(i,s),s+=i.byteLength;return e}function K_(t,i,e){const s=new j(t.byteLength+i.byteLength),n=ci(t,0,e),r=ci(t,e);return s.set(n),s.set(i,e),s.set(r,e+i.byteLength),s}function J_(t){return $s(t).buffer}function $_(t){return dn(new j(t))}function Vn(t){return dn(Gn(t))}function tg(t,i){const e=i.Ku,s=t.getUint8(e>>3),n=1<<7-(7&e);return i.KA(1),(s&n)===n?1:0}function Ve(t,i,e){let s=0;for(let n=0;n<e;n++)s=2*s+tg(t,i);return s}var ig=class t{get Ku(){return this.Zu}KA(t){this.Zu+=t}JA(t){this.Zu=t}$A(){return new t(this.Ku)}constructor(t=0){this.Zu=t}};var eg=_.clz32||function(t){let i=32,e=t>>16;return e&&(i-=16,t=e),e=t>>8,e&&(i-=8,t=e),e=t>>4,e&&(i-=4,t=e),e=t>>2,e&&(i-=2,t=e),e=t>>1,e?i-2:i-t},Rs=null;try{Rs=new WebAssembly.Instance(new WebAssembly.Module(new j([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(r){}function eu(t,i,e){this.low=0|t,this.high=0|i,this.unsigned=!!e}function nt(t){return!0===(t&&t.iy)}function sg(t){var i=_.clz32(t&-t);return t?31-i:i}eu.prototype.iy,w.defineProperty(eu.prototype,"iy",{value:!0}),eu.isLong=nt;var ng={},rg={};function Be(t,i){var e,s,n;return i?(n=0<=(t>>>=0)&&t<256)&&(s=rg[t])?s:(e=se(t,0,!0),n&&(rg[t]=e),e):(n=-128<=(t|=0)&&t<128)&&(s=ng[t])?s:(e=se(t,t<0?-1:0,!1),n&&(ng[t]=e),e)}function ge(t,i){if(S(t))return i?fg:dg;if(i){if(t<0)return fg;if(t>=ug)return mg}else{if(t<=-cg)return Li;if(t+1>=cg)return vg}return t<0?ge(-t,i).neg():se(t%hc|0,t/hc|0,i)}function se(t,i,e){return new eu(t,i,e)}eu.fromInt=Be,eu.fromNumber=ge,eu.fromBits=se;var og=_.pow;function hg(t,i,e){if(0===t.length)throw g("empty string");if("number"==typeof i?(e=i,i=!1):i=!!i,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i?fg:dg;if((e=e||10)<2||36<e)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw g("interior hyphen");if(0===s)return hg(t.substring(1),i,e).neg();for(var n=ge(og(e,8)),r=dg,o=0;o<t.length;o+=8){var h=_.min(8,t.length-o),a=x(t.substring(o,o+h),e);if(h<8){var u=ge(og(e,h));r=r.mul(u).add(ge(a))}else r=(r=r.mul(n)).add(ge(a))}return r.unsigned=i,r}function ag(t,i){return"number"==typeof t?ge(t,i):"string"==typeof t?hg(t,i):se(t.low,t.high,"boolean"==typeof i?i:t.unsigned)}eu.fromString=hg,eu.fromValue=ag;var hc=4294967296,ug=hc*hc,cg=ug/2,lg=Be(1<<24),dg=Be(0);eu.ZERO=dg;var fg=Be(0,!0);eu.UZERO=fg;var _g=Be(1);eu.ONE=_g;var gg=Be(1,!0);eu.UONE=gg;var wg=Be(-1);eu.NEG_ONE=wg;var vg=se(-1,2147483647,!1);eu.MAX_VALUE=vg;var mg=se(-1,-1,!0);eu.MAX_UNSIGNED_VALUE=mg;var Li=se(0,-2147483648,!1);eu.MIN_VALUE=Li;var $t=eu.prototype;$t.toInt=function(){return this.unsigned?this.low>>>0:this.low},$t.toNumber=function(){return this.unsigned?(this.high>>>0)*hc+(this.low>>>0):this.high*hc+(this.low>>>0)},$t.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Li)){var i=ge(t),e=this.div(i),s=e.mul(i).sub(this);return e.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=ge(og(t,6),this.unsigned),r=this,o="";;){var h=r.div(n),a=(r.sub(h.mul(n)).toInt()>>>0).toString(t);if((r=h).isZero())return a+o;for(;a.length<6;)a="0"+a;o=""+a+o}},$t.getHighBits=function(){return this.high},$t.getHighBitsUnsigned=function(){return this.high>>>0},$t.getLowBits=function(){return this.low},$t.getLowBitsUnsigned=function(){return this.low>>>0},$t.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Li)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&0==(t&1<<i);i--);return 0!=this.high?i+33:i+1},$t.isZero=function(){return 0===this.high&&0===this.low},$t.eqz=$t.isZero,$t.isNegative=function(){return!this.unsigned&&this.high<0},$t.isPositive=function(){return this.unsigned||this.high>=0},$t.isOdd=function(){return 1==(1&this.low)},$t.isEven=function(){return 0==(1&this.low)},$t.equals=function(t){return nt(t)||(t=ag(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},$t.eq=$t.equals,$t.notEquals=function(t){return!this.eq(t)},$t.neq=$t.notEquals,$t.ne=$t.notEquals,$t.lessThan=function(t){return this.comp(t)<0},$t.lt=$t.lessThan,$t.lessThanOrEqual=function(t){return this.comp(t)<=0},$t.lte=$t.lessThanOrEqual,$t.le=$t.lessThanOrEqual,$t.greaterThan=function(t){return this.comp(t)>0},$t.gt=$t.greaterThan,$t.greaterThanOrEqual=function(t){return this.comp(t)>=0},$t.gte=$t.greaterThanOrEqual,$t.ge=$t.greaterThanOrEqual,$t.compare=function(t){if(nt(t)||(t=ag(t)),this.eq(t))return 0;var i=this.isNegative(),e=t.isNegative();return i&&!e?-1:!i&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},$t.comp=$t.compare,$t.negate=function(){return!this.unsigned&&this.eq(Li)?Li:this.not().add(_g)},$t.neg=$t.negate,$t.add=function(t){nt(t)||(t=ag(t));var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+h)>>>16,a+=(u+=e+o)>>>16,a+=i+r,se((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},$t.subtract=function(t){return nt(t)||(t=ag(t)),this.add(t.neg())},$t.sub=$t.subtract,$t.multiply=function(t){if(this.isZero())return this;if(nt(t)||(t=ag(t)),Rs)return se(Rs.mul(this.low,this.high,t.low,t.high),Rs.get_high(),this.unsigned);if(t.isZero())return this.unsigned?fg:dg;if(this.eq(Li))return t.isOdd()?Li:dg;if(t.eq(Li))return this.isOdd()?Li:dg;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(lg)&&t.lt(lg))return ge(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*h)>>>16,u+=(c+=e*a)>>>16,c&=65535,u+=(c+=s*h)>>>16,c&=65535,u+=(c+=n*o)>>>16,u+=i*a+e*h+s*o+n*r,se((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},$t.mul=$t.multiply,$t.divide=function(t){if(nt(t)||(t=ag(t)),t.isZero())throw g("division by zero");var i,e,s;if(Rs)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?se((this.unsigned?Rs.div_u:Rs.div_s)(this.low,this.high,t.low,t.high),Rs.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?fg:dg;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return fg;if(t.gt(this.shru(1)))return gg;s=fg}else{if(this.eq(Li))return t.eq(_g)||t.eq(wg)?Li:t.eq(Li)?_g:(i=this.shr(1).div(t).shl(1)).eq(dg)?t.isNegative()?_g:wg:(e=this.sub(t.mul(i)),s=i.add(e.div(t)));if(t.eq(Li))return this.unsigned?fg:dg;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=dg}for(e=this;e.gte(t);){i=_.max(1,_.floor(e.toNumber()/t.toNumber()));for(var n=_.ceil(_.log(i)/_.LN2),r=n<=48?1:og(2,n-48),o=ge(i),h=o.mul(t);h.isNegative()||h.gt(e);)h=(o=ge(i-=r,this.unsigned)).mul(t);o.isZero()&&(o=_g),s=s.add(o),e=e.sub(h)}return s},$t.div=$t.divide,$t.modulo=function(t){return nt(t)||(t=ag(t)),Rs?se((this.unsigned?Rs.rem_u:Rs.rem_s)(this.low,this.high,t.low,t.high),Rs.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},$t.mod=$t.modulo,$t.rem=$t.modulo,$t.not=function(){return se(~this.low,~this.high,this.unsigned)},$t.countLeadingZeros=function(){return this.high?_.clz32(this.high):_.clz32(this.low)+32},$t.clz=$t.countLeadingZeros,$t.countTrailingZeros=function(){return this.low?sg(this.low):sg(this.high)+32},$t.ctz=$t.countTrailingZeros,$t.and=function(t){return nt(t)||(t=ag(t)),se(this.low&t.low,this.high&t.high,this.unsigned)},$t.or=function(t){return nt(t)||(t=ag(t)),se(this.low|t.low,this.high|t.high,this.unsigned)},$t.xor=function(t){return nt(t)||(t=ag(t)),se(this.low^t.low,this.high^t.high,this.unsigned)},$t.shiftLeft=function(t){return nt(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?se(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):se(0,this.low<<t-32,this.unsigned)},$t.shl=$t.shiftLeft,$t.shiftRight=function(t){return nt(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?se(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):se(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},$t.shr=$t.shiftRight,$t.shiftRightUnsigned=function(t){return nt(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?se(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):se(32===t?this.high:this.high>>>t-32,0,this.unsigned)},$t.shru=$t.shiftRightUnsigned,$t.shr_u=$t.shiftRightUnsigned,$t.rotateLeft=function(t){var i;return nt(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?se(this.high,this.low,this.unsigned):t<32?(i=32-t,se(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)):(i=32-(t-=32),se(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned))},$t.rotl=$t.rotateLeft,$t.rotateRight=function(t){var i;return nt(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?se(this.high,this.low,this.unsigned):t<32?(i=32-t,se(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)):(i=32-(t-=32),se(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned))},$t.rotr=$t.rotateRight,$t.toSigned=function(){return this.unsigned?se(this.low,this.high,!1):this},$t.toUnsigned=function(){return this.unsigned?this:se(this.low,this.high,!0)},$t.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},$t.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},$t.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},eu.fromBytes=function(t,i,e){return e?eu.fromBytesLE(t,i):eu.fromBytesBE(t,i)},eu.fromBytesLE=function(t,i){return new eu(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},eu.fromBytesBE=function(t,i){return new eu(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)};var ii=eu;function pg(t,i){return t.lessThan(i)?t:i}function Ag(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function yg(t,i){return t>>i&63|128}function Mg(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(Ag(t),i.push(t>>12&15|224),i.push(yg(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(yg(t,12)),i.push(yg(t,6))),i.push(63&t|128)):i.push(t)}function oc(t,i){if(i.Ku>=t.length)throw new g("Invalid byte index");const e=255&t[i.Ku];if(i.KA(1),128==(192&e))return 63&e;throw new g("Invalid continuation byte")}function bg(t,i){const e=i.Ku;if(e>t.length)throw new g("Invalid byte index");if(e===t.length)return!1;const s=255&t[e];if(i.KA(1),0==(128&s))return s;if(192==(224&s)){const e=(31&s)<<6|oc(t,i);if(e>=128)return e;throw new g("Invalid continuation byte")}if(224==(240&s)){const e=(15&s)<<12|oc(t,i)<<6|oc(t,i);if(e>=2048)return Ag(e),e;throw new g("Invalid continuation byte")}if(240==(248&s)){const e=(7&s)<<18|oc(t,i)<<12|oc(t,i)<<6|oc(t,i);if(e>=65536&&e<=1114111)return e}throw new g("Invalid UTF-8 detected")}var Tg=65279;var Sg=[128,64,32,16,8,4,2,1],Ng=class{ey(t){return Ig(this.sy,t)}constructor(t){this.sy=t}};function Ig(t,i){return(t&i)===i}function Vc(t,i){return Ig(t,Sg[i])}function ta(t,i){const e=t.getUint8(i.Ku);return i.KA(1),e}function Dg(t,i,e){t.setUint8(i.Ku,e),i.KA(1)}function Eg(t,i,e){const s=ci(js(t),i.Ku,i.Ku+e);return i.KA(s.byteLength),s}function kg(t,i,e){js(t).set(js(e),i.Ku),i.KA(e.byteLength)}function Lg(t,i,e){return i.Ku+e<=t.byteLength}function xg(t,i,e,s){return void 0===s&&(s=!1),s?function(t,i,e){let s=0,n=1;for(let r=0;r<e;r++)s+=ta(t,i)*n,n*=256;return s}(t,i,e):function(t,i,e){let s=0;for(let n=0;n<e;n++)s=256*s+ta(t,i);return s}(t,i,e)}function Cg(t,i){const e=t.getUint8(i.Ku);return i.KA(1),e}function xi(t,i,e){void 0===e&&(e=!1);const s=t.getUint16(i.Ku,e);return i.KA(2),s}function Og(t,i,e,s){void 0===s&&(s=!1),t.setUint16(i.Ku,e,s),i.KA(2)}function es(t,i,e){void 0===e&&(e=!1);const s=t.getUint32(i.Ku,e);return i.KA(4),s}function tc(t,i,e,s){void 0===s&&(s=!1),t.setUint32(i.Ku,e,s),i.KA(4)}function qi(t,i,e){void 0===e&&(e=!1);const s=es(t,i,e),n=es(t,i,e),r=e?n:s,o=e?s:n;return ii.fromBits(o,r,!0)}function jg(t,i,e,s){void 0===s&&(s=!1);const n=e.getHighBitsUnsigned(),r=e.getLowBitsUnsigned(),o=s?n:r;tc(t,i,s?r:n,s),tc(t,i,o,s)}function Rg(t,i){return ve(t,i)}function Pg(t,i,e){return Xf(ew(Eg(t,i,e)))}function zg(t,i){const e=ta(t,i);let s;return 0==(128&e)?s=e:192==(224&e)?s=64*(31&e)+(63&ta(t,i)):224==(240&e)?s=4096*(15&e)+64*(63&ta(t,i))+(63&ta(t,i)):240==(248&e)&&(s=262144*(7&e)+4096*(63&ta(t,i))+64*(63&ta(t,i))+(63&ta(t,i))),s}function ve(t,i){return Bg(t,i,!0)}function Bg(t,i,e){const s=[];for(;i.Ku<t.byteLength;){const n=ta(t,i);if(e&&!n)break;s.push(n)}return Xf(s)}function Ug(t,i,e){const s=e.length;for(let n=0;n<s;n+=1){Dg(t,i,e.charCodeAt(n))}}function Qg(t,i){if(!(i.Ku+2<=t.byteLength))return;const e=t.getUint8(i.Ku),s=t.getUint8(i.Ku+1);return(254!==e||255!==s)&&(255===e&&254===s||void 0)}function Fg(t,i){const e=Qg(t,i);return void 0!==e&&i.KA(2),Yg(t,i,!0===e)}function Yg(t,i,e){return void 0===e&&(e=!1),Gg(t,i,e,!0)}function Gg(t,i,e,s){const n=[];for(;i.Ku+2<=t.byteLength;){const r=xi(t,i,e);if(s&&!r)break;n.push(r)}return Xf(n)}function Vg(t,i,e,s){void 0===s&&(s=!1);const n=e.length;for(let r=0;r<n;r+=1){Og(t,i,e.charCodeAt(r),s)}}function Wg(t){return Bg(vh(t),new Bi,!1)}function Gn(t){const i=new j(t.length);return Ug(vh(i),new Bi,t),i}function Hg(t,i){return void 0===i&&(i=!1),Gg(vh(t),new Bi,i,!1)}function Xg(t,i){void 0===i&&(i=!1);const e=new j(2*t.length);return Vg(vh(e),new Bi,t,i),e}function Zg(t,i){return i.Ku+3<=t.byteLength&&(239===t.getUint8(i.Ku)&&187===t.getUint8(i.Ku+1)&&191===t.getUint8(i.Ku+2))}function qg(t,i){return function(t,i,e){const s=[],n=Zg(t,i);n&&i.KA(3);for(;i.Ku<t.byteLength;){const n=zg(t,i);if(void 0===n)break;if(e&&0===n)break;s.push(n)}return Hf(s)}(t,i,!0)}function Qa(t){return function(t){return Hf(t)}(function(t,i){const e=[],s=new Bi;let n;if(!i){if(n=bg(t,s),!1===n)return e;n===Tg||e.push(n)}for(;!1!==(n=bg(t,s));)e.push(n);return e}(js(t)))}function Kg(t){return new j(function(t){const i=[];for(const e of t)Mg(e,i);return i}(function(t){const i=[];let e=0;const s=t.length;for(;e<s;){const n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){const s=t.charCodeAt(e++);56320==(64512&s)?i.push(((1023&n)<<10)+(1023&s)+65536):(i.push(n),e--)}else i.push(n)}return i}(t)))}function ac(t,i){if(Zg(t,i))return qg(t,i);if(void 0!==Qg(t,i))return Fg(t,i);if(i.Ku+4<=t.byteLength){if(0===t.getUint8(i.Ku)&&0===t.getUint8(i.Ku+2))return Yg(t,i,!1);if(0===t.getUint8(i.Ku+1)&&0===t.getUint8(i.Ku+3))return Yg(t,i,!0)}return qg(t,i)}function ci(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new j(t.buffer,t.byteOffset+i,e-i)}function Jg(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function vh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function js(t){return new j(t.buffer,t.byteOffset,t.byteLength)}function $g(t){return t instanceof ArrayBuffer||X_(t)}function Ju(t){return t instanceof ArrayBuffer?new j(t):js(t)}function tw(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),t.slice?t.slice(i,e):iw(ci(t,i,e))}function iw(t){if(t.slice)return t.slice(0);{const i=new j(t.byteLength);return i.set(t,0),i}}function ew(t){return[].slice.call(t)}var Bi=class t{get Ku(){return this.Zu}KA(t){this.Zu+=t}JA(t){this.Zu=t}$A(){return new t(this.Ku)}oy(){return new ig(this.Ku<<3)}constructor(t=0){this.Zu=t}};function Fe(t){let i=t.toLowerCase(),e=0,s=0;I(i,"0x")&&(i=i.substring(2));const n=new j(_.ceil(i.length/2));for(1==(1&i.length)&&(e=1,n[s++]=x(i[0],16));e<i.length;e+=2)n[s++]=x(i.substr(e,2),16);return n}function sw(t){return.001*t}var mu=class t{uy(){return ta(this.ly,this._y)}gy(){return xi(this.ly,this._y)}wy(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt16(i.Ku,e);return i.KA(2),s}(this.ly,this._y)}vy(){return es(this.ly,this._y)}py(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt32(i.Ku,e);return i.KA(4),s}(this.ly,this._y)}Ay(){return qi(this.ly,this._y)}yy(t){return Eg(this.ly,this._y,t)}My(t){return function(t,i,e){const s=[];for(let n=0;n<e;n++)s.push(es(t,i));return s}(this.ly,this._y,t)}Ty(t){return Pg(this.ly,this._y,t)}Sy(){return qg(this.ly,this._y)}Ny(t){this._y.KA(t)}$A(){return new t(this.ly,this._y.$A())}constructor(t,i){this.ly=t,this._y=i}};function nw(t,i){return t.Av===i}function Gi(t,i){for(const e of t)if(nw(e,i))return e}var pc=class extends tt{get name(){return"DataIncompleteError"}constructor(t,i){super(),this.Iy=t,this.Dy=i}},Mc=class t{static Ey(i){const e=i.ly,s=i._y,n=t.Ly(e,s,!1);if(!n.xy)throw new pc(s.Ku,n.m);return n.m}static Ly(i,e,s){const n=[];for(;e.Ku<i.byteLength;){const r=t.Cy(i,e,s);if(!r.xy)return{xy:!1,m:n};n.push(r.Oy)}return{xy:!0,m:n}}static jy(i,e){const s=t.Cy(i,e,!1);if(!s.xy)throw new pc(e.Ku);return s.Oy}static Ry(i,e){const s=i.ly,n=i._y;for(;n.Ku<s.byteLength;){const i=t.Cy(s,n,!1);if(!i.xy)return;if(i.Oy.Av===e)return i.Oy}}static Cy(i,e,s){const n=e.Ku,r=t.Py(i,e);if(!r.xy)return r;const o=r.zy;let h=o.By;if(0===h){if(s)return e.JA(n),{xy:!1,Uy:1/0};h=i.byteLength-n}const a=n+h;if(a>i.byteLength){const t=a;return e.JA(n),{xy:!1,Uy:t}}const u={Av:o.Av,Ku:n,ly:new mu(Jg(i,n,a),new Bi(o.Qy))};return e.JA(a),{xy:!0,Oy:u}}static Py(t,i){const e=i.Ku;if(!Lg(t,i,8)){return{xy:!1,Uy:i.Ku+8}}let s=es(t,i),n=Pg(t,i,4);if(1===s){if(!Lg(t,i,8)){const t=i.Ku+8;return i.JA(e),{xy:!1,Uy:t}}s=qi(t,i).toNumber()}if("uuid"===n){if(!Lg(t,i,16)){const t=i.Ku+16;return i.JA(e),{xy:!1,Uy:t}}n=Pg(t,i,16)}return{xy:!0,zy:{Av:n,By:s,Qy:i.Ku-e}}}static Fy(t,i,e){const s=t.ly,n=t._y;let r=ci(js(s),n.Ku,s.byteLength);return e&&(r=iw(r)),n.KA(r.byteLength),{Av:i,ly:r}}static Yy(i,e,s){const n=i.vy(),{version:r,flags:o}=Rc(n);return{Av:e,Gy:r,Vy:o,ly:t.Fy(i,e,s).ly}}};function Ga(t,i){const e=io(t,i);if(!e)throw new g("Missing "+i+" atom");return e}function io(t,i){for(const e of t)if(e.Av===i)return e.ly}function ze(t,i){const e=[];for(const s of t)s.Av===i&&e.push(s.ly);return e}function Rc(t){return{version:t>>24,flags:new Ng(16777215&t)}}var Ot=class t{static Wy(i){const e=[],s=Mc.Ey(new mu(i,new Bi));for(const i of s){const s=t.Hy(i);s&&e.push(s)}return e}static Xy(t){return Mc.Ly(t,new Bi,!1).m.some(this.Zy)}static qy(i){return ze(Mc.Ey(new mu(i,new Bi)),X.zA).map(t.Ky)}static Jy(i){return ze(Mc.Ey(i.ly),X.zA).map(t.Ky)}static Zy(t){return t.Av===X.FA||t.Av===X.QA||t.Av===X.Kp||t.Av===X.kA||t.Av===X.PA||t.Av===X.UA||t.Av===X.BA}static Hy(i){switch(i.Av){case X.Kp:return t.$y(i.ly);case X.kA:return t.tM(i.ly,i.Ku);case X.PA:return t.iM(i.ly);case X.UA:return t.eM(i.ly);case X.BA:return t.sM(i.ly)}}static $y(i){const e=Mc.Ey(i),s=Ga(e,X.Jp),n=ze(e,X.$p),r=io(e,X.aA),o=t.nM(s),h=n.map(t.rM),a=r?t.oM(r):void 0;return{Av:X.Kp,zy:o,Z:h,hM:a}}static nM(t){const i=t.vy(),{version:e,flags:s}=Rc(i),n=1===e?t.Ay():t.vy(),r=1===e?t.Ay():t.vy(),o=t.vy(),h=1===e?t.Ay():t.vy(),a=t.vy(),u=t.gy()>>8;t.Ny(2),t.Ny(8);const c=t.My(9);t.Ny(24);const l=t.vy();return{Av:X.Jp,Gy:e,Vy:s,aM:n,uM:r,cM:o,ct:h,lM:a,zg:u,dM:c,fM:l}}static rM(i){const e=Mc.Ey(i),s=Ga(e,X.tA),n=Ga(e,X.iA),r=t._M(s),o=t.gM(n);return{Av:X.$p,zy:r,wM:o}}static _M(t){const i=t.vy(),{version:e,flags:s}=Rc(i),n=1===e?t.Ay():t.vy(),r=1===e?t.Ay():t.vy(),o=t.vy();t.Ny(4);const h=1===e?t.Ay():t.vy();t.Ny(8);const a=t.wy(),u=t.wy(),c=t.wy()/256;t.Ny(2);const l=t.My(9),d=t.vy()/65536,f=t.vy()/65536;return{Av:X.tA,vM:s.ey(1),mM:s.ey(2),pM:s.ey(4),aM:n,uM:r,AM:o,ct:h,yM:a,MM:u,zg:c,dM:l,ji:d,Ti:f}}static gM(i){const e=Mc.Ey(i),s=Ga(e,X.eA),n=Ga(e,X.sA),r=Ga(e,X.nA),o=t.bM(s),h=t.TM(n),a=t.SM(r);return{Av:X.iA,zy:o,NM:h,IM:a}}static bM(t){const i=t.vy(),{version:e,flags:s}=Rc(i),n=1===e?t.Ay():t.vy(),r=1===e?t.Ay():t.vy(),o=t.vy(),h=1===e?t.Ay():t.vy();t.gy();return t.Ny(2),{Av:X.eA,Gy:e,Vy:s,aM:n,uM:r,cM:o,ct:h}}static TM(t){const i=t.vy(),{version:e,flags:s}=Rc(i);t.Ny(4);const n=t.Ty(4);t.Ny(12);const r=t.Sy();return{Av:X.sA,Gy:e,Vy:s,DM:n,l:r}}static SM(i){const e=Ga(Mc.Ey(i),X.rA),s=t.EM(e);return{Av:X.nA,kM:s}}static EM(i){const e=Ga(Mc.Ey(i),X.oA),s=t.LM(e);return{Av:X.rA,xM:s}}static LM(i){const e=i.vy(),{version:s,flags:n}=Rc(e),r=(i.vy(),[]),o=Mc.Ey(i);for(const i of o){const e=t.CM(i.ly,i.Av);e&&r.push(e)}return{Av:X.oA,Gy:s,Vy:n,OM:r}}static CM(i,e){let s=t.jM(i,e);return s||(s=t.RM(i,e),s||(e===X.SA?t.PM(i):void 0))}static jM(i,e){return e===X.yA?t.zM(i):e===X.bA||e===X.bA.toLowerCase()||e===X.bA.toUpperCase()?t.BM(i):e===X.DA?t.UM(i):void 0}static RM(i,e){return e===X.cA?t.QM(i):e===X.dA||e===X.fA?t.FM(i,e):e===X.gA?t.YM(i,e):e===X.vA?t.GM(i,e):e===X.EA?t.VM(i):void 0}static WM(t,i){t.Ny(6);return{Av:i,HM:t.gy()}}static XM(i,e){const s=t.WM(i,e);i.Ny(8);const n=i.gy(),r=i.gy();i.Ny(2),i.Ny(2);return ol({},s,{ZM:n,qM:r,KM:i.vy()>>>16})}static JM(i,e){const s=t.WM(i,e);i.Ny(2),i.Ny(2),i.Ny(12);const n=i.gy(),r=i.gy(),o=i.vy(),h=i.vy();i.Ny(4);const a=i.gy();i.Ny(32);const u=i.gy();return i.Ny(2),ol({},s,{ji:n,Ti:r,$M:o,ib:h,eb:a,sb:u})}static zM(i){const e=t.XM(i,X.yA),s=Ga(Mc.Ey(i),X.MA);return ol({},e,{ob:t.hb(s)})}static BM(i){const e=t.XM(i,X.bA),s=Ga(Mc.Ey(i),X.TA);return ol({},e,{ub:t.fb(s)})}static PM(i){const e=t.WM(i,X.SA),s=Mc.Ey(i),n=Ga(s,X.NA),r=t._b(n),o=io(s,X.IA);return ol({},e,{gb:r,wb:o?t.vb(o):void 0})}static _b(t){return{Av:X.NA,wd:t.Sy()}}static vb(t){return{Av:X.IA,kh:t.Sy()}}static hb(t){return Mc.Yy(t,X.MA,!0)}static fb(t){return Mc.Yy(t,X.TA,!0)}static QM(i){const e=t.JM(i,X.cA),s=Mc.Ey(i),n=Ga(s,X.lA),r=io(s,X.AA);return ol({},e,{mb:t.pb(n),Ab:r?t.yb(r):void 0})}static FM(i,e){const s=t.JM(i,e),n=Ga(Mc.Ey(i),X._A);return ol({},s,{Mb:t.bb(n)})}static YM(i,e){const s=t.JM(i,e),n=Ga(Mc.Ey(i),X.wA);return ol({},s,{Tb:t.Sb(n)})}static GM(i,e){const s=t.JM(i,e),n=Mc.Ey(i),r=Ga(n,X.mA),o=t.Nb(r),h=io(n,X.pA);return ol({},s,{Ib:o,Db:h?t.Eb(h):void 0})}static VM(i){const e=i.$A(),s=t.JM(i,X.EA),n=Ga(Mc.Ey(i),X.YA),r=t.kb(n);return ol({},s,{Lb:t.RM(e,r.Cb.xb),Ob:r})}static UM(i){const e=i.$A(),s=t.XM(i,X.DA),n=Ga(Mc.Ey(i),X.YA),r=t.kb(n);return ol({},s,{Lb:t.jM(e,r.Cb.xb),Ob:r})}static kb(i){const e=Ga(Mc.Ey(i),X.GA),s=t.jb(e);return{Av:X.YA,Cb:s}}static jb(t){const i=t.Ty(4);return{Av:X.GA,xb:i}}static pb(t){return Mc.Fy(t,X.lA,!0)}static bb(t){return Mc.Fy(t,X._A,!0)}static Sb(t){return Mc.Fy(t,X.wA,!0)}static Nb(t){return Mc.Fy(t,X.mA,!0)}static Eb(t){const i=t.Ty(4);switch(i){case"nclx":return{Rb:Dn.ON_SCREEN_COLOURS,Pb:t.gy(),zb:t.gy(),Bb:t.gy(),Ub:0!=(128&t.uy())};case"rICC":return{Rb:Dn.RESTRICTED_ICC_PROFILE};case"prof":return{Rb:Dn.UNRESTRICED_ICC_PROFILE};default:throw g("Could not parse ColourInformationBox: unknown type '"+i+"'.")}}static yb(t){const i=t.vy(),e=t.vy();return{Av:X.AA,Qb:i,Fb:e}}static oM(i){const e=ze(Mc.Ey(i),X.uA).map(t.Yb);return{Av:X.aA,Z:e}}static Yb(t){const i=t.vy(),{version:e,flags:s}=Rc(i),n=t.vy(),r=t.vy(),o=t.vy(),h=t.vy(),a=t.vy();return{Av:X.uA,Gy:e,Vy:s,AM:n,Gb:r,Vb:o,Wb:h,Hb:a}}static tM(i,e){const s=Mc.Ey(i),n=Ga(s,X.LA),r=ze(s,X.xA),o=t.Xb(n),h=r.map(t.Zb);return{Av:X.kA,qb:e,zy:o,Z:h}}static Xb(t){const i=t.vy(),{version:e,flags:s}=Rc(i),n=t.vy();return{Av:X.LA,Gy:e,Vy:s,Kb:n}}static Zb(i){const e=Mc.Ey(i),s=Ga(e,X.CA),n=ze(e,X.OA),r=io(e,X.jA),o=t.Jb(s),h=n.map((i=>t.$b(i,o))),a=r?t.tT(r):void 0;return{Av:X.xA,zy:o,iT:h,eT:a}}static Jb(t){const i=t.vy(),{version:e,flags:s}=Rc(i),n=t.vy(),r=s.ey(Fs.BASE_DATA_OFFSET_PRESENT)?t.Ay():void 0,o=s.ey(Fs.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.vy():void 0,h=s.ey(Fs.DEFAULT_SAMPLE_DURATION_PRESENT)?t.vy():void 0,a=s.ey(Fs.DEFAULT_SAMPLE_SIZE_PRESENT)?t.vy():void 0,u=s.ey(Fs.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.vy():void 0;return{Av:X.CA,Gy:e,Vy:s,AM:n,sT:r,nT:o,Vb:h,Wb:a,Hb:u}}static $b(i,e){const s=i.vy(),{version:n,flags:r}=Rc(s),o=i.vy(),h=r.ey(N_.DATA_OFFSET_PRESENT)?i.py():void 0,a=r.ey(N_.FIRST_SAMPLE_FLAGS_PRESENT)?i.vy():void 0,u=[];for(let s=0;s<o;s++){const o=t.rT(i,r,n,e);0===s&&void 0!==a&&(o.Vy=a),u.push(o)}return{Av:X.OA,Gy:n,Vy:r,oT:o,qb:h,hT:a,aT:u}}static rT(t,i,e,s){return{ct:i.ey(N_.SAMPLE_DURATION_PRESENT)?t.vy():s.Vb,By:i.ey(N_.SAMPLE_SIZE_PRESENT)?t.vy():s.Wb,Vy:i.ey(N_.SAMPLE_FLAGS_PRESENT)?t.vy():s.Hb,uT:i.ey(N_.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===e?t.vy():t.py():void 0}}static sM(t){const i=t.ly,e=t._y,s=es(i,e),{version:n,flags:r}=Rc(s);if(1===n){const t=es(i,e),s=qi(i,e),o=es(i,e),h=es(i,e),a=Rg(i,e),u=Rg(i,e),c=tw(js(i),e.Ku,i.byteLength);return e.KA(c.byteLength),{Av:X.BA,Gy:n,Vy:r,cT:a,lT:u,cM:t,dT:s,fT:o,o:h,_T:c}}{const t=Rg(i,e),s=Rg(i,e),o=es(i,e),h=es(i,e),a=es(i,e),u=es(i,e),c=tw(js(i),e.Ku,i.byteLength);return e.KA(c.byteLength),{Av:X.BA,Vy:r,Gy:n,cT:t,lT:s,cM:o,gT:h,fT:a,o:u,_T:c}}}static iM(t){return Mc.Fy(t,X.PA,!1)}static Ky(i){const e=i.ly,s=i._y,n=iw(js(e)).buffer,r=es(e,s),{version:o,flags:h}=Rc(r),a=t.wT(e,s),u=[];if(o>0){const t=es(e,s);for(let i=0;i<t;i++){const t=Eg(e,s,16);u.push(t)}}const c=es(e,s),l=new j(n,s.Ku,c);return s.KA(e.byteLength),{Av:X.zA,Gy:o,Vy:h,vT:a,mT:u,pT:c,ly:l,AT:n}}static wT(t,i){let e="";for(let s=0;s<4;s++){const s=ta(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=ta(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=ta(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=ta(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<6;s++){const s=ta(t,i).toString(16);e+=1===s.length?"0"+s:s}return e.toLowerCase()}static eM(t){const i=t.ly,e=t._y,s=es(i,e),{version:n,flags:r}=Rc(s),o=es(i,e),h=es(i,e);let a,u;0===n?(a=ii.fromBits(es(i,e),0,!0),u=ii.fromBits(es(i,e),0,!0)):(a=qi(i,e),u=qi(i,e)),e.KA(2);const c=xi(i,e),l=[];for(let t=0;t<c;t+=1){const t=es(i,e),s=t>>31&1,n=2147483647&t,r=es(i,e),o=es(i,e),h=o>>31&1,a=o>>28&7,u=268435455&o;l.push({yT:s,MT:n,ct:r,bT:h,TT:a,ST:u})}return{Av:X.UA,Gy:n,Vy:r,NT:o,cM:h,IT:a,DT:u,ET:c,kT:l}}static tT(t){const i=t.ly,e=t._y,s=es(i,e),{version:n,flags:r}=Rc(s);let o;return o=0===n?ii.fromBits(es(i,e),0,!0):qi(i,e),{Av:X.jA,Gy:n,Vy:r,eT:o}}},rw={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function ow(t){if(!t)return!0;const i=t.licenseAcquisitionURL,e=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,o=t.queryParameters;return!(i||e||s||n||r||o)}function hw(t){return t&&void 0!==t.licenseAcquisitionURL}var aw,Jt,uw=hw,cw=hw;function nn(t){if(!t)return!0;if(fw(t))return!1;const i=t.fairplay,e=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return ow(i)&&ow(e)&&ow(s)&&void 0===n&&ow(r)}function lw(t){const i=y_(t),e=function(t){var i;const e=t;return A_(e)&&""!==(null==(i=e.fairplay)?void 0:i.headers.PreAuthorization)&&!p_(e)}(t);return(!i||!e)&&(i||e)}function xc(t){return t.integration===u_}function dw(t){const i=t;if(!i)return!1;if(nn(i))return!1;const e=i.fairplay,s=i.playready,n=i.widevine,r=i.clearkey;if(fw(t))return!0;if(e&&!function(t){const i=t;return i&&(void 0!==i.certificateURL||void 0!==i.certificate)}(e))return!1;if(s&&!uw(s))return!1;if(n&&!cw(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(i.integration){if(cc.qp.Hp(i.integration))return!0;switch(i.integration){case lu:if(!function(t){const i=t,e=i.integration===lu;return e&&(_w(t)||gw(t))}(t))return!1;break;case c_:if(!ww(t))return!1;break;case l_:if(!function(t){const i=t;return i.integration===l_}(t))return!1;break;case u_:if(!xc(t))return!1;break;case sc:if(!lw(t))return!1;break;case a_:if(!function(t){const i=t;return i.integration===a_}(t))return!1;break;case Ru:if(!fw(t))return!1;break;case Ie:if(!function(t){const i=t;return i.integration===Ie&&(void 0!==i.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(i))}(t))return!1;break;case d_:if(!function(t){const i=t;return i.integration===d_}(t))return!1;break;case je:if(!vw(t))return!1;break;case f_:if(!function(t){return t.integration===f_}(t))return!1;break;case __:if(!mw(t))return!1;break;case nc:if(!function(t){const i=t;return i.integration===nc&&void 0!==i.token}(t))return!1;break;case g_:if(!function(t){const i=t;return i.integration===g_}(t))return!1;break;case w_:if(!function(t){const i=t;return i&&Ks(i.releasePid)&&Ks(i.accountId)&&Ks(i.token)}(t))return!1;break;case v_:return!0;default:return!1}}return!0}function fw(t){return t.integration===Ru}function _w(t){return void 0!==t.authToken}function gw(t){const i=t;return void 0!==i.accountName&&void 0!==i.customerName&&void 0!==i.portalId}function ww(t){const i=t;return i.integration===c_&&void 0!==i.token}function vw(t){const i=t;return i&&i.integration===je&&Sn(i.ticketAcquisitionURL)&&Sn(i.streamId)}function mw(t){const i=t;return i.integration===__&&void 0!==i.token}function pw(t,i){const e=i[t];var s;const n=null!=(s=null==e?void 0:e.licenseAcquisitionURL)?s:rw[t];var r;const o=null!=(r=null==e?void 0:e.customdata)?r:i.customdata,h=o?{customData:o}:{};var a;const u=ol({},null!=(a=null==e?void 0:e.headers)?a:{},h),c=null!=e?e:{},{customdata:l}=c;return ol({},m_(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function Aw(t){switch(t.toLowerCase()){case"widevine":case ie:return ie;case"playready":case du:return du;case"fairplay":case Bt:return Bt}}function yw(t,i){switch(t){case D_:return function(t){const i={},e=Ot.qy(new DataView(t));for(const t of e)i[t.vT]=t.AT;return i}(i);case E_:case k_:return function(t){return{[R_]:t}}(i);default:throw new ao(qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}function Mw(t,i,e){const s=function(t,i,e){var s;const{useCredentials:n,crossOrigin:r}=function(t,i){let e=ba.mp;return t.useCredentials?e=ba.Ap:t.crossOrigin&&(e=Qw(t.crossOrigin)),e===ba.mp&&i&&i.vr&&i.vr[360]&&(e=ba.pp),{useCredentials:e===ba.Ap,crossOrigin:e}}(t,i);let o=t.liveOffset;Ks(o)||(o=e&&Ks(e.liveOffset)?e.liveOffset:void 0);let h=t.timeServer;Ks(h)||(h=i&&Ks(i.timeServer)?i.timeServer:void 0);let a=t.hlsDateRange;Ks(a)||(a=e&&Ks(e.hlsDateRange)?Boolean(e.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),l=Boolean(t.lowLatency),d=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),_=Ks(t.dash)?Tw(t.dash):void 0,g=Ks(t.hls)?Sw(t.hls):void 0,w=Dw(Iw(t.abr),null==e?void 0:e.abr),v=lt(t.lcevc),m=Ks(t.ignoreEmbeddedTextTrackTypes)?iv(t.ignoreEmbeddedTextTrackTypes):[];var p;const A=Rw(null!=(p=t.seamlessSwitchStrategy)?p:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch),y=jw(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:o,timeServer:h,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:l,useNativePlayback:d,useManagedMediaSource:f,dash:_,hls:g,abr:w,lcevc:v,ignoreEmbeddedTextTrackTypes:m,seamlessSwitchStrategy:A,latencyConfiguration:y}}(t,i,e),n=r_(t.src);let r=t.type;r||(r=t.src?Uw(t.src):void 0);const o=function(t,i){let e;e=Ks(t.contentProtection)?t.contentProtection:Ks(t.drm)?t.drm:Ks(i)&&Ks(i.contentProtection)?i.contentProtection:Ks(i)&&Ks(i.drm)?i.drm:void 0;return bw(e)}(t,i);return ol({},s,{src:n,type:r,contentProtection:o,ssai:Ks(t.ssai)?h_(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function bw(t){return dw(t)&&t.integration&&t.integration===Ru?function(t){const i=pw(ho.Ep,t),e=pw(ho.Dp,t),s=t[ho.kp]&&pw(ho.kp,t);return ol({integration:"keyos",widevine:i,playready:e},s?{fairplay:s}:{})}(t):t}function Tw(t){return{useSeamlessPeriodSwitch:Rw(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:lt(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?ji(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:lt(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:lt(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:lt(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards)}}function Sw(t){return{discontinuityAlignment:Nw(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:Ia(null==t?void 0:t.delaySubtitlePreload)}}function Nw(t){if(!t||!Sn(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}function Iw(t){if(!Ks(t))return;return Ew(df(null==t?void 0:t.preferredAudioCodecs,wo),df(null==t?void 0:t.preferredVideoCodecs,wo),lt(null==t?void 0:t.restrictToPlayerSize))}function Dw(t,i){if(!Ks(t)&&!Ks(i))return;var e;return Ew(kw(null==t?void 0:t.preferredAudioCodecs,null==i?void 0:i.preferredAudioCodecs),kw(null==t?void 0:t.preferredVideoCodecs,null==i?void 0:i.preferredVideoCodecs),null!=(e=null==t?void 0:t.restrictToPlayerSize)?e:null==i?void 0:i.restrictToPlayerSize)}function Ew(t,i,e){if(0!==t.length||0!==i.length||void 0!==e)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===i.length?void 0:i,restrictToPlayerSize:e}}function kw(t,i){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=i?i:[]}function Lw(t,i){if(void 0!==i)switch(t){case Jt.VA:return i.preferredVideoCodecs;case Jt.WA:return i.preferredAudioCodecs;default:return}}!function(t){t.LT="auto",t.xT="playlist",t.CT="media"}(aw||(aw={})),function(t){t.WA="audio",t.VA="video",t.Ru="text",t.OT="image",t.jT="unknown"}(Jt||(Jt={}));var sa,Js,P,xw=.66,Cw=1.5,Ow=3;function jw(t){if(!Ks(t))return;const i=t.targetOffset;var e;var s;var n;var r;var o;return{minimumOffset:null!=(e=t.minimumOffset)?e:i*xw,targetOffset:i,maximumOffset:null!=(s=t.maximumOffset)?s:i*Cw,forceSeekOffset:null!=(n=t.forceSeekOffset)?n:i*Ow,minimumPlaybackRate:null!=(r=t.minimumPlaybackRate)?r:Zt,maximumPlaybackRate:null!=(o=t.maximumPlaybackRate)?o:pi}}function Rw(t){if(!t||!Sn(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}!function(t){t.LT="auto",t.PT="always",t.zT="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only"}(sa||(sa={})),function(t){t.VERIZON_MEDIA="verizon-media",t.MEDIATAILOR="mediatailor",t.THEOLIVE="theolive"}(Js||(Js={})),function(t){t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled"}(P||(P={}));var en,O,qo,Pw=!1;function zw(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":return!0;default:return!1}}function Bw(t){return!!t&&$i(t,"mpd")}function Uw(t){let i=Pl.Tp;return Bw(t)&&(i=Pl.yp),function(t){return!!t&&$i(t,"m3u8")}(t)&&(i=Pl.Mp),i}function Qw(t){switch(t){case ba.pp:case ba.Ap:return t;default:return ba.mp}}function Fw(t){if(!t)return!1;const i=t.toLowerCase();return I(i,Pl.yp)}function zn(t){if(!t)return!1;const i=t.toLowerCase();return I(i,Pl.Mp)||I(i,Pl.bp)}function Qn(t){return Vu(t)&&Vu(t.ssai)&&"google-dai"===t.ssai.integration}function Yw(t){return Vu(t)&&"verizon-media"===t.integration}function Gw(t){return Vu(t)&&"theolive"===t.integration}function Vw(t){return Vu(t)&&"mediatailor"===t.integration}function er(t){return Vu(t)&&"millicast"===t.type}function Ww(t){if(t.sources)if(tr(t.sources)){for(const i of t.sources)if(er(i))return!0}else if(Vu(t.sources))return er(t.sources);return!1}function Hw(t){if(Sn(t))return!t;if(Yw(t))return!t.id;if(Qn(t)){const i=t.ssai,e="live"===i.availabilityType&&i.assetKey,s="vod"===i.availabilityType&&i.contentSourceID&&i.videoID;return Boolean(e&&s)}return er(t)?!t.streamName||!t.streamAccountId:!t.src}function Xw(t){return Boolean(Vu(t)&&Sn(t.src))}function yc(t){return t.type===Pl.Sp||t.type===Pl.Np}function Zw(t){return Sn(t)||Xw(t)||Qn(t)||Yw(t)||er(t)}function Yh(t){if(t){if(Zw(t))return Hw(t);for(const i of t)if(!Hw(i))return!1;return!0}return!0}function qw(){return{crossOrigin:ba.mp,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:sa.LT,latencyConfiguration:void 0}}function Kw(){return ol({},qw(),{src:void 0,type:Pl.Tp,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function Jw(t){const i={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:P.ENABLED,googleIma:{useNativeIma:!1,bitrate:-1,language:void 0,uiElements:void 0},theoads:Pw};return void 0===t||(void 0!==t.preload&&(i.preload=function(t){return"none"===t?en.NONE:en.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(i.showCountdown=Ia(t.showCountdown)),void 0!==t.vpaidMode&&(i.vpaidMode=function(t){switch(t){case"insecure":return P.INSECURE;case"disabled":return P.DISABLED;default:return P.ENABLED}}(t.vpaidMode)),tr(t.allowedMimeTypes)&&(i.allowedMimeTypes=t.allowedMimeTypes.filter(Sn)),void 0!==t.googleIma&&(i.googleIma=function(t){return void 0===t?{useNativeIma:!1,bitrate:-1,language:void 0,uiElements:void 0}:{useNativeIma:Ia(t.useNativeIma),bitrate:null!=(i=t.bitrate)?i:-1,language:Ks(t.language)?wo(t.language):void 0,uiElements:t.uiElements};var i}(t.googleIma)),void 0!==t.theoads?i.theoads=Ia(t.theoads):i.theoads=Pw),i}function $w(t){if(!Cu(t))return[];const i=[];for(const e of t)Vu(e)&&i.push(e);return i}function Kn(t){return Sn(t.src)||er(t)}function iv(t){return tr(t)?t.filter(zw):[]}!function(t){t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll"}(en||(en={})),function(t){t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange"}(O||(O={})),function(t){t[t.BT=0]="BT",t[t.Xn=1]="Xn",t[t.UT=2]="UT",t[t.QT=3]="QT",t[t.FT=4]="FT"}(qo||(qo={}));var R=class extends Os{constructor(t,i=qo.BT){super(Tf.xv),this.currentTime=t,this.readyState=i}},Ye=class extends Os{constructor(t){super(Tf.Sh),this.currentTime=t}},Rt=class extends Os{constructor(t){super(Tf.jh),this.currentTime=t}},An=class extends Os{constructor(t,i=qo.Xn){super($.Mm),this.currentTime=t,this.readyState=i}},Te=class extends Os{constructor(t){super(Tf.Lv),this.duration=t}},Zs=class extends Os{constructor(t,i){super(Tf.qv),this.currentTime=t,this.playbackRate=i}},ri=class extends Os{constructor(t,i){super(Tf.fm),this.currentTime=t,this.currentProgramDateTime=i}},pa=class extends Os{constructor(t){super(Tf.Ov),this.currentTime=t}},re=class extends Os{constructor(t,i=qo.UT){super($.ym),this.currentTime=t,this.readyState=i}},Ur=class extends Os{constructor(t){super(Tf.im),this.currentTime=t}},Ko=class extends Os{constructor(t){super(Tf.$v),this.currentTime=t}},St=class extends Os{constructor(t,i){super(Tf._m),this.currentTime=t,this.volume=i}},We=class extends Os{constructor(t,i=qo.QT){super($.pm),this.currentTime=t,this.readyState=i}},Pn=class extends Os{constructor(t,i=qo.FT){super($.Am),this.currentTime=t,this.readyState=i}},Dr=class extends Os{constructor(t,i){super($.Nw),this.currentTime=t,this.readyState=i}},as=class extends os{get error(){return this.errorObject.message}fa(){return this}constructor(t){super(hi.ha),this.errorObject=t}};async function ev(t,i,e,s,n){void 0===e&&(e=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(i)}catch(t){if(me(t),r<e){const t=_.min(s*2**r,n);r++,await Si(t,i);continue}throw t}}var sv,nv={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};function rv(t){switch(t){case"all":case"content":return t;default:return"none"}}function ov(t){const i=Ca(t||{});return i.libraryLocation&&(i.libraryLocation=fi(i.libraryLocation,!0)),i.isEmbeddable=Boolean(i.isEmbeddable),i.cast=function(t){const i=n_(t?t.chromecast:void 0),e=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:i,strategy:e}}(i.cast),i.ads=Jw(i.ads),i.analytics=$w(i.analytics),i.mutedAutoplay=rv(i.mutedAutoplay),i.allowNativeFullscreen=Boolean(i.allowNativeFullscreen),i.allowMixedContent=Boolean(i.allowMixedContent),i.persistVolume=Boolean(i.persistVolume),i.liveOffset=function(t){return Number(t)||void 0}(i.liveOffset),i.hlsDateRange=function(t){return Boolean(t)}(i.hlsDateRange),i.retainPlaybackRateOnSourceChange=Boolean(i.retainPlaybackRateOnSourceChange),i.license=function(t){return Sn(t)?t:void 0}(i.license),i.licenseUrl=function(t){if(!t)return;try{return fi(t)}catch(t){return void ra.vp("Invalid 'licenseUrl', falling back to default URL")}}(i.licenseUrl),i.vr=function(t){return{useWebXR:Boolean(t&&t.useWebXR)}}(i.vr),i.abr=Iw(i.abr),i.retryConfiguration=function(t){const i=ol({},nv);return void 0!==t&&(void 0!==t.maxRetries&&(i.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(i.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(i.maximumBackoff=Number(t.maximumBackoff))),i}(i.retryConfiguration),i.hideDeprecationWarnings=Boolean(i.hideDeprecationWarnings),i.theoLive=function(t){if(!t)return t;return ol({},t,{externalSessionId:t.externalSessionId?wo(t.externalSessionId):void 0,fallbackEnabled:lt(t.fallbackEnabled)})}(i.theoLive),i}function hv(t){return{bt:t.bt,U_:t.U_,ct:t.ct,G_:t.G_,lt:t.lt,H_:t.H_,og:t.og,fg:t.fg,gg:t.gg,Sg:t.Sg,Eg:t.Eg,Cg:t.Cg,Rg:t.Rg,zg:t.zg}}function av(t,i){const e=i.zg,s=i.og;t.zg=e,t.og=s}function uv(t,i,e){if(i===e)return;const s=i.bt!==e.bt,n=i.U_,r=i.ct,o=i.og,h=i.fg,a=i.gg,u=i.Sg,c=i.Eg,l=(i.Rg,i.Cg,i.zg),d=e.U_,f=e.ct,_=e.G_,g=e.H_,w=e.og,v=e.fg,m=e.gg,p=e.Sg,A=e.Eg,y=(e.Rg,e.Cg,e.zg);(s||u>qo.BT&&p===qo.BT)&&t.Co(new R(d,p)),v&&!h?t.Co(new Ye(d)):!v&&h&&t.Co(new Rt(d)),p>=qo.Xn&&(s||u<qo.Xn)&&t.Co(new An(d,p)),f===r||S(f)&&S(r)||t.Co(new Te(f)),m!==a&&t.Co(new Zs(d,m)),d!==n&&t.Co(new ri(d,void 0)),_&&t.Co(new pa(d)),p>=qo.UT&&(s||u<qo.UT)&&t.Co(new re(d,p)),A&&!c?t.Co(new Ur(d)):!A&&c&&t.Co(new Ko(d)),y===l&&w===o||t.Co(new St(d,y)),p>=qo.QT&&(s||u<qo.QT)&&t.Co(new We(d,p)),p>=qo.FT&&(s||u<qo.FT)&&t.Co(new Pn(d,p)),p!==u&&t.Co(new Dr(d,p)),g&&t.Co(new as(g))}!function(t){t.NONE="none",t.ALL="all",t.CONTENT="content"}(sv||(sv={}));var bn=class extends Os{constructor(t){super(Tf.Dv),this.currentSource=t}},cv=class extends Os{constructor(){super(Tf.Rv)}},zs=class extends Os{constructor(){super(Tf.zv)}},lv=class extends Xd{L_(){return this.YT}get Z_(){return this.q_()}q_(){return this.GT}xg(){return this.Dl}jg(){return this.VT}WT(t){const i=this.x_;if(i===t)return;i.E_(this.ow);const e=hv(this),s=this.B_(),n=this.Gg(),r=this.Vg();this.x_=t,this.YT.Uw=t.ht,this.VT.Uw=t.rt,this.Dl.Uw=t.nt,this.GT.Uw=t.Z_,void 0!==e&&uv(this,e,this);const o=this.B_();o!==s&&this.Co(new bn(o)),this.Gg()!==n&&this.Co(new cv),this.Vg()!==r&&this.Co(new zs),t.T_(this.ow)}async gn(){await super.gn(),this.YT.gn(),this.VT.gn(),this.Dl.gn(),this.GT.gn()}constructor(t){super(t),this.YT=new ul,this.VT=new ul,this.Dl=new Sf,this.GT=new Yf,this.YT.Uw=t.ht,this.VT.Uw=t.rt,this.Dl.Uw=t.nt,this.GT.Uw=t.Z_}};var to,dv=class extends lv{rg(){return function(t){let i=0,e=0,s=0,n=0,r=0,o=0,h=0;for(const a of t)i+=a.HT,e+=a.XT,s+=a.ZT,n+=a.qT,r+=a.KT,o+=a.JT.amountOfBufferedAudioSegments,h+=a.JT.amountOfBufferedVideoSegments;return{HT:i,XT:e,ZT:s,qT:n,KT:r,JT:{amountOfBufferedAudioSegments:o,amountOfBufferedVideoSegments:h}}}(this.$T.map((t=>t.eg)))}Zg(){return Wr(this.$T.map((t=>t.Zg()))).then(Br)}tr(){return Wr(this.$T.map((t=>t.tr()))).then(Br)}Wg(){if(!this.bo){for(const t of this.$T)t.Wg();this.bo=!0}}C_(){const t=[];for(const i of this.$T)t.push(...i.C_());return t}ew(t){let i=!1;for(const e of this.$T)i=e.ew(t)||i;return i}Co(t){this.ew(t)||super.Co(t)}get Uw(){return this.x_}set Uw(t){this.WT(t)}tS(t){this.$T.push(t)}iS(t){jn(this.$T,t)}WT(t){if(t===this.x_)return;const i=this.x_;i.ar(),super.WT(t),t.ur(i)}$g(){for(const t of this.$T)t.$g()}async gn(){this.Vo(),this.x_.ar();for(const t of this.$T)this.x_!==t&&await t.gn();await super.gn()}constructor(t){super(t),this.$T=[],this.bo=!1,this.eS=!1,this.tS(t)}};!function(t){t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR"}(to||(to={}));var Nt=class extends Pd{get name(){return"MediaError"}constructor(t,i,e,s){super(i),this.code=t,this.message=null!=i?i:"Unknown error",this.cause=e,this.systemCode=s,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}};function fv(t){nf(t,"MEDIA_ERR_ABORTED",1),nf(t,"MEDIA_ERR_NETWORK",2),nf(t,"MEDIA_ERR_DECODE",3),nf(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),nf(t,"MEDIA_ERR_ENCRYPTED",5)}function ia(t){var i,e;return function(t){return t.category===kt.CONTENT_PROTECTION}(t)?new Nt(5,t.message,null==(i=t.cause)?void 0:i.message,t.systemCode):new Nt(_v(t.code),t.message,null==(e=t.cause)?void 0:e.message)}function _v(t){if(t===qa.MEDIA_ABORTED)return 1;if(t===qa.MANIFEST_LOAD_ERROR||t===qa.MEDIA_LOAD_ERROR||t===qa.SUBTITLE_LOAD_ERROR)return 2;if(t===qa.MEDIA_DECODE_ERROR)return 3;if(t===qa.MEDIA_NOT_SUPPORTED)return 4;const i=kt.fromCode(t);return i===kt.NETWORK?2:i===kt.SOURCE?4:i===kt.LICENSE?6:i===kt.CONTENT_PROTECTION?5:i===kt.AD?7:3}function ar(t){return new ao(gv(t.code),t.message,t)}function gv(t){switch(t){case 1:return qa.MEDIA_ABORTED;case 2:return qa.NETWORK_ERROR;case 3:return qa.MEDIA_DECODE_ERROR;case 4:return qa.SOURCE_NOT_SUPPORTED;case 5:return qa.CONTENT_PROTECTION_ERROR;case 6:return qa.LICENSE_ERROR;case 7:return qa.AD_ERROR}}fv(Nt),fv(Nt.prototype);var Ds=class extends La{tt(t){return super.tt(t)}fa(){return pf(this)}};var wv=class{get Rw(){return this.sS}get U(){return this.sS.length}get va(){return this.Xa||(this.Xa=function(t){const i=t.Rw.map((t=>t.va));return i.item=i=>{const e=0|i,s=t.zw(e);return s&&s.va||void 0},i}(this)),this.Xa}nS(t){this.sS.push(t),this.Xa&&this.Xa.push(t.va)}rS(t){jn(this.sS,t),this.Xa&&jn(this.Xa,t.va)}zw(t){return this.sS[t]}oS(t){return tr(t)?function(t,i){for(const e of i)if(!Ai(t,e))return!1;return!0}(this.sS,t):Ai(this.sS,t)}tr(){To(this.sS),this.Xa&&To(this.Xa)}constructor(){this.sS=[],this.Xa=void 0}},hl=class extends Oe{fa(){return new vv(this.Lt.va)}constructor(t){super(ct.Lw),this.Lt=t}},vv=class extends Hn{constructor(t){super("update"),this.track=t}},mv=0;function Q(){return mv++}var pv=0;var Av=0;function kc(){return Av++}var yv=0;function Mv(){return yv++}var bv=0;var Tv=class extends Mo{get Hw(){}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.hS=t,this.Co(new uc(this)))}get hS(){return this.aS.enabled}set hS(t){this.aS.enabled=t}get va(){return this.Xa||(this.Xa=Mi(this)),this.Xa}get o(){return this.uS}get Xw(){return this.cS}get zt(){return this.aS.kind}get kh(){return this.lS}set kh(t){t!==this.lS&&(this.lS=t,this.Co(new hl(this)))}get gs(){return this.aS.language}get _v(){return this.Rt?"enabled":"disabled"}get dS(){return this.aS}get qw(){return this.sS}get Kw(){}set Kw(t){}fS(t){this.Rt=t}_S(){this.Rt=this.hS}constructor(t){super(),this.Av=Jt.WA,this.Le=!1,this.Xa=void 0,this.aS=t,this.cS=Q(),this.uS=bv+++"",this.lS=t.label,this.sS=new wv,this._S()}},Sv=0;var Ls,Nv,Iv=class extends Mo{get Hw(){}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.hS=t,this.Co(new uc(this)))}get hS(){return!!this.aS.selected}set hS(t){this.aS.selected=t}get va(){return this.Xa||(this.Xa=Mi(this)),this.Xa}get o(){return this.uS}get Xw(){return this.cS}get zt(){return"main"}get kh(){return this.lS}set kh(t){t!==this.lS&&(this.lS=t,this.Co(new hl(this)))}get gs(){return this.aS.language}get _v(){return this.Rt?"enabled":"disabled"}get dS(){return this.aS}get qw(){return this.sS}get Kw(){}set Kw(t){}_S(){this.Rt=this.hS}fS(t){this.Rt=t}constructor(t){super(),this.Av=Jt.VA,this.Le=!1,this.Xa=void 0,this.aS=t,this.cS=Q(),this.uS=Sv+++"",this.sS=new wv,this.lS=t.label,this._S()}},Dv=class extends Os{constructor(t){super(Tf.Mv),this.K_=t}};!function(t){t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR"}(Ls||(Ls={})),function(t){t.gS="cue",t.wS="region",t.vS="stylesheet"}(Nv||(Nv={}));var Ui,Ev={"line-left":"start",center:"middle","line-right":"end"},kv={start:"line-left",middle:"center",end:"line-right"};function Lv(t,i){if("auto"===t)switch(i){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function xv(t,i){if("auto"===t)switch(i){case"left":return 0;case"right":return 100;default:return 50}return function(t,i){const e="number"==typeof t?t:C(t);return S(e)?i:e}(t,50)}!function(t){t.mS="mo",t.pS="So",t.Lw="Yn"}(Ui||(Ui={}));var dr=class extends Oe{constructor(t,i){super(t),this.yS=i}},Cv=class extends Hn{constructor(t,i){super(t),this.cue=i}};function ht(t){const i=[Ui.mS,Ui.pS,Ui.Lw];let e;const s={get track(){return t.Lt.va},get id(){return t.o},get uid(){return t.Xw},get startTime(){return t.MS},set startTime(i){t.MS=i},get endTime(){return t.bS},set endTime(i){t.bS=i},get content(){return t.O},addEventListener(t,i){const s=Za(t,wo);e.yn(s,i)},removeEventListener(t,i){const s=Za(t,wo);e.fn(s,i)}};return e=new bs(s),t.yn(i,(t=>e.Co(t.va))),s}function Ov(){}function jv(t){return ro(ht(t),{get align(){return t.TS},get line(){return t.SS},get lineAlign(){return t.NS},get position(){return t.po},get positionAlign(){return t.IS},get region(){return t.DS?t.DS.va:null},get size(){return t.By},get snapToLines(){return t.ES},get text(){return t.O},get vertical(){return t.Pt}})}var or=class extends dr{fa(){return new Rv(this.yS.va)}constructor(t){super(Ui.Lw,t)}},Rv=class extends Cv{constructor(t){super("update",t)}},Pv=class extends Oe{fa(){return new zv(this.yS.va)}constructor(t){super(ct.gw),this.yS=t}},zv=class extends Hn{constructor(t){super("updatecue"),this.cue=t}},un=.02;function Bv(t,i){return Jn(t.kS,i.kS,un)&&Jn(t.LS,i.LS,un)&&t.o===i.o}var rl=class extends Mo{get MS(){return this.xS}set MS(t){var i,e;this.xS!==t&&(this.xS=t,null==(i=this.CS)||i.jS(this),this.Co(new or(this)),null==(e=this.CS)||e.Co(new Pv(this)))}get bS(){return this.RS}set bS(t){var i,e;this.RS!==t&&(this.RS=t,null==(i=this.CS)||i.jS(this),this.Co(new or(this)),null==(e=this.CS)||e.Co(new Pv(this)))}get o(){return this.uS}get Xw(){return this.cS}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return ht(this)}get ro(){return this.ho}set ro(t){this.ho=t}get Lt(){return this.CS}set Lt(t){this.CS=t}get O(){return this.PS}set O(t){var i;this.PS!==t&&(this.PS=t,this.Co(new or(this)),null==(i=this.CS)||i.Co(new Pv(this)))}get zS(){return this.US}set zS(t){this.US=t}QS(t){return this===t||af(this,t)&&Bv(this,t)&&this.FS(t)}FS(t){return of(this.O,t.O)}YS(t,i){this.xS=t,this.RS=i,this.kS=t,this.LS=i}gn(){this.Vo()}constructor(t,i,e,s,n){super(),this.Xa=void 0,this.CS=void 0,this.ho=!1,this.GS=-1,this.cS=Mv(),this.xS=t,this.RS=i,this.kS=t,this.LS=i,this.PS=e,this.US=Boolean(s),this.uS=null!=n?n:""}};function Uv(t,i){return t.O===i.O&&t.SS===i.SS&&t.NS===i.NS&&t.po===i.po&&t.IS===i.IS&&t.DS===i.DS&&t.ES===i.ES&&t.By===i.By&&t.TS===i.TS&&t.Pt===i.Pt}var Qv=class extends rl{get va(){return this.Xa||(this.Xa=jv(this)),this.Xa}get Av(){return Nv.gS}FS(t){return Uv(this,t)}constructor(t,i,e,s,n){super(t,i,e,s,n),this.SS="auto",this.NS="start",this.po="auto",this.IS="auto",this.DS=void 0,this.ES=!0,this.By=100,this.TS="center",this.Pt=""}};function Fv(t){const i=t.SS,e=he(i);return e&&!t.ES&&(i<0||i>100)?100:e?Number(i):t.ES?-1:100}function Yv(t){return xv(t.po,t.TS)}function Gv(t){return Lv(t.IS,t.TS)}function Vv(t){const i=Gv(t),e=Yv(t);let s;switch(i){case"line-left":s=100-e;break;case"line-right":s=e;break;case"center":s=e<=50?2*e:2*(100-e)}return _.min(t.By,s)}function Wv(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.VS},get regionAnchorX(){return t.WS},get regionAnchorY(){return t.HS},get scrollValue(){return t.XS},get viewportAnchorX(){return t.ZS},get viewportAnchorY(){return t.qS},get width(){return t.ji}}}var Hv=class{get va(){return this.Xa||(this.Xa=Wv(this)),this.Xa}get Av(){return Nv.wS}constructor(t,i,e,s,n,r,o,h){this.o=t,this.ji=i,this.VS=e,this.WS=s,this.HS=n,this.ZS=r,this.qS=o,this.XS=h}},fc=1e6,Xv=class{KS(t){return this.JS()*t}$S(t){return this.tN(t)>0}iN(t){return this.tN(t)>=0}eN(t,i){return this.nN(t).sN(i)}QS(t){return 0===this.tN(t)}rN(t){return this.tN(t)<0}sN(t){return this.tN(t)<=0}oN(){return this.hN()?this.aN():this}uN(t){return this.nS(t.aN())}nN(t){return this.uN(t).oN()}};function Zv(t,i){return t.cN()?i.cN()?ws.Zr:ws.Jf:i.cN()?ws.$f:t.lN()?i.lN()&&t.hN()===i.hN()?ws.Zr:t.hN()?ws.$f:ws.Jf:i.hN()?ws.Jf:ws.$f}var qv=4294967296,Kv=qv*qv,Jv=Kv*Kv,$v=Jv/2,gs=class t{static dN(i,e,s){return s?new t(i.toUnsigned(),e.toUnsigned()):new t(i.toSigned(),e.toSigned())}static fN(i){return i.unsigned?new t(i,ii.UZERO):new t(i,i.isNegative()?ii.NEG_ONE:ii.ZERO)}static _N(i,e){if(S(i))return e?t.gN:t.wN;if(e){if(i<0)return t.gN;if(i>=Jv)return t.vN}else{if(i<=-$v)return t.mN;if(i+1>=$v)return t.pN}return i<0?t._N(-i,e).aN():t.dN(ii.fromNumber(i%Kv),ii.fromNumber(i/Kv),e)}AN(){return this.yN.unsigned}MN(){return this.bN.isZero()&&this.yN.isZero()}hN(){return this.yN.isNegative()}TN(){return this.AN()?t.dN(this.bN,this.yN,!1):this}SN(){return this.AN()?this:t.dN(this.bN,this.yN,!0)}NN(){return this.bN}JS(){return this.hN()?-this.aN().JS():this.yN.toNumber()*Kv+this.bN.toUnsigned().toNumber()}DN(){return this.bN.toInt()}QS(t){return(this.AN()===t.AN()||this.yN.getHighBits()>>>31!=1||t.yN.getHighBits()>>>31!=1)&&(this.yN.toUnsigned().eq(t.yN.toUnsigned())&&this.bN.toUnsigned().eq(t.bN.toUnsigned()))}tN(t){if(this.QS(t))return ws.Zr;const i=this.hN(),e=t.hN();if(i&&!e)return ws.$f;if(!i&&e)return ws.Jf;if(!this.AN())return this.uN(t).hN()?ws.$f:ws.Jf;const s=this.SN(),n=t.SN(),r=n.yN.comp(s.yN);return r>0||0===r&&n.bN.gt(s.bN)?ws.$f:ws.Jf}rN(t){return this.tN(t)<0}sN(t){return this.tN(t)<=0}EN(t){return this.tN(t)>0}kN(t){return this.tN(t)>=0}LN(){return new t(this.bN.not(),this.yN.not())}xN(i){return new t(this.bN.and(i.bN),this.yN.and(i.yN))}CN(i){return new t(this.bN.or(i.bN),this.yN.or(i.yN))}ON(i){const e=127&i;return 0===e?this:e<64?t.dN(this.bN.shl(e),this.yN.shl(e).or(this.bN.shru(64-e)),this.AN()):t.dN(ii.ZERO,this.bN.shl(e-64),this.AN())}jN(i){const e=127&i;return 0===e?this:e<64?t.dN(this.bN.shru(e).or(this.yN.shl(64-e)),this.yN.shr(e),this.AN()):t.dN(this.yN.shr(e-64),this.yN.isNegative()?ii.NEG_ONE:ii.ZERO,this.AN())}RN(i){const e=127&i;return 0===e?this:e<64?t.dN(this.bN.shru(e).or(this.yN.shl(64-e)),this.yN.shru(e),this.AN()):64===e?t.dN(this.yN,ii.ZERO,this.AN()):t.dN(this.yN.shru(e-64),ii.ZERO,this.AN())}nS(i){const e=this.yN.high>>>16,s=65535&this.yN.high,n=this.yN.low>>>16,r=65535&this.yN.low,o=this.bN.high>>>16,h=65535&this.bN.high,a=this.bN.low>>>16,u=65535&this.bN.low,c=i.yN.high>>>16,l=65535&i.yN.high,d=i.yN.low>>>16,f=65535&i.yN.low,_=i.bN.high>>>16,g=65535&i.bN.high,w=i.bN.low>>>16;let v=0,m=0,p=0,A=0,y=0,M=0,b=0,T=0;T+=u+(65535&i.bN.low),b+=T>>>16,T&=65535,b+=a+w,M+=b>>>16,b&=65535,M+=h+g,y+=M>>>16,M&=65535,y+=o+_,A+=y>>>16,y&=65535,A+=r+f,p+=A>>>16,A&=65535,p+=n+d,m+=p>>>16,p&=65535,m+=s+l,v+=m>>>16,m&=65535,v+=e+c,v&=65535;const S=this.AN(),N=ii.fromBits(p<<16|A,v<<16|m,S),I=ii.fromBits(b<<16|T,y<<16|M,S);return t.dN(I,N,S)}uN(t){return this.nS(t.aN())}aN(){return this.LN().nS(t.PN)}zN(i){if(this.MN()||i.MN())return this.AN()?t.gN:t.wN;if(this.hN())return i.hN()?this.aN().zN(i.aN()):this.aN().zN(i).aN();if(i.hN())return this.zN(i.aN()).aN();if(this.yN.isZero()&&0===this.bN.high&&i.yN.isZero()&&0===i.bN.high)return t.fN(this.bN.multiply(i.bN));const e=ii.fromBits(4294967295,0,!0),s=this.bN.and(e),n=this.bN.shru(32),r=this.yN.and(e),o=this.yN.shru(32),h=i.bN.and(e),a=i.bN.shru(32),u=i.yN.and(e),c=i.yN.shru(32);let l=ii.UZERO,d=ii.UZERO,f=ii.UZERO,_=ii.UZERO;l=l.add(s.mul(h)),d=d.add(l.shru(32)),l=l.and(e),d=d.add(n.mul(h)),f=f.add(d.shru(32)),d=d.and(e),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(e),f=f.add(r.mul(h)),_=_.add(f.shru(32)),f=f.and(e),f=f.add(n.mul(a)),_=_.add(f.shru(32)),f=f.and(e),f=f.add(s.mul(u)),_=_.add(f.shru(32)),f=f.and(e),_=_.add(o.mul(h)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(e);const g=ii.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),w=ii.fromBits(f.getLowBitsUnsigned(),_.getLowBitsUnsigned(),!0);return t.dN(g,w,this.AN())}BN(i){let e,s,n=i;if(n.MN())throw new RangeError("division by zero");if(this.MN())return this.AN()?[t.gN,t.gN]:[t.wN,t.wN];if(this.AN()){if(n.AN()||(n=n.SN()),n.EN(this))return[t.gN,this];if(n.EN(this.RN(1)))return s=t.UN,e=this.uN(n),[s,e];s=t.gN}else{if(this.QS(t.mN)){if(n.QS(t.PN)||n.QS(t.QN))return[t.mN,t.wN];if(n.QS(t.mN))return[t.PN,t.wN];{const i=this.jN(1).FN(n).ON(1);return i.QS(t.wN)?s=n.hN()?t.PN:t.QN:(e=this.uN(n.zN(i)),s=i.nS(e.FN(n))),e=this.uN(n.zN(s)),[s,e]}}if(n.QS(t.mN))return this.AN()?[t.gN,this]:[t.wN,this];if(this.hN())return n.hN()?this.aN().BN(n.aN()):([s,e]=this.aN().BN(n),[s.aN(),e.aN()]);if(n.hN())return[s,e]=this.BN(n.aN()),[s.aN(),e.aN()];s=t.wN}for(e=this;e.kN(n);){let i=_.max(1,_.floor(e.JS()/n.JS()));const r=_.ceil(_.log(i)/_.LN2),o=r<=48?1:2**(r-48);let h=t._N(i),a=h.zN(n);for(;a.hN()||a.EN(e);)i-=o,h=t._N(i,this.AN()),a=h.zN(n);h.MN()&&(h=t.PN),s=s.nS(h),e=e.uN(a)}return[s,e]}FN(t){return this.BN(t)[0]}YN(t){return this.BN(t)[1]}toString(i){const e=i||10;if(e<2||e>36)throw new RangeError("radix");if(this.MN())return"0";if(this.hN()){if(this.QS(t.mN)){const i=t._N(e),s=this.FN(i),n=s.zN(i).uN(this);return s.toString(e)+n.DN().toString(e)}return"-"+this.aN().toString(e)}const s=t._N(e**6,this.AN());let n=this,r="";for(;;){const t=n.FN(s);let i=(n.uN(t.zN(s)).DN()>>>0).toString(e);if(n=t,n.MN())return i+r;for(;i.length<6;)i="0"+i;r=String(i)+r}}constructor(t,i){this.bN=t,this.yN=i}};gs.wN=gs.fN(ii.ZERO),gs.gN=gs.fN(ii.UZERO),gs.PN=gs.fN(ii.ONE),gs.UN=gs.fN(ii.UONE),gs.QN=gs.fN(ii.NEG_ONE),gs.pN=gs.dN(ii.NEG_ONE,ii.MAX_VALUE,!1),gs.vN=gs.dN(ii.MAX_UNSIGNED_VALUE,ii.MAX_UNSIGNED_VALUE,!0),gs.mN=gs.dN(ii.ZERO,ii.MIN_VALUE,!1);var Zh=class t{get lN(){return!isFinite(this.GN)}get Kl(){return this.GN/this.cM}static VN(i){return new t(_.ceil(i.GN),i.cM)}static WN(i){return new t(_.floor(i.GN),i.cM)}static HN(t,i){return t.iN(i)?t:i}static XN(t,i){return t.sN(i)?t:i}nS(i){return this.cM>=i.cM?new t(this.GN+i.ZN(this.cM).GN,this.cM):new t(this.ZN(i.cM).GN+i.GN,i.cM)}$S(t){return t.rN(this)}iN(t){return t.sN(this)}nN(i){if(this.cM>=i.cM){const e=_.abs(this.GN-i.ZN(this.cM).GN),s=this.cM;return new t(e,s)}return i.nN(this)}eN(t,i){return this.nN(t).sN(i)}tN(t){return function(t,i){return t.cM>=i.cM?md(t.GN,i.ZN(t.cM).GN):md(t.ZN(i.cM).GN,i.GN)}(this,t)}QS(t){return 0===this.tN(t)}rN(t){return this.tN(t)<0}sN(t){return this.tN(t)<=0}ZN(i){return new t(this.GN*(i/this.cM),i)}uN(i){return this.cM>=i.cM?new t(this.GN-i.ZN(this.cM).GN,this.cM):new t(this.ZN(i.cM).GN-i.GN,i.cM)}qN(i){return new t(this.GN*i,this.cM)}constructor(t,i=1){this.GN=t,this.cM=i}};Zh.Zl=new Zh(1/6,1),Zh.wN=new Zh(0),Zh.KN=new Zh(1/0),Zh.JN=1e6;var yt=class t extends Xv{static $N(i,e){return void 0===e&&(e=fc),t._N(i*e,e)}static _N(i,e){return S(i)?t.tI:i===1/0?t.iI:i===-1/0?t.eI:new t(ii.fromNumber(i),e)}static fN(i,e){return new t(i,e)}static sI(i){return t.$N(i.Kl,fc)}static nI(i){return new t(ii.fromNumber(i.getTime()),1e3)}static HN(t,i){return t.iN(i)?t:i}static XN(t,i){return t.sN(i)?t:i}static rI(i,e,s){return t.HN(e,t.XN(s,i))}hN(){return this.lT.isNegative()}MN(){return 0!==this.cM&&this.lT.isZero()}lN(){return 0===this.cM&&!this.lT.isZero()}cN(){return 0===this.cM&&this.lT.isZero()}JS(){if(0===this.cM)return this.lT.isZero()?NaN:this.lT.isNegative()?-1/0:1/0;const t=this.lT.divide(this.cM),i=this.lT.subtract(t.multiply(this.cM));return t.toNumber()+i.toNumber()/this.cM}NN(){if(0===this.cM)throw new g("Failed to convert timestamp");return this.lT}oI(){return new Date(0===this.cM?NaN:this.ZN(1e3).lT.toNumber())}hI(){return new Zh(0===this.cM?this.JS():this.lT.toNumber(),this.cM)}ZN(i,e){void 0===e&&(e=tm.aI);const s=this.cM;if(s===i)return this;if(0===s)return this;const n=fd(s,i),r=function(t,i,e){const[s,n]=t.BN(i);if(n.MN())return s;if(e===tm.aI)return n.hN()?s.uN(gs.PN):s;if(e===tm.uI)return n.hN()?s:s.nS(gs.PN);{const t=n.zN(gs._N(2));return t.hN()?t.aN().rN(i)?s:s.uN(gs.PN):t.rN(i)?s:s.nS(gs.PN)}}(gs.fN(this.lT).zN(gs._N(i/n)),gs._N(s/n),e);return new t(r.NN(),i)}tN(t){if(this===t)return ws.Zr;if(0===this.cM||0===t.cM)return Zv(this,t);if(this.MN())return t.MN()?ws.Zr:t.hN()?ws.Jf:ws.$f;if(t.MN())return this.hN()?ws.$f:ws.Jf;const i=_.min(this.cM,t.cM),e=this.ZN(i,tm.cI).lT,s=t.ZN(i,tm.cI).lT;return e.compare(s)}aN(){return 0===this.cM?function(t){0;return t.cN()?t:t.hN()?yt.iI:yt.eI}(this):new t(this.lT.negate(),this.cM)}nS(i){if(0===this.cM||0===i.cM)return function(t,i){0;if(t.cN()||i.cN())return yt.tI;if(t.lN()&&i.lN())return t.hN()===i.hN()?t:yt.tI;return t.lN()?t:i}(this,i);if(this.MN())return i;if(i.MN())return this;const e=_.max(this.cM,i.cM),s=this.ZN(e,tm.cI),n=i.ZN(e,tm.cI);return new t(s.lT.add(n.lT),e)}zN(i){if(this.cN()||S(i))return t.tI;if(this.lN()||!isFinite(i)){if(this.MN()||0===i)return t.tI;{const e=this.hN()?t.eI:t.iI;return i<0?e.aN():e}}return this.MN()?this:new t(0===i?ii.ZERO:this.lT.multiply(i),this.cM)}FN(i){if(this.cN()||S(i))return t.tI;if(this.lN())return isFinite(i)?0===i?1/i<0?this.aN():this:i<0?this.aN():this:t.tI;if(!isFinite(i))return new t(ii.ZERO,this.cM);if(this.MN())return 0===i?t.tI:new t(ii.ZERO,this.cM);if(0===i){const e=this.hN()?t.eI:t.iI;return 1/i<0?e.aN():e}return new t(this.lT.divide(i),this.cM)}lI(){return[this.lT.low,this.lT.high,this.cM]}constructor(t,i){super(),this.lT=t.toSigned(),this.cM=i>>>0}};yt.wN=new yt(ii.ZERO,fc),yt.tI=new yt(ii.ZERO,0),yt.iI=new yt(ii.ONE,0),yt.eI=new yt(ii.NEG_ONE,0);var tm,on=class t extends Xv{static $N(i,e){return void 0===e&&(e=fc),t._N(i*e,e)}static _N(i,e){return S(i)?t.tI:i===1/0?t.iI:i===-1/0?t.eI:new t(BigInt(_.floor(i)),e)}static fN(i,e){return new t(BigInt(i.high)<<BigInt(32)|BigInt(i.low>>>0),e)}static sI(i){return t.$N(i.Kl,fc)}static nI(i){return t._N(i.getTime(),1e3)}static get wN(){return t.dI||(t.dI=new t(BigInt(0),fc)),t.dI}static get tI(){return t.fI||(t.fI=new t(BigInt(0),0)),t.fI}static get iI(){return t._I||(t._I=new t(BigInt(1),0)),t._I}static get eI(){return t.gI||(t.gI=new t(BigInt(-1),0)),t.gI}static HN(t,i){return t.iN(i)?t:i}static XN(t,i){return t.sN(i)?t:i}static rI(i,e,s){return t.HN(e,t.XN(s,i))}hN(){return this.lT<BigInt(0)}MN(){return 0!==this.cM&&this.lT===BigInt(0)}lN(){return 0===this.cM&&this.lT!==BigInt(0)}cN(){return 0===this.cM&&this.lT===BigInt(0)}JS(){if(0===this.cM)return this.lT===BigInt(0)?NaN:this.lT<BigInt(0)?-1/0:1/0;const t=this.lT/BigInt(this.cM),i=this.lT-t*BigInt(this.cM);return Number(t)+Number(i)/this.cM}NN(){if(0===this.cM)throw new g("Failed to convert timestamp");return this.wI()}wI(){const t=this.lT&BigInt(4294967295),i=this.lT>>BigInt(32)&BigInt(4294967295);return ii.fromBits(Number(t),Number(i))}oI(){return new Date(0===this.cM?NaN:Number(this.ZN(1e3).lT))}hI(){return new Zh(0===this.cM?this.JS():Number(this.lT),this.cM)}ZN(i,e){void 0===e&&(e=tm.aI);const s=this.cM;if(s===i)return this;if(0===s)return this;const n=fd(s,i),r=function(t,i,e){const s=t/i,n=t-s*i;if(n===BigInt(0))return s;if(e===tm.aI)return n<BigInt(0)?s-BigInt(1):s;if(e===tm.uI)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<i?s:s-BigInt(1):t<i?s:s+BigInt(1)}}(this.lT*BigInt(i/n),BigInt(s/n),e);return new t(r,i)}tN(t){if(this===t)return ws.Zr;if(0===this.cM||0===t.cM)return Zv(this,t);if(this.MN())return t.MN()?ws.Zr:t.hN()?ws.Jf:ws.$f;if(t.MN())return this.hN()?ws.$f:ws.Jf;const i=_.min(this.cM,t.cM),e=this.ZN(i,tm.cI).lT,s=t.ZN(i,tm.cI).lT;return e>s?ws.Jf:e<s?ws.$f:ws.Zr}aN(){return 0===this.cM?function(t){0;return t.cN()?t:t.hN()?on.iI:on.eI}(this):new t(-this.lT,this.cM)}nS(i){if(0===this.cM||0===i.cM)return function(t,i){0;if(t.cN()||i.cN())return on.tI;if(t.lN()&&i.lN())return t.hN()===i.hN()?t:on.tI;return t.lN()?t:i}(this,i);if(this.MN())return i;if(i.MN())return this;const e=_.max(this.cM,i.cM),s=this.ZN(e,tm.cI),n=i.ZN(e,tm.cI);return new t(s.lT+n.lT,e)}zN(i){if(this.cN()||S(i))return t.tI;if(this.lN()||!isFinite(i)){if(this.MN()||0===i)return t.tI;{const e=this.hN()?t.eI:t.iI;return i<0?e.aN():e}}return this.MN()?this:new t(0===i?BigInt(0):this.lT*BigInt(i),this.cM)}FN(i){if(this.cN()||S(i))return t.tI;if(this.lN())return isFinite(i)?0===i?1/i<0?this.aN():this:i<0?this.aN():this:t.tI;if(!isFinite(i))return new t(BigInt(0),this.cM);if(this.MN())return 0===i?t.tI:new t(BigInt(0),this.cM);if(0===i){const e=this.hN()?t.eI:t.iI;return 1/i<0?e.aN():e}return new t(this.lT/BigInt(i),this.cM)}lI(){const t=this.wI();return[t.low,t.high,this.cM]}constructor(t,i){super(),this.lT=BigInt.asIntN(64,t),this.cM=i>>>0}};on.dI=void 0,on.fI=void 0,on._I=void 0,on.gI=void 0,function(t){t[t.aI=0]="aI",t[t.uI=1]="uI",t[t.cI=2]="cI"}(tm||(tm={}));var A=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?on:yt;function im(t,i){return t.tN(i)}function an(t,i){return void 0!==t?void 0!==i?A.XN(t,i):t:i}var em=9e4,Ue=ei((()=>A._N(8589934592,em))),sm=ei((()=>Ue().FN(2)));var jc={vI:0,mI:1/0,pI:0},nm=6,rm=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],om=[" ","\t","\n","\f","\r"],hm=/^\d*$/,am=/.*[0-9]+.*/,um=/^[\d.-]+$/,cm=/(^\.|\.$)/,lm=/(\D\.|\.\D)/;function dm(t,i){void 0===i&&(i=jc);return fm(ac(vh(t),new Bi),i)}function fm(t,i){void 0===i&&(i=jc);const e={L:[],AI:[],yI:[]},s=_m(t),n=new Bi;if(Tm(s),cr(s,(t=>"\n"!==t),n),n.Ku>=s.length)return e;if(n.KA(1),"\n"!==s.charAt(n.Ku)){pm(gm(s,n,false,!0,e,i),e)}else n.KA(1);for(cr(s,(t=>"\n"===t),n);n.Ku<s.length;){pm(gm(s,n,false,!1,e,i),e),cr(s,(t=>"\n"===t),n)}return e}function _m(t){const i=Gf(t,"\0"," "),e=Gf(i,"\r\n","\n");return Gf(e,"\r","\n")}function cr(t,i,e){const s=e.Ku;for(;e.Ku<t.length&&i(t.charAt(e.Ku));)e.KA(1);return t.substring(s,e.Ku)}function gm(t,i,e,s,n,r){let o,h=0,a=i.Ku,u="",c=!1,l=!1,d=null,f=null,_=null;for(;!c;)if(o=cr(t,(t=>"\n"!==t),i),h++,i.Ku>=t.length?c=!0:i.KA(1),$i(o,"--\x3e")){if(s||1!==h&&(2!==h||l)){i.JA(a);break}l=!0,a=i.Ku,d=new Qv(0,0,"",!1,u);try{Am(o,n.AI,d,r),u=""}catch(t){ra.vp(t),d=null}}else{if(""===o)break;s&&I(o,"X-TIMESTAMP-MAP")&&(n.MI=wm(o)),s||2!==h||e||(Da("STYLE",u.replace(/ /g,""))?(f={Av:Nv.vS},u=""):Da("REGION",u.replace(/ /g,""))&&(_=new Hv("",100,3,0,100,0,100,""),u="")),u&&(u+="\n"),u+=o,a=i.Ku}if(d)return d.O=u,d;if(f);else if(_)return function(t,i){const e=t.split(/\s/),s=":";for(const t of e)if(0!==t.length&&$i(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const e=t.indexOf(s),n=t.substring(0,e),r=t.substring(e+1,t.length);switch(n.toUpperCase()){case"ID":Rm(r,i);break;case"WIDTH":Bm(r,i);break;case"LINES":zm(r,i);break;case"REGIONANCHOR":{const t=jm(r);t&&(i.WS=t[0],i.HS=t[1]);break}case"VIEWPORTANCHOR":{const t=jm(r);t&&(i.ZS=t[0],i.qS=t[1]);break}case"SCROLL":Pm(r,i)}}}(u,_),_;return null}function wm(t){const i=t.split("=")[1].trim().split(","),e=mm(i[0].trim(),"MPEGTS")?i[0]:i[1],s=mm(i[0].trim(),"LOCAL")?i[0]:i[1];var n;return{bI:vm(Number(e.split(/:(.*)/)[1].trim())||0),lh:A.$N(null!=(n=Al(s.split(/:(.*)/)[1].trim(),new Bi))?n:0)}}function vm(t){return A._N(t,em)}function mm(t,i){return I(t,i)}function pm(t,i){t&&function(t){return"cue"===t.Av}(t)?i.L.push(t):t&&function(t){return"region"===t.Av}(t)?i.AI.push(t):t&&function(t){return"stylesheet"===t.Av}(t)&&i.yI.push(t)}function Am(t,i,e,s){const n=new Bi;Nm(t,n);const r=ym(Al(t,n),s);if(Nm(t,n),"--\x3e"!==t.substring(n.Ku,n.Ku+3))throw g("Something went wrong with parsing a WebVTT Cue");n.KA(3),Nm(t,n);const o=ym(Al(t,n),s);e.YS(r,o);!function(t,i,e){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&$i(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),o=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":Lm(o,i,e);break;case"VERTICAL":Cm(o,i);break;case"D":Om(o,i);break;case"LINE":case"L":Em(o,i);break;case"POSITION":case"T":km(o,i);break;case"SIZE":case"S":xm(o,i);break;case"ALIGN":case"A":Dm(o,i)}}}(t.substring(n.Ku,t.length),e,i)}function ym(t,i){return t+i.vI}function Mm(t){return/^[0-9]$/.test(t)}function Al(t,i){const e=Gf(t,",",".");let s,n,r,o=!1;if(i.Ku>=e.length||!Mm(e.charAt(i.Ku)))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const h=cr(e,Mm,i),a=x(h,10);if((h.length>2||a>59)&&(o=!0),i.Ku>=e.length||":"!==e.charAt(i.Ku))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.KA(1);const u=cr(e,Mm,i);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const c=x(u,10);if(o||i.Ku<e.length&&":"===e.charAt(i.Ku)){if(i.Ku>=e.length||":"!==e.charAt(i.Ku))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.KA(1);const t=cr(e,Mm,i);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=x(t,10)}else s=0,n=a,r=c;if(i.Ku>=e.length||"."!==e.charAt(i.Ku))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.KA(1);const l=cr(e,Mm,i),d=x(l,10);if(c>59||r>59)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function bm(t){return Tm(_m(t))}function Tm(t){if(t.length<nm)return!1;for(const i of rm)if(I(t,i))return!0;return!1}function Sm(t){return Ai(om,t)}function Nm(t,i){for(;i.Ku<t.length&&Sm(t.charAt(i.Ku));)i.KA(1)}function Im(t){const i=t.lastIndexOf("%");if(i>-1){const e=C(t.substring(0,i));if(!S(e)&&e>=0&&e<=100)return e}return null}function Dm(t,i){const e=t.toLowerCase();switch(e){case"start":case"center":case"end":case"left":case"right":i.TS=e;break;case"middle":i.TS="center"}}function Em(t,i){let e,s;const n=t.indexOf(",");if(n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s=""),!am.test(e))return;let r,o;if(el(e,"%")){const t=Im(e);if(null===t)return;r=t,o=!1}else{if(!um.test(e)||e.lastIndexOf("-")>0)return;const t=e.indexOf(".");if(t>=0&&(t!==e.lastIndexOf(".")||!lm.test(e)||cm.test(e)))return;if(r=C(e),S(r))return;o=!0}switch(i.SS=r,i.ES=o,s=s.toLowerCase(),s){case"start":case"center":case"end":i.NS=s;break;case"middle":i.NS="center"}}function km(t,i){let e,s;const n=t.indexOf(",");n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s="");const r=Im(e);if(null!==r)switch(i.po=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":i.IS=s;break;case"start":i.IS="line-left";break;case"middle":i.IS="center";break;case"end":i.IS="line-right"}}function Lm(t,i,e){const s=ru(e,(i=>i.o===t));void 0!==s&&(i.DS=s)}function xm(t,i){const e=Im(t);null!==e&&(i.By=e)}function Cm(t,i){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":i.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":i.Pt="lr";break;default:i.Pt=""}}function Om(t,i){"VERTICAL"===t.toUpperCase()?i.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(i.Pt="lr")}function jm(t){if(t.indexOf(",")>=0){const i=Im(t.substring(0,t.indexOf(","))),e=Im(t.substring(t.indexOf(",")+1,t.length));return[Qh(i||0,0,100),Qh(e||100,0,100)]}return null}function Rm(t,i){i.o=t}function Pm(t,i){"up"===t.toLowerCase()&&(i.XS="up")}function zm(t,i){hm.test(t)&&(i.VS=x(t))}function Bm(t,i){const e=Im(t);null!==e&&(i.ji=e)}function Um(t){return t&&"TI"in t?t.TI:t}var Kh,Qm=class extends rl{get SI(){return this.NI}get II(){return this.DI}get AI(){return this.EI}get kI(){return this.LI}get va(){return this.Xa||(this.Xa=function(t){return ro(ht(t),{get extent(){return t.SI},get styles(){return t.II},get regions(){return t.AI},get metadata(){return Um(t.kI)},get content(){return Um(t.O)}})}(this)),this.Xa}FS(t){return!!of(this.SI,t.SI)&&(!!of(this.II,t.II)&&(!!of(this.AI,t.AI)&&(this.kI&&t.kI?!!this.kI.xI(t.kI)&&(this.O&&t.O?this.O.xI(t.O):this.O===t.O):this.kI===t.kI)))}constructor(t,i,e,s,n,r,o,h){super(t,i,e,s),this.NI=n,this.DI=r,this.EI=o,this.LI=h||void 0}};function Ka(t){return 1===t.CI}function Fm(t){return 3===t.CI}!function(t){t[t.OI=1]="OI",t[t.jI=2]="jI",t[t.Ru=3]="Ru",t[t.RI=4]="RI",t[t.zI=9]="zI"}(Kh||(Kh={}));var Ym=class{get BI(){return this.QI.UI(!0)}get MS(){return this.FI}get bS(){return this.YI}constructor(t,i,e){this.FI=t,this.YI=i,Ka(e)?this.QI=function(t,i,e){for(const t of["begin","end","dur"])e.GI(t);return e}(0,0,e):this.QI=e}};var la={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function eo(t){return $i(t,la.APPLICATION_MP4)||$i(t,la.VIDEO_MP4)||$i(t,la.AUDIO_MP4)}function Gm(t){return $i(t,la.VIDEO_WEBM)||$i(t,la.AUDIO_WEBM)}var Vm=class{VI(t){for(const[i,e]of this.WI)if(i.toLowerCase()===t.toLowerCase())return e}constructor(t,i){this.Av=t,this.WI=i}};function bu(t){const i=t.trim(),e=i.indexOf(";");if(e<0)return new Vm(i,[]);const s=i.substr(0,e).trim(),n=i.substr(e+1).trim(),r=[];let o=0,h=!1;for(let t=0;t<n.length;t++){const i=n[t];if(h||";"!==i)'"'===i&&(h=!h);else{const i=Wm(n.substr(o,t));i&&r.push(i),o=t+1}}if(o!==n.length){const t=Wm(n.substr(o));t&&r.push(t)}return new Vm(s,r)}function Wm(t){const i=t.indexOf("=");if(i<0)return;const e=t.substr(0,i).trim();let s=t.substr(i+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[e,s]}function Hm(t){const i=t.trim(),e=i.indexOf(";");return e<0?i:i.substr(0,e).trim()}function Xm(t){let i=t;const e=i.match(/^avc1\.(\d+)\.(\d+)$/);if(e){const t=Number(e[1]),s=Number(e[2]);i="avc1."+Aa((t<<16|s).toString(16),6,"0")}return i}var Zm="http://www.w3.org/XML/1998/namespace";function qm(t,i,e,s){let n=t.HI(e,i);return 0===n.length&&(n=t.XI(s+":"+i)),n}function Km(t){const i={};for(const e of t.ZI)i[e.qI]=e.lT;return i}var Jm=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,$m=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,tp="http://www.w3.org/ns/ttml";function ip(t,i,e,s){void 0===e&&(e=jc),void 0===s&&(s=la.APPLICATION_TTML_XML);let n=[];const r=vh(t);return s===la.APPLICATION_MP4?n=function(t,i,e){const s=Ot.Wy(t),n=Gi(s,X.PA);if(!n)return[];return np(vh(n.ly),i,e)}(r,i,e):s===la.APPLICATION_TTML_XML&&(n=np(r,i,e)),n}function ep(t,i,e){return void 0===e&&(e=jc),rp(t,i,e)}function sp(t,i){const e=dp(i.BI),s={};for(const i of e)s[i]=t[i];return s}function np(t,i,e){return rp(ac(t,new Bi),i,e)}function rp(t,i,e){const s=[];let n;try{n=ra.KI(t)}catch(t){return s}const r=n.JI;if("tt"!==r.qI)return s;const o=r.HI(tp,"head")[0],h=r.HI(tp,"body")[0];if(!h||!o)return s;const a=hp(r.$I("tts:extent")),u=a?{width:a[0],height:a[1]}:void 0,c=function(t){const i={},e=t.HI(tp,"styling")[0],s=e&&e.HI(tp,"style")||[];for(const t of s){i[t.tD(Zm,"id")]=Km(t)}return i}(o),l=function(t){const i={},e=t.HI(tp,"layout")[0],s=e&&e.HI(tp,"region")||[];for(const t of s){const e=t.tD(Zm,"id");if(!e)continue;i[e]=Km(t);const s=lp(t);for(const t in s)nd.call(s,t)&&(i[e][t]=s[t])}return i}(o),d=a?function(t,i){const e=Ca(t);for(const t of w.keys(e)){const s=hp(e[t].extent);if(s){const n=op(s[0],i[0]),r=op(s[1],i[1]);e[t].extent=n+" "+r}const n=hp(e[t].origin);if(n){const s=op(n[0],i[0]),r=op(n[1],i[1]);e[t].origin=s+" "+r}}return e}(l,a):l,f=o.HI(tp,"metadata")[0],_=ap(h,e.vI,e.mI,e.pI);for(const t of _){const i=sp(d,t);s.push(new Qm(t.MS,t.bS,t.BI,!1,u,c,i,f))}return s}function op(t,i){return t/i*100+"%"}function hp(t){if(!t)return;const i=t.split(" ",2);if(2!==i.length)return;const[e,s]=i;if(!el(e,"px")||!el(s,"px"))return;return[Number(e.slice(0,-2)),Number(s.slice(0,-2))]}function ap(t,i,e,s){let n,r=i,o=e,h=[];const a=[];if(Ka(t)){var u,c;r=null!=(u=cp(t.$I("begin"),s))?u:r,n=cp(t.$I("dur"),0),o=null!=(c=cp(t.$I("end"),s))?c:void 0!==n?r+n:o;const i=t.iD;for(let e=0;e<i.length;e++)("body"===t.qI||"div"===t.qI)&&i[e].CI>1||(h=h.concat(ap(i[e],r,o,s)))}const l=function(t,i,e){const s=[];s.push(t,i);for(const t of e)s.push(t.MS,t.bS);s.sort(wd);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(Ns(s,t+1),t--,n=s.length);return s}(r,o,h);for(let i=0;i<l.length-1;i++){const e=up(l[i],l[i+1],h);if(e.length<=0&&fp(t)){const e=t.UI(!1);a.push(new Ym(l[i],l[i+1],e))}else if(e.length>0){const s=t.UI(!1);e.forEach((t=>s.eD(t.BI))),a.push(new Ym(l[i],l[i+1],s))}}return a}function up(t,i,e){const s=[];for(let n=0;n<e.length;n++){const r=e[n].MS,o=e[n].bS;(r>=t&&o<=i||r<i&&o>=i||r<t&&o>t)&&s.push(e[n])}return s}function cp(t,i){if(t){if(Jm.test(t)){const e=Jm.exec(t);if(!e)return;const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,o=e[6];return 3600*s+60*n+r+(o?Number(o)*.1**o.length:0)+i}if($m.test(t)){const e=$m.exec(t);if(!e)return;const s=Number(e[1]);let n;switch(e[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+i}}}function lp(t){const i={},e=t.XI("style")||[];for(const t of e){const e=Km(t);for(const t in e)nd.call(e,t)&&(i[t]=e[t])}return i}function dp(t){let i,e=[];if(Ka(t)){i=t.$I("region"),i&&e.push(i);const s=t.iD;for(let t=0;t<s.length;t++)e=e.concat(dp(s[t]))}return e}function fp(t){if(Ka(t)){const i=t.qI.toUpperCase(),e=Boolean(t.$I("smpte:backgroundImage"));return"BR"===i||e}return t.CI===Kh.Ru}function _p(t){const i=function(t){try{return ra.KI(t).JI}catch(t){}}(t);return"tt"===(null==i?void 0:i.qI)}var Qe,iu=class extends La{tt(t){return super.tt(t)}it(t){const i=super.it(t);return i&&(t._v=yi.Ch),i}fa(){return bf(this)}};!function(t){t.HA="subtitles",t.sD="captions",t.nD="descriptions",t.Fn="chapters",t.ZA="metadata",t.rD="thumbnails"}(Qe||(Qe={}));var gp=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function wp(t){return"string"==typeof t&&Ai(gp,t)}function vp(t,i){return!(!wp(t)||!wp(i))&&(t===i||"subtitles"===t&&"captions"===i||"captions"===t&&"subtitles"===i)}var vu,mp=class extends ao{constructor(t,i,e,s,n){super(t,i,n),this.url=e,this.status=s}};!function(t){t.oD="HttpOpenError",t.hD="HttpResponseError",t.aD="HttpTimeoutError"}(vu||(vu={}));var Re=class extends tt{get uD(){return this.cD}constructor(t,i,e){super(i,e),this.cD=t}};var so=class extends Re{get name(){return vu.hD}get lD(){return this.dD}constructor(t,i,e){super(t.uD,null!=e?e:function(t){return"Error while loading "+t.uD.zu+", status code "+t.fD}(t),i),this.dD=t}};var pp,Ap=class extends Re{get name(){return vu.aD}constructor(t,i){super(t,function(t){return"Request for "+t.zu+" timed out after "+t._D+" seconds."}(t),i)}};function De(t){return t instanceof Re}function Nc(t){return t instanceof so}function yp(t){return t===Qe.HA||t===Qe.sD}function Mp(t){return t.some(bp)}function bp(t){return $i(t,"stpp")}function Tp(t){return t.some(Sp)}function Sp(t){return $i(t,"vtt")||$i(t,"wvtt")}function Np(t,i){return eo(t)&&Tp(i)}function Ip(t,i){return t===Qe.rD||t===Qe.ZA&&i===Qe.rD}function Dp(t,i,e,s){for(const n of t.L.Rw){if(n.MS>e)break;i<=n.bS&&!Ai(s,n)&&s.push(n)}}function Ep(t,i){return gd(t.Xw,i.Xw)}function kp(t,i,e,s){const n=function(t){switch(t){case O.WEBVTT:return"WebVTT";case O.SRT:return"SRT";case O.TTML:return"TTML";default:return""}}(t);return new mp(qa.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",i,e,s)}function Le(t,i){const e=[];for(const s of t.L.Rw)if(s.bS<=i)e.push(s);else if(s.MS>=i)break;for(const i of e)t.gD(i)}function Lp(t,i){if(t.U>0){const e=10,s=t.Cn(0),n=_.max(0,s-e);for(const t of i)t.wD(n)}}!function(t){t.vD="vtt",t.SA="wvtt",t.mD="stpp"}(pp||(pp={}));var Ft,xn=class extends Mo{tt(t){t.yn(ct.ra,this.pD),this.Z.tt(t),this.yD(t)}it(t){t.fn(ct.ra,this.pD),t._v=yi.Ch,this.Z.it(t)}MD(t){}bD(t){}yD(t){t._v!==yi.Ch?this.MD(t):this.bD(t)}TD(){for(const t of this.Z.Rw)t.fn(ct.ra,this.pD),t.gn()}wD(t){if(t>0)for(const i of this.Z.Rw)Le(i,t)}tr(){return this.TD(),this.Z.tr(),Promise.resolve()}async gn(){this.Vo(),await this.tr(),this.Z.gn()}constructor(...t){super(...t),this.Z=new iu,this.pD=t=>{const i=t.Lt;this.yD(i)}}};!function(t){t.SD="arraybuffer",t.ND="json",t.DD="stream",t.Ru="text"}(Ft||(Ft={}));var Cl,li,fo,Bu,xp,Xo=class t{append(t,i){let e=t,s=i;e=Cp(e),s=Op(s);const n=e.toLowerCase();if(this.mf.hasOwnProperty(n)){const t=this.mf[n],i=t[1];t[1]=i?i+", "+s:s}else this.mf[n]=[e,s]}delete(t){const i=Cp(t).toLowerCase();delete this.mf[i]}get(t){const i=Cp(t).toLowerCase();return this.mf.hasOwnProperty(i)?this.mf[i][1]:null}has(t){const i=Cp(t).toLowerCase();return this.mf.hasOwnProperty(i)}set(t,i){let e=t;e=Cp(e);const s=e.toLowerCase();this.mf[s]=[e,Op(i)]}forEach(t,i){for(const e in this.mf)this.mf.hasOwnProperty(e)&&t.call(i,this.mf[e][1],e,this)}asList(){const t=[];for(const i in this.mf)if(this.mf.hasOwnProperty(i)){const[e,s]=this.mf[i];t.push([e,s])}return t}ED(){const t={};return this.forEach(((i,e)=>{t[e]=i})),t}kD(t){t.forEach(((t,i)=>{this.append(i,t)}))}LD(t){t.forEach(((t,i)=>{this.set(i,t)}))}constructor(i){this.mf={},i instanceof t?i.asList().forEach((t=>{let[i,e]=t;this.append(i,e)})):Array.isArray(i)?i.forEach((t=>{let[i,e]=t;this.append(i,e)})):i&&w.getOwnPropertyNames(i).forEach((t=>{this.append(t,i[t])}))}};function Cp(t){let i=t;if("string"!=typeof i&&(i=String(i)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(i))throw new b("Invalid character in header field name");return i}function Op(t){let i=t;return"string"!=typeof i&&(i=String(i)),i}!function(t){t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT"}(Cl||(Cl={})),function(t){t.jT="",t.xD="manifest",t.CD="segment",t.OD="preload-hint",t.jD="content-protection"}(li||(li={})),function(t){t.jT="",t.RD="initialization-segment",t.PD="fairplay-license",t.zD="fairplay-certificate",t.BD="widevine-license",t.UD="widevine-certificate",t.QD="playready-license",t.FD="clearkey-license",t.YD="aes128-key"}(fo||(fo={})),function(t){t.jT="",t.WA="audio",t.VA="video",t.Ru="text",t.OT="image"}(Bu||(Bu={})),function(t){t.GD="same-origin",t.mp="no-cors",t.VD="cors",t.WD="navigate"}(xp||(xp={}));var Lc,Zi=class{constructor(t,i){const e=t.zu;let s,n,r,o,h,a,u,c,l,d,f,_,g,w,v;var m,p,A;i?(s=i.HD,n=i.XD,r=i.ZD,o=i.qD,h=i._D,a=i.KD,u=i.f_,c=i.Av,l=i.JD,d=i.$D,f=i.tE,_=i.iE,g=i._v,w=i.eE,v=i.sE):(s=null,n={},r="GET",o=Ft.Ru,h=0,a=0,c="",l="",d="",f=!1,g=void 0,w=!1,v=void 0),this.zu=e,this.HD=t.HD||s,this.XD=new Xo(t.XD||n),this.ZD=t.ZD||r,this.qD=t.qD||o,this._D=void 0!==t._D?Number(t._D)||0:h,this.KD=void 0!==t.KD?Number(t.KD)||0:a,this.f_=t.f_||u||(new Bd).f_,this.Av=t.Av||c,this.JD=t.JD||l,this.$D=t.$D||d,this.tE=void 0!==t.tE?Boolean(t.tE):f,this.iE=t.iE||_,this._v=null!=(m=t._v)?m:g,this.eE=null!=(p=t.eE)?p:w,this.sE=null!=(A=t.sE)?A:v}},jp=class extends os{get error(){return this.errorObject.message}fa(){return this}constructor(t){super(hi.ha),this.errorObject=t}},kr=class extends xn{nE(t){if(!t.src)return;const i=t.kind||Qe.HA,e=this.oE.rE(i,t.id,t.label,t.srclang,t.default);return e.yv=fi(t.src),this.tt(e),e}async hE(t,i){t.Sg=Ls.LOADING;const e=new Zi({zu:t.yv,qD:Ft.Ru,ZD:Cl.GET,f_:i});let s,n;try{const t=await this.aE.uD(e);n=t.fD,s=await t.uE()}catch(i){return me(i),t.Sg=Ls.ERROR,void t.Co(new jp(function(t,i){let e=i,s=0;if(De(t)&&t.name===vu.oD)e=t.uD.zu;else if(Nc(t)){const i=t.lD;if(e=i.cE,s=i.fD,0===s)return new mp(qa.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",e,s,t)}return new mp(qa.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",e,s,t)}(i,t.yv)))}try{const i=function(t){return bm(t)?O.WEBVTT:_p(t)?O.TTML:O.SRT}(s);t.Av=i;let e=[];if(i===O.WEBVTT||i===O.SRT){e=fm(s).L}else i===O.TTML&&(e=ep(s,t));for(const i of e)t.lE(i)}catch(i){return me(i),t.Sg=Ls.ERROR,void t.Co(new jp(kp(t.Av,t.yv,n,i)))}t.Sg=Ls.LOADED}MD(t){Ai(this.Z.Rw,t)&&t.Sg===Ls.NONE&&this.hE(t,this.dE.f_).catch(_t)}$n(){}async tr(){this.dE.g_(),this.dE=new Bd;for(const t of this.Z.Rw)this.oE.fE(t);await super.tr()}constructor(t,i){super(),this.dE=new Bd,this.oE=t,this.aE=i}};function Rp(t,i){for(const e of t)if(e.zt===i&&e._E)return e}function Pp(t,i){zp(Rp(t.Rw,i))}function zp(t){void 0!==t&&(t._v=yi.Jn)}function Bp(t,i){const e=Rp(t.Rw,i)||function(t,i){for(const e of t)if(e.zt===i)return e}(t.Rw,i);zp(e)}function Up(t){for(const i of gp)i===Qe.Fn?Bp(t,i):Pp(t,i)}!function(t){t.gE="web",t.wE="android",t.vE="android-tv",t.mE="ios",t.pE="tvos",t.AE="chromecast",t.yE="theoliveweb"}(Lc||(Lc={}));var th=Il?Il.userAgent:"",Qp=th.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Fp=th.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Yp=th.match(/Android ([0-9\.]+)/i),Gp=th.match(/Windows NT ([0-9\.]+)/i),Vp=th.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),Wp=th.match(/Firefox\/([0-9\.]+)/i),Hp=th.match(/OPR\/(\d+\.\d+)/i),Xp=th.match(/Tizen ([0-9\.]+)/i),Zp=th.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),qp=class{get Je(){return this.bE}get TE(){return this.SE}get NE(){return this.DE}get EE(){return this.kE}get LE(){return this.xE}get CE(){return this.OE}get jE(){return this.RE}get PE(){return this.zE}get BE(){return this.UE}get QE(){return this.FE}get YE(){return this.GE}get Ga(){return this.VE}get WE(){return this.HE}get XE(){return this.ZE||this.qE}get td(){return this.KE}get Qs(){return this.JE}get $E(){return this.ek}get nk(){return this.rk}get hk(){var t;return null!=(t=this.ck)?t:this.lk}get dk(){return this.fk}get _k(){return this.gk}get wk(){return this.vk}get pk(){return this.Ak}get yk(){return this.Mk}get bk(){return this.Tk}get Sk(){return this.Nk}get Ik(){return this.Dk}get Ek(){return this.Lk}get xk(){return this.Ck}get Ok(){return this.jk}get Rk(){return this.Pk}get zk(){return this.Bk}get Uk(){return this.Qk}get Fk(){return this.Yk}get Gk(){return this.Vk}get Wk(){return this.Hk}get Xk(){return this.Zk}get qk(){return!(!this.yk&&!this.wk)&&this.hk<=56}get Kk(){return this.Jk}get $k(){return this.tL}get iL(){return this.eL}get sL(){return this.nL}get rL(){return this.oL}get hL(){return this.aL}get uL(){return this.cL}constructor(){this.bE=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||Il&&Il.msMaxTouchPoints),this.SE=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(th)||/(macintosh|mac(?=_powerpc)\s)/i.test(th),this.DE=/Windows NT/i.test(th),this.kE=Gp?C(Gp[1]):0,this.xE=/Android/i.test(th),this.OE=Yp?C(Yp[1]):0,this.RE=/windows phone (8|8\.1)/i.test(th),this.zE=/iPhone/i.test(th),this.UE=/iPad/i.test(th),this.FE=this.SE&&this.bE&&!this.UE,this.GE=/iPod/i.test(th),this.KE=/Mobile Safari/i.test(th),this.ZE=/EOS\d*STB/i.test(th),this.qE=/APP\d*STB/i.test(th),this.VE=(this.zE||this.UE||this.FE||this.GE)&&!this.RE,this.HE=Zp?C(Zp[2]):0,this.JE=this.RE||this.VE||this.xE||this.KE,this.ek=/CriOS/i.test(th),this.rk=Boolean(self.chrome&&/google/i.test(Il.vendor))||this.ek,this.fk=this.rk&&/Edg\//i.test(Il.userAgent),this.gk=Fp?x(Fp[1],10):0,this.cL=Boolean(self.chrome||/Chrome/i.test(th)||/CriOS/i.test(th)),this.lk=Qp?x(Qp[1],10):0,this.vk=/SMART-TV.*Tizen/i.test(th),this.Ak=Xp?C(Xp[1]):0,this.ck=this.Ak>0?function(t){return t>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0}(this.Ak):void 0,this.Mk=/webos|web0s/i.test(th),this.Tk=/VIZIO/i.test(th),this.Nk=/Edge\/\d+/i.test(th),this.Dk=/Trident/i.test(th),this.Lk=this.Dk&&!self.ActiveXObject&&"ActiveXObject"in self,this.Ck=/Vivaldi/i.test(th),this.jk=/Firefox/i.test(th)&&!/Seamonkey/i.test(th),this.Pk=Wp?C(Wp[1]):0,this.Bk=/Safari/i.test(th)&&!/Chrome/i.test(th)&&!this.RE&&!this.vk,this.Qk=Vp?C(Vp[2]):0,this.Yk=Boolean(Hp),this.Vk=Hp?C(Hp[1]):0,this.Hk=/CrKey/.test(th),this.Zk=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(th),this.Jk="web"===Lc.vE,this.tL="web"===Lc.wE,this.eL=this.tL||this.Jk,this.nL="web"===Lc.mE,this.oL="web"===Lc.pE,this.aL="web"===Lc.AE}};qp.lL=new qp;var wc,Kp,Jp,Ua,$p,tA,Po=qp.lL,Cs=class extends Os{constructor(){super(Tf.Jv)}};var vr={Av:ho.Dp,dL:Fu,fL:"cenc",_L:L_,gL:du,wL:"PlayReady"},yu={Av:ho.Ep,dL:C_,fL:"cenc",_L:x_,gL:ie,wL:"Widevine"},iA={Av:ho.kp,dL:P_,fL:"skd",_L:R_,gL:Bt,wL:"FairPlay"},eA={Av:ho.kp,dL:"com.apple.fps",fL:"sinf",_L:R_,gL:Bt,wL:"FairPlay"},br={Av:ho.Lp,dL:"org.w3.clearkey",fL:"cenc",_L:O_,gL:j_,wL:"ClearKey"},sA=[vr,yu,iA,br],nA=[vr,yu,eA,br];function rA(t){return sA.filter((i=>i.gL===t.toLowerCase()))}var oA,hA=["cenc"],aA=["cbcs","cbcs-1-9"],uA=class extends Os{constructor(t){super("vL"),this.mL=t}},cA=class extends Os{constructor(t,i,e,s){super("pL"),this.mL=t,this.AL=i,this.pL=e,this.yL=s}},lA=class extends Os{constructor(){super("lt")}};!function(t){t.Cv="ML",t.bL="TL"}(oA||(oA={}));var On=class extends Os{constructor(t,i){super("ML"),this.fL=t,this.SL=i}},dA=class extends Os{constructor(){super("TL")}},fA=new j([0]).buffer,_A=class{get By(){return this.Xu.length}NL(t){for(const i of this.Xu)if(i[0]===t)return!0;return!1}IL(t){for(const i of this.Xu)if(i[0]===t)return i[1]}DL(t,i){this.Xu.forEach((i=>t(i[1],i[0])),i)}EL(t,i){this.Xu.push([t,i])}kL(){To(this.Xu)}constructor(){this.Xu=[]}},Oi=class{LL(t){this.lf&&(this.lf(t),this.h_())}xL(t){this.CL&&(this.CL(t),this.h_())}g_(){this.OL.catch(Br),this.xL(new Fh)}w_(t){t.then((t=>this.LL(t)),(t=>this.xL(t)))}h_(){this.lf=void 0,this.CL=void 0}constructor(){this.OL=new Promise(((t,i)=>{this.lf=t,this.CL=i}))}};function gA(){return new j([8,4]).buffer}function wA(t,i){return t===Fu?function(t){if(t.byteLength<2*vA.length)return t;const i=new DataView(t,0,2*vA.length),e=Hg(i,!0);if(e===vA)return t;return function(t){const i='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',e='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+i+$_(t)+e;return Xg(s,!0).buffer}(t)}(i):i}var vA="<PlayReady";var Rr=class extends tt{constructor(t,i,e,s){super(t,s),this.jL=i,this.RL=e}},mA=function(t,i){return(mA=w.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)w.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)};function zt(t,i){if("function"!=typeof i&&null!==i)throw new b("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}mA(t,i),t.prototype=null===i?w.create(i):(e.prototype=i.prototype,new e)}function pA(t,i,e){return t.indexOf?t.indexOf(i,e):Array.prototype.indexOf.call(t,i,e)}(function(){function t(t,i){this.PL=t,this.zL=i}t.prototype.get=function(t){var i=this.PL.get(t);if(0===this.zL||void 0===i)return i;var e=this.PL.get(t+1)||0,s=i&(1<<8-this.zL)-1,n=e>>8-this.zL;return(s<<this.zL)+n},t.prototype.getBit=function(t){if(!(t<0)){var i=this.PL.get(_.floor((t+this.zL)/8));if(void 0!==i)return(i&1<<7-this.zL-t%8)>0?1:0}},w.defineProperty(t.prototype,"bitLength",{get:function(){return this.PL.bitLength-this.zL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"length",{get:function(){return this.PL.length},enumerable:!1,configurable:!0})})(),_.pow(2,-52);function AA(t,i,e){return _.min(_.max(t,i),e)}function Bc(t,i){return t>>8-i}function yA(t,i){return t&(1<<i)-1}var Ws=function(){function t(t){this.BL=t,this.UL=0,this.QL=0}return w.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.UL+this.QL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"done",{get:function(){return this.UL===this.BL.length&&0===this.QL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"location",{get:function(){return{byte:this.UL,bit:this.QL}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var i=new t(this.BL);return i.seek(this.UL,this.QL),i},t.prototype.canReadBits=function(t){return 8*this.UL+t+this.QL<=8*this.BL.length},t.prototype.canReadBytes=function(t){return 0===this.QL?this.UL+t<=this.BL.length:this.UL+t<this.BL.length},t.prototype.incBit=function(){this.QL++,this.QL>7&&(this.UL++,this.QL=0)},t.prototype.seek=function(t,i){this.UL=t,this.QL=i},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new g("Cannot read past end of buffer.");return this.BL.get(this.UL)>>7-this.QL&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new g("Cannot read past end of buffer.");if(0===this.QL)return this.BL.get(this.UL++);var t=yA(this.BL.get(this.UL),8-this.QL),i=Bc(this.BL.get(this.UL+1),this.QL);return this.UL++,t<<this.QL|i},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readBit());return i},t.prototype.readUInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var i=0;if(0===this.QL&&t%8==0)for(var e=t-8;e>=0;e-=8)i|=this.readByte()<<e;else for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i},t.prototype.readInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var i=this.readUInt(t);return 0===(i&1<<t-1)?i:i-_.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var i=1<<t;return i+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new g("Skipping over the buffer edge is not allowed.");var i=this.QL+t;this.UL+=i>>3,this.QL=7&i},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new g("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readByte());return String.fromCharCode.apply(String,i)},t}(),MA=function(t,i){return t===i?0:t<i?-1:t>i?1:S(t)?S(i)?0:1:-1},bi=function(){function t(){this.FL=[],this.YL=[],this.GL=0}return t.from=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var s=new t,n=0,r=i;n<r.length;n++){var o=r[n];s.pushRange(o)}return s},t.prototype.pushRange=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=t.length),e<0)throw new g("The buffer length must be positive.");if(0!==e){if(0===this.YL.length)this.YL.push(0);else{var s=this.YL[this.YL.length-1]+this.FL[this.FL.length-1].length;this.YL.push(s)}this.FL.push(t.subarray(i,i+e)),this.GL+=e}},t.prototype.concat=function(i){var e=new t;return e.pushRange(this.join()),e.pushRange(i.join()),e},t.prototype.copy=function(t,i,e,s){if(void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=this.length),i<0||e<0||s<0)throw new RangeError;return this.slice(e,s).copyInternal(t,i)},t.prototype.copyInternal=function(t,i){for(var e=0,s=i,n=0,r=this.FL;n<r.length;n++){var o=r[n];t.set(o,s),e+=o.length,s+=o.length}return e},t.prototype.clear=function(){this.FL=[],this.YL=[],this.GL=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var i=this.findContainingBufferIndex(t),e=t-this.YL[i];return this.FL[i][e]}},w.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.FL.length<1)return-1;if(this.FL.length>1){var i=this.join();this.clear(),this.pushRange(i)}var e=this.FL[0];return"number"==typeof t?pA(e,t):"undefined"!=typeof Buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength).indexOf(t):function(t,i){if(0===i.length)return 0;for(var e=i[0],s=i.length,n=t.length-s,r=0;r<=n&&!((r=pA(t,e,r))<0||r>n);r++){for(var o=r+1,h=r+s,a=1;o<h&&t[o]===i[a];o++,a++);if(o===h)return r}return-1}(e,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,i,e){if(0!==t.length){var s=0,n=t.length-1;if(1!==e(t[s],i)){if(1===e(i,t[n]))return n;for(;s!==n;){var r=_.ceil((s+n)/2);e(t[r],i)<=0?s=r:n=r-1}return s}}}(this.YL,t,MA)},t.prototype.join=function(){if(1===this.FL.length)return this.FL[0];var t=new j(this.length);return this.copyInternal(t,0),t},w.defineProperty(t.prototype,"length",{get:function(){return this.GL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,i){if(i<=0||i>4)throw new g("Expected byteLength to be between 0 and 4 but was "+i);if(t<0||t>this.length-i)throw new g("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-i)+")");if(1===i)return this.get(t);for(var e=0,s=0;s<i;s++)e+=this.get(t+s)*_.pow(2,8*(i-s-1));return e},t.prototype.slice=function(i,e){void 0===e&&(e=this.length);var s=AA(i,0,this.length),n=AA(e,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,o=this.findContainingBufferIndex(s),h=this.FL[o],a=s,u=a-this.YL[o];a+h.length-u<n;)r.pushRange(h,u,h.length-u),o+=1,u=(a+=h.length-u)-this.YL[o],h=this.FL[o];var c=n-a;return r.pushRange(h,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var i=this.length-1,e=this.FL.length-1,s=this.FL[e],n=s.length-1;i>=0&&e>=0;){if(0!==s[n])break;if(0===n){if(0===e)return new t;e-=1,n=(s=this.FL[e]).length-1}else n-=1;i-=1}return this.slice(0,i+1)},t}(),bA=function(){function t(i){this.VL=i||t.BUFFER_CHUNK_SIZE,this.WL=!1,this.HL=new bi,this.BL=new j(this.VL),this.XL=0,this.ZL=0,this.QL=7}return t.prototype.closeByte=function(){this.BL[this.XL++]=this.ZL,this.XL>=this.VL&&this.closeBuffer(),this.ZL=0,this.QL=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.XL&&(this.HL.pushRange(this.BL,0,this.XL),t&&(this.BL=new j(this.VL)),this.XL=0)},w.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.QL},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.WL)throw new g("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.WL=!0,this.HL},t.prototype.writeBit=function(t){if(this.WL)throw new g("Cannot write to a closed BitWriter.");this.ZL|=t<<this.QL,0===this.QL?this.closeByte():this.QL--},t.prototype.writeByte=function(t){if(this.WL)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.ZL=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var i=this.QL;this.ZL|=Bc(t,i+1),this.closeByte(),this.ZL=yA(t,8-i)<<i+1,this.QL=i},t.prototype.writeBits=function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.WL)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.XL+t.length<=this.VL?(this.BL.set(t,this.XL),this.XL+=t.length,this.XL===this.VL&&this.closeBuffer()):(this.closeBuffer(),this.HL.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var i=this.QL;this.ZL|=Bc(t[0],i+1),this.closeByte();for(var e=1;e<t.length;e++){var s=yA(t[e-1],8-i),n=Bc(t[e],i+1);this.ZL=s<<i+1|n,this.closeByte()}this.ZL=yA(t[t.length-1],8-i)<<i+1,this.QL=i}},t.prototype.writeUInt=function(t,i){if(t<0)throw new g("Received a negative number.");if(i>32)throw new g("The max bitlength that can be provided is 32.");if(t>=_.pow(2,i))throw new g("Uint "+t+" cannot be represented in "+i+" bit(s).");if(this.isWritingStartBit&&i%8==0)for(var e=i-8;e>=0;e-=8)this.writeByte(t>>e&255);else for(e=i-1;e>=0;e--)this.writeBool((t&1<<e)>0)},t.prototype.writeInt=function(t,i){if(i>32)throw new g("The max bitlength that can be provided is 32.");if(_.abs(t)>=_.pow(2,i-1))throw new g("Signed integer "+t+" cannot be represented in "+i+" bit(s).");t<0?this.writeUInt(t+_.pow(2,i),i):this.writeUInt(t,i)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new g("Received a negative number.");for(var i=_.floor(_.log2(t+1))+1,e=0;e<i-1;e++)this.writeBit(0);this.writeUInt(t+1,i)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var i=function(t){for(var i=new j(t.length),e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}(t),e=0;e<i.length;e++)this.writeByte(i[e])},t.BUFFER_CHUNK_SIZE=1024,t}(),TA=function(){function t(t){this.rb=new bi,this.qL=t}return t.prototype.closeWriter=function(){void 0!==this.qL&&(this.rb=this.rb.concat(this.qL.close()),this.qL=void 0)},w.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.qL&&(this.qL=new bA),this.qL},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),bc=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new g("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(i){var e=this.getSize(),s=e>=t.LARGE_SIZE/8,n=16===this.boxType.length;i.writeUInt(s?1:e,32),i.writeString(n?"uuid":this.boxType),s&&(i.writeUInt(_.floor(e/t.LARGE_SIZE),32),i.writeUInt(e%t.LARGE_SIZE,32)),n&&i.writeString(this.boxType)},t.prototype.getSize=function(){var i=8+(this.boxType.length>4?16:0),e=this.getBoxContentSize()+i;return e>=t.LARGE_SIZE/8&&(e+=8),e},t.prototype.serialize=function(){var t=new TA;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=_.pow(2,32),t}();function oa(t,i){return t instanceof ii?64===i:t<_.pow(2,i)}function Qi(t,i){return _.round(t*_.pow(2,i))}function gc(t,i){for(var e=0;e<i.length;e++)t.writeByte(i[e])}function Dt(t,i){return t/_.pow(2,i)}var Ec=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!oa(e,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return zt(i,t),w.defineProperty(i.prototype,"flags",{get:function(){return this.Kd},set:function(t){this.Kd=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(bc),SA=function(t){function i(i,e){var s=t.call(this,i)||this;return s.data=e,s}return zt(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(bi.from(this.data))},i}(bc),NA=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();var IA=16384;function DA(t){var i=t.length;if(i<=IA)return String.fromCharCode.apply(String,t);for(var e=[],s=0;s<i;s+=IA)e.push(String.fromCharCode.apply(String,t.slice(s,s+IA)));return e.join("")}var EA=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,i){return(t&i)===i}(this.raw,t)},t}();function vc(t,i){var e=t.getUint8(i.offset);return i.shift(1),e}function kA(t,i,e){var s=PA(UA(t),i.offset,i.offset+e);return i.shift(s.byteLength),s}function LA(t,i,e){return i.offset+e<=t.byteLength}function xA(t,i,e){void 0===e&&(e=!1);var s=t.getUint32(i.offset,e);return i.shift(4),s}function CA(t,i,e){void 0===e&&(e=!1);var s=xA(t,i,e),n=xA(t,i,e),r=e?n:s,o=e?s:n;return ii.fromBits(o,r,!0)}function OA(t,i,e){return DA(function(t){return[].slice.call(t)}(kA(t,i,e)))}function jA(t,i){var e,s=vc(t,i);return 0==(128&s)?e=s:192==(224&s)?e=64*(31&s)+(63&vc(t,i)):224==(240&s)?e=4096*(15&s)+64*(63&vc(t,i))+(63&vc(t,i)):240==(248&s)&&(e=262144*(7&s)+4096*(63&vc(t,i))+64*(63&vc(t,i))+(63&vc(t,i))),e}function RA(t,i){return function(t,i,e){var s=[],n=function(t,i){return i.offset+3<=t.byteLength&&239===t.getUint8(i.offset)&&187===t.getUint8(i.offset+1)&&191===t.getUint8(i.offset+2)}(t,i);n&&i.shift(3);for(;i.offset<t.byteLength;){var r=jA(t,i);if(void 0===r)break;if(e&&0===r)break;s.push(r)}return function(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return DA(i)}(s)}(t,i,!0)}function PA(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new j(t.buffer,t.byteOffset+i,e-i)}function zA(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function BA(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function UA(t){return new j(t.buffer,t.byteOffset,t.byteLength)}var QA=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new NA(this.offset<<3)},t}(),FA=function(){function t(t,i){this.data=t,this.cursor=i}return t.prototype.nextUint8=function(){return vc(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getUint16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return xA(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt32(i.offset,e);return i.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,i,e){void 0===e&&(e=!1);var s=xA(t,i,e),n=xA(t,i,e),r=e?n:s,o=e?s:n;return ii.fromBits(o,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return CA(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return kA(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,i,e){for(var s=[],n=0;n<e;n++)s.push(xA(t,i));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return OA(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return RA(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function ys(t,i){return t.type===i}var YA=8;function T(t){var i=function(t,i){var e=[];for(;i.offset<t.byteLength;){var s=GA(t,i);if(!s.complete)return{complete:!1,boxes:e};e.push(s.box)}return{complete:!0,boxes:e}}(t.data,t.cursor);if(!i.complete)throw new g("Data incomplete");return i.boxes}function GA(t,i){var e=i.offset,s=function(t,i){var e=i.offset;if(!LA(t,i,YA)){return{complete:!1,neededOffset:r=i.offset+YA}}var s=xA(t,i),n=OA(t,i,4);if(1===s){if(!LA(t,i,8)){var r=i.offset+8;return i.seek(e),{complete:!1,neededOffset:r}}s=CA(t,i).toNumber()}if("uuid"===n){if(!LA(t,i,16)){r=i.offset+16;return i.seek(e),{complete:!1,neededOffset:r}}n=OA(t,i,16)}var o=i.offset,h={type:n,size:s,headerSize:o-e};return{complete:!0,header:h}}(t,i);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-e);var o=e+r;if(o>t.byteLength){var h=o;return i.seek(e),{complete:!1,neededOffset:h}}var a={type:n.type,offset:e,data:new FA(zA(t,e,o),new QA(n.headerSize))};return i.seek(o),{complete:!0,box:a}}function Wc(t){return{version:t>>24,flags:new EA(16777215&t)}}function VA(t,i){var e,s,n,r;return 1===i?(e=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(e=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:e,modification:s,scale:n,duration:r}}function WA(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function HA(t){var i=t.nextUint32Array(9);return{a:Dt(i[0],16),b:Dt(i[1],16),u:Dt(i[2],30),c:Dt(i[3],16),d:Dt(i[4],16),v:Dt(i[5],30),x:Dt(i[6],16),y:Dt(i[7],16),w:Dt(i[8],30)}}function vt(t){return new SA(t.type,PA(UA(t.data.data),t.data.cursor.offset))}var XA=function(t){function i(i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=e,r.handlerType=i,r}return zt(i,t),w.defineProperty(i.prototype,"handlerType",{get:function(){return this.KL},set:function(t){this.KL=t},enumerable:!1,configurable:!0}),i.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(e=null===(i=this.name)||void 0===i?void 0:i.length)&&void 0!==e?e:0)+1},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeString(this.handlerType),this.serializeReserved(i),this.name&&i.writer.writeString(this.name),i.writer.writeByte(0)},i}(Ec);function ZA(t){var i=t.data,e=Wc(i.nextUint32()),s=e.version,n=e.flags;i.skip(4);var r=i.nextChars(4);i.skip(12);var o=i.nextUTF8String();return new XA(r,o,s,n.raw)}!function(t){function i(){return t.call(this,"mdir")||this}zt(i,t),i.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(XA);var gr=function(){function t(t,i){void 0===i&&(i=!1),this.fixed28BitMode=i,this.tag=t}return t.prototype.encodeSize=function(t){for(var i=[];t>0;)i.length>0&&(i[i.length-1]+=128),i.push(t%128),t>>=7;if(this.fixed28BitMode)for(;i.length<4;)i.push(128);return i.reverse()},w.defineProperty(t.prototype,"tag",{get:function(){return this.JL},set:function(t){if(!oa(t,8))throw new g("Provided tag does not fit in 8 bits.");this.JL=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var i=0,e=this.encodeSize(this.getDescriptorSize());i<e.length;i++){var s=e[i];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}(),qA=(function(t){function i(i,e,s,n,r,o,h){void 0===h&&(h={});var a=t.call(this,4,h.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=o,a.objectTypeIndication=i,a.streamType=e,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}zt(i,t),w.defineProperty(i.prototype,"objectTypeIndication",{get:function(){return this.$L},set:function(t){if(!oa(t,8))throw new g("Provided objectTypeIndication does not fit in 8 bits.");this.$L=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"streamType",{get:function(){return this.tx},set:function(t){if(!oa(t,6))throw new g("Provided streamType does not fit in 6 bits.");this.tx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.ix},set:function(t){if(!oa(t,24))throw new g("Provided bufferSizeDb does not fit in 24 bits.");this.ix=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.sx},set:function(t){if(!oa(t,32))throw new g("Provided maxBitrate does not fit in 32 bits.");this.sx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"avgBitrate",{get:function(){return this.nx},set:function(t){if(!oa(t,32))throw new g("Provided avgBitrate does not fit in 32 bits.");this.nx=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var i=0,e=this.decoderSpecificInfo;i<e.length;i++){e[i].serialize(t)}}}(gr),function(t){function i(i,e){void 0===e&&(e={});var s=t.call(this,5,e.fixed28BitMode)||this;return s.data=i,s}zt(i,t),i.prototype.getDescriptorSize=function(){return this.data.length},i.prototype.serializeDescriptorContent=function(t){t.concat(bi.from(this.data))}}(gr),function(t){function i(i){void 0===i&&(i=!1);var e=t.call(this,6,i)||this;return e.predefined=2,e}return zt(i,t),i.prototype.getDescriptorSize=function(){return 1},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},i}(gr)),KA=(function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=i,r.streamPriority=e,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new qA(n.fixed28BitMode),r}zt(i,t),w.defineProperty(i.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"esId",{get:function(){return this.ox},set:function(t){if(!oa(t,16))throw new g("Provided esId does not fit in 16 bits.");this.ox=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"streamPriority",{get:function(){return this.hx},set:function(t){if(!oa(t,5))throw new g("Provided streamPriority does not fit in 5 bits.");this.hx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"dependsOnEsId",{get:function(){return this.ux},set:function(t){if(t&&!oa(t,16))throw new g("Provided dependsOnEsId does not fit in 16 bits.");this.ux=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"ocrEsId",{get:function(){return this.lx},set:function(t){if(t&&!oa(t,16))throw new g("Provided ocrEsId does not fit in 16 bits.");this.lx=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},i.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(gr),function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.boxes=[],i}return zt(i,t),i.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serialize=function(){for(var i=t.prototype.serialize.call(this),e=0,s=this.boxes;e<s.length;e++){var n=s[e];i=i.concat(n.serialize())}return i},i}(bc)),xh=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return zt(i,t),i.prototype.serializeBoxContent=function(t){},i.prototype.getBoxContentSize=function(){return 0},i}(KA),JA=function(t){function i(i,e){var s=t.call(this,i)||this;return s.dataReferenceIndex=e,s}return zt(i,t),w.defineProperty(i.prototype,"dataReferenceIndex",{get:function(){return this._x},set:function(t){if(!oa(t,16))throw new g("Provided dataReferenceIndex does not fit in 16 bits.");this._x=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){for(var i=0;i<6;i++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},i}(xh),$A=function(t){function i(i,e,s,n){var r,o,h=this;return(h=t.call(this,i,e)||this).extra=n,h.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,h.sampleSize=null!==(o=s.sampleSize)&&void 0!==o?o:16,h.sampleRate=s.sampleRate,h}return zt(i,t),w.defineProperty(i.prototype,"channelCount",{get:function(){return this.gx},set:function(t){if(!oa(t,16))throw new g("Provided channelCount does not fit in 16 bits.");this.gx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleSize",{get:function(){return this.wx},set:function(t){if(!oa(t,16))throw new g("Provided sampleSize does not fit in 16 bits.");this.wx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleRate",{get:function(){return this.vx},set:function(t){if(!oa(Qi(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.vx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(e=null===(i=this.extra)||void 0===i?void 0:i.length)&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.channelCount,16),i.writer.writeUInt(this.sampleSize,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(Qi(this.sampleRate,16),32),this.extra&&gc(i.writer,this.extra)},i}(JA),pr=(function(t){function i(i){var e=t.call(this,"stco",0,0)||this;return e.entries=i,e}zt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.mx},set:function(t){if(!oa(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oa(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.mx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Ec),function(t){function i(i){var e=t.call(this,"clap")||this;return e.cleanApertureWidthN=i.cleanApertureWidthN,e.cleanApertureWidthD=i.cleanApertureWidthD,e.cleanApertureHeightN=i.cleanApertureHeightN,e.cleanApertureHeightD=i.cleanApertureHeightD,e.horizOffN=i.horizOffN,e.horizOffD=i.horizOffD,e.vertOffN=i.vertOffN,e.vertOffD=i.vertOffD,e}zt(i,t),w.defineProperty(i.prototype,"cleanApertureWidthN",{get:function(){return this.Ax},set:function(t){if(!oa(t,32))throw new g("Provided cleanApertureWidthN does not fit in 32 bits.");this.Ax=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureWidthD",{get:function(){return this.yx},set:function(t){if(!oa(t,32))throw new g("Provided cleanApertureWidthD does not fit in 32 bits.");this.yx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureHeightN",{get:function(){return this.Mx},set:function(t){if(!oa(t,32))throw new g("Provided cleanApertureHeightN does not fit in 32 bits.");this.Mx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureHeightD",{get:function(){return this.bx},set:function(t){if(!oa(t,32))throw new g("Provided cleanApertureHeightD does not fit in 32 bits.");this.bx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizOffN",{get:function(){return this.Tx},set:function(t){if(!oa(t,32))throw new g("Provided horizOffN does not fit in 32 bits.");this.Tx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizOffD",{get:function(){return this.Sx},set:function(t){if(!oa(t,32))throw new g("Provided horizOffD does not fit in 32 bits.");this.Sx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vertOffN",{get:function(){return this.Nx},set:function(t){if(!oa(t,32))throw new g("Provided vertOffN does not fit in 32 bits.");this.Nx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vertOffD",{get:function(){return this.Ix},set:function(t){if(!oa(t,32))throw new g("Provided vertOffD does not fit in 32 bits.");this.Ix=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 32},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(bc),function(t){function i(i,e){var s=t.call(this,"ctts",i,0)||this;return s.entries=e,s}zt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.mx},set:function(t){if(!oa(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oa(t.sampleCount,32)||!oa(t.sampleOffset,32)})))throw new g("Not all entries can be represented in 64 bits.");this.mx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),0===this.version?i.writer.writeUInt(n.sampleOffset,32):1===this.version&&i.writer.writeInt(n.sampleOffset,32)}}}(Ec),function(t){function i(i){var e=t.call(this,"url ",0,void 0===i?1:0)||this;return e.location=i,e}zt(i,t),w.defineProperty(i.prototype,"location",{get:function(){return this.Dx},set:function(t){this.flags=void 0===t?1:0,this.Dx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this);return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(Ec),function(t){function i(i,e,s){var n=t.call(this,"urn ",0,s)||this;return n.name=i,n.location=e,n}zt(i,t),w.defineProperty(i.prototype,"location",{get:function(){return this.Dx},set:function(t){if(1&this.flags)throw new g("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.Dx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.name),i.writer.writeByte(0),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(Ec),function(t){function i(){return t.call(this,"dinf")||this}zt(i,t)}(xh),function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!oa(e,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return zt(i,t),w.defineProperty(i.prototype,"flags",{get:function(){return this.Kd},set:function(t){this.Kd=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(KA)),ty=(function(t){function i(){return t.call(this,"dref",0,0)||this}zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(pr),function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"elst",e,s)||this;return n.entries=i,n}return zt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"entries",{get:function(){return this.mx},set:function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!oa(s.segmentDuration,this.bitSize))throw new g("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!oa(s.mediaTime,this.bitSize))throw new g("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!oa(s.mediaRateInteger,16))throw new g("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!oa(s.mediaRateFraction,16))throw new g("Provided mediaRateFraction does not fit in 16 bits.")}this.mx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(i)},i}(Ec)),iy=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return zt(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(ty),ey=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return zt(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(ty);function sy(t){for(var i=t.data,e=Wc(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),o=[],h=0;h<r;h++){var a=void 0,u=void 0;0===s?(a=i.nextUint32(),u=i.nextInt32()):(a=i.nextUint64(),u=i.nextInt64());var c=i.nextInt16(),l=i.nextInt16();o.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new iy(o,n.raw):new ey(o,n.raw)}var ny=function(t){function i(){return t.call(this,"edts")||this}return zt(i,t),i}(xh);function ry(t){for(var i=new ny,e=0,s=T(t.data);e<s.length;e++){var n=s[e];ys(n,"elst")?i.boxes.push(sy(n)):i.boxes.push(vt(n))}return i}var oy=function(t){function i(i,e,s,n){var r=t.call(this,i)||this;return r.majorBrand=e,r.minorVersion=s,r.compatibleBrands=n,r}return zt(i,t),w.defineProperty(i.prototype,"majorBrand",{get:function(){return this.Ex},set:function(t){if(4!==t.length)throw new g("the provided major brand does not conform to the 4 character requirement");this.Ex=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"minorVersion",{get:function(){return this.kx},set:function(t){if(!oa(t,32))throw new g("the provided minor version does not fit in 32 bits.");this.kx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"compatibleBrands",{get:function(){return this.Lx},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new g("Some of the compatible brands do not conform to the 4 character requirement");this.Lx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var i=0,e=this.compatibleBrands;i<e.length;i++){var s=e[i];t.writer.writeString(s)}},i}(bc),hy=function(t){function i(i,e,s){return t.call(this,"ftyp",i,e,s)||this}return zt(i,t),i}(oy);function ay(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new hy(e,s,n)}var uy=function(t){function i(i,e){void 0===e&&(e="free");var s=t.call(this,e)||this;return s.data=i,s}return zt(i,t),i.prototype.getBoxContentSize=function(){var t,i;return null!==(i=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==i?i:0},i.prototype.serializeBoxContent=function(t){this.data&&t.concat(bi.from(this.data))},i}(bc),cy=function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=i.creation,r.modificationTime=i.modification,r.timescale=i.scale,r.duration=i.duration,r.language=e,r}return zt(i,t),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.xx},set:function(t){if(!oa(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.xx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.Cx},set:function(t){if(!oa(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Cx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.Ox},set:function(t){if(!oa(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.Ox=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.jx},set:function(t){if(!oa(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.jx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"language",{get:function(){return this.Rx},set:function(t){if(!_y(t))throw new g("Expected an ISO-639-2/T language code");this.Rx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMdiaContent(i),i.writer.writeBit(0);for(var e=0,s=this.language;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.charCodeAt(0)-96,5)}i.writer.writeUInt(0,16)},i}(Ec),ly=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,0,s)||this}return zt(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(cy),dy=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,1,s)||this}return zt(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(cy);function fy(t){var i=t.data,e=Wc(i.nextUint32()),s=e.version,n=e.flags,r=VA(i,s),o=new Ws(bi.from(i.nextUint8Array(2)));o.skipBits(1);for(var h=[],a=0;a<3;a++)h.push(o.readUInt(5));var u=h.map((function(t){return String.fromCharCode(t+96)})).join("");return _y(u)||(u="und"),i.skip(2),0===s?new ly(r,u,n.raw):new dy(r,u,n.raw)}function _y(t){return/^[a-z]{3}$/.test(t)}var gy=function(t){function i(){return t.call(this,"mdia")||this}return zt(i,t),i}(xh);function wy(t){for(var i=new gy,e=0,s=T(t.data);e<s.length;e++){var n=s[e];ys(n,"mdhd")?i.boxes.push(fy(n)):ys(n,"hdlr")?i.boxes.push(ZA(n)):i.boxes.push(vt(n))}return i}var vy=function(t){function i(){var i=t.call(this,"mdat")||this;return i.data=new bi,i}return zt(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(this.data)},i}(bc);function my(t){var i=t.data,e=i.nextUint8Array(i.data.byteLength-i.cursor.offset),s=new vy;return s.data.pushRange(e),s}var py;(function(t){function i(){return t.call(this,"minf")||this}zt(i,t)})(xh),function(t){function i(i){var e=t.call(this,"meta",0,0)||this;return e.handler=i,e}zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.handler.serialize())}}(pr);!function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(py||(py={}));var Ay,yy,My={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function by(t,i){i.writer.writeUInt(Qi(t.a,16),32),i.writer.writeUInt(Qi(t.b,16),32),i.writer.writeUInt(Qi(0,30),32),i.writer.writeUInt(Qi(t.c,16),32),i.writer.writeUInt(Qi(t.d,16),32),i.writer.writeUInt(Qi(0,30),32),i.writer.writeUInt(Qi(t.x,16),32),i.writer.writeUInt(Qi(t.y,16),32),i.writer.writeUInt(Qi(1,30),32)}function Ty(t,i){var e,s,n,r;i.writer.writeUInt(null!==(e=t.isLeading)&&void 0!==e?e:Ay.UNKNOWN,2),i.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:yy.UNKNOWN,2),i.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:yy.UNKNOWN,2),i.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:yy.UNKNOWN,2)}function Sy(t,i){var e,s,n;i.writer.writeUInt(0,4),Ty(t,i),i.writer.writeUInt(null!==(e=t.samplePaddingValue)&&void 0!==e?e:0,3),i.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),i.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(Ay||(Ay={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(yy||(yy={}));var Ny=function(){},Iy=function(t){function i(i,e,s){var n=t.call(this,"pssh",i,0)||this;return n.systemId=e,n.data=s,n}return zt(i,t),w.defineProperty(i.prototype,"systemId",{get:function(){return this.Px},set:function(t){if(16!==t.length)throw new g("Provided systemId length is not 16.");this.Px=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"data",{get:function(){return this.zx},set:function(t){if(!oa(t.length,32))throw new g("Provided data length does not fit in 32 bits.");this.zx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},i.prototype.serializeVersionBoxContent=function(t){},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(bi.from(this.systemId)),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.data.length,32),i.concat(bi.from(this.data))},i}(Ec),Dy=function(t){function i(i,e){return t.call(this,0,i,e)||this}return zt(i,t),i}(Iy),Ey=function(t){function i(i,e,s){var n=t.call(this,1,i,e)||this;return n.kIds=s,n}return zt(i,t),w.defineProperty(i.prototype,"kIds",{get:function(){return this.Bx},set:function(t){if(!oa(t.length,32))throw new g("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new g("Not all provided key ids are 16 bytes long.");this.Bx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var i=0,e=this.kIds;i<e.length;i++){var s=e[i];t.concat(bi.from(s))}},i}(Iy);function ky(t){var i=t.data.nextUint8();t.data.skip(3);var e=t.data.nextUint8Array(16),s=[];if(1===i)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var o=t.data.nextUint32(),h=t.data.nextUint8Array(o);return 1===i?new Ey(e,h,s):new Dy(e,h)}var Ly=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"mehd",e,s)||this;return n.fragmentDuration=i,n}return zt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"fragmentDuration",{get:function(){return this.Ux},set:function(t){if(!oa(t,this.bitSize))throw new g("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.Ux=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(Ec),xy=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return zt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration,32)},i}(Ly),Cy=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return zt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),i.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},i}(Ly);function Oy(t){var i=t.data,e=Wc(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new xy(i.nextUint32(),n.raw):new Cy(i.nextUint64(),n.raw)}var jy=function(t){function i(i,e,s,n){void 0===e&&(e={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,o,h,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=i,a.defaultSampleDescriptionIndex=null!==(r=null==e?void 0:e.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(o=e.sampleDuration)&&void 0!==o?o:0,a.defaultSampleSize=null!==(h=e.sampleSize)&&void 0!==h?h:0,a.defaultSampleFlags=e.sampleFlags,a}return zt(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.Qx},set:function(t){if(!oa(t,32))throw new g("Provided track id does not fit in 32 bits.");this.Qx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.Fx},set:function(t){if(!oa(t,32))throw new g("Provided default sample description index does not fit in 32 bits.");this.Fx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.Yx},set:function(t){if(!oa(t,32))throw new g("Provided default sample duration does not fit in 32 bits.");this.Yx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.Gx},set:function(t){if(!oa(t,32))throw new g("Provided default sample size does not fit in 32 bits.");this.Gx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.Vx},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!oa(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!oa(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.Vx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},i.prototype.serializeBoxContent=function(i){var e;t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),i.writer.writeUInt(this.defaultSampleDescriptionIndex,32),i.writer.writeUInt(this.defaultSampleDuration,32),i.writer.writeUInt(this.defaultSampleSize,32),Sy(null!==(e=this.defaultSampleFlags)&&void 0!==e?e:{},i)},i}(Ec);function Ry(t){var i=t.data,e=Wc(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),o=i.nextUint32(),h=i.nextUint32(),a=i.nextUint32(),u=WA(new Ws(bi.from(i.nextUint8Array(4))));return new jy(r,{sampleDescriptionIndex:o,sampleDuration:h,sampleSize:a,sampleFlags:u},s,n.raw)}var wr=function(t){function i(){return t.call(this,"mvex")||this}return zt(i,t),i}(xh);function Py(t){for(var i=new wr,e=0,s=T(t.data);e<s.length;e++){var n=s[e];ys(n,"mehd")?i.boxes.push(Oy(n)):ys(n,"trex")?i.boxes.push(Ry(n)):i.boxes.push(vt(n))}return i}var zy=function(t){function i(e,s,n,r,o){void 0===o&&(o=0);var h,a,u,c=this;return(c=t.call(this,"mvhd",r,o)||this).creationTime=e.creation,c.modificationTime=e.modification,c.timescale=e.scale,c.duration=e.duration,c.rate=null!==(h=n.rate)&&void 0!==h?h:i.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:i.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:My,c.Wx=s,c}return zt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.xx},set:function(t){if(!oa(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.xx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.Cx},set:function(t){if(!oa(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Cx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.Ox},set:function(t){if(!oa(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.Ox=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.jx},set:function(t){if(!oa(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.jx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"rate",{get:function(){return this.Hx},set:function(t){if(!oa(Qi(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.Hx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"volume",{get:function(){return this.Xx},set:function(t){if(!oa(Qi(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.Xx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"matrix",{get:function(){return this.Zx},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.Zx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"nextTrackId",{get:function(){return this.Wx},set:function(t){if(0===t)throw new g("NextTrackId cannot be 0.");if(!oa(t,32))throw new g("NextTrackId cannot exceed 32 bits.");this.Wx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMvhdContent(i),i.writer.writeUInt(Qi(this.rate,16),32),i.writer.writeUInt(Qi(this.volume,8),16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),by(this.matrix,i);for(var e=0;e<6;e++)i.writer.writeUInt(0,32);i.writer.writeUInt(this.nextTrackId,32)},i.DEFAULT_RATE=1,i.DEFAULT_VOLUME=1,i}(Ec),By=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,0,n)||this}return zt(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(zy),Uy=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,1,n)||this}return zt(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(zy);function Qy(t){var i=t.data,e=Wc(i.nextUint32()),s=e.version,n=e.flags,r=VA(i,s),o=Dt(i.nextUint32(),16),h=Dt(i.nextUint16(),8);i.skip(2),i.skip(8);var a=HA(i);i.skip(24);var u=i.nextUint32();return 0===s?new By(r,u,{rate:o,volume:h,matrix:a},n.raw):new Uy(r,u,{rate:o,volume:h,matrix:a},n.raw)}var Fy=function(t){function i(i,e,s,n,r,o,h){void 0===h&&(h={});var a,u,c,l=this;return l=t.call(this,"tkhd",i,function(t){var i,e,s,n;return{trackEnabled:null===(i=null==t?void 0:t.trackEnabled)||void 0===i||i,trackInMovie:null===(e=null==t?void 0:t.trackInMovie)||void 0===e||e,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(h))||this,l.creationTime=e.creation,l.modificationTime=e.modification,l.trackId=s,l.duration=e.duration,l.volume=n,l.width=r,l.height=o,l.layer=null!==(a=h.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=h.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=h.matrix)&&void 0!==c?c:My,l}return zt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.xx},set:function(t){if(!oa(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.xx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.Cx},set:function(t){if(!oa(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Cx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"trackId",{get:function(){return this.Qx},set:function(t){if(0===t)throw new g("trackId cannot be 0.");if(!oa(t,32))throw new g("trackId cannot exceed 32 bits.");this.Qx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.jx},set:function(t){if(!oa(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.jx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"volume",{get:function(){return this.Xx},set:function(t){if(!oa(Qi(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.Xx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"width",{get:function(){return this.qx},set:function(t){if(!oa(Qi(t,16),32))throw new g("Provided width does not fit in 32 bits (fixed 16.16).");this.qx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"height",{get:function(){return this.Kx},set:function(t){if(!oa(Qi(t,16),32))throw new g("Provided height does not fit in 32 bits (fixed 16.16).");this.Kx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"layer",{get:function(){return this.Jx},set:function(t){if(!oa(t,16))throw new g("Provided layer does not fit in 16 bits.");this.Jx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"alternateGroup",{get:function(){return this.$x},set:function(t){if(!oa(t,16))throw new g("Provided alternateGroup does not fit in 16 bits.");this.$x=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"matrix",{get:function(){return this.Zx},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.Zx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeTkhdContent(i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.layer,16),i.writer.writeUInt(this.alternateGroup,16),i.writer.writeUInt(Qi(this.volume,8),16),i.writer.writeUInt(0,16),by(this.matrix,i),i.writer.writeUInt(Qi(this.width,16),32),i.writer.writeUInt(Qi(this.height,16),32)},i}(Ec),Ac=function(t){function i(i,e,s,n,r,o){return t.call(this,0,i,e,s,n,r,o)||this}return zt(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},i}(Fy),Yy=function(t){function i(i,e,s,n,r,o){return t.call(this,1,i,e,s,n,r,o)||this}return zt(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Fy);function Gy(t){var i,e,s,n,r=t.data,o=Wc(r.nextUint32()),h=o.version,a=o.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===h?(i=r.nextUint32(),e=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(i=r.nextUint64(),e=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),_=r.nextInt16(),g=Dt(r.nextInt16(),8);r.skip(2);var w=HA(r),v=Dt(r.nextUint32(),16),m=Dt(r.nextUint32(),16);return 0===h?new Ac({creation:i,modification:e,duration:n},s,g,v,m,{layer:f,matrix:w,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new Yy({creation:i,modification:e,duration:n},s,g,v,m,{layer:f,matrix:w,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var Vy=function(t){function i(){return t.call(this,"trak")||this}return zt(i,t),i}(xh);function Wy(t){for(var i=new Vy,e=0,s=T(t.data);e<s.length;e++){var n=s[e];ys(n,"tkhd")?i.boxes.push(Gy(n)):ys(n,"mdia")?i.boxes.push(wy(n)):ys(n,"edts")?i.boxes.push(ry(n)):i.boxes.push(vt(n))}return i}var Hy=function(t){function i(){return t.call(this,"moov")||this}return zt(i,t),i}(xh);function Xy(t){for(var i=new Hy,e=0,s=T(t.data);e<s.length;e++){var n=s[e];ys(n,"mvhd")?i.boxes.push(Qy(n)):ys(n,"trak")?i.boxes.push(Wy(n)):ys(n,"mvex")?i.boxes.push(Py(n)):ys(n,"pssh")?i.boxes.push(ky(n)):i.boxes.push(vt(n))}return i}var Zy=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",e,s)||this;return n.baseMediaDecodeTime=i,n}return zt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"baseMediaDecodeTime",{get:function(){return this.tC},set:function(t){if(!oa(t,this.bitSize))throw new g("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.tC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(Ec),qy=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return zt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime,32)},i}(Zy),fr=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return zt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},i}(Zy);function Ky(t){var i=t.data,e=Wc(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new qy(i.nextUint32(),n.raw):new fr(i.nextUint64(),n.raw)}var Oc=function(t){function i(i,e){void 0===e&&(e=0);var s=t.call(this,"tfhd",e,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(i))||this;return s.trackId=i.trackId,s.baseDataOffset=i.baseDataOffset,s.sampleDescriptionIndex=i.sampleDescriptionIndex,s.defaultSampleDuration=i.defaultSampleDuration,s.defaultSampleSize=i.defaultSampleSize,s.defaultSampleFlags=i.defaultSampleFlags,s}return zt(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.Qx},set:function(t){if(!oa(t,32))throw new g("Provided track id does not fit in 32 bits.");this.Qx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"baseDataOffset",{get:function(){return this.iC},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is not set.");if(t&&!oa(t,64))throw new g("Provided baseDataOffset does not fit in 32 bits.");this.iC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleDescriptionIndex",{get:function(){return this.eC},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is not set.");if(t&&!oa(t,32))throw new g("Provided sampleDescriptionIndex does not fit in 32 bits.");this.eC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.Yx},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is not set.");if(t&&!oa(t,32))throw new g("Provided defaultSampleDuration does not fit in 32 bits.");this.Yx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.Gx},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is not set.");if(t&&!oa(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.Gx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.Vx},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!oa(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!oa(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.Vx=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(i+=8),this.flags.sampleDescriptionIndexPresent&&(i+=4),this.flags.defaultSampleDurationPresent&&(i+=4),this.flags.defaultSampleSizePresent&&(i+=4),this.flags.defaultSampleFlagsPresent&&(i+=4),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(i.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&i.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&i.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&i.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Sy(this.defaultSampleFlags,i)},i}(Ec);function Jy(t){var i=t.data,e=i.nextUint8(),s=new Ws(bi.from(i.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var o=Boolean(s.readBit()),h=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=i.nextUint32(),d=c?i.nextUint64():void 0,f=u?i.nextUint32():void 0,_=a?i.nextUint32():void 0,g=h?i.nextUint32():void 0,w=o?WA(new Ws(bi.from(i.nextUint8Array(4)))):void 0;return new Oc({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:_,defaultSampleSize:g,defaultSampleFlags:w},e)}var ot=function(t){function i(i,e,s){var n=t.call(this,"trun",i,function(t){var i,e,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(i=t.sampleDurationPresent)&&void 0!==i&&i,sampleSizePresent:null!==(e=t.sampleSizePresent)&&void 0!==e&&e,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(e))||this;return n.dataOffset=e.dataOffset,n.samples=s,n.firstSampleFlags=e.firstSampleFlags,n}return zt(i,t),w.defineProperty(i.prototype,"dataOffset",{get:function(){return this.sC},set:function(t){if(t&&!oa(t,32))throw new g("Provided data offset does not fit in 32 bits.");this.sC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"firstSampleFlags",{get:function(){return this.nC},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!oa(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!oa(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.nC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"samples",{get:function(){return this.rC},set:function(t){var i,e;if(!oa(t.length,32))throw new g("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new g("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new g("The sample duration present flag is not set.");if(r.duration&&!oa(r.duration,32))throw new g("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new g("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new g("The sample size present flag is not set.");if(r.size&&!oa(r.size,32))throw new g("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is not set.");if((null===(i=r.flags)||void 0===i?void 0:i.samplePaddingValue)&&!oa(r.flags.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null===(e=r.flags)||void 0===e?void 0:e.sampleDegradationPriority)&&!oa(r.flags.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!oa(r.compositionTimeOffset,32))throw new g("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.rC=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(i+=4),this.flags.firstSampleFlagsPresent&&(i+=4),this.flags.sampleDurationPresent&&(i+=4*this.samples.length),this.flags.sampleSizePresent&&(i+=4*this.samples.length),this.flags.sampleFlagsPresent&&(i+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(i+=4*this.samples.length),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&i.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Sy(this.firstSampleFlags,i);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];this.flags.sampleDurationPresent&&i.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&i.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&Sy(n.flags,i),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?i.writer.writeUInt(n.compositionTimeOffset,32):i.writer.writeInt(n.compositionTimeOffset,32))}},i}(Ec);function $y(t){var i=t.data,e=i.nextUint8(),s=new Ws(bi.from(i.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),o=Boolean(s.readBit()),h=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=i.nextUint32(),l={sampleDurationPresent:h,sampleSizePresent:o,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=i.nextInt32()),a&&(l.firstSampleFlags=WA(new Ws(bi.from(i.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var _={};h&&(_.duration=i.nextUint32()),o&&(_.size=i.nextUint32()),r&&(_.flags=WA(new Ws(bi.from(i.nextUint8Array(4))))),n&&(_.compositionTimeOffset=0===e?i.nextUint32():i.nextInt32()),d.push(_)}return new ot(e,l,d)}var uu=function(t){function i(){return t.call(this,"traf")||this}return zt(i,t),i}(xh);function tM(t){for(var i=new uu,e=0,s=T(t.data);e<s.length;e++){var n=s[e];ys(n,"tfhd")?i.boxes.push(Jy(n)):ys(n,"tfdt")?i.boxes.push(Ky(n)):ys(n,"trun")?i.boxes.push($y(n)):i.boxes.push(vt(n))}return i}var iM=function(t){function i(){return t.call(this,"moof")||this}return zt(i,t),i}(xh);function eM(t){for(var i=new iM,e=0,s=T(t.data);e<s.length;e++){var n=s[e];ys(n,"traf")?i.boxes.push(tM(n)):ys(n,"pssh")?i.boxes.push(ky(n)):i.boxes.push(vt(n))}return i}!function(t){function i(i){var e=t.call(this,"mfhd",0,0)||this;return e.sequenceNumber=i,e}zt(i,t),w.defineProperty(i.prototype,"sequenceNumber",{get:function(){return this.oC},set:function(t){if(!oa(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.oC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.sequenceNumber,32)}}(Ec);var sM=function(t){function i(i){var e=t.call(this,"frma")||this;return e.codingName=i,e}return zt(i,t),w.defineProperty(i.prototype,"codingName",{get:function(){return this.hC},set:function(t){if(4!==t.length)throw new g("Provided coding name was not 4 characters long.");this.hC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},i}(bc),nM=(function(t){function i(i,e){var s=t.call(this,"pasp")||this;return s.hSpacing=i,s.vSpacing=e,s}zt(i,t),w.defineProperty(i.prototype,"hSpacing",{get:function(){return this.aC},set:function(t){if(!oa(t,32))throw new g("Provided hSpacing does not fit in 32 bits.");this.aC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vSpacing",{get:function(){return this.uC},set:function(t){if(!oa(t,32))throw new g("Provided vSpacing does not fit in 32 bits.");this.uC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(bc),function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.sample=e,n.sinf=s,n}zt(i,t),i.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},i.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(xh),function(t){function i(i,e,s){var n=t.call(this,"sinf")||this;return n.schm=e,n.schi=s,n.frma=new sM(i),n}zt(i,t),i.prototype.getBoxContentSize=function(){var t,i,e,s;return this.frma.getSize()+(null!==(i=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==i?i:0)+(null!==(s=null===(e=this.schi)||void 0===e?void 0:e.getSize())&&void 0!==s?s:0)},i.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(bc),function(t){function i(i,e,s){var n=t.call(this,"saio",i,void 0===s?0:1)||this;return n.entries=e,n.explicitAuxInfoType=s,n}return zt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"entries",{get:function(){return this.mx},set:function(t){var i=this;if(!oa(t.length,32))throw new g("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!oa(t,i.bitSize)})))throw new g("Not all provided entries fit in ".concat(this.bitSize," bits."));this.mx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.cC},set:function(t){if(void 0===t)this.flags=0;else{if(!oa(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!oa(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.cC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(i)},i}(Ec)),rM=(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}zt(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s,32)}}}(nM),function(t){function i(){return null!==t&&t.apply(this,arguments)||this}zt(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(nM),function(t){function i(i,e,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=i,n.sampleInfoSizes=e,n.explicitAuxInfoType=s,n}zt(i,t),w.defineProperty(i.prototype,"defaultSampleInfoSize",{get:function(){return this.lC},set:function(t){if(!oa(t,8))throw new g("Provided defaultSampleInfoSize does not fit in a single byte.");this.lC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleInfoSizes",{get:function(){return this.dC},set:function(t){if(!oa(t.length,32))throw new g("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!oa(t,8)})))throw new g("Not all provided sampleInfoSizes fit in a byte.");this.dC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.cC},set:function(t){if(void 0===t)this.flags=0;else{if(!oa(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!oa(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.cC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},i.prototype.serializeBoxContent=function(i){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new g("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeByte(this.defaultSampleInfoSize),i.writer.writeUInt(this.sampleInfoSizes.length,32);for(var e=0,s=this.sampleInfoSizes;e<s.length;e++){var n=s[e];i.writer.writeByte(n)}}}(Ec),function(t){function i(i){var e=t.call(this,"sdtp",0,0)||this;return e.samples=i,e}zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i);for(var e=0,s=this.samples;e<s.length;e++){Ty(s[e],i)}}}(Ec),function(t){function i(i){return t.call(this,"stsd",i,0)||this}zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(pr),function(t){function i(i,e,s){var n=t.call(this,"sgpd",i,0)||this;return n.entries=s,n.groupingType=e,n}return zt(i,t),w.defineProperty(i.prototype,"groupingType",{get:function(){return this.fC},set:function(t){if(4!==t.length)throw new g("The provided groupingType does not equal 4 characters.");this.fC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.groupingType),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];this.serializeEntryBoxContent(i,n)}},i.prototype.serializeEntryBoxContent=function(t,i){i.serializeBoxContent(t)},i}(Ec)),oM=(function(t){function i(i,e){return t.call(this,0,i,e)||this}zt(i,t),i.prototype.serializeVersionBoxContent=function(t){}}(rM),function(t){function i(i,e,s){var n=t.call(this,1,i,s)||this;return n.defaultLength=e,n}zt(i,t),w.defineProperty(i.prototype,"defaultLength",{get:function(){return this._C},set:function(t){if(!oa(t,32))throw new g("The provided defaultLength does not fit in 32 bits.");this._C=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},i.prototype.serializeEntryBoxContent=function(t,i){0===this.defaultLength&&t.writer.writeUInt(i.getBoxContentSize(),32),i.serializeBoxContent(t)}}(rM),function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=this;if(i<2)throw new g("This constructor is only meant for versions 2 and up.");return(r=t.call(this,i,e,s)||this).defaultSampleDescriptionIndex=n,r}zt(i,t),w.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.Fx},set:function(t){if(!oa(t,32))throw new g("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.Fx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(rM),function(t){function i(i){void 0===i&&(i=[]);var e=t.call(this,"stsz",0,0)||this;return e.sampleSizes=i,e}zt(i,t),w.defineProperty(i.prototype,"sampleSizes",{get:function(){return this.gC},set:function(t){if(!oa(t.length,32))throw new g("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!oa(t,32)})))throw new g("Not all sampleSizes can be represented in 32 bits.");this.gC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(this.sampleSizes.length,32);for(var e=0,s=this.sampleSizes;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Ec),function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=i,s.samples=e,s}zt(i,t),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.Gx},set:function(t){if(!oa(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.Gx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"samples",{get:function(){return this.rC},set:function(t){if(!oa(t,32))throw new g("Number of allowed samples cannot fit in 32 bits.");this.rC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.defaultSampleSize,32),i.writer.writeUInt(this.samples,32)}}(Ec),function(t){function i(){return t.call(this,"stbl")||this}zt(i,t)}(xh),function(t){function i(i){var e=t.call(this,"stsc",0,0)||this;return e.entries=i,e}zt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.mx},set:function(t){if(!oa(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oa(t.firstChunk,32)||!oa(t.sampleDescriptionIndex,32)||!oa(t.samplesPerChunk,32)})))throw new g("Not all entries can be represented in 96 bits.");this.mx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.firstChunk,32),i.writer.writeUInt(n.samplesPerChunk,32),i.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(Ec),function(t){function i(){return t.call(this,"schi")||this}zt(i,t)}(xh),function(t){function i(i,e,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=i,n.schemeVersion=e,n.schemeUri=s,n}zt(i,t),w.defineProperty(i.prototype,"schemeType",{get:function(){return this.wC},set:function(t){if(4!==t.length)throw new g("The provided schemeType does not have a length of 4.");this.wC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"schemeVersion",{get:function(){return this.vC},set:function(t){if(!oa(t,32))throw new g("The provided schemeVersion does not fit in 23 bits.");this.vC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"schemeUri",{get:function(){return this.mC},set:function(t){if(t&&4!==t.length)throw new g("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.mC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeType),i.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(i.writer.writeString(this.schemeUri),i.writer.writeByte(0))}}(Ec),function(t){function i(i,e,s,n,r,o,h){void 0===h&&(h=0);var a=t.call(this,"sidx",i,h)||this;return a.referenceId=e,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=o,a}return zt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"referenceId",{get:function(){return this.pC},set:function(t){if(!oa(t,32))throw new g("Provided referenceId does not fit in 32 bits.");this.pC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.Ox},set:function(t){if(!oa(t,32))throw new g("Provided timescale does not fit in 32 bits.");this.Ox=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"earliestPresentationTime",{get:function(){return this.AC},set:function(t){if(!oa(t,this.bitSize))throw new g("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.AC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"firstOffset",{get:function(){return this.yC},set:function(t){if(!oa(t,this.bitSize))throw new g("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.yC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"references",{get:function(){return this.MC},set:function(t){if(!oa(t.length,16))throw new g("The number of provided reference items does not fit in 16 bits.");for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!oa(s.referencedSize,31))throw new g("Provided referenced size does not fit in 31 bits.");if(!oa(s.subsegmentDuration,32))throw new g("Provided subsegment duration does not fit in 31 bits.");if(!oa(s.sapType,3))throw new g("Provided SAP type does not fit in 3 bits.");if(!oa(s.sapDeltaTime,28))throw new g("Provided SAP delta time does not fit in 28 bits.")}this.MC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.referenceId,32),i.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(i),i.writer.writeUInt(0,16),i.writer.writeUInt(this.references.length,16);for(var e=0,s=this.references;e<s.length;e++){var n=s[e];i.writer.writeBit(n.referenceType),i.writer.writeUInt(n.referencedSize,31),i.writer.writeUInt(n.subsegmentDuration,32),i.writer.writeBool(n.startsWithSap),i.writer.writeUInt(n.sapType,3),i.writer.writeUInt(n.sapDeltaTime,28)}},i}(Ec)),hM=function(t){function i(i,e,s,n,r,o){return void 0===o&&(o=0),t.call(this,0,i,e,s,n,r,o)||this}return zt(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},i}(oM),aM=function(t){function i(i,e,s,n,r,o){return void 0===o&&(o=0),t.call(this,1,i,e,s,n,r,o)||this}return zt(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},i}(oM);var uM=function(t){function i(i,e,s){return t.call(this,"styp",i,e,s)||this}return zt(i,t),i}(oy);function cM(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new uM(e,s,n)}(function(t){function i(i){void 0===i&&(i=0);var e=t.call(this,"smhd",0,0)||this;return e.balance=i,e}zt(i,t),w.defineProperty(i.prototype,"balance",{get:function(){return this.bC},set:function(t){if(t<-1||t>1)throw new g("Provided balance does not fit in the allowed range [-1, 1].");if(!oa(Qi(t,8),16))throw new g("Provided balance does not fit in 16 bits (fixed 8.8).");this.bC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(Qi(this.balance,8),16),i.writer.writeUInt(0,16)}})(Ec),function(t){function i(i){var e=t.call(this,"stss",0,0)||this;return e.entries=i,e}zt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.mx},set:function(t){if(!oa(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oa(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.mx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Ec),function(t){function i(i){var e=t.call(this,"stts",0,0)||this;return e.entries=i,e}zt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.mx},set:function(t){if(!oa(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oa(t.sampleCount,32)||!oa(t.sampleDelta,32)})))throw new g("Not all entries can be represented in 64 bits.");this.mx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),i.writer.writeUInt(n.sampleDelta,32)}}}(Ec),function(t){function i(i){var e=t.call(this,"trep",0,0)||this;return e.trackId=i,e}zt(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.Qx},set:function(t){if(!oa(t,32))throw new g("The provided trackId does not fit in 32 bits.");this.Qx=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32)}}(pr),function(t){function i(){return t.call(this,"udta")||this}zt(i,t)}(xh);var lM={red:0,green:0,blue:0},dM=(function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=lM);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=i,s.opColor=e,s}zt(i,t),w.defineProperty(i.prototype,"opColor",{get:function(){return this.TC},set:function(t){if(!oa(t.red,16)||!oa(t.green,16)||!oa(t.blue,16))throw new g("Not all colors could be represented in 16 bits.");this.TC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.graphicsMode,16),i.writer.writeUInt(this.opColor.red,16),i.writer.writeUInt(this.opColor.green,16),i.writer.writeUInt(this.opColor.blue,16)}}(Ec),function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o,h,a,u,c,l=this;return(l=t.call(this,i,e)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(o=s.horizontal)&&void 0!==o?o:72,l.verticalResolution=null!==(h=s.vertical)&&void 0!==h?h:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return zt(i,t),w.defineProperty(i.prototype,"width",{get:function(){return this.qx},set:function(t){if(!oa(t,16))throw new g("Provided width does not fit in 16 bits.");this.qx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"height",{get:function(){return this.Kx},set:function(t){if(!oa(t,16))throw new g("Provided height does not fit in 16 bits.");this.Kx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizontalResolution",{get:function(){return this.SC},set:function(t){if(!oa(Qi(t,16),32))throw new g("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.SC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"verticalResolution",{get:function(){return this.NC},set:function(t){if(!oa(Qi(t,16),32))throw new g("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.NC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"compressorName",{get:function(){return this.IC},set:function(t){if(t.length>31)throw new g("The provided compressorName should at most be 31 characters long.");this.IC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"frameCount",{get:function(){return this.DC},set:function(t){if(!oa(t,16))throw new g("Provided frameCount does not fit in 16 bits.");this.DC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"depth",{get:function(){return this.EC},set:function(t){if(!oa(t,16))throw new g("Provided depth does not fit in 16 bits.");this.EC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e,s,n,r,o;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(e=null===(i=this.clap)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(o=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==o?o:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.width,16),i.writer.writeUInt(this.height,16),i.writer.writeUInt(Qi(this.horizontalResolution,16),32),i.writer.writeUInt(Qi(this.verticalResolution,16),32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.frameCount,16),i.writer.writeByte(this.compressorName.length),i.writer.writeString(this.compressorName);for(var e=0;e<31-this.compressorName.length;e++)i.writer.writeByte(0);i.writer.writeUInt(this.depth,16),i.writer.writeInt(-1,16),this.clap&&i.concat(this.clap.serialize()),this.pasp&&i.concat(this.pasp.serialize()),this.extra&&gc(i.writer,this.extra)},i}(JA)),fM=(function(t){function i(i){var e=t.call(this,"esds",0,0)||this;return e.esDescriptor=i,e}zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof j?this.esDescriptor.length:this.esDescriptor.getSize())},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor instanceof j?i.concat(bi.from(this.esDescriptor)):this.esDescriptor.serialize(i)}}(Ec),function(t){function i(i,e,s){var n=t.call(this,"mp4a",i,s)||this;return n.esd=e,n}zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.esd.serialize())}}($A),function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",i,e,n)||this;return r.esDescriptor=s,r}zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(dM),function(t){function i(i,e){var s=t.call(this,"mp4s",i)||this;return s.esDescriptor=e,s}zt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(JA),function(t){function i(i){var e=t.call(this,"avcC")||this;return e.decoderConfig=i,e}zt(i,t),i.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},i.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(bc),function(){function t(t,i,e,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=e,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=i,this.spsSets=s,this.ppsSets=n}w.defineProperty(t.prototype,"version",{get:function(){return this.kC},set:function(t){if(!oa(t,8))throw new g("Provided version does not fit in 8 bits.");this.kC=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileIndication",{get:function(){return this.LC},set:function(t){if(!oa(t,8))throw new g("Provided profileIndication does not fit in 8 bits.");this.LC=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.xC},set:function(t){if(!oa(t,8))throw new g("Provided profileCompatibility does not fit in 8 bits.");this.xC=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"levelIndication",{get:function(){return this.OC},set:function(t){if(!oa(t,8))throw new g("Provided levelIndication does not fit in 8 bits.");this.OC=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"spsSets",{get:function(){return this.jC},set:function(t){if(!oa(t.length,5))throw new g("Provided number of spsSets exceeds the max (32)");this.jC=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"ppsSets",{get:function(){return this.RC},set:function(t){if(!oa(t.length,8))throw new g("Provided number of ppsSets exceeds the max (256)");this.RC=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,i){return t+i.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,i){return t+i.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var i=0,e=this.spsSets;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.length,16),t.concat(bi.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var o=r[n];t.writer.writeUInt(o.length,16),t.concat(bi.from(o))}}}(),function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o=t.call(this,"avc1",i,e,n)||this;return o.configurationBox=s,o.bitrateBox=r,o}zt(i,t),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(e=null===(i=this.bitrateBox)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.configurationBox.serialize()),this.bitrateBox&&i.concat(this.bitrateBox.serialize())}}(dM),function(t){function i(i,e,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=i,n.max=e,n.avg=s,n}zt(i,t),w.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.ix},set:function(t){if(!oa(t,32))throw new g("Provided bufferSizeDb does not fit in 32 bits.");this.ix=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"max",{get:function(){return this.yf},set:function(t){if(!oa(t,32))throw new g("Provided max does not fit in 32 bits.");this.yf=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"avg",{get:function(){return this.zC},set:function(t){if(!oa(t,32))throw new g("Provided avg does not fit in 32 bits.");this.zC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 12},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(bc),function(t){function i(i,e){var s,n,r,o,h=this;if(h=t.call(this,"tenc",i,0)||this,e.perSampleIvSize>0&&(null!==(n=null===(s=e.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new g("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return h.kId=e.kId,h.isProtected=null!==(r=e.isProtected)&&void 0!==r?r:1,e.perSampleIvSize>0?h.perSampleIvSize=e.perSampleIvSize:h.constantIv=null!==(o=e.constantIv)&&void 0!==o?o:new j(0),h}return zt(i,t),w.defineProperty(i.prototype,"isProtected",{get:function(){return this.BC},set:function(t){if(!oa(t,8))throw new g("Provided isProtected does not fit in 1 byte.");this.BC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"perSampleIvSize",{get:function(){return this.QC},set:function(t){if(![8,16].includes(t))throw new g("Provided perSampleIvSize does not match any allowed value [8, 16].");this.QC=t,this.FC=new j(0)},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"kId",{get:function(){return this.YC},set:function(t){if(16!==t.length)throw new g("Provided kId length is not 16.");this.YC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"constantIv",{get:function(){return this.FC},set:function(t){if(![8,16].includes(t.length))throw new g("Provided constant IV length does not match any allowed value [8, 16].");this.FC=t,this.QC=0},enumerable:!1,configurable:!0}),i.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeOwnContent(i)},i.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),gc(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),gc(t.writer,this.constantIv))},i}(Ec)),_M=(function(t){function i(i){return t.call(this,0,i)||this}zt(i,t)}(fM),function(t){function i(i){var e=t.call(this,1,i)||this;return e.cryptByteBlocks=i.cryptByteBlock,e.skipByteBlocks=i.skipByteBlock,e}return zt(i,t),w.defineProperty(i.prototype,"cryptByteBlocks",{get:function(){return this.GC},set:function(t){if(!oa(t,4))throw new g("Provided cryptByteBlocks does not fit in 4 bits.");this.GC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"skipByteBlocks",{get:function(){return this.VC},set:function(t){if(!oa(t,4))throw new g("Provided skipByteBlocks does not fit in 4 bits.");this.VC=t},enumerable:!1,configurable:!0}),i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},i}(fM));!function(t){function i(i){var e=t.call(this)||this;return e.tencBox=new _M(i),e}zt(i,t),i.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},i.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(Ny);function gM(t){return void 0!==t.iv}function wM(t){return void 0!==t.subsamples}(function(t){function i(i){var e=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return e.samples=i,e}zt(i,t),w.defineProperty(i.prototype,"samples",{get:function(){return this.rC},set:function(t){var i;if(!oa(t.length,32))throw new g("The number of samples provided does not fit in 32 bits.");for(var e=0,s=t;e<s.length;e++){var n=s[e];if(gM(n)&&![8,16].includes(n.iv.length))throw new g("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===i&&(i=wM(n)),!0===i&&!wM(n)||!1===i&&wM(n))throw new g("Mix of samples with and without subsamples detected.");if(wM(n)){if(!oa(n.subsamples.length,16))throw new g("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];if(!oa(h.clearData,16))throw new g("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!oa(h.protectedData,23))throw new g("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=i&&i,this.rC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){for(var i=0,e=0,s=this.samples;e<s.length;e++){var n=s[e];gM(n)&&(i+=n.iv.length),wM(n)&&(i+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];if(gM(n)&&gc(i.writer,n.iv),wM(n)){i.writer.writeUInt(n.subsamples.length,16);for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];i.writer.writeUInt(h.clearData,16),i.writer.writeUInt(h.protectedData,32)}}}},i.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}})(Ec),function(t){function i(i,e,s,n,r){var o=t.call(this,"emsg",0,0)||this;return o.schemeIdUri=i,o.value=e,o.data=r,o.id=s,o.timescale=n.timescale,o.presentationTimeDelta=n.presentationTimeDelta,o.eventDuration=n.eventDuration,o}zt(i,t),w.defineProperty(i.prototype,"timescale",{get:function(){return this.Ox},set:function(t){if(!oa(t,32))throw new g("The provided timescale does not fit in 32 bits.");this.Ox=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"presentationTimeDelta",{get:function(){return this.WC},set:function(t){if(!oa(t,32))throw new g("The provided presentationTimeDelta does not fit in 32 bits.");this.WC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"eventDuration",{get:function(){return this.HC},set:function(t){if(!oa(t,32))throw new g("The provided eventDuration does not fit in 32 bits.");this.HC=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"id",{get:function(){return this.uS},set:function(t){if(!oa(t,32))throw new g("The provided id does not fit in 32 bits.");this.uS=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeIdUri),i.writer.writeByte(0),i.writer.writeString(this.value),i.writer.writeByte(0),i.writer.writeUInt(this.timescale,32),i.writer.writeUInt(this.presentationTimeDelta,32),i.writer.writeUInt(this.eventDuration,32),i.writer.writeUInt(this.id,32),i.concat(bi.from(this.data))}}(Ec);var vM=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new TA,i=0,e=this.boxes;i<e.length;i++){var s=e[i];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function mM(t,i){return function(e){var s=function(t,i){for(var e=t.data,s=t.cursor;s.offset<e.byteLength;){var n=GA(e,s);if(!n.complete)return;if(ys(n.box,i))return n.box}}(new FA(BA(e),new QA),t);if(!s)throw new g("".concat(t," box not found"));return i(s)}}var pM=mM("moov",Xy),AM=mM("sidx",(function(t){var i,e,s=t.data,n=Wc(s.nextUint32()),r=n.version,o=n.flags,h=s.nextUint32(),a=s.nextUint32();0===r?(i=s.nextUint32(),e=s.nextUint32()):(i=s.nextUint64(),e=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new Ws(bi.from(s.nextUint8Array(12))),f=d.readBit(),_=d.readUInt(31),g=d.readUInt(32),w=Boolean(d.readBit()),v=d.readUInt(3),m=d.readUInt(28);c.push({referenceType:f,referencedSize:_,subsegmentDuration:g,startsWithSap:w,sapType:v,sapDeltaTime:m})}return 0===r?new hM(h,a,i,e,c,o.raw):new aM(h,a,i,e,c,o.raw)})),yM=mM("moof",eM),MM=mM("pssh",ky);function bM(t){return function(t){for(var i=new vM,e=0,s=T(t);e<s.length;e++){var n=s[e];ys(n,"ftyp")?i.boxes.push(ay(n)):ys(n,"styp")?i.boxes.push(cM(n)):ys(n,"moov")?i.boxes.push(Xy(n)):ys(n,"moof")?i.boxes.push(eM(n)):ys(n,"mdat")?i.boxes.push(my(n)):i.boxes.push(vt(n))}return i}(new FA(BA(t),new QA))}var TM=class extends Mo{get XC(){return this.ZC}get qC(){return this.KC.expiration}get JC(){return this.$C}get tO(){return this.KC.sessionId}Ws(){if(this.iO)return this.ZC;const t=[];return t.push(Promise.resolve(this.KC.close())),t.push(Si(1e3)),this.eO.w_(Promise.race(t).catch(SM)),this.iO=!0,this.ZC}sO(t,i,e){if(Po.XE){const t=MM(Ju(i));if(1===t.version){i=new Dy(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.KC.generateRequest(t,i)).catch(SM)}$n(t){return Promise.resolve(this.KC.load(t)).catch(SM)}rS(){return Promise.resolve(this.KC.remove()).catch(SM)}Yn(t){return Promise.resolve(this.KC.update(t)).catch(SM)}nO(){this.$C.kL(),this.KC.keyStatuses.forEach(((t,i)=>{this.rO(i,t)})),this.Co(new uA(this))}rO(t,i){if("string"==typeof t){const e=t;t=i,i=e}const e=Ju(t);if(this.Fp===Fu&&16===e.byteLength){let t=vh(e),i=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,i,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.Fp===Fu&&"status-pending"===i&&(i="usable"),this.$C.EL(e,i)}constructor(t,i){super(),this.KC=t,this.Fp=i,this.iO=!1,this.oO=()=>{this.nO()},this.hO=t=>{this.Co(new cA(this,t.messageType,wA(this.Fp,t.message)))},this.aO=()=>{this.iO=!0,this.$C.By>0&&(this.$C.kL(),this.Co(new uA(this))),this.KC.removeEventListener("keystatuseschange",this.oO),this.KC.removeEventListener("message",this.hO)},this.KC.addEventListener("keystatuseschange",this.oO),this.KC.addEventListener("message",this.hO),this.$C=new _A;const e=[];this.KC.closed&&e.push(Promise.resolve(this.KC.closed)),this.eO=new Oi,e.push(this.eO.OL),this.ZC=Promise.race(e).then(this.aO,this.aO),this.nO()}};function SM(t){let i;if(t.message){const e=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);e&&(i=0|x(e[1],16))}throw new Rr(t.message,void 0,i,t)}var NM=class{async uO(t){return new TM(this.cO.createSession(t),this.Qp)}lO(t){return Promise.resolve(this.cO.setServerCertificate(t))}bn(t){return Promise.resolve(t.setMediaKeys(this.cO))}dO(t){return Promise.resolve(t.setMediaKeys(null))}tr(){return Promise.resolve()}constructor(t,i,e){this.cO=t,this.Qp=i,this.wd=e}},IM=class{get Qp(){return this.fO.keySystem}async _O(){const t=await this.fO.createMediaKeys();return new NM(t,this.Fp,this.gO)}wO(){return this.gO}constructor(t,i,e){this.fO=t,this.Fp=i,this.gO=e}},DM=Po.nk&&Po.hk>=42||Po.Ok&&Po.Rk>=38||Po.Sk||Po.Ek||Po.Fk&&Po.Gk>=29;function EM(t,i){return $i(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[ol({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[ol({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function kM(){return void 0!==Il&&"function"==typeof Il.requestMediaKeySystemAccess}function it(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var LM=class{vO(){return this.mO(yu)}pO(){return this.mO(br)}AO(){return this.mO(vr)}yO(){return this.mO(iA)}mO(t){const i=t.gL,e=this.MO.get(i);if(e)return e;const s=this.bO(t,'video/mp4; codecs="avc1.42000a"');return this.MO.set(i,s),s}async bO(t,i){try{return await this.SO.TO(t.dL,[EM(i,!0)]),!0}catch(e){try{return await this.SO.TO(t.dL,[EM(i,!1)]),!0}catch(t){return!1}}}IO(){return this.DO||(this.DO=this.EO()),this.DO}async EO(){return"https:"!==$p.protocol&&(!!DM&&!await this.pO())}constructor(t){this.MO=Pu(),this.DO=void 0,this.SO=t}};function zc(t,i,e,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,kO:s.kO};let o=!1;if(s.audioCapabilities){const h=s.audioCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.audioCapabilities=h.filter((s=>xM(t,i,e,s))),o=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const h=s.videoCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.videoCapabilities=h.filter((s=>xM(t,i,e,s))),o=!0,r.videoCapabilities.length&&(n=!0))}return o||(n=t(e,"video/mp4")),n?r:void 0}function xM(t,i,e,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!Ai(i,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(e,Hm(s.contentType))}function CM(t){if(t.videoCapabilities)for(const i of t.videoCapabilities)if(i.contentType)return i.contentType;if(t.audioCapabilities)for(const i of t.audioCapabilities)if(i.contentType)return i.contentType}function OM(t){const i=[];for(const e of t)e.encryptionScheme&&i.push({contentType:e.contentType,robustness:e.robustness});return t.concat(i)}function jM(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(RM))||!(!t.videoCapabilities||!t.videoCapabilities.some(RM))}function RM(t){return!t.robustness}function PM(t,i){const e=[];for(const s of t)s.robustness?e.push(s):e.push(ol({},s,{robustness:i}));return e}var zM=class{async TO(t,i){i=i.filter((t=>!t.kO));for(const t of i)t.audioCapabilities&&(t.audioCapabilities=OM(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=OM(t.videoCapabilities));if(t===C_&&i.some(jM)){const e=i.map((t=>function(t,i){return ol({},t,{videoCapabilities:t.videoCapabilities?PM(t.videoCapabilities,i):void 0,audioCapabilities:t.audioCapabilities?PM(t.audioCapabilities,i):void 0})}(t,"SW_SECURE_CRYPTO")));try{const i=await Il.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new IM(i,t,s)}catch(t){}}const e=await Il.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new IM(e,t,s)}static LO(){return kM()}},BM=class extends Mo{get tO(){return this.xO&&this.xO.sessionId||""}get qC(){return NaN}get XC(){return this.CO.OL}get JC(){return this.OO}async sO(t,i,e){this.jO(),this.RO=new Oi,this.uO(Ju(i),e),await this.RO.OL}uO(t,i){if(!t)throw new b("Expected initData to be defined but was "+t+".");const e=i&&i.playready&&i.playready.PO;let s;return s=i?this.zO.createSession(this.BO,t,e):this.zO.createSession(this.BO,t),s.addEventListener("mskeyclose",this.aO),s.addEventListener("mskeymessage",this.UO),s.addEventListener("mskeyerror",this.Ss),s.addEventListener("mskeyadded",this.QO),this.xO=s,this.FO("status-pending"),s}async $n(t){return this.jO(),!0}async Yn(t){if(this.YO=new Oi,this.jO(),!this.xO)return Promise.resolve();const i=Ju(t);if(0===i.byteLength)throw new b("Cannot call update with an empty response.");this.xO.update(i),await this.YO.OL}Ws(){return!this.iO&&this.xO&&(this.iO=!0,this.xO.close()),this.CO.OL}async rS(){this.jO()}jO(){if(this.iO)throw new b("Already closing or closed.")}FO(t){this.OO.kL(),this.OO.EL(fA,t),this.Co(new uA(this))}constructor(t,i){super(),this.zO=t,this.BO=i,this.iO=!1,this.YO=void 0,this.RO=void 0,this.xO=void 0,this.aO=()=>{this.iO=!0,this.CO.LL(void 0),this.xO&&(this.xO.removeEventListener("mskeyclose",this.aO),this.xO.removeEventListener("mskeymessage",this.UO),this.xO.removeEventListener("mskeyerror",this.Ss),this.xO.removeEventListener("mskeyadded",this.QO))},this.UO=t=>{this.RO&&(this.RO.LL(void 0),this.RO=void 0),this.Co(new cA(this,"license-request",iw(t.message).buffer,t.destinationURL||void 0))},this.Ss=()=>{const t=this.xO&&this.xO.error;if(!t)return;const i=new Rr("Unknown CDM error",t.code,t.systemCode);if(this.RO)this.RO.xL(i),this.RO=void 0;else if(this.YO)this.YO.xL(i),this.YO=void 0;else switch(i.jL){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.FO("output-not-allowed");break;default:this.FO("internal-error")}},this.QO=()=>{this.RO&&(this.FO("usable"),this.RO.LL(void 0),this.RO=void 0),this.YO&&(this.FO("usable"),this.YO.LL(void 0),this.YO=void 0)},this.CO=new Oi,this.OO=new _A}},UM=class{async uO(t){return new BM(this.zO,this.BO)}lO(t){return Promise.resolve(!1)}bn(t){const i=()=>{t.msSetMediaKeys(this.zO),t.removeEventListener("loadedmetadata",i)};return t.readyState>=1?t.msSetMediaKeys(this.zO):t.addEventListener("loadedmetadata",i),Promise.resolve()}dO(t){return Promise.resolve()}tr(){return Promise.resolve()}constructor(t,i,e){this.zO=t,this.Qp=i,this.wd=e;const s=CM(e)||"video/mp4";this.BO=Hm(s)}},QM=class{get Qp(){return this.Fp}wO(){return this.GO}_O(){const t=new Ua.MSMediaKeys(this.Fp);return Promise.resolve(new UM(t,this.Fp,this.GO))}constructor(t,i){this.Fp=t,this.GO=i}},FM=class{TO(t,i){try{return Promise.resolve(function(t,i){if(!YM())throw new b("Unsupported key system "+t);for(let e of i){let i=zc(GM,hA,t,e);if(i)return new QM(t,i)}throw new b("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static LO(){return YM()}};function YM(){return void 0!==Ua.MSMediaKeys&&"function"==typeof Ua.MSMediaKeys.isTypeSupported}function GM(t,i){return Ua.MSMediaKeys.isTypeSupported(t,i)}var VM=class extends Mo{get tO(){return this.VO?this.VO.sessionId:""}get qC(){return NaN}get XC(){return this.CO.OL}get JC(){return this.OO}sO(t,i,e){const s=e&&e.fairplay&&e.fairplay.WO;if(!s)throw new b("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,i,e){const s=Qa(t),n=2*s.length,r=2*i.length;let o=new ArrayBuffer(4+n+4+r+4+e.byteLength),h=new DataView(o),a=new Bi;return tc(h,a,n,!0),Vg(h,a,s,!0),tc(h,a,r,!0),Vg(h,a,i,!0),tc(h,a,e.byteLength,!0),kg(h,a,e),new j(o)}(Ju(i),s,this.HO);return this.VO=this.XO.createSession(this.BO,n),this.VO.addEventListener("webkitkeymessage",this.UO,!1),this.VO.addEventListener("webkitkeyadded",this.QO,!1),this.VO.addEventListener("webkitkeyerror",this.Ss,!1),this.FO("status-pending"),this.ZO.LL(this.VO),this.ZO=new Oi,Promise.resolve()}$n(t){return Promise.resolve(!0)}async Yn(t){const i=Ju(t);if(0===i.byteLength)throw new b("Cannot call update with an empty response.");this.qO=new Oi;(this.VO||await this.ZO.OL).update(i),await this.qO.OL}Ws(){var t;const i=this.VO;return i&&(i.removeEventListener("webkitkeymessage",this.UO,!1),i.removeEventListener("webkitkeyadded",this.QO,!1),i.removeEventListener("webkitkeyerror",this.Ss,!1),i.close()),this.ZO.g_(),null==(t=this.qO)||t.g_(),this.CO.LL(void 0),this.CO.OL}rS(){return Promise.resolve(void 0)}FO(t){this.OO.kL(),this.OO.EL(fA,t),this.Co(new uA(this))}constructor(t,i,e){super(),this.XO=t,this.BO=i,this.HO=e,this.CO=new Oi,this.qO=void 0,this.OO=new _A,this.VO=void 0,this.ZO=new Oi,this.Ss=()=>{const t=this.VO&&this.VO.error;if(!t)return;const i=new Rr("Unknown CDM error",t.code,t.systemCode);this.qO?(this.qO.xL(i),this.qO=void 0):i.jL===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.FO("output-not-allowed"):this.FO("internal-error"),this.Co(new lA)},this.UO=t=>{this.Co(new cA(this,"license-request",iw(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.QO=()=>{this.qO&&(this.qO.LL(void 0),this.qO=void 0),this.FO("usable")}}};var WM=class{getInternalMediaKeys(){return this.XO}async uO(t){if(!this.HO)throw new ao(qa.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new VM(this.XO,this.BO,this.HO)}lO(t){return this.HO=Ju(t),Promise.resolve(!0)}bn(t){return t.webkitSetMediaKeys(this.XO),Promise.resolve()}dO(t){return t.webkitSetMediaKeys(null),Promise.resolve()}tr(){return Promise.resolve()}constructor(t,i,e){this.XO=t,this.Qp=i,this.wd=e,this.HO=void 0;const s=CM(e)||"video/mp4";this.BO=Hm(s)}},HM=class{get Qp(){return this.Fp}wO(){return this.GO}_O(){const t=new Ua.WebKitMediaKeys(this.Fp);return Promise.resolve(new WM(t,this.Fp,this.GO))}constructor(t,i){this.Fp=t,this.GO=i}},XM=class{TO(t,i){try{return Promise.resolve(function(t,i){if(t!==P_)throw new b(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!ZM())throw new b("Unsupported key system "+t);for(let e of i){let i=zc(qM,aA,t,e);if(i)return new HM(t,i)}throw new b("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static LO(){return ZM()}};function ZM(){return void 0!==Ua.WebKitMediaKeys&&"function"==typeof Ua.WebKitMediaKeys.isTypeSupported}function qM(t,i){return Ua.WebKitMediaKeys.isTypeSupported(t,i)}var KM=class{async TO(t,i){for(let e of this.KO)try{return await e.TO(t,i)}catch(t){}throw new b("Unsupported key system configuration for "+t)}constructor(t){this.KO=t}},Ku=class{JO(t,i){return new Promise((e=>{const s=new Bd;s.w_(this.$O.f_),i&&s.w_(i);const n=()=>{s.h_()};this.tj.push((()=>{const i=JM(t,s.f_);return e(i),i.then(n,n)})),this.ij||(this.ij=this.ej())}))}g_(){return this.sj(!0)}gn(){return this.nj=void 0,this.sj(!1)}sj(t){const i=this.ij;return this.$O.g_(),t&&(this.$O=new Bd),Promise.resolve(i)}constructor(t){this.tj=[],this.ij=void 0,this.$O=new Bd,this.ej=()=>{if(0===this.tj.length)return this.nj?JM(this.nj,this.$O.f_).then(this.rj,this.rj):this.rj();return this.tj.shift()().then(this.ej)},this.rj=()=>{if(0!==this.tj.length)return this.ej();this.ij=void 0},this.nj=t}};function JM(t,i){return new Promise((e=>e(t(i))))}var $M,tb=new Ku,ib=class extends Mo{hj(){this.qO&&(this.FO("usable"),this.qO.LL(void 0),this.qO=void 0)}aj(t){const i=new Rr("Unknown CDM error",t.errorCode,t.systemCode);this.qO?(this.qO.xL(i),this.qO=void 0):this.RO?(this.RO.xL(i),this.RO=void 0):i.jL===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.FO("output-restricted"):1===i.RL?this.FO("expired"):this.FO("internal-error")}uj(t){0!==t.message.byteLength?(this.RO&&(this.RO.LL(void 0),this.RO=void 0),this.Co(new cA(this,"license-request",wA(this.Fp,iw(t.message).buffer),t.defaultURL||void 0))):this.RO&&(this.RO.xL("Empty key message"),this.RO=void 0)}cj(t){this.lj||(this.lj=t,this.dj.LL(t))}get JC(){return this._j}get tO(){return this.gj}set tO(t){this.gj=t}get XC(){return this.CO.OL}get qC(){return NaN}async Ws(){this.throwIfClosed(),this.qO&&(this.qO.xL(void 0),this.qO=void 0),this.WL=!0,this.CO.LL(void 0)}async sO(t,i){this.throwIfClosed(),this.RO=new Oi,this.wj=Ju(i);(this.lj||await this.dj.OL).webkitGenerateKeyRequest(this.Fp,this.wj),await this.RO.OL}async $n(t){return this.throwIfClosed(),!1}async rS(){this.throwIfClosed()}async Yn(t){if(this.throwIfClosed(),this.qO=new Oi,Po.yk||Po.wk)return tb.JO((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.qO)return;(this.lj||await this.dj.OL).webkitAddKey(this.Fp,Ju(t),this.wj,this.tO),await this.qO.OL,Po.wk&&await Si(500)}throwIfClosed(){if(this.WL)throw new b("Already closing or closed.")}FO(t){this._j.kL(),this._j.EL(fA,t),this.Co(new uA(this))}async vj(){const t=this.lj||await this.dj.OL;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.Fp,this.gj)}catch(t){}finally{await Si(500)}}constructor(t){super(),this.Fp=t,this.RO=void 0,this.qO=void 0,this.WL=!1,this.wj=void 0,this.lj=void 0,this.CO=new Oi,this.gj="",this.dj=new Oi,this._j=new _A}},eb=class{bn(t){return this.lj=t,this.lj.addEventListener("webkitkeyadded",this.QO),this.lj.addEventListener("webkitkeyerror",this.mj),this.lj.addEventListener("webkitkeymessage",this.pj),this.Aj.forEach(((i,e)=>i.cj(t))),this.yj.forEach((i=>i.cj(t))),Promise.resolve()}dO(t){return t.removeEventListener("webkitkeyadded",this.QO),t.removeEventListener("webkitkeyerror",this.mj),t.removeEventListener("webkitkeymessage",this.pj),this.lj=void 0,Promise.resolve()}async tr(){let t=this.Aj.entries(),i=t.next();for(;!i.done;)await i.value[1].vj(),i=t.next();this.Aj.clear()}async uO(t,i,e){const s=new ib(this.Qp);return this.lj&&s.cj(this.lj),this.yj.push(s),s}lO(t){return Promise.resolve(!1)}Mj(t){if(!t)return;let i=this.Aj.get(t);return i||(i=this.yj.shift(),i?(i.tO=t,this.Aj.set(t,i),i):void 0)}constructor(t,i){this.Qp=t,this.wd=i,this.lj=void 0,this.Aj=Pu(),this.yj=[],this.QO=t=>{const i=this.Mj(t.sessionId);i&&i.hj()},this.mj=t=>{const i=this.Mj(t.sessionId);i&&i.aj(t)},this.pj=t=>{const i=this.Mj(t.sessionId);i&&i.uj(t)}}},sb=class{_O(){return Promise.resolve(new eb(this.Qp,this.bj))}wO(){return this.bj}constructor(t,i){this.Qp=t,this.bj=i}};function wi(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function cl(t){let i;for(;Ks(i=t.firstChild);)t.removeChild(i)}function nb(t,i){t.insertBefore(i,t.firstChild)}function rb(t){const i=t.className;return"string"==typeof i?i:i&&"string"==typeof i.baseVal?i.baseVal:""}function ob(t,i){const e=t.className;"string"==typeof e?t.className=i:e&&"string"==typeof e.baseVal&&(e.baseVal=i)}function hb(t,i){return void 0!==t.classList?t.classList.contains(i):void 0!==t.className&&-1!==(" "+rb(t)+" ").indexOf(" "+i+" ")}function ab(t,i){if(void 0!==t.classList)t.classList.add(i);else if(void 0!==t.className){const e=rb(t);-1===(" "+e+" ").indexOf(" "+i+" ")&&ob(t,(e+" "+i).trim())}}function ub(t,i){if(void 0!==t.classList)t.classList.remove(i);else if(void 0!==t.className){let e=" "+rb(t)+" ";const s=" "+i+" ";for(;-1!==e.indexOf(s);)e=e.replace(s," ");ob(t,e.trim())}}function cb(t,i,e){void 0===e&&(e=!hb(t,i)),e?ab(t,i):ub(t,i)}function lb(t){t.stopPropagation()}function db(t,i){Po.wk&&Po.pk<3?function(t,i){let e=i;switch(i){case"flex":e="-webkit-flex";break;case"inline-flex":e="-webkit-inline-flex"}t.display=e}(t,i):function(t,i){if(t.display=i,t.display!==i){let e=i;switch(i){case"flex":e="-ms-flexbox";break;case"inline-flex":e="-ms-inline-flexbox"}t.display=e}}(t,i)}function fb(t,i){const e=i.style;if(e)for(const i of w.keys(t)){const s=t[i];void 0!==s&&(e[i]=s)}}function _b(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.top="0",i.bottom="0",i.width="100%",i.height="100%"}function gb(t){const i=t.style;i.position="",i.left="",i.right="",i.top="",i.bottom="",i.width="",i.height=""}function wb(t){t.removeAttribute("title")}function vb(t){t.addEventListener("mouseover",(t=>{wb(t.target)}))}function mb(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}function pb(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}function Su(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function Ab(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function yb(){return void 0!==h?h.createElement("video"):void 0}function Mb(){return $M||($M=yb()),$M}var bb,de,Tb=class{TO(t,i){try{return Promise.resolve(function(t,i){if(!Tb.LO())throw new b("Unsupported key system "+t);for(let e of i){let i=zc(Sb,hA,t,e);if(i)return new sb(t,i)}throw new b("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static LO(){return it()}};function Sb(t,i){const e=Mb();return!(!e||!e.canPlayType||""===e.canPlayType(i,t))}function Nb(){return bb||(bb=function(){const t=[];XM.LO()&&t.push(new XM);zM.LO()&&t.push(new zM);FM.LO()&&t.push(new FM);Tb.LO()&&t.push(new Tb);return new KM(t)}()),bb}!function(t){t[t.Tj=0]="Tj",t[t.Sj=1]="Sj"}(de||(de={}));var Ib=class extends Os{constructor(t){super($.Tm),this.currentTime=t}},$e=class extends Os{constructor(t){super($.Sm),this.currentTime=t}},Db=[$.Nw,$.Sm,Tf.jh,Tf.Sh],Xe=class extends Mo{Nj(t){!this.Ij&&t>=qo.Xn&&(this.Ij=!0,this.Co(new An(this.Dj.U_,t)))}Ej(t){!this.Lj&&t>=qo.UT&&(this.Lj=!0,this.Co(new re(this.Dj.U_,t)))}xj(t){this.Cj||(t>=qo.QT&&this.Oj<qo.QT&&!this.Dj.fg||this.jj&&t>=qo.QT)&&this.Co(new $e(this.Dj.U_))}Rj(t){!this.Pj(t)||this.Dj.G_||this.Dj.lt||this.Co(new Ib(this.Dj.U_))}zj(t){this.Oj<=qo.UT&&t>=qo.QT&&this.Co(new We(this.Dj.U_,t))}maybeDispatchCanPlayThroughEvent(t){t===qo.FT&&this.Co(new Pn(this.Dj.U_,t))}Pj(t){const i=!this.Dj.fg&&t<=qo.UT,e=!this.Bj&&this.Oj<=qo.UT;return i&&!e}get jj(){return!this.Dj.fg&&this.Bj}tr(){this.Oj=qo.BT,this.Bj=!0,this.Lj=!1,this.Ij=!1}gn(){this.Vo(),this.Cj&&this.Dj.fn($.Sm,this.Uj),this.Dj.fn(Tf.jh,this.Qj),this.Dj.fn(Tf.Sh,this.Fj),this.Dj.fn($.Nw,this.Yj)}constructor(t,i=!1){super(),this.Dj=t,this.Cj=i,this.Oj=qo.BT,this.Bj=!0,this.Lj=!1,this.Ij=!1,this.Yj=t=>{const i=this.Dj.Sg;i!==this.Oj&&this.Co(new Dr(t.currentTime,i)),i===qo.BT&&(this.Lj=!1,this.Ij=!1),this.Nj(i),this.Ej(i),this.zj(i),this.maybeDispatchCanPlayThroughEvent(i),this.xj(i),this.Rj(i),this.Oj=i},this.Qj=()=>{this.Rj(this.Oj),this.xj(this.Oj),this.Bj=this.Dj.fg},this.Fj=()=>{this.Bj=this.Dj.fg},this.Uj=t=>{this.Co(new $e(t.currentTime))},this.Dj.yn($.Nw,this.Yj),this.Dj.yn(Tf.jh,this.Qj),this.Dj.yn(Tf.Sh,this.Fj),this.Cj&&this.Dj.yn($.Sm,this.Uj)}},fl=class extends Mo{get U_(){return this.Dj.U_}get G_(){return this.Dj.G_}get lt(){return this.Dj.lt}get fg(){return this.Dj.fg}get Sg(){return this.Dj.Sg}h_(){this.Vo(),this.Dj.fn(Db,this.Ds)}constructor(t){super(),this.Dj=t,this.Dj.yn(Db,this.Ds)}},ku=class{Gj(){return this.Vj}Wj(t){this.Vj=t}get Hj(){return this.aE}get Xj(){return!1}get Zj(){const t=this.qj.certificate;if(t)return Sn(t)?$s(t):Ju(t)}Kj(){return this.qj.licenseAcquisitionURL||this.Gj()}get Jj(){return!1}$j(t){return Promise.resolve()}tR(t,i){return Promise.resolve(void 0)}get tE(){return Boolean(this.qj.useCredentials)}async iR(t,i,e,s){const n=this.eR(t,i,e,s);if(""===n.zu)throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.Hj.uD(n);return await t.sR(i)}catch(t){return me(t),void await this.nR(t,n.zu,s)}}eR(t,i,e,s){const n=this.rR().ED(),r=this.tE,o={zu:this.oR(),qD:i,XD:n,HD:t,tE:r,ZD:Cl.POST,_D:0,f_:s,Av:li.jD,JD:e};return new Zi(o)}hR(t,i){return Promise.resolve(t)}aR(t,i,e,s){return Promise.resolve(t)}rR(){return new Xo(this.qj.headers||{})}async nR(t,i,e){throw new ss(qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}oR(t,i){let e=i;const s=this.qj.queryParameters;if(!e){const t=this.Kj();if(!t)return"";e=t}if(s||t){const i=ra.Dh(e);t&&Kf(i,t),s&&Kf(i,s),e=i.href}return e}uR(t,i){return Eb(t)}cR(t){return new j(t)}async lR(t,i,e){const s=await this.uR(t,e),n=await this.iR(s,this.dR,i,e);return this.cR(n)}gn(){}constructor(t,i,e,s,n){this.Vj=void 0,this.Qp=t,this.fR=i,this._R=e,this.aE=s,this.dR=n,this.qj=this.gR(i)}};function Eb(t){return Promise.resolve(iw(t).buffer)}var Ne,cu=class extends ku{gR(t){return t.widevine||{}}async wR(t,i){return this.Zj?this.Zj:this.vR(new j(t),i)}vR(t,i){return super.lR(t,fo.BD,i)}constructor(t,i,e,s){super(yu,t,i,e,s)}};!function(t){t.Ep="Widevine",t.mR="PlayreadyV2",t.pR="PlayreadyV3",t.Dp="PlayreadyV2",t.kp="Fairplay"}(Ne||(Ne={}));var kb={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function Lb(t,i){var e,s,n,r;const o=kb[i],h=t.accountName;return{CustomerName:t.customerName,AccountName:h,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(e=ra.AR)?void 0:e.Ys,OSVersion:null==(s=ra.AR)?void 0:s.yR,DRMProvider:o.DRMProvider,DRMVersion:o.DRMVersion,DRMType:o.DRMType,DeviceVendor:null==(n=ra.AR)?void 0:n.MR,DeviceModel:null==(r=ra.AR)?void 0:r.bR}}}function xb(t,i){if(!t.accountName)throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, accountName is not set.");if(!t.customerName)throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, customerName is not set.");if(!t.portalId)throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, portalId is not set.");throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration.")}function Cb(t,i,e){let s;if(_w(t))s={AuthToken:t.authToken,Payload:i};else{if(!gw(t))throw xb(t,e);s={LatensRegistration:Lb(t,e),Payload:i}}return Vn(JSON.stringify(s))}async function Ob(t,i,e){const s=t.lD;if(!s)throw new ss(qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,i);const n=s;let r,o;try{r=await n.SR(e),o=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){o=""}throw new ss(qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.uD.zu,n.fD,n.NR,o)}var jb=class extends cu{static IR(){return ra.Ys.DR?"required":"optional"}nR(t,i,e){return Ob(t,i,e)}$j(t){return this.ER?Jr(this.ER.OL,t):(this.ER=new Oi,Promise.resolve())}async uR(t,i){const e=this.fR;if(!e)throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return Cb(e,dn(t),Ne.Ep)}cR(t){let i;if(!t.license)throw new ss(qa.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return i=$s(t.license),i}kR(t){return Promise.resolve(new j(t))}async wR(t,i){this.LR();const e=await this.uR(t,i),s=await this.iR(e,Ft.SD,fo.UD,i);return await this.kR(s)}async vR(t,i){const e=await super.vR(t,i);return this.LR(),e}LR(){this.ER||(this.ER=new Oi),this.ER.LL()}gn(){this.ER&&this.ER.g_(),super.gn()}constructor(t,i,e){super(t,i,e,Ft.ND),this.ER=void 0}},Rb=class extends cu{get xR(){if(ww(this.fR))return this.fR.token}async uR(t,i){const e=await Eb(t),s=this._R,n=ew(new j(e)),r=this.xR;if(!r)throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,i,e){super(t,i,e,Ft.SD),this.Wj("https://widevine-proxy.drm.technology/proxy")}};function Pb(t,i){let e=i||{};return t.ticket&&t.sessionId&&(e=ol({},e,{SessionId:t.sessionId,Ticket:t.ticket})),ol({},e,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}var zb=class extends cu{oR(t,i){let e=t;return xc(this.fR)&&(e=Pb(this.fR,e)),super.oR(e,i)}constructor(t,i,e){super(t,i,e,Ft.SD),this.Wj("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}},Bb="Conax-Custom-Data";function xl(t,i,e){const s=t&&lw(t)&&t;if(s&&!e.has(Bb)){const t=y_(s)?s.token:void 0,n=y_(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:i+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});e.set(Bb,r)}return e}var Ub=class extends cu{rR(){const t=super.rR();return xl(this.fR,"Widevine",t)}constructor(t,i,e){super(t,i,e,Ft.SD),this.Wj("https://connect.conax.com:8094/license")}};function Qb(t){const i=Wg(new j(t));return $s(JSON.parse(i).license)}function pl(t){return"string"==typeof t.token?t.token:Vn(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function _l(t,i,e){let s;return s=e.token?"x-dt-auth-token":"dt-custom-data",t.set(s,i),t}var Fb=class extends cu{get xR(){return pl(this.fR)}cR(t){return Qb(t)}rR(){return _l(super.rR(),this.xR,this.fR)}constructor(t,i,e){super(t,i,e,Ft.SD),this.Wj("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}},Yb=class extends cu{rR(){const t=super.rR(),i=this.fR.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e){super(t,i,e,Ft.SD)}};async function wl(t,i,e,s){if(!vw(t))throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new Xo;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const o=t.streamId;let h;h=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:i,licenseType:h,streamId:o},u={zu:t.ticketAcquisitionURL,qD:Ft.ND,XD:n,ZD:Cl.POST,HD:JSON.stringify(a),f_:s},c=await e.uD(u);return await c.SR()}var Gb=class extends cu{rR(){const t=super.rR();return t.set("Content-Type","application/json"),t}async uR(t,i){const e=$_(t.buffer),s=this.fR,n=await wl(s,"widevine_modular",this.Hj,i);this.Wj(n.licenseServerUrl);const r=Gn(JSON.stringify({payload:e,ticket:n.ticket}));return super.uR(r,i)}cR(t){return $s(t.license)}constructor(t,i,e){super(t,i,e,Ft.ND)}},Vb=class extends cu{rR(){if(!mw(this.fR))throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.rR();return t.set("X-AxDRM-Message",this.fR.token),t}constructor(t,i,e){super(t,i,e,Ft.SD)}};function Wb(t){const i=new j(2*t.length);for(let e=0;e<t.length;e+=1)i[2*e]=t.charCodeAt(e),i[2*e+1]=0;return i}var $a=class extends ku{gR(t){return t.playready||{}}rR(){const t=new Xo(this.OR);return t.LD(super.rR()),t}jR(t){return t.length>=1&&t[0].iD.length>0}tR(t){const i=this.fR.playready.customData;if(i){const t=Wb(i),e=Wb('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+dn(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{PO:e}})}return super.tR(t)}async uR(t,i){const e=await Eb(t);return this.RR(e)}async RR(t){var i,e;let s=null;const n=Yg(new DataView(t),new Bi,!0);let r;try{r=ra.KI(n)}catch(t){return s}const o=null==(i=r.XI("PlayReadyKeyMessage")[0])?void 0:i.XI("LicenseAcquisition")[0];var h;const a=null!=(h=null==o?void 0:o.XI("Challenge"))?h:[];this.jR(a)&&(s=J_(a[0].PR));const u=new Xo;var c;const l=null!=(c=null==o||null==(e=o.XI("HttpHeaders")[0])?void 0:e.XI("HttpHeader"))?c:[];for(const t of l){const i=t.XI("name")[0].PR,e=t.XI("value")[0].PR;u.append(i,e)}return this.OR=u,s}wR(t,i){return Promise.resolve(t)}vR(t,i){return super.lR(t,fo.QD,i)}constructor(t,i,e){super(vr,t,i,e,Ft.SD),this.OR=void 0}},Hb=class t{static zR(t){return"3"===t.version?Ne.pR:Ne.mR}UR(){const t={};if(this.kC===Ne.pR){const i={LatensRegistration:Lb(this.QR,Ne.pR)};t["X-TITANIUM-DRM-CDATA"]=Vn(JSON.stringify(i))}return t}get FR(){return this.kC}get kO(){return this.kC===Ne.mR}constructor(i){this.QR=i,this.kC=t.zR(i)}};var Xb=class extends $a{tR(t){const i=this.fR;if(!this.fR)throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(gw(i)){const t={};return t.playready={PO:Zb(i,this.YR.FR)},Promise.resolve(t)}return Promise.reject(xb(i,Ne.Dp))}rR(){const t=new Xo(this.YR.UR());return t.LD(super.rR()),t}async nR(t,i,e){const s=t.lD;if(!s)throw new ss(qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i);let n,r;try{const t=await s.GR(e),i=Wg(new j(t)),h=ra.KI(i);if(h){const t=function(t,i){return function(t,i){const e=t.m.slice(),s=[];for(;e.length>0;){const t=e.shift();i(t)?s.push(t):e.push(...t.m)}return s}(t,(t=>t.WR===i))}(h,"CustomData");var o;if(t.length>0)n=JSON.parse(t[0].PR),r=null==(o=n.DrmErr)?void 0:o.desc}}catch(t){}throw new ss(qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i,s.fD,s.NR,r)}jR(t){if(1!==t.length)throw new ss(qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,i,e){super(t,i,e),this.YR=new Hb(this.fR)}};function Zb(t,i){const e=Lb(t,i),s=e.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+Vn('<LatensRegistration formatversion="'+s+'"><AccountName>'+e.AccountName+"</AccountName><CustomerName>"+e.CustomerName+"</CustomerName><PortalID>"+e.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+e.DeviceInfo.DeviceType+"</DeviceType><OSType>"+e.DeviceInfo.OSType+"</OSType><OSVersion>"+e.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+e.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+e.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+e.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+e.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+e.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=Xg(n,!0);return Xg('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+dn(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}var qb,Kb=class extends $a{get xR(){if(ww(this.fR))return this.fR.token}jR(t){if(1!==t.length)throw new ss(qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}oR(t,i){const e=ol({},t||{},{token:this.xR});return super.oR(e,i)}constructor(t,i,e){super(t,i,e),this.Wj("https://playready-license.drm.technology/rightsmanager.asmx")}},Jb=class extends $a{oR(t,i){let e=t;return xc(this.fR)&&(e=Pb(this.fR,e)),super.oR(e,i)}constructor(t,i,e){super(t,i,e),this.Wj("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}},$b=class extends $a{rR(){const t=super.rR();return xl(this.fR,"PlayReady",t)}constructor(t,i,e){super(t,i,e),this.Wj("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}},tT=class extends $a{get xR(){return pl(this.fR)}cR(t){const i=function(t){const i=Wg(new j(t));return I(i,"<?xml")?0:1}(t);return 1===i?Qb(t):super.cR(new j(t))}rR(){return _l(super.rR(),this.xR,this.fR)}constructor(t,i,e){super(t,i,e),this.Wj("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};!function(t){t[t.HR=0]="HR",t[t.SR=1]="SR"}(qb||(qb={}));var nl,iT=class extends $a{rR(){const t=super.rR();return this.XR&&t.set("Ticket",this.XR),t.set("Content-Type","text/xml"),t}async uR(t,i){const e=this.fR,s=await wl(e,"playready",this.Hj,i);return this.Wj(s.licenseServerUrl),this.XR=s.ticket,super.uR(t,i)}constructor(t,i,e){super(t,i,e)}},eT=class extends $a{rR(){if(!mw(this.fR))throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.rR();return t.set("X-AxDRM-Message",this.fR.token),t}};!function(t){t.ND="application/json",t.ZR="application/x-www-form-urlencoded",t.qR="application/octet-stream",t.Ru="text/plain;charset=UTF-8"}(nl||(nl={}));var pe=class extends ku{get Jj(){return!0}KR(){return this.qj.certificateURL||this.JR}$R(t){this.JR=t}uR(t){return Promise.resolve(this.tP(t,this.iP))}tP(t,i){return"spc="+encodeURIComponent(dn(t))+"&assetId="+encodeURIComponent(i)}get eP(){return nl.ZR}gR(t){return t.fairplay||{}}sP(t){const i=t.indexOf("?");if(i>=0)return Promise.resolve(t.substr(i+1));{const i=t.split("skd://").pop();if(i){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(i))return Promise.resolve(i)}const e=t.split("/");return Promise.resolve(e[e.length-1])}}async tR(t){var i;const e=null!=(i=this.nP)?i:Qa(new j(t)),s=await this.sP(e);this.iP=s;const n={};return n.fairplay={WO:s},n}rR(){const t=super.rR();return t.set("Content-Type",this.eP),t}async wR(t,i){return this.Zj?this.Zj:await this.rP(i)}vR(t,i){return super.lR(t,fo.PD,i)}oP(t){const i=this.KR(),e=this.rR(),s={zu:i,qD:Ft.SD,XD:e,ZD:Cl.GET,tE:!1,HD:null,_D:0,f_:t,Av:li.jD,JD:fo.zD};return new Zi(s)}async rP(t){const i=this.oP(t),e=await this.Hj.uD(i),s=await e.GR();return new j(s)}cR(t){let i;if("string"==typeof t){let e=t.trim();"<ckc>"===e.substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),i=$s(e)}else i=new j(t);return i}oR(t,i){let e=super.oR(t,i);return I(e,"skd:")&&(e=e.substr(4)),e}constructor(t,i,e,s,n){super(t.Qp,i,e,s,n),this.iP="",this.JR=void 0,this.nP=t.hP}};function sT(t){return!S(t.getTime())}function Na(){return Date.now()||(new Date).getTime()}function nT(t){return t/1e3}function rT(t){return 1e3*t}var Vt=1/6,oT=ii.fromNumber(pu);function zr(t,i){if(0===i)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(oT))return t.toNumber()/i;const e=t.divide(i),s=t.subtract(e.multiply(i));return e.toNumber()+s.toNumber()/i}var hT=class extends pe{get eP(){return nl.qR}sP(t){let i=t.split("://",1);return"skd"!==i[0].slice(-3).toLowerCase()?Promise.resolve(""):(i=t.split(";",2),i.length>1?Promise.resolve(i[1]):Promise.resolve(super.sP(t)))}async uR(t){return t}cR(t){return new j(t)}oR(t,i){const e=t||{};return e.p1=Na(),super.oR(e,i)}constructor(t,i,e,s){super(t,i,e,s,Ft.SD)}},aT=class extends pe{get eP(){return nl.ND}get xR(){if(!ww(this.fR))throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.fR.token}tP(t,i){const e={token:this.xR,contentId:i,payload:dn(t)};return JSON.stringify(e)}cR(t){return new j(t)}rR(){const t=super.rR();return t.set("x-vudrm-token",this.xR),t}constructor(t,i,e,s){super(t,i,e,s,Ft.SD),this.Wj("https://fairplay-license.drm.technology/license"),this.$R("https://fairplay-license.drm.technology/certificate")}},uT="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",cT="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",lT=class extends pe{cR(t){const i=function(t){let i;try{i=JSON.parse(t).ckc}catch(t){throw new ss(qa.CONTENT_PROTECTION_LICENSE_INVALID,uT)}if(!i)throw new ss(qa.CONTENT_PROTECTION_LICENSE_ERROR,cT);return i}(Wg(new DataView(t)));return super.cR(i)}constructor(t,i,e,s){super(t,i,e,s,Ft.SD)}};var dT=class extends pe{get eP(){return nl.ND}async uR(t){const i=this.fR;if(!i)throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return Cb(i,dn(t),Ne.kp)}cR(t){try{let i;if(Sn(t)){const e=t.trim();i=JSON.parse(e)}else i=t;if(i.license){const t=J_(i.license);return new j(t)}throw new ss(qa.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new ss(qa.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}nR(t,i,e){return Ob(t,i,e)}constructor(t,i,e,s){super(t,i,e,s,Ft.ND)}},fT=class extends pe{KR(){const t=super.KR();if(!t)return t;const i=ra.Dh(t),e=this.fR;return xc(e)&&Kf(i,{accountId:e.accountId,applicationId:e.applicationId||""}),i.href}sP(t){return xc(this.fR)?Promise.resolve(this.fR.contentId):super.sP(t)}async uR(t){return t}cR(t){return new j(t)}get eP(){return nl.qR}oR(t,i){let e=t;return xc(this.fR)&&(e=function(t,i){return ol({},Pb(t,i),{KeyId:t.keyId})}(this.fR,e)),super.oR(e,i)}constructor(t,i,e,s){super(t,i,e,s,Ft.SD),this.Wj("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.$R("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}},_T=class extends pe{rR(){const t=super.rR();return xl(this.fR,"FairPlay",t)}async rP(t){const i={zu:this.KR(),qD:Ft.SD,XD:{},ZD:Cl.GET,tE:!1,HD:null,_D:0,f_:t,Av:li.jD,JD:fo.zD},e=await this.Hj.uD(i),s=await e.GR();return new j(s)}async uR(t){return t}sP(t){const i=t.indexOf("?");if(0===t.indexOf("skd://")){let e;return e=i>=0?t.substring(6,i):t.substring(6),Promise.resolve(function(t){return Wg($s(t))}(e))}return Promise.resolve("unknown")}cR(t){try{const i=JSON.parse(t);return new j(J_(i.CkcMessage))}catch(t){throw new g("CFLRW-66")}}constructor(t,i,e,s){if(super(t,i,e,s,Ft.Ru),!lw(i))throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.Wj("https://connect.conax.com:8097/license")}},gT=class extends pe{sP(t){return I(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new ss(qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}tP(t,i){return"spc="+dn(t)+"&assetId="+i}constructor(t,i,e,s){super(t,i,e,s,Ft.Ru),this.Wj(rw[ho.kp])}},wT=class extends pe{get xR(){return pl(this.fR)}tP(t,i){const e="spc="+encodeURIComponent(dn(t))+"&"+encodeURI(i);return"persistent"===this.qj.licenseType?e+"&offline=true":e}rR(){return _l(super.rR(),this.xR,this.fR)}constructor(t,i,e,s){super(t,i,e,s,Ft.Ru),this.Wj("https://lic.drmtoday.com/license-server-fairplay/")}},vT=class extends pe{sP(t){let i=t;return I(i,"skd:")&&(i="http:"+i.substring(4)),I(i,"http:")||I(i,"https:")?Promise.resolve(ra.Dh(i).hostname):Promise.reject(new g("Could not parse ExpressPlay FairPlay content ID."))}async uR(t){return t}cR(t){return new j(t)}get eP(){return nl.qR}constructor(t,i,e,s){super(t,i,e,s,Ft.SD)}},mT=class extends pe{rR(){const t=super.rR(),i=this.fR.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e,s){super(t,i,e,s,Ft.Ru)}},pT=class extends pe{async rP(t){const i=this.KR(),e=this.rR(),s={zu:i,qD:Ft.ND,XD:e,ZD:Cl.POST,f_:t,Av:li.jD,JD:fo.zD},n=await this.Hj.uD(s),r=await n.SR();return new j($s(r.certificate))}get eP(){return nl.ND}async vR(t,i,e){void 0===e&&(e=Ft.Ru);const s=dn(t),n=this.fR,r=await wl(n,"fairplay",this.Hj,i),o=Gn(JSON.stringify({spc:s,ticket:r.ticket})),h={zu:this.Kj(),qD:Ft.ND,XD:this.rR(),ZD:Cl.POST,HD:o,_D:0,f_:i,Av:li.jD,JD:fo.PD},a=await this.Hj.uD(h);return $s((await a.SR()).licence)}constructor(t,i,e,s){if(super(t,i,e,s,Ft.ND),!vw(i))throw new g("Invalid Xstream DRM configuration")}},AT=class extends pe{tP(t,i){return dn(t)}cR(t){if(0===t.length)throw new ss(qa.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.cR(t)}rR(){const t=super.rR();return t.set("Content-Type","text/plain"),t}constructor(t,i,e,s){super(t,i,e,s,Ft.Ru)}},yT=class extends pe{get eP(){return nl.ND}tP(t,i){return t}cR(t){return new j(t)}rR(){if(!mw(this.fR))throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.rR();return t.set("X-AxDRM-Message",this.fR.token),t}constructor(t,i,e,s){super(t,i,e,s,Ft.SD)}},MT=class extends pe{get eP(){return nl.Ru}tP(t,i){const e={spc:dn(t)};return JSON.stringify(e)}sP(t){const i=ra.Dh(t);return this.aP=t,i.searchParams.has("b")?Promise.resolve(i.searchParams.get("b")):Promise.reject(new ss(qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}oR(t,i){let e=this.Kj();return!e&&this.aP&&(e=this.aP),e&&(e=e.replace("skd://","https://")),super.oR(t,i||e)}cR(t){try{let i;if(i=Sn(t)?JSON.parse(t.trim()):t,i.ckc)return $s(i.ckc)}catch(t){throw new ss(qa.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new ss(qa.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,i,e,s){super(t,i,e,s,Ft.ND),this.aP=void 0}},bT=class{uP(t){return this.cP(t)}lP(t,i){throw new b(i+" must be "+this.dP+". (Received: "+t+")")}constructor(t,i){this.cP=t,this.dP=i}},xe=(new bT((function(t){return!0}),"any"),new bT(he,"a number")),Zn=new bT(Sn,"a string"),TT=new bT(tu,"a boolean"),ST=(new bT(hd,"a date"),new bT(Bn,"undefined")),NT=new bT(Vu,"an object"),IT=new bT((function(t){return null===t}),"null");new bT((function(t){return null==t}),"null or undefined");function DT(t,i){throw new b(i+" has an incorrect type")}var ET=class{uP(t){if(!Vu(t))return!1;for(const i of w.keys(this.fP)){if(!this.fP[i].uP(t[i]))return!1}return!0}lP(t,i){if(!Vu(t))throw new b(i+" must be an object.");for(const e of w.keys(this.fP)){const s=this.fP[e];if(!s.uP(t[e]))return s.lP(t[e],i+"."+String(e))}throw new b}constructor(t){this.fP=t}};function Nu(t){return new ET(t)}function kT(t){return w.keys(t).map((i=>t[i]))}var LT=class{uP(t){return Ai(this.tf,t)}lP(t,i){return DT(0,i)}constructor(t){this.tf=t}};function wn(t){return new LT(t)}var xT=class{uP(t){return this._P.some((i=>i.uP(t)))}lP(t,i){return DT(0,i)}constructor(t){this._P=t}};function fa(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return new xT(i)}var CT=class{uP(t){return tr(t)&&t.every((t=>this.gP.uP(t)))}lP(t,i){if(!tr(t))throw new b(i+" must be an array.");for(let e=0;e<t.length;e++){const s=t[e];this.gP.uP(s)||this.gP.lP(s,i+"["+e+"]")}return DT(0,i)}constructor(t){this.gP=t}};function Eu(t){return new CT(t)}var OT=class{uP(t){return Vu(t)&&w.keys(t).every((i=>this.gP.uP(t[i])))}lP(t,i){if(!Vu(t))throw new b(i+" must be an object.");for(const e of w.keys(t))if(!this.gP.uP(t[e]))return this.gP.lP(t[e],i+"."+e);return DT(0,i)}constructor(t){this.gP=t}};function V(t){return new OT(t)}var jT=class{uP(t){return this.gP().uP(t)}lP(t,i){return this.gP().lP(t,i)}constructor(t){this.gP=ei(t)}};var RT=Nu({responseCode:xe,isException:TT,description:Zn,title:Zn,correlationId:Zn});async function PT(t,i,e,s,n){const r=function(t,i,e,s){const n={token:i.token,account:i.accountId,form:"json"},r=decodeURIComponent(qn(e,n)),o=new Xo({});o.append("Content-Type","application/json");const h=dn(t),a={getFairplayLicense:{releasePid:i.releasePid,spcMessage:h}};return{zu:r,qD:Ft.Ru,XD:o,ZD:Cl.POST,HD:JSON.stringify(a),f_:s,Av:li.jD,JD:fo.PD}}(t,i,e,n);return await async function(t,i){const e=await i.uD(t),s=await e.SR();if(RT.uP(s))throw new ss(qa.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.zu,s.responseCode);return $s(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var zT=class extends pe{sP(t){const i=t.replace("FairPlay",this.wP.releasePid);return super.sP(i)}async vR(t,i){return await PT(t,this.wP,this.Kj(),this.Hj,i)}constructor(t,i,e,s){super(t,i,e,s,Ft.SD),this.wP=i}},BT=class extends ku{gR(t){return t.clearkey||{}}async iR(t,i,e,s){const n=this.qj;if(this.Kj())return super.iR(t,this.dR,e,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let i=t;return i||(i={}),{kty:"oct",kid:i.id,k:i.value}}))};return Kg(JSON.stringify(t)).buffer}throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}wR(t,i){return Promise.resolve(new j(0))}async vR(t,i){const e=await super.lR(t,fo.FD,i),s=JSON.parse(Qa(e));if(s.keys)for(const t of s.keys)t.k&&(t.k=W_(t.k)),t.kid&&(t.kid=W_(t.kid));return Kg(JSON.stringify(s))}constructor(t,i,e){super(br,t,i,e,Ft.SD)}},Tl=class extends cu{},UT={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function QT(t,i,e){const s=HT(i),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(i);const r=await Jr(Promise.resolve(n.call(t,s)),e);return $g(r)?Ju(r):WT(ol({},UT,r))}async function FT(t,i,e,s,n){const r=t.onCertificateResponse,o=VT(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);return Ju(await Jr(Promise.resolve(r.call(t,o)),n))}async function Sl(t,i,e,s){const n=await async function(t,i,e,s){const n=null==t?void 0:t.onLicenseRequest,r=GT(i,e);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const o=await Jr(Promise.resolve(n.call(t,r)),s);if($g(o))return Ju(o).buffer;return ol({fairplaySkdUrl:void 0},UT,o)}(t,i,e,s);return n instanceof ArrayBuffer?n:WT(n)}async function YT(t,i,e,s,n,r){const o=GT(e,n),h=await async function(t,i,e,s,n){const r=null==t?void 0:t.onLicenseResponse,o=VT(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);0;const h=await Jr(Promise.resolve(r.call(t,o)),n);return Ju(h)}(t,new j(i),o,s,r);return Ju(h)}function GT(t,i){return ol({},HT(t),{fairplaySkdUrl:i})}function VT(t,i,e){return{url:e.cE,status:e.fD,statusText:e.NR,headers:e.XD.ED(),body:t,request:i}}function WT(t){return new Zi({zu:t.url,ZD:t.method,XD:t.headers,HD:t.body,tE:t.useCredentials})}function HT(t){var i;return{url:t.zu,body:null!=(i=XT(t.HD))?i:null,headers:t.XD.ED(),method:t.ZD,useCredentials:t.tE}}function XT(t){if(t)return"string"==typeof t?Kg(t):t instanceof ArrayBuffer?new j(t):X_(t)?js(t):void 0}var ZT=class extends $a{wR(t,i){return Promise.resolve(t)}async vR(t,i){const e=await this.RR(iw(t).buffer),s=this.eR(e,Ft.SD,fo.QD,i),n=await Sl(this.vP,s,void 0,i);if(n instanceof ArrayBuffer)return new j(n);if(""===n.zu)throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.Hj.uD(n),e=await t.GR(i);return await YT(this.vP,e,s,t,void 0,i)}catch(t){throw me(t),new ss(qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,i,e,s){super(t,i,e),this.vP=s}},qT=class extends Tl{async wR(t,i){if(this.Zj)return this.Zj;const e=this.eR(t,Ft.SD,fo.UD,i),s=await QT(this.vP,e,i);if(s instanceof j)return s;if(""===s.zu)throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.Hj.uD(s),r=await n.GR(i)}catch(t){throw me(t),new ss(qa.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const o=GT(e,void 0);return await FT(this.vP,new j(r),o,n,i)}async vR(t,i){const e=this.eR(t,Ft.SD,fo.BD,i),s=await Sl(this.vP,e,void 0,i);if(s instanceof ArrayBuffer)return new j(s);if(""===s.zu)throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.Hj.uD(s),n=await t.GR(i);return await YT(this.vP,n,e,t,void 0,i)}catch(t){throw me(t),new ss(qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,i,e,s){super(t,i,e,Ft.SD),this.vP=s}},KT=class extends pe{async wR(t,i){if(this.Zj)return this.Zj;const e=this.oP(i),s=await QT(this.vP,e,i);if(X_(s))return s;try{const t=await this.Hj.uD(s),n=await t.GR(),r=GT(e,void 0);return await FT(this.vP,new j(n),r,t,i)}catch(t){throw me(t),new ss(qa.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async vR(t,i){const e=this.eR(t,Ft.SD,fo.PD,i),s=await Sl(this.vP,e,this.mP,i);if(s instanceof ArrayBuffer)return new j(s);if(""===s.zu)throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.Hj.uD(s),n=await t.GR(i);return await YT(this.vP,n,e,t,this.mP,i)}catch(t){throw me(t),new ss(qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}sP(t){var i;return this.mP=t,(null==(i=this.vP)?void 0:i.extractFairplayContentId)?Promise.resolve(this.vP.extractFairplayContentId(t)):super.sP(t)}constructor(t,i,e,s,n){super(t,i,e,s,Ft.SD),this.vP=n}},JT=class{pP(t,i,e,s){switch(t.Qp.Av){case ho.Ep:return this.AP(i,e,s);case ho.Dp:return this.yP(i,e,s);case ho.kp:return this.MP(t,i,e,s);case ho.Lp:default:return this.bP(i,e,s)}}AP(t,i,e){const s=function(t){return t.integration===v_&&Sn(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&cc.qp.Hp(s,ie)){const n=cc.qp.Zp(s,ie,t);return new qT(t,i,e,n)}switch(s){case lu:return new jb(t,i,e);case c_:return new Rb(t,i,e);case u_:return new zb(t,i,e);case sc:return new Ub(t,i,e);case Ie:return new Fb(t,i,e);case nc:return new Yb(t,i,e);case je:return new Gb(t,i,e);case __:return new Vb(t,i,e);default:return new Tl(t,i,e,Ft.SD)}}yP(t,i,e){const s=t.integration;if(s&&cc.qp.Hp(s,du)){const n=cc.qp.Zp(s,du,t);return new ZT(t,i,e,n)}switch(s){case lu:return new Xb(t,i,e);case c_:return new Kb(t,i,e);case u_:return new Jb(t,i,e);case sc:return new $b(t,i,e);case Ie:return new tT(t,i,e);case je:return new iT(t,i,e);case __:return new eT(t,i,e);default:return new $a(t,i,e)}}MP(t,i,e,s){const n=i.integration;if(n&&cc.qp.Hp(n,Bt)){const r=cc.qp.Zp(n,Bt,i);return new KT(t,i,e,s,r)}switch(n){case a_:return new hT(t,i,e,s);case c_:return new aT(t,i,e,s);case l_:return new lT(t,i,e,s);case lu:return new dT(t,i,e,s);case u_:return new fT(t,i,e,s);case sc:return new _T(t,i,e,s);case Ru:return new gT(t,i,e,s);case Ie:return new wT(t,i,e,s);case d_:return new vT(t,i,e,s);case nc:return new mT(t,i,e,s);case je:return new pT(t,i,e,s);case f_:return new AT(t,i,e,s);case __:return new yT(t,i,e,s);case g_:return new MT(t,i,e,s);case w_:return new zT(t,i,e,s);default:return new pe(t,i,e,s,Ft.Ru)}}bP(t,i,e){return new BT(t,i,e)}TP(t){return t.Av===ho.Dp||t.Av===ho.Ep||t.Av===ho.kp||t.Av===ho.Lp}kO(t,i){var e;if(t.Av!==ho.Dp)return!1;if(Ks(null==(e=i.playready)?void 0:e.customData))return!0;const s=i.integration;return(!s||!cc.qp.Hp(s,Bt))&&(s===lu&&new Hb(i).kO)}IR(t,i){if(t.Av!==ho.Ep)return;const e=i.integration;return e&&cc.qp.Hp(e,Bt)?void 0:e===lu?jb.IR():void 0}};var tl,$T="default",tS="theoplayer-stored-network-info-v2",iS=25e5,Gu=class{SP(t){var i;const e=null==(i=ra.NP)?void 0:i.IL(t);if(void 0===e)return;const s=JSON.parse(e);if(void 0!==s&&void 0!==s[this.IP]){if(!this.DP(s))return s[this.IP].availableBandwidth;var n;null==(n=ra.NP)||n.EP(t,JSON.stringify({}))}}kP(){const t=this.SP(tS);if(void 0!==t)return t;const i=this.SP("theoplayer-stored-network-info");return i?8*i:void 0}DP(t){const i=t[this.IP].storedTimestamp;return!!i&&Na()-i>36e5}LP(t){this.xP=t,this.CP()}OP(){var t;return null!=this.xP||(this.xP=null!=(t=this.kP())?t:iS),this.xP}constructor(){this.IP=$T,this.xP=void 0,this.CP=hu((()=>{var t;const i={[this.IP]:{availableBandwidth:this.xP,storedTimestamp:Na()}};null==(t=ra.NP)||t.EP(tS,JSON.stringify(i))}),1e4)}};Gu.lL=new Gu,function(t){t[t.jP=0]="jP",t[t.RP=1]="RP",t[t.PP=2]="PP",t[t.zP=3]="zP",t[t.BP=4]="BP",t[t.Mp=5]="Mp",t[t.UP=6]="UP",t[t.QP=7]="QP",t[t.Np=8]="Np",t[t.FP=9]="FP",t[t.Ip=10]="Ip",t[t.YP=11]="YP"}(tl||(tl={}));var eS=class{get GP(){return 0}get VP(){return 0}WP(t){}},ju=class{HP(t){this.QR=t}IR(t){const i=this.QR;if(void 0!==i)return this.ZP.IR(t,i)}kO(t){const i=this.QR;return void 0!==i&&this.ZP.kO(t,i)}qP(t){const i={Qp:t.Qp,KP:t.KP||[],JP:t.JP,hP:t.hP},e=this.ZP.pP(i,this.QR||{},t._R,this.aE);return i.JP&&e.Wj(i.JP),new sS(e)}constructor(t,i=new JT){this.QR=void 0,this.aE=t,this.ZP=i}},sS=class{$j(t){return this.$P.$j(t)}tR(t,i,e){return this.$P.tR(i,e)}Jj(){return this.$P.Jj||void 0!==this.$P.Zj}wR(t,i){return this.$P.wR(t,i)}vR(t,i,e){return i&&this.$P.Wj(i),this.$P.vR(t,e)}h_(){this.$P.gn()}constructor(t){this.$P=t}},vl=class extends La{tz(t){this.iz.push(t);for(const i of t.Rw)this.tt(i);this.ez(t)}sz(t){jn(this.iz,t),this.nz(t);for(const i of t.Rw)this.rz(i)||this.it(i)}rz(t){for(const i of this.iz)if(i.Bw(t))return!0;return!1}ez(t){t.yn(rc.hw,this.oz),t.yn(rc.uw,this.cz)}nz(t){t.fn(rc.hw,this.oz),t.fn(rc.uw,this.cz)}gn(){for(;this.iz.length>0;)this.sz(this.iz[0]);super.gn()}fa(){return bf(this)}constructor(t){super(),this.iz=[],this.oz=t=>{this.tt(t.Lt)},this.cz=t=>{const i=t.Lt;this.rz(i)||this.it(i)};for(const i of t)this.tz(i)}};var nS,rS={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},Wn=class{get va(){return null!=this.Xa||(this.Xa=function(t){return{get enabled(){return t.Rt},set enabled(i){t.Rt=Ia(i)},get monitoringLivePlayback(){return t.lz},get currentLatency(){return t.Km},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.wd)}}}(this)),this.Xa}get Rt(){var t,i;return null!=(i=this.Le)?i:Boolean(null==(t=this.fz)?void 0:t.Rt)}set Rt(t){this.Le=t,this.fz&&(this.fz.Rt=t)}get lz(){var t,i;return null!=(i=null==(t=this.fz)?void 0:t.Lm)&&i}get Km(){var t;return null==(t=this.fz)?void 0:t.qm}get wd(){return this.fz?this.fz.xm:rS}ka(t){this.fz=t,void 0!==this.Le&&(this.fz.Rt=this.Le)}tr(){this.fz=void 0,this.Le=void 0}};function oS(){return nS||(nS=Ua&&Ua.document&&Ua.document.createElement("video")),nS}var hS=!(!Ua||!Ua.TextTrack),aS=class extends B{get Km(){}get _z(){const t=this.Fm.O_,i=this.U_;return t.gr(i,.01)}get ht(){return this.YT}get O_(){return this.Fm.O_.ks()}get R_(){return this.Fm.R_}set R_(t){t&&this.Fm.gz(t)}get bt(){return this.bc}get U_(){return void 0!==this.wz?this.wz:this.Fm.U_}set U_(t){this.F_(t)}F_(t,i){this.K_&&(this.wz=t),this.Fm.JA(t)}get ct(){return this.Fm.ct}get G_(){return this.Fm.G_}get lt(){return this.vz}get H_(){return this.mz}get Z_(){}get K_(){return this.Fm.K_}get eg(){return ol({},{HT:0,XT:0,ZT:0,qT:0,KT:0,JT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.Fm.rg())}get og(){return this.Fm.og}set og(t){this.Fm.og=t}get cg(){return!0}get fg(){return this.Fm.fg}get gg(){return this.Fm.gg}set gg(t){this.Fm.gg=t}get pg(){return this.Fm.pz.played}get yg(){return this.Az}set yg(t){this.Az=t,this.yz&&(this.yz.yg=t)}get Sg(){return this.Fm.Sg}get Ig(){return this.Fm.Ig.ks()}get Eg(){return this.Fm.Eg}get Mz(){return this.Fm.Mz}get nt(){return this.Dl}get rt(){return this.VT}get Cg(){return this.Fm.Cg}get Rg(){return this.Fm.Rg}get zg(){return this.Fm.zg}set zg(t){this.Fm.zg=t}get Qg(){return this.bz}get Yg(){return this.Fm.Yg}set Yg(t){this.Fm.Yg=t}get Tz(){return this.Sz}be(){this.Fm.be()}ge(){this.Fm.ge()}async ga(t,i,e){Vr(e),this.bc=t;const s={Av:de.Tj,yv:t.src,Nz:t.type,Iz:this.Dz(t),yg:this.Az,Ez:t.crossOrigin,kz:i.metadata&&i.metadata.title};this.Lz.HP(t.contentProtection),this.yz=await this.Fm.$n(s),Vr(e),i.textTracks&&this.xz(i.textTracks),Up(this.nt)}xz(t){for(let e of t)if(this.Fm.Cz()&&Po.Ga&&hS&&!Ip(e.kind,e.label)&&this.Oz(e)){var i;const t=null!=(i=e.kind)?i:Qe.HA;this.Fm.jz(e.src,t,e.label,e.srclang,e.default)}else{if(void 0===e.src)continue;this.Rz.nE(e)}}Oz(t){return!t.format||"webvtt"===t.format}async Xg(){try{await this.Fm.Xg()}catch(t){}for(;!this._z;)await this.Fm.k_(Tf.Zv)}Hg(){this.Fm.Hg()}qg(){return void 0!==this.Fm.pz.webkitShowPlaybackTargetPicker}Kg(){this.Fm.pz.webkitShowPlaybackTargetPicker&&this.Fm.pz.webkitShowPlaybackTargetPicker()}Jg(){this.Fm.pz.webkitShowPlaybackTargetPicker&&this.Fm.pz.webkitShowPlaybackTargetPicker()}Vg(){return this.Fm.pz}Gg(){return this.Fm.ya}async tr(){this.bc=void 0,this.vz=void 0,this.mz=void 0,this.yz=void 0,await this.Rz.tr(),this.Fm.Pz(),await this.Fm.tr(),this.zz.tr(),this.yg=this.Az,this.ht.tr(),this.rt.tr(),this.wz=void 0}async gn(){await this.tr(),this.Vo(),this.Bz(),this.Uz(),this.zz.gn(),this.Fm.Qz=void 0,await this.Yz.Fz(this.Fm),this.YT.gn(),this.VT.gn(),this.Dl.gn(),await this.Rz.gn()}Gz(){this.Fm.yn(Tf.jh,this.Ds),this.Fm.yn(Tf.Sh,this.Ds),this.Fm.yn(Tf.fm,this.wc),this.Fm.yn(Tf.Zv,this.Ds),this.Fm.yn(Tf.Gv,this.Ds),this.Fm.yn(Tf.im,this.Ds),this.Fm.yn(Tf.$v,this.Vz),this.Fm.yn(Tf.Ov,this.Ds),this.Fm.yn(Tf.qv,this.Ds),this.Fm.yn(Tf._m,this.Ds),this.Fm.yn(Tf.Lv,this.Ds),this.Fm.yn(Tf.Jv,this.Wz),this.Fm.yn($.Sm,this.Vm),this.Fm.yn(hi.ha,this.Xz),this.Fm.yn(Tf.Iv,this.Ds),this.Fm.yn(Tf.Nv,this.Zz),this.Fm.pz.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.qz)}Bz(){this.Fm.fn(Tf.jh,this.Ds),this.Fm.fn(Tf.Sh,this.Ds),this.Fm.fn(Tf.fm,this.wc),this.Fm.fn(Tf.Zv,this.Ds),this.Fm.fn(Tf.Gv,this.Ds),this.Fm.fn(Tf.im,this.Ds),this.Fm.fn(Tf.$v,this.Vz),this.Fm.fn(Tf.Ov,this.Ds),this.Fm.fn(Tf.qv,this.Ds),this.Fm.fn(Tf._m,this.Ds),this.Fm.fn(Tf.Lv,this.Ds),this.Fm.fn(Tf.Jv,this.Wz),this.Fm.fn($.Sm,this.Vm),this.Fm.fn(hi.ha,this.Xz),this.Fm.fn(Tf.Iv,this.Ds),this.Fm.fn(Tf.Nv,this.Zz),this.Fm.pz.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.qz)}Dz(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{Qp:iA,Kz:[{initDataTypes:[iA.fL],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}Jz(){let t=this.Fm.pz.audioTracks,i=this.Fm.pz.videoTracks;t&&(t.addEventListener("addtrack",this.$z),t.addEventListener("removetrack",this.tB),t.addEventListener("change",this.iB)),i&&(i.addEventListener("addtrack",this.eB),i.addEventListener("removetrack",this.sB),i.addEventListener("change",this.nB))}Uz(){let t=this.Fm.pz.audioTracks,i=this.Fm.pz.videoTracks;t&&(t.removeEventListener("addtrack",this.$z),t.removeEventListener("removetrack",this.tB),t.removeEventListener("change",this.iB)),i&&(i.removeEventListener("addtrack",this.eB),i.removeEventListener("removetrack",this.sB),i.removeEventListener("change",this.nB))}nh(t){for(let i=0;i<t.U;i++){t.zw(i)._S()}}$g(){this.Fm.$g()}iw(){}rB(t,i){this.vz||(this.vz=i,this.mz=t,this.Co(new as(t)))}constructor(t,i,e,s,n,r,o=new JT,h=Nb()){super(),this.yz=void 0,this.bc=void 0,this.vz=void 0,this.mz=void 0,this.Sz=new eS,this.bz=new Wn,this.Xz=t=>{const i=t.lt,e=i.code,s=new ao(gv(e),"Something went wrong during native playback.",i),n=new Nt(e,s.message,i.message);this.rB(s,n)},this.wc=()=>{this.Co(new ri(this.U_,this.R_))},this.Vz=t=>{this.fg||(this.wz=void 0),this.Co(t)},this.Vm=t=>{this.wz=void 0},this.qz=()=>{this.Co(new Dv(this.K_))},this.Wz=()=>{this.Rg>0&&this.Cg>0&&this.Co(new Cs)},this.$z=t=>{const i=this.Fm.pz.audioTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];lS(this.YT,e)||this.YT.tt(new Tv(e))}},this.tB=t=>{const i=[],e=this.Fm.pz.audioTracks;if(e){for(const t of this.YT.Rw)dS(e,t.dS)||i.push(t);for(const t of i)this.YT.it(t)}},this.iB=()=>{this.nh(this.YT)},this.eB=t=>{const i=this.Fm.pz.videoTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];lS(this.VT,e)||this.VT.tt(new Iv(e))}},this.sB=t=>{const i=[],e=this.Fm.pz.videoTracks;if(e){for(const t of this.VT.Rw)dS(e,t.dS)||i.push(t);for(const t of i)this.VT.it(t)}},this.nB=()=>{this.nh(this.VT)},this.Zz=t=>{this.Co(t),this.rB(t.errorObject,ia(t.errorObject))},this.Yz=i,this.aE=e,this.SO=h,this.Fm=this.Yz.oB(Jt.VA),this.Az=this.Fm.pz.preload,this.zz=new Xe(this.Fm,!0),this.zz.yn(Hs,this.Ds),this.Lz=new ju(e,o),this.Fm.Qz=this.Lz,this.Gz(),this.YT=new Ds,this.VT=new Ds,this.Jz(),this.Rz=new kr(this.Fm,this.aE),this.Dl=new vl([this.Fm.nt]),this.ge()}};function uS(t){if(!Boolean(oS().canPlayType&&oS().canPlayType(t.type)))return!1;if(t.useNativePlayback)return!0;if(!t.useManagedMediaSource&&(Po.Ga||Po.sL))return!0;const i=t.contentProtection;if(i&&!nn(i)){if(!dw(i))return!1;if(i.fairplay)return!0}return!1}var cS=class{Yp(t,i,e,s,n,r,o){return new aS(t,i,e,s,n,r)}hB(t,i){return uS(t)}aB(){return!1}constructor(){this.uB=tl.YP}};function lS(t,i){for(let e of t.Rw)if(e.dS===i)return e}function dS(t,i){for(let e=0;e<t.length;e++)if(t[e]===i)return!0;return!1}var Y=class{static cB(){return this.lL}lB(t){this.dB.push(t)}get uB(){return this.fB.uB}Yp(t,i,e,s,n,r,o){let h=this.fB.Yp(t,i,e,s,n,r,o);for(const t of this.dB)h=t(h,e,s);return h}hB(t,i){return this.fB.hB(t,i)}aB(){return!1}constructor(){this.fB=new cS,this.dB=[]}};function fS(t,i){return gd(t.uB,i.uB)}Y.lL=new Y;var _S=class{_B(t){this.gB.push(t),this.gB.sort(fS)}async wB(t,i){for(const e of this.gB){const s=e.hB(t,i);if(Ci(s)?await s:Boolean(s))return e}}constructor(){this.gB=[]}};function hn(t){gS.lL._B(t)}var gS=class extends _S{vB(t){this.mB=t}pB(){return this.mB}async AB(t,i){const e=this.mB;for(let s of t){let t=await this.wB(s,i);if(t)return{yc:s,t:t};const n=e.hB(s,i);if(Ci(n)?await n:Boolean(n))return{yc:s,t:e}}return{yc:t[0],t:e}}constructor(...t){super(...t),this.mB=Y.cB()}};gS.lL=new gS;var ut,wS=class{gn(){wi(this.Us)}constructor(t){this.Us=Ua&&Ua.document&&Ua.document.createElement("div"),_b(this.Us),t.appendChild(this.Us)}};!function(t){t.YP="",t.yB="none",t.ZA="metadata",t.LT="auto"}(ut||(ut={}));var vS=[hi.ha,Tf.xv,Tf.Cv,Tf.vm,Tf.Mv,Tf.Rv,Tf.zv,Tf.Hv,Tf.Xv,Tf.hm,Tf.lm,$.pm,$.Am,$.ym,$.Mm,$.Nw,$.Tm,$.Sm,Tf.Nv,Tf.Iv,Tf.Lv,Tf.Ov,Tf.Gv,Tf.Vv,Tf.jh,Tf.Zv,Tf.Sh,Tf.qv,Tf.Jv,Tf.im,Tf.$v,Tf.fm,Tf._m,Tf.Kv,Tf.Wv,Tf.nm],mS=class extends B{get ht(){return this.YT}get O_(){return this.Qo.O_}get lt(){return this.Qo.lt}get H_(){return this.Qo.H_}get R_(){return this.Qo.R_}set R_(t){this.Qo.R_=t}get bt(){return this.MB}get U_(){return this.Qo.U_}set U_(t){this.Qo.U_=t}get ct(){return this.Qo.ct}get G_(){return this.Qo.G_}get Z_(){return this.GT}get K_(){return this.Qo.K_}get eg(){return this.Qo.eg}get og(){return this.Qo.og}set og(t){this.Qo.og=t}get cg(){return this.Qo.cg}get fg(){return this.Qo.fg}get gg(){return this.Qo.gg}set gg(t){this.Qo.gg=t}get pg(){return this.Qo.pg}get yg(){return this.Az}set yg(t){this.Az=t,this.Qo&&(this.Qo.yg=this.Az)}get Sg(){return this.Qo.Sg}get Ig(){return this.Qo.Ig}get Eg(){return this.Qo.Eg}get nt(){return this.Dl}get Cg(){return this.Qo.Cg}get rt(){return this.VT}get Rg(){return this.Qo.Rg}get zg(){return this.Qo.zg}set zg(t){this.Qo.zg=t}get Qg(){return this.Qo.Qg}get Tz(){return this.Qo.Tz}Hg(){this.Qo.Hg()}Xg(){const t=this.Qo.Xg();Ci(t)&&$r(t)}Zg(){return this.ga(void 0)}Wg(){}bB(){this.YT.Uw=this.Qo.ht,this.VT.Uw=this.Qo.rt,this.Dl.Uw=this.Qo.nt,this.GT.Uw=this.Qo.Z_,this.Qo.yn(vS,this.Ds)}TB(){this.Qo.fn(vS,this.Ds),this.YT.Uw=void 0,this.VT.Uw=void 0,this.Dl.Uw=void 0,this.GT.Uw=void 0}Wa(){return this.SB}async ga(t,i){if(Vr(i),this.SB=t,!t)return;const e=t.sources.filter(Kn);if(Yh(e))return;const s=await this.NB.AB(e,t);Vr(i);const n=s.yc,r=s.t,o=this.Gg(),h=hv(this);(this.IB!==r||this.lt)&&(this.TB(),await this.Qo.gn(),Vr(i),this.IB=r,this.Qo=this.DB(r,n),function(t,i){t.og!==i.og&&(t.og=i.og);t.zg!==i.zg&&(t.zg=i.zg);t.gg!==i.gg&&(t.gg=i.gg)}(this.Qo,h),uv(this,h,this),this.bB()),this.Qo.yg=this.yg,this.EB?this.Qo.ge():this.Qo.be(),await this.Qo.ga(n,t,i),Vr(i),this.kB(n),this.Gg()!==o&&this.Co(new cv)}kB(t){this.MB!==t&&(this.MB=t,this.Co(new bn(t)))}qg(){return this.Qo.qg()}Kg(){this.Qo.Kg()}Jg(){this.Qo.Jg()}Gg(){return this.Qo.Gg()}$g(){this.Qo.$g()}iw(){this.Qo.iw()}async tr(){this.SB=void 0,this.kB(void 0),await this.Qo.tr()}async gn(){this.Vo(),await this.tr(),await this.Qo.gn(),this.YT.gn(),this.VT.gn(),this.Dl.gn(),this.GT.gn()}ge(){this.EB=!0,this.Qo.ge()}be(){this.EB=!1,this.Qo.be()}constructor(t,i){super(),this.IB=void 0,this.MB=void 0,this.Az=ut.yB,this.SB=void 0,this.EB=!0,this.YT=new ul,this.VT=new ul,this.Dl=new Sf,this.GT=new Yf,this.NB=t,this.Qo=i,this.Qo.yg=this.yg,this.bB()}};function Z(t,i,e){return e?t<=i:t<i}var Vi,Ri=class t{get LB(){return this.xB.slice()}Cn(t){return this.xB[2*t]}jn(t){return this.xB[2*t+1]}CB(t){return this.OB[2*t]}jB(t){return this.OB[2*t+1]}ks(){const t=this;return{get length(){return t.U},start(i){const e=0|i;return t.RB(e),t.Cn(e)},end(i){const e=0|i;return t.RB(e),t.jn(e)}}}PB(){const i=new Array(2*this.U),e=new Array(2*this.U);for(let t=0;t<this.U;t++)i[2*t]=this.Cn(t),i[2*t+1]=this.jn(t),e[2*t]=!0,e[2*t+1]=!0;return new t(i,e)}RB(t){if(t<0)throw new g("The index provided ("+t+") must be non-negative");if(t>=this.U)throw new g("The index provided ("+t+") is greater than the maximum bound ("+this.U+")")}zB(t){if(0===this.U)return 0;if(this.gr(t))return t;if(t<=this.Cn(0))return this.Cn(0);if(t>=this.jn(this.U-1))return this.jn(this.U-1);{let i=0,e=1/0;for(let s=0;s<this.U;s++){const n=this.Cn(s),r=_.abs(n-t);r<e&&(i=n,e=r);const o=this.jn(s),h=_.abs(o-t);h<e&&(i=o,e=h)}return i}}Sn(i){let e=0,s=0;const n=[],r=[];for(;e<this.U&&s<i.U;){const t=this.Cn(e),o=this.jn(e),h=this.CB(e),a=this.jB(e),u=i.Cn(s),c=i.jn(s),l=i.CB(s),d=i.jB(s),f=_.max(t,u),g=_.min(o,c);let w,v;w=t===u?h&&l:f===t?h:l,v=o===c?a&&d:g===o?a:d,(f<g||w&&v&&f===g)&&(n.push(f,g),r.push(w,v)),o===c?(e+=1,s+=1):o<c?e+=1:s+=1}return new t(n,r)}BB(){const i=this.UB(),e=i.U;if(0===e)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=i.Cn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!i.CB(0)));for(let t=0;t<e-1;t++)s.push(i.jn(t),i.Cn(t+1)),n.push(!i.jB(t),!i.CB(t+1));const o=i.jn(e-1);return o!==1/0&&(s.push(o,1/0),n.push(!i.jB(e-1),!1)),new t(s,n)}QB(i){let e=0,s=0;const n=this.U,r=i.U,o=new Array(2*(n+r)),h=new Array(2*(n+r));let a=0;for(;e<n&&s<r;){const t=this.Cn(e),n=this.jn(e),r=i.Cn(s),u=i.jn(s);t<r||t===r&&n<u?(o[a]=t,o[a+1]=n,h[a]=this.CB(e),h[a+1]=this.jB(e),e++):(o[a]=r,o[a+1]=u,h[a]=i.CB(s),h[a+1]=i.jB(s),s++),a+=2}for(;e<n;)o[a]=this.Cn(e),o[a+1]=this.jn(e),h[a]=this.CB(e),h[a+1]=this.jB(e),e++,a+=2;for(;s<r;)o[a]=i.Cn(s),o[a+1]=i.jn(s),h[a]=i.CB(s),h[a+1]=i.jB(s),s++,a+=2;return new t(o,h)}FB(i){void 0===i&&(i=0);const e=this.U;if(e<2)return this;const s=[],n=[];let r=this.Cn(0),o=this.jn(0),h=this.CB(0),a=this.jB(0);for(let t=1;t<e;t++){const e=this.Cn(t),u=this.jn(t);let c=this.CB(t),l=this.jB(t);r<e&&o>u||(r===e&&(c=h||c,h=c),o===u&&(l=a||l,a=l),Z(e,o+i,a||c)?(o=u,a=l):(s.push(r,o),n.push(h,a),r=e,o=u,h=c,a=l))}return s.push(r,o),n.push(h,a),new t(s,n).UB()}UB(){const i=[],e=[];for(let t=0;t<this.U;t++){const s=this.Cn(t),n=this.jn(t),r=this.CB(t),o=this.jB(t);s===n?(r||o)&&(i.push(s,n),e.push(!0,!0)):(i.push(s,n),e.push(r,o))}return new t(i,e)}YB(t){if(0===this.U)return t;if(0===t.U)return this;return this.QB(t).FB()}GB(t){const i=this.UB(),e=t.UB(),s=i.BB(),n=e.BB(),r=s.Sn(e),o=n.Sn(i);return r.YB(o)}KA(i){if(0===this.U||0===i)return this;const e=[],s=[];for(let t=0;t<this.U;t++){const n=this.Cn(t)+i,r=this.jn(t)+i;e.push(n,r),s.push(this.CB(t),this.jB(t))}return new t(e,s)}VB(t){return 0===this.U||0===t.U?this:this.UB().Sn(t.UB().BB())}gr(t,i){return this.WB(t,i)>=0}HB(t,i,e,s,n){return this.XB(t,i,e,s,n)>=0}ZB(t,i,e,s,n){return this.qB(t,i,e,s,n)>=0}KB(t){if(t.U!==this.U)return!1;for(let i=0;i<this.U;i++)if(this.Cn(i)!==t.Cn(i)||this.jn(i)!==t.jn(i)||this.CB(i)!==t.CB(i)||this.jB(i)!==t.jB(i))return!1;return!0}JB(i){const e=[],s=[];for(let t=0;t<this.U;t++){const n=this.Cn(t),r=this.jn(t),o=this.CB(t),h=this.jB(t);i(n,r,o,h)&&(e.push(n,r),s.push(o,h))}return new t(e,s)}qB(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,o=i+n;for(let t=0;t<this.U;t+=1)if(Z(this.Cn(t),o,!s||this.CB(t))&&Z(r,this.jn(t),!e||this.jB(t)))return t;return-1}XB(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,o=i-n;for(let t=0;t<this.U;t+=1)if(Z(this.Cn(t),r,!e||this.CB(t))&&Z(o,this.jn(t),!s||this.jB(t)))return t;return-1}WB(t,i){return this.XB(t,t,!0,!0,i)}$B(t,i){void 0===i&&(i=0);const e=t+i;for(let t=this.U-1;t>=0;t-=1)if(Z(this.Cn(t),e,this.CB(t)))return t;return-1}tU(t,i){void 0===i&&(i=0);const e=t-i;for(let t=0;t<this.U;t+=1)if(Z(e,this.jn(t),this.jB(t)))return t;return-1}iU(t,i){void 0===i&&(i=0);const e=t+i;for(let t=0;t<this.U;t+=1)if(this.Cn(t)>e)return t;return-1}eU(i){return this.RB(i),new t([this.Cn(i),this.jn(i)],[this.CB(i),this.jB(i)])}Jm(t,i){const e=this.WB(t,i);return e<0?void 0:this.eU(e)}get sU(){let t=0;for(let i=0;i<this.U;i++){t+=this.jn(i)-this.Cn(i)}return t}static xn(i){const e=[];for(let t=0;t<i.length;t++)e.push(i.start(t),i.end(t));return new t(e)}static nU(i){return new t([i,i],[!0,!0])}static rU(i,e){return i<=e?new t([i,e]):t.oU()}static oU(){return pS}constructor(t,i){this.U=t.length>>1,this.xB=t,this.OB=i||function(t){const i=new Array(2*t);for(let e=0,s=0;e<t;e+=1,s+=2)i[s]=!0,i[s+1]=!1;return i}(this.U)}},pS=new Ri([]);!function(t){t.ra="fullscreenchange",t.ca="fullscreensupportchange",t.ha="fullscreenerror"}(Vi||(Vi={}));var z=class extends Os{constructor(){super(Vi.ha)}},Et=(Vi.ra,Vi.ca,Vi.ha,class extends Mo{get cs(){return!1}get ta(){return!1}mo(){this.Co(new z)}So(){}gn(){this.Vo()}}),AS=class extends Mo{get R_(){}set R_(t){}get bt(){}get U_(){return this.hU}set U_(t){this.F_(t)}F_(t,i){this.hU!==t&&(this.hU=t,this.aU=!0,this.Co(new Ur(this.U_)))}get eg(){return{HT:0,XT:0,ZT:0,qT:0,KT:0,JT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get og(){return this.uU}set og(t){this.uU!==t&&(this.uU=t,this.Co(new St(this.U_,this.zg)))}get fg(){return this.cU}get gg(){return this.lU}set gg(t){this.lU!==t&&(this.lU=t,this.Co(new Zs(this.U_,this.gg)))}get Eg(){return this.aU}get zg(){return this.Xx}set zg(t){this.Xx!==t&&(this.Xx=t,this.Co(new St(this.U_,this.zg)))}get Yg(){return!1}set Yg(t){}get Tz(){return this.Sz}get Km(){}ge(){}be(){}Xg(){this.cU&&(this.cU=!1,this.Co(new Rt(this.U_)),this.Co(new Ib(this.U_)))}Hg(){this.cU||(this.cU=!0,this.Co(new ri(this.U_,this.R_)),this.Co(new Ye(this.U_)))}ga(t,i){return Promise.resolve()}qg(){return!1}Kg(){}Jg(){}Gg(){return this.dU}$g(){}iw(){}async tr(){this.hU=0,this.aU=!1,this.Hg(),this.Co(new R(this.hU))}async gn(){this.Vo(),this.ht.gn(),this.nt.gn(),this.rt.gn()}constructor(...t){super(...t),this.hU=0,this.uU=!1,this.cU=!0,this.lU=1,this.aU=!1,this.Xx=1,this.ht=new Ds,this.O_=Ri.oU().ks(),this.ct=NaN,this.G_=!1,this.lt=void 0,this.H_=void 0,this.Z_=void 0,this.K_=!1,this.cg=!0,this.pg=Ri.oU().ks(),this.yg=ut.yB,this.Sg=qo.BT,this.Ig=Ri.oU().ks(),this.Mz=void 0,this.nt=new iu,this.Cg=0,this.rt=new Ds,this.Rg=0,this.Qg=new Wn,this.Sz=new eS,this.dU=new Et}},yS=class extends AS{set fU(t){this.Yz=t,this.Fm=t.oB(Jt.VA)}Vg(){var t;return null==(t=this.Fm)?void 0:t.pz}F_(t,i){this.U_=t}async gn(){await super.gn(),this.Fm&&(await this.Yz.Fz(this.Fm),this.Fm=void 0)}constructor(...t){super(...t),this.Yz=void 0,this.Fm=void 0}},MS=class extends mS{get we(){return this.pu}get Yg(){return this.Qo.Yg}set Yg(t){this.Qo.Yg=t}Wg(){super.Wg(),this.gU._U()}ur(t){av(this,t)}ar(){}ew(t){return!1}async ga(t,i){const e=this.Gg(),s=this.Vg();await super.ga(t,i),this.Gg()!==e&&this.Co(new cv),this.Vg()!==s&&this.Co(new zs)}F_(t,i){this.Qo.F_(t,i)}DB(t,i){return t.Yp(this.pu,this.gU,this.aE,this.GO,this.wU,this.vU,this.mU,i)}Vg(){return this.Qo.Vg()}C_(){return this.gU.pU.map((t=>t.pz))}async gn(){await super.gn(),this.gU.gn(),this.AU.gn()}constructor(t,i,e,s,n,r,o){const h=new yS;super(gS.lL,h),this.pu=t,this.GO=i,this.aE=e,this.wU=s,this.vU=n,this.mU=o,this.gU=new wc(r,this.mU),this.gU.yU(this.pu),h.fU=this.gU,this.AU=new wS(this.pu)}},bS=class extends B{get ht(){return this.MU}get O_(){return Ri.oU().ks()}get R_(){return new Date(NaN)}set R_(t){}get bt(){}get U_(){return 0}set U_(t){}F_(t,i){}get ct(){return 0}get we(){return this.pu}get G_(){return!0}get lt(){return this.bU}get H_(){return this.TU}get Z_(){}get eg(){return{HT:0,XT:0,ZT:0,qT:0,KT:0,JT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get og(){return!1}set og(t){}get cg(){return!0}get fg(){return!0}get gg(){return 0}set gg(t){}get pg(){return Ri.oU().ks()}get yg(){return ut.yB}set yg(t){}get Sg(){return qo.BT}get Ig(){return Ri.oU().ks()}get Eg(){return!1}get nt(){return this.SU}get Cg(){return 0}get rt(){return this.MU}get Rg(){return 0}get zg(){return 1}set zg(t){}get Qg(){return this.bz}get Yg(){return!1}set Yg(t){}ew(t){return!0}be(){}Xg(){throw this.Co(new as(this.TU)),this.bU}Hg(){}Wa(){}async ga(t,i){throw Vr(i),this.Co(new as(this.TU)),this.bU}ge(){}Zg(){return Promise.resolve()}Vg(){}Gg(){return this.dU}C_(){return[]}Wg(){}ur(t){}ar(){}get K_(){return!1}qg(){return!1}Kg(){}Jg(){}$g(){}iw(){}tr(){return Promise.resolve()}gn(){return this.Vo(),this.MU.gn(),this.SU.gn(),Promise.resolve()}constructor(t,i,e){super(),this.dU=new Et,this.bz=new Wn,this.pu=t,this.bU=i,this.MU=new Ds,this.SU=new iu,this.TU=e}};function TS(t){if(t&&Vu(t))return ol({},t,{integration:SS(t.integration),fairplay:LS(t.fairplay),widevine:NS(t.widevine),playready:IS(t.playready),clearkey:xS(t.clearkey),aes128:CS(t.aes128),integrationParameters:OS(t.integrationParameters),preferredKeySystems:jS(t.preferredKeySystems)})}function SS(t){if(Sn(t))return t}function NS(t){if(t&&Vu(t))return{persistentState:DS(t.persistentState),distinctiveIdentifier:DS(t.distinctiveIdentifier),audioRobustness:ES(t.audioRobustness),videoRobustness:ES(t.videoRobustness),licenseAcquisitionURL:Sn(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:kS(t.licenseType),headers:t.headers,useCredentials:!!tu(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:Sn(t.certificate)||$g(t.certificate)?t.certificate:void 0}}function IS(t){if(!t)return;const i=NS(t);if(!i)return;return ol({},i,{customData:Sn(t.customData)?t.customData:void 0})}function DS(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function ES(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function kS(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function LS(t){if(!t)return;const i=NS(t);if(!i)return;return ol({},i,{certificateURL:Sn(t.certificateURL)?t.certificateURL:void 0})}function xS(t){if(!t)return;const i=NS(t);if(!i)return;const e=tr(t.keys)?t.keys.map((t=>function(t){if(!t||!Vu(t))return;const i=t.id,e=t.value;if(!Sn(i)||!Sn(e))return;return{id:i,value:e}}(t))).filter(Ks):void 0;return ol({},i,{keys:e})}function CS(t){if(Vu(t))return{useCredentials:tu(t.useCredentials)?t.useCredentials:void 0}}function OS(t){if(Vu(t))return t}function jS(t){return t&&tr(t)?t.map((t=>Aw(t))).filter(Ks):[ie,du,Bt]}var RS=class extends Os{constructor(t){super("presentationmodechange"),this.presentationMode=t}};function En(t,i,e){return new Promise(((s,n)=>{if(e&&e.n_)return n(new Fh);const r=t=>{h(),s(t)},o=()=>{h(),n(new Fh)},h=()=>{t.removeEventListener(i,r),e&&e.c_(o)};t.addEventListener(i,r),e&&e.u_(o)}))}var PS,zS=class extends Mo{Qa(t){for(const i of this.hd)t.yn(i,this.NU);this.IU.push(t)}DU(t){for(const i of this.hd)t.fn(i,this.NU);this.IU.push(t)}gn(){this.Vo();for(const t of this.IU)this.DU(t);To(this.IU)}constructor(t,i=!1,e){super(e),this.IU=[],this.EU=t=>{Gd((()=>{this.Ds(t)}))},this.hd=t,this.NU=i?this.EU:this.Ds}},Jc=class extends B{Qa(t){t.T_(this.kU),this.IU.push(t)}DU(t){t.E_(this.kU),jn(this.IU,t)}gn(){this.Vo();for(const t of this.IU)t.E_(this.kU);To(this.IU)}constructor(t,i=!1){super(t),this.IU=[],this.EU=t=>{Gd((()=>{this.Ds(t)}))},this.kU=i?this.EU:this.Ds}};!function(t){t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture"}(PS||(PS={}));var Au,BS=class extends B{get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return function(t){let i,e={get currentMode(){return t.qo()},requestMode(i){const e=QS(i);e&&t.Zo(e)},supportsMode(i){const e=QS(i);return!!e&&t.Go(e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Jc(e,!0),i.Qa(t),e}(this)}Zo(t){this.Xo(t,t)}Xo(t,i){this.LU!==i&&(this.xU=!0,this.CU=t,this.Jo(i,this.LU),"fullscreen"!==t&&(this.OU=t),this.xU=!1,this.Yr())}qo(){return this.jU?"fullscreen":"inline"}Go(t){switch(t){case"fullscreen":return this.dU.ta;case"inline":return!0}return!1}Yr(){if(this.xU)return;const t=this.LU,i=this.qo();this.LU=i,"fullscreen"!==i&&(this.RU=i),t!==i&&this.Co(new RS(i))}Jo(t,i){const e="fullscreen"===t;this.jU=e,e!==this.dU.cs&&(e?this.dU.mo():this.dU.So())}wi(){if(this.xU)return;const t=this.dU.cs;this.jU=t,t?this.Xo("fullscreen","fullscreen"):t||"fullscreen"!==this.CU?this.Yr():this.Xo(this.OU,this.RU)}PU(){this.wi(),this.Co(new as(new ao(qa.FULLSCREEN_ERROR,"Failed to enter fullscreen.")))}gn(){this.dU.gn(),this.Vo()}constructor(t){super(),this.CU="inline",this.LU="inline",this.xU=!1,this.jU=!1,this.OU="inline",this.RU="inline",this.Xa=void 0,this.zU=()=>this.wi(),this.BU=()=>this.PU(),this.dU=t,this.dU.yn(Vi.ra,this.zU),this.dU.yn(Vi.ha,this.BU),this.Yr()}},US={bt:void 0,U_:0,ct:NaN,G_:!1,lt:void 0,H_:void 0,og:!1,fg:!0,gg:1,Sg:qo.BT,Eg:!1,Cg:0,Rg:0,zg:1};function QS(t){switch(t){case PS.INLINE:case PS.FULLSCREEN:case PS.PICTURE_IN_PICTURE:return t;default:return}}!function(t){t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads"}(Au||(Au={}));var ai,yn,FS,YS,GS,nu=class{get UU(){return this.QU}FU(t){const i=this.QU.filter((i=>i.YU(t)));if(i.length>1)0;else if(0===i.length)throw g("Unknown ad integration: "+t.integration);return i[0]||null}GU(t){this.QU.push(t)}constructor(){this.QU=[]}};nu.lL=new nu,function(t){t.Sm="PLAYING",t.VU="PAUSED",t.WU="SEEK",t.HU="STALLED",t.XU="FAILED",t.ZU="INITIAL_BUFFERING",t.qU="NO_ACCESS"}(ai||(ai={})),function(t){t.KU="HTTP_REQUEST_STATUS_CODE_1XX",t.JU="HTTP_REQUEST_STATUS_CODE_2XX",t.$U="HTTP_REQUEST_STATUS_CODE_3XX",t.tQ="HTTP_REQUEST_STATUS_CODE_4XX",t.iQ="HTTP_REQUEST_STATUS_CODE_5XX",t.eQ="BUFFER_LENGTH",t.sQ="BYTES_RECEIVED",t.nQ="SEGMENT_READ_BITRATE",t.rQ="SEGMENT_PROFILE_BITRATE",t.oQ="VIDEO_PROFILE_BITRATE",t.hQ="NUMBER_OF_FRAMES_DROPPED",t.aQ="PLAYBACK_POSITION",t.uQ="NUMBER_OF_FRAMES_DECODED",t.cQ="PLAYBACK_DELTA_TO_ORIGIN",t.lQ="STREAM_DELTA_TO_ORIGIN",t.dQ="ORIGIN_TIMESTAMP"}(yn||(yn={})),function(t){t.fQ="MANIFEST_URI",t._Q="ASSET_DURATION",t.gQ="NUMBER_OF_CONTENT_PROFILES",t.wQ="CDN",t.vQ="CONTENT_TITLE",t.mQ="SERVICE_NAME",t.pQ="CONTENT_TYPE",t.AQ="CONTENT_DESCRIPTION"}(FS||(FS={})),(YS||(YS={})).yQ="shutdown_normal_shutdown",function(t){t.MQ="session/",t.bQ="content/",t.TQ="internalError/",t.SQ="drmError/",t.NQ="caError/",t.IQ="networkError/"}(GS||(GS={}));var VS,WS=class{get code(){return this.category+this.statusCode}constructor(t,i){this.category=t,this.statusCode=i}};!function(t){t.DQ="userAction",t.EQ="endOfStreamReached"}(VS||(VS={}));var rt,HS=class extends Mo{};!function(t){t.PAUSE="kQ",t.RESUME="LQ"}(rt||(rt={}));var XS=class extends Os{constructor(){super("xQ")}},Cr=class extends Mo{CQ(){this.OQ=!0}jQ(){}gn(){this.OQ=!1,this.RQ.fn(rt.PAUSE,this.zQ),this.RQ.fn(rt.RESUME,this.BQ)}UQ(){return isFinite(this.Qo.Td())}constructor(t,i){super(),this.Qo=t,this.RQ=i,this.OQ=!1,this.zQ=()=>{this.jQ(),this.OQ=!1},this.BQ=()=>{this.OQ=!0},this.RQ.yn(rt.PAUSE,this.zQ),this.RQ.yn(rt.RESUME,this.BQ)}},ZS=class extends Cr{CQ(){super.CQ(),this.QQ()}gn(){this.FQ(),super.gn()}QQ(){this.Qo.yn($.Tm,this.YQ),this.Qo.yn(Tf.Sh,this.GQ),this.Qo.yn($.Sm,this.VQ),this.Qo.yn(Tf.im,this.WQ),this.Qo.yn(Tf.$v,this.HQ)}FQ(){this.Qo.fn($.Tm,this.YQ),this.Qo.fn(Tf.Sh,this.GQ),this.Qo.fn($.Sm,this.VQ),this.Qo.fn(Tf.im,this.WQ),this.Qo.fn(Tf.$v,this.HQ)}XQ(){this.ZQ=!0}qQ(){const t=this.Qo.W_(),i=new WS(GS.TQ,String(t.code));this.KQ(ai.XU,i,t.message)}JQ(t){this.OQ&&(this.RQ.$Q(t),this.Co(new XS))}KQ(t,i,e){this.RQ.tF(t,i,e),this.Co(new XS)}iF(t,i){this.RQ.eF(t,i)}constructor(...t){super(...t),this.ZQ=!1,this.sF=!1,this.nF=!1,this.YQ=()=>{this.sF&&!this.nF&&this.JQ(ai.HU)},this.VQ=()=>{this.Qo.fg||(this.sF||this.iF(new WS(GS.bQ,"firstFrameDisplayed"),"now"),this.sF=!0,this.JQ(ai.Sm))},this.GQ=()=>{this.Qo.fg&&(this.sF=!0,this.JQ(ai.VU))},this.WQ=()=>{this.ZQ&&(this.nF=!0,this.ZQ=!1,this.JQ(ai.WU))},this.HQ=()=>{this.nF=!1,this.Qo.fg&&this.JQ(ai.VU)}}},qS=class extends Cr{CQ(){super.CQ(),this.rF(),this.QQ()}gn(){this.FQ(),super.gn()}QQ(){this.Qo.rt.yn(ct.ra,this.rF),this.Qo.hF.oF(this.aF),this.Qo.yn(Tf.Lv,this.uF)}FQ(){this.Qo.rt.fn(ct.ra,this.rF),this.Qo.hF.cF(this.aF),this.Qo.fn(Tf.Lv,this.uF)}lF(t){t.serviceName&&this.dF(FS.mQ,t.serviceName),t.cdn&&this.dF(FS.wQ,t.cdn),t.contentTitle&&this.dF(FS.vQ,t.contentTitle),t.contentType&&this.dF(FS.pQ,t.contentType),t.contentDescription&&this.dF(FS.AQ,t.contentDescription)}dF(t,i){this.OQ&&this.RQ.fF(t,i)}constructor(...t){super(...t),this.uF=()=>{this.UQ()&&this.dF(FS._Q,_.round(this.Qo.Td()))},this.aF=t=>{"manifest"===t.request.type&&this.dF(FS.fQ,t.url)},this.rF=()=>{const t=bo(this.Qo.rt.Rw,(t=>t.Rt));t&&this.dF(FS.gQ,t.qw.U)}}},KS=class extends Cr{CQ(){super.CQ(),this._F=this.Qo.eg.HT,this.gF=this.Qo.eg.ZT,this.QQ(),this.wF.push(v(this.vF,1e3))}jQ(){super.jQ(),this.mF()}gn(){this.mF(),this.FQ(),this.wF.forEach(m),To(this.wF),super.gn()}QQ(){this.Qo.hF.oF(this.pF),this.Qo.yn(Tf.lm,this.AF)}FQ(){this.Qo.hF.cF(this.pF),this.Qo.fn(Tf.lm,this.AF)}yF(){this.mF()}MF(t){this.bF+=t,this.TF(yn.sQ,this.bF)}SF(t,i){const e=this.NF.get(i)||0;this.TF(t,e)}IF(){const t=this.Qo.eg.HT-this._F;this.TF(yn.hQ,t)}DF(){const t=this.Qo.eg.ZT-this.gF;this.TF(yn.uQ,t)}EF(){const t=Gu.lL.OP();this.TF(yn.nQ,sw(t))}kF(t){this.TF(yn.rQ,sw(t)),this.TF(yn.oQ,sw(t))}mF(){if(!this.UQ())return;const t=_.round(rT(this.Qo.Q_()));this.TF(yn.aQ,t)}LF(){const t=Ri.xn(this.Qo.j_()),i=this.Qo.Q_(),e=t.Jm(i),s=e?rT(e.jn(0)-i):0;this.TF(yn.eQ,s)}TF(t,i){this.OQ&&this.RQ.xF(t,i)}constructor(...t){super(...t),this.NF=Pu(),this.bF=0,this._F=0,this.gF=0,this.wF=[],this.vF=()=>{this.IF(),this.DF(),this.LF()},this.AF=t=>{t.$D===Jt.VA&&(this.MF(t.KT),this.EF(),this.kF(t.CF),this.mF())},this.pF=t=>{const i=t.status.toString()[0],e=this.NF.get(i)||0;this.NF.set(i,e+1),this.SF(yn.KU,"1"),this.SF(yn.JU,"2"),this.SF(yn.$U,"3"),this.SF(yn.tQ,"4"),this.SF(yn.iQ,"5")}}},JS=class{kL(t){this.OF.delete(t)}jF(){this.OF.clear()}IL(t){return this.OF.get(t)}EP(t,i){this.OF.set(t,i)}constructor(){this.OF=Pu()}},Nn=class t{static RF(){return t.lL||(t.lL=$S.LO()?new $S:new JS),t.lL}static kL(i){t.RF().kL(i)}static jF(){t.RF().jF()}static IL(i){return t.RF().IL(i)}static EP(i,e){t.RF().EP(i,e)}};Nn.lL=void 0;var si,$S=class extends Nn{static LO(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}kL(t){self.sessionStorage.removeItem(t)}jF(){self.sessionStorage.clear()}IL(t){var i;return null!=(i=self.sessionStorage.getItem(t))?i:void 0}EP(t,i){self.sessionStorage.setItem(t,i)}};function tN(t){return t&&t.integration===oN}function iN(t){if(!Sn(t.asset))throw new b("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!Sn(t)&&("live"===t||"vod"===t)}(t.streamType))throw new b("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!Sn(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new b("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!Sn(t.cdn))throw new b("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!Sn(t.contentTitle))throw new b("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!Sn(t.contentType))throw new b("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!Sn(t.contentDescription))throw new b("Agama source configuration: expected 'contentDescription' to be a string");return t}function eN(t){if(!Sn(t.config))throw new b("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!Sn(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new b("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!Sn(t.application))throw new b("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!Sn(t.applicationVersion))throw new b("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!Sn(t.userAccountID))throw new b("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!Sn(t.deviceID))throw new b("Agama player configuration: expected 'deviceID' to be a string");return t}function sN(){let t="00000000-0000-0000-0000-000000000000",i=s.navigator,e=s.screen,n=""+i.mimeTypes.length;n+=i.userAgent.replace(/\D+/g,""),n+=i.plugins.length,n+=e.height||"",n+=e.width||"",n+=e.pixelDepth||"",n+=_.floor(1e3*_.random());let r=function(t){let i,e,s=0;if(0===t.length)return"0";for(i=0;i<t.length;i++)e=t.charCodeAt(i),s=(s<<5)-s+e,s|=0;return _.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function nN(t,i,e){const s=i,n=function(t,i){return zn(i)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,i){let e=t.DsPlaylistType.VOD;"live"===i&&(e=t.DsPlaylistType.LIVE);return e}(t,e.streamType);return{asset:e.asset,playlistType:r,protocol:n,uri:s.src}}!function(t){t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected"}(si||(si={}));var D,Ht,U,rN=class{PF(){this.Qo.fn(hi.ha,this.zF),this.BF(),this.UF(),this.RQ.QF()}FF(){this.Qo.YF.va.chromecast&&this.Qo.YF.va.chromecast.addEventListener("statechange",this.GF)}UF(){this.Qo.YF.va.chromecast&&this.Qo.YF.va.chromecast.removeEventListener("statechange",this.GF)}VF(){return void 0!==this.Qo.YF.va.chromecast&&this.Qo.YF.va.chromecast.state===si.CONNECTED}gn(){this.Qo.fn(Tf.lo,this.do),this.Qo.fn(Tf.jh,this.WF),this.Qo.fn(Tf.Ov,this.HF),this.PF(),this.RQ.gn()}XF(){this.ZF||(this.ZF=new ZS(this.Qo,this.RQ)),this.qF||(this.qF=new KS(this.Qo,this.RQ)),this.KF||(this.KF=new qS(this.Qo,this.RQ))}CQ(){this.ZF&&(this.ZF.CQ(),this.ZF.yn("xQ",this.JF)),this.qF&&this.qF.CQ(),this.KF&&this.KF.CQ()}BF(){this.ZF&&(this.ZF.fn("xQ",this.JF),this.ZF.gn(),this.ZF=void 0),this.qF&&(this.qF.gn(),this.qF=void 0),this.KF&&(this.KF.gn(),this.KF=void 0)}lF(t){this.KF&&this.KF.lF(t)}tY(){this.ZF&&this.ZF.qQ()}XQ(){this.ZF&&this.ZF.XQ()}constructor(t,i,e){this.Qo=t,this.RQ=i,this.do=()=>{this.iY(),this.HF()},this.iY=()=>{const t=this.Qo.Wa(),i=t&&t.analytics;this.eY=function(t){void 0===t&&(t=[]);for(let i of t)if(tN(i))return iN(i)}(i)},this.HF=()=>{this.PF(),this.Qo.fn(Tf.jh,this.WF),!this.VF()&&this.RQ.sY()&&this.Qo.bt&&this.eY&&(this.XF(),this.Qo.fg||this.Qo.G_?this.Qo.yn(Tf.jh,this.WF):this.WF())},this.WF=()=>{this.Qo.bt&&this.eY&&(this.RQ.nY(this.Qo.bt,this.eY),this.CQ(),this.lF(this.eY),this.FF(),this.Qo.yn(hi.ha,this.zF),this.Qo.fn(Tf.jh,this.WF))},this.GF=()=>{this.VF()&&this.PF()},this.zF=()=>{this.tY(),this.PF()},this.JF=()=>{this.qF&&this.qF.yF()};const s=function(t){void 0===t&&(t=[]);for(const i of t)if(tN(i))return eN(i)}(e.analytics);s&&this.RQ.rY()&&(this.RQ.Wg(s),this.RQ.sY()?(this.RQ.oY(),this.Qo.yn(Tf.lo,this.do),this.Qo.yn(Tf.Ov,this.HF)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},oN="agama";function hN(t){switch(t){case"":return D.NONE;case"horizontal":return D.HORIZONTAL;case"vertical":return D.VERTICAL;default:throw new b}}function aN(t,i){if(i)return Ht.PM360;if(null==t)return Ht.NONE;switch(t){case"":return Ht.NONE;case"360":return Ht.PM360;case"180":return Ht.PM180;default:throw new b("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}!function(t){t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(D||(D={})),function(t){t.NONE="",t.PM360="360",t.PM180="180"}(Ht||(Ht={})),function(t){t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event"}(U||(U={}));var uN="https://content.uplynk.com";function Mu(t){if(!t)return!0;const i=!function(t){return Zw(t)||Cu(t)&&Zw(t[0])}(t.sources)||Yh(t.sources),e=!t.ads||cN(t.ads),s=""!==t.poster&&!t.poster;return i&&e&&s}function cN(t){return!t||tr(t)&&0===t.length}function lN(t){if(t&&t.sources)return dN(t.sources)}function dN(t){return Sn(t)?Uw(t):Xw(t)?t.type||t.src&&Uw(t.src):Cu(t)&&t.length>0?dN(t[0]):void 0}function fN(t){if(t&&t.sources)return _N(t.sources)}function _N(t){return Sn(t)?t:Xw(t)?t.src:Cu(t)&&t.length>0?_N(t[0]):void 0}function gN(t,i,e){return Yw(t)?function(t,i,e){let s=ol({},qw(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:Js.VERIZON_MEDIA,id:"",prefix:uN,preplayParameters:{},playbackUrlParameters:{},assetType:U.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(Sn(t))return t;if(Cu(t)&&Sn(t[0]))return t;if(function(t){return Vu(t)&&Sn(t.userId)&&(Cu(t.externalId)||Sn(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return U.CHANNEL;case"event":return U.EVENT;default:return U.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=Ia(t.contentProtected));t.assetInfo?s.assetInfo=Ia(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=wo(t.prefix)||uN);return s.ping=function(t,i){let e=!1,s=!1,n=!1;i?(e=!!tu(i.adImpressions)&&i.adImpressions,s=!!tu(i.freeWheelVideoViews)&&i.freeWheelVideoViews,n=tu(i.linearAdData)?i.linearAdData:t!==U.ASSET):t!==U.ASSET&&(n=!0);return{adImpressions:e,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=vN(s,t),s=pN(s,i,e),s=mN(s,t,e),s}(t,i,e):Vw(t)?function(t,i,e){var s;return ol({},wN(t,i,e),{integration:Js.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,i,e):Gw(t)?function(t,i,e){return ol({},wN(t,i,e),{integration:Js.THEOLIVE})}(t,i,e):er(t)?function(t,i,e){return ol({},wN(t,i,e),{type:Pl.Ip,streamName:t.streamName,streamAccountId:t.streamAccountId,subscriberToken:t.subscriberToken})}(t,i,e):wN(t,i,e)}function wN(t,i,e){let s=Kw();const n=i&&(i.contentProtection||i.drm);if(Sn(t)){if(s.src=t,s.type=Uw(t),n){const t=TS(n);s.contentProtection=bw(t)}}else if(Xw(t)||Qn(t)||er(t)){s.src=t.src,s.type=t.type||Uw(t.src),s.isAdvertisement=t.isAdvertisement;const i=yc(t)?t.hesp:void 0;void 0!==i&&(s.hesp=i);Vw(t)&&(s.integration=t.integration);const e=TS(t.contentProtection||t.drm||n);s.contentProtection=bw(e),t.ssai&&(s.ssai=h_(t.ssai)),s=vN(s,t)}return s=pN(s,i,e),s=mN(s,t,e),s}function vN(t,i){var e,s;i.useCredentials?t.crossOrigin=ba.Ap:i.crossOrigin&&(t.crossOrigin=Qw(i.crossOrigin)),Sn(i.timeServer)&&(t.timeServer=i.timeServer),i.liveOffset&&(t.liveOffset=i.liveOffset),i.hlsDateRange&&(t.hlsDateRange=i.hlsDateRange),i.lowLatency&&(t.lowLatency=Ia(i.lowLatency)),i.useNativePlayback&&(t.useNativePlayback=Ia(i.useNativePlayback)),i.useManagedMediaSource&&(t.useManagedMediaSource=Ia(i.useManagedMediaSource)),i.dash&&(t.dash=Tw(i.dash)),i.hls&&(t.hls=Sw(i.hls)),i.lcevc&&(t.lcevc=Ia(i.lcevc)),i.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=iv(i.ignoreEmbeddedTextTrackTypes)),i.latencyConfiguration&&(t.latencyConfiguration=jw(i.latencyConfiguration)),t.seamlessSwitchStrategy=Rw(null!=(s=i.seamlessSwitchStrategy)?s:null==(e=i.dash)?void 0:e.useSeamlessPeriodSwitch);const n=lt(i.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=lt(i.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function mN(t,i,e){return t.abr=Dw(Sn(i)?void 0:Iw(i.abr),null==e?void 0:e.abr),t}function pN(t,i,e){var s;const n=i&&i.timeServer;return e&&e.liveOffset&&!Ks(t.liveOffset)&&(t.liveOffset=e.liveOffset),e&&e.hlsDateRange&&!Ks(t.hlsDateRange)&&(t.hlsDateRange=e.hlsDateRange),t.crossOrigin===ba.mp&&(null==i||null==(s=i.vr)?void 0:s[360])&&(t.crossOrigin=ba.pp),t.useCredentials=t.crossOrigin===ba.Ap,Sn(n)&&!t.timeServer&&(t.timeServer=n),t}function AN(t){const i={src:""};if(t&&t.src){if(i.src=wo(t.src),"default"in t&&(i.default=Ia(t.default)),i.kind=function(t){const i=String(t||"").toLowerCase();return wp(i)?i:i?"metadata":"subtitles"}(t.kind),zw(t.format)&&(i.format=t.format),"srclang"in t){const e=t.srclang;"string"==typeof e&&""!==e&&(i.srclang=e)}if("label"in t){const e=t.label;"string"==typeof e&&""!==e&&(i.label=e)}}return i}function yN(t,i){if(Vu(t))try{return i.FU(t).hY(t)}catch(t){return}}function dl(t,i,e){if(void 0===e&&(e=nu.lL),Mu(t))return{sources:[Kw()]};const s=Ca(t);if(s.sources=function(t,i,e){if(Zw(t))return[gN(t,i,e)];if(Cu(t)&&Zw(t[0])){const s=[];for(const n of t)s.push(gN(n,i,e));return s}return[Kw()]}(s.sources,s,i),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,i){if(!Cu(t))return[];const e=[];for(let s of t)s=yN(s,i),s&&e.push(s);return e}(s.ads,e);0===t.length?delete s.ads:s.ads=t}const n=!Yh(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!Cu(t))return[];const i=[];for(let e of t)e=AN(e),""!==e.src&&i.push(e);return i}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=wo(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const i=t||{};return i.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(i.stereoMode),{panoramaMode:aN(i.panoramaMode,Boolean(i[360])),stereoMode:i.stereoMode?hN(i.stereoMode):D.NONE,nativeVR:Boolean(i.nativeVR)}}(s.vr));if("analytics"in s||(null==i?void 0:i.analytics)){const t=$w(s.analytics),e=i&&i.analytics||[];s.analytics=function(t,i){const e=Ca(t);for(const s of i){const i=!t.some((t=>t.integration===s.integration));i&&s.integration!==oN&&e.push(s)}return e}(t,e)}return"mutedAutoplay"in s&&(s.mutedAutoplay=rv(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=ji(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}var MN=!(Po.Ik&&!Po.Ek),bN=self.console;function TN(t){if(Vu(t))try{return JSON.stringify(t)}catch(t){}return t}function SN(t){return t.map(TN).join(" ")}function NN(t){const i=bN&&bN[t];return i?i.bind&&MN?i.bind(bN):function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];bN[t](SN(e))}:void 0}var IN=NN("log")||Br,Ut=NN("warn")||IN.bind(void 0,"WARNING:"),Ct=NN("error")||IN.bind(void 0,"ERROR:"),DN=(()=>{const t=bN&&bN.assert;return t?t.bind&&MN?t.bind(bN):function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];bN.assert(t,SN(e))}:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];t||Ct("Assertion failed:",...e)}})();var Cc=function(){function t(t){this.aY=t}return t.prototype.uY=function(t){var i,e,s,n,r,o,h,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.aY.charAt(64);for(i=0;i<t.length;i+=4)e=(h=this.aY.indexOf(t.charAt(i))<<18|this.aY.indexOf(t.charAt(i+1))<<12|(r=this.aY.indexOf(t.charAt(i+2)))<<6|(o=this.aY.indexOf(t.charAt(i+3))))>>>16&255,s=h>>>8&255,n=255&h,a[i/4]=String.fromCharCode(e,s,n),64===o&&(a[i/4]=String.fromCharCode(e,s)),64===r&&(a[i/4]=String.fromCharCode(e));return a.join("")},t.prototype.cY=function(t,i){var e,s,n,r,o,h,a,u=[],c="";if((h=t.length%3)>0)for(;h++<3;)c+=this.aY.charAt(64),t+="\0";for(h=0;h<t.length;h+=3)s=(e=t.charCodeAt(h)<<16|t.charCodeAt(h+1)<<8|t.charCodeAt(h+2))>>18&63,n=e>>12&63,r=e>>6&63,o=63&e,u[h/3]=this.aY.charAt(s)+this.aY.charAt(n)+this.aY.charAt(r)+this.aY.charAt(o);return a=(a=u.join("")).slice(0,a.length-c.length),i||(a+=c),a},t.lh=new t(function(){var t,i,e,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(i=r[t],e=0;e<i.length;e+=1)s=i.charAt(e),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.lY=new t(function(t){return t.uY("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.lh)),t}();function bt(t){return"string"==typeof t}function EN(t){return"number"==typeof t}var kN={}.toString;var no,LN=Array.isArray||function(t){return"[object Array]"===kN.call(t)};function et(t,i){return LN(t)&&t.every(i)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(no||(no={}));var xN,CN=w.keys(no).map((function(t){return no[t]}));function ON(t){return-1!==CN.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads",t.MILLICAST="millicast"}(xN||(xN={}));var jN,RN=w.keys(xN).map((function(t){return xN[t]}));function PN(t){return-1!==RN.indexOf(t)}function zN(t){try{var i=Cc.lY.uY(t),e=JSON.parse(i);if(!function(t,i){var e,s=function(t){return"object"==typeof t&&null!==t}(t),n=bt(t.key),r=bt(t.customer_id),o=EN(t.generation_date),h=EN(t.expiration_date),a=et(t.domains_page,bt),u=et(t.domains_source,bt),c=et(t.sdks,i?ON:bt),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?e=et(t.features,i?PN:bt):(e=!0,t.features=[]);if(!(s&&n&&r&&o&&h&&a&&u&&c&&l&&e))return!1;return!0}(e,!1))throw new g("The provided license could not be decoded correctly.");return e}catch(t){throw new g("The provided license could not be decoded correctly.")}}function BN(){return jN||(jN={zu:$p.href,dY:Ua.parent&&Ua.parent!==s,fY:QN()}),jN}var Ou,UN=["http:","https:","ftp:","ws:","wss:"];function QN(){var t;try{if(null==Ua?void 0:Ua.top)return Ua.top.location.href}catch(t){}return null==Ua||null==(t=Ua.document)?void 0:t.referrer}!function(t){t[t._Y=0]="_Y",t[t.gY=1]="gY",t[t.wY=2]="wY"}(Ou||(Ou={}));var FN,YN=class{constructor(t,i,e,s,n=[],r="",o=Date.now(),h=[],a=!0){this.vY=t,this.mY=i,this.pY=e,this.AY=s,this.yY=n,this.MY=r,this.bY=o,this.TY=h,this.SY=a}};!function(t){t.gY="expired",t.NY="invaliddomain",t.IY="invalidsource",t.DY="invalidfeature",t.ha="error"}(FN||(FN={}));var GN=class t{EY(t,i){let e=[];Zw(t.sources)?e=[t.sources]:Cu(t.sources)&&(e=t.sources),this.kY(t,e,i),this.LY(e,i)}kY(t,i,e){if(Mu(t)||0===e.pY.length||qN(e.pY))return;if(!i.every((t=>this.xY(t,e)))){const t="invalidsource",i=mr.CY(t);throw new ao(WN(t),i)}}LY(t,i){for(const e of t)Xw(e)&&yc(e)&&!e.bypassLicense&&this.OY([xN.HESP],i)}jY(i){return this.RY(i.TY)&&this.PY(i)?t.zY(i.AY)?0:1:2}OY(t,i){for(const e of t)if(!Ai(i.yY,e)){const t="invalidfeature",i=mr.BY(t,e);throw new ao(WN(t),i)}}RY(t){return 0===t.length||t.some((t=>this.UY(t)))}UY(t){return"web"===function(t){switch(t){case no.ANDROID:return Lc.wE;case no.ANDROIDTV:case no.FIRETV:return Lc.vE;case no.IOS:return Lc.mE;case no.TVOS:return Lc.pE;case no.CHROMECAST:case no.CHROMECASTCAF:return Lc.AE;case no.THEOLIVEWEB:return Lc.yE;default:return Lc.gE}}(t)}static zY(t){const i=Number(new Date);return!!t&&i<=t}PY(t){return!(this.QY&&0!==t.mY.length&&!qN(t.mY))||!!(this.QY&&this.FY(t.mY)&&this.YY(t.mY))}FY(t){return KN(this.Dx.zu,t)}YY(t){if(!this.Dx.dY)return!0;if(this.GY)return!0;const i=this.VY();return!!i&&KN(i,t)}VY(){if(!this.Dx.dY)return;const t=Nl.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.Dx.fY?this.Dx.fY:void 0}xY(i,e){return!!t.WY(i,e.pY)}static WY(t,i){return KN(this.HY(t),i)}static HY(t){return Sn(t)?t:Xw(t)&&t.src||""}constructor(t,i,e){this.GY=t,this.XY=i,this.Dx=e,this.QY=$N(this.Dx)}},VN=class{jY(t){return 0}EY(t,i){}OY(t,i){}};function WN(t){switch(t){case"invaliddomain":return qa.LICENSE_INVALID_DOMAIN;case"invalidsource":return qa.LICENSE_INVALID_SOURCE;case"expired":return qa.LICENSE_EXPIRED;case"invalidfeature":return qa.LICENSE_INVALID_FEATURE;case"error":return qa.LICENSE_ERROR}}var HN="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",XN=ei((()=>{const t="\\.",i="(\\*|"+HN+")";return new RegExp("ip-range\\("+i+t+i+t+i+t+i+"\\)")}));function ZN(t,i){let e=t,s=i;if(!e)return!1;if(s=s.trim(),"*"===s)return!0;if(e=e.replace(/\.+$/,""),s===e)return!0;if(I(s,"ip-range(")){const t="\\.",i=s.match(XN()),n=t=>"*"===t?"("+HN+")":t;if(null!==i&&5===i.length){const s=new RegExp("^"+i[1]+t+n(i[2])+t+n(i[3])+t+n(i[4])+"$");return null!==e.match(s)}}return s="."+s,-1!==e.indexOf(s,e.length-s.length)}function qN(t){return t.some((t=>"*"===t))}function KN(t,i){const e=ra.Dh(t);if(!JN(e))return!0;for(const s of i){if(ZN(e.hostname,s))return!0;if(ZN(t_(t),s))return!0}return!1}function JN(t){return-1!==UN.indexOf(t.protocol)}function $N(t){const i=ra.Dh(t.zu);return JN(i)&&!function(t){return ZN(t.hostname,"localhost")}(i)&&!function(t){return ZN(t.hostname,"theoplayer.doubleclick.net")}(i)}var tI,mr=class{static BY(t,i){return"The requested feature '"+i+"' is not available with the license for this player."}static CY(t){return"invaliddomain"===t?this.ZY:"invalidsource"===t?this.qY:"expired"===t?this.KY:"invalidfeature"===t?this.JY:this.$Y}};function iI(t){const i=[t.Kb,t.tG,t.iG];switch(t.tG){case 1:i.push(t.yv);break;case 4:i.push(t.U_),i.push(t.lt);break;case 5:i.push(t.lt)}return i}mr.$Y="The license for this player is invalid.",mr.KY="The usage license for this video player has expired.",mr.ZY="The current domain is incompatible with the license for this player.",mr.qY="The provided video source is incompatible with the license for this player.",mr.JY="The requested feature is not available with the license for this player.",function(t){t[t.eG=1]="eG",t[t.sG=4]="sG",t[t.nG=5]="nG",t[t.rG=9]="rG"}(tI||(tI={}));var E=new Array(256);for(let t=0;t<256;t+=1)E[t]=(t<16?"0":"")+t.toString(16);function Sr(){const t=Na(),i=(4294967296*_.random()|0)+t&3029421624,e=(4294967296*_.random()|0)+t&3595553209,s=(4294967296*_.random()|0)+t&1130486254,n=(4294967296*_.random()|0)+t&1284287105;return E[255&i]+E[i>>>8&255]+E[i>>>16&255]+E[i>>>24&255]+"-"+E[255&e]+E[e>>>8&255]+"-"+E[e>>>16&15|64]+E[e>>>24&255]+"-"+E[63&s|128]+E[s>>>8&255]+"-"+E[s>>>16&255]+E[s>>>24&255]+E[255&n]+E[n>>>8&255]+E[n>>>16&255]+E[n>>>24&255]}function eI(t){return Fe(t.replace(/-/g,""))}function sI(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const i=16*_.random()|0;return("x"===t?i:3&i|8).toString(16)}))}function nI(){return ra.m_()}var rI,oI="theoplayer-session-id";function hI(){if(!rI){const t=Nn.IL(oI);t?rI=t:(rI=Sr(),Nn.EP(oI,rI))}return rI}var aI=/[^\x00-\x7E]/g;function uI(t){return"\\u"+Aa(t.charCodeAt(0).toString(16),4,"0")}var cI="https://license.theoplayer.com";function lI(t){const i=function(t){const i=[];return function(t,i,e){return JSON.stringify(t,i,e).replace(aI,uI)}(t,((t,e)=>{if(Vu(e)){if(-1!==i.indexOf(e))return null;i.push(e)}return e}))}(function(t){return[t.oG,t.tO,t.vY,t.Gy,t.hG,t.aG,t.uG.map(iI)]}(t));return Cc.lY.cY(i)}var dI=class{get uG(){return this.hd}cG(){return Boolean(this.hG)}get hG(){return this.lG}async dG(t){if(!(await this._G.fG()).SY)return;const i={tG:tI.eG,iG:Na(),yv:t};await this.iF(i)}async gG(){if(!(await this._G.fG()).SY)return;const t={tG:tI.rG,iG:Na()};await this.iF(t)}async wG(t,i){const e={tG:tI.sG,iG:Na(),U_:i,lt:t};await this.iF(e)}async vG(t){const i={tG:tI.nG,iG:Na(),lt:t};await this.iF(i)}async iF(t){const i=await this._G.fG();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.mG.cY(i.vY)&&t.tG!==tI.nG||(t.tG===tI.eG?this.pG():this.cG()||this.pG(),t.Kb=this.oC++,this.hd.push(t),!function(t){return t===tI.eG||t===tI.nG}(t.tG)?this.hd.length>this.AG&&await this.yG():await this.MG())}async MG(t){for(void 0===t&&(t=!1);this.hd.length>0;)await this.yG(t)}async bG(t){const i=await this._G.fG();return{oG:Na(),tO:hI(),vY:this.mG.cY(i.vY)||"dev",Gy:this.kC,hG:this.lG,aG:this.TG,uG:t}}async yG(t){void 0===t&&(t=!1);const i=this.hd.splice(0,this.SG),e=await this.bG(i);t?this.NG(e):this.IG(e),this.DG=nI()}async IG(t){const i=lI(t),e=new Zi({zu:cI,HD:i,tE:!1,qD:Ft.Ru,XD:{"Content-Type":nl.ZR},_D:4e3,ZD:Cl.POST});try{const t=await this.aE.uD(e);await t.GR()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+i}}NG(t){const i=lI(t);this.aE.NG({zu:cI,HD:i,Nz:nl.ZR})}pG(){this.cG()&&this.MG(),this.lG=Sr(),this.oC=0}gn(){Jp.EG(this.kG),m(this.xG),this.MG()}constructor(t,i,e,s=Cc.lh,n=0,r=1){this.kC=t,this.aE=i,this._G=e,this.mG=s,this.AG=n,this.SG=r,this.hd=[],this.lG=null,this.DG=0,this.TG="unknown",this.oC=0,this.CG=()=>{nI()-this.DG>6e4&&this.MG()},this.kG=()=>{this.MG(!0)},Jp.OG(this.kG),this.xG=v(this.CG,6e4)}};var fI=0;var _I=c,Pc=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,Ja=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;Pc&&Ja||(Pc=function(t){const i=nI(),e=_.max(0,16-(i-fI)),s=u((()=>t(i+e)),e);return fI=i+e,s},Ja=_I),Pc=Pc.bind(self),Ja=Ja.bind(self);var gI=Po.Ik||Po.Ga&&Po.Uk<13;function wI(t,i,e){const s=t.getImageData(i,e,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var Bh,vI=class{get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{drawImage(i){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return t.jG(i,...s)},texImage2D:(i,e,s,n,r,o)=>t.zG(i,e,s,n,r,o),requestVideoFrameCallback:i=>t.BG(i),cancelVideoFrameCallback:i=>t.UG(i)}}(this)}jG(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=this.QG;return void 0!==n&&(t.drawImage(n,...e),!0)}zG(t,i,e,s,n,r){let o=this.QG;return void 0!==o&&(gI&&(o=this.FG(o)),t.texImage2D(i,e,s,n,r,o),!0)}BG(t){const i=this.YG++,e=this.GG(t,i);return this.VG.set(i,{WG:t,HG:e}),i}UG(t){const i=this.VG.get(t);void 0!==i&&(this.VG.delete(t),i.HG())}GG(t,i){const e=this.QG;if(void 0===e)return Br;if(e instanceof HTMLVideoElement&&e.requestVideoFrameCallback){const s=e.requestVideoFrameCallback(((e,s)=>{this.VG.delete(i),t(e,s)}));return()=>e.cancelVideoFrameCallback(s)}{let e;const s=n=>{this.XG()?(this.VG.delete(i),this.ZG=!1,t(n,void 0)):e=Pc(s)};return e=Pc(s),()=>Ja(e)}}XG(){return(!this.t.fg||this.ZG)&&!this.t.Eg&&this.t.Sg>=qo.UT}FG(t){let i=this.qG;void 0===i&&(i=h.createElement("canvas"),this.qG=i);const e=i.getContext("2d"),s=this.t,n=s.Rg,r=s.Cg,o=i.width,a=i.height;e.clearRect(0,0,i.width,i.height),o===n&&a===r||(i.width=n,i.height=r),e.drawImage(t,0,0,n,r);let u=!1;return n>0&&wI(e,n-1,0)&&(i.width=o,u=!0),r>0&&wI(e,0,r-1)&&(i.height=a,u=!0),u&&e.drawImage(t,0,0,n,r),i}gn(){this.VG.forEach((t=>t.HG())),this.VG.clear(),this.t.fn(Tf.zv,this.KG),this.t.fn(Tf.$v,this.JG),this.QG=void 0,this.qG=void 0}constructor(t){this.QG=void 0,this.Xa=void 0,this.qG=void 0,this.VG=Gs(),this.YG=1,this.ZG=!0,this.JG=()=>{this.ZG=!0},this.KG=()=>{this.QG=this.t.Vg(),this.VG.forEach(((t,i)=>{t.HG(),t.HG=this.GG(t.WG,i)}))},this.t=t,this.t.yn(Tf.zv,this.KG),this.t.yn(Tf.$v,this.JG),this.KG()}};(Bh||(Bh={})).pn="dimensionchange";var mI,pI=class extends Mo{get _u(){return 0}get ku(){return 0}},AI=class extends Os{constructor(t,i){super(Bh.pn),this.width=t,this.height=i}},yI=class{constructor(t,i){this.we=t,this.WG=i}},MI=class extends yI{get _u(){return this.$G}get ku(){return this.tV}gn(){this.iV.disconnect()}constructor(t,i){super(t,i),this.$G=0,this.tV=0,this.eV=t=>{if(t.length>0){const i=t[t.length-1].contentRect;this.tV=i.width,this.$G=i.height,this.WG(this.tV,this.$G)}},this.iV=new Ua.ResizeObserver(this.eV),this.iV.observe(this.we)}};var bI=["Webkit","Moz","O","ms"],TI=(()=>{let t=!1;try{if(void 0!==Ua&&"function"==typeof Ua.addEventListener){const i=w.defineProperty({},"passive",{get(){t=!0}});Ua.addEventListener("testPassiveEventSupport",Br,i),Ua.removeEventListener("testPassiveEventSupport",Br,i)}}catch(t){}return t})(),SI=Pu();function NI(t){return SI.has(t)||SI.set(t,function(t){const i=(mI||(mI=Ua&&Ua.document&&Ua.document.createElement("span")),mI);if(!i||!i.style)return t;if(void 0!==i.style[t])return t;const e=t.charAt(0).toUpperCase()+t.slice(1);for(const t of bI){const s=t+e;if(void 0!==i.style[s])return s}return t}(t)),SI.get(t)}function II(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.bottom="0",i.top="0",i.overflow="scroll",i.zIndex="-1",i.visibility="hidden"}function DI(t){const i=t.style;i.position="absolute",i.left="0",i.top="0",i[NI("transition")]="0s"}var EI=class extends yI{gn(){Ja(this.sV),this.sV=0,this.nV.removeEventListener("scroll",this.rV),this.oV.removeEventListener("scroll",this.rV),wi(this.hV),s&&s.removeEventListener("resize",this.aV)}get _u(){return this.we.getBoundingClientRect().height||this.$G||0}get ku(){return this.we.getBoundingClientRect().width||this.tV||0}constructor(t,i,e){super(t,i),this.sV=0,this.tV=NaN,this.$G=NaN,this.uV=void 0,this.tr=()=>{const t=1e5;this.cV.style.width=t+"px",this.cV.style.height=t+"px",this.nV.scrollLeft=t,this.nV.scrollTop=t,this.oV.scrollLeft=t,this.oV.scrollTop=t,0===this.oV.scrollTop&&Pc(this.tr)},this.lV=()=>{const t=this.ku,i=this._u;this.WG(t,i),this.tV=t,this.$G=i,this.tr(),this.sV=0},this.rV=()=>{if(this.sV)return;const t=this.ku,i=this._u;t===this.tV&&i===this.$G||(this.sV=Pc(this.lV))},this.aV=()=>{this.uV||(this.uV=u(this.dV,66))},this.dV=()=>{this.uV=void 0,this.fV()},this.fV=()=>{this.rV()};const n=function(t,i){return s.getComputedStyle(t,void 0).getPropertyValue(i)||t.style[i]}(t,"position");e||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.hV=r,this.nV=h.createElement("div"),this.cV=h.createElement("div"),this.oV=h.createElement("div"),this._V=h.createElement("div"),II(this.nV),II(this.oV),DI(this.cV),function(t){DI(t),t.style.width="200%",t.style.height="200%"}(this._V),r.appendChild(this.nV),r.appendChild(this.oV),this.nV.appendChild(this.cV),this.oV.appendChild(this._V),t.appendChild(r),this.nV.addEventListener("scroll",this.rV),this.oV.addEventListener("scroll",this.rV),s&&s.addEventListener("resize",this.aV),this.rV()}},kI=class extends Mo{bn(t){this.iV||("function"==typeof Ua.ResizeObserver?this.iV=new MI(this.we,this.eV):this.iV=new EI(this.we,this.eV,t))}gn(){this.Vo(),this.iV&&(this.iV.gn(),this.iV=void 0)}get _u(){return this.iV?this.iV._u:0}get ku(){return this.iV?this.iV.ku:0}constructor(t){super(),this.iV=void 0,this.eV=(t,i)=>{this.Co(new AI(t,i))},this.we=t}},LI=class extends Os{constructor(){super(Vi.ra)}};var ir=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let i of t)if(i[1]in h)return{gV:i[0],wV:i[1],vV:i[2],mV:i[3],Qe:i[4],pV:i[5]}}(),xI=class extends Os{constructor(){super(Vi.ca)}},CI=class t extends Mo{static ia(t){return Boolean(ir&&h[ir.mV]&&ir.gV in t)}mo(){const t=this.we[ir.gV]();t&&t.then?t.then(this.AV,this.yV):(h.removeEventListener(ir.pV,this.yV),h.addEventListener(ir.pV,this.yV))}So(){const t=h[ir.wV]();t&&t.then?t.then(this.AV,this.yV):(h.removeEventListener(ir.pV,this.yV),h.addEventListener(ir.pV,this.yV))}zU(){const t=this.cs,i=this.we===h[ir.vV];this.cs=i,t!==i&&this.Co(new LI)}BU(){this.Co(new z)}gn(){this.Vo(),h.removeEventListener(ir.Qe,this.AV),h.removeEventListener(ir.pV,this.yV)}constructor(i){super(),this.cs=!1,this.AV=()=>this.zU(),this.yV=()=>this.BU(),this.we=i,this.ta=t.ia(i),h.addEventListener(ir.Qe,this.AV),this.zU()}},OI=class t extends Mo{static ia(t){return Po.Ga&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}mo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("fullscreen")?Po.Ga?requestAnimationFrame((()=>this.we.webkitSetPresentationMode("fullscreen"))):this.we.webkitSetPresentationMode("fullscreen"):this.we.webkitEnterFullscreen()}So(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("inline")?this.we.webkitSetPresentationMode("inline"):this.we.webkitExitFullscreen()}zU(){const t=this.cs;let i;i=this.we.webkitPresentationMode?"fullscreen"===this.we.webkitPresentationMode:Boolean(this.we.webkitDisplayingFullscreen),this.cs=i,t!==i&&this.Co(new LI)}gn(){this.Vo(),this.we.removeEventListener("webkitbeginfullscreen",this.AV),this.we.removeEventListener("webkitendfullscreen",this.AV),this.we.removeEventListener("webkitpresentationmodechanged",this.AV)}constructor(i){super(),this.cs=!1,this.AV=()=>this.zU(),this.we=i,this.ta=t.ia(i),this.we.addEventListener("webkitbeginfullscreen",this.AV),this.we.addEventListener("webkitendfullscreen",this.AV),this.we.addEventListener("webkitpresentationmodechanged",this.AV),this.zU()}},jI=class extends Mo{get ta(){return!!this.MV&&this.MV.ta}get cs(){return this.jU}mo(){this.MV?this.MV.mo():this.Co(new z)}So(){for(const t of this.bV)t.cs&&t.So()}TV(t){this.MV=t}SV(t){this.bV.push(t),t.yn(Vi.ra,this.zU),t.yn(Vi.ha,this.Ds),this.zU()}NV(t){jn(this.bV,t),t.fn(Vi.ra,this.zU),t.fn(Vi.ha,this.Ds)}DV(){for(const t of this.bV)if(t.cs)return!0;return!1}tr(){this.MV=void 0,this.jU=!1;const t=this.bV.slice();for(const i of t)this.NV(i),i.gn();this.zU()}gn(){this.Vo(),this.tr()}constructor(...t){super(...t),this.bV=[],this.MV=void 0,this.jU=!1,this.zU=()=>{const t=this.jU,i=this.DV();t!==i&&(this.jU=i,this.Co(new LI))}}},RI=class extends Mo{get ta(){return!!this.EV&&this.kV.ta}get cs(){return this.kV.cs}mo(){this.EV&&this.kV.mo()}So(){this.kV.So()}LV(){this.kV.yn([Vi.ra,Vi.ca],this.zU),this.kV.yn(Vi.ha,this.Ds)}xV(){this.kV.fn([Vi.ra,Vi.ca],this.zU),this.kV.fn(Vi.ha,this.Ds)}Yn(){const t=this.kV,i=this.t.Gg();if(t===i)return;this.oa=!0;const e=this.cs,s=this.ta;e&&this.So(),this.xV(),this.kV=i,this.LV(),e&&!this.cs&&this.ta?this.mo():this.So(),this.oa=!1,s!==this.ta&&this.Co(new xI),e!==this.cs&&this.Co(new LI)}gn(){this.Vo(),this.xV(),this.t.fn(Tf.Rv,this.CV)}constructor(t,i){super(),this.oa=!1,this.CV=()=>this.Yn(),this.zU=t=>{this.oa||this.Co(t)},this.t=t,this.EV=i,this.kV=new Et,this.LV(),this.t.yn(Tf.Rv,this.CV),this.Yn()}},cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(t){return"Symbol("+t+")"};function PI(){}var zI=Number.isNaN||function(t){return t!=t},BI=PI;function Un(t){return"object"==typeof t&&null!==t||"function"==typeof t}function UI(t){return t.slice()}function QI(t,i,e,s,n){new j(t).set(new j(e,s,n),i)}function FI(t){return!1!==function(t){if("number"!=typeof t)return!1;if(zI(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function YI(t,i,e){if("function"!=typeof t)throw new b("Argument is not a function");return Function.prototype.apply.call(t,i,e)}function jr(t,i,e,s){var n=t[i];if(void 0!==n){if("function"!=typeof n)throw new b(n+" is not a method");switch(e){case 0:return function(){return VI(n,t,s)};case 1:return function(i){var e=[i].concat(s);return VI(n,t,e)}}}return function(){return Ic(void 0)}}function GI(t,i,e){var s=t[i];if(void 0!==s)return YI(s,t,e)}function VI(t,i,e){try{return Ic(YI(t,i,e))}catch(t){return hs(t)}}function WI(t){if(t=Number(t),zI(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function HI(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new b("size property of a queuing strategy must be a function");return function(i){return t(i)}}var XI=Promise,ZI=Promise.prototype.then,qI=Promise.resolve.bind(XI),KI=Promise.reject.bind(XI);function oo(t){return new XI(t)}function Ic(t){return qI(t)}function hs(t){return KI(t)}function JI(t,i,e){return ZI.call(t,i,e)}function $I(t,i,e){JI(JI(t,i,e),void 0,BI)}function tD(t,i){$I(t,i)}function iD(t,i){$I(t,void 0,i)}function eD(t,i,e){return JI(t,i,e)}function sD(t){JI(t,void 0,BI)}var Du=function(){function t(){this.OV=0,this.jV=0,this.RV={PV:[],zV:void 0},this.BV=this.RV,this.OV=0,this.jV=0}return w.defineProperty(t.prototype,"length",{get:function(){return this.jV},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var i=this.BV,e=i;16383===i.PV.length&&(e={PV:[],zV:void 0}),i.PV.push(t),e!==i&&(this.BV=e,i.zV=e),++this.jV},t.prototype.shift=function(){var t=this.RV,i=t,e=this.OV,s=e+1,n=t.PV,r=n[e];return 16384===s&&(i=t.zV,s=0),--this.jV,this.OV=s,t!==i&&(this.RV=i),n[e]=void 0,r},t.prototype.forEach=function(t){for(var i=this.OV,e=this.RV,s=e.PV;!(i===s.length&&void 0===e.zV||i===s.length&&(i=0,0===(s=(e=e.zV).PV).length));)t(s[i]),++i},t.prototype.peek=function(){var t=this.RV,i=this.OV;return t.PV[i]},t}();function nD(t,i,e){var s=null;!0===e&&(s=w.prototype);var n=w.create(s);return n.value=t,n.done=i,n}function rD(t,i){t.QV=!0,t.FV=i,i.YV=t,"readable"===i.ja?uD(t):"closed"===i.ja?function(t){uD(t),dD(t)}(t):cD(t,i.GV)}function oD(t,i){return uk(t.FV,i)}function hD(t){"readable"===t.FV.ja?lD(t,new b("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,i){cD(t,i)}(t,new b("Reader was released and can no longer be used to monitor the stream's closedness")),t.FV.YV=void 0,t.FV=void 0}function aD(t){return new b("Cannot "+t+" a stream using a released reader")}function uD(t){t.ZC=oo((function(i,e){t.VV=i,t.WV=e}))}function cD(t,i){uD(t),lD(t,i)}function lD(t,i){sD(t.ZC),t.WV(i),t.VV=void 0,t.WV=void 0}function dD(t){t.VV(void 0),t.VV=void 0,t.WV=void 0}var fD=cn("[[CancelSteps]]"),_D=cn("[[PullSteps]]");function gD(t,i){void 0===i&&(i=!1);var e=new MD(t);return e.QV=i,e}function wD(t){return oo((function(i,e){var s={lf:i,CL:e};t.YV.HV.push(s)}))}function vD(t,i,e){var s=t.YV;s.HV.shift().lf(nD(i,e,s.QV))}function mD(t){return t.YV.HV.length}function pD(t){var i=t.YV;return void 0!==i&&!!bD(i)}var AD,yD,MD=function(){function t(t){if(!1===Hu(t))throw new b("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===Pr(t))throw new b("This stream has already been locked for exclusive reading by another reader");rD(this,t),this.HV=new Du}return w.defineProperty(t.prototype,"closed",{get:function(){return bD(this)?this.ZC:hs(SD("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return bD(this)?void 0===this.FV?hs(aD("cancel")):oD(this,t):hs(SD("cancel"))},t.prototype.read=function(){return bD(this)?void 0===this.FV?hs(aD("read from")):TD(this):hs(SD("read"))},t.prototype.releaseLock=function(){if(!bD(this))throw SD("releaseLock");if(void 0!==this.FV){if(this.HV.length>0)throw new b("Tried to release a reader lock when that reader has pending read() calls un-settled");hD(this)}},t}();function bD(t){return!!Un(t)&&!!w.prototype.hasOwnProperty.call(t,"HV")}function TD(t){var i=t.FV;return i.XV=!0,"closed"===i.ja?Ic(nD(void 0,!0,t.QV)):"errored"===i.ja?hs(i.GV):i.ZV[_D]()}function SD(t){return new b("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof cn.asyncIterator&&((AD={})[cn.asyncIterator]=function(){return this},yD=AD,w.defineProperty(yD,cn.asyncIterator,{enumerable:!1}));var ND={next:function(){if(!1===ID(this))return hs(DD("next"));var t=this.qV;return void 0===t.FV?hs(aD("iterate")):eD(TD(t),(function(i){var e=i.done;return e&&hD(t),nD(i.value,e,!0)}))},return:function(t){if(!1===ID(this))return hs(DD("next"));var i=this.qV;if(void 0===i.FV)return hs(aD("finish iterating"));if(i.HV.length>0)return hs(new b("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.KV){var e=oD(i,t);return hD(i),eD(e,(function(){return nD(t,!0,!0)}))}return hD(i),Ic(nD(t,!0,!0))}};function ID(t){return!!Un(t)&&!!w.prototype.hasOwnProperty.call(t,"qV")}function DD(t){return new b("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function ED(t){var i=t.JV.shift();return t.$V-=i.size,t.$V<0&&(t.$V=0),i.value}function kD(t,i,e){if(!FI(e=Number(e)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.JV.push({value:i,size:e}),t.$V+=e}function Ar(t){t.JV=new Du,t.$V=0}void 0!==yD&&w.setPrototypeOf(ND,yD),w.defineProperty(ND,"next",{enumerable:!1}),w.defineProperty(ND,"return",{enumerable:!1});var LD=cn("[[AbortSteps]]"),xD=cn("[[ErrorSteps]]"),CD=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),jD(this);var e=i.size,s=i.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=HI(e);void 0===s&&(s=1),function(t,i,e,s){var n=w.create(JD.prototype);function r(){return GI(i,"start",[n])}var o=jr(i,"write",1,[n]),h=jr(i,"close",0,[]),a=jr(i,"abort",1,[]);$D(t,n,r,o,h,a,e,s)}(this,t,s=WI(s),n)}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===xt(this))throw oE("locked");return RD(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===xt(this)?hs(oE("abort")):!0===RD(this)?hs(new b("Cannot abort a stream that already has a writer")):PD(this,t)},t.prototype.close=function(){return!1===xt(this)?hs(oE("close")):!0===RD(this)?hs(new b("Cannot close a stream that already has a writer")):!0===FD(this)?hs(new b("Cannot close an already-closing stream")):zD(this)},t.prototype.getWriter=function(){if(!1===xt(this))throw oE("getWriter");return OD(this)},t}();function OD(t){return new VD(t)}function jD(t){t.ja="writable",t.GV=void 0,t.qL=void 0,t.tW=void 0,t.iW=new Du,t.eW=void 0,t.sW=void 0,t.nW=void 0,t.rW=void 0,t.oW=!1}function xt(t){return!!Un(t)&&!!w.prototype.hasOwnProperty.call(t,"tW")}function RD(t){return void 0!==t.qL}function PD(t,i){var e=t.ja;if("closed"===e||"errored"===e)return Ic(void 0);if(void 0!==t.rW)return t.rW.hW;var s=!1;"erroring"===e&&(s=!0,i=void 0);var n=oo((function(e,n){t.rW={hW:void 0,lf:e,CL:n,aW:i,uW:s}}));return t.rW.hW=n,!1===s&&UD(t,i),n}function zD(t){var i=t.ja;if("closed"===i||"errored"===i)return hs(new b("The stream (in "+i+" state) is not in the writable state and cannot be closed"));var e=oo((function(i,e){var s={lf:i,CL:e};t.sW=s})),s=t.qL;return void 0!==s&&!0===t.oW&&"writable"===i&&vE(s),function(t){kD(t,"close",0),eE(t)}(t.tW),e}function BD(t,i){"writable"!==t.ja?QD(t):UD(t,i)}function UD(t,i){var e=t.tW;t.ja="erroring",t.GV=i;var s=t.qL;void 0!==s&&ZD(s,i),!1===function(t){if(void 0===t.eW&&void 0===t.nW)return!1;return!0}(t)&&!0===e.cW&&QD(t)}function QD(t){t.ja="errored",t.tW[xD]();var i=t.GV;if(t.iW.forEach((function(t){t.CL(i)})),t.iW=new Du,void 0!==t.rW){var e=t.rW;if(t.rW=void 0,!0===e.uW)return e.CL(i),void YD(t);$I(t.tW[LD](e.aW),(function(){e.lf(),YD(t)}),(function(i){e.CL(i),YD(t)}))}else YD(t)}function FD(t){return void 0!==t.sW||void 0!==t.nW}function YD(t){void 0!==t.sW&&(t.sW.CL(t.GV),t.sW=void 0);var i=t.qL;void 0!==i&&lE(i,t.GV)}function GD(t,i){var e=t.qL;void 0!==e&&i!==t.oW&&(!0===i?function(t){fE(t)}(e):vE(e)),t.oW=i}var VD=function(){function t(t){if(!1===xt(t))throw new b("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===RD(t))throw new b("This stream has already been locked for exclusive writing by another writer");this.lW=t,t.qL=this;var i=t.ja;if("writable"===i)!1===FD(t)&&!0===t.oW?fE(this):gE(this),uE(this);else if("erroring"===i)_E(this,t.GV),uE(this);else if("closed"===i)gE(this),function(t){uE(t),dE(t)}(this);else{var e=t.GV;_E(this,e),cE(this,e)}}return w.defineProperty(t.prototype,"closed",{get:function(){return!1===WD(this)?hs(hE("closed")):this.ZC},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===WD(this))throw hE("desiredSize");if(void 0===this.lW)throw aE("desiredSize");return function(t){var i=t.lW,e=i.ja;if("errored"===e||"erroring"===e)return null;if("closed"===e)return 0;return iE(i.tW)}(this)},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"ready",{get:function(){return!1===WD(this)?hs(hE("ready")):this.dW},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===WD(this)?hs(hE("abort")):void 0===this.lW?hs(aE("abort")):function(t,i){var e=t.lW;return PD(e,i)}(this,t)},t.prototype.close=function(){if(!1===WD(this))return hs(hE("close"));var t=this.lW;return void 0===t?hs(aE("close")):!0===FD(t)?hs(new b("Cannot close an already-closing stream")):HD(this)},t.prototype.releaseLock=function(){if(!1===WD(this))throw hE("releaseLock");void 0!==this.lW&&qD(this)},t.prototype.write=function(t){return!1===WD(this)?hs(hE("write")):void 0===this.lW?hs(aE("write to")):KD(this,t)},t}();function WD(t){return!!Un(t)&&!!w.prototype.hasOwnProperty.call(t,"lW")}function HD(t){return zD(t.lW)}function XD(t,i){"pending"===t.fW?lE(t,i):function(t,i){cE(t,i)}(t,i)}function ZD(t,i){"pending"===t._W?wE(t,i):function(t,i){_E(t,i)}(t,i)}function qD(t){var i=t.lW,e=new b("Writer was released and can no longer be used to monitor the stream's closedness");ZD(t,e),XD(t,e),i.qL=void 0,t.lW=void 0}function KD(t,i){var e=t.lW,s=e.tW,n=function(t,i){try{return t.gW(i)}catch(i){return sE(t,i),1}}(s,i);if(e!==t.lW)return hs(aE("write to"));var r=e.ja;if("errored"===r)return hs(e.GV);if(!0===FD(e)||"closed"===r)return hs(new b("The stream is closing or closed and cannot be written to"));if("erroring"===r)return hs(e.GV);var o=function(t){return oo((function(i,e){var s={lf:i,CL:e};t.iW.push(s)}))}(e);return function(t,i,e){var s={chunk:i};try{kD(t,s,e)}catch(i){return void sE(t,i)}var n=t.wW;if(!1===FD(n)&&"writable"===n.ja){GD(n,nE(t))}eE(t)}(s,i,n),o}var JD=function(){function t(){throw new b("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!Un(t))return!1;if(!w.prototype.hasOwnProperty.call(t,"wW"))return!1;return!0}(this))throw new b("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.wW.ja&&rE(this,t)},t.prototype[LD]=function(t){var i=this.vW(t);return tE(this),i},t.prototype[xD]=function(){Ar(this)},t}();function $D(t,i,e,s,n,r,o,h){i.wW=t,t.tW=i,i.JV=void 0,i.$V=void 0,Ar(i),i.cW=!1,i.gW=h,i.mW=o,i.pW=s,i.AW=n,i.vW=r;var a=nE(i);GD(t,a),$I(Ic(e()),(function(){i.cW=!0,eE(i)}),(function(e){i.cW=!0,BD(t,e)}))}function tE(t){t.pW=void 0,t.AW=void 0,t.vW=void 0,t.gW=void 0}function iE(t){return t.mW-t.$V}function eE(t){var i=t.wW;if(!1!==t.cW&&void 0===i.eW)if("erroring"!==i.ja){if(0!==t.JV.length){var e=function(t){return t.JV.peek().value}(t);"close"===e?function(t){var i=t.wW;(function(t){t.nW=t.sW,t.sW=void 0})(i),ED(t);var e=t.AW();tE(t),$I(e,(function(){!function(t){t.nW.lf(void 0),t.nW=void 0,"erroring"===t.ja&&(t.GV=void 0,void 0!==t.rW&&(t.rW.lf(),t.rW=void 0)),t.ja="closed";var i=t.qL;void 0!==i&&dE(i)}(i)}),(function(t){!function(t,i){t.nW.CL(i),t.nW=void 0,void 0!==t.rW&&(t.rW.CL(i),t.rW=void 0),BD(t,i)}(i,t)}))}(t):function(t,i){var e=t.wW;!function(t){t.eW=t.iW.shift()}(e);var s=t.pW(i);$I(s,(function(){!function(t){t.eW.lf(void 0),t.eW=void 0}(e);var i=e.ja;if(ED(t),!1===FD(e)&&"writable"===i){var s=nE(t);GD(e,s)}eE(t)}),(function(i){"writable"===e.ja&&tE(t),function(t,i){t.eW.CL(i),t.eW=void 0,BD(t,i)}(e,i)}))}(t,e.chunk)}}else QD(i)}function sE(t,i){"writable"===t.wW.ja&&rE(t,i)}function nE(t){return iE(t)<=0}function rE(t,i){var e=t.wW;tE(t),UD(e,i)}function oE(t){return new b("WritableStream.prototype."+t+" can only be used on a WritableStream")}function hE(t){return new b("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function aE(t){return new b("Cannot "+t+" a stream using a released writer")}function uE(t){t.ZC=oo((function(i,e){t.VV=i,t.WV=e,t.fW="pending"}))}function cE(t,i){uE(t),lE(t,i)}function lE(t,i){sD(t.ZC),t.WV(i),t.VV=void 0,t.WV=void 0,t.fW="rejected"}function dE(t){t.VV(void 0),t.VV=void 0,t.WV=void 0,t.fW="resolved"}function fE(t){t.dW=oo((function(i,e){t.yW=i,t.MW=e})),t._W="pending"}function _E(t,i){fE(t),wE(t,i)}function gE(t){fE(t),vE(t)}function wE(t,i){sD(t.dW),t.MW(i),t.yW=void 0,t.MW=void 0,t._W="rejected"}function vE(t){t.yW(void 0),t.yW=void 0,t.MW=void 0,t._W="fulfilled"}function mE(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var pE="undefined"!=typeof DOMException?DOMException:void 0;var AE=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(pE)?pE:function(){var t=function(t,i){this.message=t||"",this.name=i||"Error",g.captureStackTrace&&g.captureStackTrace(this,this.constructor)};return t.prototype=w.create(g.prototype),w.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t}();function yE(t,i,e,s,n,r){var o=gD(t),h=OD(i);t.XV=!0;var a=!1,u=Ic(void 0);return oo((function(c,l){var d,f,_,g;if(void 0!==r){if(d=function(){var e=new AE("Aborted","AbortError"),r=[];!1===s&&r.push((function(){return"writable"===i.ja?PD(i,e):Ic(void 0)})),!1===n&&r.push((function(){return"readable"===t.ja?uk(t,e):Ic(void 0)})),p((function(){return Promise.all(r.map((function(t){return t()})))}),!0,e)},!0===r.aborted)return void d();r.addEventListener("abort",d)}if(m(t,o.ZC,(function(t){!1===s?p((function(){return PD(i,t)}),!0,t):A(!0,t)})),m(i,h.ZC,(function(i){!1===n?p((function(){return uk(t,i)}),!0,i):A(!0,i)})),f=t,_=o.ZC,g=function(){!1===e?p((function(){return function(t){var i=t.lW,e=i.ja;return!0===FD(i)||"closed"===e?Ic(void 0):"errored"===e?hs(i.GV):HD(t)}(h)})):A()},"closed"===f.ja?g():tD(_,g),!0===FD(i)||"closed"===i.ja){var w=new b("the destination writable stream closed before all data could be piped to it");!1===n?p((function(){return uk(t,w)}),!0,w):A(!0,w)}function v(){var t=u;return JI(u,(function(){return t!==u?v():void 0}))}function m(t,i,e){"errored"===t.ja?e(t.GV):iD(i,e)}function p(t,e,s){function n(){$I(t(),(function(){return y(e,s)}),(function(t){return y(!0,t)}))}!0!==a&&(a=!0,"writable"===i.ja&&!1===FD(i)?tD(v(),n):n())}function A(t,e){!0!==a&&(a=!0,"writable"===i.ja&&!1===FD(i)?tD(v(),(function(){return y(t,e)})):y(t,e))}function y(t,i){qD(h),hD(o),void 0!==r&&r.removeEventListener("abort",d),t?l(i):c(void 0)}sD(oo((function(t,i){!function e(s){s?t():JI(!0===a?Ic(!0):JI(h.dW,(function(){return JI(TD(o),(function(t){return!0===t.done||(u=JI(KD(h,t.value),void 0,PI),!1)}))})),e,i)}(!1)})))}))}var ME=function(){function t(){throw new b}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===bE(this))throw xE("desiredSize");return EE(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===bE(this))throw xE("close");if(!1===kE(this))throw new b("The stream is not in a state that permits close");IE(this)},t.prototype.enqueue=function(t){if(!1===bE(this))throw xE("enqueue");if(!1===kE(this))throw new b("The stream is not in a state that permits enqueue");return DE(this,t)},t.prototype.error=function(t){if(!1===bE(this))throw xE("error");Mr(this,t)},t.prototype[fD]=function(t){Ar(this);var i=this.bW(t);return NE(this),i},t.prototype[_D]=function(){var t=this.TW;if(this.JV.length>0){var i=ED(this);return!0===this.SW&&0===this.JV.length?(NE(this),ck(t)):TE(this),Ic(nD(i,!1,t.YV.QV))}var e=wD(t);return TE(this),e},t}();function bE(t){return!!Un(t)&&!!w.prototype.hasOwnProperty.call(t,"TW")}function TE(t){!1!==SE(t)&&(!0!==t.NW?(t.NW=!0,$I(t.IW(),(function(){t.NW=!1,!0===t.DW&&(t.DW=!1,TE(t))}),(function(i){Mr(t,i)}))):t.DW=!0)}function SE(t){var i=t.TW;return!1!==kE(t)&&(!1!==t.cW&&(!0===Pr(i)&&mD(i)>0||EE(t)>0))}function NE(t){t.IW=void 0,t.bW=void 0,t.gW=void 0}function IE(t){var i=t.TW;t.SW=!0,0===t.JV.length&&(NE(t),ck(i))}function DE(t,i){var e=t.TW;if(!0===Pr(e)&&mD(e)>0)vD(e,i,!1);else{var s=void 0;try{s=t.gW(i)}catch(i){throw Mr(t,i),i}try{kD(t,i,s)}catch(i){throw Mr(t,i),i}}TE(t)}function Mr(t,i){var e=t.TW;"readable"===e.ja&&(Ar(t),NE(t),lk(e,i))}function EE(t){var i=t.TW.ja;return"errored"===i?null:"closed"===i?0:t.mW-t.$V}function kE(t){var i=t.TW.ja;return!1===t.SW&&"readable"===i}function LE(t,i,e,s,n,r,o){i.TW=t,i.JV=void 0,i.$V=void 0,Ar(i),i.cW=!1,i.SW=!1,i.DW=!1,i.NW=!1,i.gW=o,i.mW=r,i.IW=s,i.bW=n,t.ZV=i,$I(Ic(e()),(function(){i.cW=!0,TE(i)}),(function(t){Mr(i,t)}))}function xE(t){return new b("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var CE=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&_.floor(t)===t},OE=function(){function t(){throw new b("ReadableStreamBYOBRequest cannot be used directly")}return w.defineProperty(t.prototype,"view",{get:function(){if(!1===PE(this))throw $E("view");return this.QI},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===PE(this))throw $E("respond");if(void 0===this.EW)throw new b("This BYOB request has been invalidated");this.QI.buffer,function(t,i){if(i=Number(i),!1===FI(i))throw new RangeError("bytesWritten must be a finite");HE(t,i)}(this.EW,t)},t.prototype.respondWithNewView=function(t){if(!1===PE(this))throw $E("respond");if(void 0===this.EW)throw new b("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new b("You can only respond with array buffer views");t.buffer,function(t,i){var e=t.kW.peek();if(e.byteOffset+e.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(e.byteLength!==i.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");e.buffer=i.buffer,HE(t,i.byteLength)}(this.EW,t)},t}(),jE=function(){function t(){throw new b("ReadableByteStreamController constructor cannot be used directly")}return w.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===RE(this))throw tk("byobRequest");if(void 0===this.LW&&this.kW.length>0){var t=this.kW.peek(),i=new j(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),e=w.create(OE.prototype);!function(t,i,e){t.EW=i,t.QI=e}(e,this,i),this.LW=e}return this.LW},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===RE(this))throw tk("desiredSize");return KE(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===RE(this))throw tk("close");if(!0===this.SW)throw new b("The stream has already been closed; do not close it again!");var t=this.xW.ja;if("readable"!==t)throw new b("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var i=t.xW;if(t.$V>0)return void(t.SW=!0);if(t.kW.length>0){if(t.kW.peek().bytesFilled>0){var e=new b("Insufficient bytes to fill elements in the given buffer");throw qE(t,e),e}}ZE(t),ck(i)}(this)},t.prototype.enqueue=function(t){if(!1===RE(this))throw tk("enqueue");if(!0===this.SW)throw new b("stream is closed or draining");var i=this.xW.ja;if("readable"!==i)throw new b("The stream (in "+i+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new b("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,i){var e=t.xW,s=i.buffer,n=i.byteOffset,r=i.byteLength,o=s;if(!0===pD(e)){if(0===mD(e))QE(t,o,n,r);else vD(e,new j(o,n,r),!1)}else!0===sk(e)?(QE(t,o,n,r),WE(t)):QE(t,o,n,r);zE(t)}(this,t)},t.prototype.error=function(t){if(!1===RE(this))throw tk("error");qE(this,t)},t.prototype[fD]=function(t){this.kW.length>0&&(this.kW.peek().bytesFilled=0);Ar(this);var i=this.bW(t);return ZE(this),i},t.prototype[_D]=function(){var t=this.xW;if(this.$V>0){var i=this.JV.shift();this.$V-=i.byteLength,GE(this);var e=void 0;try{e=new j(i.buffer,i.byteOffset,i.byteLength)}catch(t){return hs(t)}return Ic(nD(e,!1,t.YV.QV))}var s=this.OW;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return hs(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:j,readerType:"default"};this.kW.push(r)}var o=wD(t);return zE(this),o},t}();function RE(t){return!!Un(t)&&!!w.prototype.hasOwnProperty.call(t,"xW")}function PE(t){return!!Un(t)&&!!w.prototype.hasOwnProperty.call(t,"EW")}function zE(t){var i=function(t){var i=t.xW;if("readable"!==i.ja)return!1;if(!0===t.SW)return!1;if(!1===t.cW)return!1;if(!0===pD(i)&&mD(i)>0)return!0;if(!0===sk(i)&&ek(i)>0)return!0;var e=KE(t);if(e>0)return!0;return!1}(t);!1!==i&&(!0!==t.NW?(t.NW=!0,$I(t.IW(),(function(){t.NW=!1,!0===t.DW&&(t.DW=!1,zE(t))}),(function(i){qE(t,i)}))):t.DW=!0)}function BE(t,i){var e=!1;"closed"===t.ja&&(e=!0);var s=UE(i);"default"===i.readerType?vD(t,s,e):function(t,i,e){var s=t.YV,n=s.jW.shift();n.lf(nD(i,e,s.QV))}(t,s,e)}function UE(t){var i=t.bytesFilled,e=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,i/e)}function QE(t,i,e,s){t.JV.push({buffer:i,byteOffset:e,byteLength:s}),t.$V+=s}function FE(t,i){var e=i.elementSize,s=i.bytesFilled-i.bytesFilled%e,n=_.min(t.$V,i.byteLength-i.bytesFilled),r=i.bytesFilled+n,o=r-r%e,h=n,a=!1;o>s&&(h=o-i.bytesFilled,a=!0);for(var u=t.JV;h>0;){var c=u.peek(),l=_.min(h,c.byteLength),d=i.byteOffset+i.bytesFilled;QI(i.buffer,d,c.buffer,c.byteOffset,l),c.byteLength===l?u.shift():(c.byteOffset+=l,c.byteLength-=l),t.$V-=l,YE(t,l,i),h-=l}return a}function YE(t,i,e){VE(t),e.bytesFilled+=i}function GE(t){0===t.$V&&!0===t.SW?(ZE(t),ck(t.xW)):zE(t)}function VE(t){void 0!==t.LW&&(t.LW.EW=void 0,t.LW.QI=void 0,t.LW=void 0)}function WE(t){for(;t.kW.length>0;){if(0===t.$V)return;var i=t.kW.peek();!0===FE(t,i)&&(XE(t),BE(t.xW,i))}}function HE(t,i){var e=t.kW.peek();if("closed"===t.xW.ja){if(0!==i)throw new b("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,i){i.buffer=i.buffer;var e=t.xW;if(!0===sk(e))for(;ek(e)>0;)BE(e,XE(t))}(t,e)}else!function(t,i,e){if(e.bytesFilled+i>e.byteLength)throw new RangeError("bytesWritten out of range");if(YE(t,i,e),!(e.bytesFilled<e.elementSize)){XE(t);var s=e.bytesFilled%e.elementSize;if(s>0){var n=e.byteOffset+e.bytesFilled,r=e.buffer.slice(n-s,n);QE(t,r,0,r.byteLength)}e.buffer=e.buffer,e.bytesFilled-=s,BE(t.xW,e),WE(t)}}(t,i,e);zE(t)}function XE(t){var i=t.kW.shift();return VE(t),i}function ZE(t){t.IW=void 0,t.bW=void 0}function qE(t,i){var e=t.xW;"readable"===e.ja&&(!function(t){VE(t),t.kW=new Du}(t),Ar(t),ZE(t),lk(e,i))}function KE(t){var i=t.xW.ja;return"errored"===i?null:"closed"===i?0:t.mW-t.$V}function JE(t,i,e){var s=w.create(jE.prototype);var n=jr(i,"pull",0,[s]),r=jr(i,"cancel",1,[]),o=i.autoAllocateChunkSize;if(void 0!==o&&(o=Number(o),!1===CE(o)||o<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,i,e,s,n,r,o){i.xW=t,i.DW=!1,i.NW=!1,i.LW=void 0,i.JV=i.$V=void 0,Ar(i),i.SW=!1,i.cW=!1,i.mW=WI(r),i.IW=s,i.bW=n,i.OW=o,i.kW=new Du,t.ZV=i,$I(Ic(e()),(function(){i.cW=!0,zE(i)}),(function(t){qE(i,t)}))}(t,s,(function(){return GI(i,"start",[s])}),n,r,e,o)}function $E(t){return new b("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function tk(t){return new b("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function ik(t){return oo((function(i,e){var s={lf:i,CL:e};t.YV.jW.push(s)}))}function ek(t){return t.YV.jW.length}function sk(t){var i=t.YV;return void 0!==i&&!!rk(i)}var nk=function(){function t(t){if(!Hu(t))throw new b("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===RE(t.ZV))throw new b("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(Pr(t))throw new b("This stream has already been locked for exclusive reading by another reader");rD(this,t),this.jW=new Du}return w.defineProperty(t.prototype,"closed",{get:function(){return rk(this)?this.ZC:hs(ok("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return rk(this)?void 0===this.FV?hs(aD("cancel")):oD(this,t):hs(ok("cancel"))},t.prototype.read=function(t){return rk(this)?void 0===this.FV?hs(aD("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?hs(new b("view must have non-zero byteLength")):function(t,i){var e=t.FV;if(e.XV=!0,"errored"===e.ja)return hs(e.GV);return function(t,i){var e=t.xW,s=1;i.constructor!==DataView&&(s=i.constructor.BYTES_PER_ELEMENT);var n=i.constructor,r={buffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.kW.length>0)return t.kW.push(r),ik(e);if("closed"===e.ja)return Ic(nD(new n(r.buffer,r.byteOffset,0),!0,e.YV.QV));if(t.$V>0){if(!0===FE(t,r)){var o=UE(r);return GE(t),Ic(nD(o,!1,e.YV.QV))}if(!0===t.SW){var h=new b("Insufficient bytes to fill elements in the given buffer");return qE(t,h),hs(h)}}t.kW.push(r);var a=ik(e);return zE(t),a}(e.ZV,i)}(this,t)):hs(new b("view must be an array buffer view")):hs(ok("read"))},t.prototype.releaseLock=function(){if(!rk(this))throw ok("releaseLock");if(void 0!==this.FV){if(this.jW.length>0)throw new b("Tried to release a reader lock when that reader has pending read() calls un-settled");hD(this)}},t}();function rk(t){return!!Un(t)&&!!w.prototype.hasOwnProperty.call(t,"jW")}function ok(t){return new b("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var Ei=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),ak(this);var e=i.size,s=i.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==e)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),JE(this,t,s=WI(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=HI(e);void 0===s&&(s=1),function(t,i,e,s){var n=w.create(ME.prototype),r=jr(i,"pull",0,[n]),o=jr(i,"cancel",1,[]);LE(t,n,(function(){return GI(i,"start",[n])}),r,o,e,s)}(this,t,s=WI(s),r)}}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===Hu(this))throw dk("locked");return Pr(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Hu(this)?hs(dk("cancel")):!0===Pr(this)?hs(new b("Cannot cancel a stream that already has a reader")):uk(this,t)},t.prototype.getReader=function(t){var i=(void 0===t?{}:t).mode;if(!1===Hu(this))throw dk("getReader");if(void 0===i)return gD(this,!0);if("byob"===(i=String(i)))return function(t,i){void 0===i&&(i=!1);var e=new nk(t);return e.QV=i,e}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,i){var e=t.writable,s=t.readable,n=void 0===i?{}:i,r=n.preventClose,o=n.preventAbort,h=n.preventCancel,a=n.signal;if(!1===Hu(this))throw dk("pipeThrough");if(!1===xt(e))throw new b("writable argument to pipeThrough must be a WritableStream");if(!1===Hu(s))throw new b("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),o=Boolean(o),h=Boolean(h),void 0!==a&&!mE(a))throw new b("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===Pr(this))throw new b("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===RD(e))throw new b("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return sD(yE(this,e,r,o,h,a)),s},t.prototype.pipeTo=function(t,i){var e=void 0===i?{}:i,s=e.preventClose,n=e.preventAbort,r=e.preventCancel,o=e.signal;return!1===Hu(this)?hs(dk("pipeTo")):!1===xt(t)?hs(new b("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===o||mE(o)?!0===Pr(this)?hs(new b("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===RD(t)?hs(new b("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):yE(this,t,s,n,r,o):hs(new b("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Hu(this))throw dk("tee");var t=function(t,i){var e,s,n,r,o,h=gD(t),a=!1,u=!1,c=!1,l=oo((function(t){o=t}));function d(){return!0===a||(a=!0,sD(eD(TD(h),(function(t){if(a=!1,!0===t.done)return!1===u&&IE(n.ZV),void(!1===c&&IE(r.ZV));var i=t.value,e=i,s=i;!1===u&&DE(n.ZV,e),!1===c&&DE(r.ZV,s)})))),Ic(void 0)}function f(){}return n=hk(f,d,(function(i){if(u=!0,e=i,!0===c){var n=UI([e,s]),r=uk(t,n);o(r)}return l})),r=hk(f,d,(function(i){if(c=!0,s=i,!0===u){var n=UI([e,s]),r=uk(t,n);o(r)}return l})),iD(h.ZC,(function(t){Mr(n.ZV,t),Mr(r.ZV,t)})),[n,r]}(this);return UI(t)},t.prototype.getIterator=function(t){var i=(void 0===t?{}:t).preventCancel,e=void 0!==i&&i;if(!1===Hu(this))throw dk("getIterator");return function(t,i){void 0===i&&(i=!1);var e=gD(t),s=w.create(ND);return s.qV=e,s.KV=Boolean(i),s}(this,e)},t}();function hk(t,i,e,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=w.create(Ei.prototype);return ak(r),LE(r,w.create(ME.prototype),t,i,e,s,n),r}function ak(t){t.ja="readable",t.YV=void 0,t.GV=void 0,t.XV=!1}function Hu(t){return!!Un(t)&&!!w.prototype.hasOwnProperty.call(t,"ZV")}function Pr(t){return void 0!==t.YV}function uk(t,i){return t.XV=!0,"closed"===t.ja?Ic(void 0):"errored"===t.ja?hs(t.GV):(ck(t),eD(t.ZV[fD](i),PI))}function ck(t){t.ja="closed";var i=t.YV;void 0!==i&&(bD(i)&&(i.HV.forEach((function(t){t.lf(nD(void 0,!0,i.QV))})),i.HV=new Du),dD(i))}function lk(t,i){t.ja="errored",t.GV=i;var e=t.YV;void 0!==e&&(bD(e)?(e.HV.forEach((function(t){t.CL(i)})),e.HV=new Du):(e.jW.forEach((function(t){t.CL(i)})),e.jW=new Du),lD(e,i))}function dk(t){return new b("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof cn.asyncIterator&&w.defineProperty(Ei.prototype,cn.asyncIterator,{value:Ei.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});!function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}t.prototype.size=function(t){return t.byteLength}}();var fk=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(){return 1},t}(),Wa=function(){function t(t,i,e){void 0===t&&(t={}),void 0===i&&(i={}),void 0===e&&(e={});var s=i.size,n=i.highWaterMark,r=e.size,o=e.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var h=HI(s);if(void 0===n&&(n=1),n=WI(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=HI(r);void 0===o&&(o=0),o=WI(o),function(t,i,e,s,n,r){function o(){return i}function h(i){return function(t,i){var e=t.RW;if(!0===t.oW){return eD(t.PW,(function(){var s=t.zW;if("erroring"===s.ja)throw s.GV;return Mk(e,i)}))}return Mk(e,i)}(t,i)}function a(i){return function(t,i){return gk(t,i),Ic(void 0)}(t,i)}function u(){return function(t){var i=t.BW,e=t.RW,s=e.UW();return Ak(e),eD(s,(function(){if("errored"===i.ja)throw i.GV;var t=i.ZV;!0===kE(t)&&IE(t)}),(function(e){throw gk(t,e),i.GV}))}(t)}function c(){return function(t){return vk(t,!1),t.PW}(t)}function l(i){return wk(t,i),Ic(void 0)}t.zW=function(t,i,e,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var o=w.create(CD.prototype);return jD(o),$D(o,w.create(JD.prototype),t,i,e,s,n,r),o}(o,h,u,a,e,s),t.BW=hk(o,c,l,n,r),t.oW=void 0,t.PW=void 0,t.QW=void 0,vk(t,!0),t.RW=void 0}(this,oo((function(t){a=t})),n,h,o,u),function(t,i){var e=w.create(mk.prototype),s=function(t){try{return yk(e,t),Ic(void 0)}catch(t){return hs(t)}},n=i.transform;if(void 0!==n){if("function"!=typeof n)throw new b("transform is not a method");s=function(t){return VI(n,i,[t,e])}}var r=jr(i,"flush",0,[e]);!function(t,i,e,s){i.FW=t,t.RW=i,i.YW=e,i.UW=s}(t,e,s,r)}(this,t);var c=GI(t,"start",[this.RW]);a(c)}return w.defineProperty(t.prototype,"readable",{get:function(){if(!1===_k(this))throw Tk("readable");return this.BW},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"writable",{get:function(){if(!1===_k(this))throw Tk("writable");return this.zW},enumerable:!0,configurable:!0}),t}();function _k(t){return!!Un(t)&&!!w.prototype.hasOwnProperty.call(t,"RW")}function gk(t,i){Mr(t.BW.ZV,i),wk(t,i)}function wk(t,i){Ak(t.RW),sE(t.zW.tW,i),!0===t.oW&&vk(t,!1)}function vk(t,i){void 0!==t.PW&&t.QW(),t.PW=oo((function(i){t.QW=i})),t.oW=i}var mk=function(){function t(){throw new b("TransformStreamDefaultController instances cannot be created directly")}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===pk(this))throw bk("desiredSize");return EE(this.FW.BW.ZV)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===pk(this))throw bk("enqueue");yk(this,t)},t.prototype.error=function(t){if(!1===pk(this))throw bk("error");!function(t,i){gk(t.FW,i)}(this,t)},t.prototype.terminate=function(){if(!1===pk(this))throw bk("terminate");!function(t){var i=t.FW,e=i.BW.ZV;!0===kE(e)&&IE(e);var s=new b("TransformStream terminated");wk(i,s)}(this)},t}();function pk(t){return!!Un(t)&&!!w.prototype.hasOwnProperty.call(t,"FW")}function Ak(t){t.YW=void 0,t.UW=void 0}function yk(t,i){var e=t.FW,s=e.BW.ZV;if(!1===kE(s))throw new b("Readable side is not in a state that permits enqueue");try{DE(s,i)}catch(t){throw wk(e,t),e.BW.GV}var n=function(t){return!0!==SE(t)}(s);n!==e.oW&&vk(e,!0)}function Mk(t,i){return eD(t.YW(i),void 0,(function(i){throw gk(t.FW,i),i}))}function bk(t){return new b("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function Tk(t){return new b("TransformStream.prototype."+t+" can only be used on a TransformStream")}var Sk,Nk=class extends tt{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}};function Ik(t){return function(t){return new Ei({start(i){for(const e of t)i.enqueue(e);i.close()}})}([t])}function Dk(t){return Ik(function(t){return new j(t)}(t))}function Ek(t,i){let e=i;const s=t.getReader(),n=new Oi,r=()=>{o();const t=new Fh;s.cancel(t).catch(Br),n.xL(t)},o=()=>{e&&(e.c_(r),e=void 0)};e&&(e.n_?r():e.u_(r));const h=[],a=t=>t.done?(o(),Promise.resolve(h)):(h.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{o(),n.LL(t)}),(t=>{o(),n.xL(t)})),n.OL}function co(t,i){return Ek(t,i).then((t=>M(t).buffer))}function kk(t,i){let e=i;const{readable:s,writable:n}=new Wa,r=n.getWriter(),o=()=>{e&&e.g_()};return r.closed.then(o,o),t.then((t=>(e=void 0,r.releaseLock(),t.pipeTo(n).catch(Br))),(t=>(e=void 0,r.releaseLock(),n.abort(t).catch(Br)))),s}function Lk(t){const{readable:i,writable:e}=new Wa;return t.pipeTo(e,{preventCancel:!0}).catch((i=>{let e;e=tr(i)?i[0]===i[1]||be(i[0])&&be(i[1])?i[0]:new Nk(i):i,t.cancel(e).catch(Br)})),i.tee()}function xk(t){return Qa(new j(t))}function Ck(t){return Kg(t).buffer}!function(t){t[t.DD=0]="DD",t[t.GW=1]="GW"}(Sk||(Sk={}));var Ok="content-type",jk="text/plain;charset=UTF-8",Rk=class{SR(t){return this.uE(t).then(JSON.parse)}sR(t,i){switch(t){case Ft.SD:return this.GR(i);case Ft.ND:return this.SR(i);case Ft.DD:return this.VW();case Ft.Ru:return this.uE(i);default:throw new b}}};function Pk(t,i,e){if(t instanceof Rk)return t;if(t instanceof Ei)return function(t,i){return new Bk({Av:0,VW:t,Nz:zk(i)})}(t,e);const s=zk(e),n=Promise.resolve(t).then((t=>function(t,i){if(t){if("string"==typeof t)return{Av:Ft.Ru,HD:t,Nz:i||jk};if(t instanceof ArrayBuffer||X_(t))return{Av:Ft.SD,HD:Wk(t),Nz:i};if(od(t)||tr(t))return{Av:Ft.ND,HD:t,Nz:i};throw new b("Unsupported BodyInit type")}return{Av:Ft.Ru,HD:null,Nz:i}}(t,s)));return new Bk({Av:1,OL:n,WW:i})}function zk(t){return(t.get(Ok)||"").toLowerCase()}var Bk=class t extends Rk{get HW(){return this.XW}get ZW(){return 0===this.qW.Av}KW(){return this.JW.OL}uE(t){return this.$W(Uk,t)}SR(t){return this.$W(Fk,t)}GR(t){return this.$W(Gk,t)}VW(){return this.tH(function(t){return 0===t.Av?t.VW:kk(t.OL.then(Vk).then(Dk),t.WW)}(this.qW))}$W(t,i){if(this.XW)return Promise.reject(new b("Already used"));this.XW=!0;const e=t(this.qW,i);return this.JW.w_(e.then(Br)),e}tH(t){if(this.XW)throw new b("Already used");if(t.locked)throw new b("Body stream is locked");this.XW=!0;const i=new Wa,e=Promise.resolve(t.pipeTo(i.writable));return this.JW.w_(e),i.readable}iH(t){this.qW=t,1===t.Av&&t.OL.catch(Br)}eH(){if(this.XW)throw new b("Already used");const i=function(t){if(0===t.Av){const[i,e]=t.VW.tee();return[{Av:t.Av,VW:i,Nz:t.Nz},{Av:t.Av,VW:e,Nz:t.Nz}]}{const[i,e]=t.WW.v_();return[{Av:t.Av,OL:t.OL,WW:i},{Av:t.Av,OL:t.OL,WW:e}]}}(this.qW),e=i[0],s=i[1];return this.iH(e),new t(s)}constructor(t){super(),this.XW=!1,this.JW=new Oi,this.JW.OL.catch(Br),this.iH(t)}};function Uk(t,i){return 0===t.Av?co(t.VW,i).then(xk):(i&&t.WW.w_(i),Fd(t.OL.then(Qk),t.WW))}function Qk(t){switch(t.Av){case Ft.Ru:return Promise.resolve(t.HD||"");case Ft.SD:return Promise.resolve(t.HD).then(xk);case Ft.ND:return Promise.resolve(t.HD).then(JSON.stringify)}}function Fk(t,i){return 0===t.Av?Uk(t,i).then(JSON.parse):(i&&t.WW.w_(i),Fd(t.OL.then(Yk),t.WW))}function Yk(t){return t.Av===Ft.ND?Promise.resolve(t.HD):Qk(t).then(JSON.parse)}function Gk(t,i){return 0===t.Av?co(t.VW,i):(i&&t.WW.w_(i),Fd(t.OL.then(Vk),t.WW))}function Vk(t){switch(t.Av){case Ft.SD:return Promise.resolve(t.HD);case Ft.Ru:case Ft.ND:return Qk(t).then(Ck)}}function Wk(t){return t instanceof ArrayBuffer?t:iw(js(t)).buffer}var Hk=class extends Rk{get HW(){return this.sH.HW}get ZW(){return this.sH.ZW}KW(){return this.sH.KW()}uE(t){return this.sH.uE(t)}SR(t){return this.sH.SR(t)}GR(t){return this.sH.GR(t)}VW(t){return this.sH.VW(t)}eH(){return this.sH.eH()}constructor(t){super(),this.sH=t}};function Xk(t){return t.fD>=200&&t.fD<=299||304===t.fD}var Zk=class t extends Hk{ly(t){return this.sR(this.qD,t)}$A(){return new t({ly:this.eH(),uD:this.uD},this)}constructor(t,i){let e,s,n,r,o;i?(e=i.XD,s=i.qD,n=i.fD,r=i.NR,o=i.nH):(e=[],s=Ft.Ru,n=200,r="OK",o=!1);const h=t.uD,a=new Xo(t.XD||e),u=t.qD||s,c=t.cE||(i&&i.uD===h?i.cE:h.zu),l=i?i.sH:null;super(Pk(void 0!==t.ly?t.ly:l,t.WW||new Bd,a)),this.XD=a,this.uD=h,this.cE=c,this.qD=u,this.fD=void 0!==t.fD?t.fD:n,this.NR=void 0!==t.NR?String(t.NR):r,this.nH=t.nH||o}},qk=class{uD(t){const i=function(t){return new Zk({ly:null,XD:{},uD:t,cE:t.zu,qD:t.qD,fD:0,NR:Tf.Hv})}(new Zi(t));return Promise.resolve(i)}NG(t){}gn(){}};var Kk=class t{static get rH(){return t.oH||(t.oH=new t(new qk)),t.oH}uD(t){const i=this.hH(t);return this.aH.uD(i)}NG(t){return this.aH.NG(this.uH(t))}hH(i){let e=new Zi(i);if(!this.cH){const i=t.lH(e.zu);e=new Zi({zu:i},e)}return e}uH(i){let e=i.zu;return this.cH||(e=t.lH(e)),{zu:e,HD:i.HD}}static lH(t){return ra.dH&&I(t,"http://")?t.replace(":","s:"):t}gn(){this.aH.gn()}constructor(t,i=!0){this.aH=t,this.cH=i}};function Jk(t){let i;return{get url(){return t.zu},get method(){return t.ZD},get headers(){return i||(i=t.XD.ED()),i},get body(){return t.HD},get useCredentials(){return t.tE},get type(){return t.Av},get subType(){return t.JD},get mediaType(){return t.$D},get responseType(){return t.qD}}}function $k(t){switch(t.toLowerCase()){case"arraybuffer":return Ft.SD;case"json":return Ft.ND;case"stream":return Ft.DD;default:return Ft.Ru}}function tL(t){switch(t.toUpperCase()){case"POST":return Cl.POST;case"PUT":return Cl.PUT;case"DELETE":return Cl.DELETE;case"HEAD":return Cl.HEAD;case"OPTIONS":return Cl.OPTIONS;default:return Cl.GET}}function iL(t){switch(t.toLowerCase()){case"manifest":return li.xD;case"segment":return li.CD;case"preload-hint":return li.OD;case"content-protection":return li.jD;default:return li.jT}}function eL(t){switch(t.toLowerCase()){case"initialization-segment":return fo.RD;case"fairplay-license":return fo.PD;case"fairplay-certificate":return fo.zD;case"widevine-license":return fo.BD;case"widevine-certificate":return fo.UD;case"playready-license":return fo.QD;case"clearkey-license":return fo.FD;case"aes128-key":return fo.YD;default:return fo.jT}}function sL(t){switch(t.toLowerCase()){case"audio":return Bu.WA;case"video":return Bu.VA;case"text":return Bu.Ru;case"image":return Bu.OT;default:return Bu.jT}}Kk.oH=void 0;var nL=class{get fH(){return this._H.OL}get va(){return this.Xa||(this.Xa=this.gH()),this.Xa}get wH(){return this.vH}get mH(){return!this.vH}get pH(){return this.AH>0}get lD(){return this.dD}xy(){this.vH=!0,this._H.LL(null)}yH(){this._H.xL(new Nk(this.MH))}bH(t){if(!this.mH)throw new b("Cannot respond more than once");if(!Vu(t))throw new b("Expected valid response");this.dD=this.TH(t),this.xy()}SH(){try{const t=this.NH(this.va);t?this.IH(t):this.pH||this.wH||this.xy()}catch(t){this.MH.push(t),this.yH()}}IH(t){if(this.wH)throw new g("Request has been redirected or a response already exists");if(Ci(t))this.DH(t);else{if("function"!=typeof t)throw new b("Expected promise or function");{const i=new Oi,e=t=>{t?i.xL(t):i.LL(void 0)};try{const s=t(e);Ci(s)&&i.w_(s)}catch(t){i.xL(t)}this.DH(i.OL)}}}async DH(t){try{this.AH++,await t,this.AH--,this.pH||this.wH||(this.MH.length?this.yH():this.xy())}catch(t){this.AH--,this.MH.push(t),this.pH||this.wH||this.yH()}}constructor(t,i){this.EH=t,this.NH=i,this._H=new Oi,this.MH=[],this.Xa=void 0,this.vH=!1,this.dD=void 0,this.AH=0}},rL=class t extends nL{get HD(){return this.kH}get XD(){return this.EH.XD}get uD(){return this.EH.uD}get lD(){return this.dD}get fD(){return this.EH.fD}get NR(){return this.EH.NR}get zu(){return this.EH.cE}static LH(t,i,e){const s=void 0===t.body?e:t.body;return new Zk({ly:s,uD:i.uD,qD:i.uD.qD,XD:t.headers,fD:t.status,NR:t.statusText,cE:t.url,nH:!0},i)}gH(){return function(t){let i;const e=Jk(t.uD);return{get closed(){return!t.mH},get request(){return e},get url(){return t.zu},get status(){return t.fD},get statusText(){return t.NR},get headers(){return i||(i=t.XD.ED()),i},get body(){return t.HD},respondWith:i=>t.bH(i),waitUntil:i=>t.IH(i)}}(this)}TH(i){return t.LH(i,this.EH,this.kH)}constructor(t,i,e){super(t,i),this.kH=e,this.SH()}},oL=class extends nL{get HD(){return this.EH.HD}get mH(){return this.xH&&!this.vH}get XD(){return this.EH.XD}get ZD(){return this.EH.ZD}get CH(){return this.OH}get lD(){return this.dD}get qD(){return this.EH.qD}get _D(){return this.EH._D}get KD(){return this.EH.KD}get f_(){return this.EH.f_}get Av(){return this.EH.Av}get JD(){return this.EH.JD}get $D(){return this.EH.$D}get zu(){return this.EH.zu}get tE(){return this.EH.tE}get eE(){return this.EH.eE}get iE(){return this.EH.iE}get _v(){return this.EH._v}get sE(){return this.EH.sE}gH(){return function(t){let i;return{get url(){return t.zu},get method(){return t.ZD},get headers(){return i||(i=t.XD.ED()),i},get body(){return t.HD},get closed(){return!t.mH},get useCredentials(){return t.tE},get type(){return t.Av},get subType(){return t.JD},get mediaType(){return t.$D},get responseType(){return t.qD},redirect:i=>t.jH(i),respondWith:i=>t.bH(i),waitUntil:i=>t.IH(i)}}(this)}TH(t){const i=this.EH.HD,e=new Zk({ly:i,XD:{},uD:this.EH,cE:this.EH.zu,qD:this.EH.qD,fD:200,NR:"OK"});return rL.LH(t,e,i)}jH(t){if(!this.mH)throw new b("Cannot redirect, already redirected or has a response");let i;i=Sn(t)?{url:t}:t,this.OH=function(t,i){return new Zi({zu:void 0===t.url?i.zu:t.url,ZD:void 0!==t.method?tL(t.method):void 0,XD:t.headers,HD:t.body,tE:t.useCredentials,Av:void 0!==t.type?iL(t.type):void 0,JD:void 0!==t.subType?eL(t.subType):void 0,$D:void 0!==t.mediaType?sL(t.mediaType):void 0,qD:void 0!==t.responseType?$k(t.responseType):void 0},i)}(i,this.EH),this.xy()}constructor(t,i,e){super(t,i),this.OH=void 0,this.xH=e,this.SH()}};var hL,aL=class extends Kk{RH(t){this.PH.RH(t)}zH(t){this.PH.zH(t)}BH(t){this.PH.BH(t)}oF(t){this.PH.oF(t)}cF(t){this.PH.cF(t)}constructor(t,i=!0){const e=new uL(t);super(e,i),this.PH=e}},uL=class{async uD(t){let i;try{i=await this.UH(t,t.f_)}catch(i){if(i instanceof Re)return await this.QH(i,t.f_);throw i}if(i=await this.FH(i,t.f_),Xk(i))return i;throw new so(i)}NG(t){return this.aH.NG(t)}async UH(t,i){Vr(i);let e,s=t;for(const t of this.YH.slice()){Vr(i);const n=new oL(s,t,!e);if(!n.wH)try{await n.fH}catch(t){0;continue}n.CH&&!e?s=n.CH:n.lD&&!e&&(e=n.lD)}return e||this.aH.uD(s)}async QH(t,i){let e;if(t instanceof so)e=t.lD;else{const i=t.uD;e=new Zk({ly:null,uD:i,qD:i.qD,fD:0,NR:""})}const s=await this.FH(e,i);if(s===e)throw t;if(Xk(s))return s;throw new so(s)}async FH(t,i){let e=t;for(const t of this.GH.slice()){Vr(i);const s=await Promise.resolve(e.$A().ly(i)),n=new rL(e,t,s);if(!n.wH)try{await n.fH}catch(t){0;continue}e=n.lD||e}return e}RH(t){this.YH.unshift(t)}zH(t){this.YH.push(t)}BH(t){jn(this.YH,t)}oF(t){this.GH.unshift(t)}cF(t){jn(this.GH,t)}gn(){this.aH.gn(),To(this.YH),To(this.GH)}constructor(t){this.YH=[],this.GH=[],this.aH=t}},cL=class{get va(){return this.Xa||(this.Xa=function(t){return{addRequestInterceptor(i){t.RH(i)},removeRequestInterceptor(i){t.BH(i)},addResponseInterceptor(i){t.oF(i)},removeResponseInterceptor(i){t.cF(i)}}}(this)),this.Xa}RH(t){this.aE.RH(t)}BH(t){this.aE.BH(t)}oF(t){this.aE.oF(t)}cF(t){this.aE.cF(t)}constructor(t){this.aE=t}},lL=class extends Mo{get va(){return this.Xa||(this.Xa=function(t){return{get online(){return t.cg},get estimator(){return function(t){return{get bandwidth(){return t.GP},get roundTripTime(){return t.VP}}}(t.VH)},setEstimator(i){t.WH(function(t){if(!t)return;return{get GP(){return lf(t.bandwidth)},get VP(){return lf(t.roundTripTime)},WP:i=>function(t){if(!t)return;return{HH(i){t.markRequestStart(i)},XH(i){t.markResponseStart(i)},ZH(i,e){t.markResponseData(i,e)},qH(i){t.markResponseEnd(i)}}}(t.createMeasurer(Jk(i)))}}(i))},addRequestInterceptor(i){t.RH(i)},removeRequestInterceptor(i){t.BH(i)},addResponseInterceptor(i){t.oF(i)},removeResponseInterceptor(i){t.cF(i)},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}(this)),this.Xa}get cg(){return this.KH.cg}get VH(){return this.wU.VH}WH(t){this.wU.WH(t)}RH(t){this.aE.RH(t)}BH(t){this.aE.BH(t)}oF(t){this.aE.oF(t)}cF(t){this.aE.cF(t)}gn(){this.Vo(),this.KH.fn(Tf.Xv,this.JH),this.KH.fn(Tf.Hv,this.$H)}constructor(t,i,e){super(i),this.KH=t,this.aE=i,this.wU=e,this.JH=t=>{this.Co(t)},this.$H=t=>{this.Co(t)},this.KH.yn(Tf.Xv,this.JH),this.KH.yn(Tf.Hv,this.$H)}};!function(t){t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth"}(hL||(hL={}));function dL(t,i,e,s,n,r){const o=[];let h=t-_.max(r,1),a=t+n;if(i&&e){const t=Qh(e,1,5),s=i-t;h=_.min(h,s);const n=i+e+t;a=_.max(a,n)}0!==h&&s.ZB(0,h)&&o.push([0,h]);return s.ZB(a,1/0)&&o.push([a,1/0]),o}function fL(t){return t instanceof g&&"QuotaExceededError"===t.name}var _L={type:hL.BANDWIDTH};function gL(t){const i=Ca(_L);return Sn(t)?i.type=wL(t):Vu(t)&&function(t){switch(t){case hL.PERFORMANCE:case hL.QUALITY:case hL.BANDWIDTH:return!0;default:return!1}}(t.type)&&(i.type=wL(t.type)),Vu(t)&&Vu(t.metadata)&&(i.metadata=function(t){const i={},e=ji(t.bitrate);return S(e)||(i.bitrate=e),i}(t.metadata)),i}function wL(t){switch(t){case"bandwidth":return hL.BANDWIDTH;case"performance":return hL.PERFORMANCE;case"quality":return hL.QUALITY}}var vL=class extends Os{constructor(t){super("tX"),this.iX=t}},mL=class extends Os{constructor(t){super("eX"),this.sX=t}},pL=class extends Os{constructor(t){super("nX"),this.rX=t}},AL=class extends Mo{oX(t){this.hX=t}get aX(){switch(this.uX.type){case hL.PERFORMANCE:return 0;case hL.QUALITY:return 1/0;case hL.BANDWIDTH:return this.uX.metadata&&void 0!==this.uX.metadata.bitrate?this.uX.metadata.bitrate:Gu.lL.OP();default:return Gu.lL.OP()}}get va(){return this.Xa}get sX(){return this.uX}set sX(t){this.uX=t,this.Co(new mL(t))}get iX(){return this.cX}set iX(t){this.cX=t,this.Co(new vL(t))}get lX(){return _.min(this.cX,this.dX)}get rX(){return this.fX}set rX(t){this.fX=t,this.Co(new pL(t))}get _X(){return this.dX}get VH(){var t;return null!=(t=this.gX)?t:this.hX.Tz}WH(t){this.gX=t}wX(t){let i=_.min(t,.8*this.dX);if(i=_.max(10,i),this.dX===i)return!1;const e=this.lX;this.dX=i;const s=this.lX;return s!==e&&this.Co(new vL(s)),!0}get vX(){return this.mX}set vX(t){this.mX=t}constructor(...t){super(...t),this.Xa=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.sX)},set strategy(i){t.sX=gL(i)},get targetBuffer(){return t.iX},set targetBuffer(i){const e=ji(i);S(e)||(t.iX=e)},get bufferLookbackWindow(){return t.rX},set bufferLookbackWindow(i){const e=ji(i);S(e)||(t.rX=e<=0?30:e)},get maxBufferLength(){return t._X},get clearBufferWhenSettingTargetQuality(){return t.vX},set clearBufferWhenSettingTargetQuality(i){t.vX=Ia(i)}}}(this),this.uX=_L,this.cX=20,this.fX=30,this.dX=1/0,this.mX=!1,this.gX=void 0}},yL=class extends os{fa(){return new ML}constructor(){super("Sw")}},ML=class extends Os{constructor(){super("change")}},bL=class extends Mo{gn(){this.Vo();for(const t of this.hd)this.pX.fn(t,this.AX)}constructor(t,i,e){super(e),this.AX=t=>{Zd(t)&&Gd((()=>{this.Co(t.va)}))},this.pX=t,this.hd=i;for(const t of this.hd)this.pX.yn(t,this.AX)}},jt=class extends B{gn(){this.Vo(),this.pX.E_(this.AX)}constructor(t,i){super(i),this.AX=t=>{Zd(t)&&Gd((()=>{this.Co(t.va)}))},this.pX=t,this.pX.T_(this.AX)}};var TL=class extends B{get MS(){return this.xS}set MS(t){if(this.bS<=t)throw new g("Start time of a clip should be smaller than the end time.");this.xS!==t&&(this.xS=t,this.Co(new yL))}get bS(){return this.RS}set bS(t){if(t<=this.MS)throw new g("End time of a clip should be larger than the start time.");this.RS!==t&&(this.RS=t,this.Co(new yL))}get va(){return this.Xa||(this.Xa=function(t){let i,e={get startTime(){return t.MS},set startTime(i){t.MS=i},get endTime(){return t.bS},set endTime(i){t.bS=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new jt(t,e),e}(this)),this.Xa}tr(){0===this.xS&&this.RS===1/0||(this.xS=0,this.RS=1/0,this.Co(new yL))}yX(){return new Ri([this.MS,this.bS],[!0,!0])}constructor(...t){super(...t),this.xS=0,this.RS=1/0}},SL=class t extends Xd{F_(t,i){const e=this.MX.yX().zB(t);super.F_(e,i),this.bX()}V_(){return super.V_()||this.TX}get SX(){return this.Dg().length?this.Dg():this.MX.yX().ks()}Dg(){return Ri.xn(super.Dg()).Sn(this.MX.yX()).ks()}Xg(){this.V_()?this.F_(this.SX.start(0)):this.NX(),super.Xg(),this.bX()}async ga(t,i){Vr(i),this.TX=!1,this.MX.tr(),await super.ga(t,i)}gn(){return this.MX.fn("Sw",this.IX),this.x_.fn(Tf.fm,this.wc),this.DX(),super.gn()}nw(t){switch(t.type){case Tf.im:return this.Co(t),this.EX(),!0;case Tf.$v:case Tf.xv:return this.Co(t),this.kX(),!0;case Tf.Ov:if(this.LX)return!0}return super.nw(t)}get LX(){return this.MX.bS<this.ct}DX(){this.xX&&(Ja(this.xX),this.xX=void 0)}bX(){const i=this.U_,e=this.LX&&i>=this.MX.bS-t.Zl;this.TX&&!e?(this.TX=!1,this.fg&&this.Xg()):this.TX||!e||this.Eg||this.CX||(this.TX=!0,this.Co(new pa(i)),this.Hg())}NX(){if(this.ct===1/0)return;const i=this.SX,e=Ri.xn(i).zB(this.U_);Jn(this.U_,e,t.Zl)||this.F_(e)}constructor(i,e){super(i),this.TX=!1,this.xX=void 0,this.CX=!1,this.IX=()=>{this.NX(),this.bX()},this.wc=()=>{this.DX(),this.bX();this.LX&&this.U_>=this.MX.bS-t.OX&&!this.G_&&(this.xX=Pc(this.wc))},this.EX=()=>{this.CX=!0},this.kX=()=>{this.CX&&(this.CX=!1,this.bX())},this.MX=e,this.MX.yn("Sw",this.IX),this.x_.yn(Tf.fm,this.wc)}};SL.OX=1,SL.Zl=.001;var NL=class{get jX(){return this.RX}set jX(t){this.RX=t}constructor(){this.RX=!1}},IL=class extends Xd{V_(){return!this.RX.jX&&super.V_()}Hg(){this.PX=!0,super.Hg()}Xg(){this.PX=!1,super.Xg()}nw(t){if(this.RX.jX)switch(t.type){case Tf.Ov:return this.U_=0,this.PX||(this.Eg?this.zX=!0:this.Xg()),!0;case Tf.$v:this.zX&&(this.zX=!1,this.Xg());break;case Tf.Sh:if(this.zX||super.V_())return!0}return super.nw(t)}constructor(t,i){super(t),this.zX=!1,this.PX=!1,this.RX=i}};var DL=class{get va(){return this.Xa}get XT(){return this.Qo.eg.XT}get qT(){return this.Qo.eg.qT}get HT(){return this.Qo.eg.HT}get BX(){throw new g("Not implemented")}get UX(){throw new g("Not implemented")}get KT(){return this.Qo.eg.KT}get ZT(){return this.Qo.eg.ZT}get JT(){return this.Qo.eg.JT}constructor(t){this.Qo=t,this.Xa=function(t){return{get currentBandwidthEstimate(){return t.qT},get corruptedVideoFrames(){return t.XT},get droppedVideoFrames(){return t.HT},get totalVideoFrames(){return t.ZT},get totalBytesLoaded(){return t.KT},get bufferedSegments(){return t.JT}}}(this)}};function EL(t){if(!t||!Su(t))return{HT:0,XT:0,ZT:0,qT:0,KT:0,JT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const i=t.getVideoPlaybackQuality();return{HT:i.droppedVideoFrames,XT:i.corruptedVideoFrames||0,ZT:i.totalVideoFrames}}return{HT:t.webkitDroppedFrameCount||0,XT:0,ZT:t.webkitDecodedFrameCount||0}}var kL=class extends os{fa(){return new LL}constructor(){super("QX")}},LL=class extends Os{constructor(){super("castingchange")}};var xL=class extends Mo{get FX(){var t,i;return(null==(t=this.YX)?void 0:t.FX)||(null==(i=this.GX)?void 0:i.FX)||!1}get VX(){return this.YX}get WX(){return this.GX}HX(t){this.YX=t,this.XX(t)}ZX(t){this.GX=t,this.XX(t)}XX(t){t.yn("statechange",this.qX)}KX(t){t.fn("statechange",this.qX)}get va(){return this.Xa||(this.Xa=function(t){let i;const e={get casting(){return t.FX},get airplay(){var i;return null==(i=t.VX)?void 0:i.va},get chromecast(){var i;return null==(i=t.WX)?void 0:i.va},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new bL(t,["QX"],e),e}(this)),this.Xa}gn(){this.Vo(),this.YX&&(this.KX(this.YX),this.YX=void 0),this.GX&&(this.KX(this.GX),this.GX=void 0)}constructor(...t){super(...t),this.YX=void 0,this.GX=void 0,this.JX=!1,this.Xa=void 0,this.qX=()=>{const t=this.JX,i=this.FX;t!==i&&(this.JX=i,this.Co(new kL))}}},CL=class{static async $X(t,i){try{const e=new Zi({zu:t,qD:Ft.Ru,ZD:Cl.GET}),s=await i.uD(e);return(await s.ly()).trim()}catch(t){return void be(t)}}static tZ(t){try{const i=zN(t);return new YN(i.key,i.domains_page,i.domains_source,i.expiration_date,i.features,i.customer_id,i.generation_date,i.sdks,i.send_impression)}catch(t){throw new ao(qa.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static iZ(t){void 0===t&&(t=Cc.lh),ra.vp("The baked-in license is used. Please update the configuration with your license.");const i=t.uY("F2b-iL'[FL[S"),e=JSON.parse('["F$(:_L50F|aY"]').map((i=>t.uY(i))),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((i=>t.uY(i))),n=Number(new Date(Number(t.uY('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map((i=>t.uY(i)));return new YN(i,e,s,n,r)}static convertLicenseToDummyLicense(t){return new YN(t.vY,t.mY,t.pY,864e13,t.yY,t.MY,Date.now(),t.TY,t.SY)}},Uo=class t{static RF(){return t.lL||(t.lL=OL.LO()?new OL:new JS),t.lL}static kL(i){t.RF().kL(i)}static jF(){t.RF().jF()}static IL(i){return t.RF().IL(i)}static EP(i,e){t.RF().EP(i,e)}static eZ(i){const e=t.IL(i);if(void 0!==e)return C(e)}static sZ(i){return"true"===t.IL(i)}};Uo.lL=void 0;var OL=class extends Uo{static LO(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}kL(t){self.localStorage.removeItem(t)}jF(){self.localStorage.clear()}IL(t){var i;return null!=(i=self.localStorage.getItem(t))?i:void 0}EP(t,i){self.localStorage.setItem(t,i)}},jL="https://validate.theoplayer.com/1/",RL=72e5,PL=_.floor(14399999*_.random()-RL),zL="THEOplayer.license",BL=class{async nZ(){const t=await this.rZ(this.oZ.license,this.oZ.licenseUrl);this._G.hZ(t)}async rZ(t,i){let e,s=i;t?e=CL.tZ(t):s||(e=CL.iZ()),s||(s=jL+e.vY);const n=this.aZ();let r;if(e&&(r=this.uZ.jY(e),r===Ou._Y)){if(this.cZ(e.AY)&&this.cZ(null==n?void 0:n.AY)){const t=await this.lZ(s);if(t)return t}return e}if(n){if(this.uZ.jY(n)===Ou._Y){if(this.cZ(null==n?void 0:n.AY)){const t=await this.lZ(s);if(t)return t}return n}Uo.kL(zL)}const o=await CL.$X(s,this.aE);let h;if(o){h=CL.tZ(o);if(this.uZ.jY(h)===Ou._Y)return Uo.EP(zL,o),h;Uo.kL(zL)}else if(!this.QY&&e&&r===Ou.gY&&s===jL+e.vY)return CL.convertLicenseToDummyLicense(e);if(!e&&!h)throw new ao(qa.LICENSE_ERROR,"The given license is invalid!");this.dZ(null!=e?e:h,new ao(qa.LICENSE_ERROR,"The given license is invalid!"))}async EY(t){let i=await this._G.fG();if(this.cZ(i.AY)){var e;const t=null!=(e=this.oZ.licenseUrl)?e:jL+i.vY,s=await this.lZ(t);s&&(this._G.hZ(s),i=s)}try{const e=this.uZ.jY(i);if(e===Ou.wY){const t=FN.NY;throw new ao(WN(t),mr.CY(t))}if(e===Ou.gY){const t=FN.gY;throw new ao(WN(t),mr.CY(t))}this.uZ.EY(t,i)}catch(t){this.fZ(t)}}async OY(t){const i=await this._G.fG();try{this.uZ.OY(t,i)}catch(t){this.fZ(t)}}async lZ(t){try{const i=await CL.$X(t,this.aE);if(void 0===i)return;const e=CL.tZ(i);return this.uZ.jY(e)===Ou._Y?(Uo.EP(zL,i),e):void 0}catch(t){return}}cZ(t){return!t||Number(new Date)+2592e5+PL>=t}aZ(){const t=Uo.IL(zL);if(t)return CL.tZ(t)}dZ(t,i){this._G.hZ(t),this.fZ(i)}fZ(t){throw Ct(t.message),this._Z.vG(t.message),t}constructor(t,i,e,s,n,r){this.aE=t,this.uZ=i,this._Z=e,this._G=s,this.oZ=n,this.Dx=r,this.QY=$N(r)}},UL=class{hZ(t){this.gZ=t,this.wZ.LL()}get vZ(){return this.gZ}async fG(){return this.gZ?Promise.resolve(this.gZ):(await this.wZ.OL,this.gZ)}constructor(){this.wZ=new Oi}},QL=class extends os{fa(){return new FL}constructor(){super("Sw")}},FL=class extends Os{constructor(){super("change")}};function YL(t){let i;const e={get fontFamily(){return t.mZ},set fontFamily(i){t.mZ=i},get fontColor(){return t.pZ},set fontColor(i){t.pZ=i},get fontSize(){return t.AZ},set fontSize(i){t.AZ=i},get backgroundColor(){return t.yZ},set backgroundColor(i){t.yZ=i},get windowColor(){return t.MZ},set windowColor(i){t.MZ=i},get edgeStyle(){return t.bZ},set edgeStyle(i){t.bZ=i},get marginTop(){return t.TZ},set marginTop(i){t.TZ=i},get marginBottom(){return t.SZ},set marginBottom(i){t.SZ=i},get marginLeft(){return t.NZ},set marginLeft(i){t.NZ=i},get marginRight(){return t.IZ},set marginRight(i){t.IZ=i},addEventListener(t,e){const s=Za(t,wo);i.yn(s,e)},removeEventListener(t,e){const s=Za(t,wo);i.fn(s,e)}};return i=new bs(e),t.yn(["Sw"],(t=>i.Co(t.va))),e}var GL={mZ:void 0,pZ:void 0,AZ:void 0,yZ:void 0,MZ:void 0,bZ:void 0,DZ:void 0,TZ:void 0,SZ:void 0,NZ:void 0,IZ:void 0},lr="THEOplayer.textTrackStyle.",VL=class t extends Mo{get EZ(){return this.kZ}get mZ(){return this.kZ.mZ}set mZ(t){this.Yn({mZ:t})}get pZ(){return this.kZ.pZ}set pZ(t){this.Yn({pZ:t})}get AZ(){return this.kZ.AZ}set AZ(t){this.Yn({AZ:t})}get yZ(){return this.kZ.yZ}set yZ(t){this.Yn({yZ:t})}get MZ(){return this.kZ.MZ}set MZ(t){this.Yn({MZ:t})}get bZ(){return this.kZ.bZ}set bZ(t){this.Yn({bZ:t})}get DZ(){return this.kZ.DZ}get TZ(){return this.kZ.TZ}set TZ(t){this.Yn({TZ:t})}get SZ(){return this.kZ.SZ}set SZ(t){this.Yn({SZ:t})}get IZ(){return this.kZ.IZ}set IZ(t){this.Yn({IZ:t})}get NZ(){return this.kZ.NZ}set NZ(t){this.Yn({NZ:t})}get va(){return this.Xa||(this.Xa=YL(this)),this.Xa}Yn(i){this.kZ=ol({},this.kZ,i),t.LZ(this.kZ),this.Co(new QL)}static xZ(){let t=ol({},GL);return t.mZ=Uo.IL(lr+"fontFamily")||t.mZ,t.pZ=Uo.IL(lr+"fontColor")||t.pZ,t.AZ=Uo.IL(lr+"fontSize")||t.AZ,t.yZ=Uo.IL(lr+"backgroundColor")||t.yZ,t.MZ=Uo.IL(lr+"windowColor")||t.MZ,t.bZ=Uo.IL(lr+"edgeStyle")||t.bZ,t}static LZ(t){Uo.EP(lr+"fontFamily",t.mZ||""),Uo.EP(lr+"fontColor",t.pZ||""),Uo.EP(lr+"fontSize",t.AZ||""),Uo.EP(lr+"backgroundColor",t.yZ||""),Uo.EP(lr+"windowColor",t.MZ||""),Uo.EP(lr+"edgeStyle",t.bZ||"")}constructor(){super(),this.Xa=void 0,this.kZ=t.xZ()}};function WL(t,i){var e,s;t.style.marginLeft=(null!=(e=i.NZ)?e:0)+"px",t.style.marginRight=(null!=(s=i.IZ)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}var In,HL=[Tf.jh,Tf.Sh,$.Sm,Tf.fm,Tf.Zv,Tf.Gv,Tf.im,Tf.$v,Tf.Ov,Tf.qv,Tf._m,Tf.Lv,$.Nw,Tf.Jv,hi.ha,oA.Cv,oA.bL,Tf.Iv,Tf.Nv,Tf.gm,Tf.Uv,Tf.Fv,Tf.zv,Tf.Rv],XL={Wm:!1};function ZL(t){return t.wd.Av===de.Sj}(In||(In={})).CZ="OZ";var Lu,Xu=["OZ"];!function(t){t[t.jZ=0]="jZ",t[t.DD=1]="DD",t[t.RZ=2]="RZ"}(Lu||(Lu={}));var zu,qL=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"];!function(t){t.EQ="PZ",t.zZ="BZ"}(zu||(zu={}));var KL=class extends Mo{get wd(){return this.GO}get pz(){return this.lj}async UZ(t,i){const e=await this.SO.TO(t.dL,i),s=await e._O();return await this.QZ(s),s}FZ(t){const i=this.cO;return i?0!==t.Iz.length&&t.Iz.some((t=>t.Qp.dL===i.Qp)):0!==this.GO.Iz.length?t.Iz.some((t=>this.GO.Iz.some((i=>t.Qp===i.Qp)))):0===t.Iz.length||!this.YZ}GZ(t){return this.VZ.GZ(t),this.GO=t,Promise.resolve()}async h_(){this.Vo(),this.lj.removeEventListener("loadedmetadata",this.WZ);for(const t of qL)this.lj.removeEventListener(t,this.HZ);await this.XZ.gn(),this.ZZ(),await this.VZ.tr(),await this.qZ(void 0)}KZ(t){t!==this.JZ&&(this.JZ=t,t?this.$Z.LL(void 0):this.$Z=new Oi)}QZ(t){return this.XZ.JO((()=>this.qZ(t)))}async qZ(t){if(t&&!this.lj.src&&!this.lj.srcObject)throw new ss(qa.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.lj.src||this.lj.srcObject))throw new ss(qa.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.JZ&&await this.$Z.OL;const i=this.cO;i&&(await i.dO(this.lj),this.cO=void 0),t&&(await t.bn(this.lj),this.cO=t)}ga(t){return this.XZ.JO((()=>this.tq(t)))}tq(t){this.KZ(!1);const i=this.Fm.gg;if(Sn(t))this.lj.src=t;else if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&Po.Ga&&Po.Uk>=17}(this.lj))try{this.lj.srcObject=t}catch(i){this.lj.src=URL.createObjectURL(t)}else this.lj.src=URL.createObjectURL(t);else JL(t)&&(this.lj.srcObject=t);this.Fm.gg=i}iq(t){return this.XZ.JO((()=>this.nq(t)))}nq(t){this.tq(t),this.lj.load()}ZZ(){this.KZ(!1),Ab(this.lj)}async rq(){this.cO&&await this.cO.tr()}constructor(t,i,e,s){super(),this.JZ=!1,this.$Z=new Oi,this.YZ=!1,this.XZ=new Ku,this.cO=void 0,this.WZ=()=>{this.YZ=!0},this.HZ=()=>{this.KZ(!0)},this.GO=t,this.Fm=i,this.lj=i.pz,this.VZ=e,this.SO=s,this.lj.addEventListener("loadedmetadata",this.WZ);for(const t of qL)this.lj.addEventListener(t,this.HZ)}};function JL(t){return"undefined"!=typeof MediaStream&&t instanceof MediaStream}var $L,tx=class extends KL{get O_(){return Ri.xn(this.lj.buffered)}get ct(){return this.lj.duration}get oq(){const t=this.ct;if(!isFinite(t))return!1;const i=this.O_;if(0===i.U)return!1;return t-i.jn(i.U-1)<Vt}get yg(){return this.lj.preload}set yg(t){this.lj.preload=t}get Ig(){return Ri.xn(this.lj.seekable)}get hq(){return this.O_}get aq(){if(Su(this.lj)&&(this.lj.videoWidth>0||this.lj.videoHeight>0))return this.O_}async oX(){const t=this.wd;switch(t.Ez){case ba.pp:case ba.Ap:this.lj.setAttribute("crossorigin",t.Ez);break;case ba.mp:default:this.lj.removeAttribute("crossorigin")}void 0!==t.yg?this.lj.preload=t.yg:this.lj.preload=ut.YP,void 0!==t.kz?this.lj.title=t.kz:wb(this.lj),t.uq?await this.iq(t.uq):await this.ga(t.yv),this.VZ.$n(this,t)}FZ(t){return!1}GZ(t){return Promise.resolve(void 0)}cq(t){return!1}lq(){return!JL(this.GO.uq)}async h_(){wb(this.lj),await super.h_()}static dq(t,i){return!!i.canPlayType&&Boolean(i.canPlayType(t.Nz))}},Gt=class extends Os{constructor(t){super(Tf.Zv),this.currentTime=t}},tn=class extends Os{constructor(){super(Tf.Gv)}};($L||($L={})).fq="_q";var ix=class extends Os{constructor(t){super("_q"),this.gq=t}},ex=class extends Mo{get wq(){return this.vq}mq(t,i){const e=new Ri([t,i]);this.vq=this.vq.YB(e),this.Co(new ix(e))}pq(t,i){this.vq=this.vq.VB(new Ri([t,i]))}tr(){this.vq=Ri.oU()}gn(){this.Vo()}constructor(...t){super(...t),this.vq=Ri.oU()}};var sx,nx=class{start(t){this.wZ=t,this.Aq()&&this.yq()}pull(){this.JV.length>0?this.Mq():this.bq=!0,this.Aq()&&this.yq()}cancel(t){return To(this.JV),this.$V=0,this.bq=!1,this.YV.cancel(t)}Mq(){if(0===this.JV.length)return;const t=this.JV;this.JV=[],this.$V=0,this.bq=!1,this.wZ.enqueue(t)}Aq(){if(this.bq)return!0;return this.Tq-this.$V>0}yq(){if(this.Sq)return;const t=this.YV.read().then(this.Nq).catch(this.Iq);this.Sq=t;const i=()=>{this.Sq===t&&(this.Sq=void 0)};t.then(i,i)}constructor(t,{size:i=(()=>1),highWaterMark:e=1}){this.JV=[],this.$V=0,this.wZ=void 0,this.bq=!1,this.Sq=void 0,this.Nq=t=>t.done?(this.Mq(),void this.wZ.close()):(this.JV.push(t.value),this.$V+=this.Dq(t.value),this.bq&&this.Mq(),this.Aq()?this.YV.read().then(this.Nq):void 0),this.Iq=t=>{this.Mq(),this.wZ.error(t)},this.YV=t.getReader(),this.Dq=i,this.Tq=e}},rx=class{Eq(t){this.kq.push(t),this.By+=t.byteLength}Lq(t){if(this.By<=t)return this.xq();const i=this.kq;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.slice(0,s);if(s<i.length&&e<t){const r=t-e;0,n.push(ci(i[s],0,r)),e+=r}return{kq:n,By:e}}Cq(t){const i=this.Lq(t);return 1===i.kq.length?i.kq[0]:q_(i.kq,i.By)}xq(){return{kq:this.kq,By:this.By}}Oq(t){if(this.By<=t)return this.jq();const i=this.kq;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.splice(0,s);if(i.length>0&&e<t){const s=t-e;0,n.push(ci(i[0],0,s)),i[0]=ci(i[0],s),e+=s}return this.By-=e,{kq:n,By:e}}Rq(t){const i=this.Oq(t);return 1===i.kq.length?i.kq[0]:q_(i.kq,i.By)}jq(){const t=this.xq();return this.kq=[],this.By=0,t}Pq(){const t=1===this.kq.length?this.kq[0]:q_(this.kq,this.By);return this.kq=[],this.By=0,t}constructor(){this.kq=[],this.By=0}};!function(t){t[t.zq=0]="zq",t[t.Bq=1]="Bq",t[t.Uq=2]="Uq"}(sx||(sx={}));var Wu=class{Qq(t,i){}Fq(){}Yq(t){this.JV.Eq(t),this.Gq(!1)}Vq(){this.Gq(!0)}Wq(){return 0!==this.ja||0!==this.JV.By}Gq(t){for(;0!==this.JV.By;){if(!t&&this.Hq>this.JV.By)return;switch(this.ja){case 0:this.Xq(t);break;case 1:this.Zq(t);break;case 2:this.qq(t)}}}Kq(){this.ja=0,this.Hq=8}Xq(t){const i=vh(this.JV.Cq(this.Hq)),e=new Bi,s=Mc.Py(i,e);if(!s.xy)return this.Hq=s.Uy,void(t&&this.Hq>this.JV.By&&this.Jq(this.JV.By));const n=s.zy.Av;let r=s.zy.By;0===r&&(r=1/0),this.Qq(n,r),this.$q(n)?this.tK(r):this.Jq(r)}tK(t){this.ja=1,this.Hq=t}Zq(t){const i=vh(this.JV.Rq(this.Hq)),e=new Bi,s=Mc.Cy(i,e,!t);if(!s.xy)throw new pc(e.Ku);this.Fq(),this.iK(s.Oy),this.Kq()}Jq(t){this.ja=2,this.Hq=0,this.eK=t}qq(t){const i=this.JV.Oq(this.eK);this.eK-=i.By;for(const t of i.kq)this.sK(t);(0===this.eK||t&&this.eK===1/0)&&(this.Fq(),this.Kq())}constructor(){this.JV=new rx,this.ja=0,this.Hq=0,this.eK=0,this.Kq()}};function ox(t){return t instanceof Hy}function hx(t){return t instanceof Vy}function ax(t){return t instanceof Ac||t instanceof Yy}function ux(t){return t instanceof gy}function cx(t){return t instanceof XA}function lx(t){return t instanceof wr}function dx(t){return t instanceof jy}function fx(t){return t instanceof iM}function _x(t){return t instanceof uu}function gx(t){return t instanceof Oc}function wx(t){return t instanceof ot}function vx(t,i){const e=bo(t.boxes,gx);if(e&&e.flags.baseDataOffsetPresent)e.baseDataOffset=e.baseDataOffset.add(i);else for(const e of t.boxes)e instanceof ot&&e.flags.dataOffsetPresent&&(e.dataOffset=e.dataOffset+i)}var mx=class extends Wu{start(t){this.wZ=t}transform(t){this.Yq(t)}flush(){this.Vq()}$q(t){return t===X.Kp||t===X.kA||t===X.UA}iK(t){const i=this.nK(t);this.wZ.enqueue(i)}sK(t){this.wZ.enqueue(t)}nK(t){const i=js(t.ly.ly);switch(t.Av){case"moov":return this.rK(i);case"sidx":return this.oK(i);case"moof":return this.hK(i)}return i}get aK(){if(void 0===this.uK)throw new g("Expected to have found a movie header timescale.");return this.uK}cK(t){const i=this.lK.get(t);if(void 0===i)throw new g("Expected to have found a media header timescale for track ID "+t+".");return i}rK(t){const i=pM(t);for(let t=0;t<i.boxes.length;t++){const e=i.boxes[t];e instanceof By?i.boxes[t]=this.dK(e):e instanceof Uy?i.boxes[t]=this.fK(e):e instanceof Vy&&this._K(e)}for(const t of i.boxes)t instanceof wr&&this.gK(t);return i.serialize().join()}dK(t){this.uK=t.timescale;const i=Ce(ii.fromNumber(t.duration,!0),this.aK,this.wK);return 0!==i.getHighBits()?this.fK(function(t){return new Uy({creation:ii.fromNumber(t.creationTime,!0),modification:ii.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:ii.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.wK,t.duration=i.toInt(),t)}fK(t){return this.uK=t.timescale,t.timescale=this.wK,t.duration=Ce(t.duration,this.aK,this.wK),t}_K(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Ac?(i=s.trackId,t.boxes[e]=this.vK(s)):s instanceof Yy?(i=s.trackId,t.boxes[e]=this.mK(s)):s instanceof gy?this.pK(s,i):s instanceof ny&&this.AK(s)}}vK(t){const i=Ce(ii.fromNumber(t.duration,!0),this.aK,this.wK);return 0!==i.getHighBits()?this.mK(function(t){return new Yy({creation:ii.fromNumber(t.creationTime,!0),modification:ii.fromNumber(t.modificationTime,!0),duration:ii.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=i.toInt(),t)}mK(t){return t.duration=Ce(t.duration,this.aK,this.wK),t}pK(t,i){for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof ly?t.boxes[e]=this.yK(s,i):s instanceof dy&&(t.boxes[e]=this.MK(s,i))}}yK(t,i){this.lK.set(i,t.timescale);const e=Ce(ii.fromNumber(t.duration,!0),t.timescale,this.wK);return 0!==e.getHighBits()?this.MK(function(t){return new dy({creation:ii.fromNumber(t.creationTime,!0),modification:ii.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:ii.fromNumber(t.duration,!0)},t.language,t.flags)}(t),i):(t.timescale=this.wK,t.duration=e.toInt(),t)}MK(t,i){return this.lK.set(i,t.timescale),t.timescale=this.wK,t.duration=Ce(t.duration,t.timescale,this.wK),t}AK(t){for(const i of t.boxes)i instanceof iy?this.bK(i):i instanceof ey&&this.TK(i)}bK(t){for(const i of t.entries)i.mediaTime=Ax(i.mediaTime,this.aK,this.wK),i.segmentDuration=Ax(i.segmentDuration,this.aK,this.wK)}TK(t){for(const i of t.entries)i.mediaTime=Ce(i.mediaTime,this.aK,this.wK),i.segmentDuration=Ce(i.segmentDuration,this.aK,this.wK)}gK(t){for(let i=0;i<t.boxes.length;i++){const e=t.boxes[i];e instanceof jy?this.SK(e):e instanceof xy?t.boxes[i]=this.NK(e):e instanceof Cy&&(t.boxes[i]=this.IK(e))}}SK(t){const i=this.cK(t.trackId);t.defaultSampleDuration=Ax(t.defaultSampleDuration,i,this.wK)}NK(t){const i=Ce(ii.fromNumber(t.fragmentDuration,!0),this.aK,this.wK);return 0!==i.getHighBits()?this.IK(function(t){return new Cy(ii.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=i.toInt(),t)}IK(t){return t.fragmentDuration=Ce(t.fragmentDuration,this.aK,this.wK),t}oK(t){let i=AM(t);return i=i instanceof hM?this.DK(i):this.EK(i),i.serialize().join()}DK(t){const i=t.timescale,e=Ce(ii.fromNumber(t.earliestPresentationTime,!0),i,this.wK);if(0!==e.getHighBits())return this.EK(function(t){return new aM(t.referenceId,t.timescale,ii.fromNumber(t.earliestPresentationTime,!0),ii.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.wK,t.earliestPresentationTime=e.toInt();for(const e of t.references)e.subsegmentDuration=Ax(e.subsegmentDuration,i,this.wK);return t}EK(t){const i=t.timescale;t.timescale=this.wK,t.earliestPresentationTime=Ce(t.earliestPresentationTime,i,this.wK);for(const e of t.references)e.subsegmentDuration=Ax(e.subsegmentDuration,i,this.wK);return t}hK(t){const i=yM(t),e=i.getSize();for(const t of i.boxes)t instanceof uu&&this.kK(t);const s=i.getSize();if(s!==e){const t=s-e;for(const e of i.boxes)e instanceof uu&&vx(e,t)}return i.serialize().join()}kK(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Oc?(i=this.cK(s.trackId),this.LK(s,i)):s instanceof qy?t.boxes[e]=this.xK(s,i):s instanceof fr?t.boxes[e]=this.CK(s,i):s instanceof ot&&this.jK(s,i)}}LK(t,i){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=Ax(t.defaultSampleDuration,i,this.wK))}xK(t,i){const e=Ce(ii.fromNumber(t.baseMediaDecodeTime,!0),i,this.wK);return 0!==e.getHighBits()?this.CK(function(t){return new fr(ii.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),i):(t.baseMediaDecodeTime=e.toInt(),t)}CK(t,i){return t.baseMediaDecodeTime=Ce(t.baseMediaDecodeTime,i,this.wK),t}jK(t,i){let e=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=Ax(s,i,this.wK);n.duration=t-e,e=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=px(n.compositionTimeOffset,i,this.wK))}}constructor(t){super(),this.lK=Gs(),this.wK=t}};function px(t,i,e){return ii.fromInt(t,!1).multiply(e).divide(i).toNumber()}function Ax(t,i,e){return ii.fromInt(t,!0).multiply(e).divide(i).toNumber()}function Ce(t,i,e){return gs.fN(t).zN(gs._N(e,!0)).FN(gs._N(i,!0)).NN()}var yx,Mx,bx,Tx=class{RK(t){return t.pipeThrough(new Wa(this.PK))}constructor(t){this.PK=new mx(t)}};function Sx(t,i,e){const s=ta(t,i);if(s!==e)throw new b("Expected descriptor with tag "+e+", but found "+s)}function Nx(t,i){Sx(t,i,3);const e=Ix(t,i),s=i.Ku+e,n=xi(t,i),r=ta(t,i),o=0!=(64&r),h=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=xi(t,i)),o){c=Pg(t,i,ta(t,i))}h&&(l=Pg(t,i,2));const d=function(t,i){Sx(t,i,4);const e=Ix(t,i),s=i.Ku+e,n=ta(t,i),r=ta(t,i),o=r>>2,h=0!=(2&r),a=xg(t,i,3),u=es(t,i),c=es(t,i);let l;if(i.Ku<s){const e=function(t,i){return t.getUint8(i.Ku)}(t,i);5===e&&(l=function(t,i){Sx(t,i,5);const e=Ix(t,i),s=Eg(t,i,e);return{zK:5,BK:s}}(t,i))}return i.JA(s),{zK:4,UK:n,QK:o,FK:h,YK:a,GK:u,VK:c,WK:l}}(t,i);return i.JA(s),{zK:3,o:n,HK:u,zu:c,XK:a,ZK:l,qK:d}}function Ix(t,i){let e=0;for(let s=0;s<4;s++){const s=ta(t,i);if(e=e<<7|127&s,!(128&s))break}return e}function Dx(t,i){const e=ta(t,i),s=ta(t,i),n=ta(t,i),r=ta(t,i),o=3&ta(t,i),h=31&ta(t,i),a=[];for(let e=0;e<h;e++){const e=xi(t,i);a.push(Eg(t,i,e))}const u=ta(t,i),c=[];for(let e=0;e<u;e++){const e=xi(t,i);c.push(Eg(t,i,e))}return{KK:e,JK:s,$K:n,tJ:r,iJ:o,eJ:a,sJ:c}}function Ex(t,i,e){if(e&&i.byte>=e)return;const s=t.IL(i.byte);return i.byte+=1,s}function kx(t,i){return function(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=256*s+Ex(t,i);return s}(t,i,2)}!function(t){t[t.nJ=3]="nJ",t[t.rJ=4]="rJ",t[t.oJ=5]="oJ"}(yx||(yx={})),function(t){t[t.hJ=64]="hJ",t[t.aJ=103]="aJ",t[t.uJ=107]="uJ"}(Mx||(Mx={})),function(t){t[t.cJ=0]="cJ",t[t.lJ=1]="lJ",t[t.aJ=2]="aJ",t[t.dJ=5]="dJ",t[t.fJ=34]="fJ"}(bx||(bx={}));var Lx,xx=class t{_J(t){this.gJ=this.gJ.concat(t.gJ),this.wJ+=t.U}vJ(t,i,e){const s=this.wJ,n=e-i;n>0&&(this.gJ.push({mJ:i,pJ:e,AJ:n,yJ:s,MJ:t}),this.wJ+=n)}IL(t){for(const i of this.gJ)if(i.yJ<=t&&t<i.yJ+i.AJ)return i.MJ[t+i.mJ-i.yJ]}bJ(t,i){let e=i;for(const i of this.gJ){const s=i.pJ;for(let n=i.mJ;n<s;n+=1,e+=1)t[e]=i.MJ[n]}return e}get U(){return this.wJ}set U(t){const i=this.gJ;let e=this.wJ-t;if(!(t>=this.wJ))if(this.wJ=t,0!==t)for(let t=i.length-1;t>=0;t-=1){const s=i[t];if(e<=s.AJ)return s.pJ-=e,s.AJ-=e,void(i.length!==t+1&&(i.length=t+1));e-=s.AJ}else i.length=0}get ly(){const t=new Array(this.wJ);let i=0;for(const e of this.gJ){const s=e.pJ;for(let n=e.mJ;n<s;n+=1,i+=1)t[i]=e.MJ[n]}return t}TJ(){const t=new j(this.wJ);let i=0;for(const e of this.gJ){const s=e.pJ;for(let n=e.mJ;n<s;n+=1,i+=1)t[i]=e.MJ[n]}return t}$A(i){const e=new t;for(const t of this.gJ)e.vJ(t.MJ,t.mJ,t.pJ);return e.kI=i||ol({},this.kI),e}constructor(){this.wJ=0,this.gJ=[],this.kI={}}},Cx=[128,64,32,16,8,4,2,1];function Uh(t,i){const e=_.floor(i.bit/8),s=0==(t.IL(e)&Cx[i.bit%8])?0:1;return i.bit+=1,s}function Ox(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=2*s+Uh(t,i);return s}function il(t,i){let e=0;for(;0===Uh(t,i)&&e<32;)e+=1;return Ox(t,i,e)+2**e-1}function jx(t,i){const e=il(t,i);return 1&e?_.floor((e+1)/2):-_.floor(e/2)}function Rx(t,i){const e=[],s={byte:1};let n;do{e.push(zx(t,i,s)),n=i.IL(s.byte)}while(void 0!==n&&128!==n);return e}function Px(t,i){let e,s=0;do{e=Ex(t,i),s+=e}while(255===e);return s}function zx(t,i,e){const s=Px(i,e),n=Px(i,e),r=e.byte,o=r+n;return e.byte=o,{SJ:t,NJ:s,IJ:n,DJ:r,EJ:o,kJ:i}}!function(t){t[t.LJ=1]="LJ",t[t.xJ=2]="xJ",t[t.CJ=3]="CJ",t[t.OJ=4]="OJ",t[t.jJ=5]="jJ",t[t.RJ=6]="RJ",t[t.PJ=7]="PJ",t[t.zJ=8]="zJ",t[t.BJ=9]="BJ"}(Lx||(Lx={}));var Bx=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function Ux(t,i,e){let s=8,n=8;for(let r=0;r<e;r+=1){if(0!==n){n=(s+jx(t,i)+256)%256}s=0===n?s:n}}var Qx=class{UJ(){const t=this.QJ;let i=_.max(0,this.FJ+t.length-2);const e=this.YJ,s=e.U;let n=0;for(;i<s;i+=1){const s=e.IL(i);0===s?n+=1:(3===s&&n>=2&&t.push(i),n=0)}this.FJ=i-t.length}GJ(t){const i=this.QJ;let e=t;for(const t of i){if(!(t<=e))return e;e+=1}return e}IL(t){if(!(t>this.YJ.U))return t>this.FJ&&this.UJ(),this.YJ.IL(this.GJ(t))}constructor(t){this.QJ=[],this.FJ=0,this.YJ=t}};function Fx(t){const i=new Qx(t);let e,s,n,r,o,h,a=0,u=0,c=0,l=0;const d=i.IL(1),f={bit:32};if(il(i,f),100===d||110===d||122===d||144===d){const t=il(i,f);3===t&&(e=Uh(i,f)),il(i,f),il(i,f),Uh(i,f);if(1===Uh(i,f))for(let e=0;e<(3!==t?8:12);e+=1){1===Uh(i,f)&&Ux(i,f,e<6?16:64)}}const g=il(i,f),w=il(i,f);if(0===w)il(i,f);else if(1===w){Uh(i,f),jx(i,f),jx(i,f);const t=il(i,f);for(let e=0;e<t;e+=1)jx(i,f)}il(i,f),Uh(i,f);const v=il(i,f),m=il(i,f),p=Uh(i,f);0===p&&Uh(i,f),Uh(i,f);1===Uh(i,f)&&(a=il(i,f),u=il(i,f),c=il(i,f),l=il(i,f));if(1===Uh(i,f)){if(1===Uh(i,f)){const t=Ox(i,f,8);if(255===t)s=Ox(i,f,16),n=Ox(i,f,16);else{const i=Bx[t];i&&(s=i[0],n=i[1])}}1===Uh(i,f)&&Uh(i,f);if(1===Uh(i,f)){Ox(i,f,3),Uh(i,f);1===Uh(i,f)&&(Ox(i,f,8),Ox(i,f,8),Ox(i,f,8))}1===Uh(i,f)&&(il(i,f),il(i,f)),r=Uh(i,f),1===r&&(o=Ox(i,f,32),h=Ox(i,f,32),Uh(i,f))}return{width:_.floor(16*(v+1)-2*a-2*u),height:_.floor((2-p)*(m+1)*16-2*c-2*l),Qb:s,Fb:n,VJ:r?h/(2*o):void 0,WJ:e,HJ:g}}function Yx(t,i,e){void 0===e&&(e=1);const s=Gi(Ot.Wy(t),X.kA);if(s&&0!==s.Z.length)return function(t,i,e){void 0===e&&(e=1);var s;let n;n=void 0!==i?bo(t.Z,(t=>t.zy.AM===i)):t.Z[0];const r=null==n||null==(s=n.eT)?void 0:s.eT;return r?zr(r,e):void 0}(s,i,e)}function Gx(t){const i=Gi(Ot.Wy(t),X.Kp);if(!i)return;const e=i.zy.cM,s=[];for(const t of i.Z){const i=t.zy.AM,e=t.wM.zy.cM;let h,a,u;for(const i of t.wM.IM.kM.xM.OM){const t=Vx(i);var n,r,o;if(t)h=null!=(n=t.XJ)?n:h,a=null!=(r=t.ZJ)?r:a,u=null!=(o=t.qJ)?o:u}s.push({AM:i,cM:e,XJ:h,ZJ:a,qJ:u})}return{cM:e,Z:s}}function Vx(t){let i,e,s;if(t.Av===X.cA){var n;const e=Dx(vh(t.mb.ly),new Bi);i=function(t){return"avc1."+Wx(t.JK,2)+Wx(t.$K,2)+Wx(t.tJ,2)}(e),s=null==(n=function(t){if(0===t.eJ.length)return;const i=t.eJ[0],e=new xx;return e.vJ(i,0,i.byteLength),Fx(e)}(e))?void 0:n.VJ}else if(t.Av===X.dA||t.Av===X.fA){const e=function(t,i){const e=i.oy(),s=Ve(t,e,8),n=Ve(t,e,2),r=Ve(t,e,1),o=Ve(t,e,5),h=Ve(t,e,32),a=[];for(let i=0;i<6;i++)a.push(Ve(t,e,8));const u=Ve(t,e,8);e.KA(4);const c=Ve(t,e,12);e.KA(6);const l=Ve(t,e,2);e.KA(6);const d=Ve(t,e,2);e.KA(5);const f=Ve(t,e,3);e.KA(5);const _=Ve(t,e,3),g=Ve(t,e,16),w=Ve(t,e,2),v=Ve(t,e,3),m=Ve(t,e,1),p=Ve(t,e,2),A=Ve(t,e,8),y=[];for(let i=0;i<A;i++){const i=Ve(t,e,1);e.KA(1);const s=Ve(t,e,6),n=Ve(t,e,16),r=[];for(let i=0;i<n;i++){const i=Ve(t,e,16),s=Eg(t,new Bi(e.Ku>>3),i);e.KA(8*i),r.push({KJ:i,JJ:s})}y.push({$J:i,t$:s,i$:n,e$:r})}return{KK:s,s$:n,n$:r,r$:o,o$:a,h$:u,a$:c,u$:l,c$:h,l$:d,d$:f,f$:_,_$:g,g$:v,w$:m,v$:w,iJ:p,m$:A,p$:y}}(vh(t.Mb.ly),new Bi);i=function(t,i){let e=t.toString()+".";switch(i.s$){case 0:break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C";break;default:return}switch(e+=i.r$.toString()+".",e+=function(t){let i=t;return i=i>>>1&1431655765|(1431655765&i)<<1,i=i>>>2&858993459|(858993459&i)<<2,i=i>>>4&252645135|(252645135&i)<<4,i=i>>>8&16711935|(16711935&i)<<8,i=i>>>16|i<<16,i}(i.c$).toString(16)+".",i.n$){case 0:e+="L";break;case 1:e+="H";break;default:return}e+=i.h$.toString();const s=i.o$.reduce(((t,i)=>0===t?i:i+1),0);for(let t=0;t<s;t++)e+="."+i.o$[t].toString(16).toUpperCase();return e}(t.Av,e)}else if(t.Av===X.gA){const e=function(t,i){const e=i.oy(),s=Ve(t,e,8);e.KA(24);const n=Ve(t,e,8),r=Ve(t,e,8),o=Ve(t,e,4),h=Ve(t,e,3),a=tg(t,e),u=Ve(t,e,8),c=Ve(t,e,8),l=Ve(t,e,8),d=Ve(t,e,16),f=new Array(8);for(let i=0;i<d;i++)f[i]=Ve(t,e,8);return{KK:s,A$:n,y$:r,M$:o,b$:h,T$:a,Pb:u,zb:c,Bb:l,S$:d,N$:f}}(vh(t.Tb.ly),new Bi);i=function(t,i){let e=t.toString()+".";return e+="0"+i.A$+".",e+=Aa(""+i.y$,2,"0")+".",e+=Aa(""+i.M$,2,"0")+".",e+=Aa(""+i.b$,2,"0")+".",e+=Aa(""+i.Pb,2,"0")+".",e+=Aa(""+i.zb,2,"0")+".",e+=Aa(""+i.Bb,2,"0")+".",e+="0"+i.T$,e}(t.Av,e)}else if(t.Av===X.vA){const e=function(t,i){const e=i.oy();e.KA(1);const s=Ve(t,e,7),n=Ve(t,e,3),r=Ve(t,e,5),o=tg(t,e),h=tg(t,e),a=tg(t,e),u=tg(t,e),c=tg(t,e),l=tg(t,e),d=Ve(t,e,2);e.KA(3);const f=tg(t,e);let _;return f?_=Ve(t,e,4):e.KA(4),{Gy:s,I$:n,D$:r,E$:o,k$:h,L$:a,x$:u,C$:c,O$:l,j$:d,R$:f,P$:_}}(vh(t.Ib.ly),new Bi);i=function(t,i,e){let s=t.toString()+".";if(s+=i.I$+".",s+=""+Aa(""+i.D$,2,"0"),s+=(0===i.E$?"M":"H")+".",s+=(1===i.L$?12:10)+".",s+=(1===i.I$?0:i.x$)+".",s+=""+i.C$+i.O$+(1===i.C$&&1===i.O$?i.j$:"0"),e&&e.Rb===Dn.ON_SCREEN_COLOURS){const t=e;s+="."+Aa(""+t.Pb,2,"0")+"."+Aa(""+t.zb,2,"0")+"."+Aa(""+t.Bb,2,"0")+"."+(t.Ub?1:0)}return s}(t.Av,e,t.Db)}else if(t.Av===X.yA){e=function(t){const i=t.qK;switch(i.UK){case Mx.hJ:return function(t){var i;if(!(null==(i=t.WK)?void 0:i.BK))return"mp4a.40";const e=function(t,i){let e=Ve(t,i,5);31===e&&(e=32+Ve(t,i,6));const s=Ve(t,i,4);let n;return 15===s&&(n=Ve(t,i,24)),{z$:e,B$:s,U$:n,Q$:Ve(t,i,4)}}(vh(t.WK.BK),new ig);return"mp4a.40."+e.z$}(i);case Mx.aJ:return"mp4a.40.2";case Mx.uJ:return"mp4a.40.34"}}(Nx(vh(t.ob.ly),new Bi))}else{if(t.Av!==X.bA)return(t.Av===X.EA||t.Av===X.DA)&&t.Lb?Vx(t.Lb):void 0;e="fLaC"}return{XJ:i,ZJ:e,qJ:s}}function Wx(t,i){const e=t.toString(16);return Aa(e,i,"0")}function Hx(t,i){const e=Ot.Wy(vh(t)),s=function(t,i){let e;for(const n of t.Z){var s;const t=null==(s=n.eT)?void 0:s.eT;if(t){const s=n.zy.AM,r=bo(i.Z,(t=>t.AM===s)),o=A.fN(t,r.cM);e&&!o.rN(e)||(e=o)}}return e}(Gi(e,X.kA),i),n=Gi(e,X.PA);return{MS:s.JS(),F$:n.ly}}var Xx=Po.zk,Zx=class extends Mo{get iX(){return this.cX}set iX(t){this.cX=t}get rX(){return this.fX}set rX(t){this.fX=t}get oa(){return this.Y$||this.G$.updating}V$(t,i,e){switch(t.Av){case Lu.jZ:case Lu.DD:return this.W$((e=>this.H$(t,i,e)),e);case Lu.RZ:throw new g("Opaque segments are not supported on web.")}}X$(t,i){switch(t.Av){case Lu.jZ:return this.W$((i=>this.Z$(t,i)),i);case Lu.DD:throw new g("Streaming initialization segments are not supported on web.");case Lu.RZ:throw new g("Opaque initialization segments are not supported on web.")}}async Z$(t,i){this.q$?this.K$=Gx(vh(t.ly)):(await this.J$(t,void 0,i),Xx&&(this.t0=!1,this.i0=t))}async H$(t,i,e){Xx&&this.t0&&this.i0&&await this.Z$(this.i0,e);try{if(Vr(e),this.q$&&this.K$){const n=await async function(t,i){switch(t.Av){case Lu.jZ:return t;case Lu.DD:{const e=await co(t.ly,i);return Vr(i),{Av:Lu.jZ,ly:new j(e)}}case Lu.RZ:throw new g("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,e),r=Hx(n.ly,this.K$);var s;t={Av:Lu.jZ,ly:r.F$},i=ol({},i,{pI:r.MS+(null!=(s=i.pI)?s:0)})}await this.J$(t,i,e),this.Co(new Os(In.CZ))}finally{t.Av===Lu.DD&&t.ly.cancel(new Fh).catch(Br)}}async J$(t,i,e){switch(Vr(e),i&&await this.e0(i),t.Av){case Lu.jZ:if(this.s0){const i=this.s0.RK(Ik(t.ly));return await this.n0(i,e)}return await this.r0(t.ly);case Lu.DD:if(this.s0){const i=this.s0.RK(t.ly);return await this.n0(i,e)}return await this.n0(t.ly,e)}}async n0(t,i){const e=this.o0.O_,s=function(t,i){return void 0===i&&(i=new fk({highWaterMark:1/0})),new Ei(new nx(t,i),{highWaterMark:0})}(t),n=s.getReader();let r=!1;try{for(;;){const t=await Jr(n.read(),i);if(t.done){r=!1;break}Vr(i);const e=M(t.value);r=!0,await this.r0(e)}}catch(t){if(n.cancel(t).catch(Br),r){await this.h0();const t=this.o0.O_.Sn(e.BB());for(let i=0;i<t.U;i++)await this.a0(t.Cn(i),t.jn(i))}throw t}}u0(t,i){return this.W$((()=>this.c0(t,i)))}async c0(t,i){this.G$.appendWindowStart===t&&this.G$.appendWindowEnd===i||(await this.h0(),this.G$.appendWindowStart=0,this.G$.appendWindowEnd=i,this.G$.appendWindowStart=t)}async e0(t){if(this.G$.timestampOffset!==t.pI)try{this.G$.timestampOffset=t.pI}catch(i){await this.h0(),this.G$.timestampOffset=t.pI}}async r0(t){this.G$.appendBuffer(t),this.l0=!0,await this.d0()}f0(t,i,e){return this.W$((e=>this.a0(t,i,e)),e)}async a0(t,i,e){Vr(e),this.G$.remove(t,i),await this.d0()}d0(){const t=this.o0.O_;return new Promise(((i,e)=>{let s,n=!1,r=()=>{n=!0},o=()=>{n=!1,s="error"},h=()=>{n=!1,s="aborted"},a=()=>{n=!1,s="sourceclose",u()},u=()=>{c(),n&&!s?(t.KB(this.o0.O_)||this.Co(new Os(In.CZ)),i()):e(new g(s))},c=()=>{this.G$.removeEventListener("update",r),this.G$.removeEventListener("error",o),this.G$.removeEventListener("abort",h),this.G$.removeEventListener("updateend",u),this._0.fn(zu.zZ,a)};this.G$.addEventListener("update",r),this.G$.addEventListener("error",o),this.G$.addEventListener("abort",h),this.G$.addEventListener("updateend",u),Po.wk&&Po.pk<3&&this._0.yn(zu.zZ,a)}))}g0(){return this.W$((()=>this.h0()))}async h0(){if(this._0.Sg===Qu.oD){Xx&&(this.t0=!0),this.G$.updating&&(this.Y$=!0);try{this.G$.abort()}catch(t){0,this.Y$=!1}this.oa&&await this.d0().catch(Br)}}w0(){return"function"==typeof this.G$.changeType}GZ(t){if(this.v0(),this._0.Sg===Qu.m0)return;var i;this.p0=t;const e=null!=(i=this._0.A0(t.Nz))?i:t.Nz;this.q$=qx(t.Nz,this.y0),this.w0()&&!Da(this.y0,e)&&(this.y0=e,this.G$.changeType(this.y0))}M0(){this._0.Sg!==Qu.Ov||this.b0||this.oa||(this.G$.timestampOffset=this.G$.timestampOffset,this._0.T0())}async W$(t,i){this.v0();const e=new Bd;e.w_(this.S0.f_),i&&e.w_(i);try{this.b0=t(e.f_),await this.b0,this._0.T0(),this.oa&&await this.d0()}finally{this.b0=void 0,e.h_()}}v0(){if(this.b0)throw new g("Internal error")}async h_(){this.Vo(),this.S0.g_(),this.b0&&(await this.b0.catch(Br),this.b0=void 0),this.G$.removeEventListener("updateend",this.N0),this.G$.removeEventListener("bufferedchange",this.I0)}constructor(t,i,e,s,n){var r;if(super(),this.cX=20,this.fX=30,this.Y$=!1,this.l0=!1,this.b0=void 0,this.S0=new Bd,this.t0=!1,this.i0=void 0,this.q$=!1,this.K$=void 0,this.N0=()=>{this.Y$=!1},this.I0=t=>{t.removedRanges&&this.Co(new Os(In.CZ))},this._0=i,this.o0=t,this.G$=e,this.G$.addEventListener("updateend",this.N0),this.G$.addEventListener("bufferedchange",this.I0),this.p0=s,this.y0=n,this.q$=qx(s.Nz,n),null==(r=i.wd)?void 0:r.D0){var o;const t=null!=(o=i.wd.E0)?o:1e5;this.s0=new Tx(t)}}};function qx(t,i){return I(t,"audio/mp4")&&I(i,"audio/mpeg")}var Kx=class{get O_(){if(this.k0.Sg===Qu.m0)return Ri.oU();let t=Ri.xn(this.G$.buffered).Sn(new Ri([0,1/0]));const i=this.L0;return void 0!==i&&t.U>0&&t.jn(t.U-1)===i&&(t=t.YB(Ri.nU(i))),t}oq(){return!!this.L0&&this.O_.PB().gr(this.L0)}x0(){const t=this.O_;this.L0=t.U>0?t.jn(t.U-1):0,this.k0.C0()}M0(){this.L0=void 0}constructor(t,i){this.L0=void 0,this.k0=i,this.G$=t}};function Jx(t){const i=t.VI("codecs");return i?i.split(",").map((t=>t.trim())):[]}function $x(t,i){return!("opus"===t)&&!("opus"===i)||t===i}function tC(t,i){const e=iC(t)||eC(t),s=iC(i)||eC(i);return!e&&!s||t===i}function iC(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function eC(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function Di(t,i){if(t===i)return!0;const e=t.split("."),s=i.split("."),n=e[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,i]=e,[,n,r]=s;if(t!==n)return!1;if(Number(i)!==Number(r))return!1}return!0}function sC(t,i,e,s,n,r,o){const h=new Kx(n,t),a=new Zx(h,t,n,e,r);return new nC(t,i,e,s,h,a,o)}var nC=class extends Mo{get O_(){return this.o0.O_}get wd(){return this.GO}get Nz(){return this.BO}get O0(){return this.j0}get R0(){return this.P0.wq}get iX(){return this.z0.iX}set iX(t){this.z0.iX=t}get rX(){return this.z0.rX}set rX(t){this.z0.rX=t}get oa(){return this.z0.oa}oq(){return this.o0.oq()}x0(){this.o0.x0()}M0(){this.o0.M0(),this.z0.M0()}B0(t,i){this.P0.mq(t,i)}U0(t,i){this.P0.pq(t,i)}Q0(){return this.z0.g0()}V$(t,i,e){return this.z0.V$(t,i,e)}X$(t,i,e){return this.z0.X$(t,e)}u0(t,i){return Po.wk&&Po.pk<3?this.z0.u0(t,1/0):this.z0.u0(t,i)}async rS(t,i,e){this.U0(t,i);const s=this.O_;await this.z0.f0(t,i,e);const n=0!==s.U&&0===this.O_.U;(Po.Wk||Po.yk)&&n&&this.Fm.JA(this.Fm.U_)}FZ(t){const i=t.Nz;if(this.BO===i)return!0;const e=this.F0.get(i);if(void 0!==e)return e;const s=this.Y0(t);return this.F0.set(i,s),s}Y0(t){const i=this._0.A0(t.Nz);if(void 0===i)return!1;const e=bu(this.BO),s=bu(i),n=Jx(e),r=Jx(s);if(this.z0.w0()){if(!function(t,i){return kd(t,i,tC)}(n,r))return!1;if(Po.Xk&&!function(t,i){return kd(t,i,$x)}(n,r))return!1}else{if(e.Av!==s.Av)return!1;if(!function(t,i){return kd(t,i,Di)}(n,r))return!1}return!0}async GZ(t){const i=t.Nz;this.BO!==i&&(this.F0.clear(),this.z0.GZ(t),this.BO=i),this.GO=t,this._0.G0()}async h_(){this.F0.clear(),this.Vo(),this.P0.gn();try{this.z0.fn(In.CZ,this.Ds),await this.z0.h_()}catch(t){}}constructor(t,i,e,s,n,r,o){super(),this.F0=Pu(),this._0=t,this.GO=e,this.BO=e.Nz,this.j0=s,this.Fm=i,this.o0=n,this.z0=r,this.P0=o,this.z0.yn(In.CZ,this.Ds)}},Nr=class{V0(){let t=this.Cn,i=this.jn;if(this.W0||this.H0){const e=.001*(ra.m_()-this.X0);this.W0&&(t+=e),this.H0&&(i+=e)}return Ri.rU(t,i)}constructor(t,i,e=!1,s=!1){this.Cn=t,this.jn=i,this.W0=e,this.H0=s,this.X0=ra.m_()}},rC=.5,oC=[Tf.jh,Tf.Sh,Tf.im,Tf.$v,Tf.Uv,Tf.Fv,Tf.Ov,Tf.qv,$.Nw,hi.ha],hC=class{Z0(t){this.q0.push(t),t.yn($L.fq,this.K0)}get wq(){return this.q0.reduce(((t,i)=>t.YB(i.wq)),Ri.oU())}gn(){this.J0(),this.$0.fn($.Nw,this.t1),this.Fm.fn(Tf.Zv,this.t1),this.Fm.fn(oC,this.i1),this.q0.forEach((t=>t.fn($L.fq,this.K0))),0!==this.e1&&(ra.p_(this.e1),this.e1=0),this.s1=!0}cq(t){if(this.Fm.G_)return!1;if(0!==this.e1)return!1;const i=this.o0.O_,e=i.WB(t);if(e>=0&&t+rC<i.jn(e))return!1;const s=e>=0?e+1:i.iU(t);if(s<0||s>=i.U)return!1;const n=i.Cn(s);if(Ri.rU(t,n).VB(this.wq).sU>1)return!1;if(ra.n1)return this.o1=this.Fm.U_,this.e1=ra.A_((()=>{this.o1===this.Fm.U_&&this.a1(n),this.e1=0}),250),!0;return!(_.abs(n-t)<=.001)&&(this.a1(n),!0)}a1(t){this.Fm.JA(t,!1,!0)}u1(){0!==this.c1&&(ra.p_(this.c1),this.c1=0),this.Fm.fn(Tf.fm,this.Jl)}l1(){this.s1||0===this.d1&&(this.u1(),this.d1=ra.f1(this._1,250))}J0(){0!==this.d1&&(ra.g1(this.d1),this.d1=0),this.u1(),this.Fm.Eg||(this.w1=0)}v1(){return!this.Fm.fg&&!this.Fm.Eg&&0!==this.Fm.gg&&!this.Fm.G_&&!this.Fm.lt&&(this.m1()||this.$0.Sg>=qo.QT)}m1(){const t=this.Fm.U_,i=this.o0.O_,e=i.WB(t);return-1!==e&&i.jn(e)>t+rC}A1(t,i){const e=i.WB(t);return e>-1?i.jn(e):t}constructor(t,i,e,s){this.o0=t,this.$0=i,this.Fm=e,this.s1=!1,this.q0=[],this.e1=0,this.c1=0,this.M1=0,this.o1=0,this.w1=0,this.d1=0,this.b1=1,this.K0=t=>{const i=this.Fm.U_,e=t.gq.gr(i),s=t.gq.gr(i,rC)&&this.Fm.Sg<=qo.UT;(e||s)&&this.cq(i)},this.t1=Qd((t=>{if(this.s1)return;if(this.$0.Sg<=qo.UT){const t=this.Fm.U_;this.cq(t)||this._1()}}),100),this.Jl=Qd((t=>{this.l1()}),100),this.i1=()=>{this.v1()?0===this.d1&&(this.Fm.yn(Tf.fm,this.Jl),this.c1=ra.A_((()=>{this.l1()}),3500)):this.J0()},this._1=()=>{const t=this.M1,i=this.w1,e=this.Fm.U_,s=ra.m_(),n=this.o0.O_;if(t!==e)return this.M1=e,this.w1=s,this.b1=1,void(this.T1=ra.S1?2e3:1e3);if(this.v1()&&0!==n.U&&i>0&&s>i+this.T1){let t;const i=this.wq.PB().VB(n),s=i.tU(e);if(-1!==s){const n=i.Cn(s);if(n-e<1){const e=i.jn(s);0,t=e}}var r;if(!t)t=null==(r=this.N1)?void 0:r.determineStallJumpTarget(),t||(t=e+.01*this.b1,n.gr(t)||(t=this.A1(e,n)));0,this.M1=t,this.b1++,this.T1=_.min(2*this.T1,1e4),this.a1(t)}},this.$0.yn($.Nw,this.t1),this.Fm.yn(Tf.Zv,this.t1),this.Fm.yn(oC,this.i1),this.N1=s,this.T1=ra.S1?2e3:1e3}};function aC(t){const i=[];if(t.I1&&i.push(t.I1.O_),t.D1&&i.push(t.D1.O_),0===i.length)return Ri.oU();let e=0;for(const t of i)t.U>0&&(e=_.max(e,t.jn(t.U-1)));const s=t.oq;let n=new Ri([0,e],[!0,s]);for(let t of i)s&&t.U>0&&(t=t.YB(new Ri([t.jn(t.U-1),e],[!0,!0]))),n=n.Sn(t);return n}function uC(t,i,e){const s=t.O_;let n,r=s.WB(i);if(r>=0){if(!(r+1<s.U))return Promise.resolve();n=s.Cn(r+1)}else{if(r=s.iU(i),!(r>=0))return Promise.resolve();n=s.Cn(r)}return t.rS(n,1/0,e)}function cC(t,i,e){if(!t.gr(i)){const s=t.WB(i,e);if(s>=0){const e=t.Cn(s);if(i<e)return e}}return i}var lC=class{E1(){return new this.L1}C1(t){return this.L1.isTypeSupported(t)}constructor(t){this.L1=dC(t)}};function dC(t){return t&&Oa(Ua.ManagedMediaSource)?Ua.ManagedMediaSource:Oa(Ua.MediaSource)?Ua.MediaSource:void 0}var Qu,fC=Po.Sk||Po.Ik,_C=Po.Ok||Po.zk&&Po.Uk>=17;!function(t){t.m0="closed",t.oD="open",t.Ov="ended"}(Qu||(Qu={}));var gC=class extends KL{get I1(){return this.O1}get D1(){return this.j1}get ct(){if(this.R1)return this.R1;const t=this.yz.duration;return t===pu?1/0:t}P1(t){if(S(t)||t<0)throw new g("Invalid duration");this.z1()?this.B1(t):this.R1=t}B1(t){const i=t===1/0;if(i&&this.yz.setLiveSeekableRange){const t=2**39;this.yz.setLiveSeekableRange(0,t)}this.yz.duration=i?_C?1/0:pu:t,this.R1=void 0}get O_(){return fC?aC(this):function(t,i){let e=i;return e.U>0&&t.oq&&(e=e.YB(Ri.nU(e.jn(e.U-1)))),e}(this,Ri.xn(this.lj.buffered))}get hq(){var t;return null==(t=this.O1)?void 0:t.O_}get aq(){var t;return null==(t=this.j1)?void 0:t.O_}get Ig(){return this.U1.V0().Sn(new Ri([0,this.ct],[!0,!0]))}Q1(t,i,e,s){this.U1=new Nr(t,i,!!e,!!s)}get oq(){return(!this.O1||this.O1.oq())&&(!this.j1||this.j1.oq())}get Sg(){return this.yz.readyState}async oX(){const t=this.GO,i=bo(t.F1,(t=>I(t.Nz,"audio"))),e=bo(t.F1,(t=>I(t.Nz,"video")));if(this.lj.disableRemotePlayback=!0,await this.Y1(),i){const t=new ex;var s;this.G1.Z0(t);const e=null!=(s=this.A0(i.Nz))?s:i.Nz;this.V1=this.yz.addSourceBuffer(e),this.O1=sC(this,this.Fm,i,Jt.WA,this.V1,e,t),this.O1.yn(In.CZ,this.I0)}if(e){const t=new ex;var n;this.G1.Z0(t);const i=null!=(n=this.A0(e.Nz))?n:e.Nz;this.W1=this.yz.addSourceBuffer(i),this.j1=sC(this,this.Fm,e,Jt.VA,this.W1,i,t),this.j1.yn(In.CZ,this.I0)}this.VZ.$n(this,t)}async Y1(){await super.iq(this.yz),"open"!==this.Sg&&await En(this.yz,"sourceopen")}z1(){if("open"!==this.Sg)return!1;const t=this.O1&&this.O1.oa,i=this.j1&&this.j1.oa;return!(t||i)}x0(){this.H1=!0,this.O1&&this.O1.x0(),this.j1&&this.j1.x0(),this.H1=!1,this.X1()}M0(){this.O1&&this.O1.M0(),this.j1&&this.j1.M0()}FZ(t){const i=bo(t.F1,(t=>I(t.Nz,"audio"))),e=bo(t.F1,(t=>I(t.Nz,"video")));if(this.O1){if(!i)return!1;if(!this.O1.FZ(i))return!1}else if(i)return!1;if(this.j1){if(!e)return!1;if(!this.j1.FZ(e))return!1}else if(e)return!1;return!!super.FZ(t)}async GZ(t){const i=bo(t.F1,(t=>I(t.Nz,"audio"))),e=bo(t.F1,(t=>I(t.Nz,"video"))),s=[];this.O1&&s.push(this.O1.GZ(i)),this.j1&&s.push(this.j1.GZ(e)),await Promise.all(s),await super.GZ(t)}async h_(){if(this.yz.removeEventListener("sourceclose",this.Z1),Po.yk&&await this.rq(),this.O1){if(await this.O1.h_(),this.O1=void 0,it()&&(Po.yk||Po.wk))try{this.yz.removeSourceBuffer(this.V1)}catch(t){}this.V1=void 0}if(this.j1){if(await this.j1.h_(),this.j1=void 0,it()&&(Po.yk||Po.wk))try{this.yz.removeSourceBuffer(this.W1)}catch(t){}this.W1=void 0}this.lj.src&&URL.revokeObjectURL(this.lj.src),this.lj.disableRemotePlayback=!1,this.Fm.fn([Tf.im,Tf.Uv],this.q1),this.G1.gn(),Po.wk&&await this.rq(),await super.h_()}G0(){const t=this.GO,i=t.F1.map((t=>I(t.Nz,"audio")&&this.O1?this.O1.wd:I(t.Nz,"video")&&this.j1?this.j1.wd:t));this.GO=ol({},t,{F1:i})}C0(){this.H1||this.X1()}get K1(){if(!this.oq)return!1;const t=this.O_;return 0!==t.U&&t.Cn(t.U-1)<=this.Fm.U_}X1(){this.K1&&this.z1()&&(this.yz.endOfStream(),this.R1=void 0,this.Co(new Os(zu.EQ)),this.Fm.I0())}T0(){this.z1()&&(this.oq?this.X1():void 0!==this.R1&&this.B1(this.R1))}cq(t){return this.G1.cq(t)}lq(){return!0}A0(t){return wC(this.J1,t)}static dq(t){const i=dC(t.t2);if(void 0===i)return!1;if("function"!=typeof i.isTypeSupported)return!1;const e=new lC(t.t2);for(const i of t.F1)if(void 0===wC(e,i.Nz))return!1;return!0}constructor(t,i,e,s,n,r=new lC(t.t2),o){super(t,i,s,n),this.O1=void 0,this.V1=void 0,this.j1=void 0,this.W1=void 0,this.U1=new Nr(0,1/0),this.R1=void 0,this.H1=!1,this.Z1=()=>{this.Co(new Os(zu.zZ))},this.q1=()=>{this.X1()},this.I0=()=>{this.Fm.I0()},this.J1=r,this.yz=this.J1.E1(),this.yz.addEventListener("sourceclose",this.Z1),this.Fm.yn([Tf.im,Tf.Uv],this.q1),this.G1=new hC(this,e,this.Fm,o)}};function wC(t,i){const e=bu(i),s=Jx(e),n="audio/mp4"===e.Av,r=n&&1===s.length&&"mp4a.40.34"===s[0];if(t.C1(i)&&(!r||!Po.zk))return i;if(r){const i=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const e of i)if(t.C1(e))return e}if(n&&1===s.length&&"flac"===s[0].toLowerCase()){const e=["flac","fLaC","FLAC"];for(const s of e){const e='audio/mp4; codecs="'+s+'"';if(t.C1(i))return e}}}var vC=class extends Os{constructor(t){super(Tf.Uv),this.currentTime=t}},mC=[Tf._m,Tf.qv,Tf.im,Tf.Uv,Tf.jh,Tf.Sh],pC=class extends Mo{get U_(){return this.hU}get i2(){return this.e2}get s2(){return this.n2}get ct(){return this.jx}get G_(){return this.o2}get fg(){return this.cU}get Sg(){return this.h2}get Eg(){return this.aU}get og(){return this.uU}set og(t){this.og!==t&&(this.uU=t,this.Co(new St(this.U_,this.zg)))}get gg(){return this.lU}set gg(t){this.gg!==t&&(this.lU=t,this.Co(new Zs(this.U_,this.gg)))}get zg(){return this.Xx}set zg(t){this.zg!==t&&(this.Xx=t,this.Co(new St(this.U_,this.zg)))}JA(t,i,e){this.hU!==t&&(this.hU=t,this.e2=i,e&&!this.aU?(this.n2=!0,this.Co(new vC(this.U_))):(this.n2=!1,this.aU=!0,this.Co(new Ur(this.U_))))}Hg(){this.cU||(this.cU=!0,this.Co(new Ye(this.U_)))}Xg(){this.cU&&(this.cU=!1,this.Co(new Rt(this.U_)))}h_(){this.Vo()}constructor(t,i,e,s,n,r,o,h,a,u,c){super(),this.hU=t,this.jx=i,this.o2=e,this.cU=s,this.aU=n,this.uU=r,this.lU=o,this.Xx=h,this.h2=a,this.e2=u,this.n2=c}};function AC(t){return new pC(t.U_,t.ct,t.G_,t.fg,t.Eg,t.og,t.gg,t.zg,t.Sg,!1,t.s2)}function yC(t,i){i.ct===t.ct||S(i.ct)&&S(t.ct)||t.Co(new Te(t.ct)),t.og=i.og,t.zg=i.zg,t.gg=i.gg,i.fg?t.Hg():t.Xg().catch(Br),i.U_!==t.U_||i.Sg>qo.BT&&t.Sg===qo.BT?t.JA(i.U_,i.i2,i.s2):!i.Eg&&t.Eg?t.Co(new Ur(t.U_)):i.Eg&&!t.Eg&&t.Sg>=qo.UT&&t.Co(new Ko(t.U_)),!i.G_&&t.G_&&t.Co(new pa(t.U_))}var MC=class extends Mo{get Sg(){return this.Ng()}a2(t){this.Oj!==t&&(this.Oj=t,this.Co(new Dr(this.Fm.U_,t)))}u2(){this.a2(this.Ng())}tr(){this.a2(qo.BT)}h_(){this.Vo()}constructor(t){super(),this.Oj=qo.BT,this.c2=()=>{this.u2()},this.Fm=t}},bC=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],TC=class extends MC{Ng(){let t=this.Fm.pz.readyState;return t>qo.UT&&this.Fm.l2?qo.UT:(this.Fm.pz.seeking&&t>qo.Xn&&(t=qo.Xn),t)}h_(){for(const t of bC)this.Fm.pz.removeEventListener(t,this.c2);super.h_()}constructor(t){super(t);for(const t of bC)this.Fm.pz.addEventListener(t,this.c2)}},SC=class extends MC{Ng(){if(this.Fm.pz.readyState===qo.BT)return qo.BT;const t=this.d2(),i=t?t.jn-t.Cn:0;if(!t)return qo.Xn;const e=this.Fm.gg;return this.f2()||i>=3*e?qo.FT:i>=3?qo.QT:qo.UT}d2(){const t=this.Fm.U_,i=this.Fm.O_.FB(.04),e=i.WB(t);if(!(e<0))return{Cn:t,jn:i.jn(e)}}f2(){if(this.Fm.G_)return!0;const t=this.Fm.ct,i=this.d2();return!!i&&t-i.jn<=.16666666666666666}h_(){this.Fm.fn([Tf.im,Tf.Uv],this.c2);for(const t of bC)this.Fm.pz.removeEventListener(t,this.c2);super.h_()}constructor(t){super(t),this.Fm.yn([Tf.im,Tf.Uv],this.c2);for(const t of bC)this.Fm.pz.addEventListener(t,this.c2)}},NC=[$.Nw,Tf.jh,Tf.Sh,Tf.im,Tf.$v,Tf.Uv,Tf.Fv,Tf.Ov,hi.ha],IC=class extends Mo{_2(){return(!this.Dj.s2||!this.Dj.g2)&&this.Dj.Sg<qo.QT}w2(){return!this.Dj.Eg&&!(this.Dj.fg||this.Dj.G_||this.Dj.lt||this._2())}Yn(){const t=this.m2;this.m2=this.w2(),!t&&this.m2&&this.Co(new $e(this.Dj.U_))}tr(){this.m2=!1}h_(){this.Vo(),this.Dj.fn(NC,this.CV)}constructor(t){super(),this.m2=!1,this.CV=()=>{this.Yn()},this.Dj=t,this.Dj.yn(NC,this.CV)}},DC=class extends IC{w2(){return this.A2&&super.w2()}Yn(){this.A2&&(this.lj.paused||this.lj.ended||this.lj.error)&&(this.A2=!1),super.Yn()}tr(){super.tr(),this.A2=!1}h_(){this.lj.removeEventListener($.Sm,this.Uj),super.h_()}constructor(t){super(t),this.A2=!1,this.Uj=()=>{this.A2=!0,this.Yn()},this.lj=t.pz,this.lj.addEventListener($.Sm,this.Uj)}},EC=class extends Os{constructor(t){super(hi.ha),this.lt=t}};function kC(t,i){return t.MS<=i&&t.bS>i}function L(t,i){return function(t,i){return vd(t.MS,i.MS,un)}(t,i)||function(t,i){return vd(t.bS,i.bS,un)}(t,i)}function LC(t,i){return function(t,i){return vd(t.kS,i.kS,un)}(t,i)||function(t,i){return vd(t.LS,i.LS,un)}(t,i)}function xC(t,i,e){let s=function(t,i,e,s,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=t.length);let h=r,a=o-1;for(;h<=a;){const o=h+(a-h>>1),u=s(e(t[o]),i);if(u<0)h=o+1;else if(u>0)a=o-1;else{if(!(n&&o>r&&0===s(e(t[o-1]),i)))return o;a=o-1}}return~h}(t,i,Ud,e,!0);if(s<0)return s;for(;s<t.length&&e(i,t[s])===ws.Zr;s++)if(t[s].QS(i))return s;return-(s+1)}function CC(t,i,e){const s=xC(t,i,e);return s>=0?s:-(s+1)}function OC(t){const i=t.Lt;if(!i)return-1;if(t instanceof rl)return i.M2(t);const e=i.L;if(!e)return-1;const s=xC(e.Rw,t,L);return s>=0?s:-1}function jC(t,i){const e=function(t,i,e){const s=t.length,n=i.length;let r=0,o=0;const h=[],a=[];for(;r<s&&o<n;){const s=t[r],n=i[o];s===n?(r++,o++):e(n,s)<=0?(h.push(n),o++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;o<n;)h.push(i[o]),o++;return{b2:h,T2:a}}(t,i,L);return function(t,i){const e=i.length;for(let s=0;s<e;s++)t[s]=i[s];t.length=e}(t,i),e}var RC=class{get Rw(){return this.S2}get U(){return this.S2.length}get va(){if(this.Xa){const t=this.S2;this.Xa.length=t.length;for(let i=0;i<t.length;i++)this.Xa[i]=t[i].va}else this.Xa=this.fa();return this.Xa}fa(){return function(t){const i=[];for(let e=0;e<t.U;e++)i[e]=t.IL(e).va;return i.item=i=>{const e=0|i,s=t.IL(e);return s&&s.va||void 0},w.defineProperty(i,"constructor",{value:Ov}),i}(this)}oS(t){const i=this.S2;for(let e=i.length-1;e>=0;e-=1){const s=i[e];if(t.QS(s))return!0}return!1}IL(t){return this.S2[t]}constructor(t){this.Xa=void 0,this.S2=t}},PC=class extends Oe{fa(){return new zC(this.Lt.va,this.Sg)}constructor(t,i){super(ct.Nw),this.Lt=t,this.Sg=i}},zC=class extends Hn{constructor(t,i){super("readystatechange"),this.track=t,this.readyState=i}},BC=class extends Oe{fa(){return new UC(this.Lt.va)}constructor(t){super(ct.Dw),this.Lt=t}},UC=class extends Hn{constructor(t){super("typechange"),this.track=t}},Qr=class extends Oe{fa(){return new QC(this.yS.va)}constructor(t){super(ct.lw),this.yS=t}},QC=class extends Hn{constructor(t){super("addcue"),this.cue=t}},FC=class extends Oe{fa(){return new YC(this.yS.va)}constructor(t){super(ct.fw),this.yS=t}},YC=class extends Hn{constructor(t){super("removecue"),this.cue=t}},GC=class extends Mo{get q(){return this.N2}get L(){return this.I2}D2(t){return bo(this.I2.Rw,(i=>i.o===t))}get _E(){return this.nf}set _E(t){this.nf=t}get pv(){return this.E2}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return $n(this)}get o(){return this.uS}get Xw(){return this.cS}get fv(){return this.L2}set fv(t){this.L2=t}get zt(){return this.C2}get kh(){return this.lS}set kh(t){t!==this.lS&&(this.lS=t,this.Co(new hl(this)))}get gs(){return this.Rx}get Zw(){return this.O2}get _v(){return this.CU}set _v(t){this.Xo(t)}Xo(t){const i=Af(t);i!==this._v&&(this.CU=i,i===yi.Ch&&(this.j2.forEach((t=>{t.ro=!1})),To(this.j2),this.R2=0),this.Co(new uc(this)))}get Sg(){return this.h2}set Sg(t){this.h2!==t&&(this.h2=t,this.Co(new PC(this,this.h2)))}get yv(){return this.P2}set yv(t){this.P2=t}get Av(){return this.z2}set Av(t){this.z2!==t&&(this.z2=t,this.Co(new BC(this)))}lE(t){if(!t||t.Lt)return;const i=xC(this.B2,t,LC);if(i>=0)return;t.Lt=this;const e=-(i+1);this.B2.splice(e,0,t);const s=CC(this.L.Rw,t,L);this.U2(t,s),this.Co(new Qr(t))}U2(t,i){this.S2.splice(i,0,t),this.Q2(i),t.GS=i,i<this.R2&&(this.R2=i)}gD(t){if(!t||t.Lt!==this)return;const i=this.M2(t);if(i<0)return;t.ro=!1;const e=this.j2,s=xC(e,t,L);s>=0&&Ns(e,s);const n=xC(this.B2,t,LC);n>=0&&Ns(this.B2,n),this.F2(t,i),this.Co(new FC(t))}F2(t,i){Ns(this.S2,i),this.Q2(i),t.GS=-1,this.R2>i&&--this.R2}jS(t){if(!t||t.Lt!==this)return;const i=this.M2(t);if(i<0)return;this.F2(t,i);const e=CC(this.L.Rw,t,L);this.U2(t,e);const s=gt(this.j2,(i=>i===t));if(s>=0){Ns(this.j2,s);const i=CC(this.j2,t,L);this.j2.splice(i,0,t)}}Y2(t,i){const e=this.j2,s=this.S2;let n=this.R2,r=!1,o=1/0;i&&(n=0);for(let i=e.length-1;i>=0;i--){const s=e[i];kC(s,t)?s.bS<o&&(o=s.bS):(r=!0,Ns(e,i))}for(;n<s.length&&s[n].MS<=t;){const i=s[n];kC(i,t)&&(Ai(e,i)||(r=!0,e.push(i)),i.bS<o&&(o=i.bS)),n++}return n<s.length&&s[n].MS<o&&(o=s[n].MS),r&&id(e,L),this.R2=n,o}M2(t){return(-1===t.GS||t.GS>=this.G2)&&this.V2(),t.GS}V2(){const t=this.S2;for(let i=this.G2;i<t.length;i++)t[i].GS=i;this.G2=t.length}Q2(t){t<this.G2&&(this.G2=_.max(t,0))}mv(t){this.pv||(this._v=t)}gn(){this.Vo();const t=this.S2.slice();for(const i of t)i.gn();To(this.S2),To(this.B2),To(this.j2)}constructor(t,i,e,s,n,r,o,h,a){super(),this.cS=Q(),this.nf=!1,this.CU=yi.Ch,this.h2=Ls.NONE,this.P2=void 0,this.S2=[],this.B2=[],this.j2=[],this.G2=0,this.R2=0,this.uS=i||"",this.L2=h||"",this.C2=t,this.Rx=s||"",this.nf=Boolean(n),this.E2=Boolean(o),this.z2=r||O.DEFAULT,this.lS=e||"",this.O2=a||[],this.I2=new RC(this.S2),this.N2=new RC(this.j2)}},VC=class extends dr{fa(){return new WC(this.yS.va)}constructor(t,i){super(Ui.mS,t),this.GN=i}},WC=class extends Cv{constructor(t){super("enter",t)}},HC=class extends dr{fa(){return new XC(this.yS.va)}constructor(t,i){super(Ui.pS,t),this.GN=i}},XC=class extends Cv{constructor(t){super("exit",t)}},ZC=class extends Oe{fa(){return new qC(this.yS.va)}constructor(t){super(ct.mw),this.yS=t}},qC=class extends Hn{constructor(t){super("entercue"),this.cue=t}},KC=class extends Oe{fa(){return new JC(this.yS.va)}constructor(t){super(ct.Aw),this.yS=t}},JC=class extends Hn{constructor(t){super("exitcue"),this.cue=t}},Or=class extends B{get Xw(){return this.cS}get MS(){return this.W2.startTime}set MS(t){this.W2.startTime=t}get bS(){return this.W2.endTime}set bS(t){this.W2.endTime=t}get O(){return this.PS}set O(t){this.PS=t}get zS(){return!!this.W2.pauseOnExit}set zS(t){this.W2.pauseOnExit=!!t}get Lt(){return this.CS}set Lt(t){this.CS=t}get o(){return this.W2.id||""}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return ht(this)}get ro(){return this.ho}set ro(t){this.ro!==t&&(this.ho=t,t?(this.Co(new VC(this,this.MS)),this.CS&&this.CS.Co(new ZC(this))):(this.Co(new HC(this,this.bS)),this.CS&&this.CS.Co(new KC(this))))}QS(t){return this===t||af(this,t)&&Bv(this,t)&&this.FS(t)}FS(t){return of(this.O,t.O)}gn(){this.Vo(),this.W2.removeEventListener("enter",this.H2),this.W2.removeEventListener("exit",this.X2)}constructor(t){super(),this.PS=void 0,this.CS=void 0,this.Xa=void 0,this.ho=!1,this.H2=()=>{this.ro=!0},this.X2=()=>{this.ro=!1},this.cS=Mv(),this.W2=t,this.kS=t.startTime,this.LS=t.endTime,this.W2.addEventListener("enter",this.H2),this.W2.addEventListener("exit",this.X2)}},$C=class extends Oe{fa(){return new tO(this.Lt.va)}constructor(t){super(ct.Mw),this.Lt=t}},tO=class extends Hn{constructor(t){super("cuechange"),this.track=t}};function iO(t){if(!t)return;let i=t.THEOplayerVTTRegion;return i||(i=new eO(t),t.THEOplayerVTTRegion=i),i}var eO=class{get Z2(){return this.q2}get o(){return this.q2.id||""}get ji(){return+this.q2.width||0}set ji(t){this.q2.width=t||0}get VS(){return+this.q2.lines||0}set VS(t){this.q2.lines=t||0}get WS(){return+this.q2.regionAnchorX||0}set WS(t){this.q2.regionAnchorX=t||0}get HS(){return+this.q2.regionAnchorY||0}set HS(t){this.q2.regionAnchorY=t||0}get ZS(){return+this.q2.viewportAnchorX||0}set ZS(t){this.q2.viewportAnchorX=t||0}get qS(){return+this.q2.viewportAnchorY||0}set qS(t){this.q2.viewportAnchorY=t||0}get XS(){return this.q2.scroll||""}get va(){return this.Xa||(this.Xa=Wv(this)),this.Xa}constructor(t){this.Xa=void 0,this.q2=t}};var sO=class extends Or{get O(){return this.W2.text}set O(t){this.W2.text=t}get Pt(){return this.W2.vertical||""}set Pt(t){this.W2.vertical=t||""}get ES(){return this.W2.snapToLines}set ES(t){this.W2.snapToLines=t}get SS(){return this.W2.line}set SS(t){this.W2.line=t}get By(){return+this.W2.size}set By(t){this.W2.size=Qh(t,0,100)}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return jv(this)}FS(t){return Uv(this,t)}constructor(t){super(t)}},nO=class extends sO{get DS(){return iO(this.W2.region)}get NS(){return this.W2.lineAlign||"start"}set NS(t){this.W2.lineAlign=t||"start"}get po(){return this.W2.position}set po(t){this.W2.position=t}get IS(){return this.W2.positionAlign||"auto"}set IS(t){this.W2.positionAlign=t||"auto"}get TS(){return this.W2.align||"center"}set TS(t){this.W2.align=t||"center"}constructor(t){super(t)}},rO=class extends sO{get DS(){return iO(this.Z2)}get Z2(){return function(t,i){if(void 0===i)return;let e=t&&t.regions;return e&&e.getRegionById(i)||void 0}(this.W2.track,this.W2.regionId)}get NS(){return function(t){return"middle"===t?"center":t}(this.W2.lineAlign||"start")}set NS(t){this.W2.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get po(){return this.W2.position}set po(t){this.W2.position=function(t,i){return xv(t,i)}(t,this.TS)}get IS(){return function(t){return kv[t]}(this.W2.positionAlign||"middle")}set IS(t){this.W2.positionAlign=function(t,i){return Ev[Lv(t,i)]}(t||"center",this.TS)}get TS(){return function(t){return"middle"===t?"center":t}(this.W2.align||"middle")}set TS(t){this.W2.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function oO(t,i){return t.O===i.O}function hO(t,i){if(0===i.length)return;const e=i.length-1;if(i[e].MS<t.MS)return void aO(i,e,t.MS);const s=i[0];if(s.MS>t.MS)return void(t.bS=s.MS);const n=xC(i,t,L);if(n>=0)return;const r=-(n+1),o=r-1;if(o>=0){i[o].MS<t.MS&&aO(i,o,t.MS)}if(r<i.length){const e=i[r];t.bS=e.MS}}function aO(t,i,e){const s=t[i].MS;for(let n=i;n>=0&&t[n].MS===s;n--)t[n].bS=e}function uO(t){return ht(t)}var cO,lO,dO=class extends Or{get O(){return this.K2}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return uO(this)}FS(t){return oO(this,t)}constructor(t,i){super(t),this.K2=i}};function yr(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function Er(t){switch(t){case 0:return ve;case 1:return Fg;case 2:return Yg;case 3:return qg}}function fO(t,i){const e=i.Ku,s=t.byteLength,n=js(t);return i.KA(s-e),tw(n,e,s).buffer}function _O(t,i){return{id:t||"",data:i instanceof ArrayBuffer?i:void 0}}function gO(t,i,e){const s=ta(t,i);if(!yr(s))return;const n=Er(s);return{id:e,language:Pg(t,i,3),description:n(t,i),text:n(t,i)}}function wO(t,i,e){const s=ta(t,i);if(!yr(s))return;const n=Er(s);return{id:e,mimeType:ve(t,i),fileName:n(t,i),description:n(t,i),data:fO(t,i)}}function vO(t,i,e){const s=ta(t,i);if(!yr(s))return;const n=Er(s),r=[];for(;i.Ku<t.byteLength;)r.push({involvement:n(t,i),involvee:n(t,i)});return{id:e,entries:r}}function mO(t,i,e){const s=ta(t,i);if(!yr(s))return;const n=Er(s),r=Pg(t,i,3),o=ta(t,i),h=ta(t,i),a=n(t,i);let u=!1;const c=[];for(;i.Ku<t.byteLength;){let e;if(1===s){let s=Qg(t,i);void 0===s?s=u:u=s,e=Yg(t,i,s)}else e=n(t,i);if(!e||i.Ku+4>t.byteLength)break;c.push({text:e,timestamp:es(t,i)})}return{id:e,language:r,format:o,contentType:h,description:a,entries:c}}function pO(t,i,e){return{id:e,ownerIdentifier:ve(t,i),identifier:fO(t,i)}}function AO(t,i,e){const s=ta(t,i);if(!yr(s))return;const n=Er(s);return{id:e,language:Pg(t,i,3),description:n(t,i),text:n(t,i)}}function yO(t,i,e){const s=ta(t,i);if(!yr(s))return;return{id:e,text:Er(s)(t,i)}}function MO(t,i,e){return{id:e,url:ve(t,i)}}function bO(t,i,e){const s=ta(t,i);if(!yr(s))return;const n=Er(s);return{id:e,description:n(t,i),text:n(t,i)}}function TO(t,i,e){const s=ta(t,i);if(!yr(s))return;return{id:e,description:Er(s)(t,i),url:ve(t,i)}}function SO(t,i,e){switch(e){case"COM":return gO(t,i,e);case"GEO":return wO(t,i,e);case"IPL":return vO(t,i,e);case"PIC":return function(t,i,e){const s=ta(t,i);if(!yr(s))return;const n=Er(s),r=Pg(t,i,3),o=ta(t,i),h=n(t,i);let a,u;return"--\x3e"===r?(a=r,u=ve(t,i)):(a="image/"+r.toLowerCase(),u=fO(t,i)),{id:e,mimeType:a,pictureType:o,description:h,data:u}}(t,i,e);case"SLT":return mO(t,i,e);case"TXX":return bO(t,i,e);case"UFI":return pO(t,i,e);case"ULT":return AO(t,i,e);case"WXX":return TO(t,i,e);default:if("T"===e.charAt(0))return yO(t,i,e);if("W"===e.charAt(0))return MO(t,i,e)}}function NO(t,i,e){switch(e){case"APIC":return function(t,i,e){const s=ta(t,i);if(!yr(s))return;const n=Er(s),r=ve(t,i),o=ta(t,i),h=n(t,i);let a;return a="--\x3e"===r?ve(t,i):fO(t,i),{id:e,mimeType:r,pictureType:o,description:h,data:a}}(t,i,e);case"COMM":return gO(t,i,e);case"COMR":return function(t,i,e){const s=ta(t,i);if(!yr(s))return;const n=Er(s),r=ve(t,i),o=Pg(t,i,8),h=ve(t,i),a=ta(t,i),u=n(t,i),c=n(t,i);let l,d;return i.Ku<t.byteLength&&(l=ve(t,i)||"image/",d=fO(t,i)),{id:e,price:r,validUntil:o,contactURL:h,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,i,e);case"GEOB":return wO(t,i,e);case"IPLS":return vO(t,i,e);case"PRIV":return function(t,i,e){return{id:e,ownerIdentifier:ve(t,i),data:fO(t,i)}}(t,i,e);case"POSS":return function(t,i,e){return{id:e,format:ta(t,i),position:es(t,i)}}(t,i,e);case"SYLT":return mO(t,i,e);case"TXXX":return bO(t,i,e);case"UFID":return pO(t,i,e);case"USER":return function(t,i,e){const s=ta(t,i);if(!yr(s))return;const n=Er(s);return{id:e,language:Pg(t,i,3),text:n(t,i)}}(t,i,e);case"USLT":return AO(t,i,e);case"WXXX":return TO(t,i,e);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return yO(t,i,e);default:{const s=e.charAt(0);if("T"===s)return yO(t,i,e);if("W"===s)return MO(t,i,e)}}}!function(t){t[t.ISO_8859_1=0]="ISO_8859_1",t[t.UTF16_BOM=1]="UTF16_BOM",t[t.UTF16=2]="UTF16",t[t.UTF8=3]="UTF8"}(cO||(cO={})),function(t){t[t.V22=2]="V22",t[t.V23=3]="V23",t[t.V24=4]="V24"}(lO||(lO={}));var IO=10;function DO(t,i){return(127&ta(t,i))<<21|(127&ta(t,i))<<14|(127&ta(t,i))<<7|127&ta(t,i)}function EO(t,i){switch(t){case 4:return{J2:Vc(i,0),t4:Vc(i,1),i4:Vc(i,2),e4:Vc(i,3)};case 3:return{J2:Vc(i,0),t4:Vc(i,1),i4:Vc(i,2)};case 2:return{J2:Vc(i,0),s4:Vc(i,1)}}}function kO(t,i,e){switch(e.Gy){case 3:e.Vy.t4&&function(t,i){const e=i.Ku,s=es(t,i)+4,n=32768&xi(t,i);i.JA(e+s),n&&es(t,i)}(t,i);break;case 4:e.Vy.t4&&function(t,i){const e=i.Ku,s=DO(t,i);i.JA(e+s)}(t,i)}}function LO(t,i){if(t.byteLength-i.Ku<IO)return null;if(73!==ta(t,i)||68!==ta(t,i)||51!==ta(t,i))return null;const e=ta(t,i),s=ta(t,i);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(e))return null;const n=ta(t,i),r=DO(t,i);return{Gy:e,n4:s,Vy:EO(e,n),r4:r}}function xO(t,i,e){switch(e){case 2:return function(t,i){if(i.Ku+6>t.byteLength)return;return{o:Pg(t,i,3),By:xg(t,i,3)}}(t,i);case 3:return function(t,i){if(i.Ku+10>t.byteLength)return;const e=Pg(t,i,4),s=es(t,i);ta(t,i);const n=ta(t,i);return{o:e,By:s,Vy:{s4:Vc(n,0),o4:Vc(n,1),groupingIdentity:Vc(n,2)}}}(t,i);case 4:return function(t,i){if(i.Ku+10>t.byteLength)return;const e=Pg(t,i,4),s=DO(t,i);ta(t,i);const n=ta(t,i);return{o:e,By:s,Vy:{groupingIdentity:Vc(n,1),s4:Vc(n,4),o4:Vc(n,5),J2:Vc(n,6),h4:Vc(n,7)}}}(t,i)}}function CO(t){const i=js(t),e=new j(i.byteLength);let s=0;for(let t=0;t<i.byteLength;t++){const n=i[t];255===n&&t++,e[s]=n,s++}return vh(tw(e,0,s))}function OO(t,i){const e=i||new Bi,s=LO(t,e);if(!s)return null;const n=function(t,i,e){const s=[],n=i.Ku;let r=Jg(t,n,n+e.r4);const o=new Bi;switch(i.KA(e.r4),e.Gy){case 2:case 3:e.Vy.J2&&(r=CO(r))}kO(t,i,e);for(;o.Ku<r.byteLength;){const t=jO(r,o,e);if(void 0===t)break;s.push(t)}return s}(t,e,s);return{zy:s,a4:n}}function jO(t,i,e){const s=xO(t,i,e.Gy);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.By)return;const n=i.Ku;let r,o,h=Jg(t,n,n+s.By);switch(i.KA(s.By),e.Gy){case 2:{const t=s;o=h,r=SO(o,new Bi,t.o);break}case 3:{const t=s,i=new Bi;!function(t,i,e){const s=e.Vy;let n,r,o;s.s4&&(n=es(t,i)),s.o4&&(r=ta(t,i)),s.groupingIdentity&&(o=ta(t,i))}(h,i,t);o=Jg(h,i.Ku,h.byteLength),r=NO(o,new Bi,t.o);break}case 4:{const t=s,i=new Bi;t.Vy.J2&&(h=CO(h)),function(t,i,e){const s=e.Vy;let n,r,o,h;s.groupingIdentity&&(n=ta(t,i)),s.s4&&(r=es(t,i)),s.o4&&(o=ta(t,i)),s.h4&&(h=DO(t,i))}(h,i,t);o=Jg(h,i.Ku,h.byteLength),r=NO(o,new Bi,t.o);break}}if(!r){const t=iw(js(o));r=_O(s.o,t.buffer)}return r}function RO(t){return Ks(t)&&"org.id3"===t.type&&Ks(t.value)}function PO(t){return function(t,i,e){return yO(t,i,e)}(new DataView(t.data),new Bi,t.key)}function zO(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return PO(t);default:let i=t.key.charAt(0);if("T"===i)return function(t){return{id:t.key,text:t.data}}(t);if("W"===i)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return _O(t.key,t.data)}(t)}var BO=class extends Mo{get q(){return this.N2}get _E(){return this.u4?this.u4.default:void 0}get L(){return this.I2}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return $n(this)}get o(){return this.aS.id||this.u4&&this.u4.id||""}get Xw(){return this.cS}get fv(){return this.aS.inBandMetadataTrackDispatchType||""}get zt(){return this.aS.kind||Qe.HA}get kh(){return this.lS}set kh(t){t!==this.lS&&(this.lS=t,void 0!==this.u4&&(this.u4.label=t),this.Co(new hl(this)))}get gs(){return this.aS.language||""}get _v(){return this.CU}set _v(t){let i=this._v;this.CU=Af(t),this.c4();let e=this._v;i!==e&&this.Co(new uc(this)),e!==yi.Ch&&this.l4(Ls.LOADING)}get d4(){return Af(this.aS.mode)}set d4(t){this.aS.mode=t}get dS(){return this.aS}get Sg(){return this.h2}get f4(){return this.u4?+this.u4.readyState||Ls.NONE:Ls.LOADED}get yv(){return this.P2}get Av(){return this.z2}set Av(t){this.z2!==t&&(this.z2=t,this.Co(new BC(this)))}get _4(){return this.g4}set _4(t){this.g4=t,t&&(this.w4=!0,u((()=>{this.w4=!1}),50)),this.c4()}lE(t){t.Lt!==this&&(t.Lt=this,this.aS.addCue(t.W2),this.v4())}gD(t){t.Lt===this&&(t.Lt=void 0,this.aS.removeCue(t.W2),this.v4())}D2(t){var i;const e=null==(i=this.aS.cues)?void 0:i.getCueById(t);if(!e)return;const s=UO(e);return s&&Cu(s)?s[0]:s}wD(t){this.m4>=t||(this.m4=t,Le(this,t))}c4(){let t=this._v;this._4||t!==yi.Jn?this.d4=t:this.d4=yi.vv}A4(){let t=this._v,i=this.d4;t!==i&&(this._4||t!==yi.Jn||i!==yi.vv)&&("metadata"===this.zt&&i===yi.Ch?this._v=t:this.w4&&i===yi.Ch&&t===yi.Jn?this.d4=t:this._v=i)}u2(t){this.h2!==t&&(this.h2=t,this.Co(new PC(this,t)))}l4(t){let i=_.max(this.h2,this.f4,t);this.u2(i)}y4(t){let i=UO(t);if(i)return i;if(i=this.M4(t),Cu(i))for(let t of i)t.Lt=this;else i.Lt=this;return t.THEOplayerTextTrackCue=i,i}M4(t){return t.endTime<this.m4?[]:RO(t)?(this.Av=O.ID3,function(t){let i;try{i=zO(t.value)}catch(t){i=_O("")}return new dO(t,i)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.Av=O.ID3,function(t){let i=[];try{let e=OO(new DataView(t.data));if(e)for(let s of e.a4)i.push(new dO(t,s))}catch(t){}return i}(t)):function(t){return"text"in t}(t)?(this.Av=O.WEBVTT,function(t){return"regionId"in t}(t)?new rO(t):new nO(t)):new Or(t)}b4(t){let i=[];if(!t)return i;let e=t.length;for(let n=0;n<e;n++){var s;let e=this.y4(null!=(s=t[n])?s:t.item(n));if(Cu(e))for(let t of e)i.push(t);else i.push(e)}return i}T4(){let t=this.b4(this.aS.cues),i=jC(this.S2,t);for(let t of i.T2)t.fn(Ui.pS,this.v4),t.fn(Ui.mS,this.v4),this.Co(new FC(t));for(let t of i.b2)t.yn(Ui.mS,this.v4),t.yn(Ui.pS,this.v4),this.Co(new Qr(t))}Y2(){let t=this.b4(this.aS.activeCues),i=jC(this.j2,t);for(let t of i.T2)t.ro=!1;for(let t of i.b2)t.ro=!0;(i.b2.length||i.T2.length)&&this.Co(new $C(this))}mv(t){this._v=t}gn(){this.Vo();const t=this.S2.slice();for(let i of t)i.gn();To(this.S2),To(this.j2),this.aS.removeEventListener("cuechange",this.S4),this.aS.removeEventListener("cuechange",this.v4),this.u4&&(this.u4.removeEventListener("load",this.N4),this.u4.removeEventListener("error",this.I4),wi(this.u4))}constructor(t,i,e=!0){super(),this.S2=[],this.j2=[],this.CU=yi.Ch,this.h2=Ls.NONE,this.P2=void 0,this.z2=O.DEFAULT,this.w4=!1,this.m4=0,this.S4=()=>{this.c4(),this.aS.removeEventListener("cuechange",this.S4)},this.v4=()=>{this._v!==yi.Ch&&(this.T4(),this.Y2(),this.S2.length&&this.l4(Ls.LOADING))},this.N4=()=>{this.l4(Ls.LOADED)},this.I4=()=>{this.l4(Ls.ERROR)},this.aS=t,this.g4=e,this.aS.addEventListener("cuechange",this.S4),this.aS.addEventListener("cuechange",this.v4),this.u4=i,this.u4&&(this.P2=fi(this.u4.src),this.u4.addEventListener("load",this.N4),this.u4.addEventListener("error",this.I4)),this.cS=Q(),this.lS=t.label||"",this.I2=new RC(this.S2),this.N2=new RC(this.j2),this._v=this.d4,Gd((()=>{this.v4(),this.l4(Ls.NONE)}))}};function UO(t){return null==t?void 0:t.THEOplayerTextTrackCue}function QO(t,i){return wd(t.GN,i.GN)||function(t,i){return t.Lt===i.Lt?gd(OC(t),OC(i)):Ep(t.Lt,i.Lt)}(t.yS,i.yS)||function(t,i){return t===i?ws.Zr:t===Ui.mS?ws.$f:ws.Jf}(t.type,i.type)}var FO=class{tr(){To(this.D4);for(const t of this.Dl.slice())this.it(t);this.E4(),this.L4=0,this.An=0,To(this.x4),this.C4=!1,this.O4=!1,this.j4=0}tt(t){Ai(this.Dl,t)||(this.Dl.push(t),t.yn(ct.ra,this.R4),t._v!==yi.Ch&&this.P4())}it(t){jn(this.Dl,t)&&(t.fn(ct.ra,this.R4),t._v!==yi.Ch&&this.P4())}P4(){const t=this.x4,i=this.Dl.filter((t=>t._v!==yi.Ch));this.x4=i;for(const e of t)Ai(i,e)||this.z4(e);for(const e of i)Ai(t,e)||this.B4(e);this.j4=0}B4(t){if(t.yn(ct.lw,this.U4),t.yn(ct.fw,this.Q4),t.yn(ct.gw,this.F4),t.L.U>0){for(const i of t.L.Rw)this.Y4.push(i);this.G4()}}z4(t){if(t.fn(ct.lw,this.U4),t.fn(ct.fw,this.Q4),t.fn(ct.gw,this.F4),t.L.U>0){for(const i of t.L.Rw)jn(this.D4,i),jn(this.Y4,i);this.G4()}}V4(){this.Qo.Eg||this.Qo.fg?this.E4():this.G4()}G4(){this.C4&&0!==this.x4.length&&(this.j4-this.Qo.U_>.25*this.Qo.gg||this.L4||(this.L4=this.H4.W4(this.X4)))}E4(){this.L4&&(this.H4.Z4(this.L4),this.L4=0)}q4(t){0!==this.j4&&(t.ro!==kC(t,this.Qo.U_)?this.j4=0:this.An<t.MS&&t.MS<this.j4?this.j4=t.MS:this.An<t.bS&&t.bS<this.j4&&(this.j4=t.bS))}K4(){if(!this.C4)return;if(0===this.x4.length)return;if(this.Qo.Eg)return;const t=this.x4,i=this.An,e=this.Qo.U_,s=e-i<-.1;let n=this.O4||s;n&&e>i&&e-i<.1&&(n=!1),this.O4=!1;const r=[];let o=1/0;for(const i of t){const t=i.Y2(e,n);t<o&&(o=t);for(const t of i.q.Rw)r.push(t)}const h=this.D4.slice();if(n);else for(const s of t)Dp(s,i-Vt,e,h);for(let t=h.length-1;t>=0;t--)Ai(r,h[t])&&Ns(h,t);const a=[];if(!n)for(let t=h.length-1;t>=0;t--){const s=h[t];s.MS>i&&s.bS<=e&&(a.push(s),Ns(h,t))}for(const t of this.Y4)jn(a,t);To(this.Y4);const u=[],c=[];for(const t of a)t.ro||u.push(new VC(t,t.MS)),u.push(new HC(t,_.max(t.MS,t.bS))),t.ro=!1;for(const t of h)t.ro&&(u.push(new HC(t,_.max(t.MS,t.bS))),t.ro=!1);for(const t of r)t.ro||(u.push(new VC(t,t.MS)),t.ro=!0);u.sort(QO);for(const t of u){const i=t.yS;i.Co(t);const e=i.Lt;e&&(t.type===Ui.mS?e.Co(new ZC(i)):e.Co(new KC(i)),Ai(c,e)||c.push(e))}c.sort(Ep);for(const t of c)t.Co(new $C(t));this.An=e,this.D4=r,this.j4=o}gn(){this.tr(),this.Qo.fn(Tf.fm,this.J4),this.Qo.fn(Tf.jh,this.t3),this.Qo.fn($.Sm,this.J4),this.Qo.fn(Tf.Sh,this.J4),this.Qo.fn(Tf.im,this.i3),this.Qo.fn(Tf.$v,this.e3)}constructor(t,i){this.Dl=[],this.L4=0,this.An=0,this.D4=[],this.Y4=[],this.x4=[],this.C4=!1,this.O4=!1,this.j4=0,this.X4=()=>{this.L4=0,this.K4(),this.V4()},this.J4=()=>{this.K4(),this.V4()},this.t3=()=>{this.C4=!0,this.J4()},this.i3=()=>{this.O4=!0,this.j4=0,this.E4()},this.e3=()=>{this.K4(),this.V4()},this.R4=()=>{this.P4(),this.K4(),this.V4()},this.U4=t=>{const i=t.yS;Ai(this.Y4,i)||this.Y4.push(i),this.q4(i),this.G4()},this.Q4=t=>{const i=t.yS;jn(this.D4,i),jn(this.Y4,i),this.q4(i),this.G4()},this.F4=t=>{this.q4(t.yS),this.G4()},this.H4=i,this.Qo=t,t.yn(Tf.fm,this.J4),t.yn(Tf.jh,this.t3),t.yn($.Sm,this.J4),t.yn(Tf.Sh,this.J4),t.yn(Tf.im,this.i3),t.yn(Tf.$v,this.e3),this.G4()}},pn=class{W4(t){return Pc(t)}Z4(t){Ja(t)}},YO=new pn,uh=class extends FO{constructor(t,i=YO){super(t,i)}},GO=class extends rl{get va(){return this.Xa||(this.Xa=uO(this)),this.Xa}FS(t){return oO(this,t)}constructor(t,i,e){super(t,1/0,i,!1,e)}},VO=class extends GC{constructor(t,i,e=O.DEFAULT){super(Qe.ZA,"",i||"","",!1,e,!1,t)}},WO=class extends VO{lE(t){hO(t,this.S2),super.lE(t)}fa(){return $n(this)}constructor(t,i){super(t,i),this.Av=O.ID3}},HO=class extends WO{get o(){return this.aS.id||""}get fv(){return this.aS.inBandMetadataTrackDispatchType||""}get gs(){return this.aS.language||""}Xo(t){super.Xo(t),this.d4=this._v}get d4(){return Af(this.aS.mode)}set d4(t){this.aS.mode=t}get dS(){return this.aS}lE(t){super.lE(t),t.W2.track!==this.aS&&this.aS.addCue(t.W2)}gD(t){super.gD(t),t.W2.track===this.aS&&this.aS.removeCue(t.W2)}wD(t){this.m4>=t||(this.m4=t,Le(this,t))}l4(t){this.Sg=_.max(this.Sg,t)}T4(){let t=this.aS.cues;if(!t)return;const i=t.length,e=[],s=[];for(let o=0;o<i;o++){var n;const i=null!=(n=t[o])?n:t.item(o);if(RO(i)&&i.endTime>=this.m4){var r;const t=null!=(r=null==i?void 0:i.THEOplayerTextTrackCue)?r:new XO(i);e.push(t)}else s.push(i)}id(e,L);let o=jC(this.L.Rw.slice(),e);for(const t of s)this.aS.removeCue(t);for(let t of o.T2)t.gn(),this.gD(t);for(let t of o.b2)this.lE(t)}gn(){this.aS.removeEventListener("cuechange",this.v4),super.gn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.m4=0,this.v4=()=>{this._v!==yi.Ch&&(this.T4(),this.l4(Ls.LOADED))},this.aS=t,this.aS.addEventListener("cuechange",this.v4),this._v=this.d4,Gd((()=>{this.v4()}))}},XO=class extends GO{gn(){super.gn(),this.W2.THEOplayerTextTrackCue=void 0}constructor(t){super(t.startTime,zO(t.value),t.id),this.W2=t,this.W2.THEOplayerTextTrackCue=this}};function ZO(t){return"TXXX"===t.id||"TXX"===t.id}var qO=class extends xn{s3(){this.n3.yn(rc.hw,this.oz),this.n3.yn(rc.uw,this.cz)}r3(){this.n3.fn(rc.hw,this.oz),this.n3.fn(rc.uw,this.cz)}o3(t){const i=t.L.Rw[0];if(!KO(i))return;const e=function(t){const i=t.match(JO);if(!i)return;return{Lt:i[1],gs:i[2]}}(i.O.description),s=e.Lt,n=e.gs;if(this.h3(s,n))return;const r=this.oE.rE(Qe.HA,t.o,s,n,!1,O.TTML);this.tt(r),this.a3.set(t.Xw,r);for(let i of t.L.Rw)KO(i)&&this.u3(i);t.yn(ct.lw,this.l3)}h3(t,i){return this.Z.Rw.some((e=>e.kh===t&&e.gs===i))}u3(t){if(!t.Lt)return;const i=this.a3.get(t.Lt.Xw),e=ep(t.O.text,i,{vI:0,mI:1/0,pI:t.MS});for(let t of e)i.lE(t)}async tr(){for(let t of this.n3.Rw)t.fn(ct.lw,this.l3);for(let t of this.Z.Rw)this.oE.fE(t);this.a3.clear(),await super.tr()}async gn(){this.r3(),await super.gn()}constructor(t,i){super(),this.oE=t,this.n3=i,this.a3=Gs(),this.oz=async t=>{const i=t.Lt;if(i.Av||await i.k_(ct.Dw),i.Av===O.ID3){for(;0===i.L.U;)await i.k_(ct.lw);this.o3(i)}},this.cz=t=>{const i=t.Lt;if(i.Av!==O.ID3||!this.a3.has(i.Xw))return;const e=this.a3.get(i.Xw);this.it(e),this.oE.fE(e),i.fn(ct.lw,this.l3)},this.l3=t=>{KO(t.yS)&&this.u3(t.yS)},this.s3()}};function KO(t){return function(t){return ZO(t)&&JO.test(t.description)}(t.O)}var JO=/^Track:(.+),Lang:(.+)$/;var Yu=class extends Os{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(Tf.Nv),this.errorObject=t}},$O=class extends Os{constructor(t){super(Tf.Iv),this.d3=t}},tj=class extends Os{constructor(t){super("wm"),this.d3=t}},ij=new Ku,ej=class extends Os{constructor(t){super("Ws"),this.session=t}},sj=class extends Mo{sO(){return this.f3=!0,ij.JO((t=>this._3(t)),this.$O.f_)}async _3(t){try{Vr(t),await this.g3.$j(t);const i=await this.g3.tR(this.w3.fL,this.w3.SL,t);await this.v3.sO(this.w3.fL,this.w3.SL,i)}catch(t){me(t);const i=t instanceof Rr?t.RL:void 0,e=new ss(qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,i);throw this.Ss(e),e}}async hR(t,i){let e;try{e=function(t){return Ln(t,gA())}(t)?await this.g3.wR(new j(t),this.$O.f_):await this.g3.vR(new j(t),i,this.$O.f_)}catch(t){if(be(t))return;throw t}if(this.$O.f_.n_)return;const s=this.m3,n=new Oi;this.m3=n;try{await this.v3.Yn(e),await Si(100)}catch(t){const i=t instanceof Rr?t.RL:void 0;throw new ss(qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,i)}finally{void 0!==s&&await s.OL,n.LL(),this.m3===n&&(this.m3=void 0)}}Ss(t){const i=t instanceof ss?t:new ss(qa.CONTENT_PROTECTION_ERROR,t.message,t);this.Co(new Yu(i)),this.Ws()}A3(){this.v3.fn("pL",this.hO),this.v3.fn("vL",this.y3),this.v3.fn("lt",this.M3),this.b3=!1,this.$O.g_(),this.Co(new ej(this))}async Ws(){let t;this.Vo();do{t=this.m3,void 0!==t&&await t.OL}while(this.m3!==t);this.A3(),await this.v3.Ws().catch(Br)}constructor(t,i,e){super(),this.v3=t,this.g3=i,this.w3=e,this.f3=!1,this.b3=!1,this.$O=new Bd,this.hO=t=>{if(!this.$O.f_.n_)switch(t.AL){case"license-request":case"license-renewal":this.hR(t.pL,t.yL).catch((t=>this.Ss(t)));break;default:this.Ss(new ss(qa.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.AL))}},this.y3=t=>{this.v3.JC.DL(((t,i)=>{switch(t){case"usable":ra.A_((()=>{this.b3=!0,this.Co(new $O(i))}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.Co(new tj(i))}}))},this.M3=t=>{this.Ss(new ss(qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.yn("pL",this.hO),t.yn("vL",this.y3),t.yn("lt",this.M3),t.XC.then((()=>this.A3()),(t=>this.Ss(t)))}},nj=[Tf.Iv,Tf.Nv,Tf.gm],rj=class extends Mo{get Qp(){return this.Fp}Jj(){return this.T3.Jj()}S3(t){return this.N3||(this.N3=this.I3(t)),this.N3}async I3(t){Vr(t);const i=await this.T3.wR(new j(gA()),t);if(Vr(t),!this.cO)throw new g("Invalid MediaKeys when setting ServerCertificate");await this.cO.lO(i.buffer)}async D3(t){if(!this.cO)throw new g("Invalid MediaKeys when creating KeySession");try{this.E3.push(t);const i=await this.cO.uO("temporary"),e=new sj(i,this.T3,t);return this.L3.push(e),e.yn(nj,this.Ds),e.yn("Ws",this.x3),e}finally{jn(this.E3,t)}}C3(t){if(t.O3)return!1;for(const i of this.L3)if(oj(i.w3,t))return!0;for(const i of this.E3)if(oj(i,t))return!0;return!1}async gn(){this.cO=void 0,this.Vo();const t=this.L3.slice();To(this.L3),await Promise.all(t.map((t=>t.Ws()))),this.T3.h_()}constructor(t,i,e){super(),this.L3=[],this.N3=void 0,this.E3=[],this.x3=t=>{t.session.fn(nj,this.Ds),t.session.fn("Ws",this.x3),jn(this.L3,t.session)},this.Fp=t,this.cO=i,this.T3=e}};function oj(t,i){return!t.O3&&t.fL===i.fL&&Ln(t.SL,i.SL)}var hj=class extends Mo{get j3(){var t;return null==(t=this.Fp)?void 0:t.Qp}get Qz(){return this.T3}set Qz(t){this.T3=t}$n(t,i){this.yz=t,this.GZ(i)}GZ(t){this.GO=t,this.R3(this.$O.f_).catch(_t)}async R3(t){if(!ra.Ys.P3||!await this.z3(t))return this.GO&&this.GO.B3?await this.U3(t):void 0}async z3(t){var i,e;if(!(null==(i=this.GO)?void 0:i.Iz))return!1;let s=!1;var n;for(const i of null!=(n=null==(e=this.GO)?void 0:e.Iz)?n:[]){var r;for(const e of null!=(r=i.KP)?r:[])try{await this.Q3(i.Qp.fL,e,t),s=!0}catch(t){me(t)}if(s)return!0}return!1}async Q3(t,i,e){if(Vr(e),!i.byteLength)return;if(!this.GO||!this.GO.Iz.length)throw new ss(qa.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==D_&&t!==k_&&t!==E_)return void 0;const s=yw(t,i),n=this.GO.Iz;let r;for(const i of n){Vr(e);const n=s[i.Qp._L];if(n&&i.Qp.fL===t)try{const t=await this.F3(i,e);t.Jj()&&await t.S3();const s=this.Fm.K_,r={fL:i.Qp.fL,SL:n,O3:s};if(this.Y3(t,r)){const i=await t.D3(r);await i.sO()}return}catch(t){me(t),r=t}}throw await ra.IO()?new ss(qa.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new ss(qa.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async U3(t){var i;const e=null==(i=this.GO)?void 0:i.Iz;if(e)for(const i of e){Vr(t);try{const e=await this.F3(i,t);return void(e.Jj()&&await e.S3())}catch(t){me(t)}}}Y3(t,i){return ra.Ys.G3||this.Fm.Hm.Wm||!t.C3(i)}F3(t,i){return this.XZ.JO((i=>this.V3(t,i)),i)}async V3(t,i){if(Vr(i),!this.GO||!this.T3||!this.yz)throw new g("Not initialized");if(this.Fp){if(this.Fp.Qp!==t.Qp)throw new g("Internal key system error");return this.Fp}const e=this.T3,s=ol({},t,{Kz:t.Kz.map((i=>{var s;return ol({},i,{persistentState:null!=(s=i.persistentState)?s:e.IR(t.Qp),kO:i.kO||e.kO(t.Qp)})}))}),n=await this.yz.UZ(s.Qp,s.Kz),r=e.qP(s),o=new rj(s.Qp,n,r);return o.yn([Tf.Iv,Tf.Nv,Tf.gm],this.Ds),this.Fp=o,o}Ss(t){if(be(t))return;const i=t instanceof ss?t:new ss(qa.CONTENT_PROTECTION_ERROR,t.message,t);this.Co(new Yu(i))}async tr(){this.yz=void 0,this.GO=void 0,this.$O.g_(),this.$O=new Bd,await this.W3()}async W3(){await this.XZ.g_();const t=this.Fp;t&&(t.fn(Tf.gm,this.Ds),this.Fp=void 0,await t.gn())}async h_(){this.Vo(),this.Fm.fn(oA.Cv,this.H3),await this.tr(),await this.XZ.gn()}constructor(t){super(),this.$O=new Bd,this.XZ=new Ku,this.GO=void 0,this.T3=void 0,this.yz=void 0,this.Fp=void 0,this.H3=t=>{this.Q3(t.fL,t.SL,this.$O.f_).catch((t=>this.Ss(t)))},this.Fm=t,this.Fm.yn(oA.Cv,this.H3)}},aj=class extends Os{constructor(t){super(Tf.Fv),this.currentTime=t}},uj=class extends Mo{get Sg(){return void 0!==this.X3?this.X3.Sg:qo.BT}u2(){var t;null==(t=this.X3)||t.u2()}tr(){var t;null==(t=this.X3)||t.tr()}h_(){this.Vo(),void 0!==this.X3&&(this.X3.h_(),this.X3=void 0)}Z3(t){if(this.X3===t)return;const i=this.Sg;void 0!==this.X3&&this.X3.h_(),this.X3=t,void 0!==t&&(t.yn($.Nw,this.Ds),t.u2());const e=this.Sg;i!==e&&this.Co(new Dr(this.q3.U_,e))}constructor(t){super(),this.q3=t}},cj=Po.Sk||Po.Ik,lj=Po.uL,dj=Po.zk,fj=Po.zk&&Po.Ga,_j=class extends Mo{K3(){this.pz.ended||this.U_===this.ct||(this.J3=!1)}get l2(){return this.t5}get O_(){return this.yz?this.yz.O_:Ri.oU()}get R_(){const t=this.Mz;if(!t||S(t.getTime()))return;const i=1e3*this.U_;return new Date(t.getTime()+i)}get Mz(){if(this.pz.getStartDate)return this.aU&&this.i5||(this.i5=this.pz.getStartDate()),this.i5}get U_(){return this.e5?this.e5.U_:void 0!==this.s5?this.s5:this.lj.currentTime}get Iu(){return this.Wu}get ct(){return this.e5?this.e5.ct:this.yz?this.yz.ct:this.lj.duration}get G_(){return this.Eg?this.n5():this.e5?this.e5.G_:this.lj.ended||this.J3}n5(){return void 0!==this.s5&&this.ct===this.s5}get lt(){return this.vz}get pz(){return this.lj}get fg(){return this.r5?this.o5:this.e5?this.e5.fg:this.lj.paused}get pg(){return this.Uo.YB(Ri.xn(this.lj.played))}get Ti(){return this.lj.offsetHeight*ra.Ys.h5}get ji(){return this.lj.offsetWidth*ra.Ys.h5}get ya(){return this.dU}get Sg(){return this.a5.Sg}get Ig(){return this.yz?this.yz.Ig:Ri.oU()}get Eg(){return this.e5?this.e5.Eg:this.aU}get s2(){return this.e5?this.e5.s2:this.n2}get g2(){return 0!==this.u5}get og(){return this.e5?this.e5.og:this.lj.muted}set og(t){this.e5?this.e5.og=t:(this.lj.muted=t,this.c5())}get gg(){return this.e5?this.e5.gg:void 0!==this.l5?this.l5:this.lj.playbackRate}set gg(t){this.e5?this.e5.gg=t:this.fg||this.t5?(this.l5=t,this.d5()):(this.l5=void 0,this.lj.playbackRate=t,this.d5())}d5(){const t=this.gg;this.f5!==t&&(this.f5=t,this.Co(new Zs(this.U_,t)))}get _5(){return this.EB}get zg(){return this.e5?this.e5.zg:this.lj.volume}set zg(t){this.e5?this.e5.zg=t:(this.lj.volume=t,this.c5())}c5(){const t=this.zg,i=this.og;this.g5===t&&this.w5===i||(this.g5=t,this.w5=i,this.Co(new St(this.U_,this.zg)))}rg(){return EL(this.lj)}Xg(){this.v5||(this.v5=!0);const t=this.m5();return this.A5(),t}A5(){this.r5?this.o5&&(this.o5=!1,this.Co(new Rt(this.U_))):this.y5()}y5(){if(this.e5)this.e5.Xg();else{Po.zk&&!Po.Ga&&this.lj.preload===ut.yB&&(this.lj.preload=ut.ZA);const t=this.gg,i=this.lj.play();t!==this.pz.playbackRate&&(this.gg=t),Ci(i)?i.then(this.M5,this.b5):this.T5.w2()&&this.S5()}}Hg(){this.r5?this.o5||(this.o5=!0,this.Co(new Ye(this.U_))):this.N5()}N5(){this.e5?this.e5.Hg():(this.lj.pause(),this.T5.Yn()),this.I5(new Fh)}m5(){const t=new Oi;return this.D5.push(t),t.OL}E5(){for(const t of this.D5)t.LL(void 0);To(this.D5)}I5(t){for(const i of this.D5)i.xL(t);To(this.D5)}S5(){this.r5||this.e5||this.E5()}k5(t){this.r5||this.e5||this.I5(t)}JA(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.e5?this.e5.JA(t,i,e):(this.L5.g_(),this.L5=new Bd,this.x5=this.C5(t,i,e,this.x5,this.L5.f_).catch(Br))}gz(t){const i=this.Mz;if(!i||S(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.JA(e)}async C5(t,i,e,s,n){try{if(this.s5=t,this.O5=t,this.j5=ra.m_(),e&&!this.aU?this.n2=!0:(this.aU=!0,this.n2=!1),this.J3&&!this.n5()&&(this.J3=!1),this.n2?this.Co(new vC(this.U_)):this.Co(new Ur(t)),await s.catch(Br),Vr(n),this.yz&&!this.yz.lq())return void this.R5();for(this.P5&&this.z5(),this.a5.Sg===qo.BT&&await this.a5.k_($.Nw,n);0===this.lj.seekable.length||fj&&!this.v5;)await Promise.race([En(this.lj,"timeupdate",n),Si(100,n)]),Vr(n);let r=cC(this.O_,t,.05),o=this.Ig,h=!0,a=!1;for(;;){if(o=this.Ig,o.U>0&&!o.gr(r)&&(r=o.zB(r),h=!0),i&&!this.lj.fastSeek){const t=this.O_;if(!t.gr(r)){const i=cC(t,r,1);i!==r&&(r=i,h=!0)}}if(dj){const t=this.B5();void 0!==t&&r>t&&(r=t,h=!0)}if(!a){const t=this.U5();void 0!==t&&r>t&&(a=!0,await this.Q5(t,!1,n),await En(this.lj,"seeked",n),Vr(n),h=!0)}if(h){h=!1,await this.Q5(r,i,n),Vr(n);let t=this.U_;o=this.Ig,r=o.zB(r);let e=1;for(;_.abs(r-t)>=Vt;)o=this.Ig,r=wj(r,o,e),await this.Q5(r,i,n),Vr(n),t=this.U_,e++}if(!(this.lj.seeking||this.a5.Sg<qo.UT))break;await at((t=>{var i;return Promise.race([En(this.lj,"seeked",t),this.k_([Tf.Zv,Tf.Lv],t),this.a5.k_($.Nw,t),null==(i=this.yz)?void 0:i.k_(zu.EQ,t)].filter(Ks))}),n),Vr(n)}this.R5()}catch(t){if(be(t))return;0}}async Q5(t,i,e){Vr(e);let s=this.Ig;if(t=s.zB(t),this.P5){let i=!0;for(;i||this.a5.Sg<qo.QT;)s=this.Ig,s.gr(t)||(t=s.zB(t),i=!0),i?(i=!1,this.s5=t,this.F5(this.U_)):await at((t=>Promise.race([this.k_(Tf.Lv,t),this.a5.k_($.Nw,t)])),e);Vr(e)}const n=En(this.lj,"seeking",e);i&&this.lj.fastSeek?this.lj.fastSeek(t):this.lj.currentTime=t,this.s5=void 0,this.F5(this.U_),this.lj.seeking&&await n}B5(){if(!this.yz||!this.yz.oq)return;const t=this.yz.hq,i=this.yz.aq,e=t&&i?t.Sn(i):t||i;if(!e||0===e.U)return;const s=e.Cn(e.U-1),n=e.jn(e.U-1);return _.max(s,n-.001)}U5(){if(!this.yz||!this.yz.oq)return;const t=this.yz.aq;if(!t||0===t.U)return;const i=t.Cn(t.U-1);let e=t.jn(t.U-1)-.02;return e-=.001,_.max(i,e)}F5(t){this.O5!==t&&(this.O5=t,this.n2?this.Co(new vC(t)):this.Co(new Ur(t)))}R5(){const t=this.n2;this.aU=!1,this.n2=!1,this.j5=0,this.O5=NaN,this.P5&&this.Y5(),t?(this.Co(new aj(this.U_)),this.G5()):this.Co(new Ko(this.U_))}z5(){this.r5||(this.o5=this.fg,this.r5=!0,this.N5())}Y5(){this.r5&&(this.r5=!1,this.o5||this.A5())}dq(t){for(const i of t){if(i.Av===de.Tj&&tx.dq(i,this.lj))return i;if(i.Av===de.Sj&&gC.dq(i))return i}}be(){this.EB=!1,Su(this.lj)&&(this.lj.style.display="none")}ge(){this.EB=!0,Su(this.lj)&&(this.lj.style.display="block")}get nt(){return this.V5}get Ol(){return this.mU}rE(t,i,e,s,n,r,o,h,a){const u=new GC(t,i,e,s,n,r,o,a,h);return this.Dl.tt(u),this.W5.tt(u),u}Cz(){return!0}jz(t,i,e,s,n){const r=h.createElement("track");r.src=fi(t),r.kind=i,r.label=null!=e?e:"",s&&(r.srclang=s),r.default=!!n,r.id=Sr(),this.lj.appendChild(r);const o=this.lj.textTracks.getTrackById(r.id),a=new BO(o,r);return this.H5.tt(a),this.X5.push(a),a}fE(t){this.Dl.it(t),this.W5.it(t)}Pz(){for(const t of this.Dl.Rw.slice())t.gn();this.Dl.tr();for(const t of this.X5.slice())this.H5.it(t),t.gn();To(this.X5)}Jz(){let t=this.lj.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.Z5),t.addEventListener("removetrack",this.q5),t.addEventListener("change",this.K5))}Uz(){let t=this.lj.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.Z5),t.removeEventListener("removetrack",this.q5),t.removeEventListener("change",this.K5))}J5(t){t.mode=yi.vv;const i=new HO(t);this.H5.tt(i),this.W5.tt(i)}t6(t,i){const e=()=>{mj(t)&&(t.removeEventListener("cuechange",e),this.H5.tt(new BO(t,i)))};t.addEventListener("cuechange",e),t.mode=yi.vv}i6(t){let i=this.lj.getElementsByTagName("track");for(let e=0;e<i.length;e++){let s=i[e]||i.item(e);if(s.track===t)return s}}e6(){if(0===this.H5.U)return;const t=this.Ig;if(0===t.U)return;const i=t.Cn(0);if(this.s6!==i){for(const t of this.H5.Rw)t.wD(i);this.s6=i}}$n(t){return this.n6.JO((async i=>{if(Vr(i),this.yz)throw new g("Already loaded a media source");let e;if(t.Av===de.Tj)e=new tx(t,this,this.VZ,this.SO),this.P5=!1,this.a5.Z3(this.r6());else{if(t.Av!==de.Sj)throw new g("Unsupported configuration");{this.P5=cj;const i=this.r6();e=new gC(t,this,i,this.VZ,this.SO,void 0,this.N1),this.a5.Z3(i),lj&&(this.yn(Tf.fm,this.o6),this.a5.yn($.Nw,this.h6))}}return this.yz=e,await e.oX(),e}))}r6(){return this.P5?new SC(this):new TC(this)}a6(){if(this.t5)return;const t=this.gg;this.t5=!0,this.gg=t,this.lj.playbackRate=0,this.a5&&this.a5.u2()}u6(){if(!this.t5)return;const t=this.gg;this.t5=!1,this.gg=t,this.c6()}c6(){this.lj.currentTime=this.lj.currentTime,this.a5&&this.a5.u2()}async tr(){this.aU=!1,this.n2=!1,ra.p_(this.u5),this.u5=0,this.Uo=Ri.oU(),this.L5.g_(),this.s5=void 0,this.O5=NaN,this.i5=void 0,this.P5=!1,this.r5=!1,this.vz=void 0,this.J3=!1,this.l6=void 0,this.s6=0,this.d6=!1,this.v5=!1,this.f6&&(this._6(),this.f6=!1),this.I5(new Fh),this.a5.Z3(new TC(this)),this.T5.tr(),this.H5.tr(),this.u6(),lj&&(Ja(this.g6),this.g6=0,this.fn(Tf.fm,this.o6)),await this.n6.g_(),await this.n6.JO((async()=>{this.yz&&(await this.yz.h_(),this.yz=void 0,Po.wk&&Po.pk<3&&this.w6())}))}w6(){this.v6();const t=this.lj,i=t.parentElement,e=t.tagName.toLowerCase();this.lj=tP(e),this.retainMediaElementState(t),iP(t),null==i||i.replaceChild(this.lj,t),this._6(),this.a5.Z3(this.r6()),this.T5.fn($.Sm,this.m6),this.T5.h_(),this.T5=new DC(this),this.T5.yn($.Sm,this.m6),this.EB?this.ge():this.be(),this.Co(new cv),this.Co(new zs)}retainMediaElementState(t){this.pz.muted=t.muted,this.pz.volume=t.volume}async h_(){this.f6=!1,this.v6(),this.Uz(),await this.tr(),await this.n6.gn(),this.T5.h_(),this.a5.h_(),await this.VZ.h_(),this.Pz(),this.Dl.gn(),this.H5.gn(),await this.p6.gn(),this.A6.gn(),this.V5.gn(),this.Vo()}_6(){this.pz.addEventListener("play",this.y6),this.pz.addEventListener("pause",this.M6),this.pz.addEventListener("timeupdate",this.b6),this.pz.addEventListener("progress",this.T6),this.pz.addEventListener("loadstart",this.S6),this.pz.addEventListener("ended",this.N6),this.pz.addEventListener("ratechange",this.I6),this.pz.addEventListener("volumechange",this.D6),this.pz.addEventListener("durationchange",this.E6),this.pz.addEventListener("resize",this.k6),this.pz.addEventListener("loadedmetadata",this.k6),this.pz.addEventListener("error",this.L6),this.pz.addEventListener("emptied",this.x6),kM()?(this.lj.addEventListener("encrypted",this.C6),this.lj.addEventListener("waitingforkey",this.O6)):void 0!==Ua.WebKitMediaKeys&&"function"==typeof Ua.WebKitMediaKeys.isTypeSupported?this.lj.addEventListener("webkitneedkey",this.j6):it()?this.lj.addEventListener("webkitneedkey",this.R6):void 0!==Ua.MSMediaKeys&&"function"==typeof Ua.MSMediaKeys.isTypeSupported&&this.lj.addEventListener("msneedkey",this.P6)}v6(){this.pz.removeEventListener("play",this.y6),this.pz.removeEventListener("pause",this.M6),this.pz.removeEventListener("timeupdate",this.b6),this.pz.removeEventListener("progress",this.T6),this.pz.removeEventListener("loadstart",this.S6),this.pz.removeEventListener("ended",this.N6),this.pz.removeEventListener("ratechange",this.I6),this.pz.removeEventListener("volumechange",this.D6),this.pz.removeEventListener("durationchange",this.E6),this.pz.removeEventListener("resize",this.k6),this.pz.removeEventListener("loadedmetadata",this.k6),this.pz.removeEventListener("error",this.L6),this.pz.removeEventListener("encrypted",this.C6),this.pz.removeEventListener("waitingforkey",this.O6),this.pz.removeEventListener("webkitneedkey",this.j6),this.pz.removeEventListener("webkitneedkey",this.R6),this.pz.removeEventListener("msneedkey",this.P6),this.pz.removeEventListener("emptied",this.x6)}z6(){this.e5||(this.Uo=this.pg,this.e5=AC(this),this.v6(),this.e5.yn(mC,this.Ds))}B6(){if(!this.e5)return;const t=this.e5;this.e5=void 0,this.a5.u2(),yC(this,t),t.h_(),this._6()}G5(){const t=this.U_;this.Co(new ri(t,void 0)),this.l6=t}rB(t){this.vz=t,this.I5(this.vz),this.Co(new EC(this.vz))}get K_(){return!!this.lj.webkitCurrentPlaybackTargetIsWireless}get U6(){return this.Q6}get Hm(){return ol({},XL)}F6(){this.U6||(sP(this.lj,ra.Ys),this.Q6=!0)}Y6(t){t.appendChild(this.lj)}I0(){lj&&this.o6(),this.a5.u2()}get Qz(){return this.VZ.Qz}set Qz(t){this.VZ.Qz=t}get G6(){return this.N1}set G6(t){this.N1=t}get j3(){return this.VZ.j3}$g(){this.VZ.W3().catch(Br),this.H5.tr()}get Yg(){return this.d6}set Yg(t){this.d6=t,this.f6&&!this.d6&&(this.f6=!1,this._6())}constructor(t,i,e,s){super(),this.vz=void 0,this.EB=!0,this.yz=void 0,this.n6=new Ku,this.e5=void 0,this.dU=new Et,this.X5=[],this.s5=void 0,this.j5=0,this.O5=NaN,this.i5=void 0,this.l6=void 0,this.s6=0,this.aU=!1,this.n2=!1,this.V6=qo.BT,this.u5=0,this.x5=Promise.resolve(),this.L5=new Bd,this.D5=[],this.Uo=Ri.oU(),this.l5=void 0,this.f5=1,this.w5=!1,this.g5=1,this.J3=!1,this.d6=!1,this.f6=!1,this.P5=!1,this.r5=!1,this.o5=!1,this.t5=!1,this.Q6=!1,this.g6=0,this.v5=!1,this.Z5=t=>{const i=t.track,e=this.i6(i);if(!vj(this.H5,i)){if(Po.zk){if(i.kind===Qe.ZA)return void this.J5(i);if(i.kind===Qe.sD&&""===i.label&&""===i.language&&!mj(i))return void this.t6(i,e)}this.H5.tt(new BO(i,e))}},this.q5=t=>{const i=vj(this.H5,t.track);i&&this.H5.it(i)},this.K5=()=>{for(let t=0;t<this.H5.U;t++){let i=this.H5.zw(t);i instanceof BO&&i.A4()}},this.o6=()=>{if(void 0===this.yz||!ZL(this.yz))return;const t=this.yz,i=t.I1,e=t.D1;if(!i||!e)return;if(t.oq)return void this.u6();if(t.Sg===Qu.m0)return;const s=i.O_,n=e.O_;if(0===s.U&&0===n.U)return void this.u6();const r=this.U_;if(r<s.Cn(0)||r<n.Cn(0))return void this.u6();if(s.gr(r)!==n.gr(r)){if(t.cq(r))return;this.a6()}else if(this.u6(),!this.g6&&this.T5.w2()){s.GB(n).ZB(r,r+.5)&&(this.g6=Pc(this.W6))}},this.W6=()=>{this.g6=0,this.o6()},this.h6=()=>{if(this.Eg||this.s2)return;if(this.a5.Sg>=qo.QT)return;if(void 0===this.yz||!ZL(this.yz))return;const t=this.yz,i=t.I1,e=t.D1;if(!i||!e)return;const s=this.U_,n=i.O_,r=e.O_;if(!n.gr(s)||!r.gr(s))return;n.GB(r).ZB(s-5,s)&&(this.t5?this.u6():this.c6())},this.y6=()=>{this.Co(new Rt(this.U_))},this.M6=()=>{this.k5(new Fh),this.Co(new Ye(this.U_))},this.m6=()=>{this.S5(),this.Co(new $e(this.U_))},this.I6=()=>{this.d5()},this.E6=()=>{this.Co(new Te(this.ct))},this.T6=()=>{this.Co(new Gt(this.U_))},this.S6=()=>{this.Co(new tn)},this.b6=()=>{const t=this.U_,i=this.Eg,e=this.a5.Sg<qo.QT&&!this.G_,s=void 0!==this.l6,n=s&&this.l6!==t;this.e6(),(i||!s||n&&!e)&&this.G5()},this.N6=()=>{!this.J3&&this.G_&&(this.J3=!0,this.Co(new pa(this.U_)))},this.L6=()=>{if(null!==this.lj.error){const i=this.lj.error;var t;this.rB(new Nt(null!=(t=i.code)?t:to.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.x6=()=>{this.d6&&(this.v6(),this.f6=!0)},this.H6=t=>{if(ra.p_(this.u5),this.u5=0,t.readyState<=qo.UT)if(this.aU||this.n2){const i=ra.m_()-this.j5;if(i<250)return void(this.u5=ra.A_((()=>this.H6(t)),250-i))}else if(void 0!==this.yz&&this.yz.cq(this.U_))return void(this.u5=ra.A_((()=>this.H6(t)),250));this.V6!==t.readyState&&(this.V6=t.readyState,this.Co(t))},this.D6=()=>{this.c5()},this.k6=()=>{this.Rg>0&&this.Cg>0&&this.Co(new Cs)},this.C6=t=>{this.Co(new On(t.initDataType,t.initData||new ArrayBuffer(0)))},this.O6=()=>{this.Co(new dA)},this.P6=t=>{const i=t.initData,e=i?iw(i).buffer:new ArrayBuffer(0);this.Co(new On(D_,e))},this.j6=t=>{if(t.initData){const i=function(t){try{const i=vh(t),e=new Bi,s=Eg(i,e,es(i,e,!0));return Gn(Hg(s,!0))}catch(t){return}}(t.initData);if(!i)return;this.Co(new On(k_,i))}else this.Co(new On(k_,new ArrayBuffer(0)))},this.R6=t=>{const i=t.initData,e=i?iw(i).buffer:new ArrayBuffer(0);this.Co(new On(D_,e))},this.M5=()=>{this.S5()},this.b5=t=>{this.k5(t)},this.X6=t=>{this.Co(t),t.type===Tf.Nv&&this.rB(ia(t.errorObject))},this.lj=t,this.SO=i,this.Wu=e,this.mU=s,this.a5=new uj(this),this.a5.yn($.Nw,this.H6),this.a5.Z3(new TC(this)),this.T5=new DC(this),this.T5.yn($.Sm,this.m6),this.VZ=new hj(this),this.VZ.yn([Tf.Iv,Tf.Nv,Tf.gm],this.X6),this.Dl=new iu,this.H5=new iu,this.A6=new vl([this.Dl,this.H5]),this.p6=new qO(this,this.A6),this.V5=new vl([this.A6,this.p6.Z]),this.W5=new uh(this),this._6(),this.Jz()}};var gj=.01;function wj(t,i,e){if(void 0===e&&(e=0),!i.U)return 0;let s=i.zB(t);const n=gj*e;return s===i.Cn(0)?s+=n:s===i.jn(i.U-1)&&(s-=n),s}function vj(t,i){for(let e of t.Rw)if(e.dS===i)return e}function mj(t){return!!t.cues&&t.cues.length>0}var pj={mZ:void 0,pZ:void 0,AZ:void 0,yZ:void 0,MZ:void 0,bZ:void 0,DZ:void 0,TZ:void 0,SZ:void 0,NZ:void 0,IZ:void 0},Aj=class extends Mo{get va(){return this.Xa||(this.Xa=YL(this)),this.Xa}get mZ(){}get pZ(){}get AZ(){}get yZ(){}get MZ(){}get bZ(){}get DZ(){}get TZ(){}get SZ(){}get NZ(){}get IZ(){}constructor(...t){super(...t),this.Xa=void 0}},yj=class extends _j{Vg(){}get Cg(){return 0}get Rg(){return 0}constructor(t,i,e){super(t,i,e,new Aj)}},Mj=class{get we(){return this.Z6}be(){this.Z6.style.display="none"}ge(){this.Z6.style.display="block"}Y6(t){t.appendChild(this.Z6)}gn(){wi(this.Z6)}constructor(t=5){let i=Ua.document.createElement("div");i.className="theoplayer-texttracks",i.style.position="absolute",i.style.display="none",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.width="100%",i.style.height="100%",i.style.lineHeight="1.3em",i.style.zIndex=""+t,this.Z6=i,this.ge()}};function bj(t,i){return ol({},i,uf(function(t){return{mZ:t.mZ,pZ:t.pZ,AZ:t.AZ,yZ:t.yZ,MZ:t.MZ,bZ:t.bZ,DZ:t.DZ,TZ:t.TZ,SZ:t.SZ,NZ:t.NZ,IZ:t.IZ}}(t)))}function Tj(t){return t.AZ&&el(t.AZ,"%")?Number(t.AZ.replace("%",""))/100:t.AZ&&el(t.AZ,"em")?Number(t.AZ.replace("em","")):1}var ou,Sj,Tc,Nj=class t{get q6(){return this.K6+this.ji}set q6(t){this.K6=t-this.ji}get J6(){return this.t9+this.Ti}set J6(t){this.t9=t-this.Ti}i9(t){return this.K6<t.q6&&this.q6>t.K6&&this.t9<t.J6&&this.J6>t.t9}oS(t){return this.K6<=t.K6&&t.q6<=this.q6&&this.t9<=t.t9&&t.J6<=this.J6}$A(){return new t(this.K6,this.t9,this.ji,this.Ti)}e9(i){const e=this.K6+i,s=this.t9+i,n=_.max(0,this.ji-2*i),r=_.max(0,this.Ti-2*i);return new t(e,s,n,r)}s9(i){const e=_.min(this.K6,i.K6),s=_.max(this.q6,i.q6),n=_.min(this.t9,i.t9),r=_.max(this.J6,i.J6);return new t(e,n,s-e,r-n)}constructor(t,i,e,s){this.K6=t,this.t9=i,this.ji=e,this.Ti=s}},ih=class{n9(t){const i=this.r9(t);if(!i)return!1;for(const t of i)wi(t);return this.o9(t),!0}get Lt(){return this.CS}get pz(){return this.lj}get Iu(){return this.Wu}get h9(){return this.a9}get u9(){return this.c9}oX(){this.l9(),this.CS.L.Rw.forEach((t=>this.lE(t))),this.Iu.yn(Bh.pn,this.d9),this.re(this.Iu.ku,this.Iu._u)}f9(t){this.c9=t,this.a9=bj(this.c9,this._9),this.a9.mZ&&(this.pz.style.fontFamily=this.a9.mZ),this.a9.DZ&&(this.pz.style.visibility=this.a9.DZ),this.re(this.Iu.ku,this.Iu._u),this.g9(!0)}w9(){return this.a9}v9(t){return this.m9.has(t.Xw)}l9(){this.CS.yn(ct.lw,this.p9),this.CS.yn(ct.fw,this.A9),this.CS.yn(ct.ra,this.y9)}M9(){this.CS.fn(ct.lw,this.p9),this.CS.fn(ct.fw,this.A9),this.CS.fn(ct.ra,this.y9)}b9(t){t.yn(Ui.mS,this.T9),t.yn(Ui.pS,this.S9),t.yn(Ui.Lw,this.N9)}I9(t){t.fn(Ui.mS,this.T9),t.fn(Ui.pS,this.S9),t.fn(Ui.Lw,this.N9)}lE(t){this.b9(t),t.ro&&this.D9(t)}gD(t){this.I9(t),this.E9(t)}k9(){this.CS._v===yi.Jn?this.L9():this.x9()}L9(){if(!this.C9)return;this.C9=!1;const t=this.Iu.ku,i=this.Iu._u;this.re(t,i),this.g9(!1)}x9(){this.C9||(this.C9=!0,this.g9(!0))}D9(t){this.C9||t.ro&&!this.v9(t)&&this.g9(!1)}E9(t){this.v9(t)&&this.g9(!0)}O9(t){(t.ro||this.v9(t))&&this.g9(!0)}g9(t){const i=this.j9,e=this.C9?[]:this.CS.q.Rw.slice();this.R9(e,i,t),this.j9=e}r9(t){return this.m9.get(t.Xw)}P9(t,i){this.m9.set(t.Xw,i)}o9(t){this.m9.delete(t.Xw)}z9(t){const i=[],e=this.a9;if(void 0!==e.TZ){const s=t.$A();s.Ti=e.TZ,i.push(s)}if(void 0!==e.SZ){const s=t.$A();s.Ti=e.SZ,s.J6=t.J6,i.push(s)}return i}B9(){return this.j9.slice()}gn(){wi(this.pz),this.m9.clear(),this.M9(),this.CS.L.Rw.forEach((t=>this.I9(t))),this.Iu.fn(Bh.pn,this.d9)}constructor(t,i,e,s,n){this.m9=Gs(),this.C9=!0,this.c9=ol({},pj),this.j9=[],this.p9=t=>this.lE(t.yS),this.A9=t=>this.gD(t.yS),this.y9=()=>this.k9(),this.T9=t=>this.D9(t.yS),this.S9=t=>this.E9(t.yS),this.N9=t=>this.O9(t.yS),this.d9=t=>this.re(t.width,t.height),this.CS=t,this._9=this.a9=n,this.lj=this.U9(e),this.Wu=s,i.appendChild(this.lj)}};function Ij(t,i,e,s,n){let r=t.$A(),o=r,h=1,a=!1;const u=C(getComputedStyle(i).lineHeight)/4;if(!S(u)&&u>0){for(let i=0;i<e.length&&!a;i++){for(;!Lj(t,s,e[i],.01)&&(!s.oS(t)||Dj(t,n));)kj(t,e[i],u);if(s.oS(t)){o=t.$A(),a=!0;break}let c=xj(t,s);h>c&&(o=t.$A(),h=c),t=r.$A()}s.oS(t)||(o=r.$A())}i.style.left=(o.K6-s.K6)/s.ji*100+"%",i.style.top=(o.t9-s.t9)/s.Ti*100+"%"}function Dj(t,i){return i.some((i=>t.i9(i)))}function Ej(t){return new Nj(t.left,t.top,t.width,t.height)}function kj(t,i,e){switch(i){case 0:t.K6+=e;break;case 1:t.K6-=e;break;case 2:t.t9+=e;break;case 3:t.t9-=e}}function Lj(t,i,e,s){switch(e){case 0:return t.q6>i.q6+s;case 1:return t.K6<i.K6-s;case 2:return t.J6>i.J6+s;case 3:return t.t9<i.t9-s}}function xj(t,i){return _.max(0,_.min(t.q6,i.q6)-_.max(t.K6,i.K6))*_.max(0,_.min(t.J6,i.J6)-_.max(t.t9,i.t9))/(t.ji*t.Ti)}function Cj(t,i){return t?{Q9:t.Q9,F9:t.F9,Y9:t.Y9,Ml:i}:null}function Oj(t){const i=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return i?{Q9:x(i[1],16),F9:x(i[2],16),Y9:x(i[3],16)}:null}function jj(t){return("0"+t.toString(16)).slice(-2)}function Rj(t){return"#"+jj(t.Q9)+jj(t.F9)+jj(t.Y9)}function Pj(t){const i=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return i?{Q9:x(i[1],10),F9:x(i[2],10),Y9:x(i[3],10),Ml:C(i[4])}:null}function zj(t,i){return function(t){return t?"rgba("+t.Q9+", "+t.F9+", "+t.Y9+", "+t.Ml+")":void 0}(Cj(Oj(t),i/100))}function Bj(t){return Uj[t||"none"]}!function(t){t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y"}(ou||(ou={})),function(t){t.qc='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Wc='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.Gc='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Xc='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif'}(Sj||(Sj={})),function(t){t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent"}(Tc||(Tc={}));var Uj={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},Qj=xd({monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:"monospace, sans-serif",monospaceSerif:"monospace, serif",proportionalSansSerif:"Arial",proportionalSerif:"Times New Roman",default:"monospace, sans-serif"}),Fj=16,Yj="1.3em",Gj={pZ:Tc.WHITE,mZ:"Arial, Helvetica, Sans-Serif",AZ:"100%",yZ:Tc.TRANSPARENT,MZ:Tc.TRANSPARENT,bZ:"uniform",DZ:"visible",TZ:void 0,SZ:void 0,NZ:void 0,IZ:void 0},Vj=class extends ih{U9(t){let i=h.createElement("div");i.className="theoplayer-ttml-texttrack-"+t;const e=i.style;return e.position="absolute",db(e,"flex"),e.flexDirection=e.webkitFlexDirection="column",e.overflow="hidden",e.pointerEvents="none",e.top="0",e.left="0",e.width="100%",e.height="100%",e.fontSize=Fj+"px",e.lineHeight=Yj,i}re(t,i){const e=_.min(t/640,i/360),s=Fj*e*Tj(this.h9);this.pz.style.fontSize=s+"px"}R9(t,i,e){for(const t of i)!e&&t.ro||this.n9(t);let s=[];const n=Ej(this.pz.getBoundingClientRect());s.push(...this.z9(n));for(const i of t){const t=this.G9(i,s,n);for(const i of t)s.push(i.e9(.1))}}G9(t,i,e){let s=this.r9(t);s||(s=this.V9(t),this.P9(t,s));for(const t of s)this.pz.appendChild(t);const n=[],r=[ou.POS_Y,ou.NEG_Y,ou.POS_X,ou.NEG_X];for(const t of s){Ij(nR(t),t,r,e,i),n.push(nR(t))}return n}V9(t){let i=[];const e=t.II,s=t.AI,n=t.kI,r=t.O,o=t.SI,a=o?_.min(640/o.width,360/o.height):1,u=this.h9;if(0===w.keys(s).length){const t=h.createElement("div");eR(t),Wj(r,e,n,t,t,a,u),Hj(t,"body",u),t.firstChild&&i.push(t)}else for(let t of w.keys(s)){let o=h.createElement("div");o.id=t,eR(o),qj(o,"region",s[t],e,a),Wj(r,e,n,o,o,a,u),Hj(o,"body",u),o.firstChild&&i.push(o)}return i}f9(t){return WL(this.pz,t),super.f9(t)}constructor(t,i,e,s){super(t,i,e,s,Gj)}};function Wj(t,i,e,s,n,r,o){if(Ka(t)&&function(t){const i=t.qI.toUpperCase();return"SPAN"===i||"P"===i||"BR"===i||"DIV"===i||"BODY"===i}(t)){let a=Xj(t);if(!a||(null==n?void 0:n.id)===a){let a;if("BODY"===t.qI.toUpperCase())a=n;else{if(a=function(t){let i;switch(t.qI.toUpperCase()){case"BR":i=h.createElement("br");break;case"SPAN":i=h.createElement("span"),sR(i),Zj(i,t);break;case"P":i=h.createElement("p"),function(t){sR(t);const i=t.style;i.textAlign="inherit",i.padding="0",i.margin="0"}(i),Zj(i,t);break;case"DIV":i=h.createElement("div"),Zj(i,t)}return i}(t),!a)return;s.appendChild(a)}!function(t,i,e,s,n){let r=i.$I("style");$j(t,i.qI,r,e,s,n),function(t,i,e,s){for(const n of i.ZI)tR(t,i.qI,n.qI,n.lT,e,s)}(t,i,s,n)}(a,t,i,n,r),function(t,i,e){let s=null==i?void 0:i.$I("smpte:backgroundImage");if(s){s=s.replace("#","");let n=e&&Kj(e,(t=>t.ZI.some((t=>"id"===t.qI&&t.lT===s))));n&&Jj(t,n,i,!0)}!function(t,i){const e=i.m[0];if(!e||"metadata"!==e.qI.toLowerCase())return;const s=e.m[0];Jj(t,s,i)}(t,i)}(a,t,e),Hj(a,t.qI,o);for(const s of t.iD)Wj(s,i,e,a,n,r,o)}}else if(Fm(t)){const i=h.createTextNode(t.ly);if("SPAN"!==s.nodeName.toUpperCase()){const t=h.createElement("span");sR(t),Hj(t,"span",o),t.appendChild(i),s.appendChild(t)}else s.appendChild(i)}}function Hj(t,i,e){if(!e)return;const s=t.style;switch(e.mZ&&(s.fontFamily=e.mZ),e.pZ&&(s.color=e.pZ),i.toLowerCase()){case"span":e.yZ&&(s.background=e.yZ);break;case"p":case"div":e.MZ&&(s.backgroundColor=e.MZ);break;case"body":e.bZ&&(s.textShadow=Bj(e.bZ))}}function Xj(t){const i=t.$I("region");if("p"===t.qI.toLowerCase())return i;const e=[];for(const i of t.m)e.push(Xj(i));return Dd(e),0===e.length?i:1===e.length?null!=(s=e[0])?s:i:void 0;var s}function Zj(t,i){let e=i.tD(Zm,"id");e&&(t.id=e)}function qj(t,i,e,s,n){$j(t,i,e.style,s,t,n);for(const s of w.keys(e))tR(t,i,s,e[s],t,n)}function Kj(t,i){if(i(t))return t;for(let e of t.m){const t=Kj(e,i);if(t)return t}return null}function Jj(t,i,e,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const i=t&&t.iD.length>0?t.iD[0]:null;return i&&Fm(i)?"data:image/png;base64,"+i.ly:""}(i),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,i){const e=t.style;db(e,"flex"),e.flexDirection=e.webkitFlexDirection="column";let s=i.$I("smpte:backgroundImageVertical"),n="center";if(s)switch(s.toLowerCase()){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end";break;case"inherit":n="inherit"}e.justifyContent=e.webkitJustifyContent=n;let r=i.$I("smpte:backgroundImageHorizontal"),o="center";if(r)switch(r.toLowerCase()){case"left":o="flex-start";break;case"center":o="center";break;case"right":o="flex-end";break;case"inherit":o="inherit"}e.alignItems=e.webkitAlignItems=o}(t,e),t.appendChild(n)}function $j(t,i,e,s,n,r){if(e)for(const o of e.split(" "))if(s[o])for(const e of w.keys(s[o]))"style"===e.toLowerCase()?$j(t,i,s[o][e],s,n,r):tR(t,i,e,s[o][e],n,r)}function tR(t,i,e,s,n,r){const o=t.style;switch(e){case"backgroundColor":o.backgroundColor=s;break;case"color":o.color=s;break;case"direction":o.direction=s;break;case"display":"none"===s&&(o.display="none");break;case"fontFamily":var h;o.fontFamily=null!=(h=Qj.get(s))?h:s;break;case"fontSize":{let t=s;if(el(t,"px")){const i=Number(t.slice(0,-2));t=i*r/Fj+"em"}else el(t,"c")&&(t=t.replace("c","em"));o.fontSize=t,o.lineHeight&&"inherit"!==o.lineHeight||(o.lineHeight=Yj);break}case"fontStyle":o.fontStyle=s;break;case"fontWeight":o.fontWeight=s;break;case"lineHeight":{let t=s;if(el(t,"px")){const i=Number(t.slice(0,-2));t=i*r+"px"}o.lineHeight=t;break}case"opacity":o.opacity=s;break;case"overflow":o.overflow=s;break;case"padding":o.padding=s;break;case"textAlign":o.textAlign=s;break;case"textDecoration":switch(s){case"lineThrough":o.textDecoration="line-through";break;case"underline":case"overline":o.textDecoration=s;break;case"noUnderline":case"noLineThrough":case"noOverline":o.textDecoration="none"}break;case"unicodeBidi":switch(s){case"bidiOverride":o.unicodeBidi="bidi-override";break;case"normal":case"embed":case"isolate":o.unicodeBidi=s}break;case"visibility":o.visibility=s;break;case"zIndex":o.zIndex=s;break;case"displayAlign":{let t;switch(s.toLowerCase()){case"before":t="flex-start";break;case"center":t="center";break;case"after":t="flex-end";break;case"justify":t="space-between";break;default:return}o.justifyContent=o.webkitJustifyContent=t;break}case"extent":{const e=iR(i.toLowerCase())?n:t;let r,o,h=s.split(" ",2);2===h.length?(r=h[0],o=h[1]):r=o="100%",e&&(e.style.height=o,e.style.width=r);break}case"origin":{const e=iR(i.toLowerCase())?n:t,[r,o]=s.split(" ",2);e&&(r||o)&&(r&&(e.style.left=r),o&&(e.style.top=o));break}case"showBackground":case"textOutline":break;case"wrapOption":switch(s){case"wrap":o.whiteSpace="normal";break;case"noWrap":o.whiteSpace="nowrap"}break;case"writingMode":{let t,i,e,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",i="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",e="upright";break;case"tblr":t="vertical-lr",e="upright";break;case"rl":t="horizontal-tb",i="rtl";break;default:return}o.writingMode=t,o.setProperty("-webkit-writing-mode",t),i&&(o.direction=i),e&&(o.textOrientation=e,o.setProperty("-webkit-text-orientation",e)),n&&(o.unicodeBidi=n);break}case"linePadding":if(el(s,"c")){let t=s.replace("c","em");o.paddingLeft=o.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?o.textAlign="":o.textAlign=s}}function iR(t){return"div"===t||"p"===t||"span"===t}function eR(t){const i=t.style;db(i,"flex"),i.flexDirection=i.webkitFlexDirection="column",i.top="auto",i.left="5%",i.width="90%",i.height="100%",i.maxHeight="100%",i.maxWidth="100%",i.overflow="visible",i.position="absolute",i.fontFamily=Gj.mZ,i.color=Gj.pZ,i.textShadow=Bj(Gj.bZ),i.textAlign="start",i.writingMode="horizontal-tb",i.setProperty("-webkit-writing-mode","horizontal-tb"),i.padding="0",i.margin="0",i.fontSize="inherit",i.lineHeight="inherit"}function sR(t){const i=t.style;i.fontFamily="inherit",i.color="inherit",i.fontSize="inherit",i.lineHeight="inherit"}function nR(t){let i=Ej(t.getBoundingClientRect());if("visible"===getComputedStyle(t).overflow&&t.scrollHeight>t.clientHeight){const e=t.children;for(let t=0;t<e.length;t++){const s=e[t];i=i.s9(Ej(s.getBoundingClientRect()))}}return i}var rR,oR,hR=void 0;function aR(t){return hR||(hR=Ua.document.createElement("textarea")),hR.innerHTML=t,hR.value}function uR(t,i){let e="Data",s="",n=[],r=t.charAt(i.Ku),o="",h={Av:"starttag",WR:"",W9:[]};for(;i.Ku<t.length+1;){switch(r=i.Ku<t.length?t.charAt(i.Ku):"EOF",e){case"Data":switch(r){case"&":let n=t.substring(i.Ku).match(/&#?[0-9a-zA-Z]+;/);n?(s+=aR(n[0]),i.KA(n[0].length-1)):s+="&";break;case"<":if(s)return{Av:"string",O:s};e="Tag";break;case"EOF":return{Av:"string",O:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":e="StartTagAnnotation";break;case".":e="StartTagClass";break;case"/":e="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,e="TimestampTag";break;case">":return i.KA(1),h;case"EOF":return h;default:s=r,e="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":e="StartTagAnnotation";break;case"\n":o=r,e="StartTagAnnotation";break;case".":e="StartTagClass";break;case">":return i.KA(1),{Av:"starttag",WR:s,W9:[]};case"EOF":return{Av:"starttag",WR:s,W9:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(o),o="",e="StartTagAnnotation";break;case"\n":n.push(o),o=r,e="StartTagAnnotation";break;case".":n.push(o),o="";break;case">":return i.KA(1),n.push(o),{Av:"starttag",WR:s,W9:n};case"EOF":return n.push(o),{Av:"starttag",WR:s,W9:n};default:o+=r}break;case"StartTagAnnotation":switch(r){case"&":e="CharRefInAnnotation";break;case">":i.KA(1);let t=o.trim();return t=t.replace(/\s/," "),{Av:"starttag",WR:s,W9:n,H9:t};default:o+=r}break;case"CharRefInAnnotation":let a="";for(let e=i.Ku;">"===t.charAt(e);e++)a+=t.charAt(e);o+=a||"&",e="StartTagAnnotation";break;case"EndTag":switch(r){case">":return i.KA(1),{Av:"endtag",WR:s};case"EOF":return{Av:"endtag",WR:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return i.KA(1),{Av:"timestamp",X9:s};case"EOF":return{Av:"timestamp",X9:s};default:s+=r}}i.KA(1)}return h}function cR(t){let i;if(t.getBoundingClientRect&&t.parentNode&&(i=t.getBoundingClientRect()),!i)return{left:0,top:0};const e=h.documentElement,n=h.body,r=e.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=i.left+o-r,u=e.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,l=i.top+c-u;return{left:_.round(a),top:_.round(l)}}function lR(t,i,e,s){if(void 0===s&&(s=0),!t||!i)return;t.style.left="0px";let n=t.getClientRects(),r=i.getClientRects();if(0===n.length||0===r.length)return;let o=n[0],h=r[0],a=o.width/2+o.left;dR(t,h.width/2+h.left-a,e,s)}function dR(t,i,e,s){void 0===s&&(s=0),_R(t,i,"left","right",e,s)}function fR(t,i,e,s){void 0===s&&(s=0),_R(t,i,"top","bottom",e,s)}function _R(t,i,e,s,n,r){void 0===r&&(r=0);const o=t.getClientRects();if(n&&o.length>0){const t=o[0];i=Qh(i,n[e]+r-t[e],n[s]-r-t[s])}t.style[e]=i+"px"}function gR(t,i){void 0===t.textContent?t.innerText=i:t.textContent=i}!function(t){t.Z9="Data",t.q9="Tag",t.K9="StartTag",t.J9="StartTagClass",t.t8="StartTagAnnotation",t.i8="CharRefInAnnotation",t.e8="EndTag",t.s8="TimestampTag"}(rR||(rR={})),function(t){t.n8="string",t.r8="starttag",t.o8="endtag",t.h8="timestamp"}(oR||(oR={}));var wR={pZ:Tc.WHITE,mZ:"sans-serif",AZ:"100%",yZ:"rgba(0,0,0,0.8)",MZ:Tc.TRANSPARENT,bZ:"none",DZ:"visible",TZ:void 0,SZ:void 0,NZ:void 0,IZ:void 0},vR="theoplayer-webvtt-region-",mR="theoplayer-webvtt-styling-",pR="theoplayer-webvtt-default-style",AR=5.23,yR=1.14,MR=class extends ih{U9(t){let i=h.createElement("div");i.className="theoplayer-webvtt-texttrack-"+t,_b(i),i.style.overflow="hidden",i.style.pointerEvents="none";const e=this.h9.mZ;return e&&(i.style.fontFamily=e),i.style.whiteSpace="pre-line",function(){if(h.getElementById(pR))return;const t=[];for(const[i,e]of xR)t.push("."+mR+i+" { color: "+e+" !important; }"),t.push("."+mR+"a8"+i+" { background-color: "+e+" !important; }"),t.push("video::cue(."+i+") { color: "+e+"; }"),t.push("u8"+i+") { background-color: "+e+"; }");const i=h.createElement("style");i.id=pR,i.innerHTML=t.join("\n"),h.body.appendChild(i)}(),i}oX(){this.pz.appendChild(this.c8),super.oX()}re(t,i){const e=_.min(t/100,i/100),s=Tj(this.h9);this.l8.forEach((t=>{let{DS:i,d8:n}=t;this.f8(n,e,s,i)})),this.f8(this.c8,e,s)}f9(t){WL(this.pz,t),super.f9(t)}R9(t,i,e){const s=this.pz,n=this.Iu._u/100;let r=[];for(const i of t)void 0!==i.DS&&(Ai(r,i.DS)||r.push(i.DS));this.l8.forEach(((t,i)=>{let{DS:s,d8:n}=t;!e&&Ai(r,s)||(wi(n),this.l8.delete(i))}));for(const t of i)!e&&t.ro||this.n9(t);let o=[];const h=Ej(this.c8.getBoundingClientRect());o.push(...this.z9(h));for(const t of r){let i;this.l8.has(t.o)?i=this.l8.get(t.o).d8:(i=ER(t,n),s.appendChild(i),this.l8.set(t.o,{DS:t,d8:i})),o.push(Ej(i.getBoundingClientRect()))}t.sort(CR);for(const i of t){const t=this.G9(i,o,h);void 0!==t&&o.push(t.e9(.1))}}G9(t,i,e){var s;let n;t.DS?(n=this.l8.get(t.DS.o).d8,"up"===t.DS.XS&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.c8;let r=null==(s=this.r9(t))?void 0:s[0];if(r||(r=this._8(t),this.P9(t,[r])),n.appendChild(r),t.DS||(bR(r,t),t.ES?function(t,i,e,s){const n=kR(t),r=n?e.Ti:e.ji;let o=C(getComputedStyle(i).lineHeight);if(0===o||S(o))return;let h=Ej(i.getBoundingClientRect()),a=_.round(Fv(t));"rl"===t.Pt&&(a=-(a+1));let u=o*a;"rl"===t.Pt&&(u=u-h.ji+o);a<0&&(u+=r,o=-o);n?h.t9+=u:h.K6+=u;const c=h.$A();let l=!1;for(;!e.oS(h)||Dj(h,s);)if(n)if(o<0&&h.t9<e.t9||o>0&&h.J6>e.J6){if(h.t9=c.t9,l)break;o=-o,l=!0}else h.t9+=o;else if(o<0&&h.K6<e.K6||o>0&&h.q6>e.q6){if(h.K6=c.K6,l)break;o=-o,l=!0}else h.K6+=o;n?i.style.top=(h.t9-e.t9)/e.Ti*100+"%":i.style.left=(h.K6-e.K6)/e.ji*100+"%"}(t,r,e,i):function(t,i,e,s){let n,r=Ej(i.getBoundingClientRect());if(0===r.ji||0===r.Ti)return;kR(t)?"center"===t.NS?r.t9-=r.Ti/2:"end"===t.NS&&(r.t9-=r.Ti):"center"===t.NS?r.K6-=r.ji/2:"end"===t.NS&&(r.K6-=r.ji);n=""===t.Pt?[ou.POS_Y,ou.NEG_Y,ou.POS_X,ou.NEG_X]:"lr"===t.Pt?[ou.POS_X,ou.NEG_X,ou.POS_Y,ou.NEG_Y]:[ou.NEG_X,ou.POS_X,ou.POS_Y,ou.NEG_Y];Ij(r,i,n,e,s)}(t,r,e,i)),!t.DS)return Ej(r.getBoundingClientRect())}_8(t){let i=new Bi,e=t.O,s=this.g8(t),n={w8:void 0,we:s},r=n,o="",a="",u=[n],c=[],l=[];for(;i.Ku<e.length;){let t=uR(e,i);if(t.Av===oR.n8){const i=h.createElement("span");gR(i,t.O),TR(i,u),""!==o&&(i.lang=o),this.v8(i,a),r.we.appendChild(i)}else if(t.Av===oR.r8){const i=t.WR.toLowerCase();switch(i){case"i":case"b":case"u":case"ruby":{let e=h.createElement(i);r.we.appendChild(e),r={w8:t,we:e},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.w8)?void 0:d.WR.toLowerCase())){let i=h.createElement("rt");r.we.appendChild(i),r={w8:t,we:i},u.push(r)}break;case"c":case"v":r={w8:t,we:r.we},u.push(r);break;case"font":{var f;const i=null==(f=t.H9)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);i&&(a=i[1],l.push(a),r={w8:t,we:r.we},u.push(r));break}case"lang":var _;o=null!=(_=t.H9)?_:"",c.push(o)}}else if(t.Av===oR.o8){var g;const i=t.WR.toLowerCase(),e=null==(g=r.w8)?void 0:g.WR.toLowerCase();e===i?(u.pop(),r=u[u.length-1],"font"===i&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===e&&"ruby"===i?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===i&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.Av===oR.h8){let i=t.X9,e=new Bi;try{Al(i,e)}catch(t){Ct("ERROR collecting timestamp",t)}}}return s}v8(t,i){const e=this.h9,s=this.u9;e.yZ&&(t.style.background=e.yZ);const n=s.pZ||i||e.pZ;n&&(t.style.color=n)}f8(t,i,e,s){if(s){let n=SR(s,i);t.style.height=n*e+"px",t.style.left=NR(s)+"%",t.style.top=IR(s,i)+"px"}t.style.fontSize=AR*i*e+"px"}g8(t){const i=h.createElement("div");i.style.position="absolute",i.style.margin="0",i.style.padding="0",i.style.unicodeBidi="plaintext",i.style.wordWrap="break-word",i.style.overflowWrap="break-word",i.style.width="auto",i.style.textAlign=t.TS,function(t,i){"rl"===i.Pt?t.style.writingMode="vertical-rl":"lr"===i.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(i,t),function(t,i){let e=Vv(i);kR(i)?(t.style.width=e+"%",t.style.height="auto"):(t.style.height=e+"%",t.style.width="auto")}(i,t),bR(i,t);const e=this.h9.MZ;e&&(i.style.background=e);const s=this.h9.pZ;return s&&(i.style.color=s),i.style.textShadow=Bj(this.h9.bZ),i}constructor(t,i,e,s){super(t,i,e,s,wR),this.l8=Pu(),this.c8=DR(3)}};function bR(t,i){let e,s,n=Gv(i),r=Yv(i),o=Vv(i);if(kR(i)){switch(n){case"line-left":e=r;break;case"center":e=r-o/2;break;case"line-right":e=r-o}s=i.ES?0:Fv(i)}else{switch(n){case"line-left":s=r;break;case"center":s=r-o/2;break;case"line-right":s=r-o}e=i.ES?0:Fv(i)}t.style.left=e+"%",t.style.top=s+"%"}function TR(t,i){for(const e of i)if(e.w8){for(const i of e.w8.W9)ab(t,mR+i);"v"===e.w8.WR.toLowerCase()&&e.w8.H9&&ab(t,"theoplayer-webvtt-voice-"+e.w8.H9)}}function SR(t,i){return t.VS*(AR*i)*yR}function NR(t){return t.ZS-t.WS*t.ji/100}function IR(t,i){let e=t.qS,s=t.HS*SR(t,i)/100;return _.max(0,e-s)}function DR(t){let i=h.createElement("div");return i.className=vR+"default",_b(i),i.style.wordWrap="break-word",i.style.writingMode="horizontal-tb",i.style.pointerEvents="none",i.style.width="auto",i.style.height="auto",i.style.maxHeight="100%",i.style.minHeight="0px",i.style.padding="0",i.style.boxSizing="border-box",i.style.fontSize=AR*t+"px",i.style.lineHeight=yR+"em",i}function ER(t,i){let e=DR(i);e.className=vR+t.o;let s=t.ji,n=SR(t,i);return e.style.width=s+"%",e.style.height=n+"px",e.style.left=NR(t)+"%",e.style.right="",e.style.top=IR(t,i)+"px",e.style.bottom="",e.style.boxSizing="border-box",e}function kR(t){return""===t.Pt}var LR,xR=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function CR(t,i){const e=Fv(t),s=Fv(i),n=OR(e,t.ES),r=OR(s,i.ES);return n&&r?e-s||L(i,t)||i.Xw-t.Xw:L(t,i)||t.Xw-i.Xw}function OR(t,i){return i?t<0?t>-8:t>8:t>50}!function(t){t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics"}(LR||(LR={}));var jR={pZ:Tc.WHITE,mZ:Sj.Gc,AZ:"100%",yZ:Tc.BLACK,MZ:"transparent",bZ:"none",m8:"regular",DZ:"visible",TZ:void 0,SZ:void 0,NZ:void 0,IZ:void 0},RR=[{p8:Tc.WHITE,m8:"regular",A8:0},{p8:Tc.WHITE,m8:"underline",A8:0},{p8:Tc.GREEN,m8:"regular",A8:0},{p8:Tc.GREEN,m8:"underline",A8:0},{p8:Tc.BLUE,m8:"regular",A8:0},{p8:Tc.BLUE,m8:"underline",A8:0},{p8:Tc.CYAN,m8:"regular",A8:0},{p8:Tc.CYAN,m8:"underline",A8:0},{p8:Tc.RED,m8:"regular",A8:0},{p8:Tc.RED,m8:"underline",A8:0},{p8:Tc.YELLOW,m8:"regular",A8:0},{p8:Tc.YELLOW,m8:"underline",A8:0},{p8:Tc.MAGENTA,m8:"regular",A8:0},{p8:Tc.MAGENTA,m8:"underline",A8:0},{p8:Tc.WHITE,m8:"italics",A8:0},{p8:Tc.WHITE,m8:"underline-italics",A8:0},{p8:Tc.WHITE,m8:"regular",A8:0},{p8:Tc.WHITE,m8:"underline",A8:0},{p8:Tc.WHITE,m8:"regular",A8:4},{p8:Tc.WHITE,m8:"underline",A8:4},{p8:Tc.WHITE,m8:"regular",A8:8},{p8:Tc.WHITE,m8:"underline",A8:8},{p8:Tc.WHITE,m8:"regular",A8:12},{p8:Tc.WHITE,m8:"underline",A8:12},{p8:Tc.WHITE,m8:"regular",A8:16},{p8:Tc.WHITE,m8:"underline",A8:16},{p8:Tc.WHITE,m8:"regular",A8:20},{p8:Tc.WHITE,m8:"underline",A8:20},{p8:Tc.WHITE,m8:"regular",A8:24},{p8:Tc.WHITE,m8:"underline",A8:24},{p8:Tc.WHITE,m8:"regular",A8:28},{p8:Tc.WHITE,m8:"underline",A8:28}],PR=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function zR(t,i){return im(t.y8,i.y8)||gd(t.Kb,i.Kb)}var It=32,BR=/CC([1-4])=(.*)/;function UR(t){if(!t)return[];const i=[],e=t.trim().split(";");if(e.every((t=>t.match(BR))))for(const t of e){const[,e,s]=t.match(BR);i.push({M8:Number(e),b8:s})}else for(let t=0;t<e.length;t++)i.push({M8:t+1,b8:e[t]});return i}var QR=class t{get T8(){return this.N8.S8}get I8(){return this.N8.D8}get E8(){return this.N8.D8.A8-this.N8.S8.A8+1}get k8(){return this.N8.D8.L8-this.N8.S8.L8+1}pr(){return this.x8=this.C8(),this.O8(),this.j8(),this.x8}C8(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.E8/It*this.z8.P8*100+"%",t.style.height=1.2*this.k8+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.z8.B8?"calc(1em - 1ch)":"";const i=this.a9.mZ;i&&(t.style.fontFamily=i);const e=this.a9.MZ;return e&&(t.style.backgroundColor=e),t}O8(){if(!this.x8)return;let t=this.T8.L8/15*100,i=this.T8.A8/It*100,e=(It-this.I8.A8-1)/It*100,s=(15-this.I8.L8-1)/15*100;this.z8.U8||(i=e=1,this.x8.style.width="98%"),s<t?this.x8.style.bottom=s*this.z8.P8+"%":this.x8.style.top=t*this.z8.P8+"%",e<i?this.x8.style.right=e+"%":this.x8.style.left=i+"%"}j8(){const t=this.N8.Q8.sort(FR);for(let i=0;i<t.length;i++)this.F8(t[i-1],t[i]),this.Y8(t[i]);this.F8(t[t.length-1],void 0)}Y8(i){var e;const s=bj(this.a9,i.G8),n=t.V8(s);gR(n,i.W8),null==(e=this.x8)||e.appendChild(n)}static V8(t){const i=h.createElement("span");i.style.display="inline-block",t.m8!==LR.FONT_ITALICS&&t.m8!==LR.FONT_UNDERLINE_ITALICS||(i.style.fontStyle="italic"),t.m8!==LR.FONT_UNDERLINE&&t.m8!==LR.FONT_UNDERLINE_ITALICS||(i.style.textDecoration="underline");const e=t.pZ;e&&(i.style.color=e);const s=t.yZ;return s&&(i.style.backgroundColor=s),i.style.textShadow=Bj(t.bZ),i.style.height="1.2em",i}F8(t,i){let e=t?t.D8.L8:this.N8.S8.L8;const s=i?i.S8.L8:this.N8.D8.L8;let n=t?t.D8.A8:this.N8.S8.A8;const r=i?i.S8.A8:this.N8.D8.A8;e<s&&(!i||t&&t.S8.L8!==i.S8.L8?this.H8():this.X8(this.N8.D8.A8-n),n=this.N8.S8.A8),n<r&&(i?this.X8(r-n):this.H8())}H8(){var t;const i=h.createElement("br");null==(t=this.x8)||t.appendChild(i)}X8(t){var i;if(t<=0)return;const e=h.createElement("span");e.style.display="inline-block",gR(e,Vf(" ",t)),null==(i=this.x8)||i.appendChild(e)}constructor(t,i,e){this.N8=t,this.z8=i,this.a9=e}};function FR(t,i){return function(t,i){if(t.L8!==i.L8)return t.L8-i.L8;return t.A8-i.A8}(t.S8,i.S8)}var YR=class extends ih{U9(t){let i=h.createElement("div");return i.className="theoplayer-cea608-texttrack-"+t,i.style.position="absolute",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top="10%",i.style.bottom="10%",this.h9.mZ&&(i.style.fontFamily=this.h9.mZ),i}re(t,i){this.ll()}ll(){let t=Tj(this.h9);this.Z8=function(t){return{P8:t/100,B8:t<=100,U8:t<=150}}(100*t);const i=this.q8/It;this.K8=i*t,this.pz.style.fontSize=this.K8+"px"}get q8(){let t=this.pz.offsetWidth;return this.Z8&&this.Z8.U8||(t*=.8),t}R9(t,i,e){for(const t of i)!e&&t.ro||this.n9(t);for(const i of t)this.G9(i)}G9(t){this.Z8&&this.Z8.U8?this.J8(80):this.J8(100),this.ll();let i=this.r9(t);i||(i=this.V9(t),this.P9(t,i));for(const t of i)this.pz.appendChild(t)}V9(t){return t.O.map((t=>new QR(t,this.Z8,this.h9).pr()))}J8(t){const i=(100-t)/2;this.pz.style.left=i+"%",this.pz.style.width=t+"%"}constructor(t,i,e,s){super(t,i,e,s,jR)}},GR=class t{t7(t){for(let i of this.i7)if(i.Lt===t)return i}static e7(t){switch(t.Av){case O.TTML:case O.SRT:case O.WEBVTT:case O.CEA608:return!0}return!1}s7(t){switch(t.Av){case O.TTML:return new Vj(t,this.n7,t.kh,this.Wu);case O.SRT:case O.WEBVTT:return new MR(t,this.n7,t.kh,this.Wu);case O.CEA608:return new YR(t,this.n7,t.kh,this.Wu)}}r7(t){let i=this.t7(t);i||(i=this.s7(t),i&&(i.oX(),i.f9(this.mU),this.i7.push(i),t._v===yi.Jn&&i.L9()))}o7(t){let i=this.i7;for(let e=i.length-1;e>=0;e-=1){let s=i[e];s.Lt===t&&(s.gn(),Ns(i,e))}}h7(i){yp(i.zt)&&t.e7(i)&&(i.Sg===Ls.ERROR?this.o7(i):this.r7(i))}get _4(){return this.a7.cs}tr(){for(let t of this.i7)t.Lt.fn(ct.Nw,this.u7),t.Lt.fn(ct.Dw,this.u7),t.gn();To(this.i7)}gn(){this.tr();for(let t of this.i7)t.gn();this.Dl.fn(rc.hw,this.l7),this.Dl.fn(rc.uw,this.d7),this.Dl.fn(ct.ra,this.u7),this.a7.fn(Vi.ra,this.f7),this.mU.fn("Sw",this._7)}constructor(t,i,e,s,n){this.i7=[],this.l7=t=>{let i=t.Lt;i.yn(ct.Nw,this.u7),i.yn(ct.Dw,this.u7),i instanceof BO&&(i._4=this._4),this.h7(i)},this.u7=t=>{let i=t.Lt;this.h7(i)},this.d7=t=>{let i=t.Lt;i.fn(ct.Nw,this.u7),i.fn(ct.Dw,this.u7),this.o7(i)},this.f7=()=>{let t=this._4;for(let i of this.Dl.Rw)i instanceof BO&&(i._4=t)},this._7=()=>{for(let t of this.i7)t.f9(this.mU)},this.g7=()=>{for(let t of this.i7)t.f9(ol({},t.w9(),{DZ:"hidden"}))},this.w7=()=>{for(let t of this.i7)t.f9(ol({},t.w9(),{DZ:"visible"}))},this.n7=t,this.Wu=i,this.Dl=e,this.a7=n,this.mU=s,this.Dl.yn(rc.hw,this.l7),this.Dl.yn(rc.uw,this.d7),this.Dl.yn(ct.ra,this.u7),this.a7.yn(Vi.ra,this.f7),this.mU.yn("Sw",this._7),this.f7()}};function VR(t){const i=new jI,e=function(t){const i=[];return CI.ia(t)&&i.push(new CI(t)),OI.ia(t)&&i.push(new OI(t)),i}(t);if(e.length>0){for(const t of e)i.SV(t);i.TV(e[0])}return i}var rh,WR=class extends _j{get pz(){return this.lj}get Cg(){return this.lj.videoHeight}get Rg(){return this.lj.videoWidth}get ya(){return this.v7}Vg(){return this.lj}async h_(){this.v7.gn(),this.m7.gn(),this.p7.gn(),await super.h_()}be(){super.be(),this.m7.be()}ge(){super.ge(),this.m7.ge()}Y6(t){super.Y6(t),this.m7.Y6(t)}constructor(t,i,e,s){super(t,i,e,s),this.v7=VR(t),this.m7=new Mj,this.p7=new GR(this.m7.we,this.Iu,this.nt,this.Ol,this.ya)}};!function(t){t.A7="HELLO",t.y7="HI_THERE",t.M7="INITIALIZE",t.b7="APPEND_INIT",t.T7="APPEND_DATA",t.S7="ACK",t.N7="REMOVE",t.I7="DESTROY_SESSION"}(rh||(rh={}));var gu,HR=class{D7(t){return this.XZ.JO((async t=>{Vr(t);const i=new MessageChannel,e=i.port1,s=i.port2;Il.serviceWorker.controller||await En(Il.serviceWorker,"install",t),"activated"!==Il.serviceWorker.controller.state&&await En(Il.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};Il.serviceWorker.controller.postMessage(n,[s]),e.start(),this.E7=e;try{const i=await En(e,"message",t),s=i.data;if("HI_THERE"!==s.kind)throw new g("Could not set up message channel");this.gj=s.sessionId}catch(t){throw be(t)&&this.k7(),t}}),t)}L7(t,i){return this.E7,this.XZ.JO((async()=>{if(!this.E7)throw new g("MessageSession not set up yet or already closed.");i||(i=[]),this.E7.postMessage(t,i);const e=await En(this.E7,"message");return e.data}))}x7(){return this.XZ.JO((()=>this.k7()))}k7(){if(!Il.serviceWorker.controller)return;if("activated"!==Il.serviceWorker.controller.state)return;if(!this.E7)return;const t={kind:"DESTROY_SESSION"};this.E7.postMessage(t),this.E7.close(),this.E7=void 0}constructor(){this.XZ=new Ku}},XR=class{get C7(){return this.O7}j7(t,i){const e=t-i;this.O7=e>this.C7?this.O7:e}R7(t){this.O7=t}constructor(){this.O7=1/0}};!function(t){t.WA="audio",t.VA="video",t.ZA="metadata"}(gu||(gu={}));var ZR=class extends Mo{get O_(){return void 0===this.P7||void 0===this.z7?Ri.oU():new Ri([this.P7,this.z7])}get wd(){return{Nz:this.TG}}get O0(){return I(this.TG,"audio")?Jt.WA:I(this.TG,"video")?Jt.VA:Jt.jT}get aG(){return this.TG}get R0(){return Ri.oU()}get iX(){return 30}set iX(t){}get rX(){return 30}set rX(t){}B0(t,i){}U0(t,i){}oq(){return this.B7}get oa(){return this.U7}get Q7(){return this.P7}get bS(){return this.z7}async Q0(){}async u0(t,i){}async V$(t,i,e){if(t.Av!==Lu.jZ)throw new g("Streaming or opaque segments are not supported yet.");const s=t.ly,n=async()=>{const t=s.buffer,e={kind:rh.T7,mediaType:qR(this.TG),segment:s,startPts:i.F7,totalDuration:i.ct};if(await this.Y7.L7(e,[t]),void 0===this.P7){const t=i.F7+i.pI;this.P7=t,this.z7=t}this.z7=this.z7+i.ct,this.Co(new Os(In.CZ))};return this.XZ.JO((async t=>{Vr(t);try{this.U7=!0,await n()}finally{this.U7=!1}}),e)}async X$(t,i,e){if(t.Av!==Lu.jZ)throw new g("Streaming or opaque initialization segments are not supported yet.");const s=t.ly,n=async()=>{const t={kind:rh.b7,mediaType:qR(this.TG),segment:s};await this.Y7.L7(t,[])};return this.XZ.JO((async t=>{Vr(t);try{this.U7=!0,await n()}finally{this.U7=!1}}),e)}x0(){this.B7=!0}M0(){this.B7=!1}async rS(t,i,e){const s=async()=>{const t={kind:rh.N7,mediaType:qR(this.TG),endTime:i};await this.Y7.L7(t),this.P7=void 0,this.z7=void 0,this.Co(new Os(In.CZ))};return this.XZ.JO((async t=>{Vr(t);try{this.U7=!0,await s()}finally{this.U7=!1}}),e)}FZ(t){return this.TG===t.Nz}GZ(t){return this.TG=t.Nz,Promise.resolve()}async h_(){this.Vo(),await this.XZ.gn()}constructor(t,i){super(),this.TG=t,this.Y7=i,this.P7=void 0,this.z7=void 0,this.XZ=new Ku,this.U7=!1,this.B7=!1}};function qR(t){return t.match(/video/)?gu.VA:gu.WA}var KR=class t{static G7(i,e,s,n){const r=[];for(let t=0;t<i.F1.length;t++){const s=i.F1[t].Nz;r.push(new ZR(s,e))}return new t(i,r,s,n)}V7(){}get W7(){return[this.O1,this.j1].filter(Ks)}get I1(){return this.O1}get O_(){return aC(this)}get wd(){return this.GO}get ct(){return 0}get oq(){var t,i,e;const s=null==(e=null==(t=this.O1)?void 0:t.oq())||e;var n;const r=null==(n=null==(i=this.j1)?void 0:i.oq())||n;return s&&r}get Ig(){return new Ri([0,1/0])}get D1(){return this.j1}async h_(){await Promise.all([this.O1,this.j1].filter(Ks).map((t=>t.h_())))}P1(t){}Q1(t,i,e,s){}x0(){var t,i;null==(t=this.O1)||t.x0(),null==(i=this.j1)||i.x0()}M0(){var t,i;null==(t=this.O1)||t.M0(),null==(i=this.j1)||i.M0()}FZ(t){return!0}GZ(t){return this.GO=t,Promise.resolve()}async UZ(t,i){const e=await this.SO.TO(t.dL,i),s=await e._O();return await this.QZ(s),s}async QZ(t){if(t&&!this.lj.src)throw new ss(qa.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.lj.src)throw new ss(qa.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const i=this.cO;i&&(await i.dO(this.lj),this.cO=void 0),t&&(await t.bn(this.lj),this.cO=t)}constructor(t,i,e,s){this.cO=void 0,this.GO=t,this.j1=bo(i,(t=>Boolean(t.aG.match(/video/)))),this.O1=bo(i,(t=>Boolean(t.aG.match(/audio/)))),this.SO=e,this.lj=s,this.V7()}},JR=class extends Mo{H7(){this.X7.addEventListener("timeupdate",this.Z7),this.X7.addEventListener("ended",this.q7),this.X7.addEventListener("timeupdate",this.K7),this.X7.addEventListener("ratechange",this.J7),this.X7.addEventListener("volumechange",this.ttt),this.X7.addEventListener("durationchange",this.itt),this.X7.addEventListener("playing",this.ett),this.X7.addEventListener("seeking",this.stt),this.X7.addEventListener("play",this.ntt),this.X7.addEventListener("pause",this.ott),this.X7.addEventListener("encrypted",this.C6)}htt(){this.X7.removeEventListener("timeupdate",this.Z7),this.X7.removeEventListener("ended",this.q7),this.X7.removeEventListener("timeupdate",this.K7),this.X7.removeEventListener("ratechange",this.J7),this.X7.removeEventListener("volumechange",this.ttt),this.X7.removeEventListener("durationchange",this.itt),this.X7.removeEventListener("playing",this.ett),this.X7.removeEventListener("seeking",this.stt),this.X7.removeEventListener("play",this.ntt),this.X7.removeEventListener("pause",this.ott)}att(){this.a5.yn($.Nw,this.Ds)}utt(){this.a5.fn($.Nw,this.Ds)}get pz(){return this.X7}get l2(){return!1}get U_(){return this.X7.currentTime+this.ctt.C7}get fg(){return this.X7.paused}get zg(){return this.X7.volume}set zg(t){this.X7.volume=t}get gg(){return this.X7.playbackRate}set gg(t){this.X7.playbackRate=t}get ltt(){return this.X7.defaultPlaybackRate}get O_(){var t,i;return null!=(i=null==(t=this.yz)?void 0:t.O_)?i:Ri.oU()}get dtt(){return Ri.xn(this.X7.buffered)}get pg(){const t=this.ftt;return this.Uo.YB(t.KA(this.ctt.C7))}get ftt(){return Ri.xn(this.X7.played)}get Eg(){return this.aU}get s2(){return!1}get g2(){return!1}get ct(){return this.X7.duration}get og(){return this.X7.muted}set og(t){this.X7.muted=t}get G8(){return this.X7.style}get Hm(){return ol({},XL,{Wm:!0})}JA(t,i,e){this.L5.g_(),this.L5=new Bd,this.x5=this.C5(t,this.x5,this.L5.f_).catch(Br)}async C5(t,i,e){var s;this.Uo=this.pg;const n=null==(s=this.yz)?void 0:s.W7;if(!n)return;const r=_.max(...n.map((t=>t.Q7?t.Q7:1/0)));this.aU=!0,this.Co(new Ur(t)),await i.catch(Br),Vr(e);try{for(this._tt||this.gtt(),this.X7.load(),this.wtt||(this.mtt=!1,await Jr(this.X7.play(),e));this.Sg<qo.UT;)await this.a5.k_($.Nw,e);this.ptt.LL(),this._tt=!1,this.aU=!1,this.Co(new Ko(this.U_))}catch(t){throw this.ptt.xL(t),t}finally{this.Att(),this.ctt.R7(r)}}Hg(){this.wtt=!0,this.X7.pause()}async Xg(){this.wtt&&(this.X7.src||this.F6(),await this.ptt.OL,await this.X7.play())}async h_(){this.Y7&&this.Y7.x7().catch(Br),this.L5.g_(),this.htt(),this.utt(),this.a5.h_(),this.Vo(),this.Dl.gn(),this.m7.gn(),this.p7.gn()}async tr(){this.Y7&&this.Y7.x7().catch(Br),this.L5.g_(),this.X7.removeAttribute("src"),this.X7.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.X7.removeAttribute("x-airplay-deny"),this.X7.disableRemotePlayback=!1,this.X7.load(),this.a5.tr(),this.Uo=Ri.oU()}F6(){this.U6||(sP(this.X7,ra.Ys),this.Q6=!0)}get Sg(){return this.a5.Sg}gtt(){const t=this.X7.getClientRects();let i;if(!(t.length>0))return;i=t[0];const e=i.width,s=this.X7.videoWidth/this.X7.videoHeight,n=i.height;let r,o;e/n>s?(r=n*s,o=n):(o=e/s,r=e),this.X7.style.width=r+"px",this.X7.style.height=o+"px",this.X7.style.marginLeft=(e-r)/2+"px",this.X7.style.marginTop=(n-o)/2+"px",this.X7.style.backgroundColor="black"}Att(){this.X7.style.width="100%",this.X7.style.height="100%",this.X7.style.marginLeft="",this.X7.style.marginTop="",this.X7.style.backgroundColor=""}get Cg(){return this.X7.videoHeight}get Rg(){return this.X7.videoWidth}get G_(){return this.X7.ended}get Ti(){return this.X7.offsetHeight*ra.Ys.h5}get ji(){return this.X7.offsetWidth*ra.Ys.h5}get K_(){return!1}get U6(){return this.Q6}get R_(){}get Iu(){return this.ytt}get lt(){}get ya(){return this.v7}get Ig(){return this.yz?this.yz.Ig:Ri.oU()}get Mz(){}get nt(){return this.Dl}get Ol(){return this.mU}get Yg(){return!1}set Yg(t){}jz(t,i,e,s,n){}rE(t,i,e,s,n,r,o,h,a){const u=new GC(t,i,e,s,n,r,o,a,h);return this.Dl.tt(u),this.W5.tt(u),u}dq(t){}rg(){return EL(this.X7)}get _5(){return"block"===this.X7.style.display}ge(){this.X7.style.display="block",this.m7.ge()}be(){this.X7.style.display="none",this.m7.be()}z6(){}async $n(t){if(t.Av===de.Tj)throw new g("Not yet implemented");await this.Y7.D7();const i=bo(t.Iz,(t=>t.Qp.Av===ho.kp)),e={kind:rh.M7,mediaBufferConfigs:t.F1.map((t=>t.Nz)),fairPlaySdkUri:null==i?void 0:i.hP};return await this.Y7.L7(e),this.yz=KR.G7(t,this.Y7,this.SO,this.X7),this.VZ.$n(this.yz,t),this.X7.setAttribute("x-webkit-airplay","deny"),this.X7.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.X7.disableRemotePlayback=!0,this.X7.preload="none",this.X7.src="https://theo.proxy/"+this.Y7.gj+"/master.m3u8",this.yz}B6(){}fE(t){this.Dl.it(t),this.W5.it(t)}Pz(){for(const t of this.Dl.Rw.slice())t.gn();this.Dl.tr()}gz(t){}Cz(){return!1}Y6(t){t.appendChild(this.X7),this.m7.Y6(t)}Vg(){return this.X7}K3(){}get Qz(){return this.VZ.Qz}set Qz(t){this.VZ.Qz=t}get G6(){}set G6(t){}get j3(){}$g(){}constructor(t,i,e,s){super(),this._tt=!0,this.Y7=new HR,this.ctt=new XR,this.wtt=!0,this.ptt=new Oi,this.aU=!1,this.x5=Promise.resolve(),this.L5=new Bd,this.mtt=!0,this.Uo=Ri.oU(),this.Q6=!1,this.Z7=()=>{this.fg||this.dtt.U<=0||this.O_.U<=0||this.ctt.j7(this.O_.jn(this.O_.U-1),this.dtt.jn(this.dtt.U-1))},this.q7=()=>{this.Co(new pa(this.U_))},this.K7=()=>{this.Co(new ri(this.U_,this.R_))},this.J7=()=>{this.Co(new Zs(this.U_,this.gg))},this.ttt=()=>{this.Co(new St(this.U_,this.zg))},this.itt=()=>{this.Co(new Te(this.ct))},this.ett=()=>{this.Co(new $e(this.U_))},this.stt=()=>{this.JA(this.U_)},this.ntt=async()=>{this.mtt&&this.Co(new Rt(this.U_)),this.wtt=!1,this.mtt=!0},this.ott=()=>{this.wtt=!0,this.Co(new Ye(this.U_))},this.C6=t=>{const i=t.initDataType;var e;const s=null!=(e=t.initData)?e:new ArrayBuffer(0);this.Co(new On(i,s))},this.X7=t,this.a5=new TC(this),this.ytt=e,this.mU=s,this.X7.playsInline=!0,this.X7.style.width="100%",this.X7.style.height="100%",this.H7(),this.att(),this.v7=VR(this.X7),this.VZ=new hj(this),this.SO=i,this.Dl=new iu,this.W5=new uh(this),this.m7=new Mj,this.p7=new GR(this.m7.we,this.Iu,this.nt,this.Ol,this.ya)}},$R=[Jt.WA,Jt.VA];function tP(t){const i=h.createElement(t);return Su(i)&&i.addEventListener("contextmenu",nP),eP(i),i}function iP(t){eP(t),t.removeEventListener("contextmenu",nP)}function eP(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),cl(t),Ab(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=ut.LT,t.controls=!1,t.style.display="none",Su(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function sP(t,i){if(i.Mtt){const i=t.muted;t.muted=!0,t.muted=!1,t.muted=i}else if(t.paused){const i=t.play();Ci(i)&&$r(i),t.pause()}}function nP(t){t.preventDefault()}var rP=class{uD(t){return this.aE.uD(t)}NG(t){this.aE.NG(t)}gn(){this.aE.gn()}constructor(t){this.aE=t}},oP=class extends rP{uD(t){const i=new Zi(t),e=this.wU.VH.WP(i);return e?this.btt(i,e):this.aE.uD(i)}async btt(t,i){i.HH(ra.m_()/1e3);const e=await this.aE.uD(t);let s;i.XH(ra.m_()/1e3),s=e.ZW?e.VW().pipeThrough(new Wa(new hP(i))):e.GR().then((t=>{const e=ra.m_()/1e3;return i.ZH(e,new j(t)),i.qH(e),t}));const n={ly:s,uD:e.uD};return new Zk(n,e)}constructor(t,i){super(t),this.wU=i}},hP=class{start(t){this.wZ=t}transform(t){this.Ttt.ZH(ra.m_()/1e3,t),this.wZ.enqueue(t)}flush(){this.Ttt.qH(ra.m_()/1e3)}constructor(t){this.Ttt=t}};function aP(t){return{get ratio(){return t.Lo},get thresholds(){return t.Stt.slice()}}}function uP(t){const i=[],e=_.floor(1/t);if(S(e))return[];for(let s=0;s<=e;s++){const e=Qh(s*t,0,1);i.push(e)}return i}var cP=class{get Lo(){return this.Ntt}get Stt(){return this.Itt}Dtt(t){return i=>{const e=i[i.length-1];this.Ntt=e.intersectionRatio,t(e.intersectionRatio)}}get va(){return this.Xa||(this.Xa=aP(this)),this.Xa}Zg(){this.Ett.disconnect()}constructor(t,i,e){this.Ntt=1,this.Xa=void 0,this.Itt=uP(i);const n=this.Dtt(e);this.Ett=new s.IntersectionObserver(n,{root:null,threshold:this.Itt}),this.Ett.observe(t)}},lP=class{get Lo(){return this.Ntt}get Stt(){return this.Itt}get va(){return this.Xa||(this.Xa=aP(this)),this.Xa}ktt(t){this.Ntt=t;const i=this.Itt;let e=0;if(t>0)for(;e<i.length&&i[e]<=t;)++e;this.Ltt!==e&&(this.Ltt=e,this.xtt(t))}constructor(t,i){this.Ntt=1,this.Ltt=-1,this.Xa=void 0,this.Itt=uP(t),this.xtt=i}},dP=class extends lP{Ctt(){const t=this.yo.getBoundingClientRect();return Qh(_.max(0,_.min(s.innerWidth,t.right)-_.max(0,t.left))*_.max(0,_.min(s.innerHeight,t.bottom)-_.max(0,t.top))/(t.width*t.height),0,1)}Zg(){s.removeEventListener("scroll",this.Ott)}constructor(t,i,e){super(i,e),this.Ott=hu((()=>this.ktt(this.Ctt())),50),this.yo=t,s.addEventListener("scroll",this.Ott,!!TI&&{passive:!0}),Gd((()=>this.ktt(this.Ctt())))}},fP=.1,_P=class{get jtt(){return this.Rtt}get zo(){return this.Ptt}set zo(t){if(S(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.Ptt=t}get va(){return this.Xa||(this.Xa=function(t){return{get ratio(){return t.jtt},get visible(){return t.jtt>t.zo},get visibleThreshold(){return t.zo},set visibleThreshold(i){i=ji(i),t.zo=i},addObserver:(i,e)=>(i=ji(i),t.Fo(i,e).va),removeObserver(i){let e=t.ztt(i);e&&t.Ro(e)}}}(this)),this.Xa}Btt(t){return i=>{this.Rtt=i,null==t||t(this.Rtt)}}Fo(t,i){if(S(t))throw new b("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let e;return e="function"==typeof s.IntersectionObserver?new cP(this.yo,t,this.Btt(i)):new dP(this.yo,t,this.Btt(i)),this.Utt.push(e),e}Ro(t){t.Zg(),jn(this.Utt,t)}ztt(t){for(const i of this.Utt)if(i.va===t)return i}gn(){for(const t of this.Utt)t.Zg();To(this.Utt)}constructor(t){this.Rtt=1,this.Ptt=0,this.Utt=[],this.Xa=void 0,this.yo=t,this.Fo(.1,this.Btt())}},gP=class extends Os{constructor(){super(Tf.Ev)}},wP=class extends B{get Qtt(){return this.wU}get eS(){return this.Ftt}set eS(t){this.Ftt=t,this.Ytt.eS=t}get Gtt(){return this.Vtt}get ht(){return this.Ytt.ht}get YF(){return this.Wtt}get Iu(){return this.Htt}get Z_(){return this.Ytt.Z_}get eg(){return this.Xtt}get hF(){return this.Ztt}get nt(){return this.Ytt.nt}get Ol(){return this.mU}get rt(){return this.Ytt.rt}get O_(){return this.j_()}j_(){return this.Ytt.O_}get qtt(){return this.MX}get jX(){return this.RX}get U_(){return this.Q_()}set U_(t){this.F_(t)}Q_(){return this.Ytt.U_}F_(t,i){this.Ytt.F_(t,i)}Ktt(){return this.Q_()}get R_(){return this.Ytt.R_}set R_(t){this.Ytt.R_=t}get bt(){return this.Ytt.bt}get ct(){return this.Td()}Td(){return this.Ytt.ct}get we(){return this.Ytt.we}get G_(){return this.Ytt.G_}get lt(){return this.W_()}W_(){return this.Ytt.lt}get H_(){return this.X_()}X_(){return this.Ytt.H_}get ya(){return this.Ytt.Gg()}get Yg(){return this.Ytt.Yg}set Yg(t){this.Ytt.Yg=t}get og(){return this.Ytt.og}set og(t){const i=Boolean(t);this.ag(i)}ag(t){this.Ytt.og=t,t||this.fg||this.Wg()}get fg(){return this.Ytt.fg}get gg(){return this.Ytt.gg}set gg(t){this.Ytt.gg=t}get pg(){return this.Ag()}Ag(){return this.Ytt.pg}get yg(){return this.Ytt.yg}set yg(t){this.Ytt.yg=t}get Sg(){return this.Ytt.Sg}get Ig(){return this.Dg()}Dg(){return this.Ytt.Ig}get Eg(){return this.Ytt.Eg}get Xw(){return this.cS}get Cg(){return this.Ytt.Cg}get Rg(){return this.Ytt.Rg}get zg(){return this.Ytt.zg}set zg(t){const i=Qh(Number(t),0,1)||0;this.Ug(i)}get Qg(){return this.vU}Ug(t){this.Ytt.zg=t}ka(){uv(this,US,this)}Xg(){this.Ytt.Xg()}Hg(){this.Ytt.Hg()}Wa(){return this.SB}async ga(t,i){if(this.SB=t,t){this.Jtt.EY(t).catch(this.$tt);const e=function(t){t.sources;const i=t.sources.filter((t=>Bn(t.integration)));0;return t.sources=i,t}(t);await this.Ytt.ga(e,i)}}Wg(){if(this.bo)return;this.Ytt.Wg(),this.Vtt.Wg();const t=this.we.getElementsByTagName("video");for(let i=0;i<t.length;i++){const e=t[i];"Advertisement"===e.title&&sP(e,ra.Ys)}this.bo=!0}cs(){return this.tit.qo()===PS.FULLSCREEN}ge(){this.Ytt.ge()}be(){this.Ytt.be()}Vg(){return this.Ytt.Vg()}$g(){this.Ytt.$g()}iw(){this.Ytt.iw()}async Zg(){this.SB=void 0,await this.Ytt.Zg(),await this.Ytt.tr()}async gn(){this.Co(new gP),this.Vo(),this.Wtt.gn(),this.Hj.gn(),this.Ztt.gn(),this.iit.gn(),this.eit.gn(),this.tit.gn(),this.Htt.gn(),this.sit.gn(),this.Vtt.gn(),this.gU.gn(),await this.Ytt.gn()}constructor(t,i,e){super(),this.Ftt=!1,this.bo=!1,this.SB=void 0,this.nit=!1,this.ba=void 0,this.$tt=t=>{if(this.nit)return;this.nit=!0;const i=this.rit,e=ia(t);this.Ytt.Uw=new bS(this.we,e,t),$r(i.gn())},this.oit=t=>{t.type!==Tf.Xv&&t.type!==Tf.Hv&&this.Co(t)};const s=ji(i.uid);S(s)?this.cS=pv++:this.cS=s,this.wd=i;const n=ra.Hj,r=new UL;this.sit=new dI("8.3.0",n,r),this.wU=new AL,this.vU=new Wn;const o=new oP(n,this.wU);this.Hj=new aL(o,i.allowMixedContent),this.uZ=null!=e?e:new GN(i.isEmbeddable,"8.3.0",BN()),this.Jtt=new BL(n,this.uZ,this.sit,r,i,BN()),this.Jtt.nZ().catch(this.$tt),this.Htt=new kI(t),this.Htt.yn(Bh.pn,this.Ds),this.mU=new VL,this.MX=new TL,this.RX=new NL;const h=new MS(t,i,this.Hj,this.wU,this.vU,this.Htt,this.mU);this.wU.oX(h);let a=h;a=new SL(a,this.qtt),a=new IL(a,this.jX),this.rit=a,this.Ytt=new dv(this.rit),this.Ytt.T_(this.oit),this.Xtt=new DL(this.Ytt),this.Ztt=new lL(this.Ytt,this.Hj,this.wU),this.iit=new vI(this),this.eit=new RI(this.Ytt,i.allowNativeFullscreen),this.tit=new BS(this.eit),this.Htt.bn(),this.Bo=new _P(t),this.gU=new wc(this.Htt,this.mU,1,[Jt.VA]),this.Vtt=new Kp(this.gU),this.Wtt=new xL}};var st,sl=class extends B{get Qtt(){return this.hit()}hit(){return this.Qo.Qtt}get Oc(){return this.ait()}ait(){return this.Qo.Oc}get sit(){return this.Qo.sit}get Gtt(){return this.uit()}uit(){return this.Qo.Gtt}get eS(){return this.Qo.eS}set eS(t){this.Qo.eS=t}get iit(){return this.Qo.iit}get YF(){return this.Qo.YF}get qtt(){return this.Qo.qtt}get wd(){return this.Qo.wd}get Iu(){return this.Qo.Iu}get ya(){return this.Gg()}Gg(){return this.Qo.ya}get Hj(){return this.Qo.Hj}get Qg(){return this.Qo.Qg}get Jtt(){return this.Qo.Jtt}get jX(){return this.Qo.jX}get hF(){return this.Qo.hF}get tit(){return this.Qo.tit}get Htt(){return this.Qo.Htt}get Ytt(){return this.Qo.Ytt}get Ol(){return this.Qo.Ol}get cit(){return this.dit()}dit(){return this.Qo.cit}get Xw(){return this.Qo.Xw}get Bo(){return this.Qo.Bo}get ht(){return this.L_()}L_(){return this.Qo.ht}j_(){return this.Qo.j_()}get R_(){return this.P_()}set R_(t){this.z_(t)}P_(){return this.Qo.R_}z_(t){this.Qo.R_=t}get bt(){return this.B_()}B_(){return this.Qo.bt}Q_(){return this.Qo.Q_()}F_(t,i){this.Qo.F_(t,i)}Ktt(){return this.Qo.Ktt()}Td(){return this.Qo.Td()}get we(){return this.Y_()}Y_(){return this.Qo.we}get G_(){return this.V_()}V_(){return this.Qo.G_}W_(){return this.Qo.W_()}X_(){return this.Qo.X_()}get Z_(){return this.q_()}q_(){return this.Qo.Z_}get Yg(){return this.Qo.Yg}set Yg(t){this.Qo.Yg=t}get eg(){return this.rg()}rg(){return this.Qo.eg}get og(){return this.hg()}set og(t){this.ag(t)}hg(){return this.Qo.og}ag(t){this.Qo.ag(t)}get fg(){return this._g()}_g(){return this.Qo.fg}get gg(){return this.wg()}set gg(t){this.vg(t)}wg(){return this.Qo.gg}vg(t){this.Qo.gg=t}Ag(){return this.Qo.Ag()}get yg(){return this.Mg()}set yg(t){this.Tg(t)}Mg(){return this.Qo.yg}Tg(t){this.Qo.yg=t}get Sg(){return this.Ng()}Ng(){return this.Qo.Sg}get ba(){return this.Qo.ba}set ba(t){this.Qo.ba=t}Dg(){return this.Qo.Dg()}get Eg(){return this.Lg()}Lg(){return this.Qo.Eg}get nt(){return this.xg()}xg(){return this.Qo.nt}get Cg(){return this.Og()}Og(){return this.Qo.Cg}get rt(){return this.jg()}jg(){return this.Qo.rt}get Rg(){return this.Pg()}Pg(){return this.Qo.Rg}get zg(){return this.Bg()}set zg(t){this.Ug(t)}Bg(){return this.Qo.zg}Ug(t){this.Qo.Ug(t)}Wg(){this.Qo.Wg()}Hg(){this.Qo.Hg()}Xg(){this.Qo.Xg()}ge(){this.Qo.ge()}be(){this.Qo.be()}cs(){return this.Qo.cs()}Vg(){return this.Qo.Vg()}$g(){this.Qo.$g()}iw(){this.Qo.iw()}ka(){this.Qo.ka()}Wa(){return this.Qo.Wa()}ga(t,i){return this.Qo.ga(t,i)}Zg(){return this.Qo.Zg()}nw(t){return!1}bB(){this.fit&&this.Qo.T_(this.ow)}TB(){this.fit&&this.Qo.E_(this.ow)}async gn(t){this.Vo(),t||await this.Qo.gn(),this.TB()}constructor(t,i){super(),this.ow=t=>{this.nw(t)||this.Co(t)},this.Qo=t,this.fit=!i,this.bB()}};!function(t){t[t.Za=0]="Za",t[t._it=1]="_it",t[t.Ip=2]="Ip",t[t.git=3]="git",t[t.wit=4]="wit",t[t.vit=5]="vit"}(st||(st={}));var vP=[0,1,2,3,4,5],mP={};function ec(t,i){(mP[i]||(mP[i]=[])).push(t)}var pP={};function AP(t,i){(pP[i]||(pP[i]=[])).push(t)}var yP=[];function MP(t){for(const i of yP)i(t)}var bP=self.CustomEvent;var TP=function(){try{const t=new bP("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,i){return new CustomEvent(t,i)}:function(t,i){const e=h.createEvent("CustomEvent");return e.initCustomEvent(t,(null==i?void 0:i.bubbles)||!1,(null==i?void 0:i.cancelable)||!1,null==i?void 0:i.detail),e};var SP=new class{get U(){return this.$T.length}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){const i=[];for(let e=0;e<t.U;e++)i[e]=t.zw(e).va;return i.getPlayerByUID=i=>{const e=t.mit(i);return e&&e.va},i}(this)}zw(t){return this.$T[t]}Eq(t){this.$T.push(t),this.va.push(t.va)}rS(t){const i=this.$T.indexOf(t);i<0||(Ns(this.$T,i),this.Xa&&Ns(this.Xa,i))}mit(t){for(const i of this.$T)if(i.Xw===t)return i}constructor(){this.$T=[],this.Xa=void 0}};var lc,NP=class extends Os{constructor(t){super(Tf.lo),this.source=t}},IP=class extends B{get R_(){}set R_(t){}get U_(){return this.Q_()}set U_(t){this.F_(t)}Q_(){return this.hU}Ktt(){return this.Q_()}F_(t,i){this.aU&&this.hU===t||(this.hU=t,this.aU=!0,this.Co(new Ur(this.hU)))}get fg(){return this.cU}get gg(){return this.lU}set gg(t){this.lU!==t&&(this.lU=t,this.Co(new Zs(this.hU,this.gg)))}get Sg(){return qo.BT}get Eg(){return this.aU}Xg(){this.cU&&(this.cU=!1,this.Co(new Rt(this.hU)),this.Co(new Ib(this.hU)))}Hg(){this.cU||(this.cU=!0,this.Co(new ri(this.hU,this.R_)),this.Co(new Ye(this.hU)))}tr(){this.hU=0,this.aU=!1,this.lU=1,this.Hg()}gn(){this.Vo()}be(){}ge(){}constructor(){super(),this.hU=0,this.cU=!0,this.aU=!1,this.lU=1}},DP={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},EP={visibility:"hidden"},kP={visibility:"visible"},LP=class{get zu(){return void 0!==this.pit?this.pit:void 0!==this.Ait?this.Ait:void 0}set yit(t){this.Ait=t,this.Yn()}Yn(){const t=this.Qo.fg,i=this.Mit;this.zu?this.Us.style.backgroundImage='url("'+qf(this.zu)+'")':this.Us.style.backgroundImage="",t&&this.zu&&!i?this.ge():this.be()}ge(){fb(EP,this.Qo.we),fb(kP,this.Us)}be(){fb(EP,this.Us),fb(kP,this.Qo.we)}bB(){this.Qo.yn(Tf.lo,this.Tit),this.Qo.yn(Tf.jh,this.Qj)}gn(){this.Qo.fn(Tf.lo,this.Tit),this.Qo.fn(Tf.jh,this.Qj),wi(this.Us)}constructor(t){this.Mit=!1,this.Tit=t=>{var i;this.Mit=!this.Qo.fg,this.pit=null==(i=t.source)?void 0:i.poster,this.Yn()},this.Qj=()=>{this.Mit=!0,this.be()},this.Qo=t,this.bB(),this.Us=function(){let t=Ua&&Ua.document&&Ua.document.createElement("div");return t.className="theoplayer-poster",fb(DP,t),t}(),t.we.appendChild(this.Us)}};function xP(t){let i;const e={get playing(){return t.Fc},get currentAds(){return t.Sit.map((t=>t.Nit()))},get currentAdBreak(){var i,e;return null!=(e=null==(i=t.Iit)?void 0:i.Nit())?e:null},get scheduledAds(){return t.Dit.map((t=>t.Nit()))},get scheduledAdBreaks(){return t.Eit.map((t=>t.Nit()))},skip(){t.Ny()},schedule(i){let e=yN(i,nu.lL);e?t.W4(e,lc.kit,!1):console.error("Invalid ad description")},registerServerSideIntegration(i,e){t.Lit(i,e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)},get theoads(){var i;return null==(i=t.xit)?void 0:i.va}};return i=new jt(t,e),e}!function(t){t[t.kit=0]="kit",t[t.Cit=1]="Cit"}(lc||(lc={}));var Ke=class extends os{constructor(t,i){super(t),this.Xl=i}},Je=class extends Os{get ad(){return this.adBreak}constructor(t,i){super(t),this.adBreak=i}},Lr=class extends Ke{fa(){return new CP(this.Xl.Nit())}constructor(t){super("Oit",t)}},CP=class extends Je{constructor(t){super("removeadbreak",t)}},nh=class extends Ke{fa(){return new OP(this.Xl.Nit())}constructor(t){super("jit",t)}},OP=class extends Je{constructor(t){super("addadbreak",t)}},Fo=class extends os{constructor(t,i){super(t),this.Rit=i}},Oo=class extends Os{constructor(t,i){super(t),this.ad=i}},qr=class extends Fo{fa(){return new jP(this.Rit.Nit())}constructor(t){super("Pit",t)}},jP=class extends Oo{constructor(t){super("addad",t)}},dc=class extends Ke{fa(){return new RP(this.Xl.Nit())}constructor(t){super("zit",t)}},RP=class extends Je{constructor(t){super("adbreakend",t)}},PP=class extends Ke{fa(){return new zP(this.Xl.Nit())}constructor(t){super("Bit",t)}},zP=class extends Je{constructor(t){super("adbreakbegin",t)}},Mh=class extends Fo{fa(){return new BP(this.Rit.Nit(),this.currentTime)}constructor(t,i){super("Uit",t),this.currentTime=i}},BP=class extends Oo{constructor(t,i){super("adbegin",t),this.currentTime=i}},Qc=class extends Fo{fa(){return new UP(this.Rit.Nit(),this.currentTime)}constructor(t,i){super("Qit",t),this.currentTime=i}},UP=class extends Oo{constructor(t,i){super("adend",t),this.currentTime=i}},Xr=class extends os{fa(){return new QP}constructor(){super("Fit")}},QP=class extends Os{constructor(){super("adadded")}},ch=class extends B{get Fc(){return!!this.Ic&&this.Ic.Fc}get Sit(){return this.Ic?this.Ic.Sit:[]}get Iit(){return this.Ic?this.Ic.Iit:null}get Dit(){return this.Ic?this.Ic.Dit:[]}get Eit(){return this.Ic?this.Ic.Eit:[]}get xit(){var t;return null==(t=this.Ic)?void 0:t.xit}W4(t,i,e){var s;null==(s=this.Ic)||s.W4(t,i,e)}Yit(t){var i;null==(i=this.Ic)||i.Yit(t)}Ny(){var t;null==(t=this.Ic)||t.Ny()}Git(t){var i;null==(i=this.Ic)||i.Git(t)}Lit(t,i){var e;null==(e=this.Ic)||e.Lit(t,i)}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=xP(this)}get Uw(){return this.Ic}set Uw(t){const i=this.Ic;if(i===t)return;const e=this.Sit,s=this.Iit,n=this.Dit,r=this.Eit;null==i||i.E_(this.Ds),this.Ic=t,null==t||t.T_(this.Ds);const o=this.Sit,h=this.Iit,a=this.Dit,u=this.Eit,c=[];let l=!1;for(const t of r)Ai(u,t)||c.push(new Lr(t));for(const t of u)Ai(r,t)||c.push(new nh(t));for(const t of a)Ai(n,t)||(c.push(new qr(t)),l=!0);l&&c.push(new Xr),s!==h&&(s&&c.push(new dc(s)),h&&c.push(new PP(h)));for(const t of e)Ai(o,t)||c.push(new Qc(t,this.Qo.Q_()));for(const t of o)Ai(e,t)||c.push(new Mh(t,this.Qo.Q_()));for(const t of c)this.Co(t)}gn(){var t;return this.Vo(),null==(t=this.Ic)||t.E_(this.Ds),this.Ic=void 0,Promise.resolve()}constructor(t){super(),this.Xa=void 0,this.Qo=t}},sh=class extends B{get Fc(){return!1}get Sit(){return[]}get Iit(){return null}get Dit(){return[]}get Eit(){return[]}W4(t,i,e){this.Vit.push({Wit:t,Hit:i,Xit:e})}Ny(){}Git(t){}Lit(t,i){this.Zit.push({Bp:t,qit:i})}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=xP(this)}Yit(t){const i=this.Zit.slice(),e=this.Vit.slice();this.tr();for(const e of i)t.Lit(e.Bp,e.qit);for(const i of e)t.W4(i.Wit,i.Hit,i.Xit)}Kit(){const t=this.Vit.map((t=>t.Wit));return this.tr(),t}tr(){To(this.Zit),To(this.Vit)}gn(){return this.Vo(),this.tr(),Promise.resolve()}constructor(...t){super(...t),this.Xa=void 0,this.Zit=[],this.Vit=[]}};function FP(t){return class extends B{get sit(){return this.Jit.sit}get Oc(){return this.Ic}get iit(){return this.Jit.iit}get wd(){return this.Jit.wd}get Hj(){return this.Jit.Hj}get ya(){return this.Jit.ya}get tit(){return this.Jit.tit}get Htt(){return this.Jit.Htt}get Ytt(){return this.Jit.Ytt}get Qtt(){return this.Jit.Qtt}get eS(){return this.Jit.eS}set eS(t){this.Jit.eS=t,this.$it()}get Gtt(){return this.Jit.Gtt}get ht(){return this.Jit.ht}get YF(){return this.Jit.YF}get Iu(){return this.Jit.Htt}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}get Z_(){return this.Jit.Z_}get Yg(){return this.Jit.Yg}set Yg(t){this.Jit.Yg=t}get eg(){return this.Jit.eg}get hF(){return this.Jit.hF}get nt(){return this.Jit.nt}get Ol(){return this.Jit.Ol}get rt(){return this.Jit.rt}get qtt(){return this.Jit.qtt}get jX(){return this.Jit.jX}get R_(){return this.Qo.R_}set R_(t){this.Qo.R_=t}get bt(){return this.Jit.bt}get we(){return this.Jit.we}get G_(){return this.Jit.G_}get og(){return this.Jit.og}set og(t){this.ag(t)}get fg(){return this.Qo.fg}get mi(){return this.tet.zu||""}set mi(t){this.tet.yit=t}get gg(){return this.Jit.gg}set gg(t){this.Qo.gg=t}get yg(){return this.Jit.yg}set yg(t){this.Jit.yg=t}get Sg(){return this.Qo.Sg}get ba(){return this.Jit.ba}set ba(t){this.Jit.ba=t}get Eg(){return this.Qo.Eg}get cit(){return this.Jit.cit}get Xw(){return this.Jit.Xw}get Cg(){return this.Jit.Cg}get Rg(){return this.Jit.Rg}get zg(){return this.Jit.zg}set zg(t){this.Ug(t)}get Qg(){return this.Jit.Qg}get Jtt(){return this.Jit.Jtt}get Bo(){return this.Jit.Bo}async JO(t,i){return this.XZ.JO(t,i).catch(_t)}async iet(t,i){Vr(i),this.Jit.T_(this.eet);try{await this.Jit.ga(t,i)}finally{this.Jit.E_(this.eet)}}async $it(){const t=await this.net();this.ret(t)}async net(){const t=this.Wa();return t&&!Mu(t)&&this.eS&&this.fg?this.Gtt.oet(this.og):"none"}ret(t){var i;const e=(null==(i=this.Wa())?void 0:i.mutedAutoplay)||this.wd.mutedAutoplay;switch(t){case"all":this.het();break;case"muted":(this.og||e===sv.ALL)&&(this.og=!0,this.Xg())}}ga(t){Mu(this.SB)||this.Co(new R(0,qo.BT)),this.tr(),this.SB=t,$r(this.JO((async i=>{Vr(i);try{await this.iet(t,i)}catch(t){return me(t),this.SB=void 0,void this.rB(M_(t,qa.SOURCE_NOT_SUPPORTED))}finally{this.aet(this.Jit)}const e=await this.net();this.Co(new NP(this.Wa())),this.ret(e)})))}F_(t,i){this.Qo.F_(t,i)}W_(){var t;return null!=(t=this.bU)?t:this.Jit.W_()}X_(){var t;return null!=(t=this.vz)?t:this.Jit.X_()}rB(t){void 0===this.X_()&&(this.vz=t,this.bU=ia(t),this.Co(new as(t)))}Xg(){this.Qo.Xg()}het(){this.og||this.Wg(),this.Xg()}Wg(){this.Jit.Wg()}Hg(){this.Qo.Hg()}Zg(){this.ga(void 0)}ge(){this.EB=!0,this.Qo.ge()}be(){this.EB=!1,this.Qo.be()}ka(){this.Jit.ka()}Ug(t){this.Jit.Ug(t)}ag(t){this.Jit.ag(t)}wa(t){this.uet=t,t.Eq(this)}cs(){return this.Jit.cs()}Wa(){return this.SB}Vg(){return this.Jit.Vg()}Q_(){return this.Qo.Q_()}Ktt(){return this.Qo.Ktt()}Td(){return this.Jit.Td()}j_(){return this.Jit.j_()}Ag(){return this.Jit.Ag()}Dg(){return this.Jit.Dg()}$g(){this.Jit.$g()}iw(){this.Jit.iw()}tr(){this.SB=void 0,this.vz=void 0,this.bU=void 0,this.cet=!0,To(this.let),this.det.tr(),this.aet(this.det),this.XZ.g_(),$r(this.XZ.JO((async t=>{Vr(t),await this.Jit.Zg()})))}gn(){this.Co(new gP),this.tet.gn(),this.TB(),this.tr(),$r(this.JO((async()=>{await this.Jit.gn(),this.uet&&(this.uet.rS(this),this.uet=void 0),this.XZ.gn()}))),this.Vo()}aet(t){if(this.Qo===t)return;const i=this.Qo.fg,e=this.Qo.Q_(),s=this.Qo.gg,n=this.Qo.Sg,r=this.Qo.Eg;this.fet=i,this.V6=n,this.TB(),t.T_(this._et),t===this.Jit?(void 0!==this.Ic&&(this.Ic.Uw=t.Oc,this.wet.Yit(this.Ic)),(r||t.Q_()!==e)&&t.F_(e),t.gg!==s&&(t.gg=s),i?t.Hg():t.Xg()):(void 0!==this.Ic&&(this.Ic.Uw=this.wet,this.wet.tr()),this.wd.retainPlaybackRateOnSourceChange?t.gg=s:1!==s&&this.Co(new Zs(this.Q_(),1))),t.E_(this._et),this.Qo=t,this.bB();for(const t of this.let)this.Co(t);To(this.let),this.EB?t.ge():t.be()}bB(){this.Qo.T_(this.ew)}TB(){this.Qo.E_(this.ew)}fa(){return function(t){let i,e;const s=i=>{e=i;const s=dl(i,t.wd);t.ga(s)};let n={get abr(){return t.Qtt.va},get ads(){var i;return null==(i=t.Oc)?void 0:i.va},get audioTracks(){return t.ht.va},get autoplay(){return t.eS},set autoplay(i){t.eS=Boolean(i)},get buffered(){return t.j_()},get canvas(){return t.iit.va},get cast(){var i;return null==(i=t.YF)?void 0:i.va},get clip(){return t.qtt.va},get currentProgramDateTime(){var i;return null!=(i=t.R_)?i:null},set currentProgramDateTime(i){t.R_=null!=i?i:void 0},get currentTime(){return t.Q_()},set currentTime(i){t.F_(Number(i))},get duration(){return t.Td()},get element(){return t.we},get ended(){return t.G_},get error(){return t.W_()},get errorObject(){return t.X_()},get loop(){return t.jX.jX},set loop(i){t.jX.jX=Boolean(i)},get metrics(){return t.eg.va},get muted(){return t.og},set muted(i){t.ag(i)},get network(){return t.hF.va},get paused(){return t.fg},get playbackRate(){return t.gg},set playbackRate(i){const e=Number(i);if(e<0)throw new RangeError("playbackRate must be a positive number");t.gg=e},get played(){return t.Ag()},get poster(){return t.mi},set poster(i){t.mi=wo(i)},get preload(){return t.yg},set preload(i){t.yg=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(i)},get presentation(){return t.tit.va},get readyState(){return t.Sg},get seekable(){return t.Dg()},get seeking(){return t.Eg},get source(){return e},set source(t){s(t)},get src(){return fN(t.Wa())},set src(t){s({sources:t})},get textTracks(){return t.nt.va},get textTrackStyle(){return t.Ol.va},get theoLive(){return t.cit},get uid(){return t.Xw},get videoHeight(){return t.Cg},get videoTracks(){return t.rt.va},get videoWidth(){return t.Rg},get visibility(){return t.Bo.va},get volume(){return t.zg},set volume(i){t.Ug(Number(i))},get latency(){return t.Qg.va},destroy(){t.gn(),t=null,e=void 0},play(){t.het()},pause(){t.Hg()},stop(){e=void 0,t.Zg()},prepareWithUserAction(){t.Wg()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)},setSource(t){s(t)}};return i=new Jc(n,!0),i.Qa(t),i.yn("destroy",(()=>{i.gn()})),n}(this)}constructor(i,e){super(),this.fet=!0,this.V6=qo.BT,this.cet=!1,this.SB=void 0,this.vz=void 0,this.bU=void 0,this.eet=t=>{t.type!==Tf.qv&&this.let.push(t)},this._et=t=>{(t.type!==Tf.jh||this.Qo.fg)&&(t.type===Tf.Sh&&this.Qo.fg||t.type===Tf.im&&this.Qo.Eg&&this.Qo.Q_()===t.currentTime||t.type===Tf.qv&&this.Qo.gg===t.playbackRate||this.Co(t))},this.ew=t=>{if(this.cet){if(t.type===$.Tm)return;t.type!==$.pm&&t.type!==$.Sm||(this.cet=!1)}if(t.type===Tf.jh){if(!this.fet)return;this.fet=!1}else if(t.type===Tf.Sh){if(this.fet)return;this.fet=!0}else if(t.type===$.Nw){if(this.V6===t.readyState)return;this.V6=t.readyState}else if(t.type===Tf.Ev)return;this.Co(t)},this.Jit=new t(i,e),this.det=new IP,this.Qo=this.Jit,this.tet=new LP(this),this.Jit.Oc&&(this.Ic=new ch(this),this.Ic.Uw=this.Jit.Oc,this.wet=new sh),this.XZ=new Ku,this.let=[],this.EB=!0,this.bB()}}}var YP,GP=class extends Os{constructor(t){super("tizen2retry"),this.originalErrorEvent=t}};function VP(){if(!YP){let t=wP;t=function(t){return class extends sl{constructor(i,e){let s=new t(i,e);for(const t of vP)if(pP[t])for(const i of pP[t])s=i(s);super(s)}}}(t);let i=FP(t);Po.wk&&Po.pk<3&&(i=function(t){return class extends t{ga(t){this.vet=0,super.ga(t)}Co(t){if(t.type===hi.ha&&this.vet<3)return this.vet++,super.Co(new GP(t)),void super.ga(this.Wa());super.Co(t)}constructor(...t){super(...t),this.vet=0}}}(i)),i=function(t){let i=t;for(const t of vP)if(mP[t])for(const e of mP[t])i=e(i);return i}(i),YP=i}return YP}function WP(t,i){const e=ov(i),s=new(VP())(t,e);s.ba=s;let n=s.va;return s.ka(),s.wa(SP),w.defineProperty(n,"constructor",{value:WP}),n=rf(n),MP(s),n}Gd((()=>{self.dispatchEvent&&self.dispatchEvent(TP("theoplayerready"))}));var HP={base64:new class{encode(t){return dn(t)}decode(t){return $s(t)}}},XP=JSON.parse('["dash","hesp","millicast","hls","chromecast","ads","theoads","airplay","spotx","vr","vr-webxr","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","verizonmedia","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');function ZP(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}function qP(t,i){var e=function(t,i){var e=t.length;if(e<=1)return t;for(var s=new Array(e),n=1;n<e;n*=2){KP(t,i,n,s);var r=t;t=s,s=r}return t}(t,i);return e!==t&&KP(e,null,t.length,t),t}function KP(t,i,e,s){var n,r,o,h,a,u=t.length,c=0,l=2*e;for(n=0;n<u;n+=l)for(o=(r=n+e)+e,r>u&&(r=u),o>u&&(o=u),h=n,a=r;;)if(h<r&&a<o)i(t[h],t[a])<=0?s[c++]=t[h++]:s[c++]=t[a++];else if(h<r)s[c++]=t[h++];else{if(!(a<o))break;s[c++]=t[a++]}}var JP=/[a-zA-Z]/,$P=/[0-9]/,tz=/[0-9a-fA-F]/,iz=/^0x/i,ez=/^[0-9]+$/,sz=/^[0-9a-fA-F]+$/,nz=/^[0-7]+$/,rz=w.prototype.toString,oz=Array.isArray||function(t){return"[object Array]"===rz.call(t)},hz="undefined"!=typeof Symbol&&"symbol"==typeof Symbol.iterator;function az(t){return oz(t)?t:Array.from(t)}function uz(t,i,e){var s=t[i];t[i]=t[e],t[e]=s}function cz(t){return t>=65&&t<=90}function lz(t){return cz(t)||function(t){return t>=97&&t<=122}(t)}function dz(t){return t>=48&&t<=57}function fz(t){return dz(t)||lz(t)}function _z(t){return dz(t)||t>=65&&t<=70||t>=97&&t<=102}function gz(t){return cz(t)?t+32:t}function wz(t){return dz(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function vz(t,i){return void 0===i&&(i=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(i?87:55):-1}var mz=_.min,pz=String.fromCharCode,Az=16384;function yz(t){for(var i=t.length,e=[],s=0;s<i;s+=Az){var n=mz(s+Az,i);e.push(pz.apply(null,t.slice(s,n)))}return e.join("")}var Mz=2147483647,bz=/[^\0-\x7E]/,Tz=/[\x2E\u3002\uFF0E\uFF61]/g,Sz={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Nz=_.floor,Iz=String.fromCharCode;function Dz(t){throw new RangeError(Sz[t])}function Ez(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}var kz,Lz,ah,xz=function(t,i){return t+22+75*(t<26)-((0!=i)<<5)},Cz=function(t,i,e){var s=0;for(t=e?Nz(t/700):t>>1,t+=Nz(t/i);t>455;s+=36)t=Nz(t/35);return Nz(s+36*t/(t+38))},Oz=function(t){return function(t,i){var e=t.split("@"),s="";e.length>1&&(s=e[0]+"@",t=e[1]);var n=function(t,i){for(var e=[],s=t.length;s--;)e[s]=i(t[s]);return e}((t=t.replace(Tz,".")).split("."),i).join(".");return s+n}(t,(function(t){return bz.test(t)?"xn--"+function(t){for(var i=[],e=(t=Ez(t)).length,s=128,n=0,r=72,o=0,h=t;o<h.length;o++){var a=h[o];a<128&&i.push(Iz(a))}var u=i.length,c=u;for(u&&i.push("-");c<e;){for(var l=Mz,d=0,f=t;d<f.length;d++){var _=f[d];_>=s&&_<l&&(l=_)}var g=c+1;l-s>Nz((Mz-n)/g)&&Dz("overflow"),n+=(l-s)*g,s=l;for(var w=0,v=t;w<v.length;w++){var m=v[w];if(m<s&&++n>Mz&&Dz("overflow"),m==s){for(var p=n,A=36;;A+=36){var y=A<=r?1:A>=r+26?26:A-r;if(p<y)break;var M=p-y,b=36-y;i.push(Iz(xz(y+M%b,0))),p=Nz(M/b)}i.push(Iz(xz(p,0))),r=Cz(n,g,c==u),n=0,++c}}++n,++s}return i.join("")}(t):t}))};function Xi(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s)}return yz(i)}function jz(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Rz(t,i){return t>>i&63|128}function Pz(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(jz(t),i.push(t>>12&15|224),i.push(Rz(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(Rz(t,12)),i.push(Rz(t,6))),i.push(63&t|128)):i.push(t)}function zz(t){for(var i=[],e=0;e<t.length;e++){Pz(t[e],i)}return i}function Bz(){if(ah>=Lz)throw new g("Invalid byte index");var t=255&kz[ah];if(ah++,128==(192&t))return 63&t;throw new g("Invalid continuation byte")}function Uz(){var t,i;if(ah>Lz)throw new g("Invalid byte index");if(ah===Lz)return!1;if(t=255&kz[ah],ah++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|Bz())>=128)return i;throw new g("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|Bz()<<6|Bz())>=2048)return jz(i),i;throw new g("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|Bz()<<12|Bz()<<6|Bz())>=65536&&i<=1114111)return i;throw new g("Invalid UTF-8 detected")}function Qz(t){return[37,vz(t>>4),vz(15&t)]}function Fz(t){return function(t){return t>=0&&t<=31}(t)||t>126}function Yz(t){return Fz(t)||32===t||34===t||60===t||62===t||96===t}function Gz(t){return Yz(t)||35===t||63===t||123===t||125===t}function Vz(t){return Gz(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function Wz(t){return t<33||t>126||34===t||35===t||60===t||62===t}function Hz(t){return Wz(t)||39===t}function Xz(t,i){if(!i(t))return[t];for(var e=zz([t]),s=[],n=0;n<e.length;n++){var r=e[n];s.push.apply(s,Qz(r))}return s}function Zz(t,i){for(var e=[],s=0,n=Ez(t);s<n.length;s++){var r=n[s];e.push.apply(e,Xz(r,i))}return Xi(e)}function qz(t){return function(t){for(var i=[],e=t.length,s=0;s<e;s++){var n=t[s];if(37===n&&s+2<e&&_z(t[s+1])&&_z(t[s+2])){var r=wz(t[s+1])<<4|wz(t[s+2]);i.push(r),s+=2}else i.push(n)}return i}(zz(t))}function Kz(t){return Xi(function(t){kz=t.slice(),Lz=kz.length,ah=0;for(var i,e=[];!1!==(i=Uz());)e.push(i);return e}(qz(Ez(t))))}function Jz(t){var i=t.length,e=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<i&&":"===t[r]){if(!(r+1<i&&":"===t[r+1]))throw new b;r+=2,n=s+=1}for(;r<i;){if(8===s)throw new b("Too many groups");if(":"!==t[r]){for(var o=0,h=0;h<4&&r<i&&tz.test(t[r]);)o=o<<4|x(t[r],16),r+=1,h+=1;if("."===t[r]){if(0===h)throw new b;if(r-=h,s>6)throw new b;for(var a=0;r<i;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new b;r+=1}if(!$P.test(t[r]))throw new b;for(;r<i&&$P.test(t[r]);){var c=x(t[r],10);if(null===u)u=c;else{if(0===u)throw new b;if((u=10*u+c)>255)throw new b}r+=1}e[s]=e[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new b;break}if(":"===t[r]){if((r+=1)===i)throw new b}else if(r<i)throw new b;e[s]=o,s+=1}else{if(null!==n)throw new b("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)uz(e,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new b;return e}function $z(t){var i=10,e=ez;return iz.test(t)?(t=t.slice(2),i=16,e=sz):t.length>=2&&"0"===t[0]&&(t=t.slice(1),i=8,e=nz),""===t?0:e.test(t)?x(t,i):void 0}var _h={z2:4},tB=/[\0\t\n\r #%/:?@\[\\\]]/,iB=/[\0\t\n\r #/:?@\[\\\]]/;function eB(t,i){if("["===t[0]){if("]"!==t[t.length-1])throw new b("Invalid IPv6 address");return{z2:2,met:Jz(t.slice(1,-1))}}if(!i)return function(t){if(iB.test(t))throw new b("Invalid code point in opaque host");var i=Zz(t,Fz);return""===i?_h:{z2:3,zx:i}}(t);var e=function(t){var i=function(t){return Oz(t.toLowerCase())}(t);return i}(Kz(t));if(tB.test(e))throw new b("Invalid code point in host");var s=function(t){var i=t.split(".");if(""===i[i.length-1]&&i.pop(),!(i.length>4)){for(var e=[],s=0;s<i.length;s++){var n=i[s];if(""===n)return;var r=$z(n);if(void 0===r)return;e.push(r)}for(var o=0;o<e.length-1;o++)if(e[o]>255)throw new b;if(e[e.length-1]>=_.pow(256,5-e.length))throw new b;for(var h=e.pop(),a=0;a<e.length;a++)h+=e[a]*_.pow(256,3-a);return h}}(e);return void 0!==s?{z2:1,met:s}:""===e?_h:{z2:0,pet:e}}function sB(t){switch(t.z2){case 0:return t.pet;case 1:return function(t){for(var i=[],e=t,s=1;s<=4;s++)i.push(""+(255&e)),4!==s&&i.push("."),e>>>=8;return i.reverse().join("")}(t.met);case 2:return"["+function(t){for(var i="",e=function(t){for(var i=0,e=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>e&&(i=s,e=n),n=0);return n>e&&(i=s,e=n),e>1?i:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}e!==n?(i+=t[n].toString(16),7!==n&&(i+=":")):(i+=0===n?"::":":",s=!0)}return i}(t.met)+"]";case 3:return t.zx;case 4:return""}}var nB=/\+/g;function rB(t){return 42===t||45===t||46===t||95===t||fz(t)}function oB(t){for(var i=t.split("&"),e=[],s=0;s<i.length;s++){var n=i[s];if(""!==n){var r=n.indexOf("="),o=void 0,h=void 0;-1!==r?(o=n.slice(0,r),h=n.slice(r+1)):(o=n,h=""),o=o.replace(nB," "),h=h.replace(nB," ");var a=Kz(o),u=Kz(h);e.push([a,u])}}return e}function hB(t){for(var i="",e=0;e<t.length;e++){var s=t[e];e>0&&(i+="&"),i+=aB(zz(Ez(s[0])))+"="+aB(zz(Ez(s[1])))}return i}function aB(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];32===s?i.push(43):rB(s)?i.push(s):i.push.apply(i,Qz(s))}return yz(i)}var uB=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function Ze(t){var i=""+t,e=uB.exec(i);return e?function(t,i){for(var e=t.length,s=[],n=i;n<e;n++){var r=t.charCodeAt(n);if(lB(r))if(dB(r)||n===e-1)s.push(cB);else{var o=t.charCodeAt(n+1);dB(o)?(s.push(r,o),n++):s.push(cB)}else s.push(r)}return t.slice(0,i)+yz(s)}(i,e.index):i}var cB=65533,lB=function(t){return 55296==(63488&t)},dB=function(t){return 0!=(1024&t)};function fB(t,i){var e=t[0],s=i[0];return e===s?0:e<s?-1:1}function _B(t){t.pf.length=0}function gB(t,i){!function(t,i){for(var e=0;e<i.length;e++)t[e]=i[e];t.length=i.length}(t.pf,oB(i))}function wB(t){if(t.Ju){var i=hB(t.pf);""===i&&(i=null),t.Ju.Ju.Aet=i}}var vB=function(){function t(t){if(void 0===t&&(t=void 0),this.Ju=null,null==t)this.pf=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof vB&&!!oz(t.pf)&&(!hz||t[Symbol.iterator]===mB)}(t))this.pf=t.pf.slice();else if(function(t){return null!=t&&(!!oz(t)||!!hz&&"function"==typeof t[Symbol.iterator])}(t)){this.pf=[];for(var i=0,e=az(t);i<e.length;i++){var s=az(e[i]);if(2!==s.length)throw new b("Invalid name-value pair");this.pf.push([Ze(s[0]),Ze(s[1])])}}else for(var n in this.pf=[],t)w.prototype.hasOwnProperty.call(t,n)&&this.pf.push([Ze(n),Ze(t[n])]);else(t=Ze(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.pf=oB(t)}var i=t.prototype;return i.append=function(t,i){t=Ze(t),i=Ze(i),this.pf.push([t,i]),wB(this)},i.delete=function(t){t=Ze(t);for(var i=this.pf,e=0;e<i.length;){i[e][0]===t?i.splice(e,1):e++}wB(this)},i.get=function(t){t=Ze(t);for(var i=this.pf,e=0;e<i.length;e++){var s=i[e];if(s[0]===t)return s[1]}return null},i.getAll=function(t){t=Ze(t);for(var i=this.pf,e=[],s=0;s<i.length;s++){var n=i[s];n[0]===t&&e.push(n[1])}return e},i.has=function(t){t=Ze(t);for(var i=this.pf,e=0;e<i.length;e++){if(i[e][0]===t)return!0}return!1},i.set=function(t,i){t=Ze(t),i=Ze(i);for(var e=this.pf,s=!1,n=0;n<e.length;){var r=e[n];r[0]===t?s?e.splice(n,1):(r[1]=i,s=!0,n++):n++}s||e.push([t,i]),wB(this)},i.sort=function(){qP(this.pf,fB),wB(this)},i.toString=function(){return hB(this.pf)},i.entries=function(){return new MB(this.pf,pB)},i.keys=function(){return new MB(this.pf,AB)},i.values=function(){return new MB(this.pf,yB)},i.forEach=function(t){var i=this;this.pf.forEach((function(e){return t(e[1],e[0],i)}))},t}(),mB=vB.prototype.entries;hz&&(vB.prototype[Symbol.iterator]=mB);var pB=function(t){return[t[0],t[1]]},AB=function(t){return t[0]},yB=function(t){return t[1]},MB=function(){function t(t,i){this.yet=0,this.pf=t,this.Met=i}return t.prototype.next=function(){return this.yet<this.pf.length?{done:!1,value:this.Met(this.pf[this.yet++])}:{done:!0,value:void 0}},t}(),bB="null";var hh=w.create(null);hh.ftp=21,hh.file=0,hh.gopher=70,hh.http=80,hh.https=443,hh.ws=80,hh.wss=443;var TB=/^(?:\.|%2e)$/i,SB=/^(?:\.|%2e){2}$/i;function NB(t){return TB.test(t)}function IB(t){return SB.test(t)}function DB(t){return void 0!==hh[t]}function di(t){return DB(t.fP)}function EB(t){return""!==t.bet||""!==t.Tet}function kB(t){var i=t.length;if(!(i>=2))return!1;if(!xB(t.slice(0,2)))return!1;if(2!==i){var e=t[2];if(47!==e&&92!==e&&63!==e&&35!==e)return!1}return!0}function LB(t){return 2===t.length&&JP.test(t[0])&&(":"===t[1]||"|"===t[1])}function xB(t){return 2===t.length&&LB(yz(t))}function CB(t){return LB(t)&&":"===t[1]}function OB(t){var i=t.Net;0!==i.length&&("file"===t.fP&&1===i.length&&CB(i[0])||i.pop())}function jB(t){return null===t.Iet||_h===t.Iet||t.Det||"file"===t.fP}var Wi=-1,RB=/\t|\n|\r/g,PB=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function zB(t,i,e,s){void 0===e&&(e=null),void 0===s&&(s=null),e||(e=new UB,t=t.replace(PB,""));var n=null!==s?s:0;i=i||null;for(var r=[],o=!1,h=!1,a=!1,u=Ez(t=t.replace(RB,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:Wi;switch(n){case 0:if(!lz(d)){if(null===s){r.length=0,n=2;continue}throw new b("Invalid scheme")}r.push(gz(d)),n=1;break;case 1:if(fz(d)||43===d||45===d||46===d)r.push(gz(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new b("Invalid scheme")}var f=Xi(r);if(null!==s){if(DB(e.fP)&&!DB(f))return;if(!DB(e.fP)&&DB(f))return;if((EB(e)||null!==e.E7)&&"file"===f)return;if("file"===e.fP&&(e.Iet===_h||null===e.Iet))return}if(e.fP=f,null!==s)return void(di(e)&&e.E7===hh[e.fP]&&(e.E7=null));r.length=0,"file"===e.fP?n=13:di(e)&&i&&i.fP===e.fP?n=3:di(e)?n=7:47===u[l+1]?(n=4,l+=1):(e.Det=!0,e.Net.push(""),n=18)}break;case 2:if(!i||i.Det&&35!==d)throw new b("Invalid scheme");i.Det&&35===d?(e.fP=i.fP,e.Net=i.Net.slice(),e.Aet=i.Aet,e.Eet="",e.Det=!0,n=20):"file"!==i.fP?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:e.fP=i.fP,Wi===d?(e.bet=i.bet,e.Tet=i.Tet,e.Iet=i.Iet,e.E7=i.E7,e.Net=i.Net.slice(),e.Aet=i.Aet):47===d?n=6:63===d?(e.bet=i.bet,e.Tet=i.Tet,e.Iet=i.Iet,e.E7=i.E7,e.Net=i.Net.slice(),e.Aet="",n=19):35===d?(e.bet=i.bet,e.Tet=i.Tet,e.Iet=i.Iet,e.E7=i.E7,e.Net=i.Net.slice(),e.Aet=i.Aet,e.Eet="",n=20):92===d&&di(e)?n=6:(e.bet=i.bet,e.Tet=i.Tet,e.Iet=i.Iet,e.E7=i.E7,e.Net=i.Net.slice(),e.Net.pop(),n=17,l-=1);break;case 6:!di(e)||47!==d&&92!==d?47===d?n=9:(e.bet=i.bet,e.Tet=i.Tet,e.Iet=i.Iet,e.E7=i.E7,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){o&&r.unshift(37,52,48),o=!0;for(var _=0;_<r.length;_++){var g=r[_];if(58!==g||a){var w=Xi(Xz(g,Vz));a?e.Tet+=w:e.bet+=w}else a=!0}r.length=0}else if(Wi===d||47===d||63===d||35===d||di(e)&&92===d){if(o&&0===r.length)throw new b("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===e.fP)l-=1,n=15;else if(58!==d||h)if(Wi===d||47===d||63===d||35===d||di(e)&&92===d){if(l-=1,di(e)&&0===r.length)throw new b("Invalid host");if(null!==s&&0===r.length&&(EB(e)||null!==e.E7))return;var v=eB(Xi(r),di(e));if(e.Iet=v,r.length=0,n=16,null!==s)return}else 91===d?h=!0:93===d&&(h=!1),r.push(d);else{if(0===r.length)throw new b("Invalid host");var m=eB(Xi(r),di(e));if(e.Iet=m,r.length=0,n=12,11===s)return}break;case 12:if(dz(d))r.push(d);else{if(!(Wi===d||47===d||63===d||35===d||di(e)&&92===d||null!==s))throw new b("Invalid port");if(0!==r.length){var p=x(Xi(r),10);if(p>65535)throw new b("Invalid port");e.E7=p===hh[e.fP]?null:p,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:e.fP="file",47===d||92===d?n=14:i&&"file"===i.fP?Wi===d?(e.Iet=i.Iet,e.Net=i.Net.slice(),e.Aet=i.Aet):63===d?(e.Iet=i.Iet,e.Net=i.Net.slice(),e.Aet="",n=19):35===d?(e.Iet=i.Iet,e.Net=i.Net.slice(),e.Aet=i.Aet,e.Eet="",n=20):(kB(u.slice(l))||(e.Iet=i.Iet,e.Net=i.Net.slice(),OB(e)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(i&&"file"===i.fP&&!kB(u.slice(l))&&(CB(i.Net[0])?e.Net.push(i.Net[0]):e.Iet=i.Iet),n=17,l-=1);break;case 15:if(Wi===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&xB(r))n=17;else if(0===r.length){if(e.Iet=_h,null!==s)return;n=16}else{var A=eB(Xi(r),di(e));if(0===A.z2&&"localhost"===A.pet&&(A=_h),e.Iet=A,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:di(e)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(e.Aet="",n=19):null===s&&35===d?(e.Eet="",n=20):Wi!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(Wi===d||47===d||di(e)&&92===d||null===s&&(63===d||35===d)){var y=Xi(r);if(IB(y)?(OB(e),47===d||di(e)&&92===d||e.Net.push("")):!NB(y)||47===d||di(e)&&92===d?NB(y)||("file"===e.fP&&0===e.Net.length&&xB(r)&&(_h!==e.Iet&&null!==e.Iet&&(e.Iet=_h),r[1]=58,y=Xi(r)),e.Net.push(y)):e.Net.push(""),r.length=0,"file"===e.fP&&(Wi===d||63===d||35===d))for(;e.Net.length>1&&""===e.Net[0];)e.Net.shift();63===d?(e.Aet="",n=19):35===d&&(e.Eet="",n=20)}else r.push.apply(r,Xz(d,Gz));break;case 18:63===d?(e.Aet="",n=19):35===d?(e.Eet="",n=20):Wi!==d&&(e.Net[0]+=Xi(Xz(d,Fz)));break;case 19:null===s&&35===d?(e.Eet="",n=20):Wi!==d&&(e.Aet+=Xi(Xz(d,di(e)?Hz:Wz)));break;case 20:Wi===d||0===d||(e.Eet+=Xi(Xz(d,Yz)))}l++}return e}function BB(t,i,e,s){try{zB(t,i,e,s)}catch(t){}}var UB=function(){this.fP="",this.bet="",this.Tet="",this.Iet=null,this.E7=null,this.Net=[],this.Aet=null,this.Eet=null,this.Det=!1};function QB(t){switch(t.fP){case"blob":var i;try{i=zB(t.Net[0],null)}catch(t){return bB}return QB(i);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,i,e){return t+"://"+sB(i)+(null===e?"":":"+e)}(t.fP,t.Iet,t.E7);default:return bB}}var FB=function(){function t(t,i){var e,s=null;if(null!=i)if(function(t){return null!=t&&t instanceof FB&&"object"==typeof t.Ju}(i))s=i.Ju;else try{s=zB(String(i),null)}catch(t){throw new b("Invalid base URL: "+t.message)}try{e=zB(String(t),s)}catch(t){throw new b("Invalid URL: "+t.message)}var n=e.Aet;this.Ju=e,this.Aet=function(t){var i=new vB;return null!==t&&gB(i,t),i}(n),this.Aet.Ju=this}var i=t.prototype;return i.toString=function(){return this.href},i.toJSON=function(){return this.href},function(t,i,e){i&&ZP(t.prototype,i),e&&ZP(t,e)}(t,[{key:"href",get:function(){return function(t,i){void 0===i&&(i=!1);var e=t.fP+":";if(null!==t.Iet?(e+="//",EB(t)&&(e+=t.bet,""!==t.Tet&&(e+=":"+t.Tet),e+="@"),e+=sB(t.Iet),null!==t.E7&&(e+=":"+t.E7)):null===t.Iet&&"file"===t.fP&&(e+="//"),t.Det)e+=t.Net[0];else for(var s=0,n=t.Net;s<n.length;s++)e+="/"+n[s];return null!==t.Aet&&(e+="?"+t.Aet),i||null===t.Eet||(e+="#"+t.Eet),e}(this.Ju)},set:function(t){var i;try{i=zB(String(t),null)}catch(t){throw new b("Invalid URL: "+t.message)}this.Ju=i,_B(this.Aet);var e=this.Ju.Aet;null!==e&&gB(this.Aet,e)}},{key:"origin",get:function(){return QB(this.Ju)}},{key:"protocol",get:function(){return this.Ju.fP+":"},set:function(t){BB(t+":",null,this.Ju,0)}},{key:"username",get:function(){return this.Ju.bet},set:function(t){jB(this.Ju)||(this.Ju.bet=Zz(t,Vz))}},{key:"password",get:function(){return this.Ju.Tet},set:function(t){jB(this.Ju)||(this.Ju.Tet=Zz(t,Vz))}},{key:"host",get:function(){var t=this.Ju,i=t.Iet;if(null===i)return"";var e=t.E7,s=sB(i);return null!==e&&(s+=":"+e),s},set:function(t){this.Ju.Det||BB(t,null,this.Ju,10)}},{key:"hostname",get:function(){var t=this.Ju.Iet;return null===t?"":sB(t)},set:function(t){this.Ju.Det||BB(t,null,this.Ju,11)}},{key:"port",get:function(){var t=this.Ju.E7;return null===t?"":""+t},set:function(t){jB(this.Ju)||(""===t?this.Ju.E7=null:BB(t,null,this.Ju,12))}},{key:"pathname",get:function(){var t=this.Ju.Net;return this.Ju.Det?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.Ju.Det||(this.Ju.Net.length=0,BB(t,null,this.Ju,16))}},{key:"search",get:function(){var t=this.Ju.Aet;return null===t||""===t?"":"?"+t},set:function(t){t=Ze(t);var i=this.Ju;if(""===t)return i.Aet=null,void _B(this.Aet);"?"===t[0]&&(t=t.slice(1)),i.Aet="",BB(t,null,i,19),gB(this.Aet,t)}},{key:"searchParams",get:function(){return this.Aet}},{key:"hash",get:function(){var t=this.Ju.Eet;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.Ju.Eet="",BB(t,null,this.Ju,20)):this.Ju.Eet=null}}]),t}();function YB(t){return t.document&&t.document.baseURI||t.location.href||""}function GB(){let t=Ua,i=t.location.href;for(;t!==s.top;){t=t.parent;try{i=t.location.href}catch(t){}}return i}var VB=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!Il||!Il.msMaxTouchPoints),WB=Mb(),HB=!(!WB||!WB.webkitShowPlaybackTargetPicker),XB=class{get ket(){return void 0===this.Let&&(this.Let=this.xet()),this.Let}xet(){return 0}get Cet(){return!Po.Xk}get Oet(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get h5(){return s.devicePixelRatio||1}get jet(){return HB}get G3(){return!1}get P3(){return!0}get ep(){return Po.zk||Po.Ga}get Ret(){return!Po.Ga}get DR(){return!0}get op(){return!0}get rp(){return!1}get Pet(){}get zet(){return!0}get D0(){return!1}get Bet(){return Po.bk}Uet(t,i){return!0}Qet(t){return t>=2*Vt}constructor(){this.Let=void 0,this.Fet=!1,this.Je=VB,this.Qs=!1,this.Mtt=!0}},ZB=function(){const t=yb();if(!t)return!1;const i=t.muted;return t.muted=!i,t.muted!==i}(),qB=function(){if(Po.QE)return!1;const t=yb();if(!t)return!1;const i=t.volume;return t.volume=i/2+.1,i!==t.volume}();var Tr=class extends XB{xet(){return this.Yet?this.Yet.ket:super.xet()}get Pet(){var t;return null==(t=this.Yet)?void 0:t.Pet}get zet(){var t,i;return null==(i=null==(t=this.Yet)?void 0:t.zet)||i}Uet(t,i){return this.Yet?this.Yet.Uet(t,i):super.Uet(t,i)}Qet(t){return this.Yet?this.Yet.Qet(t):super.Qet(t)}constructor(t){super(),this.Yet=t,this.Yet&&(this.Fet=this.Yet.Fet,this.Je=this.Yet.Je,this.Mtt=ZB&&this.Yet.Mtt)}},KB=class extends Tr{get rp(){return Po.Ga}constructor(t){super(t),this.Fet=!0,this.Qs=!0}},JB=class extends KB{get rp(){return!0}xet(){return dC(!0)?super.xet():1}},$B=class extends Tr{get G3(){return Po.pk<3}get P3(){return Po.pk>=3}get Oet(){return s.tizen&&!this.Get&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const i=t.resolutionWidth,e=t.resolutionHeight;1===i&&1===e||(this.Get={width:i,height:e})})),this.Get}get D0(){return Po.pk<3}Uet(t,i){return super.Uet(t,i)}},_r=class extends XB{constructor(){super()}},tU=class extends _r{get Pet(){if(Po.TE)return 4096}Uet(t,i){if(t&&t.Vet&&i&&i.Vet){let e=iU(t.Vet,"mp4a.40.2")&&iU(i.Vet,"mp4a.40.5"),s=iU(t.Vet,"mp4a.40.5")&&iU(i.Vet,"mp4a.40.2"),n=iU(t.Vet,"mp4a.40.2")&&iU(i.Vet,"mp4a.40.34"),r=iU(t.Vet,"mp4a.40.34")&&iU(i.Vet,"mp4a.40.2"),o=iU(t.Vet,"mp4a.40.5")&&iU(i.Vet,"mp4a.40.34"),h=iU(t.Vet,"mp4a.40.34")&&iU(i.Vet,"mp4a.40.5");return!(e||s||n||r||o||h)}return!0}};function iU(t,i){return t.indexOf(i)>-1}var eU=class extends _r{Qet(t){return t>=2}},sU=class extends _r{constructor(){super(),this.Fet=Po.Uk>=11,this.Mtt=Po.zk&&!(Po.Ga&&Po.Uk<10)}},nU=class extends Tr{get Oet(){return s.webOS&&!this.Get&&s.webOS.deviceInfo((t=>{this.Get={width:t.screenWidth,height:t.screenHeight}})),this.Get}get DR(){return!1}},rU=class extends _r{get zet(){return!Po.NE||(Po.dk?92!==Po._k:Po.hk>=100)}},oU=class extends Tr{get rp(){return!0}},hU=class{Wet(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];IN(...i)}vp(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Ut(...i)}Het(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Ct(...i)}Xet(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];DN(t,...e)}A_(t,i){return u(t,i)}f1(t,i){return v(t,i)}p_(t){c(t)}g1(t){m(t)}IO(){return this.Zet.IO()}pO(){return this.Zet.pO()}yO(){return this.Zet.yO()}AO(){return this.Zet.AO()}vO(){return this.Zet.vO()}bO(t,i){return this.Zet.bO(t,i)}mO(t){return this.Zet.mO(t)}get AR(){return this.qet}Dh(t,i){let e;return void 0===i&&(i=YB(Ua)),e="object"!=typeof i||i instanceof FB?i:i.href,new FB(t,e)}wp(t,i){if(void 0===i&&(i=YB(Ua)),this.Ket){const e=Sn(i)?i:i.toString();return new self.URL(t,e).href}return this.Dh(t,i).href}get Ys(){return this.Jet}get np(){return{hp:Il&&Il.userAgent.match(/Android /i)?"Android":"other",sp:Boolean(Il&&Il.userAgent.match(/Android 8.0.0/i))}}get dH(){return self&&self.location&&"https:"===self.location.protocol}get $et(){return"languages"in Il?Il.languages.slice():[Il.language]}constructor(){this.qet=new aU,this.Jet=function(){const t=function(){if(Po.Ok)return new tU;if(Po.Sk||Po.Ik)return new eU;if(Po.zk)return new sU;if(Po.nk)return new rU;return new _r}();return Po.Ga?new JB(t):Po.Qs?new KB(t):Po.wk?new $B(t):Po.yk?new nU(t):Po.TE?new oU(t):new Tr(t)}(),this.Ket=uU(),self.performance&&self.performance.now?this.m_=()=>self.performance.now():this.m_=Na}},aU=class{get yR(){return Il.oscpu}get Ys(){return Il.platform}get MR(){return Il.vendor}get bR(){return Il.vendorSub}};function uU(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}var cU=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(i,e)=>new t(i,e)}(t)}catch(t){}const i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(i)return function(t){return(i,e)=>{const s=new t;if(i)for(const t of i)s.append(t);return s.getBlob(e&&e.type||"")}}(i)})();function lU(t,i,e){const s=cU([i],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,i){let e=t;const s=e.indexOf("?");if(s>=0&&(e=e.substr(0,s)),e=e.substr(e.lastIndexOf("/")+1),i){let t=e.indexOf(".");t<0&&(t=e.length),e=e.substr(0,t)+i+e.substr(t)}return e}(t,e),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}var dU=class extends Re{get name(){return vu.oD}constructor(t,i){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.zu),i)}},fU=self.fetch,_U=self.Request,gU=self.Response,wU=self.Headers,vU=self.ReadableStream,mU=self.AbortSignal,pU=self.AbortController,AU=ei((()=>{try{return ad(fU)&&Oa(_U)&&Oa(gU)&&Oa(wU)&&"forEach"in wU.prototype&&uU()}catch(t){return!1}})),yU=["http:","https:"];var MU=ei((()=>{try{return AU()&&Oa(mU)&&Oa(pU)&&"signal"in _U.prototype}catch(t){return!1}})),bU=ei((()=>{try{return AU()&&Oa(vU)&&"body"in gU.prototype&&!Po.XE}catch(t){return!1}}));function TU(t,i){const e=t.XD.has("content-length")?Number(t.XD.get("content-length")):void 0;let s;return s=t.ZW?function(t,i,e){return t.pipeThrough(new Wa(new SU(i,e)))}(t.VW(),i,e):async function(t,i,e){await Promise.resolve(),i(0,e);const s=await t,n=s.byteLength;return i(n,null!=e?e:n),s}(t.GR(),i,e),new Zk({ly:s,uD:t.uD},t)}var SU=class{transform(t,i){this.tst+=t.byteLength,this.ist(this.tst,this.sst),i.enqueue(t)}flush(t){var i;this.ist(this.tst,null!=(i=this.sst)?i:this.tst)}constructor(t,i){this.ist=t,this.sst=i,this.tst=0}};var NU=class{async nst(){const t=this.cD;let i,e;t._D&&(this.Dm=u((()=>{this.rst=!0,this.$O.g_()}),t._D),this.$O.f_.l_((()=>{c(this.Dm)})));try{i=fU(t.zu,{method:t.ZD,headers:t.XD.ED(),body:t.HD,credentials:t.tE?"include":"same-origin",signal:EU(this.$O.f_),mode:t._v,keepalive:t.sE})}catch(i){throw new dU(t,i)}try{e=await i}catch(t){const i=this.ost(t);throw be(i)&&this.$O.g_(),i}const s=e.url||t.zu,n=0===e.status&&"file:"===function(t){return ra.Dh(t).protocol}(s)?200:e.status,r=new IU(this,e,this.$O);let o=new Zk({ly:r,uD:t,qD:t.qD,XD:kU(e.headers),fD:n,NR:e.statusText,cE:s});if(!Xk(o))throw new so(o);return t.iE&&(o=TU(o,t.iE)),o}ost(t){return De(t)?t:be(t)?this.rst?new Ap(this.cD):new Fh(t.message,t):this.dD?new so(this.dD,t):new dU(this.cD,t)}constructor(t){this.$O=new Bd,this.dD=void 0,this.Dm=0,this.rst=!1,this.cD=t,this.$O.w_(t.f_),this.lD=this.nst()}},IU=class t extends Rk{get HW(){return this.hst.bodyUsed}get ZW(){return Ks(this.hst.body)}KW(){return this.JW.OL}uE(t){return this.$W(this.hst.text(),t)}GR(t){return this.$W(this.hst.arrayBuffer(),t)}VW(){const t=this.hst.body;return t?this.tH(t):kk(this.GR().then(Dk),this.$O)}eH(){const i=this.hst.clone(),[e,s]=this.$O.v_();return this.$O=e,new t(this.ast,i,s)}$W(t,i){i&&this.$O.w_(i);let e=Jr(Promise.resolve(t),this.$O.f_).catch((t=>{throw this.ast.ost(t)}));return e=Fd(e,this.$O),this.JW.w_(e.then(Br)),e}tH(t){return new Ei(new xU(t,(t=>this.ast.ost(t)),this.$O,this.JW),{highWaterMark:0})}constructor(t,i,e){super(),this.JW=new Oi,this.ast=t,this.hst=i,this.$O=e,this.JW.OL.catch(Br)}},DU="abort";function EU(t){if(!MU())return;const i=new pU;if(t.n_)i.abort();else if(!t.r_){const e=()=>{s(),i.abort()},s=()=>{i.signal.removeEventListener(DU,e),t.c_(e),t.d_(s)};i.signal.addEventListener(DU,e),t.u_(e),t.l_(s)}return i.signal}function kU(t){if(function(t){return Vu(t)&&"function"==typeof t.forEach}(t)){const i=new Xo;return t.forEach(((t,e)=>{Array.isArray(t)&&2===t.length?i.append(t[0],t[1]):i.append(e,t)})),i}return new Xo(t)}var LU,xU=class{start(t){this.YV=this.ust.getReader()}async pull(t){let i;try{i=await Jr(this.YV.read(),this.$O.f_)}catch(i){const e=this.cst(i);return this.JW.xL(e),this.$O.g_(),this.YV.cancel(e).catch(Br),void t.error(e)}i.done?(this.JW.LL(),this.$O.g_(),t.close()):t.enqueue(i.value)}cancel(t){return this.$O.g_(),this.JW.xL(t),this.YV.cancel(t)}constructor(t,i,e,s){this.ust=t,this.cst=i,this.$O=e,this.JW=s}};!function(t){t[t.UNSENT=0]="UNSENT",t[t.OPENED=1]="OPENED",t[t.HEADERS_RECEIVED=2]="HEADERS_RECEIVED",t[t.LOADING=3]="LOADING",t[t.DONE=4]="DONE"}(LU||(LU={}));var CU=class{get lD(){return this.lst.OL}nst(){const t=this.dst,i=this.cD;if(i.f_.n_)return this.fst();t.onreadystatechange=()=>this._st(),t.onprogress=t=>this.ist(t),t.onload=()=>this.gst(),t.onloadend=()=>this.wst(),t.onerror=()=>this.Iq(),t.ontimeout=()=>this.vst(),t.onabort=()=>this.fst(),t.open(i.ZD,i.zu,!0),t.withCredentials=Boolean(i.tE),"responseType"in t&&i.qD&&(i.qD===Ft.Ru?t.responseType="text":t.responseType="arraybuffer"),i.XD.forEach(((i,e)=>{t.setRequestHeader(e,i)})),i._D&&(t.timeout=i._D),this.$O.f_.u_(this.mst);const e=i.HD;e?t.send(e):t.send()}_st(){const t=this.dst;void 0!==t&&t.readyState>=2&&!this.pst&&(this.pst=!0,this.Ast())}Ast(){var t;const i=this.dst,e=function(t){const i=new Xo,e=t.replace(/\r?\n[\t ]+/g," ");return e.split(/\r?\n/).forEach((t=>{const e=t.split(":"),s=e.shift().trim();if(s){const t=e.join(":").trim();i.append(s,t)}})),i}(i.getAllResponseHeaders()||""),s=this.cD;var n;this.yst=new Oi,this.dD=new Zk({uD:s,qD:s.qD,ly:this.yst.OL,fD:i.status,NR:i.statusText,XD:e,cE:null!=(n=i.responseURL)?n:e.get("X-Request-URL")}),null==(t=this.lst)||t.LL(this.dD)}gst(){var t;const i=this.dst;if(void 0===i)return;let e=i.response;if(!Ks(e)){const t=this.cD.qD;e=t===Ft.Ru?i.responseText:t===Ft.SD?new ArrayBuffer(0):{}}null==(t=this.yst)||t.LL(e)}wst(){this.gn()}ist(t){void 0!==this.dst&&(null==this.cD.iE||this.cD.iE.call(this.cD,t.loaded,t.lengthComputable?t.total:void 0))}Iq(){const t=new g("Network request failed");this.dD?this.Ss(new so(this.dD,t)):this.Ss(new dU(this.cD,t))}vst(){this.Ss(new Ap(this.cD))}fst(){this.Ss(new Fh),this.gn()}Ss(t){var i,e;null==(i=null!=(e=this.yst)?e:this.lst)||i.xL(t)}gn(){this.dst=void 0,this.dD=void 0,this.lst=void 0,this.yst=void 0,this.$O.h_()}constructor(t){this.$O=new Bd,this.dD=void 0,this.lst=new Oi,this.pst=!1,this.mst=()=>{var t;this.fst(),null==(t=this.dst)||t.abort()},this.cD=t,this.$O.w_(t.f_),this.dst=new El,this.nst()}};var OU=class{uD(t){return function(t){if(!AU()||!function(t){try{return yU.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.zu))return!1;if(!bU()&&t.iE)return!1;if(!t.eE){if(Po.yk&&Po.hk<=68)return!1;if(Po.wk)return!1}return!0}(t)?new NU(t).lD:new CU(t).lD}NG(t){if(tA&&tA.sendBeacon)tA.sendBeacon(t.zu,cU([t.HD],{type:t.Nz}));else{const i=t.Nz?{"Content-type":t.Nz}:void 0;this.uD(new Zi({ZD:Cl.POST,zu:t.zu,HD:t.HD,XD:i,_v:xp.mp})).then((t=>{$r(t.GR())}),Br)}}gn(){}};var jU=class extends tt{constructor(t){super("Invalid XML",t)}},RU=class{KI(t){const i=new DOMParser;let e;try{e=i.parseFromString(t,"text/xml")}catch(t){throw new jU(t)}if(!e||e.getElementsByTagName("parsererror").length>0)throw new jU;return new YU(e)}},PU=class t{get CI(){return Kh.jI}get qI(){var t;return null!=(t=this.Mst.localName)?t:WU(this.Mst.nodeName)}get l(){return this.Mst.nodeName}get bst(){var t;return null!=(t=this.Mst.namespaceURI)?t:void 0}get Tst(){var t;return null!=(t=this.Mst.prefix)?t:void 0}get lT(){return this.Mst.nodeValue}xI(t){return this.Mst.isEqualNode(t.Mst)}UI(i){return new t(this.Mst.cloneNode(i))}constructor(t){this.Mst=t}},zU=class{get iD(){return void 0===this.Sst&&(this.Sst=function(t){const i=[];for(let e=0;e<t.length;e++){const s=VU(t.item(e));s&&i.push(s)}return i}(this.Nst.childNodes)),this.Sst}get m(){return this.iD.filter(GU)}XI(t){return this.iD.filter((i=>GU(i)&&i.WR===t))}HI(t,i){return this.iD.filter((e=>GU(e)&&e.qI===i&&e.bst===t))}get TI(){return this.Nst}eD(t){this.Nst.appendChild(t.TI),this.Sst&&this.Sst.push(t)}xI(t){return this.Nst.isEqualNode(t.TI)}constructor(t){this.Sst=void 0,this.Nst=t}},BU=class t extends zU{get CI(){return Kh.OI}get qI(){var t;return null!=(t=this.Nst.localName)?t:WU(this.Nst.nodeName)}get bst(){var t;return null!=(t=this.Nst.namespaceURI)?t:void 0}get Tst(){var t;return null!=(t=this.Nst.prefix)?t:void 0}get WR(){return this.Nst.nodeName}get ZI(){return function(t){const i=[];for(let e=0;e<t.length;e++)i.push(new PU(t.item(e)));return i}(this.Nst.attributes)}get PR(){return this.Nst.textContent}$I(t){if(this.Nst.hasAttribute(t))return this.Nst.getAttribute(t)}tD(t,i){if(this.Nst.hasAttributeNS(t,i))return this.Nst.getAttributeNS(t,i)}GI(t){this.Nst.removeAttribute(t)}Ist(t,i){this.Nst.removeAttributeNS(t,i)}Dst(t,i){this.Nst.setAttribute(t,i)}Est(t,i,e){this.Nst.setAttributeNS(t,i,e)}UI(i){return new t(this.Nst.cloneNode(i))}constructor(t){super(t)}},UU=class{get ly(){return this.Nst.nodeValue}get TI(){return this.Nst}xI(t){return this.ly===t.ly}constructor(t){this.Nst=t}},QU=class t extends UU{get CI(){return Kh.Ru}UI(i){return new t(this.Nst.cloneNode(i))}constructor(t){super(t)}},FU=class t extends UU{get CI(){return Kh.RI}UI(i){return new t(this.Nst.cloneNode(i))}constructor(t){super(t)}},YU=class t extends zU{get CI(){return Kh.zI}get JI(){return new BU(this.Nst.documentElement)}UI(i){return new t(this.Nst.cloneNode(i))}constructor(t){super(t)}};function GU(t){return Ka(t)}function VU(t){switch(t.nodeType){case Kh.OI:return new BU(t);case Kh.Ru:return new QU(t);case Kh.RI:return new FU(t)}}function WU(t){const i=t.indexOf(":");return i<0?t:t.substr(i+1)}!function(t){ra=t}(new class extends hU{get Zet(){return this.kst||(this.kst=new LM(Nb())),this.kst}get Lst(){return this.xst}get n1(){return this.Cst}get S1(){return this.Ost}get jst(){return!1}get NP(){return Nn.RF()}get Rst(){return{Pst:lU}}get zst(){return Il.connection&&Il.connection.effectiveType||$T}get Bst(){return Il.connection&&Il.connection.type||"unknown"}get Hj(){return this.Ust||(this.Ust=new Kk(new OU)),this.Ust}KI(t){return this.Qst.KI(t)}constructor(...t){super(...t),this.kst=void 0,this.xst=bU(),this.Cst=Po.qk||Po.XE,this.Ost=(Po.qk||Po.yk&&Po.hk<=68||Po.XE)&&!(Po.wk&&Po.pk<3),this.Ust=void 0,this.Qst=new RU}});var HU=class{get U_(){const t=this.Qo.currentTime;return isFinite(t)?t:"now"}get Fst(){return this.Qo.src||""}tr(){}constructor(t,i){this.Yst=!1,this.Gst=!1,this.Vst=t=>{this.Wst.wG(t.error,this.U_)},this.Hst=()=>{this.Wst.dG(this.Fst),this.Qo.removeEventListener("playing",this.Hst),this.Yst=!1},this.js=()=>{var t,i;this.Yst||(this.Qo.addEventListener("playing",this.Hst),this.Yst=!0);var e;if((null==(i=this.Qo.source)||null==(t=i.ads)?void 0:t.some((t=>"theoads"===t.integration)))&&!this.Gst)this.Gst=!0,null==(e=this.Qo.ads)||e.addEventListener("adbreakbegin",this.Xst);else if(this.Gst){var s;this.Gst=!1,null==(s=this.Qo.ads)||s.removeEventListener("adbreakbegin",this.Xst)}},this.Xst=t=>{"theoads"===t.adBreak.integration&&this.Wst.gG()},this.Wst=i,this.Qo=t,this.Qo.addEventListener("error",this.Vst),this.Qo.addEventListener("sourcechange",this.js),this.js()}};!function(t){yP.push(t)}((function(t){new HU(t.va,t.sit)}));var XU="theoplayer-stored-volume",ZU="theoplayer-stored-mutedstate";ec((function(t){return class extends t{ag(t){this.wd.persistVolume&&Uo.EP(ZU,""+Boolean(t)),super.ag(t)}Ug(t){this.wd.persistVolume&&Uo.EP(XU,""+Number(t)),super.Ug(t)}constructor(t,i){if(super(t,i),i.persistVolume){let t=Uo.eZ(XU);(void 0===t||S(t))&&(t=1);const i=Uo.sZ(ZU)||!1;this.zg=t,this.og=i}}}}),st.Za);var qU="8.3.0",KU="2024.4.0",JU=SP.va,$U=cc.qp.registerContentProtectionIntegration.bind(cc.qp),tQ={OG(t){Ua.addEventListener("beforeunload",t)},EG(t){Ua.removeEventListener("beforeunload",t)}};!function(t){wc=t.Zst,Kp=t.qst,Jp=t.Kst,Ua=t.Jst,$p=Ua&&Ua.location,tA=Ua&&Ua.navigator}({Zst:class{get pU(){const t=[];for(const i of this.$st){const e=this.tnt.get(i);if(e){const i=e.map((t=>t.int));t.push(...i)}}return this.ent&&t.push(this.ent),t}yU(t){for(const i of this.pU)i.Y6(t)}oB(t){const i=bo(this.tnt.get(t),(t=>t.snt));if(i)return i.snt=!1,i.int}nnt(t){if(!this.ent){var i;const t=null==(i=this.tnt.get(Jt.VA))?void 0:i[0].int.pz;if(!t)throw new g("Error creating iOS Safari MediaController");this.ent=new JR(t,this.SO,this.Wu,this.mU),t.parentElement&&this.ent.Y6(t.parentElement)}return this.ent}async Fz(t){const i=t.pz,e=i.tagName.toLowerCase();await t.tr(),eP(i);const s=bo(this.tnt.get(e)||[],(i=>t===i.int));s&&(s.snt=!0)}_U(){for(const t of this.pU)t.F6()}gn(){for(const t of this.pU){const i=t.pz;t.h_(),iP(i),wi(i)}this.tnt.clear(),this.ent=void 0}rnt(){for(const t of this.$st){const i=[];this.tnt.set(t,i);for(let e=0;e<this.ont;e++){const e=tP(t),s=t===Jt.WA?new yj(e,this.SO,this.Wu):new WR(e,this.SO,this.Wu,this.mU);i.push({int:s,snt:!0})}}}constructor(t,i,e=2,s=$R,n=Nb()){this.ont=e,this.$st=[...s],this.SO=n,this.Wu=t,this.mU=i,this.tnt=Pu(),this.rnt()}},qst:class t{oet(t){return this.hnt.JO((()=>this.ant(t)))}Wg(){this.gU._U()}async ant(i){const e=this.gU.oB(Jt.VA),s=e.pz,n=await t.unt(s,i);return await this.gU.Fz(e),n}static async unt(i,e){return Po.yk||Po.wk?"all":(i.src||(i.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.cnt(),!e&&await t.lnt(i,!1)?"all":await t.lnt(i,!0)?"muted":"none")}static async lnt(t,i){t.muted=i;const e=t.play();try{if(!Ci(e))return!Po.Qs;const t=Si(250);return await Promise.race([e,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static cnt(){return new Promise((t=>{if("function"==typeof MessageChannel){const i=new MessageChannel;i.port1.onmessage=()=>t(),i.port2.postMessage("")}else u(t,0)}))}gn(){this.hnt.gn()}constructor(t){this.gU=t,this.hnt=new Ku}},Kst:tQ,Jst:s});var iQ=class t{async hB(i){if(!Fw(i.type))return!1;const e=i.contentProtection;if(e&&!nn(e)){if(!dw(e))return!1;if(!await t.dnt(e))return!1}return!0}static async dnt(t){return!(!t.playready||!await ra.AO())||(!(!t.widevine||!await ra.vO())||(!(!t.clearkey||!await ra.pO())||!!await ra.IO()))}},eQ=class extends iQ{async hB(t){return!!dC(t.useManagedMediaSource)&&super.hB(t)}};function Ir(t){return fi(t)}function Gh(t,i){const e=fi(t);return i?""+e+i:""+e}var rn,ur=class{async fnt(t){return(await this.gnt._nt(t.map(Ir))).shift()}wnt(t,i){const e=Gh(t,i);return this.vnt.NL(e)}async mnt(t,i){var e;const s=Gh(t,i);return null==(e=await this.pnt.IL(s))?void 0:e.data}aZ(t){return this.Ant.IL(t)}constructor(t,i,e,s){this.gnt=t,this.vnt=i,this.pnt=e,this.Ant=s}},mh=class{ynt(t){return Promise.resolve(!1)}Mnt(t){return Promise.reject(sQ)}bnt(t){return Promise.reject(sQ)}NL(t){return Promise.resolve(!1)}IL(t){return Promise.resolve(void 0)}Tnt(t,i){return Promise.resolve(void 0)}_nt(t){return Promise.resolve([])}Snt(){return Promise.resolve([])}Nnt(t){return Promise.resolve([])}Int(t,i){return Promise.resolve([])}rS(t){return Promise.reject(sQ)}Dnt(t){return Promise.reject(sQ)}Ent(){return Promise.reject(sQ)}},sQ="Storage disabled",nQ="Storage disabled",Kr=class{get knt(){return this.__.OL}async ynt(t){return(this.Lnt||await this.knt).ynt(t)}async Mnt(t,i){return(this.Lnt||await this.knt).Mnt(t,i)}async bnt(t,i){return(this.Lnt||await this.knt).bnt(t,i)}async NL(t){return(this.Lnt||await this.knt).NL(t)}async IL(t){return(this.Lnt||await this.knt).IL(t)}async Tnt(t,i){return(this.Lnt||await this.knt).Tnt(t,i)}async _nt(t){return(this.Lnt||await this.knt)._nt(t)}async Snt(){return(this.Lnt||await this.knt).Snt()}async Nnt(t){return(this.Lnt||await this.knt).Nnt(t)}async Int(t,i){return(this.Lnt||await this.knt).Int(t,i)}async rS(t){return(this.Lnt||await this.knt).rS(t)}async Dnt(t){return(this.Lnt||await this.knt).Dnt(t)}async Ent(){return(this.Lnt||await this.knt).Ent()}constructor(t){this.__=new Oi,this.Lnt=void 0,this.__.w_(t),this.__.OL.then((t=>{this.Lnt=t}))}},rQ=class{get xnt(){return this.__.OL}async Cnt(t){const i=this.Ont||await this.xnt;return await i.Cnt(t)}constructor(t){this.__=new Oi,this.Ont=void 0,this.__.w_(t);const i=this.__.OL;i.then((t=>{this.Ont=t})),this.jnt=new Kr(i.then((t=>t.jnt))),this.Rnt=new Kr(i.then((t=>t.Rnt))),this.Pnt=new Kr(i.then((t=>t.Pnt))),this.znt=new Kr(i.then((t=>t.znt))),this.Bnt=new Kr(i.then((t=>t.Bnt)))}};function oQ(t){return new g("This storage cannot handle persistency type "+t)}!function(t){t.Unt="readonly",t.Qnt="readwrite"}(rn||(rn={}));var kh=class{ynt(t){return Promise.resolve("temporary"===t)}Mnt(t,i){return void 0===i&&(i="temporary"),"temporary"!==i?Promise.reject(oQ(i)):(this.Fnt(t.key),this.mx.push(t),Promise.resolve())}bnt(t,i){if(void 0===i&&(i="temporary"),"temporary"!==i)return Promise.reject(oQ(i));for(const i of t)this.Fnt(i.key);for(const i of t)this.mx.push(i);return Promise.resolve()}NL(t){return Promise.resolve(Boolean(this.Ynt(t)))}IL(t){return Promise.resolve(this.Ynt(t))}Tnt(t,i){return Promise.resolve(this.Gnt(t,i))}_nt(t){const i=t?t.map((t=>this.Ynt(t))):this.mx;return Promise.resolve(i.filter(Ks))}Snt(){return Promise.resolve([...this.mx])}Nnt(t){return this.Int(t,"key")}Int(t,i){const e=this.mx.filter((e=>e[i]===t));return Promise.resolve(e)}rS(t){return this.Fnt(t),Promise.resolve()}Dnt(t){for(const i of t)this.Fnt(i);return Promise.resolve()}Ent(){return To(this.mx),Promise.resolve()}Ynt(t){return this.Gnt(t,"key")}Gnt(t,i){for(const e of this.mx)if(e[i]===t)return e}Fnt(t){const i=this.Ynt(t);i&&jn(this.mx,i)}constructor(){this.mx=[]}},hQ=class t{static G7(){return Promise.resolve(new t)}Cnt(t){return t(this)}constructor(){this.Rnt=new kh,this.jnt=new kh,this.Pnt=new kh,this.znt=new kh,this.Bnt=new kh}},dh=class{async ynt(t){for(let i of this.Vnt)if(await i.ynt(t))return!0;return!1}async Mnt(t,i){void 0===i&&(i="persistent");for(let e of this.Vnt)if(await e.ynt(i))return e.Mnt(t);throw oQ(i)}async bnt(t,i){void 0===i&&(i="persistent");for(let e of this.Vnt)if(await e.ynt(i))return e.bnt(t);throw oQ(i)}async NL(t){for(let i of this.Vnt)if(await i.NL(t))return!0;return!1}async IL(t){for(let i of this.Vnt){const e=await i.IL(t);if(e)return e}}async Tnt(t,i){for(let e of this.Vnt){const s=await e.Tnt(t,i);if(s)return s}}async _nt(t){const i=[];for(let e of this.Vnt)i.push(...await e._nt(t));return i}async Snt(){const t=[];for(let i of this.Vnt)t.push(...await i.Snt());return t}async Nnt(t){const i=[];for(let e of this.Vnt)i.push(...await e.Nnt(t));return i}async Int(t,i){const e=[];for(let s of this.Vnt)e.push(...await s.Int(t,i));return e}async rS(t){for(let i of this.Vnt)await i.rS(t)}async Dnt(t){for(let i of this.Vnt)await i.Dnt(t)}async Ent(){for(let t of this.Vnt)await t.Ent()}constructor(t){this.Vnt=t}};function aQ(t){return async()=>{const i=await Promise.all(t.map((t=>t())));return uQ.G7(i)}}var uQ=class t{static G7(i){return Promise.resolve(new t(i))}get znt(){return this.Wnt}get Bnt(){return this.Hnt}get Pnt(){return this.Xnt}get Rnt(){return this.Znt}get jnt(){return this.qnt}Cnt(i){if(0===this.Knt.length)return i(this);const e=[];let s=0;const n=r=>(e.push(r),s++,s<this.Knt.length?this.Knt[s].Cnt(n):i(new t(e)));return this.Knt[s].Cnt(n)}constructor(t){this.Knt=t,this.Wnt=new dh(t.map((t=>t.znt))),this.Hnt=new dh(t.map((t=>t.Bnt))),this.Xnt=new dh(t.map((t=>t.Pnt))),this.Znt=new dh(t.map((t=>t.Rnt))),this.qnt=new dh(t.map((t=>t.jnt)))}},Th=class t{static wa(i){t.ZP.wa(i)}static get lL(){return t.Jnt||(t.Jnt=t.ZP.G7()),t.Jnt}};function wh(t){return void 0!==t.Cg}function cQ(t){const i=Po.yk||Po.wk,e=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),s=i&&!e,n=new lC(!0);return async t=>{const i=t.Nz;if(!n.C1(i)&&!function(t,i){return!!t&&(eo(t)?Mp(i)||Tp(i):$i(t,la.APPLICATION_TTML_XML)||$i(t,la.TEXT_VTT)||$i(t,la.IMAGE_JPEG))}(t.aG,t.$nt))return!1;const e=t.$nt.some((t=>"ac-3"===t||"ec-3"===t));if(s&&e)return!1;if(t.trt){const e=t.trt,s=Pe(e,(t=>rA(t.irt))).filter(Ks),n=await async function(t,i){for(const e of t)if(await i(e))return!0;return!1}(s,(t=>ra.bO(t,i)));if(!n)return!1}return!0}}Th.ZP=new class{G7(){return new rQ(this.ert())}async ert(){this.nrt&&(await Promise.resolve(),this.nrt=!1);for(const t of this.rrt)try{return await aQ([hQ.G7,t])()}catch(t){}return await aQ([hQ.G7,this.ort])()}wa(t){if(!this.nrt)throw new g("Registration overdue");this.rrt.push(t)}constructor(t){this.rrt=[],this.nrt=!0,this.ort=t}}(class t{static G7(){return Promise.resolve(new t)}Cnt(t){return Promise.reject(nQ)}constructor(){this.Rnt=new mh,this.jnt=new mh,this.Pnt=new mh,this.znt=new mh,this.Bnt=new mh}}.G7),Th.Jnt=void 0;var Ea,lQ=class{get Ti(){return this.hrt.offsetHeight*ra.Ys.h5}get ji(){return this.hrt.offsetWidth*ra.Ys.h5}constructor(t){this.hrt=t}},Ch=class{get nt(){return this.Dl}rE(t,i,e,s,n,r,o,h){const a=new GC(t,i,e,s,n,r,o,void 0,h);return this.Dl.tt(a),this.W5.tt(a),a}fE(t){this.Dl.it(t),this.W5.it(t),t.gn()}tr(){for(const t of this.Dl.Rw.slice())t.gn();this.Dl.tr(),this.W5.tr()}gn(){this.tr(),this.Dl.gn(),this.W5.gn()}constructor(t,i){this.Dl=new iu,this.W5=new FO(t,i)}},dQ=class{oB(t){return this.ZP.oB(t)}nnt(t){return this.ZP.nnt(t)}Fz(t){return this.ZP.Fz(t)}constructor(t){this.ZP=t}},lh=class extends Mo{get art(){return this.Fm}get O_(){return this.j_()}j_(){return this.Fm.O_}get R_(){return this.P_()}P_(){return this.Fm.R_}get U_(){return this.Q_()}Q_(){return this.Fm.U_}get Iu(){return this.Fm.Iu}get ct(){return this.Td()}Td(){return this.Fm.ct}get Mz(){return this.urt()}urt(){return this.Fm.Mz}get G_(){return this.crt()}crt(){return this.Fm.G_}get lt(){return this.Fm.lt}get Ti(){return this.Fm.Ti}get ji(){return this.Fm.ji}get ya(){return this.Gg()}Gg(){return this.Fm.ya}get og(){return this.Fm.og}set og(t){this.Fm.og=t}get fg(){return this.lrt()}lrt(){return this.Fm.fg}get gg(){return this.Fm.gg}set gg(t){this.Fm.gg=t}get pg(){return this.Ag()}Ag(){return this.Fm.pg}get Sg(){return this.Ng()}Ng(){return this.Fm.Sg}get Ig(){return this.Dg()}Dg(){return this.Fm.Ig}get Eg(){return this.Lg()}Lg(){return this.Fm.Eg}get s2(){return this.drt()}drt(){return this.Fm.s2}get g2(){return this.frt()}frt(){return this.Fm.g2}get nt(){return this.xg()}xg(){return this._rt}get Ol(){return this.w9()}w9(){return this.Fm.Ol}get _5(){return this.Fm._5}get zg(){return this.Fm.zg}set zg(t){this.Fm.zg=t}get U6(){return this.Fm.U6}get K_(){return this.Fm.K_}get Hm(){return this.Fm.Hm}get Qz(){return this.grt()}set Qz(t){this.wrt(t)}grt(){return this.Fm.Qz}wrt(t){this.Fm.Qz=t}get G6(){return this.Fm.G6}set G6(t){this.vrt(t)}vrt(t){this.Fm.G6=t}get j3(){return this.mrt()}mrt(){return this.Fm.j3}rg(){return this.Fm.rg()}Xg(){return this.Fm.Xg()}Hg(){this.Fm.Hg()}JA(t,i,e){this.Fm.JA(t,i,e)}gz(t){this.Fm.gz(t)}ge(){this.Fm.ge()}be(){this.Fm.be()}rE(t,i,e,s,n,r,o,h){return this.Fm.rE(t,i,e,s,n,r,o,h)}Cz(){return this.Fm.Cz()}jz(t,i,e,s,n){return this.Fm.jz(t,i,e,s,n)}fE(t){this.Fm.fE(t)}Pz(){this.Fm.Pz()}dq(t){return this.Fm.dq(t)}async $n(t){const i=await this.Fm.$n(t);let e;return e=t.Av===de.Tj?this.prt(i):this.Art(i),this.yz=e,e}async tr(){this.yz&&(await this.yz.h_(),this.yz=void 0),await this.Fm.tr()}z6(){this.Fm.z6()}B6(){this.Fm.B6()}async h_(){this.Vo(),this.Fm.fn(HL,this.yrt),this._rt.Uw=void 0,this._rt.gn(),this.yz&&(await this.yz.h_(),this.yz=void 0)}F6(){this.Fm.F6()}Mrt(t){this.Fm.fn(HL,this.yrt),this.Fm=t,this._rt.Uw=t.nt,this.Fm.yn(HL,this.yrt)}ew(t){this.Co(t)}constructor(t){super(),this.yz=void 0,this._rt=new Sf,this.yrt=t=>this.ew(t),this.Fm=t,this._rt.Uw=t.nt,this.Fm.yn(HL,this.yrt)}},fQ=class extends lh{get pz(){return this.Fm.pz}get l2(){return this.Fm.l2}get Yg(){return this.Fm.Yg}set Yg(t){this.Fm.Yg=t}Y6(t){this.Fm.Y6(t)}K3(){this.Fm.K3()}$g(){this.Fm.$g()}constructor(t){super(t)}},_Q=class{get wd(){return this.wO()}wO(){return this.yz.wd}get Ig(){return this.Dg()}Dg(){return this.yz.Ig}FZ(t){return this.yz.FZ(t)}GZ(t){return this.yz.GZ(t)}h_(){return Promise.resolve()}constructor(t){this.yz=t}},gQ=class extends _Q{get I1(){return this.O1}get D1(){return this.j1}get O_(){return this.j_()}j_(){return this.yz.O_}get ct(){return this.Td()}Td(){return this.yz.ct}get oq(){return this.brt()}brt(){return this.yz.oq}P1(t){this.yz.P1(t)}Q1(t,i,e,s){this.yz.Q1(t,i,e,s)}x0(){this.yz.x0()}M0(){this.yz.M0()}h_(){return this.O1&&(this.O1.h_(),this.O1=void 0),this.j1&&(this.j1.h_(),this.j1=void 0),super.h_()}Trt(t){this.yz=t,this.O1?t.I1?this.O1.Srt(t.I1):(this.O1.h_(),this.O1=void 0):t.I1&&(this.O1=this.Nrt(t.I1),this.O1.yn(Xu,this.Irt)),this.j1?t.D1?this.j1.Srt(t.D1):(this.j1.h_(),this.j1=void 0):t.D1&&(this.j1=this.Nrt(t.D1),this.j1.yn(Xu,this.Irt))}Drt(t){}constructor(t){super(t),this.O1=void 0,this.j1=void 0,this.Irt=t=>this.Drt(t)}},wQ=class extends Mo{get rX(){return this.fX}set rX(t){this.fX=t}get O_(){return Ri.oU()}get wd(){return this.GO}get O0(){return Jt.jT}get R0(){return Ri.oU()}get Ert(){return!1}get iX(){return this.cX}set iX(t){this.cX=t}V$(t,i,e){return Promise.reject(new g("Invalid media buffer"))}Q0(){return Promise.reject(new g("Invalid media buffer"))}X$(t,i,e){return Promise.reject(new g("Invalid media buffer"))}oq(){return!1}x0(){}B0(t,i){}U0(t,i){}rS(t,i,e){return Promise.resolve()}u0(t,i){return Promise.reject(new g("Invalid media buffer"))}fS(t,i){return Promise.reject(new g("Invalid media buffer"))}FZ(t){return!1}GZ(t){return Promise.reject(new g("Invalid media buffer"))}h_(){this.Vo()}constructor(t){super(),this.cX=0,this.fX=0,this.GO=t}},vQ=class extends Mo{get rX(){return this.krt()}set rX(t){this.Lrt(t)}krt(){return this.xrt.rX}Lrt(t){this.xrt.rX=t}get O_(){return this.j_()}j_(){return this.xrt.O_}get wd(){return this.wO()}wO(){return this.xrt.wd}get O0(){return this.xrt.O0}get R0(){return this.Crt()}Crt(){return this.xrt.R0}get iX(){return this.Ort()}set iX(t){this.jrt(t)}Ort(){return this.xrt.iX}jrt(t){this.xrt.iX=t}V$(t,i,e){return this.xrt.V$(t,i,e)}Q0(){return this.xrt.Q0()}X$(t,i,e){return this.xrt.X$(t,i,e)}oq(){return this.xrt.oq()}x0(){this.xrt.x0()}B0(t,i){this.xrt.B0(t,i)}U0(t,i){this.xrt.U0(t,i)}rS(t,i,e){return this.xrt.rS(t,i,e)}u0(t,i){return this.xrt.u0(t,i)}FZ(t){return this.xrt.FZ(t)}GZ(t){return this.xrt.GZ(t)}ew(t){this.Co(t)}h_(){this.Vo(),this.Srt(new wQ(this.wd))}Srt(t){this.xrt.fn(Xu,this.Rrt),this.xrt=t,this.xrt.yn(Xu,this.Rrt)}constructor(t){super(),this.Rrt=t=>this.ew(t),this.xrt=t,this.xrt.yn(Xu,this.Rrt)}},mQ=class extends vQ{get int(){return this.Fm}set int(t){this.Fm=t}async V$(t,i,e){return Vr(e),await this.Prt(this.Fm.U_,null==i?void 0:i.F7,null==i?void 0:i.ct),Vr(e),t.Av===Lu.DD?await this.zrt(t,i,e):await this.Brt(t,i,e)}async zrt(t,i,e){let s=t;for(;;){const[t,n]=Lk(s.ly);s={Av:Lu.DD,ly:t};try{return await this.Urt(s,i,e),void n.cancel(new Fh).catch(Br)}catch(t){if(fL(t)){if(await this.Prt(this.Fm.U_,i.F7,i.ct,e)){s={Av:Lu.DD,ly:n};continue}}throw n.cancel(t).catch(Br),t}}}async Brt(t,i,e){for(;;)try{return Vr(e),await this.Urt(t,i,e)}catch(t){if(fL(t)){if(await this.Prt(this.Fm.U_,i.F7,i.ct,e))continue}throw t}}async Prt(t,i,e,s){const n=dL(t,i,e,this.O_,this.iX,this.rX);for(const[t,i]of n)await this.Qrt(t,i,s);return n.length>0}Urt(t,i,e){return super.V$(t,i,e)}Qrt(t,i,e){return super.rS(t,i,e)}constructor(t){super(t),this.Fm=void 0}},pQ=class extends gQ{get int(){return this.Fm}set int(t){this.Fm=t,this.O1&&(this.O1.int=t),this.j1&&(this.j1.int=t)}Nrt(t){const i=new mQ(t);return i.int=this.Fm,i}constructor(t){super(t),this.Fm=void 0,this.Trt(t)}},Yi=class extends _Q{get yg(){return this.yz.yg}set yg(t){this.yz.yg=t}},qh=class extends lh{get pz(){return this.Fm.pz}get l2(){return this.Fm.l2}get Rg(){return this.Fm.Rg}get Cg(){return this.Fm.Cg}get Yg(){return this.Fm.Yg}set Yg(t){this.Fm.Yg=t}Y6(t){this.Fm.Y6(t)}K3(){this.Fm.K3()}$g(){this.Fm.$g()}Vg(){return this.Fm.Vg()}constructor(t){super(t)}},AQ=class extends fQ{get art(){return this.Fm}Art(t){const i=new pQ(t);return i.int=this,i}prt(t){return new Yi(t)}},yQ=class extends qh{get art(){return this.Fm}Art(t){const i=new pQ(t);return i.int=this,i}prt(t){return new Yi(t)}},At=class extends dQ{oB(t){return t===Jt.VA?new yQ(super.oB(t)):t===Jt.WA?new AQ(super.oB(t)):void 0}async Fz(t){const i=t;await i.h_(),await super.Fz(i.art)}},MQ=class{Frt(){this.Qo.iw()}gn(){s.removeEventListener("pageshow",this.Yrt)}constructor(t){this.Yrt=t=>{t.persisted&&this.Frt()},this.Qo=t,s.addEventListener("pageshow",this.Yrt)}},bQ=class{Grt(t,i,e){return Promise.resolve()}Vrt(t,i,e,s){let n=[];if(s){const r={vI:i.MS,mI:i.bS,pI:e.Wrt.pI};s.Av===O.TTML?n=ip(t,s,r,e.aG):s.Av===O.WEBVTT&&(n=dm(t,r).L)}return n}tr(){}};!function(t){t.NA="vttc",t.Hrt="vsid",t.Xrt="iden",t.Zrt="ctim",t.qrt="sttg",t.Krt="payl",t.Jrt="vtte",t.$rt="vtta"}(Ea||(Ea={}));var ph=class t{static tot(i){return Boolean(t.iot[i])}static Wy(i){const e=[],s=Mc.Ey(new mu(i,new Bi));for(const i of s)t.tot(i.Av)&&e.push(t.iot[i.Av](i.ly));return e}static eot(i){const e=Mc.Ey(i),s=io(e,Ea.Hrt),n=io(e,Ea.Xrt),r=io(e,Ea.Zrt),o=io(e,Ea.qrt),h=io(e,Ea.Krt);return{Av:Ea.NA,rot:s?t.oot(s):void 0,hot:n?t.aot(n):void 0,uot:r?t.cot(r):void 0,lot:o?t.fot(o):void 0,_ot:h?t.got(h):void 0}}static oot(t){return{Av:Ea.Hrt,wot:t.py()}}static aot(t){return{Av:Ea.Xrt,hot:t.Sy()}}static cot(t){return{Av:Ea.Zrt,vot:t.Sy()}}static fot(t){return{Av:Ea.qrt,mot:t.Sy()}}static got(t){return{Av:Ea.Krt,pot:t.Sy()}}static Aot(t){return{Av:Ea.Jrt}}static yot(t){return{Av:Ea.$rt,Mot:t.Sy()}}};ph.iot={[Ea.NA]:ph.eot,[Ea.Jrt]:ph.Aot,[Ea.$rt]:ph.yot};var TQ=class{Grt(t,i,e){const s=new DataView(t.bot),n=Ot.Wy(s),r=bo(n,(t=>t.Av===X.Kp));return r&&(this.Tot=r.Z[0].wM.zy.cM),Promise.resolve()}Vrt(t,i,e){if(S(this.Tot))return[];const s=vh(t),n=Ot.Wy(s),r=Gi(n,X.kA),o=Gi(n,X.PA);if(!r||0===r.Z.length||!o)return[];const h=function(t,i,e){const s=t.Z[0],n=s.eT?s.eT.eT.toNumber()/e:i.MS,r=[];for(const t of s.iT)r.push(...t.aT);return{Sot:n,aT:r}}(r,i,this.Tot),a=e.Wrt.pI;return function(t,i,e,s){const n=ph.Wy(vh(i.ly)),r=t.aT,o=t.Sot+s,h=[];let a=0;for(let t=0;t<r.length;t++){const i=r[t],s=n[t];var u;const c=(null!=(u=i.ct)?u:0)/e;let l;s.Av===Ea.NA&&(l=SQ(s,a,c,o)),l&&h.push(l),a+=c}return h}(h,o,this.Tot,a)}tr(){this.Tot=NaN}constructor(){this.Tot=NaN}};function SQ(t,i,e,s){if(!t._ot)return void 0;const n=t.uot?function(t){return Al(t.vot,new Bi(0))}(t.uot):i,r=s+n,o=r+e,h=t._ot.pot;return new Qv(r,o,h,!1)}var As,ts,NQ=class t extends xn{get Not(){return this.Iot}set Not(t){this.Iot=t}get Rt(){for(const t of this.Z.Rw)if(t._v!==yi.Ch)return!0;return!1}async $n(t){await this.tr(),this.Dot=t,this.Eot(t)}Eot(t){for(const i of t.kot){const t=this.Lot(i);this.xot(t,i),t.Sg=Ls.LOADED,this.tt(t)}}it(t){this.Cot(t),super.it(t)}MD(t){const i=this.Oot(t);if(i&&this.Not!==i){this.Not=i;for(const t of this.Z.Rw)t!==i&&(t._v=yi.Ch)}}bD(t){const i=this.Oot(t);i&&this.Not===i&&(this.Not=void 0)}Oot(t){return bo(this.Z.Rw,(i=>t.Xw===i.Xw))}xot(t,i){this.jot.set(t.Xw,i)}Rot(t){return this.jot.get(t.Xw)}Cot(t){this.jot.delete(t.Xw)}Pot(){if(!this.Not)return;const i=this.Rot(this.Not);return i?t.zot(i):void 0}static zot(t){return t.Bot&&t.Bot.length>0?t.Bot[0]:void 0}constructor(...t){super(...t),this.jot=Gs()}};function bh(t,i){const e=i.JB(((i,e)=>t.ZB(i,e,!1,!1)));return t.YB(e)}function IQ(t,i){const e=i.Sn(t.BB()).JB(((i,e)=>t.gr(e)));return t.YB(e)}!function(t){t[t.XU=0]="XU",t[t.Uot=1]="Uot",t[t.Qot=10]="Qot",t[t.Fot=11]="Fot",t[t.Yot=12]="Yot",t[t.Got=13]="Got",t[t.Vot=14]="Vot",t[t.Wot=15]="Wot",t[t.Hot=20]="Hot",t[t.Xot=21]="Xot",t[t.Zot=22]="Zot",t[t.qot=23]="qot",t[t.Kot=24]="Kot",t[t.Jot=30]="Jot",t[t.$ot=31]="$ot",t[t.tht=32]="tht",t[t.iht=33]="iht",t[t.eht=34]="eht",t[t.sht=35]="sht",t[t.nht=40]="nht",t[t.rht=41]="rht",t[t.oht=42]="oht",t[t.hht=43]="hht",t[t.aht=44]="aht",t[t.uht=50]="uht",t[t.cht=51]="cht",t[t.dht=60]="dht",t[t.fht=61]="fht",t[t._ht=62]="_ht",t[t.ght=63]="ght",t[t.wht=70]="wht",t[t.vht=71]="vht",t[t.mht=72]="mht",t[t.pht=73]="pht",t[t.Aht=74]="Aht",t[t.yht=75]="yht",t[t.Mht=76]="Mht",t[t.bht=77]="bht",t[t.Tht=90]="Tht",t[t.Sht=91]="Sht"}(As||(As={})),function(t){t.Nht="Iht",t.Dht="Eht"}(ts||(ts={}));var DQ,Vh=class extends tt{constructor(t,i,e){super("kht"),this.Cn=t,this.jn=i,this.Lht=e}},EQ=class extends Os{constructor(){super("xht")}};!function(t){t.Cht="Oht",t.jht="Rht",t.Pht="zht",t.XU="Bht"}(DQ||(DQ={}));var kQ=[Tf.hm,Tf.lm,Tf.nm,Tf.Tv],LQ=class extends Mo{get Uht(){var t,i;return(null==(t=this.Fht.Qht)?void 0:t.Lht)||(null==(i=this.Fht.Yht)?void 0:i.Lht)}get Ght(){return this.Vht}set Wht(t){this.Fht.Wht=t}get Wht(){return this.Fht.Wht}get fD(){return this.Hht}Xht(t){this.Hht!==t&&(this.Hht=t,this.Co(new EQ))}get Zht(){return this.Vht.Lt.Zht}get lt(){return this.vz}async Cn(t){if(!this.qht&&!this.Kht)return;const i=this.k_("xht");this.qht?(this.Jht.g_(),this.Jht=new Bd,this.$ht(this.Jht.f_)):(this.iat.LL(void 0),this.iat=new Oi),await i}get qht(){return"Oht"===this.Hht}get Kht(){return"Rht"===this.Hht}get eat(){return"zht"===this.Hht}get sat(){return"Bht"===this.Hht}async Zg(t){if(this.eat||this.Kht)for(0,this.Jht.g_();!this.qht&&!this.sat;)await this.k_("xht")}async tr(t){this.sat?(this.vz=void 0,this.Xht("Oht")):await this.Zg(t),this.Fht.tr(),this.Vht.tr()}rB(t){this.vz=t,this.Xht("Bht"),this.Co(new as(t))}nat(){this.q3.yn(Tf.fm,this.od),this.q3.yn([Tf.im,Tf.Uv],this.We),this.Fht.yn(kQ,this.Ds),this.rat.yn(ts.Nht,this.od)}oat(){this.q3.fn(Tf.fm,this.od),this.q3.fn([Tf.im,Tf.Uv],this.We),this.Fht.fn(kQ,this.Ds),this.rat.fn(ts.Nht,this.od)}async aat(t){this.oat(),this.uat.g_(),await this.Zg(null!=t?t:As.hht),this.Fht.tr()}async dat(t){this.nat(),await this.Cn(null!=t?t:As.Wot)}async gn(){this.Vo(),this.oat(),this.uat.g_(),await this.Zg(As.aht),this.Fht.gn()}async $ht(t){for(;;)try{Vr(t),this.Xht("zht"),await this.Fht.fat(t),Vr(t),this.Xht("Rht"),await Jr(this.iat.OL,t)}catch(t){if(be(t))this.Xht("Oht");else{const i=t instanceof ao?t:new ao(qa.MEDIA_LOAD_ERROR,t.message,t);this.rB(i)}break}}async _at(t){Vr(t),await this.Zg(As.oht),this.Fht.tr(),Vr(t),await this.Cn(As.Got)}constructor(t,i,e,s,n){super(),this.gat=t,this.rat=i,this.Vht=e,this.Fht=s,this.q3=n,this.Hht="Oht",this.vz=void 0,this.iat=new Oi,this.uat=new Bd,this.Jht=new Bd,this.We=t=>{this.qht||this.sat||!ra.jst&&this.Fht.wat(t.currentTime)||(this.uat.g_(),this.uat=new Bd,this._at(this.uat.f_).catch(_t))},this.od=hu((()=>{if(this.Kht){try{this.Fht.vat();if(this.Fht.mat())return}catch(t){if(!(t instanceof Vh))throw t}this.Cn(As.Vot)}}),250),this.nat()}},xQ=class t{pat(t,i){return this.Aat(t,!1,i)}yat(t,i){return this.Aat(t,!0,i)}async Aat(i,e,s){Vr(s.f_);const n=await this.Mat(i,e,s);return n.ZW?t.bat(n):this.Tat(n)}Tat(t){return t}static bat(t){return t}Mat(t,i,e){var s;const n=new Zi({zu:t.zu,qD:Ft.SD,XD:t.Sat?{Range:"bytes="+t.Sat[0]+"-"+(null!=(s=t.Sat[1])?s:"")}:void 0,tE:t.tE,ZD:Cl.GET,Av:li.CD,JD:i?fo.RD:fo.jT,$D:this.Nat,_D:e.Iat,KD:e.KD,f_:e.f_,eE:e.eE});return this.aE.uD(n)}constructor(t,i){this.aE=t,this.Nat=i}},CQ=class{Dat(t,i){const e=this.Eat**t,s=i*(1-e)+e*this.j7;S(s)||(this.j7=s,this.Lat+=t)}xat(){const t=1-this.Eat**this.Lat;return this.j7/t}constructor(t){this.j7=0,this.Lat=0,this.Eat=_.exp(_.log(.5)/t)}},OQ=class{Dat(t,i){const e=8e3*i/t,s=t/1e3;this.Cat+=i,this.Oat.Dat(s,e),this.jat.Dat(s,e)}xat(){return this.Rat()?_.min(this.Oat.xat(),this.jat.xat()):this.Pat}Rat(){return this.Cat>=this.zat}constructor(t=2,i=5,e=128e3){this.Cat=0,this.Pat=iS,this.Oat=new CQ(t),this.jat=new CQ(i),this.zat=e}},jQ=class{get Bat(){return this.Uat.xat()}get Rat(){return this.Uat.Rat()}Qat(t){const i=t.Fat,e=this.Yat?t.Gat-t.Vat:t.Gat-t.Wat,s=t.Hat;!s&&i<this.Xat||(s?this.Uat.Dat(2*e,i):this.Uat.Dat(e,i))}constructor(t,i){this.Yat=i,!i||t!==Jt.VA&&t!==Jt.WA?(this.Xat=16e3,this.Uat=new OQ):t===Jt.VA?(this.Xat=5e3,this.Uat=new OQ(.05,1,0)):(this.Xat=0,this.Uat=new OQ(.005,.1,0))}},RQ=["um","dm"],PQ=class extends Mo{async Zat(t,i){let e;for(const s of this.qat)try{return await s.Zat(t,i)}catch(t){me(t),e=t}throw e}async Kat(t,i){let e;for(const s of this.qat)try{return await s.Kat(t,i)}catch(t){me(t),e=t}throw e}gn(){for(const t of this.qat)t.fn(RQ,this.Ds),t.gn()}constructor(t){super(),this.qat=t;for(const t of this.qat)t.yn(RQ,this.Ds)}};var zQ=class{transform(t,i){this.qL.write(t).catch(Br),i.enqueue(t)}flush(){this.qL.close().catch(Br)}constructor(t){this.qL=t}},lo=class{Jat(){return new BQ(Dk(this.bot),this.$at,this.tut)}constructor(t,i,e){this.bot=t,this.$at=i,this.tut=e}},BQ=class t{get VW(){return this.iut}GR(t){return co(this.iut,t)}$A(){const[i,e]=Lk(this.iut);return this.iut=i,new t(e,this.$at,this.tut)}eut(){const[i,e]=function(t){const i=new Wa,e=i.writable.getWriter(),s=new Wa(new zQ(e));return t.pipeTo(s.writable).catch((t=>{e.abort(t).catch(Br)})),[s.readable,i.readable]}(this.iut);return this.iut=i,new t(e,this.$at,this.tut)}sut(t){return this.GR(t).then((t=>new lo(t,this.$at,this.tut)))}constructor(t,i,e){this.iut=t,this.$at=i,this.tut=e}},UQ=class extends tt{constructor(t,i,e){super(i,e),this.nut=t}},QQ="Cache lookup failed.",FQ=class extends Mo{async Zat(t,i){Vr(i);const e=await this.rut.mnt(t.zu.zu,t.zu.Sat);if(Vr(i),!e)throw new UQ(t,QQ);const s=new lo(e.buffer,e.byteLength,e.reference);return{nut:t.nut,out:{Av:Lu.jZ,ly:s},Lht:t.Lht,zu:t.zu}}async Kat(t,i){Vr(i);const e=await this.rut.mnt(t.zu,t.Sat);if(Vr(i),!e)throw new UQ(t,QQ);const s=new lo(e.buffer,e.byteLength,e.reference);return{Av:Lu.jZ,ly:s}}gn(){this.Vo()}constructor(t){super(),this.rut=t}};function ps(t){return he(t.hut)}function YQ(t){return ps(t)?t.hut:t.aut}var GQ=class extends Os{constructor(t,i,e,s,n,r){super(t),this.uut=i,this.CF=e,this.Kb=s,this.AM=n,this.$D=r}},VQ=class extends GQ{constructor(t,i,e,s,n){super(Tf.hm,t,i,e,s,n)}},WQ=class{constructor(t,i){this.cut=t,this.lut=i}},HQ=class extends WQ{get Fat(){return this.fut}start(){}transform(t,i){this.fut+=t.byteLength,i.enqueue(t)}flush(){this._ut(!1)}g_(){this._ut(!0)}_ut(t){this.cut(this.lut,ra.m_(),this.Fat,t)}constructor(...t){super(...t),this.fut=0}},XQ=class extends WQ{get Fat(){return this.fut}start(){this.lut=ra.m_()}transform(t,i){this.fut+=t.byteLength,this.gut||this.wut(t)&&this._ut(!1),i.enqueue(t)}flush(){}g_(){this._ut(!0)}wut(t){const i=this.vut(t),e=this.mut(i);return Boolean(bo(e,ZQ))}vut(t){return this.Aut&&void 0!==this.yut?(this.Aut=M([this.Aut,t]),new mu(vh(this.Aut),new Bi(this.yut))):(this.Aut=t,new mu(vh(t),new Bi))}mut(t){const i=Mc.Ly(t.ly,t._y,!0);return i.xy?(this.Aut=void 0,this.yut=void 0):this.yut=t._y.Ku,i.m}_ut(t){this.gut||(this.cut(this.lut,ra.m_(),this.Fat,t),this.gut=!0)}constructor(...t){super(...t),this.fut=0,this.gut=!1}};function ZQ(t){return t.Av===X.PA}var qQ=class{Mut(t){const i=t.nH?this.but:ra.m_(),e=this.Tut(i),s=new Wa(e),n=t.VW().pipeTo(s.writable).then((()=>({eg:{Fat:e.Fat}})),(t=>{throw e.g_(),t}));return this.Sut.w_(n),s.readable}Nut(t){const i=t.nH?this.but:ra.m_(),e=t.GR(),s=e.then((t=>{const e=ra.m_();return this.Qat(i,e,t.byteLength,!1),{eg:{Fat:t.byteLength}}}),(t=>{const e=ra.m_();throw this.Qat(i,e,0,!0),t}));return this.Sut.w_(s),e}get Iut(){return this.Sut.OL}constructor(t){this.Dut=t,this.Sut=new Oi,this.Qat=(t,i,e,s)=>{const n={Wat:this.but,Vat:t,Gat:i,Fat:e,Hat:s};this.Dut.Qat(n),this.Dut.Rat&&Gu.lL.LP(this.Dut.Bat)},this.Sut.OL.catch(Br),this.but=ra.m_()}},KQ=class extends qQ{Tut(t){return new HQ(this.Qat,t)}},JQ=class extends qQ{Tut(t){return new XQ(this.Qat,t)}},$Q=class extends GQ{constructor(t,i,e,s,n,r,o){super(Tf.lm,t,i,e,s,n),this.Eut=r,this.KT=o}},gh=class extends tt{constructor(t,i,e){super("Error downloading segment "+YQ(i),t),this.kut=i.MS,this.Lut=i.bS,this.xut=e}},tF=class extends Mo{Cut(){return this.Yat?new JQ(this.Dut):new KQ(this.Dut)}async Zat(t,i){Vr(i);const e=t.Lht,s=t.zu,n=t.nut,r=YQ(n),o=e.Lht?e.Lht.Xw:-1,h=function(t){const i=t.Lht;let e;e=i===function(t){return t.Bot.reduce(((t,i)=>t.GP<i.GP?t:i))}(i.Out)?rT(5*t.nut.ct):rT(1.2*t.nut.ct);return Qh(e,1e3,18e3)}(t);this.Co(new VQ(s,e.GP,r,o,e.Av));try{const t=this.Cut(),a=await this.jut.pat(s,{eE:this.Yat,Iat:h,f_:i}),u=await this.Rut(a,a.ZW,i,t);return $r(this.Put(t.Iut,e,s,r,o,a)),{out:u,Lht:e,nut:n,zu:s}}catch(t){throw me(t),new gh(t,n,e)}}async Kat(t,i){Vr(i);const e=await this.jut.yat(t,{eE:false,Iat:1e4,f_:i});return await this.Rut(e,false,i)}async Rut(t,i,e,s){if(i){const i=s?s.Mut(t):t.VW();return{Av:Lu.DD,ly:new BQ(i)}}{const i=s?await s.Nut(t):await t.GR(e);return{Av:Lu.jZ,ly:new lo(i)}}}async Put(t,i,e,s,n,r){try{const o=await t;this.Co(new $Q(e,i.GP,s,n,i.Av,r.fD,o.eg.Fat))}catch(t){}}gn(){this.Vo()}constructor(t,i,e){super(),this.jut=t,this.Dut=i,this.Yat=e}};var iF=class{zut(t,i,e,s,n){const r=new FQ(n),o=this.But(t,e,s);return new PQ([r,o])}But(t,i,e){return new tF(t,i,e)}},eF=.001,sF=class{get O_(){return this.Uut.O_}get Qut(){return this.Uut.Qut}get wq(){return this.Uut.wq}get Fut(){if(this.$0.Sg<qo.Xn)return!1;if(this.Uut.jn<=this.Yut&&this.Uut.Gut())return!0;const t=this.Uut._z;if(!t||0===t.U)return!1;const i=Ri.rU(this.q3.U_,1/0);return t.Sn(i).VB(this.Uut.wq).sU>=this.wU.lX}get Yut(){const t=this.Uut._z;let i;if(t&&t.U>0)i=t.jn(0);else{i=this.q3.U_;const t=this.Uut.wq,e=t.WB(i);e>=0&&(i=t.jn(e))}const e=this.Uut.Ig.Cn(0);if(e>i){if(this.Uut.Cn<=i&&this.Uut.jn>=i&&e>i+eF)throw new Vh(i,e);i=e}return i=this.Uut.Vut.zB(i),i}constructor(t,i,e,s){this.Uut=t,this.q3=i,this.$0=e,this.wU=s}};var nF=class{get Wut(){if(0===this.mf.size)return Ri.oU();let t=Ri.rU(0,1/0);return this.mf.forEach((i=>{t=t.Sn(i)})),t}Hut(t){return this.mf.get(t.o)}Xut(){let t=Ri.oU();return this.mf.forEach((i=>{t=t.YB(i)})),t}Zut(t){let i=!1;return this.mf.forEach((e=>{i=i||e.gr(t)})),i}qut(t,i){const e=this.mf.get(i.o);return!!e&&e.gr(t)}HB(t,i){let e=!1;return this.mf.forEach((s=>{e=e||s.HB(t,i)})),e}Kut(t,i){const e=this.mf.get(i.o).YB(t);this.mf.set(i.o,e)}Jut(t){this.mf.forEach(((i,e)=>{const s=i.YB(t);this.mf.set(e,s)}))}$ut(t){this.mf.forEach(((i,e)=>{this.mf.set(e,i.Sn(t))}))}tr(){this.mf.forEach(((t,i)=>{this.mf.set(i,Ri.oU())}))}constructor(t){this.mf=function(t){const i=Pu();for(const e of t)i.set(e.o,Ri.oU());return i}(t)}},rF=class{get tct(){return this.ict}get wq(){return this.vq}ect(t){for(const i of this.jnt){if(i.sct>t)break;if(i.nct>t)return i}}rct(t){for(const i of this.jnt){if(i.hct>t)break;if(i.act>=t)return i}}uct(t,i){const e=[];for(const s of this.jnt){if(s.sct>t)break;s.nct>=i&&e.push(s)}return e}cct(){return this.jnt}lct(t,i){const e=Ri.rU(t.hct,t.act),s=e.BB();this.ict.$ut(s),this.ict.Kut(e,i),this.dct(s);const n=gt(this.jnt,(i=>t.sct<=i.sct));if(n<0)this.jnt.push(t);else{this.jnt[n].nct<=t.nct?this.jnt.splice(n,1,t):this.jnt.splice(n,0,t)}}mq(t,i){this.vq.Kut(t,i)}fct(t){this.vq.Jut(t)}$ut(t){this.ict.$ut(t),this.vq.$ut(t);const i=this.ict.Xut();this.dct(i)}dct(t){this.jnt=this.jnt.filter((i=>t.ZB(i.hct,i.act))).map((i=>i._ct&&!t.HB(i.hct,i.act)?function(t,i){return{sct:t.sct,nct:t.nct,hct:t.hct,act:t.act,_ct:i}}(i,!1):i))}tr(){this.ict.tr(),this.vq.tr(),this.jnt=[]}gn(){this.tr()}constructor(t){this.jnt=[],this.Lt=t,this.ict=new nF(t.Bot),this.vq=new nF(t.Bot)}},oF=class{get Wht(){return this.gct}set Wht(t){this.gct=t}get Zht(){return this.Vht.Lt.Zht}async wct(t,i,e){let s;Vr(e);const n=this.Vht.rct(t);s=n&&Jn(n.act,t,1e-5)?n.nct:t;const r=this.vct(s),o=function(t){return hF.bind(void 0,t)}(s);let h=await this.Met.mct(o,r,i,e);for(Vr(e);h&&this.pct(h.nut);){const t=lF(h.nut),s=h.Lht;h=await this.Met.mct(t,[s],i,e),Vr(e)}if(!h)return void 0;if(!this.Act(h.nut))return h;const a=this.yct(h.nut);if(t<a.Cn)return await this.findFirstNonAppendedSegmentBeforeSegment(h,i,e,a);if(t>=a.jn)return await this.findFirstNonAppendedSegmentAfterSegment(h,i,e);if(!h.Lht.Mct(h.nut))throw new g("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,i,e){let s=t;do{const n=lF(s.nut),r=t.Lht;s=await this.Met.mct(n,[r],i,e),Vr(e)}while(s&&this.Act(s.nut));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,i,e,s){let n=t;do{const s=cF(n.nut),r=t.Lht;n=await this.Met.mct(s,[r],i,e),Vr(e)}while(n&&this.Act(n.nut));if(!n){0;const i=t.Lht.bct.Cn;throw new Vh(i,s.Cn,t.Lht)}return n}Tct(t){return this.Vht.tct.Zut(t)}Sct(t){return this.Vht.uct(t.MS,t.bS)}Act(t){const i=this.Sct(t);return i.length>0&&function(t,i){return function(t){let i=Ri.oU();for(const e of t)i=i.YB(Ri.rU(e.sct,e.nct));return i}(t).HB(i.MS,i.bS)}(i,t)&&i.every(dF)}pct(t){return this.Vht.wq.HB(t.MS,t.bS)}yct(t){const i=this.Sct(t);return{Cn:i[0].hct,jn:i[i.length-1].act}}vct(t){const i=this.Nct(t);if(0===i.length){const t=this.gct?this.gct:this.Vht.Lt.Bot;return[t[t.length-1]]}const e=i.filter((t=>!t.Ict));return e.length>0?e:[i[i.length-1]]}Nct(t){return(this.gct?this.gct:this.Vht.Lt.Bot).filter((i=>!this.Vht.wq.qut(t,i)))}constructor(t,i,e){this.gat=t,this.Vht=i,this.Met=e}};async function hF(t,i,e,s){const n=i.Wrt.Dct(t);if(n){if(i.Ect(n)){return(await i.Lct(n,e,s)).kct(t)}return n}}async function aF(t,i,e,s){if(ps(t)){if(0===t.hut)return;const n=i.Wrt.xct(t);if(!n)return;return(await i.Lct(n,e,s)).Cct(t.hut-1)}return i.Wrt.Oct(t)}async function uF(t,i,e,s){if(ps(t)){const n=i.Wrt.xct(t);if(!n)return;const r=await i.Lct(n,e,s);if(t.hut+1===r.U)return;return r.Cct(t.hut+1)}return i.Wrt.jct(t)}function cF(t){return aF.bind(void 0,t)}function lF(t){return uF.bind(void 0,t)}function dF(t){return t._ct}var fF=class{async mct(t,i,e,s){Vr(s);const n=this.Rct(i,e);if(!n)return;const r=await t(n,this.Pct,s);if(!r)return;const o=n.zct(r);return{Lht:n,nut:r,zu:o}}Rct(t,i){if(0===t.length)return;const e=this.Uct.Bct(t,this.Qct?i:void 0,this.Uut,this.wU.aX);return this.Qct||(this.Qct=!0),e}constructor(t,i,e,s){this.Uct=t,this.Uut=i,this.wU=e,this.Pct=s,this.Qct=!1}},_F=class{async mct(t,i,e,s){Vr(s);const n=this.Uct.Fct(i,e,this.Uut);if(!n.length)return;let r;for(const i of n)try{Vr(s);const e=await t(i,this.Pct,s);if(e){const t=i.zct(e);if(await this.rut.wnt(t.zu,t.Sat))return{nut:e,Lht:i,zu:t}}}catch(t){me(t),r=t}if(r)throw r}constructor(t,i,e,s){this.Uct=t,this.Uut=i,this.rut=e,this.Pct=s}};function gF(t){return void 0!==t.gg}function wF(t,i){const e=t.ji&&i.ji,s=t.Ti&&i.Ti;if(e||s){if(e&&s)return t.ji*t.Ti-i.ji*i.Ti;if(e)return t.ji-i.ji;if(s)return t.Ti-i.Ti;return(t.ji||1)*(t.Ti||1)-(i.ji||1)*(i.Ti||1)}return 0}function vF(t,i){return wF(t,i)||function(t,i){return t.GP-i.GP}(t,i)}var vn=class t{Bct(i,e,s,n){let r=t.sortByQuality(i);if(void 0!==this.Yct&&void 0===e&&i.length>1){const i=t.Gct(r,this.Yct);i&&(r=i)}const o=this.Fct(r,e,s,n);return o.length?o[o.length-1]:r[0]}Fct(i,e,s,n){var r;const o=t.sortByQuality(i),h={Bat:void 0===n||this.Vct.Rat?this.Vct.Bat:n,gg:gF(s)&&s.gg?s.gg:1,Wct:s.ji,Hct:s.Ti,Xct:null==(r=this.Zct)?void 0:r.restrictToPlayerSize};let a=o;for(const t of this.Jd)a=t(a,e,h,this.Jet,this.qct);return a}static Kct(i){return t.sortByQuality(i)[0]}static Jct(i,e){var s;return e?t.Kct(null!=(s=t.Gct(i,e))?s:i):t.Kct(i)}static Gct(t,i){for(const e of i){const i=t.filter((t=>Di(t.Vet,e)));if(i.length>0)return i}}static sortByQuality(t){const i=[...t];return i.sort(vF),i}constructor(t,i,e,s,n,r){this.Jd=t,this.Vct=i,this.Jet=e,this.Zct=s,this.Yct=n,this.qct=r}},mF=(t,i,e,s,n)=>t.filter((t=>n.FZ(t)&&s.Uet(i,t))),pF=(t,i,e)=>t.filter((t=>function(t,i,e){const s=e.Bat;if(s<=0)return!1;return.8*s>t.GP*e.gg}(t,0,e)));var AF=(t,i,e,s,n)=>{const r=e.Xct;if(void 0===r&&!s.Qs)return t;if(!1===r)return t;if(t.length>0&&t[0].Av!==Jt.VA)return t;for(let i=t.length-1;i>=0;i--){const s=t[i];if(s.Ti===e.Hct&&s.ji===e.Wct)return t.slice(0,i+1);if(s.Ti<e.Hct||s.ji<e.Wct)return t.slice(0,i+2)}return[]},yF=class{async mct(t,i,e,s){let n;for(const r of this.$ct)try{const n=await r.mct(t,i,e,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.$ct=t}},MF=class{async tlt(t,i,e,s){let n;for(const r of this.ilt)try{return await r.tlt(t,i,e,s)}catch(t){me(t),n=t}throw n}constructor(t){this.ilt=t}},bF=class{async tlt(t,i,e,s){var n;const r=await this.aE.uD({zu:t,qD:Ft.SD,XD:i?{Range:"bytes="+i[0]+"-"+(null!=(n=i[1])?n:"")}:void 0,tE:e,ZD:Cl.GET,Av:li.jT,f_:s});return await r.GR()}constructor(t){this.aE=t}},TF=class{async tlt(t,i,e,s){const n=await this.rut.mnt(t,i);if(n)return n.buffer;if(i){const e=await this.rut.mnt(t);if(e)return tw(new j(e.buffer),i[0],i[1])}throw new UQ({zu:t,Sat:i,tE:!1})}constructor(t){this.rut=t}};var SF=1.05,NF=(t,i,e,s)=>{if(!1===e.Xct)return t;if(s.Cet)return t;const n=s.Oet;var r;const o=(null!=(r=null==n?void 0:n.width)?r:e.Wct)*SF;var h;const a=(null!=(h=null==n?void 0:n.height)?h:e.Hct)*SF;for(let i=t.length-1;i>=0;i--){const e=t[i];if(e.Ti<=a&&e.ji<=o)return t.slice(0,i+1)}return[]},IF=class{static G7(t,i,e,s,n,r,o,h,a,u){const c=function(t,i){return new MF([new TF(i),new bF(t)])}(r,o),l=new vn([mF],n,ra.Ys,h,a,u),d=new _F(l,i,o,c),f=new vn([pF,mF,AF,NF],n,ra.Ys,h,a,u),_=new fF(f,i,s,c),g=new yF([d,_]);return new oF(t,e,g)}},DF=class{elt(t,i,e,s){return this.Uut.elt(t,i,e,s)}slt(t,i,e){return this.Uut.Grt(t,i,e)}nlt(t,i,e){return this.Uut.nlt(t,i,e)}mq(t,i){this.Uut.mq(t,i)}pq(t,i){this.Uut.pq(t,i)}x0(){this.Uut.x0()}wX(){return this.Uut.wX()}constructor(t){this.Uut=t}},EF=class extends Os{constructor(t,i,e,s,n,r=0){super(Tf.nm),this.segmentStartTime=t,this.error=i,this.trackType=e,this.track=s,this.quality=n,this.retryCount=r}},kF=class extends Os{constructor(t,i){super(Tf.Tv),this.track=t,this.segments=i}},LF=class extends tt{constructor(t,i){super(i),this.rlt=t}},xF=[Tf.hm,Tf.lm],CF=class extends Mo{get Qht(){return this.olt}get Yht(){return this.hlt}set Wht(t){this.ult.Wht=t}get Wht(){return this.ult.Wht}get Zht(){return this.Vht.Lt.Zht}clt(t){return!this.i0||!t||!Ln(this.i0.bot,t.bot)}wat(t){if(!this.olt)return!1;const i=this.olt.nut,e=Ri.rU(i.MS,i.bS),s=this.llt.Qut,n=s.WB(t);return n<0?e.gr(t,eF):e.ZB(t,s.jn(n),!0,!0,eF)}async fat(t){const i=this.Vht.Lt.Bot;for(;;)try{Vr(t),this.vat();if(this.mat())break;const e=this.dlt(),s=await this.mct(e,t);if(void 0===s)break;if(this.olt=s,!OF(this.olt)){await this.flt(this.olt,t);continue}this.hlt&&!Di(this.hlt.Lht.Nz,this.olt.Lht.Nz)&&await this.qct.GZ(this.olt.Lht),await this._lt(e,this.olt.nut,t),this.i0=await this.glt(this.olt.Lht,t);const n=await this.Zat(this.olt,t),r=this.llt.O_,o=this.hlt;this.hlt=await this.wlt(n,t);const h=this.llt.O_;this.vlt(o,this.olt,r,h),i.forEach((t=>t.Ict=!1)),this.plt=0,this.Alt=0}catch(e){if(e instanceof Vh){this.B0(e.Cn,e.jn,e.Lht);continue}if(e instanceof LF){let s=500;if(i.every((t=>t.Ict))){if(2===this.plt){const t=this.llt.O_;if(this.ylt(this.olt),this.vlt(this.hlt,this.olt,t,t),i.forEach((t=>t.Ict=!1)),this.Alt+=1,this.plt=0,this.Alt===this.Mlt.maxRetries)throw new ao(qa.MEDIA_LOAD_ERROR,"The segments could not be loaded.",e);continue}this.plt++;const t=this.Mlt.minimumBackoff*2**(this.plt-1);s=_.min(t,this.Mlt.maximumBackoff)}await Si(s,t);continue}throw this.blt=Ri.oU(),e}finally{this.olt=void 0}}vlt(t,i,e,s){const n=s.VB(e),r=i.Lht.Tlt(i.nut),o=i.Lht.Mct(i.nut);let h=i.nut.MS,a=i.nut.bS;r&&(h=_.min(h,_.max(0,i.Lht.bct.Cn-.05))),o&&(a=_.max(a,i.Lht.bct.jn));const u=Ri.rU(h,a).VB(s);if(0===n.U)return 0===this.blt.U&&this.blt.YB(Ri.rU(e.jn(e.U-1),h)),this.blt=this.blt.YB(u),void this.Vht.fct(this.blt);if(r||this.blt.U>0){const t=u.Sn(Ri.rU(h,n.Cn(0)));this.Slt(t)}const c=n.BB().Sn(Ri.rU(n.Cn(0),n.jn(n.U-1)));if(this.Slt(c),o){const t=u.Sn(Ri.rU(n.jn(n.U-1),a));this.Slt(t)}if(this.blt.U>0){const t=this.blt.VB(n);this.Slt(t),this.blt=Ri.oU()}const l=i.Lht.Wrt,d=ps(i.nut)?void 0:l.Oct(i.nut);var f;const g=null!=(f=null==t?void 0:t.nut)?f:this.Nlt(d)?d:void 0;if(g){const t=this.Vht.uct(g.MS,g.bS);if(t.length>0){const i=Ri.rU(t[t.length-1].act,n.Cn(0));this.Slt(i)}}const w=ps(i.nut)?void 0:l.jct(i.nut);if(w&&this.Nlt(w)){const t=this.Vht.uct(w.MS,w.bS);if(t.length>0){const i=Ri.rU(n.jn(n.U-1),t[0].hct);this.Slt(i)}}}Nlt(t){return!!t&&this.Vht.uct(t.MS,t.bS).length>0}Slt(t){const i=t.VB(this.llt.O_);for(let t=0;t<i.U;t++)i.Cn(t)!==i.jn(t)&&this.Ilt.mq(i.Cn(t),i.jn(t))}Dlt(t,i){throw new LF(t,i)}vat(){if(this.blt.U>0)return;var t;const i=this.llt.Qut.YB(null!=(t=this.llt.wq.PB().Jm(this.llt.Yut))?t:Ri.oU());this.Vht.$ut(i),this.Elt&&!this.klt(this.Elt)&&(this.Elt=void 0),this.Co(new kF(this.Vht.Lt.Zht,this.Vht.cct()))}mat(){return this.hlt&&this.hlt.Lht.Mct(this.hlt.nut)?(this.Ilt.x0(),!0):(this.Elt&&this.Elt.Lht.Mct(this.Elt.nut)&&this.klt(this.Elt)&&this.Ilt.x0(),!!this.llt.Fut)}klt(t){return this.Vht.tct.HB(t.Llt,t.xlt)}Clt(t,i,e){(!this.Elt||this.Elt.nut.bS<t.nut.bS)&&(this.Elt=ol({},t,{Llt:i,xlt:e}))}dlt(){const t=this.llt.Yut;return t}async mct(t,i){Vr(i);const e=this.hlt?this.hlt.Lht:void 0,s=await this.ult.wct(t,e,i);if(s)return s}async flt(t,i){const e=t.Lht,s=e.Wrt,n=ps(t.nut)?s.xct(t.nut):t.nut,r=e.jlt.Olt(),o=s.Rlt(n);if(o&&o.getTime()<=r.getTime())return this.Dlt(As.Zot,"Segment is not available.");const h=s.Plt(n).getTime()-r.getTime();await at((t=>Promise.race([Si(h,t),e.k_(ts.Nht,t)])),i)}async glt(t,i,e){void 0===e&&(e=0),Vr(i);const s=t.zlt;if(!s)return this.i0;try{if(!t.Blt){const e=await this.Ult.Kat(s,i);t.Blt=e.ly}}catch(s){if(me(s),De(s)){if(2===e)return t.Ict=!0,this.Dlt(As.sht,"Could not fetch the initializer.");const s=_.min(this.Mlt.minimumBackoff*2**e,this.Mlt.maximumBackoff);return await Si(s,i),this.glt(t,i,e+1)}throw new ao(qa.MEDIA_LOAD_ERROR,s.message,s)}Vr(i);try{this.clt(t.Blt)&&await this.Ilt.slt(t.Blt,t,i)}catch(t){if(me(t),De(t))return this.Dlt(As.sht,"Could not append the initializer.");throw new ao(qa.MEDIA_DECODE_ERROR,t.message,t)}return t.Blt}async Zat(t,i,e){void 0===e&&(e=0);try{return Vr(i),await this.Ult.Zat(t,i)}catch(s){if(me(s),s instanceof gh){if(function(t){return t instanceof Ap}(s.cause))return this.Qlt(new gh(s,t.nut,t.Lht),e),this.Dlt(As.Zot,"Could not append the segment.");if(2===e)return t.Lht.Ict=!0,this.Qlt(s,e),this.Dlt(As.Zot,"Could not fetch the segment.");const n=_.min(this.Mlt.minimumBackoff*2**e,this.Mlt.maximumBackoff);return await Si(n,i),await this.Zat(t,i,e+1)}throw new ao(qa.MEDIA_LOAD_ERROR,s.message,s)}}async _lt(t,i,e){const s=this.Vht.uct(i.MS,i.bS),n=this.llt.Qut.Jm(t);let r=Ri.oU();for(const t of s){Vr(e);const i=t.hct,s=t.act,o=n&&n.ZB(i,s)?_.max(i,n.jn(0)):i,h=s;o<h&&(r=r.YB(Ri.rU(o,h)))}for(let t=0;t<r.U;t++)await this.Ilt.nlt(r.Cn(t),r.jn(t),e);this.vat()}async wlt(t,i){try{Vr(i);const e=await this.Ilt.elt(t.out,t.nut,t.Lht,i);return this.Flt(t,e.Llt,e.xlt),this.Clt(t,e.Llt,e.xlt),t}catch(i){if(me(i),De(i))return this.Qlt(new gh(i,t.nut,t.Lht),0),this.Dlt(As.Zot,"Could not append the segment.");if(fL(i)&&this.Ilt.wX())return this.Dlt(As.Kot,"Buffer is full. Could not reduce the buffer.");throw new ao(qa.MEDIA_DECODE_ERROR,i.message,i)}}Flt(t,i,e){const s=t.Lht,n=t.nut;this.lct(n,s,i,e)}lct(t,i,e,s){this.Vht.lct({sct:t.MS,nct:t.bS,hct:e,act:s,_ct:!0},i),this.Ilt.pq(e,s)}B0(t,i,e){const s=Ri.rU(t,i);e?this.Vht.mq(s,e):this.Vht.fct(s),this.Ilt.mq(t,i)}ylt(t){const i=Ri.rU(t.nut.MS,t.nut.bS);t.Lht?this.Vht.mq(i,t.Lht):this.Vht.fct(i)}Qlt(t,i){const e=t.kut,s=this.Vht.Lt.Zht,n=this.Vht.Lt.va,r=t.xut.Lht&&t.xut.Lht.va,o=new EF(e,t.message,s,n,r,i);this.Co(o)}tr(){this.i0=void 0,this.hlt=void 0}gn(){this.tr(),this.Elt=void 0,this.Ult.fn(xF,this.Ds),this.Ult.gn()}constructor(t,i,e,s,n,r,o,h){super(),this.gat=t,this.Vht=i,this.llt=e,this.ult=s,this.Ult=n,this.Ilt=r,this.qct=o,this.Mlt=h,this.olt=void 0,this.i0=void 0,this.hlt=void 0,this.Elt=void 0,this.plt=0,this.Alt=0,this.blt=Ri.oU(),this.Ult.yn(xF,this.Ds)}};function OF(t){const i=t.Lht,e=i.Wrt,s=ps(t.nut)?e.xct(t.nut):t.nut;return e.Ylt(s,i.jlt.Olt())}var jF=0,RF=class{G7(t){const i=jF++,e=this.Uut.O0,s=new rF(t),n=new jQ(e,this.Glt),r=new sF(this.Uut,this.q3,this.$0,this.wU),o=IF.G7(i,this.Uut,s,this.wU,n,this.aE,this.rut,this.Zct,this.Yct,this.qct),h=function(t){switch(t){case Jt.WA:return Bu.WA;case Jt.VA:return Bu.VA;case Jt.Ru:return Bu.Ru;case Jt.OT:return Bu.OT;default:return Bu.jT}}(e),a=new xQ(this.aE,h),u=this.zut(a,n,this.Glt),c=new DF(this.Uut),l=new CF(i,s,r,o,u,c,this.qct,this.Mlt);return new LQ(i,t.Out,s,l,this.q3)}constructor(t,i,e,s,n,r,o,h,a,u,c){this.Uut=t,this.q3=i,this.$0=e,this.aE=s,this.wU=n,this.Glt=r,this.rut=o,this.Zct=h,this.Yct=a,this.qct=u,this.Mlt=c}},PF=class extends RF{zut(t,i,e){return(new iF).zut(t,this.Uut,i,e,this.rut)}},zF=class extends RF{Vlt(t,i){const e={Zht:Jt.Ru,Out:i,Bot:i.Bot,va:t.va};return super.G7(e)}zut(t,i){return(new iF).zut(t,this.Uut,i,!1,this.rut)}};var BF=class{FZ(t){return this.xrt.FZ(t)}GZ(t){return this.xrt.GZ(t)}constructor(t){this.xrt=t}},UF=class{FZ(t){return!0}GZ(t){return Promise.resolve(void 0)}},QF=class extends os{fa(){return new FF(this.qw.map((t=>t.va)))}constructor(t,i){super(ct.Ow),this.qw=t||[],this.Lt=i}},FF=class extends Os{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}},YF=class extends Oe{fa(){return new GF(this.quality.va)}constructor(t){super(ct.QUALITY_UNAVAILABLE),this.quality=t}},GF=class extends Hn{constructor(t){super("qualityunavailable"),this.quality=t}},VF=class extends Os{constructor(){super(ct.NO_QUALITY)}};function WF(t){return{GP:t.GP,Vet:t.$nt,Ti:HF(t)?t.Ti:0,Av:HF(t)?Jt.VA:Jt.WA,ji:HF(t)?t.ji:0}}function HF(t){const i=t;return void 0!==i.Ti&&void 0!==i.ji}var XF=0,ZF=class extends Mo{get Zw(){return this.rat.Wlt.map(qF).filter(Ks)}Hlt(t){for(const i of t)i.yn("update",this.Xlt),this.sS.nS(i)}Zlt(t){if(!this.sS.oS(t))return;t.bD();const i=this.qlt();if(this.Klt&&Ai(this.Klt,t)){const t=this.Klt.filter((t=>t.snt));0===t.length&&i.length>0?this.Kw=i:this.Kw=t}else this.Kw=i;this.Co(new YF(t))}Jlt(t){if(!this.sS.oS(t))return;const i=this.qlt();t.MD(),this.Klt&&!function(t,i){return bd(t,i,((t,i)=>t===i))}(this.Klt,i)||(this.Kw=this.qlt())}qlt(){const t=[];for(const i of this.sS.Rw)i.snt&&t.push(i);return t}get Hw(){return this.$lt}tdt(t){this.$lt=t.Lht,this.Co(t)}get Out(){return this.rat}get Rt(){return this.Le}set Rt(t){this.fS(t)}get va(){return this.Xa||(this.Xa=Mi(this)),this.Xa}get idt(){return this.edt}set idt(t){this.edt=t}get o(){return this.uS}get Xw(){return this.cS}get zt(){return this.C2}get gs(){return this.Rx}get kh(){return this.lS}set kh(t){t!==this.lS&&(this.lS=t,this.Co(new hl(this)))}get _v(){return this.Rt?"enabled":"disabled"}get Kw(){return this.Klt}set Kw(t){let i=[];if(t){const e=(null!=t?t:[]).filter((t=>{const i=this.Hw?WF(this.Hw):void 0;return ra.Ys.Uet(i,WF(t))}));if(0===e.length)return;i=e.filter((t=>t.snt))}else i=this.qlt();0===i.length&&this.Co(new VF),this.Klt=t&&this.sS.oS(t)?t:void 0,this.sdt=this.ndt(this.Klt),this.Co(new QF(t,this))}get rdt(){return this.sdt}ndt(t){if(!t||0===t.length)return;const i=[];for(const e of this.Bot)for(const s of t)s===e.Lht&&s.snt&&i.push(e);return i}get qw(){return this.sS}get Bot(){return this.odt}hdt(t){this.adt.push(t),this.odt.push(...t.Bot);const i=t.Bot.map((t=>t.Lht));this.Hlt(i)}get Zht(){return this.udt}get cdt(){return this.adt}get ldt(){return this.Bot.every((t=>t.ldt))}fS(t){this.Le=t,this.edt&&(t?this.edt.MD(this):this.edt.bD(this))}ddt(t){this.Le=t,this.fdt!==t&&(this.fdt=t,this.Co(new uc(this)))}gn(){for(const t of this.sS.Rw)t.fn("update",this.Xlt);this.sS.tr()}constructor(t,i,e="alternative"){super(),this.$lt=void 0,this.Le=!1,this.Xa=void 0,this.edt=void 0,this.uS="",this.fdt=!1,this.sS=new wv,this.odt=[],this.Klt=void 0,this.sdt=void 0,this.Xlt=()=>this.Co(new hl(this)),this.adt=[],this.rat=t,this.uS=String(XF++),this.cS=Q(),this.C2=e,this.Rx=t.b8,this.lS=t.kh,this.udt=t.Av,this.odt=t.Bot,this.Hlt(i)}};function qF(t){if("urn:mpeg:dash:role:2011"===t.irt)return KF(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.irt){if("1"===t.lT)return ff.$w;if("2"===t.lT)return ff.ov}}function KF(t){if(void 0!==(null==t?void 0:t.lT))switch(t.lT){case"caption":return ff.Jw;case"sign":return ff.rv;case"description":return ff.$w;case"enhanced-audio-intelligibility":return ff.ov;default:return}}var Vs,JF,$F=class extends NQ{get _z(){const t=this.q3.U_;return this.Qut.Jm(t,.01)}get _dt(){return this.Not&&this.gdt[this.Not.Xw]?this.gdt[this.Not.Xw]:Ri.oU()}get wdt(){return this.Not&&this.vdt[this.Not.Xw]?this.vdt[this.Not.Xw]:Ri.oU()}get Vut(){return new Ri([0,1/0])}get O_(){return this._dt}get wq(){return this.mdt?this.mdt.Ght.wq.Wut:Ri.oU()}get Qut(){return bh(this.O_,this.wq).FB(2*this.pdt)}get Cn(){return this.Dot?this.Dot.bct.Cn:NaN}get jn(){return this.Dot?this.Dot.bct.jn:NaN}get G_(){const t=this.jn;return!!t&&this.q3.U_>=t}get pdt(){var t;const i=this.Pot();if(!i)return.04;var e;return 1/(null!=(e=this.Not&&(null==i||null==(t=i.Adt)?void 0:t.JS()))?e:25)}get Ti(){return this.Kx}get O0(){return Jt.Ru}get gg(){return this.lU}set gg(t){this.lU=t}get pg(){return this.wdt}get Ig(){if(!this.Not)return Ri.nU(0);const t=this.Rot(this.Not),i=null==t?void 0:t.ydt,e=null==t?void 0:t.Mdt;if(void 0===e||void 0===i)return Ri.nU(0);const s=_.max(i,this.q3.U_);return new Ri([e,s]).PB()}get ji(){return this.qx}x0(){}Gut(){return this.Qut.gr(this.jn)}async elt(t,i,e,s){const n=t.Av===Lu.jZ?t.ly.bot:await t.ly.GR(s),r=this.findTrackForRepresentation(e),o=this.gdt[r.Xw],h=i.MS,a=i.bS,u=new Ri([h,a]);o||(this.gdt[r.Xw]=Ri.oU(),this.vdt[r.Xw]=Ri.oU()),this.Prt(s);const c=this.Vrt(new j(n),i,e,r);for(const t of c)r.lE(t);return this.gdt[r.Xw]=this.gdt[r.Xw].YB(u),{Llt:h,xlt:a}}Prt(t){const i=dL(this.q3.U_,void 0,void 0,this.O_,this.wU.lX,this.wU.rX);for(const[e,s]of i)$r(this.nlt(e,s,t))}Grt(t,i,e){return this.bdt.Grt(t,i,e)}Vrt(t,i,e,s){return this.bdt.Vrt(t,i,e,s)}nlt(t,i,e){const s=t,n=i;let r=new Ri([t,i]);for(const t of this.Z.Rw){const i=[];for(const e of t.L.Rw)e.MS>=s&&e.bS<=n?i.push(e):r=r.VB(new Ri([e.MS,e.bS]));for(const e of i)t.gD(e);const e=this.gdt[t.Xw];e&&(this.gdt[t.Xw]=e.VB(r))}return Promise.resolve()}mq(t,i){}pq(t,i){}wX(){return!1}MD(t){if(super.MD(t),this.bdt.tr(),this.mdt&&(this.mdt.gn(),this.mdt=void 0),this.Not){const t=this.Rot(this.Not);this.mdt=new zF(this,this.q3,this.q3,this.aE,this.wU,!1,this.rut,void 0,void 0,new UF,nv).Vlt(this.Not,t),this.mdt.yn(hi.ha,this.Tdt),this.mdt.Cn(As.Fot)}}bD(t){this.Not===t&&(super.bD(t),this.mdt&&(this.mdt.gn(),this.mdt=void 0))}Lot(t){const i=function(t){const i=t.Bot&&t.Bot.length>0&&t.Bot[0],e=i&&Mp(i.$nt),s=Mp(t.$nt),n=t.aG===la.APPLICATION_TTML_XML;return e||s||n?O.TTML:t.aG===la.TEXT_VTT||Np(t.aG,t.$nt)?O.WEBVTT:O.DEFAULT}(t);if(!i)throw new g("Unknown TextTrack type for Representation");const e=t.Sdt.concat(t.Wlt);return this.Ndt(function(t){return Ai(t.filter((t=>"urn:mpeg:dash:role:2011"===t.irt)).map((t=>t.lT)).filter(Ks),"caption")?Qe.sD:Qe.HA}(e),t.kh,t.b8,!1,i,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.irt)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.lT)))}(t.Sdt),t.Wlt.map(KF).filter(Ks))}async tr(){await super.tr(),this.mdt&&(await this.mdt.tr(As.cht),this.mdt.fn(hi.ha,this.Tdt),this.mdt=void 0),this.Dot=void 0,this.gdt={},this.vdt={}}Idt(){this.gdt={},this.vdt={}}findTrackForRepresentation(t){for(const i of this.Z.Rw){const e=this.Rot(i);if(e&&NQ.zot(e)===t)return i}}constructor(t,i,e,s,n){super(),this.Kx=0,this.lU=1,this.mdt=void 0,this.gdt={},this.vdt={},this.qx=0,this.Tdt=t=>{0},this.q3=t,this.aE=i,this.wU=e,this.bdt=s,this.rut=n}},tY=class extends $F{Ndt(t,i,e,s,n,r,o,h){var a;const u=r.Bot.reduce(((t,i)=>t||i.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.oE.rE(t,l,i,e,s,n,o,h)}gn(){for(const t of this.Z.Rw)this.oE.fE(t);return super.gn()}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.oE=r}},iY=class{get nt(){return this.Dl}async hE(t){if(t.Av!==Jt.Ru)return;const i=function(t,i){return Mp(i)||t===la.APPLICATION_TTML_XML||t===la.TEXT_VTT?new bQ:Np(t,i)?new TQ:void 0}(t.aG,t.$nt);if(i){const e=this.Ddt(i);return this.Edt(e),await e.$n(t),e}}Ddt(t){return new tY(this.q3,this.aE,this.wU,t,this.rut,this.oE)}Edt(t){this.kdt.push(t),this.Dl.tz(t.Z)}async tr(){for(const t of this.kdt.slice())await t.tr();To(this.kdt),this.Dl.tr()}async gn(){for(const t of this.kdt)await t.gn();To(this.kdt),this.Dl.gn()}constructor(t,i,e,s,n){this.kdt=[],this.Dl=new vl([]),this.q3=t,this.aE=i,this.wU=e,this.rut=s,this.oE=n}},eY=class extends Os{constructor(t){super(Tf.Wv),this.error=t}};!function(t){t.Tj="static",t.Sj="dynamic"}(Vs||(Vs={})),(JF||(JF={})).Ldt="xdt";var sY=class extends Os{constructor(){super(JF.Ldt)}},nY=0;var rY,ns,oY,hY=class extends Os{constructor(t,i){super(Tf.Kv),this.representation=t,this.previousRepresentation=i}};function aY(t,i,e){return e===rY.Cdt?e:i!==ns.Odt&&i!==ns.jdt||e!==rY.Rdt&&e!==rY.Pdt?t?i===ns.zdt?rY.Bdt:i===ns.Udt?rY.Qdt:rY.Cdt:rY.Fdt:rY.Pdt}function uY(t,i,e,s){const n={byte:e};let r=rY.Rdt;const o=[],h=31&Ex(i,n,s);n.byte+=1;for(let e=0;e<h;e+=1){const h=Ex(i,n,s),a=4&h,u=3&h;r=aY(Boolean(a),u,r);const c=Ex(i,n,s),l=Ex(i,n,s);o.push({Ydt:t,Kb:-1,Gdt:!e,Vdt:Boolean(a),Av:u,Wdt:r,Hdt:c,Xdt:l})}return o}function cY(t,i,e){const s=Ex(t,i,e);if(!S(s))return String.fromCharCode(s)}function lY(t){const i=t.kJ,e={byte:t.DJ},s=t.EJ,n=Ex(i,e,s);if(255===n&&(e.byte+=1),181!==n)return;const r=kx(i,e);if(47!==r&&49!==r)return;if(49===r){const t=function(t,i,e){let s="",n=e;for(;n>0;)n-=1,s+=cY(t,i);return s}(i,e,4);if("GA94"!==t)return}if(3!==Ex(i,e,s))return;47===r&&(e.byte+=1);const o=t;return o.Zdt=e.byte,o}function dY(t){return 4===t.NJ}function fY(t){const i=t.filter(dY).map(lY).filter(Ks),e=[];for(const t of i)e.push(...uY(t.SJ,t.kJ,t.Zdt,t.EJ));return e}!function(t){t[t.Cdt=0]="Cdt",t[t.Rdt=1]="Rdt",t[t.Pdt=2]="Pdt",t[t.Qdt=3]="Qdt",t[t.Bdt=4]="Bdt",t[t.Fdt=5]="Fdt"}(rY||(rY={})),function(t){t[t.Odt=0]="Odt",t[t.jdt=1]="jdt",t[t.zdt=2]="zdt",t[t.Udt=3]="Udt"}(ns||(ns={})),function(t){t[t.qdt=47]="qdt",t[t.Kdt=49]="Kdt"}(oY||(oY={}));var _Y="und";function gY(t){if(t===_Y)return;const i=t.toLowerCase();for(const t of wY)if(t[1]===i||t[2]===i||t["2T"]===i||t["2B"]===i||t[3]===i)return t}var wY=[{l:"Abkhaz",lh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",lh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",lh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",lh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",lh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",lh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",lh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",lh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",lh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",lh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",lh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",lh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",lh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",lh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",lh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",lh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",lh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",lh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",lh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",lh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",lh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",lh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",lh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",lh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",lh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",lh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",lh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",lh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",lh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",lh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",lh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",lh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",lh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",lh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",lh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",lh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",lh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",lh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",lh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",lh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",lh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",lh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",lh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",lh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",lh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",lh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",lh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",lh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",lh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",lh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",lh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",lh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",lh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",lh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",lh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",lh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",lh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",lh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",lh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",lh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",lh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",lh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",lh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",lh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",lh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",lh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",lh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",lh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",lh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",lh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",lh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",lh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",lh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",lh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",lh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",lh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",lh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",lh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",lh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",lh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",lh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",lh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",lh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",lh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",lh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",lh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",lh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",lh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",lh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",lh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",lh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",lh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",lh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",lh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",lh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",lh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",lh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",lh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",lh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",lh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",lh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",lh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",lh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",lh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",lh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",lh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",lh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",lh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",lh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",lh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",lh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",lh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",lh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",lh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",lh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",lh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",lh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",lh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",lh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",lh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",lh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",lh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",lh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",lh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",lh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",lh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",lh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",lh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",lh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",lh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",lh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",lh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",lh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",lh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",lh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",lh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",lh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",lh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",lh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",lh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",lh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",lh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",lh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",lh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",lh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",lh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",lh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",lh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",lh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",lh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",lh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",lh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",lh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",lh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",lh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",lh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",lh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",lh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",lh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",lh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",lh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",lh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",lh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",lh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",lh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",lh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",lh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",lh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",lh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",lh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",lh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",lh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",lh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",lh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",lh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",lh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",lh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",lh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",lh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",lh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",lh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",lh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",lh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",lh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];function vY(t){var i;const e=null!=(i=function(t){const i=t.eJ,e=new xx;return e.vJ(i,0,i.byteLength),Fx(e).VJ}(t))?i:24;return t.Jdt/e}function mY(t){return t.Av===X.kA}var pY;function AY(t,i,e,s,n){const r=function(t,i,e,s){const n=e.Jdt,r=ii.fromNumber(t.uT||0),o=s.nS(A.fN(r,n));return{$dt:s.JS(),tft:s,ift:o,eft:s}}(t,0,e,s),o=A._N(t.ct||0,e.Jdt),h=t.Vy||0,a=!(65536&h)&&1!==(h>>24&3);let u;const c=vh(n),l=new Bi;for(;l.Ku<c.byteLength;){const t=es(c,l);if((31&xg(c,l,1))===Lx.RJ){const i=new xx;i.vJ(n,l.Ku-1,l.Ku+t-1);const e=new Qx(i),s=Rx(r.ift,e);u=u||[],u.push(...fY(s))}l.KA(t-1)}return ol({},r,{ct:o.JS(),sft:o,nft:r.ift.JS(),rft:r.$dt,oft:a,hft:u,aft:!1,uft:!1})}function yY(t){return{AM:t.zy.AM,Jdt:t.wM.zy.cM}}function MY(t){return t.Av===X.Kp}!function(t){t[t.SAMPLE_DEPENDS_ON_UNKNOWN=0]="SAMPLE_DEPENDS_ON_UNKNOWN",t[t.SAMPLE_DEPENDS_ON_OTHERS=1]="SAMPLE_DEPENDS_ON_OTHERS",t[t.SAMPLE_DEPENDS_ON_NO_OTHER=2]="SAMPLE_DEPENDS_ON_NO_OTHER",t[t.SAMPLE_DEPENDS_ON_RESERVED=3]="SAMPLE_DEPENDS_ON_RESERVED"}(pY||(pY={}));var bY=class{QS(t){return this.L8===t.L8&&this.A8===t.A8}constructor(t,i){this.L8=t,this.A8=i}},TY=class{get W8(){return this.cft}get Q8(){return[this]}get G8(){return this.kZ}get S8(){return this.lft}get D8(){return new bY(this.S8.L8,this.S8.A8+this.W8.length-1)}dft(t){this.cft+=t}fft(t){for(const i of t)this.dft(i)}constructor(t,i){this.kZ=t,this.lft=i,this.cft=""}};function SY(t,i){return t===i||t.W8===i.W8&&t.S8.QS(i.S8)&&of(t.G8,i.G8)}function NY(t,i){return t===i||t.S8.QS(i.S8)&&t.D8.QS(i.D8)&&bd(t.Q8,i.Q8,SY)}var IY=class extends rl{FS(t){return bd(this.O,t.O,NY)}constructor(t,i,e){super(t,i,e,!1)}},DY=class{_ft(t){return t.lI(this)}gft(t){return Pe(t,((t,i)=>t.lI(this,i)))}wft(t,i){return new EY(t,i).vft()}},EY=class{vft(){if(this.mft)return[];for(let t=0;t<this.L8.length;t++)this.pft(t);return this.Aft(),this.yft}Mft(t){this.bft=new TY(jR,new bY(this.Tft,t))}Aft(){this.bft&&(this.yft.push(this.bft),this.bft=null)}pft(t){const i=this.L8[t];kY(i)?this.bft&&this.Aft():(this.bft||this.Mft(t),this.bft.dft(i))}get mft(){return this.L8.every(kY)}constructor(t,i){this.L8=t,this.Tft=i,this.yft=[],this.bft=null}};function kY(t){return null==t}var LY=class{static Sft(t,i,e){if(i>=e)return;const s=Pe(t,((t,i)=>new EY(t.map((t=>t?t.Nft():null)),i).vft()));return 0!==s.length?new IY(i,e,s):void 0}},go="black",mn="white",xY=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,i)=>(t[i[0]]=i[1],t)),{}),CY=class{Ift(t){for(let i=0;i<It;i++)t&&(this.Dft[i]=t.Dft[i])}QS(t){for(let i=0;i<It;i++)if(this.Dft[i]!==t.Dft[i])return!1;return!0}Eft(){for(let t=0;t<It;t++)if(null!==this.Dft[t])return!1;return!0}kft(t){this.Lft!==t&&(this.Lft=t),this.Lft<0?this.Lft=0:this.Lft>It&&(this.Lft=31)}xft(t){const i=this.Lft+t;this.kft(i)}Cft(){this.xft(-1),this.Dft[this.Lft]=null}dft(t){t>=144&&this.Cft();const i=function(t){return xY[t]?String.fromCharCode(xY[t]):String.fromCharCode(t)}(t);this.addParsedChar(i)}addParsedChar(t){this.Lft>=It||(32===Number(t)?(this.Dft[this.Lft]=this.Oft?"</i>":"<i>",this.Oft=!this.Oft):this.Dft[this.Lft]=t,this.xft(1))}jft(t){for(let i=t;i<It;i++)this.Dft[i]=null}kL(){this.jft(0),this.Lft=0}Rft(){this.jft(this.Lft)}Pft(t,i){const e=this.Dft;let s=null;for(let n=0;n<It;n++){const r=e[n];null===r?s=null:(s||(s={Gh:n,Xh:t,ji:0,Ti:1,Dft:[[]]},i.push(s)),s.Dft[0].push(r),s.ji++)}}lI(t,i){return t.wft(this.Dft,i)}constructor(){this.Dft=[],this.Lft=0;for(let t=0;t<It;t++)this.Dft.push(null);this.Oft=!1}};var Sh,OY=class{zft(t,i){const e="CC"+(this.Bft<<1|this.Uft+1);if(t>=i)return null;const s=(new DY).gft(this.Qft.slice(1));return 0===s.length?null:{yS:new IY(t,i,s),VW:e,Fft:this.Bft<<1|this.Uft+1}}tr(){this.Yft(),this.Gft=1}Vft(){return this.Gft}Wft(t){this.Gft=t}kft(t){this.Qft[this.Gft].kft(t)}xft(t){this.Qft[this.Gft].xft(t)}Hft(){return this.Xft}Zft(t){this.Xft=t}dft(t,i){if(i<32||i>127)return;let e="";switch(t){case 0:e=void 0!==PY[i]?PY[i]:String.fromCharCode(i);break;case 1:e=zY[i];break;case 2:this.qft(),e=BY[i];break;case 3:this.qft(),e=UY[i]}e&&this.Qft[this.Gft].addParsedChar(e)}qft(){this.Qft[this.Gft].Cft()}Kft(t,i,e){if(t>=i)for(let s=e-1;s>=0;s--)this.Qft[t+s]=this.Qft[i+s];else for(let s=0;s<e;s++)this.Qft[t+s]=this.Qft[i+s]}Jft(t,i){for(let e=0;e<=i;e++)this.Qft[t+e]=new CY}Yft(){this.Jft(0,jY)}$ft(){this.Gft=this.Xft>0?this.Xft:0,this.Yft()}t_t(t){this.i_t=t}e_t(t){this.s_t=t}n_t(t){this.r_t=t}o_t(t){this.h_t=t}constructor(t,i){this.Qft=new Array(jY+1);for(let t=0;t<=jY;t++)this.Qft[t]=new CY;this.Gft=1,this.Xft=0,this.Bft=t,this.Uft=i,this.i_t=!1,this.s_t=!1,this.r_t=mn,this.h_t=go,this.tr()}},jY=15;!function(t){t[t.a_t=0]="a_t",t[t.u_t=1]="u_t",t[t.c_t=2]="c_t",t[t.l_t=3]="l_t"}(Sh||(Sh={}));var RY,PY={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},zY={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},BY={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},UY={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},gn=class{tr(){this.d_t=!0,this.f_t=0,this.z2=0,this.__t=this.g_t,this.w_t=void 0,this.g_t.tr(),this.v_t.tr(),this.m_t.tr()}p_t(t,i){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|i>>5&1]}A_t(t,i){const e=this.p_t(t,i),s=(30&i)>>1;let n=mn,r=!1;s<7?n=GY[s]:7===s&&(r=!0);const o=1==(1&i);if(4===this.z2)return;const h=this.__t;if(3===this.z2&&e!==h.Vft()){const t=1+h.Vft()-h.Hft(),i=1+e-h.Hft();h.Kft(i,t,h.Hft()),h.Jft(0,i-1),h.Jft(e+1,jY-e)}h.Wft(e);const a=PR[t<<1&14|i>>5&1]-1;if(a<0)return;const u=function(t,i){const e=i>95?i-96:i-64;return{p8:RR[e].p8,m8:RR[e].m8,A8:RR[e].A8,L8:t}}(a,i);h.kft(u.A8),this.__t.t_t(o),this.__t.e_t(r),this.__t.n_t(n),this.__t.o_t(go)}y_t(t,i){this.__t.t_t(!1),this.__t.e_t(!1),this.__t.n_t(mn);const e=this.M_t(t,Sh.a_t," ".charCodeAt(0));let s=mn,n=!1;const r=1==(1&i);return s=GY[(14&i)>>1],"white_italics"===s&&(s="white",n=!0),this.__t.t_t(r),this.__t.e_t(n),this.__t.n_t(s),e}M_t(t,i,e){if(this.__t.dft(i,e),2===this.z2||3===this.z2){const i=this.b_t(this.__t,this.f_t,t);return this.f_t=t,i}return null}b_t(t,i,e){return this.d_t?null:2===this.z2||3===this.z2?t.zft(e,e+10):t.zft(i,e)}T_t(t,i){let e=go;0==(7&t)&&(e=YY[(14&i)>>1]),this.__t.o_t(e)}S_t(t){const i=QY,e=t.N_t,s=t.I_t;let n=null;switch(e){case i.RCL:this.D_t();break;case i.BS:this.E_t();break;case i.AOD:case i.AON:case i.DER:break;case i.RU2:n=this.k_t(2,s);break;case i.RU3:n=this.k_t(3,s);break;case i.RU4:n=this.k_t(4,s);break;case i.FON:n=this.L_t(s);break;case i.RDC:this.x_t(s);break;case i.TR:this.C_t();break;case i.RTD:this.O_t();break;case i.EDM:n=this.j_t(s);break;case i.CR:n=this.R_t(s);break;case i.ENM:this.P_t();break;case i.EOC:n=this.z_t(s)}return n}R_t(t){const i=this.__t;if(3!==this.z2)return null;const e=this.b_t(i,this.f_t,t),s=i.Vft()-i.Hft()+1;return i.Kft(s-1,s,i.Hft()),i.Jft(0,s-1),i.Jft(i.Vft(),jY-i.Vft()),this.f_t=t,e}k_t(t,i){this.__t=this.g_t;const e=this.__t;let s=null;return 3!==this.z2&&4!==this.z2&&(s=this.b_t(e,this.f_t,i),this.g_t.$ft(),this.v_t.$ft(),this.d_t=!1,e.Wft(jY)),this.z2=3,e.Zft(t),s}L_t(t){return this.M_t(t,Sh.a_t," ".charCodeAt(0))}j_t(t){const i=this.g_t;let e=null;return 4!==this.z2&&(e=this.b_t(i,this.f_t,t)),i.Yft(),this.d_t=!1,e}x_t(t){this.z2=2,this.__t=this.g_t,this.__t.Zft(0),this.f_t=t}P_t(){this.v_t.Yft()}z_t(t){let i=null;4!==this.z2&&(i=this.b_t(this.g_t,this.f_t,t));const e=this.v_t;return this.v_t=this.g_t,this.g_t=e,this.D_t(),this.f_t=t,i}D_t(){this.z2=1,this.__t=this.v_t,this.__t.Zft(0)}E_t(){this.__t.qft()}C_t(){this.m_t.tr(),this.d_t=!1,this.O_t()}O_t(){this.__t=this.m_t,this.z2=4}B_t(t,i,e){return this.__t.dft(Sh.a_t,i),this.M_t(t,Sh.a_t,e)}U_t(t,i,e){const s=1&i?Sh.l_t:Sh.c_t;return this.M_t(t,s,e)}Q_t(t){const i=t.F_t,e=t.N_t,s=t.I_t;if(this.w_t===(i<<8|e))return this.w_t=void 0,null;if(this.w_t=i<<8|e,this.Y_t(i,e))this.A_t(i,e);else{if(this.G_t(i,e))return this.y_t(s,e);if(this.V_t(i,e))this.T_t(i,e);else{if(this.W_t(i,e))return this.M_t(s,Sh.u_t,e);if(this.H_t(i,e))return this.U_t(s,i,e);if(this.X_t(i,e))return this.S_t(t);this.isTabOffset(i)&&this.__t.xft(e-32)}}return null}isTabOffset(t){return 23===t||31===t}X_t(t,i){return 20==(246&t)&&32==(240&i)}Y_t(t,i){return 16==(240&t)&&64==(192&i)}G_t(t,i){return 17==(247&t)&&32==(240&i)}V_t(t,i){return 16==(247&t)&&32==(240&i)||23==(247&t)&&45==(255&i)}W_t(t,i){return 17==(247&t)&&48==(240&i)}H_t(t,i){return 18==(246&t)&&32==(224&i)}static Z_t(t){return 16==(112&t)}constructor(t,i){this.z2=0,this.m_t=new OY(t,i),this.g_t=new OY(t,i),this.v_t=new OY(t,i),this.__t=this.g_t,this.f_t=0,this.w_t=void 0,this.d_t=!1}},QY={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47};!function(t){t[t.yB=0]="yB",t[t.q_t=1]="q_t",t[t.K_t=2]="K_t",t[t.J_t=3]="J_t",t[t.Ru=4]="Ru"}(RY||(RY={}));var FY,YY=["black","green","blue","cyan","red","yellow","magenta","black"],GY=["white","green","blue","cyan","red","yellow","magenta","white_italics"],VY=class{Nft(){return this.$_t}tgt(){return this.i_t}igt(){return this.s_t}egt(){return this.h_t}sgt(){return this.r_t}constructor(t,i,e,s,n){this.$_t=t,this.i_t=i,this.s_t=e,this.h_t=s,this.r_t=n}},WY=class{ngt(t,i,e,s,n,r,o){this.EB=t,this.rgt=i,this.ogt=e,this.hgt=s,this.agt=n,this.ugt=r,this.cgt=o}lgt(){this.dgt=[];for(let t=0;t<XY;t++)this.dgt.push(this.fgt())}fgt(){const t=[];for(let i=0;i<HY;i++)t.push(null);return t}_gt(t){this.ggt()&&(this.dgt[this.Gft][this.wgt]=new VY(t,this.i_t,this.s_t,this.h_t,this.r_t),this.wgt++)}vgt(){this.ggt()&&(this.wgt<=0&&this.Gft<=0||(this.wgt<=0?(this.wgt=this.cgt-1,this.Gft--):this.wgt--,this.dgt[this.Gft][this.wgt]=null))}ggt(){const t=this.Gft<this.ugt&&this.Gft>=0,i=this.wgt<this.cgt&&this.wgt>=0;return t&&i}mgt(){return this.EB}pgt(t){let i=0;for(let e=t;e<XY;e++,i++)this.dgt[i]=this.dgt[e];for(let e=0;e<t;e++,i++)this.dgt[i]=this.fgt()}Agt(){if(this.Gft+1>=this.ugt)return this.pgt(1),void(this.wgt=0);this.Gft++,this.wgt=0}ygt(){this.dgt[this.Gft]=this.fgt(),this.wgt=0}zft(t,i){if(this.xS>=t)return null;const e=LY.Sft(this.dgt,this.xS,t);return e?(this.Mgt(t),{yS:e,VW:"svc"+i,Fft:i}):null}bgt(t,i){this.Gft=t,this.wgt=i}Tgt(t){this.h_t=t}Sgt(t){this.r_t=t}Ngt(t){this.i_t=t}Igt(t){this.s_t=t}Dgt(){this.Gft=0,this.wgt=0,this.i_t=!1,this.s_t=!1,this.r_t=mn,this.h_t=go}Egt(t){this.kgt=t}Lgt(){this.EB=!0}be(){this.EB=!1}wh(){this.EB=!this.EB}Mgt(t){this.xS=t}constructor(t){this.xgt=t,this.EB=!1,this.agt=!1,this.ogt=0,this.rgt=0,this.hgt=0,this.ugt=0,this.cgt=0,this.kgt=2,this.dgt=[],this.xS=0,this.Gft=0,this.wgt=0,this.s_t=!1,this.i_t=!1,this.r_t=mn,this.h_t=go,this.lgt()}};!function(t){t[t.Cgt=0]="Cgt",t[t.Ogt=1]="Ogt",t[t.jgt=2]="jgt",t[t.Rgt=3]="Rgt"}(FY||(FY={}));var HY=42,XY=15,ZY=class{Pgt(t){const i=t.zgt();let e=i.lT;const s=i.I_t;if(e===tG){e=e<<16|t.zgt().lT}return e>=0&&e<=31?this.Bgt(e,s):e>=128&&e<=159?this.Ugt(t,e,s):(e>=4096&&e<=4127?this.Qgt(t,255&e):e>=4224&&e<=4255?this.Fgt(t,255&e):e>=32&&e<=127?this.Ygt(e):e>=160&&e<=255?this.Ggt(e):e>=4128&&e<=4223?this.Vgt(255&e):e>=4256&&e<=4351&&this.Wgt(255&e),null)}Ygt(t){this.Hgt&&(127!==t?this.Hgt._gt(String.fromCharCode(t)):this.Hgt._gt("\u266a"))}Ggt(t){this.Hgt&&this.Hgt._gt(String.fromCharCode(t))}Vgt(t){if(!this.Hgt)return;if(void 0===iG[t])return void this.Hgt._gt("_");const i=iG[t];this.Hgt._gt(i)}Wgt(t){this.Hgt&&(160===t?this.Hgt._gt("[CC]"):this.Hgt._gt("_"))}Bgt(t,i){if(!this.Hgt)return null;const e=this.Hgt;let s=null;switch(t){case qY:e.vgt();break;case JY:e.mgt()&&(s=e.zft(i,this.Xgt)),e.Agt();break;case $Y:e.mgt()&&(s=e.zft(i,this.Xgt)),e.ygt();break;case KY:e.mgt()&&(s=e.zft(i,this.Xgt)),e.lgt(),e.bgt(0,0)}return s}Ugt(t,i,e){if(i>=128&&i<=135){const t=7&i;this.Zgt(t)}else{if(136===i){const i=t.zgt().lT;return this.qgt(i,e)}if(137===i){const i=t.zgt().lT;this.Kgt(i,e)}else{if(138===i){const i=t.zgt().lT;return this.Jgt(i,e)}if(139===i){const i=t.zgt().lT;return this.$gt(i,e)}if(140===i){const i=t.zgt().lT;return this.twt(i,e)}if(143===i)return this.tr(e);if(144===i)this.iwt(t);else if(145===i)this.ewt(t);else if(146===i)this.bgt(t);else if(151===i)this.swt(t);else if(i>=152&&i<=159){const s=(15&i)-8;this.ngt(t,s,e)}}}return null}Qgt(t,i){i>=8&&i<=15?t.Ny(1):i>=16&&i<=23?t.Ny(2):i>=24&&i<=31&&t.Ny(3)}Fgt(t,i){i>=128&&i<=135?t.Ny(4):i>=136&&i<=143&&t.Ny(5)}Zgt(t){this.nwt[t]&&(this.Hgt=this.nwt[t])}*rwt(t){for(let i=0;i<8;i++){1==(1&t)&&this.nwt[i]&&(yield i),t>>=1}}qgt(t,i){let e=null;for(const s of this.rwt(t)){const t=this.nwt[s];t.mgt()&&(e=t.zft(i,this.Xgt)),t.lgt()}return e}Kgt(t,i){for(const e of this.rwt(t)){const t=this.nwt[e];t.mgt()||t.Mgt(i),t.Lgt()}}Jgt(t,i){let e=null;for(const s of this.rwt(t)){const t=this.nwt[s];t.mgt()&&(e=t.zft(i,this.Xgt)),t.be()}return e}$gt(t,i){let e=null;for(const s of this.rwt(t)){const t=this.nwt[s];t.mgt()?e=t.zft(i,this.Xgt):t.Mgt(i),t.wh()}return e}twt(t,i){let e=null;for(const s of this.rwt(t)){const t=this.nwt[s];t.mgt()&&(e=t.zft(i,this.Xgt)),this.nwt[s]=void 0}return e}tr(t){const i=this.twt(255,t);return this.kL(),i}kL(){this.Hgt=void 0,this.nwt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}iwt(t){t.Ny(1);const i=t.zgt().lT;if(!this.Hgt)return;const e=(128&i)>0,s=(64&i)>0;this.Hgt.Igt(e),this.Hgt.Ngt(s)}ewt(t){const i=t.zgt().lT,e=t.zgt().lT;if(t.Ny(1),!this.Hgt)return;const s=3&i,n=(12&i)>>2,r=(48&i)>>4,o=3&e,h=(12&e)>>2,a=(48&e)>>4,u=this.owt(r,n,s),c=this.owt(a,h,o);this.Hgt.Sgt(u),this.Hgt.Tgt(c)}bgt(t){const i=t.zgt().lT,e=t.zgt().lT;if(!this.Hgt)return;const s=15&i,n=63&e;this.Hgt.bgt(s,n)}swt(t){t.Ny(1),t.Ny(1);const i=t.zgt().lT;if(t.Ny(1),!this.Hgt)return;const e=3&i;this.Hgt.Egt(e)}ngt(t,i,e){const s=void 0!==this.nwt[i];if(!s){const t=new WY(i);t.Mgt(e),this.nwt[i]=t}const n=t.zgt().lT,r=t.zgt().lT,o=t.zgt().lT,h=t.zgt().lT,a=t.zgt().lT,u=t.zgt().lT,c=(32&n)>0,l=127&r,d=(128&r)>0,f=o,_=1+(15&h),g=(240&h)>>4,w=1+(63&a);s&&0===(7&u)||this.nwt[i].Dgt(),this.nwt[i].ngt(c,l,f,g,d,_,w),this.Hgt=this.nwt[i]}owt(t,i,e){const s={0:0,1:0,2:1,3:1};return eG[s[t]<<2|s[i]<<1|s[e]]}constructor(t){this.Xgt=t,this.nwt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.Hgt=void 0}},qY=8,KY=12,JY=13,$Y=14,tG=16,iG={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},eG=["black","blue","green","cyan","red","magenta","yellow","white"],sG=class{hwt(t){if(t.Av===ns.Udt){const i=63&t.lT;return this.awt=2*i-1,void(this.uwt=[])}if(this.uwt&&(this.awt>0&&(this.uwt.push(t),this.awt--),0===this.awt)){const t=new nG(this.uwt);this.cwt.push(t),this.uwt=null,this.awt=0}}lwt(){return this.cwt}dwt(){this.cwt=[]}kL(){this.cwt=[],this.uwt=[],this.awt=0}constructor(){this.cwt=[],this.uwt=null,this.awt=0}},nG=class{fwt(){return this._wt<this.gwt.length}wwt(){return this._wt}zgt(){if(!this.fwt())throw new ao(qa.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.gwt[this._wt++]}Ny(t){if(this._wt+t>this.gwt.length)throw new ao(qa.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this._wt+=t}constructor(t){this._wt=0,this.gwt=t}},rG=class{kL(){this.vwt=0,this.mwt=[],this.pwt=[],this.Awt.kL(),this.tr(),this.ywt.forEach((t=>{t.kL()}))}tr(){this.Mwt=0,this.bwt=0,this.Twt.forEach((t=>{t.tr()}))}Swt(t,i){if(t.Vdt){const e=t.Hdt,s=t.Xdt,n=t.Av;n===ns.Odt||n===ns.jdt?this.mwt.push({I_t:i,Av:n,F_t:e,N_t:s,Nwt:this.mwt.length}):this.Iwt&&(this.pwt.push({I_t:i,Av:n,lT:e,Nwt:this.pwt.length}),this.pwt.push({I_t:i,Av:ns.zdt,lT:s,Nwt:this.pwt.length}))}}uY(){const t=[];this.mwt.sort(((t,i)=>t.I_t-i.I_t||t.Nwt-i.Nwt)),this.pwt.sort(((t,i)=>t.I_t-i.I_t||t.Nwt-i.Nwt));for(const i of this.mwt){const e=this.Dwt(i);e&&t.push(e)}for(const t of this.pwt)this.Awt.hwt(t);const i=this.Awt.lwt();for(const e of i){const i=this.Ewt(e);t.push(...i)}return this.Awt.dwt(),this.mwt=[],this.pwt=[],t}Dwt(t){const i=t.Av;if(gn.Z_t(t.F_t)){const e=t.F_t>>3&1;0===i?this.Mwt=e:this.bwt=e}const e="CC"+(i<<1|(i?this.bwt:this.Mwt)+1),s=this.Twt.get(e);return 255===t.F_t&&255===t.N_t||!t.F_t&&!t.N_t||!this.kwt(t.F_t)||!this.kwt(t.N_t)?(++this.vwt>=45&&this.tr(),null):(this.vwt=0,t.F_t&=127,t.N_t&=127,t.F_t||t.N_t?gn.Z_t(t.F_t)?s.Q_t(t):s.B_t(t.I_t,t.F_t,t.N_t):null)}Ewt(t){const i=[];try{for(;t.fwt();){const e=t.zgt().lT;let s=(224&e)>>5;const n=31&e;if(7===s&&0!==n){s=63&t.zgt().lT}if(0!==s){if(!this.ywt.has(s)){const t=new ZY(s);this.ywt.set(s,t)}const e=this.ywt.get(s),r=t.wwt();for(;t.wwt()-r<n;){const s=e.Pgt(t);s&&i.push(s)}}}}catch(t){if(!(t instanceof ao&&t.code===qa.SUBTITLE_PARSE_ERROR))throw t}return i}kwt(t){let i=0;for(;t;)i^=1&t,t>>=1;return 1===i}constructor(){this.Iwt=!1,this.mwt=[],this.pwt=[],this.Awt=new sG,this.vwt=0,this.Twt=xd({CC1:new gn(0,0),CC2:new gn(0,1),CC3:new gn(1,0),CC4:new gn(1,1)}),this.Mwt=0,this.bwt=0,this.ywt=Gs(),this.tr()}},oG=class extends Os{constructor(t,i){super("Lwt"),this.Fft=t,this.yS=i}},hG=A.$N(.1),aG=class extends Mo{xwt(t,i){this.Cwt.Swt(t,i)}uY(){const t=this.Cwt.uY();for(const i of t)this.Co(new oG(i.Fft,i.yS))}tr(){this.Cwt.kL()}gn(){this.Vo(),this.Cwt.kL()}constructor(){super(),this.Cwt=new rG}},uG=class extends aG{Owt(t,i,e,s){const n=this.Rwt(t,s);this.Pwt(n,i,e),this.uY()}Rwt(t,i){const e=t.slice().sort(zR),s=this.zwt;if(0===s.length)return e;if(0===e.length)return s;let n;const r=s[0].y8,o=s[s.length-1].y8,h=e[0].y8,a=s[0].Lht===e[0].Lht;if(o.uN(h).oN().rN(A.$N(2.5*i))&&a)n=s.concat(e).sort(zR);else if(h.iN(r)){let t=0;for(;t<s.length&&s[t].y8.rN(h);)t++;let i=!1,r=!1;for(let n=t,o=0;n<s.length&&o<e.length;n++,o++)cG(s[n],e[o])?i=!0:r=!0;const o=i&&!r,a=i&&r;!i&&r?n=s.concat(e).sort(zR):o?n=s.slice(0,t).concat(e):(n=e,a&&this.tr())}else n=e,this.tr();return n}Pwt(t,i,e){for(let s=0;s<t.length;s++){const n=t[s],r=n.y8.JS();if(!e&&i-r<hG.JS())return void(this.zwt=t.slice(s));this.xwt(n,r)}this.zwt=[]}constructor(...t){super(...t),this.zwt=[]}};function cG(t,i){return t.y8.QS(i.y8)&&t.Av===i.Av&&t.Hdt===i.Hdt&&t.Xdt===i.Xdt}var lG=class extends xn{Bwt(t){return this.Uwt.get(t)}Qwt(t){let i=this.Uwt.get(t.M8);return i||(i=this.Fwt(t),this.Uwt.set(t.M8,i)),i}Fwt(t){const i=[ff.Jw],e=gY(t.b8);let s,n=e?e.l:"";t.Ywt&&(n="easy "+n,i.push(ff.hv)),s=t.kh?"CC "+t.kh:n?"CC "+n:"CC"+t.M8;const r=this.oE.rE(Qe.sD,s,s,t.b8,!1,O.CEA608,void 0,i);return this.tt(r),r}Grt(t){const i=Ot.Wy(vh(t));this.Gwt=function(t){for(const i of t.Z){const t=yY(i),e=i.wM.IM.kM.xM.OM;let s=bo(e,(t=>t.Av===X.cA));if(!s){const t=e.filter((t=>t.Av===X.EA)),i=bo(t,(t=>{var i;return(null==(i=t.Lb)?void 0:i.Av)===X.cA}));i&&(s=i.Lb)}if(!s)continue;const n=Dx(vh(s.mb.ly),new Bi),r=s.Ab;return ol({},t,{AM:i.zy.AM,mb:ew(s.mb.ly),ji:s.ji,Ti:s.Ti,Fb:r&&r.Fb,Qb:r&&r.Qb,A$:n.JK,Vwt:n.$K,y$:n.tJ,eJ:n.eJ[0],sJ:n.sJ[0]})}}(bo(i,MY))}elt(t,i,e,s,n,r){var o;if(!this.Gwt)return;if(!S(this.Wwt)&&Jn(this.Wwt,i,1e-5))return;S(this.Hwt)||Jn(this.Hwt,i,.1)||this.Xwt.tr();const h=function(t,i,e,s,n){const r=[],o=i.filter(mY),h=s(e);for(const i of o){const s=bo(i.Z,(t=>t.zy.AM===e.AM));if(!s)continue;const o=s.zy.Vb||0,u=s.zy.Wb||0;let c=s.eT?s.eT.eT:ii.ZERO;var a;const l=i.qb+(null!=(a=s.zy.sT)?a:ii.ZERO).toNumber();for(const a of s.iT){let s=l+(a.qb||0);for(const l of a.aT){const a=l.By||u,d=new xx;d.vJ(t,s,s+a);const f=A.fN(c,e.Jdt);d.kI=n(l,i,e,f,tw(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||o||h)}}}return r}(t,Ot.Wy(vh(t)),this.Gwt,vY,AY);var a;const u=null!=(a=null==(o=Id(h,(t=>t.kI.ct)))?void 0:o.kI.ct)?a:0,c=function(t){const i=[];for(const e of t)e.kI.hft&&i.push(...e.kI.hft),delete e.kI.hft;for(let t=0;t<i.length;t+=1)i[t].Kb=t;return i}(h),l=A.$N(s),d=[];for(const t of c)d.push(ol({},t,{Lht:n,y8:t.Ydt.nS(l)}));this.Xwt.Owt(d,e,r,u),this.Wwt=i,this.Hwt=e}tr(){return this.Xwt.tr(),this.Uwt.forEach((t=>{t.gn(),this.it(t),this.oE.fE(t)})),this.Uwt.clear(),this.Gwt=void 0,this.Wwt=NaN,this.Hwt=NaN,super.tr()}gn(){return this.Xwt.fn("Lwt",this.Zwt),this.Xwt.gn(),super.gn()}constructor(t){super(),this.Gwt=void 0,this.Wwt=NaN,this.Hwt=NaN,this.Zwt=t=>{const i=this.Qwt({M8:t.Fft,b8:""}),e=t.yS;for(const t of i.L.Rw)e.MS<t.MS&&e.bS>t.MS?e.bS=t.MS:e.MS>t.MS&&t.bS>e.MS?t.bS=e.MS:e.MS===t.MS&&(e.bS=t.bS);i.lE(e)},this.oE=t,this.Uwt=Gs(),this.Xwt=new uG,this.Xwt.yn("Lwt",this.Zwt)}},dG=/(.*)=(.*)/,fG=/(.*):(.*)/;function _G(t){if(!t)return[];const i=[],e=t.trim().split(";");for(const t of e){const e=t.match(dG);if(e){const[,t,s]=e;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(fG)){const[,i,e]=t.match(fG);switch(i){case"lang":n=e;break;case"er":r=Boolean(Number(e))}}i.push({M8:Number(t),b8:n,Ywt:r})}}return i}var gG={1:1,2:3,3:2,4:4},wG="urn:scte:dash:cc:cea-608:2015",vG="urn:scte:dash:cc:cea-708:2015";var mG=class extends os{fa(){return new pG(this.Lht&&this.Lht.va)}constructor(t,i,e){super(ct.xw),this.Lht=t,this.xut=i,this.qwt=e}},pG=class extends Os{constructor(t){super("activequalitychanged"),this.quality=t}},AG=[Tf.jh,$.Nw,Tf.fm],yG=class extends Mo{Kwt(t){const i=this.mdt.Ght;for(const e of i.Lt.Bot)if(i.tct.qut(t,e))return e}gn(){this.Vo(),this.Fm.fn(AG,this.Jwt)}constructor(t,i){super(),this.Jwt=t=>{const i=this.$wt,e=this.Kwt(t.currentTime)||this.mdt.Uht;e&&i!==e&&(this.$wt=e,e.Lht&&this.Co(new mG(e.Lht,null==e?void 0:e.va,null==i?void 0:i.va)))},this.Fm=t,this.Fm.yn(AG,this.Jwt),this.mdt=i}};function MG(t,i,e){const s=new mu(vh(t),new Bi),n=Mc.Ry(s,X.Kp);if(!n)return;const r=Mc.Ey(n.ly),o=bo(r,(t=>t.Av===X.$p)),h=bo(r,(t=>t.Av===X.zA));if(!o)return;const a=Mc.Ry(o.ly,X.iA);if(!a)return;const u=Mc.Ry(a.ly,X.nA);if(!u)return;const c=Mc.Ry(u.ly,X.rA);if(!c)return;const l=Mc.Ey(c.ly),d=bo(l,(t=>t.Av===X.oA));if(!d)return;const f=Mc.Yy(d.ly,X.oA,!1),_=new mu(vh(f.ly),new Bi);_.Ny(4);const g=Mc.Ey(_),w=[];for(const t of g){if(t.Av===X.DA||t.Av===X.EA)return;t.Av===X.cA?w.push({tvt:t,ivt:X.EA}):t.Av===X.yA&&w.push({tvt:t,ivt:X.DA})}if(!function(t,i){return void 0===t&&void 0!==i&&i.length>0}(h,i)&&0===w.length)return;let v=iw(t);const m=bo(r,(t=>t.Av===X.aA)),p=m?Mc.Ry(m.ly,X.uA):void 0,A=p?function(t){const i=t.ly.$A();return i.Ny(4),i.Ny(4),i.vy()}(p):1,y=bo(l,(t=>t.Av===X.hA));y&&function(t,i,e){const s=SG(vh(t),i),n=Mc.jy(s,new Bi),r=n.ly;r.Ny(4);const o=r.vy();for(let t=0;t<o;t++){r.Ny(4),r.Ny(4);const t=r._y.$A(),i=r.vy();tc(r.ly,t,i+e)}}(v,y,w.length),p&&function(t,i,e){const s=SG(vh(t),i),n=Mc.jy(s,new Bi),r=n.ly;r.Ny(4),r.Ny(4),tc(r.ly,r._y,e)}(v,p,1),v=function(t,i,e,s){if(e||!s)return t;let n=t;for(const t of s)n=bG(n,i,new j(t));return n}(v,n,h,i);const M=[n,o,a,u,c,d];for(let t=w.length-1;t>=0;t--){const i=w[t];v=TG(v,i.tvt,d,M,i.ivt,e)}return{evt:v,svt:{nvt:w.length,Gb:A}}}function bG(t,i,e){const s=K_(t,e,i.ly.ly.byteOffset+i.ly.ly.byteLength);return NG(SG(vh(s),i),e.byteLength),s}function TG(t,i,e,s,n,r){const o=function(t,i,e){0;const s=t.ly.ly,n=LG(),r=new j(s.byteLength+n.byteLength),o=vh(r);r.set(js(s),0),NG(o,n.byteLength),Ug(o,new Bi(OG),i),r.set(n,s.byteLength),Ug(o,new Bi(s.byteLength+xG),t.Av),e&&kg(o,new Bi(s.byteLength+CG),e);return r}(i,n,r),h=K_(t,o,i.ly.ly.byteOffset),a=vh(h);!function(t,i){const e=Mc.jy(t,new Bi),s=Mc.Yy(e.ly,X.oA,!1),n=vh(s.ly),r=n.getUint32(0);n.setUint32(0,r+i)}(SG(a,e),1);for(const t of s)NG(SG(a,t),o.byteLength);return h}function SG(t,i){const e=i.ly.ly.byteOffset;return Jg(t,e,e+i.ly.ly.byteLength)}function NG(t,i){const e=new Bi,s=es(t,e);if(0===s);else if(1===s){e.KA(4);const s=qi(t,e.$A());jg(t,e,s.add(i))}else e.JA(0),tc(t,e,s+i)}var IG=class extends Wu{start(t){this.wZ=t}transform(t){this.Yq(t),this.rvt()}flush(){this.Vq(),this.rvt()}$q(t){return t===X.kA}iK(t){let i=iw(js(t.ly.ly));const e=Mc.jy(vh(i),new Bi);i=DG(i,e,this.ovt),this.avt.push(i)}sK(t){this.avt.push(t)}rvt(){for(const t of function(t){if(t.length<2)return t;const i=[];let{buffer:e,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const o=t[r];e===o.buffer&&s+n===o.byteOffset?n+=o.byteLength:(i.push(new j(e,s,n)),({buffer:e,byteOffset:s,byteLength:n}=o))}return i.push(new j(e,s,n)),i}(this.avt))this.wZ.enqueue(t);To(this.avt)}constructor(t){super(),this.avt=[],this.ovt=t}};function DG(t,i,e){let s=t;const n=Mc.Ey(i.ly);for(let t=n.length-1;t>=0;t--){const r=n[t];r.Av===X.xA&&(s=EG(s,r,i,e))}return s}function EG(t,i,e,s){const n=SG(vh(t),i),r=Mc.jy(n,new Bi),o=Mc.Ey(r.ly),h=bo(o,(t=>t.Av===X.CA));if(!h)return t;const a=h.ly,u=a._y.$A(),c=a.vy(),{flags:l}=Rc(c);a.Ny(4),l.ey(Fs.BASE_DATA_OFFSET_PRESENT)&&a.Ny(8);const d=a._y.$A();if(l.ey(Fs.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const i=es(a.ly,d);return tc(a.ly,a._y,i+s.nvt),t}{tc(a.ly,u,c|Fs.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new j(4);vh(n).setUint32(0,s.Gb+s.nvt);const r=a.ly.byteOffset+d.Ku;for(const t of o.filter((t=>t.Av===X.OA)))kG(t,n.byteLength);for(const s of[h,i,e])NG(SG(vh(t),s),n.byteLength);return K_(t,n,r)}}function kG(t,i){const e=t.ly,s=e.vy(),{flags:n}=Rc(s);if(e.Ny(4),n.ey(N_.DATA_OFFSET_PRESENT)){const t=e.$A().vy();tc(e.ly,e._y,t+i)}}var LG=ei((()=>new j([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),xG=16,CG=64,OG=4,jG=[hi.ha,Tf.nm,Tf.hm,Tf.lm,Tf.Tv],RG=class extends Mo{get Not(){return this.Iot}get o(){return this.uS}get O0(){return this.j0}get nt(){return this.uvt}get Adt(){return function(t){const i=29.97,e=1024,s=44100;return t===Jt.WA?s/e:i}(this.j0)}get pdt(){return 1/this.Adt}get Rt(){return Boolean(this.Iot&&this.Iot.Rt)}get wq(){const t=this.mdt?this.mdt.Ght.wq.Wut:Ri.oU();return this.cvt().YB(t)}get O_(){let t=this.lvt();const i=this.dvt;return void 0!==i&&t.PB().gr(i)&&(t=t.YB(Ri.nU(i))),t}get Qut(){return bh(this.lvt(),this.wq.YB(this.fvt)).FB(2*this.pdt)}get fvt(){const t=this.dvt;if(t&&isFinite(t)){const i=this._vt.jn;if(isFinite(i)&&t<i)return new Ri([t,i],[!1,!0])}return Ri.oU()}get Ig(){const t=this.Iot;if(!t)return Ri.nU(0);const i=t.Out.ydt,e=t.Out.Mdt;if(void 0===e||void 0===i)return Ri.nU(0);const s=e;let n=i>=t.Out.bct.jn?_.max(i,this.jn):i;return n=_.max(s,n),Ri.rU(s,n).PB()}get _z(){return this.Qut.Jm(this.U_)}get Vut(){return this._vt.Vut}get U_(){return this.Fm.U_}get Cn(){return this.Iot?this.Iot.Out.bct.Cn:NaN}get jn(){const t=this.gvt(),i=this.dvt;return void 0===t?NaN:void 0!==i?i:t}gvt(){var t;return null==(t=this.Iot)?void 0:t.Out.bct.jn}get Ti(){return this._vt.Ti}get ji(){return this._vt.ji}get wvt(){return this.dvt}eat(){return void 0!==this.mdt&&this.mdt.eat}Gut(){if(void 0===this.dvt)return!1;const t=this.lvt().PB(),i=t.WB(this.dvt);return!(i<0)&&t.Cn(i)!==this.dvt}x0(){const t=this._vt.Vut,i=this.lvt().Sn(t);this.dvt=i.U>0?i.jn(i.U-1):0;const e=t.jn(0);isFinite(e)&&this.dvt<e&&this.mq(this.dvt,e),this.vvt()}async elt(t,i,e,s){const n=e.Wrt.pI,r=this.mvt(t,i,e,n,s),o=this.pvt(t,i,e,n,s),[h]=await Wr([o,r]);return h}async mvt(t,i,e,s,n){if(!eo(e.aG))return;let r;if(t.Av===Lu.DD){const i=t.ly.eut(),e=await i.GR(n);r=new j(e)}else r=new j(t.ly.bot);const o=[];if(void 0!==this.Avt&&(this.Avt.elt(r,i.MS,s),o.push(this.Avt)),void 0!==this.yvt){const t=e.Mct(i);this.yvt.elt(r,i.MS,i.bS,s,e.Lht,t),o.push(this.yvt)}Lp(this.O_,o)}async pvt(t,i,e,s,n){var r;let o;if(Vr(n),t.Av===Lu.DD){let i=t.ly.VW;this.Mvt&&(i=function(t,i){return t.pipeThrough(new Wa(new IG(i)))}(i,this.Mvt)),o={Av:Lu.DD,ly:i}}else{let i=new j(t.ly.bot);this.Mvt&&(i=function(t,i){let e=iw(t);const s=new mu(vh(e),new Bi),n=Mc.Ey(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.Av===X.kA&&(e=DG(e,s,i))}return e}(i,this.Mvt)),o={Av:Lu.jZ,ly:i}}const h={F7:i.MS,ct:i.ct,pI:s,y$:null==(r=e.Lht)?void 0:r.Xw},a=this.xrt.O_;await this.bvt(),await this.xrt.V$(o,h,n);return function(t,i,e,s){let n,r,o=i.VB(t.PB());o=o.VB(e.VB(i)),!1;0===o.U?(n=s.bS,r=n):(n=o.Cn(0),r=o.jn(0));return{Llt:n,xlt:r}}(a,this.xrt.O_,this.xrt.R0,i)}async Grt(t,i,e){var s;Vr(e),this.yvt&&this.yvt.Grt(new j(t.bot));let n=new j(t.bot);if(this.Tvt(i)){const t=this._vt.Svt;let i,e=[];t&&(e=Pe(t.Nvt,(t=>t.KP)),i=t.Ivt._R?eI(t.Ivt._R):void 0);const s=MG(n,e,i);s?(this.Mvt=s.svt,n=s.evt):this.Mvt=void 0}const r={Av:Lu.jZ,ly:n};await this.bvt(),await this.xrt.X$(r,{y$:null==(s=i.Lht)?void 0:s.Xw},e)}nlt(t,i,e){return this.xrt.rS(t,i,e)}mq(t,i){this.xrt.B0(t,i)}pq(t,i){this.xrt.U0(t,i)}lvt(){return this.xrt?this.xrt.O_:Ri.oU()}cvt(){return this.xrt?this.xrt.R0:Ri.oU()}Dvt(){return this.xrt?this.xrt.rS(0,1/0):Promise.resolve()}Evt(){return this.xrt&&(this.xrt.fn(In.CZ,this.Ds),this.xrt=void 0),Promise.resolve()}async kvt(t){var i;const e=vn.Jct(null!=(i=t.rdt)?i:t.Bot,this.Yct).aG;this.xrt||(this.xrt=this._vt.Lvt(e),this.xrt.yn(In.CZ,this.Ds),this.qct=new BF(this.xrt)),await this.bvt()}$n(t,i){const e=new Bd;i&&e.w_(i),this.dE.g_(),this.dE=e;const s=this.xvt(t,this.Cvt,e.f_);return this.Cvt=s,s}Ovt(t){if(Ai(this.jvt,O.CEA608))return;const i=t.Out.Wlt;if(function(t){return t.some((t=>t.irt===wG||t.irt===vG))}(i)){this.yvt=new lG(this.oE);const t=function(t){const i=[];for(const e of t)if(e.irt===wG){const t=UR(e.lT);for(const e of t)i.push(e)}else if(e.irt===vG){const t=_G(e.lT);for(const e of t)if(e.M8<=4){const t=gG[e.M8];i.push(ol({},e,{M8:t}))}}return i}(i);for(const i of t)this.yvt.Qwt(i);this.uvt.tz(this.yvt.Z)}}async xvt(t,i,e){Vr(e),i&&await i.catch(Br),this.Iot===t&&this.Rvt||(await this.Pvt(),Vr(e),await this.Dvt(),Vr(e),t&&await this.hE(t))}async Pvt(){const t=this.Iot;this.Iot=void 0,this.Rvt=!1,this.dvt=void 0,t&&(t.fn(ct.Ow,this.zvt),t.ddt(!1),t.fn(ct.NO_QUALITY,this.Ds)),this.Bvt&&(this.Bvt.gn(),this.Bvt=void 0),this.mdt&&(await this.mdt.gn(),this.mdt=void 0),this.yvt&&(this.uvt.sz(this.yvt.Z),await this.yvt.gn())}async hE(t){this.Iot=t,this.Ovt(t),t.yn(ct.Ow,this.zvt),t.yn(ct.NO_QUALITY,this.Ds),await this.kvt(t),this.mdt=this.Uvt(t),this.mdt.yn(jG,this.Ds),this.mdt.yn("xht",this.vvt),this.mdt.Wht=t.rdt,this.Bvt=new yG(this.Fm,this.mdt),this.Bvt.yn(ct.xw,this.tdt),t.ddt(!0),this.Rvt=!0}Uvt(t){return new PF(this,this.Fm,this.Fm,this.aE,this.wU,this.Glt,this.rut,this.Zct,this.Yct,this.qct,this.Mlt).G7(t)}async tr(t){this.dE.g_(),this.Cvt&&(await this.Cvt.catch(Br),this.Cvt=void 0),await this.Pvt(),t||await this.Dvt(),await this.Evt()}async Qvt(){await this.Pvt()}async Fvt(t){var i;const e=null==(i=this.mdt)?void 0:i.Ght.tct.Hut(t);if(e&&e.U>0){await this.aat();for(let t=0;t<e.U;t++){var s;await(null==(s=this.xrt)?void 0:s.rS(e.Cn(t),e.jn(t)))}await this.dat()}}Yvt(t){const i=t.Lt.rdt;if(void 0===i)return this.Gvt(t);if(i.some((t=>this.qct.FZ(t))))return this.Gvt(t);this.Co(new Os("Vvt"))}Gvt(t){this.mdt&&this.Iot&&this.Iot===t.Lt&&(this.mdt.Wht=this.Iot.rdt)}async aat(t){this.mdt&&await this.mdt.aat(t)}async dat(t){this.mdt&&await this.mdt.dat(t)}wX(){const t=this.O_.sU;return this.wU.wX(t)}bvt(){const t=this._vt.Vut,i=_.max(0,t.Cn(0)-.1),e=t.jn(0)+.01;return this.xrt.u0(i,e)}Tvt(t){if(!eo(t.aG))return!1;if(this._vt.j3)return!0;return void 0!==this._vt.Svt}async gn(t){this.Vo();try{await this.tr(t),await this.Qvt()}catch(t){}}constructor(t,i,e,s,n,r,o,h,a,u,c,l){super(),this.Iot=void 0,this.mdt=void 0,this.Rvt=!1,this.dE=new Bd,this.Cvt=void 0,this.dvt=void 0,this.xrt=void 0,this.qct=new UF,this.Mvt=void 0,this.yvt=void 0,this.uvt=new vl([]),this.vvt=()=>{!this.eat()&&this.Gut()&&this._vt.vvt()},this.tdt=t=>{this.Iot.tdt(t),this.Co(new hY(t.xut,t.qwt))},this.zvt=t=>{this.Yvt(t)},this.uS=function(){const t=nY;return nY+=1,t}(),this.j0=t,this.aE=s,this.wU=n,this._vt=i,this.Fm=e,this.rut=r,this.oE=o,this.Avt=h,this.Zct=a,this.Yct=a?Lw(t,a):void 0,this.Mlt=u,this.jvt=c,this.Glt=l}};var PG,zG=class extends Mo{oX(t,i){return this.Wvt(t,i)}async Wvt(t,i){for(const i of t)this.Hvt(i);await this.$n(i);for(const t of this.Zvt.Xvt)t.Av===Jt.Ru&&(t.Bot&&0!==t.Bot.length?await this.qvt.hE(t):this.Co(new eY("No supported representation found in the AdaptationSet with mimetype : "+t.Av)))}get Xw(){return this.cS}get ct(){return this.Fm.ct}Kvt(t){return new RG(t,this,this.Fm,this.aE,this.wU,this.rut,this.oE,this.Avt,this.Jvt,this.Mlt,this.jvt,this.Glt)}eat(){return this.kdt.some((t=>t.eat()))}Gut(){return 0!==this.kdt.length&&this.kdt.every((t=>t.Gut()))}vvt(){this.$vt()&&this.Co(new sY)}Lvt(t){if(I(t,"audio")){if(this._0.I1)return this._0.I1}else if(I(t,"video")&&this._0.D1)return this._0.D1;throw new g("Cannot allocate source buffer for mime type "+t)}tmt(t){t.yn([hi.ha,Tf.Kv,Tf.nm,Tf.hm,Tf.lm,Tf.Tv],this.Ds),t.yn(In.CZ,this.imt),t.yn("Vvt",this.Ds)}get Rt(){return this.kdt.some((t=>t.Rt))}async emt(t){await Promise.all(this.kdt.map((i=>i.gn(t)))),To(this.kdt)}get ht(){return this.YT}get O_(){if(0===this.kdt.length)return Ri.oU();const t=this.kdt.map((t=>t.O_));let i=Ri.rU(0,1/0);for(const e of t)i=i.Sn(e);if(0===i.U)return i;if(this.Gut()){const t=i.Sn(this.Vut);if(0===t.U)return i;const e=t.jn(t.U-1);let s=0;for(const t of this.kdt)s=_.max(s,t.wvt);e<=s&&(i=i.YB(new Ri([e,s],[!0,!0])))}return i}get j3(){return this.Fm.j3}get U_(){return this.Fm.U_}get Svt(){return this.smt}get jn(){if(this.nmt){const t=this.ct;if(!S(t)&&t!==pu)return t}if(!this.kdt.length)return NaN;let t=0;for(const i of this.kdt)t=_.max(t,i.jn);return t}get nmt(){const t=this.Zvt.jlt;if(t.Av===Vs.Sj)return!1;const i=t.omt;return 0!==i.length&&this.Zvt===i[i.length-1]}get Ig(){if(!this.kdt.length)return Ri.oU();let t=new Ri([0,1/0]);for(const i of this.kdt)t=t.Sn(i.Ig);if(t.U>0&&this.nmt&&isFinite(this.ct)){const i=this.ct,e=t.jn(t.U-1);i>e&&(t=t.YB(Ri.rU(e,i).PB()))}return t}get yc(){return this.Zvt}get nt(){return this.Dl}get rt(){return this.VT}get ji(){return this.vu.ji}get Ti(){return this.vu.Ti}get _z(){const t=this.U_,i=this.O_,e=i.WB(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get Vut(){const t=this.Zvt.Cn,i=this.nmt?1/0:this.Zvt.jn;return Ri.rU(t,i)}$vt(){if(this.eat())return!1;if(!this.Gut())return!1;const t=this.O_;if(0===t.U)return!1;const i=this.U_;if(this.nmt)return t.Cn(t.U-1)<=i;{const e=t.Sn(this.Vut);if(0===e.U)return!0;const s=e.Cn(e.U-1),n=e.jn(e.U-1)+.1;return s<=i&&i<=n}}get hmt(){return this.amt}async aat(t){this.amt||(this.amt=!0,await Promise.all(this.kdt.map((i=>i.aat(t)))))}async dat(t){this.amt&&(this.amt=!1,await Promise.all(this.kdt.map((i=>i.dat(t)))))}async gn(t){this.Fm.fn(Tf.gm,this.umt),this.Fm.fn(Tf.Iv,this.cmt),this.Vo(),this.Zvt.fn(ts.Dht,this.Ds),this.lmt.g_(),this.Cvt&&(await this.Cvt.catch(Br),this.Cvt=void 0),await this.emt(t),await this.qvt.gn(),this.YT.gn(),this.VT.gn(),this.Dl.gn(),this.dmt()}Hvt(t){this.fmt.push(t),t.yn("_mt",this.gmt);const i=t.Av===Jt.WA?this.YT:this.VT;for(const e of t.Z)i.tt(e)}wmt(t){const i=t.Av===Jt.WA?this.YT:this.VT;for(const e of t.Z)i.it(e),e.gn();t.gn(),jn(this.fmt,t)}dmt(){for(let t=this.fmt.length-1;t>=0;t--)this.wmt(this.fmt[t])}get vmt(){return this.fmt.map((t=>t.Not)).filter(Ks)}get mmt(){return this.kdt.map((t=>t.Not)).filter(Ks)}$n(t,i){return this.lmt.g_(),this.lmt=new Bd,i&&this.lmt.w_(i),this.Cvt=Fd(this.nst(t,this.Cvt,this.lmt.f_),this.lmt).catch(this.pmt),this.Cvt}async nst(t,i,e){i&&await i.catch(Br),Vr(e);const s=[],n=this.kdt.slice(),r=t.slice();To(this.kdt);for(const t of n){const i=t.Not;i&&Ai(r,i)?(this.kdt.push(t),s.push(t.$n(i,e)),jn(r,i)):(this.Dl.sz(t.nt),await t.gn(),Vr(e))}for(const t of r){const i=this.Kvt(t.Zht);this.Dl.tz(i.nt),this.kdt.push(i),this.tmt(i),s.push(i.$n(t,e))}await Promise.all(s)}async GZ(t,i,e){this._0!==e&&(this._0=e,await this.emt(!1)),await this.$n(t),this.smt=i}async Amt(t){for(const i of this.mmt)for(const e of i.Out.Bot){if((e.trt||[]).some((i=>i._R&&Z_(Ju(t),eI(i._R))))&&!e.ldt){e.ldt=!0,e.Lht&&i.Zlt(e.Lht);for(const t of this.kdt)await t.Fvt(e);this.Co(new Yu(new ss(qa.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions")))}}}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d){super(),this.YT=new Ds,this.VT=new Ds,this.fmt=[],this.lmt=new Bd,this.amt=!0,this.kdt=[],this.Cvt=void 0,this.imt=hu((()=>{this.Co(new Gt(this.U_))}),350),this.gmt=t=>{const i=t.ymt.Not;if(i)for(const t of this.fmt){var e;t.Not&&t.Not!==i&&t.Av===(null==(e=i.idt)?void 0:e.Av)&&(t.fn("_mt",this.gmt),t.Not.Rt=!1,t.yn("_mt",this.gmt))}this.Ds(t)},this.pmt=t=>{be(t)||this.Co(new as(new ao(qa.MEDIA_LOAD_ERROR,t.message,t)))},this.umt=t=>{const i=t.d3;i&&this.Amt(i)},this.cmt=t=>{const i=t.d3;if(i)for(const t of this.mmt)for(const e of t.Out.Bot){const s=(e.trt||[]).some((t=>t._R&&Z_(Ju(i),eI(t._R))));e.ldt&&s&&(e.ldt=!1,e.Lht&&t.Jlt(e.Lht))}},this.aE=e,this.wU=s,this.rut=n,this.Fm=t,this.cS=Q(),this.fmt=[],this.Zvt=o,this.smt=h,this.oE=u,this.qvt=new iY(t,e,s,n,u),this.Dl=new vl([this.qvt.nt]),this.Mlt=l,this.jvt=d,this.Zvt.yn(ts.Dht,this.Ds),this.vu=a,this._0=i,this.Glt=r.lowLatency,this.Avt=c,this.Jvt=r.abr,this.Fm.yn(Tf.gm,this.umt),this.Fm.yn(Tf.Iv,this.cmt)}},BG=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,UG=class t{static Wy(i){const e=i.match(BG);if(!e)throw new g("The given value could not be parsed as a valid DateTimeInterval");const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,o=Number(e[4])||0,h=Number(e[5])||0,a=Number(e[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*o+60*h+a)}get $dt(){return A.$N(this.Mmt,1e3)}bmt(){return this.Mmt}Tmt(){return 1e3*this.Mmt}constructor(t){this.Mmt=t}};!function(t){t.Smt="progressive",t.Nmt="interlaced",t.jT="unknown"}(PG||(PG={}));var QG=class{JS(){return this.Imt/this.Dmt}constructor(t,i){this.Imt=t,this.Dmt=i}},FG=/^(?:true|false)$/i,YG=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function Ih(t){if(void 0!==t)return UG.Wy(t)}function GG(t){if(void 0===t)return;const i=t.match(YG);if(!i)throw new g("The given value could not be parsed as a valid Date");const[,e,s,n,r,o,h,a,u,c,l,d]=i,f=("-"===e?-1:1)*Number(s),w=Number(n)-1,v=Number(r),m=Number(o);let p=Number(h);const A=Number(a),y=Number("0."+(u||"")),M=_.round(1e3*y);if(c){p-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const b=new Date(Date.UTC(f,w,v,m,p,A,M));if(S(b.getTime()))throw new g("The given value could not be parsed as a valid Date");return b}function VG(t){if(!t)return;const i=/(\d+)-(\d+)/.exec(t);return i?[is(i[1]),is(i[2])]:void 0}function WG(t){if(void 0!==t){if(!S(Number(t)))try{return ii.fromString(t,!0)}catch(t){}throw new g("The given value could not be parsed as a valid unsigned long")}}function is(t){if(void 0===t)return;const i=Number(t);if(!S(i))return i;throw new g("The given value could not be parsed as a valid Number")}function HG(t){if(void 0===t)return;const i=t.split("/"),e=Number(i[0]),s=Number(i[1]||1);if(!S(e)&&!S(s))return new QG(e,s);throw new g("The given value could not be parsed as a valid frame rate")}function q(t){if(void 0!==t){if(FG.test(t))return"true"===t.toLowerCase();if(!S(x(t)))return Boolean(x(t));throw new g("The given value could not be parsed as a valid Boolean.")}}function XG(t){return{zu:t.PR,Emt:q(t.$I("availabilityTimeComplete")),kmt:is(t.$I("availabilityTimeOffset"))}}function ZG(t){return t.map(XG)}function qG(t){const i=oV(t),e=function(t,i,e,s){let n=t.tD(e,i);return void 0===n&&(n=t.$I(s+":"+i)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=qm(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=J_(n.PR)),!s){const i=qm(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==i&&(s=function(t){const i=$s(t.PR),e=new j([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=i.length,n=12+e.length+4+s,r=new ArrayBuffer(n),o=new j(r),h=new DataView(r),a=new Bi;tc(h,a,n),tc(h,a,1886614376),tc(h,a,0),kg(h,a,e),tc(h,a,s),kg(h,a,i),!1;return o.buffer}(i))}return{_R:e,Lmt:s,irt:i.irt,lT:i.lT}}function KG(t){return{xmt:t.$I("sourceURL"),Sat:VG(t.$I("range"))}}function JG(t,i){const e=t.$I("d"),s=t.$I("t"),n=is(t.$I("r"));i.push({ct:e,MS:s,Cmt:n})}function $G(t){return{aut:t.$I("index"),Omt:VG(t.$I("indexRange")),wM:t.$I("media"),jmt:VG(t.$I("mediaRange"))}}function tV(t){const i=eV(t),e=function(t){const i=t.map($G);return i.length>0?i:void 0}(t.XI("SegmentURL"));return ol({},i,{Rmt:e,Pmt:t.$I("xlink:href"),zmt:t.$I("xlink:actuate")})}function iV(t){const i=q(t.$I("availabilityTimeComplete")),e=is(t.$I("availabilityTimeOffset")),s=VG(t.$I("indexRange")),n=q(t.$I("indexRangeExact")),r=t.XI("Initialization");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.WR+" element can not have more than one Initialization element.");const o=1===r.length?KG(r[0]):void 0,h=WG(t.$I("presentationTimeOffset")),a=t.XI("RepresentationIndex");if(a.length>1)throw new g("The provided MPEG-DASH document's "+t.WR+" element can not have more than one RepresentationIndex element.");return{Emt:i,kmt:e,Omt:s,Bmt:n,Umt:o,Qmt:h,Fmt:1===a.length?KG(a[0]):void 0,Ymt:Ih(t.$I("timeShiftBufferDepth")),cM:is(t.$I("timescale"))}}function eV(t){const i=iV(t),e=t.XI("BitstreamSwitching"),s=e.length>0?KG(e[0]):void 0,n=is(t.$I("duration")),r=t.XI("SegmentTimeline");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.WR+" element can not have more than one SegmentTimeline element.");const o=1===r.length?function(t){const i=[],e=t.XI("S");for(const t of e)JG(t,i);return i}(r[0]):void 0;return ol({},i,{Gmt:s,ct:n,Wrt:o,Vmt:is(t.$I("startNumber")),Wmt:is(t.$I("endNumber"))})}function sV(t){return{Hmt:function(t){if(!t)return;const i=t.split(/\s/);return i.length>1?(i.length=2,i.map(is)):1===i.length?i.map(is)[0]:void 0}(t.$I("audioSamplingRate")),$nt:t.$I("codecs"),Xmt:q(t.$I("codingDependency")),trt:function(t){if(0!==t.length)return t.map(qG)}(t.XI("ContentProtection")),Zmt:function(t){return t.map(hV)}(t.XI("EssentialProperty")),qmt:function(t){return t.map(aV)}(t.XI("SupplementalProperty")),Adt:HG(t.$I("frameRate")),Ti:is(t.$I("height")),Kmt:is(t.$I("maxPlayoutRate")),Jmt:is(t.$I("maximumSAPPeriod")),aG:t.$I("mimeType"),$mt:t.$I("profiles"),tpt:t.$I("sar"),ipt:function(t){switch(t){case PG.Smt:case PG.Nmt:case PG.jT:return t;default:return}}(t.$I("scanType")),ept:t.$I("segmentProfiles"),spt:is(t.$I("startWithSAP")),ji:is(t.$I("width"))}}function nV(t){const i=ZG(t.XI("BaseURL")),e=t.XI("SegmentBase");if(e.length>1)throw new g("The provided MPEG-DASH document's "+t.qI+" element can not have more than one SegmentBase element.");const s=1===e.length?iV(e[0]):void 0,n=function(t){const i=t.map(tV);return i.length>0?i:void 0}(t.XI("SegmentList")),r=t.XI("SegmentTemplate");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.qI+" element can not have more than one SegmentTemplate element.");const o=1===r.length?function(t){return ol({},eV(t),{npt:t.$I("bitstreamSwitching"),rpt:t.$I("index"),opt:t.$I("initialization"),hpt:t.$I("media")})}(r[0]):void 0;return{upt:i,cpt:s,lpt:n,dpt:o}}function rV(t){const i=sV(t),e=nV(t),s=is(t.$I("bandwidth")),n=t.$I("dependencyId"),r=t.$I("id"),o=t.$I("mediaStreamStructureId"),h=is(t.$I("qualityRanking"));if(t.XI("SegmentBase").length>1)throw new g("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return ol({},i,e,{GP:s,fpt:n,o:r,_pt:o,gpt:h})}function oV(t){return{irt:t.$I("schemeIdUri"),lT:t.$I("value")}}function hV(t){return oV(t)}function aV(t){return oV(t)}function uV(t){return oV(t)}function cV(t){return oV(t)}function lV(t){var i;const e=sV(t),s=nV(t),n=function(t){return t.map(cV)}(t.XI("Accessibility")),r=q(t.$I("bitstreamSwitching")),o=t.$I("contentType"),h=is(t.$I("group")),a=is(t.$I("id")),u=(null==(i=t.XI("Label")[0])?void 0:i.PR)||"",c=t.$I("lang"),l=is(t.$I("maxBandwidth")),d=HG(t.$I("maxFrameRate")),f=is(t.$I("maxHeight")),_=is(t.$I("maxWidth")),w=is(t.$I("minBandwidth")),v=HG(t.$I("minFrameRate")),m=is(t.$I("minHeight")),p=is(t.$I("minWidth")),A=t.$I("par"),y=function(t){return t.map(rV)}(t.XI("Representation"));if(0===y.length)throw new g("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const M=function(t){return t.map(uV)}(t.XI("Role")),b=q(t.$I("segmentAlignment"))||!1,T=is(t.$I("selectionPriority")),S=T||1,N=q(t.$I("subsegmentAlignment"))||!1;let I;try{I=is(t.$I("subsegmentStartsWithSAP"))}catch(t){}return ol({},e,s,{Wlt:n,Gmt:r,Nz:o,idt:h,o:a,kh:u,gs:c,wpt:l,vpt:d,mpt:f,ppt:_,Apt:w,ypt:v,Mpt:m,bpt:p,Tpt:A,Bot:y,Sdt:M,Spt:b,uB:S,Npt:N,Ipt:I,Dpt:t.$I("xlink:actuate")||"onRequest",Ept:t.$I("xlink:href")})}function dV(t){const i=WG(t.$I("presentationTime"))||ii.ZERO,e=WG(t.$I("duration")),s=is(t.$I("id")),n=function(t){const i=t.ZI,e={};for(let t=0;t<i.length;t++)e[i[t].l]=i[t].lT;return e}(t),r=t.PR;return{dT:i,ct:e,o:s,ZI:n,ly:""!==r.trim()?r:t.$I("messageData")||""}}function fV(t){return{Ept:t.$I("xlink:href"),Dpt:t.$I("xlink:actuate"),irt:t.$I("schemeIdUri"),lT:t.$I("value"),cM:is(t.$I("timescale")),Qmt:WG(t.$I("presentationTimeOffset")),uG:t.XI("Event").map(dV)}}function _V(t){const i=nV(t),e=t.XI("AssetIdentifier");if(e.length>1)throw new g("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===e.length?function(t){return oV(t)}(e[0]):void 0,n=function(t){return t.map(lV)}(t.XI("AdaptationSet")),r=q(t.$I("bitstreamSwitching")),o=Ih(t.$I("duration")),h=function(t){return t.map(fV)}(t.XI("EventStream")),a=t.$I("id"),u=Ih(t.$I("start")),c=(t.XI("Subset"),t.$I("xlink:href"));return ol({},i,{kot:n,kpt:s,Gmt:r,ct:o,Lpt:h,o:a,Cn:u,Dpt:t.$I("xlink:actuate"),Ept:c})}function gV(t){const i=t.$I("schemeIdUri");if(!i)return;return{irt:i,lT:t.$I("value")}}function wV(t,i){const e=GG(t.$I("availabilityEndTime")),s=GG(t.$I("availabilityStartTime")),n=ZG(t.XI("BaseURL")),r=t.$I("id"),o=function(t){return t.map((t=>""+t.PR))}(t.XI("Location")),h=Ih(t.$I("maxSegmentDuration")),a=Ih(t.$I("maxSubsegmentDuration")),u=Ih(t.$I("mediaPresentationDuration")),c=(t.XI("Metrics"),Ih(t.$I("minBufferTime")));if(!c)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=Ih(t.$I("minimumUpdatePeriod")),d=function(t){return t.map((t=>_V(t)))}(t.XI("Period"));if(!d.length)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.$I("profiles");if(!f)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=GG(t.$I("publishTime")),w=Ih(t.$I("suggestedPresentationDelay")),v=Ih(t.$I("timeShiftBufferDepth")),m=function(t){switch(t){case Vs.Tj:case Vs.Sj:return t;default:return}}(t.$I("type")),p=function(t){const i=[];for(const e of t){const t=gV(e);t&&i.push(t)}return i}(t.XI("UTCTiming")),A=function(t){if(0===t.length)return;const i=t[0],e=i.XI("Latency");if(0===e.length)return;const s=function(t){const i=t[0],e=is(i.$I("target"));if(void 0===e)return;const s=is(i.$I("min")),n=is(i.$I("max"));return{xpt:e,XN:s,HN:n}}(e);if(void 0===s)return;const n=function(t){if(0===t.length)return;const i=t[0],e=is(i.$I("max")),s=is(i.$I("min"));return{XN:s,HN:e}}(i.XI("PlaybackRate"));return{Cpt:s,gg:n}}(t.XI("ServiceDescription"));return{Opt:e,jpt:s,upt:n,o:r,Rpt:o,Ppt:i,zpt:h,Bpt:a,Upt:u,Qpt:c,Fpt:l,omt:d,$mt:f,Ypt:_,Gpt:w,Ymt:v,Av:m,Vpt:p,Wpt:A}}var vV=class{Hpt(t,i){return function(t,i){if(!t)throw new g("The provided MPEG-DASH document does not contain a valid MPD root element.");return wV(t,i)}(ra.KI(t).JI,i)}};function mV(t){return{get bandwidth(){return t.GP},get codecs(){return t.$nt},get id(){return t.o},get uid(){return t.Xw},get name(){return t.kh},get averageBandwidth(){return t.Xpt},get label(){return t.kh},set label(i){t.kh=wo(i)},get available(){return t.snt},get score(){return t.Zpt},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}function Co(t){return ro(mV(t),{get height(){return t.Ti},get width(){return t.ji},get frameRate(){return t.Adt},get firstFrame(){return t.qpt}})}function pV(t){return ro(mV(t),{get audioSamplingRate(){return t.Hmt}})}var AV=class extends Os{constructor(t){super("update"),this.quality=t}},yV=class extends Mo{get kh(){return this.lS}set kh(t){this.lS!==t&&(this.lS=t,this.Co(new AV(this.va)))}get Xpt(){}get snt(){return this.Kpt}get Zpt(){}bD(){this.Kpt=!1,this.Co(new AV(this.va))}MD(){this.Kpt=!0,this.Co(new AV(this.va))}constructor(t,i,e,s,n){super(),this.o=t,this.GP=i,this.$nt=e,this.Jpt=n,this.Xw=kc(),this.lS=s||"",this.Kpt=!0}},MV=class extends yV{get va(){return this.Xa||(this.Xa=Co(this)),this.Xa}constructor(t,i,e,s,n,r,o,h,a=0){super(t,i,e,s,n),this.Adt=r,this.ji=o,this.Ti=h,this.qpt=a,this.Xa=void 0}},bV=class extends yV{get va(){return this.Xa||(this.Xa=pV(this)),this.Xa}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.Hmt=r,this.Xa=void 0}};var Dh=class extends Mo{get $pt(){const t=this.tAt();return null==t?void 0:t.Cn}get iAt(){const t=this.tAt();return null==t?void 0:t.jn}constructor(...t){super(...t),this.eAt=t=>{this.Co(t)}}},TV=class extends Dh{get Out(){return this.rat}get Hmt(){var t;return null!=(t=this.sAt.ly.Hmt)?t:this.Out.Hmt}get GP(){return this.sAt.ly.GP||0}get $nt(){const t=this.sAt.ly;return t.$nt?[t.$nt]:this.Out.$nt}get nAt(){const t=this.sAt.ly;return t.$nt?[t.$nt]:[]}get Vet(){return this.sAt.ly.$nt||this.Out.Vet}get Xmt(){return this.sAt.ly.Xmt||this.Out.Xmt}get trt(){return this.sAt.ly.trt||this.Out.trt}get Nz(){return this.aG+'; codecs="'+this.Vet+'"'}get Zmt(){const t=this.sAt.ly;return t.Zmt.length?t.Zmt:this.Out.Zmt}get va(){return this.Xa||(this.Xa=function(t){return{get id(){return t.o},get type(){return t.Av},get bandwidth(){return t.GP},get width(){return t.ji},get height(){return t.Ti},get frameRate(){var i,e;return null!=(e=null==(i=t.Adt)?void 0:i.JS())?e:NaN},get audioSamplingRate(){return t.Hmt}}}(this))}get Adt(){var t;return null!=(t=this.sAt.ly.Adt)?t:this.Out.Adt}get Ti(){return this.sAt.ly.Ti||this.Out.Ti}get o(){return this.sAt.ly.o||""}get Blt(){return this.rAt}set Blt(t){this.rAt=t}get zlt(){const t=this.sAt.oAt();if(t)return{zu:t.zu,Sat:t.Sat,tE:this.jlt.tE}}get Kmt(){return this.sAt.ly.Kmt||this.Out.Kmt||1}get Jmt(){return this.sAt.ly.Jmt||this.Out.Jmt}get jlt(){return this.bct.jlt}get aG(){return this.sAt.ly.aG||this.Out.aG}get bct(){return this.Out.bct}get $mt(){return this.sAt.ly.$mt||this.Out.$mt}get Lht(){return this.hAt}get tpt(){return this.sAt.ly.tpt||this.Out.tpt}get ipt(){return this.sAt.ly.ipt||this.Out.ipt}get aAt(){return this.sAt.aAt}get ept(){return this.sAt.ly.ept||this.Out.ept}get Wrt(){return this.sAt.Wrt}get spt(){return this.sAt.ly.spt||this.Out.spt}get Av(){const t=this.aG.split("/")[0];return"application"===t||"text"===t||Np(this.aG,this.$nt)?Jt.Ru:"video"===t?Jt.VA:"audio"===t?Jt.WA:"image"===t?Jt.OT:Jt.jT}get ji(){return this.sAt.ly.ji||this.Out.ji}get Ict(){return this.uAt}set Ict(t){this.uAt=t}get ldt(){return this.cAt}set ldt(t){this.cAt=t}zct(t){const i=ps(t)?this.sAt.lAt(t):this.sAt.zct(t);return{zu:i.zu,Sat:i.Sat,tE:this.jlt.tE}}dAt(){return this.sAt.dAt()}tAt(){return this.sAt.tAt()}fAt(){return this.sAt.fAt()}Ect(t){return this.sAt.Ect(t)}Lct(t,i,e){return this.sAt.Lct(t,this.jlt.tE,i,e)}Tlt(t){return ps(t)?this.Wrt._At(t,this.sAt):this.Wrt.Tlt(t)}Mct(t){return ps(t)?this.Wrt.gAt(t,this.sAt):this.Wrt.Mct(t)}gn(){this.sAt.fn(ts.Nht,this.eAt)}constructor(t,i){if(super(),this.Xa=void 0,this.rAt=void 0,this.uAt=!1,this.cAt=!1,this.rat=t,this.sAt=i,this.sAt.yn(ts.Nht,this.eAt),this.Av===Jt.VA){var e,s;const t=null!=(s=null==(e=this.Adt)?void 0:e.JS())?s:NaN;this.hAt=new MV(this.o,this.GP,this.Vet,"","",t,this.ji,this.Ti)}else this.Av===Jt.WA?this.hAt=new bV(this.o,this.GP,this.Vet,"","",this.Hmt):this.hAt=void 0}},SV=class extends Dh{get Wlt(){return this.sAt.ly.Wlt}get Hmt(){var t;return null!=(t=this.sAt.ly.Hmt)?t:-1}get $nt(){if(this.sAt.ly.$nt)return[this.sAt.ly.$nt];{const t=[];for(const i of this.Bot)i.nAt.length&&-1===t.indexOf(i.Vet)&&t.push(i.Vet);return t}}get Vet(){return this.$nt.join()}get Xmt(){return this.sAt.ly.Xmt}get trt(){return this.sAt.ly.trt}get Nz(){return this.aG+'; codecs="'+this.Vet+'"'}get Zmt(){return this.sAt.Zmt}get qmt(){return this.sAt.qmt}get Adt(){return this.sAt.ly.Adt}get idt(){return this.sAt.ly.idt}get Ti(){return this.sAt.ly.Ti||0}get o(){return this.sAt.ly.o}get kh(){return this.sAt.ly.kh||""}get Kmt(){return this.sAt.ly.Kmt}get Jmt(){return this.sAt.ly.Jmt}get jlt(){return this.bct.jlt}get aG(){return this.sAt.ly.aG||this.odt[0].aG}get bct(){return this.Zvt}get $mt(){return this.sAt.ly.$mt}get Bot(){return this.odt}get Sdt(){return this.sAt.ly.Sdt||[]}get tpt(){return this.sAt.ly.tpt}get ipt(){return this.sAt.ly.ipt}get ept(){return this.sAt.ly.ept}get uB(){return this.sAt.ly.uB}get spt(){return this.sAt.ly.spt}get Av(){const t=(this.sAt.ly.Nz||this.aG).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||Np(this.aG,this.$nt)?Jt.Ru:"video"===t?Jt.VA:"audio"===t?Jt.WA:"image"===t?Jt.OT:Jt.jT}get ji(){return this.sAt.ly.ji||0}get b8(){return this.sAt.ly.gs||""}get Mdt(){return this.$pt}get ydt(){const t=this.Mdt,i=this.iAt;if(void 0===t||void 0===i)return;const e=_.min(i,this.jlt.wAt);return _.max(t,e)}async Yn(t,i){if(0===this.odt.length){const e=this.sAt.Bot.map((e=>this.vAt(e,t,i)));this.odt=(await Promise.all(e)).filter(Ks)}this.mAt()}async vAt(t,i,e){const s=new TV(this,t),n=await i(s);if(Vr(e),n)return s}mAt(){if(!this.odt.length)throw new g("Detected an AdaptationSet without any supported Representations.")}tAt(){return this.sAt.tAt()}fAt(){return this.sAt.fAt()}gn(){this.sAt.fn(ts.Nht,this.eAt);for(const t of this.odt)t.gn();To(this.odt)}constructor(t,i){super(),this.odt=[],this.Zvt=t,this.sAt=i,this.sAt.yn(ts.Nht,this.eAt)}};function NV(t,i){const e=[];for(const s of i)for(const i of t)e.push(ra.Dh(i,s));return e}var mo=class{pAt(t){const i=t-this.Zvt.Cn;if(i<0||i>=this.Zvt.ct)return;const e=this.AAt();return void 0!==e&&Jn(e,i,1e-5)?this.yAt():this.MAt(i)}Dct(t){const i=t-this.Zvt.Cn;if(!(i<0))return this.bAt(_.min(i,this.Zvt.ct))}yAt(){return this.TAt(0)}SAt(){const t=this.Zvt.ct;if(isFinite(t))return this.bAt(t)}get NAt(){return this.Zvt.DAt.IAt&&void 0!==this.EAt()}dAt(t){if(this.Zvt.DAt.Av===Vs.Sj){if(this.NAt){const i=this.yAt(),e=this.EAt();if(void 0===i||void 0===e)return;return{kAt:t,LAt:i,xAt:e}}const i=this.CAt(t);if(!i)return;return{kAt:t,LAt:this.OAt(t),xAt:i}}{0;const i=this.yAt();if(i)return{kAt:t,LAt:i,xAt:this.SAt()}}}fAt(t,i){if(i){let t=this.Rlt(i.LAt);const e=this.jct(i.xAt);if(e){const i=this.Plt(e);(!t||i.getTime()<t.getTime())&&(t=i)}return t}{const i=this.yAt();if(i){const e=this.Plt(i);if(t.getTime()<e.getTime())return e}const e=this.Zvt.DAt.jpt;return t.getTime()<e.getTime()?e:void 0}}CAt(t){const i=(t.getTime()-this.Zvt.DAt.jpt.getTime())/1e3-this.Zvt.Cn+this.jAt;let e=this.bAt(Qh(i,0,this.Zvt.ct));if(!e)return;if(e=this.RAt(e,t),!e)return;let s=this.jct(e);for(;s&&this.Ylt(s,t);)e=s,s=this.jct(e);return e}OAt(t){let i;const e=this.PAt.Ymt;if(e){const s=(t.getTime()-this.Zvt.DAt.jpt.getTime())/1e3-this.Zvt.Cn-e.bmt();i=this.bAt(Qh(s,0,this.Zvt.ct)),i||(i=this.yAt())}else i=this.yAt();if(!i)return;if(i=this.RAt(i,t),!i)return;let s=this.Oct(i);for(;s&&this.Ylt(s,t);)i=s,s=this.Oct(i);return i}RAt(t,i){let e=t;for(;e&&this.Plt(e).getTime()>i.getTime();)e=this.Oct(e);if(!e)return;const s=this.Rlt(e);if(s&&s.getTime()<=i.getTime()){const t=this.Oct(e);for(t&&this.Ylt(t,i)&&(e=t);e;){if(this.Plt(e).getTime()>i.getTime())return;if(this.Ylt(e,i))break;e=this.jct(e)}if(!e)return}return e}Ylt(t,i){if(this.NAt)return!0;if(this.Plt(t).getTime()>i.getTime())return!1;const e=this.Rlt(t);return!(e&&i.getTime()>=e.getTime())}zAt(t,i){if(this.NAt)return!0;if(this.BAt(t).getTime()>i.getTime())return!1;const e=this.Rlt(t);return!(e&&i.getTime()>=e.getTime())}UAt(t,i,e){const s=zr(i,this.Ox)+this.Zvt.Cn;return{aut:t,QAt:i,MS:s,ct:e,bS:s+e}}BAt(t){return this.Zvt.DAt.Av===Vs.Sj?new Date(this.Zvt.DAt.jpt.getTime()+1e3*(t.MS+t.ct)):this.Zvt.DAt.jpt}Plt(t){const i=this.BAt(t);return this.Zvt.DAt.Av===Vs.Sj?new Date(i.getTime()-1e3*this.jAt):i}Rlt(t){let i=1/0;if(this.Zvt.DAt.Av===Vs.Sj){const e=this.PAt.Ymt;e&&(i=this.BAt(t).getTime()+1e3*t.ct+e.Tmt())}const e=this.Zvt.DAt.Opt;return e&&(i=_.min(i,e.getTime())),i===1/0?void 0:new Date(i)}FAt(t,i){return t.aut+i}get pI(){return this.Zvt.Cn-zr(this.YAt,this.Ox)}get Qmt(){return zr(this.YAt,this.Ox)}Ect(t){return!1}Lct(t,i,e,s,n){const r=this.GAt(t);if(!r)return Promise.reject(new g("Invalid segment"));const o=this.VAt(r.aut,i);return o?Promise.resolve(o):Jr(this.WAt(r.aut,i,e,s),n)}VAt(t,i){}WAt(t,i,e,s){return Promise.reject(new g("Not supported"))}Oct(t){const i=this.GAt(t);if(i)return this.TAt(i.aut-1)}jct(t){const i=this.GAt(t);if(i)return this.TAt(i.aut+1)}GAt(t){const i=this.TAt(t.aut);if(i&&i.MS===t.MS)return i;const e=this.pAt(t.MS);return e&&e.MS===t.MS?e:void 0}HAt(t,i){const e=this.xct(t);if(!e||!this.Ect(e.aut))return;const s=this.VAt(e.aut,i);return s?s.HAt(t):void 0}xct(t){return this.TAt(t.XAt)}Tlt(t){const i=this.GAt(t);return!!i&&0===i.aut}_At(t,i){const e=this.HAt(t,i);return!!e&&0===e.hut}Mct(t){const i=this.GAt(t);if(!i)return!1;const e=this.SAt();return!!e&&i.aut===e.aut}gAt(t,i){const e=this.HAt(t,i);if(!e)return!1;const s=this.SAt();if(!s||e.XAt!==s.aut)return!1;const n=this.VAt(e.XAt,i);return e.hut+1===n.U}h_(){}constructor(t,i){this.Zvt=t,this.PAt=i,this.Ox=i.cM,this.jAt=i.kmt,this.YAt=i.Qmt}},IV=class extends mo{TAt(t){if(t<0)return;const i=this.ZAt.multiply(t),e=zr(i,this.Ox),s=this.Zvt.ct;if(e>=s)return;const n=this.qAt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.UAt(t,i,s-e)}return isFinite(s)&&e+this.KAt>s?this.UAt(t,i,s-e):this.UAt(t,i,this.KAt)}AAt(){return 0}MAt(t){const i=_.floor(t/this.KAt),e=this.qAt();return void 0!==e&&i>=e?this.TAt(e):this.TAt(i)}bAt(t){if(t>=this.Zvt.ct){const t=_.ceil(this.Zvt.ct/this.KAt)-1,i=this.qAt();return void 0!==i&&t>=i?this.TAt(i):this.TAt(t)}return this.MAt(t)}qAt(){const t=this.PAt.Wmt;var i;if(void 0!==t)return t-(null!=(i=this.PAt.Vmt)?i:1);const e=this.PAt.JAt;return void 0!==e&&e>0?e-1:void 0}EAt(){if(isFinite(this.Zvt.ct))return this.SAt()}$At(t,i){return this.ZAt.multiply(t.aut+(i-1))}Yn(){}constructor(t,i){super(i,t);const e=t.tyt,s=t.ct;if(void 0===e||void 0===s)throw new g("MultipleSegmentBase does not have a segment duration specified.");this.ZAt=e,this.KAt=s}};function DV(t,i,e){const s=i.length;if(0===s)return-1;let n=0,r=s-1,o=t.iyt(i[n]),h=t.eyt(i[r]);for(;n<=r&&t.syt(o,e)<=0&&t.syt(e,h)<0;){const a=n+_.floor(t.nyt(e,o,h)*(r-n)),u=i[a],c=t.iyt(u),l=a+1<s?t.iyt(i[a+1]):t.eyt(u);if(t.syt(l,e)<=0)n=a+1,o=l;else{if(!(t.syt(e,c)<0))return a;r=a-1,h=c}}return-1}function EV(t,i){return DV(kV.lL,t,i)}var kV=class t{static get lL(){return null!=this.Jnt||(this.Jnt=new t),this.Jnt}iyt(t){return t.MS}eyt(t){return t.bS}syt(t,i){return t.compare(i)}nyt(t,i,e){return t.subtract(i).toNumber()/e.subtract(i).toNumber()}},LV=class extends mo{TAt(t){if(!(t<0))return t<this.ryt.length?this.ryt[t].nut:this.oyt(t-this.ryt.length)}AAt(){if(this.ryt.length>0)return zr(this.ryt[0].MS,this.Ox)}MAt(t){if(this.hyt&&zr(this.hyt.MS,this.Ox)<=t){const i=zr(this.hyt.MS,this.Ox),e=zr(this.hyt.ct,this.Ox),s=_.floor((t-i)/e);return this.oyt(s)}if(this.ryt.length>0&&Jn(t,zr(this.ryt[0].MS,this.Ox),1e-5))return this.ryt[0].nut;const i=EV(this.ryt,ii.fromNumber(t*this.Ox));return i<0?void 0:this.ryt[i].nut}bAt(t){if(!this.hyt&&this.ryt.length>0){const i=this.ryt[this.ryt.length-1];if(function(t,i,e){return vd(t,i,e)>=0}(t,zr(i.bS,this.Ox),1e-5))return i.nut}const i=this.AAt();return i&&t<i?this.ryt[0].nut:this.MAt(t)}EAt(){return isFinite(this.Zvt.ct)?this.SAt():this.TAt(this.ryt.length-1)}$At(t){return this.ayt(t)}oyt(t){if(!this.hyt)return;const i=this.hyt.MS,e=this.hyt.ct,s=i.add(e.multiply(t)),n=zr(s,this.Ox),r=this.Zvt.ct;if(n>=r)return;const o=this.ryt.length+t,h=_.min(zr(e,this.Ox),n+r);return this.UAt(o,s,h)}ayt(t){return t.QAt.add(this.YAt)}Yn(){const t=this.PAt.ly.Wrt;if(!t)throw new g("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.uyt(t)}uyt(t){const i=this.YAt;this.cyt(t,i);const e=this.lyt(t);this.dyt(t,i,e.fyt,e.XAt)}cyt(t,i){const e=this.ryt;if(0===t.length)To(e);else{const s=t[0],n=s.MS?ii.fromString(s.MS,!1).subtract(i):ii.ZERO;let r=0;for(;r<e.length&&e[r].MS.lessThan(n);)r++;r>0&&e.splice(0,r)}}lyt(t){const i=this.ryt,e=this.Wwt;let s=0,n=0;for(;s<t.length&&n<i.length;){const r=t[s].Cmt||0;if(r<0)break;const o=n+r;if(o>=i.length)break;if(i[o].MS.greaterThanOrEqual(e))break;if(i[n].nut.aut===n)n=o+1;else for(;n<=o;)i[n].nut.aut=n,n++;0,s++}return{fyt:s,XAt:n}}dyt(t,i,e,s){const n=this.ryt;let r,o=e,h=s;for(;o<t.length;){const e=t[o],s=ii.fromString(e.ct,!1),a=e.Cmt||0;let u;if(e.MS){if(u=ii.fromString(e.MS,!1).subtract(i),h>0){const t=n[h-1];t.bS.greaterThan(u)&&(t.ct=u.subtract(t.MS),t.bS=t.MS.add(t.ct))}}else u=h>0?n[h-1].bS:ii.ZERO;if(a<0){if(o+1===t.length){r={MS:u,ct:s};break}const e=ii.fromString(t[o+1].MS,!1).subtract(i);for(;u.lessThan(e);){const t=u.add(s);this._yt(n,h,u,s,t),u=t,h++}}else{const t=h+a;for(;h<=t;){const t=u.add(s);this._yt(n,h,u,s,t),u=t,h++}}o++}h<n.length&&n.splice(h),n.length>0&&(this.Wwt=n[n.length-1].MS),this.hyt=r}_yt(t,i,e,s,n){if(i<t.length){const r=t[i];0,r.ct.equals(s)?r.nut.aut=i:t[i]={MS:e,ct:s,bS:n,nut:this.UAt(i,e,zr(s,this.Ox))}}else t.push({MS:e,ct:s,bS:n,nut:this.UAt(i,e,zr(s,this.Ox))})}constructor(t,i){super(i,t),this.ryt=[],this.hyt=void 0,this.Wwt=ii.ZERO,this.Yn()}},xV=class{get ly(){return this.zx}get kmt(){return this.zx&&void 0!==this.zx.kmt?this.zx.kmt:this.gyt?this.gyt.kmt:0}get Qmt(){return this.zx&&void 0!==this.zx.Qmt?this.zx.Qmt:this.gyt?this.gyt.Qmt:ii.ZERO}get Ymt(){return this.zx&&void 0!==this.zx.Ymt?this.zx.Ymt:this.gyt?this.gyt.Ymt:this.bct.DAt.Ymt}get cM(){return this.zx&&void 0!==this.zx.cM?this.zx.cM:this.gyt&&this.gyt.cM?this.gyt.cM:1}get Omt(){return this.zx&&void 0!==this.zx.Omt?this.zx.Omt:this.gyt?this.gyt.Omt:void 0}get Umt(){return this.zx&&void 0!==this.zx.Umt?this.zx.Umt:this.gyt?this.gyt.Umt:void 0}get Wrt(){return this.wyt||(this.wyt=this.vyt()),this.wyt}vyt(){if(this.myt=this.pyt(),this.myt)return this.myt;if(this.gyt)return this.gyt.Wrt;throw new g("Missing media segment information.")}oAt(t){const i=this.Umt;if(i){return{zu:(void 0!==i.xmt?ra.Dh(i.xmt,t.upt[0]):t.upt[0]).href,Sat:i.Sat}}const e=this.Omt;if(e)return{zu:t.upt[0].href,Sat:[0,e[0]-1]}}Yn(t){this.zx=t,this.myt&&this.myt.Yn()}h_(){this.myt&&(this.myt.h_(),this.myt=void 0)}constructor(t,i,e){this.wyt=void 0,this.myt=void 0,this.bct=t,this.gyt=i,this.zx=e}},CV=class extends xV{get ct(){return void 0!==this.zx.ct?this.zx.ct/this.cM:this.gyt&&OV(this.gyt)?this.gyt.ct:void 0}get tyt(){return void 0!==this.zx.ct?ii.fromNumber(this.zx.ct):this.gyt&&OV(this.gyt)?this.gyt.tyt:void 0}get Vmt(){return void 0!==this.zx.Vmt?this.zx.Vmt:this.gyt&&OV(this.gyt)?this.gyt.Vmt:void 0}get Wmt(){return void 0!==this.zx.Wmt?this.zx.Wmt:this.gyt&&OV(this.gyt)?this.gyt.Wmt:void 0}pyt(){return void 0!==this.zx.Wrt?new LV(this,this.bct):void 0!==this.zx.ct?new IV(this,this.bct):void 0}};function OV(t){return t instanceof CV}var jV=class{LL(t){return this.Ayt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((i,e,s,n)=>{if("$$"===i)return"$";const r=t[e];if(void 0===r)return i;if(void 0===s)return r.toString();let o=function(t,i){switch(i){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===o?i:(o=Aa(o,Number(s),"0"),o)}))}constructor(t){this.Ayt=t}};var RV=class t extends CV{get opt(){return this.yyt?this.yyt:this.gyt&&this.gyt instanceof t?this.gyt.opt:void 0}get hpt(){return this.Myt?this.Myt:this.gyt&&this.gyt instanceof t?this.gyt.hpt:void 0}oAt(t){const i=this.opt;if(!i)return super.oAt(t);const e=i.LL({Bandwidth:t.ly.GP,RepresentationID:t.ly.o});return{zu:ra.wp(e,t.upt[0])}}zct(t,i){var e;const s=null!=(e=i.aAt.Vmt)?e:1,n=this.hpt.LL({Bandwidth:i.ly.GP,Number:i.Wrt.FAt(t,s),RepresentationID:i.ly.o,Time:i.Wrt.$At(t,s)});return{zu:ra.wp(n,i.upt[0])}}lAt(t,i){}get JAt(){}constructor(t,i,e){super(t,i,e),this.yyt=e.opt?new jV(e.opt):void 0,this.Myt=e.hpt?new jV(e.hpt):void 0}},PV=class t extends CV{zct(t,i){const e=this.Rmt[t.aut],s=i.upt[0];let n;return n=e.wM?ra.Dh(e.wM,s):s,{zu:n.href,Sat:e.jmt}}lAt(t,i){}get Rmt(){return void 0!==this.zx.Rmt?this.zx.Rmt:this.gyt&&this.gyt instanceof t?this.gyt.Rmt:void 0}get JAt(){var t;return null==(t=this.Rmt)?void 0:t.length}},zV=class{HAt(t){const i=this.Cct(t.hut);if(i&&i.MS===t.MS)return i;const e=this.byt(t.MS);return e&&e.MS===t.MS?e:void 0}},BV=class extends zV{get U(){return this.Tyt.length}Cct(t){if(t>=0&&t<this.U)return this.Syt(this.Tyt[t])}byt(t){const i=this.Nyt(t);if(this.Tyt.length>0){const t=this.Tyt[0];if(i<=zr(t.MS,this.cM))return this.Syt(t)}const e=EV(this.Tyt,ii.fromNumber(i*this.cM));if(!(e<0))return this.Syt(this.Tyt[e])}kct(t){const i=this.Nyt(t);if(this.Tyt.length>0){const t=this.Tyt[this.Tyt.length-1];if(i>=zr(t.bS,this.cM))return this.Syt(t)}return this.byt(t)}Syt(t){const i=zr(t.MS,this.cM)-this.Qmt,e=i+this.Iyt,s=zr(t.ct,this.cM);return{XAt:this.XAt,hut:t.aut,MS:e,QAt:ii.fromNumber(i*this.cM),ct:s,bS:e+s,Dyt:[t.Eyt,t.kyt]}}Nyt(t){return t-this.Iyt+this.Qmt}constructor(t,i,e,s,n){super(),this.XAt=t,this.cM=i,this.Iyt=e,this.Qmt=s,this.Tyt=n}};var UV=class t{fwt(){return this._y.Ku<this.ly.byteLength}Lyt(){const i=this.xyt(),e=this.Cyt(),s=this._y.Ku,n=this.ly.byteLength;let r;r=t.Oyt(e)?n-s:t.jyt(e);const o=s+r<=n?r:n-s,h=Eg(this.ly,this._y,o);return new FV(i,vh(h))}xyt(){const t=this.Cyt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let i=0;for(let e=0;e<t.length;e++)i=256*i+t[e];return i}Cyt(){const t=ta(this.ly,this._y.$A());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const i=8-(31-eg(t));return ra.Xet(i<=8&&i>=1,"Incorrect log2 value"),Eg(this.ly,this._y,i)}static jyt(t){if(8===t.length&&224&t[1])throw new b("EBML variable sized integer is too large");let i=0;for(let e=0;e<t.length;e++){const s=t[e];if(0===e){i=s&(1<<8-t.length)-1}else i=256*i+s}return i}static Oyt(t){for(const i of QV)if(Z_(t,new j(i)))return!0;return!1}constructor(t){this.ly=t,this._y=new Bi}},QV=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],FV=class{Ryt(){return this.Pyt.byteOffset}zyt(){return new UV(this.Pyt)}Byt(){const t=this.Pyt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.Pyt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let i=0;for(let e=0;e<t;e++){i=256*i+this.Pyt.getUint8(e)}return i}eZ(){if(4===this.Pyt.byteLength)return this.Pyt.getFloat32(0);if(8===this.Pyt.byteLength)return this.Pyt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,i){this.id=t,this.Pyt=i}};function YV(t,i){const e=function(t){const i=new UV(vh(t)),e=i.Lyt();if(e.id!==VV)throw new b("Missing WebM EBML header");const s=i.Lyt();if(s.id!==WV)throw new b("Missing WebM SegmentElement");const n=s.Ryt(),r=function(t){const i=t.zyt();let e;for(;i.fwt();){const t=i.Lyt();if(t.id===HV){e=t;break}}if(!e)throw new b("Missing WebM InfoElement");return function(t){const i=t.zyt();let e,s=1e6;for(;i.fwt();){const t=i.Lyt();t.id===XV?s=t.Byt():t.id===ZV&&(e=t.eZ())}if(void 0===e)throw new b("Missing Duration in WebM InfoElement");const n=s/1e9,r=e*n;return{timecodeScale:n,duration:r}}(e)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(i),s=new UV(vh(t)).Lyt();if(s.id!==qV)throw new b("Missing WebM CuesElement");const n=function(t,i,e,s){const n=[],r=t.zyt();let o,h;for(;r.fwt();){const t=r.Lyt();if(t.id!==KV)continue;const e=GV(t);if(!e)continue;const s=e.unscaledTime,a=i+e.relativeOffset;void 0!==o&&n.push({aut:n.length,MS:o,ct:s.subtract(o),bS:s,Eyt:h,kyt:a-1}),o=s,h=a}if(void 0!==o){0;const t=ii.fromNumber(s/e);n.push({aut:n.length,MS:o,ct:t.subtract(o),bS:t,Eyt:h,kyt:void 0})}return n}(s,e.segmentOffset,e.timecodeScale,e.duration);return{cM:_.round(1/e.timecodeScale),Uyt:n}}function GV(t){const i=t.zyt(),e=i.Lyt();if(e.id!==JV)throw new b("Missing CueTime in WebM CuePointElement");const s=ii.fromNumber(e.Byt()),n=i.Lyt();if(n.id!==$V)throw new b("Missing CueTrackPositions in WebM CuePointElement");const r=n.zyt();let o=0;for(;r.fwt();){const t=r.Lyt();if(t.id===tW){o=t.Byt();break}}return{unscaledTime:s,relativeOffset:o}}var VV=440786851,WV=408125543,HV=357149030,XV=2807729,ZV=17545,qV=475249515,KV=187,JV=179,$V=183,tW=241,iW=class extends mo{TAt(t){if(0===t)return this.Qyt}AAt(){return 0}MAt(t){return this.Qyt}bAt(t){return this.MAt(t)}EAt(){return this.Qyt}$At(t,i){return ii.ZERO}dAt(t){const i=this.Fyt(t);return i&&{kAt:t,LAt:i,xAt:i}}Fyt(t){const i=this.Qyt;return this.Ylt(i,t)?i:void 0}CAt(t){return this.Fyt(t)}OAt(t){return this.Fyt(t)}Yn(){}Ect(t){return 0===t&&void 0!==this.Yyt}VAt(t,i){const e=i.upt[0].href;return this.Gyt.get(e)}WAt(t,i,e,s){const n=i.upt[0].href;let r=this.Vyt.get(n);if(void 0===r){const o=i.aG,h=this.Wyt.f_;if(eo(o))r=this.Hyt(t,n,e,s,h);else{if(!Gm(o))throw new ao(qa.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+o);r=this.Xyt(t,n,i,e,s,h)}this.Vyt.set(n,r)}return r}async Hyt(t,i,e,s,n){const r=this.Yyt,o=await s.tlt(i,r,e,n),h=this.Zyt(t,o);return this.Gyt.set(i,h),h}Zyt(t,i){const e=this.Yyt,s=Mc.jy(new DataView(i),new Bi);if(s.Av!==X.UA)throw new g("Invalid segment index");const n=Ot.eM(s.ly),r=function(t,i){const e=[];let s=t.IT,n=i+t.DT.toNumber(),r=0;for(const i of t.kT){const t=i.MT,o=ii.fromNumber(i.ct),h=s.add(o);0===i.yT&&e.push({aut:r++,MS:s,ct:o,bS:h,Eyt:n,kyt:n+t-1}),n+=t,s=h}return e}(n,e[1]+1);return new BV(t,n.cM,this.Zvt.Cn,zr(this.YAt,this.Ox),r)}async Xyt(t,i,e,s,n,r){const o=e.oAt(),h=this.Yyt,a=n.tlt(o.zu,o.Sat,s,r),u=n.tlt(i,h,s,r),[c,l]=await Promise.all([a,u]),d=this.qyt(t,l,c);return this.Gyt.set(i,d),d}qyt(t,i,e){const s=YV(new j(i),new j(e));return new BV(t,s.cM,this.Zvt.Cn,zr(this.YAt,this.Ox),s.Uyt)}h_(){super.h_(),this.Wyt.g_()}constructor(t,i){super(i,t),this.Gyt=Pu(),this.Vyt=Pu(),this.Wyt=new Bd,this.Yyt=t.Omt,this.Qyt=this.UAt(0,ii.ZERO,this.Zvt.ct)}},eW=class extends xV{get Vmt(){}zct(t,i){return{zu:i.upt[0].href}}lAt(t,i){return{zu:i.upt[0].href,Sat:t.Dyt}}pyt(){return new iW(this,this.bct)}},sW=class extends Os{constructor(){super(ts.Nht)}};var xo=class extends Mo{get ly(){return this.zx}get upt(){return this.Kyt}Jyt(){var t,i;return null!=(i=this.PAt)?i:null==(t=this.ast)?void 0:t.Jyt()}$yt(t){const i=this.bct,e=this.ast&&this.ast.Jyt();this.zx.dpt?this.PAt=new RV(i,e,this.zx.dpt):this.zx.lpt?this.PAt=new PV(i,e,this.zx.lpt[0]):this.zx.cpt?this.PAt=new eW(i,e,this.zx.cpt):t&&!e&&(this.PAt=new eW(i,e,void 0))}tMt(t,i){this.zx=t,this.Kyt=t.upt&&t.upt.length>0?NV(t.upt.map((t=>t.zu)),i):i.slice(),this.PAt&&(t.dpt?this.PAt.Yn(t.dpt):t.lpt?this.PAt.Yn(t.lpt[0]):t.cpt&&this.PAt.Yn(t.cpt))}tAt(){var t;return null==(t=this.iMt)?void 0:t.eMt}fAt(){var t;return null==(t=this.iMt)?void 0:t.sMt}nMt(t){const i=this.rMt,e=this.bct.ct,s=this.iMt,n=this.oMt(t);s&&Jn(e,i,1e-5)&&hW(s,n)||(this.rMt=e,this.iMt=n,this.Co(new sW))}h_(){this.Vo(),this.PAt&&(this.PAt.h_(),this.PAt=void 0)}constructor(t,i,e){super(),this.PAt=void 0,this.rMt=1/0,this.iMt=void 0,this.ast=i,this.tMt(t,e)}};function nW(t){let i,e;for(const e of t){const t=e.tAt();if(t){i=t.Cn;break}}if(void 0!==i){for(let i=t.length-1;i>=0;i--){const s=t[i].tAt();if(s){e=s.jn;break}}return void 0!==e?{Cn:i,jn:e}:void 0}}function rW(t){if(0===t.length)return;let i=0,e=1/0;for(const s of t){const t=s.tAt();if(!t)return;if(i=_.max(i,t.Cn),e=_.min(e,t.jn),i>=e)return}return{Cn:i,jn:e}}function oW(t){let i;for(const e of t){const t=e.fAt();t&&(!i||t.getTime()<i.getTime())&&(i=t)}return i}function hW(t,i){return function(t,i){return t&&i?t.getTime()===i.getTime():t===i}(t.sMt,i.sMt)&&function(t,i){return t&&i?Jn(t.Cn,i.Cn,1e-5)&&Jn(t.jn,i.jn,1e-5):t===i}(t.eMt,i.eMt)}var aW=class extends Dh{get kot(){return this.hMt}get $nt(){return this.kot.reduce(((t,i)=>{for(const e of i.$nt)Ai(t,e)||t.push(e);return t}),[])}get Vet(){return this.$nt.length>0?this.$nt[0]:""}get Av(){return this.hMt[0].Av}get o(){return this.uS}get jlt(){return this.Zvt.jlt}get aG(){return this.hMt[0].aG}get bct(){return this.Zvt}get Bot(){return Pe(this.kot,(t=>t.Bot))}tAt(){return rW(this.hMt)}fAt(){let t;for(const i of this.hMt){const e=i.fAt();e&&(!t||e.getTime()<t.getTime())&&(t=e)}return t}gn(){this.Vo();for(const t of this.hMt)t.fn(ts.Nht,this.eAt)}constructor(t,i,e){super(),this.Zvt=t,this.uS=i,this.hMt=e.slice();for(const t of e)t.yn(ts.Nht,this.eAt)}},uW=class extends Os{constructor(){super(ts.Dht)}};function cW(t){const i=[];for(const e of t){let t;const s=e.idt;void 0===s||(t=bo(i,(t=>t.o===s))),t||(t={o:s,kot:[]},i.push(t)),t.kot.push(e)}return i}var lW,dW=class extends Dh{get kot(){return this.hMt}get Xvt(){return this.aMt}get kpt(){return this.sAt.ly.kpt}get ct(){return this.sAt.ct}get jn(){return this.Cn+this.ct}get Lpt(){return this.sAt.ly.Lpt||[]}get o(){return this.sAt.o}get Eht(){return this.uMt}get jlt(){return this.cMt}get lMt(){return this.cMt.dMt(this)}get bct(){return this}get fMt(){return this.cMt._Mt(this)}get gMt(){return this.wMt(1/0,_.min)}get vMt(){return this.wMt(0,_.max)}wMt(t,i){if(0===this.aMt.length)return;let e=t;for(const t of this.aMt){const s=t.Av;if(s===Jt.WA||s===Jt.VA){const s=t.iAt;if(void 0===s)return;e=i(e,s)}}return e}get Cn(){return this.sAt.Cn}get tE(){return this.jlt.tE}mMt(){this.uMt||(this.uMt=!0,this.Co(new uW),this.gn())}async Yn(t,i){0===this.hMt.length?(await this.pMt(this.sAt.kot,t,i),this.AMt(this.hMt),Vr(i)):await this.yMt(t,i)}async pMt(t,i,e){for(const s of t){const t=new SV(this,s);try{await t.Yn(i,e),this.hMt.push(t)}catch(t){me(t)}}}AMt(t){const i=cW(t);for(const t of i){const i=new aW(this,t.o,t.kot);this.aMt.push(i)}}async yMt(t,i){for(const e of this.hMt)await e.Yn(t,i)}tAt(){return this.sAt.tAt()}fAt(){return this.sAt.fAt()}gn(){this.Vo(),this.sAt.fn(ts.Nht,this.eAt);for(const t of this.aMt)t.gn();for(const t of this.hMt)t.gn();To(this.hMt),To(this.aMt)}constructor(t,i){super(),this.hMt=[],this.aMt=[],this.uMt=!1,this.cMt=t,this.sAt=i,this.sAt.yn(ts.Nht,this.eAt)}},Ro=class extends Os{constructor(){super(Tf.Vv)}};(lW||(lW={})).MMt="bMt";var fW=class extends Os{constructor(){super(lW.MMt)}},_W=class extends xo{get Out(){return this.rat}get bct(){return this.rat.bct}get DAt(){return this.rat.DAt}get aG(){return this.zx.aG||this.rat.aG}get aAt(){return this.Jyt()}get Wrt(){return this.aAt.Wrt}Ect(t){const i=this.aG;return!(!eo(i)&&!Gm(i))&&this.Wrt.Ect(t.aut)}Lct(t,i,e,s){return this.Wrt.Lct(t,this,i,e,s)}oAt(){return this.aAt.oAt(this)}zct(t){return this.aAt.zct(t,this)}lAt(t){return this.aAt.lAt(t,this)}dAt(){return this.TMt}oMt(t){const i=this.Wrt,e=i.dAt(t),s=e&&function(t,i){const{LAt:e,xAt:s,kAt:n}=t,r=e.MS;let o;const h=i.BAt(s);if(h.getTime()<=n.getTime())o=s.bS;else{const t=(h.getTime()-n.getTime())/1e3,i=_.max(s.ct-t,0);o=s.MS+i}return{Cn:r,jn:o}}(e,i),n=this.Wrt.fAt(t,e);return this.TMt=e,{kAt:t,eMt:s,sMt:n}}Yn(t){this.tMt(t,this.rat.upt)}constructor(t,i){super(t,i,i.upt),this.TMt=void 0,this.rat=i,this.$yt(!0)}},gW=class extends xo{get Bot(){return this.odt}get bct(){return this.Zvt}get DAt(){return this.Zvt.DAt}get idt(){return this.zx.idt}get aG(){var t;return this.zx.aG||(null==(t=this.odt[0])?void 0:t.ly.aG)||""}get Zmt(){return this.ly.Zmt}get qmt(){return this.ly.qmt}Yn(t){this.tMt(t,this.Zvt.upt);const i=t.Bot||[];if(this.odt.length!==i.length)throw new g("Expected "+this.odt.length+' representations in adaptation set "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.odt[t].Yn(i[t])}nMt(t){for(const i of this.odt)i.nMt(t);super.nMt(t)}oMt(t){return{kAt:t,eMt:rW(this.odt),sMt:oW(this.odt)}}h_(){for(const t of this.odt)t.h_();super.h_()}constructor(t,i){super(t,i,i.upt),this.Zvt=i,this.$yt(!1),this.odt=t.Bot.map((t=>new _W(t,this)))}},wW=class extends xo{get kot(){return this.hMt}get Xvt(){return this.aMt}get bct(){return this}get DAt(){return this.SMt}get o(){return this.zx.o}get Cn(){return this.FI}get ct(){return this.jx}Yn(t,i){this.tMt(t,this.SMt.upt),this.jx=i;const e=t.kot||[];if(this.hMt.length!==e.length)throw new g("Expected "+this.hMt.length+' adaptation sets in period "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.hMt[t].Yn(e[t])}nMt(t){for(const i of this.hMt)i.nMt(t);super.nMt(t)}oMt(t){return{kAt:t,eMt:rW(this.hMt),sMt:oW(this.hMt)}}h_(){for(const t of this.hMt)t.h_();super.h_()}constructor(t,i,e,s){super(i,void 0,t.upt),this.aMt=[],this.SMt=t,this.FI=e,this.jx=s,this.$yt(!1),this.hMt=(i.kot||[]).map((t=>new gW(t,this))),this.aMt=cW(this.hMt)}},vW=class{get NMt(){return this.IMt.Cpt.XN}get DMt(){return this.IMt.Cpt.HN}get EMt(){return this.IMt.Cpt.xpt}get kMt(){var t;return null==(t=this.IMt.gg)?void 0:t.XN}get LMt(){var t;return null==(t=this.IMt.gg)?void 0:t.XN}constructor(t){this.IMt=t}},mW=new Date("2000-01-01"),pW=class extends Mo{get ly(){return this.zx}get Av(){return this.zx.Av||Vs.Tj}get jpt(){return this.xMt||this.zx.jpt||this.Ypt}get Opt(){return this.zx.Opt}get IAt(){var t,i;return null!=(i=null==(t=this.CMt)?void 0:t.ignoreAvailabilityWindow)&&i}get Upt(){return this.OMt}get upt(){return this.Kyt}get Rpt(){return this.jMt}get omt(){return this.RMt}get Ypt(){return this.zx.Ypt||this.An}get Ymt(){return this.zx.Ymt}get PMt(){return this.zMt}get BMt(){return this.An}get Wpt(){return this.IMt}tAt(){var t;return null==(t=this.iMt)?void 0:t.eMt}fAt(){var t;return null==(t=this.iMt)?void 0:t.sMt}Yn(t,i,e,s){var n;const r=void 0!==this.zx&&this.zx.Av===Vs.Sj;this.zx=t,this.zMt=null!=s?s:e,this.An=e;const o=[i_(i)];this.Kyt=t.upt&&t.upt.length>0?NV(t.upt.map((t=>t.zu)),o):o,this.jMt=t.Rpt&&t.Rpt.length>0?NV(t.Rpt,this.Kyt):[];const h=this.jMt.map((t=>t.href)),a=i.href;Ai(h,a)||(this.jMt.push(i),h.push(a));const u=this.UMt.href;Ai(h,u)||(this.jMt.push(this.UMt),h.push(u)),this.OMt=null==(n=t.Upt)?void 0:n.bmt(),t.Wpt&&(this.IMt=new vW(t.Wpt));const c=t.Av===Vs.Sj,l=function(t,i,e){const s=[];for(let e=0;e<t.length;e++){const n=t[e];let r;if(n.Cn)r=n.Cn.bmt();else if(e>0&&t[e-1].ct){r=s[e-1]+t[e-1].ct.bmt()}else{if(0!==e||i)break;r=0}s.push(r)}const n=[];for(let i=0;i<s.length-1;i++)n.push({ly:t[i],Cn:s[i],ct:s[i+1]-s[i]});if(s.length>0){const r=s.length-1,o=t[r],h=s[r];let a=1/0;i||(a=o.ct?o.ct.bmt():e-h),n.push({ly:o,Cn:h,ct:a})}return n}(t.omt,c,this.OMt);this.QMt(l,r,c),this.nMt(e)}QMt(t,i,e){const s=this.RMt;if(0===t.length)return void To(s);const n=t[0].ly.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const o=s.splice(0,r);for(const t of o)t.h_();if(i&&!e&&s.length>0&&t.length>0){var h;const i=null!=(h=AW(s[0].ly))?h:A.wN;var a;const e=null!=(a=AW(t[0].ly))?a:A.wN;if(e.$S(i)){const n=e.uN(i);void 0!==this.OMt&&(this.OMt+=n.JS());for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];e.Cn=t.Cn,SW(e.ly,t.ly)}i===t.length-1&&(e.ct+=n.JS())}}}for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];0,t.Yn(e.ly,e.ct)}else s.push(new wW(this,e.ly,e.Cn,e.ct))}}nMt(t){for(const i of this.RMt)i.nMt(t);const i=this.iMt,e=this.oMt(t);i&&hW(i,e)||(this.iMt=e,this.Co(new sW))}oMt(t){return{kAt:t,eMt:nW(this.RMt),sMt:oW(this.RMt)}}EAt(){if(0===this.RMt.length)return;const t=this.RMt[this.RMt.length-1];if(isFinite(t.ct))return;if(0===t.kot.length)return;const i=t.kot[0];if(0===i.Bot.length)return;const e=i.Bot[0].Wrt,s=e.EAt();return s?{nut:s,Opt:e.Rlt(s)}:void 0}h_(){this.Vo();for(const t of this.RMt)t.h_()}constructor(t,i,e,s,n){if(super(),this.iMt=void 0,this.OMt=void 0,this.xMt=void 0,this.RMt=[],this.UMt=i,this.CMt=n,this.Yn(t,e,s),t.Av===Vs.Sj){const t=this.EAt();t&&t.Opt&&t.Opt.getTime()<mW.getTime()&&(this.xMt=new Date(this.Ypt.getTime()-1e3*(t.nut.MS+t.nut.ct)),this.nMt(s))}}};function AW(t){let i=bW(t);var e,s;for(const s of null!=(e=t.kot)?e:[])i=an(i,yW(s));for(const e of null!=(s=t.Lpt)?s:[])i=an(i,TW(e));return i}function yW(t){let i=bW(t);for(const e of t.Bot)i=an(i,MW(e));return i}function MW(t){return bW(t)}function bW(t){let i;if(void 0!==t.dpt&&(i=an(i,TW(t.dpt))),void 0!==t.cpt&&(i=an(i,TW(t.cpt))),void 0!==t.lpt)for(const e of t.lpt)i=an(i,TW(e));return i}function TW(t){var i,e;return A.fN(null!=(i=t.Qmt)?i:ii.ZERO,null!=(e=t.cM)?e:1)}function SW(t,i){if(DW(t,i),t.Cn=i.Cn,void 0!==t.kot&&void 0!==i.kot&&t.kot.length===i.kot.length)for(let e=0;e<t.kot.length;e++)NW(t.kot[e],i.kot[e]);if(void 0!==t.Lpt&&void 0!==i.Lpt&&t.Lpt.length===i.Lpt.length)for(let e=0;e<t.Lpt.length;e++)EW(t.Lpt[e],i.Lpt[e])}function NW(t,i){if(DW(t,i),void 0!==t.Bot&&void 0!==i.Bot&&t.Bot.length===i.Bot.length)for(let e=0;e<t.Bot.length;e++)IW(t.Bot[e],i.Bot[e])}function IW(t,i){DW(t,i)}function DW(t,i){if(void 0!==t.dpt&&void 0!==i.dpt&&EW(t.dpt,i.dpt),void 0!==t.cpt&&void 0!==i.cpt&&EW(t.cpt,i.cpt),void 0!==t.lpt&&void 0!==i.lpt&&t.lpt.length===i.lpt.length)for(let e=0;e<t.lpt.length;e++)EW(t.lpt[e],i.lpt[e])}function EW(t,i){t.cM=i.cM,t.Qmt=i.Qmt}var kW=class{async oX(t){await this.FMt(t,this.aE,this.YMt,this.GMt).catch(_t)}Olt(){return new Date(Na()+this.VMt)}async FMt(t,i,e,s){let n;if(s&&(n=await this.WMt(i,s,e)),void 0===n){Vr(e);for(const s of t)if(n=await this.HMt(i,s,e),void 0!==n)break}this.VMt=void 0===n?0:n-Na()}async HMt(t,i,e){switch(i.irt){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=i.lT;if(s)return await this.WMt(t,s,e);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=i.lT;if(t){const i=new Date(t).getTime();if(!S(i))return i}break}default:return}}async WMt(t,i,e){try{const s=await t.uD({zu:i,ZD:Cl.GET,qD:Ft.Ru,f_:e}),n=await s.uE(),r=new Date(n).getTime();if(!S(r))return r}catch(t){me(t)}}constructor(t,i,e){this.aE=t,this.YMt=i,this.GMt=e,this.VMt=0}},LW=class extends Mo{get Opt(){return this.sAt&&this.sAt.Opt}get jpt(){return this.sAt&&this.sAt.jpt}get IAt(){return this.sAt&&this.sAt.IAt}get o(){return this.sAt&&this.sAt.ly.o}get PMt(){var t;return null==(t=this.sAt)?void 0:t.PMt}get XMt(){var t;return null==(t=this.sAt)?void 0:t.BMt}get Rpt(){return this.sAt?this.sAt.Rpt.map((t=>t.href)):[this.ZMt]}get ZMt(){return this.qMt.href}get zpt(){return this.sAt&&this.sAt.ly.zpt}get Bpt(){return this.sAt&&this.sAt.ly.Bpt}get Upt(){return this.sAt&&this.sAt.ly.Upt}get Qpt(){return this.sAt&&this.sAt.ly.Qpt}get Fpt(){var t,i;const e=(null==(i=this.sAt)||null==(t=i.ly.Fpt)?void 0:t.Tmt())||0;return _.max(e,CW)}get cg(){return this.KMt}JMt(t){const i=this.cg;this.KMt=t,i!==this.cg&&this.Co(new fW)}get omt(){return this.RMt}get $Mt(){return this.Av===Vs.Sj?this.wAt:this.tbt}get ibt(){const t=this.$Mt;if(void 0!==t)for(const i of this.omt)if(i.Cn<=t&&i.jn>t)return i}get $mt(){return this.sAt&&this.sAt.ly.$mt}get Ypt(){return this.sAt&&this.sAt.Ypt}get gMt(){for(let t=this.RMt.length-1;t>=0;t-=1){const i=this.RMt[t].gMt;if(i)return i}}get wAt(){const t=this.gMt;if(void 0===t)return;const i=t-this.ebt;return _.max(i,this.tbt)}get tbt(){for(const t of this.RMt){const i=t.$pt;if(void 0!==i)return i}}get tE(){return Boolean(this.sbt.tE)}get ebt(){var t,i;if(this.sbt.nbt&&this.Av===Vs.Sj)return this.sbt.nbt;const e=null==(i=this.sAt)||null==(t=i.ly.Gpt)?void 0:t.bmt();return void 0!==e?e:this.Av===Vs.Sj?1.5*this.Qpt.bmt():0}get Ymt(){return this.sAt&&this.sAt.Ymt}get Av(){return this.sAt?this.sAt.Av:void 0}get Wpt(){var t;return null==(t=this.sAt)?void 0:t.Wpt}async Yn(t,i,e){const s=[],n=[],r=t.Ppt?ra.Dh(t.Ppt,this.qMt):this.qMt;void 0===this.sAt?(await this.rbt.oX(t.Vpt),this.sAt=new pW(t,this.qMt,r,this.Olt(),this.CMt),this.sAt.yn(ts.Nht,this.Ds)):this.sAt.Yn(t,r,this.Olt(),i);const o=this.sAt.omt;let h;if(0===o.length)h=this.RMt.slice(),To(this.RMt);else{const t=o[0].o;let i=0;for(;i<this.RMt.length&&this.RMt[i].o!==t;)i++;h=this.RMt.splice(0,i);for(let t=0;t<o.length;t++){const i=o[t];let r;t<this.RMt.length?r=this.RMt[t]:(r=new dW(this,i),s.push(r)),n.push(r.Yn(this.obt,e))}}await Promise.all(n),this.RMt.push(...s);for(const t of h)t.mMt();this.Co(new Ro)}Olt(){return this.rbt.Olt()}_Mt(t){const i=this.RMt.indexOf(t);if(i>0)return this.RMt[i-1]}dMt(t){const i=this.RMt.indexOf(t);if(i>=0&&i+1<this.RMt.length)return this.RMt[i+1]}tAt(){return this.sAt?this.sAt.tAt():void 0}fAt(){return this.sAt&&this.sAt.fAt()}nMt(t){this.sAt&&this.sAt.nMt(t)}gn(){this.Vo(),this.hbt=void 0,this.JMt(!1);for(const t of this.RMt)t.gn();To(this.RMt),this.sAt&&this.sAt.h_()}constructor(t,i,e,s,n){super(),this.sAt=void 0,this.KMt=!0,this.RMt=[],this.hbt=void 0,this.sbt=t,this.qMt=t.yv,this.obt=i,this.aE=e,this.abt=s,this.rbt=new kW(this.aE,this.abt,this.sbt.ubt),this.CMt=n}},xW=class{get jlt(){return this.cMt}constructor(t,i,e,s,n){this.cMt=new LW(t,i,e,s,n)}},CW=1e3,OW=class{get Tr(){return this.sAt}get W(){return this.cbt||(this.cbt=this.nst(this.lbt.f_),$r(this.cbt)),this.cbt}async nst(t){this.sAt.jlt.Co(new tn);try{await this.dbt(t),this.sAt.jlt.JMt(!0)}catch(t){throw me(t),this.cbt=void 0,this.sAt.jlt.JMt(!1),new g("The provided MPEG-DASH document could not be loaded - "+t.message)}this.fbt=this._bt(this.lbt.f_)}async _bt(t){try{for(;this.sAt.jlt.Av===Vs.Sj;)await Jr(this.gbt,t)}catch(t){}}get gbt(){return this.sAt.jlt.XMt&&this.sAt.jlt.Av===Vs.Sj?this.wbt(this.lbt.f_):this.W}async vbt(t){Vr(t);const i=this.mbt();if(i>0){const e=_.min(i,2147483647);await Si(e,t)}try{await this.dbt(t),this.sAt.jlt.JMt(!0)}catch(t){throw new g("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.pbt=void 0}}mbt(){const t=this.sAt.jlt.Olt().getTime()-this.sAt.jlt.PMt.getTime();return this.sAt.jlt.Fpt-t}Abt(t){const i=this.sAt.jlt.fAt();if(i){const e=i.getTime()-t.getTime();if(e>0)return e}this.sAt.jlt.nMt(t);const e=this.sAt.jlt.fAt();return e?e.getTime()-t.getTime():NaN}async wbt(t){this.pbt||(this.pbt=this.vbt(t));const i=new Bd;i.w_(t);try{await Promise.race([this.pbt,this.ybt(i.f_)].filter(Ks))}catch(t){_t(t)}finally{i.g_()}}ybt(t){const i=this.sAt.jlt.Olt(),e=this.Abt(i);if(!S(e)&&!this.Tr.jlt.IAt)return this.Mbt(e,t)}async Mbt(t,i){await Si(t,i);const e=this.sAt.jlt.Olt();this.sAt.jlt.nMt(e)}async bbt(t,i){const e=await this.Sbt.Tbt(t,{},i);return(new vV).Hpt(e.Nbt,e.cE)}gn(){return this.lbt.g_(),this.fbt=void 0,this.cbt=void 0,this.pbt=void 0,this.sAt.jlt.gn(),Promise.resolve()}constructor(t,i,e,s,n){this.lbt=new Bd,this.dbt=async t=>{try{const i=this.sAt.jlt.Olt(),e=await this.bbt(this.sAt.jlt.Rpt,t);await this.sAt.jlt.Yn(e,i,t)}catch(t){throw De(t)&&this.sAt.jlt.JMt(!1),t}},this.Sbt=s,this.sAt=new xW(t,i,e,this.lbt.f_,n)}},jW=class extends Os{constructor(t,i){super("_mt"),this.ymt=t,this.Not=i}},RW=class extends Mo{get Not(){return this.Iot}get Av(){return this.z2}get Z(){return this.Pw.slice()}MD(t){t&&this.Iot!==t&&this.Ibt(t)}bD(t){this.Iot===t&&this.Ibt(void 0)}Ibt(t){this.Iot=t,this.Co(new jW(this,this.Iot))}gn(){this.Vo();for(const t of this.Pw)t.idt=void 0;To(this.Pw)}constructor(t,i){super(),this.Iot=void 0,this.z2=t,this.Pw=i;for(const t of this.Pw)t.idt=this}};var PW,zW=class extends Os{constructor(t,i,e){super(Tf.Cv),this.currentTime=t,this.initDataType=i,this.initData=e}};function BW(t,i,e,s,n){let r=[],o=[];for(const t of i)t.Av===Jt.WA?r=r.concat(t.Z):t.Av===Jt.VA&&(o=o.concat(t.Z));return[UW(t,r,e,s,null==n?void 0:n.preferredAudioCodecs),QW(t,o,e,s,null==n?void 0:n.preferredVideoCodecs)].filter(Ks)}function UW(t,i,e,s,n){const r=bo(s||[],(t=>t.Zht===Jt.WA&&t.Rt)),o=[YW(r,e,t),GW(r),VW(r,n),WW(),t=>{const i=t.filter((t=>"main"===t.zt));return i.length>0?i:t}];return FW(i,o)}function QW(t,i,e,s,n){const r=bo(s||[],(t=>t.Zht===Jt.VA&&t.Rt)),o=[YW(r,e,t),VW(r,n),WW(),t=>{const i=t.filter((t=>"main"===t.zt));return i.length>0?i:t}];return FW(i,o)}function FW(t,i){if(0===t.length)return;let e=t;for(const t of i){if(1===e.length)return e[0];e=t(e)}return e[0]}function YW(t,i,e){return s=>{const n=t?t.Out.o:void 0;if(!Ks(n))return s;const r=null==i?void 0:i.kpt,o=e.kpt,h=r&&o&&r.lT===o.lT,a=bo(s,(t=>t.Out.o===n));return h&&a?[a]:s}}function GW(t){return i=>{const e=t?t.gs:"",s=i.some((t=>""!==t.gs))?i.filter((t=>""!==t.gs)):i;if(""===e)return s;const n=s.filter((t=>t.gs===e));return n.length>0?n:s}}function VW(t,i){return t=>{if(i&&i.length>0)for(const e of i){const i=t.filter((t=>t.qw.Rw.some((t=>Di(t.$nt,e)))));if(i.length>0)return i}return t}}function WW(){return t=>{let i=[],e=-1/0;for(const s of t){const t=s.Out.uB;t>e?(e=t,i=[s]):t===e&&i.push(s)}return i}}!function(t){t.Dbt="api",t.Ebt="start"}(PW||(PW={}));var HW={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},XW=class{kbt(t,i,e){const s=this.Mlt.maxRetries===1/0?HW:this.Mlt;return ev((()=>this.Lbt(t,i,e)),e,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async Lbt(t,i,e){let s;for(const n of t)try{const t=new Zi({zu:n,qD:Ft.Ru,XD:i,tE:this.xbt,ZD:Cl.GET,Av:li.xD,JD:fo.jT,f_:e,_D:15e3,KD:5e3}),s=await this.aE.uD(t),r=await s.uE(e);return{Nbt:r,Cbt:n,cE:s.cE}}catch(t){s=t}throw s}constructor(t,i,e=HW){this.aE=t,this.xbt=i,this.Mlt=e}},ZW=class{async Tbt(t,i,e){let s;for(const n of this.Obt)try{return await n.Tbt(t,i,e)}catch(t){me(t),s=t}throw s}constructor(t){this.Obt=t}},qW=class{async Tbt(t,i,e){const s=await this.rut.fnt(t);if(s)return{Nbt:s.data,Cbt:s.locationURL,cE:s.responseURL};throw new g("Manifest fetch from cache unsuccesful")}constructor(t){this.rut=t}},KW=class{async Tbt(t,i,e){return await this.jbt.kbt(t,i,e)}constructor(t){this.jbt=t}};function JW(t,i){return new ZW([new qW(i),new KW(t)])}var $W=class{async Tbt(t,i,e){const s=await this.Sbt.Tbt(t,i,e);return await this.Rbt(s),s}async Rbt(t){await this.Xd.Mnt({key:Ir(t.Cbt),locationURL:fi(t.Cbt),responseURL:fi(t.cE),data:t.Nbt,references:[this.Pbt.o]})}constructor(t,i,e){this.Sbt=t,this.Xd=i,this.Pbt=e}},$o=class extends Os{constructor(){super(Tf.Xv)}},jo=class extends Os{constructor(){super(Tf.Hv)}},tH=class extends xn{zbt(t){return t.Sg=Ls.LOADED,this.tt(t),t}Bbt(t){for(const i of this.Z.Rw)if(i.fv===t)return i}constructor(){super()}};function iH(t,i){return""===i?t:t+" "+i}var eH=class extends rl{get va(){return this.Xa||(this.Xa=function(t){return ro(ht(t),{get attributes(){return t.ZI},get eventID(){var i;return""+(null!=(i=t.Ubt)?i:"")}})}(this)),this.Xa}FS(t){return this.O===t.O}constructor(t,i,e,s,n){super(t,i,e,!1,null==n?void 0:n.toString()),this.ZI=s,this.Ubt=n}},sH=class extends tH{Qbt(t){const i=this.oE.rE(Qe.ZA,"","","",void 0,O.EVENT_STREAM);return i.fv=t,this.zbt(i),i}Fbt(t,i,e){const s=t.irt;var n;const r=null!=(n=t.lT)?n:"";var o;const h=null!=(o=t.cM)?o:1;var a;const u=null!=(a=t.Qmt)?a:ii.ZERO,c=iH(s,r);let l=this.Bbt(c);l||(l=this.Qbt(c));for(const s of t.uG)if(!nH(s,l)){const t=rH(s,h,u,i);t.bS>e&&l.lE(t)}}async $n(t){await this.tr(),this.SMt=t,this.SMt.yn(Tf.Vv,this.Ybt),this.Ybt()}async tr(){this.SMt&&(this.SMt.fn(Tf.Vv,this.Ybt),this.SMt=void 0);for(const t of this.Z.Rw)this.oE.fE(t);await super.tr()}constructor(t){super(),this.SMt=void 0,this.Ybt=()=>{var t,i;const e=null!=(i=null==(t=this.SMt.tAt())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.Rw)Le(t,e);for(const t of this.SMt.omt)if(t.jn>e)for(const i of t.Lpt)this.Fbt(i,t,e)},this.oE=t}};function nH(t,i){const e=t.o;if(void 0!==e){if(bo(i.L.Rw,(i=>i.Ubt===e&&i.O===t.ly)))return!0}return!1}function rH(t,i,e,s){const n=t.o,r=t.dT.toSigned().subtract(e),o=t.ct,h=t.ly,a=t.ZI,u=r.toNumber()/i+s.Cn,c=o?o.toNumber()/i:void 0,l=void 0!==c?u+c:s.vMt;return new eH(u,l,h,a,n)}function oH(t,i,e,s,n){const r=[],o=bo(e,(t=>t.irt===I_));if(void 0===o)return;const h=o.lT?function(t){const i=t.split(":",1)[0];switch(i){case"cbcs":case"cenc":return i;default:return}}(o.lT.toLowerCase()):"cenc";if(void 0!==h){for(const t of e)if(t.irt!==I_)for(const i of rA(t.irt)){const e=n&&t.Lmt?[t.Lmt]:[];r.push({Qp:i,KP:e,JP:void 0,hP:void 0})}if(r.length)return{fR:t,Ivt:{Gbt:h,_R:o._R},Nvt:r,Vbt:i===Jt.WA?s.slice():[],Wbt:i===Jt.VA?s.slice():[],B3:!1}}}function hH(t,i){if(!t)return i;if(!i)return t;const e=[],s=Pu();var n;return aH(e,s,t.Nvt),aH(e,s,i.Nvt),{fR:t.fR,Ivt:{Gbt:t.Ivt.Gbt,_R:null!=(n=t.Ivt._R)?n:i.Ivt._R},Nvt:e,Vbt:uH(t.Vbt,i.Vbt,Ai),Wbt:uH(t.Wbt,i.Wbt,Ai),B3:t.B3||i.B3||!1}}function aH(t,i,e){for(const s of e){const e=s.Qp.gL;let n;i.has(e)?(n=i.get(e),n.KP=uH(n.KP,s.KP,cH)):(n=ol({},s),t.push(n),i.set(e,n))}}function uH(t,i,e){const s=t.slice();for(const t of i)e(s,t)||s.push(t);return s}function cH(t,i){for(const e of t)if(Ln(e,i))return!0;return!1}function lH(t,i,e){let s;const n=t.trt;if(n){const r=t.aG,o=[];for(const i of t.$nt)o.push(r+'; codecs="'+i+'"');s=oH(i||{},t.Av,n,o,e)}for(const n of t.Bot)s=hH(s,dH(n,i,e));return s}function dH(t,i,e){return oH(i||{},t.Av,t.trt||[],[t.Nz],e)}function fH(t){return t?t.Nvt.map((i=>{const e=_H(t.fR,i.Qp),s=t.Ivt.Gbt;return{Qp:i.Qp,KP:i.KP,hP:i.hP,Kz:[{initDataTypes:[i.Qp.fL],audioCapabilities:gH(t.Vbt,s,null==e?void 0:e.audioRobustness),videoCapabilities:gH(t.Wbt,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]}})):[]}function _H(t,i){switch(i.Av){case ho.Ep:return t.widevine;case ho.Dp:return t.playready;case ho.kp:return t.fairplay;case ho.Lp:return t.clearkey}}function gH(t,i,e){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:i,robustness:e})))}function wH(t,i){const e=t=>{const e=i.indexOf(t.Qp.gL);return e>=0?e:i.length};return td(t,((t,i)=>e(t)-e(i)))}var vH=class extends tH{Qbt(t){const i=this.oE.rE(Qe.ZA,t.o,"thumbnails","",!1,O.DEFAULT);return i._v=yi.Jn,this.zbt(i),i}async $n(t){await this.tr(),this.SMt=t,this.SMt.yn(Tf.Vv,this.Yn),this.Yn()}Hbt(t){this.Xbt(t),this.Zbt()}Zbt(){const t=[];for(const i of this.Z.Rw)this.qbt(i)||t.push(i);for(const i of t)this.it(i)}Xbt(t){const i=[];for(const e of this.odt)-1===t.indexOf(e)&&i.push(e);for(const t of i)jn(this.odt,t)}async tr(){this.SMt&&(this.SMt.fn(Tf.Vv,this.Yn),this.SMt=void 0);for(const t of this.odt)t.fn(ts.Nht,this.Kbt);this.odt.length=0;for(const t of this.Z.Rw)this.oE.fE(t);await super.tr()}gn(){return this.Kbt=void 0,super.gn()}Jbt(){var t,i;const e=null!=(i=null==(t=this.SMt.tAt())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.Rw)Le(t,e)}$bt(t){return this.Z.Rw.some((i=>i.o===t.o))}tTt(t){return bo(this.Z.Rw,(i=>i.o===t.o))}qbt(t){return this.odt.some((i=>t.o===i.o))}constructor(t){super(),this.odt=[],this.Yn=()=>{const t=[];for(const i of this.SMt.omt)for(const e of i.kot)if(e.Av===Jt.OT&&e.Bot.length>0){const i=e.Bot[0];t.push(i),this.$bt(i)||this.Qbt(i),-1===this.odt.indexOf(i)&&(this.odt.push(i),i.yn(ts.Nht,this.Kbt)),this.iTt(i)}this.Hbt(t)},this.iTt=t=>{const i=this.tTt(t);i&&t&&i._v!==yi.Ch&&(this.Jbt(),function(t,i){const e=t.Wrt,s=t.dAt();if(!s)return;const n=s.LAt,r=s.xAt,o=t.ji,h=t.Ti,[a,u]=function(t){for(const i of t)if(Da(i.irt,pH)||Da(i.irt,AH)){const t=i.lT.match(mH);if(t){const[,i,e]=t;return[Number(i),Number(e)]}}return[1,1]}(t.Zmt);let c=n;for(;c&&c.aut<=r.aut;){const s=t.aAt.ct||c.ct,n=yH(i,c,t.zct(c).zu,o,h,a,u,s);for(const t of n)i.lE(t);c=e.jct(c)}}(t,i))},this.oE=t;const i=this;this.Kbt=function(){i.iTt(this)}}},mH=/^(\d+)x(\d+)$/,pH="http://dashif.org/guidelines/thumbnail_tile",AH="http://dashif.org/thumbnail_tile";function yH(t,i,e,s,n,r,o,h){const a=[],u=i.MS,c=r*o,l=s/r,d=n/o,f=_.round(l),g=_.round(d),w=h/c;if(1===c){const i=u+w;return MH(t,u,i,e)?a:[new rl(u,i,e,!1)]}for(let s=0;s<o;s++)for(let n=0;n<r;n++){const o=u+(s*r+n)*w,h=o+w,c=e+"#xywh="+_.round(n*l)+","+_.round(s*d)+","+f+","+g;if(MH(t,o,h,c)||a.push(new rl(o,h,c,!1)),h>=i.bS)return a}return a}function MH(t,i,e,s){return t.L.Rw.some((t=>t.MS===i&&t.bS===e&&t.O===s))}var bH=class extends rl{get cT(){return this.eTt}get lT(){return this.sTt}get nTt(){return this.rTt}get va(){return this.Xa||(this.Xa=function(t){return ro(ht(t),{get schemeIDURI(){return t.cT},get value(){return t.lT},get emsgID(){return t.nTt}})}(this)),this.Xa}FS(t){return Z_(this.O,t.O)}constructor(t,i,e,s,n,r){super(t,i,r,!1),this.eTt=e,this.sTt=s,this.rTt=n}},TH=class t extends tH{elt(i,e,s){const n=Ot.Wy(vh(i));if(!n)return;const r=function(t,i){const e=[];for(const s of t)nw(s,i)&&e.push(s);return e}(n,X.BA);if(r.length){const i=t.oTt(n,e,s);this.hTt(r,i,s)}}hTt(t,i,e){for(const s of t){let t;t=1===s.Gy?s.dT.toNumber()/s.cM+e:i+s.gT/s.cM;const n=t+s.fT/s.cM;"https://aomedia.org/emsg/ID3"===s.cT||"https://developer.apple.com/streaming/emsg-id3"===s.cT?this.aTt(s,t):this.uTt(s,t,n)}}uTt(t,i,e){const s=iH(t.cT,t.lT);let n=this.Bbt(s);n||(n=this.cTt(s),this.zbt(n)),n.lE(new bH(i,e,t.cT,t.lT,t.o,t._T))}aTt(t,i){const e=OO(vh(t._T));if(!e)return;const s=iH(t.cT,t.lT);let n=this.Bbt(s);n||(n=this.lTt(s),this.zbt(n));for(const t of e.a4){const e=new GO(i,t);hO(e,n.L.Rw),n.lE(e)}}static oTt(t,i,e){const s=Gi(t,X.UA);return s?zr(s.IT,s.cM)+e:i}cTt(t){const i=this.oE.rE(Qe.ZA,"","","",void 0,O.EMSG);return i.fv=t,i._v=yi.vv,i}lTt(t){const i=this.oE.rE(Qe.ZA,"","","",void 0,O.ID3);return i.fv=t,i._v=yi.vv,i}async tr(){for(const t of this.Z.Rw)this.oE.fE(t);await super.tr()}constructor(t){super(),this.oE=t}},SH=class extends TH{async $n(t){await this.tr(),this.SMt=t,this.SMt.yn(Tf.Vv,this.Ybt),this.Ybt()}async tr(){this.SMt&&(this.SMt.fn(Tf.Vv,this.Ybt),this.SMt=void 0),await super.tr()}constructor(...t){super(...t),this.Ybt=()=>{var t,i;const e=null!=(i=null==(t=this.SMt.tAt())?void 0:t.Cn)?i:0;this.wD(e)}}};var NH=class{wnt(t,i){return this.dTt?this.rut.wnt(t,i):Promise.resolve(!1)}mnt(t,i){return this.dTt?this.rut.mnt(t,i):Promise.resolve(void 0)}async fnt(t){const i=await this.rut.fnt(t);return this.dTt=void 0!==i,i}aZ(t){return this.rut.aZ(t)}constructor(t){this.dTt=!1,this.rut=t}},Lo=class extends If{$m(){var t;return null!=(t=this.qm)?t:0}tp(){this.Qo.U_=1/0}constructor(t,i,e){super(t,i,e)}},IH=[Tf.Zv,Tf.Kv,Tf.nm,Tf.Wv,Tf.hm],DH=[Tf.qv,Tf._m,Tf.zv,Tf.Rv],EH=class t extends Mo{fTt(t){return!!this.yz&&this.yz.FZ(t)}async E1(t){this.yz=await this.Fm.$n(t),this._Tt(),this.gTt(),this.yz.P1(this.ct)}wTt(t){return this.yz.GZ(t)}async vTt(){this.mTt=this.pTt,this.yz&&(await this.Fm.tr(),this.yz=void 0)}x0(){this.yz.x0()}M0(){const t=this.ct;this.yz.ct<t&&this.yz.P1(t),this.yz.M0()}async ATt(t){const i=this.yz,e=[];i.I1&&e.push(uC(i.I1,t)),i.D1&&e.push(uC(i.D1,t)),await Promise.all(e)}yTt(t,i,e,s,n,r){const o=this.Fm,h=this.yz;return new zG(o,h,t,i,e,s,n,r,this.MTt,o,this.Avt,this.Mlt,this.jvt)}bTt(t,i,e){return t.GZ(i,e,this.yz)}async TTt(t,i,e,s){const n=this.yTt(this.aE,this.wU,this.rut,this.bc,t,s);return n.yn(ts.Dht,this.STt),n.yn(Tf.Wv,this.Ds),await n.oX(i,e),n}NTt(t){void 0===t&&(t=!1),this.ITt.g_(),this.L5.g_(),this.DTt.g_(),this.DTt=new Bd,this.ETt=this.kTt(this.LTt,this.x5,this.ETt,t,this.DTt.f_).catch(this.pmt)}async kTt(t,i,e,s,n){await Promise.all([t,i,e]),Vr(n),await Jr(this.xTt.OL,n);const r=this.CTt;await r.aat(),this.M0(),Vr(n);const o=r.yc,h=r.mmt,a=r.vmt;let u=this.OTt(o,a,o,h,!1),c=this.jTt(a,u);!s&&this.fTt(c)?await this.RTt(a,u,c):(u=this.OTt(o,a,o,h,!0),c=this.jTt(a,u),await this.PTt(a,u,c,n)),Vr(n),this.Eg?this.JA(this.U_):this.zTt(),this.BTt()}async RTt(t,i,e){const s=this.CTt;await this.wTt(e),this.UTt=e,await this.bTt(s,t,i),await s.dat(As.Fot)}async PTt(t,i,e,s){const n=this.CTt;this.z5(),this.QTt();const r=this.FTt;await this.vTt(),await this.E1(e),this.UTt=e,await this.bTt(n,t,i);try{const t=this.YTt(r,!1,!0,s);await n.dat(As.Fot),await t}finally{this.Y5(),this.GTt()}}get ht(){return this.YT}get _z(){const t=this.FTt,i=this.VTt,e=i.WB(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get VTt(){var t,i,e;const s=null!=(e=null==(t=this.CTt)?void 0:t.O_)?e:Ri.oU();var n;const r=null!=(n=null==(i=this.WTt)?void 0:i.O_)?n:Ri.oU();return s.YB(r)}get O_(){return this.VTt.ks()}get R_(){var t;const i=null==(t=this.sAt)?void 0:t.jlt,e=null==i?void 0:i.jpt;if(!i||!e)return;const s=e.getTime(),n=1e3*this.U_;return new Date(n+s)}set R_(t){var i;const e=null==(i=this.sAt)?void 0:i.jlt,s=null==e?void 0:e.jpt;if(!t||!e||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.JA(r-n)}get bt(){return this.bc}get FTt(){return void 0!==this.s5?this.s5:void 0!==this.HTt?this.HTt:this.Fm.U_}get U_(){return this.FTt}set U_(t){this.F_(t)}F_(t,i){this.JA(t,t===1/0)}get ct(){let t=NaN;return this.CTt&&this.CTt.nmt?t=this.CTt.jn:this.sAt&&void 0!==this.sAt.jlt.Av&&(t=this.sAt.jlt.Upt?this.sAt.jlt.Upt.bmt():1/0),t}get jn(){return this.ct}get G_(){return!(!this.CTt||!this.CTt.nmt)&&(this.Eg?this.FTt===this.CTt.jn:this.Fm.G_)}get lt(){return this.vz}get H_(){return this.mz}get Z_(){}XTt(){var t;const i=this.ZTt;if(0===i.U)return!0;var e;return(null!=(e=null==(t=this._z)?void 0:t.jn)?e:this.FTt)>=i.Cn(0)}qTt(){var t;if(!this.sAt)return!1;if(this.sAt.jlt.Av!==Vs.Sj)return!1;const i=null==(t=this.CTt)?void 0:t.yc;if(i&&i.Eht)return!0;const e=[];for(const t of this.sAt.jlt.omt){const i=t.$pt,s=t.vMt;void 0!==i&&void 0!==s&&e.push(i,s)}const s=new Ri(e).FB();return function(t,i,e){if(!i.U||!e.U)return Ri.oU();const s=i.Cn(0),n=i.jn(i.U-1),r=t.Sn(e).BB().Sn(t).YB(i);return Ri.rU(r.Cn(0),r.jn(r.U-1)).GB(r).JB(((t,i)=>t<s&&i<=n&&i-t>Vt))}(this.VTt,this.ZTt,s).U>0}get eg(){return ol({},this.pTt,{qT:Gu.lL.OP(),KT:this.KTt,JT:{amountOfBufferedAudioSegments:this.JTt,amountOfBufferedVideoSegments:this.$Tt}})}get pTt(){return function(t,i){return{HT:t.HT+i.HT,XT:t.XT+i.XT,ZT:t.ZT+i.ZT}}(this.mTt,this.Fm.rg())}get og(){return this.Fm.og}set og(t){this.Fm.og=t}get fg(){return this.r5?this.tSt:this.CTt&&this.CTt.nmt?this.iSt:this.tSt}get gg(){return this.Fm.gg}set gg(t){this.Fm.gg=t}get pg(){let t=this.Uo;return this.CTt&&(t=t.YB(this.eSt)),t.FB(.1).ks()}get eSt(){return this.Fm.pg}sSt(t){this.Uo=this.Uo.YB(t)}get yg(){return this.Az}set yg(t){this.Az=t,this.nSt()}get Sg(){let t=this.Fm.Sg;return this.rSt&&(t=_.max(qo.Xn,t)),t}get ZTt(){return this.oSt(!1)}get hSt(){return this.oSt(!0)}get Ig(){return this.ZTt.ks()}get Eg(){return this.aU||this.aSt}get aSt(){return this.Fm.Eg}get s2(){return this.Fm.s2}get Mz(){}get uSt(){var t,i;return null!=(i=null==(t=this.sAt)?void 0:t.jlt.Av)?i:Vs.Tj}get nt(){return this.Dl}get rt(){return this.VT}get Cg(){var t;return this.cSt||(null==(t=this.lSt())?void 0:t.Ti)||0}get Rg(){var t;return this.dSt||(null==(t=this.lSt())?void 0:t.ji)||0}get zg(){return this.Fm.zg}set zg(t){this.Fm.zg=Qh(t,0,1)}get Qg(){return this.bz}get Yg(){return!1}set Yg(t){}get Tz(){return this.Sz}fSt(t){t.yn(IH,this.Ds),t.yn(Tf.lm,this._St),t.yn(Tf.Tv,this.gSt),t.yn(hi.ha,this.wSt),t.yn(Tf.Nv,this.vSt),t.yn(Tf.Kv,this.mSt),t.yn("_mt",this.pSt),t.yn("Vvt",this.pSt)}ASt(t){t.fn(IH,this.Ds),t.fn(Tf.lm,this._St),t.fn(Tf.Tv,this.gSt),t.fn(hi.ha,this.wSt),t.fn(Tf.Nv,this.vSt),t.fn(Tf.Kv,this.mSt),t.fn("_mt",this.pSt),t.fn("Vvt",this.pSt)}ySt(t){t.yn(Tf.Zv,this.Ds)}MSt(t){t.fn(Tf.Zv,this.Ds)}lSt(){if(!this.CTt)return;const t=bo(this.CTt.vmt,(t=>t.Zht===Jt.VA));return t?t.Hw:void 0}oSt(t){var i;const e=null==(i=this.sAt)?void 0:i.jlt;if(!e)return Ri.oU();const s=e.tbt;let n=t?e.gMt:e.wAt;if(void 0===s||void 0===n)return Ri.oU();if(!t){const t=this.eSt;t.U>0&&t.jn(t.U-1)>n&&(n=_.min(t.jn(t.U-1),e.gMt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),Ri.rU(s,n).PB()}async $n(t,i){let e,s;Vr(i);const n=this.sAt.jlt;try{e=n.ibt,s=n.$Mt}catch(t){throw new g("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!e)throw new g("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new g("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.bSt(t.textTracks),this.z5();const r=this.Eot(e),o=BW(e,r,void 0,void 0,this.Jvt),h=this.OTt(e,o,e,o,!0);o.forEach((t=>t.Rt=!0));const a=this.jTt(o,h);await this.E1(a),this.UTt=a,Vr(i);const u=await this.TTt(e,r,o,h);Vr(i),this.TSt(u),this.Y5(),Vr(i),await u.dat(),Vr(i),!this.SSt&&s>0&&this.JA(s,!0,PW.Ebt),this.aU||(this.zTt(),this.NSt())}zTt(){this.ITt.g_(),this.ITt=new Bd,this.LTt=this.ISt(this.LTt,this.ETt,this.ITt.f_).catch(this.pmt)}DSt(){this.ITt.g_()}async ISt(t,i,e){for(await Promise.all([t,i]),Vr(e);;){var s;const t=null==(s=this.CTt)?void 0:s.yc;if(!t){0;break}if(!await this.ESt(t,e)){0;break}}}async ESt(t,i){var e;Vr(i);const s=this.CTt;for(0;this.sAt.jlt.Av===Vs.Sj&&void 0===(null==(e=this.dMt(t))?void 0:e.$pt);)await Jr(this.kSt.gbt,i),await this.LSt();for(Vr(i),await this.LSt(),Vr(i);!s.$vt();)await s.k_(JF.Ldt,i),await this.LSt();Vr(i),await this.LSt(),Vr(i);const n=this.dMt(t);return n?(this.xSt(n)?await this.CSt(n,i):await this.OSt(n,i),!0):(this.x0(),!1)}xSt(t){var i,e,s,n,r;const o=null!=(r=null==(i=this.bc)?void 0:i.seamlessSwitchStrategy)?r:sa.LT;if(o===sa.PT)return!0;if(o===sa.zT)return!1;const h=this.CTt,a=null==h?void 0:h.yc,u=null==h?void 0:h.vmt,c=BW(t,this.Eot(t),a,u,this.Jvt),l=this.OTt(t,c,a,u,!1);if(o===sa.CLEAR_ONLY&&((null==(e=this.CTt)?void 0:e.Svt)||l)||o===sa.SAME_DRM_ONLY&&!((null==(s=this.CTt)?void 0:s.Svt)&&l||!(null==(n=this.CTt)?void 0:n.Svt)&&!l))return!1;const d=this.jTt(c,l);return this.fTt(d)}jSt(){return!0}RSt(t){const i=this.PSt();for(const e of i)e!==t&&(e._v=yi.Ch)}BTt(){if(void 0!==this.zSt){if(this.zSt.pv){const t=bo(this.ht.Rw,(t=>t.Rt));void 0!==t&&this.zSt.gs===t.gs||(this.zSt._v=yi.Ch)}}else this.BSt()}BSt(){if(this.PSt().length)return;const t=bo(this.ht.Rw,(t=>t.Rt));if(void 0===t)return;const i=this.nt.Rw.filter((t=>t.pv));for(const e of i)if(e.gs===t.gs)return e._v=yi.Jn,void(this.zSt=e)}PSt(){return this.nt.Rw.filter((t=>t._v===yi.Jn&&(t.zt===Qe.sD||t.zt===Qe.HA)))}USt(t){if(t&&this.zSt){const i=function(t,i){if(""===t.gs)return;return i.filter((i=>i.gs===t.gs))[0]}(this.zSt,t.nt.Rw);i&&(i._v=yi.Jn)}}async CSt(t,i){var e,s;const n=this.CTt;let r=this.WTt;const o=this.UTt;try{Vr(i);const e=n.yc,s=n.vmt,o=this.Eot(t),h=BW(t,o,e,s,this.Jvt),a=this.OTt(t,h,e,s,!1);h.forEach((t=>t.Rt=!0));const u=this.jTt(h,a);for(0,await n.aat(),this.M0(),Vr(i),r&&r.yc===t?(this.fTt(u)&&await this.wTt(u),this.UTt=u):(r&&await r.gn(!0),this.fTt(u)&&await this.wTt(u),this.UTt=u,r=await this.TTt(t,o,h,a),this.WTt=r,this.ySt(r),this.QSt.Uw=r.nt),await r.dat(),Vr(i);this.FTt<t.Cn;)await this.Fm.k_(Tf.fm,i);Vr(i),this.TSt(r)}catch(t){throw be(t)&&(r&&await r.aat(),o&&this.UTt!==o&&(this.fTt(o)&&await this.wTt(o),this.UTt=o)),t}(null==(s=this.bc)||null==(e=s.dash)?void 0:e.forceSeekToSynchronize)&&await this.FSt(t,i)}async FSt(t,i){const e=Date.now()/1e3;if(void 0===this.YSt)this.YSt=e;else if(e-this.YSt>900){this.YSt=e,this.QTt();const s=_.max(this.FTt,t.Cn);try{await this.YTt(s,!1,!0,i)}finally{this.GTt()}}}async OSt(t,i){for(Vr(i),await this.CTt.aat(),this.M0(),await this.ATt(t.Cn),Vr(i),this.x0();!this.Fm.G_&&this.FTt<t.Cn;)await this.Fm.k_([Tf.fm,Tf.Ov],i);Vr(i);const e=this.CTt.yc,s=this.CTt.vmt,n=this.Eot(t),r=BW(t,n,e,s,this.Jvt),o=this.OTt(t,r,e,s,!0);r.forEach((t=>t.Rt=!0));const h=this.jTt(r,o);this.CTt&&(this.GSt.fn(ct.ra,this.VSt),await this.CTt.gn(),this.GSt.yn(ct.ra,this.VSt),this.CTt=void 0),this.WTt&&(await this.WTt.gn(),this.WTt=void 0),this.QTt(),this.z5();const a=_.max(this.FTt,t.Cn);await this.vTt(),await this.E1(h),this.UTt=h;const u=await this.TTt(t,n,r,o);this.TSt(u);try{const t=this.YTt(a,!1,!0,i);await u.dat(),await at((i=>Promise.race([t,u.k_([JF.Ldt],i)])),i)}finally{this.Y5(),this.GTt()}}async LSt(){const t=this.WTt;t&&t.yc.Eht&&(await t.gn(!0),this.WTt=void 0)}static WSt(t,i){const e=[],s=[];let n=!i.some((t=>t.Sdt.some((t=>"main"===t.lT))));for(const t of i){if(-1!==e.indexOf(t))continue;const r=LH(t.Wlt.concat(t.Sdt),n);n=!1;const o=t.Bot.map((t=>t.Lht)),h=new ZF(t,o,r),a=xH(t,i);for(const t of a)h.hdt(t),e.push(t);s.push(h)}return new RW(t,s)}Eot(i){const e=[],s=[];for(const t of i.Xvt)t.Av!==Jt.WA&&t.Av!==Jt.VA||(0===t.Bot.length?this.Co(new eY("No supported representation found in the AdaptationSet with mimetype : "+t.Av)):t.Av===Jt.WA?e.push(...t.kot):s.push(...t.kot));const n=[];return e.length>0&&n.push(t.WSt(Jt.WA,e)),s.length>0&&n.push(t.WSt(Jt.VA,s)),n}jTt(t,i){var e,s,n,r,o,h,a,u;const c=t.map((t=>{var i;return vn.Jct(null!=(i=t.rdt)?i:t.Bot,Lw(t.Zht,this.Jvt))})).map((t=>({Nz:t.Nz}))),l=null==(s=this.bc)||null==(e=s.dash)?void 0:e.desiredTimescale;var d;const f=(null==(n=this.bc)?void 0:n.seamlessSwitchStrategy)!==sa.zT&&(null==(r=this.bc)?void 0:r.seamlessSwitchStrategy)!==sa.CLEAR_ONLY&&(null==(o=this.bc)?void 0:o.seamlessSwitchStrategy)!==sa.SAME_DRM_ONLY&&(null!=(d=null==(a=this.bc)||null==(h=a.dash)?void 0:h.needsTimescaleShifting)?d:ra.Ys.D0),_=null==(u=this.bc)?void 0:u.useManagedMediaSource;return{Av:de.Sj,F1:c,Iz:fH(i),B3:null==i?void 0:i.B3,D0:f,E0:l,t2:_}}static HSt(t,i){if(!t.length)return;let e;for(const s of t){const t=0===s.cdt.length;e=hH(e,lH(s.Out,i,t))}return(null==i?void 0:i.preferredKeySystems)&&e&&(e.Nvt=wH(e.Nvt,i.preferredKeySystems)),e}OTt(i,e,s,n,r){var o,h;const a=this.bc.contentProtection;let u=t.HSt(e,a);if(void 0!==u)return u;var c;const l=null!=(c=null==(o=this.bc)?void 0:o.seamlessSwitchStrategy)?c:sa.LT;if(l===sa.zT||l===sa.CLEAR_ONLY||l===sa.SAME_DRM_ONLY)return;const d=null==(h=this.CTt)?void 0:h.Svt;if(!r&&void 0!==d){const t=!d.B3;if(l===sa.LT&&t&&!this.jSt())return;return d}const f=!r&&l===sa.LT;return u=this.XSt(i,a,s,n,f),void 0!==u?(u.B3=!0,u):void 0}XSt(i,e,s,n,r){let o=i,h=!1;for(;;){if(o=h?this._Mt(o):this.dMt(o),void 0===o){if(h)return;h=!0,o=i;continue}const a=BW(o,this.Eot(o),s,n,this.Jvt),u=t.HSt(a,e);if(r){const t=this.jTt(a,u);if(!this.fTt(t))return}if(void 0!==u)return u}}bSt(t){for(const i of t)i.src&&this.Rz.nE(i);Up(this.Rz.Z)}Hg(){var t;const i=this.fg;this.tSt=!0,i||(this.r5||(this.ZSt(new Fh),this.qSt()),(null==(t=this.fz)?void 0:t.Lm)&&this.fz.Zg(),this.KSt())}Xg(){this.JSt||(this.JSt=new Oi),this.$St();const t=this.JSt.OL;return $r(t),t}$St(){if(this.tSt=!1,this.v5=!0,this.nSt(),this.G_){const t=this.ZTt;t.U>0&&this.JA(t.Cn(0))}this.r5||this.A5().then(this.tNt,this.ZSt),this.STt(),this.KSt()}get iSt(){return this.Fm.fg}A5(){return this.Fm.Xg()}qSt(){this.Fm.Hg()}z5(){this.r5||(this.tSt=this.fg,this.r5=!0,this.qSt())}Y5(){this.r5&&(this.r5=!1,this.tSt||this.A5().then(this.tNt,this.ZSt),this.STt(),this.KSt())}KSt(){const t=this.Bj,i=this.fg;t!==i&&(this.Bj=i,i?this.Co(new Ye(this.U_)):this.Co(new Rt(this.U_)))}JA(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=PW.Dbt),this.SSt=!0,this.ITt.g_(),this.L5.g_(),this.aU=!0,this.s5=t,this.sSt(this.eSt),this.iNt(new Ur(this.U_)),this.L5=new Bd,this.x5=this.C5(t,this.LTt,this.x5,this.ETt,this.L5.f_,i,e).catch(this.pmt),this.x5}eNt(){this.L5.g_()}async C5(t,i,e,s,n,r,o,h){var a;void 0===r&&(r=!1),void 0===o&&(o=PW.Dbt),void 0===h&&(h=!1),null==(a=this.fz)||a.Zg();try{var u,c;0,await Promise.all([i,e,s]),Vr(n),await Jr(this.xTt.OL,n);const a=this.ZTt.zB(t);this.s5=a;const l=h||(null==(c=this.bc)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.U_,d=this.sNt(a),f=this.CTt;if(l||!f||!f.Ig.gr(a)&&o!==PW.Ebt&&f.yc!==d){if(d){let t=this.WTt;if(this.z5(),f&&await f.aat(),t&&t.yc===d&&!l){const i=this.jTt(t.mmt,t.Svt);this.M0(),this.fTt(i)&&await this.wTt(i),this.UTt=i}else{t&&await t.gn(!0);const i=this.Eot(d),e=null==f?void 0:f.yc,s=null==f?void 0:f.vmt,n=BW(d,i,e,s,this.Jvt);let r=this.OTt(d,n,e,s,!1);n.forEach((t=>t.Rt=!0));let o=this.jTt(n,r);this.xSt(d)&&!l?(this.M0(),this.fTt(o)&&await this.wTt(o)):(r=this.OTt(d,n,e,s,!0),o=this.jTt(n,r),f&&(this.GSt.fn(ct.ra,this.VSt),await f.gn(),this.GSt.yn(ct.ra,this.VSt),this.CTt=void 0),await this.vTt(),await this.E1(o)),this.UTt=o,t=await this.TTt(d,i,n,r),this.WTt=t,this.QSt.Uw=t.nt,this.ySt(t)}await t.dat(As.Got),this.TSt(t)}}else{0;const t=this.WTt;if(t&&!t.hmt){await t.aat(),this.M0();const i=this.jTt(f.mmt,f.Svt);this.fTt(i)&&await this.wTt(i),this.UTt=i}}0;const _=this.YTt(a,r,!1,n);this.s5=void 0,await this.CTt.dat(As.Got),Vr(n),this.zTt(),await _,Vr(n),this.Y5(),this.aU=!1,this.nNt(new Ko(this.U_)),this.NSt()}catch(t){if(be(t))return void 0;0}}NSt(){if(this.fg||this.Eg||void 0===this.Km)return;const t=this.U_;var i,e;this.U_+this.Km-this.Qg.wd.maximumOffset<t?null==(i=this.fz)||i.Cn():null==(e=this.fz)||e.Zg()}async YTt(t,i,e,s){let n,r,o=!0,h=t;for(;;){const a=this.hSt;if(a.U>0){const i=a.zB(t);h!==i&&(a.gr(h)&&this.sAt.jlt.Av===Vs.Sj||(h=i,o=!0))}if(o)o=!1,n&&$r(n),null==r||r.g_(),r=new Bd,r.w_(s),n=this.rNt(h,i,e,r.f_);else if(!this.aSt&&!this.s2)break;await at((t=>Promise.race([n,this.k_([Tf.nm,Tf.Lv],t),this.sAt.jlt.k_(ts.Nht,t)])),s)}}async rNt(t,i,e,s){for(this.Fm.JA(t,i,e);this.aSt||this.s2;)await this.Fm.k_([Tf.$v,Tf.Fv],s)}QTt(){void 0===this.HTt&&(this.HTt=this.FTt,this.Fm.fn(Tf.im,this.iNt),this.Fm.fn(Tf.$v,this.nNt))}GTt(){if(void 0===this.HTt)return;const t=this.FTt;this.HTt=void 0,this.Fm.yn(Tf.im,this.iNt),this.Fm.yn(Tf.$v,this.nNt),this.FTt!==t&&this.wc()}oNt(t){this.Uo=this.Uo.YB(t)}sNt(t){const i=this.sAt.jlt,e=i.omt.filter((t=>t.ct>=.2));if(0===e.length)return;const s=e[0];if(t<=s.Cn)return s;for(const i of e)if(i.jn>t)return i;return i.Av!==Vs.Sj?e[e.length-1]:void 0}_Mt(t){let i=t.fMt;for(;i&&i.ct<.2;)i=i.fMt;return i}dMt(t){let i=t.lMt;for(;i&&i.ct<.2;)i=i.lMt;return i}async ga(t,i,e){var s;if(this.Lz.HP(t.contentProtection),this.hNt(),this.bc&&!Yh(this.bc)&&await this.tr(),!t||Yh(t))return;this.dE=new Bd,e&&this.dE.w_(e),this.bc=t,this.aNt=i,this.Jvt=t.abr,this.jvt=t.ignoreEmbeddedTextTrackTypes;const n=JW(new XW(this.aE,Boolean(this.bc.useCredentials),this.Mlt),this.rut);var r;if(this.JMt(!0),this.kSt=new OW({yv:ra.Dh(this.bc.src),nbt:null!=(r=null==(s=this.bc.latencyConfiguration)?void 0:s.targetOffset)?r:this.bc.liveOffset,ubt:this.bc.timeServer,tE:this.bc.useCredentials},this.uNt(this.Jvt),this.aE,n,this.bc.dash),this.sAt=this.kSt.Tr,this.sAt.jlt.yn(Tf.Gv,this.cNt),this.sAt.jlt.yn(Tf.Vv,this.lNt),this.sAt.jlt.yn(lW.MMt,this.dNt),this.sAt.jlt.yn(ts.Nht,this.STt),await this.fNt.$n(this.sAt.jlt),await this._Nt.$n(this.sAt.jlt),Ai(this.jvt,O.EMSG)||(this.Avt=new SH(this.oE),this.Dl.tz(this.Avt.Z),await this.Avt.$n(this.sAt.jlt)),t.latencyConfiguration){const i=t.latencyConfiguration;this.fz=new Lo(this,this.Fm,i),this.fz.Rt=!0,this.bz.ka(this.fz)}this.nSt()}async gNt(){const t=this.sAt.jlt.cg;var i,e;(this.JMt(t),t)?this.pSt():(await Promise.all([null==(i=this.CTt)?void 0:i.aat(As.rht),null==(e=this.WTt)?void 0:e.aat(As.rht)].filter(Ks)),this.DSt(),this.eNt(),this.DTt.g_())}get cg(){return this.KMt}JMt(t){this.KMt!==t&&(this.KMt=t,this.Co(t?new $o:new jo))}nSt(){return this.sAt?(this.wNt=this.vNt(this.wNt,this.dE.f_),this.wNt.catch(this.pmt)):Promise.resolve()}async vNt(t,i){t&&(await t,Vr(i));try{this.yg===ut.LT||this.v5?await this.mNt(i):this.yg===ut.ZA&&await this.pNt(i)}catch(t){throw me(t),this.rB(new ao(qa.MANIFEST_LOAD_ERROR,t.message,t)),t}}async mNt(t){await this.pNt(t),this.ANt||(this.ANt=!0,this.xTt.w_(this.$n(this.aNt,t)));try{await this.xTt.OL}catch(t){me(t),this.rB(new ao(qa.MEDIA_DECODE_ERROR,t.message,t))}}async pNt(t){await Jr(this.kSt.W,t);const i=this.sAt.jlt;if(void 0===this.fz&&i.Av===Vs.Sj){const t=i.Wpt,e=(null==t?void 0:t.EMt)?(null==t?void 0:t.EMt)/1e3:i.ebt,s={minimumOffset:(null==t?void 0:t.NMt)?(null==t?void 0:t.NMt)/1e3:.5*e,maximumOffset:(null==t?void 0:t.DMt)?(null==t?void 0:t.DMt)/1e3:1.5*e,targetOffset:e,forceSeekOffset:2.5*e,minimumPlaybackRate:Zt,maximumPlaybackRate:pi};this.fz=new Lo(this,this.Fm,s),this.bz.ka(this.fz)}}TSt(i){const e=this.CTt;i!==e&&(this.CTt&&this.ASt(this.CTt),this.WTt&&this.MSt(this.WTt),e&&this.sSt(this.eSt),this.CTt=i,this.WTt=e,this.fSt(this.CTt),this.WTt&&this.ySt(this.WTt),this.YT.Uw=i.ht,this.VT.Uw=i.rt,this.USt(i),this.GSt.fn(ct.ra,this.VSt),t.yNt(this.GSt),this.GSt.yn(ct.ra,this.VSt),this.GSt.Uw=i.nt,this.QSt.Uw=void 0,this.BSt())}static yNt(t){for(const i of t.Rw)i._v=yi.Ch}ge(){this.Fm.ge()}be(){this.Fm.be()}rB(t){this.vz||($r(this.tr()),this.vz=ia(t),this.mz=t,this.Co(new as(t)))}hNt(){this.vz=void 0,this.mz=void 0}_Tt(){const t=this.yz;t&&(t.D1&&(t.D1.iX=this.wU.lX),t.I1&&(t.I1.iX=this.wU.lX))}gTt(){const t=this.yz;t&&(t.D1&&(t.D1.rX=this.wU.rX),t.I1&&(t.I1.rX=this.wU.rX))}determineStallJumpTarget(){if(this.CTt)return this.CTt.$vt()&&this.U_>this.CTt.jn-rC&&!this.CTt.nmt?this.CTt.jn:void 0}async tr(){if(this.MNt)return this.MNt;try{this.MNt=this.bNt(),await this.MNt}finally{this.MNt=void 0}}async bNt(){this.gg=1,this.dE.g_(),this.eNt(),this.DSt(),this.DTt.g_(),this.xTt.g_(),this.SSt=!1,this.Hg(),this.v5=!1,this.YT.Uw=void 0,this.VT.Uw=void 0,this.GSt.Uw=void 0,this.QSt.Uw=void 0,this.wNt&&(await this.wNt.catch(Br),this.wNt=void 0),await Promise.all([this.LTt,this.x5,this.ETt,this.xTt.OL.catch(Br)]),this.CTt&&(await this.CTt.gn(!0),this.CTt=void 0),this.WTt&&(this.MSt(this.WTt),await this.WTt.gn(!0),this.WTt=void 0),await this.vTt(),this.UTt=void 0,this.zSt=void 0,this.zz.tr(),await this.fNt.tr(),await this._Nt.tr(),void 0!==this.Avt&&(this.Dl.sz(this.Avt.Z),await this.Avt.gn(),this.Avt=void 0),this.oE.tr(),this.sAt&&(this.sAt.jlt.fn(Tf.Gv,this.cNt),this.sAt.jlt.fn(Tf.Vv,this.lNt),this.sAt.jlt.fn(lW.MMt,this.dNt),await this.kSt.gn(),this.sAt=void 0),this.rSt=!1,this.TNt=NaN,this.SNt=0,this.NNt=0,this.HTt=void 0,this.r5=!1,this.Uo=Ri.oU(),this.Bj=!0,this.s5=void 0,this.INt=!1,this.aU=!1,this.ANt=!1,this.xTt=new Oi,this.KTt=0,this.JTt=0,this.$Tt=0,this.bc=void 0,this.aNt=void 0,this.jvt=[],this.YSt=void 0,this.bz.tr(),this.fz=void 0,this.mTt={HT:0,XT:0,ZT:0},await this.Rz.tr(),this.Fm.Pz()}async gn(){this.Vo(),this.hNt(),await this.tr(),this.Vo(),this.YT.gn(),this.VT.gn(),this.GSt.gn(),this.QSt.gn(),this.Dl.gn(),this.zz.gn(),this.DNt.h_(),await this.fNt.gn(),await this._Nt.gn(),this.oE.gn(),this.Fm.fn(Tf.Lv,this.E6),this.Fm.fn(oA.Cv,this.H3),this.Fm.fn(Tf.Ov,this.N6),this.Fm.fn(Tf.im,this.iNt),this.Fm.fn(Tf.$v,this.nNt),this.Fm.fn(Tf.Jv,this.mSt),this.Fm.fn(Tf.fm,this.wc),this.Fm.fn([Tf.jh,Tf.Sh],this.ENt),this.Fm.fn(DH,this.Ds),await this.Rz.gn(),this.Dl.gn(),this.wU.fn("tX",this.kNt),this.wU.fn("nX",this.LNt),this.Fm.fn(hi.ha,this.xNt),this.Fm.fn([Tf.Iv,Tf.Nv],this.Ds),this.Fm.Qz=void 0,this.Fm.G6=void 0}Gg(){return this.Fm.ya}get K_(){return!1}qg(){return!1}Kg(){}Jg(){}$g(){}iw(){this.NTt(!0)}get Km(){var t;const i=null==(t=this.sAt)?void 0:t.jlt;if(i&&i.Av===Vs.Sj&&i.jpt)return i.Olt().getTime()/1e3-i.jpt.getTime()/1e3-this.U_}constructor(t,i,e,s,n,r,o){super(),this.CTt=void 0,this.WTt=void 0,this.v5=!1,this.TNt=NaN,this.vz=void 0,this.mz=void 0,this.r5=!1,this.HTt=void 0,this.s5=void 0,this.INt=!1,this.SNt=0,this.NNt=0,this.rSt=!1,this.dE=new Bd,this.xTt=new Oi,this.ANt=!1,this.sAt=void 0,this.kSt=void 0,this.KMt=!0,this.tSt=!0,this.JSt=void 0,this.Uo=Ri.oU(),this.Az=ut.yB,this.wNt=void 0,this.Bj=!0,this.bc=void 0,this.aNt=void 0,this.Jvt=void 0,this.jvt=[],this.aU=!1,this.ITt=new Bd,this.LTt=Promise.resolve(),this.L5=new Bd,this.x5=Promise.resolve(),this.SSt=!1,this.DTt=new Bd,this.ETt=Promise.resolve(),this.UTt=void 0,this.Avt=void 0,this.KTt=0,this.JTt=0,this.$Tt=0,this.Sz=new eS,this.YSt=void 0,this.mTt={HT:0,XT:0,ZT:0},this.yz=void 0,this.fz=void 0,this.pSt=()=>{this.NTt()},this.wc=()=>{this.Co(new ri(this.U_,this.R_))},this.H3=t=>{this.Co(new zW(this.U_,t.fL,t.SL))},this._St=t=>{this.KTt+=t.KT,this.Co(t)},this.gSt=t=>{const i=t.segments.filter((t=>t._ct));t.track===Jt.WA?this.JTt=i.length:t.track===Jt.VA&&(this.$Tt=i.length)},this.E6=()=>{const t=this.ct;S(t)||t===this.TNt||(this.TNt=t,this.Co(new Te(this.TNt)))},this.ENt=()=>{this.STt(),this.KSt()},this.N6=t=>{this.G_&&this.Co(t)},this.lNt=t=>{this.Ds(t),this.rSt||(this.rSt=!0,this.DNt.CNt())},this.cNt=()=>{this.sAt.jlt.fn(Tf.Gv,this.cNt),this.Co(new tn)},this.vSt=t=>{var i;if(t.errorObject.code===qa.CONTENT_PROTECTION_OUTPUT_RESTRICTED&&(null==(i=this.CTt)?void 0:i.mmt.every((t=>!t.ldt))))return;this.rB(t.errorObject),this.Co(t)},this.wSt=t=>{this.rB(t.errorObject)},this.pmt=t=>{be(t)||this.rB(new ao(qa.MEDIA_DECODE_ERROR,t.message,t))},this.STt=()=>{if(!this.fg)if(this.XTt())if(this.qTt()){const t=this.sAt.jlt.$Mt;this.JA(t,!0)}else;else{const t=this.sAt.jlt.$Mt;this.JA(t,!0)}},this.iNt=t=>{this.INt=this.Eg,this.Co(t)},this.nNt=t=>{const i=this.INt,e=this.Eg;this.INt=e,i&&!e&&this.Co(t)},this.mSt=()=>{const t=this.Rg,i=this.Cg;this.SNt===t&&this.NNt===i||(this.SNt=t,this.NNt=i,this.Co(new Cs))},this.VSt=t=>{const i=t.Lt;i._v===yi.Jn?(this.RSt(i),this.zSt=i):i===this.zSt&&i._v===yi.Ch&&(this.zSt=void 0,this.BSt())},this.tNt=()=>{this.r5||this.JSt&&(this.JSt.LL(),this.JSt=void 0)},this.ZSt=t=>{this.r5||this.JSt&&(this.JSt.xL(t),this.JSt=void 0)},this.dNt=()=>{this.gNt().catch(this.pmt)},this.xNt=t=>{this.rB(ar(t.lt))},this.kNt=()=>{this._Tt()},this.LNt=()=>{this.gTt()},this.aE=t,this.rut=new NH(n),this.Fm=r,this.MTt=o,this.wU=e,this.wU.yn("tX",this.kNt),this.wU.yn("nX",this.LNt),this.bz=s,this.Mlt=i.retryConfiguration,this.YT=new ul,this.VT=new ul,this.Lz=new ju(t),this.Fm.yn(Tf.Lv,this.E6),this.Fm.yn(oA.Cv,this.H3),this.Fm.yn(Tf.Ov,this.N6),this.Fm.yn(Tf.im,this.iNt),this.Fm.yn(Tf.$v,this.nNt),this.Fm.yn(Tf.Jv,this.mSt),this.Fm.yn(Tf.fm,this.wc),this.Fm.yn([Tf.jh,Tf.Sh],this.ENt),this.Fm.yn(DH,this.Ds),this.Fm.yn(hi.ha,this.xNt),this.Fm.Qz=this.Lz,this.Fm.G6=this,this.Fm.yn([Tf.Iv,Tf.Nv],this.Ds),this.DNt=new kH(this,this.Fm),this.zz=new Xe(this.DNt,!0),this.zz.yn($.Tm,this.STt),this.zz.yn(Hs,this.Ds),this.GSt=new Sf,this.GSt.yn(ct.ra,this.VSt),this.QSt=new Sf,this.oE=this.ONt(),this.fNt=new sH(this.oE),this._Nt=new vH(this.oE),this.Rz=new kr(this.Fm,this.aE),this.Dl=new vl([this.GSt,this.fNt.Z,this._Nt.Z,this.Rz.Z])}},kH=class extends fl{get Sg(){return this.Qo.Sg}CNt(){this.Co(new Dr(this.U_,this.Sg))}constructor(t,i){super(i),this.Qo=t}};function LH(t,i){const e=t.filter((t=>"urn:mpeg:dash:role:2011"===t.irt)).map((t=>t.lT)).filter(Ks);return i||Ai(e,"main")?Ai(e,"caption")?"captions":Ai(e,"subtitle")?"subtitles":Ai(e,"dub")?"translation":"main":Ai(e,"sign")?"sign":Ai(e,"description")?"descriptions":Ai(e,"commentary")?"commentary":"alternative"}function xH(t,i){var e;const s=bo([...t.Zmt,...t.qmt],(t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.irt));var n;const r=null!=(n=null==s||null==(e=s.lT)?void 0:e.split(","))?n:[],o=[];for(const t of r){const e=Number(t),s=bo(i,(t=>t.o===e));s&&o.push(s)}return o}var CH=class extends EH{Vg(){if(wh(this.Fm))return this.Fm.Vg()}get cSt(){return wh(this.Fm)?this.Fm.Cg:0}get dSt(){return wh(this.Fm)?this.Fm.Rg:0}async gn(){var t;await super.gn(),null==(t=this.jNt)||t.gn()}xSt(t){var i,e;return((null!=(e=null==(i=this.bc)?void 0:i.seamlessSwitchStrategy)?e:sa.LT)!==sa.LT||!Po.Kk)&&super.xSt(t)}jSt(){return!(Po.wk&&Po.pk<3)&&super.jSt()}ONt(){return new Ch(this,new pn)}uNt(t){return cQ(t)}constructor(t,i,e,s,n,r,o){super(t,i,e,s,n,r,new lQ(o)),this.hrt=o,Po.zk&&(this.jNt=new MQ(this))}},OH=class extends CH{async gn(){await super.gn(),await this.Yz.Fz(this.Fm)}constructor(t,i,e,s,n,r,o,h){const a=new At(r);super(t,i,e,s,n,a.oB(o),h),this.Yz=a}},jH=class extends vQ{get RNt(){return this.ast.RNt}j_(){return super.j_().KA(this.RNt)}Crt(){return super.Crt().KA(this.RNt)}V$(t,i,e){const s=this.RNt;return super.V$(t,{F7:i.F7-s,ct:i.ct,pI:i.pI-s},e)}u0(t,i){const e=this.RNt;return super.u0(_.max(0,t-e),_.max(0,i-e))}rS(t,i,e){const s=this.RNt;return super.rS(_.max(0,t-s),_.max(0,i-s),e)}B0(t,i){const e=this.RNt;super.B0(_.max(0,t-e),_.max(0,i-e))}U0(t,i){const e=this.RNt;super.U0(_.max(0,t-e),_.max(0,i-e))}constructor(t,i){super(i),this.ast=t}},RH=class extends gQ{get RNt(){return this.ast.RNt}Td(){return super.Td()+this.RNt}P1(t){super.P1(t-this.RNt)}Dg(){return super.Dg().KA(this.RNt)}Q1(t,i,e,s){const n=this.RNt;super.Q1(t-n,i-n,e,s)}Nrt(t){return new jH(this,t)}constructor(t,i){super(i),this.Trt(i),this.ast=t}},PH=class extends qh{get art(){return this.Fm}get RNt(){return this.PNt}set RNt(t){this.PNt=t}j_(){return super.j_().KA(this.PNt)}P_(){return zH(super.P_(),this.PNt)}Q_(){return super.Q_()+this.PNt}Td(){return super.Td()+this.PNt}Ag(){return super.Ag().KA(this.PNt)}Dg(){return super.Dg().KA(this.PNt)}JA(t,i,e){const s=_.max(0,t-this.PNt);super.JA(s,i,e)}gz(t){super.gz(zH(t,-this.PNt))}xg(){return this.Dl}rE(t,i,e,s,n,r,o,h){return this.oE.rE(t,i,e,s,n,r,o,h)}fE(t){this.oE.fE(t)}Pz(){this.oE.tr(),super.Pz()}Cz(){return!1}jz(t,i,e,s,n){throw new g("Not supported")}h_(){return this.p7.gn(),this.m7.gn(),this.oE.gn(),this.Dl.gn(),super.h_()}Art(t){return new RH(this,t)}prt(t){return new Yi(t)}ew(t){let i;switch(t.type){case Tf.jh:i=new Rt(t.currentTime+this.PNt);break;case Tf.Sh:i=new Ye(t.currentTime+this.PNt);break;case $.Sm:i=new $e(t.currentTime+this.PNt);break;case Tf.fm:i=new ri(t.currentTime+this.PNt,zH(t.currentProgramDateTime,this.PNt));break;case Tf.Zv:i=new Gt(t.currentTime+this.PNt);break;case Tf.im:i=new Ur(t.currentTime+this.PNt);break;case Tf.$v:i=new Ko(t.currentTime+this.PNt);break;case Tf.Uv:i=new vC(t.currentTime+this.PNt);break;case Tf.Fv:i=new aj(t.currentTime+this.PNt);break;case Tf.Ov:i=new pa(t.currentTime+this.PNt);break;case Tf.qv:i=new Zs(t.currentTime+this.PNt,t.playbackRate);break;case Tf._m:i=new St(t.currentTime+this.PNt,t.volume);break;case Tf.Lv:i=new Te(t.duration+this.PNt);break;case $.Nw:i=new Dr(t.currentTime+this.PNt,t.readyState);break;default:i=t}super.ew(i)}be(){super.be(),this.m7.be()}ge(){super.ge(),this.m7.ge()}constructor(t){super(t),this.PNt=0,this.oE=new Ch(this,new pn),this.Dl=new vl([this.oE.nt,super.xg()]),this.m7=new Mj,this.m7.Y6(this.pz.parentElement),this.p7=new GR(this.m7.we,this.Iu,this.Dl,this.Ol,this.ya)}};function zH(t,i){return t?new Date(t.getTime()+1e3*i):void 0}var BH=class extends dQ{oB(t){if(t===Jt.VA)return new PH(super.oB(t))}async Fz(t){const i=t;await i.h_(),await super.Fz(i.art)}},UH=class extends CH{async E1(t){await super.E1(t),void 0===this.zNt&&(this.zNt=this.BNt(),this.Fm.RNt=this.zNt)}BNt(){if(this.ct===1/0){const t=this.ZTt;if(t.U>0)return _.max(0,t.Cn(0)-300)}return 0}C5(t,i,e,s,n,r,o,h){return void 0===r&&(r=!1),void 0===o&&(o=PW.Dbt),void 0===h&&(h=!1),h||(h=this.ct===1/0&&Po.wk&&Po.pk<3&&t<=this.U_),super.C5(t,i,e,s,n,r,o,h)}async tr(){await super.tr(),this.zNt=void 0,this.Fm.RNt=0}async gn(){await super.gn(),await this.Fm.h_(),await this.Yz.Fz(this.Fm)}static LO(t){var i;return(!t||"google-dai"!==(null==t||null==(i=t.ssai)?void 0:i.integration))&&(Po.wk&&Po.pk<4)}constructor(t,i,e,s,n,r,o,h){const a=new BH(new At(r));super(t,i,e,s,n,a.oB(o),h),this.Yz=a,this.zNt=void 0}},QH=class extends lh{get art(){return this.Fm}get Cg(){return this.Fm.Cg}get Rg(){return this.Fm.Rg}constructor(t){super(t)}},FH=class extends vQ{krt(){return this.UNt?this.fX:super.krt()}Lrt(t){this.UNt?this.fX=t:super.Lrt(t)}j_(){return this.UNt?this.QNt:super.j_()}wO(){return this.UNt?this.GO:super.wO()}Crt(){return this.UNt?this.FNt:super.Crt()}Ort(){return this.UNt?this.cX:super.Ort()}jrt(t){this.UNt?this.cX=t:super.jrt(t)}V$(t,i,e){return this.W$((e=>this.YNt(t,i,e)),e)}YNt(t,i,e){return super.V$(t,i,e)}Q0(){return this.W$((()=>this.GNt()))}GNt(){return super.Q0()}X$(t,i,e){return this.W$((e=>this.VNt(t,i,e)),e)}VNt(t,i,e){return super.X$(t,i,e)}oq(){return this.UNt?this.B7:super.oq()}x0(){this.UNt?this.WNt=!0:super.x0()}B0(t,i){this.v0(),this.UNt?(this.FNt=this.FNt.YB(new Ri([t,i])),this.HNt.push({Av:"Kut",MS:t,bS:i})):this.XNt(t,i)}XNt(t,i){super.B0(t,i)}u0(t,i){return this.W$((()=>this.ZNt(t,i)))}ZNt(t,i){return super.u0(t,i)}U0(t,i){this.v0(),this.UNt?(this.FNt=this.FNt.VB(new Ri([t,i])),this.HNt.push({Av:"rS",MS:t,bS:i})):this.qNt(t,i)}qNt(t,i){super.U0(t,i)}rS(t,i,e){return this.W$((e=>this.KNt(t,i,e)),e)}KNt(t,i,e){return super.rS(t,i,e)}GZ(t){return this.W$((()=>this.JNt(t)))}JNt(t){return super.GZ(t)}async W$(t,i){this.v0(),this.UNt&&(await Jr(this.UNt.OL,i),this.v0()),Vr(i);try{this.b0=t(i),await this.b0}finally{this.b0=void 0}}v0(){if(this.b0)throw new g("Internal error")}async $Nt(){if(this.UNt)throw new b("Already locked");this.UNt=new Oi,this.tIt(),this.b0&&(await this.b0.catch(Br),this.tIt())}iIt(){var t;null==(t=this.UNt)||t.LL(),this.UNt=void 0,this.eIt()}tIt(){this.GO=super.wO(),this.fX=super.krt(),this.cX=super.Ort(),this.QNt=super.j_(),this.FNt=super.Crt(),this.B7=super.oq(),this.WNt=!1}eIt(){this.v0(),super.Lrt(this.fX),super.jrt(this.cX);const t=this.HNt.slice();To(this.HNt);for(const i of t)"Kut"===i.Av?this.XNt(i.MS,i.bS):this.qNt(i.MS,i.bS);this.WNt&&super.x0(),this.QNt.KB(super.j_())||this.Co(new Os(In.CZ))}h_(){var t;null==(t=this.UNt)||t.g_(),this.UNt=void 0,super.h_()}constructor(t){super(t),this.b0=void 0,this.UNt=void 0,this.fX=0,this.QNt=Ri.oU(),this.FNt=Ri.oU(),this.HNt=[],this.B7=!1,this.WNt=!1,this.cX=0,this.GO=t.wd}},YH=class extends FH{j_(){var t,i;return super.j_().YB(null!=(i=null==(t=this.sIt)?void 0:t.O_)?i:Ri.oU())}Crt(){var t,i;return super.Crt().YB(null!=(i=null==(t=this.sIt)?void 0:t.R0)?i:Ri.oU())}Lrt(t){super.Lrt(t),this.sIt&&(this.sIt.rX=t)}jrt(t){super.jrt(t),this.sIt&&(this.sIt.iX=t)}XNt(t,i){super.XNt(t,i),this.sIt&&this.sIt.B0(t,i)}qNt(t,i){super.qNt(t,i),this.sIt&&this.sIt.U0(t,i)}async KNt(t,i,e){Vr(e);const s=[];s.push(super.KNt(t,i,e)),this.sIt&&s.push(this.sIt.rS(t,i,e)),await Promise.all(s)}FZ(t){return!!super.FZ(t)||this.ast.nIt(t)}JNt(t){return super.FZ(t)?super.JNt(t):this.ast.rIt(t)}oIt(t){var i,e;null==(i=this.sIt)||i.fn(Xu,this.Rrt),this.sIt=t,null==(e=this.sIt)||e.yn(Xu,this.Rrt)}constructor(t,i){super(i),this.sIt=void 0,this.ast=t}},GH=class extends gQ{FZ(t){const i=void 0!==this.O1,e=void 0!==this.j1,s=t.F1.some((t=>I(t.Nz,"audio"))),n=t.F1.some((t=>I(t.Nz,"video")));return i===s&&e===n&&(!!super.FZ(t)||(!(!this.hIt||!this.hIt.FZ(t))||this.ast.aIt(t)))}async GZ(t){return super.FZ(t)?await super.GZ(t):this.hIt&&this.hIt.FZ(t)?(this.uIt(),await this.GZ(t)):(await this.ast.cIt(t),await this.GZ(t))}nIt(t){return this.FZ(this.lIt(t))}rIt(t){return this.GZ(this.lIt(t))}lIt(t){const i=this.wd,e=i.F1.map((i=>I(t.Nz,"audio")&&I(i.Nz,"audio")||I(t.Nz,"video")&&I(i.Nz,"video")?t:i));return ol({},i,{F1:e})}Q1(t,i,e,s){super.Q1(t,i,e,s),this.hIt&&this.hIt.Q1(t,i,e,s)}dIt(){return!this.fIt&&this._It}Td(){return void 0!==this.gIt?this.gIt:this.dIt()?this.jx:super.Td()}P1(t){this.jx=t,this.gIt=void 0,this.dIt()||super.P1(t)}brt(){return!this.dIt()&&super.brt()}x0(){this.gIt=_.max(VH(this.yz.I1),VH(this.yz.D1)),this.dIt()||super.x0()}M0(){this.gIt=void 0,this.dIt()||super.M0()}Nrt(t){return new YH(this,t)}wIt(){this.fIt=!this.fIt}uIt(){const t=this.yz,i=this.hIt;i&&(this.fIt=!this.fIt,this.Trt(i),this.vIt(t),this.dIt()&&this.mIt())}vIt(t){var i,e;this.hIt=t,null==(i=this.O1)||i.oIt(null==t?void 0:t.I1),null==(e=this.j1)||e.oIt(null==t?void 0:t.D1)}pIt(t){const i=this.yz,e=this.hIt;if(!e)return;const s=this.fIt,n=s?i:e,r=(s?e:i).O_.Jm(t);if(!r)return;const o=IQ(n.O_,this.Crt()).Jm(r.jn(0),Vt);return!o||r.jn(0)+Vt>=o.jn(0)?void 0:_.max(r.jn(0),o.Cn(0))}AIt(t,i){if(this._It)return Promise.resolve();const e=this.fIt?this.hIt:this.yz;return e?(this._It=!0,this.yIt((i=>{if(Vr(i),this._It)return async function(t,i,e){Vr(e);const s=[];t.I1&&s.push(uC(t.I1,i,e));t.D1&&s.push(uC(t.D1,i,e));await Promise.all(s),t.x0()}(e,t,i)}),i)):Promise.resolve()}mIt(){if(!this._It)return;const t=this.fIt?this.hIt:this.yz;if(!t)return;var i;this._It=!1;const e=null!=(i=this.gIt)?i:this.jx;t.ct<e&&t.P1(e),t.M0()}MIt(t){var i;const e=null!=(i=this.gIt)?i:this.jx;t.P1(e),this.fIt?this.Trt(t):this.vIt(t)}Crt(){var t,i,e;const s=null!=(e=null==(t=this.O1)?void 0:t.R0)?e:Ri.oU();var n;const r=null!=(n=null==(i=this.j1)?void 0:i.R0)?n:Ri.oU();return s.YB(r)}async yIt(t,i){const e=[];this.O1&&e.push(this.O1.$Nt()),this.j1&&e.push(this.j1.$Nt());try{await Promise.all(e),await t(i)}finally{this.O1&&this.O1.iIt(),this.j1&&this.j1.iIt()}}Drt(t){t.type===In.CZ&&this.ast.I0(),super.Drt(t)}constructor(t,i){super(i),this.hIt=void 0,this.jx=NaN,this.fIt=!1,this._It=!1,this.gIt=void 0,this.Trt(i),this.ast=t}};function VH(t){if(!t)return 0;const i=t.O_;return i.U>0?i.jn(i.U-1):0}function WH(t){return t.wd.Av===de.Sj}var HH=class extends QH{get bIt(){return this.TIt}j_(){return super.j_().YB(this.TIt.O_)}Td(){if(!this.SIt){const t=this.yz;if(t&&WH(t))return t.ct}return super.Td()}crt(){return!!super.crt()&&!(!this.SIt&&!this.oq())}lrt(){return!!super.lrt()&&!(!this.SIt&&super.crt()&&!this.oq())}oq(){const t=this.yz;return!(!t||!WH(t))&&t.oq}Ag(){return this.Uo.YB(this.Fm.pg)}Dg(){return super.Dg().YB(this.TIt.Ig)}Ng(){return super.Ng()}urt(){var t;return null!=(t=super.urt())?t:this.TIt.Mz}Xg(){return this.cU=!1,super.Xg()}Hg(){this.cU=!0,super.Hg()}z6(){this.SIt=!0,super.z6(),this.TIt.z6()}B6(){this.SIt=!1,super.B6(),this.TIt.z6()}Q_(){var t;return null!=(t=this.s5)?t:super.Q_()}Lg(){return void 0!==this.s5||super.Lg()}JA(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.NIt.g_(),this.L5.g_(),this.L5=new Bd,this.IIt=this.C5(t,i,e,this.IIt,this.L5.f_).catch(Br)}async C5(t,i,e,s,n){this.s5=t,this.O5=t,this.Co(new Ur(t)),s&&await s.catch(Br),Vr(n),this.yz&&WH(this.yz)&&this.yz.mIt(),this.s5=void 0,super.JA(t,i,e),this.TIt.JA(t,i,e),this.DIt()}gz(t){const i=this.Mz;if(!i||S(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.JA(e)}F6(){super.F6(),this.TIt.F6()}get Cg(){return this.EIt.Cg}get Rg(){return this.EIt.Rg}be(){this.EB&&(this.EB=!1,this.EIt.be())}ge(){this.EB||(this.EB=!0,this.EIt.ge())}async kIt(){var t;this.s5=void 0,this.O5=NaN,this.Uo=Ri.oU(),null==(t=this.LIt)||t.g_(),this.NIt.g_(),this.L5.g_(),this.IIt&&(await this.IIt.catch(Br),this.IIt=void 0)}wrt(t){super.wrt(t),this.TIt.Qz=t}vrt(t){super.vrt(t),this.TIt.G6=t}xg(){return this.Dl}rE(t,i,e,s,n,r,o,h){return this.oE.rE(t,i,e,s,n,r,o,h)}fE(t){this.oE.fE(t)}Pz(){this.oE.tr(),super.Pz()}async $n(t){const i=await super.$n(t);return WH(i)&&this.DIt(),i}async tr(){await this.kIt(),await super.tr(),await this.TIt.tr()}async h_(){await this.kIt(),this.oE.gn(),this.Dl.gn(),await super.h_()}Art(t){return new GH(this,t)}prt(t){return new Yi(t)}DIt(){this.NIt.g_(),this.NIt=new Bd,this.IIt=this.xIt(this.IIt,this.NIt.f_).catch(Br)}async xIt(t,i){if(t&&await t.catch(Br),this.yz&&WH(this.yz))for(;;){let t;for(Vr(i),this.CIt()&&this.wIt(),this.yz.mIt(),Vr(i);Vr(i),!this.CIt();){if(t=this.yz.pIt(this.Q_()),void 0!==t){0,this.OIt(),await this.yz.AIt(t,i),Vr(i),this.TIt.JA(t);break}await at((t=>Promise.race([this.k_(Tf.fm,t),this.jIt(t)])),i)}for(Vr(i);!this.CIt();)await this.Fm.k_([Tf.fm,Tf.Ov,$.Nw],i)}}CIt(){const t=this.yz;if(void 0===t||!WH(t))return!1;const i=this.Q_(),e=this.Fm.O_;if(!this.Fm.G_&&e.gr(i))return!1;return!!IQ(this.TIt.O_,t.Crt()).ZB(i,i+Vt)}wIt(){if(this.RIt)return;this.RIt=!0,this.Uo=this.Ag();const t=AC(this),i=this.Lg(),e=this.Ng(),s=this.Fm,n=this.TIt,r=this.yz;r.mIt(),r.wIt(),yC(n,t),this.Mrt(n),this.TIt=s,s.Hg(),s.og=!0,this.RIt=!1;const o=this.Lg();i!==o&&(o?this.Co(new Ur(this.U_)):this.Co(new Ko(this.U_)));const h=this.Ng();e!==h&&this.Co(new Dr(this.U_,h)),o||this.OIt()}OIt(){const t=this.Fm,i=this.EIt;if(i===t)return;const e=this.Rg,s=this.Cg;this.EIt=t,this.EB&&(i.be(),t.ge());const n=this.Rg,r=this.Cg;n>0&&r>0&&(e!==n||s!==r)&&this.Co(new Cs)}aIt(t){return void 0!==this.TIt.dq([t])}async cIt(t){this.OIt();const i=this.yz,e=this.TIt;await e.tr();const s=await e.$n(t);i.MIt(s)}jIt(t){return this.LIt=new Oi,Jr(this.LIt.OL,t)}I0(){var t;null==(t=this.LIt)||t.LL()}ew(t){t.type===Tf.im&&this.O5===t.currentTime||(t.type===Tf.$v&&(this.O5=NaN,this.OIt()),t.type!==$.Nw&&t.type!==Tf.Sh&&t.type!==Tf.Ov||this.RIt||!this.CIt()?(t.type!==Tf.Ov||this.G_)&&super.ew(t):this.DIt())}constructor(t,i,e){super(t),this.SIt=!1,this.s5=void 0,this.O5=NaN,this.Uo=Ri.oU(),this.cU=!0,this.RIt=!1,this.EB=!0,this.LIt=void 0,this.IIt=void 0,this.NIt=new Bd,this.L5=new Bd,this.TIt=i,this.EIt=t,this.Fm.ge(),this.TIt.be(),this.oE=new Ch(this,e),this.Dl=new vl([this.oE.nt,super.xg()])}},XH=class extends HH{get art(){return this.Fm}get bIt(){return this.TIt}be(){super.be(),this.m7.be()}ge(){super.ge(),this.m7.ge()}get pz(){return this.Fm.pz}get l2(){return this.Fm.l2}get Yg(){return this.Fm.Yg}set Yg(t){this.Fm.Yg=t}Y6(t){this.Fm.Y6(t),this.TIt.Y6(t)}K3(){this.Fm.K3()}$g(){this.Fm.$g(),this.TIt.$g()}Vg(){return this.Fm.Vg()}Mrt(t){const i=this.Gg(),e=this.Vg();super.Mrt(t),this.Gg()!==i&&this.Co(new cv),this.Vg()!==e&&this.Co(new zs)}h_(){return this.p7.gn(),this.m7.gn(),super.h_()}constructor(t,i){super(t,i,new pn),this.m7=new Mj,this.m7.Y6(t.pz.parentElement),this.p7=new GR(this.m7.we,this.Iu,this.nt,this.Ol,this.ya)}},ZH=class extends dQ{oB(t){if(t===Jt.VA){const i=super.oB(t),e=super.oB(t);return new XH(i,e)}return super.oB(t)}async Fz(t){t instanceof XH?(await t.h_(),await super.Fz(t.art),await super.Fz(t.bIt)):await super.Fz(t)}},qH=class extends CH{async gn(){await super.gn(),await this.Yz.Fz(this.Fm)}static LO(t){var i;return!Po.Qs&&!Po.Xk&&!(t&&"google-dai"===(null==(i=t.ssai)?void 0:i.integration))}constructor(t,i,e,s,n,r,o,h){const a=new At(new ZH(r));super(t,i,e,s,n,a.oB(o),h),this.Yz=a}},KH=class extends gQ{Nrt(t){return new FH(t)}wO(){return this.PIt?this.GO:super.wO()}j_(){return this.PIt?this.QNt:super.j_()}Td(){return this.PIt?this.jx:super.Td()}P1(t){this.PIt?(this.jx=t,this.zIt=!0):super.P1(t)}Dg(){return this.PIt?this.BIt?this.BIt.V0():this.U1:super.Dg()}Q1(t,i,e,s){this.PIt?this.BIt=new Nr(t,i,e,s):super.Q1(t,i,e,s)}brt(){return this.PIt?this.B7&&!1!==this.WNt:super.brt()}x0(){this.PIt?this.WNt=!0:super.x0()}M0(){this.PIt?this.WNt=!1:super.M0()}FZ(t){return!this.PIt&&super.FZ(t)}GZ(t){return this.PIt?Promise.reject(new b("Not supported")):super.GZ(t)}async $Nt(){if(this.PIt)throw new b("Already locked");this.PIt=!0,this.tIt();const t=[];this.O1&&t.push(this.O1.$Nt()),this.j1&&t.push(this.j1.$Nt()),await Promise.all(t)}iIt(){this.PIt=!1,this.O1&&this.O1.iIt(),this.j1&&this.j1.iIt(),this.eIt()}tIt(){this.GO=super.wO(),this.QNt=super.j_(),this.jx=super.Td(),this.U1=super.Dg(),this.zIt=!1,this.WNt=void 0,this.BIt=void 0}eIt(){if(this.zIt&&(super.P1(this.jx),this.zIt=!1),void 0!==this.BIt){const t=this.BIt;super.Q1(t.Cn,t.jn,t.W0,t.H0),this.BIt=void 0}void 0!==this.WNt&&(this.WNt?super.x0():super.M0(),this.WNt=void 0)}constructor(t){super(t),this.PIt=!1,this.QNt=Ri.oU(),this.jx=0,this.zIt=!1,this.B7=!1,this.WNt=void 0,this.U1=Ri.oU(),this.BIt=void 0,this.Trt(t),this.GO=t.wd}},JH=class extends qh{get art(){return this.Fm}Xg(){return void 0!==this.yz&&WH(this.yz)&&this.G_&&this.JA(0),super.Xg()}JA(t,i,e){void 0!==this.yz&&WH(this.yz)&&this.G_&&t<this.ct&&this.UIt(),super.JA(t,i,e)}z6(){this.QIt=!0,super.z6()}B6(){this.QIt=!1,this.FIt()||super.B6()}FIt(){return this.QIt||this.YIt}GIt(){this.YIt||(this.YIt=!0,super.z6())}VIt(){this.YIt&&(this.YIt=!1,this.FIt()||super.B6())}$n(t){this.WIt.g_();const i=this.nst(t,this.HIt);return this.XIt=i,i}async nst(t,i){return i&&await i.catch(Br),this.VIt(),await super.$n(t)}Art(t){return new KH(t)}prt(t){return new Yi(t)}tr(){this.WIt.g_();const t=this.bNt(this.HIt);return this.XIt=t,t}async bNt(t){return t&&await t.catch(Br),this.VIt(),await super.tr()}UIt(){this.GIt(),this.WIt.g_(),this.WIt=new Bd,this.HIt=Fd(this.ZIt(this.XIt,this.HIt,this.WIt.f_),this.WIt).catch(_t)}async ZIt(t,i,e){t&&await t.catch(Br),i&&await i.catch(Br),Vr(e);const s=this.yz;if(!s||!WH(s))return;const n=s.wd;await s.$Nt(),await this.Fm.tr();const r=await this.Fm.$n(n);r.P1(s.ct),s.Trt(r),s.iIt(),this.VIt()}async h_(){this.WIt.g_(),this.HIt&&(await this.HIt.catch(Br),this.HIt=void 0),this.FIt()&&super.B6(),await super.h_()}constructor(...t){super(...t),this.QIt=!1,this.YIt=!1,this.XIt=void 0,this.HIt=void 0,this.WIt=new Bd}},Vo=class extends dQ{oB(t){if(t===Jt.VA)return new JH(super.oB(t))}async Fz(t){const i=t;await i.h_(),await super.Fz(i.art)}static LO(){return Po.qk}};hn(new class extends eQ{Yp(t,i,e,s,n,r,o,h){const a=new ur(Th.lL.Pnt,Th.lL.Rnt,Th.lL.jnt,Th.lL.Bnt);let u;u=UH.LO(h)?UH:qH.LO(h)?qH:OH;let c=i;return Vo.LO()&&(c=new Vo(c)),new u(e,s,n,r,a,c,Jt.VA,t)}aB(){return!0}constructor(...t){super(...t),this.uB=tl.zP}}),ec((function(t){return class extends t{fa(){const t=this.Z_.va;return ro(super.fa(),{get hesp(){return t}})}}}),st.Za);var $H=0;function Go(t,i){if(void 0===i&&(i=!0),!t)return;let e=t;return"/"===e.charAt(0)&&(e=e.substring(1)),i&&"/"!==e.charAt(e.length-1)&&(e+="/"),e}function tX(t){var i,e,s;return ol({},t,{baseUrl:Go(t.baseUrl),id:null!=(i=t.id)?i:String($H++),timeBounds:ol({},t.timeBounds,{scale:null!=(e=t.timeBounds.timescale)?e:1e3}),currentTime:t.currentTime?{value:t.currentTime.timestamp,scale:null!=(s=t.currentTime.timescale)?s:1e3}:void 0,audio:t.audio.map(oX),video:t.video.map(aX),metadata:t.metadata.map(cX),events:t.events.map(gX)})}var iX=0;function eX(t){const i=Go(t.initPattern,!1),e=Go(t.contPattern,!1);var s;return ol({},t,{id:null!=(s=t.id)?s:String(iX++),continuationPattern:e?Gf(e,"${segmentId}","{segmentId}"):void 0,initializationPattern:i?Gf(i,"${initId}","{initId}"):void 0})}function sX(t){var i;const e=Go(t.initPattern,!1),s=Go(t.contPattern,!1);return ol({},t,{continuationPattern:s?Gf(s,"${segmentId}","{segmentId}"):void 0,initializationPattern:e?Gf(e,"${initId}","{initId}"):void 0,segmentDuration:t.segmentDuration?{value:t.segmentDuration.duration,scale:t.segmentDuration.timescale}:void 0,segments:t.segments.map(nX),activeSegment:null==(i=bo(t.segments,(t=>t.active)))?void 0:i.id})}function nX(t){var i;return ol({},t,{timeBounds:ol({},t.timeBounds,{endTime:void 0!==t.timeBounds.duration?t.timeBounds.startTime+t.timeBounds.duration:void 0,scale:null!=(i=t.timeBounds.timescale)?i:1e3})})}function rX(t){return t&&"-"===t.charAt(0)}function oX(t){let i;try{var e;i=x(null!=(e=t.channels)?e:"2")}catch(t){i=2}return rX(t.contPattern)||rX(t.initPattern)?function(t,i){const e=t.initPattern,s=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,ol({},eX(t),{baseUrl:Go(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map((t=>{var i,n;return t.initPattern=null!=(i=t.initPattern)?i:e,t.contPattern=null!=(n=t.contPattern)?n:s,hX(t)}))})}(t,i):ol({},eX(t),{baseUrl:Go(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map(hX)})}function hX(t){let i;try{var e;i=x(null!=(e=t.channels)?e:"2")}catch(t){i=2}return rX(t.contPattern)||rX(t.initPattern)?function(t,i){return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,ol({},sX(t),{baseUrl:"./",channels:i,sampleRate:t.samplerate})}(t,i):ol({},sX(t),{baseUrl:Go(t.baseUrl),channels:i,sampleRate:t.samplerate})}function aX(t){return rX(t.contPattern)||rX(t.initPattern)?function(t){const i=t.initPattern,e=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,ol({},eX(t),{baseUrl:Go(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map((t=>(t.initPattern=i,t.contPattern=e,uX(t))))})}(t):ol({},eX(t),{baseUrl:Go(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(uX)})}function uX(t){var i,e;return rX(t.contPattern)||rX(t.initPattern)?function(t){var i,e;return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,ol({},sX(t),{baseUrl:"./",frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:ol({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(e=t.resolution.sar)?void 0:e.height})})}(t):ol({},sX(t),{baseUrl:Go(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:ol({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(e=t.resolution.sar)?void 0:e.height})})}function cX(t){var i;return ol({},t,{id:null!=(i=t.id)?i:String(iX++),schemeId:"",tracks:t.tracks.map(lX)})}function lX(t){return ol({},t,{segments:t.segments.map(fX)})}var dX=0;function fX(t){return{id:dX++,timeBounds:ol({},t.timeBounds,{scale:t.timeBounds.timescale})}}var _X=0;function gX(t){var i,e;return ol({},t,{id:null!=(i=t.id)?i:String(_X++),timeBounds:ol({},t.timestamp,{scale:null!=(e=t.timestamp.timescale)?e:1e3})})}var wX=class{async qIt(t,i){const e={zu:t,f_:i},s=await this.Hj.uD(e);let n=await s.SR(i);return function(t){const i=t;if(Sn(i.manifestVersion)&&$i(i.manifestVersion,"alpha"))return!0;let e,s;for(const t of i.presentations){for(const i of[...t.video,...t.audio])if(i.tracks.length>0){e=i.tracks[0],s=i;break}if(Ks(e))break}return(Sn(null==s?void 0:s.initPattern)||Sn(null==e?void 0:e.initPattern))&&!Sn(null==e?void 0:e.initializationPattern)&&!Sn(null==s?void 0:s.initializationPattern)}(n)&&(n=function(t){return ol({},t,{availabilityDuration:{value:t.dvrDuration?t.dvrDuration.duration/t.dvrDuration.timescale:0},manifestVersion:"1.0.0",presentations:t.presentations.map(tX),contentBaseUrl:t.contentBaseUrl||"./"})}(n)),n}constructor(t){this.Hj=t}},vX=class extends Mo{get va(){return this.Xa||(this.Xa=Uf(this)),this.Xa}tp(){return this.KIt.tp()}get cp(){return this.KIt.JIt}get Km(){return this.KIt.Km}get lp(){return this.KIt.lp}get dp(){return this.KIt.dp}get ap(){return this.KIt.$It}get _p(){return this.KIt.tDt}set _p(t){this.KIt.tDt=t}get fp(){return this.KIt.fp}yn(t,i){this.KIt.yn(t,i)}fn(t,i){this.KIt.fn(t,i)}constructor(t){super(),this.KIt=t}},jh=class{get j7(){const t=1-this.iDt**this.eDt;return this.sDt/t}Dat(t,i){const e=this.iDt**t,s=i*(1-e)+e*this.sDt;S(s)||(this.sDt=s,this.eDt+=t)}GZ(t){const i=_.exp(_.log(.5)/t);if(i===this.iDt)return;if(0===this.eDt)return void(this.iDt=i);const e=this.j7,s=1-i**this.eDt;this.sDt=e*s,this.iDt=i}constructor(t){this.sDt=0,this.eDt=0,this.iDt=_.exp(_.log(.5)/t)}},G=class t{get j7(){return this.Rat()?_.max(this.nDt.j7,this.rDt.j7):this.oDt}Dat(t){const i=ra.m_(),e=t;this.hDt&&void 0!==this.aDt&&i-this.aDt>=this.uDt&&this.tr(),this.cDt+=1,this.nDt.Dat(1,e),this.rDt.Dat(1,e),this.lDt.push(e),this.lDt.length>this.dDt&&this.lDt.shift(),this.aDt=i}Rat(){return void 0!==this.aDt&&ra.m_()-this.aDt<=this.uDt}tr(){this.nDt=new jh(this.fDt),this.rDt=new jh(this._Dt),this.cDt=0,this.lDt=[],this.aDt=void 0}constructor(i=t.gDt,e=t.wDt,s=t.Pat,n=!1){this.cDt=0,this.lDt=[],this.aDt=void 0,this.uDt=6e4,this.dDt=10,this.fDt=i,this._Dt=e,this.oDt=s,this.hDt=n,this.nDt=new jh(i),this.rDt=new jh(e)}};G.gDt=2,G.wDt=5,G.Pat=.1;var Fn,mX=class{HH(t){for(const i of this.vDt)i.HH(t)}XH(t){for(const i of this.vDt)i.XH(t)}ZH(t,i){for(const e of this.vDt)e.ZH(t,i)}qH(t){for(const i of this.vDt)i.qH(t)}constructor(t){this.vDt=t}},pX=class{HH(t){this.mDt=t}XH(t){this.pDt.Dat(t-this.mDt)}ZH(t){}qH(t){}constructor(t){this.mDt=0,this.pDt=t}},AX=class{XH(t){this.ADt=t}ZH(t,i){this.Uat.Dat(t-this.ADt,i.byteLength),this.ADt=t}qH(t){}HH(t){}constructor(t){this.ADt=0,this.Uat=t}},yX=class{HH(t){}ZH(t,i){const e=i.byteLength,s=this.yDt;this.yDt=e;const n=t-this.An;this.An=t,this.MDt.Yq(i);const r=!this.MDt.bDt(),o=e>=this.TDt;s!==ra.Ys.Pet&&r&&o&&this.Uat.Dat(n,e)}XH(t){this.An=t}qH(t){}constructor(t,i=0){this.MDt=new MX,this.An=0,this.yDt=0,this.Uat=t,this.TDt=i}},MX=class extends Wu{bDt(){return this.SDt}Yq(t){this.SDt=!1,super.Yq(t)}Qq(t,i){this.NDt&&this.NDt!==X.PA||(this.SDt=!0),super.Qq(t,i),this.NDt=t}$q(t){return!1}iK(t){}sK(t){}constructor(...t){super(...t),this.NDt=void 0,this.SDt=!1}};(Fn||(Fn={})).IDt="sample";var bX=class extends Mo{LP(){if(!this.Rat())return;const t=ra.m_();t-this.DDt>1e3&&(this.DDt=t,Gu.lL.LP(this.j7))}constructor(...t){super(...t),this.DDt=0}},TX=class extends bX{get j7(){return this.Rat()?this.sDt:this.EDt}Rat(){return this.rC.length>=3}Dat(t,i){if(0===t)return;const e={GP:8*i/t,kDt:i};if(this.rC.push(e),this.LDt+=e.kDt,this.rC.length>30){const t=this.rC.shift();this.LDt-=t.kDt}const s=this.rC.slice().sort(((t,i)=>t.GP-i.GP));let n=0;for(let t=0;t<s.length;t++){const i=s[t];if(n+=i.kDt/this.LDt,this.sDt=i.GP,n>=.5)break}this.LP(),this.Co(new Os(Fn.IDt))}constructor(t){super(),this.rC=[],this.LDt=0,this.EDt=t,this.sDt=t}},qt=class t extends bX{Dat(t,i){const e=8*i/t;this.nDt.Dat(t,e),this.rDt.Dat(t,e),this.xDt+=i,this.LP(),this.Co(new Os(Fn.IDt))}get j7(){return this.Rat()?_.min(this.nDt.j7,this.rDt.j7):this.oDt}Rat(){return this.xDt>=this.CDt}constructor(i=t.gDt,e=t.wDt,s=t.ODt,n=t.Pat){super(),this.xDt=0,this.CDt=s,this.nDt=new jh(i),this.rDt=new jh(e),this.oDt=n}};qt.ODt=128e3,qt.Pat=iS,qt.gDt=.5,qt.wDt=5;var SX,NX=class{jDt(t){var i;null==(i=this.Uat)||i.fn(Fn.IDt,this.RDt),this.Uat=new TX(t),this.Uat.yn(Fn.IDt,this.RDt)}PDt(t){this.zDt.push(t)}BDt(t){jn(this.zDt,t)}get GP(){var t,i;return null!=(i=null==(t=this.Uat)?void 0:t.j7)?i:this.UDt}get VP(){return this.QDt.j7}WP(t){if("segment"!==t.Av)return;if("video"!==t.$D)return;const i=[new pX(this.QDt)];return this.Uat&&("stream"===t.qD&&"initialization-segment"!==t.JD?i.push(new yX(this.Uat,1e3)):i.push(new AX(this.Uat))),new mX(i)}constructor(t,i){this.zDt=[],this.RDt=()=>{for(const t of this.zDt)t()},this.UDt=t>0?t:qt.Pat,this.QDt=new G(G.gDt,G.wDt,i>0?i:G.Pat),this.jDt(this.UDt)}},IX=class{FDt(t,i){const e=i-t;(!this.YDt||e<this.YDt)&&(this.YDt=e)}GDt(t,i){this.VDt=i-t}get WDt(){return void 0!==this.VDt?ra.m_()/1e3+this.VDt:void 0!==this.YDt?ra.m_()/1e3+this.YDt:void 0}HDt(t){const i=this.WDt;if(void 0!==i)return i-t}tr(){this.YDt=void 0,this.VDt=void 0}},DX=class{XDt(t){for(const i of this.QNt)i[1]=i[1].Sn(t)}ZDt(t,i){let e=!0;for(const s of this.QNt){let n=s[1];n=n.VB(i),t===s[0]&&(n=n.YB(i),e=!1),s[1]=n.FB(1e-5)}e&&this.QNt.push([t,i])}qDt(t){for(const i of this.QNt)i[1]=i[1].VB(t)}KDt(t){for(let i=0;i<this.QNt.length;i++)if(this.QNt[i][1].gr(t))return this.QNt[i][0]}constructor(){this.QNt=[]}},EX=class extends Mo{get O_(){let t=Ri.oU();for(const[,i]of this.JDt){const e=i.F7+i.pI,s=e+i.ct;t=t.YB(Ri.rU(e,s))}return this.xrt.O_.YB(t)}KDt(t){return this.$Dt.KDt(t)}get tEt(){return void 0!==this.iEt}get eEt(){return this.iEt?this.iEt.OL:Promise.resolve()}async appendStream(t,i){if(this.tEt)throw new g("Concurrent appends are not supported.");const e=this.S0.f_;this.$Dt.XDt(this.O_),this.iEt=new Oi;const s=t.getReader();try{for(;;){const t=await Jr(s.read(),e);if(t.done)break;const n=t.value,r={Av:Lu.jZ,ly:n.nut},o={ct:n.ct,F7:n.I_t,pI:-i.Lht.sEt};await this.H$(r,o,e);const h=o.F7+o.pI,a=h+o.ct;this.$Dt.ZDt(i.Lht,Ri.rU(h,a))}}finally{i.nEt();const t=this.iEt;this.iEt=void 0,t.LL()}}async V$(t,i,e,s){if(this.tEt)throw new g("Concurrent appends are not supported.");const n=new Bd;n.w_(this.S0.f_),s&&n.w_(s);try{this.iEt=new Oi,await this.H$(t,i,n.f_);const s=i.F7+i.pI,r=s+i.ct;this.$Dt.XDt(this.O_),this.$Dt.ZDt(e,Ri.rU(s,r))}finally{const t=this.iEt;this.iEt=void 0,null==t||t.LL()}}async H$(t,i,e){const s=new Bd;s.w_(this.S0.f_),e&&s.w_(e),this.xrt.O0===Jt.VA&&this.rEt.elt(t.ly,i.F7,i.F7+i.ct,i.pI,this.hAt,!1);const n=this.Fm.Hm.Wm,r=this.xrt.O_.gr(this.Fm.U_);if(n||r)return await this.oEt(),await this.xrt.V$(t,i,s.f_);this.JDt.push([t,i]);const o=this.JDt[0][1].F7;return this.JDt[this.JDt.length-1][1].F7-o>=.4?await this.oEt():void 0}async X$(t){if(this.tEt)throw new g("Concurrent appends are not supported.");try{this.iEt=new Oi,await this.oEt(),await this.xrt.X$(t,{},this.S0.f_),this.xrt.O0===Jt.VA&&this.rEt.Grt(t.ly)}finally{const t=this.iEt;this.iEt=void 0,null==t||t.LL()}}async rS(t,i){if(this.tEt)throw new g("Concurrent appends are not supported.");try{this.iEt=new Oi,await this.oEt(),await this.xrt.rS(t,i,this.S0.f_),this.$Dt.qDt(Ri.rU(t,i))}finally{const t=this.iEt;this.iEt=void 0,null==t||t.LL()}}async MG(){if(this.tEt)throw new g("Concurrent appends are not supported.");try{this.iEt=new Oi,await this.oEt()}finally{const t=this.iEt;this.iEt=void 0,null==t||t.LL()}}async oEt(){for(const[t,i]of this.JDt)await this.xrt.V$(t,i,this.S0.f_);To(this.JDt)}async h_(){for(this.S0.h_();this.tEt;)await this.eEt}constructor(t,i,e,s){super(),this.JDt=[],this.iEt=void 0,this.S0=new Bd,this.Fm=i,this.xrt=t,this.hAt=e,this.rEt=s,this.$Dt=new DX,this.xrt.yn(In.CZ,this.Ds)}},kX=class{async hEt(t,i){if(this.aEt>=this.uEt.maxRetries)throw t;const e=this.cEt(this.aEt++);await Si(e,i)}cEt(t){let i=0;return 0!==t&&(i+=_.min(this.uEt.maximumBackoff,this.uEt.minimumBackoff*(2**t-1))),i}constructor(t){this.aEt=0,this.uEt=t}};(SX||(SX={})).lEt="emsgdata";var Jo,LX=class extends Os{constructor(t,i){super("emsgdata"),this.value=t,this.data=i}},Fc=class{start(t){this.wZ=t}dEt(t){this.wZ.enqueue(t)}};!function(t){t.fEt="initdata",t.MANIFEST_UPDATE="manifestupdate",t._Et="timestamps:v1"}(Jo||(Jo={}));var xX="urn:theo:hesp:2020";function CX(t){if(t.cT!==xX)return;const i=t.lT;if(i===Jo.fEt){return function(t){if(!t||!Vu(t))return;const i=t;return!he(i.index)||!he(i.offset)||i.index<0&&i.offset<0?void 0:{Av:"initdata",index:i.index,offset:i.offset}}(JSON.parse(qg(vh(t._T),new Bi)))}if(i===Jo.MANIFEST_UPDATE){return function(t){if(!t||!Vu(t))return;const i=t;return!Ks(i.url)||Sn(i.url)?{Av:"manifestupdate",url:i.url}:void 0}(JSON.parse(qg(vh(t._T),new Bi)))}if(i===Jo._Et){const i=vh(t._T),e=new Bi,s=qi(i,e).toNumber()/t.cM,n=qi(i,e).toNumber()/1e3,r=es(i,e)/1e3;let o;return e.Ku+8<=i.byteLength&&(o={hours:es(i,e),minutes:Cg(i,e),seconds:Cg(i,e),frames:xi(i,e)}),{Av:Jo._Et,gEt:s,wEt:n,vEt:r,mEt:o}}}var OX=class extends Fc{transform(t){if(t.Av===X.BA)try{const i=CX(Ot.sM(t.ly));i&&this.pEt.Co(new LX(i.Av,i))}catch(t){false}this.dEt(t)}h_(){this.pEt.Vo()}constructor(...t){super(...t),this.pEt=new Mo}},jX=class{start(t){this.rf=new RX(t)}transform(t){this.rf.Yq(t)}flush(){this.rf.Vq()}},RX=class extends Wu{$q(t){return!0}iK(t){this.wZ.enqueue(t)}sK(t){}constructor(t){super(),this.wZ=t}},PX=ii.fromNumber(pu);var zX,BX=class extends Mo{async uD(t){for(;;)try{return await this.aE.uD(t)}catch(i){if(be(i))throw i;await this.AEt.hEt(i,t.f_)}}constructor(t,i){super(),this.aE=t,this.AEt=i}};function UX(t,i,e,s,n,r,o,h){const a=new Xo;return n&&a.LD(function(t,i){return void 0===i&&(i=PX),new Xo({Range:"bytes="+t.toString()+"-"+i.toString()})}(n.start,n.end)),{zu:t,XD:a,tE:!1,f_:h,Av:li.CD,JD:e,$D:s,_D:r,KD:o,qD:i,eE:i===Ft.DD}}!function(t){t[t.INITIALIZER=0]="INITIALIZER",t[t.FRAMES=1]="FRAMES"}(zX||(zX={}));var QX=class extends Fc{transform(t){this.yEt.push(t),t.Av===X.PA&&this.MEt(this.yEt.splice(0),zX.FRAMES)}MEt(t,i){const e={cM:this.Ox,aG:this.TG},s=M(t.map((t=>js(t.ly.ly)))),n=bo(t,FX),r=Ot.Wy(n.ly.ly)[0],o={$D:this.Nat,SL:e,nut:s,Av:i,ct:this.Td(r)/this.Ox,I_t:zr(this.bEt(r),this.Ox)};this.dEt(o)}Td(t){const i=t.Z[0];if(!i||0===i.iT.length)return 0;var e;const s=null!=(e=i.zy.Vb)?e:0;return i.iT[0].aT.reduce(((t,i)=>{var e;return t+(null!=(e=i.ct)?e:s)}),0)}bEt(t){var i,e;return null!=(e=null==(i=t.Z[0].eT)?void 0:i.eT)?e:ii.UZERO}constructor(t,i){super(),this.yEt=[],this.TG=t,this.Nat=this.TG.match(/video/)?gu.VA:gu.WA,this.Ox=i}};function FX(t){return t.Av===X.kA}var YX=class extends Mo{get Lht(){return this.TEt}jct(t){return t+1}get SEt(){return!1}get NEt(){return this.IEt}get tEt(){return void 0!==this.iEt}get eEt(){return this.iEt?this.iEt.OL:Promise.resolve()}JA(t){this.IEt=t,this.DEt=void 0,this.EEt=void 0}kEt(){return void 0!==this.DEt}async LEt(){if(this.tEt)throw new g("Concurrent downloads are not supported.");try{this.iEt=new Oi;let t;if("now"===this.IEt)t=ra.wp(this.TEt.xEt("now"),this.TEt.CEt);else{const i=this.IEt,e=0===i?1:this.TEt.OEt(i);t=ra.wp(this.TEt.xEt(e),this.TEt.CEt)}const i=UX(t,Ft.SD,fo.RD,this.Nat,void 0,3e3,1e3,this.jEt.f_),e=await this.REt.uD(i),s=await e.GR(this.jEt.f_),n=new j(s),{PEt:r,wM:o}=function(t){const i=Mc.Ey(new mu(vh(t),new Bi)),e=bo(i,(t=>t.Av===X.QA||t.Av===X.kA));if(void 0===e)return{PEt:t,wM:void 0};const s=ci(t,0,e.Ku),n=ci(t,e.Ku);return{PEt:s,wM:0===n.byteLength?void 0:n}}(n),h=Ot.Wy(vh(n));this.Ox=function(t){const i=bo(t,(t=>t.Av===X.Kp));return i.Z[0].wM.zy.cM}(h);const a=function(t){const i=t.filter((t=>t.Av===X.BA)),e=i.map((t=>CX(t))),s=bo(e,(t=>(null==t?void 0:t.Av)===Jo.fEt));if(!s)throw new g("No init data in init response");return s}(h);let u;if(this.DEt=a.index,this.EEt=a.offset,o){u=function(t,i,e){var s;const n=bo(t,(t=>t.Av===X.kA));var r;const o=zr(null!=(r=null==(s=n.Z[0].eT)?void 0:s.eT)?r:ii.UZERO,e),h=n.Z[0];var a;const u=null!=(a=h.zy.Vb)?a:0,c=h.iT[0],l=c.aT.reduce(((t,i)=>{var e;return t+(null!=(e=i.ct)?e:u)}),0)/e;return{F7:o,ct:l,pI:i}}(Ot.Wy(vh(n)),-this.Lht.sEt,this.Ox)}return{initialization:r,data:o,metadata:u}}finally{const t=this.iEt;this.iEt=void 0,null==t||t.LL()}}zEt(){if(this.tEt)throw new g("Concurrent downloads are not supported.");this.iEt=new Oi;const t=void 0!==this.EEt?ii.fromNumber(this.EEt):void 0;return kk(this.BEt(this.DEt,t,this.jEt.f_)).pipeThrough(new Wa(new QX(this.Lht.aG,this.Ox))).pipeThrough(new Wa(new GX(this.jEt.f_)))}async BEt(t,i,e){const s=this.UEt(t,i,e);return(await this.REt.uD(s)).VW().pipeThrough(new Wa(new jX)).pipeThrough(new Wa(this.QEt))}UEt(t,i,e){const s=this.TEt.FEt(t),n=void 0!==i?{start:i,end:void 0}:void 0;return UX(ra.wp(s,this.TEt.CEt),Ft.DD,fo.jT,this.Nat,n,25e3,1e3,e)}nEt(){void 0!==this.DEt&&(this.DEt=this.jct(this.DEt)),this.EEt=void 0;const t=this.iEt;this.iEt=void 0,null==t||t.LL()}cancelDownload(){var t;this.jEt.g_(),this.jEt=new Bd,this.iEt=null!=(t=this.iEt)?t:new Oi,this.DEt=void 0,this.EEt=void 0;const i=this.iEt;this.iEt=void 0,null==i||i.LL()}async h_(){this.Vo(),this.QEt.h_(),this.jEt.g_(),await this.eEt,this.DEt=void 0,this.EEt=void 0}constructor(t,i,e){super(),this.IEt="now",this.jEt=new Bd,this.iEt=void 0,this.TEt=t,this.AEt=new kX(e),this.QEt=new OX,this.QEt.pEt.yn(SX.lEt,this.Ds),this.aE=i,this.Nat=function(t){switch(t){case gu.WA:return Bu.WA;case gu.VA:return Bu.VA;default:return Bu.jT}}(t.Av),this.REt=new BX(this.aE,this.AEt)}};var GX=class{start(t){this.wZ=t,this.__.u_(this.YEt)}flush(){this.__.c_(this.YEt)}constructor(t){this.YEt=()=>{this.wZ.error(new Fh)},this.__=t}};function Lh(t){var i;return t.value/(null!=(i=t.scale)?i:1)}var VX="{initId}",WX=/{initId(?::0(?:\d+)d)?}/,HX=/{segmentId(?::0(?:\d+)d)?}/,XX=class{get o(){return this.uS}get GP(){return this.xP}get Xpt(){return this.GEt}get jnt(){return this.ryt}get VEt(){return this.WEt}get HEt(){return this.XEt}get CEt(){return ra.wp(this.ZEt,this.qEt.CEt)}get $nt(){return this.KEt}get kh(){return this.lS}get JEt(){return this.$Et}get tkt(){return this.ikt}get sEt(){return this.ekt}get skt(){return this.KAt}Yn(t){this.WEt=t.activeSegment,this.XEt=t.activeSequenceNumber,this.ryt=t.segments}constructor(t,i,e){var s,n,r,o;this.ryt=[],this.CS=t,this.nkt=e,this.uS=t.id,this.xP=t.bandwidth,this.GEt=t.averageBandwidth,this.ZEt=null!=(s=t.baseUrl)?s:"",this.KEt=null!=(n=t.codecs)?n:i.codecs,this.$Et=null!=(r=t.continuationPattern)?r:i.continuationPattern,this.ikt=null!=(o=t.initializationPattern)?o:i.initializationPattern,this.lS=t.label,this.ekt=t.mediaTimeOffset?Lh(t.mediaTimeOffset):0,this.KAt=t.segmentDuration?Lh(t.segmentDuration):0,this.Yn(t)}},ZX=class extends XX{get Av(){return gu.WA}get qEt(){return this.nkt}get rkt(){return this.okt}get Adt(){return this.hkt}get KM(){return this.vx}get aG(){return'audio/mp4; codecs="'+this.$nt+'"'}constructor(t,i,e){var s,n,r,o;super(t,i,e),this.okt=null!=(s=t.channels)?s:1,this.hkt=null!=(r=null!=(n=t.frameRate)?n:i.frameRate)?r:1024,this.vx=null!=(o=t.sampleRate)?o:i.sampleRate}},qX=class extends XX{get Av(){return gu.VA}get qEt(){return this.nkt}get akt(){return this.Get}get Adt(){return this.hkt}get aG(){return'video/mp4; codecs="'+this.$nt+'"'}constructor(t,i,e){var s;super(t,i,e),this.Get=t.resolution,this.hkt=Lh(null!=(s=t.frameRate)?s:i.frameRate)}};function KX(t,i){const e=String(i);if(t===VX||"now"===i)return e;const s=x(t.substring(9,t.lastIndexOf("d")));return Aa(e,s,"0")}function JX(t,i){const e=String(i);if(t===VX)return e;const s=x(t.substring(12,t.lastIndexOf("d")));return Aa(e,s,"0")}var $X,Dc,tZ=class{get tit(){return this.ukt}get o(){return this.uS}get ckt(){return this.lkt}get CEt(){return ra.wp(this.ZEt,this.tit.CEt)}get kh(){return this.lS}get sEt(){return this.ekt}get dkt(){return this.fkt}Yn(t){for(const i of this.Pw){const e=bo(t.tracks,(t=>i.o===t.id));e&&i.Yn(e)}}constructor(t,i,e){var s;this.nkt=t,this.Pw=e,this.ukt=i,this.uS=t.id,this.lkt=t.alignId,this.ZEt=null!=(s=t.baseUrl)?s:"",this.lS=t.label,this.ekt=t.mediaTimeOffset?Lh(t.mediaTimeOffset):0,this.fkt=t.protection,this.Yn(t)}},iZ=class extends tZ{get qEt(){return this.nkt}get Z(){return this.Pw}get gs(){return this.Rx}get rkt(){return this.okt}Yn(t){var i,e;super.Yn(t),this.Rx=t.language,this.okt=null!=(i=t.channels)?i:1,this.TG=null!=(e=t.mimeType)?e:"audio/mp4"}constructor(t,i){const e=[];super(t,i,e);for(const i of t.tracks)e.push(new ZX(i,t,this))}},eZ=class extends tZ{get qEt(){return this.nkt}get Z(){return this.Pw}Yn(t){var i;super.Yn(t),this.TG=null!=(i=t.mimeType)?i:"video/mp4"}constructor(t,i){const e=[];super(t,i,e);for(const i of t.tracks)e.push(new qX(i,t,this))}},sZ=class{get o(){return this.uS}get CEt(){return ra.wp(this.ZEt,this.gkt._kt)}get wkt(){return this.vkt}get U_(){return this.hU}get uG(){return this.hd}get mkt(){return this.pkt}get Akt(){return this.ykt}Yn(t){var i;this.vkt=t.timeBounds,this.hd=null!=(i=t.events)?i:[],this.hU=t.currentTime?Lh(t.currentTime):void 0}constructor(t,i){var e,s,n;this.pkt=[],this.ykt=[],this.gkt=t,this.uS=i.id,this.ZEt=null!=(e=i.baseUrl)?e:"";for(const t of null!=(s=i.audio)?s:[])this.pkt.push(new iZ(t,this));for(const t of null!=(n=i.video)?n:[])this.ykt.push(new eZ(t,this));this.Yn(i)}},nZ=class{get fp(){return this.gkt}get Mkt(){return this.bkt}get Tkt(){return this.Skt}get Nkt(){return this.Ikt}get Dkt(){return this.Ekt}get kkt(){return this.Lkt}get QK(){return this.tx}get xkt(){return this.Ckt}get _kt(){var t;return ra.wp(null!=(t=this.Okt)?t:"",this.jkt)}get Rkt(){return this.Pkt}Yn(t){var i;this.bkt=Lh(t.availabilityDuration),this.Skt=t.creationDate,this.Ikt=t.fallbackPollRate,this.Ekt=t.manifestVersion,this.tx=t.streamType,this.Ckt=t.activePresentation,this.Okt=t.contentBaseUrl,this.Pkt=null==(i=t.timeSource)?void 0:i.url,this.gkt=t;for(const i of t.presentations){const t=bo(this.Lkt,(t=>t.o===i.id));t?t.Yn(i):this.Lkt.push(new sZ(this,i))}this.Lkt=this.Lkt.filter((i=>t.presentations.some((t=>t.id===i.o))))}constructor(t,i){this.Lkt=[],this.jkt=t,this.gkt=i,this.Yn(i)}},rZ=0,oZ=class extends Mo{get snt(){return!0}get Xpt(){return this.zkt.Xpt}get GP(){return this.zkt.GP}get $nt(){return this.zkt.$nt}get o(){return this.zkt.o}get kh(){var t;return null!=(t=this.zkt.kh)?t:""}get Xw(){return this.cS}get Jpt(){return this.zkt.CEt}get Zpt(){}get aG(){return this.zkt.aG}get sEt(){return this.zkt.sEt}get CEt(){return this.zkt.CEt}get Av(){return this.zkt.Av}OEt(t){const i=(t-this.zkt.qEt.tit.U_)*this.framesPerSecond();return _.round(this.zkt.HEt+i)}Bkt(t){return t+1}xEt(t){var i;let e,s=this.zkt.tkt;for(;e=null==(i=s.match(WX))?void 0:i.pop();)s=s.split(e).join(KX(e,t));return s+("now"===t?"?uuid="+sI():"")}FEt(t){var i;let e,s=this.zkt.JEt;for(;e=null==(i=s.match(HX))?void 0:i.pop();)s=s.split(e).join(JX(e,t));return s}bD(){}MD(){}constructor(t){super(),this.cS=rZ++,this.zkt=t}},hZ=class extends oZ{get Ukt(){return this.zkt}get Hmt(){return this.zkt.KM}get Lt(){return this.CS}framesPerSecond(){return this.zkt.KM/this.zkt.Adt}get va(){return this.Xa||(this.Xa=pV(this)),this.Xa}constructor(t,i){super(t),this.Xa=void 0,this.CS=i}},aZ=class extends oZ{get Ukt(){return this.zkt}get qpt(){return 0}get Adt(){return this.zkt.Adt}get Ti(){return this.zkt.akt.height}get ji(){return this.zkt.akt.width}get akt(){return this.zkt.akt}get Lt(){return this.CS}framesPerSecond(){return this.zkt.Adt}get va(){return this.Xa||(this.Xa=Co(this)),this.Xa}constructor(t,i){super(t),this.Xa=void 0,this.CS=i}};!function(t){t.Qkt="alternative",t.Fkt="main",t.Ykt="commentary",t.Gkt="",t.nD="descriptions",t.Vkt="main-desc",t.Wkt="translation"}($X||($X={})),function(t){t.Qkt="alternative",t.Fkt="main",t.Ykt="commentary",t.Gkt="",t.sD="captions",t.rv="sign",t.HA="subtitles"}(Dc||(Dc={}));var uZ=0,cZ=class extends Mo{get Hw(){return this.Hkt()}get Rt(){return this.Le}set Rt(t){this.Rt!==t&&(this.Le=t,t&&this.Xkt(),this.qkt.Zkt(),this.Co(new uc(this)))}get va(){return this.Xa||(this.Xa=Mi(this)),this.Xa}get idt(){return this.Kkt}get o(){return this.nkt.o}get Xw(){return this.cS}get kh(){var t;return null!=(t=this.nkt.kh)?t:""}get _v(){return this.Rt?"enabled":"disabled"}set _v(t){"enabled"===t?this.Rt=!0:"disabled"===t&&(this.Rt=!1)}get qw(){return this.sS}get Kw(){return this.gct}set Kw(t){this.gct=t,this.qkt.Zkt(),this.Co(new QF(t,this))}fS(t){this.Rt=t}Jkt(t){for(const i of this.sS.Rw)i===t&&this.Co(new mG(i))}constructor(t,i,e){super(),this.sS=new wv,this.cS=uZ++,this.Le=!1,this.gct=void 0,this.nkt=i,this.qkt=e,this.Kkt=new RW(t,[]);for(const t of i.Z)this.sS.nS(this.createQuality(t))}},lZ=class extends cZ{get Av(){return gu.WA}get zt(){return $X.Fkt}get gs(){return this.nkt.gs}get qEt(){return this.nkt}Xkt(){this.qkt.$kt(this)}Hkt(){const t=this.qkt.tLt;return(null==t?void 0:t.Lt)===this?t:void 0}createQuality(t){return new hZ(t,this)}constructor(t,i){super(Jt.WA,t,i)}},dZ=class extends cZ{get Av(){return gu.VA}get zt(){return Dc.Fkt}get gs(){return""}get qEt(){return this.nkt}Xkt(){this.qkt.iLt(this)}Hkt(){const t=this.qkt.eLt;return(null==t?void 0:t.Lt)===this?t:void 0}createQuality(t){return new aZ(t,this)}constructor(t,i){super(Jt.VA,t,i)}};function fZ(t,i,e,s){if(!t)return;const n=function(t,i,e){const s=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"audio/mp4";var r;const e=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(i+'; codecs="'+e+'"')}return _Z(t,i,s,[],e)}(t,i?[i]:[],!s),r=function(t,i,e){const s=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"video/mp4";var r;const e=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(i+'; codecs="'+e+'"')}return _Z(t,i,[],s,e)}(t,e?[e]:[],!s),o=hH(n,r);return t.preferredKeySystems&&(null==o?void 0:o.Nvt)&&(o.Nvt=wH(o.Nvt,t.preferredKeySystems)),o}function _Z(t,i,e,s,n){const r=i.map((t=>t.protection)).filter(Ks);if(!r.length)return;const o=r[0].type,h=Pe(r,(t=>t.systems)),a=Pe(h,(t=>function(t,i){void 0===i&&(i=!0);const e=[],s=i?function(t){return nA.filter((i=>i._L===t.toLowerCase()))}(t.schemeId):function(t){return sA.filter((i=>i._L===t.toLowerCase()))}(t.schemeId);for(const i of s)e.push({hP:gZ(t)?t.uri:void 0,Qp:i,JP:void 0,KP:t.pssh?[$s(t.pssh).buffer]:[]});return e}(t,n)));return{fR:t,Ivt:{Gbt:o},Nvt:a,Vbt:e,Wbt:s}}function gZ(t){return t.schemeId===T_.kp&&void 0!==t.keyFormat&&void 0!==t.keyFormatVersions}var wZ,vZ;function mZ(t){const i=t.U_,e=t.O_.Jm(i);return e?e.jn(0)-i:0}wZ="Android"===ra.np.hp?200:300,function(t){t[t.sLt=0]="sLt",t[t.nLt=1]="nLt"}(vZ||(vZ={}));var pZ=ra.Ys.rp?1:.5,AZ=class{Cn(){1!==this.ja&&(this.ja=1,this.rLt=ra.f1((()=>{this.oLt()}),wZ),this.hLt.PDt(this.aLt),this.Fm.fg?this.uLt.yn($.Sm,this.cLt):this.cLt())}Zg(){0!==this.ja&&(this.ja=0,void 0!==this.rLt&&ra.g1(this.rLt),this.hLt.BDt(this.aLt),this.uLt.fn($.Tm,this.lLt),this.uLt.fn($.Sm,this.cLt),this.dLt=void 0,this.Bm())}get fLt(){return yZ(this._Lt.tLt,this._Lt.eLt)}async oLt(){await this.gLt,this.gLt=this.wLt(),await this.gLt}vLt(t,i){const e=this.mLt(t,i),s=this.hLt.GP;for(const t of e){if(t.pLt<=s)return t}return e[e.length-1]}async wLt(){var t,i;const e=null==(t=this._Lt.tLt)?void 0:t.Lt,s=null==(i=this._Lt.eLt)?void 0:i.Lt,n=this.mLt(e,s);if(0===n.length)return void 0;const r=this.maybeSwitchToTargetQuality(n);if(r)return void await this.ALt(r);const o=this.maybeGetUpSwitch(n);o&&await this.ALt(o)}maybeSwitchToTargetQuality(t){const i=this.fLt;if(t.some((t=>MZ(t,i))))return;const e=this.hLt.GP;for(const i of t){if(i.pLt<=e)return i}return t[t.length-1]}maybeGetUpSwitch(t){var i,e;const s=this.hLt.GP;var n;var r;const o=(null!=(n=null==(i=this._Lt.tLt)?void 0:i.GP)?n:0)+(null!=(r=null==(e=this._Lt.eLt)?void 0:e.GP)?r:0);let h;for(const i of t){if(i.pLt<s&&i.pLt>o){h={yLt:i,$dt:ra.m_(),oT:0};break}}if(!this.dLt||!MZ(this.dLt.yLt,null==h?void 0:h.yLt))return void(this.dLt=h);const a=ra.m_()-this.dLt.$dt,u=this.dLt.oT>3;if(a>1e3&&u){if(this.Fm.Hm.Wm||ra.Ys.ep){const t=2*this.hLt.VP;if(!(mZ(this.Fm)>t))return}else{const t=_.max(2*this.hLt.VP+pZ,this.fz.xm.minimumOffset);if(!(mZ(this.Fm)>t))return void(this.MLt&&this.MLt.minimumOffset===t||(this.Bm(),this.MLt={minimumOffset:t},this.fz.Pm(this.MLt)))}return this.dLt.yLt}}async ALt(t){this.dLt=void 0,this.Bm();const i=this.fLt;if(i.bLt===t.bLt&&i.TLt===t.TLt)return;const e=t.bLt,s=t.TLt;i.TLt&&s&&i.TLt.GP>s.GP&&this.hLt.jDt(t.pLt),await this._Lt.SLt(s,e)}Bm(){this.MLt&&(this.fz.Bm(this.MLt),this.MLt=void 0)}mLt(t,i){let e=[],s=[];var n;t&&(e=(null==(n=t.Kw)?void 0:n.length)?t.Kw:t.qw.Rw);if(i){var r;const t=(null==(r=i.Kw)?void 0:r.length)?i.Kw:i.qw.Rw,e=t.slice().sort(((t,i)=>t.GP-i.GP)),n=this.NLt(e);0===n.length&&t.length>0&&n.push(_u(t,(t=>t.GP))),s=n}const o=[],h=e.length>0?e:[void 0],a=s.length>0?s:[void 0];for(const t of h)for(const i of a)o.push(yZ(t,i));return function(t){return t.sort(((t,i)=>i.pLt-t.pLt))}(o)}NLt(t){for(let i=0;i<t.length;i++){const e=t[i].akt;if(e.height>=this.Fm.Ti&&e.width>=this.Fm.ji)return t.slice(0,i+1)}return t.slice()}h_(){this.dLt=void 0,this.uLt.tr(),this.Bm()}constructor(t,i,e,s,n){this.Fm=t,this.fz=i,this._Lt=e,this.ILt=s,this.hLt=n,this.ja=0,this.gLt=Promise.resolve(),this.MLt=void 0,this.lLt=()=>{var t,i;if(this.ILt.Eg)return;const e=null==(t=this._Lt.tLt)?void 0:t.Lt,s=null==(i=this._Lt.eLt)?void 0:i.Lt,n=_u(this.mLt(e,s),(t=>t.pLt));n&&($r(this.ALt(n)),this.Fm.Hm.Wm&&this.ILt.tp())},this.cLt=()=>{this.uLt.yn($.Tm,this.lLt),this.uLt.fn($.Sm,this.cLt)},this.aLt=()=>{if(this.dLt){this.dLt.oT+=1;const t=this.dLt.yLt.pLt;this.hLt.GP<t&&(this.dLt=void 0,this.Bm())}},this.uLt=new Xe(this.Fm)}};function yZ(t,i){var e;var s;return{bLt:t,TLt:i,pLt:(null!=(e=null==t?void 0:t.GP)?e:0)+(null!=(s=null==i?void 0:i.GP)?s:0)}}function MZ(t,i){var e,s,n,r;return void 0===t||void 0===i?t===i:(null==(e=t.bLt)?void 0:e.o)===(null==(s=i.bLt)?void 0:s.o)&&(null==(n=t.TLt)?void 0:n.o)===(null==(r=i.TLt)?void 0:r.o)&&t.pLt===i.pLt}var bZ=class t{static async create(i,e,s){const n=await TZ(i,e,s);return new t(n,i,e)}get kAt(){return(this.DLt.serverTimeMs+(ra.m_()-this.DLt.localTimeMs))/1e3}get ELt(){return(this.DLt.localTimeMs-this.DLt.serverTimeMs)/1e3}async xIt(t,i,e){for(;!e.n_;){await Si(6e5,e);try{this.DLt=await TZ(t,i,e)}catch(t){me(t)}}}h_(){this.$O.g_()}constructor(t,i,e){this.$O=new Bd,this.DLt=t,this.xIt(i,e,this.$O.f_).catch(Br)}};async function TZ(t,i,e){let[s,n,r]=await SZ(t,i,e);return n>20&&([s,n,r]=await SZ(t,i,e)),{localTimeMs:s,serverTimeMs:r-n/2}}async function SZ(t,i,e){const s=ra.m_(),n=await i.uD({ZD:Cl.GET,zu:t,f_:e}),r=ra.m_()-s,o=await n.uE(e);return[s,r,1e3*Number(o)]}var NZ,IZ=class extends Os{constructor(){super("seek")}};(NZ||(NZ={})).WU="seek";var DZ=[Tf.jh,$.Nw,Tf.fm],EZ=class extends Mo{get fp(){return this.gkt}get O_(){return this.kLt&&this.LLt?this.kLt.O_.Sn(this.LLt.O_):this.kLt?this.kLt.O_:this.LLt?this.LLt.O_:Ri.oU()}get tLt(){return this.xLt}get eLt(){return this.CLt}get ht(){return this.YT}get rt(){return this.VT}get OLt(){return this.jLt.OL}get W(){return this.RLt.OL}get Ig(){return this.gkt?function(t,i,e){var s;const n=null==(s=t.kkt[0])?void 0:s.U_,r=t.Mkt;if(void 0===n||void 0===r)return e>0&&e<pu?new Ri([0,e],[!0,!0]):Ri.oU();let o=i.WDt;if(!o){const i=GG(t.Tkt).getTime()/1e3;o=n+(Date.now()/1e3-i)}return new Ri([o-r,o],[!0,!0])}(this.gkt,this.PLt,this.Fm.ct):Ri.oU()}async zLt(){this.kLt&&await this.kLt.rS(0,1/0),this.LLt&&await this.LLt.rS(0,1/0)}$n(){if(!this.bc.src)throw new ao(qa.SOURCE_INVALID,"No src property found in given source.");this.Cvt||(this.Cvt=this.nst(this.dE.f_).catch(this.M3))}async nst(t){this.Co(new tn);const i=this.bc.src,e=await this.BLt.qIt(i,t);this.gkt=new nZ(i,e),this.gkt.Rkt&&(this.ULt=await bZ.create(this.gkt.Rkt,this.aE,t)),this.QLt();const s=this.gkt.kkt[this.gkt.kkt.length-1];this.createTracksForPresentation(s),this.jLt.LL(),this.Zkt()}$kt(t){for(const i of this.YT.Rw)i.fS(i===t)}iLt(t){for(const i of this.VT.Rw)i.fS(i===t)}Zkt(){const t=bo(this.YT.Rw,(t=>t.Rt)),i=bo(this.VT.Rw,(t=>t.Rt)),e=this.wU.vLt(t,i);$r(this.SLt(e.TLt,e.bLt))}QLt(){if(!this.gkt||"live"!==this.gkt.QK||!this.ULt)return;const t=this.gkt.kkt.filter((t=>t.o===this.gkt.xkt))[0].U_,i=this.ULt.ELt+new Date(this.gkt.Tkt).getTime()/1e3;this.PLt.GDt(i,t)}createTracksForPresentation(t){var i,e,s,n;for(const i of null!=(s=t.mkt)?s:[])this.YT.tt(new lZ(i,this));for(const i of null!=(n=t.Akt)?n:[])this.VT.tt(new dZ(i,this));null==(i=this.YT.zw(0))||i.fS(!0),null==(e=this.VT.zw(0))||e.fS(!0)}get lp(){return this.FLt}get JIt(){const t=this.PLt.WDt;if(void 0!==t)return t}Cn(){this.YLt=!0,this.GLt()}Zg(){var t;this.YLt=!1,this.VLt().catch(this.M3),"live"===(null==(t=this.fp)?void 0:t.QK)&&(this.WLt(),this.HLt())}WLt(){this.XLt&&this.XLt.cancelDownload()}HLt(){this.ZLt&&this.ZLt.cancelDownload()}tp(t){this.L5.g_(),this.L5=new Bd,this.x5=this.qLt(t,this.x5,this.L5.f_).catch(this.M3),this.Co(new IZ)}async qLt(t,i,e){if(i&&await i,await Jr(this.W,e),"live"!==this.gkt.QK)throw new g("The current video source does not support Live playback.");if(Vr(e),await this.VLt(),Vr(e),this.XLt&&(this.XLt.kEt()||this.XLt.NEt!==(null!=t?t:"now"))){var s;if(this.WLt(),this.kLt){for(;this.kLt.tEt;)await Jr(this.kLt.eEt,e);await this.kLt.rS(0,1/0)}null==(s=this.XLt)||s.JA(null!=t?t:"now")}if(this.ZLt&&(this.ZLt.kEt()||this.ZLt.NEt!==(null!=t?t:"now"))){var n;if(this.HLt(),this.LLt){for(;this.LLt.tEt;)await Jr(this.LLt.eEt,e);await this.LLt.rS(0,1/0)}null==(n=this.ZLt)||n.JA(null!=t?t:"now")}Vr(e),this.x5=void 0,this.GLt()}JA(t){this.L5.g_(),this.L5=new Bd,this.x5=this.C5(t,this.x5,this.L5.f_).catch(this.M3),this.Co(new IZ)}async C5(t,i,e){var s,n;i&&await i,await Jr(this.W,e),Vr(e),await this.VLt(),Vr(e),this.XLt&&(this.XLt.kEt()||this.XLt.NEt!==t)&&this.WLt(),this.ZLt&&(this.ZLt.kEt()||this.ZLt.NEt!==t)&&this.HLt(),Vr(e),null==(s=this.XLt)||s.JA(t),null==(n=this.ZLt)||n.JA(t),this.x5=void 0,this.GLt()}SLt(t,i){var e,s;return(null==(e=this.XLt)?void 0:e.Lht)===i&&(null==(s=this.ZLt)?void 0:s.Lht)===t?Promise.resolve():(this.KLt.g_(),this.KLt=new Bd,this.JLt=this.$Lt(t,i,this.JLt,this.KLt.f_).catch(this.M3),this.JLt)}async $Lt(t,i,e,s){e&&await e,await Jr(this.jLt.OL,s),Vr(s),await this.VLt(),Vr(s),await this.txt(t,i),await this.ixt(t,i),Vr(s),this.JLt=void 0,this.GLt()}async txt(t,i){var e,s,n;const r=null!=(n=this.JIt)?n:"now";if((null==(e=this.XLt)?void 0:e.Lht)!==i){var o;const t=this.XLt&&!this.XLt.kEt(),e=null==(o=this.XLt)?void 0:o.NEt;if(this.XLt&&(await this.XLt.h_(),this.XLt=void 0),this.kLt&&await this.kLt.eEt,i){var h,a;const s=null!=(a=null==(h=this.kLt)?void 0:h.O_)?a:Ri.oU(),n=t?e:s.jn(s.U-1);this.XLt=new YX(i,this.aE,this.Mlt),this.XLt.JA(null!=n?n:r)}}if((null==(s=this.ZLt)?void 0:s.Lht)!==t){var u;const i=this.ZLt&&!this.ZLt.kEt(),e=null==(u=this.ZLt)?void 0:u.NEt;if(this.ZLt&&(await this.ZLt.h_(),this.ZLt=void 0),this.LLt&&await this.LLt.eEt,t){var c,l;const s=null!=(l=null==(c=this.LLt)?void 0:c.O_)?l:Ri.oU(),n=i?e:s.jn(s.U-1);this.ZLt=new YX(t,this.aE,this.Mlt),this.ZLt.yn(SX.lEt,this.Ds),this.ZLt.JA(null!=n?n:r)}}}async ixt(t,i){const e=function(t,i,e,s,n){const r=fZ(t,null==i?void 0:i.Lt.qEt.qEt,null==e?void 0:e.Lt.qEt.qEt,s),o=fH(r),h=[];i&&h.push({Nz:i.aG});e&&h.push({Nz:e.aG});return{Av:de.Sj,F1:h,Iz:o,t2:n&&!s}}(this.bc.contentProtection,i,t,this.Fm.Hm.Wm,this.bc.useManagedMediaSource);if(this.yz&&this.yz.FZ(e)){var s,n;const t=!(null==(s=this.XLt)?void 0:s.kEt());if(this.kLt&&t){for(;this.kLt.tEt;)await this.kLt.eEt;await this.kLt.MG()}const i=!(null==(n=this.ZLt)?void 0:n.kEt());if(this.LLt&&i){for(var r,o;null==(r=this.LLt)?void 0:r.tEt;)await this.LLt.eEt;await(null==(o=this.LLt)?void 0:o.MG())}await this.yz.GZ(e)}else{this.WLt(),this.HLt(),this.kLt&&(await this.kLt.h_(),this.kLt=void 0),this.LLt&&(await this.LLt.h_(),this.LLt=void 0),this.Fm.z6();try{await this.Fm.tr(),this.yz=await this.Fm.$n(e),this.RLt.LL(),this.yz.I1&&this.XLt&&(this.yz.I1.yn(In.CZ,this.Ds),this.kLt=new EX(this.yz.I1,this.Fm,i,this.sxt)),this.yz.D1&&this.ZLt&&(this.yz.D1.yn(In.CZ,this.Ds),this.LLt=new EX(this.yz.D1,this.Fm,t,this.sxt)),"live"===this.gkt.QK&&this.yz.P1(1/0)}finally{this.Fm.B6()}}}GLt(){!this.YLt||this.x5||this.JLt||this.nxt||this.rxt||(this.wU.Cn(),this.oxt=new Bd,this.ZLt&&this.LLt&&(this.nxt=this.hxt(this.ZLt,this.LLt,this.oxt.f_).catch(this.M3)),this.XLt&&this.kLt&&(this.rxt=this.hxt(this.XLt,this.kLt,this.oxt.f_).catch(this.M3)))}async VLt(){this.wU.Zg(),this.oxt&&(this.oxt.g_(),this.oxt=void 0),this.nxt&&(await this.nxt,this.nxt=void 0),this.rxt&&(await this.rxt,this.rxt=void 0)}async hxt(t,i,e){for(await this.W;t.tEt;)await Jr(t.eEt,e);for(;i.tEt;)await Jr(i.eEt,e);if(!t.kEt()){const e=ra.m_()/1e3,s="now"===t.NEt,{initialization:n,data:r,metadata:o}=await t.LEt(),h={Av:Lu.jZ,ly:n},a=r?{Av:Lu.jZ,ly:r}:void 0,u=i.O_;!ra.Ys.Ret&&!this.Fm.Hm.Wm&&o&&u.jn(u.U-1)>o.F7&&await i.rS(o.F7,1/0),await i.X$(h),a&&await i.V$(a,o,t.Lht);const c=i.O_.VB(u);s&&c.U>0&&this.PLt.FDt(e,c.jn(c.U-1))}for(;!t.SEt;){Vr(e);const s=t.zEt();await Jr(i.appendStream(s,t),e)}}async h_(){this.dE.g_(),this.Cvt&&await this.Cvt.catch(Br),this.x5&&(this.L5.g_(),this.WLt(),this.HLt(),await this.x5.catch(Br)),this.JLt&&(this.KLt.g_(),this.WLt(),this.HLt(),await this.JLt.catch(Br)),await this.VLt(),this.XLt&&await this.XLt.h_(),this.ZLt&&await this.ZLt.h_(),this.XLt=void 0,this.ZLt=void 0,this.RLt.g_(),this.jLt.g_(),this.yz&&(await this.Fm.tr(),this.yz=void 0),this.kLt=void 0,this.LLt=void 0,this.Fm.fn($.Sm,this.Vm),this.Fm.fn(DZ,this.updateActiveQualities),this.YT.tr(),this.xLt=void 0,this.VT.tr(),this.CLt=void 0,this.gkt=void 0,this.ULt&&(this.ULt.h_(),this.ULt=void 0),this.YLt=!1}constructor(t,i,e,s,n,r,o,h,a,u){super(),this.YLt=!1,this.axt=!1,this.YT=new Ds,this.VT=new Ds,this.uxt=void 0,this.xLt=void 0,this.CLt=void 0,this.jLt=new Oi,this.yz=void 0,this.Cvt=void 0,this.RLt=new Oi,this.dE=new Bd,this.JLt=void 0,this.KLt=new Bd,this.x5=void 0,this.L5=new Bd,this.XLt=void 0,this.kLt=void 0,this.rxt=void 0,this.ZLt=void 0,this.LLt=void 0,this.nxt=void 0,this.oxt=void 0,this.Vm=()=>{this.axt=!0},this.updateActiveQualities=()=>{var t,i;const e=this.Fm.U_,s=null==(t=this.kLt)?void 0:t.KDt(e),n=null==(i=this.LLt)?void 0:i.KDt(e);if(this.xLt!==s&&(this.xLt=s,s))for(const t of this.YT.Rw)t.Jkt(s);if(this.CLt!==n&&(this.CLt=n,n))for(const t of this.VT.Rw)t.Jkt(n)},this.cxt=t=>{const i=t.data;if(i.Av===Jo._Et){const{wEt:t,vEt:s,gEt:n,mEt:r}=i;if(this.ULt){const i=this.ULt.kAt,e=this.Fm.U_;this.axt&&0!==e&&(this.FLt={theolive:i-t+n-e,engine:s,distribution:i-(t+s),player:n-e},this.PLt.GDt(this.ULt.ELt+t,n))}var e;if(r)this.uxt||(this.uxt=this.Fm.rE(Qe.ZA,"timecode","timecode",void 0,!1,O.DEFAULT,!1,void 0)),this.uxt.lE(new rl(n,n,r,!1,void 0)),Le(this.uxt,null!=(e=this.Fm.O_.Cn(0))?e:-1)}},this.M3=t=>{be(t)||(this.Zg(),this.Co(new as(new ao(qa.MEDIA_LOAD_ERROR,t.message))))},this.bc=t,this.BLt=i,this.Fm=e,this.aE=n,this.PLt=r,this.wU=new AZ(e,o,this,a,s),this.Mlt=h,this.sxt=u,this.yn(SX.lEt,this.cxt),this.Fm.yn($.Sm,this.Vm),this.Fm.yn(DZ,this.updateActiveQualities)}};var kZ=[Tf.Jv,Tf.fm,Tf.Ov,Tf.qv,Tf._m,Tf.Lv,Tf.zv,Tf.Rv],LZ=class extends Mo{Gw(){this.Fm.yn(kZ,this.Ds),this.Fm.yn($.Sm,this.VQ),this.Fm.yn([Tf.jh,Tf.Sh],this.lxt),this.Fm.yn(hi.ha,this.dxt),this.zz.yn(Hs,this.Ds)}Fw(){this.Fm.fn(kZ,this.Ds),this.Fm.fn($.Sm,this.VQ),this.Fm.fn([Tf.jh,Tf.Sh],this.lxt),this.Fm.fn(hi.ha,this.dxt),this.zz.fn(Hs,this.Ds)}get ht(){return this.YT}get rt(){return this.VT}get fp(){var t,i;return null==(i=this._Lt)||null==(t=i.fp)?void 0:t.fp}get zg(){return this.Fm.zg}set zg(t){this.Fm.zg=t}get Yg(){return!1}set Yg(t){}get Tz(){return this.Sz}qg(){return!1}Gg(){return this.Fm.ya}be(){this.Fm.be()}ge(){return this.Fm.ge()}$g(){}iw(){}Kg(){}Jg(){}get og(){return this.Fm.og}set og(t){this.Fm.og=t}get U_(){var t;return null!=(t=this.fxt)?t:this.Fm.U_}set U_(t){this.F_(t)}F_(t,i){this.L5.g_(),this.L5=new Bd,this.x5=this.C5(t,this.L5.f_,this.x5)}get R_(){const t=this._xt();if(t)return new Date(t.getTime()+1e3*this.U_)}set R_(t){const i=this._xt();t&&i&&(this.U_=i.getTime()-t.getTime())}_xt(){const t=this.fp;if(!t)return;const i=new Date(t.creationDate).getTime();let e=NaN;for(const i of t.presentations)i.currentTime&&(e=i.currentTime.value/(i.currentTime.scale||1)*1e3);return S(e)?void 0:new Date(i-e)}get bt(){return this.bc}get gg(){return this.Fm.gg}set gg(t){this.Fm.gg=t}get ct(){const t=this.Fm.ct;return t===pu?1/0:t}get G_(){return!1}get H_(){return this.mz}get lt(){return this.vz}get Z_(){return this.gxt}get K_(){return!1}get eg(){return ol({},{HT:0,XT:0,ZT:0,qT:0,KT:0,JT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.Fm.rg())}get cg(){return!0}get Eg(){return this.aU}get Mz(){}get nt(){return this.Dl}get Cg(){return this.Fm.Cg}get Rg(){return this.Fm.Rg}get O_(){return this.VTt.ks()}get VTt(){return this._Lt?this._Lt.O_:Ri.oU()}get pg(){return this.Fm.pg.ks()}get Ig(){var t,i;return null!=(i=null==(t=this._Lt)?void 0:t.Ig.ks())?i:Ri.oU().ks()}get fg(){return this.wtt}get dp(){return!0}get Qg(){return this.vU}get $It(){return this.fz?Pf(this.fz.xm):null!=(i=this.tDt)?i:Pf(null!=(t=this.wxt)?t:Qs());var t,i}get tDt(){if(!this.fz)return this.vxt;const t=this.fz.Om;return t?Pf(t):void 0}set tDt(t){this.fz?this.fz.Om=t?Rf(t):void 0:this.vxt=t}get JIt(){var t;return null==(t=this._Lt)?void 0:t.JIt}get Km(){if(this.fg)return;if(!this.axt)return;const t=this.U_,i=this.PLt.HDt(t);if(void 0===i)return;const e=this.VTt;let s=0;if(e.U>0){const i=e.jn(e.U-1);s=_.max(i-t,0)}return _.max(i,s)}get lp(){var t;return null==(t=this._Lt)?void 0:t.lp}get Sg(){return this.Fm.Sg}get yg(){return this.mxt}set yg(t){this.mxt=t,this.pxt()}async pxt(){this.mxt!==ut.yB&&this._Lt&&(this._Lt.$n(),this.mxt!==ut.LT&&this.mxt!==ut.YP||(await this._Lt.OLt,"vod"===this._Lt.fp.QK&&this._Lt.Cn()))}async ga(t,i,e){if(Vr(e),await this.tr(),Vr(e),!yc(t))return this.mz=new ao(qa.SOURCE_INVALID,"HESP source incorrectly configured"),this.vz=ia(this.mz),this.Axt(this.mz),Promise.resolve();const s=t;this.bc=s;const n=new wX(this.aE);this.wxt=this.yxt(t),this.fz=new zf(this,this.Fm,this.wxt),this.fz.Rt=!0,this.fz.yn("latencyrecoveryseek",this.Ds),this.vxt=void 0,this.Qg.ka(this.fz),this._Lt=new EZ(s,n,this.Fm,this.Sz,this.aE,this.PLt,this.fz,this.Mlt,this,this.sxt),this._Lt.yn(Tf.Gv,this.Ds),this._Lt.yn(hi.ha,this.Mxt),this.YT.Uw=this._Lt.ht,this.VT.Uw=this._Lt.rt,this.Lz.HP(t.contentProtection),$r(this.pxt())}yxt(t){return t.latencyConfiguration?t.latencyConfiguration:this.vxt?Rf(this.vxt):Qs()}async Xg(){var t;if(!this._Lt)return;this.wtt=!1,this._Lt.$n(),await this._Lt.W,this.Co(new Rt(this.U_));const i=this._Lt.k_(NZ.WU);this.tp(),await i,this._Lt.Cn(),await this.Fm.Xg(),null==(t=this.fz)||t.Cn()}Hg(){var t;this._Lt&&(this.wtt=!0,this.Co(new Ye(this.U_)),this._Lt.Zg(),null==(t=this.fz)||t.Zg(),this.Fm.Hg())}tp(){if(this.MNt)throw new g("Cannot seek while resetting");this.L5.g_(),this.L5=new Bd,this.x5=this.qLt(this.x5,this.L5.f_)}bxt(){var t;null==(t=this._Lt)||t.Zg()}Axt(t){this.Co(new as(t)),this.bxt()}async C5(t,i,e){var s;if(this.MNt)throw new g("Cannot seek while resetting");let n=t;if(this.Txt(n),this.Ig.length>0&&(n=Ri.xn(this.Ig).zB(n),this.Txt(n)),this._Lt){e&&(await e.catch(Br),Vr(i)),(null==(s=this.fz)?void 0:s.Lm)&&this.fz.Zg();try{const t=this.Fm.k_(Tf.$v,i);this.Fm.JA(n),this._Lt.JA(n),await t}catch(t){throw me(t),this._Lt.Zg(),this.Sxt(),t}this.Nxt()}}async qLt(t,i){this.Co(new Os("golive"));const e=this.JIt;if(this.Txt(e),this._Lt){t&&(await t.catch(Br),Vr(i));try{const t=this.fz.xm.targetOffset;let s;if(await this._Lt.OLt,s=e&&t>=1?e-(t-.4):this.JIt?this.JIt-.2:void 0,this._Lt.tp(s),this.VTt.U>0)for(;this.VTt.U>0;)await this._Lt.k_(In.CZ,i);const n=this.VTt;for(;0===this.VTt.VB(n).U;)await this._Lt.k_(In.CZ,i);s=this.VTt.Cn(this.VTt.U-1),s=this.Ixt(s),this.Txt(s);const r=this.Fm.k_(Tf.$v,i);this.Fm.JA(s,!0),await r}catch(t){var s;if(be(t))throw null==(s=this.fz)||s.Cn(),t;throw this._Lt.Zg(),await this._Lt.zLt(),this.Sxt(),t}this.Nxt()}}Txt(t){this.aU=!0,this.fxt=t,this.Co(new Ur(this.U_))}Nxt(){this.aU&&(this.fxt=void 0,this.aU=!1,this.Co(new Ko(this.U_)))}Sxt(){this.fxt=void 0,this.aU=!1}Ixt(t){return t}async bNt(t,i,e){var s;Vr(e),t&&await t.catch(Br),i&&await i.catch(Br),await this.sxt.tr(),null==(s=this.fz)||s.Zg(),this._Lt&&(await this._Lt.h_(),this._Lt=void 0),Vr(e),await this.Fm.tr(),Vr(e),this.Fm.Pz(),this.VT.tr(),this.YT.tr(),this.Sxt(),this.zz.tr(),this.PLt.tr(),this.mz=void 0,this.vz=void 0,this.wtt=!0,this.axt=!1,this.bc=void 0,this.MNt=void 0,this.wxt=void 0}tr(){return this.L5.g_(),this.L5=new Bd,this.Dxt.g_(),this.Dxt=new Bd,this.MNt=this.bNt(this.x5,this.MNt,this.Dxt.f_),this.MNt}async gn(){var t,i;this.Fw(),this.zz.gn(),this.bc&&await this.tr(),this.Vo(),this.Fm.Qz=void 0,null==(t=this.fz)||t.fn("latencyrecoveryseek",this.Ds),null==(i=this.fz)||i.h_(),await this.sxt.gn(),this.Dl.gn(),this.YT.gn(),this.VT.gn()}constructor(t,i,e,s,n){super(),this._Lt=void 0,this.aU=!1,this.L5=new Bd,this.x5=void 0,this.MNt=void 0,this.Dxt=new Bd,this.wtt=!0,this.axt=!1,this.YT=new ul,this.VT=new ul,this.mz=void 0,this.vz=void 0,this.mxt=ut.yB,this.lxt=()=>{this.Fm.fg!==this.wtt&&(this.Fm.fg?this.Hg():this.Xg().catch(Br))},this.VQ=()=>{this.axt=!0},this.Mxt=t=>{this.mz=t.errorObject,this.vz=ia(this.mz),this.Axt(this.mz)},this.dxt=t=>{this.mz=ar(t.lt),this.vz=t.lt,this.Axt(this.mz)},this.Fm=t,this.zz=new Xe(this.Fm,!0),this.aE=i,this.Sz=new NX(e.aX,e.VH.VP),this.Lz=new ju(i),this.Fm.Qz=this.Lz,this.sxt=new lG(this.Fm),this.Dl=new vl([this.Fm.nt,this.sxt.Z]),this.PLt=new IX,this.gxt=new vX(this),this.vU=s,this.Mlt=n.retryConfiguration,this.Gw()}},xZ=class extends LZ{Vg(){if(wh(this.Fm))return this.Fm.Vg()}async tr(){this.Ext=!1,await super.tr()}async gn(){h.removeEventListener("visibilitychange",this.kxt),await super.gn(),await this.Fm.h_(),await this.Yz.Fz(this.Lxt)}Ixt(t){return Po.zk&&Po.Uk>=15&&Po.QE?t+.25:t}constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.Ext=!1,this.kxt=()=>{const t=this.og||0===this.zg;"hidden"===h.visibilityState&&!this.fg&&t?(this.Hg(),this.Ext=!0):"visible"===h.visibilityState&&this.Ext&&($r(this.Xg()),this.Ext=!1)},this.Yz=n,this.Lxt=t,h.addEventListener("visibilitychange",this.kxt)}},CZ=class{get uB(){return tl.Np}async hB(t,i){return function(t){if(!t)return!1;const i=t.toLowerCase();return I(i,Pl.Sp)||I(i,Pl.Np)}(t.type)}};hn(new class extends CZ{Yp(t,i,e,s,n,r,o){const h=new At(i),a=h.oB(Jt.VA);return new xZ(a,e,n,r,h,s)}hB(t,i){return dC(t.useManagedMediaSource)?super.hB(t,i):Promise.resolve(!1)}aB(){return!1}});var OZ=class extends LZ{Vg(){if(wh(this.Fm))return this.Fm.Vg()}async gn(){await super.gn(),await this.Yz.Fz(this.Fm)}constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.Yz=n}};Po.zk&&Po.Ga&&hn(new class extends CZ{get uB(){return tl.FP}async hB(t,i){var e,s;const n=await super.hB(t,i);var r;if(null==(r=null==(s=Mb())||null==(e=s.canPlayType)?void 0:e.call(s,Pl.Mp))||!r||!n||!("serviceWorker"in Il))return!1;try{const t=Il.serviceWorker.ready;return await Vd(t,1e3),!0}catch(t){return!1}}Yp(t,i,e,s,n,r,o){if(t instanceof HTMLDivElement){const t=i.nnt(Jt.VA);return new OZ(t,e,n,r,i,s)}throw new ao(qa.CONFIGURATION_ERROR,"Container Div element expected.")}aB(){return!1}});var jZ="theo_live_user_id",RZ=class{incrementSequenceNumber(){this.oC+=1}get sequenceNumber(){return this.oC}constructor(t){this.externalId=t,this.id=sI(),this.userId=PZ(),this.oC=0}};function PZ(){try{const t=localStorage.getItem(jZ);if(t)return t;const i=sI();return localStorage.setItem(jZ,i),i}catch(t){return sI()}}var zZ=class{Bwt(t){const i=this.xxt.get(t.id);if(i)return i;const e=new BZ(t,this.aE,this.Cxt);return this.xxt.set(t.id,e),e}constructor(t,i){this.aE=t,this.xxt=new Map,this.Cxt=i}},BZ=class{get Oxt(){return Na()-this.jxt>36e5}Yn(){this.Rxt=!1,this.jxt=Na(),this.Pxt=this.Tbt(),this.Pxt.catch((()=>this.Rxt=!0))}async Tbt(){const{id:t,discovery:i}=this.uS;if(el(i.pathname,"manifest.json"))return function(t){return{id:{id:t.id,discovery:ra.Dh("dev://")},name:"demo",mode:"demo",status:"playing",source:{src:t.id,type:"theo.live"},customization:{autoplay:!0}}}(this.uS);const e=await this.zxt(this.uS,this.Bxt);if(!e)throw new QZ(t);const{mode:s,status:n,fallback:r,metadata:o}=e;if("locked"===s)throw new FZ(t);if("deleted"===n)throw new YZ(t);return{id:this.uS,name:o.name,mode:s,status:n,source:GZ(e),fallback:r?await this.Uxt(r,i,this.Bxt):void 0,insights:null==o?void 0:o.insights,enhancedLogging:null==o?void 0:o.enhancedLogging,customization:null==o?void 0:o.customization}}async Uxt(t,i,e){if("theo.live"!==t.type)return{src:t.src,type:t.type};const s={id:t.src,discovery:i},n=await this.zxt(s,e);return n?GZ(n):void 0}async zxt(t,i){let{id:e,discovery:s}=t;try{const t=await this.aE.uD({zu:ra.Dh(e,s.toString()).toString(),XD:i});return await t.SR()}catch(t){return}}get M8(){return(this.Rxt||this.Oxt)&&this.Yn(),this.Pxt}constructor(t,i,e){this.uS=t,this.aE=i,this.Bxt=new Xo,e.discoveryHeader&&this.Bxt.append("x-theolive-discovery",e.discoveryHeader),this.Yn()}};var UZ=class extends ao{constructor(t,i,e){super(t,"Could not load channel with id "+i+": "+e),this.channelId=i,this.reason=e}},QZ=class extends UZ{constructor(t){super(qa.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel could not be found")}},FZ=class extends UZ{constructor(t){super(qa.THEO_LIVE_CHANNEL_NOT_FOUND,t,"This account has been locked")}},YZ=class extends UZ{constructor(t){super(qa.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel got deleted")}};function GZ(t){var i;return{src:t.hespSrc,type:"theo.live",targetLatency:null==(i=t.metadata.customization)?void 0:i.targetLatency,contentProtection:t.drmConfig?VZ(t.drmConfig):void 0}}function VZ(t){const{integration:i,widevine:e,playready:s,fairplay:n}=t;return ol({integration:i},e&&{widevine:{licenseAcquisitionURL:e.licenseUrl}},s&&{playready:{licenseAcquisitionURL:s.licenseUrl}},n&&{fairplay:{licenseAcquisitionURL:n.licenseUrl,certificateURL:n.certificateUrl}})}function WZ(t,i){return{id:t,discovery:ra.Dh(t,i)}}function HZ(t,i){const e=ra.Dh(t),s=sI();return e.searchParams.append("CMCD","rid="+s+"&sid="+i.id),e.searchParams.append("userId",i.userId),i.externalId&&e.searchParams.append("externalSessionId",i.externalId),e.href}var XZ=class{get Qxt(){return this.amountOfSamples>0?this.currentAverage:0}get Fxt(){return this.Yxt}Gxt(t){this.Vxt=!0,this.currentAverage=this.currentAverage+(t-this.currentAverage)/(this.amountOfSamples+1),this.amountOfSamples+=1,this.Yxt=_.min(this.Fxt,t)}constructor(){this.Vxt=!1,this.amountOfSamples=0,this.currentAverage=0,this.Yxt=1/0}},ZZ=class{Gxt(t){this.Wxt+=1,this.Hxt=_.min(this.Hxt,t),this.Xxt=_.max(this.Xxt,t),this.Zxt+=(t-this.Zxt)/this.Wxt,this.qxt=t}Kxt(){if(0!==this.Wxt)return{weight:this.Wxt,minimum:_.round(this.Hxt),average:_.round(this.Zxt)}}Jxt(){if(0!==this.Wxt)return{weight:this.Wxt,minimum:_.round(this.Hxt),average:_.round(this.Zxt),latest:_.round(this.qxt)}}$xt(){if(0!==this.Wxt)return{weight:this.Wxt,maximum:_.round(this.Xxt),average:_.round(this.Zxt)}}constructor(){this.Wxt=0,this.Hxt=1/0,this.Xxt=0,this.Zxt=0,this.qxt=0}},qZ=class extends ao{constructor(){super(qa.THEO_LIVE_ANALYTICS_ERROR,"Illegal configuration: unexpected property analyticsEnabled")}},KZ=class{Ta(t){var i,e,s;const n={state:t,width:this.Qo.we.clientWidth,height:this.Qo.we.clientHeight,activeQuality:null!=(s=null==(e=this.Qo.rt.zw(0))||null==(i=e.Hw)?void 0:i.GP)?s:-1,time:ra.m_()};this.ja&&function(t,i){return t.state===i.state&&t.activeQuality===i.activeQuality&&t.height===i.height&&t.width===i.width}(this.ja,n)||(this.ja=n,this.tCt("statechange",n))}iCt(t){var i,e;this.Ta("loading");const s=el(ra.Dh(t.source.src).host,"fastly.net");if(!this.eCt()&&!s)throw new qZ;var n,r;this.sCt=t,this.nCt=!1,this.axt=!1,this.rCt=-1/0,this.oCt({type:"session",channelId:t.id.id,channelStatus:t.status,sessionId:this.hCt.id,externalSessionId:this.hCt.externalId,backup:null==(i=t.fallback)?void 0:i.src,autoplay:null!=(n=null==(e=t.customization)?void 0:e.autoplay)&&n,userAgent:Il.userAgent,clientVersion:"8.3.0",clientType:"theoplayer"}),this.tCt("loadchannel",{targetLatency:null!=(r=t.source.targetLatency)?r:0})}Cn(){if(!this.aCt){var t,i;this.aCt=!0,this.Qo.yn(hi.ha,this.uCt),this.Qo.yn(Tf._m,this.cCt),this.Qo.rt.yn(rc.hw,this.lCt),this.Qo.yn(Tf.qv,this.dCt),this.Qo.yn($.Sm,this.ett),this.Qo.yn(Tf.Sh,this.ott),this.Qo.yn(Tf.jh,this.ntt),this.Qo.Z_.yn("golive",this.fCt),this.Qo.Z_.yn("latencyrecoveryseek",this._Ct),this.Qo.yn($.Tm,this.gCt),this.Qo.yn(Tf.fm,this.wCt),this.Qo.yn(Bh.pn,this.vCt),this.Qo.hF.RH(this.mCt),null==(t=this.Qo.Oc)||t.yn(["Bit","zit","Uit","Qit","pCt"],this.ACt),null==(i=this.Qo.Oc)||i.yn("yCt",this.MCt),s.addEventListener("beforeunload",this.bCt),h.addEventListener("visibilitychange",this.TCt),this.tCt("visibilitychange",{visibility:h.visibilityState});const e=this.Qo.we;this.tCt("dimensionchange",{width:e.clientWidth,height:e.clientHeight}),this.SCt=ra.m_(),this.NCt=ra.f1((()=>{const t=this.ICt();this.oCt(t)}),3e4),this.DCt=ra.f1((()=>{this.ECt()}),5e3),this.kCt=ra.f1((()=>{this.LCt.push(this.Qo.hF.VH.GP)}),100)}}Zg(){if(this.xCt.length>0){const t=this.ICt();this.oCt(t)}var t,i,e;(this.xCt=[],this.CCt=[],this.OCt=[],this.aCt)&&(this.aCt=!1,this.Qo.fn(hi.ha,this.uCt),this.Qo.fn(Tf._m,this.cCt),this.Qo.rt.fn(rc.hw,this.lCt),null==(t=this.Qo.rt.zw(0))||t.fn(ct.xw,this.jCt),this.Qo.fn(Tf.qv,this.dCt),this.Qo.fn($.Sm,this.ett),this.Qo.fn(Tf.Sh,this.ott),this.Qo.fn(Tf.jh,this.ntt),this.Qo.Z_.fn("golive",this.fCt),this.Qo.Z_.fn("latencyrecoveryseek",this._Ct),this.Qo.fn($.Tm,this.gCt),this.Qo.fn(Tf.fm,this.wCt),this.Qo.fn(Bh.pn,this.vCt),this.Qo.hF.BH(this.mCt),null==(i=this.Qo.Oc)||i.fn(["Bit","zit","Uit","Qit","pCt"],this.ACt),null==(e=this.Qo.Oc)||e.fn("yCt",this.MCt),s.removeEventListener("beforeunload",this.bCt),h.removeEventListener("visibilitychange",this.TCt),ra.g1(this.NCt),ra.g1(this.DCt),ra.g1(this.kCt))}RCt(){this.tCt("intenttofallback")}PCt(){this.tCt("fallback")}ECt(){var t;const i=this.Qo.j_();if(i.length){const t=i.end(i.length-1)-this.Qo.Q_();this.CCt.push(t)}this.OCt.push(this.Qo.hF.VH.GP);const e=null==(t=this.Qo.Z_)?void 0:t.Km;void 0===e||this.Qo.fg||(this.zCt=_.min(this.zCt,e),this.BCt=_.max(this.BCt,e),this.UCt.Gxt(e))}QCt(t){var i;this.LCt.sort(((t,i)=>t-i));const e=null!=(i=this.LCt[0])?i:0;var s;const n=null!=(s=this.LCt[_.round(.05*this.LCt.length)])?s:0;var r;const o=null!=(r=this.LCt[_.round(.25*this.LCt.length)])?r:0;var h;const a=null!=(h=this.LCt[_.round(.5*this.LCt.length)])?h:0;var u;const c=null!=(u=this.LCt[_.round(.75*this.LCt.length)])?u:0;var l;const d=null!=(l=this.LCt[_.round(.95*this.LCt.length)])?l:0;var f;const g=null!=(f=this.LCt[this.LCt.length-1])?f:0,w=ra.m_();var v;const m=(w-(null!=(v=this.SCt)?v:0))/1e3;return this.LCt.length=0,this.SCt=w,{activeQuality:t.GP,duration:m,min:e,p5:n,p25:o,median:a,p75:c,p95:d,max:g}}ICt(){var t,i,e;this.tCt("beacon",{activeQuality:null==(i=this.Qo.rt.zw(0))||null==(t=i.Hw)?void 0:t.GP,averageLatency:this.UCt.Qxt,minLatency:this.zCt,maxLatency:this.BCt}),this.UCt=new XZ,this.zCt=1/0,this.BCt=-1/0;const s=null==(e=this.Qo.rt.zw(0))?void 0:e.Hw;if(s){const t=this.QCt(s);this.tCt("bandwidth-distribution",t)}const n=this.xCt.slice(0),r=_.round(this.OCt.reduce(((t,i)=>t+i),0)/_.max(this.OCt.length,1)),o=this.CCt.reduce(((t,i)=>t+i),0)/_.max(this.CCt.length,1);return this.OCt=[],this.CCt=[],this.xCt.splice(0),{type:"events",channelId:this.sCt.id.id,userId:this.hCt.userId,currentTime:Na()/1e3,latency:this.Qo.Z_.Km,paused:this.Qo.fg,events:n,rtt:_.round(1e3*this.Qo.hF.VH.VP),sessionId:this.hCt.id,externalSessionId:this.hCt.externalId,userAgent:Il.userAgent,weightedAverageBandwidth:r,weightedAverageBufferSize:o}}eCt(){var t,i,e,s;return!1!==(null==(t=this.Cxt)?void 0:t.analyticsEnabled)&&(null==(s=null==(e=this.sCt)||null==(i=e.insights)?void 0:i.enabled)||s)}oCt(t){if(this.eCt()){this.FCt.push(t);for(const i of this.Cxt.analyticsUrls)this.Qo.Hj.uD({zu:i,ZD:Cl.POST,XD:{Accept:"application/json","Content-Type":"application/json"},_v:xp.mp,HD:JSON.stringify(t)}).then((i=>{jn(this.FCt,t),$r(i.GR())})).catch((()=>{jn(this.FCt,t)}))}}YCt(t){if(this.eCt())for(const i of this.Cxt.analyticsUrls)this.Qo.Hj.NG({zu:i,HD:JSON.stringify(t)})}constructor(t,i,e){this.GCt=ra.m_(),this.nCt=!1,this.axt=!1,this.aCt=!1,this.VCt=!1,this.WCt=0,this.FCt=[],this.HCt=0,this.xCt=[],this.CCt=[],this.OCt=[],this.zCt=1/0,this.BCt=-1/0,this.UCt=new XZ,this.rCt=-1/0,this.LCt=[],this.SCt=void 0,this.XCt=void 0,this.ja=void 0,this.lCt=()=>{var t,i;this.Qo.rt.zw(0).yn(ct.xw,this.jCt),this.tCt("qualities",{qualities:null==(i=this.Qo.rt.zw(0))||null==(t=i.qw)?void 0:t.Rw.map((t=>({id:t.o,bandwidth:t.GP,label:t.kh,width:t.ji,height:t.Ti})))})},this.bCt=()=>{this.tCt("exit"),this.Ta("end");const t=this.ICt();for(const t of this.FCt)this.YCt(t);this.FCt.length=0,this.YCt(t)},this.TCt=()=>{this.tCt("visibilitychange",{visibility:h.visibilityState})},this.mCt=t=>{t.redirect(ol({},t,{url:HZ(t.url,this.hCt)}))},this.uCt=t=>{this.tCt("error",{message:t.errorObject.message})},this.cCt=()=>{this.tCt("volumechange",{volume:this.Qo.zg,muted:this.Qo.og})},this.jCt=t=>{var i;const e=t.Lht.GP;this.tCt("qualitychange",{from:this.XCt,to:e}),this.XCt=e;const s=this.QCt(t.Lht);var n;this.tCt("bandwidth-distribution",s),this.Ta(null!=(n=null==(i=this.ja)?void 0:i.state)?n:"loading")},this.dCt=t=>{var i;this.tCt("playbackratechange",{rate:t.playbackRate,latency:null==(i=this.Qo.Z_)?void 0:i.Km})},this.ett=()=>{var t;this.axt||(this.axt=!0,this.tCt("firstplaying",{targetLatency:null==(t=this.Qo.Z_)?void 0:t.Km}));const i=this.nCt;var e,s,n,r;(this.nCt=!0,i)?this.tCt("playing",{activeQuality:null==(s=this.Qo.rt.zw(0))||null==(e=s.Hw)?void 0:e.GP}):this.tCt("playing",{timeSincePlay:(ra.m_()-this.GCt)/1e3,activeQuality:null==(r=this.Qo.rt.zw(0))||null==(n=r.Hw)?void 0:n.GP});this.Ta("play")},this.ott=t=>{this.tCt("pause"),this.nCt=!1,this.Ta("pause")},this.ntt=()=>{this.tCt("play"),this.GCt=ra.m_()},this.fCt=()=>{ra.m_()-this.rCt>100&&this.tCt("liveseek",{when:this.nCt?"playback":"after-pause"})},this._Ct=()=>{this.rCt=ra.m_(),this.tCt("latencyrecoveryseek",{when:this.nCt?"playback":"after-pause"})},this.gCt=t=>{this.VCt||(this.VCt=!0,this.WCt=Na(),this.tCt("stallstart",{when:this.nCt?"playback":"after-pause"})),this.Ta("stall")},this.wCt=t=>{if(this.VCt){this.VCt=!1;const t=(Na()-this.WCt)/1e3;this.tCt("stallend",{stallDuration:t})}},this.vCt=Qd((t=>{var i,e;this.tCt("dimensionchange",{width:t.width,height:t.height}),this.Ta(null!=(e=null==(i=this.ja)?void 0:i.state)?e:"loading")}),1e3),this.MCt=t=>{this.tCt("aderror",null==t?void 0:t.message)},this.ACt=t=>{switch(t.type){case"Bit":this.tCt("adbreakbegin");break;case"zit":this.tCt("adbreakend");break;case"Uit":this.tCt("adbegin");break;case"Qit":this.tCt("adend");break;case"pCt":this.tCt("adskip")}},this.tCt=(t,i)=>{this.xCt.push({sequenceNumber:this.HCt++,currentTime:Na()/1e3,type:t,extra:i})},this.Qo=t,this.hCt=i,this.Cxt=e}};var JZ=class{ZCt(t){const i=_.min(_.max(t,this.zCt),this.BCt);localStorage.setItem("theolive/"+this.channelId+"/latency",i.toString());const e=i-this.defaultLatency.target;this.cu.Z_._p={windowStart:this.defaultLatency.windowStart+e,target:i,windowEnd:this.defaultLatency.windowEnd+e,maxOffset:this.defaultLatency.maxOffset+e}}qCt(){if(!this.cu.fg){const t=this.KCt;this.JCt=_.min(this.JCt,t),this.$Ct+=1}}get KCt(){const t=this.cu.j_(),i=this.cu.Q_();for(let e=0;e<t.length;e++)if(t.start(e)<=i&&i<=t.end(e))return t.end(e)-i;return 0}tOt(){if(this.$Ct<10)return;const t=.25-this.JCt;let i=this.iOt+t;i=_.max(i,this.iOt-.1),i=_.min(i,this.iOt+.1),this.ZCt(i),this.JCt=1/0,this.$Ct=0}get iOt(){return this.cu.Z_.ap.target}h_(){ra.g1(this.eOt),ra.g1(this.sOt)}constructor(t,i,e,s=e.target,n=0){this.channelId=i,this.defaultLatency=e,this.$Ct=0,this.JCt=1/0,this.cu=t,this.zCt=_.max(s,e.target),this.BCt=this.zCt+n;const r=localStorage.getItem("theolive/"+i+"/latency");this.ZCt(r?Number(r):s),this.eOt=ra.f1((()=>this.qCt()),1e3),this.sOt=ra.f1((()=>this.tOt()),6e4)}},$Z=class{get ct(){return _.round(ra.m_()-this.FI)}nOt(){const t=this.Qo.hF.VH.GP,i=this.Qo.Z_.Km?1e3*this.Qo.Z_.Km:void 0,e=function(t){const i=t.Q_(),e=t.j_();for(let t=0;t<e.length;t++)if(e.start(t)<=i&&i<=e.end(t))return 1e3*(e.end(t)-i);return 0}(this.Qo);t>0&&this.xP.Gxt(t),void 0!==e&&this.rOt.Gxt(e),void 0!==i&&this.bz.Gxt(i)}constructor(t){var i,e;this.FI=ra.m_(),this.rOt=new ZZ,this.xP=new ZZ,this.bz=new ZZ,this.Qo=t,this.hAt=null==(e=this.Qo.rt.zw(0))||null==(i=e.Hw)?void 0:i.o}},tq=class t extends $Z{Yp(){return{type:"loading",reason:this.aW,duration:this.ct,error:this.vz}}oOt(){return new t(this.Qo,this.aW,this.vz)}constructor(t,i,e){super(t),this.aW=i,this.vz=e}},iq=class t extends $Z{Yp(){var t;return{type:"stalling",duration:this.ct,bandwidth:this.xP.Kxt(),quality:null!=(t=this.hAt)?t:"unknown"}}oOt(){return new t(this.Qo,this.ln)}constructor(t,i){super(t),this.ln=i}},eq=class t extends $Z{Yp(){var t;return{type:"playing",duration:this.ct,bandwidth:this.xP.Jxt(),buffer:this.rOt.Kxt(),latency:this.bz.$xt(),qualities:this.sS,targetQualities:this.gct,width:this.qx,height:this.Kx,quality:null!=(t=this.hAt)?t:"unknown"}}oOt(){return new t(this.Qo,this.sS,this.gct,this.qx,this.Kx)}constructor(t,i,e,s,n){super(t),this.sS=i,this.gct=e,this.qx=s,this.Kx=n}},sq=class t extends $Z{Yp(){var t;return{type:"paused",duration:this.ct,quality:null!=(t=this.hAt)?t:"unknown"}}oOt(){return new t(this.Qo)}constructor(t){super(t)}},nq=class t extends $Z{Yp(){var t;return{type:"seeking",duration:this.ct,reason:this.aW,quality:null!=(t=this.hAt)?t:"unknown"}}oOt(){return new t(this.Qo,this.aW)}constructor(t,i){super(t),this.aW=i}};var rq=class{hOt(){var t;if(void 0===(null==(t=this.Qo.rt.zw(0))?void 0:t.Hw))return{};this.aOt(this.uOt.oOt());const i={channel:{name:this.sCt.name},states:this.cOt};return this.cOt=[],{"X-THEOLIVE-SEGMENT-METRICS-V1":""+JSON.stringify(i)}}aOt(t){this.cOt.push(this.uOt.Yp()),this.uOt=t}destroy(){this.lOt(),s.removeEventListener("beforeunload",this.lOt),this.Qo.fn($.Sm,this.Vm),this.Qo.fn($.Tm,this.Gm),this.Qo.fn(Tf.Sh,this.dOt),this.Qo.Z_.fn("latencyrecoveryseek",this.fOt),this.Qo.Z_.fn("golive",this._Ot),this.Qo.rt.fn(rc.hw,this.oz),this.Qo.rt.Rw.forEach((t=>t.fn(ct.xw,this.Jr))),this.Qo.cit.removeEventListener("intenttofallback",this.gOt),this.Qo.cit.removeEventListener("publicationloadstart",this.wOt),this.Qo.cit.removeEventListener("publicationoffline",this.vOt),this.Qo.hF.BH(this.mOt),ra.g1(this.pOt)}constructor(t,i,e){this.cOt=[],this.AOt=!1,this.axt=!1,this.nF=!1,this.gOt=()=>{var t;this.aOt(new tq(this.Qo,"fallback",null==(t=this.Qo.X_())?void 0:t.message))},this.wOt=()=>{this.aOt(new tq(this.Qo,"loadChannel"))},this.vOt=()=>{this.aOt(new tq(this.Qo,"offline"))},this.oz=t=>{t.Lt.yn(ct.xw,this.Jr)},this.Jr=()=>{const t=this.Qo.rt.zw(0);if(!t)return;const i=this.AOt;if(this.AOt=!0,!i)return;var e;const s=null!=(e=t.Kw)?e:[],n=Array.isArray(s)?s:[s];this.aOt(new eq(this.Qo,t.qw.Rw.map((t=>oq(t))),n.map((t=>t.o)),this.Qo.we.clientWidth,this.Qo.we.clientHeight))},this.Vm=()=>{this.axt=!0,this.nF=!1;const t=this.Qo.rt.zw(0),i=t.qw.Rw;var e;const s=null!=(e=t.Kw)?e:[],n=Array.isArray(s)?s:[s];this.aOt(new eq(this.Qo,i.map((t=>oq(t))),n.map((t=>t.o)),this.Qo.we.clientWidth,this.Qo.we.clientHeight))},this.fOt=()=>{this.axt&&!this.nF&&(this.nF=!0,this.aOt(new nq(this.Qo,"latencyRecovery")))},this._Ot=()=>{this.axt&&!this.nF&&(this.nF=!0,this.aOt(new nq(this.Qo,"goLive")))},this.Gm=()=>{this.Qo.Eg||this.aOt(new iq(this.Qo,"visible"===h.visibilityState))},this.dOt=()=>{this.aOt(new sq(this.Qo))},this.mOt=t=>{const i=function(t){const{pathname:i}=t;if(el(i,"/manifest.json"))return"manifest";if(el(i,".hspc")){if($i(i,"/video/"))return"video-segment";if($i(i,"/audio/"))return"audio-segment"}else if(el(i,".hspi")){if($i(i,"/video/"))return"video-init";if($i(i,"/audio/"))return"audio-init"}return"unknown"}(ra.Dh(t.url));if("unknown"===i)return;this.hCt.incrementSequenceNumber();let e=ol({},t.headers,{"X-Theolive-Version":"8.3.0","X-Theolive-Playertype":"theoplayer","X-Theolive-Sequence":""+this.hCt.sequenceNumber});"video-segment"===i&&(e=ol({},e,this.hOt())),t.redirect(ol({},t,{headers:e}))},this.lOt=()=>{$r(this.Qo.Hj.uD({zu:this.yOt,XD:this.hOt(),sE:!0}))},this.Qo=t,this.sCt=i,this.hCt=e,this.yOt=HZ(ra.Dh("bye",i.source.src).href,e),s.addEventListener("beforeunload",this.lOt),this.Qo.yn($.Sm,this.Vm),this.Qo.yn($.Tm,this.Gm),this.Qo.yn(Tf.Sh,this.dOt),this.Qo.Z_.yn("latencyrecoveryseek",this.fOt),this.Qo.Z_.yn("golive",this._Ot),this.Qo.hF.RH(this.mOt),this.Qo.rt.yn(rc.hw,this.oz),this.Qo.cit.addEventListener("intenttofallback",this.gOt),this.Qo.cit.addEventListener("publicationloadstart",this.wOt),this.Qo.cit.addEventListener("publicationoffline",this.vOt),this.uOt=new tq(this.Qo,"loadChannel"),this.pOt=ra.f1((()=>{this.uOt.nOt()}),1e3)}};function oq(t){return[t.o,t.GP,t.ji,t.Ti]}var hq=class extends Os{constructor(t){super("publicationloadstart"),this.publicationId=t}},aq=class extends Os{constructor(t){super("publicationoffline"),this.publicationId=t}},uq=class extends Os{constructor(t){super("publicationloaded"),this.publicationId=t}},cq=class extends Os{constructor(){super("intenttofallback")}},lq=class extends Os{constructor(){super("enterbadnetworkmode")}},dq=class extends Os{constructor(){super("exitbadnetworkmode")}},fq=class extends Mo{get va(){return this.Xa||(this.Xa=function(t){return{addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)},get badNetworkMode(){return t.MOt},set badNetworkMode(i){t.MOt=i},preloadPublications:async i=>(await t.bOt(i)).map((t=>({name:t.name})))}}(this)),this.Xa}get MOt(){return this.Qo.MOt}set MOt(t){this.Qo.MOt=t}bOt(t){return this.Qo.bOt(t)}constructor(t){super(),this.Qo=t}};var _q=["https://theo-insights-prod-5cb0.ew.r.appspot.com/"],gq=8e5,wq=class extends sl{TOt(){this.Qo.Z_.yn("latencyrecoveryseek",this.fOt),this.Qo.rt.yn(rc.hw,this.oz)}SOt(){this.Qo.Z_.fn("latencyrecoveryseek",this.fOt),this.Qo.rt.fn(rc.hw,this.oz)}nw(t){return this.YLt?t.type===$.Sm?(void 0!==this.NOt?(ra.p_(this.NOt),this.NOt=void 0,this.axt||this.Co(new $e(this.Q_()))):this.Co(new $e(this.Q_())),this.axt=!0,!0):t.type===$.Tm?(this.NOt||(this.NOt=ra.A_((()=>{this.Co(new Ib(this.Q_())),this.NOt=void 0}),100)),!0):"error"===t.type?(this.IOt.Zg(),$r(this.DOt()),!0):super.nw(t):super.nw(t)}dit(){return this.EOt.va}get MOt(){return this.kOt}set MOt(t){this.YLt&&(t?this.LOt():this.xOt())}LOt(){if(this.kOt)return;if(this.kOt=!0,this.EOt.Co(new lq),0===this.Qo.rt.U)return;const t=this.rt.zw(0),i=Nd(t.qw.Rw,(t=>t.GP));var e;(null!=(e=i.Xpt)?e:i.GP)<gq?(t.Kw=[i],Promise.resolve().then((()=>t.Kw=t.qw.Rw.slice()))):this.xOt()}xOt(){if(!this.kOt)return;if(this.kOt=!1,this.EOt.Co(new dq),0===this.Qo.rt.U)return;const t=this.Qo.rt.zw(0);var i;const e=vq(null!=(i=t.Kw)?i:t.qw.Rw);t.Kw=e.length>0?e:vq(t.qw.Rw)}bOt(t){return Promise.all(t.map((async t=>{const i=this.COt.Bwt(WZ(t,this.OOt.discoveryUrl));return await Jr(i.M8,this.$O.f_)})))}async ga(t,i){var e;this.YLt=!1;for(const r of null!=(e=null==t?void 0:t.sources)?e:[]){if(r.integration===Js.THEOLIVE){if(void 0===r.src)continue;this.TOt(),this.YLt=!0,this.EOt.Co(new hq(r.src));const e=WZ(r.src,this.OOt.discoveryUrl),o=this.EOt.k_("publicationloaded");try{var s,n;this.bc=t,this.MB=r,this.jOt=this.COt.Bwt(e);const o=await this.jOt.M8;this.IOt.iCt(o);const{enhancedLogging:h,source:{targetLatency:a}}=o;(null==h?void 0:h.enabled)&&_.random()<=h.percentage&&this.Qo.hF.RH(this.ROt),(null==(s=this.OOt)?void 0:s.analyticsEnabled)&&(null==(n=this.OOt)?void 0:n.experimentalAnalyticsEnabled)&&"theo.live"===o.source.type&&(this.POt=new rq(this,o,this.hCt));const u=this.Qo.Z_.ap,c=(null!=a?a:.45)-u.target;this.Qo.Z_._p={windowStart:u.windowStart+c,target:u.target+c,windowEnd:u.windowEnd+c,maxOffset:u.maxOffset+c},await Jr(this.zOt(this.Qo.eS),i)}catch(t){throw this.W3(),this.dispatchErrorEvent(t),t}return void await Jr(o,i).catch(me)}if("web"===Lc.yE&&(null==t?void 0:t.contentProtection)&&(!Kn(r)||r.type!==Pl.Np)){const t=new ao(qa.CONFIGURATION_ERROR,"Content protection is not supported for this source type");throw this.dispatchErrorEvent(t),t}}return await super.ga(t,i)}async zOt(t){if(this.W3(),!this.jOt)return;const{source:i}=await this.jOt.M8,e=await this.BOt(i);if("live"===e)if("primary"===this.UOt)try{await this.QOt(t)}catch(i){await this.FOt(t)}else await this.FOt(t);else if("offline"===e)await this.vOt();else try{await this.QOt(t)}catch(t){await this.vOt()}}async BOt(t){try{const i=await this.Qo.Hj.uD({zu:HZ(t.src,this.hCt)});return i.fD>=200&&i.fD<300?"live":404===i.fD||503===i.fD?"offline":"error"}catch(t){return"error"}}async FOt(t){if(!this.jOt)return;const i=await this.jOt.M8;this.UOt="primary",this.tq(i.source,t)}async vOt(){if(!this.jOt)return;const t=await this.jOt.M8;this.EOt.Co(new aq(t.id.id)),this.YOt=ra.A_((()=>this.zOt(this.Qo.eS)),15e3)}tq(t,i){var e,s,n,r;this.IOt.Cn();const o=dl({sources:[{type:mq(t.type),src:t.src,contentProtection:t.contentProtection,useManagedMediaSource:!0}],ads:this.axt?[]:null==(e=this.bc)?void 0:e.ads,blockContentIfAdError:null==(s=this.bc)?void 0:s.blockContentIfAdError});o.sources[0].bypassLicense=!0,this.Qo.ga(o,(new Bd).f_).then((()=>{i&&this.Qo.Xg()})).catch(this.dispatchErrorEvent);const{targetLatency:h}=t,a=this.jOt.uS.id;null==(n=this.GOt)||n.h_(),this.GOt=new JZ(this,a,this.VOt,h,null==(r=this.MB)?void 0:r.targetLatencyLeniency),this.EOt.Co(new uq(a))}async QOt(t){if(this.IOt.RCt(),this.EOt.Co(new cq),!await this.WOt())throw new g("fallback not live");await this.HOt(t)}async HOt(t){var i;const e=await(null==(i=this.jOt)?void 0:i.M8);(null==e?void 0:e.fallback)&&(this.IOt.PCt(),this.UOt="fallback",this.tq(e.fallback,t))}async WOt(){var t,i;const e=await(null==(t=this.jOt)?void 0:t.M8);if(!(null==(i=this.OOt)?void 0:i.fallbackEnabled)||!(null==e?void 0:e.fallback))return!1;const s=await this.Qo.Hj.uD({zu:HZ(e.fallback.src,this.hCt)});return s.fD>=200&&s.fD<300}dispatchErrorEvent(t){if(t instanceof ao)return this.Co(new as(t));this.Co(new as(new ao(qa.THEO_LIVE_UNKNOWN_ERROR,t.message,t)))}async W3(){await this.Qo.Zg(),void 0!==this.YOt&&(ra.p_(this.YOt),this.YOt=void 0)}Zg(){var t,i;return this.$O.g_(),this.$O=new Bd,this.SOt(),void 0!==this.NOt&&(ra.p_(this.NOt),this.NOt=void 0),this.YLt=!1,this.axt=!1,null==(t=this.GOt)||t.h_(),this.GOt=void 0,this.IOt.Zg(),null==(i=this.POt)||i.destroy(),this.bc=void 0,this.MB=void 0,this.jOt=void 0,this.UOt=void 0,this.XOt=[],this.Qo.hF.BH(this.ROt),this.kOt&&this.xOt(),super.Zg()}async gn(t){var i;this.$O.g_(),void 0!==this.NOt&&(ra.p_(this.NOt),this.NOt=void 0),this.Vo(),this.SOt(),null==(i=this.POt)||i.destroy(),this.Qo.Z_.fn("latencyrecoveryseek",this.fOt),await super.gn(t)}constructor(t,i){var e,s;super(t,i),this.YLt=!1,this.$O=new Bd,this.NOt=void 0,this.axt=!1,this.XOt=[],this.kOt=!1,this.oz=t=>{const i=t.Lt;var e;i.yn(ct.xw,this.Jr);const s=vq(null!=(e=i.Kw)?e:i.qw.Rw);i.Kw=s.length>0?s:vq(i.qw.Rw)},this.Jr=t=>{const i=t.Lht;var e;(!i||(null!=(e=i.Xpt)?e:i.GP)>=gq)&&this.xOt()},this.fOt=async()=>{this.LOt(),this.XOt.push(ra.m_()),this.XOt=this.XOt.filter((t=>ra.m_()-t<=3e5)),this.XOt.length>=3&&(this.XOt=[],await this.zOt(!0))},this.DOt=async()=>{if(this.jOt){if("demo"===(await this.jOt.M8).mode){this.jOt.Yn();if("playing"!==(await this.jOt.M8).status)return void this.Co(new as(new ao(qa.THEO_LIVE_END_OF_DEMO,"This demo channel has been stopped automatically after 5 minutes")))}await this.zOt(!0)}},this.ROt=t=>{if("manifest"===t.type||"segment"===t.type||""===t.type){const i=ra.Dh(t.url);i.searchParams.append("enhancedLogging","true"),t.redirect({url:i.toString()})}},this.EOt=new fq(this);const n=t.wd.theoLive;var r,o,h,a;this.OOt={sessionId:null!=(r=null==n?void 0:n.sessionId)?r:sI(),userId:null!=(o=null==n?void 0:n.userId)?o:PZ(),externalSessionId:null==n?void 0:n.externalSessionId,analyticsEnabled:!1!==(null==n?void 0:n.analyticsEnabled),fallbackEnabled:!1!==(null==n?void 0:n.fallbackEnabled),discoveryUrl:null!=(h=null==n?void 0:n.discoveryUrl)?h:"https://discovery.theo.live/channels/",analyticsUrls:null!=(a=null==n?void 0:n.analyticsUrls)?a:_q},this.hCt=new RZ(null==(e=this.OOt)?void 0:e.externalSessionId),this.IOt=new KZ(this,this.hCt,this.OOt),this.COt=new zZ(t.Hj,{discoveryHeader:null==(s=this.OOt)?void 0:s.discoveryHeader}),this.VOt=t.Z_.ap,this.Qo.Z_.yn("latencyrecoveryseek",this.fOt)}};function vq(t){return t.filter((t=>{var i;return(null!=(i=t.Xpt)?i:t.GP)>=gq}))}function mq(t){switch(t){case"theo.live":return"application/vnd.theo.hesp+json";case"hls":return"application/x-mpegurl";case"dash":return"application/dash+xml";default:throw new g("Unknown source type: "+t)}}AP((t=>new wq(t)),st.Za);var gl,pq=Fl(Yl()),Aq=class extends Mo{get yM(){return this.ZOt}Yn(t,i){this.Jx=t,this.ZOt=i,this.Xa&&this.Co(new AV(this.Xa))}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=Co(this)}get Adt(){return 0}get ji(){return this.Jx.targetWidth}get Ti(){return this.Jx.targetHeight}get qpt(){return 0}get o(){return this.Jx.id}get Xw(){return this.cS}get GP(){return this.Jx.bitrate}get Xpt(){}get $nt(){return""}get kh(){return""}get Jpt(){return""}get snt(){return!0}get Zpt(){}MD(){throw new g("Method not implemented.")}bD(){throw new g("Method not implemented.")}gn(){this.Vo()}constructor(t,i){super(),this.cS=kc(),this.Xa=void 0,this.Jx=t,this.ZOt=i}},yq=class extends Mo{Yn(t){this.qOt=t;for(const i of t.active){const e=bo(t.layers,(t=>t.encodingId===i.id)),s=bo(this.sS.Rw,(t=>t.o===i.id));s?s.Yn(i,e):this.sS.nS(new Aq(i,e))}this.Co(new hl(this))}get Av(){return Jt.VA}get Rt(){return!0}set Rt(t){this.fS(t)}get Hw(){}get qw(){return this.sS}get Kw(){return this.KOt}set Kw(t){if(this.KOt=t,this.Rt){var i;const e=1===(null==t?void 0:t.length)?t[0].yM:void 0;null==(i=this.JOt)||i.$Ot(e)}this.Co(new QF(this.sS.Rw.slice(),this))}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=Mi(this)}fS(t){}get idt(){}get zt(){return Dc.Fkt}get o(){return"millitrack"}get Xw(){return this.cS}get kh(){return""}get gs(){return""}get _v(){return this.Rt?"enabled":"disabled"}set _v(t){this.fS("enabled"===t)}get Zw(){}gn(){this.Vo(),this.JOt=void 0;for(const t of this.sS.Rw)t.gn();this.sS.tr()}constructor(t,i){super(),this.cS=Q(),this.sS=new wv,this.qOt=t,this.JOt=i,this.Yn(t)}},Mq=class{Yn(t){this.tjt=t}get GP(){var t,i,e,s,n;var r;return(null!=(n=null==(i=this.tjt)||null==(t=i.video.inbounds)?void 0:t.reduce(((t,i)=>t+i.bitrateBitsPerSecond),0))?n:0)+(null!=(r=null==(s=this.tjt)||null==(e=s.audio.inbounds)?void 0:e.reduce(((t,i)=>t+i.bitrateBitsPerSecond),0))?r:0)}get VP(){var t,i;return null!=(i=null==(t=this.tjt)?void 0:t.currentRoundTripTime)?i:0}WP(t){}},bq=[Tf.jh,Tf.Sh,$.Sm,Tf.fm,Tf.Zv,Tf.Gv,Tf.im,Tf.$v,Tf.Ov,Tf.qv,Tf._m,Tf.Lv,Tf.Jv,Tf.Iv,Tf.Nv,Tf.zv,Tf.Rv],Tq=["active","inactive","stopped","vad","layers","migrate","viewercount"],Sq=class extends Mo{$Ot(t){var i;null==(i=this.QI)||i.select(t)}get Yg(){return!1}Vg(){return this.Fm.Vg()}get ht(){return this.YT}get O_(){return this.Fm.O_.ks()}get R_(){return this.Fm.R_}set R_(t){}get bt(){return this.bc}get U_(){return this.Fm.U_}set U_(t){this.F_(t)}F_(t,i){}get ct(){return this.Fm.ct}get G_(){return this.Fm.G_}get lt(){return this.vz}get H_(){return this.mz}get Z_(){}get K_(){return this.Fm.K_}get eg(){var t,i;const e=this.ijt,s=null==e||null==(t=e.video.inbounds)?void 0:t[0],n=null==e||null==(i=e.audio.inbounds)?void 0:i[0];var r,o,h,a;return{qT:this.wU.VH.GP,HT:null!=(r=null==s?void 0:s.framesDropped)?r:0,XT:0,ZT:null!=(o=null==s?void 0:s.framesReceived)?o:0,KT:(null!=(h=null==s?void 0:s.totalBytesReceived)?h:0)+(null!=(a=null==n?void 0:n.totalBytesReceived)?a:0),JT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get og(){return this.Fm.og}set og(t){this.Fm.og=t}get cg(){var t,i;return null!=(i=null==(t=this.QI)?void 0:t.isActive())&&i}get fg(){return this.Fm.fg}get gg(){return 1}set gg(t){}get pg(){return this.Fm.pg.ks()}get yg(){return ut.yB}set yg(t){}get Sg(){return this.Fm.Sg}get Ig(){return this.Fm.Ig.ks()}get Eg(){return this.Fm.Eg}get Mz(){return this.Fm.Mz}get nt(){return this.Fm.nt}get Cg(){return this.Fm.Cg}get rt(){return this.VT}get Rg(){return this.Fm.Rg}get zg(){return this.Fm.zg}set zg(t){this.Fm.zg=t}get Qg(){return this.vU}get Tz(){return this.Sz}get Km(){return this.vU.Km}ge(){this.Fm.ge()}be(){this.Fm.be()}async Xg(){this.$n(),await this.Fm.Xg()}Hg(){this.Fm.Hg()}async tr(){var t;this.bc=void 0,this.$O.g_(),null==(t=this.QI)||t.stop(),this.QI=void 0,this.Cvt&&(await this.Cvt.catch(Br),this.Cvt=void 0),this.ejt=void 0,await this.Fm.tr();for(const t of this.VT.Rw)t.gn();this.YT.tr(),this.VT.tr()}async gn(){this.Vo(),await this.tr(),this.YT.gn(),this.VT.gn(),this.zz.gn(),this.Fm.fn(bq,this.Ds),this.Fm.fn(hi.ha,this.Ss),await this.gU.Fz(this.Fm)}async ga(t,i,e){Vr(e),this.hNt();const s=t;this.bc=s,this.$O=new Bd;this.QI=new pq.View(s.streamName,(()=>pq.Director.getSubscriber({streamName:s.streamName,streamAccountId:s.streamAccountId,subscriberToken:s.subscriberToken})),void 0,!0),this.sjt()}$n(){if(void 0!==this.Cvt)return;const t=this.QI;void 0!==t&&(this.Cvt=this.nst(t,this.$O.f_).catch(this.pmt))}async nst(t,i){Vr(i);try{await Jr(t.connect({events:Tq}),i),t.webRTCPeer.initStats({autoInitStats:!0,statsIntervalMs:1e3})}catch(e){me(e),ra.vp("[THEOplayer] Millicast connect error, reconnecting.",e),await Jr(t.reconnect(),i)}}async njt(t,i){Vr(i);try{this.Fm.z6(),this.ejt=t,await this.Fm.tr(),await this.Fm.$n({Av:de.Tj,yv:"",uq:t,Nz:Pl.Ip,Iz:[]})}finally{this.Fm.B6()}}sjt(){const t=this.QI;t.once("track",(t=>{this.njt(t.streams[0],this.$O.f_).catch(this.pmt)})),t.on("broadcastEvent",(t=>{switch(t.name){case"active":this.Co(new $o);break;case"inactive":case"stopped":this.Co(new jo);break;case"viewercount":default:break;case"layers":{const i=t.data;if(0===this.VT.U){const t=new yq(i.medias[0],this);this.VT.tt(t)}else this.VT.zw(0).Yn(i.medias[0]);break}}})),t.webRTCPeer.on("stats",(t=>{this.ijt=t,this.Sz.Yn(t)}))}rB(t){this.vz||($r(this.tr()),this.vz=ia(t),this.mz=t,this.Co(new as(t)))}hNt(){this.vz=void 0,this.mz=void 0}qg(){return!1}Kg(){}Jg(){}$g(){this.Fm.$g()}iw(){const t=this.ejt;void 0!==t&&this.njt(t,this.$O.f_).catch(this.pmt)}Gg(){return this.Fm.ya}constructor(t,i,e){super(),this.gU=t,this.wU=i,this.vU=e,this.$O=new Bd,this.Cvt=void 0,this.ejt=void 0,this.VT=new Ds,this.YT=new Ds,this.Sz=new Mq,this.Ss=t=>{this.rB(new ao(qa.MEDIA_LOAD_ERROR,"Millicast error",t.lt))},this.pmt=t=>{be(t)||this.rB(new ao(qa.MEDIA_DECODE_ERROR,t.message,t))},this.Fm=this.gU.oB(Jt.VA),this.zz=new Xe(this.Fm,!0),this.Fm.yn(bq,this.Ds),this.Fm.yn(hi.ha,this.Ss),this.zz.yn(Hs,this.Ds)}};hn(new class{get uB(){return tl.Ip}Yp(t,i,e,s,n,r,o,h){return new Sq(i,n,r)}hB(t,i){return t.type===Pl.Ip}aB(){return!1}}),function(t){t.rjt="currentbufferingrenditionchange",t.ojt="hjt",t.ajt="ujt",t.cjt="ljt"}(gl||(gl={}));var Nq=class{constructor(t,i){var e,s;this.$nt=void 0,this.Xw=kc(),this.djt=i,this.Av=t.Av,this.fjt=t.fjt,this._jt=t._jt,this.gjt=t.gjt,this.l=t.l,this.gs=t.gs,this.wjt=t.wjt,this.vjt=t.vjt,this.mjt=void 0===t.Jpt,this.pjt=null!=(s=null==(e=t.pjt)?void 0:e.split(","))?s:[]}};function Hc(t,i){return t.Av===i.Av&&(t.l===i.l||!(!t.fjt||!i.fjt))}function Iq(t,i){return void 0!==t&&void 0!==i&&Dq(t,i)}function Dq(t,i){return t.djt===i.djt}function Eq(t,i){return Dq(t,i)&&t.wjt===i.wjt}function kq(t,i){for(const e of t)if(Eq(e,i))return!0;return!1}var Lq,xq=class extends Mo{get Zw(){return this.Ajt}get Rt(){const t=this.yjt();if(!t)return!1;for(const i of this.qw.Rw)if(i.Mjt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var i;let t=null==(i=this.qw.zw(0))?void 0:i.Mjt;const e=this.Qo.bjt;for(const i of this.qw.Rw)if(i.Tjt===e){t=i.Mjt;break}this.Sjt(t)}else this.Sjt(void 0)}get Hw(){if(!this.Rt)return;const t=this.Qo.Njt;for(const i of this.qw.Rw)if(kq(t,i.Mjt))return i}get va(){return this.Xa||(this.Xa=Mi(this)),this.Xa}get o(){return this.cS.toString()}get Xw(){return this.cS}get kh(){return this.lS}set kh(t){t!==this.lS&&(this.lS=t,this.Co(new hl(this)))}get gs(){return this.Rx}get _v(){return this.Rt?"enabled":"disabled"}get Kw(){return this.gct}set Kw(t){let i=[];if(t){i=t.filter((t=>{const i=this.Hw?WF(this.Hw):void 0;return ra.Ys.Uet(i,WF(t))})).filter((i=>this.qw.oS(t)&&i.snt))}else i=this.qw.Rw.filter((t=>t.snt));if(0!==i.length){if(!(t===this.gct||this.gct&&Td(this.gct,i))){if(this.gct=t?i:void 0,this.Qo.Ijt(i.map((t=>t.Tjt))),1===i.length){const t=i[0].Tjt,e=this.z2===Jt.VA,s=this.wU.vX;$r(this.Qo.Djt(t,{Ejt:!0,kjt:s&&e,Ljt:s&&!e}))}this.Co(new QF(i,this))}}else this.Co(new VF)}fS(t){this.Rt=t}gn(){this.Vo(),this.Qo.fn(gl.rjt,this.xjt),this.Qo.fn(gl.ojt,this.Cjt);for(const t of this.qw.Rw)t.gn();this.qw.tr()}constructor(t,i,e,s,n){var r;super(),this.z2=t,this.Qo=i,this.wU=e,this.fh=s,this.qw=n,this.gct=void 0,this.Ojt=void 0,this.jjt=()=>this.Co(new hl(this)),this.xjt=()=>{const t=this.Hw;t&&this.Ojt!==t&&(this.Ojt=t,this.Co(new mG(t)))},this.Cjt=()=>{const t=this.Rt;this.Rjt!==t&&(this.Rjt=t,this.fh.Co(new uc(this)),this.Co(new uc(this)))},this.Ojt=this.Hw,this.Rjt=this.Rt;const o=n.zw(0);var h,a;this.lS=null!=(h=null==o?void 0:o.Mjt.l)?h:"",this.Rx=null!=(a=null==o?void 0:o.Mjt.gs)?a:"",this.Ajt=null==o||null==(r=o.Mjt)?void 0:r.pjt.map(zq).filter(Ks),this.cS=Q(),this.Qo.yn(gl.rjt,this.xjt),this.Qo.yn(gl.ojt,this.Cjt);for(let t=0;t<this.qw.U;t++){this.qw.zw(t).yn("update",this.jjt)}}},Cq=class extends xq{get zt(){return $X.Fkt}yjt(){return this.Qo.Pjt}Sjt(t){$r(this.Qo.zjt(t))}constructor(t,i,e,s){super(Jt.WA,t,i,e,s)}},Oq=class extends xq{get zt(){return Dc.Fkt}yjt(){return this.Qo.Bjt}Sjt(t){$r(this.Qo.Ujt(t))}constructor(t,i,e,s){super(Jt.VA,t,i,e,s)}},jq=class extends Mo{get o(){return String(this.Tjt.o)}get Xw(){return this.Tjt.o}get GP(){return this.Tjt.GP}get Xpt(){return this.Tjt.Xpt}get kh(){var t;return null!=(t=this.lS)?t:this.Mjt.l}set kh(t){this.kh!==t&&(this.lS=t,this.Co(new AV(this.va)))}get Jpt(){return this.Mjt.djt.Qjt()}get Zpt(){return this.Tjt.Zpt}bD(){}MD(){}gn(){this.Vo()}constructor(t,i){super(),this.Tjt=t,this.Mjt=i,this.lS="",this.snt=!0}},Rq=class extends jq{get Hmt(){return 0}get $nt(){var t;return(null==(t=this.Tjt.$nt)?void 0:t.mkt)||""}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return pV(this)}constructor(t,i){super(t,i),this.Xa=void 0}},Pq=class extends jq{get $nt(){var t;return(null==(t=this.Tjt.$nt)?void 0:t.Akt)||""}get qpt(){return this.Fjt}set qpt(t){this.Fjt!==t&&(this.Fjt=t,this.Co(new AV(this.va)))}get Adt(){var t,i;return null!=(i=null!=(t=this.hkt)?t:this.Tjt.Adt)?i:0}set Adt(t){this.Adt!==t&&(this.hkt=t,this.Co(new AV(this.va)))}get Ti(){var t,i;return null!=(i=null==(t=this.Tjt.akt)?void 0:t.Ti)?i:0}get ji(){var t,i;return null!=(i=null==(t=this.Tjt.akt)?void 0:t.ji)?i:0}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return Co(this)}constructor(t,i){super(t,i),this.Xa=void 0,this.Fjt=0,this.hkt=void 0}};function zq(t){return"public.accessibility.describes-video"===t?ff.uv:"public.accessibility.transcribes-spoken-dialog"===t?ff.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?ff.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?ff.hv:void 0}!function(t){t.Yjt="FATAL",t.ha="ERROR",t.Gjt="WARNING",t.Vjt="INFO",t.Wjt="DEBUG"}(Lq||(Lq={}));var wt=new class{Hjt(t){if(!this.Rt())return!1;const i=[];return!(i.length>0)||i.some((i=>i.toLowerCase()===t.toLowerCase()))}Xjt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.Hjt(t)&&ra.Wet("DEBUG "+t+" -",...e)}IM(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.Hjt(t)&&ra.Wet("INFO "+t+" -",...e)}Zjt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.Hjt(t)&&ra.vp("WARNING "+t+" -",...e)}lt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.Hjt(t)&&ra.Het("ERROR "+t+" -",...e)}qjt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.Hjt(t)&&ra.Het("FATAL "+t+" -",...e)}constructor(){this.Rt=()=>!1}},wu="HLSPlaylistParser",Bq="Discontinuity",Yo="Buffering",Uq=class{Eot(){var t;const i=null==(t=this.Qo.Tr)?void 0:t.Kjt;if(!i||0===i.length)return void wt.Zjt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var e;const s=null!=(e=bo(i,(t=>0!==t.Jjt.length&&0!==t.$jt.length)))?e:i[0],n=i.filter((t=>t!==s));for(const t of s.Jjt){const i=new wv,e=[];i.nS(new Rq(s,t)),e.push(t);for(const s of n)for(const n of s.Jjt)if(Hc(n,t)&&!kq(e,n)){i.nS(new Rq(s,n)),e.push(n);break}this.tRt.tt(new Cq(this.Qo,this.wU,this.tRt,i))}for(const t of s.$jt){const i=new wv,e=[];i.nS(new Pq(s,t)),e.push(t);for(const s of n)for(const n of s.$jt)if(Hc(n,t)&&!kq(e,n)){i.nS(new Pq(s,n)),e.push(n);break}this.iRt.tt(new Oq(this.Qo,this.wU,this.iRt,i))}}eRt(){this.sRt(this.tRt),this.sRt(this.iRt)}sRt(t){const i=[];for(const e of t.Rw){const t=[];for(const i of e.qw.Rw)Ai(i.Tjt.nRt,i.Mjt)||t.push(i);for(const i of t)e.qw.rS(i),i.gn();0===e.qw.U&&i.push(e)}for(const e of i)t.it(e),e.gn()}rRt(t,i){const e=this.oRt(t);void 0!==e&&(e.Adt=i)}hRt(t,i){const e=this.oRt(t);void 0!==e&&(e.qpt=i)}oRt(t){for(const i of this.iRt.Rw){const e=bo(i.qw.Rw,(i=>i.Mjt===t));if(void 0!==e)return e}}constructor(t,i,e,s){this.Qo=t,this.wU=i,this.tRt=e,this.iRt=s}},Qq=class{get GP(){return this.Uat.j7}get VP(){return this.QDt.j7}WP(t){if("segment"!==t.Av&&"preload-hint"!==t.Av)return;const i=[new pX(this.QDt)];return"stream"!==t.qD||!function(t){return"segment"===t.Av&&"initialization-segment"!==t.JD}(t)&&"preload-hint"!==t.Av?i.push(new AX(this.Uat)):i.push(new yX(this.Uat,1e3)),new mX(i)}jDt(t){this.Uat=new qt(qt.gDt,qt.wDt,1,t)}constructor(t){const i=t.GP>0?t.GP:qt.Pat,e=t.VP>0?t.VP:G.Pat;this.Uat=new qt(qt.gDt,qt.wDt,1,i),this.QDt=new G(G.gDt,G.wDt,e)}};var Fq=class extends Os{constructor(t){super(gl.cjt),this.lt=t}},Yq=class{dq(t,i){const e={Av:de.Sj,Iz:[],F1:t.map((t=>({Nz:t}))),t2:i};return Promise.resolve(void 0!==this.int.dq([e]))}constructor(t){this.int=t}},Gq=(t,i,e,s,n)=>t.filter((t=>!!Ai(s,t)||1.1*t.GP<=e.GP)),Vq=(t,i,e,s,n)=>t.filter((t=>{if(Ai(s,t))return!0;let r=1/0;for(const i of t.nRt){var o,h;r=_.min(r,null!=(h=null!=(o=i.djt.aRt)?o:i.djt.uRt)?h:1/0)}r===1/0&&(r=1);const a=2*e.VP+t.GP*r/e.GP;return t.GP<=i.GP||n.cRt>a})),Wq=(t,i,e,s,n)=>td(t,((t,i)=>i.GP-t.GP)),Hq=(t,i,e,s,n)=>t.every((t=>t.Zpt&&!S(t.Zpt)))?td(t,((t,i)=>i.Zpt-t.Zpt)):t,Xq=(t,i,e,s,n)=>0===s.length?t:td(t,((t,i)=>{const e=Ai(s,t)?1:0;return(Ai(s,i)?1:0)-e})),Zq=(t,i,e,s,n,r)=>t.filter((t=>!t.$nt||!i.$nt||!(void 0!==i.$nt.Akt&&void 0!==t.$nt.Akt&&!Di(i.$nt.Akt,t.$nt.Akt)&&!r.lRt({Nz:'video/mp4; codecs="'+t.$nt.Akt+'"'}))&&!(void 0!==i.$nt.mkt&&void 0!==t.$nt.mkt&&!Di(i.$nt.mkt,t.$nt.mkt)&&!r.dRt({Nz:'audio/mp4; codecs="'+t.$nt.mkt+'"'})))),qq=(t,i,e,s,n)=>{if(!1===n.Xct)return t;if(ra.Ys.Cet)return t;const r=ra.Ys.Oet;var o;const h=(null!=(o=null==r?void 0:r.width)?o:n.ji)*SF;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Ti)*SF;for(let i=0;i<t.length;i++){const e=t[i];if(void 0===e.akt)return t;const s=e.akt.Ti,n=e.akt.ji;if(s<=u&&n<=h)return t.slice(i,t.length)}return[]},Kq=(t,i,e,s,n)=>function(t,i){const e=i.Xct;if(void 0===e&&!ra.Ys.Qs)return t;if(!1===e)return t;for(let e=0;e<t.length;e++){const s=t[e];if(void 0===s.akt)return t;const n=s.akt.Ti,r=s.akt.ji;if(n===i.Ti&&r===i.ji)return t.slice(e,t.length);if(n<i.Ti||r<i.ji)return t.slice(0===e?e:e-1,t.length)}return[]}(t,n);var Ee,us,Sc,Jq,$q="AbrEvaluator",tK=class{get fRt(){return this.wU.VH}_Rt(t){this.Jd=t}async gRt(t,i,e,s,n){return(await this.wRt(t,i,e,s,n))[0]}async wRt(t,i,e,s,n){if(0===t.length)throw new g("AbrEvaluator - Unable to select optimal variant stream from an empty list.");wt.Xjt($q,"Performing optimal variant stream selection.");const r=this.fRt;let o=t;for(const t of this.Jd){const h=t(o,i,r,e,s,n);o=tr(h)?h:await h}if(0===o.length){wt.Zjt($q,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[_u(t,(t=>t.GP))]}return o}constructor(t){this.wU=t,this.Jd=[Zq,Gq,Vq,Wq,qq,Kq,Hq,Xq]}};function iK(t,i){return[t,void 0!==i?t+i-1:pu]}function eK(t){return Boolean(t.wM)}function Uc(t){return Boolean(t.jnt)}function Ge(t){return t?t.Dyt?t.lT+"@"+t.Dyt.Cn+"-"+(null!=(i=t.Dyt.U)?i:""):""+t.lT:"";var i}function sK(t,i){if(i===t)return!0;if(i.lT!==t.lT)return!1;if(!t.Dyt)return!0;if(i.Dyt){const e=iK(t.Dyt.Cn,t.Dyt.U),s=iK(i.Dyt.Cn,i.Dyt.U);if(e[0]<=s[0])return void 0===e[1]||void 0!==s[1]&&e[1]>=s[1]}return!1}function nK(t,i){return t===i||t.lT===i.lT&&(t.Dyt&&i.Dyt?t.Dyt.Cn===i.Dyt.Cn&&t.Dyt.U===i.Dyt.U:t.Dyt===i.Dyt)}function rK(t){const i=!!t.vRt||void 0;return{o:t.o,mRt:t.mRt,Mz:t.Mz,pRt:t.pRt,ct:t.ct,ARt:t.ARt,vRt:i,yRt:t.MRt,bRt:t.TRt,SRt:t.SRt,NRt:t.NRt}}function oK(t,i){var e,s,n;return{mkt:null!=(e=i.mkt)?e:null==t?void 0:t.mkt,Akt:null!=(s=i.Akt)?s:null==t?void 0:t.Akt,IRt:null!=(n=i.IRt)?n:null==t?void 0:t.IRt}}async function hK(t,i,e,s,n){const r=i.filter((t=>$i(t,"audio"))),o=i.filter((t=>$i(t,"video"))),h=[],a=e.map((t=>async function(t,i,e){if(!t.Jpt)return;if(!t.DRt)return;if(t.ZD!==Sc.ERt)return;const s=aK(t.DRt);if(!s)return;if(s.gL===Bt)return{Qp:s,KP:[],JP:void 0,hP:t.Jpt};if(s.gL===j_&&t.DRt===B_)return{Qp:s,KP:[],JP:t.Jpt,hP:void 0};{wt.IM("HLSDrmUtils","Fetching key uri "+t.Jpt+".");const n=await i.uD({zu:t.Jpt,tE:e});return{Qp:s,KP:[await n.GR()],JP:void 0,hP:void 0}}}(t,s,n)));var u;const c=function(t,i){if(0===i.length)return t;const e=t=>{const e=i.indexOf(t.Qp.gL);return e>=0?e:i.length};return td(t,((t,i)=>e(t)-e(i)))}((await Promise.all(a)).filter(Ks),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const i of c){const e=_H(null!=t?t:{},i.Qp),s="cbcs";h.push({Qp:i.Qp,KP:i.KP,JP:i.JP,hP:i.hP,Kz:[{initDataTypes:[i.Qp.fL],audioCapabilities:gH(r,s,null==e?void 0:e.audioRobustness),videoCapabilities:gH(o,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]})}return h}function aK(t){return t===ie?yu:t===Fu?vr:t===z_?eA:t===B_?br:void 0}function uK(t){if("#"!==t[0])throw new g("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function cK(t){return"#"!==t[0]?t:t.split(":",1)[0]}function lK(t){const i=t.indexOf(":");if(-1===i||t.length<i+1)throw new g("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(i+1)}function dK(t){const i=Ba(lK(t));if(void 0===i)throw new g("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return i}function cs(t){const i={},e=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=e.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?i[n]=r:wt.Zjt(wu,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=e.exec(t)}return i}function fK(t,i){const e=cs(t);let s,n;try{s=e.URI?ra.wp(e.URI,i):void 0,n=function(t){switch(t){case"AUDIO":return Ee.WA;case"VIDEO":return Ee.VA;case"SUBTITLES":return Ee.HA;case"CLOSED-CAPTIONS":return Ee.kRt}throw new g("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(e.TYPE)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=e["GROUP-ID"],o=e.LANGUAGE,h=e["ASSOC-LANGUAGE"],a=e.NAME,u="YES"===e.DEFAULT;let c="YES"===e.AUTOSELECT;const l="YES"===e.FORCED,d=e["INSTREAM-ID"],f=e.CHARACTERISTICS,_=e.CHANNELS;if(r||wt.Zjt(wu,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),o||wt.Zjt(wu,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||wt.Zjt(wu,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===Ee.kRt?(s&&wt.Zjt(wu,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),d?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(d)||wt.Zjt(wu,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):wt.Zjt(wu,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):d&&wt.Zjt(wu,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,e.AUTOSELECT&&wt.Zjt(wu,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),e.FORCED&&n!==Ee.HA&&wt.Zjt(wu,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{LRt:h,rkt:_,pjt:f,wjt:r,_jt:c,fjt:u,gjt:l,vjt:d,gs:o,l:a,Av:n,Jpt:s}}function _K(t,i,e){const s=cs(t);let n,r,o;try{n=ra.wp(e,i),o=function(t){if(void 0===t)return;const i=t.split("x"),e=Number(i[0]),s=Number(i[1]);if(S(e)||S(s))throw new g("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{ji:e,Ti:s}}(s.RESOLUTION),r=function(t){if(!t)return;let i,e,s;const n=t.split(",");for(const t of n){const n=t.trim();I(n,"mp4a")?i="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?i=n:I(n,"avc")||I(n,"hvc1")||I(n,"hev1")||I(n,"dvh")||I(n,"vp09")||I(n,"av01")?e=n:s=s?s+","+n:n}return{mkt:i,Akt:e,IRt:s}}(s.CODECS)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const h=Ba(s.BANDWIDTH),a=Ba(s["AVERAGE-BANDWIDTH"]),u=Ba(s.SCORE),c=Ba(s["FRAME-RATE"]),l=s["HDCP-LEVEL"],d=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");d.push(...t.map((t=>{const i=t.split(":");return{keysystem:i[0],label:i[1]}})))}const f=s["VIDEO-RANGE"],_=s.AUDIO,w=s.VIDEO,v=s.SUBTITLES,m=s["CLOSED-CAPTIONS"];if(void 0===h?wt.Zjt(wu,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>h&&wt.Zjt(wu,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||wt.IM(wu,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.Akt&&void 0===o&&wt.IM(wu,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||Ai(["TYPE-0","TYPE-1","NONE"],l)||wt.Zjt(wu,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||Ai(["SDR","PQ","HLG"],f)||wt.Zjt(wu,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===h)throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{xRt:d,CRt:_,Xpt:a,GP:h,ORt:m,$nt:r,Adt:c,jRt:l,akt:o,Zpt:u,RRt:v,Jpt:n,PRt:w,zRt:f}}function gK(t,i){const e=cs(t);if(!e.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return _K(t,i,e.URI)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function Ba(t){const i=Number(t);return S(i)?void 0:i}function wK(t,i){const e=cs(t);let s,n;try{s=function(t){switch(t){case"NONE":return Sc.yB;case"AES-128":return Sc.BRt;case"SAMPLE-AES":return Sc.ERt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new g("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(e.METHOD),n=e.URI?TK(e.URI,i):void 0}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=e.KEYFORMAT,o=e.IV,h=e.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==Sc.yB){if(c=r||B_,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(aK(c)!==yu)throw new g("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=Sc.ERt}else a=s;u=n,l=o?Fe(o):void 0,d=h?h.split("/").map((t=>Number(t))):[1]}else a=Sc.yB,(n||r||h||o)&&wt.Zjt(wu,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{ZD:a,Jpt:u,URt:l,DRt:c,QRt:d}}function vK(t){const i=lK(t);if(!i)return[void 0,""];const[e,s]=i.split(",");return[Ba(e),s]}function mK(t,i){const e=t.split("@"),s=Ba(e[0]),n=e.length>1?Ba(e[1]):i;if(void 0===s||void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Cn:n,U:s}}function pK(t){if(void 0!==t)return mK(t,void 0)}function AK(t,i){return mK(lK(t),i)}function yK(t,i){const e=cs(t);try{const t=TK(e.URI,i);return{lT:t,Dyt:pK(e.BYTERANGE)}}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function MK(t){const i=lK(t);if(!i)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const e=new Date(i);if(!sT(e))throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return e}function bK(t){const i=cs(t),e=i["START-DATE"],s=i["END-DATE"],n=Ba(i["PLANNED-DURATION"]);let r,o,h,a=Ba(i.DURATION);void 0!==i["SCTE35-CMD"]&&(r=Fe(i["SCTE35-CMD"]).buffer),i["SCTE35-IN"]&&(o=Fe(i["SCTE35-IN"]).buffer),i["SCTE35-OUT"]&&(h=Fe(i["SCTE35-OUT"]).buffer);const u="YES"===i["END-ON-NEXT"],c=function(t){const i={};for(const e of w.keys(t)){const s=t[e];void 0!==s&&I(e,"X-")&&(i[e]=s)}return i}(i),l=i.ID,d=i.CLASS;let f,_;if(void 0===e)wt.Zjt(wu,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+e+".");else if(f=new Date(e),_=void 0!==s?new Date(s):void 0,sT(f)||wt.Zjt(wu,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const i=new Date(f.getTime()+1e3*a);_?_.getTime()!==i.getTime()&&(wt.Zjt(wu,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),_=i):_=i}else _&&(a=(f.getTime()-_.getTime())/1e3);if(u&&(i.CLASS||wt.Zjt(wu,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),i.DURATION&&wt.Zjt(wu,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),_&&wt.Zjt(wu,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&wt.Zjt(wu,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new g("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,mRt:d,Mz:f,pRt:_,ct:a,ARt:n,TRt:r,NRt:o,SRt:h,vRt:u,MRt:c}}function TK(t,i){if(void 0===t)throw new g("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return ra.wp(t,i)}function SK(t,i){const e=cs(t),s=Ba(e.DURATION),n=TK(e.URI,i),r=pK(e.BYTERANGE),o="YES"===e.INDEPENDENT,h="YES"===e.GAP;if(void 0===s)throw new g("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,Jpt:{lT:n,Dyt:r},FRt:o,YRt:h}}function NK(t){const i=cs(t);return{GRt:"YES"===i["CAN-BLOCK-RELOAD"],VRt:Ba(i["CAN-SKIP-UNTIL"]),WRt:"YES"===i["CAN-SKIP-DATERANGES"],HRt:Ba(i["HOLD-BACK"]),XRt:Ba(i["PART-HOLD-BACK"])}}function IK(t,i){const e=cs(t);if(void 0===e.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=TK(e.URI,i),n=Ba(e["LAST-MSN"]),r=Ba(e["LAST-PART"]);if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{Jpt:s,ZRt:n,qRt:r}}function DK(t,i){var e;const s=cs(t),n=Ba(s["SKIPPED-SEGMENTS"]),r=null==(e=s["RECENTLY-REMOVED-DATERANGES"])?void 0:e.split("\t");if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{KRt:n,JRt:r,$Rt:i}}function EK(t){const i=Ba(cs(t)["PART-TARGET"]);if(void 0===i)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return i}function kK(t){switch(lK(t)){case"VOD":return Jq.tPt;case"EVENT":return Jq.iPt;default:return wt.Zjt(wu,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),Jq.jT}}function LK(t,i){const e=cs(t);let s,n;try{s=function(t){if(void 0===t)throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return us.ePt;if("PART"===t)return us.sPt;throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(e.TYPE),n=TK(e.URI,i)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=Ba(e["BYTERANGE-START"]),o=Ba(e["BYTERANGE-LENGTH"]);let h;return void 0===r&&void 0===o||(h={Cn:r||0,U:o}),{Av:s,Jpt:{lT:n,Dyt:h}}}!function(t){t[t.WA=0]="WA",t[t.VA=1]="VA",t[t.HA=2]="HA",t[t.kRt=3]="kRt"}(Ee||(Ee={})),function(t){t[t.ePt=0]="ePt",t[t.sPt=1]="sPt"}(us||(us={})),function(t){t[t.yB=0]="yB",t[t.BRt=1]="BRt",t[t.ERt=2]="ERt"}(Sc||(Sc={})),function(t){t[t.jT=0]="jT",t[t.tPt=1]="tPt",t[t.iPt=2]="iPt"}(Jq||(Jq={}));var xK=class t{nPt(){const t=this.rPt[this.oPt];return this.oPt+=1,t}hPt(){return this.rPt[this.oPt]}$A(){const i=new t("");return i.oPt=0,i.rPt=this.rPt.slice(this.oPt),i}static aPt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(i){this.oPt=0,this.rPt=t.aPt(i)}};function CK(t,i,e){const s=t.Jpt;let n=t.Gy,r=t.uPt,o=t.Cn;switch(e){case"#EXT-X-VERSION":n=function(t){const i=dK(t);return S(i)?(wt.Zjt(wu,"Playlist version is NaN: "+t+"."),1):i}(i);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":o=function(t){const i=cs(t),e=Ba(i["TIME-OFFSET"]);if(void 0===e)throw new g("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{cPt:e,lPt:"YES"===i.PRECISE}}(i);break;case"#EXT-X-DEFINE":wt.Zjt(wu,"Ignoring unsupported #EXT-X-DEFINE: "+i+".");break;default:wt.IM(wu,"Ignoring unrecognized line or comment: "+i+".")}return{Jpt:s,Gy:n,uPt:r,Cn:o}}function OK(t,i){return t.map((t=>t.ZD===Sc.yB||t.URt?t:ol({},t,{URt:jK(i)})))}function jK(t){const i=new DataView(new ArrayBuffer(16)),e=new Bi;return e.KA(8),jg(i,e,ii.fromNumber(t)),new j(i.buffer)}function RK(t,i,e){wt.IM(wu,"Parsing M3U8 playlist at "+t+".");const s=new xK(e);if("#EXTM3U"!==s.nPt())throw new g("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(e)?function(t,i){let e;try{e=ra.wp(t)}catch(i){throw wt.Zjt(wu,"The master playlist has no valid base URI: "+t+"."),new g("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={Jpt:e,uPt:void 0,Cn:void 0,Gy:void 0};const n=[],r=[],o=[],h=[];for(;;){const t=i.nPt();if(!t)break;try{const a=uK(t);switch(a){case"#EXT-X-MEDIA":{const i=fK(t,e);n.push(i);break}case"#EXT-X-STREAM-INF":{const s=_K(t,e,i.nPt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const i=gK(t,e);o.push(i);break}case"#EXT-X-SESSION-DATA":wt.Zjt(wu,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const i=wK(t,e);h.push(i);break}default:s=CK(s,t,a)}}catch(i){wt.Zjt(wu,"Ignoring unparsable line: "+t,i)}}let a=s.Gy;var u;const c=null!=(u=s.uPt)&&u,l=s.Cn;return void 0===a&&(wt.Zjt(wu,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some((t=>void 0!==t.Zpt))||o.some((t=>void 0!==t.Zpt)))&&(r.some((t=>void 0===t.Zpt))||o.some((t=>void 0===t.Zpt)))&&wt.Zjt(wu,"If one master playlist variant stream has a SCORE, all variants should have it."),{Jpt:e,Gy:a,uPt:c,Cn:l,dPt:o,fPt:h,wM:n,_Pt:r}}(t,s):function(t,i,e){let s={Jpt:t,uPt:void 0,Cn:void 0,Gy:void 0};const n=[];let r,o,h,a,u=!1,c=!1;const l=[],d=Pu();let f,_,w,v,m,p,A,y,M,b=[],T=[],S=!1,N=!1;const D=[],E=[];let k,L,x,C,O,j=0,R=!1,P=Jq.jT,z=!1,B=0;try{O=ra.wp(t)}catch(i){throw wt.Zjt(wu,"The media playlist has no valid base URI: "+t+".",i),new g("HLSPlaylistParser - Could not parse HLS media playlist.")}const U=e.$A();for(;void 0===L||void 0===x;){const t=U.nPt();if(!t)break;try{switch(cK(t)){case"#EXT-X-MEDIA-SEQUENCE":L=dK(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":x=dK(t)}}catch(i){wt.Zjt(wu,"Ignoring unparsable line: "+t,i)}}void 0===L&&(wt.IM(wu,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),L=0),void 0===x&&(wt.IM(wu,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),x=0);let Q=L,F=x;for(;;){const t=e.nPt();if(!t)break;let i=!1;try{const e=cK(t);switch(e){case"#EXTINF":i=!0,[f,_]=vK(t);break;case"#EXT-X-BYTERANGE":i=!0,w=AK(t,j),w&&(j=w.Cn+w.U);break;case"#EXT-X-DISCONTINUITY":i=!0,S=!0,F++;break;case"#EXT-X-KEY":{var Y;i=!0;const e=wK(t,O);if(e.ZD===Sc.yB){d.clear(),M=void 0;break}var G;const s=null!=(G=null==(Y=e.DRt)?void 0:Y.toString())?G:"identity";d.set(s,e),e.ZD===Sc.BRt&&(M=e);break}case"#EXT-X-MAP":i=!0,m=yK(t,O),p=M;break;case"#EXT-X-PROGRAM-DATE-TIME":i=!0,A=MK(t);break;case"#EXT-X-GAP":i=!0,N=!0;break;case"#EXT-X-BITRATE":i=!0,y=dK(t);break;case"#EXT-X-TARGETDURATION":r=dK(t);break;case"#EXT-X-DATERANGE":{const i=bK(t);n.push(i);break}case"#EXT-X-PART":{i=!0;const e=SK(t,O);T.push(e);break}case"#EXT-X-PRELOAD-HINT":{const i=LK(t,O);D.push(i);break}case"#EXT-X-SKIP":{l.length>0&&wt.Zjt(wu,"#EXT-X-SKIP must appear before any #EXTINF tags."),i=!0;const e=DK(t,Q);B=e.KRt,C=e.JRt,Q+=e.KRt;break}case"#EXT-X-SERVER-CONTROL":{const i=NK(t);u=i.GRt,o=i.VRt,c=i.WRt,h=i.HRt,a=i.XRt;break}case"#EXT-X-RENDITION-REPORT":{const i=IK(t,O);E.push(i);break}case"#EXT-X-PART-INF":k=EK(t);break;case"#EXT-X-MEDIA-SEQUENCE":i&&wt.Zjt(wu,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":i&&wt.Zjt(wu,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":R=!0;break;case"#EXT-X-PLAYLIST-TYPE":P=kK(t);break;case"#EXT-X-I-FRAMES-ONLY":z=!0;break;default:if(I(e,"#"))s=CK(s,t,e);else{v=ra.wp(t,O);const i=m?{Jpt:m,gPt:p}:void 0,e={fPt:OK(Cd(d),Q),kI:b,wPt:T,ct:f,kz:_,vPt:S,Jpt:{Dyt:w,lT:v},mPt:i,pPt:A,YRt:N,APt:y,$Rt:Q,yPt:F};l.push(e),Q++,b=[],T=[],f=void 0,_=void 0,S=!1,w=void 0,v=void 0,A=void 0,N=!1,y=void 0}}}catch(i){wt.Zjt(wu,"Ignoring unparsable line: "+t,i)}}if(T.length){const t=m?{Jpt:m,gPt:M}:void 0,i={fPt:OK(Cd(d),Q),kI:b,wPt:T,ct:f,kz:_,vPt:S,Jpt:void 0,mPt:t,pPt:A,YRt:N,APt:y,$Rt:Q,yPt:F};l.push(i)}let V=s.Gy;var W;const H=null!=(W=s.uPt)&&W,X=s.Cn;void 0===V&&(wt.Zjt(wu,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),V=2),void 0===r&&wt.Zjt(wu,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const Z=l.length,q=Z>0;q||wt.Zjt(wu,"The HLS media playlist contains no segments.");const K=q&&l[Z-1].wPt.length>0;return K&&void 0===k&&wt.Zjt(wu,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),K&&void 0===a&&wt.Zjt(wu,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{GRt:u,VRt:o,WRt:c,MPt:n,yPt:x,bPt:R,uPt:H,HRt:h,TPt:z,$Rt:L,KRt:B,XRt:a,aRt:k,SPt:P,NPt:D,JRt:C,IPt:E,DPt:r,jnt:l,Cn:X,Jpt:O,EPt:i,Gy:V}}(t,i,s)}var PK=class{get Jpt(){return this.djt.Jpt}get $nt(){return this.KEt}set $nt(t){this.KEt=t?BK(t):void 0,this.kPt=function(t,i){return!(void 0!==(null==t?void 0:t.mkt)&&void 0===(null==i?void 0:i.mkt)||void 0!==(null==t?void 0:t.Akt)&&void 0===(null==i?void 0:i.Akt))}(this.LPt,this.KEt)}get xPt(){return this.kPt}get nRt(){return this.CPt}get Jjt(){return this.CPt.filter((t=>t.Av===Ee.WA))}get $jt(){return this.CPt.filter((t=>t.Av===Ee.VA))}get OPt(){return this.CPt.filter((t=>t.Av===Ee.HA))}get jPt(){return this.CPt.filter((t=>t.Av===Ee.kRt))}RPt(t){for(const i of this.CPt){const e=i.djt.RPt(t);if(void 0!==e)return e}}PPt(t){for(const i of this.CPt){const e=i.djt.PPt(t);if(void 0!==e)return e}}zPt(t){jn(this.CPt,t)}constructor(t,i,e){var s,n,r,o;this.o=zK++,this.Zpt=void 0,this.akt=void 0,this.Xpt=void 0,this.kPt=!1,this.CPt=[],this.djt=i,this.GP=t.GP,this.Xpt=t.Xpt,this.Zpt=t.Zpt,this.LPt=t.$nt?BK(t.$nt):void 0,this.KEt=this.LPt,this.akt=t.akt,this.Adt=t.Adt,this.CRt=null!=(s=t.CRt)?s:"BPt"+this.o,this.PRt=null!=(n=t.PRt)?n:"UPt"+this.o,this.RRt=null!=(r=t.RRt)?r:"QPt"+this.o,this.ORt=null!=(o=t.ORt)?o:"FPt"+this.o,this.CPt=e}},zK=0;function BK(t){return ol({},t,{Akt:t.Akt?Xm(t.Akt):void 0})}var UK,QK=class{get MS(){var t;return this.xS+(null!=(t=this.YPt)?t:0)}get GPt(){return this.VPt}get fPt(){return this.WPt.fPt}HPt(t,i){this.xS=t,this.VPt=i}constructor(t,i,e,s,n){this.F7=void 0,this.WPt=t,this.XPt=i,this.xS=e,this.VPt=s,this.ct=n.ct,this.Jpt=n.Jpt,this.FRt=n.FRt,this.YRt=n.YRt}},FK=class{get MS(){var t;return this.xS+(null!=(t=this.ZPt)?t:0)}get qPt(){return this.xS}get ct(){return this.jx}get Jpt(){return this.KPt}get JPt(){return this.$Pt}get GPt(){return this.VPt}get wPt(){return this.Kf}get tzt(){return this.izt}get bS(){var t;return this.MS+(null!=(t=this.jx)?t:this.izt)}set YPt(t){this.ZPt=t;for(const i of this.Kf)i.YPt=t}get YPt(){return this.ZPt}ezt(t){return this.Kf[t]}szt(t){for(let i=0;i<this.Kf.length;i++){const e=this.Kf[i],s=e.MS,n=s+e.ct;if(s<=t&&t<=n)return t===n&&i+1<this.Kf.length?this.Kf[i+1]:e}}nzt(t){for(let i=this.Kf.length-1;i>=0;i--){const e=this.Kf[i];if(e.MS<=t)return e}}rzt(t){let i=this.nzt(t);for(;i&&!i.FRt&&i.XPt>0;)i=this.ezt(i.XPt-1);return i}HPt(t,i,e){const s=t.wPt.length!==this.Kf.length||e!==this.VPt;this.$Pt=i,this.VPt=e,this.jx=t.ct,null!=this.pPt||(this.pPt=t.pPt),void 0===this.KPt&&(this.KPt=t.Jpt),s&&this.ozt(t.wPt)}ozt(t){this.Kf.length>t.length&&(this.Kf.length=t.length);let i=0;for(let e=0;e<t.length;e++){const s=t[e],n=this.VPt&&e===t.length-1,r=this.xS+i;if(e<this.Kf.length)this.Kf[e].HPt(r,n);else{const t=new QK(this,e,r,n,s);t.YPt=this.ZPt,this.Kf.push(t)}i+=s.ct}this.izt=i}hzt(){To(this.Kf),this.izt=0}constructor(t,i,e,s,n){this.F7=void 0,this.Kf=[],this.izt=0,this.xS=t,this.mPt=n.mPt,this.$Pt=e,this.VPt=s,this.jx=n.ct,this.pPt=n.pPt,this.KPt=n.Jpt,this.YRt=n.YRt,this.$Rt=n.$Rt,this.vPt=n.vPt,this.yPt=i,this.fPt=n.fPt,this.ozt(n.wPt)}};!function(t){t.azt="YES",t.uzt="v2"}(UK||(UK={}));var YK=class extends tt{};var GK=class extends rl{get va(){return this.Xa||(this.Xa=function(t){return ro(ht(t),{get content(){return t.O},get class(){return t.mRt},get startDate(){return t.Mz},get endDate(){return t.pRt},get duration(){return t.ct},get plannedDuration(){return t.ARt},get endOnNext(){return t.vRt},get scte35Cmd(){return t.bRt},get scte35Out(){return t.SRt},get scte35In(){return t.NRt},get customAttributes(){return t.yRt}})}(this)),this.Xa}get mRt(){return this.czt}get Mz(){return this.lzt}get pRt(){return this.dzt}get ct(){return this.jx}get ARt(){return this.fzt}get vRt(){return this._zt}get bRt(){return this.gzt}get SRt(){return this.wzt}get NRt(){return this.vzt}get yRt(){return this.mzt}Yn(t){let i=!1;var e;(void 0===this.czt&&void 0!==t.mRt&&(i=!0,this.czt=t.mRt),void 0===this.dzt&&void 0!==t.pRt&&(i=!0,this.dzt=t.pRt),void 0===this.jx&&void 0!==t.ct&&(i=!0,this.jx=t.ct),void 0===this.fzt&&void 0!==t.ARt&&(i=!0,this.fzt=t.ARt),!this._zt&&t.vRt&&(i=!0,this._zt=t.vRt),i=this.updateCustomAttributes(t,i),void 0===this.gzt&&void 0!==t.bRt&&(i=!0,this.gzt=t.bRt),void 0===this.wzt&&void 0!==t.SRt&&(i=!0,this.wzt=t.SRt),void 0===this.vzt&&void 0!==t.NRt&&(i=!0,this.vzt=t.NRt),this.pzt(),this.Azt(),this.yzt(),i)&&(this.Co(new or(this)),null==(e=this.CS)||e.Co(new Pv(this)))}updateCustomAttributes(t,i){let e=i;if(t.yRt)for(const i of w.keys(t.yRt))void 0===this.mzt[i]&&(e=!0,this.mzt[i]=t.yRt[i]);return e}pzt(){this.jx&&!this.dzt&&(this.dzt=new Date(this.lzt.getTime()+rT(this.jx)))}Azt(){this.dzt&&!this.jx&&(this.jx=nT(this.dzt.getTime()-this.lzt.getTime()))}yzt(){this.RS===1/0&&(this.dzt||this.jx)&&(this.RS=VK(this.xS,this.jx,this.lzt,this.dzt))}constructor(t,i){super(i,VK(i,t.ct,t.Mz,t.pRt),void 0,!1,t.o),this.czt=t.mRt,this.lzt=t.Mz,this.dzt=t.pRt,this.jx=t.ct,this.fzt=t.ARt,this._zt=Boolean(t.vRt),this.mzt=t.yRt||{},this.gzt=t.bRt,this.wzt=t.SRt,this.vzt=t.NRt,this.pzt(),this.Azt()}};function VK(t,i,e,s){return Ks(i)?t+i:s?t+(nT(s.getTime())-nT(e.getTime())):1/0}var WK=class extends VO{Yn(t,i){HK(this,XK(t),i)}lE(t){ZK(this.L.Rw,t),super.lE(t)}constructor(){super(void 0,void 0,O.DATE_RANGE)}};function HK(t,i,e){const s=t.L.Rw;for(let e=s.length-1;e>=0;e--){const n=s[e],r=bo(i,(t=>t.o===n.o));r?n.Yn(r):t.gD(n)}for(const s of i){const i=s.Mz;if(void 0!==i&&!t.D2(s.o)){const n=e(i),r=new GK(s,n);ZK(t.L.Rw,r),t.lE(r)}}}function XK(t){const i=Pu(),e=[];for(const s of t)if(i.has(s.o)){const t=i.get(s.o),e=ol({},t,uf(s),{yRt:ol({},t.yRt,s.yRt)});i.set(s.o,e)}else i.set(s.o,s),e.push(s.o);return e.map((t=>i.get(t)))}function ZK(t,i){const e=ru(t,(t=>t.mRt===i.mRt));e&&e.vRt&&e.Yn({o:e.o,pRt:i.Mz})}var qK=String.fromCharCode(95),KK=qK+"HLS_msn",JK=qK+"HLS_part",$K=qK+"HLS_skip",tJ="HLSMediaPlaylist",iJ=class{get bPt(){if(0===this.ryt.length)return!1;return this.ryt[this.ryt.length-1].GPt}get ct(){return this.jx}get Ig(){return this.U1}get Mzt(){return this.bzt}get uRt(){return this.Tzt}get aRt(){return this.Szt}get HRt(){return this.bPt?0:this.Nzt?this.Nzt:this.Tzt?3*this.Tzt:void 0}get XRt(){var t;return null!=(t=this.Izt)?t:this.Szt?3*this.Szt:void 0}get GRt(){return this.Dzt}get VRt(){return this.Ezt}get WRt(){return this.kzt}get SPt(){return this.Lzt}get xzt(){return void 0!==this.aRt}get Czt(){if(this.bPt)return!0;const t=ra.m_()/1e3,i=this.Ozt,e=this.jzt;return void 0!==i&&t-i<e}get Ozt(){return this.Rzt}get Pzt(){if(this.zzt)return ra.m_()/1e3-this.zzt}get YPt(){return this.ZPt}get jzt(){var t;return null!=(t=this.Tzt)?t:void 0===this.Rzt?5:1}get jnt(){return this.ryt}get MPt(){return this.Bzt}get Uzt(){return this.Qzt}set Uzt(t){this.Qzt=t}get Cn(){return this.FI}get Fzt(){return this.Yzt}Qjt(t){if(!t)return this.Jpt;const i=ra.Dh(this.Jpt);return void 0!==t.$Rt&&i.searchParams.append(KK,String(t.$Rt)),void 0!==t.Gzt&&i.searchParams.append(JK,String(t.Gzt)),void 0!==t.Ny&&i.searchParams.append($K,t.Ny),i.href}Aat(t){const i=this.ryt;if(0===i.length)return;const e=t-i[0].$Rt;return e<0||e>=i.length?void 0:i[e]}Vzt(t){if(0===this.ryt.length)return;const i=DV(eJ.lL,this.ryt,t);if(!(i<0)){const e=this.ryt[i];return t===e.bS&&i+1<this.ryt.length?this.ryt[i+1]:e}{const i=this.ryt[this.ryt.length-1];if(t===i.bS)return i}}Wzt(t){if(0===this.ryt.length)return;const i=this.ryt[0];if(t<i.bS)return i;const e=this.ryt[this.ryt.length-1];return t>=e.MS?e:this.Vzt(t)}RPt(t){const i=this.Wzt(t);if(void 0===i)return;for(let e=i.$Rt-this.ryt[0].$Rt;e>=0;e--){const i=this.ryt[e];if(void 0!==i.pPt)return new Date(i.pPt.getTime()+1e3*(t-i.MS))}}PPt(t){let i;for(const e of this.ryt)if(sJ(e))if(void 0===i)i=e;else{if(!(e.pPt.getTime()<=t.getTime()))break;i=e}if(void 0!==i)return i.MS+(t.getTime()-i.pPt.getTime())/1e3}Hzt(t){switch(t){case us.ePt:return this.Xzt;case us.sPt:return this.Zzt;default:return}}HPt(t){var i;void 0===this.Tzt&&(this.Tzt=null!=(i=t.DPt)?i:this.qzt(t));void 0===this.Nzt&&void 0!==t.HRt&&(this.Nzt=t.HRt),void 0===this.Szt&&void 0!==t.aRt&&(this.Szt=t.aRt),void 0===this.Izt&&void 0!==t.XRt&&(this.Izt=t.XRt),this.Dzt=t.GRt,this.Ezt=t.VRt,this.kzt=t.WRt,this.Lzt=t.SPt,this.uyt(t),this.Kzt(t);const e=bo(t.NPt,(t=>t.Av===us.ePt)),s=bo(t.NPt,(t=>t.Av===us.sPt));this.Xzt=e?{Jpt:e.Jpt,Av:e.Av,yPt:t.yPt}:void 0,this.Zzt=s?{Jpt:s.Jpt,Av:s.Av,yPt:t.yPt}:void 0,this.Rzt=ra.m_()/1e3;const n=this.U1.jn(this.U1.U-1);this.Jzt();const r=this.U1.jn(this.U1.U-1);(!this.zzt||r-n>0)&&(this.zzt=this.Rzt),null!=this.FI||(this.FI=t.Cn)}Jzt(){this.bzt=this.$zt(),this.U1=this.tBt(this.bzt),this.jx=this.iBt()}$zt(){const t=this.jnt;if(0===t.length)return Ri.oU();const i=t[0].MS,e=t[t.length-1].bS;return new Ri([i,e])}tBt(t){if(0===t.U||this.bPt)return t;const i=t.Cn(0),e=t.jn(0)-this.nbt;return e<i?Ri.nU(i):new Ri([i,e])}get nbt(){return this.bPt?0:null!=(e=null!=(i=null!=(t=this.eBt)?t:this.XRt)?i:this.HRt)?e:0;var t,i,e}iBt(){return 0===this.ryt.length?0:this.bPt?_d(this.ryt,(t=>{var i;return null!=(i=t.ct)?i:t.tzt})):1/0}qzt(t){let i;for(const e of t.jnt)if(void 0!==e.ct){const t=_.max(1,_.round(e.ct));(void 0===i||i<t)&&(i=t)}if(void 0===i)throw new g("HLSModel - Could not determine required segment target duration.");return i}uyt(t){if(0===t.jnt.length)return To(this.ryt),void this.sBt();const i=this.nBt(t);if(!i)return;let e,s,n;i.rBt>0&&this.ryt.splice(0,i.rBt);const r=t.KRt;if(r>0){if(r>this.ryt.length)throw new YK("New playlist skips over missing segments.");const i=this.ryt[r-1];if(void 0===i.ct)throw new YK("New playlist skips over an incomplete segment.");e=i.qPt+i.ct,n=i.yPt-t.yPt,s=r;for(let t=0;t<r;t++)this.ryt[t].hzt()}else e=i.oBt,n=0,s=0;for(let i=0;i<t.jnt.length;i++,s++){const r=t.jnt[i],o=0===i,h=t.bPt&&i===t.jnt.length-1,a=r.ct,u=r.yPt+n;if(s<this.ryt.length){const t=this.ryt[s];0,t.HPt(r,o,h)}else{let t=r;if(this.ryt.length>0&&void 0===t.mPt){t=ol({},t,{mPt:this.ryt[this.ryt.length-1].mPt})}const i=new FK(e,u,o,h,t);i.YPt=this.ZPt,this.ryt.push(i)}void 0!==a&&(e+=a)}}nBt(t){if(0===this.ryt.length)return{rBt:0,oBt:0};const i=this.ryt[0].$Rt,e=this.ryt[this.ryt.length-1].$Rt,s=t.jnt[0].$Rt-t.KRt,n=t.jnt[t.jnt.length-1].$Rt;let r=0,o=0;if(s<i){const e=this.jnt[0].pPt,n=t.jnt[0].pPt;if(!(e&&n&&e<n))return void wt.Zjt(tJ,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+i+")");r=this.ryt.length,this.sBt()}else{if(n<e)return void wt.Zjt(tJ,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+e+")");if(e<s){var h;o=null!=(h=function(t,i){const e=ru(t,(t=>void 0!==t.pPt));if(void 0===e)return;const s=function(t){let i=0;for(const s of t){if(s.vPt)return;if(s.pPt)return[s,i];var e;i+=null!=(e=s.ct)?e:0}return}(i.jnt);if(void 0===s)return;const[n,r]=s;if(e.yPt!==n.yPt)return;const o=(n.pPt.getTime()-e.pPt.getTime())/1e3;return e.qPt+o-r}(this.ryt,t))?h:function(t,i,e){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:_.max(e,s.tzt),o=e*(i-s.$Rt-1);return s.qPt+r+o}(this.ryt,s,this.Tzt),wt.Xjt(tJ,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+e+"), resetting playlist and restarting at "+o+"s"),r=this.ryt.length,this.sBt()}else{0;const t=gt(this.ryt,(t=>t.$Rt===s));0,o=this.ryt[t].qPt,t>0&&(r=t)}}return{rBt:r,oBt:o}}Kzt(t){let i=t.MPt.map(rK);if(t.WRt&&t.EPt.Ny===UK.uzt&&(i=this.Bzt.concat(i)),this.Bzt=XK(i),t.JRt)for(const i of t.JRt){const t=gt(this.Bzt,(t=>t.o===i));t>=0&&Ns(this.Bzt,t)}}hBt(t,i){if(this.ZPt!==t){this.ZPt=t;for(const t of this.ryt)t.YPt=this.ZPt;this.Jzt()}this.Yzt=i}sBt(){this.ZPt=void 0,this.Yzt=void 0}constructor(t,i,e){this.Rzt=void 0,this.zzt=void 0,this.Xzt=void 0,this.Zzt=void 0,this.Tzt=void 0,this.Szt=void 0,this.Nzt=void 0,this.Izt=void 0,this.ryt=[],this.Bzt=[],this.Dzt=!1,this.Ezt=void 0,this.kzt=!1,this.Lzt=Jq.jT,this.U1=Ri.oU(),this.bzt=Ri.oU(),this.jx=void 0,this.Qzt=-1/0,this.Yzt=void 0,this.Jpt=t,this.FI=i,this.eBt=e}},eJ=class t{static get lL(){return null!=this.Jnt||(this.Jnt=new t),this.Jnt}iyt(t){return t.MS}eyt(t){return t.bS}syt(t,i){return wd(t,i)}nyt(t,i,e){return(t-i)/(e-i)}};function sJ(t){return void 0!==t.pPt}function ha(t){return void 0!==t.wPt}function nJ(t){return ha(t)?t.JPt:0===t.XPt&&t.WPt.JPt}function rJ(t,i){return ha(t)?ha(i)?t.$Rt+1===i.$Rt:0===i.XPt&&rJ(t,i.WPt):t.XPt===t.WPt.wPt.length-1?rJ(t.WPt,i):!ha(i)&&t.WPt===i.WPt&&t.XPt+1===i.XPt}var oJ=class extends tt{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var hJ=class{aBt(t){const i=this.uBt.get(t);return void 0!==i&&aJ(i)}cBt(t){if(this.lBt()>t)return Promise.reject(new oJ);const i=[];for(const s of this.dBt){var e;if(s<t)null==(e=this.uBt.get(s))||e.fBt.xL(new oJ),this.uBt.delete(s);else i.push(s)}return this.dBt=i,-1===this.dBt.indexOf(t)&&this.dBt.push(t),this._Bt(t).fBt.OL}gBt(t){const i=this.uBt.get(t);if(!i||!aJ(i))throw new g("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return i}wBt(t){return this.gBt(t).pI}vBt(t,i){const e=ha(i)?i:i.WPt,s=this.gBt(e.yPt);let n=t.nS(s.pI);if(s.mBt){const t=A.$N(i.MS).uN(n);if(t.oN().$S(sm())){const i=_.round(t.JS()/Ue().JS());n=n.nS(Ue().zN(i))}}return n}pBt(t,i){return this.vBt(t,i).uN(t)}ABt(t,i,e,s,n,r){this.yBt<t&&(this.yBt=t);const o=this._Bt(t);void 0===o.pI&&(o.MBt.some((t=>t.Zht===i))||(o.MBt.push({Zht:i,bBt:e,TBt:s.ZN(e.cM),SBt:n,mBt:r}),this.NBt(o,t)))}NBt(t,i){if(t.pI||!this.IBt(t))return;const e=function(t){return Id(t,uJ)}(t.MBt);t.pI=e.TBt.uN(e.bBt),t.mBt=t.MBt.some((t=>t.mBt)),t.fBt.LL(),To(t.MBt),jn(this.dBt,i)}IBt(t){return this.DBt.length>0&&this.DBt.every((i=>t.MBt.some((t=>t.Zht===i))))}_Bt(t){if(this.uBt.has(t))return this.uBt.get(t);{const i={pI:void 0,mBt:!1,fBt:new Oi,MBt:[]};return this.uBt.set(t,i),i}}EBt(t){this.DBt=t,this.uBt.forEach(((t,i)=>this.NBt(t,i)))}kBt(){this.yBt=-1}lBt(){return this.yBt}h_(){this.uBt.forEach((t=>t.fBt.g_())),this.uBt.clear()}constructor(){this.DBt=[],this.uBt=Gs(),this.dBt=[],this.yBt=-1}};function aJ(t){return void 0!==t.pI}function uJ(t,i){return-function(t,i){if(t.mBt||i.mBt)return function(t,i){let e=t.uN(i);return t.lN()||i.lN()||(e.iN(sm())?e=e.uN(Ue()):e.rN(sm().aN())&&(e=e.nS(Ue()))),e}(t.bBt,i.bBt).tN(A.wN);return t.bBt.tN(i.bBt)}(t,i)||function(t,i){return t.SBt===i.SBt?ws.Zr:t.SBt?ws.Jf:ws.$f}(t,i)||function(t,i){return t.TBt.tN(i.TBt)}(t,i)}var cJ=class{get LBt(){return this.xBt}get Kjt(){return this.CBt}get kT(){return this.OBt}HPt(t,i){if(Uc(t))if(0===this.CBt.length)this.jBt(t);else{if(!i)return void wt.Zjt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");i.djt.HPt(t)}else{if(0!==this.CBt.length)return void wt.Zjt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.RBt(t)}}jBt(t){const i=this.PBt(t.Jpt);i.HPt(t);const e=this.zBt(Ee.WA,i),s=this.zBt(Ee.VA,i),n=new PK({Jpt:i.Jpt,GP:0,Xpt:0,Zpt:NaN,$nt:void 0,akt:void 0,Adt:0,xRt:[],jRt:void 0,zRt:void 0,CRt:void 0,PRt:void 0,RRt:void 0,ORt:void 0},i,[e,s]);this.CBt.push(n)}RBt(t){this.xBt.push(...t.fPt);const i=this.BBt(t);for(const e of t._Pt){const s=i.filter((t=>dJ(t,e)));this.UBt(e,s);const n=new PK(e,this.PBt(e.Jpt,t.Cn),s);this.CBt.push(n)}}PBt(t,i){let e=this.QBt.get(t);return void 0===e&&(e=new iJ(t,i,this.eBt),this.QBt.set(t,e)),e}BBt(t){const i=[];for(const e of t.wM)if(void 0===e.Jpt){for(const s of t._Pt)if(lJ(e.Av,e.wjt,s)){const t=new Nq(e,this.PBt(s.Jpt));i.push(t)}}else{const t=new Nq(e,this.PBt(e.Jpt));i.push(t)}return i}zBt(t,i){return new Nq({Av:t,Jpt:void 0,wjt:"",gs:void 0,LRt:void 0,l:"",fjt:!0,_jt:!1,gjt:!1,pjt:void 0,vjt:void 0,rkt:void 0},i)}UBt(t,i){const e=i.filter((t=>t.Av===Ee.WA)),s=i.filter((t=>t.Av===Ee.VA)),n=t.$nt&&(t.$nt.Akt||t.$nt.mkt);if((!n||t.$nt.Akt)&&0===s.length){const e=this.zBt(Ee.VA,this.PBt(t.Jpt));i.push(e)}if((!n||t.$nt.mkt)&&0===e.length){const e=this.zBt(Ee.WA,this.PBt(t.Jpt));i.push(e)}t.$nt&&t.$nt.IRt}FBt(t){for(const i of this.CBt)for(const e of i.nRt)if(e===t)return e}YBt(t){for(const i of this.CBt)if(i===t)return i}GBt(t){for(const i of this.CBt)if(Ai(i.nRt,t))return i}h_(){To(this.CBt),To(this.xBt),this.QBt.clear(),this.OBt.h_()}constructor(t,i){this.CBt=[],this.xBt=[],this.QBt=Pu(),this.OBt=new hJ,this.VBt=t,this.eBt=i}};function lJ(t,i,e){switch(t){case Ee.WA:return e.CRt===i;case Ee.VA:return e.PRt===i;case Ee.HA:return e.RRt===i;case Ee.kRt:return e.ORt===i}return!1}function dJ(t,i){return lJ(t.Av,t.wjt,i)&&(!t.mjt||t.djt.Jpt===i.Jpt)}var ca,fJ=class extends Os{constructor(t){super(ca.WBt),this.Mjt=t}},_J=class extends Os{constructor(t){super(ca.HBt),this.Mjt=t}},qc="HlsModelUpdater";!function(t){t.WBt="XBt",t.HBt="ZBt"}(ca||(ca={}));var Gc=class extends Mo{get qBt(){return this.KBt}get JBt(){return this.$Bt}get Tr(){return this.sAt}get tUt(){return this.iUt}async eUt(t){const i=this.sAt.VBt;if(!i)throw new g("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.Co(new tn);const e=await this.sUt(i,{},2,!0,t),s=e.djt;if(!eK(s)&&!Uc(s))throw new g("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");eK(s)||wt.IM(qc,"Detected media playlist only HLS stream."),this.nUt(s),e.rUt&&(this.$Bt=!0,await this.oUt(t)),this.KBt=!0}async hUt(t,i,e,s){const n=this.sAt.FBt(t);if(!n)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={$Rt:i,Gzt:e,Ny:mJ(n)},o=rT(_.max(1,3*t.djt.jzt));try{await this.aUt(n,r,s,o)}catch(t){throw me(t),this.uUt(n),t}}cUt(t,i){const e=this.sAt.FBt(t);if(!e)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={$Rt:void 0,Gzt:void 0,Ny:mJ(e)},n=rT(_.max(1,3*t.djt.jzt));return this.aUt(e,s,i,n)}lUt(t,i){return this.dUt.has(t.Xw)||this.dUt.set(t.Xw,new Oi),Jr(this.dUt.get(t.Xw).OL,i)}uUt(t){this.Co(new _J(t))}async aUt(t,i,e,s){const n=t.djt.Qjt(i);let r;try{r=(await this.sUt(n,i,0,this.$Bt,e,s)).djt}catch(i){throw me(i),t.djt.Uzt=ra.m_(),i}if(!Uc(r))throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.fUt&&t!==this.fUt&&!this.fUt.djt.Czt)try{await this.cUt(this.fUt,e)}catch(i){me(i),this.fUt=t,this._Ut()}try{this.nUt(r,t)}catch(n){if(n instanceof YK&&void 0!==i.Ny){const n=ol({},i,{Ny:void 0});return this.aUt(t,n,e,s)}throw n}this.gUt(t),this.fUt=t}async sUt(t,i,e,s,n,r){if(wt.IM(qc,"Loading HLS playlist at "+t+"."),s){const i=await this.wUt(t,n);if(void 0!==i)return{djt:i,rUt:!0}}return{djt:await this.vUt(t,i,e,n,r),rUt:!1}}async wUt(t,i){try{const e=await this.rut.fnt([t]);if(Vr(i),void 0!==e)return RK(e.responseURL,{},e.data)}catch(t){me(t)}}async vUt(t,i,e,s,n){const r={zu:t,qD:Ft.Ru,tE:this.xbt,ZD:Cl.GET,Av:li.xD,f_:s,_D:n},o=await ev((()=>this.mUt(r)),s,e);return RK(o.cE,i,o.ly)}async mUt(t){const i=await this.aE.uD(t);return{ly:await i.uE(),cE:i.cE}}async oUt(t){Vr(t);const i=[];for(const e of this.sAt.Kjt)for(const s of e.nRt)i.push(this.pUt(s,t));await Promise.all(i)}async pUt(t,i){try{const e=await this.rut.fnt([t.djt.Jpt]);Vr(i),void 0===e||t.djt.Czt||await this.cUt(t,i)}catch(t){me(t)}}_Ut(){for(const t of this.sAt.Kjt)for(const i of t.nRt)i!==this.fUt&&void 0!==i.djt.YPt&&(i.djt.Czt?this.gUt(i):i.djt.sBt())}gUt(t){if(0!==t.djt.jnt.length){if(!this.fUt)return this.fUt=t,void this.fUt.djt.hBt(0,void 0);if(this.AUt(this.fUt),!this.AUt(t)&&void 0===t.djt.YPt){const i=this.yUt(t,this.fUt);wt.Xjt(qc,"Assuming global timeline offset of "+i+"s for rendition "+t.djt.Jpt+"."),t.djt.hBt(i,void 0)}}}yUt(t,i){if(gJ(t)){const e=t.djt.jnt[0],s=i.djt.jnt[0];return wt.Xjt(qc,"Synchronizing by start of VOD: "+s.MS+" vs "+e.MS),s.MS-e.qPt}const e=function(t,i){let e=t.length-1,s=i.length-1;for(;e>=0&&s>=0;){const n=t[e],r=i[s];if(n.yPt>r.yPt)e--;else if(n.yPt<r.yPt)s--;else if(n.vPt){if(r.vPt)return{segment:n,referenceSegment:r};s--}else e--}return}(t.djt.jnt,i.djt.jnt);if(void 0!==e){const{segment:t,referenceSegment:i}=e;return wt.Xjt(qc,"Synchronizing by start of discontinuity #"+i.yPt+": "+i.MS+" vs "+t.MS),i.MS-t.qPt}const s=vJ(t.djt.jnt);if(void 0!==s){const t=vJ(i.djt.jnt);if(void 0!==t){wt.Xjt(qc,"Synchronizing by PDT:",t.pPt.toISOString()+" vs "+s.pPt.getTime());return t.MS-s.qPt-(t.pPt.getTime()-s.pPt.getTime())/1e3}}const n=wJ(i),r=wJ(t);var o;const h=null!=(o=t.djt.YPt)?o:0;return wt.Xjt(qc,"Synchronizing by last segment:",n+" vs "+r),n-r+h}AUt(t){const i=this.sAt.FBt(t);if(!i)return!1;if(gJ(i))return!1;const e=function(t,i){return ru(t,(t=>void 0!==t.F7&&i.aBt(t.yPt)))}(i.djt.jnt,this.sAt.kT);if(void 0===e)return!1;if(i.djt.Fzt===e.yPt)return!0;const s=this.sAt.kT.vBt(e.F7,e).JS()-e.qPt;return wt.Xjt(qc,"Synchronize by media timestamp: "+s+"s for rendition "+t.djt.Jpt+"."),i.djt.hBt(s,e.yPt),(void 0===this.fUt||void 0===this.fUt.djt.Fzt||this.fUt.djt.Fzt<e.yPt)&&(this.fUt=i),!0}nUt(t,i){var e;(this.sAt.HPt(t,i),Uc(t)&&i)&&(this.iUt=i,this.Co(new fJ(i)),null==(e=this.dUt.get(i.Xw))||e.LL(),this.dUt.delete(i.Xw));this.Co(new Ro)}MUt(t,i){for(const e of this.sAt.Kjt){const s=bo(e.$jt,(t=>t.djt===i));void 0!==s&&void 0!==t.Akt&&(s.$nt=oK(s.$nt,t));const n=bo(e.Jjt,(t=>t.djt===i));void 0!==n&&void 0!==t.mkt&&(n.$nt=oK(n.$nt,t)),e.xPt||void 0===s&&void 0===n||(e.$nt=oK(e.$nt,t))}}bUt(t,i){for(const e of this.sAt.Kjt){const s=bo(e.$jt,(t=>t.djt===i));void 0!==s&&void 0===t.Akt&&e.zPt(s);const n=bo(e.Jjt,(t=>t.djt===i));void 0!==n&&void 0===t.mkt&&e.zPt(n)}}h_(){this.Vo(),this.sAt.h_(),this.dUt.forEach((t=>t.g_())),this.dUt.clear()}constructor(t,i,e,s,n){super(),this.aE=t,this.rut=i,this.xbt=e,this.KBt=!1,this.$Bt=!1,this.fUt=void 0,this.iUt=void 0,this.dUt=Gs(),this.sAt=new cJ(s,n)}};function gJ(t){return t.djt.bPt||t.djt.SPt===Jq.iPt}function wJ(t){const i=t.djt.jnt;return i[i.length-1].bS}function vJ(t){return ru(t,(t=>void 0!==t.pPt))}function mJ(t){if(void 0!==t.djt.VRt&&!t.djt.bPt&&!(void 0===t.djt.Ozt||ra.m_()/1e3-t.djt.Ozt>=t.djt.VRt/2))return t.djt.WRt?UK.uzt:UK.azt}var pJ,AJ=class{get nt(){return this.uvt}Kzt(t){if(0===t.djt.MPt.length)return;this.TUt||(this.TUt=this.Fm.rE(Qe.ZA,void 0,void 0,void 0,void 0,O.DATE_RANGE),this.uvt.tt(this.TUt));HK(this.TUt,t.djt.MPt,(i=>{var e;return null!=(e=t.djt.PPt(i))?e:NaN}))}constructor(t,i){this.SUt=t=>{this.Kzt(t.Mjt)},this.kSt=t,this.Fm=i,this.uvt=new iu,this.kSt.yn(ca.WBt,this.SUt)}},yJ=class extends Os{constructor(){super(gl.rjt)}},MJ=class{get NUt(){return this.i0}get O_(){return bh(this.xrt.O_,this.xrt.R0)}get jnt(){return this.ryt}get wvt(){return this.dvt}IUt(t){var i;return null==(i=this.DUt(t))?void 0:i.Mjt}slt(t){this.i0=t,this.EUt()}elt(t,i,e,s,n,r){this.ryt.push({Mjt:t,nut:i,kUt:Ri.rU(n,r),LUt:Ri.rU(e,s)}),this.EUt()}DUt(t){return bo(this.ryt,(i=>i.LUt.gr(t)))}Aat(t){return bo(this.ryt,(i=>i.nut===t))}Oct(t,i){return bo(this.ryt,(e=>e.Mjt===t&&rJ(e.nut,i)))}x0(){const t=this.O_;t.U>0&&(this.dvt=t.jn(t.U-1))}EUt(){const t=this.xrt.O_;this.ryt=this.ryt.filter((i=>0!==t.Sn(i.LUt).U))}constructor(t){this.xrt=t,this.ryt=[],this.i0=void 0,this.dvt=void 0}},bJ=class{get Av(){return this.z2}get xUt(){return this.z2===Jt.WA||this.z2===Jt.VA}get CUt(){return this.Vht}get OUt(){return this.jUt}get tEt(){return void 0!==this.RUt}PUt(){if(this.tEt)throw new g("Cannot perform new operation while BufferAppender is still busy")}Srt(t){this.xrt!==t&&(this.PUt(),this.xrt=t,this.Vht=new MJ(t))}zUt(){return this.RUt?this.RUt.OL:Promise.resolve()}BUt(t){const i=this.Vht.wvt;return void 0!==i&&this.UUt(t,i)}UUt(t,i){var e;const s=_.min(t,i);var n;return null!=(n=null==(e=this.Vht.O_.PB().VB(this.OUt).Jm(s))?void 0:e.gr(i))&&n}QUt(t){return this.Vht.IUt(t)}g_(){this.$O.g_(),this.$O=new Bd}X$(t){this.PUt(),this.RUt=new Oi;const i=i=>{this.YUt.FUt(t),this.GUt(i)};this.Z$(t,this.$O.f_).then(i,i)}async Z$(t,i){wt.Xjt(Yo,"Appending initializer",Ge(t.VUt.Jpt)),await this.xrt.X$(t,i),wt.Xjt(Yo,"Appended initializer",Ge(t.VUt.Jpt)),this.Vht.slt(t)}wlt(t){this.PUt(),this.RUt=new Oi;const i=i=>{this.YUt.FUt(t),this.GUt(i)};this.WUt(t,this.$O.f_).then(i,i)}async WUt(t,i){const e=t.Mjt;if(void 0===e.djt.uRt)throw new g("MediaBufferWrapper - Cannot append HLSAsset to "+this.z2+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.Vht.O_.LB,n=this.xrt.O_;wt.Xjt(Yo,"Appending",Ge(t.VUt.Jpt)),await this.xrt.V$(t,i),wt.Xjt(Yo,"Appended",Ge(t.VUt.Jpt),s,this.Vht.O_.LB);const r=t.MS,o=r+t.ct,h=t.VUt,a=h.MS;var u;const c=h.MS+(null!=(u=h.ct)?u:0);this.Vht.elt(e,h,r,o,a,c);const l=this.xrt.O_.VB(n),d=this.Vht.Oct(e,h);if(this.Av===Jt.VA)if(d)if(this.HUt(d))if(0===l.U){if(void 0===this.Vht.Aat(h)){const t=this.xrt.R0.Sn(new Ri([r,o]));this.jUt=this.jUt.YB(t)}}else{const t=l.Cn(0),i=new Ri([t,o]);if(this.jUt=this.jUt.VB(i),t>r){const i=this.xrt.R0.Sn(new Ri([r,t]));this.jUt=this.jUt.YB(i)}}else{const t=l.U>0&&l.Cn(0)<r?l.Cn(0):r;this.jUt=this.jUt.VB(new Ri([t,o]))}else if(0===l.U){const t=this.xrt.R0.Sn(new Ri([r,o]));this.jUt=this.jUt.YB(t)}else{var f;const t=l.Cn(0),i=null==(f=n.Jm(r))?void 0:f.jn(0),e=i&&i>r?i:r;if(t>e){const t=this.xrt.R0.Sn(new Ri([e,l.Cn(0)]));this.jUt=this.jUt.YB(t)}}t.VUt.GPt&&this.Vht.x0()}HUt(t){const i=t.LUt,e=i.Cn(0),s=i.jn(i.U-1),n=i.CB(0),r=i.jB(i.U-1);return this.jUt.HB(e,s,n,r)}constructor(t,i,e,s,n){this.RUt=void 0,this.$O=new Bd,this.jUt=Ri.oU(),this.GUt=t=>{this.RUt&&(t?fL(t)&&this.xUt?this.XUt.wX(this.xrt.O_.sU)?this.RUt.LL():this.RUt.xL(t):be(t)?this.RUt.LL():this.RUt.xL(t):this.RUt.LL(),this.RUt=void 0)},this.z2=t,this.YUt=e,this.xrt=i,this.Vht=s,this.XUt=n}},TJ=class{async ZUt(t,i,e,s){const n=await this.qUt(i,s);return await this.KUt.ZUt(t,n,e)}async qUt(t,i){var e;if((null==(e=this.JUt)?void 0:e.zu)!==t){wt.Xjt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const e=await this.aE.uD({zu:t,qD:Ft.SD,ZD:Cl.GET,f_:i,Av:li.jD,JD:fo.YD,tE:this.xbt}),s=await e.GR(),n=new j(s);this.JUt={zu:t,ly:n}}return this.JUt.ly}constructor(t,i,e){this.KUt=t,this.aE=i,this.xbt=e,this.JUt=void 0}},SJ=class{async uD(t,i,e,s,n){const r=await this.$Ut(t,i,e,Ft.SD,s,n),o=await r.GR(n);return{httpStatusCode:r.fD,response:new j(o)}}async tQt(t,i,e,s,n){return(await this.$Ut(t,i,e,Ft.DD,s,n)).VW(n)}async $Ut(t,i,e,s,n,r){let o;t.Dyt&&(o=iK(t.Dyt.Cn,t.Dyt.U),0===o[0]&&o[1]===pu&&(o=void 0));const h=o?{Range:"bytes="+o[0]+"-"+o[1]}:void 0,a=new Zi({zu:t.lT,qD:s,XD:h,tE:this.xbt,ZD:Cl.GET,Av:i,JD:e,$D:this.Nat,eE:s===Ft.DD,iE:n,f_:r});try{const i=await this.rut.mnt(t.lT,o);if(Vr(r),void 0!==i)return null==n||n(i.buffer.byteLength,i.buffer.byteLength),new Zk({uD:a,qD:a.qD,ly:i.buffer})}catch(t){me(t)}return await ev((()=>Jr(this.aE.uD(a),a.f_)),r,this.vet)}constructor(t,i,e,s,n=2){this.aE=t,this.rut=i,this.Nat=e,this.xbt=s,this.vet=n}},NJ=class{iQt(){return this.eQt.djt.GRt}async sQt(t,i,e){if(!this.iQt())throw new g("Could not perform blocking playlist update.");const s=this.nQt,n={$Rt:t,Gzt:i};return void 0!==s&&function(t,i,e){if(t.$Rt===i.$Rt){if(t.Gzt===i.Gzt)return!0;if(0===t.Gzt&&void 0===i.Gzt)return!0}if(t.$Rt===i.$Rt+1&&0===t.Gzt&&void 0!==i.Gzt){const t=e.Aat(i.$Rt);if(t&&t.Jpt&&i.Gzt>=t.wPt.length)return!0}return!1}(s,n,this.eQt.djt)||(await this.rQt(),this.oQt(n)),this.kSt.lUt(this.eQt,e)}hQt(t){return this.oQt(),this.kSt.lUt(this.eQt,t)}oQt(t){if(!this.aQt&&!this.uQt){const i=()=>{this.aQt=void 0};this.aQt=this.cQt(t,this.lQt.f_).then(i,i)}}async rQt(){this.aQt&&(this.lQt.g_(),this.lQt=new Bd,await this.aQt.catch(Br),this.aQt=void 0)}async cQt(t,i){let e=t;for(;;){if(Vr(i),this.eQt.djt.bPt&&this.eQt.djt.Czt)return;null!=e||(e=this.dQt()),this.nQt=e;try{if(e)await this.kSt.hUt(this.eQt,e.$Rt,e.Gzt,i);else{const t=ra.m_()-this.An,e=1e3*this.eQt.djt.jzt;t<e&&await Si(e-t,i),await this.kSt.cUt(this.eQt,i)}}catch(t){throw this.nQt=void 0,me(t),this.kSt.uUt(this.eQt),t}e=void 0,this.An=ra.m_()}}dQt(){const t=this.eQt.djt;if(!t.GRt||t.bPt||0===t.jnt.length)return;const i=t.jnt[t.jnt.length-1];return i.Jpt?{$Rt:i.$Rt+1,Gzt:t.xzt?0:void 0}:{$Rt:i.$Rt,Gzt:i.wPt.length}}h_(){this.uQt=!0,$r(this.rQt())}constructor(t,i){this.aQt=void 0,this.lQt=new Bd,this.An=-1/0,this.nQt=void 0,this.uQt=!1,this.kSt=t,this.eQt=i,this.oQt()}};!function(t){t[t.ePt=0]="ePt",t[t.sPt=1]="sPt",t[t.CD=2]="CD",t[t.OD=3]="OD"}(pJ||(pJ={}));var ui="AssetExtractor",IJ=class{fQt(t,i,e){let s=i;for(const i of this._Qt){if(s>=t)return!0;if(s<i.Cn)return!1;if(s<i.jn){if(e<=i.jn)return!0;s=i.jn}}return s>=t}gQt(t,i){const e=[];for(let s=0;s<this._Qt.length;s+=1){const n=this._Qt[s],r=t-n.Cn,o=n.ly.length,h=_.min(o,_.max(r,0)),a=_.max(0,i+r),u=tw(n.ly,h,a);u.length&&(s=this.wQt(s,n,t,h,a),e.push(u))}return e}vQt(t,i){this._Qt.push({Cn:t,jn:t+i.length,ly:i})}wQt(t,i,e,s,n){let r=t;this._Qt.splice(r,1),r-=1,i.Cn<e&&(r+=1,this._Qt.splice(r,0,{Cn:i.Cn,jn:e,ly:tw(i.ly,0,s)}));const o=e+n-s;return o<i.jn&&(r+=1,this._Qt.splice(r,0,{Cn:o,jn:i.jn,ly:tw(i.ly,n)})),r}constructor(){this._Qt=[]}},DJ=class{get mQt(){return this.pQt}async AQt(){const t=await this.YV.read();if(t.done)throw this.pQt=1/0,new g("No more data can be read from the given stream.");return this.pQt+=t.value.length,t.value}async yQt(t){await this.YV.cancel(t)}constructor(t,i){this.pQt=i,this.YV=t.getReader()}},EJ=class{MQt(){this.bQt.LL(),this.bQt=new Oi}TQt(t){const{Eyt:i,kyt:e}=LJ(this.KPt.Dyt),s=this.SQt.gQt(i,e-i);wt.Xjt(ui,"Collected "+s.length+" chunks.");for(const i of s)t.enqueue(i)}async readAndSliceOutAssetBytes(t){await this.NQt.OL;const{Eyt:i,kyt:e}=LJ(this.KPt.Dyt);try{for(;;){const s=this.YV.mQt,n=await this.YV.AQt(),r=n.length;wt.Xjt(ui,"Read "+r+" at "+s+" for extraction of "+Ge(this.KPt));const o=_.min(s+r,i)-s;if(!(o>0)){if(s+r<=e)return wt.Xjt(ui,"Extracting the read data range for extraction of "+Ge(this.KPt)),t.enqueue(n),this.MQt(),$r(this.readAndSliceOutAssetBytes(t));{const i=e-s,o=tw(n,0,i),h=tw(n,i);return o.length>0&&(wt.Xjt(ui,"Extracting "+o.length+" bytes for extraction of "+Ge(this.KPt)),t.enqueue(o)),wt.Xjt(ui,"Of the read "+r+" bytes, the last "+h.length+" will be stored locally for extraction of "+Ge(this.KPt)),this.SQt.vQt(s+i,h),wt.Xjt(ui,"Extraction of "+Ge(this.KPt)+" completed as the entire request has been fulfilled."),this.IQt(t),void(this.DQt&&(wt.Xjt(ui,"Aborting stream upstream as no more bytes are needed from "+Ge(this.KPt)+"."),await this.YV.yQt("AssetExtraction - AbortOnEnd")))}}{const i=tw(n,0,o),e=tw(n,o);if(wt.Xjt(ui,"Of the read "+r+" bytes, the first "+o+" will be stored locally for extraction of "+Ge(this.KPt)),this.SQt.vQt(s,i),e.length>0)return wt.Xjt(ui,"Extracting "+e.length+" bytes for extraction of "+Ge(this.KPt)),t.enqueue(e),this.MQt(),$r(this.readAndSliceOutAssetBytes(t))}}}catch(i){wt.Xjt(ui,"Extraction of "+Ge(this.KPt)+" completed as the entire source stream has been read."),this.IQt(t)}}IQt(t){t.close(),this.MQt(),this.EQt.LL()}start(t){wt.Xjt(ui,"Preparing to push all collected data to controller for extraction of "+Ge(this.KPt)),this.TQt(t),wt.Xjt(ui,"Collected data pushed to controller for extraction of "+Ge(this.KPt));const{kyt:i}=LJ(this.KPt.Dyt);this.YV.mQt>=i?(wt.Xjt(ui,"Extraction of "+Ge(this.KPt)+" completed as the entire request has been fulfilled."),this.IQt(t)):(wt.Xjt(ui,"Continuing read from original stream for extraction of "+Ge(this.KPt)),$r(this.readAndSliceOutAssetBytes(t)))}get kQt(){return this.EQt.OL}pull(){return this.NQt.LL(),this.NQt=new Oi,this.bQt.OL}constructor(t,i,e,s){this.EQt=new Oi,this.KPt=t,this.YV=i,this.SQt=e,this.DQt=s,this.NQt=new Oi,this.bQt=new Oi}},kJ=class{oS(t){if(!sK(this.KPt,t))return!1;const{Eyt:i,kyt:e}=LJ(t.Dyt);return this.SQt.fQt(this.LQt.mQt,i,e)}async Swt(t,i){void 0===i&&(i=!1);const e=this.LQt,s=this.SQt;if(wt.IM(ui,"Extracting data from "+Ge(t)+" out of "+Ge(this.KPt)),this.xQt&&(wt.Xjt(ui,"Awaiting previous extraction before extracting "+Ge(t)+" out of "+Ge(this.KPt)),await this.xQt),!this.oS(t))throw new g("The extractor does not contain the data requested");const n=new EJ(t,e,s,i);return this.xQt=n.kQt,new Ei(n)}constructor(t,i){this.KPt=i;const{Eyt:e}=LJ(this.KPt.Dyt);this.LQt=new DJ(t,e),this.SQt=new IJ}};function LJ(t){if(t){const i=t.Cn;return{Eyt:i,kyt:void 0!==t.U?i+t.U:pu}}return{Eyt:0,kyt:pu}}var xJ=class{async $n(){const t=await this.CQt.tQt(this.KPt,li.OD,fo.jT,void 0,this.$O.f_);return new kJ(t,this.KPt)}oS(t){return sK(this.KPt,t)}async Swt(t,i){void 0===i&&(i=!1);const e=await this.Cvt;return await Jr(e.Swt(t,i),this.$O.f_)}g_(){this.Cvt.catch(Br),this.$O.g_()}constructor(t,i){this.KPt=t,this.CQt=i,this.$O=new Bd,this.Cvt=this.$n()}},CJ=class extends Os{constructor(t){super(Wh.OQt),this.$D=t}},OJ=class extends Os{constructor(t,i,e,s,n,r,o){super(Wh.jQt),this.uri=t,this.RQt=i,this.$D=e,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.PQt=r,this.httpStatusCode=o}};function jJ(t,i,e){const s=ha(e)?e:e.WPt;if(i.aBt(s.yPt)){if(void 0!==e.F7)return i.vBt(e.F7,e).JS();if(e!==s&&void 0!==s.F7){const t=i.vBt(s.F7,s).JS();return e.MS+(t-s.MS)}}const n=t.djt.Aat(s.$Rt-1);if(void 0!==n&&i.aBt(n.yPt)){if(n.wPt.length>0){const t=n.ezt(n.wPt.length-1);if(void 0!==t.F7){const s=i.vBt(t.F7,t).JS();return e.MS+(s-t.MS)}}if(void 0!==n.F7){const t=i.vBt(n.F7,n).JS();return e.MS+(t-n.MS)}}const r=t.djt.Aat(s.$Rt+1);if(void 0!==r&&i.aBt(r.yPt)){if(r.wPt.length>0){const t=r.ezt(0);if(void 0!==t.F7){const s=i.vBt(t.F7,t).JS();return e.MS+(s-t.MS)}}if(void 0!==r.F7){const t=i.vBt(r.F7,r).JS();return e.MS+(t-r.MS)}}return e.MS}function RJ(t){return void 0!==t.F7}function PJ(t,i,e,s){for(let n=i;n<t.length;n++){const i=t[n];if(i.yPt!==e)break;if(RJ(i)){if(s(i,n))break}}}function zJ(t,i,e,s){for(let n=i;n>=0;n--){const i=t[n];if(i.yPt!==e)break;if(RJ(i)){if(s(i,n))break}}}var Wh,BJ="HlsPlaylistDownloader";!function(t){t.OQt="segmentdownloadprogress",t.jQt="segmentdownloaded"}(Wh||(Wh={}));var UJ=class extends Mo{zQt(t){this.BQt.h_(),this.BQt=new NJ(this.kSt,t),this.tEt?this.UQt=t:(this.eQt=t,this.QQt=0,this.FQt=void 0,this.YQt=void 0)}get tEt(){return void 0!==this.GQt}zUt(){return this.GQt?this.GQt.OL:Promise.resolve()}VQt(){return this.YUt.VQt()}WQt(t){this.YUt.WQt(t)}g_(){var t,i,e;this.HQt.g_(),this.HQt=new Bd,null==(t=this.XQt)||t.g_(),this.XQt=void 0,null==(i=this.ZQt)||i.g_(),null==(e=this.qQt)||e.g_(),this.ZQt=void 0,this.qQt=void 0,this.QQt=0,this.FQt=void 0,this.YQt=void 0}h_(){this.BQt.h_()}get Mjt(){var t;return null!=(t=this.UQt)?t:this.eQt}get SEt(){if(!this.eQt.djt.bPt||void 0===this.FQt)return!1;const t=this.eQt.djt.Aat(this.FQt);if(!t.GPt)return!1;if(void 0!==this.YQt){if(!t.ezt(this.YQt).GPt)return!1}return!0}KQt(t){const i=this.eQt.djt.Vzt(t);if(!i)return!1;if(void 0!==this.FQt){const e=i.$Rt===this.FQt;return void 0!==this.YQt?i.szt(t)===i.ezt(this.YQt)&&e:e}return!1}JQt(t){let i;if(void 0===this.FQt||t<this.QQt-1e-6)i=this.$Qt(t);else if(i=this.tFt(this.FQt,this.YQt),void 0!==i){const[e,s]=i,n=jJ(this.eQt,this.kSt.Tr.kT,null!=s?s:e),r=3*this.eQt.djt.uRt;_.abs(n-t)>=r&&(i=this.$Qt(t))}else if(this.eQt.djt.bPt){if(this.eQt.djt.Aat(this.FQt).GPt&&(i=this.$Qt(t),void 0!==i&&i[0].$Rt===this.FQt))return}if(i){this.QQt=t;const[e,s]=i;return 0===(null==s?void 0:s.XPt)&&void 0!==e.ct?[e,void 0]:[e,s]}}$Qt(t){let i,e;const s=this.eQt.djt.jnt;if(0===s.length)return;const n=this.kSt.Tr.kT,r=A.$N(t),o=function(t,i,e){const s=t.djt.jnt;if(0===s.length)return;const n=t.djt.Wzt(e.JS());if(!i.aBt(n.yPt))return;const r=n.$Rt-s[0].$Rt,o=n.yPt;let h,a,u,c=0;if(zJ(s,r,o,((t,i)=>(h=t,c=i,!0))),void 0===h&&(PJ(s,r+1,o,((t,i)=>(h=t,c=i,!0))),void 0===h))return;return i.vBt(h.F7,h).sN(e)?(a=h,PJ(s,c+1,o,(t=>i.vBt(t.F7,t).$S(e)?(u=t,!0):(a=t,!1)))):(u=h,zJ(s,c-1,o,(t=>i.vBt(t.F7,t).sN(e)?(a=t,!0):(u=t,!1)))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.eQt,n,r);let h;if(void 0!==o){const[t,i]=o,e=n.vBt(t.F7,t),s=n.vBt(i.F7,i),a=r.uN(e).JS()/s.uN(e).JS()*(i.MS-t.MS);h=t.MS+a}else h=t;const a=s[s.length-1];return a.bS<=h?(i=a,e=a.rzt(h)):s[0].MS>h?(i=s[0],e=i.ezt(0)):(i=this.eQt.djt.Vzt(h),e=null==i?void 0:i.rzt(h)),i?[i,e]:void 0}tFt(t,i){let e,s;if(e=this.eQt.djt.Aat(t),e&&void 0!==i){if(0===e.wPt.length)return[e,void 0];s=e.ezt(i+1)}return void 0!==e&&void 0!==s||(e=this.eQt.djt.Aat(t+1),s=null==e?void 0:e.ezt(0)),e?[e,s]:void 0}PUt(){if(this.tEt)throw new g("Cannot perform new operation while PlaylistDownloader is still busy")}iFt(t){this.PUt(),this.GQt=new Oi,this.eFt(t,this.HQt.f_).then(this.sFt,this.sFt)}nFt(){this.BQt.oQt()}async eFt(t,i){if(this.eQt.djt.bPt)return;let e=this.JQt(t);for(!e&&this.BQt.iQt()&&void 0!==this.FQt&&(await this.BQt.sQt(void 0===this.YQt?this.FQt+1:this.FQt,void 0!==this.YQt?this.YQt+1:void 0,i),e=this.JQt(t)),!e&&this.BQt.iQt()&&void 0!==this.FQt&&(await this.BQt.sQt(this.FQt+1,0,i),e=this.JQt(t));!e;){wt.IM(BJ,"No next segment / part available, need to update playlist before continuing."),await this.BQt.hQt(i);const s=this.Mjt.djt.jnt;s[0].MS>t&&(this.YQt=void 0,this.FQt=void 0);s[s.length-1].$Rt<this.FQt&&(this.YQt=void 0,this.FQt=void 0),e=this.JQt(t)}}rFt(){return this.YUt.oFt()}hFt(){this.PUt();try{const t=this.eQt.djt.Hzt(us.ePt);t&&this.aFt(t);const i=this.eQt.djt.Hzt(us.sPt);i&&this.uFt(i)}catch(t){throw me(t),this.eQt.djt.Uzt=ra.m_(),this.kSt.uUt(this.eQt),t}}aFt(t){this.qQt&&!this.qQt.oS(t.Jpt)&&(this.qQt.g_(),this.qQt=void 0),this.qQt||(this.qQt=new xJ(t.Jpt,this.CQt))}uFt(t){this.ZQt&&!this.ZQt.oS(t.Jpt)&&(this.ZQt.g_(),this.ZQt=void 0),this.ZQt||(this.ZQt=new xJ(t.Jpt,this.CQt))}pat(t,i,e){this.PUt(),wt.IM(BJ,"Starting download of segment "+Ge(t.Jpt)+" and part "+(null==i?void 0:i.XPt)),this.GQt=new Oi,this.cFt(t,i,e,this.HQt.f_).catch((t=>{throw me(t),this.eQt.djt.Uzt=ra.m_(),this.kSt.uUt(this.eQt),t})).then(this.sFt,this.sFt)}async cFt(t,i,e,s){let n;if(t.mPt){var r,o;if(!e||!nK(e.VUt.Jpt,null==(r=t.mPt)?void 0:r.Jpt)||t.yPt!==e.yPt){var h;null==(h=this.XQt)||h.g_(),this.XQt=new Oi;const i=this.lFt(t.mPt,t,s).then((()=>{this.XQt=void 0}));this.XQt.w_(i)}n=null==(o=this.XQt)?void 0:o.OL}await this.dFt(t,i,n,s)}async lFt(t,i,e){const s=await this.fFt(t,i,e),n=s.mPt.ly.ly.byteLength;this.YUt._Ft(s),this.Co(new OJ(s.mPt.VUt.Jpt,s.Av,this.z2,i.$Rt,s.Mjt.Xw,n,s.mPt.Eut)),wt.Xjt(Yo,"Download initializer complete",Ge(t.Jpt))}async dFt(t,i,e,s){const n=await this.gFt(t,i,s),r=n.nut.ly.ly.byteLength;var o;e&&await Jr(e,s),this.YUt._Ft(n),this.Co(new OJ(n.nut.VUt.Jpt,n.Av,this.z2,t.$Rt,n.Mjt.Xw,r,n.nut.Eut)),wt.Xjt(Yo,"Download complete",Ge(null!=(o=null==i?void 0:i.Jpt)?o:t.Jpt))}async gFt(t,i,e){let s;if(i){if(this.ZQt)if(this.ZQt.oS(i.Jpt)){const t=await this.ZQt.Swt(i.Jpt),n=await co(t,e),r=new j(n);s=FJ(i,await this.ZUt(r,i.fPt,e),200)}else this.ZQt.g_(),this.ZQt=void 0;s||(wt.Xjt(Yo,"Start download",Ge(i.Jpt)),s=await this.wFt(i,e))}else wt.Xjt(Yo,"Start download",Ge(t.Jpt)),s=await this.Mat(t,e);return this.FQt=t.$Rt,this.YQt=null==i?void 0:i.XPt,{Av:"nut",nut:s,Mjt:this.eQt,yPt:t.yPt}}async fFt(t,i,e){let s;if(this.qQt){var n;if(this.qQt.oS(t.Jpt)){const n=await Jr(this.qQt.Swt(t.Jpt),e),r=await co(n,e),o=new j(r);s=QJ(t,i,await this.ZUt(o,t.gPt?[t.gPt]:[],e),200)}wt.IM(BJ,"MAP is required for segment, downloading MAP data."),null==(n=this.qQt)||n.g_(),this.qQt=void 0}return s||(wt.Xjt(Yo,"Start download",Ge(t.Jpt)),s=await this.vFt(t,i,e)),{Av:"mPt",mPt:s,Mjt:this.eQt,MS:i.MS,yPt:i.yPt,fPt:i.fPt}}async vFt(t,i,e){const{response:s,httpStatusCode:n}=await this.CQt.uD(t.Jpt,li.CD,fo.RD,void 0,e),r=t.gPt?[t.gPt]:[];return QJ(t,i,await this.ZUt(s,r,e),n)}async Mat(t,i){if(!t.Jpt)throw new g("Internal error: attempted to download an incomplete segment");let e,s;try{this.mFt(t);const n=await this.CQt.uD(t.Jpt,li.CD,fo.jT,this.pFt,i);e=n.response,s=n.httpStatusCode}finally{this.AFt()}return function(t,i,e){return{ly:{ly:i,Av:Lu.jZ},Av:pJ.CD,Eut:e,VUt:t,yPt:t.yPt}}(t,await this.ZUt(e,t.fPt,i),s)}async wFt(t,i){let e,s;try{this.mFt(t);const n=await this.CQt.uD(t.Jpt,li.CD,fo.jT,this.pFt,i);e=n.response,s=n.httpStatusCode}finally{this.AFt()}return FJ(t,await this.ZUt(e,t.fPt,i),s)}async ZUt(t,i,e){const s=bo(i,(t=>t.ZD===Sc.BRt));return s?s.Jpt&&s.URt?await this.yFt.ZUt(t,s.Jpt,s.URt,e):(wt.lt(BJ,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}mFt(t){var i,e,s;this.MFt=t,this.bFt=0,this.TFt=ra.m_(),this.SFt=0,this.NFt=null!=(s=null==(e=t.Jpt)||null==(i=e.Dyt)?void 0:i.U)?s:0}AFt(){this.MFt=void 0,this.bFt=0,this.TFt=0,this.SFt=0,this.NFt=0}IFt(){if(void 0!==this.MFt)return{nut:this.MFt,DFt:this.SFt,EFt:this.NFt,kFt:ra.m_()-this.TFt}}LFt(t){return void 0!==this.MFt&&(0!==this.bFt&&(!(this.NFt>0&&this.SFt>=this.NFt)&&!(t-this.bFt<500)))}constructor(t,i,e,s,n,r,o,h){super(),this.UQt=void 0,this.GQt=void 0,this.MFt=void 0,this.bFt=0,this.TFt=0,this.SFt=0,this.NFt=0,this.HQt=new Bd,this.XQt=void 0,this.QQt=0,this.FQt=void 0,this.YQt=void 0,this.qQt=void 0,this.ZQt=void 0,this.sFt=t=>{this.UQt&&(this.eQt=this.UQt,this.UQt=void 0,this.QQt=0,this.FQt=void 0,this.YQt=void 0),this.GQt&&(t&&!be(t)?this.GQt.xL(t):this.GQt.LL(),this.GQt=void 0)},this.pFt=(t,i)=>{this.SFt=t,t>0&&0===this.bFt&&(this.bFt=ra.m_()),void 0!==i&&(this.NFt=i),this.Co(new CJ(this.z2))},this.z2=t,this.kSt=e,this.YUt=s,this.eQt=i,this.BQt=new NJ(e,i),this.yFt=new TJ(o,n,h),this.CQt=new SJ(n,r,function(t){switch(t){case Ee.VA:return Bu.VA;case Ee.WA:return Bu.WA;case Ee.HA:case Ee.kRt:return Bu.Ru;default:return Bu.jT}}(i.Av),h)}};function QJ(t,i,e,s){return{ly:{ly:e,Av:Lu.jZ},Av:pJ.ePt,Eut:s,VUt:t,yPt:i.yPt}}function FJ(t,i,e){return{ly:{ly:i,Av:Lu.jZ},Eut:e,Av:pJ.sPt,VUt:t,yPt:t.WPt.yPt}}var kl,YJ=class{get NUt(){return this.xFt}get CFt(){const t=[];for(const e of this.OFt)if("nut"===e.Av){const s=e.nut.VUt,n=jJ(e.Mjt,this.OBt,s);var i;t.push({nut:s,Mjt:e.Mjt,MS:n,bS:n+(null!=(i=s.ct)?i:0)})}return t}get jFt(){const t=[];return this.RFt.forEach((i=>{for(const e of i.PFt)"nut"===e.Av&&t.push({nut:e.VUt,Mjt:e.Mjt,MS:e.MS,bS:e.MS+e.ct})})),t}_Ft(t){"mPt"===t.Av&&(this.xFt=t.mPt),this.OFt.push(t),this.zFt&&(this.zFt.LL(),this.zFt=void 0)}VQt(){return this.OFt[0]}WQt(t){jn(this.OFt,t)}oFt(){return null!=this.zFt||(this.zFt=new Oi),this.zFt.OL}BFt(t){this.UFt(t.Zht).BFt(t)}QFt(t){return this.UFt(t).QFt()}FUt(t){this.UFt(t.Zht).FUt(t)}FFt(t){var i;null==(i=this.RFt.get(t))||i.h_()}YFt(t){return this.UFt(t).YFt()}UFt(t){if(this.RFt.has(t))return this.RFt.get(t);{const i=new GJ;return this.RFt.set(t,i),i}}kL(){this.GFt(),this.VFt()}GFt(){this.xFt=void 0,To(this.OFt)}VFt(){this.RFt.forEach((t=>t.kL()))}h_(){this.RFt.forEach((t=>t.h_())),this.RFt.clear(),this.kL(),this.zFt&&(this.zFt.g_(),this.zFt=void 0)}constructor(t){this.OFt=[],this.RFt=Pu(),this.zFt=void 0,this.xFt=void 0,this.OBt=t}},GJ=class{get PFt(){return this.WFt}BFt(t){this.WFt.push(t),this.HFt&&(this.HFt.LL(),this.HFt=void 0)}QFt(){return this.WFt[0]}FUt(t){jn(this.WFt,t)}YFt(){return null!=this.HFt||(this.HFt=new Oi),this.HFt.OL}kL(){To(this.WFt)}h_(){this.kL(),this.HFt&&(this.HFt.g_(),this.HFt=void 0)}constructor(){this.WFt=[],this.HFt=void 0}},VJ=1e-6,WJ=class{get O_(){return this.QNt}get R0(){return this.FNt}async X$(t,i){const e=t.ly.ly;if(this.XFt(e),this.ZFt.Av===O.TTML){this.OBt.aBt(t.yPt)||await Jr(this.OBt.cBt(t.yPt),i);const s=this.qFt(e,t.yPt);for(const t of s)this.ZFt.lE(t)}}async V$(t,i){if(void 0===t.ly)return;const e=t.MS,s=e+t.ct;this.QNt=this.QNt.YB(Ri.rU(e,s)).FB(VJ),this.B0(t.KFt,t.JFt),this.U0(e,s),this.OBt.aBt(t.yPt)||await Jr(this.OBt.cBt(t.yPt),i),this.H$(t.ly.ly,t.yPt,t.VUt)}H$(t,i,e){let s;this.XFt(t),s=this.ZFt.Av===O.WEBVTT?this.$Ft(t,e):this.qFt(t,i);for(const t of s)this.ZFt.lE(t)}$Ft(t,i){const e=dm(t),s=e.L;var n;const r=null!=(n=e.MI)?n:{bI:A.wN,lh:A.wN};for(const t of s){const e=A.$N(t.MS).uN(r.lh).nS(r.bI),s=this.OBt.vBt(e,i).JS(),n=s+(t.bS-t.MS);t.YS(s,n)}return s}qFt(t,i){const e=this.OBt.wBt(i).JS();return ip(t,this.ZFt,{vI:0,mI:1/0,pI:e},la.APPLICATION_MP4)}XFt(t){this.ZFt.Av===O.DEFAULT&&(this.ZFt.Av=this.tYt(t)?O.WEBVTT:O.TTML)}tYt(t){return bm(ac(Jg(vh(t),0,_.min(t.byteLength,16)),new Bi))}B0(t,i){this.FNt=this.FNt.YB(Ri.rU(t,i)).FB(VJ)}U0(t,i){this.FNt=this.FNt.VB(Ri.rU(t,i))}constructor(t,i){this.QNt=Ri.oU(),this.FNt=Ri.oU(),this.ZFt=t,this.OBt=i}},HJ=class extends Os{constructor(t,i){super(kl.iYt),this.Mjt=t,this.$nt=i}},XJ=class extends Os{constructor(t){super(kl.eYt),this.Mjt=t}},ZJ=class extends Os{constructor(t,i){super(kl.sYt),this.Mjt=t,this.Adt=i}},qJ=class extends Os{constructor(t,i){super(kl.nYt),this.Mjt=t,this.rYt=i}};!function(t){t.iYt="oYt",t.sYt="hYt",t.nYt="aYt",t.eYt="uYt"}(kl||(kl={}));var KJ=class extends Mo{get cYt(){return this.lYt}dYt(t){for(const i of this.lYt)Ai(t,i)||this.YUt.FFt(i);this.lYt=t}get tEt(){return void 0!==this.fYt}zUt(){var t,i;return null!=(i=null==(t=this.fYt)?void 0:t.OL)?i:Promise.resolve()}PUt(){if(this.tEt)throw new g("Cannot perform new operation while transmuxer is still busy")}_Yt(t,i){}gYt(t){this.PUt(),this.fYt=new Oi;const i=i=>{this.wYt(t,i)};this.vYt(t,this.$O.f_).then(i,i)}mYt(t){this.PUt(),this.fYt=new Oi;const i=i=>{this.wYt(t,i)};this.pYt(t,this.$O.f_).then(i,i)}wYt(t,i){this.fYt&&(!i||be(i)||function(t){return t instanceof oJ}(i)?(be(i)||this.YUt.WQt(t),this.fYt.LL(),this.fYt=void 0):this.fYt.xL(i))}AYt(t,i){this.Co(new HJ(t,i))}yYt(t,i){this.Co(new ZJ(t,i))}MYt(t,i,e){nJ(i)&&this.Co(new qJ(t,e))}bYt(t){this.Co(new XJ(t))}BFt(t){Ai(this.lYt,t.Zht)&&this.YUt.BFt(t)}TYt(t){return this.YUt.QFt(t)}FUt(t){this.YUt.FUt(t)}SYt(t){return this.YUt.YFt(t)}g_(){this.$O.g_(),this.$O=new Bd}constructor(t,i,e){super(),this.fYt=void 0,this.$O=new Bd,this.YUt=t,this.OBt=i,this.lYt=e}};function JJ(t,i){return nJ(t)?0:_.min(t.MS,i)}function $J(t,i){var e;return _.max(t.MS,i)+(null!=(e=t.ct)?e:0)}var t$=class extends KJ{vYt(t,i){Vr(i);const e={Av:"PEt",ly:t.mPt.ly,Zht:this.cYt[0],yPt:t.yPt,NYt:{$nt:"",fPt:t.fPt},MS:t.MS,Mjt:t.Mjt,VUt:t.mPt.VUt};return this.BFt(e),Promise.resolve()}async pYt(t,i){Vr(i);const e=t.nut.VUt;let s;void 0!==e.F7?(this.OBt.aBt(t.yPt)||await Jr(this.OBt.cBt(t.yPt),i),s=this.OBt.vBt(e.F7,e).JS()):s=e.MS;const n=JJ(e,s),r=$J(e,n);var o;const h={Av:"nut",ly:t.nut.ly,Zht:this.cYt[0],KFt:n,JFt:r,MS:s,ct:null!=(o=e.ct)?o:0,pI:0,yPt:t.yPt,Mjt:t.Mjt,VUt:t.nut.VUt};this.BFt(h)}constructor(t,i,e){super(t,i,[e])}};function i$(t,i){let e=Ri.oU();for(const s of t){let n=s.MS;if(s.Mjt.djt.bPt&&nJ(s.nut))n=0;else{const e=t=>s.Mjt===t.Mjt&&rJ(t.nut,s.nut),r=bo(t,e);if(void 0!==r)n=_.min(n,r.bS);else{const t=bo(i,e);void 0!==t&&(n=_.min(n,t.LUt.jn(0)))}}e=e.YB(Ri.rU(n,s.bS))}return e}var e$=.001,s$=class{get IYt(){return this.DYt}get Mjt(){return this.EYt.Mjt}zQt(t){this.EYt.zQt(t)}get tEt(){return this.EYt.tEt||this.kYt.tEt||this.DYt.some((t=>t.tEt))}LYt(t){const i=t.slice();for(let t=this.DYt.length-1;t>=0;t--){const e=this.DYt[t];if(!e.xUt)throw new g("Invalid state");const s=gt(i,(t=>t.Av===e.Av));s>=0?(e.Srt(i[s]),Ns(i,s)):Ns(this.DYt,t)}for(const t of i){const i=new MJ(t);this.DYt.push(new bJ(t.Av,t,this.xYt,i,this))}i.length>0&&this.xYt.kL();const e=t.map((t=>t.Av));this.kYt.dYt(e)}wX(t){var i;const e=(null==(i=this.wU)?void 0:i.wX(t))||!1;return e&&(this.g_(),this.xYt.kL()),e}CYt(t){for(const t of this.DYt)if(t.Av!==Jt.Ru||t.tEt)throw new g("Invalid state");const i=new MJ(t),e=new bJ(Jt.Ru,t,this.xYt,i,this);this.DYt=[e]}get NUt(){const t=this.xYt.NUt;if(t)return t;if(this.DYt.length>0){const t=this.DYt[0].CUt.NUt;if(t&&this.DYt.every((i=>i.CUt.NUt===t)))return t}}vat(){for(const t of this.DYt)t.CUt.EUt()}get OYt(){if(0===this.DYt.length)return Ri.oU();const t=i$(this.xYt.CFt.concat(this.xYt.jFt),Pe(this.DYt,(t=>t.CUt.jnt))).PB();let i=new Ri([0,1/0]);for(const t of this.DYt)i=i.Sn(t.CUt.O_);for(const t of this.DYt)i=i.VB(t.OUt);return i=i.YB(t),i.FB(e$)}get jYt(){if(0===this.DYt.length)return Ri.oU();const t=i$(this.xYt.jFt,Pe(this.DYt,(t=>t.CUt.jnt))).PB();let i=new Ri([0,1/0]);for(const t of this.DYt)i=i.Sn(t.CUt.O_);return i=i.YB(t),i}dlt(t){const i=this.OYt.Jm(t,e$);return i?i.jn(i.U-1):t}KQt(t){return!!this.OYt.Jm(t,e$)||this.EYt.KQt(t)}RYt(t){return this.jYt.gr(t,e$)}PYt(t,i,e){for(const t of this.DYt){const e=t.CUt,s=e.wvt;if(void 0!==s&&i>=s&&!e.O_.PB().gr(s))return!0}return i-t<e}g_(){this.zYt(),this.BYt()}zYt(){this.EYt.g_()}BYt(){this.kYt.g_(),this.IYt.forEach((t=>t.g_()))}h_(){this.g_(),this.EYt.h_()}constructor(t,i,e,s){this.EYt=t,this.xYt=i,this.kYt=e,this.wU=s,this.DYt=[]}};var n$=class extends Os{constructor(){super(gl.ajt)}},r$=class extends Os{constructor(){super(gl.ojt)}},o$="LazyMediaBuffer",h$=class extends Mo{get Nz(){return this.BO}get O0(){return this.z2}get wd(){if(!this.xrt)throw new ao(qa.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.xrt.wd}get iX(){return this.cX}set iX(t){this.cX=t,this.xrt&&(this.xrt.iX=t)}oq(){return this.xrt?this.xrt.oq():this.UYt}get O_(){return this.xrt?this.xrt.O_:Ri.oU()}get R0(){return this.xrt?this.xrt.R0:this.P0.wq}get rX(){return this.fX}set rX(t){this.fX=t,this.xrt&&(this.xrt.rX=t)}B0(t,i){wt.Xjt(o$,"Marking gap from "+t+" to "+i+"."),this.P0.mq(t,i),this.xrt&&this.xrt.B0(t,i)}U0(t,i){wt.Xjt(o$,"Removing gap from "+t+" to "+i+"."),this.P0.pq(t,i),this.xrt&&this.xrt.U0(t,i)}QYt(t){this.xrt=t,this.xrt.rX=this.fX,this.xrt.iX=this.cX;const i=this.P0.wq;for(let t=0;t<i.U;t++)this.xrt.B0(i.Cn(t),i.jn(t));var e;this.UYt&&(wt.Xjt(o$,"End of stream"),null==(e=this.xrt)||e.x0());this.xrt.yn(In.CZ,this.Ds),this.FYt.LL(t)}YYt(t){return Jr(this.FYt.OL,t)}async V$(t,i,e){const s=await this.YYt(e);await s.V$(t,i,e)}async Q0(){const t=await this.YYt();await t.Q0()}async X$(t,i,e){const s=await this.YYt(e);await s.X$(t,i,e)}async rS(t,i,e){const s=await this.YYt(e);await s.rS(t,i,e)}async u0(t,i){const e=await this.YYt();await e.u0(t,i)}x0(){this.UYt=!0,this.xrt&&this.xrt.x0()}FZ(t){return!!this.xrt&&this.xrt.FZ(t)}async GZ(t){const i=await this.YYt();await i.GZ(t)}async gn(){var t;this.Vo(),null==(t=this.xrt)||t.fn(In.CZ,this.Ds)}constructor(t,i){super(),this.z2=t,this.GYt=i,this.BO=void 0,this.xrt=void 0,this.FYt=new Oi,this.cX=20,this.UYt=!1,this.fX=30,this.P0=new ex}},a$="LazyMediaSource",u$=class{get wd(){return{Av:de.Sj,F1:[],Iz:[]}}get I1(){return this.VYt}get D1(){return this.WYt}get O_(){return this.yz?this.yz.O_:Ri.oU()}get ct(){return this.yz?this.yz.ct:this.jx}get oq(){return!!this.yz&&this.yz.oq}get Ig(){return this.yz?this.yz.Ig:new Ri([0,1/0])}P1(t){this.jx=t,this.yz&&this.yz.P1(t)}x0(){this.B7=!0,this.yz&&this.yz.x0()}M0(){this.B7=!1,this.yz&&this.yz.M0()}Q1(t,i,e,s){this.HYt=t,this.XYt=i,this.ZYt=Boolean(e),this.qYt=Boolean(s),this.yz&&this.yz.Q1(t,i,e,s)}FZ(t){return!this.yz||this.yz.FZ(t)}async GZ(t){if(!this.FZ(t))throw new g("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.yz)await this.yz.GZ(t);else{var i,e;this.Fm.z6();const s=await this.Fm.$n(t);S(this.jx)||s.P1(this.jx),this.B7&&s.x0(),s.Q1(this.HYt,this.XYt,this.ZYt,this.qYt),wt.Xjt(a$,"The MediaSource has been loaded."),this.KYt=!0,this.yz=s,null==(i=this.VYt)||i.QYt(this.yz.I1),null==(e=this.WYt)||e.QYt(this.yz.D1),this.JYt.LL(s),this.Fm.B6()}}async h_(){this.yz&&await this.yz.h_()}constructor(t,i,e){this.Fm=t,this.VYt=void 0,this.WYt=void 0,this.JYt=new Oi,this.yz=void 0,this.KYt=!1,this.jx=NaN,this.B7=!1,this.HYt=0,this.XYt=1/0,this.ZYt=!1,this.qYt=!1,i&&(wt.Xjt(a$,"Created lazy media buffer for audio."),this.VYt=new h$(Jt.WA,this)),e&&(wt.Xjt(a$,"Created lazy media buffer for video."),this.WYt=new h$(Jt.VA,this))}};function c$(t,i){return void 0===i&&(i=!1),function(e,s){void 0===s&&(s="*");let n=d$(e,"tag");const r=d$(null==s?"*":s,"range"),o=[];let h,a,u,c=-1;for(;++c<r.length;)if(h=r[c].toLowerCase(),i||"*"!==h){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),h)){if(!i)return n[a];o.push(n[a])}else u.push(n[a]);n=u}return i?o:void 0}}c$(((t,i)=>"*"===i||t===i||$i(t,i+"-")),!0),c$(((t,i)=>{const e=t.split("-"),s=i.split("-");let n=0,r=0;if("*"!==s[r]&&e[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!e[n])return!1;if(e[n]!==s[r]){if(1===e[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var l$=c$(((t,i)=>{let e,s=i;for(;;){if("*"===s||t===s)return!0;if(e=s.lastIndexOf("-"),e<0)return!1;"-"===s.charAt(e-2)&&(e-=2),s=s.slice(0,e)}}));function d$(t,i){const e=t&&"string"==typeof t?[t]:t;if(!e||"object"!=typeof e||!("length"in e))throw new g("Invalid "+i+" `"+e+"`, expected non-empty string");return e}var f$,_$=16384,g$=71,w$=188,v$=2,m$=3;function p$(t){return A$(t)?1:function(t){return function(t){if(t.length<v$*w$)return-1;const i=t.length<m$*w$?v$:m$,e=_.min(1e3,t.length-i*w$);for(let s=0;s<=e;s++){let e=!0;for(let n=0;n<i;n++)if(t[s+n*w$]!==g$){e=!1;break}if(e)return s}return-1}(t)>=0}(t)?2:function(t){return null!==LO(vh(t),new Bi)}(t)?3:0}function A$(t){const i=ci(t,0,_.min(t.length,_$));return Ot.Xy(vh(i))}!function(t){t[t.jT=0]="jT",t[t.Tp=1]="Tp",t[t.$Yt=2]="$Yt",t[t.tGt=3]="tGt"}(f$||(f$={}));var y$=class{get Av(){return this.z2}get O_(){return this.xrt.O_}get R0(){return this.xrt.R0}iGt(t){return this.xrt===t}async X$(t,i){if(this.xrt.wd.Nz!==t.NYt.$nt){const e={Nz:t.NYt.$nt};this.xrt.FZ(e)&&(await this.xrt.GZ(e),Vr(i))}await this.xrt.X$(t.ly,{y$:t.Mjt.Xw},i),void 0!==this.sxt&&this.z2===Jt.VA&&A$(t.ly.ly)&&this.sxt.Grt(t.ly.ly)}async V$(t,i){Vr(i),wt.IM("HlsMediaBuffer","Got media data, appending to "+this.z2+" MediaBuffer: "+Ge(t.VUt.Jpt));const e=t.KFt,s=t.JFt,n={F7:t.MS,ct:t.ct,pI:t.pI,y$:t.Mjt.Xw};void 0!==t.ly&&(await this.xrt.V$(t.ly,n,i),this.eGt(t.ly,t)),this.sGt(e,s)}eGt(t,i){var e;if(!A$(t.ly))return;const s=i.MS,n=s+i.ct,r=i.pI;if(null==(e=this.Avt)||e.elt(t.ly,s,r),void 0!==this.sxt&&this.z2===Jt.VA){const e=i.VUt.GPt;this.sxt.elt(t.ly,s,n,r,i.Mjt,e)}const o=[];void 0!==this.Avt&&o.push(this.Avt),void 0!==this.sxt&&o.push(this.sxt),Lp(this.O_,o)}sGt(t,i){const e=this.xrt.O_,s=new Ri([t,i]).VB(e);for(let t=0;t<s.U;t++)this.xrt.B0(s.Cn(t),s.jn(t));for(let t=0;t<e.U;t++)this.xrt.U0(e.Cn(t),e.jn(t))}B0(t,i){this.xrt.B0(t,i)}U0(t,i){this.xrt.U0(t,i)}constructor(t,i,e,s){this.z2=t,this.xrt=i,this.Avt=e,this.sxt=s}};function M$(t){if(t.Av!==Ee.kRt||void 0===t.vjt)return;const i=t.vjt.match(/^CC([1-4])$/);if(i)return Number(i[1]);const e=t.vjt.match(/^SERVICE([\d+])$/);return e?Number(e[1]):void 0}var b$=class{lRt(t){var i,e,s;return null==(s=null==(e=this.yz)||null==(i=e.D1)?void 0:i.FZ(t))||s}dRt(t){var i,e,s;return null==(s=null==(e=this.yz)||null==(i=e.I1)?void 0:i.FZ(t))||s}constructor(t){this.yz=t}},Ah="LLHLSPlayer",T$=[$.Am,$.ym,$.Mm,$.Nw],S$=[Tf.qv,Tf.Iv,Tf.zv,Tf.Rv],N$=2e3,I$=class extends Mo{get Km(){var t;const i=[this.nGt,this.rGt].filter(Ks);if(0===i.length||this.ct!==1/0)return;const e=null==(t=this.R_)?void 0:t.getTime();if(e){return(Date.now()-e)/1e3}let s;for(const t of i){const i=t.djt.Ig;if(0===i.U)continue;const e=i.jn(i.U-1)+t.djt.nbt,n=t.djt.Pzt,r=e+(null!=n?n:0)-this.U_;(!s||s<r)&&(s=r)}return s}oGt(){if(void 0===this.hGt)return!1;const t=ra.m_();if(!this.hGt.EYt.LFt(t))return!1;const i=this.hGt.EYt.IFt();if(void 0===i||void 0===i.nut.ct)return!1;const e=this.U_,s=this.gg,n=this.hGt.OYt.Jm(e);if((void 0!==n?n.jn(0)-e:0)>=2*i.nut.ct*s)return!1;if(i.DFt>0&&0===i.EFt)return i.kFt>1e3*i.nut.ct*.8;return 8*i.EFt/this.wU.VH.GP>=1.8*i.nut.ct}async aGt(){var t;const i=await this.gRt();if(void 0===i)return;const e=null==(t=this.hGt)?void 0:t.EYt.IFt();if(void 0===e)return;const s=this.uGt;if(e.EFt>0){if(_.max(0,e.EFt-e.DFt)<=e.EFt*(i.GP/s.GP))return}const n=i.GP<s.GP;await this.Djt(i,{Ejt:n})}cGt(t){return _u(t,(t=>t.GP))}async lGt(){let t=await this.dGt();if(0===t.length)return;const i=await this.fGt(t);i.length>0&&(t=i);const e=this.cGt(t);void 0!==e&&(await this.Djt(e,{Ejt:!0}),this.Sz.jDt(e.GP))}get _Gt(){const t=[this.rGt,this.nGt].filter(Ks);for(const i of t){if(!i.djt.bPt)return!1;const t=i.djt.jnt,e=t[t.length-1];if(e&&e.yPt!==this.gGt)return!1}return!0}get bjt(){return this.uGt}get Pjt(){return this.rGt}get Bjt(){return this.nGt}get wGt(){return this.vGt}get ht(){return this.YT}get O_(){return this.Fm.O_.ks()}get Njt(){const t=[];if(this.uGt){const i=this.Fm.U_;for(const e of this.mGt)for(const s of e.IYt){const e=s.QUt(i);e&&!Ai(t,e)&&t.push(e)}}return t}get R_(){if(this.uGt){const t=this.Fm.U_;return this.uGt.RPt(t)}}set R_(t){if(!t||!this.uGt)return;const i=this.uGt.PPt(t);void 0!==i&&this.F_(i,{pGt:!1,AGt:!0})}get bt(){return this.yGt}get U_(){var t;return null!=(t=this.MGt)?t:this.Fm.U_}set U_(t){this.F_(t)}F_(t,i){var e,s,n,r;wt.IM(Ah,"Seeking to "+t+" s.");const o={pGt:null!=(s=null==i?void 0:i.pGt)?s:t===1/0,AGt:null==(n=null==i?void 0:i.AGt)||n,lPt:null!=(r=null==i?void 0:i.lPt)&&r};this.MGt=t,this.bGt=o,this.TGt=!0,this.SSt=!0,null==(e=this.fz)||e.Zg(),this.Co(new Ur(t)),this.L5.g_(),this.SGt&&(ra.p_(this.NGt),o.AGt?this.NGt=ra.A_((()=>this.IGt(t,o)),50):this.IGt(t,o))}IGt(t,i){ra.p_(this.NGt);const e=[this.Cvt,this.DGt,this.x5].filter(Ks);this.L5=new Bd,this.L5.w_(this.dE.f_),this.x5=this.C5(e,t,i,this.L5.f_).catch(this.EGt)}get ct(){var t,i,e,s,n,r,o;if(!this._Gt)return null!=(o=null!=(r=null!=(n=null==(t=this.rGt)?void 0:t.djt.ct)?n:null==(i=this.nGt)?void 0:i.djt.ct)?r:null==(s=this.kSt)||null==(e=s.tUt)?void 0:e.djt.ct)?o:[this.rGt,this.nGt].filter(Ks).every((t=>function(t){if(void 0===t)return!1;return t.djt.jnt.length>0&&!t.djt.bPt}(t)))?1/0:NaN;const h=this.Fm.ct;if(S(h)){var a,u;const t=null==(u=this.kSt)||null==(a=u.tUt)?void 0:a.djt.ct;if(void 0!==t)return t}return h}get G_(){if(!this._Gt)return!1;if(this.Eg&&this.SGt){var t,i;const e=this.U_,s=null==(t=this.rGt)?void 0:t.djt.ct,n=null==(i=this.nGt)?void 0:i.djt.ct;return!(void 0!==s&&e<s)&&!(void 0!==n&&e<n)}return this.Fm.G_}get lt(){return this.vz}get H_(){return this.mz}get Z_(){}get K_(){return!1}get eg(){return ol({},{HT:0,XT:0,ZT:0,qT:0,KT:0,JT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.Fm.rg(),{KT:this.KTt,qT:this.wU.VH.GP})}get Tr(){var t;return null==(t=this.kSt)?void 0:t.Tr}get og(){return this.Fm.og}set og(t){this.Fm.og=t}get cg(){return this.KMt}set cg(t){this.KMt!==t&&(this.KMt=t,this.Co(t?new $o:new jo))}get fg(){return this.Fm.fg}get gg(){return this.Fm.gg}set gg(t){wt.IM(Ah,"Setting playback rate to "+t+"."),this.Fm.gg=t}get pg(){return this.eSt.ks()}get eSt(){return this.Fm.pg}get yg(){return this.Az}set yg(t){this.Az!==t&&(this.Az=t,this.kGt())}get Sg(){let t=this.Fm.Sg;return this.rSt&&(t=_.max(qo.Xn,t)),t}get Ig(){return this.ZTt.ks()}get ZTt(){let t=this.U1;const i=[this.rGt,this.nGt].filter(Ks);if(t.U>0&&i.some((t=>!t.djt.bPt))){const e=this.eSt,s=t.jn(t.U-1);if(e.U>0&&e.jn(e.U-1)>s){let n=e.jn(e.U-1);const r=k$(i);r.U>0&&(n=_.min(n,r.jn(r.U-1))),t=t.YB(new Ri([s,n]))}}return t}Jzt(){let t=function(t){if(0===t.length)return Ri.oU();let i=new Ri([0,1/0]),e=0;for(const s of t){const t=s.djt.Ig;t.U>0&&(i=i.Sn(t),e=_.max(e,t.Cn(0)))}if(i.U>0)return i;return Ri.nU(e)}([this.rGt,this.nGt].filter(Ks));0!==t.U&&(this.yz&&this._Gt&&this.yz.ct!==1/0&&(t=new Ri([t.Cn(0),this.yz.ct])),this.U1=t,this.LGt&&this.Avt.wD(t.Cn(0)),this.xGt&&this.sxt.wD(t.Cn(0)))}get Eg(){var t;return null!=(t=this.TGt)?t:this.Fm.Eg}get Mz(){}get nt(){return this.Dl}get rt(){return this.VT}get Cg(){var t,i;return this.Fm.Cg||(null==(i=this.uGt)||null==(t=i.akt)?void 0:t.Ti)||0}get Rg(){var t,i;return this.Fm.Rg||(null==(i=this.uGt)||null==(t=i.akt)?void 0:t.ji)||0}get zg(){return this.Fm.zg}set zg(t){wt.IM(Ah,"Setting volume to "+t+"."),this.Fm.zg=t}get Qg(){return this.vU}get Yg(){return!1}set Yg(t){}get Tz(){return this.Sz}qg(){return!1}Gg(){return this.Fm.ya}be(){wt.IM(Ah,"Hiding the player."),this.Fm.be()}Hg(){var t;wt.IM(Ah,"Pausing the player."),this.Fm.Hg(),(null==(t=this.fz)?void 0:t.Lm)&&this.fz.Zg()}async Xg(){this.v5=!0;const t=this.Fm.Xg();if(this.G_){const t=this.ZTt;t.U>0&&this.F_(t.Cn(0),{AGt:!1})}this.SGt||await this.kGt(),this.STt(),await t,this.NSt()}STt(){var t;if(!this.XTt())if(null==(t=this.bjt)?void 0:t.djt.bPt){var i;let t=!0,e=0;const s=null==(i=this.uGt)?void 0:i.djt.Cn;if(!this.SSt&&s&&(t=!s.lPt,e=s.cPt,e<0)){const t=this.bjt.djt.Mzt;e+=t.jn(t.U-1)}this.IGt(e,{pGt:t})}else this.IGt(1/0,{pGt:!0});this.CGt()&&this.IGt(1/0,{pGt:!0})}XTt(){var t;const i=this.ZTt;if(0===i.U)return!0;const e=null==(t=this.OGt)?void 0:t.WB(this.U_);return(e&&e>0?this.OGt.jn(e):this.U_)>=i.Cn(0)}get OGt(){var t,i;const e=null==(t=this.jGt)?void 0:t.OYt,s=null==(i=this.hGt)?void 0:i.OYt;return e?s?s.Sn(e):e:s}CGt(){return R$(this.U_,this.rGt)||R$(this.U_,this.nGt)}hNt(){this.vz=void 0,this.mz=void 0}rB(t){this.vz||($r(this.tr()),this.vz=ia(t),this.mz=t,this.Co(new as(t)))}ge(){wt.IM(Ah,"Showing the player."),this.Fm.ge()}Kg(){throw new g("Not implemented")}Jg(){throw new g("Not implemented")}$g(){}iw(){this.SGt&&$r(this.RGt(this.rGt,this.nGt,this.vGt,{iw:!0}))}async ga(t,i,e){var s,n;if(wt.IM(Ah,"Setting the player source to "+t.src+"."),this.hNt(),this.yGt&&!Yh(this.yGt)&&(await this.tr(),Vr(e)),!t.src||Yh(t))return;this.dE=new Bd,this.Lz.HP(t.contentProtection),this.yGt=t,this.PGt=t.seamlessSwitchStrategy,this.xGt=!Ai(t.ignoreEmbeddedTextTrackTypes,O.CEA608),this.LGt=!Ai(t.ignoreEmbeddedTextTrackTypes,O.EMSG),this.yn(gl.cjt,this.handleBufferingErrorEvent);const r=null!=(n=null==(s=t.latencyConfiguration)?void 0:s.targetOffset)?n:t.liveOffset;if(this.kSt=new Gc(this.aE,this.rut,t.useCredentials,ra.wp(t.src),r),this.kSt.yn(ca.WBt,this.SUt),this.kSt.yn(ca.HBt,this.zGt),this.kSt.yn(Tf.Gv,this.Ds),this.kSt.yn(Tf.Vv,this.Ds),t.hlsDateRange&&(this.BGt=new AJ(this.kSt,this.Fm),this.Dl.tz(this.BGt.nt)),null!=this.UGt||(this.UGt=this.QGt.G7()),i.textTracks&&this.xz(i.textTracks),t.latencyConfiguration){const i=t.latencyConfiguration;this.fz=new Lo(this,this.Fm,i),this.fz.Rt=!0,this.Qg.ka(this.fz)}Up(this.Dl),this.kGt()}kGt(){return this.Cvt=this.FGt(this.Cvt,this.dE.f_).catch(this.pmt),this.Cvt}async FGt(t,i){if(t&&(await t,Vr(i)),!this.kSt)return;const e=this.Az;e===ut.LT||this.v5?await this.nst(i):e===ut.ZA&&await this.YGt(i)}async YGt(t){if(void 0===this.kSt||this.rSt)return;if(!this.kSt.qBt){try{await this.kSt.eUt(t)}catch(t){throw me(t),this.cg=!1,new ao(qa.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.GGt.Eot()}const i=await this.VGt();this.WGt(i);const e=this.HGt(i.Jjt),s=this.XGt(i.$jt),n=this.ZGt(i.OPt);if(!n){const t=L$(i.jPt);t&&(wt.IM(Ah,"Detected initial closed caption rendition."),this.qGt(i,t))}await this.RGt(e,s,n,{KGt:!0}),this.rSt=!0,this.DNt.CNt(),this.JGt()}JGt(){const t=[this.rGt,this.nGt].filter(Ks);if(t.some((t=>t.djt.bPt)))return;if(this.fz)return;const i=_.max(...t.map((t=>{var i;return null!=(i=t.djt.nbt)?i:0}))),e={minimumOffset:.66*i,maximumOffset:2*i,targetOffset:1*i,forceSeekOffset:3*i,minimumPlaybackRate:Zt,maximumPlaybackRate:pi};this.fz=new Lo(this,this.Fm,e),this.vU.ka(this.fz)}async VGt(){if(this.$Gt=this.kSt.Tr.Kjt,!this.$Gt.length)throw new ao(qa.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.tVt(this.$Gt);if(0===t.length)throw new ao(qa.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const i=await this.fGt(t);return i.length>0&&(t=i),wt.IM(Ah,"Selecting initial active variant stream."),function(t,i,e,s){void 0===s&&(s=nv.maximumBackoff);const n=function(t,i){if(void 0===i)return t;const e=i.preferredVideoCodecs,s=i.preferredAudioCodecs;if(void 0!==e){let i;for(const n of e){const e=t.filter((t=>t.$nt&&t.$nt.Akt&&Di(t.$nt.Akt,n)));if(0===e.length)continue;if(void 0===s)return e;void 0===i&&(i=e);const r=x$(e,s);if(void 0!==r)return r}if(void 0!==i)return i}if(void 0!==s){const i=x$(t,s);if(void 0!==i)return i}return t}(t,i),r=O$(n,s);switch(e.sX.type){case hL.BANDWIDTH:{const t=e.aX,i=r.filter((i=>i.GP<=t));if(i.length>0)return Sd(i,(t=>t.GP))}case hL.PERFORMANCE:return _u(r,(t=>t.GP));case hL.QUALITY:return Sd(r,(t=>t.GP))}}(t,this.yGt.abr,this.wU,this.Mlt.maximumBackoff)}HGt(t){if(this.iVt){const t=this.eVt(this.iVt);if(t)return t}return C$(t)}XGt(t){if(this.sVt){const t=this.eVt(this.sVt);if(t)return t}return C$(t)}ZGt(t){for(const t of this.Dl.Rw)t._v===yi.Jn&&(this.nVt=this.rVt(t));if(this.nVt){const t=this.eVt(this.nVt);if(t)return t}return L$(t)}rVt(t){return bo(this.uGt.OPt,(i=>t===this.oVt.get(i.Xw)))}async nst(t){this.SGt||(await this.YGt(t),Vr(t),this.SGt=!0,await this.RGt(this.rGt,this.nGt,this.vGt,{KGt:!0}))}xz(t){for(const i of t)i.src&&this.Rz.nE(i)}qGt(t,i){if(!this.xGt)return;const e=function(t){const i=[];for(const e of t){const t=M$(e);void 0!==t&&i.push({M8:t,b8:e.gs||"",kh:e.l})}return i}(t.jPt);for(const t of e)this.sxt.Qwt(t);if(void 0!==i){const t=M$(i);this.sxt.Bwt(t)._v=yi.Jn}}get mGt(){return[this.jGt,this.hGt,this.hVt].filter(Ks)}Ijt(t){for(const i of t)if(!this.aVt(i))throw new g("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.$Gt=t}aVt(t){const i=this.Tr;return!!i&&Ai(i.Kjt,t)}eVt(t){if(t&&this.uGt)return bo(this.uGt.nRt,(i=>i===t))}WGt(t){var i;if(wt.IM(Ah,"Setting active variant stream."),this.uGt===t)return;const e=(null==(i=this.uGt)?void 0:i.RRt)!==(null==t?void 0:t.RRt);if(this.uGt&&e)for(const t of this.uGt.OPt)this.fE(t);if(this.uGt=t,this.Co(new n$),this.mSt(),t&&e)for(const i of t.OPt)this.uVt(i)}uVt(t){const i=this.Fm.rE(Qe.HA,void 0,t.l,t.gs,t.fjt,void 0,void 0,t.pjt.map(zq).filter(Ks));i.yn(ct.ra,this.onTextTrackChange),this.oVt.set(t.Xw,i),this.cVt.tt(i)}fE(t){const i=this.oVt.get(t.Xw);i&&(i.fn(ct.ra,this.onTextTrackChange),this.cVt.it(i),this.oVt.delete(t.Xw),this.Fm.fE(i))}async dGt(){var t;const i=null!=(t=this.$Gt)?t:this.Tr.Kjt;if(0===i.length&&!this.$Gt)return wt.IM(Ah,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===i.length&&!this.$Gt)return wt.IM(Ah,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const e=await this.tVt(i);if(0===e.length)return wt.Zjt(Ah,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=O$(e,this.Mlt.maximumBackoff);return 0===s.length?(this.lVt||(wt.Zjt(Ah,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.dVt++,await this.fVt(e)),[]):s}async _Vt(){const t=await this.gRt();if(void 0===t)return;const i=!!this.uGt&&t.GP<this.uGt.GP;await this.Djt(t,{Ejt:i})}async gRt(){var t,i;const e=await this.dGt();if(0===e.length)return;const s=mZ(this.Fm),n=await this.fGt(e),r={ji:this.Fm.ji,Ti:this.Fm.Ti,cRt:s,Xct:null==(i=this.yGt)||null==(t=i.abr)?void 0:t.restrictToPlayerSize},o=await this.gVt.gRt(e,this.uGt,n,r,new b$(this.yz));return!!this.uGt&&o.GP<this.uGt.GP||this.wVt(o,s)?o:void 0}wVt(t,i){var e;if(t===this.bjt)return!1;const s=this.bjt&&j$(this.bjt,this.Mlt.maximumBackoff),n=j$(t,this.Mlt.maximumBackoff);if(!s&&n)return!0;(!this.dLt||this.dLt.Tjt.GP>t.GP)&&(this.dLt={Tjt:t,$dt:ra.m_()});const r=ra.m_()-this.dLt.$dt;var o;const h=null!=(o=null==(e=this.Bjt)?void 0:e.djt.uRt)?o:1/0;return i>=_.max(h-1,5)||r>1e3}async fVt(t){this.lVt=!0;let i=!1;for(const e of t)try{const t=this.nGt?bo(e.$jt,(t=>Hc(t,this.nGt))):void 0;if(void 0===t)continue;await this.cUt(t),t.djt.Uzt=-1/0,i=!0}catch(t){}if(i)this.dVt=0,await this.vVt();else{if(this.dVt>=this.Mlt.maxRetries)return void this.rB(new ao(qa.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=_.min(this.Mlt.minimumBackoff*2**(this.dVt-1),this.Mlt.maximumBackoff);await Si(t)}this.lVt=!1,await this._Vt()}async tVt(t){let i=await Ed(t,(async t=>{var i,e,s;const n=[(null==(i=t.$nt)?void 0:i.mkt)?'audio/mp4; codecs="'+t.$nt.mkt+'"':void 0,(null==(e=t.$nt)?void 0:e.Akt)?'video/mp4; codecs="'+t.$nt.Akt+'"':void 0].filter(Ks);return 0===n.length||await this.mVt.dq(n,null==(s=this.yGt)?void 0:s.useManagedMediaSource)}));return i.some((t=>{var i;return null==(i=t.$nt)?void 0:i.Akt}))&&(i=i.filter((t=>!t.$nt||t.$nt.Akt||0!==t.$jt.length))),i.some((t=>{var i;return null==(i=t.$nt)?void 0:i.mkt}))&&(i=i.filter((t=>!t.$nt||t.$nt.mkt||0!==t.Jjt.length))),i}fGt(t){return this.kSt.JBt?Ed(t,(t=>async function(t,i){for(const e of t)if(!await i(e))return!1;return!0}([C$(t.Jjt),C$(t.$jt),L$(t.OPt),L$(t.jPt)].filter(Ks),(t=>this.pVt(t))))):Promise.resolve([])}async pVt(t){if(0===t.djt.jnt.length)return!1;const i=t.djt.jnt[0];if(!i.Jpt)return!1;const e=i.Jpt,s=e.Dyt?iK(e.Dyt.Cn,e.Dyt.U):void 0;try{return await this.rut.wnt(e.lT,s)}catch(t){return!1}}async Djt(t,i){if(!this.SGt)throw new g("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.aVt(t))throw new g("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.uGt)return void wt.IM(Ah,"Trying to set the already active variant stream, ignoring.");const e=this.rGt?bo(t.Jjt,(t=>Hc(t,this.rGt))):void 0,s=this.nGt?bo(t.$jt,(t=>Hc(t,this.nGt))):void 0,n=this.vGt?bo(t.OPt,(t=>Hc(t,this.vGt))):void 0;this.WGt(t),this.dLt=void 0,await this.RGt(e,s,n,i)}async zjt(t){if(!this.uGt)return void(this.iVt=t);const i=this.eVt(t);if(t&&!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");this.Pjt!==i&&(wt.IM(Ah,"Switching audio rendition"),await this.RGt(i,this.nGt,this.vGt,{Ljt:!0}))}async Ujt(t){if(!this.uGt)return void(this.sVt=t);const i=this.eVt(t);if(t&&!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");this.Bjt!==i&&(wt.IM(Ah,"Switching video rendition"),await this.RGt(this.rGt,i,this.vGt,{kjt:!0}))}async AVt(t){if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active subtitle rendition to undefined.");if(!this.rSt)return void(this.nVt=t);const i=this.eVt(t);if(!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");wt.IM(Ah,"Switching subtitle rendition"),await this.RGt(this.rGt,this.nGt,i)}async yVt(t,i){if(this.lVt)return;const e=0===this.rt.U;t.Av===Ee.VA||t.Av===Ee.WA&&e?this.$Gt&&this.$Gt.length<=1?(t.Av===Ee.VA&&this.nGt!==t?await this.RGt(this.rGt,t,this.vGt):t.Av===Ee.WA&&e&&this.rGt!==t&&await this.RGt(t,this.nGt,this.vGt),await this.MVt(t,i)):await this._Vt():await this.MVt(t,i)}async cUt(t,i){try{await this.kSt.cUt(t,i)}catch(e){throw me(e),(De(e)||Nc(e))&&await this.yVt(t,i),e}}async MVt(t,i){if(!Ai(this.bVt,t)){this.bVt.push(t);try{const e=t.Av===Ee.HA||t.Av===Ee.kRt?1/0:this.Mlt.maxRetries;await ev((()=>this.retryOfflineRenditionsCallback(t,i)),i,e,this.Mlt.minimumBackoff,this.Mlt.maximumBackoff)}catch(t){this.rB(new ao(qa.MEDIA_LOAD_ERROR,t.message,t))}finally{jn(this.bVt,t),t.djt.Uzt===-1/0&&await this.vVt()}}}RGt(t,i,e,s){void 0===s&&(s={});const n={Ejt:s.Ejt||!1,Ljt:s.Ljt||!1,kjt:s.kjt||!1,iw:s.iw||!1,KGt:s.KGt||!1};return n.KGt||n.iw||this.rGt!==t||this.nGt!==i||this.vGt!==e?void 0===t&&void 0===i?Promise.reject(new g("Trying to buffer no media renditions.")):(this.rGt=t,this.nGt=i,this.vGt=e,this.Jzt(),this.Co(new r$),this.L5.g_(),this.L5=new Bd,this.L5.w_(this.dE.f_),this.TVt.g_(),this.TVt=new Bd,this.TVt.w_(this.dE.f_),this.DGt=this.SVt([this.DGt,this.x5].filter(Ks),t,i,e,n,this.TVt.f_).catch(this.EGt),this.DGt):Promise.resolve()}async NVt(t,i,e,s){var n,r;const o=[];if(o.push(this.IVt(i,s)),Iq(t,i)||o.push(this.IVt(t,s)),null==(r=this.yGt)||null==(n=r.hls)?void 0:n.delaySubtitlePreload)return Promise.all(o).then((()=>this.IVt(e,s)));const h=this.IVt(e,s);return Promise.all([...o,h])}async IVt(t,i){if(t)try{await this.kSt.cUt(t,i)}catch(e){me(e),(De(e)||Nc(e))&&await this.DVt(t,i)}}async DVt(t,i){if(this.lVt)return;const e=0===this.rt.U;if(t.Av===Ee.VA||t.Av===Ee.WA&&e)if(this.$Gt&&this.$Gt.length<=1)await this.MVt(t,i);else{const t=await this.VGt();this.WGt(t);const i=this.HGt(t.Jjt),e=this.XGt(t.$jt),s=this.ZGt(t.OPt);await this.RGt(i,e,s)}else await this.MVt(t,i)}async SVt(t,i,e,s,n,r){var o;if(!this.SGt)return void await this.NVt(i,e,s,r);await Promise.all(t.map((t=>t.catch(Br)))),this.EVt(),await this.kVt(r),await this.LVt();const h=[];n.Ljt&&this.yz&&this.yz.I1&&h.push(this.yz.I1.rS(0,1/0)),n.kjt&&this.yz&&this.yz.D1&&h.push(this.yz.D1.rS(0,1/0)),await Promise.all(h),Vr(r);const a=await this.xVt(i,e,n.iw,r);this.CVt(i,e,n.Ejt||a),this.OVt(s,n.Ejt),Vr(r);const u=[e,Iq(i,e)?void 0:i,s].filter(Ks);try{await Promise.all(u.filter((t=>!t.djt.Czt)).map((t=>{var i;return null==(i=this.kSt)?void 0:i.lUt(t,r)})))}catch(t){me(t)}if(Vr(r),this.B1(),this.Jzt(),void 0!==this.MGt)this.IGt(this.MGt,this.bGt);else if(!this.SSt&&(null==(o=this.uGt)?void 0:o.djt.Cn)){const t=this.uGt.djt,i=t.Cn;let e=i.cPt;if(i.cPt<0){const i=t.Mzt;e+=i.jn(i.U-1)}this.IGt(e,{pGt:!i.lPt})}else!this.SSt&&u.every((t=>!t.djt.bPt))?this.IGt(1/0,{pGt:!0}):this.mGt.length>0&&this.jVt()}async xVt(t,i,e,s){var n,r;const o=void 0!==t&&t!==i,h=void 0!==i,a=await this.RVt(t,i,this.uGt);if(Vr(s),!e&&this.yz&&!a)return!1;const u=void 0!==(null==(n=this.yz)?void 0:n.I1),c=void 0!==(null==(r=this.yz)?void 0:r.D1);if(!e&&!(o!==u||h!==c)&&a&&this.yz&&this.yz.FZ(a))return await this.kVt(s),await this.yz.GZ(a),!0;for(const t of this.mGt)t.IYt.forEach((t=>t.g_()));this.Fm.z6();try{this.yz&&await this.Fm.tr(),this.yz=await this.PVt(a,o,h)}finally{this.Fm.B6()}return!0}async RVt(t,i,e){var s,n;const r=e.$nt,o=[];if(void 0!==t){var h,a;const i=null!=(a=null==(h=t.$nt)?void 0:h.mkt)?a:null==r?void 0:r.mkt;if(!i)return;{const t='audio/mp4; codecs="'+i+'"';wt.IM(Ah,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),o.push(t)}}if(void 0!==i){var u,c;const t=null!=(c=null==(u=i.$nt)?void 0:u.Akt)?c:null==r?void 0:r.Akt;if(!t)return;{const i='video/mp4; codecs="'+t+'"';wt.IM(Ah,"Configuring MediaSource for initial video rendition with codec: "+i+"."),o.push(i)}}if(0===o.length)return void wt.Zjt(Ah,"No codecs found on the active variant stream.");var l;const d=null!=(l=null==i||null==(s=i.djt.jnt[0])?void 0:s.fPt)?l:[];var f;const _=null!=(f=null==t||null==(n=t.djt.jnt[0])?void 0:n.fPt)?f:[],g=this.kSt.Tr,w=await hK(this.yGt.contentProtection,o,g.LBt.concat(_).concat(d),this.aE,this.yGt.useCredentials);return{Av:de.Sj,F1:o.map((t=>({Nz:t}))),Iz:w,t2:this.yGt.useManagedMediaSource}}async PVt(t,i,e){let s;return s=t?await this.Fm.$n(t):new u$(this.Fm,i,e),this.yz=s,this.B1(),this._Tt(),this.gTt(),s}B1(){const t=this.yz;if(t&&S(t.ct)){var i,e,s;const n=null!=(s=null==(i=this.rGt)?void 0:i.djt.ct)?s:null==(e=this.nGt)?void 0:e.djt.ct;void 0!==n&&n>0&&t.P1(n)}this.Jzt()}_Tt(){const t=this.yz;t&&(t.D1&&(t.D1.iX=this.wU.lX),t.I1&&(t.I1.iX=this.wU.lX))}gTt(){const t=this.yz;t&&(t.D1&&(t.D1.rX=this.wU.rX),t.I1&&(t.I1.rX=this.wU.rX))}CVt(t,i,e){if(!this.yz)throw new g("Invalid state");this.yz.I1?this.O1&&this.O1.iGt(this.yz.I1)||(this.O1=new y$(Jt.WA,this.yz.I1,this.LGt?this.Avt:void 0,this.xGt?this.sxt:void 0)):this.O1=void 0,this.yz.D1?this.j1&&this.j1.iGt(this.yz.D1)||(this.j1=new y$(Jt.VA,this.yz.D1,this.LGt?this.Avt:void 0,this.xGt?this.sxt:void 0)):this.j1=void 0;const s=Iq(t,i);if(this.j1&&i){const t=s&&this.O1?[this.j1,this.O1]:[this.j1];this.hGt?this.hGt.Mjt!==i&&(e&&(this.hGt.g_(),this.hGt.xYt.kL()),this.hGt.zQt(i)):(this.hGt=function(t,i,e,s,n,r,o,h,a,u){const c=s.Tr.kT,l=new YJ(c),d=new UJ(Jt.VA,t,s,l,n,r,o,u),f=i.map((t=>t.Av)),_=h.Qbt(l,s.Tr.kT,f),g=new s$(d,l,_,a);return g.LYt(i),g}(i,t,this.Fm,this.kSt,this.aE,this.rut,this.KUt,this.UGt,this.wU,this.yGt.useCredentials),this.hGt.EYt.yn(Wh.OQt,this.zVt),this.hGt.EYt.yn(Wh.jQt,this.BVt),this.hGt.kYt.yn(kl.iYt,this.UVt),this.hGt.kYt.yn(kl.sYt,this.QVt),this.hGt.kYt.yn(kl.nYt,this.FVt),this.hGt.kYt.yn(kl.eYt,this.YVt)),this.hGt.LYt(t)}else{var n;null==(n=this.hGt)||n.h_(),this.hGt=void 0}var r;this.O1&&t&&!s?(this.jGt?this.jGt.Mjt!==t&&(e&&(this.jGt.g_(),this.jGt.xYt.kL()),this.jGt.zQt(t)):(this.jGt=function(t,i,e,s,n,r,o,h,a,u){const c=s.Tr.kT,l=new YJ(c),d=new UJ(Jt.WA,t,s,l,n,r,o,u),f=h.Qbt(l,s.Tr.kT,[i.Av]),_=new s$(d,l,f,a);return _.LYt([i]),_}(t,this.O1,this.Fm,this.kSt,this.aE,this.rut,this.KUt,this.UGt,this.wU,this.yGt.useCredentials),this.jGt.EYt.yn(Wh.jQt,this.BVt),this.jGt.kYt.yn(kl.iYt,this.UVt),this.jGt.kYt.yn(kl.eYt,this.YVt)),this.jGt.LYt([this.O1])):(null==(r=this.jGt)||r.h_(),this.jGt=void 0);this.GVt()}OVt(t,i){if(this.hVt){this.hVt.EYt.Mjt===t?i&&(this.hVt.g_(),this.hVt.xYt.kL()):(this.hVt.h_(),this.hVt=void 0)}if(!this.hVt&&t){const i=this.oVt.get(t.Xw);i._v=yi.Jn,this.hVt=function(t,i,e,s,n,r,o){const h=e.Tr.kT,a=new WJ(i,h),u=new YJ(h),c=new UJ(Jt.Ru,t,e,u,s,n,r,o),l=new t$(u,h,Jt.Ru),d=new s$(c,u,l);return d.CYt(a),d}(t,i,this.kSt,this.aE,this.rut,this.KUt,this.yGt.useCredentials)}}GVt(){const t=[this.O1,this.j1].filter(Ks).map((t=>t.Av));this.kSt.Tr.kT.EBt(t)}async C5(t,i,e,s){let n;if(await Promise.all(t.map((t=>t.catch(Br)))),Vr(s),await this.LVt(),Vr(s),this.MGt=void 0,this.TGt=void 0,this.SSt=!0,e.lPt){n=k$([this.rGt,this.nGt].filter(Ks))}else n=this.ZTt;const r=n.zB(i),o=this.Fm.k_(Tf.$v,s);this.Fm.JA(r,e.pGt),this.SGt&&this.mGt.length>0&&(this.kSt.Tr.kT.kBt(),this.VVt(this.Fm.U_),this.jVt()),await o,this.NSt()}NSt(){const t=this.Km;if(this.fg||this.Eg||void 0===t)return;const i=this.U_;var e,s;t+this.U_-this.Qg.wd.maximumOffset<i?null==(e=this.fz)||e.Cn():null==(s=this.fz)||s.Zg()}VVt(t){for(const i of this.mGt)i.KQt(t)||(i.zYt(),i.xYt.GFt()),i.RYt(t)||(i.BYt(),i.xYt.VFt())}EVt(){for(const t of this.mGt)t.g_()}LVt(){return Promise.all([this.VLt(),this.WVt(),this.HVt()])}jVt(){this.GLt(),this.XVt(),this.ZVt()}async vVt(){this.SGt&&this.mGt.length>0&&(this.mGt.forEach((t=>t.zYt())),await this.VLt(),this.GLt(),this.mGt.forEach((t=>t.EYt.nFt())))}GLt(){if(this.qVt)return;const t=()=>{this.qVt=void 0};this.KVt=new Bd,this.KVt.w_(this.dE.f_),this.qVt=this.hxt(this.KVt.f_).catch(this.EGt).then(t,t)}async VLt(){var t;null==(t=this.KVt)||t.g_();const i=this.qVt;this.qVt=void 0,i&&await i}async hxt(t){Vr(t);const i=this.mGt;for(;;){const e=[],s=this.Fm.U_;for(const t of i){const i=t.EYt,n=t.dlt(s);if(i.tEt)e.push(i.zUt());else if(t.PYt(s,n,this.wU.lX)){const s=i.JQt(n);if(void 0===s){if(i.Mjt.djt.bPt)continue;const t=i.Mjt.djt.jnt;t.length&&t[0].MS>n&&(this.U_=1/0),i.hFt(),i.iFt(n)}else{const[e,n]=s;i.pat(e,n,t.NUt),t.kYt._Yt(e,n)}e.push(i.zUt())}}await at((t=>{if(0===e.length){i.every((t=>t.EYt.SEt))||e.push(this.Fm.k_(Tf.fm,t));for(const s of i)e.push(s.kYt.k_(kl.eYt,t))}return Jr(Promise.race(e),t)}),t)}}XVt(){if(this.JVt)return;const t=()=>{this.JVt=void 0};this.$Vt=new Bd,this.$Vt.w_(this.dE.f_),this.JVt=this.tWt(this.$Vt.f_).catch(this.EGt).then(t,t)}async WVt(){var t;null==(t=this.$Vt)||t.g_();const i=this.JVt;this.JVt=void 0,i&&await i}async tWt(t){Vr(t);const i=this.mGt;for(;;){const e=[];for(const t of i){const i=t.EYt,s=t.kYt;if(s.tEt)e.push(s.zUt());else{const t=i.VQt();t?"nut"===t.Av?(s.mYt(t),e.push(s.zUt())):"mPt"===t.Av&&(s.gYt(t),e.push(s.zUt())):e.push(i.rFt())}}if(0===e.length)break;await Jr(Promise.race(e),t)}}ZVt(){if(this.iWt)return;this.eWt=new Bd,this.eWt.w_(this.dE.f_);const t=()=>{this.iWt=void 0};this.iWt=this.sWt(this.eWt.f_).catch(this.EGt).then(t,t)}async HVt(){var t;null==(t=this.eWt)||t.g_();const i=this.iWt;this.iWt=void 0,i&&await i}async sWt(t){for(;;){const i=this.mGt;i.forEach((t=>t.vat()));const e=this.Fm.U_,s=[],n=[];for(const t of i){const i=t.kYt;for(const r of t.IYt){const t=r.xUt?s:n;if(r.tEt)t.push(r.zUt());else if(!r.BUt(e)){const e=i.TYt(r.Av);e?"nut"===e.Av&&e.yPt===this.gGt?(r.wlt(e),t.push(r.zUt())):"PEt"===e.Av&&e.yPt===this.gGt&&(r.X$(e),t.push(r.zUt())):n.push(i.SYt(r.Av))}}}if(0===s.length){if(await this.nWt(i,e,t))continue}if(0===s.length&&0===n.length){i.every((t=>t.IYt.length>0&&t.IYt.every((t=>t.BUt(e)))))&&this.yz.x0();break}await Jr(Promise.race([...s,...n]),t)}}async nWt(t,i,e){const s=[],n=[];for(const e of t){const t=e.dlt(i);for(const r of e.IYt){if(!r.xUt)continue;const o=e.kYt.TYt(r.Av);if(void 0!==o){if(o.yPt===this.gGt)return!1;s.push(o)}else{if(e.tEt||e.PYt(i,t,this.wU.lX)||!r.UUt(i,t))return!1;{const t=r.CUt.NUt;void 0!==t&&n.push(t)}}}}if(0===s.length)return!1;const r=Sd(s,(t=>t.yPt)).yPt;if(s.every((t=>"PEt"===t.Av&&t.yPt===r))){const t=_u(s,(t=>t.MS)).MS,i=[...s,...n],r=await this.rWt(i);this.oWt(r)?(wt.Xjt(Bq,"Seamless switch from",this.yz.wd,"to",r),await this.yz.GZ(r),wt.Xjt(Bq,"Seamless switch complete.")):await this.hWt(t,r,e),this.gGt=s[0].yPt}else for(const i of t)for(const t of i.IYt){let e=i.kYt.TYt(t.Av);for(;void 0!==e&&("PEt"!==e.Av||e.yPt!==r);)wt.Xjt(Bq,"Removing append for other discontinuity, expecting "+r,e),i.kYt.FUt(e),e=i.kYt.TYt(t.Av)}return!0}oWt(t){return this.PGt===sa.PT||this.PGt!==sa.zT&&this.yz.FZ(t)}async rWt(t){const i=t.map((t=>t.NYt.$nt)),e=i.map((t=>({Nz:t}))),s=Pe(t,(t=>t.NYt.fPt));s.push(...this.kSt.Tr.LBt);let n=await hK(this.yGt.contentProtection,i,s,this.aE,this.yGt.useCredentials);return 0===n.length&&this.yz&&this.yz.wd.Iz.length>0&&(n=this.yz.wd.Iz),{Av:de.Sj,F1:e,Iz:n,t2:this.yGt.useManagedMediaSource}}async hWt(t,i,e){var s;const n=this.yz,r=n.ct,o=this.O_.length>0&&this.U_<t;if(o)try{for(wt.Xjt(Bq,"Marking end of stream and waiting for ended to switch discontinuity."),n.x0();!this.Fm.G_&&this.Fm.U_<t;)await this.Fm.k_([Tf.fm,Tf.Ov],e)}catch(t){throw n.M0(),n.P1(r),t}wt.Xjt(Bq,"Perform hard switch from",null==(s=this.yz)?void 0:s.wd,"to",i);try{this.Fm.z6(),this.U_<t&&this.Fm.JA(t,!0,!0),this.j1=void 0,this.O1=void 0,this.GVt(),await this.Fm.tr(),this.yz=await this.Fm.$n(i),this.B1(),this._Tt(),this.gTt(),this.yz.D1&&(this.j1=new y$(Jt.VA,this.yz.D1,this.LGt?this.Avt:void 0,this.xGt?this.sxt:void 0),this.j1.B0(t-1,t)),this.yz.I1&&(this.O1=new y$(Jt.WA,this.yz.I1,this.LGt?this.Avt:void 0,this.xGt?this.sxt:void 0),this.O1.B0(t-1,t)),this.GVt()}finally{o&&$r(this.Fm.Xg()),this.Fm.B6()}if(this.hGt){const t=void 0!==this.O1&&void 0===this.jGt?[this.j1,this.O1]:[this.j1];this.hGt.LYt(t)}this.jGt&&this.jGt.LYt([this.O1]),wt.Xjt(Bq,"Hard switch complete.")}kVt(t){return Jr(Wr(Pe(this.mGt,(t=>t.IYt.map((t=>t.zUt()))))),t)}mSt(){const t=this.Rg,i=this.Cg;this.SNt===t&&this.NNt===i||(this.SNt=t,this.NNt=i,this.Co(new Cs))}async gn(){wt.IM(Ah,"Unloading the player."),this.aWt(),this.hNt(),await this.tr(),this.Fm.Qz=void 0,this.cVt.gn(),await this.Rz.gn(),await this.Avt.gn(),await this.sxt.gn(),this.YT.gn(),this.VT.gn(),this.Dl.gn(),this.uWt.gn(),this.DNt.h_(),this.KUt.h_(),this.UGt&&(this.UGt.h_(),this.UGt=void 0)}async tr(){wt.IM(Ah,"Resetting the player."),this.fn(gl.cjt,this.handleBufferingErrorEvent),this.gGt=-1,this.dE.g_(),this.L5.g_(),this.L5=new Bd,this.L5.w_(this.dE.f_),this.TVt.g_(),this.TVt=new Bd,this.TVt.w_(this.dE.f_);const t=[this.Cvt,this.x5,this.DGt].filter(Ks);await Promise.all(t.map((t=>t.catch(Br)))),this.Cvt=void 0,this.x5=void 0,this.DGt=void 0,this.rGt=void 0,this.nGt=void 0,this.vGt=void 0,this.$Gt=void 0,this.iVt=void 0,this.sVt=void 0,this.nVt=void 0,this.iVt=void 0,this.sVt=void 0,this.nVt=void 0,this.fz=void 0,this.vU.tr(),this.bVt=[],this.WGt(void 0),this.EVt(),await this.LVt(),this.jGt&&(this.jGt.h_(),this.jGt=void 0),this.hGt&&(this.hGt.h_(),this.hGt=void 0),this.hVt&&(this.hVt.h_(),this.hVt=void 0),this.O1=void 0,this.j1=void 0,this.yz=void 0,this.kSt&&(this.kSt.h_(),this.kSt=void 0),this.BGt&&(this.Dl.sz(this.BGt.nt),this.BGt=void 0),await this.Rz.tr(),await this.Avt.tr(),await this.sxt.tr(),this.Fm.Pz(),await this.Fm.tr(),this.yGt=void 0,this.SGt=!1,this.U1=Ri.oU(),this.MGt=void 0,this.TNt=void 0,this.SNt=0,this.NNt=0,this.TGt=void 0,this.SSt=!1,this.v5=!1,ra.p_(this.NGt),this.rSt=!1,this.cWt=!1,this.KTt=0,this.PGt=sa.LT,this.uWt.tr(),this.lWt(),this.Co(new R(this.U_,this.Sg))}lWt(){for(const t of this.YT.Rw)t.gn();for(const t of this.VT.Rw)t.gn();for(const t of this.Dl.Rw)t.gn();this.YT.tr(),this.VT.tr(),this.Dl.tr(),this.oVt.clear()}dWt(){this.uWt.yn(T$,this.Ds),this.uWt.yn($.Sm,this.Vm),this.uWt.yn($.Tm,this.fWt),this.uWt.yn($.pm,this._Wt),this.wU.yn("tX",this.kNt),this.wU.yn("nX",this.LNt),this.Fm.yn(S$,this.Ds),this.Fm.yn(Tf.Nv,this.handleContentProtectionErrorEvent),this.Fm.yn(Tf.Lv,this.gWt),this.Fm.yn(Tf.Ov,this.Mh),this.Fm.yn(Tf.Sh,this.dOt),this.Fm.yn(Tf.jh,this.wWt),this.Fm.yn(Tf.Zv,this.vWt),this.Fm.yn($.Nw,this.Yj),this.Fm.yn(Tf.fm,this.J4),this.Fm.yn(Tf.im,this.We),this.Fm.yn(Tf.$v,this.Vz),this.Fm.yn(Tf.Jv,this.mWt),this.Fm.yn(Tf._m,this.pWt)}aWt(){this.uWt.fn(T$,this.Ds),this.uWt.fn($.Sm,this.Vm),this.uWt.fn($.Tm,this.fWt),this.uWt.fn($.pm,this._Wt),this.wU.fn("tX",this.kNt),this.wU.fn("nX",this.LNt),this.Fm.fn(S$,this.Ds),this.Fm.fn(Tf.Nv,this.handleContentProtectionErrorEvent),this.Fm.fn(Tf.Lv,this.gWt),this.Fm.fn(Tf.Ov,this.Mh),this.Fm.fn(Tf.Sh,this.dOt),this.Fm.fn(Tf.jh,this.wWt),this.Fm.fn(Tf.Zv,this.vWt),this.Fm.fn($.Nw,this.Yj),this.Fm.fn(Tf.fm,this.J4),this.Fm.fn(Tf.im,this.We),this.Fm.fn(Tf.$v,this.Vz),this.Fm.fn(Tf.Jv,this.mWt),this.Fm.fn(Tf._m,this.pWt)}constructor(t,i,e,s,n,r,o,h){super(),this.wU=e,this.vU=s,this.KUt=n,this.QGt=r,this.oVt=Gs(),this.xGt=!0,this.LGt=!0,this.SGt=!1,this.yGt=void 0,this.yz=void 0,this.Cvt=void 0,this.dE=new Bd,this.kSt=void 0,this.iVt=void 0,this.sVt=void 0,this.nVt=void 0,this.uGt=void 0,this.rGt=void 0,this.nGt=void 0,this.vGt=void 0,this.$Gt=void 0,this.bVt=[],this.O1=void 0,this.j1=void 0,this.jGt=void 0,this.hGt=void 0,this.hVt=void 0,this.UGt=void 0,this.TVt=new Bd,this.DGt=void 0,this.L5=new Bd,this.x5=void 0,this.gGt=-1,this.KVt=void 0,this.$Vt=void 0,this.eWt=void 0,this.qVt=void 0,this.JVt=void 0,this.iWt=void 0,this.KMt=!0,this.dVt=0,this.lVt=!1,this.Az=ut.yB,this.vz=void 0,this.mz=void 0,this.U1=Ri.oU(),this.AWt=[],this.MGt=void 0,this.bGt=void 0,this.SSt=!1,this.v5=!1,this.TNt=void 0,this.SNt=0,this.NNt=0,this.TGt=void 0,this.NGt=0,this.rSt=!1,this.cWt=!1,this.PGt=sa.LT,this.dLt=void 0,this.yWt=void 0,this.KTt=0,this.handleContentProtectionErrorEvent=t=>{this.vz=ia(t.errorObject),this.mz=t.errorObject,this.Ds(t)},this.handleBufferingErrorEvent=t=>{this.rB(new ao(qa.MEDIA_LOAD_ERROR,t.lt.message,t.lt))},this.gWt=()=>{this.Jzt();const t=this.ct;t!==this.TNt&&(this.TNt=t,this.Co(new Te(this.TNt)))},this.Mh=()=>{this.G_&&this.Co(new pa(this.U_))},this.dOt=()=>{this.Co(new Ye(this.U_))},this.wWt=()=>{this.STt(),this.Co(new Rt(this.U_))},this.Vm=()=>{void 0!==this.yWt&&(ra.p_(this.yWt),this.yWt=void 0),this.Co(new $e(this.U_))},this.vWt=()=>{this.Co(new Gt(this.U_))},this.Yj=()=>{this.Co(new Dr(this.U_,this.Sg))},this.J4=()=>{const t=this.Njt;Td(this.AWt,t)||(this.Co(new yJ),this.AWt=t),this.Co(new ri(this.U_,this.R_))},this.zVt=hu((t=>{t.$D===Jt.VA&&this.oGt()&&$r(this.aGt())}),200),this.BVt=t=>{var i;this.KTt+=t.PQt;const e=this.rt.U>0?t.$D===Jt.VA:t.$D===Jt.WA;"nut"===t.RQt&&e&&$r(this._Vt()),this.Co(new $Q(function(t){if(t){if(void 0!==t.Dyt){var i,e;const s=t.Dyt.Cn+(null!=(e=t.Dyt.U)?e:0);return{zu:t.lT,Sat:[null==(i=t.Dyt)?void 0:i.Cn,s],tE:!0}}return{zu:t.lT.toString()||"",tE:!0}}return{zu:"",tE:!0}}(t.uri),(null==(i=this.bjt)?void 0:i.GP)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.$D,t.httpStatusCode,t.PQt))},this.We=()=>{this.Co(new Ur(this.U_))},this.Vz=()=>{this.Co(new Ko(this.U_))},this.mWt=()=>{this.mSt()},this.pWt=()=>{this.Co(new St(this.U_,this.zg))},this.fWt=()=>{this.Fm.Eg?this.Co(new Ib(this.U_)):(null!=this.yWt||(this.yWt=ra.A_((()=>{this.cWt&&(this.dLt=void 0,$r(this.lGt()))}),2500)),this.STt(),this.Co(new Ib(this.U_)))},this._Wt=()=>{this.cWt=!0,this.Co(new We(this.U_,this.Sg))},this.EGt=t=>{be(t)||De(t)||Nc(t)||(this.EVt(),$r(this.LVt()),this.Co(new Fq(t)))},this.SUt=()=>{this.Jzt()},this.zGt=t=>{$r(this.yVt(t.Mjt,this.dE.f_))},this.pmt=t=>{if(be(t))return;const i=t instanceof ao?t:new ao(qa.MEDIA_DECODE_ERROR,t.message,t);this.rB(i)},this.onTextTrackChange=t=>{if(!this.uGt)return;const i=t.Lt,e=this.rVt(i);e&&(i._v===yi.vv||i._v===yi.Jn?($r(this.AVt(e)),this.oVt.forEach((t=>{t!==i&&(t._v=yi.Ch)}))):this.vGt&&this.vGt===e&&$r(this.RGt(this.rGt,this.nGt,void 0)))},this.retryOfflineRenditionsCallback=async(t,i)=>{this.wGt!==t&&this.Pjt!==t&&this.Bjt!==t||(await this.kSt.cUt(t,i),t.djt.Uzt=-1/0)},this.kNt=()=>{this._Tt()},this.LNt=()=>{this.gTt()},this.UVt=t=>{const i=this.uGt,e=null==i?void 0:i.xPt;if(this.kSt.MUt(t.$nt,t.Mjt.djt),!e&&(this.kSt.bUt(t.$nt,t.Mjt.djt),this.GGt.eRt(),i)){const t=void 0!==this.rGt&&!Ai(i.Jjt,this.rGt),e=void 0!==this.nGt&&!Ai(i.$jt,this.nGt);(t||e)&&this.RGt(t?void 0:this.rGt,e?void 0:this.nGt,this.vGt).catch(Br)}},this.QVt=t=>{this.GGt.rRt(t.Mjt,t.Adt)},this.FVt=t=>{this.GGt.hRt(t.Mjt,t.rYt.JS())},this.YVt=t=>{this.kSt.AUt(t.Mjt)},this.rut=new NH(o),this.Fm=t,this.aE=i,this.Sz=new Qq(this.wU.VH),this.mVt=new Yq(this.Fm),this.gVt=new tK(this.wU),this.Mlt=h.retryConfiguration,this.YT=new Ds,this.VT=new Ds,this.GGt=new Uq(this,this.wU,this.YT,this.VT),this.cVt=new iu,this.Rz=new kr(this.Fm,this.aE),this.Avt=new TH(this.Fm),this.sxt=new lG(this.Fm),this.Dl=new vl([this.cVt,this.Rz.Z,this.Avt.Z,this.sxt.Z,this.Fm.nt]),this.Lz=new ju(this.aE),this.Fm.Qz=this.Lz,this.DNt=new E$(this,this.Fm),this.uWt=new Xe(this.DNt,!0),this.dWt()}},D$=class{async hB(t,i){if(!zn(t.type))return!1;if(t.useNativePlayback)return!1;const e=t.contentProtection;if(e&&!nn(e)){if(!dw(e))return!1;if(!await this.dnt(e))return!1}return!0}async dnt(t){return!!t.aes128||(!(!t.playready||!await ra.AO())||(!(!t.widevine||!await ra.vO())||(!(!t.clearkey||!await ra.pO())||!t.fairplay&&await ra.IO())))}},E$=class extends fl{get Sg(){return this.Qo.Sg}CNt(){this.Co(new Dr(this.U_,this.Sg))}constructor(t,i){super(i),this.Qo=t}};function k$(t){return t.reduce(((t,i)=>t.Sn(i.djt.Mzt)),new Ri([0,1/0]))}function L$(t){const i=bo(t,(t=>t.fjt)),e=t.filter((t=>t._jt)),s=ra.$et,n=e.map((t=>t.gs)).filter(Ks),r=l$(n,s);return r?bo(e,(t=>t.gs===r)):i}function x$(t,i){for(const e of i){const i=t.filter((t=>t.$nt&&t.$nt.mkt&&Di(t.$nt.mkt,e)));if(0!==i.length)return i}}function C$(t){var i;return null!=(i=L$(t))?i:t[0]}function O$(t,i){return t.filter((t=>j$(t,i)))}function j$(t,i){const e=i+N$,s=0===t.$jt.length||t.$jt.some((t=>t.djt.Uzt<ra.m_()-e)),n=0===t.Jjt.length||t.Jjt.some((t=>t.djt.Uzt<ra.m_()-e));return s&&n}function R$(t,i){if(!i||i.djt.bPt)return!1;const e=i.djt.jnt;return 0!==e.length&&e[0].MS>t}var P$=class{async ZUt(t,i,e){try{const s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:e},s,t);return new j(n)}catch(t){throw new ao(qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}h_(){}static LO(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}},z$=class extends Os{constructor(t,i){super(t),this.data=i}},B$=["message","messageerror","error"],zh=class extends Os{constructor(t){super(hi.ha),this.error=t}},U$=class extends Mo{get MWt(){return this.bWt.f_.n_}TWt(t,i){this.MWt||(void 0!==this.SWt?this.SWt.TWt(t,i):this.NWt.push({pL:t,IWt:i}))}DWt(){this.MWt||(this.bWt.g_(),To(this.NWt),void 0!==this.SWt&&this.SWt.DWt())}constructor(t){super(),this.SWt=void 0,this.NWt=[],this.EWt=t=>{if(this.MWt)t.DWt();else{this.SWt=t,this.SWt.yn(B$,this.Ds);for(const i of this.NWt)t.TWt(i.pL,i.IWt);To(this.NWt)}},this.kWt=t=>{if(this.MWt)return;const i=t instanceof g?t:new g("Could not create Worker.");this.Co(new zh(i)),this.DWt()},this.bWt=new Bd,t(this.bWt.f_).then(this.EWt,this.kWt)}};var Q$=class extends Mo{TWt(t,i){i?this.SWt.postMessage(t,i):this.SWt.postMessage(t)}DWt(){this.Vo(),this.SWt.removeEventListener("message",this.LWt),this.SWt.removeEventListener("messageerror",this.xWt),this.SWt.removeEventListener("error",this.L6),this.SWt.terminate()}constructor(t,i){super(),this.LWt=t=>{this.Co(new z$("message",t.data))},this.xWt=t=>{this.Co(new z$("messageerror",t.data))},this.L6=t=>{null==t.preventDefault||t.preventDefault.call(t);const i=t.error instanceof g?t.error:new g(t.message);this.Co(new zh(i)),this.DWt()},this.SWt=new Dl(t,i),this.SWt.addEventListener("message",this.LWt),this.SWt.addEventListener("messageerror",this.xWt),this.SWt.addEventListener("error",this.L6)}},F$=0,Y$=class extends Mo{TWt(t,i){i?this.CWt.contentWindow.postMessage({type:"message",data:t},"*",i):this.CWt.contentWindow.postMessage({type:"message",data:t},"*")}DWt(){var t;this.CWt.removeEventListener("load",this.OWt),self.removeEventListener("message",this.jWt),null==(t=this.CWt.contentWindow)||t.postMessage({type:"terminate"},"*"),wi(this.CWt)}constructor(t,i){super(),this.OWt=()=>{this.CWt.removeEventListener("load",this.OWt),this.CWt.contentWindow.postMessage({type:"initialize",id:this.uS,script:this.RWt},"*")},this.jWt=t=>{t.origin===this.PWt&&t.data.id===this.uS&&("initialized"===t.data.type||("error"===t.data.type?(this.Co(new zh(new g(t.data.data.message))),this.DWt()):this.Co(new z$("message",t.data.data))))},this.uS=F$++,this.RWt=t;const e=ra.Dh("iframe.html",i);this.CWt=function(t){const i=h.createElement("iframe");return i.width="0",i.height="0",i.style.display="none",i.role="",i.src=t,h.body.appendChild(i),i}(e.href),this.PWt=e.origin,this.CWt.addEventListener("load",this.OWt),self.addEventListener("message",this.jWt)}};function G$(t,i,e){const s=ra.wp(t,i);return new U$((t=>async function(t,i,e,s){let n;try{return n=new Q$(t,e),await X$(n,s),n}catch(t){null==n||n.DWt(),me(t)}if(H$&&cU){let i;try{const e=await ra.Hj.uD({zu:t,ZD:Cl.GET,qD:Ft.Ru,f_:s});i=await e.uE(s)}catch(t){me(t)}if(i){let t;try{const r=cU([i],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new Q$(t,e),await X$(n,s),n}catch(t){null==n||n.DWt(),me(t),H$=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new Y$(t,i),await X$(n,s),n}catch(t){throw null==n||n.DWt(),t}}(s,i,e,t)))}var V$,W$,H$=!0;async function X$(t,i){const e=await t.k_(["message","error"],i);if("error"===e.type)throw function(t){return new ao(qa.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(e.error);if(!function(t){return od(t)&&"8.3.0"===t.zWt}(e.data))throw new ao(qa.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (8.3.0).");return e}!function(t){t.BWt="ZUt",t.UWt="yQt"}(V$||(V$={})),function(t){t.QWt="FWt",t.YWt="GWt"}(W$||(W$={}));var Z$=class{VWt(){const t=G$(this.WWt,this.HWt,{name:"THEOplayer decrypt worker"});return t.yn("message",this.XWt),t.yn("error",this.ZWt),t}ZUt(t,i,e){const s=""+ ++this.qWt,n={KWt:V$.BWt,JWt:s,$Wt:t,tHt:i,iHt:e},r=new Oi;return this.eHt.set(s,r),null!=this.SWt||(this.SWt=this.VWt()),this.SWt.TWt(n),r.OL}h_(t){void 0===t&&(t=new Fh),this.eHt.forEach((i=>i.xL(t))),this.eHt.clear(),this.SWt&&(this.SWt.DWt(),this.SWt=void 0)}constructor(t){this.SWt=void 0,this.qWt=0,this.eHt=Pu(),this.XWt=t=>{const i=t.data,e=i.sHt,s=this.eHt.get(e);if(s)if(this.eHt.delete(e),i.nHt===W$.QWt)s.LL(i.rHt);else if(i.nHt===W$.YWt){const t=i.oHt,e=i.hHt?new g(i.hHt):void 0,n=new ao(qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",e);s.xL(n)}},this.ZWt=t=>{const i=new ao(qa.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.h_(i)},this.HWt=t;try{this.WWt=ra.wp("theoplayer.d.js",t)}catch(t){throw new ao(qa.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function q$(t){return P$.LO()?new P$:new Z$(t)}function K$(t){const i=bo(t.boxes,ux);if(!i)return;const e=bo(i.boxes,cx);return e?e.handlerType:void 0}function J$(t){const i=new vM;return i.boxes.push(...t.boxes),i}function $$(t){const i=new wr;return i.boxes.push(...t.boxes),i}var t0=8;function i0(t,i){const e=function(t){const i=new Hy;return i.boxes.push(...t.boxes),i}(t),s=s0(i);for(let t=0;t<e.boxes.length;t++){const n=e.boxes[t];if(n===i)e.boxes[t]=new uy(new j(i.getSize()-t0));else if(lx(n)){const i=n,r=gt(i.boxes,(t=>t instanceof jy&&t.trackId===s));if(r>=0){const s=i.boxes[r],n=$$(i);n.boxes[r]=new uy(new j(s.getSize()-t0)),e.boxes[t]=n}}}return e}function e0(t,i){const e=function(t){const i=new iM;return i.boxes.push(...t.boxes),i}(t);for(let t=0;t<e.boxes.length;t++){const s=e.boxes[t];if(_x(s)){const n=bo(s.boxes,gx);n&&n.trackId===i&&(e.boxes[t]=new uy(new j(s.getSize()-t0)))}}return e}function s0(t){return bo(t.boxes,ax).trackId}function n0(t,i,e,s){const n=bo(t.boxes,gx),r=e.ZN(i).NN();let o=ii.ZERO;for(const i of t.boxes){if(i instanceof fr){o=pg(i.baseMediaDecodeTime,r),i.baseMediaDecodeTime=i.baseMediaDecodeTime.subtract(o);break}if(i instanceof qy){o=pg(ii.fromNumber(i.baseMediaDecodeTime),r),i.baseMediaDecodeTime-=o.toNumber();break}}if(o.isZero())return;const h=bo(t.boxes,wx);if(void 0!==h&&h.samples.length>0){const t=h.samples;if(!h.flags.sampleDurationPresent){h.flags.sampleDurationPresent=!0;const i=null!=s?s:n.defaultSampleDuration;for(const e of t)e.duration=i}t[0].duration+=o.toNumber(),h.samples=t}}var r0="Mp4Transmuxer",o0=class extends KJ{vYt(t,i){Vr(i);const e=t.Mjt,s=Gx(vh(t.mPt.ly.ly));if(!s)throw new g("Mp4Transmuxer - Unable to parse "+e.Av+" MP4 initializer.");this.K$=s;const n=function(t){let i,e;for(const s of t.Z)i||(i=s.ZJ),e||(e=s.XJ);if(i||e)return{mkt:i,Akt:e,IRt:void 0};return}(s);n&&this.AYt(e,n);const r=function(t){for(const i of t.Z)if(void 0!==i.qJ)return i.qJ;return}(s);void 0!==r&&this.yYt(e,r);const o=function(t){var i;const e=bM(t),s=bo(e.boxes,ox),n=s.boxes.filter(hx),r=bo(n,(t=>K$(t)===py.AUDIO)),o=bo(n,(t=>K$(t)===py.VIDEO)),h={mkt:{AM:r?s0(r):void 0},Akt:{AM:o?s0(o):void 0}},a=null==(i=bo(s.boxes,lx))?void 0:i.boxes.filter(dx);var u,c;const l=a?{mkt:null!=(u=bo(a,(t=>t.trackId===h.mkt.AM)))?u:void 0,Akt:null!=(c=bo(a,(t=>t.trackId===h.Akt.AM)))?c:void 0}:void 0;var d,f;if(l&&(h.mkt.Vb=null==(d=l.mkt)?void 0:d.defaultSampleDuration,h.Akt.Vb=null==(f=l.Akt)?void 0:f.defaultSampleDuration),!r||!o)return{mkt:r?t:void 0,Akt:o?t:void 0,kI:h};const _=J$(e),g=J$(e),w=e.boxes.indexOf(s);_.boxes[w]=i0(s,o),g.boxes[w]=i0(s,r);const v=_.serialize().join(),m=g.serialize().join();return{mkt:v,Akt:m,kI:h}}(t.mPt.ly.ly);if(this.aHt=o.kI,o.Akt){const i=bo(s.Z,(t=>t.AM===o.kI.Akt.AM)),e={Av:"PEt",ly:{Av:Lu.jZ,ly:o.Akt},Zht:Jt.VA,yPt:t.yPt,NYt:{$nt:'video/mp4; codecs="'+i.XJ+'"',fPt:t.fPt},MS:t.MS,Mjt:t.Mjt,VUt:t.mPt.VUt};this.BFt(e)}if(o.mkt){const i=bo(s.Z,(t=>t.AM===o.kI.mkt.AM)),e={Av:"PEt",ly:{Av:Lu.jZ,ly:o.mkt},Zht:Jt.WA,yPt:t.yPt,NYt:{$nt:'audio/mp4; codecs="'+i.ZJ+'"',fPt:t.fPt},MS:t.MS,Mjt:t.Mjt,VUt:t.mPt.VUt};this.BFt(e)}return Promise.resolve()}async pYt(t,i){Vr(i);const e=t.nut.VUt;wt.IM(r0,"Transmuxing fMP4: "+Ge(e.Jpt));const s=t.nut.ly,n=h0(s.ly,this.K$),r=Nd(n.map((t=>t.Q7)),im);if(void 0!==r&&(e.F7=r,this.bYt(t.Mjt)),!this.OBt.aBt(t.yPt)){const s=A.$N(e.MS);if(n.length>0){const i=Nd(n.map((t=>t.uHt)),im);for(const n of this.cYt)this.OBt.ABt(t.yPt,n,i,s,a0(e),!1);this.bYt(t.Mjt)}this.OBt.aBt(t.yPt)||await Jr(this.OBt.cBt(t.yPt),i)}const o=this.OBt.wBt(t.yPt),h=e.F7?this.OBt.vBt(e.F7,e).JS():e.MS,a=JJ(e,h);var u;const c={KFt:a,JFt:$J(e,a),MS:h,ct:null!=(u=e.ct)?u:0,pI:o.JS(),yPt:t.yPt,Mjt:t.Mjt,VUt:t.nut.VUt},l=function(t,i){if(void 0===i.mkt.AM)return{mkt:void 0,Akt:t};if(void 0===i.Akt.AM)return{mkt:t,Akt:void 0};const e=bM(t),s=J$(e),n=J$(e);for(let t=0;t<e.boxes.length;t++){const r=e.boxes[t];fx(r)&&(s.boxes[t]=e0(r,i.Akt.AM),n.boxes[t]=e0(r,i.mkt.AM))}const r=s.serialize().join(),o=n.serialize().join();return{mkt:r,Akt:o}}(s.ly,this.aHt);if(l.Akt){var d;const i=this.aHt.Akt.AM,s=bo(this.K$.Z,(t=>t.AM===i)),o=bo(n,(t=>t.AM===i)),h=this.cHt(l.Akt,s,o,null==(d=this.aHt)?void 0:d.Akt.Vb,e);this.lHt=s,this.MYt(t.Mjt,e,o.Q7.uN(r));const a=ol({Av:"nut",ly:{Av:Lu.jZ,ly:h},Zht:Jt.VA},c);this.BFt(a)}if(l.mkt){const t=ol({Av:"nut",ly:{Av:Lu.jZ,ly:l.mkt},Zht:Jt.WA},c);this.BFt(t)}this.dHt=e,this.fHt=n}cHt(t,i,e,s,n){if(!a0(n))return t;if(!this.dHt||!this.lHt||!this.fHt)return t;const r=this.lHt.AM,o=bo(this.fHt,(t=>t.AM===r)),h=this.OBt.vBt(o._Ht,this.dHt),a=this.OBt.vBt(e.Q7,n).uN(h).ZN(i.cM);if(a.sN(A.wN))return t;if(a.$S(A.$N(.5)))return t;const u=ha(n)?n:n.WPt;return wt.Xjt(r0,"Stretching first video frame of segment #"+u.$Rt+" to fill gap of "+a.JS()+"s"),function(t,i,e,s){const n=bM(t),r=bo(n.boxes,fx);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof uu&&n0(t,i,e,s);const n=r.getSize();if(n!==t){const i=n-t;for(const t of r.boxes)t instanceof uu&&vx(t,i)}}return n.serialize().join()}(t,i.cM,a,s)}constructor(...t){super(...t),this.K$=void 0,this.aHt=void 0,this.dHt=void 0,this.fHt=void 0,this.lHt=void 0}};function h0(t,i){const e=Gi(Ot.Wy(vh(t)),X.kA);if(!e)throw new g("Mp4Transmuxer - Unable to parse segment or part.");return function(t,i){const e=[];for(const n of t.Z){if(!n.eT||0===n.iT.length||0===n.iT[0].aT.length)continue;const t=n.zy.AM,r=bo(i.Z,(i=>i.AM===t));let o=0,h=1/0,a=0;const u=n.zy.Vb||0;for(const t of n.iT)for(const i of t.aT){const t=i.uT||0,e=o+t;var s;o+=null!=(s=i.ct)?s:u;const n=o+t;e<h&&(h=e),n>a&&(a=n)}const c=A.fN(n.eT.eT,r.cM);e.push({AM:t,uHt:c,Q7:c.nS(A._N(h,r.cM)),gHt:c.nS(A._N(o,r.cM)),_Ht:c.nS(A._N(a,r.cM))})}return e}(e,i)}function a0(t){return ha(t)?t.vPt:0===t.XPt&&t.WPt.vPt}var u0,c0="MpegtsTransmuxer",l0=class extends o0{vYt(t,i){return super.vYt(t,i)}_Yt(t,i){if(super._Yt(t,i),this.ast.wHt())return;var e;const s=null!=(e=null==i?void 0:i.Jpt)?e:t.Jpt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.lT)&&this.ast.vHt()}mHt(t){let i;return t.Mjt===this.pHt&&this.AHt.has(t.yPt)?i=this.AHt.get(t.yPt):(i=p$(t.nut.ly.ly),this.pHt=t.Mjt,this.AHt.set(t.yPt,i)),i}async pYt(t,i){Vr(i);const e=this.mHt(t),s=t.nut;if(e!==f$.$Yt&&e!==f$.tGt)return super.pYt(t,i);if(s.VUt.fPt.some(f0))throw new ao(qa.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.ast.vHt();let r;e===f$.$Yt?(wt.IM(c0,"Transmuxing MPEG-TS: "+Ge(s.VUt.Jpt)),r=await n.yHt({data:s.ly.ly,metadata:this.MHt})):(wt.IM(c0,"Transmuxing raw audio: "+Ge(s.VUt.Jpt)),r=await n.bHt({data:s.ly.ly,metadata:this.MHt})),Vr(i),this.AYt(t.Mjt,{mkt:r.metadata.audio_codec,Akt:r.metadata.video_codec,IRt:void 0}),r.metadata.video_frame_rate&&this.yYt(t.Mjt,r.metadata.video_frame_rate);const o=_0(r.metadata.first_decode_timestamp),h=_0(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?_0(r.metadata.first_video_presentation_timestamp):void 0;if(s.VUt.F7=h,this.bYt(t.Mjt),void 0!==a&&this.MYt(t.Mjt,s.VUt,function(t,i){let e=t.uN(i);return e.rN(A.wN)&&(e=e.nS(Ue())),e}(a,h)),!this.OBt.aBt(t.yPt)){const e=A.$N(s.VUt.MS);for(const i of this.cYt)this.OBt.ABt(t.yPt,i,o,e,a0(s.VUt),!0);this.bYt(t.Mjt),this.OBt.aBt(t.yPt)||await Jr(this.OBt.cBt(t.yPt),i)}const u=this.OBt.pBt(o,s.VUt);this.MHt=r.metadata;const c=this.OBt.vBt(h,s.VUt).JS(),l=JJ(s.VUt,c);var d;const f={KFt:l,JFt:$J(s.VUt,l),MS:c,ct:null!=(d=s.VUt.ct)?d:0,pI:u.JS(),yPt:t.yPt,Mjt:t.Mjt,VUt:s.VUt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.cYt){const i=ol({Av:"nut",ly:void 0,Zht:t},f);this.BFt(i)}return}const _=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.THt||this.SHt!==t.yPt||!Z_(this.THt,r.data.audio_init))){const i=this.OBt.vBt(s.VUt.F7,s.VUt).JS(),e={Av:"PEt",ly:{Av:Lu.jZ,ly:r.data.audio_init},Zht:Jt.WA,yPt:t.yPt,NYt:{$nt:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',fPt:s.VUt.fPt},MS:i,Mjt:t.Mjt,VUt:s.VUt};this.THt=r.data.audio_init,this.SHt=t.yPt,this.BFt(e)}const i=ol({Av:"nut",ly:{Av:Lu.jZ,ly:r.data.audio_media},Zht:Jt.WA},f);this.BFt(i)}else if(t.nut.VUt.GPt&&Ai(this.cYt,Jt.WA)){const t=ol({Av:"nut",ly:void 0,Zht:Jt.WA},f);this.BFt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.NHt||this.IHt!==t.yPt||!Z_(this.NHt,r.data.video_init))){const i=this.OBt.vBt(s.VUt.F7,s.VUt).JS(),e={Av:"PEt",ly:{Av:Lu.jZ,ly:r.data.video_init},Zht:Jt.VA,yPt:t.yPt,NYt:{$nt:'video/mp4; codecs="'+r.metadata.video_codec+'"',fPt:s.VUt.fPt},MS:i,Mjt:t.Mjt,VUt:s.VUt};this.NHt=r.data.video_init,this.IHt=t.yPt,this.DHt=Gx(vh(r.data.video_init)),this.BFt(e)}const i=this.DHt.Z[0],e=h0(r.data.video_media,this.DHt)[0],n=this.cHt(r.data.video_media,i,e,void 0,s.VUt);this.lHt=i;const o=ol({Av:"nut",ly:{Av:Lu.jZ,ly:n},Zht:Jt.VA},f);this.BFt(o),_.push(e)}else if(t.nut.VUt.GPt&&Ai(this.cYt,Jt.VA)){const t=ol({Av:"nut",ly:void 0,Zht:Jt.VA},f);this.BFt(t)}this.dHt=s.VUt,this.fHt=_}g_(){this.THt=void 0,this.NHt=void 0,this.SHt=-1,this.IHt=-1,super.g_()}constructor(t,i,e,s){super(i,e,s),this.MHt=void 0,this.THt=void 0,this.NHt=void 0,this.DHt=void 0,this.SHt=-1,this.IHt=-1,this.pHt=void 0,this.AHt=Gs(),this.ast=t}},d0=class{Qbt(t,i,e){return new l0(this,t,i,e)}};function f0(t){return t.ZD===Sc.ERt}function _0(t){return A.fN(ii.fromBits(t.low,t.high),t.base)}!function(t){t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4"}(u0||(u0={}));var g0=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=Po.hk;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module($s("AGFzbQEAAAA="))}catch(t){return!1}}();return g0=()=>t,t};var w0=class{yHt(t){return this.EHt(u0.MPEGTS_TO_FMP4,t)}bHt(t){return this.EHt(u0.RAW_AUDIO_TO_FMP4,t)}VWt(){const t=G$(this.WWt,this.HWt,{name:"THEOplayer transmux worker"});return t.yn("message",this.XWt),t.yn("error",this.ZWt),t}EHt(t,i){const e=++this.qWt,s={type:t,id:e,input:i},n=new Oi;return this.eHt.set(e,n),this.SWt.TWt(s),n.OL}h_(t){void 0===t&&(t=new Fh),this.eHt.forEach((i=>i.xL(t))),this.eHt.clear(),this.SWt.DWt()}constructor(t){this.qWt=0,this.eHt=Gs(),this.XWt=t=>{const i=t.data;if(void 0!==i.requestId){const t=this.eHt.get(i.requestId);if(!t)return;this.eHt.delete(i.requestId),i.success?t.LL(i.output):t.xL(new ao(i.errorCode,i.error))}else i.success||this.h_(new ao(i.errorCode,i.error))},this.ZWt=t=>{const i=new ao(qa.MEDIA_DECODE_ERROR,t.error.message,t.error);this.h_(i)},this.HWt=t;const i=g0()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.WWt=ra.wp(i,t)}catch(t){throw new ao(qa.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.SWt=this.VWt()}},v0=class extends d0{wHt(){return void 0!==this.SWt}vHt(){var t;return null!=(t=this.SWt)?t:this.SWt=new w0(this.kHt)}h_(){this.SWt&&(this.SWt.h_(),this.SWt=void 0)}constructor(t){super(),this.kHt=t,this.SWt=void 0}},m0=class{G7(){return new v0(this.kHt)}constructor(t){this.kHt=t}},p0=class extends I${Vg(){if(wh(this.Fm))return this.Fm.Vg()}get Yg(){return!1}set Yg(t){}async gn(){var t;await super.gn(),null==(t=this.jNt)||t.gn()}constructor(t,i,e,s,n,r,o,h){super(t,i,e,s,n,r,o,h),Po.zk&&(this.jNt=new MQ(this))}},A0=class extends p0{async gn(){await super.gn(),await this.Yz.Fz(this.Fm)}constructor(t,i,e,s,n,r,o,h){const a=new At(t);super(a.oB(Jt.VA),i,e,s,n,r,o,h),this.Yz=a}},y0=class extends D${async hB(t,i){return!!dC(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(Po.Ga||Po.sL))&&super.hB(t,i))}async dnt(t){return(!t.clearkey||!Po.zk)&&super.dnt(t)}};hn(new class extends y0{Yp(t,i,e,s,n,r,o){return new A0(i,e,n,r,q$(s.libraryLocation),new m0(s.libraryLocation),new ur(Th.lL.Pnt,Th.lL.Rnt,Th.lL.jnt,Th.lL.Bnt),s)}aB(){return!0}constructor(...t){super(...t),this.uB=tl.Mp}}),wt.Rt=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)};var M0=class{wnt(t,i){return Promise.resolve(!1)}mnt(t,i){return Promise.resolve(void 0)}fnt(t){return Promise.resolve(void 0)}aZ(t){return Promise.resolve(void 0)}},b0=class extends Mo{LHt(){var t;return null==(t=this.xHt)?void 0:t.djt}Cn(t){$r(ev((()=>this.CHt(t)),t))}async CHt(t){await this.kSt.eUt(t),this.OHt&&(this.jHt(this.OHt.ji,this.OHt.Ti),this.OHt=void 0),this.f3=!0}RHt(t,i){this.f3?this.jHt(t,i):this.OHt={ji:t,Ti:i}}jHt(t,i){const e=this.PHt(t,i),s=null==e?void 0:e.$jt[0];s!==this.xHt&&(this.zHt(),void 0!==s&&(this.xHt=s,this.BHt=new NJ(this.kSt,s),this.BHt.oQt()))}zHt(){this.xHt=void 0,this.BHt&&(this.BHt.h_(),this.BHt=void 0)}PHt(t,i){const e=bo(this.kSt.Tr.Kjt,(e=>void 0!==e.akt&&e.akt.ji===t&&e.akt.Ti===i));return null!=e?e:this.kSt.Tr.Kjt[0]}gn(){this.Vo(),this.zHt(),this.kSt.h_()}constructor(t,i,e){super(),this.xHt=void 0,this.BHt=void 0,this.OHt=void 0,this.UHt=()=>{this.Co(new Ro)},this.bc=t,this.kSt=new Gc(e,new M0,t.useCredentials,t.src,t.liveOffset),this.kSt.yn(Tf.Vv,this.Ds),this.f3=!1}},T0=class extends B{get ht(){return this.X3.ht}get O_(){return this.X3.O_}get R_(){return this.X3.R_}set R_(t){this.X3.R_=t}get bt(){return this.X3.bt}get U_(){return this.X3.U_}set U_(t){this.X3.U_=t}F_(t,i){this.U_=t}get ct(){return this.X3.ct}get G_(){return this.X3.G_}get H_(){return this.X3.H_}get Z_(){return this.X3.Z_}get lt(){return this.X3.lt}get K_(){return this.X3.K_}get eg(){return this.X3.eg}get og(){return this.X3.og}set og(t){this.X3.og=t}get cg(){return this.X3.cg}get fg(){return this.X3.fg}get gg(){return this.X3.gg}set gg(t){this.X3.gg=t}get pg(){return this.X3.pg}get yg(){return this.X3.yg}set yg(t){this.X3.yg=t}get Sg(){return this.X3.Sg}get Ig(){return this.X3.Ig}get Eg(){return this.X3.Eg}get Mz(){return this.X3.Mz}get nt(){return this.X3.nt}get Cg(){return this.X3.Cg}get rt(){return this.X3.rt}get Rg(){return this.X3.Rg}get zg(){return this.X3.zg}set zg(t){this.X3.zg=t}get Qg(){return this.X3.Qg}get Yg(){return this.X3.Yg}set Yg(t){this.X3.Yg=t}get Tz(){return this.X3.Tz}get Km(){}qg(){return this.X3.qg()}Gg(){return this.X3.Gg()}Vg(){return this.X3.Vg()}be(){return this.X3.be()}$g(){return this.X3.$g()}iw(){return this.X3.iw()}Hg(){return this.X3.Hg()}Xg(){return this.X3.Xg()}tr(){return this.X3.tr()}ga(t,i,e){return this.X3.ga(t,i,e)}ge(){return this.X3.ge()}Kg(){return this.X3.Kg()}Jg(){return this.X3.Jg()}gn(){this.Vo();for(const t of vS)this.X3.fn(t,this.Ds);return this.X3.gn()}constructor(t){super(),this.X3=t;for(const t of vS)this.X3.yn(t,this.Ds)}},S0=class extends T0{async ga(t,i,e){await super.ga(t,i,e),t.hlsDateRange&&this.Hpt(t,i,e)}Hpt(t,i,e){this.QHt=new b0(t,i,this.FHt),this.QHt.yn(Tf.Vv,this.handleManifestUpdate),this.QHt.Cn(e)}tr(){return this.TUt&&(this.nt.it(this.TUt),this.W5.it(this.TUt),this.TUt.gn(),this.TUt=void 0,this.YHt=!1),this.QHt&&(this.QHt.gn(),this.QHt=void 0),this.W5.tr(),super.tr()}gn(){return this.fn(Tf.Jv,this.mWt),this.QHt&&(this.QHt.gn(),this.QHt=void 0),this.W5.gn(),super.gn()}constructor(t,i,e){super(t),this.QHt=void 0,this.YHt=!1,this.TUt=void 0,this.handleManifestUpdate=()=>{const t=this.QHt.LHt();if(t){const i=this.Mz;if(i){const e=i.getTime();let s=this.TUt;s||(s=new WK,this.TUt=s),s.Yn(t.MPt,(t=>(t.getTime()-e)/1e3)),!this.YHt&&s.L.U>0&&(this.nt.tt(s),this.W5.tt(s),this.YHt=!0)}}},this.mWt=()=>{this.QHt&&this.QHt.RHt(this.Rg,this.Cg)},this.FHt=i,this.W5=new uh(this),this.yn(Tf.Jv,this.mWt)}};!function(t){Y.cB().lB(t)}((function(t,i,e){return new S0(t,i,e)}));var Yt=class extends tt{get name(){return"CastError"}constructor(t,i=""){super("An error occurred while casting."),this.errorCode=t,this.description=i}};async function N0(t){E0()||await async function(t){if(null==t?void 0:t.n_)return Promise.reject(new Fh);const{OL:i,LL:e,xL:n}=function(){let t,i;return{OL:new Promise(((e,s)=>{t=e,i=s})),LL:t,xL:i}}(),r=s.__onGCastApiAvailable,o=()=>{s.__onGCastApiAvailable=r,n(new Fh)};return s.__onGCastApiAvailable=(i,h)=>{i?e():n(new g(h)),null==t||t.c_(o),s.__onGCastApiAvailable=r,r&&r(i,h)},null==t||t.u_(o),i}(t),D0()||await Si(100,t),D0()||(ra.vp('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await I0())}var I0=ei((()=>function(t){return new Promise(((i,e)=>{const s=h.createElement("script");s.onload=()=>i(),s.onerror=t=>e((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch((()=>{throw new Yt("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))));function D0(){return Boolean("undefined"!=typeof cast&&cast.framework)}function E0(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function k0(t,i,e,s){if(Ks(i))for(const e of w.keys(i)){if("type"===e||"images"===e)continue;const s=i[e];Ks(s)&&(t[e]=s)}!function(t,i,e,s){if(!Ks(e)&&!Ks(null==i?void 0:i.images))return;t.images=[],e&&t.images.push(new s.Image(e));if(null==i?void 0:i.images)if(Sn(i.images))t.images.push(new s.Image(i.images));else if(tr(i.images))for(const e of i.images){let i;var n,r;if(Sn(e))i=new s.Image(e);else i=new s.Image(e.src),i.height=null!=(n=e.height)?n:null,i.width=null!=(r=e.width)?r:null;t.images.push(i)}}(t,i,e,s)}function L0(t,i,e){return void 0===e&&(e=chrome),function(t,i,e){switch(null==t?void 0:t.type){case"movie":{const s=new e.MovieMediaMetadata;return k0(s,t,i,e),s}case"audio":{const s=new e.MusicTrackMediaMetadata;return k0(s,t,i,e),!Ks(s.artist)&&Ks(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new e.TvShowMediaMetadata;return k0(s,t,i,e),!Ks(s.title)&&Ks(t.episodeTitle)&&(s.title=t.episodeTitle),!Ks(s.season)&&Ks(t.seasonNumber)&&(s.season=t.seasonNumber),!Ks(s.episode)&&Ks(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new e.GenericMediaMetadata;return k0(s,t,i,e),s}}}(t,i,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(e))}function Jh(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function x0(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return bo(t.items,(i=>i.itemId===t.currentItemId))}var Xc,uo="urn:x-cast:com.theoplayer.cast";!function(t){t.GHt="theoplayer_receiver_info",t.VHt="theoplayer_trackpropertychange",t.WHt="theoplayer_propertychange"}(Xc||(Xc={}));var C0;(C0||(C0={})).SKIP_AD="SKIP_AD";function Do(t){h.createElement("img").src=t}var O0=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function j0(t){if(!Sn(t))return;const i=t.match(O0);return i?3600*x(i[1],10)+60*x(i[2],10)+Number(i[3])+(Number(i[4])||0)/1e3:void 0}function R0(t){if(void 0===t)return;const i=t.match(/^([1-9]?\d|100)%$/);return i?x(i[1])/100:void 0}function Yc(t,i){return"vmap"===t.type||!Ks(t.type)&&!Ks(i)}function P0(t,i){return"vast"===t.type||!Ks(t.type)&&Ks(i)}var z0,B0=class{},U0=class extends B0{get HHt(){return this.Ic}XHt(){return null!=this.ZHt||(this.ZHt=Pe(this.Ic,(t=>t.XHt()))),this.ZHt}constructor(t){super(),this.Ic=t.sort(((t,i)=>t.Kb-i.Kb))}},Q0=class extends B0{get o(){return this.qHt}get Kb(){return this.KHt}get JHt(){return this.$Ht}constructor(t,i){super(),this.qHt=t,this.KHt=i,this.$Ht=!1}},F0=class extends Q0{get tXt(){return this.iXt}get eXt(){return this.sXt}get nXt(){return this.rXt}get oXt(){return this.hXt}get lt(){return this.vz}XHt(){if(void 0===this.aXt){let t,i,e,s=[];for(const n of this.iXt)n.uXt&&(t=n.uXt),n.cXt&&(i=n.cXt),n.lXt&&(e=n.lXt),s=s.concat(n.universalAdIds);this.aXt={oXt:this.oXt,uXt:t,dXt:i,lXt:e,lt:this.lt,fXt:s}}return[this.aXt]}constructor(t,i,e,s,n,r,o){super(t,i),this.sXt=e,this.rXt=s,this.hXt=n,this.iXt=r,this.vz=o}},Y0=class{get _Xt(){return this.gXt}get wXt(){return this.vXt}constructor(t,i){this.gXt=t,this.vXt=i}},G0=class{get mXt(){return this.pXt}get AXt(){return this.yXt}get MXt(){return this.bXt}get TXt(){return this.SXt}get Xl(){return this.NXt}set Xl(t){this.NXt=t}get IXt(){return this.DXt}get EXt(){return this.kXt}LXt(){this.kXt=!0}get eXt(){return this.sXt}constructor(t,i,e,s,n,r){this.pXt=t,this.yXt=i,this.bXt=e,this.SXt=s,this.kXt=!1,this.DXt=n,this.sXt=r}};!function(t){t.xXt="all",t.CXt="any",t.yB="none"}(z0||(z0={}));var Hh,V0=class{get OXt(){return this.jXt}get RXt(){return this.PXt}constructor(t,i){this.jXt=t,this.PXt=i}},W0=class{get o(){return this.uS}get ji(){return this.qx}get Ti(){return this.Kx}get zXt(){return this.BXt}get UXt(){return this.QXt}get FXt(){return this.YXt}get GXt(){return this.VXt}get WXt(){return this.HXt}get XXt(){return this.ZXt}get qXt(){return this.KXt}get mXt(){return this.pXt}get AXt(){return this.yXt}get MXt(){return this.bXt}get JXt(){return this.$Xt}get wXt(){return this.tZt}get iZt(){return this.eZt}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d,f,_,g){this.qx=t,this.Kx=i,this.uS=e,this.BXt=s,this.QXt=n,this.YXt=r,this.VXt=o,this.HXt=h,this.ZXt=a,this.KXt=u,this.pXt=c,this.yXt=l,this.bXt=d,this.$Xt=f,this.tZt=_,this.eZt=g}},H0=class{get id(){return this.uS}get uri(){return this.KPt}constructor(t,i){this.uS=t,this.KPt=i}},yo=class{get sZt(){return this.nZt}get rZt(){return this.oZt}get hZt(){return this.aZt}get uZt(){return this.cZt}constructor(t,i,e,s){this.nZt=t,this.oZt=i,this.aZt=e,this.cZt=s}},X0=class extends Q0{get oXt(){return this.hXt}get lZt(){return this.dZt}get fZt(){return this._Zt}get tXt(){return this.iXt}get gZt(){return this.wZt}get vZt(){return this.mZt}get lt(){return this.vz}XHt(){return void 0===this.dZt?[]:(null!=this.ZHt||(this.ZHt=this.dZt.XHt().map((t=>this.pZt(t)))),this.ZHt)}pZt(t){let i,e,s;for(const t of this.tXt)t.uXt&&(i=t.uXt),t.cXt&&(e=t.cXt),t.lXt&&(s=t.lXt);const n=t.oXt.concat(this.oXt);let r=t.uXt;if(i&&t.uXt){const e=new yo(t.uXt.AZt.sZt,t.uXt.AZt.rZt,t.uXt.AZt.hZt.concat(i.AZt.hZt),t.uXt.AZt.uZt.concat(i.AZt.uZt));r=t.uXt,r.AZt=e,r.wXt=r.wXt.concat(i.wXt)}let o=t.dXt;if(e&&e._Xt){var h,a;const s=[];for(const t of e._Xt)s.concat(t.TXt.hZt);const n=[];var u,c;for(const e of null!=(u=null==(h=t.dXt)?void 0:h._Xt)?u:[]){var l,d,f;const r=new yo(e.TXt.sZt,e.TXt.rZt,e.TXt.hZt.concat(s),(null!=(d=null==(l=t.uXt)?void 0:l.AZt.uZt)?d:[]).concat(null!=(f=null==i?void 0:i.AZt.uZt)?f:[]));n.push(new G0(e.mXt,e.AXt,e.MXt,r,e.IXt,e.eXt))}o=new Y0(n,(null!=(c=null==(a=t.dXt)?void 0:a.wXt)?c:[]).concat(e.wXt))}let _=t.lXt;if(_){var g;let i=_.OXt;var w,v;s&&s.OXt&&(i=s.OXt),_=new V0(i,(null!=(w=null==(g=t.lXt)?void 0:g.RXt)?w:[]).concat(null!=(v=null==s?void 0:s.RXt)?v:[]))}let m=t.lt;return this.lt&&(m=this.lt),{oXt:n,uXt:r,dXt:o,lXt:_,lt:m,fXt:t.fXt}}constructor(t,i,e,s,n,r,o,h,a){super(t,i),this.hXt=e,this.dZt=s,this._Zt=n,this.iXt=r,this.wZt=o,this.mZt=h,this.vz=a}},Z0=class{get o(){return this.uS}get yZt(){return this.MZt}get bZt(){return this.TZt}get WXt(){return this.HXt}get uXt(){return this.SZt}get cXt(){return this.NZt}get lXt(){return this.IZt}get universalAdIds(){return this.DZt}constructor(t,i,e,s,n,r,o,h){this.uS=t,this.MZt=i,this.TZt=e,this.HXt=s,this.SZt=n,this.NZt=r,this.IZt=o,this.DZt=h}},q0=class{get ct(){return this.EZt}get kZt(){return this.LZt}get wXt(){return this.vXt}set wXt(t){this.vXt=t}set AZt(t){this.xZt=t}get AZt(){return this.xZt}get CZt(){return this.OZt}set CZt(t){this.OZt=t}get jZt(){return this.kXt}get Xl(){return this.NXt}set Xl(t){this.NXt=t}get IXt(){return this.DXt}get eXt(){return this.sXt}LXt(){this.kXt=!0}constructor(t,i,e,s,n,r,o){this.EZt=t,this.LZt=i,this.vXt=e,this.xZt=s,this.OZt=n,this.kXt=!1,this.DXt=r,this.sXt=o}};function Ta(t,i){return $0(t)&&t.getAttribute(i)||void 0}function K0(t,i){return J0(t,i,void 0,!1)}function J0(t,i,e,s){return i===(t.localName?t.localName:t.nodeName)&&(s&&e?e===t.namespaceURI:!e||!t.namespaceURI||e===t.namespaceURI)}function He(t,i){const e=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);$0(n)&&K0(n,i)&&e.push(n)}return e}function $0(t){return t&&1===t.nodeType}function t1(t,i){const e=(new DOMParser).parseFromString(t,i);if(!e||e.getElementsByTagName("parsererror").length>0)throw new g('Invalid document for MIME type "'+i+'"');return e}function i1(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function e1(t){return"data:application/xml,"+encodeURIComponent(t)}function s1(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}!function(t){t.RZt="mute",t.PZt="unmute",t.Sh="pause",t.zZt="resume",t.BZt="rewind",t.UZt="skip",t.QZt="playerExpand",t.FZt="playerCollapse",t.Ah="fullscreen",t.YZt="exitFullscreen",t.GZt="expand",t.COLLAPSE="collapse",t.Ebt="start",t.VZt="firstQuartile",t.WZt="thirdQuartile",t.HZt="midpoint",t.XZt="complete",t.ZZt="acceptInvitationLinear",t.qZt="acceptInvitation",t.KZt="timeSpentViewing",t.JZt="otherAdInteraction",t.Zv="progress",t.$Zt="creativeView",t.tqt="adExpand",t.iqt="adCollapse",t.eqt="minimize",t.sqt="close",t.nqt="closeLinear",t.rqt="overlayViewDuration",t.oqt="breakStart",t.hqt="breakEnd",t.ha="error"}(Hh||(Hh={}));var n1=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function r1(t){return void 0!==t&&-1!==n1.indexOf(t)}var o1=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function h1(t){return void 0!==t&&-1!==o1.indexOf(t)}var a1=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function u1(t){return void 0!==t&&-1!==a1.indexOf(t)}function c1(t,i){if(void 0===t||""===t||void 0===i)return;let e=t.match(/^(\d+):(\d+):(\d+)$/);return e?C(e[1]||"0")+60*C(e[2]||"0")+C(e[3]||"0"):(e=t.match(/^(100|[1-9]\d|\d)%$/),e?C(e[1]||"0")*i/100:void 0)}var _o,qu,l1=class{get eF(){return this.aqt}get Ku(){return this.uqt}get eventURL(){return this.cqt}constructor(t,i,e){this.aqt=t,this.uqt=i,this.cqt=e}},d1=class{get lqt(){return this.dqt}constructor(t){this.dqt=t}},f1=class extends d1{get sZt(){return this.nZt}get iZt(){return this.eZt}get fqt(){return this._qt}constructor(t,i,e,s){super(t),this._qt=i,this.nZt=e,this.eZt=s}},_1=class extends d1{constructor(t){super(t)}},g1=class extends d1{constructor(t){super(t)}},w1={gqt:{jL:100,pL:"XML parsing error."},wqt:{jL:303,pL:"Empty or invalid VAST error."},vqt:{jL:400,pL:"General linear error"},mqt:{jL:403,pL:"Unsupported MIME-type or missing mediafiles error"},pqt:{jL:500,pL:"General nonlinear error"},IQ:{jL:900,pL:"Network error"}},v1=class{get Aqt(){return this.yqt}Mqt(t){if(!this.Aqt)return;const i=this.Aqt.replace(/\[ERRORCODE]/,""+t.jL);Do(i)}constructor(t){this.yqt=t}},va=class extends tt{get bqt(){return this.Tqt}get Sqt(){var t;return null!=(t=this.Nqt)?t:900}constructor(t,i,e,s){super(e||i&&m1[i]||t,s),this.Tqt=t,this.Nqt=i,this.Iqt=e}};!function(t){t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general"}(_o||(_o={})),function(t){t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED"}(qu||(qu={}));var m1={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function p1(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case Pl.Mp:case Pl.bp:case Pl.yp:return!0;default:return!1}}function A1(t){const i=Mb();return!!(p1(t)||t&&i&&(null==i?void 0:i.canPlayType)&&i.canPlayType(t))||(Ha("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function y1(t,i){for(const e of i){new v1(e).Mqt(t)}}function Ha(t){0}var M1,b1=class{get Dqt(){return this.Eqt}get kqt(){return this.Lqt}constructor(t,i){this.Eqt=t,this.Lqt=i}};!function(t){t.xqt="linear",t.Cqt="nonlinear",t.Oqt="companion",t.jqt="vmap"}(M1||(M1={}));var T1,S1=class t{async Rqt(i,e){if(Yc(i.sources,i.timeOffset)){const s=await t.Pqt(i.sources.src,e),n=s&&s.documentElement;if(!n)throw new va(_o.NETWORK,qu.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(K0(n,"VMAP"))return await this.zqt(n,i,e);if(K0(n,"VAST")){const t=await this.Bqt(n,e,!1);if(t){const e=new E1("",!0,!0,t);return[new I1("start",e,T1.xqt,"",[],!1,!0,i)]}return[]}throw new va(_o.GENERAL,qu.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(P0(i.sources,i.timeOffset))return[new D1(String(i.timeOffset),i,e)];throw new va(_o.GENERAL,qu.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async Uqt(i,e,s,n){let r;void 0===n&&(n=[]);try{r=await t.Pqt(i,e)}catch(t){throw y1(t instanceof va&&t.Sqt===qu.VAST_MALFORMED_RESPONSE?w1.wqt:w1.IQ,n),t}const o=r&&r.documentElement;if(o&&K0(o,"VAST"))return await this.Bqt(o,e,s,n)}async Qqt(t,i,e,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new va(_o.GENERAL,qu.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.Uqt(t.sources.src,s,!1),o=new E1("",!0,!0,r),h=new I1(i,o,T1.xqt,"",[],!1,!0,t);return h.Fqt=e,h}static async requestSuccessOnly(t,i){let e;try{e=await i.uD(t)}catch(t){throw new va(_o.NETWORK,qu.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!Xk(e))throw new va(_o.NETWORK,qu.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return e}static async Pqt(t,i){const e=new Zi({zu:t,qD:Ft.Ru,ZD:Cl.GET}),s=await this.requestSuccessOnly(e,i);try{return function(t){return t1(t,"text/xml")}(await s.ly())}catch(t){throw new va(_o.NETWORK,qu.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async Bqt(t,i,e,s){void 0===s&&(s=[]);const n=[],r=[],o=[];if(t&&K0(t,"VAST")){if(0!==He(t,"Ad").length){for(const e of He(t,"Ad"))try{const t=await this.Yqt(e,i,s);0===t.Kb?n.push(t):r.push(t)}catch(t){o.push(t)}if(0===n.length&&0===r.length&&o.length>0)throw o[0];return 1===n.length&&0===r.length?n[0]:0===n.length&&0!==r.length?new U0(r):n.length>0||r.length>0?new U0(r.concat(n)):void 0}if(0!==He(t,"Error").length){for(const i of He(t,"Error")){Ha(w1.gqt.pL);const t=i.textContent;t&&s.push(t),y1(w1.gqt,s)}throw new va(_o.GENERAL,qu.VAST_MALFORMED_RESPONSE,"The Ad Server responded with a VAST Error")}if(e)throw y1(w1.wqt,s),new va(_o.PARSING,qu.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}else if(e)throw y1(w1.wqt,s),new va(_o.PARSING,qu.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}async zqt(t,i,e){const s=[],n=He(t,"AdBreak");for(const t of n)try{const n=await this.Gqt(t,i,e);n&&s.push(n)}catch(t){ra.Wet(t)}return s}async Yqt(i,e,s){const n=Ta(i,"id")||"";let r=is(Ta(i,"sequence"));r||(r=0);const o=He(i,"InLine"),h=He(i,"Wrapper");if(0!==h.length)return await this.Vqt(h[0],n,r,e,s);if(0!==o.length)return t.Wqt(o[0],n,r,s);throw new va(_o.PARSING,qu.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static Wqt(i,e,s,n){const r=He(i,"Error")[0];let o;r&&r.textContent&&(o=r.textContent,n.push(o));const h=He(i,"AdSystem")[0];let a,u="";h&&(u=h.textContent||u);const c=He(i,"AdTitle")[0];c&&(a=c.textContent||void 0);const l=[];for(const t of He(i,"Impression"))t.textContent&&l.push(t.textContent);const d=t.Hqt(He(i,"Creatives")[0],u,n);return new F0(e,s,u,a,l,d,new v1(o))}async Vqt(i,e,s,n,r){const o=He(i,"Error")[0];let h="";o&&o.textContent&&(h=o.textContent,r.push(h));const a=He(i,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of He(i,"Impression"))t.textContent&&c.push(t.textContent);const l=He(i,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.Uqt(d,n,!0,r),_=He(i,"Creatives")[0];let g=[];_&&(g=t.Xqt(_,u,r));let w=q(Ta(i,"followAdditionalWrappers"));w||(w=!0);let v=q(Ta(i,"allowMultipleAds"));v||(v=!0);let m=q(Ta(i,"fallbackOnNoAd"));return m||(m=!1),new X0(e,s,c,f,w,g,v,m,new v1(h))}static Xqt(i,e,s){const n=[];for(const r of He(i,"Creative")){let i=Ta(r,"id");i||(i="");let o=is(Ta(r,"sequence"));o||(o=0);let h=Ta(r,"adId");h||(h="");const a=He(r,"Linear")[0];let u;a&&(u=t.Zqt(a,"wrapper",i,e,s));const c=He(r,"NonLinearAds")[0];let l,d;if(c)try{d=t.qqt(c,i,e),l=d}catch(t){}const f=He(r,"CompanionAds")[0];let _;f&&(_=t.Kqt(f)),n.push(new Z0(i,h,o,"",u,l,_,[]))}return n}static Hqt(i,e,s){const n=[];for(const r of He(i,"Creative")){let i=Ta(r,"id");i||(i="");let o=is(Ta(r,"sequence"));o||(o=0);let h=Ta(r,"adId");h||(h="");let a=Ta(r,"apiFramework");a||(a="");const u=He(r,"Linear")[0];let c;if(u)try{c=t.Zqt(u,"inline",i,e,s)}catch(t){}const l=He(r,"NonLinearAds")[0];let d,f;if(l)try{f=t.qqt(l,i,e),d=f}catch(t){}const _=He(r,"CompanionAds")[0];let g;_&&(g=t.Kqt(_));const w=He(r,"UniversalAdId"),v=t.parseUniversalAdIds(w);n.push(new Z0(i,h,o,a,c,d,g,v))}return n}static Zqt(i,e,s,n,r){const o=He(i,"Duration")[0];let h=0;if(o)h=j0(o.textContent)||0;else if(!o&&"inline"===e)throw new va(_o.PARSING,qu.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=Ta(i,"skipoffset");let u=-1;if(a){let t=j0(a);if(void 0===t&&a.indexOf("%")>-1){const i=_.abs(Number(a.replace(/(?![0-9])./g,"")))/100;S(i)||(t=h*i)}void 0!==t&&(u=t)}const c=He(i,"MediaFiles")[0];let l=[];if(c&&(l=function(t,i){const e=[];for(const s of He(t,"MediaFile")){const t=Ta(s,"delivery"),n=Ta(s,"type");if(!n){Ha();continue}if(!i(n))continue;let r=is(Ta(s,"width")),o=is(Ta(s,"height"));r||(Ha(),r=0),o||(Ha(),o=0);const h={delivery:t,type:n,width:r,height:o,contentURL:""+s.textContent};e.push(h)}return e}(c,A1)),"inline"===e&&(!c||0===l.length))throw y1(w1.mqt,r),new va(_o.PARSING,qu.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const d=He(i,"TrackingEvents")[0];let f=[];d&&(f=t.Jqt(d,r1,"linear"));const g=He(i,"VideoClicks")[0],w=t.$qt(g);return new q0(h,l,f,w,u,s,n)}static $qt(i){if(!i)return new yo("","",[],[]);const e=He(i,"ClickThrough")[0];let s,n="";e&&(s=e.textContent||void 0,n=Ta(e,"id")||"");const r=t.tKt(He(i,"ClickTracking")),o=t.tKt(He(i,"CustomClick"));return new yo(s,n,r,o)}static tKt(t){const i=[];for(const e of t){const t=e.textContent;if(!t)continue;const s=Ta(e,"id")||"";i.push(new H0(s,t))}return i}static Jqt(t,i,e){const s=[];for(const n of He(t,"Tracking")){const r=Ta(n,"event");if(!i(r)){Ha();continue}let o="";"linear"===e&&(o=Ta(t,"offset")||"0");const h=n.textContent;h&&s.push(new l1(r,o,h))}return s}static qqt(i,e,s){const n=[];for(const r of He(i,"NonLinear")){const i=He(r,"NonLinearClickThrough")[0];let o;i&&(o=i.textContent||void 0);const h=t.tKt(He(r,"NonLinearClickTracking")),a=He(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=Ta(a,"creativeType"),i=a.textContent||"",e=He(a.parentNode,"NonLinearClickThrough")[0];let s="";e&&(s=e.textContent||""),u=new f1(i,t,s,"")}const c=t.iKt(r),l=t.parseHtmlResource(r);if(!u&&!c&&!l){Ha();continue}const d=new yo(o,"",h,[]);n.push(new G0(u,c,l,d,e,s))}if(0===n.length)throw new va(_o.PARSING,qu.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=He(i,"TrackingEvents")[0];let o=[];return r&&(o=t.Jqt(r,h1,"nonlinear")),new Y0(n,o)}static parseUniversalAdIds(t){const i=[];for(const r of t){var e;const t=null!=(e=Ta(r,"idRegistry"))?e:"";var s,n;const o=null!=(n=null!=(s=Ta(r,"idValue"))?s:r.textContent)?n:"";i.push(new b1(t,o))}return i}static Kqt(i){let e=Ta(i,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(e)||(e=z0.yB);const s=[];for(const e of He(i,"Companion")){let i=is(Ta(e,"width")),n=is(Ta(e,"height")),r=Ta(e,"id"),o=is(Ta(e,"assetWidth")),h=is(Ta(e,"assetHeight")),a=is(Ta(e,"expandedWidth")),u=is(Ta(e,"rxpandedHeight")),c=Ta(e,"apiFramework"),l=Ta(e,"adSlotId"),d=is(Ta(e,"pxratio"));const f=He(e,"AltText")[0];let _=f?f.textContent:"";i||(Ha(),i=0),n||(Ha(),n=0),r||(r=""),o||(o=0),h||(h=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),_||(_="");const g=t.eKt(e),w=t.iKt(e),v=t.parseHtmlResource(e),m=He(e,"TrackingEvents")[0];let p=[];m&&(p=t.Jqt(m,u1,"companion"));const A=He(e,"CompanionClickThrough")[0];let y;A&&(y=A.textContent||void 0);const M=t.tKt(He(e,"CompanionClickTracking"));(g||w||v)&&s.push(new W0(i,n,r,o,h,a,u,c,l,d,g,w,v,new yo(y,"",M,[]),p,_))}return new V0(e,s)}static eKt(t){const i=He(t,"StaticResource")[0];let e;if(i&&i.parentNode){let t=Ta(i,"creativeType");t||(t="");const s=i.textContent,n=He(i.parentNode,"AltText")[0],r=He(i.parentNode,"CompanionClickThrough")[0];let o,h="";n&&(h=n.textContent||""),r&&(o=r.textContent||void 0),s&&(e=new f1(s,t,o,h))}return e}static iKt(t){const i=He(t,"IFrameResource")[0];let e;if(i){const t=i.textContent||"";e=new _1(t)}return e}static parseHtmlResource(t){const i=He(t,"HTMLResource")[0];let e;if(i){const t=i.textContent||"";e=new g1(t)}return e}async Gqt(i,e,s){const n=Ta(i,"timeOffset")||"0",r=Ta(i,"breakType")||T1.jT;let o=Ta(i,"breakId"),h=q(Ta(i,"repeatAfter"));if(void 0===o&&(o=""),void 0===h&&(h=!1),!(void 0!==Ph.sKt(n)))throw new va(_o.PARSING,qu.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=He(i,"AdSource")[0],u=He(i,"TrackingEvents")[0];let c=[];u&&(c=t.Jqt(u,s1,"vmap"));let l=Ta(a,"id");l||(l="");let d=q(Ta(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=q(Ta(a,"followRedirects"));f||(f=!0);const _=He(a,"AdTagURI")[0];let g="";const w=He(a,"VASTAdData")[0];if(!_||!_.textContent){if(w){if(w.firstElementChild&&J0(w.firstElementChild,"VAST")){const t=await this.Bqt(w.firstElementChild,s,!1);if(t){const i=new E1(l,d,f,t);return new I1(n,i,r,o,c,h,!1,e)}return}throw new va(_o.PARSING,qu.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new va(_o.PARSING,qu.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{g=_.textContent;const t=Ca(e);return t.sources.src=g,new D1(n,t,s)}catch(t){return}}};!function(t){t.jT="",t.xqt="linear",t.nKt="nonlinear",t.rKt="display"}(T1||(T1={}));var N1,Ph=class{static oKt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static hKt(t){}static aKt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static uKt(t){const i=t.split(":");let e=0;return e+=3600*Number(i[0]),e+=60*Number(i[1]),e+=Number(i[2]),e}static cKt(t){if(t<=0)return"00:00:00.000";const i=_.floor(t),e=t-i;return this.lKt(i/3600,2)+":"+this.lKt(i/60%60,2)+":"+this.lKt(i%60,2)+"."+this.lKt(1e3*e,3)}static lKt(t,i){return("00"+_.floor(t)).slice(-i)}static dKt(t,i){const e=this.sKt(t);if(0===e)switch(t){case"start":return 0;case"end":return-1}else{if(2===e)return R0(t)*i;if(1===e)return j0(t);if(3===e)return this.aKt(t);if(4===e){const i=Number(t);if(!S(i)&&i>=-1)return i}}}static sKt(t){return"start"===t||"end"===t?0:void 0!==j0(t.toString())?1:void 0!==R0(t.toString())?2:void 0!==this.hKt(t.toString())?3:S(Number(t))?void 0:4}};!function(t){t[t.n8=0]="n8",t[t.fKt=1]="fKt",t[t._Kt=2]="_Kt",t[t.gKt=3]="gKt",t[t.wKt=4]="wKt"}(N1||(N1={}));var Xh,I1=class{get vKt(){return this.mKt.integration}get pKt(){return this.AKt}get cPt(){return this.yKt}get CZt(){return this.OZt}set CZt(t){this.OZt=t}get wXt(){return this.tZt}get MKt(){return this.bKt}get TKt(){return this.SKt}get Wit(){return this.mKt}get NKt(){return this.Fqt.Kl}get W(){return!0}$n(){return Promise.resolve()}get Fqt(){return this.IKt}set Fqt(t){this.IKt=t}constructor(t,i,e,s,n,r,o,h){this.OZt=-1,this.AKt=i,this.yKt=t,this.DKt=e,this.bKt=s,this.SKt=r,this.tZt=n,this.EKt=o,this.mKt=h}},D1=class{get vKt(){return this.NXt.vKt}get pKt(){return this.NXt.pKt}get cPt(){return this.NXt.cPt}get CZt(){return this.NXt.CZt}set CZt(t){this.NXt.CZt=t}get wXt(){return this.NXt.wXt}get MKt(){return this.NXt.MKt}get TKt(){return this.NXt.TKt}get Wit(){return this.NXt.Wit}get NKt(){return this.NXt.NKt}get W(){return this.tst}$n(){var t;return null!=(t=this.kKt)?t:this.kKt=this.nst()}async nst(){const t=new S1;this.NXt=await t.Qqt(this.Wit,this.cPt,this.Fqt,this.aE),this.tst=!0}get Fqt(){return this.NXt.Fqt}set Fqt(t){this.NXt.Fqt=t}constructor(t,i,e){this.tst=!1,this.aE=e,this.NXt=new I1(t,void 0,"","",[],!1,!1,i)}},E1=class{get o(){return this.uS}get gZt(){return this.LKt}get xKt(){return this.CKt}get HHt(){return this.OKt}constructor(t,i,e,s){this.uS=t,this.LKt=i,this.OKt=s,this.CKt=e}};function k1(t,i){let e;if(t.vastAdsRequest&&(e=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return e1(t.adsResponse);return}(t.vastAdsRequest)),!e){const i=function(t){const i=t.contentUrl||t.contentId;if(!i)return;const e=t.contentType||"video/mp4",s=Bw(e)||zn(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+Ph.cKt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+Ph.cKt(t.whenSkippable)+'"':"",o='<MediaFile delivery="'+s+'" type="'+e+'">'+i1(i)+"</MediaFile>",h=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+i1(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+o+"</MediaFiles>"+h+"</Linear>",u=t.title?"<AdTitle>"+i1(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);i&&(e=e1(i))}const s=t.customData;if(e){const n={integration:null==s?void 0:s.integration,sources:{src:e,type:"vast"},timeOffset:i};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}!function(t){t.jKt="error",t.RKt="sourceupdate"}(Xh||(Xh={}));var L1=class extends Os{constructor(t){super("error"),this.lt=t}},x1=class extends Os{constructor(t,i){super("sourceupdate"),this.bt=t,this.yc=i}},C1=class extends Mo{get wM(){return this.PKt}zKt(t){this.BKt.zKt(t)}UKt(t){this.BKt.UKt(t)}QKt(t){this.BKt.QKt(t)}FKt(t){this.BKt.FKt(t)}YKt(t){this.PKt.addUpdateListener(t)}GKt(t){this.PKt.removeUpdateListener(t)}VKt(){const t=new Oi,i=new chrome.cast.media.GetStatusRequest;return this.PKt.getStatus(i,(()=>{t.LL({bt:this.B_(),yc:this.Wa()})}),(i=>t.xL(i))),t.OL}B_(){var t;return null==(t=this.PKt.customData)?void 0:t.currentSource}Wa(){var t;let i;if(null==(t=this.hCt.WKt())?void 0:t.version){var e;i=null==(e=this.PKt.customData)?void 0:e.sourceDescription}else{var s;const t=null==(s=x0(this.PKt))?void 0:s.customData;(function(t){return Vu(t)&&t.theoplayer_version>=1&&Ks(t.streamStart)&&Ks(t.isLive)&&Ks(t.sourceDescription)})(t)&&(i=t.sourceDescription),i||(i=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:O1(t)}}(this.PKt.media))}return i}Hg(){const t=new chrome.cast.media.PauseRequest;this.PKt.pause(t,Br,this.HKt)}Zg(){const t=new chrome.cast.media.StopRequest;this.PKt.stop(t,Br,this.HKt)}Xg(){const t=new chrome.cast.media.PlayRequest;this.PKt.play(t,Br,this.HKt)}JA(t,i){const e=new chrome.cast.media.SeekRequest;return e.currentTime=t,e.resumeState=i?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,i)=>{this.PKt.seek(e,t,(t=>{var e;i(new Yt(Jh(t.code),null!=(e=t.description)?e:void 0))}))}))}vg(t){this.BKt.L7(uo,function(t){return{type:Xc.WHt,properties:{playbackRate:t}}}(t)).catch(this.XKt)}ZKt(t){const i=new chrome.cast.media.EditTracksInfoRequest(t);this.PKt.editTracksInfo(i,Br,this.HKt)}qKt(){return this.PKt.getEstimatedTime()}KKt(){return this.PKt.getEstimatedBreakClipTime()}JKt(){return this.PKt.getEstimatedBreakTime()}$Kt(){this.BKt.L7("urn:x-cast:com.google.cast.media",{type:C0.SKIP_AD,requestId:this.tJt++,mediaSessionId:this.PKt.mediaSessionId}).catch(this.XKt)}gn(){this.Vo()}constructor(t,i,e){super(i),this.tJt=0,this.XKt=t=>{this.Co(new L1(t))},this.HKt=t=>{var i;const e=new Yt(Jh(t.code),null!=(i=t.description)?i:void 0);this.XKt(e)},this.hCt=t,this.BKt=i,this.PKt=e}};function O1(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?Pe(t.breaks,(i=>function(t,i){const e=[];if(t.isWatched)return e;for(const s of t.breakClipIds){const n=bo(i,(t=>t.id===s));if(n){const i=k1(n,t.position);i&&e.push(i)}}return e}(i,t.breakClips))):[]}var Ml,j1=class{iJt(t,i){this.hCt.addMessageListener(t,i)}eJt(t,i){this.hCt.removeMessageListener(t,i)}L7(t,i){return new Promise(((e,s)=>{this.hCt.sendMessage(t,i,e,(t=>{var i;s(new Yt(Jh(t.code),null!=(i=t.description)?i:void 0))}))}))}gn(){}constructor(t){this.hCt=t}};function R1(t){return"vmap"===t||"adrule"===t}function P1(t){if(t)return Sn(t)&&""!==t?{src:wo(t),type:void 0}:function(t){return Vu(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:wo(t.src),type:z1(t.type)}:void 0}function z1(t){if(Sn(t)){const i=t.toLowerCase();switch(i){case"vast":case"vmap":case"adrule":return i;default:return void Ut("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||Ut("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function B1(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return O0.test(t)}(t))return Ph.uKt(t);if(U1(t))return t}return Number(t)>=0?Number(t):void 0}}function U1(t){return new RegExp(/^\d{1,2}%$/).test(t)}function Q1(t){const i=[],e=(t,s)=>{if(tr(s))for(let i=0,n=s.length;i<n;i++){const n=Vu(s[i])&&s[i]?String(i):"";e(t+"["+encodeURIComponent(n)+"]",s[i])}else if(Vu(s))for(const i of w.keys(s))e(t+"["+encodeURIComponent(i)+"]",s[i]);else((t,e)=>{i.push(t+"="+encodeURIComponent(null!=e?e:""))})(t,String(s))};for(const i of w.keys(t))e(encodeURIComponent(i),t[i]);return i.join("&")}!function(t){t.GHt="receiver_info",t.iPt="event",t.sJt="propertychange",t.VHt="trackevent"}(Ml||(Ml={}));var rs,F1=class{nJt(t){let i;try{i=JSON.parse(t)}catch(t){0}return i}zKt(t){this.rJt.push(t)}UKt(t){jn(this.rJt,t)}QKt(t){this.oJt.push(t)}FKt(t){jn(this.oJt,t)}hJt(t){this.aJt=t}L7(t,i){return this.uJt.L7(t,i)}gn(){this.uJt.eJt(uo,this.cJt),To(this.oJt),To(this.rJt),this.aJt=void 0}constructor(t){this.rJt=[],this.oJt=[],this.cJt=(t,i)=>{const e=this.nJt(i);if(e)if(e.type===Ml.sJt)for(const t of this.rJt)for(const i of w.keys(e.properties))t(i,e.properties[i]);else if(e.type===Ml.iPt)for(const t of this.oJt)t(e.event);else e.type===Ml.VHt&&this.aJt&&e.event.trackState&&this.aJt(e.event.trackId,e.event.trackState.targetQualityIds)},this.uJt=t,this.uJt.iJt(uo,this.cJt)}};!function(t){t.lJt="medialoadedchange",t._m="volumechange",t.jKt="casterror",t.dJt="playererror",t.fJt="targetqualitychanged",t._Jt="receiverinfochanged"}(rs||(rs={}));var Y1,G1=class extends Os{constructor(){super("medialoadedchange")}},V1=class extends Os{constructor(t,i){super("volumechange"),this.zg=t,this.og=i}},W1=class extends Os{constructor(t){super("casterror"),this.lt=t}},H1=class extends Os{constructor(t){super("playererror"),this.lt=t}},X1=class extends Os{constructor(t,i){super("targetqualitychanged"),this.AM=t,this.gJt=i}},Z1=class extends Os{constructor(){super("receiverinfochanged")}},q1=class extends Mo{wJt(t,i,e){this.BKt.L7(uo,function(t,i,e){return{type:Xc.VHt,trackID:t,trackType:i,properties:{targetQuality:e}}}(t,i,e)).catch(this.XKt)}vJt(){this.uJt.iJt(uo,this.mJt),this.BKt.L7(uo,{type:Xc.GHt}).catch(Br)}WKt(){return this.pJt}AJt(){return this.hCt.getSessionObj()}yJt(t){!this.MJt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.MJt=new C1(this,this.BKt,t),this.bJt(),this.Co(new G1),this.MJt.YKt(this.TJt))}SJt(){return this.MJt}async NJt(t){const i=function(t){const i=function(t,i,e,s){const n=fN(t)||"",r=lN(t)||"",o=new chrome.cast.media.MediaInfo(n,r);return o.metadata=L0(t.metadata,t.poster),o.streamType=s,function(t,i,e){const s=[],n=[];let r,o=0,h=0;for(const t of i){const i=P1(t.sources);if(i)if(Yc(i,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=i.src;else if(P0(i,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=Ph.dKt(r,e))?u:0,d=void 0!==c?Ph.dKt(c,e):void 0,f=new chrome.cast.media.BreakClip("bc"+h++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=i.src,f.whenSkippable=d,f.customData={integration:t.integration};let _=bo(n,(t=>t.position===l));void 0===_&&(_=new chrome.cast.media.Break("b"+o++,[],l),n.push(_)),_.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(o,i,e),o}(t.IJt,t.Oc,t.ct,t.QK),e=new chrome.cast.media.LoadRequest(i);return e.autoplay=!0,e.currentTime=t.U_,e.customData=t.DJt,e}(t);let e;try{e=await this.hCt.loadMedia(i)}catch(t){e=t}if(e)throw new Yt(Jh(e))}ag(t){this.AJt().setReceiverMuted(t,Br,this.EJt)}Ug(t){this.AJt().setReceiverVolumeLevel(t,Br,this.EJt)}kJt(){return this.AJt().receiver.friendlyName}gn(){this.Vo(),this.hCt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.LJt),this.AJt().removeUpdateListener(this.bJt),this.uJt.eJt(uo,this.mJt),this.BKt.gn(),this.uJt.gn()}constructor(t){super(),this.pJt=void 0,this.XKt=t=>{this.Co(new W1(t))},this.xJt=(t,i)=>{"error"===t&&this.Co(new H1(i))},this.CJt=(t,i)=>{this.Co(new X1(t,i))},this.mJt=(t,i)=>{const e=JSON.parse(i);e.type===Ml.GHt&&(this.pJt=e.info,this.Co(new Z1))},this.bJt=()=>{const t=this.AJt(),{level:i,muted:e}=t.receiver.volume;this.Co(new V1(null!=i?i:void 0,null!=e?e:void 0))},this.LJt=()=>this.yJt(this.hCt.getMediaSession()),this.TJt=t=>{var i;t||(null==(i=this.MJt)||i.GKt(this.TJt),this.MJt=void 0,this.Co(new G1))},this.EJt=t=>{var i;const e=new Yt(Jh(t.code),null!=(i=t.description)?i:void 0);this.XKt(e)},this.hCt=t,this.hCt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.LJt),this.uJt=new j1(t.getSessionObj()),this.BKt=new F1(this.uJt),this.BKt.zKt(this.xJt),this.BKt.hJt(this.CJt),this.AJt().addUpdateListener(this.bJt),this.bJt(),this.vJt();const i=this.hCt.getMediaSession();i&&this.yJt(i)}};(Y1||(Y1={})).OJt="statechange";var fn,K1=class extends Os{constructor(t){super("statechange"),this.Wdt=t}},J1=class extends Mo{ait(){return this.Ic}j_(){return Ri.oU()}Q_(){return this.hU+this.jJt}Ktt(){return this.Q_()}P_(){}Td(){return this.jx}V_(){return this.o2}W_(){}_g(){return this.cU}RJt(){}wg(){return this.lU}vg(t){this.lU!==t&&(this.lU=t,this.Co(new Zs(this.Qo.U_,t)))}Ng(){return qo.BT}Ag(){return Ri.oU()}Dg(){return Ri.oU()}Lg(){return!1}L_(){return this.YT}jg(){return this.VT}xg(){return this.Dl}ZKt(t){}Pg(){return this.PJt}Og(){return this.zJt}Xg(){this.cU=!1}Hg(){this.cU=!0}JA(t){this.hU=t-this.jJt}BJt(){return this.jJt}UJt(t){this.jJt=t}Yit(t){this.Ic.Yit(t)}Zg(){}gn(){this.Vo(),this.YT.gn(),this.VT.gn(),this.Dl.gn(),this.Ic.gn()}constructor(t,i,e,s,n,r,o,h,a){super(),this.Qo=t,this.jJt=0,this.YT=new Ds,this.VT=new Ds,this.Dl=new iu,this.Ic=new sh,this.jJt=i,this.hU=e-i,this.jx=s,this.o2=n,this.cU=r,this.lU=o,this.PJt=h,this.zJt=a}};!function(t){t.QJt="ccmodechangerequest",t.FJt="cctargetqualitychangerequest",t.YJt="cctrackchangerequest"}(fn||(fn={}));var $1,yl,t2=class extends Os{constructor(t,i,e){super(fn.QJt),this.track=t,this.trackId=i,this.mode=e}};function i2(t){return"AUDIO"===t.type}function e2(t){return"VIDEO"===t.type}function s2(t){return"TEXT"===t.type}!function(t){t.Ru="TEXT",t.WA="AUDIO",t.VA="VIDEO"}($1||($1={})),function(t){t.HA="SUBTITLES",t.sD="CAPTIONS",t.nD="DESCRIPTIONS",t.Fn="CHAPTERS",t.ZA="METADATA"}(yl||(yl={}));var n2=class extends Mo{get va(){return this.Xa||(this.Xa=$n(this)),this.Xa}get kh(){return this.lS}set kh(t){t!==this.lS&&(this.lS=t,this.Co(new hl(this)))}get q(){return this.N2}get L(){return this.I2}get _v(){return this.CU}set _v(t){const i=Af(t);this.CU!==i&&(this.CU=i,this.GJt!==i&&this.Co(new t2(this,this.Xw,i)),this.Co(new uc(this)))}get VJt(){return this.GJt}set VJt(t){const i=Af(t),e=this.CU!==i;this.CU=i,this.GJt=i,e&&this.Co(new uc(this))}D2(t){return bo(this.I2.Rw,(i=>i.o===t))}mv(t){this._v=t}WJt(t){}gn(){}tr(){}constructor(t){super(),this.Xa=void 0;const i=t.customData;this.Xw=Number(t.trackId)||0,this.o=""+(i&&i.id||this.Xw),this.lS=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.fv=i&&i.inBandMetadataTrackDispatchType||"",this.zt=i&&i.kind||function(t){switch(t){case yl.HA:return Qe.HA;case yl.sD:return Qe.sD;case yl.nD:return Qe.nD;case yl.Fn:return Qe.Fn;case yl.ZA:return Qe.ZA}return}(t.subtype)||"subtitles",this.Sg=Ls.NONE,this.Av=i&&void 0!==i.type?function(t){return zw(t)?t:O.DEFAULT}(i.type):O.WEBVTT,this.S2=[],this.I2=new RC(this.S2),this.j2=[],this.N2=new RC(this.j2),this.CU=Af(i&&i.mode||yi.Ch),this.GJt=this.CU}};var r2,o2=class extends Os{constructor(t,i){super(fn.YJt),this.trackId=t,this.enabled=i}},h2=class extends Os{constructor(t,i){super(fn.FJt),this.track=t,this.targetQuality=i}};!function(t){t.WA="audio",t.VA="video",t.Ru="text"}(r2||(r2={}));var a2,u2=class extends Mo{get Hw(){return this.$lt}get Kw(){return this.Klt}set Kw(t){this.HJt(t),this.Co(new h2(this,t))}get qw(){return this.sS}get kh(){return this.lS}set kh(t){t!==this.lS&&(this.lS=t,this.Co(new hl(this)))}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.XJt!==t&&this.Co(new o2(this.Xw,t)),this.Co(new uc(this)))}get ZJt(){return this.XJt}set ZJt(t){const i=this.Le!==t;this.Le=t,this.XJt=t,i&&this.Co(new uc(this))}get va(){return this.Xa||(this.Xa=Mi(this)),this.Xa}get _v(){return this.Rt?"enabled":"disabled"}fS(t){this.Rt=t}WJt(t){if(t.targetQualityIds){const i=[];for(const e of this.sS.Rw)t.targetQualityIds.indexOf(e.o)>-1&&i.push(e);const e=i.length?i:void 0;this.HJt(e)}}HJt(t){(function(t,i){return!t&&i||t&&!i||t&&i&&!Td(t,i)})(this.Klt,t)&&(this.Klt=t&&this.sS.oS(t)?t:void 0,this.Co(new QF(this.Klt,this)))}unload(){for(const t of this.sS.Rw)t.fn("update",this.jjt);this.sS.tr()}constructor(t){super(),this.$lt=void 0,this.sS=new wv,this.Klt=void 0,this.Xa=void 0,this.jjt=()=>this.Co(new hl(this));const i=t.customData;if(this.Xw=Number(t.trackId)||0,this.o=""+(i&&i.id||this.Xw),this.lS=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.zt=i&&i.kind||"main",this.Le=i&&i.enabled,this.XJt=this.Le,i2(t)){this.O0=r2.WA;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new bV(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);i.yn("update",this.jjt),this.sS.nS(i)}}else{this.O0=r2.VA;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new MV(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);i.yn("update",this.jjt),this.sS.nS(i)}}}};!function(t){t.qJt="legacy",t.KJt="caf"}(a2||(a2={}));var c2=class{Mc(){if(this.JJt>=this.Ic.length)return;const t=this.Ic[this.JJt];return this.JJt+=1,t}lt(){return this.Mc()}constructor(t){this.JJt=0,this.Ic=t}};function l2(t){var i,e,s;return null!=(s=null==(e=t.pKt)||null==(i=e.HHt)?void 0:i.XHt())?s:[]}var F,d2=class{},f2=class{Nit(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get ads(){return t.Oc.map((t=>t.Nit()))},get integration(){return t.vKt},get maxDuration(){return t.$Jt},get maxRemainingDuration(){return t.t$t},get timeOffset(){return t.cPt},get customData(){return t.DJt}}}(this)}constructor(){this.Xa=void 0}},_2=class{get i$t(){return this.e$t}get t(){return this.Qo}constructor(t,i){this.e$t=t,this.Qo=i}},g2=class extends f2{get Fqt(){return this.IKt}get Oc(){const t=[];for(const s of this.IKt.s$t)for(const n of l2(s)){var i,e;const r=null!=(e=null==(i=n.lXt)?void 0:i.RXt)?e:[];if(n.uXt&&t.push(this.n$t(n.uXt,r,n.fXt,s.Wit)),n.dXt)for(const i of n.dXt._Xt)t.push(this.r$t(i,r,n.dXt,n.fXt,s.Wit))}return t}n$t(t,i,e,s){const n=bo(this.o$t,(i=>i.uXt===t));if(void 0!==n)return n;const r=new p2(t,i,this,this.h$t,e,s);return this.o$t.push(r),r}r$t(t,i,e,s,n){const r=bo(this.a$t,(i=>i.dXt===t));if(void 0!==r)return r;const o=new m2(t,i,e,this,this.h$t,s,n);return this.a$t.push(o),o}get vKt(){return Au.CSAI}get cPt(){const t=this.IKt.Kl;return t>=0?t:this.h$t.t.Td()}get t$t(){let t=0;for(const i of this.IKt.s$t)for(const e of l2(i))e.uXt&&!e.uXt.jZt&&(t+=e.uXt.ct);return this.h$t&&this.h$t.i$t&&(t+=this.h$t.i$t.ct-this.h$t.i$t.U_),t}get $Jt(){let t=0;for(const i of this.IKt.s$t)for(const e of l2(i))e.uXt&&(t+=e.uXt.ct);return t}get DJt(){}constructor(t,i){super(),this.o$t=[],this.a$t=[],this.IKt=t,this.h$t=i}},w2={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},v2=class extends d2{get Xl(){return this.NXt}get Wit(){return this.mKt}get fXt(){return this.DZt}u$t(){return this.c$t}l$t(){this.c$t=!0}d$t(t){return ol({},w2,{resourceURI:t.lqt||""})}f$t(t){return ol({},w2,{contentHTML:t.lqt.trim(),type:"HTMLResource"})}_$t(t){var i,e;return ol({},w2,{clickThrough:(null==(i=t.sZt)?void 0:i.trim())||"",resourceURI:(null==(e=t.lqt)?void 0:e.trim())||"",altText:t.iZt||"",type:"StaticResource"})}g$t(t,i,e){if(!t||!i)return;const s="<img "+(e?"title='"+e+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(i)+"' target='_blank' rel='noopener'>"+s+"</a>"}lXt(t){return t?t.map((t=>{let i;const e={adSlotId:t.XXt||"",height:t.Ti||0,width:t.ji||0};if(t.mXt){var s;const e=this._$t(t.mXt),n=e.clickThrough||(null==(s=t.JXt)?void 0:s.sZt);i=ol({},e,{contentHTML:this.g$t(e.resourceURI,n,e.altText)||""})}else if(t.MXt)i=this.f$t(t.MXt);else{if(!t.AXt)return;i=this.d$t(t.AXt)}return ro(i,e)})).filter((t=>void 0!==t)):[]}w$t(){return this.v$t.eXt}constructor(t,i,e,s,n,r){super(),this.c$t=!1,this.v$t=t,this.PXt=i,this.NXt=e,this.h$t=s,this.DZt=n,this.mKt=r}},m2=class extends v2{get dXt(){return this.v$t}get cXt(){return this.m$t}fa(){const t=this.NXt,i={companions:this.lXt(this.PXt),type:"nonlinear",id:this.v$t.IXt,skipOffset:this.CZt,integration:this.mKt.integration,adSystem:this.v$t.eXt,get adBreak(){return t.Nit()},creativeId:this.v$t.IXt,universalAdIds:this.DZt.map((t=>({adIdRegistry:t.Dqt,adIdValue:t.kqt})))};return this.v$t.AXt?ro(this.d$t(this.v$t.AXt),i):this.v$t.MXt?ro(this.f$t(this.v$t.MXt),i):this.v$t.mXt?ro(this._$t(this.v$t.mXt),i):i}Nit(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}p$t(){var t,i;return null!=(i=null==(t=this.v$t.mXt)?void 0:t.lqt)?i:""}A$t(){var t,i,e;return null!=(e=null==(i=this.v$t)||null==(t=i.mXt)?void 0:t.fqt)?e:""}get CZt(){const t=this.v$t.Xl;return t&&t.Wit&&void 0!==t.Wit.skipOffset?Ph.dKt(t.Wit.skipOffset,this.h$t.i$t.ct):(null==(i=this.v$t.Xl)?void 0:i.CZt)||-1;var i}constructor(t,i,e,s,n,r,o){super(t,i,s,n,r,o),this.m$t=e}},p2=class extends v2{get uXt(){return this.v$t}fa(){var t;const i=this.NXt;return{companions:this.lXt(this.PXt),duration:this.v$t.ct,id:this.v$t.IXt,mediaFiles:this.v$t.kZt,skipOffset:this.CZt,type:"linear",integration:this.mKt.integration,adSystem:this.v$t.eXt,width:void 0,height:void 0,get adBreak(){return i.Nit()},clickThrough:null==(t=this.v$t.AZt)?void 0:t.sZt,creativeId:this.v$t.IXt,universalAdIds:this.DZt.map((t=>({adIdRegistry:t.Dqt,adIdValue:t.kqt})))}}Nit(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}p$t(){return this.v$t.kZt.length>0?this.v$t.kZt[0].contentURL:""}A$t(){return this.v$t.kZt.length>0?this.v$t.kZt[0].type:""}get CZt(){const t=this.v$t.Xl;return t&&t.Wit&&void 0!==t.Wit.skipOffset?Ph.dKt(t.Wit.skipOffset,this.h$t.i$t.ct):this.v$t.CZt||-1}constructor(t,i,e,s,n,r){super(t,i,e,s,n,r)}};function A2(t){return t instanceof p2}!function(t){t.y$t="csai",t.M$t="google-ima",t.so="google-dai",t.b$t="freewheel",t.T$t="mediatailor",t.AE="chromecast",t.git="theoads"}(F||(F={}));var y2,M2=class extends Fo{fa(){return new b2(this.Rit.Nit())}constructor(t){super("S$t",t)}},b2=class extends Oo{constructor(t){super("updatead",t)}},T2=class extends Fo{fa(){return new S2(this.Rit.Nit())}constructor(t){super("N$t",t)}},S2=class extends Oo{constructor(t){super("adloaded",t)}},N2=class extends B{get Fc(){return void 0!==this.I$t}get Sit(){return this.v$t?[this.v$t]:[]}get Iit(){var t;return null!=(t=this.I$t)?t:null}get Dit(){return Pe(this.D$t,(t=>{const i=t.Oc;if(t===this.I$t&&void 0!==this.v$t){const t=i.indexOf(this.v$t);if(t>=0)return i.slice(t+1)}return t.E$t()?[]:i}))}get Eit(){return this.D$t.filter((t=>t===this.I$t||!t.E$t()))}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=xP(this)}W4(t,i,e){throw new b("Scheduling ads while casting is not supported.")}Ny(){this.PKt.$Kt()}Git(t){var i;null==(i=this.k$t)||i.Git(t)}Lit(t,i){var e;null==(e=this.k$t)||e.Lit(t,i)}L$t(t){return bo(this.D$t,(i=>i.o===t))}x$t(t,i,e,s){const n=this.D$t,r=[];let o=!1;for(const n of t){let t=this.L$t(n.id);void 0===t&&(t=new I2(n),s.push(new nh(t))),!Ks(t.C$t)&&Ks(e)&&(t.C$t=this.O$t(t.j$t,e));const h=t.Oc;t.Yn(n,i,e,s);const a=t.Oc;for(const t of a)Ai(h,t)||(s.push(new qr(t)),o=!0);r.push(t)}this.D$t=r,o&&s.push(new Xr);for(const t of n)Ai(r,t)||s.push(new Lr(t))}R$t(t,i){const e=this.I$t,s=this.v$t;let n,r;if(t){var o;const{breakId:i,breakClipId:e}=t;n=i?this.L$t(i):void 0,r=e?null==(o=this.I$t)?void 0:o.P$t(e):void 0}if(this.I$t=n,this.v$t=r,n!==e&&(void 0!==e&&(e.z$t=void 0,i.push(new dc(e))),void 0!==n&&(n.z$t=this.PKt,i.push(new PP(n)))),r!==s){const t=this.Qo.Q_();void 0!==s&&i.push(new Qc(s,t)),void 0!==r&&i.push(new Mh(r,t))}}O$t(t,i){if(!i||!i.breaks)return;const e=bo(i.breaks,(i=>i.id===t.id));return e}Yit(t){const i=[];for(const t of this.D$t){let e=t.Oc;if(t===this.I$t&&void 0!==this.v$t){const t=e.indexOf(this.v$t);t>=0&&(e=e.slice(t))}else if(t.E$t())continue;for(const t of e){const e=t.B$t();e&&i.push(e)}}for(const e of i)t.W4(e,lc.kit,!1)}gn(){return this.Vo(),this.PKt.GKt(this.Yr),void 0!==this.I$t&&(this.I$t.z$t=void 0,this.I$t=void 0),this.v$t=void 0,To(this.D$t),Promise.resolve(void 0)}constructor(t,i,e){super(),this.D$t=[],this.I$t=void 0,this.v$t=void 0,this.Xa=void 0,this.Yr=t=>{var i;if(!t)return;const e=this.PKt.wM,{breakStatus:s}=e,{breakClips:n,breaks:r}=e.media,o=null==(i=x0(e))?void 0:i.media,h=[];r&&n&&this.x$t(r,n,o,h),this.R$t(s,h);for(const t of h)this.Co(t)},this.Qo=t,this.PKt=i,this.k$t=e,this.PKt.YKt(this.Yr)}},I2=class extends f2{get j$t(){return this.U$t}get o(){return this.U$t.id}get Oc(){return this.Ic}get vKt(){return F.AE}get $Jt(){let t=this.U$t.duration;return void 0===t&&this.Ic.length>0&&(t=_d(this.Ic,(t=>t.ct)),S(t)&&(t=void 0)),t}get t$t(){const t=this.$Jt;if(void 0!==t&&void 0!==this.z$t){const i=this.z$t.JKt();if(void 0!==i)return _.max(0,t-i)}return t}get cPt(){return this.U$t.position}get DJt(){}E$t(){return this.U$t.isWatched}P$t(t){return bo(this.Ic,(i=>i.o===t))}Yn(t,i,e,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const o=t.breakClipIds[r],h=bo(i,(t=>t.id===o));if(void 0===h)continue;const a=r<this.Ic.length?this.Ic[r]:new D2(h,this);!Ks(a.Q$t)&&Ks(e)&&(a.Q$t=this.F$t(e,o,r)),a.Yn(h,s),n.push(a)}this.U$t=t,this.Ic=n}F$t(t,i,e){if(!t||!t.breakClips)return;let s=bo(t.breakClips,(t=>t.id===i));if(!s){var n;const i=null==(n=this.C$t)?void 0:n.breakClipIds[e];i&&(s=bo(t.breakClips,(t=>t.id===i)))}return s}constructor(t){super(),this.C$t=void 0,this.Ic=[],this.z$t=void 0,this.U$t=t}},D2=class{get Y$t(){return this.G$t}get o(){return this.G$t.id}get RXt(){return[]}get ct(){var t;return null!=(t=this.G$t.duration)?t:NaN}get kZt(){const t=this.p$t();return t?[{contentURL:t,delivery:"progressive",type:this.A$t(),width:0,height:0}]:[]}get CZt(){const{whenSkippable:t}=this.G$t;return void 0===t?void 0:t<0?-1:t}get sZt(){return this.G$t.clickThroughUrl}get IXt(){}get fXt(){return[]}get DJt(){}w$t(){return""}A$t(){var t;return null!=(t=this.G$t.contentType)?t:""}p$t(){var t,i;return null!=(i=null!=(t=this.G$t.contentUrl)?t:this.G$t.contentId)?i:""}Yn(t,i){const e=this.o,s=this.ct,n=this.G$t.contentUrl;this.G$t=t;const r=this.o,o=this.ct,h=this.G$t.contentUrl;e===r&&(s===o||S(s)&&S(o))&&n===h||i.push(new M2(this)),S(s)&&!S(o)&&i.push(new T2(this))}B$t(){let t;return this.Q$t&&(t=k1(this.Q$t,this.Xl.cPt)),t||(t=k1(this.G$t,this.Xl.cPt)),t}Nit(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}fa(){const t=this;return{get companions(){return t.RXt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.kZt},get skipOffset(){return t.CZt},type:"linear",integration:F.AE,get adSystem(){return t.w$t()},width:void 0,height:void 0,get adBreak(){return t.Xl.Nit()},get resourceURI(){return t.p$t()},get clickThrough(){return t.sZt},get creativeId(){return t.IXt},get customData(){return t.DJt},get isSlate(){return!1},get universalAdIds(){return t.fXt.map((t=>({adIdRegistry:t.Dqt,adIdValue:t.kqt})))}}}constructor(t,i){this.Xa=void 0,this.G$t=t,this.Xl=i}},Ho=class extends Mo{get V$t(){return this.W$t}set V$t(t){this.W$t!==t&&(this.W$t=t,this.Us.href=null!=t?t:"",t?this.MD():this.bD())}MD(){if(this.Le)return;this.Le=!0,this.Us.style.display="",this.H$t||(this.ast.style.cursor="pointer");const t=this.H$t?this.Us:this.ast;ra.Ys.Je?(t.addEventListener("touchstart",this.X$t),t.addEventListener("touchend",this.Z$t)):(t.addEventListener("mousedown",this.X$t),t.addEventListener("click",this.Z$t))}bD(){if(!this.Le)return;this.Le=!1,this.Us.style.display="none",this.H$t||(this.ast.style.cursor="");const t=this.H$t?this.Us:this.ast;ra.Ys.Je?(t.removeEventListener("touchstart",this.X$t),t.removeEventListener("touchend",this.Z$t)):(t.removeEventListener("mousedown",this.X$t),t.removeEventListener("click",this.Z$t))}h_(){this.Vo(),this.bD(),this.ast.removeChild(this.Us)}constructor(t,i=ra.Ys.Je){super(),this.Le=!1,this.X$t=t=>{t.stopPropagation(),this.Co(new Os("clickstart"))},this.Z$t=t=>{t.stopPropagation(),this.Co(new Os("click"))},this.ast=t,this.H$t=i,this.Us=h.createElement("a"),this.Us.style.position="absolute",this.Us.style.zIndex="11",this.Us.target="Du",this.H$t?(gR(this.Us,"learn more"),this.Us.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Us.setAttribute("rel","noopener")):_b(this.Us),this.ast.appendChild(this.Us),this.bD()}};!function(t){t.q$t="theo-size-xs",t.K$t="theo-size-s",t.J$t="theo-size-m",t.$$t="theo-size-l",t.t0t="theo-size-xl"}(y2||(y2={}));var E2=[1200,992,768,576],k2={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},L2=class{i0t(t){let i=x2(t);i!==this.e0t&&(ab(this.Us,i),ub(this.Us,this.e0t),this.e0t=i)}gn(){this.Wu.fn(Bh.pn,this.mn)}constructor(t,i){this.Us=t,this.Wu=i,this.mn=t=>{this.i0t(t.width)},this.e0t=x2(i.ku),ab(this.Us,this.e0t),i.yn(Bh.pn,this.mn)}};function x2(t){for(let i of E2)if(t>i)return k2[i];return"theo-size-xs"}var C2=class extends Mo{get we(){return this.Us}get _v(){return this.CU}get uE(){return this.Ql.textContent||""}set uE(t){gR(this.Ql,t)}s0t(t){"countdown"!==this.CU&&(this.CU="countdown",this.n0t(),this.we.classList.remove("theoplayer-ad-skip-button"),this.we.classList.add("theoplayer-ad-skip-countdown")),this.uE="You can skip in "+_.round(t)+" seconds"}r0t(){"skip"!==this.CU&&(this.CU="skip",this.uE="Skip Ad",this.o0t(),this.we.classList.remove("theoplayer-ad-skip-countdown"),this.we.classList.add("theoplayer-ad-skip-button"))}o0t(){this.we.addEventListener("mouseup",this.h0t),this.we.addEventListener("touchend",this.h0t)}n0t(){this.we.removeEventListener("mouseup",this.h0t),this.we.removeEventListener("touchend",this.h0t)}gn(){this.Vo(),this.n0t(),this.qu.gn(),wi(this.Us),wi(this.Ql),this.a0t&&wi(this.a0t)}constructor(t,i){super(),this.h0t=()=>{this.Co(new Os("Ny"))},this.Us=h.createElement("div"),this.we.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.we.style.position="absolute",this.Ql=h.createElement("span"),this.we.appendChild(this.Ql),i&&(this.a0t=h.createElement("div"),this.a0t.className="theoplayer-ad-skip-poster",this.a0t.style.backgroundImage='url("'+qf(i)+'")',this.we.appendChild(this.a0t)),this.CU="countdown",this.qu=new L2(this.we,t)}},O2=class extends Mo{u0t(){const t=this.PKt.wM.activeTrackIds;if(t){if(this.c0t()){const i=this.VT.Rw.map((t=>t.o)),e=this.YT.Rw.map((t=>t.o));Ai(i.concat(e),"0")&&t.push(0)}B2(t,this.YT),B2(t,this.VT),function(t,i){const e=!1;for(const e of i.Rw)e.VJt=Ai(t,e.Xw)?yi.Jn:yi.Ch}(t,this.Dl)}}l0t(){var t;const i=null==(t=this.PKt.wM.media)?void 0:t.tracks;if(!i)return;const e=i.filter(i2),s=i.filter(e2),n=i.filter(s2);if(this.c0t()&&0===s.length&&0!==this.Pg()){const t=this.d0t();s.push(t)}if(this.c0t()&&0===e.length){const t=this.f0t();e.push(t)}P2(this.YT,e.map((t=>t.trackId))),P2(this.VT,s.map((t=>t.trackId))),P2(this.Dl,n.map((t=>t.trackId))),z2(e,this.YT),z2(s,this.VT),function(t,i){let e=!1;for(const s of t){let t=R2(i,s.trackId);t||(t=new n2(s),i.tt(t),e=!0)}}(n,this.Dl)}_0t(){this.cU||(this.g0t=v(this.od,250))}w0t(){m(this.g0t)}v0t(){this.w0t(),this._0t()}m0t(){var t;const i=this.PKt.wM,e=i.media;var s;const n=null!=(s=null==e?void 0:e.duration)?s:NaN,r=(null==e?void 0:e.streamType)===chrome.cast.media.StreamType.LIVE||n<0,o=r?1/0:n;this.jx=o,this.p0t();const h=i.getEstimatedLiveSeekableRange(),a=null==(t=i.customData)?void 0:t.buffers;if(Ks(h)){const{start:t,end:i,isMovingWindow:e=r,isLiveDone:s=!1}=h;this.Jzt(t,i,e,s)}else if(Ks(a)){const[t,i]=a.seekable;this.Jzt(t,i,r,!1)}else r?this.Jzt(void 0,void 0,!0,!1):this.Jzt(0,o,!1,!1)}A0t(){const t=this.PKt.wM,i=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||j2(t);this.y0t=i,this.cU!==i&&(this.cU=i,this.cU?this.Co(new Ye(this.Q_())):this.Co(new Rt(this.Q_())))}th(){const{playbackRate:t}=this.PKt.wM;this.M0t!==t&&(this.M0t=void 0,this.lU!==t&&(this.lU=t,this.Co(new Zs(this.Q_(),t))))}b0t(){const{playerState:t}=this.PKt.wM;let i;switch(t){case chrome.cast.media.PlayerState.IDLE:i=qo.BT;break;case chrome.cast.media.PlayerState.BUFFERING:i=qo.Xn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:i=qo.QT}this.u2(i),this.T0t()}Jzt(t,i,e,s){Ks(t)&&Ks(i)?this.U1=new Nr(t,i,e,e&&!s):this.U1=void 0}S0t(t,i){this.zJt=null!=i?i:this.zJt,this.PJt=null!=t?t:this.PJt,this.Co(new Cs)}We(t){this.N0t!==t?(this.aU=!0,this.Co(new Ur(this.Q_()))):this.N0t=void 0}Vz(){if(!this.aU)return;this.aU=!1;const t=this.Q_();this.Co(new ri(t,this.P_())),this.Co(new Ko(t))}Mh(){this.o2=!0,this.V_()&&this.Co(new pa(this.Q_()))}p0t(){const t=this.TNt,i=this.Td();t===i||S(t)&&S(i)||(this.TNt=i,this.Co(new Te(i)))}I0t(){const t=this.Q_();this.aU||this.D0t===t||(this.D0t=t,this.Co(new ri(t,this.P_())))}RJt(){this.cU&&(this.cU=!1,this.Co(new Rt(this.Q_())),this.u2(qo.BT))}ait(){return this.Ic}j_(){return this.QNt.KA(this.jJt)}Q_(){if(this.Ic.Fc){const t=this.PKt.KKt();if(void 0!==t)return t}return this.Ktt()}Ktt(){return void 0!==this.E0t?this.jJt+this.E0t:this.o2?this.Td():this.jJt+this.PKt.qKt()}P_(){if(this.k0t)return new Date(this.Ktt()+this.k0t)}Td(){if(this.Ic.Fc){var t;const i=null==(t=this.Ic.Sit[0])?void 0:t.ct;if(void 0!==i&&!S(i))return i}return this.jJt+this.jx}W_(){return this.vz}V_(){return!this.Ic.Fc&&this.o2}_g(){return this.cU}wg(){return this.lU}vg(t){this.lU!==t&&(this.M0t=this.lU,this.lU=t,this.Co(new Zs(this.Q_(),t)),this.PKt.vg(t))}Ng(){return this.h2}Ag(){return this.Ic.Fc?Ri.rU(0,this.Q_()):this.Uo.KA(this.jJt)}Dg(){var t,i;if(this.Ic.Fc)return Ri.oU();let e=null!=(i=null==(t=this.U1)?void 0:t.V0().KA(this.jJt))?i:Ri.oU();if(e.U>0){const t=e.jn(e.U-1);e=e.YB(Ri.rU(t,this.Q_()))}return e}Lg(){return this.aU}L_(){return this.YT}jg(){return this.VT}xg(){return this.Dl}d0t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.Og(),id:"0",name:"",width:this.Pg()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:$1.VA}}f0t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:$1.WA}}c0t(){var t,i;return!(void 0!==(null==(t=this.hCt.WKt())?void 0:t.version))||(null==(i=this.hCt.WKt())?void 0:i.sdkType)===a2.KJt}ZKt(t){this.c0t()&&jn(t,0),this.PKt.ZKt(t)}Pg(){return this.PJt}Og(){return this.zJt}Xg(){this.cU&&(this.cU=!1,this.y0t=!1,this.Co(new Rt(this.Q_()))),this.PKt.Xg()}Hg(){this.cU||(this.cU=!0,this.y0t=!0,this.Co(new Ye(this.Q_()))),this.PKt.Hg()}JA(t){if(this.Ic.Fc)return;let i=_.max(0,t-this.jJt);i=_.round(1e6*i)/1e6;const e=this.E0t;this.E0t=i,this.y0t=this._g(),this.N0t=i,this.aU=!0,this.Co(new Ur(this.Q_())),void 0===e&&(this.c0t()?this.L0t(i):this.C5(i))}C5(t){this.PKt.JA(t,this.y0t).then(this.x0t(t)).catch(this.XKt)}x0t(t){return()=>{void 0!==this.E0t&&(this.E0t===t?this.E0t=void 0:this.C5(this.E0t))}}u2(t){this.h2!==t&&(this.h2=t,this.Co(new Dr(this.Q_(),t))),void 0===this.E0t&&this.aU&&t>=qo.UT&&this.Vz(),this.T0t()}T0t(){if(this.cU)return void(this.C0t=!1);const t=this.h2>=qo.QT;this.C0t!==t&&(this.C0t=t,t?this.Co(new $e(this.Q_())):this.Co(new Ib(this.Q_())))}O0t(){this.j0t||(this.j0t=h.createElement("div"),this.Qo.we.appendChild(this.j0t),this.j0t.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.j0t.style.zIndex="10",_b(this.j0t)),this.j0t.style.display=this.Ic.Fc?"":"none"}R0t(){var t;const i=null==(t=this.Ic.Sit[0])?void 0:t.sZt;i&&!this.P0t?(this.P0t=new Ho(this.j0t,!0),this.P0t.V$t=i,this.P0t.yn("clickstart",this.z0t)):this.P0t&&(this.P0t.V$t=i)}B0t(){var t;const i=null==(t=this.Ic.Sit[0])?void 0:t.CZt;if(void 0===i||i<0)return void(this.U0t&&(this.U0t.gn(),this.U0t=void 0));if(!this.U0t){var e;const t=null==(e=this.Qo.ba)?void 0:e.mi;this.U0t=new C2(this.Qo.Iu,t),this.j0t.appendChild(this.U0t.we),this.U0t.yn("Ny",this.Q0t)}const s=this.PKt.KKt();void 0!==s&&(s<i?this.U0t.s0t(i-s):this.U0t.r0t())}BJt(){return this.jJt}UJt(t){this.jJt=t}Yit(t){}Zg(){this.PKt.Zg()}gn(){this.Vo(),this.Ic.gn(),this.P0t&&(this.P0t.h_(),this.P0t=void 0),this.U0t&&(this.U0t.gn(),this.U0t=void 0),this.j0t&&(wi(this.j0t),this.j0t=void 0),this.PKt.FKt(this.t1),this.PKt.UKt(this.F0t),this.PKt.GKt(this.TJt),this.PKt.fn(Xh.jKt,this.Y0t),this.PKt.gn()}constructor(t,i,e,s,n){super(),this.QNt=Ri.oU(),this.k0t=void 0,this.o2=!1,this.vz=void 0,this.M0t=void 0,this.h2=qo.BT,this.C0t=!1,this.Uo=Ri.oU(),this.U1=void 0,this.aU=!1,this.YT=new Ds,this.VT=new Ds,this.Dl=new iu,this.TNt=NaN,this.E0t=void 0,this.y0t=!1,this.D0t=NaN,this.N0t=void 0,this.g0t=0,this.F0t=(t,i)=>{switch(t){case"buffered":this.QNt=new Ri(i),this.Co(new Gt(this.Q_()));break;case"currentProgramDateTime":this.k0t=new Date(i).getTime()-this.Q_();break;case"played":this.Uo=new Ri(i);break;case"seekable":this.m0t();break;case"videoHeight":this.S0t(void 0,i);break;case"videoWidth":this.S0t(i,void 0)}},this.t1=t=>{switch(t.type){case Tf.im:this.We(t.currentTime);break;case Tf.$v:this.Vz();break;case Tf.Kv:this.Co(new hY(t.representation,t.previousRepresentation));break;case Tf.nm:this.Co(new EF(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case Tf.Cv:this.Co(new zW(t.currentTime,t.initDataType,t.initData));break;case Tf.Nv:this.Co(new Yu(new ss(qa.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case Tf.Iv:this.Co(new $O)}},this.TJt=t=>{this.m0t(),this.A0t(),this.th(),this.b0t(),this.I0t(),this.v0t(),this.l0t(),this.u0t(),this.O0t(),this.R0t(),this.B0t(),t||j2(this.PKt.wM)&&this.Mh()},this.od=()=>{this.I0t(),this.B0t()},this.Y0t=t=>{this.Co(t)},this.L0t=Qd((t=>this.C5(t)),50),this.XKt=t=>{this.E0t=void 0,this.Co(new L1(t))},this.z0t=()=>{this.Hg()},this.Q0t=()=>{this.Ic.Ny()},this.Qo=t,this.hCt=e,this.PKt=s,this.Ic=new N2(t,s,i.Oc),this.jJt=n.BJt(),this.jx=n.Td()-this.jJt,this.cU=n._g(),this.lU=n.wg(),this.PJt=n.Pg(),this.zJt=n.Og(),this.PKt.QKt(this.t1),this.PKt.zKt(this.F0t),this.PKt.YKt(this.TJt),this.PKt.yn(Xh.jKt,this.Y0t),this.PKt.VKt().then((t=>{this.Co(new x1(t.bt,t.yc))}),this.XKt)}};function j2(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function R2(t,i){for(const e of t.Rw)if(e.Xw===i)return e}function P2(t,i){let e=!1;for(let s=0;s<t.U;s++){const n=t.zw(s);-1===i.indexOf(n.Xw)&&(t.it(n),s--,e=!0)}return e}function z2(t,i){let e=!1;for(const s of t){let t=R2(i,s.trackId);t||(t=new u2(s),i.tt(t),e=!0)}return e}function B2(t,i){for(const e of i.Rw)e.ZJt=Ai(t,e.Xw);return!1}var U2=class{oet(t){return Promise.resolve("all")}Wg(){}gn(){}};function Q2(t,i,e){if(S(t))return e;if(t===1/0){if("live"===e||"dvr"===e)return e;if(i&&i.length>0){if(i.end(i.length-1)-i.start(0)>60)return"dvr"}return"live"}return"vod"}var F2=[Tf.Ov,Tf.Lv,Tf.qv,Tf.Jv,Tf.Sh,Tf.jh,Tf.Zv,Tf.fm,Tf.im,Tf.$v,$.Tm,$.Sm,Tf.Kv,Tf.nm,Tf.Cv,Tf.Nv,Tf.Iv],Y2=class extends sl{kB(t){if(!t)return;of(this.MB&&cf(this.MB),t&&cf(t))||(this.MB=t,this.Co(new bn(t)))}G0t(t){if(!t)return;const i=dl(t,this.Qo.wd);of(this.bc&&cf(this.bc),i&&cf(i))||(this.ja.UJt(0),this.bc=i,this.Co(new NP(i)),this.ja.RJt())}V0t(t){for(const i of this.rt.Rw)if(i.Xw===t)return i;for(const i of this.ht.Rw)if(i.Xw===t)return i}get Wdt(){return this.ja}set Wdt(t){const i=this.ja;i&&(i.fn(Xh.jKt,this.Y0t),i.fn(Xh.RKt,this.W0t),i.fn(F2,this.Ds),i.fn($.Nw,this.Yj),t.UJt(i.BJt()),i.Yit(t.ait())),this.ja=t,this.YT.Uw=t.L_(),this.VT.Uw=t.jg(),this.Dl.Uw=t.xg(),this.Ic.Uw=t.ait(),i&&i.gn(),t.yn(Xh.jKt,this.Y0t),t.yn(Xh.RKt,this.W0t),t.yn(F2,this.Ds),t.yn($.Nw,this.Yj)}get ro(){return this.ho}get Oc(){return this.ait()}ait(){return this.Ic}uit(){return this.Vtt}L_(){return this.YT}j_(){return this.ja.j_().ks()}get H0t(){return this.X0t||this.bc}set H0t(t){this.X0t=t}async $n(t,i){var e;t&&await this.NJt(t,null!=(e=t.ads)?e:[],t.streamType,NaN,0,null!=i?i:0)}async Z0t(t){var i;const e=null!=(i=this.X0t)?i:this.bc;if(!e)return;var s;const n=this.X0t?null!=(s=this.X0t.ads)?s:[]:this.Kit(),r=this.Qo.Td(),o=this.Qo.Dg(),h=Q2(r,o,e.streamType),a=o.length>0?o.start(0):0,u=null!=t?t:this.Ktt();await this.NJt(e,n,h,r,a,u)}Kit(){const t=new sh;return this.Ic.Yit(t),t.Kit()}P_(){return this.ja.P_()}B_(){return this.MB}get U_(){return this.Q_()}set U_(t){this.F_(t)}Q_(){return this.ja.Q_()}Ktt(){return this.ja.Ktt()}F_(t,i){this.q0t||(this.hCt.SJt()||this.q0t||!this.bc?this.ja.JA(t):this.$n(this.bc,t))}Td(){return this.ja.Td()}V_(){return this.ja.V_()}W_(){return this.vz}X_(){return this.mz}q_(){return this.GT}rg(){return this.Qo.eg}hg(){return this.uU}ag(t){this.uU=t,this.Co(new St(this.U_,this.zg)),this.hCt.ag(t)}_g(){return this.ja._g()}wg(){return this.ja.wg()}vg(t){this.ja.vg(t)}Ag(){return this.ja.Ag().ks()}Mg(){return ut.LT}Tg(t){}Ng(){return this.ja.Ng()}Dg(){return this.ja.Dg().ks()}Lg(){return this.ja.Lg()}Wa(){return this.bc}async ga(t){this.bc=t,await this.$n(t),this.X0t=void 0,this.ja.RJt()}xg(){return this.Dl}Og(){return this.ja.Og()}Pg(){return this.ja.Pg()}jg(){return this.VT}Bg(){return this.Xx}Ug(t){this.Xx=t,this.Co(new St(this.U_,this.zg)),this.hCt.Ug(t)}get Yg(){return!1}set Yg(t){}Vg(){}Gg(){return this.dU}Wg(){}Xg(){this.hCt.SJt()||this.q0t||!this.bc?this.ja.Xg():this.$n(this.bc)}Hg(){this.ja.Hg()}ur(){this.ho=!0}ar(){this.MB=void 0,this.ho=!1}ge(){}be(){}async NJt(t,i,e,s,n,r){this.q0t=!0,this.K0t(),this.ja.UJt(n);const o="live"===e||"dvr"===e,h=function(t,i,e){return{theoplayer_version:1,streamStart:t,isLive:i,sourceDescription:e}}(n,o,t),a={IJt:t,Oc:i,U_:_.max(0,r-n),ct:s,QK:o?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,DJt:h};try{await this.hCt.NJt(a)}catch(t){this.J0t(t)}finally{this.q0t=!1}}$0t(){this.t1t(this.YT),this.t1t(this.VT),this.i1t(this.Dl)}t1t(t){for(const i of t.Rw)this.e1t(i);t.yn(rc.hw,(t=>{this.e1t(t.Lt),this.s1t()}))}i1t(t){for(const i of t.Rw)this.n1t(i);t.yn(rc.hw,(t=>{this.n1t(t.Lt),this.s1t()}))}e1t(t){t.yn(fn.FJt,this.zvt),t.yn(fn.YJt,this.r1t),t.yn(fn.YJt,this.u0t)}n1t(t){t.yn(fn.QJt,this.o1t),t.yn(fn.QJt,this.u0t)}h1t(){const t=[];for(const i of this.rt.Rw)i.Rt&&t.push(i.Xw);for(const i of this.ht.Rw)i.Rt&&t.push(i.Xw);for(const i of this.nt.Rw)i._v===yi.Jn&&t.push(i.Xw);this.ja.ZKt(t)}a1t(t,i,e){this.u1t=t,this.c1t=i,this.l1t=e}d1t(t){var i,e;if(!t)return!1;return(null!=(e=null==(i=this.hCt.WKt())?void 0:i.version)?e:-1)>=2?t.map((t=>t.o)):[t[0].o]}f1t(t){this._1t=t}$g(){}iw(){}async Zg(){this.ja.Zg(),this.K0t()}K0t(){this.Oj=qo.BT,this.Ij=!1,this.Lj=!1,this.vz=void 0,this.mz=void 0}async gn(){this.K0t(),this.Vo(),this.Wdt=this.g1t(),this.hCt.fn(rs.jKt,this.Y0t),this.hCt.fn(rs.dJt,this.DOt),this.hCt.fn(rs._m,this.w1t),this.hCt.fn(rs.lJt,this.v1t),this.hCt.fn(rs.fJt,this.m1t),this.hCt.gn()}g1t(){return new J1(this,this.ja.BJt(),this.ja.Q_(),this.ja.Td(),this.ja.V_(),this.ja._g(),this.ja.wg(),this.ja.Pg(),this.ja.Og())}constructor(t,i){super(t,!0),this.ho=!1,this._1t=Br,this.Oj=qo.BT,this.Ij=!1,this.Lj=!1,this.q0t=!1,this.X0t=void 0,this.vz=void 0,this.mz=void 0,this.YT=new ul,this.VT=new ul,this.Dl=new Sf,this.dU=new Et,this.GT=new Bf,this.Vtt=new U2,this.u1t=void 0,this.c1t=void 0,this.l1t=void 0,this.w1t=t=>{var i,e;(Ks(t.zg)&&!Jn(t.zg,this.Xx,1e-5)||Ks(t.og)&&t.og!==this.uU)&&(this.Xx=null!=(i=t.zg)?i:this.Xx,this.uU=null!=(e=t.og)?e:this.uU,this.Co(new St(this.U_,this.Xx)))},this.v1t=()=>{const t=this.hCt.SJt();this.Wdt=t?new O2(this,this.Qo,this.hCt,t,this.ja):this.g1t()},this.W0t=t=>{this.kB(t.bt),this.G0t(t.yc)},this.m1t=t=>{const i=this.V0t(t.AM);if(!i)return void 0;const e={targetQualityIds:t.gJt};i.WJt(e)},this.Y0t=t=>{this.J0t(t.lt)},this.J0t=t=>{this._1t&&this._1t(t)},this.DOt=t=>{this.vz=t.lt,this.mz=ar(this.vz),this.Co(new as(this.mz))},this.r1t=t=>{if(!t.enabled)return;const i=this.rt.Rw.some((i=>i.Xw===t.trackId))?this.rt:this.ht;for(const e of i.Rw)e.Rt&&e.Xw!==t.trackId&&(e.Rt=!1)},this.o1t=t=>{if(t.mode===yi.Jn)for(const i of this.nt.Rw)i._v===yi.Jn&&i.Xw!==t.trackId&&vp(i.zt,t.track.zt)&&(i._v=yi.Ch)},this.u0t=Qd((()=>{this.h1t()}),50),this.s1t=()=>{const t=[];var i;const e=null!=(i=bo(this.ht.Rw,(t=>J2(t,this.u1t))))?i:bo(this.ht.Rw,(t=>t.Rt));var s;e&&t.push(e.Xw);const n=null!=(s=bo(this.nt.Rw,(t=>J2(t,this.c1t))))?s:bo(this.nt.Rw,(t=>t._v===yi.Jn));var r;n&&t.push(n.Xw);const o=null!=(r=bo(this.rt.Rw,(t=>J2(t,this.l1t))))?r:bo(this.rt.Rw,(t=>t.Rt));o&&t.push(o.Xw),0!==t.length&&this.ja.ZKt(t)},this.zvt=t=>{const i=this.d1t(t.targetQuality),e=t.track;this.hCt.wJt(e.Xw,e.O0,i)},this.Yj=t=>{this.Co(t);const i=t.readyState;!this.Ij&&this.Oj===qo.BT&&i>=qo.Xn&&(this.Ij=!0,this.Co(new An(t.currentTime))),!this.Lj&&this.Oj<=qo.Xn&&i>=qo.UT&&(this.Lj=!0,this.Co(new re(t.currentTime))),this.Oj<=qo.UT&&i>=qo.QT&&this.Co(new We(t.currentTime)),this.Oj<=qo.QT&&i===qo.FT&&this.Co(new Pn(t.currentTime)),this.Oj=i},this.Xx=this.Qo.zg,this.uU=this.Qo.og,this.hCt=i,this.hCt.yn(rs.jKt,this.Y0t),this.hCt.yn(rs.dJt,this.DOt),this.hCt.yn(rs._m,this.w1t),this.hCt.yn(rs.lJt,this.v1t),this.hCt.yn(rs.fJt,this.m1t),this.Ic=new ch(this),this.MB=this.Qo.bt,this.bc=this.Qo.Wa(),this.Wdt=new J1(this,0,this.Qo.Ktt(),this.Qo.Td(),this.Qo.G_,this.Qo.fg,this.Qo.gg,this.Qo.Rg,this.Qo.Cg),this.$0t()}},G2=class extends os{fa(){return new V2(this.lt)}constructor(t){super("error"),this.lt=t}},V2=class extends Os{constructor(t){super("error"),this.error=t}},W2=class extends Os{constructor(t){super("statechange"),this.state=t}};function H2(t,i){let e;return{get casting(){return t.FX},get error(){return t.lt},get receiverName(){return t.p1t},get state(){return t.Wdt},start(){t.Cn()},stop(){t.Zg()},join(){t.A1t()},leave(){t.y1t()},set connectionCallback(t){null==i||i.M1t(t)},get connectionCallback(){return null==i?void 0:i.b1t()},get source(){return e||t.yc},set source(i){e=i,t.yc=i},addEventListener(i,e){const s=Za(i,wo);t.yn(s,e)},removeEventListener(i,e){const s=Za(i,wo);t.fn(s,e)}}}var X2=class extends B{get FX(){return this.Wdt===si.CONNECTING||this.Wdt===si.CONNECTED}get lt(){return this.vz}get va(){return this.Xa||(this.Xa=H2(this,this.T1t)),this.Xa}get p1t(){var t;return null==(t=this.T1t.S1t())?void 0:t.kJt()}get yc(){return this.Qo?this.Qo.H0t:this.X0t}set yc(t){this.X0t=t?dl(t,this.N1t.wd):void 0,this.Qo&&(this.Qo.H0t=this.X0t,this.X0t&&this.Qo.$n(this.X0t))}get Wdt(){return this.ja}set Wdt(t){let i=t;this.I1t||i!==si.CONNECTING&&i!==si.CONNECTED||(i=si.AVAILABLE),this.ja!==i&&(this.ja=i,this.Co(new W2(this.Wdt)))}async D1t(){if(!this.E1t)throw new g("Chromecast must be initialized before starting a session");await this.E1t,this.T1t.S1t()||await this.T1t.k1t()}async Cn(){this.I1t=!0;try{if(this.Wdt=si.CONNECTING,await this.D1t(),await this.L1t(),this.Qo){const t=this.N1t.Wa(),i=this.T1t.x1t(t);this.Qo.H0t=i?dl(i,this.N1t.wd):this.X0t,this.Qo.Z0t()}this.Wdt=si.CONNECTED,await this.N1t.Zg()}catch(t){this.C1t(!1).catch(Br),this.Wdt=si.AVAILABLE,be(t)||this.M3(t)}}async A1t(){this.I1t=!0;try{if(this.Wdt=si.CONNECTING,await this.D1t(),await this.L1t(),this.Qo){const t=this.N1t.Wa(),i=this.T1t.O1t(t);i&&(this.Qo.H0t=dl(i,this.N1t.wd))}this.Wdt=si.CONNECTED,await this.N1t.Zg()}catch(t){await this.C1t(!0).catch(Br),this.Wdt=si.AVAILABLE,be(t)||this.M3(t)}}async j1t(){this.T1t.S1t()&&await this.Cn()}async L1t(){null!=this.Qo||(this.Qo=this.R1t()),this.vz=void 0,this.N1t.Hg(),await this.KH.P1t(this.Qo)}R1t(){const t=new Y2(this.N1t,this.T1t.S1t());return t.f1t(this.M3),t}z1t(){this.Qo&&(this.Qo.gn(),this.Qo=void 0)}async C1t(t){if(this.I1t=!1,!this.Qo)return;const i=this.Qo.ro,e=this.Qo.Wa(),s=this.Qo.Ktt();try{if(i){let i;i=t?this.T1t.B1t(e):this.T1t.U1t(e),null!=i||(i=e),await this.KH.Q1t(i,i===e),this.N1t.F_(s),this.N1t.Xg()}}finally{this.z1t()}}y1t(){this.FX&&(this.T1t.F1t(!1),this.C1t(!0).catch(this.M3))}Zg(){this.FX&&(this.T1t.F1t(!0),this.C1t(!1).catch(this.M3))}gn(){this.dE.g_(),this.T1t.fn(Y1.OJt,this.Y1t),this.Vo(),this.z1t()}constructor(t,i,e,s){super(),this.vz=void 0,this.Xa=void 0,this.Qo=void 0,this.ja=si.UNAVAILABLE,this.I1t=!1,this.dE=new Bd,this.G1t=()=>{this.T1t.yn(Y1.OJt,this.Y1t),this.Wdt=this.T1t.V1t()},this.Y1t=t=>{const i=t.Wdt;this.Wdt=i,i!==si.UNAVAILABLE&&i!==si.AVAILABLE||this.C1t(!1).catch(this.M3)},this.X0t=void 0,this.M3=t=>{be(t)||t instanceof Yt&&(this.vz=t,this.Co(new G2(t).va))},this.KH=t,this.N1t=i,this.T1t=s,this.GO=e.chromecast,this.E1t=this.T1t.oX(this.GO,this.dE.f_),this.E1t.then(this.G1t).catch(this.M3)}},Z2=class extends B{get FX(){return!1}get lt(){}get p1t(){}get yc(){}set yc(t){}get Wdt(){return si.UNAVAILABLE}get va(){return this.Xa||(this.Xa=H2(this)),this.Xa}A1t(){ra.vp("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}y1t(){ra.vp("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Cn(){ra.vp("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}Zg(){ra.vp("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}j1t(){return Promise.resolve()}gn(){}};function q2(t){return{bt:t.bt,U_:t.Q_(),ct:t.Td(),G_:t.G_,lt:t.W_(),H_:t.X_(),og:t.og,fg:t.fg,gg:t.gg,Sg:t.Sg,Eg:t.Eg,Cg:t.Cg,Rg:t.Rg,zg:t.zg}}var Kc=class extends sl{ait(){return this.Ic}L_(){return this.YT}get Z_(){return this.q_()}q_(){return this.GT}xg(){return this.Dl}jg(){return this.VT}WT(t){if(this.Qo===t)return;let i;this.TB(),this.fit&&(i=q2(this));const e=this.B_(),s=this.Gg(),n=this.Vg();if(this.Qo=t,this.YT.Uw=t.ht,this.VT.Uw=t.rt,this.Dl.Uw=t.nt,this.GT.Uw=t.Z_,this.Ic.Uw=t.Oc,void 0!==i){uv(this,i,q2(this))}const r=this.B_();r!==e&&this.Co(new bn(r)),this.Gg()!==s&&this.Co(new cv),this.Vg()!==n&&this.Co(new zs),this.bB()}async gn(t){await super.gn(t),this.YT.gn(t),this.VT.gn(t),this.Dl.gn(t),this.GT.gn(),await this.Ic.gn()}constructor(t,i){super(t,i),this.YT=new ul,this.VT=new ul,this.Dl=new Sf,this.GT=new Yf,this.YT.Uw=t.ht,this.VT.Uw=t.rt,this.Dl.Uw=t.nt,this.GT.Uw=t.Z_,this.Ic=new ch(this),this.Ic.Uw=t.Oc}},K2=class extends Kc{Wa(){const t=super.Wa();return!t&&this.W1t.FX&&this.W1t.yc?this.W1t.yc:t}ga(t,i){return this.XZ.JO((i=>(this.H1t=new Bd,this.H1t.w_(i),super.ga(t,this.H1t.f_))),i)}Xg(){super.Xg(),this.wd.cast.strategy!==e_.AUTO||this.W1t.FX||this.W1t.j1t()}P1t(t){return this.XZ.JO((i=>this.X1t(t,i)))}Q1t(t,i){return void 0===t&&(t=void 0),void 0===i&&(i=!1),this.XZ.JO((e=>this.Z1t(t,i,e)))}X1t(t,i){Vr(i),this.q1t.Oc&&this.q1t.Oc.Yit(t.Oc),this.K1t(),this.J1t=bo(this.q1t.ht.Rw,(t=>t.Rt)),this.zSt=bo(this.q1t.nt.Rw,(t=>"showing"===t._v)),this.$1t=bo(this.q1t.rt.Rw,(t=>t.Rt)),this.t2t=t,this.t2t.a1t(this.J1t,this.zSt,this.$1t),this.WT(t),this.t2t.ur()}async Z1t(t,i,e){Vr(e);const s=this.t2t;if(void 0!==s)try{if(t){await this.q1t.Zg(),Vr(e);const s=dl(t,this.q1t.wd);i&&(s.ads=void 0),this.H1t=new Bd,this.H1t.w_(e),await this.q1t.ga(s,this.H1t.f_)}i&&this.q1t.Oc&&s.Oc.Yit(this.q1t.Oc)}catch(t){_t(t)}finally{s.ar(),this.WT(this.q1t),this.J1t=bo(this.t2t.ht.Rw,(t=>t.Rt)),this.zSt=bo(this.t2t.nt.Rw,(t=>"showing"===t._v)),this.$1t=bo(this.t2t.rt.Rw,(t=>t.Rt)),this.q1t.ht.yn(rc.hw,this.i2t),this.q1t.nt.yn(rc.hw,this.e2t),this.q1t.rt.yn(rc.hw,this.s2t),this.q1t.yn($.Mm,this.K1t),this.t2t===s&&(this.t2t=void 0)}}Zg(){var t;return this.J1t=void 0,this.zSt=void 0,this.$1t=void 0,this.K1t(),null==(t=this.H1t)||t.g_(),this.XZ.JO((()=>super.Zg()))}async gn(){var t;null==(t=this.H1t)||t.g_(),this.W1t.gn(),await this.Q1t(),await this.XZ.gn(),await super.gn()}constructor(t,i){super(t),this.XZ=new Ku,this.J1t=void 0,this.zSt=void 0,this.$1t=void 0,this.i2t=t=>{const i=t.Lt;J2(this.J1t,i)&&(i.Rt=!0)},this.e2t=t=>{const i=t.Lt;J2(this.zSt,i)&&(i._v=yi.Jn)},this.s2t=t=>{const i=t.Lt;J2(this.$1t,i)&&(i.Rt=!0)},this.K1t=()=>{this.q1t.ht.fn(rc.hw,this.i2t),this.q1t.nt.fn(rc.hw,this.e2t),this.q1t.rt.fn(rc.hw,this.s2t)},this.q1t=t,this.wd.cast.strategy!==e_.DISABLED?this.W1t=new X2(this,t,this.wd.cast,i):this.W1t=new Z2,this.YF.ZX(this.W1t)}};function J2(t,i){return void 0!==t&&void 0!==i&&(t.gs===i.gs&&i.kh===t.kh)}var $2=new class extends Mo{M1t(t){this.n2t=t}b1t(){return this.n2t}S1t(){return this.r2t}V1t(){switch(this.o2t.getCastState()){case cast.framework.CastState.CONNECTED:return si.CONNECTED;case cast.framework.CastState.CONNECTING:return si.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return si.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return si.UNAVAILABLE}}async oX(t,i){await N0(i),this.o2t=cast.framework.CastContext.getInstance(),this.o2t.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.qX),this.o2t.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async k1t(){try{const t=await this.o2t.requestSession();if(t)throw t}catch(t){throw new Yt(Jh(t))}}x1t(t){var i;return null==(i=this.n2t)?void 0:i.onStart(t)}U1t(t){var i;return null==(i=this.n2t)?void 0:i.onStop(t)}O1t(t){var i;return null==(i=this.n2t)?void 0:i.onJoin(t)}B1t(t){var i;return null==(i=this.n2t)?void 0:i.onLeave(t)}F1t(t){this.o2t.endCurrentSession(t)}constructor(...t){super(...t),this.r2t=void 0,this.n2t=void 0,this.qX=()=>{const t=this.V1t();this.r2t=t===si.CONNECTED?new q1(this.o2t.getCurrentSession()):void 0,this.Co(new K1(t))}}},t4=new class{get va(){return this.Xa||(this.Xa=function(t){return{initialize(i){const e=t.oX(n_(i));return e.catch(Br),e},startSession(){const i=t.k1t();return i.catch(Br),i},endSession(){t.h2t()}}}(this)),this.Xa}async oX(t){this.E1t||(this.E1t=this.a2t(t)),await this.E1t}async a2t(t){await this.T1t.oX(t)}async k1t(){if(!this.E1t)throw new g("Chromecast must be initialized before starting a session");await this.E1t,this.T1t.S1t()||await this.T1t.k1t()}u2t(){this.T1t.F1t(!1)}h2t(){this.T1t.F1t(!0)}constructor(t){this.E1t=void 0,this.Xa=void 0,this.T1t=t}}($2),i4={get chromecast(){return t4.va}};AP((t=>new K2(t,$2)),st.wit);var Hr,e4,s4=class{c2t(t,i,e,s){t.UU.forEach((t=>{if(!this.l2t(t.d2t)){const n=t.f2t(i,e,s);n&&this._2t(n)}}))}l2t(t){return this.g2t.get(t)}_2t(t){this.g2t.set(t.w2t,t),this.v2t.set(t.w2t,t.m2t),this.p2t.Qa(t.A2t)}Git(t){this.v2t.has(t.w2t)||(this.v2t.set(t.w2t,t),this.p2t.Qa(t.A2t))}y2t(t){return this.v2t.forEach(t)}M2t(t){return this.g2t.forEach(t)}b2t(t){let i=!1;return this.g2t.forEach((e=>{i=e.b2t(t)||i})),i}async gn(){const t=[];this.g2t.forEach((i=>t.push(i.gn()))),this.v2t.forEach((i=>t.push(i.gn()))),await Promise.all(t),this.g2t.clear(),this.v2t.clear()}constructor(t){this.p2t=t,this.g2t=Pu(),this.v2t=Pu()}},ga=class t extends os{fa(){return new n4(this.bqt,this.pL,this.jL,this.yc)}static T2t(i){return new t(_o.GENERAL,i.pL,i.Sqt)}static S2t(i,e){return new t(i.bqt,i.message,i.Sqt,e)}constructor(t,i,e,s){super("yCt"),this.bqt=t,this.pL=i,this.jL=e,this.yc=s}},n4=class extends Os{constructor(t,i,e,s){super("aderror"),this.problemType=t,this.message=i,this.errorCode=e,this.source=s}},r4=class extends Jc{get N2t(){return this.I2t}get Fc(){let t=!1;return this.D2t((i=>{t=t||i.E2t})),t}get Sit(){const t=[];return this.D2t((i=>{const e=i.Sit;e.length&&t.push(...e)})),t}get Iit(){let t=null;return this.D2t((i=>{null!=t||(t=i.Iit)})),t}get Dit(){const t=[];return this.D2t((i=>{t.push(...i.Dit)})),t}get Eit(){const t=[];return this.D2t((i=>{t.push(...i.Eit)})),t}Yit(t){this.D2t((i=>{i.Yit(t)}))}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=xP(this)}Ny(){this.D2t((t=>{t.Ny()}))}Git(t){this.I2t.Git(t)}Lit(t,i){return this.k2t.Lit(t,i)}L2t(t){this.I2t.M2t((i=>{i.L2t(t)}))}b2t(t){return this.I2t.b2t(t)}D2t(t){return this.I2t.y2t(t)}Wg(){this.I2t.M2t((t=>t.Wg()))}async tr(){const t=[];this.I2t.M2t((i=>t.push(i.Zg()))),await Promise.all(t)}async gn(){this.Vo(),await this.I2t.gn()}constructor(t){super(),this.Xa=void 0,this.k2t=t,this.I2t=new s4(this)}},o4=class extends r4{W4(t,i,e){try{this.x2t=e;const s=nu.lL.FU(t);if(s.d2t===F.git)return;const n=this.I2t.l2t(s.d2t);if(!n)throw new va(_o.ADBLOCK,void 0,"Ads could not be loaded.");i!==lc.Cit&&this.v5||this.k2t.C2t(n),s.W4(t,i,n,this.x2t)}catch(i){0,this.Co(ga.S2t(i,t.sources))}}async tr(){await super.tr(),this.v5=!1}async gn(){await super.gn(),this.k2t.fn(Tf.jh,this.ntt),this.fn("yCt",this.O2t)}constructor(t){super(t),this.x2t=!1,this.v5=!1,this.O2t=t=>{if(!this.x2t)return;const i=new Nt(to.ADVERTISEMENT_ERROR,t.pL),e=new ao(qa.AD_BLOCKER_DETECTED,t.pL+" Turn off your AdBlocker and try again.",i);this.k2t.rB(e)},this.ntt=()=>{this.v5=!0},this.yn("yCt",this.O2t),t.yn(Tf.jh,this.ntt)}},hr=class extends f2{get Oc(){return this.Ic}get $Jt(){return this.j2t}set $Jt(t){this.j2t=t}get t$t(){return this.R2t}set t$t(t){this.R2t=t}set cPt(t){this.yKt=t}get cPt(){return this.yKt}get DJt(){return this.P2t}z2t(){this.B2t=!0}U2t(t){this.Ic.push(t),this.B2t=!1}Q2t(t){jn(this.Ic,t)}get pg(){return this.B2t}constructor(t){super(),this.yKt=t,this.Ic=[],this.j2t=-1,this.R2t=-1,this.P2t=void 0,this.B2t=!1}},h4=class extends hr{get vKt(){return this.F2t}get Dit(){return this.Y2t}Yn(t){void 0!==t.maxDuration&&(this.j2t=t.maxDuration),void 0!==t.customData&&(this.P2t=t.customData)}G2t(t){const i=this.Ic.indexOf(t);return i>=0&&i<this.Ic.length-1}U2t(t){super.U2t(t),this.Y2t.push(t)}V2t(t){jn(this.Y2t,t)}Q2t(t){super.Q2t(t),jn(this.Y2t,t)}constructor(t,i){super(i.timeOffset),this.Y2t=[],this.F2t=t,this.Yn(i)}};!function(t){t.xqt="linear",t.Cqt="nonlinear",t.jT="unknown"}(Hr||(Hr={})),function(t){t.NONE="none",t.READY="ready"}(e4||(e4={}));var ln=class extends d2{W2t(t,i,e,s,n,r){this.uS=t,this.qx=i,this.Kx=e,this.jx=s,this.PXt=n,this.OZt=r,this.H2t="ready"}get X2t(){return this.H2t}get RXt(){return this.PXt}get ct(){return this.jx}Nit(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}get Ti(){return this.Kx}get o(){return this.uS}get CZt(){return this.OZt}get ji(){return this.qx}get Z2t(){return this.q2t}get sZt(){return this.nZt}get IXt(){return this.DXt}get fXt(){return this.DZt}get DJt(){return this.P2t}get K2t(){return this.J2t}w$t(){}A$t(){return""}p$t(){return this.$2t}constructor(t,i){super(),this.q2t=i,this.uS=void 0,this.OZt=void 0,this.qx=void 0,this.Kx=void 0,this.jx=void 0,this.DZt=[],this.PXt=[],this.H2t="none",this.P2t=void 0,this.J2t=!1,this.Xl=t}};function a4(t){return{get adSystem(){return t.w$t()},get readyState(){return t.X2t},get adBreak(){return t.Xl.Nit()},get duration(){return t.ct},get companions(){return t.RXt.map((t=>t.va))},get resourceURI(){return t.p$t()},get clickThrough(){return t.sZt},get width(){return t.ji},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t.Z2t)},get height(){return t.Ti},get id(){return t.o},get skipOffset(){return t.CZt},get integration(){return t.vKt},get creativeId(){return t.IXt},get universalAdIds(){return t.fXt},get customData(){return t.DJt},get isSlate(){return t.K2t}}}var u4=class{get XXt(){return this.ZXt}get iZt(){return this.eZt}get t4t(){return this.i4t}get sZt(){return this.nZt}get Ti(){return this.Kx}get lqt(){return this.$2t}get ji(){return this.qx}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get adSlotId(){return t.XXt},get altText(){return t.iZt},get contentHTML(){return t.t4t},get clickThrough(){return t.sZt},get height(){return t.Ti},get resourceURI(){return t.lqt},get width(){return t.ji}}}(this)}e4t(t){if(t.sZt&&t.lqt)return;const i=function(t){try{return t1(t,"text/html")}catch(t){return}}(t.t4t);i&&(this.nZt=c4(i,"a","href"),this.$2t=c4(i,"img","src"))}constructor(t){var i;this.Xa=void 0,this.nZt=void 0,this.$2t=void 0,this.ZXt=t.XXt,this.qx=t.ji,this.Kx=t.Ti,this.i4t=t.t4t,this.nZt=t.sZt,this.$2t=t.lqt,this.eZt=null!=(i=t.iZt)?i:"",this.e4t(t)}};function c4(t,i,e){const s=t.querySelector(i);return s&&s.getAttribute(e)||""}var l4=class extends ln{get vKt(){return this.F2t}get s4t(){return this.n4t}set s4t(t){this.n4t=t}fa(){return a4(this)}Yn(t){t.id&&(this.uS=t.id),void 0!==t.skipOffset&&(this.OZt=t.skipOffset),void 0!==t.width&&(this.qx=t.width),void 0!==t.height&&(this.Kx=t.height),void 0!==t.duration&&(this.jx=t.duration),void 0!==t.readyState&&(this.H2t=function(t){return"ready"===t?e4.READY:e4.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.$2t=t.resourceURI),void 0!==t.clickThrough&&(this.nZt=t.clickThrough),void 0!==t.companions&&(this.PXt=[...t.companions].map(d4)),void 0!==t.creativeId&&(this.DXt=t.creativeId),void 0!==t.universalAdIds&&(this.DZt=t.universalAdIds),void 0!==t.customData&&(this.P2t=t.customData)}constructor(t,i,e){super(e,function(t){return"linear"===t?Hr.xqt:"nonlinear"===t?Hr.Cqt:Hr.jT}(i.type)),this.n4t=0,this.F2t=t,this.Yn(i)}};function d4(t){const i={XXt:t.adSlotId,iZt:t.altText,t4t:t.contentHTML,Nz:void 0,sZt:t.clickThrough,Ti:t.height,lqt:t.resourceURI,ji:t.width};return new u4(i)}var f4=class extends Fo{fa(){return new _4(this.Rit.Nit(),this.r4t)}get r4t(){return this.o4t}constructor(t,i){super("pCt",t),this.o4t=i}},_4=class extends Oo{constructor(t,i){super("adskip",t),this.playedPercentage=i}},g4=class extends Ke{fa(){return new w4(this.Xl.Nit())}constructor(t){super("h4t",t)}},w4=class extends Je{constructor(t){super("updateadbreak",t)}},v4=class extends Ke{fa(){return new m4(this.Xl.Nit())}constructor(t){super("a4t",t)}},m4=class extends Je{constructor(t){super("adbreakchange",t)}},p4=class extends Fo{fa(){return new A4(this.Rit.Nit(),this.currentTime)}constructor(t,i){super("u4t",t),this.currentTime=i}},A4=class extends Oo{constructor(t,i){super("adfirstquartile",t),this.currentTime=i}},y4=class extends Fo{fa(){return new M4(this.Rit.Nit(),this.currentTime)}constructor(t,i){super("c4t",t),this.currentTime=i}},M4=class extends Oo{constructor(t,i){super("admidpoint",t),this.currentTime=i}},b4=class extends Fo{fa(){return new T4(this.Rit.Nit(),this.currentTime)}constructor(t,i){super("l4t",t),this.currentTime=i}},T4=class extends Oo{constructor(t,i){super("adthirdquartile",t),this.ad=t,this.currentTime=i}},S4=class{get Oc(){return this.Ic}get s$t(){return this.D$t}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get integration(){return t.vKt},get ads(){return t.Oc.map((t=>t.Nit()))},get adBreaks(){return t.s$t.map((t=>t.Nit()))},createAd:(i,e)=>t.d4t(i,e?t.f4t(e):void 0).Nit(),updateAd(i,e){t._4t(t.g4t(i),e)},updateAdProgress(i,e){const s=Qh(Number(e),0,1);t.w4t(t.g4t(i),s)},beginAd(i){t.V2t(t.g4t(i))},endAd(i){t.v4t(t.g4t(i))},skipAd(i){t.$Kt(t.g4t(i))},removeAd(i){t.Q2t(t.g4t(i))},createAdBreak:i=>t.m4t(i).Nit(),updateAdBreak(i,e){t.p4t(t.f4t(i),e)},removeAdBreak(i){t.A4t(t.f4t(i))},removeAllAds(){t.y4t()},error(i){t.M4t(i)},fatalError(i,e){const s=e?Number(e):void 0;t.b4t(i,s)}}}(this)}get NM(){return this.T3}set NM(t){this.T3=t}get E2t(){return this.T4t.some((t=>t.Z2t===Hr.xqt))}get w2t(){return this.vKt}get Sit(){return this.T4t}get Iit(){var t;return null!=(t=this.I$t)?t:null}get Dit(){return Pe(this.D$t,(t=>t.Dit))}get Eit(){return this.D$t.filter((t=>!t.pg))}Ny(){var t;if(0===this.T4t.length)return;const i=this.T4t[0];(null==(t=this.T3)?void 0:t.skipAd)?this.T3.skipAd(i.Nit()):this.$Kt(i)}Yit(t){}d4t(t,i){var e;const s=null!=i?i:this.S4t({timeOffset:null!=(e=t.timeOffset)?e:0}),n=new l4(this.vKt,t,s);return s.U2t(n),this.Ic.push(n),this.A2t.Co(new qr(n)),n}_4t(t,i){t.Yn(i),this.A2t.Co(new M2(t))}w4t(t,i){if(!Ai(this.T4t,t))throw new g("Cannot update ad progress on a non-started ad");const e=t.s4t,s=_.max(e,i);t.s4t=s;const n=this.k2t.Q_();e<.25&&s>=.25&&this.A2t.Co(new p4(t,n)),e<.5&&s>=.5&&this.A2t.Co(new y4(t,n)),e<.75&&s>=.75&&this.A2t.Co(new b4(t,n))}V2t(t){Ai(this.T4t,t)||(this.T4t.push(t),t.Xl.V2t(t),this.N4t(t.Xl),this.A2t.Co(new Mh(t,this.k2t.Q_())))}$Kt(t){if(!Ai(this.T4t,t))return;const i=t.Xl.G2t(t);this.A2t.Co(new f4(t,t.s4t)),this.I4t(t,i)}v4t(t){if(!Ai(this.T4t,t))return;const i=t.Xl.G2t(t);this.A2t.Co(new Qc(t,this.k2t.Q_())),this.I4t(t,i)}Q2t(t){if(!Ai(this.Ic,t))return;const i=t.Xl.G2t(t);jn(this.Ic,t),t.Xl.Q2t(t),this.A2t.Co(new v4(t.Xl)),this.I4t(t,i)}m4t(t){const i=new h4(this.vKt,t);return this.D$t.push(i),this.A2t.Co(new nh(i)),i}p4t(t,i){t.Yn(i),this.A2t.Co(new g4(t))}A4t(t){if(Ai(this.D$t,t)){for(const i of t.Oc.slice())this.Q2t(i);jn(this.D$t,t),this.A2t.Co(new Lr(t))}}y4t(){for(const t of this.D$t.slice())this.A4t(t)}M4t(t){this.A2t.Co(new ga(_o.GENERAL,t.message))}b4t(t,i){const e=new ao(null!=i?i:qa.AD_ERROR,t.message,t);this.k2t.rB(e)}D4t(t){return bo(this.D$t,(i=>i.cPt===t))}S4t(t){var i;return null!=(i=this.D4t(t.timeOffset))?i:this.m4t(t)}I4t(t,i){jn(this.T4t,t);const e=t.Xl;0!==this.T4t.length||this.I$t!==e||i||(e.z2t(),this.N4t(void 0))}N4t(t){this.I$t!==t&&(void 0!==this.I$t&&this.A2t.Co(new dc(this.I$t)),this.I$t=t,void 0!==t&&this.A2t.Co(new PP(t)))}g4t(t){const i=bo(this.Ic,(i=>i.Nit()===t));if(void 0===i)throw new g('Invalid ad for integration "'+this.vKt+'"');return i}f4t(t){const i=bo(this.D$t,(i=>i.Nit()===t));if(void 0===i)throw new g('Invalid ad break for integration "'+this.vKt+'"');return i}async ga(t,i){var e;if(Vr(i),null==(e=this.T3)?void 0:e.setSource){let i=await Promise.resolve(this.T3.setSource(t));return Mu(i)&&(i=t),dl(i,this.k2t.wd)}return t}async E4t(){var t;(null==(t=this.T3)?void 0:t.resetSource)?await Promise.resolve(this.T3.resetSource()):this.y4t()}async gn(){var t;(null==(t=this.T3)?void 0:t.destroy)&&await Promise.resolve(this.T3.destroy()).catch(Br),this.y4t(),this.N4t(void 0),this.T3=void 0,this.A2t.gn()}constructor(t,i){this.A2t=new Jc,this.Ic=[],this.D$t=[],this.T4t=[],this.vKt=t,this.k2t=i}};var N4=class extends Kc{ait(){return this.k4t}get L4t(){return this.x4t}Wg(){this.q1t.Wg(),this.k4t.Wg()}Xg(){void 0===this.vz?(void 0!==this.C4t&&this.O4t(this.C4t),super.Xg()):this.Co(new as(this.vz))}async ga(t,i){Vr(i);let e=t;if(e)for(const t of this.j4t)e=await t.ga(e,i);if(await super.ga(e,i),Vr(i),null==e?void 0:e.ads){const t=Boolean(e.blockContentIfAdError);this.k4t.L2t(e.playAdsAfterTime);for(const i of e.ads)this.k4t.W4(i,lc.Cit,t)}}async Zg(){this.vz=void 0,this.bU=void 0,await this.k4t.tr(),this.Q1t(),await super.Zg();for(const t of this.j4t)await t.E4t()}O4t(t){this.R4t=this.Qo.gg;const i=this.Qo.zg,e=this.Qo.og;t.Ug(i),t.ag(e),this.x4t=t,this.C4t=void 0,this.WT(t)}C2t(t){void 0===this.x4t&&(this.C4t=t)}Q1t(){this.C4t=void 0,void 0!==this.x4t&&(this.q1t.gg=this.R4t,this.q1t.zg=this.zg,this.q1t.og=this.og,this.WT(this.q1t),this.x4t=void 0)}W_(){var t;return null!=(t=this.bU)?t:super.W_()}X_(){var t;return null!=(t=this.vz)?t:super.X_()}rB(t){void 0===this.X_()&&(this.vz=t,this.bU=ia(t),this.Co(new as(t)))}nw(t){return void 0===this.x4t&&this.k4t.b2t(t)}Lit(t,i){try{const e=new S4(t,this);e.NM=i(e.va),this.k4t.Git(e),this.j4t.push(e)}catch(i){this.k4t.Co(new ga(_o.GENERAL,'Error while constructing ad integration "'+t+'": '+i+'"'))}}async gn(){for(const t of this.j4t)await t.gn().catch(Br);await this.k4t.gn(),this.Q1t(),await super.gn()}constructor(t,i){super(t),this.j4t=[],this.vz=void 0,this.bU=void 0,this.R4t=1,this.q1t=t,this.k4t=new o4(this),this.k4t.N2t.c2t(i,t,this,t.wd)}};AP((t=>new N4(t,nu.lL)),st._it);var I4,D4=0!==Po.Uk?Po.Uk:Po.WE,E4=Po.Ga&&D4<12,ll=class extends sl{get U_(){return this.Q_()}set U_(t){this.F_(t)}Ktt(){return this.Qo.Ktt()}get ct(){return this.Td()}get Z_(){return this.GT}get Ig(){return this.Dg()}get Qg(){return this.bz}get A2t(){return this.P4t}get ht(){return this.YT}get E2t(){return this.k2t.L4t===this}j_(){return Ri.oU().ks()}P_(){}z_(t){}wg(){return 1}vg(t){}Ag(){return new Ri([0,this.U_]).ks()}Lg(){return!1}xg(){return this.Dl}jg(){return this.VT}cs(){return this.Gg().cs}Gg(){return this.dU}ka(){}async gn(){this.Vo(),this.YT.gn(),this.VT.gn(),this.Dl.gn(),this.P4t.gn(),this.Qo.fn(Tf.Dv,this.Ds)}z4t(){E4&&this.B4t(),this.E2t||this.k2t.O4t(this)}Q1t(){this.E2t&&(E4&&this.U4t(),Po.sL&&this.we.querySelectorAll("video[src]").forEach((t=>{t.src=""})),ra.Ys.Bet&&this.Qo.iw(),this.k2t.Q1t())}B4t(){this.Q4t||(Ua.addEventListener("blur",this.F4t),Ua.addEventListener("focus",this.Y4t),this.Q4t=!0)}U4t(){Ua.removeEventListener("blur",this.F4t),Ua.removeEventListener("focus",this.Y4t),this.Q4t=!1}G4t(){requestAnimationFrame((()=>this.Qo.be()))}constructor(t,i){super(t,!0),this.k2t=i,this.Q4t=!1,this.VT=new Ds,this.YT=new Ds,this.Dl=new iu,this.GT=new Bf,this.P4t=new Jc,this.dU=new Et,this.bz=new Wn,this.F4t=()=>{this.Qo.ge()},this.Y4t=()=>{this.G4t()},this.Qo.yn(Tf.Dv,this.Ds)}},k4=0,L4="theoplayer-wrapper",x4=class t{get V4t(){return this.W4t}get H4t(){return this.X4t}get Z4t(){return 1===this.X4t.length&&R1(this.X4t[0].sources.type)}get q4t(){return this.K4t}J4t(t){const i=this.$4t===t.timeOffset;return!this.t3t&&i}get i3t(){return this.e3t}get s3t(){return U1(this.n3t)&&!this.t3t}get $4t(){return this.n3t}get Kl(){return this.r3t}o3t(){if(S(this.r3t)){let t=this.$4t;if(void 0===t)return void(this.r3t=0);if("string"==typeof t&&U1(t)){const i=this.Qo.Td();S(i)||i===1/0||(t=R0(t)*i)}S(t)||(this.r3t=t)}}get h3t(){return this.a3t}set h3t(t){this.a3t=t}get u3t(){return this.c3t}set u3t(t){this.c3t=t,this.l3t=!1}get d3t(){return this.f3t}_3t(t){this.f3t.push(t)}g3t(){if(!this.t3t){let t,i;const e=this.W4t===lc.Cit&&void 0===this.w3t&&1===this.X4t.length,s=this.X4t[0];if(R1(s.sources.type)||e)t=s.sources.src;else{if(S(this.Qo.Td())&&"end"===this.v3t())return;i=this.m3t()}let n=this.Qo.Td();(S(n)||n===1/0)&&(n=-3),this.t3t={p3t:this.Qo.we.offsetWidth,A3t:this.Qo.we.offsetHeight,y3t:this.Qo.we.offsetWidth,M3t:this.Qo.we.offsetHeight,b3t:this.Ftt,T3t:this.uU,S3t:t,N3t:i,I3t:s.omidAccessModeRules,D3t:n}}return this.t3t}m3t(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.X4t.map(((t,i)=>this.E3t(t.sources,i))).join("\n")+"</vmap:VMAP>"}E3t(t,i){const e=this.v3t(),s=t.src;return'<vmap:AdBreak timeOffset="'+e+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.Xw+"-"+i+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+L4+"-"+this.Xw+"-"+i+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}v3t(){if(0===this.$4t)return"start";if(this.$4t===1/0)return"end";const t=this.$4t;if("string"==typeof t&&U1(t)){const i=R0(t)*this.Qo.Td();return Ph.cKt(i)}return Ph.cKt(this.$4t||0)}k3t(t){this.X4t.push(t)}L3t(t){const i=L4+"-"+this.Xw+"-";for(const e of t)if(I(e,i)){const t=Number(e.slice(i.length));if(!S(t)&&t>=0&&t<this.X4t.length)return t}return-1}static x3t(t){if(void 0!==t)return-1===t?1/0:t}C3t(){this.e3t=!0}get eS(){return this.Ftt}set eS(t){this.Ftt=t}get og(){return this.uU}set og(t){this.uU=t}constructor(i,e,s,n){this.W4t=e,this.Qo=s,this.K4t=n,this.r3t=NaN,this.a3t=!1,this.c3t=!1,this.e3t=!1,this.f3t=[],this.Ftt=!1,this.uU=!1,this.X4t=[],this.Xw=++k4,this.w3t=i.timeOffset,this.n3t=t.x3t(this.w3t),this.o3t(),this.X4t.push(i)}},C4=class{get O3t(){return this.j3t.O3t}get R3t(){return this.j3t.R3t}get Dit(){return this.j3t.Dit}get t(){return this.j3t.t}L2t(t){this.P3t=t}z3t(t){return!(this.O3t&&!this.O3t.i3t&&"nonlinear"!==this.R3t.Z2t)||this.O3t.Kl>t.Kl&&this.O3t.Kl!==t.Kl}B3t(t){if(t.length)return t.sort(((t,i)=>t.Kl-i.Kl))[0]}U3t(){if(this.Dit.length)return this.B3t(this.Q3t(this.t.Q_()))}F3t(){if(!(void 0!==this.P3t&&this.P3t>=0))return this.Dit.filter((t=>!t.h3t&&0===t.Kl&&t!==this.O3t))[0]}Q3t(t){if(!this.Y3t&&(this.Y3t=!this.Dit.some((t=>S(t.Kl))),!this.Y3t))return[];const i=this.Dit.filter((i=>!i.h3t&&(i.Z4t||!S(i.Kl)&&t<=i.Kl)));return void 0===this.P3t?i:i.filter((t=>t.Z4t||void 0===t.$4t||t.Kl>this.P3t))}constructor(t){this.Y3t=!1,this.j3t=t,this.P3t=void 0}};!function(t){t[t.G3t=0]="G3t",t[t.V3t=1]="V3t",t[t.W3t=2]="W3t"}(I4||(I4={}));var jl,O4,ml,al,j4=class{Wg(){this.bo=!0,this.H3t&&this.X3t()}Z3t(t,i){this.q3t(t,i);const e=bo(this.Dit,(i=>i.J4t(t)));if(e)e.k3t(t);else{var s;const e=new x4(t,i,this.Qo,null==(s=t.replaceContent)||s);this.Y2t.push(e),2===this.K3t&&this.J3t.m4t(e.Kl,e,e.$4t),this.$3t(i,e)}}get R3t(){return this.t5t}get Dit(){return this.Y2t}get t(){return this.Qo}get KGt(){return Boolean(this.Cvt)}get K3t(){return this.i5t}e5t(){if(jn(this.Dit,this.O3t),this.O3t){for(const t of this.O3t.d3t)this.J3t.s5t();this.O3t=void 0}}n5t(){for(const t of this.Y2t)for(const i of t.d3t)this.J3t.r5t(i,!0);To(this.Y2t)}async o5t(t){this.e5t(),this.h5t=!0,this.O3t=t,this.a5t=t.Kl,this.Cvt=this.u5t(t),await this.Cvt,this.Cvt=void 0}async u5t(t){this.c5t(t);const i=t.g3t();if(!i)return this.h5t=!1,void(this.O3t=void 0);const e=this.t5t.l5t(i);t.h3t=!0;try{await e,t.V4t===lc.kit&&this.t5t.d5t()}catch(t){0,this.O3t=void 0,await this.X3t()}}c5t(t){this.bo?t.eS=!0:t.eS=this.k2t.eS,t.og=this.k2t.og}f5t(){var t;return null!=(t=this._5t.F3t())?t:this._5t.U3t()}async X3t(){if(this.O3t&&!this.O3t.i3t)return this.Cvt;const t=this.f5t();t&&await this.o5t(t)}get O3t(){return this.g5t}set O3t(t){this.g5t=t}get h5t(){return this.w5t}set h5t(t){this.w5t=t}tr(){this.e5t(),To(this.Y2t),this.a5t=0,this.O3t=void 0,this.Cvt=void 0,this.h5t=!1}u3t(){this.h5t=!1,this.O3t&&(this.O3t.u3t=!0)}async $3t(t,i){t===lc.kit&&this.bo&&this._5t.z3t(i)&&!this.KGt&&"linear"!==this.t5t.Z2t&&(!this.O3t||this.O3t&&this.O3t.h3t)&&(await Promise.resolve(),await this.o5t(i))}C3t(){this.O3t&&this.O3t.C3t()}get v5t(){if(this.KGt||this.h5t)return!1;if(this.O3t&&!this.O3t.i3t)return!1;return!!this.Y2t.filter((t=>this.O3t!==t)).length&&Boolean(this.f5t())}async m5t(){if(!this.v5t)return void 0;const t=this.f5t();t&&await this.o5t(t)}q3t(t,i){const e=t.sources.type,s=i===lc.Cit&&void 0===t.timeOffset,n=R1(e)||s?1:2;n!==this.i5t&&(this.i5t=n,this.n5t(),this.t5t.i$t&&!this.KGt&&"linear"!==this.t5t.Z2t&&(this.t5t.i$t.h_(),this.O3t=void 0,this.Cvt=void 0),this.a5t=0,this.H3t=!0)}L2t(t){this._5t.L2t(t)}gn(){this.Qo.fn(Tf.Lv,this.uF)}constructor(t,i,e,s,n){this.i5t=0,this.Cvt=void 0,this.w5t=!1,this.uF=()=>{const t=this.Y2t.filter((t=>t.s3t));for(const i of t){i.o3t();const t=i.$4t;this.J3t.p5t(t,i.Kl)}this.bo&&this.v5t&&this.X3t()},this.Y2t=[],this.t5t=t,this.bo=!1,this.H3t=!1,this.Qo=i,this.k2t=e,this.O3t=void 0,this.a5t=0,this._5t=new C4(this),this.Vtt=s,this.J3t=n,this.Qo.yn(Tf.Lv,this.uF)}};function R4(t,i){if(t===jl.A5t){const t=i;return{y5t:t.adBreakDuration,M5t:t.adPosition,U_:t.currentTime,ct:t.duration,b5t:t.totalAds}}return i}function P4(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return al.T5t;case google.ima.AdError.Type.AD_PLAY:return al.S5t}}function z4(t){return Vu(t)&&ad(t.getVastErrorCode)}function B4(t){const i=t.getInnerError(),e=i&&z4(i)?B4(i):void 0;return{pL:t.getMessage(),Sqt:t.getErrorCode(),N5t:t.getVastErrorCode(),Av:P4(t.getType()),I5t:e}}function U4(t){if(Ks(t))return t}!function(t){t.D5t="contentResumeRequested",t.E5t="contentPauseRequested",t.k5t="click",t.Lv="durationChange",t.L5t="expandedChanged",t.nLt="start",t.x5t="impression",t.VU="pause",t.C5t="resume",t.A5t="adProgress",t.O5t="adBuffering",t.j5t="firstQuartile",t.HZt="midpoint",t.R5t="thirdQuartile",t.XZt="complete",t.P5t="userClose",t.z5t="linearChanged",t.B5t="loaded",t.U5t="adCanPlay",t.Q5t="adMetadata",t.F5t="adBreakReady",t.Y5t="interaction",t.G5t="allAdsCompleted",t.V5t="skip",t.W5t="skippableStateChanged",t.H5t="log",t.X5t="viewableImpression",t.Z5t="volumeChange",t.q5t="mute"}(jl||(jl={})),(O4||(O4={})).K5t="adError",function(t){t[t.J5t=-1]="J5t",t[t.$5t=-1]="$5t",t[t.t6t=-1]="t6t",t[t.i6t=101]="i6t",t[t.e6t=102]="e6t",t[t.s6t=200]="s6t",t[t.n6t=201]="n6t",t[t.r6t=202]="r6t",t[t.o6t=300]="o6t",t[t.h6t=301]="h6t",t[t.a6t=302]="a6t",t[t.u6t=303]="u6t",t[t.c6t=400]="c6t",t[t.l6t=402]="l6t",t[t.d6t=403]="d6t",t[t.f6t=405]="f6t",t[t._6t=500]="_6t",t[t.g6t=501]="g6t",t[t.w6t=-1]="w6t",t[t.v6t=503]="v6t",t[t.m6t=602]="m6t",t[t.p6t=900]="p6t",t[t.A6t=901]="A6t",t[t.y6t=1005]="y6t",t[t.M6t=1007]="M6t",t[t.b6t=1009]="b6t",t[t.T6t=1010]="T6t",t[t.S6t=1011]="S6t",t[t.N6t=1012]="N6t",t[t.I6t=1013]="I6t",t[t.D6t=1020]="D6t",t[t.E6t=1021]="E6t",t[t.k6t=1101]="k6t",t[t.L6t=1204]="L6t",t[t.x6t=1205]="x6t",t[t.C6t=1300]="C6t",t[t.O6t=-1]="O6t",t[t.j6t=-1]="j6t",t[t.R6t=-1]="R6t",t[t.P6t=-1]="P6t"}(ml||(ml={})),function(t){t.T5t="adLoadError",t.S5t="adPlayError"}(al||(al={}));var Q4=class extends Mo{z6t(t){this.t5t.Co(t)}B6t(t){this.e$t=t,this.e$t.yn(O4.K5t,this.U6t),this.e$t.yn(jl.E5t,this.Q6t),this.e$t.yn(jl.D5t,this.F6t),this.e$t.yn(jl.G5t,this.Y6t),this.e$t.yn(jl.nLt,this.G6t),this.e$t.yn(jl.XZt,this.V6t),this.e$t.yn(jl.V5t,this.W6t),this.e$t.yn(jl.P5t,this.H6t),this.e$t.yn(jl.k5t,this.X6t),this.e$t.yn(jl.U5t,this.Z6t),this.e$t.yn(jl.VU,(()=>{this.t5t.fg||(this.t5t.q6t(!0),this.t5t.Co(new Ye(this.t5t.U_))),this.K6t(!0)})),this.e$t.yn(jl.C5t,(()=>{this.t5t.fg&&(this.t5t.q6t(!1),this.t5t.Co(new Rt(this.t5t.U_)))})),this.e$t.yn(jl.q5t,(()=>{const i=t.Bg();i>=0&&this.J6t(i)})),this.e$t.yn(jl.Z5t,(()=>{const i=t.Bg();i>=0&&this.J6t(i)})),this.e$t.yn(jl.Q5t,(t=>{this.t9t.$6t(t.type)})),this.e$t.yn(jl.Lv,(t=>{t.Rit&&this.i9t(t.Rit.ct)})),this.e$t.yn(jl.H5t,(async t=>{const i=t.e9t.adError,e=z4(i)?B4(i):void 0;e&&(this.s9t(e)?await this.n9t(t):this.r9t(e)?await this.o9t(e):this.h9t(e)&&this.a9t(e))})),this.e$t.yn(jl.B5t,(t=>{if(t.Rit&&(this.t5t.u3t(),this.t9t.u9t(t.Rit),this.c9t=0,t.Rit.l9t)){var i;const t=this.t5t.Sg,e=qo.BT;this.t5t.a2(e);const s=this.t5t.U_,n=this.t5t.Sg;n!==t&&this.z6t(new R(s,n)),null==(i=this.e$t)||i.Ug(this.t5t.d9t()),this.z6t(new An(s,e))}})),this.e$t.yn([jl.O5t,jl.x5t,jl.j5t,jl.HZt,jl.R5t],(t=>{t.Rit&&this.t9t.f9t(t.Rit,t.type,this.t5t.U_)})),this.e$t.yn(jl.j5t,this._9t),this.e$t.yn(jl.A5t,this.g9t)}async switchToPlayerIfNoNextAd(){if(this.e$t){const t=this.e$t.w9t();t&&this.v9t(t)||(this.t5t.v5t()?await this.t5t.m5t():(this.t5t.m9t(),this.Qo.fg&&!this.Qo.G_&&this.Qo.Xg()))}else if(this.t5t.v5t())await this.t5t.m5t();else{const t=this.t5t.fg;this.t5t.m9t(),t||this.Qo.Xg()}}v9t(t){const i=t.p9t,e=null==i?void 0:i.b5t;return(null==i?void 0:i.M5t)!==e}g1(){this.t5t.jc&&(m(this.t5t.jc),this.t5t.jc=null)}h9t(t){return t.Av===al.T5t}r9t(t){return t.Av===al.S5t}s9t(t){return t.Sqt===ml.b6t}async o9t(t){var i;this.a9t(t);const e=[ml.c6t,ml.A6t,ml.E6t,ml.x6t];var s;this.t5t.Xit||Ai(e,t.Sqt)||Ai(e,null==(i=t.I5t)?void 0:i.Sqt)||(this.t5t.A9t.h5t=!1,null==(s=this.t5t.A9t.O3t)||s.C3t(),await this.switchToPlayerIfNoNextAd())}a9t(t){this.t5t.M4t(t)}async y9t(){this.t9t.s5t(),this.t5t.C3t(),"nonlinear"===this.t5t.Z2t&&(this.t9t.M9t(-1,!1),this.t5t.b9t(void 0)),"nonlinear"!==this.t5t.Z2t&&"none"!==this.t5t.Z2t||this.t5t.v5t()&&await this.t5t.m5t(),this.t5t.T9t(),this.t5t.E2t?this.t5t.Q1t():this.S9t()&&this.Qo.Co(new pa(this.Qo.Q_()))}S9t(){return this.t5t.N9t&&!this.t5t.I9t&&this.Qo.G_}setCountdownTimer(){this.g1(),this.t5t.jc=v((()=>this.K6t()),250)}async n9t(t){void 0!==t.Rit&&(this.t5t.A9t.h5t=!1,this.t5t.C3t(),this.t5t.v5t()?await this.t5t.m5t():this.t5t.q6t(!0))}i9t(t){this.t5t.ct!==t&&t>=0&&(this.t5t.P1(t),this.z6t(new Te(this.t5t.ct)))}J6t(t){this.t5t.d9t()!==t&&(0===t?this.t5t.D9t(t,!0,!1):this.t5t.D9t(t,!1,!1))}async E9t(){this.t5t.k9t&&void 0!==this.Qo.W_()&&(this.L9t=new Bd,await this.Qo.ga(this.Qo.Wa(),this.L9t.f_),this.x9t&&this.Qo.F_(this.x9t),this.x9t=void 0)}K6t(t){if(this.e$t){const t=this.e$t.C9t();t>this.t5t.ct&&this.i9t(_.round(t))}const i=this.t5t.U_;(t||!this.t5t.fg&&i!==this.t5t.O9t)&&(this.t5t.Co(new ri(i,void 0)),this.t5t.O9t=i)}tr(){this.L9t&&(this.L9t.g_(),this.L9t=void 0),this.j9t=!1,this.c9t=0}gn(){this.tr(),this.Vo()}constructor(t,i,e){super(),this.t5t=t,this.Qo=i,this.t9t=e,this.j9t=!1,this.L9t=void 0,this.x9t=void 0,this.c9t=0,this._9t=t=>{if(!t.Rit||!t.Rit.p9t)return;const i=t.Rit.p9t;this.t9t.p4t(i.cPt,i.b5t,i.$Jt)},this.g9t=t=>{var i,e,s;if(this.c9t>=5)return;this.c9t++;const n=t.e9t;if(!function(t){return Vu(t)&&void 0!==t.y5t&&void 0!==t.b5t}(n))return;const r=null==(s=this.e$t)||null==(e=s.w9t())||null==(i=e.p9t)?void 0:i.cPt;void 0!==r&&this.t9t.p4t(r,n.b5t,n.y5t)},this.U6t=async t=>{t.e9t.R9t&&await this.o9t(t.e9t.R9t)},this.Y6t=async()=>{this.j9t=!0,this.t5t.C3t(),await this.F6t()},this.G6t=t=>{if(!t.Rit)return;const i=t.Rit;this.t5t.b9t(i),this.t5t.ge(),this.t5t.P9t(),this.t9t.z9t(i);const e=i.ct;if(this.i9t(e),i.l9t){const t=this.t5t.U_,i=this.t5t.Sg;this.t5t.a2(qo.QT),this.z6t(new re(t,i)),this.z6t(new We(t,i)),this.z6t(new Pn(t,i)),this.t5t.fg||this.z6t(new $e(this.t5t.U_)),this.setCountdownTimer(),this.K6t(!0)}else this.t5t.Q1t(),this.Qo.ge(),this.t5t.fg||this.Qo.Xg()},this.V6t=t=>{var i;if(!t.Rit)return;const e=t.Rit;if(this.g1(),this.t9t.M9t(this.t5t.ct,e.l9t),this.t5t.Sg!==qo.BT){const t=qo.BT;this.t5t.a2(t);const i=this.t5t.U_;this.z6t(new R(i,t))}this.i9t(NaN),this.t5t.B9t=!1,null==(i=this.e$t)||i.Ug(this.t5t.d9t())},this.W6t=t=>{t.Rit&&(this.V6t(t),this.t9t.W6t(t.Rit,this.t5t.U_,this.t5t.ct))},this.H6t=t=>{t.Rit&&(this.t9t.M9t(-1,t.Rit.l9t),this.t5t.C3t(),!t.Rit.l9t&&this.t5t.v5t()&&this.t5t.m5t())},this.X6t=t=>{t.Rit&&(t.Rit.l9t?this.t5t.Hg():this.Qo.Hg())},this.Z6t=()=>{var t;(this.t5t.B9t=!0,this.t5t.U9t)&&(null==(t=this.e$t)||t.Hg(),this.t5t.U9t=!1)},this.Q6t=t=>{var i;if(!t.Rit)return;this.t5t.k9t&&(this.x9t=this.Qo.Q_(),this.Qo.$g(),this.Qo.Yg=!0),this.t5t.Q9t=!0;const e=t.Rit;this.t9t.Md(e);const s=e.ct;this.t5t.b9t(e),this.i9t(s),this.t5t.q6t(!1),this.t5t.ge(),this.t5t.z4t(),this.t5t.k9t||this.Qo.be(),this.Qo.Hg(),this.t5t.F9t(e);0===(null==(i=e.p9t)?void 0:i.cPt)||this.t5t.Co(new Ib(this.t5t.U_))},this.F6t=async t=>{const i=null==t?void 0:t.Rit;this.t5t.Q9t=!1,"linear"===this.t5t.Z2t&&this.t9t.Pd(),i&&i.ct>=0&&this.i9t(i.ct),this.Qo.Td()===1/0&&this.t5t.Y9t(),this.t5t.B9t=!1,this.j9t&&await this.y9t(),this.t5t.q6t(!0);try{await this.E9t()}catch(t){return void(be(t)||this.Co(new zh(t)))}if(this.t5t.Q1t(),this.t5t.be(),this.Qo.G_||this.Qo.Xg(),i&&this.t5t.b9t(i),this.t5t.N9t){if(this.t5t.k9t){var e;const t=this.Qo.Vg(),i=null==(e=this.Qo.bt)?void 0:e.src;t&&i&&(t.src=i)}this.t5t.I9t=!0}this.Qo.Yg=!1,this.t5t.v5t()&&await this.t5t.m5t()}}},F4=class extends hr{get vKt(){return F.M$t}constructor(t,i,e){super(t),this.G9t=i,this.V9t=e}},Y4=class extends ln{set W9t(t){this.H9t=t}get W9t(){return this.H9t}get vKt(){return F.so}w$t(){var t;return null==(t=this.X9t)?void 0:t.eXt}get Z9t(){var t;return null==(t=this.X9t)?void 0:t.WXt}get IXt(){var t;return null==(t=this.X9t)?void 0:t.IXt}get kz(){var t;return null==(t=this.X9t)?void 0:t.kz}get q9t(){var t,i;return null!=(i=null==(t=this.X9t)?void 0:t.q9t)?i:[]}get K9t(){var t,i;return null!=(i=null==(t=this.X9t)?void 0:t.K9t)?i:[]}get J9t(){var t,i;return null!=(i=null==(t=this.X9t)?void 0:t.J9t)?i:[]}fa(){return function(t,i){return ro(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get apiFramework(){return i.Z9t},get creativeId(){return i.IXt},get title(){return i.kz},get wrapperAdIds(){return i.q9t},get wrapperAdSystems(){return i.K9t},get wrapperCreativeIds(){return i.J9t}})}(a4(this),this)}$9t(t){this.X9t=t;const i=G4(t);this.W2t(t.yZt,t.t8t,t.i8t,t.ct,i,-1)}constructor(t,i){super(t,i),this.H9t=0,this.X9t=void 0}};function G4(t){return t.lXt.map((t=>new u4(t)))}var V4=class extends ln{fa(){return function(t,i){return ro(t,{get adSystem(){return i.w$t()},get apiFramework(){return i.Z9t},get bitrate(){return i.e8t},get contentType(){return i.Nz},get creativeId(){return i.IXt},get mediaUrl(){return i.s8t},get title(){return i.kz},get traffickingParameters(){return i.n8t},get traffickingParametersString(){return i.r8t},get wrapperAdIds(){return i.q9t},get wrapperAdSystems(){return i.K9t},get wrapperCreativeIds(){return i.J9t},get universalAdIds(){return i.fXt}})}(a4(this),this)}$9t(t){this.X9t=t,this.W2t(t.yZt,t.t8t,t.i8t,t.ct,G4(t),t.o8t),this.q2t=t.l9t?Hr.xqt:Hr.Cqt}get vKt(){return F.M$t}w$t(){return this.X9t?W4(this.X9t.eXt):void 0}get Z9t(){return this.X9t?W4(this.X9t.WXt):void 0}get e8t(){return this.X9t?this.X9t.h8t:0}get Nz(){return this.X9t?W4(this.X9t.Nz):void 0}get IXt(){return this.X9t?W4(this.X9t.IXt):void 0}get a8t(){return this.X9t?W4(this.X9t.a8t):void 0}get s8t(){var t;const i=null==(t=this.X9t)?void 0:t.s8t;return Ks(i)?i:this.u8t}set s8t(t){this.u8t=t}get kz(){var t;return null==(t=this.X9t)?void 0:t.kz}get n8t(){return this.X9t?W4(this.X9t.n8t):void 0}get r8t(){return this.X9t?W4(this.X9t.r8t):void 0}get q9t(){var t,i;return null!=(i=null==(t=this.X9t)?void 0:t.q9t)?i:[]}get K9t(){var t,i;return null!=(i=null==(t=this.X9t)?void 0:t.K9t)?i:[]}get J9t(){var t,i;return null!=(i=null==(t=this.X9t)?void 0:t.J9t)?i:[]}get fXt(){var t,i;return null!=(i=null==(t=this.X9t)?void 0:t.fXt.map((t=>({adIdRegistry:t.c8t,adIdValue:t.l8t}))))?i:[]}constructor(t){super(t,Hr.jT),this.X9t=void 0,this.u8t=void 0}};function W4(t){return null===t?void 0:t}var H4=class{get A2t(){return this.t9t.A2t}get w2t(){return this.d8t}get E2t(){return this.t9t.E2t}get Iit(){var t;return null!=(t=this.t9t.Iit)?t:null}get Sit(){const t=this.t9t.f8t;return t?[t]:[]}get Dit(){return this.t9t.Dit}get Eit(){return this.t9t.Eit}Yit(t){this.t9t.Yit(t)}Ny(){this.t9t.Ny()}gn(){return Promise.resolve()}constructor(t,i){this.t9t=t,this.d8t=i}},X4=class{get _8t(){return this.g8t}get A2t(){return this.P4t}get E2t(){return this.w8t}get f8t(){return this.v$t}get Iit(){return this.I$t}get Dit(){return Pe(this.D$t,(t=>{if(t.pg)return[];const i=t.Oc;if(t===this.I$t&&void 0!==this.v$t){const t=i.indexOf(this.v$t);if(t>=0)return i.slice(t+1)}return i}))}get Eit(){return this.D$t.filter((t=>!t.pg))}constructor(t,i){this.P4t=t,this.D$t=[],this.w8t=!1,this.g8t=new H4(this,i)}},Z4=class extends Fo{fa(){return new q4(this.Rit.Nit())}constructor(t){super("v8t",t)}},q4=class extends Oo{constructor(t){super("adimpression",t)}},K4=class extends os{fa(){return new J4(this.Rit.Nit())}constructor(t){super("m8t"),this.Rit=t}},J4=class extends Os{constructor(t){super("adbuffering"),this.ad=t}},$4=class extends os{fa(){return new t3}constructor(){super("p8t")}},t3=class extends Os{constructor(){super("admetadata")}},i3=class t extends X4{A8t(t,i){for(let e=0;e<t;e++){const t=new V4(i);i.U2t(t),this.A2t.Co(new qr(t))}}m4t(t,i,e){let s=t;s===1/0&&(s=-1);const n=new F4(s,e,i);this.D$t.push(n),i._3t(n),this.A2t.Co(new nh(n))}p5t(t,i){for(const e of this.D$t)S(e.cPt)&&e.G9t===t&&(e.cPt=i,this.A2t.Co(new g4(e)))}r5t(t,i){void 0===i&&(i=!1),i&&jn(this.D$t,t),this.A2t.Co(new Lr(t))}s5t(){if(this.Iit){this.r5t(this.Iit,!0);const t=Boolean(this.v$t&&this.v$t.Z2t===Hr.xqt);this.y8t(void 0,t)}}_4t(t,i){const e=i.p9t;if(!e)return;const s=e.M5t-1,n=t.Oc[s];return n.$9t(i),this.A2t.Co(new M2(n)),n.Xl.$Jt=e.$Jt,n}get E2t(){return this.M8t.E2t}b8t(t){if(!Ai(this.T8t,t)){if(t){if(this.v$t===t)return;this.v$t=t;for(const i of this.S8t)this.$6t(i,t,this.M8t.U_)}else{if(!this.v$t)return;const t=new Qc(this.v$t,this.v$t.Xl.cPt);this.T8t.push(this.v$t),this.v$t=void 0,this.P4t.Co(t)}To(this.S8t)}}y8t(t,i){if(t){var e;if((null==(e=this.Iit)?void 0:e.cPt)===t.cPt)return;this.I$t=t,i&&this.A2t.Co(new PP(this.I$t))}else{if(!this.I$t)return;const t=new dc(this.I$t);this.I$t=void 0,To(this.T8t),i&&this.P4t.Co(t)}}N8t(t){return this.D$t.filter((i=>Jn(i.cPt,t,.01)))[0]}static I8t(t,i){if(i.p9t)return t.Oc[i.p9t.M5t-1]}Md(t){if(!t.p9t)return;const i=t.p9t,e=this.N8t(i.cPt);e&&(To(this.S8t),this.y8t(e,t.l9t))}Pd(){this.Iit&&this.A2t.Co(new dc(this.Iit)),To(this.S8t),this.s5t()}z9t(i){if(!this.I$t&&i.p9t){const t=this.N8t(i.p9t.cPt);this.y8t(t,i.l9t)}if(this.I$t){const e=t.I8t(this.I$t,i);if(!e)return;this._4t(this.I$t,i);const s=i.s8t;Ks(s)&&!Ks(e.s8t)&&(e.s8t=s,this.A2t.Co(new M2(e))),this.b8t(e),this.A2t.Co(new Mh(this.v$t,e.Xl.cPt))}else 0}M9t(t,i){if(this.b8t(void 0),!i&&this.Iit){const t=this.Iit;this.y8t(void 0,!1),this.r5t(t)}}u9t(t){const i=t.p9t;if(!i)return;const e=this.N8t(i.cPt);if(!e)return;this.p4t(i.cPt,i.b5t,i.$Jt);const s=this._4t(e,t);s&&this.A2t.Co(new T2(s))}p4t(t,i,e){const s=this.N8t(t);if(!s)return;const n=s.Oc.length;if(i>n){const t=i-n;this.A8t(t,s),s.$Jt=e,this.A2t.Co(new g4(s))}}W6t(i,e,s){if(!this.I$t)return;const n=t.I8t(this.I$t,i);if(n){const t=e/s;this.A2t.Co(new f4(n,t))}}f9t(i,e,s){if(!this.I$t)return;let n=this.v$t;if(!n){const s=t.I8t(this.I$t,i);if(!s||Ai(this.T8t,s))return void this.S8t.push(e);n=s,this._4t(this.I$t,i),this.b8t(n)}this.$6t(e,n,s)}$6t(t,i,e){t===jl.Q5t?this.A2t.Co(new $4):t===jl.x5t&&i?this.A2t.Co(new Z4(i)):t===jl.O5t&&i?this.A2t.Co(new K4(i)):t===jl.j5t&&i&&e?this.A2t.Co(new p4(i,e)):t===jl.HZt&&i&&e?this.A2t.Co(new y4(i,e)):t===jl.R5t&&i&&e&&this.A2t.Co(new b4(i,e))}Ny(){this.M8t.Ny()}Yit(t){this.M8t.Yit(t)}tr(){const t=Boolean(this.v$t&&this.v$t.Z2t===Hr.xqt);this.b8t(void 0),this.y8t(void 0,t);for(const t of this.D$t)this.r5t(t);To(this.D$t),To(this.S8t),To(this.T8t)}gn(){this.tr()}constructor(t,i){super(t,F.M$t),this.M8t=i,this.S8t=[],this.T8t=[]}};function e3(t){const i=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const i=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case P.ENABLED:return i.ENABLED;case P.INSECURE:return i.INSECURE;case P.DISABLED:default:return i.DISABLED}}(t.ads.vpaidMode)),i.setPlayerVersion("8.3.0"),i.setPlayerType("THEOplayer"),i.setAutoPlayAdBreaks(!0),i.setDisableCustomPlaybackForIOS10Plus(!s3(t));const e=function(t){var i,e,s;const n=null==(e=t.ads)||null==(i=e.googleIma)?void 0:i.language;if(void 0!==n)return n;const r=null==(s=t.ui)?void 0:s.language;if(Sn(r))return r;return}(t);e&&i.setLocale(e)}function s3(t){return Po.Ga&&t.allowNativeFullscreen}var n3=class t extends ll{get m2t(){return this.J3t._8t}get D8t(){return this.J3t}get A9t(){return this.j3t}get k9t(){return s3(this.oZ)}E8t(t,i,e){i===lc.Cit&&void 0!==e&&(this.x2t=e),this.j3t.Z3t(t,i)}static get w2t(){return F.M$t}get w2t(){return t.w2t}get k8t(){return this.oZ.ads.preload===en.MIDROLL_AND_POSTROLL}Yit(t){const i=this.L8t();for(const e of i)Yc(e.sources,e.timeOffset)||t.W4(e,lc.kit,!1)}L8t(){const t=[],{Sit:i,Dit:e}=this.m2t,s=[];for(const n of i.concat(e)){const i=n.Xl.V9t;if(Ai(s,i.Xw))continue;const e=i.L3t(n.q9t);e>=0?t.push(...i.H4t.slice(e)):t.push(...i.H4t),s.push(i.Xw)}for(const i of this.j3t.Dit)i.h3t||t.push(...i.H4t);return Dd(t)}set Z2t(t){this.q2t=t}get Z2t(){return this.q2t}get i$t(){return this.e$t}set i$t(t){this.e$t=t,this.x8t=!1}Q_(){if(!this.i$t)return 0;const t=this.i$t.C9t();return S(this.ct)||t<0?0:this.ct-t}F_(t,i){}Td(){return this.jx||NaN}P1(t){this.jx=t}hg(){return this.Qo.og}ag(t){this.D9t(this.zg,t,!0)}_g(){return this.cU}q6t(t){this.cU=t}get B9t(){return this.C8t}set B9t(t){this.C8t=t}get Xit(){return this.x2t}get N9t(){return this.O8t}get U9t(){return this.j8t}set U9t(t){this.j8t=t}get I9t(){return this.R8t}set I9t(t){this.R8t=t}Og(){var t,i,e;return null!=(e=null==(i=this.i$t)||null==(t=i.w9t())?void 0:t.i8t)?e:0}Pg(){var t,i,e;return null!=(e=null==(i=this.i$t)||null==(t=i.w9t())?void 0:t.t8t)?e:0}C_(){return[]}L2t(t){this.P3t=t,this.j3t.L2t(t)}d5t(){!this.x8t&&this.i$t&&(this.i$t.Cn(),this.x8t=!0)}b9t(t){this.Z2t=t?t.l9t?"linear":"nonlinear":"none"}Dg(){return Ri.oU().ks()}Bg(){return this.Qo.zg}Ug(t){this.D9t(t,this.og,!0)}d9t(){return this.Qo.og?0:this.Qo.zg}D9t(t,i,e){const s=this.Qo.zg!==t||this.Qo.og!==i;s&&(this.Qo.zg=t,this.Qo.og=i),this.i$t&&e&&this.i$t.Ug(this.d9t()),s&&this.Co(new St(this.U_,this.zg))}V_(){return!1}W_(){if(this.P8t&&this.x2t)return this.P8t}X_(){if(this.z8t&&this.x2t)return this.z8t}Ng(){return this.h2}a2(t){this.h2=t,this.Co(new Dr(this.U_,t))}get Q9t(){return this.B8t}set Q9t(t){this.B8t=t}Wg(){this.Qo.fn(Tf.jh,this.U8t),this.bo||(this.bo=!0,this.j3t.Wg(),this.P9t())}async Xg(){if(this.Q8t)return;this.F8t.g_(),this.F8t=new Bd;const t=this.fg;this.q6t(!1),this.Co(new Rt(this.U_)),this.Y8t()||(this.k9t||this.Qo.be(),this.Co(new Ib(this.U_))),this.B9t||(this.U9t=!1);const i=Boolean(this.i$t);this.Q8t=this.j3t.X3t();try{await this.Q8t}finally{this.Q8t=void 0}try{Vr(this.F8t.f_)}catch(t){return}if(this.bo||this.U8t(),!this.P8t||!this.x2t)if(this.i$t){if(t)if(i)try{Vr(this.F8t.f_),this.i$t.G8t(),this.Co(new $e(this.U_))}catch(t){return}else this.d5t()}else this.x2t||(this.Q1t(),this.k2t.Xg())}Hg(){var t;this.fg||(this.q6t(!0),this.Co(new Ye(this.U_))),this.F8t.g_(),this.B9t?null==(t=this.i$t)||t.Hg():this.U9t=!0}Ny(){var t;null==(t=this.i$t)||t.Ny()}T9t(){this.i$t&&(this.W8t.V8t(),this.i$t.Zg(),this.i$t.h_(),this.i$t=void 0,this.Z2t="none",this.x8t=!1)}async Zg(){var t;this.O9t=0,this.j3t.tr(),this.F8t.g_(),this.q6t(!0),this.O8t=!1,this.R8t=!1,this.B9t=!1,this.J3t.tr(),this.T9t(),this.m9t(),null==(t=this.H8t)||t.tr(),this.U9t=!1,this.W8t.h_()}ge(){this.X8t.ge(),this.k9t&&this.Qo.ge()}be(){this.X8t.be()}Z8t(){return Boolean(this.i$t)&&Ai(this.i$t.q8t(),-1)&&!this.O8t}u3t(){this.j3t.u3t()}v5t(){return this.j3t.v5t}C3t(){this.j3t.C3t()}m5t(){return this.j3t.m5t()}b2t(t){if(this.Z8t()){if(t.type===Tf.Sh&&this.Qo.G_)return!0;if(t.type===Tf.Ov)return this.O8t=!0,this.W8t.V8t(),!0}return!1}Y8t(){return Boolean(this.i$t&&this.i$t.w9t())}async l5t(t){try{this.T9t();const i=this.K8t();this.X8t.oX(),this.i$t=await this.W8t.l5t(t,this.H8t,i),this.J8t(this.i$t)}catch(t){this.$8t.o9t(t)}}J8t(t){if(t.Ug(this.d9t()),this.j3t.K3t===I4.V3t){const i=t.q8t();if(i.length)for(const t of i)this.J3t.m4t(t,this.j3t.O3t);else this.J3t.m4t(this.j3t.O3t.Kl,this.j3t.O3t)}this.$8t.tr(),this.$8t.B6t(t)}Vg(){if(this.e$t&&this.k9t&&this.Y8t())return this.Qo.Vg()}Gg(){return this.k9t&&this.E2t?this.Qo.ya:super.Gg()}K8t(){const t=!!(this.j3t.K3t===I4.V3t)&&this.k8t;let i,e;void 0!==this.oZ.ads.googleIma.uiElements?i=this.oZ.ads.googleIma.uiElements:this.oZ.ads.showCountdown||(i=[]),void 0!==this.oZ.ads.allowedMimeTypes&&(e=this.oZ.ads.allowedMimeTypes);return{t7t:e,i7t:i,e7t:t,e8t:this.oZ.ads.googleIma.bitrate,s7t:void 0,n7t:this.P3t}}P9t(){if(this.e$t){const t=this.K8t();this.e$t.r7t(t)}}M4t(t){this.P8t=new Nt(to.ADVERTISEMENT_ERROR,t.pL),this.z8t=new ao(qa.AD_ERROR,"There was a problem playing ads.",this.P8t),this.A2t.Co(ga.T2t(t))}m9t(){this.E2t&&(this.Qo.ge(),this.Q1t(),this.be())}Y9t(){var t;if(this.Qo.Q_()===1/0||0===this.Qo.Dg().length)return;(null==(t=this.j3t.O3t)?void 0:t.q4t)&&-1!==this.o7t&&(this.Qo.F_(this.Qo.Q_()+this.o7t),this.o7t=-1)}F9t(t){var i,e;this.o7t=null!=(e=null==(i=t.p9t)?void 0:i.$Jt)?e:-1}Q1t(){super.Q1t(),this.Qo.ge(),this.k9t&&!this.Qo.G_&&this.Qo.Xg()}G4t(){this.k9t||super.G4t()}async gn(){this.$8t.fn(hi.ha,this.h7t),await super.gn(),this.T9t(),this.W8t.fn("a7t",this.u7t),this.W8t.h_(),this.X8t.h_(),this.j3t.gn(),this.$8t.gn()}constructor(t,i,e,s,n,r,o){super(t,i),this.bo=!1,this.x2t=!1,this.P8t=void 0,this.z8t=void 0,this.o7t=-1,this.q2t="none",this.B8t=!1,this.x8t=!1,this.F8t=new Bd,this.C8t=!1,this.j8t=!1,this.u7t=t=>{this.A2t.Co(t)},this.h7t=t=>{this.P8t=new Nt(to.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.z8t=ar(this.P8t)},this.O9t=NaN,this.U8t=()=>{this.bo||this.Wg()},this.oZ=e,this.cU=!0,this.jx=NaN,this.h2=qo.BT,this.O8t=!1,this.R8t=!1,this.J3t=new i3(this.A2t,this),this.$8t=new Q4(this,this.Qo,this.J3t),this.$8t.yn(hi.ha,this.h7t),this.Qo.yn(Tf.jh,this.U8t),this.j3t=new j4(this,this.Qo,this.k2t,s,this.J3t),this.H8t=o,this.W8t=r,this.X8t=n,this.be(),this.W8t.yn("a7t",this.u7t)}},r3=class{registerWebImaAdPlayerConstructor(t){this.c7t=t}createAdPlayer(t,i,e){return o3()&&this.c7t?this.c7t(t,i,e):void 0}};function o3(){if(Boolean(Ua.google&&Ua.google.ima)){return!(1===w.keys(Ua.google.ima).length&&Ua.google.ima.dai)}return!1}r3.lL=new r3;var h3=class{get d2t(){return n3.w2t}YU(t){return t&&t.integration===Au.GOOGLE_IMA}f2t(t,i,e){return r3.lL.createAdPlayer(t,i,e)}W4(t,i,e,s){e.E8t(t,i,s)}hY(t){const i=P1(t.sources);if(!i)return;const e={integration:Au.GOOGLE_IMA,sources:i,omidAccessModeRules:U4(t.omidAccessModeRules)},s=B1(t.timeOffset);return void 0!==s&&(e.timeOffset=s),e}};nu.lL.GU(new h3);var a3=class extends os{fa(){return new u3}constructor(){super("N$t")}},u3=class extends Os{constructor(){super("adloaded")}},c3=-1,l3=class{get s$t(){return this.D$t}get l7t(){return this.d7t}get aut(){return this.yet}get f7t(){return this.n3t}get _7t(){return this.g7t}get Kl(){if(S(this.w7t)){const t=Ph.dKt(this.n3t,this.h$t.t.Td());void 0===t||S(t)||(this.w7t=t)}return this.w7t}v7t(){return this.yet<this.D$t.length}Mc(){let t;return this.yet<this.D$t.length&&(t=this.D$t[this.yet],this.yet++),t}m7t(t){t.Fqt=this,this.D$t.push(t)}async p7t(t){let i=!1;for(const e of this.D$t)try{await e.$n(),i=!0}catch(i){0,jn(this.D$t,e);const s=e.Wit.sources,n="string"==typeof s?s:s.src;t.Co(ga.S2t(i,n))}return this.g7t=!0,i}l$t(){this.c$t=!0}u$t(){return this.c$t}A7t(){return this.D$t.some((t=>l2(t).some((t=>t.uXt))))}constructor(t,i){this.D$t=[],this.c$t=!1,this.n3t=t,this.yet=0,this.h$t=i,this.w7t=NaN,this.g7t=!1,this.d7t=new g2(this,this.h$t)}},d3=class t extends B{get y7t(){let t=0;for(const i of this.M7t)i.u$t()||(t+=1);return t}b7t(){this.S7t.T7t()}Cn(){this.Po(),this.N7t.yn("Qit",this.S7t.I7t)}jn(){this.$o(),this.N7t.fn("Qit",this.S7t.I7t),this.M1=this.xS,this.S7t.tr();for(const t of this.M7t)t.l$t();To(this.M7t)}Po(){this.D7t||(this.Qo.yn(Tf.fm,this.E7t),this.D7t=!0)}$o(){this.D7t&&(this.Qo.fn(Tf.fm,this.E7t),this.D7t=!1)}get Dit(){return this.M7t}k7t(){return this.L7t(new ri(c3,void 0))}x7t(t){return this.C7t(t,0,0).length>0}O7t(t,i){let e,s=0;for(const n of this.M7t){if(n.u$t())continue;const r=n.Kl;r>=t&&r<=i&&r>=s&&!S(r)&&(e=n,s=e.Kl)}return e}j7t(t){return this.L7t(new ri(t,void 0))}R7t(){if(!this.P7t&&void 0!==this.P3t){this.P7t=!this.M7t.some((t=>S(t.Kl)));for(const t of this.M7t)t.Kl!==c3&&t.Kl<=this.P3t&&!t.u$t()&&t.l$t()}}z7t(t){for(const i of t)i.l$t();this.x4t.B7t(t),0===this.y7t&&this.$o()}C7t(t,i,e){return this.M7t.filter((s=>{if(s.u$t())return!1;const n=s.Kl;return this.U7t(n,t)||this.Q7t(n,t,i,e)}))}U7t(t,i){switch(i){case 0:return 0===t;case c3:return t===c3;default:return!1}}Q7t(t,i,e,s){if(t<0)return!1;const n=t-i;return-1!==n&&n<=e&&n>=-s}F7t(i){if(i&&i.length>0){for(const e of i){const i=t.x3t(e.cPt);let s=this.wwt(e);-1===s&&(this.P7t=void 0===this.P3t,this.M7t.push(new l3(i,this.Y7t)),s=this.M7t.length-1);this.M7t[s].m7t(e)}this.Po()}}static x3t(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}wwt(i){const e=t.x3t(i.cPt);return gt(this.M7t,(i=>e===t.x3t(i.f7t)))}G7t(t){jn(this.M7t,t)}L2t(t){this.P3t=t,this.P7t=void 0===t}constructor(t,i,e,s){super(),this.P7t=!1,this.E7t=t=>$r(this.L7t(t)),this.L7t=async t=>{this.R7t();const i=t.currentTime,e=t.currentTime!==c3?this.O7t(this.M1,t.currentTime):this.C7t(t.currentTime,0,0)[0];let s,n;const r=this.Qo.Td()-10;if(n=this.x7t(c3)&&_.ceil(i)===_.ceil(r)?this.C7t(c3,10,0).filter((t=>!t._7t)):this.C7t(i,10,0).filter((t=>!t._7t)),n.length){const t=(await Promise.all(n.map((t=>t.p7t(this.N7t))))).some((t=>!0===t));t&&this.Co(new a3),(!t||!this.S7t.V7t||n[0].Kl<this.S7t.V7t.Kl)&&(s=n[0])}e&&(e!==this.S7t.V7t&&(s=e),this.z7t([e])),s&&(this.S7t.I7t(),this.S7t.V7t=s,await this.S7t.T7t()),S(this.Qo.Td())||(this.M1=t.currentTime)},this.Qo=t,this.x4t=i,this.Y7t=new _2(this.x4t,this.Qo),this.P3t=void 0,this.P7t=!1,t.Td()!==1/0?this.xS=0:this.xS=t.Q_(),this.M1=this.xS,this.M7t=[],this.N7t=e,this.S7t=s,this.D7t=!1}},f3=class extends B{get W7t(){return this.j0t}get A2t(){return this.P4t}H7t(){this.X7t(),this.Z7t(),this.vz=void 0}q7t(t){this.K7t=this.K7t.concat(t)}J7t(t){this.$7t=this.$7t.concat(t)}Z7t(){this.K7t=[]}X7t(){this.$7t=[]}tti(t){for(const i of this.K7t)i.eF===t&&Do(i.eventURL)}ge(){this.W7t.style.display=""}be(){this.W7t.style.display="none"}gn(){this.Vo(),this.P4t.Vo(),wi(this.j0t)}constructor(t,i){super(),this.$7t=[],this.K7t=[],this.vz=void 0,this.P4t=new B,this.iti=t=>{t.stopPropagation(),this.eti()},this.eti=()=>{for(const t of this.$7t)for(const i of t.hZt)Do(i.uri)},this.j0t=h.createElement("div"),this.j0t.style.display="none",this.sti=t,this.nti=i}};function _3(t,i){let e=i;if(!function(t){return"ui"in t}(t))return e;const s=t.ui.language;let n;if(Sn(s)){const i=t.ui.languages;if(!i)return e;n=i[s]}else n=s;return n&&n[i]&&(e=n[i]),e}var g3={[Pl.yp]:1,[Pl.Mp]:2,[Pl.bp]:2};function w3(t,i){const e=i?i.map((t=>t.toLowerCase())):i;return td(t.filter((t=>{const i=t.type.toLowerCase();return!!tr(e)&&-1!==e.indexOf(i)&&p1(i)})),((t,i)=>g3[t.type]-g3[i.type])).map(v3)}function v3(t){return Mw({src:t.contentURL,type:t.type,isAdvertisement:!0})}function m3(t,i){return wF(p3(t),p3(i))}function p3(t){return{Ti:t.height,ji:t.width}}function A3(t,i,e,s){const n=function(t,i,e,s){let n,r=1/0;const o=t.filter((t=>!p1(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(o.length){for(const t of o){const s=(_.abs(t.width/i-1)+_.abs(t.height/e-1))/2;s<r&&(r=s,n=t)}return v3(n||o.sort(m3)[0])}}(t,i.width,i.height,e),r=w3(t,e);return n&&r.push(n),dl({sources:r},s)}var ic,y3=class extends f3{get rti(){return this.oti}get U_(){return this.hti.U_}get ct(){let t=this.hti.ct;return S(t)&&this.SZt&&(t=this.SZt.ct||0),t}get G_(){return this.hti.G_}get og(){return this.hti.og}set og(t){this.hti.og=t,t?this.tti(Hh.RZt):this.tti(Hh.PZt)}get fg(){return this.hti.fg}get Sg(){return this.hti.Sg}get zg(){return this.hti.zg}set zg(t){this.hti.zg=t}get Cg(){return this.hti.Cg}get Rg(){return this.hti.Rg}get ati(){return this.uti}Xg(){this.hti.fg&&(this.hti.Xg(),this.Co(new Rt(this.U_)),this.oti&&this.tti(Hh.zZt),this.oti=!0)}Hg(){this.hti.fg||(this.hti.Hg(),this.Co(new Ye(this.U_)),this.tti(Hh.Sh))}async Zg(){var t;null==(t=this.$O)||t.g_(),this.$O=void 0,this.be(),this.oti=!1,this.cti=!0,this.lti(),this.dti(),await this.fti()}_ti(t){void 0===t&&(t=!0),this.oti=!1,t&&this.tti(Hh.XZt),this.be(),this.nti()}gti(){var t;const i=null==(t=this.x4t.ba)?void 0:t.mi,e=new C2(this.Wu,i);return this.W7t.appendChild(e.we),e.yn("Ny",this.wti),e}vti(){this.SZt&&this.SZt.AZt.sZt&&(this.P0t=new Ho(this.W7t),this.P0t.V$t=this.SZt.AZt.sZt,this.P0t.yn("clickstart",this.mti),this.P0t.yn("click",this.eti))}pti(t,i){for(const e of this.K7t)if(e.eF===Hh.Zv){const s=c1(e.Ku,i);void 0!==s&&this.M1<s&&s<=t&&Do(e.eventURL)}}async Ati(){if(!this.SZt||!this.yti)return;const t=A3(this.SZt.kZt,this.yti,this.GO.ads.allowedMimeTypes,this.GO);if(!t.sources.length)return await this.hti.tr(),this.sti(""),void this.SZt.LXt();this.$O=new Bd,this.cti=!0,await this.hti.ga(t,this.$O.f_),this.hti.ge(),this.SZt.LXt(),this.vti()}async Mti(t,i,e){this.uti=t,this.SZt=t.uXt,this.hti.yn(Tf.fm,this.bti),this.hti.yn(Tf.Lv,this.Tti),this.hti.yn(Tf._m,this.Sti),this.hti.yn(Hs,this.Ds),this.SZt.wXt&&0!==this.SZt.wXt.length&&this.q7t(this.SZt.wXt),this.SZt.AZt&&this.J7t(this.SZt.AZt),this.vz=i,this.yti=e,0!==this.SZt.kZt.length&&(this.hti.yn(hi.ha,this.Nti),await this.Ati(),this.hti.yn(Tf.Ov,this.Iti),this.hti.yn(Tf.fm,this.Dti),this.hti.yn($.Sm,this.Eti),this.hti.yn(Tf.Jv,this.Ds))}$Kt(){this.rti&&this.kti&&this.wti()}get kti(){return this.SZt&&-1!==this.SZt.CZt&&this.hti.U_>=this.SZt.CZt}Lti(){this.tti(Hh.Ebt),this.uti&&this.A2t.Co(new Mh(this.uti,this.U_))}async fti(){this.hti.fn(hi.ha,this.Nti),this.hti.fn(Tf.Ov,this.Iti),this.hti.fn(Tf.fm,this.Dti),this.hti.fn($.Sm,this.Ds),this.hti.fn($.Sm,this.Eti),this.hti.fn(Tf.Jv,this.Ds),this.hti.fn(Tf.fm,this.bti),this.hti.fn(Tf.Lv,this.Tti),this.hti.fn(Tf._m,this.Sti),this.hti.fn(Hs,this.Ds),this.uti&&(this.uti.l$t(),this.A2t.Co(new Qc(this.uti,this.U_))),this.xti(),this.H7t(),this.lti(),this.dti(),this.uti=void 0,this.SZt=void 0,this.yti=void 0,await this.hti.tr(),this.hti.be(),this.W7t.style.cursor="",this.Cti=0,this.M1=-1,this.Oti&&(this.jti.fti(),this.Oti=!1)}xti(){this.P0t&&(this.P0t.h_(),this.P0t=void 0)}dti(){this.Rti&&(wi(this.Rti),this.Rti=void 0)}lti(){this.U0t&&(this.U0t.gn(),this.U0t=void 0)}Pti(){this.Oti=!0}zti(){var t;this.Rti||(this.Rti=h.createElement("div"),this.Rti.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.W7t.appendChild(this.Rti));const i=null==(t=this.uti)?void 0:t.Xl;if(!i)return;const e=i.Oc.filter(A2);let s=_3(this.GO,"The content will play in")+" "+_.round(i.t$t)+" "+_3(this.GO,"seconds");if(e.length>1){const t=e.filter((t=>t.u$t())).length;s+=". "+_3(this.GO,"Ad")+" "+(t+1)+"/"+e.length}gR(this.Rti,s)}constructor(t,i,e,s,n,r,o){super(t,i),this.jti=e,this.GO=s,this.x4t=n,this.Wu=r,this.hti=o,this.oti=!1,this.Cti=0,this.M1=-1,this.$O=new Bd,this.cti=!0,this.Iti=()=>{this._ti()},this.Eti=()=>{this.$O=void 0,this.oti||(this.Lti(),this.oti=!0),this.cti&&(this.cti=!1,this.x4t.b7t()),this.W7t.style.display="block",this.hti.fn($.Sm,this.Eti),this.oti=!0},this.Dti=()=>{const t=this.U_,i=this.ct,e=t/i;(0===this.Cti&&e>=.25?(this.tti(Hh.VZt),this.Cti=1):1===this.Cti&&e>=.5?(this.tti(Hh.HZt),this.Cti=2):2===this.Cti&&e>=.75&&(this.tti(Hh.WZt),this.Cti=3),this.pti(t,i),this.zti(),this.M1=t,this.SZt)&&(-1!==this.SZt.CZt&&this.SZt.CZt<this.SZt.ct&&(null!=this.U0t||(this.U0t=this.gti()),this.U_<this.SZt.CZt?this.U0t.s0t(this.SZt.CZt-this.U_):this.U0t.r0t()))},this.Nti=()=>{var t,i;this.$O=void 0,this.hti.fn(hi.ha,this.Nti),this.cti=!0,null==(t=this.vz)||t.Mqt(w1.vqt),this.oti=!1,this.hti.be();const e=(null==(i=this.hti.bt)?void 0:i.src)||"";this.sti(e)},this.bti=()=>{this.Ds(new ri(this.U_,void 0))},this.Tti=()=>{this.Ds(new Te(this.ct))},this.Sti=()=>{this.Ds(new St(this.U_,this.zg))},this.mti=()=>{this.x4t.Hg()},this.wti=()=>{this.uti&&(this.tti(Hh.UZt),this.A2t.Co(new f4(this.uti,this.U_/this.ct)),this._ti(!1))},this.W7t.className="theoplayer-ad-linear",this.W7t.style.zIndex="10",_b(this.W7t),this.hti.be(),this.Oti=!1}},M3=class t extends Mo{get we(){return this.Us}o0t(){this.we.addEventListener("mouseup",this.h0t),this.we.addEventListener("touchend",this.h0t),this.we.addEventListener("mousedown",this.Bti)}n0t(){this.we.removeEventListener("mouseup",this.h0t),this.we.removeEventListener("touchend",this.h0t),this.we.removeEventListener("mousedown",this.Bti)}static cr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}gn(){this.n0t(),wi(this.Us)}constructor(){super(),this.h0t=t=>{this.Co(new Os("Ny")),this.Bti(t)},this.Bti=t=>{t.stopPropagation()},this.Us=t.cr(),this.o0t()}},b3=class extends f3{get Uti(){return this.Qti}get Fti(){return this.hu}H7t(){super.H7t(),this.W7t&&cl(this.W7t)}async Mti(t,i,e){this.m$t&&this.fti(),this.Qti=t,this.m$t=t.cXt,0!==this.m$t.wXt.length&&this.q7t(this.m$t.wXt),this.vz=i,0!==this.m$t._Xt.length&&(this.J7t(this.m$t._Xt[0].TXt),this.W7t.addEventListener("error",this.Yti),this.W7t.addEventListener("load",this.Gti),await this.Ati(),this.Vti())}$Kt(){var t;if(void 0!==this.Wti)return;const i=null==(t=this.m$t)?void 0:t._Xt[0];i&&i.Xl&&-1!==i.Xl.CZt&&(this.tti(Hh.UZt),this.A2t.Co(new f4(this.Qti,0)),this.Hti())}Lti(){void 0!==this.Qti&&this.A2t.Co(new Mh(this.Qti,this.x4t.U_))}Zg(){this.fti(),this.Qti=void 0,this.m$t=void 0}fti(){this.Xti(),void 0!==this.Qti&&(this.Qti.l$t(),this.A2t.Co(new Qc(this.Qti,this.x4t.U_))),this.H7t(),this.Zti(),void 0!==this.Wti&&(c(this.Wti),this.Wti=void 0)}Xti(){this.W7t.removeEventListener("load",this.Gti),this.W7t.removeEventListener("error",this.Yti)}async Ati(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const i=this.m$t._Xt[0],e=h.createElement("a");if(i.TXt.sZt&&(e.href=i.TXt.sZt,e.target="Du",e.setAttribute("rel","noopener")),i.AXt){const t=i.AXt,s=h.createElement("iframe");s.src=t.lqt,e.appendChild(s)}else if(i.mXt){const t=i.mXt,s=h.createElement("img");s.src=t.lqt,e.appendChild(s)}else if(i.MXt){const t=i.MXt,s=h.createElement("iframe");s.src=t.lqt,e.appendChild(s)}i.LXt(),e.addEventListener("mousedown",this.iti),e.addEventListener("touchend",this.iti),this.W7t.firstChild&&(cl(this.W7t),this.fti()),t.appendChild(e),this.W7t.appendChild(t),this.ge()}Vti(){var t;if(!this.m$t)return;const i=null==(t=this.m$t._Xt[0].Xl)?void 0:t.CZt;void 0!==i&&-1!==i&&(this.Wti=Ua.setTimeout(this.qti,1e3*i))}Zti(){this.hu&&(this.hu.fn("Ny",this.Kti),this.hu.gn()),this.hu=void 0}get Jti(){return this.x4t.$ti()}constructor(t,i,e){super(t,i),this.Gti=()=>{this.Xti(),this.tti(Hh.$Zt),this.nti()},this.Yti=t=>{var i,e;this.Xti(),null==(i=this.vz)||i.Mqt(w1.pqt);const s=null==(e=this.m$t)?void 0:e._Xt[0];var n,r;const o=null!=(r=null!=(n=null==s?void 0:s.AXt)?n:null==s?void 0:s.mXt)?r:null==s?void 0:s.MXt;var h;this.sti(null!=(h=null==o?void 0:o.lqt)?h:"")},this.Hti=()=>{this.be(),cl(this.W7t),this.nti(),this.Qti=void 0,this.m$t=void 0},this.qti=()=>{this.hu||(this.Wti=void 0,this.hu=new M3,this.W7t.children[0].appendChild(this.hu.we),this.hu.yn("Ny",this.Kti))},this.Kti=()=>{this.tti(Hh.UZt),this.$Kt()},this.W7t.className="theoplayer-ad-nonlinear",this.W7t.style.position="absolute",this.W7t.style.width="100%",this.W7t.style.bottom="3em",this.W7t.style.zIndex="10",this.W7t.style.textAlign="center",this.x4t=e}},T3=class{static async tii(t,i,e){let s=[],n=t.shift();for(;n;){try{const t=await(new S1).Rqt(n,i);s=s.concat(t)}catch(t){0;const i=ga.S2t(t,n.sources.src);e.Co(i)}n=t.shift()}return s}},ki=class extends os{fa(){return new S3}constructor(){super("xht")}},S3=class extends Os{constructor(){super("statechange")}};!function(t){t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted"}(ic||(ic={}));var N3=class{get Gu(){return this.Xu}get U(){return this.Xu.length}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}zw(t){return this.Xu[t]}nS(t){this.Xu.push(t),this.Xa&&this.Xa.push(t.va),this.eii(t)}sii(t){for(const i of t)this.nS(i)}nii(t,i){i>=0&&i<=this.Xu.length&&(this.Xu.splice(i,0,t),this.Xa&&this.Xa.splice(i,0,t.va),this.eii(t))}oS(t){return Ai(this.Xu,t)}rS(t){this.rii(this.Xu.indexOf(t))}rii(t){if(!(t>=0&&t<this.Xu.length))return;const i=this.Xu[t];Ns(this.Xu,t),this.Xa&&Ns(this.Xa,t),this.oii(i)}kL(){const t=this.Xu.slice();To(this.Xu),this.Xa&&To(this.Xa);for(const i of t)this.oii(i)}constructor(){this.Xu=[],this.Xa=void 0}},I3=class extends N3{fa(){return function(t){const i=function(t){const i=t.Gu.map((t=>t.va));return i.item=i=>{const e=0|i,s=t.zw(e);return s&&s.va||void 0},i}(t),e=new jt(t,i);return i.addEventListener=(t,i)=>{e.yn(t,i)},i.removeEventListener=(t,i)=>{e.fn(t,i)},i}(this)}yn(t,i){this.hii.yn(t,i)}T_(t){this.hii.T_(t)}Vo(){this.hii.Vo()}Co(t){this.hii.Co(t)}fn(t,i){this.hii.fn(t,i)}D_(t){this.hii.D_(t)}E_(t){this.hii.E_(t)}k_(t,i){return this.hii.k_(t,i)}constructor(...t){super(...t),this.hii=new B,this.Ds=t=>{this.Co(t)}}};var D3,E3=class extends Os{constructor(t){super("addtask"),this.task=t}},k3=class extends os{fa(){return new E3(this.aii.va)}constructor(t){super("uii"),this.aii=t}},L3=class extends Os{constructor(t){super("removetask"),this.task=t}},x3=class extends os{fa(){return new L3(this.task.va)}constructor(t){super("cii"),this.task=t}},C3=class extends I3{eii(t){this.Co(new k3(t))}oii(t){this.Co(new x3(t))}constructor(){super()}};!function(t){t.UNINITIALISED="uninitialised",t.INITIALISED="initialised"}(D3||(D3={}));var O3=class extends Mo{async Wg(){await this.lii(),this.Xht("initialised")}async lii(){try{await this.dii()}catch(t){0}}async dii(){const t=await this.Xd.Snt();for(const i of t){const t=this._ii.fii(i.id,i.sourceDescription,i.parameters,this.gii);this.wii(t),this.tj.nS(t),await t.vii}}get fD(){return this.Hht}Xht(t){this.Hht=t,this.Co(new ki)}get mii(){return this.tj}fii(t,i,e){void 0===e&&(e="persistent");const s=this._ii.pii(t,i,e);return this.Aii(s,e),this.tj.nS(s),this.wii(s),s}async Aii(t,i){try{await this.yii(t,i)}catch(t){throw g("Unable to persist task - "+t)}}async yii(t,i){await this.Xd.Mnt({key:t.o,id:t.o,sourceDescription:t.yc,parameters:t.WI},i)}wii(t){t.yn("xht",(()=>{t.fD===ic.EVICTED&&this.tj.rS(t)}))}constructor(t,i,e){super(),this.Hht="uninitialised",this.tj=new C3,this._ii=i,this.gii=e,this.Xd=t,this.Wg()}};var oi=class{get sU(){return this.Mii}get bii(){return this.Tii}get Sii(){return this.Nii.sU}get Iii(){let t=0,i=0;return this.sS.forEach((e=>{t+=e.timeRanges.sU,i+=e.totalQualityDurationToCache})),0===i?0:_.min(1,t/i)}get Nii(){return this.Dii}QS(t){return!!of(this.sS,t.sS)&&(!!dd(this.Tii,t.Tii)&&(!!dd(this.sU,t.sU)&&(!!dd(this.Sii,t.Sii)&&this.Nii.KB(t.Nii))))}constructor(t,i,e){if(this.Tii=t,this.sS=i,this.Mii=e,0===this.sS.size)this.Dii=Ri.oU();else{let t=new Ri([-1/0,1/0]);this.sS.forEach((i=>{t=t.Sn(i.timeRanges)})),this.Dii=t}}};oi.QUALITY_TIME_RANGES_NULL_OBJECT=Pu(),oi.CACHE_PROGRESSION_NULL_OBJECT=new oi(0,oi.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),oi.Eii=oi.CACHE_PROGRESSION_NULL_OBJECT;var j3=class extends Os{constructor(){super("progress")}},R3=class extends os{fa(){return new j3}constructor(){super("s4t")}};var P3,kn=class extends tt{get name(){return"kii"}constructor(t,i){super(t,i)}};async function z3(t,i,e){const s=[];for(const n of t.Xvt)s.push(B3(n,i,e));return{Lii:await Promise.all(s)}}async function B3(t,i,e){const s=[];for(const n of t.kot)U3(n)||s.push(Y3(n,i,e));return{Z:await Promise.all(s),Av:t.Av}}function U3(t){return t.Bot.every(F3)}!function(t){t[t.yp=0]="yp",t[t.Mp=1]="Mp"}(P3||(P3={}));var Q3=1;function F3(t){return t.Kmt!==Q3&&Boolean(t.Kmt)}async function Y3(t,i,e){const s=[];for(const i of t.Bot)F3(i)||s.push(G3(i,e));const n=await Promise.all(s),r=t.$nt[0],o=t.trt,h=o?function(t,i){const e=[],s=function(t){return t?$i(t,"avc")?la.VIDEO_H264:$i(t,"hev")||$i(t,"hvc")||$i(t,"hvt")||$i(t,"lhv")||$i(t,"lhe")||$i(t,"lht")?la.VIDEO_H265:$i(t,"mp4")?la.VIDEO_MP4:$i(t,"mpeg2")?la.VIDEO_MPEG2:$i(t,"mpeg")?la.VIDEO_MPEG:la.VIDEO_UNKNOWN:la.VIDEO_UNKNOWN}(t);for(const t of i){const i=t.irt.split(":").pop(),n=t.Lmt;e.push({mimeType:s,uuid:i,data:n})}const n=P3.yp,r=D_;return{type:n,schemeType:r,schemeDatas:e}}(r,o):void 0,a=lH(t,i,!0);return{qw:n,gs:t.b8,Av:t.Av,Iz:h,Svt:a}}async function G3(t,i){const e=await async function(t,i){const e=[],s=t.Wrt;t.zlt&&e.push({MS:0,ct:0,xii:t.zlt});const n=s.yAt();let r=n;for(;r;){if(t.Ect(r)){const s=await t.Lct(r,i,(new Bd).f_);for(let i=0;i<s.U;i++)e.push(V3(s.Cct(i),t))}else e.push(V3(r,t));r=s.jct(r)}const o=s.SAt(),h=o.bS-n.MS;return{ct:h,jnt:e}}(t,i),s={o:W3(t),kT:e,GP:t.GP,Vet:t.Vet,Ti:t.Ti,Av:t.Av,ji:t.ji};switch(t.Av){case Jt.Ru:break;case Jt.VA:var n,r;s.Adt=null!=(r=null==(n=t.Adt)?void 0:n.JS())?r:NaN;break;case Jt.WA:s.audioSamplingRate=t.Hmt}return s}function V3(t,i){return{MS:t.MS,ct:t.ct,xii:i.zct(t)}}function W3(t){return t.bct.Cn+"-"+(""+t.o)}function H3(t,i){const e=function(t){const i=function(t){const i=Pu();for(const e of t){let t=i.get(e.wjt);t||(t={Av:e.Av,wM:[]},i.set(e.wjt,t)),t.wM.push(e)}return i}(t),e=Gs();return i.forEach((t=>{for(const i of t.wM){let s=e.get(t.Av);s||(s=Pu(),e.set(t.Av,s));let n=s.get(i.l);n||(n=[],s.set(i.l,n)),n.push(i)}})),e}(t);return function(t,i){const e=Gs();return t.forEach(((t,s)=>{const n=Pu();t.forEach(((t,e)=>{const r=[];for(const e of t){const t=X3(e,s,i);r.push(t)}n.set(e,r)})),e.set(s,n)})),e}(e,i)}function X3(t,i,e){const s=t.wjt,n={Mjt:t,Kjt:[]};for(const t of e)lJ(i,s,t)&&n.Kjt.push(t);return n}async function Z3(t,i){const e=await i.Tbt([t],{});return RK(e.cE,{},e.Nbt)}async function q3(t,i){return eK(t)?async function(t,i){const e=H3(t.wM,t._Pt),s=await async function(t,i){const e=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await $3(n,s,i);e.push(r)}return e}(e,i),n=await async function(t,i){const e=[];for(const h of t){var s,n;const t=await s5(h.Jpt,i);var r,o;t.GP=h.GP,t.Vet=h.$nt?J3(h.$nt):"",t.Ti=null!=(r=null==(s=h.akt)?void 0:s.Ti)?r:0,t.ji=null!=(o=null==(n=h.akt)?void 0:n.ji)?o:0,e.push(t)}return{Av:Jt.jT,Z:[{gs:_Y,Av:Jt.jT,qw:e}]}}(t._Pt,i);return s.push(n),{ct:K3(s),Cii:[t.Jpt],omt:[{Lii:s}]}}(t,i):function(t){const i=n5(t);return{ct:i.ct,Cii:[t.Jpt],omt:[{Lii:[{Av:Jt.jT,Z:[{Av:Jt.jT,gs:_Y,qw:[{o:t.Jpt,kT:i,GP:0,Vet:"",Ti:0,Av:Jt.jT,ji:0}]}]}]}]}}(t)}function K3(t){let i=-1/0;for(const e of t)for(const t of e.Z)i=_.max(i,...t.qw.map((t=>t.kT.ct)));return i}function J3(t){return[t.mkt,t.Akt,t.IRt].filter(Ks).join(",")}async function $3(t,i,e){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,i]=t.value,n=await t5(i,e);s.push(n)}return{Av:i5(i),Z:s}}async function t5(t,i){const e=[],s=t[0].Mjt;for(const s of t){const t=await e5(s,i);e.push(t)}return{gs:s.gs||_Y,Av:i5(s.Av),qw:e}}function i5(t){switch(t){case Ee.WA:return Jt.WA;case Ee.VA:return Jt.VA;case Ee.HA:case Ee.kRt:return Jt.Ru;default:return Jt.jT}}function e5(t,i){const e=function(t){const i=t.Mjt.Jpt,e=t.Kjt.map((t=>t.Jpt));return i||(e.length?e[0]:void 0)}(t);return s5(e,i)}async function s5(t,i){let e={ct:0,jnt:[]};if(t){const s=await Z3(t,i);Uc(s)&&(e=n5(s))}return{o:t||"default",Oii:t,kT:e,GP:0,Vet:"",Ti:0,Av:Jt.jT,ji:0}}function n5(t){const i=[];let e,s=0;for(const n of t.jnt){const t=s;!n.mPt||void 0!==e&&nK(n.mPt.Jpt,e)||(i.push(r5(n.mPt,t)),e=n.mPt.Jpt),i.push(o5(n,t)),s+=n.ct}return{ct:s,jnt:i}}function r5(t,i){return{MS:i,ct:0,xii:h5(t.Jpt)}}function o5(t,i){return{MS:i,ct:t.ct,xii:h5(t.Jpt)}}function h5(t){return{zu:t.lT,Sat:t.Dyt?[t.Dyt.Cn,t.Dyt.Cn+t.Dyt.U]:void 0,tE:!1}}var a5=class{async jii(t){if(!t.src)throw new g("Invalid typed source");const i=t.type;if(zn(i))return await this.Rii(t);if(Fw(i))return await this.Pii(t);throw new g("Unexpected source type")}async Rii(t){try{const i=await Z3(t.src,this.Sbt);return await q3(i,this.Sbt)}catch(t){throw new g("Unable to fetch HLS manifest")}}async Pii(t){try{const i=new OW({yv:ra.Dh(t.src),nbt:t.liveOffset,ubt:t.timeServer,tE:t.useCredentials},this.zii,Kk.rH,this.Sbt,t.dash);return await i.W,await async function(t,i,e){const s=[];for(const n of t.omt)s.push(z3(n,i,e));const n=await Promise.all(s);return{ct:t.Upt.bmt(),Cii:[t.ZMt],omt:n}}(i.Tr.jlt,t.contentProtection,this.Pct)}catch(t){throw new g("Unable to fetch DASH manifest")}}constructor(t,i,e){this.Sbt=t,this.Pct=i,this.zii=e}},u5=class{Bii(){const t=new Oi;return this.Uii.push(t),this.Qii(),t.OL}async Fii(t,i){try{await t}finally{this.Yii-=1,this.Qii(),0===this.Uii.length&&0===this.Yii&&i.LL(!0)}}Qii(){if(this.Uii.length>0&&this.Yii<this.Gii){this.Uii.shift().LL(),this.Yii+=1}}constructor(t){this.Uii=[],this.Yii=0,this.Gii=t}};var c5=class extends Mo{get vii(){return this.Wg()}async Wg(){const t=new a5(this.Sbt,this.Pct,this.zii);this.gkt=await t.jii(this.Vii);const i=function(t,i){if(Sn(t)){if($i(t,"%"))return C(t)/100*i;throw new g("Unexpected - Invalid string supplied as amount to cache.")}return i<t?i:t}(this.Pbt.WI.amount,this.gkt.ct);let e;this.Mii=i;const s=Ir(this.gkt.Cii[0]),n=(await this.Ont.Rnt.Int(s,"manifestURL")).filter((t=>Ai(t.references,this.Pbt.o))),r=[],o=this.Pbt.WI.bandwidth;for(const t of this.gkt.omt)for(const i of t.Lii)for(const t of d5(i,this.Pbt.WI.preferredTrackSelection))for(const i of _5(t.qw,o))r.push(i);this.Wii=_.ceil(r.map((t=>t.GP*function(t,i){let e=0;for(const s of t.kT.jnt.map((t=>t.ct)))if(e+=s,e>=i)return e;return e}(t,i)/8)).reduce(((t,i)=>t+i),0));const h=Pu();if(n&&0!==n.length){const t=n.reduce(((t,i)=>t+i.byteSize),0);for(const t of n){const i=t.qualityId,e=new Ri(t.startsAndEnds);if(h.has(i))h.get(i).timeRanges=h.get(i).timeRanges.YB(e).FB(5e-4);else{const t=bo(r,(t=>t.o===i));var a;const s=_.min(this.Mii,null!=(a=null==t?void 0:t.kT.ct)?a:1/0);h.set(i,{timeRanges:e,totalQualityDurationToCache:s})}}e=new oi(t,h,this.Mii)}else{for(const t of r)h.set(t.o,{timeRanges:Ri.oU(),totalQualityDurationToCache:_.min(t.kT.ct,this.Mii)});e=new oi(0,h,this.Mii)}this.Hii=e}get Xii(){return this.Wii}get Hii(){return this.Zii}set Hii(t){this.Zii.QS(t)||(this.Zii=t,t.QS(oi.Eii)||this.Co(new R3))}async pi(t){await this.bo,await this.qii(this.gkt,t)}async qii(t,i){if(!t.Cii)throw new g("Unexpected - manifest is missing locations");await this.Kii();const e=[];for(const s of t.omt)e.push(this.Jii(s,t.Cii[0],i));return Wr(e)}async Kii(){const t=await this.$ii.Snt();for(const i of t){const t=await this.Ont.Pnt.IL(i.key);if(t)await l5(t,this.Pbt.o,this.Ont.Pnt,this.gii);else try{await this.Ont.Pnt.Mnt(i,this.gii)}catch(t){throw new kn("Unable to store manifest with url: "+i.locationURL,t)}}await this.$ii.Ent()}Jii(t,i,e){const s=[];for(const n of t.Lii){const t=d5(n,this.Pbt.WI.preferredTrackSelection);for(const n of t)s.push(this.tei(n,i,e))}return Wr(s)}async tei(t,i,e){const s=this.Pbt.WI.bandwidth,n=_5(t.qw,s);t.Av===Jt.VA&&t.Svt&&t.Svt.fR.widevine&&"persistent"===t.Svt.fR.widevine.licenseType&&(await this.iei(t.Svt),Vr(e));const r=[];for(const t of n)r.push(this.eei(t,i,e));return Wr(r)}async eei(t,i,e){Vr(e);const s=t.kT.jnt[0].MS+this.Mii,n=[];let r=!1;for(const o of t.kT.jnt){if(o.MS>=s||this.stopIfFailed(r))break;await this.sei(e),await this.nei.Bii(),n.push(this.nei.Fii(this.rei(o,t,i),this.oei).catch((t=>(r=!0,Promise.reject(t)))))}return Wr(n)}async sei(t){if(null==t?void 0:t.n_)throw await this.oei.OL,new Fh}async hei(){return await this.bo.catch(Br),this.gkt}iei(t){return Promise.resolve()}aei(){return ra.vp("License renewal unsupported in this SDK."),Promise.resolve()}async rei(t,i,e){const s=this.Ont.Rnt,n=Gh(t.xii.zu,t.xii.Sat),r=await s.IL(n);if(r)await l5(r,this.Pbt.o,s,this.gii),this.uei(r,!1);else try{const s=await this.cei(t.xii),{segmentMetadataEntry:n,segmentEntry:r}=this.lei(t,i,e,s);await this.Ont.Cnt((async t=>{await t.Rnt.Mnt(n,this.gii),await t.jnt.Mnt(r,this.gii)})),this.uei(n,!0)}catch(i){throw new kn("Unable to store segment with url: "+t.xii.zu,i)}}async cei(t){const i=await this.jut.pat(t,{Iat:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,KD:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.Rut(i)}async Rut(t){return{buffer:await t.GR()}}lei(t,i,e,s){const n=Gh(t.xii.zu,t.xii.Sat),r=t.MS,o=t.ct,h=this.dei(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:Ir(e),qualityId:i.o,byteSize:h,startsAndEnds:new Ri([r,r+o]).LB,references:[this.Pbt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:Ir(e),data:s,references:[this.Pbt.o]}}}dei(t){return t.buffer.byteLength}uei(t,i){const e=t.qualityId,s=this.Zii,n=s.sS;n.get(e).timeRanges=n.get(e).timeRanges.YB(new Ri(t.startsAndEnds)).FB(5e-4),this.Hii=new oi(i?s.bii+t.byteSize:s.bii,n,this.Mii)}stopIfFailed(t){return!1}constructor(t,i,e,s,n,r,o,h){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.oei=new Oi,this.Zii=oi.Eii,this.Pbt=t,this.Ont=i,this.Sbt=e,this.$ii=s,this.jut=n,this.Pct=r,this.zii=h,this.gii=o,this.Wii=-1;const a=this.Pbt.yc.sources[0];this.Vii=a,this.bo=this.Wg(),this.nei=new u5(this.Pbt.WI.parallelTasksThreshold)}};async function l5(t,i,e,s){Ai(t.references,i)||(t.references.push(i),await e.Mnt(t,s))}function d5(t,i){switch(t.Av){case Jt.WA:return f5(t.Z,i.audioTrackSelection);case Jt.Ru:return f5(t.Z,i.textTrackSelection);default:return f5(t.Z,[])}}function f5(t,i){if(0===i.length)return t.length?[t[0]]:[];const e=[];for(const s of t)i.indexOf(s.gs)>-1&&e.push(s);return e}function _5(t,i){if(!t.length)return[];const e=[...t].sort(vF),s=e.filter((t=>t.GP<=i));return s.length>0?[s.pop()]:[e.shift()]}var g5=class{async fei(){await this.Ont.Cnt((async t=>{await this._ei(t),await this.gei(t),await this.wei(t),await this.vei(t)}))}async _ei(t){const i=t.znt,e=this.Pbt.o;await i.rS(e)}async gei(t){const i=t.Rnt,e=t.jnt,s=this.Pbt.yc.sources[0];if(!Xw(s))return;const n=Ir(s.src),r=(await i.Int(n,"manifestURL")).filter((t=>Ai(t.references,this.Pbt.o)));for(const t of r)jn(t.references,this.Pbt.o),0===t.references.length?(await i.rS(t.key),await e.rS(t.key)):await i.Mnt(t)}async wei(t){const i=t.Pnt,e=this.mei(),s=(await i._nt(e)).filter((t=>Ai(t.references,this.Pbt.o)));for(const t of s)jn(t.references,this.Pbt.o),0===t.references.length?await i.rS(t.key):await i.Mnt(t)}mei(){if(!this.gkt)return[];const t=this.Pbt.yc.sources[0];if(!Xw(t))return[];const i=Ir(t.src),e=function(t){if(!t)return[];const i=[];for(const e of t.omt)for(const t of e.Lii)for(const e of t.Z)for(const t of e.qw)t.Oii&&i.push(t.Oii);return function(t){return t.reduce(((t,i)=>(t.indexOf(i)<0&&t.push(i),t)),[])}(i)}(this.gkt).map((t=>({src:t}))).map((t=>Ir(t.src)));return[i,...e]}async vei(t){const i=t.Bnt,e=(await i.Snt()).filter((t=>Ai(t.references,this.Pbt.o)));for(const t of e)jn(t.references,this.Pbt.o),0===t.references.length?(await i.rS(t.key),this.pei(t)):await i.Mnt(t)}pei(t){}constructor(t,i,e){this.Pbt=t,this.Ont=i,this.gkt=e}},w5=new class{G7(t,i,e){return new g5(t,i,e)}};var v5=class{get va(){return this.Xa||(this.Xa=function(t){return{renew(i){t.Aei(i)}}}(this)),this.Xa}Aei(t){this.yei(t)}async yei(t){try{await this.Mei.aei(t)}catch(t){0,this.ast.Xht(ic.ERROR)}}constructor(t,i){this.ast=t,this.Mei=i}},m5=class extends B{get vii(){return this.Mei.vii}get va(){return this.Xa||(this.Xa=function(t){let i,e={get id(){return t.o},get status(){return t.fD},get source(){return t.yc},get parameters(){return t.WI},get duration(){return t.ct},get cached(){return t.bei.ks()},get secondsCached(){return t.Tei},get percentageCached(){return t.Sei},get bytes(){return t.Nei},get bytesCached(){return t.Iei},get license(){return t.fG.va},start(){t.Cn()},pause(){t.Hg()},remove(){t.rS()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new bL(t,["s4t","xht"],e),e}(this)),this.Xa}get o(){return this.uS}get fG(){return this.Dei}get fD(){return this.Hht}Xht(t){this.Hht!==t&&(this.Hht=t,this.Co(new ki))}get yc(){return this.bc}get WI(){return this.Eei}get ct(){return this.Mei.Hii.sU}get bei(){return this.Mei.Hii.Nii}get Tei(){return this.Mei.Hii.Sii}get Sei(){return this.Mei.Hii.Iii}get Nei(){return this.Mei.Xii}get Iei(){return this.Mei.Hii.bii}Cn(){this.Hht===ic.EVICTED||this.Hht===ic.DONE||this.kei()}async kei(){try{this.Xht(ic.LOADING);const t=new Bd;this.Lei=t,await this.Mei.pi(t.f_),this.Xht(ic.DONE)}catch(t){be(t)?this.Xht(ic.IDLE):this.Xht(ic.ERROR)}finally{this.Lei.h_()}}Hg(){this.Lei.g_()}rS(){this.fD===ic.LOADING?(this.yn("xht",this.evictOnLoading),this.Hg()):this.xei()}async xei(){try{const t=await this.Mei.hei();await w5.G7(this,this.Ont,t).fei(),this.Mei.Hii=oi.Eii,this.Xht(ic.EVICTED)}catch(t){0,this.Xht(ic.ERROR)}}constructor(t,i,e,s,n,r){super(),this.Lei=new Bd,this.evictOnLoading=()=>{this.fn("xht",this.evictOnLoading),this.xei()},this.uS=t,this.bc=i,this.Eei=e,this.Ont=s,this.Mei=n.G7(this,this.Ont,r),this.Dei=new v5(this,this.Mei),this.Hht=1===this.Mei.Hii.Iii?ic.DONE:ic.IDLE,this.Mei.yn("s4t",(t=>{this.Ds(t),1===this.Sei&&this.Xht(ic.DONE)}));const o=new Date,h=this.Eei.expirationDate.getTime()-o.getTime();(function(t){return t<2147483647})(h)&&u((()=>this.xei()),h)}};var p5=class{pii(t,i,e){const s=Sr();return this.fii(s,t,i,e)}fii(t,i,e,s){return new m5(t,i,e,this.Ont,this.Cei,s)}constructor(t,i){this.Ont=t,this.Cei=i}},A5=30,y5=5;function M5(t){if(!t)throw new g("Unexpected - The cache parameters are undefined");const i=function(t){if(Sn(t)&&!$i(t,"%"))return x(t);return t}(t.amount);!function(t){if(function(t){return Sn(t)&&$i(t,"%")}(t)){const i=C(t);if(S(i)||i<0||i>100)throw new g("The amount as percentage must be between 0 and 100 percent.")}if(!Sn(t)&&S(t))throw new g("The amount must be a number or a string")}(i);const e=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+A5),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||hd(t)&&t>new Date}(t))throw new g("Invalid expiration date for the cache parameters")}(e);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(S(t)||t<0)throw new g("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return y5;if(S(t))throw new g("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:i,expirationDate:e,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var b5=class{set V7t(t){this.Oei=t,this.jei=0,this.Rei=0,this.Pei=void 0}get V7t(){return this.Oei}f5t(){if(!this.Oei)return;const t=this.Oei.s$t;for(;this.jei<t.length;){const i=t[this.jei];for(void 0===this.Pei&&(this.Pei=l2(i),this.Rei=0);this.Rei<this.Pei.length;){const t=this.Pei[this.Rei];if(this.Rei++,void 0!==t.uXt)return t.uXt}this.jei++,this.Pei=void 0}}tr(){for(this.V7t=void 0,this.$O.g_(),this.$O=new Bd;this.zei.length;)this.I7t()}Bei(t){return new O3(this.Ont.znt,t,"temporary")}async FGt(t){const i=w3(t.kZt,this.oZ.ads.allowedMimeTypes);if(!i.length)return;const e=await gS.lL.AB(i,dl({sources:i}));if(!e.t.aB())return;this.Mei||(this.Mei=new this.Cei(this.aE));const s=this.Ont,n=new p5(s,this.Mei),r=this.Bei(n).fii(dl({sources:e.yc}),M5({amount:10,bandwidth:Gu.lL.OP()||this.wU.aX}),"temporary");this.zei.push(r);const o=this.Mei.G7(r,s,"temporary");this.$O.g_(),this.$O=new Bd,o.pi(this.$O.f_).then(Br),this.Uei(o,t)}constructor(t,i,e,s){this.zei=[],this.jei=0,this.Rei=0,this.T7t=async()=>{const t=this.f5t();t&&await this.FGt(t)},this.I7t=()=>{const t=this.zei.shift();null==t||t.rS()},this.Uei=async(t,i)=>{let e=!1;for(;!e;)await t.k_("s4t"),e=1===t.Hii.Iii;i.ct<5&&this.T7t()},this.oZ=t,this.aE=i,this.$O=new Bd,this.Cei=e,this.wU=s,this.Ont=new hQ}},T5={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new Ri([0,0]).LB,references:[]},S5={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},N5=class t extends TF{async tlt(t,i,e,s){try{return await super.tlt(t,i,e,s)}catch(t){me(t)}const n=await this.Qei.tlt(t,i,e,s);return await this.Fei(t,i,n),n}async Fei(i,e,s){if(void 0===this.Yei)return;const n=this.Ont.Rnt,r=Gh(i,e),o=await n.IL(r);if(o)await l5(o,this.Yei,n,this.gii);else try{const i={buffer:s},{segmentMetadataEntry:e,segmentEntry:n}=t.lei(r,i,this.Yei);await this.Ont.Cnt((async t=>{await t.Rnt.Mnt(e,this.gii),await t.jnt.Mnt(n,this.gii)}))}catch(t){throw new kn("Unable to store segment with url: "+i,t)}}static lei(t,i,e){return{segmentMetadataEntry:ol({},T5,{key:t,segmentURLsegmentByteRange:t,references:[e]}),segmentEntry:ol({},S5,{key:t,segmentURLsegmentByteRange:t,data:i,references:[e]})}}constructor(t,i,e,s,n){super(t),this.Qei=new bF(i),this.Ont=e,this.Yei=s,this.gii=n}};var I5,D5=class{G7(t,i,e){void 0===e&&(e="persistent");const s=t.yc.sources[0];if(Gw(s))throw new g("Caching THEOlive sources is not supported");const n=Boolean(s.useCredentials),r=new xQ(this.aE,Bu.jT),o=new XW(this.aE,n),h=new ur(i.Pnt,i.Rnt,i.jnt,i.Bnt),a=function(t,i,e,s,n){return new N5(i,t,e,s,n)}(this.aE,h,i,t.o,e),u=new kh,c=new $W(JW(o,h),u,t);return this.Gei(t,i,c,u,r,a,e)}constructor(t){this.aE=t}},E5=class extends D5{Gei(t,i,e,s,n,r,o){return new c5(t,i,e,s,n,r,o,cQ())}},k5=E5;!function(t){t[t.NOT_INITIALISED=0]="NOT_INITIALISED",t[t.Vei=1]="Vei",t[t.Wei=2]="Wei",t[t.Sm=3]="Sm",t[t.VU=4]="VU",t[t.sLt=5]="sLt"}(I5||(I5={}));var L5=class t extends ll{get m2t(){return this}static get w2t(){return F.y$t}get w2t(){return t.w2t}E8t(t,i,e){i===lc.kit&&this.v5?$r(this.l5t([t])):this.Hei.push(t)}Q_(){return this.Xei.rti?this.Xei.U_:this.Ktt()}F_(t,i){}Td(){return this.Xei.ct}V_(){return this.Xei.G_}W_(){}X_(){}hg(){return this.Xei.og}ag(t){this.og!==t&&(this.Xei.og=t,this.Co(new St(this.U_,this.zg)))}_g(){return this.Xei.fg}Ng(){return this.Xei.Sg}Dg(){return Ri.oU().ks()}Og(){return this.Xei.Cg}Pg(){return this.Xei.Rg}Bg(){return this.Xei.zg}Ug(t){this.zg!==t&&(this.Xei.zg=t,this.Co(new St(this.U_,this.zg)))}async Xg(){if(this.Zei)return;this.Co(new Rt(this.U_)),this.qei(),this.Hei.length&&(this.Zei=this.l5t(this.Hei),await this.Zei,this.Zei=void 0),await this.Kei.j7t(this.Qo.Q_());const t=this.Jei;4!==t&&1!==t&&5!==t||(!this.I$t&&this.$ei.length?this.tsi():this.I$t?(this.isi=!0,this.Xei.Xg()):(this.Q1t(),this.Qo.Xg()),this.Jei=3)}Hg(){3===this.Jei&&(this.Xei.Hg(),this.Jei=4)}b7t(){this.Kei.b7t()}Cn(){this.Jei=1,this.Kei.Cn()}async Zg(){this.Kei&&(this.Kei.jn(),this.esi(!1),this.jti.Zg(),this.Jei=5,this.I$t&&(this.Kei.G7t(this.I$t.Fqt),this.I$t=void 0)),this.v5=!1,this.isi=!1,To(this.$ei),this.E2t&&(this.Q1t(),this.Qo.ge()),To(this.Hei),await this.Xei.Zg(),await this.hti.tr()}Ny(){this.Xei.$Kt(),this.jti.$Kt()}Wg(){this.hti.Wg(),this.qei()}b2t(t){return!(t.type!==Tf.Ov||!this.Kei||!this.Kei.x7t(-1))&&(this.Kei.k7t().then(Br),!0)}ge(){void 0!==this.Xei.ati&&(this.hti.ge(),this.Xei.ge()),void 0!==this.jti.Uti&&this.jti.ge()}be(){this.hti.be(),this.Xei.be(),this.jti.be()}async l5t(t){const i=await T3.tii(t,this.aE,this.A2t);if(!i.length){const t="Ads could not be loaded.";return this.A2t.Co(ga.S2t(new va(_o.ADBLOCK,qu.FILE_NOT_FOUND),t)),void(this.v5&&!this.I$t&&0===this.$ei.length&&this.ssi())}this.Kei.F7t(i),this.A2t.Co(new Xr),this.E2t||this.Qo.fg||this.Kei.j7t(this.Qo.Q_()),0!==this.Jei&&5!==this.Jei||this.Cn()}B7t(t){this.$ei.push(...t);for(const i of t)this.v5&&!this.E2t&&this.tsi()}async tsi(){if(2!==this.Jei&&!this.nsi){0,this.nsi=!0,this.Jei=2;const t=this.I$t;this.rsi(),this.I$t?(await this.I$t.Fqt.p7t(this.A2t),this.osi()||(this.nsi=!1),this.A2t.Co(new v4(this.hsi(this.I$t))),await this.asi()):((null==t?void 0:t.Fqt.A7t())&&this.A2t.Co(new dc(this.hsi(t))),this.nsi=!1,this.Jei=1,this.ssi())}}ssi(){this.Q1t(),this.Qo.ge(),this.Qo.G_?this.Qo.Co(new pa(this.Qo.Q_())):this.Qo.Xg()}rsi(){let t;if(this.I$t&&this.osi())t=this.I$t.Fqt;else{if(0===this.$ei.length)return;t=this.$ei.shift()}if(!t)return;const i=t.Mc();i?this.I$t=i:(this.I$t&&(this.Kei.G7t(this.I$t.Fqt),this.I$t=void 0),this.I$t=void 0)}async asi(){const t=this.I$t?function(t){var i,e;const s=null==(e=t.pKt)||null==(i=e.HHt)?void 0:i.XHt();return void 0===s?void 0:new c2(s)}(this.I$t):void 0;if(t){if(!this.I$t)return;this.usi=t,this.lsi(this.I$t.wXt),this.dsi(Hh.oqt);const i=this.usi.Mc();this.I$t.Fqt.A7t()&&(this.jti.fti(),1===this.I$t.Fqt.aut&&this.A2t.Co(new PP(this.hsi(this.I$t)))),await this.Mti(i)}else this.Jei=1,this.nsi=!1,this.I$t=void 0,this.tsi()}async Mti(t){if(t){var i;let s=Ks(t.uXt),n=Ks(t.dXt);var e;const r=null!=(e=null==(i=t.lXt)?void 0:i.RXt)?e:[],o=r.length>0,h=this.I$t,a=this.hsi(h);if(t.uXt){if(t.uXt.Xl=h,void 0!==h.Wit.skipOffset){const i=Ph.dKt(h.Wit.skipOffset,t.uXt.ct);i&&i<t.uXt.ct&&(t.uXt.CZt=i)}const i=a.n$t(t.uXt,r,t.fXt,h.Wit);this.jti.fti(),this.z4t(),await this.Xei.Mti(i,t.lt,{width:this.Qo.we.offsetWidth,height:this.Qo.we.offsetHeight}),s=!0}if(t.dXt){const i=t.dXt._Xt[0];if(i.Xl=h,void 0!==h.Wit.skipOffset){const t=Ph.dKt(h.Wit.skipOffset,this.Qo.Td());t&&(i.Xl.CZt=t)}const e=s?[]:r,o=a.r$t(i,e,t.dXt,t.fXt,h.Wit);s&&this.Xei.Pti(),await this.jti.Mti(o,t.lt,{width:this.Qo.we.offsetWidth,height:this.Qo.we.offsetHeight}),n=!0}if(s){this.Jei=3,this.Xei.ge();const t=0===a.cPt;this.isi=t,this.hti.Hg(),this.Xei.Xg(),this.Qo.Hg(),this.Qo.be(),this.z4t(),this.Xei.Lti()}n&&(this.Jei=3,this.jti.ge(),this.jti.Lti()),(s||n||o)&&this.fsi(t.oXt),s||n||await this._si(),!s&&n&&(this.osi()||this.$ei.length>0?this.tsi():(this.ssi(),this.I$t=h))}else null===t?await this._si():this.esi(!0)}_si(){const t=this.usi;return this.Mti(t&&t.Mc())}esi(t){this.dsi(Hh.hqt),this.gsi(),this.Jei=1;const i=void 0!==this.I$t&&this.I$t.Fqt.v7t();if(this.nsi=!1,i)t&&(this.Jei=1,this.tsi());else{if(!this.E2t)return;this.Qo.ge(),!this.Qo.G_&&t&&this.Qo.Xg(),this.Q1t()}}Q1t(){this.wsi(),super.Q1t()}wsi(){if(this.Qo.G_&&(this.Jei=5),this.I$t){const t=this.I$t.Fqt;t.A7t()&&this.A2t.Co(new dc(this.hsi(this.I$t))),this.Kei.G7t(t),this.I$t=void 0}}lsi(t){this.vsi=this.vsi.concat(t)}gsi(){this.vsi=[]}msi(t){this.Qo.we.appendChild(t)}dsi(t){for(const i of this.vsi)i.eF===t&&Do(i.eventURL)}fsi(t){this.Xei.tti(Hh.$Zt);for(const i of t)Do(i)}get Iit(){return this.I$t?this.hsi(this.I$t):null}get Sit(){return this.I$t?[this.Xei.ati,this.jti.Uti].filter(Ks):[]}get Dit(){const t=this.$ei.concat(this.Kei.Dit.filter((t=>!t.u$t())));return Pe(t,(t=>t.l7t.Oc.filter((t=>!t.u$t()))))}get Eit(){return this.Kei.Dit.map((t=>t.l7t))}Yit(t){const i=this.L8t();for(const e of i)Yc(e.sources,e.timeOffset)||t.W4(e,lc.kit,!1)}L8t(){const t=[];for(const i of this.Sit.concat(this.Dit))t.push(i.Wit);const i=this.$ei.concat(this.Kei.Dit.filter((t=>!t.u$t())));for(const e of i)for(const i of e.s$t)i.W||t.push(i.Wit);return t.push(...this.Hei),Dd(t)}osi(){return!!this.I$t&&l2(this.I$t).some((t=>t.uXt))}hsi(t){return t.Fqt.l7t}$ti(){return this.psi}Vg(){return this.hti.Vg()}C_(){return this.hti.C_()}L2t(t){this.Kei.L2t(t)}async gn(){await super.gn(),this.Qo.fn(Tf.jh,this.qei),this.A2t.DU(this.Xei.A2t),this.A2t.DU(this.jti.A2t),this.A2t.DU(this.Kei),this.Xei.gn(),this.jti.gn(),await this.hti.gn()}constructor(t,i,e,s,n,r){super(t,i),this.$ei=[],this.Jei=0,this.vsi=[],this.nsi=!1,this.v5=!1,this.isi=!0,this.Hei=[],this.Asi=t=>{t.type===Tf.jh&&this.isi?this.isi=!1:this.Co(t)},this.qei=()=>{this.v5=!0},this.ysi=async()=>(this.Jei=1,await this.Xei.fti(),this.Mti(this.usi.Mc())),this.Msi=async t=>{const i=new va(_o.PLAYBACK,qu.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.A2t.Co(ga.S2t(i,t)),await this.Xei.fti(),this.Mti(this.usi.Mc())},this.bsi=()=>(this.jti.fti(),this.Mti(this.usi.Mc())),this.Tsi=t=>{const i=new va(_o.PLAYBACK,qu.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.A2t.Co(ga.S2t(i,t)),this.jti.fti(),this.Mti(this.usi.Mc())},this.aE=r,this.hti=e,this.jti=new b3(this.Tsi,this.bsi,this),this.Xei=new y3(this.Msi,this.ysi,this.jti,s,this,t.Iu,e),this.msi(this.jti.W7t),this.msi(this.Xei.W7t);const o=new b5(s,r,E5,n);this.Kei=new d3(this.Qo,this,this.A2t,o),this.Xei.T_(this.Asi),this.jti.T_(this.Ds),this.A2t.Qa(this.Xei.A2t),this.A2t.Qa(this.jti.A2t),this.A2t.Qa(this.Kei),this.psi=new _2(this,this.Qo),this.Iu.yn(Bh.pn,this.Ds),this.Qo.yn(Tf.jh,this.qei)}};nu.lL.GU(new class{get d2t(){return L5.w2t}YU(t){return t&&("string"!=typeof t.integration||t.integration===Au.DEFAULT||t.integration===Au.CSAI||t.integration===Au.THEO)}f2t(t,i,e){const s=new MS(t.we,e,t.Hj,t.Qtt,t.Qg,t.Htt,t.Ol);return new L5(t,i,s,e,t.Qtt,t.Hj)}W4(t,i,e,s){e.E8t(t,i,s)}hY(t){const i=P1(t.sources);if(!i)return;const e={integration:Au.CSAI,sources:i};"vast"===e.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===e.sources.type&&void 0!==t.timeOffset&&Ut("property timeOffset will be ignored for vmap ad sources");const s=B1(t.timeOffset);void 0!==s&&(e.timeOffset=s);const n=B1(t.skipOffset);return void 0!==n&&(e.skipOffset=n),e}});var x5=class{oX(){var t;this.f3||(null==(t=this.X8t)||t.initialize(),this.f3=!0)}get W7t(){return this.j0t}get Ssi(){return this.Nsi.offsetHeight}get Isi(){return this.Nsi.offsetWidth}get Dsi(){return this.X8t}Esi(t){"linear"===t?this.j0t.style.marginTop="0px":"nonlinear"===t&&(this.j0t.style.marginTop="-45px")}ge(){this.j0t.style.opacity="1",this.j0t.style.pointerEvents=""}be(){this.j0t.style.opacity="0",this.j0t.style.pointerEvents="none"}h_(){var t;null==(t=this.X8t)||t.destroy(),this.X8t=void 0}constructor(t,i){this.X8t=void 0,this.f3=!1,this.X7=t;const e=h.createElement("div");e.className="theoplayer-ima-wrapper",_b(e),e.style.zIndex="10",Po.Qs&&function(t,i){t.addEventListener(i,lb)}(e,"mousedown"),i.appendChild(e);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.Nsi=s,e.appendChild(s),this.j0t=e,this.X8t=new google.ima.AdDisplayContainer(this.Nsi,this.X7)}},C5=class{get yZt(){return this.ksi.getAdId()}get p9t(){const t=this.ksi.getAdPodInfo();if(void 0!==t)try{return{M5t:t.getAdPosition(),$Jt:t.getMaxDuration(),Lsi:t.getPodIndex(),cPt:t.getTimeOffset(),b5t:t.getTotalAds(),xsi:t.getIsBumper()}}catch(t){return}}get eXt(){return this.ksi.getAdSystem()}get Csi(){return this.ksi.getAdvertiserName()}get WXt(){var t;return null!=(t=this.ksi.getApiFramework())?t:void 0}get lXt(){return this.PXt.map((t=>({XXt:t.getAdSlotId(),Nz:t.getContentType(),t4t:t.getContent(),Ti:t.getHeight(),ji:t.getWidth()})))}get Nz(){var t;return null!=(t=this.ksi.getContentType())?t:void 0}get IXt(){return this.ksi.getCreativeId()}get a8t(){return this.ksi.getCreativeAdId()}get Osi(){return this.ksi.getDealId()}get xM(){return this.ksi.getDescription()}get ct(){return this.ksi.getDuration()}get ji(){return this.ksi.getWidth()}get Ti(){return this.ksi.getHeight()}get s8t(){var t;return null!=(t=this.ksi.getMediaUrl())?t:void 0}get jsi(){return this.ksi.getMinSuggestedDuration()}get o8t(){return this.ksi.getSkipTimeOffset()}get Rsi(){return this.ksi.getSurveyUrl()}get kz(){return this.ksi.getTitle()}get n8t(){return this.ksi.getTraffickingParameters()}get r8t(){return this.ksi.getTraffickingParametersString()}get fXt(){return this.ksi.getUniversalAdIds().map((t=>({c8t:t.getAdIdRegistry(),l8t:t.getAdIdValue()})))}get i7t(){return this.ksi.getUiElements()}get h8t(){return this.ksi.getVastMediaBitrate()}get i8t(){return this.ksi.getVastMediaHeight()}get t8t(){return this.ksi.getVastMediaWidth()}get q9t(){return this.ksi.getWrapperAdIds()}get K9t(){return this.ksi.getWrapperAdSystems()}get J9t(){return this.ksi.getWrapperCreativeIds()}get l9t(){return this.ksi.isLinear()}constructor(t){this.ksi=t;const i=new google.ima.CompanionAdSelectionSettings;i.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,i.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,i.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.PXt=t.getCompanionAds(0,0,i)}};function O5(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var j5=class extends Mo{Ug(t){var i;null==(i=this.e$t)||i.setVolume(t)}Bg(){return this.e$t.getVolume()}C9t(){return this.e$t.getRemainingTime()}h_(){To(this.Ic),this.Wu.fn(Bh.pn,this.Psi),this.e$t.removeEventListener(google.ima.AdEvent.Type.LOADED,this.zsi),this.e$t.removeEventListener(O5(),this.forwardAdEventListener),this.e$t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.e$t.destroy()}Cn(){this.e$t.start()}G8t(){this.e$t.resume()}Hg(){this.e$t.pause()}Ny(){this.e$t.skip()}Zg(){this.e$t.stop()}w9t(){const t=this.e$t.getCurrentAd();if(t)return this.Bsi(t)}q8t(){return this.e$t.getCuePoints()}Bsi(t){let i=bo(this.Ic,(i=>i.ksi===t));return i||(i=new C5(t),this.Ic.push(i)),i}r7t(t){this.e$t.updateAdsRenderingSettings(B5(t))}constructor(t,i,e){super(),this.Ic=[],this.zsi=t=>{t.getAd().isLinear()?this.X8t.Esi("linear"):this.X8t.Esi("nonlinear")},this.Psi=()=>{this.e$t.resize(this.X8t.Isi,this.X8t.Ssi,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const i=t.getAd(),e=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:jl.D5t,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:jl.E5t,[google.ima.AdEvent.Type.CLICK]:jl.k5t,[google.ima.AdEvent.Type.DURATION_CHANGE]:jl.Lv,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:jl.L5t,[google.ima.AdEvent.Type.STARTED]:jl.nLt,[google.ima.AdEvent.Type.IMPRESSION]:jl.x5t,[google.ima.AdEvent.Type.PAUSED]:jl.VU,[google.ima.AdEvent.Type.RESUMED]:jl.C5t,[google.ima.AdEvent.Type.AD_PROGRESS]:jl.A5t,[google.ima.AdEvent.Type.AD_BUFFERING]:jl.O5t,[google.ima.AdEvent.Type.FIRST_QUARTILE]:jl.j5t,[google.ima.AdEvent.Type.MIDPOINT]:jl.HZt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:jl.R5t,[google.ima.AdEvent.Type.COMPLETE]:jl.XZt,[google.ima.AdEvent.Type.USER_CLOSE]:jl.P5t,[google.ima.AdEvent.Type.LINEAR_CHANGED]:jl.z5t,[google.ima.AdEvent.Type.LOADED]:jl.B5t,[google.ima.AdEvent.Type.AD_CAN_PLAY]:jl.U5t,[google.ima.AdEvent.Type.AD_METADATA]:jl.Q5t,[google.ima.AdEvent.Type.AD_BREAK_READY]:jl.F5t,[google.ima.AdEvent.Type.INTERACTION]:jl.Y5t,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:jl.G5t,[google.ima.AdEvent.Type.SKIPPED]:jl.V5t,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:jl.W5t,[google.ima.AdEvent.Type.LOG]:jl.H5t,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:jl.X5t,[google.ima.AdEvent.Type.VOLUME_CHANGED]:jl.Z5t,[google.ima.AdEvent.Type.VOLUME_MUTED]:jl.q5t}[t]}(t.type),s={type:e,date:new Date,Rit:i?this.Bsi(i):void 0,e9t:R4(e,t.getAdData())};this.Co(s)},this.forwardAdErrorEventListener=t=>{this.Co({date:new Date,Rit:void 0,type:O4.K5t,e9t:{R9t:B4(t.getError())}})},this.e$t=t,this.X8t=i,this.Wu=e,this.Wu.yn(Bh.pn,this.Psi),this.e$t.init(this.X8t.Isi,this.X8t.Ssi,google.ima.ViewMode.NORMAL),this.e$t.addEventListener(google.ima.AdEvent.Type.LOADED,this.zsi),this.e$t.addEventListener(O5(),this.forwardAdEventListener),this.e$t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}},R5=class extends os{get Usi(){return this.Qsi}get W7t(){return this.j0t}fa(){return new P5(this.Qsi)}constructor(t,i){super("a7t"),this.Qsi=t,this.j0t=i}},P5=class extends Os{get adsManager(){return this.Qsi}constructor(t){super("adsmanagerloaded"),this.Qsi=t}},z5=class extends Mo{V8t(){var t;null==(t=this.W8t)||t.contentComplete()}async l5t(t,i,e){if(this.Fsi)throw new g("Only one ImaAdsRequest can be made at a time.");if(!this.Ysi.Dsi)throw new g("AdDisplayContainer is not initialized.");this.W8t=new google.ima.AdsLoader(this.Ysi.Dsi),this.W8t.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.W8t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.Fsi=new Oi,this.Gsi=i,this.Vsi=e;const s=new google.ima.AdsRequest;return t.S3t?s.adTagUrl=t.S3t:t.N3t&&(s.adsResponse=t.N3t),s.linearAdSlotWidth=t.p3t,s.linearAdSlotHeight=t.A3t,s.nonLinearAdSlotWidth=t.y3t,s.nonLinearAdSlotHeight=t.M3t,s.contentDuration=t.D3t,s.setAdWillAutoPlay(t.b3t),s.setAdWillPlayMuted(t.T3t),t.I3t&&(s.omidAccessModeRules=t.I3t),this.W8t.requestAds(s),this.Fsi.OL}h_(){var t;void 0!==this.W8t&&(this.W8t.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.W8t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.W8t.destroy(),this.W8t=void 0),null==(t=this.Fsi)||t.xL("AdsLoader destroyed"),this.Fsi=void 0}constructor(t,i){super(),this.onAdsManagerLoadedListener=t=>{if(this.Gsi&&this.Vsi&&this.Fsi){var i;const e=B5(this.Vsi),s=this.Gsi,n=t.getAdsManager({get currentTime(){return s.U_},get duration(){return s.ct}},e),r=new j5(n,this.Ysi,this.Wu);this.Co(new R5(n,this.Ysi.W7t)),null==(i=this.Fsi)||i.LL(r),this.Fsi=void 0}},this.onAdsManagerErrorListener=t=>{var i;const e={pL:t.getError().getMessage(),N5t:t.getError().getVastErrorCode(),Sqt:t.getError().getErrorCode(),Av:P4(t.getError().getType()),I5t:void 0};null==(i=this.Fsi)||i.xL(e),this.Fsi=void 0},this.Wu=i,this.Ysi=t}};function B5(t){const i=new google.ima.AdsRenderingSettings;return i.enablePreloading=t.e7t,t.i7t&&(i.uiElements=t.i7t),i.mimeTypes=t.t7t,void 0!==t.n7t&&(i.playAdsAfterTime=t.n7t),void 0!==t.s7t&&(i.loadVideoTimeout=t.s7t),void 0!==t.e8t&&(i.bitrate=t.e8t),void 0!==t.n7t&&(i.playAdsAfterTime=t.n7t),i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i}var U5=class extends Mo{get U_(){return this.Qo.Eg?this.Wsi:this.Qo.Q_()}get ct(){return this.Qo.Td()}get og(){return this.Qo.og}get zg(){return this.Qo.zg}tr(){this.Wsi=0}constructor(t){super(),this.Qo=t,this.Wsi=this.Qo.Q_(),this.Qo.yn(Tf.fm,(()=>{this.Qo.Eg||(this.Wsi=this.Qo.Q_()),this.Co(new ri(this.U_,void 0))}))}};r3.lL.registerWebImaAdPlayerConstructor((function(t,i,e){e3(e);const s=s3(e)?t.Vg():void 0,n=new x5(s,t.we),r=new z5(n,t.Iu),o=new U5(t);return new n3(t,i,e,t.Gtt,n,r,o)}));var Q5=[Tf.Lv,Tf.Ov],F5=class extends sl{get Hsi(){return this.Qo===this.rit?this.x4t:this.rit}ur(t,i,e,s){this.rit.yn(Q5,this.Ds),s.fg&&!s.G_||this.Qo.Xg()}ar(t,i,e){this.rit.fn(Q5,this.Ds)}F_(t,i){}z_(t){}Xsi(t,i){return super.F_(t,i)}Zsi(t){return super.z_(t)}B_(){return this.rit.bt}Wa(){return this.rit.Wa()}Td(){return this.rit.Td()}Dg(){if(this.qsi())return this.rit.Dg();const t=Ri.xn(this.rit.Dg()),i=Ri.xn(this.x4t.Dg()).KA(this.Ksi);return t.YB(i).Sn(Ri.rU(0,this.Q_())).ks()}Q_(){return this.Jsi(super.Q_())}Jsi(t){return this.Qo===this.x4t?this.Ksi+t:t}j_(){const t=Ri.xn(this.rit.j_()),i=Ri.xn(this.x4t.j_());return t.YB(i.KA(this.Ksi)).ks()}nw(t){if(Ai(Q5,t.type))return!0;if(this.Qo===this.x4t)switch(t.type){case Tf.fm:return this.Co(new ri(this.Jsi(t.currentTime),t.currentProgramDateTime)),!0;case Tf.Zv:return this.Co(new Gt(this.Jsi(t.currentTime))),!0;case Tf.jh:return this.Co(new Rt(this.Jsi(t.currentTime))),!0;case Tf.Sh:return this.Co(new Ye(this.Jsi(t.currentTime))),!0;case Tf.Ov:return this.Co(new pa(this.Jsi(t.currentTime))),!0;case Tf.im:return this.Co(new Ur(this.Jsi(t.currentTime))),!0;case Tf.$v:return this.Co(new Ko(this.Jsi(t.currentTime))),!0;case Tf.qv:return this.Co(new Zs(this.Jsi(t.currentTime),t.playbackRate)),!0;case Tf._m:return this.Co(new St(this.Jsi(t.currentTime),t.volume)),!0;case Tf.xv:return this.Co(new R(this.Jsi(t.currentTime),t.readyState)),!0;case $.pm:return this.Co(new We(this.Jsi(t.currentTime),t.readyState)),!0;case $.Am:return this.Co(new Pn(this.Jsi(t.currentTime),t.readyState)),!0;case $.ym:return this.Co(new re(this.Jsi(t.currentTime),t.readyState)),!0;case $.Mm:return this.Co(new An(this.Jsi(t.currentTime),t.readyState)),!0;case $.Nw:return this.Co(new Dr(this.Jsi(t.currentTime),t.readyState)),!0;case $.Tm:return this.Co(new Ib(this.Jsi(t.currentTime))),!0;case $.Sm:return this.Co(new $e(this.Jsi(t.currentTime))),!0;case Tf.Cv:return this.Co(new zW(this.Jsi(t.currentTime),t.initDataType,t.initData)),!0}return super.nw(t)}async gn(){this.rit.fn(Q5,this.Ds),await super.gn(!0)}constructor(t,i,e){super(e),this.rit=t,this.x4t=i,this.Ksi=t.Q_()}};function Y5(t,i){i.og=t.og,i.zg=t.zg,i.gg=t.gg}var G5,V5=class extends F5{ur(t,i,e,s){super.ur(t,i,e,s),this.Hsi.Hg();this.$si(i,e).style.flex="1"}ar(t,i,e){super.ar(t,i,e);this.$si(i,e).style.flex="0"}constructor(t,i,e){super(t,i,e)}},W5=class extends V5{qsi(){return!0}$si(t,i){return t}tni(t,i){return i}F_(t,i){return super.Xsi(t,i)}z_(t){return super.Zsi(t)}constructor(t,i){super(t,i,t)}},H5=class extends V5{qsi(){return!1}$si(t,i){return i}tni(t,i){return t}ur(t,i,e,s){super.ur(t,i,e,s),this.rit.be();for(const t of[i,e])t.style.transition=""}ar(t,i,e){super.ar(t,i,e),this.rit.ge()}constructor(t,i){super(t,i,i)}};!function(t){t.SINGLE="SINGLE",t.DOUBLE="DOUBLE",t.LSHAPE_AD="LSHAPE_AD",t.LSHAPE_CONTENT="LSHAPE_CONTENT"}(G5||(G5={}));var X5,Z5=class{get ini(){var t,i;const e=null!=(i=null!=(t=this.eni)?t:this.jx)?i:this.fzt;return void 0!==e?this.MS+e:this.RS?this.RS:void 0}get ct(){const t=this.ini;return void 0===t?void 0:t-this.MS}Yn(t){var i,e,s;this.jx=null!=(i=t.ct)?i:this.jx,this.RS=null!=(e=t.bS)?e:this.RS,this.eni=null!=(s=t.sni)?s:this.eni,this.nni()}nni(){void 0===this.jx&&void 0!==this.RS?this.jx=this.RS-this.MS:void 0===this.RS&&void 0!==this.jx&&(this.RS=this.MS+this.jx)}constructor(t){this.pg=!1,this.o=t.o,this.MS=t.MS,this.Jpt=t.Jpt,this.rni=t.rni||"SINGLE",this.oni=t.oni,this.RS=t.bS,this.fzt=t.ARt,this.jx=t.ct,this.eni=t.sni,this.nni()}},q5=Promise,K5="urn:google:dai:2018";!function(t){t.AD_LOADING="adloading",t.AD_LOADED="adloaded",t.AD_ERROR="aderror"}(X5||(X5={}));var J5=class extends Mo{GZ(t,i,e){if(void 0===this.hni){var s,n;if(void 0===(null==(n=Ua.google)||null==(s=n.ima)?void 0:s.dai))throw new g("IMA DAI SDK missing for THEOads");this.hni=new google.ima.dai.api.StreamManager(this.x4t.we.querySelector("video"),this.x4t.we)}const r=this.hni;this.ani(),r.reset();const o=new google.ima.dai.api.PodStreamRequest;return o.networkCode=t,o.customAssetKey=i,o.format="hls",o.adTagParameters=e,this.uni=this.cni([google.ima.dai.api.StreamEvent.Type.STREAM_INITIALIZED,google.ima.dai.api.StreamEvent.Type.ERROR]).then((t=>{if(t.type===google.ima.dai.api.StreamEvent.Type.ERROR)throw new g("DAI stream request failed");this.lni=t.getStreamData(),this.dni()})),this.hni.requestStream(o),this.uni}updateAdTagParameters(t){var i;null==(i=this.hni)||i.replaceAdTagParameters(t)}fni(){this.x4t.nt.yn(rc.hw,this.Hn),this.x4t.yn(Tf.Gv,this._ni),this.x4t.yn($.Am,this.gni),this.x4t.yn(Tf.Ov,this.wni)}vni(){this.x4t.nt.fn(rc.hw,this.Hn),this.x4t.fn(Tf.Gv,this._ni),this.x4t.fn($.Am,this.gni),this.x4t.fn(Tf.Ov,this.wni)}dni(){var t;null==(t=this.hni)||t.addEventListener([google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.PAUSED,google.ima.dai.api.StreamEvent.Type.RESUMED],this.mni)}ani(){var t;null==(t=this.hni)||t.removeEventListener([google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.PAUSED,google.ima.dai.api.StreamEvent.Type.RESUMED],this.mni)}cni(t,i){return new q5(((e,s)=>{var n;if(i&&i.n_)return s(new Fh);const r=t=>{h(),e(t)},o=()=>{h(),s(new Fh)},h=()=>{var e;null==(e=this.hni)||e.removeEventListener(t,r),i&&i.c_(o)};null==(n=this.hni)||n.addEventListener(t,r),i&&i.u_(o)}))}async pni(t,i){return this.Ani({sources:{src:t}},i)}async yni(t,i){this.uni&&await Jr(this.uni,i);const e=_.floor(1e3*t),s=this.lni.getStandalonePodManifestUrl($5,e);return this.Ani({sources:{src:s}},i)}async Ani(t,i){var e;this.fni(),null==(e=this.dE)||e.g_(),this.dE=new Bd,this.dE.w_(i);const s=this.dE.f_;return Vr(s),await this.x4t.ga(dl(t),s),Po.Ga&&Po.zk&&(this.x4t.Xg(),this.x4t.Hg()),at((t=>{const i=this.k_("aderror",t).then(q5.reject),e=this.k_("adloaded",t).then((()=>q5.resolve()));return q5.race([i,e])}),s)}async tr(){var t,i;this.ani(),this.vni(),null==(t=this.dE)||t.g_(),this.dE=void 0,await this.x4t.Zg(),null==(i=this.hni)||i.reset()}async gn(){var t;await this.tr(),null==(t=this.Mni)||t.gn(),await this.bni.gn()}constructor(t,i){super(),this.wni=()=>{this.Tni=void 0,this.vni(),this.x4t.Zg()},this.mni=t=>{this.bni.Sni(t)},this.Hn=t=>{const i=t.Lt;if(i.zt===Qe.ZA&&!(i.Av!==O.ID3&&i.Av!==O.EVENT_STREAM||i.Av===O.EVENT_STREAM&&i.fv!==K5)){if(i.yn(ct.lw,this.Nni),i.yn(ct.fw,this.Ini),i.L)for(const t of i.L.Rw)this.Nni(new Qr(t));i._v=yi.vv,this.Mni=i}},this.Nni=t=>{t.yS.yn(Ui.mS,this.Dni)},this.Ini=t=>{t.yS.fn(Ui.mS,this.Dni)},this.Dni=t=>{var i,e;if(this.lni)if((null==(i=this.Mni)?void 0:i.Av)===O.ID3){const i=t.yS.O;var s;if(ZO(i))if(this.Tni!==i.text)this.Tni=i.text,null==(s=this.hni)||s.processMetadata("ID3",i.text,t.yS.MS)}else if((null==(e=this.Mni)?void 0:e.Av)===O.EVENT_STREAM){var n;const i=t.yS.O;null==(n=this.hni)||n.processMetadata(K5,i,t.yS.MS)}},this._ni=()=>{this.Co(new Os("adloading"))},this.gni=()=>{this.Co(new Os("adloaded"))},this.x4t=t,this.x4t.eS=!1,this.x4t.yg=ut.LT,this.bni=i}};function $5(){return _.floor((new Date).getTime()/6e4)}var t6=class extends F5{qsi(){return!0}ur(t,i,e,s){super.ur(t,i,e,s),Y5(this.Qo,this.Hsi),this.Hsi.og=!0,t.style.backgroundImage="url('"+this.Eni+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center",this.kni=this.rit.nt.Rw.filter((t=>t._v===yi.Jn));for(const t of this.kni)t._v=yi.Ch;for(const t of[i,e])t.style.flex="1",t.style.borderWidth="20px",t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}ar(t,i,e){super.ar(t,i,e);for(const t of[i,e])t.style.flex="0",t.style.borderWidth="0px";var s;for(const t of null!=(s=this.kni)?s:[])t._v=yi.Jn;this.kni=void 0}W_(){return this.rit.W_()||this.x4t.W_()}X_(){return this.rit.X_()||this.x4t.X_()}Ng(){return _.min(this.rit.Sg,this.x4t.Sg)}Xg(){this.rit.Xg(),this.x4t.Xg()}Hg(){this.rit.Hg(),this.x4t.Hg()}constructor(t,i,e){super(t,i,i),this.kni=void 0,this.Eni=e}},i6=class extends F5{ur(t,i,e,s){super.ur(t,i,e,s),this.Hsi.Hg(),this.Hsi.be(),t.style.backgroundImage="url('"+this.Eni+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center";const n=this.$si(i,e);n.style.flex="1",n.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        ";for(const t of[i,e])t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}ar(t,i,e){super.ar(t,i,e),this.Hsi.ge();const s=this.$si(i,e);s.style.flex="0",s.style.transform=""}constructor(t,i,e,s){super(t,i,e),this.Eni=s}},e6=class extends i6{qsi(){return!0}$si(t,i){return t}tni(t,i){return i}constructor(t,i,e){super(t,i,t,e)}},s6=class extends i6{qsi(){return!1}$si(t,i){return i}tni(t,i){return t}constructor(t,i,e){super(t,i,i,e)}},n6=class extends Fc{start(t){super.start(t);for(const t of this.prependPackets)this.dEt(t)}constructor(t=[]){super(),this.prependPackets=t}};function r6(t){return t.Av===X.kA}var o6=class extends n6{transform(t){this.yEt.push(t),t.Av===X.Kp?(this.Ox=function(t){const i=Ot.Wy(t.ly.ly)[0];if((null==i?void 0:i.Av)!==X.Kp)throw new g("Not able to parse Moov Box");if(0===i.Z.length)throw new g("Tracks not found");return i.Z[0].wM.zy.cM}(t),this.Lni(this.yEt.splice(0),zX.INITIALIZER)):t.Av===X.PA&&this.Lni(this.yEt.splice(0),zX.FRAMES)}Lni(t,i){const e={cM:this.Ox,aG:this.TG},s=M(t.map((t=>js(t.ly.ly)))),n=bo(t,r6),r={$D:this.Nat,SL:e,nut:s,Av:i,ct:this.xni(n)/e.cM,I_t:zr(this.Cni(n),e.cM)};this.dEt(r)}xni(t){if(!t||!this.Ox)return 0;const i=Ot.Wy(t.ly.ly)[0].Z[0];if(!i||0===i.iT.length)return 0;const e=i.zy.Vb||0;return i.iT[0].aT.reduce(((t,i)=>{var s;return t+(null!=(s=i.ct)?s:e)}),0)}Cni(t){var i;if(!t||!this.Ox)return ii.UZERO;var e;return null!=(e=null==(i=Ot.Wy(t.ly.ly)[0].Z[0].eT)?void 0:i.eT)?e:ii.UZERO}Oni(t){t.Av===zX.INITIALIZER&&(this.Ox=t.SL.cM)}constructor(t,i=[],e=!1){super(e?i:[]),this.TG=t,this.yEt=[],this.Nat=this.TG.match(/video/)?gu.VA:gu.WA;for(const t of i)this.Oni(t)}},h6="audio/x-theoplayer-fake-json-segment",a6="video/x-theoplayer-fake-json-segment";var u6=class{write(t){if(t.Av===zX.FRAMES){const i=t.SL.cM,e=Yx(vh(t.nut),void 0,i);if(void 0===e)return;this.BL.jni(e,t.ct)}else if(t.Av===zX.INITIALIZER){const i=new mu(vh(t.nut),new Bi),e=Mc.Ry(i,X.Kp),s=e?Ot.Jy(e):[];if(s.length){const t=M(s.map((t=>new j(t.AT))));this.BL.Co(new On(D_,t))}}}constructor(t){this.BL=t}},bl=class t extends Mo{get O_(){return this.QNt}get wd(){return this.GO}get O0(){return this.j0}get R0(){return this.FNt}get iX(){return this.cX}set iX(t){this.cX=t}get rX(){return this.fX}set rX(t){this.fX=t}V$(t,i,e){return this.Rni=i.pI,this.Pni((i=>this.zni(t,i)),e)}zni(t,i){switch(this.BO){case"audio/mp4":case"video/mp4":return this.Bni(t,i);case h6:case a6:return this.Uni(t,i);default:return Promise.reject(new b("Unknown content type: "+this.BO))}}async Bni(t,i){Vr(i);const e=function(t){switch(t.Av){case Lu.jZ:return Ik(t.ly);case Lu.DD:return t.ly;case Lu.RZ:throw new g("HeadlessMediaBuffer - Cannot convert opaque SegmentData to Stream.")}}(t);await e.pipeThrough(new Wa(new jX)).pipeThrough(new Wa(this.Qni)).pipeTo(new CD(this.Fni),{preventClose:!0,preventAbort:!0})}async Uni(t,i){Vr(i);const e=function(t){return JSON.parse(Qa(t))}(await function(t,i){switch(t.Av){case Lu.jZ:return Promise.resolve(t.ly);case Lu.DD:return Ek(t.ly,i).then((t=>M(t)));case Lu.RZ:return Promise.reject(new g("HeadlessMediaBuffer - Cannot convert opaque SegmentData to Uint8Array."))}}(t,i));this.jni(e.startTime,e.duration)}Q0(){return Promise.resolve()}X$(t,i,e){return this.Pni((i=>this.zni(t,i)),e)}oq(){return this.B7}x0(){this.B7=!0}M0(){this.B7=!1}B0(t,i){this.FNt=this.FNt.YB(new Ri([t,i]))}rS(t,i,e){return this.Pni((e=>{Vr(e),this.QNt=this.QNt.VB(new Ri([t,i])),this.Co(new Os(In.CZ))}),e)}u0(t,i){return this.Pni((()=>{this.Yni=new Ri([t,i])}))}U0(t,i){this.FNt=this.FNt.VB(new Ri([t,i]))}jni(t,i){const e=this.Rni+t,s=new Ri([e,e+i]).Sn(this.Yni);this.QNt=this.QNt.YB(s),this.Co(new Os(In.CZ)),this.Gni()}Vni(){return this.Wni}Gni(){const t=this.QNt,i=t.U>0?t.jn(this.QNt.U-1):0;this.Wni!==i&&(this.Wni=i,this.Co(new Te(i)))}FZ(i){if(!t.dq(i))return!1;const e=bu(i.Nz);return this.BO===e.Av}GZ(t){return this.GO=t,this.BO=bu(t.Nz).Av,eo(this.BO)?this.Qni=new o6(t.Nz):this.Qni=void 0,Promise.resolve()}async Pni(t,i){if(this.Hni)throw new g("Attempted to start concurrent buffer mutation");const e=new Bd;e.w_(this.S0.f_),i&&e.w_(i);try{this.Hni=Promise.resolve(t(e.f_)),await this.Hni}finally{this.Hni=void 0}}h_(){this.Vo(),this.S0.g_()}static dq(t){switch(bu(t.Nz).Av){case"audio/mp4":case"video/mp4":case h6:case a6:return!0;default:return!1}}constructor(t,i){super(),this.Wni=0,this.B7=!1,this.QNt=Ri.oU(),this.FNt=Ri.oU(),this.fX=30,this.cX=30,this.Rni=0,this.Qni=void 0,this.Fni=new u6(this),this.Hni=void 0,this.Yni=new Ri([0,1/0]),this.S0=new Bd,this.GO=t,this.BO=bu(t.Nz).Av,eo(this.BO)&&(this.Qni=new o6(t.Nz)),this.j0=i}},c6=class t extends Mo{get I1(){return this.O1}get D1(){return this.j1}get O_(){return aC(this)}get R0(){var t,i,e,s;return(null!=(e=null==(t=this.O1)?void 0:t.R0)?e:Ri.oU()).YB(null!=(s=null==(i=this.j1)?void 0:i.R0)?s:Ri.oU())}get wd(){return this.GO}get ct(){return this.jx}get oq(){return(!this.O1||this.O1.oq())&&(!this.j1||this.j1.oq())}get Ig(){return this.U1.V0().Sn(new Ri([0,this.ct],[!0,!0]))}get j3(){return this.Xni}h_(){var t,i;return this.Vo(),null==(t=this.j1)||t.h_(),null==(i=this.O1)||i.h_(),this.O1=void 0,this.j1=void 0,this.jx=NaN,Promise.resolve()}P1(t){this.jx!==t&&(this.jx=t,this.Co(new Te(t)))}Vni(){let t=0;return this.O1&&(t=_.max(t,this.O1.Vni())),this.j1&&(t=_.max(t,this.j1.Vni())),t}Q1(t,i,e,s){this.U1=new Nr(t,i,Boolean(e),Boolean(s))}x0(){this.O1&&this.O1.x0(),this.j1&&this.j1.x0(),this.Zni()}M0(){this.O1&&this.O1.M0(),this.j1&&this.j1.M0()}FZ(i){if(!t.dq(i))return!1;const e=bo(i.F1,(t=>I(t.Nz,"audio"))),s=bo(i.F1,(t=>I(t.Nz,"video")));return!(this.O1&&e&&!this.O1.FZ(e))&&!(this.j1&&s&&!this.j1.FZ(s))}async GZ(t){this.GO=t;const i=bo(t.F1,(t=>I(t.Nz,"audio"))),e=bo(t.F1,(t=>I(t.Nz,"video")));this.O1?i?await this.O1.GZ(i):(this.O1.h_(),this.O1=void 0):i&&(this.O1=new bl(i,Jt.WA),this.O1.yn(Tf.Lv,this.Zni)),this.j1?e?await this.j1.GZ(e):(this.j1.h_(),this.j1=void 0):e&&(this.j1=new bl(e,Jt.VA),this.j1.yn(Tf.Lv,this.Zni));const s=this.Xni;0===t.Iz.length?this.Xni=void 0:s&&!t.Iz.some((t=>t.Qp===s))&&(this.Xni=t.Iz[0].Qp)}static dq(t){return t.F1.every((t=>bl.dq(t)))}constructor(t){var i;super(),this.O1=void 0,this.j1=void 0,this.jx=NaN,this.U1=new Nr(0,1/0),this.Xni=void 0,this.Zni=()=>{let t;t=this.oq?this.Vni():_.max(this.jx||0,this.Vni()),this.P1(t)},this.GO=t;const e=bo(t.F1,(t=>I(t.Nz,"audio"))),s=bo(t.F1,(t=>I(t.Nz,"video")));e&&(this.O1=new bl(e,Jt.WA),this.O1.yn(Tf.Lv,this.Zni)),s&&(this.j1=new bl(s,Jt.VA),this.j1.yn(Tf.Lv,this.Zni)),this.Xni=null==(i=t.Iz[0])?void 0:i.Qp}},l6=class{W4(t){return ra.A_(t,16)}Z4(t){ra.p_(t)}},d6=class extends Mo{get O_(){var t,i;return null!=(i=null==(t=this.yz)?void 0:t.O_)?i:Ri.oU()}get U_(){return this.e5?this.e5.U_:this.qni/1e3}get Iu(){return this.Wu}get ct(){var t,i;return this.e5?this.e5.ct:null!=(i=null==(t=this.yz)?void 0:t.ct)?i:NaN}get G_(){return this.e5?this.e5.G_:this.o2}get lt(){}get K_(){return!1}get Kni(){return this.yz}get og(){return this.e5?this.e5.og:this.uU}set og(t){this.e5?this.e5.og=t:this.uU!==t&&(this.uU=t,this.Co(new St(this.U_,this.Xx)))}get fg(){return this.e5?this.e5.fg:this.cU}get gg(){return this.e5?this.e5.gg:this.lU}set gg(t){this.lU!==t&&(this.Yn(),this.lU=t,this.Co(new Zs(this.U_,t)))}get Sg(){return this.h2}get Ig(){var t;return(null==(t=this.yz)?void 0:t.Ig)||Ri.oU()}get Eg(){return this.e5?this.e5.Eg:this.aU}get s2(){return this.e5?this.e5.s2:this.n2}get g2(){return!1}get Mz(){}get zg(){return this.e5?this.e5.zg:this.Xx}set zg(t){this.e5?this.e5.zg=t:this.Xx!==t&&(this.Xx=t,this.Co(new St(this.U_,t)))}get R_(){}get Ti(){return this.Wu._u}get pg(){let t=this.Uo;return!this.e5&&this.C0t&&(t=t.YB(new Ri([this.E0t,this.U_]))),t}get _5(){return this.EB}get ji(){return this.Wu.ku}get ya(){return this.dU}get U6(){return!0}get Hm(){return XL}rg(){return{HT:0,XT:0,ZT:0,qT:0,KT:0,JT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}dq(t){for(const i of t)if(i.Av===de.Sj&&c6.dq(i))return i}async h_(){this.Vo(),await this.tr(),this.oE.gn()}$n(t){if(t.Av===de.Sj){const i=new c6(t);this.Jni(i),this.yz=i,ra.A_((()=>{this.yz===i&&(this.Co(new tn),this.Yn())}),0);const e=new pQ(i);return e.int=this,Promise.resolve(e)}return Promise.reject(new g("Unsupported configuration"))}Hg(){this.e5?this.e5.Hg():this.$ni(),this.Yn()}$ni(){this.cU=!0,void 0!==this.tri&&(ra.g1(this.tri),this.tri=void 0),this.Co(new Ye(this.U_))}async Xg(){const t=this.k_($.Sm);this.e5?this.e5.Xg():this.iri(),await t}iri(){this.cU&&(this.Yn(),this.cU=!1,this.o2&&(this.qni=0),this.Co(new Rt(this.U_)),this.Yn(),void 0===this.tri&&(this.tri=ra.f1(this.eri,20)))}async tr(){void 0!==this.tri&&(ra.g1(this.tri),this.tri=void 0),this.yz&&(await this.yz.h_(),this.yz=void 0),this.Co(new Te(NaN)),this.qni=0,this.E0t=0,this.sri=-1/0,this.o2=!1,this.Uo=Ri.oU(),this.C0t=!1,this.n2=!1,this.Co(new ri(0,void 0)),this.aU&&(this.aU=!1,this.Co(new Ko(0))),this.cU||(this.Co(new Ye(0)),this.cU=!0),1!==this.lU&&(this.lU=1,this.Co(new Zs(0,1))),this.h2!==qo.BT&&(this.h2=qo.BT,this.Co(new Dr(0,qo.BT)))}JA(t,i,e){if(void 0===i&&(i=!1),void 0===e&&(e=!1),this.e5)return void this.e5.JA(t,i,e);this.Uo=this.pg;const s=this.yz?this.yz.Ig.zB(t):t;this.E0t=s,this.qni=1e3*s,this.e2=i,e&&!this.aU?(this.n2=!0,this.Co(new vC(s))):(this.n2=!1,this.aU=!0,this.Co(new Ur(s))),this.Yn()}be(){this.EB=!1}get nt(){return this.oE.nt}get Ol(){return this.mU}rE(t,i,e,s,n,r,o,h){return this.oE.rE(t,i,e,s,n,r,o,h)}Cz(){return!1}jz(){throw new g("Sideloaded native text tracks are not supported")}fE(t){this.oE.fE(t)}Pz(){this.oE.tr()}gz(){}ge(){this.EB=!0}F6(){}z6(){this.e5||(void 0!==this.tri&&(ra.g1(this.tri),this.tri=void 0),this.Uo=this.pg,this.e5=AC(this),this.e5.yn(mC,this.Ds))}B6(){if(!this.e5)return;const t=this.e5;this.e5=void 0,yC(this,t),t.h_(),this.Yn(),this.cU||void 0!==this.tri||(this.tri=ra.f1(this.eri,20))}get Cg(){return 0}get Rg(){return 0}get Qz(){return this.Lz}set Qz(t){this.Lz=t}get j3(){var t;return null==(t=this.yz)?void 0:t.j3}Yn(){var t,i;if(this.e5)return;const e=ra.m_(),s=S(this.nri)?0:e-this.nri;this.nri=e;let n=!1;var r;const o=null!=(r=null==(t=this.yz)?void 0:t.O_)?r:Ri.oU();var h;const a=null!=(h=null==(i=this.yz)?void 0:i.R0)?h:Ri.oU();this.cU||(this.qni=this.rri(s,o,a));const u=bh(o,a).PB().Jm(this.U_);var c;const l=1e3*_.min(null!=(c=null==u?void 0:u.jn(0))?c:0,this.ct);this.hri<l&&(this.hri=l,this.Co(new Gt(this.U_)));const d=this.ari(u,l);d!==this.h2&&(this.h2=d,this.Co(new Dr(this.U_,this.h2))),n=this.cri(n),this.T0t(),n=this.bX(n),!n&&this.C0t&&this.sri+250<e&&(n=!0,this.Co(new ri(this.U_,void 0))),n&&(this.sri=e)}rri(t,i,e){let s=this.qni,n=t*this.lU;const r=1e3*this.ct;for(;;){const t=e.Jm(s/1e3);if(void 0!==t&&i.gr(t.jn(0))&&(s=1e3*t.jn(0)),(this.aU||this.n2)&&this.e2){const t=s/1e3,e=cC(i,t,1);if(e!==t){s=1e3*e;break}}if(this.aU||this.n2)break;if(n<=0)break;const o=i.Jm(s/1e3);if(void 0===o)break;{const t=_.min(1e3*o.jn(0),r),i=_.min(n,t-s);if(!(i>0))break;s+=i,n-=i}}return s}ari(t,i){return this.yz?t?this.yz&&this.yz.oq&&i===1e3*this.yz.ct?this.qni===i?qo.UT:qo.FT:this.qni===i?qo.UT:qo.QT:qo.Xn:qo.BT}cri(t){let i=t;if(this.h2>=qo.UT){const t=this.aU,e=this.n2;this.aU=!1,this.n2=!1,i||!t&&!e||(i=!0,this.Co(new ri(this.U_,void 0))),t?this.Co(new Ko(this.U_)):e&&this.Co(new aj(this.U_))}return i}T0t(){const t=this.C0t,i=this.lri();!t&&i?(this.C0t=!0,this.Co(new $e(this.U_))):t&&!i&&(this.Uo=this.pg,this.C0t=!1)}lri(){return!this.Eg&&!(this.fg||this.G_||this.lt||this._2())}_2(){return this.Sg<qo.QT}bX(t){let i=t;return this.yz&&this.yz.oq&&this.U_===this.ct?this.o2||(this.o2=!0,i||(i=!0,this.Co(new ri(this.U_,void 0))),this.$ni(),this.Co(new pa(this.U_))):this.o2=!1,i}Jni(t){var i,e;null==(i=t.D1)||i.yn(In.CZ,this.dri),null==(e=t.I1)||e.yn(In.CZ,this.dri),t.yn(Tf.Lv,this.fri)}constructor(){super(),this.e5=void 0,this.Lz=void 0,this.qni=0,this.Wu=new pI,this.o2=!1,this.dU=new Et,this.hri=0,this.E0t=0,this.sri=-1/0,this.nri=NaN,this.yz=void 0,this.uU=!1,this.cU=!0,this.lU=1,this.Uo=Ri.oU(),this.C0t=!1,this.h2=qo.BT,this.aU=!1,this.e2=!1,this.n2=!1,this.mU=new Aj,this.tri=void 0,this.EB=!0,this.Xx=1,this.eri=()=>{this.Yn()},this.dri=()=>{this.Yn()},this.fri=()=>{this.e5||(this.Yn(),this.Co(new Te(this.yz.ct)))},this.oE=new Ch(this,new l6)}},f6=class{async _ri(t){this.aQt&&await this.aQt,this.gri.qBt||await this.gri.eUt(t),void 0===this.wri&&this.vri(),await this.gri.cUt(this.wri,t)}vri(){for(const t of this.gri.Tr.Kjt)0!==t.$jt.length&&(this.wri=t.$jt[0])}get nt(){return this.BGt.nt}gn(){var t;this.rit.fn(Tf.Vv,this.pri),null==(t=this.lQt)||t.g_(),this.gri.h_()}constructor(t,i,e,s){this.pri=()=>{this.aQt=this._ri(this.lQt.f_).catch(this.Ari)},this.Ari=t=>{0},this.rit=t;const n=new M0,r=new d6;this.gri=new Gc(e,n,!1,i,void 0),this.BGt=new AJ(this.gri,r),this.lQt=new Bd,this.lQt.w_(s),this.rit.yn(Tf.Vv,this.pri)}};function _6(t){return t&&t.integration===Au.THEOADS}function g6(t){const i=h.createElement("div"),e=h.createElement("div");return function(t,i){let e;for(;Ks(e=t.firstChild);)i.appendChild(e)}(t,i),ab(t,"theo-ads-sgai-container"),ab(i,"theo-ads-sgai-content-player"),ab(e,"theo-ads-sgai-ad-player"),t.appendChild(i),t.appendChild(e),{contentElement:i,adElement:e}}function w6(t){const i=t.style;i.display="flex",i.backgroundColor="transparent",i.backgroundRepeat="no-repeat",i.backgroundAttachment="scroll",i.border="0 solid transparent",i.borderWidth="0px",i.flex="0"}function v6(t){const i=t.style;i.display="",i.backgroundColor="",i.backgroundRepeat="",i.backgroundAttachment="",i.border="",i.borderWidth="",i.flex="",i.transform="",i.transition="",i.backgroundImage="",i.backgroundSize="",i.backgroundPosition=""}nu.lL.GU(new class{get d2t(){return F.git}YU(t){return _6(t)}f2t(t,i,e){}W4(t,i,e,s){}hY(t){const i={integration:Au.THEOADS,adTagParameters:Vu(t.adTagParameters)?t.adTagParameters:{},useId3:Boolean(t.useId3)};return Sn(t.sources)&&(i.sources=wo(t.sources)),Sn(t.networkCode)&&(i.networkCode=wo(t.networkCode)),Sn(t.customAssetKey)&&(i.customAssetKey=wo(t.customAssetKey)),Sn(t.backdropDoubleBox)&&(i.backdropDoubleBox=wo(t.backdropDoubleBox)),Sn(t.backdropLShape)&&(i.backdropLShape=wo(t.backdropLShape)),Sn(t.overrideLayout)&&(i.overrideLayout=function(t){switch(t){case"single":case"l-shape":case"double":case"single-if-mobile":return t;default:return}}(t.overrideLayout)),Sn(t.overrideAdSrc)&&(i.overrideAdSrc=wo(t.overrideAdSrc)),i}});var m6=class{get yri(){return this.Mri}bri(t){if(!Ai(this.Tri,t)){this.Tri.push(t);for(const i of t.Rw)this.Sri(i);t.yn(rc.hw,this.Hn),t.yn(rc.uw,this.qn)}}Nri(t){if(Ai(this.Tri,t)){jn(this.Tri,t),t.fn(rc.hw,this.Hn),t.fn(rc.uw,this.qn);for(const i of t.Rw)this.Iri(i)}}Sri(t){!this.Dri&&function(t){return t.zt===Qe.ZA&&t.Av===O.DATE_RANGE}(t)&&this.Eri!==t?this.kri(t):this.Dri&&function(t){return t.zt===Qe.ZA&&t.Av===O.ID3}(t)&&this.Lri!==t&&this.xri(t)}Iri(t){this.Eri===t?this.kri(void 0):this.Lri===t&&this.xri(void 0)}kri(t){const i=this.Eri;if(void 0!==i){if(i.L)for(const t of i.L.Rw)this.Cri(t);i.fn(ct.lw,this.Ori),i.fn(ct.gw,this.jri),i.fn(ct.mw,this.Rri),i.fn(ct.fw,this.Ini),i._v=yi.vv}if(this.Eri=t,void 0!==t){if(t.L)for(const i of t.L.Rw)this.Pri(i);t.yn(ct.lw,this.Ori),t.yn(ct.gw,this.jri),t.yn(ct.mw,this.Rri),t.yn(ct.fw,this.Ini),t._v=yi.vv}}xri(t){const i=this.Lri;if(void 0!==i){if(i.L)for(const t of i.L.Rw)this.Cri(t);i.fn(ct.lw,this.zri),i.fn(ct.mw,this.Rri),i.fn(ct.fw,this.Ini),i._v=yi.vv}if(this.Lri=t,void 0!==t){if(t.L)for(const i of t.L.Rw)this.Bri(i);t.yn(ct.lw,this.zri),t.yn(ct.mw,this.Rri),t.yn(ct.fw,this.Ini),t._v=yi.vv}}Pri(t){if("com.theoplayer.theoads.interstitial"!==t.mRt)return;if(!t.yRt["X-ASSET-URI"])return void 0;const i=t.yRt["X-RESUME-OFFSET"],e=new Z5({o:t.o,MS:t.MS,Jpt:t.yRt["X-ASSET-URI"],rni:this.Uri||G5[t.yRt["X-COM-THEOPLAYER-THEOADS-LAYOUT"]]||G5.SINGLE,oni:t.yRt["X-COM-THEOPLAYER-THEOADS-BACKDROP"],bS:isFinite(t.bS)?t.bS:void 0,ct:t.ct,ARt:t.ARt,sni:void 0!==i?Number(i):void 0});this.Qri(e,t)}Bri(t){const i=t.O;if(!function(t){return"GEO"===t.id||"GEOB"===t.id}(i)||!function(t){return"Anvatos"===t.description&&"application/json"===t.mimeType}(i))return;const e=qg(new DataView(i.data),new Bi),s=new vB(e),n=s.get("type");if("cue"===n){let i=Number(s.get("duration"))/1e3||void 0;const e=new vB(s.get("payload")),n=Number(e.get("dur"))||void 0,r=Number(e.get("s_bd"))||void 0;if(void 0!==n?i=n:void 0!==r&&(i=r/10),!i)return void 0;const o="theo-ads://dai.break/?d="+i,h=new Z5({o:t.o,MS:t.MS,Jpt:o,rni:this.Uri||G5.SINGLE,ARt:i});this.Qri(h,t)}else if("cue_end"===n){const i=this.Fri;i&&i.Yn({ct:t.MS-i.MS})}}Yri(t){this.Gri.get(t.Xw)&&this.JOt.Vri(t.MS)}Qri(t,i){this.Mri.push(t),this.Gri.set(i.Xw,t),this.Fri=t,this.JOt.Qri(t)}Wri(t){const i=this.Gri.get(t.Xw);if(void 0===i)return;const e=t.yRt["X-RESUME-OFFSET"];i.Yn({ct:t.ct,bS:isFinite(t.bS)?t.bS:void 0,sni:void 0!==e?Number(e):void 0})}Cri(t){this.Hri(t)}Hri(t){const i=this.Gri.get(t.Xw);void 0!==i&&(jn(this.Mri,i),this.Gri.delete(t.Xw),this.JOt.Xri(i))}gn(){this.Fri=void 0,this.kri(void 0),this.xri(void 0);for(const t of this.Tri.slice())this.Nri(t);To(this.Tri),To(this.Mri),this.Gri.clear()}constructor(t){this.Dri=!1,this.Mri=[],this.Gri=Gs(),this.Tri=[],this.Hn=t=>{this.Sri(t.Lt)},this.qn=t=>{this.Iri(t.Lt)},this.Ori=t=>{this.Pri(t.yS)},this.zri=t=>{this.Bri(t.yS)},this.Rri=t=>{this.Yri(t.yS)},this.Ini=t=>{this.Cri(t.yS)},this.jri=t=>{this.Wri(t.yS)},this.JOt=t}};var p6=class extends ln{w$t(){var t;return null==(t=this.Zri)?void 0:t.getAdSystem()}Nit(){var t;return null!=(t=this.Xa)?t:this.fa()}p$t(){return this.NXt.qri.Jpt}fa(){return a4(this)}get o(){var t;return null==(t=this.Zri)?void 0:t.getAdId()}get duration(){var t;return null==(t=this.Zri)?void 0:t.getDuration()}get sZt(){var t,i;return null==(i=this.Zri)||null==(t=i.Rit)?void 0:t.clickThroughUrl}get IXt(){var t;return null==(t=this.Zri)?void 0:t.getCreativeId()}get CZt(){var t;return null==(t=this.Zri)?void 0:t.getSkipTimeOffset()}get vKt(){return F.git}constructor(t,i){super(i,function(t){return t===G5.LSHAPE_CONTENT?Hr.Cqt:Hr.xqt}(i.qri.rni)),this.Zri=t,this.NXt=i,this.J2t=void 0===t}};var A6=class extends hr{Kri(t){this.Ic.push(t)}get pg(){return this.Jri.pg}get vKt(){return F.git}get $Jt(){var t;return null!=(t=this.Jri.ct)?t:-1}get cPt(){return this.Jri.MS}get DJt(){}get qri(){return this.Jri}constructor(t){var i;super(t.MS),this.Jri=t,this.t$t=null!=(i=this.Jri.ct)?i:-1}},y6=class{get A2t(){return this.P4t}get E2t(){return void 0!==this.I$t}get w2t(){return F.git}get Sit(){return this.v$t?[this.v$t]:[]}get Iit(){var t;return null!=(t=this.I$t)?t:null}get Dit(){return Pe(this.D$t,(t=>{const i=t.Oc;if(t===this.I$t&&void 0!==this.v$t){const t=i.indexOf(this.v$t);if(t>=0)return i.slice(t+1)}return t.pg?[]:i}))}get Eit(){return this.D$t.filter((t=>t===this.I$t||!t.pg))}Ny(){}Yit(t){}Qri(t){const i=new A6(t);this.D$t.push(i)}Xri(t){const i=this.D4t(t);jn(this.D$t,i)}Sni(t){switch(this.I$t&&(this.I$t.t$t=this.x4t.Td()-this.x4t.Q_()),t.type){case google.ima.dai.api.StreamEvent.Type.ERROR:this.P4t.Co(new ga(_o.GENERAL));break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED:{const t=this.$ri.Q_();let i=bo(this.D$t,(i=>{const e=i.cPt,s=e+i.t$t;return e<t&&t<s}));i||(i=this.D$t[0]),this.I$t=i,this.P4t.Co(new PP(this.I$t)),this.toi=ra.A_(this.ioi,250);break}case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:ra.p_(this.toi);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:this.I$t.t$t>1&&this.ioi();break;case google.ima.dai.api.StreamEvent.Type.STARTED:{const i=t.getAd(),e=new p6(i,this.I$t);this.I$t.Kri(e),this.v$t=e,this.P4t.Co(new Mh(this.v$t,this.$ri.Q_()));break}case google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE:this.P4t.Co(new p4(this.v$t,this.$ri.Q_()));break;case google.ima.dai.api.StreamEvent.Type.MIDPOINT:this.P4t.Co(new y4(this.v$t,this.$ri.Q_()));break;case google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE:this.P4t.Co(new b4(this.v$t,this.$ri.Q_()));break;case google.ima.dai.api.StreamEvent.Type.COMPLETE:this.P4t.Co(new Qc(this.v$t,this.$ri.Q_())),this.v$t=void 0;break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED:this.eoi()}}D4t(t){return bo(this.D$t,(i=>i.qri===t))}gn(){return void 0!==this.I$t&&(this.I$t=void 0),this.v$t=void 0,To(this.D$t),Promise.resolve(void 0)}constructor(t,i){this.P4t=new Jc,this.D$t=[],this.I$t=void 0,this.v$t=void 0,this.ioi=()=>{const t=new p6(void 0,this.I$t);this.I$t.Kri(t),this.v$t=t,this.P4t.Co(new Mh(this.v$t,this.$ri.Q_())),this.x4t.yn(Tf.Ov,this.eoi)},this.eoi=()=>{this.x4t.fn(Tf.Ov,this.eoi),this.I$t&&(this.v$t&&(this.P4t.Co(new Qc(this.v$t,this.$ri.Q_())),this.v$t=void 0),this.P4t.Co(new dc(this.I$t)),this.I$t=void 0)},this.$ri=t,this.x4t=i}},M6=class{soi(t){this.theoAdsPlayer.noi(t)}get va(){return function(t){return{replaceAdTagParameters(i){t.soi(i)}}}(this)}constructor(t){this.theoAdsPlayer=t}},b6=class extends r4{get xit(){return this.roi}W4(t,i,e){var s;null==(s=this.rit.Oc)||s.W4(t,i,e)}constructor(t,i,e){super(e),this.roi=new M6(t),this.rit=i;for(const t of nu.lL.UU){const e=i.Oc.N2t.l2t(t.d2t);void 0!==e&&this.N2t._2t(e)}}},T6=class extends Kc{async ga(t,i){var e,s,n;this.ooi(),Vr(i),await super.ga(t,i);const r=null==(e=this.rit.bt)?void 0:e.src;if(void 0===r||void 0===t||void 0===t.ads)return;const o=bo(t.ads,_6);void 0!==o&&(this.hoi(),this.aoi(),this.uoi=o,this.coi=o.backdropDoubleBox,this.loi=o.backdropLShape,this.doi.Uri=function(t){switch(t){case"single":return G5.SINGLE;case"l-shape":return G5.LSHAPE_AD;case"double":return G5.DOUBLE;case"single-if-mobile":return Po.Qs?G5.SINGLE:void 0;default:return}}(o.overrideLayout),this.foi=o.networkCode,this._oi=o.customAssetKey,this.goi=o.overrideAdSrc,void 0!==o.networkCode&&void 0!==o.customAssetKey&&this.woi.GZ(o.networkCode,o.customAssetKey,this.voi).catch((t=>{0})),this.moi(),null==(s=this.Oc)||s.yn("Uit",this.poi),null==(n=this.Oc)||n.yn("Qit",this.Aoi),this.doi.Dri=o.useId3,this.doi.bri(this.rit.nt),void 0!==o.sources&&this.yoi(o.sources+r),this.Moi(new W5(this.rit,this.x4t)))}yoi(t){this.boi=new Bd,this.Toi=new f6(this.rit,t,this.rit.Hj,this.boi.f_),this.doi.bri(this.Toi.nt)}ooi(){var t;void 0!==this.Toi&&(this.doi.Nri(this.Toi.nt),null==(t=this.boi)||t.g_(),this.boi=void 0,this.Toi.gn(),this.Toi=void 0)}hoi(){this.Soi||(this.Soi=!0,gb(this.Noi),gb(this.Ioi),w6(this.Us),w6(this.Noi),w6(this.Ioi))}Doi(){this.Soi&&(this.Soi=!1,v6(this.Us),v6(this.Noi),v6(this.Ioi),_b(this.Noi),_b(this.Ioi))}Wg(){this.rit.Wg(),this.x4t.Wg()}hit(){return this.rit.Qtt}Y_(){return this.Us}get Oc(){return this.Eoi}get voi(){var t,i,e;return null!=(e=null!=(i=this.koi)?i:null==(t=this.uoi)?void 0:t.adTagParameters)?e:{}}noi(t){this.koi=t}Moi(t){var i;void 0!==this.Loi&&(this.Loi.ar(this.we,this.Noi,this.Ioi),this.Loi.gn());const e=null!=(i=this.Loi)?i:this,s=null!=t?t:this.rit;Y5(e,s),null==t||t.ur(this.we,this.Noi,this.Ioi,e),this.Loi=t,this.WT(s)}moi(){this.rit.yn(Tf.fm,this.xoi),this.rit.yn(Tf.im,this.WQ),this.rit.yn(Tf.Zv,this.iE)}Coi(){this.rit.fn(Tf.fm,this.xoi),this.rit.fn(Tf.im,this.WQ),this.rit.fn(Tf.Zv,this.iE)}Ooi(){this.x4t.yn(Tf.Zv,this.joi),this.x4t.yn(Tf.fm,this.Roi),this.x4t.yn(Tf.Ov,this.Poi),this.rit.yn(Tf.Vv,this.pri)}zoi(){this.x4t.fn(Tf.Zv,this.joi),this.x4t.fn(Tf.fm,this.Roi),this.x4t.fn(Tf.Ov,this.Poi),this.rit.fn(Tf.Vv,this.pri)}Boi(){void 0!==this.Uoi&&this.x4t.Q_()>=this.Uoi.ct&&this.Q1t()}Vri(t){this.Qoi(t),this.Foi(t),this.Yoi(t)}Qoi(t){let i;for(const e of this.doi.yri){if(e.pg)continue;const s=e.ini;void 0!==s&&t>=s?e.pg=!0:void 0!==i&&i.MS<e.MS||(i=e)}this.Uoi!==i&&(this.Uoi=i,this.Goi())}Goi(){var t;null==(t=this.Voi)||t.g_(),this.Woi=void 0,this.Hoi=void 0}Foi(t){if(void 0===this.Uoi||void 0!==this.Woi)return;let i=!1;const e=Ri.xn(this.rit.j_()).Jm(t);void 0!==e&&(i=e.jn(0)>=this.Uoi.MS);const s=this.Uoi.ini,n=t>=this.Uoi.MS&&(void 0===s||t<s);(i||n)&&(this.Voi=new Bd,this.Woi=this.Xoi(this.Uoi,t,this.Voi.f_).catch((t=>{0})))}async Xoi(t,i,e){if(this.goi||!I(t.Jpt,"theo-ads://dai.break")){var s;const i=null!=(s=this.goi)?s:t.Jpt;return void await this.woi.pni(i,e)}const n=ra.Dh(t.Jpt),r=n.searchParams.get("n"),o=n.searchParams.get("k"),h=ol({},this.voi);h.cust_params=function(t,i){const e="theoads_slot="+function(t){switch(t){case G5.DOUBLE:return"double";case G5.SINGLE:return"single";case G5.LSHAPE_AD:case G5.LSHAPE_CONTENT:return"l-shape"}}(i);if(!t)return e;if(-1===t.indexOf("theoads_slot="))return e.concat("&").concat(t);return t.replace(/theoads_slot=(.*)(&?)/,e)}(h.cust_params,t.rni),r&&r!==this.foi&&o&&o!==this._oi?(this.foi=r,this._oi=o,await this.woi.GZ(r,o,h),Vr(e)):this.woi.updateAdTagParameters(h);const a=Number(n.searchParams.get("d")),u=_.min(a,this.Uoi.ini-i);await this.woi.yni(u,e)}Yoi(t){if(void 0===this.Uoi||void 0!==this.Hoi)return;const i=this.Uoi.ini;var e;t>=this.Uoi.MS&&(void 0===i||t<i)&&(this.Hoi=null==(e=this.Woi)?void 0:e.then((()=>this.Zoi())))}Zoi(){if(void 0===this.Uoi)return;const t=this.Uoi.rni,i=this.qoi(t,this.Uoi.oni);this.Moi(i),this.Coi(),this.Ooi(),this.Hoi=void 0}qoi(t,i){switch(t){case G5.DOUBLE:return new t6(this.rit,this.x4t,null!=i?i:this.coi);case G5.LSHAPE_AD:return new s6(this.rit,this.x4t,null!=i?i:this.loi);case G5.LSHAPE_CONTENT:return new e6(this.rit,this.x4t,null!=i?i:this.loi);case G5.SINGLE:default:return new H5(this.rit,this.x4t)}}Koi(){var t,i;const e=null==(t=this.Uoi)?void 0:t.ini;if(void 0===e||(null==(i=this.Loi)?void 0:i.qsi())||Jn(this.rit.Q_(),e,.001))return;const s=Ri.xn(this.x4t.j_()),n=this.x4t.Dg();s.PB().gr(n.end(n.length-1))&&this.rit.F_(e,{lPt:!0})}Q1t(){void 0!==this.Uoi&&(this.rit.F_(this.Uoi.ini,{lPt:!0}),this.Moi(new W5(this.rit,this.x4t)),this.zoi(),this.moi(),this.Uoi=void 0)}Qri(t){this.bni.Qri(t),this.Qoi(this.rit.Q_())}Xri(t){this.bni.Xri(t)}W_(){var t;return null!=(t=this.bU)?t:super.W_()}X_(){var t;return null!=(t=this.vz)?t:super.X_()}rB(t){void 0===this.X_()&&(this.vz=t,this.bU=ia(t),this.Co(new as(t)))}async Zg(){var t,i;this.foi=void 0,this._oi=void 0,this.goi=void 0,this.vz=void 0,this.bU=void 0,this.Uoi=void 0,this.Joi=!0,this.doi.Nri(this.rit.nt),this.Coi(),this.zoi(),null==(t=this.Oc)||t.fn("Uit",this.poi),null==(i=this.Oc)||i.fn("Qit",this.Aoi),this.ooi(),this.Moi(void 0),await this.x4t.Zg(),this.Goi(),await this.woi.tr(),this.Doi(),await super.Zg()}async gn(){await this.Zg().catch(Br),this.Moi(void 0),this.doi.gn(),await this.woi.gn(),await this.x4t.gn(),await super.gn()}nw(t){if(void 0!==this.Loi)switch(t.type){case $.Sm:if(!this.Joi)return!0;this.Joi=!1;break;case Tf.jh:case $.Tm:this.Joi=!0}return super.nw(t)}constructor(t){super(t),this.vz=void 0,this.bU=void 0,this.Joi=!0,this.Soi=!1,this.poi=t=>{const i=t.Rit.Nit().clickThrough;void 0!==i&&""!==i&&(this.P0t=new Ho(this.we),this.P0t.V$t=i,this.P0t.yn("clickstart",this.z0t))},this.z0t=()=>{this.Hg()},this.Aoi=()=>{this.P0t&&(this.P0t.h_(),this.P0t=void 0)},this.xoi=t=>{this.Vri(t.currentTime)},this.WQ=t=>{this.Vri(t.currentTime)},this.iE=t=>{this.Foi(t.currentTime)},this.joi=t=>{this.Koi()},this.Roi=t=>{this.Boi()},this.pri=t=>{this.Koi()},this.Poi=t=>{this.Uoi.pg=!0,this.Q1t()},this.aoi=async()=>{try{await this.Jtt.OY([xN.THEOADS])}catch(t){await this.Zg().catch(Br),this.rB(M_(t,qa.LICENSE_INVALID_FEATURE))}},this.Us=t.we;const{contentElement:i,adElement:e}=g6(this.Us);this.Noi=i,this.Ioi=e,_b(this.Noi),_b(this.Ioi),this.rit=t,this.x4t=new N4(new wP(this.Ioi,t.wd,new VN),nu.lL),this.bni=new y6(this,this.x4t),this.woi=new J5(this.x4t,this.bni),this.doi=new m6(this),this.Eoi=new b6(this,t,t),this.Eoi.Git(this.bni)}},S6=class extends sl{ga(t,i){var e;return void 0!==bo(null!=(e=null==t?void 0:t.ads)?e:[],_6)?Promise.reject(new ao(qa.CONFIGURATION_ERROR,"THEOads must be enabled in the player configuration.")):super.ga(t,i)}};AP((t=>t.wd.ads.theoads?new T6(t):new S6(t)),st.git);var N6=class extends Mo{get va(){return this.Xa||(this.Xa=function(t){return{get casting(){return t.FX},get state(){return t.Wdt},start(){t.Kg()},stop(){t.Jg()},addEventListener(i,e){const s=Za(i,wo);t.yn(s,e)},removeEventListener(i,e){const s=Za(i,wo);t.fn(s,e)}}}(this)),this.Xa}constructor(...t){super(...t),this.Xa=void 0}},I6=class extends N6{get FX(){return this.Wdt===si.CONNECTED}get Wdt(){return this.ja}$oi(){this.thi(),this._vt.yn(Tf.lo,this.ihi),this.Ta(si.AVAILABLE)}thi(){this.Qo&&this.Qo.fn(Tf.Mv,this.handleAirplayChangedEvent),this.ehi?this.Qo=this.KH:this.Qo=this.shi,this.Qo.yn(Tf.Mv,this.handleAirplayChangedEvent)}get ehi(){return this.KH.qg()}async nhi(){if(this.Qo){if(this.ehi){if(!this.Qo.fg){const t=new Promise((t=>u(t,800))),i=this.Qo.k_(Tf.Sh,this.rhi.f_);await Promise.race([i,t])}this.Qo.Xg()}else{this.ohi=this.KH.U_,this.hhi=this.KH.R_,this.shi.yn(Tf.fm,this.handleAirplayPlayerTimeUpdate),this.ahi=this.KH.Uw,this.KH.Uw=this.shi,this.ahi.Hg(),this.ahi.be(),this.shi.ge(),this.shi.og=this.ahi.og,this.shi.gg=this.ahi.gg,this.shi.zg=this.ahi.zg;const t=this.shi.k_(Tf.$v);this.shi.U_=this.ahi.U_,await t,this.shi.Xg(),this.shi.og=this.ahi.og,this.shi.gg=this.ahi.gg,this.shi.zg=this.ahi.zg}this.Ta(si.CONNECTED)}}uhi(){if(this.ahi){this.shi.fn(Tf.fm,this.handleAirplayPlayerTimeUpdate),this.ahi.og=this.shi.og,this.ahi.gg=this.shi.gg,this.ahi.zg=this.shi.zg;Po.zk&&!Po.Ga&&this.KH.ct===1/0?this.hhi?this.ahi.R_=this.hhi:this.ahi.U_=1/0:this.ahi.U_=this.ohi,this.hhi=void 0,this.ohi=void 0,this.ahi.ge(),this.shi.be(),this.shi.fg||this.ahi.Xg(),this.KH.Uw=this.ahi,this.shi.tr(),this.ahi=void 0}else this.Qo&&(this.Qo.U_=this.Qo.U_+1e-4);this.Ta(si.AVAILABLE)}preloadPlayer(t){if(Vr(t),this.Qo.Sg<qo.Xn){const i=this.Qo.k_($.Mm,t);return this.Qo.yg=ut.ZA,i}return Promise.resolve()}Ta(t){t!==this.ja&&(this.ja=t,this.Co(new W2(this.ja)))}Kg(){this._vt.Wg(),this.rhi.g_(),this.rhi=new Bd,this.ehi?$r(this.lhi(this.rhi.f_)):$r(this.dhi(this.rhi.f_))}async lhi(t){await this.preloadPlayer(t),this.KH.Kg()}async dhi(t){try{await this.shi.tr();const i=this.KH.Wa();if(void 0===i)throw new g("Not possible to start Airplay without a source");await this.shi.ga(i,t);const e=this.shi.k_($.Sm,t);this.shi.Xg(),await Vd(e,3e3),this.shi.Hg(),Vr(t),this.shi.Kg()}catch(t){if(be(t))return;0}}Jg(){this.Qo.Jg()}gn(){var t;this.Vo(),this._vt.fn(Tf.lo,this.ihi),this.rhi.g_(),this.KH.iS(this.shi),null==(t=this.shi)||t.gn()}constructor(t,i,e){super(),this.ja=si.UNAVAILABLE,this.rhi=new Bd,this.ihi=()=>{var t;const i=null==(t=this.KH.Wa())?void 0:t.sources.filter(Kn);(null==i?void 0:i.some(uS))?this.Ta(si.AVAILABLE):this.Ta(si.UNAVAILABLE)},this.handleAirplayChangedEvent=()=>{this.Qo&&this.Qo.K_?this.nhi():this.Wdt===si.CONNECTED&&this.uhi()},this.handleAirplayPlayerTimeUpdate=t=>{this.ohi=t.currentTime,this.hhi=this.KH.R_},this._vt=t,this.KH=i,this.shi=e,this.shi.be(),i.tS(e),this.$oi()}},D6=class extends N6{get FX(){return!1}get Wdt(){return si.UNAVAILABLE}Kg(){}Jg(){}},E6=class extends B{iw(){this.fhi.iw()}get ht(){return this.fhi.ht}get O_(){return this.fhi.O_}get bt(){return this.MB}get U_(){return this.fhi.U_}set U_(t){this.F_(t)}F_(t,i){this.fhi.F_(t,i)}get R_(){return this.fhi.R_}get ct(){return this.fhi.ct}get we(){return this.Us}get G_(){return this.fhi.G_}get lt(){return this.fhi.lt}get H_(){return this.fhi.H_}get Z_(){return this.fhi.Z_}get K_(){return this.fhi.K_}get Yg(){return this.fhi.Yg}get Qg(){return this.fhi.Qg}get eg(){return this.fhi.eg}get og(){return this.fhi.og}set og(t){this.fhi.og=t}get cg(){return this.fhi.cg}get fg(){return this.fhi.fg}get gg(){return this.fhi.gg}set gg(t){this.fhi.gg=t}get pg(){return this.fhi.pg}get yg(){return this.fhi.yg}set yg(t){this.fhi.yg=t}get Sg(){return this.fhi.Sg}get Ig(){return this.fhi.Ig}get Eg(){return this.fhi.Eg}qg(){return this.fhi.qg()}Kg(){this.fhi.Kg()}Jg(){this.fhi.Jg()}get nt(){return this.fhi.nt}get Cg(){return this.fhi.Cg}get Rg(){return this.fhi.Rg}get rt(){return this.fhi.rt}get zg(){return this.fhi.zg}set zg(t){this.fhi.zg=t}Xg(){$r(this.fhi.Xg())}Hg(){this.fhi.Hg()}async Zg(){}Wa(){return this.bc}async ga(t,i){let e;if(Vr(i),this.bc=t,Yh(t.sources))e=Mw({src:""});else{const i=t.sources.filter(Kn);for(const t of i)if(uS(t)){e=t;break}}if(!e)throw new g("Unsupported source.");await this.fhi.ga(e,t,i),this.kB(e)}kB(t){this.MB!==t&&(this.MB=t,this.Co(new bn(t)))}Vg(){return this.fhi.Vg()}C_(){return[]}Wg(){this._hi._U()}ur(t){av(this,t)}ar(){}ew(t){return!1}$g(){this.fhi.$g()}async tr(){this.MB=void 0,this.bc=void 0,await this.fhi.tr()}ge(){this.fhi.ge()}be(){this.fhi.be()}Gg(){return this.fhi.Gg()}async gn(){this.Vo(),this._hi.gn(),await this.fhi.gn(),this.YT.gn(),this.VT.gn(),this.Dl.gn()}constructor(t,i,e,s,n,r,o){super(),this.MB=void 0,this.bc=void 0,this.YT=new ul,this.VT=new ul,this.Dl=new Sf,this.Us=t,this._hi=new wc(r,o,1,[Jt.VA]),this._hi.yU(t),this.fhi=new aS(t,this._hi,i,e,s,n),this.fhi.T_(this.Ds),this.YT.Uw=this.fhi.ht,this.VT.Uw=this.fhi.rt,this.Dl.Uw=this.fhi.nt}},k6=class extends sl{async gn(){this.ghi.gn(),await super.gn()}constructor(t){super(t);const i=new E6(this.Ytt.we,this.Hj,this.wd,this.Qtt,this.Qg,this.Htt,this.Ol);this.ghi=new I6(this,this.Ytt,i),this.YF.HX(this.ghi),this.yn(Tf.Dv,(()=>{this.ghi.thi()}))}};AP((t=>ra.Ys.jet?new k6(t):(t.YF.HX(new D6),t)),st.wit);var L6="VPAID";function x6(t){return"spotx"===t.integration}nu.lL.GU(new class t{get d2t(){return this.whi.d2t}YU(t){return x6(t)}f2t(i,e,s){return s.ads||(s.ads=Jw({})),s.ads.vpaidMode=s.ads.vpaidMode||t.vhi(),this.whi.f2t(i,e,s)}W4(i,e,s,n){!function(t){if(!x6(t))throw new g("Unknown ad integration: "+t.integration)}(i);const r=t.mhi(i,s.we);this.whi.W4(r,e,s,n)}hY(t){const i=Ca(t);if(!S(i.id))return i.queryParameters||(i.queryParameters={}),i.custom&&(i.queryParameters.custom?Ut('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(i.queryParameters.custom=i.custom,delete i.custom)),i.app&&(i.queryParameters.app?Ut('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(i.queryParameters.app=i.app,delete i.app)),i.device&&(i.queryParameters.device?Ut('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(i.queryParameters.device=i.device,delete i.device)),i.user&&(i.queryParameters.user?Ut('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(i.queryParameters.user=i.user,delete i.user)),i.ipAddress&&(i.queryParameters.ip_addr?Ut('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(i.queryParameters.ip_addr=i.ipAddress,delete i.ipAddress)),i.maximumAdDuration&&(i.queryParameters.VMaxd?Ut('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(i.queryParameters.VMaxd=i.maximumAdDuration,delete i.maximumAdDuration)),i}static mhi(i,e){return{integration:Au.SPOTX,sources:{src:t.phi(i,Ua.location.href,e.offsetWidth,e.offsetHeight,Po.sL)}}}static phi(i,e,s,n,r){if(i.sources)return i.sources;let o=n,h=s;r&&0===h&&(h=320,o=180);const a={custom_skin:1,player_width:h,player_height:o};i.cacheBuster&&(a.cb=_.random()),t.Ahi(e)&&(a.content_page_url=e);const u=ol({},a,i.queryParameters);return u[L6]||u.VPI||(u[L6]="js"),"https://search.spotxchange.com/vast/2.0/"+i.id+"?"+t.yhi(u)}static Ahi(t){return I(t,"http://")||I(t,"https://")}static yhi(t){return Q1(t)}static vhi(){return Po.Sk?P.ENABLED:P.INSECURE}constructor(){this.whi=new h3}});var Fi=void 0!==s?s:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},C6=function(){return/Android/i.test(Il.userAgent)||/iPhone|iPad|iPod/i.test(Il.userAgent)},O6=function(t,i){for(var e=0,s=t.length;e<s;e++)i[e]=t[e]},j6=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},R6=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),P6=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in w(t))return function(t,i){var e=[],s=!0,n=!1,r=void 0;try{for(var o,h=t[Symbol.iterator]();!(s=(o=h.next()).done)&&(e.push(o.value),!i||e.length!==i);s=!0);}catch(t){n=!0,r=t}finally{try{!s&&h.return&&h.return()}finally{if(n)throw r}}return e}(t,i);throw new b("Invalid attempt to destructure non-iterable instance")},z6=function(t,i,e){return t+(i-t)*e},Qt=function(){var t=/iPad|iPhone|iPod/.test(Il.platform);return function(){return t}}(),B6=function(){var t=-1!==Il.userAgent.indexOf("Version")&&-1!==Il.userAgent.indexOf("Android")&&-1!==Il.userAgent.indexOf("Chrome");return function(){return t}}(),U6=(function(){var t=/^((?!chrome|android).)*safari/i.test(Il.userAgent)}(),function(){var t=-1!==Il.userAgent.indexOf("Firefox")&&-1!==Il.userAgent.indexOf("Android");return function(){return t}}()),Q6=function(){var t=Il.userAgent.match(/.*Chrome\/([0-9]+)/),i=t?x(t[1],10):null;return function(){return i}}(),F6=function(){var t=!1;if(65===Q6()){var i=Il.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(i){var e=i[1].split("."),s=P6(e,4),n=(s[0],s[1],s[2]),r=s[3];t=3325===x(n,10)&&x(r,10)<148}}return function(){return t}}(),Y6=function(){var t=-1!==Il.userAgent.indexOf("R7 Build");return function(){return t}}(),G6=function(){var t=90==s.orientation||-90==s.orientation;return Y6()?!t:t},V6=function(){return _.max(s.screen.width,s.screen.height)*s.devicePixelRatio},W6=function(){return _.min(s.screen.width,s.screen.height)*s.devicePixelRatio},H6=function(){if(h.exitFullscreen)h.exitFullscreen();else if(h.webkitExitFullscreen)h.webkitExitFullscreen();else if(h.mozCancelFullScreen)h.mozCancelFullScreen();else{if(!h.msExitFullscreen)return!1;h.msExitFullscreen()}return!0},X6=function(t,i,e,s){var n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,i),t.compileShader(n);var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e),t.compileShader(r);var o=t.createProgram();for(var h in t.attachShader(o,n),t.attachShader(o,r),s)t.bindAttribLocation(o,s[h],h);return t.linkProgram(o),t.deleteShader(n),t.deleteShader(r),o},Z6=function(t,i){for(var e={},s=t.getProgramParameter(i,t.ACTIVE_UNIFORMS),n="",r=0;r<s;r++){e[n=t.getActiveUniform(i,r).name.replace("[0]","")]=t.getUniformLocation(i,n)}return e},q6=function(){var t,i=!1;return t=Il.userAgent||Il.vendor||s.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(i=!0),i},K6=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},J6=[],$6=function(t){if(Qt()){t9(t);var i,e,n=t.style.width,r=t.style.height,o=t.offsetWidth+1,h=t.offsetHeight;t.style.width=o+"px",t.style.height=h+"px";var a=function(){s.cancelAnimationFrame(e);for(var o=0;o<J6.length;o++)if(J6[o]===i){t.style.width=n,t.style.height=r,J6.splice(o,1);break}};i={iit:t,Mhi:a},J6.push(i),e=s.requestAnimationFrame(a)}},t9=function(t){if(Qt())for(var i=0;i<J6.length;i++)if(J6[i].iit===t){J6[i].Mhi();break}},i9=function(){var t=_.PI/180,i=.25*_.PI;var e=new Float32Array([0,0,0,1]),s=new Float32Array([0,0,0]);function n(n,r,o,h,a,u){!function(e,s,n,r){var o=_.tan(s?s.upDegrees*t:i),h=_.tan(s?s.downDegrees*t:i),a=_.tan(s?s.leftDegrees*t:i),u=_.tan(s?s.rightDegrees*t:i),c=2/(a+u),l=2/(o+h);e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-u)*c*.5,e[9]=(o-h)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0}(n,h||null,u.depthNear,u.depthFar),function(t,i,e){var s=i[0],n=i[1],r=i[2],o=i[3],h=s+s,a=n+n,u=r+r,c=s*h,l=s*a,d=s*u,f=n*a,_=n*u,g=r*u,w=o*h,v=o*a,m=o*u;t[0]=1-(f+g),t[1]=l+m,t[2]=d-v,t[3]=0,t[4]=l-m,t[5]=1-(c+g),t[6]=_+w,t[7]=0,t[8]=d+v,t[9]=_-w,t[10]=1-(c+f),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1}(r,o.orientation||e,o.position||s),a&&function(t,i,e){var s,n,r,o,h,a,u,c,l,d,f,_,g=e[0],w=e[1],v=e[2];i===t?(t[12]=i[0]*g+i[4]*w+i[8]*v+i[12],t[13]=i[1]*g+i[5]*w+i[9]*v+i[13],t[14]=i[2]*g+i[6]*w+i[10]*v+i[14],t[15]=i[3]*g+i[7]*w+i[11]*v+i[15]):(s=i[0],n=i[1],r=i[2],o=i[3],h=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=h,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*g+h*w+l*v+i[12],t[13]=n*g+a*w+d*v+i[13],t[14]=r*g+u*w+f*v+i[14],t[15]=o*g+c*w+_*v+i[15])}(r,r,a),function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],o=i[4],h=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],_=i[12],g=i[13],w=i[14],v=i[15],m=e*h-s*o,p=e*a-n*o,A=e*u-r*o,y=s*a-n*h,M=s*u-r*h,b=n*u-r*a,T=c*g-l*_,S=c*w-d*_,N=c*v-f*_,I=l*w-d*g,D=l*v-f*g,E=d*v-f*w,k=m*E-p*D+A*I+y*N-M*S+b*T;k&&(k=1/k,t[0]=(h*E-a*D+u*I)*k,t[1]=(n*D-s*E-r*I)*k,t[2]=(g*b-w*M+v*y)*k,t[3]=(d*M-l*b-f*y)*k,t[4]=(a*N-o*E-u*S)*k,t[5]=(e*E-n*N+r*S)*k,t[6]=(w*A-_*b-v*p)*k,t[7]=(c*b-d*A+f*p)*k,t[8]=(o*D-h*N+u*T)*k,t[9]=(s*N-e*D-r*T)*k,t[10]=(_*M-g*A+v*m)*k,t[11]=(l*A-c*M-f*m)*k,t[12]=(h*S-o*I-a*T)*k,t[13]=(e*I-s*S+n*T)*k,t[14]=(g*p-_*y-w*m)*k,t[15]=(c*y-l*p+d*m)*k)}(r,r)}return function(t,i,e){return!(!t||!i)&&(t.pose=i,t.timestamp=i.timestamp,n(t.leftProjectionMatrix,t.leftViewMatrix,i,e.bhi("left"),e.Thi("left"),e),n(t.rightProjectionMatrix,t.rightViewMatrix,i,e.bhi("right"),e.Thi("right"),e),!0)}}(),e9=function(t){var i,e=t.indexOf("://");i=-1!==e?e+3:0;var s=t.indexOf("/",i);return-1===s&&(s=t.length),t.substring(0,s)},s9=function(){var t={};return function(i,e){void 0===t[i]&&(console.warn("webvr-polyfill: "+e),t[i]=!0)}}(),n9=function(t,i){s9(t,t+" has been deprecated. This may not work on native WebVR displays. "+(i?"Please use "+i+" instead.":""))};var r9=function(t,i,e){if(i){for(var s=[],n=null,r=0;r<i.length;++r){switch(o=i[r]){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),s.push(null,null);break}n||(n=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(a),s.push(t.getParameter(o),null);break;case t.ACTIVE_TEXTURE:n=t.getParameter(t.ACTIVE_TEXTURE),s.push(null);break;default:s.push(t.getParameter(o))}}e(t);for(r=0;r<i.length;++r){var o=i[r],h=s[r];switch(o){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,h);break;case t.COLOR_CLEAR_VALUE:t.clearColor(h[0],h[1],h[2],h[3]);break;case t.COLOR_WRITEMASK:t.colorMask(h[0],h[1],h[2],h[3]);break;case t.CURRENT_PROGRAM:t.useProgram(h);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,h);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,h);break;case t.TEXTURE_BINDING_2D:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_2D,h);break;case t.TEXTURE_BINDING_CUBE_MAP:var a;if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_CUBE_MAP,h);break;case t.VIEWPORT:t.viewport(h[0],h[1],h[2],h[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:h?t.enable(o):t.disable(o);break;default:console.log("No GL restore behavior for 0x"+o.toString(16))}n&&t.activeTexture(n)}}else e(t)},o9=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),h9=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function ma(t,i,e,s){this.gl=t,this.cardboardUI=i,this.bufferScale=e,this.dirtySubmitFrameBindings=s,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,Qt()||(this.realCanvasWidth=w.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=w.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=X6(t,o9,h9,this.attribs),this.uniforms=Z6(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize()}ma.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},ma.prototype.onResize=function(){var t=this.gl,i=this,e=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];r9(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.framebuffer),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.texImage2D(t.TEXTURE_2D,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,i.bufferWidth,i.bufferHeight,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i.renderTarget,0),i.ctxAttribs.depth&&i.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i.depthStencilBuffer)):i.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i.depthBuffer)):i.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,i.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),i.realClearColor.apply(t,i.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},ma.prototype.patch=function(){if(!this.isPatched){var t=this,i=this.gl.canvas,e=this.gl;Qt()||(i.width=V6()*this.bufferScale,i.height=W6()*this.bufferScale,w.defineProperty(i,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(e){t.bufferWidth=e,t.realCanvasWidth.set.call(i,e),t.onResize()}}),w.defineProperty(i,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(e){t.bufferHeight=e,t.realCanvasHeight.set.call(i,e),t.onResize()}})),this.lastBoundFramebuffer=e.getParameter(e.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(i,s){t.lastBoundFramebuffer=s||t.framebuffer,t.realBindFramebuffer.call(e,i,t.lastBoundFramebuffer)},this.cullFace=e.getParameter(e.CULL_FACE),this.depthTest=e.getParameter(e.DEPTH_TEST),this.blend=e.getParameter(e.BLEND),this.scissorTest=e.getParameter(e.SCISSOR_TEST),this.stencilTest=e.getParameter(e.STENCIL_TEST),e.enable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!0;break;case e.DEPTH_TEST:t.depthTest=!0;break;case e.BLEND:t.blend=!0;break;case e.SCISSOR_TEST:t.scissorTest=!0;break;case e.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(e,i)},e.disable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!1;break;case e.DEPTH_TEST:t.depthTest=!1;break;case e.BLEND:t.blend=!1;break;case e.SCISSOR_TEST:t.scissorTest=!1;break;case e.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(e,i)},this.colorMask=e.getParameter(e.COLOR_WRITEMASK),e.colorMask=function(i,s,n,r){t.colorMask[0]=i,t.colorMask[1]=s,t.colorMask[2]=n,t.colorMask[3]=r,t.realColorMask.call(e,i,s,n,r)},this.clearColor=e.getParameter(e.COLOR_CLEAR_VALUE),e.clearColor=function(i,s,n,r){t.clearColor[0]=i,t.clearColor[1]=s,t.clearColor[2]=n,t.clearColor[3]=r,t.realClearColor.call(e,i,s,n,r)},this.viewport=e.getParameter(e.VIEWPORT),e.viewport=function(i,s,n,r){t.viewport[0]=i,t.viewport[1]=s,t.viewport[2]=n,t.viewport[3]=r,t.realViewport.call(e,i,s,n,r)},this.isPatched=!0,$6(i)}},ma.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,i=this.gl.canvas;Qt()||(w.defineProperty(i,"width",this.realCanvasWidth),w.defineProperty(i,"height",this.realCanvasHeight)),i.width=this.bufferWidth,i.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,u((function(){$6(i)}),1)}},ma.prototype.setTextureBounds=function(t,i){t||(t=[0,0,.5,1]),i||(i=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=i[0],this.viewportOffsetScale[5]=i[1],this.viewportOffsetScale[6]=i[2],this.viewportOffsetScale[7]=i[3]},ma.prototype.submitFrame=function(){var t=this.gl,i=this,e=[];if(this.dirtySubmitFrameBindings||e.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),r9(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.cullFace&&i.realDisable.call(t,t.CULL_FACE),i.depthTest&&i.realDisable.call(t,t.DEPTH_TEST),i.blend&&i.realDisable.call(t,t.BLEND),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realDisable.call(t,t.STENCIL_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(i.ctxAttribs.alpha||Qt())&&(i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(i.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.enableVertexAttribArray(i.attribs.position),t.enableVertexAttribArray(i.attribs.texCoord),t.vertexAttribPointer(i.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(i.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(i.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.uniform4fv(i.uniforms.viewportOffsetScale,i.viewportOffsetScale),t.drawElements(t.TRIANGLES,i.indexCount,t.UNSIGNED_SHORT,0),i.cardboardUI&&i.cardboardUI.renderNoState(),i.realBindFramebuffer.call(i.gl,t.FRAMEBUFFER,i.framebuffer),i.ctxAttribs.preserveDrawingBuffer||(i.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),i.dirtySubmitFrameBindings||i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.cullFace&&i.realEnable.call(t,t.CULL_FACE),i.depthTest&&i.realEnable.call(t,t.DEPTH_TEST),i.blend&&i.realEnable.call(t,t.BLEND),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realEnable.call(t,t.STENCIL_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),!i.ctxAttribs.alpha&&i.ctxAttribs.preserveDrawingBuffer||i.realClearColor.apply(t,i.clearColor)})),Qt()){var s=t.canvas;s.width==i.bufferWidth&&s.height==i.bufferHeight||(i.bufferWidth=s.width,i.bufferHeight=s.height,i.onResize())}},ma.prototype.updateDeviceInfo=function(t){var i=this.gl,e=this,s=[i.ARRAY_BUFFER_BINDING,i.ELEMENT_ARRAY_BUFFER_BINDING];r9(i,s,(function(i){var s=e.Shi(e.meshWidth,e.meshHeight,t);if(i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,s,i.STATIC_DRAW),!e.indexCount){var n=e.Nhi(e.meshWidth,e.meshHeight);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n,i.STATIC_DRAW),e.indexCount=n.length}}))},ma.prototype.Shi=function(t,i,e){for(var s=new Float32Array(2*t*i*5),n=e.getLeftEyeVisibleTanAngles(),r=e.getLeftEyeNoLensTanAngles(),o=e.getLeftEyeVisibleScreenRect(r),h=0,a=0;a<2;a++){for(var u=0;u<i;u++)for(var c=0;c<t;c++,h++){var l=c/(t-1),d=u/(i-1),f=l,g=d,w=z6(n[0],n[2],l),v=z6(n[3],n[1],d),m=_.sqrt(w*w+v*v),p=e.distortion.distortInverse(m),A=v*p/m;l=(w*p/m-r[0])/(r[2]-r[0]),d=(A-r[3])/(r[1]-r[3]),l=2*(o.x+l*o.width-.5),d=2*(o.y+d*o.height-.5),s[5*h+0]=l,s[5*h+1]=d,s[5*h+2]=f,s[5*h+3]=g,s[5*h+4]=a}var y=n[2]-n[0];n[0]=-(y+n[0]),n[2]=y-n[2],y=r[2]-r[0],r[0]=-(y+r[0]),r[2]=y-r[2],o.x=1-(o.x+o.width)}return s},ma.prototype.Nhi=function(t,i){for(var e=new Uint16Array(2*(t-1)*(i-1)*6),s=t/2,n=i/2,r=0,o=0,h=0;h<2;h++)for(var a=0;a<i;a++)for(var u=0;u<t;u++,r++)0!=u&&0!=a&&(u<=s==a<=n?(e[o++]=r,e[o++]=r-t-1,e[o++]=r-t,e[o++]=r-t-1,e[o++]=r,e[o++]=r-1):(e[o++]=r-1,e[o++]=r-t,e[o++]=r,e[o++]=r-t,e[o++]=r-1,e[o++]=r-t-1));return e},ma.prototype.Ihi=function(t,i){var e=w.getOwnPropertyDescriptor(t,i);return void 0!==e.get&&void 0!==e.set||(e.configurable=!0,e.enumerable=!0,e.get=function(){return this.getAttribute(i)},e.set=function(t){this.setAttribute(i,t)}),e};var a9=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),u9=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),c9=_.PI/180,l9=.3125,d9=28;function f9(t){this.gl=t,this.attribs={position:0},this.program=X6(t,a9,u9,this.attribs),this.uniforms=Z6(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function _9(t){this.coefficients=t}f9.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},f9.prototype.listen=function(t,i){var e=this.gl.canvas,s="undefined"!=typeof TouchEvent;this.listener=function(n){var r=e.clientWidth/2,o=s&&n instanceof TouchEvent?(n.preventDefault(),n.changedTouches[0]):n;o.clientX>r-42&&o.clientX<r+42&&o.clientY>e.clientHeight-42?(n.preventDefault(),n.stopImmediatePropagation(),t(n)):o.clientX<42&&o.clientY<42&&(n.preventDefault(),n.stopImmediatePropagation(),i(n))},e.addEventListener("click",this.listener,!1),e.addEventListener("touchstart",this.listener,!1)},f9.prototype.onResize=function(){var t=this.gl,i=this,e=[t.ARRAY_BUFFER_BINDING];r9(t,e,(function(t){var e=[],n=t.drawingBufferWidth/2,r=_.max(screen.width,screen.height)*s.devicePixelRatio,o=t.drawingBufferWidth/r*s.devicePixelRatio,h=4*o/2,a=42*o,u=d9*o/2,c=14*o;function l(t,i){var s=(90-t)*c9,r=_.cos(s),o=_.sin(s);e.push(l9*r*u+n,l9*o*u+u),e.push(i*r*u+n,i*o*u+u)}e.push(n-h,a),e.push(n-h,t.drawingBufferHeight),e.push(n+h,a),e.push(n+h,t.drawingBufferHeight),i.gearOffset=e.length/2;for(var d=0;d<=6;d++){var f=60*d;l(f,1),l(f+12,1),l(f+20,.75),l(f+40,.75),l(f+48,1)}function g(i,s){e.push(c+i,t.drawingBufferHeight-c-s)}i.gearVertexCount=e.length/2-i.gearOffset,i.arrowOffset=e.length/2;var w=h/_.sin(45*c9);g(0,u),g(u,0),g(u+w,w),g(w,u+w),g(w,u-w),g(0,u),g(u,2*u),g(u+w,2*u-w),g(w,u-w),g(0,u),g(w,u-h),g(d9*o,u-h),g(w,u+h),g(d9*o,u+h),i.arrowVertexCount=e.length/2-i.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)}))},f9.prototype.render=function(){var t=this.gl,i=this,e=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];r9(t,e,(function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.renderNoState()}))},f9.prototype.renderNoState=function(){var t,i,e,s,n,r,o,h,a,u,c=this.gl;c.useProgram(this.program),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.enableVertexAttribArray(this.attribs.position),c.vertexAttribPointer(this.attribs.position,2,c.FLOAT,!1,8,0),c.uniform4f(this.uniforms.color,1,1,1,1),t=this.projMat,i=0,e=c.drawingBufferWidth,s=0,n=c.drawingBufferHeight,h=1/(i-e),a=1/(s-n),u=1/((r=.1)-(o=1024)),t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(i+e)*h,t[13]=(n+s)*a,t[14]=(o+r)*u,t[15]=1,c.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.drawArrays(c.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),c.drawArrays(c.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},_9.prototype.distortInverse=function(t){for(var i=0,e=1,s=t-this.distort(i);_.abs(e-i)>1e-4;){var n=t-this.distort(e),r=e-n*((e-i)/(n-s));i=e,e=r,s=n}return e},_9.prototype.distort=function(t){for(var i=t*t,e=0,s=0;s<this.coefficients.length;s++)e=i*(e+this.coefficients[s]);return(e+1)*t};var g9=_.PI/180,Xa=180/_.PI,wa=function(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0};wa.prototype={constructor:wa,set:function(t,i,e){return this.x=t,this.y=i,this.z=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var i=1/t;this.multiplyScalar(i)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,o=t.z,h=t.w,a=h*i+r*s-o*e,u=h*e+o*i-n*s,c=h*s+n*e-r*i,l=-n*i-r*e-o*s;return this.x=a*h+l*-n+u*-o-c*-r,this.y=u*h+l*-r+c*-n-a*-o,this.z=c*h+l*-o+a*-r-u*-n,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,i){var e=t.x,s=t.y,n=t.z,r=i.x,o=i.y,h=i.z;return this.x=s*h-n*o,this.y=n*r-e*h,this.z=e*o-s*r,this}};var Ts=function(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1};function w9(t){this.width=t.width||V6(),this.height=t.height||W6(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}Ts.prototype={constructor:Ts,set:function(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,i,e){var s=_.cos(t/2),n=_.cos(i/2),r=_.cos(e/2),o=_.sin(t/2),h=_.sin(i/2),a=_.sin(e/2);return this.x=o*n*r+s*h*a,this.y=s*h*r-o*n*a,this.z=s*n*a+o*h*r,this.w=s*n*r-o*h*a,this},setFromEulerYXZ:function(t,i,e){var s=_.cos(t/2),n=_.cos(i/2),r=_.cos(e/2),o=_.sin(t/2),h=_.sin(i/2),a=_.sin(e/2);return this.x=o*n*r+s*h*a,this.y=s*h*r-o*n*a,this.z=s*n*a-o*h*r,this.w=s*n*r+o*h*a,this},setFromAxisAngle:function(t,i){var e=i/2,s=_.sin(e);return this.x=t.x*s,this.y=t.y*s,this.z=t.z*s,this.w=_.cos(e),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var e=t.x,s=t.y,n=t.z,r=t.w,o=i.x,h=i.y,a=i.z,u=i.w;return this.x=e*u+r*o+s*a-n*h,this.y=s*u+r*h+n*o-e*a,this.z=n*u+r*a+e*h-s*o,this.w=r*u-e*o-s*h-n*a,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var e=this.x,s=this.y,n=this.z,r=this.w,o=r*t.w+e*t.x+s*t.y+n*t.z;if(o<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,o=-o):this.copy(t),o>=1)return this.w=r,this.x=e,this.y=s,this.z=n,this;var h=_.acos(o),a=_.sqrt(1-o*o);if(_.abs(a)<.001)return this.w=.5*(r+this.w),this.x=.5*(e+this.x),this.y=.5*(s+this.y),this.z=.5*(n+this.z),this;var u=_.sin((1-i)*h)/a,c=_.sin(i*h)/a;return this.w=r*u+this.w*c,this.x=e*u+this.x*c,this.y=s*u+this.y*c,this.z=n*u+this.z*c,this},setFromUnitVectors:function(){var t,i;return function(e,s){return void 0===t&&(t=new wa),(i=e.dot(s)+1)<1e-6?(i=0,_.abs(e.x)>_.abs(e.z)?t.set(-e.y,e.x,0):t.set(0,-e.z,e.y)):t.crossVectors(e,s),this.x=t.x,this.y=t.y,this.z=t.z,this.w=i,this.normalize(),this}}()};var v9=new w9({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),m9=new w9({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),p9={CardboardV1:new A9({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new A9({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function mc(t){this.viewer=p9.CardboardV2,this.updateDeviceParams(t),this.distortion=new _9(this.viewer.distortionCoefficients)}function A9(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}mc.prototype.updateDeviceParams=function(t){this.device=this.Dhi(t)||this.device},mc.prototype.getDevice=function(){return this.device},mc.prototype.setViewer=function(t){this.viewer=t,this.distortion=new _9(this.viewer.distortionCoefficients)},mc.prototype.Dhi=function(t){if(!t)return Qt()?(console.warn("Using fallback iOS device measurements."),m9):(console.warn("Using fallback Android device measurements."),v9);var i=.0254,e=i/t.xdpi,s=i/t.ydpi;return new w9({widthMeters:e*V6(),heightMeters:s*W6(),bevelMeters:.001*t.bevelMm})},mc.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=(i.widthMeters-t.interLensDistance)/2,r=t.interLensDistance/2,o=t.baselineLensDistance-i.bevelMeters,h=i.heightMeters-o,a=Xa*_.atan(e.distort(n/s)),u=Xa*_.atan(e.distort(r/s)),c=Xa*_.atan(e.distort(o/s)),l=Xa*_.atan(e.distort(h/s));return{leftDegrees:_.min(a,t.fov),rightDegrees:_.min(u,t.fov),downDegrees:_.min(c,t.fov),upDegrees:_.min(l,t.fov)}},mc.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=_.tan(-g9*t.fov),n=_.tan(g9*t.fov),r=_.tan(g9*t.fov),o=_.tan(-g9*t.fov),h=i.widthMeters/4,a=i.heightMeters/2,u=t.baselineLensDistance-i.bevelMeters-a,c=t.interLensDistance/2-h,l=-u,d=t.screenLensDistance,f=e.distort((c-h)/d),g=e.distort((l+a)/d),w=e.distort((c+h)/d),v=e.distort((l-a)/d),m=new Float32Array(4);return m[0]=_.max(s,f),m[1]=_.min(n,g),m[2]=_.min(r,w),m[3]=_.max(o,v),m},mc.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=new Float32Array(4),n=e.distortInverse(_.tan(-g9*t.fov)),r=e.distortInverse(_.tan(g9*t.fov)),o=e.distortInverse(_.tan(g9*t.fov)),h=e.distortInverse(_.tan(-g9*t.fov)),a=i.widthMeters/4,u=i.heightMeters/2,c=t.baselineLensDistance-i.bevelMeters-u,l=t.interLensDistance/2-a,d=-c,f=t.screenLensDistance,g=(l-a)/f,w=(d+u)/f,v=(l+a)/f,m=(d-u)/f;return s[0]=_.max(n,g),s[1]=_.min(r,w),s[2]=_.min(o,v),s[3]=_.max(h,m),s},mc.prototype.getLeftEyeVisibleScreenRect=function(t){var i=this.viewer,e=this.device,s=i.screenLensDistance,n=(e.widthMeters-i.interLensDistance)/2,r=i.baselineLensDistance-e.bevelMeters,o=(t[0]*s+n)/e.widthMeters,h=(t[1]*s+r)/e.heightMeters,a=(t[2]*s+n)/e.widthMeters,u=(t[3]*s+r)/e.heightMeters;return{x:o,y:u,width:a-o,height:h-u}},mc.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},mc.prototype.getFieldOfViewRightEye=function(t){var i=this.getFieldOfViewLeftEye(t);return{leftDegrees:i.rightDegrees,rightDegrees:i.leftDegrees,upDegrees:i.upDegrees,downDegrees:i.downDegrees}},mc.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.Ehi();return{leftDegrees:Xa*_.atan(t.outerDist),rightDegrees:Xa*_.atan(t.innerDist),downDegrees:Xa*_.atan(t.bottomDist),upDegrees:Xa*_.atan(t.topDist)}},mc.prototype.getUndistortedViewportLeftEye=function(){var t=this.Ehi(),i=this.viewer,e=this.device,s=i.screenLensDistance,n=e.widthMeters/s,r=e.heightMeters/s,o=e.width/n,h=e.height/r,a=_.round((t.eyePosX-t.outerDist)*o),u=_.round((t.eyePosY-t.bottomDist)*h);return{x:a,y:u,width:_.round((t.eyePosX+t.innerDist)*o)-a,height:_.round((t.eyePosY+t.topDist)*h)-u}},mc.prototype.Ehi=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=t.interLensDistance/2/s,r=i.widthMeters/s,o=i.heightMeters/s,h=r/2-n,a=(t.baselineLensDistance-i.bevelMeters)/s,u=t.fov,c=e.distortInverse(_.tan(g9*u)),l=_.min(h,c),d=_.min(n,c),f=_.min(a,c);return{outerDist:l,innerDist:d,topDist:_.min(o-a,c),bottomDist:f,eyePosX:h,eyePosY:a}},mc.Viewers=p9;var y9={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function M9(t,i){if(this.dpdb=y9,this.khi(),t){this.onDeviceParamsUpdated=i;var e=new El,s=this;e.open("GET",t,!0),e.addEventListener("load",(function(){s.loading=!1,e.status>=200&&e.status<=299?(s.dpdb=JSON.parse(e.response),s.khi()):console.error("Error loading online DPDB!")})),e.send()}}function b9(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}function T9(t,i){this.set(t,i)}function S9(t,i){this.kFilter=t,this.isDebug=i,this.currentAccelMeasurement=new T9,this.currentGyroMeasurement=new T9,this.previousGyroMeasurement=new T9,Qt()?this.filterQ=new Ts(-1,0,0,1):this.filterQ=new Ts(1,0,0,1),this.previousFilterQ=new Ts,this.previousFilterQ.copy(this.filterQ),this.accelQ=new Ts,this.isOrientationInitialized=!1,this.estimatedGravity=new wa,this.measuredGravity=new wa,this.gyroIntegralQ=new Ts}function N9(t,i){this.predictionTimeS=t,this.isDebug=i,this.previousQ=new Ts,this.previousTimestampS=null,this.deltaQ=new Ts,this.outQ=new Ts}function I9(t,i,e,n){this.yawOnly=e,this.accelerometer=new wa,this.gyroscope=new wa,this.filter=new S9(t,n),this.posePredictor=new N9(i,n),this.isFirefoxAndroid=U6(),this.isIOS=Qt();var r=Q6();this.isDeviceMotionInRadians=!this.isIOS&&r&&r<66,this.isWithoutDeviceMotion=F6(),this.filterToWorldQ=new Ts,Qt()?this.filterToWorldQ.setFromAxisAngle(new wa(1,0,0),_.PI/2):this.filterToWorldQ.setFromAxisAngle(new wa(1,0,0),-_.PI/2),this.inverseWorldToScreenQ=new Ts,this.worldToScreenQ=new Ts,this.originalPoseAdjustQ=new Ts,this.originalPoseAdjustQ.setFromAxisAngle(new wa(0,0,1),-s.orientation*_.PI/180),this.Lhi(),G6()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new Ts,this.xhi=new Float32Array(4),this.start()}M9.prototype.getDeviceParams=function(){return this.deviceParams},M9.prototype.khi=function(){var t=this.Chi();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},M9.prototype.Chi=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var i=Il.userAgent||Il.vendor||s.opera,e=V6(),n=W6();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var r=null,o=1/0,h=0;h<t.devices.length;h++){var a=t.devices[h];if(a.rules)if("ios"==a.type||"android"==a.type){if(Qt()==("ios"==a.type)){for(var u=!1,c=0;c<a.rules.length;c++){var l=a.rules[c],d=this.Ohi(l,i,e,n);if(!0===d){o=d,r=a,u=!0;break}!1!==d&&d<o&&(o=d,r=a)}if(u)break}}else console.warn("Device["+h+"] has invalid type.");else console.warn("Device["+h+"] has no rules section.")}return r?new b9({xdpi:r.dpi[0]||r.dpi,ydpi:r.dpi[1]||r.dpi,bevelMm:r.bw}):(console.warn("No DPDB device match."),null)},M9.prototype.Ohi=function(t,i,e,s){if(!t.ua&&!t.res)return!1;if(t.ua&&i.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var n=t.res[0],r=t.res[1],o=_.min(e,s)-_.min(n,r),h=_.max(e,s)-_.max(n,r),a=_.abs(o)+_.abs(h);if(a>0)return a}return!0},T9.prototype.set=function(t,i){this.sample=t,this.timestampS=i},T9.prototype.copy=function(t){this.set(t.sample,t.timestampS)},S9.prototype.addAccelMeasurement=function(t,i){this.currentAccelMeasurement.set(t,i)},S9.prototype.addGyroMeasurement=function(t,i){this.currentGyroMeasurement.set(t,i),function(t){return!(S(t)||t<=.001||t>1)}(i-this.previousGyroMeasurement.timestampS)&&this.jhi(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},S9.prototype.jhi=function(){if(!this.isOrientationInitialized)return this.accelQ=this.Rhi(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,i=this.Phi(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(i),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(i);var e=new Ts;e.copy(this.filterQ),e.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(e),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var s=new Ts;s.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),s.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Xa*function(t){return t.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*_.acos(t.w)}(s),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var n=new Ts;n.copy(this.filterQ),n.multiply(s),this.filterQ.slerp(n,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},S9.prototype.getOrientation=function(){return this.filterQ},S9.prototype.Rhi=function(t){var i=new wa;i.copy(t),i.normalize();var e=new Ts;return e.setFromUnitVectors(new wa(0,0,-1),i),e.inverse(),e},S9.prototype.Phi=function(t,i){var e=new Ts,s=new wa;return s.copy(t),s.normalize(),e.setFromAxisAngle(s,t.length()*i),e},N9.prototype.getPrediction=function(t,i,e){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=e,t;var s=new wa;s.copy(i),s.normalize();var n=i.length();if(n<20*g9)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Xa*n).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var r=n*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(s,r),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=e,this.outQ},I9.prototype.getPosition=function(){return null},I9.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this.zhi)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(i=(new Ts).setFromAxisAngle(new wa(0,0,-1),0),e=new Ts,-90===s.orientation?e.setFromAxisAngle(new wa(0,1,0),_.PI/-2):e.setFromAxisAngle(new wa(0,1,0),_.PI/2),i.multiply(e)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var t=new Ts;return t.setFromAxisAngle(new wa(1,0,0),-_.PI/2),t}(),t=this.zhi,(n=new Ts).copy(t),n.multiply(this.deviceOrientationFilterToWorldQ),n.multiply(this.resetQ),n.multiply(this.worldToScreenQ),n.multiplyQuaternions(this.deviceOrientationFixQ,n),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.xhi[0]=n.x,this.xhi[1]=n.y,this.xhi[2]=n.z,this.xhi[3]=n.w,this.xhi;var i,e,n,r=this.filter.getOrientation();return t=this.posePredictor.getPrediction(r,this.gyroscope,this.previousTimestampS),(n=new Ts).copy(this.filterToWorldQ),n.multiply(this.resetQ),n.multiply(t),n.multiply(this.worldToScreenQ),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.xhi[0]=n.x,this.xhi[1]=n.y,this.xhi[2]=n.z,this.xhi[3]=n.w,this.xhi},I9.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),G6()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},I9.prototype.Bhi=function(t){this.zhi=this.zhi||new Ts;var i=t.alpha,e=t.beta,s=t.gamma;i=(i||0)*_.PI/180,e=(e||0)*_.PI/180,s=(s||0)*_.PI/180,this.zhi.setFromEulerYXZ(e,i,-s)},I9.prototype.Uhi=function(t){this.Qhi(t)},I9.prototype.Qhi=function(t){var i=t.accelerationIncludingGravity,e=t.rotationRate,s=t.timeStamp/1e3,n=s-this.previousTimestampS;return n<0?(s9("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=s)):n<=.001||n>1?(s9("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=s)):(this.accelerometer.set(-i.x,-i.y,-i.z),Y6()?this.gyroscope.set(-e.beta,e.alpha,e.gamma):this.gyroscope.set(e.alpha,e.beta,e.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(_.PI/180),this.filter.addAccelMeasurement(this.accelerometer,s),this.filter.addGyroMeasurement(this.gyroscope,s),void(this.previousTimestampS=s))},I9.prototype.Fhi=function(t){this.Lhi()},I9.prototype.hO=function(t){var i=t.data;i&&i.type&&("devicemotion"===i.type.toLowerCase()&&this.Qhi(i.deviceMotionEvent))},I9.prototype.Lhi=function(){switch(this.worldToScreenQ.set(0,0,0,1),s.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new wa(0,0,1),-_.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new wa(0,0,1),_.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},I9.prototype.start=function(){var t,i,e;this.Yhi=this.Uhi.bind(this),this.Ghi=this.Fhi.bind(this),this.Vhi=this.hO.bind(this),this.Whi=this.Bhi.bind(this),Qt()&&(t=s.self!==s.top,i=e9(h.referrer),e=e9(s.location.href),t&&i!==e)&&s.addEventListener("message",this.Vhi),s.addEventListener("orientationchange",this.Ghi),this.isWithoutDeviceMotion?s.addEventListener("deviceorientation",this.Whi):s.addEventListener("devicemotion",this.Yhi)},I9.prototype.stop=function(){s.removeEventListener("devicemotion",this.Yhi),s.removeEventListener("deviceorientation",this.Whi),s.removeEventListener("orientationchange",this.Ghi),s.removeEventListener("message",this.Vhi)};var D9=new wa(1,0,0),E9=new wa(0,0,1),k9={};screen.orientation?k9=screen.orientation:screen.msOrientation?k9=screen.msOrientation:w.defineProperty(k9,"angle",{get:function(){return s.orientation||0}});var L9=new Ts;L9.setFromAxisAngle(D9,-_.PI/2),L9.multiply((new Ts).setFromAxisAngle(E9,_.PI/2));var x9=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new b("Cannot call a class as a function")}(this,t),this.config=i,this.sensor=null,this.fusionSensor=null,this.Hhi=new Float32Array(4),this.api=null,this.errors=[],this.Xhi=new Ts,this.Zhi=new Ts,this.qhi=new Ts,this.Khi=this.Khi.bind(this),this.Jhi=this.Jhi.bind(this),this.$hi=this.$hi.bind(this),this.$hi(),this.init()}return R6(t,[{key:"init",value:function(){var t=null;try{(t=new RelativeOrientationSensor({frequency:60})).addEventListener("error",this.Jhi)}catch(t){this.errors.push(t),"SecurityError"===t.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===t.name?this.useDeviceMotion():console.error(t)}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this.Khi),this.sensor.start()),s.addEventListener("orientationchange",this.$hi)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new I9(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this.Hhi[0]=this.Hhi[1]=this.Hhi[2]=0,this.Hhi[3]=1,this.Hhi;var t=this.sensor.quaternion;this.Xhi.set(t[0],t[1],t[2],t[3]);var i=this.qhi;return i.copy(L9),i.multiply(this.Xhi),i.multiply(this.Zhi),this.config.YAW_ONLY&&(i.x=i.z=0,i.normalize()),this.Hhi[0]=i.x,this.Hhi[1]=i.y,this.Hhi[2]=i.z,this.Hhi[3]=i.w,this.Hhi}},{key:"Jhi",value:function(t){this.errors.push(t.error),"NotAllowedError"===t.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===t.error.name?console.error("Sensor could not be read"):console.error(t.error)}},{key:"Khi",value:function(){}},{key:"$hi",value:function(){var t=-k9.angle*_.PI/180;this.Zhi.setFromAxisAngle(E9,t)}}]),t}();function C9(){this.tai();var t=h.createElement("div");(r=t.style).position="fixed",r.top=0,r.right=0,r.bottom=0,r.left=0,r.backgroundColor="gray",r.fontFamily="sans-serif",r.zIndex=1e6;var i=h.createElement("img");i.src=this.icon,(r=i.style).marginLeft="25%",r.marginTop="25%",r.width="50%",t.appendChild(i);var e=h.createElement("div");(r=e.style).textAlign="center",r.fontSize="16px",r.lineHeight="24px",r.margin="24px 25%",r.width="50%",e.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(e);var s=h.createElement("div");(r=s.style).backgroundColor="#CFD8DC",r.position="fixed",r.bottom=0,r.width="100%",r.height="48px",r.padding="14px 24px",r.boxSizing="border-box",r.color="#656A6B",t.appendChild(s);var n=h.createElement("div");n.style.float="left",n.innerHTML="No Cardboard viewer?";var r,o=h.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="Du",(r=o.style).float="right",r.fontWeight=600,r.textTransform="uppercase",r.borderLeft="1px solid gray",r.paddingLeft="24px",r.textDecoration="none",r.color="#656A6B",s.appendChild(n),s.appendChild(o),this.overlay=t,this.text=e,this.hide()}C9.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):h.body.appendChild(this.overlay),this.overlay.style.display="block";var i=this.overlay.querySelector("img").style;G6()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},C9.prototype.hide=function(){this.overlay.style.display="none"},C9.prototype.showTemporarily=function(t,i){this.show(i),this.timer=u(this.hide.bind(this),t)},C9.prototype.disableShowTemporarily=function(){c(this.timer)},C9.prototype.update=function(){this.disableShowTemporarily(),!G6()&&q6()?this.show():this.hide()},C9.prototype.tai=function(){this.icon="data:"+"image/svg+xml"+";base64,"+"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"};var O9="CardboardV1",j9="WEBVR_CARDBOARD_VIEWER";function R9(){try{this.selectedKey=localStorage.getItem(j9)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=O9),this.dialog=this.iai(mc.Viewers),this.root=null,this.eai=[]}R9.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},R9.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},R9.prototype.getCurrentViewer=function(){return mc.Viewers[this.selectedKey]},R9.prototype.sai=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},R9.prototype.onChange=function(t){this.eai.push(t)},R9.prototype.nai=function(t){for(var i=0;i<this.eai.length;i++)this.eai[i](t)},R9.prototype.rai=function(){if(this.selectedKey=this.sai(),this.selectedKey&&mc.Viewers[this.selectedKey]){this.nai(mc.Viewers[this.selectedKey]);try{localStorage.setItem(j9,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},R9.prototype.iai=function(t){var i=h.createElement("div");i.classList.add("webvr-polyfill-viewer-selector"),i.style.display="none";var e=h.createElement("div");(n=e.style).position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",e.addEventListener("click",this.hide.bind(this));var s=h.createElement("div"),n=s.style;for(var r in n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",s.appendChild(this.oai("Select your viewer")),t)s.appendChild(this.hai(r,t[r].label));return s.appendChild(this.aai("Save",this.rai.bind(this))),i.appendChild(e),i.appendChild(s),i},R9.prototype.oai=function(t){var i=h.createElement("h1"),e=i.style;return e.color="black",e.fontSize="20px",e.fontWeight="bold",e.marginTop=0,e.marginBottom="24px",i.innerHTML=t,i},R9.prototype.hai=function(t,i){var e=h.createElement("div");e.style.marginTop="8px",e.style.color="black";var s=h.createElement("input");s.style.fontSize="30px",s.setAttribute("id",t),s.setAttribute("type","radio"),s.setAttribute("value",t),s.setAttribute("name","field");var n=h.createElement("label");return n.style.marginLeft="4px",n.setAttribute("for",t),n.innerHTML=i,e.appendChild(s),e.appendChild(n),e},R9.prototype.aai=function(t,i){var e=h.createElement("button");e.innerHTML=t;var s=e.style;return s.float="right",s.textTransform="uppercase",s.color="#1094f7",s.fontSize="14px",s.letterSpacing=0,s.border=0,s.background="none",s.marginTop="16px",e.addEventListener("click",i),e};void 0!==s||("undefined"!=typeof global?global:"undefined"!=typeof self&&self);var P9=function(t,i){return t(i={exports:{}},i.exports),i.exports}((function(t,i){var e;e=function(){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||w.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return w.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),r=e(1),o=void 0!==Il&&C((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(Il.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!s.MSStream,a=function(){function t(){!function(t,i){if(!(t instanceof i))throw new b("Cannot call a class as a function")}(this,t),o?this.noSleepTimer=null:(this.noSleepVideo=h.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",function(t){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=_.random())}.bind(this)))}return n(t,[{key:"enable",value:function(){o?(this.disable(),this.noSleepTimer=s.setInterval((function(){s.location.href="/",s.setTimeout(s.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){o?this.noSleepTimer&&(s.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),t}();t.exports=a},function(t,i,e){t.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},t.exports=e()})),z9=function(t){return t&&t.__esModule?t.default:t}(P9),B9=1e3,U9=[0,0,.5,1],Q9=[.5,0,.5,1],F9=s.requestAnimationFrame,Y9=s.cancelAnimationFrame;function G9(t){w.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:t.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:t.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:t.canPresent},maxLayers:{writable:!1,enumerable:!0,value:t.maxLayers},hasOrientation:{enumerable:!0,get:function(){return n9("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),t.hasOrientation}}})}function _c(t){var i=!("wakelock"in(t=t||{}))||t.wakelock;this.isPolyfilled=!0,this.displayId=B9++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,w.defineProperty(this,"isConnected",{get:function(){return n9("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new G9({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.uai=!1,this.yM=null,this.cai=null,this.vV=null,this.eit=null,this.lai=null,this.fai=null,this._ai=null,this.gai=null,i&&q6()&&(this.wai=new z9)}_c.prototype.getFrameData=function(t){return i9(t,this.vai(),this)},_c.prototype.getPose=function(){return n9("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this.vai()},_c.prototype.resetPose=function(){return n9("VRDisplay.prototype.resetPose"),this.mai()},_c.prototype.getImmediatePose=function(){return n9("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this.vai()},_c.prototype.requestAnimationFrame=function(t){return F9(t)},_c.prototype.cancelAnimationFrame=function(t){return Y9(t)},_c.prototype.wrapForFullscreen=function(t){if(Qt())return t;if(!this.eit){this.eit=h.createElement("div");var i=["height: "+_.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.eit.setAttribute("style",i.join("; ")+";"),this.eit.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.vV==t)return this.eit;if(this.vV&&(this.cai?this.cai.appendChild(this.vV):this.vV.parentElement.removeChild(this.vV)),this.vV=t,this.cai=t.parentElement,this.cai||h.body.appendChild(t),!this.eit.parentElement){var e=this.vV.parentElement;e.insertBefore(this.eit,this.vV),e.removeChild(this.vV)}this.eit.insertBefore(this.vV,this.eit.firstChild),this.lai=this.vV.getAttribute("style");var s=this;return function(){if(s.vV){var t=["position: absolute","top: 0","left: 0","width: "+_.max(screen.width,screen.height)+"px","height: "+_.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];s.vV.setAttribute("style",t.join("; ")+";")}}(),this.eit},_c.prototype.removeFullscreenWrapper=function(){if(this.vV){var t=this.vV;this.lai?t.setAttribute("style",this.lai):t.removeAttribute("style"),this.vV=null,this.lai=null;var i=this.eit.parentElement;return this.eit.removeChild(t),this.cai===i?i.insertBefore(t,this.eit):this.cai&&this.cai.appendChild(t),i.removeChild(this.eit),t}},_c.prototype.requestPresent=function(t){var i=this.isPresenting,e=this;return t instanceof Array||(n9("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),t=[t]),new Promise((function(s,n){if(e.capabilities.canPresent)if(0==t.length||t.length>e.capabilities.maxLayers)n(new g("Invalid number of layers."));else{var r=t[0];if(r.source){var o=r.leftBounds||U9,a=r.rightBounds||Q9;if(i){var u=e.yM;u.source!==r.source&&(u.source=r.source);for(var c=0;c<4;c++)u.leftBounds[c]=o[c],u.rightBounds[c]=a[c];return e.wrapForFullscreen(e.yM.source),e.pai(),void s()}if(e.yM={predistorted:r.predistorted,source:r.source,leftBounds:o.slice(0),rightBounds:a.slice(0)},e.uai=!1,e.yM&&e.yM.source){var l=e.wrapForFullscreen(e.yM.source);e.Aai(l,(function(){var t=h.fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement;e.isPresenting=l===t,e.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(t){console.error("screen.orientation.lock() failed due to",t.message)})),e.uai=!1,e.yai(),s()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.disableWakeLock(),e.Mai(),e.removeFullscreenWrapper(),e.bai()),e.Tai()}),(function(){e.uai&&(e.removeFullscreenWrapper(),e.bai(),e.disableWakeLock(),e.uai=!1,e.isPresenting=!1,n(new g("Unable to present.")))})),!function(t){if(h.fullscreenEnabled&&t.requestFullscreen)t.requestFullscreen();else if(h.webkitFullscreenEnabled&&t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(h.mozFullScreenEnabled&&t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!h.msFullscreenEnabled||!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0}(l)?(Qt()||B6())&&(e.enableWakeLock(),e.isPresenting=!0,e.yai(),e.Tai(),s()):(e.enableWakeLock(),e.uai=!0)}e.uai||Qt()||(H6(),n(new g("Unable to present.")))}else s()}else n(new g("VRDisplay is not capable of presenting."))}))},_c.prototype.exitPresent=function(){var t=this.isPresenting,i=this;return this.isPresenting=!1,this.yM=null,this.disableWakeLock(),new Promise((function(e,s){t?(H6(),i.Mai(),i.removeFullscreenWrapper(),i.bai(),i.Tai(),e()):s(new g("Was not presenting to VRDisplay."))}))},_c.prototype.getLayers=function(){return this.yM?[this.yM]:[]},_c.prototype.Tai=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});s.dispatchEvent(t)},_c.prototype.Sai=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});s.dispatchEvent(t)},_c.prototype.Aai=function(t,i,e){this.bai(),this.fai=t,this._ai=i,this.gai=e,i&&(h.fullscreenEnabled?t.addEventListener("fullscreenchange",i,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",i,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenchange",i,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",i,!1)),e&&(h.fullscreenEnabled?t.addEventListener("fullscreenerror",e,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",e,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenerror",e,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",e,!1))},_c.prototype.bai=function(){if(this.fai){var t=this.fai;if(this._ai){var i=this._ai;t.removeEventListener("fullscreenchange",i,!1),t.removeEventListener("webkitfullscreenchange",i,!1),h.removeEventListener("mozfullscreenchange",i,!1),t.removeEventListener("msfullscreenchange",i,!1)}if(this.gai){var e=this.gai;t.removeEventListener("fullscreenerror",e,!1),t.removeEventListener("webkitfullscreenerror",e,!1),h.removeEventListener("mozfullscreenerror",e,!1),t.removeEventListener("msfullscreenerror",e,!1)}this.fai=null,this._ai=null,this.gai=null}},_c.prototype.enableWakeLock=function(){this.wai&&this.wai.enable()},_c.prototype.disableWakeLock=function(){this.wai&&this.wai.disable()},_c.prototype.yai=function(){},_c.prototype.Mai=function(){},_c.prototype.submitFrame=function(t){},_c.prototype.getEyeParameters=function(t){return null};var V9={MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},W9="left",H9="right";function Eh(t){var i=K6({},V9);t=K6(i,t||{}),_c.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new G9({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.Nai=this.config.BUFFER_SCALE,this.Iai=new x9(this.config),this.Dai=null,this.Eai=null,this.iit=null,this.kai=null,this.Lai=new M9(this.config.DPDB_URL,this.xai.bind(this)),this.Cai=new mc(this.Lai.getDeviceParams()),this.Oai=new R9,this.Oai.onChange(this.jai.bind(this)),this.Cai.setViewer(this.Oai.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.Rai=new C9),Qt()&&s.addEventListener("resize",this.eV.bind(this))}Eh.prototype=w.create(_c.prototype),Eh.prototype.vai=function(){return{position:null,orientation:this.Iai.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Eh.prototype.mai=function(){this.Iai.resetPose&&this.Iai.resetPose()},Eh.prototype.bhi=function(t){var i;if(t==W9)i=this.Cai.getFieldOfViewLeftEye();else{if(t!=H9)return console.error("Invalid eye provided: %s",t),null;i=this.Cai.getFieldOfViewRightEye()}return i},Eh.prototype.Thi=function(t){var i;if(t==W9)i=[.5*-this.Cai.viewer.interLensDistance,0,0];else{if(t!=H9)return console.error("Invalid eye provided: %s",t),null;i=[.5*this.Cai.viewer.interLensDistance,0,0]}return i},Eh.prototype.getEyeParameters=function(t){var i=this.Thi(t),e=this.bhi(t),s={offset:i,renderWidth:.5*this.Cai.device.width*this.Nai,renderHeight:this.Cai.device.height*this.Nai};return w.defineProperty(s,"fieldOfView",{enumerable:!0,get:function(){return n9("VRFieldOfView","VRFrameData's projection matrices"),e}}),s},Eh.prototype.xai=function(t){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.Cai.updateDeviceParams(t),this.Dai&&this.Dai.updateDeviceInfo(this.Cai)},Eh.prototype.Pai=function(){this.yM&&this.Dai&&(this.yM.leftBounds||this.yM.rightBounds)&&this.Dai.setTextureBounds(this.yM.leftBounds,this.yM.rightBounds)},Eh.prototype.yai=function(){var t=this.yM.source.getContext("webgl");if(t||(t=this.yM.source.getContext("experimental-webgl")),t||(t=this.yM.source.getContext("webgl2")),t){if(this.iit=t.canvas,this.kai=t.canvas.getAttribute("style"),this.yM.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=V6()*this.Nai,t.canvas.height=W6()*this.Nai,this.Eai=new f9(t)):(this.config.CARDBOARD_UI_DISABLED||(this.Eai=new f9(t)),this.Dai=new ma(t,this.Eai,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.Dai.updateDeviceInfo(this.Cai)),this.Eai&&this.Eai.listen(function(t){this.Oai.show(this.yM.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.Rai){var i=this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT;G6()&&q6()&&i?this.Rai.showTemporarily(i,this.yM.source.parentElement):this.Rai.update()}this.orientationHandler=this.Fhi.bind(this),s.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.Pai.bind(this),s.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.eV(),this.zai()}},Eh.prototype.Mai=function(){this.Dai&&(this.Dai.destroy(),this.Dai=null),this.Eai&&(this.Eai.destroy(),this.Eai=null),this.Rai&&this.Rai.hide(),this.Oai.hide(),this.iit&&(t9(this.iit),this.kai?this.iit.setAttribute("style",this.kai):this.iit.removeAttribute("style"),$6(this.iit),this.iit=null,this.kai=null),s.removeEventListener("orientationchange",this.orientationHandler),s.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Eh.prototype.pai=function(){this.Mai(),this.yai()},Eh.prototype.submitFrame=function(t){if(this.Dai)this.Pai(),this.Dai.submitFrame();else if(this.Eai&&this.yM){var i=this.yM.source.getContext("webgl").canvas;i.width==this.lastWidth&&i.height==this.lastHeight||this.Eai.onResize(),this.lastWidth=i.width,this.lastHeight=i.height,this.Eai.render()}},Eh.prototype.Fhi=function(t){this.Oai.hide(),this.Rai&&this.Rai.update(),this.eV()},Eh.prototype.eV=function(t){if(this.yM){var i=this.yM.source.getContext("webgl");t9(i.canvas);i.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),$6(i.canvas)}},Eh.prototype.jai=function(t){this.Cai.setViewer(t),this.Dai&&this.Dai.updateDeviceInfo(this.Cai),this.zai()},Eh.prototype.zai=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.Cai}});s.dispatchEvent(t)},Eh.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},Eh.VRDisplay=_c;var X9={PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function Z9(t){this.config=j6(j6({},X9),t),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in Il,this.native={},this.native.getVRDisplays=Il.getVRDisplays,this.native.VRFrameData=s.VRFrameData,this.native.VRDisplay=s.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&C6())&&(this.enable(),this.getVRDisplays().then((function(t){t&&t[0]&&t[0].Sai&&t[0].Sai()})))}Z9.prototype.getPolyfillDisplays=function(){if(this.Bai)return this.polyfillDisplays;if(C6()){var t=new Eh({MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(t)}return this.Bai=!0,this.polyfillDisplays},Z9.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,i=new this.native.VRFrameData,e=this.native.VRDisplay.prototype.getFrameData;s.VRDisplay.prototype.getFrameData=function(s){s instanceof t?e.call(this,s):(e.call(this,i),s.pose=i.pose,O6(i.leftProjectionMatrix,s.leftProjectionMatrix),O6(i.rightProjectionMatrix,s.rightProjectionMatrix),O6(i.leftViewMatrix,s.leftViewMatrix),O6(i.rightViewMatrix,s.rightViewMatrix))}}Il.getVRDisplays=this.getVRDisplays.bind(this),s.VRDisplay=Eh.VRDisplay,s.VRFrameData=Eh.VRFrameData},Z9.prototype.getVRDisplays=function(){var t,i=this,e=this.config;return this.hasNative?function(t){return Promise.race?Promise.race(t):new Promise((function(i,e){for(var s=0;s<t.length;s++)t[s].then(i,e)}))}([this.native.getVRDisplays.call(Il),new Promise((function(i){t=u((function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),i([])}),e.GET_VR_DISPLAYS_TIMEOUT)}))]).then((function(e){return c(t),e.length>0?e:i.getPolyfillDisplays()})):Promise.resolve(this.getPolyfillDisplays())},Z9.version="0.10.5-opentelly.3",Z9.VRFrameData=Eh.VRFrameData,Z9.VRDisplay=Eh.VRDisplay;var q9=w.freeze({default:Z9}),K9=q9&&Z9||q9;void 0!==Fi&&Fi.window&&(Fi.document||(Fi.document=Fi.window.document),Fi.navigator||(Fi.navigator=Fi.window.navigator));new K9({TOUCH_PANNER_DISABLED:!0,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:0,MOBILE_WAKE_LOCK:!Po.sL&&!Po.Ga,DPDB_URL:void 0});var vs,J9=class{Uai(t,i){const e=this.Qai;let s;switch(i){case e.VERTEX_SHADER:s=e.createShader(i),this.Fai=s;break;case e.FRAGMENT_SHADER:s=e.createShader(i),this.Yai=s;break;default:return void console.error("Invalid Shader Type:",i)}e.attachShader(this.Gai,s),e.shaderSource(s,t),e.compileShader(s)}Vai(t){const i=this.Qai;if(t){this.Wai={};for(const e in t)i.bindAttribLocation(this.Gai,t[e],e),this.Wai[e]=t[e]}}Hai(){this.Qai.linkProgram(this.Gai)}Xai(){const t=this.Qai;if(this.Zai){if(t.getProgramParameter(this.Gai,t.LINK_STATUS)){if(!this.Wai){this.Wai={};const i=t.getProgramParameter(this.Gai,t.ACTIVE_ATTRIBUTES);for(let e=0;e<i;e++){const i=t.getActiveAttrib(this.Gai,e);this.Wai[i.name]=t.getAttribLocation(this.Gai,i.name)}}this.qai={};const i=t.getProgramParameter(this.Gai,t.ACTIVE_UNIFORMS);let e="";for(let s=0;s<i;s++){e=t.getActiveUniform(this.Gai,s).name.replace("[0]",""),this.qai[e]=t.getUniformLocation(this.Gai,e)}}else this.Fai&&!t.getShaderParameter(this.Fai,t.COMPILE_STATUS)?console.error("Vertex shader compile error:",t.getShaderInfoLog(this.Fai)):this.Yai&&!t.getShaderParameter(this.Yai,t.COMPILE_STATUS)?console.error("Fragment shader compile error:",t.getShaderInfoLog(this.Yai)):console.error("Program link error:",t.getProgramInfoLog(this.Gai)),t.deleteProgram(this.Gai),this.Gai=null;t.deleteShader(this.Fai),t.deleteShader(this.Yai),this.Zai=!1}t.useProgram(this.Gai)}constructor(t){this.Wai=null,this.qai=null,this.Zai=!0,this.Fai=null,this.Yai=null,this.Qai=t,this.Gai=t.createProgram()}},$9=class{pr(t,i,e){let s=this.Qai;this.Kai(t,i,s,e),this.t.fg||this.t.iit.zG(s,s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE),s.drawElements(s.TRIANGLES,this.Jai,s.UNSIGNED_SHORT,0)}$ai(t){this.tui||(t.bindTexture(t.TEXTURE_2D,this.iui),this.t.iit.zG(t,t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.tui=!0)}Kai(t,i,e,s){const n=this.Gai;n.Xai(),this.$ai(e);const r=n.qai,o=n.Wai;let h;e.uniformMatrix4fv(r.projectionMat,!1,t),e.uniformMatrix4fv(r.modelViewMat,!1,i),h="right"===s?this.eui:this.sui,e.bindBuffer(e.ARRAY_BUFFER,h),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.nui),e.enableVertexAttribArray(o.position),e.enableVertexAttribArray(o.texCoord),e.vertexAttribPointer(o.position,3,e.FLOAT,!1,20,0),e.vertexAttribPointer(o.texCoord,2,e.FLOAT,!1,20,12),e.activeTexture(e.TEXTURE0),e.uniform1i(r.diffuse,0),e.bindTexture(e.TEXTURE_2D,this.iui)}constructor(t,i,e){this.tui=!1,this.Qai=t,this.iui=t.createTexture();let s=["uniform mat4 projectionMat;","uniform mat4 modelViewMat;","attribute vec3 position;","attribute vec2 texCoord;","varying vec2 vTexCoord;","void main() {","  vTexCoord = texCoord;","  gl_Position = projectionMat * modelViewMat * vec4( position, 1.0 );","}"].join("\n"),n=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");this.Gai=new J9(t),this.Gai.Uai(s,t.VERTEX_SHADER),this.Gai.Uai(n,t.FRAGMENT_SHADER),this.Gai.Vai({position:0,texCoord:1}),this.Gai.Hai();const r=[],o=[],h=[],a=40;for(let t=0;t<=40;++t){const i=t*_.PI/40,s=_.sin(i),n=_.cos(i);for(let i=0;i<=a;++i){const h=2*i*_.PI/a-_.PI,u=_.sin(h)*s,c=n,l=-_.cos(h)*s,d=i/a,f=t/40;switch(e){case"horizontal":r.push(2*u,2*c,2*l,d/2,f),o.push(2*u,2*c,2*l,d/2+.5,f);break;case"vertical":r.push(2*u,2*c,2*l,d,f/2),o.push(2*u,2*c,2*l,d,f/2+.5);break;default:r.push(2*u,2*c,2*l,d,f)}}}for(let t=0;t<40;++t){let i=41*t,e=41*(t+1);for(let t=0;t<a;++t){let s=i+t,n=e+t;h.push(s,n,s+1,n,n+1,s+1)}}switch(this.sui=t.createBuffer(),this.eui=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.sui),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.eui),e){case"horizontal":case"vertical":t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW);break;default:t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW)}this.nui=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.nui),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(h),t.STATIC_DRAW),this.Jai=h.length,this.t=i}},t8=class extends os{fa(){return new i8}constructor(){super("rui")}},i8=class extends Os{constructor(){super("stereochange")}},e8=class extends os{fa(){return new s8}constructor(){super("oui")}},s8=class extends Os{constructor(){super("directionchange")}},n8=_.PI/180,Hi=180/_.PI,ni=class{EP(t,i){return this.x=t,this.y=i,this}Ift(t){return this.x=t.x,this.y=t.y,this}hui(t){return this.EP(t[0],t[1])}aui(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}uui(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}constructor(t,i){this.x=t||0,this.y=i||0}},ya=class{EP(t,i,e){return this.x=t,this.y=i,this.z=e,this}Ift(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}hui(t){return this.EP(t[0],t[1],t[2])}aui(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}U(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}cui(){const t=this.U();if(0!==t){const i=1/t;this.lui(i)}else this.x=0,this.y=0,this.z=0;return this}lui(t){this.x*=t,this.y*=t,this.z*=t}dui(t){const i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,o=t.z,h=t.w,a=h*i+r*s-o*e,u=h*e+o*i-n*s,c=h*s+n*e-r*i,l=-n*i-r*e-o*s;return this.x=a*h+l*-n+u*-o-c*-r,this.y=u*h+l*-r+c*-n-a*-o,this.z=c*h+l*-o+a*-r-u*-n,this}fui(t){return this.x*t.x+this.y*t.y+this.z*t.z}_ui(t,i){const e=t.x,s=t.y,n=t.z,r=i.x,o=i.y,h=i.z;return this.x=s*h-n*o,this.y=n*r-e*h,this.z=e*o-s*r,this}constructor(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0}},r8=class{EP(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this}Ift(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}hui(t){return this.EP(t[0],t[1],t[2],t[3])}aui(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}fui(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}zN(t){return this.gui(this,t)}gui(t,i){const e=t.x,s=t.y,n=t.z,r=t.w,o=i.x,h=i.y,a=i.z,u=i.w;return this.x=e*u+r*o+s*a-n*h,this.y=s*u+r*h+n*o-e*a,this.z=n*u+r*a+e*h-s*o,this.w=r*u-e*o-s*h-n*a,this}wui(){return this.x*=-1,this.y*=-1,this.z*=-1,this.cui(),this}vui(){const t=this.x,i=this.y,e=this.z,s=this.w,n=t*i+e*s;let r,o,h;if(n>.499)r=2*_.atan2(t,s),o=_.PI/2,h=0;else if(n<-.499)r=-2*_.atan2(t,s),o=-_.PI/2,h=0;else{const a=t*t,u=i*i,c=e*e;r=_.atan2(2*i*s-2*t*e,1-2*u-2*c),o=_.asin(2*n),h=_.atan2(2*t*s-2*i*e,1-2*a-2*c)}return new Fr(r,h,o)}cui(){let t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1}},Fr=class{EP(t,i,e){return this.mui=t,this.pui=i,this.Aui=e,this}Ift(t){return this.EP(t.mui,t.pui,t.Aui)}nS(t){return this.mui+=t.mui,this.pui+=t.pui,this.Aui+=t.Aui,this}yui(){const t=this.mui,i=this.Aui,e=this.pui,s=_.cos(t/2),n=_.cos(i/2),r=_.cos(e/2),o=_.sin(t/2),h=_.sin(i/2),a=_.sin(e/2),u=s*n,c=o*h;return new r8(u*a+c*r,o*n*r+s*h*a,s*h*r-o*n*a,u*r-c*a)}constructor(t,i,e){this.mui=t||0,this.pui=i||0,this.Aui=e||0}},o8=.15,h8=class{MD(){this.Rt||(this.Rt=!0,this.we.addEventListener("keydown",this.Mui),this.we.addEventListener("mousedown",this.bui),this.we.addEventListener("touchstart",this.Tui),s.addEventListener("mousemove",this.er),s.addEventListener("mouseup",this.Sui),this.Nui(s),s.addEventListener("touchmove",this.Iui),s.addEventListener("touchend",this.Dui))}Nui(t){if(mb(t));else if(pb(t))try{t.parent.addEventListener("mouseup",this.Sui),this.Nui(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.Eui)}}bD(){this.Rt&&(this.Rt=!1,this.kui=!1,this.Lui&&(Ja(this.Lui),this.Lui=null),this.we.removeEventListener("keydown",this.Mui),this.we.removeEventListener("mousedown",this.bui),this.we.removeEventListener("touchstart",this.Tui),s.removeEventListener("mousemove",this.er),s.removeEventListener("mouseup",this.Sui),this.xui(s),s.removeEventListener("touchmove",this.Iui),s.removeEventListener("touchend",this.Dui))}xui(t){if(t.document.documentElement.removeEventListener("mouseleave",this.Eui),pb(t))try{t.parent.removeEventListener("mouseup",this.Sui),this.xui(t.parent)}catch(t){}}get Cui(){return new Fr(this.Oui,this.jui,this.Rui)}set Cui(t){this.Oui=t.mui,this.jui=t.pui,this.Rui=t.Aui}Pui(t){this.zui("Oui",t)}Bui(t){t=Qh(t,-_.PI/2,_.PI/2),this.zui("jui",t)}zui(t,i){this.Lui&&Ja(this.Lui);let e=this[t],s=nI(),n=()=>{let r=nI()-s;if(r>=80)return this[t]=i,Ja(this.Lui),void(this.Lui=null);this.Lui=Pc(n);let o=r/80;this[t]=e+(i-e)*o};this.Lui=Pc(n)}Uui(){this.jui+=2*_.PI*this.Qui.y/this.we.clientHeight*.3,this.Oui+=2*_.PI*this.Qui.x/this.we.clientWidth*.5,this.jui=Qh(this.jui,-_.PI/2,_.PI/2)}Fui(){this.kui=!1}Yui(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.we}resetPose(){this.jui=0,this.Oui=0}gn(){this.bD()}constructor(t){this.Rt=!1,this.jui=0,this.Oui=0,this.Rui=0,this.Lui=null,this.Gui=new ni,this.Vui=new ni,this.Qui=new ni,this.kui=!1,this.Mui=t=>{38===t.keyCode?this.Bui(this.jui+o8):39===t.keyCode?this.Pui(this.Oui-o8):40===t.keyCode?this.Bui(this.jui-o8):37===t.keyCode&&this.Pui(this.Oui+o8)},this.bui=t=>{this.Gui.EP(t.clientX,t.clientY),this.kui=!0,t.preventDefault()},this.Tui=t=>{t.touches&&1===t.touches.length&&(this.Gui.EP(t.touches[0].pageX,t.touches[0].pageY),this.kui=!0,t.preventDefault())},this.er=t=>{if(this.kui||this.Yui()){if(this.Yui()){let i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.Vui.EP(this.Gui.x-i,this.Gui.y-e)}else this.Vui.EP(t.clientX,t.clientY);this.Qui.uui(this.Vui,this.Gui),this.Gui.Ift(this.Vui),this.Uui()}},this.Iui=t=>{this.kui&&(this.Vui.EP(t.touches[0].pageX,t.touches[0].pageY),this.Qui.uui(this.Vui,this.Gui),this.Gui.Ift(this.Vui),this.Uui())},this.Sui=t=>{this.Fui()},this.Dui=t=>{this.Fui()},this.Eui=t=>{this.Fui()},this.we=t}},Ma=Fl(Gl()),a8=Fl(Vl()),u8=(Fl(Wl()),Fl(Hl())),c8=(Fl(Xl()),Fl(Zl())),l8=Fl(ql()),d8=Fl(Kl()),f8=Fl(Jl()),_8=Fl($l()),g8=["oui","xht","rui","error"];function w8(t){let i,e={get stereo(){return t.Wui},set stereo(i){t.Wui=i},get useDeviceMotionControls(){return t.Hui},set useDeviceMotionControls(i){t.Hui=i},get direction(){return t.Xui},set direction(i){t.Xui=i},get verticalFOV(){return t.Zui},set verticalFOV(i){t.Zui=i},get canPresentVR(){return t.qui},get state(){return t.Wdt},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new bL(t,g8,e),e}!function(t){t.Rs="unavailable",t.Kui="available",t.Oa="presenting"}(vs||(vs={}));var v8=new Fr(0*n8,0,0);function m8(t){return cd(t+180,360)-180}function p8(t,i){let e=t.fui(i);return 1-e*e<1e-4}var A8=class extends Mo{ko(){Il.getVRDisplays?(this.Jui=new VRFrameData,this.$ui(),s.addEventListener("vrdisplayconnect",this.$ui,!1),s.addEventListener("vrdisplaydisconnect",this.$ui,!1),s.addEventListener("vrdisplayactivate",this.tci,!1),s.addEventListener("vrdisplaydeactivate",this.ici,!1),s.addEventListener("vrdisplaypresentchange",this.eci,!1)):Il.getVRDevices?this.Axt("Your browser supports WebVR but not the latest version.",qa.VR_PLATFORM_UNSUPPORTED):this.Axt("Your browser does not support WebVR.",qa.VR_PLATFORM_UNSUPPORTED),this.t.yn(Tf.lo,this.do),this.do()}sci(){let t={alpha:!1,antialias:!1,preserveDrawingBuffer:!0};if(!this.nci){const t=h.createElement("canvas");t.className="theoplayer-vr",_b(t),t.style.zIndex="2",this.t.we.appendChild(t),this.nci=t}this.Qai=this.nci.getContext("webgl",t),this.Qai||(this.Qai=this.nci.getContext("experimental-webgl",t),this.Qai)?(this.Qai.enable(this.Qai.DEPTH_TEST),this.Qai.enable(this.Qai.CULL_FACE)):this.Axt("Your browser does not support WebGL.",qa.VR_PLATFORM_UNSUPPORTED)}rci(){let t=this.Xui;this.hci||(this.sci(),this.hci=!0),this.Qai&&(this.aci(new $9(this.Qai,this.t,this.uci)),this.nci.style.display="",this.gi||(this.gi=new h8(this.nci)),this.gi.MD(),this.t.ya.yn(Vi.ra,this.eV),this.t.yn(Bh.pn,this.eV),this.Xui=t,this.eV(),this.cci=Pc(this.lci))}dci(){let t=this.Xui;this.aci(void 0),this.gi&&this.gi.bD(),this.nci&&(this.nci.style.display="none"),this.t.ya.fn(Vi.ra,this.eV),this.t.fn(Bh.pn,this.eV),this.cci&&Ja(this.cci),this.Xui=t}fci(){var t;return null==(t=this.t.Wa())?void 0:t.vr}_ci(t){let i=this.Wdt,e=this.Wui;this.gci&&(this.wci=void 0,this.ici()),this.gci=t,this.gci&&(this.gci.depthNear=.1,this.gci.depthFar=1024),this.Wui=e,this.Wdt!==i&&this.Co(new ki),this.Wui!==e&&this.Co(new t8)}vci(t){let i=this.Wdt;this.mci=t,this.Wdt!==i&&this.Co(new ki)}aci(t){let i=this.Wdt;this.pci=t,this.Wdt!==i&&this.Co(new ki)}Aci(t){let i=this.Wdt,e=this.Wui;this.yci=t,this.gi&&(t?this.gi.bD():this.gi.MD()),this.Wdt!==i&&this.Co(new ki),this.Wui!==e&&this.Co(new t8)}Mci(t){let i=this.Wui;this.bci=t,this.Wui!==i&&this.Co(new t8)}Tci(){let t=this.nci;this.Sci===t.width&&this.Nci===t.height||(t.width=this.Sci,t.height=this.Nci,this.Ici())}Dci(t,i){(0,a8.default)(t,i.aui()),(0,c8.default)(t,t)}useDeviceOrientation(){return!!this.yci||this.Eci}kci(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().catch(Br)}Axt(t,i){Ct(t),this.Co(new as(new ao(i,t)))}Lci(){this.Co(new e8)}get Wui(){return this.qui?this.yci:this.bci}set Wui(t){this.qui?t?this.tci():this.ici():this.Mci(t)}get Hui(){return this.Eci}set Hui(t){this.Wui||(this.Eci=t,t&&Po.Ga&&this.kci())}get Xui(){let t=this.Cui;return{yaw:m8(t.mui*Hi),pitch:t.pui*Hi,roll:_.round(t.Aui*Hi)}}set Xui(t){let i=m8(t&&+t.yaw||0),e=m8(t&&+t.pitch||0),s=m8(t&&+t.roll||0);this.Cui=new Fr(i*n8,e*n8,s*n8)}get Cui(){if(this.Wdt===vs.Rs)return this.xci.vui();let t=this.Cci,i=this.Oci,e=new Fr;return t&&e.nS(t),i&&e.nS(i),e}set Cui(t){const i=this.Cui.yui();if(this.Wdt===vs.Rs)this.xci=t.yui();else{let i=this.gci;i&&i.resetPose&&i.resetPose(),this.gi&&(this.gi.Cui=t),this.xci=this.Cui.yui()}p8(i,this.xci)||this.Lci()}get Cci(){let t=this.wci&&this.wci.orientation;if(t)return(new r8).hui(t).vui()}get Oci(){return this.gi&&this.gi.Cui}get Zui(){return 180*this.jci}set Zui(t){t&&t>=0&&t<=180&&(this.jci=+t/180)}get qui(){return!(!this.gci||!this.gci.capabilities.canPresent)}get Wdt(){var t;return this.mci&&((null==(t=this.fci())?void 0:t.nativeVR)||this.pci)?this.yci?vs.Oa:vs.Kui:vs.Rs}gn(){this.dE.g_(),this.Vo(),this.dci(),this.ici(),this.t.fn(Tf.lo,this.do),s.removeEventListener("vrdisplayconnect",this.$ui,!1),s.removeEventListener("vrdisplaydisconnect",this.$ui,!1),s.removeEventListener("vrdisplayactivate",this.tci,!1),s.removeEventListener("vrdisplaydeactivate",this.ici,!1),s.removeEventListener("vrdisplaypresentchange",this.eci,!1),this.t=void 0}constructor(t){super(),this.dE=new Bd,this.xci=new r8,this.jci=.4,this.bci=!1,this.Eci=!1,this.mci=!1,this.wd=void 0,this.uci=D.NONE,this.gi=void 0,this.Rci=[],this.gci=void 0,this.yci=!1,this.hci=!1,this.nci=void 0,this.pci=void 0,this.Qai=null,this.cci=0,this.Jui=void 0,this.wci=void 0,this.Pci=(0,Ma.default)(),this.zci=(0,Ma.default)(),this.Sci=0,this.Nci=0,this.Bci=!0,this.Uci=0,this.Qci=()=>{this.t.fn($.Sm,this.Qci);let t=this.fci();t&&!t.nativeVR&&this.rci()},this.do=()=>{this.dci();let t=this.fci();this.wd=t,t&&t.panoramaMode!==Ht.NONE?(t.panoramaMode===Ht.PM180&&Ut("PanoramaMode is set to '180' while the VR API only supports '360', consider using the WebXR API if you need to play 180 degree content."),this.vci(!0),t.nativeVR?this.Co(new ki):(this.uci=t.stereoMode,this.t.yn($.Sm,this.Qci))):this.vci(!1)},this.tci=async()=>{if(this.Wdt!==vs.Rs&&this.qui){this.Bci=!1,this.Fci();try{await this.gci.requestPresent([{source:this.nci}])}catch(t){this.Axt("Failed to present VR content.",qa.VR_PRESENTATION_ERROR)}finally{this.eci()}}},this.ici=async()=>{if(this.gci)try{await this.gci.exitPresent()}catch(t){}finally{this.eci()}},this.$ui=async()=>{try{this.Rci=await Jr(Il.getVRDisplays(),this.dE.f_),this.gci&&Ai(this.Rci,this.gci)||this._ci(this.Rci[0])}catch(t){this.Rci=[],this._ci(void 0)}},this.eci=()=>{this.Aci(!!this.gci&&this.gci.isPresenting),this.eV(),this.Bci=!this.yci,this.Bci?Pc(this.Ici):this.Fci()},this.eV=()=>{if(!this.nci)return;const t=this.t.we.offsetWidth,i=this.t.we.offsetHeight;let e=this.gci;if(e&&this.Wui){let t=e.getEyeParameters("left"),i=e.getEyeParameters("right");t&&i&&(this.Sci=2*_.max(t.renderWidth,i.renderWidth),this.Nci=_.max(t.renderHeight,i.renderHeight))}else{let e=ra.Ys.h5;this.Sci=t*e,this.Nci=i*e}},this.Ici=()=>{if(!Po.Ga||!this.nci||!this.Bci)return;this.Fci();let t=this.nci,i=t.offsetWidth+1,e=t.offsetHeight;t.style.width=i+"px",t.style.height=e+"px",this.Uci=Pc(this.Fci)},this.Fci=()=>{if(!this.Uci)return;let t=this.nci;t.style.width="100%",t.style.height="100%",Ja(this.Uci),this.Uci=0},this.lci=()=>{let t=this.gci,i=this.jci,e=this.nci,s=this.pci,n=this.Qai,r=this.Jui,o=this.Pci,h=this.zci;this.Tci(),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t&&this.useDeviceOrientation()&&(t.getFrameData(r),this.wci=r.pose);let a=this.Cui.yui();this.Dci(h,a),t&&t.isPresenting?(this.cci=t.requestAnimationFrame(this.lci),n.viewport(0,0,.5*e.width,e.height),s.pr(r.leftProjectionMatrix,h,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(r.rightProjectionMatrix,h,"right"),t.submitFrame()):(this.cci=Pc(this.lci),(0,d8.default)(o,_.PI*i,e.width/e.height,.1,1024),this.Wui?(n.viewport(0,0,.5*e.width,e.height),s.pr(o,h,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(o,h,"right")):(n.viewport(0,0,e.width,e.height),s.pr(o,h))),p8(a,this.xci)||(this.xci.Ift(a),this.Lci())},this.t=t,this.Cui=v8,this.va=w8(this),this.ko()}};ec((function(t){return class extends t{fa(){if(null!==this.Yci){const t=this.Yci.va;return ro(super.fa(),{vr:t})}return super.fa()}gn(){var t;null==(t=this.Yci)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.Yci=null,i.vr.useWebXR||(this.Yci=new A8(this))}}}),st.Za);var y8=class{MD(){this.Le||(this.Le=!0,this.Us.addEventListener("mousedown",this.bui),this.Us.addEventListener("touchstart",this.Tui),s.addEventListener("mousemove",this.er),s.addEventListener("touchmove",this.Iui),s.addEventListener("mouseup",this.Sui),s.addEventListener("touchend",this.Dui),this.Nui(s))}bD(){this.Le&&(this.Le=!1,this.Us.removeEventListener("mousedown",this.bui),this.Us.removeEventListener("touchstart",this.Tui),s.removeEventListener("mousemove",this.er),s.removeEventListener("touchmove",this.Iui),s.removeEventListener("mouseup",this.Sui),s.removeEventListener("touchend",this.Dui),this.xui(s))}Nui(t){if(mb(t));else if(pb(t))try{t.parent.addEventListener("mouseup",this.Sui),this.Nui(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.Eui)}}xui(t){if(t.document.documentElement.removeEventListener("mouseleave",this.Eui),pb(t))try{t.parent.removeEventListener("mouseup",this.Sui),this.xui(t.parent)}catch(t){}}Fui(){this.Gci=!1}Uui(){const t=this.Wci.Vci;t.yaw+=2*_.PI*this.Hci.x*.4/this.Us.clientWidth,t.pitch+=2*_.PI*this.Hci.y*.5/this.Us.clientHeight,t.pitch=Qh(t.pitch,-_.PI/2,_.PI/2),this.Wci.Vci=t}Yui(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Us}gn(){this.bD()}constructor(t,i){this.Le=!1,this.Xci=new ni,this.Zci=new ni,this.Hci=new ni,this.Gci=!1,this.bui=t=>{this.Xci.EP(t.clientX,t.clientY),this.Gci=!0,t.preventDefault(),t.stopPropagation()},this.Tui=t=>{t.touches&&1===t.touches.length&&(this.Xci.EP(t.touches[0].pageX,t.touches[0].pageY),this.Gci=!0,t.preventDefault())},this.er=t=>{if(this.Gci||this.Yui()){if(this.Yui()){const i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.Zci.EP(this.Xci.x-i,this.Xci.y-e)}else this.Zci.EP(t.clientX,t.clientY);this.Hci.uui(this.Zci,this.Xci),this.Xci.Ift(this.Zci),this.Uui()}},this.Iui=t=>{this.Gci&&(this.Zci.EP(t.touches[0].pageX,t.touches[0].pageY),this.Hci.uui(this.Zci,this.Xci),this.Xci.Ift(this.Zci),this.Uui())},this.Sui=()=>{this.Fui()},this.Dui=()=>{this.Fui()},this.Eui=()=>{this.Fui()},this.Wci=t,this.Us=i}},M8=class{qci(t){t.clearColor(...this.yZ),t.clear(t.COLOR_BUFFER_BIT)}Kci(t,i){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.Jci.forEach((e=>{e.Kci(t,i)}))}$ci(t){this.Jci.push(t)}tli(){this.Jci=[]}constructor(){this.yZ=[0,0,0,1],this.Jci=[]}},b8=class{ili(t,i,e){const s=t.createBuffer();return null===s?(Ut("Failed to create buffer."),null):(t.bindBuffer(i,s),t.bufferData(i,e,t.STATIC_DRAW),s)}constructor(t,i,e,s,n){this.eli=t,this.BL=this.ili(t,i,e),this.sli=s,this.z2=n,this.nli=!1,this.rli=0,this.Zu=0}},T8=class extends b8{MD(t){if(null===this.BL)return void Ut("Attempted to enable buffer that failed to initialize.");if(null===t)return void Ut("Attempted to enable attribute without location.");const i=this.eli;i.bindBuffer(i.ARRAY_BUFFER,this.BL),i.vertexAttribPointer(t,this.sli,this.z2,this.nli,this.rli,this.Zu),i.enableVertexAttribArray(t)}bD(t){t&&this.eli.disableVertexAttribArray(t)}constructor(t,i,e){super(t,t.ARRAY_BUFFER,i,e,t.FLOAT)}};var zo,sr,S8,N8=class extends b8{oli(){const t=this.eli;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.BL),t.drawElements(t.TRIANGLES,this.hli,this.z2,this.Zu)}constructor(t,i){super(t,t.ELEMENT_ARRAY_BUFFER,i,1,t.UNSIGNED_SHORT),this.hli=i.length}};!function(t){t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor"}(zo||(zo={})),function(t){t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture"}(sr||(sr={})),function(t){t.Normal="vNormal",t.Color="vColor",t.UV="vUV"}(S8||(S8={}));var I8=class{ali(t,i,e){const s=this.uli(t,t.VERTEX_SHADER,i),n=this.uli(t,t.FRAGMENT_SHADER,e);if(null===s||null===n)return Ut("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(Ut("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(Ut("Failed to initialize shader program"),null))}uli(t,i,e){const s=t.createShader(i);if(null===s)return Ut("failed to create shader."),null;if(t.shaderSource(s,e),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(s);return Ut("Failed to compile shader with error: "+i),t.deleteShader(s),null}return s}cli(){return this.lli}dli(t){const i=this.lli;if(null===i)return Ut("Attempted to retrieve attribute location when shader program was not initialized"),null;const e=this.eli.getAttribLocation(i,t);return-1===e?null:e}fli(t){const i=this.lli;if(null===i)return Ut("Attempted to retrieve uniform location when shader program was not initialized"),null;const e=this.eli.getUniformLocation(i,t);return null===e&&Ct("Attempted to retrieve nonexistent uniform: "+t),e}constructor(t,i,e){this.eli=t,this.lli=this.ali(this.eli,i,e)}},D8=class{_li(){const t=this.gli.length,i=_.max(...this.wli);return i>=t?(Ct("Created geometry where largest index ("+i+") is larger than/equal to attribute array size ("+t+")"),!1):(i<t-1&&Ut("Created geometry where largest index ("+i+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.vli||this.vli.length===t||(Ct("Created geometry where position ("+t+") and uv ("+this.vli.length+") buffers have different length."),!1))}mli(t,i){if(!this._li())throw new g("Failed to validate buffers for WebGLGeometry.");const e=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y,t.z)})),new T8(t,new Float32Array(e),3)}(t,this.gli),s=function(t,i){return new N8(t,new Uint16Array(i))}(t,this.wli),n=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y)})),new T8(t,new Float32Array(e),2)}(t,this.vli);return new E8(e,s,n,i)}constructor(t,i,e){this.gli=t,this.wli=i,this.vli=e}},E8=class{Ali(){this.gli.MD(this.yli),null!==this.Mli&&this.vli.MD(this.Mli)}bli(){this.gli.bD(this.yli),null!==this.Mli&&this.vli.bD(this.Mli)}Kci(){this.wli.oli()}constructor(t,i,e,s){this.gli=t;const n=s.dli(zo.VertexPos);if(null===n)throw new g("Failed to get position attribute location.");this.yli=n,this.vli=e,this.Mli=s.dli(zo.VertexUV),this.wli=i}},k8=class extends D8{constructor(t=1,i=32,e=16,s=0,n=2*_.PI,r=0,o=_.PI){let h=0;const a=_.min(r+o,_.PI),u=[],c=[],l=[],d=[];for(let u=0;u<=e;u++){const f=[],g=u/e;let w=0;0===u&&0===r?w=.5/i:u===e&&a===_.PI&&(w=-.5/i);for(let e=0;e<=i;e++){const a=e/i,u=-t*_.cos(s+a*n)*_.sin(r+g*o),d=t*_.cos(r+g*o),v=t*_.sin(s+a*n)*_.sin(r+g*o);c.push(new ya(u,d,v)),l.push(new ni(a+w,1-g)),f.push(h++)}d.push(f)}for(let t=0;t<e;t++)for(let s=0;s<i;s++){const i=d[t][s+1],n=d[t][s],o=d[t+1][s],h=d[t+1][s+1];(0!==t||r>0)&&u.push(i,n,h),(t!==e-1||a<_.PI)&&u.push(n,o,h)}super(c,u,l)}},L8=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],x8=class{Tli(){const t=this.eli;t.activeTexture(this.Sli),t.bindTexture(t.TEXTURE_2D,this.Nli)}ur(){const t=this.eli;t.activeTexture(this.Sli),t.bindTexture(t.TEXTURE_2D,this.Nli),t.uniform1i(this.Ili,0)}Dli(t){const i=this.eli;i.bindTexture(i.TEXTURE_2D,this.Nli),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,this.y$,this.Eli,this.kli,this.Lli,t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}xli(t){const i=this.eli;i.bindTexture(i.TEXTURE_2D,this.Nli),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),t.iit.zG(i,i.TEXTURE_2D,this.y$,this.Eli,this.kli,this.Lli),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,i){if(this.eli=t,this.Nli=t.createTexture(),null===this.Nli)throw new g("Failed to create texture");const e=i.fli(sr.Texture);if(null===e)throw new g("Failed to get texture location.");this.Ili=e,t.bindTexture(t.TEXTURE_2D,this.Nli),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.Sli=t.TEXTURE0,this.y$=0,this.Eli=t.RGBA,this.kli=t.RGBA,this.Lli=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.y$,this.Eli,2,2,0,this.kli,this.Lli,new j(L8))}},C8="\n    attribute vec4 "+zo.VertexPos+";\n    attribute vec2 "+zo.VertexUV+";\n\n    uniform mat4 "+sr.ModelViewMat+";\n    uniform mat4 "+sr.ProjectionMat+";\n    \n    varying mediump vec2 "+S8.UV+";\n    \n    void main() {\n      gl_Position = "+sr.ProjectionMat+" * "+sr.ModelViewMat+" * "+zo.VertexPos+";\n      "+S8.UV+" = "+zo.VertexUV+";\n    }\n",O8="\n    varying mediump vec2 "+S8.UV+";\n    \n    uniform sampler2D "+sr.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+sr.Texture+", "+S8.UV+");\n    }\n",j8=class{cli(){return this.lli}MD(){this.eli.useProgram(this.lli.cli()),this.Nli.ur()}Cli(t){this.Nli.Dli(t)}Oli(t){this.Nli.xli(t)}constructor(t){this.eli=t,this.lli=new I8(t,C8,O8),this.Nli=new x8(t,this.lli)}},R8=class{Kci(t,i){if(this.jli(i.Rli)){this.Pli.Ali(),this.zli.MD();const e=this.Bli,s=i.Uli,n=(0,l8.default)(s,s,e);t.uniformMatrix4fv(this.Qli,!1,n);const r=i.Fli;t.uniformMatrix4fv(this.Yli,!1,r),this.Pli.Kci(),this.Pli.bli()}}jli(t){return"none"===this.Rli||"right"!==t&&"left"===this.Rli||"right"===t&&"right"===this.Rli}get Bli(){const t=(0,Ma.default)(),i=this.po;return(0,_8.default)(t,t,i.aui()),(0,f8.default)(t,t,this.Gli.x,new Float32Array([1,0,0])),(0,f8.default)(t,t,this.Gli.y,new Float32Array([0,1,0])),(0,f8.default)(t,t,this.Gli.z,new Float32Array([0,0,1])),t}constructor(t,i,e,s){this.po=new ya,this.Gli=new ya,this.Rli="none",this.zli=e;const n=e.cli();this.Pli=i.mli(t,n),s&&(this.Rli=s);const r=n.fli(sr.ModelViewMat);if(null===r)throw new g("Failed to get model view matrix location.");this.Qli=r;const o=n.fli(sr.ProjectionMat);if(null===o)throw new g("Failed to get projection matrix location.");this.Yli=o}},P8=class{Vli(){const t=(0,Ma.default)();return(0,d8.default)(t,this.Wli,this.Hli,this.Xli,this.Zli)}qli(){this.Kli=this.Vli()}get Fli(){return new Float32Array(this.Kli)}set Fli(t){this.Kli=t}Jli(){const t=(0,Ma.default)(),i=(0,u8.default)((0,Ma.default)(),this.$li.aui()),e=(0,a8.default)((0,Ma.default)(),this.tdi.aui());return(0,l8.default)(t,i,e),(0,c8.default)(t,t),t}idi(){this.edi=this.Jli()}get Uli(){return new Float32Array(this.edi)}sdi(){this.idi(),this.qli()}tr(){this.$li=new ya,this.Gli=new r8,this.sdi()}ndi(t){const i=this.tdi.vui();i.nS(t),this.Gli=i.yui()}rdi(t){this.Gli=t.yui()}get odi(){return this.Wli}set odi(t){this.Wli=t,this.qli()}get hdi(){return this.Hli}set hdi(t){this.Hli=t,this.qli()}get po(){return(new ya).Ift(this.$li)}set po(t){this.$li=t,this.idi()}get Gli(){return(new r8).Ift(this.tdi)}set Gli(t){this.tdi=t,this.idi()}constructor(t){this.Wli=72*_.PI/180,this.Hli=1.77,this.Xli=.1,this.Zli=100,this.Rli="none",this.$li=new ya,this.tdi=new r8,this.Kli=this.Vli(),this.edi=this.Jli(),t&&(this.Rli=t)}},z8=1e-4,B8=class extends Mo{ko(){this.adi(),this.eli?Il.xr?(Il.xr.addEventListener("devicechange",this.udi),this.cdi().then((()=>{this.ldi?(this.ddi(),this.fdi(),this._di()):this.Axt("XR: Inline session not available. Panorama functionality will not work.",qa.VR_PRESENTATION_ERROR)}))):this.Axt("Your browser does not support WebXR",qa.VR_PLATFORM_UNSUPPORTED):this.Axt("Your browser does not support webGL",qa.VR_PLATFORM_UNSUPPORTED)}_di(){this.Qo.ya.yn(Vi.ra,this.mn),this.Qo.yn(Bh.pn,this.mn),this.Qo.yn(Tf.lo,this.do),this.Qo.yn(Tf.$v,this.HQ)}adi(){this.gdi=h.createElement("canvas"),this.gdi.className="theoplayer-vr",this.gdi.style.zIndex="2",this.gdi.style.background="black",this.gdi.style.display="none",this.Qo.we.appendChild(this.gdi),_b(this.gdi);let t=this.gdi.getContext("webgl2");t||(t=this.gdi.getContext("webgl")),t&&(this.eli=t,this.wdi=new y8(this,this.gdi))}async cdi(){Il.xr?await Promise.all([Il.xr.isSessionSupported("inline").then((t=>{this.ldi=t})).catch((t=>{this.ldi=!1,this.Axt("exception when calling xr.isSessionSupported for inline session: "+t,qa.VR_PRESENTATION_ERROR)})),Il.xr.isSessionSupported("immersive-vr").then((t=>{this.vdi=t})).catch((t=>{this.vdi=!1,this.Axt("exception when calling xr.isSessionSupported for immersive-vr session: "+t,qa.VR_PRESENTATION_ERROR)}))]):(this.ldi=!1,this.vdi=!1)}ddi(){const t=this.fci();this.GO=t,this.mci=Boolean(t),this.mci&&(this.mdi=(null==t?void 0:t.stereoMode)||D.NONE,this.pdi=(null==t?void 0:t.panoramaMode)||Ht.NONE,this.Adi&&(this.ydi(this.pdi,this.mdi),this.rci()))}ydi(t,i){if(!this.eli||t===Ht.NONE)return;const e=this.eli;let s,n;this.Mdi.tli(),t===Ht.PM360?(s=2*_.PI,n=-_.PI/2):(s=_.PI,n=-_.PI);const r=new k8(16,60,40,0,s),o=[],h=[];for(let t=0;t<r.vli.length;t++){const e=r.vli[t];switch(i){case D.NONE:o.push(e),h.push(e);break;case D.VERTICAL:o.push(new ni(e.x,.5*e.y)),h.push(new ni(e.x,.5*e.y+.5));break;case D.HORIZONTAL:o.push(new ni(.5*e.x,e.y)),h.push(new ni(.5*e.x+.5,e.y))}}r.gli.forEach((t=>{t.x*=-1}));const a=new D8(r.gli,r.wli,o),u=new D8(r.gli,r.wli,h);this.bdi=new j8(e);const c=new R8(e,a,this.bdi,"left");c.Gli.y=n,this.Mdi.$ci(c);const l=new R8(e,u,this.bdi,"right");l.Gli.y=n,this.Mdi.$ci(l)}rci(){this.gdi.style.display="block",this.ldi&&this.Qo.yn(Tf.jh,this.Tdi)}dci(){this.Sdi(),this.Qo.fn(Tf.jh,this.Tdi),this.gdi.style.display="none"}Ndi(){this.Idi(),this.Ddi()}async Edi(){if(this.kdi||!this.ldi)return;const t={optionalFeatures:["local"]};try{const i=await Jr(Il.xr.requestSession("inline",t),this.dE.f_);let e;e=Po.Qs?Po.nk?"viewer":"local":"viewer";const s=await i.requestReferenceSpace(e);i.addEventListener("end",this.Idi),this.Ldi=s,this.kdi=i,this.wdi.MD(),this.xdi(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,this.eli),inlineVerticalFieldOfView:this.Wli*n8})}catch(t){this.Idi(),this.Axt(t,qa.VR_PRESENTATION_ERROR)}}Idi(){this.kdi&&(this.Sdi(),this.wdi.bD(),this.kdi.removeEventListener("end",this.Ddi),this.kdi.end(),this.kdi=null,this.fdi())}async Cdi(){if(!this.Odi&&this.vdi){this.Sdi();try{const t=await Jr(Il.xr.requestSession("immersive-vr"),this.dE.f_),i=await t.requestReferenceSpace("local");t.addEventListener("end",this.Ddi),this.jdi=i,this.Odi=t,await this.Rdi(),this.xdi()}catch(t){this.Ddi(),this.Axt(t,qa.VR_PRESENTATION_ERROR)}}}async Rdi(){const t=this.eli,i=this.Odi;this.gdi&&t&&i&&!this.Pdi&&(this.gdi.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),this.gdi.addEventListener("webglcontextrestored",(()=>{this.ydi(this.pdi,this.mdi)})),this.Pdi=!0,await t.makeXRCompatible(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}))}fdi(){if(!this.Odi&&this.eli){const t=this.eli,i=this.gdi.clientWidth,e=this.gdi.clientHeight,s=ra.Ys.h5;this.gdi.width=i*s,this.gdi.height=e*s,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}xdi(){null===this.zdi&&(this.Bdi(),this.Udi?this.zdi=this.Udi.requestAnimationFrame(this.Qdi):(this.Fdi(),Ut("XR: Attempted to start animation loop without inline or immersive session.")))}Sdi(){null!==this.zdi&&(this.Fdi(),this.Udi?this.Udi.cancelAnimationFrame(this.zdi):Ut("XR: Attempted to stop animation loop by cancelAnimationFrame even though there is no session running."),this.zdi=null)}Bdi(){if(null!==this.Ydi)return;const t=this.Qo.Vg();if(void 0===t||!(t instanceof HTMLVideoElement))return void Ut("No video source.");if("function"!=typeof t.requestVideoFrameCallback)return;const i=()=>{this.bdi.Oli(this.Qo),this.Ydi=t.requestVideoFrameCallback(i)};this.Gdi=t,this.Ydi=t.requestVideoFrameCallback(i)}Fdi(){var t,i;null!==this.Ydi&&(null==(i=this.Gdi)||null==(t=i.cancelVideoFrameCallback)||t.call(i,this.Ydi),this.Gdi=null,this.Ydi=null)}Vdi(){return!!this.Wdi||(Po.Ga?this.Hdi&&this.Xdi:this.Hdi)}kci(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.Xdi="granted"===t}))}Zdi(){return(!this.fg()||Boolean(this.qdi))&&this.Kdi()}fg(){return this.Qo.fg}Kdi(){return this.Qo.Sg>=2}get mci(){return this.Jdi}set mci(t){const i=this.Wdt;this.Jdi=t,this.Wdt!==i&&this.Co(new ki)}get Adi(){return this.pdi!==Ht.NONE}get pdi(){return this.$di}set pdi(t){const i=this.Wdt;this.$di=t,this.Wdt!==i&&this.Co(new ki)}get vdi(){return this.tfi}set vdi(t){const i=this.Wdt;this.tfi=t,this.Wdt!==i&&this.Co(new ki)}get qui(){return this.vdi}get Udi(){return this.Odi||this.kdi}get Odi(){return this.Wdi}set Odi(t){const i=this.Wdt;this.Wdi=t,this.Wdt!==i&&this.Co(new ki)}get ifi(){return this.jdi||this.Ldi}get Xui(){const t=this.efi.vui();return{yaw:t.mui*Hi,pitch:t.pui*Hi,roll:t.Aui*Hi}}set Xui(t){const i=U8(t&&t.pitch||0)*n8,e=U8(t&&t.roll||0)*n8,s=U8(t&&t.yaw||0)*n8,n=new Fr(s,i,e);this.efi=n.yui()}get Vci(){const t=this.sfi.vui();return{yaw:t.mui,pitch:t.pui,roll:t.Aui}}set Vci(t){const i=Q8(t&&t.pitch||0),e=Q8(t&&t.roll||0),s=Q8(t&&t.yaw||0),n=new Fr(s,i,e);this.sfi=n.yui()}get Wdt(){return this.mci?this.Odi?vs.Oa:vs.Kui:vs.Rs}get Wui(){return null!==this.Odi}set Wui(t){const i=this.Wui;t&&this.vdi?this.Cdi():this.Ddi(),this.Wui!==i&&this.Co(new t8)}get Hui(){return this.Hdi}set Hui(t){null===this.Wdi&&(this.Hdi=t,t&&Po.Ga&&this.kci())}get Zui(){return this.Wli}set Zui(t){t&&t>=0&&t<=180&&(this.Wli=t,null!==this.kdi&&this.kdi.updateRenderState({inlineVerticalFieldOfView:this.Wli*n8}))}Axt(t,i){Ct(t),this.Co(new as(new ao(i,t)))}fci(){const t=this.Qo.Wa();return t&&t.vr}gn(){this.dE.g_(),this.Ndi(),this.Vo(),this.Qo=void 0,this.eli=void 0}constructor(t){super(),this.dE=new Bd,this.ldi=!1,this.tfi=!1,this.efi=new r8,this.nfi=new r8,this.sfi=new r8,this.Wli=74,this.Hdi=!1,this.GO=void 0,this.mdi=D.NONE,this.Jdi=!1,this.$di=Ht.NONE,this.Mdi=new M8,this.kdi=null,this.Wdi=null,this.Ldi=null,this.jdi=null,this.Pdi=!1,this.zdi=null,this.Gdi=null,this.Ydi=null,this.qdi=0,this.Xdi=!1,this.udi=()=>{this.cdi()},this.do=()=>{this.dci(),this.Ndi(),this.ddi()},this.Tdi=()=>{this.Edi()},this.Ddi=()=>{this.Odi&&(IN("Ending immersive session"),this.Sdi(),this.Odi.removeEventListener("end",this.Ddi),this.Odi.end(),this.Odi=null,this.jdi=null,this.Pdi=!1,this.kdi?this.xdi():this.Edi())},this.mn=()=>{this.fdi()},this.Qdi=(t,i)=>{if(!this.eli)return;const e=this.eli,s=this.Udi;if(null===this.Ydi&&this.Zdi()&&(this.bdi.Oli(this.Qo),this.qdi>0&&(this.qdi-=1)),null===s||void 0===i)return void Ut("Attempted to run webXR animation loop without session or xrFrame.");this.zdi=s.requestAnimationFrame(this.Qdi);const n=s.renderState.baseLayer,r=i.getViewerPose(this.ifi);if(void 0===n||void 0===r)return void Ut("Attempted to run webXR animation loop without glLayer or viewerPose.");e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer);let o=new Fr,h=0;for(const t of r.views){const i=new P8(t.eye);if(i.Fli=t.projectionMatrix,this.Vdi()){let e;if(Po.Qs&&Po.nk&&null===this.Wdi){if(e=t.transform.inverse.orientation,0===e.x&&0===e.y&&0===e.z&&1===e.w)return}else e=t.transform.orientation;i.Gli=new r8(e.x,e.y,e.z,e.w)}this.kdi&&i.ndi(this.sfi.vui()),o=o.nS(i.Gli.vui()),h+=1;const s=n.getViewport(t);s&&e.viewport(s.x,s.y,s.width,s.height),this.Mdi.Kci(e,i)}const a=new Fr(o.mui/h,o.pui/h,o.Aui);this.efi=a.yui(),function(t,i){const e=t.fui(i);return 1-e*e<z8}(this.efi,this.nfi)||(this.nfi.Ift(this.efi),this.Co(new e8))},this.HQ=()=>{this.qdi=5},this.Qo=t,this.va=w8(this),this.ko()}};function U8(t){return cd(t+180,360)-180}function Q8(t){return cd(t+_.PI,2*_.PI)-_.PI}ec((function(t){return class extends t{fa(){return null!==this.Wci?ro(super.fa(),{vr:this.Wci.va}):super.fa()}gn(){var t;null==(t=this.Wci)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.Wci=null,i.vr.useWebXR&&(this.Wci=new B8(this))}}}),st.Za);var F8=class extends B{get va(){return this.Xa||(this.Xa=function(t){let i,e={get status(){return t.fD},get tasks(){return t.mii},get network(){return t.hF.va},createTask:(i,e)=>t.rfi(i,e),addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new jt(t,e),e}(this)),this.Xa}get fD(){return this.ofi.fD}get mii(){return this.ofi.mii.va}get hF(){return this.Ztt}rfi(t,i,e){let s,n;if(void 0===e&&(e="persistent"),!t)throw new g("Unexpected - The source description is undefined");if(s=dl(t),n=M5(i),Mu(s))throw new g("Invalid source description");return this.ofi.fii(s,n).va}constructor(t,i){super(),this.ofi=t,this.Ztt=i,this.ofi.yn("xht",this.Ds)}};var Y8=function(){const t=new aL(ra.Hj,!1),i=Th.lL,e=new k5(t),s=new p5(i,e),n=new cL(t),r=new O3(i.znt,s,"persistent");return new F8(r,n)}().va;function G8(t,i){if("function"==typeof t.getAll){return V8(void 0===i?t.getAll():t.getAll(i))}return function(t){let i=new Oi,e=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(e.push(s.value),s.continue()):i.LL(e),Br()},t.onerror=()=>{i.xL(t.error),Br()},i.OL}(void 0===i?t.openCursor():t.openCursor(i))}function V8(t){return new Promise(((i,e)=>{t.onsuccess=()=>{i(t.result),Br()},t.onerror=()=>{e(t.error),Br()}}))}var W8=class{g_(){if(this.ro)try{this.Cnt.abort(),this.ro=!1}catch(t){}}constructor(t){this.Cnt=t,this.ro=!0,this.OL=new Promise(((t,i)=>{this.Cnt.oncomplete=()=>{this.ro=!1,t(),Br()},this.Cnt.onerror=()=>{this.ro&&(this.ro=!1,i(this.Cnt.error||new g("Transaction error")),Br())},this.Cnt.onabort=()=>{this.ro=!1,i(new g("Transaction aborted")),Br()}}))}};async function H8(t,i,e){const s=new W8(t);try{const[t]=await Promise.all([i(e),s.OL]);return t}catch(t){if(!s.ro)throw new kn("IDBTransaction committed prematurely",t);throw t}finally{s.g_()}}var X8=class{get l(){return this.ast.l}ynt(t){return Promise.resolve("persistent"===t)}Mnt(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(oQ(i));return V8(this.hfi(rn.Qnt).put(t))}async bnt(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(oQ(i));for(const e of t)await this.Mnt(e,i)}async NL(t){return Boolean(await this.IL(t))}IL(t){return V8(this.hfi(rn.Unt).get(t))}Tnt(t,i){return V8(this.hfi(rn.Unt).index(i).get(t))}async _nt(t){const i=[];for(let e of t){const t=await this.IL(e);t&&i.push(t)}return i}Snt(){return G8(this.hfi(rn.Unt))}Nnt(t){return G8(this.hfi(rn.Unt),t)}Int(t,i){return G8(this.hfi(rn.Unt).index(i),t)}rS(t){return V8(this.hfi(rn.Qnt).delete(t))}async Dnt(t){for(const i of t)await this.rS(i)}Ent(){return V8(this.hfi(rn.Qnt).clear())}hfi(t){if(!this.afi)throw new g("Lock was released");if(!function(t,i){return t===rn.Unt&&i===rn.Unt||i===rn.Qnt}(t,this.afi.mode))throw new g("Incompatible transaction mode: "+this.afi.mode+", expected "+t);return this.afi.objectStore(this.l)}ufi(){this.ast.cfi(this),this.afi=void 0}constructor(t,i){this.ast=t,this.afi=i}};var Z8=class{ynt(t){return Promise.resolve("persistent"===t)}Mnt(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(oQ(i)):this.Cnt(rn.Qnt,(i=>i.Mnt(t)))}bnt(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(oQ(i)):this.Cnt(rn.Qnt,(i=>i.bnt(t)))}NL(t){return this.Cnt(rn.Unt,(i=>i.NL(t)))}IL(t){return this.Cnt(rn.Unt,(i=>i.IL(t)))}Tnt(t,i){return this.Cnt(rn.Unt,(e=>e.Tnt(t,i)))}_nt(t){return this.Cnt(rn.Unt,(i=>i._nt(t)))}Snt(){return this.Cnt(rn.Unt,(t=>t.Snt()))}Nnt(t){return this.Cnt(rn.Unt,(i=>i.Nnt(t)))}Int(t,i){return this.Cnt(rn.Unt,(e=>e.Int(t,i)))}rS(t){return this.Cnt(rn.Qnt,(i=>i.rS(t)))}Dnt(t){return this.Cnt(rn.Qnt,(i=>i.Dnt(t)))}Ent(){return this.Cnt(rn.Qnt,(t=>t.Ent()))}$Nt(t){return this.lfi(),this.UNt=new X8(this,t),this.UNt}lfi(){if(void 0!==this.UNt)throw new g("Already locked")}cfi(t){if(this.UNt!==t)throw new g("Incorrect lock");this.UNt=void 0}JO(t){return this.XZ.JO(t)}Cnt(t,i){return this.JO((()=>this.dfi(t,i)))}async dfi(t,i){this.lfi();const e=this.ffi.transaction(this.l,t),s=this.$Nt(e);try{return await H8(e,i,s)}finally{s.ufi()}}_fi(t){this.lfi();const i=this.ffi.transaction(this.l,t);return this.$Nt(i)}static gfi(t,i){let e;const s=new Promise((t=>{e=t})),n=t.reduce(((t,i)=>t.then((()=>{let t;const e=new Promise((i=>{t=i}));return i.JO((()=>(t(),s))).catch(Br),e}))),Promise.resolve());return e(n.then(i)),s}constructor(t,i){this.UNt=void 0,this.XZ=new Ku,this.ffi=t,this.l=i}},q8={Gy:17,wfi:async t=>{const{transaction:i,database:e}=t,s=i.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)e.deleteObjectStore(s[t]);e.createObjectStore(i7,{keyPath:"id"}),e.createObjectStore(e7,{keyPath:"key"}),e.createObjectStore(s7,{keyPath:"key"});e.createObjectStore(n7,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");e.createObjectStore(r7,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},K8=class{async vfi(t){for(const i of this.mfi)this.pfi<i.Gy&&await i.wfi(t)}constructor(t){this.pfi=t}},J8=class extends K8{get mfi(){return[q8]}},$8=new class{Afi(t){this.yfi=t}G7(t){return this.yfi(t)}constructor(){this.yfi=t=>new J8(t)}},t7=18,i7="cachingTask",e7="licences",s7="manifest",n7="segment",r7="segmentMetadata";async function o7(){!function(){if("undefined"==typeof indexedDB)throw new g("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",t7);return t.addEventListener("upgradeneeded",h7),await V8(t)}async function h7(t){const i=t.oldVersion<=t7?t.oldVersion:-1,e=t.target,s=e.result,n=e.transaction,r=$8.G7(i),o={database:s,transaction:n};await H8(n,(t=>r.vfi(t)),o)}var a7=class{static get lL(){return this.Jnt||(this.Jnt=o7()),this.Jnt}};a7.Jnt=void 0;var u7=class{Cnt(t){return t(this)}ufi(){this.Rnt.ufi(),this.jnt.ufi(),this.Pnt.ufi(),this.znt.ufi(),this.Bnt.ufi()}constructor(t,i){this.Rnt=t.Rnt.$Nt(i),this.jnt=t.jnt.$Nt(i),this.Pnt=t.Pnt.$Nt(i),this.znt=t.znt.$Nt(i),this.Bnt=t.Bnt.$Nt(i)}};Th.wa(class t{static async G7(){const i=await a7.lL;return new t(i)}Cnt(t){const i=this.allCollections;return Z8.gfi(i,(()=>this.dfi(i,t)))}async dfi(t,i){const e=t.map((t=>t.l)),s=this.ffi.transaction(e,rn.Qnt),n=new u7(this,s);try{return await H8(s,i,n)}finally{n.ufi()}}get allCollections(){return[this.jnt,this.Rnt,this.Pnt,this.znt,this.Bnt]}constructor(t){this.ffi=t,this.Rnt=new Z8(t,r7),this.jnt=new Z8(t,n7),this.Pnt=new Z8(t,s7),this.znt=new Z8(t,i7),this.Bnt=new Z8(t,e7)}}.G7);var c7=class{Mfi(t){const i=this.KH.C_(),e=t.createGain();for(const s of i){t.createMediaElementSource(s).connect(e)}return e}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){const t=this;return{createAudioSourceNode:i=>t.Mfi(i)}}constructor(t){this.Xa=void 0,this.KH=t}};ec((function(t){return class extends t{fa(){const t=this.bfi.va;return ro(super.fa(),{get audio(){return t}})}constructor(t,i){super(t,i),this.bfi=new c7(this.Ytt)}}}),st.Za);ec((function(t){return class i extends t{ga(t){const e=i.Tfi(this.wd.analytics),s=i.Tfi(t?t.analytics:void 0);e||s?this.Sfi(ol({},e,s)):this.Nfi&&this.Nfi.disable(),super.ga(t)}Sfi(t){if(this.Nfi)this.Nfi.enable(),this.Nfi.setOptions(t);else{const i=s.youbora;if(!i)throw new g("Youbora JavaScript library not loaded.");if(!i.adapters.TheoPlayer2)throw new g("TheoPlayer2 adapter not available on Youbora JavasScript library");const e=new i.Plugin(t);e.setAdapter(new i.adapters.TheoPlayer2(this.va)),this.Oc&&i.adapters.TheoPlayer2.NativeAdsAdapter&&e.setAdsAdapter(new i.adapters.TheoPlayer2.NativeAdsAdapter(this.va)),this.Nfi=e}}static Tfi(t){if(t){const i=t.filter((t=>"youbora"===t.integration));if(0===i.length)return;if(i.length>1)throw new g("Only one youbora analytics configuration expected");const e=i[0],{integration:s}=e;return m_(e,["integration"])}}gn(){this.Nfi&&this.Nfi.disable(),super.gn()}constructor(t,i){super(t,i)}}}),st.vit);var l7=1,d7=0,f7=1e3,_7=class t extends Hd{Ifi(){const t=this.ct===1/0,i=t?l7:d7,e=t?-1:this.ct,s=Pe(this.Qo.rt.Rw,this.Dfi);this.Efi.setPresentationInformation(new this.kfi(i,e,s))}Dfi(t){const i=t.qw.Rw,e=[];for(let t=0;t<i.length;t++){const s=i[t];s.ji&&s.Ti&&e.push({trackIdx:t,bitrate:s.GP,width:s.ji,height:s.Ti,codecIdentifier:s.$nt})}return e}Lfi(){return this.Qo.Q_()*f7}get ct(){return this.Qo.Td()*f7}get xfi(){return this.Cfi}get Ofi(){return this.jfi}set Ofi(t){this.jfi=t,t&&this.Efi.reportPlayerState(t)}set Rfi(t){this.Pfi=t}zfi(){return v((()=>{this.Bfi(),this.Ufi()}),t.Qfi)}TOt(){this.Qo.Oc&&(this.Qo.Oc.yn("Uit",this.poi),this.Qo.Oc.yn("Qit",this.Aoi),this.Qo.Oc.yn("yCt",this.Ffi),this.Qo.Oc.yn("pCt",this.Yfi)),this.Qo.yn(Tf.Ov,this.Gfi),this.Qo.yn(hi.ha,this.M3),this.Qo.yn(Tf.Sh,this.Vfi),this.Qo.yn(Tf.jh,this.Tdi),this.Qo.yn($.Sm,this.VQ),this.Qo.yn(Tf.Jv,this.eV),this.Qo.yn(Tf.$v,this.HQ),this.Qo.yn($.Tm,this.YQ),this.Qo.yn(Tf.hm,this.Wfi)}SOt(){this.Qo.Oc&&(this.Qo.Oc.fn("Uit",this.poi),this.Qo.Oc.fn("Qit",this.Aoi),this.Qo.Oc.fn("yCt",this.Ffi),this.Qo.Oc.fn("pCt",this.Yfi)),this.Qo.fn(Tf.Ov,this.Gfi),this.Qo.fn(hi.ha,this.M3),this.Qo.fn(Tf.Sh,this.Vfi),this.Qo.fn(Tf.jh,this.Tdi),this.Qo.fn($.Sm,this.VQ),this.Qo.fn(Tf.Jv,this.eV),this.Qo.fn(Tf.$v,this.HQ),this.Qo.fn($.Tm,this.YQ),this.Qo.fn(Tf.hm,this.Wfi)}gn(){m(this.Hfi),this.SOt()}constructor(t,i,e,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.Qo=t,this.GO=i,this.Efi=e,this.Xfi=s,this.Zfi=n,this.kfi=r,this.qfi=!0,this.Cfi=!1,this.Pfi=void 0,this.jfi=void 0,this.Kfi=void 0,this.poi=t=>{const i=t.Rit;i.p$t();var e;e=i.Nit().duration;const s="linear"===i.Nit().type;i.A$t(),i.w$t();s&&(this.Cfi=!0),this.Rfi=this.Zfi.AD_IMPRESSION,this.Rfi=this.Zfi.AD_STARTED},this.Aoi=t=>{this.Cfi=!1,this.Rfi=this.Zfi.AD_COMPLETED},this.Ffi=t=>{t.bqt===_o.ADBLOCK?this.Rfi=this.Zfi.AD_BLOCKED:this.Rfi=this.Zfi.AD_ERROR},this.Yfi=()=>{this.Rfi=this.Zfi.AD_SKIPPED},this.Wfi=t=>{var i,e,s,n;t.$D===Jt.VA&&(this.Kfi&&t.CF!==this.Kfi&&this.Efi.reportABRSwitch(this.Kfi,t.CF),this.Kfi=t.CF,this.Efi.reportChunkRequest(new MMChunkInformation(t.AM,t.CF,t.Kb,t.uut.zu,void 0,void 0,null!=(s=null==(i=t.uut.Sat)?void 0:i[0])?s:0,null!=(n=null==(e=t.uut.Sat)?void 0:e[1])?n:-1)))},this.Gfi=t=>{this.Ofi=this.Xfi.STOPPED,this.Co(t)},this.M3=t=>{this.Ofi=this.Xfi.ERROR,this.Efi.reportError(t.error,this.Lfi())},this.Vfi=()=>{this.xfi?this.Rfi=this.Zfi.AD_PAUSED:this.Ofi=this.Xfi.PAUSED},this.Tdi=()=>{this.xfi&&(this.Rfi=this.Zfi.AD_PLAY)},this.VQ=()=>{this.xfi?(this.Pfi===this.Zfi.AD_PAUSED&&(this.Rfi=this.Zfi.AD_RESUMED),this.Rfi=this.Zfi.AD_PLAYING):(this.qfi&&(this.qfi=!1,this.Ifi(),this.Ofi=this.Xfi.STARTED),this.Ofi!==this.Xfi.PAUSED&&this.Ofi!==this.Xfi.BUFFERING||(this.Ofi=this.Xfi.RESUMED))},this.eV=()=>{this.Efi.reportPresentationSize(this.Qo.Rg,this.Qo.Cg)},this.HQ=t=>{this.xfi||this.Ofi!==this.Xfi.PAUSED||this.Efi.reportPlayerSeekCompleted(t.currentTime*f7)},this.YQ=()=>{this.xfi||(this.Ofi=this.Xfi.BUFFERING)},this.Ufi=()=>{this.Efi.reportDownloadRate(_.floor(Gu.lL.OP()))},this.Bfi=()=>{this.xfi||this.Efi.reportPlaybackPosition(this.Lfi())},this.Ofi=this.Xfi.INITIALIZED,this.TOt(),this.Hfi=this.zfi()}};_7.Qfi=2e3,ec((function(t){return class extends t{gn(){super.gn(),this.Jfi()}constructor(t,i){super(t,i),this.$fi=void 0,this.t_i=void 0,this.i_i=()=>{this.t_i=void 0,this.Jfi();const t=super.Wa();t&&(this.t_i=function(t,i){const e=function(t,i){if(t&&t.analytics)for(const i of t.analytics)if("smartsight"===i.integration)return i;if(i&&i.analytics)for(const t of i.analytics)if("smartsight"===t.integration)return t;return}(t,i);if(!e)return;return e}(t,this.wd)),this.e_i()},this.e_i=()=>{if(!this.$fi&&this.t_i&&this.bt&&this.bt.src&&!this.fg){const t=MMSmartStreaming.getInstance();!function(t,i,e){t.registerMMSmartStreaming(e.playerName,e.customerID,e.subscriberID,e.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","8.3.0"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",i,e.metaURL,e.assetID)}(t,this.bt.src,this.t_i),this.$fi=new _7(this,this.t_i,t),this.$fi.yn("ended",this.Jfi)}},this.Jfi=()=>{this.$fi&&(this.$fi.gn(),this.$fi=void 0)},this.yn(Tf.lo,this.i_i),this.yn(Tf.Dv,this.e_i),this.yn(Tf.jh,this.e_i)}}}),st.vit);var g7=String.fromCharCode(95);var w7=class t{get va(){return this.Xa||(this.Xa=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(i){t.sendEvent=i}}}(this)),this.Xa}get id(){return this.uS}get adsManager(){return this.Qsi}get ids(){return this.Vd}get adContainer(){return this.j0t}get sendEvent(){return this.s_i}set sendEvent(t){for(let t of this.n_i)this.Qsi.removeEventListener(t.type,t.listener);this.n_i=[],this.s_i=t,this.r_i()}get imaSDK(){return!0}o_i(){for(let t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.Qsi.addEventListener(i,this.h_i),this.n_i.push({type:i,listener:this.h_i})}}a_i(){To(this.n_i);for(let t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.Qsi.removeEventListener(i,this.h_i)}}u_i(t){this.hd.push({type:t.type,adVolume:this.adsManager.getVolume()})}r_i(){null==this.s_i||this.s_i.call(this,this.hd),this.hd=[]}static c_i(i){return t.l_i[i]||i}constructor(i,e,s,n){this.h_i=i=>{this.u_i({type:t.c_i(i.type)})},this.uS=i,this.Qsi=e,this.Vd=s,this.j0t=n,this.n_i=[],this.hd=[]}};w7.l_i={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var v7=class{d_i(t,i){this.f_i=h.createElement("script"),this.f_i.id=t.id,this.f_i.type="text/javascript",t.adContainer.appendChild(this.f_i),this.f_i.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t.id,this.__i=t.id,s[this.__i]=t.va}g_i(){this.f_i&&wi(this.f_i),this.__i&&(s[this.__i]=void 0)}constructor(){this.f_i=void 0,this.__i=void 0}};ec((function(t){return class i extends t{ga(t){var e,s,n;this.w_i(),null==(e=this.v_i)||e.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.m_i),null==(s=this.v_i)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.w_i),null==(n=this.v_i)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.p_i),this.v_i=void 0,this.j0t=void 0,super.ga(t);const r=t&&t.analytics;this.A_i=i.y_i(r);this.Oc&&this.A_i&&o3()&&this.M_i()}gn(){var t,i,e;this.w_i(),null==(t=this.v_i)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.m_i),null==(i=this.v_i)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.w_i),null==(e=this.v_i)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.p_i),this.v_i=void 0,this.j0t=void 0,this.Oc&&this.Oc.fn("a7t",this.u7t),super.gn()}M_i(){this.Oc&&this.Oc.yn("a7t",this.u7t)}b_i(t,i,e){const s=g7+"moatApi"+_.floor(1e8*_.random());this.T_i=new w7(s,t,i,e),this.T_i.o_i(),this.S_i.d_i(this.T_i,this.A_i.partnerCode)}static y_i(t){if(t){const i=t.filter((t=>"moat"===t.integration));if(0===i.length)return;if(i.length>1)throw new g("Only one Moat analytics configuration expected");return i[0]}}constructor(t,i){super(t,i),this.A_i=void 0,this.T_i=void 0,this.v_i=void 0,this.j0t=void 0,this.p_i=()=>{this.b_i(this.v_i,{partnerCode:this.A_i.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.j0t)},this.u7t=t=>{this.v_i=t.Usi,this.j0t=t.W7t,this.w_i(),this.v_i.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.m_i),this.v_i.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.w_i),this.v_i.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.p_i)},this.m_i=t=>{const i=t.getAd().getAdPodInfo();i.getAdPosition()<i.getTotalAds()&&(this.w_i(),this.p_i())},this.w_i=()=>{this.T_i&&(this.T_i.a_i(),this.T_i=void 0),this.S_i.g_i()},this.S_i=new v7}}}),st.vit);var Zr,Tt=class extends Os{constructor(t,i,e){super(t,new Date),this.N_i=i,this.Rit=e}};!function(t){t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete"}(Zr||(Zr={}));var m7=class extends Tt{constructor(t,i){super("DAILoaded",t,i)}},p7=class extends Tt{constructor(t,i){super("DAIAdBreakStarted",t,i)}},A7=class extends Tt{constructor(t,i){super("DAIAdBreakEnded",t,i)}},y7=class extends Tt{constructor(t,i){super("DAIAdProgress",t,i)}},M7=class extends Tt{constructor(t,i){super("DAICuePointsChanged",t,i)}},b7=class extends Tt{constructor(t,i){super("DAIClick",t,i)}},T7=class extends Tt{constructor(t,i){super("DAIError",t,i)}},S7=class extends Tt{constructor(t,i){super("DAIStarted",t,i)}},N7=class extends Tt{constructor(t,i){super("DAIFirstQuartile",t,i)}},I7=class extends Tt{constructor(t,i){super("DAIMidpoint",t,i)}},D7=class extends Tt{constructor(t,i){super("DAIStreamInitialized",t,i)}},E7=class extends Tt{constructor(t,i){super("DAIThirdQuartile",t,i)}},k7=class extends Tt{constructor(t,i){super("DAIComplete",t,i)}};var L7=class extends Mo{replaceAdTagParameters(t){return this.hni.replaceAdTagParameters(null!=t?t:null)}I_i(t){return this.hni.contentTimeForStreamTime(t)}D_i(t){return this.hni.streamTimeForContentTime(t)}tQt(t,i){const e=function(t){let i;"vod"===t.availabilityType?(i=new s.google.ima.dai.api.VODStreamRequest,i.contentSourceId=t.contentSourceID,i.videoId=t.videoID):"live"===t.availabilityType&&(i=new s.google.ima.dai.api.LiveStreamRequest,i.assetKey=t.assetKey);const e=google.ima.dai.api.StreamRequest.StreamFormat;var n;return i.format="dash"===t.format?e.DASH:e.HLS,i.apiKey=t.apiKey,i.adTagParameters=t.adTagParameters,i.omidAccessModeRules=null!=(n=U4(t.omidAccessModeRules))?n:{},i}(t);this.hni.requestStream(e)}tr(){this.E_i(!1),this.hni.reset()}gn(){this.Vo();const t=google.ima.dai.api.StreamEvent.Type;this.hni.removeEventListener(t.AD_BREAK_STARTED,this.k_i),this.hni.removeEventListener(t.AD_PROGRESS,this.L_i),this.hni.removeEventListener(t.CLICK,this.h0t),this.hni.removeEventListener(t.COMPLETE,this.x_i),this.hni.removeEventListener(t.CUEPOINTS_CHANGED,this.C_i),this.hni.removeEventListener(t.ERROR,this.Ss),this.hni.removeEventListener(t.FIRST_QUARTILE,this.O_i),this.hni.removeEventListener(t.LOADED,this.j_i),this.hni.removeEventListener(t.MIDPOINT,this.R_i),this.hni.removeEventListener(t.STARTED,this.P_i),this.hni.removeEventListener(t.STREAM_INITIALIZED,this.z_i),this.hni.removeEventListener(t.THIRD_QUARTILE,this.B_i),this.hni.removeEventListener(t.AD_BREAK_ENDED,this.U_i),this.tr(),this.Q_i&&wi(this.Q_i)}F_i(t){this.hni.onTimedMetadata(t)}Y_i(t,i,e){this.hni.processMetadata(t,i,e)}G_i(t){const i=this.hni.previousCuePointForStreamTime(t);if(i)return{bS:i.end,MS:i.start,pg:i.played}}V_i(t){const i=this.G_i(t),e=i&&!i.pg?i.MS:void 0;return Promise.resolve(e)}E_i(t){this.P0t.style.display=t?"block":"none"}constructor(t,i,e){super(),this.hni=t,this.P0t=i,this.Q_i=e,this.k_i=t=>{this.E_i(!0);const i=ms(t),e=fs(t);this.Co(new p7(i,e))},this.U_i=t=>{this.E_i(!1);const i=ms(t),e=fs(t);this.Co(new A7(i,e))},this.L_i=t=>{const i=ms(t),e=fs(t);this.Co(new y7(i,e))},this.h0t=t=>{const i=ms(t),e=fs(t);this.Co(new b7(i,e))},this.x_i=t=>{const i=ms(t),e=fs(t);this.Co(new k7(i,e))},this.C_i=t=>{const i=ms(t),e=fs(t);this.Co(new M7(i,e))},this.Ss=t=>{const i=ms(t),e=fs(t);this.Co(new T7(i,e))},this.O_i=t=>{const i=ms(t),e=fs(t);this.Co(new N7(i,e))},this.j_i=t=>{const i=ms(t),e=fs(t);this.Co(new m7(i,e))},this.R_i=t=>{const i=ms(t),e=fs(t);this.Co(new I7(i,e))},this.P_i=t=>{const i=ms(t),e=fs(t);this.Co(new S7(i,e))},this.z_i=t=>{const i=ms(t),e=fs(t);this.Co(new D7(i,e))},this.B_i=t=>{const i=ms(t),e=fs(t);this.Co(new E7(i,e))},this.P0t.style.display="none",this.hni.setClickElement(this.P0t);const s=google.ima.dai.api.StreamEvent.Type;this.hni.addEventListener(s.AD_BREAK_STARTED,this.k_i),this.hni.addEventListener(s.AD_PROGRESS,this.L_i),this.hni.addEventListener(s.CLICK,this.h0t),this.hni.addEventListener(s.COMPLETE,this.x_i),this.hni.addEventListener(s.CUEPOINTS_CHANGED,this.C_i),this.hni.addEventListener(s.ERROR,this.Ss),this.hni.addEventListener(s.FIRST_QUARTILE,this.O_i),this.hni.addEventListener(s.LOADED,this.j_i),this.hni.addEventListener(s.MIDPOINT,this.R_i),this.hni.addEventListener(s.STARTED,this.P_i),this.hni.addEventListener(s.STREAM_INITIALIZED,this.z_i),this.hni.addEventListener(s.THIRD_QUARTILE,this.B_i),this.hni.addEventListener(s.AD_BREAK_ENDED,this.U_i)}};function ms(t){const i=t.getStreamData(),e=i.adProgressData;let s;e&&(s={y5t:e.adBreakDuration,W_i:e.duration,M5t:e.adPosition,U_:e.currentTime,ct:e.duration,b5t:e.totalAds});return{H_i:s,X_i:(i.cuepoints||[]).map((t=>({MS:t.start,bS:t.end,pg:t.played}))),Z_i:i.errorMessage||void 0,q_i:i.manifestFormat||void 0,K_i:i.streamId||void 0,J_i:(i.subtitles||[]).map((t=>({$_i:t.webvtt,tgi:t.ttml,gs:t.language}))),zu:i.url}}function x7(t){return{XXt:t.getAdSlotId(),t4t:t.getContent(),Nz:t.getContentType(),Ti:t.getHeight(),ji:t.getWidth()}}function fs(t){const i=t.getAd();if(!i)return;const e=i.getAdPodInfo(),s=i.getCompanionAds().map(x7);return{yZt:i.getAdId(),p9t:{M5t:e.getAdPosition(),$Jt:e.getMaxDuration(),Lsi:e.getPodIndex(),cPt:e.getTimeOffset(),b5t:e.getTotalAds()},eXt:i.getAdSystem(),Csi:i.getAdvertiserName(),WXt:i.getApiFramework(),lXt:s,IXt:i.getCreativeId(),a8t:i.getCreativeAdId(),Osi:i.getDealId(),xM:i.getDescription(),ct:i.getDuration(),kz:i.getTitle(),igi:i.getUniversalAdIdRegistry(),egi:i.getUniversalAdIdValue(),i8t:i.getVastMediaHeight(),t8t:i.getVastMediaWidth(),q9t:i.getWrapperAdIds(),K9t:i.getWrapperAdSystems(),J9t:i.getWrapperCreativeIds()}}function C7(){const t=h.body.lastElementChild;if(t instanceof HTMLIFrameElement&&"Advertisement"===t.title)return t}var O7="theo-dai-clickthrough",j7="urn:google:dai:2018",R7=class{get va(){const t=this,i=this.sgi;return{contentTimeForStreamTime:i=>t.hni?t.hni.I_i(i):i,streamTimeForContentTime:i=>t.hni?t.hni.D_i(i):i,replaceAdTagParameters(i){t.hni&&t.hni.replaceAdTagParameters(i)},get snapback(){return t.ngi},set snapback(i){t.ngi=i},get sourceTransformer(){return i.rgi},set sourceTransformer(t){i.rgi=t}}}F_(t){this.L5.g_(),this.L5=new Bd,$r(this.Xsi(t,this.L5.f_))}async Xsi(t,i){if(Vr(i),!this.ogi||!this.hni)return this.Qo.hgi(t);if(this.ogi.Iit)return;if(t>this.Qo.Q_()&&this.ngi){const e=await Jr(this.hni.V_i(t),i);if(e){this.Qo.hgi(e),await this.hni.k_(Zr.AD_BREAK_ENDED,i);if(this.hni.G_i(t).bS>t)return}}this.Qo.hgi(t)}Dg(){const t=this.ogi&&this.ogi.Iit;if(t){const i=Ri.xn(this.Qo.agi()),e=t.cPt,s=e+t.$Jt,n=new Ri([e,s]);return i.Sn(n).ks()}return this.Qo.agi()}async iet(t,i){if(!t)return this.Qo.ugi(t,i);let e=t;try{this.Qo.nt.yn(rc.hw,this.cgi),e=await this.sgi.lgi(t,i),this.ogi&&this.hni&&(this.dgi=!0)}catch(t){if(me(t),t.code===to.LICENSE_INVALID)return;const i=new ao(qa.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.vz=ia(i),this.mz=i,this.Qo.Co(new as(i)),i}await this.Qo.ugi(e,i)}tr(){if(this.dgi){if(this.Qo.nt.fn(rc.hw,this.cgi),this.Mni){this.Mni.fn(ct.lw,this.fgi);for(const t of this.Mni.L.Rw)t.fn(Ui.mS,this._gi);this.Mni=void 0}this.vz=void 0,this.mz=void 0,this.L5.g_(),this.ogi&&this.ogi.tr(),this.hni&&this.hni.tr(),this.dgi=!1}}get lt(){return this.vz||this.Qo.ggi()}get H_(){return this.mz||this.Qo.wgi()}gn(){this.tr(),this.Qo.vgi(),this.hni&&this.hni.gn()}constructor(t,i,e,s){this.Mni=void 0,this.vz=void 0,this.mz=void 0,this.L5=new Bd,this.dgi=!1,this.ngi=!0,this.cgi=t=>{const i=t.Lt;i.zt===Qe.ZA&&(i.Av===O.ID3||i.Av===O.EVENT_STREAM&&i.fv===j7)&&(i._v=yi.vv,this.Mni=i,i.yn(ct.lw,this.fgi))},this.fgi=t=>{t.yS.yn(Ui.mS,this._gi)},this._gi=t=>{var i,e;if(this.hni)if((null==(i=this.Mni)?void 0:i.Av)===O.ID3){const i=t.yS.O;"TXXX"===i.id&&this.hni.F_i({TXXX:i.text})}else if((null==(e=this.Mni)?void 0:e.Av)===O.EVENT_STREAM){const i=t.yS.O;this.hni.Y_i(j7,i,t.GN)}},this.Qo=t,this.hni=i,this.ogi=e,this.sgi=s,e&&i&&this.Qo.Oc&&this.Qo.Oc.Git(e._8t)}},P7=class extends hr{get mgi(){return this.pgi}get vKt(){return F.so}constructor(t,i,e,s=!0){super(e),this.pgi=s,this.j2t=t,this.R2t=i}},z7=class extends X4{Agi(){const t=[Zr.STARTED,Zr.FIRST_QUARTILE,Zr.MIDPOINT,Zr.THIRD_QUARTILE,Zr.COMPLETE];this.hni.yn(t,this.ygi),this.hni.yn(Zr.AD_BREAK_ENDED,this.U_i),this.hni.yn(Zr.AD_PROGRESS,this.L_i),this.hni.yn(Zr.CUEPOINTS_CHANGED,this.C_i)}get E2t(){return this.w8t}get A2t(){return this.P4t}Mgi(t){let i=t.p9t.cPt,e=this.I$t||this.findAdBreakWithPredicate(i,(t=>!t.pg));if(!e){const s=t.p9t.$Jt;i=this.Qo.Q_(),e=new P7(s,s,i,!1),e.z2t(),this.D$t.push(e)}return e}bgi(t){switch(t){case Zr.STARTED:this.w8t=!0;break;case Zr.AD_BREAK_ENDED:this.w8t=!1}}Tgi(t,i,e){if(i)switch(t){case Zr.STARTED:case Zr.FIRST_QUARTILE:case Zr.MIDPOINT:case Zr.THIRD_QUARTILE:case Zr.COMPLETE:this.A2t.Co(new PP(this.I$t))}if(e)switch(t){case Zr.STARTED:case Zr.FIRST_QUARTILE:case Zr.MIDPOINT:case Zr.THIRD_QUARTILE:case Zr.COMPLETE:this.A2t.Co(new Mh(this.v$t,this.v$t.W9t))}switch(t){case Zr.COMPLETE:this.A2t.Co(new Qc(this.v$t,this.f8t.W9t));break;case Zr.AD_BREAK_ENDED:this.A2t.Co(new dc(this.Iit))}switch(t){case Zr.FIRST_QUARTILE:this.A2t.Co(new p4(this.v$t,this.f8t.W9t));break;case Zr.MIDPOINT:this.A2t.Co(new y4(this.v$t,this.f8t.W9t));break;case Zr.THIRD_QUARTILE:this.A2t.Co(new b4(this.v$t,this.f8t.W9t))}}Sgi(t){const i=t.Rit,e=this.Mgi(i),s=function(t,i){if(t.Oc.length)return!1;for(let e=0;e<i;e++){const i=new Y4(t,Hr.xqt);t.U2t(i)}return!0}(e,i.p9t.b5t),n=function(t,i){const e=i.p9t.M5t-1;return t.Oc[e]}(e,i),r=function(t,i){return t.X2t!==e4.READY&&(t.$9t(i),!0)}(n,i);this.v$t=n,this.I$t=e,e.z2t(),this.Tgi(t.type,s,r)}Ngi(t){for(const i of this.D$t)if(Ya(t,i.cPt))return i}findAdBreakWithPredicate(t,i){for(const e of this.D$t)if(Ya(e.cPt,t)&&i(e))return e}get Igi(){const t=this.findAdBreakWithPredicate(0,(t=>t.mgi));let i=0;return t&&(i=t.$Jt),i}Dgi(t,i){let e;for(const s of this.D$t)s.cPt>=t&&s.cPt<=i&&!s.pg&&(!e||s.cPt>=e.cPt)&&(e=s);return e}Ny(){}Yit(t){}tr(){this.v$t&&(this.A2t.Co(new Qc(this.v$t,this.v$t.W9t)),this.v$t=void 0),this.I$t&&(this.A2t.Co(new dc(this.I$t)),this.I$t=void 0),this.w8t=!1,To(this.D$t)}gn(){this.tr(),this.A2t.gn()}constructor(t,i){super(new Jc,F.so),this.hni=t,this.Qo=i,this.L_i=t=>{const i=this.I$t;if(!i||!this.v$t)return;const e=t.N_i.H_i;this.v$t.W9t=e.U_,function(t,i){const e=i.M5t,s=i.y5t,n=i.U_,r=_d(t.Oc.slice(0,e-1),(t=>{var i;return null!=(i=t.ct)?i:0}));t.t$t=s-n-r}(i,e)},this.C_i=t=>{const i=t.N_i.X_i;if(i)for(const t of i)if(!this.Ngi(t.MS)){const i=t.bS-t.MS,e=new P7(i,i,t.MS,!0);this.D$t.push(e)}},this.ygi=t=>{this.bgi(t.type),this.Sgi(t)},this.U_i=t=>{this.w8t=!1,this.v$t=void 0;const i=this.Iit;i&&(i.t$t=0,this.Tgi(t.type,!1,!1),this.I$t=void 0)},this.Agi()}};function B7(t){if(t.sources)if(tr(t.sources)){for(const i of t.sources)if(Qn(i))return!0}else if(Vu(t.sources))return Qn(t.sources);return!1}var U7=class{async lgi(t,i){const e=[],s=[];for(const i of t.sources)if(Qn(i)){if(!this.hni)continue;e.push(i)}else s.push(i);if(0===e.length)return t;let n,r;for(;void 0===n&&0!==e.length;){const{yc:o}=await gS.lL.AB(e,t),h=o;Vr(i);try{n=await this.Egi(h,i),s.push(n)}catch(t){me(t),r=t,jn(e,h)}}if(0!==t.sources.length&&0===s.length)throw new g("Fatal: unable to play DAI streams.");return r&&Ut(r.message),ol({},t,{sources:s})}async Egi(t,i){if(!this.hni)throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=this.hni.k_(Zr.LOADED,i),s=this.hni.k_(Zr.ERROR,i),n=t.type===Pl.yp?"dash":"hls";this.hni.tQt(ol({},t.ssai,{format:n}));const r=await Promise.race([e,s]);if(r.type===Zr.LOADED){const i=t.type===Pl.yp?Pl.yp:Pl.bp;return Mw(ol({},t,{src:this.rgi?await this.rgi(r.N_i.zu||""):r.N_i.zu,type:i}))}throw g(r.N_i.Z_i)}constructor(t){this.hni=t,this.rgi=t=>t}};ec(function(t){return i=>class extends i{fa(){const t=super.fa(),i=t.ads;if(i){const t=this.kgi.va;ro(i,{get dai(){return t}})}return t}get Ul(){return this.Lgi}hgi(t){super.F_(t)}F_(t,i){this.kgi.F_(t)}agi(){return super.Dg()}Dg(){return this.kgi.Dg()}ga(t){return this.kgi.tr(),super.ga(t)}async ugi(t,i){return super.iet(t,i)}async iet(t,i){return this.kgi.iet(t,i)}ggi(){return super.W_()}wgi(){return super.X_()}W_(){return this.kgi.lt}X_(){return this.kgi.H_}vgi(){super.gn()}gn(){this.kgi.gn(),this.P0t&&(wi(this.P0t),this.P0t.removeEventListener("keydown",this.xgi),this.P0t.removeEventListener("click",this.xgi),this.P0t=void 0)}constructor(i,e){super(i,e),this.Lgi=!1,this.xgi=t=>{13===t.which&&this.P0t.click(),this.Hg()};const s=this.Vg();let n,r;try{this.P0t=h.createElement("button"),this.P0t.className=O7,n=t(s,this.P0t),r=new z7(n,this),this.we.appendChild(this.P0t),this.Lgi=!0}catch(t){this.P0t=void 0}const o=new U7(n);this.kgi=new R7(this,n,r,o),this.P0t&&(this.P0t.addEventListener("keydown",this.xgi),this.P0t.addEventListener("click",this.xgi))}}}((function(t,i){if(!(s.google&&s.google.ima&&Vu(s.google.ima.dai)))throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=C7(),n=new google.ima.dai.api.StreamManager(t),r=C7();return new L7(n,i,r&&r!==e?r:void 0)})),st._it);var Q7=class{get Cgi(){return void 0===this.Ogi?0:(performance.now()-this.Ogi)/1e3}jgi(t){this.Rgi=t,this.zgi.Pgi(t),this.Qo.yn(Tf.jh,this.Tdi),this.Qo.yn(Tf.Ov,this.Gfi),this.Qo.yn(Tf.fm,this.xoi),this.Qo.yn(hi.ha,this.M3),this.Qo.yn($.Tm,this.Bgi),this.Qo.yn([$.pm,$.Am,$.Sm],this.Ugi),this.Qo.yn(Tf.Lv,this.Qgi),Jp.OG(this.lOt)}Fgi(){this.Qo.fn(Tf.jh,this.Tdi),this.Qo.fn(Tf.Ov,this.Gfi),this.Qo.fn(Tf.fm,this.xoi),this.Qo.fn(hi.ha,this.M3),this.Qo.fn($.Tm,this.Bgi),this.Qo.fn([$.pm,$.Am,$.Sm],this.Ugi),this.Qo.fn(Tf.Lv,this.Qgi),Jp.EG(this.lOt),this.Ygi||(this.zgi.Ggi(this.Vgi),this.zgi.Wgi()),this.Hgi&&this.Xgi(),this.Rgi=void 0,this.Zgi=!1,this.Ygi=!1,this.Vgi=-1/0,To(this.qgi)}Kgi(){this.Zgi&&this.zgi.Jgi(),this.Ogi=performance.now(),this.$gi=v(this.iwi,6e4)}Xgi(){this.zgi.ewi(this.Cgi),this.Hgi=!1,this.Ogi=void 0,this.$gi&&(m(this.$gi),this.$gi=void 0)}swi(){if(S(this.Qo.Td()))return;const t=10*function(t,i){return _.floor(t/i)}(this.Qo.Q_()/this.Qo.Td()*100,10);Ai(this.qgi,t)||(this.qgi.push(t),this.zgi.nwi(t))}constructor(t,i){this.Qo=t,this.zgi=i,this.Zgi=!1,this.Ygi=!1,this.qgi=[],this.Vgi=-1/0,this.Hgi=!1,this.Tdi=()=>{this.Zgi||(this.zgi.rwi(),this.Hgi&&this.zgi.Jgi(),this.Zgi=!0)},this.Gfi=()=>{this.zgi.owi(),this.Ygi=!0},this.xoi=()=>{this.Vgi<this.Qo.Q_()&&(this.Vgi=this.Qo.Q_()),this.swi()},this.Bgi=()=>{this.Zgi&&(this.hwi=performance.now(),this.zgi.awi(this.Qo.Q_()))},this.Ugi=()=>{this.hwi&&(this.zgi.uwi((performance.now()-this.hwi)/1e3),this.hwi=void 0)},this.M3=()=>{this.Vgi<this.Qo.Q_()&&(this.Vgi=this.Qo.Q_()),this.zgi.Vst(this.Qo.W_().message)},this.Qgi=()=>{const t=this.Qo.Td()===1/0;t&&!this.Hgi&&(this.Hgi=t,this.Kgi())},this.lOt=()=>{this.zgi.Ggi(this.Vgi),this.zgi.cwi()},this.iwi=()=>{void 0!==this.Ogi&&this.zgi.lwi(this.Cgi)}}},F7=class{Pgi(t){this.dwi(["setDocumentTitle",t.itemTitle]),this.dwi(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.dwi(["trackPageView"])}rwi(){this.fwi("item first play","viewing","1")}Wgi(){this.fwi("item skipped","skipped","1")}nwi(t){this.fwi("item progress","percent",""+t)}cwi(){this.fwi("item abandoned","window closed","1")}Ggi(t){this.fwi("item time","watched",""+t)}owi(){this.fwi("item finished","ended","1")}awi(t){this.fwi("buffering started","timestamp",""+t)}uwi(t){this.fwi("buffering ended","duration",""+t)}Vst(t){this.fwi("error","message",""+t)}Jgi(){this.fwi("livestream first play","viewing","1")}lwi(t){this.fwi("livestream progress","duration",""+t)}ewi(t){this.fwi("livestream time","watched",""+t)}fwi(t,i,e){this.dwi(["trackEvent","Video",t,i,e])}dwi(t){const i="undefined"!=typeof _paq?_paq:void 0;i?i.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}},Y7=class{get _wi(){if(!this.gwi)return;const t=this.Qo.Q_()/this.gwi;return _.floor(4*t)+1}get wwi(){return void 0!==this.gwi}jgi(){this.Ic.yn("Uit",this.poi),this.Ic.yn("Qit",this.Aoi),this.Ic.yn("pCt",this.Yfi),this.Ic.yn("yCt",this.Ffi),this.Qo.yn(Tf.fm,this.xoi),Jp.OG(this.lOt)}Fgi(){this.Ic.fn("Uit",this.poi),this.Ic.fn("Qit",this.Aoi),this.Ic.fn("pCt",this.Yfi),this.Ic.fn("yCt",this.Ffi),this.Qo.fn(Tf.fm,this.xoi),To(this.vwi),Jp.EG(this.lOt),this.gwi=void 0}constructor(t,i,e){this.Qo=t,this.Ic=i,this.zgi=e,this.vwi=[],this.poi=()=>{this.gwi=this.Qo.Td(),this.zgi.mwi(this.gwi)},this.Aoi=()=>{this.gwi&&(this.zgi.pwi(this.gwi),To(this.vwi),this.gwi=void 0)},this.Yfi=t=>{if(!this.gwi)return;const i=this.gwi-this.gwi*t.r4t;this.zgi.Awi(i),this.gwi=void 0},this.Ffi=()=>{this.gwi=this.Qo.Td(),this.zgi.ywi()},this.xoi=()=>{const t=this._wi;if(this.wwi&&t&&!Ai(this.vwi,t)){switch(t){case 1:this.zgi.Mwi();break;case 2:this.zgi.bwi();break;case 3:this.zgi.Swi();break;case 4:this.zgi.Nwi()}this.vwi.push(t)}},this.lOt=()=>{this.zgi.Iwi()}}},G7=class{mwi(t){this.zgi.fwi("ad start","duration",""+t)}pwi(t){this.zgi.fwi("ad finished","duration",""+t)}Awi(t){this.zgi.fwi("ad skipped","remaining time",""+t)}ywi(){this.zgi.fwi("ad blocker","detected","1")}Mwi(){this.zgi.fwi("ad progress","firstQuartile","")}bwi(){this.zgi.fwi("ad progress","secondQuartile","")}Swi(){this.zgi.fwi("ad progress","thirdQuartile","")}Nwi(){this.zgi.fwi("ad progress","fourthQuartile","")}Iwi(){this.zgi.fwi("ad abandoned","window closed","1")}constructor(t){this.zgi=t}};function V7(t){return t&&"streamone"===t.integration}ec((function(t){return class extends t{gn(){this.fn(Tf.lo,this.do),this.Dwi&&(this.Ewi&&this.Ewi.Fgi(),this.kwi&&this.kwi.Fgi(),this.Dwi=!1),super.gn()}constructor(t,i){super(t,i),this.Dwi=!1,this.do=()=>{this.Dwi&&(this.Ewi.Fgi(),this.kwi&&this.kwi.Fgi());const t=this.Wa();if(this.Dwi=!1,!t)return;const i=function(t){if(t.analytics)for(let i of t.analytics)if(V7(i))return i}(t);i&&(this.Dwi=!0,this.Ewi.jgi(i),this.kwi&&this.kwi.jgi())};const e=new F7;if(this.Ewi=new Q7(this,e),this.Oc){const t=new G7(e);this.kwi=new Y7(this,this.Oc,t)}this.yn(Tf.lo,this.do)}}}),st.vit);var W7=class extends vQ{async X$(t,i,e){const s=await H7(t);await super.X$(s,i,e),this.Lwi(s,i)}async V$(t,i,e){const s=await H7(t);await super.V$(s,i,e),this.Lwi(s,i)}Lwi(t,i){const e=this.Cwi.xwi;if(void 0===e)return;const s=i.y$;let n;if(this.Owi!==s&&(this.Owi=s,e.setLevelSwitching(s),e.setContainerFormat(2)),function(t){return nd.call(t,"F7")}(i)){const t=i.F7,r=i.F7+i.ct;n=i.pI,e.newPts(t,r,"video",s)}else 0;e.appendBuffer(t.ly,"video",s,n)}async rS(t,i,e){var s;await super.rS(t,i,e),null==(s=this.Cwi.xwi)||s.flushBuffer(t,i)}constructor(t,i){super(t),this.Cwi=i,this.Owi=void 0}};async function H7(t){switch(t.Av){case Lu.jZ:return t;case Lu.DD:{const i=await co(t.ly);return{Av:Lu.jZ,ly:new j(i)}}case Lu.RZ:throw new g("Opaque initialization segments are not supported on web.")}}var X7=class extends gQ{Nrt(t){return t.O0===Jt.VA?new W7(t,this.Cwi):new vQ(t)}constructor(t,i){super(t),this.Cwi=i,this.Trt(t)}},Z7=class extends qh{get xwi(){return this.jwi}Rwi(){this.jwi=new LcevcDil.LcevcDil(this.Fm.pz,this.Pwi,{})}ge(){super.ge(),this.zwi()}be(){super.be(),this.Pwi.style.display="none"}tr(){return this.Pwi.style.display="none",void 0!==this.jwi&&(this.jwi.close(),this.Rwi()),super.tr()}h_(){return this.Bwi=!0,void 0!==this.jwi&&(this.jwi.close(),this.jwi=void 0),this.pu.removeChild(this.Pwi),super.h_()}rB(t){this.Co(new EC(new Nt(to.ABORTED,t)))}zwi(){this.Fm.pz.style.display="none",this.Pwi.style.display="block"}get art(){return this.Fm}Art(t){return new X7(t,this)}prt(t){return new Yi(t)}constructor(t,i){super(t),this.Bwi=!1,this.Uwi=t=>{this.Bwi||(t||this.rB("LCEVC SDK failed to initialize."),this.Rwi())},this.Qwi=()=>{this.Bwi||this.rB("LCEVC SDK failed to initialize.")},this.pu=i,this.Pwi=h.createElement("canvas"),this.Pwi.style.width="100%",this.Pwi.style.height="100%",this.Pwi.style.position="absolute",this.Pwi.style.top="50%",this.Pwi.style.left="50%",this.Pwi.style.transform="translate(-50%, -50%)",this.Pwi.style.display="none",this.pu.appendChild(this.Pwi),LcevcDil.ready.then(this.Uwi,this.Qwi)}},q7=class extends dQ{oB(t){if(t===Jt.VA)return this.Fwi=new Z7(super.oB(t),this.pu),this.Fwi}async Fz(t){this.Fwi=void 0;const i=t;await i.h_(),await super.Fz(i.art)}get Ywi(){return this.Fwi}constructor(t,i){super(t),this.pu=i}},K7=class extends CH{async gn(){for(const t of this.VT.Rw)t.fn(ct.xw,this.Gwi);this.rt.fn(rc.hw,this.Vwi),this.rt.fn(rc.uw,this.Wwi),await super.gn(),await this.Fm.h_(),await this.Yz.Fz(this.Fm)}constructor(t,i,e,s,n,r,o,h){const a=new q7(r,h),u=new At(a);super(t,i,e,s,n,u.oB(o),h),this.Vwi=t=>{t.Lt.yn(ct.xw,this.Gwi)},this.Wwi=t=>{t.Lt.fn(ct.xw,this.Gwi)},this.Gwi=t=>{var i;const e=null==(i=this.Hwi.Ywi)?void 0:i.xwi,s=t.Lht.Xw;null==e||e.setCurrentLevel(s)},this.Yz=u,this.Hwi=a,this.VT.yn(rc.hw,this.Vwi),this.VT.yn(rc.uw,this.Wwi)}};hn(new class extends eQ{Yp(t,i,e,s,n,r,o){const h=new ur(Th.lL.Pnt,Th.lL.Rnt,Th.lL.jnt,Th.lL.Bnt);let a=i;return Vo.LO()&&(a=new Vo(a)),new K7(e,s,n,r,h,a,Jt.VA,t)}async hB(t){if(!t.lcevc)return!1;if(!await super.hB(t))return!1;if(void 0===s.LcevcDil)throw new ao(qa.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}aB(){return!1}constructor(...t){super(...t),this.uB=tl.jP}});var Ps,J7=class extends p0{async gn(){for(const t of this.VT.Rw)t.fn(ct.xw,this.Gwi);this.rt.fn(rc.hw,this.Vwi),this.rt.fn(rc.uw,this.Wwi),await super.gn(),await this.Yz.Fz(this.Fm)}constructor(t,i,e,s,n,r,o,h,a){const u=new q7(i,t),c=new At(u);super(c.oB(Jt.VA),e,s,n,r,o,h,a),this.Vwi=t=>{t.Lt.yn(ct.xw,this.Gwi)},this.Wwi=t=>{t.Lt.fn(ct.xw,this.Gwi)},this.Gwi=t=>{var i;const e=null==(i=this.Hwi.Ywi)?void 0:i.xwi,s=t.Lht.Mjt.Xw;null==e||e.setCurrentLevel(s)},this.Yz=c,this.Hwi=u,this.VT.yn(rc.hw,this.Vwi),this.VT.yn(rc.uw,this.Wwi)}};hn(new class extends y0{Yp(t,i,e,s,n,r,o){return new J7(t,i,e,n,r,q$(s.libraryLocation),new m0(s.libraryLocation),new ur(Th.lL.Pnt,Th.lL.Rnt,Th.lL.jnt,Th.lL.Bnt),s)}async hB(t,i){if(!t.lcevc)return!1;if(!await super.hB(t,i))return!1;if(void 0===s.LcevcDil)throw new ao(qa.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}aB(){return!1}constructor(...t){super(...t),this.uB=tl.BP}}),function(t){t.Xwi="tr",t.Zwi="qwi"}(Ps||(Ps={}));var $7="freewheel-nonlinear-ad",ttt=[Tf.Lv,Tf.fm,Tf._m,Tf.Sh,$.Sm,Tf.jh],itt=class t extends ll{Wg(){this.Yz._U()}Kwi(){this.Jwi.yn("Bit",this.$wi),this.Jwi.yn(["Uit","Qit"],this.tvi),this.Jwi.yn("zit",this.ssi)}ivi(){this.Jwi.fn("Bit",this.$wi),this.Jwi.fn(["Uit","Qit"],this.tvi),this.Jwi.fn("zit",this.ssi)}evi(){this.A2t.Qa(this.Jwi.svi)}nvi(){this.Jwi.rvi.yn(ttt,this.Ds)}ovi(){this.Jwi.rvi.fn(ttt,this.Ds)}get m2t(){return this}static get w2t(){return F.b$t}get w2t(){return t.w2t}get Iit(){var t;return null!=(t=this.Jwi.svi.Iit)?t:null}get Sit(){const t=this.Jwi.svi.f8t;return t?[t]:[]}Yit(t){}Q_(){return this.Jwi.rvi.U_}F_(t,i){}Td(){return this.Jwi.rvi.ct}V_(){return this.Jwi.rvi.G_}W_(){return this.vz}X_(){return this.mz}Og(){return 0}Pg(){return 0}Bg(){return this.Jwi.rvi.zg}Ug(t){this.Jwi.rvi.zg=t}hg(){return this.Jwi.rvi.og}ag(t){this.Jwi.rvi.og=t}Ng(){return this.Jwi.rvi.Sg}get Dit(){return this.Jwi.svi.Dit}get Eit(){return this.Jwi.svi.Eit}Dg(){return this.Jwi.rvi.Ig}_g(){return this.Jwi.rvi.fg}b2t(t){if(this.E2t||this.Jwi.b2t(t),this.Jwi.hvi){if(t.type===Tf.Sh&&this.Qo.G_)return!0;if(t.type===Tf.Ov)return this.Jwi.uvi.avi(),!0}return!1}be(){this.Jwi.be()}Hg(){this.fg||this.Jwi.rvi.Hg()}async cvi(){if(!this.Jwi.lvi)try{await this.Jwi.l5t()}catch(t){this.dvi(t,_o.GENERAL)}}async fvi(){if(this.Jwi.rvi._vi)return this.Jwi.rvi.Xg(),!1;if(this.Jwi.gvi)try{await this.Jwi.uvi.wvi()}catch(t){this.dvi(t,_o.PLAYBACK)}return!0}get vvi(){return Ks(this.W_())}dvi(t,i){t.name!==Ps.Xwi&&this.A2t.Co(new ga(i,"Ads could not be loaded."))}async Xg(){if(this.fg&&this.Co(new Rt(this.U_)),await this.cvi(),this.vvi)return;const t=await this.fvi();!this.vvi&&t&&this.ssi()}E8t(t,i,e){i===lc.Cit&&this.Jwi.E8t(t)}ge(){this.Jwi.ge()}Ny(){this.Jwi.rvi.Ny()}Vg(){return this.X7}C_(){return this.Yz.pU.map((t=>t.pz))}L2t(t){}async gn(){await this.Zg(),this.Jwi.gn(),await this.Yz.Fz(this.Fm),this.ivi(),this.ovi(),this.A2t.DU(this.Jwi.svi)}async Zg(){this.Jwi.tr(),this.E2t&&(this.Qo.ge(),this.Q1t(),this.be())}constructor(t,i,e,s,n){super(t,i),this.vz=void 0,this.mz=void 0,this.tvi=t=>{const i=t.Rit,e="Uit"===t.type;if(i.Z2t===Hr.Cqt){const t=this.Qo.we.classList;e?t.add($7):t.remove($7)}e?this.ge():this.be()},this.$wi=()=>{this.z4t(),this.Qo.Hg(),this.Qo.be()},this.ssi=()=>{this.Jwi.lvi&&(this.Qo.G_||this.Qo.Xg(),this.be(),this.Qo.ge(),this.Q1t())},this.Jwi=s,this.Yz=e,this.Fm=n,this.X7=n.pz,this.X7.controls=!1,this.Kwi(),this.evi(),this.nvi()}};var ett=class extends hr{get mvi(){return this.pvi}get Avi(){return this.Oc[this.yvi]}set Mvi(t){this.yvi=t}get Mvi(){return this.yvi}get Z2t(){return this.q2t}get vKt(){return F.b$t}constructor(t,i,e,s){super(e),this.pvi=s,this.yvi=0,this.q2t=ntt(s),this.j2t=t,this.R2t=i}},stt=class extends ln{get bvi(){return this.Tvi}set bvi(t){this.Tvi!==t&&(this.Tvi=t)}get Ti(){return this.Xl.mvi.getHeight()}get ji(){return this.Xl.mvi.getWidth()}get sZt(){return this.bvi.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get vKt(){return F.b$t}fa(){return a4(this)}constructor(t,i,e){super(t,i),this.Tvi=e}};function ntt(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?Hr.Cqt:Hr.xqt}var rtt=class t extends B{async Svi(t,i){this.Nvi=t,this.Ivi=i,this.Dvi(t),await i,this.Evi()}get kvi(){return this.Lvi}get xvi(){return this.Cvi}get Ovi(){return this.jvi}get Iit(){return this.I$t}get f8t(){return this.v$t}get Dit(){const t=[];if(this.I$t){const i=this.I$t.Mvi;i>=0&&t.push(...this.I$t.Oc.slice(i+1))}for(const i of this.Rvi)t.push(...i.Oc);return t}get Eit(){return this.Rvi}Evi(){this.Pvi()}Dvi(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.zvi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Bvi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Uvi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Qvi),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.Fvi)}Yvi(){this.Nvi&&(this.Nvi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.zvi),this.Nvi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Bvi),this.Nvi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Uvi),this.Nvi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Qvi),this.Nvi.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.Fvi))}Pvi(){this.Lvi=this.Gvi(this.Vvi),this.Cvi=this.Gvi(this.Wvi).concat(this.Gvi(this.Hvi)),this.jvi=this.Gvi(this.Xvi),this.Rvi=this.Lvi.concat(this.Cvi).concat(this.jvi)}Gvi(t){if(!this.Nvi)return[];const i=this.Nvi.getSlotsByTimePositionClass(t);return this.Zvi(i)}qvi(t){if(!this.I$t)return void 0;const i=t.getSlot().getAdInstances().indexOf(t);-1!==i&&(this.I$t.Mvi=i);const e=this.I$t.Avi;return e&&(e.bvi=t),e}Kvi(t){return bo(this.Rvi,(i=>i.mvi===t))}Zvi(i){return i.map((i=>{const e=i.getTotalDuration(),s=t.Jvi(i);return new ett(e,e,s,i)}))}static $vi(t,i){const e=t.getAdInstances(),s=[];for(const t of e){const e=ntt(t.getSlot()),n=new stt(i,e,t),r=[];n.W2t(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),i.U2t(n),s.push(n)}return s}Q0t(){const t=this.f8t;t&&this.Co(new f4(t,this.tmi()))}imi(){const t=this.f8t;t&&(this.Co(new Qc(t,t.bvi.getPlayheadTime())),this.v$t=void 0)}emi(t){const i=this.Iit;i&&(i.t$t=function(t,i,e){void 0===e&&(e=0);let s=0;const n=t.Oc.length;for(let r=i;r<n;r++){const n=t.Oc[r],o=n.ct;if(n){let t=o;r===i&&(t=Qh(o-e,0,o)),s+=t}}return s}(i,i.Mvi,t))}static Jvi(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}tmi(){const t=this.f8t;if(!t)return 0;const i=t.bvi;return i.getPlayheadTime()/i.getDuration()}smi(t){jn(this.Rvi,t),jn(this.Lvi,t),jn(this.Cvi,t),jn(this.jvi,t)}tr(){this.Yvi(),this.Lvi.length=0,this.Cvi.length=0,this.jvi.length=0,this.Rvi.length=0,this.v$t=void 0,this.I$t=void 0,this.Nvi=void 0,this.Ivi=void 0}gn(){this.tr(),this.Vo()}constructor(i,e){super(),this.Us=i,this.lj=e,this.Vvi=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.Wvi=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.Xvi=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.Hvi=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.Lvi=[],this.Cvi=[],this.jvi=[],this.Rvi=[],this.zvi=i=>{const e=i.slot,s=this.Kvi(e);s&&(t.$vi(e,s),this.I$t=s,s.z2t(),this.smi(s),s.Z2t===Hr.xqt&&this.Co(new PP(s)))},this.Bvi=()=>{const t=this.Iit;t&&t.Z2t===Hr.xqt&&(this.Co(new dc(t)),this.lj.src=""),this.I$t=void 0},this.Uvi=t=>{const i=this.qvi(t.adInstance);i&&(this.Co(new Mh(i,i.bvi.getPlayheadTime())),this.v$t=i),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Us.style.cursor="pointer",this.Us.addEventListener("click",this.nmi))},this.Qvi=()=>{this.Us.style.cursor="",this.Us.removeEventListener("click",this.nmi)},this.nmi=()=>{this.f8t&&this.f8t.bvi.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.Fvi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.imi();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.Q0t(),this.imi()}}}},ott=class t extends B{rmi(){if(this.ovt){this.ovt.setAdVolume(htt(this.og,this.zg))}}omi(t){this.ovt=t,this.Dvi(t)}Dvi(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.hmi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.ami),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.umi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.cmi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.lmi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.dmi)}fmi(){const t=this.ovt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.hmi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.ami),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.umi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.cmi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.lmi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.dmi))}Xg(){this.sAt.Iit&&(this.sAt.Iit.mvi.resume(),this.fg=!1)}Hg(){this.sAt.Iit&&(this.sAt.Iit.mvi.pause(),this.fg=!0)}get U_(){const t=this.sAt.f8t;return t&&(this.U_=t.bvi.getPlayheadTime()),this.hU}set U_(t){this.hU=t}get ct(){return this.jx}get _vi(){return!!this.sAt&&void 0!==this.sAt.Iit}get fg(){return this.cU}set fg(t){this.cU=t}get zg(){return this.Xx}set zg(t){this.ovt&&this.ovt.setAdVolume(t),this.Xx=t}get og(){return this.ovt&&(this._mi=0===this.ovt.getAdVolume()),this._mi}set og(t){this.ovt&&this.ovt.setAdVolume(htt(t,this.zg)),this._mi=t}get Ig(){return this.U1}get G_(){return this.o2}set G_(t){this.o2=t}get Sg(){return this.h2}static gmi(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}wmi(i){const e=t.gmi(i);this.ovt&&e&&this.ovt.setVideoState(e)}Ny(){const t=this.sAt.f8t;t&&t.bvi.skip()}tr(){if(this.fmi(),this.ovt){this.wmi("stop"),this.ovt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.ovt.getTemporalSlots();for(const i of t)i.stop();this.ovt.dispose(),this.ovt=void 0}this.jx=NaN,this.G_=!1,this.h2=qo.BT,this.U_=0,this.vmi=0,this.fg=!0,void 0!==this.mmi&&(m(this.mmi),this.mmi=void 0)}gn(){this.tr(),this.Vo(),this.sAt.fn("Bit",this.Md),this.Wu.fn(Bh.pn,this.ami),this.j0t.removeEventListener("click",this.pmi)}constructor(t,i,e,s){super(),this.Qo=t,this.Wu=i,this.sAt=e,this.j0t=s,this.U1=Ri.oU().ks(),this.cU=!0,this.jx=NaN,this._mi=!1,this.o2=!1,this.h2=qo.BT,this.hU=0,this.vmi=0,this.hmi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const i=t.bvi,e=i.getPlayheadTime(),s=i.getDuration();return e>=s||Ya(s,e)})(this.sAt.f8t)||(this.fg=!0,this.Co(new Ye(this.U_)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.fg=!1,this.Co(new $e(this.U_));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.ovt){const t=this.ovt.getAdVolume();0===t?this._mi=!0:this.Xx=t,this.Co(new St(this.U_,this.zg))}}},this.umi=()=>{this.G_=!1;const t=this.fg;if(this.fg=!1,t&&(this.Co(new Rt(this.U_)),this.Co(new $e(this.U_))),this.h2=qo.QT,this.U_=0,!this.sAt.f8t)return;const i=this.sAt.f8t.bvi;this.jx=i.getDuration(),this.Co(new Te(this.jx)),this.mmi=v((()=>{if(!this._vi)return void this.g1();this.sAt.emi(this.U_);const t=i.getPlayheadTime();Jn(t,this.vmi,.001)||this.Co(new ri(t,void 0)),this.vmi=t}),250),this.ovt&&this.ovt.setAdVolume(htt(this.og,this.zg))},this.pmi=()=>{const t=this.sAt.f8t;t&&(t.Z2t===Hr.Cqt?this.Qo.Hg():this.fg||this.Hg())},this.g1=()=>{m(this.mmi),this.mmi=void 0},this.cmi=()=>{this.g1(),this.G_=!0},this.lmi=()=>{this.wmi("pause")},this.dmi=()=>{this.wmi("playing")},this.Md=t=>{t.Xl.Z2t===Hr.xqt&&(this.fg=!1)},this.ami=()=>{this.ovt&&this.ovt.resize(this.Wu.ku,this.Wu._u)},this.Xx=t.zg,e.yn("Bit",this.Md),this.Wu.yn(Bh.pn,this.ami),this.j0t.addEventListener("click",this.pmi)}};function htt(t,i){return t?0:i}var att=class extends tt{get name(){return Ps.Zwi}constructor(){super("A FreeWheel Ad Error occurred")}},utt=class extends tt{get name(){return Ps.Xwi}constructor(){super("A FreeWheel Reset Error Occurred")}},ctt=0;var ltt=class{Ami(t,i,e){t.setNetwork(i.networkId),t.setServer(i.adServerUrl);const s=this.ovt;if(s.setProfile(i.profile),i.assetId&&i.assetDuration&&s.setVideoAsset(i.assetId,i.assetDuration),i.siteSectionId&&s.setSiteSection(i.siteSectionId),s.registerVideoDisplayBase(e),i.cuePoints&&i.cuePoints.length)for(const t of i.cuePoints)s.addTemporalSlot("cue-"+ ++ctt,t.adUnit,t.timeOffset);const n=i.customData;if(Vu(n)){const t=w.keys(n);for(const i of t){const t=n[i];s.addKeyValue(i,t)}}}async ymi(){this.ovt.submitRequest(),await this.Mmi.OL}tr(){this.ovt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.bmi),this.Mmi.xL(new utt)}constructor(t,i,e,s){this.ovt=i,this.bmi=t=>{this.ovt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.bmi),t.success?this.Mmi.LL(void 0):this.Mmi.xL(new att)},this.Ami(t,e,s),i.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.bmi),this.Mmi=new Oi}},dtt=class{Tmi(){this.Nvi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Bvi),this.Nvi.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.Bvi)}get Smi(){return this.__.OL}yQt(){this.Tmi(),this.__.xL(new utt)}constructor(t){this.Nvi=t,this.Bvi=t=>{this.Tmi(),this.__.LL(void 0)},this.o9t=t=>{this.Tmi(),this.__.xL(new att)},this.__=new Oi,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Bvi),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.o9t)}},ftt=class{tS(t){this.Nvi=t}wvi(){return this.Nmi(this.Imi.kvi)}avi(){this.Nmi(this.Imi.Ovi)}async Nmi(t){if(this.Nvi)for(;t.length>0;){this.Dmi=new dtt(this.Nvi);const i=this.Dmi.Smi,e=this.Imi.Iit;e&&e.Z2t===Hr.Cqt&&e.mvi.stop();t.shift().mvi.play();try{await i}finally{this.Dmi=void 0}}}tr(){this.Dmi&&(this.Dmi.yQt(),this.Dmi=void 0),this.Emi=0}gn(){this.Qo.fn(Tf.fm,this.kmi)}constructor(t,i){this.Qo=t,this.Imi=i,this.Emi=0,this.kmi=()=>{const t=this.Qo.Q_();for(const i of this.Imi.xvi){const e=new Ri([this.Emi,t],[!0,!0]),s=i.mvi.getTimePosition();if(e.gr(s))switch(i.mvi.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.Nmi([i]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:i.mvi.play(),i.mvi.setVisible(!0)}}this.Emi=t},t.yn(Tf.fm,this.kmi)}},_tt=0,gtt=class t extends Jc{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++_tt}get hvi(){return 0!==this.svi.Ovi.length}get gvi(){return 0!==this.svi.kvi.length}async l5t(){if(!this.mKt)throw new g("Invalid state");const t=this.Lmi,i=t.newContext();i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),i.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const e=new ltt(t,i,this.mKt,this.xmi),s=this.svi.Svi(i,e.ymi());this.Cmi.tS(i),this.rvi.omi(i),this.Omi=e;try{await s}finally{this.rvi.rmi(),this.jmi=!0}}get rvi(){return this.t9t}get svi(){return this.Rmi}get lvi(){return this.jmi}static Pmi(t,i,e){const s=h.createElement("div");return s.id=e,s.className="theo-freewheel",i.classList.add("theo-freewheel-video"),s.appendChild(i),t.appendChild(s),s}get uvi(){return this.Cmi}b2t(t){this.rvi.wmi(t.type)}ge(){this.j0t.style.display="block",this.lj.style.display="block"}be(){this.j0t.style.display="none",this.lj.style.display="none"}E8t(t){this.mKt=t}tr(){this.jmi=!1,this.mKt=void 0,this.svi.tr(),this.Cmi.tr(),this.Omi&&(this.Omi.tr(),this.Omi=void 0),this.rvi.tr(),this.lj.src=""}gn(){this.tr(),this.t9t.gn(),this.Cmi.gn(),this.svi.gn(),this.j0t.remove(),this.Qo.we.removeChild(this.j0t)}constructor(i,e,n){super(),this.Qo=i,this.lj=e,this.jmi=!1,this.xmi=t.createUniqueDisplayBaseId(),this.j0t=t.Pmi(i.we,e,this.xmi),this.Lmi=new s.tv.freewheel.SDK.AdManager,this.Rmi=new rtt(this.j0t,this.lj),this.Cmi=new ftt(this.Qo,this.svi),this.Qa(this.svi),this.t9t=new ott(i,n,this.svi,this.j0t)}};function wtt(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function vtt(t,i,e){if(void 0!==i&&S(i)||i<0||i===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return e}return B1(i)}nu.lL.GU(new class{get d2t(){return F.b$t}YU(t){return t.integration===Au.FREEWHEEL}f2t(t,i,e){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new wc(t.Iu,t.Ol,1,[Jt.VA]);n.yU(t.we);const r=n.oB(Jt.VA),o=new gtt(t,r.pz,t.Iu);return new itt(t,i,n,o,r)}hY(t){const i=Ca(t);tr(i.cuePoints)||(i.cuePoints=[]);const e=[],s=t.assetDuration||0;for(const t of i.cuePoints){const i=vtt(t.adUnit,t.timeOffset,s),n=wtt(t.adUnit);!S(i)&&Sn(n)?(t.adUnit=n,t.timeOffset=i,e.push(t)):ra.vp("Invalid adUnit/timeOffset combination. Cue was removed.")}return i.cuePoints=e,i}W4(t,i,e,s){e.E8t(t,i,s)}});var mtt,ptt=self.theoplayerDeviceMetadata;function Att(t){return t.navigator&&t.navigator.userAgent||""}!function(t){t.zmi="Windows 10",t.Bmi="Windows 8.1",t.Umi="Windows 8",t.Qmi="Windows 7",t.Fmi="Windows Vista",t.Ymi="Windows Server 2003",t.Gmi="Windows XP",t.Vmi="Windows Phone",t.Wmi="Mac OS X",t.Hmi="Mac OS",t.wE="Android",t.mE="iOS",t.Xmi="Ubuntu",t.Zmi="Linux",t.qmi="Chrome OS"}(mtt||(mtt={}));var ytt={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function J(t,i){const e=ytt[i];return!!e&&Boolean(Att(t).match(e))}function Mtt(t){return J(t,"Android")}function btt(t){return J(t,"Windows Phone")}function Ttt(t){return J(t,"iOS")&&!btt(t)}function Stt(t){return J(t,"Ubuntu")}var Ntt,Itt=/Windows (NT|Phone) ([0-9.]+)/i,Dtt=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,Ett={"Windows 10":Itt,"Windows 8.1":Itt,"Windows 8":Itt,"Windows 7":Itt,"Windows Vista":Itt,"Windows Server 2003":Itt,"Windows XP":Itt,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":Dtt,"Mac OS":Dtt,"Chrome OS":void 0};function ktt(t,i){const e=Ett[i];return e?Att(t).match(e):null}function Ltt(t){return t.split(/[_.]/).map((t=>x(t,10)))}function xtt(t){if(function(t){return Boolean(Att(t).match(/Windows/i))}(t)){if(function(t){return J(t,"Windows 10")}(t))return"Windows 10";if(btt(t))return"Windows Phone";if(function(t){return J(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return J(t,"Windows 8")}(t))return"Windows 8";if(function(t){return J(t,"Windows 7")}(t))return"Windows 7";if(function(t){return J(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return J(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return J(t,"Windows XP")}(t))return"Windows XP"}else{if(Mtt(t))return"Android";if(Ttt(t))return"iOS";if(function(t){return J(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return J(t,"Mac OS")}(t))return"Mac OS";if(Stt(t))return"Ubuntu";if(function(t){return J(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return J(t,"Linux")&&!Stt(t)}(t))return"Linux"}}function Ctt(t,i){const e=function(t){const i=ktt(t,"Windows 10");return i&&i.length>2?Ltt(i[2]):void 0}(t),s=function(t){const i=ktt(t,"Mac OS X");return i&&i.length>2?Ltt(i[2]):void 0}(t),n=function(t){const i=ktt(t,"Android");return i&&i.length>1?Ltt(i[1]):void 0}(t),r=function(t){const i=ktt(t,"iOS");return i&&i.length>3?Ltt(i[3]):void 0}(t),o=function(t){const i=ktt(t,"Chrome OS");return i&&i.length>0?Ltt(i[0]):void 0}(t);return e?e.length>i?e[i]:void 0:s?s.length>i?s[i]:void 0:n?n.length>i?n[i]:void 0:r?r.length>i?r[i]:void 0:o&&o.length>i?o[i]:void 0}function Ott(t){const i=function(t){return Ctt(t,0)}(t),e=function(t){return Ctt(t,1)}(t),s=function(t){return Ctt(t,2)}(t);if(void 0!==i)return void 0===e?""+i:void 0===s?i+"."+e:i+"."+e+"."+s}!function(t){t.Kmi="Chrome",t.Jmi="Chrome Mobile",t.$mi="Chrome iOS",t.tpi="Chromium",t.ipi="Firefox",t.epi="Seamonkey",t.spi="Firefox iOS",t.npi="Firefox Mobile",t.rpi="Safari",t.opi="Safari Mobile",t.hpi="Edge",t.upi="Edge Chromium",t.cpi="Edge Mobile",t.lpi="IE",t.fpi="Opera",t._pi="Opera Mobile",t.gpi="Vivaldi",t.wpi="HeadlessChrome",t.vpi="Android Browser"}(Ntt||(Ntt={}));var jtt={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function Ms(t,i){const e=jtt[i];return!!e&&Boolean(Att(t).match(e))}function Rtt(t){return Boolean(Att(t).match(/Mobi/i))}function Ptt(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||ztt(t)}function ztt(t){return Ms(t,"Chrome iOS")}function Btt(t){return Ms(t,"Firefox")&&!Qtt(t)}function Utt(t){return Ms(t,"Firefox Mobile")&&!Qtt(t)&&Rtt(t)}function Qtt(t){return Ms(t,"Seamonkey")}function Ftt(t){return Ms(t,"Firefox iOS")&&!Qtt(t)}function Ytt(t){return Ms(t,"Safari")&&!Ms(t,"Chrome")&&!Po.jE}function Gtt(t){return Boolean(Jtt(t))}function Vtt(t){return Ms(t,"Edge")}function Wtt(t){return Ms(t,"Edge Chromium")}function Htt(t){return Ms(t,"IE")}function Xtt(t){return Ms(t,"Vivaldi")}var Ztt,qtt=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Ktt={Chrome:qtt,"Chrome Mobile":qtt,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:qtt,HeadlessChrome:qtt,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function Ni(t,i){const e=Ktt[i];return e?Att(t).match(e):null}function Jtt(t){return Ni(t,"Opera")}function $tt(t){const i=function(t){return Ni(t,"Firefox")}(t);return i?C(i[1]):0}function tit(t){const i=function(t){return Ni(t,"Firefox iOS")}(t);return i?C(i[1].split(".")[0]):0}function iit(t){const i=function(t){return Ni(t,"Safari")}(t);return i?C(i[2].split(".")[0]):0}function eit(t){const i=function(t){return Ni(t,"Edge")}(t);return i?C(i[1]):0}function sit(t){const i=function(t){return Ni(t,"Edge Chromium")}(t);return i?C(i[1]):0}function nit(t){const i=function(t){return Ni(t,"IE")}(t);return i?C(i[2]):0}function rit(t){const i=function(t){return Ni(t,"Vivaldi")}(t);return i?C(i[1]):0}function oit(t){if(Mtt(t))return Ptt(t)?"Chrome Mobile":Btt(t)||Utt(t)?"Firefox Mobile":Vtt(t)?"Edge Mobile":Gtt(t)?"Opera Mobile":"Android Browser";if(Ttt(t)){if(Ptt(t)||ztt(t))return"Chrome iOS";if(Btt(t)||Ftt(t))return"Firefox iOS";if(Vtt(t))return"Edge Mobile";if(Ytt(t)||function(t){return Ytt(t)&&Rtt(t)}(t))return"Safari Mobile";if(Gtt(t))return"Opera Mobile"}return function(t){return Ms(t,"Chromium")}(t)?"Chromium":function(t){return Ms(t,"HeadlessChrome")}(t)?"HeadlessChrome":Ptt(t)?"Chrome":Btt(t)?"Firefox":Ytt(t)?"Safari":Vtt(t)?"Edge":Wtt(t)?"Edge Chromium":Htt(t)?"IE":Gtt(t)?"Opera":Xtt(t)?"Vivaldi":void 0}function hit(t){return Xtt(t)?rit(t):ztt(t)?Number(function(t){const i=Ktt["Chrome iOS"];return i&&i.exec(Att(t))||[]}(t)[1]):Ptt(t)?Number(function(t){const i=Ktt.Chrome;return i&&i.exec(Att(t))||[]}(t)[1]):Btt(t)||Utt(t)?$tt(t):Ftt(t)?tit(t):Ytt(t)?iit(t):Vtt(t)?eit(t):Wtt(t)?sit(t):Htt(t)?nit(t):Gtt(t)?function(t){const i=Jtt(t);return i&&i[0].indexOf("Opera")>-1?C(i[5]):i?C(i[2].split(".")[0]):0}(t):void 0}function ait(t){const i=Att(t);return i.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":i.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(i)?"tablet":/Mobi/.test(i)?"mobile":i.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":i.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(oit(t))}(t)?"pc":void 0}!function(t){t.mpi="pc",t.ppi="console",t.Api="settop",t.ypi="mobile",t.Mpi="tablet",t.bpi="smarttv",t.Tpi="searchbot"}(Ztt||(Ztt={}));var uit=class{oY(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){let t=Nn.IL("deviceId");if(t)return t;let i=sN();return Nn.EP("deviceId",i),i}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"8.3.0"),this.Spi(t),this.Npi(),this.Ipi(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const i=t.connectionType;i?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i):(this.Dpi(),Il.connection&&Il.connection.addEventListener&&Il.connection.addEventListener("change",this.Dpi))}Spi(t){this.Epi(t);const i=t.deviceManufacturer||ptt&&ptt.manufacturer;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,i);const e=t.deviceModel||ptt&&ptt.model;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,e)}Epi(t){const i=t.deviceType||function(){const t=ait(self);switch(t){case Ztt.ppi:return"game-console";case Ztt.bpi:return"tv";case Ztt.Api:return"media-streamer";default:return t}}();i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,i)}Npi(){const t=oit(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const i=hit(self);void 0!==i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,i.toString())}Ipi(t){const i=t.deviceOs||xtt(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,i);const e=t.deviceOsVersion||Ott(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,e.toString())}gn(){Il.connection&&Il.connection.removeEventListener&&Il.connection.removeEventListener("change",this.Dpi)}constructor(t,i){this.empClient=t,this.agama=i,this.Dpi=()=>{const t=ra.Bst;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const i=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(ra.zst);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i)}}}};var cit,ka;ec(function(t){return i=>class extends i{F_(t,i){this.kpi&&this.kpi.XQ(),super.F_(t)}gn(){this.kpi&&this.kpi.gn(),super.gn()}constructor(i,e){super(i,e),this.RQ=new t,this.kpi=new rN(this,this.RQ,e)}}}(class extends HS{Wg(t){this.Lpi=t,this.xpi&&(this.RQ=function(t,i){const e=function(t,i){switch(i){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(i,t.logLevel);i.setLogLevel(e);const s=new i.EMPClient(t.config);return function(t,i){return t.setExternalConfig(i.config),t}(s,t)}(t,this.xpi),this.RQ&&(this.Cpi=new uit(this.RQ,this.xpi),this.bo=!0))}rY(){return this.xpi||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),!!this.xpi}sY(){return this.bo}xF(t,i){if(this.RQ&&this.xpi)switch(t){case yn.eQ:this.RQ.setMeasurement(this.xpi.Measurement.BUFFER_LENGTH,i);break;case yn.sQ:this.RQ.setMeasurement(this.xpi.Measurement.BYTES_RECEIVED,i);break;case yn.rQ:this.RQ.setMeasurement(this.xpi.Measurement.SEGMENT_PROFILE_BITRATE,i);break;case yn.oQ:this.RQ.setMeasurement(this.xpi.Measurement.VIDEO_PROFILE_BITRATE,i);break;case yn.nQ:this.RQ.setMeasurement(this.xpi.Measurement.SEGMENT_READ_BITRATE,i);break;case yn.KU:this.RQ.setMeasurement(this.xpi.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,i);break;case yn.JU:this.RQ.setMeasurement(this.xpi.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,i);break;case yn.$U:this.RQ.setMeasurement(this.xpi.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,i);break;case yn.tQ:this.RQ.setMeasurement(this.xpi.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,i);break;case yn.iQ:this.RQ.setMeasurement(this.xpi.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,i);break;case yn.aQ:this.RQ.setMeasurement(this.xpi.Measurement.PLAYBACK_POSITION,i);break;case yn.uQ:this.RQ.setMeasurement(this.xpi.Measurement.NUMBER_OF_FRAMES_DECODED,i);break;case yn.hQ:this.RQ.setMeasurement(this.xpi.Measurement.NUMBER_OF_FRAMES_DROPPED,i)}}fF(t,i){if(this.RQ&&this.xpi)switch(t){case FS._Q:this.RQ.setSessionMetadata(this.xpi.SessionMetadata.ASSET_DURATION,i);break;case FS.fQ:this.RQ.setSessionMetadata(this.xpi.SessionMetadata.MANIFEST_URI,i);break;case FS.gQ:this.RQ.setSessionMetadata(this.xpi.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,i);break;case FS.mQ:this.RQ.setSessionMetadata(this.xpi.SessionMetadata.SERVICE_NAME,i);break;case FS.wQ:this.RQ.setSessionMetadata(this.xpi.SessionMetadata.CDN,i);break;case FS.vQ:this.RQ.setSessionMetadata(this.xpi.SessionMetadata.CONTENT_TITLE,i);break;case FS.pQ:this.RQ.setSessionMetadata(this.xpi.SessionMetadata.CONTENT_TYPE,i);break;case FS.AQ:this.RQ.setSessionMetadata(this.xpi.SessionMetadata.CONTENT_DESCRIPTION,i)}}oY(){this.Cpi&&this.Lpi&&this.Cpi.oY(this.Lpi)}nY(t,i){this.xpi&&this.RQ&&(this.QF(),function(t,i,e,s){const n=nN(t,e,s);i.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.xpi,this.RQ,t,i),this.Opi=!0)}gn(){this.Cpi&&this.Cpi.gn(),this.jpi(YS.yQ),this.RQ=void 0}$Q(t){this.Rpi(t)}eF(t,i){this.RQ&&this.RQ.event(t.code,i)}QF(){this.RQ&&this.Opi&&(this.RQ.exitSession(),this.Opi=!1)}jpi(t){if(this.RQ&&this.xpi&&(this.QF(),t===YS.yQ))this.RQ.shutdown(this.xpi.ShutdownType.NORMAL_SHUTDOWN)}tF(t,i,e){this.Rpi(t,i,e)}Rpi(t,i,e){if(this.RQ&&this.xpi)switch(t){case ai.Sm:this.Ppi(this.xpi.ViewState.PLAYING,i,e);break;case ai.XU:this.Ppi(this.xpi.ViewState.FAILED,i,e);break;case ai.ZU:this.Ppi(this.xpi.ViewState.INITIAL_BUFFERING,i,e);break;case ai.VU:this.Ppi(this.xpi.ViewState.PAUSED,i,e);break;case ai.WU:this.Ppi(this.xpi.ViewState.SEEK,i,e);break;case ai.HU:this.Ppi(this.xpi.ViewState.STALLED,i,e);break;case ai.qU:this.Ppi(this.xpi.ViewState.NO_ACCESS,i,e)}}Ppi(t,i,e){if(this.RQ)if(i){const s=function(t){return t||""}(e);this.RQ.viewStateExtended(t,i.code,s)}else this.RQ.viewStateChanged(t)}constructor(){super(),this.bo=!1,this.Opi=!1,this.xpi=Ua.Agama}}),st.vit),function(t){t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last"}(cit||(cit={})),function(t){t.VOD="vod",t.LIVE="live"}(ka||(ka={}));var lit=class{get va(){return this.zpi.va}get lt(){return this.vz}get H_(){return this.mz}Bpi(t){this.vz=ia(t),this.mz=t,this.Qo.Co(new as(t))}ga(t){this.Upi.tr(),this.Qpi.kL(),this.Fpi=!1,this.Qo.Ypi(t)}async iet(t,i){if(this.Gpi.tr(),this.Fpi=!1,!t||!function(t){return t.sources.some((t=>t.integration===Js.VERIZON_MEDIA))}(t))return await this.Qo.Vpi(t,i);try{this.Wpi=await this.Hpi.lgi(t),await this.Qo.Vpi(this.Wpi,i)}catch(t){this.Bpi(new ao(qa.MANIFEST_LOAD_ERROR,t.message,t))}}gn(){this.L5.g_(),this.Xpi.g_(),this.Qo.fn(Tf.Dv,this.Zpi),this.Qo.fn(Tf.jh,this.Tdi),this.Qo.fn(Tf.fm,this.xoi),this.Qo.fn(Tf.Ov,this.Gfi),this.Qo.fn($.ym,this.jd);for(const t of this.Upi.s$t.Gu)t.fn("qpi",this.Kpi),t.fn("Bit",this.Jpi),t.fn("zit",this.$pi);this.Upi.s$t.fn("jit",this.tAi),this.Upi.s$t.fn("Oit",this.iAi),this.Upi.gn(),this.P0t&&(this.P0t.h_(),this.P0t=void 0),this.Fpi=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const i=await this.eAi.Tbt(t.integrationData.source.prefix,t.integrationData.source.id,this.Xpi.f_,t.integrationData.preplayResponse.sid);this.zpi.sAi(i),this.Qpi.nAi(i,this.Upi.s$t.Gu)}catch(t){0}}rAi(t){this.Upi.oAi(t),this.Upi.Sit.forEach((i=>i.hAi(t))),this.Upi.aAi(this.Qo.Dg()),this.R0t()}F_(t){this.Upi.Iit||(this.L5.g_(),this.L5=new Bd,$r(this.Xsi(t,this.L5.f_)))}async Xsi(t,i){if(Vr(i),t<this.Qo.Q_())return void this.uAi(t);let e=[];switch(this.Upi.cAi){case cit.PLAY_ALL:e=this.Upi.lAi(this.Qo.Q_(),t),await this.dAi(t,e,i);break;case cit.PLAY_LAST:const s=this.Upi.lAi(this.Qo.Q_(),t).pop();e=s?[s]:[],await this.dAi(t,e,i);break;case cit.PLAY_NONE:this.fAi(t)}}uAi(t){const i=bo(this.Upi.s$t.Gu,(i=>i.Sat.gr(t)));i?this.Qo._Ai(i.MS):this.Qo._Ai(t)}fAi(t){const i=this.Upi.lAi(this.Qo.Q_(),t).pop();i&&i.Sat.gr(t)?this.Qo._Ai(i.bS):this.Qo._Ai(t)}async dAi(t,i,e){for(const t of i)await this.gAi(t,e);const s=i[i.length-1];s&&s.Sat.gr(t)?this.Qo.Q_()<t&&this.Qo._Ai(s.bS):this.Qo._Ai(t)}async gAi(t,i){t.fn("qpi",this.Kpi);const e=Promise.race([t.k_("zit",i),t.k_("qpi",i)]);this.rAi(this.Qo.Q_()),t.ro||this.Qo._Ai(t.MS),await e,t.yn("qpi",this.Kpi)}R0t(){const t=bo(this.Upi.Sit,(t=>t.wAi.length>0));if(t){const i=t.wAi[0];this.P0t||(this.P0t=new Ho(this.Qo.we),this.P0t.yn("clickstart",this.vAi)),this.P0t.V$t=i}else this.P0t&&(this.P0t.h_(),this.P0t=void 0)}constructor(t,i,e,s,n,r,o){this.Qo=t,this.Gpi=i,this.Hpi=e,this.Upi=s,this.zpi=n,this.eAi=r,this.Qpi=o,this.vz=void 0,this.mz=void 0,this.L5=new Bd,this.Xpi=new Bd,this.mAi=void 0,this.Fpi=!1,this.P0t=void 0,this.Zpi=t=>{const i=t.currentSource;if(!i||!i.integrationData)return;const{preplayResponse:e,source:s}=i.integrationData;this.zpi.pAi(e),e&&e.type===ka.VOD&&e.ads&&this.Upi.nAi(e.ads),this.Gpi.AAi=i.integrationData,s.assetInfo&&$r(this.fetchAssetInfo(i))},this.Tdi=()=>{this.Fpi=!0},this.xoi=()=>{this.Fpi&&this.rAi(this.Qo.Q_())},this.Gfi=()=>{this.Fpi&&(this.rAi(1/0),this.Fpi=!1)},this.jd=()=>{$r(this.Gpi.Cn())},this.Kpi=t=>{this.L5.g_(),this.L5=new Bd,$r(this.Xsi(t.Xl.bS,this.L5.f_))},this.Jpi=()=>{1!==this.Qo.gg&&(this.mAi=this.Qo.gg,this.Qo.gg=1)},this.$pi=()=>{void 0!==this.mAi&&(this.Qo.gg=this.mAi,this.mAi=void 0)},this.tAi=t=>{t.Xl.yn("qpi",this.Kpi),t.Xl.yn("Bit",this.Jpi),t.Xl.yn("zit",this.$pi)},this.iAi=t=>{t.Xl.fn("qpi",this.Kpi),t.Xl.fn("Bit",this.Jpi),t.Xl.fn("zit",this.$pi)},this.vAi=()=>{this.Qo.Hg()},this.Qo.yn(Tf.Dv,this.Zpi),this.Qo.yn(Tf.jh,this.Tdi),this.Qo.yn(Tf.fm,this.xoi),this.Qo.yn(Tf.Ov,this.Gfi),this.Qo.yn($.ym,this.jd),this.Upi.s$t.yn("jit",this.tAi),this.Upi.s$t.yn("Oit",this.iAi)}};var dit,fit=Nu({breaksIndex:xe,adsIndex:xe,startTime:xe,endTime:xe}),_it=Nu({index:xe,timeOffset:xe}),git=Nu({duration:xe,apiFramework:fa(Zn,IT),creative:Zn,mimeType:Zn,width:xe,height:xe,companions:Eu(function(t){return new jT(t)}((()=>git))),extensions:fa(ST,Eu(NT)),fw_parameters:fa(ST,V(Zn)),events:V(Eu(Zn))}),wit=Nu({type:wn(["linear","nonlinear"]),position:wn(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:xe,duration:xe,ads:Eu(git),events:V(Eu(Zn))}),vit=Nu({breaks:Eu(wit),breakOffsets:Eu(_it),placeholderOffsets:Eu(fit)}),mit=Nu({fairplayCertificateURL:fa(ST,Zn),widevineLicenseURL:fa(ST,Zn),playreadyLicenseURL:fa(ST,Zn)}),pit={type:wn(kT(ka)),playURL:Zn,prefix:Zn,sid:Zn,drm:fa(ST,mit)},Ait=Nu(ol({},pit,{type:wn([ka.VOD]),ads:vit,interstitialURL:fa(Zn,IT,ST)})),yit=fa(Ait,Nu(ol({},pit,{type:wn([ka.LIVE])}))),Mit=Zn,bit=Nu({userId:Zn,externalId:fa(Zn,Eu(Zn))});!function(t){t[t.AD_IMPRESSIONS=1]="AD_IMPRESSIONS",t[t.FW_VIDEO_VIEWS=2]="FW_VIDEO_VIEWS",t[t.LINEAR_AD_DATA=4]="LINEAR_AD_DATA"}(dit||(dit={}));var Tit=class{async Tbt(t){try{return this.yAi(t)}catch(t){throw t}}async yAi(t){const i=await async function(t){const i=t.prefix,e=Sit[t.assetType],s=function(t){if(Eu(Mit).uP(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(Mit.uP(t))return t;if(bit.uP(t)&&tr(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(bit.uP(t))return"ext/"+t.userId+"/"+t.externalId;throw new b("Invalid asset id")}(t.id),n=await async function(t){if(t&&await ra.yO())return{rmt:"fps",manifest:"m3u8"};if(t&&await ra.vO())return{rmt:"wv",manifest:"mpd"};if(t&&await ra.AO())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),r=function(t,i){const e=Nit(t,i);return e?{"ad.cping":"1","ad.pingf":String(e)}:{}}(t.assetType,t.ping);let o={};tr(t.preplayParameters)?t.preplayParameters.forEach((t=>{o[t[0]]=t[1]})):o=t.preplayParameters;const h=i+"/preplay/"+e+s+".json";return qn(h,ol({v:"2"},o,n,r,o))}(t),e=this.aE.uD({ZD:Cl.GET,zu:i,qD:Ft.ND}),s=await e,n=ol({},await s.ly(),{type:t.assetType===U.ASSET?ka.VOD:ka.LIVE});return yit.uP(n)||yit.lP(n,"PreplayResponse"),n}constructor(t){this.aE=t}},Sit={[U.ASSET]:"",[U.CHANNEL]:"channel/",[U.EVENT]:"event/"};function Nit(t,i){const e=t!==U.ASSET;return(!e&&i.adImpressions?1:0)+(!e&&i.freeWheelVideoViews?2:0)+(e&&i.linearAdData?4:0)}var Iit,Dit=Nu({ad_id:Zn,apiFramework:fa(IT,Zn),companions:Eu(NT),creative:Zn,duration:xe,mimeType:Zn,height:xe,width:xe,extensions:fa(ST,Eu(NT)),fw_parameters:fa(ST,V(Zn))}),Eit=Nu({breakId:Zn,ads:Eu(Dit),type:wn(["linear","nonlinear"]),position:wn(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:xe,duration:xe,height:fa(ST,xe),width:fa(ST,xe),events:V(Eu(Zn))}),kit=Nu({breaks:Eu(Eit)}),Lit=Nu({next_time:xe,ads:fa(ST,kit),extensions:fa(ST,Eu(NT)),error:fa(ST,Zn),currentBreakEnd:fa(ST,xe)});!function(t){t.Ebt="start",t.WU="seek"}(Iit||(Iit={}));var xit=class{async Tbt(t,i){try{return this.yAi(t,i)}catch(t){throw t}}async yAi(t,i){const e=function(t){const i={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(i.ft=String(t.seekTime));t.event&&(i.ev=t.event);return qn(t.zonePrefix+"/session/ping/"+t.sessionId+".json",ol({},i))}(t),s=this.aE.uD({ZD:Cl.GET,zu:e,qD:Ft.ND,f_:i}),n=await s,r=await n.ly();return Lit.uP(r)||Lit.lP(r,"PingResponse"),r}constructor(t){this.aE=t}};var Cit=class extends os{get lD(){return this.dD}fa(){return new Oit(this.dD)}constructor(t){super("MAi"),this.dD=t}},Oit=class extends Os{constructor(t){super("pingresponse"),this.response=t}},jit=class extends os{get lt(){return this.vz}fa(){return new Rit(this.vz)}constructor(t){super("bAi"),this.vz=t}},Rit=class extends Os{constructor(t){super("pingerror"),this.error=t}},Pit=class extends Mo{set AAi(t){this.TAi=t}get SAi(){return this.NAi}async Cn(){const t=this.TAi;if(!t)return;0!==Nit(t.source.assetType,t.source.ping)&&(this.NAi=this.Qo.Dg().start(0),await this.IAi(Iit.Ebt),this.Qo.yn("timeupdate",this.DAi),this.Qo.yn("seeking",this.EAi))}async IAi(t,i){const e=this.TAi.preplayResponse,s={};if(S(this.NAi))return void 0;if(Ks(this.kAi)&&Ya(this.kAi,this.Qo.Q_()-this.NAi))return;void 0!==i&&(s.seekTime=i),void 0!==t&&(s.event=t);let n,r=this.Qo.Q_()-this.NAi;t===Iit.Ebt?r=0:t!==Iit.WU&&this.LAi&&(r=_.min(r,this.LAi)),this.kAi=r;try{var o;const t=await this.xAi.Tbt(ol({zonePrefix:e.prefix,sessionId:e.sid,currentTime:r,hasFreeWheelVideoViews:null==(o=this.TAi)?void 0:o.source.ping.freeWheelVideoViews},s),this.$O.f_);this.Co(new Cit(t)),this.LAi=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){be(t)||(n=t.message)}finally{n&&this.Co(new jit(n))}}tr(){this.LAi=void 0,this.TAi=void 0,this.NAi=NaN,this.CAi=!1,this.OAi=NaN,this.kAi=void 0,this.Qo.fn("seeking",this.EAi),this.Qo.fn("timeupdate",this.DAi),this.jAi()}jAi(){this.$O.g_(),this.$O=new Bd}gn(){this.tr()}constructor(t,i){super(),this.xAi=t,this.Qo=i,this.NAi=NaN,this.LAi=void 0,this.CAi=!1,this.OAi=NaN,this.$O=new Bd,this.kAi=void 0,this.DAi=async()=>{const t=this.Qo.Q_();if(this.OAi=t,this.CAi||Bn(this.LAi)||S(this.NAi))return;this.NAi+this.LAi<=t&&(this.CAi=!0,await this.IAi(),this.CAi=!1)},this.EAi=()=>{if(this.Qo.Q_()===this.NAi)return;this.CAi&&this.jAi(),this.OAi=this.Qo.Q_();const t=this.OAi-(this.NAi||0);S(t)?$r(this.IAi(Iit.WU,0)):$r(this.IAi(Iit.WU,t))}}},zit=class{async lgi(t){const i=[];for(const e of t.sources)if(Bit(e))try{const s=Qit({source:e,preplayResponse:await this.RAi.Tbt(e)},t,this.oZ);s.src&&(s.src=qn(s.src,e.playbackUrlParameters)),i.push(s)}catch(t){0}else i.push(e);if(0!==t.sources.length&&0===i.length)throw new g("Fatal: unable to play VerizonMediaSources.");return ol({},t,{sources:i})}constructor(t,i){this.RAi=t,this.oZ=i}};function Bit(t){return"verizon-media"===t.integration}function Uit(t){if(t.sources)if(tr(t.sources)){for(const i of t.sources)if(!Sn(i)&&"verizon-media"===i.integration)return!0}else if(!Sn(t.sources))return"verizon-media"===t.sources.integration;return!1}function Qit(t,i,e){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=Mw({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},i,e);return r.integrationData=t,r}var Fit=class extends os{fa(){return new Yit(this.Xl.va)}constructor(t,i){super("Bit"),this.Xl=t,this.GN=i}},Yit=class extends Os{constructor(t){super("adbreakbegin"),this.adBreak=t}},Git=class extends os{fa(){return new Vit(this.Xl.va)}constructor(t,i){super("zit"),this.Xl=t,this.GN=i}},Vit=class extends Os{constructor(t){super("adbreakend"),this.adBreak=t}},Wit=class extends os{fa(){return new Hit(this.Xl.va)}constructor(t){super("qpi"),this.Xl=t}},Hit=class extends Os{constructor(t){super("adbreakskip"),this.adBreak=t}};var Xit=class extends os{fa(){return new Zit(this.Xl.va)}constructor(t){super("h4t"),this.Xl=t}},Zit=class extends Os{constructor(t){super("updateadbreak"),this.adBreak=t}},qit=class extends B{get va(){return this.Xa||(this.Xa=function(t){let i;const e={get startTime(){return t.MS},get endTime(){return t.bS},get duration(){return t.ct},get ads(){return t.Oc.va},get skipOffset(){return t.CZt},set skipOffset(i){t.CZt=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new jt(t,e),e}(this)),this.Xa}get MS(){return this.xS}get bS(){return this.jx?this.xS+this.jx:void 0}PAi(t){this.jx=t-this.MS;for(const i of this.Oc.Gu)i.MS>t&&this.Oc.rS(i);this.Co(new Xit(this))}get ct(){return this.jx}get Sat(){const t=this.bS;return Ks(t)?new Ri([this.MS,t]):Ri.oU()}get Oc(){return this.Ic}get zAi(){return this.BAi}get ro(){return this.ho}get CZt(){return this.Hgi?-1:this.OZt}set CZt(t){this.Hgi||(this.OZt=t)}Zut(t){return t>=this.MS&&(Bn(this.ct)||t<=this.MS+this.ct)}UAi(t){return-1!==this.CZt&&(!!Ks(this.bS)&&t-this.MS>=this.CZt)}Ny(){this.Ic.Gu.forEach((t=>t.Ny())),this.Co(new Wit(this))}QAi(t){const i=Ks(this.bS)&&t>=this.bS,e=this.MS<=t&&!i&&!this.ro,s=this.ro&&this.bS&&t>=this.bS;e&&(this.ho=!0,this.Co(new Fit(this,this.MS))),this.Ic.Gu.forEach((i=>i.QAi(t))),s&&(this.BAi=!0,this.ho=!1,this.Co(new Git(this,this.bS)))}constructor(t,i,e,s,n){super(),this.xS=t,this.jx=i,this.Ic=e,this.Hgi=s,this.ho=!1,this.BAi=!1,this.OZt=n}},Kit=class extends os{fa(){return new Jit(this.Rit.va)}constructor(t,i){super("Uit"),this.Rit=t,this.GN=i}},Jit=class extends Os{constructor(t){super("adbegin"),this.ad=t}},$it=class extends os{fa(){return new tet(this.Rit.va)}constructor(t,i){super("Qit"),this.Rit=t,this.GN=i}},tet=class extends Os{constructor(t){super("adend"),this.ad=t}},iet=class extends os{fa(){return new eet(this.Rit.va)}constructor(t){super("FAi"),this.Rit=t}},eet=class extends Os{constructor(t){super("removead"),this.ad=t}},set=class extends I3{eii(t){}oii(t){this.Co(new iet(t))}constructor(){super()}},net=class extends os{fa(){return new ret(this.Rit.va)}constructor(t){super("u4t"),this.Rit=t}},ret=class extends Os{constructor(t){super("adfirstquartile"),this.ad=t}},oet=class extends os{fa(){return new het(this.Rit.va)}constructor(t){super("c4t"),this.Rit=t}},het=class extends Os{constructor(t){super("admidpoint"),this.ad=t}},aet=class extends os{fa(){return new uet(this.Rit.va)}constructor(t){super("l4t"),this.Rit=t}},uet=class extends Os{constructor(t){super("adthirdquartile"),this.ad=t}},cet=class extends os{fa(){return new det(this.Rit.va)}constructor(t){super("YAi"),this.Rit=t}},det=class extends Os{constructor(t){super("adcomplete"),this.ad=t}};var fet,_et,get,wet=class t extends B{static GAi(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.GAi(i,e))),e.extensions,e.fw_parameters,e.events,void 0)}static VAi(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.VAi(i,e))),e.extensions,e.fw_parameters,void 0,e.ad_id)}get va(){return this.Xa||(this.Xa=function(t){let i;const e={get apiFramework(){return t.WXt},get companions(){return t.RXt.va},get creative(){return t.WAi},get duration(){return t.ct},get endTime(){return t.bS},get events(){return t.uG},get extensions(){return t.HAi},get freeWheelParameters(){return t.XAi},get height(){return t.Ti},get mimeType(){return t.aG},get startTime(){return t.MS},get width(){return t.ji},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new jt(t,e),e}(this)),this.Xa}get MS(){return this.xS}get bS(){return this.xS+this.jx}get ct(){return this.jx}get WXt(){return this.HXt}get WAi(){return this.ZAi}get aG(){return this.TG}get ji(){return this.qx}get Ti(){return this.Kx}get uG(){return this.hd}get RXt(){return this.PXt}get HAi(){return this.qAi}get XAi(){return this.KAi}get ro(){return this.ho}get wAi(){var t;return null!=(t=this.hd.clickthroughs)?t:[]}QAi(t){const i=this.MS<=t&&t<this.bS,e=i&&!this.ro,s=!i&&this.ro;e&&(this.JAi=!1,this.$Ai=!1,this.tyi=!1,this.iyi=!1,this.ho=!0,this.Co(new Kit(this,this.MS))),s&&(this.ho=!1,this.Co(new $it(this,this.bS)))}hAi(t){const i=(t-this.MS)/this.ct;!this.JAi&&i>=.25&&(this.JAi=!0,this.Co(new net(this))),!this.$Ai&&i>=.5&&(this.$Ai=!0,this.Co(new oet(this))),!this.tyi&&i>=.75&&(this.tyi=!0,this.Co(new aet(this))),!this.iyi&&i>=.9999&&(this.iyi=!0,this.Co(new cet(this)))}Ny(){this.JAi=!0,this.$Ai=!0,this.tyi=!0,this.iyi=!0}gn(){this.fn("Uit",this.eyi),this.fn("Qit",this.syi)}constructor(t,i,e,s,n,r,o,h,a=[],u={},c={},l){super(),this.xS=t,this.jx=i,this.HXt=e,this.ZAi=s,this.TG=n,this.qx=r,this.Kx=o,this.qAi=a,this.KAi=u,this.hd=c,this.MZt=l,this.PXt=new set,this.ho=!1,this.JAi=!1,this.$Ai=!1,this.tyi=!1,this.iyi=!1,this.eyi=()=>this.hAi(this.xS),this.syi=()=>this.hAi(this.bS),this.PXt.sii(h),this.yn("Uit",this.eyi),this.yn("Qit",this.syi)}},vet=class extends os{fa(){return new met(this.Xl.va)}constructor(t){super("jit"),this.Xl=t}},met=class extends Os{constructor(t){super("addadbreak"),this.adBreak=t}},pet=class extends os{fa(){return new Aet(this.Xl.va)}constructor(t){super("Oit"),this.Xl=t}},Aet=class extends Os{constructor(t){super("removeadbreak"),this.adBreak=t}},yet=class extends I3{eii(t){this.Co(new vet(t))}oii(t){this.Co(new pet(t))}constructor(){super()}},Met=class{get va(){return this.Xa||(this.Xa=function(t){return{get adBreaks(){return t.s$t.va},get currentAdBreak(){if(t.Iit)return t.Iit.va},get currentAds(){return t.Iit?t.Iit.Oc.va:(new set).va},skip(){t.Ny()}}}(this)),this.Xa}get s$t(){return this.D$t}get Iit(){return bo(this.D$t.Gu,(t=>t.ro))}get Sit(){return this.Iit?this.Iit.Oc.Gu.filter((t=>t.ro)):[]}get nyi(){if(0===this.s$t.U||0===this.ILt.Dg().length)return;const t=this.ILt.Dg().end(this.ILt.Dg().length-1);return bo(this.s$t.Gu,(i=>i.Zut(t)))}get cAi(){return this.ryi}aAi(t){if(0===t.length)return;const i=Ri.xn(t);for(const t of this.D$t.Gu.slice())Ks(t.bS)&&i.Cn(0)>t.bS&&this.D$t.rS(t)}nAi(t){const i=!function(t){return Ks(t.breakOffsets)}(t),e=i?this.Gpi.SAi:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+e;const n=new set;let r=0;for(const e of s.ads){const s=i?wet.VAi(t,e):wet.GAi(t,e);n.nS(s),t+=s.ct,r+=s.ct}const o=s.timeOffset+e,h=i?void 0:s.duration,a=new qit(o,h,n,i,this.oyi);i&&this.hyi.push({NXt:a,sDt:o+r}),this.D$t.nS(a)}}ayi(t){const i=this.nyi;i&&i.PAi(t+this.Gpi.SAi)}oAi(t){this.uyi=t,this.D$t.Gu.forEach((i=>i.QAi(t)))}Ny(){const t=this.uyi,i=this.Iit;t&&i&&i.UAi(t)&&i.Ny()}lAi(t,i){let e=[];for(const s of this.s$t.Gu)!s.zAi&&s.MS>=t&&s.MS<i&&e.push(s);return e}gn(){this.ILt.fn("timeupdate",this.cyi),this.Gpi.fn("MAi",this.lyi)}tr(){for(const t of this.s$t.Gu){for(const i of t.Oc.Gu)i.Vo();t.Vo()}this.s$t.kL(),this.uyi=void 0,this.hyi=[]}constructor(t,i,e,s){this.hyi=[],this.lyi=t=>{t.lD.ads&&this.nAi(t.lD.ads),t.lD.currentBreakEnd&&this.ayi(t.lD.currentBreakEnd)},this.cyi=t=>{if(0===this.hyi.length||0===this.ILt.Dg().length)return;const i=this.ILt.Dg().end(this.ILt.Dg().length-1);for(const t of this.hyi.slice())Ks(t.NXt.ct)?jn(this.hyi,t):t.sDt<i&&(t.NXt.PAi(t.sDt),jn(this.hyi,t))},this.ILt=t,this.Gpi=i,this.D$t=new yet,this.oyi=e,this.ryi=s,t.yn("timeupdate",this.cyi),this.Gpi.yn("MAi",this.lyi)}};!function(t){t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED"}(fet||(fet={})),function(t){t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED"}(_et||(_et={})),function(t){t[t.ADULT_LANGUAGE=1]="ADULT_LANGUAGE",t[t.SEXUAL_SITUATIONS=2]="SEXUAL_SITUATIONS",t[t.VIOLENCE=4]="VIOLENCE",t[t.DRUGS=8]="DRUGS"}(get||(get={}));var bet=class t{static dyi(i,e,s){const n=new Ng(i.rating_flags);return new t(e,s,i.duration,Boolean(i.audio_only),i.boundary_details,Boolean(i.error),i.tv_rating,i.max_slice,i.thumb_prefix,i.slice_dur,i.movie_rating,i.owner,i.meta,i.rates,i.thumbs,i.poster_url,i.default_poster_url,i.desc,n.ey(1),n.ey(2),n.ey(4),n.ey(8),i.external_id,Boolean(i.is_ad),i.asset)}get va(){return this.Xa||(this.Xa=function(t){return{startTime:t.MS,endTime:t.bS,duration:t.ct,audioOnly:t.fyi,boundaryDetails:t._yi,error:t.lt,tvRating:t.gyi,maxSlice:t.wyi,thumbPrefix:t.vyi,sliceDuration:t.myi,movieRating:t.pyi,ownerId:t.Ayi,metadata:t.kI,rates:t.yyi,thumbnailResolutions:t.Myi,posterUrl:t.byi,defaultPosterUrl:t.Tyi,description:t.xM,hasAdultLanguage:t.Syi,hasSexualSituations:t.Nyi,hasViolence:t.Iyi,hasDrugSituations:t.Dyi,externalId:t.Eyi,isAd:t.kyi,assetId:t.Lyi}}(this)),this.Xa}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d,f,_,g,w,v,m,p,A,y,M,b,T){this.MS=t,this.bS=i,this.ct=e,this.fyi=s,this._yi=n,this.lt=r,this.gyi=o,this.wyi=h,this.vyi=a,this.myi=u,this.pyi=c,this.Ayi=l,this.kI=d,this.yyi=f,this.Myi=_,this.byi=g,this.Tyi=w,this.xM=v,this.Syi=m,this.Nyi=p,this.Iyi=A,this.Dyi=y,this.Eyi=M,this.kyi=b,this.Lyi=T}};var Tet=Nu({duration:xe,offset:xe}),Net=Nu({c3:Tet}),Iet=Nu({c7:Tet}),Det=Nu({halftime:Tet}),Eet=wn(kT(_et)),ket=wn(kT(fet)),Let=Nu({width:fa(ST,xe),prefix:Zn,bw:xe,bh:xe,height:fa(ST,xe)}),xet=Nu({audio_only:xe,boundary_details:fa(ST,Eu(fa(Net,Iet,Det))),error:xe,tv_rating:Eet,max_slice:xe,thumb_prefix:Zn,slice_dur:xe,movie_rating:ket,owner:Zn,meta:NT,rates:Eu(xe),thumbs:Eu(Let),poster_url:Zn,duration:xe,default_poster_url:Zn,desc:Zn,rating_flags:xe,external_id:Zn,is_ad:xe,asset:Zn}),Cet=class{async Tbt(t,i,e,s){const n=function(t,i,e){if(Mit.uP(i))return[Oet(t,i,e)];if(Eu(Mit).uP(i))return i.map((i=>Oet(t,i,e)));if(bit.uP(i)){return(tr(i.externalId)?i.externalId:[i.externalId]).map((s=>Oet(t,"ext/"+i.userId+"/"+s,e)))}throw new b("Invalid asset id")}(t,i,s),r=n.map((t=>ev((()=>this.yAi(t)),e)));return(await Promise.all(r)).filter(Ks)}async yAi(t){const i=this.aE.uD({ZD:Cl.GET,zu:t,qD:Ft.ND}),e=await i,s=await e.ly();return xet.uP(s)||xet.lP(s,"AssetInfoResponse"),s}constructor(t){this.aE=t}};function Oet(t,i,e){return e?t+"/player/assetinfo/"+i+".json?pbs="+e:t+"/player/assetinfo/"+i+".json"}var $c,jet=class extends os{fa(){return new Ret(this.sd.va)}constructor(t){super("xyi"),this.sd=t}},Ret=class extends Os{constructor(t){super("removeasset"),this.asset=t}},Pet=class extends os{fa(){return new zet(this.sd.va)}constructor(t){super("Cyi"),this.sd=t}},zet=class extends Os{constructor(t){super("addasset"),this.asset=t}},Bet=class extends I3{nAi(t,i){let e,s=0;for(const n of t){e=s+n.duration;for(const t of i)s<=t.MS&&t.MS<e&&(e+=t.ct||0);this.nS(bet.dyi(n,s,e)),s=e}}eii(t){this.Co(new Pet(t))}oii(t){this.Co(new jet(t))}constructor(){super()}},Uet=class extends os{fa(){return new Qet(this.lD)}constructor(t){super("Oyi"),this.lD=t}},Qet=class extends Os{constructor(t){super("preplayresponse"),this.response=t}},Fet=class extends os{fa(){return new Yet(this.lD)}constructor(t){super("jyi"),this.lD=t}},Yet=class extends Os{constructor(t){super("assetinforesponse"),this.response=t}},Get=class extends B{pAi(t){t&&this.Co(new Uet(Ca(t)))}sAi(t){t.forEach((t=>this.Co(new Fet(t))))}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){let t;const i=this,e={get ads(){return i.Upi.va},get assets(){return i.Qpi.va},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}};return t=new jt(i,e),e}constructor(t,i,e){super(),this.Upi=t,this.Qpi=i,this.Gpi=e,e.yn("MAi",this.Ds),e.yn("bAi",this.Ds)}},Vet=class{Ryi(t,i){const e=new Tit(t.Hj),s=new xit(t.Hj),n=function(t){if(t.verizonMedia&&Ks(t.verizonMedia.defaultSkipOffset)){const i=t.verizonMedia.defaultSkipOffset;return he(i)?i:-1}return-1}(i),r=function(t){const i=t.verizonMedia?t.verizonMedia.onSeekOverAd:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(i)}(i),o=new Pit(s,t),h=new zit(e,i),a=new Met(t,o,n,r),u=new Cet(t.Hj),c=new Bet,l=new Get(a,c,o);return new lit(t,o,h,a,l,u,c)}};ec((function(t){return class extends t{Ypi(t){super.ga(t)}Vpi(t,i){return super.iet(t,i)}_Ai(t){super.F_(t)}W_(){var t;return null!=(t=this.Pyi.lt)?t:super.W_()}X_(){var t;return null!=(t=this.Pyi.H_)?t:super.X_()}F_(t,i){this.Pyi.F_(t)}ga(t){this.Pyi.ga(t)}iet(t,i){return this.Pyi.iet(t,i)}fa(){const t=this.Pyi.va;return ro(super.fa(),{get verizonMedia(){return t}})}gn(){this.Pyi.gn(),super.gn()}constructor(t,i){super(t,i),this.Pyi=(new Vet).Ryi(this,i)}}}),st._it),function(t){t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error"}($c||($c={}));var Wet=class extends ln{fa(){return a4(this)}get vKt(){return F.T$t}get MS(){return this.xS}get wXt(){return this.tZt}constructor(t,i,e,s){super(t,i),this.tZt=s,this.xS=e}},Het=class extends hr{get pPt(){return this.zyi}get vKt(){return F.T$t}constructor(t,i,e){if(super(i),this.j2t=t,this.R2t=t,e){const t=new Date(e);sT(t)&&(this.zyi=t)}}},Xet=class{Gw(){this.Qo.yn($.Sm,this.Vm),this.Qo.yn(Tf.Sh,this.dOt),this.Qo.yn(Tf.jh,this.wWt),this.Qo.yn(Tf.im,this.We),this.Qo.yn(Tf.Ov,this.Mh),this.Qo.yn(Tf.fm,this.od),this.Qo.yn(Tf._m,this.w1t),this.Qo.yn("presentationmodechange",this.Byi)}Fw(){this.Qo.fn($.Sm,this.Vm),this.Qo.fn(Tf.Sh,this.dOt),this.Qo.fn(Tf.jh,this.wWt),this.Qo.fn(Tf.im,this.We),this.Qo.fn(Tf.Ov,this.Mh),this.Qo.fn(Tf.fm,this.od),this.Qo.fn(Tf._m,this.w1t),this.Qo.fn("presentationmodechange",this.Byi)}get Uyi(){return this.Qyi}get Sit(){const t=this.Uyi;if(!t)return[];const i=[],e=this.Fyi();for(const s of t.Oc)e>=s.MS&&this.Emi<=s.MS+s.ct&&i.push(s);return i}Fyi(){return this.Qo.Q_()-this.Yyi}Gyi(){if(this.Vyi)return;if(this.Qo.Td()!==1/0)return void(0===this.Wyi.length&&(this.Vyi=this.Hyi()));const t=()=>{var t;null==(t=this.Xyi)||t.h_(),this.Xyi=void 0,this.Vyi=void 0};this.Xyi=new Bd,this.Vyi=this.Zyi(this.Xyi.f_).catch(this.M3).then(t,t)}async qyi(){const t=_.min(1e3*2**this.Kyi,3e4);try{var i;await Si(t,null==(i=this.Xyi)?void 0:i.f_),this.Kyi++}catch(t){if(be(t))return void(this.Kyi=0)}this.Gyi()}async Zyi(t){for(;Vr(t),!this.Qo.fg;){const i=ra.m_()-this.Jyi;if(i>1e4)await this.Hyi(t),this.Jyi=ra.m_(),this.Kyi=0;else{const e=1e4-i;await Si(e,t)}}}$yi(t){const i=t.pPt;if(i&&this.Qo.R_&&0===this.Yyi&&!this.tMi&&0!==_.floor(this.Qo.Dg().start(0))){const e=(this.Qo.R_.getTime()-i.getTime())/1e3,s=this.Qo.Q_()-t.cPt;this.Yyi=s-e}}async Hyi(t){try{const i=await this.Qo.Hj.uD({zu:this.iMi}),e=await i.SR(t);if(0===e.avails.length)return void(0!==this.Wyi.length&&(this.Wyi=[]));if(e.avails.length===this.Wyi.length&&e.avails[0].startTimeInSeconds===this.Wyi[0].cPt)return void this.$yi(this.Wyi[0]);const s=[];for(const t of e.avails){const i=new Het(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const e of t.ads){const t=new Wet(i,Hr.xqt,e.startTimeInSeconds,e.trackingEvents);t.W2t(e.adId,e.width,e.height,e.durationInSeconds,[],e.skipoffset),i.U2t(t)}s.push(i),this.$yi(i)}this.Wyi=td(s,((t,i)=>t.cPt-i.cPt))}catch(t){throw me(t),new g("Failed to poll MediaTailor tracking events")}}eMi(){var t;null==(t=this.Xyi)||t.g_(),this.Xyi=void 0,this.Vyi=void 0,this.Jyi=-1/0}sMi(){if(0===this.Wyi.length)return;const t=this.Wyi[this.Wyi.length-1],i=this.Fyi();if(t.cPt+t.$Jt<this.Emi){var e;this.Qyi&&(null==(e=this.Qo.Oc)||e.Co(new dc(this.Qyi)),this.Qyi=void 0)}else{for(const t of this.Wyi){const e=t.cPt;if(!(e+t.$Jt<this.Emi)&&(e<=i&&e+t.$Jt>this.Emi)){var s;if(this.Uyi===t)return;return this.Qyi=t,void(null==(s=this.Qo.Oc)||s.Co(new PP(this.Qyi)))}}var n;if(this.Qyi)null==(n=this.Qo.Oc)||n.Co(new dc(this.Qyi)),this.Qyi=void 0}}nMi(){const t=this.Sit;if(0===t.length)return;let i=[];for(const e of t){const t=e.wXt.filter((t=>Ai(this.rMi,t.eventType)));i=i.concat(t)}for(const t of i)this.oMi(t.startTimeInSeconds)&&(t.eventType===$c.COMPLETE&&this.hMi($c.ENGAGED_VIEW),this.aMi(t))}uMi(t,i){return i.wXt.filter((i=>Da(i.eventType,t)))[0]}hMi(t){const i=this.Sit;if(0===i.length)return;const e=this.uMi(t,i[0]);e&&this.aMi(e)}aMi(t){this.Tgi(t.eventType);for(const i of t.beaconUrls){const t={ZD:Cl.GET,zu:i,HD:"",qD:Ft.ND};0,$r(this.cMi(t))}}Tgi(t){let i;const e=this.Sit;switch(t){case $c.START:i=new Mh(e[e.length-1],this.Qo.Q_());break;case $c.COMPLETE:i=new Qc(e[0],this.Qo.Q_());break;case $c.FIRST_QUARTILE:i=new p4(e[0],this.Qo.Q_());break;case $c.MID_POINT:i=new y4(e[0],this.Qo.Q_());break;case $c.THIRD_QUARTILE:i=new b4(e[0],this.Qo.Q_())}var s;void 0!==i&&(null==(s=this.Qo.Oc)||s.Co(i))}async cMi(t){const i=await this.Qo.Hj.uD(t);i.fD}oMi(t){const i=this.Fyi();return t>=this.Emi&&t<i}gn(){this.Fw(),this.eMi(),this.Emi=-1}constructor(t,i,e){this.Jyi=-1/0,this.Qyi=void 0,this.Yyi=0,this.Wyi=[],this._mi=!1,this.jU=!1,this.Emi=-1,this.Xyi=void 0,this.Vyi=void 0,this.Kyi=0,this.Vm=()=>{this.Gyi()},this.wWt=()=>{this.hMi($c.RESUME)},this.dOt=()=>{this.eMi(),this.hMi($c.PAUSE)},this.We=()=>{this.eMi(),this.Emi=-1},this.Mh=()=>{this.eMi()},this.od=()=>{-1===this.Emi&&(this.Emi=this.Fyi()),this.sMi(),this.nMi(),this.Emi=this.Fyi()},this.w1t=()=>{if(this._mi!==this.Qo.og){this._mi=this.Qo.og;const t=this._mi?$c.MUTE:$c.UNMUTE;this.hMi(t)}},this.Byi=()=>{if(this.jU!==this.Qo.cs()){this.jU=this.Qo.cs();const t=this.jU?$c.FULL_SCREEN:$c.EXIT_FULL_SCREEN;this.hMi(t)}},this.M3=t=>{be(t)||(this.hMi($c.ERROR),$r(this.qyi()))},this.rMi=[$c.START,$c.FIRST_QUARTILE,$c.MID_POINT,$c.THIRD_QUARTILE,$c.COMPLETE,$c.IMPRESSION,$c.CREATIVE_VIEW],this.Qo=t,this.iMi=i,this.tMi=e,this.Gw()}};ec((function(t){return class extends t{ga(t){return this.lMi&&(this.lMi.gn(),this.lMi=void 0,this.hNt()),super.ga(t)}async iet(t,i){if(!t||!function(t){return t.sources.some((t=>t.integration===Js.MEDIATAILOR))}(t))return super.iet(t,i);try{const e=await this.dMi(t,i);await super.iet(e,i)}catch(t){this.rB(new ao(qa.MANIFEST_LOAD_ERROR,t.message,t))}}F_(t,i){var e;(null==(e=this.lMi)?void 0:e.Uyi)||super.F_(t,i)}W_(){var t;return null!=(t=this.vz)?t:super.W_()}X_(){var t;return null!=(t=this.mz)?t:super.X_()}rB(t){this.vz=ia(t),this.mz=t,this.Co(new as(t))}hNt(){this.vz=void 0,this.mz=void 0}async dMi(t,i){let e=[];for(const s of t.sources){if(!Vw(s)){e.push(s);continue}const t=s;if(!t.src){e.push(s);continue}const n=await this.fMi(t,i);Vr(i);const r=ol({},t,{integration:void 0,src:n});e.push(r)}const s=Ca(t);return s.sources=e,s}async fMi(t,i){const e=t.src||"",s=e.match(/.+?(?=\/v1\/)/);if(!s)throw new g("Could not find MediaTailor session initialization url");const n=s[0],r=$i(e,"?ads."),o=r?{zu:e,qD:Ft.ND}:{zu:e,ZD:Cl.POST,HD:JSON.stringify({adParams:t.adParams}),qD:Ft.ND},h=await ev((()=>this._Mi(o,i)),i);let a;try{if(a=n+h.manifestUrl,!r){const t=n+h.trackingUrl,i=Bw(a);this.lMi=new Xet(this,t,i)}}catch(t){throw new g("Something went wrong parsing the MediaTailor session initialization response")}return a}async _Mi(t,i){try{const e=await this.Hj.uD(t);return await e.SR(i)}catch(t){throw me(t),new g("Failed to initialize MediaTailor session manifest")}}gn(){this.lMi&&(this.lMi.gn(),this.lMi=void 0),this.hNt(),super.gn()}constructor(t,i){super(t,i),this.lMi=void 0,this.vz=void 0,this.mz=void 0}}}),st.vit);export{ra as a,Po as b,Ks as c,tr as d,Vu as e,Sn as f,hu as g,Qh as h,GB as i,wi as j,nb as k,hb as l,ab as m,ub as n,cb as o,_b as p,wb as q,vb as r,ZB as s,qB as t,ol as u,$i as v,qf as w,td as x,ws as y,wd as z,bo as A,jn as B,Ai as C,To as D,Mo as E,Os as F,qa as G,kt as H,Tf as I,rf as J,ro as K,of as L,hf as M,Ia as N,ji as O,_v as P,Ls as Q,Zh as R,yi as S,Qe as T,vp as U,yp as V,qo as W,Ib as X,st as Y,ec as Z,MP as _,Ww as $,R as aa,Te as ba,ov as ca,Ri as da,Vi as ea,RS as fa,zS as ga,PS as ha,BS as ia,QS as ja,si as ka,cN as la,Pc as ma,Bh as na,AI as oa,NI as pa,kI as qa,LI as ra,ir as sa,CI as ta,tn as ua,Sj as va,Cj as wa,Oj as xa,Rj as ya,Pj as za,zj as Aa,cR as Ba,lR as Ca,dR as Da,fR as Ea,gR as Fa,fP as Ga,_P as Ha,SP as Ia,VP as Ja,WP as Ka,HP as La,XP as Ma,qU as Na,KU as Oa,JU as Pa,$U as Qa,_Y as Ra,gY as Sa,F as Ta,L2 as Ua,Q2 as Va,i4 as Wa,vs as Xa,Y8 as Ya,O7 as Za,B7 as _a,Uit as $a};