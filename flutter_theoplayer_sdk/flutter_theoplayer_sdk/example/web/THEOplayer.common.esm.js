/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 8.14.0
 Created: 2025-03-26T14:31:55.252Z
 */
var Bo,It,f,Dl,Pt,Ll,Ol,Rl,rn,Ys,zl,Ul,Ql,Fl,Yl,Vl,Gl,Wl,Zl,Hl,Xl,Ro,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,ql=a.location,Kl=a.navigator,u=a.setTimeout,c=a.clearTimeout,v=a.setInterval,m=a.clearInterval,b=a.Error,k=a.TypeError,_=(a.SyntaxError,a.Object),x=a.Math,C=a.parseInt,S=a.parseFloat,j=a.isNaN,T=a.Uint8Array,Jl=a.Worker,$l=(a.WorkerGlobalScope,a.XMLHttpRequest),td=_.create,id=_.defineProperty,ed=_.getOwnPropertyDescriptor,sd=_.getOwnPropertyNames,nd=_.getPrototypeOf,rd=_.prototype.hasOwnProperty,od=(t,i)=>()=>(t&&(i=t(t=0)),i),Ui=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),hd=(t,i)=>{for(var e in i)id(t,e,{get:i[e],enumerable:!0})},ad=(t,i,e,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let n of sd(i))rd.call(t,n)||n===e||id(t,n,{get:()=>i[n],enumerable:!(s=ed(i,n))||s.enumerable});return t},ud=(t,i,e)=>(e=null!=t?td(nd(t)):{},ad(!i&&t&&t.__esModule?e:id(e,"default",{value:t,enumerable:!0}),t)),cd=t=>ad(id({},"__esModule",{value:!0}),t),r=od((()=>{"use strict";if("function"==typeof Symbol&&Symbol.iterator)Bo=Symbol,It=null!=(Ll=Symbol.for)?Ll:Symbol,f=Symbol.iterator,Dl=null!=(Ol=Symbol.dispose)?Ol:It("Symbol.dispose"),Pt=null!=(Rl=Symbol.asyncDispose)?Rl:It("Symbol.asyncDispose");else{let t=0;Bo=function(i){return"ul"+i+"_"+ ++t},f=(It=function(t){return"ul"+t})("Symbol.iterator"),Dl=It("Symbol.dispose"),Pt=It("Symbol.asyncDispose"),Bo.for=It,Bo.iterator=f,Bo.dispose=Dl,Bo.asyncDispose=Pt}})),ld=od((()=>{"use strict";var t;r(),(t={}).hd="web",t.Md="android",t.Td="android-tv",t.Nd="ios",t.Id="tvos",t.Dd="chromecast",t.Ed="theoliveweb",rn=t})),dd={};hd(dd,{browserDetection:()=>Ro});var Fe,Uc=od((()=>{"use strict";r(),ld(),Ys=Kl?Kl.userAgent:"",zl=Ys.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Ul=Ys.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Ql=Ys.match(/Android ([0-9\.]+)/i),Fl=Ys.match(/Windows NT ([0-9\.]+)/i),Yl=Ys.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),Vl=Ys.match(/Firefox\/([0-9\.]+)/i),Gl=Ys.match(/OPR\/(\d+\.\d+)/i),Wl=Ys.match(/Tizen ([0-9\.]+)/i),Zl=Ys.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),Hl=Ys.match(/HbbTV\/([0-9.]+)/i),(Xl=class{get Je(){return this.jd}get Od(){return this.Rd}get Pd(){return this.zd}get Bd(){return this.Ud}get Qd(){return this.Fd}get Yd(){return this.Vd}get Gd(){return this.Wd}get Zd(){return this.Hd}get Xd(){return this.qd}get Kd(){return this.Jd}get $d(){return this.tf}get Ka(){return this.ef}get nf(){return this.rf}get hf(){return this.uf||this.cf}get nd(){return this.lf}get Qs(){return this.df}get gf(){return this._f}get vf(){return this.wf}get mf(){var t;return null!=(t=this.pf)?t:this.Af}get yf(){return this.bf}get Mf(){var t;return(null==(t=s.chrome)?void 0:t.webview)&&this.Tf>0}get Sf(){return this.Tf}get Nf(){return this.If}get Df(){return this.Ef}get kf(){return this.Lf}get xf(){return this.Cf}get jf(){return this.Of}get Rf(){return this.Pf}get zf(){return this.Bf}get Uf(){return this.Qf}get Ff(){return this.Yf}get Vf(){return this.Gf}get Wf(){return this.Zf}get Hf(){return this.Xf}get qf(){return this.Kf}get Jf(){return this.$f}get eg(){return this.rg}get og(){return this.hg}get ag(){return this.cg}get dg(){return this.fg}get gg(){return!(!this.kf&&!this.Nf)&&this.mf<=56}get _g(){return this.vg}get wg(){return this.pg}get Ag(){return this.yg}get Mg(){return this.Tg}get Sg(){return this.Ng}get Ig(){return this.Dg}get Eg(){return this.Lg}get xg(){return this.Cg}get IS_IOS_CHROME(){return this.jg}constructor(){var t;this.jd=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||Kl&&Kl.msMaxTouchPoints),this.Rd=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(Ys)||/(macintosh|mac(?=_powerpc)\s)/i.test(Ys),this.zd=/Windows NT/i.test(Ys),this.Ud=Fl?S(Fl[1]):0,this.Fd=/Android/i.test(Ys),this.Vd=Ql?S(Ql[1]):0,this.Wd=/windows phone (8|8\.1)/i.test(Ys),this.Hd=/iPhone/i.test(Ys),this.qd=/iPad/i.test(Ys),this.Jd=this.Rd&&this.jd&&!this.qd,this.tf=/iPod/i.test(Ys),this.lf=/Mobile Safari/i.test(Ys),this.uf=/EOS\d*STB/i.test(Ys),this.cf=/APP\d*STB/i.test(Ys),this.ef=(this.Hd||this.qd||this.Jd||this.tf)&&!this.Wd,this.rf=Zl?S(Zl[2]):0,this.df=this.Wd||this.ef||this.Fd||this.lf,this._f=/CriOS/i.test(Ys),this.wf=Boolean(self.chrome&&/google/i.test(Kl.vendor))||this._f,this.bf=this.wf&&/Edg\//i.test(Kl.userAgent),this.Tf=Ul?C(Ul[1],10):0,this.jg=Boolean(/CriOS/i.test(Ys)),this.Cg=Boolean(self.chrome||/Chrome/i.test(Ys)||this.jg),this.Af=zl?C(zl[1],10):0,this.If=/SMART-TV.*Tizen/i.test(Ys),this.Ef=Wl?S(Wl[1]):0,this.pf=this.Ef>0?(t=this.Ef)>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0:void 0,this.Lf=/webos|web0s/i.test(Ys),this.Cf=/HbbTV/i.test(Ys),this.Of=!!Hl&&function(t){if(!t)return!1;let i=t.split(".").map(Number);return 3===i.length&&1===i[0]&&2===i[1]}(Hl[1]),this.Pf=/VIZIO/i.test(Ys),this.Bf=/Edge\/\d+/i.test(Ys),this.Qf=/Trident/i.test(Ys),this.Yf=this.Qf&&!self.ActiveXObject&&"ActiveXObject"in self,this.Gf=/Vivaldi/i.test(Ys),this.Zf=/Firefox/i.test(Ys)&&!/Seamonkey/i.test(Ys),this.Xf=Vl?S(Vl[1]):0,this.Kf=/Safari/i.test(Ys)&&!/Chrome/i.test(Ys)&&!this.Wd&&!this.If,this.$f=Yl?S(Yl[2]):0,this.rg=Boolean(Gl),this.hg=Gl?S(Gl[1]):0,this.cg=/CrKey/.test(Ys),this.fg=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(Ys),this.vg=/PlayStation 4/i.test(Ys),this.pg="web"===rn.Td,this.yg="web"===rn.Md,this.Tg=this.yg||this.pg,this.Ng="web"===rn.Nd,this.Dg="web"===rn.Id,this.Lg="web"===rn.Dd}}).Ld=new Xl,Ro=Xl.Ld}));var Bn,fd,Qi=od((()=>{"use strict";r()})),gd={};function no(t,i){let e=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=Fe.Og();o-e>=i&&(t.apply(this,n),e=o)}}function ze(t,i){let e=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=this;0!==e&&Fe.Rg(e),e=Fe.Pg((()=>{e=0,t.apply(o,n)}),i)}}function di(t){let i;return()=>(void 0!==t&&(i=t(),t=void 0),i)}hd(gd,{debounce:()=>ze,identity:()=>fd,lazyConstant:()=>di,noOp:()=>Bn,throttle:()=>no});var bs=od((()=>{"use strict";r(),Qi(),Bn=()=>{},fd=t=>t})),_d=Ui(((t,i)=>{var e,s;r(),e=t,s=function(t){"use strict";var i="function"==typeof Bo&&"symbol"==typeof f?Bo:function(t){return"Symbol("+t+")"};function e(){}var s=Number.isNaN||function(t){return t!=t},n=e;function r(t){return"object"==typeof t&&null!==t||"function"==typeof t}function o(t){return t.slice()}function h(t,i,e,s,n){new T(t).set(new T(e,s,n),i)}function a(t){return!1!==function(t){return"number"==typeof t&&(!s(t)&&!(t<0))}(t)&&t!==1/0}function u(t,i,e){if("function"!=typeof t)throw new k("Argument is not a function");return Function.prototype.apply.call(t,i,e)}function c(t,i,e,s){var n=t[i];if(void 0!==n){if("function"!=typeof n)throw new k(n+" is not a method");switch(e){case 0:return function(){return d(n,t,s)};case 1:return function(i){var e=[i].concat(s);return d(n,t,e)}}}return function(){return M(void 0)}}function l(t,i,e){var s=t[i];if(void 0!==s)return u(s,t,e)}function d(t,i,e){try{return M(u(t,i,e))}catch(t){return S(t)}}function g(t){if(t=Number(t),s(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function v(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new k("size property of a queuing strategy must be a function");return function(i){return t(i)}}var w=Promise,m=Promise.prototype.then,p=Promise.resolve.bind(w),A=Promise.reject.bind(w);function y(t){return new w(t)}function M(t){return p(t)}function S(t){return A(t)}function N(t,i,e){return m.call(t,i,e)}function I(t,i,e){N(N(t,i,e),void 0,n)}function D(t,i){I(t,i)}function E(t,i){I(t,void 0,i)}function L(t,i,e){return N(t,i,e)}function C(t){N(t,void 0,n)}var j=function(){function t(){this.zg=0,this.Bg=0,this.Ug={Qg:[],Fg:void 0},this.Yg=this.Ug,this.zg=0,this.Bg=0}return _.defineProperty(t.prototype,"length",{get:function(){return this.Bg},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var i=this.Yg,e=i;16383===i.Qg.length&&(e={Qg:[],Fg:void 0}),i.Qg.push(t),e!==i&&(this.Yg=e,i.Fg=e),++this.Bg},t.prototype.shift=function(){var t=this.Ug,i=t,e=this.zg,s=e+1,n=t.Qg,r=n[e];return 16384===s&&(i=t.Fg,s=0),--this.Bg,this.zg=s,t!==i&&(this.Ug=i),n[e]=void 0,r},t.prototype.forEach=function(t){for(var i=this.zg,e=this.Ug,s=e.Qg;!(i===s.length&&void 0===e.Fg||i===s.length&&(i=0,0===(s=(e=e.Fg).Qg).length));)t(s[i]),++i},t.prototype.peek=function(){var t=this.Ug,i=this.zg;return t.Qg[i]},t}();function O(t,i,e){var s=null;!0===e&&(s=_.prototype);var n=_.create(s);return n.value=t,n.done=i,n}function R(t,i){t.Vg=!0,t.Gg=i,i.Wg=t,"readable"===i.Ea?U(t):"closed"===i.Ea?function(t){U(t),Y(t)}(t):Q(t,i.Zg)}function P(t,i){return Zi(t.Gg,i)}function z(t){"readable"===t.Gg.Ea?F(t,new k("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,i){Q(t,i)}(t,new k("Reader was released and can no longer be used to monitor the stream's closedness")),t.Gg.Wg=void 0,t.Gg=void 0}function B(t){return new k("Cannot "+t+" a stream using a released reader")}function U(t){t.Hg=y((function(i,e){t.Xg=i,t.qg=e}))}function Q(t,i){U(t),F(t,i)}function F(t,i){C(t.Hg),t.qg(i),t.Xg=void 0,t.qg=void 0}function Y(t){t.Xg(void 0),t.Xg=void 0,t.qg=void 0}var V=i("[[CancelSteps]]"),G=i("[[PullSteps]]");function W(t,i){void 0===i&&(i=!1);var e=new $(t);return e.Vg=i,e}function Z(t){return y((function(i,e){var s={Kg:i,Jg:e};t.Wg.$g.push(s)}))}function H(t,i,e){var s=t.Wg;s.$g.shift().Kg(O(i,e,s.Vg))}function X(t){return t.Wg.$g.length}function q(t){var i=t.Wg;return void 0!==i&&!!tt(i)}var K,J,$=function(){function t(t){if(!1===Gi(t))throw new k("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===Wi(t))throw new k("This stream has already been locked for exclusive reading by another reader");R(this,t),this.$g=new j}return _.defineProperty(t.prototype,"closed",{get:function(){return tt(this)?this.Hg:S(et("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return tt(this)?void 0===this.Gg?S(B("cancel")):P(this,t):S(et("cancel"))},t.prototype.read=function(){return tt(this)?void 0===this.Gg?S(B("read from")):it(this):S(et("read"))},t.prototype.releaseLock=function(){if(!tt(this))throw et("releaseLock");if(void 0!==this.Gg){if(this.$g.length>0)throw new k("Tried to release a reader lock when that reader has pending read() calls un-settled");z(this)}},t}();function tt(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"$g")}function it(t){var i=t.Gg;return i.t_=!0,"closed"===i.Ea?M(O(void 0,!0,t.Vg)):"errored"===i.Ea?S(i.Zg):i.i_[G]()}function et(t){return new k("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof i.asyncIterator&&((K={})[i.asyncIterator]=function(){return this},J=K,_.defineProperty(J,i.asyncIterator,{enumerable:!1}));var st={next:function(){if(!1===nt(this))return S(rt("next"));var t=this.e_;return void 0===t.Gg?S(B("iterate")):L(it(t),(function(i){var e=i.done;return e&&z(t),O(i.value,e,!0)}))},return:function(t){if(!1===nt(this))return S(rt("next"));var i=this.e_;if(void 0===i.Gg)return S(B("finish iterating"));if(i.$g.length>0)return S(new k("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.s_){var e=P(i,t);return z(i),L(e,(function(){return O(t,!0,!0)}))}return z(i),M(O(t,!0,!0))}};function nt(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"e_")}function rt(t){return new k("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function ot(t){var i=t.n_.shift();return t.r_-=i.size,t.r_<0&&(t.r_=0),i.value}function ht(t,i,e){if(!a(e=Number(e)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.n_.push({value:i,size:e}),t.r_+=e}function at(t){t.n_=new j,t.r_=0}void 0!==J&&_.setPrototypeOf(st,J),_.defineProperty(st,"next",{enumerable:!1}),_.defineProperty(st,"return",{enumerable:!1});var ut=i("[[AbortSteps]]"),ct=i("[[ErrorSteps]]"),lt=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),ft(this);var e=i.size,s=i.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=v(e);void 0===s&&(s=1),function(t,i,e,s){var n=_.create(Lt.prototype);function r(){return l(i,"start",[n])}var o=c(i,"write",1,[n]),h=c(i,"close",0,[]),a=c(i,"abort",1,[]);xt(t,n,r,o,h,a,e,s)}(this,t,s=g(s),n)}return _.defineProperty(t.prototype,"locked",{get:function(){if(!1===gt(this))throw Bt("locked");return _t(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===gt(this)?S(Bt("abort")):!0===_t(this)?S(new k("Cannot abort a stream that already has a writer")):vt(this,t)},t.prototype.close=function(){return!1===gt(this)?S(Bt("close")):!0===_t(this)?S(new k("Cannot close a stream that already has a writer")):!0===yt(this)?S(new k("Cannot close an already-closing stream")):wt(this)},t.prototype.getWriter=function(){if(!1===gt(this))throw Bt("getWriter");return dt(this)},t}();function dt(t){return new Tt(t)}function ft(t){t.Ea="writable",t.Zg=void 0,t.o_=void 0,t.h_=void 0,t.a_=new j,t.u_=void 0,t.c_=void 0,t.l_=void 0,t.d_=void 0,t.f_=!1}function gt(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"h_")}function _t(t){return void 0!==t.o_}function vt(t,i){var e=t.Ea;if("closed"===e||"errored"===e)return M(void 0);if(void 0!==t.d_)return t.d_.g_;var s=!1;"erroring"===e&&(s=!0,i=void 0);var n=y((function(e,n){t.d_={g_:void 0,Kg:e,Jg:n,__:i,v_:s}}));return t.d_.g_=n,!1===s&&pt(t,i),n}function wt(t){var i=t.Ea;if("closed"===i||"errored"===i)return S(new k("The stream (in "+i+" state) is not in the writable state and cannot be closed"));var e=y((function(i,e){var s={Kg:i,Jg:e};t.c_=s})),s=t.o_;return void 0!==s&&!0===t.f_&&"writable"===i&&qt(s),function(t){ht(t,"close",0),Ot(t)}(t.h_),e}function mt(t,i){"writable"!==t.Ea?At(t):pt(t,i)}function pt(t,i){var e=t.h_;t.Ea="erroring",t.Zg=i;var s=t.o_;void 0!==s&&Dt(s,i),!1===function(t){return void 0!==t.u_||void 0!==t.l_}(t)&&!0===e.w_&&At(t)}function At(t){t.Ea="errored",t.h_[ct]();var i=t.Zg;if(t.a_.forEach((function(t){t.Jg(i)})),t.a_=new j,void 0!==t.d_){var e=t.d_;if(t.d_=void 0,!0===e.v_)return e.Jg(i),void bt(t);I(t.h_[ut](e.__),(function(){e.Kg(),bt(t)}),(function(i){e.Jg(i),bt(t)}))}else bt(t)}function yt(t){return void 0!==t.c_||void 0!==t.l_}function bt(t){void 0!==t.c_&&(t.c_.Jg(t.Zg),t.c_=void 0);var i=t.o_;void 0!==i&&Vt(i,t.Zg)}function Mt(t,i){var e=t.o_;void 0!==e&&i!==t.f_&&(!0===i?function(t){Wt(t)}(e):qt(e)),t.f_=i}var Tt=function(){function t(t){if(!1===gt(t))throw new k("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===_t(t))throw new k("This stream has already been locked for exclusive writing by another writer");this.m_=t,t.o_=this;var i=t.Ea;if("writable"===i)!1===yt(t)&&!0===t.f_?Wt(this):Ht(this),Ft(this);else if("erroring"===i)Zt(this,t.Zg),Ft(this);else if("closed"===i)Ht(this),function(t){Ft(t),Gt(t)}(this);else{var e=t.Zg;Zt(this,e),Yt(this,e)}}return _.defineProperty(t.prototype,"closed",{get:function(){return!1===St(this)?S(Ut("closed")):this.Hg},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===St(this))throw Ut("desiredSize");if(void 0===this.m_)throw Qt("desiredSize");return function(t){var i=t.m_,e=i.Ea;return"errored"===e||"erroring"===e?null:"closed"===e?0:jt(i.h_)}(this)},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"ready",{get:function(){return!1===St(this)?S(Ut("ready")):this.p_},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===St(this)?S(Ut("abort")):void 0===this.m_?S(Qt("abort")):function(t,i){var e=t.m_;return vt(e,i)}(this,t)},t.prototype.close=function(){if(!1===St(this))return S(Ut("close"));var t=this.m_;return void 0===t?S(Qt("close")):!0===yt(t)?S(new k("Cannot close an already-closing stream")):Nt(this)},t.prototype.releaseLock=function(){if(!1===St(this))throw Ut("releaseLock");void 0!==this.m_&&Et(this)},t.prototype.write=function(t){return!1===St(this)?S(Ut("write")):void 0===this.m_?S(Qt("write to")):kt(this,t)},t}();function St(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"m_")}function Nt(t){return wt(t.m_)}function It(t,i){"pending"===t.A_?Vt(t,i):function(t,i){Yt(t,i)}(t,i)}function Dt(t,i){"pending"===t.y_?Xt(t,i):function(t,i){Zt(t,i)}(t,i)}function Et(t){var i=t.m_,e=new k("Writer was released and can no longer be used to monitor the stream's closedness");Dt(t,e),It(t,e),i.o_=void 0,t.m_=void 0}function kt(t,i){var e=t.m_,s=e.h_,n=function(t,i){try{return t.b_(i)}catch(i){return Rt(t,i),1}}(s,i);if(e!==t.m_)return S(Qt("write to"));var r=e.Ea;if("errored"===r)return S(e.Zg);if(!0===yt(e)||"closed"===r)return S(new k("The stream is closing or closed and cannot be written to"));if("erroring"===r)return S(e.Zg);var o=function(t){return y((function(i,e){var s={Kg:i,Jg:e};t.a_.push(s)}))}(e);return function(t,i,e){var s={chunk:i};try{ht(t,s,e)}catch(i){return void Rt(t,i)}var n=t.M_;!1===yt(n)&&"writable"===n.Ea&&Mt(n,Pt(t)),Ot(t)}(s,i,n),o}var Lt=function(){function t(){throw new k("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"M_")}(this))throw new k("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.M_.Ea&&zt(this,t)},t.prototype[ut]=function(t){var i=this.T_(t);return Ct(this),i},t.prototype[ct]=function(){at(this)},t}();function xt(t,i,e,s,n,r,o,h){i.M_=t,t.h_=i,i.n_=void 0,i.r_=void 0,at(i),i.w_=!1,i.b_=h,i.S_=o,i.N_=s,i.I_=n,i.T_=r;var a=Pt(i);Mt(t,a),I(M(e()),(function(){i.w_=!0,Ot(i)}),(function(e){i.w_=!0,mt(t,e)}))}function Ct(t){t.N_=void 0,t.I_=void 0,t.T_=void 0,t.b_=void 0}function jt(t){return t.S_-t.r_}function Ot(t){var i=t.M_;if(!1!==t.w_&&void 0===i.u_)if("erroring"!==i.Ea){if(0!==t.n_.length){var e=function(t){return t.n_.peek().value}(t);"close"===e?function(t){var i=t.M_;(function(t){t.l_=t.c_,t.c_=void 0})(i),ot(t);var e=t.I_();Ct(t),I(e,(function(){!function(t){t.l_.Kg(void 0),t.l_=void 0,"erroring"===t.Ea&&(t.Zg=void 0,void 0!==t.d_&&(t.d_.Kg(),t.d_=void 0)),t.Ea="closed";var i=t.o_;void 0!==i&&Gt(i)}(i)}),(function(t){!function(t,i){t.l_.Jg(i),t.l_=void 0,void 0!==t.d_&&(t.d_.Jg(i),t.d_=void 0),mt(t,i)}(i,t)}))}(t):function(t,i){var e=t.M_;!function(t){t.u_=t.a_.shift()}(e);var s=t.N_(i);I(s,(function(){!function(t){t.u_.Kg(void 0),t.u_=void 0}(e);var i=e.Ea;if(ot(t),!1===yt(e)&&"writable"===i){var s=Pt(t);Mt(e,s)}Ot(t)}),(function(i){"writable"===e.Ea&&Ct(t),function(t,i){t.u_.Jg(i),t.u_=void 0,mt(t,i)}(e,i)}))}(t,e.chunk)}}else At(i)}function Rt(t,i){"writable"===t.M_.Ea&&zt(t,i)}function Pt(t){return jt(t)<=0}function zt(t,i){var e=t.M_;Ct(t),pt(e,i)}function Bt(t){return new k("WritableStream.prototype."+t+" can only be used on a WritableStream")}function Ut(t){return new k("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function Qt(t){return new k("Cannot "+t+" a stream using a released writer")}function Ft(t){t.Hg=y((function(i,e){t.Xg=i,t.qg=e,t.A_="pending"}))}function Yt(t,i){Ft(t),Vt(t,i)}function Vt(t,i){C(t.Hg),t.qg(i),t.Xg=void 0,t.qg=void 0,t.A_="rejected"}function Gt(t){t.Xg(void 0),t.Xg=void 0,t.qg=void 0,t.A_="resolved"}function Wt(t){t.p_=y((function(i,e){t.D_=i,t.E_=e})),t.y_="pending"}function Zt(t,i){Wt(t),Xt(t,i)}function Ht(t){Wt(t),qt(t)}function Xt(t,i){C(t.p_),t.E_(i),t.D_=void 0,t.E_=void 0,t.y_="rejected"}function qt(t){t.D_(void 0),t.D_=void 0,t.E_=void 0,t.y_="fulfilled"}function Kt(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var Jt,$t="undefined"!=typeof DOMException?DOMException:void 0,ti=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}($t)?$t:((Jt=function(t,i){this.message=t||"",this.name=i||"Error",b.captureStackTrace&&b.captureStackTrace(this,this.constructor)}).prototype=_.create(b.prototype),_.defineProperty(Jt.prototype,"constructor",{value:Jt,writable:!0,configurable:!0}),Jt);function ii(t,i,s,n,r,o){var h=W(t),a=dt(i);t.t_=!0;var u=!1,c=M(void 0);return y((function(l,d){var f,g,_,v;if(void 0!==o){if(f=function(){var e=new ti("Aborted","AbortError"),s=[];!1===n&&s.push((function(){return"writable"===i.Ea?vt(i,e):M(void 0)})),!1===r&&s.push((function(){return"readable"===t.Ea?Zi(t,e):M(void 0)})),A((function(){return Promise.all(s.map((function(t){return t()})))}),!0,e)},!0===o.aborted)return void f();o.addEventListener("abort",f)}if(p(t,h.Hg,(function(t){!1===n?A((function(){return vt(i,t)}),!0,t):b(!0,t)})),p(i,a.Hg,(function(i){!1===r?A((function(){return Zi(t,i)}),!0,i):b(!0,i)})),g=t,_=h.Hg,v=function(){!1===s?A((function(){return function(t){var i=t.m_,e=i.Ea;return!0===yt(i)||"closed"===e?M(void 0):"errored"===e?S(i.Zg):Nt(t)}(a)})):b()},"closed"===g.Ea?v():D(_,v),!0===yt(i)||"closed"===i.Ea){var w=new k("the destination writable stream closed before all data could be piped to it");!1===r?A((function(){return Zi(t,w)}),!0,w):b(!0,w)}function m(){var t=c;return N(c,(function(){return t!==c?m():void 0}))}function p(t,i,e){"errored"===t.Ea?e(t.Zg):E(i,e)}function A(t,e,s){function n(){I(t(),(function(){return T(e,s)}),(function(t){return T(!0,t)}))}!0!==u&&(u=!0,"writable"===i.Ea&&!1===yt(i)?D(m(),n):n())}function b(t,e){!0!==u&&(u=!0,"writable"===i.Ea&&!1===yt(i)?D(m(),(function(){return T(t,e)})):T(t,e))}function T(t,i){Et(a),z(h),void 0!==o&&o.removeEventListener("abort",f),t?d(i):l(void 0)}C(y((function(t,i){!function s(n){n?t():N(!0===u?M(!0):N(a.p_,(function(){return N(it(h),(function(t){return!0===t.done||(c=N(kt(a,t.value),void 0,e),!1)}))})),s,i)}(!1)})))}))}var ei=function(){function t(){throw new k}return _.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===si(this))throw fi("desiredSize");return ci(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===si(this))throw fi("close");if(!1===li(this))throw new k("The stream is not in a state that permits close");hi(this)},t.prototype.enqueue=function(t){if(!1===si(this))throw fi("enqueue");if(!1===li(this))throw new k("The stream is not in a state that permits enqueue");return ai(this,t)},t.prototype.error=function(t){if(!1===si(this))throw fi("error");ui(this,t)},t.prototype[V]=function(t){at(this);var i=this.k_(t);return oi(this),i},t.prototype[G]=function(){var t=this.L_;if(this.n_.length>0){var i=ot(this);return!0===this.x_&&0===this.n_.length?(oi(this),Hi(t)):ni(this),M(O(i,!1,t.Wg.Vg))}var e=Z(t);return ni(this),e},t}();function si(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"L_")}function ni(t){!1!==ri(t)&&(!0!==t.C_?(t.C_=!0,I(t.j_(),(function(){t.C_=!1,!0===t.O_&&(t.O_=!1,ni(t))}),(function(i){ui(t,i)}))):t.O_=!0)}function ri(t){var i=t.L_;return!1!==li(t)&&!1!==t.w_&&(!0===Wi(i)&&X(i)>0||ci(t)>0)}function oi(t){t.j_=void 0,t.k_=void 0,t.b_=void 0}function hi(t){var i=t.L_;t.x_=!0,0===t.n_.length&&(oi(t),Hi(i))}function ai(t,i){var e=t.L_;if(!0===Wi(e)&&X(e)>0)H(e,i,!1);else{var s=void 0;try{s=t.b_(i)}catch(i){throw ui(t,i),i}try{ht(t,i,s)}catch(i){throw ui(t,i),i}}ni(t)}function ui(t,i){var e=t.L_;"readable"===e.Ea&&(at(t),oi(t),Xi(e,i))}function ci(t){var i=t.L_.Ea;return"errored"===i?null:"closed"===i?0:t.S_-t.r_}function li(t){var i=t.L_.Ea;return!1===t.x_&&"readable"===i}function di(t,i,e,s,n,r,o){i.L_=t,i.n_=void 0,i.r_=void 0,at(i),i.w_=!1,i.x_=!1,i.O_=!1,i.C_=!1,i.b_=o,i.S_=r,i.j_=s,i.k_=n,t.i_=i,I(M(e()),(function(){i.w_=!0,ni(i)}),(function(t){ui(i,t)}))}function fi(t){return new k("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var gi=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&x.floor(t)===t},_i=function(){function t(){throw new k("ReadableStreamBYOBRequest cannot be used directly")}return _.defineProperty(t.prototype,"view",{get:function(){if(!1===mi(this))throw ji("view");return this.R_},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===mi(this))throw ji("respond");if(void 0===this.P_)throw new k("This BYOB request has been invalidated");this.R_.buffer,function(t,i){if(!1===a(i=Number(i)))throw new RangeError("bytesWritten must be a finite");Di(t,i)}(this.P_,t)},t.prototype.respondWithNewView=function(t){if(!1===mi(this))throw ji("respond");if(void 0===this.P_)throw new k("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new k("You can only respond with array buffer views");t.buffer,function(t,i){var e=t.z_.peek();if(e.byteOffset+e.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(e.byteLength!==i.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");e.buffer=i.buffer,Di(t,i.byteLength)}(this.P_,t)},t}(),vi=function(){function t(){throw new k("ReadableByteStreamController constructor cannot be used directly")}return _.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===wi(this))throw Oi("byobRequest");if(void 0===this.B_&&this.z_.length>0){var t=this.z_.peek(),i=new T(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),e=_.create(_i.prototype);!function(t,i,e){t.P_=i,t.R_=e}(e,this,i),this.B_=e}return this.B_},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===wi(this))throw Oi("desiredSize");return xi(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===wi(this))throw Oi("close");if(!0===this.x_)throw new k("The stream has already been closed; do not close it again!");var t=this.U_.Ea;if("readable"!==t)throw new k("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var i=t.U_;if(t.r_>0)t.x_=!0;else{if(t.z_.length>0&&t.z_.peek().bytesFilled>0){var e=new k("Insufficient bytes to fill elements in the given buffer");throw Li(t,e),e}ki(t),Hi(i)}}(this)},t.prototype.enqueue=function(t){if(!1===wi(this))throw Oi("enqueue");if(!0===this.x_)throw new k("stream is closed or draining");var i=this.U_.Ea;if("readable"!==i)throw new k("The stream (in "+i+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new k("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,i){var e=t.U_,s=i.buffer,n=i.byteOffset,r=i.byteLength,o=s;!0===q(e)?0===X(e)?bi(t,o,n,r):H(e,new T(o,n,r),!1):!0===zi(e)?(bi(t,o,n,r),Ii(t)):bi(t,o,n,r),pi(t)}(this,t)},t.prototype.error=function(t){if(!1===wi(this))throw Oi("error");Li(this,t)},t.prototype[V]=function(t){this.z_.length>0&&(this.z_.peek().bytesFilled=0),at(this);var i=this.k_(t);return ki(this),i},t.prototype[G]=function(){var t=this.U_;if(this.r_>0){var i=this.n_.shift();this.r_-=i.byteLength,Si(this);var e=void 0;try{e=new T(i.buffer,i.byteOffset,i.byteLength)}catch(t){return S(t)}return M(O(e,!1,t.Wg.Vg))}var s=this.Q_;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return S(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:T,readerType:"default"};this.z_.push(r)}var o=Z(t);return pi(this),o},t}();function wi(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"U_")}function mi(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"P_")}function pi(t){var i=function(t){var i=t.U_;if("readable"!==i.Ea)return!1;if(!0===t.x_)return!1;if(!1===t.w_)return!1;if(!0===q(i)&&X(i)>0)return!0;if(!0===zi(i)&&Pi(i)>0)return!0;var e=xi(t);return e>0}(t);!1!==i&&(!0!==t.C_?(t.C_=!0,I(t.j_(),(function(){t.C_=!1,!0===t.O_&&(t.O_=!1,pi(t))}),(function(i){Li(t,i)}))):t.O_=!0)}function Ai(t,i){var e=!1;"closed"===t.Ea&&(e=!0);var s=yi(i);"default"===i.readerType?H(t,s,e):function(t,i,e){var s=t.Wg,n=s.F_.shift();n.Kg(O(i,e,s.Vg))}(t,s,e)}function yi(t){var i=t.bytesFilled,e=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,i/e)}function bi(t,i,e,s){t.n_.push({buffer:i,byteOffset:e,byteLength:s}),t.r_+=s}function Mi(t,i){var e=i.elementSize,s=i.bytesFilled-i.bytesFilled%e,n=x.min(t.r_,i.byteLength-i.bytesFilled),r=i.bytesFilled+n,o=r-r%e,a=n,u=!1;o>s&&(a=o-i.bytesFilled,u=!0);for(var c=t.n_;a>0;){var l=c.peek(),d=x.min(a,l.byteLength),f=i.byteOffset+i.bytesFilled;h(i.buffer,f,l.buffer,l.byteOffset,d),l.byteLength===d?c.shift():(l.byteOffset+=d,l.byteLength-=d),t.r_-=d,Ti(t,d,i),a-=d}return u}function Ti(t,i,e){Ni(t),e.bytesFilled+=i}function Si(t){0===t.r_&&!0===t.x_?(ki(t),Hi(t.U_)):pi(t)}function Ni(t){void 0!==t.B_&&(t.B_.P_=void 0,t.B_.R_=void 0,t.B_=void 0)}function Ii(t){for(;t.z_.length>0;){if(0===t.r_)return;var i=t.z_.peek();!0===Mi(t,i)&&(Ei(t),Ai(t.U_,i))}}function Di(t,i){var e=t.z_.peek();if("closed"===t.U_.Ea){if(0!==i)throw new k("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,i){i.buffer=i.buffer;var e=t.U_;if(!0===zi(e))for(;Pi(e)>0;)Ai(e,Ei(t))}(t,e)}else!function(t,i,e){if(e.bytesFilled+i>e.byteLength)throw new RangeError("bytesWritten out of range");if(Ti(t,i,e),!(e.bytesFilled<e.elementSize)){Ei(t);var s=e.bytesFilled%e.elementSize;if(s>0){var n=e.byteOffset+e.bytesFilled,r=e.buffer.slice(n-s,n);bi(t,r,0,r.byteLength)}e.buffer=e.buffer,e.bytesFilled-=s,Ai(t.U_,e),Ii(t)}}(t,i,e);pi(t)}function Ei(t){var i=t.z_.shift();return Ni(t),i}function ki(t){t.j_=void 0,t.k_=void 0}function Li(t,i){var e=t.U_;"readable"===e.Ea&&(function(t){Ni(t),t.z_=new j}(t),at(t),ki(t),Xi(e,i))}function xi(t){var i=t.U_.Ea;return"errored"===i?null:"closed"===i?0:t.S_-t.r_}function Ci(t,i,e){var s=_.create(vi.prototype),n=c(i,"pull",0,[s]),r=c(i,"cancel",1,[]),o=i.autoAllocateChunkSize;if(void 0!==o&&(o=Number(o),!1===gi(o)||o<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,i,e,s,n,r,o){i.U_=t,i.O_=!1,i.C_=!1,i.B_=void 0,i.n_=i.r_=void 0,at(i),i.x_=!1,i.w_=!1,i.S_=g(r),i.j_=s,i.k_=n,i.Q_=o,i.z_=new j,t.i_=i,I(M(e()),(function(){i.w_=!0,pi(i)}),(function(t){Li(i,t)}))}(t,s,(function(){return l(i,"start",[s])}),n,r,e,o)}function ji(t){return new k("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Oi(t){return new k("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function Ri(t){return y((function(i,e){var s={Kg:i,Jg:e};t.Wg.F_.push(s)}))}function Pi(t){return t.Wg.F_.length}function zi(t){var i=t.Wg;return void 0!==i&&!!Ui(i)}var Bi=function(){function t(t){if(!Gi(t))throw new k("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===wi(t.i_))throw new k("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(Wi(t))throw new k("This stream has already been locked for exclusive reading by another reader");R(this,t),this.F_=new j}return _.defineProperty(t.prototype,"closed",{get:function(){return Ui(this)?this.Hg:S(Qi("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return Ui(this)?void 0===this.Gg?S(B("cancel")):P(this,t):S(Qi("cancel"))},t.prototype.read=function(t){return Ui(this)?void 0===this.Gg?S(B("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?S(new k("view must have non-zero byteLength")):function(t,i){var e=t.Gg;return e.t_=!0,"errored"===e.Ea?S(e.Zg):function(t,i){var e=t.U_,s=1;i.constructor!==DataView&&(s=i.constructor.BYTES_PER_ELEMENT);var n=i.constructor,r={buffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.z_.length>0)return t.z_.push(r),Ri(e);if("closed"===e.Ea)return M(O(new n(r.buffer,r.byteOffset,0),!0,e.Wg.Vg));if(t.r_>0){if(!0===Mi(t,r)){var o=yi(r);return Si(t),M(O(o,!1,e.Wg.Vg))}if(!0===t.x_){var h=new k("Insufficient bytes to fill elements in the given buffer");return Li(t,h),S(h)}}t.z_.push(r);var a=Ri(e);return pi(t),a}(e.i_,i)}(this,t)):S(new k("view must be an array buffer view")):S(Qi("read"))},t.prototype.releaseLock=function(){if(!Ui(this))throw Qi("releaseLock");if(void 0!==this.Gg){if(this.F_.length>0)throw new k("Tried to release a reader lock when that reader has pending read() calls un-settled");z(this)}},t}();function Ui(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"F_")}function Qi(t){return new k("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var Fi=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),Vi(this);var e=i.size,s=i.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==e)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),Ci(this,t,s=g(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=v(e);void 0===s&&(s=1),function(t,i,e,s){var n=_.create(ei.prototype),r=c(i,"pull",0,[n]),o=c(i,"cancel",1,[]);di(t,n,(function(){return l(i,"start",[n])}),r,o,e,s)}(this,t,s=g(s),r)}}return _.defineProperty(t.prototype,"locked",{get:function(){if(!1===Gi(this))throw qi("locked");return Wi(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Gi(this)?S(qi("cancel")):!0===Wi(this)?S(new k("Cannot cancel a stream that already has a reader")):Zi(this,t)},t.prototype.getReader=function(t){var i=(void 0===t?{}:t).mode;if(!1===Gi(this))throw qi("getReader");if(void 0===i)return W(this,!0);if("byob"===(i=String(i)))return function(t,i){void 0===i&&(i=!1);var e=new Bi(t);return e.Vg=i,e}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,i){var e=t.writable,s=t.readable,n=void 0===i?{}:i,r=n.preventClose,o=n.preventAbort,h=n.preventCancel,a=n.signal;if(!1===Gi(this))throw qi("pipeThrough");if(!1===gt(e))throw new k("writable argument to pipeThrough must be a WritableStream");if(!1===Gi(s))throw new k("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),o=Boolean(o),h=Boolean(h),void 0!==a&&!Kt(a))throw new k("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===Wi(this))throw new k("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===_t(e))throw new k("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return C(ii(this,e,r,o,h,a)),s},t.prototype.pipeTo=function(t,i){var e=void 0===i?{}:i,s=e.preventClose,n=e.preventAbort,r=e.preventCancel,o=e.signal;return!1===Gi(this)?S(qi("pipeTo")):!1===gt(t)?S(new k("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===o||Kt(o)?!0===Wi(this)?S(new k("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===_t(t)?S(new k("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ii(this,t,s,n,r,o):S(new k("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Gi(this))throw qi("tee");var t=function(t,i){var e,s,n,r,h,a=W(t),u=!1,c=!1,l=!1,d=y((function(t){h=t}));function f(){return!0===u||(u=!0,C(L(it(a),(function(t){if(u=!1,!0===t.done)return!1===c&&hi(n.i_),void(!1===l&&hi(r.i_));var i=t.value,e=i,s=i;!1===c&&ai(n.i_,e),!1===l&&ai(r.i_,s)})))),M(void 0)}function g(){}return n=Yi(g,f,(function(i){if(c=!0,e=i,!0===l){var n=o([e,s]),r=Zi(t,n);h(r)}return d})),r=Yi(g,f,(function(i){if(l=!0,s=i,!0===c){var n=o([e,s]),r=Zi(t,n);h(r)}return d})),E(a.Hg,(function(t){ui(n.i_,t),ui(r.i_,t)})),[n,r]}(this);return o(t)},t.prototype.getIterator=function(t){var i=(void 0===t?{}:t).preventCancel,e=void 0!==i&&i;if(!1===Gi(this))throw qi("getIterator");return function(t,i){void 0===i&&(i=!1);var e=W(t),s=_.create(st);return s.e_=e,s.s_=Boolean(i),s}(this,e)},t}();function Yi(t,i,e,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=_.create(Fi.prototype);return Vi(r),di(r,_.create(ei.prototype),t,i,e,s,n),r}function Vi(t){t.Ea="readable",t.Wg=void 0,t.Zg=void 0,t.t_=!1}function Gi(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"i_")}function Wi(t){return void 0!==t.Wg}function Zi(t,i){return t.t_=!0,"closed"===t.Ea?M(void 0):"errored"===t.Ea?S(t.Zg):(Hi(t),L(t.i_[V](i),e))}function Hi(t){t.Ea="closed";var i=t.Wg;void 0!==i&&(tt(i)&&(i.$g.forEach((function(t){t.Kg(O(void 0,!0,i.Vg))})),i.$g=new j),Y(i))}function Xi(t,i){t.Ea="errored",t.Zg=i;var e=t.Wg;void 0!==e&&(tt(e)?(e.$g.forEach((function(t){t.Jg(i)})),e.$g=new j):(e.F_.forEach((function(t){t.Jg(i)})),e.F_=new j),F(e,i))}function qi(t){return new k("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof i.asyncIterator&&_.defineProperty(Fi.prototype,i.asyncIterator,{value:Fi.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var Ki=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(t){return t.byteLength},t}(),Ji=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(){return 1},t}(),$i=function(){function t(t,i,e){void 0===t&&(t={}),void 0===i&&(i={}),void 0===e&&(e={});var s=i.size,n=i.highWaterMark,r=e.size,o=e.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var h=v(s);if(void 0===n&&(n=1),n=g(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=v(r);void 0===o&&(o=0),o=g(o),function(t,i,e,s,n,r){function o(){return i}function h(i){return function(t,i){var e=t.Y_;return!0===t.f_?L(t.V_,(function(){var s=t.G_;if("erroring"===s.Ea)throw s.Zg;return ae(e,i)})):ae(e,i)}(t,i)}function a(i){return function(t,i){return ie(t,i),M(void 0)}(t,i)}function u(){return function(t){var i=t.W_,e=t.Y_,s=e.Z_();return oe(e),L(s,(function(){if("errored"===i.Ea)throw i.Zg;var t=i.i_;!0===li(t)&&hi(t)}),(function(e){throw ie(t,e),i.Zg}))}(t)}function c(){return function(t){return se(t,!1),t.V_}(t)}function l(i){return ee(t,i),M(void 0)}t.G_=function(t,i,e,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var o=_.create(lt.prototype);return ft(o),xt(o,_.create(Lt.prototype),t,i,e,s,n,r),o}(o,h,u,a,e,s),t.W_=Yi(o,c,l,n,r),t.f_=void 0,t.V_=void 0,t.H_=void 0,se(t,!0),t.Y_=void 0}(this,y((function(t){a=t})),n,h,o,u),function(t,i){var e=_.create(ne.prototype),s=function(t){try{return he(e,t),M(void 0)}catch(t){return S(t)}},n=i.transform;if(void 0!==n){if("function"!=typeof n)throw new k("transform is not a method");s=function(t){return d(n,i,[t,e])}}var r=c(i,"flush",0,[e]);!function(t,i,e,s){i.X_=t,t.Y_=i,i.q_=e,i.Z_=s}(t,e,s,r)}(this,t);var f=l(t,"start",[this.Y_]);a(f)}return _.defineProperty(t.prototype,"readable",{get:function(){if(!1===te(this))throw ce("readable");return this.W_},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"writable",{get:function(){if(!1===te(this))throw ce("writable");return this.G_},enumerable:!0,configurable:!0}),t}();function te(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"Y_")}function ie(t,i){ui(t.W_.i_,i),ee(t,i)}function ee(t,i){oe(t.Y_),Rt(t.G_.h_,i),!0===t.f_&&se(t,!1)}function se(t,i){void 0!==t.V_&&t.H_(),t.V_=y((function(i){t.H_=i})),t.f_=i}var ne=function(){function t(){throw new k("TransformStreamDefaultController instances cannot be created directly")}return _.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===re(this))throw ue("desiredSize");return ci(this.X_.W_.i_)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===re(this))throw ue("enqueue");he(this,t)},t.prototype.error=function(t){if(!1===re(this))throw ue("error");!function(t,i){ie(t.X_,i)}(this,t)},t.prototype.terminate=function(){if(!1===re(this))throw ue("terminate");!function(t){var i=t.X_,e=i.W_.i_;!0===li(e)&&hi(e);var s=new k("TransformStream terminated");ee(i,s)}(this)},t}();function re(t){return!!r(t)&&!!_.prototype.hasOwnProperty.call(t,"X_")}function oe(t){t.q_=void 0,t.Z_=void 0}function he(t,i){var e=t.X_,s=e.W_.i_;if(!1===li(s))throw new k("Readable side is not in a state that permits enqueue");try{ai(s,i)}catch(t){throw ee(e,t),e.W_.Zg}var n=function(t){return!0!==ri(t)}(s);n!==e.f_&&se(e,!0)}function ae(t,i){return L(t.q_(i),void 0,(function(i){throw ie(t.X_,i),i}))}function ue(t){return new k("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function ce(t){return new k("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=Ki,t.CountQueuingStrategy=Ji,t.ReadableStream=Fi,t.TransformStream=$i,t.WritableStream=lt,_.defineProperty(t,"__esModule",{value:!0})},"object"==typeof t&&void 0!==i?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((e=e||self).WebStreamsPolyfill={})})),vd=Ui((t=>{"use strict";function i(){const t=_d();return i=function(){return t},t}r(),_.defineProperty(t,"__esModule",{value:!0}),function(t,i){for(var e in i)_.defineProperty(t,e,{enumerable:!0,get:i[e]})}(t,{ByteLengthQueuingStrategy:function(){return i().ByteLengthQueuingStrategy},CountQueuingStrategy:function(){return i().CountQueuingStrategy},ReadableStream:function(){return i().ReadableStream},TransformStream:function(){return i().TransformStream},WritableStream:function(){return i().WritableStream}})})),wd=Ui(((t,i)=>{var e,n;r(),e=t,n=function(t){"use strict";var i,e=_.defineProperty,n=_.defineProperties,r=_.getOwnPropertyDescriptors,o=_.getOwnPropertySymbols,a=_.prototype.hasOwnProperty,c=_.prototype.propertyIsEnumerable,l=(t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,d=(t,i)=>{for(var e in i||(i={}))a.call(i,e)&&l(t,e,i[e]);if(o)for(var e of o(i))c.call(i,e)&&l(t,e,i[e]);return t},g=(t,i)=>n(t,r(i)),w=(t,i)=>{var e={};for(var s in t)a.call(t,s)&&i.indexOf(s)<0&&(e[s]=t[s]);if(null!=t&&o)for(var s of o(t))i.indexOf(s)<0&&c.call(t,s)&&(e[s]=t[s]);return e},p=typeof globalThis<"u"?globalThis:typeof s<"u"?s:typeof global<"u"?global:typeof self<"u"?self:{};function A(t){return t&&t.__esModule&&_.prototype.hasOwnProperty.call(t,"default")?t.default:t}var y,M={exports:{}};y=M,function(t){var i,e={VERSION:"1.6.1"},s={},n=function(t,i){return function(){return i.apply(t,arguments)}},r=function(){var t,i,e=arguments,s=e[0];for(i=1;i<e.length;i++)for(t in e[i])!(t in s)&&e[i].hasOwnProperty(t)&&(s[t]=e[i][t]);return s},o=function(t,i){return{value:t,name:i}};e.TRACE=o(1,"TRACE"),e.DEBUG=o(2,"DEBUG"),e.INFO=o(3,"INFO"),e.TIME=o(4,"TIME"),e.WARN=o(5,"WARN"),e.ERROR=o(8,"ERROR"),e.OFF=o(99,"OFF");var h=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};h.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var i=this.context.filterLevel;return t.value>=i.value},trace:function(){this.invoke(e.TRACE,arguments)},debug:function(){this.invoke(e.DEBUG,arguments)},info:function(){this.invoke(e.INFO,arguments)},warn:function(){this.invoke(e.WARN,arguments)},error:function(){this.invoke(e.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(e.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(e.TIME,[t,"end"])},invoke:function(t,e){i&&this.enabledFor(t)&&i(e,r({level:t},this.context))}};var a,u=new h({filterLevel:e.OFF});(a=e).enabledFor=n(u,u.enabledFor),a.trace=n(u,u.trace),a.debug=n(u,u.debug),a.time=n(u,u.time),a.timeEnd=n(u,u.timeEnd),a.info=n(u,u.info),a.warn=n(u,u.warn),a.error=n(u,u.error),a.log=a.info,e.setHandler=function(t){i=t},e.setLevel=function(t){for(var i in u.setLevel(t),s)s.hasOwnProperty(i)&&s[i].setLevel(t)},e.getLevel=function(){return u.getLevel()},e.get=function(t){return s[t]||(s[t]=new h(r({name:t},u.context)))},e.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,i){i.name&&t.unshift("["+i.name+"]")};var i={},s=function(t,i){Function.prototype.apply.call(t,console,i)};return typeof console>"u"?function(){}:function(n,r){n=Array.prototype.slice.call(n);var o,h=console.log;r.level===e.TIME?(o=(r.name?"["+r.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(o):i[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):s(h,[o+": "+((new Date).getTime()-i[o])+"ms"])):(r.level===e.WARN&&console.warn?h=console.warn:r.level===e.ERROR&&console.error?h=console.error:r.level===e.INFO&&console.info?h=console.info:r.level===e.DEBUG&&console.debug?h=console.debug:r.level===e.TRACE&&console.trace&&(h=console.trace),t.formatter(n,r),s(h,n))}},e.useDefaults=function(t){e.setLevel(t&&t.defaultLevel||e.DEBUG),e.setHandler(e.createDefaultHandler(t))},e.setDefaults=e.useDefaults,y.exports?y.exports=e:(e.K_=t.Logger,e.noConflict=function(){return t.Logger=e.K_,e},t.Logger=e)}(p);const N=A(M.exports),I="0.3.2",D=(null==(i=null==s?void 0:s.navigator)?void 0:i.userAgent)||"No user agent available";let E="",L="",O="",R="",P="",z="",B="",U=0;const Q=[],F=t=>{E=""===E?t:E},Y=t=>{L=""===L?t:L},V=t=>{O=""===O?t:O},G=t=>{R=""===R?t:R},W=t=>{P=""===P?t:P},Z=t=>{U=0===U?t:U},H=t=>{z=t},X=t=>{B=""===B?t:B},q=t=>{60===Q.length&&Q.shift(),Q.push(t)},K=(t,i)=>{let e;void 0===t&&(t=60),void 0===i&&(i="JSON"),e=!Number.isInteger(t)||t>60||t<=0?60:t;const s={client:"@millicast/millicast-sdk",version:I,timestamp:(new Date).toISOString(),userAgent:D,clusterId:B,accountId:E,streamName:L,subscriberId:O,connection:z,stats:Q.slice(-e),connectionDurationMs:(new Date).getTime()-U};return""!==P?s.feedId=P:""!==R&&(s.streamViewId=R),"CMCD"===i?function(t){function i(t,i){return{ts:x.round(i.timestamp)||"",ot:"audio"===t?"a":"v",bl:i.jitterBufferDelay||0,br:x.round(i.bitrateBitsPerSecond||0),pld:i.packetsLostDeltaPerSecond||0,j:i.jitter||0,mtp:i.packetRate||0,mid:i.mid||"",mimeType:i.mimeType||""}}return t.stats=t.stats.reduce(((t,e)=>{const s=0!==e.audio.inbounds.length?e.audio.inbounds.map((t=>i("audio",t))):e.audio.outbounds.map((t=>i("audio",t))),n=0!==e.video.inbounds.length?e.video.inbounds.map((t=>i("video",t))):e.video.outbounds.map((t=>i("video",t)));return t.concat([...s,...n])}),[]),t}(s):s};N.useDefaults({defaultLevel:N.TRACE});const J=["TRACE","DEBUG","INFO","WARN","ERROR"],tt=(t,i)=>{t.unshift("[".concat(i.name||"Global","] ").concat((new Date).toISOString()," - ").concat(i.level.name," -"))},it=(t,i)=>i?t.value>=ot[i].value:t.value>=rt.value,et=N.createDefaultHandler({formatter:tt});N.setHandler(((t,i)=>{((t,i)=>{t=(t=Array.prototype.slice.call(t)).map((t=>"object"==typeof t?JSON.stringify(t):t)),tt(t,i),0!==st?(nt.push(t.join(" ")),nt.length>=st&&(nt=nt.slice(-st))):nt=[]})(t,i),it(i.level,i.name)&&et(t,i);for(const{handler:e,level:s}of ht)i.level.value>=s.value&&e(t,i)}));let st=1e4,nt=[],rt=N.OFF;const ot={},ht=[],at=g(d({},N),{enabledFor:it,getHistory:()=>nt,getHistoryMaxSize:()=>st,setHistoryMaxSize:t=>{st=t},setLevel:t=>{rt=t;for(const i in ot)ot[i]=t},getLevel:()=>rt,get:t=>{ot[t]||(ot[t]=rt);const i=N.get(t);return i.setLevel=i=>{ot[t]=i},i.getLevel=()=>ot[t],i},setHandler:(t,i)=>{ht.push({handler:t,level:i})},diagnose:t=>{let i;void 0===t&&(t={});const e={statsCount:60,historySize:1e3,minLogLevel:"TRACE",statsFormat:"JSON"};"number"==typeof t?(e.statsCount=t,i=e):i=d(d({},e),t);const{statsCount:s,historySize:n,minLogLevel:r,statsFormat:o}=i,h=K(s,o),a=at.getHistory();if(!Number.isInteger(n)||n<=0)throw new b("Invalid Argument Exception : historySize must be a positive integer.");if(!J.includes(r.toUpperCase()))throw new b('Invalid Argument Exception : the minLogLevel parameter only excepts "trace", "debug", "info", "warn", and "error" as arguments.');if(J.includes(r.toUpperCase())){const t=J.slice(J.indexOf(r.toUpperCase())),i=a.filter((i=>t.some((t=>i.includes(t)))));h.history=i.slice(-n)}return h},JSON:"JSON",CMCD:"CMCD",VERSION:I});var ut,ct={exports:{}},lt="object"==typeof Reflect?Reflect:null,dt=lt&&"function"==typeof lt.apply?lt.apply:function(t,i,e){return Function.prototype.apply.call(t,i,e)};ut=lt&&"function"==typeof lt.ownKeys?lt.ownKeys:_.getOwnPropertySymbols?function(t){return _.getOwnPropertyNames(t).concat(_.getOwnPropertySymbols(t))}:function(t){return _.getOwnPropertyNames(t)};var ft=Number.isNaN||function(t){return t!=t};function gt(){gt.init.call(this)}ct.exports=gt,ct.exports.once=function(t,i){return new Promise((function(e,s){function n(e){t.removeListener(i,r),s(e)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),e([].slice.call(arguments))}Tt(t,i,r,{once:!0}),"error"!==i&&function(t,i,e){"function"==typeof t.on&&Tt(t,"error",i,e)}(t,n,{once:!0})}))},gt.EventEmitter=gt,gt.prototype.J_=void 0,gt.prototype.rv=0,gt.prototype.ov=void 0;var _t=10;function vt(t){if("function"!=typeof t)throw new k('The "listener" argument must be of type Function. Received type '+typeof t)}function wt(t){return void 0===t.ov?gt.defaultMaxListeners:t.ov}function mt(t,i,e,s){var n,r,o;if(vt(e),void 0===(r=t.J_)?(r=t.J_=_.create(null),t.rv=0):(void 0!==r.newListener&&(t.emit("newListener",i,e.listener?e.listener:e),r=t.J_),o=r[i]),void 0===o)o=r[i]=e,++t.rv;else if("function"==typeof o?o=r[i]=s?[e,o]:[o,e]:s?o.unshift(e):o.push(e),(n=wt(t))>0&&o.length>n&&!o.warned){o.warned=!0;var h=new b("Possible EventEmitter memory leak detected. "+o.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=i,h.count=o.length,function(t){console&&console.warn&&console.warn(t)}(h)}return t}function pt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function At(t,i,e){var s={fired:!1,wrapFn:void 0,target:t,type:i,listener:e},n=pt.bind(s);return n.listener=e,s.wrapFn=n,n}function yt(t,i,e){var s=t.J_;if(void 0===s)return[];var n=s[i];return void 0===n?[]:"function"==typeof n?e?[n.listener||n]:[n]:e?function(t){for(var i=new Array(t.length),e=0;e<i.length;++e)i[e]=t[e].listener||t[e];return i}(n):Mt(n,n.length)}function bt(t){var i=this.J_;if(void 0!==i){var e=i[t];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function Mt(t,i){for(var e=new Array(i),s=0;s<i;++s)e[s]=t[s];return e}function Tt(t,i,e,s){if("function"==typeof t.on)s.once?t.once(i,e):t.on(i,e);else{if("function"!=typeof t.addEventListener)throw new k('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,(function n(r){s.once&&t.removeEventListener(i,n),e(r)}))}}_.defineProperty(gt,"defaultMaxListeners",{enumerable:!0,get:function(){return _t},set:function(t){if("number"!=typeof t||t<0||ft(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");_t=t}}),gt.init=function(){(void 0===this.J_||this.J_===_.getPrototypeOf(this).J_)&&(this.J_=_.create(null),this.rv=0),this.ov=this.ov||void 0},gt.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||ft(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.ov=t,this},gt.prototype.getMaxListeners=function(){return wt(this)},gt.prototype.emit=function(t){for(var i=[],e=1;e<arguments.length;e++)i.push(arguments[e]);var s="error"===t,n=this.J_;if(void 0!==n)s=s&&void 0===n.error;else if(!s)return!1;if(s){var r;if(i.length>0&&(r=i[0]),r instanceof b)throw r;var o=new b("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var h=n[t];if(void 0===h)return!1;if("function"==typeof h)dt(h,this,i);else{var a=h.length,u=Mt(h,a);for(e=0;e<a;++e)dt(u[e],this,i)}return!0},gt.prototype.addListener=function(t,i){return mt(this,t,i,!1)},gt.prototype.on=gt.prototype.addListener,gt.prototype.prependListener=function(t,i){return mt(this,t,i,!0)},gt.prototype.once=function(t,i){return vt(i),this.on(t,At(this,t,i)),this},gt.prototype.prependOnceListener=function(t,i){return vt(i),this.prependListener(t,At(this,t,i)),this},gt.prototype.removeListener=function(t,i){var e,s,n,r,o;if(vt(i),void 0===(s=this.J_))return this;if(void 0===(e=s[t]))return this;if(e===i||e.listener===i)0==--this.rv?this.J_=_.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,e.listener||i));else if("function"!=typeof e){for(n=-1,r=e.length-1;r>=0;r--)if(e[r]===i||e[r].listener===i){o=e[r].listener,n=r;break}if(n<0)return this;0===n?e.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(e,n),1===e.length&&(s[t]=e[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||i)}return this},gt.prototype.off=gt.prototype.removeListener,gt.prototype.removeAllListeners=function(t){var i,e,s;if(void 0===(e=this.J_))return this;if(void 0===e.removeListener)return 0===arguments.length?(this.J_=_.create(null),this.rv=0):void 0!==e[t]&&(0==--this.rv?this.J_=_.create(null):delete e[t]),this;if(0===arguments.length){var n,r=_.keys(e);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.J_=_.create(null),this.rv=0,this}if("function"==typeof(i=e[t]))this.removeListener(t,i);else if(void 0!==i)for(s=i.length-1;s>=0;s--)this.removeListener(t,i[s]);return this},gt.prototype.listeners=function(t){return yt(this,t,!0)},gt.prototype.rawListeners=function(t){return yt(this,t,!1)},gt.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):bt.call(t,i)},gt.prototype.listenerCount=bt,gt.prototype.eventNames=function(){return this.rv>0?ut(this.J_):[]};var St=ct.exports;const Nt=A(St);var Dt={exports:{}};Dt.exports=kt,Dt.exports.filter=function(t,i){var e=new Et;return kt(t,e,i),e};var Et=St.EventEmitter;function kt(t,i,e){Array.isArray(e)||(e=[e]);var s=[];return e.forEach((function(e){var n=function(){var t=[].slice.call(arguments);t.unshift(e),i.emit.apply(i,t)};s.push(n),t.on(e,n)})),function(){e.forEach((function(i,e){t.removeListener(i,s[e])}))}}const Lt=A(Dt.exports);var xt={exports:{}};!function(t,i){var e;self,e=()=>{return t={7:t=>{var i,e="object"==typeof Reflect?Reflect:null,s=e&&"function"==typeof e.apply?e.apply:function(t,i,e){return Function.prototype.apply.call(t,i,e)};i=e&&"function"==typeof e.ownKeys?e.ownKeys:_.getOwnPropertySymbols?function(t){return _.getOwnPropertyNames(t).concat(_.getOwnPropertySymbols(t))}:function(t){return _.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,i){return new Promise((function(e,s){function n(e){t.removeListener(i,r),s(e)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),e([].slice.call(arguments))}var o,h;v(t,i,r,{once:!0}),"error"!==i&&(h=n,"function"==typeof(o=t).on&&v(o,"error",h,{once:!0}))}))},r.EventEmitter=r,r.prototype.J_=void 0,r.prototype.rv=0,r.prototype.ov=void 0;var o=10;function h(t){if("function"!=typeof t)throw new k('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t.ov?r.defaultMaxListeners:t.ov}function u(t,i,e,s){var n,r,o,u;if(h(e),void 0===(r=t.J_)?(r=t.J_=_.create(null),t.rv=0):(void 0!==r.newListener&&(t.emit("newListener",i,e.listener?e.listener:e),r=t.J_),o=r[i]),void 0===o)o=r[i]=e,++t.rv;else if("function"==typeof o?o=r[i]=s?[e,o]:[o,e]:s?o.unshift(e):o.push(e),(n=a(t))>0&&o.length>n&&!o.warned){o.warned=!0;var c=new b("Possible EventEmitter memory leak detected. "+o.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=i,c.count=o.length,u=c,console&&console.warn&&console.warn(u)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,i,e){var s={fired:!1,wrapFn:void 0,target:t,type:i,listener:e},n=c.bind(s);return n.listener=e,s.wrapFn=n,n}function d(t,i,e){var s=t.J_;if(void 0===s)return[];var n=s[i];return void 0===n?[]:"function"==typeof n?e?[n.listener||n]:[n]:e?function(t){for(var i=new Array(t.length),e=0;e<i.length;++e)i[e]=t[e].listener||t[e];return i}(n):g(n,n.length)}function f(t){var i=this.J_;if(void 0!==i){var e=i[t];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function g(t,i){for(var e=new Array(i),s=0;s<i;++s)e[s]=t[s];return e}function v(t,i,e,s){if("function"==typeof t.on)s.once?t.once(i,e):t.on(i,e);else{if("function"!=typeof t.addEventListener)throw new k('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,(function n(r){s.once&&t.removeEventListener(i,n),e(r)}))}}_.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),r.init=function(){void 0!==this.J_&&this.J_!==_.getPrototypeOf(this).J_||(this.J_=_.create(null),this.rv=0),this.ov=this.ov||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.ov=t,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(t){for(var i=[],e=1;e<arguments.length;e++)i.push(arguments[e]);var n="error"===t,r=this.J_;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(i.length>0&&(o=i[0]),o instanceof b)throw o;var h=new b("Unhandled error."+(o?" ("+o.message+")":""));throw h.context=o,h}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)s(a,this,i);else{var u=a.length,c=g(a,u);for(e=0;e<u;++e)s(c[e],this,i)}return!0},r.prototype.addListener=function(t,i){return u(this,t,i,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,i){return u(this,t,i,!0)},r.prototype.once=function(t,i){return h(i),this.on(t,l(this,t,i)),this},r.prototype.prependOnceListener=function(t,i){return h(i),this.prependListener(t,l(this,t,i)),this},r.prototype.removeListener=function(t,i){var e,s,n,r,o;if(h(i),void 0===(s=this.J_))return this;if(void 0===(e=s[t]))return this;if(e===i||e.listener===i)0==--this.rv?this.J_=_.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,e.listener||i));else if("function"!=typeof e){for(n=-1,r=e.length-1;r>=0;r--)if(e[r]===i||e[r].listener===i){o=e[r].listener,n=r;break}if(n<0)return this;0===n?e.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(e,n),1===e.length&&(s[t]=e[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||i)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var i,e,s;if(void 0===(e=this.J_))return this;if(void 0===e.removeListener)return 0===arguments.length?(this.J_=_.create(null),this.rv=0):void 0!==e[t]&&(0==--this.rv?this.J_=_.create(null):delete e[t]),this;if(0===arguments.length){var n,r=_.keys(e);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.J_=_.create(null),this.rv=0,this}if("function"==typeof(i=e[t]))this.removeListener(t,i);else if(void 0!==i)for(s=i.length-1;s>=0;s--)this.removeListener(t,i[s]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):f.call(t,i)},r.prototype.listenerCount=f,r.prototype.eventNames=function(){return this.rv>0?i(this.J_):[]}},586:function(t,i,e){var s,n;!function(r){var o,h={VERSION:"1.6.1"},a={},u=function(t,i){return function(){return i.apply(t,arguments)}},c=function(){var t,i,e=arguments,s=e[0];for(i=1;i<e.length;i++)for(t in e[i])!(t in s)&&e[i].hasOwnProperty(t)&&(s[t]=e[i][t]);return s},l=function(t,i){return{value:t,name:i}};h.TRACE=l(1,"TRACE"),h.DEBUG=l(2,"DEBUG"),h.INFO=l(3,"INFO"),h.TIME=l(4,"TIME"),h.WARN=l(5,"WARN"),h.ERROR=l(8,"ERROR"),h.OFF=l(99,"OFF");var d=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};d.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var i=this.context.filterLevel;return t.value>=i.value},trace:function(){this.invoke(h.TRACE,arguments)},debug:function(){this.invoke(h.DEBUG,arguments)},info:function(){this.invoke(h.INFO,arguments)},warn:function(){this.invoke(h.WARN,arguments)},error:function(){this.invoke(h.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"end"])},invoke:function(t,i){o&&this.enabledFor(t)&&o(i,c({level:t},this.context))}};var f,g=new d({filterLevel:h.OFF});(f=h).enabledFor=u(g,g.enabledFor),f.trace=u(g,g.trace),f.debug=u(g,g.debug),f.time=u(g,g.time),f.timeEnd=u(g,g.timeEnd),f.info=u(g,g.info),f.warn=u(g,g.warn),f.error=u(g,g.error),f.log=f.info,h.setHandler=function(t){o=t},h.setLevel=function(t){for(var i in g.setLevel(t),a)a.hasOwnProperty(i)&&a[i].setLevel(t)},h.getLevel=function(){return g.getLevel()},h.get=function(t){return a[t]||(a[t]=new d(c({name:t},g.context)))},h.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,i){i.name&&t.unshift("["+i.name+"]")};var i={},e=function(t,i){Function.prototype.apply.call(t,console,i)};return typeof console>"u"?function(){}:function(s,n){s=Array.prototype.slice.call(s);var r,o=console.log;n.level===h.TIME?(r=(n.name?"["+n.name+"] ":"")+s[0],"start"===s[1]?console.time?console.time(r):i[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):e(o,[r+": "+((new Date).getTime()-i[r])+"ms"])):(n.level===h.WARN&&console.warn?o=console.warn:n.level===h.ERROR&&console.error?o=console.error:n.level===h.INFO&&console.info?o=console.info:n.level===h.DEBUG&&console.debug?o=console.debug:n.level===h.TRACE&&console.trace&&(o=console.trace),t.formatter(s,n),e(o,s))}},h.useDefaults=function(t){h.setLevel(t&&t.defaultLevel||h.DEBUG),h.setHandler(h.createDefaultHandler(t))},h.setDefaults=h.useDefaults,void 0===(n="function"==typeof(s=h)?s.call(i,e,i,t):s)||(t.exports=n)}()},156:function(t,i,e){var s=this&&this.hv||(_.create?function(t,i,e,s){void 0===s&&(s=e);var n=_.getOwnPropertyDescriptor(i,e);n&&!("get"in n?!i.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return i[e]}}),_.defineProperty(t,s,n)}:function(t,i,e,s){void 0===s&&(s=e),t[s]=i[e]}),n=this&&this.uv||function(t,i){for(var e in t)"default"===e||_.prototype.hasOwnProperty.call(i,e)||s(i,t,e)},r=this&&this.fv||function(t){return t&&t.__esModule?t:{default:t}};_.defineProperty(i,"__esModule",{value:!0}),i.Logger=void 0;var o=e(586);_.defineProperty(i,"Logger",{enumerable:!0,get:function(){return r(o).default}}),n(e(284),i),n(e(280),i),n(e(738),i),n(e(767),i)},738:(t,i)=>{var e,s;_.defineProperty(i,"__esModule",{value:!0}),i.QualityLimitationReason=void 0,(s=e||(i.QualityLimitationReason=e={}))[s.none=0]="none",s[s.cpu=1]="cpu",s[s.bandwidth=2]="bandwidth",s[s.other=3]="other"},280:(t,i)=>{_.defineProperty(i,"__esModule",{value:!0})},767:(t,i)=>{_.defineProperty(i,"__esModule",{value:!0})},185:(t,i)=>{_.defineProperty(i,"__esModule",{value:!0}),i.calculatePacketsLostRatio=i.calculateRate=i.getMediaKind=void 0,i.getMediaKind=t=>{let i=t.kind||t.mediaType;return["audio","video"].includes(i)||"inbound-rtp"!==t.type||(i=t.id.toLocaleLowerCase().includes("video")?"video":"audio"),i},i.calculateRate=(t,i,e,s)=>e&&s?(i-s)/((t-e)/1e3):0,i.calculatePacketsLostRatio=(t,i,e,s)=>0==i?0:(t-(null!=e?e:0))/(i-(null!=s?s:0))},284:function(t,i,e){var s,n,r,o,h,a,u,c,l,d,f,g,w,p,A,y,b=this&&this._v||function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))},M=this&&this.vv||function(t,i,e,s,n){if("m"===s)throw new k("Private method is not writable");if("a"===s&&!n)throw new k("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!n:!i.has(t))throw new k("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,e):n?n.value=e:i.set(t,e),e},T=this&&this.mv||function(t,i,e,s){if("a"===e&&!s)throw new k("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!s:!i.has(t))throw new k("Cannot read private member from an object whose class did not declare it");return"m"===e?s:"a"===e?s.call(t):s?s.value:i.get(t)},S=this&&this.fv||function(t){return t&&t.__esModule?t:{default:t}};_.defineProperty(i,"__esModule",{value:!0}),i.WebRTCStats=void 0;const N=e(7),I=S(e(586)),D=e(738),E=e(185);class L extends N.EventEmitter{constructor(t){super(),s.add(this),n.set(this,void 0),r.set(this,void 0),o.set(this,void 0),h.set(this,null),a.set(this,void 0),u.set(this,null),this.start=()=>{T(this,a,"f").info("WebRTC statistics collection is starting..."),M(this,u,null,"f"),M(this,h,v(T(this,c,"f"),T(this,r,"f")),"f")},this.stop=()=>{T(this,h,"f")&&(m(T(this,h,"f")),M(this,h,null,"f"),T(this,a,"f").info("WebRTC statistics collection has stopped."))},c.set(this,(()=>b(this,void 0,void 0,(function*(){let t,i;try{T(this,a,"f").trace("Requesting WebRTC statistics..."),t=yield T(this,n,"f").call(this),i=(new Date).toISOString()}catch(t){return T(this,a,"f").error("Problem collecting the WebRTC statistics.",t),void this.emit("error","Problem collecting the WebRTC statistics - ".concat(t))}const e=Array.from(t.values()),r={timestamp:i,input:{audio:[],video:[]},output:{audio:[],video:[]}};T(this,o,"f")&&(r.rawStats=t);for(let i=0;i<_.keys(e).length;i++){const n=e[i];switch(n.type){case"outbound-rtp":const i=n,e=(0,E.getMediaKind)(i);"audio"===e?yield T(this,s,"m",f).call(this,t,i,r):"video"===e&&(yield T(this,s,"m",g).call(this,t,i,r));break;case"inbound-rtp":const o=n;let h=(0,E.getMediaKind)(o);"audio"===h?yield T(this,s,"m",p).call(this,t,o,r):"video"===h&&(yield T(this,s,"m",A).call(this,t,o,r));break;case"candidate-pair":const a=n;a.nominated&&T(this,s,"m",y).call(this,a,r)}}M(this,u,r,"f"),this.emit("stats",r)})))),M(this,a,I.default.get("WebRTCStats"),"f"),M(this,n,t.getStats,"f"),M(this,r,t.getStatsInterval||1e3,"f"),M(this,o,!!t.includeRawStats,"f")}}i.WebRTCStats=L,n=new WeakMap,r=new WeakMap,o=new WeakMap,h=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,s=new WeakSet,l=function(t,i){if(i){const e=t.get(i);if(e)return{mimeType:e.mimeType}}return{}},d=function(t,i,e){return b(this,void 0,void 0,(function*(){var n,r,o,h;const a=(0,E.calculateRate)(i.timestamp,i.bytesSent,null==e?void 0:e.timestamp,null==e?void 0:e.totalBytesSent),u=(0,E.calculateRate)(i.timestamp,i.packetsSent,null==e?void 0:e.timestamp,null==e?void 0:e.totalPacketsSent),c=T(this,s,"m",l).call(this,t,i.codecId);return _.assign({id:i.id,timestamp:i.timestamp,mid:i.mid,totalBytesSent:i.bytesSent,bytesSentDelta:i.bytesSent-(null!==(n=null==e?void 0:e.totalBytesSent)&&void 0!==n?n:0),totalPacketsSent:i.packetsSent,packetsSentDelta:i.packetsSent-(null!==(r=null==e?void 0:e.totalPacketsSent)&&void 0!==r?r:0),bitrate:a,packetRate:u,targetBitrate:i.targetBitrate,retransmittedPacketsSent:i.retransmittedPacketsSent,retransmittedPacketsSentDelta:i.retransmittedPacketsSent-(null!==(o=null==e?void 0:e.retransmittedPacketsSent)&&void 0!==o?o:0),retransmittedBytesSent:i.retransmittedBytesSent,retransmittedBytesSentDelta:i.retransmittedBytesSent-(null!==(h=null==e?void 0:e.retransmittedBytesSent)&&void 0!==h?h:0)},c)}))},f=function(t,i,e){return b(this,void 0,void 0,(function*(){var n;const r=null===(n=T(this,u,"f"))||void 0===n?void 0:n.output.audio.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield T(this,s,"m",d).call(this,t,i,r),h=_.assign({},o);e.output.audio.push(h)}))},g=function(t,i,e){return b(this,void 0,void 0,(function*(){var n;const r=null===(n=T(this,u,"f"))||void 0===n?void 0:n.output.video.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield T(this,s,"m",d).call(this,t,i,r);let h=D.QualityLimitationReason.none;i.qualityLimitationReason&&(h=i.qualityLimitationReason);const a=_.assign(_.assign({},o),{frameWidth:i.frameWidth,frameHeight:i.frameHeight,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,qualityLimitationReason:h,qualityLimitationDurations:i.qualityLimitationDurations});e.output.video.push(a)}))},w=function(t,i,e){return b(this,void 0,void 0,(function*(){var n,r;const o=(0,E.calculateRate)(i.timestamp,i.bytesReceived,null==e?void 0:e.timestamp,null==e?void 0:e.totalBytesReceived),h=(0,E.calculateRate)(i.timestamp,i.packetsReceived,null==e?void 0:e.timestamp,null==e?void 0:e.totalPacketsReceived),a=(0,E.calculatePacketsLostRatio)(i.packetsReceived,i.packetsLost,null==e?void 0:e.totalPacketsReceived,null==e?void 0:e.totalPacketsLost),u=(null!==(n=i.packetsLost)&&void 0!==n?n:0)-(null!==(r=null==e?void 0:e.totalPacketsLost)&&void 0!==r?r:0),c=T(this,s,"m",l).call(this,t,i.codecId);return _.assign({id:i.id,timestamp:i.timestamp,mid:i.mid,trackIdentifier:i.trackIdentifier,jitter:i.jitter,jitterBufferDelay:i.jitterBufferDelay,jitterBufferEmittedCount:i.jitterBufferEmittedCount,totalBytesReceived:i.bytesReceived,totalPacketsReceived:i.packetsReceived,totalPacketsLost:i.packetsLost,bitrate:o,packetRate:h,packetLossRatio:a,packetLossDelta:u},c)}))},p=function(t,i,e){return b(this,void 0,void 0,(function*(){var n;const r=null===(n=T(this,u,"f"))||void 0===n?void 0:n.input.audio.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield T(this,s,"m",w).call(this,t,i,r);e.input.audio.push(o)}))},A=function(t,i,e){return b(this,void 0,void 0,(function*(){var n;const r=null===(n=T(this,u,"f"))||void 0===n?void 0:n.input.video.find((t=>t.id===i.id));if(r&&i.timestamp-r.timestamp<=0)return;const o=yield T(this,s,"m",w).call(this,t,i,r),h=_.assign(_.assign({},o),{keyFramesDecoded:i.keyFramesDecoded,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesDecoded:i.framesDecoded,framesDropped:i.framesDropped,framesPerSecond:i.framesPerSecond,framesReceived:i.framesReceived});e.input.video.push(h)}))},y=function(t,i){i.totalRoundTripTime=t.totalRoundTripTime,i.currentRoundTripTime=t.currentRoundTripTime,i.responsesReceived=t.responsesReceived,i.availableOutgoingBitrate=t.availableOutgoingBitrate,i.availableIncomingBitrate=t.availableIncomingBitrate}}},i={},function e(s){var n=i[s];if(void 0!==n)return n.exports;var r=i[s]={exports:{}};return t[s].call(r.exports,r,r.exports,e),r.exports}(156);var t,i},t.exports=e()}(xt);var Ct=xt.exports;const jt=at.get("PeerConnectionStats"),Ot="stats";class Rt extends Nt{init(t){if(this.initialized)return void jt.warn("PeerConnectionStats.init() has already been called. Automatic initialization occurs when the PeerConnectionStats object is constructed.");jt.info("Initializing peer connection stats");const i=this.peer;try{this.collection=new Ct.WebRTCStats({getStatsInterval:t,getStats:()=>i.getStats(),includeRawStats:!0}),this.collection.on("stats",(t=>{const i=(t=>{const i=t,{input:e,output:s,rawStats:n}=i,r=w(i,["input","output","rawStats"]);return g(d({},r),{audio:{inbounds:t.input.audio.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=w(i,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.audio.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=w(i,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},video:{inbounds:t.input.video.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=w(i,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.video.map((t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=w(i,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},raw:t.rawStats})})(t);q(i),this.emit(Ot,i)})),this.collection.start(),this.initialized=!0}catch(t){jt.error(t)}}parseStats(t){return jt.warn("The parseStats method is deprecated and will be removed in future releases."),null}stop(){jt.info("Stopping peer connection stats"),this.collection.stop()}constructor(t,i={statsIntervalMs:1e3,autoInitStats:!0}){super(),this.peer=t,this.collection=null,this.initialized=!1,i.autoInitStats&&this.init(i.statsIntervalMs)}}var Pt={},zt={},Bt={},Ut={exports:{}},Qt=Ut.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return null!=t.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return null!=t.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return null!=t.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var i="candidate:%s %d %s %d %s %d typ %s";return i+=null!=t.raddr?" raddr %s rport %d":"%v%v",i+=null!=t.tcptype?" tcptype %s":"%v",null!=t.generation&&(i+=" generation %d"),i+=null!=t["network-id"]?" network-id %d":"%v",i+=null!=t["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var i="ssrc:%d";return null!=t.attribute&&(i+=" %s",null!=t.value&&(i+=":%s")),i}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return null!=t.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(null!=t.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var i="mediaclk:";return i+=null!=t.id?"id=%s %s":"%v%s",i+=null!=t.mediaClockValue?"=%s":"",i+=null!=t.rateNumerator?" rate=%s":"",i+=null!=t.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};_.keys(Qt).forEach((function(t){Qt[t].forEach((function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")}))}));var Ft=Ut.exports;!function(t){var i=function(t){return String(Number(t))===t?Number(t):t},e=function(t,e,s){var n=t.name&&t.names;t.push&&!e[t.push]?e[t.push]=[]:n&&!e[t.name]&&(e[t.name]={});var r=t.push?{}:n?e[t.name]:e;(function(t,e,s,n){if(n&&!s)e[n]=i(t[1]);else for(var r=0;r<s.length;r+=1)null!=t[r+1]&&(e[s[r]]=i(t[r+1]))})(s.match(t.reg),r,t.names,t.name),t.push&&e[t.push].push(r)},s=Ft,n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(t){var i={},r=[],o=i;return t.split(/(\r\n|\r|\n)/).filter(n).forEach((function(t){var i=t[0],n=t.slice(2);"m"===i&&(r.push({rtp:[],fmtp:[]}),o=r[r.length-1]);for(var h=0;h<(s[i]||[]).length;h+=1){var a=s[i][h];if(a.reg.test(n))return e(a,o,n)}})),i.media=r,i};var r=function(t,e){var s=e.split(/=(.+)/,2);return 2===s.length?t[s[0]]=i(s[1]):1===s.length&&e.length>1&&(t[s[0]]=void 0),t};t.parseParams=function(t){return t.split(/;\s?/).reduce(r,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(t){return t.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(t){for(var e=[],s=t.split(" ").map(i),n=0;n<s.length;n+=3)e.push({component:s[n],ip:s[n+1],port:s[n+2]});return e},t.parseImageAttributes=function(t){return t.split(" ").map((function(t){return t.substring(1,t.length-1).split(",").reduce(r,{})}))},t.parseSimulcastStreamList=function(t){return t.split(";").map((function(t){return t.split(",").map((function(t){var e,s=!1;return"~"!==t[0]?e=i(t):(e=i(t.substring(1,t.length)),s=!0),{scid:e,paused:s}}))}))}}(Bt);var Yt=Ft,Vt=/%[sdv%]/g,Gt=function(t){var i=1,e=arguments,s=e.length;return t.replace(Vt,(function(t){if(i>=s)return t;var n=e[i];switch(i+=1,t){case"%%":return"%";case"%s":return String(n);case"%d":return Number(n);case"%v":return""}}))},Wt=function(t,i,e){var s=[t+"="+(i.format instanceof Function?i.format(i.push?e:e[i.name]):i.format)];if(i.names)for(var n=0;n<i.names.length;n+=1){var r=i.names[n];i.name?s.push(e[i.name][r]):s.push(e[i.names[n]])}else s.push(e[i.name]);return Gt.apply(null,s)},Zt=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Ht=["i","c","b","a"],Xt=Bt,qt=function(t,i){i=i||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach((function(t){null==t.payloads&&(t.payloads="")}));var e=i.outerOrder||Zt,s=i.innerOrder||Ht,n=[];return e.forEach((function(i){Yt[i].forEach((function(e){e.name in t&&null!=t[e.name]?n.push(Wt(i,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){n.push(Wt(i,e,t))}))}))})),t.media.forEach((function(t){n.push(Wt("m",Yt.m[0],t)),s.forEach((function(i){Yt[i].forEach((function(e){e.name in t&&null!=t[e.name]?n.push(Wt(i,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){n.push(Wt(i,e,t))}))}))}))})),n.join("\r\n")+"\r\n"};zt.write=qt,zt.parse=Xt.parse,zt.parseParams=Xt.parseParams,zt.parseFmtpConfig=Xt.parseFmtpConfig,zt.parsePayloads=Xt.parsePayloads,zt.parseRemoteCandidates=Xt.parseRemoteCandidates,zt.parseImageAttributes=Xt.parseImageAttributes,zt.parseSimulcastStreamList=Xt.parseSimulcastStreamList;let Kt=class t{equals(t){return t.foundation===this.foundation&&t.componentId===this.componentId&&t.transport===this.transport&&t.priority===this.priority&&t.address===this.address&&t.port===this.port&&t.type===this.type&&t.relAddr===this.relAddr&&t.relPort===this.relPort}clone(){return new t(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.relAddr,this.relPort)}plain(){const t={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type};return this.relAddr&&(t.relAddr=this.relAddr),this.relPort&&(t.relPort=this.relPort),t}getFoundation(){return this.foundation}getComponentId(){return this.componentId}getTransport(){return this.transport}getPriority(){return this.priority}getAddress(){return this.address}getPort(){return this.port}getType(){return this.type}getRelAddr(){return this.relAddr}getRelPort(){return this.relPort}constructor(t,i,e,s,n,r,o,h,a){this.foundation=t,this.componentId=i,this.transport=e,this.priority=s,this.address=n,this.port=r,this.type=o,this.relAddr=h,this.relPort=a}};Kt.expand=function(t){return"CandidateInfo"===t.constructor.name?t:new Kt(t.foundation,t.componentId,t.transport,t.priority,t.address,t.port,t.type,t.relAddr,t.relPort)},Kt.clone=function(t){return"CandidateInfo"===t.constructor.name?t.clone():Kt.expand(t)};var Jt=Kt;let $t=class t{clone(){return new t(this.id,this.params)}plain(){return this.params.length?{id:this.id,params:this.params}:{id:this.id}}getId(){return this.id}getParams(){return this.params}constructor(t,i){this.id=t,this.params=i||[]}};$t.expand=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t:new $t(t.id,t.params)},$t.clone=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t.clone():$t.expand(t)};var ti=$t;const ii=ti;let ei=class t{clone(){const i=new t(this.codec,this.type,this.params);this.hasRTX()&&i.setRTX(this.getRTX());for(const t of this.rtcpfbs)i.addRTCPFeedback(t.clone());return this.hasChannels()&&i.setChannels(this.getChannels()),i}plain(){const t={codec:this.codec,type:this.type};this.rtx&&(t.rtx=this.rtx),this.channels&&(t.channels=this.channels),_.keys(this.params).length&&(t.params=this.params);for(const i of this.rtcpfbs)t.rtcpfbs||(t.rtcpfbs=[]),t.rtcpfbs.push(i.plain());return t}setRTX(t){this.rtx=t}getType(){return this.type}setType(t){this.type=t}getCodec(){return this.codec}getParams(){return this.params}addParams(t){for(const i in t)this.params[i]=t[i]}addParam(t,i){this.params[t]=i}hasParam(t){return _.hasOwnProperty.call(this.params,t)}getParam(t,i){if(void 0===i&&(i=void 0),this.hasParam(t))return this.params[t];if(void 0===i)throw new b("param ".concat(t," not found and no default value provided"));return""+i}hasRTX(){return this.rtx}getRTX(){return this.rtx}hasChannels(){return this.channels}getChannels(){return this.channels}setChannels(t){this.channels=t}addRTCPFeedback(t){this.rtcpfbs.add(t)}getRTCPFeedbacks(){return this.rtcpfbs}constructor(t,i,e){this.codec=t,this.type=i,this.params={},this.rtcpfbs=new Set,e&&this.addParams(e)}};ei.expand=function(t){if("CodecInfo"===t.constructor.name)return t;const i=new ei(t.codec,t.type,t.params);t.rtx&&i.setRTX(t.rtx),t.channels&&i.setChannels(t.channels);for(const e of t.rtcpfbs||[]){const t=ii.expand(e);i.addRTCPFeedback(t)}return i},ei.clone=function(t){return"CodecInfo"===t.constructor.name?t.clone():ei.expand(t)},ei.MapFromNames=function(t,i,e){var s;const n=new Map;let r=96;for(const o of t){let t;const h=o.split(";"),a=h.shift().toLowerCase().trim();t="pcmu"===a?0:"pcma"===a?8:++r;const u=new ei(a,t);"opus"===a?u.setChannels(2):"multiopus"===a&&u.setChannels(6),i&&"ulpfec"!==a&&"flexfec-03"!==a&&"red"!==a&&u.setRTX(++r);for(const t of e||[])u.addRTCPFeedback(new ii(t.id,t.params));for(const t of h){let i=t.split("=");u.addParam(i[0].trim(),null===(s=i[1])||void 0===s?void 0:s.trim())}n.set(t,u)}return n};var si=ei,ni=function t(){var i=this;if(!(this instanceof t))return new(Function.prototype.bind.apply(t,[null].concat(Array.prototype.slice.call(arguments))));Array.from(arguments).forEach((function(t){i[t]=It("pv"+t)}))};const ri=ni("ACTIVE","PASSIVE","ACTPASS","INACTIVE");ri.byValue=function(t){switch(t){case ri.ACTIVE:case ri.PASSIVE:case ri.ACTPASS:case ri.INACTIVE:return t}return ri[t.toUpperCase()]},ri.toString=function(t){switch(t){case ri.ACTIVE:return"active";case ri.PASSIVE:return"passive";case ri.ACTPASS:return"actpass";case ri.INACTIVE:return"inactive"}},ri.reverse=function(t,i){switch(t){case ri.ACTIVE:return ri.PASSIVE;case ri.PASSIVE:return ri.ACTIVE;case ri.ACTPASS:return i?ri.ACTIVE:ri.PASSIVE;case ri.INACTIVE:return ri.INACTIVE}};var oi=ri;const hi=oi;let ai=class t{clone(){return new t(this.setup,this.hash,this.fingerprint)}plain(){return{setup:hi.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}}getFingerprint(){return this.fingerprint}getHash(){return this.hash}getSetup(){return this.setup}setSetup(t){this.setup=t}constructor(t,i,e){this.setup=t,this.hash=i,this.fingerprint=e}};ai.expand=function(t){return"DTLSInfo"===t.constructor.name?t:new ai(t.setup?hi.byValue(t.setup):hi.ACTPASS,t.hash,t.fingerprint)},ai.clone=function(t){return"DTLSInfo"===t.constructor.name?t.clone():ai.expand(t)};var ui=ai;let ci=class t{clone(){return new t(this.tag,this.suite,this.keyParams,this.sessionParams)}plain(){return{tag:this.tag,suite:this.suite,keyParams:this.keyParams,sessionParams:this.sessionParams}}getSessionParams(){return this.sessionParams}getKeyParams(){return this.keyParams}getSuite(){return this.suite}getTag(){return this.tag}constructor(t,i,e,s){this.tag=t,this.suite=i,this.keyParams=e,this.sessionParams=s}};ci.expand=function(t){return"CryptoInfo"===t.constructor.name?t:new ci(t.tag,t.suite,t.keyParams,t.sessionParams)},ci.clone=function(t){return"CryptoInfo"===t.constructor.name?t.clone():ci.expand(t)};for(var li=ci,di={exports:{}},fi={exports:{}},gi={},_i={byteLength:function(t){var i=yi(t),e=i[0],s=i[1];return 3*(e+s)/4-s},toByteArray:function(t){var i,e,s=yi(t),n=s[0],r=s[1],o=new mi(function(t,i,e){return 3*(i+e)/4-e}(0,n,r)),h=0,a=r>0?n-4:n;for(e=0;e<a;e+=4)i=wi[t.charCodeAt(e)]<<18|wi[t.charCodeAt(e+1)]<<12|wi[t.charCodeAt(e+2)]<<6|wi[t.charCodeAt(e+3)],o[h++]=i>>16&255,o[h++]=i>>8&255,o[h++]=255&i;return 2===r&&(i=wi[t.charCodeAt(e)]<<2|wi[t.charCodeAt(e+1)]>>4,o[h++]=255&i),1===r&&(i=wi[t.charCodeAt(e)]<<10|wi[t.charCodeAt(e+1)]<<4|wi[t.charCodeAt(e+2)]>>2,o[h++]=i>>8&255,o[h++]=255&i),o},fromByteArray:function(t){for(var i,e=t.length,s=e%3,n=[],r=16383,o=0,h=e-s;o<h;o+=r)n.push(Mi(t,o,o+r>h?h:o+r));return 1===s?(i=t[e-1],n.push(vi[i>>2]+vi[i<<4&63]+"==")):2===s&&(i=(t[e-2]<<8)+t[e-1],n.push(vi[i>>10]+vi[i>>4&63]+vi[i<<2&63]+"=")),n.join("")}},vi=[],wi=[],mi=typeof T<"u"?T:Array,pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ai=0;Ai<64;++Ai)vi[Ai]=pi[Ai],wi[pi.charCodeAt(Ai)]=Ai;function yi(t){var i=t.length;if(i%4>0)throw new b("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");return-1===e&&(e=i),[e,e===i?0:4-e%4]}function bi(t){return vi[t>>18&63]+vi[t>>12&63]+vi[t>>6&63]+vi[63&t]}function Mi(t,i,e){for(var s,n=[],r=i;r<e;r+=3)s=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),n.push(bi(s));return n.join("")}wi[45]=62,wi[95]=63;var Ti={read:function(t,i,e,s,n){var r,o,h=8*n-s-1,a=(1<<h)-1,u=a>>1,c=-7,l=e?n-1:0,d=e?-1:1,f=t[i+l];for(l+=d,r=f&(1<<-c)-1,f>>=-c,c+=h;c>0;r=256*r+t[i+l],l+=d,c-=8);for(o=r&(1<<-c)-1,r>>=-c,c+=s;c>0;o=256*o+t[i+l],l+=d,c-=8);if(0===r)r=1-u;else{if(r===a)return o?NaN:1/0*(f?-1:1);o+=x.pow(2,s),r-=u}return(f?-1:1)*o*x.pow(2,r-s)},write:function(t,i,e,s,n,r){var o,h,a,u=8*r-n-1,c=(1<<u)-1,l=c>>1,d=23===n?x.pow(2,-24)-x.pow(2,-77):0,f=s?0:r-1,g=s?1:-1,_=i<0||0===i&&1/i<0?1:0;for(i=x.abs(i),j(i)||i===1/0?(h=j(i)?1:0,o=c):(o=x.floor(x.log(i)/x.LN2),i*(a=x.pow(2,-o))<1&&(o--,a*=2),(i+=o+l>=1?d/a:d*x.pow(2,1-l))*a>=2&&(o++,a/=2),o+l>=c?(h=0,o=c):o+l>=1?(h=(i*a-1)*x.pow(2,n),o+=l):(h=i*x.pow(2,l-1)*x.pow(2,n),o=0));n>=8;t[e+f]=255&h,f+=g,h/=256,n-=8);for(o=o<<n|h,u+=n;u>0;t[e+f]=255&o,f+=g,o/=256,u-=8);t[e+f-g]|=128*_}};(function(t){const i=_i,e=Ti,s="function"==typeof Bo&&"function"==typeof It?It("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},t.INSPECT_MAX_BYTES=50;const n=2147483647;function r(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');const i=new T(t);return _.setPrototypeOf(i,o.prototype),i}function o(t,i,e){if("number"==typeof t){if("string"==typeof i)throw new k('The "string" argument must be of type string. Received type number');return u(t)}return h(t,i,e)}function h(t,i,e){if("string"==typeof t)return function(t,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!o.isEncoding(i))throw new k("Unknown encoding: "+i);const e=0|f(t,i);let s=r(e);const n=s.write(t,i);return n!==e&&(s=s.slice(0,n)),s}(t,i);if(ArrayBuffer.isView(t))return function(t){if($(t,T)){const i=new T(t);return l(i.buffer,i.byteOffset,i.byteLength)}return c(t)}(t);if(null==t)throw new k("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if($(t,ArrayBuffer)||t&&$(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($(t,SharedArrayBuffer)||t&&$(t.buffer,SharedArrayBuffer)))return l(t,i,e);if("number"==typeof t)throw new k('The "value" argument must not be of type number. Received type number');const s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return o.from(s,i,e);const n=function(t){if(o.isBuffer(t)){const i=0|d(t.length),e=r(i);return 0===e.length||t.copy(e,0,0,i),e}return void 0!==t.length?"number"!=typeof t.length||tt(t.length)?r(0):c(t):"Buffer"===t.type&&Array.isArray(t.data)?c(t.data):void 0}(t);if(n)return n;if(typeof Bo<"u"&&null!=Bo.toPrimitive&&"function"==typeof t[Bo.toPrimitive])return o.from(t[Bo.toPrimitive]("string"),i,e);throw new k("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new k('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),r(t<0?0:0|d(t))}function c(t){const i=t.length<0?0:0|d(t.length),e=r(i);for(let s=0;s<i;s+=1)e[s]=255&t[s];return e}function l(t,i,e){if(i<0||t.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<i+(e||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===i&&void 0===e?new T(t):void 0===e?new T(t,i):new T(t,i,e),_.setPrototypeOf(s,o.prototype),s}function d(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function f(t,i){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||$(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new k('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const e=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===e)return 0;let n=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return s?-1:q(t).length;i=(""+i).toLowerCase(),n=!0}}function g(t,i,e){let s=!1;if((void 0===i||i<0)&&(i=0),i>this.length||((void 0===e||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(i>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return j(this,i,e);case"utf8":case"utf-8":return I(this,i,e);case"ascii":return E(this,i,e);case"latin1":case"binary":return L(this,i,e);case"base64":return N(this,i,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,i,e);default:if(s)throw new k("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function v(t,i,e){const s=t[i];t[i]=t[e],t[e]=s}function w(t,i,e,s,n){if(0===t.length)return-1;if("string"==typeof e?(s=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),tt(e=+e)&&(e=n?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(n)return-1;e=t.length-1}else if(e<0){if(!n)return-1;e=0}if("string"==typeof i&&(i=o.from(i,s)),o.isBuffer(i))return 0===i.length?-1:m(t,i,e,s,n);if("number"==typeof i)return i&=255,"function"==typeof T.prototype.indexOf?n?T.prototype.indexOf.call(t,i,e):T.prototype.lastIndexOf.call(t,i,e):m(t,[i],e,s,n);throw new k("val must be string, number or Buffer")}function m(t,i,e,s,n){let r,o=1,h=t.length,a=i.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||i.length<2)return-1;o=2,h/=2,a/=2,e/=2}function u(t,i){return 1===o?t[i]:t.readUInt16BE(i*o)}if(n){let s=-1;for(r=e;r<h;r++)if(u(t,r)===u(i,-1===s?0:r-s)){if(-1===s&&(s=r),r-s+1===a)return s*o}else-1!==s&&(r-=r-s),s=-1}else for(e+a>h&&(e=h-a),r=e;r>=0;r--){let e=!0;for(let s=0;s<a;s++)if(u(t,r+s)!==u(i,s)){e=!1;break}if(e)return r}return-1}function p(t,i,e,s){e=Number(e)||0;const n=t.length-e;s?(s=Number(s))>n&&(s=n):s=n;const r=i.length;let o;for(s>r/2&&(s=r/2),o=0;o<s;++o){const s=C(i.substr(2*o,2),16);if(tt(s))return o;t[e+o]=s}return o}function A(t,i,e,s){return J(q(i,t.length-e),t,e,s)}function y(t,i,e,s){return J(function(t){const i=[];for(let e=0;e<t.length;++e)i.push(255&t.charCodeAt(e));return i}(i),t,e,s)}function M(t,i,e,s){return J(K(i),t,e,s)}function S(t,i,e,s){return J(function(t,i){let e,s,n;const r=[];for(let o=0;o<t.length&&!((i-=2)<0);++o)e=t.charCodeAt(o),s=e>>8,n=e%256,r.push(n),r.push(s);return r}(i,t.length-e),t,e,s)}function N(t,e,s){return 0===e&&s===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,s))}function I(t,i,e){e=x.min(t.length,e);const s=[];let n=i;for(;n<e;){const i=t[n];let r=null,o=i>239?4:i>223?3:i>191?2:1;if(n+o<=e){let e,s,h,a;switch(o){case 1:i<128&&(r=i);break;case 2:e=t[n+1],128==(192&e)&&(a=(31&i)<<6|63&e,a>127&&(r=a));break;case 3:e=t[n+1],s=t[n+2],128==(192&e)&&128==(192&s)&&(a=(15&i)<<12|(63&e)<<6|63&s,a>2047&&(a<55296||a>57343)&&(r=a));break;case 4:e=t[n+1],s=t[n+2],h=t[n+3],128==(192&e)&&128==(192&s)&&128==(192&h)&&(a=(15&i)<<18|(63&e)<<12|(63&s)<<6|63&h,a>65535&&a<1114112&&(r=a))}}null===r?(r=65533,o=1):r>65535&&(r-=65536,s.push(r>>>10&1023|55296),r=56320|1023&r),s.push(r),n+=o}return function(t){const i=t.length;if(i<=D)return String.fromCharCode.apply(String,t);let e="",s=0;for(;s<i;)e+=String.fromCharCode.apply(String,t.slice(s,s+=D));return e}(s)}t.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{const t=new T(1),i={foo:function(){return 42}};return _.setPrototypeOf(i,T.prototype),_.setPrototypeOf(t,i),42===t.foo()}catch(t){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),_.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),_.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,i,e){return h(t,i,e)},_.setPrototypeOf(o.prototype,T.prototype),_.setPrototypeOf(o,T),o.alloc=function(t,i,e){return function(t,i,e){return a(t),t<=0?r(t):void 0!==i?"string"==typeof e?r(t).fill(i,e):r(t).fill(i):r(t)}(t,i,e)},o.allocUnsafe=function(t){return u(t)},o.allocUnsafeSlow=function(t){return u(t)},o.isBuffer=function(t){return null!=t&&!0===t.Av&&t!==o.prototype},o.compare=function(t,i){if($(t,T)&&(t=o.from(t,t.offset,t.byteLength)),$(i,T)&&(i=o.from(i,i.offset,i.byteLength)),!o.isBuffer(t)||!o.isBuffer(i))throw new k('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===i)return 0;let e=t.length,s=i.length;for(let n=0,r=x.min(e,s);n<r;++n)if(t[n]!==i[n]){e=t[n],s=i[n];break}return e<s?-1:s<e?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,i){if(!Array.isArray(t))throw new k('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);let e;if(void 0===i)for(i=0,e=0;e<t.length;++e)i+=t[e].length;const s=o.allocUnsafe(i);let n=0;for(e=0;e<t.length;++e){let i=t[e];if($(i,T))n+i.length>s.length?(o.isBuffer(i)||(i=o.from(i)),i.copy(s,n)):T.prototype.set.call(s,i,n);else{if(!o.isBuffer(i))throw new k('"list" argument must be an Array of Buffers');i.copy(s,n)}n+=i.length}return s},o.byteLength=f,o.prototype.Av=!0,o.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<t;i+=2)v(this,i,i+1);return this},o.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<t;i+=4)v(this,i,i+3),v(this,i+1,i+2);return this},o.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<t;i+=8)v(this,i,i+7),v(this,i+1,i+6),v(this,i+2,i+5),v(this,i+3,i+4);return this},o.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?I(this,0,t):g.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new k("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){let i="";const e=t.INSPECT_MAX_BYTES;return i=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(i+=" ... "),"<Buffer "+i+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(t,i,e,s,n){if($(t,T)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new k('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===i&&(i=0),void 0===e&&(e=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),i<0||e>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&i>=e)return 0;if(s>=n)return-1;if(i>=e)return 1;if(this===t)return 0;let r=(n>>>=0)-(s>>>=0),h=(e>>>=0)-(i>>>=0);const a=x.min(r,h),u=this.slice(s,n),c=t.slice(i,e);for(let t=0;t<a;++t)if(u[t]!==c[t]){r=u[t],h=c[t];break}return r<h?-1:h<r?1:0},o.prototype.includes=function(t,i,e){return-1!==this.indexOf(t,i,e)},o.prototype.indexOf=function(t,i,e){return w(this,t,i,e,!0)},o.prototype.lastIndexOf=function(t,i,e){return w(this,t,i,e,!1)},o.prototype.write=function(t,i,e,s){if(void 0===i)s="utf8",e=this.length,i=0;else if(void 0===e&&"string"==typeof i)s=i,e=this.length,i=0;else{if(!isFinite(i))throw new b("Buffer.write(string, encoding, offset[, length]) is no longer supported");i>>>=0,isFinite(e)?(e>>>=0,void 0===s&&(s="utf8")):(s=e,e=void 0)}const n=this.length-i;if((void 0===e||e>n)&&(e=n),t.length>0&&(e<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let r=!1;for(;;)switch(s){case"hex":return p(this,t,i,e);case"utf8":case"utf-8":return A(this,t,i,e);case"ascii":case"latin1":case"binary":return y(this,t,i,e);case"base64":return M(this,t,i,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,i,e);default:if(r)throw new k("Unknown encoding: "+s);s=(""+s).toLowerCase(),r=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.yv||this,0)}};const D=4096;function E(t,i,e){let s="";e=x.min(t.length,e);for(let n=i;n<e;++n)s+=String.fromCharCode(127&t[n]);return s}function L(t,i,e){let s="";e=x.min(t.length,e);for(let n=i;n<e;++n)s+=String.fromCharCode(t[n]);return s}function j(t,i,e){const s=t.length;(!i||i<0)&&(i=0),(!e||e<0||e>s)&&(e=s);let n="";for(let s=i;s<e;++s)n+=it[t[s]];return n}function O(t,i,e){const s=t.slice(i,e);let n="";for(let t=0;t<s.length-1;t+=2)n+=String.fromCharCode(s[t]+256*s[t+1]);return n}function R(t,i,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+i>e)throw new RangeError("Trying to access beyond buffer length")}function P(t,i,e,s,n,r){if(!o.isBuffer(t))throw new k('"buffer" argument must be a Buffer instance');if(i>n||i<r)throw new RangeError('"value" argument is out of bounds');if(e+s>t.length)throw new RangeError("Index out of range")}function z(t,i,e,s,n){W(i,s,n,t,e,7);let r=Number(i&BigInt(4294967295));t[e++]=r,r>>=8,t[e++]=r,r>>=8,t[e++]=r,r>>=8,t[e++]=r;let o=Number(i>>BigInt(32)&BigInt(4294967295));return t[e++]=o,o>>=8,t[e++]=o,o>>=8,t[e++]=o,o>>=8,t[e++]=o,e}function B(t,i,e,s,n){W(i,s,n,t,e,7);let r=Number(i&BigInt(4294967295));t[e+7]=r,r>>=8,t[e+6]=r,r>>=8,t[e+5]=r,r>>=8,t[e+4]=r;let o=Number(i>>BigInt(32)&BigInt(4294967295));return t[e+3]=o,o>>=8,t[e+2]=o,o>>=8,t[e+1]=o,o>>=8,t[e]=o,e+8}function U(t,i,e,s,n,r){if(e+s>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Q(t,i,s,n,r){return i=+i,s>>>=0,r||U(t,0,s,4),e.write(t,i,s,n,23,4),s+4}function F(t,i,s,n,r){return i=+i,s>>>=0,r||U(t,0,s,8),e.write(t,i,s,n,52,8),s+8}o.prototype.slice=function(t,i){const e=this.length;(t=~~t)<0?(t+=e)<0&&(t=0):t>e&&(t=e),(i=void 0===i?e:~~i)<0?(i+=e)<0&&(i=0):i>e&&(i=e),i<t&&(i=t);const s=this.subarray(t,i);return _.setPrototypeOf(s,o.prototype),s},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,i,e){t>>>=0,i>>>=0,e||R(t,i,this.length);let s=this[t],n=1,r=0;for(;++r<i&&(n*=256);)s+=this[t+r]*n;return s},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,i,e){t>>>=0,i>>>=0,e||R(t,i,this.length);let s=this[t+--i],n=1;for(;i>0&&(n*=256);)s+=this[t+--i]*n;return s},o.prototype.readUint8=o.prototype.readUInt8=function(t,i){return t>>>=0,i||R(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,i){return t>>>=0,i||R(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,i){return t>>>=0,i||R(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,i){return t>>>=0,i||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,i){return t>>>=0,i||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readBigUInt64LE=et((function(t){Z(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&H(t,this.length-8);const s=i+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+e*2**24;return BigInt(s)+(BigInt(n)<<BigInt(32))})),o.prototype.readBigUInt64BE=et((function(t){Z(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&H(t,this.length-8);const s=i*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+e;return(BigInt(s)<<BigInt(32))+BigInt(n)})),o.prototype.readIntLE=function(t,i,e){t>>>=0,i>>>=0,e||R(t,i,this.length);let s=this[t],n=1,r=0;for(;++r<i&&(n*=256);)s+=this[t+r]*n;return n*=128,s>=n&&(s-=x.pow(2,8*i)),s},o.prototype.readIntBE=function(t,i,e){t>>>=0,i>>>=0,e||R(t,i,this.length);let s=i,n=1,r=this[t+--s];for(;s>0&&(n*=256);)r+=this[t+--s]*n;return n*=128,r>=n&&(r-=x.pow(2,8*i)),r},o.prototype.readInt8=function(t,i){return t>>>=0,i||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,i){t>>>=0,i||R(t,2,this.length);const e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},o.prototype.readInt16BE=function(t,i){t>>>=0,i||R(t,2,this.length);const e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},o.prototype.readInt32LE=function(t,i){return t>>>=0,i||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,i){return t>>>=0,i||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readBigInt64LE=et((function(t){Z(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&H(t,this.length-8);const s=this[t+4]+256*this[t+5]+65536*this[t+6]+(e<<24);return(BigInt(s)<<BigInt(32))+BigInt(i+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),o.prototype.readBigInt64BE=et((function(t){Z(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&H(t,this.length-8);const s=(i<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(s)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+e)})),o.prototype.readFloatLE=function(t,i){return t>>>=0,i||R(t,4,this.length),e.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,i){return t>>>=0,i||R(t,4,this.length),e.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,i){return t>>>=0,i||R(t,8,this.length),e.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,i){return t>>>=0,i||R(t,8,this.length),e.read(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,i,e,s){t=+t,i>>>=0,e>>>=0,s||P(this,t,i,e,x.pow(2,8*e)-1,0);let n=1,r=0;for(this[i]=255&t;++r<e&&(n*=256);)this[i+r]=t/n&255;return i+e},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,i,e,s){t=+t,i>>>=0,e>>>=0,s||P(this,t,i,e,x.pow(2,8*e)-1,0);let n=e-1,r=1;for(this[i+n]=255&t;--n>=0&&(r*=256);)this[i+n]=t/r&255;return i+e},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,1,255,0),this[i]=255&t,i+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,2,65535,0),this[i]=255&t,this[i+1]=t>>>8,i+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,2,65535,0),this[i]=t>>>8,this[i+1]=255&t,i+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,4,4294967295,0),this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=255&t,i+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,4,4294967295,0),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},o.prototype.writeBigUInt64LE=et((function(t,i){return void 0===i&&(i=0),z(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=et((function(t,i){return void 0===i&&(i=0),B(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(t,i,e,s){if(t=+t,i>>>=0,!s){const s=x.pow(2,8*e-1);P(this,t,i,e,s-1,-s)}let n=0,r=1,o=0;for(this[i]=255&t;++n<e&&(r*=256);)t<0&&0===o&&0!==this[i+n-1]&&(o=1),this[i+n]=(t/r>>0)-o&255;return i+e},o.prototype.writeIntBE=function(t,i,e,s){if(t=+t,i>>>=0,!s){const s=x.pow(2,8*e-1);P(this,t,i,e,s-1,-s)}let n=e-1,r=1,o=0;for(this[i+n]=255&t;--n>=0&&(r*=256);)t<0&&0===o&&0!==this[i+n+1]&&(o=1),this[i+n]=(t/r>>0)-o&255;return i+e},o.prototype.writeInt8=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,1,127,-128),t<0&&(t=255+t+1),this[i]=255&t,i+1},o.prototype.writeInt16LE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,2,32767,-32768),this[i]=255&t,this[i+1]=t>>>8,i+2},o.prototype.writeInt16BE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,2,32767,-32768),this[i]=t>>>8,this[i+1]=255&t,i+2},o.prototype.writeInt32LE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,4,2147483647,-2147483648),this[i]=255&t,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24,i+4},o.prototype.writeInt32BE=function(t,i,e){return t=+t,i>>>=0,e||P(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},o.prototype.writeBigInt64LE=et((function(t,i){return void 0===i&&(i=0),z(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=et((function(t,i){return void 0===i&&(i=0),B(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(t,i,e){return Q(this,t,i,!0,e)},o.prototype.writeFloatBE=function(t,i,e){return Q(this,t,i,!1,e)},o.prototype.writeDoubleLE=function(t,i,e){return F(this,t,i,!0,e)},o.prototype.writeDoubleBE=function(t,i,e){return F(this,t,i,!1,e)},o.prototype.copy=function(t,i,e,s){if(!o.isBuffer(t))throw new k("argument should be a Buffer");if(e||(e=0),!s&&0!==s&&(s=this.length),i>=t.length&&(i=t.length),i||(i=0),s>0&&s<e&&(s=e),s===e||0===t.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-i<s-e&&(s=t.length-i+e);const n=s-e;return this===t&&"function"==typeof T.prototype.copyWithin?this.copyWithin(i,e,s):T.prototype.set.call(t,this.subarray(e,s),i),n},o.prototype.fill=function(t,i,e,s){if("string"==typeof t){if("string"==typeof i?(s=i,i=0,e=this.length):"string"==typeof e&&(s=e,e=this.length),void 0!==s&&"string"!=typeof s)throw new k("encoding must be a string");if("string"==typeof s&&!o.isEncoding(s))throw new k("Unknown encoding: "+s);if(1===t.length){const i=t.charCodeAt(0);("utf8"===s&&i<128||"latin1"===s)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(i<0||this.length<i||this.length<e)throw new RangeError("Out of range index");if(e<=i)return this;let n;if(i>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(n=i;n<e;++n)this[n]=t;else{const r=o.isBuffer(t)?t:o.from(t,s),h=r.length;if(0===h)throw new k('The value "'+t+'" is invalid for argument "value"');for(n=0;n<e-i;++n)this[n+i]=r[n%h]}return this};const Y={};function V(t,i,e){Y[t]=class extends e{get code(){return t}set code(t){_.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}constructor(){super(),_.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(t,"]"),this.stack,delete this.name}}}function G(t){let i="",e=t.length;const s="-"===t[0]?1:0;for(;e>=s+4;e-=3)i="_".concat(t.slice(e-3,e)).concat(i);return"".concat(t.slice(0,e)).concat(i)}function W(t,i,e,s,n,r){if(t>e||t<i){const e="bigint"==typeof i?"n":"";let s;throw s=0===i||i===BigInt(0)?">= 0".concat(e," and < 2").concat(e," ** ").concat(8*(r+1)).concat(e):">= -(2".concat(e," ** ").concat(8*(r+1)-1).concat(e,") and < 2 ** ")+"".concat(8*(r+1)-1).concat(e),new Y.ERR_OUT_OF_RANGE("value",s,t)}!function(t,i,e){Z(i,"offset"),(void 0===t[i]||void 0===t[i+e])&&H(i,t.length-(e+1))}(s,n,r)}function Z(t,i){if("number"!=typeof t)throw new Y.ERR_INVALID_ARG_TYPE(i,"number",t)}function H(t,i,e){throw x.floor(t)!==t?(Z(t,e),new Y.ERR_OUT_OF_RANGE("offset","an integer",t)):i<0?new Y.ERR_BUFFER_OUT_OF_BOUNDS:new Y.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(i),t)}V("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),V("ERR_INVALID_ARG_TYPE",(function(t,i){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(typeof i)}),k),V("ERR_OUT_OF_RANGE",(function(t,i,e){let s='The value of "'.concat(t,'" is out of range.'),n=e;return Number.isInteger(e)&&x.abs(e)>2**32?n=G(String(e)):"bigint"==typeof e&&(n=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(n=G(n)),n+="n"),s+=" It must be ".concat(i,". Received ").concat(n),s}),RangeError);const X=/[^+/0-9A-Za-z-_]/g;function q(t,i){let e;i=i||1/0;const s=t.length;let n=null;const r=[];for(let o=0;o<s;++o){if(e=t.charCodeAt(o),e>55295&&e<57344){if(!n){if(e>56319){(i-=3)>-1&&r.push(239,191,189);continue}if(o+1===s){(i-=3)>-1&&r.push(239,191,189);continue}n=e;continue}if(e<56320){(i-=3)>-1&&r.push(239,191,189),n=e;continue}e=65536+(n-55296<<10|e-56320)}else n&&(i-=3)>-1&&r.push(239,191,189);if(n=null,e<128){if((i-=1)<0)break;r.push(e)}else if(e<2048){if((i-=2)<0)break;r.push(e>>6|192,63&e|128)}else if(e<65536){if((i-=3)<0)break;r.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new b("Invalid code point");if((i-=4)<0)break;r.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return r}function K(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function J(t,i,e,s){let n;for(n=0;n<s&&!(n+e>=i.length||n>=t.length);++n)i[n+e]=t[n];return n}function $(t,i){return t instanceof i||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===i.name}function tt(t){return t!=t}const it=function(){const t="0123456789abcdef",i=new Array(256);for(let e=0;e<16;++e){const s=16*e;for(let n=0;n<16;++n)i[s+n]=t[e]+t[n]}return i}();function et(t){return typeof BigInt>"u"?st:t}function st(){throw new b("BigInt not supported")}})(gi),function(t,i){var e=gi,s=e.Buffer;function n(t,i){for(var e in t)i[e]=t[e]}function r(t,i,e){return s(t,i,e)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=e:(n(e,i),i.Buffer=r),r.prototype=_.create(s.prototype),n(s,r),r.from=function(t,i,e){if("number"==typeof t)throw new k("Argument must not be a number");return s(t,i,e)},r.alloc=function(t,i,e){if("number"!=typeof t)throw new k("Argument must be a number");var n=s(t);return void 0!==i?"string"==typeof e?n.fill(i,e):n.fill(i):n.fill(0),n},r.allocUnsafe=function(t){if("number"!=typeof t)throw new k("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new k("Argument must be a number");return e.SlowBuffer(t)}}(fi,fi.exports);var Si=65536,Ni=fi.exports.Buffer,Ii=p.crypto||p.msCrypto;Ii&&Ii.getRandomValues?di.exports=function(t,i){if(t>4294967295)throw new RangeError("requested too many random bytes");var e=Ni.allocUnsafe(t);if(t>0)if(t>Si)for(var s=0;s<t;s+=Si)Ii.getRandomValues(e.slice(s,s+Si));else Ii.getRandomValues(e);return"function"==typeof i?process.nextTick((function(){i(null,e)})):e}:di.exports=function(){throw new b("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")};const Di=di.exports;let Ei=class t{clone(){const i=new t(this.ufrag,this.pwd);return i.setLite(this.lite),i.setEndOfCandidates(this.endOfCandidates),i}plain(){const t={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(t.lite=this.lite),this.endOfCandidates&&(t.endOfCandidates=this.endOfCandidates),t}getUfrag(){return this.ufrag}getPwd(){return this.pwd}isLite(){return this.lite}setLite(t){this.lite=t}isEndOfCandidates(){return this.endOfCandidates}setEndOfCandidates(t){this.endOfCandidates=t}constructor(t,i){this.ufrag=t,this.pwd=i,this.lite=!1,this.endOfCandidates=!1}};Ei.generate=function(t){const i=new Ei,e=Di(8),s=Di(24);return i.ufrag=e.toString("hex"),i.pwd=s.toString("hex"),i.lite=t,i},Ei.expand=function(t){if("ICEInfo"===t.constructor.name)return t;const i=new Ei(t.ufrag,t.pwd);return i.setLite(t.lite),i.setEndOfCandidates(t.endOfCandidates),i},Ei.clone=function(t){return"ICEInfo"===t.constructor.name?t.clone():Ei.expand(t)};var ki=Ei;const Li=ni("SEND","RECV");Li.byValue=function(t){return Li[t.toUpperCase()]},Li.toString=function(t){switch(t){case Li.SEND:return"send";case Li.RECV:return"recv"}},Li.reverse=function(t){switch(t){case Li.SEND:return Li.RECV;case Li.RECV:return Li.SEND}};var xi=Li;const Ci=xi;let ji=class t{clone(){var i=new t(this.id,this.direction);return i.setFormats(this.formats),i.setParams(this.params),i}plain(){var t={id:this.id,direction:Ci.toString(this.direction)};for(var[i,e]of(this.formats&&(t.formats=this.formats),this.params.entries()))t.params||(t.params={}),t.params[i]=e;return t}getId(){return this.id}getDirection(){return this.direction}setDirection(t){this.direction=t}getFormats(){return this.formats}setFormats(t){this.formats=[];for(let i=0;i<t.length;++i)this.formats.push(C(t[i]))}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,i){this.params.set(t,i)}constructor(t,i){this.id=t,this.direction=i,this.formats=[],this.params=new Map}};ji.expand=function(t){if("RIDInfo"===t.constructor.name)return t;const i=new ji(t.id,Ci.byValue(t.direction));for(const[e,s]of _.entries(t.params||{}))i.addParam(e,s);return t.formats&&i.setFormats(t.formats),i},ji.clone=function(t){return"RIDInfo"===t.constructor.name?t.clone():ji.expand(t)};var Oi=ji;let Ri=class t{clone(){return new t(this.id,this.paused)}plain(){return{id:this.id,paused:this.paused}}isPaused(){return this.paused}getId(){return this.id}constructor(t,i){this.paused=i,this.id=t}};Ri.expand=function(t){return"SimulcastStreamInfo"===t.constructor.name?t:new Ri(t.id,t.paused)},Ri.clone=function(t){return"SimulcastStreamInfo"===t.constructor.name?t.clone():Ri.expand(t)};var Pi=Ri;const zi=Pi,Bi=xi;let Ui=class t{clone(){const i=new t;for(const t of this.send)i.addSimulcastAlternativeStreams(Bi.SEND,t.map((t=>t.clone())));for(const t of this.recv)i.addSimulcastAlternativeStreams(Bi.RECV,t.map((t=>t.clone())));return i}plain(){const t={send:[],recv:[]};for(const i of this.send)t.send.push(i.map((t=>t.plain())));for(const i of this.recv)t.recv.push(i.map((t=>t.plain())));return t}addSimulcastAlternativeStreams(t,i){return t===Bi.SEND?this.send.push(i):this.recv.push(i)}addSimulcastStream(t,i){return t===Bi.SEND?this.send.push([i]):this.recv.push([i])}getSimulcastStreams(t){return t===Bi.SEND?this.send:this.recv}constructor(){this.send=[],this.recv=[]}};Ui.expand=function(t){if("SimulcastInfo"===t.constructor.name)return t;const i=new Ui;for(const e of t.send||[])i.addSimulcastAlternativeStreams(Bi.SEND,e.map(zi.expand));for(const e of t.recv||[])i.addSimulcastAlternativeStreams(Bi.RECV,e.map(zi.expand));return i},Ui.clone=function(t){return"SimulcastInfo"===t.constructor.name?t.clone():Ui.expand(t)};var Qi=Ui;const Fi=ni("SENDRECV","SENDONLY","RECVONLY","INACTIVE");Fi.byValue=function(t){return Fi[t.toUpperCase()]},Fi.toString=function(t){switch(t){case Fi.SENDRECV:return"sendrecv";case Fi.SENDONLY:return"sendonly";case Fi.RECVONLY:return"recvonly";case Fi.INACTIVE:return"inactive"}},Fi.reverse=function(t){switch(t){case Fi.SENDRECV:return Fi.SENDRECV;case Fi.SENDONLY:return Fi.RECVONLY;case Fi.RECVONLY:return Fi.SENDONLY;case Fi.INACTIVE:return Fi.INACTIVE}};var Yi=Fi;let Vi=class t{clone(){return new t(this.port,this.maxMessageSize)}plain(){return{port:this.port,maxMessageSize:this.maxMessageSize}}getPort(){return this.port}getMaxMessageSize(){return this.maxMessageSize}constructor(t,i){this.port=t,this.maxMessageSize=i}};Vi.expand=function(t){return"DataChannelInfo"===t.constructor.name?t:new Vi(t.port,t.maxMessageSize)},Vi.clone=function(t){return"DataChannelInfo"===t.constructor.name?t.clone():Vi.expand(t)};var Gi=Vi;const Wi=si,Zi=Oi,Hi=Qi,Xi=Yi,qi=xi,Ki=Gi;let Ji=class t{clone(){const i=new t(this.id,this.type);i.setDirection(this.direction),i.setBitrate(this.bitrate);for(const t of this.codecs.values())i.addCodec(t.clone());for(const[t,e]of this.extensions.entries())i.addExtension(t,e);for(const t of this.rids.values())i.addRID(t.clone());return this.simulcast&&i.setSimulcast(this.simulcast.clone()),this.control&&i.setControl(this.control),this.dataChannel&&i.setDataChannel(this.dataChannel.clone()),i}plain(){const t={id:this.id,type:this.type,direction:Xi.toString(this.direction),codecs:[]};this.dataChannel&&(t.dataChannel=this.dataChannel.plain()),this.bitrate&&(t.bitrate=this.bitrate);for(const i of this.codecs.values())t.codecs.push(i.plain());for(const[i,e]of this.extensions.entries())t.extensions||(t.extensions={}),t.extensions[i]=e;for(const i of this.rids.values())t.rids||(t.rids=[]),t.rids.push(i.plain());return this.simulcast&&(t.simulcast=this.simulcast.plain()),this.control&&(t.control=this.control),t}getType(){return this.type}getId(){return this.id}setId(t){this.id=t}addExtension(t,i){this.extensions.set(t,i)}addRID(t){this.rids.set(t.getId(),t)}addCodec(t){this.codecs.set(t.getType(),t)}setCodecs(t){this.codecs=t}getCodecForType(t){return this.codecs.get(t)}getCodec(t){for(const i of this.codecs.values())if(i.getCodec().toLowerCase()===t.toLowerCase())return i;return null}hasCodec(t){return null!==this.getCodec(t)}getCodecs(){return this.codecs}hasRTX(){for(const t of this.codecs.values())if(t.hasRTX())return!0;return!1}getExtensions(){return this.extensions}getRIDs(){return this.rids}getRID(t){return this.rids.get(t)}getBitrate(){return this.bitrate}setBitrate(t){this.bitrate=t}getDirection(){return this.direction}setDirection(t){this.direction=t}hasControl(){return!!this.control}getControl(){return this.control}setControl(t){this.control=t}hasDataChannel(){return!!this.dataChannel}getDataChannel(){return this.dataChannel}setDataChannel(t){this.dataChannel=t}answer(i){const e=new t(this.id,this.type);if(i){e.setDirection(Xi.reverse(this.direction));const{codecs:t,dataChannel:s}=i;if(t){let s;s=Array.isArray(t)?Wi.MapFromNames(t,i.rtx,i.rtcpfbs):t;for(let t of this.codecs.values())for(let i of s.values()){if(i.getCodec().toLowerCase()!==t.getCodec().toLowerCase()||"h264"===i.getCodec()&&i.hasParam("packetization-mode")&&i.getParam("packetization-mode")!=t.getParam("packetization-mode","0")||"h264"===i.getCodec()&&i.hasParam("profile-level-id")&&t.hasParam("profile-level-id")&&i.getParam("profile-level-id")!=t.getParam("profile-level-id")||"multiopus"===i.getCodec()&&i.hasParam("num_streams")&&t.hasParam("num_streams")&&i.getParam("num_streams")!=t.getParam("num_streams"))continue;const s=i.clone();s.setType(t.getType()),s.hasRTX()&&s.setRTX(t.getRTX()),t.hasChannels()&&s.setChannels(t.getChannels()),s.addParams(t.getParams()),e.addCodec(s);break}}const n=new Set(i.extensions);for(let[t,i]of this.extensions)n.has(i)&&e.addExtension(t,i);if(i.simulcast&&this.simulcast){const t=new Hi,i=this.simulcast.getSimulcastStreams(qi.SEND);if(i)for(const e of i){const i=e.map((t=>t.clone()));t.addSimulcastAlternativeStreams(qi.RECV,i)}const s=this.simulcast.getSimulcastStreams(qi.RECV);if(s)for(const i of s){const e=i.map((t=>t.clone()));t.addSimulcastAlternativeStreams(qi.SEND,e)}for(const t of this.rids.values()){const i=t.clone();i.setDirection(qi.reverse(t.getDirection())),e.addRID(i)}e.setSimulcast(t)}if(s&&this.dataChannel){const t=new Ki(this.dataChannel.getPort(),s.maxMessageSize?s.maxMessageSize:this.dataChannel.getMaxMessageSize());e.setDataChannel(t)}}else e.setDirection(Xi.INACTIVE);return e}getSimulcast(){return this.simulcast}setSimulcast(t){this.simulcast=t}constructor(t,i){this.id=t,this.type=i,this.direction=Xi.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.bitrate=0,this.control=null,this.dataChannel=null}};function $i(t){const i=t.toString();if(!/^\d+$/.test(i))throw new b("invalid integer ".concat(i));return C(i)}Ji.create=function(t,i,e){!e&&"string"!=typeof i&&(e=i,i=t);const s=new Ji(t,i);if(e){const{codecs:t}=e;t&&(Array.isArray(t)?s.setCodecs(Wi.MapFromNames(t,e.rtx,e.rtcpfbs)):s.setCodecs(t))}else s.setDirection(Xi.INACTIVE);return s},Ji.expand=function(t){if("MediaInfo"===t.constructor.name)return t;const i=new Ji(t.id,t.type);if(t.direction&&i.setDirection(Xi.byValue(t.direction)),i.setBitrate(t.bitrate),t.dataChannel){const e=Ki.expand(t.dataChannel);e&&i.setDataChannel(e)}for(const[e,s]of _.entries(t.extensions))i.addExtension($i(e),s);for(const e of t.codecs){const t=Wi.expand(e);t&&i.addCodec(t)}for(const e of t.rids||[]){const t=Zi.expand(e);i.addRID(t)}return t.simulcast&&i.setSimulcast(Hi.expand(t.simulcast)),t.control&&i.setControl(t.control),i},Ji.clone=function(t){return"MediaInfo"===t.constructor.name?t.clone():Ji.expand(t)};var te=Ji;let ie=class t{clone(){return new t(this.semantics,this.ssrcs)}plain(){const t={semantics:this.semantics,ssrcs:[]};for(let i=0;i<this.ssrcs.length;++i)t.ssrcs.push(this.ssrcs[i]);return t}getSemantics(){return this.semantics}getSSRCs(){return this.ssrcs}constructor(t,i){this.semantics=t,this.ssrcs=[];for(let t=0;t<i.length;++t)this.ssrcs.push(C(i[t]))}};ie.expand=function(t){return"SourceGroupInfo"===t.constructor.name?t:new ie(t.semantics,t.ssrcs)},ie.clone=function(t){return"SourceGroupInfo"===t.constructor.name?t.clone():ie.expand(t)};var ee=ie;let se=class t{clone(){const i=new t(this.ssrc);return i.setCName(this.cname),i.setStreamId(this.streamId),i.setTrackId(this.trackId),i}plain(){const t={ssrc:this.ssrc};return this.cname&&(t.cname=this.cname),this.streamId&&(t.streamId=this.streamId),this.trackId&&(t.trackId=this.trackId),t}getCName(){return this.cname}setCName(t){this.cname=t}getStreamId(){return this.streamId}setStreamId(t){this.streamId=t}getTrackId(){return this.trackId}setTrackId(t){this.trackId=t}getSSRC(){return this.ssrc}constructor(t){this.ssrc=t}};se.expand=function(t){if("SourceInfo"===t.constructor.name)return t;const i=new se(t.ssrc);return i.setCName(t.cname),i.setStreamId(t.streamId),i.setTrackId(t.trackId),i},se.clone=function(t){return"SourceInfo"===t.constructor.name?t.clone():se.expand(t)};var ne=se;const re=si;let oe=class t{clone(){var i=new t(this.id,this.paused);for(let t of this.codecs.values())i.addCodec(t.clone());return i.setParams(this.params),i}plain(){var t={id:this.id,paused:this.paused,codecs:{},params:{}};for(var[i,e]of this.codecs.entries())t.codecs[i]=e.plain();for(var[i,s]of this.params.entries())t.params[i]=s;return t}getId(){return this.id}getCodecs(){return this.codecs}addCodec(t){this.codecs.set(t.getType(),t)}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,i){this.params.set(t,i)}isPaused(){return this.paused}constructor(t,i=!1){this.id=t,this.paused=i,this.codecs=new Map,this.params=new Map}};oe.expand=function(t){if("TrackEncodingInfo"===t.constructor.name)return t;const i=new oe(t.id,t.paused);for(const e of _.values(t.codecs||{}))i.addCodec(re.expand(e));for(const[e,s]of _.entries(t.params||{}))i.addParam(e,s);return i},oe.clone=function(t){return"TrackEncodingInfo"===t.constructor.name?t.clone():oe.expand(t)};var he=oe;const ae=ee,ue=he;let ce=class t{clone(){const i=new t(this.media,this.id);this.mediaId&&i.setMediaId(this.mediaId);for(let t=0;t<this.ssrcs.length;++t)i.addSSRC(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)i.addSourceGroup(this.groups[t].clone());for(let t=0;t<this.encodings.length;++t){const e=[];for(let i=0;i<this.encodings[t].length;++i)e.push(this.encodings[t][i].clone());i.addAlternativeEncodings(e)}return i}plain(){const t={media:this.media,id:this.id,ssrcs:[]};this.mediaId&&(t.mediaId=this.mediaId);for(let i=0;i<this.ssrcs.length;++i)t.ssrcs.push(this.ssrcs[i]);for(let i=0;i<this.groups.length;++i)t.groups||(t.groups=[]),t.groups.push(this.groups[i].plain());for(let i=0;i<this.encodings.length;++i){const e=[];for(let t=0;t<this.encodings[i].length;++t)e.push(this.encodings[i][t].plain());e.length&&(t.encodings||(t.encodings=[]),t.encodings.push(e))}return t}getMedia(){return this.media}setMediaId(t){this.mediaId=t}getMediaId(){return this.mediaId}getId(){return this.id}addSSRC(t){this.ssrcs.push(t)}getSSRCs(){return this.ssrcs}addSourceGroup(t){this.groups.push(t)}getSourceGroup(t){for(const i of this.groups)if(i.getSemantics().toLowerCase()===t.toLowerCase())return i;return null}getSourceGroups(){return this.groups}getSourceGroupsForMediaSSRC(t){return this.groups.filter((i=>i.getSSRCs()[0]===t))}hasSourceGroup(t){for(const i of this.groups)if(i.getSemantics().toLowerCase()===t.toLowerCase())return!0;return!1}getEncodings(){return this.encodings}addEncoding(t){this.encodings.push([t])}addAlternativeEncodings(t){this.encodings.push(t)}setEncodings(t){this.encodings=t}getEncodingSources(){const t=[];if(this.encodings.length)for(const i of this.encodings)for(const e of i){const i={id:e.getId(),rid:e.getId()},s=e.getParams(),n=null==s?void 0:s.get("ssrc");if(void 0!==n){i.media=C(n);for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}}t.push(i)}else if(this.hasSourceGroup("SIM")){const i=this.getSourceGroup("SIM").getSSRCs();this.getSourceGroups();for(const e of i){const i={id:String(e),media:e};for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}t.push(i)}}else{const i={id:""};if(this.ssrcs.length){i.media=this.ssrcs[0];for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}}t.push(i)}return t}constructor(t,i){this.media=t,this.id=i,this.ssrcs=[],this.groups=[],this.encodings=[]}};ce.expand=function(t){var i,e;if("TrackInfo"===t.constructor.name)return t;const s=new ce(t.media,t.id);if(t.mediaId&&s.setMediaId(t.mediaId),Array.isArray(t.ssrcs))for(const i of t.ssrcs)s.addSSRC(i);else if(void 0!==(null===(i=t.ssrcs)||void 0===i?void 0:i.media)){const i=t.ssrcs.media;if(s.addSSRC(i),void 0!==t.ssrcs.rtx){const e=t.ssrcs.rtx;s.addSSRC(e),s.addSourceGroup(new ae("FID",[i,e]))}if(void 0!==t.ssrcs.fec){const e=t.ssrcs.fec;s.addSSRC(e),s.addSourceGroup(new ae("FEC-FR",[i,e]))}}if(t.rid){const i=new ue(t.rid);void 0!==(null===(e=t.ssrcs)||void 0===e?void 0:e.media)&&i.addParam("ssrc",t.ssrcs.media),s.addAlternativeEncodings([i])}for(const i of t.groups||[])s.addSourceGroup(ae.expand(i));for(const i of t.encodings||[]){const t=[];for(const e of i)t.push(ue.expand(e));s.addAlternativeEncodings(t)}return s},ce.clone=function(t){return"TrackInfo"===t.constructor.name?t.clone():ce.expand(t)};var le=ce;const de=le;let fe=class t{clone(){const i=new t(this.id);for(const t of this.tracks.values())i.addTrack(t.clone());return i}plain(){const t={id:this.id,tracks:[]};for(const i of this.tracks.values())t.tracks.push(i.plain());return t}getId(){return this.id}addTrack(t){this.tracks.set(t.getId(),t)}removeTrack(t){return this.tracks.delete(t.getId())}removeTrackById(t){return this.tracks.delete(t)}getFirstTrack(t){for(let i of this.tracks.values())if(i.getMedia().toLowerCase()===t.toLowerCase())return i;return null}getTracks(){return this.tracks}removeAllTracks(){this.tracks.clear()}getTrack(t){return this.tracks.get(t)}constructor(t){this.id=t,this.tracks=new Map}};fe.expand=function(t){if("StreamInfo"===t.constructor.name)return t;const i=new fe(t.id);for(const e of t.tracks||[]){const t=de.expand(e);t&&i.addTrack(t)}return i},fe.clone=function(t){return"StreamInfo"===t.constructor.name?t.clone():fe.expand(t)};var ge=fe;const _e=zt,ve=function(t){const i=new Intl.Collator(t,{sensitivity:"base"});return(t,e)=>0==i.compare(t,e)}("en-US"),we=Jt,me=si,pe=ti,Ae=ui,ye=li,be=ki,Me=te,Te=oi,Se=Yi,Ne=xi,Ie=ee,De=ne,Ee=ge,ke=le,Le=he,xe=Qi,Ce=Pi,je=Oi,Oe=Gi;let Re=class t{clone(){const i=new t(this.version);for(const t of this.medias)i.addMedia(t.clone());for(const t of this.streams.values())i.addStream(t.clone());for(const t of this.candidates)i.addCandidate(t.clone());return i.setICE(this.ice.clone()),this.dtls&&i.setDTLS(this.dtls.clone()),this.crypto&&i.setCrypto(this.crypto.clone()),i.setExtmapAllowMixed(this.extmapAllowMixed),i}plain(){const t={version:this.version,streams:[],medias:[],candidates:[]};for(const i of this.medias)t.medias.push(i.plain());for(const i of this.streams.values())t.streams.push(i.plain());for(const i of this.candidates)t.candidates.push(i.plain());return this.ice&&(t.ice=this.ice.plain()),this.dtls&&(t.dtls=this.dtls.plain()),this.crypto&&(t.crypto=this.crypto.plain()),this.extmapAllowMixed||(t.extmapAllowMixedNotSupported=!this.extmapAllowMixed),t}unify(){const i=new t(this.version);for(const t of this.medias)i.addMedia(t.clone());const e={audio:i.getMediasByType("audio"),video:i.getMediasByType("video")};for(const t of this.streams.values()){const s=t.clone();for(const t of s.getTracks().values()){let s=e[t.getMedia()].pop();s||(s=this.getMedia(t.getMedia()).clone(),s.setId(t.getId()),i.addMedia(s)),t.setMediaId(s.getId())}i.addStream(s)}for(const t of this.candidates)i.addCandidate(t.clone());return this.ice&&i.setICE(this.ice.clone()),this.dtls&&i.setDTLS(this.dtls.clone()),this.crypto&&i.setCrypto(this.crypto.clone()),i}setVersion(t){this.version=t}addMedia(t){this.medias.push(t)}getMedia(t){for(let i in this.medias){let e=this.medias[i];if(ve(e.getType(),t))return e}return null}getMediasByType(t){let i=[];for(let e in this.medias){let s=this.medias[e];ve(s.getType(),t)&&i.push(s)}return i}getMediaById(t){for(const i of this.medias)if(ve(i.getId(),t))return i;return null}replaceMedia(t){for(let i in this.medias)if(this.medias[i].getId()==t.getId())return this.medias[i]=t,!0;return!1}getMedias(){return this.medias}getVersion(){return this.version}getDTLS(){return this.dtls}setDTLS(t){this.dtls=t}hasCrypto(){return!!this.crypto}getCrypto(){return this.crypto}setCrypto(t){this.crypto=t}hasICE(){return!!this.ice}getICE(){return this.ice}setICE(t){this.ice=t}addCandidate(t){for(const i of this.candidates)if(i.equals(t))return;this.candidates.push(t)}addCandidates(t){for(const i of t)this.addCandidate(i)}getCandidates(){return this.candidates}getStream(t){return this.streams.get(t)}getStreams(){return this.streams}getFirstStream(){for(const t of this.streams.values())return t;return null}addStream(t){this.streams.set(t.getId(),t)}removeStream(t){return this.streams.delete(t.getId())}removeAllStreams(){this.streams.clear()}getTracksByMediaType(t){let i=[];for(const e of this.streams.values())for(const[s,n]of e.getTracks())ve(n.getMedia(),t)&&i.push(n);return i}getTrackByMediaId(t){for(const i of this.streams.values())for(const[e,s]of i.getTracks())if(s.getMediaId()==t)return s;return null}getStreamByMediaId(t){for(const i of this.streams.values())for(const[e,s]of i.getTracks())if(s.getMediaId()==t)return i;return null}getExtmapAllowMixed(){return this.extmapAllowMixed}setExtmapAllowMixed(t){this.extmapAllowMixed=t}answer(i){const e=new t;i.ice&&(i.ice instanceof be?e.setICE(i.ice.clone()):e.setICE(be.expand(i.ice))),i.dtls&&(i.dtls instanceof Ae?e.setDTLS(i.dtls):e.setDTLS(Ae.expand(i.dtls))),i.crypto&&(i.crypto instanceof ye?e.setCrypto(i.crypto):e.setCrypto(ye.expand(i.crypto)));for(let t=0;i.candidates&&t<i.candidates.length;++t)i.candidates[t]instanceof we?e.addCandidate(i.candidates[t].clone()):e.addCandidate(we.expand(i.candidates[t]));for(const t of this.medias){const s=i&&i.capabilities&&i.capabilities[t.getType()];e.addMedia(t.answer(s))}return e.setExtmapAllowMixed(this.extmapAllowMixed),e}toString(){let t={version:0,media:[]};t.version=0,t.origin={username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},t.name="semantic-sdp",t.connection={version:4,ip:"0.0.0.0"},t.timing={start:0,stop:0},this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),t.msidSemantic={semantic:"WMS",token:"*"},t.groups=[],this.extmapAllowMixed&&(t.extmapAllowMixed="extmap-allow-mixed");const i=[];for(const e of this.medias){let s={type:e.getType(),port:9,protocol:"",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};s.direction=Se.toString(e.getDirection()),this.extmapAllowMixed&&(s.extmapAllowMixed="extmap-allow-mixed"),s.mid=e.getId(),i.push(e.getId()),e.hasControl()&&(s.control=e.getControl()),e.getBitrate()>0&&(s.bandwidth.push({type:"AS",limit:e.getBitrate()}),s.bandwidth.push({type:"TIAS",limit:1e3*e.getBitrate()}));let n=this.getCandidates();for(const t of n)s.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});if(this.getICE()&&(s.iceUfrag=this.getICE().getUfrag(),s.icePwd=this.getICE().getPwd()),ve("audio",e.getType())||ve("video",e.getType())){s.rtcpMux="rtcp-mux",s.rtcpRsize="rtcp-rsize",this.getDTLS()?(s.protocol="UDP/TLS/RTP/SAVPF",s.fingerprint={type:this.getDTLS().getHash(),hash:this.getDTLS().getFingerprint()},s.setup=Te.toString(this.getDTLS().getSetup())):this.getCrypto()?(s.protocol="RTP/SAVPF",s.crypto=[{id:this.getCrypto().getTag(),suite:this.getCrypto().getSuite(),config:this.getCrypto().getKeyParams()}]):s.protocol="RTP/AVP";for(const t of e.getCodecs().values()){ve("video",e.getType())?s.rtp.push({payload:t.getType(),codec:t.getCodec().toUpperCase(),rate:9e4}):ve("opus",t.getCodec())||ve("multiopus",t.getCodec())?s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:48e3,encoding:t.getChannels()}):s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:8e3});for(const i of t.getRTCPFeedbacks())s.rtcpFb.push({payload:t.getType(),type:i.getId(),subtype:i.getParams().join(" ")});t.hasRTX()&&(s.rtp.push({payload:t.getRTX(),codec:"rtx",rate:9e4}),s.fmtp.push({payload:t.getRTX(),config:"apt="+t.getType()}));const i=t.getParams();if(_.keys(i).length){const e={payload:t.getType(),config:""};for(const t in i)e.config.length&&(e.config+=";"),_.hasOwnProperty.call(i,t)?e.config+=t+"="+i[t]:e.config+=t;s.fmtp.push(e)}}const t=[];for(const i of s.rtp)t.push(i.payload);s.payloads=t.join(" ");for(let[t,i]of e.getExtensions().entries())s.ext.push({value:t,uri:i});for(let t of e.getRIDs().values()){let i={id:t.getId(),direction:Ne.toString(t.getDirection()),params:""};t.getFormats().length&&(i.params="pt="+t.getFormats().join(","));for(let[e,s]of t.getParams().entries())i.params+=(i.params.length?";":"")+e+"="+s;s.rids.push(i)}const i=e.getSimulcast();if(i){let t=1;s.simulcast={};const e=i.getSimulcastStreams(Ne.SEND),n=i.getSimulcastStreams(Ne.RECV);if(e&&e.length){let i="";for(const t of e){let e="";for(const i of t)e+=(e.length?",":"")+(i.isPaused()?"~":"")+i.getId();i+=(i.length?";":"")+e}s.simulcast["dir"+t]="send",s.simulcast["list"+t]=i,t++}if(n&&n.length){let i="";for(const t of n){let e="";for(const i of t)e+=(e.length?",":"")+(i.isPaused()?"~":"")+i.getId();i+=(i.length?";":"")+e}s.simulcast["dir"+t]="recv",s.simulcast["list"+t]=i,t++}}}else if(e.hasDataChannel()){s.protocol="UDP/DTLS/SCTP",s.payloads="webrtc-datachannel";const t=e.getDataChannel();s.sctpPort=t.getPort(),s.maxMessageSize=t.getMaxMessageSize()}t.media.push(s)}for(let i of this.streams.values())for(let e of i.getTracks().values())for(let s in t.media){let n=t.media[s];if(e.getMediaId()){if(e.getMediaId()==n.mid){let t=e.getSourceGroups();for(let i in t){let e=t[i];n.ssrcGroups.push({semantics:e.getSemantics(),ssrcs:e.getSSRCs().join(" ")})}let s=e.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:i.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:i.getId()+" "+e.getId()});n.msid=i.getId()+" "+e.getId();break}}else if(ve(n.type,e.getMedia())){let t=e.getSourceGroups();for(let i in t){let e=t[i];n.ssrcGroups.push({semantics:e.getSemantics(),ssrcs:e.getSSRCs().join(" ")})}let s=e.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:i.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:i.getId()+" "+e.getId()});break}}const e={type:"BUNDLE",mids:i.join(" ")};return t.groups.push(e),_e.write(t)}toIceFragmentString(){let t={version:0,media:[],candidates:[]};this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),this.getICE()&&(t.iceUfrag=this.getICE().getUfrag(),t.icePwd=this.getICE().getPwd());for(const i of this.getCandidates())t.candidates.push({foundation:i.getFoundation(),component:i.getComponentId(),transport:i.getTransport(),priority:i.getPriority(),ip:i.getAddress(),port:i.getPort(),type:i.getType(),raddr:i.getRelAddr(),rport:i.getRelPort()});return _e.write(t).slice(10)}constructor(t){this.version=t||1,this.streams=new Map,this.medias=new Array,this.candidates=new Array,this.ice=null,this.dtls=null,this.crypto=null,this.extmapAllowMixed=!0}};Re.create=function(t){var i;const e=new Re;if(t.streams)for(const i of t.streams)e.addStream(Ee.expand(i));t.ice&&(t.ice instanceof be?e.setICE(t.ice.clone()):e.setICE(be.expand(t.ice))),t.dtls&&(t.dtls instanceof Ae?e.setDTLS(t.dtls):e.setDTLS(Ae.expand(t.dtls))),t.crypto&&(t.crypto instanceof ye?e.setCrypto(t.crypto):e.setCrypto(ye.expand(t.crypto)));for(const i of t.candidates||[])i instanceof we?e.addCandidate(i.clone()):e.addCandidate(we.expand(i));let s=96,n=1,r=0;for(const[o,h]of _.entries(t.capabilities||{}))if(t.unified&&null!==(i=t.streams)&&void 0!==i&&i.length)for(const t of e.getTracksByMediaType(o)){const i=Me.create(t.getMediaId(),o,h);for(const[t,e]of i.getCodecs())e.getType()>=96&&e.setType(s++),e.getRTX()&&e.setRTX(s++);if(h.extensions)for(let t of h.extensions)15===n&&n++,i.addExtension(n++,t);e.addMedia(i)}else{const i=Me.create(t.unified?String(r++):o,o,h);for(const[t,e]of i.getCodecs())e.getType()>=96&&e.setType(s++),e.getRTX()&&e.setRTX(s++);if(h.extensions)for(let t of h.extensions)15===n&&n++,i.addExtension(n++,t);e.addMedia(i)}return e},Re.expand=function(t){if("SDPInfo"===t.constructor.name)return t;const i=new Re(t.version);for(const e of t.medias||[]){const t=Me.expand(e);t&&i.addMedia(t)}for(const e of t.streams||[]){const t=Ee.expand(e);t&&i.addStream(t)}for(const e of t.candidates||[]){const t=we.expand(e);t&&i.addCandidate(t)}return t.ice&&i.setICE(be.expand(t.ice)),t.dtls&&i.setDTLS(Ae.expand(t.dtls)),t.crypto&&i.setCrypto(ye.expand(t.crypto)),t.extmapAllowMixedNotSupported&&(this.extmapAllowMixed=!t.extmapAllowMixedNotSupported),i},Re.clone=function(t){return"SDPInfo"===t.constructor.name?t.clone():Re.expand(t)},Re.process=function(t){return Re.parse(t)},Re.parse=function(t){const i=_e.parse(t),e=new Re;if(e.setVersion(i.version),i.iceUfrag&&i.icePwd){const t=String(i.iceUfrag),s=String(i.icePwd),n=new be(t,s);n.setLite("ice-lite"==i.icelite),n.setEndOfCandidates("end-of-candidates"==i.endOfCandidates),e.setICE(n)}for(let t in i.media){const s=i.media[t],n=s.type,r=s.mid?s.mid.toString():t,o=new Me(r,n);if(s.iceUfrag&&s.icePwd){const t=String(s.iceUfrag),n=String(s.icePwd),r=new be(t,n);r.setLite("ice-lite"==i.icelite),r.setEndOfCandidates("end-of-candidates"==s.endOfCandidates),e.setICE(r)}for(let t=0;s.candidates&&t<s.candidates.length;++t){const i=s.candidates[t],n=new we(i.foundation,i.component,i.transport,i.priority,i.ip,i.port,i.type,i.raddr,i.rport);e.addCandidate(n)}const h=s.fingerprint||i.fingerprint;if(h){const t=h.type,i=h.hash;let n=Te.ACTPASS;s.setup&&(n=Te.byValue(s.setup)),e.setDTLS(new Ae(n,t,i))}if(s.crypto){const t=s.crypto[0];e.setCrypto(new ye(t.id,t.suite,t.config,t.sessionConfig))}let a=Se.SENDRECV;s.direction&&(a=Se.byValue(s.direction),o.setDirection(a)),s.control&&o.setControl(s.control),e.setExtmapAllowMixed("extmap-allow-mixed"==s.extmapAllowMixed||"extmap-allow-mixed"==i.extmapAllowMixed);const u=new Map;for(let t in s.rtp){const i=s.rtp[t],e=i.payload,n=i.codec;if("RED"===n.toUpperCase()||"ULPFEC"===n.toUpperCase())continue;let r={};for(let t in s.fmtp){const i=s.fmtp[t];if(i.payload===e){const t=i.config.split(";");for(let i in t){const e=t[i].split("="),s=e[0].trim(),n=e.splice(1).join("=").trim();r[s]=n}}}if("RTX"===n.toUpperCase())u.set(C(r.apt),e);else{const t=new me(n,e,r);i.encoding>1&&t.setChannels(i.encoding),o.addCodec(t)}}for(let t of u.entries()){const i=o.getCodecForType(t[0]);i&&i.setRTX(t[1])}for(let t=0;s.rtcpFb&&t<s.rtcpFb.length;++t){const i=o.getCodecForType(s.rtcpFb[t].payload);if(i){const e=s.rtcpFb[t].type,n=s.rtcpFb[t].subtype?s.rtcpFb[t].subtype.split(" "):null;i.addRTCPFeedback(new pe(e,n))}}const c=s.ext;for(let t in c){const i=c[t];o.addExtension(i.value,i.uri)}const l=s.rids;for(let t in l){const i=l[t],e=new je(i.id,Ne.byValue(i.direction));let s=[];const n=new Map;if(i.params){const t=_e.parseParams(i.params);for(let i in t)"pt"===i?s=t[i].split(","):n.set(i,t[i]);e.setFormats(s),e.setParams(n)}o.addRID(e)}const d=[];if(s.simulcast){const t=new xe;if(s.simulcast.dir1){const i=Ne.byValue(s.simulcast.dir1),e=_e.parseSimulcastStreamList(s.simulcast.list1);for(let s=0;s<e.length;++s){const n=[];for(let t=0;t<e[s].length;++t)n.push(new Ce(e[s][t].scid,e[s][t].paused));t.addSimulcastAlternativeStreams(i,n)}}if(s.simulcast.dir2){const i=Ne.byValue(s.simulcast.dir2),e=_e.parseSimulcastStreamList(s.simulcast.list2);for(let s=0;s<e.length;++s){const n=[];for(let t=0;t<e[s].length;++t)n.push(new Ce(e[s][t].scid,e[s][t].paused));t.addSimulcastAlternativeStreams(i,n)}}for(let i of t.getSimulcastStreams(Ne.SEND)){const t=[];for(let e=0;e<i.length;e++){const s=new Le(i[e].getId(),i[e].isPaused()),n=o.getRID(s.getId());if(n){const i=n.getFormats();for(let t=0;i&&t<i.length;++t){const e=o.getCodecForType(i[t]);e&&s.addCodec(e)}s.setParams(n.getParams()),t.push(s)}}t.length&&d.push(t)}o.setSimulcast(t)}const f=new Map;if(s.ssrcs)for(let t in s.ssrcs){let i=s.ssrcs[t],o=i.id,h=i.attribute,a=i.value,u=f.get(o);if(u||(u=new De(o),f.set(u.getSSRC(),u)),ve("cname",h))u.setCName(a);else if(ve("msid",h)){let t=a.split(" "),i=t[0],s=t[1];u.setStreamId(i),u.setTrackId(s);let h=e.getStream(i);h||(h=new Ee(i),e.addStream(h));let c=h.getTrack(s);c||(c=new ke(n,s),c.setMediaId(r),c.setEncodings(d),h.addTrack(c)),c.addSSRC(o)}}if(s.msid){let t=s.msid.split(" "),i=t[0],o=t[1],h=e.getStream(i);h||(h=new Ee(i),e.addStream(h));let a=h.getTrack(o);a||(a=new ke(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a));for(let[t,e]of f.entries())e.getStreamId()||(e.setStreamId(i),e.setTrackId(o),a.addSSRC(t))}for(let[t,i]of f.entries())if(!i.getStreamId()){let s=i.getCName(),o=r;i.setStreamId(s),i.setTrackId(o);let h=e.getStream(s);h||(h=new Ee(s),e.addStream(h));let a=h.getTrack(o);a||(a=new ke(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a)),a.addSSRC(t)}if(s.ssrcGroups)for(let t in s.ssrcGroups){let i=s.ssrcGroups[t],n=i.ssrcs.split(" "),r=new Ie(i.semantics,n),o=f.get(C(n[0]));o&&e.getStream(o.getStreamId()).getTrack(o.getTrackId()).addSourceGroup(r)}if("application"==s.type&&"webrtc-datachannel"==s.payloads){const t=new Oe(s.sctpPort,s.maxMessageSize);o.setDataChannel(t)}e.addMedia(o)}return e};var Pe=Re;_.defineProperty(Pt,"__esModule",{value:!0});var ze=Pt.SDPInfo=Pe;Pt.CandidateInfo=Jt,Pt.CodecInfo=si,Pt.DTLSInfo=ui,Pt.CryptoInfo=li,Pt.ICEInfo=ki;var Be=Pt.MediaInfo=te;Pt.Setup=oi,Pt.SourceGroupInfo=ee,Pt.SourceInfo=ne,Pt.StreamInfo=ge,Pt.TrackInfo=le,Pt.RTCPFeedbackInfo=ti,Pt.TrackEncodingInfo=he,Pt.RIDInfo=Oi,Pt.SimulcastInfo=Qi,Pt.SimulcastStreamInfo=Pi,Pt.DataChannelInfo=Gi;var Ue=Pt.Direction=Yi,Qe={exports:{}};!function(t,i){!function(e,s){var n="function",r="undefined",o="object",h="string",a="major",u="model",c="name",l="type",d="vendor",f="version",g="architecture",_="console",v="mobile",w="tablet",m="smarttv",p="wearable",A="embedded",y="Amazon",b="Apple",M="ASUS",T="BlackBerry",S="Browser",N="Chrome",I="Firefox",D="Google",E="Huawei",k="LG",L="Microsoft",x="Motorola",C="Opera",j="Samsung",O="Sharp",R="Sony",P="Xiaomi",z="Zebra",B="Facebook",U="Chromium OS",Q="Mac OS",F=" Browser",Y=function(t){for(var i={},e=0;e<t.length;e++)i[t[e].toUpperCase()]=t[e];return i},V=function(t,i){return typeof t===h&&-1!==G(i).indexOf(G(t))},G=function(t){return t.toLowerCase()},W=function(t,i){if(typeof t===h)return t=t.replace(/^\s\s*/,""),typeof i===r?t:t.substring(0,500)},Z=function(t,i){for(var e,r,h,a,u,c,l=0;l<i.length&&!u;){var d=i[l],f=i[l+1];for(e=r=0;e<d.length&&!u&&d[e];)if(u=d[e++].exec(t))for(h=0;h<f.length;h++)c=u[++r],typeof(a=f[h])===o&&a.length>0?2===a.length?typeof a[1]==n?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==n||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):s:this[a[0]]=c?a[1].call(this,c,a[2]):s:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):s):this[a]=c||s;l+=2}},H=function(t,i){for(var e in i)if(typeof i[e]===o&&i[e].length>0){for(var n=0;n<i[e].length;n++)if(V(i[e][n],t))return"?"===e?s:e}else if(V(i[e],t))return"?"===e?s:e;return i.hasOwnProperty("*")?i["*"]:t},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,f],[/opios[\/ ]+([\w\.]+)/i],[f,[c,C+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[c,C+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[c,C]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[c,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[c,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[c,"UC"+S]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[c,"Smart Lenovo "+S]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+S],f],[/\bfocus\/([\w\.]+)/i],[f,[c,I+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[c,C+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[c,C+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI "+S]],[/fxios\/([-\w\.]+)/i],[f,[c,I]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360"+F]],[/\b(qq)\/([\w\.]+)/i],[[c,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1"+F],f],[/samsungbrowser\/([\w\.]+)/i],[f,[c,j+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[c,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,B],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[c,N+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,N+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[c,"Android "+S]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[f,H,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],f],[/(wolvic)\/([\w\.]+)/i],[c,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[c,I+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[c,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,G]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[d,j],[l,w]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[d,j],[l,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[d,b],[l,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[d,b],[l,w]],[/(macintosh);/i],[u,[d,b]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[d,O],[l,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[d,E],[l,w]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[d,E],[l,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[d,P],[l,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[d,P],[l,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[d,"OPPO"],[l,v]],[/\b(opd2\d{3}a?) bui/i],[u,[d,"OPPO"],[l,w]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[d,"Vivo"],[l,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[d,"Realme"],[l,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[d,x],[l,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[d,x],[l,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[d,k],[l,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[d,k],[l,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[d,"Lenovo"],[l,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[d,"Nokia"],[l,v]],[/(pixel c)\b/i],[u,[d,D],[l,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[d,D],[l,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,R],[l,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[d,R],[l,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[d,"OnePlus"],[l,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[d,y],[l,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[d,y],[l,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,d,[l,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[d,T],[l,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[d,M],[l,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[d,M],[l,v]],[/(nexus 9)/i],[u,[d,"HTC"],[l,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[u,/_/g," "],[l,v]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[d,"TCL"],[l,w]],[/(itel) ((\w+))/i],[[d,G],u,[l,H,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[d,"Acer"],[l,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[d,"Meizu"],[l,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[d,"Ulefone"],[l,v]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[d,"Nothing"],[l,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,u,[l,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,u,[l,w]],[/(surface duo)/i],[u,[d,L],[l,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[d,"Fairphone"],[l,v]],[/(u304aa)/i],[u,[d,"AT&T"],[l,v]],[/\bsie-(\w*)/i],[u,[d,"Siemens"],[l,v]],[/\b(rct\w+) b/i],[u,[d,"RCA"],[l,w]],[/\b(venue[\d ]{2,7}) b/i],[u,[d,"Dell"],[l,w]],[/\b(q(?:mv|ta)\w+) b/i],[u,[d,"Verizon"],[l,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[d,"Barnes & Noble"],[l,w]],[/\b(tm\d{3}\w+) b/i],[u,[d,"NuVision"],[l,w]],[/\b(k88) b/i],[u,[d,"ZTE"],[l,w]],[/\b(nx\d{3}j) b/i],[u,[d,"ZTE"],[l,v]],[/\b(gen\d{3}) b.+49h/i],[u,[d,"Swiss"],[l,v]],[/\b(zur\d{3}) b/i],[u,[d,"Swiss"],[l,w]],[/\b((zeki)?tb.*\b) b/i],[u,[d,"Zeki"],[l,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],u,[l,w]],[/\b(ns-?\w{0,9}) b/i],[u,[d,"Insignia"],[l,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[d,"NextBook"],[l,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],u,[l,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],u,[l,v]],[/\b(ph-1) /i],[u,[d,"Essential"],[l,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[d,"Envizen"],[l,w]],[/\b(trio[-\w\. ]+) b/i],[u,[d,"MachSpeed"],[l,w]],[/\btu_(1491) b/i],[u,[d,"Rotor"],[l,w]],[/(shield[\w ]+) b/i],[u,[d,"Nvidia"],[l,w]],[/(sprint) (\w+)/i],[d,u,[l,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,L],[l,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[d,z],[l,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[d,z],[l,v]],[/smart-tv.+(samsung)/i],[d,[l,m]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,j],[l,m]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,k],[l,m]],[/(apple) ?tv/i],[d,[u,b+" TV"],[l,m]],[/crkey/i],[[u,N+"cast"],[d,D],[l,m]],[/droid.+aft(\w+)( bui|\))/i],[u,[d,y],[l,m]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[d,O],[l,m]],[/(bravia[\w ]+)( bui|\))/i],[u,[d,R],[l,m]],[/(mitv-\w{5}) bui/i],[u,[d,P],[l,m]],[/Hbbtv.*(technisat) (.*);/i],[d,u,[l,m]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,W],[u,W],[l,m]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,u,[l,_]],[/droid.+; (shield) bui/i],[u,[d,"Nvidia"],[l,_]],[/(playstation [345portablevi]+)/i],[u,[d,R],[l,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[d,L],[l,_]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[d,j],[l,p]],[/((pebble))app/i],[d,u,[l,p]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[d,b],[l,p]],[/droid.+; (glass) \d/i],[u,[d,D],[l,p]],[/droid.+; (wt63?0{2,3})\)/i],[u,[d,z],[l,p]],[/(quest( \d| pro)?)/i],[u,[d,B],[l,p]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[l,A]],[/(aeobc)\b/i],[u,[d,y],[l,A]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[l,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[l,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,w]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[f,H,X]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,H,X],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,Q],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,f],[/\(bb(10);/i],[f,[c,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[c,I+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[c,N+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,U],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,f],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,f]]},K=function(t,i){if(typeof t===o&&(i=t,t=s),!(this instanceof K))return new K(t,i).getResult();var _=typeof e!==r&&e.navigator?e.navigator:s,m=t||(_&&_.userAgent?_.userAgent:""),p=_&&_.userAgentData?_.userAgentData:s,A=i?function(t,i){var e={};for(var s in t)i[s]&&i[s].length%2==0?e[s]=i[s].concat(t[s]):e[s]=t[s];return e}(q,i):q,y=_&&_.userAgent==m;return this.getBrowser=function(){var t={};return t[c]=s,t[f]=s,Z.call(t,m,A.browser),t[a]=function(t){return typeof t===h?t.replace(/[^\d\.]/g,"").split(".")[0]:s}(t[f]),y&&_&&_.brave&&typeof _.brave.isBrave==n&&(t[c]="Brave"),t},this.getCPU=function(){var t={};return t[g]=s,Z.call(t,m,A.cpu),t},this.getDevice=function(){var t={};return t[d]=s,t[u]=s,t[l]=s,Z.call(t,m,A.device),y&&!t[l]&&p&&p.mobile&&(t[l]=v),y&&"Macintosh"==t[u]&&_&&typeof _.standalone!==r&&_.maxTouchPoints&&_.maxTouchPoints>2&&(t[u]="iPad",t[l]=w),t},this.getEngine=function(){var t={};return t[c]=s,t[f]=s,Z.call(t,m,A.engine),t},this.getOS=function(){var t={};return t[c]=s,t[f]=s,Z.call(t,m,A.os),y&&!t[c]&&p&&p.platform&&"Unknown"!=p.platform&&(t[c]=p.platform.replace(/chrome os/i,U).replace(/macos/i,Q)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return m},this.setUA=function(t){return m=typeof t===h&&t.length>500?W(t,500):t,this},this.setUA(m),this};K.VERSION="0.7.39",K.BROWSER=Y([c,f,a]),K.CPU=Y([g]),K.DEVICE=Y([u,d,l,_,v,m,w,p,A]),K.ENGINE=K.OS=Y([c,f]),t.exports&&(i=t.exports=K),i.UAParser=K;var J=typeof e!==r&&(e.jQuery||e.Zepto);if(J&&!J.ua){var $=new K;J.ua=$.getResult(),J.ua.get=function(){return $.getUA()},J.ua.set=function(t){$.setUA(t);var i=$.getResult();for(var e in i)J.ua[e]=i[e]}}}("object"==typeof s?s:p)}(Qe,Qe.exports);const Fe=A(Qe.exports),Ye=["iOS"];class Ve extends Fe{isChromium(){return this.getUA().match(/Chrome/i)}isChrome(){const t=this.getBrowser();if(!t.name)return!1;const i=this.getOS();let e=!0;return e=!new RegExp(Ye.join("|"),"i").test(i.name),t.name.match(/Chrome/i)&&e}isFirefox(){const t=this.getBrowser();return!!t.name&&t.name.match(/Firefox/i)}isOpera(){const t=this.getBrowser();return!!t.name&&t.name.match(/Opera/i)}isSafari(){const t=this.getBrowser();return!!t.name&&t.name.match(/Safari/i)}constructor(){super(s.navigator.userAgent)}}const Ge=at.get("SdpParser"),We=Array.from({length:31},((t,i)=>i+35)),Ze=Array.from({length:32},((t,i)=>i+96)),He=Array.from({length:14},((t,i)=>i+1)),Xe=Array.from({length:240},((t,i)=>i+16)),qe={setSimulcast(t,i){if(Ge.info("Setting simulcast. Codec: ",i),!(new Ve).isChromium())return Ge.warn("Your browser does not appear to support Simulcast. For a better experience, use a Chromium based browser."),t;if("h264"!==i&&"vp8"!==i)return Ge.warn("Your selected codec ".concat(i," does not appear to support Simulcast.  To broadcast using simulcast, please use H.264 or VP8.")),t;if(!/m=video/.test(t))return Ge.warn("There is no available video for simulcast to be enabled."),t;try{const i=new RegExp("m=video.*?a=ssrc:(\\d*) cname:(.+?)\\r\\n","s"),e=new RegExp("m=video.*?a=ssrc:(\\d*) msid:(.+?)\\r\\n","s"),s=i.exec(t),n=s[1],r=s[2],o=e.exec(t)[2],h=2,a=[n];for(let i=0;i<h;++i){const e=100+2*i,s=e+1;a.push(e),t+="a=ssrc-group:FID "+e+" "+s+"\r\na=ssrc:"+e+" cname:"+r+"\r\na=ssrc:"+e+" msid:"+o+"\r\na=ssrc:"+s+" cname:"+r+"\r\na=ssrc:"+s+" msid:"+o+"\r\n"}return t+="a=ssrc-group:SIM "+a.join(" ")+"\r\n",Ge.info("Simulcast setted"),Ge.debug("Simulcast SDP: ",t),t}catch(t){throw Ge.error("Error setting SDP for simulcast: ",t),t}},setStereo:t=>(Ge.info("Replacing SDP response for support stereo"),t=t.replace(/useinbandfec=1/g,"useinbandfec=1; stereo=1"),Ge.info("Replaced SDP response for support stereo"),Ge.debug("New SDP value: ",t),t),setDTX:t=>(Ge.info("Replacing SDP response for support dtx"),t=t.replace("useinbandfec=1","useinbandfec=1; usedtx=1"),Ge.info("Replaced SDP response for support dtx"),Ge.debug("New SDP value: ",t),t),setAbsoluteCaptureTime(t){const i="a=extmap:"+qe.getAvailableHeaderExtensionIdRange(t)[0]+" http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,e,s)=>e+i+s)),Ge.info("Replaced SDP response for setting absolute capture time"),Ge.debug("New SDP value: ",t),t},setDependencyDescriptor(t){const i="a=extmap:"+qe.getAvailableHeaderExtensionIdRange(t)[0]+" https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,e,s)=>e+i+s)),Ge.info("Replaced SDP response for setting depency descriptor"),Ge.debug("New SDP value: ",t),t},setVideoBitrate(t,i){if(i<1)Ge.info("Remove bitrate restrictions"),t=t.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"");else{const e=ze.parse(t),s=e.getMedia("video");Ge.info("Setting video bitrate"),s.setBitrate(i),t=e.toString()}return t},removeSdpLine:(t,i)=>(Ge.debug("SDP before trimming: ",t),t=t.split("\n").filter((t=>t.trim()!==i)).join("\n"),Ge.debug("SDP trimmed result: ",t),t),adaptCodecName(t,i,e){if(!t)return t;const s=new RegExp("".concat(i),"i");return t.replace(s,e)},setMultiopus(t,i){if(!(new Ve).isFirefox()&&(!i||Ke(i)))if(t.includes("multiopus/48000/6"))Ge.info("Multiopus already setted");else{Ge.info("Setting multiopus");const i=/m=audio 9 UDP\/TLS\/RTP\/SAVPF (.*)\r\n/.exec(t)[0],e=qe.getAvailablePayloadTypeRange(t)[0],s=i.replace("\r\n"," ")+e+"\r\na=rtpmap:"+e+" multiopus/48000/6\r\na=fmtp:"+e+" channel_mapping=0,4,1,2,3,5;coupled_streams=2;minptime=10;num_streams=4;useinbandfec=1\r\n";t=t.replace(i,s),Ge.info("Multiopus offer created"),Ge.debug("SDP parsed for multioups: ",t)}return t},getAvailablePayloadTypeRange(t){const i=t.matchAll(/m=(?:.*) (?:.*) UDP\/TLS\/RTP\/SAVPF (.*)\r\n/gm);let e=Ze.concat(We);for(const t of i){const i=t[1].split(" ").map((t=>C(t)));e=e.filter((t=>!i.includes(t)))}return e},getAvailableHeaderExtensionIdRange(t){const i=t.matchAll(/a=extmap:(\d+)(?:.*)\r\n/gm);let e=He.concat(Xe);for(const t of i){const i=t[1].split(" ").map((t=>C(t)));e=e.filter((t=>!i.includes(t)))}return e},renegotiate(t,i){const e=ze.parse(t),s=ze.parse(i);for(const t of e.getMedias()){let i=s.getMediaById(t.getId());if(!i){i=new Be(t.getId(),t.getType()),i.setDirection(Ue.reverse(t.getDirection()));const e=s.getMedia(t.getType());if(e){i.setCodecs(e.getCodecs());for(const[t,s]of e.getExtensions())i.addExtension(t,s)}s.addMedia(i)}}return s.toString()},updateMissingVideoExtensions(t,i){var e;const s=ze.parse(t),n=null==(e=ze.parse(i).getMediasByType("video")[0])?void 0:e.getExtensions();if(n||n.length){for(const i of s.getMediasByType("video")){const e=i.getExtensions();n.forEach(((s,n)=>{if(!e.get(n)){const e=i.getId(),r="a=extmap:"+n+" "+s+"\r\n",o=new RegExp("(a=mid:"+e+"\r\n(?:.*\r\n)*?)","g");t=t.replace(o,((t,i,e)=>i+r))}}))}return t}},getCodecPayloadType(t){const i=t.matchAll(/a=rtpmap:(\d+) (\w+)\/\d+/g),e={};for(const t of i)e[t[1]]=t[2];return e}},Ke=t=>t.getAudioTracks().some((t=>t.getSettings().channelCount>2)),Je={VP8:"vp8",VP9:"vp9",H264:"h264",AV1:"av1",H265:"h265"},$e={OPUS:"opus",MULTIOPUS:"multiopus"},ts=at.get("PeerConnection"),is="Publisher",es="Viewer",ss={track:"track",connectionStateChange:"connectionStateChange"},ns={stereo:!1,mediaStream:null,codec:"h264",simulcast:!1,scalabilityMode:null,disableAudio:!1,disableVideo:!1,setSDPToPeer:!0};class rs extends Nt{async createRTCPeer(t,i){void 0===t&&(t={autoInitStats:!0,statsIntervalMs:1e3}),void 0===i&&(i=es),ts.info("Creating new RTCPeerConnection"),ts.debug("RTC configuration provided by user: ",t),this.peer=as(this,t),this.mode=i,t.autoInitStats&&this.initStats(t)}getRTCPeer(){return ts.info("Getting RTC Peer"),this.peer}async closeRTCPeer(){var t;ts.info("Closing RTCPeerConnection"),null==(t=this.peer)||t.close(),this.peer=null,this.stopStats(),this.emit(ss.connectionStateChange,"closed")}async setRTCRemoteSDP(t){ts.info("Setting RTC Remote SDP");const i={type:"answer",sdp:t};try{await this.peer.setRemoteDescription(i),ts.info("RTC Remote SDP was set successfully."),ts.debug("RTC Remote SDP new value: ",t)}catch(t){throw ts.error("Error while setting RTC Remote SDP: ",t),t}}async getRTCLocalSDP(t){void 0===t&&(t=ns),ts.info("Getting RTC Local SDP"),t=d(d({},ns),t),ts.debug("Options: ",t);const i=hs(t.mediaStream);i?ls(this.peer,i,t):ds(this.peer,t),ts.info("Creating peer offer");const e=await this.peer.createOffer();return ts.info("Peer offer created"),ts.debug("Peer offer response: ",e.sdp),this.sessionDescription=e,t.disableAudio||(t.stereo&&(this.sessionDescription.sdp=qe.setStereo(this.sessionDescription.sdp)),t.dtx&&(this.sessionDescription.sdp=qe.setDTX(this.sessionDescription.sdp)),this.sessionDescription.sdp=qe.setMultiopus(this.sessionDescription.sdp,i)),!t.disableVideo&&t.simulcast&&(this.sessionDescription.sdp=qe.setSimulcast(this.sessionDescription.sdp,t.codec)),t.absCaptureTime&&(this.sessionDescription.sdp=qe.setAbsoluteCaptureTime(this.sessionDescription.sdp)),t.dependencyDescriptor&&(this.sessionDescription.sdp=qe.setDependencyDescriptor(this.sessionDescription.sdp)),t.setSDPToPeer&&(await this.peer.setLocalDescription(this.sessionDescription),ts.info("Peer local description set")),this.sessionDescription.sdp}async addRemoteTrack(t,i){return new Promise(((e,s)=>{try{const s=this.peer.addTransceiver(t,{direction:"recvonly",streams:i});this.transceiverMap.set(s,e)}catch(t){s(t)}}))}updateBandwidthRestriction(t,i){if(this.mode===es)throw ts.error("Viewer attempting to update bitrate, this is not allowed"),new b("It is not possible for a viewer to update the bitrate.");return ts.info("Updating bandwidth restriction, bitrate value: ",i),ts.debug("SDP value: ",t),qe.setVideoBitrate(t,i)}async updateBitrate(t){if(void 0===t&&(t=0),this.mode===es)throw ts.error("Viewer attempting to update bitrate, this is not allowed"),new b("It is not possible for a viewer to update the bitrate.");if(!this.peer)throw ts.error("Cannot update bitrate. No peer found."),new b("Cannot update bitrate. No peer found.");ts.info("Updating bitrate to value: ",t),this.sessionDescription=await this.peer.createOffer(),await this.peer.setLocalDescription(this.sessionDescription);const i=this.updateBandwidthRestriction(this.peer.remoteDescription.sdp,t);await this.setRTCRemoteSDP(i),ts.info("Bitrate restrictions updated: ","".concat(t>0?t:"unlimited"," kbps"))}getRTCPeerStatus(){if(ts.info("Getting RTC peer status"),!this.peer)return null;const t=fs(this.peer);return ts.info("RTC peer status getted, value: ",t),t}replaceTrack(t){if(!this.peer)return void ts.error("Could not change track if there is not an active connection.");const i=this.peer.getSenders().find((i=>i.track.kind===t.kind));i?i.replaceTrack(t):ts.error("There is no ".concat(t.kind," track in active broadcast."))}static getCapabilities(t){const i=new Ve,e=RTCRtpSender.getCapabilities(t);if(e){const s={};let n=new RegExp("^video/(".concat(_.values(Je).join("|"),")x?$"),"i");"audio"===t&&(n=new RegExp("^audio/(".concat(_.values($e).join("|"),")$"),"i"),i.isChrome()&&(s.multiopus={mimeType:"audio/multiopus",channels:6}));for(const t of e.codecs){const i=t.mimeType.match(n);if(i){const e=i[1].toLowerCase();if(s[e]=g(d({},s[e]),{mimeType:t.mimeType}),t.scalabilityModes){let i=s[e].scalabilityModes||[];i=[...i,...t.scalabilityModes],s[e].scalabilityModes=[...new Set(i)]}t.channels&&(s[e].channels=t.channels)}}e.codecs=_.keys(s).map((t=>d({codec:t},s[t])))}return e}getTracks(){var t,i;return null==(i=null==(t=this.peer)?void 0:t.getSenders())?void 0:i.map((t=>t.track))}initStats(t){this.peerConnectionStats?ts.warn("PeerConnection.initStats() has already been called. Automatic initialization occurs via View.connect(), Publish.connect() or this.createRTCPeer(). See options"):this.peer?(this.peerConnectionStats=new Rt(this.peer,t),Lt(this.peerConnectionStats,this,[Ot])):ts.warn("Cannot init peer stats: RTCPeerConnection not initialized")}stopStats(){var t;null==(t=this.peerConnectionStats)||t.stop(),this.peerConnectionStats=null}constructor(){super(),this.mode=null,this.sessionDescription=null,this.peer=null,this.peerConnectionStats=null,this.transceiverMap=new Map}}const os=t=>(null==t?void 0:t.getAudioTracks().length)<=1&&(null==t?void 0:t.getVideoTracks().length)<=1,hs=t=>{if(!t)return null;if(t instanceof MediaStream&&os(t))return t;if(!(t instanceof MediaStream)){ts.info("Creating MediaStream to add received tracks.");const i=new MediaStream;for(const e of t)i.addTrack(e);if(os(i))return i}throw ts.error("MediaStream must have 1 audio track and 1 video track, or at least one of them."),new b("MediaStream must have 1 audio track and 1 video track, or at least one of them.")},as=(t,i)=>{const e=new RTCPeerConnection(i);return cs(t,e),e};async function us(t){return new Promise((i=>u(i,t)))}const cs=(t,i)=>{i.ontrack=async i=>{ts.info("New track from peer."),ts.debug("Track event value: ",i);const e=t.transceiverMap.get(i.transceiver);if(e){for(;!i.transceiver.mid;)await us(100);e(i.transceiver),t.transceiverMap.delete(i.transceiver)}u((()=>{t.emit(ss.track,i)}),0)},i.connectionState?i.onconnectionstatechange=e=>{ts.info("Peer connection state change: ",i.connectionState),t.emit(ss.connectionStateChange,i.connectionState)}:i.oniceconnectionstatechange=e=>{ts.info("Peer ICE connection state change: ",i.iceConnectionState),t.emit(ss.connectionStateChange,i.iceConnectionState)},i.onnegotiationneeded=async t=>{if(!i.remoteDescription)return;ts.info("Peer onnegotiationneeded, updating local description");const e=await i.createOffer();ts.info("Peer onnegotiationneeded, got local offer",e.sdp),e.sdp=qe.updateMissingVideoExtensions(e.sdp,i.remoteDescription.sdp),await i.setLocalDescription(e);const s=qe.renegotiate(e.sdp,i.remoteDescription.sdp);ts.info("Peer onnegotiationneeded, updating remote description",s),await i.setRemoteDescription({type:"answer",sdp:s}),ts.info("Peer onnegotiationneeded, renegotiation done")}},ls=(t,i,e)=>{ts.info("Adding mediaStream tracks to RTCPeerConnection");for(const s of i.getTracks()){const n={streams:[i]};"audio"===s.kind&&(n.direction=e.disableAudio?"inactive":"sendonly"),"video"===s.kind&&(n.direction=e.disableVideo?"inactive":"sendonly",e.scalabilityMode&&(new Ve).isChrome()?(ts.debug("Video track with scalability mode: ".concat(e.scalabilityMode,".")),n.sendEncodings=[{scalabilityMode:e.scalabilityMode}]):e.scalabilityMode&&ts.warn("SVC is only supported in Google Chrome")),t.addTransceiver(s,n),ts.info("Track '".concat(s.label,"' added: "),"id: ".concat(s.id),"kind: ".concat(s.kind))}},ds=(t,i)=>{const e=new Ve;if(!i.disableVideo){const i=t.addTransceiver("video",{direction:"recvonly"});e.isOpera()&&i.setCodecPreferences(RTCRtpReceiver.getCapabilities("video").codecs.filter((t=>"video/H264"!==t.mimeType||t.sdpFmtpLine.includes("profile-level-id=4"))))}i.disableAudio||t.addTransceiver("audio",{direction:"recvonly"});for(let e=0;e<i.multiplexedAudioTracks;e++)t.addTransceiver("audio",{direction:"recvonly"})},fs=t=>{var i;const e=null!=(i=t.connectionState)?i:t.iceConnectionState;switch(e){case"checking":return"connecting";case"completed":return"connected";default:return e}};var gs={};_.defineProperty(gs,"__esModule",{value:!0}),gs.TypedEmitter=St.EventEmitter;const{TypedEmitter:_s}=gs;class vs extends _s{cmd(t,i){return this.tm.cmd(t,i,this.namespace)}event(t,i){return this.tm.event(t,i,this.namespace)}close(){return this.tm.namespaces.delete(this.namespace)}constructor(t,i){super(),this.namespace=t,this.tm=i}}const ws=A(class extends _s{bv(t){this.transport.send(JSON.stringify(t))}cmd(t,i,e){return void 0===e&&(e=void 0),new Promise(((s,n)=>{if(!t||0===t.length)throw new b("Bad command name");const r={type:"cmd",transId:this.maxId++,name:t,data:i};e&&(r.namespace=e),this.transactions.set(r.transId,g(d({},r),{resolve:s,reject:n}));try{this.bv(r)}catch(t){throw this.transactions.delete(r.transId),t}}))}event(t,i,e){if(void 0===e&&(e=void 0),!t||0===t.length)throw new b("Bad event name");const s={type:"event",name:t,data:i};e&&(s.namespace=e),this.bv(s)}namespace(t){let i=this.namespaces.get(t);return i||(i=new vs(t,this),this.namespaces.set(t,i),i)}close(){for(const t of this.namespaces.values())t.close();this.transport.removeListener?this.transport.removeListener("message",this.listener):this.transport.removeEventListener("message",this.listener)}constructor(t){super(),this.maxId=0,this.namespaces=new Map,this.transactions=new Map,this.transport=t,this.listener=t=>{let i;try{i=JSON.parse(t.utf8Data||t.data||t)}catch(t){return}switch(i.type){case"cmd":const{transId:t}=i,s={name:i.name,data:i.data,namespace:i.namespace,accept:i=>{this.bv({type:"response",transId:t,data:i})},reject:i=>{this.bv({type:"error",transId:t,data:i})}};if(s.namespace){const t=this.namespaces.get(s.namespace);t?t.emit("cmd",s):this.emit("cmd",s)}else this.emit("cmd",s);break;case"response":{const t=this.transactions.get(i.transId);if(!t)return;this.transactions.delete(i.transId),t.resolve(i.data);break}case"error":{const t=this.transactions.get(i.transId);if(!t)return;this.transactions.delete(i.transId),t.reject(i.data);break}case"event":const n={name:i.name,data:i.data,namespace:i.namespace};if(n.namespace){var e=this.namespaces.get(n.namespace);e?e.emit("event",n):this.emit("event",n)}else this.emit("event",n)}},this.transport.addListener?this.transport.addListener("message",this.listener):this.transport.addEventListener("message",this.listener)}}),ms=at.get("Signaling"),ps="wsConnectionSuccess",As="wsConnectionError",ys="wsConnectionClose",bs="broadcastEvent";class Ms extends Nt{async connect(){var t;return ms.info("Connecting to Signaling Server"),this.transactionManager&&(null==(t=this.webSocket)?void 0:t.readyState)===WebSocket.OPEN?(ms.info("Connected to server: ",this.webSocket.url),ms.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(ps,{ws:this.webSocket,tm:this.transactionManager}),this.webSocket):new Promise(((t,i)=>{this.webSocket=new WebSocket(this.wsUrl),this.transactionManager=new ws(this.webSocket),this.webSocket.onopen=()=>{ms.info("WebSocket opened"),this.transactionManager.on("event",(t=>{this.emit(bs,t)})),ms.info("Connected to server: ",this.webSocket.url),ms.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(ps,{ws:this.webSocket,tm:this.transactionManager}),t(this.webSocket)},this.webSocket.onerror=()=>{ms.error("WebSocket not connected: ",this.webSocket.url),this.emit(As,this.webSocket.url),i(this.webSocket.url)},this.webSocket.onclose=()=>{this.webSocket=null,this.transactionManager=null,ms.info("Connection closed with Signaling Server."),this.emit(ys)}}))}close(){var t;ms.info("Closing connection with Signaling Server."),null==(t=this.webSocket)||t.close()}async subscribe(t,i,e,s){var n,r,o,h;void 0===e&&(e=null),void 0===s&&(s=null),ms.info("Starting subscription to streamName: ",this.streamName),ms.debug("Subcription local description: ",t);const a=Ts(i,e,s),u={sdp:t=qe.adaptCodecName(t,"AV1X",Je.AV1),streamId:this.streamName,pinnedSourceId:a.pinnedSourceId,excludedSourceIds:a.excludedSourceIds,events:["active","inactive","layers","viewercount","vad","updated","migrate","stopped"]};a.vad&&(u.vad=!0),Array.isArray(a.events)&&(u.events=a.events),a.forcePlayoutDelay&&(u.forcePlayoutDelay=a.forcePlayoutDelay),a.layer&&(u.layer=a.layer);try{if(a.disableVideo&&a.disableAudio)throw new b("Not attempting to connect as video and audio are disabled");await this.connect(),ms.info("Sending view command");const t=await this.transactionManager.cmd("view",u),i=null==(h=null==(o=null==(r=null==(n=RTCRtpReceiver.getCapabilities)?void 0:n.call(RTCRtpReceiver,"video"))?void 0:r.codecs)?void 0:o.find)?void 0:h.call(o,(t=>"video/AV1X"===t.mimeType));return t.sdp=i?qe.adaptCodecName(t.sdp,Je.AV1,"AV1X"):t.sdp,ms.info("Command sent, subscriberId: ",t.subscriberId),ms.debug("Command result: ",t),this.serverId=t.subscriberId,this.clusterId=t.clusterId,this.streamViewId=t.streamViewId,Y(this.streamName),V(this.serverId),G(t.streamViewId),X(this.clusterId),t.sdp}catch(t){throw ms.error("Error sending view command, error: ",t),t}}async publish(t,i,e,s){var n,r,o,h,a,u,c,l;void 0===e&&(e=null),void 0===s&&(s=null);const d=Ss(i,e,s);ms.info("Starting publishing to streamName: ".concat(this.streamName,", codec: ").concat(d.codec)),ms.debug("Publishing local description: ",t);const f=null!=(h=null==(o=null==(r=null==(n=rs.getCapabilities)?void 0:n.call(rs,"video"))?void 0:r.codecs)?void 0:o.map((t=>t.codec)))?h:[],g=_.values(Je);if(-1===g.indexOf(d.codec))throw ms.error("Invalid codec ".concat(d.codec,". Possible values are: "),g),new b("Invalid codec ".concat(d.codec,". Possible values are: ").concat(g));if(f.length>0&&-1===f.indexOf(d.codec))throw ms.error("Unsupported codec ".concat(d.codec,". Possible values are: "),f),new b("Unsupported codec ".concat(d.codec,". Possible values are: ").concat(f));d.codec===Je.AV1&&(t=qe.adaptCodecName(t,"AV1X",Je.AV1));const v={name:this.streamName,sdp:t,codec:d.codec,sourceId:d.sourceId};if(d.priority){if(!(Number.isInteger(d.priority)&&d.priority>=-2147483648&&d.priority<=2147483647))throw new b("Invalid value for priority option. It should be a decimal integer between the range [-2^31, +2^31 - 1]");v.priority=d.priority}null!==d.record&&(v.record=d.record),Array.isArray(d.events)&&(v.events=d.events);try{if(d.disableVideo&&d.disableAudio)throw new b("Not attempting to connect as video and audio are disabled");await this.connect(),ms.info("Sending publish command");const t=await this.transactionManager.cmd("publish",v);if(d.codec===Je.AV1){const i=null==(l=null==(c=null==(u=null==(a=RTCRtpSender.getCapabilities)?void 0:a.call(RTCRtpSender,"video"))?void 0:u.codecs)?void 0:c.find)?void 0:l.call(c,(t=>"video/AV1X"===t.mimeType));t.sdp=i?qe.adaptCodecName(t.sdp,Je.AV1,"AV1X"):t.sdp}return ms.info("Command sent, publisherId: ",t.publisherId),ms.debug("Command result: ",t),this.serverId=t.publisherId,this.clusterId=t.clusterId,Y(this.streamName),V(this.serverId),W(t.feedId),X(this.clusterId),t.sdp}catch(t){throw ms.error("Error sending publish command, error: ",t),t}}async cmd(t,i){return ms.info("Sending cmd: ".concat(t)),this.transactionManager.cmd(t,i)}constructor(t={streamName:null,url:"ws://localhost:8080/"}){super(),this.streamName=t.streamName,this.wsUrl=t.url,this.webSocket=null,this.transactionManager=null,this.serverId=null,this.clusterId=null,this.streamViewId=null}}const Ts=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===_.keys(s).length&&(s={vad:t,pinnedSourceId:i,excludedSourceIds:e}),s},Ss=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===_.keys(s).length&&(s={codec:null!=t?t:Je.H264,record:i,sourceId:e}),s};class Ns extends b{constructor(t,i){super(t),this.name="FetchError",this.status=i}}const Is=at.get("Director"),Ds="WebRtc";let Es="",ks="https://director.millicast.com";const Ls={setEndpoint:t=>{ks=t.replace(/\/$/,"")},getEndpoint:()=>ks,setLiveDomain:t=>{Es=t.replace(/\/$/,"")},getLiveDomain:()=>Es,getPublisher:async(t,i,e)=>{void 0===i&&(i=null),void 0===e&&(e=Ds);const s=xs(t,i,e);Is.info("Getting publisher connection path for stream name: ",s.streamName);const n={streamName:s.streamName,streamType:s.streamType},r={"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},o="".concat(Ls.getEndpoint(),"/api/director/publish");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let i=await t.json();if("fail"===i.status)throw new Ns(i.data.message,t.status);return i=js(i),Is.debug("Getting publisher response: ",i),F(i.data.streamAccountId),i.data}catch(t){throw Is.error("Error while getting publisher connection path. ",t),t}},getSubscriber:async(t,i,e)=>{void 0===i&&(i=null),void 0===e&&(e=null);const s=Cs(t,i,e);F(s.streamAccountId),Is.info("Getting subscriber connection data for stream name: ".concat(s.streamName," and account id: ").concat(s.streamAccountId));const n={streamAccountId:s.streamAccountId,streamName:s.streamName};let r={"Content-Type":"application/json"};s.subscriberToken&&(r=g(d({},r),{Authorization:"Bearer ".concat(s.subscriberToken)}));const o="".concat(Ls.getEndpoint(),"/api/director/subscribe");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let i=await t.json();if("fail"===i.status)throw new Ns(i.data.message,t.status);return i=js(i),Is.debug("Getting subscriber response: ",i),s.subscriberToken&&(i.data.subscriberToken=s.subscriberToken),i.data}catch(t){throw Is.error("Error while getting subscriber connection path. ",t),t}}},xs=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===_.keys(s).length&&(s={token:t,streamName:i,streamType:e}),s},Cs=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===_.keys(s).length&&(s={streamName:t,streamAccountId:i,subscriberToken:e}),s},js=t=>{if(Ls.getLiveDomain()){const i=/\/\/(.*?)\//,e=t.data.urls.map((t=>{const e=i.exec(t);return t.replace(e[1],Ls.getLiveDomain())}));t.data.urls=e}if(t.data.drmObject){const i=t.data.drmObject.playReadyUrl;i&&(t.data.drmObject.playReadyUrl="".concat(Ls.getEndpoint()).concat(i));const e=t.data.drmObject.widevineUrl;e&&(t.data.drmObject.widevineUrl="".concat(Ls.getEndpoint()).concat(e));const s=t.data.drmObject.fairPlayUrl;s&&(t.data.drmObject.fairPlayUrl="".concat(Ls.getEndpoint()).concat(s));const n=t.data.drmObject.fairPlayCertUrl;n&&(t.data.drmObject.fairPlayCertUrl="".concat(Ls.getEndpoint()).concat(n))}return t};function Os(t){this.message=t}Os.prototype=new b,Os.prototype.name="InvalidCharacterError";var Rs=typeof s<"u"&&s.atob&&s.atob.bind(s)||function(t){var i=String(t).replace(/=+$/,"");if(i.length%4==1)throw new Os("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,s,n=0,r=0,o="";s=i.charAt(r++);~s&&(e=n%4?64*e+s:s,n++%4)?o+=String.fromCharCode(255&e>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return o};function Ps(t){this.message=t}function zs(t,i){if("string"!=typeof t)throw new Ps("Invalid token specified");var e=!0===(i=i||{}).header?0:1;try{return JSON.parse(function(t){var i=t.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Rs(i).replace(/(.)/g,(function(t,i){var e=i.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e})))}catch(t){return Rs(i)}}(t.split(".")[e]))}catch(t){throw new Ps("Invalid token specified: "+t.message)}}Ps.prototype=new b,Ps.prototype.name="InvalidTokenError";var Bs={exports:{}};!function(t,i){!function(e){if(null!=i&&"number"!=typeof i.nodeType)t.exports=e();else{var s=e(),n=typeof self<"u"?self:$.global;"function"!=typeof n.btoa&&(n.btoa=s.btoa),"function"!=typeof n.atob&&(n.atob=s.atob)}}((function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(t){this.message=t}return i.prototype=new b,i.prototype.name="InvalidCharacterError",{btoa:function(e){for(var s,n,r,o,h=String(e),a=0,u="";a<h.length;){if(s=h.charCodeAt(a++),n=h.charCodeAt(a++),r=h.charCodeAt(a++),s>255||n>255||r>255)throw new i("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u+=t.charAt((o=s<<16|n<<8|r)>>18&63)+t.charAt(o>>12&63)+t.charAt(o>>6&63)+t.charAt(63&o)}switch(h.length%3){case 0:return u;case 1:return u.slice(0,-2)+"==";case 2:return u.slice(0,-1)+"="}},atob:function(e){var s=String(e).replace(/[=]+$/,"");if(s.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,h=0,a="";r=s.charAt(h++);~r&&(n=o%4?64*n+r:r,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)r=t.indexOf(r);return a}}}))}(Bs,Bs.exports);var Us=Bs.exports,Qs={exports:{}};!function(t,i){var e;self,e=()=>{return t={7629:(t,i,e)=>{const s=e(375),n=e(8571),r=e(9474),o=e(1687),h=e(8652),a=e(8160),u=e(3292),c=e(6354),l=e(8901),d=e(9708),f=e(6914),g=e(2294),v=e(6133),w=e(1152),m=e(8863),p=e(2036),A={Base:class{Mv(){this.Tv=new g.Ids,this.Sv=null,this.Nv=new v.Manager,this.Iv=null,this.Dv=null,this.Ev=null,this.Lv={},this.xv=[],this.Cv=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return s("function"==typeof d.describe,"Manifest functionality disabled"),d.describe(this)}allow(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"allow"),this.Ov(i,"Dv")}alter(t){s(t&&"object"==typeof t&&!Array.isArray(t),"Invalid targets argument"),s(!this.Rv(),"Cannot set alterations inside a ruleset");const i=this.clone();i.$_terms.alterations=i.$_terms.alterations||[];for(const e in t){const n=t[e];s("function"==typeof n,"Alteration adjuster for",e,"must be a function"),i.$_terms.alterations.push({target:e,adjuster:n})}return i.$_temp.ruleset=!1,i}artifact(t){return s(void 0!==t,"Artifact cannot be undefined"),s(!this.Iv,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",t)}cast(t){return s(!1===t||"string"==typeof t,"Invalid to value"),s(!1===t||this.Pv.cast[t],"Type",this.type,"does not support casting to",t),this.$_setFlag("cast",!1===t?void 0:t)}default(t,i){return this.zv("default",t,i)}description(t){return s(t&&"string"==typeof t,"Description must be a non-empty string"),this.$_setFlag("description",t)}empty(t){const i=this.clone();return void 0!==t&&(t=i.$_compile(t,{override:!1})),i.$_setFlag("empty",t,{clone:!1})}error(t){return s(t,"Missing error"),s(t instanceof b||"function"==typeof t,"Must provide a valid Error object or a function"),this.$_setFlag("error",t)}example(t,i){return void 0===i&&(i={}),s(void 0!==t,"Missing example"),a.assertOptions(i,["override"]),this.Bv("examples",t,{single:!0,override:i.override})}external(t,i){return"object"==typeof t&&(s(!i,"Cannot combine options with description"),i=t.description,t=t.method),s("function"==typeof t,"Method must be a function"),s(void 0===i||i&&"string"==typeof i,"Description must be a non-empty string"),this.Bv("externals",{method:t,description:i},{single:!0})}failover(t,i){return this.zv("failover",t,i)}forbidden(){return this.presence("forbidden")}id(t){return t?(s("string"==typeof t,"id must be a non-empty string"),s(/^[^\.]+$/.test(t),"id cannot contain period character"),this.$_setFlag("id",t)):this.$_setFlag("id",void 0)}invalid(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return this.Ov(i,"Ev")}label(t){return s(t&&"string"==typeof t,"Label name must be a non-empty string"),this.$_setFlag("label",t)}meta(t){return s(void 0!==t,"Meta cannot be undefined"),this.Bv("metas",t,{single:!0})}note(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];s(i.length,"Missing notes");for(const t of i)s(t&&"string"==typeof t,"Notes must be non-empty strings");return this.Bv("notes",i)}only(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"Invalid mode:",t),this.$_setFlag("only",t)}optional(){return this.presence("optional")}prefs(t){s(t,"Missing preferences"),s(void 0===t.context,"Cannot override context"),s(void 0===t.externals,"Cannot override externals"),s(void 0===t.warnings,"Cannot override warnings"),s(void 0===t.debug,"Cannot override debug"),a.checkPreferences(t);const i=this.clone();return i.Sv=a.preferences(i.Sv,t),i}presence(t){return s(["optional","required","forbidden"].includes(t),"Unknown presence mode",t),this.$_setFlag("presence",t)}raw(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"raw":void 0)}result(t){return s(["raw","strip"].includes(t),"Unknown result mode",t),this.$_setFlag("result",t)}required(){return this.presence("required")}strict(t){const i=this.clone(),e=void 0!==t&&!t;return i.Sv=a.preferences(i.Sv,{convert:e}),i}strip(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"strip":void 0)}tag(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];s(i.length,"Missing tags");for(const t of i)s(t&&"string"==typeof t,"Tags must be non-empty strings");return this.Bv("tags",i)}unit(t){return s(t&&"string"==typeof t,"Unit name must be a non-empty string"),this.$_setFlag("unit",t)}valid(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];a.verifyFlat(i,"valid");const s=this.allow(...i);return s.$_setFlag("only",!!s.Dv,{clone:!1}),s}when(t,i){const e=this.clone();e.$_terms.whens||(e.$_terms.whens=[]);const n=u.when(e,t,i);if(!["any","link"].includes(e.type)){const t=n.is?[n]:n.switch;for(const i of t)s(!i.then||"any"===i.then.type||i.then.type===e.type,"Cannot combine",e.type,"with",i.then&&i.then.type),s(!i.otherwise||"any"===i.otherwise.type||i.otherwise.type===e.type,"Cannot combine",e.type,"with",i.otherwise&&i.otherwise.type)}return e.$_terms.whens.push(n),e.$_mutateRebuild()}cache(t){s(!this.Rv(),"Cannot set caching inside a ruleset"),s(!this.Iv,"Cannot override schema cache"),s(void 0===this.Lv.artifact,"Cannot cache a rule with an artifact");const i=this.clone();return i.Iv=t||h.provider.provision(),i.$_temp.ruleset=!1,i}clone(){const t=_.create(_.getPrototypeOf(this));return this.Uv(t)}concat(t){s(a.isSchema(t),"Invalid schema object"),s("any"===this.type||"any"===t.type||t.type===this.type,"Cannot merge type",this.type,"with another type:",t.type),s(!this.Rv(),"Cannot concatenate onto a schema with open ruleset"),s(!t.Rv(),"Cannot concatenate a schema with open ruleset");let i=this.clone();if("any"===this.type&&"any"!==t.type){const e=t.clone();for(const t of _.keys(i))"type"!==t&&(e[t]=i[t]);i=e}i.Tv.concat(t.Tv),i.Nv.register(t,v.toSibling),i.Sv=i.Sv?a.preferences(i.Sv,t.Sv):t.Sv,i.Dv=p.merge(i.Dv,t.Dv,t.Ev),i.Ev=p.merge(i.Ev,t.Ev,t.Dv);for(const e of t.Cv.keys())i.Cv.has(e)&&(i.xv=i.xv.filter((t=>t.keep||t.name!==e)),i.Cv.delete(e));for(const e of t.xv)t.Pv.rules[e.method].multi||i.Cv.set(e.name,e),i.xv.push(e);if(i.Lv.empty&&t.Lv.empty){i.Lv.empty=i.Lv.empty.concat(t.Lv.empty);const e=_.assign({},t.Lv);delete e.empty,o(i.Lv,e)}else if(t.Lv.empty){i.Lv.empty=t.Lv.empty;const e=_.assign({},t.Lv);delete e.empty,o(i.Lv,e)}else o(i.Lv,t.Lv);for(const e in t.$_terms){const s=t.$_terms[e];s?i.$_terms[e]?i.$_terms[e]=i.$_terms[e].concat(s):i.$_terms[e]=s.slice():i.$_terms[e]||(i.$_terms[e]=s)}return this.$_root.Qv&&this.$_root.Qv.Fv(i,[this,t]),i.$_mutateRebuild()}extend(t){return s(!t.base,"Cannot extend type with another base"),l.type(this,t)}extract(t){return t=Array.isArray(t)?t:t.split("."),this.Tv.reach(t)}fork(t,i){s(!this.Rv(),"Cannot fork inside a ruleset");let e=this;for(let s of[].concat(t))s=Array.isArray(s)?s:s.split("."),e=e.Tv.fork(s,i,e);return e.$_temp.ruleset=!1,e}rule(t){const i=this.Pv;a.assertOptions(t,_.keys(i.modifiers)),s(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const e=null===this.$_temp.ruleset?this.xv.length-1:this.$_temp.ruleset;s(e>=0&&e<this.xv.length,"Cannot apply rules to empty ruleset");const r=this.clone();for(let o=e;o<r.xv.length;++o){const e=r.xv[o],h=n(e);for(const n in t)i.modifiers[n](h,t[n]),s(h.name===e.name,"Cannot change rule name");r.xv[o]=h,r.Cv.get(h.name)===e&&r.Cv.set(h.name,h)}return r.$_temp.ruleset=!1,r.$_mutateRebuild()}get ruleset(){s(!this.Rv(),"Cannot start a new ruleset without closing the previous one");const t=this.clone();return t.$_temp.ruleset=t.xv.length,t}get $(){return this.ruleset}tailor(t){t=[].concat(t),s(!this.Rv(),"Cannot tailor inside a ruleset");let i=this;if(this.$_terms.alterations)for(const{target:e,adjuster:n}of this.$_terms.alterations)t.includes(e)&&(i=n(i),s(a.isSchema(i),"Alteration adjuster for",e,"failed to return a schema object"));return i=i.$_modify({each:i=>i.tailor(t),ref:!1}),i.$_temp.ruleset=!1,i.$_mutateRebuild()}tracer(){return w.location?w.location(this):this}validate(t,i){return m.entry(t,this,i)}validateAsync(t,i){return m.entryAsync(t,this,i)}$_addRule(t){"string"==typeof t&&(t={name:t}),s(t&&"object"==typeof t,"Invalid options"),s(t.name&&"string"==typeof t.name,"Invalid rule name");for(const i in t)s("_"!==i[0],"Cannot set private rule properties");const i=_.assign({},t);i.Kg=[],i.method=i.method||i.name;const e=this.Pv.rules[i.method],n=i.args;s(e,"Unknown rule",i.method);const r=this.clone();if(n){s(1===_.keys(n).length||_.keys(n).length===this.Pv.rules[i.name].args.length,"Invalid rule definition for",this.type,i.name);for(const t in n){let o=n[t];if(e.argsByName){const h=e.argsByName.get(t);if(h.ref&&a.isResolvable(o))i.Kg.push(t),r.$_mutateRegister(o);else if(h.normalize&&(o=h.normalize(o),n[t]=o),h.assert){const i=a.validateArg(o,t,h);s(!i,i,"or reference")}}void 0!==o?n[t]=o:delete n[t]}}return e.multi||(r.Yv(i.name,{clone:!1}),r.Cv.set(i.name,i)),!1===r.$_temp.ruleset&&(r.$_temp.ruleset=null),e.priority?r.xv.unshift(i):r.xv.push(i),r}$_compile(t,i){return u.schema(this.$_root,t,i)}$_createError(t,i,e,s,n,r){void 0===r&&(r={});const o=!1!==r.flags?this.Lv:{},h=r.messages?f.merge(this.Pv.messages,r.messages):this.Pv.messages;return new c.Report(t,i,e,o,h,s,n)}$_getFlag(t){return this.Lv[t]}$_getRule(t){return this.Cv.get(t)}$_mapLabels(t){return t=Array.isArray(t)?t:t.split("."),this.Tv.labels(t)}$_match(t,i,e,s){(e=_.assign({},e)).abortEarly=!0,e.Vv=!1,i.snapshot();const n=!m.validate(t,this,i,e,s).errors;return i.restore(),n}$_modify(t){return a.assertOptions(t,["each","once","ref","schema"]),g.schema(this,t)||this}$_mutateRebuild(){return s(!this.Rv(),"Cannot add this rule inside a ruleset"),this.Nv.reset(),this.Tv.reset(),this.$_modify({each:(t,i)=>{let{source:e,name:s,path:n,key:r}=i;const o=this.Pv[e][s]&&this.Pv[e][s].register;!1!==o&&this.$_mutateRegister(t,{family:o,key:r})}}),this.Pv.rebuild&&this.Pv.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(t,i){let{family:e,key:s}=void 0===i?{}:i;this.Nv.register(t,e),this.Tv.register(t,{key:s})}$_property(t){return this.Pv.properties[t]}$_reach(t){return this.Tv.reach(t)}$_rootReferences(){return this.Nv.roots()}$_setFlag(t,i,e){void 0===e&&(e={}),s("_"===t[0]||!this.Rv(),"Cannot set flag inside a ruleset");const n=this.Pv.flags[t]||{};if(r(i,n.default)&&(i=void 0),r(i,this.Lv[t]))return this;const o=!1!==e.clone?this.clone():this;return void 0!==i?(o.Lv[t]=i,o.$_mutateRegister(i)):delete o.Lv[t],"_"!==t[0]&&(o.$_temp.ruleset=!1),o}$_parent(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];return this[t][a.symbols.parent].call(this,...e)}$_validate(t,i,e){return m.validate(t,this,i,e)}Uv(t){t.type=this.type,t.$_root=this.$_root,t.$_temp=_.assign({},this.$_temp),t.$_temp.whens={},t.Tv=this.Tv.clone(),t.Sv=this.Sv,t.Dv=this.Dv&&this.Dv.clone(),t.Ev=this.Ev&&this.Ev.clone(),t.xv=this.xv.slice(),t.Cv=n(this.Cv,{shallow:!0}),t.Nv=this.Nv.clone(),t.Lv=_.assign({},this.Lv),t.Iv=null,t.$_terms={};for(const i in this.$_terms)t.$_terms[i]=this.$_terms[i]?this.$_terms[i].slice():null;t.$_super={};for(const i in this.$_super)t.$_super[i]=this.Gv[i].bind(t);return t}Wv(){const t=this.clone();t.Mv();const i=t.Pv.terms;for(const e in i){const s=i[e];t.$_terms[e]=s.init}return t.$_mutateRebuild()}zv(t,i,e){return void 0===e&&(e={}),a.assertOptions(e,"literal"),s(void 0!==i,"Missing",t,"value"),s("function"==typeof i||!e.literal,"Only function value supports literal option"),"function"==typeof i&&e.literal&&(i={[a.symbols.literal]:!0,literal:i}),this.$_setFlag(t,i)}Zv(t,i,e){if(!this.$_terms.whens)return{schema:this};const s=[],n=[];for(let r=0;r<this.$_terms.whens.length;++r){const o=this.$_terms.whens[r];if(o.concat){s.push(o.concat),n.push("".concat(r,".concat"));continue}const h=o.ref?o.ref.resolve(t,i,e):t,a=o.is?[o]:o.switch,u=n.length;for(let u=0;u<a.length;++u){const{is:c,then:l,otherwise:d}=a[u],f="".concat(r).concat(o.switch?"."+u:"");if(c.$_match(h,i.nest(c,"".concat(f,".is")),e)){if(l){const r=i.localize([...i.path,"".concat(f,".then")],i.ancestors,i.schemas),{schema:o,id:h}=l.Zv(t,r,e);s.push(o),n.push("".concat(f,".then").concat(h?"(".concat(h,")"):""));break}}else if(d){const r=i.localize([...i.path,"".concat(f,".otherwise")],i.ancestors,i.schemas),{schema:o,id:h}=d.Zv(t,r,e);s.push(o),n.push("".concat(f,".otherwise").concat(h?"(".concat(h,")"):""));break}}if(o.break&&n.length>u)break}const r=n.join(", ");if(i.mainstay.tracer.debug(i,"rule","when",r),!r)return{schema:this};if(!i.mainstay.tracer.active&&this.$_temp.whens[r])return{schema:this.$_temp.whens[r],id:r};let o=this;this.Pv.generate&&(o=this.Pv.generate(this,t,i,e));for(const t of s)o=o.concat(t);return this.$_root.Qv&&this.$_root.Qv.Fv(o,[this,...s]),this.$_temp.whens[r]=o,{schema:o,id:r}}Bv(t,i,e){void 0===e&&(e={}),s(!this.Rv(),"Cannot set ".concat(t," inside a ruleset"));const n=this.clone();return n.$_terms[t]&&!e.override||(n.$_terms[t]=[]),e.single?n.$_terms[t].push(i):n.$_terms[t].push(...i),n.$_temp.ruleset=!1,n}Rv(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}Yv(t,i){if(void 0===i&&(i={}),!this.Cv.has(t))return this;const e=!1!==i.clone?this.clone():this;e.Cv.delete(t);const s=[];for(let i=0;i<e.xv.length;++i){const n=e.xv[i];n.name!==t||n.keep?s.push(n):e.Rv()&&i<e.$_temp.ruleset&&--e.$_temp.ruleset}return e.xv=s,e}Ov(t,i){a.verifyFlat(t,i.slice(1,-1));const e=this.clone(),n=t[0]===a.symbols.override;if(n&&(t=t.slice(1)),!e[i]&&t.length?e[i]=new p:n&&(e[i]=t.length?new p:null,e.$_mutateRebuild()),!e[i])return e;n&&e[i].override();for(const n of t){s(void 0!==n,"Cannot call allow/valid/invalid with undefined"),s(n!==a.symbols.override,"Override must be the first value");const t="Ev"===i?"Dv":"Ev";e[t]&&(e[t].remove(n),e[t].length||(s("Dv"===i||!e.Lv.only,"Setting invalid value",n,"leaves schema rejecting all values due to previous valid rule"),e[t]=null)),e[i].add(n,e.Nv)}return e}constructor(t){this.type=t,this.$_root=null,this.Pv={},this.Mv()}}};A.Base.prototype[a.symbols.any]={version:a.version,compile:u.compile,root:"$_root"},A.Base.prototype.isImmutable=!0,A.Base.prototype.deny=A.Base.prototype.invalid,A.Base.prototype.disallow=A.Base.prototype.invalid,A.Base.prototype.equal=A.Base.prototype.valid,A.Base.prototype.exist=A.Base.prototype.required,A.Base.prototype.not=A.Base.prototype.invalid,A.Base.prototype.options=A.Base.prototype.prefs,A.Base.prototype.preferences=A.Base.prototype.prefs,t.exports=new A.Base},8652:(t,i,e)=>{const s=e(375),n=e(8571),r=e(8160),o={max:1e3,supported:new Set(["undefined","boolean","number","string"])};i.provider={provision:t=>new o.Cache(t)},o.Cache=class{get length(){return this.Hv.size}set(t,i){if(null!==t&&!o.supported.has(typeof t))return;let e=this.Hv.get(t);if(e)return e.value=i,void this.Xv.first(e);e=this.Xv.unshift({key:t,value:i}),this.Hv.set(t,e),this.qv()}get(t){const i=this.Hv.get(t);if(i)return this.Xv.first(i),n(i.value)}qv(){if(this.Hv.size>this.Kv){const t=this.Xv.pop();this.Hv.delete(t.key)}}constructor(t={}){r.assertOptions(t,["max"]),s(void 0===t.max||t.max&&t.max>0&&isFinite(t.max),"Invalid max cache size"),this.Kv=t.max||o.max,this.Hv=new Map,this.Xv=new o.List}},o.List=class{unshift(t){return t.next=null,t.prev=this.head,this.head&&(this.head.next=t),this.head=t,this.tail||(this.tail=t),t}first(t){t!==this.head&&(this.Jv(t),this.unshift(t))}pop(){return this.Jv(this.tail)}Jv(t){const{next:i,prev:e}=t;return i.prev=e,e&&(e.next=i),t===this.tail&&(this.tail=i),t.prev=null,t.next=null,t}constructor(){this.tail=null,this.head=null}}},8160:(t,i,e)=>{const s=e(375),n=e(7916),r=e(5934);let o,h;const a={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};i.version=r.version,i.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},i.symbols={any:It("@hapi/joi/schema"),arraySingle:Bo("arraySingle"),deepDefault:Bo("deepDefault"),errors:Bo("errors"),literal:Bo("literal"),override:Bo("override"),parent:Bo("parent"),prefs:Bo("prefs"),ref:Bo("ref"),template:Bo("template"),values:Bo("values")},i.assertOptions=function(t,i,e){void 0===e&&(e="Options"),s(t&&"object"==typeof t&&!Array.isArray(t),"Options must be of type object");const n=_.keys(t).filter((t=>!i.includes(t)));s(0===n.length,"".concat(e," contain unknown keys: ").concat(n))},i.checkPreferences=function(t){h=h||e(3378);const i=h.preferences.validate(t);if(i.error)throw new n([i.error.details[0].message])},i.compare=function(t,i,e){switch(e){case"=":return t===i;case">":return t>i;case"<":return t<i;case">=":return t>=i;case"<=":return t<=i}},i.default=function(t,i){return void 0===t?i:t},i.isIsoDate=function(t){return a.isoDate.test(t)},i.isNumber=function(t){return"number"==typeof t&&!j(t)},i.isResolvable=function(t){return!!t&&(t[i.symbols.ref]||t[i.symbols.template])},i.isSchema=function(t,e){void 0===e&&(e={});const n=t&&t[i.symbols.any];return!!n&&(s(e.legacy||n.version===i.version,"Cannot mix different versions of joi schemas"),!0)},i.isValues=function(t){return t[i.symbols.values]},i.limit=function(t){return Number.isSafeInteger(t)&&t>=0},i.preferences=function(t,s){o=o||e(6914),t=t||{},s=s||{};const n=_.assign({},t,s);return s.errors&&t.errors&&(n.errors=_.assign({},t.errors,s.errors),n.errors.wrap=_.assign({},t.errors.wrap,s.errors.wrap)),s.messages&&(n.messages=o.compile(s.messages,t.messages)),delete n[i.symbols.prefs],n},i.tryWithPath=function(t,i,e){void 0===e&&(e={});try{return t()}catch(t){throw void 0!==t.path?t.path=i+"."+t.path:t.path=i,e.append&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},i.validateArg=function(t,e,s){let{assert:n,message:r}=s;if(i.isSchema(n)){const i=n.validate(t);return i.error?i.error.message:void 0}if(!n(t))return e?"".concat(e," ").concat(r):r},i.verifyFlat=function(t,i){for(const e of t)s(!Array.isArray(e),"Method no longer accepts array arguments:",i)}},3292:(t,i,e)=>{const s=e(375),n=e(8160),r=e(6133),o={};i.schema=function(t,i,e){void 0===e&&(e={}),n.assertOptions(e,["appendPath","override"]);try{return o.schema(t,i,e)}catch(t){throw e.appendPath&&void 0!==t.path&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},o.schema=function(t,i,e){s(void 0!==i,"Invalid undefined schema"),Array.isArray(i)&&(s(i.length,"Invalid empty array schema"),1===i.length&&(i=i[0]));const r=function(i){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return!1!==e.override?i.valid(t.override,...n):i.valid(...n)};if(o.simple(i))return r(t,i);if("function"==typeof i)return t.custom(i);if(s("object"==typeof i,"Invalid schema content:",typeof i),n.isResolvable(i))return r(t,i);if(n.isSchema(i))return i;if(Array.isArray(i)){for(const e of i)if(!o.simple(e))return t.alternatives().try(...i);return r(t,...i)}return i instanceof RegExp?t.string().regex(i):i instanceof Date?r(t.date(),i):(s(_.getPrototypeOf(i)===_.getPrototypeOf({}),"Schema can only contain plain objects"),t.object().keys(i))},i.ref=function(t,i){return r.isRef(t)?t:r.create(t,i)},i.compile=function(t,e,r){void 0===r&&(r={}),n.assertOptions(r,["legacy"]);const h=e&&e[n.symbols.any];if(h)return s(r.legacy||h.version===n.version,"Cannot mix different versions of joi schemas:",h.version,n.version),e;if("object"!=typeof e||!r.legacy)return i.schema(t,e,{appendPath:!0});const a=o.walk(e);return a?a.compile(a.root,e):i.schema(t,e,{appendPath:!0})},o.walk=function(t){if("object"!=typeof t)return null;if(Array.isArray(t)){for(const i of t){const t=o.walk(i);if(t)return t}return null}const i=t[n.symbols.any];if(i)return{root:t[i.root],compile:i.compile};s(_.getPrototypeOf(t)===_.getPrototypeOf({}),"Schema can only contain plain objects");for(const i in t){const e=o.walk(t[i]);if(e)return e}return null},o.simple=function(t){return null===t||["boolean","string","number"].includes(typeof t)},i.when=function(t,e,h){if(void 0===h&&(s(e&&"object"==typeof e,"Missing options"),h=e,e=r.create(".")),Array.isArray(h)&&(h={switch:h}),n.assertOptions(h,["is","not","then","otherwise","switch","break"]),n.isSchema(e))return s(void 0===h.is,'"is" can not be used with a schema condition'),s(void 0===h.not,'"not" can not be used with a schema condition'),s(void 0===h.switch,'"switch" can not be used with a schema condition'),o.condition(t,{is:e,then:h.then,otherwise:h.otherwise,break:h.break});if(s(r.isRef(e)||"string"==typeof e,"Invalid condition:",e),s(void 0===h.not||void 0===h.is,'Cannot combine "is" with "not"'),void 0===h.switch){let a=h;void 0!==h.not&&(a={is:h.not,then:h.otherwise,otherwise:h.then,break:h.break});let u=void 0!==a.is?t.$_compile(a.is):t.$_root.invalid(null,!1,0,"").required();return s(void 0!==a.then||void 0!==a.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),s(void 0===a.break||void 0===a.then||void 0===a.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===h.is||r.isRef(h.is)||n.isSchema(h.is)||(u=u.required()),o.condition(t,{ref:i.ref(e),is:u,then:a.then,otherwise:a.otherwise,break:a.break})}s(Array.isArray(h.switch),'"switch" must be an array'),s(void 0===h.is,'Cannot combine "switch" with "is"'),s(void 0===h.not,'Cannot combine "switch" with "not"'),s(void 0===h.then,'Cannot combine "switch" with "then"');const a={ref:i.ref(e),switch:[],break:h.break};for(let i=0;i<h.switch.length;++i){const e=h.switch[i],o=i===h.switch.length-1;n.assertOptions(e,o?["is","then","otherwise"]:["is","then"]),s(void 0!==e.is,'Switch statement missing "is"'),s(void 0!==e.then,'Switch statement missing "then"');const u={is:t.$_compile(e.is),then:t.$_compile(e.then)};if(r.isRef(e.is)||n.isSchema(e.is)||(u.is=u.is.required()),o){s(void 0===h.otherwise||void 0===e.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const i=void 0!==h.otherwise?h.otherwise:e.otherwise;void 0!==i&&(s(void 0===a.break,"Cannot specify both otherwise and break"),u.otherwise=t.$_compile(i))}a.switch.push(u)}return a},o.condition=function(t,i){for(const e of["then","otherwise"])void 0===i[e]?delete i[e]:i[e]=t.$_compile(i[e]);return i}},6354:(t,i,e)=>{const s=e(5688),n=e(8160),r=e(3328);i.Report=class{$v(t){if(this.template=t,!this.flags.label&&0===this.path.length){const t=this.iw(this.template,"root");t&&(this.local.label=t)}}toString(){if(this.message)return this.message;const t=this.code;if(!this.prefs.errors.render)return this.code;const i=this.iw(this.template)||this.iw(this.prefs.messages)||this.iw(this.messages);return void 0===i?'Error code "'.concat(t,'" is not defined, your custom type is missing the correct messages definition'):(this.message=i.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}iw(t,e){return i.template(this.value,t,e||this.code,this.state,this.prefs)}constructor(t,e,s,n,r,o,h){if(this.code=t,this.flags=n,this.messages=r,this.path=o.path,this.prefs=h,this.state=o,this.value=e,this.message=null,this.template=null,this.local=s||{},this.local.label=i.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const t=this.path[this.path.length-1];"object"!=typeof t&&(this.local.key=t)}}},i.path=function(t){let i="";for(const e of t)"object"!=typeof e&&("string"==typeof e?(i&&(i+="."),i+=e):i+="[".concat(e,"]"));return i},i.template=function(t,i,e,s,o){if(!i)return;if(r.isTemplate(i))return"root"!==e?i:null;let h=o.errors.language;if(n.isResolvable(h)&&(h=h.resolve(t,s,o)),h&&i[h]){if(void 0!==i[h][e])return i[h][e];if(void 0!==i[h]["*"])return i[h]["*"]}return i[e]?i[e]:i["*"]},i.label=function(t,e,s,n){if(!s.errors.label)return"";if(t.label)return t.label;let r=e.path;return"key"===s.errors.label&&e.path.length>1&&(r=e.path.slice(-1)),i.path(r)||i.template(null,s.messages,"root",e,s)||n&&i.template(null,n,"root",e,s)||"value"},i.process=function(t,e,s){if(!t)return null;const{override:n,message:r,details:o}=i.details(t);if(n)return n;if(s.errors.stack)return new i.ValidationError(r,o,e);const h=b.stackTraceLimit;b.stackTraceLimit=0;const a=new i.ValidationError(r,o,e);return b.stackTraceLimit=h,a},i.details=function(t,i){void 0===i&&(i={});let e=[];const s=[];for(const n of t){if(n instanceof b){if(!1!==i.override)return{override:n};const t=n.toString();e.push(t),s.push({message:t,type:"override",context:{error:n}});continue}const t=n.toString();e.push(t),s.push({message:t,path:n.path.filter((t=>"object"!=typeof t)),type:n.code,context:n.local})}return e.length>1&&(e=[...new Set(e)]),{message:e.join(". "),details:s}},i.ValidationError=class extends b{static isError(t){return t instanceof i.ValidationError}constructor(t,i,e){super(t),this.ew=e,this.details=i}},i.ValidationError.prototype.isJoi=!0,i.ValidationError.prototype.name="ValidationError",i.ValidationError.prototype.annotate=s.error},8901:(t,i,e)=>{const s=e(375),n=e(8571),r=e(8160),o=e(6914),h={};i.type=function(t,i){const e=_.getPrototypeOf(t),a=n(e),u=t.Uv(_.create(a)),c=_.assign({},i);delete c.base,a.Pv=c;const l=e.Pv||{};c.messages=o.merge(l.messages,c.messages),c.properties=_.assign({},l.properties,c.properties),u.type=c.type,c.flags=_.assign({},l.flags,c.flags);const d=_.assign({},l.terms);if(c.terms)for(const t in c.terms){const i=c.terms[t];s(void 0===u.$_terms[t],"Invalid term override for",c.type,t),u.$_terms[t]=i.init,d[t]=i}c.terms=d,c.args||(c.args=l.args),c.prepare=h.prepare(c.prepare,l.prepare),c.coerce&&("function"==typeof c.coerce&&(c.coerce={method:c.coerce}),c.coerce.from&&!Array.isArray(c.coerce.from)&&(c.coerce={method:c.coerce.method,from:[].concat(c.coerce.from)})),c.coerce=h.coerce(c.coerce,l.coerce),c.validate=h.validate(c.validate,l.validate);const f=_.assign({},l.rules);if(c.rules)for(const t in c.rules){const i=c.rules[t];s("object"==typeof i,"Invalid rule definition for",c.type,t);let e=i.method;if(void 0===e&&(e=function(){return this.$_addRule(t)}),e&&(s(!a[t],"Rule conflict in",c.type,t),a[t]=e),s(!f[t],"Rule conflict in",c.type,t),f[t]=i,i.alias){const t=[].concat(i.alias);for(const e of t)a[e]=i.method}i.args&&(i.argsByName=new Map,i.args=i.args.map((t=>("string"==typeof t&&(t={name:t}),s(!i.argsByName.has(t.name),"Duplicated argument name",t.name),r.isSchema(t.assert)&&(t.assert=t.assert.strict().label(t.name)),i.argsByName.set(t.name,t),t))))}c.rules=f;const g=_.assign({},l.modifiers);if(c.modifiers)for(const t in c.modifiers){s(!a[t],"Rule conflict in",c.type,t);const i=c.modifiers[t];s("function"==typeof i,"Invalid modifier definition for",c.type,t);const e=function(i){return this.rule({[t]:i})};a[t]=e,g[t]=i}if(c.modifiers=g,c.overrides){a.Gv=e,u.$_super={};for(const t in c.overrides)s(e[t],"Cannot override missing",t),c.overrides[t][r.symbols.parent]=e[t],u.$_super[t]=e[t].bind(u);_.assign(a,c.overrides)}c.cast=_.assign({},l.cast,c.cast);const v=_.assign({},l.manifest,c.manifest);return v.build=h.build(c.manifest&&c.manifest.build,l.manifest&&l.manifest.build),c.manifest=v,c.rebuild=h.rebuild(c.rebuild,l.rebuild),u},h.build=function(t,i){return t&&i?function(e,s){return i(t(e,s),s)}:t||i},h.coerce=function(t,i){return t&&i?{from:t.from&&i.from?[...new Set([...t.from,...i.from])]:null,method(e,s){let n;if((!i.from||i.from.includes(typeof e))&&(n=i.method(e,s),n)){if(n.errors||void 0===n.value)return n;e=n.value}if(!t.from||t.from.includes(typeof e)){const i=t.method(e,s);if(i)return i}return n}}:t||i},h.prepare=function(t,i){return t&&i?function(e,s){const n=t(e,s);if(n){if(n.errors||void 0===n.value)return n;e=n.value}return i(e,s)||n}:t||i},h.rebuild=function(t,i){return t&&i?function(e){i(e),t(e)}:t||i},h.validate=function(t,i){return t&&i?function(e,s){const n=i(e,s);if(n){if(n.errors&&(!Array.isArray(n.errors)||n.errors.length))return n;e=n.value}return t(e,s)||n}:t||i}},5107:(t,i,e)=>{const s=e(375),n=e(8571),r=e(8652),o=e(8160),h=e(3292),a=e(6354),u=e(8901),c=e(9708),l=e(6133),d=e(3328),f=e(1152);let g;const v={types:{alternatives:e(4946),any:e(8068),array:e(546),boolean:e(4937),date:e(7500),function:e(390),link:e(8785),number:e(3832),object:e(8966),string:e(7417),symbol:e(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const t={nw:new Set(_.keys(v.types))};for(const i of t.nw)t[i]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return s(!e.length||["alternatives","link","object"].includes(i),"The",i,"type does not allow arguments"),v.generate(this,v.types[i],e)};for(const i of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])t[i]=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return this.any()[i](...e)};_.assign(t,v.methods);for(const i in v.aliases){const e=v.aliases[i];t[i]=t[e]}return t.x=t.expression,f.setup&&f.setup(t),t}};v.methods={ValidationError:a.ValidationError,version:o.version,cache:r.provider,assert(t,i){for(var e=arguments.length,s=new Array(e>2?e-2:0),n=2;n<e;n++)s[n-2]=arguments[n];v.assert(t,i,!0,s)},attempt:function(t,i){for(var e=arguments.length,s=new Array(e>2?e-2:0),n=2;n<e;n++)s[n-2]=arguments[n];return v.assert(t,i,!1,s)},build(t){return s("function"==typeof c.build,"Manifest functionality disabled"),c.build(this,t)},checkPreferences(t){o.checkPreferences(t)},compile(t,i){return h.compile(this,t,i)},defaults(t){s("function"==typeof t,"modifier must be a function");const i=_.assign({},this);for(const e of i.nw){const n=t(i[e]());s(o.isSchema(n),"modifier must return a valid schema object"),i[e]=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return v.generate(this,n,i)}}return i},expression:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return new d(...i)},extend(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];o.verifyFlat(i,"extend"),g=g||e(3378),s(i.length,"You need to provide at least one extension"),this.assert(i,g.extensions);const r=_.assign({},this);r.nw=new Set(r.nw);for(let t of i){"function"==typeof t&&(t=t(r)),this.assert(t,g.extension);const i=v.expandExtension(t,r);for(const t of i){s(void 0===r[t.type]||r.nw.has(t.type),"Cannot override name",t.type);const i=t.base||this.any(),e=u.type(i,t);r.nw.add(t.type),r[t.type]=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return v.generate(this,e,i)}}}return r},isError:a.ValidationError.isError,isExpression:d.isTemplate,isRef:l.isRef,isSchema:o.isSchema,in:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return l.in(...i)},override:o.symbols.override,ref:function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return l.create(...i)},types(){const t={};for(const i of this.nw)t[i]=this[i]();for(const i in v.aliases)t[i]=this[i]();return t}},v.assert=function(t,i,e,s){const r=s[0]instanceof b||"string"==typeof s[0]?s[0]:null,h=null!==r?s[1]:s[0],u=i.validate(t,o.preferences({errors:{stack:!0}},h||{}));let c=u.error;if(!c)return u.value;if(r instanceof b)throw r;const l=e&&"function"==typeof c.annotate?c.annotate():c.message;throw c instanceof a.ValidationError==0&&(c=n(c)),c.message=r?"".concat(r," ").concat(l):l,c},v.generate=function(t,i,e){return s(t,"Must be invoked on a Joi instance."),i.$_root=t,i.Pv.args&&e.length?i.Pv.args(i,...e):i},v.expandExtension=function(t,i){if("string"==typeof t.type)return[t];const e=[];for(const s of i.nw)if(t.type.test(s)){const n=_.assign({},t);n.type=s,n.base=i[s](),e.push(n)}return e},t.exports=v.root()},6914:(t,i,e)=>{const s=e(375),n=e(8571),r=e(3328);i.compile=function(t,i){if("string"==typeof t)return s(!i,"Cannot set single message string"),new r(t);if(r.isTemplate(t))return s(!i,"Cannot set single message template"),t;s("object"==typeof t&&!Array.isArray(t),"Invalid message options"),i=i?n(i):{};for(let e in t){const n=t[e];if("root"===e||r.isTemplate(n)){i[e]=n;continue}if("string"==typeof n){i[e]=new r(n);continue}s("object"==typeof n&&!Array.isArray(n),"Invalid message for",e);const o=e;for(e in i[o]=i[o]||{},n){const t=n[e];"root"===e||r.isTemplate(t)?i[o][e]=t:(s("string"==typeof t,"Invalid message for",e,"in",o),i[o][e]=new r(t))}}return i},i.decompile=function(t){const i={};for(let e in t){const s=t[e];if("root"===e){i.root=s;continue}if(r.isTemplate(s)){i[e]=s.describe({compact:!0});continue}const n=e;for(e in i[n]={},s){const t=s[e];"root"!==e?i[n][e]=t.describe({compact:!0}):i[n].root=t}}return i},i.merge=function(t,e){if(!t)return i.compile(e);if(!e)return t;if("string"==typeof e)return new r(e);if(r.isTemplate(e))return e;const o=n(t);for(let t in e){const i=e[t];if("root"===t||r.isTemplate(i)){o[t]=i;continue}if("string"==typeof i){o[t]=new r(i);continue}s("object"==typeof i&&!Array.isArray(i),"Invalid message for",t);const n=t;for(t in o[n]=o[n]||{},i){const e=i[t];"root"===t||r.isTemplate(e)?o[n][t]=e:(s("string"==typeof e,"Invalid message for",t,"in",n),o[n][t]=new r(e))}}return o}},2294:(t,i,e)=>{const s=e(375),n=e(8160),r=e(6133),o={};i.Ids=o.Ids=class{clone(){const t=new o.Ids;return t.ow=new Map(this.ow),t.hw=new Map(this.hw),t.aw=this.aw,t}concat(t){t.aw&&(this.aw=!0);for(const[i,e]of t.ow.entries())s(!this.hw.has(i),"Schema id conflicts with existing key:",i),this.ow.set(i,e);for(const[i,e]of t.hw.entries())s(!this.ow.has(i),"Schema key conflicts with existing id:",i),this.hw.set(i,e)}fork(t,i,e){const r=this.uw(t);r.push({schema:e});const h=r.shift();let a={id:h.id,schema:i(h.schema)};s(n.isSchema(a.schema),"adjuster function failed to return a joi schema type");for(const t of r)a={id:t.id,schema:o.fork(t.schema,a.id,a.schema)};return a.schema}labels(t,i){void 0===i&&(i=[]);const e=t[0],s=this.cw(e);if(!s)return[...i,...t].join(".");const n=t.slice(1);return i=[...i,s.schema.Lv.label||e],n.length?s.schema.Tv.labels(n,i):i.join(".")}reach(t,i){void 0===i&&(i=[]);const e=t[0],n=this.cw(e);s(n,"Schema does not contain path",[...i,...t].join("."));const r=t.slice(1);return r.length?n.schema.Tv.reach(r,[...i,e]):n.schema}register(t,i){let{key:e}=void 0===i?{}:i;if(!t||!n.isSchema(t))return;(t.$_property("schemaChain")||t.Tv.aw)&&(this.aw=!0);const r=t.Lv.id;if(r){const i=this.ow.get(r);s(!i||i.schema===t,"Cannot add different schemas with the same id:",r),s(!this.hw.has(r),"Schema id conflicts with existing key:",r),this.ow.set(r,{schema:t,id:r})}e&&(s(!this.hw.has(e),"Schema already contains key:",e),s(!this.ow.has(e),"Schema key conflicts with existing id:",e),this.hw.set(e,{schema:t,id:e}))}reset(){this.ow=new Map,this.hw=new Map,this.aw=!1}uw(t,i,e){void 0===i&&(i=[]),void 0===e&&(e=[]);const n=t[0],r=this.cw(n);s(r,"Schema does not contain path",[...i,...t].join(".")),e=[r,...e];const o=t.slice(1);return o.length?r.schema.Tv.uw(o,[...i,n],e):e}cw(t){return this.ow.get(t)||this.hw.get(t)}constructor(){this.ow=new Map,this.hw=new Map,this.aw=!1}},o.fork=function(t,e,s){const n=i.schema(t,{each:(t,i)=>{let{key:n}=i;if(e===(t.Lv.id||n))return s},ref:!1});return n?n.$_mutateRebuild():t},i.schema=function(t,i){let e;for(const s in t.Lv){if("_"===s[0])continue;const n=o.scan(t.Lv[s],{source:"flags",name:s},i);void 0!==n&&(e=e||t.clone(),e.Lv[s]=n)}for(let s=0;s<t.xv.length;++s){const n=t.xv[s],r=o.scan(n.args,{source:"rules",name:n.name},i);if(void 0!==r){e=e||t.clone();const i=_.assign({},n);i.args=r,e.xv[s]=i,e.Cv.get(n.name)===n&&e.Cv.set(n.name,i)}}for(const s in t.$_terms){if("_"===s[0])continue;const n=o.scan(t.$_terms[s],{source:"terms",name:s},i);void 0!==n&&(e=e||t.clone(),e.$_terms[s]=n)}return e},o.scan=function(t,i,e,s,h){const a=s||[];if(null===t||"object"!=typeof t)return;let u;if(Array.isArray(t)){for(let s=0;s<t.length;++s){const n="terms"===i.source&&"keys"===i.name&&t[s].key,r=o.scan(t[s],i,e,[s,...a],n);void 0!==r&&(u=u||t.slice(),u[s]=r)}return u}if(!1!==e.schema&&n.isSchema(t)||!1!==e.ref&&r.isRef(t)){const s=e.each(t,g(d({},i),{path:a,key:h}));return s===t?void 0:s}for(const s in t){if("_"===s[0])continue;const n=o.scan(t[s],i,e,[s,...a],h);void 0!==n&&(u=u||_.assign({},t),u[s]=n)}return u}},6133:(t,i,e)=>{const s=e(375),n=e(8571),r=e(9621),o=e(8160);let h;const a={symbol:Bo("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};i.create=function(t,i){void 0===i&&(i={}),s("string"==typeof t,"Invalid reference key:",t),o.assertOptions(i,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),s(!i.prefix||"object"==typeof i.prefix,"options.prefix must be of type object");const e=_.assign({},a.defaults,i);delete e.prefix;const n=e.separator,r=a.context(t,n,i.prefix);if(e.type=r.type,t=r.key,"value"===e.type)if(r.root&&(s(!n||t[0]!==n,"Cannot specify relative path with root prefix"),e.ancestor="root",t||(t=null)),n&&n===t)t=null,e.ancestor=0;else if(void 0!==e.ancestor)s(!n||!t||t[0]!==n,"Cannot combine prefix with ancestor option");else{const[i,s]=a.ancestor(t,n);s&&""===(t=t.slice(s))&&(t=null),e.ancestor=i}return e.path=n?null===t?[]:t.split(n):[t],new a.Ref(e)},i.in=function(t,e){return void 0===e&&(e={}),i.create(t,g(d({},e),{in:!0}))},i.isRef=function(t){return!!t&&!!t[o.symbols.ref]},a.Ref=class{resolve(t,i,e,n,r){return void 0===r&&(r={}),s(!this.in||r.in,"Invalid in() reference usage"),"global"===this.type?this.Kg(e.context,i,r):"local"===this.type?this.Kg(n,i,r):this.ancestor?"root"===this.ancestor?this.Kg(i.ancestors[i.ancestors.length-1],i,r):(s(this.ancestor<=i.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this.Kg(i.ancestors[this.ancestor-1],i,r)):this.Kg(t,i,r)}Kg(t,i,e){let s;if("value"===this.type&&i.mainstay.shadow&&!1!==e.shadow&&(s=i.mainstay.shadow.get(this.absolute(i))),void 0===s&&(s=r(t,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(s=this.adjust(s)),this.map){const t=this.map.get(s);void 0!==t&&(s=t)}return i.mainstay&&i.mainstay.tracer.resolve(i,this,s),s}toString(){return this.display}absolute(t){return[...t.path.slice(0,-this.ancestor),...this.path]}clone(){return new a.Ref(this)}describe(){const t={path:this.path};"value"!==this.type&&(t.type=this.type),"."!==this.separator&&(t.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(t.ancestor=this.ancestor),this.map&&(t.map=[...this.map]);for(const i of["adjust","iterables","render"])null!==this[i]&&void 0!==this[i]&&(t[i]=this[i]);return!1!==this.in&&(t.in=!0),{ref:t}}updateDisplay(){const t=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display="ref:".concat(this.type,":").concat(t));if(!this.separator)return void(this.display="ref:".concat(t));if(!this.ancestor)return void(this.display="ref:".concat(this.separator).concat(t));if("root"===this.ancestor)return void(this.display="ref:root:".concat(t));if(1===this.ancestor)return void(this.display="ref:".concat(t||".."));const i=new Array(this.ancestor+1).fill(this.separator).join("");this.display="ref:".concat(i).concat(t||"")}constructor(t){s("object"==typeof t,"Invalid reference construction"),o.assertOptions(t,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),s([!1,void 0].includes(t.separator)||"string"==typeof t.separator&&1===t.separator.length,"Invalid separator"),s(!t.adjust||"function"==typeof t.adjust,"options.adjust must be a function"),s(!t.map||Array.isArray(t.map),"options.map must be an array"),s(!t.map||!t.adjust,"Cannot set both map and adjust options"),_.assign(this,a.defaults,t),s("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}},a.Ref.prototype[o.symbols.ref]=!0,i.build=function(t){return"value"===(t=_.assign({},a.defaults,t)).type&&void 0===t.ancestor&&(t.ancestor=1),new a.Ref(t)},a.context=function(t,i,e){if(void 0===e&&(e={}),t=t.trim(),e){const s=void 0===e.global?"$":e.global;if(s!==i&&t.startsWith(s))return{key:t.slice(s.length),type:"global"};const n=void 0===e.local?"#":e.local;if(n!==i&&t.startsWith(n))return{key:t.slice(n.length),type:"local"};const r=void 0===e.root?"/":e.root;if(r!==i&&t.startsWith(r))return{key:t.slice(r.length),type:"value",root:!0}}return{key:t,type:"value"}},a.ancestor=function(t,i){if(!i)return[1,0];if(t[0]!==i)return[1,0];if(t[1]!==i)return[0,1];let e=2;for(;t[e]===i;)++e;return[e-1,e]},i.toSibling=0,i.toParent=1,i.Manager=class{register(t,s){if(t)if(s=void 0===s?i.toParent:s,Array.isArray(t))for(const i of t)this.register(i,s);else if(o.isSchema(t))for(const i of t.Nv.refs)i.ancestor-s>=0&&this.refs.push({ancestor:i.ancestor-s,root:i.root});else i.isRef(t)&&"value"===t.type&&t.ancestor-s>=0&&this.refs.push({ancestor:t.ancestor-s,root:t.root}),h=h||e(3328),h.isTemplate(t)&&this.register(t.refs(),s)}get length(){return this.refs.length}clone(){const t=new i.Manager;return t.refs=n(this.refs),t}reset(){this.refs=[]}roots(){return this.refs.filter((t=>!t.ancestor)).map((t=>t.root))}constructor(){this.refs=[]}}},3378:(t,i,e)=>{const s=e(5107),n={};n.wrap=s.string().min(1).max(2).allow(!1),i.preferences=s.object({allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),context:s.object(),convert:s.boolean(),dateFormat:s.valid("date","iso","string","time","utc"),debug:s.boolean(),errors:{escapeHtml:s.boolean(),label:s.valid("path","key",!1),language:[s.string(),s.object().ref()],render:s.boolean(),stack:s.boolean(),wrap:{label:n.wrap,array:n.wrap,string:n.wrap}},externals:s.boolean(),messages:s.object(),noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:s.valid("required","optional","forbidden"),skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()}).strict(),n.nameRx=/^[a-zA-Z0-9]\w*$/,n.rule=s.object({alias:s.array().items(s.string().pattern(n.nameRx)).single(),args:s.array().items(s.string(),s.object({name:s.string().pattern(n.nameRx).required(),ref:s.boolean(),assert:s.alternatives([s.function(),s.object().schema()]).conditional("ref",{is:!0,then:s.required()}),normalize:s.function(),message:s.string().when("assert",{is:s.function(),then:s.required()})})),convert:s.boolean(),manifest:s.boolean(),method:s.function().allow(!1),multi:s.boolean(),validate:s.function()}),i.extension=s.object({type:s.alternatives([s.string(),s.object().regex()]).required(),args:s.function(),cast:s.object().pattern(n.nameRx,s.object({from:s.function().maxArity(1).required(),to:s.function().minArity(1).maxArity(2).required()})),base:s.object().schema().when("type",{is:s.object().regex(),then:s.forbidden()}),coerce:[s.function().maxArity(3),s.object({method:s.function().maxArity(3).required(),from:s.array().items(s.string()).single()})],flags:s.object().pattern(n.nameRx,s.object({setter:s.string(),default:s.any()})),manifest:{build:s.function().arity(2)},messages:[s.object(),s.string()],modifiers:s.object().pattern(n.nameRx,s.function().minArity(1).maxArity(2)),overrides:s.object().pattern(n.nameRx,s.function()),prepare:s.function().maxArity(3),rebuild:s.function().arity(1),rules:s.object().pattern(n.nameRx,n.rule),terms:s.object().pattern(n.nameRx,s.object({init:s.array().allow(null).required(),manifest:s.object().pattern(/.+/,[s.valid("schema","single"),s.object({mapped:s.object({from:s.string().required(),to:s.string().required()}).required()})])})),validate:s.function().maxArity(3)}).strict(),i.extensions=s.array().items(s.object(),s.function().arity(1)).strict(),n.desc={buffer:s.object({buffer:s.string()}),func:s.object({function:s.function().required(),options:{literal:!0}}),override:s.object({override:!0}),ref:s.object({ref:s.object({type:s.valid("value","global","local"),path:s.array().required(),separator:s.string().length(1).allow(!1),ancestor:s.number().min(0).integer().allow("root"),map:s.array().items(s.array().length(2)).min(1),adjust:s.function(),iterables:s.boolean(),in:s.boolean(),render:s.boolean()}).required()}),regex:s.object({regex:s.string().min(3)}),special:s.object({special:s.valid("deep").required()}),template:s.object({template:s.string().required(),options:s.object()}),value:s.object({value:s.alternatives([s.object(),s.array()]).required()})},n.desc.entity=s.alternatives([s.array().items(s.link("...")),s.boolean(),s.function(),s.number(),s.string(),n.desc.buffer,n.desc.func,n.desc.ref,n.desc.regex,n.desc.special,n.desc.template,n.desc.value,s.link("/")]),n.desc.values=s.array().items(null,s.boolean(),s.function(),s.number().allow(1/0,-1/0),s.string().allow(""),s.symbol(),n.desc.buffer,n.desc.func,n.desc.override,n.desc.ref,n.desc.regex,n.desc.template,n.desc.value),n.desc.messages=s.object().pattern(/.+/,[s.string(),n.desc.template,s.object().pattern(/.+/,[s.string(),n.desc.template])]),i.description=s.object({type:s.string().required(),flags:s.object({cast:s.string(),default:s.any(),description:s.string(),empty:s.link("/"),failover:n.desc.entity,id:s.string(),label:s.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:s.boolean(),unit:s.string()}).unknown(),preferences:{allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),convert:s.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:s.boolean(),label:["path","key"],language:[s.string(),n.desc.ref],wrap:{label:n.wrap,array:n.wrap}},externals:s.boolean(),messages:n.desc.messages,noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:["required","optional","forbidden"],skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()},allow:n.desc.values,invalid:n.desc.values,rules:s.array().min(1).items({name:s.string().required(),args:s.object().min(1),keep:s.boolean(),message:[s.string(),n.desc.messages],warn:s.boolean()}),keys:s.object().pattern(/.*/,s.link("/")),link:n.desc.ref}).pattern(/^[a-z]\w*$/,s.any())},493:(t,i,e)=>{const s=e(8571),n=e(9621),r=e(8160),o={value:Bo("value")};t.exports=o.State=class{localize(t,i,e){void 0===i&&(i=null),void 0===e&&(e=null);const s=new o.State(t,i,this);return e&&s.schemas&&(s.schemas=[o.schemas(e),...s.schemas]),s}nest(t,i){const e=new o.State(this.path,this.ancestors,this);return e.schemas=e.schemas&&[o.schemas(t),...e.schemas],e.debug=i,e}shadow(t,i){this.mainstay.shadow=this.mainstay.shadow||new o.Shadow,this.mainstay.shadow.set(this.path,t,i)}snapshot(){this.mainstay.shadow&&(this.lw=s(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.lw),this.lw=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.lw),this.lw=void 0),this.mainstay.commit()}constructor(t,i,e){this.path=t,this.ancestors=i,this.mainstay=e.mainstay,this.schemas=e.schemas,this.debug=null}},o.schemas=function(t){return r.isSchema(t)?{schema:t}:t},o.Shadow=class{set(t,i,e){if(!t.length||"strip"===e&&"number"==typeof t[t.length-1])return;this.Ov=this.Ov||new Map;let s=this.Ov;for(let i=0;i<t.length;++i){const e=t[i];let n=s.get(e);n||(n=new Map,s.set(e,n)),s=n}s[o.value]=i}get(t){const i=this.node(t);if(i)return i[o.value]}node(t){if(this.Ov)return n(this.Ov,t,{iterables:!0})}override(t,i){if(!this.Ov)return;const e=t.slice(0,-1),s=t[t.length-1],r=n(this.Ov,e,{iterables:!0});i?r.set(s,i):r&&r.delete(s)}constructor(){this.Ov=null}}},3328:(t,i,e)=>{const s=e(375),n=e(8571),r=e(5277),o=e(1447),h=e(8160),a=e(6354),u=e(6133),c={symbol:Bo("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join("\x01"),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};t.exports=c.Template=class{dw(){if(!this.source.includes("{"))return;const t=c.encode(this.source),i=c.split(t);let e=!1;const s=[],n=i.shift();n&&s.push(n);for(const t of i){const i="{"!==t[0],n=i?"}":"}}",r=t.indexOf(n);if(-1===r||"{"===t[1]){s.push("{".concat(c.decode(t)));continue}let o=t.slice(i?0:1,r);const h=":"===o[0];h&&(o=o.slice(1));const a=this.fw(c.decode(o),{raw:i,wrapped:h});s.push(a),"string"!=typeof a&&(e=!0);const u=t.slice(r+n.length);u&&s.push(c.decode(u))}e?this.iw=s:this.rendered=s.join("")}static date(t,i){return c.dateFormat[i.dateFormat].call(t)}describe(t){if(void 0===t&&(t={}),!this.gw&&t.compact)return this.source;const i={template:this.source};return this.gw&&(i.options=this.gw),this._w&&(i.functions=this._w),i}static build(t){return new c.Template(t.template,t.options||t.functions?g(d({},t.options),{functions:t.functions}):void 0)}isDynamic(){return!!this.iw}static isTemplate(t){return!!t&&!!t[h.symbols.template]}refs(){if(!this.iw)return;const t=[];for(const i of this.iw)"string"!=typeof i&&t.push(...i.refs);return t}resolve(t,i,e,s){return this.iw&&1===this.iw.length?this.ww(this.iw[0],t,i,e,s,{}):this.render(t,i,e,s)}ww(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];return t.ref?t.ref.resolve(...e):t.formula.evaluate(e)}render(t,i,e,s,n){if(void 0===n&&(n={}),!this.isDynamic())return this.rendered;const o=[];for(const h of this.iw)if("string"==typeof h)o.push(h);else{const a=this.ww(h,t,i,e,s,n),u=c.stringify(a,t,i,e,s,n);if(void 0!==u){const t=h.raw||!1===(n.errors&&n.errors.escapeHtml)?u:r(u);o.push(c.wrap(t,h.wrapped&&e.errors.wrap.label))}}return o.join("")}fw(t,i){let{raw:e,wrapped:s}=i;const n=[],r=t=>{const i=u.create(t,this.gw);return n.push(i),t=>{const e=i.resolve(...t);return void 0!==e?e:null}};try{const i=this._w?d(d({},c.functions),this._w):c.functions;var h=new o.Parser(t,{reference:r,functions:i,constants:c.constants})}catch(i){throw i.message='Invalid template variable "'.concat(t,'" fails due to: ').concat(i.message),i}if(h.single){if("reference"===h.single.type){const t=n[0];return{ref:t,raw:e,refs:n,wrapped:s||"local"===t.type&&"label"===t.key}}return c.stringify(h.single.value)}return{formula:h,raw:e,refs:n}}toString(){return this.source}constructor(t,i){if(s("string"==typeof t,"Template source must be a string"),s(!t.includes("\0")&&!t.includes("\x01"),"Template source cannot contain reserved control characters"),this.source=t,this.rendered=t,this.iw=null,i){const t=i,{functions:e}=t,r=w(t,["functions"]);this.gw=_.keys(r).length?n(r):void 0,this._w=e,this._w&&(s(_.keys(this._w).every((t=>"string"==typeof t)),"Functions keys must be strings"),s(_.values(this._w).every((t=>"function"==typeof t)),"Functions values must be functions"))}else this.gw=void 0,this._w=void 0;this.dw()}},c.Template.prototype[h.symbols.template]=!0,c.Template.prototype.isImmutable=!0,c.encode=function(t){return t.replace(/\\(\{+)/g,((t,i)=>c.opens.slice(0,i.length))).replace(/\\(\}+)/g,((t,i)=>c.closes.slice(0,i.length)))},c.decode=function(t){return t.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},c.split=function(t){const i=[];let e="";for(let s=0;s<t.length;++s){const n=t[s];if("{"===n){let n="";for(;s+1<t.length&&"{"===t[s+1];)n+="{",++s;i.push(e),e=n}else e+=n}return i.push(e),i},c.wrap=function(t,i){return i?1===i.length?"".concat(i).concat(t).concat(i):"".concat(i[0]).concat(t).concat(i[1]):t},c.stringify=function(t,i,e,s,n,r){void 0===r&&(r={});const o=typeof t,h=s&&s.errors&&s.errors.wrap||{};let a=!1;if(u.isRef(t)&&t.render&&(a=t.in,t=t.resolve(i,e,s,n,d({in:t.in},r))),null===t)return"null";if("string"===o)return c.wrap(t,r.arrayItems&&h.string);if("number"===o||"function"===o||"symbol"===o)return t.toString();if("object"!==o)return JSON.stringify(t);if(t instanceof Date)return c.Template.date(t,s);if(t instanceof Map){const i=[];for(const[e,s]of t.entries())i.push("".concat(e.toString()," -> ").concat(s.toString()));t=i}if(!Array.isArray(t))return t.toString();const l=[];for(const o of t)l.push(c.stringify(o,i,e,s,n,d({arrayItems:!0},r)));return c.wrap(l.join(", "),!a&&h.array)},c.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},c.functions={if:(t,i,e)=>t?i:e,length:t=>"string"==typeof t?t.length:t&&"object"==typeof t?Array.isArray(t)?t.length:_.keys(t).length:null,msg(t){const[i,e,s,n,r]=this,o=r.messages;if(!o)return"";const h=a.template(i,o[0],t,e,s)||a.template(i,o[1],t,e,s);return h?h.render(i,e,s,n,r):""},number:t=>"number"==typeof t?t:"string"==typeof t?S(t):"boolean"==typeof t?t?1:0:t instanceof Date?t.getTime():null}},4946:(t,i,e)=>{const s=e(375),n=e(1687),r=e(8068),o=e(8160),h=e(3292),a=e(6354),u=e(6133),c={};t.exports=r.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:u.toSibling}},args:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];return 1===e.length&&Array.isArray(e[0])?t.try(...e[0]):t.try(...e)},validate(t,i){const{schema:e,error:s,state:r,prefs:o}=i;if(e.Lv.match){const i=[],h=[];for(let s=0;s<e.$_terms.matches.length;++s){const n=e.$_terms.matches[s],a=r.nest(n.schema,"match.".concat(s));a.snapshot();const u=n.schema.$_validate(t,a,o);u.errors?(h.push(u.errors),a.restore()):(i.push(u.value),a.commit())}if(0===i.length)return{errors:s("alternatives.any",{details:h.map((t=>a.details(t,{override:!1})))})};if("one"===e.Lv.match)return 1===i.length?{value:i[0]}:{errors:s("alternatives.one")};if(i.length!==e.$_terms.matches.length)return{errors:s("alternatives.all",{details:h.map((t=>a.details(t,{override:!1})))})};const u=t=>t.$_terms.matches.some((t=>"object"===t.schema.type||"alternatives"===t.schema.type&&u(t.schema)));return u(e)?{value:i.reduce(((t,i)=>n(t,i,{mergeArrays:!1})))}:{value:i[i.length-1]}}const h=[];for(let i=0;i<e.$_terms.matches.length;++i){const s=e.$_terms.matches[i];if(s.schema){const e=r.nest(s.schema,"match.".concat(i));e.snapshot();const n=s.schema.$_validate(t,e,o);if(!n.errors)return e.commit(),n;e.restore(),h.push({schema:s.schema,reports:n.errors});continue}const n=s.ref?s.ref.resolve(t,r,o):t,a=s.is?[s]:s.switch;for(let e=0;e<a.length;++e){const h=a[e],{is:u,then:c,otherwise:l}=h,d="match.".concat(i).concat(s.switch?"."+e:"");if(u.$_match(n,r.nest(u,"".concat(d,".is")),o)){if(c)return c.$_validate(t,r.nest(c,"".concat(d,".then")),o)}else if(l)return l.$_validate(t,r.nest(l,"".concat(d,".otherwise")),o)}}return c.errors(h,i)},rules:{conditional:{method(t,i){s(!this.Lv.mw,"Unreachable condition"),s(!this.Lv.match,"Cannot combine match mode",this.Lv.match,"with conditional rule"),s(void 0===i.break,"Cannot use break option with alternatives conditional");const e=this.clone(),n=h.when(e,t,i),r=n.is?[n]:n.switch;for(const t of r)if(t.then&&t.otherwise){e.$_setFlag("mw",!0,{clone:!1});break}return e.$_terms.matches.push(n),e.$_mutateRebuild()}},match:{method(t){if(s(["any","one","all"].includes(t),"Invalid alternatives match mode",t),"any"!==t)for(const i of this.$_terms.matches)s(i.schema,"Cannot combine match mode",t,"with conditional rules");return this.$_setFlag("match",t)}},try:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];s(i.length,"Missing alternative schemas"),o.verifyFlat(i,"try"),s(!this.Lv.mw,"Unreachable condition");const n=this.clone();for(const t of i)n.$_terms.matches.push({schema:n.$_compile(t)});return n.$_mutateRebuild()}}},overrides:{label(t){return this.$_parent("label",t).$_modify({each:(i,e)=>"is"!==e.path[0]&&"string"!=typeof i.Lv.label?i.label(t):void 0,ref:!1})}},rebuild(t){t.$_modify({each:i=>{o.isSchema(i)&&"array"===i.type&&t.$_setFlag("pw",!0,{clone:!1})}})},manifest:{build(t,i){if(i.matches)for(const e of i.matches){const{schema:i,ref:s,is:n,not:r,then:o,otherwise:h}=e;t=i?t.try(i):s?t.conditional(s,{is:n,then:o,not:r,otherwise:h,switch:e.switch}):t.conditional(n,{then:o,otherwise:h})}return t}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),c.errors=function(t,i){let{error:e,state:s}=i;if(!t.length)return{errors:e("alternatives.any")};if(1===t.length)return{errors:t[0].reports};const n=new Set,r=[];for(const{reports:i,schema:o}of t){if(i.length>1)return c.unmatched(t,e);const h=i[0];if(h instanceof a.Report==0)return c.unmatched(t,e);if(h.state.path.length!==s.path.length){r.push({type:o.type,report:h});continue}if("any.only"===h.code){for(const t of h.local.valids)n.add(t);continue}const[u,l]=h.code.split(".");"base"!==l?r.push({type:o.type,report:h}):"object.base"===h.code?n.add(h.local.type):n.add(u)}return r.length?1===r.length?{errors:r[0].report}:c.unmatched(t,e):{errors:e("alternatives.types",{types:[...n]})}},c.unmatched=function(t,i){const e=[];for(const i of t)e.push(...i.reports);return{errors:i("alternatives.match",a.details(e,{override:!1}))}}},8068:(t,i,e)=>{const s=e(375),n=e(7629),r=e(8160),o=e(6914);t.exports=n.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(t,i){return s("function"==typeof t,"Method must be a function"),s(void 0===i||i&&"string"==typeof i,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:t,description:i}})},validate(t,i,e){let{method:s}=e;try{return s(t,i)}catch(t){return i.error("any.custom",{error:t})}},args:["method","description"],multi:!0},messages:{method(t){return this.prefs({messages:t})}},shared:{method(t){s(r.isSchema(t)&&t.Lv.id,"Schema must be a schema with an id");const i=this.clone();return i.$_terms.shared=i.$_terms.shared||[],i.$_terms.shared.push(t),i.$_mutateRegister(t),i}},warning:{method(t,i){return s(t&&"string"==typeof t,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:t,local:i},warn:!0})},validate:(t,i,e)=>{let{code:s,local:n}=e;return i.error(s,n)},args:["code","local"],multi:!0}},modifiers:{keep(t,i){void 0===i&&(i=!0),t.keep=i},message(t,i){t.message=o.compile(i)},warn(t,i){void 0===i&&(i=!0),t.warn=i}},manifest:{build(t,i){for(const e in i){const s=i[e];if(["examples","externals","metas","notes","tags"].includes(e))for(const i of s)t=t[e.slice(0,-1)](i);else if("alterations"!==e)if("whens"!==e){if("shared"===e)for(const i of s)t=t.shared(i)}else for(const i of s){const{ref:e,is:s,not:n,then:r,otherwise:o,concat:h}=i;t=h?t.concat(h):e?t.when(e,{is:s,not:n,then:r,otherwise:o,switch:i.switch,break:i.break}):t.when(s,{then:r,otherwise:o,break:i.break})}else{const i={};for(const{target:t,adjuster:e}of s)i[t]=e;t=t.alter(i)}}return t}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(t,i,e)=>{const s=e(375),n=e(9474),r=e(9621),o=e(8068),h=e(8160),a=e(3292),u={};t.exports=o.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},Aw:{init:[]},yw:{init:[]},Mw:{init:[]}},coerce:{from:"object",method(t,i){let{schema:e,state:s,prefs:n}=i;if(!Array.isArray(t))return;const r=e.$_getRule("sort");return r?u.sort(e,t,r.args.options,s,n):void 0}},validate(t,i){let{schema:e,error:s}=i;if(!Array.isArray(t)){if(e.Lv.single){const i=[t];return i[h.symbols.arraySingle]=!0,{value:i}}return{errors:s("array.base")}}if(e.$_getRule("items")||e.$_terms.externals)return{value:t.slice()}},rules:{has:{method(t){t=this.$_compile(t,{appendPath:!0});const i=this.$_addRule({name:"has",args:{schema:t}});return i.$_mutateRegister(t),i},validate(t,i,e){let{state:s,prefs:n,error:r}=i,{schema:o}=e;const h=[t,...s.ancestors];for(let i=0;i<t.length;++i){const e=s.localize([...s.path,i],h,o);if(o.$_match(t[i],e,n))return t}const a=o.Lv.label;return a?r("array.hasKnown",{patternLabel:a}):r("array.hasUnknown",null)},multi:!0},items:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];h.verifyFlat(i,"items");const s=this.$_addRule("items");for(let t=0;t<i.length;++t){const e=h.tryWithPath((()=>this.$_compile(i[t])),t,{append:!0});s.$_terms.items.push(e)}return s.$_mutateRebuild()},validate(t,i){let{schema:e,error:s,state:n,prefs:r,errorsArray:o}=i;const a=e.$_terms.Mw.slice(),c=e.$_terms.ordered.slice(),l=[...e.$_terms.yw,...a],d=!t[h.symbols.arraySingle];delete t[h.symbols.arraySingle];const f=o();let g=t.length;for(let i=0;i<g;++i){const o=t[i];let h=!1,_=!1;const v=d?i:new Number(i),w=[...n.path,v];if(!e.Lv.sparse&&void 0===o){if(f.push(s("array.sparse",{key:v,path:w,pos:i,value:void 0},n.localize(w))),r.abortEarly)return f;c.shift();continue}const m=[t,...n.ancestors];for(const t of e.$_terms.Aw)if(t.$_match(o,n.localize(w,m,t),r,{presence:"ignore"})){if(f.push(s("array.excludes",{pos:i,value:o},n.localize(w))),r.abortEarly)return f;h=!0,c.shift();break}if(h)continue;if(e.$_terms.ordered.length){if(c.length){const h=c.shift(),a=h.$_validate(o,n.localize(w,m,h),r);if(a.errors){if(f.push(...a.errors),r.abortEarly)return f}else if("strip"===h.Lv.result)u.fastSplice(t,i),--i,--g;else{if(!e.Lv.sparse&&void 0===a.value){if(f.push(s("array.sparse",{key:v,path:w,pos:i,value:void 0},n.localize(w))),r.abortEarly)return f;continue}t[i]=a.value}continue}if(!e.$_terms.items.length){if(f.push(s("array.orderedLength",{pos:i,limit:e.$_terms.ordered.length})),r.abortEarly)return f;break}}const p=[];let A=a.length;for(let h=0;h<A;++h){const c=n.localize(w,m,a[h]);c.snapshot();const l=a[h].$_validate(o,c,r);if(p[h]=l,!l.errors){if(c.commit(),t[i]=l.value,_=!0,u.fastSplice(a,h),--h,--A,!e.Lv.sparse&&void 0===l.value&&(f.push(s("array.sparse",{key:v,path:w,pos:i,value:void 0},n.localize(w))),r.abortEarly))return f;break}c.restore()}if(_)continue;const y=r.stripUnknown&&!!r.stripUnknown.arrays||!1;A=l.length;for(const c of l){let l;const d=a.indexOf(c);if(-1!==d)l=p[d];else{const a=n.localize(w,m,c);if(a.snapshot(),l=c.$_validate(o,a,r),!l.errors){a.commit(),"strip"===c.Lv.result?(u.fastSplice(t,i),--i,--g):e.Lv.sparse||void 0!==l.value?t[i]=l.value:(f.push(s("array.sparse",{key:v,path:w,pos:i,value:void 0},n.localize(w))),h=!0),_=!0;break}a.restore()}if(1===A){if(y){u.fastSplice(t,i),--i,--g,_=!0;break}if(f.push(...l.errors),r.abortEarly)return f;h=!0;break}}if(!h&&(e.$_terms.yw.length||e.$_terms.Mw.length)&&!_){if(y){u.fastSplice(t,i),--i,--g;continue}if(f.push(s("array.includes",{pos:i,value:o},n.localize(w))),r.abortEarly)return f}}return a.length&&u.fillMissedErrors(e,f,a,t,n,r),c.length&&(u.fillOrderedErrors(e,f,c,t,n,r),f.length||u.fillDefault(c,t,n,r)),f.length?f:t},priority:!0,manifest:!1},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,i,e,s)=>{let{limit:n}=e,{name:r,operator:o,args:a}=s;return h.compare(t.length,n,o)?t:i.error("array."+r,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},ordered:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];h.verifyFlat(i,"ordered");const s=this.$_addRule("items");for(let t=0;t<i.length;++t){const e=h.tryWithPath((()=>this.$_compile(i[t])),t,{append:!0});u.validateSingle(e,s),s.$_mutateRegister(e),s.$_terms.ordered.push(e)}return s.$_mutateRebuild()}},single:{method(t){const i=void 0===t||!!t;return s(!i||!this.Lv.pw,"Cannot specify single rule when array has array items"),this.$_setFlag("single",i)}},sort:{method(t){void 0===t&&(t={}),h.assertOptions(t,["by","order"]);const i={order:t.order||"ascending"};return t.by&&(i.by=a.ref(t.by,{ancestor:0}),s(!i.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:i}})},validate(t,i,e){let{error:s,state:n,prefs:r,schema:o}=i,{options:h}=e;const{value:a,errors:c}=u.sort(o,t,h,n,r);if(c)return c;for(let i=0;i<t.length;++i)if(t[i]!==a[i])return s("array.sort",{order:h.order,by:h.by?h.by.key:"value"});return t},convert:!0},sparse:{method(t){const i=void 0===t||!!t;return this.Lv.sparse===i?this:(i?this.clone():this.$_addRule("items")).$_setFlag("sparse",i,{clone:!1})}},unique:{method(t,i){void 0===i&&(i={}),s(!t||"function"==typeof t||"string"==typeof t,"comparator must be a function or a string"),h.assertOptions(i,["ignoreUndefined","separator"]);const e={name:"unique",args:{options:i,comparator:t}};if(t)if("string"==typeof t){const s=h.default(i.separator,".");e.path=s?t.split(s):[t]}else e.comparator=t;return this.$_addRule(e)},validate(t,i,e,o){let{state:h,error:a,schema:u}=i,{comparator:c,options:l}=e,{comparator:d,path:f}=o;const g={string:_.create(null),number:_.create(null),undefined:_.create(null),boolean:_.create(null),bigint:_.create(null),object:new Map,function:new Map,custom:new Map},v=d||n,w=l.ignoreUndefined;for(let i=0;i<t.length;++i){const e=f?r(t[i],f):t[i],n=d?g.custom:g[typeof e];if(s(n,"Failed to find unique map container for type",typeof e),n instanceof Map){const s=n.entries();let r;for(;!(r=s.next()).done;)if(v(r.value[0],e)){const e=h.localize([...h.path,i],[t,...h.ancestors]),s={pos:i,value:t[i],dupePos:r.value[1],dupeValue:t[r.value[1]]};return f&&(s.path=c),a("array.unique",s,e)}n.set(e,i)}else{if((!w||void 0!==e)&&void 0!==n[e]){const s={pos:i,value:t[i],dupePos:n[e],dupeValue:t[n[e]]};return f&&(s.path=c),a("array.unique",s,h.localize([...h.path,i],[t,...h.ancestors]))}n[e]=i}}return t},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(t,i)=>new Set(t)}},rebuild(t){t.$_terms.yw=[],t.$_terms.Aw=[],t.$_terms.Mw=[];for(const i of t.$_terms.items)u.validateSingle(i,t),"required"===i.Lv.presence?t.$_terms.Mw.push(i):"forbidden"===i.Lv.presence?t.$_terms.Aw.push(i):t.$_terms.yw.push(i);for(const i of t.$_terms.ordered)u.validateSingle(i,t)},manifest:{build:(t,i)=>(i.items&&(t=t.items(...i.items)),i.ordered&&(t=t.ordered(...i.ordered)),t)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),u.fillMissedErrors=function(t,i,e,s,n,r){const o=[];let h=0;for(const t of e){const i=t.Lv.label;i?o.push(i):++h}o.length?h?i.push(t.$_createError("array.includesRequiredBoth",s,{knownMisses:o,unknownMisses:h},n,r)):i.push(t.$_createError("array.includesRequiredKnowns",s,{knownMisses:o},n,r)):i.push(t.$_createError("array.includesRequiredUnknowns",s,{unknownMisses:h},n,r))},u.fillOrderedErrors=function(t,i,e,s,n,r){const o=[];for(const t of e)"required"===t.Lv.presence&&o.push(t);o.length&&u.fillMissedErrors(t,i,o,s,n,r)},u.fillDefault=function(t,i,e,s){const n=[];let r=!0;for(let o=t.length-1;o>=0;--o){const h=t[o],a=[i,...e.ancestors],u=h.$_validate(void 0,e.localize(e.path,a,h),s).value;if(r){if(void 0===u)continue;r=!1}n.unshift(u)}n.length&&i.push(...n)},u.fastSplice=function(t,i){let e=i;for(;e<t.length;)t[e++]=t[e];--t.length},u.validateSingle=function(t,i){("array"===t.type||t.Lv.pw)&&(s(!i.Lv.single,"Cannot specify array item with single rule enabled"),i.$_setFlag("pw",!0,{clone:!1}))},u.sort=function(t,i,e,s,n){const r="ascending"===e.order?1:-1,o=-1*r,h=r,a=(a,c)=>{let l=u.compare(a,c,o,h);if(null!==l||(e.by&&(a=e.by.resolve(a,s,n),c=e.by.resolve(c,s,n)),l=u.compare(a,c,o,h),null!==l))return l;const d=typeof a;if(d!==typeof c)throw t.$_createError("array.sort.mismatching",i,null,s,n);if("number"!==d&&"string"!==d)throw t.$_createError("array.sort.unsupported",i,{type:d},s,n);return"number"===d?(a-c)*r:a<c?o:h};try{return{value:i.slice().sort(a)}}catch(t){return{errors:t}}},u.compare=function(t,i,e,s){return t===i?0:void 0===t?1:void 0===i?-1:null===t?s:null===i?e:null}},4937:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o=e(2036),h={isBool:function(t){return"boolean"==typeof t}};t.exports=n.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(t,i){let{schema:e}=i;if("boolean"!=typeof t){if("string"==typeof t){const i=e.Lv.sensitive?t:t.toLowerCase();t="true"===i||"false"!==i&&t}return"boolean"!=typeof t&&(t=e.$_terms.truthy&&e.$_terms.truthy.has(t,null,null,!e.Lv.sensitive)||(!e.$_terms.falsy||!e.$_terms.falsy.has(t,null,null,!e.Lv.sensitive))&&t),{value:t}}},validate(t,i){let{error:e}=i;if("boolean"!=typeof t)return{value:t,errors:e("boolean.base")}},rules:{truthy:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];r.verifyFlat(i,"truthy");const n=this.clone();n.$_terms.truthy=n.$_terms.truthy||new o;for(let t=0;t<i.length;++t){const e=i[t];s(void 0!==e,"Cannot call truthy with undefined"),n.$_terms.truthy.add(e)}return n}},falsy:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];r.verifyFlat(i,"falsy");const n=this.clone();n.$_terms.falsy=n.$_terms.falsy||new o;for(let t=0;t<i.length;++t){const e=i[t];s(void 0!==e,"Cannot call falsy with undefined"),n.$_terms.falsy.add(e)}return n}},sensitive:{method(t){return void 0===t&&(t=!0),this.$_setFlag("sensitive",t)}}},cast:{number:{from:h.isBool,to:(t,i)=>t?1:0},string:{from:h.isBool,to:(t,i)=>t?"true":"false"}},manifest:{build:(t,i)=>(i.truthy&&(t=t.truthy(...i.truthy)),i.falsy&&(t=t.falsy(...i.falsy)),t)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o=e(3328),h={isDate:function(t){return t instanceof Date}};t.exports=n.extend({type:"date",coerce:{from:["number","string"],method:(t,i)=>{let{schema:e}=i;return{value:h.parse(t,e.Lv.format)||t}}},validate(t,i){let{schema:e,error:s,prefs:n}=i;if(t instanceof Date&&!j(t.getTime()))return;const r=e.Lv.format;return n.convert&&r&&"string"==typeof t?{value:t,errors:s("date.format",{format:r})}:{value:t,errors:s("date.base")}},rules:{compare:{method:!1,validate(t,i,e,s){let{date:n}=e,{name:o,operator:h,args:a}=s;const u="now"===n?Date.now():n.getTime();return r.compare(t.getTime(),u,h)?t:i.error("date."+o,{limit:a.date,value:t})},args:[{name:"date",ref:!0,normalize:t=>"now"===t?t:h.parse(t),assert:t=>null!==t,message:"must have a valid date format"}]},format:{method(t){return s(["iso","javascript","unix"].includes(t),"Unknown date format",t),this.$_setFlag("format",t)}},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{date:t},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{date:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{date:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{date:t},operator:">="})}},timestamp:{method(t){return void 0===t&&(t="javascript"),s(["javascript","unix"].includes(t),'"type" must be one of "javascript, unix"'),this.format(t)}}},cast:{number:{from:h.isDate,to:(t,i)=>t.getTime()},string:{from:h.isDate,to:(t,i)=>{let{prefs:e}=i;return o.date(t,e)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),h.parse=function(t,i){if(t instanceof Date)return t;if("string"!=typeof t&&(j(t)||!isFinite(t))||/^\s*$/.test(t))return null;if("iso"===i)return r.isIsoDate(t)?h.date(t.toString()):null;const e=t;if("string"==typeof t&&/^[+-]?\d+(\.\d+)?$/.test(t)&&(t=S(t)),i){if("javascript"===i)return h.date(1*t);if("unix"===i)return h.date(1e3*t);if("string"==typeof e)return null}return h.date(t)},h.date=function(t){const i=new Date(t);return j(i.getTime())?null:i}},390:(t,i,e)=>{const s=e(375),n=e(7824);t.exports=n.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:t}})},validate:(t,i,e)=>{let{n:s}=e;return t.length===s?t:i.error("function.arity",{n:s})}},class:{method(){return this.$_addRule("class")},validate:(t,i)=>/^\s*class\s/.test(t.toString())?t:i.error("function.class",{value:t})},minArity:{method(t){return s(Number.isSafeInteger(t)&&t>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:t}})},validate:(t,i,e)=>{let{n:s}=e;return t.length>=s?t:i.error("function.minArity",{n:s})}},maxArity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:t}})},validate:(t,i,e)=>{let{n:s}=e;return t.length<=s?t:i.error("function.maxArity",{n:s})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(t,i,e)=>{const s=e(978),n=e(375),r=e(8571),o=e(3652),h=e(8068),a=e(8160),u=e(3292),c=e(6354),l=e(6133),f=e(3328),v={renameDefaults:{alias:!1,multiple:!1,override:!1}};t.exports=h.extend({type:"Tw",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(t,i)=>t.keys(i),validate(t,i){let{schema:e,error:s,state:n,prefs:r}=i;if(!t||typeof t!==e.$_property("typeof")||Array.isArray(t))return{value:t,errors:s("object.base",{type:e.$_property("typeof")})};if(!(e.$_terms.renames||e.$_terms.dependencies||e.$_terms.keys||e.$_terms.patterns||e.$_terms.externals))return;t=v.clone(t,r);const o=[];if(e.$_terms.renames&&!v.rename(e,t,n,r,o))return{value:t,errors:o};if(!e.$_terms.keys&&!e.$_terms.patterns&&!e.$_terms.dependencies)return{value:t,errors:o};const h=new Set(_.keys(t));if(e.$_terms.keys){const i=[t,...n.ancestors];for(const s of e.$_terms.keys){const e=s.key,a=t[e];h.delete(e);const u=n.localize([...n.path,e],i,s),c=s.schema.$_validate(a,u,r);if(c.errors){if(r.abortEarly)return{value:t,errors:c.errors};void 0!==c.value&&(t[e]=c.value),o.push(...c.errors)}else"strip"===s.schema.Lv.result||void 0===c.value&&void 0!==a?delete t[e]:void 0!==c.value&&(t[e]=c.value)}}if(h.size||e.Lv.Sw){const i=v.unknown(e,t,h,o,n,r);if(i)return i}if(e.$_terms.dependencies)for(const i of e.$_terms.dependencies){if(null!==i.key&&!1===v.isPresent(i.options)(i.key.resolve(t,n,r,null,{shadow:!1})))continue;const s=v.dependencies[i.rel](e,i,t,n,r);if(s){const i=e.$_createError(s.code,t,s.context,n,r);if(r.abortEarly)return{value:t,errors:i};o.push(i)}}return{value:t,errors:o}},rules:{and:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"and"),v.dependency(this,"and",null,i)}},append:{method(t){return null==t||0===_.keys(t).length?this:this.keys(t)}},assert:{method(t,i,e){f.isTemplate(t)||(t=u.ref(t)),n(void 0===e||"string"==typeof e,"Message must be a string"),i=this.$_compile(i,{appendPath:!0});const s=this.$_addRule({name:"assert",args:{subject:t,schema:i,message:e}});return s.$_mutateRegister(t),s.$_mutateRegister(i),s},validate(t,i,e){let{error:s,prefs:n,state:r}=i,{subject:o,schema:h,message:a}=e;const u=o.resolve(t,r,n),c=l.isRef(o)?o.absolute(r):[];return h.$_match(u,r.localize(c,[t,...r.ancestors],h),n)?t:s("object.assert",{subject:o,message:a})},args:["subject","schema","message"],multi:!0},instance:{method(t,i){return n("function"==typeof t,"constructor must be a function"),i=i||t.name,this.$_addRule({name:"instance",args:{constructor:t,name:i}})},validate:(t,i,e)=>{let{constructor:s,name:n}=e;return t instanceof s?t:i.error("object.instance",{type:n,value:t})},args:["constructor","name"]},keys:{method(t){n(void 0===t||"object"==typeof t,"Object schema must be a valid object"),n(!a.isSchema(t),"Object schema cannot be a joi schema");const i=this.clone();if(t)if(_.keys(t).length){i.$_terms.keys=i.$_terms.keys?i.$_terms.keys.filter((i=>!t.hasOwnProperty(i.key))):new v.Keys;for(const e in t)a.tryWithPath((()=>i.$_terms.keys.push({key:e,schema:this.$_compile(t[e])})),e)}else i.$_terms.keys=new v.Keys;else i.$_terms.keys=null;return i.$_mutateRebuild()}},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,i,e,s)=>{let{limit:n}=e,{name:r,operator:o,args:h}=s;return a.compare(_.keys(t).length,n,o)?t:i.error("object."+r,{limit:h.limit,value:t})},args:[{name:"limit",ref:!0,assert:a.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},nand:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"nand"),v.dependency(this,"nand",null,i)}},or:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"or"),v.dependency(this,"or",null,i)}},oxor:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return v.dependency(this,"oxor",null,i)}},pattern:{method(t,i,e){void 0===e&&(e={});const s=t instanceof RegExp;s||(t=this.$_compile(t,{appendPath:!0})),n(void 0!==i,"Invalid rule"),a.assertOptions(e,["fallthrough","matches"]),s&&n(!t.flags.includes("g")&&!t.flags.includes("y"),"pattern should not use global or sticky mode"),i=this.$_compile(i,{appendPath:!0});const r=this.clone();r.$_terms.patterns=r.$_terms.patterns||[];const o={[s?"regex":"schema"]:t,rule:i};return e.matches&&(o.matches=this.$_compile(e.matches),"array"!==o.matches.type&&(o.matches=o.matches.$_root.array().items(o.matches)),r.$_mutateRegister(o.matches),r.$_setFlag("Sw",!0,{clone:!1})),e.fallthrough&&(o.fallthrough=!0),r.$_terms.patterns.push(o),r.$_mutateRegister(i),r}},ref:{method(){return this.$_addRule("ref")},validate:(t,i)=>l.isRef(t)?t:i.error("object.refType",{value:t})},regex:{method(){return this.$_addRule("regex")},validate:(t,i)=>t instanceof RegExp?t:i.error("object.regex",{value:t})},rename:{method(t,i,e){void 0===e&&(e={}),n("string"==typeof t||t instanceof RegExp,"Rename missing the from argument"),n("string"==typeof i||i instanceof f,"Invalid rename to argument"),n(i!==t,"Cannot rename key to same name:",t),a.assertOptions(e,["alias","ignoreUndefined","override","multiple"]);const r=this.clone();r.$_terms.renames=r.$_terms.renames||[];for(const i of r.$_terms.renames)n(i.from!==t,"Cannot rename the same key multiple times");return i instanceof f&&r.$_mutateRegister(i),r.$_terms.renames.push({from:t,to:i,options:s(v.renameDefaults,e)}),r}},schema:{method(t){return void 0===t&&(t="any"),this.$_addRule({name:"schema",args:{type:t}})},validate:(t,i,e)=>{let{type:s}=e;return!a.isSchema(t)||"any"!==s&&t.type!==s?i.error("object.schema",{type:s}):t}},unknown:{method(t){return this.$_setFlag("unknown",!1!==t)}},with:{method(t,i,e){return void 0===e&&(e={}),v.dependency(this,"with",t,i,e)}},without:{method(t,i,e){return void 0===e&&(e={}),v.dependency(this,"without",t,i,e)}},xor:{method(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return a.verifyFlat(i,"xor"),v.dependency(this,"xor",null,i)}}},overrides:{default(t,i){return void 0===t&&(t=a.symbols.deepDefault),this.$_parent("default",t,i)}},rebuild(t){if(t.$_terms.keys){const i=new o.Sorter;for(const e of t.$_terms.keys)a.tryWithPath((()=>i.add(e,{after:e.schema.$_rootReferences(),group:e.key})),e.key);t.$_terms.keys=new v.Keys(...i.nodes)}},manifest:{build(t,i){if(i.keys&&(t=t.keys(i.keys)),i.dependencies)for(const{rel:e,key:s=null,peers:n,options:r}of i.dependencies)t=v.dependency(t,e,s,n,r);if(i.patterns)for(const{regex:e,schema:s,rule:n,fallthrough:r,matches:o}of i.patterns)t=t.pattern(e||s,n,{fallthrough:r,matches:o});if(i.renames)for(const{from:e,to:s,options:n}of i.renames)t=t.rename(e,s,n);return t}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),v.clone=function(t,i){if("object"==typeof t){if(i.nonEnumerables)return r(t,{shallow:!0});const e=_.create(_.getPrototypeOf(t));return _.assign(e,t),e}const e=function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];return t.apply(this,e)};return e.prototype=r(t.prototype),_.defineProperty(e,"name",{value:t.name,writable:!1}),_.defineProperty(e,"length",{value:t.length,writable:!1}),_.assign(e,t),e},v.dependency=function(t,i,e,s,r){n(null===e||"string"==typeof e,i,"key must be a strings"),r||(r=s.length>1&&"object"==typeof s[s.length-1]?s.pop():{}),a.assertOptions(r,["separator","isPresent"]),s=[].concat(s);const o=a.default(r.separator,"."),h=[];for(const t of s)n("string"==typeof t,i,"peers must be strings"),h.push(u.ref(t,{separator:o,ancestor:0,prefix:!1}));null!==e&&(e=u.ref(e,{separator:o,ancestor:0,prefix:!1}));const c=t.clone();return c.$_terms.dependencies=c.$_terms.dependencies||[],c.$_terms.dependencies.push(new v.Dependency(i,e,h,s,r)),c},v.dependencies={and(t,i,e,s,n){const r=[],o=[],h=i.peers.length,a=v.isPresent(i.options);for(const t of i.peers)!1===a(t.resolve(e,s,n,null,{shadow:!1}))?r.push(t.key):o.push(t.key);if(r.length!==h&&o.length!==h)return{code:"object.and",context:{present:o,presentWithLabels:v.keysToLabels(t,o),missing:r,missingWithLabels:v.keysToLabels(t,r)}}},nand(t,i,e,s,n){const r=[],o=v.isPresent(i.options);for(const t of i.peers)o(t.resolve(e,s,n,null,{shadow:!1}))&&r.push(t.key);if(r.length!==i.peers.length)return;const h=i.paths[0],a=i.paths.slice(1);return{code:"object.nand",context:{main:h,mainWithLabel:v.keysToLabels(t,h),peers:a,peersWithLabels:v.keysToLabels(t,a)}}},or(t,i,e,s,n){const r=v.isPresent(i.options);for(const t of i.peers)if(r(t.resolve(e,s,n,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:i.paths,peersWithLabels:v.keysToLabels(t,i.paths)}}},oxor(t,i,e,s,n){const r=[],o=v.isPresent(i.options);for(const t of i.peers)o(t.resolve(e,s,n,null,{shadow:!1}))&&r.push(t.key);if(!r.length||1===r.length)return;const h={peers:i.paths,peersWithLabels:v.keysToLabels(t,i.paths)};return h.present=r,h.presentWithLabels=v.keysToLabels(t,r),{code:"object.oxor",context:h}},with(t,i,e,s,n){const r=v.isPresent(i.options);for(const o of i.peers)if(!1===r(o.resolve(e,s,n,null,{shadow:!1})))return{code:"object.with",context:{main:i.key.key,mainWithLabel:v.keysToLabels(t,i.key.key),peer:o.key,peerWithLabel:v.keysToLabels(t,o.key)}}},without(t,i,e,s,n){const r=v.isPresent(i.options);for(const o of i.peers)if(r(o.resolve(e,s,n,null,{shadow:!1})))return{code:"object.without",context:{main:i.key.key,mainWithLabel:v.keysToLabels(t,i.key.key),peer:o.key,peerWithLabel:v.keysToLabels(t,o.key)}}},xor(t,i,e,s,n){const r=[],o=v.isPresent(i.options);for(const t of i.peers)o(t.resolve(e,s,n,null,{shadow:!1}))&&r.push(t.key);if(1===r.length)return;const h={peers:i.paths,peersWithLabels:v.keysToLabels(t,i.paths)};return 0===r.length?{code:"object.missing",context:h}:(h.present=r,h.presentWithLabels=v.keysToLabels(t,r),{code:"object.xor",context:h})}},v.keysToLabels=function(t,i){return Array.isArray(i)?i.map((i=>t.$_mapLabels(i))):t.$_mapLabels(i)},v.isPresent=function(t){return"function"==typeof t.isPresent?t.isPresent:t=>void 0!==t},v.rename=function(t,i,e,s,n){const r={};for(const o of t.$_terms.renames){const h=[],a="string"!=typeof o.from;if(a)for(const t in i){if(void 0===i[t]&&o.options.ignoreUndefined||t===o.to)continue;const e=o.from.exec(t);e&&h.push({from:t,to:o.to,match:e})}else!_.prototype.hasOwnProperty.call(i,o.from)||void 0===i[o.from]&&o.options.ignoreUndefined||h.push(o);for(const u of h){const h=u.from;let c=u.to;if(c instanceof f&&(c=c.render(i,e,s,u.match)),h!==c){if(!o.options.multiple&&r[c]&&(n.push(t.$_createError("object.rename.multiple",i,{from:h,to:c,pattern:a},e,s)),s.abortEarly)||_.prototype.hasOwnProperty.call(i,c)&&!o.options.override&&!r[c]&&(n.push(t.$_createError("object.rename.override",i,{from:h,to:c,pattern:a},e,s)),s.abortEarly))return!1;void 0===i[h]?delete i[c]:i[c]=i[h],r[c]=!0,o.options.alias||delete i[h]}}}return!0},v.unknown=function(t,i,e,s,n,r){if(t.$_terms.patterns){let o=!1;const h=t.$_terms.patterns.map((t=>{if(t.matches)return o=!0,[]})),a=[i,...n.ancestors];for(const o of e){const u=i[o],c=[...n.path,o];for(let l=0;l<t.$_terms.patterns.length;++l){const d=t.$_terms.patterns[l];if(d.regex){const t=d.regex.test(o);if(n.mainstay.tracer.debug(n,"rule","pattern.".concat(l),t?"pass":"error"),!t)continue}else if(!d.schema.$_match(o,n.nest(d.schema,"pattern.".concat(l)),r))continue;e.delete(o);const f=n.localize(c,a,{schema:d.rule,key:o}),g=d.rule.$_validate(u,f,r);if(g.errors){if(r.abortEarly)return{value:i,errors:g.errors};s.push(...g.errors)}if(d.matches&&h[l].push(o),i[o]=g.value,!d.fallthrough)break}}if(o)for(let e=0;e<h.length;++e){const o=h[e];if(!o)continue;const u=t.$_terms.patterns[e].matches,l=n.localize(n.path,a,u),d=u.$_validate(o,l,r);if(d.errors){const e=c.details(d.errors,{override:!1});e.matches=o;const h=t.$_createError("object.pattern.match",i,e,n,r);if(r.abortEarly)return{value:i,errors:h};s.push(h)}}}if(e.size&&(t.$_terms.keys||t.$_terms.patterns)){if(r.stripUnknown&&void 0===t.Lv.unknown||r.skipFunctions){const t=!(!r.stripUnknown||!0!==r.stripUnknown&&!r.stripUnknown.objects);for(const s of e)t?(delete i[s],e.delete(s)):"function"==typeof i[s]&&e.delete(s)}if(!a.default(t.Lv.unknown,r.allowUnknown))for(const o of e){const e=n.localize([...n.path,o],[]),h=t.$_createError("object.unknown",i[o],{child:o},e,r,{flags:!1});if(r.abortEarly)return{value:i,errors:h};s.push(h)}}},v.Dependency=class{describe(){const t={rel:this.rel,peers:this.paths};return null!==this.key&&(t.key=this.key.key),"."!==this.peers[0].separator&&(t.options=g(d({},t.options),{separator:this.peers[0].separator})),this.options.isPresent&&(t.options=g(d({},t.options),{isPresent:this.options.isPresent})),t}constructor(t,i,e,s,n){this.rel=t,this.key=i,this.peers=e,this.paths=s,this.options=n}},v.Keys=class extends Array{concat(t){const i=this.slice(),e=new Map;for(let t=0;t<i.length;++t)e.set(i[t].key,t);for(const s of t){const t=s.key,n=e.get(t);void 0!==n?i[n]={key:t,schema:i[n].schema.concat(s.schema)}:i.push(s)}return i}}},8785:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o=e(3292),h=e(6354),a={};t.exports=n.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(t,i)=>t.ref(i),validate(t,i){let{schema:e,state:n,prefs:r}=i;s(e.$_terms.link,"Uninitialized link schema");const o=a.generate(e,t,n,r),h=e.$_terms.link[0].ref;return o.$_validate(t,n.nest(o,"link:".concat(h.display,":").concat(o.type)),r)},generate:(t,i,e,s)=>a.generate(t,i,e,s),rules:{ref:{method(t){s(!this.$_terms.link,"Cannot reinitialize schema"),t=o.ref(t),s("value"===t.type||"local"===t.type,"Invalid reference type:",t.type),s("local"===t.type||"root"===t.ancestor||t.ancestor>0,"Link cannot reference itself");const i=this.clone();return i.$_terms.link=[{ref:t}],i}},relative:{method(t){return void 0===t&&(t=!0),this.$_setFlag("relative",t)}}},overrides:{concat(t){s(this.$_terms.link,"Uninitialized link schema"),s(r.isSchema(t),"Invalid schema object"),s("link"!==t.type,"Cannot merge type link with another link");const i=this.clone();return i.$_terms.whens||(i.$_terms.whens=[]),i.$_terms.whens.push({concat:t}),i.$_mutateRebuild()}},manifest:{build:(t,i)=>(s(i.link,"Invalid link description missing link"),t.ref(i.link))}}),a.generate=function(t,i,e,s){let n=e.mainstay.links.get(t);if(n)return n.Zv(i,e,s).schema;const r=t.$_terms.link[0].ref,{perspective:o,path:h}=a.perspective(r,e);a.assert(o,"which is outside of schema boundaries",r,t,e,s);try{n=h.length?o.$_reach(h):o}catch(i){a.assert(!1,"to non-existing schema",r,t,e,s)}return a.assert("link"!==n.type,"which is another link",r,t,e,s),t.Lv.relative||e.mainstay.links.set(t,n),n.Zv(i,e,s).schema},a.perspective=function(t,i){if("local"===t.type){for(const{schema:e,key:s}of i.schemas){if((e.Lv.id||s)===t.path[0])return{perspective:e,path:t.path.slice(1)};if(e.$_terms.shared)for(const i of e.$_terms.shared)if(i.Lv.id===t.path[0])return{perspective:i,path:t.path.slice(1)}}return{perspective:null,path:null}}return"root"===t.ancestor?{perspective:i.schemas[i.schemas.length-1].schema,path:t.path}:{perspective:i.schemas[t.ancestor]&&i.schemas[t.ancestor].schema,path:t.path}},a.assert=function(t,i,e,n,r,o){t||s(!1,'"'.concat(h.label(n.Lv,r,o),'" contains link reference "').concat(e.display,'" ').concat(i))}},3832:(t,i,e)=>{const s=e(375),n=e(8068),r=e(8160),o={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(t){const i=t.toString(),e=i.indexOf("."),s=i.indexOf("e");return(e<0?0:(s<0?i.length:s)-e-1)+(s<0?0:x.max(0,-C(i.slice(s+1))))}};t.exports=n.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(t,i){let{schema:e,error:s}=i;if(!t.match(o.numberRx))return;t=t.trim();const n={value:S(t)};if(0===n.value&&(n.value=0),!e.Lv.unsafe)if(t.match(/e/i)){if(o.extractSignificantDigits(t)!==o.extractSignificantDigits(String(n.value)))return n.errors=s("number.unsafe"),n}else{const i=n.value.toString();if(i.match(/e/i))return n;if(i!==o.normalizeDecimal(t))return n.errors=s("number.unsafe"),n}return n}},validate(t,i){let{schema:e,error:s,prefs:n}=i;if(t===1/0||t===-1/0)return{value:t,errors:s("number.infinity")};if(!r.isNumber(t))return{value:t,errors:s("number.base")};const o={value:t};if(n.convert){const t=e.$_getRule("precision");if(t){const i=x.pow(10,t.args.limit);o.value=x.round(o.value*i)/i}}return 0===o.value&&(o.value=0),!e.Lv.unsafe&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&(o.errors=s("number.unsafe")),o},rules:{compare:{method:!1,validate:(t,i,e,s)=>{let{limit:n}=e,{name:o,operator:h,args:a}=s;return r.compare(t,n,h)?t:i.error("number."+o,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:r.isNumber,message:"must be a number"}]},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{limit:t},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(t,i)=>x.trunc(t)-t==0?t:i.error("number.integer")},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{limit:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{limit:t},operator:">="})}},multiple:{method(t){const i="number"==typeof t?o.decimalPlaces(t):null,e=x.pow(10,i);return this.$_addRule({name:"multiple",args:{base:t,baseDecimalPlace:i,pfactor:e}})},validate:(t,i,e,s)=>{let{base:n,baseDecimalPlace:r,pfactor:h}=e;return o.decimalPlaces(t)>r?i.error("number.multiple",{multiple:s.args.base,value:t}):x.round(h*t)%x.round(h*n)==0?t:i.error("number.multiple",{multiple:s.args.base,value:t})},args:[{name:"base",ref:!0,assert:t=>"number"==typeof t&&isFinite(t)&&t>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(t,i)=>Number.isSafeInteger(t)&&t>=0&&t<=65535?t:i.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(t){return s(Number.isSafeInteger(t),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:t}})},validate(t,i,e){let{limit:s}=e;const n=t.toString().match(o.precisionRx);return x.max((n[1]?n[1].length:0)-(n[2]?C(n[2],10):0),0)<=s?t:i.error("number.precision",{limit:s,value:t})},convert:!0},sign:{method(t){return s(["negative","positive"].includes(t),"Invalid sign",t),this.$_addRule({name:"sign",args:{sign:t}})},validate:(t,i,e)=>{let{sign:s}=e;return"negative"===s&&t<0||"positive"===s&&t>0?t:i.error("number.".concat(s))}},unsafe:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("unsafe",t)}}},cast:{string:{from:t=>"number"==typeof t,to:(t,i)=>t.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),o.extractSignificantDigits=function(t){return t.replace(o.exponentialPartRegex,"").replace(o.dotRegex,"").replace(o.trailingZerosRegex,"").replace(o.leadingSignAndZerosRegex,"")},o.normalizeDecimal=function(t){return(t=t.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&t.endsWith("0")&&(t=t.replace(/0+$/,"")),"-0"===t?"0":t}},8966:(t,i,e)=>{const s=e(7824);t.exports=s.extend({type:"object",cast:{map:{from:t=>t&&"object"==typeof t,to:(t,i)=>new Map(_.entries(t))}}})},7417:(t,i,e)=>{const s=e(375),n=e(5380),r=e(1745),o=e(9959),h=e(6064),a=e(9926),u=e(5752),c=e(8068),l=e(8160),f={tlds:a instanceof Set&&{tlds:{allow:a,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:o.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};t.exports=c.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(t,i){let{schema:e,state:s,prefs:n}=i;const r=e.$_getRule("normalize");r&&(t=t.normalize(r.args.form));const o=e.$_getRule("case");o&&(t="upper"===o.args.direction?t.toLocaleUpperCase():t.toLocaleLowerCase());const h=e.$_getRule("trim");if(h&&h.args.enabled&&(t=t.trim()),e.$_terms.replacements)for(const i of e.$_terms.replacements)t=t.replace(i.pattern,i.replacement);const a=e.$_getRule("hex");if(a&&a.args.options.byteAligned&&t.length%2!=0&&(t="0".concat(t)),e.$_getRule("isoDate")){const i=f.isoDate(t);i&&(t=i)}if(e.Lv.truncate){const i=e.$_getRule("max");if(i){let r=i.args.limit;if(l.isResolvable(r)&&(r=r.resolve(t,s,n),!l.limit(r)))return{value:t,errors:e.$_createError("any.ref",r,{ref:i.args.limit,arg:"limit",reason:"must be a positive integer"},s,n)};t=t.slice(0,r)}}return{value:t}}},validate(t,i){let{schema:e,error:s}=i;if("string"!=typeof t)return{value:t,errors:s("string.base")};if(""===t){const i=e.$_getRule("min");return i&&0===i.args.limit?void 0:{value:t,errors:s("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(t,i)=>/^[a-zA-Z0-9]+$/.test(t)?t:i.error("string.alphanum")},base64:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["paddingRequired","urlSafe"]),t=d({urlSafe:!1,paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),s("boolean"==typeof t.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:t}})},validate:(t,i,e)=>{let{options:s}=e;return f.base64Regex[s.paddingRequired][s.urlSafe].test(t)?t:i.error("string.base64")}},case:{method(t){return s(["lower","upper"].includes(t),"Invalid case:",t),this.$_addRule({name:"case",args:{direction:t}})},validate:(t,i,e)=>{let{direction:s}=e;return"lower"===s&&t===t.toLocaleLowerCase()||"upper"===s&&t===t.toLocaleUpperCase()?t:i.error("string.".concat(s,"case"))},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(t,i){let e=t.length,s=0,n=1;for(;e--;){const i=t.charAt(e)*n;s+=i-9*(i>9),n^=3}return s>0&&s%10==0?t:i.error("string.creditCard")}},dataUri:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["paddingRequired"]),t=d({paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:t}})},validate(t,i,e){let{options:s}=e;const n=t.match(f.dataUriRegex);return!n||n[2]&&"base64"===n[2]&&!f.base64Regex[s.paddingRequired].false.test(n[3])?i.error("string.dataUri"):t}},domain:{method(t){t&&l.assertOptions(t,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const i=f.addressOptions(t);return this.$_addRule({name:"domain",args:{options:t},address:i})},validate:(t,i,e,s)=>{let{address:r}=s;return n.isValid(t,r)?t:i.error("string.domain")}},email:{method(t){void 0===t&&(t={}),l.assertOptions(t,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),s(void 0===t.multiple||"boolean"==typeof t.multiple,"multiple option must be an boolean");const i=f.addressOptions(t),e=new RegExp("\\s*[".concat(t.separator?h(t.separator):",","]\\s*"));return this.$_addRule({name:"email",args:{options:t},regex:e,address:i})},validate(t,i,e,s){let{options:n}=e,{regex:o,address:h}=s;const a=n.multiple?t.split(o):[t],u=[];for(const t of a)r.isValid(t,h)||u.push(t);return u.length?i.error("string.email",{value:t,invalids:u}):t}},guid:{alias:"uuid",method(t){void 0===t&&(t={}),l.assertOptions(t,["version","separator"]);let i="";if(t.version){const e=[].concat(t.version);s(e.length>=1,"version must have at least 1 valid version specified");const n=new Set;for(let t=0;t<e.length;++t){const r=e[t];s("string"==typeof r,"version at position "+t+" must be a string");const o=f.guidVersions[r.toLowerCase()];s(o,"version at position "+t+" must be one of "+_.keys(f.guidVersions).join(", ")),s(!n.has(o),"version at position "+t+" must not be a duplicate"),i+=o,n.add(o)}}s(f.guidSeparators.has(t.separator),'separator must be one of true, false, "-", or ":"');const e=void 0===t.separator?"[:-]?":!0===t.separator?"[:-]":!1===t.separator?"[]?":"\\".concat(t.separator),n=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}(".concat(e,")[0-9A-F]{4}\\2?[").concat(i||"0-9A-F","][0-9A-F]{3}\\2?[").concat(i?"89AB":"0-9A-F","][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$"),"i");return this.$_addRule({name:"guid",args:{options:t},regex:n})},validate(t,i,e,s){let{regex:n}=s;const r=n.exec(t);return r?f.guidBrackets[r[1]]!==r[r.length-1]?i.error("string.guid"):t:i.error("string.guid")}},hex:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["byteAligned","prefix"]),t=d({byteAligned:!1,prefix:!1},t),s("boolean"==typeof t.byteAligned,"byteAligned must be boolean"),s("boolean"==typeof t.prefix||"optional"===t.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:t}})},validate:(t,i,e)=>{let{options:s}=e;return("optional"===s.prefix?f.hexRegex.withOptionalPrefix:!0===s.prefix?f.hexRegex.withPrefix:f.hexRegex.withoutPrefix).test(t)?s.byteAligned&&t.length%2!=0?i.error("string.hexAlign"):t:i.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(t,i)=>n.isValid(t,{minDomainSegments:1})||f.ipRegex.test(t)?t:i.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(t){void 0===t&&(t={}),l.assertOptions(t,["cidr","version"]);const{cidr:i,versions:e,regex:s}=o.regex(t),n=t.version?e:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:i,version:n}},regex:s})},validate:(t,i,e,s)=>{let{options:n}=e,{regex:r}=s;return r.test(t)?t:n.version?i.error("string.ipVersion",{value:t,cidr:n.cidr,version:n.version}):i.error("string.ip",{value:t,cidr:n.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate:(t,i)=>{let{error:e}=i;return f.isoDate(t)?t:e("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(t,i)=>f.isoDurationRegex.test(t)?t:i.error("string.isoDuration")},length:{method(t,i){return f.length(this,"length",t,"=",i)},validate(t,i,e,s){let{limit:n,encoding:r}=e,{name:o,operator:h,args:a}=s;const u=!r&&t.length;return l.compare(u,n,h)?t:i.error("string."+o,{limit:a.limit,value:t,encoding:r})},args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(t,i){return f.length(this,"max",t,"<=",i)},args:["limit","encoding"]},min:{method(t,i){return f.length(this,"min",t,">=",i)},args:["limit","encoding"]},normalize:{method(t){return void 0===t&&(t="NFC"),s(f.normalizationForms.includes(t),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:t}})},validate:(t,i,e)=>{let{error:s}=i,{form:n}=e;return t===t.normalize(n)?t:s("string.normalize",{value:t,form:n})},convert:!0},pattern:{alias:"regex",method(t,i){void 0===i&&(i={}),s(t instanceof RegExp,"regex must be a RegExp"),s(!t.flags.includes("g")&&!t.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof i&&(i={name:i}),l.assertOptions(i,["invert","name"]);const e=["string.pattern",i.invert?".invert":"",i.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:t,options:i},errorCode:e})},validate:(t,i,e,s)=>{let{regex:n,options:r}=e,{errorCode:o}=s;return n.test(t)^r.invert?t:i.error(o,{name:r.name,regex:n,value:t})},args:["regex","options"],multi:!0},replace:{method(t,i){"string"==typeof t&&(t=new RegExp(h(t),"g")),s(t instanceof RegExp,"pattern must be a RegExp"),s("string"==typeof i,"replacement must be a String");const e=this.clone();return e.$_terms.replacements||(e.$_terms.replacements=[]),e.$_terms.replacements.push({pattern:t,replacement:i}),e}},token:{method(){return this.$_addRule("token")},validate:(t,i)=>/^\w+$/.test(t)?t:i.error("string.token")},trim:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:t}})},validate:(t,i,e)=>{let{enabled:s}=e;return s&&t!==t.trim()?i.error("string.trim"):t},convert:!0},truncate:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("truncate",t)}},uppercase:{method(){return this.case("upper")}},uri:{method(t){void 0===t&&(t={}),l.assertOptions(t,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),t.domain&&l.assertOptions(t.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:i,scheme:e}=u.regex(t),s=t.domain?f.addressOptions(t.domain):null;return this.$_addRule({name:"uri",args:{options:t},regex:i,domain:s,scheme:e})},validate(t,i,e,s){let{options:r}=e,{regex:o,domain:h,scheme:a}=s;if(["http:/","https:/"].includes(t))return i.error("string.uri");let u=o.exec(t);if(!u&&i.prefs.convert&&r.encodeUri){const i=encodeURI(t);u=o.exec(i),u&&(t=i)}if(u){const e=u[1]||u[2];return!h||r.allowRelative&&!e||n.isValid(e,h)?t:i.error("string.domain",{value:e})}return r.relativeOnly?i.error("string.uriRelativeOnly"):r.scheme?i.error("string.uriCustomScheme",{scheme:a,value:t}):i.error("string.uri")}}},manifest:{build(t,i){if(i.replacements)for(const{pattern:e,replacement:s}of i.replacements)t=t.replace(e,s);return t}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(t){if(!t)return f.tlds||t;if(s(void 0===t.minDomainSegments||Number.isSafeInteger(t.minDomainSegments)&&t.minDomainSegments>0,"minDomainSegments must be a positive integer"),s(void 0===t.maxDomainSegments||Number.isSafeInteger(t.maxDomainSegments)&&t.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===t.tlds)return t;if(!0===t.tlds||void 0===t.tlds)return s(f.tlds,"Built-in TLD list disabled"),_.assign({},t,f.tlds);s("object"==typeof t.tlds,"tlds must be true, false, or an object");const i=t.tlds.deny;if(i)return Array.isArray(i)&&(t=_.assign({},t,{tlds:{deny:new Set(i)}})),s(t.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),s(!t.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(t.tlds.deny,"tlds.deny"),t;const e=t.tlds.allow;return e?!0===e?(s(f.tlds,"Built-in TLD list disabled"),_.assign({},t,f.tlds)):(Array.isArray(e)&&(t=_.assign({},t,{tlds:{allow:new Set(e)}})),s(t.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(t.tlds.allow,"tlds.allow"),t):t},f.validateTlds=function(t,i){for(const e of t)s(n.isValid(e,{minDomainSegments:1,maxDomainSegments:1}),"".concat(i," must contain valid top level domain names"))},f.isoDate=function(t){if(!l.isIsoDate(t))return null;/.*T.*[+-]\d\d$/.test(t)&&(t+="00");const i=new Date(t);return j(i.getTime())?null:i.toISOString()},f.length=function(t,i,e,n,r){return s(!r||!1,"Invalid encoding:",r),t.$_addRule({name:i,method:"length",args:{limit:e,encoding:r},operator:n})}},8826:(t,i,e)=>{const s=e(375),n=e(8068),r={};r.Map=class extends Map{slice(){return new r.Map(this)}},t.exports=n.extend({type:"symbol",terms:{map:{init:new r.Map}},coerce:{method(t,i){let{schema:e,error:s}=i;const n=e.$_terms.map.get(t);return n&&(t=n),e.Lv.only&&"symbol"!=typeof t?{value:t,errors:s("symbol.map",{map:e.$_terms.map})}:{value:t}}},validate(t,i){let{error:e}=i;if("symbol"!=typeof t)return{value:t,errors:e("symbol.base")}},rules:{map:{method(t){t&&!t[f]&&"object"==typeof t&&(t=_.entries(t)),s(t&&t[f],"Iterable must be an iterable or object");const i=this.clone(),e=[];for(const n of t){s(n&&n[f],"Entry must be an iterable");const[t,r]=n;s("object"!=typeof t&&"function"!=typeof t&&"symbol"!=typeof t,"Key must not be of type object, function, or Symbol"),s("symbol"==typeof r,"Value must be a Symbol"),i.$_terms.map.set(t,r),e.push(r)}return i.valid(...e)}}},manifest:{build:(t,i)=>(i.map&&(t=t.map(i.map)),t)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(t,i,e)=>{const s=e(375),n=e(8571),r=e(738),o=e(9621),h=e(8160),a=e(6354),u=e(493),c={result:Bo("result")};i.entry=function(t,i,e){let n=h.defaults;e&&(s(void 0===e.warnings,"Cannot override warnings preference in synchronous validation"),s(void 0===e.artifacts,"Cannot override artifacts preference in synchronous validation"),n=h.preferences(h.defaults,e));const r=c.entry(t,i,n);s(!r.mainstay.externals.length,"Schema with external rules must use validateAsync()");const o={value:r.value};return r.error&&(o.error=r.error),r.mainstay.warnings.length&&(o.warning=a.details(r.mainstay.warnings)),r.mainstay.debug&&(o.debug=r.mainstay.debug),r.mainstay.artifacts&&(o.artifacts=r.mainstay.artifacts),o},i.entryAsync=async function(t,i,e){let s=h.defaults;e&&(s=h.preferences(h.defaults,e));const n=c.entry(t,i,s),r=n.mainstay;if(n.error)throw r.debug&&(n.error.debug=r.debug),n.error;if(r.externals.length){let i=n.value;const u=[];for(const n of r.externals){const l=n.state.path,d="link"===n.schema.type?r.links.get(n.schema):null;let f,g,_=i;const v=l.length?[i]:[],w=l.length?o(t,l):t;if(l.length){f=l[l.length-1];let t=i;for(const i of l.slice(0,-1))t=t[i],v.unshift(t);g=v[0],_=g[f]}try{const t=(t,i)=>(d||n.schema).$_createError(t,_,i,n.state,s),o=await n.method(_,{schema:n.schema,linked:d,state:n.state,prefs:e,original:w,error:t,errorsArray:c.errorsArray,warn:(t,i)=>r.warnings.push((d||n.schema).$_createError(t,_,i,n.state,s)),message:(t,i)=>(d||n.schema).$_createError("external",_,i,n.state,s,{messages:t})});if(void 0===o||o===_)continue;if(o instanceof a.Report){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(o),s.abortEarly)break;continue}if(Array.isArray(o)&&o[h.symbols.errors]){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(...o),s.abortEarly)break;continue}g?(r.tracer.value(n.state,"rule",_,o,"external"),g[f]=o):(r.tracer.value(n.state,"rule",i,o,"external"),i=o)}catch(t){throw s.errors.label&&(t.message+=" (".concat(n.label,")")),t}}if(n.value=i,u.length)throw n.error=a.process(u,t,s),r.debug&&(n.error.debug=r.debug),n.error}if(!s.warnings&&!s.debug&&!s.artifacts)return n.value;const u={value:n.value};return r.warnings.length&&(u.warning=a.details(r.warnings)),r.debug&&(u.debug=r.debug),r.artifacts&&(u.artifacts=r.artifacts),u},c.Mainstay=class{snapshot(){this.Nw.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const t=this.Nw.pop();this.externals=t.externals,this.warnings=t.warnings}commit(){this.Nw.pop()}constructor(t,i,e){this.externals=[],this.warnings=[],this.tracer=t,this.debug=i,this.links=e,this.shadow=null,this.artifacts=null,this.Nw=[]}},c.entry=function(t,e,s){const{tracer:n,cleanup:r}=c.tracer(e,s),o=s.debug?[]:null,h=e.Tv.aw?new Map:null,l=new c.Mainstay(n,o,h),d=e.Tv.aw?[{schema:e}]:null,f=new u([],[],{mainstay:l,schemas:d}),g=i.validate(t,e,f,s);r&&e.$_root.untrace();const _=a.process(g.errors,t,s);return{value:g.value,error:_,mainstay:l}},c.tracer=function(t,i){return t.$_root.Qv?{tracer:t.$_root.Qv.Iw(t)}:i.debug?(s(t.$_root.trace,"Debug mode not supported"),{tracer:t.$_root.trace().Iw(t),cleanup:!0}):{tracer:c.ignore}},i.validate=function(t,i,e,s,n){if(void 0===n&&(n={}),i.$_terms.whens&&(i=i.Zv(t,e,s).schema),i.Sv&&(s=c.prefs(i,s)),i.Iv&&s.cache){const s=i.Iv.get(t);if(e.mainstay.tracer.debug(e,"validate","cached",!!s),s)return s}const r=(n,r,o)=>i.$_createError(n,t,r,o||e,s),o={original:t,prefs:s,schema:i,state:e,error:r,errorsArray:c.errorsArray,warn:(t,i,s)=>e.mainstay.warnings.push(r(t,i,s)),message:(n,r)=>i.$_createError("custom",t,r,e,s,{messages:n})};e.mainstay.tracer.entry(i,e);const a=i.Pv;if(a.prepare&&void 0!==t&&s.convert){const i=a.prepare(t,o);if(i){if(e.mainstay.tracer.value(e,"prepare",t,i.value),i.errors)return c.finalize(i.value,[].concat(i.errors),o);t=i.value}}if(a.coerce&&void 0!==t&&s.convert&&(!a.coerce.from||a.coerce.from.includes(typeof t))){const i=a.coerce.method(t,o);if(i){if(e.mainstay.tracer.value(e,"coerced",t,i.value),i.errors)return c.finalize(i.value,[].concat(i.errors),o);t=i.value}}const u=i.Lv.empty;u&&u.$_match(c.trim(t,i),e.nest(u),h.defaults)&&(e.mainstay.tracer.value(e,"empty",t,void 0),t=void 0);const l=n.presence||i.Lv.presence||(i.Lv.mw?null:s.presence);if(void 0===t){if("forbidden"===l)return c.finalize(t,null,o);if("required"===l)return c.finalize(t,[i.$_createError("any.required",t,null,e,s)],o);if("optional"===l){if(i.Lv.default!==h.symbols.deepDefault)return c.finalize(t,null,o);e.mainstay.tracer.value(e,"default",t,{}),t={}}}else if("forbidden"===l)return c.finalize(t,[i.$_createError("any.unknown",t,null,e,s)],o);const d=[];if(i.Dv){const n=i.Dv.get(t,e,s,i.Lv.insensitive);if(n)return s.convert&&(e.mainstay.tracer.value(e,"valids",t,n.value),t=n.value),e.mainstay.tracer.filter(i,e,"valid",n),c.finalize(t,null,o);if(i.Lv.only){const n=i.$_createError("any.only",t,{valids:i.Dv.values({display:!0})},e,s);if(s.abortEarly)return c.finalize(t,[n],o);d.push(n)}}if(i.Ev){const n=i.Ev.get(t,e,s,i.Lv.insensitive);if(n){e.mainstay.tracer.filter(i,e,"invalid",n);const r=i.$_createError("any.invalid",t,{invalids:i.Ev.values({display:!0})},e,s);if(s.abortEarly)return c.finalize(t,[r],o);d.push(r)}}if(a.validate){const i=a.validate(t,o);if(i&&(e.mainstay.tracer.value(e,"base",t,i.value),t=i.value,i.errors)){if(!Array.isArray(i.errors))return d.push(i.errors),c.finalize(t,d,o);if(i.errors.length)return d.push(...i.errors),c.finalize(t,d,o)}}return i.xv.length?c.rules(t,d,o):c.finalize(t,d,o)},c.rules=function(t,i,e){const{schema:s,state:n,prefs:r}=e;for(const o of s.xv){const a=s.Pv.rules[o.method];if(a.convert&&r.convert){n.mainstay.tracer.log(s,n,"rule",o.name,"full");continue}let u,l=o.args;if(o.Kg.length){l=_.assign({},l);for(const i of o.Kg){const e=a.argsByName.get(i),o=l[i].resolve(t,n,r),c=e.normalize?e.normalize(o):o,d=h.validateArg(c,null,e);if(d){u=s.$_createError("any.ref",o,{arg:i,ref:l[i],reason:d},n,r);break}l[i]=c}}u=u||a.validate(t,e,l,o);const d=c.rule(u,o);if(d.errors){if(n.mainstay.tracer.log(s,n,"rule",o.name,"error"),o.warn){n.mainstay.warnings.push(...d.errors);continue}if(r.abortEarly)return c.finalize(t,d.errors,e);i.push(...d.errors)}else n.mainstay.tracer.log(s,n,"rule",o.name,"pass"),n.mainstay.tracer.value(n,"rule",t,d.value,o.name),t=d.value}return c.finalize(t,i,e)},c.rule=function(t,i){return t instanceof a.Report?(c.error(t,i),{errors:[t],value:null}):Array.isArray(t)&&t[h.symbols.errors]?(t.forEach((t=>c.error(t,i))),{errors:t,value:null}):{errors:null,value:t}},c.error=function(t,i){return i.message&&t.$v(i.message),t},c.finalize=function(t,i,e){i=i||[];const{schema:n,state:r,prefs:o}=e;if(i.length){const s=c.default("failover",void 0,i,e);void 0!==s&&(r.mainstay.tracer.value(r,"failover",t,s),t=s,i=[])}if(i.length&&n.Lv.error)if("function"==typeof n.Lv.error){i=n.Lv.error(i),Array.isArray(i)||(i=[i]);for(const t of i)s(t instanceof b||t instanceof a.Report,"error() must return an Error object")}else i=[n.Lv.error];if(void 0===t){const s=c.default("default",t,i,e);r.mainstay.tracer.value(r,"default",t,s),t=s}if(n.Lv.cast&&void 0!==t){const i=n.Pv.cast[n.Lv.cast];if(i.from(t)){const s=i.to(t,e);r.mainstay.tracer.value(r,"cast",t,s,n.Lv.cast),t=s}}if(n.$_terms.externals&&o.externals&&!1!==o.Vv)for(const{method:t}of n.$_terms.externals)r.mainstay.externals.push({method:t,schema:n,state:r,label:a.label(n.Lv,r,o)});const h={value:t,errors:i.length?i:null};return n.Lv.result&&(h.value="strip"===n.Lv.result?void 0:e.original,r.mainstay.tracer.value(r,n.Lv.result,t,h.value),r.shadow(t,n.Lv.result)),n.Iv&&!1!==o.cache&&!n.Nv.length&&n.Iv.set(e.original,h),void 0===t||h.errors||void 0===n.Lv.artifact||(r.mainstay.artifacts=r.mainstay.artifacts||new Map,r.mainstay.artifacts.has(n.Lv.artifact)||r.mainstay.artifacts.set(n.Lv.artifact,[]),r.mainstay.artifacts.get(n.Lv.artifact).push(r.path)),h},c.prefs=function(t,i){const e=i===h.defaults;return e&&t.Sv[h.symbols.prefs]?t.Sv[h.symbols.prefs]:(i=h.preferences(i,t.Sv),e&&(t.Sv[h.symbols.prefs]=i),i)},c.default=function(t,i,e,s){const{schema:r,state:o,prefs:a}=s,u=r.Lv[t];if(a.noDefaults||void 0===u)return i;if(o.mainstay.tracer.log(r,o,"rule",t,"full"),!u)return u;if("function"==typeof u){const i=u.length?[n(o.ancestors[0]),s]:[];try{return u(...i)}catch(i){return void e.push(r.$_createError("any.".concat(t),null,{error:i},o,a))}}return"object"!=typeof u?u:u[h.symbols.literal]?u.literal:h.isResolvable(u)?u.resolve(i,o,a):n(u)},c.trim=function(t,i){if("string"!=typeof t)return t;const e=i.$_getRule("trim");return e&&e.args.enabled?t.trim():t},c.ignore={active:!1,debug:r,entry:r,filter:r,log:r,resolve:r,value:r},c.errorsArray=function(){const t=[];return t[h.symbols.errors]=!0,t}},2036:(t,i,e)=>{const s=e(375),n=e(9474),r=e(8160),o={};t.exports=o.Values=class{get length(){return this.Ov.size+this.Nv.size}add(t,i){r.isResolvable(t)?this.Nv.has(t)||(this.Nv.add(t),i&&i.register(t)):this.has(t,null,null,!1)||(this.Ov.add(t),"string"==typeof t&&this.Dw.set(t.toLowerCase(),t))}static merge(t,i,e){if(t=t||new o.Values,i){if(i.Ew)return i.clone();for(const e of[...i.Ov,...i.Nv])t.add(e)}if(e)for(const i of[...e.Ov,...e.Nv])t.remove(i);return t.length?t:null}remove(t){r.isResolvable(t)?this.Nv.delete(t):(this.Ov.delete(t),"string"==typeof t&&this.Dw.delete(t.toLowerCase()))}has(t,i,e,s){return!!this.get(t,i,e,s)}get(t,i,e,s){if(!this.length)return!1;if(this.Ov.has(t))return{value:t};if("string"==typeof t&&t&&s){const i=this.Dw.get(t.toLowerCase());if(i)return{value:i}}if(!this.Nv.size&&"object"!=typeof t)return!1;if("object"==typeof t)for(const i of this.Ov)if(n(i,t))return{value:i};if(i)for(const r of this.Nv){const o=r.resolve(t,i,e,null,{in:!0});if(void 0===o)continue;const h=r.in&&"object"==typeof o?Array.isArray(o)?o:_.keys(o):[o];for(const i of h)if(typeof i==typeof t)if(s&&t&&"string"==typeof t){if(i.toLowerCase()===t.toLowerCase())return{value:i,ref:r}}else if(n(i,t))return{value:i,ref:r}}return!1}override(){this.Ew=!0}values(t){if(t&&t.display){const t=[];for(const i of[...this.Ov,...this.Nv])void 0!==i&&t.push(i);return t}return Array.from([...this.Ov,...this.Nv])}clone(){const t=new o.Values(this.Ov,this.Nv);return t.Ew=this.Ew,t}concat(t){s(!t.Ew,"Cannot concat override set of values");const i=new o.Values([...this.Ov,...t.Ov],[...this.Nv,...t.Nv]);return i.Ew=this.Ew,i}describe(){const t=[];this.Ew&&t.push({override:!0});for(const i of this.Ov.values())t.push(i&&"object"==typeof i?{value:i}:i);for(const i of this.Nv.values())t.push(i.describe());return t}constructor(t,i){this.Ov=new Set(t),this.Nv=new Set(i),this.Dw=o.lowercases(t),this.Ew=!1}},o.Values.prototype[r.symbols.values]=!0,o.Values.prototype.slice=o.Values.prototype.clone,o.lowercases=function(t){const i=new Map;if(t)for(const e of t)"string"==typeof e&&i.set(e.toLowerCase(),e);return i}},978:(t,i,e)=>{const s=e(375),n=e(8571),r=e(1687),o=e(9621),h={};t.exports=function(t,i,e){if(void 0===e&&(e={}),s(t&&"object"==typeof t,"Invalid defaults value: must be an object"),s(!i||!0===i||"object"==typeof i,"Invalid source value: must be true, falsy or an object"),s("object"==typeof e,"Invalid options: must be an object"),!i)return null;if(e.shallow)return h.applyToDefaultsWithShallow(t,i,e);const o=n(t);if(!0===i)return o;const a=void 0!==e.nullOverride&&e.nullOverride;return r(o,i,{nullOverride:a,mergeArrays:!1})},h.applyToDefaultsWithShallow=function(t,i,e){const a=e.shallow;s(Array.isArray(a),"Invalid keys");const u=new Map,c=!0===i?null:new Set;for(let e of a){e=Array.isArray(e)?e:e.split(".");const s=o(t,e);s&&"object"==typeof s?u.set(s,c&&o(i,e)||s):c&&c.add(e)}const l=n(t,{},u);if(!c)return l;for(const t of c)h.reachCopy(l,i,t);const d=void 0!==e.nullOverride&&e.nullOverride;return r(l,i,{nullOverride:d,mergeArrays:!1})},h.reachCopy=function(t,i,e){for(const t of e){if(!(t in i))return;const e=i[t];if("object"!=typeof e||null===e)return;i=e}const s=i;let n=t;for(let t=0;t<e.length-1;++t){const i=e[t];"object"!=typeof n[i]&&(n[i]={}),n=n[i]}n[e[e.length-1]]=s}},375:(t,i,e)=>{const s=e(7916);t.exports=function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];if(!t)throw 1===e.length&&e[0]instanceof b?e[0]:new s(e)}},8571:(t,i,e)=>{const s=e(9621),n=e(4277),r=e(7043),o={needsProtoHack:new Set([n.set,n.map,n.weakSet,n.weakMap])};t.exports=o.clone=function(t,i,e){if(void 0===i&&(i={}),void 0===e&&(e=null),"object"!=typeof t||null===t)return t;let s=o.clone,h=e;if(i.shallow){if(!0!==i.shallow)return o.cloneWithShallow(t,i);s=t=>t}else if(h){const i=h.get(t);if(i)return i}else h=new Map;const a=n.getInternalProto(t);if(a===n.buffer)return!1;if(a===n.date)return new Date(t.getTime());if(a===n.regex)return new RegExp(t);const u=o.base(t,a,i);if(u===t)return t;if(h&&h.set(t,u),a===n.set)for(const e of t)u.add(s(e,i,h));else if(a===n.map)for(const[e,n]of t)u.set(e,s(n,i,h));const c=r.keys(t,i);for(const e of c){if("__proto__"===e)continue;if(a===n.array&&"length"===e){u.length=t.length;continue}const r=_.getOwnPropertyDescriptor(t,e);r?r.get||r.set?_.defineProperty(u,e,r):r.enumerable?u[e]=s(t[e],i,h):_.defineProperty(u,e,{enumerable:!1,writable:!0,configurable:!0,value:s(t[e],i,h)}):_.defineProperty(u,e,{enumerable:!0,writable:!0,configurable:!0,value:s(t[e],i,h)})}return u},o.cloneWithShallow=function(t,i){const e=i.shallow;(i=_.assign({},i)).shallow=!1;const n=new Map;for(const i of e){const e=s(t,i);"object"!=typeof e&&"function"!=typeof e||n.set(e,e)}return o.clone(t,i,n)},o.base=function(t,i,e){if(!1===e.prototype)return o.needsProtoHack.has(i)?new i.constructor:i===n.array?[]:{};const s=_.getPrototypeOf(t);if(s&&s.isImmutable)return t;if(i===n.array){const t=[];return s!==i&&_.setPrototypeOf(t,s),t}if(o.needsProtoHack.has(i)){const t=new s.constructor;return s!==i&&_.setPrototypeOf(t,s),t}return _.create(s)}},9474:(t,i,e)=>{const s=e(4277),n={mismatched:null};t.exports=function(t,i,e){return e=_.assign({prototype:!0},e),!!n.isDeepEqual(t,i,e,[])},n.isDeepEqual=function(t,i,e,r){if(t===i)return 0!==t||1/t==1/i;const o=typeof t;if(o!==typeof i||null===t||null===i)return!1;if("function"===o){if(!e.deepFunction||t.toString()!==i.toString())return!1}else if("object"!==o)return t!=t&&i!=i;const h=n.getSharedType(t,i,!!e.prototype);switch(h){case s.buffer:return!1;case s.promise:return t===i;case s.regex:return t.toString()===i.toString();case n.mismatched:return!1}for(let e=r.length-1;e>=0;--e)if(r[e].isSame(t,i))return!0;r.push(new n.SeenEntry(t,i));try{return!!n.isDeepEqualObj(h,t,i,e,r)}finally{r.pop()}},n.getSharedType=function(t,i,e){if(e)return _.getPrototypeOf(t)!==_.getPrototypeOf(i)?n.mismatched:s.getInternalProto(t);const r=s.getInternalProto(t);return r!==s.getInternalProto(i)?n.mismatched:r},n.valueOf=function(t){const i=t.valueOf;if(void 0===i)return t;try{return i.call(t)}catch(t){return t}},n.hasOwnEnumerableProperty=function(t,i){return _.prototype.propertyIsEnumerable.call(t,i)},n.isSetSimpleEqual=function(t,i){for(const e of Set.prototype.values.call(t))if(!Set.prototype.has.call(i,e))return!1;return!0},n.isDeepEqualObj=function(t,i,e,r,o){const{isDeepEqual:h,valueOf:a,hasOwnEnumerableProperty:u}=n,{keys:c,getOwnPropertySymbols:l}=_;if(t===s.array){if(!r.part){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!h(i[t],e[t],r,o))return!1;return!0}for(const t of i)for(const i of e)if(h(t,i,r,o))return!0}else if(t===s.set){if(i.size!==e.size)return!1;if(!n.isSetSimpleEqual(i,e)){const t=new Set(Set.prototype.values.call(e));for(const e of Set.prototype.values.call(i)){if(t.delete(e))continue;let i=!1;for(const s of t)if(h(e,s,r,o)){t.delete(s),i=!0;break}if(!i)return!1}}}else if(t===s.map){if(i.size!==e.size)return!1;for(const[t,s]of Map.prototype.entries.call(i))if(void 0===s&&!Map.prototype.has.call(e,t)||!h(s,Map.prototype.get.call(e,t),r,o))return!1}else if(t===s.error&&(i.name!==e.name||i.message!==e.message))return!1;const d=a(i),f=a(e);if((i!==d||e!==f)&&!h(d,f,r,o))return!1;const g=c(i);if(!r.part&&g.length!==c(e).length&&!r.skip)return!1;let v=0;for(const t of g)if(r.skip&&r.skip.includes(t))void 0===e[t]&&++v;else if(!u(e,t)||!h(i[t],e[t],r,o))return!1;if(!r.part&&g.length-v!==c(e).length)return!1;if(!1!==r.symbols){const t=l(i),s=new Set(l(e));for(const n of t){if(!r.skip||!r.skip.includes(n))if(u(i,n)){if(!u(e,n)||!h(i[n],e[n],r,o))return!1}else if(u(e,n))return!1;s.delete(n)}for(const t of s)if(u(e,t))return!1}return!0},n.SeenEntry=class{isSame(t,i){return this.obj===t&&this.ref===i}constructor(t,i){this.obj=t,this.ref=i}}},7916:(t,i,e)=>{const s=e(8761);t.exports=class extends b{constructor(t){super(t.filter((t=>""!==t)).map((t=>"string"==typeof t?t:t instanceof b?t.message:s(t))).join(" ")||"Unknown error"),"function"==typeof b.captureStackTrace&&b.captureStackTrace(this,i.assert)}}},5277:t=>{const i={};t.exports=function(t){if(!t)return"";let e="";for(let s=0;s<t.length;++s){const n=t.charCodeAt(s);i.isSafe(n)?e+=t[s]:e+=i.escapeHtmlChar(n)}return e},i.escapeHtmlChar=function(t){return i.namedHtml.get(t)||(t>=256?"&#"+t+";":"&#x".concat(t.toString(16).padStart(2,"0"),";"))},i.isSafe=function(t){return i.safeCharCodes.has(t)},i.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),i.safeCharCodes=function(){const t=new Set;for(let i=32;i<123;++i)(i>=97||i>=65&&i<=90||i>=48&&i<=57||32===i||46===i||44===i||45===i||58===i||95===i)&&t.add(i);return t}()},6064:t=>{t.exports=function(t){return t.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:t=>{t.exports=function(){}},1687:(t,i,e)=>{const s=e(375),n=e(8571),r=e(7043),o={};t.exports=o.merge=function(t,i,e){if(s(t&&"object"==typeof t,"Invalid target value: must be an object"),s(null==i||"object"==typeof i,"Invalid source value: must be null, undefined, or an object"),!i)return t;if(e=_.assign({nullOverride:!0,mergeArrays:!0},e),Array.isArray(i)){s(Array.isArray(t),"Cannot merge array onto an object"),e.mergeArrays||(t.length=0);for(let s=0;s<i.length;++s)t.push(n(i[s],{symbols:e.symbols}));return t}const h=r.keys(i,e);for(let s=0;s<h.length;++s){const r=h[s];if("__proto__"===r||!_.prototype.propertyIsEnumerable.call(i,r))continue;const a=i[r];if(a&&"object"==typeof a){if(t[r]===a)continue;!t[r]||"object"!=typeof t[r]||Array.isArray(t[r])!==Array.isArray(a)||a instanceof Date||a instanceof RegExp?t[r]=n(a,{symbols:e.symbols}):o.merge(t[r],a,e)}else(null!=a||e.nullOverride)&&(t[r]=a)}return t}},9621:(t,i,e)=>{const s=e(375),n={};t.exports=function(t,i,e){if(!1===i||null==i)return t;"string"==typeof(e=e||{})&&(e={separator:e});const r=Array.isArray(i);s(!r||!e.separator,"Separator option is not valid for array-based chain");const o=r?i:i.split(e.separator||".");let h=t;for(let t=0;t<o.length;++t){let r=o[t];const a=e.iterables&&n.iterables(h);if(Array.isArray(h)||"set"===a){const t=Number(r);Number.isInteger(t)&&(r=t<0?h.length+t:t)}if(!h||"function"==typeof h&&!1===e.functions||!a&&void 0===h[r]){s(!e.strict||t+1===o.length,"Missing segment",r,"in reach path ",i),s("object"==typeof h||!0===e.functions||"function"!=typeof h,"Invalid segment",r,"in reach path ",i),h=e.default;break}h=a?"set"===a?[...h][r]:h.get(r):h[r]}return h},n.iterables=function(t){return t instanceof Set?"set":t instanceof Map?"map":void 0}},8761:t=>{t.exports=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];try{return JSON.stringify(...i)}catch(t){return"[Cannot display object: "+t.message+"]"}}},4277:(t,i)=>{const e={};i=t.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:b.prototype,generic:_.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},e.typeMap=new Map([["[object Error]",i.error],["[object Map]",i.map],["[object Promise]",i.promise],["[object Set]",i.set],["[object WeakMap]",i.weakMap],["[object WeakSet]",i.weakSet]]),i.getInternalProto=function(t){if(Array.isArray(t))return i.array;if(t instanceof Date)return i.date;if(t instanceof RegExp)return i.regex;if(t instanceof b)return i.error;const s=_.prototype.toString.call(t);return e.typeMap.get(s)||i.generic}},7043:(t,i)=>{i.keys=function(t,i){return void 0===i&&(i={}),!1!==i.symbols?Reflect.ownKeys(t):_.getOwnPropertyNames(t)}},3652:(t,i,e)=>{const s=e(375),n={};i.Sorter=class{add(t,i){const e=[].concat((i=i||{}).before||[]),n=[].concat(i.after||[]),r=i.group||"?",o=i.sort||0;s(!e.includes(r),"Item cannot come before itself: ".concat(r)),s(!e.includes("?"),"Item cannot come before unassociated items"),s(!n.includes(r),"Item cannot come after itself: ".concat(r)),s(!n.includes("?"),"Item cannot come after unassociated items"),Array.isArray(t)||(t=[t]);for(const i of t){const t={seq:this.Qu.length,sort:o,before:e,after:n,group:r,node:i};this.Qu.push(t)}if(!i.manual){const t=this.Lw();s(t,"item","?"!==r?"added into group ".concat(r):"","created a dependencies error")}return this.nodes}merge(t){Array.isArray(t)||(t=[t]);for(const i of t)if(i)for(const t of i.Qu)this.Qu.push(_.assign({},t));this.Qu.sort(n.mergeSort);for(let t=0;t<this.Qu.length;++t)this.Qu[t].seq=t;const i=this.Lw();return s(i,"merge created a dependencies error"),this.nodes}sort(){const t=this.Lw();return s(t,"sort created a dependencies error"),this.nodes}Lw(){const t={},i=_.create(null),e=_.create(null);for(const s of this.Qu){const n=s.seq,r=s.group;e[r]=e[r]||[],e[r].push(n),t[n]=s.before;for(const t of s.after)i[t]=i[t]||[],i[t].push(n)}for(const i in t){const s=[];for(const n in t[i]){const r=t[i][n];e[r]=e[r]||[],s.push(...e[r])}t[i]=s}for(const s in i)if(e[s])for(const n of e[s])t[n].push(...i[s]);const s={};for(const i in t){const e=t[i];for(const t of e)s[t]=s[t]||[],s[t].push(i)}const n={},r=[];for(let t=0;t<this.Qu.length;++t){let i=t;if(s[t]){i=null;for(let t=0;t<this.Qu.length;++t){if(!0===n[t])continue;s[t]||(s[t]=[]);const e=s[t].length;let r=0;for(let i=0;i<e;++i)n[s[t][i]]&&++r;if(r===e){i=t;break}}}null!==i&&(n[i]=!0,r.push(i))}if(r.length!==this.Qu.length)return!1;const o={};for(const t of this.Qu)o[t.seq]=t;this.Qu=[],this.nodes=[];for(const t of r){const i=o[t];this.nodes.push(i.node),this.Qu.push(i)}return!0}constructor(){this.Qu=[],this.nodes=[]}},n.mergeSort=(t,i)=>t.sort===i.sort?0:t.sort<i.sort?-1:1},5380:(t,i,e)=>{const s=e(443),n=e(2178),r={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:s.URL||URL};i.analyze=function(t,i){if(void 0===i&&(i={}),!t)return n.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof t)throw new b("Invalid input: domain must be a string");if(t.length>256)return n.code("DOMAIN_TOO_LONG");if(r.nonAsciiRx.test(t)){if(!1===i.allowUnicode)return n.code("DOMAIN_INVALID_UNICODE_CHARS");t=t.normalize("NFC")}if(r.domainControlRx.test(t))return n.code("DOMAIN_INVALID_CHARS");t=r.punycode(t),i.allowFullyQualified&&"."===t[t.length-1]&&(t=t.slice(0,-1));const e=i.minDomainSegments||r.minDomainSegments,s=t.split(".");if(s.length<e)return n.code("DOMAIN_SEGMENTS_COUNT");if(i.maxDomainSegments&&s.length>i.maxDomainSegments)return n.code("DOMAIN_SEGMENTS_COUNT_MAX");const o=i.tlds;if(o){const t=s[s.length-1].toLowerCase();if(o.deny&&o.deny.has(t)||o.allow&&!o.allow.has(t))return n.code("DOMAIN_FORBIDDEN_TLDS")}for(let t=0;t<s.length;++t){const i=s[t];if(!i.length)return n.code("DOMAIN_EMPTY_SEGMENT");if(i.length>63)return n.code("DOMAIN_LONG_SEGMENT");if(t<s.length-1){if(!r.domainSegmentRx.test(i))return n.code("DOMAIN_INVALID_CHARS")}else if(!r.tldSegmentRx.test(i))return n.code("DOMAIN_INVALID_TLDS_CHARS")}return null},i.isValid=function(t,e){return!i.analyze(t,e)},r.punycode=function(t){t.includes("%")&&(t=t.replace(/%/g,"%25"));try{return new r.URL("http://".concat(t)).host}catch(i){return t}}},1745:(t,i,e)=>{const s=e(9848),n=e(5380),r=e(2178),o={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(s.TextEncoder||TextEncoder)};i.analyze=function(t,i){return o.email(t,i)},i.isValid=function(t,i){return!o.email(t,i)},o.email=function(t,i){if(void 0===i&&(i={}),"string"!=typeof t)throw new b("Invalid input: email must be a string");if(!t)return r.code("EMPTY_STRING");const e=!o.nonAsciiRx.test(t);if(!e){if(!1===i.allowUnicode)return r.code("FORBIDDEN_UNICODE");t=t.normalize("NFC")}const s=t.split("@");if(2!==s.length)return s.length>2?r.code("MULTIPLE_AT_CHAR"):r.code("MISSING_AT_CHAR");const[h,a]=s;if(!h)return r.code("EMPTY_LOCAL");if(!i.ignoreLength){if(t.length>254)return r.code("ADDRESS_TOO_LONG");if(o.encoder.encode(h).length>64)return r.code("LOCAL_TOO_LONG")}return o.local(h,e)||n.analyze(a,i)},o.local=function(t,i){const e=t.split(".");for(const t of e){if(!t.length)return r.code("EMPTY_LOCAL_SEGMENT");if(i){if(!o.atextRx.test(t))return r.code("INVALID_LOCAL_CHARS")}else for(const i of t){if(o.atextRx.test(i))continue;const t=o.binary(i);if(!o.atomRx.test(t))return r.code("INVALID_LOCAL_CHARS")}}},o.binary=function(t){return Array.from(o.encoder.encode(t)).map((t=>String.fromCharCode(t))).join("")},o.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,o.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(t,i)=>{i.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},i.code=function(t){return{code:t,error:i.codes[t]}}},9959:(t,i,e)=>{const s=e(375),n=e(5752);i.regex=function(t){void 0===t&&(t={}),s(void 0===t.cidr||"string"==typeof t.cidr,"options.cidr must be a string");const i=t.cidr?t.cidr.toLowerCase():"optional";s(["required","optional","forbidden"].includes(i),"options.cidr must be one of required, optional, forbidden"),s(void 0===t.version||"string"==typeof t.version||Array.isArray(t.version),"options.version must be a string or an array of string");let e=t.version||["ipv4","ipv6","ipvfuture"];Array.isArray(e)||(e=[e]),s(e.length>=1,"options.version must have at least 1 version specified");for(let t=0;t<e.length;++t)s("string"==typeof e[t],"options.version must only contain strings"),e[t]=e[t].toLowerCase(),s(["ipv4","ipv6","ipvfuture"].includes(e[t]),"options.version contains unknown version "+e[t]+" - must be one of ipv4, ipv6, ipvfuture");e=Array.from(new Set(e));const r="(?:".concat(e.map((t=>{if("forbidden"===i)return n.ip[t];const e="\\/".concat("ipv4"===t?n.ip.v4Cidr:n.ip.v6Cidr);return"required"===i?"".concat(n.ip[t]).concat(e):"".concat(n.ip[t],"(?:").concat(e,")?")})).join("|"),")"),o=new RegExp("^".concat(r,"$"));return{cidr:i,versions:e,regex:o,raw:r}}},5752:(t,i,e)=>{const s=e(375),n=e(6064),r={generate:function(){const t={},i="\\dA-Fa-f",e="["+i+"]",s="\\w-\\.~",n="!\\$&'\\(\\)\\*\\+,;=",r="%"+i,o=s+r+n+":@",h="["+o+"]",a="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";t.ipv4address="(?:"+a+"\\.){3}"+a;const u=e+"{1,4}",c="(?:"+u+":"+u+"|"+t.ipv4address+")",l="(?:"+u+":){6}"+c,d="::(?:"+u+":){5}"+c,f="(?:"+u+")?::(?:"+u+":){4}"+c,g="(?:(?:"+u+":){0,1}"+u+")?::(?:"+u+":){3}"+c,_="(?:(?:"+u+":){0,2}"+u+")?::(?:"+u+":){2}"+c,v="(?:(?:"+u+":){0,3}"+u+")?::"+u+":"+c,w="(?:(?:"+u+":){0,4}"+u+")?::"+c,m="(?:(?:"+u+":){0,5}"+u+")?::"+u,p="(?:(?:"+u+":){0,6}"+u+")?::";t.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",t.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",t.ipv6address="(?:"+l+"|"+d+"|"+f+"|"+g+"|"+_+"|"+v+"|"+w+"|"+m+"|"+p+")",t.ipvFuture="v"+e+"+\\.["+s+n+":]+",t.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",t.schemeRegex=new RegExp(t.scheme);const A="["+s+r+n+":]*",y="["+s+r+n+"]{1,255}",b="(?:\\[(?:"+t.ipv6address+"|"+t.ipvFuture+")\\]|"+t.ipv4address+"|"+y+")",M="(?:"+A+"@)?"+b+"(?::\\d*)?",T="(?:"+A+"@)?("+b+")(?::\\d*)?",S=h+"*",N=h+"+",I="(?:\\/"+S+")*",D="\\/(?:"+N+I+")?",E=N+I,k="["+s+r+n+"@]+"+I,L="(?:\\/\\/\\/"+S+I+")";return t.hierPart="(?:(?:\\/\\/"+M+I+")|"+D+"|"+E+"|"+L+")",t.hierPartCapture="(?:(?:\\/\\/"+T+I+")|"+D+"|"+E+")",t.relativeRef="(?:(?:\\/\\/"+M+I+")|"+D+"|"+k+"|)",t.relativeRefCapture="(?:(?:\\/\\/"+T+I+")|"+D+"|"+k+"|)",t.query="["+o+"\\/\\?]*(?=#|$)",t.queryWithSquareBrackets="["+o+"\\[\\]\\/\\?]*(?=#|$)",t.fragment="["+o+"\\/\\?]*",t}};r.rfc3986=r.generate(),i.ip={v4Cidr:r.rfc3986.ipv4Cidr,v6Cidr:r.rfc3986.ipv6Cidr,ipv4:r.rfc3986.ipv4address,ipv6:r.rfc3986.ipv6address,ipvfuture:r.rfc3986.ipvFuture},r.createRegex=function(t){const i=r.rfc3986,e="(?:\\?"+(t.allowQuerySquareBrackets?i.queryWithSquareBrackets:i.query)+")?(?:#"+i.fragment+")?",o=t.domain?i.relativeRefCapture:i.relativeRef;if(t.relativeOnly)return r.wrap(o+e);let h="";if(t.scheme){s(t.scheme instanceof RegExp||"string"==typeof t.scheme||Array.isArray(t.scheme),"scheme must be a RegExp, String, or Array");const e=[].concat(t.scheme);s(e.length>=1,"scheme must have at least 1 scheme specified");const r=[];for(let t=0;t<e.length;++t){const o=e[t];s(o instanceof RegExp||"string"==typeof o,"scheme at position "+t+" must be a RegExp or String"),o instanceof RegExp?r.push(o.source.toString()):(s(i.schemeRegex.test(o),"scheme at position "+t+" must be a valid scheme"),r.push(n(o)))}h=r.join("|")}const a="(?:"+(h?"(?:"+h+")":i.scheme)+":"+(t.domain?i.hierPartCapture:i.hierPart)+")",u=t.allowRelative?"(?:"+a+"|"+o+")":a;return r.wrap(u+e,h)},r.wrap=function(t,i){return{raw:t="(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])".concat(t),regex:new RegExp("^".concat(t,"$")),scheme:i}},r.uriRegex=r.createRegex({}),i.regex=function(t){return void 0===t&&(t={}),t.scheme||t.allowRelative||t.relativeOnly||t.allowQuerySquareBrackets||t.domain?r.createRegex(t):r.uriRegex}},1447:(t,i)=>{const e={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Bo("formula"),settings:Bo("settings")};i.Parser=class{dw(t){let s=[],n="",r=0,o=!1;const h=t=>{if(r)throw new b("Formula missing closing parenthesis");const h=s.length?s[s.length-1]:null;if(o||n||t){if(h&&"reference"===h.type&&")"===t)return h.type="function",h.value=this.xw(n,h.value),void(n="");if(")"===t){const t=new i.Parser(n,this.settings);s.push({type:"segment",value:t})}else if(o){if("]"===o)return s.push({type:"reference",value:n}),void(n="");s.push({type:"literal",value:n})}else if(e.operatorCharacters.includes(n))h&&"operator"===h.type&&e.operators.includes(h.value+n)?h.value+=n:s.push({type:"operator",value:n});else if(n.match(e.numberRx))s.push({type:"constant",value:S(n)});else if(void 0!==this.settings.constants[n])s.push({type:"constant",value:this.settings.constants[n]});else{if(!n.match(e.tokenRx))throw new b("Formula contains invalid token: ".concat(n));s.push({type:"reference",value:n})}n=""}};for(const i of t)o?i===o?(h(),o=!1):n+=i:r?"("===i?(n+=i,++r):")"===i?(--r,r?n+=i:h(i)):n+=i:i in e.literals?o=e.literals[i]:"("===i?(h(),++r):e.operatorCharacters.includes(i)?(h(),n=i,h()):" "!==i?n+=i:h();h(),s=s.map(((t,i)=>"operator"!==t.type||"-"!==t.value||i&&"operator"!==s[i-1].type?t:{type:"operator",value:"n"}));let a=!1;for(const t of s){if("operator"===t.type){if(e.operatorsPrefix.includes(t.value))continue;if(!a)throw new b("Formula contains an operator in invalid position");if(!e.operators.includes(t.value))throw new b("Formula contains an unknown operator ".concat(t.value))}else if(a)throw new b("Formula missing expected operator");a=!a}if(!a)throw new b("Formula contains invalid trailing operator");1===s.length&&["reference","literal","constant"].includes(s[0].type)&&(this.single={type:"reference"===s[0].type?"reference":"value",value:s[0].value}),this.Cw=s.map((t=>{if("operator"===t.type)return e.operatorsPrefix.includes(t.value)?t:t.value;if("reference"!==t.type)return t.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(t.value))throw new b("Formula contains invalid reference ".concat(t.value));return this.settings.reference?this.settings.reference(t.value):e.reference(t.value)}))}xw(t,s){const n=this.settings.functions[s];if("function"!=typeof n)throw new b("Formula contains unknown function ".concat(s));let r=[];if(t){let i="",n=0,o=!1;const h=()=>{if(!i)throw new b("Formula contains function ".concat(s," with invalid arguments ").concat(t));r.push(i),i=""};for(let s=0;s<t.length;++s){const r=t[s];o?(i+=r,r===o&&(o=!1)):r in e.literals&&!n?(i+=r,o=e.literals[r]):","!==r||n?(i+=r,"("===r?++n:")"===r&&--n):h()}h()}return r=r.map((t=>new i.Parser(t,this.settings))),function(t){const i=[];for(const e of r)i.push(e.evaluate(t));return n.call(t,...i)}}evaluate(t){const i=this.Cw.slice();for(let s=i.length-2;s>=0;--s){const n=i[s];if(n&&"operator"===n.type){const r=i[s+1];i.splice(s+1,1);const o=e.evaluate(r,t);i[s]=e.single(n.value,o)}}return e.operatorsOrder.forEach((s=>{for(let n=1;n<i.length-1;)if(s.includes(i[n])){const s=i[n],r=e.evaluate(i[n-1],t),o=e.evaluate(i[n+1],t);i.splice(n,2);const h=e.calculate(s,r,o);i[n-1]=0===h?0:h}else n+=2})),e.evaluate(i[0],t)}constructor(t,i={}){if(!i[e.settings]&&i.constants)for(const t in i.constants){const e=i.constants[t];if(null!==e&&!["boolean","number","string"].includes(typeof e))throw new b("Formula constant ".concat(t," contains invalid ").concat(typeof e," value type"))}this.settings=i[e.settings]?i:_.assign({[e.settings]:!0,constants:{},functions:{}},i),this.single=null,this.Cw=null,this.dw(t)}},i.Parser.prototype[e.symbol]=!0,e.reference=function(t){return function(i){return i&&void 0!==i[t]?i[t]:null}},e.evaluate=function(t,i){return null===t?null:"function"==typeof t?t(i):t[e.symbol]?t.evaluate(i):t},e.single=function(t,i){if("!"===t)return!i;const e=-i;return 0===e?0:e},e.calculate=function(t,i,s){if("??"===t)return e.exists(i)?i:s;if("string"==typeof i||"string"==typeof s){if("+"===t)return(i=e.exists(i)?i:"")+(e.exists(s)?s:"")}else switch(t){case"^":return x.pow(i,s);case"*":return i*s;case"/":return i/s;case"%":return i%s;case"+":return i+s;case"-":return i-s}switch(t){case"<":return i<s;case"<=":return i<=s;case">":return i>s;case">=":return i>=s;case"==":return i===s;case"!=":return i!==s;case"&&":return i&&s;case"||":return i||s}return null},e.exists=function(t){return null!=t}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:t=>{t.exports=JSON.parse('{"version":"17.13.3"}')}},i={},function e(s){var n=i[s];if(void 0!==n)return n.exports;var r=i[s]={exports:{}};return t[s](r,r.exports,e),r.exports}(5107);var t,i},t.exports=e()}(Qs);const Fs=A(Qs.exports);let Ys;class Vs extends Nt{getRTCPeerConnection(){return this.webRTCPeer?this.webRTCPeer.getRTCPeer():null}stop(){var t;Ys.info("Stopping"),this.webRTCPeer.closeRTCPeer(),null==(t=this.signaling)||t.close(),this.signaling=null,this.stopReconnection=!0,this.webRTCPeer=new rs}isActive(){const t=this.webRTCPeer.getRTCPeerStatus();return Ys.info("Broadcast status: ",t||"not_established"),"connected"===t}setReconnect(){this.signaling.on("migrate",(()=>this.replaceConnection())),this.autoReconnect&&(this.signaling.on(As,(()=>{(this.firstReconnection||!this.alreadyDisconnected)&&(this.firstReconnection=!1,this.reconnect({error:new b("Signaling error: wsConnectionError")}))})),this.webRTCPeer.on(ss.connectionStateChange,(t=>{H(t),"connected"===t&&Z(new Date),("failed"===t||"disconnected"===t&&this.alreadyDisconnected)&&this.firstReconnection?(this.firstReconnection=!1,this.reconnect({error:new b("Connection state change: RTCPeerConnectionState disconnected")})):"disconnected"===t?(this.alreadyDisconnected=!0,u((()=>this.reconnect({error:new b("Connection state change: RTCPeerConnectionState disconnected")})),1500)):this.alreadyDisconnected=!1})))}async reconnect(t){try{Ys.info("Attempting to reconnect..."),!this.isActive()&&!this.stopReconnection&&!this.isReconnecting&&(this.stop(),this.emit("reconnect",{timeout:Gs(this.reconnectionInterval),error:null!=t&&t.error?null==t?void 0:t.error:new b("Attempting to reconnect")}),this.isReconnecting=!0,await this.connect(this.options),this.alreadyDisconnected=!1,this.reconnectionInterval=1e3,this.firstReconnection=!0,this.isReconnecting=!1)}catch(t){this.isReconnecting=!1,this.reconnectionInterval=Gs(this.reconnectionInterval),Ys.error("Reconnection failed, retrying in ".concat(this.reconnectionInterval,"ms. "),t),u((()=>this.reconnect({error:t})),this.reconnectionInterval)}}constructor(t,i,e,s){if(super(),Ys=e,!i)throw Ys.error("Token generator is required to construct this module."),new b("Token generator is required to construct this module.");this.webRTCPeer=new rs,this.signaling=null,this.autoReconnect=s,this.reconnectionInterval=1e3,this.alreadyDisconnected=!1,this.firstReconnection=!0,this.stopReconnection=!1,this.isReconnecting=!1,this.tokenGenerator=i,this.options=null}}const Gs=t=>t<32e3?2*t:t,Ws=s.RTCRtpSender&&!!RTCRtpSender.prototype.createEncodedStreams&&s.RTCRtpReceiver&&!!RTCRtpReceiver.prototype.createEncodedStreams,Zs="RTCRtpScriptTransform"in s,Hs="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBGPXR5cGVvZiBnbG9iYWxUaGlzPCJ1Ij9nbG9iYWxUaGlzOnR5cGVvZiB3aW5kb3c8InUiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsPCJ1Ij9nbG9iYWw6dHlwZW9mIHNlbGY8InUiP3NlbGY6e307ZnVuY3Rpb24gVyhuKXtyZXR1cm4gbiYmbi5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwiZGVmYXVsdCIpP24uZGVmYXVsdDpufXZhciBCPXtleHBvcnRzOnt9fTsvKiEKICoganMtbG9nZ2VyIC0gaHR0cDovL2dpdGh1Yi5jb20vam9ubnlyZWV2ZXMvanMtbG9nZ2VyCiAqIEpvbm55IFJlZXZlcywgaHR0cDovL2pvbm55cmVldmVzLmNvLnVrLwogKiBqcy1sb2dnZXIgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqLyhmdW5jdGlvbihuKXsoZnVuY3Rpb24odCl7dmFyIGU9e307ZS5WRVJTSU9OPSIxLjYuMSI7dmFyIHMscj17fSxvPWZ1bmN0aW9uKGksdSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHUuYXBwbHkoaSxhcmd1bWVudHMpfX0sYT1mdW5jdGlvbigpe3ZhciBpPWFyZ3VtZW50cyx1PWlbMF0saCxjO2ZvcihjPTE7YzxpLmxlbmd0aDtjKyspZm9yKGggaW4gaVtjXSkhKGggaW4gdSkmJmlbY10uaGFzT3duUHJvcGVydHkoaCkmJih1W2hdPWlbY11baF0pO3JldHVybiB1fSxkPWZ1bmN0aW9uKGksdSl7cmV0dXJue3ZhbHVlOmksbmFtZTp1fX07ZS5UUkFDRT1kKDEsIlRSQUNFIiksZS5ERUJVRz1kKDIsIkRFQlVHIiksZS5JTkZPPWQoMywiSU5GTyIpLGUuVElNRT1kKDQsIlRJTUUiKSxlLldBUk49ZCg1LCJXQVJOIiksZS5FUlJPUj1kKDgsIkVSUk9SIiksZS5PRkY9ZCg5OSwiT0ZGIik7dmFyIGw9ZnVuY3Rpb24oaSl7dGhpcy5jb250ZXh0PWksdGhpcy5zZXRMZXZlbChpLmZpbHRlckxldmVsKSx0aGlzLmxvZz10aGlzLmluZm99O2wucHJvdG90eXBlPXtzZXRMZXZlbDpmdW5jdGlvbihpKXtpJiYidmFsdWUiaW4gaSYmKHRoaXMuY29udGV4dC5maWx0ZXJMZXZlbD1pKX0sZ2V0TGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0LmZpbHRlckxldmVsfSxlbmFibGVkRm9yOmZ1bmN0aW9uKGkpe3ZhciB1PXRoaXMuY29udGV4dC5maWx0ZXJMZXZlbDtyZXR1cm4gaS52YWx1ZT49dS52YWx1ZX0sdHJhY2U6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLlRSQUNFLGFyZ3VtZW50cyl9LGRlYnVnOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5ERUJVRyxhcmd1bWVudHMpfSxpbmZvOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5JTkZPLGFyZ3VtZW50cyl9LHdhcm46ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLldBUk4sYXJndW1lbnRzKX0sZXJyb3I6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLkVSUk9SLGFyZ3VtZW50cyl9LHRpbWU6ZnVuY3Rpb24oaSl7dHlwZW9mIGk9PSJzdHJpbmciJiZpLmxlbmd0aD4wJiZ0aGlzLmludm9rZShlLlRJTUUsW2ksInN0YXJ0Il0pfSx0aW1lRW5kOmZ1bmN0aW9uKGkpe3R5cGVvZiBpPT0ic3RyaW5nIiYmaS5sZW5ndGg+MCYmdGhpcy5pbnZva2UoZS5USU1FLFtpLCJlbmQiXSl9LGludm9rZTpmdW5jdGlvbihpLHUpe3MmJnRoaXMuZW5hYmxlZEZvcihpKSYmcyh1LGEoe2xldmVsOml9LHRoaXMuY29udGV4dCkpfX07dmFyIGY9bmV3IGwoe2ZpbHRlckxldmVsOmUuT0ZGfSk7KGZ1bmN0aW9uKCl7dmFyIGk9ZTtpLmVuYWJsZWRGb3I9byhmLGYuZW5hYmxlZEZvciksaS50cmFjZT1vKGYsZi50cmFjZSksaS5kZWJ1Zz1vKGYsZi5kZWJ1ZyksaS50aW1lPW8oZixmLnRpbWUpLGkudGltZUVuZD1vKGYsZi50aW1lRW5kKSxpLmluZm89byhmLGYuaW5mbyksaS53YXJuPW8oZixmLndhcm4pLGkuZXJyb3I9byhmLGYuZXJyb3IpLGkubG9nPWkuaW5mb30pKCksZS5zZXRIYW5kbGVyPWZ1bmN0aW9uKGkpe3M9aX0sZS5zZXRMZXZlbD1mdW5jdGlvbihpKXtmLnNldExldmVsKGkpO2Zvcih2YXIgdSBpbiByKXIuaGFzT3duUHJvcGVydHkodSkmJnJbdV0uc2V0TGV2ZWwoaSl9LGUuZ2V0TGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gZi5nZXRMZXZlbCgpfSxlLmdldD1mdW5jdGlvbihpKXtyZXR1cm4gcltpXXx8KHJbaV09bmV3IGwoYSh7bmFtZTppfSxmLmNvbnRleHQpKSl9LGUuY3JlYXRlRGVmYXVsdEhhbmRsZXI9ZnVuY3Rpb24oaSl7aT1pfHx7fSxpLmZvcm1hdHRlcj1pLmZvcm1hdHRlcnx8ZnVuY3Rpb24ocCxfKXtfLm5hbWUmJnAudW5zaGlmdCgiWyIrXy5uYW1lKyJdIil9O3ZhciB1PXt9LGg9ZnVuY3Rpb24oYyxwKXtGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjLGNvbnNvbGUscCl9O3JldHVybiB0eXBlb2YgY29uc29sZT4idSI/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKGMscCl7Yz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjKTt2YXIgXz1jb25zb2xlLmxvZyxnO3AubGV2ZWw9PT1lLlRJTUU/KGc9KHAubmFtZT8iWyIrcC5uYW1lKyJdICI6IiIpK2NbMF0sY1sxXT09PSJzdGFydCI/Y29uc29sZS50aW1lP2NvbnNvbGUudGltZShnKTp1W2ddPW5ldyBEYXRlKCkuZ2V0VGltZSgpOmNvbnNvbGUudGltZUVuZD9jb25zb2xlLnRpbWVFbmQoZyk6aChfLFtnKyI6ICIrKG5ldyBEYXRlKCkuZ2V0VGltZSgpLXVbZ10pKyJtcyJdKSk6KHAubGV2ZWw9PT1lLldBUk4mJmNvbnNvbGUud2Fybj9fPWNvbnNvbGUud2FybjpwLmxldmVsPT09ZS5FUlJPUiYmY29uc29sZS5lcnJvcj9fPWNvbnNvbGUuZXJyb3I6cC5sZXZlbD09PWUuSU5GTyYmY29uc29sZS5pbmZvP189Y29uc29sZS5pbmZvOnAubGV2ZWw9PT1lLkRFQlVHJiZjb25zb2xlLmRlYnVnP189Y29uc29sZS5kZWJ1ZzpwLmxldmVsPT09ZS5UUkFDRSYmY29uc29sZS50cmFjZSYmKF89Y29uc29sZS50cmFjZSksaS5mb3JtYXR0ZXIoYyxwKSxoKF8sYykpfX0sZS51c2VEZWZhdWx0cz1mdW5jdGlvbihpKXtlLnNldExldmVsKGkmJmkuZGVmYXVsdExldmVsfHxlLkRFQlVHKSxlLnNldEhhbmRsZXIoZS5jcmVhdGVEZWZhdWx0SGFuZGxlcihpKSl9LGUuc2V0RGVmYXVsdHM9ZS51c2VEZWZhdWx0cyxuLmV4cG9ydHM/bi5leHBvcnRzPWU6KGUuX3ByZXZMb2dnZXI9dC5Mb2dnZXIsZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuTG9nZ2VyPWUuX3ByZXZMb2dnZXIsZX0sdC5Mb2dnZXI9ZSl9KShGKX0pKEIpO3ZhciB6PUIuZXhwb3J0cyxEPVcoeik7Y2xhc3Mgd3tjb25zdHJ1Y3Rvcih0KXt0aGlzLmRhdGE9dCx0aGlzLmJpdE9mZnNldD0wfXJlYWRCaXRzKHQpe2lmKHRoaXMuYml0T2Zmc2V0K3Q+dGhpcy5kYXRhLmxlbmd0aCo4KXRocm93IG5ldyBFcnJvcigiQXR0ZW1wdGVkIHRvIHJlYWQgcGFzdCB0aGUgZW5kIG9mIHRoZSBiaXRzdHJlYW0iKTtsZXQgZT0wO2ZvcihsZXQgcz0wO3M8dDtzKyspe2NvbnN0IHI9TWF0aC5mbG9vcih0aGlzLmJpdE9mZnNldC84KSxvPTctdGhpcy5iaXRPZmZzZXQlOCxhPXRoaXMuZGF0YVtyXT4+byYxO2V8PWE8PHQtMS1zLHRoaXMuYml0T2Zmc2V0Kyt9cmV0dXJuIGV9c2tpcCh0KXt0aGlzLmJpdE9mZnNldCs9dH1yZWFkRXhwR29sb21iVW5zaWduZWQoKXtsZXQgdD0tMTtmb3IobGV0IGU9MDtlPT09MDt0KyspZT10aGlzLnJlYWRCaXRzKDEpO3JldHVybigxPDx0KS0xK3RoaXMucmVhZEJpdHModCl9cmVhZEV4cEdvbG9tYlNpZ25lZCgpe2NvbnN0IHQ9dGhpcy5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtyZXR1cm4gdCUyPT09MD8tKHQvMik6KHQrMSkvMn19Y29uc3QgbT17U0xJQ0VfTk9OX0lEUjoxLFNMSUNFX1BBUlRJVElPTl9BOjIsU0xJQ0VfSURSOjUsU0VJX0gyNjQ6NixTRUlfSDI2NV9QUkVGSVg6MzksU0VJX0gyNjVfU1VGRklYOjQwLFNQU19IMjY0OjcsU1BTX0gyNjU6MzMsUFBTX0gyNjQ6OCxQUFNfSDI2NTozNH0sUj17UElDX1RJTUlORzoxLFVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6NX0sRT17TEVHQUNZOjEsTkVXOjIsVElNRUNPREU6MyxPVEhFUjo0fSxqPSI2ZTljZmQyYS01OTA3LTQ5ZmYtYjM2My04OTc4YTZlODM0MGUiLHE9IjlhMjFmM2JlLTMxZjAtNGI3OC1iMGJlLWM3ZjdkYmI5NzI1MCIsTD0iZDQwZTM4ZWEtZDQxOS00YzYyLTk0ZWQtMjBhYzM3YjRlNGZhIjtjbGFzcyBWe2NvbnN0cnVjdG9yKHQ9IkgyNjQiKXt0aGlzLnNwcz1uZXcgTWFwLHRoaXMucHBzPW5ldyBNYXAsdGhpcy5hY3RpdmVTUFM9bnVsbCx0aGlzLmNvZGVjPXR9Y29sbGVjdFBQUyh0KXt0aGlzLmNvZGVjPT09IkgyNjQiP3RoaXMuY29sbGVjdEgyNjRQUFModCk6dGhpcy5jb2xsZWN0SDI2NVBQUyh0KX1jb2xsZWN0U1BTKHQpe3RoaXMuY29kZWM9PT0iSDI2NCI/dGhpcy5jb2xsZWN0SDI2NFNQUyh0KTp0aGlzLmNvbGxlY3RIMjY1U1BTKHQpfWNvbGxlY3RIMjY0U1BTKHQpe2NvbnN0IGU9bmV3IHcodCkscz1lLnJlYWRCaXRzKDgpLHI9WzEwMCwxMTAsMTIyLDI0NCw0NCw4Myw4NiwxMTgsMTI4LDEzOCwxMzksMTM0LDEzNV07ZS5za2lwKDgpLGUuc2tpcCg4KTtjb25zdCBvPWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7aWYobz4zMXx8bzwwKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzZXFfcGFyYW1ldGVyX3NldF9pZCIpO2lmKHIuaW5jbHVkZXMocykpe2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtpZihsPT09MyYmZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnNraXAoMSksZS5yZWFkQml0cygxKSl7Y29uc3QgaT1sIT09Mz84OjEyO2ZvcihsZXQgdT0wO3U8aTt1KyspaWYoZS5yZWFkQml0cygxKSl7Y29uc3QgaD11PDY/MTY6NjQ7bGV0IGM9OCxwPTg7Zm9yKGxldCBfPTA7XzxoO18rKyl7aWYocCE9PTApe2NvbnN0IGc9ZS5yZWFkRXhwR29sb21iU2lnbmVkKCk7cD0oYytnKzI1NiklMjU2fWM9cD09PTA/YzpwfX19fWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3QgYT1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKGE9PT0wKWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7ZWxzZSBpZihhPT09MSl7ZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpO2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtmb3IobGV0IGY9MDtmPGw7ZisrKWUucmVhZEV4cEdvbG9tYlNpZ25lZCgpfWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRCaXRzKDEpPT09MCYmZS5za2lwKDEpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSk7bGV0IGQ7aWYoZS5yZWFkQml0cygxKSl7bGV0IGY9ZnVuY3Rpb24oYyl7Y29uc3QgcD1jLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2Muc2tpcCg0KSxjLnNraXAoNCk7Zm9yKGxldCB4PTA7eDw9cDt4KyspYy5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxjLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGMuc2tpcCgxKTtjLnNraXAoNSk7Y29uc3QgXz1jLnJlYWRCaXRzKDUpLGc9Yy5yZWFkQml0cyg1KSxBPWMucmVhZEJpdHMoNSk7cmV0dXJue2NwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6XyxkcGJfb3V0cHV0X2RlbGF5X2xlbmd0aF9taW51czE6Zyx0aW1lX29mZnNldF9sZW5ndGg6QX19O2UucmVhZEJpdHMoMSkmJmUucmVhZEJpdHMoOCk9PT0yNTUmJihlLnNraXAoMTYpLGUuc2tpcCgxNikpLGUucmVhZEJpdHMoMSkmJmUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5za2lwKDMpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiZlLnNraXAoMjQpKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpKTtjb25zdCBsPWUucmVhZEJpdHMoMSk/e251bV91bml0c19pbl90aWNrOmUucmVhZEJpdHMoMzIpLHRpbWVfc2NhbGU6ZS5yZWFkQml0cygzMiksZml4ZWRfZnJhbWVfcmF0ZV9mbGFnOmUucmVhZEJpdHMoMSl9OnZvaWQgMCxpPWUucmVhZEJpdHMoMSk/ZihlKTp2b2lkIDAsdT1lLnJlYWRCaXRzKDEpP2YoZSk6dm9pZCAwOyhpfHx1KSYmZS5za2lwKDEpO2NvbnN0IGg9ZS5yZWFkQml0cygxKTtkPXt0aW1pbmdfaW5mbzpsLG5hbF9ocmRfcGFyYW1ldGVyczppLHZjbF9ocmRfcGFyYW1ldGVyczp1LHBpY19zdHJ1Y3RfcHJlc2VudF9mbGFnOmh9fXRoaXMuc3BzLnNldChvLHt2dWlfcGFyYW1ldGVyczpkfSl9Y29sbGVjdEgyNjVTUFModCl7fWNvbGxlY3RIMjY0UFBTKHQpe2NvbnN0IGU9bmV3IHcodCkscz1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKHM+MjU1fHxzPDApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBpY19wYXJhbWV0ZXJfc2V0X2lkIik7Y29uc3Qgcj1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO3RoaXMucHBzLnNldChzLHtzZXFfcGFyYW1ldGVyX3NldF9pZDpyfSl9Y29sbGVjdEgyNjVQUFModCl7fWZpbmRBY3RpdmVTUFModCl7Y29uc3QgZT1uZXcgdyh0KTtlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3Qgcz1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLHI9dGhpcy5wcHMuZ2V0KHMpO2lmKHIpe2NvbnN0IG89dGhpcy5zcHMuZ2V0KHIuc2VxX3BhcmFtZXRlcl9zZXRfaWQpO2lmKG8pe3RoaXMuYWN0aXZlU1BTPW87cmV0dXJufX10aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIHRoZSBhY3RpdmUgU1BTIil9fWNvbnN0IFM9bmV3IFY7ZnVuY3Rpb24gRyhuLHQpe2Zvcig7dDxuLmJ5dGVMZW5ndGgtNDspe2lmKG5bdF09PT0wJiZuW3QrMV09PT0wJiYoblt0KzJdPT09MXx8blt0KzJdPT09MCYmblt0KzNdPT09MSkpcmV0dXJuIHQ7dCs9MX1yZXR1cm4tMX1mdW5jdGlvbiBVKG4pe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkobi5ieXRlTGVuZ3RoKTtsZXQgZT0wLHM9MDtmb3IobGV0IHI9MjtyPG4uYnl0ZUxlbmd0aDtyKyspbltyXT09PTMmJm5bci0xXT09PTAmJm5bci0yXT09PTAmJih0LnNldChuLnN1YmFycmF5KHMsciksZSksZSs9ci1zLHM9cisxKTtyZXR1cm4gczxuLmJ5dGVMZW5ndGgmJnQuc2V0KG4uc3ViYXJyYXkocyksZSksdH1mdW5jdGlvbiBZKG4sdCl7bGV0IGU9MDtjb25zdCBzPXQ9PT0iSDI2NCI/MToyLHI9W107Zm9yKDtlPG4uYnl0ZUxlbmd0aC00Oyl7Y29uc3Qgbz1HKG4sZSk7aWYobz49ZSl7Y29uc3QgYT1uW28rMl09PT0xPzM6NCxkPUcobixvK2Ercyk7aWYoZD5vKXIucHVzaChuLnN1YmFycmF5KG8sZCkpLGU9ZDtlbHNle3IucHVzaChuLnN1YmFycmF5KG8pKTticmVha319ZWxzZSBicmVha31yZXR1cm4gcn1mdW5jdGlvbiBYKG4sdCl7bGV0IGU9ITA7cmV0dXJuIFkobix0KS5maWx0ZXIocz0+e2NvbnN0IHI9c1syXT09PTE/Mzo0LG89dD09PSJIMjY0Ij8xOjIsYT1zW3JdLGQ9dD09PSJIMjY0Ij9hJjMxOmE+PjEmNjM7aWYoZSlzd2l0Y2goZCl7Y2FzZSBtLlBQU19IMjY0OmNhc2UgbS5QUFNfSDI2NTpTLmNvbGxlY3RQUFMoVShzLnN1YmFycmF5KHIrbykpKTticmVhaztjYXNlIG0uU1BTX0gyNjQ6Y2FzZSBtLlNQU19IMjY1OlMuY29sbGVjdFNQUyhVKHMuc3ViYXJyYXkocitvKSkpO2JyZWFrO2Nhc2UgbS5TTElDRV9JRFI6Y2FzZSBtLlNMSUNFX05PTl9JRFI6Y2FzZSBtLlNMSUNFX1BBUlRJVElPTl9BOnRyeXtTLmZpbmRBY3RpdmVTUFMoVShzLnN1YmFycmF5KHIrbykpKSxlPSExfWNhdGNoKGwpe2NvbnNvbGUuaW5mbygiRmFpbGVkIHRvIGZpbmQgYWN0aXZlIFNQUy4gV2lsbCBub3QgYmUgYWJsZSB0byBleHRyYWN0IFBJQyB0aW1pbmcgbWV0YWRhdGEiKX1icmVha31yZXR1cm5bbS5TRUlfSDI2NCxtLlNFSV9IMjY1X1BSRUZJWCxtLlNFSV9IMjY1X1NVRkZJWF0uaW5jbHVkZXMoZCl9KX1mdW5jdGlvbiAkKG4pe2xldCB0PTAsZT0wO2Zvcig7bltlXT09PTI1NTspdCs9MjU1LGUrKzt0Kz1uW2VdLGUrKztsZXQgcz0wO2Zvcig7bltlXT09PTI1NTspcys9MjU1LGUrKztyZXR1cm4gcys9bltlXSxlKysse3R5cGU6dCxjb250ZW50Om4uc3ViYXJyYXkoZSxlK3MpfX1mdW5jdGlvbiBKKG4pe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkoVChxKSksZT1uZXcgVWludDhBcnJheShUKGopKSxzPW5ldyBVaW50OEFycmF5KFQoTCkpO3JldHVybiB0LmV2ZXJ5KChyLG8pPT5yPT09bltvXSk/RS5USU1FQ09ERTplLmV2ZXJ5KChyLG8pPT5yPT09bltvXSk/RS5MRUdBQ1k6cy5ldmVyeSgocixvKT0+cj09PW5bb10pP0UuTkVXOkUuT1RIRVJ9ZnVuY3Rpb24gSyhuLHQpe2xldCBlPTA7bi51dWlkPXQuc3ViYXJyYXkoZSxlKzE2KSxlKz0xNjtjb25zdCBzPUoobi51dWlkKSxyPXQuc3ViYXJyYXkoZSk7c3dpdGNoKHMpe2Nhc2UgRS5MRUdBQ1k6Y2FzZSBFLk9USEVSOm4udW5yZWdpc3RlcmVkPXI7YnJlYWs7Y2FzZSBFLlRJTUVDT0RFOm4udGltZWNvZGU9TyhyKTticmVhaztjYXNlIEUuTkVXOntsZXQgbz0wO2NvbnN0IGE9QyhEYXRlLm5vdygpKS5sZW5ndGgsZD1yLnN1YmFycmF5KG8sYSk7bys9YTtjb25zdCBsPXIuc3ViYXJyYXkobyk7bi50aW1lY29kZT1PKGQpLG4udW5yZWdpc3RlcmVkPWw7YnJlYWt9fX1mdW5jdGlvbiBPKG4pe2NvbnN0IHQ9bi5yZWR1Y2UoKG8sYSk9PihvPDxCaWdJbnQoOCkpK0JpZ0ludChhKSxCaWdJbnQoMCkpLGU9TnVtYmVyKHQpLHM9bmV3IERhdGUoZSk7cmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzLnRvSVNPU3RyaW5nKCkpfWZ1bmN0aW9uIFoobix0KXt2YXIgZixpLHUsaCxjO2lmKCFTLmFjdGl2ZVNQUyl7Y29uc29sZS53YXJuKCJDYW5ub3QgZmluZCB0aGUgYWN0aXZlIFNQUyIpO3JldHVybn1jb25zdCBlPShmPVMuYWN0aXZlU1BTLnZ1aV9wYXJhbWV0ZXJzLm5hbF9ocmRfcGFyYW1ldGVycykhPW51bGw/ZjpTLmFjdGl2ZVNQUy52dWlfcGFyYW1ldGVycy52Y2xfaHJkX3BhcmFtZXRlcnMscz17Y3BiX2RwYl9kZWxheXNfcHJlc2VudF9mbGFnOmU/MTowLGNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6KGk9ZT09bnVsbD92b2lkIDA6ZS5jcGJfcmVtb3ZhbF9kZWxheV9sZW5ndGhfbWludXMxKSE9bnVsbD9pOjIzLGRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMToodT1lPT1udWxsP3ZvaWQgMDplLmRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMSkhPW51bGw/dToyMyx0aW1lX29mZnNldF9sZW5ndGg6ZT8oaD1lLnRpbWVfb2Zmc2V0X2xlbmd0aCkhPW51bGw/aDoyNDp2b2lkIDAscGljX3N0cnVjdF9wcmVzZW50X2ZsYWc6KGM9Uy5hY3RpdmVTUFMudnVpX3BhcmFtZXRlcnMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpIT1udWxsP2M6MH07aWYoIXMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpe2NvbnNvbGUud2FybigicGljX3N0cnVjdF9wcmVzZW50X2ZsYWcgaXMgbm90IHByZXNlbnQiKTtyZXR1cm59Y29uc3Qgcj1uZXcgdyh0KTtzLmNwYl9kcGJfZGVsYXlzX3ByZXNlbnRfZmxhZyYmKHIuc2tpcChzLmNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czErMSksci5za2lwKHMuZHBiX291dHB1dF9kZWxheV9sZW5ndGhfbWludXMxKzEpKTtjb25zdCBvPVsxLDEsMSwyLDIsMywzLDIsM10sYT1yLnJlYWRCaXRzKDQpO2lmKGE+PW8ubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwaWNfc3RydWN0Iik7Y29uc3QgZD1vW2FdLGw9W107Zm9yKGxldCBwPTA7cDxkO3ArKylpZihyLnJlYWRCaXRzKDEpKXtjb25zdCBnPXt9O3Iuc2tpcCgyKSxyLnNraXAoMSksci5za2lwKDUpO2NvbnN0IEE9ci5yZWFkQml0cygxKTtpZihyLnNraXAoMiksZy5uX2ZyYW1lcz1yLnJlYWRCaXRzKDgpLEE/KGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcubWludXRlc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcuaG91cnNfdmFsdWU9ci5yZWFkQml0cyg1KSk6ci5yZWFkQml0cygxKSYmKGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLHIucmVhZEJpdHMoMSkmJihnLm1pbnV0ZXNfdmFsdWU9ci5yZWFkQml0cyg2KSxyLnJlYWRCaXRzKDEpJiYoZy5ob3Vyc192YWx1ZT1yLnJlYWRCaXRzKDUpKSkpLHMudGltZV9vZmZzZXRfbGVuZ3RoKXRyeXtnLnRpbWVfb2Zmc2V0PXIucmVhZEJpdHMocy50aW1lX29mZnNldF9sZW5ndGgpfWNhdGNoKHgpe2NvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byByZWFkIHRpbWVfb2Zmc2V0Iix4KSxnLnRpbWVfb2Zmc2V0PTB9ZWxzZSBnLnRpbWVfb2Zmc2V0PTA7bC5wdXNoKGcpfW4uc2VpUGljVGltaW5nVGltZUNvZGVBcnJheT1sfWZ1bmN0aW9uIFEobix0KXtpZih0IT09IkgyNjQiJiZ0IT09IkgyNjUiKXRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgY29kZWMgIi5jb25jYXQodCkpO2NvbnN0IGU9e307cmV0dXJuIFMuY29kZWM9dCxYKG5ldyBVaW50OEFycmF5KG4uZGF0YSksdCkuZm9yRWFjaChzPT57Y29uc3Qgcj1zWzJdPT09MT8zOjQsbz10PT09IkgyNjQiPzE6MixhPVUocy5zdWJhcnJheShyK28pKSxkPSQoYSk7c3dpdGNoKGQudHlwZSl7Y2FzZSBSLlBJQ19USU1JTkc6WihlLGQuY29udGVudCk7YnJlYWs7Y2FzZSBSLlVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6SyhlLGQuY29udGVudCk7YnJlYWt9fSksZX1mdW5jdGlvbiBlZShuKXtyZXR1cm4vXlswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezEyfSQvLnRlc3Qobil9ZnVuY3Rpb24gVChuKXtyZXR1cm4gbi5yZXBsYWNlKC8tL2csIiIpLm1hdGNoKC8uezEsMn0vZykubWFwKHQ9PnBhcnNlSW50KHQsMTYpKX1mdW5jdGlvbiB0ZShuLHQsZSl7Y29uc3Qgcz1uZXcgVWludDhBcnJheShUKG4pKSxyPUMoZSksbz1uZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoSlNPTi5zdHJpbmdpZnkodCkpLGE9bmV3IFVpbnQ4QXJyYXkocy5sZW5ndGgrci5sZW5ndGgrby5sZW5ndGgpO3JldHVybiBhLnNldChzKSxhLnNldChyLHMubGVuZ3RoKSxhLnNldChvLHIubGVuZ3RoK3MubGVuZ3RoKSxhfWZ1bmN0aW9uIG5lKG4pe2NvbnN0IHQ9W10sZT1NYXRoLmZsb29yKG4uYnl0ZUxlbmd0aC8yNTUpLHM9bi5ieXRlTGVuZ3RoJTI1NTtmb3IobGV0IHI9MDtyPGU7cisrKXQucHVzaCgyNTUpO3JldHVybiB0LnB1c2gocyksbmV3IFVpbnQ4QXJyYXkoWzUsLi4udF0pfWZ1bmN0aW9uIHJlKG4pe2NvbnN0IHQ9W107Zm9yKGxldCBlPTA7ZTxuLmJ5dGVMZW5ndGg7ZSsrKWUrMjxuLmJ5dGVMZW5ndGgmJlswLDEsMiwzXS5pbmNsdWRlcyhuW2UrMl0pJiZuW2VdPT09MCYmbltlKzFdPT09MD8odC5wdXNoKG5bZV0pLHQucHVzaChuW2UrMV0pLGUrPTIsdC5wdXNoKDMpKTp0LnB1c2gobltlXSk7cmV0dXJuIHQucHVzaCgxMjgpLG5ldyBVaW50OEFycmF5KHQpfWZ1bmN0aW9uIEMobil7Y29uc3QgdD1bXTtpZighaXNOYU4obikpe2NvbnN0IGU9QmlnSW50KG4pO2ZvcihsZXQgcz0wO3M8TWF0aC5jZWlsKE1hdGguZmxvb3IoTWF0aC5sb2cyKG5ldyBOdW1iZXIobikpKzEpLzgpO3MrKyl0LnVuc2hpZnQobmV3IE51bWJlcihlPj5CaWdJbnQoOCpzKSZCaWdJbnQoMjU1KSkpfXJldHVybiBuZXcgVWludDhBcnJheSh0KX1mdW5jdGlvbiBzZSh7dXVpZDpuLHBheWxvYWQ6dCx0aW1lY29kZTplfSl7Y29uc3Qgcz1bMCwwLDAsMV0scj1bMTAyXSxvPXRlKG4sdCxlKSxhPW5lKG8pLGQ9cmUobyksbD1uZXcgVWludDhBcnJheShzLmxlbmd0aCtyLmxlbmd0aCthLmxlbmd0aCtkLmxlbmd0aCk7cmV0dXJuIGwuc2V0KHMpLGwuc2V0KHIscy5sZW5ndGgpLGwuc2V0KGEscy5sZW5ndGgrci5sZW5ndGgpLGwuc2V0KGQscy5sZW5ndGgrci5sZW5ndGgrYS5sZW5ndGgpLGx9ZnVuY3Rpb24gaWUoe3V1aWQ6bixwYXlsb2FkOnQsdGltZWNvZGU6ZX0scyl7aWYobj09PSIifHx0PT09IiIpdGhyb3cgbmV3IEVycm9yKCJ1dWlkIGFuZCBwYXlsb2FkIGNhbm5vdCBiZSBlbXB0eSIpO2VlKG4pfHwoY29uc29sZS53YXJuKCJJbnZhbGlkIFVVSUQuIFVzaW5nIGRlZmF1bHQgVVVJRC4iKSxuPUwsZT1EYXRlLm5vdygpKTtjb25zdCByPXNlKHt1dWlkOm4scGF5bG9hZDp0LHRpbWVjb2RlOmV9KSxvPW5ldyBEYXRhVmlldyhzLmRhdGEpLGE9bmV3IEFycmF5QnVmZmVyKHMuZGF0YS5ieXRlTGVuZ3RoK3IuYnl0ZUxlbmd0aCksZD1uZXcgRGF0YVZpZXcoYSk7Zm9yKGxldCBsPTA7bDxzLmRhdGEuYnl0ZUxlbmd0aDtsKyspZC5zZXRVaW50OChsLG8uZ2V0VWludDgobCkpO2ZvcihsZXQgbD0wO2w8ci5ieXRlTGVuZ3RoO2wrKylkLnNldFVpbnQ4KHMuZGF0YS5ieXRlTGVuZ3RoK2wscltsXSk7cy5kYXRhPWF9RC5nZXQoIlRyYW5zZm9ybVdvcmtlciIpLnNldExldmVsKEQuREVCVUcpO2NvbnN0IG9lPTJlMyxiPVtdO2xldCB5PSIiLFA9e307Y29uc3Qgdj17fTtsZXQgST1bXTtmdW5jdGlvbiBIKG4pe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybSh0LGUpe3ZhciBzLHI7aWYodCBpbnN0YW5jZW9mIFJUQ0VuY29kZWRWaWRlb0ZyYW1lKXtjb25zdCBvPSgocz1QW3QuZ2V0TWV0YWRhdGEoKS5wYXlsb2FkVHlwZV0pPT1udWxsP3ZvaWQgMDpzLnRvVXBwZXJDYXNlKCkpfHwoeT09bnVsbD92b2lkIDA6eS50b1VwcGVyQ2FzZSgpKTtpZihvPT09IkgyNjQiKXtjb25zdCBhPVEodCxvKTsoYS50aW1lY29kZXx8YS51bnJlZ2lzdGVyZWR8fCgocj1hLnNlaVBpY1RpbWluZ1RpbWVDb2RlQXJyYXkpPT1udWxsP3ZvaWQgMDpyLmxlbmd0aCk+MCkmJnNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJtZXRhZGF0YSIsbWlkOm4sbWV0YWRhdGE6YX0pfXNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJjb21wbGV0ZSIsZnJhbWU6e3R5cGU6dC50eXBlLHRpbWVzdGFtcDp0LnRpbWVzdGFtcCxkYXRhOnQuZGF0YX19KX1lLmVucXVldWUodCl9fSl9ZnVuY3Rpb24gTSgpe09iamVjdC5rZXlzKHYpLnNvcnQoKS5qb2luKCk9PT1JLnNvcnQoKS5qb2luKCkmJihiLnNoaWZ0KCksST1bXSl9ZnVuY3Rpb24gYWUobil7Y29uc3QgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTt2W25dPXQsT2JqZWN0LmtleXModikuZmlsdGVyKHM9PnQtdltzXT5vZSkuZm9yRWFjaChzPT57ZGVsZXRlIHZbc10sZGVsZXRlIElbc119KSxNKCl9ZnVuY3Rpb24gTigpe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybShuLHQpe2lmKG4gaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3Qgcz1uLmdldE1ldGFkYXRhKCkuc3luY2hyb25pemF0aW9uU291cmNlO2lmKGFlKHMpLCFJLmluY2x1ZGVzKHMpJiZiLmxlbmd0aCl0cnl7aWYoIS8oaDI2WzRdKS8udGVzdCh5KSl0aHJvdyBuZXcgRXJyb3IoIlNlbmRpbmcgbWV0YWRhdGEgaXMgbm90IHN1cHBvcnRlZCB3aXRoIGFueSBvdGhlciBjb2RlYyBvdGhlciB0aGFuIEguMjY0Iik7YlswXS51dWlkPT09TCYmKGJbMF0udGltZWNvZGU9RGF0ZS5ub3coKSksaWUoYlswXSxuKSxJLnB1c2gocyl9Y2F0Y2gocil7Y29uc29sZS5lcnJvcihyKX1maW5hbGx5e00oKX19dC5lbnF1ZXVlKG4pfX0pfWZ1bmN0aW9uIGsoe3JlYWRhYmxlOm4sd3JpdGFibGU6dH0sZSl7bi5waXBlVGhyb3VnaChlKS5waXBlVG8odCl9YWRkRXZlbnRMaXN0ZW5lcigicnRjdHJhbnNmb3JtIixuPT57bGV0IHQ7aWYobi50cmFuc2Zvcm1lci5vcHRpb25zLm5hbWU9PT0ic2VuZGVyVHJhbnNmb3JtIil5PW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlYyx0PU4oKTtlbHNlIGlmKG4udHJhbnNmb3JtZXIub3B0aW9ucy5uYW1lPT09InJlY2VpdmVyVHJhbnNmb3JtIilQPW4udHJhbnNmb3JtZXIub3B0aW9ucy5wYXlsb2FkVHlwZUNvZGVjfHx7fSx5PW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlY3x8IiIsdD1IKG4udHJhbnNmb3JtZXIub3B0aW9ucy5taWQpO2Vsc2UgcmV0dXJuO2sobi50cmFuc2Zvcm1lcix0KX0pLGFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG49Pntjb25zdHthY3Rpb246dH09bi5kYXRhO3N3aXRjaCh0KXtjYXNlImluc2VydGFibGUtc3RyZWFtcy1zZW5kZXIiOnk9bi5kYXRhLmNvZGVjLGsobi5kYXRhLE4oKSk7YnJlYWs7Y2FzZSJpbnNlcnRhYmxlLXN0cmVhbXMtcmVjZWl2ZXIiOlA9bi5kYXRhLnBheWxvYWRUeXBlQ29kZWN8fHt9LHk9bi5kYXRhLmNvZGVjfHwiIixrKG4uZGF0YSxIKG4uZGF0YS5taWQpKTticmVhaztjYXNlIm1ldGFkYXRhLXNlaS11c2VyLWRhdGEtdW5yZWdpc3RlcmVkIjpiLnB1c2goe3V1aWQ6bi5kYXRhLnV1aWQscGF5bG9hZDpuLmRhdGEucGF5bG9hZH0pO2JyZWFrfX0pfSkoKTsK",Xs=typeof self<"u"&&self.Blob&&new Blob([(t=>T.from(atob(t),(t=>t.charCodeAt(0))))(Hs)],{type:"text/javascript;charset=utf-8"});function qs(t){let i;try{if(i=Xs&&(self.URL||self.webkitURL).createObjectURL(Xs),!i)throw"";const e=new Jl(i,{name:null==t?void 0:t.name});return e.addEventListener("error",(()=>{(self.URL||self.webkitURL).revokeObjectURL(i)})),e}catch(i){return new Jl("data:text/javascript;base64,"+Hs,{name:null==t?void 0:t.name})}finally{i&&(self.URL||self.webkitURL).revokeObjectURL(i)}}const Ks=at.get("Publish"),Js={mediaStream:null,bandwidth:0,metadata:!1,disableVideo:!1,disableAudio:!1,codec:Je.H264,simulcast:!1,scalabilityMode:null,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};function $s(t){if(!t)return new T;const i=t.length,e=new T(i/2);for(let s=0;s<i;s+=2)e[s/2]=C(t.substr(s,2),16);return e}function tn(t,i,e){if(_.prototype.hasOwnProperty.call(t,e)&&_.prototype.hasOwnProperty.call(i,e)){const s=t[e];t[e]=i[e],i[e]=s}else console.error('One or both objects do not have the property "'.concat(e,'"'))}function en(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))}const sn=nn;function nn(t,i){const e=gn();return(nn=function(t,i){return e[t-=257]})(t,i)}var rn;!function(){const t=nn,i=gn();for(;;)try{if(C(t(266))/1*(-C(t(261))/2)+C(t(258))/3*(-C(t(264))/4)+-C(t(267))/5*(C(t(274))/6)+C(t(260))/7*(C(t(268))/8)+C(t(270))/9+-C(t(277))/10+C(t(263))/11==303379)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const on=Kl&&Kl[sn(276)]||"",hn=Kl&&Kl.vendor||"",an=!(null==s||!s[sn(273)]),un=on[sn(278)](sn(257)),cn=!un&&hn[sn(278)](sn(259)),ln=!un&&!cn&&on.includes(sn(272)),dn=!un&&!cn&&!ln&&on[sn(278)](sn(275)),fn=(null===(rn=null==Kl?void 0:Kl[sn(262)])||void 0===rn?void 0:rn[sn(271)])||(null==Kl?void 0:Kl[sn(271)])||"";function gn(){const t=["2403660vsbxKa","includes","Firefox","653511krAkNS","Apple","63eEorAu","2iQvmqu","userAgentData","13393182jRLBxS","4fTXBZP","Win32","74923SyWRbn","1345hVdNEb","21688LwGppn","Windows","132498ZoOcLo","platform","Edg","RTCRtpScriptTransform","9372dNMWWf","Chrome","userAgent"];return(gn=function(){return t})()}const _n={supportsRtpScriptTransform:an,isFirefox:un,isSafari:cn,isEdge:ln,isChrome:dn,platform:fn,isWindows:fn===sn(269)||fn===sn(265)},vn=wn;function wn(t,i){const e=yn();return(wn=function(t,i){return e[t-=185]})(t,i)}!function(){const t=wn,i=yn();for(;;)try{if(-C(t(380))/1+-C(t(354))/2+-C(t(464))/3*(C(t(486))/4)+-C(t(253))/5+C(t(377))/6+C(t(321))/7*(-C(t(285))/8)+-C(t(444))/9*(-C(t(279))/10)==657542)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const mn=_n[vn(496)];function pn(t,i){const e=vn;let s=new T((0|t.byteLength)+(0|i[e(442)]));return s[e(311)](t,0),s[e(311)](i,0|t.byteLength),s}const An=(t,i,e,s)=>{const n=vn,r=s[n(203)]||1;i*=r,e*=r;const o=(u=t)instanceof ArrayBuffer?u:u[vn(492)],h=(t[n(447)]||0)+t[n(442)],a=(t[n(447)]||0)+i;var u;let c=x[n(389)](0,x[n(487)](a,h)),l=x[n(487)](c+x[n(389)](e,0),h);return c/=r,l/=r,new s(o,c,l-c)};function yn(){const t=["[MSE] source buffer error","ManagedMediaSource","BYTES_PER_ELEMENT","types","ready","valid","Num frames in chunk: ","readBits","getTrackID","mvhd","parsePPS","encrypted","dependsOn","payload","len","moov","VMHD","mse","volume","h264","setUint16","tfdt","nextDts","avc1.","audioSampleAuxInfo","message","endMSE","width","hdlr","warn","traf","readBoolean","shift","mseReady","revokeObjectURL","smhd","dts","indexOf","<PROTECTINFO>","webkitsourceclose","onMSEClose","[H264Parser] IDR without SPS/PPS, not suitable for recovery",'VALUE="',"createObjectURL","</KID>","mdhd","SMHD","getFramePayload","tkhd","flush","clRtcDrmDebugLog","getBits","2598770DahMdb","dbgQueue","dispatch","DINF","http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader","isReady","sps","nalus","endOfStream","toString","UNKNOWN","Opus","minf","onError","stco","STSC","buffered","</KIDS>","initSegment","dinf","org.w3.clearkey","mp4track","keyFrame","units","mseEnded","videoSampleAuxInfo","41695210Plpuuo","splice","ended","bitLength","seq","url","8YyaFaO","com.apple.fps","[MSE] error: ","bitsAvailable","</WRMHEADER>","trex","setData","buffer error","slice","length","readUByte","mp4a","Unsupported DRM type ","mdia","fromCharCode",'<WRMHEADER xmlns="',"index","string","both","NDR","dOps","cenc","getPayload","bind","PPS","sourceBuffer","set","Checking codec","releaseBuffer","tenc","trak","flags",'/mp4; codecs="',"[H264Parser] Both IDR and non-IDR VCL NALUs found in the same frame","clRtcDrmCreateMediaDump","STSD","6352549TgZLxu","initBrowser","IDR","trun"," - ","start","mediaSource","startsWith","stype","readSPS","addEventListener","schi","encv","createElement","getVideoFrames","onReady","href","sourceopen","setUint32","vmhd","FTYP","schm","getData","toISOString","remuxer","track","skipScalingList","STSZ","getSize","addSourceBuffer","[MSE] buffer error:","appendBufferError","off","2392886zJoPkf","destroy","sdtp","audiosamplerate",": NRI: ","reportDiscontinuity","extractNALUs","No A/V data","pps","senc","saio","concat","config","ftyp","parseNAL","esds","error","feed","Browser does not support codec","4.3.0.0","skipUEG","mp4","end","2232924PKvVOf","updating","options","227868XbMqAn","prototype","createBuffer","info","MediaSource","timestamp","mvex","isfmb","opus","max","stsz","POSITIVE_INFINITY","saiz","timescale","call","encryption","height","jmuxer","bufferControllers","open","patchSampleAuxinfo","queue","stsd","onBufferError","frameCounter","ntype","remux","getPayloadSize","isSupported","</LA_URL>","waitingForIdr","box","idr"," samples - expected 1","tracks","stbl","getNri",'<KID ALGID="AESCTR" ',"download","readUInt","join","com.microsoft.playready.recommendation",'" version="',"remuxController","Received ","frma","resetTrack","disableRemotePlayback","</DATA>","mfhd","pssh","charCodeAt","drm","mediaDuration","video","readyToDecode","from","SPS","skipLZ","data","keySystem","[MSE] sourceclose","byteLength","STTS","9mESMVl","Buffered range ","samples","byteOffset","parseHeader","codec","node","audio","Failure: Browser doesn't support MSE/MMS","subarray","replaceAll","downloadToFile","onBuffer","skipBits","mdat","isKeyframe","moof","mode","push","STCO","9ffcUcC","listener","isReset","map","enca","type","<LA_URL>","parseSPS","getElementById","no video element were found to render, provide a valid video element","sinf","doAppend","HDLR_TYPES","videoElement","stts","keyId","trackTypes","TYPES","remove","size","AUD","src","1376748eVkTXq","min","tfhd","initialized","offAll","appendBuffer","buffer","nri","skipEG","isvcl","isSafari","isTypeSupported","readyState","abort","apply","reduce","assign","calculateExpectedSizeFromSai","duration","generatePlayReadyHeader","readUEG","onMSEOpen","sampleAuxInfo","SEI","irrecoverableError","channelCount","saiIvSize","stsc"];return(yn=function(){return t})()}function bn(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=1/0),An(t,i,e,T)}function Mn(t){const i=vn,e=Array[i(436)](t)[i(467)]((t=>t[i(431)](0)));return new T(e)}s[vn(455)]=(t,i,e)=>{void 0===e&&(e="application/octet-stream");const s=vn,n=h[s(334)]("a"),r=new Blob([t],{type:e});n[s(337)]=URL[s(244)](r),n[s(418)]=i,n.click(),URL[s(235)](n[s(337)])};class Tn{static get[vn(304)](){return 1}static get[vn(323)](){return 5}static get[vn(196)](){return 6}static get SPS(){return 7}static get PPS(){return 8}static get[vn(484)](){return 9}static get[vn(481)](){const t=vn;return{[Tn[t(323)]]:t(323),[Tn.SEI]:t(196),[Tn.SPS]:t(437),[Tn[t(309)]]:t(309),[Tn[t(304)]]:t(304),[Tn[t(484)]]:t(484)}}static type(t){const i=vn;return t[i(405)]in Tn[i(481)]?Tn[i(481)][t[i(405)]]:i(263)}toString(){const t=vn;return Tn[t(469)](this)+t(358)+this[t(416)]()}getNri(){return this[vn(493)]}[vn(469)](){return this[vn(405)]}[vn(459)](){const t=vn;return this[t(405)]===Tn[t(323)]}[vn(307)](){return this[vn(214)]}[vn(407)](){const t=vn;return this[t(214)][t(442)]}getSize(){return 4+this[vn(407)]()}[vn(343)](){const t=vn,i=new T(this.getSize());return new DataView(i.buffer)[t(339)](0,this.getSize()-4),i[t(311)](this[t(307)](),4),i}constructor(t){const i=vn;this.payload=t,this[i(493)]=(96&this.payload[0])>>5,this[i(405)]=31&this[i(214)][0],this[i(495)]=1==this.ntype||5==this[i(405)],this[i(329)]="",this[i(387)]=!1}}class Sn{[vn(291)](t){const i=vn;this.data=t,this[i(301)]=0,this[i(282)]=8*t[i(442)]}get[vn(288)](){const t=vn;return this[t(282)]-this[t(301)]}skipBits(t){if(this[vn(288)]<t)return!1;this.index+=t}[vn(208)](t,i){return void 0===i&&(i=!0),this.getBits(t,this.index,i)}[vn(252)](t,i,e){void 0===e&&(e=!0);const s=vn;if(this.bitsAvailable<t)return 0;const n=i%8,r=this[s(439)][i/8|0]&255>>>n,o=8-n;if(o>=t)return e&&(this.index+=t),r>>o-t;{e&&(this.index+=o);const n=t-o;return r<<n|this[s(252)](n,i+o,e)}}[vn(438)](){const t=vn;let i;for(i=0;i<this.bitLength-this[t(301)];++i)if(0!==this.getBits(1,this[t(301)]+i,!1))return this.index+=i,i;return i}[vn(374)](){const t=vn;this[t(457)](1+this[t(438)]())}[vn(494)](){const t=vn;this[t(457)](1+this[t(438)]())}readUEG(){const t=vn,i=this[t(438)]();return this[t(208)](i+1)-1}readEG(){const t=this[vn(193)]();return 1&t?1+t>>>1:-1*(t>>>1)}readBoolean(){return 1===this[vn(208)](1)}[vn(295)](t){return void 0===t&&(t=1),this[vn(208)](8*t)}readUShort(){return this[vn(208)](16)}[vn(419)](){return this[vn(208)](32)}constructor(t){const i=vn;this[i(439)]=t,this[i(301)]=0,this.bitLength=8*t[i(442)]}}class Nn{static[vn(360)](t,i){const e=vn;let s=[],n=!1,r=!1,o=!1,h=!1,a=0,u=0,c=0,l=[];for(;a<=t.byteLength;){if(a<t.byteLength){const i=t[a++];0!==i?(1===i&&u>1&&(c=u>2?4:3,l.push(a)),u=0):++u}else c=0,l.push(a++);if(l.length>1){const e=l.shift(),d=l[0]-c;if(e<d){let c=!1;const l=31&t[e];if(l===Tn.NDR?r=!0:l===Tn.IDR?n=!0:l===Tn.SPS?(c=o,o=!0):l===Tn.PPS&&(c=h,h=!0),!c)if(!i||l!==Tn.NDR&&l!==Tn.IDR)s.push(t.subarray(e,d));else{const i=new T(d-e);let n=0;for(a=e,u=0;a<d;){let e=t[a++];u>1&&3===e&&(u=0,e=t[a++]),0!==e?u=0:++u,i[n++]=e}s.push(i.subarray(0,n))}}}}let d=!0,f=!1;return r||n?r&&n&&(console[e(230)](e(318)),d=!1):(console[e(230)]("[H264Parser] No VCL NALUs found"),d=!1),n&&(o&&h?f=!0:console[e(230)](e(242))),{valid:d,idr:f,nalus:s}}static skipScalingList(t,i){let e,s=8,n=8;for(let r=0;r<i;r++)0!==n&&(e=t.readEG(),n=(s+e+256)%256),s=0===n?s:n}static[vn(330)](t){const i=vn;let e,s,n,r,o,h,a=new Sn(t),u=0,c=0,l=0,d=0,f=1;if(a[i(295)](),e=a.readUByte(),a[i(208)](5),a[i(457)](3),a.readUByte(),a[i(374)](),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var g=a[i(193)]();if(3===g&&a[i(457)](1),a.skipUEG(),a[i(374)](),a[i(457)](1),a[i(232)]()){h=3!==g?8:12;for(let t=0;t<h;++t)a[i(232)]()&&(t<6?Nn[i(347)](a,16):Nn[i(347)](a,64))}}a[i(374)]();var _=a.readUEG();if(0===_)a[i(193)]();else if(1===_){a.skipBits(1),a[i(494)](),a[i(494)](),s=a[i(193)]();for(let t=0;t<s;++t)a.skipEG()}if(a.skipUEG(),a[i(457)](1),n=a[i(193)](),r=a.readUEG(),o=a[i(208)](1),0===o&&a[i(457)](1),a[i(457)](1),a[i(232)]()&&(u=a[i(193)](),c=a[i(193)](),l=a[i(193)](),d=a.readUEG()),a.readBoolean()){if(a[i(232)]()){let t;switch(a[i(295)]()){case 1:t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[a[i(295)]()<<8|a.readUByte(),a[i(295)]()<<8|a[i(295)]()]}t&&t[0]>0&&t[1]>0&&(f=t[0]/t[1])}a.readBoolean()&&a[i(457)](1),a[i(232)]()&&(a.skipBits(4),a[i(232)]()&&a[i(457)](24)),a.readBoolean()&&(a.skipUEG(),a[i(374)]()),a.readBoolean()&&(a[i(419)](),a[i(419)](),a.readBoolean())}return{width:x.ceil((16*(n+1)-2*u-2*c)*f),height:(2-o)*(r+1)*16-(o?2:4)*(l+d)}}static[vn(448)](t){const i=vn;let e=new Sn(t[i(307)]());e.readUByte(),t.isfmb=0===e[i(193)](),t.stype=e[i(193)]()}[vn(471)](t){const i=vn;var e=Nn[i(330)](new T(t));this[i(346)][i(228)]=e[i(228)],this[i(346)][i(396)]=e[i(396)],this[i(346)].sps=[new T(t)],this[i(346)][i(449)]=i(224);let s=new DataView(t.buffer,t[i(447)]+1,4);for(let t=0;t<3;++t){var n=s.getUint8(t)[i(262)](16);n.length<2&&(n="0"+n),this.track[i(449)]+=n}}[vn(211)](t){this[vn(346)].pps=[new T(t)]}[vn(368)](t){const i=vn;if(!t)return!1;let e=!1;switch(t.type()){case Tn[i(323)]:case Tn[i(304)]:e=!0;break;case Tn[i(309)]:!this[i(346)][i(362)]&&(this.parsePPS(t[i(307)]()),!this[i(345)][i(435)]&&this[i(346)][i(362)]&&this[i(346)][i(259)]&&(this[i(345)][i(435)]=!0)),e=!0;break;case Tn[i(437)]:!this[i(346)][i(259)]&&(this[i(471)](t[i(307)]()),!this[i(345)][i(435)]&&this[i(346)][i(362)]&&this.track.sps&&(this[i(345)][i(435)]=!0)),e=!0;break;case Tn[i(484)]:break;case Tn[i(196)]:e=!0}return e}constructor(t){const i=vn;this.remuxer=t,this[i(346)]=t[i(274)]}}class In{on(t,i){const e=vn;return!this[e(465)][t]&&(this[e(465)][t]=[]),this[e(465)][t][e(462)](i),!0}[vn(353)](t,i){const e=vn;if(this[e(465)][t]){var s=this.listener[t][e(238)](i);return s>-1&&this[e(465)][t][e(280)](s,1),!0}return!1}[vn(490)](){this[vn(465)]={}}[vn(255)](t,i){const e=vn;return!!this.listener[t]&&(this[e(465)][t][e(467)]((t=>{t[e(187)](null,[i])})),!0)}constructor(t){const i=vn;this[i(465)]={},this[i(469)]=""|t}}class Dn{static[vn(411)](t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=vn;let r,o=8,h=e.length,a=h;for(;h--;)e[h]&&(o+=e[h].byteLength);for(r=new T(o),r[0]=o>>>24,r[1]=o>>>16&255,r[2]=o>>>8&255,r[3]=255&o,r[n(311)](t,4),h=0,o=8;h<a;++h)e[h]&&(r[n(311)](e[h],o),o+=e[h][n(442)]);return r}hdlr(t){const i=vn;return Dn[i(411)](Dn[i(204)][i(229)],Dn[i(476)][t])}mdat(t){const i=vn;return Dn.box(Dn.types[i(458)],t)}[vn(246)](t,i){const e=vn;return Dn.box(Dn[e(204)][e(246)],new T([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,0,0,0,0,85,196,0,0]))}[vn(298)](t){const i=vn;return Dn[i(411)](Dn[i(204)][i(298)],this[i(246)](t[i(393)],t.duration),this[i(229)](t[i(469)]),this[i(265)](t))}[vn(429)](t){const i=vn;return Dn[i(411)](Dn.types[i(429)],new T([0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[vn(265)](t){const i=vn;return t[i(469)]===i(451)?Dn[i(411)](Dn[i(204)][i(265)],Dn.box(Dn[i(204)][i(236)],Dn[i(247)]),Dn.DINF,this[i(415)](t)):Dn[i(411)](Dn[i(204)][i(265)],Dn[i(256)],this[i(415)](t),Dn[i(411)](Dn[i(204)][i(340)],Dn[i(217)]))}[vn(460)](t,i,e){const s=vn;return Dn[s(411)](Dn[s(204)][s(460)],this[s(429)](t),this.traf(e,i))}moov(t,i,e){const s=vn;let n=t[s(294)],r=[];for(;n--;)r[n]=this[s(315)](t[n]);return Dn[s(411)][s(187)](null,[Dn[s(204)].moov,this[s(210)](e,i),this[s(430)](t)].concat(r)[s(365)](this[s(386)](t)))}mvex(t){const i=vn;let e=t[i(294)],s=[];for(;e--;)s[e]=this[i(290)](t[e]);return Dn.box[i(187)](null,[Dn[i(204)].mvex].concat(s))}[vn(210)](t,i){const e=vn;let s=new T([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Dn[e(411)](Dn[e(204)].mvhd,s)}[vn(356)](t){const i=vn;let e=t[i(446)]||[],s=new T(4+e.length);for(let t=0;t<e.length;t++){const n=e[t][i(316)];s[t+4]=n[i(213)]<<4|n.isDependedOn<<2|n.hasRedundancy}return Dn.box(Dn.types.sdtp,s)}[vn(415)](t){const i=vn;return Dn[i(411)](Dn.types[i(415)],this[i(402)](t),Dn.box(Dn.types[i(478)],Dn[i(443)]),Dn.box(Dn.types[i(200)],Dn[i(268)]),Dn[i(411)](Dn[i(204)][i(390)],Dn[i(348)]),Dn[i(411)](Dn[i(204)][i(267)],Dn[i(463)]))}[vn(333)](t){const i=vn;let e,s,n,r=[],o=[];for(e=0;e<t[i(259)][i(294)];e++)s=t[i(259)][e],n=s[i(442)],r.push(n>>>8&255),r[i(462)](255&n),r=r[i(365)](Array[i(381)].slice.call(s));for(e=0;e<t.pps.length;e++)s=t.pps[e],n=s[i(442)],o.push(n>>>8&255),o[i(462)](255&n),o=o[i(365)](Array[i(381)][i(293)][i(394)](s));const h=Dn[i(411)](Dn[i(204)].avcC,new T([1,r[3],r[4],r[5],255,224|t[i(259)][i(294)]][i(365)](r)[i(365)]([t[i(362)].length]).concat(o))),a=t[i(228)],u=t[i(396)],c=Dn[i(411)](Dn[i(204)][i(474)],Dn[i(411)](Dn.types[i(425)],new T([97,118,99,49])),Dn[i(411)](Dn[i(204)][i(342)],new T([0,0,0,0,...Mn(this[i(432)][i(366)].video[i(395)]),0,1,0,0])),Dn[i(411)](Dn[i(204)].schi,this[i(314)]("video")));return Dn[i(411)](Dn[i(204)][i(333)],new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,255&a,u>>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),h,c)}[vn(369)](t){const i=vn;let e=t.config[i(442)],s=new T(26+e+3);return s[i(311)]([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5,e]),s[i(311)](t[i(366)],26),s[i(311)]([6,1,2],26+e),s}[vn(296)](t){const i=vn,e=t.audiosamplerate;return Dn[i(411)](Dn[i(204)][i(296)],new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(198)],0,16,0,0,0,0,e>>>8&255,255&e,0,0]),Dn[i(411)](Dn[i(204)][i(369)],this.esds(t)))}dOps(t){const i=vn,e=t[i(357)];return new T([0,t[i(198)],1,56,0,0,e>>>8&255,255&e,0,0,0])}[vn(264)](t){const i=vn,e=t[i(357)];return Dn[i(411)](Dn[i(204)].Opus,new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(198)],0,16,0,0,0,0,e>>>8&255,255&e,0,0]),Dn[i(411)](Dn.types[i(305)],this[i(305)](t)))}[vn(468)](t){const i=vn,e=Dn[i(411)](Dn[i(204)].dOps,this[i(305)](t)),s=Dn[i(411)](Dn[i(204)].sinf,Dn[i(411)](Dn[i(204)].frma,new T([79,112,117,115])),Dn[i(411)](Dn[i(204)][i(342)],new T([0,0,0,0,...Mn(this.drm[i(366)].audio[i(395)]),0,1,0,0])),Dn[i(411)](Dn[i(204)][i(332)],this[i(314)](i(451)))),n=t[i(357)];return Dn[i(411)](Dn[i(204)][i(468)],new T([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(198)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),e,s)}[vn(402)](t){const i=vn;return t[i(469)]===i(451)?Dn.box(Dn[i(204)][i(402)],Dn[i(320)],t[i(212)]?this[i(468)](t):this[i(264)](t)):Dn.box(Dn[i(204)][i(402)],Dn[i(320)],this.encv(t))}[vn(249)](t){const i=vn,e=t.id,s=t[i(191)],n=t.width,r=t[i(396)],o=t[i(219)];return Dn[i(411)](Dn[i(204)][i(249)],new T([0,0,0,7,0,0,0,0,0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,0,0,0,0,s>>>24,s>>>16&255,s>>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,255&o,o%1*10&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,r>>>8&255,255&r,0,0]))}[vn(231)](t,i){var e;const s=vn,n=t.id,r=t[s(446)][0][s(483)],o=t[s(446)][0][s(191)],h=t[s(446)][0].flags,a=Dn[s(411)](Dn[s(204)][s(488)],new T([0,2,0,58,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,1,o>>>24,n>>>16&255,o>>>8&255,255&o,r>>>24,r>>>16&255,r>>>8&255,255&r,0,h.isNonSync,0,0])),u=Dn[s(411)](Dn[s(204)][s(222)],new T([0,0,0,0,i>>>24,i>>>16&255,i>>>8&255,255&i]));if(t[s(212)]){let i,n;if(t[s(469)]===s(434)?(i=!0,n=this[s(199)][s(434)]+(null==(e=t[s(446)][0].sampleAuxInfo)?void 0:e.byteLength)):(i=!1,n=this[s(199)][s(451)]),n>0){const e=this[s(392)](n),r=this[s(363)](t[s(446)],i),o=e.length+20+r.length+a[s(294)]+u[s(294)]+8+16+8+8,h=this[s(324)](t,o);return Dn[s(411)](Dn[s(204)][s(231)],a,u,h,e,this[s(364)](o-r[s(294)]+h[s(294)]+8),r)}{const i=this[s(363)](null,!1),e=i[s(294)]+a[s(294)]+u.length+8+16+8+8,n=this[s(324)](t,e);return Dn[s(411)](Dn[s(204)][s(231)],a,u,n,i)}}return Dn.box(Dn.types.traf,a,u,this[s(324)](t,a[s(294)]+u[s(294)]+8+16+8+8))}[vn(315)](t){const i=vn;return t[i(191)]=t[i(191)]||4294967295,Dn.box(Dn[i(204)][i(315)],this[i(249)](t),this[i(298)](t))}trex(t){const i=vn,e=t.id;return Dn[i(411)](Dn[i(204)][i(290)],new T([0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,0,0,0,1,0,0,0,16,0,0,0,0,0,0,0,0]))}trun(t,i){const e=vn;let s=(t.samples||[]).length,n=new T(12);return i+=20,n[e(311)]([0,0,0,1,s>>>24,s>>>16&255,s>>>8&255,255&s,i>>>24,i>>>16&255,i>>>8&255,255&i],0),Dn.box(Dn.types[e(324)],n)}[vn(192)](t,i){const e=vn,s=e(373),n=e(257),r=function(t){const i=function(t){const i=vn;let e="";for(let s=0;s<t.length;s+=16e3){const n=t[i(453)](s,s+16e3);e+=String[i(299)][i(187)](null,n)}return e}(bn(t));return btoa(i)}(function(t){const i=vn,e=[];return e[i(462)](t[3]),e[i(462)](t[2]),e[i(462)](t[1]),e[i(462)](t[0]),e.push(t[5]),e.push(t[4]),e.push(t[7]),e.push(t[6]),(t=bn(t))[i(311)](e,0),t}(t));return bn(function(t,i){const e=vn,s=new T(2*t.length),n=new DataView(s[e(492)]);for(let i=0;i<t[e(294)];++i){const s=t[e(431)](i);n[e(221)](2*i,s,!0)}return s[e(492)]}([e(300)+n+e(422)+s+'">',"<DATA>",e(239),"<KIDS>",e(417),e(243)+r+'"',">",e(245),e(270),"</PROTECTINFO>",i?e(470)+i+e(409):"",e(428),e(289)][e(420)]("")))}[vn(430)](t){const i=vn;if(this[i(432)][i(440)][i(328)]("com.widevine"))return Dn[i(411)](Dn[i(204)][i(430)],new T([0,0,0,0,237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237,0,0,0,18,18,16,...this[i(432)][i(366)][t[0][i(469)]][i(479)]]));if(this[i(432)].keySystem===i(421)){const e=this[i(192)](this[i(432)][i(366)][t[0].type][i(479)],this.drm.licenseUrl),s=e[i(442)];return Dn[i(411)](Dn[i(204)][i(430)],new T([0,0,0,0,154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149,s>>>24,s>>>16&255,s>>>8&255,255&s,...e]))}return this[i(432)][i(440)]===i(273)?Dn[i(411)](Dn[i(204)][i(430)],new T([1,0,0,0,16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75,0,0,0,1,...this.drm.config[t[0][i(469)]][i(479)],0,0,0,0])):this[i(432)][i(440)]===i(286)?null:void console[i(370)](i(297)+this[i(432)].keySystem)}[vn(314)](t){const i=vn;let e,s,n=this[i(432)][i(366)][t];return"cbcs"===n.encryption?(e=new T([16,...n.iv]),s=25):(e=new T([]),s=0),Dn[i(411)](Dn[i(204)].tenc,new T([1,0,0,0,0,s,1,this[i(199)][t],...n[i(479)],...e]))}[vn(392)](t){return Dn[vn(411)](Dn.types.saiz,new T([0,0,0,0,t,0,0,0,1]))}[vn(364)](t){const i=vn;return Dn[i(411)](Dn[i(204)][i(364)],new T([0,0,0,0,0,0,0,1,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[vn(363)](t,i){const e=vn;let s=null;return t&&(1!==t[e(294)]&&console[e(370)](e(424)+t[e(294)]+e(413)),s=t[0][e(195)]),s&&s[e(442)]?Dn[e(411)](Dn[e(204)][e(363)],new T([0,0,0,i?2:0,0,0,0,1,...s])):Dn[e(411)](Dn[e(204)][e(363)],new T([0,0,0,0,0,0,0,1]))}[vn(271)](t,i,e){const s=vn,n=this[s(216)](t,i,e);let r=new T(Dn[s(341)][s(442)]+n.byteLength);return r.set(Dn[s(341)]),r[s(311)](n,Dn[s(341)].byteLength),r}constructor(t){var i,e;const s=vn;this[s(432)]=t,this[s(199)]={video:(null==(i=t[s(366)][s(434)])?void 0:i.encryption)===s(306)?16:0,audio:(null==(e=t[s(366)][s(451)])?void 0:e.encryption)===s(306)?16:0},Dn.types={avc1:[],encv:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],Opus:[],dOps:[],enca:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pssh:[],sinf:[],frma:[],schm:[],schi:[],tenc:[],saiz:[],saio:[],senc:[]};for(let t in Dn[s(204)])Dn[s(204)][t]=[t[s(431)](0),t[s(431)](1),t.charCodeAt(2),t[s(431)](3)];const n=new T([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new T([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Dn[s(476)]={video:n,audio:r};const o=new T([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),h=new T([0,0,0,0,0,0,0,0]);Dn[s(443)]=Dn[s(268)]=Dn[s(463)]=h,Dn[s(348)]=new T([0,0,0,0,0,0,0,0,0,0,0,0]),Dn[s(217)]=new T([0,0,0,1,0,0,0,0,0,0,0,0]),Dn.SMHD=new T([0,0,0,0,0,0,0,0]),Dn[s(320)]=new T([0,0,0,0,0,0,0,1]);const a=new T([105,115,111,109]),u=new T([97,118,99,49]),c=new T([0,0,0,1]);Dn[s(341)]=Dn[s(411)](Dn[s(204)][s(367)],a,c,a,u),Dn.DINF=Dn[s(411)](Dn[s(204)][s(272)],Dn[s(411)](Dn[s(204)].dref,o))}}let En=1;class kn{static[vn(209)](){return En++}[vn(250)](){const t=vn;this[t(274)][t(215)]=0,this.mp4track[t(446)]=[]}[vn(258)](){const t=vn;return!(!this.readyToDecode||!this[t(446)][t(294)])}constructor(){this[vn(283)]=1}}class Ln extends kn{resetTrack(){const t=vn;this[t(283)]=1,this[t(223)]=0,this[t(237)]=0}[vn(406)](t,i,e){const s=vn;if(t.length>0)for(let n=0;n<t[s(294)];n++){let r=t[n],o=r[s(276)],h=o[s(442)];this.samples.push({units:o,size:h,duration:r.duration,sampleAuxInfo:i,timestamp:e}),this[s(274)][s(215)]+=h}}[vn(248)](){const t=vn;if(!this[t(446)])return null;let i,e=this[t(274)][t(446)];for(;this.samples[t(294)];){let s=this[t(446)][t(233)](),n=(1e3*s[t(385)]|0)-this.nextDts|0;n<5&&(n=5),this.dts=this.nextDts,this[t(223)]+=n,i={size:s.size,duration:n,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1},sampleAuxInfo:s[t(195)]};let r=new T(s.size);return r[t(311)](s.units,0),e.push(i),new T(r.buffer,0,s[t(483)])}return null}constructor(t){const i=vn;super(),this[i(435)]=!0,this[i(223)]=0,this[i(237)]=0,this[i(274)]={id:kn[i(209)](),type:"audio",channelCount:2,audiosamplerate:48e3,len:0,fragmented:!0,timescale:t,duration:t,samples:[],codec:i(388),encrypted:!0},this[i(446)]=[]}}class xn extends kn{[vn(426)](){const t=vn;this[t(283)]=1,this.readyToDecode=!1,this[t(274)].sps="",this[t(274)][t(362)]="",this[t(223)]=0,this[t(237)]=0}[vn(406)](t,i,e){const s=vn;for(let n of t){let t=[],r=0;for(let i of n[s(276)])this.h264[s(368)](i)&&(t[s(462)](i),r+=i.getSize());t[s(294)]>0&&this[s(435)]&&(this[s(274)][s(215)]+=r,this[s(446)][s(462)]({units:t,size:r,keyFrame:n.keyFrame,duration:n[s(191)],sampleAuxInfo:i,timestamp:e}))}}[vn(248)](){const t=vn;if(!this[t(258)]()||!this.samples)return null;let i,e=this[t(274)][t(446)],n=this.samples[t(233)](),r=n[t(276)],o=(1e3*n.timestamp|0)-this[t(223)]|0;o<5&&(o=5),s[t(251)]&&o>5e3&&console[t(383)]("timestamp gap: "+(o/1e3|0)+" s"),this[t(237)]=this[t(223)],this.nextDts+=o,i={size:n[t(483)],duration:o,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:n[t(275)]?0:1,dependsOn:n.keyFrame?2:1},sampleAuxInfo:n[t(195)]};let h=0;for(const i of r)h+=i[t(349)]();let a=0,u=new T(h);for(const i of r)u[t(311)](i[t(343)](),a),a+=i[t(349)]();return e[t(462)](i),new T(u[t(492)],0,h)}constructor(t,i){const e=vn;super(),this[e(435)]=!1,this.nextDts=0,this[e(237)]=0,this[e(477)]=i,this.mp4track={id:kn[e(209)](),type:e(434),len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:t,duration:t,samples:[],encrypted:!0},this[e(446)]=[],this[e(220)]=new Nn(this)}}class Cn extends In{addTrack(t){const i=vn;(t===i(434)||"both"===t)&&(this[i(414)][i(434)]=new xn(this[i(393)],this.videoElement),this[i(480)][i(462)](i(434))),(t===i(451)||t===i(303))&&(this[i(414)][i(451)]=new Ln(this.timescale),this[i(480)][i(462)](i(451)))}reset(){const t=vn;for(let i of this[t(480)])this[t(414)][i][t(426)]();this[t(489)]=!1}[vn(355)](){const t=vn;this[t(414)]={},this[t(490)]()}[vn(250)](){const t=vn;if(this[t(489)])for(let i of this[t(480)]){let e=this[t(414)][i];for(;;){let s=e.getFramePayload();if(!s||!s[t(442)])break;let n={type:i,payload:pn(this[t(375)][t(460)](e[t(283)]++,e[t(237)],e[t(274)]),this[t(375)][t(458)](s)),dts:e[t(237)]};this[t(255)](t(492),n),e[t(250)]()}}else this[t(258)]()&&(this[t(255)](t(205)),this[t(271)](),this[t(489)]=!0,this[t(250)]())}initSegment(){const t=vn;for(let i of this[t(480)]){let e=this[t(414)][i],s={type:i,payload:this[t(375)][t(271)]([e[t(274)]],this[t(433)],this[t(393)])};this.dispatch(t(492),s)}}isReady(){const t=vn;for(let i of this.trackTypes)if(!this[t(414)][i][t(435)]||!this[t(414)][i].samples[t(294)])return!1;return!0}[vn(406)](t){const i=vn;for(let e of this[i(480)]){let s=t[e];s.length>0&&this[i(414)][e][i(406)](s,e===i(451)?t[i(225)]:t.videoSampleAuxInfo,t[i(385)])}this.flush()}constructor(t,i){const e=vn;super(e(345)),this.initialized=!1,this.trackTypes=[],this[e(414)]={},this[e(393)]=1e3,this.mediaDuration=0,this[e(477)]=t,this[e(375)]=i}}class jn extends In{[vn(355)](){const t=vn;this[t(401)]=null,this[t(254)]=null;try{this.sourceBuffer&&(this[t(310)][t(186)](),this[t(218)].removeSourceBuffer(this[t(310)]),this[t(310)]=null)}catch(t){}this.offAll()}[vn(475)](){const t=vn;if(this.queue[t(294)]&&this[t(310)]&&!this[t(310)].updating){if(this[t(310)].buffered[t(294)]>1){for(let i=0;i<this[t(310)].buffered[t(294)];++i){const e=i<this[t(310)].buffered[t(294)]-1;s[t(251)]&&console[t(383)](t(445)+i+(e?" (remove)":"")+": "+this[t(310)][t(269)][t(326)](i)+t(325)+this[t(310)][t(269)][t(376)](i)),e&&this.sourceBuffer[t(482)](this[t(310)][t(269)].start(i),this[t(310)].buffered[t(376)](i))}if(this.sourceBuffer[t(378)])return}try{this[t(310)][t(491)](this[t(401)]),this.queue=new T}catch(i){this[t(255)](t(370),{type:this[t(469)],name:t(352),error:i})}}}[vn(371)](t){const i=vn;if(this[i(254)]&&(this.dbgQueue=pn(this[i(254)],t),100==++this[i(404)])){const t=(new Date)[i(344)]().substring(0,19)[i(454)](":","-"),e=this.type+"-"+t+".mp4";s.downloadToFile(this[i(254)],e),this[i(254)]=null}this[i(197)]||(this[i(401)]=pn(this[i(401)],t)),this.doAppend()}constructor(t,i,e){const n=vn;super(n(492)),this[n(469)]=i,this.queue=new T,s[n(319)]&&(this[n(254)]=new T,this[n(404)]=0),this.sourceBuffer=t,this[n(218)]=e,this[n(197)]=!1,this[n(310)].addEventListener(n(370),(t=>{const i=n;console.warn(i(201),t,this.type),this[i(197)]=!0,this[i(255)](i(370),{type:this[i(469)],name:"buffer",error:i(292)})}))}}class On extends In{static isSupported(t){const i=vn;return s[i(202)]?s.ManagedMediaSource[i(497)](t):!!s[i(384)]&&s.MediaSource[i(497)](t)}[vn(322)](){const t=vn;typeof this.options.node===t(302)&&""==this.options[t(450)]&&console[t(370)](t(473)),this[t(234)]=!1,this.setupMSE()}setupMSE(){const t=vn;if(!s[t(202)]&&!s[t(384)])throw t(452);s.ManagedMediaSource?(this.node[t(427)]=!0,this[t(327)]=new ManagedMediaSource):this[t(327)]=new MediaSource,this[t(284)]=URL[t(244)](this[t(327)]),this.node[t(485)]=this[t(284)],this[t(277)]=!1,this[t(327)][t(331)](t(338),this.onMSEOpen[t(308)](this)),this.mediaSource.addEventListener("sourceclose",this[t(241)][t(308)](this)),this[t(327)][t(331)]("webkitsourceopen",this[t(194)][t(308)](this)),this.mediaSource[t(331)](t(240),this[t(241)].bind(this)),this[t(327)][t(331)]("error",(function(i){const e=t;console[e(370)](e(287),i[e(226)])}))}[vn(227)](){const t=vn;if(!this[t(277)])try{this.mseEnded=!0,this[t(327)][t(185)]===t(399)&&this[t(327)][t(261)]()}catch(i){console[t(370)]("mediasource is not available to end: ",i)}}[vn(359)](){this[vn(410)]=!0}[vn(371)](t){const i=vn;let e={video:[],audio:[]};if(this[i(197)]||this[i(277)]||!t||!this[i(423)])return-1;if(t[i(434)]){e.timestamp=t.timestamp;const s=this[i(190)](t.videoSampleAuxInfo,this.mp4[i(199)][i(434)]),n=s!=t[i(434)][i(442)];let r=Nn[i(360)](t[i(434)],n);if(!r[i(206)]||r[i(260)].length<1)return 0;if(this.waitingForIdr){if(!r[i(412)])return 0;this[i(410)]=!1}if(!mn&&t[i(278)]){const e=r[i(260)][i(188)](((t,e)=>t+4+e[i(442)]),0);e!==s&&this[i(400)](t[i(278)],this.mp4[i(199)][i(434)],e-s)}e[i(434)]=this[i(335)](r[i(260)]),e[i(278)]=t[i(278)]}return t[i(451)]&&(e[i(385)]=t[i(385)],e[i(451)]=[{units:t.audio}],e.audioSampleAuxInfo=t[i(225)]),t[i(434)]||t[i(451)]?(this[i(423)][i(406)](e),0):(console.error(i(361)),0)}[vn(335)](t){const i=vn;let e=[],s=[],n=!1,r=!1;for(let o of t){let t=new Tn(o);t.type()!==Tn.IDR&&t[i(469)]()!==Tn.NDR||Nn[i(448)](t),e[i(294)]&&r&&(t[i(387)]||!t[i(495)])&&(s[i(462)]({units:e,keyFrame:n}),e=[],n=!1,r=!1),e[i(462)](t),n=n||t[i(459)](),r=r||t[i(495)]}if(e[i(294)])if(r)s[i(462)]({units:e,keyFrame:n});else{let t=s[i(294)]-1;t>=0&&(s[t].units=s[t][i(276)].concat(e))}return 1!==s[i(294)]&&console[i(230)](i(207)+s[i(294)]),s}[vn(190)](t,i){const e=vn;if(!t)return 0;const s=(t[0]<<8)+t[1],n=i+2+4;let r=0,o=2;for(;0<s&&o+n<=t[e(442)];){o+=i;const e=(t[o]<<8)+t[o+1],s=(t[o+2]<<24)+(t[o+3]<<16)+(t[o+4]<<8)+t[o+5];o+=6,r+=e+s}return r}patchSampleAuxinfo(t,i,e){const s=vn;let n=2;if(0<(t[0]<<8)+t[1]&&n+(i+2+4)<=t[s(442)]){n+=i;let s=(t[n]<<8)+t[n+1];s+=e,s>=0&&(t[n]=s>>>8&255,t[n+1]=255&s)}return 0}[vn(382)](){const t=vn;if(this[t(234)]&&this[t(423)]&&this[t(423)].isReady()&&!this.bufferControllers){this.bufferControllers={};for(let i in this[t(423)][t(414)]){let e=this[t(423)][t(414)][i];const n="".concat(i,t(317))[t(365)](e[t(274)][t(449)],'"');if(s.clRtcDrmDebugLog&&console[t(383)](t(312),n),!On[t(408)](n))return console[t(370)](t(372)),!1;let r=this[t(327)][t(350)](n);this[t(398)][i]=new jn(r,i,this[t(327)]),this.bufferControllers[i].on(t(370),this[t(403)][t(308)](this))}}}[vn(313)](){const t=vn;for(let i in this[t(398)])this[t(398)][i].doAppend()}onBuffer(t){const i=vn;this[i(234)]&&this[i(398)]&&this[i(398)][t.type]&&this[i(398)][t[i(469)]][i(371)](t[i(214)])}[vn(194)](){const t=vn;s[t(251)]&&console.info("[MSE] sourceopen"),this[t(327)][t(185)]!==t(281)&&(this.mediaSource.duration=Number[t(391)],this[t(234)]=!0,"function"==typeof this[t(379)][t(336)]&&this[t(379)].onReady[t(394)](null,this[t(466)]),URL[t(235)](this.url),this[t(382)]())}[vn(241)](){const t=vn;s.clRtcDrmDebugLog&&console[t(383)](t(441)),this.mseReady=!1,this[t(227)]()}[vn(403)](t){const i=vn;console.warn(i(351),t),this.irrecoverableError=!0,this[i(227)](),"function"==typeof this[i(379)][i(266)]&&this[i(379)][i(266)][i(394)](null,t)}constructor(t){const i=vn;super(i(397)),this[i(197)]=!1,this[i(410)]=!0,this[i(466)]=!1,this[i(234)]=!1,this.mseEnded=!1,this[i(379)]=_[i(189)]({},{node:"",mode:"video",debug:!1,onReady:function(){},onError:function(t){}},t),this[i(450)]=typeof this.options[i(450)]===i(302)?h[i(472)](this.options.node):this[i(379)].node,this[i(432)]=t.drm,this.mp4=new Dn(this.drm),this[i(423)]=new Cn(this.node,this[i(375)]),this[i(423)].addTrack(this[i(379)][i(461)]),this[i(423)].on(i(492),this[i(456)].bind(this)),this[i(423)].on(i(205),this[i(382)][i(308)](this)),this.initBrowser()}}function Rn(t,i){const e=Pn();return(Rn=function(t,i){return e[t-=222]})(t,i)}function Pn(){const t=["jw","1634635aeNfVS","4rWkceo","1051qHPzyB","314juHkBI","7752096GfpyFE","1023208nKrJjX","2137269uUqtNM","303058KNxeBb","1097196nHglzA"];return(Pn=function(){return t})()}!function(){const t=Rn,i=Pn();for(;;)try{if(C(t(228))/1*(-C(t(229))/2)+-C(t(222))/3*(C(t(227))/4)+C(t(226))/5+C(t(224))/6+C(t(223))/7+-C(t(231))/8+C(t(230))/9==409100)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const zn=Bn;function Bn(t,i){const e=Yn();return(Bn=function(t,i){return e[t-=460]})(t,i)}!function(){const t=Bn,i=Yn();for(;;)try{if(-C(t(471))/1*(-C(t(474))/2)+C(t(479))/3+C(t(473))/4*(C(t(461))/5)+C(t(487))/6+-C(t(467))/7+-C(t(482))/8+-C(t(464))/9==139726)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Un="CrsCCAMSEKDc0WAwLAQT1SB2ogyBJEwYv4Tx7gUijgIwggEKAoIBAQC8Xc/GTRwZDtlnBThq8"+zn(462)+"wyoYOE+M/t1oIbccwlTQ7o+BpV1X6TB7fxFyx1jsBtRsBWphU65w121zqmSiwzZzJ4xsXVQCJ"+zn(460)+zn(476)+zn(480)+zn(484)+zn(485)+"7hyskG5ZLAyJMzTvgnV3D8/I5Y6mCFBPb/+/Ri+9bEvquPF3Ff9ip3yEHu9mcQeEYCeGe9zR/27eI5MATX39gYtCnn7dDXVxo4/rCYK0A4VemC3HRai2X3pSGcsKY7+6we7h4IycjqtuGtYg8A"+zn(475)+"RL9KsD0v7ysBQVdUXEbJotcFz71tI5qc3jwr6GjYIPA3VzusD17PN6AGQniMwxJV12z/EgnUo"+zn(477),Qn=T[zn(478)](s[zn(470)](Un),(t=>t.charCodeAt(0)));class Fn{[zn(469)](){return this[zn(488)]}[zn(483)](){const t=zn;switch(this[t(488)]){case t(489):return"https://lic.staging.drmtoday.com";case t(465):return t(481);default:return t(466)}}certificate(){return Qn}constructor(t){this[zn(488)]=t}}function Yn(){const t=["development","https://lic.drmtoday.com","462553oMrSQp","Staging","toString","atob","20047HjYCpd","Development","52chMPdC","6mbMcSk","baigovcoURAZcr1d/G0rpREjLdVLG0Gjqk63Gx688W5gh3TKemsK3R1jV0dOfj3e6uV/kTpsN","+vwmV2/NJWxKqHBKdL9JqvOnNiQUF0hDI7Wf8Wb63RYSXKE27Ky31hKgx1wuq7TTWkA+kHnJT","pcFB13osydpD2AaDsgWo5RWJcNf+fzCgtUQx/0Au9+xVm5LQBdv8Ja4f2oiHN3dw","from","146355HhTpSB","UrTEfQxfPR4dJTquE+IDLAi5yeVVxzbAgMBAAE6DGNhc3RsYWJzLmNvbUABEoADMmGXpXg/0q","https://lic.test.drmtoday.com","501688OkVRMl","baseUrl","xUuwokpsqVIHZrJfu62ar+BF8UVUKdK5oYQoiTZd9OzK3kr29kqGGk3lSgM0/p499p/FUL8oH","HzgsJ7Hajdsyzn0Vs3+VysAgaJAkXZ+k+N6Ka0WBiZlCtcunVJDiHQbz1sF9GvcePUUi2fM/h","Production","1063410zFUyaf","name","staging","pQnNI61gzHO42XZOMuxytMm0F6puNHTTqhyY3Z290YqvSDdOB+UY5QJuXJgjhvOUD9+oaLlvT","93365ZJpndd","V382D1oJAM0F/YgCQtNDLz7vTWJ+QskNGi5Dd2qzO4s48Cnx5BLvL4H0xCRSw2Ed6ekHSdrRU","production","2343546YgIYCY"];return(Yn=function(){return t})()}function Vn(t,i){const e=Gn();return(Vn=function(t,i){return e[t-=325]})(t,i)}function Gn(){const t=["1052499bnJBHn","cenc","4222tSxFth","Unsupported SampleAuxInfo version","12980Tusgux","3160ZwXFcU","40030ewyARR","16lkTHRT","1199124lbwxEr","data","105TSrukA","getUint8","12bBEpge","SampleAuxInfo corrupted (postfix not found)","getUint16","error","85265ZYYyUv","buffer","3616548TKdsLX","subarray","byteLength","SampleAuxInfo corrupted"];return(Gn=function(){return t})()}function Wn(t,i){const e=qn();return(Wn=function(t,i){return e[t-=295]})(t,i)}Fn[zn(468)]=new Fn(zn(489)),Fn[zn(486)]=new Fn(zn(463)),Fn[zn(472)]=new Fn(zn(465)),function(){const t=Vn,i=Gn();for(;;)try{if(C(t(328))/1+-C(t(332))/2*(-C(t(336))/3)+-C(t(338))/4*(-C(t(342))/5)+-C(t(344))/6+-C(t(326))/7*(C(t(333))/8)+C(t(334))/9+C(t(331))/10*(C(t(330))/11)==358550)break;i.push(i.shift())}catch(t){i.push(i.shift())}}(),function(){const t=Wn,i=qn();for(;;)try{if(C(t(305))/1*(-C(t(297))/2)+-C(t(295))/3+C(t(310))/4*(C(t(309))/5)+-C(t(304))/6*(C(t(296))/7)+C(t(307))/8*(-C(t(298))/9)+-C(t(301))/10*(C(t(302))/11)+-C(t(300))/12*(-C(t(308))/13)==178039)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Zn=[];let Hn=null,Xn=0;function qn(){const t=["31476hbBsvr","850RxzAPl","4180KczaCN","push","156MUFuvQ","96571jvhWaB","buffer","26232BkewNd","4303YGAqiP","5yhGpFn","1137036pzCnTd","1035942NcoZLh","94073eTaQjy","2bXtEms","414snfiTE","slice"];return(qn=function(){return t})()}const Kn=er;function Jn(){const t=["Data does not seem to be UTF-16 encoded!","No init data available!","getElementsByTagName","min","14BFNrBA","keystatuseschange","catch","childNodes","internal-error","Failed to reuse previous EME session: ","output-downscaled","expired","bind","5576688EKOFOG","has","length","License acquisition failed with error ","arrayBuffer","apply","CDM error generating license request: ","<Challenge","No PR challenge data!","then","license","createSession","warn","[PR] License fetched:","text/xml","clRtcDrmDebugLog","push","encode","max","json"," is not ","replace","target","rtcdrmerror","update","fromCharCode","subarray","2993694njpqat","4002692oINhTV","Content-Type","1347492MkzfDC","Data has an incorrect length, must be even.","addEventListener","buffer","onFetch","generateRequest","initData","dispatchEvent","atob","No clear key test key provided!","Challenge","New lic will be requested","oct","BYTES_PER_ELEMENT","sessionId","usable for decryption (status: ","[WV] License fetched:","Key ","5MtuOVr","byteLength","744563CKOUzg","load","floor","error","decode","indexOf","info","isSafari","edef8ba979d64acea3c827dcd51d21ed","mediaKeys","Previous lic will be reused","charCodeAt","licenseUrl","status","Failed to update the session: ","log","keyStatuses","temporary","9a04f07998404286ab92e65be0885f95","output-restricted","nodeValue","btoa","message","EME createSession() failed - no DRM available","5977680uUTwUr","getUint16","[PR] Challenge node not found","A128KW","3974463jrELhf","Failed to update the session","stringify","[EME]","delete","No media keys for media element!","set","2nMQfRz"];return(Jn=function(){return t})()}!function(){const t=er,i=Jn();for(;;)try{if(-C(t(419))/1*(C(t(454))/2)+C(t(495))/3+C(t(496))/4*(-C(t(417))/5)+-C(t(498))/6*(-C(t(459))/7)+C(t(468))/8+-C(t(447))/9+C(t(443))/10==555073)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();let $n={licenseUrl:"",onFetch:void 0};const tr={},ir=(t,i,e)=>(void 0===i&&(i=0),void 0===e&&(e=1/0),((t,i,e)=>{const s=er,n=T[s(511)];i*=n,e*=n;const r=(a=t)instanceof ArrayBuffer?a:a[er(501)],o=t[s(418)],h=i;var a;let u=x[s(486)](0,x[s(458)](h,o)),c=x[s(458)](u+x[s(486)](e,0),o);return u/=n,c/=n,new T(r,u,c-u)})(t,i,e));function er(t,i){const e=Jn();return(er=function(t,i){return e[t-=417]})(t,i)}const sr=t=>{const i=er;let e="";for(const s of t){let t=s.toString(16);1==t[i(470)]&&(t="0"+t),e+=t}return e};let nr=null;const rr=t=>{const i=er;return s[i(440)](String[i(493)][i(473)](null,t))[i(489)](/\+/g,"-")[i(489)](/\//g,"_")[i(489)](/=*$/,"")},or=(t,i)=>{const e=er,s=(t=>{const i=er,e=JSON.parse((new TextDecoder)[i(423)](t));if(console[i(434)]("CK license request:",e),null===nr)throw new b(i(507));const s=[];for(const t of e.kids){const e={kty:i(510),alg:i(446),kid:t,k:rr(nr)};s[i(484)](e)}return(new TextEncoder)[i(485)](JSON[i(449)]({keys:s}))})(i.message);i[e(490)][e(492)](s)[e(461)]((function(t){const i=e;console[i(422)](i(448),t)}))},hr=t=>{const i=er,e=s[i(506)](t[i(489)](/-/g,"+")[i(489)](/_/g,"/")),n=new T(e[i(470)]);for(let t=0;t<e.length;++t)n[t]=e[i(430)](t);return n},ar=function(t,i){for(var e=arguments.length,s=new Array(e>2?e-2:0),n=2;n<e;n++)s[n-2]=arguments[n];return en(void 0,[t,i,...s],void 0,(function*(t,i,e){void 0===e&&(e=!1);const s=er,n=new Headers(tr);e&&n.append(s(497),s(482));const r={method:"POST",headers:n,body:i},o=yield $n[s(502)]?$n[s(502)](t,r):fetch(t,r);if(!o.ok)throw new b(s(471)+o[s(432)]);return o}))},ur=(t,i)=>{const e=er;ar($n[e(431)],i[e(441)])[e(477)]((t=>t[e(487)]()))[e(477)]((t=>{const n=e;s[n(483)]&&console.info(n(514),t.license);const r=hr(t[n(478)])[n(501)];i[n(490)][n(492)](r)[n(461)]((t=>{console[n(422)]("Failed to update the session",t)}))}))[e(461)]((i=>{const s=e;t.dispatchEvent(new CustomEvent(s(491),{detail:{message:""+i}})),console[s(422)](i)}))},cr=(t,i)=>{const e=er,n=((t,i)=>{const e=er,s=new DOMParser;try{const t=function(t,i,e){void 0===e&&(e=!1);const s=er;if(!t)return"";let n=t;if(!e&&n.byteLength%2!=0)throw console[s(422)](s(499)),new b(s(455));const r=ir(n);let o;if((255===r[0]&&254===r[1]||254===r[0]&&255===r[1])&&(n=r[s(494)](2)),n instanceof ArrayBuffer)o=n;else{const t=new T(n[s(418)]);t[s(453)](ir(n)),o=t[s(501)]}const h=x[s(421)](n.byteLength/2),a=new Uint16Array(h),u=new DataView(o);for(let t=0;t<h;t++)a[t]=u[s(444)](2*t,i);return function(t){const i=er;let e="";for(let s=0;s<t[i(470)];s+=16e3){const n=t[i(494)](s,s+16e3);e+=String[i(493)].apply(null,n)}return e}(a)}(i,!0);if(t[e(424)](e(475))>-1){const i=s.parseFromString(t,e(482))[e(457)](e(508))[0][e(462)][0][e(439)];if(null===i)throw new b("No PR challenge data!");return hr(i)}console[e(480)](e(445))}catch(i){t.dispatchEvent(new CustomEvent(e(491),{detail:{message:""+i}})),console.error(i)}return null})(t,i.message);if(null===n)return t[e(505)](new CustomEvent("rtcdrmerror",{detail:{message:"No PR challenge data!"}})),void console.error(e(476));ar($n[e(431)],n[e(501)],!0)[e(477)]((t=>t[e(472)]()))[e(477)]((n=>{const r=e;s[r(483)]&&console[r(425)](r(481),n),i[r(490)].update(n)[r(461)]((function(i){const e=r;t[e(505)](new CustomEvent(e(491),{detail:{message:e(433)+i}})),console[e(422)](e(448),i)}))}))[e(461)]((i=>{const s=e;t.dispatchEvent(new CustomEvent("rtcdrmerror",{detail:{message:""+i}})),console[s(422)](i)}))},lr=(t,i)=>{const e=er;ar($n[e(431)],i[e(441)])[e(477)]((t=>{const i=e,n=t.text();return s[i(483)]&&console.info("[FPS] License fetched:",t,n),n}))[e(477)]((t=>{const s=e;i[s(490)][s(492)](hr(t))}))[e(461)]((i=>{const s=e;t.dispatchEvent(new CustomEvent(s(491),{detail:{message:""+i}})),console[s(422)](i)}))},dr=(t,i)=>{tr[t]=i},fr=_n[Kn(426)];let gr=!fr;const _r=new Map;function vr(t){return en(this,void 0,void 0,(function*(){const i=er;if(null===t[i(504)])throw new b(i(456));const e=t[i(490)];if(null===e)throw new b("No media element available!");const n=e[i(428)];if(null===n)throw new b(i(452));const r=sr(new T(t[i(504)])),o=r+e.id;let h=null;_r[i(469)](o)&&(h=_r.get(o),null!=h&&h.close(),_r[i(451)](o)),s[i(483)]&&console[i(425)](i(450),i(h?429:509));let a=null;try{a=n[i(479)](gr?"persistent-license":"temporary")}catch(t){console[i(434)]("EME createSession(persistent) failed:",t)}if(!a&&gr){gr=!1;try{a=n[i(479)](i(436))}catch(t){console[i(422)]("EME createSession(temporary) failed:",t)}}if(a)if(a[i(500)](i(460),(t=>{const s=i;t[s(490)][s(435)].forEach(((t,i)=>{const n=s;(t===n(466)||t===n(438)||t===n(465)||t===n(463))&&e[n(505)](new CustomEvent(n(491),{detail:{message:n(515)+sr(new T(i))+n(488)+(n(513)+t+")"),keyId:i}}))}))})),fr?a.addEventListener(i(441),lr[i(467)](null,e),!1):-1!==r[i(424)](i(427))?a.addEventListener(i(441),ur[i(467)](null,e),!1):-1!==r[i(424)](i(437))?a[i(500)](i(441),cr[i(467)](null,e),!1):a.addEventListener("message",or[i(467)](null,e),!1),h)try{(yield a[i(420)](h[i(512)]))?_r[i(453)](o,a):e.dispatchEvent(new CustomEvent(i(491),{detail:{message:"Failed to load previous EME session"}}))}catch(t){e[i(505)](new CustomEvent(i(491),{detail:{message:i(464)+t}}))}else a[i(503)](t.initDataType,t[i(504)]).then((()=>{gr&&_r[i(453)](o,a)}))[i(461)]((t=>{const s=i;e[s(505)](new CustomEvent(s(491),{detail:{message:s(474)+t}}))}));else e[i(505)](new CustomEvent(i(491),{detail:{message:i(442)}}))}))}const wr=Br;function mr(){const t=[" too close to seek, ","fpsCertificateUrl","9880640TWxZrg","H264","ignoreAudio","Unable to create Worker!","createMediaKeys(",", restart required: ","/license-proxy-headerauth/drmtoday/RightsManager.asmx","6236Nwzlef","worker","serverCertificateUrl","serverCertificate","seq",",255]).buffer,idrFrames.push(new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,","ClearKey","No valid DRM config found, call rtcDrmConfigure first.","sessionId","toISOString","indexOf","robustness","isInteger","info","includes","Development","slice","16niaptx"," frame","video/mp4","isArray","Android","end","PlayReady","streamType","1772WtcYWF","]: ","Frame gap: ","nextKeyFrameAllowedTime","use rtcDrmFeedFrame to push frames manually","Error recovery attempted","merchant","FairPlay","requestMediaKeySystemAccess(","pipeThrough","/license-server-fairplay/","isChrome","type","MSE (re)init","const DUMMY_IDR_FRAME_SLICE_HDR0=new Uint8Array([32,0,203]),DUMMY_IDR_FRAME_SLICE_HDR1=new Uint8Array([16,0,50]);","DRM config env value must be one of: ","length","GOP is getting too long, requesting a new key frame","Worker","let brokenFrame=null,idrFrames=[];function initializeDummyFrames(){brokenFrame=new Uint8Array([0,0,0,1,65,154,255","srcObject","RTCRtpScriptTransform","),idrFrames.push(idrFrames[0].slice());let $=new Uint8Array(idrFrames[1]);$.set([16,0,50],27)}let idrPicIdToggle=","now"," to ","join","setServerCertificate","audioCapabilities","lastKeyFrameTime","prevSeqNum"," seeking from ",".experiment","clRtcDrmDebugLog","Server certificate fetch failed with error ","isFirefox","org.w3.clearkey","x-dt-custom-data","jitterBufferTarget","playbackRate","enabled","keyFrameNeeded","createEncodedStreams","wvCertificateUrl","key","sai","Discarding corrupted video frame (too small)",'gle^=1]}function audioTransformFunction($,e){postMessage({streamType:"audio",frame:{timestamp:$.timestamp,data:$.',"H264 is the only supported video codec.","com.microsoft.playready.recommendation"," will be used","DRM config iv must be an instance of 16-byte long Uint8Array.","encryption","0;function generateDummyFrame($){return(brokenFrame||initializeDummyFrames(),$)?brokenFrame:idrFrames[idrPicIdTog","toString","message","status","bytesSinceKey","currentTime","supportsRtpScriptTransform","1585647fRskxG","audioElement","track","sinf","createObjectURL","enqueue","Invalid videoElement, it must be an instance of HTMLVideoElement.","7302558TqFWae","pipeTo","SampleAuxInfo extraction failed (video)","isEdge","keys","not-allowed","rtcdrmerror","btoa","?audioTransformFunction:videoTransformFunction});e.pipeThrough(a).pipeTo(x)}self.RTCTransformEvent&&(self.onrtctr",", a1d1f1 is recommended).","reportDiscontinuity","onFetch","keyId","sessionTypes","). Edge only supports PlayReady, Widevine and ClearKey.","audioEncrypted","audioStartTimestamp","frame","videoStartTimestamp","184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32]).buffer","Duplicate/reordered frame, prev seq: ","ClearKey is not supported by Safari.","bind",") not found in [","DRM config robustness can only be one of: ","persistent-license","postMessage","receiver","get","both","jmuxer","Production","Blob","timestamp","cenc","emeConfig","clear","cbcs-1-9","5iKPdqC","isWindows","PlayReady license acquisition might fail without output protection enabled (sessionId is ","). Chrome only supports Widevine and ClearKey.","mediaBufferMs should be an integer.","size","certificate","prLicenseUrl","fpsLicenseUrl","/license-proxy-widevine/cenc/","4572770OAoUlm","BYTES_PER_ELEMENT","then","SW_SECURE_CRYPTO","ansform=$=>{let e=$.transformer;handleTransform(e.options.operation,e.readable,e.writable)}),onmessage=$=>{keyFra","splice","Safari doesn't support 'cenc'/AES-CTR, use 'cbcs' instead if possible.","videoElement","rtcDrmConfigure did not specify audioElement, audio will be dropped",'audio/mp4; codecs="opus"',"object","Invalid audioElement, it must be an instance of HTMLMediaElement.","keyFrameNeededPosted","debugCreateMediaDump","next","play","6591266VeIbXo","userId","jitterBufferDelayHint",'ame(keyFrameNeeded),e.enqueue($)}function handleTransform($,e,x){let a=new TransformStream({transform:"audio"===$',"dispatchEvent","reduce"," bytes, playback at ","offset","arrayBuffer","waitingForIdr","Widevine","DRM config mediaBufferMs should be an integer.","hwSecurity","authToken","audio"," bytes)","push","licenseUrl","Default transform mode enabled, ","RTCRtpScriptTransform/TransformStream will not be created, ","GET","baseUrl","video","trim","7377TdQrIK","3000","playoutDelayHint","catch","fpsCertificate","POSITIVE_INFINITY","/license-server-fairplay/cert/","DRM config:","streams","mediaBufferMs","log","codec","onmessage","Target video element (","Applying pre-configured certificate (","webkitURL","Discarding corrupted video frame (no Annex B startcode)"," requesting a new key frame (latency ","PlayReady might not support '","No target media element!","URL","set","warn","data","config","isSafari","forEach","setMediaKeys","buffered"," - ","keySystem",'data}}),e.enqueue($)}let keyFrameNeeded=!1;function videoTransformFunction($,e){postMessage({streamType:"video",f',"paused","wvCertificate","a1d1f1","2000","keyFrameRequestInterval","Several DRM configs detected, rtcDrmOnTrack have to be called with target DRM config.","error","238HZxcdH","HW_SECURE_ALL","Invalid DRM type (","buffer","x-dt-auth-token","clRtcDrmCreateMediaDump",'rame:{type:$.type,timestamp:$.timestamp,data:$.data}}),"key"===$.type&&(keyFrameNeeded=!1),$.data=generateDummyFr',"addEventListener",") failed","keyFrameLogCntr","feed","byteLength","kind","purchase","environment","videoCapabilities","requestMediaKeySystemAccess","temporary","). It has to be a string containing a JWT.","value",".. ","string"];return(mr=function(){return t})()}!function(){const t=Br,i=mr();for(;;)try{if(C(t(543))/1*(C(t(512))/2)+C(t(473))/3*(C(t(568))/4)+-C(t(672))/5*(-C(t(634))/6)+-C(t(536))/7+C(t(560))/8*(C(t(627))/9)+-C(t(682))/10+-C(t(449))/11==932877)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const pr=_n[wr(626)],Ar=_n[wr(602)],yr=_n[wr(498)],br=_n[wr(637)],Mr=_n[wr(579)],Tr=_n.platform,Sr=_n[wr(673)],Nr=br||Mr&&Tr===wr(564),Ir=1e6*(Ar?82:yr?220:120),Dr=Ar?5e3:2e3,Er=Ar?1.5:.5;function kr(t){const i=wr;return typeof t!==i(692)||null===t||t instanceof Element||t instanceof Fn?t:function(t){const i=wr;return!!((null==t?void 0:t[i(515)])instanceof ArrayBuffer&&null!=t&&t[i(683)])}(t)?t[i(559)]():Array[i(563)](t)?t[i(454)](((t,i,e)=>(t[e]=kr(i),t)),[]):t instanceof _?_[i(638)](t)[i(454)](((i,e)=>(i[e]=kr(t[e]),i)),{}):t}class Lr{constructor(t){const i=wr;this[i(545)]="",this.licenseUrl="",this[i(503)]="",this[i(669)]=[],this[i(497)]=kr(t),this[i(664)]=null,this[i(521)]=0,this[i(571)]=Date.now(),this.videoStartTimestamp=0,this.audioStartTimestamp=0,this.prevSeqNum=-1,this[i(596)]=0,this[i(624)]=0,this.keyFrameNeeded=!0,this.keyFrameNeededPosted=!1,this.keyFrameRequestInterval=Dr,this.worker=null}}const xr=new Map,Cr=new T([60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60]),jr=new T([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]),Or=new T([213,251,214,184,46,217,62,78,249,138,228,9,49,238,51,183]);function Rr(t){const i=wr;let e=!1;if((t[i(497)].video&&"clear"!==t[i(497)].video[i(619)]&&"HW"===t.config[i(471)][i(554)]||t[i(497)][i(463)]&&t[i(497)][i(463)].encryption!==i(670)&&"HW"===t[i(497)][i(463)][i(554)])&&(e=!0),t.hwSecurity=e,function(t,i){const e=wr;void 0!==i&&(t[e(497)][e(482)]=i),(void 0===t[e(497)][e(482)]||t[e(497)].mediaBufferMs<0)&&(t.config[e(482)]=100,Ar?t[e(497)][e(482)]=350:!yr&&Sr&&(t[e(497)][e(580)]===e(566)||t[e(461)])&&(t[e(497)][e(482)]=1400))}(t,t[i(497)][i(482)]),void 0===t.config.authToken){void 0===t.config[i(450)]&&(t[i(497)][i(450)]=i(525)),void 0===t[i(497)][i(551)]&&(t.config[i(551)]=i(507));const e=s[i(641)](JSON.stringify({userId:t.config[i(450)],sessionId:t[i(497)][i(551)],merchant:t.config[i(574)]}));dr(i(604),e)}else dr(i(516),t.config[i(462)]);for(const e of[t[i(497)].audio,t[i(497)][i(471)]])e&&e[i(619)]!==i(670)&&(e[i(646)]||(e[i(646)]=jr),e.iv||(e.iv=Or));t[i(546)]=void 0,t[i(545)]="",t[i(466)]="";const n=t.config[i(526)][i(470)]();var r;if(t[i(497)][i(580)]===i(549)?(t.keySystem=i(603),nr=Cr):t.config.type===i(459)?(t[i(503)]="com.widevine.alpha",Sr&&e&&(t[i(503)]+=i(599)),t.config.wvCertificate?t[i(546)]=t[i(497)][i(506)]:t[i(497)][i(610)]?t[i(545)]=t[i(497)][i(610)]:t[i(546)]=t.config[i(526)][i(678)](),t.config.wvLicenseUrl?t[i(466)]=t[i(497)].wvLicenseUrl:t[i(466)]=n+i(681)):t[i(497)][i(580)]===i(566)?(t[i(503)]=i(616),t[i(497)][i(679)]?t.licenseUrl=t[i(497)][i(679)]:t[i(466)]=n+i(542)):t[i(497)].type===i(575)&&(t.keySystem="com.apple.fps",t.config[i(477)]?t[i(546)]=t[i(497)][i(477)]:t[i(497)][i(535)]?t.serverCertificateUrl=t.config[i(535)]:t[i(545)]=n+i(479)+t[i(497)].merchant,t[i(497)][i(680)]?t[i(466)]=t.config.fpsLicenseUrl:t.licenseUrl=n+i(578)),r={licenseUrl:t[i(466)],onFetch:t.config[i(645)]},$n=r,t[i(669)]=[],t.config[i(580)]!==i(575)){t[i(669)][i(465)]({initDataTypes:[i(668)],sessionTypes:["persistent-license",i(529)]});for(const e of[t[i(497)][i(471)],t[i(497)][i(463)]])if(e&&e.encryption!==i(670)){const s=e==t[i(497)][i(471)]?i(471):i(463);let n;t[i(497)][i(580)]===i(459)?n="HW"===e[i(554)]?i(513):i(685):"PlayReady"===t[i(497)][i(580)]&&(n="HW"===e.robustness?i(474):i(508)),s===i(471)?t[i(669)][0][i(527)]=[{contentType:'video/mp4; codecs="avc1.640032"',encryptionScheme:"cenc"===e[i(619)]?i(668):"cbcs-1-9",robustness:n||void 0}]:t[i(669)][0][i(595)]=[{contentType:i(691),encryptionScheme:e[i(619)]===i(668)?"cenc":i(671),robustness:n||void 0}]}}else t[i(669)]=[{initDataTypes:[i(630)],videoCapabilities:[{contentType:i(562),robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:i(639),sessionTypes:["temporary"]}];s[i(600)]&&console.info(i(480),t)}function Pr(t){const i=wr;s[i(600)]&&console[i(556)](i(581));let e=t[i(497)].videoElement;(!t[i(497)][i(471)]||t.config[i(471)][i(619)]===i(670))&&(e=t.config.audioElement),t[i(664)]=null;const n=!t.ignoreAudio&&t[i(497)][i(463)]&&"clear"!==t[i(497)].audio[i(619)],r=t[i(497)][i(471)]&&t.config.video[i(619)]!==i(670);t[i(624)]=0,t[i(608)]=!0,t.keyFrameNeededPosted=!1,t[i(509)]=Dr,t[i(652)]=0,t[i(650)]=0,t[i(597)]=-1,t[i(596)]=0,t.jmuxer=new On({node:e,mode:n?i(r?663:463):"video",fps:60,drm:t}),yr&&t[i(497)].videoElement&&t[i(497)][i(689)][i(448)]()[i(684)]((()=>{}))[i(476)]((()=>{}))}function zr(t,i,e){const n=wr;if(t[n(497)][n(471)]&&"clear"===t.config[n(471)][n(619)])return null==e||e[n(632)](i),!1;const r=Date[n(591)]();if(i.type===n(611)){const e=s[n(600)];++t[n(521)]<(e?Number[n(478)]:5)&&(console[n(556)]((new Date)[n(552)]().slice(11,-1)+" "+i[n(580)]+", "+(i[n(496)].byteLength+n(455)+t[n(497)][n(689)][n(625)])),e&&1===t[n(521)]&&function(t,i,e){void 0===i&&(i=64),void 0===e&&(e=64);const s=wr,n=new T(t[s(496)]);let r="",o=0;for(let t=0;t<i&&t<n[s(584)];++t)r+=(n[t]<16?"0":"")+n[t].toString(16)+" ";if(o<n[s(584)])for(o<n[s(584)]-e&&(r+=s(532),o=n[s(584)]-e);o<n[s(584)];o++)r+=(n[o]<16?"0":"")+n[o][s(621)](16)+" ";console.info("["+((t[s(580)]||s(463))+s(561))+s(569)+r[s(472)]())}(i,128,8)),t[n(608)]=!1,t[n(624)]=0,t[n(571)]=r+t[n(509)]}return t[n(624)]+=i.data[n(523)],!t[n(608)]&&t[n(624)]>Ir&&(console[n(556)](n(585)),t[n(608)]=!0),t.jmuxer&&(function(t,i){const e=wr;0===t[e(652)]&&(t[e(652)]=i[e(667)],t[e(509)]=Dr,t[e(571)]=Date[e(591)]()+2e3);let n=null,r=!1;if(i.data[e(523)]<=4)console[e(495)](e(613)),r=!0;else{const s=new T(i[e(496)],0,4);0!=s[0]||0!=s[1]||0!=s[2]||1!=s[3]?(console[e(495)](e(489)),r=!0):(n=function(t,i){const e=Vn,s=new DataView(t[e(335)]),n=t.data[e(346)]-2,r=s[e(340)](n);if(r<n){let t=n-r;if(69!==s[e(337)](n-1))return console[e(341)](e(339)),null;if(s.getUint8(t++)>>>4!=1)return console[e(341)](e(329)),null;const o=new T(r-2);let h=0,a=0;for(;t<n-1;){let i=s.getUint8(t++);a>1&&3===i&&(a=0,i=s.getUint8(t++)),0!==i?a=0:++a,o[h++]=i}const u=new DataView(o[e(343)]),c=i===e(327)?16:0,l=c+2+6*u.getUint16(c);return l+2>h?(console.error(e(325)),null):{sai:o[e(345)](0,l),offset:n-r,seq:u.getUint16(l)}}return null}(i,t[e(497)][e(471)][e(619)]),!n&&(console.warn(e(636)),r=!0))}if(n)if(-1===t[e(597)]){if(i[e(580)]!==e(611))return 0;t[e(597)]=n[e(547)]}else{let o=n.seq-t[e(597)];if(o<-32767&&(o+=65536),o<=0)return s[e(600)]&&console[e(495)](e(654)+t[e(597)]+", curr: "+n[e(547)]),0;o>1&&(r=i[e(580)]!==e(611),console[e(495)](e(570)+t[e(597)]+e(502)+n[e(547)]+e(541)+r)),t.prevSeqNum=n[e(547)]}let o=0;r&&!t[e(664)][e(458)]&&(o=-1,t[e(664)][e(644)]());const h=(i[e(667)]-t[e(652)])/9e4;return n&&t[e(664)][e(522)]({video:new T(i.data,0,n[e(456)]),videoSampleAuxInfo:n[e(612)],timestamp:h})<0&&(o=-1,console[e(495)](e(573)),Pr(t)),o>=0&&"key"===i[e(580)]&&(t[e(596)]=h,console[e(483)]((new Date)[e(552)]()[e(559)](11,-1)+" kf at "+h+", playback at "+t[e(497)].videoElement[e(625)])),o}(t,i)<0?t[n(608)]=!0:function(t){const i=wr,e=t.config[i(689)];if(!e||e[i(501)][i(584)]<1||e[i(505)]||e[i(625)]<Er)return;const n=t[i(497)].mediaBufferMs;if(void 0===n||n<0)throw new b("targetLatency not set!");const r=e[i(501)][i(565)](e[i(501)][i(584)]-1),o=1e3*(r-e[i(625)])|0;if(!t[i(649)]&&function(t,i,e){const s=wr;let n;n=i<3*e>>>2?.875:i<=e?1:i<7*e>>>2?1.125:i<9*e>>>2?1.25:i<11*e>>>2?1.375:1.5,n!==t.playbackRate&&(t[s(606)]=n)}(e,o,n),!(o<n+50||o<5*n>>>2))if(t.lastKeyFrameTime>e[i(625)]+.1){const o=1e3*(r-t[i(596)])|0;o>40&&o>n-100?(s[i(600)]&&console.info((new Date).toISOString().slice(11,-1)+i(598)+(e[i(625)]+i(592)+t[i(596)]+" (")+(t.lastKeyFrameTime-e[i(625)])+")"),e[i(625)]=t[i(596)]):console[i(483)]((new Date)[i(552)]().slice(11,-1)+i(534)+o)}else!t[i(608)]&&Date[i(591)]()>t[i(571)]&&o>n+100&&o>3*n>>>1&&(s[i(600)]&&console[i(556)]((new Date).toISOString()[i(559)](11,-1)+i(490)+o+" ms)"),t[i(608)]=!0,t[i(509)]<16e3&&(t[i(509)]<<=1))}(t)),e?(!t[n(608)]||!Nr)&&(i[n(496)]=function(t){return!Hn&&function(){const t=Wn;Hn=new T([0,0,0,1,65,154,255,255]).buffer,Zn[t(303)](new T([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32])[t(306)]),Zn[t(303)](Zn[0][t(299)](0)),new T(Zn[1]).set([16,0,50],27)}(),t?Hn:(Xn^=1,Zn[Xn])}(t[n(608)]),e[n(632)](i)):t[n(608)]!=t[n(445)]&&(t.worker&&t[n(544)][n(660)](t[n(608)]),t[n(445)]=t[n(608)]),t[n(608)]}function Br(t,i){const e=mr();return(Br=function(t,i){return e[t-=445]})(t,i)}function Ur(t,i,e){const s=wr;return t[s(497)][s(463)]&&t[s(497)].audio[s(619)]!==s(670)?i[s(496)][s(523)]>0&&function(t,i){const e=wr;var s;if(!t.jmuxer||t[e(538)])return 0;0===t[e(650)]&&(t[e(650)]=i[e(667)]);const n=(i[e(667)]-t.audioStartTimestamp)/48e3;if("cbcs"===(null===(s=t.config[e(463)])||void 0===s?void 0:s[e(619)]))return t[e(664)][e(522)]({audio:new T(i[e(496)]),timestamp:n});const r=function(t){const i=Vn,e=new DataView(t.data),s=t.data[i(346)]-2,n=e.getUint16(s);if(n<s){let t=s-n;if(69!==e[i(337)](s-1))return console[i(341)](i(339)),null;if(e[i(337)](t++)>>>4!=1)return console[i(341)](i(329)),null;const r=new T(n-2);let o=0;for(;t<s-1;){const s=e[i(337)](t++);if(r[o++]=s,o>=16)break}return{sai:r,offset:s-n}}return null}(i);r?t[e(664)][e(522)]({audio:new T(i[e(496)],0,r[e(456)]),audioSampleAuxInfo:r[e(612)],timestamp:n}):console[e(511)]("SampleAuxInfo extraction failed (audio)")}(t,i):e&&e[s(632)](i),!1}function Qr(t){const i=wr;if(!t||typeof t!==i(692))throw new k("Invalid config argument type, DRM config must be an object.");if(!(t[i(689)]instanceof HTMLVideoElement))throw new k(i(633));if(t[i(628)]&&!(t.audioElement instanceof HTMLMediaElement))throw new k(i(693));if(void 0!==t[i(482)]&&!Number[i(555)](t[i(482)]))throw new k(i(460));let e=!1,n=!1,r=!1;const o=["cbcs",i(668),i(670)],h=["SW","HW"];for(const s of[t[i(471)],t[i(463)]])if(s){if(!o[i(557)](s[i(619)]))throw new RangeError("DRM config encryption value must be one of: "+o[i(593)](", "));if(yr&&"cenc"===s.encryption)throw new RangeError(i(688));if(s[i(619)]!==i(670)){if(n=!0,s.keyId){if(!(s[i(646)]instanceof T)||16!==s.keyId[i(584)])throw new k("DRM config keyId must be an instance of 16-byte long Uint8Array.");r=!0}else if(yr)throw new ReferenceError(i(655));if(s.iv&&(!(s.iv instanceof T)||16!==s.iv.length))throw new k(i(618));if(s[i(554)]&&!h[i(557)](s.robustness))throw new RangeError(i(658)+h[i(593)](", "));if(s===t[i(471)]&&s[i(484)]!==i(537))throw new RangeError(i(615));yr&&s===t.audio&&"opus"===s.codec&&(e=!0,console.warn("Safari does not support Opus, audio will not be rendered.")),"PlayReady"===t[i(580)]&&(s[i(619)]!==i(668)&&console[i(495)](i(491)+s[i(619)]+"', it's safer to use 'cbcs' instead."),void 0===t.sessionId||t.sessionId[i(557)]("f1")||console.warn(i(674)+t.sessionId+i(643)))}}if(n){const e=[Fn[i(558)],Fn.Staging,Fn[i(665)]];if(!e.includes(t[i(526)]))throw new RangeError(i(583)+e.join(", "));if(t[i(462)]&&typeof t[i(462)]!==i(533))throw new k("Invalid authToken type ("+typeof t[i(462)]+i(530));if(t.type)if(yr){if(t[i(580)]!==i(575))throw new RangeError(i(514)+t[i(580)]+"). Safari only supports FairPlay.")}else if(Mr){if(t.type!==i(459)&&"ClearKey"!==t[i(580)])throw new RangeError("Invalid DRM type ("+t.type+i(675))}else if(br&&t[i(580)]!==i(566)&&"Widevine"!==t[i(580)]&&"ClearKey"!==t[i(580)])throw new RangeError(i(514)+t.type+i(648))}void 0!==t.debugLog&&(s[i(600)]=t.debugLog),void 0!==t[i(446)]&&(s[i(517)]=t[i(446)]);let a=xr.get(t[i(689)]);!a&&(a=new Lr(t),xr[i(494)](t[i(689)],a)),a.enabled=n,a[i(538)]=e,a[i(649)]=!e&&a[i(497)][i(463)]&&a[i(497)].audio.encryption!==i(670),n&&(a[i(497)].type||(a[i(497)][i(580)]=i(yr?575:459)),r||a[i(497)][i(580)]===i(549)||(a[i(497)][i(580)]=i(549)),Rr(a),function(t){en(this,void 0,void 0,(function*(){const i=Br;var e,n;let r=t[i(497)][i(689)];if((!t[i(497)][i(471)]||t[i(497)][i(471)].encryption===i(670))&&(r=t[i(497)][i(628)]),!r)throw new b(i(492));r.src="",r[i(588)]=null,yield r.setMediaKeys(null);let o=null;try{o=yield Kl[i(528)](t[i(503)],t.emeConfig)}catch(t){}if(!o&&t[i(669)][0]){const s=null===(e=t[i(669)][0][i(647)])||void 0===e?void 0:e[i(553)](i(659));if(void 0!==s&&s>=0){null===(n=t.emeConfig[0].sessionTypes)||void 0===n||n[i(687)](s,1);try{o=yield Kl[i(528)](t[i(503)],t[i(669)])}catch(t){}}}if(!o){const e=i(576)+t[i(503)]+i(520);return r.dispatchEvent(new CustomEvent(i(640),{detail:{message:e}})),void console[i(511)](e)}let h=null;try{h=yield o.createMediaKeys()}catch(t){}if(!h){const e=i(540)+t[i(503)]+i(520);return r[i(453)](new CustomEvent("rtcdrmerror",{detail:{message:e}})),void console[i(511)](e)}if(t.serverCertificate)s.clRtcDrmDebugLog&&console[i(556)](i(487)+t[i(546)][i(523)]+i(464)),yield h[i(594)](t[i(546)]);else if(t.serverCertificateUrl){const e={method:i(469)},n=t.serverCertificateUrl;try{const o=yield t[i(497)].onFetch?t.config[i(645)](n,e):fetch(n,e);if(!o.ok){const t=i(601)+o[i(623)];return void r[i(453)](new CustomEvent(i(640),{detail:{message:t}}))}const a=yield o[i(457)]();s.clRtcDrmDebugLog&&console[i(556)]("Fetched certificate from "+n+", "+a[i(523)]+" bytes"),yield h[i(594)](a)}catch(t){const e=t.name+": "+t[i(622)];return console.error(e),void r[i(453)](new CustomEvent(i(640),{detail:{message:e}}))}}yield r[i(500)](h),r[i(519)]("encrypted",vr),Pr(t)}))}(a)),a[i(497)][i(689)][i(519)](i(448),(function(){const t=i;a[t(497)][t(689)][t(625)]>.5&&(a[t(571)]=Date.now())}))}const Fr=wr(582)+wr(587)+wr(548)+wr(653)+wr(590)+wr(620)+wr(614)+wr(504)+wr(518)+wr(452)+wr(642)+wr(686)+"meNeeded=$.data};";function Yr(t){const i=wr;if(0===xr[i(677)])throw new k(i(550));let e;if(t&&t[i(689)])e=t[i(689)];else{if(1!==xr.size)throw new k(i(510));e=xr[i(638)]()[i(447)]()[i(531)]}const s=xr[i(662)](e);if(!s){let t="";throw xr[i(499)](((i,e)=>{t+=e.id+", "})),t=t.slice(0,-2),new k(i(486)+e.id+i(657)+t+"]")}return s}function Vr(t,i){const e=wr;if(t&&t[e(497)][e(689)]){const s=t[e(497)][e(689)];if(s[e(501)].length>0){const t=s.buffered[e(565)](s[e(501)][e(584)]-1)-s[e(625)];i.playoutDelayHint=i.jitterBufferDelayHint=i.jitterBufferTarget=t}u(Vr,1e3,t,i)}}const Gr=at.get("View");Gr.setLevel(at.DEBUG);const Wr={metadata:!1,enableDRM:!1,disableVideo:!1,disableAudio:!1,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};t.Director=Ls,t.Logger=at,t.PeerConnection=rs,t.Publish=class extends Vs{async connect(t){void 0===t&&(t=Js);const i=Fs.object({sourceId:Fs.string(),stereo:Fs.boolean(),dtx:Fs.boolean(),absCaptureTime:Fs.boolean(),dependencyDescriptor:Fs.boolean(),mediaStream:Fs.alternatives().try(Fs.array().items(Fs.object()),Fs.object()),bandwidth:Fs.number(),metadata:Fs.boolean(),disableVideo:Fs.boolean(),disableAudio:Fs.boolean(),codec:Fs.string().valid(..._.values(Je)),simulcast:Fs.boolean(),scalabilityMode:Fs.string(),peerConfig:Fs.object(),record:Fs.boolean(),events:Fs.array().items(Fs.string().valid("active","inactive","viewercount")),priority:Fs.number()}),{error:e,value:s}=i.validate(t);e&&Ks.warn(e,s),this.options=g(d(d({},Js),t),{peerConfig:d(d({},Js.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.options.metadata=this.options.metadata&&this.options.codec===Je.H264&&!this.options.disableVideo,await this.initConnection({migrate:!1})}async reconnect(t){var i,e;this.options.mediaStream=null!=(e=null==(i=this.webRTCPeer)?void 0:i.getTracks())?e:this.options.mediaStream,super.reconnect(t)}async replaceConnection(){var t,i;Ks.info("Migrating current connection"),this.options.mediaStream=null!=(i=null==(t=this.webRTCPeer)?void 0:t.getTracks())?i:this.options.mediaStream,await this.initConnection({migrate:!0})}async record(){var t;this.recordingAvailable?(this.options.record=!0,await(null==(t=this.signaling)?void 0:t.cmd("record")),Ks.info("Broadcaster start recording")):Ks.error("Record not available")}async unrecord(){var t;this.recordingAvailable?(this.options.record=!1,await(null==(t=this.signaling)?void 0:t.cmd("unrecord")),Ks.info("Broadcaster stop recording")):Ks.error("Unrecord not available")}stop(){var t;super.stop(),null==(t=this.worker)||t.terminate(),this.worker=null}async initConnection(t){var i,e;let s,n;if(Ks.debug("Broadcast option values: ",this.options),this.stopReconnection=!1,!this.options.mediaStream)throw Ks.error("Error while broadcasting. MediaStream required"),new b("MediaStream required");if(!t.migrate&&this.isActive())throw Ks.warn("Broadcast currently working"),new b("Broadcast currently working");try{n=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==n?void 0:n.iceServers,this.options.peerConfig.encodedInsertableStreams=this.options.metadata}catch(t){throw Ks.error("Error generating token."),t instanceof Ns&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!n)throw Ks.error("Error while broadcasting. Publisher data required"),new b("Publisher data required");const r=zs(n.jwt);if(this.streamName=r.millicast.streamName,this.recordingAvailable=r[Us.atob("bWlsbGljYXN0")].record,this.options.record&&!this.recordingAvailable)throw Ks.error("Error while broadcasting. Record option detected but recording is not available"),new b("Record option detected but recording is not available");const o=new Ms({streamName:this.streamName,url:"".concat(n.urls[0],"?token=").concat(n.jwt)}),h=t.migrate?new rs:this.webRTCPeer;await h.createRTCPeer(this.options.peerConfig,is),null==(i=this.stopReemitingWebRTCPeerInstanceEvents)||i.call(this),null==(e=this.stopReemitingSignalingInstanceEvents)||e.call(this),this.stopReemitingWebRTCPeerInstanceEvents=Lt(h,this,[ss.connectionStateChange]),this.stopReemitingSignalingInstanceEvents=Lt(o,this,[bs]);const a=h.getRTCLocalSDP(this.options),u=o.connect();s=await Promise.all([a,u]);const c=s[0];this.options.metadata&&(this.worker||(this.worker=new qs),this.getRTCPeerConnection().getSenders().forEach((t=>{if(Zs)t.transform=new RTCRtpScriptTransform(this.worker,{name:"senderTransform",codec:this.options.codec});else if(Ws){const{readable:i,writable:e}=t.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-sender",codec:this.options.codec,readable:i,writable:e},[i,e])}})));let l=this.signaling;this.signaling=o;const d=this.signaling.publish(c,this.options),f=h.peer.setLocalDescription(h.sessionDescription);s=await Promise.all([d,f]);let g=s[0];!this.options.disableVideo&&this.options.bandwidth>0&&(g=h.updateBandwidthRestriction(g,this.options.bandwidth)),await h.setRTCRemoteSDP(g),Ks.info("Broadcasting to streamName: ",this.streamName);let _=this.webRTCPeer;this.webRTCPeer=h,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ss.connectionStateChange,(t=>{var i,e;["connected","disconnected","failed","closed"].includes(t)&&(null==(i=null==l?void 0:l.close)||i.call(l),null==(e=null==_?void 0:_.closeRTCPeer)||e.call(_),l=_=null)}))}sendMetadata(t,i){var e;if(void 0===i&&(i="d40e38ea-d419-4c62-94ed-20ac37b4e4fa"),null!=(e=this.options)&&e.metadata&&this.worker)this.worker.postMessage({action:"metadata-sei-user-data-unregistered",uuid:i,payload:t});else{let t="Could not send metadata due to:";this.options?this.options.metadata?this.worker||(t+="\n- Stream not being published."):(t+="\n- Metadata option is not enabled.",this.options.codec!==Je.H264&&(t+="\n- Incompatible codec. Only H264 available."),this.options.disableVideo&&(t+="\n- Video disabled.")):t+="\n- Stream not being published.",Ks.warn(t)}}constructor(t,i,e=!0){t&&Ks.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,i,Ks,e)}},t.Signaling=Ms,t.View=class extends Vs{async connect(t){void 0===t&&(t=Wr),this.options=g(d(d({},Wr),t),{peerConfig:d(d({},Wr.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.eventQueue.length=0,await this.initConnection({migrate:!1})}async select(t){void 0===t&&(t={}),Gr.debug("Viewer select layer values: ",t),await this.signaling.cmd("select",{layer:t}),Gr.info("Connected to streamName: ",this.streamName)}async addRemoteTrack(t,i){Gr.info("Viewer adding remote track",t);const e=await this.webRTCPeer.addRemoteTrack(t,i);for(const t of i)t.addTrack(e.receiver.track);return e}async project(t,i){for(const t of i){if(!t.trackId&&!t.media)throw Gr.error("Error in projection mapping, trackId or mediaId must be set"),new b("Error in projection mapping, trackId or mediaId must be set");const i=this.webRTCPeer.getRTCPeer();if(t.mediaId&&!i.getTransceivers().find((i=>i.mid===t.mediaId.toString())))throw Gr.error("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers")),new b("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers"))}Gr.debug("Viewer project source: layer mappings: ",t,i),await this.signaling.cmd("project",{sourceId:t,mapping:i}),Gr.info("Projection done")}async unproject(t){Gr.debug("Viewer unproject mediaIds: ",t),await this.signaling.cmd("unproject",{mediaIds:t}),Gr.info("Unprojection done")}async replaceConnection(){Gr.info("Migrating current connection"),await this.initConnection({migrate:!0})}stop(){var t,i;super.stop(),null==(t=this.drmOptionsMap)||t.clear(),this.DRMProfile=null,null==(i=this.worker)||i.terminate(),this.worker=null,this.payloadTypeCodec={},this.tracksMidValues={},this.eventQueue.length=0}async initConnection(t){var i;let e,s;if(Gr.debug("Viewer connect options values: ",this.options),this.stopReconnection=!1,!t.migrate&&this.isActive())throw Gr.warn("Viewer currently subscribed"),new b("Viewer currently subscribed");try{s=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==s?void 0:s.iceServers,this.options.peerConfig.encodedInsertableStreams=Ws&&(this.options.enableDRM||this.options.metadata)}catch(t){throw Gr.error("Error generating token."),t instanceof Ns&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!s)throw Gr.error("Error while subscribing. Subscriber data required"),new b("Subscriber data required");const n=zs(s.jwt);this.streamName=n.millicast.streamName;const r=new Ms({streamName:this.streamName,url:"".concat(s.urls[0],"?token=").concat(s.jwt)});s.subscriberToken&&(this.subscriberToken=s.subscriberToken);const o=t.migrate?new rs:this.webRTCPeer;await o.createRTCPeer(this.options.peerConfig),null==(i=this.stopReemitingWebRTCPeerInstanceEvents)||i.call(this),this.stopReemitingWebRTCPeerInstanceEvents=Lt(o,this,_.values(ss).filter((t=>t!==ss.track))),this.options.metadata&&(this.worker||(this.worker=new qs),this.worker.onmessage=t=>{if("metadata"===t.data.event){const i=new TextDecoder,e=t.data.metadata;if(e.mid=t.data.mid,e.track=this.tracksMidValues[t.data.mid],e.uuid){const t=e.uuid;e.uuid=t.reduce(((t,i)=>t+i.toString(16).padStart(2,"0")),""),e.uuid=e.uuid.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}if(e.timecode&&(e.timecode=new Date(i.decode(e.timecode))),e.unregistered){const t=i.decode(e.unregistered);try{const i=JSON.parse(t);e.unregistered=i}catch(t){Gr.info("The content could not be converted to JSON, returning raw bytes instead")}}this.emit("metadata",e),this.emit("onMetadata",e)}}),o.on(ss.track,(t=>{this.isMainStreamActive?this.onTrackEvent(t):this.eventQueue.push(t)})),r.on(bs,(async t=>{if(this.isMainStreamActive||"active"!==t.name)"inactive"===t.name&&this.isMainStreamActive&&this.mainSourceId===t.data.sourceId&&(this.isMainStreamActive=!1),this.emit(bs,t);else{if(this.mainSourceId=t.data.sourceId,!this.DRMProfile&&t.data.encryption){const t=await this.tokenGenerator();t.drmObject&&(this.DRMProfile=t.drmObject)}for(this.emit(bs,t),this.isMainStreamActive=!0;this.eventQueue.length>0;)this.onTrackEvent(this.eventQueue.shift())}}));const h=o.getRTCLocalSDP(g(d({},this.options),{stereo:!0})),a=r.connect();e=await Promise.all([h,a]);const c=e[0];let l=this.signaling;this.signaling=r;const f=this.signaling.subscribe(c,g(d({},this.options),{vad:this.options.multiplexedAudioTracks>0})),v=o.peer.setLocalDescription(o.sessionDescription);e=await Promise.all([f,v]);const w=e[0];this.payloadTypeCodec=qe.getCodecPayloadType(w),await o.setRTCRemoteSDP(w),Gr.info("Connected to streamName: ",this.streamName);let m=this.webRTCPeer;this.webRTCPeer=o,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ss.connectionStateChange,(t=>{var i,e;"connected"===t?u((()=>{var t,i;null==(t=null==l?void 0:l.close)||t.call(l),null==(i=null==m?void 0:m.closeRTCPeer)||i.call(m),l=m=null,Gr.info("Current connection migrated")}),1e3):["disconnected","failed","closed"].includes(t)&&(null==(i=null==l?void 0:l.close)||i.call(l),null==(e=null==m?void 0:m.closeRTCPeer)||e.call(m),l=m=null)}))}onTrackEvent(t){var i,e,n;if(this.tracksMidValues[null==(i=t.transceiver)?void 0:i.mid]=t.track,this.isDRMOn){const i=t.transceiver.mid,e=this.getDRMConfiguration(i);try{!function(t,i){const e=wr;var n,r;const o=t[e(629)][e(524)];"video"===o&&(t[e(661)][e(475)]=t[e(661)][e(451)]=t[e(661)][e(605)]=0);const h=Yr(i),a=h[e(497)].videoElement,u=h[e(497)][e(628)];if(h[e(607)]){if(h[e(497)].customTransform)s.clRtcDrmDebugLog&&console[e(556)](e(468)+e(572));else if(s[e(600)]&&console[e(556)](e(467)+(e(pr?589:609)+e(617))),pr){if(h[e(544)]=function(t){const i=wr,e=s[i(493)]||s[i(488)],n=s[i(666)],r=s[i(586)];if(!(e&&n&&r&&t))return null;const o=new n([t]);return new r(e[i(631)](o))}(Fr),null==h[e(544)])throw new b(e(539));h[e(544)][e(485)]=t=>{const i=e;t[i(496)][i(567)]===i(471)?zr(h,t[i(496)].frame,null):Ur(h,t[i(496)][i(651)],null)},t[e(661)].transform=new RTCRtpScriptTransform(h.worker,{operation:o})}else{const i=o===e(471)?zr:Ur,s={drm:h,transform:(t,e)=>{i(h,t,e)}},n=t.receiver.createEncodedStreams(),r=new TransformStream({transform:s.transform[e(656)](s)}),{readable:a,writable:u}=n;a[e(577)](r)[e(635)](u)}if("audio"===o&&(null===(n=h[e(497)][e(463)])||void 0===n?void 0:n.encryption)===e(670)){if(!u)return void console.warn(e(690));u[e(588)]!==t[e(481)][0]&&(u[e(588)]=t[e(481)][0]),h[e(497)].videoElement&&(t[e(661)][e(475)]=t[e(661)].jitterBufferDelayHint=t[e(661)][e(605)]=h[e(497)][e(482)],Vr(h,t[e(661)]))}else"video"===o&&"clear"===(null===(r=h.config[e(471)])||void 0===r?void 0:r[e(619)])&&a[e(588)]!==t[e(481)][0]&&(a.srcObject=t.streams[0])}else a[e(588)]!==t[e(481)][0]&&(a.srcObject=t[e(481)][0])}(t,e)}catch(t){Gr.error("Failed to apply DRM on media Id:",i,"error is: ",t),this.emit("error",new b("Failed to apply DRM on media Id: "+i+" error is: "+t))}this.worker||(this.worker=new qs),this.worker.addEventListener("message",(t=>{"complete"===t.data.event&&function(t,i,e){const s=wr,n=Yr(e);t[s(580)]?zr(n,t,i):Ur(n,t,i)}(t.data.frame,null,e)}))}if(this.options.metadata)if(Zs)t.receiver.transform=new RTCRtpScriptTransform(this.worker,{name:"receiverTransform",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(e=t.transceiver)?void 0:e.mid});else if(Ws){const{readable:i,writable:e}=t.receiver.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-receiver",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(n=t.transceiver)?void 0:n.mid,readable:i,writable:e},[i,e])}this.emit(ss.track,t)}getDRMConfiguration(t){return this.drmOptionsMap?this.drmOptionsMap.get(t):null}async onRtcDrmFetch(t,i){return i.headers||(i.headers=new Headers),i.headers.get("x-dt-custom-data")&&i.headers.delete("x-dt-custom-data"),this.subscriberToken?i.headers.append("Authorization","Bearer ".concat(this.subscriberToken)):Gr.warn("onRtcDrmFetch: no subscriberToken"),fetch(t,i)}configureDRM(t){if(!t)throw new b("Required DRM options is not provided");this.drmOptionsMap||(this.drmOptionsMap=new Map);const i={merchant:"dolby",environment:Fn.Production,customTransform:this.options.metadata,videoElement:t.videoElement,audioElement:t.audioElement,video:{codec:"H264",encryption:"cbcs",keyId:$s(t.videoEncryptionParams.keyId),iv:$s(t.videoEncryptionParams.iv)},audio:{codec:"opus",encryption:"clear"},onFetch:this.onRtcDrmFetch.bind(this)};t.mediaBufferMs&&(i.mediaBufferMs=t.mediaBufferMs),this.DRMProfile&&(this.DRMProfile.playReadyUrl&&(i.prLicenseUrl=this.DRMProfile.playReadyUrl),this.DRMProfile.widevineUrl&&(i.wvLicenseUrl=this.DRMProfile.widevineUrl),this.DRMProfile.fairPlayUrl&&(i.fpsLicenseUrl=this.DRMProfile.fairPlayUrl),this.DRMProfile.fairPlayCertUrl&&(i.fpsCertificateUrl=this.DRMProfile.fairPlayCertUrl));try{Qr(i),this.drmOptionsMap.set(t.videoMid,i),t.audioMid&&this.drmOptionsMap.set(t.audioMid,i),i.videoElement.addEventListener("rtcdrmerror",(t=>{Gr.error("DRM error: ",t.detail.message,"in video element:",i.videoElement.id),this.emit("error",new b(t.detail.message))}))}catch(i){Gr.error("Failed to configure DRM with options:",t,"error is:",i)}}removeDRMConfiguration(t){var i;null==(i=this.drmOptionsMap)||i.delete(t)}get isDRMOn(){return!!this.drmOptionsMap&&this.drmOptionsMap.size>0}exchangeDRMConfiguration(t,i){const e=this.getDRMConfiguration(t),s=this.getDRMConfiguration(i);if(null===e)throw new b("No DRM configuration found for "+t);if(null===s)throw new b("No DRM configuration found for "+i);tn(e.video,s.video,"keyId"),tn(e.video,s.video,"iv");try{Qr(e)}catch(t){Gr.error("Failed to configure DRM with options:",e,"error is:",t)}try{Qr(s)}catch(t){Gr.error("Failed to configure DRM with options:",s,"error is:",t)}}constructor(t,i,e=null,s=!0){t&&Gr.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,i,Gr,s),this.payloadTypeCodec={},this.tracksMidValues={},this.drmOptionsMap=null,this.eventQueue=[],this.isMainStreamActive=!1,e&&(this.on(ss.track,(t=>{e.srcObject=t.streams[0]})),Gr.warn("The mediaElement property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, do this in either the `track` or the `active` broadcast event."))}},_.defineProperty(t,Bo.toStringTag,{value:"Module"})},"object"==typeof t&&typeof i<"u"?n(t):"function"==typeof define&&define.amd?define(["exports"],n):n((e=typeof globalThis<"u"?globalThis:e||self).millicast={})})),md=Ui((t=>{"use strict";function i(){const t=wd();return i=function(){return t},t}r(),_.defineProperty(t,"__esModule",{value:!0}),function(t,i){for(var e in i)_.defineProperty(t,e,{enumerable:!0,get:i[e]})}(t,{Director:function(){return i().Director},View:function(){return i().View}})})),pd=Ui(((t,i)=>{r(),i.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Ad=Ui(((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],o=e+e,h=s+s,a=n+n,u=e*o,c=s*o,l=s*h,d=n*o,f=n*h,g=n*a,_=r*o,v=r*h,w=r*a;return t[0]=1-l-g,t[1]=c+w,t[2]=d-v,t[3]=0,t[4]=c-w,t[5]=1-u-g,t[6]=f+_,t[7]=0,t[8]=d+v,t[9]=f-_,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),yd=Ui(((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,o=e[0],h=e[1],a=e[2],u=x.sqrt(o*o+h*h+a*a);if(x.abs(u)<1e-6)return null;return o*=u=1/u,h*=u,a*=u,s=x.sin(i),n=x.cos(i),r=1-n,t[0]=o*o*r+n,t[1]=h*o*r+a*s,t[2]=a*o*r-h*s,t[3]=0,t[4]=o*h*r-a*s,t[5]=h*h*r+n,t[6]=a*h*r+o*s,t[7]=0,t[8]=o*a*r+h*s,t[9]=h*a*r-o*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),bd=Ui(((t,i)=>{r(),i.exports=function(t,i){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}})),Md=Ui(((t,i)=>{r(),i.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Td=Ui(((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],o=i[4],h=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],g=i[12],_=i[13],v=i[14],w=i[15],m=e*h-s*o,p=e*a-n*o,A=e*u-r*o,y=s*a-n*h,b=s*u-r*h,M=n*u-r*a,T=c*_-l*g,S=c*v-d*g,N=c*w-f*g,I=l*v-d*_,D=l*w-f*_,E=d*w-f*v,k=m*E-p*D+A*I+y*N-b*S+M*T;if(!k)return null;return k=1/k,t[0]=(h*E-a*D+u*I)*k,t[1]=(n*D-s*E-r*I)*k,t[2]=(_*M-v*b+w*y)*k,t[3]=(d*b-l*M-f*y)*k,t[4]=(a*N-o*E-u*S)*k,t[5]=(e*E-n*N+r*S)*k,t[6]=(v*A-g*M-w*p)*k,t[7]=(c*M-d*A+f*p)*k,t[8]=(o*D-h*N+u*T)*k,t[9]=(s*N-e*D-r*T)*k,t[10]=(g*b-_*A+w*m)*k,t[11]=(l*A-c*b-f*m)*k,t[12]=(h*S-o*I-a*T)*k,t[13]=(e*I-s*S+n*T)*k,t[14]=(_*p-g*y-v*m)*k,t[15]=(c*y-l*p+d*m)*k,t}})),Sd=Ui(((t,i)=>{r(),i.exports=function(t,i,e){var s=i[0],n=i[1],r=i[2],o=i[3],h=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],g=i[11],_=i[12],v=i[13],w=i[14],m=i[15],p=e[0],A=e[1],y=e[2],b=e[3];return t[0]=p*s+A*h+y*l+b*_,t[1]=p*n+A*a+y*d+b*v,t[2]=p*r+A*u+y*f+b*w,t[3]=p*o+A*c+y*g+b*m,p=e[4],A=e[5],y=e[6],b=e[7],t[4]=p*s+A*h+y*l+b*_,t[5]=p*n+A*a+y*d+b*v,t[6]=p*r+A*u+y*f+b*w,t[7]=p*o+A*c+y*g+b*m,p=e[8],A=e[9],y=e[10],b=e[11],t[8]=p*s+A*h+y*l+b*_,t[9]=p*n+A*a+y*d+b*v,t[10]=p*r+A*u+y*f+b*w,t[11]=p*o+A*c+y*g+b*m,p=e[12],A=e[13],y=e[14],b=e[15],t[12]=p*s+A*h+y*l+b*_,t[13]=p*n+A*a+y*d+b*v,t[14]=p*r+A*u+y*f+b*w,t[15]=p*o+A*c+y*g+b*m,t}})),Nd=Ui(((t,i)=>{r(),i.exports=function(t,i,e,s,n){var r=1/x.tan(i/2),o=1/(s-n);return t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*o,t[15]=0,t}})),Id=Ui(((t,i)=>{r(),i.exports=function(t,i,e,s){var n,r,o,h,a,u,c,l,d,f,g,_,v,w,m,p,A,y,b,M,T,S,N,I,D=s[0],E=s[1],k=s[2],L=x.sqrt(D*D+E*E+k*k);if(x.abs(L)<1e-6)return null;D*=L=1/L,E*=L,k*=L,n=x.sin(e),r=x.cos(e),o=1-r,h=i[0],a=i[1],u=i[2],c=i[3],l=i[4],d=i[5],f=i[6],g=i[7],_=i[8],v=i[9],w=i[10],m=i[11],p=D*D*o+r,A=E*D*o+k*n,y=k*D*o-E*n,b=D*E*o-k*n,M=E*E*o+r,T=k*E*o+D*n,S=D*k*o+E*n,N=E*k*o-D*n,I=k*k*o+r,t[0]=h*p+l*A+_*y,t[1]=a*p+d*A+v*y,t[2]=u*p+f*A+w*y,t[3]=c*p+g*A+m*y,t[4]=h*b+l*M+_*T,t[5]=a*b+d*M+v*T,t[6]=u*b+f*M+w*T,t[7]=c*b+g*M+m*T,t[8]=h*S+l*N+_*I,t[9]=a*S+d*N+v*I,t[10]=u*S+f*N+w*I,t[11]=c*S+g*N+m*I,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]);return t}})),Dd=Ui(((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,o,h,a,u,c,l,d,f,g,_=e[0],v=e[1],w=e[2];i===t?(t[12]=i[0]*_+i[4]*v+i[8]*w+i[12],t[13]=i[1]*_+i[5]*v+i[9]*w+i[13],t[14]=i[2]*_+i[6]*v+i[10]*w+i[14],t[15]=i[3]*_+i[7]*v+i[11]*w+i[15]):(s=i[0],n=i[1],r=i[2],o=i[3],h=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],g=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=h,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=g,t[12]=s*_+h*v+l*w+i[12],t[13]=n*_+a*v+d*w+i[13],t[14]=r*_+u*v+f*w+i[14],t[15]=o*_+c*v+g*w+i[15]);return t}})),Ed=Ui((t=>{"use strict";r(),t._=function(t){return t&&t.__esModule?t:{default:t}}})),kd=Ui(((t,i)=>{var e,n;r(),e=t,n=function(){"use strict";var t,i=void 0!==s?s:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=function(){return/Android/i.test(Kl.userAgent)||/iPhone|iPad|iPod/i.test(Kl.userAgent)},n=function(t,i){for(var e=0,s=t.length;e<s;e++)i[e]=t[e]},r=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},o=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),a=function(t,i){if(Array.isArray(t))return t;if(f in _(t))return function(t,i){var e=[],s=!0,n=!1,r=void 0;try{for(var o,h=t[f]();!(s=(o=h.next()).done)&&(e.push(o.value),!i||e.length!==i);s=!0);}catch(t){n=!0,r=t}finally{try{!s&&h.return&&h.return()}finally{if(n)throw r}}return e}(t,i);throw new k("Invalid attempt to destructure non-iterable instance")},l=function(t,i,e){return t+(i-t)*e},d=(t=/iPad|iPhone|iPod/.test(Kl.platform),function(){return t}),g=function(){var t=-1!==Kl.userAgent.indexOf("Version")&&-1!==Kl.userAgent.indexOf("Android")&&-1!==Kl.userAgent.indexOf("Chrome");return function(){return t}}(),v=(/^((?!chrome|android).)*safari/i.test(Kl.userAgent),function(){var t=-1!==Kl.userAgent.indexOf("Firefox")&&-1!==Kl.userAgent.indexOf("Android");return function(){return t}}()),w=function(){var t=Kl.userAgent.match(/.*Chrome\/([0-9]+)/),i=t?C(t[1],10):null;return function(){return i}}(),m=function(){var t=!1;if(65===w()){var i=Kl.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(i){var e=i[1].split("."),s=a(e,4),n=(s[0],s[1],s[2]),r=s[3];t=3325===C(n,10)&&C(r,10)<148}}return function(){return t}}(),p=function(){var t=-1!==Kl.userAgent.indexOf("R7 Build");return function(){return t}}(),A=function(){var t=90==s.orientation||-90==s.orientation;return p()?!t:t},y=function(){return x.max(s.screen.width,s.screen.height)*s.devicePixelRatio},M=function(){return x.min(s.screen.width,s.screen.height)*s.devicePixelRatio},T=function(){if(h.exitFullscreen)h.exitFullscreen();else if(h.webkitExitFullscreen)h.webkitExitFullscreen();else if(h.mozCancelFullScreen)h.mozCancelFullScreen();else{if(!h.msExitFullscreen)return!1;h.msExitFullscreen()}return!0},N=function(t,i,e,s){var n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,i),t.compileShader(n);var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e),t.compileShader(r);var o=t.createProgram();for(var h in t.attachShader(o,n),t.attachShader(o,r),s)t.bindAttribLocation(o,s[h],h);return t.linkProgram(o),t.deleteShader(n),t.deleteShader(r),o},I=function(t,i){for(var e={},s=t.getProgramParameter(i,t.ACTIVE_UNIFORMS),n="",r=0;r<s;r++)e[n=t.getActiveUniform(i,r).name.replace("[0]","")]=t.getUniformLocation(i,n);return e},D=function(){var t,i=!1;return t=Kl.userAgent||Kl.vendor||s.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(i=!0),i},E=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},L=[],O=function(t){if(d()){R(t);var i,e,n=t.style.width,r=t.style.height,o=t.offsetWidth+1,h=t.offsetHeight;t.style.width=o+"px",t.style.height=h+"px";var a=function(){s.cancelAnimationFrame(e);for(var o=0;o<L.length;o++)if(L[o]===i){t.style.width=n,t.style.height=r,L.splice(o,1);break}};i={Ow:t,Rw:a},L.push(i),e=s.requestAnimationFrame(a)}},R=function(t){if(d())for(var i=0;i<L.length;i++)if(L[i].Ow===t){L[i].Rw();break}},P=function(){var t=x.PI/180,i=.25*x.PI,e=new Float32Array([0,0,0,1]),s=new Float32Array([0,0,0]);function n(n,r,o,h,a,u){!function(e,s,n,r){var o=x.tan(s?s.upDegrees*t:i),h=x.tan(s?s.downDegrees*t:i),a=x.tan(s?s.leftDegrees*t:i),u=x.tan(s?s.rightDegrees*t:i),c=2/(a+u),l=2/(o+h);e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-u)*c*.5,e[9]=(o-h)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0}(n,h||null,u.depthNear,u.depthFar),function(t,i,e){var s=i[0],n=i[1],r=i[2],o=i[3],h=s+s,a=n+n,u=r+r,c=s*h,l=s*a,d=s*u,f=n*a,g=n*u,_=r*u,v=o*h,w=o*a,m=o*u;t[0]=1-(f+_),t[1]=l+m,t[2]=d-w,t[3]=0,t[4]=l-m,t[5]=1-(c+_),t[6]=g+v,t[7]=0,t[8]=d+w,t[9]=g-v,t[10]=1-(c+f),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1}(r,o.orientation||e,o.position||s),a&&function(t,i,e){var s,n,r,o,h,a,u,c,l,d,f,g,_=e[0],v=e[1],w=e[2];i===t?(t[12]=i[0]*_+i[4]*v+i[8]*w+i[12],t[13]=i[1]*_+i[5]*v+i[9]*w+i[13],t[14]=i[2]*_+i[6]*v+i[10]*w+i[14],t[15]=i[3]*_+i[7]*v+i[11]*w+i[15]):(s=i[0],n=i[1],r=i[2],o=i[3],h=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],g=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=h,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=g,t[12]=s*_+h*v+l*w+i[12],t[13]=n*_+a*v+d*w+i[13],t[14]=r*_+u*v+f*w+i[14],t[15]=o*_+c*v+g*w+i[15])}(r,r,a),function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],o=i[4],h=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],g=i[12],_=i[13],v=i[14],w=i[15],m=e*h-s*o,p=e*a-n*o,A=e*u-r*o,y=s*a-n*h,b=s*u-r*h,M=n*u-r*a,T=c*_-l*g,S=c*v-d*g,N=c*w-f*g,I=l*v-d*_,D=l*w-f*_,E=d*w-f*v,k=m*E-p*D+A*I+y*N-b*S+M*T;k&&(k=1/k,t[0]=(h*E-a*D+u*I)*k,t[1]=(n*D-s*E-r*I)*k,t[2]=(_*M-v*b+w*y)*k,t[3]=(d*b-l*M-f*y)*k,t[4]=(a*N-o*E-u*S)*k,t[5]=(e*E-n*N+r*S)*k,t[6]=(v*A-g*M-w*p)*k,t[7]=(c*M-d*A+f*p)*k,t[8]=(o*D-h*N+u*T)*k,t[9]=(s*N-e*D-r*T)*k,t[10]=(g*b-_*A+w*m)*k,t[11]=(l*A-c*b-f*m)*k,t[12]=(h*S-o*I-a*T)*k,t[13]=(e*I-s*S+n*T)*k,t[14]=(_*p-g*y-v*m)*k,t[15]=(c*y-l*p+d*m)*k)}(r,r)}return function(t,i,e){return!(!t||!i||(t.pose=i,t.timestamp=i.timestamp,n(t.leftProjectionMatrix,t.leftViewMatrix,i,e.Pw("left"),e.zw("left"),e),n(t.rightProjectionMatrix,t.rightViewMatrix,i,e.Pw("right"),e.zw("right"),e),0))}}(),z=function(t){var i,e=t.indexOf("://");i=-1!==e?e+3:0;var s=t.indexOf("/",i);return-1===s&&(s=t.length),t.substring(0,s)},B=function(){var t={};return function(i,e){void 0===t[i]&&(console.warn("webvr-polyfill: "+e),t[i]=!0)}}(),U=function(t,i){B(t,t+" has been deprecated. This may not work on native WebVR displays. "+(i?"Please use "+i+" instead.":""))},Q=function(t,i,e){if(i){for(var s=[],n=null,r=0;r<i.length;++r)switch(o=i[r]){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),s.push(null,null);break}n||(n=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(a),s.push(t.getParameter(o),null);break;case t.ACTIVE_TEXTURE:n=t.getParameter(t.ACTIVE_TEXTURE),s.push(null);break;default:s.push(t.getParameter(o))}for(e(t),r=0;r<i.length;++r){var o=i[r],h=s[r];switch(o){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,h);break;case t.COLOR_CLEAR_VALUE:t.clearColor(h[0],h[1],h[2],h[3]);break;case t.COLOR_WRITEMASK:t.colorMask(h[0],h[1],h[2],h[3]);break;case t.CURRENT_PROGRAM:t.useProgram(h);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,h);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,h);break;case t.TEXTURE_BINDING_2D:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_2D,h);break;case t.TEXTURE_BINDING_CUBE_MAP:var a;if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_CUBE_MAP,h);break;case t.VIEWPORT:t.viewport(h[0],h[1],h[2],h[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:h?t.enable(o):t.disable(o);break;default:console.log("No GL restore behavior for 0x"+o.toString(16))}n&&t.activeTexture(n)}}else e(t)},F=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),Y=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function V(t,i,e,s){this.gl=t,this.cardboardUI=i,this.bufferScale=e,this.dirtySubmitFrameBindings=s,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,d()||(this.realCanvasWidth=_.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=_.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=N(t,F,Y,this.attribs),this.uniforms=I(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize()}V.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},V.prototype.onResize=function(){var t=this.gl,i=this,e=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];Q(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.framebuffer),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.texImage2D(t.TEXTURE_2D,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,i.bufferWidth,i.bufferHeight,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i.renderTarget,0),i.ctxAttribs.depth&&i.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i.depthStencilBuffer)):i.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i.depthBuffer)):i.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,i.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),i.realClearColor.apply(t,i.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},V.prototype.patch=function(){if(!this.isPatched){var t=this,i=this.gl.canvas,e=this.gl;d()||(i.width=y()*this.bufferScale,i.height=M()*this.bufferScale,_.defineProperty(i,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(e){t.bufferWidth=e,t.realCanvasWidth.set.call(i,e),t.onResize()}}),_.defineProperty(i,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(e){t.bufferHeight=e,t.realCanvasHeight.set.call(i,e),t.onResize()}})),this.lastBoundFramebuffer=e.getParameter(e.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(i,s){t.lastBoundFramebuffer=s||t.framebuffer,t.realBindFramebuffer.call(e,i,t.lastBoundFramebuffer)},this.cullFace=e.getParameter(e.CULL_FACE),this.depthTest=e.getParameter(e.DEPTH_TEST),this.blend=e.getParameter(e.BLEND),this.scissorTest=e.getParameter(e.SCISSOR_TEST),this.stencilTest=e.getParameter(e.STENCIL_TEST),e.enable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!0;break;case e.DEPTH_TEST:t.depthTest=!0;break;case e.BLEND:t.blend=!0;break;case e.SCISSOR_TEST:t.scissorTest=!0;break;case e.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(e,i)},e.disable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!1;break;case e.DEPTH_TEST:t.depthTest=!1;break;case e.BLEND:t.blend=!1;break;case e.SCISSOR_TEST:t.scissorTest=!1;break;case e.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(e,i)},this.colorMask=e.getParameter(e.COLOR_WRITEMASK),e.colorMask=function(i,s,n,r){t.colorMask[0]=i,t.colorMask[1]=s,t.colorMask[2]=n,t.colorMask[3]=r,t.realColorMask.call(e,i,s,n,r)},this.clearColor=e.getParameter(e.COLOR_CLEAR_VALUE),e.clearColor=function(i,s,n,r){t.clearColor[0]=i,t.clearColor[1]=s,t.clearColor[2]=n,t.clearColor[3]=r,t.realClearColor.call(e,i,s,n,r)},this.viewport=e.getParameter(e.VIEWPORT),e.viewport=function(i,s,n,r){t.viewport[0]=i,t.viewport[1]=s,t.viewport[2]=n,t.viewport[3]=r,t.realViewport.call(e,i,s,n,r)},this.isPatched=!0,O(i)}},V.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,i=this.gl.canvas;d()||(_.defineProperty(i,"width",this.realCanvasWidth),_.defineProperty(i,"height",this.realCanvasHeight)),i.width=this.bufferWidth,i.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,u((function(){O(i)}),1)}},V.prototype.setTextureBounds=function(t,i){t||(t=[0,0,.5,1]),i||(i=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=i[0],this.viewportOffsetScale[5]=i[1],this.viewportOffsetScale[6]=i[2],this.viewportOffsetScale[7]=i[3]},V.prototype.submitFrame=function(){var t=this.gl,i=this,e=[];if(this.dirtySubmitFrameBindings||e.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),Q(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.cullFace&&i.realDisable.call(t,t.CULL_FACE),i.depthTest&&i.realDisable.call(t,t.DEPTH_TEST),i.blend&&i.realDisable.call(t,t.BLEND),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realDisable.call(t,t.STENCIL_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(i.ctxAttribs.alpha||d())&&(i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(i.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.enableVertexAttribArray(i.attribs.position),t.enableVertexAttribArray(i.attribs.texCoord),t.vertexAttribPointer(i.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(i.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(i.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.uniform4fv(i.uniforms.viewportOffsetScale,i.viewportOffsetScale),t.drawElements(t.TRIANGLES,i.indexCount,t.UNSIGNED_SHORT,0),i.cardboardUI&&i.cardboardUI.renderNoState(),i.realBindFramebuffer.call(i.gl,t.FRAMEBUFFER,i.framebuffer),i.ctxAttribs.preserveDrawingBuffer||(i.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),i.dirtySubmitFrameBindings||i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.cullFace&&i.realEnable.call(t,t.CULL_FACE),i.depthTest&&i.realEnable.call(t,t.DEPTH_TEST),i.blend&&i.realEnable.call(t,t.BLEND),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realEnable.call(t,t.STENCIL_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),!i.ctxAttribs.alpha&&i.ctxAttribs.preserveDrawingBuffer||i.realClearColor.apply(t,i.clearColor)})),d()){var s=t.canvas;s.width==i.bufferWidth&&s.height==i.bufferHeight||(i.bufferWidth=s.width,i.bufferHeight=s.height,i.onResize())}},V.prototype.updateDeviceInfo=function(t){var i=this.gl,e=this,s=[i.ARRAY_BUFFER_BINDING,i.ELEMENT_ARRAY_BUFFER_BINDING];Q(i,s,(function(i){var s=e.Bw(e.meshWidth,e.meshHeight,t);if(i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,s,i.STATIC_DRAW),!e.indexCount){var n=e.Uw(e.meshWidth,e.meshHeight);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n,i.STATIC_DRAW),e.indexCount=n.length}}))},V.prototype.Bw=function(t,i,e){for(var s=new Float32Array(2*t*i*5),n=e.getLeftEyeVisibleTanAngles(),r=e.getLeftEyeNoLensTanAngles(),o=e.getLeftEyeVisibleScreenRect(r),h=0,a=0;a<2;a++){for(var u=0;u<i;u++)for(var c=0;c<t;c++,h++){var d=c/(t-1),f=u/(i-1),g=d,_=f,v=l(n[0],n[2],d),w=l(n[3],n[1],f),m=x.sqrt(v*v+w*w),p=e.distortion.distortInverse(m),A=w*p/m;d=(v*p/m-r[0])/(r[2]-r[0]),f=(A-r[3])/(r[1]-r[3]),d=2*(o.x+d*o.width-.5),f=2*(o.y+f*o.height-.5),s[5*h+0]=d,s[5*h+1]=f,s[5*h+2]=g,s[5*h+3]=_,s[5*h+4]=a}var y=n[2]-n[0];n[0]=-(y+n[0]),n[2]=y-n[2],y=r[2]-r[0],r[0]=-(y+r[0]),r[2]=y-r[2],o.x=1-(o.x+o.width)}return s},V.prototype.Uw=function(t,i){for(var e=new Uint16Array(2*(t-1)*(i-1)*6),s=t/2,n=i/2,r=0,o=0,h=0;h<2;h++)for(var a=0;a<i;a++)for(var u=0;u<t;u++,r++)0!=u&&0!=a&&(u<=s==a<=n?(e[o++]=r,e[o++]=r-t-1,e[o++]=r-t,e[o++]=r-t-1,e[o++]=r,e[o++]=r-1):(e[o++]=r-1,e[o++]=r-t,e[o++]=r,e[o++]=r-t,e[o++]=r-1,e[o++]=r-t-1));return e},V.prototype.Qw=function(t,i){var e=_.getOwnPropertyDescriptor(t,i);return void 0!==e.get&&void 0!==e.set||(e.configurable=!0,e.enumerable=!0,e.get=function(){return this.getAttribute(i)},e.set=function(t){this.setAttribute(i,t)}),e};var G=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),W=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),Z=x.PI/180,H=.3125,X=28;function q(t){this.gl=t,this.attribs={position:0},this.program=N(t,G,W,this.attribs),this.uniforms=I(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function K(t){this.coefficients=t}q.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},q.prototype.listen=function(t,i){var e=this.gl.canvas,s="undefined"!=typeof TouchEvent;this.listener=function(n){var r=e.clientWidth/2,o=s&&n instanceof TouchEvent?(n.preventDefault(),n.changedTouches[0]):n;o.clientX>r-42&&o.clientX<r+42&&o.clientY>e.clientHeight-42?(n.preventDefault(),n.stopImmediatePropagation(),t(n)):o.clientX<42&&o.clientY<42&&(n.preventDefault(),n.stopImmediatePropagation(),i(n))},e.addEventListener("click",this.listener,!1),e.addEventListener("touchstart",this.listener,!1)},q.prototype.onResize=function(){var t=this.gl,i=this,e=[t.ARRAY_BUFFER_BINDING];Q(t,e,(function(t){var e=[],n=t.drawingBufferWidth/2,r=x.max(screen.width,screen.height)*s.devicePixelRatio,o=t.drawingBufferWidth/r*s.devicePixelRatio,h=4*o/2,a=42*o,u=X*o/2,c=14*o;function l(t,i){var s=(90-t)*Z,r=x.cos(s),o=x.sin(s);e.push(H*r*u+n,H*o*u+u),e.push(i*r*u+n,i*o*u+u)}e.push(n-h,a),e.push(n-h,t.drawingBufferHeight),e.push(n+h,a),e.push(n+h,t.drawingBufferHeight),i.gearOffset=e.length/2;for(var d=0;d<=6;d++){var f=60*d;l(f,1),l(f+12,1),l(f+20,.75),l(f+40,.75),l(f+48,1)}function g(i,s){e.push(c+i,t.drawingBufferHeight-c-s)}i.gearVertexCount=e.length/2-i.gearOffset,i.arrowOffset=e.length/2;var _=h/x.sin(45*Z);g(0,u),g(u,0),g(u+_,_),g(_,u+_),g(_,u-_),g(0,u),g(u,2*u),g(u+_,2*u-_),g(_,u-_),g(0,u),g(_,u-h),g(X*o,u-h),g(_,u+h),g(X*o,u+h),i.arrowVertexCount=e.length/2-i.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)}))},q.prototype.render=function(){var t=this.gl,i=this,e=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];Q(t,e,(function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.renderNoState()}))},q.prototype.renderNoState=function(){var t,i,e,s,n,r,o,h,a,u,c=this.gl;c.useProgram(this.program),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.enableVertexAttribArray(this.attribs.position),c.vertexAttribPointer(this.attribs.position,2,c.FLOAT,!1,8,0),c.uniform4f(this.uniforms.color,1,1,1,1),t=this.projMat,i=0,e=c.drawingBufferWidth,s=0,n=c.drawingBufferHeight,h=1/(i-e),a=1/(s-n),u=1/((r=.1)-(o=1024)),t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(i+e)*h,t[13]=(n+s)*a,t[14]=(o+r)*u,t[15]=1,c.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.drawArrays(c.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),c.drawArrays(c.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},K.prototype.distortInverse=function(t){for(var i=0,e=1,s=t-this.distort(i);x.abs(e-i)>1e-4;){var n=t-this.distort(e),r=e-n*((e-i)/(n-s));i=e,e=r,s=n}return e},K.prototype.distort=function(t){for(var i=t*t,e=0,s=0;s<this.coefficients.length;s++)e=i*(e+this.coefficients[s]);return(e+1)*t};var J=x.PI/180,$=180/x.PI,tt=function(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0};tt.prototype={constructor:tt,set:function(t,i,e){return this.x=t,this.y=i,this.z=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var i=1/t;this.multiplyScalar(i)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,o=t.z,h=t.w,a=h*i+r*s-o*e,u=h*e+o*i-n*s,c=h*s+n*e-r*i,l=-n*i-r*e-o*s;return this.x=a*h+l*-n+u*-o-c*-r,this.y=u*h+l*-r+c*-n-a*-o,this.z=c*h+l*-o+a*-r-u*-n,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,i){var e=t.x,s=t.y,n=t.z,r=i.x,o=i.y,h=i.z;return this.x=s*h-n*o,this.y=n*r-e*h,this.z=e*o-s*r,this}};var it=function(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1};function et(t){this.width=t.width||y(),this.height=t.height||M(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}it.prototype={constructor:it,set:function(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,i,e){var s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),o=x.sin(t/2),h=x.sin(i/2),a=x.sin(e/2);return this.x=o*n*r+s*h*a,this.y=s*h*r-o*n*a,this.z=s*n*a+o*h*r,this.w=s*n*r-o*h*a,this},setFromEulerYXZ:function(t,i,e){var s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),o=x.sin(t/2),h=x.sin(i/2),a=x.sin(e/2);return this.x=o*n*r+s*h*a,this.y=s*h*r-o*n*a,this.z=s*n*a-o*h*r,this.w=s*n*r+o*h*a,this},setFromAxisAngle:function(t,i){var e=i/2,s=x.sin(e);return this.x=t.x*s,this.y=t.y*s,this.z=t.z*s,this.w=x.cos(e),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var e=t.x,s=t.y,n=t.z,r=t.w,o=i.x,h=i.y,a=i.z,u=i.w;return this.x=e*u+r*o+s*a-n*h,this.y=s*u+r*h+n*o-e*a,this.z=n*u+r*a+e*h-s*o,this.w=r*u-e*o-s*h-n*a,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var e=this.x,s=this.y,n=this.z,r=this.w,o=r*t.w+e*t.x+s*t.y+n*t.z;if(o<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,o=-o):this.copy(t),o>=1)return this.w=r,this.x=e,this.y=s,this.z=n,this;var h=x.acos(o),a=x.sqrt(1-o*o);if(x.abs(a)<.001)return this.w=.5*(r+this.w),this.x=.5*(e+this.x),this.y=.5*(s+this.y),this.z=.5*(n+this.z),this;var u=x.sin((1-i)*h)/a,c=x.sin(i*h)/a;return this.w=r*u+this.w*c,this.x=e*u+this.x*c,this.y=s*u+this.y*c,this.z=n*u+this.z*c,this},setFromUnitVectors:function(){var t,i;return function(e,s){return void 0===t&&(t=new tt),(i=e.dot(s)+1)<1e-6?(i=0,x.abs(e.x)>x.abs(e.z)?t.set(-e.y,e.x,0):t.set(0,-e.z,e.y)):t.crossVectors(e,s),this.x=t.x,this.y=t.y,this.z=t.z,this.w=i,this.normalize(),this}}()};var st=new et({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),nt=new et({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),rt={CardboardV1:new ht({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new ht({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function ot(t){this.viewer=rt.CardboardV2,this.updateDeviceParams(t),this.distortion=new K(this.viewer.distortionCoefficients)}function ht(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}ot.prototype.updateDeviceParams=function(t){this.device=this.Fw(t)||this.device},ot.prototype.getDevice=function(){return this.device},ot.prototype.setViewer=function(t){this.viewer=t,this.distortion=new K(this.viewer.distortionCoefficients)},ot.prototype.Fw=function(t){if(!t)return d()?(console.warn("Using fallback iOS device measurements."),nt):(console.warn("Using fallback Android device measurements."),st);var i=.0254,e=i/t.xdpi,s=i/t.ydpi;return new et({widthMeters:e*y(),heightMeters:s*M(),bevelMeters:.001*t.bevelMm})},ot.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=(i.widthMeters-t.interLensDistance)/2,r=t.interLensDistance/2,o=t.baselineLensDistance-i.bevelMeters,h=i.heightMeters-o,a=$*x.atan(e.distort(n/s)),u=$*x.atan(e.distort(r/s)),c=$*x.atan(e.distort(o/s)),l=$*x.atan(e.distort(h/s));return{leftDegrees:x.min(a,t.fov),rightDegrees:x.min(u,t.fov),downDegrees:x.min(c,t.fov),upDegrees:x.min(l,t.fov)}},ot.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=x.tan(-J*t.fov),n=x.tan(J*t.fov),r=x.tan(J*t.fov),o=x.tan(-J*t.fov),h=i.widthMeters/4,a=i.heightMeters/2,u=t.baselineLensDistance-i.bevelMeters-a,c=t.interLensDistance/2-h,l=-u,d=t.screenLensDistance,f=e.distort((c-h)/d),g=e.distort((l+a)/d),_=e.distort((c+h)/d),v=e.distort((l-a)/d),w=new Float32Array(4);return w[0]=x.max(s,f),w[1]=x.min(n,g),w[2]=x.min(r,_),w[3]=x.max(o,v),w},ot.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=new Float32Array(4),n=e.distortInverse(x.tan(-J*t.fov)),r=e.distortInverse(x.tan(J*t.fov)),o=e.distortInverse(x.tan(J*t.fov)),h=e.distortInverse(x.tan(-J*t.fov)),a=i.widthMeters/4,u=i.heightMeters/2,c=t.baselineLensDistance-i.bevelMeters-u,l=t.interLensDistance/2-a,d=-c,f=t.screenLensDistance,g=(l-a)/f,_=(d+u)/f,v=(l+a)/f,w=(d-u)/f;return s[0]=x.max(n,g),s[1]=x.min(r,_),s[2]=x.min(o,v),s[3]=x.max(h,w),s},ot.prototype.getLeftEyeVisibleScreenRect=function(t){var i=this.viewer,e=this.device,s=i.screenLensDistance,n=(e.widthMeters-i.interLensDistance)/2,r=i.baselineLensDistance-e.bevelMeters,o=(t[0]*s+n)/e.widthMeters,h=(t[1]*s+r)/e.heightMeters,a=(t[2]*s+n)/e.widthMeters,u=(t[3]*s+r)/e.heightMeters;return{x:o,y:u,width:a-o,height:h-u}},ot.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},ot.prototype.getFieldOfViewRightEye=function(t){var i=this.getFieldOfViewLeftEye(t);return{leftDegrees:i.rightDegrees,rightDegrees:i.leftDegrees,upDegrees:i.upDegrees,downDegrees:i.downDegrees}},ot.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.Yw();return{leftDegrees:$*x.atan(t.outerDist),rightDegrees:$*x.atan(t.innerDist),downDegrees:$*x.atan(t.bottomDist),upDegrees:$*x.atan(t.topDist)}},ot.prototype.getUndistortedViewportLeftEye=function(){var t=this.Yw(),i=this.viewer,e=this.device,s=i.screenLensDistance,n=e.widthMeters/s,r=e.heightMeters/s,o=e.width/n,h=e.height/r,a=x.round((t.eyePosX-t.outerDist)*o),u=x.round((t.eyePosY-t.bottomDist)*h);return{x:a,y:u,width:x.round((t.eyePosX+t.innerDist)*o)-a,height:x.round((t.eyePosY+t.topDist)*h)-u}},ot.prototype.Yw=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=t.interLensDistance/2/s,r=i.widthMeters/s,o=i.heightMeters/s,h=r/2-n,a=(t.baselineLensDistance-i.bevelMeters)/s,u=t.fov,c=e.distortInverse(x.tan(J*u)),l=x.min(h,c),d=x.min(n,c),f=x.min(a,c);return{outerDist:l,innerDist:d,topDist:x.min(o-a,c),bottomDist:f,eyePosX:h,eyePosY:a}},ot.Viewers=rt;var at={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function ut(t,i){if(this.dpdb=at,this.Vw(),t){this.onDeviceParamsUpdated=i;var e=new $l,s=this;e.open("GET",t,!0),e.addEventListener("load",(function(){s.loading=!1,e.status>=200&&e.status<=299?(s.dpdb=JSON.parse(e.response),s.Vw()):console.error("Error loading online DPDB!")})),e.send()}}function ct(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}function lt(t,i){this.set(t,i)}function dt(t,i){this.kFilter=t,this.isDebug=i,this.currentAccelMeasurement=new lt,this.currentGyroMeasurement=new lt,this.previousGyroMeasurement=new lt,d()?this.filterQ=new it(-1,0,0,1):this.filterQ=new it(1,0,0,1),this.previousFilterQ=new it,this.previousFilterQ.copy(this.filterQ),this.accelQ=new it,this.isOrientationInitialized=!1,this.estimatedGravity=new tt,this.measuredGravity=new tt,this.gyroIntegralQ=new it}function ft(t,i){this.predictionTimeS=t,this.isDebug=i,this.previousQ=new it,this.previousTimestampS=null,this.deltaQ=new it,this.outQ=new it}function gt(t,i,e,n){this.yawOnly=e,this.accelerometer=new tt,this.gyroscope=new tt,this.filter=new dt(t,n),this.posePredictor=new ft(i,n),this.isFirefoxAndroid=v(),this.isIOS=d();var r=w();this.isDeviceMotionInRadians=!this.isIOS&&r&&r<66,this.isWithoutDeviceMotion=m(),this.filterToWorldQ=new it,d()?this.filterToWorldQ.setFromAxisAngle(new tt(1,0,0),x.PI/2):this.filterToWorldQ.setFromAxisAngle(new tt(1,0,0),-x.PI/2),this.inverseWorldToScreenQ=new it,this.worldToScreenQ=new it,this.originalPoseAdjustQ=new it,this.originalPoseAdjustQ.setFromAxisAngle(new tt(0,0,1),-s.orientation*x.PI/180),this.Gw(),A()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new it,this.Ww=new Float32Array(4),this.start()}ut.prototype.getDeviceParams=function(){return this.deviceParams},ut.prototype.Vw=function(){var t=this.Zw();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},ut.prototype.Zw=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var i=Kl.userAgent||Kl.vendor||s.opera,e=y(),n=M();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var r=null,o=1/0,h=0;h<t.devices.length;h++){var a=t.devices[h];if(a.rules)if("ios"==a.type||"android"==a.type){if(d()==("ios"==a.type)){for(var u=!1,c=0;c<a.rules.length;c++){var l=a.rules[c],f=this.Hw(l,i,e,n);if(!0===f){o=f,r=a,u=!0;break}!1!==f&&f<o&&(o=f,r=a)}if(u)break}}else console.warn("Device["+h+"] has invalid type.");else console.warn("Device["+h+"] has no rules section.")}return r?new ct({xdpi:r.dpi[0]||r.dpi,ydpi:r.dpi[1]||r.dpi,bevelMm:r.bw}):(console.warn("No DPDB device match."),null)},ut.prototype.Hw=function(t,i,e,s){if(!t.ua&&!t.res)return!1;if(t.ua&&i.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var n=t.res[0],r=t.res[1],o=x.min(e,s)-x.min(n,r),h=x.max(e,s)-x.max(n,r),a=x.abs(o)+x.abs(h);if(a>0)return a}return!0},lt.prototype.set=function(t,i){this.sample=t,this.timestampS=i},lt.prototype.copy=function(t){this.set(t.sample,t.timestampS)},dt.prototype.addAccelMeasurement=function(t,i){this.currentAccelMeasurement.set(t,i)},dt.prototype.addGyroMeasurement=function(t,i){this.currentGyroMeasurement.set(t,i),function(t){return!(j(t)||t<=.001||t>1)}(i-this.previousGyroMeasurement.timestampS)&&this.Xw(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},dt.prototype.Xw=function(){if(!this.isOrientationInitialized)return this.accelQ=this.qw(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,i=this.Kw(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(i),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(i);var e=new it;e.copy(this.filterQ),e.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(e),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var s=new it;s.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),s.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",$*function(t){return t.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*x.acos(t.w)}(s),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var n=new it;n.copy(this.filterQ),n.multiply(s),this.filterQ.slerp(n,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},dt.prototype.getOrientation=function(){return this.filterQ},dt.prototype.qw=function(t){var i=new tt;i.copy(t),i.normalize();var e=new it;return e.setFromUnitVectors(new tt(0,0,-1),i),e.inverse(),e},dt.prototype.Kw=function(t,i){var e=new it,s=new tt;return s.copy(t),s.normalize(),e.setFromAxisAngle(s,t.length()*i),e},ft.prototype.getPrediction=function(t,i,e){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=e,t;var s=new tt;s.copy(i),s.normalize();var n=i.length();if(n<20*J)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",($*n).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var r=n*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(s,r),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=e,this.outQ},gt.prototype.getPosition=function(){return null},gt.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this.Jw)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(i=(new it).setFromAxisAngle(new tt(0,0,-1),0),e=new it,-90===s.orientation?e.setFromAxisAngle(new tt(0,1,0),x.PI/-2):e.setFromAxisAngle(new tt(0,1,0),x.PI/2),i.multiply(e)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var t=new it;return t.setFromAxisAngle(new tt(1,0,0),-x.PI/2),t}(),t=this.Jw,(n=new it).copy(t),n.multiply(this.deviceOrientationFilterToWorldQ),n.multiply(this.resetQ),n.multiply(this.worldToScreenQ),n.multiplyQuaternions(this.deviceOrientationFixQ,n),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.Ww[0]=n.x,this.Ww[1]=n.y,this.Ww[2]=n.z,this.Ww[3]=n.w,this.Ww;var i,e,n,r=this.filter.getOrientation();return t=this.posePredictor.getPrediction(r,this.gyroscope,this.previousTimestampS),(n=new it).copy(this.filterToWorldQ),n.multiply(this.resetQ),n.multiply(t),n.multiply(this.worldToScreenQ),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.Ww[0]=n.x,this.Ww[1]=n.y,this.Ww[2]=n.z,this.Ww[3]=n.w,this.Ww},gt.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),A()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},gt.prototype.$w=function(t){this.Jw=this.Jw||new it;var i=t.alpha,e=t.beta,s=t.gamma;i=(i||0)*x.PI/180,e=(e||0)*x.PI/180,s=(s||0)*x.PI/180,this.Jw.setFromEulerYXZ(e,i,-s)},gt.prototype.im=function(t){this.nm(t)},gt.prototype.nm=function(t){var i=t.accelerationIncludingGravity,e=t.rotationRate,s=t.timeStamp/1e3,n=s-this.previousTimestampS;return n<0?(B("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=s)):n<=.001||n>1?(B("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=s)):(this.accelerometer.set(-i.x,-i.y,-i.z),p()?this.gyroscope.set(-e.beta,e.alpha,e.gamma):this.gyroscope.set(e.alpha,e.beta,e.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(x.PI/180),this.filter.addAccelMeasurement(this.accelerometer,s),this.filter.addGyroMeasurement(this.gyroscope,s),void(this.previousTimestampS=s))},gt.prototype.hm=function(t){this.Gw()},gt.prototype.um=function(t){var i=t.data;i&&i.type&&"devicemotion"===i.type.toLowerCase()&&this.nm(i.deviceMotionEvent)},gt.prototype.Gw=function(){switch(this.worldToScreenQ.set(0,0,0,1),s.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new tt(0,0,1),-x.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new tt(0,0,1),x.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},gt.prototype.start=function(){var t,i,e;this.lm=this.im.bind(this),this.dm=this.hm.bind(this),this.fm=this.um.bind(this),this.gm=this.$w.bind(this),d()&&(t=s.self!==s.top,i=z(h.referrer),e=z(s.location.href),t&&i!==e)&&s.addEventListener("message",this.fm),s.addEventListener("orientationchange",this.dm),this.isWithoutDeviceMotion?s.addEventListener("deviceorientation",this.gm):s.addEventListener("devicemotion",this.lm)},gt.prototype.stop=function(){s.removeEventListener("devicemotion",this.lm),s.removeEventListener("deviceorientation",this.gm),s.removeEventListener("orientationchange",this.dm),s.removeEventListener("message",this.fm)};var _t=new tt(1,0,0),vt=new tt(0,0,1),wt={};screen.orientation?wt=screen.orientation:screen.msOrientation?wt=screen.msOrientation:_.defineProperty(wt,"angle",{get:function(){return s.orientation||0}});var mt=new it;mt.setFromAxisAngle(_t,-x.PI/2),mt.multiply((new it).setFromAxisAngle(vt,x.PI/2));var pt=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new k("Cannot call a class as a function")}(this,t),this.config=i,this.sensor=null,this.fusionSensor=null,this._m=new Float32Array(4),this.api=null,this.errors=[],this.vm=new it,this.wm=new it,this.pm=new it,this.Am=this.Am.bind(this),this.ym=this.ym.bind(this),this.Mm=this.Mm.bind(this),this.Mm(),this.init()}return o(t,[{key:"init",value:function(){var t=null;try{(t=new RelativeOrientationSensor({frequency:60})).addEventListener("error",this.ym)}catch(t){this.errors.push(t),"SecurityError"===t.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===t.name?this.useDeviceMotion():console.error(t)}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this.Am),this.sensor.start()),s.addEventListener("orientationchange",this.Mm)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new gt(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._m[0]=this._m[1]=this._m[2]=0,this._m[3]=1,this._m;var t=this.sensor.quaternion;this.vm.set(t[0],t[1],t[2],t[3]);var i=this.pm;return i.copy(mt),i.multiply(this.vm),i.multiply(this.wm),this.config.YAW_ONLY&&(i.x=i.z=0,i.normalize()),this._m[0]=i.x,this._m[1]=i.y,this._m[2]=i.z,this._m[3]=i.w,this._m}},{key:"ym",value:function(t){this.errors.push(t.error),"NotAllowedError"===t.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===t.error.name?console.error("Sensor could not be read"):console.error(t.error)}},{key:"Am",value:function(){}},{key:"Mm",value:function(){var t=-wt.angle*x.PI/180;this.wm.setFromAxisAngle(vt,t)}}]),t}();function At(){this.Tm();var t=h.createElement("div");(r=t.style).position="fixed",r.top=0,r.right=0,r.bottom=0,r.left=0,r.backgroundColor="gray",r.fontFamily="sans-serif",r.zIndex=1e6;var i=h.createElement("img");i.src=this.icon,(r=i.style).marginLeft="25%",r.marginTop="25%",r.width="50%",t.appendChild(i);var e=h.createElement("div");(r=e.style).textAlign="center",r.fontSize="16px",r.lineHeight="24px",r.margin="24px 25%",r.width="50%",e.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(e);var s=h.createElement("div");(r=s.style).backgroundColor="#CFD8DC",r.position="fixed",r.bottom=0,r.width="100%",r.height="48px",r.padding="14px 24px",r.boxSizing="border-box",r.color="#656A6B",t.appendChild(s);var n=h.createElement("div");n.style.float="left",n.innerHTML="No Cardboard viewer?";var r,o=h.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="Vu",(r=o.style).float="right",r.fontWeight=600,r.textTransform="uppercase",r.borderLeft="1px solid gray",r.paddingLeft="24px",r.textDecoration="none",r.color="#656A6B",s.appendChild(n),s.appendChild(o),this.overlay=t,this.text=e,this.hide()}At.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):h.body.appendChild(this.overlay),this.overlay.style.display="block";var i=this.overlay.querySelector("img").style;A()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},At.prototype.hide=function(){this.overlay.style.display="none"},At.prototype.showTemporarily=function(t,i){this.show(i),this.timer=u(this.hide.bind(this),t)},At.prototype.disableShowTemporarily=function(){c(this.timer)},At.prototype.update=function(){this.disableShowTemporarily(),!A()&&D()?this.show():this.hide()},At.prototype.Tm=function(){this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"};var yt="CardboardV1",bt="WEBVR_CARDBOARD_VIEWER";function Mt(){try{this.selectedKey=localStorage.getItem(bt)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=yt),this.dialog=this.Sm(ot.Viewers),this.root=null,this.Nm=[]}Mt.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},Mt.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Mt.prototype.getCurrentViewer=function(){return ot.Viewers[this.selectedKey]},Mt.prototype.Im=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},Mt.prototype.onChange=function(t){this.Nm.push(t)},Mt.prototype.Dm=function(t){for(var i=0;i<this.Nm.length;i++)this.Nm[i](t)},Mt.prototype.Em=function(){if(this.selectedKey=this.Im(),this.selectedKey&&ot.Viewers[this.selectedKey]){this.Dm(ot.Viewers[this.selectedKey]);try{localStorage.setItem(bt,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},Mt.prototype.Sm=function(t){var i=h.createElement("div");i.classList.add("webvr-polyfill-viewer-selector"),i.style.display="none";var e=h.createElement("div");(n=e.style).position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",e.addEventListener("click",this.hide.bind(this));var s=h.createElement("div"),n=s.style;for(var r in n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",s.appendChild(this.Lm("Select your viewer")),t)s.appendChild(this.xm(r,t[r].label));return s.appendChild(this.Cm("Save",this.Em.bind(this))),i.appendChild(e),i.appendChild(s),i},Mt.prototype.Lm=function(t){var i=h.createElement("h1"),e=i.style;return e.color="black",e.fontSize="20px",e.fontWeight="bold",e.marginTop=0,e.marginBottom="24px",i.innerHTML=t,i},Mt.prototype.xm=function(t,i){var e=h.createElement("div");e.style.marginTop="8px",e.style.color="black";var s=h.createElement("input");s.style.fontSize="30px",s.setAttribute("id",t),s.setAttribute("type","radio"),s.setAttribute("value",t),s.setAttribute("name","field");var n=h.createElement("label");return n.style.marginLeft="4px",n.setAttribute("for",t),n.innerHTML=i,e.appendChild(s),e.appendChild(n),e},Mt.prototype.Cm=function(t,i){var e=h.createElement("button");e.innerHTML=t;var s=e.style;return s.float="right",s.textTransform="uppercase",s.color="#1094f7",s.fontSize="14px",s.letterSpacing=0,s.border=0,s.background="none",s.marginTop="16px",e.addEventListener("click",i),e},void 0!==s||("undefined"!=typeof global?global:"undefined"!=typeof self&&self);var Tt=function(t,i){return t(i={exports:{}},i.exports),i.exports}((function(t,i){var e;e=function(){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||_.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return _.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),r=e(1),o=void 0!==Kl&&S((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(Kl.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!s.MSStream,a=function(){function t(){!function(t,i){if(!(t instanceof i))throw new k("Cannot call a class as a function")}(this,t),o?this.noSleepTimer=null:(this.noSleepVideo=h.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",function(t){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=x.random())}.bind(this)))}return n(t,[{key:"enable",value:function(){o?(this.disable(),this.noSleepTimer=s.setInterval((function(){s.location.href="/",s.setTimeout(s.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){o?this.noSleepTimer&&(s.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),t}();t.exports=a},function(t,i,e){t.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},t.exports=e()})),St=function(t){return t&&t.__esModule?t.default:t}(Tt),Nt=1e3,It=[0,0,.5,1],Dt=[.5,0,.5,1],Et=s.requestAnimationFrame,kt=s.cancelAnimationFrame;function Lt(t){_.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:t.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:t.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:t.canPresent},maxLayers:{writable:!1,enumerable:!0,value:t.maxLayers},hasOrientation:{enumerable:!0,get:function(){return U("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),t.hasOrientation}}})}function xt(t){var i=!("wakelock"in(t=t||{}))||t.wakelock;this.isPolyfilled=!0,this.displayId=Nt++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,_.defineProperty(this,"isConnected",{get:function(){return U("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new Lt({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.jm=!1,this.Om=null,this.Rm=null,this.Pm=null,this.zm=null,this.Bm=null,this.Um=null,this.Qm=null,this.Fm=null,i&&D()&&(this.Ym=new St)}xt.prototype.getFrameData=function(t){return P(t,this.Vm(),this)},xt.prototype.getPose=function(){return U("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this.Vm()},xt.prototype.resetPose=function(){return U("VRDisplay.prototype.resetPose"),this.Gm()},xt.prototype.getImmediatePose=function(){return U("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this.Vm()},xt.prototype.requestAnimationFrame=function(t){return Et(t)},xt.prototype.cancelAnimationFrame=function(t){return kt(t)},xt.prototype.wrapForFullscreen=function(t){if(d())return t;if(!this.zm){this.zm=h.createElement("div");var i=["height: "+x.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.zm.setAttribute("style",i.join("; ")+";"),this.zm.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.Pm==t)return this.zm;if(this.Pm&&(this.Rm?this.Rm.appendChild(this.Pm):this.Pm.parentElement.removeChild(this.Pm)),this.Pm=t,this.Rm=t.parentElement,this.Rm||h.body.appendChild(t),!this.zm.parentElement){var e=this.Pm.parentElement;e.insertBefore(this.zm,this.Pm),e.removeChild(this.Pm)}this.zm.insertBefore(this.Pm,this.zm.firstChild),this.Bm=this.Pm.getAttribute("style");var s=this;return function(){if(s.Pm){var t=["position: absolute","top: 0","left: 0","width: "+x.max(screen.width,screen.height)+"px","height: "+x.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];s.Pm.setAttribute("style",t.join("; ")+";")}}(),this.zm},xt.prototype.removeFullscreenWrapper=function(){if(this.Pm){var t=this.Pm;this.Bm?t.setAttribute("style",this.Bm):t.removeAttribute("style"),this.Pm=null,this.Bm=null;var i=this.zm.parentElement;return this.zm.removeChild(t),this.Rm===i?i.insertBefore(t,this.zm):this.Rm&&this.Rm.appendChild(t),i.removeChild(this.zm),t}},xt.prototype.requestPresent=function(t){var i=this.isPresenting,e=this;return t instanceof Array||(U("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),t=[t]),new Promise((function(s,n){if(e.capabilities.canPresent)if(0==t.length||t.length>e.capabilities.maxLayers)n(new b("Invalid number of layers."));else{var r=t[0];if(r.source){var o=r.leftBounds||It,a=r.rightBounds||Dt;if(i){var u=e.Om;u.source!==r.source&&(u.source=r.source);for(var c=0;c<4;c++)u.leftBounds[c]=o[c],u.rightBounds[c]=a[c];return e.wrapForFullscreen(e.Om.source),e.Wm(),void s()}if(e.Om={predistorted:r.predistorted,source:r.source,leftBounds:o.slice(0),rightBounds:a.slice(0)},e.jm=!1,e.Om&&e.Om.source){var l=e.wrapForFullscreen(e.Om.source);e.Zm(l,(function(){var t=h.fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement;e.isPresenting=l===t,e.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(t){console.error("screen.orientation.lock() failed due to",t.message)})),e.jm=!1,e.Hm(),s()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.disableWakeLock(),e.Xm(),e.removeFullscreenWrapper(),e.qm()),e.Km()}),(function(){e.jm&&(e.removeFullscreenWrapper(),e.qm(),e.disableWakeLock(),e.jm=!1,e.isPresenting=!1,n(new b("Unable to present.")))})),function(t){if(h.fullscreenEnabled&&t.requestFullscreen)t.requestFullscreen();else if(h.webkitFullscreenEnabled&&t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(h.mozFullScreenEnabled&&t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!h.msFullscreenEnabled||!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0}(l)?(e.enableWakeLock(),e.jm=!0):(d()||g())&&(e.enableWakeLock(),e.isPresenting=!0,e.Hm(),e.Km(),s())}e.jm||d()||(T(),n(new b("Unable to present.")))}else s()}else n(new b("VRDisplay is not capable of presenting."))}))},xt.prototype.exitPresent=function(){var t=this.isPresenting,i=this;return this.isPresenting=!1,this.Om=null,this.disableWakeLock(),new Promise((function(e,s){t?(T(),i.Xm(),i.removeFullscreenWrapper(),i.qm(),i.Km(),e()):s(new b("Was not presenting to VRDisplay."))}))},xt.prototype.getLayers=function(){return this.Om?[this.Om]:[]},xt.prototype.Km=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});s.dispatchEvent(t)},xt.prototype.Jm=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});s.dispatchEvent(t)},xt.prototype.Zm=function(t,i,e){this.qm(),this.Um=t,this.Qm=i,this.Fm=e,i&&(h.fullscreenEnabled?t.addEventListener("fullscreenchange",i,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",i,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenchange",i,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",i,!1)),e&&(h.fullscreenEnabled?t.addEventListener("fullscreenerror",e,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",e,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenerror",e,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",e,!1))},xt.prototype.qm=function(){if(this.Um){var t=this.Um;if(this.Qm){var i=this.Qm;t.removeEventListener("fullscreenchange",i,!1),t.removeEventListener("webkitfullscreenchange",i,!1),h.removeEventListener("mozfullscreenchange",i,!1),t.removeEventListener("msfullscreenchange",i,!1)}if(this.Fm){var e=this.Fm;t.removeEventListener("fullscreenerror",e,!1),t.removeEventListener("webkitfullscreenerror",e,!1),h.removeEventListener("mozfullscreenerror",e,!1),t.removeEventListener("msfullscreenerror",e,!1)}this.Um=null,this.Qm=null,this.Fm=null}},xt.prototype.enableWakeLock=function(){this.Ym&&this.Ym.enable()},xt.prototype.disableWakeLock=function(){this.Ym&&this.Ym.disable()},xt.prototype.Hm=function(){},xt.prototype.Xm=function(){},xt.prototype.submitFrame=function(t){},xt.prototype.getEyeParameters=function(t){return null};var Ct={MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},jt="left",Ot="right";function Rt(t){var i=E({},Ct);t=E(i,t||{}),xt.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new Lt({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.$m=this.config.BUFFER_SCALE,this.tp=new pt(this.config),this.ep=null,this.sp=null,this.Ow=null,this.np=null,this.rp=new ut(this.config.DPDB_URL,this.op.bind(this)),this.hp=new ot(this.rp.getDeviceParams()),this.ap=new Mt,this.ap.onChange(this.cp.bind(this)),this.hp.setViewer(this.ap.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.lp=new At),d()&&s.addEventListener("resize",this.dp.bind(this))}Rt.prototype=_.create(xt.prototype),Rt.prototype.Vm=function(){return{position:null,orientation:this.tp.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Rt.prototype.Gm=function(){this.tp.resetPose&&this.tp.resetPose()},Rt.prototype.Pw=function(t){var i;if(t==jt)i=this.hp.getFieldOfViewLeftEye();else{if(t!=Ot)return console.error("Invalid eye provided: %s",t),null;i=this.hp.getFieldOfViewRightEye()}return i},Rt.prototype.zw=function(t){var i;if(t==jt)i=[.5*-this.hp.viewer.interLensDistance,0,0];else{if(t!=Ot)return console.error("Invalid eye provided: %s",t),null;i=[.5*this.hp.viewer.interLensDistance,0,0]}return i},Rt.prototype.getEyeParameters=function(t){var i=this.zw(t),e=this.Pw(t),s={offset:i,renderWidth:.5*this.hp.device.width*this.$m,renderHeight:this.hp.device.height*this.$m};return _.defineProperty(s,"fieldOfView",{enumerable:!0,get:function(){return U("VRFieldOfView","VRFrameData's projection matrices"),e}}),s},Rt.prototype.op=function(t){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.hp.updateDeviceParams(t),this.ep&&this.ep.updateDeviceInfo(this.hp)},Rt.prototype.fp=function(){this.Om&&this.ep&&(this.Om.leftBounds||this.Om.rightBounds)&&this.ep.setTextureBounds(this.Om.leftBounds,this.Om.rightBounds)},Rt.prototype.Hm=function(){var t=this.Om.source.getContext("webgl");if(t||(t=this.Om.source.getContext("experimental-webgl")),t||(t=this.Om.source.getContext("webgl2")),t){if(this.Ow=t.canvas,this.np=t.canvas.getAttribute("style"),this.Om.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=y()*this.$m,t.canvas.height=M()*this.$m,this.sp=new q(t)):(this.config.CARDBOARD_UI_DISABLED||(this.sp=new q(t)),this.ep=new V(t,this.sp,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.ep.updateDeviceInfo(this.hp)),this.sp&&this.sp.listen(function(t){this.ap.show(this.Om.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.lp){var i=this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT;A()&&D()&&i?this.lp.showTemporarily(i,this.Om.source.parentElement):this.lp.update()}this.orientationHandler=this.hm.bind(this),s.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.fp.bind(this),s.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.dp(),this.gp()}},Rt.prototype.Xm=function(){this.ep&&(this.ep.destroy(),this.ep=null),this.sp&&(this.sp.destroy(),this.sp=null),this.lp&&this.lp.hide(),this.ap.hide(),this.Ow&&(R(this.Ow),this.np?this.Ow.setAttribute("style",this.np):this.Ow.removeAttribute("style"),O(this.Ow),this.Ow=null,this.np=null),s.removeEventListener("orientationchange",this.orientationHandler),s.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Rt.prototype.Wm=function(){this.Xm(),this.Hm()},Rt.prototype.submitFrame=function(t){if(this.ep)this.fp(),this.ep.submitFrame();else if(this.sp&&this.Om){var i=this.Om.source.getContext("webgl").canvas;i.width==this.lastWidth&&i.height==this.lastHeight||this.sp.onResize(),this.lastWidth=i.width,this.lastHeight=i.height,this.sp.render()}},Rt.prototype.hm=function(t){this.ap.hide(),this.lp&&this.lp.update(),this.dp()},Rt.prototype.dp=function(t){if(this.Om){var i=this.Om.source.getContext("webgl");R(i.canvas),i.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),O(i.canvas)}},Rt.prototype.cp=function(t){this.hp.setViewer(t),this.ep&&this.ep.updateDeviceInfo(this.hp),this.gp()},Rt.prototype.gp=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.hp}});s.dispatchEvent(t)},Rt.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},Rt.VRDisplay=xt;var Pt={PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function zt(t){this.config=r(r({},Pt),t),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in Kl,this.native={},this.native.getVRDisplays=Kl.getVRDisplays,this.native.VRFrameData=s.VRFrameData,this.native.VRDisplay=s.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&e())&&(this.enable(),this.getVRDisplays().then((function(t){t&&t[0]&&t[0].Jm&&t[0].Jm()})))}zt.prototype.getPolyfillDisplays=function(){if(this._p)return this.polyfillDisplays;if(e()){var t=new Rt({MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(t)}return this._p=!0,this.polyfillDisplays},zt.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,i=new this.native.VRFrameData,e=this.native.VRDisplay.prototype.getFrameData;s.VRDisplay.prototype.getFrameData=function(s){s instanceof t?e.call(this,s):(e.call(this,i),s.pose=i.pose,n(i.leftProjectionMatrix,s.leftProjectionMatrix),n(i.rightProjectionMatrix,s.rightProjectionMatrix),n(i.leftViewMatrix,s.leftViewMatrix),n(i.rightViewMatrix,s.rightViewMatrix))}}Kl.getVRDisplays=this.getVRDisplays.bind(this),s.VRDisplay=Rt.VRDisplay,s.VRFrameData=Rt.VRFrameData},zt.prototype.getVRDisplays=function(){var t,i=this,e=this.config;return this.hasNative?function(t){return Promise.race?Promise.race(t):new Promise((function(i,e){for(var s=0;s<t.length;s++)t[s].then(i,e)}))}([this.native.getVRDisplays.call(Kl),new Promise((function(i){t=u((function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),i([])}),e.GET_VR_DISPLAYS_TIMEOUT)}))]).then((function(e){return c(t),e.length>0?e:i.getPolyfillDisplays()})):Promise.resolve(this.getPolyfillDisplays())},zt.version="0.10.5-opentelly.3",zt.VRFrameData=Rt.VRFrameData,zt.VRDisplay=Rt.VRDisplay;var Bt=_.freeze({default:zt}),Ut=Bt&&zt||Bt;return void 0!==i&&i.window&&(i.document||(i.document=i.window.document),i.navigator||(i.navigator=i.window.navigator)),Ut},"object"==typeof t&&void 0!==i?i.exports=n():"function"==typeof define&&define.amd?define(n):e.WebVRPolyfill=n()})),Ld=Ui((t=>{"use strict";function i(){const t=Ed();return i=function(){return t},t}function e(){const t=i()._(kd());return e=function(){return t},t}r(),_.defineProperty(t,"__esModule",{value:!0}),_.defineProperty(t,"installWebVRPolyfill",{enumerable:!0,get:function(){return h}});var s=(Uc(),cd(dd)),n=(bs(),cd(gd)),o={TOUCH_PANNER_DISABLED:!0,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:0,MOBILE_WAKE_LOCK:!s.browserDetection.Sg&&!s.browserDetection.Ka,DPDB_URL:void 0},h=(0,n.lazyConstant)((()=>{new(e().default)(o)}))}));r();var d,vt=((d={})[d.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",d[d.LICENSE_ERROR=2e3]="LICENSE_ERROR",d[d.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",d[d.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",d[d.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",d[d.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",d[d.SOURCE_INVALID=3e3]="SOURCE_INVALID",d[d.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",d[d.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",d[d.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",d[d.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",d[d.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",d[d.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",d[d.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",d[d.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",d[d.MEDIA_ABORTED=5004]="MEDIA_ABORTED",d[d.NETWORK_ERROR=6e3]="NETWORK_ERROR",d[d.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",d[d.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",d[d.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",d[d.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",d[d.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",d[d.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",d[d.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",d[d.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",d[d.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",d[d.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",d[d.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",d[d.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",d[d.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",d[d.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",d[d.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",d[d.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",d[d.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",d[d.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",d[d.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",d[d.AD_ERROR=1e4]="AD_ERROR",d[d.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",d[d.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",d[d.PICTURE_IN_PICTURE_ERROR=11001]="PICTURE_IN_PICTURE_ERROR",d[d.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",d[d.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",d[d.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",d[d.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",d[d.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",d[d.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",d),xd=function(t){return t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE",t}({});!function(t){t.fromCode=function(i){const e=x.floor(i/1e3);if(e in t)return e;throw new k("Invalid error code: "+i)}}(xd||(xd={})),r(),r(),r(),r(),r(),r(),Uc(),r();var Bh={}.hasOwnProperty,Cd={}.toString;function $t(t){return null!=t}function He(t){return void 0===t}var Zr=Array.isArray||function(t){return"[object Array]"===Cd.call(t)};function Ia(t){return Z(t)&&Bh.call(t,"length")&&$a(t.length)}function Z(t){return"object"==typeof t&&null!==t}function jd(t){return Z(t)&&t.constructor&&t.constructor===_}function Ic(t){return"string"==typeof t}function Sh(t){return"boolean"==typeof t}function pr(t){return $t(t)&&"function"==typeof t.then}function Od(t){return"[object Date]"===Cd.call(t)}function $a(t){return"number"==typeof t}function Rd(t){return"function"==typeof t}function Pd(t){return Rd(t)||Z(t)}function dn(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function zd(t){let i;for(;$t(i=t.firstChild);)t.removeChild(i)}function Bd(t,i){t.insertBefore(i,t.firstChild)}function Ud(t){const i=t.className;return"string"==typeof i?i:i&&"string"==typeof i.baseVal?i.baseVal:""}function Qd(t,i){const e=t.className;"string"==typeof e?t.className=i:e&&"string"==typeof e.baseVal&&(e.baseVal=i)}function Fd(t,i){return void 0!==t.classList?t.classList.contains(i):void 0!==t.className&&-1!==(" "+Ud(t)+" ").indexOf(" "+i+" ")}function Ea(t,i){if(void 0!==t.classList)t.classList.add(i);else if(void 0!==t.className){const e=Ud(t);-1===(" "+e+" ").indexOf(" "+i+" ")&&Qd(t,(e+" "+i).trim())}}function Yd(t,i){if(void 0!==t.classList)t.classList.remove(i);else if(void 0!==t.className){let e=" "+Ud(t)+" ";const s=" "+i+" ";for(;-1!==e.indexOf(s);)e=e.replace(s," ");Qd(t,e.trim())}}function Vd(t,i,e){void 0===e&&(e=!Fd(t,i)),e?Ea(t,i):Yd(t,i)}function Gd(t){t.stopPropagation()}function Wd(t,i){Ro.Nf&&Ro.Df<3?function(t,i){let e=i;switch(i){case"flex":e="-webkit-flex";break;case"inline-flex":e="-webkit-inline-flex"}t.display=e}(t,i):function(t,i){if(t.display=i,t.display!==i){let e=i;switch(i){case"flex":e="-ms-flexbox";break;case"inline-flex":e="-ms-inline-flexbox"}t.display=e}}(t,i)}function Zd(t,i){const e=i.style;if(e)for(const i of _.keys(t)){const s=t[i];void 0!==s&&(e[i]=s)}}function pc(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.top="0",i.bottom="0",i.width="100%",i.height="100%"}function Hd(t){const i=t.style;i.position="",i.left="",i.right="",i.top="",i.bottom="",i.width="",i.height=""}function Xd(t){t.removeAttribute("title")}function qd(t){t.addEventListener("mouseover",(t=>{Xd(t.target)}))}function Kd(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}function Jd(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}function qn(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function $d(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function tf(){return void 0!==h?h.createElement("video"):void 0}bs();var Eh=di(tf),ef=di((()=>"undefined"!=typeof HTMLVideoElement&&Eh()instanceof HTMLVideoElement));Uc(),r(),r(),r();var Ka=null;try{Ka=new WebAssembly.Instance(new WebAssembly.Module(new T([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(d){}function nu(t,i,e){this.low=0|t,this.high=0|i,this.unsigned=!!e}function sf(t){return!0===(t&&t.vp)}function nf(t){var i=x.clz32(t&-t);return t?31-i:i}nu.prototype.vp,_.defineProperty(nu.prototype,"vp",{value:!0}),nu.isLong=sf;var rf={},of={};function cc(t,i){var e,s,n;return i?(n=0<=(t>>>=0)&&t<256)&&(s=of[t])?s:(e=Dh(t,0,!0),n&&(of[t]=e),e):(n=-128<=(t|=0)&&t<128)&&(s=rf[t])?s:(e=Dh(t,t<0?-1:0,!1),n&&(rf[t]=e),e)}function qa(t,i){if(j(t))return i?jo:Yh;if(i){if(t<0)return jo;if(t>=lf)return mf}else{if(t<=-df)return pf;if(t+1>=df)return wf}return t<0?qa(-t,i).neg():Dh(t%cf|0,t/cf|0,i)}function Dh(t,i,e){return new nu(t,i,e)}nu.fromInt=cc,nu.fromNumber=qa,nu.fromBits=Dh;var hf=x.pow;function af(t,i,e){if(0===t.length)throw b("empty string");if("number"==typeof i?(e=i,i=!1):i=!!i,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i?jo:Yh;if((e=e||10)<2||36<e)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw b("interior hyphen");if(0===s)return af(t.substring(1),i,e).neg();for(var n=qa(hf(e,8)),r=Yh,o=0;o<t.length;o+=8){var h=x.min(8,t.length-o),a=C(t.substring(o,o+h),e);if(h<8){var u=qa(hf(e,h));r=r.mul(u).add(qa(a))}else r=(r=r.mul(n)).add(qa(a))}return r.unsigned=i,r}function uf(t,i){return"number"==typeof t?qa(t,i):"string"==typeof t?af(t,i):Dh(t.low,t.high,"boolean"==typeof i?i:t.unsigned)}nu.fromString=af,nu.fromValue=uf;var cf=4294967296,lf=cf*cf,df=lf/2,ff=cc(1<<24),Yh=cc(0);nu.ZERO=Yh;var jo=cc(0,!0);nu.UZERO=jo;var gf=cc(1);nu.ONE=gf;var _f=cc(1,!0);nu.UONE=_f;var vf=cc(-1);nu.NEG_ONE=vf;var wf=Dh(-1,2147483647,!1);nu.MAX_VALUE=wf;var mf=Dh(-1,-1,!0);nu.MAX_UNSIGNED_VALUE=mf;var pf=Dh(0,-2147483648,!1);nu.MIN_VALUE=pf;var Ju=nu.prototype;Ju.toInt=function(){return this.unsigned?this.low>>>0:this.low},Ju.toNumber=function(){return this.unsigned?(this.high>>>0)*cf+(this.low>>>0):this.high*cf+(this.low>>>0)},Ju.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(pf)){var i=qa(t),e=this.div(i),s=e.mul(i).sub(this);return e.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=qa(hf(t,6),this.unsigned),r=this,o="";;){var h=r.div(n),a=(r.sub(h.mul(n)).toInt()>>>0).toString(t);if((r=h).isZero())return a+o;for(;a.length<6;)a="0"+a;o=""+a+o}},Ju.getHighBits=function(){return this.high},Ju.getHighBitsUnsigned=function(){return this.high>>>0},Ju.getLowBits=function(){return this.low},Ju.getLowBitsUnsigned=function(){return this.low>>>0},Ju.getNumBitsAbs=function(){if(this.isNegative())return this.eq(pf)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&0==(t&1<<i);i--);return 0!=this.high?i+33:i+1},Ju.isZero=function(){return 0===this.high&&0===this.low},Ju.eqz=Ju.isZero,Ju.isNegative=function(){return!this.unsigned&&this.high<0},Ju.isPositive=function(){return this.unsigned||this.high>=0},Ju.isOdd=function(){return 1==(1&this.low)},Ju.isEven=function(){return 0==(1&this.low)},Ju.equals=function(t){return sf(t)||(t=uf(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},Ju.eq=Ju.equals,Ju.notEquals=function(t){return!this.eq(t)},Ju.neq=Ju.notEquals,Ju.ne=Ju.notEquals,Ju.lessThan=function(t){return this.comp(t)<0},Ju.lt=Ju.lessThan,Ju.lessThanOrEqual=function(t){return this.comp(t)<=0},Ju.lte=Ju.lessThanOrEqual,Ju.le=Ju.lessThanOrEqual,Ju.greaterThan=function(t){return this.comp(t)>0},Ju.gt=Ju.greaterThan,Ju.greaterThanOrEqual=function(t){return this.comp(t)>=0},Ju.gte=Ju.greaterThanOrEqual,Ju.ge=Ju.greaterThanOrEqual,Ju.compare=function(t){if(sf(t)||(t=uf(t)),this.eq(t))return 0;var i=this.isNegative(),e=t.isNegative();return i&&!e?-1:!i&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Ju.comp=Ju.compare,Ju.negate=function(){return!this.unsigned&&this.eq(pf)?pf:this.not().add(gf)},Ju.neg=Ju.negate,Ju.add=function(t){sf(t)||(t=uf(t));var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+h)>>>16,a+=(u+=e+o)>>>16,a+=i+r,Dh((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},Ju.subtract=function(t){return sf(t)||(t=uf(t)),this.add(t.neg())},Ju.sub=Ju.subtract,Ju.multiply=function(t){if(this.isZero())return this;if(sf(t)||(t=uf(t)),Ka)return Dh(Ka.mul(this.low,this.high,t.low,t.high),Ka.get_high(),this.unsigned);if(t.isZero())return this.unsigned?jo:Yh;if(this.eq(pf))return t.isOdd()?pf:Yh;if(t.eq(pf))return this.isOdd()?pf:Yh;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(ff)&&t.lt(ff))return qa(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*h)>>>16,u+=(c+=e*a)>>>16,c&=65535,u+=(c+=s*h)>>>16,c&=65535,u+=(c+=n*o)>>>16,u+=i*a+e*h+s*o+n*r,Dh((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},Ju.mul=Ju.multiply,Ju.divide=function(t){if(sf(t)||(t=uf(t)),t.isZero())throw b("division by zero");var i,e,s;if(Ka)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?Dh((this.unsigned?Ka.div_u:Ka.div_s)(this.low,this.high,t.low,t.high),Ka.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?jo:Yh;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return jo;if(t.gt(this.shru(1)))return _f;s=jo}else{if(this.eq(pf))return t.eq(gf)||t.eq(vf)?pf:t.eq(pf)?gf:(i=this.shr(1).div(t).shl(1)).eq(Yh)?t.isNegative()?gf:vf:(e=this.sub(t.mul(i)),s=i.add(e.div(t)));if(t.eq(pf))return this.unsigned?jo:Yh;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=Yh}for(e=this;e.gte(t);){i=x.max(1,x.floor(e.toNumber()/t.toNumber()));for(var n=x.ceil(x.log(i)/x.LN2),r=n<=48?1:hf(2,n-48),o=qa(i),h=o.mul(t);h.isNegative()||h.gt(e);)h=(o=qa(i-=r,this.unsigned)).mul(t);o.isZero()&&(o=gf),s=s.add(o),e=e.sub(h)}return s},Ju.div=Ju.divide,Ju.modulo=function(t){return sf(t)||(t=uf(t)),Ka?Dh((this.unsigned?Ka.rem_u:Ka.rem_s)(this.low,this.high,t.low,t.high),Ka.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},Ju.mod=Ju.modulo,Ju.rem=Ju.modulo,Ju.not=function(){return Dh(~this.low,~this.high,this.unsigned)},Ju.countLeadingZeros=function(){return this.high?x.clz32(this.high):x.clz32(this.low)+32},Ju.clz=Ju.countLeadingZeros,Ju.countTrailingZeros=function(){return this.low?nf(this.low):nf(this.high)+32},Ju.ctz=Ju.countTrailingZeros,Ju.and=function(t){return sf(t)||(t=uf(t)),Dh(this.low&t.low,this.high&t.high,this.unsigned)},Ju.or=function(t){return sf(t)||(t=uf(t)),Dh(this.low|t.low,this.high|t.high,this.unsigned)},Ju.xor=function(t){return sf(t)||(t=uf(t)),Dh(this.low^t.low,this.high^t.high,this.unsigned)},Ju.shiftLeft=function(t){return sf(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?Dh(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Dh(0,this.low<<t-32,this.unsigned)},Ju.shl=Ju.shiftLeft,Ju.shiftRight=function(t){return sf(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?Dh(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Dh(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Ju.shr=Ju.shiftRight,Ju.shiftRightUnsigned=function(t){return sf(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?Dh(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):Dh(32===t?this.high:this.high>>>t-32,0,this.unsigned)},Ju.shru=Ju.shiftRightUnsigned,Ju.shr_u=Ju.shiftRightUnsigned,Ju.rotateLeft=function(t){var i;return sf(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?Dh(this.high,this.low,this.unsigned):t<32?(i=32-t,Dh(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)):(i=32-(t-=32),Dh(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned))},Ju.rotl=Ju.rotateLeft,Ju.rotateRight=function(t){var i;return sf(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?Dh(this.high,this.low,this.unsigned):t<32?(i=32-t,Dh(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)):(i=32-(t-=32),Dh(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned))},Ju.rotr=Ju.rotateRight,Ju.toSigned=function(){return this.unsigned?Dh(this.low,this.high,!1):this},Ju.toUnsigned=function(){return this.unsigned?this:Dh(this.low,this.high,!0)},Ju.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Ju.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},Ju.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},nu.fromBytes=function(t,i,e){return e?nu.fromBytesLE(t,i):nu.fromBytesBE(t,i)},nu.fromBytesLE=function(t,i){return new nu(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},nu.fromBytesBE=function(t,i){return new nu(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)};var D=nu;function Af(t,i){return t.lessThan(i)?t:i}r();var jt=9007199254740991,yf=2**-52;function ur(t,i,e){return x.min(x.max(t,i),e)}function ce(t,i,e){return t===i||x.abs(t-i)<=e}function bf(t,i){if(t===i)return!0;const e=x.abs(t-i);if(e<yf)return!0;return e<x.max(x.abs(t),x.abs(i))*yf}function Mf(t,i){return t%i+(t<0?i:0)}function Tf(t){return t!=t}function Sf(t,i){return t===i||Tf(t)&&Tf(i)}function Nf(t,i){let e=t,s=i;for(;0!==s;){const t=e%s;e=s,s=t}return e<0?-e:e}function qe(t,i){return t.reduce(((t,e)=>t+i(e)),0)}function If(t){return!j(t.getTime())}function B(){return Date.now()||(new Date).getTime()}function Df(t){return t/1e3}function io(t){return 1e3*t}var Be=1/6,Ef=D.fromNumber(jt);function os(t,i){if(0===i)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(Ef))return t.toNumber()/i;const e=t.divide(i),s=t.subtract(e.multiply(i));return e.toNumber()+s.toNumber()/i}var kf=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!Kl||!Kl.msMaxTouchPoints),Lf=Eh(),xf=!(!Lf||!Lf.webkitShowPlaybackTargetPicker),Cf=class{get wp(){return void 0===this.mp&&(this.mp=this.pp()),this.mp}pp(){return 0}get Ap(){return!Ro.dg}get yp(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get bp(){return s.devicePixelRatio||1}get Mp(){return xf}get Tp(){return!1}get Sp(){return!0}get Np(){return!(!Ro.qf&&!Ro.Ka)||!!Ro.Rf}get Ip(){return Ro.Rf}get Dp(){return!Ro.Ka}get Ep(){return!0}get kp(){return!0}get Lp(){return!1}get xp(){}get Cp(){return!0}get jp(){return!1}get Op(){return Ro.Rf}get Rp(){return!1}Pp(t,i){return!0}zp(t){return t>=2*Be}constructor(){this.mp=void 0,this.Bp=!1,this.Je=kf,this.Qs=!1,this.Up=!0}},Xa=class extends Cf{constructor(){super()}};Uc(),r(),Uc();var jf=class extends Xa{get xp(){if(Ro.Od)return 4096}Pp(t,i){if(t&&t.Qp&&i&&i.Qp){let e=za(t.Qp,"mp4a.40.2")&&za(i.Qp,"mp4a.40.5"),s=za(t.Qp,"mp4a.40.5")&&za(i.Qp,"mp4a.40.2"),n=za(t.Qp,"mp4a.40.2")&&za(i.Qp,"mp4a.40.34"),r=za(t.Qp,"mp4a.40.34")&&za(i.Qp,"mp4a.40.2"),o=za(t.Qp,"mp4a.40.5")&&za(i.Qp,"mp4a.40.34"),h=za(t.Qp,"mp4a.40.34")&&za(i.Qp,"mp4a.40.5");return!(e||s||n||r||o||h)}return!0}};function za(t,i){return t.indexOf(i)>-1}r();var Of=class extends Xa{zp(t){return t>=2}};r(),Uc();var Rf=class extends Xa{get Rp(){return Ro.Jf<17}constructor(){super(),this.Bp=Ro.Jf>=11,this.Up=Ro.qf&&!(Ro.Ka&&Ro.Jf<10)}};r(),Uc();var Pf,zf=class extends Xa{get Cp(){return!Ro.Pd||(Ro.yf?92!==Ro.Sf:Ro.mf>=100)}};r(),r(),r(),r(),r(),Uc();var Bf=function(){const t=tf();if(!t)return!1;const i=t.muted;return t.muted=!i,t.muted!==i}(),Uf=function(){if(Ro.Kd)return!1;const t=tf();if(!t)return!1;const i=t.volume;return t.volume=i/2+.1,i!==t.volume}();var Ua=class extends Cf{pp(){return this.Fp.wp}get xp(){return this.Fp.xp}get Cp(){return this.Fp.Cp}Pp(t,i){return this.Fp.Pp(t,i)}zp(t){return this.Fp.zp(t)}get Rp(){return this.Fp.Rp}constructor(t){super(),this.Fp=t,this.Bp=this.Fp.Bp,this.Je=this.Fp.Je,this.Up=Bf&&this.Fp.Up}};Uc();var Qf,Ff,Gn,gi,Yf,Vf,Gf=class extends Ua{get Lp(){return Ro.Ka}constructor(t){super(t),this.Bp=!0,this.Qs=!0}};r(),r();var dc=class{Yp(){return new this.Vp}Gp(t){return this.Vp.isTypeSupported(t)}constructor(t){this.Vp=Wf(t)}};function Wf(t){return t&&Pd(gi.ManagedMediaSource)?gi.ManagedMediaSource:Pd(gi.MediaSource)?gi.MediaSource:void 0}var Zf=class extends Gf{get Lp(){return!0}pp(){return Wf(!0)?super.pp():1}};r(),Uc();var Hf=class extends Ua{get Tp(){return Ro.Df<3}get Sp(){return Ro.Df>=3}get yp(){return s.tizen&&!this.Wp&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const i=t.resolutionWidth,e=t.resolutionHeight;1===i&&1===e||(this.Wp={width:i,height:e})})),this.Wp}get jp(){return Ro.Df<3}Pp(t,i){return super.Pp(t,i)}};r();var Xf=class extends Ua{get yp(){return s.webOS&&!this.Wp&&s.webOS.deviceInfo((t=>{this.Wp={width:t.screenWidth,height:t.screenHeight}})),this.Wp}get Ep(){return!1}};r();var qf=class extends Ua{get Lp(){return!0}};!function(t){Pf=t}(function(){const t=function(){if(Ro.Wf)return new jf;if(Ro.zf||Ro.Uf)return new Of;if(Ro.qf)return new Rf;if(Ro.vf)return new zf;return new Xa}();return Ro.Ka?new Zf(t):Ro.Qs?new Gf(t):Ro.Nf?new Hf(t):Ro.kf?new Xf(t):Ro.Od?new qf(t):new Ua(t)}()),r(),Qi(),r(),r(),Uc(),bs();var Kf=!(Ro.Uf&&!Ro.Ff),Ke=self.console;function Jf(t){if(Z(t))try{return JSON.stringify(t)}catch(t){}return t}function $f(t){return t.map(Jf).join(" ")}function tg(t){const i=Ke&&Ke[t];return i?i.bind&&Kf?i.bind(Ke):function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];Ke[t]($f(e))}:void 0}var ig=tg("log")||Bn,Bi=tg("warn")||ig.bind(void 0,"WARNING:"),Gr=tg("error")||ig.bind(void 0,"ERROR:"),eg=(()=>{const t=Ke&&Ke.assert;return t?t.bind&&Kf?t.bind(Ke):function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];Ke.assert(t,$f(e))}:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];t||Gr("Assertion failed:",...e)}})();function sg(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}function ng(t,i){var e=function(t,i){var e=t.length;if(e<=1)return t;for(var s=new Array(e),n=1;n<e;n*=2){rg(t,i,n,s);var r=t;t=s,s=r}return t}(t,i);return e!==t&&rg(e,null,t.length,t),t}function rg(t,i,e,s){var n,r,o,h,a,u=t.length,c=0,l=2*e;for(n=0;n<u;n+=l)for(o=(r=n+e)+e,r>u&&(r=u),o>u&&(o=u),h=n,a=r;;)if(h<r&&a<o)i(t[h],t[a])<=0?s[c++]=t[h++]:s[c++]=t[a++];else if(h<r)s[c++]=t[h++];else{if(!(a<o))break;s[c++]=t[a++]}}r();var og=/[a-zA-Z]/,hg=/[0-9]/,ag=/[0-9a-fA-F]/,ug=/^0x/i,cg=/^[0-9]+$/,lg=/^[0-9a-fA-F]+$/,dg=/^[0-7]+$/,fg=_.prototype.toString,gg=Array.isArray||function(t){return"[object Array]"===fg.call(t)},_g=void 0!==Bo&&"symbol"==typeof f;function vg(t){return gg(t)?t:Array.from(t)}function wg(t,i,e){var s=t[i];t[i]=t[e],t[e]=s}function mg(t){return t>=65&&t<=90}function pg(t){return mg(t)||function(t){return t>=97&&t<=122}(t)}function Ag(t){return t>=48&&t<=57}function yg(t){return Ag(t)||pg(t)}function bg(t){return Ag(t)||t>=65&&t<=70||t>=97&&t<=102}function Mg(t){return mg(t)?t+32:t}function Tg(t){return Ag(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function Sg(t,i){return void 0===i&&(i=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(i?87:55):-1}var Ng=x.min,Ig=String.fromCharCode,Dg=16384;function Eg(t){for(var i=t.length,e=[],s=0;s<i;s+=Dg){var n=Ng(s+Dg,i);e.push(Ig.apply(null,t.slice(s,n)))}return e.join("")}var kg=2147483647,Lg=/[^\0-\x7E]/,xg=/[\x2E\u3002\uFF0E\uFF61]/g,Cg={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},jg=x.floor,Og=String.fromCharCode;function Rg(t){throw new RangeError(Cg[t])}function Pg(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}var zg,Bg,De,Ug=function(t,i){return t+22+75*(t<26)-((0!=i)<<5)},Qg=function(t,i,e){var s=0;for(t=e?jg(t/700):t>>1,t+=jg(t/i);t>455;s+=36)t=jg(t/35);return jg(s+36*t/(t+38))},Fg=function(t){return function(t,i){var e=t.split("@"),s="";e.length>1&&(s=e[0]+"@",t=e[1]);var n=function(t,i){for(var e=[],s=t.length;s--;)e[s]=i(t[s]);return e}((t=t.replace(xg,".")).split("."),i).join(".");return s+n}(t,(function(t){return Lg.test(t)?"xn--"+function(t){for(var i=[],e=(t=Pg(t)).length,s=128,n=0,r=72,o=0,h=t;o<h.length;o++){var a=h[o];a<128&&i.push(Og(a))}var u=i.length,c=u;for(u&&i.push("-");c<e;){for(var l=kg,d=0,f=t;d<f.length;d++){var g=f[d];g>=s&&g<l&&(l=g)}var _=c+1;l-s>jg((kg-n)/_)&&Rg("overflow"),n+=(l-s)*_,s=l;for(var v=0,w=t;v<w.length;v++){var m=w[v];if(m<s&&++n>kg&&Rg("overflow"),m==s){for(var p=n,A=36;;A+=36){var y=A<=r?1:A>=r+26?26:A-r;if(p<y)break;var b=p-y,M=36-y;i.push(Og(Ug(y+b%M,0))),p=jg(b/M)}i.push(Og(Ug(p,0))),r=Qg(n,_,c==u),n=0,++c}}++n,++s}return i.join("")}(t):t}))};function Yg(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s)}return Eg(i)}function Vg(t){if(t>=55296&&t<=57343)throw new b("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Gg(t,i){return t>>i&63|128}function Wg(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(Vg(t),i.push(t>>12&15|224),i.push(Gg(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(Gg(t,12)),i.push(Gg(t,6))),i.push(63&t|128)):i.push(t)}function Zg(t){for(var i=[],e=0;e<t.length;e++){Wg(t[e],i)}return i}function Hg(){if(De>=Bg)throw new b("Invalid byte index");var t=255&zg[De];if(De++,128==(192&t))return 63&t;throw new b("Invalid continuation byte")}function Xg(){var t,i;if(De>Bg)throw new b("Invalid byte index");if(De===Bg)return!1;if(t=255&zg[De],De++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|Hg())>=128)return i;throw new b("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|Hg()<<6|Hg())>=2048)return Vg(i),i;throw new b("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|Hg()<<12|Hg()<<6|Hg())>=65536&&i<=1114111)return i;throw new b("Invalid UTF-8 detected")}function qg(t){return[37,Sg(t>>4),Sg(15&t)]}function Kg(t){return function(t){return t>=0&&t<=31}(t)||t>126}function Jg(t){return Kg(t)||32===t||34===t||60===t||62===t||96===t}function $g(t){return Jg(t)||35===t||63===t||123===t||125===t}function t_(t){return $g(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function i_(t){return t<33||t>126||34===t||35===t||60===t||62===t}function e_(t){return i_(t)||39===t}function s_(t,i){if(!i(t))return[t];for(var e=Zg([t]),s=[],n=0;n<e.length;n++){var r=e[n];s.push.apply(s,qg(r))}return s}function n_(t,i){for(var e=[],s=0,n=Pg(t);s<n.length;s++){var r=n[s];e.push.apply(e,s_(r,i))}return Yg(e)}function r_(t){return function(t){for(var i=[],e=t.length,s=0;s<e;s++){var n=t[s];if(37===n&&s+2<e&&bg(t[s+1])&&bg(t[s+2])){var r=Tg(t[s+1])<<4|Tg(t[s+2]);i.push(r),s+=2}else i.push(n)}return i}(Zg(t))}function o_(t){return Yg(function(t){zg=t.slice(),Bg=zg.length,De=0;for(var i,e=[];!1!==(i=Xg());)e.push(i);return e}(r_(Pg(t))))}function h_(t){var i=t.length,e=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<i&&":"===t[r]){if(!(r+1<i&&":"===t[r+1]))throw new k;r+=2,n=s+=1}for(;r<i;){if(8===s)throw new k("Too many groups");if(":"!==t[r]){for(var o=0,h=0;h<4&&r<i&&ag.test(t[r]);)o=o<<4|C(t[r],16),r+=1,h+=1;if("."===t[r]){if(0===h)throw new k;if(r-=h,s>6)throw new k;for(var a=0;r<i;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new k;r+=1}if(!hg.test(t[r]))throw new k;for(;r<i&&hg.test(t[r]);){var c=C(t[r],10);if(null===u)u=c;else{if(0===u)throw new k;if((u=10*u+c)>255)throw new k}r+=1}e[s]=e[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new k;break}if(":"===t[r]){if((r+=1)===i)throw new k}else if(r<i)throw new k;e[s]=o,s+=1}else{if(null!==n)throw new k("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)wg(e,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new k;return e}function a_(t){var i=10,e=cg;return ug.test(t)?(t=t.slice(2),i=16,e=lg):t.length>=2&&"0"===t[0]&&(t=t.slice(1),i=8,e=dg),""===t?0:e.test(t)?C(t,i):void 0}var Ye={Zp:4},u_=/[\0\t\n\r #%/:?@\[\\\]]/,c_=/[\0\t\n\r #/:?@\[\\\]]/;function l_(t,i){if("["===t[0]){if("]"!==t[t.length-1])throw new k("Invalid IPv6 address");return{Zp:2,Hp:h_(t.slice(1,-1))}}if(!i)return function(t){if(c_.test(t))throw new k("Invalid code point in opaque host");var i=n_(t,Kg);return""===i?Ye:{Zp:3,Xp:i}}(t);var e=function(t){var i=function(t){return Fg(t.toLowerCase())}(t);return i}(o_(t));if(u_.test(e))throw new k("Invalid code point in host");var s=function(t){var i=t.split(".");if(""===i[i.length-1]&&i.pop(),!(i.length>4)){for(var e=[],s=0;s<i.length;s++){var n=i[s];if(""===n)return;var r=a_(n);if(void 0===r)return;e.push(r)}for(var o=0;o<e.length-1;o++)if(e[o]>255)throw new k;if(e[e.length-1]>=x.pow(256,5-e.length))throw new k;for(var h=e.pop(),a=0;a<e.length;a++)h+=e[a]*x.pow(256,3-a);return h}}(e);return void 0!==s?{Zp:1,Hp:s}:""===e?Ye:{Zp:0,qp:e}}function d_(t){switch(t.Zp){case 0:return t.qp;case 1:return function(t){for(var i=[],e=t,s=1;s<=4;s++)i.push(""+(255&e)),4!==s&&i.push("."),e>>>=8;return i.reverse().join("")}(t.Hp);case 2:return"["+function(t){for(var i="",e=function(t){for(var i=0,e=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>e&&(i=s,e=n),n=0);return n>e&&(i=s,e=n),e>1?i:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}e!==n?(i+=t[n].toString(16),7!==n&&(i+=":")):(i+=0===n?"::":":",s=!0)}return i}(t.Hp)+"]";case 3:return t.Xp;case 4:return""}}var f_=/\+/g;function g_(t){return 42===t||45===t||46===t||95===t||yg(t)}function __(t){for(var i=t.split("&"),e=[],s=0;s<i.length;s++){var n=i[s];if(""!==n){var r=n.indexOf("="),o=void 0,h=void 0;-1!==r?(o=n.slice(0,r),h=n.slice(r+1)):(o=n,h=""),o=o.replace(f_," "),h=h.replace(f_," ");var a=o_(o),u=o_(h);e.push([a,u])}}return e}function v_(t){for(var i="",e=0;e<t.length;e++){var s=t[e];e>0&&(i+="&"),i+=w_(Zg(Pg(s[0])))+"="+w_(Zg(Pg(s[1])))}return i}function w_(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];32===s?i.push(43):g_(s)?i.push(s):i.push.apply(i,qg(s))}return Eg(i)}var m_=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function p_(t){var i=""+t,e=m_.exec(i);return e?function(t,i){for(var e=t.length,s=[],n=i;n<e;n++){var r=t.charCodeAt(n);if(y_(r))if(b_(r)||n===e-1)s.push(A_);else{var o=t.charCodeAt(n+1);b_(o)?(s.push(r,o),n++):s.push(A_)}else s.push(r)}return t.slice(0,i)+Eg(s)}(i,e.index):i}var A_=65533,y_=function(t){return 55296==(63488&t)},b_=function(t){return 0!=(1024&t)};function M_(t,i){var e=t[0],s=i[0];return e===s?0:e<s?-1:1}function T_(t){t.Xv.length=0}function S_(t,i){!function(t,i){for(var e=0;e<i.length;e++)t[e]=i[e];t.length=i.length}(t.Xv,__(i))}function N_(t){if(t.Yu){var i=v_(t.Xv);""===i&&(i=null),t.Yu.Yu.Kp=i}}var qh=function(){function t(t){if(void 0===t&&(t=void 0),this.Yu=null,null==t)this.Xv=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof qh&&!!gg(t.Xv)&&(!_g||t[f]===I_)}(t))this.Xv=t.Xv.slice();else if(function(t){return null!=t&&(!!gg(t)||!!_g&&"function"==typeof t[f])}(t)){this.Xv=[];for(var i=0,e=vg(t);i<e.length;i++){var s=vg(e[i]);if(2!==s.length)throw new k("Invalid name-value pair");this.Xv.push([p_(s[0]),p_(s[1])])}}else for(var n in this.Xv=[],t)_.prototype.hasOwnProperty.call(t,n)&&this.Xv.push([p_(n),p_(t[n])]);else(t=p_(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.Xv=__(t)}var i=t.prototype;return i.append=function(t,i){t=p_(t),i=p_(i),this.Xv.push([t,i]),N_(this)},i.delete=function(t){t=p_(t);for(var i=this.Xv,e=0;e<i.length;){i[e][0]===t?i.splice(e,1):e++}N_(this)},i.get=function(t){t=p_(t);for(var i=this.Xv,e=0;e<i.length;e++){var s=i[e];if(s[0]===t)return s[1]}return null},i.getAll=function(t){t=p_(t);for(var i=this.Xv,e=[],s=0;s<i.length;s++){var n=i[s];n[0]===t&&e.push(n[1])}return e},i.has=function(t){t=p_(t);for(var i=this.Xv,e=0;e<i.length;e++){if(i[e][0]===t)return!0}return!1},i.set=function(t,i){t=p_(t),i=p_(i);for(var e=this.Xv,s=!1,n=0;n<e.length;){var r=e[n];r[0]===t?s?e.splice(n,1):(r[1]=i,s=!0,n++):n++}s||e.push([t,i]),N_(this)},i.sort=function(){ng(this.Xv,M_),N_(this)},i.toString=function(){return v_(this.Xv)},i.entries=function(){return new L_(this.Xv,D_)},i.keys=function(){return new L_(this.Xv,E_)},i.values=function(){return new L_(this.Xv,k_)},i.forEach=function(t){var i=this;this.Xv.forEach((function(e){return t(e[1],e[0],i)}))},t}(),I_=qh.prototype.entries;_g&&(qh.prototype[f]=I_);var D_=function(t){return[t[0],t[1]]},E_=function(t){return t[0]},k_=function(t){return t[1]},L_=function(){function t(t,i){this.Jp=0,this.Xv=t,this.$p=i}return t.prototype.next=function(){return this.Jp<this.Xv.length?{done:!1,value:this.$p(this.Xv[this.Jp++])}:{done:!0,value:void 0}},t}(),x_="null";var Ln=_.create(null);Ln.ftp=21,Ln.file=0,Ln.gopher=70,Ln.http=80,Ln.https=443,Ln.ws=80,Ln.wss=443;var C_=/^(?:\.|%2e)$/i,j_=/^(?:\.|%2e){2}$/i;function O_(t){return C_.test(t)}function R_(t){return j_.test(t)}function P_(t){return void 0!==Ln[t]}function Ot(t){return P_(t.tA)}function z_(t){return""!==t.iA||""!==t.eA}function B_(t){var i=t.length;if(!(i>=2))return!1;if(!Q_(t.slice(0,2)))return!1;if(2!==i){var e=t[2];if(47!==e&&92!==e&&63!==e&&35!==e)return!1}return!0}function U_(t){return 2===t.length&&og.test(t[0])&&(":"===t[1]||"|"===t[1])}function Q_(t){return 2===t.length&&U_(Eg(t))}function F_(t){return U_(t)&&":"===t[1]}function Y_(t){var i=t.sA;0!==i.length&&("file"===t.tA&&1===i.length&&F_(i[0])||i.pop())}function V_(t){return null===t.nA||Ye===t.nA||t.rA||"file"===t.tA}var G_=-1,W_=/\t|\n|\r/g,Z_=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function H_(t,i,e,s){void 0===e&&(e=null),void 0===s&&(s=null),e||(e=new X_,t=t.replace(Z_,""));var n=null!==s?s:0;i=i||null;for(var r=[],o=!1,h=!1,a=!1,u=Pg(t=t.replace(W_,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:G_;switch(n){case 0:if(!pg(d)){if(null===s){r.length=0,n=2;continue}throw new k("Invalid scheme")}r.push(Mg(d)),n=1;break;case 1:if(yg(d)||43===d||45===d||46===d)r.push(Mg(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new k("Invalid scheme")}var f=Yg(r);if(null!==s){if(P_(e.tA)&&!P_(f))return;if(!P_(e.tA)&&P_(f))return;if((z_(e)||null!==e.oA)&&"file"===f)return;if("file"===e.tA&&(e.nA===Ye||null===e.nA))return}if(e.tA=f,null!==s)return void(Ot(e)&&e.oA===Ln[e.tA]&&(e.oA=null));r.length=0,"file"===e.tA?n=13:Ot(e)&&i&&i.tA===e.tA?n=3:Ot(e)?n=7:47===u[l+1]?(n=4,l+=1):(e.rA=!0,e.sA.push(""),n=18)}break;case 2:if(!i||i.rA&&35!==d)throw new k("Invalid scheme");i.rA&&35===d?(e.tA=i.tA,e.sA=i.sA.slice(),e.Kp=i.Kp,e.hA="",e.rA=!0,n=20):"file"!==i.tA?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:e.tA=i.tA,G_===d?(e.iA=i.iA,e.eA=i.eA,e.nA=i.nA,e.oA=i.oA,e.sA=i.sA.slice(),e.Kp=i.Kp):47===d?n=6:63===d?(e.iA=i.iA,e.eA=i.eA,e.nA=i.nA,e.oA=i.oA,e.sA=i.sA.slice(),e.Kp="",n=19):35===d?(e.iA=i.iA,e.eA=i.eA,e.nA=i.nA,e.oA=i.oA,e.sA=i.sA.slice(),e.Kp=i.Kp,e.hA="",n=20):92===d&&Ot(e)?n=6:(e.iA=i.iA,e.eA=i.eA,e.nA=i.nA,e.oA=i.oA,e.sA=i.sA.slice(),e.sA.pop(),n=17,l-=1);break;case 6:!Ot(e)||47!==d&&92!==d?47===d?n=9:(e.iA=i.iA,e.eA=i.eA,e.nA=i.nA,e.oA=i.oA,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){o&&r.unshift(37,52,48),o=!0;for(var g=0;g<r.length;g++){var _=r[g];if(58!==_||a){var v=Yg(s_(_,t_));a?e.eA+=v:e.iA+=v}else a=!0}r.length=0}else if(G_===d||47===d||63===d||35===d||Ot(e)&&92===d){if(o&&0===r.length)throw new k("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===e.tA)l-=1,n=15;else if(58!==d||h)if(G_===d||47===d||63===d||35===d||Ot(e)&&92===d){if(l-=1,Ot(e)&&0===r.length)throw new k("Invalid host");if(null!==s&&0===r.length&&(z_(e)||null!==e.oA))return;var w=l_(Yg(r),Ot(e));if(e.nA=w,r.length=0,n=16,null!==s)return}else 91===d?h=!0:93===d&&(h=!1),r.push(d);else{if(0===r.length)throw new k("Invalid host");var m=l_(Yg(r),Ot(e));if(e.nA=m,r.length=0,n=12,11===s)return}break;case 12:if(Ag(d))r.push(d);else{if(!(G_===d||47===d||63===d||35===d||Ot(e)&&92===d||null!==s))throw new k("Invalid port");if(0!==r.length){var p=C(Yg(r),10);if(p>65535)throw new k("Invalid port");e.oA=p===Ln[e.tA]?null:p,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:e.tA="file",47===d||92===d?n=14:i&&"file"===i.tA?G_===d?(e.nA=i.nA,e.sA=i.sA.slice(),e.Kp=i.Kp):63===d?(e.nA=i.nA,e.sA=i.sA.slice(),e.Kp="",n=19):35===d?(e.nA=i.nA,e.sA=i.sA.slice(),e.Kp=i.Kp,e.hA="",n=20):(B_(u.slice(l))||(e.nA=i.nA,e.sA=i.sA.slice(),Y_(e)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(i&&"file"===i.tA&&!B_(u.slice(l))&&(F_(i.sA[0])?e.sA.push(i.sA[0]):e.nA=i.nA),n=17,l-=1);break;case 15:if(G_===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&Q_(r))n=17;else if(0===r.length){if(e.nA=Ye,null!==s)return;n=16}else{var A=l_(Yg(r),Ot(e));if(0===A.Zp&&"localhost"===A.qp&&(A=Ye),e.nA=A,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:Ot(e)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(e.Kp="",n=19):null===s&&35===d?(e.hA="",n=20):G_!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(G_===d||47===d||Ot(e)&&92===d||null===s&&(63===d||35===d)){var y=Yg(r);if(R_(y)?(Y_(e),47===d||Ot(e)&&92===d||e.sA.push("")):!O_(y)||47===d||Ot(e)&&92===d?O_(y)||("file"===e.tA&&0===e.sA.length&&Q_(r)&&(Ye!==e.nA&&null!==e.nA&&(e.nA=Ye),r[1]=58,y=Yg(r)),e.sA.push(y)):e.sA.push(""),r.length=0,"file"===e.tA&&(G_===d||63===d||35===d))for(;e.sA.length>1&&""===e.sA[0];)e.sA.shift();63===d?(e.Kp="",n=19):35===d&&(e.hA="",n=20)}else r.push.apply(r,s_(d,$g));break;case 18:63===d?(e.Kp="",n=19):35===d?(e.hA="",n=20):G_!==d&&(e.sA[0]+=Yg(s_(d,Kg)));break;case 19:null===s&&35===d?(e.hA="",n=20):G_!==d&&(e.Kp+=Yg(s_(d,Ot(e)?e_:i_)));break;case 20:G_===d||0===d||(e.hA+=Yg(s_(d,Jg)))}l++}return e}function vc(t,i,e,s){try{H_(t,i,e,s)}catch(t){}}var X_=function(){this.tA="",this.iA="",this.eA="",this.nA=null,this.oA=null,this.sA=[],this.Kp=null,this.hA=null,this.rA=!1};function q_(t){switch(t.tA){case"blob":var i;try{i=H_(t.sA[0],null)}catch(t){return x_}return q_(i);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,i,e){return t+"://"+d_(i)+(null===e?"":":"+e)}(t.tA,t.nA,t.oA);default:return x_}}var K_=function(){function t(t,i){var e,s=null;if(null!=i)if(function(t){return null!=t&&t instanceof K_&&"object"==typeof t.Yu}(i))s=i.Yu;else try{s=H_(String(i),null)}catch(t){throw new k("Invalid base URL: "+t.message)}try{e=H_(String(t),s)}catch(t){throw new k("Invalid URL: "+t.message)}var n=e.Kp;this.Yu=e,this.Kp=function(t){var i=new qh;return null!==t&&S_(i,t),i}(n),this.Kp.Yu=this}var i=t.prototype;return i.toString=function(){return this.href},i.toJSON=function(){return this.href},function(t,i,e){i&&sg(t.prototype,i),e&&sg(t,e)}(t,[{key:"href",get:function(){return function(t,i){void 0===i&&(i=!1);var e=t.tA+":";if(null!==t.nA?(e+="//",z_(t)&&(e+=t.iA,""!==t.eA&&(e+=":"+t.eA),e+="@"),e+=d_(t.nA),null!==t.oA&&(e+=":"+t.oA)):null===t.nA&&"file"===t.tA&&(e+="//"),t.rA)e+=t.sA[0];else for(var s=0,n=t.sA;s<n.length;s++)e+="/"+n[s];return null!==t.Kp&&(e+="?"+t.Kp),i||null===t.hA||(e+="#"+t.hA),e}(this.Yu)},set:function(t){var i;try{i=H_(String(t),null)}catch(t){throw new k("Invalid URL: "+t.message)}this.Yu=i,T_(this.Kp);var e=this.Yu.Kp;null!==e&&S_(this.Kp,e)}},{key:"origin",get:function(){return q_(this.Yu)}},{key:"protocol",get:function(){return this.Yu.tA+":"},set:function(t){vc(t+":",null,this.Yu,0)}},{key:"username",get:function(){return this.Yu.iA},set:function(t){V_(this.Yu)||(this.Yu.iA=n_(t,t_))}},{key:"password",get:function(){return this.Yu.eA},set:function(t){V_(this.Yu)||(this.Yu.eA=n_(t,t_))}},{key:"host",get:function(){var t=this.Yu,i=t.nA;if(null===i)return"";var e=t.oA,s=d_(i);return null!==e&&(s+=":"+e),s},set:function(t){this.Yu.rA||vc(t,null,this.Yu,10)}},{key:"hostname",get:function(){var t=this.Yu.nA;return null===t?"":d_(t)},set:function(t){this.Yu.rA||vc(t,null,this.Yu,11)}},{key:"port",get:function(){var t=this.Yu.oA;return null===t?"":""+t},set:function(t){V_(this.Yu)||(""===t?this.Yu.oA=null:vc(t,null,this.Yu,12))}},{key:"pathname",get:function(){var t=this.Yu.sA;return this.Yu.rA?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.Yu.rA||(this.Yu.sA.length=0,vc(t,null,this.Yu,16))}},{key:"search",get:function(){var t=this.Yu.Kp;return null===t||""===t?"":"?"+t},set:function(t){t=p_(t);var i=this.Yu;if(""===t)return i.Kp=null,void T_(this.Kp);"?"===t[0]&&(t=t.slice(1)),i.Kp="",vc(t,null,i,19),S_(this.Kp,t)}},{key:"searchParams",get:function(){return this.Kp}},{key:"hash",get:function(){var t=this.Yu.hA;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.Yu.hA="",vc(t,null,this.Yu,20)):this.Yu.hA=null}}]),t}();function J_(t){return t.document&&t.document.baseURI||t.location.href||""}function $_(){let t=gi,i=t.location.href;for(;t!==s.top;){t=t.parent;try{i=t.location.href}catch(t){}}return i}r();var iv=class{aA(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];ig(...i)}uA(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Bi(...i)}cA(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Gr(...i)}lA(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];eg(t,...e)}Pg(t,i){return u(t,i)}dA(t,i){return v(t,i)}Rg(t){c(t)}fA(t){m(t)}gA(){return this._A.gA()}vA(){return this._A.vA()}wA(){return this._A.wA()}mA(){return this._A.mA()}pA(){return this._A.pA()}AA(t,i){return this._A.AA(t,i)}yA(t){return this._A.yA(t)}get bA(){return this.MA}Ah(t,i){let e;return void 0===i&&(i=J_(gi)),e="object"!=typeof i||i instanceof K_?i:i.href,new K_(t,e)}TA(t,i){if(void 0===i&&(i=J_(gi)),this.SA){const e=Ic(i)?i:i.toString();return new self.URL(t,e).href}return this.Ah(t,i).href}get Ys(){return this.NA}get IA(){return{DA:Kl&&Kl.userAgent.match(/Android /i)?"Android":"other",EA:Boolean(Kl&&Kl.userAgent.match(/Android 8.0.0/i))}}get kA(){return self&&self.location&&"https:"===self.location.protocol}get LA(){return"languages"in Kl?Kl.languages.slice():[Kl.language]}constructor(){this.MA=new ev,this.NA=Pf,this.SA=sv(),self.performance&&self.performance.now?this.Og=()=>self.performance.now():this.Og=B}},ev=class{get xA(){return Kl.oscpu}get Ys(){return Kl.platform}get CA(){return Kl.vendor}get jA(){return Kl.vendorSub}};function sv(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}function Ei(){return Ei=_.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)_.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Ei.apply(this,arguments)}function nv(){const t=_.create(null);return t.OA=void 0,delete t.OA,t}function ll(){return new av}function gc(){return new uv}function rv(t){const i=ll();for(const e in t)Bh.call(t,e)&&i.set(e,t[e]);return i}function ov(t){const i=[];return t.forEach((t=>i.push(t))),i}r(),r(),r();var hv="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,av=hv||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,i){this.index=0,this.data=t,this.selector=i,this.keys=_.keys(t)}}return class{get(t){return this.data[t]}set(t,i){return this.has(t)||this.size++,this.data[t]=i,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=nv(),this.size=0}keys(){return new t(this.data,((t,i)=>i))}values(){return new t(this.data,((t,i)=>t[i]))}entries(){return new t(this.data,((t,i)=>[i,t[i]]))}forEach(t){for(const i in this.data)t(this.data[i],i)}constructor(){this.data=nv(),this.size=0}}}();var uv=hv||function(){class t{next(){const t=this.RA.next();return t.done?t:{value:this.PA(t.value),done:!1}}constructor(t,i){this.RA=t,this.PA=i}}return class{get size(){return this.Hv.size}get(t){return this.Hv.get(""+t)}set(t,i){return this.Hv.set(""+t,i),this}has(t){return this.Hv.has(""+t)}delete(t){return this.Hv.delete(""+t)}clear(){this.Hv.clear()}keys(){return new t(this.Hv.keys(),(t=>Number(t)))}values(){return this.Hv.values()}entries(){return new t(this.Hv.entries(),(t=>{let[i,e]=t;return[Number(i),e]}))}forEach(t){this.Hv.forEach(((i,e)=>{t(i,Number(e))}))}constructor(){this.Hv=ll()}}}();Uc(),r(),r();var cv=function(t){return t.zA="9a04f079-9840-4286-ab92-e65be0885f95",t.BA="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.UA="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.QA="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",t}({}),lv="urn:mpeg:dash:mp4protection:2011",dv="cenc",fv="sinf",gv="skd",_v="9a04f079-9840-4286-ab92-e65be0885f95",vv="urn:uuid:"+_v,bo="com.microsoft.playready",wv="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",vu="urn:uuid:"+wv,mv="com.widevine.alpha",pv="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Av="urn:uuid:"+pv,yv="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Ps="urn:uuid:"+yv,bv="com.apple.fps.1_0",Mv="com.apple.streamingkeydelivery",Tv="identity";r();var Sv=function(t){return t.zA="playready",t.BA="widevine",t.QA="fairplay",t.UA="clearkey",t.FA="aes128",t}({}),Ga={YA:Sv.zA,VA:bo,GA:"cenc",WA:_v,ZA:vv,HA:"PlayReady"},Nv={YA:Sv.BA,VA:mv,GA:"cenc",WA:wv,ZA:vu,HA:"Widevine"},Iv={YA:Sv.QA,VA:bv,GA:"skd",WA:yv,ZA:Ps,HA:"FairPlay"},Dv={YA:Sv.QA,VA:"com.apple.fps",GA:"sinf",WA:yv,ZA:Ps,HA:"FairPlay"},Ev={YA:Sv.UA,VA:"org.w3.clearkey",GA:"cenc",WA:pv,ZA:Av,HA:"ClearKey"},kv=[Ga,Nv,Iv,Ev],Lv=[Ga,Nv,Dv,Ev];function xv(t){return kv.filter((i=>i.ZA===t.toLowerCase()))}r();var Cv="function"==typeof String.prototype.replaceAll?(t,i,e)=>t.replaceAll(i,e):(t,i,e)=>t.split(i).join(e);function _t(t,i){return $t(t)&&-1!==t.indexOf(i)}var I="function"==typeof String.prototype.startsWith?(t,i)=>$t(t)&&t.startsWith(i):(t,i)=>$t(t)&&t.substr(0,i.length)===i,tt="function"==typeof String.prototype.endsWith?(t,i)=>$t(t)&&t.endsWith(i):(t,i)=>$t(t)&&t.substr(t.length-i.length,i.length)===i;function Wn(t,i){return t.length===i.length&&t.toUpperCase()===i.toUpperCase()}var jv="function"==typeof String.prototype.repeat?(t,i)=>t.repeat(i):(t,i)=>{let e=0|i;if(0===t.length||0===e)return"";let s=t,n="";for(;1==(1&e)&&(n+=s),e>>>=1,0!==e;)s+=s;return n},_c="function"==typeof String.prototype.padStart?(t,i,e)=>(void 0===e&&(e=" "),t.padStart(i,e)):(t,i,e)=>{void 0===e&&(e=" ");let s=e;const n=(0|i)-t.length;return n<=0?t:(n>s.length&&(s+=jv(s,n/s.length)),s.slice(0,n)+t)},Ov=(String.prototype.padEnd,16384),Rv="function"==typeof String.fromCodePoint?t=>t.length<=Ov?String.fromCodePoint(...t):zv(t,String.fromCodePoint):t=>{const i=[];for(let e of t)e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e);return Pv(i)};function Pv(t){return t.length<=Ov?String.fromCharCode(...t):zv(t,String.fromCharCode)}function zv(t,i){const e=[];for(let s=0;s<t.length;s+=Ov)e.push(i(...t.slice(s,s+Ov)));return e.join("")}function Bv(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}var Uv=Ro.vf&&Ro.mf>=42||Ro.Wf&&Ro.Hf>=38||Ro.zf||Ro.Ff||Ro.eg&&Ro.og>=29;function Qv(t,i){return _t(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[Ei({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[Ei({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function kl(){return void 0!==Kl&&"function"==typeof Kl.requestMediaKeySystemAccess}function wc(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var Fv=class{pA(){return this.yA(Nv)}vA(){return this.yA(Ev)}mA(){return this.yA(Ga)}wA(){return this.yA(Iv)}yA(t){const i=t.ZA,e=this.XA.get(i);if(e)return e;const s=this.AA(t,'video/mp4; codecs="avc1.42000a"');return this.XA.set(i,s),s}async AA(t,i){try{return await this.KA.qA(t.VA,[Qv(i,!0)]),!0}catch(e){try{return await this.KA.qA(t.VA,[Qv(i,!1)]),!0}catch(t){return!1}}}gA(){return this.JA||(this.JA=this.$A()),this.JA}async $A(){return"https:"!==Yf.protocol&&(!!Uv&&!await this.vA())}constructor(t){this.XA=ll(),this.JA=void 0,this.KA=t}};function qs(t,i){return Vv(t.slice(),i)}function Yv(t,i){const e=Vv(t,i);return e!==t&&Gv(e,void 0,t.length,t),t}function Vv(t,i){let e=t;const s=e.length;if(s<=1)return e;let n=new Array(s);for(let t=1;t<s;t*=2){Gv(e,i,t,n);const s=e;e=n,n=s}return e}function Gv(t,i,e,s){const n=t.length;let r=0;const o=2*e;let h,a,u,c,l;for(a=0;a<n;a+=o)for(u=a+e,h=u+e,u>n&&(u=n),h>n&&(h=n),c=a,l=u;;)if(c<u&&l<h)i&&i(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<h))break;s[r++]=t[l++]}}r(),r(),r(),r(),r(),r(),r(),r(),r();var nn=function(t){return t[t.Zr=0]="Zr",t[t.iy=1]="iy",t[t.ey=-1]="ey",t}({}),Wv=(t,i)=>(0|t)-(0|i),eo=(t,i)=>t===i?0:t<i?-1:t>i?1:j(t)?j(i)?0:1:-1;function Zv(t,i,e){return ce(t,i,e)?0:eo(t,i)}var Hv=(t,i)=>bf(t,i)?0:eo(t,i);var Xv="function"==typeof Array.prototype.find?(t,i)=>t.find(i):(t,i)=>{const e=Kv(t,i);return-1===e?void 0:t[e]},dl=Xv,qv="function"==typeof Array.prototype.findLast?(t,i)=>t.findLast(i):(t,i)=>{const e=Jv(t,i);return-1===e?void 0:t[e]},wo=qv,Kv="function"==typeof Array.prototype.findIndex?(t,i)=>t.findIndex(i):(t,i)=>{for(let e=0;e<t.length;e+=1){if(i(t[e],e,t))return e}return-1},Jv="function"==typeof Array.prototype.findLastIndex?(t,i)=>t.findLastIndex(i):(t,i)=>{for(let e=t.length-1;e>=0;e-=1){if(i(t[e],e,t))return e}return-1};function ra(t,i){const e=t.indexOf(i);return-1!==e&&(Mn(t,e),!0)}function Mn(t,i){0===i?t.shift():t.splice(i,1)}function $v(t,i){const e=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===i){n++,e.length-=1;break}e[s++]=t[n++]}for(;n<t.length;)e[s++]=t[n++];return e}function Qa(t,i){return-1!==t.indexOf(i)}function tw(t,i,e){if(t===i)return!0;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s+=1)if(!e(t[s],i[s]))return!1;return!0}function nt(t){t.length=0}function iw(t,i){if(t.length!==i.length)return!1;for(const e of t)if(!Qa(i,e))return!1;return!0}Array.prototype.flat;var Ms="function"==typeof Array.prototype.flatMap?(t,i)=>t.flatMap(i):(t,i)=>{const e=[];for(let s=0;s<t.length;s++)e.push(...i(t[s],s));return e};function ew(t,i){return nw(t,((t,e)=>eo(i(t),i(e))))}function sw(t,i){return rw(t,((t,e)=>eo(i(t),i(e))))}function nw(t,i){if(0!==t.length)return t.reduce(((t,e)=>i(t,e)<=0?t:e))}function rw(t,i){return nw(t,((t,e)=>i(e,t)))}function ow(t){return t.filter(((i,e)=>t.indexOf(i)===e))}function hw(t,i){return Promise.all(t.map(i)).then((i=>t.filter(((t,e)=>i[e]))))}function aw(t,i,e){if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],i[s]))return!1;return!0}function Ne(t,i,e){if(null!=i){if("object"!=typeof i&&"function"!=typeof i)throw new k("Object expected.");var s,n;if(e){if(!Pt)throw new k("Symbol.asyncDispose is not defined.");s=i[Pt]}if(void 0===s){if(!Dl)throw new k("Symbol.dispose is not defined.");s=i[Dl],e&&(n=s)}if("function"!=typeof s)throw new k("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(t){return Promise.reject(t)}}),t.stack.push({value:i,dispose:s,async:e})}else e&&t.stack.push({async:!0});return i}r(),r(),r();var uw="function"==typeof SuppressedError?SuppressedError:function(t,i,e){var s=new b(e);return s.name="SuppressedError",s.error=t,s.suppressed=i,s};function qr(t){function i(i){t.error=t.hasError?new uw(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var e,s=0;return function n(){for(;e=t.stack.pop();)try{if(!e.async&&1===s)return s=0,t.stack.push(e),Promise.resolve().then(n);if(e.dispose){var r=e.dispose.call(e.value);if(e.async)return s|=2,Promise.resolve(r).then(n,(function(t){return i(t),n()}))}else s|=1}catch(t){i(t)}if(1===s)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}r(),r();var cw=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];b.apply(this,i)};(cw.prototype=_.create(b.prototype)).constructor=cw;var Co=class extends cw{get name(){return"BaseError"}constructor(t,i){super(),this.message=t||"Unknown error",this.cause=i,b.captureStackTrace&&b.captureStackTrace(this,this.constructor)}};bs();var J=class extends Co{get name(){return"AbortError"}constructor(t,i){super(t||"Aborted",i)}};function Tu(t){return t instanceof b&&"AbortError"===t.name}function yi(t){if(t&&t.sy)throw new J}function V(t){if(Tu(t))throw t}function Ct(t){if(!Tu(t))throw t}function Ao(t,i){return i?new Promise(((e,s)=>{if(i.sy)return t.catch(Bn),s(new J);const n=()=>{i.oy(n),s(new J)};i.uy(n),t.then((t=>{i.oy(n),e(t)}),(t=>{i.oy(n),s(t)}))})):t}async function Vh(t,i){const e={stack:[],error:void 0,hasError:!1};try{Ne(e,i,!1);return await t}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}async function lw(t,i){const e={stack:[],error:void 0,hasError:!1};try{Ne(e,i,!1);return await t(i.ly)}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}r(),r();var dw=class{gy(){if(!this.sy&&!this._y){this.sy=!0;for(const t of this.vy.slice())t();this.wy()}}wy(){if(!this._y){this._y=!0;for(const t of this.py.slice())t();nt(this.vy),nt(this.py)}}uy(t){this._y||this.vy.push(t)}oy(t){this._y||ra(this.vy,t)}Ay(t){this._y||this.py.push(t)}yy(t){this._y||ra(this.py,t)}constructor(){this.sy=!1,this._y=!1,this.vy=[],this.py=[]}},Wt=class t{get ly(){return this.My}Ty(){this.My.gy()}wy(){this.My.wy()}Sy(t){const i=this.My;if(i.sy)return;if(t.sy)return void i.gy();if(i._y||t._y)return;const e=()=>{s(),i.gy()},s=()=>{t.oy(e),t.yy(s),i.oy(e),i.yy(s)};t.uy(e),t.Ay(s),i.uy(e),i.Ay(s)}Ny(){const i=new t,e=new t,s=i.ly,n=e.ly,r=this.My,o=()=>{s.sy&&n._y||n.sy&&s._y?r.gy():s._y&&n._y&&r.wy()};s.uy(o),n.uy(o),s.Ay(o),n.Ay(o),i.Sy(r),e.Sy(r);return r.Ay((()=>{s.oy(o),n.oy(o),s.yy(o),n.yy(o)})),[i,e]}static Iy(i){const e=new t;for(const t of i)void 0!==t&&e.Sy(t);return e}[Dl](){this.Ty()}constructor(){this.My=new dw}};bs(),Qi();var fw=Promise.resolve(),Fs="function"==typeof queueMicrotask?queueMicrotask:t=>{fw.then(t)};function X(t){t.then(Bn,Bn)}async function gw(t){try{return await Promise.all(t)}catch(i){throw await Promise.all(t.map((t=>t.catch(Bn)))),i}}function Dt(t,i){return new Promise(((e,s)=>{if(void 0!==i&&i.sy)return void s(new J);const n=Fe.Pg((()=>{void 0!==i&&i.oy(r),e()}),t),r=()=>{Fe.Rg(n),s(new J)};void 0!==i&&i.uy(r)}))}async function _w(t,i){const e={stack:[],error:void 0,hasError:!1};try{const s=Ne(e,new Wt,!1);return await Promise.race([t,Dt(i,s.ly).then((()=>{throw new b("Timeout")}))])}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}function vw(t,i,e){if("function"==typeof e)e.call(t,i);else for(const s of e)s.call(t,i)}var tu=class{yn(t,i){if("function"==typeof i)if("string"==typeof t)this.Dy(t,i);else for(const e of t)this.Dy(e,i)}Dy(t,i){const e=this.Ey[t];void 0===e?this.Ey[t]=i:"function"==typeof e?this.Ey[t]=[e,i]:0===this.Ly?e.push(i):this.Ey[t]=e.concat(i)}xy(t){if("function"!=typeof t)return;const i=this.Cy;void 0===i?this.Cy=t:"function"==typeof i?this.Cy=[i,t]:0===this.Ly?i.push(t):this.Cy=i.concat(t)}Bo(){this.Ey=nv(),this.Cy=void 0}yo(t){this.Ly++;const i=this.Ey[t.type],e=this.Cy;void 0!==i&&vw(this.jy,t,i),void 0!==e&&vw(this.jy,t,e),this.Ly--}fn(t,i){if("function"==typeof i)if("string"==typeof t)this.Oy(t,i);else for(const e of t)this.Oy(e,i)}Oy(t,i){const e=this.Ey[t];void 0!==e&&("function"==typeof e?e===i&&(this.Ey[t]=void 0):0===this.Ly?ra(e,i):this.Ey[t]=$v(e,i))}Ry(t){if("string"==typeof t)this.Ey[t]=void 0;else for(const i of t)this.Ey[i]=void 0}Py(t){const i=this.Cy;void 0!==i&&("function"==typeof i?i===t&&(this.Cy=void 0):0===this.Ly?ra(i,t):this.Cy=$v(i,t))}zy(t,i){return new Promise(((e,s)=>{if(i&&i.sy)return s(new J);const n=t=>{o(),e(t)},r=()=>{o(),s(new J)},o=()=>{this.fn(t,n),i&&i.oy(r)};this.yn(t,n),i&&i.uy(r)}))}constructor(t){this.Ey=nv(),this.Cy=void 0,this.Ly=0,this.Ds=t=>{this.yo(t)},this.jy=null!=t?t:this}},Su=class extends tu{yo(t){Fs((()=>{super.yo(t)}))}},gs=class extends tu{xy(t){super.xy(t)}Py(t){super.Py(t)}};r(),r();var Jr=class{constructor(t,i=new Date){this.type=t,this.date=i}};r();var Zi=function(t){return t.By="Uy",t.Qy="Fy",t.Yy="contentprotectionerror",t.Vy="contentprotectionsuccess",t.Gy="currentsourcechange",t.Wy="destroy",t.Zy="durationchange",t.Hy="emptied",t.Xy="encrypted",t.qy="ended",t.Ky="Jy",t.$y="ib",t.eb="sb",t.ob="hb",t.ub="loadstart",t.fb="manifestupdate",t.gb="nosupportedrepresentationfound",t._b="offline",t.vb="online",t.wb="pause",t.so="play",t.mb="progress",t.pb="ratechange",t.Ab="representationchange",t.yb="resize",t.bb="seeked",t.Mb="seeking",t.Tb="segmentnotfound",t.Sb="Nb",t.Ib="Db",t.ro="sourcechange",t.Eb="timeupdate",t.kb="volumechange",t.Lb="xb",t.Cb="jb",t.Ob="metricschange",t}({}),ww=["cenc"],mw=["cbcs","cbcs-1-9"],pw=class extends Jr{constructor(t){super(Zi.Cb),this.Rb=t}},sr=class extends Jr{constructor(t,i,e,s){super("Pb"),this.zb=t,this.Bb=i,this.Pb=e,this.Ub=s}},Aw=class extends Jr{constructor(){super("lt")}},So=function(t){return t.Xy="Qb",t.Fb="Yb",t}({}),yw=class extends Jr{constructor(t,i){super("Qb"),this.GA=t,this.Vb=i}},bw=class extends Jr{constructor(){super("Yb")}};r(),r(),r();var Mw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Tw=16383,Sw=/[\t\n\f\r ]/g;function No(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:Nw()}function Nw(){throw new b("Invalid base64 input")}function Zn(t){let i=t;Sw.test(i)&&(i=i.replace(Sw,""));let e=i.length;e%4==0&&e>=1&&"="===i[e-1]&&(e>=2&&"="===i[e-2]?e-=2:e-=1,i=i.substr(0,e));const s=e%4;if(1===s)return Nw();const n=0===s?0:4-s,r=new T(function(t,i){return 3*(t+i)/4-i}(e,n)),o=n>0?e-4:e;let h,a=0,u=0;for(;a<o;a+=4)h=No(i.charCodeAt(a))<<18|No(i.charCodeAt(a+1))<<12|No(i.charCodeAt(a+2))<<6|No(i.charCodeAt(a+3)),r[u++]=h>>16&255,r[u++]=h>>8&255,r[u++]=255&h;return 2===n?(h=No(i.charCodeAt(a))<<2|No(i.charCodeAt(a+1))>>4,r[u++]=255&h):1===n&&(h=No(i.charCodeAt(a))<<10|No(i.charCodeAt(a+1))<<4|No(i.charCodeAt(a+2))>>2,r[u++]=h>>8&255,r[u++]=255&h),r}function Iw(t,i,e){return Mw[t>>2]+Mw[(3&t)<<4|i>>4]+Mw[(15&i)<<2|e>>6]+Mw[63&e]}function Dw(t,i,e){const s=[];for(let n=i;n<e;n+=3)s.push(Iw(t[n],t[n+1],t[n+2]));return s.join("")}function Tc(t){const i=t.length,e=i%3,s=[],n=i-e;for(let i=0;i<n;i+=Tw)s.push(Dw(t,i,x.min(n,i+Tw)));if(1===e){const e=t[i-1];s.push(Mw[e>>2]+Mw[(3&e)<<4]+"==")}else if(2===e){const e=t[i-2],n=t[i-1];s.push(Mw[e>>2]+Mw[(3&e)<<4|n>>4]+Mw[(15&n)<<2]+"=")}return s.join("")}function Ew(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}function To(t,i){const e=i.tc,s=t.getUint8(e>>3),n=1<<7-(7&e);return i.Gb(1),(s&n)===n?1:0}function Ru(t,i,e){let s=0;for(let n=0;n<e;n++)s=2*s+To(t,i);return s}r(),r();var kw=class t{get tc(){return this.ic}Gb(t){this.ic+=t}Wb(t){this.ic=t}Zb(){return new t(this.tc)}constructor(t=0){this.ic=t}};var Lw=x.clz32||function(t){let i=32,e=t>>16;return e&&(i-=16,t=e),e=t>>8,e&&(i-=8,t=e),e=t>>4,e&&(i-=4,t=e),e=t>>2,e&&(i-=2,t=e),e=t>>1,e?i-2:i-t};function xw(t){if(t>=55296&&t<=57343)throw new b("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Cw(t,i){return t>>i&63|128}function jw(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(xw(t),i.push(t>>12&15|224),i.push(Cw(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(Cw(t,12)),i.push(Cw(t,6))),i.push(63&t|128)):i.push(t)}function Ow(t,i){if(i.tc>=t.length)throw new b("Invalid byte index");const e=255&t[i.tc];if(i.Gb(1),128==(192&e))return 63&e;throw new b("Invalid continuation byte")}function Rw(t,i){const e=i.tc;if(e>t.length)throw new b("Invalid byte index");if(e===t.length)return!1;const s=255&t[e];if(i.Gb(1),0==(128&s))return s;if(192==(224&s)){const e=(31&s)<<6|Ow(t,i);if(e>=128)return e;throw new b("Invalid continuation byte")}if(224==(240&s)){const e=(15&s)<<12|Ow(t,i)<<6|Ow(t,i);if(e>=2048)return xw(e),e;throw new b("Invalid continuation byte")}if(240==(248&s)){const e=(7&s)<<18|Ow(t,i)<<12|Ow(t,i)<<6|Ow(t,i);if(e>=65536&&e<=1114111)return e}throw new b("Invalid UTF-8 detected")}r(),r();var Pw=65279;var zw=[128,64,32,16,8,4,2,1],Bw=class{Hb(t){return Uw(this.Xb,t)}constructor(t){this.Xb=t}};function Uw(t,i){return(t&i)===i}function Ni(t,i){return Uw(t,zw[i])}function on(t,i){const e=t.getUint8(i.tc);return i.Gb(1),e}function Qw(t,i,e){t.setUint8(i.tc,e),i.Gb(1)}function ss(t,i,e){const s=zr(ka(t),i.tc,i.tc+e);return i.Gb(s.byteLength),s}function Fw(t,i,e){ka(t).set(ka(e),i.tc),i.Gb(e.byteLength)}function Yw(t,i,e){return i.tc+e<=t.byteLength}function Vw(t,i,e,s){return void 0===s&&(s=!1),s?function(t,i,e){let s=0,n=1;for(let r=0;r<e;r++)s+=on(t,i)*n,n*=256;return s}(t,i,e):function(t,i,e){let s=0;for(let n=0;n<e;n++)s=256*s+on(t,i);return s}(t,i,e)}function Gw(t,i){const e=t.getUint8(i.tc);return i.Gb(1),e}function Ks(t,i,e){void 0===e&&(e=!1);const s=t.getUint16(i.tc,e);return i.Gb(2),s}function Ww(t,i,e,s){void 0===s&&(s=!1),t.setUint16(i.tc,e,s),i.Gb(2)}function al(t,i,e){void 0===e&&(e=!1);const s=t.getUint32(i.tc,e);return i.Gb(4),s}function $(t,i,e,s){void 0===s&&(s=!1),t.setUint32(i.tc,e,s),i.Gb(4)}function Zw(t,i,e){void 0===e&&(e=!1);const s=al(t,i,e),n=al(t,i,e),r=e?n:s,o=e?s:n;return D.fromBits(o,r,!0)}function Hw(t,i,e,s){void 0===s&&(s=!1);const n=e.getHighBitsUnsigned(),r=e.getLowBitsUnsigned(),o=s?n:r;$(t,i,s?r:n,s),$(t,i,o,s)}function Xw(t,i){return Kw(t,i)}function ai(t,i,e){return Pv(cm(ss(t,i,e)))}function qw(t,i){const e=on(t,i);let s;return 0==(128&e)?s=e:192==(224&e)?s=64*(31&e)+(63&on(t,i)):224==(240&e)?s=4096*(15&e)+64*(63&on(t,i))+(63&on(t,i)):240==(248&e)&&(s=262144*(7&e)+4096*(63&on(t,i))+64*(63&on(t,i))+(63&on(t,i))),s}function Kw(t,i){return Jw(t,i,!0)}function Jw(t,i,e){const s=[];for(;i.tc<t.byteLength;){const n=on(t,i);if(e&&!n)break;s.push(n)}return Pv(s)}function $w(t,i,e){const s=e.length;for(let n=0;n<s;n+=1){Qw(t,i,e.charCodeAt(n))}}function tm(t,i){if(!(i.tc+2<=t.byteLength))return;const e=t.getUint8(i.tc),s=t.getUint8(i.tc+1);return(254!==e||255!==s)&&(255===e&&254===s||void 0)}function im(t,i){const e=tm(t,i);return void 0!==e&&i.Gb(2),jl(t,i,!0===e)}function jl(t,i,e){return void 0===e&&(e=!1),em(t,i,e,!0)}function em(t,i,e,s){const n=[];for(;i.tc+2<=t.byteLength;){const r=Ks(t,i,e);if(s&&!r)break;n.push(r)}return Pv(n)}function sm(t,i,e,s){void 0===s&&(s=!1);const n=e.length;for(let r=0;r<n;r+=1){Ww(t,i,e.charCodeAt(r),s)}}function nm(t){return Jw(Al(t),new da,!1)}function Tl(t){const i=new T(t.length);return $w(Al(i),new da,t),i}function rm(t,i){return void 0===i&&(i=!1),em(Al(t),new da,i,!1)}function om(t,i){void 0===i&&(i=!1);const e=new T(2*t.length);return sm(Al(e),new da,t,i),e}function hm(t,i){return i.tc+3<=t.byteLength&&(239===t.getUint8(i.tc)&&187===t.getUint8(i.tc+1)&&191===t.getUint8(i.tc+2))}function qo(t,i){return function(t,i,e){const s=[],n=hm(t,i);n&&i.Gb(3);for(;i.tc<t.byteLength;){const n=qw(t,i);if(void 0===n)break;if(e&&0===n)break;s.push(n)}return Rv(s)}(t,i,!0)}function tr(t){return function(t){return Rv(t)}(function(t,i){const e=[],s=new da;let n;if(!i){if(n=Rw(t,s),!1===n)return e;n===Pw||e.push(n)}for(;!1!==(n=Rw(t,s));)e.push(n);return e}(ka(t)))}function Ml(t){return new T(function(t){const i=[];for(const e of t)jw(e,i);return i}(function(t){const i=[];let e=0;const s=t.length;for(;e<s;){const n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){const s=t.charCodeAt(e++);56320==(64512&s)?i.push(((1023&n)<<10)+(1023&s)+65536):(i.push(n),e--)}else i.push(n)}return i}(t)))}function am(t,i){if(hm(t,i))return qo(t,i);if(void 0!==tm(t,i))return im(t,i);if(i.tc+4<=t.byteLength){if(0===t.getUint8(i.tc)&&0===t.getUint8(i.tc+2))return jl(t,i,!1);if(0===t.getUint8(i.tc+1)&&0===t.getUint8(i.tc+3))return jl(t,i,!0)}return qo(t,i)}function zr(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new T(t.buffer,t.byteOffset+i,e-i)}function Zo(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function Al(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ka(t){return new T(t.buffer,t.byteOffset,t.byteLength)}function um(t){return t instanceof ArrayBuffer||Pl(t)}function Cc(t){return t instanceof ArrayBuffer?new T(t):ka(t)}function vi(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),t.slice?t.slice(i,e):ja(zr(t,i,e))}function ja(t){if(t.slice)return t.slice(0);{const i=new T(t.byteLength);return i.set(t,0),i}}function cm(t){return[].slice.call(t)}var da=class t{get tc(){return this.ic}Gb(t){this.ic+=t}Wb(t){this.ic=t}Zb(){return new t(this.tc)}qb(){return new kw(this.tc<<3)}constructor(t=0){this.ic=t}};function lm(t){let i=t.toLowerCase(),e=0,s=0;I(i,"0x")&&(i=i.substring(2));const n=new T(x.ceil(i.length/2));for(1==(1&i.length)&&(e=1,n[s++]=C(i[0],16));e<i.length;e+=2)n[s++]=C(i.substr(e,2),16);return n}function dm(t){return.001*t}var fm=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],Pl=ArrayBuffer.isView||(t=>t&&Qa(fm,Cd.call(t)));function gm(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;return _m(new T(t),new T(i))}function _m(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;if(t.buffer===i.buffer&&t.byteOffset===i.byteOffset)return!0;for(let e=0;e<t.length;e+=1)if(t[e]!==i[e])return!1;return!0}function vm(t,i){return t===i||_m(Cc(t),Cc(i))}function ih(t){const i=t.reduce(((t,i)=>t+i.byteLength),0);return wm(t,i)}function wm(t,i){const e=new T(i);let s=0;for(const i of t)e.set(i,s),s+=i.byteLength;return e}function mm(t,i,e){const s=new T(t.byteLength+i.byteLength),n=zr(t,0,e),r=zr(t,e);return s.set(n),s.set(i,e),s.set(r,e+i.byteLength),s}function pm(t){return Zn(t).buffer}function Am(t){return Tc(new T(t))}function ym(t){return Tc(Tl(t))}var bm=new T([0]).buffer,ru=class{get Kb(){return this.Qu.length}Jb(t){for(const i of this.Qu)if(vm(i[0],t))return!0;return!1}$b(t){for(const i of this.Qu)if(vm(i[0],t))return i[1]}tM(t,i){for(const e of this.Qu)if(vm(e[0],t))return void(e[1]=i);this.Qu.push([t,i])}iM(t,i){this.Qu.forEach((i=>t(i[1],i[0])),i)}eM(){nt(this.Qu)}constructor(){this.Qu=[]}};r(),bs();var xh=class{sM(t){this.Kg&&(this.Kg(t),this.wy())}nM(t){this.Jg&&(this.Jg(t),this.wy())}Ty(){this.rM.catch(Bn),this.nM(new J)}Sy(t){t.then((t=>this.sM(t)),(t=>this.nM(t)))}wy(){this.Kg=void 0,this.Jg=void 0}constructor(){this.rM=new Promise(((t,i)=>{this.Kg=t,this.Jg=i}))}};function Mm(){return new T([8,4]).buffer}function Tm(t,i){return t===bo?function(t){if(t.byteLength<2*Sm.length)return t;const i=new DataView(t,0,2*Sm.length),e=rm(i,!0);if(e===Sm)return t;return function(t){const i='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',e='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+i+Am(t)+e;return om(s,!0).buffer}(t)}(i):i}r();var Sm="<PlayReady";r(),r();var Nm=class extends Co{constructor(t,i,e,s){super(t,s),this.oM=i,this.hM=e}};Uc(),r(),r(),r(),r(),r();var Im=function(t,i){return(Im=_.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)_.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)};function Do(t,i){if("function"!=typeof i&&null!==i)throw new k("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}Im(t,i),t.prototype=null===i?_.create(i):(e.prototype=i.prototype,new e)}function Dm(t,i,e){return t.indexOf?t.indexOf(i,e):Array.prototype.indexOf.call(t,i,e)}r(),r(),r(),r(),r(),r(),r();!function(){function t(t,i){this.aM=t,this.uM=i}t.prototype.get=function(t){var i=this.aM.get(t);if(0===this.uM||void 0===i)return i;var e=this.aM.get(t+1)||0,s=i&(1<<8-this.uM)-1,n=e>>8-this.uM;return(s<<this.uM)+n},t.prototype.getBit=function(t){if(!(t<0)){var i=this.aM.get(x.floor((t+this.uM)/8));if(void 0!==i)return(i&1<<7-this.uM-t%8)>0?1:0}},_.defineProperty(t.prototype,"bitLength",{get:function(){return this.aM.bitLength-this.uM},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"length",{get:function(){return this.aM.length},enumerable:!1,configurable:!0})}();r(),r();x.pow(2,-52);function Em(t,i,e){return x.min(x.max(t,i),e)}function km(t,i){return t>>8-i}function Lm(t,i){return t&(1<<i)-1}var xm=function(){function t(t){this.cM=t,this.lM=0,this.dM=0}return _.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.lM+this.dM},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"done",{get:function(){return this.lM===this.cM.length&&0===this.dM},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"location",{get:function(){return{byte:this.lM,bit:this.dM}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var i=new t(this.cM);return i.seek(this.lM,this.dM),i},t.prototype.canReadBits=function(t){return 8*this.lM+t+this.dM<=8*this.cM.length},t.prototype.canReadBytes=function(t){return 0===this.dM?this.lM+t<=this.cM.length:this.lM+t<this.cM.length},t.prototype.incBit=function(){this.dM++,this.dM>7&&(this.lM++,this.dM=0)},t.prototype.seek=function(t,i){this.lM=t,this.dM=i},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new b("Cannot read past end of buffer.");return this.cM.get(this.lM)>>7-this.dM&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new b("Cannot read past end of buffer.");if(0===this.dM)return this.cM.get(this.lM++);var t=Lm(this.cM.get(this.lM),8-this.dM),i=km(this.cM.get(this.lM+1),this.dM);return this.lM++,t<<this.dM|i},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new b("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readBit());return i},t.prototype.readUInt=function(t){if(t>32)throw new b("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new b("Cannot read past end of buffer.");var i=0;if(0===this.dM&&t%8==0)for(var e=t-8;e>=0;e-=8)i|=this.readByte()<<e;else for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i},t.prototype.readInt=function(t){if(t>32)throw new b("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new b("Cannot read past end of buffer.");var i=this.readUInt(t);return 0===(i&1<<t-1)?i:i-x.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var i=1<<t;return i+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new b("Skipping over the buffer edge is not allowed.");var i=this.dM+t;this.lM+=i>>3,this.dM=7&i},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new b("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readByte());return String.fromCharCode.apply(String,i)},t}();r(),r(),r();var Cm=function(t,i){return t===i?0:t<i?-1:t>i?1:j(t)?j(i)?0:1:-1},As=function(){function t(){this.fM=[],this.gM=[],this._M=0}return t.from=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var s=new t,n=0,r=i;n<r.length;n++){var o=r[n];s.pushRange(o)}return s},t.prototype.pushRange=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=t.length),e<0)throw new b("The buffer length must be positive.");if(0!==e){if(0===this.gM.length)this.gM.push(0);else{var s=this.gM[this.gM.length-1]+this.fM[this.fM.length-1].length;this.gM.push(s)}this.fM.push(t.subarray(i,i+e)),this._M+=e}},t.prototype.concat=function(i){var e=new t;return e.pushRange(this.join()),e.pushRange(i.join()),e},t.prototype.copy=function(t,i,e,s){if(void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=this.length),i<0||e<0||s<0)throw new RangeError;return this.slice(e,s).copyInternal(t,i)},t.prototype.copyInternal=function(t,i){for(var e=0,s=i,n=0,r=this.fM;n<r.length;n++){var o=r[n];t.set(o,s),e+=o.length,s+=o.length}return e},t.prototype.clear=function(){this.fM=[],this.gM=[],this._M=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var i=this.findContainingBufferIndex(t),e=t-this.gM[i];return this.fM[i][e]}},_.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.fM.length<1)return-1;if(this.fM.length>1){var i=this.join();this.clear(),this.pushRange(i)}var e=this.fM[0];return"number"==typeof t?Dm(e,t):"undefined"!=typeof Buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength).indexOf(t):function(t,i){if(0===i.length)return 0;for(var e=i[0],s=i.length,n=t.length-s,r=0;r<=n&&!((r=Dm(t,e,r))<0||r>n);r++){for(var o=r+1,h=r+s,a=1;o<h&&t[o]===i[a];o++,a++);if(o===h)return r}return-1}(e,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,i,e){if(0!==t.length){var s=0,n=t.length-1;if(1!==e(t[s],i)){if(1===e(i,t[n]))return n;for(;s!==n;){var r=x.ceil((s+n)/2);e(t[r],i)<=0?s=r:n=r-1}return s}}}(this.gM,t,Cm)},t.prototype.join=function(){if(1===this.fM.length)return this.fM[0];var t=new T(this.length);return this.copyInternal(t,0),t},_.defineProperty(t.prototype,"length",{get:function(){return this._M},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,i){if(i<=0||i>4)throw new b("Expected byteLength to be between 0 and 4 but was "+i);if(t<0||t>this.length-i)throw new b("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-i)+")");if(1===i)return this.get(t);for(var e=0,s=0;s<i;s++)e+=this.get(t+s)*x.pow(2,8*(i-s-1));return e},t.prototype.slice=function(i,e){void 0===e&&(e=this.length);var s=Em(i,0,this.length),n=Em(e,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,o=this.findContainingBufferIndex(s),h=this.fM[o],a=s,u=a-this.gM[o];a+h.length-u<n;)r.pushRange(h,u,h.length-u),o+=1,u=(a+=h.length-u)-this.gM[o],h=this.fM[o];var c=n-a;return r.pushRange(h,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var i=this.length-1,e=this.fM.length-1,s=this.fM[e],n=s.length-1;i>=0&&e>=0;){if(0!==s[n])break;if(0===n){if(0===e)return new t;e-=1,n=(s=this.fM[e]).length-1}else n-=1;i-=1}return this.slice(0,i+1)},t}(),jm=function(){function t(i){this.vM=i||t.BUFFER_CHUNK_SIZE,this.wM=!1,this.mM=new As,this.cM=new T(this.vM),this.pM=0,this.AM=0,this.dM=7}return t.prototype.closeByte=function(){this.cM[this.pM++]=this.AM,this.pM>=this.vM&&this.closeBuffer(),this.AM=0,this.dM=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.pM&&(this.mM.pushRange(this.cM,0,this.pM),t&&(this.cM=new T(this.vM)),this.pM=0)},_.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.dM},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.wM)throw new b("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.wM=!0,this.mM},t.prototype.writeBit=function(t){if(this.wM)throw new b("Cannot write to a closed BitWriter.");this.AM|=t<<this.dM,0===this.dM?this.closeByte():this.dM--},t.prototype.writeByte=function(t){if(this.wM)throw new b("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.AM=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var i=this.dM;this.AM|=km(t,i+1),this.closeByte(),this.AM=Lm(t,8-i)<<i+1,this.dM=i},t.prototype.writeBits=function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.wM)throw new b("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.pM+t.length<=this.vM?(this.cM.set(t,this.pM),this.pM+=t.length,this.pM===this.vM&&this.closeBuffer()):(this.closeBuffer(),this.mM.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var i=this.dM;this.AM|=km(t[0],i+1),this.closeByte();for(var e=1;e<t.length;e++){var s=Lm(t[e-1],8-i),n=km(t[e],i+1);this.AM=s<<i+1|n,this.closeByte()}this.AM=Lm(t[t.length-1],8-i)<<i+1,this.dM=i}},t.prototype.writeUInt=function(t,i){if(t<0)throw new b("Received a negative number.");if(i>32)throw new b("The max bitlength that can be provided is 32.");if(t>=x.pow(2,i))throw new b("Uint "+t+" cannot be represented in "+i+" bit(s).");if(this.isWritingStartBit&&i%8==0)for(var e=i-8;e>=0;e-=8)this.writeByte(t>>e&255);else for(e=i-1;e>=0;e--)this.writeBool((t&1<<e)>0)},t.prototype.writeInt=function(t,i){if(i>32)throw new b("The max bitlength that can be provided is 32.");if(x.abs(t)>=x.pow(2,i-1))throw new b("Signed integer "+t+" cannot be represented in "+i+" bit(s).");t<0?this.writeUInt(t+x.pow(2,i),i):this.writeUInt(t,i)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new b("Received a negative number.");for(var i=x.floor(x.log2(t+1))+1,e=0;e<i-1;e++)this.writeBit(0);this.writeUInt(t+1,i)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var i=function(t){for(var i=new T(t.length),e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}(t),e=0;e<i.length;e++)this.writeByte(i[e])},t.BUFFER_CHUNK_SIZE=1024,t}();r();var Om=function(){function t(t){this.rb=new As,this.o_=t}return t.prototype.closeWriter=function(){void 0!==this.o_&&(this.rb=this.rb.concat(this.o_.close()),this.o_=void 0)},_.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.o_&&(this.o_=new jm),this.o_},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),Gu=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new b("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(i){var e=this.getSize(),s=e>=t.LARGE_SIZE/8,n=16===this.boxType.length;i.writeUInt(s?1:e,32),i.writeString(n?"uuid":this.boxType),s&&(i.writeUInt(x.floor(e/t.LARGE_SIZE),32),i.writeUInt(e%t.LARGE_SIZE,32)),n&&i.writeString(this.boxType)},t.prototype.getSize=function(){var i=8+(this.boxType.length>4?16:0),e=this.getBoxContentSize()+i;return e>=t.LARGE_SIZE/8&&(e+=8),e},t.prototype.serialize=function(){var t=new Om;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=x.pow(2,32),t}();function ti(t,i){return t instanceof D?64===i:t<x.pow(2,i)}function Nh(t,i){return x.round(t*x.pow(2,i))}function jh(t,i){for(var e=0;e<i.length;e++)t.writeByte(i[e])}function Rm(t,i){return t/x.pow(2,i)}r();var le=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!ti(e,8))throw new b("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Do(i,t),_.defineProperty(i.prototype,"flags",{get:function(){return this.Lv},set:function(t){this.Lv=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new b("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(Gu);r(),r();var Pm=function(t){function i(i,e){var s=t.call(this,i)||this;return s.data=e,s}return Do(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(As.from(this.data))},i}(Gu);r(),r();var zm=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();r();var Bm=16384;function Um(t){var i=t.length;if(i<=Bm)return String.fromCharCode.apply(String,t);for(var e=[],s=0;s<i;s+=Bm)e.push(String.fromCharCode.apply(String,t.slice(s,s+Bm)));return e.join("")}var Qm=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,i){return(t&i)===i}(this.raw,t)},t}();function Fm(t,i){var e=t.getUint8(i.offset);return i.shift(1),e}function Ym(t,i,e){var s=qm($m(t),i.offset,i.offset+e);return i.shift(s.byteLength),s}function Vm(t,i,e){return i.offset+e<=t.byteLength}function Gm(t,i,e){void 0===e&&(e=!1);var s=t.getUint32(i.offset,e);return i.shift(4),s}function Wm(t,i,e){void 0===e&&(e=!1);var s=Gm(t,i,e),n=Gm(t,i,e),r=e?n:s,o=e?s:n;return D.fromBits(o,r,!0)}function Zm(t,i,e){return Um(function(t){return[].slice.call(t)}(Ym(t,i,e)))}function Hm(t,i){var e,s=Fm(t,i);return 0==(128&s)?e=s:192==(224&s)?e=64*(31&s)+(63&Fm(t,i)):224==(240&s)?e=4096*(15&s)+64*(63&Fm(t,i))+(63&Fm(t,i)):240==(248&s)&&(e=262144*(7&s)+4096*(63&Fm(t,i))+64*(63&Fm(t,i))+(63&Fm(t,i))),e}function Xm(t,i){return function(t,i,e){var s=[],n=function(t,i){return i.offset+3<=t.byteLength&&239===t.getUint8(i.offset)&&187===t.getUint8(i.offset+1)&&191===t.getUint8(i.offset+2)}(t,i);n&&i.shift(3);for(;i.offset<t.byteLength;){var r=Hm(t,i);if(void 0===r)break;if(e&&0===r)break;s.push(r)}return function(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return Um(i)}(s)}(t,i,!0)}function qm(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new T(t.buffer,t.byteOffset+i,e-i)}function Km(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function Jm(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function $m(t){return new T(t.buffer,t.byteOffset,t.byteLength)}var tp=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new zm(this.offset<<3)},t}();r();var ip=function(){function t(t,i){this.data=t,this.cursor=i}return t.prototype.nextUint8=function(){return Fm(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getUint16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return Gm(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt32(i.offset,e);return i.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,i,e){void 0===e&&(e=!1);var s=Gm(t,i,e),n=Gm(t,i,e),r=e?n:s,o=e?s:n;return D.fromBits(o,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return Wm(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return Ym(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,i,e){for(var s=[],n=0;n<e;n++)s.push(Gm(t,i));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return Zm(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return Xm(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function fu(t,i){return t.type===i}var ep=8;function sp(t){var i=function(t,i){var e=[];for(;i.offset<t.byteLength;){var s=np(t,i);if(!s.complete)return{complete:!1,boxes:e};e.push(s.box)}return{complete:!0,boxes:e}}(t.data,t.cursor);if(!i.complete)throw new b("Data incomplete");return i.boxes}function np(t,i){var e=i.offset,s=function(t,i){var e=i.offset;if(!Vm(t,i,ep)){return{complete:!1,neededOffset:r=i.offset+ep}}var s=Gm(t,i),n=Zm(t,i,4);if(1===s){if(!Vm(t,i,8)){var r=i.offset+8;return i.seek(e),{complete:!1,neededOffset:r}}s=Wm(t,i).toNumber()}if("uuid"===n){if(!Vm(t,i,16)){r=i.offset+16;return i.seek(e),{complete:!1,neededOffset:r}}n=Zm(t,i,16)}var o=i.offset,h={type:n,size:s,headerSize:o-e};return{complete:!0,header:h}}(t,i);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-e);var o=e+r;if(o>t.byteLength){var h=o;return i.seek(e),{complete:!1,neededOffset:h}}var a={type:n.type,offset:e,data:new ip(Km(t,e,o),new tp(n.headerSize))};return i.seek(o),{complete:!0,box:a}}function Y(t){return{version:t>>24,flags:new Qm(16777215&t)}}function rp(t,i){var e,s,n,r;return 1===i?(e=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(e=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:e,modification:s,scale:n,duration:r}}function op(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function hp(t){var i=t.nextUint32Array(9);return{a:Rm(i[0],16),b:Rm(i[1],16),u:Rm(i[2],30),c:Rm(i[3],16),d:Rm(i[4],16),v:Rm(i[5],30),x:Rm(i[6],16),y:Rm(i[7],16),w:Rm(i[8],30)}}function ho(t){return new Pm(t.type,qm($m(t.data.data),t.data.cursor.offset))}var ap=function(t){function i(i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=e,r.handlerType=i,r}return Do(i,t),_.defineProperty(i.prototype,"handlerType",{get:function(){return this.yM},set:function(t){this.yM=t},enumerable:!1,configurable:!0}),i.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(e=null===(i=this.name)||void 0===i?void 0:i.length)&&void 0!==e?e:0)+1},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeString(this.handlerType),this.serializeReserved(i),this.name&&i.writer.writeString(this.name),i.writer.writeByte(0)},i}(le);function up(t){var i=t.data,e=Y(i.nextUint32()),s=e.version,n=e.flags;i.skip(4);var r=i.nextChars(4);i.skip(12);var o=i.nextUTF8String();return new ap(r,o,s,n.raw)}!function(t){function i(){return t.call(this,"mdir")||this}Do(i,t),i.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(ap);r(),r(),r();var Nl=function(){function t(t,i){void 0===i&&(i=!1),this.fixed28BitMode=i,this.tag=t}return t.prototype.encodeSize=function(t){for(var i=[];t>0;)i.length>0&&(i[i.length-1]+=128),i.push(t%128),t>>=7;if(this.fixed28BitMode)for(;i.length<4;)i.push(128);return i.reverse()},_.defineProperty(t.prototype,"tag",{get:function(){return this.bM},set:function(t){if(!ti(t,8))throw new b("Provided tag does not fit in 8 bits.");this.bM=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var i=0,e=this.encodeSize(this.getDescriptorSize());i<e.length;i++){var s=e[i];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}();r();!function(t){function i(i,e,s,n,r,o,h){void 0===h&&(h={});var a=t.call(this,4,h.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=o,a.objectTypeIndication=i,a.streamType=e,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}Do(i,t),_.defineProperty(i.prototype,"objectTypeIndication",{get:function(){return this.MM},set:function(t){if(!ti(t,8))throw new b("Provided objectTypeIndication does not fit in 8 bits.");this.MM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"streamType",{get:function(){return this.TM},set:function(t){if(!ti(t,6))throw new b("Provided streamType does not fit in 6 bits.");this.TM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.SM},set:function(t){if(!ti(t,24))throw new b("Provided bufferSizeDb does not fit in 24 bits.");this.SM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.NM},set:function(t){if(!ti(t,32))throw new b("Provided maxBitrate does not fit in 32 bits.");this.NM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"avgBitrate",{get:function(){return this.IM},set:function(t){if(!ti(t,32))throw new b("Provided avgBitrate does not fit in 32 bits.");this.IM=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var i=0,e=this.decoderSpecificInfo;i<e.length;i++){e[i].serialize(t)}}}(Nl);r();!function(t){function i(i,e){void 0===e&&(e={});var s=t.call(this,5,e.fixed28BitMode)||this;return s.data=i,s}Do(i,t),i.prototype.getDescriptorSize=function(){return this.data.length},i.prototype.serializeDescriptorContent=function(t){t.concat(As.from(this.data))}}(Nl);r(),r();var cp=function(t){function i(i){void 0===i&&(i=!1);var e=t.call(this,6,i)||this;return e.predefined=2,e}return Do(i,t),i.prototype.getDescriptorSize=function(){return 1},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},i}(Nl);!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=i,r.streamPriority=e,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new cp(n.fixed28BitMode),r}Do(i,t),_.defineProperty(i.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"esId",{get:function(){return this.DM},set:function(t){if(!ti(t,16))throw new b("Provided esId does not fit in 16 bits.");this.DM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"streamPriority",{get:function(){return this.EM},set:function(t){if(!ti(t,5))throw new b("Provided streamPriority does not fit in 5 bits.");this.EM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"dependsOnEsId",{get:function(){return this.kM},set:function(t){if(t&&!ti(t,16))throw new b("Provided dependsOnEsId does not fit in 16 bits.");this.kM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"ocrEsId",{get:function(){return this.LM},set:function(t){if(t&&!ti(t,16))throw new b("Provided ocrEsId does not fit in 16 bits.");this.LM=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},i.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(Nl);r(),r(),r(),r(),r();var lp=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.boxes=[],i}return Do(i,t),i.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serialize=function(){for(var i=t.prototype.serialize.call(this),e=0,s=this.boxes;e<s.length;e++){var n=s[e];i=i.concat(n.serialize())}return i},i}(Gu),Wh=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Do(i,t),i.prototype.serializeBoxContent=function(t){},i.prototype.getBoxContentSize=function(){return 0},i}(lp),dp=function(t){function i(i,e){var s=t.call(this,i)||this;return s.dataReferenceIndex=e,s}return Do(i,t),_.defineProperty(i.prototype,"dataReferenceIndex",{get:function(){return this.xM},set:function(t){if(!ti(t,16))throw new b("Provided dataReferenceIndex does not fit in 16 bits.");this.xM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){for(var i=0;i<6;i++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},i}(Wh),fp=function(t){function i(i,e,s,n){var r,o,h=this;return(h=t.call(this,i,e)||this).extra=n,h.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,h.sampleSize=null!==(o=s.sampleSize)&&void 0!==o?o:16,h.sampleRate=s.sampleRate,h}return Do(i,t),_.defineProperty(i.prototype,"channelCount",{get:function(){return this.CM},set:function(t){if(!ti(t,16))throw new b("Provided channelCount does not fit in 16 bits.");this.CM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleSize",{get:function(){return this.jM},set:function(t){if(!ti(t,16))throw new b("Provided sampleSize does not fit in 16 bits.");this.jM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleRate",{get:function(){return this.OM},set:function(t){if(!ti(Nh(t,16),32))throw new b("Provided rate does not fit in 32 bits (fixed 16.16).");this.OM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(e=null===(i=this.extra)||void 0===i?void 0:i.length)&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.channelCount,16),i.writer.writeUInt(this.sampleSize,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(Nh(this.sampleRate,16),32),this.extra&&jh(i.writer,this.extra)},i}(dp);r();!function(t){function i(i){var e=t.call(this,"stco",0,0)||this;return e.entries=i,e}Do(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.RM},set:function(t){if(!ti(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!ti(t,32)})))throw new b("Not all entries can be represented in 32 bits.");this.RM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(le);r();!function(t){function i(i){var e=t.call(this,"clap")||this;return e.cleanApertureWidthN=i.cleanApertureWidthN,e.cleanApertureWidthD=i.cleanApertureWidthD,e.cleanApertureHeightN=i.cleanApertureHeightN,e.cleanApertureHeightD=i.cleanApertureHeightD,e.horizOffN=i.horizOffN,e.horizOffD=i.horizOffD,e.vertOffN=i.vertOffN,e.vertOffD=i.vertOffD,e}Do(i,t),_.defineProperty(i.prototype,"cleanApertureWidthN",{get:function(){return this.PM},set:function(t){if(!ti(t,32))throw new b("Provided cleanApertureWidthN does not fit in 32 bits.");this.PM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureWidthD",{get:function(){return this.zM},set:function(t){if(!ti(t,32))throw new b("Provided cleanApertureWidthD does not fit in 32 bits.");this.zM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureHeightN",{get:function(){return this.BM},set:function(t){if(!ti(t,32))throw new b("Provided cleanApertureHeightN does not fit in 32 bits.");this.BM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureHeightD",{get:function(){return this.UM},set:function(t){if(!ti(t,32))throw new b("Provided cleanApertureHeightD does not fit in 32 bits.");this.UM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizOffN",{get:function(){return this.QM},set:function(t){if(!ti(t,32))throw new b("Provided horizOffN does not fit in 32 bits.");this.QM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizOffD",{get:function(){return this.FM},set:function(t){if(!ti(t,32))throw new b("Provided horizOffD does not fit in 32 bits.");this.FM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vertOffN",{get:function(){return this.YM},set:function(t){if(!ti(t,32))throw new b("Provided vertOffN does not fit in 32 bits.");this.YM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vertOffD",{get:function(){return this.VM},set:function(t){if(!ti(t,32))throw new b("Provided vertOffD does not fit in 32 bits.");this.VM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 32},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(Gu);r();!function(t){function i(i,e){var s=t.call(this,"ctts",i,0)||this;return s.entries=e,s}Do(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.RM},set:function(t){if(!ti(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!ti(t.sampleCount,32)||!ti(t.sampleOffset,32)})))throw new b("Not all entries can be represented in 64 bits.");this.RM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),0===this.version?i.writer.writeUInt(n.sampleOffset,32):1===this.version&&i.writer.writeInt(n.sampleOffset,32)}}}(le);r();!function(t){function i(i){var e=t.call(this,"url ",0,void 0===i?1:0)||this;return e.location=i,e}Do(i,t),_.defineProperty(i.prototype,"location",{get:function(){return this.GM},set:function(t){this.flags=void 0===t?1:0,this.GM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this);return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(le);r();!function(t){function i(i,e,s){var n=t.call(this,"urn ",0,s)||this;return n.name=i,n.location=e,n}Do(i,t),_.defineProperty(i.prototype,"location",{get:function(){return this.GM},set:function(t){if(1&this.flags)throw new b("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.GM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.name),i.writer.writeByte(0),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(le);r();!function(t){function i(){return t.call(this,"dinf")||this}Do(i,t)}(Wh);r(),r();var gp=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!ti(e,8))throw new b("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Do(i,t),_.defineProperty(i.prototype,"flags",{get:function(){return this.Lv},set:function(t){this.Lv=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new b("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(lp);!function(t){function i(){return t.call(this,"dref",0,0)||this}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(gp);r(),r();var _p=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"elst",e,s)||this;return n.entries=i,n}return Do(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"entries",{get:function(){return this.RM},set:function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!ti(s.segmentDuration,this.bitSize))throw new b("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!ti(s.mediaTime,this.bitSize))throw new b("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!ti(s.mediaRateInteger,16))throw new b("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!ti(s.mediaRateFraction,16))throw new b("Provided mediaRateFraction does not fit in 16 bits.")}this.RM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(i)},i}(le),vp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Do(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(_p),wp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Do(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(_p);function mp(t){for(var i=t.data,e=Y(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),o=[],h=0;h<r;h++){var a=void 0,u=void 0;0===s?(a=i.nextUint32(),u=i.nextInt32()):(a=i.nextUint64(),u=i.nextInt64());var c=i.nextInt16(),l=i.nextInt16();o.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new vp(o,n.raw):new wp(o,n.raw)}var pp=function(t){function i(){return t.call(this,"edts")||this}return Do(i,t),i}(Wh);function Ap(t){for(var i=new pp,e=0,s=sp(t.data);e<s.length;e++){var n=s[e];fu(n,"elst")?i.boxes.push(mp(n)):i.boxes.push(ho(n))}return i}r(),r();var yp=function(t){function i(i,e,s,n){var r=t.call(this,i)||this;return r.majorBrand=e,r.minorVersion=s,r.compatibleBrands=n,r}return Do(i,t),_.defineProperty(i.prototype,"majorBrand",{get:function(){return this.WM},set:function(t){if(4!==t.length)throw new b("the provided major brand does not conform to the 4 character requirement");this.WM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"minorVersion",{get:function(){return this.ZM},set:function(t){if(!ti(t,32))throw new b("the provided minor version does not fit in 32 bits.");this.ZM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"compatibleBrands",{get:function(){return this.HM},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new b("Some of the compatible brands do not conform to the 4 character requirement");this.HM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var i=0,e=this.compatibleBrands;i<e.length;i++){var s=e[i];t.writer.writeString(s)}},i}(Gu),bp=function(t){function i(i,e,s){return t.call(this,"ftyp",i,e,s)||this}return Do(i,t),i}(yp);function Mp(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new bp(e,s,n)}r();var Tp=function(t){function i(i,e){void 0===e&&(e="free");var s=t.call(this,e)||this;return s.data=i,s}return Do(i,t),i.prototype.getBoxContentSize=function(){var t,i;return null!==(i=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==i?i:0},i.prototype.serializeBoxContent=function(t){this.data&&t.concat(As.from(this.data))},i}(Gu);r(),r();var Sp=function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=i.creation,r.modificationTime=i.modification,r.timescale=i.scale,r.duration=i.duration,r.language=e,r}return Do(i,t),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.XM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.qM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.KM},set:function(t){if(!ti(t,32))throw new b("Provided sequence number does not fit in 32 bits.");this.KM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.JM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.JM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"language",{get:function(){return this.$M},set:function(t){if(!Ep(t))throw new b("Expected an ISO-639-2/T language code");this.$M=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMdiaContent(i),i.writer.writeBit(0);for(var e=0,s=this.language;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.charCodeAt(0)-96,5)}i.writer.writeUInt(0,16)},i}(le),Np=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,0,s)||this}return Do(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(Sp),Ip=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,1,s)||this}return Do(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Sp);function Dp(t){var i=t.data,e=Y(i.nextUint32()),s=e.version,n=e.flags,r=rp(i,s),o=new xm(As.from(i.nextUint8Array(2)));o.skipBits(1);for(var h=[],a=0;a<3;a++)h.push(o.readUInt(5));var u=h.map((function(t){return String.fromCharCode(t+96)})).join("");return Ep(u)||(u="und"),i.skip(2),0===s?new Np(r,u,n.raw):new Ip(r,u,n.raw)}function Ep(t){return/^[a-z]{3}$/.test(t)}var kp=function(t){function i(){return t.call(this,"mdia")||this}return Do(i,t),i}(Wh);function Lp(t){for(var i=new kp,e=0,s=sp(t.data);e<s.length;e++){var n=s[e];fu(n,"mdhd")?i.boxes.push(Dp(n)):fu(n,"hdlr")?i.boxes.push(up(n)):i.boxes.push(ho(n))}return i}r();var xp=function(t){function i(){var i=t.call(this,"mdat")||this;return i.data=new As,i}return Do(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(this.data)},i}(Gu);function Cp(t){var i=t.data,e=i.nextUint8Array(i.data.byteLength-i.cursor.offset),s=new xp;return s.data.pushRange(e),s}r();!function(t){function i(){return t.call(this,"minf")||this}Do(i,t)}(Wh);r();var jp;!function(t){function i(i){var e=t.call(this,"meta",0,0)||this;return e.handler=i,e}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.handler.serialize())}}(gp);r(),r(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(jp||(jp={})),r();var Op,Rp,Pp={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function zp(t,i){i.writer.writeUInt(Nh(t.a,16),32),i.writer.writeUInt(Nh(t.b,16),32),i.writer.writeUInt(Nh(0,30),32),i.writer.writeUInt(Nh(t.c,16),32),i.writer.writeUInt(Nh(t.d,16),32),i.writer.writeUInt(Nh(0,30),32),i.writer.writeUInt(Nh(t.x,16),32),i.writer.writeUInt(Nh(t.y,16),32),i.writer.writeUInt(Nh(1,30),32)}function Bp(t,i){var e,s,n,r;i.writer.writeUInt(null!==(e=t.isLeading)&&void 0!==e?e:Op.UNKNOWN,2),i.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:Rp.UNKNOWN,2),i.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:Rp.UNKNOWN,2),i.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:Rp.UNKNOWN,2)}function Up(t,i){var e,s,n;i.writer.writeUInt(0,4),Bp(t,i),i.writer.writeUInt(null!==(e=t.samplePaddingValue)&&void 0!==e?e:0,3),i.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),i.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}r(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(Op||(Op={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(Rp||(Rp={})),r(),r();var Qp=function(){};r(),r(),r();var Fp=function(t){function i(i,e,s){var n=t.call(this,"pssh",i,0)||this;return n.systemId=e,n.data=s,n}return Do(i,t),_.defineProperty(i.prototype,"systemId",{get:function(){return this.tT},set:function(t){if(16!==t.length)throw new b("Provided systemId length is not 16.");this.tT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"data",{get:function(){return this.Xp},set:function(t){if(!ti(t.length,32))throw new b("Provided data length does not fit in 32 bits.");this.Xp=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},i.prototype.serializeVersionBoxContent=function(t){},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(As.from(this.systemId)),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.data.length,32),i.concat(As.from(this.data))},i}(le),Yp=function(t){function i(i,e){return t.call(this,0,i,e)||this}return Do(i,t),i}(Fp),Vp=function(t){function i(i,e,s){var n=t.call(this,1,i,e)||this;return n.kIds=s,n}return Do(i,t),_.defineProperty(i.prototype,"kIds",{get:function(){return this.iT},set:function(t){if(!ti(t.length,32))throw new b("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new b("Not all provided key ids are 16 bytes long.");this.iT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var i=0,e=this.kIds;i<e.length;i++){var s=e[i];t.concat(As.from(s))}},i}(Fp);function Gp(t){var i=t.data.nextUint8();t.data.skip(3);var e=t.data.nextUint8Array(16),s=[];if(1===i)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var o=t.data.nextUint32(),h=t.data.nextUint8Array(o);return 1===i?new Vp(e,h,s):new Yp(e,h)}r(),r();var Wp=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"mehd",e,s)||this;return n.fragmentDuration=i,n}return Do(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"fragmentDuration",{get:function(){return this.eT},set:function(t){if(!ti(t,this.bitSize))throw new b("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.eT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(le),Zp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Do(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration,32)},i}(Wp),Hp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Do(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),i.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},i}(Wp);function Xp(t){var i=t.data,e=Y(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new Zp(i.nextUint32(),n.raw):new Hp(i.nextUint64(),n.raw)}r();var qp=function(t){function i(i,e,s,n){void 0===e&&(e={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,o,h,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=i,a.defaultSampleDescriptionIndex=null!==(r=null==e?void 0:e.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(o=e.sampleDuration)&&void 0!==o?o:0,a.defaultSampleSize=null!==(h=e.sampleSize)&&void 0!==h?h:0,a.defaultSampleFlags=e.sampleFlags,a}return Do(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.sT},set:function(t){if(!ti(t,32))throw new b("Provided track id does not fit in 32 bits.");this.sT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.nT},set:function(t){if(!ti(t,32))throw new b("Provided default sample description index does not fit in 32 bits.");this.nT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.rT},set:function(t){if(!ti(t,32))throw new b("Provided default sample duration does not fit in 32 bits.");this.rT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.oT},set:function(t){if(!ti(t,32))throw new b("Provided default sample size does not fit in 32 bits.");this.oT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.hT},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!ti(t.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!ti(t.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");this.hT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},i.prototype.serializeBoxContent=function(i){var e;t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),i.writer.writeUInt(this.defaultSampleDescriptionIndex,32),i.writer.writeUInt(this.defaultSampleDuration,32),i.writer.writeUInt(this.defaultSampleSize,32),Up(null!==(e=this.defaultSampleFlags)&&void 0!==e?e:{},i)},i}(le);function Kp(t){var i=t.data,e=Y(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),o=i.nextUint32(),h=i.nextUint32(),a=i.nextUint32(),u=op(new xm(As.from(i.nextUint8Array(4))));return new qp(r,{sampleDescriptionIndex:o,sampleDuration:h,sampleSize:a,sampleFlags:u},s,n.raw)}var Il=function(t){function i(){return t.call(this,"mvex")||this}return Do(i,t),i}(Wh);function Jp(t){for(var i=new Il,e=0,s=sp(t.data);e<s.length;e++){var n=s[e];fu(n,"mehd")?i.boxes.push(Xp(n)):fu(n,"trex")?i.boxes.push(Kp(n)):i.boxes.push(ho(n))}return i}r();var $p=function(t){function i(e,s,n,r,o){void 0===o&&(o=0);var h,a,u,c=this;return(c=t.call(this,"mvhd",r,o)||this).creationTime=e.creation,c.modificationTime=e.modification,c.timescale=e.scale,c.duration=e.duration,c.rate=null!==(h=n.rate)&&void 0!==h?h:i.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:i.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:Pp,c.aT=s,c}return Do(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.XM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.qM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.KM},set:function(t){if(!ti(t,32))throw new b("Provided sequence number does not fit in 32 bits.");this.KM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.JM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.JM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"rate",{get:function(){return this.uT},set:function(t){if(!ti(Nh(t,16),32))throw new b("Provided rate does not fit in 32 bits (fixed 16.16).");this.uT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"volume",{get:function(){return this.cT},set:function(t){if(!ti(Nh(t,8),16))throw new b("Provided volume does not fit in 16 bits (fixed 8.8).");this.cT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"matrix",{get:function(){return this.lT},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new b("(u, v, w) does not match the required (0, 0, 1)");this.lT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"nextTrackId",{get:function(){return this.aT},set:function(t){if(0===t)throw new b("NextTrackId cannot be 0.");if(!ti(t,32))throw new b("NextTrackId cannot exceed 32 bits.");this.aT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMvhdContent(i),i.writer.writeUInt(Nh(this.rate,16),32),i.writer.writeUInt(Nh(this.volume,8),16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),zp(this.matrix,i);for(var e=0;e<6;e++)i.writer.writeUInt(0,32);i.writer.writeUInt(this.nextTrackId,32)},i.DEFAULT_RATE=1,i.DEFAULT_VOLUME=1,i}(le),tA=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,0,n)||this}return Do(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}($p),iA=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,1,n)||this}return Do(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}($p);function eA(t){var i=t.data,e=Y(i.nextUint32()),s=e.version,n=e.flags,r=rp(i,s),o=Rm(i.nextUint32(),16),h=Rm(i.nextUint16(),8);i.skip(2),i.skip(8);var a=hp(i);i.skip(24);var u=i.nextUint32();return 0===s?new tA(r,u,{rate:o,volume:h,matrix:a},n.raw):new iA(r,u,{rate:o,volume:h,matrix:a},n.raw)}r(),r();var sA=function(t){function i(i,e,s,n,r,o,h){void 0===h&&(h={});var a,u,c,l=this;return l=t.call(this,"tkhd",i,function(t){var i,e,s,n;return{trackEnabled:null===(i=null==t?void 0:t.trackEnabled)||void 0===i||i,trackInMovie:null===(e=null==t?void 0:t.trackInMovie)||void 0===e||e,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(h))||this,l.creationTime=e.creation,l.modificationTime=e.modification,l.trackId=s,l.duration=e.duration,l.volume=n,l.width=r,l.height=o,l.layer=null!==(a=h.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=h.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=h.matrix)&&void 0!==c?c:Pp,l}return Do(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.XM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.qM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.qM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"trackId",{get:function(){return this.sT},set:function(t){if(0===t)throw new b("trackId cannot be 0.");if(!ti(t,32))throw new b("trackId cannot exceed 32 bits.");this.sT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.JM},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.JM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"volume",{get:function(){return this.cT},set:function(t){if(!ti(Nh(t,8),16))throw new b("Provided volume does not fit in 16 bits (fixed 8.8).");this.cT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"width",{get:function(){return this.dT},set:function(t){if(!ti(Nh(t,16),32))throw new b("Provided width does not fit in 32 bits (fixed 16.16).");this.dT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"height",{get:function(){return this.fT},set:function(t){if(!ti(Nh(t,16),32))throw new b("Provided height does not fit in 32 bits (fixed 16.16).");this.fT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"layer",{get:function(){return this.gT},set:function(t){if(!ti(t,16))throw new b("Provided layer does not fit in 16 bits.");this.gT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"alternateGroup",{get:function(){return this._T},set:function(t){if(!ti(t,16))throw new b("Provided alternateGroup does not fit in 16 bits.");this._T=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"matrix",{get:function(){return this.lT},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new b("(u, v, w) does not match the required (0, 0, 1)");this.lT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeTkhdContent(i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.layer,16),i.writer.writeUInt(this.alternateGroup,16),i.writer.writeUInt(Nh(this.volume,8),16),i.writer.writeUInt(0,16),zp(this.matrix,i),i.writer.writeUInt(Nh(this.width,16),32),i.writer.writeUInt(Nh(this.height,16),32)},i}(le),nA=function(t){function i(i,e,s,n,r,o){return t.call(this,0,i,e,s,n,r,o)||this}return Do(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},i}(sA),rA=function(t){function i(i,e,s,n,r,o){return t.call(this,1,i,e,s,n,r,o)||this}return Do(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(sA);function oA(t){var i,e,s,n,r=t.data,o=Y(r.nextUint32()),h=o.version,a=o.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===h?(i=r.nextUint32(),e=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(i=r.nextUint64(),e=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),g=r.nextInt16(),_=Rm(r.nextInt16(),8);r.skip(2);var v=hp(r),w=Rm(r.nextUint32(),16),m=Rm(r.nextUint32(),16);return 0===h?new nA({creation:i,modification:e,duration:n},s,_,w,m,{layer:f,matrix:v,alternateGroup:g,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new rA({creation:i,modification:e,duration:n},s,_,w,m,{layer:f,matrix:v,alternateGroup:g,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var hA=function(t){function i(){return t.call(this,"trak")||this}return Do(i,t),i}(Wh);function aA(t){for(var i=new hA,e=0,s=sp(t.data);e<s.length;e++){var n=s[e];fu(n,"tkhd")?i.boxes.push(oA(n)):fu(n,"mdia")?i.boxes.push(Lp(n)):fu(n,"edts")?i.boxes.push(Ap(n)):i.boxes.push(ho(n))}return i}var uA=function(t){function i(){return t.call(this,"moov")||this}return Do(i,t),i}(Wh);function cA(t){for(var i=new uA,e=0,s=sp(t.data);e<s.length;e++){var n=s[e];fu(n,"mvhd")?i.boxes.push(eA(n)):fu(n,"trak")?i.boxes.push(aA(n)):fu(n,"mvex")?i.boxes.push(Jp(n)):fu(n,"pssh")?i.boxes.push(Gp(n)):i.boxes.push(ho(n))}return i}r(),r(),r();var lA=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",e,s)||this;return n.baseMediaDecodeTime=i,n}return Do(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"baseMediaDecodeTime",{get:function(){return this.vT},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.vT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(le),xc=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Do(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime,32)},i}(lA),dA=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Do(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},i}(lA);function fA(t){var i=t.data,e=Y(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new xc(i.nextUint32(),n.raw):new dA(i.nextUint64(),n.raw)}r();var gA=function(t){function i(i,e){void 0===e&&(e=0);var s=t.call(this,"tfhd",e,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(i))||this;return s.trackId=i.trackId,s.baseDataOffset=i.baseDataOffset,s.sampleDescriptionIndex=i.sampleDescriptionIndex,s.defaultSampleDuration=i.defaultSampleDuration,s.defaultSampleSize=i.defaultSampleSize,s.defaultSampleFlags=i.defaultSampleFlags,s}return Do(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.sT},set:function(t){if(!ti(t,32))throw new b("Provided track id does not fit in 32 bits.");this.sT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"baseDataOffset",{get:function(){return this.wT},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new b("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new b("The base data offset present flag is not set.");if(t&&!ti(t,64))throw new b("Provided baseDataOffset does not fit in 32 bits.");this.wT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleDescriptionIndex",{get:function(){return this.mT},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new b("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new b("The sample description index flag is not set.");if(t&&!ti(t,32))throw new b("Provided sampleDescriptionIndex does not fit in 32 bits.");this.mT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.rT},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new b("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new b("The default sample duration present flag is not set.");if(t&&!ti(t,32))throw new b("Provided defaultSampleDuration does not fit in 32 bits.");this.rT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.oT},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new b("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new b("The default sample size present flag is not set.");if(t&&!ti(t,32))throw new b("Provided defaultSampleSize does not fit in 32 bits.");this.oT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.hT},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new b("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new b("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!ti(t.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!ti(t.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");this.hT=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(i+=8),this.flags.sampleDescriptionIndexPresent&&(i+=4),this.flags.defaultSampleDurationPresent&&(i+=4),this.flags.defaultSampleSizePresent&&(i+=4),this.flags.defaultSampleFlagsPresent&&(i+=4),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(i.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&i.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&i.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&i.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Up(this.defaultSampleFlags,i)},i}(le);function _A(t){var i=t.data,e=i.nextUint8(),s=new xm(As.from(i.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var o=Boolean(s.readBit()),h=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=i.nextUint32(),d=c?i.nextUint64():void 0,f=u?i.nextUint32():void 0,g=a?i.nextUint32():void 0,_=h?i.nextUint32():void 0,v=o?op(new xm(As.from(i.nextUint8Array(4)))):void 0;return new gA({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:g,defaultSampleSize:_,defaultSampleFlags:v},e)}r();var vA=function(t){function i(i,e,s){var n=t.call(this,"trun",i,function(t){var i,e,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(i=t.sampleDurationPresent)&&void 0!==i&&i,sampleSizePresent:null!==(e=t.sampleSizePresent)&&void 0!==e&&e,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(e))||this;return n.dataOffset=e.dataOffset,n.samples=s,n.firstSampleFlags=e.firstSampleFlags,n}return Do(i,t),_.defineProperty(i.prototype,"dataOffset",{get:function(){return this.pT},set:function(t){if(t&&!ti(t,32))throw new b("Provided data offset does not fit in 32 bits.");this.pT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"firstSampleFlags",{get:function(){return this.AT},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!ti(t.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!ti(t.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");this.AT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"samples",{get:function(){return this.yT},set:function(t){var i,e;if(!ti(t.length,32))throw new b("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new b("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new b("The sample duration present flag is not set.");if(r.duration&&!ti(r.duration,32))throw new b("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new b("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new b("The sample size present flag is not set.");if(r.size&&!ti(r.size,32))throw new b("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new b("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new b("The sample flags present flag is not set.");if((null===(i=r.flags)||void 0===i?void 0:i.samplePaddingValue)&&!ti(r.flags.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null===(e=r.flags)||void 0===e?void 0:e.sampleDegradationPriority)&&!ti(r.flags.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new b("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new b("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!ti(r.compositionTimeOffset,32))throw new b("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.yT=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(i+=4),this.flags.firstSampleFlagsPresent&&(i+=4),this.flags.sampleDurationPresent&&(i+=4*this.samples.length),this.flags.sampleSizePresent&&(i+=4*this.samples.length),this.flags.sampleFlagsPresent&&(i+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(i+=4*this.samples.length),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&i.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Up(this.firstSampleFlags,i);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];this.flags.sampleDurationPresent&&i.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&i.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&Up(n.flags,i),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?i.writer.writeUInt(n.compositionTimeOffset,32):i.writer.writeInt(n.compositionTimeOffset,32))}},i}(le);function wA(t){var i=t.data,e=i.nextUint8(),s=new xm(As.from(i.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),o=Boolean(s.readBit()),h=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=i.nextUint32(),l={sampleDurationPresent:h,sampleSizePresent:o,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=i.nextInt32()),a&&(l.firstSampleFlags=op(new xm(As.from(i.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var g={};h&&(g.duration=i.nextUint32()),o&&(g.size=i.nextUint32()),r&&(g.flags=op(new xm(As.from(i.nextUint8Array(4))))),n&&(g.compositionTimeOffset=0===e?i.nextUint32():i.nextInt32()),d.push(g)}return new vA(e,l,d)}var mA=function(t){function i(){return t.call(this,"traf")||this}return Do(i,t),i}(Wh);function pA(t){for(var i=new mA,e=0,s=sp(t.data);e<s.length;e++){var n=s[e];fu(n,"tfhd")?i.boxes.push(_A(n)):fu(n,"tfdt")?i.boxes.push(fA(n)):fu(n,"trun")?i.boxes.push(wA(n)):i.boxes.push(ho(n))}return i}var AA=function(t){function i(){return t.call(this,"moof")||this}return Do(i,t),i}(Wh);function yA(t){for(var i=new AA,e=0,s=sp(t.data);e<s.length;e++){var n=s[e];fu(n,"traf")?i.boxes.push(pA(n)):fu(n,"pssh")?i.boxes.push(Gp(n)):i.boxes.push(ho(n))}return i}r();!function(t){function i(i){var e=t.call(this,"mfhd",0,0)||this;return e.sequenceNumber=i,e}Do(i,t),_.defineProperty(i.prototype,"sequenceNumber",{get:function(){return this.bT},set:function(t){if(!ti(t,32))throw new b("Provided sequence number does not fit in 32 bits.");this.bT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.sequenceNumber,32)}}(le);r();var bA=function(t){function i(i){var e=t.call(this,"frma")||this;return e.codingName=i,e}return Do(i,t),_.defineProperty(i.prototype,"codingName",{get:function(){return this.MT},set:function(t){if(4!==t.length)throw new b("Provided coding name was not 4 characters long.");this.MT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},i}(Gu);r();!function(t){function i(i,e){var s=t.call(this,"pasp")||this;return s.hSpacing=i,s.vSpacing=e,s}Do(i,t),_.defineProperty(i.prototype,"hSpacing",{get:function(){return this.TT},set:function(t){if(!ti(t,32))throw new b("Provided hSpacing does not fit in 32 bits.");this.TT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vSpacing",{get:function(){return this.ST},set:function(t){if(!ti(t,32))throw new b("Provided vSpacing does not fit in 32 bits.");this.ST=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(Gu);r();!function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.sample=e,n.sinf=s,n}Do(i,t),i.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},i.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(Wh);r();!function(t){function i(i,e,s){var n=t.call(this,"sinf")||this;return n.schm=e,n.schi=s,n.frma=new bA(i),n}Do(i,t),i.prototype.getBoxContentSize=function(){var t,i,e,s;return this.frma.getSize()+(null!==(i=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==i?i:0)+(null!==(s=null===(e=this.schi)||void 0===e?void 0:e.getSize())&&void 0!==s?s:0)},i.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(Gu);r();var MA=function(t){function i(i,e,s){var n=t.call(this,"saio",i,void 0===s?0:1)||this;return n.entries=e,n.explicitAuxInfoType=s,n}return Do(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"entries",{get:function(){return this.RM},set:function(t){var i=this;if(!ti(t.length,32))throw new b("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!ti(t,i.bitSize)})))throw new b("Not all provided entries fit in ".concat(this.bitSize," bits."));this.RM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.NT},set:function(t){if(void 0===t)this.flags=0;else{if(!ti(t.auxInfoType,32))throw new b("Provided auxInfoType does not fit in 32 bits.");if(!ti(t.auxInfoTypeParameter,32))throw new b("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.NT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(i)},i}(le);(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Do(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s,32)}}})(MA),function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Do(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(MA);r();!function(t){function i(i,e,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=i,n.sampleInfoSizes=e,n.explicitAuxInfoType=s,n}Do(i,t),_.defineProperty(i.prototype,"defaultSampleInfoSize",{get:function(){return this.IT},set:function(t){if(!ti(t,8))throw new b("Provided defaultSampleInfoSize does not fit in a single byte.");this.IT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleInfoSizes",{get:function(){return this.DT},set:function(t){if(!ti(t.length,32))throw new b("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!ti(t,8)})))throw new b("Not all provided sampleInfoSizes fit in a byte.");this.DT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.NT},set:function(t){if(void 0===t)this.flags=0;else{if(!ti(t.auxInfoType,32))throw new b("Provided auxInfoType does not fit in 32 bits.");if(!ti(t.auxInfoTypeParameter,32))throw new b("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.NT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},i.prototype.serializeBoxContent=function(i){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new b("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeByte(this.defaultSampleInfoSize),i.writer.writeUInt(this.sampleInfoSizes.length,32);for(var e=0,s=this.sampleInfoSizes;e<s.length;e++){var n=s[e];i.writer.writeByte(n)}}}(le);r();!function(t){function i(i){var e=t.call(this,"sdtp",0,0)||this;return e.samples=i,e}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i);for(var e=0,s=this.samples;e<s.length;e++){Bp(s[e],i)}}}(le);r();!function(t){function i(i){return t.call(this,"stsd",i,0)||this}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(gp);r();var TA=function(t){function i(i,e,s){var n=t.call(this,"sgpd",i,0)||this;return n.entries=s,n.groupingType=e,n}return Do(i,t),_.defineProperty(i.prototype,"groupingType",{get:function(){return this.ET},set:function(t){if(4!==t.length)throw new b("The provided groupingType does not equal 4 characters.");this.ET=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.groupingType),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];this.serializeEntryBoxContent(i,n)}},i.prototype.serializeEntryBoxContent=function(t,i){i.serializeBoxContent(t)},i}(le);(function(t){function i(i,e){return t.call(this,0,i,e)||this}Do(i,t),i.prototype.serializeVersionBoxContent=function(t){}})(TA),function(t){function i(i,e,s){var n=t.call(this,1,i,s)||this;return n.defaultLength=e,n}Do(i,t),_.defineProperty(i.prototype,"defaultLength",{get:function(){return this.kT},set:function(t){if(!ti(t,32))throw new b("The provided defaultLength does not fit in 32 bits.");this.kT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},i.prototype.serializeEntryBoxContent=function(t,i){0===this.defaultLength&&t.writer.writeUInt(i.getBoxContentSize(),32),i.serializeBoxContent(t)}}(TA),function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=this;if(i<2)throw new b("This constructor is only meant for versions 2 and up.");return(r=t.call(this,i,e,s)||this).defaultSampleDescriptionIndex=n,r}Do(i,t),_.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.nT},set:function(t){if(!ti(t,32))throw new b("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.nT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(TA);r();(function(t){function i(i){void 0===i&&(i=[]);var e=t.call(this,"stsz",0,0)||this;return e.sampleSizes=i,e}Do(i,t),_.defineProperty(i.prototype,"sampleSizes",{get:function(){return this.LT},set:function(t){if(!ti(t.length,32))throw new b("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!ti(t,32)})))throw new b("Not all sampleSizes can be represented in 32 bits.");this.LT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(this.sampleSizes.length,32);for(var e=0,s=this.sampleSizes;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}})(le),function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=i,s.samples=e,s}Do(i,t),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.oT},set:function(t){if(!ti(t,32))throw new b("Provided defaultSampleSize does not fit in 32 bits.");this.oT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"samples",{get:function(){return this.yT},set:function(t){if(!ti(t,32))throw new b("Number of allowed samples cannot fit in 32 bits.");this.yT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.defaultSampleSize,32),i.writer.writeUInt(this.samples,32)}}(le);r();!function(t){function i(){return t.call(this,"stbl")||this}Do(i,t)}(Wh);r();!function(t){function i(i){var e=t.call(this,"stsc",0,0)||this;return e.entries=i,e}Do(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.RM},set:function(t){if(!ti(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!ti(t.firstChunk,32)||!ti(t.sampleDescriptionIndex,32)||!ti(t.samplesPerChunk,32)})))throw new b("Not all entries can be represented in 96 bits.");this.RM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.firstChunk,32),i.writer.writeUInt(n.samplesPerChunk,32),i.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(le);r();!function(t){function i(){return t.call(this,"schi")||this}Do(i,t)}(Wh);r();!function(t){function i(i,e,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=i,n.schemeVersion=e,n.schemeUri=s,n}Do(i,t),_.defineProperty(i.prototype,"schemeType",{get:function(){return this.xT},set:function(t){if(4!==t.length)throw new b("The provided schemeType does not have a length of 4.");this.xT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"schemeVersion",{get:function(){return this.CT},set:function(t){if(!ti(t,32))throw new b("The provided schemeVersion does not fit in 23 bits.");this.CT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"schemeUri",{get:function(){return this.jT},set:function(t){if(t&&4!==t.length)throw new b("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.jT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeType),i.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(i.writer.writeString(this.schemeUri),i.writer.writeByte(0))}}(le);r();var SA=function(t){function i(i,e,s,n,r,o,h){void 0===h&&(h=0);var a=t.call(this,"sidx",i,h)||this;return a.referenceId=e,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=o,a}return Do(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"referenceId",{get:function(){return this.OT},set:function(t){if(!ti(t,32))throw new b("Provided referenceId does not fit in 32 bits.");this.OT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.KM},set:function(t){if(!ti(t,32))throw new b("Provided timescale does not fit in 32 bits.");this.KM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"earliestPresentationTime",{get:function(){return this.PT},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.PT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"firstOffset",{get:function(){return this.zT},set:function(t){if(!ti(t,this.bitSize))throw new b("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.zT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"references",{get:function(){return this.BT},set:function(t){if(!ti(t.length,16))throw new b("The number of provided reference items does not fit in 16 bits.");for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!ti(s.referencedSize,31))throw new b("Provided referenced size does not fit in 31 bits.");if(!ti(s.subsegmentDuration,32))throw new b("Provided subsegment duration does not fit in 31 bits.");if(!ti(s.sapType,3))throw new b("Provided SAP type does not fit in 3 bits.");if(!ti(s.sapDeltaTime,28))throw new b("Provided SAP delta time does not fit in 28 bits.")}this.BT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.referenceId,32),i.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(i),i.writer.writeUInt(0,16),i.writer.writeUInt(this.references.length,16);for(var e=0,s=this.references;e<s.length;e++){var n=s[e];i.writer.writeBit(n.referenceType),i.writer.writeUInt(n.referencedSize,31),i.writer.writeUInt(n.subsegmentDuration,32),i.writer.writeBool(n.startsWithSap),i.writer.writeUInt(n.sapType,3),i.writer.writeUInt(n.sapDeltaTime,28)}},i}(le),NA=function(t){function i(i,e,s,n,r,o){return void 0===o&&(o=0),t.call(this,0,i,e,s,n,r,o)||this}return Do(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},i}(SA),IA=function(t){function i(i,e,s,n,r,o){return void 0===o&&(o=0),t.call(this,1,i,e,s,n,r,o)||this}return Do(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},i}(SA);r();var DA=function(t){function i(i,e,s){return t.call(this,"styp",i,e,s)||this}return Do(i,t),i}(yp);function EA(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new DA(e,s,n)}r();!function(t){function i(i){void 0===i&&(i=0);var e=t.call(this,"smhd",0,0)||this;return e.balance=i,e}Do(i,t),_.defineProperty(i.prototype,"balance",{get:function(){return this.UT},set:function(t){if(t<-1||t>1)throw new b("Provided balance does not fit in the allowed range [-1, 1].");if(!ti(Nh(t,8),16))throw new b("Provided balance does not fit in 16 bits (fixed 8.8).");this.UT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(Nh(this.balance,8),16),i.writer.writeUInt(0,16)}}(le);r();!function(t){function i(i){var e=t.call(this,"stss",0,0)||this;return e.entries=i,e}Do(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.RM},set:function(t){if(!ti(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!ti(t,32)})))throw new b("Not all entries can be represented in 32 bits.");this.RM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(le);r();!function(t){function i(i){var e=t.call(this,"stts",0,0)||this;return e.entries=i,e}Do(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.RM},set:function(t){if(!ti(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!ti(t.sampleCount,32)||!ti(t.sampleDelta,32)})))throw new b("Not all entries can be represented in 64 bits.");this.RM=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),i.writer.writeUInt(n.sampleDelta,32)}}}(le);r();!function(t){function i(i){var e=t.call(this,"trep",0,0)||this;return e.trackId=i,e}Do(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.sT},set:function(t){if(!ti(t,32))throw new b("The provided trackId does not fit in 32 bits.");this.sT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32)}}(gp);r();!function(t){function i(){return t.call(this,"udta")||this}Do(i,t)}(Wh);r();var kA={red:0,green:0,blue:0};!function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=kA);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=i,s.opColor=e,s}Do(i,t),_.defineProperty(i.prototype,"opColor",{get:function(){return this.QT},set:function(t){if(!ti(t.red,16)||!ti(t.green,16)||!ti(t.blue,16))throw new b("Not all colors could be represented in 16 bits.");this.QT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.graphicsMode,16),i.writer.writeUInt(this.opColor.red,16),i.writer.writeUInt(this.opColor.green,16),i.writer.writeUInt(this.opColor.blue,16)}}(le);r();var LA=function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o,h,a,u,c,l=this;return(l=t.call(this,i,e)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(o=s.horizontal)&&void 0!==o?o:72,l.verticalResolution=null!==(h=s.vertical)&&void 0!==h?h:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return Do(i,t),_.defineProperty(i.prototype,"width",{get:function(){return this.dT},set:function(t){if(!ti(t,16))throw new b("Provided width does not fit in 16 bits.");this.dT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"height",{get:function(){return this.fT},set:function(t){if(!ti(t,16))throw new b("Provided height does not fit in 16 bits.");this.fT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizontalResolution",{get:function(){return this.FT},set:function(t){if(!ti(Nh(t,16),32))throw new b("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.FT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"verticalResolution",{get:function(){return this.YT},set:function(t){if(!ti(Nh(t,16),32))throw new b("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.YT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"compressorName",{get:function(){return this.VT},set:function(t){if(t.length>31)throw new b("The provided compressorName should at most be 31 characters long.");this.VT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"frameCount",{get:function(){return this.GT},set:function(t){if(!ti(t,16))throw new b("Provided frameCount does not fit in 16 bits.");this.GT=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"depth",{get:function(){return this.WT},set:function(t){if(!ti(t,16))throw new b("Provided depth does not fit in 16 bits.");this.WT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e,s,n,r,o;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(e=null===(i=this.clap)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(o=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==o?o:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.width,16),i.writer.writeUInt(this.height,16),i.writer.writeUInt(Nh(this.horizontalResolution,16),32),i.writer.writeUInt(Nh(this.verticalResolution,16),32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.frameCount,16),i.writer.writeByte(this.compressorName.length),i.writer.writeString(this.compressorName);for(var e=0;e<31-this.compressorName.length;e++)i.writer.writeByte(0);i.writer.writeUInt(this.depth,16),i.writer.writeInt(-1,16),this.clap&&i.concat(this.clap.serialize()),this.pasp&&i.concat(this.pasp.serialize()),this.extra&&jh(i.writer,this.extra)},i}(dp);r(),r();!function(t){function i(i){var e=t.call(this,"esds",0,0)||this;return e.esDescriptor=i,e}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof T?this.esDescriptor.length:this.esDescriptor.getSize())},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor instanceof T?i.concat(As.from(this.esDescriptor)):this.esDescriptor.serialize(i)}}(le);r();!function(t){function i(i,e,s){var n=t.call(this,"mp4a",i,s)||this;return n.esd=e,n}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.esd.serialize())}}(fp);r();!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",i,e,n)||this;return r.esDescriptor=s,r}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(LA);r();!function(t){function i(i,e){var s=t.call(this,"mp4s",i)||this;return s.esDescriptor=e,s}Do(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(dp);r(),r();!function(t){function i(i){var e=t.call(this,"avcC")||this;return e.decoderConfig=i,e}Do(i,t),i.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},i.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(Gu);r();!function(){function t(t,i,e,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=e,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=i,this.spsSets=s,this.ppsSets=n}_.defineProperty(t.prototype,"version",{get:function(){return this.ZT},set:function(t){if(!ti(t,8))throw new b("Provided version does not fit in 8 bits.");this.ZT=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"profileIndication",{get:function(){return this.HT},set:function(t){if(!ti(t,8))throw new b("Provided profileIndication does not fit in 8 bits.");this.HT=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.XT},set:function(t){if(!ti(t,8))throw new b("Provided profileCompatibility does not fit in 8 bits.");this.XT=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"levelIndication",{get:function(){return this.qT},set:function(t){if(!ti(t,8))throw new b("Provided levelIndication does not fit in 8 bits.");this.qT=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"spsSets",{get:function(){return this.KT},set:function(t){if(!ti(t.length,5))throw new b("Provided number of spsSets exceeds the max (32)");this.KT=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"ppsSets",{get:function(){return this.JT},set:function(t){if(!ti(t.length,8))throw new b("Provided number of ppsSets exceeds the max (256)");this.JT=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,i){return t+i.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,i){return t+i.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var i=0,e=this.spsSets;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.length,16),t.concat(As.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var o=r[n];t.writer.writeUInt(o.length,16),t.concat(As.from(o))}}}();r();!function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o=t.call(this,"avc1",i,e,n)||this;return o.configurationBox=s,o.bitrateBox=r,o}Do(i,t),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(e=null===(i=this.bitrateBox)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.configurationBox.serialize()),this.bitrateBox&&i.concat(this.bitrateBox.serialize())}}(LA);r();!function(t){function i(i,e,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=i,n.max=e,n.avg=s,n}Do(i,t),_.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.SM},set:function(t){if(!ti(t,32))throw new b("Provided bufferSizeDb does not fit in 32 bits.");this.SM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"max",{get:function(){return this.Kv},set:function(t){if(!ti(t,32))throw new b("Provided max does not fit in 32 bits.");this.Kv=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"avg",{get:function(){return this.$T},set:function(t){if(!ti(t,32))throw new b("Provided avg does not fit in 32 bits.");this.$T=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 12},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(Gu);r(),r(),r();var xA=function(t){function i(i,e){var s,n,r,o,h=this;if(h=t.call(this,"tenc",i,0)||this,e.perSampleIvSize>0&&(null!==(n=null===(s=e.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new b("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return h.kId=e.kId,h.isProtected=null!==(r=e.isProtected)&&void 0!==r?r:1,e.perSampleIvSize>0?h.perSampleIvSize=e.perSampleIvSize:h.constantIv=null!==(o=e.constantIv)&&void 0!==o?o:new T(0),h}return Do(i,t),_.defineProperty(i.prototype,"isProtected",{get:function(){return this.tS},set:function(t){if(!ti(t,8))throw new b("Provided isProtected does not fit in 1 byte.");this.tS=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"perSampleIvSize",{get:function(){return this.iS},set:function(t){if(![8,16].includes(t))throw new b("Provided perSampleIvSize does not match any allowed value [8, 16].");this.iS=t,this.eS=new T(0)},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"kId",{get:function(){return this.sS},set:function(t){if(16!==t.length)throw new b("Provided kId length is not 16.");this.sS=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"constantIv",{get:function(){return this.eS},set:function(t){if(![8,16].includes(t.length))throw new b("Provided constant IV length does not match any allowed value [8, 16].");this.eS=t,this.iS=0},enumerable:!1,configurable:!0}),i.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeOwnContent(i)},i.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),jh(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),jh(t.writer,this.constantIv))},i}(le),CA=(function(t){function i(i){return t.call(this,0,i)||this}Do(i,t)}(xA),function(t){function i(i){var e=t.call(this,1,i)||this;return e.cryptByteBlocks=i.cryptByteBlock,e.skipByteBlocks=i.skipByteBlock,e}return Do(i,t),_.defineProperty(i.prototype,"cryptByteBlocks",{get:function(){return this.nS},set:function(t){if(!ti(t,4))throw new b("Provided cryptByteBlocks does not fit in 4 bits.");this.nS=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"skipByteBlocks",{get:function(){return this.rS},set:function(t){if(!ti(t,4))throw new b("Provided skipByteBlocks does not fit in 4 bits.");this.rS=t},enumerable:!1,configurable:!0}),i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},i}(xA));!function(t){function i(i){var e=t.call(this)||this;return e.tencBox=new CA(i),e}Do(i,t),i.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},i.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(Qp);function jA(t){return void 0!==t.iv}function OA(t){return void 0!==t.subsamples}r();!function(t){function i(i){var e=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return e.samples=i,e}Do(i,t),_.defineProperty(i.prototype,"samples",{get:function(){return this.yT},set:function(t){var i;if(!ti(t.length,32))throw new b("The number of samples provided does not fit in 32 bits.");for(var e=0,s=t;e<s.length;e++){var n=s[e];if(jA(n)&&![8,16].includes(n.iv.length))throw new b("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===i&&(i=OA(n)),!0===i&&!OA(n)||!1===i&&OA(n))throw new b("Mix of samples with and without subsamples detected.");if(OA(n)){if(!ti(n.subsamples.length,16))throw new b("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];if(!ti(h.clearData,16))throw new b("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!ti(h.protectedData,23))throw new b("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=i&&i,this.yT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){for(var i=0,e=0,s=this.samples;e<s.length;e++){var n=s[e];jA(n)&&(i+=n.iv.length),OA(n)&&(i+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];if(jA(n)&&jh(i.writer,n.iv),OA(n)){i.writer.writeUInt(n.subsamples.length,16);for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];i.writer.writeUInt(h.clearData,16),i.writer.writeUInt(h.protectedData,32)}}}},i.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(le);r(),r();!function(t){function i(i,e,s,n,r){var o=t.call(this,"emsg",0,0)||this;return o.schemeIdUri=i,o.value=e,o.data=r,o.id=s,o.timescale=n.timescale,o.presentationTimeDelta=n.presentationTimeDelta,o.eventDuration=n.eventDuration,o}Do(i,t),_.defineProperty(i.prototype,"timescale",{get:function(){return this.KM},set:function(t){if(!ti(t,32))throw new b("The provided timescale does not fit in 32 bits.");this.KM=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"presentationTimeDelta",{get:function(){return this.oS},set:function(t){if(!ti(t,32))throw new b("The provided presentationTimeDelta does not fit in 32 bits.");this.oS=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"eventDuration",{get:function(){return this.hS},set:function(t){if(!ti(t,32))throw new b("The provided eventDuration does not fit in 32 bits.");this.hS=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"id",{get:function(){return this.aS},set:function(t){if(!ti(t,32))throw new b("The provided id does not fit in 32 bits.");this.aS=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeIdUri),i.writer.writeByte(0),i.writer.writeString(this.value),i.writer.writeByte(0),i.writer.writeUInt(this.timescale,32),i.writer.writeUInt(this.presentationTimeDelta,32),i.writer.writeUInt(this.eventDuration,32),i.writer.writeUInt(this.id,32),i.concat(As.from(this.data))}}(le);r(),r(),r();var RA=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new Om,i=0,e=this.boxes;i<e.length;i++){var s=e[i];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function PA(t,i){return function(e){var s=function(t,i){for(var e=t.data,s=t.cursor;s.offset<e.byteLength;){var n=np(e,s);if(!n.complete)return;if(fu(n.box,i))return n.box}}(new ip(Jm(e),new tp),t);if(!s)throw new b("".concat(t," box not found"));return i(s)}}var zA=PA("moov",cA),BA=PA("sidx",(function(t){var i,e,s=t.data,n=Y(s.nextUint32()),r=n.version,o=n.flags,h=s.nextUint32(),a=s.nextUint32();0===r?(i=s.nextUint32(),e=s.nextUint32()):(i=s.nextUint64(),e=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new xm(As.from(s.nextUint8Array(12))),f=d.readBit(),g=d.readUInt(31),_=d.readUInt(32),v=Boolean(d.readBit()),w=d.readUInt(3),m=d.readUInt(28);c.push({referenceType:f,referencedSize:g,subsegmentDuration:_,startsWithSap:v,sapType:w,sapDeltaTime:m})}return 0===r?new NA(h,a,i,e,c,o.raw):new IA(h,a,i,e,c,o.raw)})),UA=PA("moof",yA),QA=PA("pssh",Gp);function FA(t){return function(t){for(var i=new RA,e=0,s=sp(t);e<s.length;e++){var n=s[e];fu(n,"ftyp")?i.boxes.push(Mp(n)):fu(n,"styp")?i.boxes.push(EA(n)):fu(n,"moov")?i.boxes.push(cA(n)):fu(n,"moof")?i.boxes.push(yA(n)):fu(n,"mdat")?i.boxes.push(Cp(n)):i.boxes.push(ho(n))}return i}(new ip(Jm(t),new tp))}var YA=class extends tu{get uS(){return this.Hg}get cS(){return this.lS.expiration}get Rb(){return this.dS}get fS(){return this.lS.sessionId}Ws(){if(this.gS)return this.Hg;const t=[];return t.push(Promise.resolve(this.lS.close())),t.push(Dt(1e3)),this._S.Sy(Promise.race(t).catch(VA)),this.gS=!0,this.Hg}vS(t,i,e){if(Ro.hf){const t=QA(Cc(i));if(1===t.version){i=new Yp(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.lS.generateRequest(t,i)).catch(VA)}$n(t){return Promise.resolve(this.lS.load(t)).catch(VA)}wS(){return Promise.resolve(this.lS.remove()).catch(VA)}Yn(t){return Promise.resolve(this.lS.update(t)).catch(VA)}mS(){this.dS.eM(),this.lS.keyStatuses.forEach(((t,i)=>{this.pS(i,t)})),this.yo(new pw(this.dS))}pS(t,i){if("string"==typeof t){const e=t;t=i,i=e}const e=Cc(t);if(this.yS===bo&&16===e.byteLength&&(Ro.yf||Ro._g)){let t=Al(e),i=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,i,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.yS===bo&&"status-pending"===i&&(i="usable"),this.dS.tM(e,i)}constructor(t,i){super(),this.lS=t,this.yS=i,this.gS=!1,this.bS=()=>{this.mS()},this.um=t=>{this.yo(new sr(this,t.messageType,Tm(this.yS,t.message)))},this.MS=()=>{this.gS=!0,this.dS.Kb>0&&(this.dS.eM(),this.yo(new pw(this.dS))),this.lS.removeEventListener("keystatuseschange",this.bS),this.lS.removeEventListener("message",this.um)},this.lS.addEventListener("keystatuseschange",this.bS),this.lS.addEventListener("message",this.um),this.dS=new ru;const e=[];this.lS.closed&&e.push(Promise.resolve(this.lS.closed)),this._S=new xh,e.push(this._S.rM),this.Hg=Promise.race(e).then(this.MS,this.MS),this.mS()}};function VA(t){let i;if(t.message){const e=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);e&&(i=0|C(e[1],16))}throw new Nm(t.message,void 0,i,t)}var GA=class{async TS(t){return new YA(this.SS.createSession(t),this.NS)}IS(t){return Promise.resolve(this.SS.setServerCertificate(t))}bn(t){return Promise.resolve(t.setMediaKeys(this.SS))}DS(t){return Promise.resolve(t.setMediaKeys(null))}tr(){return Promise.resolve()}constructor(t,i,e){this.SS=t,this.NS=i,this.md=e}},WA=class{get NS(){return this.ES.keySystem}async kS(){const t=await this.ES.createMediaKeys();return new GA(t,this.yS,this.LS)}xS(){return this.LS}constructor(t,i,e){this.ES=t,this.yS=i,this.LS=e}};r(),r();var zo={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function ZA(t){return _t(t,zo.APPLICATION_MP4)||_t(t,zo.VIDEO_MP4)||_t(t,zo.AUDIO_MP4)}function HA(t){return _t(t,zo.VIDEO_WEBM)||_t(t,zo.AUDIO_WEBM)}var XA=class{CS(t){for(const[i,e]of this.jS)if(i.toLowerCase()===t.toLowerCase())return e}constructor(t,i){this.YA=t,this.jS=i}};function Yn(t){const i=t.trim(),e=i.indexOf(";");if(e<0)return new XA(i,[]);const s=i.substr(0,e).trim(),n=i.substr(e+1).trim(),r=[];let o=0,h=!1;for(let t=0;t<n.length;t++){const i=n[t];if(h||";"!==i)'"'===i&&(h=!h);else{const i=qA(n.substr(o,t));i&&r.push(i),o=t+1}}if(o!==n.length){const t=qA(n.substr(o));t&&r.push(t)}return new XA(s,r)}function qA(t){const i=t.indexOf("=");if(i<0)return;const e=t.substr(0,i).trim();let s=t.substr(i+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[e,s]}function KA(t){const i=t.trim(),e=i.indexOf(";");return e<0?i:i.substr(0,e).trim()}function JA(t){let i=t;const e=i.match(/^avc1\.(\d+)\.(\d+)$/);if(e){const t=Number(e[1]),s=Number(e[2]);i="avc1."+_c((t<<16|s).toString(16),6,"0")}return i}function $A(t,i,e,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,RS:s.RS};let o=!1;if(s.audioCapabilities){const h=s.audioCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.audioCapabilities=h.filter((s=>ty(t,i,e,s))),o=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const h=s.videoCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.videoCapabilities=h.filter((s=>ty(t,i,e,s))),o=!0,r.videoCapabilities.length&&(n=!0))}return o||(n=t(e,"video/mp4")),n?r:void 0}function ty(t,i,e,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!Qa(i,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(e,KA(s.contentType))}function iy(t){if(t.videoCapabilities)for(const i of t.videoCapabilities)if(i.contentType)return i.contentType;if(t.audioCapabilities)for(const i of t.audioCapabilities)if(i.contentType)return i.contentType}function ey(t){const i=[];for(const e of t)e.encryptionScheme&&i.push({contentType:e.contentType,robustness:e.robustness});return t.concat(i)}function sy(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(ny))||!(!t.videoCapabilities||!t.videoCapabilities.some(ny))}function ny(t){return!t.robustness}function ry(t,i){const e=[];for(const s of t)s.robustness?e.push(s):e.push(Ei({},s,{robustness:i}));return e}var oy=class{async qA(t,i){i=i.filter((t=>!t.RS));for(const t of i)t.audioCapabilities&&(t.audioCapabilities=ey(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=ey(t.videoCapabilities));if(t===mv&&i.some(sy)){const e=i.map((t=>function(t,i){return Ei({},t,{videoCapabilities:t.videoCapabilities?ry(t.videoCapabilities,i):void 0,audioCapabilities:t.audioCapabilities?ry(t.audioCapabilities,i):void 0})}(t,"SW_SECURE_CRYPTO")));try{const i=await Kl.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new WA(i,t,s)}catch(t){}}const e=await Kl.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new WA(e,t,s)}static PS(){return kl()}};r(),r(),r(),r();var hy=class extends tu{get fS(){return this.zS&&this.zS.sessionId||""}get cS(){return NaN}get uS(){return this.US.rM}get Rb(){return this.QS}async vS(t,i,e){this.FS(),this.YS=new xh,this.TS(Cc(i),e),await this.YS.rM}TS(t,i){if(!t)throw new k("Expected initData to be defined but was "+t+".");const e=i&&i.playready&&i.playready.VS;let s;return s=i?this.GS.createSession(this.WS,t,e):this.GS.createSession(this.WS,t),s.addEventListener("mskeyclose",this.MS),s.addEventListener("mskeymessage",this.ZS),s.addEventListener("mskeyerror",this.Ss),s.addEventListener("mskeyadded",this.HS),this.zS=s,this.XS("status-pending"),s}async $n(t){return this.FS(),!0}async Yn(t){if(this.qS=new xh,this.FS(),!this.zS)return Promise.resolve();const i=Cc(t);if(0===i.byteLength)throw new k("Cannot call update with an empty response.");this.zS.update(i),await this.qS.rM}Ws(){return!this.gS&&this.zS&&(this.gS=!0,this.zS.close()),this.US.rM}async wS(){this.FS()}FS(){if(this.gS)throw new k("Already closing or closed.")}XS(t){this.QS.eM(),this.QS.tM(bm,t),this.yo(new pw(this.QS))}constructor(t,i){super(),this.GS=t,this.WS=i,this.gS=!1,this.qS=void 0,this.YS=void 0,this.zS=void 0,this.MS=()=>{this.gS=!0,this.US.sM(void 0),this.zS&&(this.zS.removeEventListener("mskeyclose",this.MS),this.zS.removeEventListener("mskeymessage",this.ZS),this.zS.removeEventListener("mskeyerror",this.Ss),this.zS.removeEventListener("mskeyadded",this.HS))},this.ZS=t=>{this.YS&&(this.YS.sM(void 0),this.YS=void 0),this.yo(new sr(this,"license-request",ja(t.message).buffer,t.destinationURL||void 0))},this.Ss=()=>{const t=this.zS&&this.zS.error;if(!t)return;const i=new Nm("Unknown CDM error",t.code,t.systemCode);if(this.YS)this.YS.nM(i),this.YS=void 0;else if(this.qS)this.qS.nM(i),this.qS=void 0;else switch(i.oM){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.XS("output-not-allowed");break;default:this.XS("internal-error")}},this.HS=()=>{this.YS&&(this.XS("usable"),this.YS.sM(void 0),this.YS=void 0),this.qS&&(this.XS("usable"),this.qS.sM(void 0),this.qS=void 0)},this.US=new xh,this.QS=new ru}},ay=class{async TS(t){return new hy(this.GS,this.WS)}IS(t){return Promise.resolve(!1)}bn(t){const i=()=>{t.msSetMediaKeys(this.GS),t.removeEventListener("loadedmetadata",i)};return t.readyState>=1?t.msSetMediaKeys(this.GS):t.addEventListener("loadedmetadata",i),Promise.resolve()}DS(t){return Promise.resolve()}tr(){return Promise.resolve()}constructor(t,i,e){this.GS=t,this.NS=i,this.md=e;const s=iy(e)||"video/mp4";this.WS=KA(s)}},uy=class{get NS(){return this.yS}xS(){return this.KS}kS(){const t=new gi.MSMediaKeys(this.yS);return Promise.resolve(new ay(t,this.yS,this.KS))}constructor(t,i){this.yS=t,this.KS=i}},cy=class{qA(t,i){try{return Promise.resolve(function(t,i){if(!ly())throw new k("Unsupported key system "+t);for(let e of i){let i=$A(dy,ww,t,e);if(i)return new uy(t,i)}throw new k("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static PS(){return ly()}};function ly(){return void 0!==gi.MSMediaKeys&&"function"==typeof gi.MSMediaKeys.isTypeSupported}function dy(t,i){return gi.MSMediaKeys.isTypeSupported(t,i)}r(),r(),r(),r();var fy=class extends tu{get fS(){return this.JS?this.JS.sessionId:""}get cS(){return NaN}get uS(){return this.US.rM}get Rb(){return this.QS}vS(t,i,e){const s=e&&e.fairplay&&e.fairplay.$S;if(!s)throw new k("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,i,e){const s=tr(t),n=2*s.length,r=2*i.length;let o=new ArrayBuffer(4+n+4+r+4+e.byteLength),h=new DataView(o),a=new da;return $(h,a,n,!0),sm(h,a,s,!0),$(h,a,r,!0),sm(h,a,i,!0),$(h,a,e.byteLength,!0),Fw(h,a,e),new T(o)}(Cc(i),s,this.tN);return this.JS=this.iN.createSession(this.WS,n),this.JS.addEventListener("webkitkeymessage",this.ZS,!1),this.JS.addEventListener("webkitkeyadded",this.HS,!1),this.JS.addEventListener("webkitkeyerror",this.Ss,!1),this.XS("status-pending"),this.eN.sM(this.JS),this.eN=new xh,Promise.resolve()}$n(t){return Promise.resolve(!0)}async Yn(t){const i=Cc(t);if(0===i.byteLength)throw new k("Cannot call update with an empty response.");this.sN=new xh;(this.JS||await this.eN.rM).update(i),await this.sN.rM}Ws(){var t;const i=this.JS;return i&&(i.removeEventListener("webkitkeymessage",this.ZS,!1),i.removeEventListener("webkitkeyadded",this.HS,!1),i.removeEventListener("webkitkeyerror",this.Ss,!1),i.close()),this.eN.Ty(),null==(t=this.sN)||t.Ty(),this.US.sM(void 0),this.US.rM}wS(){return Promise.resolve(void 0)}XS(t){this.QS.eM(),this.QS.tM(bm,t),this.yo(new pw(this.QS))}constructor(t,i,e){super(),this.iN=t,this.WS=i,this.tN=e,this.US=new xh,this.sN=void 0,this.QS=new ru,this.JS=void 0,this.eN=new xh,this.Ss=()=>{const t=this.JS&&this.JS.error;if(!t)return;const i=new Nm("Unknown CDM error",t.code,t.systemCode);this.sN?(this.sN.nM(i),this.sN=void 0):i.oM===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.XS("output-not-allowed"):this.XS("internal-error"),this.yo(new Aw)},this.ZS=t=>{this.yo(new sr(this,"license-request",ja(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.HS=()=>{this.sN&&(this.sN.sM(void 0),this.sN=void 0),this.XS("usable")}}};r();var qi=class extends Co{get name(){return"THEOplayerError"}get category(){return xd.fromCode(this.code)}constructor(t,i,e){super(i,e),this.code=t}};function gy(t,i){return t instanceof qi?t:t instanceof b?new qi(i,t.message,t):new qi(i,String(t))}var _y=class{getInternalMediaKeys(){return this.iN}async TS(t){if(!this.tN)throw new qi(vt.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new fy(this.iN,this.WS,this.tN)}IS(t){return this.tN=Cc(t),Promise.resolve(!0)}bn(t){return t.webkitSetMediaKeys(this.iN),Promise.resolve()}DS(t){return t.webkitSetMediaKeys(null),Promise.resolve()}tr(){return Promise.resolve()}constructor(t,i,e){this.iN=t,this.NS=i,this.md=e,this.tN=void 0;const s=iy(e)||"video/mp4";this.WS=KA(s)}},vy=class{get NS(){return this.yS}xS(){return this.KS}kS(){const t=new gi.WebKitMediaKeys(this.yS);return Promise.resolve(new _y(t,this.yS,this.KS))}constructor(t,i){this.yS=t,this.KS=i}},wy=class{qA(t,i){try{return Promise.resolve(function(t,i){if(t!==bv)throw new k(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!my())throw new k("Unsupported key system "+t);for(let e of i){let i=$A(py,mw,t,e);if(i)return new vy(t,i)}throw new k("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static PS(){return my()}};function my(){return void 0!==gi.WebKitMediaKeys&&"function"==typeof gi.WebKitMediaKeys.isTypeSupported}function py(t,i){return gi.WebKitMediaKeys.isTypeSupported(t,i)}r();var Ay=class{async qA(t,i){for(let e of this.nN)try{return await e.qA(t,i)}catch(t){}throw new k("Unsupported key system configuration for "+t)}constructor(t){this.nN=t}};r(),r(),r(),r(),Uc(),r();var Wa=class{Wo(t,i){return new Promise((e=>{const s=Wt.Iy([this.rN.ly,i]),n=()=>{s.wy()};this.oN.push((()=>{const i=yy(t,s.ly);return e(i),i.then(n,n)})),this.hN||(this.hN=this.aN())}))}Ty(){return this.uN(!0)}gn(){return this.cN=void 0,this.uN(!1)}uN(t){const i=this.hN;return this.rN.Ty(),t&&(this.rN=new Wt),Promise.resolve(i)}constructor(t){this.oN=[],this.hN=void 0,this.rN=new Wt,this.aN=()=>{if(0===this.oN.length)return this.cN?yy(this.cN,this.rN.ly).then(this.lN,this.lN):this.lN();return this.oN.shift()().then(this.aN)},this.lN=()=>{if(0!==this.oN.length)return this.aN();this.hN=void 0},this.cN=t}};function yy(t,i){return new Promise((e=>e(t(i))))}var by=new Wa,My=class extends tu{dN(){this.sN&&(this.XS("usable"),this.sN.sM(void 0),this.sN=void 0)}fN(t){const i=new Nm("Unknown CDM error",t.errorCode,t.systemCode);this.sN?(this.sN.nM(i),this.sN=void 0):this.YS?(this.YS.nM(i),this.YS=void 0):i.oM===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.XS("output-restricted"):1===i.hM?this.XS("expired"):this.XS("internal-error")}gN(t){0!==t.message.byteLength?(this.YS&&(this.YS.sM(void 0),this.YS=void 0),this.yo(new sr(this,"license-request",Tm(this.yS,ja(t.message).buffer),t.defaultURL||void 0))):this.YS&&(this.YS.nM("Empty key message"),this.YS=void 0)}_N(t){this.vN||(this.vN=t,this.wN.sM(t))}get Rb(){return this.mN}get fS(){return this.pN}set fS(t){this.pN=t}get uS(){return this.US.rM}get cS(){return NaN}async Ws(){this.throwIfClosed(),this.sN&&(this.sN.nM(void 0),this.sN=void 0),this.wM=!0,this.US.sM(void 0)}async vS(t,i){this.throwIfClosed(),this.YS=new xh,this.AN=Cc(i);(this.vN||await this.wN.rM).webkitGenerateKeyRequest(this.yS,this.AN),await this.YS.rM}async $n(t){return this.throwIfClosed(),!1}async wS(){this.throwIfClosed()}async Yn(t){if(this.throwIfClosed(),this.sN=new xh,Ro.kf||Ro.Nf)return by.Wo((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.sN)return;(this.vN||await this.wN.rM).webkitAddKey(this.yS,Cc(t),this.AN,this.fS),await this.sN.rM,Ro.Nf&&await Dt(500)}throwIfClosed(){if(this.wM)throw new k("Already closing or closed.")}XS(t){this.mN.eM(),this.mN.tM(bm,t),this.yo(new pw(this.mN))}async yN(){const t=this.vN||await this.wN.rM;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.yS,this.pN)}catch(t){}finally{await Dt(500)}}constructor(t){super(),this.yS=t,this.YS=void 0,this.sN=void 0,this.wM=!1,this.AN=void 0,this.vN=void 0,this.US=new xh,this.pN="",this.wN=new xh,this.mN=new ru}},Ty=class{bn(t){return this.vN=t,this.vN.addEventListener("webkitkeyadded",this.HS),this.vN.addEventListener("webkitkeyerror",this.bN),this.vN.addEventListener("webkitkeymessage",this.MN),this.TN.forEach(((i,e)=>i._N(t))),this.SN.forEach((i=>i._N(t))),Promise.resolve()}DS(t){return t.removeEventListener("webkitkeyadded",this.HS),t.removeEventListener("webkitkeyerror",this.bN),t.removeEventListener("webkitkeymessage",this.MN),this.vN=void 0,Promise.resolve()}async tr(){let t=this.TN.entries(),i=t.next();for(;!i.done;)await i.value[1].yN(),i=t.next();this.TN.clear()}async TS(t,i,e){const s=new My(this.NS);return this.vN&&s._N(this.vN),this.SN.push(s),s}IS(t){return Promise.resolve(!1)}NN(t){if(!t)return;let i=this.TN.get(t);return i||(i=this.SN.shift(),i?(i.fS=t,this.TN.set(t,i),i):void 0)}constructor(t,i){this.NS=t,this.md=i,this.vN=void 0,this.TN=ll(),this.SN=[],this.HS=t=>{const i=this.NN(t.sessionId);i&&i.dN()},this.bN=t=>{const i=this.NN(t.sessionId);i&&i.fN(t)},this.MN=t=>{const i=this.NN(t.sessionId);i&&i.gN(t)}}},Sy=class{kS(){return Promise.resolve(new Ty(this.NS,this.DN))}xS(){return this.DN}constructor(t,i){this.NS=t,this.DN=i}},Ny=class{qA(t,i){try{return Promise.resolve(function(t,i){if(!Ny.PS())throw new k("Unsupported key system "+t);for(let e of i){let i=$A(Iy,ww,t,e);if(i)return new Sy(t,i)}throw new k("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static PS(){return wc()}};function Iy(t,i){const e=Eh();return!(!e||!e.canPlayType||""===e.canPlayType(i,t))}Uc(),r();var Dy,Ey=class{qA(t,i){return t===mv||t===bo?Promise.resolve(void 0):Promise.reject(new b("DRM configuration not supported"))}};function ky(){return Dy||(Dy=function(){const t=[];wy.PS()&&t.push(new wy);oy.PS()&&t.push(new oy);cy.PS()&&t.push(new cy);Ny.PS()&&t.push(new Ny);Ro.xf&&t.push(new Ey);return new Ay(t)}()),Dy}Uc(),r(),r();var Ly=class{eM(t){this.EN.delete(t)}kN(){this.EN.clear()}$b(t){return this.EN.get(t)}tM(t,i){this.EN.set(t,i)}constructor(){this.EN=ll()}},xy=class t{static LN(){return t.Ld||(t.Ld=Cy.PS()?new Cy:new Ly),t.Ld}static eM(i){t.LN().eM(i)}static kN(){t.LN().kN()}static $b(i){return t.LN().$b(i)}static tM(i,e){t.LN().tM(i,e)}};xy.Ld=void 0;var Cy=class extends xy{static PS(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}eM(t){self.sessionStorage.removeItem(t)}kN(){self.sessionStorage.clear()}$b(t){var i;return null!=(i=self.sessionStorage.getItem(t))?i:void 0}tM(t,i){self.sessionStorage.setItem(t,i)}};r(),r();var Ec=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(i,e)=>new t(i,e)}(t)}catch(t){}const i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(i)return function(t){return(i,e)=>{const s=new t;if(i)for(const t of i)s.append(t);return s.getBlob(e&&e.type||"")}}(i)})();function jy(t,i,e){const s=Ec([i],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,i){let e=t;const s=e.indexOf("?");if(s>=0&&(e=e.substr(0,s)),e=e.substr(e.lastIndexOf("/")+1),i){let t=e.indexOf(".");t<0&&(t=e.length),e=e.substr(0,t)+i+e.substr(t)}return e}(t,e),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}r();var Oy="default";r(),r(),r(),r();var Ee=function(t){return t.xN="arraybuffer",t.CN="json",t.jN="stream",t.ON="text",t}({});r();var Rh=class t{append(t,i){let e=t,s=i;e=Ry(e),s=Py(s);const n=e.toLowerCase();if(this.Hv.hasOwnProperty(n)){const t=this.Hv[n],i=t[1];t[1]=i?i+", "+s:s}else this.Hv[n]=[e,s]}delete(t){const i=Ry(t).toLowerCase();delete this.Hv[i]}get(t){const i=Ry(t).toLowerCase();return this.Hv.hasOwnProperty(i)?this.Hv[i][1]:null}has(t){const i=Ry(t).toLowerCase();return this.Hv.hasOwnProperty(i)}set(t,i){let e=t;e=Ry(e);const s=e.toLowerCase();this.Hv[s]=[e,Py(i)]}forEach(t,i){for(const e in this.Hv)this.Hv.hasOwnProperty(e)&&t.call(i,this.Hv[e][1],e,this)}asList(){const t=[];for(const i in this.Hv)if(this.Hv.hasOwnProperty(i)){const[e,s]=this.Hv[i];t.push([e,s])}return t}RN(){const t={};return this.forEach(((i,e)=>{t[e]=i})),t}PN(t){t.forEach(((t,i)=>{this.append(i,t)}))}zN(t){t.forEach(((t,i)=>{this.set(i,t)}))}constructor(i){this.Hv={},i instanceof t?i.asList().forEach((t=>{let[i,e]=t;this.append(i,e)})):Array.isArray(i)?i.forEach((t=>{let[i,e]=t;this.append(i,e)})):i&&_.getOwnPropertyNames(i).forEach((t=>{this.append(t,i[t])}))}};function Ry(t){let i=t;if("string"!=typeof i&&(i=String(i)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(i))throw new k("Invalid character in header field name");return i}function Py(t){let i=t;return"string"!=typeof i&&(i=String(i)),i}r(),r(),r();var Jn=ud(vd());r();var zy=class extends Co{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}};bs();var By=a,Uy=Pd(By.ReadableStream)&&Pd(By.WritableStream)&&Pd(By.TransformStream)&&Rd(By.ReadableStream.prototype.pipeThrough)&&!Pf.Rp,bc=Uy?By.ReadableStream:Jn.ReadableStream,Qy=Uy?By.WritableStream:Jn.WritableStream,La=Uy?By.TransformStream:Jn.TransformStream,Fy=(Uy&&By.ByteLengthQueuingStrategy?By.ByteLengthQueuingStrategy:Jn.ByteLengthQueuingStrategy,Uy&&By.CountQueuingStrategy?By.CountQueuingStrategy:Jn.CountQueuingStrategy);function Yy(t){return function(t){return new bc({start(i){for(const e of t)i.enqueue(e);i.close()}})}([t])}function Vy(t){return Yy(function(t){return new T(t)}(t))}function Gy(t,i){let e=i;const s=t.getReader(),n=new xh,r=()=>{o();const t=new J;s.cancel(t).catch(Bn),n.nM(t)},o=()=>{e&&(e.oy(r),e=void 0)};e&&(e.sy?r():e.uy(r));const h=[],a=t=>t.done?(o(),Promise.resolve(h)):(h.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{o(),n.sM(t)}),(t=>{o(),n.nM(t)})),n.rM}function Wy(t,i){return Gy(t,i).then((t=>ih(t).buffer))}function Zy(t,i){let e=i;const{readable:s,writable:n}=new La,r=n.getWriter(),o=()=>{e&&e.Ty()};return r.closed.then(o,o),t.then((t=>(e=void 0,r.releaseLock(),t.pipeTo(n).catch(Bn))),(t=>(e=void 0,r.releaseLock(),n.abort(t).catch(Bn)))),s}function Hy(t){const{readable:i,writable:e}=new La;return t.pipeTo(e,{preventCancel:!0}).catch((i=>{let e;e=Zr(i)?i[0]===i[1]||Tu(i[0])&&Tu(i[1])?i[0]:new zy(i):i,t.cancel(e).catch(Bn)})),i.tee()}function Xy(t){return tr(new T(t))}function qy(t){return Ml(t).buffer}r(),bs();var Ky="content-type",Jy="text/plain;charset=UTF-8",at=class{BN(t){return this.UN(t).then(JSON.parse)}QN(t,i){switch(t){case Ee.xN:return this.FN(i);case Ee.CN:return this.BN(i);case Ee.jN:return this.YN();case Ee.ON:return this.UN(i);default:throw new k}}};function $y(t,i,e){if(t instanceof at)return t;if(t instanceof bc)return function(t,i){return new ib({YA:0,YN:t,VN:tb(i)})}(t,e);const s=tb(e),n=Promise.resolve(t).then((t=>function(t,i){if(t){if("string"==typeof t)return{YA:Ee.ON,GN:t,VN:i||Jy};if(t instanceof ArrayBuffer||Pl(t))return{YA:Ee.xN,GN:ab(t),VN:i};if(jd(t)||Zr(t))return{YA:Ee.CN,GN:t,VN:i};throw new k("Unsupported BodyInit type")}return{YA:Ee.ON,GN:null,VN:i}}(t,s)));return new ib({YA:1,rM:n,WN:i})}function tb(t){return(t.get(Ky)||"").toLowerCase()}var ib=class t extends at{get ZN(){return this.HN}get XN(){return 0===this.qN.YA}KN(){return this.JN.rM}UN(t){return this.$N(eb,t)}BN(t){return this.$N(nb,t)}FN(t){return this.$N(ob,t)}YN(){return this.tI(function(t){return 0===t.YA?t.YN:Zy(t.rM.then(hb).then(Vy),t.WN)}(this.qN))}$N(t,i){if(this.HN)return Promise.reject(new k("Already used"));this.HN=!0;const e=t(this.qN,i);return this.JN.Sy(e.then(Bn)),e}tI(t){if(this.HN)throw new k("Already used");if(t.locked)throw new k("Body stream is locked");this.HN=!0;const i=new La,e=Promise.resolve(t.pipeTo(i.writable));return this.JN.Sy(e),i.readable}iI(t){this.qN=t,1===t.YA&&t.rM.catch(Bn)}eI(){if(this.HN)throw new k("Already used");const i=function(t){if(0===t.YA){const[i,e]=t.YN.tee();return[{YA:t.YA,YN:i,VN:t.VN},{YA:t.YA,YN:e,VN:t.VN}]}{const[i,e]=t.WN.Ny();return[{YA:t.YA,rM:t.rM,WN:i},{YA:t.YA,rM:t.rM,WN:e}]}}(this.qN),e=i[0],s=i[1];return this.iI(e),new t(s)}constructor(t){super(),this.HN=!1,this.JN=new xh,this.JN.rM.catch(Bn),this.iI(t)}};function eb(t,i){return 0===t.YA?Wy(t.YN,i).then(Xy):(i&&t.WN.Sy(i),Vh(t.rM.then(sb),t.WN))}function sb(t){switch(t.YA){case Ee.ON:return Promise.resolve(t.GN||"");case Ee.xN:return Promise.resolve(t.GN).then(Xy);case Ee.CN:return Promise.resolve(t.GN).then(JSON.stringify)}}function nb(t,i){return 0===t.YA?eb(t,i).then(JSON.parse):(i&&t.WN.Sy(i),Vh(t.rM.then(rb),t.WN))}function rb(t){return t.YA===Ee.CN?Promise.resolve(t.GN):sb(t).then(JSON.parse)}function ob(t,i){return 0===t.YA?Wy(t.YN,i):(i&&t.WN.Sy(i),Vh(t.rM.then(hb),t.WN))}function hb(t){switch(t.YA){case Ee.xN:return Promise.resolve(t.GN);case Ee.ON:case Ee.CN:return sb(t).then(qy)}}function ab(t){return t instanceof ArrayBuffer?t:ja(ka(t)).buffer}var ub=class extends at{get ZN(){return this.sI.ZN}get XN(){return this.sI.XN}KN(){return this.sI.KN()}UN(t){return this.sI.UN(t)}BN(t){return this.sI.BN(t)}FN(t){return this.sI.FN(t)}YN(t){return this.sI.YN(t)}eI(){return this.sI.eI()}constructor(t){super(),this.sI=t}};function cb(t){return t.nI>=200&&t.nI<=299||304===t.nI}var qt=class t extends ub{rI(t){return this.QN(this.oI,t)}Zb(){return new t({rI:this.eI(),hI:this.hI},this)}constructor(t,i){let e,s,n,r,o;i?(e=i.aI,s=i.oI,n=i.nI,r=i.uI,o=i.cI):(e=[],s=Ee.ON,n=200,r="OK",o=!1);const h=t.hI,a=new Rh(t.aI||e),u=t.oI||s,c=t.lI||(i&&i.hI===h?i.lI:h.zu),l=i?i.sI:null;super($y(void 0!==t.rI?t.rI:l,t.WN||new Wt,a)),this.aI=a,this.hI=h,this.lI=c,this.oI=u,this.nI=void 0!==t.nI?t.nI:n,this.uI=void 0!==t.uI?String(t.uI):r,this.cI=t.cI||o}};r();var Ve=function(t){return t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT",t}({}),Rs=function(t){return t.dI="",t.fI="manifest",t.gI="segment",t._I="preload-hint",t.vI="content-protection",t}({}),ul=function(t){return t.dI="",t.wI="initialization-segment",t.mI="fairplay-license",t.pI="fairplay-certificate",t.AI="widevine-license",t.yI="widevine-certificate",t.bI="playready-license",t.MI="clearkey-license",t.TI="aes128-key",t}({}),Pc=function(t){return t.dI="",t.SI="audio",t.NI="video",t.ON="text",t.II="image",t}({}),lb=function(t){return t.DI="same-origin",t.EI="no-cors",t.kI="cors",t.LI="navigate",t}({}),Gs=class{constructor(t,i){const e=t.zu;let s,n,r,o,h,a,u,c,l,d,f,g,_,v,w;var m,p,A;i?(s=i.GN,n=i.aI,r=i.xI,o=i.oI,h=i.CI,a=i.jI,u=i.ly,c=i.YA,l=i.OI,d=i.RI,f=i.zI,g=i.BI,_=i.UI,v=i.QI,w=i.FI):(s=null,n={},r="GET",o=Ee.ON,h=0,a=0,c="",l="",d="",f=!1,_=void 0,v=!1,w=void 0),this.zu=e,this.GN=t.GN||s,this.aI=new Rh(t.aI||n),this.xI=t.xI||r,this.oI=t.oI||o,this.CI=void 0!==t.CI?Number(t.CI)||0:h,this.jI=void 0!==t.jI?Number(t.jI)||0:a,this.ly=t.ly||u||(new Wt).ly,this.YA=t.YA||c,this.OI=t.OI||l,this.RI=t.RI||d,this.zI=void 0!==t.zI?Boolean(t.zI):f,this.BI=t.BI||g,this.UI=null!=(m=t.UI)?m:_,this.QI=null!=(p=t.QI)?p:v,this.FI=null!=(A=t.FI)?A:w}},db=class{hI(t){const i=function(t){return new qt({rI:null,aI:{},hI:t,lI:t.zu,oI:t.oI,nI:0,uI:Zi._b})}(new Gs(t));return Promise.resolve(i)}YI(t){}gn(){}};Qi();var kc=class t{static get VI(){return t.GI||(t.GI=new t(new db)),t.GI}hI(t){const i=this.WI(t);return this.ZI.hI(i)}YI(t){return this.ZI.YI(this.HI(t))}WI(i){let e=new Gs(i);if(!this.XI){const i=t.qI(e.zu);e=new Gs({zu:i},e)}return e}HI(i){let e=i.zu;return this.XI||(e=t.qI(e)),{zu:e,GN:i.GN}}static qI(t){return Fe.kA&&I(t,"http://")?t.replace(":","s:"):t}gn(){this.ZI.gn()}constructor(t,i=!0){this.ZI=t,this.XI=i}};function fb(t,i){const e=Fe.Ah(t);return gb(e,i),e.toString()}function gb(t,i){for(const e of _.keys(i))t.searchParams.set(e,i[e])}function de(t,i){let e=Fe.TA(t);return i&&!tt(e,"/")&&(e+="/"),e}kc.GI=void 0,r(),r(),r(),Qi();var _b=/cache:(.+)?(?=&|$)/,vb="http://webcache.googleusercontent.com/search?q=cache:";function wb(t){if(!I(t,vb))return"";const i=Fe.Ah(t).search.match(_b);return i&&i.length>1?i[1]:""}function mb(t){return Fe.Ah(".",t)}r(),r();var bt=function(t){return t.KI="HttpOpenError",t.JI="HttpResponseError",t.$I="HttpTimeoutError",t}({}),pb=class extends Co{get hI(){return this.tD}constructor(t,i,e){super(i,e),this.tD=t}};var Ab=class extends pb{get name(){return bt.KI}constructor(t,i){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.zu),i)}};r();var yb=class extends pb{get name(){return bt.JI}get iD(){return this.eD}constructor(t,i,e){super(t.hI,null!=e?e:function(t){return"Error while loading "+t.hI.zu+", status code "+t.nI}(t),i),this.eD=t}};r();var wt=class extends pb{get name(){return bt.$I}constructor(t,i){super(t,function(t){return"Request for "+t.zu+" timed out after "+t.CI+" seconds."}(t),i)}};r(),bs(),Uc();var bb=self.fetch,Mb=self.Request,Tb=self.Response,Sb=self.Headers,Nb=self.ReadableStream,Ib=self.AbortSignal,Db=self.AbortController,Eb=di((()=>{try{return Rd(bb)&&Pd(Mb)&&Pd(Tb)&&Pd(Sb)&&"forEach"in Sb.prototype&&sv()}catch(t){return!1}})),kb=["http:","https:"];var Lb=di((()=>{try{return Eb()&&Pd(Ib)&&Pd(Db)&&"signal"in Mb.prototype}catch(t){return!1}})),xb=di((()=>{try{return Eb()&&Pd(Nb)&&"body"in Tb.prototype&&!Ro.hf}catch(t){return!1}}));function Cb(t){return t instanceof pb}function jb(t){return t instanceof yb}function Ob(t,i){const e=t.aI.has("content-length")?Number(t.aI.get("content-length")):void 0;let s;return s=t.XN?function(t,i,e){return t.pipeThrough(new La(new Rb(i,e)))}(t.YN(),i,e):async function(t,i,e){await Promise.resolve(),i(0,e);const s=await t,n=s.byteLength;return i(n,null!=e?e:n),s}(t.FN(),i,e),new qt({rI:s,hI:t.hI},t)}bs(),r(),r();var Rb=class{transform(t,i){this.sD+=t.byteLength,this.nD(this.sD,this.rD),i.enqueue(t)}flush(t){var i;this.nD(this.sD,null!=(i=this.rD)?i:this.sD)}constructor(t,i){this.nD=t,this.rD=i,this.sD=0}};var Pb=class{async oD(){const t=this.tD;let i,e;t.CI&&(this.hD=u((()=>{this.aD=!0,this.rN.Ty()}),t.CI),this.rN.ly.Ay((()=>{c(this.hD)})));try{i=bb(t.zu,{method:t.xI,headers:t.aI.RN(),body:t.GN,credentials:t.zI?"include":"same-origin",signal:Ub(this.rN.ly),mode:t.UI,keepalive:t.FI})}catch(i){throw new Ab(t,i)}try{e=await i}catch(t){const i=this.uD(t);throw Tu(i)&&this.rN.Ty(),i}const s=e.url||t.zu,n=0===e.status&&"file:"===function(t){return Fe.Ah(t).protocol}(s)?200:e.status,r=new zb(this,e,this.rN);let o=new qt({rI:r,hI:t,oI:t.oI,aI:Qb(e.headers),nI:n,uI:e.statusText,lI:s});if(!cb(o))throw new yb(o);return t.BI&&(o=Ob(o,t.BI)),o}uD(t){return Cb(t)?t:Tu(t)?this.aD?new wt(this.tD):new J(t.message,t):this.eD?new yb(this.eD,t):new Ab(this.tD,t)}constructor(t){this.rN=new Wt,this.eD=void 0,this.hD=0,this.aD=!1,this.tD=t,this.rN.Sy(t.ly),this.iD=this.oD()}},zb=class t extends at{get ZN(){return this.cD.bodyUsed}get XN(){return $t(this.cD.body)}KN(){return this.JN.rM}UN(t){return this.$N(this.cD.text(),t)}FN(t){return this.$N(this.cD.arrayBuffer(),t)}YN(){const t=this.cD.body;return t?this.tI(t):Zy(this.FN().then(Vy),this.rN)}eI(){const i=this.cD.clone(),[e,s]=this.rN.Ny();return this.rN=e,new t(this.lD,i,s)}$N(t,i){i&&this.rN.Sy(i);let e=Ao(Promise.resolve(t),this.rN.ly).catch((t=>{throw this.lD.uD(t)}));return e=Vh(e,this.rN),this.JN.Sy(e.then(Bn)),e}tI(t){return new bc(new Fb(t,(t=>this.lD.uD(t)),this.rN,this.JN),{highWaterMark:0})}constructor(t,i,e){super(),this.JN=new xh,this.lD=t,this.cD=i,this.rN=e,this.JN.rM.catch(Bn)}},Bb="abort";function Ub(t){if(!Lb())return;const i=new Db;if(t.sy)i.abort();else if(!t._y){const e=()=>{s(),i.abort()},s=()=>{i.signal.removeEventListener(Bb,e),t.oy(e),t.yy(s)};i.signal.addEventListener(Bb,e),t.uy(e),t.Ay(s)}return i.signal}function Qb(t){if(function(t){return Z(t)&&"function"==typeof t.forEach}(t)){const i=new Rh;return t.forEach(((t,e)=>{Array.isArray(t)&&2===t.length?i.append(t[0],t[1]):i.append(e,t)})),i}return new Rh(t)}var Fb=class{start(t){this.Wg=this.dD.getReader()}async pull(t){let i;try{i=await Ao(this.Wg.read(),this.rN.ly)}catch(i){const e=this.fD(i);return this.JN.nM(e),this.rN.Ty(),this.Wg.cancel(e).catch(Bn),void t.error(e)}i.done?(this.JN.sM(),this.rN.Ty(),t.close()):t.enqueue(i.value)}cancel(t){return this.rN.Ty(),this.JN.nM(t),this.Wg.cancel(t)}constructor(t,i,e,s){this.dD=t,this.fD=i,this.rN=e,this.JN=s}};r();var Yb=class{get iD(){return this.gD.rM}oD(){const t=this._D,i=this.tD;if(i.ly.sy)return this.vD();t.onreadystatechange=()=>this.wD(),t.onprogress=t=>this.nD(t),t.onload=()=>this.mD(),t.onloadend=()=>this.pD(),t.onerror=()=>this.yD(),t.ontimeout=()=>this.bD(),t.onabort=()=>this.vD(),t.open(i.xI,i.zu,!0),t.withCredentials=Boolean(i.zI),"responseType"in t&&i.oI&&(i.oI===Ee.ON?t.responseType="text":t.responseType="arraybuffer"),i.aI.forEach(((i,e)=>{t.setRequestHeader(e,i)})),i.CI&&(t.timeout=i.CI),this.rN.ly.uy(this.MD);const e=i.GN;e?t.send(e):t.send()}wD(){const t=this._D;void 0!==t&&t.readyState>=2&&!this.TD&&(this.TD=!0,this.SD())}SD(){var t;const i=this._D,e=function(t){const i=new Rh,e=t.replace(/\r?\n[\t ]+/g," ");return e.split(/\r?\n/).forEach((t=>{const e=t.split(":"),s=e.shift().trim();if(s){const t=e.join(":").trim();i.append(s,t)}})),i}(i.getAllResponseHeaders()||""),s=this.tD;var n;this.ND=new xh,this.eD=new qt({hI:s,oI:s.oI,rI:this.ND.rM,nI:i.status,uI:i.statusText,aI:e,lI:null!=(n=i.responseURL)?n:e.get("X-Request-URL")}),null==(t=this.gD)||t.sM(this.eD)}mD(){var t;const i=this._D;if(void 0===i)return;let e=i.response;if(!$t(e)){const t=this.tD.oI;e=t===Ee.ON?i.responseText:t===Ee.xN?new ArrayBuffer(0):{}}null==(t=this.ND)||t.sM(e)}pD(){this.gn()}nD(t){void 0!==this._D&&(null==this.tD.BI||this.tD.BI.call(this.tD,t.loaded,t.lengthComputable?t.total:void 0))}yD(){const t=new b("Network request failed");this.eD?this.Ss(new yb(this.eD,t)):this.Ss(new Ab(this.tD,t))}bD(){this.Ss(new wt(this.tD))}vD(){this.Ss(new J),this.gn()}Ss(t){var i,e;null==(i=null!=(e=this.ND)?e:this.gD)||i.nM(t)}gn(){this._D=void 0,this.eD=void 0,this.gD=void 0,this.ND=void 0,this.rN.wy()}constructor(t){this.rN=new Wt,this.eD=void 0,this.gD=new xh,this.TD=!1,this.MD=()=>{var t;this.vD(),null==(t=this._D)||t.abort()},this.tD=t,this.rN.Sy(t.ly),this._D=new $l,this.oD()}};function ku(t,i,e){return new Promise(((s,n)=>{if(e&&e.sy)return n(new J);const r=t=>{h(),s(t)},o=()=>{h(),n(new J)},h=()=>{t.removeEventListener(i,r),e&&e.oy(o)};t.addEventListener(i,r),e&&e.uy(o)}))}r(),bs(),Uc();var Vb=class{hI(t){return function(t){if(!Eb()||!function(t){try{return kb.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.zu))return!1;if(!xb()&&t.BI)return!1;if(!t.QI&&t.xI!==Ve.POST){if(Ro.kf&&Ro.mf<=68)return!1;if(Ro.Nf)return!1}return!0}(t)?new Pb(t).iD:new Yb(t).iD}YI(t){if(Vf&&Vf.sendBeacon)Vf.sendBeacon(t.zu,Ec([t.GN],{type:t.VN}));else{const i=t.VN?{"Content-type":t.VN}:void 0;this.hI(new Gs({xI:Ve.POST,zu:t.zu,GN:t.GN,aI:i,UI:lb.EI})).then((t=>{X(t.FN())}),Bn)}}gn(){}};r(),r();var hu=function(t){return t[t.DD=1]="DD",t[t.ED=2]="ED",t[t.ON=3]="ON",t[t.kD=4]="kD",t[t.LD=9]="LD",t}({});function Gb(t){return 1===t.xD}function Wb(t){return 3===t.xD}r();var Zb=class extends Co{constructor(t){super("Invalid XML",t)}},Hb=class{CD(t){const i=new DOMParser;let e;try{e=i.parseFromString(t,"text/xml")}catch(t){throw new Zb(t)}if(!e||e.getElementsByTagName("parsererror").length>0)throw new Zb;return new iM(e)}},Xb=class t{get xD(){return hu.ED}get jD(){var t;return null!=(t=this.OD.localName)?t:nM(this.OD.nodeName)}get l(){return this.OD.nodeName}get RD(){var t;return null!=(t=this.OD.namespaceURI)?t:void 0}get PD(){var t;return null!=(t=this.OD.prefix)?t:void 0}get zD(){return this.OD.nodeValue}BD(t){return this.OD.isEqualNode(t.OD)}UD(i){return new t(this.OD.cloneNode(i))}constructor(t){this.OD=t}},qb=class{get QD(){return void 0===this.FD&&(this.FD=function(t){const i=[];for(let e=0;e<t.length;e++){const s=sM(t.item(e));s&&i.push(s)}return i}(this.YD.childNodes)),this.FD}get m(){return this.QD.filter(eM)}VD(t){return this.QD.filter((i=>eM(i)&&i.GD===t))}WD(t,i){return this.QD.filter((e=>eM(e)&&e.jD===i&&e.RD===t))}get ZD(){return this.YD}HD(t){this.YD.appendChild(t.ZD),this.FD&&this.FD.push(t)}BD(t){return this.YD.isEqualNode(t.ZD)}constructor(t){this.FD=void 0,this.YD=t}},Kb=class t extends qb{get xD(){return hu.DD}get jD(){var t;return null!=(t=this.YD.localName)?t:nM(this.YD.nodeName)}get RD(){var t;return null!=(t=this.YD.namespaceURI)?t:void 0}get PD(){var t;return null!=(t=this.YD.prefix)?t:void 0}get GD(){return this.YD.nodeName}get XD(){return function(t){const i=[];for(let e=0;e<t.length;e++)i.push(new Xb(t.item(e)));return i}(this.YD.attributes)}get qD(){return this.YD.textContent}KD(t){if(this.YD.hasAttribute(t))return this.YD.getAttribute(t)}JD(t,i){if(this.YD.hasAttributeNS(t,i))return this.YD.getAttributeNS(t,i)}$D(t){this.YD.removeAttribute(t)}tE(t,i){this.YD.removeAttributeNS(t,i)}iE(t,i){this.YD.setAttribute(t,i)}eE(t,i,e){this.YD.setAttributeNS(t,i,e)}UD(i){return new t(this.YD.cloneNode(i))}constructor(t){super(t)}},Jb=class{get rI(){return this.YD.nodeValue}get ZD(){return this.YD}BD(t){return this.rI===t.rI}constructor(t){this.YD=t}},$b=class t extends Jb{get xD(){return hu.ON}UD(i){return new t(this.YD.cloneNode(i))}constructor(t){super(t)}},tM=class t extends Jb{get xD(){return hu.kD}UD(i){return new t(this.YD.cloneNode(i))}constructor(t){super(t)}},iM=class t extends qb{get xD(){return hu.LD}get sE(){return new Kb(this.YD.documentElement)}UD(i){return new t(this.YD.cloneNode(i))}constructor(t){super(t)}};function eM(t){return Gb(t)}function sM(t){switch(t.nodeType){case hu.DD:return new Kb(t);case hu.ON:return new $b(t);case hu.kD:return new tM(t)}}function nM(t){const i=t.indexOf(":");return i<0?t:t.substr(i+1)}!function(t){Fe=t}(new class extends iv{get _A(){return this.nE||(this.nE=new Fv(ky())),this.nE}get rE(){return this.oE}get hE(){return this.aE}get uE(){return this.cE}get lE(){return!1}get dE(){return xy.LN()}get fE(){return{gE:jy}}get _E(){return Kl.connection&&Kl.connection.effectiveType||Oy}get vE(){return Kl.connection&&Kl.connection.type||"unknown"}get wE(){return this.mE||(this.mE=new kc(new Vb)),this.mE}CD(t){return this.pE.CD(t)}constructor(...t){super(...t),this.nE=void 0,this.oE=xb(),this.aE=Ro.gg||Ro.hf,this.cE=(Ro.gg||Ro.kf&&Ro.mf<=68||Ro.hf)&&!(Ro.Nf&&Ro.Df<3),this.mE=void 0,this.pE=new Hb}}),r(),r(),r(),r(),r(),r();var rM=class extends gs{},At=class extends gs{get ht(){return this.AE()}AE(){return this.yE.ht}bE(){return this.yE.bE()}get TE(){return this.SE()}SE(){return this.yE.TE}get NE(){return this.DE()}set NE(t){this.EE(t)}DE(){return this.yE.NE}EE(t){this.yE.NE=t}get bt(){return this.kE()}kE(){return this.yE.bt}get LE(){return this.xE()}set LE(t){this.CE(t)}xE(){return this.yE.LE}CE(t,i){this.yE.CE(t,i)}get ct(){return this._d()}_d(){return this.yE.ct}get we(){return this.jE()}jE(){return this.yE.we}get OE(){return this.RE()}RE(){return this.yE.OE}get lt(){return this.PE()}get zE(){return this.BE()}PE(){return this.yE.lt}BE(){return this.yE.zE}get UE(){return this.QE()}QE(){return this.yE.UE}get FE(){return this.YE()}YE(){return this.yE.FE}get VE(){return this.GE()}GE(){return this.yE.VE}get WE(){return this.ZE()}set WE(t){this.HE(t)}ZE(){return this.yE.WE}HE(t){this.yE.WE=t}get XE(){return this.qE()}qE(){return this.yE.XE}get KE(){return this.JE()}JE(){return this.yE.KE}get $E(){return this.ek()}set $E(t){this.nk(t)}ek(){return this.yE.$E}nk(t){this.yE.$E=t}get rk(){return this.hk()}hk(){return this.yE.rk}get ck(){return this.lk()}set ck(t){this.dk(t)}lk(){return this.yE.ck}dk(t){this.yE.ck=t}get fk(){return this.gk()}gk(){return this.yE.fk}get _k(){return this.vk()}vk(){return this.yE._k}get wk(){return this.pk()}pk(){return this.yE.wk}Ya(){return this.yE.Ya()}ka(t,i){return this.yE.ka(t,i)}get nt(){return this.Ak()}Ak(){return this.yE.nt}get yk(){return this.bk()}bk(){return this.yE.yk}get rt(){return this.Mk()}Mk(){return this.yE.rt}get Tk(){return this.Sk()}Sk(){return this.yE.Tk}get Nk(){return this.Ik()}set Nk(t){this.Dk(t)}get Ek(){return this.Lk()}Lk(){return this.yE.Ek}Ik(){return this.yE.Nk}Dk(t){this.yE.Nk=t}get xk(){return this.yE.xk}set xk(t){this.yE.xk=t}Ck(){return this.yE.Ck()}_a(){return this.yE._a()}jk(){return this.yE.jk()}ur(t){this.yE.ur(t)}ar(){this.yE.ar()}be(){this.yE.be()}Ok(){this.yE.Ok()}Rk(){this.yE.Rk()}Pk(){this.yE.Pk()}ge(){this.yE.ge()}zk(){return this.yE.zk()}Bk(){return this.yE.Bk()}Uk(){this.yE.Uk()}Qk(){this.yE.Qk()}tr(){return this.yE.tr()}Fk(){this.yE.Fk()}Yk(){this.yE.Yk()}Vk(t){return this.yE.Vk(t)}Gk(t){return!1}async gn(){this.Bo(),await this.yE.gn()}Wk(t){return this.yE.Wk(t)}constructor(t){super(),this.Zk=t=>{this.Gk(t)||this.yo(t)},this.yE=t,t.xy(this.Zk)}};r(),r(),r();var zh=function(t){return t.Hk="Xk",t.qk="Kk",t}({});r(),r(),r(),r();var Dc=class extends Jr{get ga(){return this.Za||(this.Za=this.ma()),this.Za}constructor(t,i){super(t,i),this.Za=void 0}};function oM(t){return Boolean(t&&t.ga)}var Va=class extends Dc{constructor(t){super(t)}},du=class extends Jr{constructor(t){super(t)}},hM=class extends Va{ma(){return new aM(this.Ht.ga)}constructor(t){super(zh.Hk),this.Ht=t}},aM=class extends du{constructor(t){super("addtrack"),this.track=t}};r();var uM=class extends Va{ma(){return new cM(this.Ht.ga)}constructor(t){super(zh.qk),this.Ht=t}},cM=class extends du{constructor(t){super("removetrack"),this.track=t}};r();var hs=function(t){return t.Jk="$k",t.tL="iL",t.eL="sL",t.nL="rL",t.oL="hL",t.aL="uL",t.aa="cL",t.lL="dL",t.fL="gL",t._L="Yn",t.vL="wL",t.mL="pL",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality",t}({}),lM=class extends tu{get AL(){return this.yL}get ga(){return this.Za||(this.Za=this.ma()),this.Za}get V(){return this.yL.length}bL(t){return this.yL[t]}tt(t){return!(!t||Qa(this.yL,t))&&(this.yL.push(t),this.Za&&this.Za.push(t.ga),t.yn(hs.aa,this.Ds),this.yo(new hM(t)),!0)}it(t){if(!t)return!1;const i=this.yL.indexOf(t);return!(i<0)&&(Mn(this.yL,i),this.Za&&Mn(this.Za,i),t.fn(hs.aa,this.Ds),this.yo(new uM(t)),!0)}ML(t){return Qa(this.yL,t)}tr(){const t=this.yL;for(let i=t.length-1;i>=0;i-=1)this.it(t[i])}gn(){this.tr(),this.Bo()}constructor(){super(),this.yL=[],this.Za=void 0}};r();var dM=class extends Va{ma(){return new fM(this.Ht.ga)}constructor(t){super(hs.aa),this.Ht=t}},fM=class extends du{constructor(t){super("change"),this.track=t}},gM=class extends lM{get TL(){return this.SL}set TL(t){const i=this.SL;if(t!==i){if(i){this.NL(i);for(const e of i.AL)t&&t.ML(e)||this.it(e)}if(this.SL=t,t){const i=[];for(const e of t.AL)this.tt(e),this.IL(e)&&i.push(e);this.DL(t);for(const t of i)t.yo(new dM(t))}}}DL(t){t.yn(zh.Hk,this.EL),t.yn(zh.qk,this.kL)}NL(t){t.fn(zh.Hk,this.EL),t.fn(zh.qk,this.kL)}gn(t){!t&&this.SL&&this.SL.gn(),super.gn()}constructor(){super(),this.SL=void 0,this.EL=t=>{const i=t.Ht;this.tt(i)},this.kL=t=>{const i=t.Ht;this.it(i)}}};r(),r(),r(),bs();var _M=_.freeze||fd;function vM(t,i,e){_.defineProperty(t,i,{writable:!1,enumerable:!0,value:e})}function wM(t){return _M(t)}function fe(t,i){for(const e of _.getOwnPropertyNames(i))_.defineProperty(t,e,_.getOwnPropertyDescriptor(i,e));return t}function oi(t){if(jd(t)){const i={};for(const e in t)Bh.call(t,e)&&(i[e]=oi(t[e]));return i}if(Zr(t)){const i=new Array(t.length);for(let e=0;e<i.length;e++)e in t&&(i[e]=oi(t[e]));return i}return t}function ns(t,i){return t===i||!(!t||!i)&&(!(!Z(t)||!Z(i))&&(Ia(t)?!!Ia(i)&&function(t,i){const e=t.length,s=i.length;if(e!==s)return!1;for(let s=0;s<e;s+=1)if(!ns(t[s],i[s]))return!1;return!0}(t,i):!Ia(i)&&function(t,i){const e=_.keys(t),s=_.keys(i);if(!e||!s||e.length!==s.length)return!1;for(const s of e)if(!Bh.call(i,s)||!ns(t[s],i[s]))return!1;return!0}(t,i)))}function mM(t,i){if(!Z(t))return!1;for(const e of i)if(!(e in t))return!1;return!0}function pM(t,i){return t.constructor===i.constructor}function AM(t){const i={};for(const e of _.keys(t)){const s=t[e];null!=s&&(i[e]=s)}return i}function yM(t){const i={};for(const e of _.keys(t)){const s=t[e];if(Ia(s)){const t=[];for(let i=0;i<s.length;i+=1){const e=s[i];if(null!=e){const i=Z(e)?yM(e):e;t.push(i)}}i[e]=t}else null!=s&&(i[e]=Z(s)?yM(s):s)}return i}function Fu(t){let i=t;if("string"==typeof i){if(i=i.toLowerCase(),"true"===i)return!0;if("false"===i)return!1}return Boolean(i)}function oo(t){return $t(t)?Fu(t):void 0}function bM(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function MM(t){const i=bM(t);if(j(i))throw new b("Expected a valid number.");return i}function Q(t){return"string"==typeof t?t:""}function TM(t,i){if(!Ia(t))return[];const e=0|t.length,s=new Array(e);for(let n=0;n<e;n++)s[n]=i(t[n]);return s}function Mt(t,i){let e;return e=Ia(t)?TM(t,i):i(t),e}r();var SM=[zh.Hk,zh.qk,hs.aa];function NM(t){let i;const e=t.AL.map((t=>t.ga));return e.item=i=>{const e=0|i,s=t.bL(e);return s&&s.ga||void 0},e.addEventListener=(t,e)=>{i.yn(t,e)},e.removeEventListener=(t,e)=>{i.fn(t,e)},i=new Su(e),t.yn(SM,(t=>i.yo(t.ga))),e}r();var Js=function(t){return t[t.LL=0]="LL",t[t.xL=1]="xL",t[t.CL=2]="CL",t[t.jL=3]="jL",t[t.OL=4]="OL",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.RL=7]="RL",t}({});function IM(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function DM(){}function go(t){const i=[hs._L,hs.aa,hs.vL,hs.mL,hs.QUALITY_UNAVAILABLE];let e;const s={get activeQuality(){return t.PL&&t.PL.ga},get enabled(){return t.Rt},set enabled(i){t.Rt=Fu(i)},get id(){return t.o},get uid(){return t.zL},get kind(){return t.Lt},get label(){return t.kh},set label(i){t.kh=Q(i)},get accessibility(){var i,e;return null!=(e=null==(i=t.BL)?void 0:i.map(IM))?e:[]},get language(){return t.gs},get qualities(){return t.UL.ga},set targetQuality(i){let e;e=i?function(t,i){const e=[];for(const s of t.UL.AL)for(const t of i)s.ga===t&&e.push(s);return e}(t,Zr(i)?i:[i]):[],e.length>0?t.QL=e:t.QL=void 0},get targetQuality(){if(t.QL)return 1===t.QL.length?t.QL[0].ga:t.QL.map((t=>t.ga))},addEventListener(t,i){const s=Mt(t,Q);e.yn(s,i)},removeEventListener(t,i){const s=Mt(t,Q);e.fn(s,i)}};return e=new Su(s),t.yn(i,(t=>e.yo(t.ga))),_.defineProperty(s,"constructor",{value:DM}),s}function EM(){}function kM(t){const i=NM(t);return _.defineProperty(i,"constructor",{value:EM}),i}var ol=class extends gM{ma(){return kM(this)}IL(t){return t.Rt}};r(),r(),r();var ua=function(t){return t.Ch="disabled",t.FL="hidden",t.Jn="showing",t}({});function Yo(t){if("string"==typeof t){const i=t.toLowerCase();switch(i){case"disabled":case"hidden":case"showing":return i}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}r();var Xi=function(t){return t.ua="error",t}({});function LM(){}function rr(t){const i=[hs.aa,hs._L,hs.Jk,hs.tL,hs.nL,hs.oL,hs.eL,hs.aL,hs.lL,hs.fL],e=[Xi.ua];let s;const n={get kind(){return t.Lt},get label(){return t.kh},set label(i){t.kh=Q(i)},get language(){return t.gs},get id(){return t.o},get uid(){return t.zL},get inBandMetadataTrackDispatchType(){return t.YL},get mode(){return t.UI},set mode(i){i!==ua.Jn&&i!==ua.FL&&i!==ua.Ch||t.VL(i)},get forced(){return Boolean(t.GL)},get accessibility(){var i,e;return null!=(e=null==(i=t.BL)?void 0:i.map(IM))?e:[]},get type(){return t.YA},get readyState(){return t.fk},get cues(){return t.UI===ua.Ch?null:t.L.ga},get activeCues(){return t.UI===ua.Ch?null:t.q.ga},get src(){return t.WL||""},addEventListener(t,i){const e=Mt(t,Q);s.yn(e,i)},removeEventListener(t,i){const e=Mt(t,Q);s.fn(e,i)}};return s=new Su(t),t.yn(i,(t=>s.yo(t.ga))),t.yn(e,(t=>s.yo(t))),_.defineProperty(n,"constructor",{value:LM}),n}function xM(){}function CM(t){const i=NM(t);return _.defineProperty(i,"constructor",{value:xM}),i}var Ce=class extends gM{ma(){return CM(this)}IL(t){return t.UI===ua.Jn}};r(),r();var jM=class extends tu{get ZL(){}get HL(){return!1}get XL(){}get ga(){var t;return null!=(t=this.Za)?t:this.Za=OM(this)}qL(){}};function OM(t){return{goLive:()=>t.qL(),get isLive(){return t.HL},get latencies(){return t.ZL},get manifest(){return t.XL},addEventListener(i,e){t.yn(PM(i),e)},removeEventListener(i,e){t.fn(PM(i),e)}}}var RM=["golive","latencyrecoveryseek"];function PM(t){const i=Mt(t,Q);return(Ic(i)?[i]:i).filter((t=>Qa(RM,t)))}var xt=class extends tu{set TL(t){const i=this.SL;t!==i&&(i&&this.NL(i),t&&this.DL(t),this.SL=t)}get TL(){return this.SL}get ga(){return this.Za||(this.Za=OM(this)),this.Za}DL(t){t.yn(RM,this.Ds)}NL(t){t.fn(RM,this.Ds)}qL(){var t;null==(t=this.SL)||t.qL()}get ZL(){var t;return null==(t=this.SL)?void 0:t.ZL}get HL(){return!!this.SL&&this.SL.HL}get XL(){var t;return null==(t=this.SL)?void 0:t.XL}gn(){this.Bo(),this.SL&&this.NL(this.SL),this.SL=void 0}constructor(){super(),this.SL=void 0,this.Za=void 0,this.SL=void 0}};r(),Qi(),r();var zM="8E80B9CE",BM=function(t){return t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled",t}({});function UM(t){return{appID:t&&t.appID?Q(t.appID):zM}}r(),r();var pu=function(t){return t.EI="",t.KL="anonymous",t.JL="use-credentials",t}({}),$n=function(t){return t.$L="application/dash+xml",t.tx="application/vnd.apple.mpegurl",t.ix="application/x-mpegurl",t.sx="video/mp4",t.nx="application/vnd.theoplayer.hesp+json",t.ox="application/vnd.theo.hesp+json",t.hx="millicast",t.ux="theolive",t}({});function QM(t){if(null!==t)return t}function FM(t){const i={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:QM(t.streamActivityMonitorID),adTagParameters:Z(t.adTagParameters)?t.adTagParameters:{},authToken:QM(t.authToken),omidAccessModeRules:QM(t.omidAccessModeRules)};if("vod"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.videoID&&i.contentSourceID)}(t)){const e=t.videoID,s=t.contentSourceID;return e?s?Ei({},i,{availabilityType:"vod",videoID:e,contentSourceID:s}):void Fe.uA("A VOD DAI configuration was provided without valid contentSourceID which is required."):void Fe.uA("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.assetKey)}(t)){const e=t.assetKey;return e?Ei({},i,{availabilityType:"live",assetKey:e}):void Fe.uA("A Live DAI configuration was provided without valid assetKey which is required.")}Fe.uA("A DAI configuration was provided without a valid availabilityType which is required.")}function YM(t){switch(t.integration){case"google-dai":return FM(t);case"imagine":return function(t){return{integration:t.integration}}(t);default:return Ei({},t,{integration:String(t.integration)})}}r(),r(),r(),r(),r(),Qi(),r(),r();var Xh,jc="titanium",VM="conax",GM="ezdrm",WM="irdeto",Sc="vudrm",ZM="verimatrix",Mc="keyos",Rc="drmtoday",HM="expressplay",XM="azure",Bc="xstream",qM="vimond",KM="axinom",JM="uplynk",$M="comcast",tT="custom";function iT(t,i){if(null==t)return{};var e,s,n={},r=_.keys(t);for(s=0;s<r.length;s++)e=r[s],i.indexOf(e)>=0||(n[e]=t[e]);return n}function eT(t){return $t(t.token&&t.deviceId)}function sT(t){var i;const e=null==(i=t.fairplay)?void 0:i.headers;return void 0!==e&&$t(e.PreAuthorization)}function nT(t){const i=t;return eT(i)&&""!==i.token&&""!==i.deviceId&&!sT(i)}r(),r(),r(),r(),r(),function(t){t.lx=!1,t.gx=!1,t._x=!1,t.vx=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.wx=!1,t.mx=!1,t.LOG_LCEVC_DETAILS=!1}(Xh||(Xh={})),Qi(),r();var lu=class extends qi{get name(){return"ContentProtectionError"}constructor(t,i,e,s,n,r,o,h){super(t,i,e),this.url=s,this.status=n,this.statusText=r,this.response=o,this.systemCode=h}};r();var rT=class{get Ax(){return this.yx}get NS(){return this.yS}bx(t){return function(t){const i=t.onCertificateRequest;if(void 0!==i&&"function"!=typeof i)throw new k("ContentProtectionIntegration.onCertificateRequest is not a function.");const e=t.onCertificateResponse;if(void 0!==e&&"function"!=typeof e)throw new k("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new k("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new k("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new k("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.Mx.build(t))}constructor(t,i,e){this.yx=t,this.yS=i,this.Mx=e}};r();var $c=function(t){return t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED",t}({}),rt=class{registerContentProtectionIntegration(t,i,e){switch(this.Tx(t,i,e)){case $c.FAILED:throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+i+".");case $c.OVERRIDDEN:{const e=NT(i);Fe.uA("Warning: Overwriting an earlier registered integration for "+t+" and "+e+".");break}case $c.SUCCEEDED:NT(i);0;break}}Tx(t,i,e){const s=NT(i);if(!s)return $c.FAILED;let n=$c.SUCCEEDED;for(const i of this.Sx.slice())i.Ax===t&&i.NS===s&&(n=$c.OVERRIDDEN,ra(this.Sx,i));return this.Sx.push(new rT(t,s,e)),n}Nx(t,i){return void 0!==this.Ix(t,i)}Dx(t,i,e){const s=this.Ix(t,i);if(!s)throw b("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+i);return s.bx(e)}Ix(t,i){for(const e of this.Sx)if(e.Ax===t&&(!i||e.NS===i))return e}constructor(){this.Sx=[]}};rt.Ex=new rt,r(),r();var Rt=function(t){return t.kx="moov",t.Lx="mvhd",t.xx="trak",t.Cx="tkhd",t.jx="mdia",t.Ox="mdhd",t.Rx="hdlr",t.Px="minf",t.zx="stbl",t.Bx="stsd",t.Ux="stsc",t.Qx="mvex",t.Fx="trex",t.Yx="avc1",t.Vx="avcC",t.Gx="hev1",t.Wx="hvc1",t.Zx="hvcC",t.Hx="vp09",t.Xx="vpcC",t.qx="av01",t.Kx="av1C",t.Jx="dvcC",t.$x="dvvC",t.tC="dvwC",t.iC="dec3",t.eC="dvav",t.sC="dva1",t.nC="dvhe",t.rC="dvh1",t.oC="ec-3",t.hC="colr",t.aC="pasp",t.uC="mp4a",t.cC="esds",t.lC="fLaC",t.dC="dfLa",t.fC="wvtt",t.gC="vttC",t._C="vlab",t.vC="enca",t.wC="encv",t.mC="moof",t.pC="mfhd",t.AC="traf",t.yC="tfhd",t.bC="trun",t.MC="tfdt",t.TC="senc",t.SC="mdat",t.NC="pssh",t.IC="emsg",t.DC="sidx",t.EC="styp",t.kC="ftyp",t.LC="sinf",t.xC="frma",t}({}),oT=function(t){return t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof",t}({}),Kn=function(t){return t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",t}({}),Ac=function(t){return t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT",t}({});r();var Bt=class t{jC(){return on(this.rI,this.OC)}RC(){return Ks(this.rI,this.OC)}zC(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt16(i.tc,e);return i.Gb(2),s}(this.rI,this.OC)}BC(){return al(this.rI,this.OC)}QC(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt32(i.tc,e);return i.Gb(4),s}(this.rI,this.OC)}FC(){return Zw(this.rI,this.OC)}YC(t){return ss(this.rI,this.OC,t)}VC(t){return function(t,i,e){const s=[];for(let n=0;n<e;n++)s.push(al(t,i));return s}(this.rI,this.OC,t)}GC(t){return ai(this.rI,this.OC,t)}WC(){return qo(this.rI,this.OC)}ZC(t){this.OC.Gb(t)}Zb(){return new t(this.rI,this.OC.Zb())}constructor(t,i){this.rI=t,this.OC=i}};r(),r();function hT(t,i){return t.YA===i}function aT(t,i){for(const e of t)if(hT(e,i))return e}var uT=class extends Co{get name(){return"DataIncompleteError"}constructor(t,i){super(),this.HC=t,this.XC=i}},Qe=class t{static qC(i){const e=i.rI,s=i.OC,n=t.KC(e,s,!1);if(!n.JC)throw new uT(s.tc,n.m);return n.m}static KC(i,e,s){const n=[];for(;e.tc<i.byteLength;){const r=t.$C(i,e,s);if(!r.JC)return{JC:!1,m:n};n.push(r.tj)}return{JC:!0,m:n}}static ij(i,e){const s=t.$C(i,e,!1);if(!s.JC)throw new uT(e.tc);return s.tj}static ej(i,e){const s=i.rI,n=i.OC;for(;n.tc<s.byteLength;){const i=t.$C(s,n,!1);if(!i.JC)return;if(i.tj.YA===e)return i.tj}}static $C(i,e,s){const n=e.tc,r=t.sj(i,e);if(!r.JC)return r;const o=r.nj;let h=o.Kb;if(0===h){if(s)return e.Wb(n),{JC:!1,rj:1/0};h=i.byteLength-n}const a=n+h;if(a>i.byteLength){const t=a;return e.Wb(n),{JC:!1,rj:t}}const u={YA:o.YA,tc:n,rI:new Bt(Zo(i,n,a),new da(o.hj))};return e.Wb(a),{JC:!0,tj:u}}static sj(t,i){const e=i.tc;if(!Yw(t,i,8)){return{JC:!1,rj:i.tc+8}}let s=al(t,i),n=ai(t,i,4);if(1===s){if(!Yw(t,i,8)){const t=i.tc+8;return i.Wb(e),{JC:!1,rj:t}}s=Zw(t,i).toNumber()}if("uuid"===n){if(!Yw(t,i,16)){const t=i.tc+16;return i.Wb(e),{JC:!1,rj:t}}n=ai(t,i,16)}return{JC:!0,nj:{YA:n,Kb:s,hj:i.tc-e}}}static aj(t,i,e){const s=t.rI,n=t.OC;let r=zr(ka(s),n.tc,s.byteLength);return e&&(r=ja(r)),n.Gb(r.byteLength),{YA:i,rI:r}}static uj(i,e,s){const n=i.BC(),{version:r,flags:o}=G(n);return{YA:e,cj:r,lj:o,rI:t.aj(i,e,s).rI}}};function _l(t,i){const e=ao(t,i);if(!e)throw new b("Missing "+i+" atom");return e}function ao(t,i){for(const e of t)if(e.YA===i)return e.rI}function cT(t,i){const e=[];for(const s of t)s.YA===i&&e.push(s.rI);return e}function G(t){return{version:t>>24,flags:new Bw(16777215&t)}}var pe=class t{static dj(i){const e=[],s=Qe.qC(new Bt(i,new da));for(const i of s){const s=t.gj(i);s&&e.push(s)}return e}static _j(t){return Qe.KC(t,new da,!1).m.some(this.vj)}static wj(i){return cT(Qe.qC(new Bt(i,new da)),Rt.NC).map(t.mj)}static pj(i){return cT(Qe.qC(i.rI),Rt.NC).map(t.mj)}static vj(t){return t.YA===Rt.kC||t.YA===Rt.EC||t.YA===Rt.kx||t.YA===Rt.mC||t.YA===Rt.SC||t.YA===Rt.DC||t.YA===Rt.IC}static gj(i){switch(i.YA){case Rt.kx:return t.Aj(i.rI);case Rt.mC:return t.yj(i.rI,i.tc);case Rt.SC:return t.bj(i.rI);case Rt.DC:return t.Mj(i.rI);case Rt.IC:return t.Tj(i.rI)}}static Aj(i){const e=Qe.qC(i),s=_l(e,Rt.Lx),n=cT(e,Rt.xx),r=ao(e,Rt.Qx),o=t.Sj(s),h=n.map(t.Nj),a=r?t.Ij(r):void 0;return{YA:Rt.kx,nj:o,Z:h,Dj:a}}static Sj(t){const i=t.BC(),{version:e,flags:s}=G(i),n=1===e?t.FC():t.BC(),r=1===e?t.FC():t.BC(),o=t.BC(),h=1===e?t.FC():t.BC(),a=t.BC(),u=t.RC()>>8;t.ZC(2),t.ZC(8);const c=t.VC(9);t.ZC(24);const l=t.BC();return{YA:Rt.Lx,cj:e,lj:s,Ej:n,Lj:r,xj:o,ct:h,Cj:a,Nk:u,jj:c,Oj:l}}static Nj(i){const e=Qe.qC(i),s=_l(e,Rt.Cx),n=_l(e,Rt.jx),r=t.Rj(s),o=t.Pj(n);return{YA:Rt.xx,nj:r,zj:o}}static Rj(t){const i=t.BC(),{version:e,flags:s}=G(i),n=1===e?t.FC():t.BC(),r=1===e?t.FC():t.BC(),o=t.BC();t.ZC(4);const h=1===e?t.FC():t.BC();t.ZC(8);const a=t.zC(),u=t.zC(),c=t.zC()/256;t.ZC(2);const l=t.VC(9),d=t.BC()/65536,f=t.BC()/65536;return{YA:Rt.Cx,Bj:s.Hb(1),Uj:s.Hb(2),Qj:s.Hb(4),Ej:n,Lj:r,Fj:o,ct:h,Om:a,Yj:u,Nk:c,jj:l,ji:d,Ti:f}}static Pj(i){const e=Qe.qC(i),s=_l(e,Rt.Ox),n=_l(e,Rt.Rx),r=_l(e,Rt.Px),o=t.Vj(s),h=t.Gj(n),a=t.Wj(r);return{YA:Rt.jx,nj:o,Zj:h,Hj:a}}static Vj(t){const i=t.BC(),{version:e,flags:s}=G(i),n=1===e?t.FC():t.BC(),r=1===e?t.FC():t.BC(),o=t.BC(),h=1===e?t.FC():t.BC();t.RC();return t.ZC(2),{YA:Rt.Ox,cj:e,lj:s,Ej:n,Lj:r,xj:o,ct:h}}static Gj(t){const i=t.BC(),{version:e,flags:s}=G(i);t.ZC(4);const n=t.GC(4);t.ZC(12);const r=t.WC();return{YA:Rt.Rx,cj:e,lj:s,Xj:n,l:r}}static Wj(i){const e=_l(Qe.qC(i),Rt.zx),s=t.qj(e);return{YA:Rt.Px,Kj:s}}static qj(i){const e=_l(Qe.qC(i),Rt.Bx),s=t.Jj(e);return{YA:Rt.zx,$j:s}}static Jj(i){const e=i.BC(),{version:s,flags:n}=G(e),r=(i.BC(),[]),o=Qe.qC(i);for(const i of o){const e=t.tO(i.rI,i.YA);e&&r.push(e)}return{YA:Rt.Bx,cj:s,lj:n,iO:r}}static tO(i,e){let s=t.eO(i,e);return s||(s=t.sO(i,e),s||(e===Rt.fC?t.nO(i):void 0))}static eO(i,e){return e===Rt.uC?t.rO(i):e===Rt.lC||e===Rt.lC.toLowerCase()||e===Rt.lC.toUpperCase()?t.oO(i):e===Rt.vC?t.hO(i):e===Rt.oC?t.aO(i):void 0}static sO(i,e){return e===Rt.Yx?t.uO(i):e===Rt.Gx||e===Rt.Wx?t.cO(i,e):e===Rt.Hx?t.lO(i,e):e===Rt.qx?t.dO(i,e):e===Rt.wC?t.fO(i):e===Rt.eC||e===Rt.sC||e===Rt.nC||e===Rt.rC?t.gO(i,e):void 0}static _O(t,i){t.ZC(6);return{YA:i,vO:t.RC()}}static wO(i,e){const s=t._O(i,e);i.ZC(8);const n=i.RC(),r=i.RC();i.ZC(2),i.ZC(2);return Ei({},s,{mO:n,pO:r,AO:i.BC()>>>16})}static yO(i,e){const s=t._O(i,e);i.ZC(2),i.ZC(2),i.ZC(12);const n=i.RC(),r=i.RC(),o=i.BC(),h=i.BC();i.ZC(4);const a=i.RC();i.ZC(32);const u=i.RC();return i.ZC(2),Ei({},s,{ji:n,Ti:r,bO:o,MO:h,TO:a,SO:u})}static rO(i){const e=t.wO(i,Rt.uC),s=_l(Qe.qC(i),Rt.cC);return Ei({},e,{IO:t.DO(s)})}static oO(i){const e=t.wO(i,Rt.lC),s=_l(Qe.qC(i),Rt.dC);return Ei({},e,{EO:t.kO(s)})}static nO(i){const e=t._O(i,Rt.fC),s=Qe.qC(i),n=_l(s,Rt.gC),r=t.LO(n),o=ao(s,Rt._C);return Ei({},e,{xO:r,CO:o?t.jO(o):void 0})}static LO(t){return{YA:Rt.gC,md:t.WC()}}static jO(t){return{YA:Rt._C,kh:t.WC()}}static DO(t){return Qe.uj(t,Rt.cC,!0)}static kO(t){return Qe.uj(t,Rt.dC,!0)}static uO(i){const e=t.yO(i,Rt.Yx),s=Qe.qC(i),n=_l(s,Rt.Vx),r=ao(s,Rt.aC);return Ei({},e,{OO:t.RO(n),PO:r?t.zO(r):void 0})}static cO(i,e){const s=t.yO(i,e),n=_l(Qe.qC(i),Rt.Zx);return Ei({},s,{BO:t.UO(n)})}static lO(i,e){const s=t.yO(i,e),n=_l(Qe.qC(i),Rt.Xx);return Ei({},s,{QO:t.FO(n)})}static dO(i,e){const s=t.yO(i,e),n=Qe.qC(i),r=_l(n,Rt.Kx),o=t.YO(r),h=ao(n,Rt.hC);return Ei({},s,{VO:o,GO:h?t.WO(h):void 0})}static fO(i){const e=i.Zb(),s=t.yO(i,Rt.wC),n=_l(Qe.qC(i),Rt.LC),r=t.ZO(n);return Ei({},s,{HO:t.sO(e,r.qO.XO),KO:r})}static gO(i,e){const s=t.yO(i,e),n=Qe.qC(i);return Ei({},s,{JO:t.$O(n)})}static aO(i){const e=t.wO(i,Rt.oC),s=_l(Qe.qC(i),Rt.iC);return Ei({},e,{tR:t.iR(s)})}static hO(i){const e=i.Zb(),s=t.wO(i,Rt.vC),n=_l(Qe.qC(i),Rt.LC),r=t.ZO(n);return Ei({},s,{HO:t.eO(e,r.qO.XO),KO:r})}static ZO(i){const e=_l(Qe.qC(i),Rt.xC),s=t.eR(e);return{YA:Rt.LC,qO:s}}static eR(t){const i=t.GC(4);return{YA:Rt.xC,XO:i}}static RO(t){return Qe.aj(t,Rt.Vx,!0)}static UO(t){return Qe.aj(t,Rt.Zx,!0)}static $O(t){const i=ao(t,Rt.Jx);if(void 0!==i)return Qe.aj(i,Rt.Jx,!0);const e=ao(t,Rt.$x);if(void 0!==e)return Qe.aj(e,Rt.$x,!0);const s=ao(t,Rt.tC);if(void 0!==s)return Qe.aj(s,Rt.tC,!0);throw b("Error parsing Dolby Vision configuration box.")}static iR(t){return Qe.aj(t,Rt.iC,!0)}static FO(t){return Qe.aj(t,Rt.Xx,!0)}static YO(t){return Qe.aj(t,Rt.Kx,!0)}static WO(t){const i=t.GC(4);switch(i){case"nclx":return{sR:oT.ON_SCREEN_COLOURS,nR:t.RC(),rR:t.RC(),oR:t.RC(),hR:0!=(128&t.jC())};case"rICC":return{sR:oT.RESTRICTED_ICC_PROFILE};case"prof":return{sR:oT.UNRESTRICED_ICC_PROFILE};default:throw b("Could not parse ColourInformationBox: unknown type '"+i+"'.")}}static zO(t){const i=t.BC(),e=t.BC();return{YA:Rt.aC,aR:i,uR:e}}static Ij(i){const e=cT(Qe.qC(i),Rt.Fx).map(t.cR);return{YA:Rt.Qx,Z:e}}static cR(t){const i=t.BC(),{version:e,flags:s}=G(i),n=t.BC(),r=t.BC(),o=t.BC(),h=t.BC(),a=t.BC();return{YA:Rt.Fx,cj:e,lj:s,Fj:n,lR:r,dR:o,fR:h,gR:a}}static yj(i,e){const s=Qe.qC(i),n=_l(s,Rt.pC),r=cT(s,Rt.AC),o=t._R(n),h=r.map(t.vR);return{YA:Rt.mC,wR:e,nj:o,Z:h}}static _R(t){const i=t.BC(),{version:e,flags:s}=G(i),n=t.BC();return{YA:Rt.pC,cj:e,lj:s,mR:n}}static vR(i){const e=Qe.qC(i),s=_l(e,Rt.yC),n=cT(e,Rt.bC),r=ao(e,Rt.MC),o=t.pR(s),h=n.map((i=>t.AR(i,o))),a=r?t.yR(r):void 0;return{YA:Rt.AC,nj:o,bR:h,MR:a}}static pR(t){const i=t.BC(),{version:e,flags:s}=G(i),n=t.BC(),r=s.Hb(Kn.BASE_DATA_OFFSET_PRESENT)?t.FC():void 0,o=s.Hb(Kn.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.BC():void 0,h=s.Hb(Kn.DEFAULT_SAMPLE_DURATION_PRESENT)?t.BC():void 0,a=s.Hb(Kn.DEFAULT_SAMPLE_SIZE_PRESENT)?t.BC():void 0,u=s.Hb(Kn.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.BC():void 0;return{YA:Rt.yC,cj:e,lj:s,Fj:n,SR:r,NR:o,dR:h,fR:a,gR:u}}static AR(i,e){const s=i.BC(),{version:n,flags:r}=G(s),o=i.BC(),h=r.Hb(Ac.DATA_OFFSET_PRESENT)?i.QC():void 0,a=r.Hb(Ac.FIRST_SAMPLE_FLAGS_PRESENT)?i.BC():void 0,u=[];for(let s=0;s<o;s++){const o=t.IR(i,r,n,e);0===s&&void 0!==a&&(o.lj=a),u.push(o)}return{YA:Rt.bC,cj:n,lj:r,DR:o,wR:h,ER:a,kR:u}}static IR(t,i,e,s){return{ct:i.Hb(Ac.SAMPLE_DURATION_PRESENT)?t.BC():s.dR,Kb:i.Hb(Ac.SAMPLE_SIZE_PRESENT)?t.BC():s.fR,lj:i.Hb(Ac.SAMPLE_FLAGS_PRESENT)?t.BC():s.gR,LR:i.Hb(Ac.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===e?t.BC():t.QC():void 0}}static Tj(t){const i=t.rI,e=t.OC,s=al(i,e),{version:n,flags:r}=G(s);if(1===n){const t=al(i,e),s=Zw(i,e),o=al(i,e),h=al(i,e),a=Xw(i,e),u=Xw(i,e),c=vi(ka(i),e.tc,i.byteLength);return e.Gb(c.byteLength),{YA:Rt.IC,cj:n,lj:r,xR:a,zD:u,xj:t,jR:s,OR:o,o:h,RR:c}}{const t=Xw(i,e),s=Xw(i,e),o=al(i,e),h=al(i,e),a=al(i,e),u=al(i,e),c=vi(ka(i),e.tc,i.byteLength);return e.Gb(c.byteLength),{YA:Rt.IC,lj:r,cj:n,xR:t,zD:s,xj:o,PR:h,OR:a,o:u,RR:c}}}static bj(t){return Qe.aj(t,Rt.SC,!1)}static mj(i){const e=i.rI,s=i.OC,n=ja(ka(e)).buffer,r=al(e,s),{version:o,flags:h}=G(r),a=t.zR(e,s),u=[];if(o>0){const t=al(e,s);for(let i=0;i<t;i++){const t=ss(e,s,16);u.push(t)}}const c=al(e,s),l=new T(n,s.tc,c);return s.Gb(e.byteLength),{YA:Rt.NC,cj:o,lj:h,UR:a,QR:u,FR:c,rI:l,YR:n}}static zR(t,i){let e="";for(let s=0;s<4;s++){const s=on(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=on(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=on(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=on(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<6;s++){const s=on(t,i).toString(16);e+=1===s.length?"0"+s:s}return e.toLowerCase()}static Mj(t){const i=t.rI,e=t.OC,s=al(i,e),{version:n,flags:r}=G(s),o=al(i,e),h=al(i,e);let a,u;0===n?(a=D.fromBits(al(i,e),0,!0),u=D.fromBits(al(i,e),0,!0)):(a=Zw(i,e),u=Zw(i,e)),e.Gb(2);const c=Ks(i,e),l=[];for(let t=0;t<c;t+=1){const t=al(i,e),s=t>>31&1,n=2147483647&t,r=al(i,e),o=al(i,e),h=o>>31&1,a=o>>28&7,u=268435455&o;l.push({GR:s,WR:n,ct:r,ZR:h,HR:a,XR:u})}return{YA:Rt.DC,cj:n,lj:r,qR:o,xj:h,KR:a,JR:u,$R:c,tP:l}}static yR(t){const i=t.rI,e=t.OC,s=al(i,e),{version:n,flags:r}=G(s);let o;return o=0===n?D.fromBits(al(i,e),0,!0):Zw(i,e),{YA:Rt.MC,cj:n,lj:r,MR:o}}};Qi();var lT={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function dT(t){if(!t)return!0;const i=t.licenseAcquisitionURL,e=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,o=t.queryParameters;return!(i||e||s||n||r||o)}function fT(t){return t&&void 0!==t.licenseAcquisitionURL}var gT=fT,_T=fT;function vT(t){if(!t)return!0;if(pT(t))return!1;const i=t.fairplay,e=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return dT(i)&&dT(e)&&dT(s)&&void 0===n&&dT(r)}function wT(t){const i=nT(t),e=function(t){var i;const e=t;return sT(e)&&""!==(null==(i=e.fairplay)?void 0:i.headers.PreAuthorization)&&!eT(e)}(t);return(!i||!e)&&(i||e)}function Zc(t){return t.integration===WM}function mT(t){const i=t;if(!i)return!1;if(vT(i))return!1;const e=i.fairplay,s=i.playready,n=i.widevine,r=i.clearkey;if(pT(t))return!0;if(e&&!function(t){const i=t;return i&&(void 0!==i.certificateURL||void 0!==i.certificate)}(e))return!1;if(s&&!gT(s))return!1;if(n&&!_T(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(i.integration){if(rt.Ex.Nx(i.integration))return!0;switch(i.integration){case jc:if(!function(t){const i=t,e=i.integration===jc;return e&&(AT(t)||yT(t))}(t))return!1;break;case Sc:if(!bT(t))return!1;break;case ZM:if(!function(t){const i=t;return i.integration===ZM}(t))return!1;break;case WM:if(!Zc(t))return!1;break;case VM:if(!wT(t))return!1;break;case GM:if(!function(t){const i=t;return i.integration===GM}(t))return!1;break;case Mc:if(!pT(t))return!1;break;case Rc:if(!function(t){const i=t;return i.integration===Rc&&(void 0!==i.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(i))}(t))return!1;break;case HM:if(!function(t){const i=t;return i.integration===HM}(t))return!1;break;case Bc:if(!MT(t))return!1;break;case qM:if(!function(t){return t.integration===qM}(t))return!1;break;case KM:if(!TT(t))return!1;break;case XM:if(!function(t){const i=t;return i.integration===XM&&void 0!==i.token}(t))return!1;break;case JM:if(!function(t){const i=t;return i.integration===JM}(t))return!1;break;case $M:if(!function(t){const i=t;return i&&$t(i.releasePid)&&$t(i.accountId)&&$t(i.token)}(t))return!1;break;case tT:return!0;default:return!1}}return!0}function pT(t){return t.integration===Mc}function AT(t){return void 0!==t.authToken}function yT(t){const i=t;return void 0!==i.accountName&&void 0!==i.customerName&&void 0!==i.portalId}function bT(t){const i=t;return i.integration===Sc&&void 0!==i.token}function MT(t){const i=t;return i&&i.integration===Bc&&Ic(i.ticketAcquisitionURL)&&Ic(i.streamId)}function TT(t){const i=t;return i.integration===KM&&void 0!==i.token}function ST(t,i){const e=i[t];var s;const n=null!=(s=null==e?void 0:e.licenseAcquisitionURL)?s:lT[t];var r;const o=null!=(r=null==e?void 0:e.customdata)?r:i.customdata,h=o?{customData:o}:{};var a;const u=Ei({},null!=(a=null==e?void 0:e.headers)?a:{},h),c=null!=e?e:{},{customdata:l}=c;return Ei({},iT(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function NT(t){switch(t.toLowerCase()){case"widevine":case vu:return vu;case"playready":case vv:return vv;case"fairplay":case Ps:return Ps}}function IT(t,i){switch(t){case dv:return function(t){const i={},e=pe.wj(new DataView(t));for(const t of e)i[t.UR]=t.YR;return i}(i);case fv:case gv:return function(t){return{[yv]:t}}(i);default:throw new qi(vt.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}async function mu(t,i){return void 0===i&&(i=!1),!(!t.widevine||!await Fe.pA())||(!(!t.playready||!await Fe.mA())||(!(!t.clearkey||!await Fe.vA())||!(i||!t.fairplay||!await Fe.wA())))}function ct(t,i,e){const s=function(t,i,e){var s;const{useCredentials:n,crossOrigin:r}=function(t,i){let e=pu.EI;return t.useCredentials?e=pu.JL:t.crossOrigin&&(e=$T(t.crossOrigin)),e===pu.EI&&i&&i.vr&&i.vr[360]&&(e=pu.KL),{useCredentials:e===pu.JL,crossOrigin:e}}(t,i);let o=t.liveOffset;$t(o)||(o=e&&$t(e.liveOffset)?e.liveOffset:void 0);let h=t.timeServer;$t(h)||(h=i&&$t(i.timeServer)?i.timeServer:void 0);let a=t.hlsDateRange;$t(a)||(a=e&&$t(e.hlsDateRange)?Boolean(e.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),l=Boolean(t.lowLatency),d=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),g=$t(t.dash)?ET(t.dash):void 0,_=$t(t.hls)?kT(t.hls):void 0,v=CT(xT(t.abr),null==e?void 0:e.abr),w=oo(t.lcevc),m=$t(t.ignoreEmbeddedTextTrackTypes)?_S(t.ignoreEmbeddedTextTrackTypes):[];var p;const A=ZT(null!=(p=t.seamlessSwitchStrategy)?p:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch),y=WT(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:o,timeServer:h,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:l,useNativePlayback:d,useManagedMediaSource:f,dash:g,hls:_,abr:v,lcevc:w,ignoreEmbeddedTextTrackTypes:m,seamlessSwitchStrategy:A,latencyConfiguration:y}}(t,i,e),n=QM(t.src);let r=t.type;r||(r=t.src?wa(t.src):void 0);const o=function(t,i){let e;e=$t(t.contentProtection)?t.contentProtection:$t(t.drm)?t.drm:$t(i)&&$t(i.contentProtection)?i.contentProtection:$t(i)&&$t(i.drm)?i.drm:void 0;return DT(e)}(t,i);return Ei({},s,{src:n,type:r,contentProtection:o,ssai:$t(t.ssai)?YM(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function DT(t){return mT(t)&&t.integration&&t.integration===Mc?function(t){const i=ST(Sv.BA,t),e=ST(Sv.zA,t),s=t[Sv.QA]&&ST(Sv.QA,t);return Ei({integration:"keyos",widevine:i,playready:e},s?{fairplay:s}:{})}(t):t}function ET(t){return{useSeamlessPeriodSwitch:ZT(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:oo(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?bM(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:oo(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:oo(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:oo(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards),segmentRelativeVttTiming:oo(null==t?void 0:t.segmentRelativeVttTiming),forceRecreateMediaSourceOnAudioSwitch:oo(null==t?void 0:t.forceRecreateMediaSourceOnAudioSwitch)}}function kT(t){return{discontinuityAlignment:LT(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:Fu(null==t?void 0:t.delaySubtitlePreload)}}function LT(t){if(!t||!Ic(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}r(),r(),r(),r();var Ri=function(t){return t.SI="audio",t.NI="video",t.ON="text",t.II="image",t.dI="unknown",t}({});function ou(t){return"audio"===t||"video"===t}function xT(t){if(!$t(t))return;return jT(TM(null==t?void 0:t.preferredAudioCodecs,Q),TM(null==t?void 0:t.preferredVideoCodecs,Q),oo(null==t?void 0:t.restrictToPlayerSize))}function CT(t,i){if(!$t(t)&&!$t(i))return;var e;return jT(OT(null==t?void 0:t.preferredAudioCodecs,null==i?void 0:i.preferredAudioCodecs),OT(null==t?void 0:t.preferredVideoCodecs,null==i?void 0:i.preferredVideoCodecs),null!=(e=null==t?void 0:t.restrictToPlayerSize)?e:null==i?void 0:i.restrictToPlayerSize)}function jT(t,i,e){if(0!==t.length||0!==i.length||void 0!==e)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===i.length?void 0:i,restrictToPlayerSize:e}}function OT(t,i){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=i?i:[]}function RT(t,i){if(void 0!==i)switch(t){case Ri.NI:return i.preferredVideoCodecs;case Ri.SI:return i.preferredAudioCodecs;default:return}}r(),r(),Qi(),r();var PT=!1;r();var E=function(t){return t.iP="canplay",t.eP="canplaythrough",t.sP="loadeddata",t.nP="loadedmetadata",t.lL="readystatechange",t.rP="waiting",t.oP="playing",t}({}),zT=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function BT(t,i,e){return e?t<=i:t<i}r();var Mo=class t{get hP(){return this.aP.slice()}Cn(t){return this.aP[2*t]}jn(t){return this.aP[2*t+1]}uP(t){return this.cP[2*t]}lP(t){return this.cP[2*t+1]}ks(){const t=this;return{get length(){return t.V},start(i){const e=0|i;return t.dP(e),t.Cn(e)},end(i){const e=0|i;return t.dP(e),t.jn(e)}}}fP(){const i=new Array(2*this.V),e=new Array(2*this.V);for(let t=0;t<this.V;t++)i[2*t]=this.Cn(t),i[2*t+1]=this.jn(t),e[2*t]=!0,e[2*t+1]=!0;return new t(i,e)}dP(t){if(t<0)throw new b("The index provided ("+t+") must be non-negative");if(t>=this.V)throw new b("The index provided ("+t+") is greater than the maximum bound ("+this.V+")")}gP(t){if(0===this.V)return 0;if(this.gr(t))return t;if(t<=this.Cn(0))return this.Cn(0);if(t>=this.jn(this.V-1))return this.jn(this.V-1);{let i=0,e=1/0;for(let s=0;s<this.V;s++){const n=this.Cn(s),r=x.abs(n-t);r<e&&(i=n,e=r);const o=this.jn(s),h=x.abs(o-t);h<e&&(i=o,e=h)}return i}}Sn(i){let e=0,s=0;const n=[],r=[];for(;e<this.V&&s<i.V;){const t=this.Cn(e),o=this.jn(e),h=this.uP(e),a=this.lP(e),u=i.Cn(s),c=i.jn(s),l=i.uP(s),d=i.lP(s),f=x.max(t,u),g=x.min(o,c);let _,v;_=t===u?h&&l:f===t?h:l,v=o===c?a&&d:g===o?a:d,(f<g||_&&v&&f===g)&&(n.push(f,g),r.push(_,v)),o===c?(e+=1,s+=1):o<c?e+=1:s+=1}return new t(n,r)}_P(){const i=this.vP(),e=i.V;if(0===e)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=i.Cn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!i.uP(0)));for(let t=0;t<e-1;t++)s.push(i.jn(t),i.Cn(t+1)),n.push(!i.lP(t),!i.uP(t+1));const o=i.jn(e-1);return o!==1/0&&(s.push(o,1/0),n.push(!i.lP(e-1),!1)),new t(s,n)}wP(i){let e=0,s=0;const n=this.V,r=i.V,o=new Array(2*(n+r)),h=new Array(2*(n+r));let a=0;for(;e<n&&s<r;){const t=this.Cn(e),n=this.jn(e),r=i.Cn(s),u=i.jn(s);t<r||t===r&&n<u?(o[a]=t,o[a+1]=n,h[a]=this.uP(e),h[a+1]=this.lP(e),e++):(o[a]=r,o[a+1]=u,h[a]=i.uP(s),h[a+1]=i.lP(s),s++),a+=2}for(;e<n;)o[a]=this.Cn(e),o[a+1]=this.jn(e),h[a]=this.uP(e),h[a+1]=this.lP(e),e++,a+=2;for(;s<r;)o[a]=i.Cn(s),o[a+1]=i.jn(s),h[a]=i.uP(s),h[a+1]=i.lP(s),s++,a+=2;return new t(o,h)}mP(i){void 0===i&&(i=0);const e=this.V;if(e<2)return this;const s=[],n=[];let r=this.Cn(0),o=this.jn(0),h=this.uP(0),a=this.lP(0);for(let t=1;t<e;t++){const e=this.Cn(t),u=this.jn(t);let c=this.uP(t),l=this.lP(t);r<e&&o>u||(r===e&&(c=h||c,h=c),o===u&&(l=a||l,a=l),BT(e,o+i,a||c)?(o=u,a=l):(s.push(r,o),n.push(h,a),r=e,o=u,h=c,a=l))}return s.push(r,o),n.push(h,a),new t(s,n).vP()}vP(){const i=[],e=[];for(let t=0;t<this.V;t++){const s=this.Cn(t),n=this.jn(t),r=this.uP(t),o=this.lP(t);s===n?(r||o)&&(i.push(s,n),e.push(!0,!0)):(i.push(s,n),e.push(r,o))}return new t(i,e)}pP(t){if(0===this.V)return t;if(0===t.V)return this;return this.wP(t).mP()}AP(t){const i=this.vP(),e=t.vP(),s=i._P(),n=e._P(),r=s.Sn(e),o=n.Sn(i);return r.pP(o)}Gb(i){if(0===this.V||0===i)return this;const e=[],s=[];for(let t=0;t<this.V;t++){const n=this.Cn(t)+i,r=this.jn(t)+i;e.push(n,r),s.push(this.uP(t),this.lP(t))}return new t(e,s)}yP(t){return 0===this.V||0===t.V?this:this.vP().Sn(t.vP()._P())}gr(t,i){return this.bP(t,i)>=0}MP(t,i,e,s,n){return this.TP(t,i,e,s,n)>=0}SP(t,i,e,s,n){return this.NP(t,i,e,s,n)>=0}IP(t){if(t.V!==this.V)return!1;for(let i=0;i<this.V;i++)if(this.Cn(i)!==t.Cn(i)||this.jn(i)!==t.jn(i)||this.uP(i)!==t.uP(i)||this.lP(i)!==t.lP(i))return!1;return!0}DP(i){const e=[],s=[];for(let t=0;t<this.V;t++){const n=this.Cn(t),r=this.jn(t),o=this.uP(t),h=this.lP(t);i(n,r,o,h)&&(e.push(n,r),s.push(o,h))}return new t(e,s)}NP(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,o=i+n;for(let t=0;t<this.V;t+=1)if(BT(this.Cn(t),o,!s||this.uP(t))&&BT(r,this.jn(t),!e||this.lP(t)))return t;return-1}TP(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,o=i-n;for(let t=0;t<this.V;t+=1)if(BT(this.Cn(t),r,!e||this.uP(t))&&BT(o,this.jn(t),!s||this.lP(t)))return t;return-1}bP(t,i){return this.TP(t,t,!0,!0,i)}EP(t,i){void 0===i&&(i=0);const e=t+i;for(let t=this.V-1;t>=0;t-=1)if(BT(this.Cn(t),e,this.uP(t)))return t;return-1}kP(t,i){void 0===i&&(i=0);const e=t-i;for(let t=0;t<this.V;t+=1)if(BT(e,this.jn(t),this.lP(t)))return t;return-1}LP(t,i){void 0===i&&(i=0);const e=t+i;for(let t=0;t<this.V;t+=1)if(this.Cn(t)>e)return t;return-1}xP(i){return this.dP(i),new t([this.Cn(i),this.jn(i)],[this.uP(i),this.lP(i)])}CP(t,i){const e=this.bP(t,i);return e<0?void 0:this.xP(e)}get jP(){let t=0;for(let i=0;i<this.V;i++){t+=this.jn(i)-this.Cn(i)}return t}static xn(i){const e=[];for(let t=0;t<i.length;t++)e.push(i.start(t),i.end(t));return new t(e)}static OP(i){return new t([i,i],[!0,!0])}static RP(i,e){return i<=e?new t([i,e]):t.PP()}static PP(){return UT}constructor(t,i){this.V=t.length>>1,this.aP=t,this.cP=i||function(t){const i=new Array(2*t);for(let e=0,s=0;e<t;e+=1,s+=2)i[s]=!0,i[s+1]=!1;return i}(this.V)}},UT=new Mo([]),We=.92,ee=1.08,QT=.25,FT=class extends tu{get zP(){return this.He&&this.Kh}get BP(){return this.UP}get Rt(){return this.He}set Rt(t){this.He=t,t?this.Cn():this.zk()}QP(t){this.FP.push(t),this.YP()}VP(t){ra(this.FP,t),this.YP()}YP(){this.UP=this.GP(),this.Kh&&this.WP()}GP(){const t=this.ZP,i=function(t,i){const e=i-t.targetOffset;return{minimumOffset:t.minimumOffset+e,targetOffset:t.targetOffset+e,maximumOffset:t.maximumOffset+e,forceSeekOffset:t.forceSeekOffset+e,minimumPlaybackRate:t.minimumPlaybackRate,maximumPlaybackRate:t.maximumPlaybackRate,leniency:t.leniency}}(this.HP,this.qP),e=[i,...this.FP],s=e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=null==i?void 0:i.minimumOffset)?e:0)}),t),n=e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=null==i?void 0:i.targetOffset)?e:0)}),s+QT),r=e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=null==i?void 0:i.maximumOffset)?e:0)}),n+QT);return{minimumOffset:s,targetOffset:n,maximumOffset:r,forceSeekOffset:e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=null==i?void 0:i.forceSeekOffset)?e:0)}),r+QT),minimumPlaybackRate:e.reduce(((t,i)=>{var e;return x.min(t,null!=(e=i.minimumPlaybackRate)?e:We)}),We),maximumPlaybackRate:e.reduce(((t,i)=>{var e;return x.max(t,null!=(e=i.maximumPlaybackRate)?e:ee)}),ee)}}KP(){var t;const i=null==(t=Mo.xn(this.ta.TE).CP(this.ta.LE))?void 0:t.jn(0),e=void 0!==i?i-this.ta.LE:0;this.JP=x.min(this.JP,e),this.$P+=1}tz(){if(this.$P<10)return;const t=.25-this.JP,i=ur(this.qP+t,this.qP-.1,this.qP+.1);this.qP=ur(i,this.iz,this.ez),this.JP=1/0,this.$P=0}nz(){this.rz(),this.hD=Fe.Pg((()=>this.WP()),500)}rz(){void 0!==this.hD&&(Fe.Rg(this.hD),this.hD=void 0)}Cn(){this.He&&this.oz&&(this.Kh||this.cz.yn(Zi.Eb,this.WP),this.lz=Fe.dA((()=>this.KP()),1e3),this.fz=Fe.dA((()=>this.tz()),6e4),this.nz(),this.Kh=!0)}zk(){this.Kh&&(this.rz(),this.lz&&Fe.fA(this.lz),this.fz&&Fe.fA(this.fz),this.cz.fn(Zi.Eb,this.WP),this.gz(1),this.Kh=!1)}wy(){this.zk(),this.ta.fn(E.rP,this._z),this.ta.fn(E.oP,this.vz),this.Bo()}gz(t){this.cz.mz.wz||this.ta.$E!==t&&(this.ta.$E=t)}get pz(){return this.ta.Az}constructor(t,i,e){var s;super(),this.Kh=!1,this.He=!1,this.FP=[],this.oz=!1,this.ZP=0,this.hD=void 0,this.$P=0,this.JP=1/0,this._z=()=>{const t=this.cz.TE,i=this.cz.LE,e=t.CP(i);e&&(this.ZP=ur(e.jn(0)-i,this.ZP,.5),this.YP())},this.vz=()=>{this.oz=!0,this.ta.fn(E.oP,this.vz),this.He&&this.Cn()},this.WP=()=>{this.rz(),this.nz();const t=this.pz;if(!t)return;const i=this.yz();if(t>this.UP.forceSeekOffset)return this.yo(new Jr("latencyrecoveryseek")),void this.qL();const{minimumOffset:e,targetOffset:s,maximumOffset:n}=this.UP,r=this.cz.$E;if(i>n&&this.bz()){const t=this.UP.maximumPlaybackRate;PT,this.gz(t)}else if(i<e&&!Fe.Ys.Np){const t=this.UP.minimumPlaybackRate;PT,this.gz(t)}else if(r>1&&i<s){const t=1;PT,this.gz(t)}else if(r<1&&i>s){const t=1;PT,this.gz(t)}},this.ta=t,this.cz=i,this.HP=e,this.iz=e.targetOffset,this.ez=e.targetOffset+(null!=(s=e.leniency)?s:0),this.qP=e.targetOffset,this.UP=this.GP(),this.ta.yn(E.rP,this._z),this.ta.yn(E.oP,this.vz)}};Qi();var YT=.66,VT=1.5,GT=3;function WT(t){if(!$t(t))return;const i=Fe.Ys.Ip?10:0,e=t.targetOffset;var s;var n;var r;var o;var h;var a;return{minimumOffset:null!=(s=t.minimumOffset)?s:e*YT,targetOffset:e,maximumOffset:null!=(n=t.maximumOffset)?n:e*VT,forceSeekOffset:x.max(null!=(r=t.forceSeekOffset)?r:e*GT,i),minimumPlaybackRate:null!=(o=t.minimumPlaybackRate)?o:We,maximumPlaybackRate:null!=(h=t.maximumPlaybackRate)?h:ee,leniency:null!=(a=t.leniency)?a:void 0}}var gu=function(t){return t.Mz="auto",t.Tz="always",t.Sz="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only",t}({}),zc=function(t){return t.UPLYNK="uplynk",t.MEDIATAILOR="mediatailor",t}({});function ZT(t){if(!t||!Ic(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}r(),r();var HT=function(t){return t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled",t}({});r();var XT=!1;r();var qT=function(t){return t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll",t}({});r();var El=function(t){return t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange",t.MILLICAST="millicast",t}({});function KT(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":case"millicast":return!0;default:return!1}}function JT(t){return!!t&&_t(t,"mpd")}function wa(t){let i=$n.sx;return JT(t)&&(i=$n.$L),function(t){return!!t&&_t(t,"m3u8")}(t)&&(i=$n.tx),i}function $T(t){switch(t){case pu.KL:case pu.JL:return t;default:return pu.EI}}function tS(t){if(!t)return!1;const i=t.toLowerCase();return I(i,$n.$L)}function iS(t){if(!t)return!1;const i=t.toLowerCase();return I(i,$n.tx)||I(i,$n.ix)}function eS(t){return Z(t)&&Z(t.ssai)&&"google-dai"===t.ssai.integration}function sS(t){return Z(t)&&("verizon-media"===t.integration||"uplynk"===t.integration)}function nS(t){return Z(t)&&("theolive"===t.type||"theolive"===t.integration)}function rS(t){return Z(t)&&"mediatailor"===t.integration}function Jt(t){return Z(t)&&"millicast"===t.type}function oS(t){if(t.sources)if(Zr(t.sources)){for(const i of t.sources)if(Jt(i))return!0}else if(Z(t.sources))return Jt(t.sources);return!1}function hS(t){if(Ic(t))return!t;if(sS(t))return!t.id;if(eS(t)){const i=t.ssai,e="live"===i.availabilityType&&i.assetKey,s="vod"===i.availabilityType&&i.contentSourceID&&i.videoID;return Boolean(e&&s)}return Jt(t)?!t.src&&!t.streamName||!t.streamAccountId:!t.src}function aS(t){return Boolean(Z(t)&&Ic(t.src))}function uS(t){return t.type===$n.nx||t.type===$n.ox}function Tt(t){return Ic(t)||aS(t)||eS(t)||sS(t)||Jt(t)}function cS(t){if(t){if(Tt(t))return hS(t);for(const i of t)if(!hS(i))return!1;return!0}return!0}function lS(){return{crossOrigin:pu.EI,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:gu.Mz,latencyConfiguration:void 0}}function dS(){return Ei({},lS(),{src:void 0,type:$n.sx,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function fS(t){const i={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:HT.ENABLED,googleIma:{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0},theoads:XT};return void 0===t||(void 0!==t.preload&&(i.preload=function(t){return"none"===t?qT.NONE:qT.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(i.showCountdown=Fu(t.showCountdown)),void 0!==t.vpaidMode&&(i.vpaidMode=function(t){switch(t){case"insecure":return HT.INSECURE;case"disabled":return HT.DISABLED;default:return HT.ENABLED}}(t.vpaidMode)),Zr(t.allowedMimeTypes)&&(i.allowedMimeTypes=t.allowedMimeTypes.filter(Ic)),void 0!==t.googleIma&&(i.googleIma=function(t){return void 0===t?{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0}:{useNativeIma:Fu(t.useNativeIma),useAdUiElementForSsai:Fu(t.useAdUiElementForSsai),bitrate:null!=(i=t.bitrate)?i:-1,language:$t(t.language)?Q(t.language):void 0,uiElements:t.uiElements};var i}(t.googleIma)),void 0!==t.theoads?i.theoads=Fu(t.theoads):i.theoads=XT),i}function gS(t){if(!Ia(t))return[];const i=[];for(const e of t)Z(e)&&i.push(e);return i}function Jc(t){return Ic(t.src)||Jt(t)}function _S(t){return Zr(t)?t.filter(KT):[]}r(),r();var Fn=function(t){return t[t.Nz=0]="Nz",t[t.Xn=1]="Xn",t[t.Iz=2]="Iz",t[t.Dz=3]="Dz",t[t.Ez=4]="Ez",t}({}),Xe=class extends Jr{constructor(t,i=Fn.Nz){super(Zi.Hy),this.currentTime=t,this.readyState=i}};r();var Se=class extends Jr{constructor(t){super(Zi.wb),this.currentTime=t}};r();var fi=class extends Jr{constructor(t){super(Zi.so),this.currentTime=t}};r();var yu=class extends Jr{constructor(t,i=Fn.Xn){super(E.nP),this.currentTime=t,this.readyState=i}};r();var yt=class extends Jr{constructor(t){super(Zi.Zy),this.duration=t}};r();var Pu=class extends Jr{constructor(t,i){super(Zi.pb),this.currentTime=t,this.playbackRate=i}};r();var A=class extends Jr{constructor(t,i){super(Zi.Eb),this.currentTime=t,this.currentProgramDateTime=i}};r();var fa=class extends Jr{constructor(t){super(Zi.qy),this.currentTime=t}};r();var Cu=class extends Jr{constructor(t,i=Fn.Iz){super(E.sP),this.currentTime=t,this.readyState=i}};r();var Yr=class extends Jr{constructor(t){super(Zi.Mb),this.currentTime=t}};r();var aa=class extends Jr{constructor(t){super(Zi.bb),this.currentTime=t}};r();var $e=class extends Jr{constructor(t,i){super(Zi.kb),this.currentTime=t,this.volume=i}};r();var vS=class extends Jr{constructor(t,i=Fn.Dz){super(E.iP),this.currentTime=t,this.readyState=i}};r();var Eu=class extends Jr{constructor(t,i=Fn.Ez){super(E.eP),this.currentTime=t,this.readyState=i}};r();var cu=class extends Jr{constructor(t,i){super(E.lL),this.currentTime=t,this.readyState=i}};r();var cl=class extends Dc{get error(){return this.errorObject.message}ma(){return this}constructor(t){super(Xi.ua),this.errorObject=t}};async function co(t,i,e,s,n){void 0===e&&(e=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(i)}catch(t){if(V(t),r<e){const t=x.min(s*2**r,n);r++,await Dt(t,i);continue}throw t}}r();var wS={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};r();var Ba=function(t){return t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture",t.NATIVE_PICTURE_IN_PICTURE="native-picture-in-picture",t}({}),mS=function(t){return t.NONE="none",t.ALL="all",t.CONTENT="content",t}({});function pS(t){switch(t){case"all":case"content":return t;default:return"none"}}function AS(t){const i=oi(t||{});return i.libraryLocation&&(i.libraryLocation=de(i.libraryLocation,!0)),i.isEmbeddable=Boolean(i.isEmbeddable),i.cast=function(t){const i=UM(t?t.chromecast:void 0),e=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:i,strategy:e}}(i.cast),i.ads=fS(i.ads),i.analytics=gS(i.analytics),i.mutedAutoplay=pS(i.mutedAutoplay),i.allowNativeFullscreen=Boolean(i.allowNativeFullscreen),i.allowMixedContent=Boolean(i.allowMixedContent),i.persistVolume=Boolean(i.persistVolume),i.liveOffset=function(t){return Number(t)||void 0}(i.liveOffset),i.hlsDateRange=function(t){return Boolean(t)}(i.hlsDateRange),i.retainPlaybackRateOnSourceChange=Boolean(i.retainPlaybackRateOnSourceChange),i.license=function(t){return Ic(t)?t:void 0}(i.license),i.licenseUrl=function(t){if(!t)return;try{return de(t)}catch(t){return void Fe.uA("Invalid 'licenseUrl', falling back to default URL")}}(i.licenseUrl),i.vr=function(t){return{useWebXR:Boolean(t&&t.useWebXR)}}(i.vr),i.abr=xT(i.abr),i.retryConfiguration=function(t){const i=Ei({},wS);return void 0!==t&&(void 0!==t.maxRetries&&(i.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(i.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(i.maximumBackoff=Number(t.maximumBackoff))),i}(i.retryConfiguration),i.hideDeprecationWarnings=Boolean(i.hideDeprecationWarnings),i.theoLive=function(t){if(!t)return t;return Ei({},t,{externalSessionId:t.externalSessionId?Q(t.externalSessionId):void 0,fallbackEnabled:oo(t.fallbackEnabled)})}(i.theoLive),i}function yS(t){return{bt:t.bt,LE:t.LE,ct:t.ct,OE:t.OE,lt:t.lt,zE:t.zE,WE:t.WE,KE:t.KE,$E:t.$E,fk:t.fk,wk:t.wk,yk:t.yk,Tk:t.Tk,Nk:t.Nk}}function bS(t,i){const e=i.Nk,s=i.WE;t.Nk=e,t.WE=s}function St(t,i,e){if(i===e)return;const s=i.bt!==e.bt,n=i.LE,r=i.ct,o=i.WE,h=i.KE,a=i.$E,u=i.fk,c=i.wk,l=(i.Tk,i.yk,i.Nk),d=e.LE,f=e.ct,g=e.OE,_=e.zE,v=e.WE,w=e.KE,m=e.$E,p=e.fk,y=e.wk,b=(e.Tk,e.yk,e.Nk);(s||u>Fn.Nz&&p===Fn.Nz)&&t.yo(new Xe(d,p)),w&&!h?t.yo(new Se(d)):!w&&h&&t.yo(new fi(d)),p>=Fn.Xn&&(s||u<Fn.Xn)&&t.yo(new yu(d,p)),f===r||j(f)&&j(r)||t.yo(new yt(f)),m!==a&&t.yo(new Pu(d,m)),d!==n&&t.yo(new A(d,void 0)),g&&t.yo(new fa(d)),p>=Fn.Iz&&(s||u<Fn.Iz)&&t.yo(new Cu(d,p)),y&&!c?t.yo(new Yr(d)):!y&&c&&t.yo(new aa(d)),b===l&&v===o||t.yo(new $e(d,b)),p>=Fn.Dz&&(s||u<Fn.Dz)&&t.yo(new vS(d,p)),p>=Fn.Ez&&(s||u<Fn.Ez)&&t.yo(new Eu(d,p)),p!==u&&t.yo(new cu(d,p)),_&&t.yo(new cl(_))}function MS(t){switch(t){case Ba.INLINE:case Ba.FULLSCREEN:case Ba.PICTURE_IN_PICTURE:case Ba.NATIVE_PICTURE_IN_PICTURE:return t;default:return}}r();var TS=class extends Jr{constructor(t){super(Zi.Gy),this.currentSource=t}};r();var SS=class extends Jr{constructor(){super(Zi.Ky)}};r();var Bu=class extends Jr{constructor(){super(Zi.$y)}};r(),r(),r();var Yu=function(t){return t.kz="enterpictureinpicture",t.Lz="exitpictureinpicture",t.ua="pictureinpictureerror",t}({}),NS=class extends Jr{constructor(){super(Yu.kz)}};r();var IS=class extends Jr{constructor(){super(Yu.Lz)}},DS=class extends tu{get TL(){return this.SL}set TL(t){if(t===this.SL)return;this.NL(this.SL);const i=this.SL.xz;this.SL=t,this.DL(t),!i&&this.SL.xz?this.yo(new NS):i&&!this.SL.xz&&this.yo(new IS)}DL(t){t.yn(Yu.kz,this.Ds),t.yn(Yu.Lz,this.Ds),t.yn(Yu.ua,this.Ds)}NL(t){t.fn(Yu.kz,this.Ds),t.fn(Yu.Lz,this.Ds),t.fn(Yu.ua,this.Ds)}get Cz(){return this.SL.Cz}get xz(){return this.SL.xz}co(){return this.SL.co()}bo(){return this.SL.bo()}gn(t){this.Bo(),this.NL(this.SL),t||this.SL.gn()}constructor(t){super(),this.SL=t,this.DL(this.SL)}},ES=class extends At{_a(){return this.jz}AE(){return this.Oz}get UE(){return this.QE()}QE(){return this.Rz}Ak(){return this.Ul}Mk(){return this.Pz}zz(t){const i=this.yE;if(i===t)return;i.Py(this.Zk);const e=yS(this),s=this.kE(),n=this.Ck(),r=this.jk();this.yE=t,this.Oz.TL=t.ht,this.Pz.TL=t.rt,this.Ul.TL=t.nt,this.jz.TL=t._a(),this.Rz.TL=t.UE,void 0!==e&&St(this,e,this);const o=this.kE();o!==s&&this.yo(new TS(o)),this.Ck()!==n&&this.yo(new SS),this.jk()!==r&&this.yo(new Bu),t.xy(this.Zk)}async gn(){await super.gn(),this.jz.gn(),this.Oz.gn(),this.Pz.gn(),this.Ul.gn(),this.Rz.gn()}constructor(t){super(t),this.Oz=new ol,this.Pz=new ol,this.Ul=new Ce,this.Rz=new xt,this.jz=new DS(t._a()),this.Oz.TL=t.ht,this.Pz.TL=t.rt,this.Ul.TL=t.nt,this.Rz.TL=t.UE}};r(),bs();var kS=class extends ES{GE(){return function(t){let i=0,e=0,s=0,n=0,r=0,o=0,h=0;for(const a of t)i+=a.Bz,e+=a.Uz,s+=a.Qz,n+=a.Fz,r+=a.Yz,o+=a.Vz.amountOfBufferedAudioSegments,h+=a.Vz.amountOfBufferedVideoSegments;return{Bz:i,Uz:e,Qz:s,Fz:n,Yz:r,Vz:{amountOfBufferedAudioSegments:o,amountOfBufferedVideoSegments:h}}}(this.Gz.map((t=>t.VE)))}zk(){return gw(this.Gz.map((t=>t.zk()))).then(Bn)}tr(){return gw(this.Gz.map((t=>t.tr()))).then(Bn)}Ok(){if(!this.do){for(const t of this.Gz)t.Ok();this.do=!0}}bE(){const t=[];for(const i of this.Gz)t.push(...i.bE());return t}Vk(t){let i=!1;for(const e of this.Gz)i=e.Vk(t)||i;return i}yo(t){this.Vk(t)||super.yo(t)}get TL(){return this.yE}set TL(t){this.zz(t)}Wz(t){this.Gz.push(t)}Zz(t){ra(this.Gz,t)}zz(t){if(t===this.yE)return;const i=this.yE;i.ar(),super.zz(t),t.ur(i)}Fk(){for(const t of this.Gz)t.Fk()}async gn(){this.Bo(),this.yE.ar();for(const t of this.Gz)this.yE!==t&&await t.gn();await super.gn()}constructor(t){super(t),this.Gz=[],this.do=!1,this.Xz=!1,this.Wz(t)}};r();var lt=function(t){return t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR",t}({}),P=class extends cw{get name(){return"MediaError"}constructor(t,i,e,s){super(i),this.code=t,this.message=null!=i?i:"Unknown error",this.cause=e,this.systemCode=s,b.captureStackTrace&&b.captureStackTrace(this,this.constructor)}};function LS(t){vM(t,"MEDIA_ERR_ABORTED",1),vM(t,"MEDIA_ERR_NETWORK",2),vM(t,"MEDIA_ERR_DECODE",3),vM(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),vM(t,"MEDIA_ERR_ENCRYPTED",5)}function Au(t){var i,e;return function(t){return t.category===xd.CONTENT_PROTECTION}(t)?new P(5,t.message,null==(i=t.cause)?void 0:i.message,t.systemCode):new P(xS(t.code),t.message,null==(e=t.cause)?void 0:e.message)}function xS(t){if(t===vt.MEDIA_ABORTED)return 1;if(t===vt.MANIFEST_LOAD_ERROR||t===vt.MEDIA_LOAD_ERROR||t===vt.SUBTITLE_LOAD_ERROR)return 2;if(t===vt.MEDIA_DECODE_ERROR)return 3;if(t===vt.MEDIA_NOT_SUPPORTED)return 4;const i=xd.fromCode(t);return i===xd.NETWORK?2:i===xd.SOURCE?4:i===xd.LICENSE?6:i===xd.CONTENT_PROTECTION?5:i===xd.AD?7:3}function ju(t){return new qi(CS(t.code),t.message,t)}function CS(t){switch(t){case 1:return vt.MEDIA_ABORTED;case 2:return vt.NETWORK_ERROR;case 3:return vt.MEDIA_DECODE_ERROR;case 4:return vt.SOURCE_NOT_SUPPORTED;case 5:return vt.CONTENT_PROTECTION_ERROR;case 6:return vt.LICENSE_ERROR;case 7:return vt.AD_ERROR}}LS(P),LS(P.prototype),r(),r(),r(),r(),r();var kt=class extends lM{tt(t){return super.tt(t)}ma(){return kM(this)}};r(),r(),r(),r();var ki=class{get AL(){return this.qz}get V(){return this.qz.length}get ga(){return this.Za||(this.Za=function(t){const i=t.AL.map((t=>t.ga));return i.item=i=>{const e=0|i,s=t.bL(e);return s&&s.ga||void 0},i}(this)),this.Za}Kz(t){this.qz.push(t),this.Za&&this.Za.push(t.ga)}wS(t){ra(this.qz,t),this.Za&&ra(this.Za,t.ga)}bL(t){return this.qz[t]}Jz(t){return Zr(t)?function(t,i){for(const e of i)if(!Qa(t,e))return!1;return!0}(this.qz,t):Qa(this.qz,t)}tr(){nt(this.qz),this.Za&&nt(this.Za)}constructor(){this.qz=[],this.Za=void 0}};r();var su=class extends Va{ma(){return new jS(this.Ht.ga)}constructor(t){super(hs._L),this.Ht=t}},jS=class extends du{constructor(t){super("update"),this.track=t}};r();var OS=0;function ft(){return OS++}var RS=0;var PS=0;function zS(){return PS++}var BS=0;function US(){return BS++}var QS=0;var FS=class extends tu{get PL(){}get Rt(){return this.He}set Rt(t){this.He!==t&&(this.He=t,this.$z=t,this.yo(new dM(this)))}get $z(){return this.tB.enabled}set $z(t){this.tB.enabled=t}get ga(){return this.Za||(this.Za=go(this)),this.Za}get o(){return this.aS}get zL(){return this.iB}get Lt(){return this.tB.kind}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,this.yo(new su(this)))}get gs(){return this.tB.language}get UI(){return this.Rt?"enabled":"disabled"}get sB(){return this.tB}get UL(){return this.qz}get QL(){}set QL(t){}nB(t){this.Rt=t}rB(){this.Rt=this.$z}constructor(t){super(),this.YA=Ri.SI,this.He=!1,this.Za=void 0,this.tB=t,this.iB=ft(),this.aS=QS+++"",this.eB=t.label,this.qz=new ki,this.rB()}};r();var YS=0;var VS=class extends tu{get PL(){}get Rt(){return this.He}set Rt(t){this.He!==t&&(this.He=t,this.$z=t,this.yo(new dM(this)))}get $z(){return!!this.tB.selected}set $z(t){this.tB.selected=t}get ga(){return this.Za||(this.Za=go(this)),this.Za}get o(){return this.aS}get zL(){return this.iB}get Lt(){return"main"}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,this.yo(new su(this)))}get gs(){return this.tB.language}get UI(){return this.Rt?"enabled":"disabled"}get sB(){return this.tB}get UL(){return this.qz}get QL(){}set QL(t){}rB(){this.Rt=this.$z}nB(t){this.Rt=t}constructor(t){super(),this.YA=Ri.NI,this.He=!1,this.Za=void 0,this.tB=t,this.iB=ft(),this.aS=YS+++"",this.qz=new ki,this.eB=t.label,this.rB()}};r();var GS=class extends Jr{constructor(t){super(Zi.By),this.FE=t}};r(),r();var Ma=function(t){return t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR",t}({});r(),r();var WS=function(t){return t.oB="cue",t.hB="region",t.aB="stylesheet",t}({});r(),r();var ZS={"line-left":"start",center:"middle","line-right":"end"},HS={start:"line-left",middle:"center",end:"line-right"};function XS(t,i){if("auto"===t)switch(i){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function qS(t,i){if("auto"===t)switch(i){case"left":return 0;case"right":return 100;default:return 50}return function(t,i){const e="number"==typeof t?t:S(t);return j(e)?i:e}(t,50)}r(),r(),r();var oa=function(t){return t.kz="co",t.Lz="bo",t._L="Yn",t}({}),KS=class extends Va{constructor(t,i){super(t),this.uB=i}},JS=class extends du{constructor(t,i){super(t),this.cue=i}};function Ft(t){const i=[oa.kz,oa.Lz,oa._L];let e;const s={get cB(){return t},get track(){return t.Ht.ga},get id(){return t.o},get uid(){return t.zL},get startTime(){return t.lB},set startTime(i){t.lB=i},get endTime(){return t.dB},set endTime(i){t.dB=i},get content(){return t.U},addEventListener(t,i){const s=Mt(t,Q);e.yn(s,i)},removeEventListener(t,i){const s=Mt(t,Q);e.fn(s,i)}};return e=new Su(s),t.yn(i,(t=>e.yo(t.ga))),s}function $S(){}function tN(t){return fe(Ft(t),{get align(){return t.fB},get line(){return t.gB},get lineAlign(){return t._B},get position(){return t.uo},get positionAlign(){return t.vB},get region(){return t.wB?t.wB.ga:null},get size(){return t.Kb},get snapToLines(){return t.mB},get text(){return t.U},get vertical(){return t.Pt}})}r(),r();var iN=class extends KS{ma(){return new eN(this.uB.ga)}constructor(t){super(oa._L,t)}},eN=class extends JS{constructor(t){super("update",t)}};r();var sN=class extends Va{ma(){return new nN(this.uB.ga)}constructor(t){super(hs.eL),this.uB=t}},nN=class extends du{constructor(t){super("updatecue"),this.cue=t}},rN=.02;function oN(t,i){return ce(t.pB,i.pB,rN)&&ce(t.AB,i.AB,rN)&&t.o===i.o}var hN=class extends tu{get lB(){return this.yB}set lB(t){var i,e;this.yB!==t&&(this.yB=t,null==(i=this.bB)||i.MB(this),this.yo(new iN(this)),null==(e=this.bB)||e.yo(new sN(this)))}get dB(){return this.TB}set dB(t){var i,e;this.TB!==t&&(this.TB=t,null==(i=this.bB)||i.MB(this),this.yo(new iN(this)),null==(e=this.bB)||e.yo(new sN(this)))}get o(){return this.aS}get zL(){return this.iB}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return Ft(this)}get Yh(){return this.Kh}set Yh(t){this.Kh=t}get Ht(){return this.bB}set Ht(t){this.bB=t}get U(){return this.SB}set U(t){var i;this.SB!==t&&(this.SB=t,this.yo(new iN(this)),null==(i=this.bB)||i.yo(new sN(this)))}get NB(){return this.IB}set NB(t){this.IB=t}DB(t){return this===t||pM(this,t)&&oN(this,t)&&this.EB(t)}EB(t){return ns(this.U,t.U)}kB(t,i){this.yB=t,this.TB=i,this.pB=t,this.AB=i}gn(){this.Bo()}constructor(t,i,e,s,n){super(),this.Za=void 0,this.bB=void 0,this.Kh=!1,this.LB=-1,this.iB=US(),this.yB=t,this.TB=i,this.pB=t,this.AB=i,this.SB=e,this.IB=Boolean(s),this.aS=null!=n?n:""}};function aN(t,i){return t.U===i.U&&t.gB===i.gB&&t._B===i._B&&t.uo===i.uo&&t.vB===i.vB&&t.wB===i.wB&&t.mB===i.mB&&t.Kb===i.Kb&&t.fB===i.fB&&t.Pt===i.Pt}var uN=class extends hN{get ga(){return this.Za||(this.Za=tN(this)),this.Za}get YA(){return WS.oB}EB(t){return aN(this,t)}constructor(t,i,e,s,n){super(t,i,e,s,n),this.gB="auto",this._B="start",this.uo="auto",this.vB="auto",this.wB=void 0,this.mB=!0,this.Kb=100,this.fB="center",this.Pt=""}};function cN(t){const i=t.gB,e=$a(i);return e&&!t.mB&&(i<0||i>100)?100:e?Number(i):t.mB?-1:100}function lN(t){return qS(t.uo,t.fB)}function dN(t){return XS(t.vB,t.fB)}function fN(t){const i=dN(t),e=lN(t);let s;switch(i){case"line-left":s=100-e;break;case"line-right":s=e;break;case"center":s=e<=50?2*e:2*(100-e)}return x.min(t.Kb,s)}function gN(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.xB},get regionAnchorX(){return t.CB},get regionAnchorY(){return t.jB},get scrollValue(){return t.OB},get viewportAnchorX(){return t.RB},get viewportAnchorY(){return t.PB},get width(){return t.ji}}}r(),r();var _N=class{get ga(){return this.Za||(this.Za=gN(this)),this.Za}get YA(){return WS.hB}constructor(t,i,e,s,n,r,o,h){this.o=t,this.ji=i,this.xB=e,this.CB=s,this.jB=n,this.RB=r,this.PB=o,this.OB=h}};r(),r(),Qi();var vN=1e6,wN=class{zB(t){return this.BB()*t}UB(t){return this.QB(t)>0}FB(t){return this.QB(t)>=0}YB(t,i){return this.GB(t).VB(i)}DB(t){return 0===this.QB(t)}WB(t){return this.QB(t)<0}VB(t){return this.QB(t)<=0}ZB(){return this.HB()?this.XB():this}qB(t){return this.Kz(t.XB())}GB(t){return this.qB(t).ZB()}};function mN(t,i){return t.KB()?i.KB()?nn.Zr:nn.iy:i.KB()?nn.ey:t.JB()?i.JB()&&t.HB()===i.HB()?nn.Zr:t.HB()?nn.ey:nn.iy:i.HB()?nn.iy:nn.ey}r(),r();var pN=4294967296,AN=pN*pN,yN=AN*AN,bN=yN/2,iu=class t{static $B(i,e,s){return s?new t(i.toUnsigned(),e.toUnsigned()):new t(i.toSigned(),e.toSigned())}static tU(i){return i.unsigned?new t(i,D.UZERO):new t(i,i.isNegative()?D.NEG_ONE:D.ZERO)}static iU(i,e){if(j(i))return e?t.eU:t.sU;if(e){if(i<0)return t.eU;if(i>=yN)return t.nU}else{if(i<=-bN)return t.rU;if(i+1>=bN)return t.oU}return i<0?t.iU(-i,e).XB():t.$B(D.fromNumber(i%AN),D.fromNumber(i/AN),e)}hU(){return this.aU.unsigned}uU(){return this.cU.isZero()&&this.aU.isZero()}HB(){return this.aU.isNegative()}lU(){return this.hU()?t.$B(this.cU,this.aU,!1):this}dU(){return this.hU()?this:t.$B(this.cU,this.aU,!0)}fU(){return this.cU}BB(){return this.HB()?-this.XB().BB():this.aU.toNumber()*AN+this.cU.toUnsigned().toNumber()}gU(){return this.cU.toInt()}DB(t){return(this.hU()===t.hU()||this.aU.getHighBits()>>>31!=1||t.aU.getHighBits()>>>31!=1)&&(this.aU.toUnsigned().eq(t.aU.toUnsigned())&&this.cU.toUnsigned().eq(t.cU.toUnsigned()))}QB(t){if(this.DB(t))return nn.Zr;const i=this.HB(),e=t.HB();if(i&&!e)return nn.ey;if(!i&&e)return nn.iy;if(!this.hU())return this.qB(t).HB()?nn.ey:nn.iy;const s=this.dU(),n=t.dU(),r=n.aU.comp(s.aU);return r>0||0===r&&n.cU.gt(s.cU)?nn.ey:nn.iy}WB(t){return this.QB(t)<0}VB(t){return this.QB(t)<=0}_U(t){return this.QB(t)>0}vU(t){return this.QB(t)>=0}wU(){return new t(this.cU.not(),this.aU.not())}mU(i){return new t(this.cU.and(i.cU),this.aU.and(i.aU))}pU(i){return new t(this.cU.or(i.cU),this.aU.or(i.aU))}AU(i){const e=127&i;return 0===e?this:e<64?t.$B(this.cU.shl(e),this.aU.shl(e).or(this.cU.shru(64-e)),this.hU()):t.$B(D.ZERO,this.cU.shl(e-64),this.hU())}yU(i){const e=127&i;return 0===e?this:e<64?t.$B(this.cU.shru(e).or(this.aU.shl(64-e)),this.aU.shr(e),this.hU()):t.$B(this.aU.shr(e-64),this.aU.isNegative()?D.NEG_ONE:D.ZERO,this.hU())}bU(i){const e=127&i;return 0===e?this:e<64?t.$B(this.cU.shru(e).or(this.aU.shl(64-e)),this.aU.shru(e),this.hU()):64===e?t.$B(this.aU,D.ZERO,this.hU()):t.$B(this.aU.shru(e-64),D.ZERO,this.hU())}Kz(i){const e=this.aU.high>>>16,s=65535&this.aU.high,n=this.aU.low>>>16,r=65535&this.aU.low,o=this.cU.high>>>16,h=65535&this.cU.high,a=this.cU.low>>>16,u=65535&this.cU.low,c=i.aU.high>>>16,l=65535&i.aU.high,d=i.aU.low>>>16,f=65535&i.aU.low,g=i.cU.high>>>16,_=65535&i.cU.high,v=i.cU.low>>>16;let w=0,m=0,p=0,A=0,y=0,b=0,M=0,T=0;T+=u+(65535&i.cU.low),M+=T>>>16,T&=65535,M+=a+v,b+=M>>>16,M&=65535,b+=h+_,y+=b>>>16,b&=65535,y+=o+g,A+=y>>>16,y&=65535,A+=r+f,p+=A>>>16,A&=65535,p+=n+d,m+=p>>>16,p&=65535,m+=s+l,w+=m>>>16,m&=65535,w+=e+c,w&=65535;const S=this.hU(),N=D.fromBits(p<<16|A,w<<16|m,S),I=D.fromBits(M<<16|T,y<<16|b,S);return t.$B(I,N,S)}qB(t){return this.Kz(t.XB())}XB(){return this.wU().Kz(t.MU)}TU(i){if(this.uU()||i.uU())return this.hU()?t.eU:t.sU;if(this.HB())return i.HB()?this.XB().TU(i.XB()):this.XB().TU(i).XB();if(i.HB())return this.TU(i.XB()).XB();if(this.aU.isZero()&&0===this.cU.high&&i.aU.isZero()&&0===i.cU.high)return t.tU(this.cU.multiply(i.cU));const e=D.fromBits(4294967295,0,!0),s=this.cU.and(e),n=this.cU.shru(32),r=this.aU.and(e),o=this.aU.shru(32),h=i.cU.and(e),a=i.cU.shru(32),u=i.aU.and(e),c=i.aU.shru(32);let l=D.UZERO,d=D.UZERO,f=D.UZERO,g=D.UZERO;l=l.add(s.mul(h)),d=d.add(l.shru(32)),l=l.and(e),d=d.add(n.mul(h)),f=f.add(d.shru(32)),d=d.and(e),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(e),f=f.add(r.mul(h)),g=g.add(f.shru(32)),f=f.and(e),f=f.add(n.mul(a)),g=g.add(f.shru(32)),f=f.and(e),f=f.add(s.mul(u)),g=g.add(f.shru(32)),f=f.and(e),g=g.add(o.mul(h)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(e);const _=D.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),v=D.fromBits(f.getLowBitsUnsigned(),g.getLowBitsUnsigned(),!0);return t.$B(_,v,this.hU())}SU(i){let e,s,n=i;if(n.uU())throw new RangeError("division by zero");if(this.uU())return this.hU()?[t.eU,t.eU]:[t.sU,t.sU];if(this.hU()){if(n.hU()||(n=n.dU()),n._U(this))return[t.eU,this];if(n._U(this.bU(1)))return s=t.NU,e=this.qB(n),[s,e];s=t.eU}else{if(this.DB(t.rU)){if(n.DB(t.MU)||n.DB(t.IU))return[t.rU,t.sU];if(n.DB(t.rU))return[t.MU,t.sU];{const i=this.yU(1).DU(n).AU(1);return i.DB(t.sU)?s=n.HB()?t.MU:t.IU:(e=this.qB(n.TU(i)),s=i.Kz(e.DU(n))),e=this.qB(n.TU(s)),[s,e]}}if(n.DB(t.rU))return this.hU()?[t.eU,this]:[t.sU,this];if(this.HB())return n.HB()?this.XB().SU(n.XB()):([s,e]=this.XB().SU(n),[s.XB(),e.XB()]);if(n.HB())return[s,e]=this.SU(n.XB()),[s.XB(),e.XB()];s=t.sU}for(e=this;e.vU(n);){let i=x.max(1,x.floor(e.BB()/n.BB()));const r=x.ceil(x.log(i)/x.LN2),o=r<=48?1:2**(r-48);let h=t.iU(i),a=h.TU(n);for(;a.HB()||a._U(e);)i-=o,h=t.iU(i,this.hU()),a=h.TU(n);h.uU()&&(h=t.MU),s=s.Kz(h),e=e.qB(a)}return[s,e]}DU(t){return this.SU(t)[0]}EU(t){return this.SU(t)[1]}toString(i){const e=i||10;if(e<2||e>36)throw new RangeError("radix");if(this.uU())return"0";if(this.HB()){if(this.DB(t.rU)){const i=t.iU(e),s=this.DU(i),n=s.TU(i).qB(this);return s.toString(e)+n.gU().toString(e)}return"-"+this.XB().toString(e)}const s=t.iU(e**6,this.hU());let n=this,r="";for(;;){const t=n.DU(s);let i=(n.qB(t.TU(s)).gU()>>>0).toString(e);if(n=t,n.uU())return i+r;for(;i.length<6;)i="0"+i;r=String(i)+r}}constructor(t,i){this.cU=t,this.aU=i}};iu.sU=iu.tU(D.ZERO),iu.eU=iu.tU(D.UZERO),iu.MU=iu.tU(D.ONE),iu.NU=iu.tU(D.UONE),iu.IU=iu.tU(D.NEG_ONE),iu.oU=iu.$B(D.NEG_ONE,D.MAX_VALUE,!1),iu.nU=iu.$B(D.MAX_UNSIGNED_VALUE,D.MAX_UNSIGNED_VALUE,!0),iu.rU=iu.$B(D.ZERO,D.MIN_VALUE,!1),Qi(),r();var Io=class t{get JB(){return!isFinite(this.kU)}get sd(){return this.kU/this.xj}static LU(i){return new t(x.ceil(i.kU),i.xj)}static xU(i){return new t(x.floor(i.kU),i.xj)}static CU(t,i){return t.FB(i)?t:i}static jU(t,i){return t.VB(i)?t:i}Kz(i){return this.xj>=i.xj?new t(this.kU+i.OU(this.xj).kU,this.xj):new t(this.OU(i.xj).kU+i.kU,i.xj)}UB(t){return t.WB(this)}FB(t){return t.VB(this)}GB(i){if(this.xj>=i.xj){const e=x.abs(this.kU-i.OU(this.xj).kU),s=this.xj;return new t(e,s)}return i.GB(this)}YB(t,i){return this.GB(t).VB(i)}QB(t){return function(t,i){return t.xj>=i.xj?Hv(t.kU,i.OU(t.xj).kU):Hv(t.OU(i.xj).kU,i.kU)}(this,t)}DB(t){return 0===this.QB(t)}WB(t){return this.QB(t)<0}VB(t){return this.QB(t)<=0}OU(i){return new t(this.kU*(i/this.xj),i)}qB(i){return this.xj>=i.xj?new t(this.kU-i.OU(this.xj).kU,this.xj):new t(this.OU(i.xj).kU-i.kU,i.xj)}RU(i){return new t(this.kU*i,this.xj)}constructor(t,i=1){this.kU=t,this.xj=i}};Io.ed=new Io(1/6,1),Io.sU=new Io(0),Io.PU=new Io(1/0),Io.zU=1e6;var uo=class t extends wN{static BU(i,e){return void 0===e&&(e=vN),t.iU(i*e,e)}static iU(i,e){return j(i)?t.UU:i===1/0?t.QU:i===-1/0?t.FU:new t(D.fromNumber(i),e)}static tU(i,e){return new t(i,e)}static YU(i){return t.BU(i.sd,vN)}static VU(i){return new t(D.fromNumber(i.getTime()),1e3)}static CU(t,i){return t.FB(i)?t:i}static jU(t,i){return t.VB(i)?t:i}static GU(i,e,s){return t.CU(e,t.jU(s,i))}HB(){return this.zD.isNegative()}uU(){return 0!==this.xj&&this.zD.isZero()}JB(){return 0===this.xj&&!this.zD.isZero()}KB(){return 0===this.xj&&this.zD.isZero()}BB(){if(0===this.xj)return this.zD.isZero()?NaN:this.zD.isNegative()?-1/0:1/0;const t=this.zD.divide(this.xj),i=this.zD.subtract(t.multiply(this.xj));return t.toNumber()+i.toNumber()/this.xj}fU(){if(0===this.xj)throw new b("Failed to convert timestamp");return this.zD}WU(){return new Date(0===this.xj?NaN:this.OU(1e3).zD.toNumber())}ZU(){return new Io(0===this.xj?this.BB():this.zD.toNumber(),this.xj)}OU(i,e){void 0===e&&(e=lo.HU);const s=this.xj;if(s===i)return this;if(0===s)return this;const n=Nf(s,i),r=function(t,i,e){const[s,n]=t.SU(i);if(n.uU())return s;if(e===lo.HU)return n.HB()?s.qB(iu.MU):s;if(e===lo.XU)return n.HB()?s:s.Kz(iu.MU);{const t=n.TU(iu.iU(2));return t.HB()?t.XB().WB(i)?s:s.qB(iu.MU):t.WB(i)?s:s.Kz(iu.MU)}}(iu.tU(this.zD).TU(iu.iU(i/n)),iu.iU(s/n),e);return new t(r.fU(),i)}QB(t){if(this===t)return nn.Zr;if(0===this.xj||0===t.xj)return mN(this,t);if(this.uU())return t.uU()?nn.Zr:t.HB()?nn.iy:nn.ey;if(t.uU())return this.HB()?nn.ey:nn.iy;const i=x.min(this.xj,t.xj),e=this.OU(i,lo.qU).zD,s=t.OU(i,lo.qU).zD;return e.compare(s)}XB(){return 0===this.xj?function(t){0;return t.KB()?t:t.HB()?uo.QU:uo.FU}(this):new t(this.zD.negate(),this.xj)}Kz(i){if(0===this.xj||0===i.xj)return function(t,i){0;if(t.KB()||i.KB())return uo.UU;if(t.JB()&&i.JB())return t.HB()===i.HB()?t:uo.UU;return t.JB()?t:i}(this,i);if(this.uU())return i;if(i.uU())return this;const e=x.max(this.xj,i.xj),s=this.OU(e,lo.qU),n=i.OU(e,lo.qU);return new t(s.zD.add(n.zD),e)}TU(i){if(this.KB()||j(i))return t.UU;if(this.JB()||!isFinite(i)){if(this.uU()||0===i)return t.UU;{const e=this.HB()?t.FU:t.QU;return i<0?e.XB():e}}return this.uU()?this:new t(0===i?D.ZERO:this.zD.multiply(i),this.xj)}DU(i){if(this.KB()||j(i))return t.UU;if(this.JB())return isFinite(i)?0===i?1/i<0?this.XB():this:i<0?this.XB():this:t.UU;if(!isFinite(i))return new t(D.ZERO,this.xj);if(this.uU())return 0===i?t.UU:new t(D.ZERO,this.xj);if(0===i){const e=this.HB()?t.FU:t.QU;return 1/i<0?e.XB():e}return new t(this.zD.divide(i),this.xj)}KU(){return[this.zD.low,this.zD.high,this.xj]}constructor(t,i){super(),this.zD=t.toSigned(),this.xj=i>>>0}};uo.sU=new uo(D.ZERO,vN),uo.UU=new uo(D.ZERO,0),uo.QU=new uo(D.ONE,0),uo.FU=new uo(D.NEG_ONE,0),r(),Qi();var Nu=class t extends wN{static BU(i,e){return void 0===e&&(e=vN),t.iU(i*e,e)}static iU(i,e){return j(i)?t.UU:i===1/0?t.QU:i===-1/0?t.FU:new t(BigInt(x.floor(i)),e)}static tU(i,e){return new t(BigInt(i.high)<<BigInt(32)|BigInt(i.low>>>0),e)}static YU(i){return t.BU(i.sd,vN)}static VU(i){return t.iU(i.getTime(),1e3)}static get sU(){return t.JU||(t.JU=new t(BigInt(0),vN)),t.JU}static get UU(){return t.$U||(t.$U=new t(BigInt(0),0)),t.$U}static get QU(){return t.tQ||(t.tQ=new t(BigInt(1),0)),t.tQ}static get FU(){return t.iQ||(t.iQ=new t(BigInt(-1),0)),t.iQ}static CU(t,i){return t.FB(i)?t:i}static jU(t,i){return t.VB(i)?t:i}static GU(i,e,s){return t.CU(e,t.jU(s,i))}HB(){return this.zD<BigInt(0)}uU(){return 0!==this.xj&&this.zD===BigInt(0)}JB(){return 0===this.xj&&this.zD!==BigInt(0)}KB(){return 0===this.xj&&this.zD===BigInt(0)}BB(){if(0===this.xj)return this.zD===BigInt(0)?NaN:this.zD<BigInt(0)?-1/0:1/0;const t=this.zD/BigInt(this.xj),i=this.zD-t*BigInt(this.xj);return Number(t)+Number(i)/this.xj}fU(){if(0===this.xj)throw new b("Failed to convert timestamp");return this.eQ()}eQ(){const t=this.zD&BigInt(4294967295),i=this.zD>>BigInt(32)&BigInt(4294967295);return D.fromBits(Number(t),Number(i))}WU(){return new Date(0===this.xj?NaN:Number(this.OU(1e3).zD))}ZU(){return new Io(0===this.xj?this.BB():Number(this.zD),this.xj)}OU(i,e){void 0===e&&(e=lo.HU);const s=this.xj;if(s===i)return this;if(0===s)return this;const n=Nf(s,i),r=function(t,i,e){const s=t/i,n=t-s*i;if(n===BigInt(0))return s;if(e===lo.HU)return n<BigInt(0)?s-BigInt(1):s;if(e===lo.XU)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<i?s:s-BigInt(1):t<i?s:s+BigInt(1)}}(this.zD*BigInt(i/n),BigInt(s/n),e);return new t(r,i)}QB(t){if(this===t)return nn.Zr;if(0===this.xj||0===t.xj)return mN(this,t);if(this.uU())return t.uU()?nn.Zr:t.HB()?nn.iy:nn.ey;if(t.uU())return this.HB()?nn.ey:nn.iy;const i=x.min(this.xj,t.xj),e=this.OU(i,lo.qU).zD,s=t.OU(i,lo.qU).zD;return e>s?nn.iy:e<s?nn.ey:nn.Zr}XB(){return 0===this.xj?function(t){0;return t.KB()?t:t.HB()?Nu.QU:Nu.FU}(this):new t(-this.zD,this.xj)}Kz(i){if(0===this.xj||0===i.xj)return function(t,i){0;if(t.KB()||i.KB())return Nu.UU;if(t.JB()&&i.JB())return t.HB()===i.HB()?t:Nu.UU;return t.JB()?t:i}(this,i);if(this.uU())return i;if(i.uU())return this;const e=x.max(this.xj,i.xj),s=this.OU(e,lo.qU),n=i.OU(e,lo.qU);return new t(s.zD+n.zD,e)}TU(i){if(this.KB()||j(i))return t.UU;if(this.JB()||!isFinite(i)){if(this.uU()||0===i)return t.UU;{const e=this.HB()?t.FU:t.QU;return i<0?e.XB():e}}return this.uU()?this:new t(0===i?BigInt(0):this.zD*BigInt(i),this.xj)}DU(i){if(this.KB()||j(i))return t.UU;if(this.JB())return isFinite(i)?0===i?1/i<0?this.XB():this:i<0?this.XB():this:t.UU;if(!isFinite(i))return new t(BigInt(0),this.xj);if(this.uU())return 0===i?t.UU:new t(BigInt(0),this.xj);if(0===i){const e=this.HB()?t.FU:t.QU;return 1/i<0?e.XB():e}return new t(this.zD/BigInt(i),this.xj)}KU(){const t=this.eQ();return[t.low,t.high,this.xj]}constructor(t,i){super(),this.zD=BigInt.asIntN(64,t),this.xj=i>>>0}};Nu.JU=void 0,Nu.$U=void 0,Nu.tQ=void 0,Nu.iQ=void 0;var lo=function(t){return t[t.HU=0]="HU",t[t.XU=1]="XU",t[t.qU=2]="qU",t}({}),H=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?Nu:uo;function MN(t,i){return t.QB(i)}function TN(t,i){return void 0!==t?void 0!==i?H.jU(t,i):t:i}r(),bs();var SN=9e4,NN=di((()=>H.iU(8589934592,SN))),IN=di((()=>NN().DU(2)));r();var DN={sQ:0,nQ:1/0,rQ:0};Qi();var EN=6,kN=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],LN=[" ","\t","\n","\f","\r"],xN=/^\d*$/,CN=/.*[0-9]+.*/,jN=/^[\d.-]+$/,ON=/(^\.|\.$)/,RN=/(\D\.|\.\D)/;function PN(t,i,e){void 0===i&&(i=DN),void 0===e&&(e=!0);return zN(am(Al(t),new da),i,e)}function zN(t,i,e){void 0===i&&(i=DN),void 0===e&&(e=!0);const s={L:[],oQ:[],hQ:[]},n=BN(t),r=new da;if(XN(n),Ht(n,(t=>"\n"!==t),r),r.tc>=n.length)return s;if(r.Gb(1),"\n"!==n.charAt(r.tc)){VN(UN(n,r,false,!0,s,i,e),s)}else r.Gb(1);for(Ht(n,(t=>"\n"===t),r);r.tc<n.length;){VN(UN(n,r,false,!1,s,i,e),s),Ht(n,(t=>"\n"===t),r)}return s}function BN(t){const i=Cv(t,"\0"," "),e=Cv(i,"\r\n","\n");return Cv(e,"\r","\n")}function Ht(t,i,e){const s=e.tc;for(;e.tc<t.length&&i(t.charAt(e.tc));)e.Gb(1);return t.substring(s,e.tc)}function UN(t,i,e,s,n,r,o){let h,a=0,u=i.tc,c="",l=!1,d=!1,f=null,g=null,_=null;for(;!l;)if(h=Ht(t,(t=>"\n"!==t),i),a++,i.tc>=t.length?l=!0:i.Gb(1),_t(h,"--\x3e")){if(s||1!==a&&(2!==a||d)){i.Wb(u);break}d=!0,u=i.tc,f=new uN(0,0,"",!1,c);try{GN(h,n.oQ,f,r,o),c=""}catch(t){Fe.uA(t),f=null}}else{if(""===h)break;s&&I(h,"X-TIMESTAMP-MAP")&&(n.aQ=QN(h)),s||2!==a||e||(Wn("STYLE",c.replace(/ /g,""))?(g={YA:WS.aB},c=""):Wn("REGION",c.replace(/ /g,""))&&(_=new _N("",100,3,0,100,0,100,""),c="")),c&&(c+="\n"),c+=h,u=i.tc}if(f)return f.U=c,f;if(g);else if(_)return function(t,i){const e=t.split(/\s/),s=":";for(const t of e)if(0!==t.length&&_t(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const e=t.indexOf(s),n=t.substring(0,e),r=t.substring(e+1,t.length);switch(n.toUpperCase()){case"ID":hI(r,i);break;case"WIDTH":cI(r,i);break;case"LINES":uI(r,i);break;case"REGIONANCHOR":{const t=oI(r);t&&(i.CB=t[0],i.jB=t[1]);break}case"VIEWPORTANCHOR":{const t=oI(r);t&&(i.RB=t[0],i.PB=t[1]);break}case"SCROLL":aI(r,i)}}}(c,_),_;return null}function QN(t){const i=t.split("=")[1].trim().split(","),e=YN(i[0].trim(),"MPEGTS")?i[0]:i[1],s=YN(i[0].trim(),"LOCAL")?i[0]:i[1];var n;return{uQ:FN(Number(e.split(/:(.*)/)[1].trim())||0),lh:H.BU(null!=(n=pl(s.split(/:(.*)/)[1].trim(),new da))?n:0)}}function FN(t){return H.iU(t,SN)}function YN(t,i){return I(t,i)}function VN(t,i){t&&function(t){return"cue"===t.YA}(t)?i.L.push(t):t&&function(t){return"region"===t.YA}(t)?i.oQ.push(t):t&&function(t){return"stylesheet"===t.YA}(t)&&i.hQ.push(t)}function GN(t,i,e,s,n){const r=new da;KN(t,r);const o=WN(pl(t,r),s,n);if(KN(t,r),"--\x3e"!==t.substring(r.tc,r.tc+3))throw b("Something went wrong with parsing a WebVTT Cue");r.Gb(3),KN(t,r);const h=WN(pl(t,r),s,n);e.kB(o,h);!function(t,i,e){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&_t(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),o=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":eI(o,i,e);break;case"VERTICAL":nI(o,i);break;case"D":rI(o,i);break;case"LINE":case"L":tI(o,i);break;case"POSITION":case"T":iI(o,i);break;case"SIZE":case"S":sI(o,i);break;case"ALIGN":case"A":$N(o,i)}}}(t.substring(r.tc,t.length),e,i)}function WN(t,i,e){return e?t+i.sQ:t}function ZN(t){return/^[0-9]$/.test(t)}function pl(t,i){const e=Cv(t,",",".");let s,n,r,o=!1;if(i.tc>=e.length||!ZN(e.charAt(i.tc)))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");const h=Ht(e,ZN,i),a=C(h,10);if((h.length>2||a>59)&&(o=!0),i.tc>=e.length||":"!==e.charAt(i.tc))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");i.Gb(1);const u=Ht(e,ZN,i);if(2!==u.length)throw new b("Something went wrong with parsing a WebVTT Cue timestamp");const c=C(u,10);if(o||i.tc<e.length&&":"===e.charAt(i.tc)){if(i.tc>=e.length||":"!==e.charAt(i.tc))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");i.Gb(1);const t=Ht(e,ZN,i);if(2!==u.length)throw new b("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=C(t,10)}else s=0,n=a,r=c;if(i.tc>=e.length||"."!==e.charAt(i.tc))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");i.Gb(1);const l=Ht(e,ZN,i),d=C(l,10);if(c>59||r>59)throw new b("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function HN(t){return XN(BN(t))}function XN(t){if(t.length<EN)return!1;for(const i of kN)if(I(t,i))return!0;return!1}function qN(t){return Qa(LN,t)}function KN(t,i){for(;i.tc<t.length&&qN(t.charAt(i.tc));)i.Gb(1)}function JN(t){const i=t.lastIndexOf("%");if(i>-1){const e=S(t.substring(0,i));if(!j(e)&&e>=0&&e<=100)return e}return null}function $N(t,i){const e=t.toLowerCase();switch(e){case"start":case"center":case"end":case"left":case"right":i.fB=e;break;case"middle":i.fB="center"}}function tI(t,i){let e,s;const n=t.indexOf(",");if(n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s=""),!CN.test(e))return;let r,o;if(tt(e,"%")){const t=JN(e);if(null===t)return;r=t,o=!1}else{if(!jN.test(e)||e.lastIndexOf("-")>0)return;const t=e.indexOf(".");if(t>=0&&(t!==e.lastIndexOf(".")||!RN.test(e)||ON.test(e)))return;if(r=S(e),j(r))return;o=!0}switch(i.gB=r,i.mB=o,s=s.toLowerCase(),s){case"start":case"center":case"end":i._B=s;break;case"middle":i._B="center"}}function iI(t,i){let e,s;const n=t.indexOf(",");n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s="");const r=JN(e);if(null!==r)switch(i.uo=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":i.vB=s;break;case"start":i.vB="line-left";break;case"middle":i.vB="center";break;case"end":i.vB="line-right"}}function eI(t,i,e){const s=wo(e,(i=>i.o===t));void 0!==s&&(i.wB=s)}function sI(t,i){const e=JN(t);null!==e&&(i.Kb=e)}function nI(t,i){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":i.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":i.Pt="lr";break;default:i.Pt=""}}function rI(t,i){"VERTICAL"===t.toUpperCase()?i.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(i.Pt="lr")}function oI(t){if(t.indexOf(",")>=0){const i=JN(t.substring(0,t.indexOf(","))),e=JN(t.substring(t.indexOf(",")+1,t.length));return[ur(i||0,0,100),ur(e||100,0,100)]}return null}function hI(t,i){i.o=t}function aI(t,i){"up"===t.toLowerCase()&&(i.OB="up")}function uI(t,i){xN.test(t)&&(i.xB=C(t))}function cI(t,i){const e=JN(t);null!==e&&(i.ji=e)}function lI(t){return t&&"ZD"in t?t.ZD:t}r(),r(),r();var dI=class extends hN{get cQ(){return this.lQ}get dQ(){return this.fQ}get oQ(){return this.gQ}get _Q(){return this.vQ}get ga(){return this.Za||(this.Za=function(t){return fe(Ft(t),{get extent(){return t.cQ},get styles(){return t.dQ},get regions(){return t.oQ},get metadata(){return lI(t._Q)},get content(){return lI(t.U)}})}(this)),this.Za}EB(t){return!!ns(this.cQ,t.cQ)&&(!!ns(this.dQ,t.dQ)&&(!!ns(this.oQ,t.oQ)&&(this._Q&&t._Q?!!this._Q.BD(t._Q)&&(this.U&&t.U?this.U.BD(t.U):this.U===t.U):this._Q===t._Q)))}constructor(t,i,e,s,n,r,o,h){super(t,i,e,s),this.lQ=n,this.fQ=r,this.gQ=o,this.vQ=h||void 0}};r();var fI=class{get wQ(){return this.R_.UD(!0)}get lB(){return this.mQ}get dB(){return this.pQ}constructor(t,i,e){this.mQ=t,this.pQ=i,Gb(e)?this.R_=function(t,i,e){for(const t of["begin","end","dur"])e.$D(t);return e}(0,0,e):this.R_=e}};Qi(),r();var gI="http://www.w3.org/XML/1998/namespace";function _I(t,i,e,s){let n=t.WD(e,i);return 0===n.length&&(n=t.VD(s+":"+i)),n}function vI(t){const i={};for(const e of t.XD)i[e.jD]=e.zD;return i}var wI=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,mI=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,pI="http://www.w3.org/ns/ttml";function AI(t,i,e,s){void 0===e&&(e=DN),void 0===s&&(s=zo.APPLICATION_TTML_XML);let n=[];const r=Al(t);return s===zo.APPLICATION_MP4?n=function(t,i,e){const s=pe.dj(t),n=aT(s,Rt.SC);if(!n)return[];return MI(Al(n.rI),i,e)}(r,i,e):s===zo.APPLICATION_TTML_XML&&(n=MI(r,i,e)),n}function yI(t,i,e){return void 0===e&&(e=DN),TI(t,i,e)}function bI(t,i){const e=LI(i.wQ),s={};for(const i of e)s[i]=t[i];return s}function MI(t,i,e){return TI(am(t,new da),i,e)}function TI(t,i,e){const s=[];let n;try{n=Fe.CD(t)}catch(t){return s}const r=n.sE;if("tt"!==r.jD)return s;const o=r.WD(pI,"head")[0],h=r.WD(pI,"body")[0];if(!h||!o)return s;const a=NI(r.KD("tts:extent")),u=a?{width:a[0],height:a[1]}:void 0,c=function(t){const i={},e=t.WD(pI,"styling")[0],s=e&&e.WD(pI,"style")||[];for(const t of s){i[t.JD(gI,"id")]=vI(t)}return i}(o),l=function(t){const i={},e=t.WD(pI,"layout")[0],s=e&&e.WD(pI,"region")||[];for(const t of s){const e=t.JD(gI,"id");if(!e)continue;i[e]=vI(t);const s=kI(t);for(const t in s)Bh.call(s,t)&&(i[e][t]=s[t])}return i}(o),d=a?function(t,i){const e=oi(t);for(const t of _.keys(e)){const s=NI(e[t].extent);if(s){const n=SI(s[0],i[0]),r=SI(s[1],i[1]);e[t].extent=n+" "+r}const n=NI(e[t].origin);if(n){const s=SI(n[0],i[0]),r=SI(n[1],i[1]);e[t].origin=s+" "+r}}return e}(l,a):l,f=o.WD(pI,"metadata")[0],g=II(h,e.sQ,e.nQ,e.rQ);for(const t of g){const i=bI(d,t);s.push(new dI(t.lB,t.dB,t.wQ,!1,u,c,i,f))}return s}function SI(t,i){return t/i*100+"%"}function NI(t){if(!t)return;const i=t.split(" ",2);if(2!==i.length)return;const[e,s]=i;if(!tt(e,"px")||!tt(s,"px"))return;return[Number(e.slice(0,-2)),Number(s.slice(0,-2))]}function II(t,i,e,s){let n,r=i,o=e,h=[];const a=[];if(Gb(t)){var u,c;r=null!=(u=EI(t.KD("begin"),s))?u:r,n=EI(t.KD("dur"),0),o=null!=(c=EI(t.KD("end"),s))?c:void 0!==n?r+n:o;const i=t.QD;for(let e=0;e<i.length;e++)("body"===t.jD||"div"===t.jD)&&i[e].xD>1||(h=h.concat(II(i[e],r,o,s)))}const l=function(t,i,e){const s=[];s.push(t,i);for(const t of e)s.push(t.lB,t.dB);s.sort(eo);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(Mn(s,t+1),t--,n=s.length);return s}(r,o,h);for(let i=0;i<l.length-1;i++){const e=DI(l[i],l[i+1],h);if(e.length<=0&&xI(t)){const e=t.UD(!1);a.push(new fI(l[i],l[i+1],e))}else if(e.length>0){const s=t.UD(!1);e.forEach((t=>s.HD(t.wQ))),a.push(new fI(l[i],l[i+1],s))}}return a}function DI(t,i,e){const s=[];for(let n=0;n<e.length;n++){const r=e[n].lB,o=e[n].dB;(r>=t&&o<=i||r<i&&o>=i||r<t&&o>t)&&s.push(e[n])}return s}function EI(t,i){if(t){if(wI.test(t)){const e=wI.exec(t);if(!e)return;const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,o=e[6];return 3600*s+60*n+r+(o?Number(o)*.1**o.length:0)+i}if(mI.test(t)){const e=mI.exec(t);if(!e)return;const s=Number(e[1]);let n;switch(e[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+i}}}function kI(t){const i={},e=t.VD("style")||[];for(const t of e){const e=vI(t);for(const t in e)Bh.call(e,t)&&(i[t]=e[t])}return i}function LI(t){let i,e=[];if(Gb(t)){i=t.KD("region"),i&&e.push(i);const s=t.QD;for(let t=0;t<s.length;t++)e=e.concat(LI(s[t]))}return e}function xI(t){if(Gb(t)){const i=t.jD.toUpperCase(),e=Boolean(t.KD("smpte:backgroundImage"));return"BR"===i||e}return t.xD===hu.ON}function CI(t){const i=function(t){try{return Fe.CD(t).sE}catch(t){}}(t);return"tt"===(null==i?void 0:i.jD)}r(),r();var Uu=class extends lM{tt(t){return super.tt(t)}it(t){const i=super.it(t);return i&&(t.UI=ua.Ch),i}ma(){return CM(this)}};r(),r();var z=function(t){return t.AQ="subtitles",t.yQ="captions",t.bQ="descriptions",t.Fn="chapters",t.MQ="metadata",t.TQ="thumbnails",t}({}),jI=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function OI(t){return"string"==typeof t&&Qa(jI,t)}function RI(t,i){return!(!OI(t)||!OI(i))&&(t===i||"subtitles"===t&&"captions"===i||"captions"===t&&"subtitles"===i)}r();var PI=class extends qi{constructor(t,i,e,s,n){super(t,i,n),this.url=e,this.status=s}};function zI(t){return t===z.AQ||t===z.yQ}function BI(t){return t.some(UI)}function UI(t){return _t(t,"stpp")}function QI(t){return t.some(FI)}function FI(t){return _t(t,"vtt")||_t(t,"wvtt")}function YI(t,i){return ZA(t)&&QI(i)}function VI(t,i){return t===z.TQ||t===z.MQ&&i===z.TQ}function GI(t,i,e,s){for(const n of t.L.AL){if(n.lB>e)break;i<=n.dB&&!Qa(s,n)&&s.push(n)}}function WI(t,i){return Wv(t.zL,i.zL)}function ZI(t,i,e,s){const n=function(t){switch(t){case El.WEBVTT:return"WebVTT";case El.SRT:return"SRT";case El.TTML:return"TTML";default:return""}}(t);return new PI(vt.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",i,e,s)}function HI(t,i){const e=[];for(const s of t.L.AL)if(s.dB<=i)e.push(s);else if(s.lB>=i)break;for(const i of e)t.SQ(i)}function XI(t,i){if(t.V>0){const e=t.Cn(0),s=x.max(0,e-10);for(const t of i)t.NQ(s)}}var qI=class extends tu{tt(t){t.yn(hs.aa,this.IQ),this.Z.tt(t),this.DQ(t)}it(t){t.fn(hs.aa,this.IQ),t.UI=ua.Ch,this.Z.it(t)}EQ(t){}kQ(t){}DQ(t){t.UI!==ua.Ch?this.EQ(t):this.kQ(t)}LQ(){for(const t of this.Z.AL)t.fn(hs.aa,this.IQ),t.gn()}NQ(t){if(t>0)for(const i of this.Z.AL)HI(i,t)}tr(){return this.LQ(),this.Z.tr(),Promise.resolve()}async gn(){this.Bo(),await this.tr(),this.Z.gn()}constructor(...t){super(...t),this.Z=new Uu,this.IQ=t=>{const i=t.Ht;this.DQ(i)}}};r();var KI=class extends Dc{get error(){return this.errorObject.message}ma(){return this}constructor(t){super(Xi.ua),this.errorObject=t}},or=class extends qI{xQ(t){if(!t.src)return;const i=t.kind||z.AQ,e=this.CQ.Wk(i,t.id,t.label,t.srclang,t.default);return e.WL=de(t.src),this.tt(e),e}async jQ(t,i){t.fk=Ma.LOADING;const e=new Gs({zu:t.WL,oI:Ee.ON,xI:Ve.GET,ly:i});let s,n;try{const t=await this.OQ.hI(e);n=t.nI,s=await t.UN()}catch(i){return V(i),t.fk=Ma.ERROR,void t.yo(new KI(function(t,i){let e=i,s=0;if(Cb(t)&&t.name===bt.KI)e=t.hI.zu;else if(jb(t)){const i=t.iD;if(e=i.lI,s=i.nI,0===s)return new PI(vt.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",e,s,t)}return new PI(vt.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",e,s,t)}(i,t.WL)))}try{const i=function(t){return HN(t)?El.WEBVTT:CI(t)?El.TTML:El.SRT}(s);t.YA=i;let e=[];if(i===El.WEBVTT||i===El.SRT){e=zN(s).L}else i===El.TTML&&(e=yI(s,t));for(const i of e)t.RQ(i)}catch(i){return V(i),t.fk=Ma.ERROR,void t.yo(new KI(ZI(t.YA,t.WL,n,i)))}t.fk=Ma.LOADED}EQ(t){Qa(this.Z.AL,t)&&t.fk===Ma.NONE&&this.jQ(t,this.zQ.ly).catch(Ct)}$n(){}async tr(){this.zQ.Ty(),this.zQ=new Wt;for(const t of this.Z.AL)this.CQ.BQ(t);await super.tr()}constructor(t,i){super(),this.zQ=new Wt,this.CQ=t,this.OQ=i}};function JI(t,i){for(const e of t)if(e.Lt===i&&e.UQ)return e}function $I(t,i){tD(JI(t.AL,i))}function tD(t){void 0!==t&&(t.UI=ua.Jn)}function iD(t,i){const e=JI(t.AL,i)||function(t,i){for(const e of t)if(e.Lt===i)return e}(t.AL,i);tD(e)}function eD(t){for(const i of jI)i===z.Fn?iD(t,i):$I(t,i)}r(),Uc(),r();var vo=class extends Jr{constructor(){super(Zi.yb)}};r(),r();var uh=function(t){return t[t.QQ=0]="QQ",t[t.FQ=1]="FQ",t}({});r(),r();var sD=class extends Jr{constructor(t){super(E.rP),this.currentTime=t}};r();var te=class extends Jr{constructor(t){super(E.oP),this.currentTime=t}},nD=[E.lL,E.oP,Zi.so,Zi.wb],ko=class extends tu{YQ(t){!this.VQ&&t>=Fn.Xn&&(this.VQ=!0,this.yo(new yu(this.GQ.LE,t)))}WQ(t){!this.ZQ&&t>=Fn.Iz&&(this.ZQ=!0,this.yo(new Cu(this.GQ.LE,t)))}HQ(t){this.XQ||(t>=Fn.Dz&&this.qQ<Fn.Dz&&!this.GQ.KE||this.KQ&&t>=Fn.Dz)&&this.yo(new te(this.GQ.LE))}JQ(t){!this.$Q(t)||this.GQ.OE||this.GQ.lt||this.yo(new sD(this.GQ.LE))}tF(t){this.qQ<=Fn.Iz&&t>=Fn.Dz&&this.yo(new vS(this.GQ.LE,t))}maybeDispatchCanPlayThroughEvent(t){t===Fn.Ez&&this.yo(new Eu(this.GQ.LE,t))}$Q(t){const i=!this.GQ.KE&&t<=Fn.Iz,e=!this.iF&&this.qQ<=Fn.Iz;return i&&!e}get KQ(){return!this.GQ.KE&&this.iF}tr(){this.qQ=Fn.Nz,this.iF=!0,this.ZQ=!1,this.VQ=!1}gn(){this.Bo(),this.XQ&&this.GQ.fn(E.oP,this.eF),this.GQ.fn(Zi.so,this.sF),this.GQ.fn(Zi.wb,this.nF),this.GQ.fn(E.lL,this.rF)}constructor(t,i=!1){super(),this.GQ=t,this.XQ=i,this.qQ=Fn.Nz,this.iF=!0,this.ZQ=!1,this.VQ=!1,this.rF=t=>{const i=this.GQ.fk;i!==this.qQ&&this.yo(new cu(t.currentTime,i)),i===Fn.Nz&&(this.ZQ=!1,this.VQ=!1),this.YQ(i),this.WQ(i),this.tF(i),this.maybeDispatchCanPlayThroughEvent(i),this.HQ(i),this.JQ(i),this.qQ=i},this.sF=()=>{this.JQ(this.qQ),this.HQ(this.qQ),this.iF=this.GQ.KE},this.nF=()=>{this.iF=this.GQ.KE},this.eF=t=>{this.yo(new te(t.currentTime))},this.GQ.yn(E.lL,this.rF),this.GQ.yn(Zi.so,this.sF),this.GQ.yn(Zi.wb,this.nF),this.XQ&&this.GQ.yn(E.oP,this.eF)}},rD=class extends tu{get LE(){return this.GQ.LE}get OE(){return this.GQ.OE}get lt(){return this.GQ.lt}get KE(){return this.GQ.KE}get fk(){return this.GQ.fk}wy(){this.Bo(),this.GQ.fn(nD,this.Ds)}constructor(t){super(),this.GQ=t,this.GQ.yn(nD,this.Ds)}};r(),r(),r(),r(),Qi();var oD=class{oF(){return this.hF}aF(t){this.hF=t}get wE(){return this.OQ}get uF(){return!1}get cF(){const t=this.lF.certificate;if(t)return Ic(t)?Zn(t):Cc(t)}dF(){return this.lF.licenseAcquisitionURL||this.oF()}get fF(){return!1}gF(t){return Promise.resolve()}_F(t,i){return Promise.resolve(void 0)}get zI(){return Boolean(this.lF.useCredentials)}async vF(t,i,e,s){const n=this.wF(t,i,e,s);if(""===n.zu)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.wE.hI(n);return await t.QN(i)}catch(t){return V(t),void await this.mF(t,n.zu,s)}}wF(t,i,e,s){const n=this.pF().RN(),r=this.zI,o={zu:this.AF(),oI:i,aI:n,GN:t,zI:r,xI:Ve.POST,CI:0,ly:s,YA:Rs.vI,OI:e};return new Gs(o)}yF(t,i){return Promise.resolve(t)}bF(t,i,e,s){return Promise.resolve(t)}pF(){return new Rh(this.lF.headers||{})}async mF(t,i,e){throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}AF(t,i){let e=i;const s=this.lF.queryParameters;if(!e){const t=this.dF();if(!t)return"";e=t}if(s||t){const i=Fe.Ah(e);t&&gb(i,t),s&&gb(i,s),e=i.href}return e}MF(t,i){return hD(t)}TF(t){return new T(t)}async SF(t,i,e){const s=await this.MF(t,e),n=await this.vF(s,this.NF,i,e);return this.TF(n)}gn(){}constructor(t,i,e,s,n){this.hF=void 0,this.NS=t,this.IF=i,this.DF=e,this.OQ=s,this.NF=n,this.lF=this.EF(i)}};function hD(t){return Promise.resolve(ja(t).buffer)}var Ut=class extends oD{EF(t){return t.widevine||{}}async kF(t,i){return this.cF?this.cF:this.LF(new T(t),i)}LF(t,i){return super.SF(t,ul.AI,i)}constructor(t,i,e,s){super(Nv,t,i,e,s)}};r(),Qi();var aD=function(t){return t.BA="Widevine",t.xF="PlayreadyV2",t.CF="PlayreadyV3",t.zA="PlayreadyV2",t.QA="Fairplay",t}({}),uD={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function cD(t,i){var e,s,n,r;const o=uD[i],h=t.accountName;return{CustomerName:t.customerName,AccountName:h,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(e=Fe.bA)?void 0:e.Ys,OSVersion:null==(s=Fe.bA)?void 0:s.xA,DRMProvider:o.DRMProvider,DRMVersion:o.DRMVersion,DRMType:o.DRMType,DeviceVendor:null==(n=Fe.bA)?void 0:n.CA,DeviceModel:null==(r=Fe.bA)?void 0:r.jA}}}function lD(t,i){if(!t.accountName)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, accountName is not set.");if(!t.customerName)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, customerName is not set.");if(!t.portalId)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, portalId is not set.");throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration.")}function dD(t,i,e){let s;if(AT(t))s={AuthToken:t.authToken,Payload:i};else{if(!yT(t))throw lD(t,e);s={LatensRegistration:cD(t,e),Payload:i}}return ym(JSON.stringify(s))}async function fD(t,i,e){const s=t.iD;if(!s)throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,i);const n=s;let r,o;try{r=await n.BN(e),o=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){o=""}throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.hI.zu,n.nI,n.uI,o)}r(),Qi();var gD=class extends Ut{static jF(){return Fe.Ys.Ep?"required":"optional"}mF(t,i,e){return fD(t,i,e)}gF(t){return this.OF?Ao(this.OF.rM,t):(this.OF=new xh,Promise.resolve())}async MF(t,i){const e=this.IF;if(!e)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return dD(e,Tc(t),aD.BA)}TF(t){let i;if(!t.license)throw new lu(vt.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return i=Zn(t.license),i}RF(t){return Promise.resolve(new T(t))}async kF(t,i){this.PF();const e=await this.MF(t,i),s=await this.vF(e,Ee.xN,ul.yI,i);return await this.RF(s)}async LF(t,i){const e=await super.LF(t,i);return this.PF(),e}PF(){this.OF||(this.OF=new xh),this.OF.sM()}gn(){this.OF&&this.OF.Ty(),super.gn()}constructor(t,i,e){super(t,i,e,Ee.CN),this.OF=void 0}};r();var _D=class extends Ut{get zF(){if(bT(this.IF))return this.IF.token}async MF(t,i){const e=await hD(t),s=this.DF,n=cm(new T(e)),r=this.zF;if(void 0===r)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,i,e){super(t,i,e,Ee.xN),this.aF("https://widevine-proxy.drm.technology/proxy")}};function vD(t,i){let e=i||{};return t.ticket&&t.sessionId&&(e=Ei({},e,{SessionId:t.sessionId,Ticket:t.ticket})),Ei({},e,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}r(),r();var wD=class extends Ut{AF(t,i){let e=t;return Zc(this.IF)&&(e=vD(this.IF,e)),super.AF(e,i)}constructor(t,i,e){super(t,i,e,Ee.xN),this.aF("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}};r(),r();var mD="Conax-Custom-Data";function pD(t,i,e){const s=t&&wT(t)&&t;if(s&&!e.has(mD)){const t=nT(s)?s.token:void 0,n=nT(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:i+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});e.set(mD,r)}return e}var AD=class extends Ut{pF(){const t=super.pF();return pD(this.IF,"Widevine",t)}constructor(t,i,e){super(t,i,e,Ee.xN),this.aF("https://connect.conax.com:8094/license")}};function yD(t){const i=nm(new T(t));return Zn(JSON.parse(i).license)}function bD(t){return"string"==typeof t.token?t.token:ym(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function MD(t,i,e){let s;return s=e.token?"x-dt-auth-token":"dt-custom-data",t.set(s,i),t}r(),r();var TD=class extends Ut{get zF(){return bD(this.IF)}TF(t){return yD(t)}pF(){return MD(super.pF(),this.zF,this.IF)}constructor(t,i,e){super(t,i,e,Ee.xN),this.aF("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}};r();var SD=class extends Ut{pF(){const t=super.pF(),i=this.IF.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e){super(t,i,e,Ee.xN)}};async function ND(t,i,e,s){if(!MT(t))throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new Rh;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const o=t.streamId;let h;h=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:i,licenseType:h,streamId:o},u={zu:t.ticketAcquisitionURL,oI:Ee.CN,aI:n,xI:Ve.POST,GN:JSON.stringify(a),ly:s},c=await e.hI(u);return await c.BN()}r(),r();var ID=class extends Ut{pF(){const t=super.pF();return t.set("Content-Type","application/json"),t}async MF(t,i){const e=Am(t.buffer),s=this.IF,n=await ND(s,"widevine_modular",this.wE,i);this.aF(n.licenseServerUrl);const r=Tl(JSON.stringify({payload:e,ticket:n.ticket}));return super.MF(r,i)}TF(t){return Zn(t.license)}constructor(t,i,e){super(t,i,e,Ee.CN)}};r();var DD=class extends Ut{pF(){if(!TT(this.IF))throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.pF();return t.set("X-AxDRM-Message",this.IF.token),t}constructor(t,i,e){super(t,i,e,Ee.xN)}};function ED(t){const i=new T(2*t.length);for(let e=0;e<t.length;e+=1)i[2*e]=t.charCodeAt(e),i[2*e+1]=0;return i}r(),Qi();var Lt=class extends oD{EF(t){return t.playready||{}}pF(){const t=new Rh(this.BF);return t.zN(super.pF()),t}UF(t){return t.length>=1&&t[0].QD.length>0}_F(t){const i=this.IF.playready.customData;if(i){const t=ED(i),e=ED('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+Tc(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{VS:e}})}return super._F(t)}async MF(t,i){const e=await hD(t);return this.QF(e)}async QF(t){var i,e;let s=null;const n=jl(new DataView(t),new da,!0);let r;try{r=Fe.CD(n)}catch(t){return s}const o=null==(i=r.VD("PlayReadyKeyMessage")[0])?void 0:i.VD("LicenseAcquisition")[0];var h;const a=null!=(h=null==o?void 0:o.VD("Challenge"))?h:[];this.UF(a)&&(s=pm(a[0].qD));const u=new Rh;var c;const l=null!=(c=null==o||null==(e=o.VD("HttpHeaders")[0])?void 0:e.VD("HttpHeader"))?c:[];for(const t of l){const i=t.VD("name")[0].qD,e=t.VD("value")[0].qD;u.append(i,e)}return this.BF=u,s}kF(t,i){return Promise.resolve(t)}LF(t,i){return super.SF(t,ul.bI,i)}constructor(t,i,e){super(Ga,t,i,e,Ee.xN),this.BF=void 0}};r(),Qi(),r();var kD=class t{static FF(t){return"3"===t.version?aD.CF:aD.xF}YF(){const t={};if(this.ZT===aD.CF){const i={LatensRegistration:cD(this.VF,aD.CF)};t["X-TITANIUM-DRM-CDATA"]=ym(JSON.stringify(i))}return t}get GF(){return this.ZT}get RS(){return this.ZT===aD.xF}constructor(i){this.VF=i,this.ZT=t.FF(i)}};var LD=class extends Lt{_F(t){const i=this.IF;if(!this.IF)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(yT(i)){const t={};return t.playready={VS:xD(i,this.WF.GF)},Promise.resolve(t)}return Promise.reject(lD(i,aD.zA))}pF(){const t=new Rh(this.WF.YF());return t.zN(super.pF()),t}async mF(t,i,e){const s=t.iD;if(!s)throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i);let n,r;try{const t=await s.FN(e),i=nm(new T(t)),h=Fe.CD(i);if(h){const t=function(t,i){return function(t,i){const e=t.m.slice(),s=[];for(;e.length>0;){const t=e.shift();i(t)?s.push(t):e.push(...t.m)}return s}(t,(t=>t.GD===i))}(h,"CustomData");var o;if(t.length>0)n=JSON.parse(t[0].qD),r=null==(o=n.DrmErr)?void 0:o.desc}}catch(t){}throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i,s.nI,s.uI,r)}UF(t){if(1!==t.length)throw new lu(vt.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,i,e){super(t,i,e),this.WF=new kD(this.IF)}};function xD(t,i){const e=cD(t,i),s=e.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+ym('<LatensRegistration formatversion="'+s+'"><AccountName>'+e.AccountName+"</AccountName><CustomerName>"+e.CustomerName+"</CustomerName><PortalID>"+e.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+e.DeviceInfo.DeviceType+"</DeviceType><OSType>"+e.DeviceInfo.OSType+"</OSType><OSVersion>"+e.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+e.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+e.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+e.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+e.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+e.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=om(n,!0);return om('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+Tc(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}r();var CD=class extends Lt{get zF(){if(bT(this.IF))return this.IF.token}UF(t){if(1!==t.length)throw new lu(vt.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}AF(t,i){const e=Ei({},t||{},{token:this.zF});return super.AF(e,i)}constructor(t,i,e){super(t,i,e),this.aF("https://playready-license.drm.technology/rightsmanager.asmx")}};r();var jD=class extends Lt{AF(t,i){let e=t;return Zc(this.IF)&&(e=vD(this.IF,e)),super.AF(e,i)}constructor(t,i,e){super(t,i,e),this.aF("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}};r();var OD=class extends Lt{pF(){const t=super.pF();return pD(this.IF,"PlayReady",t)}constructor(t,i,e){super(t,i,e),this.aF("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}};r();var RD=class extends Lt{get zF(){return bD(this.IF)}TF(t){const i=function(t){const i=nm(new T(t));return I(i,"<?xml")?0:1}(t);return 1===i?yD(t):super.TF(new T(t))}pF(){return MD(super.pF(),this.zF,this.IF)}constructor(t,i,e){super(t,i,e),this.aF("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};r();var PD=class extends Lt{pF(){const t=super.pF();return this.ZF&&t.set("Ticket",this.ZF),t.set("Content-Type","text/xml"),t}async MF(t,i){const e=this.IF,s=await ND(e,"playready",this.wE,i);return this.aF(s.licenseServerUrl),this.ZF=s.ticket,super.MF(t,i)}constructor(t,i,e){super(t,i,e)}};r();var zD=class extends Lt{pF(){if(!TT(this.IF))throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.pF();return t.set("X-AxDRM-Message",this.IF.token),t}};r(),r();var Ai=function(t){return t.CN="application/json",t.HF="application/x-www-form-urlencoded",t.XF="application/octet-stream",t.ON="text/plain;charset=UTF-8",t}({}),F=class extends oD{get fF(){return!0}qF(){return this.lF.certificateURL||this.KF}JF(t){this.KF=t}MF(t){return Promise.resolve(this.tY(t,this.iY))}tY(t,i){return"spc="+encodeURIComponent(Tc(t))+"&assetId="+encodeURIComponent(i)}get eY(){return Ai.HF}EF(t){return t.fairplay||{}}sY(t){const i=t.indexOf("?");if(i>=0)return Promise.resolve(t.substr(i+1));{const i=t.split("skd://").pop();if(i){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(i))return Promise.resolve(i)}const e=t.split("/");return Promise.resolve(e[e.length-1])}}async _F(t){var i;const e=null!=(i=this.nY)?i:tr(new T(t)),s=await this.sY(e);this.iY=s;const n={};return n.fairplay={$S:s},n}pF(){const t=super.pF();return t.set("Content-Type",this.eY),t}async kF(t,i){return this.cF?this.cF:await this.rY(i)}LF(t,i){return super.SF(t,ul.mI,i)}oY(t){const i=this.qF(),e=this.pF(),s={zu:i,oI:Ee.xN,aI:e,xI:Ve.GET,zI:!1,GN:null,CI:0,ly:t,YA:Rs.vI,OI:ul.pI};return new Gs(s)}async rY(t){const i=this.oY(t),e=await this.wE.hI(i),s=await e.FN();return new T(s)}TF(t){let i;if("string"==typeof t){let e=t.trim();"<ckc>"===e.substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),i=Zn(e)}else i=new T(t);return i}AF(t,i){let e=super.AF(t,i);return I(e,"skd:")&&(e=e.substr(4)),e}constructor(t,i,e,s,n){super(t.NS,i,e,s,n),this.iY="",this.KF=void 0,this.nY=t.hY}};r();var BD=class extends F{get eY(){return Ai.XF}sY(t){let i=t.split("://",1);return"skd"!==i[0].slice(-3).toLowerCase()?Promise.resolve(""):(i=t.split(";",2),i.length>1?Promise.resolve(i[1]):Promise.resolve(super.sY(t)))}async MF(t){return t}TF(t){return new T(t)}AF(t,i){const e=t||{};return e.p1=B(),super.AF(e,i)}constructor(t,i,e,s){super(t,i,e,s,Ee.xN)}};r();var UD=class extends F{get eY(){return Ai.CN}get zF(){if(!bT(this.IF))throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.IF.token}tY(t,i){const e={token:this.zF,contentId:i,payload:Tc(t)};return JSON.stringify(e)}TF(t){return new T(t)}pF(){const t=super.pF();return t.set("x-vudrm-token",this.zF),t}constructor(t,i,e,s){super(t,i,e,s,Ee.xN),this.aF("https://fairplay-license.drm.technology/license"),this.JF("https://fairplay-license.drm.technology/certificate")}};r();var QD="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",FD="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",YD=class extends F{TF(t){const i=function(t){let i;try{i=JSON.parse(t).ckc}catch(t){throw new lu(vt.CONTENT_PROTECTION_LICENSE_INVALID,QD)}if(!i)throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,FD);return i}(nm(new DataView(t)));return super.TF(i)}constructor(t,i,e,s){super(t,i,e,s,Ee.xN)}};r();var VD=class extends F{get eY(){return Ai.CN}async MF(t){const i=this.IF;if(!i)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return dD(i,Tc(t),aD.QA)}TF(t){try{let i;if(Ic(t)){const e=t.trim();i=JSON.parse(e)}else i=t;if(i.license){const t=pm(i.license);return new T(t)}throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new lu(vt.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}mF(t,i,e){return fD(t,i,e)}constructor(t,i,e,s){super(t,i,e,s,Ee.CN)}};r(),Qi();var GD=class extends F{qF(){const t=super.qF();if(!t)return t;const i=Fe.Ah(t),e=this.IF;return Zc(e)&&gb(i,{accountId:e.accountId,applicationId:e.applicationId||""}),i.href}sY(t){return Zc(this.IF)?Promise.resolve(this.IF.contentId):super.sY(t)}async MF(t){return t}TF(t){return new T(t)}get eY(){return Ai.XF}AF(t,i){let e=t;return Zc(this.IF)&&(e=function(t,i){return Ei({},vD(t,i),{KeyId:t.keyId})}(this.IF,e)),super.AF(e,i)}constructor(t,i,e,s){super(t,i,e,s,Ee.xN),this.aF("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.JF("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}};r();var WD=class extends F{pF(){const t=super.pF();return pD(this.IF,"FairPlay",t)}async rY(t){const i={zu:this.qF(),oI:Ee.xN,aI:{},xI:Ve.GET,zI:!1,GN:null,CI:0,ly:t,YA:Rs.vI,OI:ul.pI},e=await this.wE.hI(i),s=await e.FN();return new T(s)}async MF(t){return t}sY(t){const i=t.indexOf("?");if(0===t.indexOf("skd://")){let e;return e=i>=0?t.substring(6,i):t.substring(6),Promise.resolve(function(t){return nm(Zn(t))}(e))}return Promise.resolve("unknown")}TF(t){try{const i=JSON.parse(t);return new T(pm(i.CkcMessage))}catch(t){throw new b("CFLRW-66")}}constructor(t,i,e,s){if(super(t,i,e,s,Ee.ON),!wT(i))throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.aF("https://connect.conax.com:8097/license")}};r();var ZD=class extends F{sY(t){return I(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new lu(vt.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}tY(t,i){return"spc="+Tc(t)+"&assetId="+i}constructor(t,i,e,s){super(t,i,e,s,Ee.ON),this.aF(lT[Sv.QA])}};r();var HD=class extends F{get zF(){return bD(this.IF)}tY(t,i){const e="spc="+encodeURIComponent(Tc(t))+"&"+encodeURI(i);return"persistent"===this.lF.licenseType?e+"&offline=true":e}pF(){return MD(super.pF(),this.zF,this.IF)}constructor(t,i,e,s){super(t,i,e,s,Ee.ON),this.aF("https://lic.drmtoday.com/license-server-fairplay/")}};r(),Qi();var XD=class extends F{sY(t){let i=t;return I(i,"skd:")&&(i="http:"+i.substring(4)),I(i,"http:")||I(i,"https:")?Promise.resolve(Fe.Ah(i).hostname):Promise.reject(new b("Could not parse ExpressPlay FairPlay content ID."))}async MF(t){return t}TF(t){return new T(t)}get eY(){return Ai.XF}constructor(t,i,e,s){super(t,i,e,s,Ee.xN)}};r();var qD=class extends F{pF(){const t=super.pF(),i=this.IF.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e,s){super(t,i,e,s,Ee.ON)}};r();var KD=class extends F{async rY(t){const i=this.qF(),e=this.pF(),s={zu:i,oI:Ee.CN,aI:e,xI:Ve.POST,ly:t,YA:Rs.vI,OI:ul.pI},n=await this.wE.hI(s),r=await n.BN();return new T(Zn(r.certificate))}get eY(){return Ai.CN}async LF(t,i,e){void 0===e&&(e=Ee.ON);const s=Tc(t),n=this.IF,r=await ND(n,"fairplay",this.wE,i),o=Tl(JSON.stringify({spc:s,ticket:r.ticket})),h={zu:this.dF(),oI:Ee.CN,aI:this.pF(),xI:Ve.POST,GN:o,CI:0,ly:i,YA:Rs.vI,OI:ul.mI},a=await this.wE.hI(h);return Zn((await a.BN()).licence)}constructor(t,i,e,s){if(super(t,i,e,s,Ee.CN),!MT(i))throw new b("Invalid Xstream DRM configuration")}};r();var JD=class extends F{tY(t,i){return Tc(t)}TF(t){if(0===t.length)throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.TF(t)}pF(){const t=super.pF();return t.set("Content-Type","text/plain"),t}constructor(t,i,e,s){super(t,i,e,s,Ee.ON)}};r();var $D=class extends F{get eY(){return Ai.CN}tY(t,i){return t}TF(t){return new T(t)}pF(){if(!TT(this.IF))throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.pF();return t.set("X-AxDRM-Message",this.IF.token),t}constructor(t,i,e,s){super(t,i,e,s,Ee.xN)}};r(),Qi();var tE=class extends F{get eY(){return Ai.ON}tY(t,i){const e={spc:Tc(t)};return JSON.stringify(e)}sY(t){const i=Fe.Ah(t);return this.aY=t,i.searchParams.has("b")?Promise.resolve(i.searchParams.get("b")):Promise.reject(new lu(vt.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}AF(t,i){let e=this.dF();return!e&&this.aY&&(e=this.aY),e&&(e=e.replace("skd://","https://")),super.AF(t,i||e)}TF(t){try{let i;if(i=Ic(t)?JSON.parse(t.trim()):t,i.ckc)return Zn(i.ckc)}catch(t){throw new lu(vt.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,i,e,s){super(t,i,e,s,Ee.CN),this.aY=void 0}};r(),r(),r(),bs();var Mu=class{uY(t){return this.cY(t)}lY(t,i){throw new k(i+" must be "+this.dY+". (Received: "+t+")")}constructor(t,i){this.cY=t,this.dY=i}},xs=(new Mu((function(t){return!0}),"any"),new Mu($a,"a number")),sn=new Mu(Ic,"a string"),iE=new Mu(Sh,"a boolean"),eE=(new Mu(Od,"a date"),new Mu(He,"undefined")),sE=new Mu(Z,"an object"),nE=new Mu((function(t){return null===t}),"null");new Mu((function(t){return null==t}),"null or undefined");function rE(t,i){throw new k(i+" has an incorrect type")}var oE=class{uY(t){if(!Z(t))return!1;for(const i of _.keys(this.tA)){if(!this.tA[i].uY(t[i]))return!1}return!0}lY(t,i){if(!Z(t))throw new k(i+" must be an object.");for(const e of _.keys(this.tA)){const s=this.tA[e];if(!s.uY(t[e]))return s.lY(t[e],i+"."+String(e))}throw new k}constructor(t){this.tA=t}};function xu(t){return new oE(t)}function hE(t){return _.keys(t).map((i=>t[i]))}var aE=class{uY(t){return Qa(this.Ov,t)}lY(t,i){return rE(0,i)}constructor(t){this.Ov=t}};function uE(t){return new aE(t)}var cE=class{uY(t){return this.fY.some((i=>i.uY(t)))}lY(t,i){return rE(0,i)}constructor(t){this.fY=t}};function Du(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return new cE(i)}var lE=class{uY(t){return Zr(t)&&t.every((t=>this.gY.uY(t)))}lY(t,i){if(!Zr(t))throw new k(i+" must be an array.");for(let e=0;e<t.length;e++){const s=t[e];this.gY.uY(s)||this.gY.lY(s,i+"["+e+"]")}return rE(0,i)}constructor(t){this.gY=t}};function Ra(t){return new lE(t)}var dE=class{uY(t){return Z(t)&&_.keys(t).every((i=>this.gY.uY(t[i])))}lY(t,i){if(!Z(t))throw new k(i+" must be an object.");for(const e of _.keys(t))if(!this.gY.uY(t[e]))return this.gY.lY(t[e],i+"."+e);return rE(0,i)}constructor(t){this.gY=t}};function fE(t){return new dE(t)}var gE=class{uY(t){return this.gY().uY(t)}lY(t,i){return this.gY().lY(t,i)}constructor(t){this.gY=di(t)}};var _E=xu({responseCode:xs,isException:iE,description:sn,title:sn,correlationId:sn});async function vE(t,i,e,s,n){const r=function(t,i,e,s){const n={token:i.token,account:i.accountId,form:"json"},r=decodeURIComponent(fb(e,n)),o=new Rh({});o.append("Content-Type","application/json");const h=Tc(t),a={getFairplayLicense:{releasePid:i.releasePid,spcMessage:h}};return{zu:r,oI:Ee.ON,aI:o,xI:Ve.POST,GN:JSON.stringify(a),ly:s,YA:Rs.vI,OI:ul.mI}}(t,i,e,n);return await async function(t,i){const e=await i.hI(t),s=await e.BN();if(_E.uY(s))throw new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.zu,s.responseCode);return Zn(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var wE=class extends F{sY(t){const i=t.replace("FairPlay",this._Y.releasePid);return super.sY(i)}async LF(t,i){return await vE(t,this._Y,this.dF(),this.wE,i)}constructor(t,i,e,s){super(t,i,e,s,Ee.xN),this._Y=i}};r();var mE=class extends oD{EF(t){return t.clearkey||{}}async vF(t,i,e,s){const n=this.lF;if(this.dF())return super.vF(t,this.NF,e,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let i=t;return i||(i={}),{kty:"oct",kid:i.id,k:i.value}}))};return Ml(JSON.stringify(t)).buffer}throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}kF(t,i){return Promise.resolve(new T(0))}async LF(t,i){const e=await super.SF(t,ul.MI,i),s=JSON.parse(tr(e));if(s.keys)for(const t of s.keys)t.k&&(t.k=Ew(t.k)),t.kid&&(t.kid=Ew(t.kid));return Ml(JSON.stringify(s))}constructor(t,i,e){super(Ev,t,i,e,Ee.xN)}};r();var pE=class extends Ut{};r(),r(),Qi();var AE={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function yE(t,i,e){const s=DE(i),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(i);const r=await Ao(Promise.resolve(n.call(t,s)),e);return um(r)?Cc(r):IE(Ei({},AE,r))}async function bE(t,i,e,s,n){const r=t.onCertificateResponse,o=NE(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);return Cc(await Ao(Promise.resolve(r.call(t,o)),n))}async function ME(t,i,e,s){const n=await async function(t,i,e,s){const n=null==t?void 0:t.onLicenseRequest,r=SE(i,e);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const o=await Ao(Promise.resolve(n.call(t,r)),s);if(um(o))return Cc(o).buffer;return Ei({fairplaySkdUrl:void 0},AE,o)}(t,i,e,s);return n instanceof ArrayBuffer?n:IE(n)}async function TE(t,i,e,s,n,r){const o=SE(e,n),h=await async function(t,i,e,s,n){const r=null==t?void 0:t.onLicenseResponse,o=NE(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);0;const h=await Ao(Promise.resolve(r.call(t,o)),n);return Cc(h)}(t,new T(i),o,s,r);return Cc(h)}function SE(t,i){return Ei({},DE(t),{fairplaySkdUrl:i})}function NE(t,i,e){return{url:e.lI,status:e.nI,statusText:e.uI,headers:e.aI.RN(),body:t,request:i}}function IE(t){return new Gs({zu:t.url,xI:t.method,aI:t.headers,GN:t.body,zI:t.useCredentials,YA:Rs.vI})}function DE(t){var i;return{url:t.zu,body:null!=(i=EE(t.GN))?i:null,headers:t.aI.RN(),method:t.xI,useCredentials:t.zI}}function EE(t){if(t)return"string"==typeof t?Ml(t):t instanceof ArrayBuffer?new T(t):Pl(t)?ka(t):void 0}Qi();var kE=class extends Lt{kF(t,i){return Promise.resolve(t)}async LF(t,i){const e=await this.QF(ja(t).buffer),s=this.wF(e,Ee.xN,ul.bI,i),n=await ME(this.vY,s,void 0,i);if(n instanceof ArrayBuffer)return new T(n);if(""===n.zu)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.wE.hI(n),e=await t.FN(i);return await TE(this.vY,e,s,t,void 0,i)}catch(t){throw V(t),new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,i,e,s){super(t,i,e),this.vY=s}};r(),Qi();var LE=class extends pE{async kF(t,i){if(this.cF)return this.cF;const e=this.wF(t,Ee.xN,ul.yI,i),s=await yE(this.vY,e,i);if(s instanceof T)return s;if(""===s.zu)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.wE.hI(s),r=await n.FN(i)}catch(t){throw V(t),new lu(vt.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const o=SE(e,void 0);return await bE(this.vY,new T(r),o,n,i)}async LF(t,i){const e=this.wF(t,Ee.xN,ul.AI,i),s=await ME(this.vY,e,void 0,i);if(s instanceof ArrayBuffer)return new T(s);if(""===s.zu)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.wE.hI(s),n=await t.FN(i);return await TE(this.vY,n,e,t,void 0,i)}catch(t){throw V(t),new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,i,e,s){super(t,i,e,Ee.xN),this.vY=s}};r(),Qi();var xE=class extends F{async kF(t,i){if(this.cF)return this.cF;const e=this.oY(i),s=await yE(this.vY,e,i);if(Pl(s))return s;try{const t=await this.wE.hI(s),n=await t.FN(),r=SE(e,void 0);return await bE(this.vY,new T(n),r,t,i)}catch(t){throw V(t),new lu(vt.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async LF(t,i){const e=this.wF(t,Ee.xN,ul.mI,i),s=await ME(this.vY,e,this.wY,i);if(s instanceof ArrayBuffer)return new T(s);if(""===s.zu)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.wE.hI(s),n=await t.FN(i);return await TE(this.vY,n,e,t,this.wY,i)}catch(t){throw V(t),new lu(vt.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}sY(t){var i;return this.wY=t,(null==(i=this.vY)?void 0:i.extractFairplayContentId)?Promise.resolve(this.vY.extractFairplayContentId(t)):super.sY(t)}constructor(t,i,e,s,n){super(t,i,e,s,Ee.xN),this.vY=n}},CE=class{mY(t,i,e,s){switch(t.NS.YA){case Sv.BA:return this.pY(i,e,s);case Sv.zA:return this.AY(i,e,s);case Sv.QA:return this.yY(t,i,e,s);case Sv.UA:default:return this.bY(i,e,s)}}pY(t,i,e){const s=function(t){return t.integration===tT&&Ic(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&rt.Ex.Nx(s,vu)){const n=rt.Ex.Dx(s,vu,t);return new LE(t,i,e,n)}switch(s){case jc:return new gD(t,i,e);case Sc:return new _D(t,i,e);case WM:return new wD(t,i,e);case VM:return new AD(t,i,e);case Rc:return new TD(t,i,e);case XM:return new SD(t,i,e);case Bc:return new ID(t,i,e);case KM:return new DD(t,i,e);default:return new pE(t,i,e,Ee.xN)}}AY(t,i,e){const s=t.integration;if(s&&rt.Ex.Nx(s,vv)){const n=rt.Ex.Dx(s,vv,t);return new kE(t,i,e,n)}switch(s){case jc:return new LD(t,i,e);case Sc:return new CD(t,i,e);case WM:return new jD(t,i,e);case VM:return new OD(t,i,e);case Rc:return new RD(t,i,e);case Bc:return new PD(t,i,e);case KM:return new zD(t,i,e);default:return new Lt(t,i,e)}}yY(t,i,e,s){const n=i.integration;if(n&&rt.Ex.Nx(n,Ps)){const r=rt.Ex.Dx(n,Ps,i);return new xE(t,i,e,s,r)}switch(n){case GM:return new BD(t,i,e,s);case Sc:return new UD(t,i,e,s);case ZM:return new YD(t,i,e,s);case jc:return new VD(t,i,e,s);case WM:return new GD(t,i,e,s);case VM:return new WD(t,i,e,s);case Mc:return new ZD(t,i,e,s);case Rc:return new HD(t,i,e,s);case HM:return new XD(t,i,e,s);case XM:return new qD(t,i,e,s);case Bc:return new KD(t,i,e,s);case qM:return new JD(t,i,e,s);case KM:return new $D(t,i,e,s);case JM:return new tE(t,i,e,s);case $M:return new wE(t,i,e,s);default:return new F(t,i,e,s,Ee.ON)}}bY(t,i,e){return new mE(t,i,e)}MY(t){return t.YA===Sv.zA||t.YA===Sv.BA||t.YA===Sv.QA||t.YA===Sv.UA}RS(t,i){var e;if(t.YA!==Sv.zA)return!1;if($t(null==(e=i.playready)?void 0:e.customData))return!0;const s=i.integration;return(!s||!rt.Ex.Nx(s,Ps))&&(s===jc&&new kD(i).RS)}jF(t,i){if(t.YA!==Sv.BA)return;const e=i.integration;return e&&rt.Ex.Nx(e,Ps)?void 0:e===jc?gD.jF():void 0}};r(),r(),r(),Qi(),bs();var jE="theoplayer-stored-network-info-v2",OE=25e5,_i=class{TY(t){var i;const e=null==(i=Fe.dE)?void 0:i.$b(t);if(void 0===e)return;const s=JSON.parse(e);if(void 0!==s&&void 0!==s[this.SY]){if(!this.NY(s))return s[this.SY].availableBandwidth;var n;null==(n=Fe.dE)||n.tM(t,JSON.stringify({}))}}IY(){const t=this.TY(jE);if(void 0!==t)return t;const i=this.TY("theoplayer-stored-network-info");return i?8*i:void 0}NY(t){const i=t[this.SY].storedTimestamp;return!!i&&B()-i>36e5}DY(t){this.EY=t,this.kY()}LY(){var t;return null!=this.EY||(this.EY=null!=(t=this.IY())?t:OE),this.EY}constructor(){this.SY=Oy,this.EY=void 0,this.kY=no((()=>{var t;const i={[this.SY]:{availableBandwidth:this.EY,storedTimestamp:B()}};null==(t=Fe.dE)||t.tM(jE,JSON.stringify(i))}),1e4)}};_i.Ld=new _i,r();var pt=function(t){return t[t.xY=0]="xY",t[t.CY=1]="CY",t[t.jY=2]="jY",t[t.OY=3]="OY",t[t.RY=4]="RY",t[t.PY=5]="PY",t[t.tx=6]="tx",t[t.zY=7]="zY",t[t.BY=8]="BY",t[t.ox=9]="ox",t[t.UY=10]="UY",t[t.hx=11]="hx",t[t.QY=12]="QY",t}({});r();var dr=class{get FY(){return 0}get YY(){return 0}VY(t){}};r(),r();var RE=class extends Jr{constructor(t){super("contentProtectionsTracked"),this.GY=t}},PE=class extends tu{WY(t){this.VF=t}jF(t){const i=this.VF;if(void 0!==i)return this.ZY.jF(t,i)}RS(t){const i=this.VF;return void 0!==i&&this.ZY.RS(t,i)}HY(t){const i={NS:t.NS,XY:t.XY||[],qY:t.qY,hY:t.hY},e=this.ZY.mY(i,this.VF||{},t.DF,this.OQ);return i.qY&&e.aF(i.qY),new zE(e)}KY(t){if(!t)return;dl(t,(t=>void 0!==t.DF))&&this.yo(new RE(t))}constructor(t,i=new CE){super(),this.VF=void 0,this.OQ=t,this.ZY=i}},zE=class{gF(t){return this.JY.gF(t)}_F(t,i,e){return this.JY._F(i,e)}fF(){return this.JY.fF||void 0!==this.JY.cF}kF(t,i){return this.JY.kF(t,i)}LF(t,i,e){return i&&this.JY.aF(i),this.JY.LF(t,e)}wy(){this.JY.gn()}constructor(t){this.JY=t}};r();var BE=class extends lM{$Y(t){this.tV.push(t);for(const i of t.AL)this.tt(i);this.iV(t)}eV(t){ra(this.tV,t),this.sV(t);for(const i of t.AL)this.nV(i)||this.it(i)}nV(t){for(const i of this.tV)if(i.ML(t))return!0;return!1}iV(t){t.yn(zh.Hk,this.rV),t.yn(zh.qk,this.oV)}sV(t){t.fn(zh.Hk,this.rV),t.fn(zh.qk,this.oV)}gn(){for(;this.tV.length>0;)this.eV(this.tV[0]);super.gn()}ma(){return CM(this)}constructor(t){super(),this.tV=[],this.rV=t=>{this.tt(t.Ht)},this.oV=t=>{const i=t.Ht;this.nV(i)||this.it(i)};for(const i of t)this.$Y(i)}};r(),r();var UE,QE={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},Qu=class{get ga(){return null!=this.Za||(this.Za=function(t){return{get enabled(){return t.Rt},set enabled(i){t.Rt=Fu(i)},get monitoringLivePlayback(){return t.hV},get currentLatency(){return t.Az},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.md)}}}(this)),this.Za}get Rt(){var t,i;return null!=(i=this.He)?i:Boolean(null==(t=this.aV)?void 0:t.Rt)}set Rt(t){this.He=t,this.aV&&(this.aV.Rt=t)}get hV(){var t,i;return null!=(i=null==(t=this.aV)?void 0:t.zP)&&i}get Az(){var t;return null==(t=this.aV)?void 0:t.pz}get md(){return this.aV?this.aV.BP:QE}Sa(t){this.aV=t,void 0!==this.He&&(this.aV.Rt=this.He)}tr(){this.aV=void 0,this.He=void 0}};var FE=!(!gi||!gi.TextTrack),YE=class extends gs{get Az(){}get uV(){const t=this.cz.TE,i=this.LE;return t.gr(i,.01)}get ht(){return this.Oz}get TE(){return this.cz.TE.ks()}get NE(){return this.cz.NE}set NE(t){t&&this.cz.cV(t)}get bt(){return this.wc}get LE(){return void 0!==this.lV?this.lV:this.cz.LE}set LE(t){this.CE(t)}CE(t,i){this.FE&&(this.lV=t),this.cz.Wb(t)}get ct(){return this.cz.ct}get OE(){return this.cz.OE}get lt(){return this.dV}get zE(){return this.fV}get UE(){}get FE(){return this.cz.FE}get VE(){return Ei({},{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.cz.GE())}get WE(){return this.cz.WE}set WE(t){this.cz.WE=t}get XE(){return!0}get KE(){return this.cz.KE}get $E(){return this.cz.$E}set $E(t){this.cz.$E=t}get rk(){return this.cz.gV.played}get ck(){return this._V}set ck(t){this._V=t,this.vV&&(this.vV.ck=t)}get fk(){return this.cz.fk}get _k(){return this.cz._k.ks()}get wk(){return this.cz.wk}get wV(){return this.cz.wV}get nt(){return this.Ul}get rt(){return this.Pz}get yk(){return this.cz.yk}get Tk(){return this.cz.Tk}get Nk(){return this.cz.Nk}set Nk(t){this.cz.Nk=t}get Ek(){return this.mV}get xk(){return this.cz.xk}set xk(t){this.cz.xk=t}get pV(){return this.AV}be(){this.cz.be()}ge(){this.cz.ge()}async ka(t,i,e){yi(e),this.wc=t;const s={YA:uh.QQ,WL:t.src,VN:t.type,yV:this.bV(t),ck:this._V,MV:t.crossOrigin,TV:i.metadata&&i.metadata.title};this.SV.WY(t.contentProtection),this.vV=await this.cz.$n(s),yi(e),i.textTracks&&this.NV(i.textTracks),eD(this.nt)}NV(t){for(const e of t)if(this.cz.DV()&&Ro.Ka&&FE&&!VI(e.kind,e.label)&&this.EV(e)){var i;const t=null!=(i=e.kind)?i:z.AQ;this.cz.kV(e.src,t,e.label,e.srclang,e.default)}else{if(void 0===e.src)continue;this.LV.xQ(e)}}EV(t){return!t.format||"webvtt"===t.format}async Pk(){try{await this.cz.Pk()}catch(t){}for(;!this.uV;)await this.cz.zy(Zi.mb)}Rk(){this.cz.Rk()}Bk(){return void 0!==this.cz.gV.webkitShowPlaybackTargetPicker}Uk(){this.cz.gV.webkitShowPlaybackTargetPicker&&this.cz.gV.webkitShowPlaybackTargetPicker()}Qk(){this.cz.gV.webkitShowPlaybackTargetPicker&&this.cz.gV.webkitShowPlaybackTargetPicker()}jk(){return this.cz.gV}Ck(){return this.cz.wa}_a(){return this.cz.xV}Wk(t){return this.cz.CV(t)}async tr(){this.wc=void 0,this.dV=void 0,this.fV=void 0,this.vV=void 0,await this.LV.tr(),this.cz.jV(),await this.cz.tr(),this.OV.tr(),this.ck=this._V,this.ht.tr(),this.rt.tr(),this.lV=void 0}async gn(){await this.tr(),this.Bo(),this.RV(),this.PV(),this.OV.gn(),this.cz.zV=void 0,await this.QV.BV(this.cz),this.Oz.gn(),this.Pz.gn(),this.Ul.gn(),await this.LV.gn()}FV(){this.cz.yn(Zi.so,this.Ds),this.cz.yn(Zi.wb,this.Ds),this.cz.yn(Zi.Eb,this.xc),this.cz.yn(Zi.mb,this.Ds),this.cz.yn(Zi.ub,this.Ds),this.cz.yn(Zi.Mb,this.Ds),this.cz.yn(Zi.bb,this.YV),this.cz.yn(Zi.qy,this.Ds),this.cz.yn(Zi.pb,this.Ds),this.cz.yn(Zi.kb,this.Ds),this.cz.yn(Zi.Zy,this.Ds),this.cz.yn(Zi.yb,this.VV),this.cz.yn(E.oP,this.vz),this.cz.yn(Xi.ua,this.GV),this.cz.yn(Zi.Vy,this.Ds),this.cz.yn(Zi.Yy,this.WV),this.cz.gV.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.ZV)}RV(){this.cz.fn(Zi.so,this.Ds),this.cz.fn(Zi.wb,this.Ds),this.cz.fn(Zi.Eb,this.xc),this.cz.fn(Zi.mb,this.Ds),this.cz.fn(Zi.ub,this.Ds),this.cz.fn(Zi.Mb,this.Ds),this.cz.fn(Zi.bb,this.YV),this.cz.fn(Zi.qy,this.Ds),this.cz.fn(Zi.pb,this.Ds),this.cz.fn(Zi.kb,this.Ds),this.cz.fn(Zi.Zy,this.Ds),this.cz.fn(Zi.yb,this.VV),this.cz.fn(E.oP,this.vz),this.cz.fn(Xi.ua,this.GV),this.cz.fn(Zi.Vy,this.Ds),this.cz.fn(Zi.Yy,this.WV),this.cz.gV.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.ZV)}bV(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{NS:Iv,HV:[{initDataTypes:[Iv.GA],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}XV(){const t=this.cz.gV.audioTracks,i=this.cz.gV.videoTracks;t&&(t.addEventListener("addtrack",this.qV),t.addEventListener("removetrack",this.KV),t.addEventListener("change",this.JV)),i&&(i.addEventListener("addtrack",this.$V),i.addEventListener("removetrack",this.tG),i.addEventListener("change",this.iG))}PV(){const t=this.cz.gV.audioTracks,i=this.cz.gV.videoTracks;t&&(t.removeEventListener("addtrack",this.qV),t.removeEventListener("removetrack",this.KV),t.removeEventListener("change",this.JV)),i&&(i.removeEventListener("addtrack",this.$V),i.removeEventListener("removetrack",this.tG),i.removeEventListener("change",this.iG))}nh(t){for(let i=0;i<t.V;i++){t.bL(i).rB()}}Fk(){this.cz.Fk()}Yk(){}eG(t,i){this.dV||(this.dV=i,this.fV=t,this.yo(new cl(t)))}constructor(t,i,e,s,n,r,o=new CE,h=ky()){super(),this.vV=void 0,this.wc=void 0,this.dV=void 0,this.fV=void 0,this.AV=new dr,this.mV=new Qu,this.GV=t=>{const i=t.lt,e=i.code,s=new qi(CS(e),"Something went wrong during native playback.",i),n=new P(e,s.message,i.message);this.eG(s,n)},this.xc=()=>{this.yo(new A(this.LE,this.NE))},this.YV=t=>{this.KE||(this.lV=void 0),this.yo(t)},this.vz=t=>{this.lV=void 0},this.ZV=()=>{this.yo(new GS(this.FE))},this.VV=()=>{this.Tk>0&&this.yk>0&&this.yo(new vo)},this.qV=t=>{const i=this.cz.gV.audioTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];WE(this.Oz,e)||this.Oz.tt(new FS(e))}},this.KV=t=>{const i=[],e=this.cz.gV.audioTracks;if(e){for(const t of this.Oz.AL)ZE(e,t.sB)||i.push(t);for(const t of i)this.Oz.it(t)}},this.JV=()=>{this.nh(this.Oz)},this.$V=t=>{const i=this.cz.gV.videoTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];WE(this.Pz,e)||this.Pz.tt(new VS(e))}},this.tG=t=>{const i=[],e=this.cz.gV.videoTracks;if(e){for(const t of this.Pz.AL)ZE(e,t.sB)||i.push(t);for(const t of i)this.Pz.it(t)}},this.iG=()=>{this.nh(this.Pz)},this.WV=t=>{this.yo(t),this.eG(t.errorObject,Au(t.errorObject))},this.QV=i,this.OQ=e,this.KA=h,this.cz=this.QV.sG(Ri.NI),this._V=this.cz.gV.preload,this.OV=new ko(this.cz,!0),this.OV.yn(zT,this.Ds),this.SV=new PE(e,o),this.cz.zV=this.SV,this.FV(),this.Oz=new kt,this.Pz=new kt,this.XV(),this.LV=new or(this.cz,this.OQ),this.Ul=new BE([this.cz.nt]),this.ge()}};function VE(t){var i,e;if(!(null==(i=(UE||(UE=gi&&gi.document&&gi.document.createElement("video")),e=UE).canPlayType)?void 0:i.call(e,t.type)))return!1;if(t.useNativePlayback)return!0;const s=Ro.Ka||Ro.Sg;return!t.useManagedMediaSource||!s}var GE=class{bx(t,i,e,s,n,r,o){return new YE(t,i,e,s,n,r)}nG(t,i){return VE(t)}rG(t){return mu(t)}oG(){return!1}constructor(){this.hG=pt.QY}};function WE(t,i){for(const e of t.AL)if(e.sB===i)return e}function ZE(t,i){for(let e=0;e<t.length;e++)if(t[e]===i)return!0;return!1}var HE=class{static aG(){return this.Ld}uG(t){this.cG.push(t)}get hG(){return this.lG.hG}bx(t,i,e,s,n,r,o){let h=this.lG.bx(t,i,e,s,n,r,o);for(const t of this.cG)h=t(h,e,s);return h}nG(t,i){return this.lG.nG(t,i)}rG(t){return this.lG.rG(t)}oG(){return!1}constructor(){this.lG=new GE,this.cG=[]}};function XE(t,i){return Wv(t.hG,i.hG)}HE.Ld=new HE,r(),r();var qE=class{dG(t){this.fG.push(t),this.fG.sort(XE)}async gG(t,i){for(const e of this.fG){const s=e.nG(t,i);if(pr(s)?await s:Boolean(s))return e}}constructor(){this.fG=[]}};function Gi(t){Za.Ld.dG(t)}Qi(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r();var Za=class extends qE{_G(t){this.vG=t}wG(){return this.vG}async mG(t,i){const e=this.vG;let s=!1;for(const n of t){const t=await this.gG(n,i);if(t){if(vT(n.contentProtection)||await t.rG(n.contentProtection))return{kc:n,t:t};n.contentProtection&&(s=!0)}const r=e.nG(n,i);if(pr(r)?await r:Boolean(r)){if(vT(n.contentProtection)||await e.rG(n.contentProtection))return{kc:n,t:e};n.contentProtection&&(s=!0)}}if(s)throw await Fe.gA()?new qi(vt.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported."):new qi(vt.CONTENT_PROTECTION_NOT_SUPPORTED,"The DRM configuration is not supported by this platform.");return{kc:t[0],t:e}}constructor(...t){super(...t),this.vG=HE.aG()}};Za.Ld=new Za,r();var KE=class{gn(){dn(this.Vs)}constructor(t){this.Vs=gi&&gi.document&&gi.document.createElement("div"),pc(this.Vs),t.appendChild(this.Vs)}};r(),r();var Dn=function(t){return t.QY="",t.pG="none",t.MQ="metadata",t.Mz="auto",t}({});var JE=[Xi.ua,Zi.Hy,Zi.Xy,Zi.Ob,Zi.By,Zi.Ky,Zi.$y,Zi._b,Zi.vb,Zi.Sb,Zi.Ib,E.iP,E.eP,E.sP,E.nP,E.lL,E.rP,E.oP,Zi.Yy,Zi.Vy,Zi.Zy,Zi.qy,Zi.ub,Zi.fb,Zi.so,Zi.mb,Zi.wb,Zi.pb,Zi.yb,Zi.Mb,Zi.bb,Zi.Eb,Zi.kb,Zi.Ab,Zi.gb,Zi.Tb],$E=class extends gs{get ht(){return this.Oz}get TE(){return this.ta.TE}get lt(){return this.ta.lt}get zE(){return this.ta.zE}get NE(){return this.ta.NE}set NE(t){this.ta.NE=t}get bt(){return this.AG}get LE(){return this.ta.LE}set LE(t){this.ta.LE=t}get ct(){return this.ta.ct}get OE(){return this.ta.OE}get UE(){return this.Rz}get FE(){return this.ta.FE}get VE(){return this.ta.VE}get WE(){return this.ta.WE}set WE(t){this.ta.WE=t}get XE(){return this.ta.XE}get KE(){return this.ta.KE}get $E(){return this.ta.$E}set $E(t){this.ta.$E=t}get rk(){return this.ta.rk}get ck(){return this._V}set ck(t){this._V=t,this.ta&&(this.ta.ck=this._V)}get fk(){return this.ta.fk}get _k(){return this.ta._k}get wk(){return this.ta.wk}get nt(){return this.Ul}get yk(){return this.ta.yk}get rt(){return this.Pz}get Tk(){return this.ta.Tk}get Nk(){return this.ta.Nk}set Nk(t){this.ta.Nk=t}get Ek(){return this.ta.Ek}get pV(){return this.ta.pV}Rk(){this.ta.Rk()}Pk(){const t=this.ta.Pk();pr(t)&&X(t)}zk(){return this.ka(void 0)}Ok(){}yG(){this.jz.TL=this.ta._a(),this.Oz.TL=this.ta.ht,this.Pz.TL=this.ta.rt,this.Ul.TL=this.ta.nt,this.Rz.TL=this.ta.UE,this.ta.yn(JE,this.Ds)}bG(){this.ta.fn(JE,this.Ds),this.Oz.TL=void 0,this.Pz.TL=void 0,this.Ul.TL=void 0,this.Rz.TL=void 0}Ya(){return this.MG}async ka(t,i){if(yi(i),this.MG=t,!t)return;const e=t.sources.filter(Jc);if(cS(e))return;const s=await this.TG.mG(e,t);yi(i);const n=s.kc,r=s.t,o=this.Ck(),h=yS(this);(this.SG!==r||this.lt)&&(this.bG(),await this.ta.gn(),yi(i),this.SG=r,this.ta=this.NG(r,n),function(t,i){t.WE!==i.WE&&(t.WE=i.WE);t.Nk!==i.Nk&&(t.Nk=i.Nk);t.$E!==i.$E&&(t.$E=i.$E)}(this.ta,h),St(this,h,this),this.yG()),this.ta.ck=this.ck,this.IG?this.ta.ge():this.ta.be(),await this.ta.ka(n,t,i),yi(i),this.DG(n),this.Ck()!==o&&this.yo(new SS)}DG(t){this.AG!==t&&(this.AG=t,this.yo(new TS(t)))}Bk(){return this.ta.Bk()}Uk(){this.ta.Uk()}Qk(){this.ta.Qk()}Ck(){return this.ta.Ck()}_a(){return this.jz}Fk(){this.ta.Fk()}Yk(){this.ta.Yk()}Wk(t){return this.ta.Wk(t)}async tr(){this.MG=void 0,this.DG(void 0),await this.ta.tr()}async gn(){this.Bo(),await this.tr(),await this.ta.gn(),this.Oz.gn(),this.Pz.gn(),this.Ul.gn(),this.jz.gn(),this.Rz.gn()}ge(){this.IG=!0,this.ta.ge()}be(){this.IG=!1,this.ta.be()}constructor(t,i){super(),this.SG=void 0,this.AG=void 0,this._V=Dn.pG,this.MG=void 0,this.IG=!0,this.Oz=new ol,this.Pz=new ol,this.Ul=new Ce,this.Rz=new xt,this.TG=t,this.ta=i,this.ta.ck=this.ck,this.jz=new DS(i._a()),this.yG()}};r(),r(),r(),r();var $s=function(t){return t.aa="fullscreenchange",t.fa="fullscreensupportchange",t.ua="fullscreenerror",t}({});r();var yl=class extends Jr{constructor(){super($s.ua)}},ut=($s.aa,$s.fa,$s.ua,class extends tu{get cs(){return!1}get ea(){return!1}co(){this.yo(new yl)}bo(){}gn(){this.Bo()}});r(),r();var wr=class extends Jr{constructor(){super(Yu.ua)}},tk=class extends tu{get Cz(){return!1}get xz(){return!1}async co(){this.yo(new wr)}async bo(){this.yo(new wr)}gn(){this.Bo()}},ik=class extends tu{get NE(){}set NE(t){}get bt(){}get LE(){return this.EG}set LE(t){this.CE(t)}CE(t,i){this.EG!==t&&(this.EG=t,this.kG=!0,this.yo(new Yr(this.LE)))}get VE(){return{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get WE(){return this.xG}set WE(t){this.xG!==t&&(this.xG=t,this.yo(new $e(this.LE,this.Nk)))}get KE(){return this.CG}get $E(){return this.jG}set $E(t){this.jG!==t&&(this.jG=t,this.yo(new Pu(this.LE,this.$E)))}get wk(){return this.kG}get Nk(){return this.cT}set Nk(t){this.cT!==t&&(this.cT=t,this.yo(new $e(this.LE,this.Nk)))}get xk(){return!1}set xk(t){}get pV(){return this.AV}get Az(){}ge(){}be(){}Pk(){this.CG&&(this.CG=!1,this.yo(new fi(this.LE)),this.yo(new sD(this.LE)))}Rk(){this.CG||(this.CG=!0,this.yo(new A(this.LE,this.NE)),this.yo(new Se(this.LE)))}ka(t,i){return Promise.resolve()}Bk(){return!1}Uk(){}Qk(){}Ck(){return this.Zo}_a(){return this.Qo}Wk(t){throw new b("Adding a CustomTextTrack is not supported without setting a source.")}Fk(){}Yk(){}async tr(){this.EG=0,this.kG=!1,this.Rk(),this.yo(new Xe(this.EG))}async gn(){this.Bo(),this.ht.gn(),this.nt.gn(),this.rt.gn()}constructor(...t){super(...t),this.EG=0,this.xG=!1,this.CG=!0,this.jG=1,this.kG=!1,this.cT=1,this.ht=new kt,this.TE=Mo.PP().ks(),this.ct=NaN,this.OE=!1,this.lt=void 0,this.zE=void 0,this.UE=void 0,this.FE=!1,this.XE=!0,this.rk=Mo.PP().ks(),this.ck=Dn.pG,this.fk=Fn.Nz,this._k=Mo.PP().ks(),this.wV=void 0,this.nt=new Uu,this.yk=0,this.rt=new kt,this.Tk=0,this.Ek=new Qu,this.AV=new dr,this.Zo=new ut,this.Qo=new tk}},ek=class extends ik{set OG(t){this.QV=t,this.cz=t.sG(Ri.NI)}jk(){var t;return null==(t=this.cz)?void 0:t.gV}async gn(){await super.gn(),this.cz&&(await this.QV.BV(this.cz),this.cz=void 0)}constructor(...t){super(...t),this.QV=void 0,this.cz=void 0}},sk=class extends $E{get we(){return this.ku}get xk(){return this.ta.xk}set xk(t){this.ta.xk=t}Ok(){super.Ok(),this.BG.zG()}ur(t){bS(this,t)}ar(){}Vk(t){return!1}async ka(t,i){const e=this.Ck(),s=this.jk();await super.ka(t,i),this.Ck()!==e&&this.yo(new SS),this.jk()!==s&&this.yo(new Bu)}CE(t,i){this.ta.CE(t,i)}NG(t,i){return t.bx(this.ku,this.BG,this.OQ,this.KS,this.UG,this.QG,this.FG,i)}jk(){return this.ta.jk()}bE(){return this.BG.YG.map((t=>t.gV))}async gn(){await super.gn(),this.BG.gn(),this.VG.gn()}constructor(t,i,e,s,n,r,o){const h=new ek;super(Za.Ld,h),this.ku=t,this.KS=i,this.OQ=e,this.UG=s,this.QG=n,this.FG=o,this.BG=new Qf(r,this.FG),this.BG.GG(this.ku),h.OG=this.BG,this.VG=new KE(this.ku)}};r(),r();var nk=class extends gs{get ht(){return this.WG}get TE(){return Mo.PP().ks()}get NE(){return new Date(NaN)}set NE(t){}get bt(){}get LE(){return 0}set LE(t){}CE(t,i){}get ct(){return 0}get we(){return this.ku}get OE(){return!0}get lt(){return this.ZG}get zE(){return this.HG}get UE(){}get VE(){return{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get WE(){return!1}set WE(t){}get XE(){return!0}get KE(){return!0}get $E(){return 0}set $E(t){}get rk(){return Mo.PP().ks()}get ck(){return Dn.pG}set ck(t){}get fk(){return Fn.Nz}get _k(){return Mo.PP().ks()}get wk(){return!1}get nt(){return this.XG}get yk(){return 0}get rt(){return this.WG}get Tk(){return 0}get Nk(){return 1}set Nk(t){}get Ek(){return this.mV}get xk(){return!1}set xk(t){}Vk(t){return!0}be(){}Pk(){throw this.yo(new cl(this.HG)),this.ZG}Rk(){}Ya(){}async ka(t,i){throw yi(i),this.yo(new cl(this.HG)),this.ZG}ge(){}zk(){return Promise.resolve()}jk(){}Ck(){return this.Zo}_a(){return this.Qo}bE(){return[]}Ok(){}ur(t){}ar(){}get FE(){return!1}Bk(){return!1}Uk(){}Qk(){}Fk(){}Yk(){}Wk(t){}tr(){return Promise.resolve()}gn(){return this.Bo(),this.WG.gn(),this.XG.gn(),Promise.resolve()}constructor(t,i,e){super(),this.Zo=new ut,this.Qo=new tk,this.mV=new Qu,this.ku=t,this.ZG=i,this.WG=new kt,this.XG=new Uu,this.HG=e}};function rk(t){if(t&&Z(t))return Ei({},t,{integration:ok(t.integration),fairplay:dk(t.fairplay),widevine:hk(t.widevine),playready:ak(t.playready),clearkey:fk(t.clearkey),aes128:gk(t.aes128),integrationParameters:_k(t.integrationParameters),preferredKeySystems:vk(t.preferredKeySystems),useOipfDrmAgent:Fu(t.useOipfDrmAgent)})}function ok(t){if(Ic(t))return t}function hk(t){if(t&&Z(t))return{persistentState:uk(t.persistentState),distinctiveIdentifier:uk(t.distinctiveIdentifier),audioRobustness:ck(t.audioRobustness),videoRobustness:ck(t.videoRobustness),licenseAcquisitionURL:Ic(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:lk(t.licenseType),headers:t.headers,useCredentials:!!Sh(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:Ic(t.certificate)||um(t.certificate)?t.certificate:void 0}}function ak(t){if(!t)return;const i=hk(t);if(!i)return;return Ei({},i,{customData:Ic(t.customData)?t.customData:void 0})}function uk(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function ck(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function lk(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function dk(t){if(!t)return;const i=hk(t);if(!i)return;return Ei({},i,{certificateURL:Ic(t.certificateURL)?t.certificateURL:void 0})}function fk(t){if(!t)return;const i=hk(t);if(!i)return;const e=Zr(t.keys)?t.keys.map((t=>function(t){if(!t||!Z(t))return;const i=t.id,e=t.value;if(!Ic(i)||!Ic(e))return;return{id:i,value:e}}(t))).filter($t):void 0;return Ei({},i,{keys:e})}function gk(t){if(Z(t))return{useCredentials:Sh(t.useCredentials)?t.useCredentials:void 0}}function _k(t){if(Z(t))return t}function vk(t){return t&&Zr(t)?t.map((t=>NT(t))).filter($t):[vu,vv,Ps]}r(),r(),r(),r();var wk={bt:void 0,LE:0,ct:NaN,OE:!1,lt:void 0,zE:void 0,WE:!1,KE:!0,$E:1,fk:Fn.Nz,wk:!1,yk:0,Tk:0,Nk:1};r(),Qi();var Si=function(t){return t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads",t.UPLYNK="uplynk",t}({}),mk=class{get qG(){return this.KG}JG(t){const i=this.KG.filter((i=>i.$G(t)));if(i.length>1)0;else if(0===i.length)throw b("Unknown ad integration: "+t.integration);return i[0]||null}tW(t){this.KG.push(t)}constructor(){this.KG=[]}};mk.Ld=new mk,r(),r(),r(),r();var he=function(t){return t.oP="PLAYING",t.iW="PAUSED",t.eW="SEEK",t.sW="STALLED",t.nW="FAILED",t.rW="INITIAL_BUFFERING",t.oW="NO_ACCESS",t}({}),nr=function(t){return t.hW="HTTP_REQUEST_STATUS_CODE_1XX",t.aW="HTTP_REQUEST_STATUS_CODE_2XX",t.uW="HTTP_REQUEST_STATUS_CODE_3XX",t.cW="HTTP_REQUEST_STATUS_CODE_4XX",t.lW="HTTP_REQUEST_STATUS_CODE_5XX",t.dW="BUFFER_LENGTH",t.fW="BYTES_RECEIVED",t.gW="SEGMENT_READ_BITRATE",t._W="SEGMENT_PROFILE_BITRATE",t.vW="VIDEO_PROFILE_BITRATE",t.wW="NUMBER_OF_FRAMES_DROPPED",t.mW="PLAYBACK_POSITION",t.pW="NUMBER_OF_FRAMES_DECODED",t.AW="PLAYBACK_DELTA_TO_ORIGIN",t.yW="STREAM_DELTA_TO_ORIGIN",t.bW="ORIGIN_TIMESTAMP",t}({}),pk=function(t){return t.MW="MANIFEST_URI",t.TW="ASSET_DURATION",t.NW="NUMBER_OF_CONTENT_PROFILES",t.IW="CDN",t.DW="CONTENT_TITLE",t.EW="SERVICE_NAME",t.kW="CONTENT_TYPE",t.LW="CONTENT_DESCRIPTION",t}({}),Ak=function(t){return t.xW="shutdown_normal_shutdown",t}({}),yk=function(t){return t.jW="session/",t.OW="content/",t.RW="internalError/",t.PW="drmError/",t.zW="caError/",t.BW="networkError/",t}({}),bk=class{get code(){return this.category+this.statusCode}constructor(t,i){this.category=t,this.statusCode=i}},Mk=class extends tu{};r(),r(),r();var Tk=function(t){return t.PAUSE="UW",t.RESUME="QW",t}({}),Sk=class extends Jr{constructor(){super("FW")}},Nk=class extends tu{YW(){this.VW=!0}GW(){}gn(){this.VW=!1,this.WW.fn(Tk.PAUSE,this.ZW),this.WW.fn(Tk.RESUME,this.XW)}qW(){return isFinite(this.ta._d())}constructor(t,i){super(),this.ta=t,this.WW=i,this.VW=!1,this.ZW=()=>{this.GW(),this.VW=!1},this.XW=()=>{this.VW=!0},this.WW.yn(Tk.PAUSE,this.ZW),this.WW.yn(Tk.RESUME,this.XW)}},Ik=class extends Nk{YW(){super.YW(),this.KW()}gn(){this.JW(),super.gn()}KW(){this.ta.yn(E.rP,this.$W),this.ta.yn(Zi.wb,this.tZ),this.ta.yn(E.oP,this.iZ),this.ta.yn(Zi.Mb,this.eZ),this.ta.yn(Zi.bb,this.sZ)}JW(){this.ta.fn(E.rP,this.$W),this.ta.fn(Zi.wb,this.tZ),this.ta.fn(E.oP,this.iZ),this.ta.fn(Zi.Mb,this.eZ),this.ta.fn(Zi.bb,this.sZ)}nZ(){this.rZ=!0}oZ(){const t=this.ta.PE(),i=new bk(yk.RW,String(t.code));this.hZ(he.nW,i,t.message)}aZ(t){this.VW&&(this.WW.uZ(t),this.yo(new Sk))}hZ(t,i,e){this.WW.cZ(t,i,e),this.yo(new Sk)}lZ(t,i){this.WW.dZ(t,i)}constructor(...t){super(...t),this.rZ=!1,this.fZ=!1,this.gZ=!1,this.$W=()=>{this.fZ&&!this.gZ&&this.aZ(he.sW)},this.iZ=()=>{this.ta.KE||(this.fZ||this.lZ(new bk(yk.OW,"firstFrameDisplayed"),"now"),this.fZ=!0,this.aZ(he.oP))},this.tZ=()=>{this.ta.KE&&(this.fZ=!0,this.aZ(he.iW))},this.eZ=()=>{this.rZ&&(this.gZ=!0,this.rZ=!1,this.aZ(he.eW))},this.sZ=()=>{this.gZ=!1,this.ta.KE&&this.aZ(he.iW)}}};r();var Dk=class extends Nk{YW(){super.YW(),this._Z(),this.KW()}gn(){this.JW(),super.gn()}KW(){this.ta.rt.yn(hs.aa,this._Z),this.ta.wZ.vZ(this.mZ),this.ta.yn(Zi.Zy,this.pZ)}JW(){this.ta.rt.fn(hs.aa,this._Z),this.ta.wZ.AZ(this.mZ),this.ta.fn(Zi.Zy,this.pZ)}yZ(t){t.serviceName&&this.bZ(pk.EW,t.serviceName),t.cdn&&this.bZ(pk.IW,t.cdn),t.contentTitle&&this.bZ(pk.DW,t.contentTitle),t.contentType&&this.bZ(pk.kW,t.contentType),t.contentDescription&&this.bZ(pk.LW,t.contentDescription)}bZ(t,i){this.VW&&this.WW.MZ(t,i)}constructor(...t){super(...t),this.pZ=()=>{this.qW()&&this.bZ(pk.TW,x.round(this.ta._d()))},this.mZ=t=>{"manifest"===t.request.type&&this.bZ(pk.MW,t.url)},this._Z=()=>{const t=dl(this.ta.rt.AL,(t=>t.Rt));t&&this.bZ(pk.NW,t.UL.V)}}};r();var Ek=class extends Nk{YW(){super.YW(),this.TZ=this.ta.VE.Bz,this.SZ=this.ta.VE.Qz,this.KW(),this.NZ.push(v(this.IZ,1e3))}GW(){super.GW(),this.DZ()}gn(){this.DZ(),this.JW(),this.NZ.forEach(m),nt(this.NZ),super.gn()}KW(){this.ta.wZ.vZ(this.EZ),this.ta.yn(Zi.Ib,this.kZ)}JW(){this.ta.wZ.AZ(this.EZ),this.ta.fn(Zi.Ib,this.kZ)}LZ(){this.DZ()}xZ(t){this.CZ+=t,this.jZ(nr.fW,this.CZ)}OZ(t,i){const e=this.RZ.get(i)||0;this.jZ(t,e)}PZ(){const t=this.ta.VE.Bz-this.TZ;this.jZ(nr.wW,t)}zZ(){const t=this.ta.VE.Qz-this.SZ;this.jZ(nr.pW,t)}BZ(){const t=_i.Ld.LY();this.jZ(nr.gW,dm(t))}UZ(t){this.jZ(nr._W,dm(t)),this.jZ(nr.vW,dm(t))}DZ(){if(!this.qW())return;const t=x.round(io(this.ta.xE()));this.jZ(nr.mW,t)}QZ(){const t=Mo.xn(this.ta.SE()),i=this.ta.xE(),e=t.CP(i),s=e?io(e.jn(0)-i):0;this.jZ(nr.dW,s)}jZ(t,i){this.VW&&this.WW.FZ(t,i)}constructor(...t){super(...t),this.RZ=ll(),this.CZ=0,this.TZ=0,this.SZ=0,this.NZ=[],this.IZ=()=>{this.PZ(),this.zZ(),this.QZ()},this.kZ=t=>{t.RI===Ri.NI&&(this.xZ(t.Yz),this.BZ(),this.UZ(t.YZ),this.DZ())},this.EZ=t=>{const i=t.status.toString()[0],e=this.RZ.get(i)||0;this.RZ.set(i,e+1),this.OZ(nr.hW,"1"),this.OZ(nr.aW,"2"),this.OZ(nr.uW,"3"),this.OZ(nr.cW,"4"),this.OZ(nr.lW,"5")}}};r();function kk(t){return t&&t.integration===Rk}function Lk(t){if(!Ic(t.asset))throw new k("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!Ic(t)&&("live"===t||"vod"===t)}(t.streamType))throw new k("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!Ic(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new k("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!Ic(t.cdn))throw new k("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!Ic(t.contentTitle))throw new k("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!Ic(t.contentType))throw new k("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!Ic(t.contentDescription))throw new k("Agama source configuration: expected 'contentDescription' to be a string");return t}function xk(t){if(!Ic(t.config))throw new k("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!Ic(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new k("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!Ic(t.application))throw new k("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!Ic(t.applicationVersion))throw new k("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!Ic(t.userAccountID))throw new k("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!Ic(t.deviceID))throw new k("Agama player configuration: expected 'deviceID' to be a string");return t}function Ck(){let t="00000000-0000-0000-0000-000000000000",i=s.navigator,e=s.screen,n=""+i.mimeTypes.length;n+=i.userAgent.replace(/\D+/g,""),n+=i.plugins.length,n+=e.height||"",n+=e.width||"",n+=e.pixelDepth||"",n+=x.floor(1e3*x.random());let r=function(t){let i,e,s=0;if(0===t.length)return"0";for(i=0;i<t.length;i++)e=t.charCodeAt(i),s=(s<<5)-s+e,s|=0;return x.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function jk(t,i,e){const s=i,n=function(t,i){return iS(i)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,i){let e=t.DsPlaylistType.VOD;"live"===i&&(e=t.DsPlaylistType.LIVE);return e}(t,e.streamType);return{asset:e.asset,playlistType:r,protocol:n,uri:s.src}}r();var an=function(t){return t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected",t}({}),Ok=class{VZ(){this.ta.fn(Xi.ua,this.GZ),this.WZ(),this.ZZ(),this.WW.HZ()}XZ(){this.ta.qZ.ga.chromecast&&this.ta.qZ.ga.chromecast.addEventListener("statechange",this.KZ)}ZZ(){this.ta.qZ.ga.chromecast&&this.ta.qZ.ga.chromecast.removeEventListener("statechange",this.KZ)}JZ(){return void 0!==this.ta.qZ.ga.chromecast&&this.ta.qZ.ga.chromecast.state===an.CONNECTED}gn(){this.ta.fn(Zi.ro,this.ho),this.ta.fn(Zi.so,this.$Z),this.ta.fn(Zi.qy,this.tH),this.VZ(),this.WW.gn()}iH(){this.eH||(this.eH=new Ik(this.ta,this.WW)),this.sH||(this.sH=new Ek(this.ta,this.WW)),this.nH||(this.nH=new Dk(this.ta,this.WW))}YW(){this.eH&&(this.eH.YW(),this.eH.yn("FW",this.rH)),this.sH&&this.sH.YW(),this.nH&&this.nH.YW()}WZ(){this.eH&&(this.eH.fn("FW",this.rH),this.eH.gn(),this.eH=void 0),this.sH&&(this.sH.gn(),this.sH=void 0),this.nH&&(this.nH.gn(),this.nH=void 0)}yZ(t){this.nH&&this.nH.yZ(t)}oH(){this.eH&&this.eH.oZ()}nZ(){this.eH&&this.eH.nZ()}constructor(t,i,e){this.ta=t,this.WW=i,this.ho=()=>{this.hH(),this.tH()},this.hH=()=>{const t=this.ta.Ya(),i=t&&t.analytics;this.aH=function(t){void 0===t&&(t=[]);for(let i of t)if(kk(i))return Lk(i)}(i)},this.tH=()=>{this.VZ(),this.ta.fn(Zi.so,this.$Z),!this.JZ()&&this.WW.uH()&&this.ta.bt&&this.aH&&(this.iH(),this.ta.KE||this.ta.OE?this.ta.yn(Zi.so,this.$Z):this.$Z())},this.$Z=()=>{this.ta.bt&&this.aH&&(this.WW.cH(this.ta.bt,this.aH),this.YW(),this.yZ(this.aH),this.XZ(),this.ta.yn(Xi.ua,this.GZ),this.ta.fn(Zi.so,this.$Z))},this.KZ=()=>{this.JZ()&&this.VZ()},this.GZ=()=>{this.oH(),this.VZ()},this.rH=()=>{this.sH&&this.sH.LZ()};const s=function(t){void 0===t&&(t=[]);for(const i of t)if(kk(i))return xk(i)}(e.analytics);s&&this.WW.lH()&&(this.WW.Ok(s),this.WW.uH()?(this.WW.dH(),this.ta.yn(Zi.ro,this.ho),this.ta.yn(Zi.qy,this.tH)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},Rk="agama";r(),r();var Pk=function(t){return t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t}({});r();var me=function(t){return t.NONE="",t.PM360="360",t.PM180="180",t}({});function zk(t){switch(t){case"":return Pk.NONE;case"horizontal":return Pk.HORIZONTAL;case"vertical":return Pk.VERTICAL;default:throw new k}}function Bk(t,i){if(i)return me.PM360;if(null==t)return me.NONE;switch(t){case"":return me.NONE;case"360":return me.PM360;case"180":return me.PM180;default:throw new k("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}r();var Fo=function(t){return t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event",t}({});r();var Uk="https://content.uplynk.com";function Qk(t){if(!t)return!0;const i=!function(t){return Tt(t)||Ia(t)&&Tt(t[0])}(t.sources)||cS(t.sources),e=!t.ads||Fk(t.ads),s=""!==t.poster&&!t.poster;return i&&e&&s}function Fk(t){return!t||Zr(t)&&0===t.length}function Yk(t){if(t&&t.sources)return Vk(t.sources)}function Vk(t){return Ic(t)?wa(t):aS(t)?t.type||t.src&&wa(t.src):Ia(t)&&t.length>0?Vk(t[0]):void 0}function Gk(t){if(t&&t.sources)return Wk(t.sources)}function Wk(t){return Ic(t)?t:aS(t)?t.src:Ia(t)&&t.length>0?Wk(t[0]):void 0}function Zk(t,i,e){return sS(t)?function(t,i,e){let s=Ei({},lS(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:zc.UPLYNK,id:"",prefix:Uk,preplayParameters:{},playbackUrlParameters:{},assetType:Fo.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(Ic(t))return t;if(Ia(t)&&Ic(t[0]))return t;if(function(t){return Z(t)&&Ic(t.userId)&&(Ia(t.externalId)||Ic(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return Fo.CHANNEL;case"event":return Fo.EVENT;default:return Fo.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=Fu(t.contentProtected));t.assetInfo?s.assetInfo=Fu(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=Q(t.prefix)||Uk);return s.ping=function(t,i){let e=!1,s=!1,n=!1;i?(e=!!Sh(i.adImpressions)&&i.adImpressions,s=!!Sh(i.freeWheelVideoViews)&&i.freeWheelVideoViews,n=Sh(i.linearAdData)?i.linearAdData:t!==Fo.ASSET):t!==Fo.ASSET&&(n=!0);return{adImpressions:e,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=Xk(s,t),s=Kk(s,i,e),s=qk(s,t,e),s}(t,i,e):rS(t)?function(t,i,e){var s;return Ei({},Hk(t,i,e),{integration:zc.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,i,e):nS(t)?function(t,i,e){return Ei({},Hk(t,i,e),{type:"theolive"})}(t,i,e):Jt(t)?function(t,i,e){return Ei({},Hk(t,i,e),{type:$n.hx,src:t.streamName||t.src,streamAccountId:t.streamAccountId,subscriberToken:t.subscriberToken,connectOptions:tL(t.connectOptions),apiUrl:t.apiUrl})}(t,i,e):Hk(t,i,e)}function Hk(t,i,e){let s=dS();const n=i&&(i.contentProtection||i.drm);if(Ic(t)){if(s.src=t,s.type=wa(t),n){const t=rk(n);s.contentProtection=DT(t)}}else if(aS(t)||eS(t)||Jt(t)){s.src=t.src,s.type=t.type||wa(t.src),s.isAdvertisement=t.isAdvertisement;const i=uS(t)?t.hesp:void 0;void 0!==i&&(s.hesp=i);rS(t)&&(s.integration=t.integration);const e=rk(t.contentProtection||t.drm||n);s.contentProtection=DT(e),t.ssai&&(s.ssai=YM(t.ssai)),s=Xk(s,t)}return s=Kk(s,i,e),s=qk(s,t,e),s}function Xk(t,i){var e,s;i.useCredentials?t.crossOrigin=pu.JL:i.crossOrigin&&(t.crossOrigin=$T(i.crossOrigin)),Ic(i.timeServer)&&(t.timeServer=i.timeServer),i.liveOffset&&(t.liveOffset=i.liveOffset),i.hlsDateRange&&(t.hlsDateRange=i.hlsDateRange),i.lowLatency&&(t.lowLatency=Fu(i.lowLatency)),i.useNativePlayback&&(t.useNativePlayback=Fu(i.useNativePlayback)),i.useManagedMediaSource&&(t.useManagedMediaSource=Fu(i.useManagedMediaSource)),i.dash&&(t.dash=ET(i.dash)),i.hls&&(t.hls=kT(i.hls)),i.lcevc&&(t.lcevc=Fu(i.lcevc)),i.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=_S(i.ignoreEmbeddedTextTrackTypes)),i.latencyConfiguration&&(t.latencyConfiguration=WT(i.latencyConfiguration)),t.seamlessSwitchStrategy=ZT(null!=(s=i.seamlessSwitchStrategy)?s:null==(e=i.dash)?void 0:e.useSeamlessPeriodSwitch);const n=oo(i.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=oo(i.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function qk(t,i,e){return t.abr=CT(Ic(i)?void 0:xT(i.abr),null==e?void 0:e.abr),t}function Kk(t,i,e){var s;const n=i&&i.timeServer;return e&&e.liveOffset&&!$t(t.liveOffset)&&(t.liveOffset=e.liveOffset),e&&e.hlsDateRange&&!$t(t.hlsDateRange)&&(t.hlsDateRange=e.hlsDateRange),t.crossOrigin===pu.EI&&(null==i||null==(s=i.vr)?void 0:s[360])&&(t.crossOrigin=pu.KL),t.useCredentials=t.crossOrigin===pu.JL,Ic(n)&&!t.timeServer&&(t.timeServer=n),t}function Jk(t){const i={src:""};if(t&&t.src){if(i.src=Q(t.src),"default"in t&&(i.default=Fu(t.default)),i.kind=function(t){const i=String(t||"").toLowerCase();return OI(i)?i:i?"metadata":"subtitles"}(t.kind),KT(t.format)&&(i.format=t.format),"srclang"in t){const e=t.srclang;"string"==typeof e&&""!==e&&(i.srclang=e)}if("label"in t){const e=t.label;"string"==typeof e&&""!==e&&(i.label=e)}}return i}function $k(t,i){if(Z(t))try{return i.JG(t).fH(t)}catch(t){return}}function tL(t){if(null==t)return t;if(!Z(t))throw new b("connectOptions must be an object");return t}function tl(t,i,e){if(void 0===e&&(e=mk.Ld),Qk(t))return{sources:[dS()]};const s=oi(t);if(s.sources=function(t,i,e){if(Tt(t))return[Zk(t,i,e)];if(Ia(t)&&Tt(t[0])){const s=[];for(const n of t)s.push(Zk(n,i,e));return s}return[dS()]}(s.sources,s,i),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,i){if(!Ia(t))return[];const e=[];for(let s of t)s=$k(s,i),s&&e.push(s);return e}(s.ads,e);0===t.length?delete s.ads:s.ads=t}const n=!cS(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!Ia(t))return[];const i=[];for(let e of t)e=Jk(e),""!==e.src&&i.push(e);return i}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=Q(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const i=t||{};return i.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(i.stereoMode),{panoramaMode:Bk(i.panoramaMode,Boolean(i[360])),stereoMode:i.stereoMode?zk(i.stereoMode):Pk.NONE,nativeVR:Boolean(i.nativeVR)}}(s.vr));if("analytics"in s||(null==i?void 0:i.analytics)){const t=gS(s.analytics),e=i&&i.analytics||[];s.analytics=function(t,i){const e=oi(t);for(const s of i){const i=!t.some((t=>t.integration===s.integration));i&&s.integration!==Rk&&e.push(s)}return e}(t,e)}return"mutedAutoplay"in s&&(s.mutedAutoplay=pS(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=bM(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}Qi(),r(),r(),r();var Vc=function(){function t(t){this.gH=t}return t.prototype._H=function(t){var i,e,s,n,r,o,h,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.gH.charAt(64);for(i=0;i<t.length;i+=4)e=(h=this.gH.indexOf(t.charAt(i))<<18|this.gH.indexOf(t.charAt(i+1))<<12|(r=this.gH.indexOf(t.charAt(i+2)))<<6|(o=this.gH.indexOf(t.charAt(i+3))))>>>16&255,s=h>>>8&255,n=255&h,a[i/4]=String.fromCharCode(e,s,n),64===o&&(a[i/4]=String.fromCharCode(e,s)),64===r&&(a[i/4]=String.fromCharCode(e));return a.join("")},t.prototype.vH=function(t,i){var e,s,n,r,o,h,a,u=[],c="";if((h=t.length%3)>0)for(;h++<3;)c+=this.gH.charAt(64),t+="\0";for(h=0;h<t.length;h+=3)s=(e=t.charCodeAt(h)<<16|t.charCodeAt(h+1)<<8|t.charCodeAt(h+2))>>18&63,n=e>>12&63,r=e>>6&63,o=63&e,u[h/3]=this.gH.charAt(s)+this.gH.charAt(n)+this.gH.charAt(r)+this.gH.charAt(o);return a=(a=u.join("")).slice(0,a.length-c.length),i||(a+=c),a},t.lh=new t(function(){var t,i,e,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(i=r[t],e=0;e<i.length;e+=1)s=i.charAt(e),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.wH=new t(function(t){return t._H("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.lh)),t}();function iL(t){return"string"==typeof t}function eL(t){return"number"==typeof t}r(),r(),r();var sL={}.toString;var nL,rL=Array.isArray||function(t){return"[object Array]"===sL.call(t)};function Gc(t,i){return rL(t)&&t.every(i)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(nL||(nL={}));var oL,hL=_.keys(nL).map((function(t){return nL[t]}));function aL(t){return-1!==hL.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads",t.MILLICAST="millicast"}(oL||(oL={}));var uL,cL=_.keys(oL).map((function(t){return oL[t]}));function lL(t){return-1!==cL.indexOf(t)}function dL(t){try{var i=Vc.wH._H(t),e=JSON.parse(i);if(!function(t,i){var e,s=function(t){return"object"==typeof t&&null!==t}(t),n=iL(t.key),r=iL(t.customer_id),o=eL(t.generation_date),h=eL(t.expiration_date),a=Gc(t.domains_page,iL),u=Gc(t.domains_source,iL),c=Gc(t.sdks,i?aL:iL),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?e=Gc(t.features,i?lL:iL):(e=!0,t.features=[]);if(!(s&&n&&r&&o&&h&&a&&u&&c&&l&&e))return!1;return!0}(e,!1))throw new b("The provided license could not be decoded correctly.");return e}catch(t){throw new b("The provided license could not be decoded correctly.")}}function fL(){return uL||(uL={zu:Yf.href,mH:gi.parent&&gi.parent!==s,pH:_L()}),uL}ld(),bs();var gL=["http:","https:","ftp:","ws:","wss:"];function _L(){var t;try{if(null==gi?void 0:gi.top)return gi.top.location.href}catch(t){}return null==gi||null==(t=gi.document)?void 0:t.referrer}var vL=function(t){return t[t.AH=0]="AH",t[t.yH=1]="yH",t[t.bH=2]="bH",t}({}),wL=class{constructor(t,i,e,s,n=[],r="",o=Date.now(),h=[],a=!0){this.MH=t,this.TH=i,this.SH=e,this.NH=s,this.IH=n,this.DH=r,this.EH=o,this.kH=h,this.LH=a}},mL=function(t){return t.yH="expired",t.xH="invaliddomain",t.CH="invalidsource",t.jH="invalidfeature",t.ua="error",t}({}),pL=class t{OH(t,i){let e=[];Tt(t.sources)?e=[t.sources]:Ia(t.sources)&&(e=t.sources),this.RH(t,e,i),this.PH(e,i)}RH(t,i,e){if(Qk(t)||0===e.SH.length||SL(e.SH))return;if(!i.every((t=>this.zH(t,e)))){const t="invalidsource",i=Lu.BH(t);throw new qi(yL(t),i)}}PH(t,i){for(const e of t)aS(e)&&uS(e)&&!e.bypassLicense&&this.UH([oL.HESP],i)}QH(i){return this.FH(i.kH)&&this.YH(i)?t.VH(i.NH)?0:1:2}UH(t,i){for(const e of t)if(!Qa(i.IH,e)){const t="invalidfeature",i=Lu.GH(t,e);throw new qi(yL(t),i)}}FH(t){return 0===t.length||t.some((t=>this.WH(t)))}WH(t){return"web"===function(t){switch(t){case nL.ANDROID:return rn.Md;case nL.ANDROIDTV:case nL.FIRETV:return rn.Td;case nL.IOS:return rn.Nd;case nL.TVOS:return rn.Id;case nL.CHROMECAST:case nL.CHROMECASTCAF:return rn.Dd;case nL.THEOLIVEWEB:return rn.Ed;default:return rn.hd}}(t)}static VH(t){const i=Number(new Date);return!!t&&i<=t}YH(t){return!(this.ZH&&0!==t.TH.length&&!SL(t.TH))||!!(this.ZH&&this.HH(t.TH)&&this.XH(t.TH))}HH(t){return NL(this.GM.zu,t)}XH(t){if(!this.GM.mH)return!0;if(this.qH)return!0;const i=this.KH();return!!i&&NL(i,t)}KH(){if(!this.GM.mH)return;const t=ql.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.GM.pH?this.GM.pH:void 0}zH(i,e){return!!t.JH(i,e.SH)}static JH(t,i){return NL(this.$H(t),i)}static $H(t){return Ic(t)?t:aS(t)&&t.src||""}constructor(t,i,e){this.qH=t,this.tX=i,this.GM=e,this.ZH=DL(this.GM)}},AL=class{QH(t){return 0}OH(t,i){}UH(t,i){}};function yL(t){switch(t){case"invaliddomain":return vt.LICENSE_INVALID_DOMAIN;case"invalidsource":return vt.LICENSE_INVALID_SOURCE;case"expired":return vt.LICENSE_EXPIRED;case"invalidfeature":return vt.LICENSE_INVALID_FEATURE;case"error":return vt.LICENSE_ERROR}}var bL="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",ML=di((()=>{const t="\\.",i="(\\*|"+bL+")";return new RegExp("ip-range\\("+i+t+i+t+i+t+i+"\\)")}));function TL(t,i){let e=t,s=i;if(!e)return!1;if(s=s.trim(),"*"===s)return!0;if(e=e.replace(/\.+$/,""),s===e)return!0;if(I(s,"ip-range(")){const t="\\.",i=s.match(ML()),n=t=>"*"===t?"("+bL+")":t;if(null!==i&&5===i.length){const s=new RegExp("^"+i[1]+t+n(i[2])+t+n(i[3])+t+n(i[4])+"$");return null!==e.match(s)}}return s="."+s,-1!==e.indexOf(s,e.length-s.length)}function SL(t){return t.some((t=>"*"===t))}function NL(t,i){const e=Fe.Ah(t);if(!IL(e))return!0;for(const s of i){if(TL(e.hostname,s))return!0;if(TL(wb(t),s))return!0}return!1}function IL(t){return-1!==gL.indexOf(t.protocol)}function DL(t){const i=Fe.Ah(t.zu);return IL(i)&&!function(t){return TL(t.hostname,"localhost")}(i)&&!function(t){return TL(t.hostname,"theoplayer.doubleclick.net")}(i)}var Lu=class{static GH(t,i){return"The requested feature '"+i+"' is not available with the license for this player."}static BH(t){return"invaliddomain"===t?this.iX:"invalidsource"===t?this.eX:"expired"===t?this.sX:"invalidfeature"===t?this.nX:this.rX}};Lu.rX="The license for this player is invalid.",Lu.sX="The usage license for this video player has expired.",Lu.iX="The current domain is incompatible with the license for this player.",Lu.eX="The provided video source is incompatible with the license for this player.",Lu.nX="The requested feature is not available with the license for this player.",r(),r();var Wc=function(t){return t[t.oX=1]="oX",t[t.hX=4]="hX",t[t.aX=5]="aX",t[t.uX=9]="uX",t}({});function EL(t){const i=[t.mR,t.cX,t.lX];switch(t.cX){case 1:i.push(t.WL);break;case 4:i.push(t.LE),i.push(t.lt);break;case 5:i.push(t.lt);break;case 9:i.push(t.YA)}return i}r();var hn=new Array(256);for(let t=0;t<256;t+=1)hn[t]=(t<16?"0":"")+t.toString(16);function kL(){const t=B(),i=(4294967296*x.random()|0)+t&3029421624,e=(4294967296*x.random()|0)+t&3595553209,s=(4294967296*x.random()|0)+t&1130486254,n=(4294967296*x.random()|0)+t&1284287105;return hn[255&i]+hn[i>>>8&255]+hn[i>>>16&255]+hn[i>>>24&255]+"-"+hn[255&e]+hn[e>>>8&255]+"-"+hn[e>>>16&15|64]+hn[e>>>24&255]+"-"+hn[63&s|128]+hn[s>>>8&255]+"-"+hn[s>>>16&255]+hn[s>>>24&255]+hn[255&n]+hn[n>>>8&255]+hn[n>>>16&255]+hn[n>>>24&255]}function LL(t){return lm(t.replace(/-/g,""))}function xL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const i=16*x.random()|0;return("x"===t?i:3&i|8).toString(16)}))}function CL(){return Fe.Og()}r(),r(),Qi(),r();var jL,OL="theoplayer-session-id";function RL(){if(!jL){const t=xy.$b(OL);t?jL=t:(jL=kL(),xy.tM(OL,jL))}return jL}r(),r();var PL=/[^\x00-\x7E]/g;function zL(t){return"\\u"+_c(t.charCodeAt(0).toString(16),4,"0")}var BL="https://license.theoplayer.com";function UL(t){const i=function(t){const i=[];return function(t,i,e){return JSON.stringify(t,i,e).replace(PL,zL)}(t,((t,e)=>{if(Z(e)){if(-1!==i.indexOf(e))return null;i.push(e)}return e}))}(function(t){return[t.dX,t.fS,t.MH,t.cj,t.fX,t.gX,t._X.map(EL)]}(t));return Vc.wH.vH(i)}var QL=class{get _X(){return this.J_}vX(){return Boolean(this.fX)}get fX(){return this.wX}async mX(t){if(!(await this.AX.pX()).LH)return;const i={cX:Wc.oX,lX:B(),WL:t};await this.lZ(i)}async yX(t){if(!(await this.AX.pX()).LH)return;const i={cX:Wc.uX,lX:B(),YA:t};await this.lZ(i)}async bX(t,i){const e={cX:Wc.hX,lX:B(),LE:i,lt:t};await this.lZ(e)}async MX(t){const i={cX:Wc.aX,lX:B(),lt:t};await this.lZ(i)}async lZ(t){const i=await this.AX.pX();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.TX.vH(i.MH)&&t.cX!==Wc.aX||(t.cX===Wc.oX?this.SX():this.vX()||this.SX(),t.mR=this.bT++,this.J_.push(t),!function(t){return t===Wc.oX||t===Wc.aX}(t.cX)?this.J_.length>this.NX&&await this.IX():await this.DX())}async DX(t){for(void 0===t&&(t=!1);this.J_.length>0;)await this.IX(t)}async EX(t){const i=await this.AX.pX();return{dX:B(),fS:RL(),MH:this.TX.vH(i.MH)||"dev",cj:this.ZT,fX:this.wX,gX:this.kX,_X:t}}async IX(t){void 0===t&&(t=!1);const i=this.J_.splice(0,this.LX),e=await this.EX(i);t?this.YI(e):this.xX(e),this.CX=CL()}async xX(t){const i=UL(t),e=new Gs({zu:BL,GN:i,zI:!1,oI:Ee.ON,aI:{"Content-Type":Ai.HF},CI:4e3,xI:Ve.POST});try{const t=await this.OQ.hI(e);await t.FN()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+i}}YI(t){const i=UL(t);this.OQ.YI({zu:BL,GN:i,VN:Ai.HF})}SX(){this.vX()&&this.DX(),this.wX=kL(),this.bT=0}gn(){Gn.jX(this.OX),m(this.RX),this.DX()}constructor(t,i,e,s=Vc.lh,n=0,r=1){this.ZT=t,this.OQ=i,this.AX=e,this.TX=s,this.NX=n,this.LX=r,this.J_=[],this.wX=null,this.CX=0,this.kX="unknown",this.bT=0,this.PX=()=>{CL()-this.CX>6e4&&this.DX()},this.OX=()=>{this.DX(!0)},Gn.zX(this.OX),this.RX=v(this.PX,6e4)}};r(),Uc(),r(),r();var FL=0;var YL=c,oc=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,pi=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;oc&&pi||(oc=function(t){const i=CL(),e=x.max(0,16-(i-FL)),s=u((()=>t(i+e)),e);return FL=i+e,s},pi=YL),oc=oc.bind(self),pi=pi.bind(self),bs();var VL=Ro.Uf||Ro.Ka&&Ro.Jf<13;function GL(t,i,e){const s=t.getImageData(i,e,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var WL=class{get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{drawImage(i){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return t.BX(i,...s)},texImage2D:(i,e,s,n,r,o)=>t.UX(i,e,s,n,r,o),requestVideoFrameCallback:i=>t.QX(i),cancelVideoFrameCallback:i=>t.FX(i)}}(this)}BX(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=this.YX;return void 0!==n&&(t.drawImage(n,...e),!0)}UX(t,i,e,s,n,r){let o=this.YX;return void 0!==o&&(VL&&(o=this.VX(o)),t.texImage2D(i,e,s,n,r,o),!0)}QX(t){const i=this.GX++,e=this.WX(t,i);return this.ZX.set(i,{HX:t,XX:e}),i}FX(t){const i=this.ZX.get(t);void 0!==i&&(this.ZX.delete(t),i.XX())}WX(t,i){const e=this.YX;if(void 0===e)return Bn;if(e instanceof HTMLVideoElement&&e.requestVideoFrameCallback){const s=e.requestVideoFrameCallback(((e,s)=>{this.ZX.delete(i),t(e,s)}));return()=>e.cancelVideoFrameCallback(s)}{let e;const s=n=>{this.qX()?(this.ZX.delete(i),this.KX=!1,t(n,void 0)):e=oc(s)};return e=oc(s),()=>pi(e)}}qX(){return(!this.t.KE||this.KX)&&!this.t.wk&&this.t.fk>=Fn.Iz}VX(t){let i=this.JX;void 0===i&&(i=h.createElement("canvas"),this.JX=i);const e=i.getContext("2d"),s=this.t,n=s.Tk,r=s.yk,o=i.width,a=i.height;e.clearRect(0,0,i.width,i.height),o===n&&a===r||(i.width=n,i.height=r),e.drawImage(t,0,0,n,r);let u=!1;return n>0&&GL(e,n-1,0)&&(i.width=o,u=!0),r>0&&GL(e,0,r-1)&&(i.height=a,u=!0),u&&e.drawImage(t,0,0,n,r),i}gn(){this.ZX.forEach((t=>t.XX())),this.ZX.clear(),this.t.fn(Zi.$y,this.$X),this.t.fn(Zi.bb,this.tq),this.YX=void 0,this.JX=void 0}constructor(t){this.YX=void 0,this.Za=void 0,this.JX=void 0,this.ZX=gc(),this.GX=1,this.KX=!0,this.tq=()=>{this.KX=!0},this.$X=()=>{this.YX=this.t.jk(),this.ZX.forEach(((t,i)=>{t.XX(),t.XX=this.WX(t.HX,i)}))},this.t=t,this.t.yn(Zi.$y,this.$X),this.t.yn(Zi.bb,this.tq),this.$X()}};r(),r(),r();var ZL=function(t){return t.pn="dimensionchange",t}({}),HL=class extends tu{get Tu(){return 0}get Su(){return 0}},XL=class extends Jr{constructor(t,i){super(ZL.pn),this.width=t,this.height=i}};r(),r();var qL,KL=class{constructor(t,i){this.we=t,this.HX=i}},JL=class extends KL{get Tu(){return this.iq}get Su(){return this.nq}gn(){this.rq.disconnect()}constructor(t,i){super(t,i),this.iq=0,this.nq=0,this.dp=t=>{if(t.length>0){const i=t[t.length-1].contentRect;this.nq=i.width,this.iq=i.height,this.HX(this.nq,this.iq)}},this.rq=new gi.ResizeObserver(this.dp),this.rq.observe(this.we)}};r(),r(),bs();var $L=["Webkit","Moz","O","ms"],tx=(()=>{let t=!1;try{if(void 0!==gi&&"function"==typeof gi.addEventListener){const i=_.defineProperty({},"passive",{get(){t=!0}});gi.addEventListener("testPassiveEventSupport",Bn,i),gi.removeEventListener("testPassiveEventSupport",Bn,i)}}catch(t){}return t})(),ix=ll();function ex(t){return ix.has(t)||ix.set(t,function(t){const i=(qL||(qL=gi&&gi.document&&gi.document.createElement("span")),qL);if(!i||!i.style)return t;if(void 0!==i.style[t])return t;const e=t.charAt(0).toUpperCase()+t.slice(1);for(const t of $L){const s=t+e;if(void 0!==i.style[s])return s}return t}(t)),ix.get(t)}function sx(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.bottom="0",i.top="0",i.overflow="scroll",i.zIndex="-1",i.visibility="hidden"}function nx(t){const i=t.style;i.position="absolute",i.left="0",i.top="0",i[ex("transition")]="0s"}var rx=class extends KL{gn(){pi(this.oq),this.oq=0,this.hq.removeEventListener("scroll",this.aq),this.uq.removeEventListener("scroll",this.aq),dn(this.cq),s&&s.removeEventListener("resize",this.lq)}get Tu(){return this.we.getBoundingClientRect().height||this.iq||0}get Su(){return this.we.getBoundingClientRect().width||this.nq||0}constructor(t,i,e){super(t,i),this.oq=0,this.nq=NaN,this.iq=NaN,this.dq=void 0,this.tr=()=>{const t=1e5;this.fq.style.width=t+"px",this.fq.style.height=t+"px",this.hq.scrollLeft=t,this.hq.scrollTop=t,this.uq.scrollLeft=t,this.uq.scrollTop=t,0===this.uq.scrollTop&&oc(this.tr)},this.gq=()=>{const t=this.Su,i=this.Tu;this.HX(t,i),this.nq=t,this.iq=i,this.tr(),this.oq=0},this.aq=()=>{if(this.oq)return;const t=this.Su,i=this.Tu;t===this.nq&&i===this.iq||(this.oq=oc(this.gq))},this.lq=()=>{this.dq||(this.dq=u(this._q,66))},this._q=()=>{this.dq=void 0,this.vq()},this.vq=()=>{this.aq()};const n=function(t,i){return s.getComputedStyle(t,void 0).getPropertyValue(i)||t.style[i]}(t,"position");e||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.cq=r,this.hq=h.createElement("div"),this.fq=h.createElement("div"),this.uq=h.createElement("div"),this.wq=h.createElement("div"),sx(this.hq),sx(this.uq),nx(this.fq),function(t){nx(t),t.style.width="200%",t.style.height="200%"}(this.wq),r.appendChild(this.hq),r.appendChild(this.uq),this.hq.appendChild(this.fq),this.uq.appendChild(this.wq),t.appendChild(r),this.hq.addEventListener("scroll",this.aq),this.uq.addEventListener("scroll",this.aq),s&&s.addEventListener("resize",this.lq),this.aq()}},ox=class extends tu{bn(t){this.rq||("function"==typeof gi.ResizeObserver?this.rq=new JL(this.we,this.dp):this.rq=new rx(this.we,this.dp,t))}gn(){this.Bo(),this.rq&&(this.rq.gn(),this.rq=void 0)}get Tu(){return this.rq?this.rq.Tu:0}get Su(){return this.rq?this.rq.Su:0}constructor(t){super(),this.rq=void 0,this.dp=(t,i)=>{this.yo(new XL(t,i))},this.we=t}};r(),Uc(),r();var hx=class extends Jr{constructor(){super($s.aa)}};r();var ax=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let i of t)if(i[1]in h)return{mq:i[0],Jo:i[1],Pm:i[2],pq:i[3],Qe:i[4],Aq:i[5]}}();r();var ux=class extends Jr{constructor(){super($s.fa)}},cx=class t extends tu{static na(t){return Boolean(ax&&h[ax.pq]&&ax.mq in t)}co(){const t=this.we[ax.mq]();t&&t.then?t.then(this.yq,this.bq):(h.removeEventListener(ax.Aq,this.bq),h.addEventListener(ax.Aq,this.bq))}bo(){const t=h[ax.Jo]();t&&t.then?t.then(this.yq,this.bq):(h.removeEventListener(ax.Aq,this.bq),h.addEventListener(ax.Aq,this.bq))}Mq(){const t=this.cs,i=this.we===h[ax.Pm];this.cs=i,t!==i&&this.yo(new hx)}Tq(){this.yo(new yl)}gn(){this.Bo(),h.removeEventListener(ax.Qe,this.yq),h.removeEventListener(ax.Aq,this.bq)}constructor(i){super(),this.cs=!1,this.yq=()=>this.Mq(),this.bq=()=>this.Tq(),this.we=i,this.ea=t.na(i),h.addEventListener(ax.Qe,this.yq),this.Mq()}},lx=class t extends tu{static na(t){return Ro.Ka&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}co(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("fullscreen")?Ro.Ka?requestAnimationFrame((()=>this.we.webkitSetPresentationMode("fullscreen"))):this.we.webkitSetPresentationMode("fullscreen"):this.we.webkitEnterFullscreen()}bo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("inline")?this.we.webkitSetPresentationMode("inline"):this.we.webkitExitFullscreen()}Mq(){const t=this.cs;let i;i=this.we.webkitPresentationMode?"fullscreen"===this.we.webkitPresentationMode:Boolean(this.we.webkitDisplayingFullscreen),this.cs=i,t!==i&&this.yo(new hx)}gn(){this.Bo(),this.we.removeEventListener("webkitbeginfullscreen",this.yq),this.we.removeEventListener("webkitendfullscreen",this.yq),this.we.removeEventListener("webkitpresentationmodechanged",this.yq)}constructor(i){super(),this.cs=!1,this.yq=()=>this.Mq(),this.we=i,this.ea=t.na(i),this.we.addEventListener("webkitbeginfullscreen",this.yq),this.we.addEventListener("webkitendfullscreen",this.yq),this.we.addEventListener("webkitpresentationmodechanged",this.yq),this.Mq()}},dx=class extends tu{get ea(){return!!this.Sq&&this.Sq.ea}get cs(){return this.Nq}co(){this.Sq?this.Sq.co():this.yo(new yl)}bo(){for(const t of this.Iq)t.cs&&t.bo()}Dq(t){this.Sq=t}Eq(t){this.Iq.push(t),t.yn($s.aa,this.Mq),t.yn($s.ua,this.Ds),this.Mq()}kq(t){ra(this.Iq,t),t.fn($s.aa,this.Mq),t.fn($s.ua,this.Ds)}Lq(){for(const t of this.Iq)if(t.cs)return!0;return!1}tr(){this.Sq=void 0,this.Nq=!1;const t=this.Iq.slice();for(const i of t)this.kq(i),i.gn();this.Mq()}gn(){this.Bo(),this.tr()}constructor(...t){super(...t),this.Iq=[],this.Sq=void 0,this.Nq=!1,this.Mq=()=>{const t=this.Nq,i=this.Lq();t!==i&&(this.Nq=i,this.yo(new hx))}}},fx=class extends tu{get ea(){return!!this.xq&&this.Cq.ea}get cs(){return this.Cq.cs}co(){this.xq&&this.Cq.co()}bo(){this.Cq.bo()}jq(){this.Cq.yn([$s.aa,$s.fa],this.Mq),this.Cq.yn($s.ua,this.Ds)}Oq(){this.Cq.fn([$s.aa,$s.fa],this.Mq),this.Cq.fn($s.ua,this.Ds)}Yn(){const t=this.Cq,i=this.t.Ck();if(t===i)return;this.ca=!0;const e=this.cs,s=this.ea;e&&this.bo(),this.Oq(),this.Cq=i,this.jq(),e&&!this.cs&&this.ea?this.co():this.bo(),this.ca=!1,s!==this.ea&&this.yo(new ux),e!==this.cs&&this.yo(new hx)}gn(){this.Bo(),this.Oq(),this.t.fn(Zi.Ky,this.Rq)}constructor(t,i){super(),this.ca=!1,this.Rq=()=>this.Yn(),this.Mq=t=>{this.ca||this.yo(t)},this.t=t,this.xq=i,this.Cq=new ut,this.jq(),this.t.yn(Zi.Ky,this.Rq),this.Yn()}};r(),r(),r();var gx=function(t){return t.MODE_CHANGE="presentationmodechange",t.ERROR="error",t}({}),_x=class extends Jr{constructor(t){super(gx.MODE_CHANGE),this.presentationMode=t}};r(),r();var vx=class extends tu{iu(t){for(const i of this.J_)t.yn(i,this.Pq);this.zq.push(t)}Bq(t){for(const i of this.J_)t.fn(i,this.Pq);this.zq.push(t)}gn(){this.Bo();for(const t of this.zq)this.Bq(t);nt(this.zq)}constructor(t,i=!1,e){super(e),this.zq=[],this.Uq=t=>{Fs((()=>{this.Ds(t)}))},this.J_=t,this.Pq=i?this.Uq:this.Ds}},Yt=class extends gs{iu(t){t.xy(this.Qq),this.zq.push(t)}Bq(t){t.Py(this.Qq),ra(this.zq,t)}gn(){this.Bo();for(const t of this.zq)t.Py(this.Qq);nt(this.zq)}constructor(t,i=!1){super(t),this.zq=[],this.Uq=t=>{Fs((()=>{this.Ds(t)}))},this.Qq=i?this.Uq:this.Ds}};r();var wx=class extends Dc{get error(){return this.errorObject.message}ma(){return this}constructor(t){super(gx.ERROR),this.errorObject=t}};r();var mx=class extends qi{constructor(t,i,e){super(t,i,e)}};bs();var px=class extends gs{get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return function(t){let i,e={get currentMode(){return t.Uo()},requestMode(i){const e=MS(i);e&&t.Lo(e)},supportsMode(i){const e=MS(i);return!!e&&t.Vo(e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Yt(e,!0),i.iu(t),e}(this)}Lo(t){this.zo!==t&&(this.zo=t,this.Ko=!0,this.qo(t))}Uo(){return this.zo}Vo(t){switch(t){case Ba.NATIVE_PICTURE_IN_PICTURE:return this.Qo.Cz;case Ba.FULLSCREEN:return this.Zo.ea;case Ba.INLINE:return!0}return!1}qo(t){switch(this.Go.Ty(),t){case Ba.FULLSCREEN:X(this.Go.Wo((t=>this.Fq(t))));break;case Ba.NATIVE_PICTURE_IN_PICTURE:X(this.Go.Wo((t=>this.Yq(t))));break;case Ba.INLINE:X(this.Go.Wo((t=>this.Vq(t))))}}async Fq(t){yi(t),await this.Qo.bo().catch(Bn),yi(t);try{await this.Gq(),this.yo(new _x(this.zo))}catch(i){const e=new mx(vt.FULLSCREEN_ERROR,"Failed to enter fullscreen.");throw this.yo(new wx(e)),yi(t),this.Lo(Ba.INLINE),e}finally{this.Ko=!1}}async Yq(t){yi(t),await this.Jo().catch(Bn),yi(t);try{await this.Qo.co(),this.yo(new _x(this.zo))}catch(i){const e=new mx(vt.PICTURE_IN_PICTURE_ERROR,"Failed to enter native picture-in-picture.");throw this.yo(new wx(e)),yi(t),this.Lo(Ba.INLINE),e}finally{this.Ko=!1}}async Vq(t){yi(t),await this.Jo().catch(Bn),yi(t),await this.Qo.bo().catch(Bn),this.yo(new _x(this.zo)),this.Ko=!1}async Gq(){if(this.Zo.cs)return;const t=this.Zo.zy([$s.aa,$s.ua]);if(this.Zo.co(),await t,!this.Zo.cs)throw new b("Failed to enter fullscreen.")}async Jo(){if(!this.Zo.cs)return;const t=this.Zo.zy([$s.aa,$s.ua]);if(this.Zo.bo(),await t,this.Zo.cs)throw new b("Failed to exit fullscreen.")}wi(){this.Ko||(this.zo!==Ba.FULLSCREEN||this.Zo.cs?this.zo!==Ba.FULLSCREEN&&this.Zo.cs&&this.Lo(Ba.FULLSCREEN):this.Lo(Ba.INLINE))}gn(){this.Zo.fn($s.aa,this.Mq),this.Zo.fn($s.ua,this.Tq),this.Qo.fn(Yu.kz,this.Wq),this.Qo.fn(Yu.Lz,this.Wq),this.Qo.fn(Yu.ua,this.Zq),this.Bo()}constructor(t,i){super(),this.zo=Ba.INLINE,this.Ko=!1,this.Go=new Wa,this.Za=void 0,this.Mq=()=>{this.wi()},this.Tq=()=>{this.Ko||(this.yo(new cl(new qi(vt.FULLSCREEN_ERROR,"Failed to enter fullscreen."))),this.wi())},this.Wq=()=>{this.Ko||(this.zo!==Ba.NATIVE_PICTURE_IN_PICTURE||this.Qo.xz?this.zo!==Ba.NATIVE_PICTURE_IN_PICTURE&&this.Qo.xz&&this.Lo(Ba.NATIVE_PICTURE_IN_PICTURE):this.Lo(Ba.INLINE))},this.Zq=()=>{this.Ko||(this.yo(new wx(new mx(vt.PICTURE_IN_PICTURE_ERROR,"Unexpected native picture-in-picture error."))),this.Wq())},this.Zo=t,this.Qo=i,this.Zo.yn($s.aa,this.Mq),this.Zo.yn($s.ua,this.Tq),this.Qo.yn(Yu.kz,this.Wq),this.Qo.yn(Yu.Lz,this.Wq),this.Qo.yn(Yu.ua,this.Zq)}};function Ax(t){let i;return{get url(){return t.zu},get method(){return t.xI},get headers(){return i||(i=t.aI.RN()),i},get body(){return t.GN},get useCredentials(){return t.zI},get type(){return t.YA},get subType(){return t.OI},get mediaType(){return t.RI},get responseType(){return t.oI}}}function yx(t){switch(t.toLowerCase()){case"arraybuffer":return Ee.xN;case"json":return Ee.CN;case"stream":return Ee.jN;default:return Ee.ON}}function bx(t){switch(t.toUpperCase()){case"POST":return Ve.POST;case"PUT":return Ve.PUT;case"DELETE":return Ve.DELETE;case"HEAD":return Ve.HEAD;case"OPTIONS":return Ve.OPTIONS;default:return Ve.GET}}function Mx(t){switch(t.toLowerCase()){case"manifest":return Rs.fI;case"segment":return Rs.gI;case"preload-hint":return Rs._I;case"content-protection":return Rs.vI;default:return Rs.dI}}function Tx(t){switch(t.toLowerCase()){case"initialization-segment":return ul.wI;case"fairplay-license":return ul.mI;case"fairplay-certificate":return ul.pI;case"widevine-license":return ul.AI;case"widevine-certificate":return ul.yI;case"playready-license":return ul.bI;case"clearkey-license":return ul.MI;case"aes128-key":return ul.TI;default:return ul.dI}}function Sx(t){switch(t.toLowerCase()){case"audio":return Pc.SI;case"video":return Pc.NI;case"text":return Pc.ON;case"image":return Pc.II;default:return Pc.dI}}r(),r(),r(),r();var Nx=class{get Hq(){return this.Xq.rM}get ga(){return this.Za||(this.Za=this.qq()),this.Za}get Kq(){return this.Jq}get $q(){return!this.Jq}get tK(){return this.iK>0}get iD(){return this.eD}JC(){this.Jq=!0,this.Xq.sM(null)}eK(){this.Xq.nM(new zy(this.sK))}nK(t){if(!this.$q)throw new k("Cannot respond more than once");if(!Z(t))throw new k("Expected valid response");this.eD=this.rK(t),this.JC()}oK(){try{const t=this.hK(this.ga);t?this.aK(t):this.tK||this.Kq||this.JC()}catch(t){this.sK.push(t),this.eK()}}aK(t){if(this.Kq)throw new b("Request has been redirected or a response already exists");if(pr(t))this.uK(t);else{if("function"!=typeof t)throw new k("Expected promise or function");{const i=new xh,e=t=>{t?i.nM(t):i.sM(void 0)};try{const s=t(e);pr(s)&&i.Sy(s)}catch(t){i.nM(t)}this.uK(i.rM)}}}async uK(t){try{this.iK++,await t,this.iK--,this.tK||this.Kq||(this.sK.length?this.eK():this.JC())}catch(t){this.iK--,this.sK.push(t),this.tK||this.Kq||this.eK()}}constructor(t,i){this.cK=t,this.hK=i,this.Xq=new xh,this.sK=[],this.Za=void 0,this.Jq=!1,this.eD=void 0,this.iK=0}},Ix=class t extends Nx{get GN(){return this.lK}get aI(){return this.cK.aI}get hI(){return this.cK.hI}get iD(){return this.eD}get nI(){return this.cK.nI}get uI(){return this.cK.uI}get zu(){return this.cK.lI}static dK(t,i,e){const s=void 0===t.body?e:t.body;return new qt({rI:s,hI:i.hI,oI:i.hI.oI,aI:t.headers,nI:t.status,uI:t.statusText,lI:t.url,cI:!0},i)}qq(){return function(t){let i;const e=Ax(t.hI);return{get closed(){return!t.$q},get request(){return e},get url(){return t.zu},get status(){return t.nI},get statusText(){return t.uI},get headers(){return i||(i=t.aI.RN()),i},get body(){return t.GN},respondWith:i=>t.nK(i),waitUntil:i=>t.aK(i)}}(this)}rK(i){return t.dK(i,this.cK,this.lK)}constructor(t,i,e){super(t,i),this.lK=e,this.oK()}};r();var Dx=class extends Nx{get GN(){return this.cK.GN}get $q(){return this.fK&&!this.Jq}get aI(){return this.cK.aI}get xI(){return this.cK.xI}get gK(){return this._K}get iD(){return this.eD}get oI(){return this.cK.oI}get CI(){return this.cK.CI}get jI(){return this.cK.jI}get ly(){return this.cK.ly}get YA(){return this.cK.YA}get OI(){return this.cK.OI}get RI(){return this.cK.RI}get zu(){return this.cK.zu}get zI(){return this.cK.zI}get QI(){return this.cK.QI}get BI(){return this.cK.BI}get UI(){return this.cK.UI}get FI(){return this.cK.FI}qq(){return function(t){let i;return{get url(){return t.zu},get method(){return t.xI},get headers(){return i||(i=t.aI.RN()),i},get body(){return t.GN},get closed(){return!t.$q},get useCredentials(){return t.zI},get type(){return t.YA},get subType(){return t.OI},get mediaType(){return t.RI},get responseType(){return t.oI},redirect:i=>t.vK(i),respondWith:i=>t.nK(i),waitUntil:i=>t.aK(i)}}(this)}rK(t){const i=this.cK.GN,e=new qt({rI:i,aI:{},hI:this.cK,lI:this.cK.zu,oI:this.cK.oI,nI:200,uI:"OK"});return Ix.dK(t,e,i)}vK(t){if(!this.$q)throw new k("Cannot redirect, already redirected or has a response");let i;i=Ic(t)?{url:t}:t,this._K=function(t,i){return new Gs({zu:void 0===t.url?i.zu:t.url,xI:void 0!==t.method?bx(t.method):void 0,aI:t.headers,GN:t.body,zI:t.useCredentials,YA:void 0!==t.type?Mx(t.type):void 0,OI:void 0!==t.subType?Tx(t.subType):void 0,RI:void 0!==t.mediaType?Sx(t.mediaType):void 0,oI:void 0!==t.responseType?yx(t.responseType):void 0},i)}(i,this.cK),this.JC()}constructor(t,i,e){super(t,i),this._K=void 0,this.fK=e,this.oK()}};Qi();var Ex=class extends kc{wK(t){this.mK.wK(t)}pK(t){this.mK.pK(t)}AK(t){this.mK.AK(t)}vZ(t){this.mK.vZ(t)}AZ(t){this.mK.AZ(t)}constructor(t,i=!0){const e=new kx(t);super(e,i),this.mK=e}},kx=class{async hI(t){let i;try{i=await this.yK(t,t.ly)}catch(i){if(i instanceof pb)return await this.bK(i,t.ly);throw i}if(i=await this.MK(i,t.ly),cb(i))return i;throw new yb(i)}YI(t){return this.ZI.YI(t)}async yK(t,i){yi(i);let e,s=t;for(const t of this.TK.slice()){yi(i);const n=new Dx(s,t,!e);if(!n.Kq)try{await n.Hq}catch(t){0;continue}n.gK&&!e?s=n.gK:n.iD&&!e&&(e=n.iD)}return e||this.ZI.hI(s)}async bK(t,i){let e;if(t instanceof yb)e=t.iD;else{const i=t.hI;e=new qt({rI:null,hI:i,oI:i.oI,nI:0,uI:""})}const s=await this.MK(e,i);if(s===e)throw t;if(cb(s))return s;throw new yb(s)}async MK(t,i){let e=t;for(const t of this.SK.slice()){yi(i);const s=await Promise.resolve(e.Zb().rI(i)),n=new Ix(e,t,s);if(!n.Kq)try{await n.Hq}catch(t){0;continue}e=n.iD||e}return e}wK(t){this.TK.unshift(t)}pK(t){this.TK.push(t)}AK(t){ra(this.TK,t)}vZ(t){this.SK.unshift(t)}AZ(t){ra(this.SK,t)}gn(){this.ZI.gn(),nt(this.TK),nt(this.SK)}constructor(t){this.TK=[],this.SK=[],this.ZI=t}};r();var Lx=class{get ga(){return this.Za||(this.Za=function(t){return{addRequestInterceptor(i){t.wK(i)},removeRequestInterceptor(i){t.AK(i)},addResponseInterceptor(i){t.vZ(i)},removeResponseInterceptor(i){t.AZ(i)}}}(this)),this.Za}wK(t){this.OQ.wK(t)}AK(t){this.OQ.AK(t)}vZ(t){this.OQ.vZ(t)}AZ(t){this.OQ.AZ(t)}constructor(t){this.OQ=t}},xx=class extends tu{get ga(){return this.Za||(this.Za=function(t){return{get online(){return t.XE},get estimator(){return function(t){return{get bandwidth(){return t.FY},get roundTripTime(){return t.YY}}}(t.NK)},setEstimator(i){t.IK(function(t){if(!t)return;return{get FY(){return MM(t.bandwidth)},get YY(){return MM(t.roundTripTime)},VY:i=>function(t){if(!t)return;return{DK(i){t.markRequestStart(i)},EK(i){t.markResponseStart(i)},kK(i,e){t.markResponseData(i,e)},LK(i){t.markResponseEnd(i)}}}(t.createMeasurer(Ax(i)))}}(i))},addRequestInterceptor(i){t.wK(i)},removeRequestInterceptor(i){t.AK(i)},addResponseInterceptor(i){t.vZ(i)},removeResponseInterceptor(i){t.AZ(i)},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}(this)),this.Za}get XE(){return this.xK.XE}get NK(){return this.UG.NK}IK(t){this.UG.IK(t)}wK(t){this.OQ.wK(t)}AK(t){this.OQ.AK(t)}vZ(t){this.OQ.vZ(t)}AZ(t){this.OQ.AZ(t)}gn(){this.Bo(),this.xK.fn(Zi.vb,this.CK),this.xK.fn(Zi._b,this.jK)}constructor(t,i,e){super(i),this.xK=t,this.OQ=i,this.UG=e,this.CK=t=>{this.yo(t)},this.jK=t=>{this.yo(t)},this.xK.yn(Zi.vb,this.CK),this.xK.yn(Zi._b,this.jK)}};r(),r(),r();var Le=function(t){return t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth",t}({});r();function Cx(t,i,e,s,n,r){const o=[];let h=t-x.max(r,1),a=t+n;if(i&&e){const t=ur(e,1,5),s=i-t;h=x.min(h,s);const n=i+e+t;a=x.max(a,n)}0!==h&&s.SP(0,h)&&o.push([0,h]);return s.SP(a,1/0)&&o.push([a,1/0]),o}function jx(t){return t instanceof b&&"QuotaExceededError"===t.name}r();var Ox={type:Le.BANDWIDTH};function Rx(t){const i=oi(Ox);return Ic(t)?i.type=Px(t):Z(t)&&function(t){switch(t){case Le.PERFORMANCE:case Le.QUALITY:case Le.BANDWIDTH:return!0;default:return!1}}(t.type)&&(i.type=Px(t.type)),Z(t)&&Z(t.metadata)&&(i.metadata=function(t){const i={},e=bM(t.bitrate);return j(e)||(i.bitrate=e),i}(t.metadata)),i}function Px(t){switch(t){case"bandwidth":return Le.BANDWIDTH;case"performance":return Le.PERFORMANCE;case"quality":return Le.QUALITY}}r();var zx=class extends Jr{constructor(t){super("RK"),this.PK=t}};r();var Bx=class extends Jr{constructor(t){super("zK"),this.BK=t}};r();var Ux=class extends Jr{constructor(t){super("UK"),this.QK=t}},Qx=class extends tu{FK(t){this.YK=t}get VK(){switch(this.GK.type){case Le.PERFORMANCE:return 0;case Le.QUALITY:return 1/0;case Le.BANDWIDTH:return this.GK.metadata&&void 0!==this.GK.metadata.bitrate?this.GK.metadata.bitrate:_i.Ld.LY();default:return _i.Ld.LY()}}get ga(){return this.Za}get BK(){return this.GK}set BK(t){this.GK=t,this.yo(new Bx(t))}get PK(){return this.WK}set PK(t){this.WK=t,this.yo(new zx(t))}get ZK(){return x.min(this.WK,this.HK)}get QK(){return this.XK}set QK(t){this.XK=t,this.yo(new Ux(t))}get qK(){return this.HK}get NK(){var t;return null!=(t=this.KK)?t:this.YK.pV}IK(t){this.KK=t}JK(t){let i=x.min(t,.8*this.HK);if(i=x.max(10,i),this.HK===i)return!1;const e=this.ZK;this.HK=i;const s=this.ZK;return s!==e&&this.yo(new zx(s)),!0}get $K(){return this.tJ}set $K(t){this.tJ=t}constructor(...t){super(...t),this.Za=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.BK)},set strategy(i){t.BK=Rx(i)},get targetBuffer(){return t.PK},set targetBuffer(i){const e=bM(i);j(e)||(t.PK=e)},get bufferLookbackWindow(){return t.QK},set bufferLookbackWindow(i){const e=bM(i);j(e)||(t.QK=e<=0?30:e)},get maxBufferLength(){return t.qK},get clearBufferWhenSettingTargetQuality(){return t.$K},set clearBufferWhenSettingTargetQuality(i){t.$K=Fu(i)}}}(this),this.GK=Ox,this.WK=20,this.XK=30,this.HK=1/0,this.tJ=!1,this.KK=void 0}};r(),r();var Fx=class extends Dc{ma(){return new Yx}constructor(){super("cL")}},Yx=class extends Jr{constructor(){super("change")}};r(),r();var Vx=class extends tu{gn(){this.Bo();for(const t of this.J_)this.iJ.fn(t,this.eJ)}constructor(t,i,e){super(e),this.eJ=t=>{oM(t)&&Fs((()=>{this.yo(t.ga)}))},this.iJ=t,this.J_=i;for(const t of this.J_)this.iJ.yn(t,this.eJ)}},es=class extends gs{gn(){this.Bo(),this.iJ.Py(this.eJ)}constructor(t,i){super(i),this.eJ=t=>{oM(t)&&Fs((()=>{this.yo(t.ga)}))},this.iJ=t,this.iJ.xy(this.eJ)}};var Gx=class extends gs{get lB(){return this.yB}set lB(t){if(this.dB<=t)throw new b("Start time of a clip should be smaller than the end time.");this.yB!==t&&(this.yB=t,this.yo(new Fx))}get dB(){return this.TB}set dB(t){if(t<=this.lB)throw new b("End time of a clip should be larger than the start time.");this.TB!==t&&(this.TB=t,this.yo(new Fx))}get ga(){return this.Za||(this.Za=function(t){let i,e={get startTime(){return t.lB},set startTime(i){t.lB=i},get endTime(){return t.dB},set endTime(i){t.dB=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new es(t,e),e}(this)),this.Za}tr(){0===this.yB&&this.TB===1/0||(this.yB=0,this.TB=1/0,this.yo(new Fx))}sJ(){return new Mo([this.lB,this.dB],[!0,!0])}constructor(...t){super(...t),this.yB=0,this.TB=1/0}};r();var Wx=class t extends At{CE(t,i){const e=this.nJ.sJ().gP(t);super.CE(e,i),this.rJ()}RE(){return super.RE()||this.oJ}get hJ(){return this.vk().length?this.vk():this.nJ.sJ().ks()}vk(){return Mo.xn(super.vk()).Sn(this.nJ.sJ()).ks()}Pk(){this.RE()?this.CE(this.hJ.start(0)):this.aJ(),super.Pk(),this.rJ()}async ka(t,i){yi(i),this.oJ=!1,this.nJ.tr(),await super.ka(t,i)}gn(){return this.nJ.fn("cL",this.uJ),this.yE.fn(Zi.Eb,this.xc),this.cJ(),super.gn()}Gk(t){switch(t.type){case Zi.Mb:return this.yo(t),this.lJ(),!0;case Zi.bb:case Zi.Hy:return this.yo(t),this.dJ(),!0;case Zi.qy:if(this.fJ)return!0}return super.Gk(t)}get fJ(){return this.nJ.dB<this.ct}cJ(){this.gJ&&(pi(this.gJ),this.gJ=void 0)}rJ(){const i=this.LE,e=this.fJ&&i>=this.nJ.dB-t.ed;this.oJ&&!e?(this.oJ=!1,this.KE&&this.Pk()):this.oJ||!e||this.wk||this._J||(this.oJ=!0,this.yo(new fa(i)),this.Rk())}aJ(){if(this.ct===1/0)return;const i=this.hJ,e=Mo.xn(i).gP(this.LE);ce(this.LE,e,t.ed)||this.CE(e)}constructor(i,e){super(i),this.oJ=!1,this.gJ=void 0,this._J=!1,this.uJ=()=>{this.aJ(),this.rJ()},this.xc=()=>{this.cJ(),this.rJ();this.fJ&&this.LE>=this.nJ.dB-t.vJ&&!this.OE&&(this.gJ=oc(this.xc))},this.lJ=()=>{this._J=!0},this.dJ=()=>{this._J&&(this._J=!1,this.rJ())},this.nJ=e,this.nJ.yn("cL",this.uJ),this.yE.yn(Zi.Eb,this.xc)}};Wx.vJ=1,Wx.ed=.001,r();var Zx=class{get wJ(){return this.mJ}set wJ(t){this.mJ=t}constructor(){this.mJ=!1}};r();var Hx=class extends At{RE(){return!this.mJ.wJ&&super.RE()}Rk(){this.pJ=!0,super.Rk()}Pk(){this.pJ=!1,super.Pk()}Gk(t){if(this.mJ.wJ)switch(t.type){case Zi.qy:return this.LE=0,this.pJ||(this.wk?this.AJ=!0:this.Pk()),!0;case Zi.bb:this.AJ&&(this.AJ=!1,this.Pk());break;case Zi.wb:if(this.AJ||super.RE())return!0}return super.Gk(t)}constructor(t,i){super(t),this.AJ=!1,this.pJ=!1,this.mJ=i}};r(),r();var Xx=class{get ga(){return this.Za}get Uz(){return this.ta.VE.Uz}get Fz(){return this.ta.VE.Fz}get Bz(){return this.ta.VE.Bz}get yJ(){throw new b("Not implemented")}get bJ(){throw new b("Not implemented")}get Yz(){return this.ta.VE.Yz}get Qz(){return this.ta.VE.Qz}get Vz(){return this.ta.VE.Vz}constructor(t){this.ta=t,this.Za=function(t){return{get currentBandwidthEstimate(){return t.Fz},get corruptedVideoFrames(){return t.Uz},get droppedVideoFrames(){return t.Bz},get totalVideoFrames(){return t.Qz},get totalBytesLoaded(){return t.Yz},get bufferedSegments(){return t.Vz}}}(this)}};function qx(t){if(!t||!qn(t))return{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const i=t.getVideoPlaybackQuality();return{Bz:i.droppedVideoFrames,Uz:i.corruptedVideoFrames||0,Qz:i.totalVideoFrames}}return{Bz:t.webkitDroppedFrameCount||0,Uz:0,Qz:t.webkitDecodedFrameCount||0}}r(),r();var Kx=class extends Dc{ma(){return new Jx}constructor(){super("MJ")}},Jx=class extends Jr{constructor(){super("castingchange")}};r();var $x=class extends tu{get TJ(){var t,i;return(null==(t=this.SJ)?void 0:t.TJ)||(null==(i=this.NJ)?void 0:i.TJ)||!1}get IJ(){return this.SJ}get DJ(){return this.NJ}EJ(t){this.SJ=t,this.kJ(t)}LJ(t){this.NJ=t,this.kJ(t)}kJ(t){t.yn("statechange",this.xJ)}CJ(t){t.fn("statechange",this.xJ)}get ga(){return this.Za||(this.Za=function(t){let i;const e={get casting(){return t.TJ},get airplay(){var i;return null==(i=t.IJ)?void 0:i.ga},get chromecast(){var i;return null==(i=t.DJ)?void 0:i.ga},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Vx(t,["MJ"],e),e}(this)),this.Za}gn(){this.Bo(),this.SJ&&(this.CJ(this.SJ),this.SJ=void 0),this.NJ&&(this.CJ(this.NJ),this.NJ=void 0)}constructor(...t){super(...t),this.SJ=void 0,this.NJ=void 0,this.jJ=!1,this.Za=void 0,this.xJ=()=>{const t=this.jJ,i=this.TJ;t!==i&&(this.jJ=i,this.yo(new Kx))}}};r(),r(),Qi();var uu=class{static async OJ(t,i){try{const e=new Gs({zu:t,oI:Ee.ON,xI:Ve.GET}),s=await i.hI(e);return(await s.rI()).trim()}catch(t){return void Tu(t)}}static RJ(t){try{const i=dL(t);return new wL(i.key,i.domains_page,i.domains_source,i.expiration_date,i.features,i.customer_id,i.generation_date,i.sdks,i.send_impression)}catch(t){throw new qi(vt.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static PJ(t){void 0===t&&(t=Vc.lh),Fe.uA("The baked-in license is used. Please update the configuration with your license.");const i=t._H("F2b-iL'[FL[S"),e=JSON.parse('["F$(:_L50F|aY"]').map((i=>t._H(i))),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((i=>t._H(i))),n=Number(new Date(Number(t._H('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map((i=>t._H(i)));return new wL(i,e,s,n,r)}static convertLicenseToDummyLicense(t){return new wL(t.MH,t.TH,t.SH,864e13,t.IH,t.DH,Date.now(),t.kH,t.LH)}};r();var Th=class t{static LN(){return t.Ld||(t.Ld=tC.PS()?new tC:new Ly),t.Ld}static eM(i){t.LN().eM(i)}static kN(){t.LN().kN()}static $b(i){return t.LN().$b(i)}static tM(i,e){t.LN().tM(i,e)}static zJ(i){const e=t.$b(i);if(void 0!==e)return S(e)}static BJ(i){return"true"===t.$b(i)}};Th.Ld=void 0;var tC=class extends Th{static PS(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}eM(t){self.localStorage.removeItem(t)}kN(){self.localStorage.clear()}$b(t){var i;return null!=(i=self.localStorage.getItem(t))?i:void 0}tM(t,i){self.localStorage.setItem(t,i)}},iC="https://validate.theoplayer.com/1/",eC=72e5,sC=x.floor(14399999*x.random()-eC),nC="THEOplayer.license",rC=class{async UJ(){const t=await this.QJ(this.FJ.license,this.FJ.licenseUrl);this.AX.YJ(t)}async QJ(t,i){let e,s=i;t?e=uu.RJ(t):s||(e=uu.PJ()),s||(s=iC+e.MH);const n=this.VJ();let r;if(e&&(r=this.GJ.QH(e),r===vL.AH)){if(this.WJ(e.NH)&&this.WJ(null==n?void 0:n.NH)){const t=await this.ZJ(s);if(t)return t}return e}if(n){if(this.GJ.QH(n)===vL.AH){if(this.WJ(null==n?void 0:n.NH)){const t=await this.ZJ(s);if(t)return t}return n}Th.eM(nC)}const o=await uu.OJ(s,this.OQ);let h;if(o){h=uu.RJ(o);if(this.GJ.QH(h)===vL.AH)return Th.tM(nC,o),h;Th.eM(nC)}else if(!this.ZH&&e&&r===vL.yH&&s===iC+e.MH)return uu.convertLicenseToDummyLicense(e);if(!e&&!h)throw new qi(vt.LICENSE_ERROR,"The given license is invalid!");this.HJ(null!=e?e:h,new qi(vt.LICENSE_ERROR,"The given license is invalid!"))}async OH(t){let i=await this.AX.pX();if(this.WJ(i.NH)){var e;const t=null!=(e=this.FJ.licenseUrl)?e:iC+i.MH,s=await this.ZJ(t);s&&(this.AX.YJ(s),i=s)}try{const e=this.GJ.QH(i);if(e===vL.bH){const t=mL.xH;throw new qi(yL(t),Lu.BH(t))}if(e===vL.yH){const t=mL.yH;throw new qi(yL(t),Lu.BH(t))}this.GJ.OH(t,i)}catch(t){this.XJ(t)}}async UH(t){const i=await this.AX.pX();try{this.GJ.UH(t,i)}catch(t){this.XJ(t)}}async ZJ(t){try{const i=await uu.OJ(t,this.OQ);if(void 0===i)return;const e=uu.RJ(i);return this.GJ.QH(e)===vL.AH?(Th.tM(nC,i),e):void 0}catch(t){return}}WJ(t){return!t||Number(new Date)+2592e5+sC>=t}VJ(){const t=Th.$b(nC);if(t)return uu.RJ(t)}HJ(t,i){this.AX.YJ(t),this.XJ(i)}XJ(t){throw Gr(t.message),this.qJ.MX(t.message),t}constructor(t,i,e,s,n,r){this.OQ=t,this.GJ=i,this.qJ=e,this.AX=s,this.FJ=n,this.GM=r,this.ZH=DL(r)}};r();var oC=class{YJ(t){this.KJ=t,this.JJ.sM()}get $J(){return this.KJ}async pX(){return this.KJ?Promise.resolve(this.KJ):(await this.JJ.rM,this.KJ)}constructor(){this.JJ=new xh}};r(),r();var hC=class extends Dc{ma(){return new aC}constructor(){super("cL")}},aC=class extends Jr{constructor(){super("change")}};function uC(t){let i;const e={get fontFamily(){return t.t$},set fontFamily(i){t.t$=i},get fontColor(){return t.i$},set fontColor(i){t.i$=i},get fontSize(){return t.e$},set fontSize(i){t.e$=i},get backgroundColor(){return t.s$},set backgroundColor(i){t.s$=i},get windowColor(){return t.n$},set windowColor(i){t.n$=i},get edgeStyle(){return t.r$},set edgeStyle(i){t.r$=i},get marginTop(){return t.o$},set marginTop(i){t.o$=i},get marginBottom(){return t.h$},set marginBottom(i){t.h$=i},get marginLeft(){return t.a$},set marginLeft(i){t.a$=i},get marginRight(){return t.u$},set marginRight(i){t.u$=i},addEventListener(t,e){const s=Mt(t,Q);i.yn(s,e)},removeEventListener(t,e){const s=Mt(t,Q);i.fn(s,e)}};return i=new Su(e),t.yn(["cL"],(t=>i.yo(t.ga))),e}r();var cC={t$:void 0,i$:void 0,e$:void 0,s$:void 0,n$:void 0,r$:void 0,o$:void 0,h$:void 0,a$:void 0,u$:void 0},qu="THEOplayer.textTrackStyle.",lC=class t extends tu{get c$(){return this.l$}get t$(){return this.l$.t$}set t$(t){this.Yn({t$:t})}get i$(){return this.l$.i$}set i$(t){this.Yn({i$:t})}get e$(){return this.l$.e$}set e$(t){this.Yn({e$:t})}get s$(){return this.l$.s$}set s$(t){this.Yn({s$:t})}get n$(){return this.l$.n$}set n$(t){this.Yn({n$:t})}get r$(){return this.l$.r$}set r$(t){this.Yn({r$:t})}get o$(){return this.l$.o$}set o$(t){this.Yn({o$:t})}get h$(){return this.l$.h$}set h$(t){this.Yn({h$:t})}get u$(){return this.l$.u$}set u$(t){this.Yn({u$:t})}get a$(){return this.l$.a$}set a$(t){this.Yn({a$:t})}get ga(){return this.Za||(this.Za=uC(this)),this.Za}Yn(i){this.l$=Ei({},this.l$,i),t.d$(this.l$),this.yo(new hC)}static f$(){let t=Ei({},cC);return t.t$=Th.$b(qu+"fontFamily")||t.t$,t.i$=Th.$b(qu+"fontColor")||t.i$,t.e$=Th.$b(qu+"fontSize")||t.e$,t.s$=Th.$b(qu+"backgroundColor")||t.s$,t.n$=Th.$b(qu+"windowColor")||t.n$,t.r$=Th.$b(qu+"edgeStyle")||t.r$,t}static d$(t){Th.tM(qu+"fontFamily",t.t$||""),Th.tM(qu+"fontColor",t.i$||""),Th.tM(qu+"fontSize",t.e$||""),Th.tM(qu+"backgroundColor",t.s$||""),Th.tM(qu+"windowColor",t.n$||""),Th.tM(qu+"edgeStyle",t.r$||"")}constructor(){super(),this.Za=void 0,this.l$=t.f$()}};function dC(t,i){var e,s;t.style.marginLeft=(null!=(e=i.a$)?e:0)+"px",t.style.marginRight=(null!=(s=i.u$)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}Qi(),r(),r(),r(),r();var fC=[Zi.so,Zi.wb,E.oP,Zi.Eb,Zi.mb,Zi.ub,Zi.Mb,Zi.bb,Zi.qy,Zi.pb,Zi.kb,Zi.Zy,E.lL,Zi.yb,Xi.ua,So.Xy,So.Fb,Zi.Vy,Zi.Yy,Zi.Lb,Zi.Cb,Zi.eb,Zi.ob,Zi.$y,Zi.Ky],gC={wz:!1};function _C(t){return t.md.YA===uh.FQ}r();var po=function(t){return t.g$="_$",t}({}),mr=["_$"],Me=function(t){return t[t.v$=0]="v$",t[t.jN=1]="jN",t[t.w$=2]="w$",t}({});r(),r(),Uc();var vC=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"],Oc=function(t){return t.m$="p$",t.A$="y$",t.b$="M$",t}({}),wC=class extends tu{get md(){return this.KS}get gV(){return this.vN}async T$(t,i){const e=await this.KA.qA(t.VA,i),s=await e.kS();return await this.S$(s),s}N$(t){const i=this.SS;return i?0!==t.yV.length&&t.yV.some((t=>t.NS.VA===i.NS)):0!==this.KS.yV.length?t.yV.some((t=>this.KS.yV.some((i=>t.NS===i.NS)))):0===t.yV.length||!this.I$}D$(t){return this.E$.D$(t),this.KS=t,Promise.resolve()}k$(t){this.E$.k$(t)}async wy(){this.Bo(),this.vN.removeEventListener("loadedmetadata",this.L$);for(const t of vC)this.vN.removeEventListener(t,this.x$);await this.Go.gn(),this.C$(),await this.E$.tr(),await this.j$(void 0)}O$(t){t!==this.R$&&(this.R$=t,t?this.P$.sM(void 0):this.P$=new xh)}S$(t){return this.Go.Wo((()=>this.j$(t)))}async j$(t){if(t&&!this.vN.src&&!this.vN.srcObject)throw new lu(vt.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.vN.src||this.vN.srcObject))throw new lu(vt.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.R$&&await this.P$.rM;const i=this.SS;i&&(await i.DS(this.vN),this.SS=void 0),t&&(await t.bn(this.vN),this.SS=t)}ka(t){return this.Go.Wo((()=>this.z$(t)))}z$(t){this.O$(!1);const i=this.cz.$E;if(Ic(t))this.vN.src=t;else if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&Ro.Ka&&Ro.Jf>=17}(this.vN))try{this.vN.srcObject=t}catch(i){this.vN.src=URL.createObjectURL(t)}else this.vN.src=URL.createObjectURL(t);else mC(t)&&(this.vN.srcObject=t);this.cz.$E=i}B$(t){return this.Go.Wo((()=>this.U$(t)))}U$(t){this.z$(t),this.vN.load()}C$(){this.O$(!1),$d(this.vN)}async Q$(){this.SS&&await this.SS.tr()}constructor(t,i,e,s){super(),this.R$=!1,this.P$=new xh,this.I$=!1,this.Go=new Wa,this.SS=void 0,this.L$=()=>{this.I$=!0},this.x$=()=>{this.O$(!0)},this.KS=t,this.cz=i,this.vN=i.gV,this.E$=e,this.KA=s,this.vN.addEventListener("loadedmetadata",this.L$);for(const t of vC)this.vN.addEventListener(t,this.x$)}};function mC(t){return"undefined"!=typeof MediaStream&&t instanceof MediaStream}var pC=class extends wC{get TE(){return Mo.xn(this.vN.buffered)}get ct(){return this.vN.duration}get F$(){const t=this.ct;if(!isFinite(t))return!1;const i=this.TE;if(0===i.V)return!1;return t-i.jn(i.V-1)<Be}get ck(){return this.vN.preload}set ck(t){this.vN.preload=t}get _k(){return Mo.xn(this.vN.seekable)}get Y$(){return this.TE}get V$(){if(qn(this.vN)&&(this.vN.videoWidth>0||this.vN.videoHeight>0))return this.TE}async FK(){const t=this.md;switch(t.MV){case pu.KL:case pu.JL:this.vN.setAttribute("crossorigin",t.MV);break;case pu.EI:default:this.vN.removeAttribute("crossorigin")}void 0!==t.ck?this.vN.preload=t.ck:this.vN.preload=Dn.QY,void 0!==t.TV?this.vN.title=t.TV:Xd(this.vN),t.G$?await this.B$(t.G$):await this.ka(t.WL),this.E$.$n(this,t)}N$(t){return!1}D$(t){return Promise.resolve(void 0)}W$(t){return!1}Z$(){return!mC(this.KS.G$)}async wy(){Xd(this.vN),await super.wy()}static H$(t,i){return!!i.canPlayType&&Boolean(i.canPlayType(t.VN))}};Uc(),r();var ii=class extends Jr{constructor(t){super(Zi.mb),this.currentTime=t}};r();var ms=class extends Jr{constructor(){super(Zi.ub)}};r(),r();var AC=function(t){return t.X$="q$",t}({}),yC=class extends Jr{constructor(t){super("q$"),this.K$=t}},bC=class extends tu{get J$(){return this.t0}i0(t,i){const e=new Mo([t,i]);this.t0=this.t0.pP(e),this.yo(new yC(e))}e0(t,i){this.t0=this.t0.yP(new Mo([t,i]))}tr(){this.t0=Mo.PP()}gn(){this.Bo()}constructor(...t){super(...t),this.t0=Mo.PP()}};function MC(t,i){return void 0===i&&(i=new Fy({highWaterMark:1/0})),new bc(new TC(t,i),{highWaterMark:0})}r(),r(),r();var TC=class{start(t){this.JJ=t,this.s0()&&this.n0()}pull(){this.n_.length>0?this.r0():this.o0=!0,this.s0()&&this.n0()}cancel(t){return nt(this.n_),this.r_=0,this.o0=!1,this.Wg.cancel(t)}r0(){if(0===this.n_.length)return;const t=this.n_;this.n_=[],this.r_=0,this.o0=!1,this.JJ.enqueue(t)}s0(){if(this.o0)return!0;return this.h0-this.r_>0}n0(){if(this.a0)return;const t=this.Wg.read().then(this.u0).catch(this.yD);this.a0=t;const i=()=>{this.a0===t&&(this.a0=void 0)};t.then(i,i)}constructor(t,{size:i=(()=>1),highWaterMark:e=1}){this.n_=[],this.r_=0,this.JJ=void 0,this.o0=!1,this.a0=void 0,this.u0=t=>t.done?(this.r0(),void this.JJ.close()):(this.n_.push(t.value),this.r_+=this.c0(t.value),this.o0&&this.r0(),this.s0()?this.Wg.read().then(this.u0):void 0),this.yD=t=>{this.r0(),this.JJ.error(t)},this.Wg=t.getReader(),this.c0=i,this.h0=e}};bs(),Uc(),Qi(),r(),r(),r(),r(),Qi();var SC=class{l0(t){this.d0.push(t),this.Kb+=t.byteLength}f0(t){if(this.Kb<=t)return this.g0();const i=this.d0;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.slice(0,s);if(s<i.length&&e<t){const r=t-e;0,n.push(zr(i[s],0,r)),e+=r}return{d0:n,Kb:e}}_0(t){const i=this.f0(t);return 1===i.d0.length?i.d0[0]:wm(i.d0,i.Kb)}g0(){return{d0:this.d0,Kb:this.Kb}}v0(t){if(this.Kb<=t)return this.w0();const i=this.d0;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.splice(0,s);if(i.length>0&&e<t){const s=t-e;0,n.push(zr(i[0],0,s)),i[0]=zr(i[0],s),e+=s}return this.Kb-=e,{d0:n,Kb:e}}m0(t){const i=this.v0(t);return 1===i.d0.length?i.d0[0]:wm(i.d0,i.Kb)}w0(){const t=this.g0();return this.d0=[],this.Kb=0,t}p0(){const t=1===this.d0.length?this.d0[0]:wm(this.d0,this.Kb);return this.d0=[],this.Kb=0,t}constructor(){this.d0=[],this.Kb=0}},gr=class{A0(t,i){}y0(){}b0(t){this.n_.l0(t),this.M0(!1)}T0(){this.M0(!0)}S0(){return 0!==this.Ea||0!==this.n_.Kb}M0(t){for(;0!==this.n_.Kb;){if(!t&&this.N0>this.n_.Kb)return;switch(this.Ea){case 0:this.I0(t);break;case 1:this.D0(t);break;case 2:this.E0(t)}}}k0(){this.Ea=0,this.N0=8}I0(t){const i=Al(this.n_._0(this.N0)),e=new da,s=Qe.sj(i,e);if(!s.JC)return this.N0=s.rj,void(t&&this.N0>this.n_.Kb&&this.L0(this.n_.Kb));const n=s.nj.YA;let r=s.nj.Kb;0===r&&(r=1/0),this.A0(n,r),this.x0(n)?this.C0(r):this.L0(r)}C0(t){this.Ea=1,this.N0=t}D0(t){const i=Al(this.n_.m0(this.N0)),e=new da,s=Qe.$C(i,e,!t);if(!s.JC)throw new uT(e.tc);this.y0(),this.j0(s.tj),this.k0()}L0(t){this.Ea=2,this.N0=0,this.O0=t}E0(t){const i=this.n_.v0(this.O0);this.O0-=i.Kb;for(const t of i.d0)this.R0(t);(0===this.O0||t&&this.O0===1/0)&&(this.y0(),this.k0())}constructor(){this.n_=new SC,this.Ea=0,this.N0=0,this.O0=0,this.k0()}};function NC(t){return t instanceof uA}function IC(t){return t instanceof hA}function DC(t){return t instanceof nA||t instanceof rA}function EC(t){return t instanceof kp}function kC(t){return t instanceof ap}function LC(t){return t instanceof Il}function xC(t){return t instanceof qp}function CC(t){return t instanceof AA}function jC(t){return t instanceof mA}function OC(t){return t instanceof gA}function RC(t){return t instanceof vA}function PC(t,i){const e=dl(t.boxes,OC);if(e&&e.flags.baseDataOffsetPresent)e.baseDataOffset=e.baseDataOffset.add(i);else for(const e of t.boxes)e instanceof vA&&e.flags.dataOffsetPresent&&(e.dataOffset=e.dataOffset+i)}r();var zC=class extends gr{start(t){this.JJ=t}transform(t){this.b0(t)}flush(){this.T0()}x0(t){return t===Rt.kx||t===Rt.mC||t===Rt.DC}j0(t){const i=this.P0(t);this.JJ.enqueue(i)}R0(t){this.JJ.enqueue(t)}P0(t){const i=ka(t.rI.rI);switch(t.YA){case"moov":return this.z0(i);case"sidx":return this.B0(i);case"moof":return this.U0(i)}return i}get Q0(){if(void 0===this.F0)throw new b("Expected to have found a movie header timescale.");return this.F0}Y0(t){const i=this.V0.get(t);if(void 0===i)throw new b("Expected to have found a media header timescale for track ID "+t+".");return i}z0(t){const i=zA(t);for(let t=0;t<i.boxes.length;t++){const e=i.boxes[t];e instanceof tA?i.boxes[t]=this.G0(e):e instanceof iA?i.boxes[t]=this.W0(e):e instanceof hA&&this.Z0(e)}for(const t of i.boxes)t instanceof Il&&this.H0(t);return i.serialize().join()}G0(t){this.F0=t.timescale;const i=QC(D.fromNumber(t.duration,!0),this.Q0,this.X0);return 0!==i.getHighBits()?this.W0(function(t){return new iA({creation:D.fromNumber(t.creationTime,!0),modification:D.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:D.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.X0,t.duration=i.toInt(),t)}W0(t){return this.F0=t.timescale,t.timescale=this.X0,t.duration=QC(t.duration,this.Q0,this.X0),t}Z0(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof nA?(i=s.trackId,t.boxes[e]=this.q0(s)):s instanceof rA?(i=s.trackId,t.boxes[e]=this.K0(s)):s instanceof kp?this.J0(s,i):s instanceof pp&&this.$0(s)}}q0(t){const i=QC(D.fromNumber(t.duration,!0),this.Q0,this.X0);return 0!==i.getHighBits()?this.K0(function(t){return new rA({creation:D.fromNumber(t.creationTime,!0),modification:D.fromNumber(t.modificationTime,!0),duration:D.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=i.toInt(),t)}K0(t){return t.duration=QC(t.duration,this.Q0,this.X0),t}J0(t,i){for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Np?t.boxes[e]=this.t1(s,i):s instanceof Ip&&(t.boxes[e]=this.i1(s,i))}}t1(t,i){this.V0.set(i,t.timescale);const e=QC(D.fromNumber(t.duration,!0),t.timescale,this.X0);return 0!==e.getHighBits()?this.i1(function(t){return new Ip({creation:D.fromNumber(t.creationTime,!0),modification:D.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:D.fromNumber(t.duration,!0)},t.language,t.flags)}(t),i):(t.timescale=this.X0,t.duration=e.toInt(),t)}i1(t,i){return this.V0.set(i,t.timescale),t.timescale=this.X0,t.duration=QC(t.duration,t.timescale,this.X0),t}$0(t){for(const i of t.boxes)i instanceof vp?this.e1(i):i instanceof wp&&this.s1(i)}e1(t){for(const i of t.entries)i.mediaTime=UC(i.mediaTime,this.Q0,this.X0),i.segmentDuration=UC(i.segmentDuration,this.Q0,this.X0)}s1(t){for(const i of t.entries)i.mediaTime=QC(i.mediaTime,this.Q0,this.X0),i.segmentDuration=QC(i.segmentDuration,this.Q0,this.X0)}H0(t){for(let i=0;i<t.boxes.length;i++){const e=t.boxes[i];e instanceof qp?this.n1(e):e instanceof Zp?t.boxes[i]=this.o1(e):e instanceof Hp&&(t.boxes[i]=this.a1(e))}}n1(t){const i=this.Y0(t.trackId);t.defaultSampleDuration=UC(t.defaultSampleDuration,i,this.X0)}o1(t){const i=QC(D.fromNumber(t.fragmentDuration,!0),this.Q0,this.X0);return 0!==i.getHighBits()?this.a1(function(t){return new Hp(D.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=i.toInt(),t)}a1(t){return t.fragmentDuration=QC(t.fragmentDuration,this.Q0,this.X0),t}B0(t){let i=BA(t);return i=i instanceof NA?this.u1(i):this.c1(i),i.serialize().join()}u1(t){const i=t.timescale,e=QC(D.fromNumber(t.earliestPresentationTime,!0),i,this.X0);if(0!==e.getHighBits())return this.c1(function(t){return new IA(t.referenceId,t.timescale,D.fromNumber(t.earliestPresentationTime,!0),D.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.X0,t.earliestPresentationTime=e.toInt();for(const e of t.references)e.subsegmentDuration=UC(e.subsegmentDuration,i,this.X0);return t}c1(t){const i=t.timescale;t.timescale=this.X0,t.earliestPresentationTime=QC(t.earliestPresentationTime,i,this.X0);for(const e of t.references)e.subsegmentDuration=UC(e.subsegmentDuration,i,this.X0);return t}U0(t){const i=UA(t),e=i.getSize();for(const t of i.boxes)t instanceof mA&&this.l1(t);const s=i.getSize();if(s!==e){const t=s-e;for(const e of i.boxes)e instanceof mA&&PC(e,t)}return i.serialize().join()}l1(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof gA?(i=this.Y0(s.trackId),this.d1(s,i)):s instanceof xc?t.boxes[e]=this.g1(s,i):s instanceof dA?t.boxes[e]=this._1(s,i):s instanceof vA&&this.v1(s,i)}}d1(t,i){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=UC(t.defaultSampleDuration,i,this.X0))}g1(t,i){const e=QC(D.fromNumber(t.baseMediaDecodeTime,!0),i,this.X0);return 0!==e.getHighBits()?this._1(function(t){return new dA(D.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),i):(t.baseMediaDecodeTime=e.toInt(),t)}_1(t,i){return t.baseMediaDecodeTime=QC(t.baseMediaDecodeTime,i,this.X0),t}v1(t,i){let e=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=UC(s,i,this.X0);n.duration=t-e,e=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=BC(n.compositionTimeOffset,i,this.X0))}}constructor(t){super(),this.V0=gc(),this.X0=t}};function BC(t,i,e){return D.fromInt(t,!1).multiply(e).divide(i).toNumber()}function UC(t,i,e){return D.fromInt(t,!0).multiply(e).divide(i).toNumber()}function QC(t,i,e){return iu.tU(t).TU(iu.iU(e,!0)).DU(iu.iU(i,!0)).fU()}var FC=class{w1(t){return t.pipeThrough(new La(this.m1))}constructor(t){this.m1=new zC(t)}};r(),r();var YC=function(t){return t[t.A1=64]="A1",t[t.b1=103]="b1",t[t.M1=107]="M1",t}({});function VC(t,i,e){const s=on(t,i);if(s!==e)throw new k("Expected descriptor with tag "+e+", but found "+s)}function GC(t,i){VC(t,i,3);const e=WC(t,i),s=i.tc+e,n=Ks(t,i),r=on(t,i),o=0!=(64&r),h=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=Ks(t,i)),o){c=ai(t,i,on(t,i))}h&&(l=ai(t,i,2));const d=function(t,i){VC(t,i,4);const e=WC(t,i),s=i.tc+e,n=on(t,i),r=on(t,i),o=r>>2,h=0!=(2&r),a=Vw(t,i,3),u=al(t,i),c=al(t,i);let l;if(i.tc<s){const e=function(t,i){return t.getUint8(i.tc)}(t,i);5===e&&(l=function(t,i){VC(t,i,5);const e=WC(t,i),s=ss(t,i,e);return{T1:5,S1:s}}(t,i))}return i.Wb(s),{T1:4,N1:n,I1:o,D1:h,E1:a,L1:u,C1:c,j1:l}}(t,i);return i.Wb(s),{T1:3,o:n,O1:u,zu:c,R1:a,P1:l,z1:d}}function WC(t,i){let e=0;for(let s=0;s<4;s++){const s=on(t,i);if(e=e<<7|127&s,!(128&s))break}return e}function ZC(t,i){const e=on(t,i),s=on(t,i),n=on(t,i),r=on(t,i),o=3&on(t,i),h=31&on(t,i),a=[];for(let e=0;e<h;e++){const e=Ks(t,i);a.push(ss(t,i,e))}const u=on(t,i),c=[];for(let e=0;e<u;e++){const e=Ks(t,i);c.push(ss(t,i,e))}return{B1:e,U1:s,Q1:n,F1:r,Y1:o,V1:a,G1:c}}function HC(t,i,e){if(e&&i.byte>=e)return;const s=t.$b(i.byte);return i.byte+=1,s}function XC(t,i){return function(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=256*s+HC(t,i);return s}(t,i,2)}r(),r(),r(),r(),r(),r();var qC=class t{W1(t){this.Z1=this.Z1.concat(t.Z1),this.H1+=t.V}X1(t,i,e){const s=this.H1,n=e-i;n>0&&(this.Z1.push({q1:i,K1:e,J1:n,t2:s,i2:t}),this.H1+=n)}$b(t){for(const i of this.Z1)if(i.t2<=t&&t<i.t2+i.J1)return i.i2[t+i.q1-i.t2]}e2(t,i){let e=i;for(const i of this.Z1){const s=i.K1;for(let n=i.q1;n<s;n+=1,e+=1)t[e]=i.i2[n]}return e}get V(){return this.H1}set V(t){const i=this.Z1;let e=this.H1-t;if(!(t>=this.H1))if(this.H1=t,0!==t)for(let t=i.length-1;t>=0;t-=1){const s=i[t];if(e<=s.J1)return s.K1-=e,s.J1-=e,void(i.length!==t+1&&(i.length=t+1));e-=s.J1}else i.length=0}get rI(){const t=new Array(this.H1);let i=0;for(const e of this.Z1){const s=e.K1;for(let n=e.q1;n<s;n+=1,i+=1)t[i]=e.i2[n]}return t}s2(){const t=new T(this.H1);let i=0;for(const e of this.Z1){const s=e.K1;for(let n=e.q1;n<s;n+=1,i+=1)t[i]=e.i2[n]}return t}Zb(i){const e=new t;for(const t of this.Z1)e.X1(t.i2,t.q1,t.K1);return e._Q=i||Ei({},this._Q),e}constructor(){this.H1=0,this.Z1=[],this._Q={}}};r();var KC=[128,64,32,16,8,4,2,1];function rl(t,i){const e=x.floor(i.bit/8),s=0==(t.$b(e)&KC[i.bit%8])?0:1;return i.bit+=1,s}function br(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=2*s+rl(t,i);return s}function $i(t,i){let e=0;for(;0===rl(t,i)&&e<32;)e+=1;return br(t,i,e)+2**e-1}function JC(t,i){const e=$i(t,i);return 1&e?x.floor((e+1)/2):-x.floor(e/2)}function $C(t,i){const e=[],s={byte:1};let n;do{e.push(ij(t,i,s)),n=i.$b(s.byte)}while(void 0!==n&&128!==n);return e}function tj(t,i){let e,s=0;do{e=HC(t,i),s+=e}while(255===e);return s}function ij(t,i,e){const s=tj(i,e),n=tj(i,e),r=e.byte,o=r+n;return e.byte=o,{n2:t,o2:s,h2:n,a2:r,u2:o,c2:i}}var ej=function(t){return t[t.l2=1]="l2",t[t.d2=2]="d2",t[t.f2=3]="f2",t[t.g2=4]="g2",t[t._2=5]="_2",t[t.w2=6]="w2",t[t.m2=7]="m2",t[t.A2=8]="A2",t[t.b2=9]="b2",t}({}),sj=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function nj(t,i,e){let s=8,n=8;for(let r=0;r<e;r+=1){if(0!==n){n=(s+JC(t,i)+256)%256}s=0===n?s:n}}var rj=class{M2(){const t=this.T2;let i=x.max(0,this.S2+t.length-2);const e=this.N2,s=e.V;let n=0;for(;i<s;i+=1){const s=e.$b(i);0===s?n+=1:(3===s&&n>=2&&t.push(i),n=0)}this.S2=i-t.length}I2(t){const i=this.T2;let e=t;for(const t of i){if(!(t<=e))return e;e+=1}return e}$b(t){if(!(t>this.N2.V))return t>this.S2&&this.M2(),this.N2.$b(this.I2(t))}constructor(t){this.T2=[],this.S2=0,this.N2=t}};function oj(t){const i=new rj(t);let e,s,n,r,o,h,a=0,u=0,c=0,l=0;const d=i.$b(1),f={bit:32};if($i(i,f),100===d||110===d||122===d||144===d){const t=$i(i,f);3===t&&(e=rl(i,f)),$i(i,f),$i(i,f),rl(i,f);if(1===rl(i,f))for(let e=0;e<(3!==t?8:12);e+=1){1===rl(i,f)&&nj(i,f,e<6?16:64)}}const g=$i(i,f),_=$i(i,f);if(0===_)$i(i,f);else if(1===_){rl(i,f),JC(i,f),JC(i,f);const t=$i(i,f);for(let e=0;e<t;e+=1)JC(i,f)}$i(i,f),rl(i,f);const v=$i(i,f),w=$i(i,f),m=rl(i,f);0===m&&rl(i,f),rl(i,f);1===rl(i,f)&&(a=$i(i,f),u=$i(i,f),c=$i(i,f),l=$i(i,f));if(1===rl(i,f)){if(1===rl(i,f)){const t=br(i,f,8);if(255===t)s=br(i,f,16),n=br(i,f,16);else{const i=sj[t];i&&(s=i[0],n=i[1])}}1===rl(i,f)&&rl(i,f);if(1===rl(i,f)){br(i,f,3),rl(i,f);1===rl(i,f)&&(br(i,f,8),br(i,f,8),br(i,f,8))}1===rl(i,f)&&($i(i,f),$i(i,f)),r=rl(i,f),1===r&&(o=br(i,f,32),h=br(i,f,32),rl(i,f))}return{width:x.floor(16*(v+1)-2*a-2*u),height:x.floor((2-m)*(w+1)*16-2*c-2*l),aR:s,uR:n,D2:r?h/(2*o):void 0,E2:e,L2:g}}function hj(t,i,e){void 0===e&&(e=1);const s=aT(pe.dj(t),Rt.mC);if(s&&0!==s.Z.length)return function(t,i,e){void 0===e&&(e=1);var s;let n;n=void 0!==i?dl(t.Z,(t=>t.nj.Fj===i)):t.Z[0];const r=null==n||null==(s=n.MR)?void 0:s.MR;return r?os(r,e):void 0}(s,i,e)}function aj(t){const i=aT(pe.dj(t),Rt.kx);if(!i)return;const e=i.nj.xj,s=[];for(const t of i.Z){const i=t.nj.Fj,e=t.zj.nj.xj;let h,a,u;for(const i of t.zj.Hj.Kj.$j.iO){const t=uj(i);var n,r,o;if(t)h=null!=(n=t.C2)?n:h,a=null!=(r=t.j2)?r:a,u=null!=(o=t.O2)?o:u}s.push({Fj:i,xj:e,C2:h,j2:a,O2:u})}return{xj:e,Z:s}}function uj(t){let i,e,s;if(t.YA===Rt.Yx){var n;const e=ZC(Al(t.OO.rI),new da);i=function(t){return"avc1."+cj(t.U1,2)+cj(t.Q1,2)+cj(t.F1,2)}(e),s=null==(n=function(t){if(0===t.V1.length)return;const i=t.V1[0],e=new qC;return e.X1(i,0,i.byteLength),oj(e)}(e))?void 0:n.D2}else if(t.YA===Rt.Gx||t.YA===Rt.Wx){const e=function(t,i){const e=i.qb(),s=Ru(t,e,8),n=Ru(t,e,2),r=Ru(t,e,1),o=Ru(t,e,5),h=Ru(t,e,32),a=[];for(let i=0;i<6;i++)a.push(Ru(t,e,8));const u=Ru(t,e,8);e.Gb(4);const c=Ru(t,e,12);e.Gb(6);const l=Ru(t,e,2);e.Gb(6);const d=Ru(t,e,2);e.Gb(5);const f=Ru(t,e,3);e.Gb(5);const g=Ru(t,e,3),_=Ru(t,e,16),v=Ru(t,e,2),w=Ru(t,e,3),m=Ru(t,e,1),p=Ru(t,e,2),A=Ru(t,e,8),y=[];for(let i=0;i<A;i++){const i=Ru(t,e,1);e.Gb(1);const s=Ru(t,e,6),n=Ru(t,e,16),r=[];for(let i=0;i<n;i++){const i=Ru(t,e,16),s=ss(t,new da(e.tc>>3),i);e.Gb(8*i),r.push({R2:i,P2:s})}y.push({z2:i,B2:s,U2:n,Q2:r})}return{B1:s,F2:n,Y2:r,V2:o,G2:a,W2:u,Z2:c,H2:l,X2:h,q2:d,K2:f,J2:g,t4:_,i4:w,e4:m,s4:v,Y1:p,n4:A,r4:y}}(Al(t.BO.rI),new da);i=function(t,i){let e=t.toString()+".";switch(i.F2){case 0:break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C";break;default:return}switch(e+=i.V2.toString()+".",e+=function(t){let i=t;return i=i>>>1&1431655765|(1431655765&i)<<1,i=i>>>2&858993459|(858993459&i)<<2,i=i>>>4&252645135|(252645135&i)<<4,i=i>>>8&16711935|(16711935&i)<<8,i=i>>>16|i<<16,i}(i.X2).toString(16)+".",i.Y2){case 0:e+="L";break;case 1:e+="H";break;default:return}e+=i.W2.toString();const s=i.G2.reduce(((t,i)=>0===t?i:i+1),0);for(let t=0;t<s;t++)e+="."+i.G2[t].toString(16).toUpperCase();return e}(t.YA,e)}else if(t.YA===Rt.eC||t.YA===Rt.sC||t.YA===Rt.nC||t.YA===Rt.rC){const e=function(t,i){const e=i.qb(),s=Ru(t,e,8),n=Ru(t,e,8),r=Ru(t,e,7),o=Ru(t,e,6),h=Boolean(Ru(t,e,1)),a=Boolean(Ru(t,e,1)),u=Boolean(Ru(t,e,1)),c=Ru(t,e,4);return Ru(t,e,28),Ru(t,e,32),Ru(t,e,32),Ru(t,e,32),Ru(t,e,32),{o4:s,h4:n,a4:r,u4:o,c4:h,l4:a,d4:u,f4:c}}(Al(t.JO.rI),new da);i=function(t,i){const e=t.toString(),s=_c(i.a4.toString(),2,"0"),n=_c(i.u4.toString(),2,"0");return e+"."+s+"."+n}(t.YA,e)}else if(t.YA===Rt.Hx){const e=function(t,i){const e=i.qb(),s=Ru(t,e,8);e.Gb(24);const n=Ru(t,e,8),r=Ru(t,e,8),o=Ru(t,e,4),h=Ru(t,e,3),a=To(t,e),u=Ru(t,e,8),c=Ru(t,e,8),l=Ru(t,e,8),d=Ru(t,e,16),f=new Array(8);for(let i=0;i<d;i++)f[i]=Ru(t,e,8);return{B1:s,a4:n,u4:r,g4:o,_4:h,v4:a,nR:u,rR:c,oR:l,w4:d,m4:f}}(Al(t.QO.rI),new da);i=function(t,i){let e=t.toString()+".";return e+="0"+i.a4+".",e+=_c(""+i.u4,2,"0")+".",e+=_c(""+i.g4,2,"0")+".",e+=_c(""+i._4,2,"0")+".",e+=_c(""+i.nR,2,"0")+".",e+=_c(""+i.rR,2,"0")+".",e+=_c(""+i.oR,2,"0")+".",e+="0"+i.v4,e}(t.YA,e)}else if(t.YA===Rt.qx){const e=function(t,i){const e=i.qb();e.Gb(1);const s=Ru(t,e,7),n=Ru(t,e,3),r=Ru(t,e,5),o=To(t,e),h=To(t,e),a=To(t,e),u=To(t,e),c=To(t,e),l=To(t,e),d=Ru(t,e,2);e.Gb(3);const f=To(t,e);let g;return f?g=Ru(t,e,4):e.Gb(4),{cj:s,A4:n,y4:r,b4:o,M4:h,T4:a,S4:u,N4:c,I4:l,D4:d,E4:f,L4:g}}(Al(t.VO.rI),new da);i=function(t,i,e){let s=t.toString()+".";if(s+=i.A4+".",s+=""+_c(""+i.y4,2,"0"),s+=(0===i.b4?"M":"H")+".",s+=(1===i.T4?12:10)+".",s+=(1===i.A4?0:i.S4)+".",s+=""+i.N4+i.I4+(1===i.N4&&1===i.I4?i.D4:"0"),e&&e.sR===oT.ON_SCREEN_COLOURS){const t=e;s+="."+_c(""+t.nR,2,"0")+"."+_c(""+t.rR,2,"0")+"."+_c(""+t.oR,2,"0")+"."+(t.hR?1:0)}return s}(t.YA,e,t.GO)}else if(t.YA===Rt.uC){e=function(t){const i=t.z1;switch(i.N1){case YC.A1:return function(t){var i;if(!(null==(i=t.j1)?void 0:i.S1))return"mp4a.40";const e=function(t,i){let e=Ru(t,i,5);31===e&&(e=32+Ru(t,i,6));const s=Ru(t,i,4);let n;return 15===s&&(n=Ru(t,i,24)),{x4:e,C4:s,j4:n,O4:Ru(t,i,4)}}(Al(t.j1.S1),new kw);return"mp4a.40."+e.x4}(i);case YC.b1:return"mp4a.40.2";case YC.M1:return"mp4a.40.34"}}(GC(Al(t.IO.rI),new da))}else if(t.YA===Rt.lC)e="fLaC";else{if(t.YA!==Rt.oC)return(t.YA===Rt.wC||t.YA===Rt.vC)&&t.HO?uj(t.HO):void 0;e="ec-3"}return{C2:i,j2:e,O2:s}}function cj(t,i){const e=t.toString(16);return _c(e,i,"0")}function lj(t,i){const e=pe.dj(Al(t)),s=function(t,i){let e;for(const n of t.Z){var s;const t=null==(s=n.MR)?void 0:s.MR;if(t){const s=n.nj.Fj,r=dl(i.Z,(t=>t.Fj===s)),o=H.tU(t,r.xj);e&&!o.WB(e)||(e=o)}}return e}(aT(e,Rt.mC),i),n=aT(e,Rt.SC);return{lB:s.BB(),R4:n.rI}}r(),r();var dj=Ro.qf,fj=class extends tu{get PK(){return this.WK}set PK(t){this.WK=t}get QK(){return this.XK}set QK(t){this.XK=t}get ca(){return this.P4||this.z4.updating}B4(t,i,e){switch(t.YA){case Me.v$:case Me.jN:return this.U4((e=>this.Q4(t,i,e)),e);case Me.w$:throw new b("Opaque segments are not supported on web.")}}F4(t,i){switch(t.YA){case Me.v$:return this.U4((i=>this.Y4(t,i)),i);case Me.jN:throw new b("Streaming initialization segments are not supported on web.");case Me.w$:throw new b("Opaque initialization segments are not supported on web.")}}async Y4(t,i){this.V4?this.G4=aj(Al(t.rI)):(await this.W4(t,void 0,i),dj&&(this.Z4=!1,this.H4=t))}async Q4(t,i,e){dj&&this.Z4&&this.H4&&await this.Y4(this.H4,e);try{if(yi(e),this.V4&&this.G4){const n=await async function(t,i){switch(t.YA){case Me.v$:return t;case Me.jN:{const e=await Wy(t.rI,i);return yi(i),{YA:Me.v$,rI:new T(e)}}case Me.w$:throw new b("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,e),r=lj(n.rI,this.G4);var s;t={YA:Me.v$,rI:r.R4},i=Ei({},i,{rQ:r.lB+(null!=(s=i.rQ)?s:0)})}await this.W4(t,i,e),this.yo(new Jr(po.g$))}finally{t.YA===Me.jN&&t.rI.cancel(new J).catch(Bn)}}async W4(t,i,e){switch(yi(e),i&&await this.X4(i),t.YA){case Me.v$:if(this.q4){const i=this.q4.w1(Yy(t.rI));return await this.K4(i,e)}return await this.J4(t.rI);case Me.jN:if(this.q4){const i=this.q4.w1(t.rI);return await this.K4(i,e)}return await this.K4(t.rI,e)}}async K4(t,i){const e=this.t3.TE,s=MC(t).getReader();let n=!1;try{for(;;){const t=await Ao(s.read(),i);if(t.done){n=!1;break}yi(i);const e=ih(t.value);n=!0,await this.J4(e)}}catch(t){if(s.cancel(t).catch(Bn),n){await this.i3();const t=this.t3.TE.Sn(e._P());for(let i=0;i<t.V;i++)await this.e3(t.Cn(i),t.jn(i))}throw t}}s3(t,i){return this.U4((()=>this.n3(t,i)))}async n3(t,i){this.z4.appendWindowStart===t&&this.z4.appendWindowEnd===i||(await this.i3(),this.z4.appendWindowStart=0,this.z4.appendWindowEnd=i,this.z4.appendWindowStart=t)}async X4(t){if(this.z4.timestampOffset!==t.rQ)try{this.z4.timestampOffset=t.rQ}catch(i){await this.i3(),this.z4.timestampOffset=t.rQ}}async J4(t){this.z4.appendBuffer(t),this.r3=!0,await this.o3()}h3(t,i,e){return this.U4((e=>this.e3(t,i,e)),e)}async e3(t,i,e){yi(e),this.z4.remove(t,i),await this.o3()}o3(){const t=this.t3.TE;return new Promise(((i,e)=>{let s,n=!1,r=()=>{n=!0},o=()=>{n=!1,s="error"},h=()=>{n=!1,s="aborted"},a=()=>{n=!1,s="sourceclose",u()},u=()=>{c(),n&&!s?(t.IP(this.t3.TE)||this.yo(new Jr(po.g$)),i()):e(new b(s))},c=()=>{this.z4.removeEventListener("update",r),this.z4.removeEventListener("error",o),this.z4.removeEventListener("abort",h),this.z4.removeEventListener("updateend",u),this.a3.fn(Oc.A$,a)};this.z4.addEventListener("update",r),this.z4.addEventListener("error",o),this.z4.addEventListener("abort",h),this.z4.addEventListener("updateend",u),Ro.Nf&&Ro.Df<3&&this.a3.yn(Oc.A$,a)}))}u3(){return this.U4((()=>this.i3()))}async i3(){if(this.a3.fk===Lj.KI){dj&&(this.Z4=!0),this.z4.updating&&(this.P4=!0);try{this.z4.abort()}catch(t){0,this.P4=!1}this.ca&&await this.o3().catch(Bn)}}l3(){return"function"==typeof this.z4.changeType&&!Ro.Mf}D$(t){if(this.d3(),this.a3.fk===Lj.f3)return;var i;this.g3=t;const e=null!=(i=this.a3._3(t.VN))?i:t.VN;this.V4=gj(t.VN,this.v3),this.l3()&&!Wn(this.v3,e)&&(this.v3=e,this.z4.changeType(this.v3))}w3(){this.a3.fk!==Lj.qy||this.m3||this.ca||(this.z4.timestampOffset=this.z4.timestampOffset,this.a3.A3())}async U4(t,i){this.d3();const e=new Wt;e.Sy(this.y3.ly),i&&e.Sy(i);try{this.m3=t(e.ly),await this.m3,this.a3.A3(),this.ca&&await this.o3()}finally{this.m3=void 0,e.wy()}}d3(){if(this.m3)throw new b("Internal error")}async wy(){this.Bo(),this.y3.Ty(),this.m3&&(await this.m3.catch(Bn),this.m3=void 0),this.z4.removeEventListener("updateend",this.b3),this.z4.removeEventListener("bufferedchange",this.M3)}constructor(t,i,e,s,n){var r;if(super(),this.WK=20,this.XK=30,this.P4=!1,this.r3=!1,this.m3=void 0,this.y3=new Wt,this.Z4=!1,this.H4=void 0,this.V4=!1,this.G4=void 0,this.b3=()=>{this.P4=!1},this.M3=t=>{t.removedRanges&&this.yo(new Jr(po.g$))},this.a3=i,this.t3=t,this.z4=e,this.z4.addEventListener("updateend",this.b3),this.z4.addEventListener("bufferedchange",this.M3),this.g3=s,this.v3=n,this.V4=gj(s.VN,n),null==(r=i.md)?void 0:r.jp){var o;const t=null!=(o=i.md.T3)?o:1e5;this.q4=new FC(t)}}};function gj(t,i){return I(t,"audio/mp4")&&I(i,"audio/mpeg")}Uc(),r();var _j=class{get TE(){if(this.S3.fk===Lj.f3)return Mo.PP();let t=Mo.xn(this.z4.buffered).Sn(new Mo([0,1/0]));const i=this.N3;return void 0!==i&&t.V>0&&t.jn(t.V-1)===i&&(t=t.pP(Mo.OP(i))),t}F$(){return!!this.N3&&this.TE.fP().gr(this.N3)}I3(){const t=this.TE;this.N3=t.V>0?t.jn(t.V-1):0,this.S3.D3()}w3(){this.N3=void 0}constructor(t,i){this.N3=void 0,this.S3=i,this.z4=t}};function vj(t){const i=t.CS("codecs");return i?i.split(",").map((t=>t.trim())):[]}function wj(t,i){return!("opus"===t)&&!("opus"===i)||t===i}function mj(t,i){const e=pj(t)||Aj(t),s=pj(i)||Aj(i);return!e&&!s||t.split(".")[0]===i.split(".")[0]}function pj(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function Aj(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function Wo(t,i){if(t===i)return!0;const e=t.split("."),s=i.split("."),n=e[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,i]=e,[,n,r]=s;if(t!==n)return!1;if(Number(i)!==Number(r))return!1}return!0}function yj(t,i,e,s,n,r,o){const h=new _j(n,t),a=new fj(h,t,n,e,r);return new bj(t,i,e,s,h,a,o)}r();var bj=class extends tu{get TE(){return this.t3.TE}get md(){return this.KS}get VN(){return this.WS}get E3(){return this.L3}get x3(){return this.C3.J$}get PK(){return this.j3.PK}set PK(t){this.j3.PK=t}get QK(){return this.j3.QK}set QK(t){this.j3.QK=t}get ca(){return this.j3.ca}F$(){return this.t3.F$()}I3(){this.t3.I3()}w3(){this.t3.w3(),this.j3.w3()}O3(t,i){this.C3.i0(t,i)}R3(t,i){this.C3.e0(t,i)}P3(){return this.j3.u3()}B4(t,i,e){return this.j3.B4(t,i,e)}F4(t,i,e){return this.j3.F4(t,e)}s3(t,i){return Ro.Nf&&Ro.Df<3?this.j3.s3(t,1/0):this.j3.s3(t,i)}async wS(t,i,e){this.R3(t,i);const s=this.TE;await this.j3.h3(t,i,e);const n=0!==s.V&&0===this.TE.V;(Ro.ag||Ro.kf)&&n&&this.cz.Wb(this.cz.LE)}N$(t){const i=t.VN;if(this.WS===i)return!0;const e=this.z3.get(i);if(void 0!==e)return e;const s=this.B3(t);return this.z3.set(i,s),s}B3(t){const i=this.a3._3(t.VN);if(void 0===i)return!1;const e=Yn(this.WS),s=Yn(i),n=vj(e),r=vj(s);if(this.j3.l3()){if(!function(t,i){return aw(t,i,mj)}(n,r))return!1;if(Ro.dg&&!function(t,i){return aw(t,i,wj)}(n,r))return!1}else{if(e.YA!==s.YA)return!1;if(!function(t,i){return aw(t,i,Wo)}(n,r))return!1}return!0}async D$(t){const i=t.VN;this.WS!==i&&(this.z3.clear(),this.j3.D$(t),this.WS=i),this.KS=t,this.a3.U3()}async wy(){this.z3.clear(),this.Bo(),this.C3.gn();try{this.j3.fn(po.g$,this.Ds),await this.j3.wy()}catch(t){}}constructor(t,i,e,s,n,r,o){super(),this.z3=ll(),this.a3=t,this.KS=e,this.WS=e.VN,this.L3=s,this.cz=i,this.t3=n,this.j3=r,this.C3=o,this.j3.yn(po.g$,this.Ds)}};r(),Qi();var Xu=class{Q3(){let t=this.Cn,i=this.jn;if(this.F3||this.Y3){const e=.001*(Fe.Og()-this.V3);this.F3&&(t+=e),this.Y3&&(i+=e)}return Mo.RP(t,i)}constructor(t,i,e=!1,s=!1){this.Cn=t,this.jn=i,this.F3=e,this.Y3=s,this.V3=Fe.Og()}};Uc(),r(),bs(),Qi(),r();var Mj=.5,Tj=[Zi.so,Zi.wb,Zi.Mb,Zi.bb,Zi.eb,Zi.ob,Zi.qy,Zi.pb,E.lL,Xi.ua],Sj=class{G3(t){this.W3.push(t),t.yn(AC.X$,this.Z3)}get J$(){return this.W3.reduce(((t,i)=>t.pP(i.J$)),Mo.PP())}gn(){this.H3(),this.X3.fn(E.lL,this.q3),this.cz.fn(Zi.mb,this.q3),this.cz.fn(Tj,this.K3),this.W3.forEach((t=>t.fn(AC.X$,this.Z3))),this.J3(),this.t5=!0}W$(t){if(this.cz.OE)return!1;if(0!==this.i5)return!1;const i=this.t3.TE,e=i.bP(t);if(e>=0&&t+Mj<i.jn(e))return!1;const s=e>=0?e+1:i.LP(t);if(s<0||s>=i.V)return!1;const n=i.Cn(s);if(Mo.RP(t,n).yP(this.J$).jP>1)return!1;if(0===t&&!this.cz.wk)return this.e5(t,n,2e3),!0;if(Fe.hE)return this.e5(t,n,250),!0;return!(x.abs(n-t)<=.001)&&(this.s5(n),!0)}e5(t,i,e){this.J3(),this.n5=t,this.cz.yn(Zi.Mb,this.r5),this.i5=Fe.Pg((()=>{this.n5===this.cz.LE&&this.s5(i),this.J3()}),e)}J3(){0!==this.i5&&(this.cz.fn(Zi.Mb,this.r5),Fe.Rg(this.i5),this.i5=0)}s5(t){this.cz.Wb(t,!1,!0)}o5(){0!==this.h5&&(Fe.Rg(this.h5),this.h5=0),this.cz.fn(Zi.Eb,this.Kl)}a5(){this.t5||0===this.u5&&(this.o5(),this.u5=Fe.dA(this.c5,250))}H3(){0!==this.u5&&(Fe.fA(this.u5),this.u5=0),this.o5(),this.cz.wk||(this.l5=0)}d5(){return!this.cz.KE&&!this.cz.wk&&0!==this.cz.$E&&!this.cz.OE&&!this.cz.lt&&(this.f5()||this.X3.fk>=Fn.Dz)}f5(){const t=this.cz.LE,i=this.t3.TE,e=i.bP(t);return-1!==e&&i.jn(e)>t+Mj}g5(t,i){const e=i.bP(t);return e>-1?i.jn(e):t}constructor(t,i,e,s){this.t3=t,this.X3=i,this.cz=e,this.t5=!1,this.W3=[],this.i5=0,this.h5=0,this._5=0,this.n5=0,this.l5=0,this.u5=0,this.v5=1,this.Z3=t=>{const i=this.cz.LE,e=t.K$.gr(i),s=t.K$.gr(i,Mj)&&this.cz.fk<=Fn.Iz;(e||s)&&this.W$(i)},this.q3=ze((t=>{if(this.t5)return;if(this.X3.fk<=Fn.Iz){const t=this.cz.LE;this.W$(t)||this.c5()}else this.J3()}),100),this.Kl=ze((t=>{this.a5()}),100),this.r5=t=>{t.currentTime!==this.n5&&this.J3()},this.K3=()=>{this.d5()?0===this.u5&&(this.cz.yn(Zi.Eb,this.Kl),this.h5=Fe.Pg((()=>{this.a5()}),3500)):this.H3()},this.c5=()=>{const t=this._5,i=this.l5,e=this.cz.LE,s=Fe.Og(),n=this.t3.TE;if(t!==e)return this._5=e,this.l5=s,this.v5=1,void(this.w5=Fe.uE?2e3:1e3);if(this.d5()&&0!==n.V&&i>0&&s>i+this.w5){let t;const i=this.J$.fP().yP(n),s=i.kP(e);if(-1!==s){const n=i.Cn(s);if(n-e<1){const e=i.jn(s);0,t=e}}var r;if(!t)t=null==(r=this.m5)?void 0:r.determineStallJumpTarget(),t||(t=e+.01*this.v5,n.gr(t)||(t=this.g5(e,n)));0,this._5=t,this.v5++,this.w5=x.min(2*this.w5,1e4),this.s5(t)}},this.X3.yn(E.lL,this.q3),this.cz.yn(Zi.mb,this.q3),this.cz.yn(Tj,this.K3),this.m5=s,this.w5=Fe.uE?2e3:1e3}};function Nj(t){const i=[];if(t.p5&&i.push(t.p5.TE),t.A5&&i.push(t.A5.TE),0===i.length)return Mo.PP();let e=0;for(const t of i)t.V>0&&(e=x.max(e,t.jn(t.V-1)));const s=t.F$;let n=new Mo([0,e],[!0,s]);for(let t of i)s&&t.V>0&&(t=t.pP(new Mo([t.jn(t.V-1),e],[!0,!0]))),n=n.Sn(t);return n}function Ij(t,i,e){const s=t.TE;let n,r=s.bP(i);if(r>=0){if(!(r+1<s.V))return Promise.resolve();n=s.Cn(r+1)}else{if(r=s.LP(i),!(r>=0))return Promise.resolve();n=s.Cn(r)}return t.wS(n,1/0,e)}function Dj(t,i,e){if(!t.gr(i)){const s=t.bP(i,e);if(s>=0){const e=t.Cn(s);if(i<e)return e}}return i}r();var Ej=Ro.zf||Ro.Uf,kj=Ro.Wf||Ro.qf||Ro.Ka,Lj=function(t){return t.f3="closed",t.KI="open",t.qy="ended",t}({}),xj=class extends wC{get p5(){return this.y5}get A5(){return this.b5}get ct(){if(this.M5)return this.M5;const t=this.vV.duration;return t===jt?1/0:t}T5(t){if(j(t)||t<0)throw new b("Invalid duration");this.S5()?this.N5(t):this.M5=t}N5(t){const i=t===1/0;if(i&&this.vV.setLiveSeekableRange){const t=2**39;this.vV.setLiveSeekableRange(0,t)}this.vV.duration=i?kj?1/0:jt:t,this.M5=void 0}get TE(){return Ej?Nj(this):function(t,i){let e=i;return e.V>0&&t.F$&&(e=e.pP(Mo.OP(e.jn(e.V-1)))),e}(this,Mo.xn(this.vN.buffered))}get Y$(){var t;return null==(t=this.y5)?void 0:t.TE}get V$(){var t;return null==(t=this.b5)?void 0:t.TE}get _k(){return this.I5.Q3().Sn(new Mo([0,this.ct],[!0,!0]))}D5(t,i,e,s){this.I5=new Xu(t,i,!!e,!!s)}get F$(){return(!this.y5||this.y5.F$())&&(!this.b5||this.b5.F$())}get fk(){return this.vV.readyState}async FK(){const t=this.KS,i=dl(t.E5,(t=>I(t.VN,"audio"))),e=dl(t.E5,(t=>I(t.VN,"video")));if(this.vN.disableRemotePlayback=!0,await this.k5(),i){const t=new bC;var s;this.L5.G3(t);const e=null!=(s=this._3(i.VN))?s:i.VN;this.x5=this.vV.addSourceBuffer(e),this.y5=yj(this,this.cz,i,Ri.SI,this.x5,e,t),this.y5.yn(po.g$,this.M3)}if(e){const t=new bC;var n;this.L5.G3(t);const i=null!=(n=this._3(e.VN))?n:e.VN;this.C5=this.vV.addSourceBuffer(i),this.b5=yj(this,this.cz,e,Ri.NI,this.C5,i,t),this.b5.yn(po.g$,this.M3)}this.E$.$n(this,t)}async k5(){await super.B$(this.vV),"open"!==this.fk&&await ku(this.vV,"sourceopen")}S5(){if("open"!==this.fk)return!1;const t=this.y5&&this.y5.ca,i=this.b5&&this.b5.ca;return!(t||i)}I3(){this.j5=!0,this.y5&&this.y5.I3(),this.b5&&this.b5.I3(),this.j5=!1,this.O5()}w3(){this.y5&&this.y5.w3(),this.b5&&this.b5.w3()}N$(t){const i=dl(t.E5,(t=>I(t.VN,"audio"))),e=dl(t.E5,(t=>I(t.VN,"video")));if(this.y5){if(!i)return!1;if(!this.y5.N$(i))return!1}else if(i)return!1;if(this.b5){if(!e)return!1;if(!this.b5.N$(e))return!1}else if(e)return!1;return!!super.N$(t)}async D$(t){const i=dl(t.E5,(t=>I(t.VN,"audio"))),e=dl(t.E5,(t=>I(t.VN,"video"))),s=[];this.y5&&s.push(this.y5.D$(i)),this.b5&&s.push(this.b5.D$(e)),await Promise.all(s),await super.D$(t)}k$(t){super.k$(t)}async wy(){if(this.vV.removeEventListener("sourceclose",this.R5),Ro.kf&&await this.Q$(),this.y5){if(await this.y5.wy(),this.y5=void 0,wc()&&(Ro.kf||Ro.Nf))try{this.vV.removeSourceBuffer(this.x5)}catch(t){}this.x5=void 0}if(this.b5){if(await this.b5.wy(),this.b5=void 0,wc()&&(Ro.kf||Ro.Nf))try{this.vV.removeSourceBuffer(this.C5)}catch(t){}this.C5=void 0}this.vN.src&&URL.revokeObjectURL(this.vN.src),this.vN.disableRemotePlayback=!1,this.cz.fn([Zi.Mb,Zi.eb],this.P5),this.L5.gn(),Ro.Nf&&await this.Q$(),await super.wy()}U3(){const t=this.KS,i=t.E5.map((t=>I(t.VN,"audio")&&this.y5?this.y5.md:I(t.VN,"video")&&this.b5?this.b5.md:t));this.KS=Ei({},t,{E5:i})}D3(){this.j5||this.O5()}get z5(){if(!this.F$)return!1;const t=this.TE;return 0!==t.V&&t.Cn(t.V-1)<=this.cz.LE}O5(){this.z5&&this.S5()&&(this.vV.endOfStream(),this.M5=void 0,this.yo(new Jr(Oc.m$)),this.cz.M3())}A3(){this.S5()&&(this.F$?this.O5():void 0!==this.M5&&this.N5(this.M5))}W$(t){return this.L5.W$(t)}Z$(){return!0}_3(t){return Cj(this.B5,t)}static H$(t){const i=Wf(t.U5);if(void 0===i)return!1;if("function"!=typeof i.isTypeSupported)return!1;const e=new dc(t.U5);for(const i of t.E5)if(void 0===Cj(e,i.VN))return!1;return!0}constructor(t,i,e,s,n,r=new dc(t.U5),o){super(t,i,s,n),this.y5=void 0,this.x5=void 0,this.b5=void 0,this.C5=void 0,this.I5=new Xu(0,1/0),this.M5=void 0,this.j5=!1,this.R5=()=>{this.yo(new Jr(Oc.A$))},this.Q5=()=>{this.yo(new Jr(Oc.b$))},this.P5=()=>{this.O5()},this.M3=()=>{this.cz.M3()},this.B5=r,this.vV=this.B5.Yp(),this.vV.addEventListener("sourceclose",this.R5),this.vV.addEventListener("sourceopen",this.Q5),this.cz.yn([Zi.Mb,Zi.eb],this.P5),this.L5=new Sj(this,e,this.cz,o)}};function Cj(t,i){const e=Yn(i),s=vj(e),n="audio/mp4"===e.YA,r=n&&1===s.length&&"mp4a.40.34"===s[0];if(t.Gp(i)&&(!r||!Ro.qf))return i;if(r){const i=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const e of i)if(t.Gp(e))return e}if(n&&1===s.length&&"flac"===s[0].toLowerCase()){const e=["flac","fLaC","FLAC"];for(const s of e){const e='audio/mp4; codecs="'+s+'"';if(t.Gp(i))return e}}}r(),bs(),r();var Iu=class extends Jr{constructor(t){super(Zi.eb),this.currentTime=t}},jj=[Zi.kb,Zi.pb,Zi.Mb,Zi.eb,Zi.so,Zi.wb],Oj=class extends tu{get LE(){return this.EG}get F5(){return this.Y5}get V5(){return this.G5}get ct(){return this.JM}get OE(){return this.W5}get KE(){return this.CG}get fk(){return this.Z5}get wk(){return this.kG}get WE(){return this.xG}set WE(t){this.WE!==t&&(this.xG=t,this.yo(new $e(this.LE,this.Nk)))}get $E(){return this.jG}set $E(t){this.$E!==t&&(this.jG=t,this.yo(new Pu(this.LE,this.$E)))}get Nk(){return this.cT}set Nk(t){this.Nk!==t&&(this.cT=t,this.yo(new $e(this.LE,this.Nk)))}Wb(t,i,e){this.EG!==t&&(this.EG=t,this.Y5=i,e&&!this.kG?(this.G5=!0,this.yo(new Iu(this.LE))):(this.G5=!1,this.kG=!0,this.yo(new Yr(this.LE))))}Rk(){this.CG||(this.CG=!0,this.yo(new Se(this.LE)))}Pk(){this.CG&&(this.CG=!1,this.yo(new fi(this.LE)))}wy(){this.Bo()}constructor(t,i,e,s,n,r,o,h,a,u,c){super(),this.EG=t,this.JM=i,this.W5=e,this.CG=s,this.kG=n,this.xG=r,this.jG=o,this.cT=h,this.Z5=a,this.Y5=u,this.G5=c}};function Rj(t){return new Oj(t.LE,t.ct,t.OE,t.KE,t.wk,t.WE,t.$E,t.Nk,t.fk,!1,t.V5)}function Pj(t,i){i.ct===t.ct||j(i.ct)&&j(t.ct)||t.yo(new yt(t.ct)),t.WE=i.WE,t.Nk=i.Nk,t.$E=i.$E,i.KE?t.Rk():t.Pk().catch(Bn),i.LE!==t.LE||i.fk>Fn.Nz&&t.fk===Fn.Nz?t.Wb(i.LE,i.F5,i.V5):!i.wk&&t.wk?t.yo(new Yr(t.LE)):i.wk&&!t.wk&&t.fk>=Fn.Iz&&t.yo(new aa(t.LE)),!i.OE&&t.OE&&t.yo(new fa(t.LE))}r(),r();var zj=class extends tu{get fk(){return this.gk()}H5(t){this.qQ!==t&&(this.qQ=t,this.yo(new cu(this.cz.LE,t)))}X5(){this.H5(this.gk())}tr(){this.H5(Fn.Nz)}wy(){this.Bo()}constructor(t){super(),this.qQ=Fn.Nz,this.q5=()=>{this.X5()},this.cz=t}};r();var Bj=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],Uj=class extends zj{gk(){let t=this.cz.gV.readyState;return t>Fn.Iz&&this.cz.K5?Fn.Iz:(this.cz.gV.seeking&&t>Fn.Xn&&(t=Fn.Xn),t)}wy(){for(const t of Bj)this.cz.gV.removeEventListener(t,this.q5);super.wy()}constructor(t){super(t);for(const t of Bj)this.cz.gV.addEventListener(t,this.q5)}};r();var Qj=class extends zj{gk(){if(this.cz.gV.readyState===Fn.Nz)return Fn.Nz;const t=this.J5(),i=t?t.jn-t.Cn:0;if(!t)return Fn.Xn;const e=this.cz.$E;return this.t6()||i>=3*e?Fn.Ez:i>=3?Fn.Dz:Fn.Iz}J5(){const t=this.cz.LE,i=this.cz.TE.mP(.04),e=i.bP(t);if(!(e<0))return{Cn:t,jn:i.jn(e)}}t6(){if(this.cz.OE)return!0;const t=this.cz.ct,i=this.J5();return!!i&&t-i.jn<=.16666666666666666}wy(){this.cz.fn([Zi.Mb,Zi.eb],this.q5);for(const t of Bj)this.cz.gV.removeEventListener(t,this.q5);super.wy()}constructor(t){super(t),this.cz.yn([Zi.Mb,Zi.eb],this.q5);for(const t of Bj)this.cz.gV.addEventListener(t,this.q5)}};bs(),r(),r();var Fj=[E.lL,Zi.so,Zi.wb,Zi.Mb,Zi.bb,Zi.eb,Zi.ob,Zi.qy,Xi.ua],Yj=class extends tu{i6(){return(!this.GQ.V5||!this.GQ.e6)&&this.GQ.fk<Fn.Dz}s6(){return!this.GQ.wk&&!(this.GQ.KE||this.GQ.OE||this.GQ.lt||this.i6())}Yn(){const t=this.n6;this.n6=this.s6(),!t&&this.n6&&this.yo(new te(this.GQ.LE))}tr(){this.n6=!1}wy(){this.Bo(),this.GQ.fn(Fj,this.Rq)}constructor(t){super(),this.n6=!1,this.Rq=()=>{this.Yn()},this.GQ=t,this.GQ.yn(Fj,this.Rq)}},Vj=class extends Yj{s6(){return this.r6&&super.s6()}Yn(){this.r6&&(this.vN.paused||this.vN.ended||this.vN.error)&&(this.r6=!1),super.Yn()}tr(){super.tr(),this.r6=!1}wy(){this.vN.removeEventListener(E.oP,this.eF),super.wy()}constructor(t){super(t),this.r6=!1,this.eF=()=>{this.r6=!0,this.Yn()},this.vN=t.gV,this.vN.addEventListener(E.oP,this.eF)}};r();var _r=class extends Jr{constructor(t){super(Xi.ua),this.lt=t}};function Gj(t,i){return t.lB<=i&&t.dB>i}function Ze(t,i){return function(t,i){return Zv(t.lB,i.lB,rN)}(t,i)||function(t,i){return Zv(t.dB,i.dB,rN)}(t,i)}function Wj(t,i){return function(t,i){return Zv(t.pB,i.pB,rN)}(t,i)||function(t,i){return Zv(t.AB,i.AB,rN)}(t,i)}function Zj(t,i,e){let s=function(t,i,e,s,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=t.length);let h=r,a=o-1;for(;h<=a;){const o=h+(a-h>>1),u=s(e(t[o]),i);if(u<0)h=o+1;else if(u>0)a=o-1;else{if(!(n&&o>r&&0===s(e(t[o-1]),i)))return o;a=o-1}}return~h}(t,i,fd,e,!0);if(s<0)return s;for(;s<t.length&&e(i,t[s])===nn.Zr;s++)if(t[s].DB(i))return s;return-(s+1)}function Hj(t,i,e){const s=Zj(t,i,e);return s>=0?s:-(s+1)}function Xj(t){const i=t.Ht;if(!i)return-1;if(t instanceof hN)return i.o6(t);const e=i.L;if(!e)return-1;const s=Zj(e.AL,t,Ze);return s>=0?s:-1}function qj(t,i){const e=function(t,i,e){const s=t.length,n=i.length;let r=0,o=0;const h=[],a=[];for(;r<s&&o<n;){const s=t[r],n=i[o];s===n?(r++,o++):e(n,s)<=0?(h.push(n),o++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;o<n;)h.push(i[o]),o++;return{h6:h,a6:a}}(t,i,Ze);return function(t,i){const e=i.length;for(let s=0;s<e;s++)t[s]=i[s];t.length=e}(t,i),e}Qi(),r(),r(),r(),bs(),r();var Kj=class{get AL(){return this.u6}get V(){return this.u6.length}get ga(){if(this.Za){const t=this.u6;this.Za.length=t.length;for(let i=0;i<t.length;i++)this.Za[i]=t[i].ga}else this.Za=this.ma();return this.Za}ma(){return function(t){const i=[];for(let e=0;e<t.V;e++)i[e]=t.$b(e).ga;return i.item=i=>{const e=0|i,s=t.$b(e);return s&&s.ga||void 0},_.defineProperty(i,"constructor",{value:$S}),i}(this)}Jz(t){const i=this.u6;for(let e=i.length-1;e>=0;e-=1){const s=i[e];if(t.DB(s))return!0}return!1}$b(t){return this.u6[t]}constructor(t){this.Za=void 0,this.u6=t}};r();var Jj=class extends Va{ma(){return new $j(this.Ht.ga,this.fk)}constructor(t,i){super(hs.lL),this.Ht=t,this.fk=i}},$j=class extends du{constructor(t,i){super("readystatechange"),this.track=t,this.readyState=i}};r();var tO=class extends Va{ma(){return new iO(this.Ht.ga)}constructor(t){super(hs.fL),this.Ht=t}},iO=class extends du{constructor(t){super("typechange"),this.track=t}};r();var eO=class extends Va{ma(){return new sO(this.uB.ga)}constructor(t){super(hs.Jk),this.uB=t}},sO=class extends du{constructor(t){super("addcue"),this.cue=t}};r();var nO=class extends Va{ma(){return new rO(this.uB.ga)}constructor(t){super(hs.tL),this.uB=t}},rO=class extends du{constructor(t){super("removecue"),this.cue=t}};Qi();var oO=class extends tu{get q(){return this.c6}get L(){return this.l6}d6(t){return dl(this.l6.AL,(i=>i.o===t))}get UQ(){return this.zv}set UQ(t){this.zv=t}get GL(){return this.f6}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return rr(this)}get o(){return this.aS}get zL(){return this.iB}get YL(){return this.g6}set YL(t){this.g6=t}get Lt(){return this._6}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,this.yo(new su(this)))}get gs(){return this.$M}get BL(){return this.v6}get UI(){return this.zo}set UI(t){this.w6(t)}w6(t){const i=Yo(t);i!==this.UI&&(this.zo=i,i===ua.Ch&&(this.m6.forEach((t=>{t.Yh=!1})),nt(this.m6),this.p6=0),this.yo(new dM(this)))}get fk(){return this.Z5}set fk(t){this.Z5!==t&&(this.Z5=t,this.yo(new Jj(this,this.Z5)))}get WL(){return this.A6}set WL(t){this.A6=t}get YA(){return this.Zp}set YA(t){this.Zp!==t&&(this.Zp=t,this.yo(new tO(this)))}RQ(t){if(!t||t.Ht)return;const i=Zj(this.y6,t,Wj);if(i>=0)return;t.Ht=this;const e=-(i+1);this.y6.splice(e,0,t);const s=Hj(this.L.AL,t,Ze);this.b6(t,s),this.yo(new eO(t))}b6(t,i){this.u6.splice(i,0,t),this.M6(i),t.LB=i,i<this.p6&&(this.p6=i)}SQ(t){if(!t||t.Ht!==this)return;const i=this.o6(t);if(i<0)return;t.Yh=!1;const e=this.m6,s=Zj(e,t,Ze);s>=0&&Mn(e,s);const n=Zj(this.y6,t,Wj);n>=0&&Mn(this.y6,n),this.T6(t,i),this.yo(new nO(t))}T6(t,i){Mn(this.u6,i),this.M6(i),t.LB=-1,this.p6>i&&--this.p6}MB(t){if(!t||t.Ht!==this)return;const i=this.o6(t);if(i<0)return;this.T6(t,i);const e=Hj(this.L.AL,t,Ze);this.b6(t,e);const s=Kv(this.m6,(i=>i===t));if(s>=0){Mn(this.m6,s);const i=Hj(this.m6,t,Ze);this.m6.splice(i,0,t)}}S6(t,i){const e=this.m6,s=this.u6;let n=this.p6,r=!1,o=1/0;i&&(n=0);for(let i=e.length-1;i>=0;i--){const s=e[i];Gj(s,t)?s.dB<o&&(o=s.dB):(r=!0,Mn(e,i))}for(;n<s.length&&s[n].lB<=t;){const i=s[n];Gj(i,t)&&(Qa(e,i)||(r=!0,e.push(i)),i.dB<o&&(o=i.dB)),n++}return n<s.length&&s[n].lB<o&&(o=s[n].lB),r&&Yv(e,Ze),this.p6=n,o}o6(t){return(-1===t.LB||t.LB>=this.N6)&&this.I6(),t.LB}I6(){const t=this.u6;for(let i=this.N6;i<t.length;i++)t[i].LB=i;this.N6=t.length}M6(t){t<this.N6&&(this.N6=x.max(t,0))}VL(t){this.GL||(this.UI=t)}gn(){this.Bo();const t=this.u6.slice();for(const i of t)i.gn();nt(this.u6),nt(this.y6),nt(this.m6)}constructor(t,i,e,s,n,r,o,h,a){super(),this.iB=ft(),this.zv=!1,this.zo=ua.Ch,this.Z5=Ma.NONE,this.A6=void 0,this.u6=[],this.y6=[],this.m6=[],this.N6=0,this.p6=0,this.aS=i||"",this.g6=h||"",this._6=t,this.$M=s||"",this.zv=Boolean(n),this.f6=Boolean(o),this.Zp=r||El.DEFAULT,this.eB=e||"",this.v6=a||[],this.l6=new Kj(this.u6),this.c6=new Kj(this.m6)}};r(),r(),r();var hO=class extends KS{ma(){return new aO(this.uB.ga)}constructor(t,i){super(oa.kz,t),this.kU=i}},aO=class extends JS{constructor(t){super("enter",t)}};r();var uO=class extends KS{ma(){return new cO(this.uB.ga)}constructor(t,i){super(oa.Lz,t),this.kU=i}},cO=class extends JS{constructor(t){super("exit",t)}};r();var lO=class extends Va{ma(){return new dO(this.uB.ga)}constructor(t){super(hs.nL),this.uB=t}},dO=class extends du{constructor(t){super("entercue"),this.cue=t}};r();var fO=class extends Va{ma(){return new gO(this.uB.ga)}constructor(t){super(hs.oL),this.uB=t}},gO=class extends du{constructor(t){super("exitcue"),this.cue=t}},_O=class extends gs{get zL(){return this.iB}get lB(){return this.D6.startTime}set lB(t){this.D6.startTime=t}get dB(){return this.D6.endTime}set dB(t){this.D6.endTime=t}get U(){return this.SB}set U(t){this.SB=t}get NB(){return!!this.D6.pauseOnExit}set NB(t){this.D6.pauseOnExit=!!t}get Ht(){return this.bB}set Ht(t){this.bB=t}get o(){return this.D6.id||""}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return Ft(this)}get Yh(){return this.Kh}set Yh(t){this.Yh!==t&&(this.Kh=t,t?(this.yo(new hO(this,this.lB)),this.bB&&this.bB.yo(new lO(this))):(this.yo(new uO(this,this.dB)),this.bB&&this.bB.yo(new fO(this))))}DB(t){return this===t||pM(this,t)&&oN(this,t)&&this.EB(t)}EB(t){return ns(this.U,t.U)}gn(){this.Bo(),this.D6.removeEventListener("enter",this.E6),this.D6.removeEventListener("exit",this.k6)}constructor(t){super(),this.SB=void 0,this.bB=void 0,this.Za=void 0,this.Kh=!1,this.E6=()=>{this.Yh=!0},this.k6=()=>{this.Yh=!1},this.iB=US(),this.D6=t,this.pB=t.startTime,this.AB=t.endTime,this.D6.addEventListener("enter",this.E6),this.D6.addEventListener("exit",this.k6)}};r();var vO=class extends Va{ma(){return new wO(this.Ht.ga)}constructor(t){super(hs.aL),this.Ht=t}},wO=class extends du{constructor(t){super("cuechange"),this.track=t}};function mO(t){if(!t)return;let i=t.THEOplayerVTTRegion;return i||(i=new pO(t),t.THEOplayerVTTRegion=i),i}r(),r();var pO=class{get L6(){return this.x6}get o(){return this.x6.id||""}get ji(){return+this.x6.width||0}set ji(t){this.x6.width=t||0}get xB(){return+this.x6.lines||0}set xB(t){this.x6.lines=t||0}get CB(){return+this.x6.regionAnchorX||0}set CB(t){this.x6.regionAnchorX=t||0}get jB(){return+this.x6.regionAnchorY||0}set jB(t){this.x6.regionAnchorY=t||0}get RB(){return+this.x6.viewportAnchorX||0}set RB(t){this.x6.viewportAnchorX=t||0}get PB(){return+this.x6.viewportAnchorY||0}set PB(t){this.x6.viewportAnchorY=t||0}get OB(){return this.x6.scroll||""}get ga(){return this.Za||(this.Za=gN(this)),this.Za}constructor(t){this.Za=void 0,this.x6=t}};var AO=class extends _O{get U(){return this.D6.text}set U(t){this.D6.text=t}get Pt(){return this.D6.vertical||""}set Pt(t){this.D6.vertical=t||""}get mB(){return this.D6.snapToLines}set mB(t){this.D6.snapToLines=t}get gB(){return this.D6.line}set gB(t){this.D6.line=t}get Kb(){return+this.D6.size}set Kb(t){this.D6.size=ur(t,0,100)}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return tN(this)}EB(t){return aN(this,t)}constructor(t){super(t)}},yO=class extends AO{get wB(){return mO(this.D6.region)}get _B(){return this.D6.lineAlign||"start"}set _B(t){this.D6.lineAlign=t||"start"}get uo(){return this.D6.position}set uo(t){this.D6.position=t}get vB(){return this.D6.positionAlign||"auto"}set vB(t){this.D6.positionAlign=t||"auto"}get fB(){return this.D6.align||"center"}set fB(t){this.D6.align=t||"center"}constructor(t){super(t)}},bO=class extends AO{get wB(){return mO(this.L6)}get L6(){return function(t,i){if(void 0===i)return;let e=t&&t.regions;return e&&e.getRegionById(i)||void 0}(this.D6.track,this.D6.regionId)}get _B(){return function(t){return"middle"===t?"center":t}(this.D6.lineAlign||"start")}set _B(t){this.D6.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get uo(){return this.D6.position}set uo(t){this.D6.position=function(t,i){return qS(t,i)}(t,this.fB)}get vB(){return function(t){return HS[t]}(this.D6.positionAlign||"middle")}set vB(t){this.D6.positionAlign=function(t,i){return ZS[XS(t,i)]}(t||"center",this.fB)}get fB(){return function(t){return"middle"===t?"center":t}(this.D6.align||"middle")}set fB(t){this.D6.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function MO(t,i){return t.U===i.U}function TO(t,i){if(0===i.length)return;const e=i.length-1;if(i[e].lB<t.lB)return void SO(i,e,t.lB);const s=i[0];if(s.lB>t.lB)return void(t.dB=s.lB);const n=Zj(i,t,Ze);if(n>=0)return;const r=-(n+1),o=r-1;if(o>=0){i[o].lB<t.lB&&SO(i,o,t.lB)}if(r<i.length){const e=i[r];t.dB=e.lB}}function SO(t,i,e){const s=t[i].lB;for(let n=i;n>=0&&t[n].lB===s;n--)t[n].dB=e}function NO(t){return Ft(t)}r(),r(),r(),r();var IO=class extends _O{get U(){return this.C6}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return NO(this)}EB(t){return MO(this,t)}constructor(t,i){super(t),this.C6=i}};function Ku(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function DO(t){switch(t){case 0:return Kw;case 1:return im;case 2:return jl;case 3:return qo}}function EO(t,i){const e=i.tc,s=t.byteLength,n=ka(t);return i.Gb(s-e),vi(n,e,s).buffer}function kO(t,i){return{id:t||"",data:i instanceof ArrayBuffer?i:void 0}}function LO(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=DO(s);return{id:e,language:ai(t,i,3),description:n(t,i),text:n(t,i)}}function xO(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=DO(s);return{id:e,mimeType:Kw(t,i),fileName:n(t,i),description:n(t,i),data:EO(t,i)}}function CO(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=DO(s),r=[];for(;i.tc<t.byteLength;)r.push({involvement:n(t,i),involvee:n(t,i)});return{id:e,entries:r}}function jO(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=DO(s),r=ai(t,i,3),o=on(t,i),h=on(t,i),a=n(t,i);let u=!1;const c=[];for(;i.tc<t.byteLength;){let e;if(1===s){let s=tm(t,i);void 0===s?s=u:u=s,e=jl(t,i,s)}else e=n(t,i);if(!e||i.tc+4>t.byteLength)break;c.push({text:e,timestamp:al(t,i)})}return{id:e,language:r,format:o,contentType:h,description:a,entries:c}}function OO(t,i,e){return{id:e,ownerIdentifier:Kw(t,i),identifier:EO(t,i)}}function RO(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=DO(s);return{id:e,language:ai(t,i,3),description:n(t,i),text:n(t,i)}}function PO(t,i,e){const s=on(t,i);if(!Ku(s))return;return{id:e,text:DO(s)(t,i)}}function zO(t,i,e){return{id:e,url:Kw(t,i)}}function BO(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=DO(s);return{id:e,description:n(t,i),text:n(t,i)}}function UO(t,i,e){const s=on(t,i);if(!Ku(s))return;return{id:e,description:DO(s)(t,i),url:Kw(t,i)}}function QO(t,i,e){switch(e){case"COM":return LO(t,i,e);case"GEO":return xO(t,i,e);case"IPL":return CO(t,i,e);case"PIC":return function(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=DO(s),r=ai(t,i,3),o=on(t,i),h=n(t,i);let a,u;return"--\x3e"===r?(a=r,u=Kw(t,i)):(a="image/"+r.toLowerCase(),u=EO(t,i)),{id:e,mimeType:a,pictureType:o,description:h,data:u}}(t,i,e);case"SLT":return jO(t,i,e);case"TXX":return BO(t,i,e);case"UFI":return OO(t,i,e);case"ULT":return RO(t,i,e);case"WXX":return UO(t,i,e);default:if("T"===e.charAt(0))return PO(t,i,e);if("W"===e.charAt(0))return zO(t,i,e)}}function FO(t,i,e){switch(e){case"APIC":return function(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=DO(s),r=Kw(t,i),o=on(t,i),h=n(t,i);let a;return a="--\x3e"===r?Kw(t,i):EO(t,i),{id:e,mimeType:r,pictureType:o,description:h,data:a}}(t,i,e);case"COMM":return LO(t,i,e);case"COMR":return function(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=DO(s),r=Kw(t,i),o=ai(t,i,8),h=Kw(t,i),a=on(t,i),u=n(t,i),c=n(t,i);let l,d;return i.tc<t.byteLength&&(l=Kw(t,i)||"image/",d=EO(t,i)),{id:e,price:r,validUntil:o,contactURL:h,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,i,e);case"GEOB":return xO(t,i,e);case"IPLS":return CO(t,i,e);case"PRIV":return function(t,i,e){return{id:e,ownerIdentifier:Kw(t,i),data:EO(t,i)}}(t,i,e);case"POSS":return function(t,i,e){return{id:e,format:on(t,i),position:al(t,i)}}(t,i,e);case"SYLT":return jO(t,i,e);case"TXXX":return BO(t,i,e);case"UFID":return OO(t,i,e);case"USER":return function(t,i,e){const s=on(t,i);if(!Ku(s))return;const n=DO(s);return{id:e,language:ai(t,i,3),text:n(t,i)}}(t,i,e);case"USLT":return RO(t,i,e);case"WXXX":return UO(t,i,e);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return PO(t,i,e);default:{const s=e.charAt(0);if("T"===s)return PO(t,i,e);if("W"===s)return zO(t,i,e)}}}r(),r();var YO=10;function VO(t,i){return(127&on(t,i))<<21|(127&on(t,i))<<14|(127&on(t,i))<<7|127&on(t,i)}function GO(t,i){switch(t){case 4:return{j6:Ni(i,0),O6:Ni(i,1),R6:Ni(i,2),P6:Ni(i,3)};case 3:return{j6:Ni(i,0),O6:Ni(i,1),R6:Ni(i,2)};case 2:return{j6:Ni(i,0),z6:Ni(i,1)}}}function WO(t,i,e){switch(e.cj){case 3:e.lj.O6&&function(t,i){const e=i.tc,s=al(t,i)+4,n=32768&Ks(t,i);i.Wb(e+s),n&&al(t,i)}(t,i);break;case 4:e.lj.O6&&function(t,i){const e=i.tc,s=VO(t,i);i.Wb(e+s)}(t,i)}}function ZO(t,i){if(t.byteLength-i.tc<YO)return null;if(73!==on(t,i)||68!==on(t,i)||51!==on(t,i))return null;const e=on(t,i),s=on(t,i);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(e))return null;const n=on(t,i),r=VO(t,i);return{cj:e,B6:s,lj:GO(e,n),U6:r}}function HO(t,i,e){switch(e){case 2:return function(t,i){if(i.tc+6>t.byteLength)return;return{o:ai(t,i,3),Kb:Vw(t,i,3)}}(t,i);case 3:return function(t,i){if(i.tc+10>t.byteLength)return;const e=ai(t,i,4),s=al(t,i);on(t,i);const n=on(t,i);return{o:e,Kb:s,lj:{z6:Ni(n,0),Q6:Ni(n,1),groupingIdentity:Ni(n,2)}}}(t,i);case 4:return function(t,i){if(i.tc+10>t.byteLength)return;const e=ai(t,i,4),s=VO(t,i);on(t,i);const n=on(t,i);return{o:e,Kb:s,lj:{groupingIdentity:Ni(n,1),z6:Ni(n,4),Q6:Ni(n,5),j6:Ni(n,6),F6:Ni(n,7)}}}(t,i)}}function XO(t){const i=ka(t),e=new T(i.byteLength);let s=0;for(let t=0;t<i.byteLength;t++){const n=i[t];255===n&&t++,e[s]=n,s++}return Al(vi(e,0,s))}function qO(t,i){const e=i||new da,s=ZO(t,e);if(!s)return null;const n=function(t,i,e){const s=[],n=i.tc;let r=Zo(t,n,n+e.U6);const o=new da;switch(i.Gb(e.U6),e.cj){case 2:case 3:e.lj.j6&&(r=XO(r))}WO(t,i,e);for(;o.tc<r.byteLength;){const t=KO(r,o,e);if(void 0===t)break;s.push(t)}return s}(t,e,s);return{nj:s,Y6:n}}function KO(t,i,e){const s=HO(t,i,e.cj);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.Kb)return;const n=i.tc;let r,o,h=Zo(t,n,n+s.Kb);switch(i.Gb(s.Kb),e.cj){case 2:{const t=s;o=h,r=QO(o,new da,t.o);break}case 3:{const t=s,i=new da;!function(t,i,e){const s=e.lj;let n,r,o;s.z6&&(n=al(t,i)),s.Q6&&(r=on(t,i)),s.groupingIdentity&&(o=on(t,i))}(h,i,t);o=Zo(h,i.tc,h.byteLength),r=FO(o,new da,t.o);break}case 4:{const t=s,i=new da;t.lj.j6&&(h=XO(h)),function(t,i,e){const s=e.lj;let n,r,o,h;s.groupingIdentity&&(n=on(t,i)),s.z6&&(r=al(t,i)),s.Q6&&(o=on(t,i)),s.F6&&(h=VO(t,i))}(h,i,t);o=Zo(h,i.tc,h.byteLength),r=FO(o,new da,t.o);break}}if(!r){const t=ja(ka(o));r=kO(s.o,t.buffer)}return r}r();function JO(t){return $t(t)&&"org.id3"===t.type&&$t(t.value)}function $O(t){return function(t,i,e){return PO(t,i,e)}(new DataView(t.data),new da,t.key)}function tR(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return $O(t);default:let i=t.key.charAt(0);if("T"===i)return function(t){return{id:t.key,text:t.data}}(t);if("W"===i)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return kO(t.key,t.data)}(t)}r(),r();var iR=class extends tu{get q(){return this.c6}get UQ(){return this.V6?this.V6.default:void 0}get L(){return this.l6}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return rr(this)}get o(){return this.tB.id||this.V6&&this.V6.id||""}get zL(){return this.iB}get YL(){return this.tB.inBandMetadataTrackDispatchType||""}get Lt(){return this.tB.kind||z.AQ}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,void 0!==this.V6&&(this.V6.label=t),this.yo(new su(this)))}get gs(){return this.tB.language||""}get UI(){return this.zo}set UI(t){let i=this.UI;this.zo=Yo(t),this.G6();let e=this.UI;i!==e&&this.yo(new dM(this)),e!==ua.Ch&&this.W6(Ma.LOADING)}get Z6(){return Yo(this.tB.mode)}set Z6(t){this.tB.mode=t}get sB(){return this.tB}get fk(){return this.Z5}get H6(){return this.V6?+this.V6.readyState||Ma.NONE:Ma.LOADED}get WL(){return this.A6}get YA(){return this.Zp}set YA(t){this.Zp!==t&&(this.Zp=t,this.yo(new tO(this)))}get X6(){return this.q6}set X6(t){this.q6=t,t&&(this.K6=!0,u((()=>{this.K6=!1}),50)),this.G6()}RQ(t){t.Ht!==this&&(t.Ht=this,this.tB.addCue(t.D6),this.J6())}SQ(t){t.Ht===this&&(t.Ht=void 0,this.tB.removeCue(t.D6),this.J6())}d6(t){var i;const e=null==(i=this.tB.cues)?void 0:i.getCueById(t);if(!e)return;const s=eR(e);return s&&Ia(s)?s[0]:s}NQ(t){this.t9>=t||(this.t9=t,HI(this,t))}G6(){let t=this.UI;this.X6||t!==ua.Jn?this.Z6=t:this.Z6=ua.FL}i9(){let t=this.UI,i=this.Z6;t!==i&&(this.X6||t!==ua.Jn||i!==ua.FL)&&("metadata"===this.Lt&&i===ua.Ch?this.UI=t:this.K6&&i===ua.Ch&&t===ua.Jn?this.Z6=t:this.UI=i)}X5(t){this.Z5!==t&&(this.Z5=t,this.yo(new Jj(this,t)))}W6(t){let i=x.max(this.Z5,this.H6,t);this.X5(i)}e9(t){let i=eR(t);if(i)return i;if(i=this.s9(t),Ia(i))for(let t of i)t.Ht=this;else i.Ht=this;return i}s9(t){const i=this.n9(t);return t.THEOplayerTextTrackCue=i,i}n9(t){return t.endTime<this.t9?[]:JO(t)?(this.YA=El.ID3,function(t){let i;try{i=tR(t.value)}catch(t){i=kO("")}return new IO(t,i)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.YA=El.ID3,function(t){let i=[];try{let e=qO(new DataView(t.data));if(e)for(let s of e.Y6)i.push(new IO(t,s))}catch(t){}return i}(t)):function(t){return"text"in t}(t)?(this.YA=El.WEBVTT,function(t){return"regionId"in t}(t)?new bO(t):new yO(t)):new _O(t)}r9(t){let i=[];if(!t)return i;let e=t.length;for(let n=0;n<e;n++){var s;let e=this.e9(null!=(s=t[n])?s:t.item(n));if(Ia(e))for(let t of e)i.push(t);else i.push(e)}return i}o9(){let t=this.r9(this.tB.cues),i=qj(this.u6,t);for(let t of i.a6)t.fn(oa.Lz,this.J6),t.fn(oa.kz,this.J6),this.yo(new nO(t));for(let t of i.h6)t.yn(oa.kz,this.J6),t.yn(oa.Lz,this.J6),this.yo(new eO(t))}S6(){let t=this.r9(this.tB.activeCues),i=qj(this.m6,t);for(let t of i.a6)t.Yh=!1;for(let t of i.h6)t.Yh=!0;(i.h6.length||i.a6.length)&&this.yo(new vO(this))}VL(t){this.UI=t}gn(){this.Bo();const t=this.u6.slice();for(let i of t)i.gn();nt(this.u6),nt(this.m6),this.tB.removeEventListener("cuechange",this.h9),this.tB.removeEventListener("cuechange",this.J6),this.V6&&(this.V6.removeEventListener("load",this.a9),this.V6.removeEventListener("error",this.u9),dn(this.V6))}constructor(t,i,e=!0){super(),this.u6=[],this.m6=[],this.zo=ua.Ch,this.Z5=Ma.NONE,this.A6=void 0,this.Zp=El.DEFAULT,this.K6=!1,this.t9=0,this.h9=()=>{this.G6(),this.tB.removeEventListener("cuechange",this.h9)},this.J6=()=>{this.UI!==ua.Ch&&(this.o9(),this.S6(),this.u6.length&&this.W6(Ma.LOADING))},this.a9=()=>{this.W6(Ma.LOADED)},this.u9=()=>{this.W6(Ma.ERROR)},this.tB=t,this.q6=e,this.tB.addEventListener("cuechange",this.h9),this.tB.addEventListener("cuechange",this.J6),this.V6=i,this.V6&&(this.A6=de(this.V6.src),this.V6.addEventListener("load",this.a9),this.V6.addEventListener("error",this.u9)),this.iB=ft(),this.eB=t.label||"",this.l6=new Kj(this.u6),this.c6=new Kj(this.m6),this.UI=this.Z6,Fs((()=>{this.J6(),this.W6(Ma.NONE)}))}};function eR(t){return null==t?void 0:t.THEOplayerTextTrackCue}r(),r();function sR(t,i){return eo(t.kU,i.kU)||function(t,i){return t.Ht===i.Ht?Wv(Xj(t),Xj(i)):WI(t.Ht,i.Ht)}(t.uB,i.uB)||function(t,i){return t===i?nn.Zr:t===oa.kz?nn.ey:nn.iy}(t.type,i.type)}var nR=class{tr(){nt(this.c9);for(const t of this.Ul.slice())this.it(t);this.l9(),this.d9=0,this.An=0,nt(this.f9),this.g9=!1,this._9=!1,this.v9=0}tt(t){Qa(this.Ul,t)||(this.Ul.push(t),t.yn(hs.aa,this.w9),t.UI!==ua.Ch&&this.m9())}it(t){ra(this.Ul,t)&&(t.fn(hs.aa,this.w9),t.UI!==ua.Ch&&this.m9())}m9(){const t=this.f9,i=this.Ul.filter((t=>t.UI!==ua.Ch));this.f9=i;for(const e of t)Qa(i,e)||this.p9(e);for(const e of i)Qa(t,e)||this.A9(e);this.v9=0}A9(t){if(t.yn(hs.Jk,this.y9),t.yn(hs.tL,this.b9),t.yn(hs.eL,this.M9),t.L.V>0){for(const i of t.L.AL)this.T9.push(i);this.S9()}}p9(t){if(t.fn(hs.Jk,this.y9),t.fn(hs.tL,this.b9),t.fn(hs.eL,this.M9),t.L.V>0){for(const i of t.L.AL)ra(this.c9,i),ra(this.T9,i);this.S9()}}N9(){this.ta.wk||this.ta.KE?this.l9():this.S9()}S9(){this.g9&&0!==this.f9.length&&(this.v9-this.ta.LE>.25*this.ta.$E||this.d9||(this.d9=this.D9.I9(this.E9)))}l9(){this.d9&&(this.D9.k9(this.d9),this.d9=0)}L9(t){0!==this.v9&&(t.Yh!==Gj(t,this.ta.LE)?this.v9=0:this.An<t.lB&&t.lB<this.v9?this.v9=t.lB:this.An<t.dB&&t.dB<this.v9&&(this.v9=t.dB))}x9(){if(!this.g9)return;if(0===this.f9.length)return;if(this.ta.wk)return;const t=this.f9,i=this.An,e=this.ta.LE,s=e-i<-.1;let n=this._9||s;n&&e>i&&e-i<.1&&(n=!1),this._9=!1;const r=[];let o=1/0;for(const i of t){const t=i.S6(e,n);t<o&&(o=t);for(const t of i.q.AL)r.push(t)}const h=this.c9.slice();if(n);else for(const s of t)GI(s,i-Be,e,h);for(let t=h.length-1;t>=0;t--)Qa(r,h[t])&&Mn(h,t);const a=[];if(!n)for(let t=h.length-1;t>=0;t--){const s=h[t];s.lB>i&&s.dB<=e&&(a.push(s),Mn(h,t))}for(const t of this.T9)t.lB!==t.dB&&ra(a,t);nt(this.T9);const u=[],c=[];for(const t of a)t.Yh||u.push(new hO(t,t.lB)),u.push(new uO(t,x.max(t.lB,t.dB))),t.Yh=!1;for(const t of h)t.Yh&&(u.push(new uO(t,x.max(t.lB,t.dB))),t.Yh=!1);for(const t of r)t.Yh||(u.push(new hO(t,t.lB)),t.Yh=!0);u.sort(sR);for(const t of u){const i=t.uB;i.yo(t);const e=i.Ht;e&&(t.type===oa.kz?e.yo(new lO(i)):e.yo(new fO(i)),Qa(c,e)||c.push(e))}c.sort(WI);for(const t of c)t.yo(new vO(t));this.An=e,this.c9=r,this.v9=o}gn(){this.tr(),this.ta.fn(Zi.Eb,this.C9),this.ta.fn(Zi.so,this.j9),this.ta.fn(E.oP,this.C9),this.ta.fn(Zi.wb,this.C9),this.ta.fn(Zi.Mb,this.O9),this.ta.fn(Zi.bb,this.C9)}constructor(t,i){this.Ul=[],this.d9=0,this.An=0,this.c9=[],this.T9=[],this.f9=[],this.g9=!1,this._9=!1,this.v9=0,this.E9=()=>{this.d9=0,this.x9(),this.N9()},this.C9=()=>{this.x9(),this.N9()},this.j9=()=>{this.g9=!0,this.C9()},this.O9=()=>{this._9=!0,this.v9=0,this.l9()},this.w9=()=>{this.m9(),this.x9(),this.N9()},this.y9=t=>{const i=t.uB;Qa(this.T9,i)||this.T9.push(i),this.L9(i),this.S9()},this.b9=t=>{const i=t.uB;ra(this.c9,i),ra(this.T9,i),this.L9(i),this.S9()},this.M9=t=>{this.L9(t.uB),this.S9()},this.D9=i,this.ta=t,t.yn(Zi.Eb,this.C9),t.yn(Zi.so,this.j9),t.yn(E.oP,this.C9),t.yn(Zi.wb,this.C9),t.yn(Zi.Mb,this.O9),t.yn(Zi.bb,this.C9),this.S9()}};r();var Kc=class{I9(t){return oc(t)}k9(t){pi(t)}},rR=new Kc,oR=class extends nR{constructor(t,i=rR){super(t,i)}};r(),r();var hR=class extends hN{get ga(){return this.Za||(this.Za=NO(this)),this.Za}EB(t){return MO(this,t)}constructor(t,i,e){super(t,1/0,i,!1,e)}};r(),r();var aR=class extends oO{constructor(t,i,e=El.DEFAULT){super(z.MQ,"",i||"","",!1,e,!1,t)}},uR=class extends aR{RQ(t){TO(t,this.u6),super.RQ(t)}ma(){return rr(this)}constructor(t,i){super(t,i),this.YA=El.ID3}},cR=class extends uR{get o(){return this.tB.id||""}get YL(){return this.tB.inBandMetadataTrackDispatchType||""}get gs(){return this.tB.language||""}w6(t){super.w6(t),this.Z6=this.UI}get Z6(){return Yo(this.tB.mode)}set Z6(t){this.tB.mode=t}get sB(){return this.tB}RQ(t){super.RQ(t),t.D6.track!==this.tB&&this.tB.addCue(t.D6)}SQ(t){super.SQ(t),t.D6.track===this.tB&&this.tB.removeCue(t.D6)}NQ(t){this.t9>=t||(this.t9=t,HI(this,t))}W6(t){this.fk=x.max(this.fk,t)}o9(){let t=this.tB.cues;if(!t)return;const i=t.length,e=[],s=[];for(let o=0;o<i;o++){var n;const i=null!=(n=t[o])?n:t.item(o);if(JO(i)&&i.endTime>=this.t9){var r;const t=null!=(r=null==i?void 0:i.THEOplayerTextTrackCue)?r:new lR(i);e.push(t)}else s.push(i)}Yv(e,Ze);let o=qj(this.L.AL.slice(),e);for(const t of s)this.tB.removeCue(t);for(let t of o.a6)t.gn(),this.SQ(t);for(let t of o.h6)this.RQ(t)}gn(){this.tB.removeEventListener("cuechange",this.J6),super.gn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.t9=0,this.J6=()=>{this.UI!==ua.Ch&&(this.o9(),this.W6(Ma.LOADED))},this.tB=t,this.tB.addEventListener("cuechange",this.J6),this.UI=this.Z6,Fs((()=>{this.J6()}))}},lR=class extends hR{gn(){super.gn(),this.D6.THEOplayerTextTrackCue=void 0}constructor(t){super(t.startTime,tR(t.value),t.id),this.D6=t,this.D6.THEOplayerTextTrackCue=this}};function dR(t){return"TXXX"===t.id||"TXX"===t.id}r(),r();var fR=class extends qI{R9(){this.P9.yn(zh.Hk,this.rV),this.P9.yn(zh.qk,this.oV)}z9(){this.P9.fn(zh.Hk,this.rV),this.P9.fn(zh.qk,this.oV)}B9(t){const i=t.L.AL[0];if(!gR(i))return;const e=function(t){const i=t.match(_R);if(!i)return;return{Ht:i[1],gs:i[2]}}(i.U.description),s=e.Ht,n=e.gs;if(this.U9(s,n))return;const r=this.CQ.Wk(z.AQ,t.o,s,n,!1,El.TTML);this.tt(r),this.Q9.set(t.zL,r);for(let i of t.L.AL)gR(i)&&this.F9(i);t.yn(hs.Jk,this.Y9)}U9(t,i){return this.Z.AL.some((e=>e.kh===t&&e.gs===i))}F9(t){if(!t.Ht)return;const i=this.Q9.get(t.Ht.zL),e=yI(t.U.text,i,{sQ:0,nQ:1/0,rQ:t.lB});for(let t of e)i.RQ(t)}async tr(){for(let t of this.P9.AL)t.fn(hs.Jk,this.Y9);for(let t of this.Z.AL)this.CQ.BQ(t);this.Q9.clear(),await super.tr()}async gn(){this.z9(),await super.gn()}constructor(t,i){super(),this.CQ=t,this.P9=i,this.Q9=gc(),this.rV=async t=>{const i=t.Ht;if(i.YA||await i.zy(hs.fL),i.YA===El.ID3){for(;0===i.L.V;)await i.zy(hs.Jk);this.B9(i)}},this.oV=t=>{const i=t.Ht;if(i.YA!==El.ID3||!this.Q9.has(i.zL))return;const e=this.Q9.get(i.zL);this.it(e),this.CQ.BQ(e),i.fn(hs.Jk,this.Y9)},this.Y9=t=>{gR(t.uB)&&this.F9(t.uB)},this.R9()}};function gR(t){return function(t){return dR(t)&&_R.test(t.description)}(t.U)}var _R=/^Track:(.+),Lang:(.+)$/;r(),Qi(),r();var vR=[Zi.Vy,Zi.Yy,Zi.Lb,Zi.Cb];r();var Go=class extends Jr{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(Zi.Yy),this.errorObject=t}};r(),r(),r();var wR=class extends Jr{constructor(t){super(Zi.Vy),this.V9=t}};Qi(),r();var mR=class extends Jr{constructor(t){super("xb"),this.V9=t}};bs();var pR=new Wa,AR=class extends Jr{constructor(t){super("Ws"),this.session=t}},yR=class extends tu{get G9(){return this.W9}vS(){return this.Z9=!0,pR.Wo((t=>this.H9(t)),this.rN.ly)}async H9(t){try{yi(t),await this.X9.gF(t);const i=await this.X9._F(this.q9.GA,this.q9.Vb,t);await this.K9.vS(this.q9.GA,this.q9.Vb,i)}catch(t){V(t);const i=t instanceof Nm?t.hM:void 0,e=new lu(vt.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,i);throw this.Ss(e),e}}async yF(t,i){let e;try{e=function(t){return gm(t,Mm())}(t)?await this.X9.kF(new T(t),this.rN.ly):await this.X9.LF(new T(t),i,this.rN.ly)}catch(t){if(Tu(t))return;throw t}if(this.rN.ly.sy)return;const s=this.J9,n=new xh;this.J9=n;try{await this.K9.Yn(e),await Dt(100)}catch(t){const i=t instanceof Nm?t.hM:void 0;throw new lu(vt.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,i)}finally{void 0!==s&&await s.rM,n.sM(),this.J9===n&&(this.J9=void 0)}}Ss(t){const i=t instanceof lu?t:new lu(vt.CONTENT_PROTECTION_ERROR,t.message,t);this.yo(new Go(i)),this.Ws()}t8(){this.K9.fn("Pb",this.um),this.K9.fn(Zi.Cb,this.i8),this.K9.fn("lt",this.e8),this.s8=!1,this.W9=!1,this.rN.Ty(),this.yo(new AR(this))}async Ws(){let t;this.Bo();do{t=this.J9,void 0!==t&&await t.rM}while(this.J9!==t);this.t8(),await this.K9.Ws().catch(Bn)}constructor(t,i,e){super(),this.K9=t,this.X9=i,this.q9=e,this.Z9=!1,this.s8=!1,this.rN=new Wt,this.W9=!1,this.um=t=>{if(!this.rN.ly.sy)switch(t.Bb){case"license-request":case"license-renewal":this.yF(t.Pb,t.Ub).catch((t=>this.Ss(t)));break;default:this.Ss(new lu(vt.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.Bb))}},this.i8=t=>{this.K9.Rb.iM(((t,i)=>{switch(t){case"usable":Fe.Pg((()=>{this.s8=!0,this.yo(new wR(i))}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.yo(new mR(i))}})),this.W9=!0,this.yo(t)},this.e8=t=>{this.Ss(new lu(vt.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.yn("Pb",this.um),t.yn(Zi.Cb,this.i8),t.yn("lt",this.e8),t.uS.then((()=>this.t8()),(t=>this.Ss(t)))}},bR=class extends tu{get NS(){return this.yS}get n8(){return this.r8.every((t=>t.G9))}fF(){return this.o8.fF()}h8(t){return this.a8||(this.a8=this.u8(t)),this.a8}async u8(t){yi(t);const i=await this.o8.kF(new T(Mm()),t);if(yi(t),!this.SS)throw new b("Invalid MediaKeys when setting ServerCertificate");await this.SS.IS(i.buffer)}async c8(t){if(!this.SS)throw new b("Invalid MediaKeys when creating KeySession");try{this.l8.push(t);const i=await this.SS.TS("temporary"),e=new yR(i,this.o8,t);return this.r8.push(e),e.yn(vR,this.d8),e.yn("Ws",this.f8),e}finally{ra(this.l8,t)}}g8(t){if(t._8)return!1;for(const i of this.r8)if(MR(i.q9,t))return!0;for(const i of this.l8)if(MR(i,t))return!0;return!1}async gn(){this.SS=void 0,this.Bo();const t=this.r8.slice();nt(this.r8),await Promise.all(t.map((t=>t.Ws()))),this.v8=void 0,this.o8.wy()}constructor(t,i,e){super(),this.r8=[],this.a8=void 0,this.l8=[],this.d8=t=>{if(t.type===Zi.Cb)return null!=this.v8||(this.v8=new ru),t.Rb.iM(((t,i)=>{this.v8.tM(i,t)})),void(this.n8&&this.yo(new pw(this.v8)));this.Ds(t)},this.f8=t=>{t.session.fn(vR,this.Ds),t.session.fn("Ws",this.f8),ra(this.r8,t.session),this.v8=void 0},this.yS=t,this.SS=i,this.o8=e}};function MR(t,i){return!t._8&&t.GA===i.GA&&gm(t.Vb,i.Vb)}var TR=class extends tu{get w8(){var t;return null==(t=this.yS)?void 0:t.NS}get zV(){return this.o8}set zV(t){this.o8=t}$n(t,i){this.vV=t,this.D$(i)}D$(t){this.KS=t,this.m8(this.rN.ly).catch(Ct)}k$(t){this.p8(t,this.rN.ly).catch(Ct)}async p8(t,i){var e,s;yi(i);var n;if(null==(e=this.KS)?void 0:e.yV)for(const e of null!=(n=null==(s=this.KS)?void 0:s.yV)?n:[]){var r;const s=dl(t,(t=>t.A8===e.NS.ZA));if(void 0!==(null==s?void 0:s.y8)&&!(null==(r=e.XY)?void 0:r.some((t=>gm(s.y8,t)))))try{return void await this.b8(e.NS.GA,s.y8,i)}catch(t){V(t)}}}async m8(t){if(!Fe.Ys.Sp||!await this.M8(t))return this.KS&&this.KS.T8?await this.S8(t):void 0}async M8(t){var i,e;if(!(null==(i=this.KS)?void 0:i.yV))return!1;let s=!1;var n;for(const i of null!=(n=null==(e=this.KS)?void 0:e.yV)?n:[]){var r;for(const e of null!=(r=i.XY)?r:[])try{await this.b8(i.NS.GA,e,t),s=!0}catch(t){V(t)}if(s)return!0}return!1}async b8(t,i,e){if(yi(e),!i.byteLength)return;if(!this.KS||!this.KS.yV.length)throw new lu(vt.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==dv&&t!==gv&&t!==fv)return void 0;const s=IT(t,i),n=this.KS.yV;let r;for(const i of n){yi(e);const n=s[i.NS.WA];if(n&&i.NS.GA===t)try{const t=await this.N8(i,e);t.fF()&&await t.h8();const s=this.cz.FE,r={GA:i.NS.GA,Vb:n,_8:s};if(this.I8(t,r)){const i=await t.c8(r);await i.vS()}return}catch(t){V(t),r=t}}throw await Fe.gA()?new lu(vt.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new lu(vt.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async S8(t){var i;const e=null==(i=this.KS)?void 0:i.yV;if(e)for(const i of e){yi(t);try{const e=await this.N8(i,t);return void(e.fF()&&await e.h8())}catch(t){V(t)}}}I8(t,i){return Fe.Ys.Tp||this.cz.mz.wz||!t.g8(i)}N8(t,i){return this.Go.Wo((i=>this.D8(t,i)),i)}async D8(t,i){if(yi(i),!this.KS||!this.o8||!this.vV)throw new b("Not initialized");if(this.yS){if(this.yS.NS!==t.NS)throw new b("Internal key system error");return this.yS}const e=this.o8,s=Ei({},t,{HV:t.HV.map((i=>{var s;return Ei({},i,{persistentState:null!=(s=i.persistentState)?s:e.jF(t.NS),RS:i.RS||e.RS(t.NS)})}))}),n=await this.vV.T$(s.NS,s.HV),r=e.HY(s),o=new bR(s.NS,n,r);return o.yn(vR,this.Ds),this.yS=o,o}Ss(t){if(Tu(t))return;const i=t instanceof lu?t:new lu(vt.CONTENT_PROTECTION_ERROR,t.message,t);this.yo(new Go(i))}async tr(){this.vV=void 0,this.KS=void 0,this.rN.Ty(),this.rN=new Wt,await this.E8()}async E8(){await this.Go.Ty();const t=this.yS;t&&(t.fn(Zi.Lb,this.Ds),this.yS=void 0,await t.gn())}async wy(){this.Bo(),this.cz.fn(So.Xy,this.k8),await this.tr(),await this.Go.gn()}constructor(t){super(),this.rN=new Wt,this.Go=new Wa,this.KS=void 0,this.o8=void 0,this.vV=void 0,this.yS=void 0,this.k8=t=>{this.b8(t.GA,t.Vb,this.rN.ly).catch((t=>this.Ss(t)))},this.cz=t,this.cz.yn(So.Xy,this.k8)}};r();var SR=class extends Jr{constructor(t){super(Zi.ob),this.currentTime=t}};r();var NR=class extends tu{get fk(){return void 0!==this.L8?this.L8.fk:Fn.Nz}X5(){var t;null==(t=this.L8)||t.X5()}tr(){var t;null==(t=this.L8)||t.tr()}wy(){this.Bo(),void 0!==this.L8&&(this.L8.wy(),this.L8=void 0)}x8(t){if(this.L8===t)return;const i=this.fk;void 0!==this.L8&&this.L8.wy(),this.L8=t,void 0!==t&&(t.yn(E.lL,this.Ds),t.X5());const e=this.fk;i!==e&&this.yo(new cu(this.C8.LE,e))}constructor(t){super(),this.C8=t}};r();var IR=class extends oO{get ga(){var t;return null!=(t=this.Za)?t:this.Za=DR(this)}j8(t,i,e){const s=new uN(t,i,e,!1);return this.RQ(s),s}O8(t){this.SQ(t)}constructor(t,i,e){super(t,i,"",e,void 0,El.WEBVTT)}};function DR(t){return fe(rr(t),{get type(){return t.YA},addCue:(i,e,s)=>t.j8(i,e,s).ga,removeCue(i){t.O8(i.cB)}})}r();var ER=class extends iR{get ga(){var t;return null!=(t=this.Za)?t:this.Za=DR(this)}j8(t,i,e){const n=this.s9(new s.VTTCue(t,i,e));return this.sD?this.RQ(n):this.P8.push(n),n}O8(t){ra(this.P8,t),this.SQ(t)}gn(){var t;super.gn(),null==(t=this.V6)||t.removeEventListener("load",this.z8),nt(this.P8)}constructor(t,i){var e;super(t,i),this.sD=!1,this.P8=[],this.z8=()=>{var t;null==(t=this.V6)||t.removeEventListener("load",this.z8),this.sD=!0;for(const t of this.P8)this.RQ(t);nt(this.P8)},null==(e=this.V6)||e.addEventListener("load",this.z8),this.YA=El.WEBVTT}},kR=Ro.zf||Ro.Uf,LR=Ro.xg,xR=Ro.qf,CR=Ro.qf&&Ro.Ka,jR=class extends tu{get K5(){return this.B8}get TE(){return this.vV?this.vV.TE:Mo.PP()}get NE(){const t=this.wV;if(!t||j(t.getTime()))return;const i=1e3*this.LE;return new Date(t.getTime()+i)}get wV(){if(this.gV.getStartDate)return this.kG&&this.U8||(this.U8=this.gV.getStartDate()),this.U8}get LE(){return this.Q8?this.Q8.LE:void 0!==this.F8?this.F8:this.vN.currentTime}get Uu(){return this.Xu}get ct(){return this.Q8?this.Q8.ct:this.vV?this.vV.ct:this.vN.duration}get OE(){return this.wk?this.Y8():this.Q8?this.Q8.OE:this.vN.ended||this.V8}Y8(){return void 0!==this.F8&&this.ct===this.F8}get lt(){return this.dV}get gV(){return this.vN}get KE(){return this.G8?this.W8:this.Q8?this.Q8.KE:this.vN.paused}get rk(){return this.Fo.pP(Mo.xn(this.vN.played))}get Ti(){return this.vN.offsetHeight*Fe.Ys.bp}get ji(){return this.vN.offsetWidth*Fe.Ys.bp}get wa(){return this.Zo}get xV(){return this.Qo}get fk(){return this.Z8.fk}get _k(){return this.vV?this.vV._k:Mo.PP()}get wk(){return this.Q8?this.Q8.wk:this.kG||this.vN.seeking&&!this.G5}get V5(){return this.Q8?this.Q8.V5:this.G5}get e6(){return 0!==this.H8}get WE(){return this.Q8?this.Q8.WE:this.vN.muted}set WE(t){this.Q8?this.Q8.WE=t:(this.vN.muted=t,this.X8())}get $E(){return this.Q8?this.Q8.$E:void 0!==this.q8?this.q8:this.vN.playbackRate}set $E(t){this.Q8?this.Q8.$E=t:this.KE||this.B8?(this.q8=t,this.K8()):(this.q8=void 0,this.vN.playbackRate=t,this.K8())}K8(){const t=this.$E;this.J8!==t&&(this.J8=t,this.yo(new Pu(this.LE,t)))}get t7(){return this.IG}get Nk(){return this.Q8?this.Q8.Nk:this.vN.volume}set Nk(t){this.Q8?this.Q8.Nk=t:(this.vN.volume=t,this.X8())}X8(){const t=this.Nk,i=this.WE;this.i7===t&&this.e7===i||(this.i7=t,this.e7=i,this.yo(new $e(this.LE,this.Nk)))}GE(){return qx(this.vN)}Pk(){this.s7||(this.s7=!0);const t=this.n7();return this.r7(),t}r7(){this.G8?this.W8&&(this.W8=!1,this.yo(new fi(this.LE))):this.o7()}o7(){if(this.Q8)this.Q8.Pk();else{Ro.qf&&!Ro.Ka&&this.vN.preload===Dn.pG&&(this.vN.preload=Dn.MQ);const t=this.$E,i=this.vN.play();t!==this.gV.playbackRate&&(this.$E=t),this.V8=!1,pr(i)?i.then(this.h7,this.a7):this.u7.s6()&&this.l7()}}Rk(){this.G8?this.W8||(this.W8=!0,this.yo(new Se(this.LE))):this.d7()}d7(){this.Q8?this.Q8.Rk():(this.vN.pause(),this.u7.Yn()),this.f7(new J)}n7(){const t=new xh;return this.g7.push(t),t.rM}_7(){for(const t of this.g7)t.sM(void 0);nt(this.g7)}f7(t){for(const i of this.g7)i.nM(t);nt(this.g7)}l7(){this.G8||this.Q8||this._7()}v7(t){this.G8||this.Q8||this.f7(t)}Wb(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.Q8?this.Q8.Wb(t,i,e):(this.w7.Ty(),this.w7=new Wt,this.m7=Vh(this.p7(t,i,e,this.m7,this.w7.ly),this.w7).catch(Bn))}cV(t){const i=this.wV;if(!i||j(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Wb(e)}async p7(t,i,e,s,n){try{if(this.F8=t,this.A7=t,this.y7=Fe.Og(),e&&!this.kG?this.G5=!0:(this.kG=!0,this.G5=!1),this.V8&&!this.Y8()&&(this.V8=!1),this.G5?this.yo(new Iu(this.LE)):this.yo(new Yr(t)),await s.catch(Bn),yi(n),this.vV&&!this.vV.Z$())return void this.b7();for(this.M7&&this.T7(),this.Z8.fk===Fn.Nz&&await this.Z8.zy(E.lL,n);0===this.vN.seekable.length||CR&&!this.s7;){const t={stack:[],error:void 0,hasError:!1};try{const i=Ne(t,Wt.Iy([n]),!1);await Promise.race([ku(this.vN,"timeupdate",i.ly),Dt(100,i.ly)]),yi(n)}catch(i){t.error=i,t.hasError=!0}finally{qr(t)}}let o=Dj(this.TE,t,.05),h=this._k,a=!0,u=!1;for(;;){const t={stack:[],error:void 0,hasError:!1};try{var r;if(h=this._k,h.V>0&&!h.gr(o)&&(o=h.gP(o),a=!0),i&&!this.vN.fastSeek){const t=this.TE;if(!t.gr(o)){const i=Dj(t,o,1);i!==o&&(o=i,a=!0)}}if(xR){const t=this.S7();void 0!==t&&o>t&&(o=t,a=!0)}if(!u){const t=this.N7();void 0!==t&&o>t&&(u=!0,await this.I7(t,!1,n),await ku(this.vN,"seeked",n),yi(n),a=!0)}if(a){a=!1,await this.I7(o,i,n),yi(n);let t=this.LE;h=this._k,o=h.gP(o);let e=1;for(;x.abs(o-t)>=Be;)h=this._k,o=RR(o,h,e),await this.I7(o,i,n),yi(n),t=this.LE,e++}if(!(this.vN.seeking||this.Z8.fk<Fn.Iz))break;const e=Ne(t,Wt.Iy([n]),!1);await Promise.race([ku(this.vN,"seeked",e.ly),this.zy([Zi.mb,Zi.Zy],e.ly),this.Z8.zy(E.lL,e.ly),null==(r=this.vV)?void 0:r.zy(Oc.m$,e.ly)].filter($t)),yi(n)}catch(i){t.error=i,t.hasError=!0}finally{qr(t)}}this.b7()}catch(t){if(Tu(t))return;0}}async I7(t,i,e){yi(e);let s=this._k;if(t=s.gP(t),this.M7){let i=!0;for(;i||this.Z8.fk<Fn.Dz;){const n={stack:[],error:void 0,hasError:!1};try{if(s=this._k,s.gr(t)||(t=s.gP(t),i=!0),i){i=!1,this.F8=t,this.D7(this.LE);continue}const r=Ne(n,Wt.Iy([e]),!1);await Promise.race([this.zy(Zi.Zy,r.ly),this.Z8.zy(E.lL,r.ly)])}catch(t){n.error=t,n.hasError=!0}finally{qr(n)}}yi(e)}const n=ku(this.vN,"seeking",e);i&&this.vN.fastSeek?this.vN.fastSeek(t):this.vN.currentTime=t,this.F8=void 0,this.D7(this.LE),this.vN.seeking&&await n}S7(){if(!this.vV||!this.vV.F$)return;const t=this.vV.Y$,i=this.vV.V$,e=t&&i?t.Sn(i):t||i;if(!e||0===e.V)return;const s=e.Cn(e.V-1),n=e.jn(e.V-1);return x.max(s,n-.001)}N7(){if(!this.vV||!this.vV.F$)return;const t=this.vV.V$;if(!t||0===t.V)return;const i=t.Cn(t.V-1);let e=t.jn(t.V-1)-.02;return e-=.001,x.max(i,e)}D7(t){this.A7!==t&&(this.A7=t,this.G5?this.yo(new Iu(t)):this.yo(new Yr(t)))}b7(){const t=this.G5;this.kG=!1,this.G5=!1,this.y7=0,this.A7=NaN,this.M7&&this.E7(),t?(this.yo(new SR(this.LE)),this.k7()):(this.yo(new aa(this.LE)),this.L7=!0),this.rJ()}T7(){this.G8||(this.W8=this.KE,this.G8=!0,this.d7())}E7(){this.G8&&(this.G8=!1,this.W8||this.r7())}H$(t){for(const i of t){if(i.YA===uh.QQ&&pC.H$(i,this.vN))return i;if(i.YA===uh.FQ&&xj.H$(i))return i}}be(){this.IG=!1,qn(this.vN)&&(this.vN.style.display="none")}ge(){this.IG=!0,qn(this.vN)&&(this.vN.style.display="block")}get nt(){return this.x7}get Ll(){return this.FG}Wk(t,i,e,s,n,r,o,h,a){const u=new oO(t,i,e,s,n,r,o,a,h);return this.Ul.tt(u),this.C7.tt(u),u}CV(t){const{Lt:i,kh:e,gs:n}=t;if("function"==typeof this.vN.addTextTrack&&"function"==typeof s.VTTCue){const{track:t,trackElement:s}=this.j7("data:text/vtt,WEBVTT%0A%0A",i,e,n);let r=new ER(t,s);return this.O7.tt(r),this.R7.push(r),r}const r=new IR(i,e,n);return this.Ul.tt(r),this.C7.tt(r),r}DV(){return!0}kV(t,i,e,s,n){const{track:r,trackElement:o}=this.j7(t,i,e,s,n),h=new iR(r,o);return this.O7.tt(h),this.R7.push(h),h}j7(t,i,e,s,n){const r=h.createElement("track");r.src=de(t),r.kind=i,r.label=null!=e?e:"",s&&(r.srclang=s),r.default=!!n,r.id=kL(),this.vN.appendChild(r);return{track:this.vN.textTracks.getTrackById(r.id),trackElement:r}}BQ(t){this.Ul.it(t),this.C7.it(t)}jV(){for(const t of this.Ul.AL.slice())t.gn();this.Ul.tr();for(const t of this.R7.slice())this.O7.it(t),t.gn();nt(this.R7)}XV(){let t=this.vN.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.P7),t.addEventListener("removetrack",this.z7),t.addEventListener("change",this.B7))}PV(){let t=this.vN.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.P7),t.removeEventListener("removetrack",this.z7),t.removeEventListener("change",this.B7))}U7(t){t.mode=ua.FL;const i=new cR(t);this.O7.tt(i),this.C7.tt(i)}Q7(t,i){const e=()=>{zR(t)&&(t.removeEventListener("cuechange",e),this.O7.tt(new iR(t,i)))};t.addEventListener("cuechange",e),t.mode=ua.FL}F7(t){let i=this.vN.getElementsByTagName("track");for(let e=0;e<i.length;e++){let s=i[e]||i.item(e);if(s.track===t)return s}}Y7(){if(0===this.O7.V)return;const t=this._k;if(0===t.V)return;const i=t.Cn(0);if(this.V7!==i){for(const t of this.O7.AL)t.NQ(i);this.V7=i}}$n(t){return this.G7.Wo((async i=>{if(yi(i),this.vV)throw new b("Already loaded a media source");let e;if(t.YA===uh.QQ)e=new pC(t,this,this.E$,this.KA),this.M7=!1,this.Z8.x8(this.W7());else{if(t.YA!==uh.FQ)throw new b("Unsupported configuration");{this.M7=kR;const i=this.W7();e=new xj(t,this,i,this.E$,this.KA,void 0,this.m5),this.Z8.x8(i),LR&&(this.yn(Zi.Eb,this.Z7),this.Z8.yn(E.lL,this.H7))}}return this.vV=e,await e.FK(),e}))}W7(){return this.M7?new Qj(this):new Uj(this)}X7(){if(this.B8)return;const t=this.$E;this.B8=!0,this.$E=t,this.vN.playbackRate=0,this.Z8&&this.Z8.X5()}q7(){if(!this.B8)return;const t=this.$E;this.B8=!1,this.$E=t,this.K7()}K7(){this.vN.currentTime=this.vN.currentTime,this.Z8&&this.Z8.X5()}async tr(){this.kG=!1,this.G5=!1,this.L7=!1,Fe.Rg(this.H8),this.H8=0,this.Fo=Mo.PP(),this.w7.Ty(),this.F8=void 0,this.A7=NaN,this.U8=void 0,this.M7=!1,this.G8=!1,this.dV=void 0,this.V8=!1,this.J7=void 0,this.V7=0,this.ttt=!1,this.s7=!1,this.itt&&(this.ett(),this.itt=!1),this.f7(new J),this.Z8.x8(new Uj(this)),this.u7.tr(),this.O7.tr(),this.q7(),LR&&(pi(this.stt),this.stt=0,this.fn(Zi.Eb,this.Z7)),await this.G7.Ty(),await this.G7.Wo((async()=>{this.vV&&(await this.vV.wy(),this.vV=void 0,Ro.Nf&&Ro.Df<3&&this.ntt())}))}ntt(){this.ott();const t=this.vN,i=t.parentElement,e=t.tagName.toLowerCase();this.vN=Az(e),this.retainMediaElementState(t),yz(t),null==i||i.replaceChild(this.vN,t),this.ett(),this.Z8.x8(this.W7()),this.u7.fn(E.oP,this.htt),this.u7.wy(),this.u7=new Vj(this),this.u7.yn(E.oP,this.htt),this.IG?this.ge():this.be(),this.yo(new SS),this.yo(new Bu)}retainMediaElementState(t){this.gV.muted=t.muted,this.gV.volume=t.volume}async wy(){this.itt=!1,this.ott(),this.PV(),await this.tr(),await this.G7.gn(),this.u7.wy(),this.Z8.wy(),await this.E$.wy(),this.jV(),this.Ul.gn(),this.O7.gn(),await this.att.gn(),this.utt.gn(),this.x7.gn(),this.Bo()}ett(){this.gV.addEventListener("play",this.ctt),this.gV.addEventListener("pause",this.ltt),this.gV.addEventListener("timeupdate",this.dtt),this.gV.addEventListener("progress",this.ftt),this.gV.addEventListener("loadstart",this.gtt),this.gV.addEventListener("ended",this._tt),this.gV.addEventListener("ratechange",this.wtt),this.gV.addEventListener("volumechange",this.mtt),this.gV.addEventListener("durationchange",this.ptt),this.gV.addEventListener("resize",this.Att),this.gV.addEventListener("loadedmetadata",this.Att),this.gV.addEventListener("error",this.ytt),this.gV.addEventListener("emptied",this.btt),this.gV.addEventListener("seeked",this.Mtt),this.gV.addEventListener("seeking",this.Ttt),kl()?(this.vN.addEventListener("encrypted",this.Stt),this.vN.addEventListener("waitingforkey",this.Ntt)):void 0!==gi.WebKitMediaKeys&&"function"==typeof gi.WebKitMediaKeys.isTypeSupported?this.vN.addEventListener("webkitneedkey",this.Itt):wc()?this.vN.addEventListener("webkitneedkey",this.Dtt):void 0!==gi.MSMediaKeys&&"function"==typeof gi.MSMediaKeys.isTypeSupported&&this.vN.addEventListener("msneedkey",this.Ett)}ott(){this.gV.removeEventListener("play",this.ctt),this.gV.removeEventListener("pause",this.ltt),this.gV.removeEventListener("timeupdate",this.dtt),this.gV.removeEventListener("progress",this.ftt),this.gV.removeEventListener("loadstart",this.gtt),this.gV.removeEventListener("ended",this._tt),this.gV.removeEventListener("ratechange",this.wtt),this.gV.removeEventListener("volumechange",this.mtt),this.gV.removeEventListener("durationchange",this.ptt),this.gV.removeEventListener("resize",this.Att),this.gV.removeEventListener("loadedmetadata",this.Att),this.gV.removeEventListener("error",this.ytt),this.gV.removeEventListener("encrypted",this.Stt),this.gV.removeEventListener("waitingforkey",this.Ntt),this.gV.removeEventListener("webkitneedkey",this.Itt),this.gV.removeEventListener("webkitneedkey",this.Dtt),this.gV.removeEventListener("msneedkey",this.Ett),this.gV.removeEventListener("emptied",this.btt),this.gV.removeEventListener("seeked",this.Mtt),this.gV.removeEventListener("seeking",this.Ttt)}ktt(){this.Q8||(this.Fo=this.rk,this.Q8=Rj(this),this.ott(),this.Q8.yn(jj,this.Ds))}Ltt(){if(!this.Q8)return;const t=this.Q8;this.Q8=void 0,this.Z8.X5(),Pj(this,t),t.wy(),this.ett()}k7(){const t=this.LE;this.yo(new A(t,void 0)),this.J7=t}rJ(){this.V8||!this.OE||this.wk||(this.V8=!0,this.yo(new fa(this.LE)))}eG(t){this.dV=t,this.f7(this.dV),this.yo(new _r(this.dV))}get FE(){return!!this.vN.webkitCurrentPlaybackTargetIsWireless}get xtt(){return this.Ctt}get mz(){return Ei({},gC)}jtt(){this.Ctt||(Mz(this.vN,Fe.Ys),this.Ctt=!0)}Ott(t){t.appendChild(this.vN)}M3(){LR&&this.Z7(),this.Z8.X5()}get zV(){return this.E$.zV}set zV(t){this.E$.zV=t}get Rtt(){return this.m5}set Rtt(t){this.m5=t}get w8(){return this.E$.w8}Fk(){this.E$.E8().catch(Bn),this.O7.tr()}get xk(){return this.ttt}set xk(t){this.ttt=t,this.itt&&!this.ttt&&(this.itt=!1,this.ett())}constructor(t,i,e,s){super(),this.dV=void 0,this.IG=!0,this.vV=void 0,this.G7=new Wa,this.Q8=void 0,this.Zo=new ut,this.Qo=new tk,this.R7=[],this.F8=void 0,this.y7=0,this.A7=NaN,this.U8=void 0,this.L7=!1,this.J7=void 0,this.V7=0,this.kG=!1,this.G5=!1,this.Ptt=Fn.Nz,this.H8=0,this.m7=Promise.resolve(),this.w7=new Wt,this.g7=[],this.Fo=Mo.PP(),this.q8=void 0,this.J8=1,this.e7=!1,this.i7=1,this.V8=!1,this.ttt=!1,this.itt=!1,this.M7=!1,this.G8=!1,this.W8=!1,this.B8=!1,this.Ctt=!1,this.stt=0,this.s7=!1,this.P7=t=>{const i=t.track,e=this.F7(i);if(!PR(this.O7,i)){if(Ro.qf){if(i.kind===z.MQ)return void this.U7(i);if(i.kind===z.yQ&&""===i.label&&""===i.language&&!zR(i))return void this.Q7(i,e)}this.O7.tt(new iR(i,e))}},this.z7=t=>{const i=PR(this.O7,t.track);i&&this.O7.it(i)},this.B7=()=>{for(let t=0;t<this.O7.V;t++){let i=this.O7.bL(t);i instanceof iR&&i.i9()}},this.Z7=()=>{if(void 0===this.vV||!_C(this.vV))return;if(this.KE)return;const t=this.vV,i=t.p5,e=t.A5;if(!i||!e)return;if(t.F$)return void this.q7();if(t.fk===Lj.f3)return;const s=i.TE,n=e.TE;if(0===s.V&&0===n.V)return void this.q7();const r=this.LE;if(r<s.Cn(0)||r<n.Cn(0))return void this.q7();if(s.gr(r)!==n.gr(r)){if(t.W$(r))return;this.X7()}else if(this.q7(),!this.stt&&this.u7.s6()){s.AP(n).SP(r,r+.5)&&(this.stt=oc(this.ztt))}},this.ztt=()=>{this.stt=0,this.Z7()},this.H7=()=>{if(this.wk||this.V5)return;if(this.Z8.fk>=Fn.Dz)return;if(void 0===this.vV||!_C(this.vV))return;const t=this.vV,i=t.p5,e=t.A5;if(!i||!e)return;const s=this.LE,n=i.TE,r=e.TE;if(!n.gr(s)||!r.gr(s))return;n.AP(r).SP(s-5,s)&&(this.B8?this.q7():this.K7())},this.ctt=()=>{this.yo(new fi(this.LE))},this.ltt=()=>{this.v7(new J),this.yo(new Se(this.LE))},this.htt=()=>{this.l7(),this.yo(new te(this.LE))},this.wtt=()=>{this.K8()},this.ptt=()=>{this.yo(new yt(this.ct))},this.ftt=()=>{this.yo(new ii(this.LE))},this.gtt=()=>{this.yo(new ms)},this.Mtt=()=>{this.kG||this.G5||this.L7?this.L7=!1:this.yo(new aa(this.LE))},this.Ttt=()=>{this.D7(this.LE),this.L7=!1},this.dtt=()=>{const t=this.LE,i=this.wk,e=this.Z8.fk<Fn.Dz&&!this.OE,s=void 0!==this.J7,n=s&&this.J7!==t;this.Y7(),(i||!s||n&&!e)&&this.k7()},this._tt=()=>{this.rJ()},this.ytt=()=>{if(null!==this.vN.error){const i=this.vN.error;var t;this.eG(new P(null!=(t=i.code)?t:lt.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.btt=()=>{this.ttt&&(this.ott(),this.itt=!0)},this.Btt=t=>{if(Fe.Rg(this.H8),this.H8=0,t.readyState<=Fn.Iz)if(this.kG||this.G5){const i=Fe.Og()-this.y7;if(i<250)return void(this.H8=Fe.Pg((()=>this.Btt(t)),250-i))}else if(void 0!==this.vV&&this.vV.W$(this.LE))return void(this.H8=Fe.Pg((()=>this.Btt(t)),250));this.Ptt!==t.readyState&&(this.Ptt=t.readyState,this.yo(t))},this.mtt=()=>{this.X8()},this.Att=()=>{this.Tk>0&&this.yk>0&&this.yo(new vo)},this.Stt=t=>{this.yo(new yw(t.initDataType,t.initData||new ArrayBuffer(0)))},this.Ntt=()=>{this.yo(new bw)},this.Ett=t=>{const i=t.initData,e=i?ja(i).buffer:new ArrayBuffer(0);this.yo(new yw(dv,e))},this.Itt=t=>{if(t.initData){const i=function(t){try{const i=Al(t),e=new da,s=ss(i,e,al(i,e,!0));return Tl(rm(s,!0))}catch(t){return}}(t.initData);if(!i)return;this.yo(new yw(gv,i))}else this.yo(new yw(gv,new ArrayBuffer(0)))},this.Dtt=t=>{const i=t.initData,e=i?ja(i).buffer:new ArrayBuffer(0);this.yo(new yw(dv,e))},this.h7=()=>{this.l7()},this.a7=t=>{this.v7(t)},this.Utt=t=>{this.yo(t),t.type===Zi.Yy&&this.eG(Au(t.errorObject))},this.vN=t,this.KA=i,this.Xu=e,this.FG=s,this.Z8=new NR(this),this.Z8.yn(E.lL,this.Btt),this.Z8.x8(new Uj(this)),this.u7=new Vj(this),this.u7.yn(E.oP,this.htt),this.E$=new TR(this),this.E$.yn(vR,this.Utt),this.Ul=new Uu,this.O7=new Uu,this.utt=new BE([this.Ul,this.O7]),this.att=new fR(this,this.utt),this.x7=new BE([this.utt,this.att.Z]),this.C7=new oR(this),this.ett(),this.XV()}};var OR=.01;function RR(t,i,e){if(void 0===e&&(e=0),!i.V)return 0;let s=i.gP(t);const n=OR*e;return s===i.Cn(0)?s+=n:s===i.jn(i.V-1)&&(s-=n),s}function PR(t,i){for(let e of t.AL)if(e.sB===i)return e}function zR(t){return!!t.cues&&t.cues.length>0}r();var BR={t$:void 0,i$:void 0,e$:void 0,s$:void 0,n$:void 0,r$:void 0,o$:void 0,h$:void 0,a$:void 0,u$:void 0},UR=class extends tu{get ga(){return this.Za||(this.Za=uC(this)),this.Za}get t$(){}get i$(){}get e$(){}get s$(){}get n$(){}get r$(){}get Qtt(){}get o$(){}get h$(){}get a$(){}get u$(){}constructor(...t){super(...t),this.Za=void 0}},QR=class extends jR{jk(){}get yk(){return 0}get Tk(){return 0}constructor(t,i,e){super(t,i,e,new UR)}};r(),r();var Xn=class{get we(){return this.Ftt}be(){this.Ftt.style.display="none"}ge(){this.Ftt.style.display="block"}Ott(t){t.appendChild(this.Ftt)}gn(){dn(this.Ftt)}constructor(t=5){let i=gi.document.createElement("div");i.className="theoplayer-texttracks",i.style.position="absolute",i.style.display="none",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.width="100%",i.style.height="100%",i.style.lineHeight="1.3em",i.style.zIndex=""+t,this.Ftt=i,this.ge()}};function FR(t,i){return Ei({},i,AM(function(t){return{t$:t.t$,i$:t.i$,e$:t.e$,s$:t.s$,n$:t.n$,r$:t.r$,o$:t.o$,h$:t.h$,a$:t.a$,u$:t.u$}}(t)))}function YR(t){return t.e$&&tt(t.e$,"%")?Number(t.e$.replace("%",""))/100:t.e$&&tt(t.e$,"em")?Number(t.e$.replace("em","")):1}r(),r(),r(),r(),r();var VR=class t{get Ytt(){return this.Vtt+this.ji}set Ytt(t){this.Vtt=t-this.ji}get Gtt(){return this.Wtt+this.Ti}set Gtt(t){this.Wtt=t-this.Ti}Ztt(t){return this.Vtt<t.Ytt&&this.Ytt>t.Vtt&&this.Wtt<t.Gtt&&this.Gtt>t.Wtt}Jz(t){return this.Vtt<=t.Vtt&&t.Ytt<=this.Ytt&&this.Wtt<=t.Wtt&&t.Gtt<=this.Gtt}Zb(){return new t(this.Vtt,this.Wtt,this.ji,this.Ti)}Htt(i){const e=this.Vtt+i,s=this.Wtt+i,n=x.max(0,this.ji-2*i),r=x.max(0,this.Ti-2*i);return new t(e,s,n,r)}Xtt(i){const e=x.min(this.Vtt,i.Vtt),s=x.max(this.Ytt,i.Ytt),n=x.min(this.Wtt,i.Wtt),r=x.max(this.Gtt,i.Gtt);return new t(e,n,s-e,r-n)}constructor(t,i,e,s){this.Vtt=t,this.Wtt=i,this.ji=e,this.Ti=s}},GR=class{qtt(t){const i=this.Ktt(t);if(!i)return!1;for(const t of i)dn(t);return this.Jtt(t),!0}get Ht(){return this.bB}get gV(){return this.vN}get Uu(){return this.Xu}get $tt(){return this.tit}get iit(){return this.eit}FK(){this.sit(),this.bB.L.AL.forEach((t=>this.RQ(t))),this.Uu.yn(ZL.pn,this.nit),this.re(this.Uu.Su,this.Uu.Tu)}rit(t){this.eit=t,this.tit=FR(this.eit,this.oit),this.tit.t$&&(this.gV.style.fontFamily=this.tit.t$),this.re(this.Uu.Su,this.Uu.Tu),this.hit(!0)}ait(){return this.tit}uit(t){return this.cit.has(t.zL)}sit(){this.bB.yn(hs.Jk,this.dit),this.bB.yn(hs.tL,this.fit),this.bB.yn(hs.aa,this.git)}_it(){this.bB.fn(hs.Jk,this.dit),this.bB.fn(hs.tL,this.fit),this.bB.fn(hs.aa,this.git)}vit(t){t.yn(oa.kz,this.wit),t.yn(oa.Lz,this.mit),t.yn(oa._L,this.pit)}Ait(t){t.fn(oa.kz,this.wit),t.fn(oa.Lz,this.mit),t.fn(oa._L,this.pit)}RQ(t){this.vit(t),t.Yh&&this.yit(t)}SQ(t){this.Ait(t),this.Mit(t)}Tit(){this.bB.UI===ua.Jn?this.Sit():this.Nit()}Sit(){if(!this.Iit)return;this.Iit=!1;const t=this.Uu.Su,i=this.Uu.Tu;this.re(t,i),this.hit(!1)}Nit(){this.Iit||(this.Iit=!0,this.hit(!0))}yit(t){this.Iit||t.Yh&&!this.uit(t)&&this.hit(!1)}Mit(t){this.uit(t)&&this.hit(!0)}Dit(t){(t.Yh||this.uit(t))&&this.hit(!0)}hit(t){const i=this.Eit,e=this.Iit?[]:this.bB.q.AL.slice();this.kit(e,i,t),this.Eit=e}Ktt(t){return this.cit.get(t.zL)}Lit(t,i){this.cit.set(t.zL,i)}Jtt(t){this.cit.delete(t.zL)}xit(t){const i=[],e=this.tit;if(void 0!==e.o$){const s=t.Zb();s.Ti=e.o$,i.push(s)}if(void 0!==e.h$){const s=t.Zb();s.Ti=e.h$,s.Gtt=t.Gtt,i.push(s)}return i}Cit(){return this.Eit.slice()}gn(){dn(this.gV),this.cit.clear(),this._it(),this.bB.L.AL.forEach((t=>this.Ait(t))),this.Uu.fn(ZL.pn,this.nit)}constructor(t,i,e,s,n){this.cit=gc(),this.Iit=!0,this.eit=Ei({},BR),this.Eit=[],this.dit=t=>this.RQ(t.uB),this.fit=t=>this.SQ(t.uB),this.git=()=>this.Tit(),this.wit=t=>this.yit(t.uB),this.mit=t=>this.Mit(t.uB),this.pit=t=>this.Dit(t.uB),this.nit=t=>this.re(t.width,t.height),this.bB=t,this.oit=this.tit=n,this.vN=this.jit(e),this.Xu=s,i.appendChild(this.vN)}};function WR(t,i,e,s,n){let r=t.Zb(),o=r,h=1,a=!1;const u=S(getComputedStyle(i).lineHeight)/4;if(!j(u)&&u>0){for(let i=0;i<e.length&&!a;i++){for(;!XR(t,s,e[i],.01)&&(!s.Jz(t)||ZR(t,n));)HR(t,e[i],u);if(s.Jz(t)){o=t.Zb(),a=!0;break}let c=qR(t,s);h>c&&(o=t.Zb(),h=c),t=r.Zb()}s.Jz(t)||(o=r.Zb())}i.style.left=(o.Vtt-s.Vtt)/s.ji*100+"%",i.style.top=(o.Wtt-s.Wtt)/s.Ti*100+"%"}function ZR(t,i){return i.some((i=>t.Ztt(i)))}function xr(t){return new VR(t.left,t.top,t.width,t.height)}var Nt=function(t){return t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y",t}({});function HR(t,i,e){switch(i){case 0:t.Vtt+=e;break;case 1:t.Vtt-=e;break;case 2:t.Wtt+=e;break;case 3:t.Wtt-=e}}function XR(t,i,e,s){switch(e){case 0:return t.Ytt>i.Ytt+s;case 1:return t.Vtt<i.Vtt-s;case 2:return t.Gtt>i.Gtt+s;case 3:return t.Wtt<i.Wtt-s}}function qR(t,i){return x.max(0,x.min(t.Ytt,i.Ytt)-x.max(t.Vtt,i.Vtt))*x.max(0,x.min(t.Gtt,i.Gtt)-x.max(t.Wtt,i.Wtt))/(t.ji*t.Ti)}r();var KR=function(t){return t.Gc='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Xc='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.Jc='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Qc='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif',t}({});function JR(t,i){return t?{Oit:t.Oit,Rit:t.Rit,Pit:t.Pit,El:i}:null}function $R(t){const i=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return i?{Oit:C(i[1],16),Rit:C(i[2],16),Pit:C(i[3],16)}:null}function tP(t){return("0"+t.toString(16)).slice(-2)}function iP(t){return"#"+tP(t.Oit)+tP(t.Rit)+tP(t.Pit)}function eP(t){const i=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return i?{Oit:C(i[1],10),Rit:C(i[2],10),Pit:C(i[3],10),El:S(i[4])}:null}function sP(t,i){return function(t){return t?"rgba("+t.Oit+", "+t.Rit+", "+t.Pit+", "+t.El+")":void 0}(JR($R(t),i/100))}var ro=function(t){return t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent",t}({});function nP(t){return rP[t||"none"]}var rP={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},oP="monospace, sans-serif",hP="Arial, Helvetica, sans-serif",aP='"Times New Roman", Times, serif',uP=rv({monospace:"monospace",sansSerif:hP,serif:aP,monospaceSansSerif:oP,monospaceSerif:"monospace, serif",proportionalSansSerif:hP,proportionalSerif:aP,default:oP}),cP=16,lP="1.3em",dP=class extends GR{jit(t){let i=h.createElement("div");i.className="theoplayer-ttml-texttrack-"+t;const e=i.style;return e.position="absolute",Wd(e,"flex"),e.flexDirection=e.webkitFlexDirection="column",e.overflow="hidden",e.pointerEvents="none",e.top="0",e.left="0",e.width="100%",e.height="100%",e.fontSize=cP+"px",e.lineHeight=lP,i}re(t,i){const e=x.min(t/640,i/360),s=cP*e*YR(this.$tt);this.gV.style.fontSize=s+"px"}kit(t,i,e){for(const t of i)!e&&t.Yh||this.qtt(t);let s=[];const n=xr(this.gV.getBoundingClientRect());s.push(...this.xit(n));for(const i of t){const t=this.zit(i,s,n);for(const i of t)s.push(i.Htt(.1))}}zit(t,i,e){let s=this.Ktt(t);s||(s=this.Bit(t),this.Lit(t,s));for(const t of s)this.gV.appendChild(t);const n=[],r=[Nt.POS_Y,Nt.NEG_Y,Nt.POS_X,Nt.NEG_X];for(const t of s){WR(SP(t),t,r,e,i),n.push(SP(t))}return n}Bit(t){let i=[];const e=t.dQ,s=t.oQ,n=t._Q,r=t.U,o=t.cQ,a=o?x.min(640/o.width,360/o.height):1,u=this.$tt;if(0===_.keys(s).length){const t=h.createElement("div");MP(t),fP(r,e,n,t,t,a,u),gP(t,"body",u),t.firstChild&&i.push(t)}else for(let t of _.keys(s)){let o=h.createElement("div");o.id=t,MP(o),wP(o,"region",s[t],e,a),fP(r,e,n,o,o,a,u),gP(o,"body",u),o.firstChild&&i.push(o)}return i}rit(t){return dC(this.gV,t),super.rit(t)}constructor(t,i,e,s){super(t,i,e,s,BR)}};function fP(t,i,e,s,n,r,o){if(Gb(t)&&function(t){const i=t.jD.toUpperCase();return"SPAN"===i||"P"===i||"BR"===i||"DIV"===i||"BODY"===i}(t)){let a=_P(t);if(!a||(null==n?void 0:n.id)===a){let a;if("BODY"===t.jD.toUpperCase())a=n;else{if(a=function(t){let i;switch(t.jD.toUpperCase()){case"BR":i=h.createElement("br");break;case"SPAN":i=h.createElement("span"),TP(i),vP(i,t);break;case"P":i=h.createElement("p"),function(t){TP(t);const i=t.style;i.textAlign="inherit",i.padding="0",i.margin="0"}(i),vP(i,t);break;case"DIV":i=h.createElement("div"),vP(i,t)}return i}(t),!a)return;s.appendChild(a)}!function(t,i,e,s,n){let r=i.KD("style");AP(t,i.jD,r,e,s,n),function(t,i,e,s){for(const n of i.XD)yP(t,i.jD,n.jD,n.zD,e,s)}(t,i,s,n)}(a,t,i,n,r),function(t,i,e){let s=null==i?void 0:i.KD("smpte:backgroundImage");if(s){s=s.replace("#","");let n=e&&mP(e,(t=>t.XD.some((t=>"id"===t.jD&&t.zD===s))));n&&pP(t,n,i,!0)}!function(t,i){const e=i.m[0];if(!e||"metadata"!==e.jD.toLowerCase())return;const s=e.m[0];pP(t,s,i)}(t,i)}(a,t,e),gP(a,t.jD,o);for(const s of t.QD)fP(s,i,e,a,n,r,o)}}else if(Wb(t)){const i=h.createTextNode(t.rI);if("SPAN"!==s.nodeName.toUpperCase()){const t=h.createElement("span");TP(t),gP(t,"span",o),t.appendChild(i),s.appendChild(t)}else s.appendChild(i)}}function gP(t,i,e){const s=t.style;switch(e.t$&&(s.fontFamily=e.t$),e.i$&&(s.color=e.i$),i.toLowerCase()){case"span":e.s$&&(s.background=e.s$);break;case"p":case"div":e.n$&&(s.backgroundColor=e.n$);break;case"body":e.r$&&(s.textShadow=nP(e.r$))}}function _P(t){const i=t.KD("region");if("p"===t.jD.toLowerCase())return i;const e=[];for(const i of t.m)e.push(_P(i));return ow(e),0===e.length?i:1===e.length?null!=(s=e[0])?s:i:void 0;var s}function vP(t,i){let e=i.JD(gI,"id");e&&(t.id=e)}function wP(t,i,e,s,n){AP(t,i,e.style,s,t,n);for(const s of _.keys(e))yP(t,i,s,e[s],t,n)}function mP(t,i){if(i(t))return t;for(let e of t.m){const t=mP(e,i);if(t)return t}return null}function pP(t,i,e,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const i=t&&t.QD.length>0?t.QD[0]:null;return i&&Wb(i)?"data:image/png;base64,"+i.rI:""}(i),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,i){const e=t.style;Wd(e,"flex"),e.flexDirection=e.webkitFlexDirection="column";let s=i.KD("smpte:backgroundImageVertical"),n="center";if(s)switch(s.toLowerCase()){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end";break;case"inherit":n="inherit"}e.justifyContent=e.webkitJustifyContent=n;let r=i.KD("smpte:backgroundImageHorizontal"),o="center";if(r)switch(r.toLowerCase()){case"left":o="flex-start";break;case"center":o="center";break;case"right":o="flex-end";break;case"inherit":o="inherit"}e.alignItems=e.webkitAlignItems=o}(t,e),t.appendChild(n)}function AP(t,i,e,s,n,r){if(e)for(const o of e.split(" "))if(s[o])for(const e of _.keys(s[o]))"style"===e.toLowerCase()?AP(t,i,s[o][e],s,n,r):yP(t,i,e,s[o][e],n,r)}function yP(t,i,e,s,n,r){const o=t.style;switch(e){case"backgroundColor":o.backgroundColor=s;break;case"color":o.color=s;break;case"direction":o.direction=s;break;case"display":"none"===s&&(o.display="none");break;case"fontFamily":var h;o.fontFamily=null!=(h=uP.get(s))?h:s;break;case"fontSize":{let t=s;if(tt(t,"px")){const i=Number(t.slice(0,-2));t=i*r/cP+"em"}else tt(t,"c")&&(t=t.replace("c","em"));o.fontSize=t,o.lineHeight&&"inherit"!==o.lineHeight||(o.lineHeight=lP);break}case"fontStyle":o.fontStyle=s;break;case"fontWeight":o.fontWeight=s;break;case"lineHeight":{let t=s;if(tt(t,"px")){const i=Number(t.slice(0,-2));t=i*r+"px"}o.lineHeight=t;break}case"opacity":o.opacity=s;break;case"overflow":o.overflow=s;break;case"padding":o.padding=s;break;case"textAlign":o.textAlign=s;break;case"textDecoration":switch(s){case"lineThrough":o.textDecoration="line-through";break;case"underline":case"overline":o.textDecoration=s;break;case"noUnderline":case"noLineThrough":case"noOverline":o.textDecoration="none"}break;case"unicodeBidi":switch(s){case"bidiOverride":o.unicodeBidi="bidi-override";break;case"normal":case"embed":case"isolate":o.unicodeBidi=s}break;case"visibility":o.visibility=s;break;case"zIndex":o.zIndex=s;break;case"displayAlign":{let t;switch(s.toLowerCase()){case"before":t="flex-start";break;case"center":t="center";break;case"after":t="flex-end";break;case"justify":t="space-between";break;default:return}o.justifyContent=o.webkitJustifyContent=t;break}case"extent":{const e=bP(i.toLowerCase())?n:t;let r,o,h=s.split(" ",2);2===h.length?(r=h[0],o=h[1]):r=o="100%",e&&(e.style.height=o,e.style.width=r);break}case"origin":{const e=bP(i.toLowerCase())?n:t,[r,o]=s.split(" ",2);e&&(r||o)&&(r&&(e.style.left=r),o&&(e.style.top=o));break}case"showBackground":case"textOutline":break;case"wrapOption":switch(s){case"wrap":o.whiteSpace="normal";break;case"noWrap":o.whiteSpace="nowrap"}break;case"writingMode":{let t,i,e,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",i="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",e="upright";break;case"tblr":t="vertical-lr",e="upright";break;case"rl":t="horizontal-tb",i="rtl";break;default:return}o.writingMode=t,o.setProperty("-webkit-writing-mode",t),i&&(o.direction=i),e&&(o.textOrientation=e,o.setProperty("-webkit-text-orientation",e)),n&&(o.unicodeBidi=n);break}case"linePadding":if(tt(s,"c")){let t=s.replace("c","em");o.paddingLeft=o.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?o.textAlign="":o.textAlign=s}}function bP(t){return"div"===t||"p"===t||"span"===t}function MP(t){const i=t.style;Wd(i,"flex"),i.flexDirection=i.webkitFlexDirection="column",i.top="auto",i.left="5%",i.width="90%",i.height="100%",i.maxHeight="100%",i.maxWidth="100%",i.overflow="visible",i.position="absolute",i.fontFamily=hP,i.color=ro.WHITE,i.background=ro.TRANSPARENT,i.textShadow=nP("uniform"),i.textAlign="start",i.writingMode="horizontal-tb",i.setProperty("-webkit-writing-mode","horizontal-tb"),i.padding="0",i.margin="0",i.fontSize="inherit",i.lineHeight="inherit"}function TP(t){const i=t.style;i.fontFamily="inherit",i.color="inherit",i.fontSize="inherit",i.lineHeight="inherit",i.textShadow="inherit"}function SP(t){let i=xr(t.getBoundingClientRect());if("visible"===getComputedStyle(t).overflow&&t.scrollHeight>t.clientHeight){const e=t.children;for(let t=0;t<e.length;t++){const s=e[t];i=i.Xtt(xr(s.getBoundingClientRect()))}}return i}r(),r();var NP=void 0;function IP(t){return NP||(NP=gi.document.createElement("textarea")),NP.innerHTML=t,NP.value}function DP(t,i){let e="Data",s="",n=[],r=t.charAt(i.tc),o="",h={YA:"starttag",GD:"",Uit:[]};for(;i.tc<t.length+1;){switch(r=i.tc<t.length?t.charAt(i.tc):"EOF",e){case"Data":switch(r){case"&":let n=t.substring(i.tc).match(/&#?[0-9a-zA-Z]+;/);n?(s+=IP(n[0]),i.Gb(n[0].length-1)):s+="&";break;case"<":if(s)return{YA:"string",U:s};e="Tag";break;case"EOF":return{YA:"string",U:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":e="StartTagAnnotation";break;case".":e="StartTagClass";break;case"/":e="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,e="TimestampTag";break;case">":return i.Gb(1),h;case"EOF":return h;default:s=r,e="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":e="StartTagAnnotation";break;case"\n":o=r,e="StartTagAnnotation";break;case".":e="StartTagClass";break;case">":return i.Gb(1),{YA:"starttag",GD:s,Uit:[]};case"EOF":return{YA:"starttag",GD:s,Uit:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(o),o="",e="StartTagAnnotation";break;case"\n":n.push(o),o=r,e="StartTagAnnotation";break;case".":n.push(o),o="";break;case">":return i.Gb(1),n.push(o),{YA:"starttag",GD:s,Uit:n};case"EOF":return n.push(o),{YA:"starttag",GD:s,Uit:n};default:o+=r}break;case"StartTagAnnotation":switch(r){case"&":e="CharRefInAnnotation";break;case">":i.Gb(1);let t=o.trim();return t=t.replace(/\s/," "),{YA:"starttag",GD:s,Uit:n,Qit:t};default:o+=r}break;case"CharRefInAnnotation":let a="";for(let e=i.tc;">"===t.charAt(e);e++)a+=t.charAt(e);o+=a||"&",e="StartTagAnnotation";break;case"EndTag":switch(r){case">":return i.Gb(1),{YA:"endtag",GD:s};case"EOF":return{YA:"endtag",GD:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return i.Gb(1),{YA:"timestamp",Fit:s};case"EOF":return{YA:"timestamp",Fit:s};default:s+=r}}i.Gb(1)}return h}var EP=function(t){return t.Yit="string",t.Vit="starttag",t.Git="endtag",t.Wit="timestamp",t}({});function kP(t){let i;if(t.getBoundingClientRect&&t.parentNode&&(i=t.getBoundingClientRect()),!i)return{left:0,top:0};const e=h.documentElement,n=h.body,r=e.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=i.left+o-r,u=e.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,l=i.top+c-u;return{left:x.round(a),top:x.round(l)}}function LP(t,i,e,s){if(void 0===s&&(s=0),!t||!i)return;t.style.left="0px";let n=t.getClientRects(),r=i.getClientRects();if(0===n.length||0===r.length)return;let o=n[0],h=r[0],a=o.width/2+o.left;xP(t,h.width/2+h.left-a,e,s)}function xP(t,i,e,s){void 0===s&&(s=0),jP(t,i,"left","right",e,s)}function CP(t,i,e,s){void 0===s&&(s=0),jP(t,i,"top","bottom",e,s)}function jP(t,i,e,s,n,r){void 0===r&&(r=0);const o=t.getClientRects();if(n&&o.length>0){const t=o[0];i=ur(i,n[e]+r-t[e],n[s]-r-t[s])}t.style[e]=i+"px"}function Ou(t,i){void 0===t.textContent?t.innerText=i:t.textContent=i}r();var OP={i$:ro.WHITE,t$:"sans-serif",e$:"100%",s$:"rgba(0,0,0,0.8)",n$:ro.TRANSPARENT,r$:"none",o$:void 0,h$:void 0,a$:void 0,u$:void 0},RP="theoplayer-webvtt-region-",PP="theoplayer-webvtt-styling-",zP="theoplayer-webvtt-default-style",BP=5.23,UP=1.14,QP=class extends GR{jit(t){let i=h.createElement("div");i.className="theoplayer-webvtt-texttrack-"+t,pc(i),i.style.overflow="hidden",i.style.pointerEvents="none";const e=this.$tt.t$;return e&&(i.style.fontFamily=e),i.style.whiteSpace="pre-line",function(){if(h.getElementById(zP))return;const t=[];for(const[i,e]of qP)t.push("."+PP+i+" { color: "+e+" !important; }"),t.push("."+PP+"Zit"+i+" { background-color: "+e+" !important; }"),t.push("video::cue(."+i+") { color: "+e+"; }"),t.push("Hit"+i+") { background-color: "+e+"; }");const i=h.createElement("style");i.id=zP,i.innerHTML=t.join("\n"),h.body.appendChild(i)}(),i}FK(){this.gV.appendChild(this.Xit),super.FK()}re(t,i){const e=x.min(t/100,i/100),s=YR(this.$tt);this.qit.forEach((t=>{let{wB:i,Kit:n}=t;this.Jit(n,e,s,i)})),this.Jit(this.Xit,e,s)}rit(t){dC(this.gV,t),super.rit(t)}kit(t,i,e){const s=this.gV,n=this.Uu.Tu/100;let r=[];for(const i of t)void 0!==i.wB&&(Qa(r,i.wB)||r.push(i.wB));this.qit.forEach(((t,i)=>{let{wB:s,Kit:n}=t;!e&&Qa(r,s)||(dn(n),this.qit.delete(i))}));for(const t of i)!e&&t.Yh||this.qtt(t);let o=[];const h=xr(this.Xit.getBoundingClientRect());o.push(...this.xit(h));for(const t of r){let i;this.qit.has(t.o)?i=this.qit.get(t.o).Kit:(i=HP(t,n),s.appendChild(i),this.qit.set(t.o,{wB:t,Kit:i})),o.push(xr(i.getBoundingClientRect()))}t.sort(KP);for(const i of t){const t=this.zit(i,o,h);void 0!==t&&o.push(t.Htt(.1))}}zit(t,i,e){var s;let n;t.wB?(n=this.qit.get(t.wB.o).Kit,"up"===t.wB.OB&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.Xit;let r=null==(s=this.Ktt(t))?void 0:s[0];if(r||(r=this.$it(t),this.Lit(t,[r])),n.appendChild(r),t.wB||(FP(r,t),t.mB?function(t,i,e,s){const n=XP(t),r=n?e.Ti:e.ji;let o=S(getComputedStyle(i).lineHeight);if(0===o||j(o))return;let h=xr(i.getBoundingClientRect()),a=x.round(cN(t));"rl"===t.Pt&&(a=-(a+1));let u=o*a;"rl"===t.Pt&&(u=u-h.ji+o);a<0&&(u+=r,o=-o);n?h.Wtt+=u:h.Vtt+=u;const c=h.Zb();let l=!1;for(;!e.Jz(h)||ZR(h,s);)if(n)if(o<0&&h.Wtt<e.Wtt||o>0&&h.Gtt>e.Gtt){if(h.Wtt=c.Wtt,l)break;o=-o,l=!0}else h.Wtt+=o;else if(o<0&&h.Vtt<e.Vtt||o>0&&h.Ytt>e.Ytt){if(h.Vtt=c.Vtt,l)break;o=-o,l=!0}else h.Vtt+=o;n?i.style.top=(h.Wtt-e.Wtt)/e.Ti*100+"%":i.style.left=(h.Vtt-e.Vtt)/e.ji*100+"%"}(t,r,e,i):function(t,i,e,s){let n,r=xr(i.getBoundingClientRect());if(0===r.ji||0===r.Ti)return;XP(t)?"center"===t._B?r.Wtt-=r.Ti/2:"end"===t._B&&(r.Wtt-=r.Ti):"center"===t._B?r.Vtt-=r.ji/2:"end"===t._B&&(r.Vtt-=r.ji);n=""===t.Pt?[Nt.POS_Y,Nt.NEG_Y,Nt.POS_X,Nt.NEG_X]:"lr"===t.Pt?[Nt.POS_X,Nt.NEG_X,Nt.POS_Y,Nt.NEG_Y]:[Nt.NEG_X,Nt.POS_X,Nt.POS_Y,Nt.NEG_Y];WR(r,i,n,e,s)}(t,r,e,i)),!t.wB)return xr(r.getBoundingClientRect())}$it(t){let i=new da,e=t.U,s=this.tet(t),n={iet:void 0,we:s},r=n,o="",a="",u=[n],c=[],l=[];for(;i.tc<e.length;){let t=DP(e,i);if(t.YA===EP.Yit){const i=h.createElement("span");Ou(i,t.U),YP(i,u),""!==o&&(i.lang=o),this.eet(i,a),r.we.appendChild(i)}else if(t.YA===EP.Vit){const i=t.GD.toLowerCase();switch(i){case"i":case"b":case"u":case"ruby":{let e=h.createElement(i);r.we.appendChild(e),r={iet:t,we:e},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.iet)?void 0:d.GD.toLowerCase())){let i=h.createElement("rt");r.we.appendChild(i),r={iet:t,we:i},u.push(r)}break;case"c":case"v":r={iet:t,we:r.we},u.push(r);break;case"font":{var f;const i=null==(f=t.Qit)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);i&&(a=i[1],l.push(a),r={iet:t,we:r.we},u.push(r));break}case"lang":var g;o=null!=(g=t.Qit)?g:"",c.push(o)}}else if(t.YA===EP.Git){var _;const i=t.GD.toLowerCase(),e=null==(_=r.iet)?void 0:_.GD.toLowerCase();e===i?(u.pop(),r=u[u.length-1],"font"===i&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===e&&"ruby"===i?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===i&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.YA===EP.Wit){let i=t.Fit,e=new da;try{pl(i,e)}catch(t){Gr("ERROR collecting timestamp",t)}}}return s}eet(t,i){const e=this.$tt,s=this.iit;e.s$&&(t.style.background=e.s$);const n=s.i$||i||e.i$;n&&(t.style.color=n)}Jit(t,i,e,s){if(s){let n=VP(s,i);t.style.height=n*e+"px",t.style.left=GP(s)+"%",t.style.top=WP(s,i)+"px"}t.style.fontSize=BP*i*e+"px"}tet(t){const i=h.createElement("div");i.style.position="absolute",i.style.margin="0",i.style.padding="0",i.style.unicodeBidi="plaintext",i.style.wordWrap="break-word",i.style.overflowWrap="break-word",i.style.width="auto",i.style.textAlign=t.fB,function(t,i){"rl"===i.Pt?t.style.writingMode="vertical-rl":"lr"===i.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(i,t),function(t,i){let e=fN(i);XP(i)?(t.style.width=e+"%",t.style.height="auto"):(t.style.height=e+"%",t.style.width="auto")}(i,t),FP(i,t);const e=this.$tt.n$;e&&(i.style.background=e);const s=this.$tt.i$;return s&&(i.style.color=s),i.style.textShadow=nP(this.$tt.r$),i}constructor(t,i,e,s){super(t,i,e,s,OP),this.qit=ll(),this.Xit=ZP(3)}};function FP(t,i){let e,s,n=dN(i),r=lN(i),o=fN(i);if(XP(i)){switch(n){case"line-left":e=r;break;case"center":e=r-o/2;break;case"line-right":e=r-o}s=i.mB?0:cN(i)}else{switch(n){case"line-left":s=r;break;case"center":s=r-o/2;break;case"line-right":s=r-o}e=i.mB?0:cN(i)}t.style.left=e+"%",t.style.top=s+"%"}function YP(t,i){for(const e of i)if(e.iet){for(const i of e.iet.Uit)Ea(t,PP+i);"v"===e.iet.GD.toLowerCase()&&e.iet.Qit&&Ea(t,"theoplayer-webvtt-voice-"+e.iet.Qit)}}function VP(t,i){return t.xB*(BP*i)*UP}function GP(t){return t.RB-t.CB*t.ji/100}function WP(t,i){let e=t.PB,s=t.jB*VP(t,i)/100;return x.max(0,e-s)}function ZP(t){let i=h.createElement("div");return i.className=RP+"default",pc(i),i.style.wordWrap="break-word",i.style.writingMode="horizontal-tb",i.style.pointerEvents="none",i.style.width="auto",i.style.height="auto",i.style.maxHeight="100%",i.style.minHeight="0px",i.style.padding="0",i.style.boxSizing="border-box",i.style.fontSize=BP*t+"px",i.style.lineHeight=UP+"em",i}function HP(t,i){let e=ZP(i);e.className=RP+t.o;let s=t.ji,n=VP(t,i);return e.style.width=s+"%",e.style.height=n+"px",e.style.left=GP(t)+"%",e.style.right="",e.style.top=WP(t,i)+"px",e.style.bottom="",e.style.boxSizing="border-box",e}function XP(t){return""===t.Pt}var qP=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function KP(t,i){const e=cN(t),s=cN(i),n=JP(e,t.mB),r=JP(s,i.mB);return n&&r?e-s||Ze(i,t)||i.zL-t.zL:Ze(t,i)||t.zL-i.zL}function JP(t,i){return i?t<0?t>-8:t>8:t>50}r(),r(),r();var $P=function(t){return t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics",t}({}),tz={i$:ro.WHITE,t$:KR.Jc,e$:"100%",s$:ro.BLACK,n$:"transparent",r$:"none",net:"regular",o$:void 0,h$:void 0,a$:void 0,u$:void 0},iz=[{ret:ro.WHITE,net:"regular",oet:0},{ret:ro.WHITE,net:"underline",oet:0},{ret:ro.GREEN,net:"regular",oet:0},{ret:ro.GREEN,net:"underline",oet:0},{ret:ro.BLUE,net:"regular",oet:0},{ret:ro.BLUE,net:"underline",oet:0},{ret:ro.CYAN,net:"regular",oet:0},{ret:ro.CYAN,net:"underline",oet:0},{ret:ro.RED,net:"regular",oet:0},{ret:ro.RED,net:"underline",oet:0},{ret:ro.YELLOW,net:"regular",oet:0},{ret:ro.YELLOW,net:"underline",oet:0},{ret:ro.MAGENTA,net:"regular",oet:0},{ret:ro.MAGENTA,net:"underline",oet:0},{ret:ro.WHITE,net:"italics",oet:0},{ret:ro.WHITE,net:"underline-italics",oet:0},{ret:ro.WHITE,net:"regular",oet:0},{ret:ro.WHITE,net:"underline",oet:0},{ret:ro.WHITE,net:"regular",oet:4},{ret:ro.WHITE,net:"underline",oet:4},{ret:ro.WHITE,net:"regular",oet:8},{ret:ro.WHITE,net:"underline",oet:8},{ret:ro.WHITE,net:"regular",oet:12},{ret:ro.WHITE,net:"underline",oet:12},{ret:ro.WHITE,net:"regular",oet:16},{ret:ro.WHITE,net:"underline",oet:16},{ret:ro.WHITE,net:"regular",oet:20},{ret:ro.WHITE,net:"underline",oet:20},{ret:ro.WHITE,net:"regular",oet:24},{ret:ro.WHITE,net:"underline",oet:24},{ret:ro.WHITE,net:"regular",oet:28},{ret:ro.WHITE,net:"underline",oet:28}],ez=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function sz(t,i){return MN(t.het,i.het)||Wv(t.mR,i.mR)}r();var mn=32,nz=/CC([1-4])=(.*)/;function rz(t){if(!t)return[];const i=[],e=t.trim().split(";");if(e.every((t=>t.match(nz))))for(const t of e){const[,e,s]=t.match(nz);i.push({aet:Number(e),uet:s})}else for(let t=0;t<e.length;t++)i.push({aet:t+1,uet:e[t]});return i}var oz=class t{get cet(){return this.det.let}get fet(){return this.det._et}get vet(){return this.det._et.oet-this.det.let.oet+1}get wet(){return this.det._et.met-this.det.let.met+1}pr(){return this.pet=this.Aet(),this.yet(),this.bet(),this.pet}Aet(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.vet/mn*this.Tet.Met*100+"%",t.style.height=1.2*this.wet+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.Tet.Net?"calc(1em - 1ch)":"";const i=this.tit.t$;i&&(t.style.fontFamily=i);const e=this.tit.n$;return e&&(t.style.backgroundColor=e),t}yet(){if(!this.pet)return;let t=this.cet.met/15*100,i=this.cet.oet/mn*100,e=(mn-this.fet.oet-1)/mn*100,s=(15-this.fet.met-1)/15*100;this.Tet.Iet||(i=e=1,this.pet.style.width="98%"),s<t?this.pet.style.bottom=s*this.Tet.Met+"%":this.pet.style.top=t*this.Tet.Met+"%",e<i?this.pet.style.right=e+"%":this.pet.style.left=i+"%"}bet(){const t=this.det.Det.sort(hz);for(let i=0;i<t.length;i++)this.Eet(t[i-1],t[i]),this.ket(t[i]);this.Eet(t[t.length-1],void 0)}ket(i){var e;const s=FR(this.tit,i.Let),n=t.xet(s);Ou(n,i.Cet),null==(e=this.pet)||e.appendChild(n)}static xet(t){const i=h.createElement("span");i.style.display="inline-block",t.net!==$P.FONT_ITALICS&&t.net!==$P.FONT_UNDERLINE_ITALICS||(i.style.fontStyle="italic"),t.net!==$P.FONT_UNDERLINE&&t.net!==$P.FONT_UNDERLINE_ITALICS||(i.style.textDecoration="underline");const e=t.i$;e&&(i.style.color=e);const s=t.s$;return s&&(i.style.backgroundColor=s),i.style.textShadow=nP(t.r$),i.style.height="1.2em",i}Eet(t,i){let e=t?t._et.met:this.det.let.met;const s=i?i.let.met:this.det._et.met;let n=t?t._et.oet:this.det.let.oet;const r=i?i.let.oet:this.det._et.oet;e<s&&(!i||t&&t.let.met!==i.let.met?this.jet():this.Oet(this.det._et.oet-n),n=this.det.let.oet),n<r&&(i?this.Oet(r-n):this.jet())}jet(){var t;const i=h.createElement("br");null==(t=this.pet)||t.appendChild(i)}Oet(t){var i;if(t<=0)return;const e=h.createElement("span");e.style.display="inline-block",Ou(e,jv(" ",t)),null==(i=this.pet)||i.appendChild(e)}constructor(t,i,e){this.det=t,this.Tet=i,this.tit=e}};function hz(t,i){return function(t,i){if(t.met!==i.met)return t.met-i.met;return t.oet-i.oet}(t.let,i.let)}var az=class extends GR{jit(t){let i=h.createElement("div");return i.className="theoplayer-cea608-texttrack-"+t,i.style.position="absolute",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top="10%",i.style.bottom="10%",this.$tt.t$&&(i.style.fontFamily=this.$tt.t$),i}re(t,i){this.vl()}vl(){let t=YR(this.$tt);this.Ret=function(t){return{Met:t/100,Net:t<=100,Iet:t<=150}}(100*t);const i=this.Pet/mn;this.zet=i*t,this.gV.style.fontSize=this.zet+"px"}get Pet(){let t=this.gV.offsetWidth;return this.Ret&&this.Ret.Iet||(t*=.8),t}kit(t,i,e){for(const t of i)!e&&t.Yh||this.qtt(t);for(const i of t)this.zit(i)}zit(t){this.Ret&&this.Ret.Iet?this.Bet(80):this.Bet(100),this.vl();let i=this.Ktt(t);i||(i=this.Bit(t),this.Lit(t,i));for(const t of i)this.gV.appendChild(t)}Bit(t){return t.U.map((t=>new oz(t,this.Ret,this.$tt).pr()))}Bet(t){const i=(100-t)/2;this.gV.style.left=i+"%",this.gV.style.width=t+"%"}constructor(t,i,e,s){super(t,i,e,s,tz)}},Qn=class t{Uet(t){for(let i of this.Qet)if(i.Ht===t)return i}static Fet(t){switch(t.YA){case El.TTML:case El.SRT:case El.WEBVTT:case El.CEA608:return!0}return!1}Yet(t){switch(t.YA){case El.TTML:return new dP(t,this.Vet,t.kh,this.Xu);case El.SRT:case El.WEBVTT:return new QP(t,this.Vet,t.kh,this.Xu);case El.CEA608:return new az(t,this.Vet,t.kh,this.Xu)}}Get(t){let i=this.Uet(t);i||(i=this.Yet(t),i&&(i.FK(),i.rit(this.FG),this.Qet.push(i),t.UI===ua.Jn&&i.Sit()))}Wet(t){let i=this.Qet;for(let e=i.length-1;e>=0;e-=1){let s=i[e];s.Ht===t&&(s.gn(),Mn(i,e))}}Zet(i){zI(i.Lt)&&t.Fet(i)&&(i.fk===Ma.ERROR?this.Wet(i):this.Get(i))}get X6(){return this.Het.cs||this.Qo.xz}tr(){for(let t of this.Qet)t.Ht.fn(hs.lL,this.Xet),t.Ht.fn(hs.fL,this.Xet),t.gn();nt(this.Qet)}gn(){this.tr();for(let t of this.Qet)t.gn();this.Ul.fn(zh.Hk,this.qet),this.Ul.fn(zh.qk,this.Ket),this.Ul.fn(hs.aa,this.Xet),this.Het.fn($s.aa,this.Jet),this.Qo.fn([Yu.kz,Yu.Lz],this.Jet),this.FG.fn("cL",this.$et)}constructor(t,i,e,s,n,r){this.Qet=[],this.qet=t=>{let i=t.Ht;i.yn(hs.lL,this.Xet),i.yn(hs.fL,this.Xet),i instanceof iR&&(i.X6=this.X6),this.Zet(i)},this.Xet=t=>{let i=t.Ht;this.Zet(i)},this.Ket=t=>{let i=t.Ht;i.fn(hs.lL,this.Xet),i.fn(hs.fL,this.Xet),this.Wet(i)},this.Jet=()=>{let t=this.X6;for(let i of this.Ul.AL)i instanceof iR&&(i.X6=t)},this.$et=()=>{for(let t of this.Qet)t.rit(this.FG)},this.Vet=t,this.Xu=i,this.Ul=e,this.Het=n,this.Qo=r,this.FG=s,this.Ul.yn(zh.Hk,this.qet),this.Ul.yn(zh.qk,this.Ket),this.Ul.yn(hs.aa,this.Xet),this.Het.yn($s.aa,this.Jet),this.Qo.yn([Yu.kz,Yu.Lz],this.Jet),this.FG.yn("cL",this.$et),this.Jet()}};r();var uz=class extends tu{get Cz(){var t;return null!=(t=this.tst.ownerDocument.pictureInPictureEnabled)&&t}get xz(){return this.ist}async co(){if(this.Cz){if(!this.xz){const t=this.zy([Yu.kz,Yu.ua]);await this.tst.requestPictureInPicture(),await t,this.ist||this.yo(new wr)}}else this.yo(new wr)}async bo(){if(this.Cz){if(this.ist){const t=this.zy([Yu.Lz,Yu.ua]);await this.tst.ownerDocument.exitPictureInPicture(),await t,this.ist&&this.yo(new wr)}}else this.yo(new wr)}gn(){this.Bo(),this.tst.removeEventListener("enterpictureinpicture",this.sst),this.tst.removeEventListener("leavepictureinpicture",this.nst)}constructor(t){super(),this.ist=!1,this.sst=()=>{this.ist=!0,this.yo(new NS)},this.nst=()=>{this.ist=!1,this.yo(new IS)},this.tst=t,this.tst.addEventListener("enterpictureinpicture",this.sst),this.tst.addEventListener("leavepictureinpicture",this.nst)}};function cz(t){const i=new dx,e=function(t){const i=[];return cx.na(t)&&i.push(new cx(t)),lx.na(t)&&i.push(new lx(t)),i}(t);if(e.length>0){for(const t of e)i.Eq(t);i.Dq(e[0])}return i}var lz=class extends jR{get gV(){return this.vN}get yk(){return this.vN.videoHeight}get Tk(){return this.vN.videoWidth}get wa(){return this.rst}get xV(){return this.ost}jk(){return this.vN}async wy(){this.ost.gn(),this.rst.gn(),this.hst.gn(),this.ast.gn(),await super.wy()}be(){super.be(),this.hst.be()}ge(){super.ge(),this.hst.ge()}Ott(t){super.Ott(t),this.hst.Ott(t)}constructor(t,i,e,s){super(t,i,e,s),this.rst=cz(t),this.ost=new uz(t),this.hst=new Xn,this.ast=new Qn(this.hst.we,this.Uu,this.nt,this.Ll,this.wa,this.xV)}};r(),bs(),r();r(),Qi(),r();var dz=function(t){return t.ust="HELLO",t.cst="HI_THERE",t.lst="INITIALIZE",t.dst="APPEND_INIT",t.fst="APPEND_DATA",t.gst="ACK",t._st="REMOVE",t.vst="DESTROY_SESSION",t}({}),fz=class{wst(t){return this.Go.Wo((async t=>{yi(t);const i=new MessageChannel,e=i.port1,s=i.port2;Kl.serviceWorker.controller||await ku(Kl.serviceWorker,"install",t),"activated"!==Kl.serviceWorker.controller.state&&await ku(Kl.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};Kl.serviceWorker.controller.postMessage(n,[s]),e.start(),this.oA=e;try{const i=await ku(e,"message",t),s=i.data;if("HI_THERE"!==s.kind)throw new b("Could not set up message channel");this.pN=s.sessionId}catch(t){throw Tu(t)&&this.mst(),t}}),t)}pst(t,i){return this.oA,this.Go.Wo((async()=>{if(!this.oA)throw new b("MessageSession not set up yet or already closed.");i||(i=[]),this.oA.postMessage(t,i);const e=await ku(this.oA,"message");return e.data}))}Ast(){return this.Go.Wo((()=>this.mst()))}mst(){if(!Kl.serviceWorker.controller)return;if("activated"!==Kl.serviceWorker.controller.state)return;if(!this.oA)return;const t={kind:"DESTROY_SESSION"};this.oA.postMessage(t),this.oA.close(),this.oA=void 0}constructor(){this.Go=new Wa}};r();var gz=class{get yst(){return this.bst}Mst(t,i){const e=t-i;this.bst=e>this.yst?this.bst:e}Tst(t){this.bst=t}constructor(){this.bst=1/0}};r(),r(),r();var gt=function(t){return t.SI="audio",t.NI="video",t.MQ="metadata",t}({}),_z=class extends tu{get TE(){return void 0===this.Sst||void 0===this.Nst?Mo.PP():new Mo([this.Sst,this.Nst])}get md(){return{VN:this.kX}}get E3(){return I(this.kX,"audio")?Ri.SI:I(this.kX,"video")?Ri.NI:Ri.dI}get gX(){return this.kX}get x3(){return Mo.PP()}get PK(){return 30}set PK(t){}get QK(){return 30}set QK(t){}O3(t,i){}R3(t,i){}F$(){return this.Ist}get ca(){return this.Dst}get Est(){return this.Sst}get dB(){return this.Nst}async P3(){}async s3(t,i){}async B4(t,i,e){if(t.YA!==Me.v$)throw new b("Streaming or opaque segments are not supported yet.");const s=t.rI,n=async()=>{const t=s.buffer,e={kind:dz.fst,mediaType:vz(this.kX),segment:s,startPts:i.kst,totalDuration:i.ct};if(await this.Lst.pst(e,[t]),void 0===this.Sst){const t=i.kst+i.rQ;this.Sst=t,this.Nst=t}this.Nst=this.Nst+i.ct,this.yo(new Jr(po.g$))};return this.Go.Wo((async t=>{yi(t);try{this.Dst=!0,await n()}finally{this.Dst=!1}}),e)}async F4(t,i,e){if(t.YA!==Me.v$)throw new b("Streaming or opaque initialization segments are not supported yet.");const s=t.rI,n=async()=>{const t={kind:dz.dst,mediaType:vz(this.kX),segment:s};await this.Lst.pst(t,[])};return this.Go.Wo((async t=>{yi(t);try{this.Dst=!0,await n()}finally{this.Dst=!1}}),e)}I3(){this.Ist=!0}w3(){this.Ist=!1}async wS(t,i,e){const s=async()=>{const t={kind:dz._st,mediaType:vz(this.kX),endTime:i};await this.Lst.pst(t),this.Sst=void 0,this.Nst=void 0,this.yo(new Jr(po.g$))};return this.Go.Wo((async t=>{yi(t);try{this.Dst=!0,await s()}finally{this.Dst=!1}}),e)}N$(t){return this.kX===t.VN}D$(t){return this.kX=t.VN,Promise.resolve()}async wy(){this.Bo(),await this.Go.gn()}constructor(t,i){super(),this.kX=t,this.Lst=i,this.Sst=void 0,this.Nst=void 0,this.Go=new Wa,this.Dst=!1,this.Ist=!1}};function vz(t){return t.match(/video/)?gt.NI:gt.SI}var wz=class t{static xst(i,e,s,n){const r=[];for(let t=0;t<i.E5.length;t++){const s=i.E5[t].VN;r.push(new _z(s,e))}return new t(i,r,s,n)}Cst(){}get jst(){return[this.y5,this.b5].filter($t)}get p5(){return this.y5}get TE(){return Nj(this)}get md(){return this.KS}get ct(){return 0}get F$(){var t,i,e;const s=null==(e=null==(t=this.y5)?void 0:t.F$())||e;var n;const r=null==(n=null==(i=this.b5)?void 0:i.F$())||n;return s&&r}get _k(){return new Mo([0,1/0])}get A5(){return this.b5}async wy(){await Promise.all([this.y5,this.b5].filter($t).map((t=>t.wy())))}T5(t){}D5(t,i,e,s){}I3(){var t,i;null==(t=this.y5)||t.I3(),null==(i=this.b5)||i.I3()}w3(){var t,i;null==(t=this.y5)||t.w3(),null==(i=this.b5)||i.w3()}N$(t){return!0}D$(t){return this.KS=t,Promise.resolve()}k$(t){}async T$(t,i){const e=await this.KA.qA(t.VA,i),s=await e.kS();return await this.S$(s),s}async S$(t){if(t&&!this.vN.src)throw new lu(vt.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.vN.src)throw new lu(vt.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const i=this.SS;i&&(await i.DS(this.vN),this.SS=void 0),t&&(await t.bn(this.vN),this.SS=t)}constructor(t,i,e,s){this.SS=void 0,this.KS=t,this.b5=dl(i,(t=>Boolean(t.gX.match(/video/)))),this.y5=dl(i,(t=>Boolean(t.gX.match(/audio/)))),this.KA=e,this.vN=s,this.Cst()}};Qi();var mz=class extends tu{Ost(){this.tst.addEventListener("timeupdate",this.Rst),this.tst.addEventListener("ended",this.Pst),this.tst.addEventListener("timeupdate",this.zst),this.tst.addEventListener("ratechange",this.Bst),this.tst.addEventListener("volumechange",this.Ust),this.tst.addEventListener("durationchange",this.Qst),this.tst.addEventListener("playing",this.Fst),this.tst.addEventListener("seeking",this.Yst),this.tst.addEventListener("play",this.Vst),this.tst.addEventListener("pause",this.Gst),this.tst.addEventListener("encrypted",this.Stt)}Wst(){this.tst.removeEventListener("timeupdate",this.Rst),this.tst.removeEventListener("ended",this.Pst),this.tst.removeEventListener("timeupdate",this.zst),this.tst.removeEventListener("ratechange",this.Bst),this.tst.removeEventListener("volumechange",this.Ust),this.tst.removeEventListener("durationchange",this.Qst),this.tst.removeEventListener("playing",this.Fst),this.tst.removeEventListener("seeking",this.Yst),this.tst.removeEventListener("play",this.Vst),this.tst.removeEventListener("pause",this.Gst)}Zst(){this.Z8.yn(E.lL,this.Ds)}Hst(){this.Z8.fn(E.lL,this.Ds)}get gV(){return this.tst}get K5(){return!1}get LE(){return this.tst.currentTime+this.Xst.yst}get KE(){return this.tst.paused}get Nk(){return this.tst.volume}set Nk(t){this.tst.volume=t}get $E(){return this.tst.playbackRate}set $E(t){this.tst.playbackRate=t}get qst(){return this.tst.defaultPlaybackRate}get TE(){var t,i;return null!=(i=null==(t=this.vV)?void 0:t.TE)?i:Mo.PP()}get Kst(){return Mo.xn(this.tst.buffered)}get rk(){const t=this.Jst;return this.Fo.pP(t.Gb(this.Xst.yst))}get Jst(){return Mo.xn(this.tst.played)}get wk(){return this.kG}get V5(){return!1}get e6(){return!1}get ct(){return this.tst.duration}get WE(){return this.tst.muted}set WE(t){this.tst.muted=t}get Let(){return this.tst.style}get mz(){return Ei({},gC,{wz:!0})}Wb(t,i,e){this.w7.Ty(),this.w7=new Wt,this.m7=Vh(this.p7(t,this.m7,this.w7.ly),this.w7).catch(Bn)}async p7(t,i,e){var s;this.Fo=this.rk;const n=null==(s=this.vV)?void 0:s.jst;if(!n)return;const r=x.max(...n.map((t=>t.Est?t.Est:1/0)));this.kG=!0,this.yo(new Yr(t)),await i.catch(Bn),yi(e);try{for(this.$st||this.tnt(),this.tst.load(),this.int||(this.ent=!1,await Ao(this.tst.play(),e));this.fk<Fn.Iz;)await this.Z8.zy(E.lL,e);this.snt.sM(),this.$st=!1,this.kG=!1,this.yo(new aa(this.LE))}catch(t){throw this.snt.nM(t),t}finally{this.nnt(),this.Xst.Tst(r)}}Rk(){this.int=!0,this.tst.pause()}async Pk(){this.int&&(this.tst.src||this.jtt(),await this.snt.rM,await this.tst.play())}async wy(){this.Lst&&this.Lst.Ast().catch(Bn),this.w7.Ty(),this.Wst(),this.Hst(),this.Z8.wy(),this.Bo(),this.Ul.gn(),this.hst.gn(),this.ast.gn()}async tr(){this.Lst&&this.Lst.Ast().catch(Bn),this.w7.Ty(),this.tst.removeAttribute("src"),this.tst.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.tst.removeAttribute("x-airplay-deny"),this.tst.disableRemotePlayback=!1,this.tst.load(),this.Z8.tr(),this.Fo=Mo.PP()}jtt(){this.xtt||(Mz(this.tst,Fe.Ys),this.Ctt=!0)}get fk(){return this.Z8.fk}tnt(){const t=this.tst.getClientRects();let i;if(!(t.length>0))return;i=t[0];const e=i.width,s=this.tst.videoWidth/this.tst.videoHeight,n=i.height;let r,o;e/n>s?(r=n*s,o=n):(o=e/s,r=e),this.tst.style.width=r+"px",this.tst.style.height=o+"px",this.tst.style.marginLeft=(e-r)/2+"px",this.tst.style.marginTop=(n-o)/2+"px",this.tst.style.backgroundColor="black"}nnt(){this.tst.style.width="100%",this.tst.style.height="100%",this.tst.style.marginLeft="",this.tst.style.marginTop="",this.tst.style.backgroundColor=""}get yk(){return this.tst.videoHeight}get Tk(){return this.tst.videoWidth}get OE(){return this.tst.ended}get Ti(){return this.tst.offsetHeight*Fe.Ys.bp}get ji(){return this.tst.offsetWidth*Fe.Ys.bp}get FE(){return!1}get xtt(){return this.Ctt}get NE(){}get Uu(){return this.rnt}get lt(){}get wa(){return this.rst}get xV(){return this.Qo}get _k(){return this.vV?this.vV._k:Mo.PP()}get wV(){}get nt(){return this.Ul}get Ll(){return this.FG}get xk(){return!1}set xk(t){}kV(t,i,e,s,n){}Wk(t,i,e,s,n,r,o,h,a){const u=new oO(t,i,e,s,n,r,o,a,h);return this.Ul.tt(u),this.C7.tt(u),u}CV(t){throw b("Not supported.")}H$(t){}GE(){return qx(this.tst)}get t7(){return"block"===this.tst.style.display}ge(){this.tst.style.display="block",this.hst.ge()}be(){this.tst.style.display="none",this.hst.be()}ktt(){}async $n(t){if(t.YA===uh.QQ)throw new b("Not yet implemented");await this.Lst.wst();const i=dl(t.yV,(t=>t.NS.YA===Sv.QA)),e={kind:dz.lst,mediaBufferConfigs:t.E5.map((t=>t.VN)),fairPlaySdkUri:null==i?void 0:i.hY};return await this.Lst.pst(e),this.vV=wz.xst(t,this.Lst,this.KA,this.tst),this.E$.$n(this.vV,t),this.tst.setAttribute("x-webkit-airplay","deny"),this.tst.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.tst.disableRemotePlayback=!0,this.tst.preload="none",this.tst.src="https://theo.proxy/"+this.Lst.pN+"/master.m3u8",this.vV}Ltt(){}BQ(t){this.Ul.it(t),this.C7.it(t)}jV(){for(const t of this.Ul.AL.slice())t.gn();this.Ul.tr()}cV(t){}DV(){return!1}Ott(t){t.appendChild(this.tst),this.hst.Ott(t)}jk(){return this.tst}get zV(){return this.E$.zV}set zV(t){this.E$.zV=t}get Rtt(){}set Rtt(t){}get w8(){}Fk(){}constructor(t,i,e,s){super(),this.$st=!0,this.Lst=new fz,this.Xst=new gz,this.int=!0,this.snt=new xh,this.kG=!1,this.m7=Promise.resolve(),this.w7=new Wt,this.ent=!0,this.Fo=Mo.PP(),this.Ctt=!1,this.Rst=()=>{this.KE||this.Kst.V<=0||this.TE.V<=0||this.Xst.Mst(this.TE.jn(this.TE.V-1),this.Kst.jn(this.Kst.V-1))},this.Pst=()=>{this.yo(new fa(this.LE))},this.zst=()=>{this.yo(new A(this.LE,this.NE))},this.Bst=()=>{this.yo(new Pu(this.LE,this.$E))},this.Ust=()=>{this.yo(new $e(this.LE,this.Nk))},this.Qst=()=>{this.yo(new yt(this.ct))},this.Fst=()=>{this.yo(new te(this.LE))},this.Yst=()=>{this.Wb(this.LE)},this.Vst=async()=>{this.ent&&this.yo(new fi(this.LE)),this.int=!1,this.ent=!0},this.Gst=()=>{this.int=!0,this.yo(new Se(this.LE))},this.Stt=t=>{const i=t.initDataType;var e;const s=null!=(e=t.initData)?e:new ArrayBuffer(0);this.yo(new yw(i,s))},this.tst=t,this.Z8=new Uj(this),this.rnt=e,this.FG=s,this.tst.playsInline=!0,this.tst.style.width="100%",this.tst.style.height="100%",this.Ost(),this.Zst(),this.rst=cz(this.tst),this.Qo=new uz(this.tst),this.E$=new TR(this),this.KA=i,this.Ul=new Uu,this.C7=new oR(this),this.hst=new Xn,this.ast=new Qn(this.hst.we,this.Uu,this.nt,this.Ll,this.wa,this.xV)}},pz=[Ri.SI,Ri.NI];function Az(t){const i=h.createElement(t);return qn(i)&&i.addEventListener("contextmenu",Tz),bz(i),i}function yz(t){bz(t),t.removeEventListener("contextmenu",Tz)}function bz(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),zd(t),$d(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=Dn.Mz,t.controls=!1,t.style.display="none",qn(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function Mz(t,i){if(i.Up){const i=t.muted;t.muted=!0,t.muted=!1,t.muted=i}else if(t.paused){const i=t.play();pr(i)&&X(i),t.pause()}}function Tz(t){t.preventDefault()}r(),Qi(),r();var Sz=class{hI(t){return this.OQ.hI(t)}YI(t){this.OQ.YI(t)}gn(){this.OQ.gn()}constructor(t){this.OQ=t}},Nz=class extends Sz{hI(t){const i=new Gs(t),e=this.UG.NK.VY(i);return e?this.ont(i,e):this.OQ.hI(i)}async ont(t,i){i.DK(Fe.Og()/1e3);const e=await this.OQ.hI(t);let s;i.EK(Fe.Og()/1e3),s=e.XN?e.YN().pipeThrough(new La(new Iz(i))):e.FN().then((t=>{const e=Fe.Og()/1e3;return i.kK(e,new T(t)),i.LK(e),t}));const n={rI:s,hI:e.hI};return new qt(n,e)}constructor(t,i){super(t),this.UG=i}},Iz=class{start(t){this.JJ=t}transform(t){this.hnt.kK(Fe.Og()/1e3,t),this.JJ.enqueue(t)}flush(){this.hnt.LK(Fe.Og()/1e3)}constructor(t){this.hnt=t}};function Dz(t){return{get ratio(){return t.$o},get thresholds(){return t.ant.slice()}}}function Ez(t){const i=[],e=x.floor(1/t);if(j(e))return[];for(let s=0;s<=e;s++){const e=ur(s*t,0,1);i.push(e)}return i}r(),r(),r(),bs();var kz=class{get $o(){return this.unt}get ant(){return this.cnt}lnt(t){return i=>{const e=i[i.length-1];this.unt=e.intersectionRatio,t(e.intersectionRatio)}}get ga(){return this.Za||(this.Za=Dz(this)),this.Za}zk(){this.dnt.disconnect()}constructor(t,i,e){this.unt=1,this.Za=void 0,this.cnt=Ez(i);const n=this.lnt(e);this.dnt=new s.IntersectionObserver(n,{root:null,threshold:this.cnt}),this.dnt.observe(t)}},Lz=class{get $o(){return this.unt}get ant(){return this.cnt}get ga(){return this.Za||(this.Za=Dz(this)),this.Za}fnt(t){this.unt=t;const i=this.cnt;let e=0;if(t>0)for(;e<i.length&&i[e]<=t;)++e;this.gnt!==e&&(this.gnt=e,this._nt(t))}constructor(t,i){this.unt=1,this.gnt=-1,this.Za=void 0,this.cnt=Ez(t),this._nt=i}},xz=class extends Lz{vnt(){const t=this.lo.getBoundingClientRect();return ur(x.max(0,x.min(s.innerWidth,t.right)-x.max(0,t.left))*x.max(0,x.min(s.innerHeight,t.bottom)-x.max(0,t.top))/(t.width*t.height),0,1)}zk(){s.removeEventListener("scroll",this.wnt)}constructor(t,i,e){super(i,e),this.wnt=no((()=>this.fnt(this.vnt())),50),this.lo=t,s.addEventListener("scroll",this.wnt,!!tx&&{passive:!0}),Fs((()=>this.fnt(this.vnt())))}},Cz=.1,jz=class{get mnt(){return this.pnt}get Do(){return this.Ant}set Do(t){if(j(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.Ant=t}get ga(){return this.Za||(this.Za=function(t){return{get ratio(){return t.mnt},get visible(){return t.mnt>t.Do},get visibleThreshold(){return t.Do},set visibleThreshold(i){i=bM(i),t.Do=i},addObserver:(i,e)=>(i=bM(i),t.Ao(i,e).ga),removeObserver(i){let e=t.ynt(i);e&&t.No(e)}}}(this)),this.Za}bnt(t){return i=>{this.pnt=i,null==t||t(this.pnt)}}Ao(t,i){if(j(t))throw new k("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let e;return e="function"==typeof s.IntersectionObserver?new kz(this.lo,t,this.bnt(i)):new xz(this.lo,t,this.bnt(i)),this.Mnt.push(e),e}No(t){t.zk(),ra(this.Mnt,t)}ynt(t){for(const i of this.Mnt)if(i.ga===t)return i}gn(){for(const t of this.Mnt)t.zk();nt(this.Mnt)}constructor(t){this.pnt=1,this.Ant=0,this.Mnt=[],this.Za=void 0,this.lo=t,this.Ao(.1,this.bnt())}};r();var Oz=class extends Jr{constructor(){super(Zi.Wy)}},Rz=class extends gs{get Tnt(){return this.UG}get Xz(){return this.Snt}set Xz(t){this.Snt=t,this.xa.Xz=t}get Nnt(){return this.Int}get ht(){return this.xa.ht}get qZ(){return this.Dnt}get Uu(){return this.Ent}get UE(){return this.xa.UE}get VE(){return this.knt}get wZ(){return this.Lnt}get nt(){return this.xa.nt}get Ll(){return this.FG}get rt(){return this.xa.rt}get TE(){return this.SE()}SE(){return this.xa.TE}get xnt(){return this.nJ}get wJ(){return this.mJ}get LE(){return this.xE()}set LE(t){this.CE(t)}xE(){return this.xa.LE}CE(t,i){this.xa.CE(t,i)}Cnt(){return this.xE()}get NE(){return this.xa.NE}set NE(t){this.xa.NE=t}get bt(){return this.xa.bt}get ct(){return this._d()}_d(){return this.xa.ct}get we(){return this.xa.we}get OE(){return this.xa.OE}get lt(){return this.PE()}PE(){return this.xa.lt}get zE(){return this.BE()}BE(){return this.xa.zE}get wa(){return this.xa.Ck()}get xV(){return this.xa._a()}get xk(){return this.xa.xk}set xk(t){this.xa.xk=t}get WE(){return this.xa.WE}set WE(t){const i=Boolean(t);this.HE(i)}HE(t){this.xa.WE=t,t||this.KE||this.Ok()}get KE(){return this.xa.KE}get $E(){return this.ek()}set $E(t){this.nk(t)}ek(){return this.xa.$E}nk(t){this.xa.$E=t}get rk(){return this.hk()}hk(){return this.xa.rk}get ck(){return this.xa.ck}set ck(t){this.xa.ck=t}get fk(){return this.xa.fk}get _k(){return this.vk()}vk(){return this.xa._k}get wk(){return this.xa.wk}get zL(){return this.iB}get yk(){return this.xa.yk}get Tk(){return this.xa.Tk}get Nk(){return this.xa.Nk}set Nk(t){const i=ur(Number(t),0,1)||0;this.Dk(i)}get Ek(){return this.QG}Dk(t){this.xa.Nk=t}Sa(){St(this,wk,this)}Pk(){this.xa.Pk()}Rk(){this.xa.Rk()}Ya(){return this.MG}async ka(t,i){if(this.MG=t,t){this.jnt.OH(t).catch(this.Ont);const e=function(t){t.sources;const i=t.sources.filter((t=>He(t.integration)));0;return t.sources=i,t}(t);await this.xa.ka(e,i)}}Ok(){if(this.do)return;this.xa.Ok(),this.Int.Ok();const t=this.we.getElementsByTagName("video");for(let i=0;i<t.length;i++){const e=t[i];"Advertisement"===e.title&&Mz(e,Fe.Ys)}this.do=!0}cs(){return this.Rnt.Uo()===Ba.FULLSCREEN}ge(){this.xa.ge()}be(){this.xa.be()}jk(){return this.xa.jk()}Fk(){this.xa.Fk()}Yk(){this.xa.Yk()}Wk(t){return this.xa.Wk(t)}async zk(){this.MG=void 0,await this.xa.zk(),await this.xa.tr()}async gn(){this.yo(new Oz),this.Bo(),this.Dnt.gn(),this.wE.gn(),this.Lnt.gn(),this.Ow.gn(),this.Pnt.gn(),this.Rnt.gn(),this.Ent.gn(),this.znt.gn(),this.Int.gn(),this.BG.gn(),await this.xa.gn()}constructor(t,i,e){super(),this.Snt=!1,this.do=!1,this.MG=void 0,this.Bnt=!1,this.Ca=void 0,this.Ont=t=>{if(this.Bnt)return;this.Bnt=!0;const i=this.Unt,e=Au(t);this.xa.TL=new nk(this.we,e,t),X(i.gn())},this.Qnt=t=>{t.type!==Zi.vb&&t.type!==Zi._b&&this.yo(t)};const s=bM(i.uid);j(s)?this.iB=RS++:this.iB=s,this.md=i;const n=Fe.wE,r=new oC;this.znt=new QL("8.14.0",n,r),this.UG=new Qx,this.QG=new Qu;const o=new Nz(n,this.UG);this.wE=new Ex(o,i.allowMixedContent),this.GJ=null!=e?e:new pL(i.isEmbeddable,"8.14.0",fL()),this.jnt=new rC(n,this.GJ,this.znt,r,i,fL()),this.jnt.UJ().catch(this.Ont),this.Ent=new ox(t),this.Ent.yn(ZL.pn,this.Ds),this.FG=new lC,this.nJ=new Gx,this.mJ=new Zx;const h=new sk(t,i,this.wE,this.UG,this.QG,this.Ent,this.FG);this.UG.FK(h);let a=h;a=new Wx(a,this.xnt),a=new Hx(a,this.wJ),this.Unt=a,this.xa=new kS(this.Unt),this.xa.xy(this.Qnt),this.knt=new Xx(this.xa),this.Lnt=new xx(this.xa,this.wE,this.UG),this.Ow=new WL(this),this.Pnt=new fx(this.xa,i.allowNativeFullscreen),this.Rnt=new px(this.Pnt,this.xa._a()),this.Ent.bn(),this.To=new jz(t),this.BG=new Qf(this.Ent,this.FG,1,[Ri.NI]),this.Int=new Ff(this.BG),this.Dnt=new $x}};r(),r();var Xt=class extends gs{get Tnt(){return this.Fnt()}Fnt(){return this.ta.Tnt}get Vc(){return this.Ynt()}Ynt(){return this.ta.Vc}get znt(){return this.ta.znt}get Nnt(){return this.Vnt()}Vnt(){return this.ta.Nnt}get Xz(){return this.ta.Xz}set Xz(t){this.ta.Xz=t}get Ow(){return this.ta.Ow}get qZ(){return this.ta.qZ}get xnt(){return this.ta.xnt}get md(){return this.ta.md}get Uu(){return this.ta.Uu}get wa(){return this.Ck()}Ck(){return this.ta.wa}get xV(){return this._a()}_a(){return this.ta.xV}get wE(){return this.ta.wE}get Ek(){return this.ta.Ek}get jnt(){return this.ta.jnt}get wJ(){return this.ta.wJ}get wZ(){return this.ta.wZ}get Rnt(){return this.ta.Rnt}get Ent(){return this.ta.Ent}get xa(){return this.ta.xa}get Ll(){return this.ta.Ll}get Gnt(){return this.Wnt()}Wnt(){return this.ta.Gnt}get Znt(){return this.Hnt()}Hnt(){return this.ta.Znt}get zL(){return this.ta.zL}get To(){return this.ta.To}get ht(){return this.AE()}AE(){return this.ta.ht}SE(){return this.ta.SE()}get NE(){return this.DE()}set NE(t){this.EE(t)}DE(){return this.ta.NE}EE(t){this.ta.NE=t}get bt(){return this.kE()}kE(){return this.ta.bt}xE(){return this.ta.xE()}CE(t,i){this.ta.CE(t,i)}Cnt(){return this.ta.Cnt()}_d(){return this.ta._d()}get we(){return this.jE()}jE(){return this.ta.we}get OE(){return this.RE()}RE(){return this.ta.OE}PE(){return this.ta.PE()}BE(){return this.ta.BE()}get UE(){return this.QE()}QE(){return this.ta.UE}get xk(){return this.ta.xk}set xk(t){this.ta.xk=t}get VE(){return this.GE()}GE(){return this.ta.VE}get WE(){return this.ZE()}set WE(t){this.HE(t)}ZE(){return this.ta.WE}HE(t){this.ta.HE(t)}get KE(){return this.JE()}JE(){return this.ta.KE}get $E(){return this.ek()}set $E(t){this.nk(t)}ek(){return this.ta.$E}nk(t){this.ta.$E=t}hk(){return this.ta.hk()}get ck(){return this.lk()}set ck(t){this.dk(t)}lk(){return this.ta.ck}dk(t){this.ta.ck=t}get fk(){return this.gk()}gk(){return this.ta.fk}get Ca(){return this.ta.Ca}set Ca(t){this.ta.Ca=t}vk(){return this.ta.vk()}get wk(){return this.pk()}pk(){return this.ta.wk}get nt(){return this.Ak()}Ak(){return this.ta.nt}get yk(){return this.bk()}bk(){return this.ta.yk}get rt(){return this.Mk()}Mk(){return this.ta.rt}get Tk(){return this.Sk()}Sk(){return this.ta.Tk}get Nk(){return this.Ik()}set Nk(t){this.Dk(t)}Ik(){return this.ta.Nk}Dk(t){this.ta.Dk(t)}Ok(){this.ta.Ok()}Rk(){this.ta.Rk()}Pk(){this.ta.Pk()}ge(){this.ta.ge()}be(){this.ta.be()}cs(){return this.ta.cs()}jk(){return this.ta.jk()}Fk(){this.ta.Fk()}Yk(){this.ta.Yk()}Wk(t){return this.ta.Wk(t)}Sa(){this.ta.Sa()}Ya(){return this.ta.Ya()}ka(t,i){return this.ta.ka(t,i)}zk(){return this.ta.zk()}Gk(t){return!1}yG(){this.Xnt&&this.ta.xy(this.Zk)}bG(){this.Xnt&&this.ta.Py(this.Zk)}async gn(t){this.Bo(),t||await this.ta.gn(),this.bG()}constructor(t,i){super(),this.Zk=t=>{this.Gk(t)||this.yo(t)},this.ta=t,this.Xnt=!i,this.yG()}},Hn=function(t){return t[t.nu=0]="nu",t[t.qnt=1]="qnt",t[t.hx=2]="hx",t[t.Knt=3]="Knt",t[t.Jnt=4]="Jnt",t[t.$nt=5]="$nt",t}({}),Pz=[0,1,2,3,4,5],zz={};function Ha(t,i){(zz[i]||(zz[i]=[])).push(t)}var Bz={};function jr(t,i){(Bz[i]||(Bz[i]=[])).push(t)}var Uz=[];function Qz(t){for(const i of Uz)i(t)}r();var Fz=self.CustomEvent;var Yz=function(){try{const t=new Fz("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,i){return new CustomEvent(t,i)}:function(t,i){const e=h.createEvent("CustomEvent");return e.initCustomEvent(t,(null==i?void 0:i.bubbles)||!1,(null==i?void 0:i.cancelable)||!1,null==i?void 0:i.detail),e};r();var Vz=new class{get V(){return this.Gz.length}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){const i=[];for(let e=0;e<t.V;e++)i[e]=t.bL(e).ga;return i.getPlayerByUID=i=>{const e=t.trt(i);return e&&e.ga},i}(this)}bL(t){return this.Gz[t]}l0(t){this.Gz.push(t),this.ga.push(t.ga)}wS(t){const i=this.Gz.indexOf(t);i<0||(Mn(this.Gz,i),this.Za&&Mn(this.Za,i))}trt(t){for(const i of this.Gz)if(i.zL===t)return i}constructor(){this.Gz=[],this.Za=void 0}};function Gz(t){let i,e;const s=i=>{e=i;const s=tl(i,t.md);t.ka(s)};let n={get abr(){return t.Tnt.ga},get ads(){var i;return null==(i=t.Vc)?void 0:i.ga},get audioTracks(){return t.ht.ga},get autoplay(){return t.Xz},set autoplay(i){t.Xz=Boolean(i)},get buffered(){return t.SE()},get canvas(){return t.Ow.ga},get cast(){var i;return null==(i=t.qZ)?void 0:i.ga},get clip(){return t.xnt.ga},get currentProgramDateTime(){var i;return null!=(i=t.NE)?i:null},set currentProgramDateTime(i){t.NE=null!=i?i:void 0},get currentTime(){return t.xE()},set currentTime(i){t.CE(Number(i))},get duration(){return t._d()},get element(){return t.we},get ended(){return t.OE},get error(){return t.PE()},get errorObject(){return t.BE()},get loop(){return t.wJ.wJ},set loop(i){t.wJ.wJ=Boolean(i)},get metrics(){return t.VE.ga},get muted(){return t.WE},set muted(i){t.HE(i)},get network(){return t.wZ.ga},get paused(){return t.KE},get playbackRate(){return t.$E},set playbackRate(i){const e=Number(i);if(e<0)throw new RangeError("playbackRate must be a positive number");t.$E=e},get played(){return t.hk()},get poster(){return t.mi},set poster(i){t.mi=Q(i)},get preload(){return t.ck},set preload(i){t.ck=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(i)},get presentation(){return t.Rnt.ga},get readyState(){return t.fk},get seekable(){return t.vk()},get seeking(){return t.wk},get source(){return e},set source(t){s(t)},get src(){return Gk(t.Ya())},set src(t){s({sources:t})},get textTracks(){return t.nt.ga},get textTrackStyle(){return t.Ll.ga},get theoLive(){return t.Gnt},get uid(){return t.zL},get videoHeight(){return t.yk},get videoTracks(){return t.rt.ga},get videoWidth(){return t.Tk},get visibility(){return t.To.ga},get volume(){return t.Nk},set volume(i){t.Dk(Number(i))},get latency(){return t.Ek.ga},get theoads(){return t.Znt},destroy(){t.gn(),t=null,e=void 0},play(){t.irt()},pause(){t.Rk()},stop(){e=void 0,t.zk()},prepareWithUserAction(){t.Ok()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)},setSource(t){s(t)},addTextTrack:i=>t.Wk(function(t){return{Lt:Q(t.kind),kh:Q(t.label),gs:Q(t.language),YA:Q(t.type)}}(i)).ga};return i=new Yt(n,!0),i.iu(t),i.yn("destroy",(()=>{i.gn()})),n}r(),r(),r(),r();var Wz=class extends Jr{constructor(t){super(Zi.ro),this.source=t}};r();var Zz=class extends gs{get NE(){}set NE(t){}get LE(){return this.xE()}set LE(t){this.CE(t)}xE(){return this.EG}Cnt(){return this.xE()}CE(t,i){this.kG&&this.EG===t||(this.EG=t,this.kG=!0,this.yo(new Yr(this.EG)))}get KE(){return this.CG}get $E(){return this.jG}set $E(t){this.jG!==t&&(this.jG=t,this.yo(new Pu(this.EG,this.$E)))}get fk(){return Fn.Nz}get wk(){return this.kG}Pk(){this.CG&&(this.CG=!1,this.yo(new fi(this.EG)),this.yo(new sD(this.EG)))}Rk(){this.CG||(this.CG=!0,this.yo(new A(this.EG,this.NE)),this.yo(new Se(this.EG)))}tr(){this.EG=0,this.kG=!1,this.jG=1,this.Rk()}gn(){this.Bo()}be(){}ge(){}constructor(){super(),this.EG=0,this.CG=!0,this.kG=!1,this.jG=1}};r();var Hz={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},Xz={visibility:"hidden"},qz={visibility:"visible"},Kz=class{get zu(){return void 0!==this.ert?this.ert:void 0!==this.nrt?this.nrt:void 0}set rrt(t){this.nrt=t,this.Yn()}Yn(){const t=this.ta.KE,i=this.ort;this.zu?this.Vs.style.backgroundImage='url("'+Bv(this.zu)+'")':this.Vs.style.backgroundImage="",t&&this.zu&&!i?this.ge():this.be()}ge(){Zd(Xz,this.ta.we),Zd(qz,this.Vs)}be(){Zd(Xz,this.Vs),Zd(qz,this.ta.we)}yG(){this.ta.yn(Zi.ro,this.hrt),this.ta.yn(Zi.so,this.sF)}gn(){this.ta.fn(Zi.ro,this.hrt),this.ta.fn(Zi.so,this.sF),dn(this.Vs)}constructor(t){this.ort=!1,this.hrt=t=>{var i;this.ort=!this.ta.KE,this.ert=null==(i=t.source)?void 0:i.poster,this.Yn()},this.sF=()=>{this.ort=!0,this.be()},this.ta=t,this.yG(),this.Vs=function(){let t=gi&&gi.document&&gi.document.createElement("div");return t.className="theoplayer-poster",Zd(Hz,t),t}(),t.we.appendChild(this.Vs)}};r(),r(),r(),r();var Jz=function(t){return t[t.art=0]="art",t[t.urt=1]="urt",t}({});function $z(t){let i;const e={get playing(){return t.$c},get currentAds(){return t.crt.map((t=>t.lrt()))},get currentAdBreak(){var i,e;return null!=(e=null==(i=t.drt)?void 0:i.lrt())?e:null},get scheduledAds(){return t.frt.map((t=>t.lrt()))},get scheduledAdBreaks(){return t.grt.map((t=>t.lrt()))},skip(){t.ZC()},schedule(i){let e=$k(i,mk.Ld);e?t.I9(e,Jz.art,!1):console.error("Invalid ad description")},registerServerSideIntegration(i,e){t._rt(i,e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)},get theoads(){var i;return null==(i=t.Znt)?void 0:i.ga}};return i=new es(t,e),e}var tB=class extends gs{get $c(){return!!this.Dc&&this.Dc.$c}get crt(){return this.Dc?this.Dc.crt:[]}get drt(){return this.Dc?this.Dc.drt:null}get frt(){return this.Dc?this.Dc.frt:[]}get grt(){return this.Dc?this.Dc.grt:[]}get Znt(){var t;return null==(t=this.Dc)?void 0:t.Znt}I9(t,i,e){var s;null==(s=this.Dc)||s.I9(t,i,e)}vrt(t){var i;null==(i=this.Dc)||i.vrt(t)}ZC(){var t;null==(t=this.Dc)||t.ZC()}wrt(t){var i;null==(i=this.Dc)||i.wrt(t)}_rt(t,i){var e;null==(e=this.Dc)||e._rt(t,i)}get ga(){var t;return null!=(t=this.Za)?t:this.Za=$z(this)}async gn(t){this.Bo(),void 0!==this.Dc&&(this.Dc.Py(this.Ds),t||await this.Dc.gn(),this.Dc=void 0)}constructor(t){var i;super(),this.Za=void 0,this.Dc=t,null==(i=this.Dc)||i.xy(this.Ds)}};r(),r();var iB=class extends Dc{constructor(t,i){super(t),this.Yl=i}},eB=class extends Jr{get ad(){return this.adBreak}constructor(t,i){super(t),this.adBreak=i}},Cr=class extends iB{ma(){return new sB(this.Yl.lrt())}constructor(t){super("mrt",t)}},sB=class extends eB{constructor(t){super("removeadbreak",t)}};r();var Mr=class extends iB{ma(){return new nB(this.Yl.lrt())}constructor(t){super("prt",t)}},nB=class extends eB{constructor(t){super("addadbreak",t)}};r(),r();var rB=class extends Dc{constructor(t,i){super(t),this.Art=i}},oB=class extends Jr{constructor(t,i){super(t),this.ad=i}},Ar=class extends rB{ma(){return new hB(this.Art.lrt())}constructor(t){super("yrt",t)}},hB=class extends oB{constructor(t){super("addad",t)}};r();var Zu=class extends iB{ma(){return new aB(this.Yl.lrt())}constructor(t){super("brt",t)}},aB=class extends eB{constructor(t){super("adbreakend",t)}};r();var uB=class extends iB{ma(){return new cB(this.Yl.lrt())}constructor(t){super("Mrt",t)}},cB=class extends eB{constructor(t){super("adbreakbegin",t)}};r();var bu=class extends rB{ma(){return new lB(this.Art.lrt(),this.currentTime)}constructor(t,i){super("Trt",t),this.currentTime=i}},lB=class extends oB{constructor(t,i){super("adbegin",t),this.currentTime=i}};r();var dB=class extends rB{ma(){return new fB(this.Art.lrt(),this.currentTime)}constructor(t,i){super("Srt",t),this.currentTime=i}},fB=class extends oB{constructor(t,i){super("adend",t),this.currentTime=i}};r();var gB=class extends Dc{ma(){return new _B}constructor(){super("Nrt")}},_B=class extends Jr{constructor(){super("adadded")}},vB=class extends tB{get TL(){return this.Dc}set TL(t){const i=this.Dc;if(i===t)return;const e=this.crt,s=this.drt,n=this.frt,r=this.grt;null==i||i.Py(this.Ds),this.Dc=t,null==t||t.xy(this.Ds);const o=this.crt,h=this.drt,a=this.frt,u=this.grt,c=[];let l=!1;for(const t of r)Qa(u,t)||c.push(new Cr(t));for(const t of u)Qa(r,t)||c.push(new Mr(t));for(const t of a)Qa(n,t)||(c.push(new Ar(t)),l=!0);l&&c.push(new gB),s!==h&&(s&&c.push(new Zu(s)),h&&c.push(new uB(h)));for(const t of e)Qa(o,t)||c.push(new dB(t,this.ta.xE()));for(const t of o)Qa(e,t)||c.push(new bu(t,this.ta.xE()));for(const t of c)this.yo(t)}constructor(t){super(void 0),this.ta=t}};r(),r();var wB=class extends gs{get ga(){var t;return null!=(t=this.Za)?t:this.Za=$z(this)}wrt(t){}_rt(t,i){}I9(t,i,e){}ZC(){}vrt(t){}gn(){return this.Bo(),Promise.resolve()}constructor(...t){super(...t),this.$c=!1,this.drt=null,this.crt=[],this.grt=[],this.frt=[],this.Znt=void 0,this.Za=void 0}},mB=class extends wB{I9(t,i,e){this.Irt.push({Drt:t,Ert:i,krt:e})}ZC(){}wrt(t){}_rt(t,i){this.Lrt.push({Ax:t,xrt:i})}vrt(t){const i=this.Lrt.slice(),e=this.Irt.slice();this.tr();for(const e of i)t._rt(e.Ax,e.xrt);for(const i of e)t.I9(i.Drt,i.Ert,i.krt)}Crt(){const t=this.Irt.map((t=>t.Drt));return this.tr(),t}tr(){nt(this.Lrt),nt(this.Irt)}async gn(){this.tr(),await super.gn()}constructor(...t){super(...t),this.Lrt=[],this.Irt=[]}};r();var pB,AB=class extends Jr{constructor(t){super("tizen2retry"),this.originalErrorEvent=t}};function yB(){if(!pB){let t=Rz;t=function(t){return class extends Xt{constructor(i,e){let s=new t(i,e);for(const t of Pz)if(Bz[t])for(const i of Bz[t])s=i(s);super(s)}}}(t);let i=function(t){return class extends gs{get znt(){return this.jrt.znt}get Vc(){return this.Dc}get Ow(){return this.jrt.Ow}get md(){return this.jrt.md}get wE(){return this.jrt.wE}get wa(){return this.jrt.wa}get xV(){return this.jrt.xV}get Rnt(){return this.jrt.Rnt}get Ent(){return this.jrt.Ent}get xa(){return this.jrt.xa}get Tnt(){return this.jrt.Tnt}get Xz(){return this.jrt.Xz}set Xz(t){this.jrt.Xz=t,this.Ort()}get Nnt(){return this.jrt.Nnt}get ht(){return this.jrt.ht}get qZ(){return this.jrt.qZ}get Uu(){return this.jrt.Ent}get ga(){return this.Za||(this.Za=this.ma()),this.Za}get UE(){return this.jrt.UE}get xk(){return this.jrt.xk}set xk(t){this.jrt.xk=t}get VE(){return this.jrt.VE}get wZ(){return this.jrt.wZ}get nt(){return this.jrt.nt}get Ll(){return this.jrt.Ll}get rt(){return this.jrt.rt}get xnt(){return this.jrt.xnt}get wJ(){return this.jrt.wJ}get NE(){return this.ta.NE}set NE(t){this.ta.NE=t}get bt(){return this.jrt.bt}get we(){return this.jrt.we}get OE(){return this.jrt.OE}get WE(){return this.jrt.WE}set WE(t){this.HE(t)}get KE(){return this.ta.KE}get mi(){return this.Rrt.zu||""}set mi(t){this.Rrt.rrt=t}get $E(){return this.ek()}set $E(t){this.nk(t)}ek(){return this.jrt.$E}nk(t){this.ta.$E=t}get ck(){return this.jrt.ck}set ck(t){this.jrt.ck=t}get fk(){return this.ta.fk}get Ca(){return this.jrt.Ca}set Ca(t){this.jrt.Ca=t}get wk(){return this.ta.wk}get Gnt(){return this.jrt.Gnt}get Znt(){return this.jrt.Znt}get zL(){return this.jrt.zL}get yk(){return this.jrt.yk}get Tk(){return this.jrt.Tk}get Nk(){return this.jrt.Nk}set Nk(t){this.Dk(t)}get Ek(){return this.jrt.Ek}get jnt(){return this.jrt.jnt}get To(){return this.jrt.To}async Wo(t,i){return this.Go.Wo(t,i).catch(Ct)}async Prt(t,i){yi(i),this.jrt.xy(this.zrt);try{await this.jrt.ka(t,i)}finally{this.jrt.Py(this.zrt)}}async Ort(){const t=await this.Brt();this.Urt(t)}async Brt(){const t=this.Ya();return t&&!Qk(t)&&this.Xz&&this.KE?this.Nnt.Qrt(this.WE):"none"}Urt(t){var i;const e=(null==(i=this.Ya())?void 0:i.mutedAutoplay)||this.md.mutedAutoplay;switch(t){case"all":this.irt();break;case"muted":(this.WE||e===mS.ALL)&&(this.WE=!0,this.Pk())}}ka(t){Qk(this.MG)||this.yo(new Xe(0,Fn.Nz)),this.tr(),this.MG=t,X(this.Wo((async i=>{yi(i);try{await this.Prt(t,i)}catch(t){return V(t),this.MG=void 0,void this.eG(gy(t,vt.SOURCE_NOT_SUPPORTED))}finally{this.Frt(this.jrt)}const e=await this.Brt();this.yo(new Wz(this.Ya())),this.Urt(e)})))}CE(t,i){this.ta.CE(t,i)}PE(){var t;return null!=(t=this.ZG)?t:this.jrt.PE()}BE(){var t;return null!=(t=this.dV)?t:this.jrt.BE()}eG(t){void 0===this.BE()&&(this.dV=t,this.ZG=Au(t),this.yo(new cl(t)))}Pk(){this.ta.Pk()}irt(){this.WE||this.Ok(),this.Pk()}Ok(){this.jrt.Ok()}Rk(){this.ta.Rk()}zk(){this.ka(void 0)}ge(){this.IG=!0,this.ta.ge()}be(){this.IG=!1,this.ta.be()}Sa(){this.jrt.Sa()}Dk(t){this.jrt.Dk(t)}HE(t){this.jrt.HE(t)}ja(t){this.Yrt=t,t.l0(this)}cs(){return this.jrt.cs()}Ya(){return this.MG}jk(){return this.jrt.jk()}xE(){return this.ta.xE()}Cnt(){return this.ta.Cnt()}_d(){return this.jrt._d()}SE(){return this.jrt.SE()}hk(){return this.jrt.hk()}vk(){return this.jrt.vk()}Fk(){this.jrt.Fk()}Yk(){this.jrt.Yk()}Wk(t){return this.jrt.Wk(t)}tr(){this.MG=void 0,this.dV=void 0,this.ZG=void 0,this.Vrt=!0,nt(this.Grt),this.Wrt.tr(),this.Frt(this.Wrt),this.Go.Ty(),X(this.Go.Wo((async t=>{yi(t),await this.jrt.zk()})))}gn(){this.yo(new Oz),this.Rrt.gn(),this.bG(),this.tr(),X(this.Wo((async()=>{await this.jrt.gn(),this.Yrt&&(this.Yrt.wS(this),this.Yrt=void 0),this.Go.gn()}))),this.Bo()}Frt(t){if(this.ta===t)return;const i=this.ta.KE,e=this.ta.xE(),s=this.ta.$E,n=this.ta.fk,r=this.ta.wk;this.Zrt=i,this.Ptt=n,this.bG(),t.xy(this.Hrt),t===this.jrt?(void 0!==this.Dc&&(this.Dc.TL=t.Vc,this.Xrt.vrt(this.Dc)),(r||t.xE()!==e)&&t.CE(e),t.$E!==s&&(t.$E=s),i?t.Rk():t.Pk()):(void 0!==this.Dc&&(this.Dc.TL=this.Xrt,this.Xrt.tr()),this.md.retainPlaybackRateOnSourceChange?t.$E=s:1!==s&&this.yo(new Pu(this.xE(),1))),t.Py(this.Hrt),this.ta=t,this.yG();for(const t of this.Grt)this.yo(t);nt(this.Grt),this.IG?t.ge():t.be()}yG(){this.ta.xy(this.Vk)}bG(){this.ta.Py(this.Vk)}ma(){return Gz(this)}constructor(i,e){super(),this.Zrt=!0,this.Ptt=Fn.Nz,this.Vrt=!1,this.MG=void 0,this.dV=void 0,this.ZG=void 0,this.zrt=t=>{t.type!==Zi.pb&&this.Grt.push(t)},this.Hrt=t=>{(t.type!==Zi.so||this.ta.KE)&&(t.type===Zi.wb&&this.ta.KE||t.type===Zi.Mb&&this.ta.wk&&this.ta.xE()===t.currentTime||t.type===Zi.pb&&this.ta.$E===t.playbackRate||this.yo(t))},this.Vk=t=>{if(this.Vrt){if(t.type===E.rP)return;t.type!==E.iP&&t.type!==E.oP||(this.Vrt=!1)}if(t.type===Zi.so){if(!this.Zrt)return;this.Zrt=!1}else if(t.type===Zi.wb){if(this.Zrt)return;this.Zrt=!0}else if(t.type===E.lL){if(this.Ptt===t.readyState)return;this.Ptt=t.readyState}else if(t.type===Zi.Wy)return;this.yo(t)},this.jrt=new t(i,e),this.Wrt=new Zz,this.ta=this.jrt,this.Rrt=new Kz(this),this.jrt.Vc&&(this.Dc=new vB(this),this.Dc.TL=this.jrt.Vc,this.Xrt=new mB),this.Go=new Wa,this.Grt=[],this.IG=!0,this.yG()}}}(t);Ro.Nf&&Ro.Df<3&&(i=function(t){return class extends t{ka(t){this.qrt=0,super.ka(t)}yo(t){if(t.type===Xi.ua&&this.qrt<3)return this.qrt++,super.yo(new AB(t)),void super.ka(this.Ya());super.yo(t)}constructor(...t){super(...t),this.qrt=0}}}(i)),i=function(t){let i=t;for(const t of Pz)if(zz[t])for(const e of zz[t])i=e(i);return i}(i),pB=i}return pB}function bB(t,i){const e=AS(i),s=new(yB())(t,e);s.Ca=s;let n=s.ga;return s.Sa(),s.ja(Vz),_.defineProperty(n,"constructor",{value:bB}),n=wM(n),Qz(s),n}Uc(),Fs((()=>{self.dispatchEvent&&self.dispatchEvent(Yz("theoplayerready"))})),r();var MB={base64:new class{encode(t){return Tc(t)}decode(t){return Zn(t)}}};r();var TB=JSON.parse('["hbbtv","dash","hesp","millicast","hls","chromecast","ads","theoads","airplay","spotx","vr","vr-webxr","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","uplynk","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');r(),r(),r();var SB=class{get LE(){const t=this.ta.currentTime;return isFinite(t)?t:"now"}get Krt(){return this.ta.src||""}tr(){}constructor(t,i){this.Jrt=!1,this.$rt=t=>{this.tot.bX(t.error,this.LE)},this.iot=()=>{this.tot.mX(this.Krt),this.ta.removeEventListener("playing",this.iot),this.Jrt=!1},this.js=()=>{var t,i,e,s;this.Jrt||(this.ta.addEventListener("playing",this.iot),this.Jrt=!0),null==(t=this.ta.ads)||t.removeEventListener("adbegin",this.eot),null==(i=this.ta.theoads)||i.removeEventListener("interstitialbegin",this.rot);var n,r;(null==(s=this.ta.source)||null==(e=s.ads)?void 0:e.some((t=>"theoads"===t.integration)))&&(null==(n=this.ta.ads)||n.addEventListener("adbegin",this.eot),null==(r=this.ta.theoads)||r.addEventListener("interstitialbegin",this.rot))},this.eot=t=>{"theoads"!==t.ad.integration||t.ad.isSlate||this.tot.yX("ad")},this.rot=t=>{const i=t.interstitial;(function(t){return"adbreak"===t.type})(i)||this.tot.yX(function(t){switch(t){case"adbreak":default:return"ad";case"overlay":return"overlay"}}(i.type))},this.tot=i,this.ta=t,this.ta.addEventListener("error",this.$rt),this.ta.addEventListener("sourcechange",this.js),this.js()}};!function(t){Uz.push(t)}((function(t){new SB(t.ga,t.znt)})),r();var NB="theoplayer-stored-volume",IB="theoplayer-stored-mutedstate";Ha((function(t){return class extends t{HE(t){this.md.persistVolume&&Th.tM(IB,""+Boolean(t)),super.HE(t)}Dk(t){this.md.persistVolume&&Th.tM(NB,""+Number(t)),super.Dk(t)}constructor(t,i){if(super(t,i),i.persistVolume){let t=Th.zJ(NB);(void 0===t||j(t))&&(t=1);const i=Th.BJ(IB)||!1;this.Nk=t,this.WE=i}}}}),Hn.nu);var DB="8.14.0",EB="2025.1.6",kB=Vz.ga,LB=rt.Ex.registerContentProtectionIntegration.bind(rt.Ex);r(),r(),r(),r(),Uc();var xB={zX(t){gi.addEventListener("beforeunload",t)},jX(t){gi.removeEventListener("beforeunload",t)}},CB={oot:class{get YG(){const t=[];for(const i of this.hot){const e=this.aot.get(i);if(e){const i=e.map((t=>t.uot));t.push(...i)}}return this.cot&&t.push(this.cot),t}GG(t){for(const i of this.YG)i.Ott(t)}sG(t){const i=dl(this.aot.get(t),(t=>t.lot));if(i)return i.lot=!1,i.uot}fot(t){if(!this.cot){var i;const t=null==(i=this.aot.get(Ri.NI))?void 0:i[0].uot.gV;if(!t)throw new b("Error creating iOS Safari MediaController");this.cot=new mz(t,this.KA,this.Xu,this.FG),t.parentElement&&this.cot.Ott(t.parentElement)}return this.cot}async BV(t){const i=t.gV,e=i.tagName.toLowerCase();await t.tr(),bz(i);const s=dl(this.aot.get(e)||[],(i=>t===i.uot));s&&(s.lot=!0)}zG(){for(const t of this.YG)t.jtt()}gn(){for(const t of this.YG){const i=t.gV;t.wy(),yz(i),dn(i)}this.aot.clear(),this.cot=void 0}got(){for(const t of this.hot){const i=[];this.aot.set(t,i);for(let e=0;e<this._ot;e++){const e=Az(t),s=t===Ri.SI?new QR(e,this.KA,this.Xu):new lz(e,this.KA,this.Xu,this.FG);i.push({uot:s,lot:!0})}}}constructor(t,i,e=2,s=pz,n=ky()){this._ot=e,this.hot=[...s],this.KA=n,this.Xu=t,this.FG=i,this.aot=ll(),this.got()}},vot:class t{Qrt(t){return this.wot.Wo((()=>this.mot(t)))}Ok(){this.BG.zG()}async mot(i){const e=this.BG.sG(Ri.NI),s=e.gV,n=await t.pot(s,i);return await this.BG.BV(e),n}static async pot(i,e){return Ro.kf||Ro.Nf?"all":(i.src||(i.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.Aot(),!e&&await t.yot(i,!1)?"all":await t.yot(i,!0)?"muted":"none")}static async yot(t,i){t.muted=i;const e=t.play();try{if(!pr(e))return!Ro.Qs;const t=Dt(250);return await Promise.race([e,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static Aot(){return new Promise((t=>{if("function"==typeof MessageChannel){const i=new MessageChannel;i.port1.onmessage=()=>t(),i.port2.postMessage("")}else u(t,0)}))}gn(){this.wot.gn()}constructor(t){this.BG=t,this.wot=new Wa}},bot:xB,Mot:s};Uc(),r();(function(t){Qf=t.oot,Ff=t.vot,Gn=t.bot,gi=t.Mot,Yf=gi&&gi.location,Vf=gi&&gi.navigator})(Ro.xf&&Ro.jf?Ei({},CB,{vot:class{Qrt(t){return Promise.resolve("all")}Ok(){}gn(){}}}):CB),r(),r(),r(),r();var jB=class{async nG(t){return tS(t.type)}async rG(t){return!!await mu(t,!0)}},OB=class extends jB{async nG(t){return!!Wf(t.useManagedMediaSource)&&super.nG(t)}};function yr(t){return de(t)}function RB(t,i){const e=de(t);return i?""+e+i:""+e}r(),r();var ir=class{async Tot(t){return(await this.Not.Sot(t.map(yr))).shift()}Iot(t,i){const e=RB(t,i);return this.Dot.Jb(e)}async Eot(t,i){var e;const s=RB(t,i);return null==(e=await this.kot.$b(s))?void 0:e.data}VJ(t){return this.Lot.$b(t)}constructor(t,i,e,s){this.Not=t,this.Dot=i,this.kot=e,this.Lot=s}};r(),r(),r();var PB=class{xot(t){return Promise.resolve(!1)}Cot(t){return Promise.reject(zB)}jot(t){return Promise.reject(zB)}Jb(t){return Promise.resolve(!1)}$b(t){return Promise.resolve(void 0)}Oot(t,i){return Promise.resolve(void 0)}Sot(t){return Promise.resolve([])}Rot(){return Promise.resolve([])}Pot(t){return Promise.resolve([])}zot(t,i){return Promise.resolve([])}wS(t){return Promise.reject(zB)}Bot(t){return Promise.reject(zB)}Uot(){return Promise.reject(zB)}},zB="Storage disabled",BB="Storage disabled";r(),r(),r();var UB=class{get Qot(){return this.My.rM}async xot(t){return(this.Fot||await this.Qot).xot(t)}async Cot(t,i){return(this.Fot||await this.Qot).Cot(t,i)}async jot(t,i){return(this.Fot||await this.Qot).jot(t,i)}async Jb(t){return(this.Fot||await this.Qot).Jb(t)}async $b(t){return(this.Fot||await this.Qot).$b(t)}async Oot(t,i){return(this.Fot||await this.Qot).Oot(t,i)}async Sot(t){return(this.Fot||await this.Qot).Sot(t)}async Rot(){return(this.Fot||await this.Qot).Rot()}async Pot(t){return(this.Fot||await this.Qot).Pot(t)}async zot(t,i){return(this.Fot||await this.Qot).zot(t,i)}async wS(t){return(this.Fot||await this.Qot).wS(t)}async Bot(t){return(this.Fot||await this.Qot).Bot(t)}async Uot(){return(this.Fot||await this.Qot).Uot()}constructor(t){this.My=new xh,this.Fot=void 0,this.My.Sy(t),this.My.rM.then((t=>{this.Fot=t}))}},QB=class{get Yot(){return this.My.rM}async Vot(t){const i=this.Got||await this.Yot;return await i.Vot(t)}constructor(t){this.My=new xh,this.Got=void 0,this.My.Sy(t);const i=this.My.rM;i.then((t=>{this.Got=t})),this.Wot=new UB(i.then((t=>t.Wot))),this.Zot=new UB(i.then((t=>t.Zot))),this.Hot=new UB(i.then((t=>t.Hot))),this.Xot=new UB(i.then((t=>t.Xot))),this.qot=new UB(i.then((t=>t.qot)))}};function kr(t){return new b("This storage cannot handle persistency type "+t)}r(),r(),r();var $h=function(t){return t.Kot="readonly",t.Jot="readwrite",t}({}),Pr=class{xot(t){return Promise.resolve("temporary"===t)}Cot(t,i){return void 0===i&&(i="temporary"),"temporary"!==i?Promise.reject(kr(i)):(this.$ot(t.key),this.RM.push(t),Promise.resolve())}jot(t,i){if(void 0===i&&(i="temporary"),"temporary"!==i)return Promise.reject(kr(i));for(const i of t)this.$ot(i.key);for(const i of t)this.RM.push(i);return Promise.resolve()}Jb(t){return Promise.resolve(Boolean(this.tht(t)))}$b(t){return Promise.resolve(this.tht(t))}Oot(t,i){return Promise.resolve(this.iht(t,i))}Sot(t){const i=t?t.map((t=>this.tht(t))):this.RM;return Promise.resolve(i.filter($t))}Rot(){return Promise.resolve([...this.RM])}Pot(t){return this.zot(t,"key")}zot(t,i){const e=this.RM.filter((e=>e[i]===t));return Promise.resolve(e)}wS(t){return this.$ot(t),Promise.resolve()}Bot(t){for(const i of t)this.$ot(i);return Promise.resolve()}Uot(){return nt(this.RM),Promise.resolve()}tht(t){return this.iht(t,"key")}iht(t,i){for(const e of this.RM)if(e[i]===t)return e}$ot(t){const i=this.tht(t);i&&ra(this.RM,i)}constructor(){this.RM=[]}},FB=class t{static xst(){return Promise.resolve(new t)}Vot(t){return t(this)}constructor(){this.Zot=new Pr,this.Wot=new Pr,this.Hot=new Pr,this.Xot=new Pr,this.qot=new Pr}};r(),r();var YB=class{async xot(t){for(let i of this.eht)if(await i.xot(t))return!0;return!1}async Cot(t,i){void 0===i&&(i="persistent");for(let e of this.eht)if(await e.xot(i))return e.Cot(t);throw kr(i)}async jot(t,i){void 0===i&&(i="persistent");for(let e of this.eht)if(await e.xot(i))return e.jot(t);throw kr(i)}async Jb(t){for(let i of this.eht)if(await i.Jb(t))return!0;return!1}async $b(t){for(let i of this.eht){const e=await i.$b(t);if(e)return e}}async Oot(t,i){for(let e of this.eht){const s=await e.Oot(t,i);if(s)return s}}async Sot(t){const i=[];for(let e of this.eht)i.push(...await e.Sot(t));return i}async Rot(){const t=[];for(let i of this.eht)t.push(...await i.Rot());return t}async Pot(t){const i=[];for(let e of this.eht)i.push(...await e.Pot(t));return i}async zot(t,i){const e=[];for(let s of this.eht)e.push(...await s.zot(t,i));return e}async wS(t){for(let i of this.eht)await i.wS(t)}async Bot(t){for(let i of this.eht)await i.Bot(t)}async Uot(){for(let t of this.eht)await t.Uot()}constructor(t){this.eht=t}};function VB(t){return async()=>{const i=await Promise.all(t.map((t=>t())));return GB.xst(i)}}var GB=class t{static xst(i){return Promise.resolve(new t(i))}get Xot(){return this.sht}get qot(){return this.nht}get Hot(){return this.rht}get Zot(){return this.oht}get Wot(){return this.hht}Vot(i){if(0===this.aht.length)return i(this);const e=[];let s=0;const n=r=>(e.push(r),s++,s<this.aht.length?this.aht[s].Vot(n):i(new t(e)));return this.aht[s].Vot(n)}constructor(t){this.aht=t,this.sht=new YB(t.map((t=>t.Xot))),this.nht=new YB(t.map((t=>t.qot))),this.rht=new YB(t.map((t=>t.Hot))),this.oht=new YB(t.map((t=>t.Zot))),this.hht=new YB(t.map((t=>t.Wot)))}},_h=class t{static ja(i){t.ZY.ja(i)}static get Ld(){return t.uht||(t.uht=t.ZY.xst()),t.uht}};function WB(t){return void 0!==t.yk}function ZB(t){const i=Ro.kf||Ro.Nf,e=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),s=i&&!e,n=new dc(!0);return async t=>{const i=t.VN;if(!n.Gp(i)&&!function(t,i){return!!t&&(ZA(t)?BI(i)||QI(i):_t(t,zo.APPLICATION_TTML_XML)||_t(t,zo.TEXT_VTT)||_t(t,zo.IMAGE_JPEG))}(t.gX,t.cht))return!1;const e=t.cht.some((t=>"ac-3"===t||"ec-3"===t));if(s&&e)return!1;if(t.GY){const e=t.GY,s=Ms(e,(t=>xv(t.A8))).filter($t),n=await async function(t,i){for(const e of t)if(await i(e))return!0;return!1}(s,(t=>Fe.AA(t,i)));if(!n)return!1}return!0}}_h.ZY=new class{xst(){return new QB(this.dht())}async dht(){this.fht&&(await Promise.resolve(),this.fht=!1);for(const t of this.ght)try{return await VB([FB.xst,t])()}catch(t){}return await VB([FB.xst,this._ht])()}ja(t){if(!this.fht)throw new b("Registration overdue");this.ght.push(t)}constructor(t){this.ght=[],this.fht=!0,this._ht=t}}(class t{static xst(){return Promise.resolve(new t)}Vot(t){return Promise.reject(BB)}constructor(){this.Zot=new PB,this.Wot=new PB,this.Hot=new PB,this.Xot=new PB,this.qot=new PB}}.xst),_h.uht=void 0,r(),r(),r(),Qi(),Uc(),r(),Qi();var HB=class{get Ti(){return this.vht.offsetHeight*Fe.Ys.bp}get ji(){return this.vht.offsetWidth*Fe.Ys.bp}constructor(t){this.vht=t}};Uc(),r();var XB=class{get nt(){return this.Ul}Wk(t,i,e,s,n,r,o,h){const a=new oO(t,i,e,s,n,r,o,void 0,h);return this.Ul.tt(a),this.C7.tt(a),a}BQ(t){this.Ul.it(t),this.C7.it(t),t.gn()}CV(t){const i=new IR(t.Lt,t.kh,t.gs);return this.Ul.tt(i),this.C7.tt(i),i}tr(){for(const t of this.Ul.AL.slice())t.gn();this.Ul.tr(),this.C7.tr()}gn(){this.tr(),this.Ul.gn(),this.C7.gn()}constructor(t,i){this.Ul=new Uu,this.C7=new nR(t,i)}};r(),r();var Sr=class{sG(t){return this.ZY.sG(t)}fot(t){return this.ZY.fot(t)}BV(t){return this.ZY.BV(t)}constructor(t){this.ZY=t}};r(),r(),r();var qB=class extends tu{get wht(){return this.cz}get TE(){return this.SE()}SE(){return this.cz.TE}get NE(){return this.DE()}DE(){return this.cz.NE}get LE(){return this.xE()}xE(){return this.cz.LE}get Uu(){return this.cz.Uu}get ct(){return this._d()}_d(){return this.cz.ct}get wV(){return this.mht()}mht(){return this.cz.wV}get OE(){return this.pht()}pht(){return this.cz.OE}get lt(){return this.cz.lt}get Ti(){return this.cz.Ti}get ji(){return this.cz.ji}get wa(){return this.Ck()}Ck(){return this.cz.wa}get xV(){return this._a()}_a(){return this.cz.xV}get WE(){return this.cz.WE}set WE(t){this.cz.WE=t}get KE(){return this.Aht()}Aht(){return this.cz.KE}get $E(){return this.cz.$E}set $E(t){this.cz.$E=t}get rk(){return this.hk()}hk(){return this.cz.rk}get fk(){return this.gk()}gk(){return this.cz.fk}get _k(){return this.vk()}vk(){return this.cz._k}get wk(){return this.pk()}pk(){return this.cz.wk}get V5(){return this.yht()}yht(){return this.cz.V5}get e6(){return this.bht()}bht(){return this.cz.e6}get nt(){return this.Ak()}Ak(){return this.Mht}get Ll(){return this.ait()}ait(){return this.cz.Ll}get t7(){return this.cz.t7}get Nk(){return this.cz.Nk}set Nk(t){this.cz.Nk=t}get xtt(){return this.cz.xtt}get FE(){return this.cz.FE}get mz(){return this.cz.mz}get zV(){return this.Tht()}set zV(t){this.Sht(t)}Tht(){return this.cz.zV}Sht(t){this.cz.zV=t}get Rtt(){return this.cz.Rtt}set Rtt(t){this.Nht(t)}Nht(t){this.cz.Rtt=t}get w8(){return this.Iht()}Iht(){return this.cz.w8}GE(){return this.cz.GE()}Pk(){return this.cz.Pk()}Rk(){this.cz.Rk()}Wb(t,i,e){this.cz.Wb(t,i,e)}cV(t){this.cz.cV(t)}ge(){this.cz.ge()}be(){this.cz.be()}Wk(t,i,e,s,n,r,o,h){return this.cz.Wk(t,i,e,s,n,r,o,h)}CV(t){return this.cz.CV(t)}DV(){return this.cz.DV()}kV(t,i,e,s,n){return this.cz.kV(t,i,e,s,n)}BQ(t){this.cz.BQ(t)}jV(){this.cz.jV()}H$(t){return this.cz.H$(t)}async $n(t){const i=await this.cz.$n(t);let e;return e=t.YA===uh.QQ?this.Dht(i):this.Eht(i),this.vV=e,e}async tr(){this.vV&&(await this.vV.wy(),this.vV=void 0),await this.cz.tr()}ktt(){this.cz.ktt()}Ltt(){this.cz.Ltt()}async wy(){this.Bo(),this.cz.fn(fC,this.kht),this.Mht.TL=void 0,this.Mht.gn(),this.vV&&(await this.vV.wy(),this.vV=void 0)}jtt(){this.cz.jtt()}Lht(t){this.cz.fn(fC,this.kht),this.cz=t,this.Mht.TL=t.nt,this.cz.yn(fC,this.kht)}Vk(t){this.yo(t)}constructor(t){super(),this.vV=void 0,this.Mht=new Ce,this.kht=t=>this.Vk(t),this.cz=t,this.Mht.TL=t.nt,this.cz.yn(fC,this.kht)}},KB=class extends qB{get gV(){return this.cz.gV}get K5(){return this.cz.K5}get xk(){return this.cz.xk}set xk(t){this.cz.xk=t}Ott(t){this.cz.Ott(t)}Fk(){this.cz.Fk()}constructor(t){super(t)}};r(),r(),r();var JB=class{get md(){return this.xS()}xS(){return this.vV.md}get _k(){return this.vk()}vk(){return this.vV._k}N$(t){return this.vV.N$(t)}D$(t){return this.vV.D$(t)}wy(){return Promise.resolve()}constructor(t){this.vV=t}},Tr=class extends JB{get p5(){return this.y5}get A5(){return this.b5}get TE(){return this.SE()}SE(){return this.vV.TE}get ct(){return this._d()}_d(){return this.vV.ct}get F$(){return this.xht()}xht(){return this.vV.F$}T5(t){this.vV.T5(t)}D5(t,i,e,s){this.vV.D5(t,i,e,s)}I3(){this.vV.I3()}w3(){this.vV.w3()}wy(){return this.y5&&(this.y5.wy(),this.y5=void 0),this.b5&&(this.b5.wy(),this.b5=void 0),super.wy()}Cht(t){this.vV=t,this.y5?t.p5?this.y5.jht(t.p5):(this.y5.wy(),this.y5=void 0):t.p5&&(this.y5=this.Oht(t.p5),this.y5.yn(mr,this.Rht)),this.b5?t.A5?this.b5.jht(t.A5):(this.b5.wy(),this.b5=void 0):t.A5&&(this.b5=this.Oht(t.A5),this.b5.yn(mr,this.Rht))}k$(t){this.vV.k$(t)}Pht(t){}constructor(t){super(t),this.y5=void 0,this.b5=void 0,this.Rht=t=>this.Pht(t)}};r(),r(),r();var $B=class extends tu{get QK(){return this.XK}set QK(t){this.XK=t}get TE(){return Mo.PP()}get md(){return this.KS}get E3(){return Ri.dI}get x3(){return Mo.PP()}get zht(){return!1}get PK(){return this.WK}set PK(t){this.WK=t}B4(t,i,e){return Promise.reject(new b("Invalid media buffer"))}P3(){return Promise.reject(new b("Invalid media buffer"))}F4(t,i,e){return Promise.reject(new b("Invalid media buffer"))}F$(){return!1}I3(){}O3(t,i){}R3(t,i){}wS(t,i,e){return Promise.resolve()}s3(t,i){return Promise.reject(new b("Invalid media buffer"))}nB(t,i){return Promise.reject(new b("Invalid media buffer"))}N$(t){return!1}D$(t){return Promise.reject(new b("Invalid media buffer"))}wy(){this.Bo()}constructor(t){super(),this.WK=0,this.XK=0,this.KS=t}},Er=class extends tu{get QK(){return this.Bht()}set QK(t){this.Uht(t)}Bht(){return this.Qht.QK}Uht(t){this.Qht.QK=t}get TE(){return this.SE()}SE(){return this.Qht.TE}get md(){return this.xS()}xS(){return this.Qht.md}get E3(){return this.Qht.E3}get x3(){return this.Fht()}Fht(){return this.Qht.x3}get PK(){return this.Yht()}set PK(t){this.Vht(t)}Yht(){return this.Qht.PK}Vht(t){this.Qht.PK=t}B4(t,i,e){return this.Qht.B4(t,i,e)}P3(){return this.Qht.P3()}F4(t,i,e){return this.Qht.F4(t,i,e)}F$(){return this.Qht.F$()}I3(){this.Qht.I3()}O3(t,i){this.Qht.O3(t,i)}R3(t,i){this.Qht.R3(t,i)}wS(t,i,e){return this.Qht.wS(t,i,e)}s3(t,i){return this.Qht.s3(t,i)}N$(t){return this.Qht.N$(t)}D$(t){return this.Qht.D$(t)}Vk(t){this.yo(t)}wy(){this.Bo(),this.jht(new $B(this.md))}jht(t){this.Qht.fn(mr,this.Ght),this.Qht=t,this.Qht.yn(mr,this.Ght)}constructor(t){super(),this.Ght=t=>this.Vk(t),this.Qht=t,this.Qht.yn(mr,this.Ght)}};bs();var tU=class extends Er{get uot(){return this.cz}set uot(t){this.cz=t}async B4(t,i,e){return yi(e),await this.Wht(this.cz.LE,null==i?void 0:i.kst,null==i?void 0:i.ct),yi(e),t.YA===Me.jN?await this.Zht(t,i,e):await this.Hht(t,i,e)}async Zht(t,i,e){let s=t;for(;;){const[t,n]=Hy(s.rI);s={YA:Me.jN,rI:t};try{return await this.Xht(s,i,e),void n.cancel(new J).catch(Bn)}catch(t){if(jx(t)){if(await this.Wht(this.cz.LE,i.kst,i.ct,e)){s={YA:Me.jN,rI:n};continue}}throw n.cancel(t).catch(Bn),t}}}async Hht(t,i,e){for(;;)try{return yi(e),await this.Xht(t,i,e)}catch(t){if(jx(t)){if(await this.Wht(this.cz.LE,i.kst,i.ct,e))continue}throw t}}async Wht(t,i,e,s){const n=Cx(t,i,e,this.TE,this.PK,this.QK);for(const[t,i]of n)await this.qht(t,i,s);return n.length>0}Xht(t,i,e){return super.B4(t,i,e)}qht(t,i,e){return super.wS(t,i,e)}constructor(t){super(t),this.cz=void 0}},iU=class extends Tr{get uot(){return this.cz}set uot(t){this.cz=t,this.y5&&(this.y5.uot=t),this.b5&&(this.b5.uot=t)}Oht(t){const i=new tU(t);return i.uot=this.cz,i}constructor(t){super(t),this.cz=void 0,this.Cht(t)}};r();var Jo=class extends JB{get ck(){return this.vV.ck}set ck(t){this.vV.ck=t}};r();var Br=class extends qB{get gV(){return this.cz.gV}get K5(){return this.cz.K5}get Tk(){return this.cz.Tk}get yk(){return this.cz.yk}get xk(){return this.cz.xk}set xk(t){this.cz.xk=t}Ott(t){this.cz.Ott(t)}Fk(){this.cz.Fk()}jk(){return this.cz.jk()}constructor(t){super(t)}},eU=class extends KB{get wht(){return this.cz}Eht(t){const i=new iU(t);return i.uot=this,i}Dht(t){return new Jo(t)}},sU=class extends Br{get wht(){return this.cz}Eht(t){const i=new iU(t);return i.uot=this,i}Dht(t){return new Jo(t)}},rs=class extends Sr{sG(t){return t===Ri.NI?new sU(super.sG(t)):t===Ri.SI?new eU(super.sG(t)):void 0}async BV(t){const i=t;await i.wy(),await super.BV(i.wht)}};r();var nU=class{Kht(){this.ta.Yk()}gn(){s.removeEventListener("pageshow",this.Jht)}constructor(t){this.Jht=t=>{t.persisted&&this.Kht()},this.ta=t,s.addEventListener("pageshow",this.Jht)}};r(),r(),r(),r(),r();var rU=class{$ht(t,i,e){return Promise.resolve()}iat(t,i,e,s){let n=[];if(s){const r={sQ:i.lB,nQ:i.dB,rQ:e.eat.rQ};s.YA===El.TTML?n=AI(t,s,r,e.gX):s.YA===El.WEBVTT&&(n=PN(t,r,this.sat).L)}return n}tr(){}constructor(t){this.sat=t}};r(),r(),r();var ji=function(t){return t.gC="vttc",t.nat="vsid",t.rat="iden",t.oat="ctim",t.aat="sttg",t.uat="payl",t.dat="vtte",t.fat="vtta",t}({}),oU=class t{static gat(i){return Boolean(t._at[i])}static dj(i){const e=[],s=Qe.qC(new Bt(i,new da));for(const i of s)t.gat(i.YA)&&e.push(t._at[i.YA](i.rI));return e}static vat(i){const e=Qe.qC(i),s=ao(e,ji.nat),n=ao(e,ji.rat),r=ao(e,ji.oat),o=ao(e,ji.aat),h=ao(e,ji.uat);return{YA:ji.gC,wat:s?t.mat(s):void 0,pat:n?t.Aat(n):void 0,yat:r?t.bat(r):void 0,Mat:o?t.Tat(o):void 0,Sat:h?t.Nat(h):void 0}}static mat(t){return{YA:ji.nat,Iat:t.QC()}}static Aat(t){return{YA:ji.rat,pat:t.WC()}}static bat(t){return{YA:ji.oat,Dat:t.WC()}}static Tat(t){return{YA:ji.aat,Eat:t.WC()}}static Nat(t){return{YA:ji.uat,Lat:t.WC()}}static xat(t){return{YA:ji.dat}}static Cat(t){return{YA:ji.fat,jat:t.WC()}}};oU._at={[ji.gC]:oU.vat,[ji.dat]:oU.xat,[ji.fat]:oU.Cat},Qi();var hU=class{$ht(t,i,e){const s=new DataView(t.Oat),n=pe.dj(s),r=dl(n,(t=>t.YA===Rt.kx));return r&&(this.Rat=r.Z[0].zj.nj.xj),Promise.resolve()}iat(t,i,e){if(j(this.Rat))return[];const s=Al(t),n=pe.dj(s),r=aT(n,Rt.mC),o=aT(n,Rt.SC);if(!r||0===r.Z.length||!o)return[];const h=function(t,i,e){const s=t.Z[0],n=s.MR?s.MR.MR.toNumber()/e:i.lB,r=[];for(const t of s.bR)r.push(...t.kR);return{Pat:n,kR:r}}(r,i,this.Rat),a=e.eat.rQ;return function(t,i,e,s){const n=oU.dj(Al(i.rI)),r=t.kR,o=t.Pat+s,h=[];let a=0;for(let t=0;t<r.length;t++){const i=r[t],s=n[t];var u;const c=(null!=(u=i.ct)?u:0)/e;let l;s.YA===ji.gC&&(l=aU(s,a,c,o)),l&&h.push(l),a+=c}return h}(h,o,this.Rat,a)}tr(){this.Rat=NaN}constructor(){this.Rat=NaN}};function aU(t,i,e,s){if(!t.Sat)return void 0;const n=t.yat?function(t){return pl(t.Dat,new da(0))}(t.yat):i,r=s+n,o=r+e,h=t.Sat.Lat;return new uN(r,o,h,!1)}r(),r(),Qi();var uU=function(t){return t[t.nW=0]="nW",t[t.zat=1]="zat",t[t.Bat=10]="Bat",t[t.Uat=11]="Uat",t[t.Qat=12]="Qat",t[t.Fat=13]="Fat",t[t.Yat=14]="Yat",t[t.Vat=15]="Vat",t[t.Gat=20]="Gat",t[t.Wat=21]="Wat",t[t.Zat=22]="Zat",t[t.Hat=23]="Hat",t[t.Xat=24]="Xat",t[t.qat=30]="qat",t[t.Kat=31]="Kat",t[t.Jat=32]="Jat",t[t.$at=33]="$at",t[t.tut=34]="tut",t[t.iut=35]="iut",t[t.eut=40]="eut",t[t.sut=41]="sut",t[t.nut=42]="nut",t[t.rut=43]="rut",t[t.out=44]="out",t[t.hut=50]="hut",t[t.aut=51]="aut",t[t.uut=52]="uut",t[t.cut=60]="cut",t[t.lut=61]="lut",t[t.fut=62]="fut",t[t.gut=63]="gut",t[t._ut=70]="_ut",t[t.vut=71]="vut",t[t.wut=72]="wut",t[t.mut=73]="mut",t[t.Aut=74]="Aut",t[t.yut=75]="yut",t[t.but=76]="but",t[t.Mut=77]="Mut",t[t.Tut=90]="Tut",t[t.Sut=91]="Sut",t}({});function cU(t,i){const e=i.DP(((i,e)=>t.SP(i,e,!1,!1)));return t.pP(e)}function lU(t,i){const e=i.Sn(t._P()).DP(((i,e)=>t.gr(e)));return t.pP(e)}r(),r(),r(),r();var ea=function(t){return t.Nut="Iut",t.Dut="Eut",t}({});Qi(),bs(),r();var Ir=class extends Co{constructor(t,i,e){super("kut"),this.Cn=t,this.jn=i,this.Lut=e}},dU=class extends Jr{constructor(){super("xut")}},fU=[Zi.Sb,Zi.Ib,Zi.Tb,Zi.Qy],gU=class extends tu{get Cut(){var t,i;return(null==(t=this.Out.jut)?void 0:t.Lut)||(null==(i=this.Out.Rut)?void 0:i.Lut)}get Put(){return this.zut}set But(t){this.Out.But=t}get But(){return this.Out.But}get nI(){return this.Uut}Qut(t){this.Uut!==t&&(this.Uut=t,this.yo(new dU))}get Fut(){return this.zut.Ht.Fut}get lt(){return this.dV}async Cn(t){if(!this.Yut&&!this.Vut)return;const i=this.zy("xut");this.Yut?(this.Gut.Ty(),this.Gut=new Wt,Vh(this.Wut(this.Gut.ly),this.Gut)):(this.Zut.sM(void 0),this.Zut=new xh),await i}get Yut(){return"Hut"===this.Uut}get Vut(){return"Xut"===this.Uut}get qut(){return"Kut"===this.Uut}get Jut(){return"$ut"===this.Uut}async zk(t){if(this.qut||this.Vut)for(0,this.Gut.Ty();!this.Yut&&!this.Jut;)await this.zy("xut")}async tr(t){this.Jut?(this.dV=void 0,this.Qut("Hut")):await this.zk(t),this.Out.tr(),this.zut.tr()}eG(t){this.dV=t,this.Qut("$ut"),this.yo(new cl(t))}tct(){this.C8.yn(Zi.Eb,this.ld),this.C8.yn([Zi.Mb,Zi.eb],this.We),this.Out.yn(fU,this.Ds),this.ict.yn(ea.Nut,this.ld)}ect(){this.C8.fn(Zi.Eb,this.ld),this.C8.fn([Zi.Mb,Zi.eb],this.We),this.Out.fn(fU,this.Ds),this.ict.fn(ea.Nut,this.ld)}async sct(t){this.ect(),this.nct.Ty(),await this.zk(null!=t?t:uU.rut),this.Out.tr()}async rct(t){this.tct(),await this.Cn(null!=t?t:uU.Vat)}hct(t,i,e){if(this.Yut)for(const s of t.zut.act())s.uct<=e&&i<=s.cct&&this.ict.lct.some((t=>t.o===s.dct))&&this.zut.fct(s)}async gn(){this.Bo(),this.ect(),this.nct.Ty(),await this.zk(uU.out),this.Out.gn()}async Wut(t){for(;;)try{yi(t),this.Qut("Kut"),await this.Out.gct(t),yi(t),this.Qut("Xut"),await Ao(this.Zut.rM,t)}catch(t){if(Tu(t))this.Qut("Hut");else{const i=t instanceof qi?t:new qi(vt.MEDIA_LOAD_ERROR,t.message,t);this.eG(i)}break}}async _ct(t){yi(t),await this.zk(uU.nut),this.Out.tr(),yi(t),await this.Cn(uU.Fat)}constructor(t,i,e,s,n){super(),this.vct=t,this.ict=i,this.zut=e,this.Out=s,this.C8=n,this.Uut="Hut",this.dV=void 0,this.Zut=new xh,this.nct=new Wt,this.Gut=new Wt,this.We=t=>{if(this.Yut||this.Jut)return;if(!Fe.lE&&this.Out.wct(t.currentTime))return;this.nct.Ty(),this.nct=new Wt;Vh(this._ct(this.nct.ly),this.nct).catch(Ct)},this.ld=no((()=>{if(this.Vut){try{this.Out.mct();if(this.Out.pct())return}catch(t){if(!(t instanceof Ir))throw t}this.Cn(uU.Yat)}}),250),this.tct()}};r(),bs(),Qi(),r(),Qi();var _U=class t{Act(t,i){return this.yct(t,!1,i)}bct(t,i){return this.yct(t,!0,i)}async yct(i,e,s){yi(s.ly);const n=await this.Mct(i,e,s);return n.XN?t.Tct(n):this.Sct(n)}Sct(t){return t}static Tct(t){return t}Mct(t,i,e){var s;const n=new Gs({zu:t.zu,oI:Ee.xN,aI:t.Nct?{Range:"bytes="+t.Nct[0]+"-"+(null!=(s=t.Nct[1])?s:"")}:void 0,zI:t.zI,xI:Ve.GET,YA:Rs.gI,OI:i?ul.wI:ul.dI,RI:this.Ict,CI:e.Dct,jI:e.jI,ly:e.ly,QI:e.QI});return this.OQ.hI(n)}constructor(t,i){this.OQ=t,this.Ict=i}};r(),r(),Qi();var vU=class{Ect(t,i){const e=this.kct**t,s=i*(1-e)+e*this.Mst;j(s)||(this.Mst=s,this.Lct+=t)}xct(){const t=1-this.kct**this.Lct;return this.Mst/t}constructor(t){this.Mst=0,this.Lct=0,this.kct=x.exp(x.log(.5)/t)}},wU=class{Ect(t,i){const e=8e3*i/t,s=t/1e3;this.Cct+=i,this.jct.Ect(s,e),this.Oct.Ect(s,e)}xct(){return this.Rct()?x.min(this.jct.xct(),this.Oct.xct()):this.Pct}Rct(){return this.Cct>=this.zct}constructor(t=2,i=5,e=128e3){this.Cct=0,this.Pct=OE,this.jct=new vU(t),this.Oct=new vU(i),this.zct=e}},mU=class{get Bct(){return this.Uct.xct()}get Rct(){return this.Uct.Rct()}Qct(t){const i=t.Fct,e=this.Yct?t.Vct-t.Gct:t.Vct-t.Wct,s=t.Zct;!s&&i<this.Hct||(s?this.Uct.Ect(2*e,i):this.Uct.Ect(e,i))}constructor(t,i){this.Yct=i,i&&ou(t)?t===Ri.NI?(this.Hct=5e3,this.Uct=new wU(.05,1,0)):(this.Hct=0,this.Uct=new wU(.005,.1,0)):(this.Hct=16e3,this.Uct=new wU)}};r(),r(),r(),bs();var pU=class{transform(t,i){this.o_.write(t).catch(Bn),i.enqueue(t)}flush(){this.o_.close().catch(Bn)}constructor(t){this.o_=t}},AU=class{Xct(){return new yU(Vy(this.Oat),this.qct,this.Kct)}constructor(t,i,e){this.Oat=t,this.qct=i,this.Kct=e}},yU=class t{get YN(){return this.Jct}FN(t){return Wy(this.Jct,t)}Zb(){const[i,e]=Hy(this.Jct);return this.Jct=i,new t(e,this.qct,this.Kct)}$ct(){const[i,e]=function(t){const i=new La,e=i.writable.getWriter(),s=new La(new pU(e));return t.pipeTo(s.writable).catch((t=>{e.abort(t).catch(Bn)})),[s.readable,i.readable]}(this.Jct);return this.Jct=i,new t(e,this.qct,this.Kct)}tlt(t){return this.FN(t).then((t=>new AU(t,this.qct,this.Kct)))}constructor(t,i,e){this.Jct=t,this.qct=i,this.Kct=e}};r();var bU=class extends Co{constructor(t,i,e){super(i,e),this.ilt=t}},MU="Cache lookup failed.",TU=class extends tu{async elt(t,i){yi(i);const e=await this.slt.Eot(t.zu.zu,t.zu.Nct);if(yi(i),!e)throw new bU(t,MU);const s=new AU(e.buffer,e.byteLength,e.reference);return{ilt:t.ilt,nlt:{YA:Me.v$,rI:s},Lut:t.Lut,zu:t.zu}}async rlt(t,i){yi(i);const e=await this.slt.Eot(t.zu,t.Nct);if(yi(i),!e)throw new bU(t,MU);const s=new AU(e.buffer,e.byteLength,e.reference);return{YA:Me.v$,rI:s}}gn(){this.Bo()}constructor(t){super(),this.slt=t}};r();var SU=["Nb","Db"],NU=class extends tu{async elt(t,i){let e;for(const s of this.olt)try{return await s.elt(t,i)}catch(t){V(t),e=t}throw e}async rlt(t,i){let e;for(const s of this.olt)try{return await s.rlt(t,i)}catch(t){V(t),e=t}throw e}gn(){for(const t of this.olt)t.fn(SU,this.Ds),t.gn()}constructor(t){super(),this.olt=t;for(const t of this.olt)t.yn(SU,this.Ds)}};function Ko(t){return $a(t.hlt)}function IU(t){return Ko(t)?t.hlt:t.ult}r(),r(),r(),r();var DU=class extends Jr{constructor(t,i,e,s,n,r){super(t),this.clt=i,this.YZ=e,this.mR=s,this.Fj=n,this.RI=r}},EU=class extends DU{constructor(t,i,e,s,n){super(Zi.Sb,t,i,e,s,n)}};r(),Qi(),bs(),r(),Qi();var kU=class{constructor(t,i){this.llt=t,this.dlt=i}},LU=class extends kU{get Fct(){return this.flt}start(){}transform(t,i){this.flt+=t.byteLength,i.enqueue(t)}flush(){this.glt(!1)}Ty(){this.glt(!0)}glt(t){this.llt(this.dlt,Fe.Og(),this.Fct,t)}constructor(...t){super(...t),this.flt=0}},xU=class extends kU{get Fct(){return this.flt}start(){this.dlt=Fe.Og()}transform(t,i){this.flt+=t.byteLength,this._lt||this.vlt(t)&&this.glt(!1),i.enqueue(t)}flush(){}Ty(){this.glt(!0)}vlt(t){const i=this.wlt(t),e=this.plt(i);return Boolean(dl(e,CU))}wlt(t){return this.Alt&&void 0!==this.ylt?(this.Alt=ih([this.Alt,t]),new Bt(Al(this.Alt),new da(this.ylt))):(this.Alt=t,new Bt(Al(t),new da))}plt(t){const i=Qe.KC(t.rI,t.OC,!0);return i.JC?(this.Alt=void 0,this.ylt=void 0):this.ylt=t.OC.tc,i.m}glt(t){this._lt||(this.llt(this.dlt,Fe.Og(),this.Fct,t),this._lt=!0)}constructor(...t){super(...t),this.flt=0,this._lt=!1}};function CU(t){return t.YA===Rt.SC}var jU=class{blt(t){const i=t.cI?this.Mlt:Fe.Og(),e=this.Tlt(i),s=new La(e),n=t.YN().pipeTo(s.writable).then((()=>({VE:{Fct:e.Fct}})),(t=>{throw e.Ty(),t}));return this.Slt.Sy(n),s.readable}Nlt(t){const i=t.cI?this.Mlt:Fe.Og(),e=t.FN(),s=e.then((t=>{const e=Fe.Og();return this.Qct(i,e,t.byteLength,!1),{VE:{Fct:t.byteLength}}}),(t=>{const e=Fe.Og();throw this.Qct(i,e,0,!0),t}));return this.Slt.Sy(s),e}get Ilt(){return this.Slt.rM}constructor(t){this.Dlt=t,this.Slt=new xh,this.Qct=(t,i,e,s)=>{const n={Wct:this.Mlt,Gct:t,Vct:i,Fct:e,Zct:s};this.Dlt.Qct(n),this.Dlt.Rct&&_i.Ld.DY(this.Dlt.Bct)},this.Slt.rM.catch(Bn),this.Mlt=Fe.Og()}},OU=class extends jU{Tlt(t){return new LU(this.Qct,t)}},RU=class extends jU{Tlt(t){return new xU(this.Qct,t)}};r();var PU=class extends DU{constructor(t,i,e,s,n,r,o){super(Zi.Ib,t,i,e,s,n),this.Elt=r,this.Yz=o}};r();var zU=class extends Co{constructor(t,i,e){super("Error downloading segment "+IU(i),t),this.klt=i.lB,this.Llt=i.dB,this.xlt=e}},BU=class extends tu{Clt(){return this.Yct?new RU(this.Dlt):new OU(this.Dlt)}async elt(t,i){yi(i);const e=t.Lut,s=t.zu,n=t.ilt,r=IU(n),o=e.Lut?e.Lut.zL:-1,h=function(t){const i=t.Lut;let e;e=i===function(t){return t.lct.reduce(((t,i)=>t.FY<i.FY?t:i))}(i.jlt)?io(5*t.ilt.ct):io(1.2*t.ilt.ct);return ur(e,1e3,18e3)}(t);this.yo(new EU(s,e.FY,r,o,e.YA));try{const t=this.Clt(),a=await this.Olt.Act(s,{QI:this.Yct,Dct:h,ly:i}),u=await this.Rlt(a,a.XN,i,t);return X(this.Plt(t.Ilt,e,s,r,o,a)),{nlt:u,Lut:e,ilt:n,zu:s}}catch(t){throw V(t),new zU(t,n,e)}}async rlt(t,i){yi(i);const e=await this.Olt.bct(t,{QI:false,Dct:1e4,ly:i});return await this.Rlt(e,false,i)}async Rlt(t,i,e,s){if(i){const i=s?s.blt(t):t.YN();return{YA:Me.jN,rI:new yU(i)}}{const i=s?await s.Nlt(t):await t.FN(e);return{YA:Me.v$,rI:new AU(i)}}}async Plt(t,i,e,s,n,r){try{const o=await t;this.yo(new PU(e,i.FY,s,n,i.YA,r.nI,o.VE.Fct))}catch(t){}}gn(){this.Bo()}constructor(t,i,e){super(),this.Olt=t,this.Dlt=i,this.Yct=e}};r();var UU=.001,QU=class{get TE(){return this.zlt.TE}get Blt(){return this.zlt.Blt}get J$(){return this.zlt.J$}get Ult(){if(this.X3.fk<Fn.Xn)return!1;if(this.zlt.jn<=this.Qlt&&this.zlt.Flt())return!0;const t=this.zlt.uV;if(!t||0===t.V)return!1;const i=Mo.RP(this.C8.LE,1/0);return t.Sn(i).yP(this.zlt.J$).jP>=this.UG.ZK}get Qlt(){const t=this.zlt.uV;let i;if(t&&t.V>0)i=t.jn(0);else{i=this.C8.LE;const t=this.zlt.J$,e=t.bP(i);e>=0&&(i=t.jn(e))}const e=this.zlt._k.Cn(0);if(e>i){if(this.zlt.Cn<=i&&this.zlt.jn>=i&&e>i+UU)throw new Ir(i,e);i=e}return i=this.zlt.Ylt.gP(i),i}constructor(t,i,e,s){this.zlt=t,this.C8=i,this.X3=e,this.UG=s}};r();var FU=class{get Vlt(){if(0===this.Hv.size)return this.Glt;let t=Mo.RP(0,1/0);return t=t.Sn(this.Glt),this.Hv.forEach((i=>{t=t.Sn(i)})),t}Wlt(t){return this.Hv.get(t.o)}Zlt(){let t=this.Glt;return this.Hv.forEach((i=>{t=t.pP(i)})),t}Hlt(t){if(this.Glt.gr(t))return!0;let i=!1;return this.Hv.forEach((e=>{i=i||e.gr(t)})),i}Xlt(t,i){const e=this.Hv.get(i.o);return!!e&&e.gr(t)}MP(t,i){if(this.Glt.MP(t,i))return!0;let e=!1;return this.Hv.forEach((s=>{e=e||s.MP(t,i)})),e}qlt(t,i){const e=this.Hv.get(i),s=e?e.pP(t):t;this.Hv.set(i,s),this.Glt=this.Glt.pP(t)}Klt(t){this.Hv.forEach(((i,e)=>{this.Hv.set(e,i.pP(t))})),this.Glt=this.Glt.pP(t)}Jlt(t){this.Hv.forEach(((i,e)=>{this.Hv.set(e,i.Sn(t))})),this.Glt=this.Glt.Sn(t)}tr(){this.Hv.forEach(((t,i)=>{this.Hv.set(i,Mo.PP())})),this.Glt=Mo.PP()}constructor(){this.Hv=ll(),this.Glt=Mo.PP()}},YU=class{get $lt(){return this.tdt}get J$(){return this.t0}idt(t){for(const i of this.Wot){if(i.uct>t)break;if(i.cct>t)return i}}edt(t){for(const i of this.Wot){if(i.sdt>t)break;if(i.ndt>=t)return i}}rdt(t,i){const e=[];for(const s of this.Wot){if(s.uct>t)break;s.cct>=i&&e.push(s)}return e}act(){return this.Wot}fct(t){const i=Mo.RP(t.sdt,t.ndt),e=i._P();this.tdt.Jlt(e),this.tdt.qlt(i,t.dct),this.odt(e);const s=Kv(this.Wot,(i=>t.uct<=i.uct));if(s<0)this.Wot.push(t);else{this.Wot[s].cct<=t.cct?this.Wot.splice(s,1,t):this.Wot.splice(s,0,t)}}i0(t,i){this.t0.qlt(t,i)}hdt(t){this.t0.Klt(t)}Jlt(t){this.tdt.Jlt(t),this.t0.Jlt(t);const i=this.tdt.Zlt();this.odt(i)}odt(t){this.Wot=this.Wot.filter((i=>t.SP(i.sdt,i.ndt))).map((i=>i.adt&&!t.MP(i.sdt,i.ndt)?function(t,i){return{dct:t.dct,uct:t.uct,cct:t.cct,sdt:t.sdt,ndt:t.ndt,adt:i}}(i,!1):i))}tr(){this.tdt.tr(),this.t0.tr(),this.Wot=[]}gn(){this.tr()}constructor(t){this.Wot=[],this.Ht=t,this.tdt=new FU,this.t0=new FU}};r(),r();var VU=class{get But(){return this.udt}set But(t){this.udt=t}get Fut(){return this.zut.Ht.Fut}async cdt(t,i,e){let s;yi(e);const n=this.zut.edt(t);s=n&&ce(n.ndt,t,1e-5)?n.cct:t;const r=this.ldt(s),o=function(t){return GU.bind(void 0,t)}(s);let h=await this.$p.ddt(o,r,i,e);for(yi(e);h&&this.fdt(h.ilt);){const t=XU(h.ilt),s=h.Lut;h=await this.$p.ddt(t,[s],i,e),yi(e)}if(!h)return void 0;if(!this.gdt(h.ilt))return h;const a=this._dt(h.ilt);if(t<a.Cn)return await this.findFirstNonAppendedSegmentBeforeSegment(h,i,e,a);if(t>=a.jn)return await this.findFirstNonAppendedSegmentAfterSegment(h,i,e);if(!h.Lut.vdt(h.ilt))throw new b("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,i,e){let s=t;do{const n=XU(s.ilt),r=t.Lut;s=await this.$p.ddt(n,[r],i,e),yi(e)}while(s&&this.gdt(s.ilt));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,i,e,s){let n=t;do{const s=HU(n.ilt),r=t.Lut;n=await this.$p.ddt(s,[r],i,e),yi(e)}while(n&&this.gdt(n.ilt));if(!n){0;const i=t.Lut.wdt.Cn;throw new Ir(i,s.Cn,t.Lut)}return n}mdt(t){return this.zut.$lt.Hlt(t)}pdt(t){return this.zut.rdt(t.lB,t.dB)}gdt(t){const i=this.pdt(t);return i.length>0&&function(t,i){return function(t){let i=Mo.PP();for(const e of t)i=i.pP(Mo.RP(e.uct,e.cct));return i}(t).MP(i.lB,i.dB)}(i,t)&&i.every(qU)}fdt(t){return this.zut.J$.MP(t.lB,t.dB)}_dt(t){const i=this.pdt(t);return{Cn:i[0].sdt,jn:i[i.length-1].ndt}}ldt(t){const i=this.Adt(t);if(0===i.length){const t=this.udt?this.udt:this.zut.Ht.lct;return[t[t.length-1]]}const e=i.filter((t=>{var i;return(null==(i=t.Lut)?void 0:i.lot)&&!t.ydt}));return e.length>0?e:[i[i.length-1]]}Adt(t){return(this.udt?this.udt:this.zut.Ht.lct).filter((i=>!this.zut.J$.Xlt(t,i)))}constructor(t,i,e){this.vct=t,this.zut=i,this.$p=e}};async function GU(t,i,e,s){const n=i.eat.bdt(t);if(n){if(i.Mdt(n)){return(await i.Sdt(n,e,s)).Tdt(t)}return n}}async function WU(t,i,e,s){if(Ko(t)){if(0===t.hlt)return;const n=i.eat.Ndt(t);if(!n)return;return(await i.Sdt(n,e,s)).Idt(t.hlt-1)}return i.eat.Ddt(t)}async function ZU(t,i,e,s){if(Ko(t)){const n=i.eat.Ndt(t);if(!n)return;const r=await i.Sdt(n,e,s);if(t.hlt+1===r.V)return;return r.Idt(t.hlt+1)}return i.eat.Edt(t)}function HU(t){return WU.bind(void 0,t)}function XU(t){return ZU.bind(void 0,t)}function qU(t){return t.adt}r();var KU=class{async ddt(t,i,e,s){yi(s);const n=this.kdt(i,e);if(!n)return;const r=await t(n,this.Ldt,s);if(!r)return;const o=n.xdt(r);return{Lut:n,ilt:r,zu:o}}kdt(t,i){if(0===t.length)return;const e=this.jdt.Cdt(t,this.Odt?i:void 0,this.zlt,this.UG.VK);return this.Odt||(this.Odt=!0),e}constructor(t,i,e,s){this.jdt=t,this.zlt=i,this.UG=e,this.Ldt=s,this.Odt=!1}};r();var JU=class{async ddt(t,i,e,s){yi(s);const n=this.jdt.Rdt(i,e,this.zlt);if(!n.length)return;let r;for(const i of n)try{yi(s);const e=await t(i,this.Ldt,s);if(e){const t=i.xdt(e);if(await this.slt.Iot(t.zu,t.Nct))return{ilt:e,Lut:i,zu:t}}}catch(t){V(t),r=t}if(r)throw r}constructor(t,i,e,s){this.jdt=t,this.zlt=i,this.slt=e,this.Ldt=s}};function $U(t){return void 0!==t.$E}function tQ(t,i){const e=t.ji&&i.ji,s=t.Ti&&i.Ti;if(e||s){if(e&&s)return t.ji*t.Ti-i.ji*i.Ti;if(e)return t.ji-i.ji;if(s)return t.Ti-i.Ti;return(t.ji||1)*(t.Ti||1)-(i.ji||1)*(i.Ti||1)}return 0}function iQ(t,i){return tQ(t,i)||function(t,i){return t.FY-i.FY}(t,i)}r(),r();var sl=class t{Cdt(i,e,s,n){let r=t.sortByQuality(i);if(void 0!==this.Pdt&&void 0===e&&i.length>1){const i=t.zdt(r,this.Pdt);i&&(r=i)}const o=this.Rdt(r,e,s,n);return o.length?o[o.length-1]:r[0]}Rdt(i,e,s,n){var r;const o=t.sortByQuality(i),h={Bct:void 0===n||this.Bdt.Rct?this.Bdt.Bct:n,$E:$U(s)&&s.$E?s.$E:1,Udt:s.ji,Qdt:s.Ti,Fdt:null==(r=this.Ydt)?void 0:r.restrictToPlayerSize};let a=o;for(const t of this.xv)a=t(a,e,h,this.NA,this.Vdt);return a}static Gdt(i){return t.sortByQuality(i)[0]}static Wdt(i,e){var s;return e?t.Gdt(null!=(s=t.zdt(i,e))?s:i):t.Gdt(i)}static zdt(t,i){for(const e of i){const i=t.filter((t=>Wo(t.Qp,e)));if(i.length>0)return i}}static sortByQuality(t){const i=[...t];return i.sort(iQ),i}constructor(t,i,e,s,n,r){this.xv=t,this.Bdt=i,this.NA=e,this.Ydt=s,this.Pdt=n,this.Vdt=r}};r();var eQ=(t,i,e,s,n)=>t.filter((t=>n.N$(t)&&s.Pp(i,t)));r();var sQ=(t,i,e)=>t.filter((t=>function(t,i,e){const s=e.Bct;if(s<=0)return!1;return.8*s>t.FY*e.$E}(t,0,e)));r();var nQ=(t,i,e,s,n)=>{const r=e.Fdt;if(void 0===r&&!s.Qs)return t;if(!1===r)return t;if(t.length>0&&t[0].YA!==Ri.NI)return t;for(let i=t.length-1;i>=0;i--){const s=t[i];if(s.Ti===e.Qdt&&s.ji===e.Udt)return t.slice(0,i+1);if(s.Ti<e.Qdt||s.ji<e.Udt)return t.slice(0,i+2)}return[]};r();var rQ=class{async ddt(t,i,e,s){let n;for(const r of this.Zdt)try{const n=await r.ddt(t,i,e,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.Zdt=t}};r(),r();var oQ=class{async Hdt(t,i,e,s){let n;for(const r of this.Xdt)try{return await r.Hdt(t,i,e,s)}catch(t){V(t),n=t}throw n}constructor(t){this.Xdt=t}};r();var hQ=class{async Hdt(t,i,e,s){var n;const r=await this.OQ.hI({zu:t,oI:Ee.xN,aI:i?{Range:"bytes="+i[0]+"-"+(null!=(n=i[1])?n:"")}:void 0,zI:e,xI:Ve.GET,YA:Rs.dI,ly:s});return await r.FN()}constructor(t){this.OQ=t}};r();var aQ=class{async Hdt(t,i,e,s){const n=await this.slt.Eot(t,i);if(n)return n.buffer;if(i){const e=await this.slt.Eot(t);if(e)return vi(new T(e.buffer),i[0],i[1])}throw new bU({zu:t,Nct:i,zI:!1})}constructor(t){this.slt=t}};Qi(),r();var uQ=1.05,cQ=(t,i,e,s)=>{if(!1===e.Fdt)return t;if(s.Ap)return t;const n=s.yp;var r;const o=(null!=(r=null==n?void 0:n.width)?r:e.Udt)*uQ;var h;const a=(null!=(h=null==n?void 0:n.height)?h:e.Qdt)*uQ;for(let i=t.length-1;i>=0;i--){const e=t[i];if(e.Ti<=a&&e.ji<=o)return t.slice(0,i+1)}return[]},lQ=class{static xst(t,i,e,s,n,r,o,h,a,u){const c=function(t,i){return new oQ([new aQ(i),new hQ(t)])}(r,o),l=new sl([eQ],n,Fe.Ys,h,a,u),d=new JU(l,i,o,c),f=new sl([sQ,eQ,nQ,cQ],n,Fe.Ys,h,a,u),g=new KU(f,i,s,c),_=new rQ([d,g]);return new VU(t,e,_)}};r(),r();var dQ=class extends Jr{constructor(t,i,e,s,n,r=0){super(Zi.Tb),this.segmentStartTime=t,this.error=i,this.trackType=e,this.track=s,this.quality=n,this.retryCount=r}};r();var fQ=class extends Jr{constructor(t,i){super(Zi.Qy),this.track=t,this.segments=i}};Qi();var gQ=class extends Co{constructor(t,i){super(i),this.qdt=t}},_Q=[Zi.Sb,Zi.Ib],vQ=class extends tu{get jut(){return this.Kdt}get Rut(){return this.Jdt}set But(t){this.$dt.But=t}get But(){return this.$dt.But}get Fut(){return this.zut.Ht.Fut}tft(t){return!this.H4||!t||!gm(this.H4.Oat,t.Oat)}wct(t){if(!this.Kdt)return!1;const i=this.Kdt.ilt,e=Mo.RP(i.lB,i.dB),s=this.ift.Blt,n=s.bP(t);return n<0?e.gr(t,UU):e.SP(t,s.jn(n),!0,!0,UU)}async gct(t){const i=this.zut.Ht.lct;for(;;){let n;try{var e;yi(t),this.mct();if(this.pct())break;n=this.eft();const r=await this.ddt(n,t);if(void 0===r)break;if(this.Kdt=r,!wQ(this.Kdt)){await this.sft(this.Kdt,t);continue}var s;if(this.Jdt&&!Wo(this.Jdt.Lut.VN,this.Kdt.Lut.VN)&&await this.Vdt.D$(this.Kdt.Lut),this.Kdt.Lut.GY&&(!this.Rut||(null==(e=this.Jdt)?void 0:e.Lut)!==this.Kdt.Lut))null==(s=this.SV)||s.KY(this.Kdt.Lut.GY);await this.nft(n,this.Kdt.ilt,t),this.H4=await this.rft(this.Kdt.Lut,t);const o=await this.elt(this.Kdt,t),h=this.ift.TE,a=this.Jdt;this.Jdt=await this.oft(o,t);const u=this.ift.TE;this.hft(a,this.Kdt,h,u,n),i.forEach((t=>t.ydt=!1)),this.aft=0,this.uft=0}catch(e){if(e instanceof Ir){this.O3(e.Cn,e.jn,e.Lut);continue}if(e instanceof gQ){let s=500;if(i.every((t=>t.ydt))){if(2===this.aft){const t=this.ift.TE;if(this.cft(this.Kdt),this.hft(this.Jdt,this.Kdt,t,t,n),i.forEach((t=>t.ydt=!1)),this.uft+=1,this.aft=0,this.uft===this.lft.maxRetries)throw new qi(vt.MEDIA_LOAD_ERROR,"The segments could not be loaded.",e);continue}this.aft++;const t=this.lft.minimumBackoff*2**(this.aft-1);s=x.min(t,this.lft.maximumBackoff)}await Dt(s,t);continue}throw this.dft=Mo.PP(),e}finally{this.Kdt=void 0}}}hft(t,i,e,s,n){const r=s.yP(e),o=i.Lut,h=o.fft(i.ilt),a=o.vdt(i.ilt);let u=i.ilt.lB,c=i.ilt.dB;h&&(u=x.min(u,x.max(0,o.wdt.Cn-.05))),a&&(c=x.max(c,o.wdt.jn));const l=Mo.RP(u,c).yP(s);if(0===r.V)return void this.gft(e,l,u,n);if(h||this.dft.V>0){const t=l.Sn(Mo.RP(u,r.Cn(0)));this._ft(t)}const d=r._P().Sn(Mo.RP(r.Cn(0),r.jn(r.V-1)));if(this._ft(d),a){const t=l.Sn(Mo.RP(r.jn(r.V-1),c));this._ft(t)}if(this.dft.V>0){const t=this.dft.yP(r);this._ft(t),this.dft=Mo.PP()}const f=o.eat,g=Ko(i.ilt)?void 0:f.Ddt(i.ilt);var _;const v=null!=(_=null==t?void 0:t.ilt)?_:this.vft(g)?g:void 0;if(v){const t=this.zut.rdt(v.lB,v.dB);if(t.length>0){const i=Mo.RP(t[t.length-1].ndt,r.Cn(0));this._ft(i)}}const w=Ko(i.ilt)?void 0:f.Edt(i.ilt);if(w&&this.vft(w)){const t=this.zut.rdt(w.lB,w.dB);if(t.length>0){const i=Mo.RP(r.jn(r.V-1),t[0].sdt);this._ft(i)}}}gft(t,i,e,s){let n=i;0===this.dft.V&&(this.dft=Mo.RP(t.jn(t.V-1),e)),0===n.V&&void 0!==s&&(n=Mo.OP(s)),this.dft=this.dft.pP(n),this.zut.hdt(this.dft)}vft(t){return!!t&&this.zut.rdt(t.lB,t.dB).length>0}_ft(t){const i=t.yP(this.ift.TE);for(let t=0;t<i.V;t++)i.Cn(t)!==i.jn(t)&&this.wft.i0(i.Cn(t),i.jn(t))}mft(t,i){throw new gQ(t,i)}mct(){if(this.dft.V>0)return;var t;const i=this.ift.Blt.pP(null!=(t=this.ift.J$.fP().CP(this.ift.Qlt))?t:Mo.PP());this.zut.Jlt(i),this.pft&&!this.Aft(this.pft)&&(this.pft=void 0),this.yo(new fQ(this.zut.Ht.Fut,this.zut.act()))}pct(){return this.Jdt&&this.Jdt.Lut.vdt(this.Jdt.ilt)?(this.wft.I3(),!0):(this.pft&&this.pft.Lut.vdt(this.pft.ilt)&&this.Aft(this.pft)&&this.wft.I3(),!!this.ift.Ult)}Aft(t){return this.zut.$lt.MP(t.yft,t.bft)}Mft(t,i,e){(!this.pft||this.pft.ilt.dB<t.ilt.dB)&&(this.pft=Ei({},t,{yft:i,bft:e}))}eft(){const t=this.ift.Qlt;return t}async ddt(t,i){yi(i);const e=this.Jdt?this.Jdt.Lut:void 0,s=await this.$dt.cdt(t,e,i);if(s)return s}async sft(t,i){const e={stack:[],error:void 0,hasError:!1};try{const s=t.Lut,n=s.eat,r=Ko(t.ilt)?n.Ndt(t.ilt):t.ilt,o=s.Sft.Tft(),h=n.Nft(r);if(h&&h.getTime()<=o.getTime())return this.mft(uU.Zat,"Segment is not available.");const a=n.Ift(r).getTime()-o.getTime();0;const u=Ne(e,Wt.Iy([i]),!1);await Promise.race([Dt(a,u.ly),s.zy(ea.Nut,u.ly)])}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}async rft(t,i,e){void 0===e&&(e=0),yi(i);const s=t.Dft;if(!s)return this.H4;try{if(!t.Eft){const e=await this.kft.rlt(s,i);t.Eft=e.rI}}catch(s){if(V(s),Cb(s)){if(2===e)return t.ydt=!0,this.mft(uU.iut,"Could not fetch the initializer.");const s=x.min(this.lft.minimumBackoff*2**e,this.lft.maximumBackoff);return await Dt(s,i),this.rft(t,i,e+1)}throw new qi(vt.MEDIA_LOAD_ERROR,s.message,s)}yi(i);try{this.tft(t.Eft)&&await this.wft.$ht(t.Eft,t,i)}catch(t){if(V(t),Cb(t))return this.mft(uU.iut,"Could not append the initializer.");throw new qi(vt.MEDIA_DECODE_ERROR,t.message,t)}return t.Eft}async elt(t,i,e){void 0===e&&(e=0);try{return yi(i),await this.kft.elt(t,i)}catch(s){if(V(s),s instanceof zU){if(function(t){return t instanceof wt}(s.cause))return this.Lft(new zU(s,t.ilt,t.Lut),e),this.mft(uU.Zat,"Could not append the segment.");if(2===e)return t.Lut.ydt=!0,this.Lft(s,e),this.mft(uU.Zat,"Could not fetch the segment.");const n=x.min(this.lft.minimumBackoff*2**e,this.lft.maximumBackoff);return await Dt(n,i),await this.elt(t,i,e+1)}throw new qi(vt.MEDIA_LOAD_ERROR,s.message,s)}}async nft(t,i,e){const s=this.zut.rdt(i.lB,i.dB),n=this.ift.Blt.CP(t);let r=Mo.PP();for(const t of s){yi(e);const i=t.sdt,s=t.ndt,o=n&&n.SP(i,s)?x.max(i,n.jn(0)):i,h=s;o<h&&(r=r.pP(Mo.RP(o,h)))}for(let t=0;t<r.V;t++)await this.wft.xft(r.Cn(t),r.jn(t),e);this.mct()}async oft(t,i){try{yi(i);const e=await this.wft.Cft(t.nlt,t.ilt,t.Lut,i);return this.jft(t,e.yft,e.bft),this.Mft(t,e.yft,e.bft),t}catch(i){if(V(i),Cb(i))return this.Lft(new zU(i,t.ilt,t.Lut),0),this.mft(uU.Zat,"Could not append the segment.");if(jx(i)&&this.wft.JK())return this.mft(uU.Xat,"Buffer is full. Could not reduce the buffer.");throw new qi(vt.MEDIA_DECODE_ERROR,i.message,i)}}jft(t,i,e){const s=t.Lut,n=t.ilt;this.fct(n,s,i,e)}fct(t,i,e,s){this.zut.fct({dct:i.o,uct:t.lB,cct:t.dB,sdt:e,ndt:s,adt:!0}),this.wft.e0(e,s)}O3(t,i,e){const s=Mo.RP(t,i);e?this.zut.i0(s,e.o):this.zut.hdt(s),this.wft.i0(t,i)}cft(t){const i=Mo.RP(t.ilt.lB,t.ilt.dB);t.Lut?this.zut.i0(i,t.Lut.o):this.zut.hdt(i)}Lft(t,i){const e=t.klt,s=this.zut.Ht.Fut,n=this.zut.Ht.ga,r=t.xlt.Lut&&t.xlt.Lut.ga,o=new dQ(e,t.message,s,n,r,i);this.yo(o)}tr(){this.H4=void 0,this.Jdt=void 0}gn(){this.tr(),this.pft=void 0,this.kft.fn(_Q,this.Ds),this.kft.gn()}constructor(t,i,e,s,n,r,o,h,a){super(),this.vct=t,this.zut=i,this.ift=e,this.$dt=s,this.kft=n,this.wft=r,this.Vdt=o,this.lft=h,this.SV=a,this.Kdt=void 0,this.H4=void 0,this.Jdt=void 0,this.pft=void 0,this.aft=0,this.uft=0,this.dft=Mo.PP(),this.kft.yn(_Q,this.Ds)}};function wQ(t){const i=t.Lut,e=i.eat,s=Ko(t.ilt)?e.Ndt(t.ilt):t.ilt;return e.Oft(s,i.Sft.Tft())}var mQ=0,pQ=class{xst(t){const i=mQ++,e=this.zlt.E3,s=new YU(t),n=this.Rft&&ou(e),r=new mU(e,n),o=new QU(this.zlt,this.C8,this.X3,this.UG),h=lQ.xst(i,this.zlt,s,this.UG,r,this.OQ,this.slt,this.Ydt,this.Pdt,this.Vdt),a=function(t){switch(t){case Ri.SI:return Pc.SI;case Ri.NI:return Pc.NI;case Ri.ON:return Pc.ON;case Ri.II:return Pc.II;default:return Pc.dI}}(e),u=function(t,i,e,s){const n=new TU(s),r=new BU(t,i,e);return new NU([n,r])}(new _U(this.OQ,a),r,n,this.slt),c=new vQ(i,s,o,h,u,this.zlt,this.Vdt,this.lft,this.SV);return new gU(i,t.jlt,s,c,this.C8)}Pft(t,i){const e={Fut:Ri.ON,jlt:i,lct:i.lct,ga:t.ga};return this.xst(e)}constructor(t,i,e,s,n,r,o,h,a,u,c,l){this.zlt=t,this.C8=i,this.X3=e,this.OQ=s,this.UG=n,this.Rft=r,this.slt=o,this.Ydt=h,this.Pdt=a,this.Vdt=u,this.lft=c,this.SV=l}};Qi(),r();var AQ=class{N$(t){return this.Qht.N$(t)}D$(t){return this.Qht.D$(t)}constructor(t){this.Qht=t}},yQ=class{N$(t){return!0}D$(t){return Promise.resolve(void 0)}};r(),r();var th=class extends Dc{ma(){return new bQ(this.UL.map((t=>t.ga)))}constructor(t,i){super(hs.mL),this.UL=t||[],this.Ht=i}},bQ=class extends Jr{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}};r();var MQ=class extends Va{ma(){return new TQ(this.quality.ga)}constructor(t){super(hs.QUALITY_UNAVAILABLE),this.quality=t}},TQ=class extends du{constructor(t){super("qualityunavailable"),this.quality=t}};r();var SQ=class extends Jr{constructor(){super(hs.NO_QUALITY)}};function NQ(t){return{FY:t.FY,Qp:t.cht,Ti:IQ(t)?t.Ti:0,YA:IQ(t)?Ri.NI:Ri.SI,ji:IQ(t)?t.ji:0}}function IQ(t){const i=t;return void 0!==i.Ti&&void 0!==i.ji}r(),Qi();var DQ=0,EQ=class extends tu{get BL(){return this.ict.zft.map(kQ).filter($t)}Bft(t){for(const i of t)i.yn("update",this.Uft),this.qz.Kz(i)}Qft(t){if(!this.qz.Jz(t))return;t.kQ();const i=this.Fft();if(this.Yft&&Qa(this.Yft,t)){const t=this.Yft.filter((t=>t.lot));0===t.length&&i.length>0?this.QL=i:this.QL=t}else this.QL=i;this.yo(new MQ(t))}Vft(t){if(!this.qz.Jz(t))return;const i=this.Fft();t.EQ(),this.Yft&&!function(t,i){return tw(t,i,((t,i)=>t===i))}(this.Yft,i)||(this.QL=this.Fft())}Fft(){return this.qz.AL.filter((t=>t.lot))}get PL(){return this.Gft}Wft(t){this.Gft=t.Lut,this.yo(t)}get jlt(){return this.ict}get Rt(){return this.He}set Rt(t){this.nB(t)}get ga(){return this.Za||(this.Za=go(this)),this.Za}get Zft(){return this.Hft}set Zft(t){this.Hft=t}get o(){return this.aS}get zL(){return this.iB}get Lt(){return this._6}get gs(){return this.$M}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,this.yo(new su(this)))}get UI(){return this.Rt?"enabled":"disabled"}get QL(){return this.Yft}set QL(t){let i;if(t){const e=this.PL?NQ(this.PL):void 0;i=t.filter((t=>t.lot&&Fe.Ys.Pp(e,NQ(t))))}else i=this.Fft();0!==i.length?(this.Yft=t&&this.qz.Jz(t)?t:void 0,this.Xft=this.qft(this.Yft),this.yo(new th(t,this))):this.yo(new SQ)}get Kft(){return this.Xft}qft(t){if(!t||0===t.length)return;const i=[];for(const e of this.lct)for(const s of t)s===e.Lut&&s.lot&&i.push(e);return i}get UL(){return this.qz}get lct(){return this.Jft}$ft(t){this.tgt.push(t),this.Jft.push(...t.lct);const i=t.lct.map((t=>t.Lut));this.Bft(i)}get Fut(){return this.igt}get egt(){return this.tgt}get sgt(){return this.lct.every((t=>t.sgt))}nB(t){this.He=t,this.Hft&&(t?this.Hft.EQ(this):this.Hft.kQ(this))}ngt(t){this.He=t,this.rgt!==t&&(this.rgt=t,this.yo(new dM(this)))}gn(){for(const t of this.qz.AL)t.fn("update",this.Uft);this.qz.tr()}constructor(t,i,e="alternative"){super(),this.Gft=void 0,this.He=!1,this.Za=void 0,this.Hft=void 0,this.aS="",this.rgt=!1,this.qz=new ki,this.Jft=[],this.Yft=void 0,this.Xft=void 0,this.Uft=()=>this.yo(new su(this)),this.tgt=[],this.ict=t,this.aS=String(DQ++),this.iB=ft(),this._6=e,this.$M=t.uet,this.eB=t.kh,this.igt=t.YA,this.Jft=t.lct,this.Bft(i)}};function kQ(t){if("urn:mpeg:dash:role:2011"===t.A8)return LQ(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.A8){if("1"===t.zD)return Js.xL;if("2"===t.zD)return Js.jL}}function LQ(t){if(void 0!==(null==t?void 0:t.zD))switch(t.zD){case"caption":return Js.LL;case"sign":return Js.CL;case"description":return Js.xL;case"enhanced-audio-intelligibility":return Js.jL;default:return}}var xQ=class t extends qI{get ogt(){return this.hgt}set ogt(t){this.hgt=t}get Rt(){for(const t of this.Z.AL)if(t.UI!==ua.Ch)return!0;return!1}get uV(){const t=this.C8.LE;return this.Blt.CP(t,.01)}get agt(){return this.ogt&&this.ugt[this.ogt.zL]?this.ugt[this.ogt.zL]:Mo.PP()}get cgt(){return this.ogt&&this.lgt[this.ogt.zL]?this.lgt[this.ogt.zL]:Mo.PP()}get Ylt(){return new Mo([0,1/0])}get TE(){return this.agt}get J$(){return this.dgt?this.dgt.Put.J$.Vlt:Mo.PP()}get Blt(){return cU(this.TE,this.J$).mP(2*this.fgt)}get Cn(){return this.ggt?this.ggt.wdt.Cn:NaN}get jn(){return this.ggt?this.ggt.wdt.jn:NaN}get OE(){const t=this.jn;return!!t&&this.C8.LE>=t}get fgt(){var t;const i=this._gt();if(!i)return.04;var e;return 1/(null!=(e=this.ogt&&(null==i||null==(t=i.vgt)?void 0:t.BB()))?e:25)}get Ti(){return this.fT}get E3(){return Ri.ON}get $E(){return this.jG}set $E(t){this.jG=t}get rk(){return this.cgt}get _k(){if(!this.ogt)return Mo.OP(0);const t=this.wgt(this.ogt),i=null==t?void 0:t.mgt,e=null==t?void 0:t.pgt;if(void 0===e||void 0===i)return Mo.OP(0);const s=x.max(i,this.C8.LE);return new Mo([e,s]).fP()}get ji(){return this.dT}I3(){}Flt(){return this.Blt.gr(this.jn)}async Cft(t,i,e,s){const n=t.YA===Me.v$?t.rI.Oat:await t.rI.FN(s),r=this.findTrackForRepresentation(e),o=this.ugt[r.zL],h=i.lB,a=i.dB,u=new Mo([h,a]);o||(this.ugt[r.zL]=Mo.PP(),this.lgt[r.zL]=Mo.PP()),this.Wht(s);const c=this.iat(new T(n),i,e,r);for(const t of c)r.RQ(t);return this.ugt[r.zL]=this.ugt[r.zL].pP(u),{yft:h,bft:a}}Wht(t){const i=Cx(this.C8.LE,void 0,void 0,this.TE,this.UG.ZK,this.UG.QK);for(const[e,s]of i)X(this.xft(e,s,t))}$ht(t,i,e){return this.Agt.$ht(t,i,e)}iat(t,i,e,s){return this.Agt.iat(t,i,e,s)}xft(t,i,e){const s=t,n=i;let r=new Mo([t,i]);for(const t of this.Z.AL){const i=[];for(const e of t.L.AL)e.lB>=s&&e.dB<=n?i.push(e):r=r.yP(new Mo([e.lB,e.dB]));for(const e of i)t.SQ(e);const e=this.ugt[t.zL];e&&(this.ugt[t.zL]=e.yP(r))}return Promise.resolve()}i0(t,i){}e0(t,i){}JK(){return!1}EQ(t){const i=this.ygt(t);if(i&&this.ogt!==i){this.ogt=i;for(const t of this.Z.AL)t!==i&&(t.UI=ua.Ch);if(this.Agt.tr(),this.dgt&&(this.dgt.gn(),this.dgt=void 0),this.ogt){const t=this.wgt(this.ogt);this.dgt=new pQ(this,this.C8,this.C8,this.OQ,this.UG,!1,this.slt,void 0,void 0,new yQ,wS,void 0).Pft(this.ogt,t),this.dgt.yn(Xi.ua,this.bgt),this.dgt.Cn(uU.Uat)}}}kQ(t){if(this.ogt===t){const i=this.ygt(t);i&&this.ogt===i&&(this.ogt=void 0),this.dgt&&(this.dgt.gn(),this.dgt=void 0)}}async $n(t){await this.tr(),this.ggt=t,this.Mgt(t)}Tgt(t){const i=function(t){const i=t.lct&&t.lct.length>0&&t.lct[0],e=i&&BI(i.cht),s=BI(t.cht),n=t.gX===zo.APPLICATION_TTML_XML;return e||s||n?El.TTML:t.gX===zo.TEXT_VTT||YI(t.gX,t.cht)?El.WEBVTT:El.DEFAULT}(t);if(!i)throw new b("Unknown TextTrack type for Representation");const e=t.Sgt.concat(t.zft);return this.Ngt(function(t){return Qa(t.filter((t=>"urn:mpeg:dash:role:2011"===t.A8)).map((t=>t.zD)).filter($t),"caption")?z.yQ:z.AQ}(e),t.kh,t.uet,!1,i,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.A8)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.zD)))}(t.Sgt),t.zft.map(LQ).filter($t))}Mgt(t){for(const i of t.Igt){const t=this.Tgt(i);this.Dgt.set(t.zL,i),t.fk=Ma.LOADED,this.tt(t)}}it(t){this.Dgt.delete(t.zL),super.it(t)}Ngt(t,i,e,s,n,r,o,h){var a;const u=r.lct.reduce(((t,i)=>t||i.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.CQ.Wk(t,l,i,e,s,n,o,h)}async tr(){await super.tr(),this.dgt&&(await this.dgt.tr(uU.aut),this.dgt.fn(Xi.ua,this.bgt),this.dgt=void 0),this.ggt=void 0,this.ugt={},this.lgt={}}Egt(){this.ugt={},this.lgt={}}findTrackForRepresentation(i){for(const e of this.Z.AL){const s=this.wgt(e);if(s&&t.kgt(s)===i)return e}}ygt(t){return dl(this.Z.AL,(i=>t.zL===i.zL))}wgt(t){return this.Dgt.get(t.zL)}_gt(){if(!this.ogt)return;const i=this.wgt(this.ogt);return i?t.kgt(i):void 0}static kgt(t){return t.lct&&t.lct.length>0?t.lct[0]:void 0}gn(){for(const t of this.Z.AL)this.CQ.BQ(t);return super.gn()}constructor(t,i,e,s,n,r){super(),this.fT=0,this.jG=1,this.dgt=void 0,this.ugt={},this.lgt={},this.dT=0,this.Dgt=gc(),this.bgt=t=>{0},this.C8=t,this.OQ=i,this.UG=e,this.Agt=s,this.slt=n,this.CQ=r}},CQ=class{get nt(){return this.Ul}async jQ(t){if(t.YA!==Ri.ON)return;const i=function(t,i,e){return BI(i)||t===zo.APPLICATION_TTML_XML||t===zo.TEXT_VTT?new rU(e):YI(t,i)?new hU:void 0}(t.gX,t.cht,this.sat);if(i){const e=this.Lgt(i);return this.xgt(e),await e.$n(t),e}}Lgt(t){return new xQ(this.C8,this.OQ,this.UG,t,this.slt,this.CQ)}xgt(t){this.Cgt.push(t),this.Ul.$Y(t.Z)}async tr(){for(const t of this.Cgt.slice())await t.tr();nt(this.Cgt),this.Ul.tr()}async gn(){for(const t of this.Cgt)await t.gn();nt(this.Cgt),this.Ul.gn()}constructor(t,i,e,s,n,r){this.Cgt=[],this.Ul=new BE([]),this.C8=t,this.OQ=i,this.UG=e,this.slt=s,this.CQ=n,this.sat=r}};r();var jQ=class extends Jr{constructor(t){super(Zi.gb),this.error=t}};bs(),r();var nc=function(t){return t.QQ="static",t.FQ="dynamic",t}({});r(),r();var OQ=function(t){return t.jgt="Ogt",t}({}),RQ=class extends Jr{constructor(){super(OQ.jgt)}};Qi(),r(),r();var PQ=class extends Jr{constructor(t,i){super(Zi.Ab),this.representation=t,this.previousRepresentation=i}};r(),r(),r();var zQ=function(t){return t[t.Rgt=0]="Rgt",t[t.Pgt=1]="Pgt",t[t.zgt=2]="zgt",t[t.Bgt=3]="Bgt",t[t.Ugt=4]="Ugt",t[t.Qgt=5]="Qgt",t}({}),Vu=function(t){return t[t.Fgt=0]="Fgt",t[t.Ygt=1]="Ygt",t[t.Vgt=2]="Vgt",t[t.Ggt=3]="Ggt",t}({});function BQ(t,i,e){return e===zQ.Rgt?e:i!==Vu.Fgt&&i!==Vu.Ygt||e!==zQ.Pgt&&e!==zQ.zgt?t?i===Vu.Vgt?zQ.Ugt:i===Vu.Ggt?zQ.Bgt:zQ.Rgt:zQ.Qgt:zQ.zgt}function UQ(t,i,e,s){const n={byte:e};let r=zQ.Pgt;const o=[],h=31&HC(i,n,s);n.byte+=1;for(let e=0;e<h;e+=1){const h=HC(i,n,s),a=4&h,u=3&h;r=BQ(Boolean(a),u,r);const c=HC(i,n,s),l=HC(i,n,s);o.push({Wgt:t,mR:-1,Zgt:!e,Hgt:Boolean(a),YA:u,Xgt:r,qgt:c,Kgt:l})}return o}function QQ(t,i,e){const s=HC(t,i,e);if(!j(s))return String.fromCharCode(s)}function FQ(t){const i=t.c2,e={byte:t.a2},s=t.u2,n=HC(i,e,s);if(255===n&&(e.byte+=1),181!==n)return;const r=XC(i,e);if(47!==r&&49!==r)return;if(49===r){const t=function(t,i,e){let s="",n=e;for(;n>0;)n-=1,s+=QQ(t,i);return s}(i,e,4);if("GA94"!==t)return}if(3!==HC(i,e,s))return;47===r&&(e.byte+=1);const o=t;return o.Jgt=e.byte,o}function YQ(t){return 4===t.o2}function VQ(t){const i=t.filter(YQ).map(FQ).filter($t),e=[];for(const t of i)e.push(...UQ(t.n2,t.c2,t.Jgt,t.u2));return e}r();var GQ="und";function WQ(t){if(t===GQ)return;const i=t.toLowerCase();for(const t of ZQ)if(t[1]===i||t[2]===i||t["2T"]===i||t["2B"]===i||t[3]===i)return t}var ZQ=[{l:"Abkhaz",lh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",lh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",lh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",lh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",lh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",lh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",lh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",lh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",lh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",lh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",lh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",lh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",lh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",lh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",lh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",lh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",lh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",lh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",lh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",lh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",lh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",lh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",lh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",lh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",lh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",lh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",lh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",lh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",lh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",lh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",lh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",lh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",lh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",lh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",lh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",lh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",lh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",lh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",lh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",lh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",lh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",lh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",lh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",lh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",lh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",lh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",lh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",lh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",lh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",lh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",lh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",lh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",lh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",lh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",lh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",lh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",lh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",lh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",lh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",lh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",lh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",lh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",lh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",lh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",lh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",lh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",lh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",lh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",lh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",lh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",lh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",lh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",lh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",lh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",lh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",lh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",lh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",lh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",lh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",lh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",lh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",lh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",lh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",lh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",lh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",lh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",lh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",lh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",lh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",lh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",lh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",lh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",lh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",lh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",lh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",lh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",lh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",lh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",lh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",lh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",lh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",lh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",lh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",lh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",lh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",lh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",lh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",lh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",lh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",lh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",lh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",lh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",lh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",lh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",lh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",lh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",lh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",lh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",lh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",lh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",lh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",lh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",lh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",lh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",lh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",lh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",lh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",lh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",lh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",lh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",lh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",lh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",lh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",lh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",lh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",lh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",lh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",lh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",lh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",lh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",lh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",lh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",lh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",lh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",lh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",lh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",lh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",lh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",lh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",lh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",lh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",lh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",lh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",lh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",lh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",lh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",lh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",lh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",lh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",lh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",lh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",lh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",lh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",lh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",lh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",lh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",lh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",lh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",lh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",lh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",lh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",lh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",lh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",lh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",lh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",lh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",lh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",lh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",lh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",lh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",lh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",lh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",lh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",lh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];r();function HQ(t){var i;const e=null!=(i=function(t){const i=t.V1,e=new qC;return e.X1(i,0,i.byteLength),oj(e).D2}(t))?i:24;return t.$gt/e}function XQ(t){return t.YA===Rt.mC}function qQ(t,i,e,s,n){const r=function(t,i,e,s){const n=e.$gt,r=D.fromNumber(t.LR||0),o=s.Kz(H.tU(r,n));return{t_t:s.BB(),i_t:s,e_t:o,s_t:s}}(t,0,e,s),o=H.iU(t.ct||0,e.$gt),h=t.lj||0,a=!(65536&h)&&1!==(h>>24&3);let u;const c=Al(n),l=new da;for(;l.tc<c.byteLength;){const t=al(c,l);if((31&Vw(c,l,1))===ej.w2){const i=new qC;i.X1(n,l.tc-1,l.tc+t-1);const e=new rj(i),s=$C(r.e_t,e);u=u||[],u.push(...VQ(s))}l.Gb(t-1)}return Ei({},r,{ct:o.BB(),n_t:o,r_t:r.e_t.BB(),o_t:r.t_t,h_t:a,a_t:u,u_t:!1,c_t:!1})}function KQ(t){return{Fj:t.nj.Fj,$gt:t.zj.nj.xj}}function JQ(t){return t.YA===Rt.kx}r(),r(),r(),r(),r(),r(),r(),r();var $Q=class{DB(t){return this.met===t.met&&this.oet===t.oet}constructor(t,i){this.met=t,this.oet=i}};r();var tF=class{get Cet(){return this.l_t}get Det(){return[this]}get Let(){return this.l$}get let(){return this.d_t}get _et(){return new $Q(this.let.met,this.let.oet+this.Cet.length-1)}f_t(t){this.l_t+=t}g_t(t){for(const i of t)this.f_t(i)}constructor(t,i){this.l$=t,this.d_t=i,this.l_t=""}};function iF(t,i){return t===i||t.Cet===i.Cet&&t.let.DB(i.let)&&ns(t.Let,i.Let)}function eF(t,i){return t===i||t.let.DB(i.let)&&t._et.DB(i._et)&&tw(t.Det,i.Det,iF)}var sF=class extends hN{EB(t){return tw(this.U,t.U,eF)}constructor(t,i,e){super(t,i,e,!1)}};r();var nF=class{__t(t){return t.KU(this)}v_t(t){return Ms(t,((t,i)=>t.KU(this,i)))}w_t(t,i){return new rF(t,i).m_t()}},rF=class{m_t(){if(this.p_t)return[];for(let t=0;t<this.met.length;t++)this.A_t(t);return this.y_t(),this.b_t}M_t(t){this.T_t=new tF(tz,new $Q(this.S_t,t))}y_t(){this.T_t&&(this.b_t.push(this.T_t),this.T_t=null)}A_t(t){const i=this.met[t];oF(i)?this.T_t&&this.y_t():(this.T_t||this.M_t(t),this.T_t.f_t(i))}get p_t(){return this.met.every(oF)}constructor(t,i){this.met=t,this.S_t=i,this.b_t=[],this.T_t=null}};function oF(t){return null==t}var hF=class{static N_t(t,i,e){if(i>=e)return;const s=Ms(t,((t,i)=>new rF(t.map((t=>t?t.I_t():null)),i).m_t()));return 0!==s.length?new sF(i,e,s):void 0}},aF="black",Qc="white";r(),r();var uF=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,i)=>(t[i[0]]=i[1],t)),{}),cF=class{D_t(t){for(let i=0;i<mn;i++)t&&(this.E_t[i]=t.E_t[i])}DB(t){for(let i=0;i<mn;i++)if(this.E_t[i]!==t.E_t[i])return!1;return!0}k_t(){for(let t=0;t<mn;t++)if(null!==this.E_t[t])return!1;return!0}L_t(t){this.x_t!==t&&(this.x_t=t),this.x_t<0?this.x_t=0:this.x_t>mn&&(this.x_t=31)}C_t(t){const i=this.x_t+t;this.L_t(i)}j_t(){this.C_t(-1),this.E_t[this.x_t]=null}f_t(t){t>=144&&this.j_t();const i=function(t){return uF[t]?String.fromCharCode(uF[t]):String.fromCharCode(t)}(t);this.addParsedChar(i)}addParsedChar(t){this.x_t>=mn||(32===Number(t)?(this.E_t[this.x_t]=this.O_t?"</i>":"<i>",this.O_t=!this.O_t):this.E_t[this.x_t]=t,this.C_t(1))}R_t(t){for(let i=t;i<mn;i++)this.E_t[i]=null}eM(){this.R_t(0),this.x_t=0}P_t(){this.R_t(this.x_t)}z_t(t,i){const e=this.E_t;let s=null;for(let n=0;n<mn;n++){const r=e[n];null===r?s=null:(s||(s={Oh:n,Vh:t,ji:0,Ti:1,E_t:[[]]},i.push(s)),s.E_t[0].push(r),s.ji++)}}KU(t,i){return t.w_t(this.E_t,i)}constructor(){this.E_t=[],this.x_t=0;for(let t=0;t<mn;t++)this.E_t.push(null);this.O_t=!1}};Qi();var lF=class{B_t(t,i){const e="CC"+(this.U_t<<1|this.Q_t+1);if(t>=i)return null;const s=(new nF).v_t(this.F_t.slice(1));return 0===s.length?null:{uB:new sF(t,i,s),YN:e,Y_t:this.U_t<<1|this.Q_t+1}}tr(){this.V_t(),this.G_t=1}W_t(){return this.G_t}Z_t(t){this.G_t=t}L_t(t){this.F_t[this.G_t].L_t(t)}C_t(t){this.F_t[this.G_t].C_t(t)}H_t(){return this.X_t}q_t(t){this.X_t=t}f_t(t,i){if(i<32||i>127)return;let e="";switch(t){case 0:e=void 0!==gF[i]?gF[i]:String.fromCharCode(i);break;case 1:e=_F[i];break;case 2:this.K_t(),e=vF[i];break;case 3:this.K_t(),e=wF[i]}e&&this.F_t[this.G_t].addParsedChar(e)}K_t(){this.F_t[this.G_t].j_t()}J_t(t,i,e){if(t>=i)for(let s=e-1;s>=0;s--)this.F_t[t+s]=this.F_t[i+s];else for(let s=0;s<e;s++)this.F_t[t+s]=this.F_t[i+s]}$_t(t,i){for(let e=0;e<=i;e++)this.F_t[t+e]=new cF}V_t(){this.$_t(0,dF)}tvt(){this.G_t=this.X_t>0?this.X_t:0,this.V_t()}ivt(t){this.evt=t}svt(t){this.nvt=t}rvt(t){this.ovt=t}avt(t){this.uvt=t}constructor(t,i){this.F_t=new Array(dF+1);for(let t=0;t<=dF;t++)this.F_t[t]=new cF;this.G_t=1,this.X_t=0,this.U_t=t,this.Q_t=i,this.evt=!1,this.nvt=!1,this.ovt=Qc,this.uvt=aF,this.tr()}},dF=15,fF=function(t){return t[t.cvt=0]="cvt",t[t.lvt=1]="lvt",t[t.dvt=2]="dvt",t[t.fvt=3]="fvt",t}({}),gF={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},_F={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},vF={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},wF={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"};Qi();var fl=class{tr(){this.gvt=!0,this._vt=0,this.Zp=0,this.vvt=this.wvt,this.mvt=void 0,this.wvt.tr(),this.pvt.tr(),this.Avt.tr()}yvt(t,i){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|i>>5&1]}bvt(t,i){const e=this.yvt(t,i),s=(30&i)>>1;let n=Qc,r=!1;s<7?n=AF[s]:7===s&&(r=!0);const o=1==(1&i);if(4===this.Zp)return;const h=this.vvt;if(3===this.Zp&&e!==h.W_t()){const t=1+h.W_t()-h.H_t(),i=1+e-h.H_t();h.J_t(i,t,h.H_t()),h.$_t(0,i-1),h.$_t(e+1,dF-e)}h.Z_t(e);const a=ez[t<<1&14|i>>5&1]-1;if(a<0)return;const u=function(t,i){const e=i>95?i-96:i-64;return{ret:iz[e].ret,net:iz[e].net,oet:iz[e].oet,met:t}}(a,i);h.L_t(u.oet),this.vvt.ivt(o),this.vvt.svt(r),this.vvt.rvt(n),this.vvt.avt(aF)}Mvt(t,i){this.vvt.ivt(!1),this.vvt.svt(!1),this.vvt.rvt(Qc);const e=this.Tvt(t,fF.cvt," ".charCodeAt(0));let s=Qc,n=!1;const r=1==(1&i);return s=AF[(14&i)>>1],"white_italics"===s&&(s="white",n=!0),this.vvt.ivt(r),this.vvt.svt(n),this.vvt.rvt(s),e}Tvt(t,i,e){if(this.vvt.f_t(i,e),2===this.Zp||3===this.Zp){const i=this.Svt(this.vvt,this._vt,t);return this._vt=t,i}return null}Svt(t,i,e){return this.gvt?null:2===this.Zp||3===this.Zp?t.B_t(e,e+10):t.B_t(i,e)}Nvt(t,i){let e=aF;0==(7&t)&&(e=pF[(14&i)>>1]),this.vvt.avt(e)}Ivt(t){const i=mF,e=t.Dvt,s=t.Evt;let n=null;switch(e){case i.RCL:this.kvt();break;case i.BS:this.Lvt();break;case i.AOD:case i.AON:case i.DER:break;case i.RU2:n=this.xvt(2,s);break;case i.RU3:n=this.xvt(3,s);break;case i.RU4:n=this.xvt(4,s);break;case i.FON:n=this.Cvt(s);break;case i.RDC:this.jvt(s);break;case i.TR:this.Ovt();break;case i.RTD:this.Rvt();break;case i.EDM:n=this.Pvt(s);break;case i.CR:n=this.zvt(s);break;case i.ENM:this.Bvt();break;case i.EOC:n=this.Uvt(s)}return n}zvt(t){const i=this.vvt;if(3!==this.Zp)return null;const e=this.Svt(i,this._vt,t),s=i.W_t()-i.H_t()+1;return i.J_t(s-1,s,i.H_t()),i.$_t(0,s-1),i.$_t(i.W_t(),dF-i.W_t()),this._vt=t,e}xvt(t,i){this.vvt=this.wvt;const e=this.vvt;let s=null;return 3!==this.Zp&&4!==this.Zp&&(s=this.Svt(e,this._vt,i),this.wvt.tvt(),this.pvt.tvt(),this.gvt=!1,e.Z_t(dF)),this.Zp=3,e.q_t(t),s}Cvt(t){return this.Tvt(t,fF.cvt," ".charCodeAt(0))}Pvt(t){const i=this.wvt;let e=null;return 4!==this.Zp&&(e=this.Svt(i,this._vt,t)),i.V_t(),this.gvt=!1,e}jvt(t){this.Zp=2,this.vvt=this.wvt,this.vvt.q_t(0),this._vt=t}Bvt(){this.pvt.V_t()}Uvt(t){let i=null;4!==this.Zp&&(i=this.Svt(this.wvt,this._vt,t));const e=this.pvt;return this.pvt=this.wvt,this.wvt=e,this.kvt(),this._vt=t,i}kvt(){this.Zp=1,this.vvt=this.pvt,this.vvt.q_t(0)}Lvt(){this.vvt.K_t()}Ovt(){this.Avt.tr(),this.gvt=!1,this.Rvt()}Rvt(){this.vvt=this.Avt,this.Zp=4}Qvt(t,i,e){return this.vvt.f_t(fF.cvt,i),this.Tvt(t,fF.cvt,e)}Fvt(t,i,e){const s=1&i?fF.fvt:fF.dvt;return this.Tvt(t,s,e)}Yvt(t){const i=t.Vvt,e=t.Dvt,s=t.Evt;if(this.mvt===(i<<8|e))return this.mvt=void 0,null;if(this.mvt=i<<8|e,this.Gvt(i,e))this.bvt(i,e);else{if(this.Wvt(i,e))return this.Mvt(s,e);if(this.Zvt(i,e))this.Nvt(i,e);else{if(this.Hvt(i,e))return this.Tvt(s,fF.lvt,e);if(this.Xvt(i,e))return this.Fvt(s,i,e);if(this.qvt(i,e))return this.Ivt(t);this.isTabOffset(i)&&this.vvt.C_t(e-32)}}return null}isTabOffset(t){return 23===t||31===t}qvt(t,i){return 20==(246&t)&&32==(240&i)}Gvt(t,i){return 16==(240&t)&&64==(192&i)}Wvt(t,i){return 17==(247&t)&&32==(240&i)}Zvt(t,i){return 16==(247&t)&&32==(240&i)||23==(247&t)&&45==(255&i)}Hvt(t,i){return 17==(247&t)&&48==(240&i)}Xvt(t,i){return 18==(246&t)&&32==(224&i)}static Kvt(t){return 16==(112&t)}constructor(t,i){this.Zp=0,this.Avt=new lF(t,i),this.wvt=new lF(t,i),this.pvt=new lF(t,i),this.vvt=this.wvt,this._vt=0,this.mvt=void 0,this.gvt=!1}},mF={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47},pF=["black","green","blue","cyan","red","yellow","magenta","black"],AF=["white","green","blue","cyan","red","yellow","magenta","white_italics"];r(),r(),r();var yF=class{I_t(){return this.Jvt}$vt(){return this.evt}twt(){return this.nvt}iwt(){return this.uvt}ewt(){return this.ovt}constructor(t,i,e,s,n){this.Jvt=t,this.evt=i,this.nvt=e,this.uvt=s,this.ovt=n}},bF=class{swt(t,i,e,s,n,r,o){this.IG=t,this.nwt=i,this.rwt=e,this.owt=s,this.hwt=n,this.awt=r,this.uwt=o}cwt(){this.lwt=[];for(let t=0;t<TF;t++)this.lwt.push(this.dwt())}dwt(){const t=[];for(let i=0;i<MF;i++)t.push(null);return t}fwt(t){this.gwt()&&(this.lwt[this.G_t][this._wt]=new yF(t,this.evt,this.nvt,this.uvt,this.ovt),this._wt++)}vwt(){this.gwt()&&(this._wt<=0&&this.G_t<=0||(this._wt<=0?(this._wt=this.uwt-1,this.G_t--):this._wt--,this.lwt[this.G_t][this._wt]=null))}gwt(){const t=this.G_t<this.awt&&this.G_t>=0,i=this._wt<this.uwt&&this._wt>=0;return t&&i}wwt(){return this.IG}mwt(t){let i=0;for(let e=t;e<TF;e++,i++)this.lwt[i]=this.lwt[e];for(let e=0;e<t;e++,i++)this.lwt[i]=this.dwt()}pwt(){if(this.G_t+1>=this.awt)return this.mwt(1),void(this._wt=0);this.G_t++,this._wt=0}Awt(){this.lwt[this.G_t]=this.dwt(),this._wt=0}B_t(t,i){if(this.yB>=t)return null;const e=hF.N_t(this.lwt,this.yB,t);return e?(this.ywt(t),{uB:e,YN:"svc"+i,Y_t:i}):null}bwt(t,i){this.G_t=t,this._wt=i}Mwt(t){this.uvt=t}Twt(t){this.ovt=t}Swt(t){this.evt=t}Nwt(t){this.nvt=t}Iwt(){this.G_t=0,this._wt=0,this.evt=!1,this.nvt=!1,this.ovt=Qc,this.uvt=aF}Dwt(t){this.Ewt=t}kwt(){this.IG=!0}be(){this.IG=!1}wh(){this.IG=!this.IG}ywt(t){this.yB=t}constructor(t){this.Lwt=t,this.IG=!1,this.hwt=!1,this.rwt=0,this.nwt=0,this.owt=0,this.awt=0,this.uwt=0,this.Ewt=2,this.lwt=[],this.yB=0,this.G_t=0,this._wt=0,this.nvt=!1,this.evt=!1,this.ovt=Qc,this.uvt=aF,this.cwt()}},MF=42,TF=15,SF=class{xwt(t){const i=t.Cwt();let e=i.zD;const s=i.Evt;if(e===kF){e=e<<16|t.Cwt().zD}return e>=0&&e<=31?this.Owt(e,s):e>=128&&e<=159?this.Rwt(t,e,s):(e>=4096&&e<=4127?this.Pwt(t,255&e):e>=4224&&e<=4255?this.zwt(t,255&e):e>=32&&e<=127?this.Bwt(e):e>=160&&e<=255?this.Uwt(e):e>=4128&&e<=4223?this.Qwt(255&e):e>=4256&&e<=4351&&this.Fwt(255&e),null)}Bwt(t){this.Ywt&&(127!==t?this.Ywt.fwt(String.fromCharCode(t)):this.Ywt.fwt("\u266a"))}Uwt(t){this.Ywt&&this.Ywt.fwt(String.fromCharCode(t))}Qwt(t){if(!this.Ywt)return;if(void 0===LF[t])return void this.Ywt.fwt("_");const i=LF[t];this.Ywt.fwt(i)}Fwt(t){this.Ywt&&(160===t?this.Ywt.fwt("[CC]"):this.Ywt.fwt("_"))}Owt(t,i){if(!this.Ywt)return null;const e=this.Ywt;let s=null;switch(t){case NF:e.vwt();break;case DF:e.wwt()&&(s=e.B_t(i,this.Vwt)),e.pwt();break;case EF:e.wwt()&&(s=e.B_t(i,this.Vwt)),e.Awt();break;case IF:e.wwt()&&(s=e.B_t(i,this.Vwt)),e.cwt(),e.bwt(0,0)}return s}Rwt(t,i,e){if(i>=128&&i<=135){const t=7&i;this.Gwt(t)}else{if(136===i){const i=t.Cwt().zD;return this.Wwt(i,e)}if(137===i){const i=t.Cwt().zD;this.Zwt(i,e)}else{if(138===i){const i=t.Cwt().zD;return this.Hwt(i,e)}if(139===i){const i=t.Cwt().zD;return this.Xwt(i,e)}if(140===i){const i=t.Cwt().zD;return this.qwt(i,e)}if(143===i)return this.tr(e);if(144===i)this.Kwt(t);else if(145===i)this.Jwt(t);else if(146===i)this.bwt(t);else if(151===i)this.$wt(t);else if(i>=152&&i<=159){const s=(15&i)-8;this.swt(t,s,e)}}}return null}Pwt(t,i){i>=8&&i<=15?t.ZC(1):i>=16&&i<=23?t.ZC(2):i>=24&&i<=31&&t.ZC(3)}zwt(t,i){i>=128&&i<=135?t.ZC(4):i>=136&&i<=143&&t.ZC(5)}Gwt(t){this.tmt[t]&&(this.Ywt=this.tmt[t])}*imt(t){for(let i=0;i<8;i++){1==(1&t)&&this.tmt[i]&&(yield i),t>>=1}}Wwt(t,i){let e=null;for(const s of this.imt(t)){const t=this.tmt[s];t.wwt()&&(e=t.B_t(i,this.Vwt)),t.cwt()}return e}Zwt(t,i){for(const e of this.imt(t)){const t=this.tmt[e];t.wwt()||t.ywt(i),t.kwt()}}Hwt(t,i){let e=null;for(const s of this.imt(t)){const t=this.tmt[s];t.wwt()&&(e=t.B_t(i,this.Vwt)),t.be()}return e}Xwt(t,i){let e=null;for(const s of this.imt(t)){const t=this.tmt[s];t.wwt()?e=t.B_t(i,this.Vwt):t.ywt(i),t.wh()}return e}qwt(t,i){let e=null;for(const s of this.imt(t)){const t=this.tmt[s];t.wwt()&&(e=t.B_t(i,this.Vwt)),this.tmt[s]=void 0}return e}tr(t){const i=this.qwt(255,t);return this.eM(),i}eM(){this.Ywt=void 0,this.tmt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}Kwt(t){t.ZC(1);const i=t.Cwt().zD;if(!this.Ywt)return;const e=(128&i)>0,s=(64&i)>0;this.Ywt.Nwt(e),this.Ywt.Swt(s)}Jwt(t){const i=t.Cwt().zD,e=t.Cwt().zD;if(t.ZC(1),!this.Ywt)return;const s=3&i,n=(12&i)>>2,r=(48&i)>>4,o=3&e,h=(12&e)>>2,a=(48&e)>>4,u=this.emt(r,n,s),c=this.emt(a,h,o);this.Ywt.Twt(u),this.Ywt.Mwt(c)}bwt(t){const i=t.Cwt().zD,e=t.Cwt().zD;if(!this.Ywt)return;const s=15&i,n=63&e;this.Ywt.bwt(s,n)}$wt(t){t.ZC(1),t.ZC(1);const i=t.Cwt().zD;if(t.ZC(1),!this.Ywt)return;const e=3&i;this.Ywt.Dwt(e)}swt(t,i,e){const s=void 0!==this.tmt[i];if(!s){const t=new bF(i);t.ywt(e),this.tmt[i]=t}const n=t.Cwt().zD,r=t.Cwt().zD,o=t.Cwt().zD,h=t.Cwt().zD,a=t.Cwt().zD,u=t.Cwt().zD,c=(32&n)>0,l=127&r,d=(128&r)>0,f=o,g=1+(15&h),_=(240&h)>>4,v=1+(63&a);s&&0===(7&u)||this.tmt[i].Iwt(),this.tmt[i].swt(c,l,f,_,d,g,v),this.Ywt=this.tmt[i]}emt(t,i,e){const s={0:0,1:0,2:1,3:1};return xF[s[t]<<2|s[i]<<1|s[e]]}constructor(t){this.Vwt=t,this.tmt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.Ywt=void 0}},NF=8,IF=12,DF=13,EF=14,kF=16,LF={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},xF=["black","blue","green","cyan","red","magenta","yellow","white"];r();var CF=class{smt(t){if(t.YA===Vu.Ggt){const i=63&t.zD;return this.nmt=2*i-1,void(this.omt=[])}if(this.omt&&(this.nmt>0&&(this.omt.push(t),this.nmt--),0===this.nmt)){const t=new jF(this.omt);this.hmt.push(t),this.omt=null,this.nmt=0}}amt(){return this.hmt}umt(){this.hmt=[]}eM(){this.hmt=[],this.omt=[],this.nmt=0}constructor(){this.hmt=[],this.omt=null,this.nmt=0}},jF=class{cmt(){return this.lmt<this.dmt.length}fmt(){return this.lmt}Cwt(){if(!this.cmt())throw new qi(vt.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.dmt[this.lmt++]}ZC(t){if(this.lmt+t>this.dmt.length)throw new qi(vt.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.lmt+=t}constructor(t){this.lmt=0,this.dmt=t}};Qi();var OF=class{eM(){this.gmt=0,this._mt=[],this.vmt=[],this.wmt.eM(),this.tr(),this.mmt.forEach((t=>{t.eM()}))}tr(){this.pmt=0,this.Amt=0,this.ymt.forEach((t=>{t.tr()}))}bmt(t,i){if(t.Hgt){const e=t.qgt,s=t.Kgt,n=t.YA;n===Vu.Fgt||n===Vu.Ygt?this._mt.push({Evt:i,YA:n,Vvt:e,Dvt:s,Mmt:this._mt.length}):this.Tmt&&(this.vmt.push({Evt:i,YA:n,zD:e,Mmt:this.vmt.length}),this.vmt.push({Evt:i,YA:Vu.Vgt,zD:s,Mmt:this.vmt.length}))}}_H(){const t=[];this._mt.sort(((t,i)=>t.Evt-i.Evt||t.Mmt-i.Mmt)),this.vmt.sort(((t,i)=>t.Evt-i.Evt||t.Mmt-i.Mmt));for(const i of this._mt){const e=this.Smt(i);e&&t.push(e)}for(const t of this.vmt)this.wmt.smt(t);const i=this.wmt.amt();for(const e of i){const i=this.Nmt(e);t.push(...i)}return this.wmt.umt(),this._mt=[],this.vmt=[],t}Smt(t){const i=t.YA;if(fl.Kvt(t.Vvt)){const e=t.Vvt>>3&1;0===i?this.pmt=e:this.Amt=e}const e="CC"+(i<<1|(i?this.Amt:this.pmt)+1),s=this.ymt.get(e);return 255===t.Vvt&&255===t.Dvt||!t.Vvt&&!t.Dvt||!this.Imt(t.Vvt)||!this.Imt(t.Dvt)?(++this.gmt>=45&&this.tr(),null):(this.gmt=0,t.Vvt&=127,t.Dvt&=127,t.Vvt||t.Dvt?fl.Kvt(t.Vvt)?s.Yvt(t):s.Qvt(t.Evt,t.Vvt,t.Dvt):null)}Nmt(t){const i=[];try{for(;t.cmt();){const e=t.Cwt().zD;let s=(224&e)>>5;const n=31&e;if(7===s&&0!==n){s=63&t.Cwt().zD}if(0!==s){if(!this.mmt.has(s)){const t=new SF(s);this.mmt.set(s,t)}const e=this.mmt.get(s),r=t.fmt();for(;t.fmt()-r<n;){const s=e.xwt(t);s&&i.push(s)}}}}catch(t){if(!(t instanceof qi&&t.code===vt.SUBTITLE_PARSE_ERROR))throw t}return i}Imt(t){let i=0;for(;t;)i^=1&t,t>>=1;return 1===i}constructor(){this.Tmt=!1,this._mt=[],this.vmt=[],this.wmt=new CF,this.gmt=0,this.ymt=rv({CC1:new fl(0,0),CC2:new fl(0,1),CC3:new fl(1,0),CC4:new fl(1,1)}),this.pmt=0,this.Amt=0,this.mmt=gc(),this.tr()}};r();var RF=class extends Jr{constructor(t,i){super("Dmt"),this.Y_t=t,this.uB=i}},PF=H.BU(.1),zF=class extends tu{Emt(t,i){this.kmt.bmt(t,i)}_H(){const t=this.kmt._H();for(const i of t)this.yo(new RF(i.Y_t,i.uB))}tr(){this.kmt.eM()}gn(){this.Bo(),this.kmt.eM()}constructor(){super(),this.kmt=new OF}},BF=class extends zF{Lmt(t,i,e,s){const n=this.xmt(t,s);this.Cmt(n,i,e),this._H()}xmt(t,i){const e=t.slice().sort(sz),s=this.jmt;if(0===s.length)return e;if(0===e.length)return s;let n;const r=s[0].het,o=s[s.length-1].het,h=e[0].het,a=s[0].Lut===e[0].Lut;if(o.qB(h).ZB().WB(H.BU(2.5*i))&&a)n=s.concat(e).sort(sz);else if(h.FB(r)){let t=0;for(;t<s.length&&s[t].het.WB(h);)t++;let i=!1,r=!1;for(let n=t,o=0;n<s.length&&o<e.length;n++,o++)UF(s[n],e[o])?i=!0:r=!0;const o=i&&!r,a=i&&r;!i&&r?n=s.concat(e).sort(sz):o?n=s.slice(0,t).concat(e):(n=e,a&&this.tr())}else n=e,this.tr();return n}Cmt(t,i,e){for(let s=0;s<t.length;s++){const n=t[s],r=n.het.BB();if(!e&&i-r<PF.BB())return void(this.jmt=t.slice(s));this.Emt(n,r)}this.jmt=[]}constructor(...t){super(...t),this.jmt=[]}};function UF(t,i){return t.het.DB(i.het)&&t.YA===i.YA&&t.qgt===i.qgt&&t.Kgt===i.Kgt}var QF=class extends qI{Omt(t){return this.Rmt.get(t)}Pmt(t){let i=this.Rmt.get(t.aet);return i||(i=this.zmt(t),this.Rmt.set(t.aet,i)),i}zmt(t){const i=[Js.LL],e=WQ(t.uet);let s,n=e?e.l:"";t.Bmt&&(n="easy "+n,i.push(Js.OL)),s=t.kh?"CC "+t.kh:n?"CC "+n:"CC"+t.aet;const r=this.CQ.Wk(z.yQ,s,s,t.uet,!1,El.CEA608,void 0,i);return this.tt(r),r}$ht(t){const i=pe.dj(Al(t));this.Umt=function(t){for(const i of t.Z){const t=KQ(i),e=i.zj.Hj.Kj.$j.iO;let s=dl(e,(t=>t.YA===Rt.Yx));if(!s){const t=e.filter((t=>t.YA===Rt.wC)),i=dl(t,(t=>{var i;return(null==(i=t.HO)?void 0:i.YA)===Rt.Yx}));i&&(s=i.HO)}if(!s)continue;const n=ZC(Al(s.OO.rI),new da),r=s.PO;return Ei({},t,{Fj:i.nj.Fj,OO:cm(s.OO.rI),ji:s.ji,Ti:s.Ti,uR:r&&r.uR,aR:r&&r.aR,a4:n.U1,Qmt:n.Q1,u4:n.F1,V1:n.V1[0],G1:n.G1[0]})}}(dl(i,JQ))}Cft(t,i,e,s,n,r){var o;if(!this.Umt)return;if(!j(this.Fmt)&&ce(this.Fmt,i,1e-5))return;j(this.Ymt)||ce(this.Ymt,i,.1)||this.Vmt.tr();const h=function(t,i,e,s,n){const r=[],o=i.filter(XQ),h=s(e);for(const i of o){const s=dl(i.Z,(t=>t.nj.Fj===e.Fj));if(!s)continue;const o=s.nj.dR||0,u=s.nj.fR||0;let c=s.MR?s.MR.MR:D.ZERO;var a;const l=i.wR+(null!=(a=s.nj.SR)?a:D.ZERO).toNumber();for(const a of s.bR){let s=l+(a.wR||0);for(const l of a.kR){const a=l.Kb||u,d=new qC;d.X1(t,s,s+a);const f=H.tU(c,e.$gt);d._Q=n(l,i,e,f,vi(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||o||h)}}}return r}(t,pe.dj(Al(t)),this.Umt,HQ,qQ);var a;const u=null!=(a=null==(o=rw(h,(t=>t._Q.ct)))?void 0:o._Q.ct)?a:0,c=function(t){const i=[];for(const e of t)e._Q.a_t&&i.push(...e._Q.a_t),delete e._Q.a_t;for(let t=0;t<i.length;t+=1)i[t].mR=t;return i}(h),l=H.BU(s),d=[];for(const t of c)d.push(Ei({},t,{Lut:n,het:t.Wgt.Kz(l)}));this.Vmt.Lmt(d,e,r,u),this.Fmt=i,this.Ymt=e}tr(){return this.Vmt.tr(),this.Rmt.forEach((t=>{t.gn(),this.it(t),this.CQ.BQ(t)})),this.Rmt.clear(),this.Umt=void 0,this.Fmt=NaN,this.Ymt=NaN,super.tr()}gn(){return this.Vmt.fn("Dmt",this.Gmt),this.Vmt.gn(),super.gn()}constructor(t){super(),this.Umt=void 0,this.Fmt=NaN,this.Ymt=NaN,this.Gmt=t=>{const i=this.Pmt({aet:t.Y_t,uet:""}),e=t.uB;for(const t of i.L.AL)e.lB<t.lB&&e.dB>t.lB?e.dB=t.lB:e.lB>t.lB&&t.dB>e.lB?t.dB=e.lB:e.lB===t.lB&&(e.dB=t.dB);i.RQ(e)},this.CQ=t,this.Rmt=gc(),this.Vmt=new BF,this.Vmt.yn("Dmt",this.Gmt)}};r(),r();var FF=/(.*)=(.*)/,YF=/(.*):(.*)/;function VF(t){if(!t)return[];const i=[],e=t.trim().split(";");for(const t of e){const e=t.match(FF);if(e){const[,t,s]=e;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(YF)){const[,i,e]=t.match(YF);switch(i){case"lang":n=e;break;case"er":r=Boolean(Number(e))}}i.push({aet:Number(t),uet:n,Bmt:r})}}return i}var GF={1:1,2:3,3:2,4:4},WF="urn:scte:dash:cc:cea-608:2015",ZF="urn:scte:dash:cc:cea-708:2015";r(),r();var HF=class extends Dc{ma(){return new XF(this.Lut&&this.Lut.ga)}constructor(t,i,e){super(hs.vL),this.Lut=t,this.xlt=i,this.Wmt=e}},XF=class extends Jr{constructor(t){super("activequalitychanged"),this.quality=t}},qF=[Zi.so,E.lL,Zi.Eb],KF=class extends tu{Zmt(t){const i=this.dgt.Put;for(const e of i.Ht.lct)if(i.$lt.Xlt(t,e))return e}gn(){this.Bo(),this.cz.fn(qF,this.Hmt)}constructor(t,i){super(),this.Hmt=t=>{const i=this.Xmt,e=this.Zmt(t.currentTime)||this.dgt.Cut;e&&i!==e&&(this.Xmt=e,e.Lut&&this.yo(new HF(e.Lut,null==e?void 0:e.ga,null==i?void 0:i.ga)))},this.cz=t,this.cz.yn(qF,this.Hmt),this.dgt=i}};function JF(t,i,e){const s=new Bt(Al(t),new da),n=Qe.ej(s,Rt.kx);if(!n)return;const r=Qe.qC(n.rI),o=dl(r,(t=>t.YA===Rt.xx)),h=dl(r,(t=>t.YA===Rt.NC));if(!o)return;const a=Qe.ej(o.rI,Rt.jx);if(!a)return;const u=Qe.ej(a.rI,Rt.Px);if(!u)return;const c=Qe.ej(u.rI,Rt.zx);if(!c)return;const l=Qe.qC(c.rI),d=dl(l,(t=>t.YA===Rt.Bx));if(!d)return;const f=Qe.uj(d.rI,Rt.Bx,!1),g=new Bt(Al(f.rI),new da);g.ZC(4);const _=Qe.qC(g),v=[];for(const t of _){if(t.YA===Rt.vC||t.YA===Rt.wC)return;t.YA===Rt.Yx?v.push({qmt:t,Kmt:Rt.wC}):t.YA===Rt.uC&&v.push({qmt:t,Kmt:Rt.vC})}if(!function(t,i){return void 0===t&&void 0!==i&&i.length>0}(h,i)&&0===v.length)return;let w=ja(t);const m=dl(r,(t=>t.YA===Rt.Qx)),p=m?Qe.ej(m.rI,Rt.Fx):void 0,A=p?function(t){const i=t.rI.Zb();return i.ZC(4),i.ZC(4),i.BC()}(p):1,y=dl(l,(t=>t.YA===Rt.Ux));y&&function(t,i,e){const s=iY(Al(t),i),n=Qe.ij(s,new da),r=n.rI;r.ZC(4);const o=r.BC();for(let t=0;t<o;t++){r.ZC(4),r.ZC(4);const t=r.OC.Zb(),i=r.BC();$(r.rI,t,i+e)}}(w,y,v.length),p&&function(t,i,e){const s=iY(Al(t),i),n=Qe.ij(s,new da),r=n.rI;r.ZC(4),r.ZC(4),$(r.rI,r.OC,e)}(w,p,1),w=function(t,i,e,s){if(e||!s)return t;let n=t;for(const t of s)n=$F(n,i,new T(t));return n}(w,n,h,i);const b=[n,o,a,u,c,d];for(let t=v.length-1;t>=0;t--){const i=v[t];w=tY(w,i.qmt,d,b,i.Kmt,e)}return{Jmt:w,$mt:{tpt:v.length,lR:A}}}function $F(t,i,e){const s=mm(t,e,i.rI.rI.byteOffset+i.rI.rI.byteLength);return eY(iY(Al(s),i),e.byteLength),s}function tY(t,i,e,s,n,r){const o=function(t,i,e){0;const s=t.rI.rI,n=hY(),r=new T(s.byteLength+n.byteLength),o=Al(r);r.set(ka(s),0),eY(o,n.byteLength),$w(o,new da(cY),i),r.set(n,s.byteLength),$w(o,new da(s.byteLength+aY),t.YA),e&&Fw(o,new da(s.byteLength+uY),e);return r}(i,n,r),h=mm(t,o,i.rI.rI.byteOffset),a=Al(h);!function(t,i){const e=Qe.ij(t,new da),s=Qe.uj(e.rI,Rt.Bx,!1),n=Al(s.rI),r=n.getUint32(0);n.setUint32(0,r+i)}(iY(a,e),1);for(const t of s)eY(iY(a,t),o.byteLength);return h}function iY(t,i){const e=i.rI.rI.byteOffset;return Zo(t,e,e+i.rI.rI.byteLength)}function eY(t,i){const e=new da,s=al(t,e);if(0===s);else if(1===s){e.Gb(4);const s=Zw(t,e.Zb());Hw(t,e,s.add(i))}else e.Wb(0),$(t,e,s+i)}bs(),Qi(),r(),bs(),Qi();var sY=class extends gr{start(t){this.JJ=t}transform(t){this.b0(t),this.ipt()}flush(){this.T0(),this.ipt()}x0(t){return t===Rt.mC}j0(t){let i=ja(ka(t.rI.rI));const e=Qe.ij(Al(i),new da);i=nY(i,e,this.ept),this.spt.push(i)}R0(t){this.spt.push(t)}ipt(){for(const t of function(t){if(t.length<2)return t;const i=[];let{buffer:e,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const o=t[r];e===o.buffer&&s+n===o.byteOffset?n+=o.byteLength:(i.push(new T(e,s,n)),({buffer:e,byteOffset:s,byteLength:n}=o))}return i.push(new T(e,s,n)),i}(this.spt))this.JJ.enqueue(t);nt(this.spt)}constructor(t){super(),this.spt=[],this.ept=t}};function nY(t,i,e){let s=t;const n=Qe.qC(i.rI);for(let t=n.length-1;t>=0;t--){const r=n[t];r.YA===Rt.AC&&(s=rY(s,r,i,e))}return s}function rY(t,i,e,s){const n=iY(Al(t),i),r=Qe.ij(n,new da),o=Qe.qC(r.rI),h=dl(o,(t=>t.YA===Rt.yC));if(!h)return t;const a=h.rI,u=a.OC.Zb(),c=a.BC(),{flags:l}=G(c);a.ZC(4),l.Hb(Kn.BASE_DATA_OFFSET_PRESENT)&&a.ZC(8);const d=a.OC.Zb();if(l.Hb(Kn.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const i=al(a.rI,d);return $(a.rI,a.OC,i+s.tpt),t}{$(a.rI,u,c|Kn.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new T(4);Al(n).setUint32(0,s.lR+s.tpt);const r=a.rI.byteOffset+d.tc;for(const t of o.filter((t=>t.YA===Rt.bC)))oY(t,n.byteLength);for(const s of[h,i,e])eY(iY(Al(t),s),n.byteLength);return mm(t,n,r)}}function oY(t,i){const e=t.rI,s=e.BC(),{flags:n}=G(s);if(e.ZC(4),n.Hb(Ac.DATA_OFFSET_PRESENT)){const t=e.Zb().BC();$(e.rI,e.OC,t+i)}}var hY=di((()=>new T([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),aY=16,uY=64,cY=4,lY=[Xi.ua,Zi.Tb,Zi.Sb,Zi.Ib,Zi.Qy],dY=class extends tu{get ogt(){return this.hgt}get o(){return this.aS}get E3(){return this.L3}get nt(){return this.npt}get vgt(){return function(t){const i=29.97,e=1024,s=44100;return t===Ri.SI?s/e:i}(this.L3)}get fgt(){return 1/this.vgt}get Rt(){return Boolean(this.hgt&&this.hgt.Rt)}get J$(){const t=this.dgt?this.dgt.Put.J$.Vlt:Mo.PP();return this.rpt().pP(t)}get TE(){let t=this.opt();const i=this.hpt;return void 0!==i&&t.fP().gr(i)&&(t=t.pP(Mo.OP(i))),t}get Blt(){return cU(this.opt(),this.J$.pP(this.upt)).mP(2*this.fgt)}get upt(){const t=this.hpt;if(t&&isFinite(t)){const i=this.cpt.jn;if(isFinite(i)&&t<i)return new Mo([t,i],[!1,!0])}return Mo.PP()}get _k(){const t=this.hgt;if(!t)return Mo.OP(0);const i=t.jlt.mgt,e=t.jlt.pgt;if(void 0===e||void 0===i)return Mo.OP(0);const s=e;let n=i>=t.jlt.wdt.jn?x.max(i,this.jn):i;return n=x.max(s,n),Mo.RP(s,n).fP()}get uV(){return this.Blt.CP(this.LE)}get Ylt(){return this.cpt.Ylt}get LE(){return this.cz.LE}get Cn(){return this.hgt?this.hgt.jlt.wdt.Cn:NaN}get jn(){const t=this.lpt(),i=this.hpt;return void 0===t?NaN:void 0!==i?i:t}lpt(){var t;return null==(t=this.hgt)?void 0:t.jlt.wdt.jn}get Ti(){return this.cpt.Ti}get ji(){return this.cpt.ji}get dpt(){return this.hpt}qut(){return void 0!==this.dgt&&this.dgt.qut}Flt(){if(void 0===this.hpt)return!1;const t=this.opt().fP(),i=t.bP(this.hpt);return!(i<0)&&t.Cn(i)!==this.hpt}I3(){const t=this.cpt.Ylt,i=this.opt().Sn(t);this.hpt=i.V>0?i.jn(i.V-1):0;const e=t.jn(0);isFinite(e)&&this.hpt<e&&this.i0(this.hpt,e),this.fpt()}async Cft(t,i,e,s){const n=e.eat.rQ,r=this.gpt(t,i,e,n,s),o=this._pt(t,i,e,n,s),[h]=await gw([o,r]);return h}async gpt(t,i,e,s,n){if(!ZA(e.gX))return;let r;if(t.YA===Me.jN){const i=t.rI.$ct(),e=await i.FN(n);r=new T(e)}else r=new T(t.rI.Oat);const o=[];if(void 0!==this.vpt&&(this.vpt.Cft(r,i.lB,s),o.push(this.vpt)),void 0!==this.wpt){const t=e.vdt(i);this.wpt.Cft(r,i.lB,i.dB,s,e.Lut,t),o.push(this.wpt)}XI(this.TE,o)}async _pt(t,i,e,s,n){var r;let o;if(yi(n),t.YA===Me.jN){let i=t.rI.YN;this.mpt&&(i=function(t,i){return t.pipeThrough(new La(new sY(i)))}(i,this.mpt)),o={YA:Me.jN,rI:i}}else{let i=new T(t.rI.Oat);this.mpt&&(i=function(t,i){let e=ja(t);const s=new Bt(Al(e),new da),n=Qe.qC(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.YA===Rt.mC&&(e=nY(e,s,i))}return e}(i,this.mpt)),o={YA:Me.v$,rI:i}}const h={kst:i.lB,ct:i.ct,rQ:s,u4:null==(r=e.Lut)?void 0:r.zL},a=this.Qht.TE;await this.ppt(),await this.Qht.B4(o,h,n);return function(t,i,e,s){let n,r,o=i.yP(t.fP());o=o.yP(e.yP(i)),!1;0===o.V?(n=s.dB,r=n):(n=o.Cn(0),r=o.jn(0));return{yft:n,bft:r}}(a,this.Qht.TE,this.Qht.x3,i)}async $ht(t,i,e){var s;yi(e),this.wpt&&this.wpt.$ht(new T(t.Oat));let n=new T(t.Oat);if(this.Apt(i)){const t=this.cpt.ypt;let i,e=[];t&&(e=Ms(t.bpt,(t=>t.XY)),i=t.Mpt.DF?LL(t.Mpt.DF):void 0);const s=JF(n,e,i);s?(this.mpt=s.$mt,n=s.Jmt):this.mpt=void 0}const r={YA:Me.v$,rI:n};await this.ppt(),await this.Qht.F4(r,{u4:null==(s=i.Lut)?void 0:s.zL},e)}xft(t,i,e){return this.Qht.wS(t,i,e)}i0(t,i){this.Qht.O3(t,i)}e0(t,i){this.Qht.R3(t,i)}opt(){return this.Qht?this.Qht.TE:Mo.PP()}rpt(){return this.Qht?this.Qht.x3:Mo.PP()}Tpt(){return this.Qht?this.Qht.wS(0,1/0):Promise.resolve()}Spt(){return this.Qht&&(this.Qht.fn(po.g$,this.Ds),this.Qht=void 0),Promise.resolve()}async Npt(t){var i;const e=sl.Wdt(null!=(i=t.Kft)?i:t.lct,this.Pdt).gX;this.Qht||(this.Qht=this.cpt.Ipt(e),this.Qht.yn(po.g$,this.Ds),this.Vdt=new AQ(this.Qht)),await this.ppt()}$n(t,i){const e=Wt.Iy([i]);this.zQ.Ty(),this.zQ=e;const s=this.Dpt(t,this.Ept,e.ly);return this.Ept=s,s}kpt(t){if(Qa(this.Lpt,El.CEA608))return;const i=t.jlt.zft;if(function(t){return t.some((t=>t.A8===WF||t.A8===ZF))}(i)){this.wpt=new QF(this.CQ);const t=function(t){const i=[];for(const e of t)if(e.A8===WF){const t=rz(e.zD);for(const e of t)i.push(e)}else if(e.A8===ZF){const t=VF(e.zD);for(const e of t)if(e.aet<=4){const t=GF[e.aet];i.push(Ei({},e,{aet:t}))}}return i}(i);for(const i of t)this.wpt.Pmt(i);this.npt.$Y(this.wpt.Z)}}async Dpt(t,i,e){yi(e),i&&await i.catch(Bn),this.hgt===t&&this.xpt||(await this.Cpt(),yi(e),await this.Tpt(),yi(e),t&&await this.jQ(t))}async Cpt(){const t=this.hgt;this.hgt=void 0,this.xpt=!1,this.hpt=void 0,t&&(t.fn(hs.mL,this.jpt),t.ngt(!1),t.fn(hs.NO_QUALITY,this.Ds)),this.Opt&&(this.Opt.gn(),this.Opt=void 0),this.dgt&&(await this.dgt.gn(),this.dgt=void 0),this.wpt&&(this.npt.eV(this.wpt.Z),await this.wpt.gn())}async jQ(t){this.hgt=t,this.kpt(t),t.yn(hs.mL,this.jpt),t.yn(hs.NO_QUALITY,this.Ds),await this.Npt(t),this.dgt=this.Rpt(t),this.dgt.yn(lY,this.Ds),this.dgt.yn("xut",this.fpt),this.dgt.But=t.Kft,this.Opt=new KF(this.cz,this.dgt),this.Opt.yn(hs.vL,this.Wft),t.ngt(!0),this.xpt=!0}Rpt(t){return new pQ(this,this.cz,this.cz,this.OQ,this.UG,this.Rft,this.slt,this.Ydt,this.Pdt,this.Vdt,this.lft,this.SV).xst(t)}async tr(t){this.zQ.Ty(),this.Ept&&(await this.Ept.catch(Bn),this.Ept=void 0),await this.Cpt(),t||await this.Tpt(),await this.Spt()}async Ppt(){await this.Cpt()}Vft(t){var i;null==(i=this.ogt)||i.Vft(t)}async Qft(t,i){var e,s;await this.sct(),null==(e=this.ogt)||e.Qft(i);const n=null==(s=this.dgt)?void 0:s.Put.$lt.Wlt(t);if(n&&n.V>0)for(let t=0;t<n.V;t++){var r;await(null==(r=this.Qht)?void 0:r.wS(n.Cn(t),n.jn(t)))}await this.rct()}zpt(t){const i=t.Ht.Kft;if(void 0===i)return this.Bpt(t);if(i.some((t=>this.Vdt.N$(t))))return this.Bpt(t);this.yo(new Jr("Upt"))}Bpt(t){this.dgt&&this.hgt&&this.hgt===t.Ht&&(this.dgt.But=this.hgt.Kft)}async sct(t){this.dgt&&await this.dgt.sct(t)}async rct(t){this.dgt&&await this.dgt.rct(t)}JK(){const t=this.TE.jP;return this.UG.JK(t)}ppt(){const t=this.cpt.Ylt,i=x.max(0,t.Cn(0)-.1),e=t.jn(0)+.01;return this.Qht.s3(i,e)}Apt(t){if(!ZA(t.gX))return!1;if(this.cpt.w8)return!0;return void 0!==this.cpt.ypt}hct(t){if(!ou(this.L3))return;const i=this.dgt,e=t.dgt;void 0!==i&&void 0!==e&&i.hct(e,this.Cn,this.jn)}async gn(t){this.Bo();try{await this.tr(t),await this.Ppt()}catch(t){}}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d){super(),this.hgt=void 0,this.dgt=void 0,this.xpt=!1,this.zQ=new Wt,this.Ept=void 0,this.hpt=void 0,this.Qht=void 0,this.Vdt=new yQ,this.mpt=void 0,this.wpt=void 0,this.npt=new BE([]),this.fpt=()=>{!this.qut()&&this.Flt()&&this.cpt.fpt()},this.Wft=t=>{this.hgt.Wft(t),this.yo(new PQ(t.xlt,t.Wmt))},this.jpt=t=>{this.zpt(t)},this.aS=function(){const t=fY;return fY+=1,t}(),this.L3=t,this.OQ=s,this.UG=n,this.cpt=i,this.cz=e,this.slt=r,this.CQ=o,this.vpt=h,this.Ydt=a,this.Pdt=a?RT(t,a):void 0,this.lft=u,this.Lpt=c,this.Rft=l,this.SV=d}};var fY=0;var gY=class extends tu{FK(t,i){return this.Qpt(t,i)}async Qpt(t,i){for(const i of t)this.Fpt(i);await this.$n(i);for(const t of this.Vpt.Ypt)t.YA===Ri.ON&&(t.lct&&0!==t.lct.length?await this.Gpt.jQ(t):this.yo(new jQ("No supported representation found in the AdaptationSet with mimetype : "+t.YA)))}get zL(){return this.iB}get ct(){return this.cz.ct}Wpt(t){return new dY(t,this,this.cz,this.OQ,this.UG,this.slt,this.CQ,this.vpt,this.Zpt,this.lft,this.Lpt,this.Rft,this.SV)}qut(){return this.Cgt.some((t=>t.qut()))}Flt(){return 0!==this.Cgt.length&&this.Cgt.every((t=>t.Flt()))}fpt(){this.Hpt()&&this.yo(new RQ)}Ipt(t){if(I(t,"audio")){if(this.a3.p5)return this.a3.p5}else if(I(t,"video")&&this.a3.A5)return this.a3.A5;throw new b("Cannot allocate source buffer for mime type "+t)}Xpt(t){t.yn([Xi.ua,Zi.Ab,Zi.Tb,Zi.Sb,Zi.Ib,Zi.Qy],this.Ds),t.yn(po.g$,this.qpt),t.yn("Upt",this.Ds)}get Rt(){return this.Cgt.some((t=>t.Rt))}async Kpt(t){await Promise.all(this.Cgt.map((i=>i.gn(t)))),nt(this.Cgt)}get ht(){return this.Oz}get TE(){if(0===this.Cgt.length)return Mo.PP();const t=this.Cgt.map((t=>t.TE));let i=Mo.RP(0,1/0);for(const e of t)i=i.Sn(e);if(0===i.V)return i;if(this.Flt()){const t=i.Sn(this.Ylt);if(0===t.V)return i;const e=t.jn(t.V-1);let s=0;for(const t of this.Cgt)s=x.max(s,t.dpt);e<=s&&(i=i.pP(new Mo([e,s],[!0,!0])))}return i}get w8(){return this.cz.w8}get LE(){return this.cz.LE}get ypt(){return this.Jpt}get jn(){if(this.$pt){const t=this.ct;if(!j(t)&&t!==jt)return t}if(!this.Cgt.length)return NaN;let t=0;for(const i of this.Cgt)t=x.max(t,i.jn);return t}get $pt(){const t=this.Vpt.Sft;if(t.YA===nc.FQ)return!1;const i=t.tAt;return 0!==i.length&&this.Vpt===i[i.length-1]}get _k(){if(!this.Cgt.length)return Mo.PP();let t=new Mo([0,1/0]);for(const i of this.Cgt)t=t.Sn(i._k);if(t.V>0&&this.$pt&&isFinite(this.ct)){const i=this.ct,e=t.jn(t.V-1);i>e&&(t=t.pP(Mo.RP(e,i).fP()))}return t}get kc(){return this.Vpt}get nt(){return this.Ul}get rt(){return this.Pz}get ji(){return this.bu.ji}get Ti(){return this.bu.Ti}get uV(){const t=this.LE,i=this.TE,e=i.bP(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get Ylt(){const t=this.Vpt.Cn,i=this.$pt?1/0:this.Vpt.jn;return Mo.RP(t,i)}Hpt(){if(this.qut())return!1;if(!this.Flt())return!1;const t=this.TE;if(0===t.V)return!1;const i=this.LE;if(this.$pt)return t.Cn(t.V-1)<=i;{const e=t.Sn(this.Ylt);if(0===e.V)return!0;const s=e.Cn(e.V-1),n=e.jn(e.V-1)+.1;return s<=i&&i<=n}}get iAt(){return this.eAt}async sct(t){this.eAt||(this.eAt=!0,await Promise.all(this.Cgt.map((i=>i.sct(t)))))}async rct(t){this.eAt&&(this.eAt=!1,await Promise.all(this.Cgt.map((i=>i.rct(t)))))}async gn(t){this.cz.fn(Zi.Lb,this.sAt),this.cz.fn(Zi.Vy,this.nAt),this.Bo(),this.Vpt.fn(ea.Dut,this.Ds),this.rAt.Ty(),this.Ept&&(await this.Ept.catch(Bn),this.Ept=void 0),await this.Kpt(t),await this.Gpt.gn(),this.Oz.gn(),this.Pz.gn(),this.Ul.gn(),this.oAt()}Fpt(t){this.hAt.push(t),t.yn("aAt",this.uAt);const i=t.YA===Ri.SI?this.Oz:this.Pz;for(const e of t.Z)i.tt(e)}cAt(t){const i=t.YA===Ri.SI?this.Oz:this.Pz;for(const e of t.Z)i.it(e),e.gn();t.gn(),ra(this.hAt,t)}oAt(){for(let t=this.hAt.length-1;t>=0;t--)this.cAt(this.hAt[t])}get lAt(){return this.hAt.map((t=>t.ogt)).filter($t)}get dAt(){return this.Cgt.map((t=>t.ogt)).filter($t)}$n(t,i){return this.rAt.Ty(),this.rAt=Wt.Iy([i]),this.Ept=Vh(this.oD(t,this.Ept,this.rAt.ly),this.rAt).catch(this.fAt),this.Ept}async oD(t,i,e){i&&await i.catch(Bn),yi(e);const s=[],n=this.Cgt.slice(),r=t.slice();nt(this.Cgt);for(const t of n){const i=t.ogt;i&&Qa(r,i)?(this.Cgt.push(t),s.push(t.$n(i,e)),ra(r,i)):(this.Ul.eV(t.nt),await t.gn(),yi(e))}for(const t of r){const i=this.Wpt(t.Fut);this.Ul.$Y(i.nt),this.Cgt.push(i),this.Xpt(i),s.push(i.$n(t,e))}await Promise.all(s)}async D$(t,i,e){this.a3!==e&&(this.a3=e,await this.Kpt(!1)),await this.$n(t),this.Jpt=i}async gAt(t){for(const i of this.Cgt){const e=i.ogt;if(void 0!==e)for(const s of e.jlt.lct){(s.GY||[]).some((i=>i.DF&&_m(Cc(t),LL(i.DF))))&&!s.sgt&&(s.sgt=!0,await i.Qft(s,s.Lut),this.yo(new Go(new lu(vt.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions"))))}}}async _At(t){for(const i of this.Cgt){const e=i.ogt;if(void 0!==e)for(const s of e.lct){const e=s.GY,n=s.Lut;if(void 0===e||0===e.length||void 0===n)continue;const r=this.vAt(e,t.Rb);n.lot!==r&&(r?i.Vft(n):await i.Qft(s,n))}}}vAt(t,i){let e=!1;return i.iM(((i,s)=>{t.some((t=>t.DF&&_m(Cc(s),LL(t.DF))))&&"usable"===i&&(e=!0)})),e}hct(t){if(void 0===t)return;const i=t.Vpt;if(this.Vpt.wAt===i||this.Vpt.mAt===i)for(const i of this.Cgt){const e=dl(t.Cgt,(t=>t.E3===i.E3));void 0!==e&&i.hct(e)}}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d,f){var g,_;super(),this.Oz=new kt,this.Pz=new kt,this.hAt=[],this.rAt=new Wt,this.eAt=!0,this.Cgt=[],this.Ept=void 0,this.qpt=no((()=>{this.yo(new ii(this.LE))}),350),this.uAt=t=>{const i=t.pAt.ogt;if(i)for(const t of this.hAt){var e;t.ogt&&t.ogt!==i&&t.YA===(null==(e=i.Zft)?void 0:e.YA)&&(t.fn("aAt",this.uAt),t.ogt.Rt=!1,t.yn("aAt",this.uAt))}this.Ds(t)},this.fAt=t=>{Tu(t)||this.yo(new cl(gy(t,vt.MEDIA_LOAD_ERROR)))},this.sAt=t=>{const i=t.V9;i&&this.gAt(i).catch(this.fAt)},this.AAt=t=>{this._At(t).catch(this.fAt)},this.nAt=t=>{const i=t.V9;if(i)for(const t of this.dAt)for(const e of t.jlt.lct){const s=(e.GY||[]).some((t=>t.DF&&_m(Cc(i),LL(t.DF))));e.sgt&&s&&(e.sgt=!1,e.Lut&&t.Vft(e.Lut))}},this.OQ=e,this.UG=s,this.slt=n,this.cz=t,this.iB=ft(),this.hAt=[],this.Vpt=o,this.Jpt=h,this.SV=f,this.CQ=u,this.Gpt=new CQ(t,e,s,n,u,null==(_=null==r||null==(g=r.dash)?void 0:g.segmentRelativeVttTiming)||_),this.Ul=new BE([this.Gpt.nt]),this.lft=l,this.Lpt=d,this.Vpt.yn(ea.Dut,this.Ds),this.bu=a,this.a3=i,this.Rft=r.lowLatency,this.vpt=c,this.Zpt=r.abr,this.cz.yn(Zi.Lb,this.sAt),this.cz.yn(Zi.Vy,this.nAt)}};r(),r(),r();var _Y=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,vY=class t{static dj(i){const e=i.match(_Y);if(!e)throw new b("The given value could not be parsed as a valid DateTimeInterval");const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,o=Number(e[4])||0,h=Number(e[5])||0,a=Number(e[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*o+60*h+a)}get t_t(){return H.BU(this.yAt,1e3)}bAt(){return this.yAt}MAt(){return 1e3*this.yAt}constructor(t){this.yAt=t}};Qi(),r();var wY=function(t){return t.TAt="progressive",t.SAt="interlaced",t.dI="unknown",t}({});r();var mY=class{BB(){return this.NAt/this.IAt}constructor(t,i){this.NAt=t,this.IAt=i}},pY=/^(?:true|false)$/i,AY=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function yY(t){if(void 0!==t)return vY.dj(t)}function bY(t){if(void 0===t)return;const i=t.match(AY);if(!i)throw new b("The given value could not be parsed as a valid Date");const[,e,s,n,r,o,h,a,u,c,l,d]=i,f=("-"===e?-1:1)*Number(s),g=Number(n)-1,_=Number(r),v=Number(o);let w=Number(h);const m=Number(a),p=Number("0."+(u||"")),A=x.round(1e3*p);if(c){w-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const y=new Date(Date.UTC(f,g,_,v,w,m,A));if(j(y.getTime()))throw new b("The given value could not be parsed as a valid Date");return y}function MY(t){if(!t)return;const i=/(\d+)-(\d+)/.exec(t);return i?[vl(i[1]),vl(i[2])]:void 0}function TY(t){if(void 0!==t){if(!j(Number(t)))try{return D.fromString(t,!0)}catch(t){}throw new b("The given value could not be parsed as a valid unsigned long")}}function vl(t){if(void 0===t)return;const i=Number(t);if(!j(i))return i;throw new b("The given value could not be parsed as a valid Number")}function SY(t){if(void 0===t)return;const i=t.split("/"),e=Number(i[0]),s=Number(i[1]||1);if(!j(e)&&!j(s))return new mY(e,s);throw new b("The given value could not be parsed as a valid frame rate")}function ge(t){if(void 0!==t){if(pY.test(t))return"true"===t.toLowerCase();if(!j(C(t)))return Boolean(C(t));throw new b("The given value could not be parsed as a valid Boolean.")}}function NY(t){return{zu:t.qD,DAt:ge(t.KD("availabilityTimeComplete")),EAt:vl(t.KD("availabilityTimeOffset"))}}function IY(t){return t.map(NY)}function DY(t){const i=zY(t),e=function(t,i,e,s){let n=t.JD(e,i);return void 0===n&&(n=t.KD(s+":"+i)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=_I(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=pm(n.qD)),!s){const i=_I(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==i&&(s=function(t){const i=Zn(t.qD),e=new T([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=i.length,n=12+e.length+4+s,r=new ArrayBuffer(n),o=new T(r),h=new DataView(r),a=new da;$(h,a,n),$(h,a,1886614376),$(h,a,0),Fw(h,a,e),$(h,a,s),Fw(h,a,i),!1;return o.buffer}(i))}return{DF:e,y8:s,A8:i.A8,zD:i.zD}}function EY(t){return{kAt:t.KD("sourceURL"),Nct:MY(t.KD("range"))}}function kY(t,i){const e=t.KD("d"),s=t.KD("t"),n=vl(t.KD("r"));i.push({ct:e,lB:s,LAt:n})}function LY(t){return{ult:t.KD("index"),xAt:MY(t.KD("indexRange")),zj:t.KD("media"),CAt:MY(t.KD("mediaRange"))}}function xY(t){const i=jY(t),e=function(t){const i=t.map(LY);return i.length>0?i:void 0}(t.VD("SegmentURL"));return Ei({},i,{jAt:e,OAt:t.KD("xlink:href"),RAt:t.KD("xlink:actuate")})}function CY(t){const i=ge(t.KD("availabilityTimeComplete")),e=vl(t.KD("availabilityTimeOffset")),s=MY(t.KD("indexRange")),n=ge(t.KD("indexRangeExact")),r=t.VD("Initialization");if(r.length>1)throw new b("The provided MPEG-DASH document's "+t.GD+" element can not have more than one Initialization element.");const o=1===r.length?EY(r[0]):void 0,h=TY(t.KD("presentationTimeOffset")),a=t.VD("RepresentationIndex");if(a.length>1)throw new b("The provided MPEG-DASH document's "+t.GD+" element can not have more than one RepresentationIndex element.");return{DAt:i,EAt:e,xAt:s,PAt:n,zAt:o,BAt:h,UAt:1===a.length?EY(a[0]):void 0,QAt:yY(t.KD("timeShiftBufferDepth")),xj:vl(t.KD("timescale"))}}function jY(t){const i=CY(t),e=t.VD("BitstreamSwitching"),s=e.length>0?EY(e[0]):void 0,n=vl(t.KD("duration")),r=t.VD("SegmentTimeline");if(r.length>1)throw new b("The provided MPEG-DASH document's "+t.GD+" element can not have more than one SegmentTimeline element.");const o=1===r.length?function(t){const i=[],e=t.VD("S");for(const t of e)kY(t,i);return i}(r[0]):void 0;return Ei({},i,{FAt:s,ct:n,eat:o,YAt:vl(t.KD("startNumber")),VAt:vl(t.KD("endNumber"))})}function OY(t){return{GAt:function(t){if(!t)return;const i=t.split(/\s/);return i.length>1?(i.length=2,i.map(vl)):1===i.length?i.map(vl)[0]:void 0}(t.KD("audioSamplingRate")),cht:t.KD("codecs"),WAt:ge(t.KD("codingDependency")),GY:function(t){if(0!==t.length)return t.map(DY)}(t.VD("ContentProtection")),ZAt:function(t){return t.map(BY)}(t.VD("EssentialProperty")),HAt:function(t){return t.map(UY)}(t.VD("SupplementalProperty")),vgt:SY(t.KD("frameRate")),Ti:vl(t.KD("height")),XAt:vl(t.KD("maxPlayoutRate")),qAt:vl(t.KD("maximumSAPPeriod")),gX:t.KD("mimeType"),KAt:t.KD("profiles"),JAt:t.KD("sar"),$At:function(t){switch(t){case wY.TAt:case wY.SAt:case wY.dI:return t;default:return}}(t.KD("scanType")),tyt:t.KD("segmentProfiles"),iyt:vl(t.KD("startWithSAP")),ji:vl(t.KD("width"))}}function RY(t){const i=IY(t.VD("BaseURL")),e=t.VD("SegmentBase");if(e.length>1)throw new b("The provided MPEG-DASH document's "+t.jD+" element can not have more than one SegmentBase element.");const s=1===e.length?CY(e[0]):void 0,n=function(t){const i=t.map(xY);return i.length>0?i:void 0}(t.VD("SegmentList")),r=t.VD("SegmentTemplate");if(r.length>1)throw new b("The provided MPEG-DASH document's "+t.jD+" element can not have more than one SegmentTemplate element.");const o=1===r.length?function(t){return Ei({},jY(t),{eyt:t.KD("bitstreamSwitching"),syt:t.KD("index"),nyt:t.KD("initialization"),ryt:t.KD("media")})}(r[0]):void 0;return{oyt:i,hyt:s,ayt:n,uyt:o}}function PY(t){const i=OY(t),e=RY(t),s=vl(t.KD("bandwidth")),n=t.KD("dependencyId"),r=t.KD("id"),o=t.KD("mediaStreamStructureId"),h=vl(t.KD("qualityRanking"));if(t.VD("SegmentBase").length>1)throw new b("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return Ei({},i,e,{FY:s,cyt:n,o:r,lyt:o,dyt:h})}function zY(t){return{A8:t.KD("schemeIdUri"),zD:t.KD("value")}}function BY(t){return zY(t)}function UY(t){return zY(t)}function QY(t){return zY(t)}function FY(t){return zY(t)}function YY(t){var i;const e=OY(t),s=RY(t),n=function(t){return t.map(FY)}(t.VD("Accessibility")),r=ge(t.KD("bitstreamSwitching")),o=t.KD("contentType"),h=vl(t.KD("group")),a=vl(t.KD("id")),u=(null==(i=t.VD("Label")[0])?void 0:i.qD)||"",c=t.KD("lang"),l=vl(t.KD("maxBandwidth")),d=SY(t.KD("maxFrameRate")),f=vl(t.KD("maxHeight")),g=vl(t.KD("maxWidth")),_=vl(t.KD("minBandwidth")),v=SY(t.KD("minFrameRate")),w=vl(t.KD("minHeight")),m=vl(t.KD("minWidth")),p=t.KD("par"),A=function(t){return t.map(PY)}(t.VD("Representation"));if(0===A.length)throw new b("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const y=function(t){return t.map(QY)}(t.VD("Role")),M=ge(t.KD("segmentAlignment"))||!1,T=vl(t.KD("selectionPriority")),S=T||1,N=ge(t.KD("subsegmentAlignment"))||!1;let I;try{I=vl(t.KD("subsegmentStartsWithSAP"))}catch(t){}return Ei({},e,s,{zft:n,FAt:r,VN:o,Zft:h,o:a,kh:u,gs:c,fyt:l,gyt:d,_yt:f,vyt:g,wyt:_,myt:v,pyt:w,Ayt:m,yyt:p,lct:A,Sgt:y,byt:M,hG:S,Myt:N,Tyt:I,Syt:t.KD("xlink:actuate")||"onRequest",Nyt:t.KD("xlink:href")})}function VY(t){const i=TY(t.KD("presentationTime"))||D.ZERO,e=TY(t.KD("duration")),s=vl(t.KD("id")),n=function(t){const i=t.XD,e={};for(let t=0;t<i.length;t++)e[i[t].l]=i[t].zD;return e}(t),r=t.qD;return{jR:i,ct:e,o:s,XD:n,rI:""!==r.trim()?r:t.KD("messageData")||""}}function GY(t){return{Nyt:t.KD("xlink:href"),Syt:t.KD("xlink:actuate"),A8:t.KD("schemeIdUri"),zD:t.KD("value"),xj:vl(t.KD("timescale")),BAt:TY(t.KD("presentationTimeOffset")),_X:t.VD("Event").map(VY)}}function WY(t){const i=RY(t),e=t.VD("AssetIdentifier");if(e.length>1)throw new b("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===e.length?function(t){return zY(t)}(e[0]):void 0,n=function(t){return t.map(YY)}(t.VD("AdaptationSet")),r=ge(t.KD("bitstreamSwitching")),o=yY(t.KD("duration")),h=function(t){return t.map(GY)}(t.VD("EventStream")),a=t.KD("id"),u=yY(t.KD("start")),c=(t.VD("Subset"),t.KD("xlink:href"));return Ei({},i,{Igt:n,Iyt:s,FAt:r,ct:o,Dyt:h,o:a,Cn:u,Syt:t.KD("xlink:actuate"),Nyt:c})}function ZY(t){const i=t.KD("schemeIdUri");if(!i)return;return{A8:i,zD:t.KD("value")}}function HY(t,i){const e=bY(t.KD("availabilityEndTime")),s=bY(t.KD("availabilityStartTime")),n=IY(t.VD("BaseURL")),r=t.KD("id"),o=function(t){return t.map((t=>""+t.qD))}(t.VD("Location")),h=yY(t.KD("maxSegmentDuration")),a=yY(t.KD("maxSubsegmentDuration")),u=yY(t.KD("mediaPresentationDuration")),c=(t.VD("Metrics"),yY(t.KD("minBufferTime")));if(!c)throw new b("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=yY(t.KD("minimumUpdatePeriod")),d=function(t){return t.map((t=>WY(t)))}(t.VD("Period"));if(!d.length)throw new b("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.KD("profiles");if(!f)throw new b("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const g=bY(t.KD("publishTime")),_=yY(t.KD("suggestedPresentationDelay")),v=yY(t.KD("timeShiftBufferDepth")),w=function(t){switch(t){case nc.QQ:case nc.FQ:return t;default:return}}(t.KD("type")),m=function(t){const i=[];for(const e of t){const t=ZY(e);t&&i.push(t)}return i}(t.VD("UTCTiming")),p=function(t){if(0===t.length)return;const i=t[0],e=i.VD("Latency");if(0===e.length)return;const s=function(t){const i=t[0],e=vl(i.KD("target"));if(void 0===e)return;const s=vl(i.KD("min")),n=vl(i.KD("max"));return{Eyt:e,jU:s,CU:n}}(e);if(void 0===s)return;const n=function(t){if(0===t.length)return;const i=t[0],e=vl(i.KD("max")),s=vl(i.KD("min"));return{jU:s,CU:e}}(i.VD("PlaybackRate"));return{kyt:s,$E:n}}(t.VD("ServiceDescription"));return{Lyt:e,xyt:s,oyt:n,o:r,Cyt:o,jyt:i,Oyt:h,Ryt:a,Pyt:u,zyt:c,Byt:l,tAt:d,KAt:f,Uyt:g,Qyt:_,QAt:v,YA:w,Fyt:m,Yyt:p}}var XY=class{Vyt(t,i){return function(t,i){if(!t)throw new b("The provided MPEG-DASH document does not contain a valid MPD root element.");return HY(t,i)}(Fe.CD(t).sE,i)}};function qY(t){return{get bandwidth(){return t.FY},get codecs(){return t.cht},get id(){return t.o},get uid(){return t.zL},get name(){return t.kh},get averageBandwidth(){return t.Gyt},get label(){return t.kh},set label(i){t.kh=Q(i)},get available(){return t.lot},get score(){return t.Wyt},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}function KY(t){return fe(qY(t),{get height(){return t.Ti},get width(){return t.ji},get frameRate(){return t.vgt},get firstFrame(){return t.Zyt}})}function JY(t){return fe(qY(t),{get audioSamplingRate(){return t.GAt}})}r(),r(),r(),r(),r(),r(),r(),r();var $Y=class extends Jr{constructor(t){super("update"),this.quality=t}},tV=class extends tu{get kh(){return this.eB}set kh(t){this.eB!==t&&(this.eB=t,this.yo(new $Y(this.ga)))}get Gyt(){}get lot(){return this.Hyt}get Wyt(){}kQ(){this.Hyt=!1,this.yo(new $Y(this.ga))}EQ(){this.Hyt=!0,this.yo(new $Y(this.ga))}constructor(t,i,e,s,n){super(),this.o=t,this.FY=i,this.cht=e,this.Xyt=n,this.zL=zS(),this.eB=s||"",this.Hyt=!0}},iV=class extends tV{get ga(){return this.Za||(this.Za=KY(this)),this.Za}constructor(t,i,e,s,n,r,o,h,a=0){super(t,i,e,s,n),this.vgt=r,this.ji=o,this.Ti=h,this.Zyt=a,this.Za=void 0}},eV=class extends tV{get ga(){return this.Za||(this.Za=JY(this)),this.Za}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.GAt=r,this.Za=void 0}};r(),r();var sV=class extends tu{get qyt(){const t=this.Kyt();return null==t?void 0:t.Cn}get Jyt(){const t=this.Kyt();return null==t?void 0:t.jn}constructor(...t){super(...t),this.$yt=t=>{this.yo(t)}}},nV=class extends sV{get jlt(){return this.ict}get GAt(){var t;return null!=(t=this.tbt.rI.GAt)?t:this.jlt.GAt}get FY(){return this.tbt.rI.FY||0}get cht(){const t=this.tbt.rI;return t.cht?[t.cht]:this.jlt.cht}get ibt(){const t=this.tbt.rI;return t.cht?[t.cht]:[]}get Qp(){return this.tbt.rI.cht||this.jlt.Qp}get WAt(){return this.tbt.rI.WAt||this.jlt.WAt}get GY(){return this.tbt.rI.GY||this.jlt.GY}get VN(){return this.gX+'; codecs="'+this.Qp+'"'}get ZAt(){const t=this.tbt.rI;return t.ZAt.length?t.ZAt:this.jlt.ZAt}get ga(){return this.Za||(this.Za=function(t){return{get id(){return t.o},get type(){return t.YA},get bandwidth(){return t.FY},get width(){return t.ji},get height(){return t.Ti},get frameRate(){var i,e;return null!=(e=null==(i=t.vgt)?void 0:i.BB())?e:NaN},get audioSamplingRate(){return t.GAt}}}(this))}get vgt(){var t;return null!=(t=this.tbt.rI.vgt)?t:this.jlt.vgt}get Ti(){return this.tbt.rI.Ti||this.jlt.Ti}get o(){return this.tbt.rI.o||""}get Eft(){return this.ebt}set Eft(t){this.ebt=t}get Dft(){const t=this.tbt.sbt();if(t)return{zu:t.zu,Nct:t.Nct,zI:this.Sft.zI}}get XAt(){return this.tbt.rI.XAt||this.jlt.XAt||1}get qAt(){return this.tbt.rI.qAt||this.jlt.qAt}get Sft(){return this.wdt.Sft}get gX(){return this.tbt.rI.gX||this.jlt.gX}get wdt(){return this.jlt.wdt}get KAt(){return this.tbt.rI.KAt||this.jlt.KAt}get Lut(){return this.nbt}get JAt(){return this.tbt.rI.JAt||this.jlt.JAt}get $At(){return this.tbt.rI.$At||this.jlt.$At}get rbt(){return this.tbt.rbt}get tyt(){return this.tbt.rI.tyt||this.jlt.tyt}get eat(){return this.tbt.eat}get iyt(){return this.tbt.rI.iyt||this.jlt.iyt}get YA(){const t=this.gX.split("/")[0];return"application"===t||"text"===t||YI(this.gX,this.cht)?Ri.ON:"video"===t?Ri.NI:"audio"===t?Ri.SI:"image"===t?Ri.II:Ri.dI}get ji(){return this.tbt.rI.ji||this.jlt.ji}get ydt(){return this.obt}set ydt(t){this.obt=t}get sgt(){return this.hbt}set sgt(t){this.hbt=t}xdt(t){const i=Ko(t)?this.tbt.abt(t):this.tbt.xdt(t);return{zu:i.zu,Nct:i.Nct,zI:this.Sft.zI}}ubt(){return this.tbt.ubt()}Kyt(){return this.tbt.Kyt()}cbt(){return this.tbt.cbt()}Mdt(t){return this.tbt.Mdt(t)}Sdt(t,i,e){return this.tbt.Sdt(t,this.Sft.zI,i,e)}fft(t){return Ko(t)?this.eat.lbt(t,this.tbt):this.eat.fft(t)}vdt(t){return Ko(t)?this.eat.dbt(t,this.tbt):this.eat.vdt(t)}gn(){this.tbt.fn(ea.Nut,this.$yt)}constructor(t,i){if(super(),this.Za=void 0,this.ebt=void 0,this.obt=!1,this.hbt=!1,this.ict=t,this.tbt=i,this.tbt.yn(ea.Nut,this.$yt),this.YA===Ri.NI){var e,s;const t=null!=(s=null==(e=this.vgt)?void 0:e.BB())?s:NaN;this.nbt=new iV(this.o,this.FY,this.Qp,"","",t,this.ji,this.Ti)}else this.YA===Ri.SI?this.nbt=new eV(this.o,this.FY,this.Qp,"","",this.GAt):this.nbt=void 0}},rV=class extends sV{get zft(){return this.tbt.rI.zft}get GAt(){var t;return null!=(t=this.tbt.rI.GAt)?t:-1}get cht(){if(this.tbt.rI.cht)return[this.tbt.rI.cht];{const t=[];for(const i of this.lct)i.ibt.length&&-1===t.indexOf(i.Qp)&&t.push(i.Qp);return t}}get Qp(){return this.cht.join()}get WAt(){return this.tbt.rI.WAt}get GY(){return this.tbt.rI.GY}get VN(){return this.gX+'; codecs="'+this.Qp+'"'}get ZAt(){return this.tbt.ZAt}get HAt(){return this.tbt.HAt}get vgt(){return this.tbt.rI.vgt}get Zft(){return this.tbt.rI.Zft}get Ti(){return this.tbt.rI.Ti||0}get o(){return this.tbt.rI.o}get kh(){return this.tbt.rI.kh||""}get XAt(){return this.tbt.rI.XAt}get qAt(){return this.tbt.rI.qAt}get Sft(){return this.wdt.Sft}get gX(){return this.tbt.rI.gX||this.Jft[0].gX}get wdt(){return this.Vpt}get KAt(){return this.tbt.rI.KAt}get lct(){return this.Jft}get Sgt(){return this.tbt.rI.Sgt||[]}get JAt(){return this.tbt.rI.JAt}get $At(){return this.tbt.rI.$At}get tyt(){return this.tbt.rI.tyt}get hG(){return this.tbt.rI.hG}get iyt(){return this.tbt.rI.iyt}get YA(){const t=(this.tbt.rI.VN||this.gX).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||YI(this.gX,this.cht)?Ri.ON:"video"===t?Ri.NI:"audio"===t?Ri.SI:"image"===t?Ri.II:Ri.dI}get ji(){return this.tbt.rI.ji||0}get uet(){return this.tbt.rI.gs||""}get pgt(){return this.qyt}get mgt(){const t=this.pgt,i=this.Jyt;if(void 0===t||void 0===i)return;const e=x.min(i,this.Sft.fbt);return x.max(t,e)}async Yn(t,i){if(0===this.Jft.length){const e=this.tbt.lct.map((e=>this.gbt(e,t,i)));this.Jft=(await Promise.all(e)).filter($t)}this._bt()}async gbt(t,i,e){const s=new nV(this,t),n=await i(s);if(yi(e),n)return s}_bt(){if(!this.Jft.length)throw new b("Detected an AdaptationSet without any supported Representations.")}Kyt(){return this.tbt.Kyt()}cbt(){return this.tbt.cbt()}gn(){this.tbt.fn(ea.Nut,this.$yt);for(const t of this.Jft)t.gn();nt(this.Jft)}constructor(t,i){super(),this.Jft=[],this.Vpt=t,this.tbt=i,this.tbt.yn(ea.Nut,this.$yt)}};function oV(t,i){const e=[];for(const s of i)for(const i of t)e.push(Fe.Ah(i,s));return e}r(),r(),r(),Qi(),r(),r(),r(),r(),Qi();var hV=class{vbt(t){const i=t-this.Vpt.Cn;if(i<0||i>=this.Vpt.ct)return;const e=this.wbt();return void 0!==e&&ce(e,i,1e-5)?this.mbt():this.pbt(i)}bdt(t){const i=t-this.Vpt.Cn;if(!(i<0))return this.Abt(x.min(i,this.Vpt.ct))}mbt(){return this.ybt(0)}bbt(){const t=this.Vpt.ct;if(isFinite(t))return this.Abt(t)}get Mbt(){return this.Vpt.Sbt.Tbt&&void 0!==this.Nbt()}ubt(t){if(this.Vpt.Sbt.YA===nc.FQ){if(this.Mbt){const i=this.mbt(),e=this.Nbt();if(void 0===i||void 0===e)return;return{Ibt:t,Dbt:i,Ebt:e}}const i=this.kbt(t);if(!i)return;return{Ibt:t,Dbt:this.Lbt(t),Ebt:i}}{0;const i=this.mbt();if(i)return{Ibt:t,Dbt:i,Ebt:this.bbt()}}}cbt(t,i){if(i){let t=this.Nft(i.Dbt);const e=this.Edt(i.Ebt);if(e){const i=this.Ift(e);(!t||i.getTime()<t.getTime())&&(t=i)}return t}{const i=this.mbt();if(i){const e=this.Ift(i);if(t.getTime()<e.getTime())return e}const e=this.Vpt.Sbt.xyt;return t.getTime()<e.getTime()?e:void 0}}kbt(t){const i=(t.getTime()-this.Vpt.Sbt.xyt.getTime())/1e3-this.Vpt.Cn+this.xbt;let e=this.Abt(ur(i,0,this.Vpt.ct));if(!e)return;if(e=this.Cbt(e,t),!e)return;let s=this.Edt(e);for(;s&&this.Oft(s,t);)e=s,s=this.Edt(e);return e}Lbt(t){let i;const e=this.jbt.QAt;if(e){const s=(t.getTime()-this.Vpt.Sbt.xyt.getTime())/1e3-this.Vpt.Cn-e.bAt();i=this.Abt(ur(s,0,this.Vpt.ct)),i||(i=this.mbt())}else i=this.mbt();if(!i)return;if(i=this.Cbt(i,t),!i)return;let s=this.Ddt(i);for(;s&&this.Oft(s,t);)i=s,s=this.Ddt(i);return i}Cbt(t,i){let e=t;for(;e&&this.Ift(e).getTime()>i.getTime();)e=this.Ddt(e);if(!e)return;const s=this.Nft(e);if(s&&s.getTime()<=i.getTime()){const t=this.Ddt(e);for(t&&this.Oft(t,i)&&(e=t);e;){if(this.Ift(e).getTime()>i.getTime())return;if(this.Oft(e,i))break;e=this.Edt(e)}if(!e)return}return e}Oft(t,i){if(this.Mbt)return!0;if(this.Ift(t).getTime()>i.getTime())return!1;const e=this.Nft(t);return!(e&&i.getTime()>=e.getTime())}Obt(t,i){if(this.Mbt)return!0;if(this.Rbt(t).getTime()>i.getTime())return!1;const e=this.Nft(t);return!(e&&i.getTime()>=e.getTime())}Pbt(t,i,e){const s=os(i,this.KM)+this.Vpt.Cn;return{ult:t,zbt:i,lB:s,ct:e,dB:s+e}}Rbt(t){return this.Vpt.Sbt.YA===nc.FQ?new Date(this.Vpt.Sbt.xyt.getTime()+1e3*(t.lB+t.ct)):this.Vpt.Sbt.xyt}Ift(t){const i=this.Rbt(t);return this.Vpt.Sbt.YA===nc.FQ?new Date(i.getTime()-1e3*this.xbt):i}Nft(t){let i=1/0;if(this.Vpt.Sbt.YA===nc.FQ){const e=this.jbt.QAt;e&&(i=this.Rbt(t).getTime()+1e3*t.ct+e.MAt())}const e=this.Vpt.Sbt.Lyt;return e&&(i=x.min(i,e.getTime())),i===1/0?void 0:new Date(i)}Bbt(t,i){return t.ult+i}get rQ(){return this.Vpt.Cn-os(this.Ubt,this.KM)}get BAt(){return os(this.Ubt,this.KM)}Mdt(t){return!1}Sdt(t,i,e,s,n){const r=this.Qbt(t);if(!r)return Promise.reject(new b("Invalid segment"));const o=this.Fbt(r.ult,i);return o?Promise.resolve(o):Ao(this.Ybt(r.ult,i,e,s),n)}Fbt(t,i){}Ybt(t,i,e,s){return Promise.reject(new b("Not supported"))}Ddt(t){const i=this.Qbt(t);if(i)return this.ybt(i.ult-1)}Edt(t){const i=this.Qbt(t);if(i)return this.ybt(i.ult+1)}Qbt(t){const i=this.ybt(t.ult);if(i&&i.lB===t.lB)return i;const e=this.vbt(t.lB);return e&&e.lB===t.lB?e:void 0}Vbt(t,i){const e=this.Ndt(t);if(!e||!this.Mdt(e.ult))return;const s=this.Fbt(e.ult,i);return s?s.Vbt(t):void 0}Ndt(t){return this.ybt(t.Gbt)}fft(t){const i=this.Qbt(t);return!!i&&0===i.ult}lbt(t,i){const e=this.Vbt(t,i);return!!e&&0===e.hlt}vdt(t){const i=this.Qbt(t);if(!i)return!1;const e=this.bbt();return!!e&&i.ult===e.ult}dbt(t,i){const e=this.Vbt(t,i);if(!e)return!1;const s=this.bbt();if(!s||e.Gbt!==s.ult)return!1;const n=this.Fbt(e.Gbt,i);return e.hlt+1===n.V}wy(){}constructor(t,i){this.Vpt=t,this.jbt=i,this.KM=i.xj,this.xbt=i.EAt,this.Ubt=i.BAt}},aV=class extends hV{ybt(t){if(t<0)return;const i=this.Wbt.multiply(t),e=os(i,this.KM),s=this.Vpt.ct;if(e>=s)return;const n=this.Zbt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.Pbt(t,i,s-e)}return isFinite(s)&&e+this.Hbt>s?this.Pbt(t,i,s-e):this.Pbt(t,i,this.Hbt)}wbt(){return 0}pbt(t){const i=x.floor(t/this.Hbt),e=this.Zbt();return void 0!==e&&i>=e?this.ybt(e):this.ybt(i)}Abt(t){if(t>=this.Vpt.ct){const t=x.ceil(this.Vpt.ct/this.Hbt)-1,i=this.Zbt();return void 0!==i&&t>=i?this.ybt(i):this.ybt(t)}return this.pbt(t)}Zbt(){const t=this.jbt.VAt;var i;if(void 0!==t)return t-(null!=(i=this.jbt.YAt)?i:1);const e=this.jbt.Xbt;return void 0!==e&&e>0?e-1:void 0}Nbt(){if(isFinite(this.Vpt.ct))return this.bbt()}qbt(t,i){return this.Wbt.multiply(t.ult+(i-1))}Yn(){}constructor(t,i){super(i,t);const e=t.Kbt,s=t.ct;if(void 0===e||void 0===s)throw new b("MultipleSegmentBase does not have a segment duration specified.");this.Wbt=e,this.Hbt=s}};function uV(t,i,e){const s=i.length;if(0===s)return-1;let n=0,r=s-1,o=t.Jbt(i[n]),h=t.$bt(i[r]);for(;n<=r&&t.tMt(o,e)<=0&&t.tMt(e,h)<0;){const a=n+x.floor(t.iMt(e,o,h)*(r-n)),u=i[a],c=t.Jbt(u),l=a+1<s?t.Jbt(i[a+1]):t.$bt(u);if(t.tMt(l,e)<=0)n=a+1,o=l;else{if(!(t.tMt(e,c)<0))return a;r=a-1,h=c}}return-1}function cV(t,i){return uV(lV.Ld,t,i)}r(),r(),r();var lV=class t{static get Ld(){return null!=this.uht||(this.uht=new t),this.uht}Jbt(t){return t.lB}$bt(t){return t.dB}tMt(t,i){return t.compare(i)}iMt(t,i,e){return t.subtract(i).toNumber()/e.subtract(i).toNumber()}};Qi();var dV=.01,fV=class extends hV{ybt(t){if(!(t<0))return t<this.eMt.length?this.eMt[t].ilt:this.sMt(t-this.eMt.length)}wbt(){if(this.eMt.length>0)return os(this.eMt[0].lB,this.KM)}pbt(t){if(this.nMt&&os(this.nMt.lB,this.KM)<=t){const i=os(this.nMt.lB,this.KM),e=os(this.nMt.ct,this.KM),s=x.floor((t-i)/e);return this.sMt(s)}if(this.eMt.length>0&&ce(t,os(this.eMt[0].lB,this.KM),1e-5))return this.eMt[0].ilt;const i=cV(this.eMt,D.fromNumber(t*this.KM));return i<0?void 0:this.eMt[i].ilt}Abt(t){if(!this.nMt&&this.eMt.length>0){const i=this.eMt[this.eMt.length-1];if(function(t,i,e){return Zv(t,i,e)>=0}(t,os(i.dB,this.KM),1e-5))return i.ilt}const i=this.wbt();return i&&t<i?this.eMt[0].ilt:this.pbt(t)}Nbt(){return isFinite(this.Vpt.ct)?this.bbt():this.ybt(this.eMt.length-1)}qbt(t){return this.rMt(t)}sMt(t){if(!this.nMt)return;const i=this.nMt.lB,e=this.nMt.ct,s=i.add(e.multiply(t)),n=os(s,this.KM),r=this.Vpt.ct;if(n>=r)return;const o=this.eMt.length+t,h=x.min(os(e,this.KM),n+r);return this.Pbt(o,s,h)}rMt(t){return t.zbt.add(this.Ubt)}Yn(){const t=this.jbt.rI.eat;if(!t)throw new b("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.oMt(t)}oMt(t){const i=this.Ubt;this.hMt(t,i);const e=this.aMt(t);this.uMt(t,i,e.cMt,e.Gbt)}hMt(t,i){const e=this.eMt;if(0===t.length)nt(e);else{const s=t[0];let n=0;const r=os(s.lB?D.fromString(s.lB,!1).subtract(i):D.ZERO,this.KM);for(;n<e.length&&os(e[n].lB,this.KM)<r-dV;)n++;n>0&&e.splice(0,n)}}aMt(t){const i=this.eMt,e=this.Fmt;let s=0,n=0;for(;s<t.length&&n<i.length;){const r=t[s].LAt||0;if(r<0)break;const o=n+r;if(o>=i.length)break;if(i[o].lB.greaterThanOrEqual(e))break;if(i[n].ilt.ult===n)n=o+1;else for(;n<=o;)i[n].ilt.ult=n,n++;0,s++}return{cMt:s,Gbt:n}}uMt(t,i,e,s){const n=this.eMt;let r,o=e,h=s;for(;o<t.length;){const e=t[o],s=D.fromString(e.ct,!1),a=e.LAt||0;let u;if(e.lB){if(u=D.fromString(e.lB,!1).subtract(i),h>0){const t=n[h-1];t.dB.greaterThan(u)&&(t.ct=u.subtract(t.lB),t.dB=t.lB.add(t.ct))}}else u=h>0?n[h-1].dB:D.ZERO;if(a<0){if(o+1===t.length){r={lB:u,ct:s};break}const e=D.fromString(t[o+1].lB,!1).subtract(i);for(;u.lessThan(e);){const t=u.add(s);this.lMt(n,h,u,s,t),u=t,h++}}else{const t=h+a;for(;h<=t;){const t=u.add(s);this.lMt(n,h,u,s,t),u=t,h++}}o++}h<n.length&&n.splice(h),n.length>0&&(this.Fmt=n[n.length-1].lB),this.nMt=r}lMt(t,i,e,s,n){if(i<t.length){const r=t[i];0,r.ct.equals(s)?r.ilt.ult=i:t[i]={lB:e,ct:s,dB:n,ilt:this.Pbt(i,e,os(s,this.KM))}}else t.push({lB:e,ct:s,dB:n,ilt:this.Pbt(i,e,os(s,this.KM))})}constructor(t,i){super(i,t),this.eMt=[],this.nMt=void 0,this.Fmt=D.ZERO,this.Yn()}};r(),Qi();var gV=class{get rI(){return this.Xp}get EAt(){return this.Xp&&void 0!==this.Xp.EAt?this.Xp.EAt:this.dMt?this.dMt.EAt:0}get BAt(){return this.Xp&&void 0!==this.Xp.BAt?this.Xp.BAt:this.dMt?this.dMt.BAt:D.ZERO}get QAt(){return this.Xp&&void 0!==this.Xp.QAt?this.Xp.QAt:this.dMt?this.dMt.QAt:this.wdt.Sbt.QAt}get xj(){return this.Xp&&void 0!==this.Xp.xj?this.Xp.xj:this.dMt&&this.dMt.xj?this.dMt.xj:1}get xAt(){return this.Xp&&void 0!==this.Xp.xAt?this.Xp.xAt:this.dMt?this.dMt.xAt:void 0}get zAt(){return this.Xp&&void 0!==this.Xp.zAt?this.Xp.zAt:this.dMt?this.dMt.zAt:void 0}get eat(){return this.fMt||(this.fMt=this.gMt()),this.fMt}gMt(){if(this._Mt=this.vMt(),this._Mt)return this._Mt;if(this.dMt)return this.dMt.eat;throw new b("Missing media segment information.")}sbt(t){const i=this.zAt;if(i){return{zu:(void 0!==i.kAt?Fe.Ah(i.kAt,t.oyt[0]):t.oyt[0]).href,Nct:i.Nct}}const e=this.xAt;if(e)return{zu:t.oyt[0].href,Nct:[0,e[0]-1]}}Yn(t){this.Xp=t,this._Mt&&this._Mt.Yn()}wy(){this._Mt&&(this._Mt.wy(),this._Mt=void 0)}constructor(t,i,e){this.fMt=void 0,this._Mt=void 0,this.wdt=t,this.dMt=i,this.Xp=e}},_V=class extends gV{get ct(){return void 0!==this.Xp.ct?this.Xp.ct/this.xj:this.dMt&&vV(this.dMt)?this.dMt.ct:void 0}get Kbt(){return void 0!==this.Xp.ct?D.fromNumber(this.Xp.ct):this.dMt&&vV(this.dMt)?this.dMt.Kbt:void 0}get YAt(){return void 0!==this.Xp.YAt?this.Xp.YAt:this.dMt&&vV(this.dMt)?this.dMt.YAt:void 0}get VAt(){return void 0!==this.Xp.VAt?this.Xp.VAt:this.dMt&&vV(this.dMt)?this.dMt.VAt:void 0}vMt(){return void 0!==this.Xp.eat?new fV(this,this.wdt):void 0!==this.Xp.ct?new aV(this,this.wdt):void 0}};function vV(t){return t instanceof _V}r();var wV=class{sM(t){return this.wMt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((i,e,s,n)=>{if("$$"===i)return"$";const r=t[e];if(void 0===r)return i;if(void 0===s)return r.toString();let o=function(t,i){switch(i){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===o?i:(o=_c(o,Number(s),"0"),o)}))}constructor(t){this.wMt=t}};Qi();var mV=class t extends _V{get nyt(){return this.mMt?this.mMt:this.dMt&&this.dMt instanceof t?this.dMt.nyt:void 0}get ryt(){return this.pMt?this.pMt:this.dMt&&this.dMt instanceof t?this.dMt.ryt:void 0}sbt(t){const i=this.nyt;if(!i)return super.sbt(t);const e=i.sM({Bandwidth:t.rI.FY,RepresentationID:t.rI.o});return{zu:Fe.TA(e,t.oyt[0])}}xdt(t,i){var e;const s=null!=(e=i.rbt.YAt)?e:1,n=this.ryt.sM({Bandwidth:i.rI.FY,Number:i.eat.Bbt(t,s),RepresentationID:i.rI.o,Time:i.eat.qbt(t,s)});return{zu:Fe.TA(n,i.oyt[0])}}abt(t,i){}get Xbt(){}constructor(t,i,e){super(t,i,e),this.mMt=e.nyt?new wV(e.nyt):void 0,this.pMt=e.ryt?new wV(e.ryt):void 0}};r(),Qi();var pV=class t extends _V{xdt(t,i){const e=this.jAt[t.ult],s=i.oyt[0];let n;return n=e.zj?Fe.Ah(e.zj,s):s,{zu:n.href,Nct:e.CAt}}abt(t,i){}get jAt(){return void 0!==this.Xp.jAt?this.Xp.jAt:this.dMt&&this.dMt instanceof t?this.dMt.jAt:void 0}get Xbt(){var t;return null==(t=this.jAt)?void 0:t.length}};r(),r(),r(),r();var AV=class{Vbt(t){const i=this.Idt(t.hlt);if(i&&i.lB===t.lB)return i;const e=this.AMt(t.lB);return e&&e.lB===t.lB?e:void 0}},yV=class extends AV{get V(){return this.yMt.length}Idt(t){if(t>=0&&t<this.V)return this.bMt(this.yMt[t])}AMt(t){const i=this.MMt(t);if(this.yMt.length>0){const t=this.yMt[0];if(i<=os(t.lB,this.xj))return this.bMt(t)}const e=cV(this.yMt,D.fromNumber(i*this.xj));if(!(e<0))return this.bMt(this.yMt[e])}Tdt(t){const i=this.MMt(t);if(this.yMt.length>0){const t=this.yMt[this.yMt.length-1];if(i>=os(t.dB,this.xj))return this.bMt(t)}return this.AMt(t)}bMt(t){const i=os(t.lB,this.xj)-this.BAt,e=i+this.TMt,s=os(t.ct,this.xj);return{Gbt:this.Gbt,hlt:t.ult,lB:e,zbt:D.fromNumber(i*this.xj),ct:s,dB:e+s,SMt:[t.NMt,t.IMt]}}MMt(t){return t-this.TMt+this.BAt}constructor(t,i,e,s,n){super(),this.Gbt=t,this.xj=i,this.TMt=e,this.BAt=s,this.yMt=n}};r(),r(),r(),Qi();var bV=class t{cmt(){return this.OC.tc<this.rI.byteLength}DMt(){const i=this.EMt(),e=this.kMt(),s=this.OC.tc,n=this.rI.byteLength;let r;r=t.LMt(e)?n-s:t.xMt(e);const o=s+r<=n?r:n-s,h=ss(this.rI,this.OC,o);return new TV(i,Al(h))}EMt(){const t=this.kMt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let i=0;for(let e=0;e<t.length;e++)i=256*i+t[e];return i}kMt(){const t=on(this.rI,this.OC.Zb());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const i=8-(31-Lw(t));return Fe.lA(i<=8&&i>=1,"Incorrect log2 value"),ss(this.rI,this.OC,i)}static xMt(t){if(8===t.length&&224&t[1])throw new k("EBML variable sized integer is too large");let i=0;for(let e=0;e<t.length;e++){const s=t[e];if(0===e){i=s&(1<<8-t.length)-1}else i=256*i+s}return i}static LMt(t){for(const i of MV)if(_m(t,new T(i)))return!0;return!1}constructor(t){this.rI=t,this.OC=new da}},MV=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],TV=class{CMt(){return this.jMt.byteOffset}OMt(){return new bV(this.jMt)}RMt(){const t=this.jMt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.jMt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let i=0;for(let e=0;e<t;e++){i=256*i+this.jMt.getUint8(e)}return i}zJ(){if(4===this.jMt.byteLength)return this.jMt.getFloat32(0);if(8===this.jMt.byteLength)return this.jMt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,i){this.id=t,this.jMt=i}};function SV(t,i){const e=function(t){const i=new bV(Al(t)),e=i.DMt();if(e.id!==IV)throw new k("Missing WebM EBML header");const s=i.DMt();if(s.id!==DV)throw new k("Missing WebM SegmentElement");const n=s.CMt(),r=function(t){const i=t.OMt();let e;for(;i.cmt();){const t=i.DMt();if(t.id===EV){e=t;break}}if(!e)throw new k("Missing WebM InfoElement");return function(t){const i=t.OMt();let e,s=1e6;for(;i.cmt();){const t=i.DMt();t.id===kV?s=t.RMt():t.id===LV&&(e=t.zJ())}if(void 0===e)throw new k("Missing Duration in WebM InfoElement");const n=s/1e9,r=e*n;return{timecodeScale:n,duration:r}}(e)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(i),s=new bV(Al(t)).DMt();if(s.id!==xV)throw new k("Missing WebM CuesElement");const n=function(t,i,e,s){const n=[],r=t.OMt();let o,h;for(;r.cmt();){const t=r.DMt();if(t.id!==CV)continue;const e=NV(t);if(!e)continue;const s=e.unscaledTime,a=i+e.relativeOffset;void 0!==o&&n.push({ult:n.length,lB:o,ct:s.subtract(o),dB:s,NMt:h,IMt:a-1}),o=s,h=a}if(void 0!==o){0;const t=D.fromNumber(s/e);n.push({ult:n.length,lB:o,ct:t.subtract(o),dB:t,NMt:h,IMt:void 0})}return n}(s,e.segmentOffset,e.timecodeScale,e.duration);return{xj:x.round(1/e.timecodeScale),PMt:n}}function NV(t){const i=t.OMt(),e=i.DMt();if(e.id!==jV)throw new k("Missing CueTime in WebM CuePointElement");const s=D.fromNumber(e.RMt()),n=i.DMt();if(n.id!==OV)throw new k("Missing CueTrackPositions in WebM CuePointElement");const r=n.OMt();let o=0;for(;r.cmt();){const t=r.DMt();if(t.id===RV){o=t.RMt();break}}return{unscaledTime:s,relativeOffset:o}}Qi();var IV=440786851,DV=408125543,EV=357149030,kV=2807729,LV=17545,xV=475249515,CV=187,jV=179,OV=183,RV=241,PV=class extends hV{ybt(t){if(0===t)return this.zMt}wbt(){return 0}pbt(t){return this.zMt}Abt(t){return this.pbt(t)}Nbt(){return this.zMt}qbt(t,i){return D.ZERO}ubt(t){const i=this.BMt(t);return i&&{Ibt:t,Dbt:i,Ebt:i}}BMt(t){const i=this.zMt;return this.Oft(i,t)?i:void 0}kbt(t){return this.BMt(t)}Lbt(t){return this.BMt(t)}Yn(){}Mdt(t){return 0===t&&void 0!==this.UMt}Fbt(t,i){const e=i.oyt[0].href;return this.QMt.get(e)}Ybt(t,i,e,s){const n=i.oyt[0].href;let r=this.FMt.get(n);if(void 0===r){const o=i.gX,h=this.YMt.ly;if(ZA(o))r=this.VMt(t,n,e,s,h);else{if(!HA(o))throw new qi(vt.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+o);r=this.GMt(t,n,i,e,s,h)}this.FMt.set(n,r)}return r}async VMt(t,i,e,s,n){const r=this.UMt,o=await s.Hdt(i,r,e,n),h=this.WMt(t,o);return this.QMt.set(i,h),h}WMt(t,i){const e=this.UMt,s=Qe.ij(new DataView(i),new da);if(s.YA!==Rt.DC)throw new b("Invalid segment index");const n=pe.Mj(s.rI),r=function(t,i){const e=[];let s=t.KR,n=i+t.JR.toNumber(),r=0;for(const i of t.tP){const t=i.WR,o=D.fromNumber(i.ct),h=s.add(o);0===i.GR&&e.push({ult:r++,lB:s,ct:o,dB:h,NMt:n,IMt:n+t-1}),n+=t,s=h}return e}(n,e[1]+1);return new yV(t,n.xj,this.Vpt.Cn,os(this.Ubt,this.KM),r)}async GMt(t,i,e,s,n,r){const o=e.sbt(),h=this.UMt,a=n.Hdt(o.zu,o.Nct,s,r),u=n.Hdt(i,h,s,r),[c,l]=await Promise.all([a,u]),d=this.ZMt(t,l,c);return this.QMt.set(i,d),d}ZMt(t,i,e){const s=SV(new T(i),new T(e));return new yV(t,s.xj,this.Vpt.Cn,os(this.Ubt,this.KM),s.PMt)}wy(){super.wy(),this.YMt.Ty()}constructor(t,i){super(i,t),this.QMt=ll(),this.FMt=ll(),this.YMt=new Wt,this.UMt=t.xAt,this.zMt=this.Pbt(0,D.ZERO,this.Vpt.ct)}},zV=class extends gV{get YAt(){}xdt(t,i){return{zu:i.oyt[0].href}}abt(t,i){return{zu:i.oyt[0].href,Nct:t.SMt}}vMt(){return new PV(this,this.wdt)}};r();var BV=class extends Jr{constructor(){super(ea.Nut)}};r(),Qi();var UV=class extends tu{get rI(){return this.Xp}get oyt(){return this.HMt}XMt(){var t,i;return null!=(i=this.jbt)?i:null==(t=this.lD)?void 0:t.XMt()}qMt(t){const i=this.wdt,e=this.lD&&this.lD.XMt();this.Xp.uyt?this.jbt=new mV(i,e,this.Xp.uyt):this.Xp.ayt?this.jbt=new pV(i,e,this.Xp.ayt[0]):this.Xp.hyt?this.jbt=new zV(i,e,this.Xp.hyt):t&&!e&&(this.jbt=new zV(i,e,void 0))}KMt(t,i){this.Xp=t,this.HMt=t.oyt&&t.oyt.length>0?oV(t.oyt.map((t=>t.zu)),i):i.slice(),this.jbt&&(t.uyt?this.jbt.Yn(t.uyt):t.ayt?this.jbt.Yn(t.ayt[0]):t.hyt&&this.jbt.Yn(t.hyt))}Kyt(){var t;return null==(t=this.JMt)?void 0:t.$Mt}cbt(){var t;return null==(t=this.JMt)?void 0:t.tTt}iTt(t){const i=this.eTt,e=this.wdt.ct,s=this.JMt,n=this.sTt(t);s&&ce(e,i,1e-5)&&VV(s,n)||(this.eTt=e,this.JMt=n,this.yo(new BV))}wy(){this.Bo(),this.jbt&&(this.jbt.wy(),this.jbt=void 0)}constructor(t,i,e){super(),this.jbt=void 0,this.eTt=1/0,this.JMt=void 0,this.lD=i,this.KMt(t,e)}};function QV(t){let i,e;for(const e of t){const t=e.Kyt();if(t){i=t.Cn;break}}if(void 0!==i){for(let i=t.length-1;i>=0;i--){const s=t[i].Kyt();if(s){e=s.jn;break}}return void 0!==e?{Cn:i,jn:e}:void 0}}function FV(t){if(0===t.length)return;let i=0,e=1/0;for(const s of t){const t=s.Kyt();if(!t)return;if(i=x.max(i,t.Cn),e=x.min(e,t.jn),i>=e)return}return{Cn:i,jn:e}}function YV(t){let i;for(const e of t){const t=e.cbt();t&&(!i||t.getTime()<i.getTime())&&(i=t)}return i}function VV(t,i){return function(t,i){return t&&i?t.getTime()===i.getTime():t===i}(t.tTt,i.tTt)&&function(t,i){return t&&i?ce(t.Cn,i.Cn,1e-5)&&ce(t.jn,i.jn,1e-5):t===i}(t.$Mt,i.$Mt)}var GV=class extends sV{get Igt(){return this.nTt}get cht(){return this.Igt.reduce(((t,i)=>{for(const e of i.cht)Qa(t,e)||t.push(e);return t}),[])}get Qp(){return this.cht.length>0?this.cht[0]:""}get YA(){return this.nTt[0].YA}get o(){return this.aS}get Sft(){return this.Vpt.Sft}get gX(){return this.nTt[0].gX}get wdt(){return this.Vpt}get lct(){return Ms(this.Igt,(t=>t.lct))}Kyt(){return FV(this.nTt)}cbt(){let t;for(const i of this.nTt){const e=i.cbt();e&&(!t||e.getTime()<t.getTime())&&(t=e)}return t}gn(){this.Bo();for(const t of this.nTt)t.fn(ea.Nut,this.$yt)}constructor(t,i,e){super(),this.Vpt=t,this.aS=i,this.nTt=e.slice();for(const t of e)t.yn(ea.Nut,this.$yt)}};r();var WV=class extends Jr{constructor(){super(ea.Dut)}};function ZV(t){const i=[];for(const e of t){let t;const s=e.Zft;void 0===s||(t=dl(i,(t=>t.o===s))),t||(t={o:s,Igt:[]},i.push(t)),t.Igt.push(e)}return i}r(),Qi();var HV=class extends sV{get Igt(){return this.nTt}get Ypt(){return this.rTt}get Iyt(){return this.tbt.rI.Iyt}get ct(){return this.tbt.ct}get jn(){return this.Cn+this.ct}get Dyt(){return this.tbt.rI.Dyt||[]}get o(){return this.tbt.o}get Eut(){return this.oTt}get Sft(){return this.hTt}get mAt(){return this.hTt.aTt(this)}get wdt(){return this}get wAt(){return this.hTt.uTt(this)}get cTt(){return this.lTt(1/0,x.min)}get dTt(){return this.lTt(0,x.max)}lTt(t,i){if(0===this.rTt.length)return;let e=t;for(const t of this.rTt)if(ou(t.YA)){const s=t.Jyt;if(void 0===s)return;e=i(e,s)}return e}get Cn(){return this.tbt.Cn}get zI(){return this.Sft.zI}fTt(){this.oTt||(this.oTt=!0,this.yo(new WV),this.gn())}async Yn(t,i){0===this.nTt.length?(await this.gTt(this.tbt.Igt,t,i),this._Tt(this.nTt),yi(i)):await this.vTt(t,i)}async gTt(t,i,e){for(const s of t){const t=new rV(this,s);try{await t.Yn(i,e),this.nTt.push(t)}catch(t){V(t)}}}_Tt(t){const i=ZV(t);for(const t of i){const i=new GV(this,t.o,t.Igt);this.rTt.push(i)}}async vTt(t,i){for(const e of this.nTt)await e.Yn(t,i)}Kyt(){return this.tbt.Kyt()}cbt(){return this.tbt.cbt()}gn(){this.Bo(),this.tbt.fn(ea.Nut,this.$yt);for(const t of this.rTt)t.gn();for(const t of this.nTt)t.gn();nt(this.nTt),nt(this.rTt)}constructor(t,i){super(),this.nTt=[],this.rTt=[],this.oTt=!1,this.hTt=t,this.tbt=i,this.tbt.yn(ea.Nut,this.$yt)}};r();var XV=class extends Jr{constructor(){super(Zi.fb)}};Qi(),r(),r();var qV=function(t){return t.wTt="mTt",t}({}),KV=class extends Jr{constructor(){super(qV.wTt)}};r(),r(),r(),r();var JV=class extends UV{get jlt(){return this.ict}get wdt(){return this.ict.wdt}get Sbt(){return this.ict.Sbt}get gX(){return this.Xp.gX||this.ict.gX}get rbt(){return this.XMt()}get eat(){return this.rbt.eat}Mdt(t){const i=this.gX;return!(!ZA(i)&&!HA(i))&&this.eat.Mdt(t.ult)}Sdt(t,i,e,s){return this.eat.Sdt(t,this,i,e,s)}sbt(){return this.rbt.sbt(this)}xdt(t){return this.rbt.xdt(t,this)}abt(t){return this.rbt.abt(t,this)}ubt(){return this.pTt}sTt(t){const i=this.eat,e=i.ubt(t),s=e&&function(t,i){const{Dbt:e,Ebt:s,Ibt:n}=t,r=e.lB;let o;const h=i.Rbt(s);if(h.getTime()<=n.getTime())o=s.dB;else{const t=(h.getTime()-n.getTime())/1e3,i=x.max(s.ct-t,0);o=s.lB+i}return{Cn:r,jn:o}}(e,i),n=this.eat.cbt(t,e);return this.pTt=e,{Ibt:t,$Mt:s,tTt:n}}Yn(t){this.KMt(t,this.ict.oyt)}constructor(t,i){super(t,i,i.oyt),this.pTt=void 0,this.ict=i,this.qMt(!0)}},$V=class extends UV{get lct(){return this.Jft}get wdt(){return this.Vpt}get Sbt(){return this.Vpt.Sbt}get Zft(){return this.Xp.Zft}get gX(){var t;return this.Xp.gX||(null==(t=this.Jft[0])?void 0:t.rI.gX)||""}get ZAt(){return this.rI.ZAt}get HAt(){return this.rI.HAt}Yn(t){this.KMt(t,this.Vpt.oyt);const i=t.lct||[];if(this.Jft.length!==i.length)throw new b("Expected "+this.Jft.length+' representations in adaptation set "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.Jft[t].Yn(i[t])}iTt(t){for(const i of this.Jft)i.iTt(t);super.iTt(t)}sTt(t){return{Ibt:t,$Mt:FV(this.Jft),tTt:YV(this.Jft)}}wy(){for(const t of this.Jft)t.wy();super.wy()}constructor(t,i){super(t,i,i.oyt),this.Vpt=i,this.qMt(!1),this.Jft=t.lct.map((t=>new JV(t,this)))}},tG=class extends UV{get Igt(){return this.nTt}get Ypt(){return this.rTt}get wdt(){return this}get Sbt(){return this.ATt}get o(){return this.Xp.o}get Cn(){return this.mQ}get ct(){return this.JM}Yn(t,i){this.KMt(t,this.ATt.oyt),this.JM=i;const e=t.Igt||[];if(this.nTt.length!==e.length)throw new b("Expected "+this.nTt.length+' adaptation sets in period "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.nTt[t].Yn(e[t])}iTt(t){for(const i of this.nTt)i.iTt(t);super.iTt(t)}sTt(t){return{Ibt:t,$Mt:FV(this.nTt),tTt:YV(this.nTt)}}wy(){for(const t of this.nTt)t.wy();super.wy()}constructor(t,i,e,s){super(i,void 0,t.oyt),this.rTt=[],this.ATt=t,this.mQ=e,this.JM=s,this.qMt(!1),this.nTt=(i.Igt||[]).map((t=>new $V(t,this))),this.rTt=ZV(this.nTt)}};Qi(),r();var iG=class{get yTt(){return this.bTt.kyt.jU}get MTt(){return this.bTt.kyt.CU}get TTt(){return this.bTt.kyt.Eyt}get STt(){var t;return null==(t=this.bTt.$E)?void 0:t.jU}get NTt(){var t;return null==(t=this.bTt.$E)?void 0:t.jU}constructor(t){this.bTt=t}},eG=new Date("2000-01-01"),sG=class extends tu{get rI(){return this.Xp}get YA(){return this.Xp.YA||nc.QQ}get xyt(){return this.ITt||this.Xp.xyt||this.Uyt}get Lyt(){return this.Xp.Lyt}get Tbt(){var t,i;return null!=(i=null==(t=this.DTt)?void 0:t.ignoreAvailabilityWindow)&&i}get Pyt(){return this.ETt}get oyt(){return this.HMt}get Cyt(){return this.kTt}get tAt(){return this.LTt}get Uyt(){return this.Xp.Uyt||this.An}get QAt(){return this.Xp.QAt}get xTt(){return this.CTt}get jTt(){return this.An}get Yyt(){return this.bTt}Kyt(){var t;return null==(t=this.JMt)?void 0:t.$Mt}cbt(){var t;return null==(t=this.JMt)?void 0:t.tTt}Yn(t,i,e,s){var n;const r=void 0!==this.Xp&&this.Xp.YA===nc.FQ;this.Xp=t,this.CTt=null!=s?s:e,this.An=e;const o=[mb(i)];this.HMt=t.oyt&&t.oyt.length>0?oV(t.oyt.map((t=>t.zu)),o):o,this.kTt=t.Cyt&&t.Cyt.length>0?oV(t.Cyt,this.HMt):[];const h=this.kTt.map((t=>t.href)),a=i.href;Qa(h,a)||(this.kTt.push(i),h.push(a));const u=this.OTt.href;Qa(h,u)||(this.kTt.push(this.OTt),h.push(u)),this.ETt=null==(n=t.Pyt)?void 0:n.bAt(),t.Yyt&&(this.bTt=new iG(t.Yyt));const c=t.YA===nc.FQ,l=function(t,i,e){const s=[];for(let e=0;e<t.length;e++){const n=t[e];let r;if(n.Cn)r=n.Cn.bAt();else if(e>0&&t[e-1].ct){r=s[e-1]+t[e-1].ct.bAt()}else{if(0!==e||i)break;r=0}s.push(r)}const n=[];for(let i=0;i<s.length-1;i++)n.push({rI:t[i],Cn:s[i],ct:s[i+1]-s[i]});if(s.length>0){const r=s.length-1,o=t[r],h=s[r];let a=1/0;i||(a=o.ct?o.ct.bAt():e-h),n.push({rI:o,Cn:h,ct:a})}return n}(t.tAt,c,this.ETt);this.RTt(l,r,c),this.iTt(e)}RTt(t,i,e){const s=this.LTt;if(0===t.length)return void nt(s);const n=t[0].rI.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const o=s.splice(0,r);for(const t of o)t.wy();if(i&&!e&&s.length>0&&t.length>0){var h;const i=null!=(h=nG(s[0].rI))?h:H.sU;var a;const e=null!=(a=nG(t[0].rI))?a:H.sU;if(e.UB(i)){const n=e.qB(i);void 0!==this.ETt&&(this.ETt+=n.BB());for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];e.Cn=t.Cn,uG(e.rI,t.rI)}i===t.length-1&&(e.ct+=n.BB())}}}for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];0,t.Yn(e.rI,e.ct)}else s.push(new tG(this,e.rI,e.Cn,e.ct))}}iTt(t){for(const i of this.LTt)i.iTt(t);const i=this.JMt,e=this.sTt(t);i&&VV(i,e)||(this.JMt=e,this.yo(new BV))}sTt(t){return{Ibt:t,$Mt:QV(this.LTt),tTt:YV(this.LTt)}}Nbt(){if(0===this.LTt.length)return;const t=this.LTt[this.LTt.length-1];if(isFinite(t.ct))return;if(0===t.Igt.length)return;const i=t.Igt[0];if(0===i.lct.length)return;const e=i.lct[0].eat,s=e.Nbt();return s?{ilt:s,Lyt:e.Nft(s)}:void 0}wy(){this.Bo();for(const t of this.LTt)t.wy()}constructor(t,i,e,s,n){if(super(),this.JMt=void 0,this.ETt=void 0,this.ITt=void 0,this.LTt=[],this.OTt=i,this.DTt=n,this.Yn(t,e,s),t.YA===nc.FQ){const t=this.Nbt();t&&t.Lyt&&t.Lyt.getTime()<eG.getTime()&&(this.ITt=new Date(this.Uyt.getTime()-1e3*(t.ilt.lB+t.ilt.ct)),this.iTt(s))}}};function nG(t){let i=hG(t);var e,s;for(const s of null!=(e=t.Igt)?e:[])i=TN(i,rG(s));for(const e of null!=(s=t.Dyt)?s:[])i=TN(i,aG(e));return i}function rG(t){let i=hG(t);for(const e of t.lct)i=TN(i,oG(e));return i}function oG(t){return hG(t)}function hG(t){let i;if(void 0!==t.uyt&&(i=TN(i,aG(t.uyt))),void 0!==t.hyt&&(i=TN(i,aG(t.hyt))),void 0!==t.ayt)for(const e of t.ayt)i=TN(i,aG(e));return i}function aG(t){var i,e;return H.tU(null!=(i=t.BAt)?i:D.ZERO,null!=(e=t.xj)?e:1)}function uG(t,i){if(dG(t,i),t.Cn=i.Cn,void 0!==t.Igt&&void 0!==i.Igt&&t.Igt.length===i.Igt.length)for(let e=0;e<t.Igt.length;e++)cG(t.Igt[e],i.Igt[e]);if(void 0!==t.Dyt&&void 0!==i.Dyt&&t.Dyt.length===i.Dyt.length)for(let e=0;e<t.Dyt.length;e++)fG(t.Dyt[e],i.Dyt[e])}function cG(t,i){if(dG(t,i),void 0!==t.lct&&void 0!==i.lct&&t.lct.length===i.lct.length)for(let e=0;e<t.lct.length;e++)lG(t.lct[e],i.lct[e])}function lG(t,i){dG(t,i)}function dG(t,i){if(void 0!==t.uyt&&void 0!==i.uyt&&fG(t.uyt,i.uyt),void 0!==t.hyt&&void 0!==i.hyt&&fG(t.hyt,i.hyt),void 0!==t.ayt&&void 0!==i.ayt&&t.ayt.length===i.ayt.length)for(let e=0;e<t.ayt.length;e++)fG(t.ayt[e],i.ayt[e])}function fG(t,i){t.xj=i.xj,t.BAt=i.BAt}r(),Qi();var gG=class{async FK(t){await this.PTt(t,this.OQ,this.zTt,this.BTt).catch(Ct)}Tft(){return new Date(B()+this.UTt)}async PTt(t,i,e,s){let n;if(s&&(n=await this.QTt(i,s,e)),void 0===n){yi(e);for(const s of t)if(n=await this.FTt(i,s,e),void 0!==n)break}this.UTt=void 0===n?0:n-B()}async FTt(t,i,e){switch(i.A8){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=i.zD;if(s)return await this.QTt(t,s,e);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=i.zD;if(t){const i=new Date(t).getTime();if(!j(i))return i}break}default:return}}async QTt(t,i,e){try{const s=await t.hI({zu:i,xI:Ve.GET,oI:Ee.ON,ly:e}),n=await s.UN(),r=new Date(n).getTime();if(!j(r))return r}catch(t){V(t)}}constructor(t,i,e){this.OQ=t,this.zTt=i,this.BTt=e,this.UTt=0}},_G=class extends tu{get Lyt(){return this.tbt&&this.tbt.Lyt}get xyt(){return this.tbt&&this.tbt.xyt}get Tbt(){return this.tbt&&this.tbt.Tbt}get o(){return this.tbt&&this.tbt.rI.o}get xTt(){var t;return null==(t=this.tbt)?void 0:t.xTt}get YTt(){var t;return null==(t=this.tbt)?void 0:t.jTt}get Cyt(){return this.tbt?this.tbt.Cyt.map((t=>t.href)):[this.VTt]}get VTt(){return this.GTt.href}get Oyt(){return this.tbt&&this.tbt.rI.Oyt}get Ryt(){return this.tbt&&this.tbt.rI.Ryt}get Pyt(){return this.tbt&&this.tbt.rI.Pyt}get zyt(){return this.tbt&&this.tbt.rI.zyt}get Byt(){var t,i;const e=(null==(i=this.tbt)||null==(t=i.rI.Byt)?void 0:t.MAt())||0;return x.max(e,wG)}get XE(){return this.WTt}ZTt(t){const i=this.XE;this.WTt=t,i!==this.XE&&this.yo(new KV)}get tAt(){return this.LTt}get HTt(){return this.YA===nc.FQ?this.fbt:this.XTt}get qTt(){const t=this.HTt;if(void 0!==t)for(const i of this.tAt)if(i.Cn<=t&&i.jn>t)return i}get KAt(){return this.tbt&&this.tbt.rI.KAt}get Uyt(){return this.tbt&&this.tbt.Uyt}get cTt(){for(let t=this.LTt.length-1;t>=0;t-=1){const i=this.LTt[t].cTt;if(i)return i}}get fbt(){const t=this.cTt;if(void 0===t)return;const i=t-this.KTt;return x.max(i,this.XTt)}get XTt(){for(const t of this.LTt){const i=t.qyt;if(void 0!==i)return i}}get zI(){return Boolean(this.JTt.zI)}get KTt(){var t,i;if(this.JTt.$Tt&&this.YA===nc.FQ)return this.JTt.$Tt;const e=null==(i=this.tbt)||null==(t=i.rI.Qyt)?void 0:t.bAt();return void 0!==e?e:this.YA===nc.FQ?1.5*this.zyt.bAt():0}get QAt(){return this.tbt&&this.tbt.QAt}get YA(){return this.tbt?this.tbt.YA:void 0}get Yyt(){var t;return null==(t=this.tbt)?void 0:t.Yyt}async Yn(t,i,e){const s=[],n=[],r=t.jyt?Fe.Ah(t.jyt,this.GTt):this.GTt;void 0===this.tbt?(await this.tSt.FK(t.Fyt),this.tbt=new sG(t,this.GTt,r,this.Tft(),this.DTt),this.tbt.yn(ea.Nut,this.Ds)):this.tbt.Yn(t,r,this.Tft(),i);const o=this.tbt.tAt;let h;if(0===o.length)h=this.LTt.slice(),nt(this.LTt);else{const t=o[0].o;let i=0;for(;i<this.LTt.length&&this.LTt[i].o!==t;)i++;h=this.LTt.splice(0,i);for(let t=0;t<o.length;t++){const i=o[t];let r;t<this.LTt.length?r=this.LTt[t]:(r=new HV(this,i),s.push(r)),n.push(r.Yn(this.iSt,e))}}await Promise.all(n),this.LTt.push(...s);for(const t of h)t.fTt();this.yo(new XV)}Tft(){return this.tSt.Tft()}uTt(t){const i=this.LTt.indexOf(t);if(i>0)return this.LTt[i-1]}aTt(t){const i=this.LTt.indexOf(t);if(i>=0&&i+1<this.LTt.length)return this.LTt[i+1]}Kyt(){return this.tbt?this.tbt.Kyt():void 0}cbt(){return this.tbt&&this.tbt.cbt()}iTt(t){this.tbt&&this.tbt.iTt(t)}gn(){this.Bo(),this.eSt=void 0,this.ZTt(!1);for(const t of this.LTt)t.gn();nt(this.LTt),this.tbt&&this.tbt.wy()}constructor(t,i,e,s,n){super(),this.tbt=void 0,this.WTt=!0,this.LTt=[],this.eSt=void 0,this.JTt=t,this.GTt=t.WL,this.iSt=i,this.OQ=e,this.sSt=s,this.tSt=new gG(this.OQ,this.sSt,this.JTt.nSt),this.DTt=n}},vG=class{get Sft(){return this.hTt}constructor(t,i,e,s,n){this.hTt=new _G(t,i,e,s,n)}};Qi();var wG=1e3,mG=class{get Tr(){return this.tbt}get W(){return this.rSt||(this.rSt=this.oD(this.oSt.ly),X(this.rSt)),this.rSt}async oD(t){this.tbt.Sft.yo(new ms);try{await this.hSt(t),this.tbt.Sft.ZTt(!0)}catch(t){throw V(t),this.rSt=void 0,this.tbt.Sft.ZTt(!1),new b("The provided MPEG-DASH document could not be loaded - "+t.message)}this.aSt=this.uSt(this.oSt.ly)}async uSt(t){try{for(;this.tbt.Sft.YA===nc.FQ;)await Ao(this.cSt,t)}catch(t){}}get cSt(){return this.tbt.Sft.YTt&&this.tbt.Sft.YA===nc.FQ?this.lSt(this.oSt.ly):this.W}async dSt(t){yi(t);const i=this.fSt();if(i>0){const e=x.min(i,2147483647);await Dt(e,t)}try{await this.hSt(t),this.tbt.Sft.ZTt(!0)}catch(t){throw new b("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.gSt=void 0}}fSt(){const t=this.tbt.Sft.Tft().getTime()-this.tbt.Sft.xTt.getTime();return this.tbt.Sft.Byt-t}_St(t){const i=this.tbt.Sft.cbt();if(i){const e=i.getTime()-t.getTime();if(e>0)return e}this.tbt.Sft.iTt(t);const e=this.tbt.Sft.cbt();return e?e.getTime()-t.getTime():NaN}async lSt(t){const i={stack:[],error:void 0,hasError:!1};try{null!=this.gSt||(this.gSt=this.dSt(t));const e=Ne(i,Wt.Iy([t]),!1),s=[this.gSt,this.vSt(e.ly)].filter($t);await Promise.race(s).catch(Ct)}catch(t){i.error=t,i.hasError=!0}finally{qr(i)}}vSt(t){const i=this.tbt.Sft.Tft(),e=this._St(i);if(!j(e)&&!this.Tr.Sft.Tbt)return this.wSt(e,t)}async wSt(t,i){await Dt(t,i);const e=this.tbt.Sft.Tft();this.tbt.Sft.iTt(e)}async mSt(t,i){const e=await this.ASt.pSt(t,{},i);return(new XY).Vyt(e.ySt,e.lI)}gn(){return this.oSt.Ty(),this.aSt=void 0,this.rSt=void 0,this.gSt=void 0,this.tbt.Sft.gn(),Promise.resolve()}constructor(t,i,e,s,n){this.oSt=new Wt,this.hSt=async t=>{try{const i=this.tbt.Sft.Tft(),e=await this.mSt(this.tbt.Sft.Cyt,t);await this.tbt.Sft.Yn(e,i,t)}catch(t){throw Cb(t)&&this.tbt.Sft.ZTt(!1),t}},this.ASt=s,this.tbt=new vG(t,i,e,this.oSt.ly,n)}};r(),r();var pG=class extends Jr{constructor(t,i){super("aAt"),this.pAt=t,this.ogt=i}},AG=class extends tu{get ogt(){return this.hgt}get YA(){return this.Zp}get Z(){return this.yL.slice()}EQ(t){t&&this.hgt!==t&&this.bSt(t)}kQ(t){this.hgt===t&&this.bSt(void 0)}bSt(t){this.hgt=t,this.yo(new pG(this,this.hgt))}gn(){this.Bo();for(const t of this.yL)t.Zft=void 0;nt(this.yL)}constructor(t,i){super(),this.hgt=void 0,this.Zp=t,this.yL=i;for(const t of this.yL)t.Zft=this}};Qi(),r(),r(),r();var yG=class extends Jr{constructor(t,i,e){super(Zi.Xy),this.currentTime=t,this.initDataType=i,this.initData=e}};function bG(t,i,e,s,n){let r=[],o=[];for(const t of i)t.YA===Ri.SI?r=r.concat(t.Z):t.YA===Ri.NI&&(o=o.concat(t.Z));return[MG(t,r,e,s,null==n?void 0:n.preferredAudioCodecs),TG(t,o,e,s,null==n?void 0:n.preferredVideoCodecs)].filter($t)}function MG(t,i,e,s,n){const r=dl(s||[],(t=>t.Fut===Ri.SI&&t.Rt)),o=[NG(r,e,t),IG(r),DG(r),EG(r,n),kG(),t=>{const i=t.filter((t=>"main"===t.Lt));return i.length>0?i:t}];return SG(i,o)}function TG(t,i,e,s,n){const r=dl(s||[],(t=>t.Fut===Ri.NI&&t.Rt)),o=[NG(r,e,t),EG(r,n),kG(),t=>{const i=t.filter((t=>"main"===t.Lt));return i.length>0?i:t}];return SG(i,o)}function SG(t,i){if(0===t.length)return;let e=t;for(const t of i){if(1===e.length)return e[0];e=t(e)}return e[0]}function NG(t,i,e){return s=>{const n=t?t.jlt.o:void 0;if(!$t(n))return s;const r=null==i?void 0:i.Iyt,o=e.Iyt,h=r&&o&&r.zD===o.zD,a=dl(s,(t=>t.jlt.o===n));return h&&a?[a]:s}}function IG(t){return i=>{const e=t?t.gs:"",s=i.some((t=>""!==t.gs))?i.filter((t=>""!==t.gs)):i;if(""===e)return s;const n=s.filter((t=>t.gs===e));return n.length>0?n:s}}function DG(t){return i=>{const e=t?t.Lt:"";if(""===e)return i;const s=i.filter((t=>t.Lt===e));return s.length>0?s:i}}function EG(t,i){return t=>{if(i&&i.length>0)for(const e of i){const i=t.filter((t=>t.UL.AL.some((t=>Wo(t.cht,e)))));if(i.length>0)return i}return t}}function kG(){return t=>{let i=[],e=-1/0;for(const s of t){const t=s.jlt.hG;t>e?(e=t,i=[s]):t===e&&i.push(s)}return i}}r(),r();var LG=function(t){return t.MSt="api",t.TSt="start",t}({});r(),Qi();var xG={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},CG=class{SSt(t,i,e){const s=this.lft.maxRetries===1/0?xG:this.lft;return co((()=>this.NSt(t,i,e)),e,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async NSt(t,i,e){let s;for(const n of t)try{const t=new Gs({zu:n,oI:Ee.ON,aI:i,zI:this.ISt,xI:Ve.GET,YA:Rs.fI,OI:ul.dI,ly:e,CI:15e3,jI:5e3}),s=await this.OQ.hI(t),r=await s.UN(e);return{ySt:r,DSt:n,lI:s.lI}}catch(t){s=t}throw s}constructor(t,i,e=xG){this.OQ=t,this.ISt=i,this.lft=e}};r();var jG=class{async pSt(t,i,e){let s;for(const n of this.ESt)try{return await n.pSt(t,i,e)}catch(t){V(t),s=t}throw s}constructor(t){this.ESt=t}},OG=class{async pSt(t,i,e){const s=await this.slt.Tot(t);if(s)return{ySt:s.data,DSt:s.locationURL,lI:s.responseURL};throw new b("Manifest fetch from cache unsuccesful")}constructor(t){this.slt=t}},RG=class{async pSt(t,i,e){return await this.kSt.SSt(t,i,e)}constructor(t){this.kSt=t}};function PG(t,i){return new jG([new OG(i),new RG(t)])}var zG=class{async pSt(t,i,e){const s=await this.ASt.pSt(t,i,e);return await this.LSt(s),s}async LSt(t){await this.Iv.Cot({key:yr(t.DSt),locationURL:de(t.DSt),responseURL:de(t.lI),data:t.ySt,references:[this.xSt.o]})}constructor(t,i,e){this.ASt=t,this.Iv=i,this.xSt=e}};r();var BG=class extends Jr{constructor(){super(Zi.vb)}};r();var ml=class extends Jr{constructor(){super(Zi._b)}};bs(),r(),r();var UG=class extends qI{CSt(t){return t.fk=Ma.LOADED,this.tt(t),t}jSt(t){for(const i of this.Z.AL)if(i.YL===t)return i}constructor(){super()}};function QG(t,i){return""===i?t:t+" "+i}r(),r(),r();var FG=class extends hN{get ga(){return this.Za||(this.Za=function(t){return fe(Ft(t),{get attributes(){return t.XD},get eventID(){var i;return""+(null!=(i=t.OSt)?i:"")}})}(this)),this.Za}EB(t){return this.U===t.U}constructor(t,i,e,s,n){super(t,i,e,!1,null==n?void 0:n.toString()),this.XD=s,this.OSt=n}},YG=class extends UG{RSt(t){const i=this.CQ.Wk(z.MQ,"","","",void 0,El.EVENT_STREAM);return i.YL=t,this.CSt(i),i}PSt(t,i,e){const s=t.A8;var n;const r=null!=(n=t.zD)?n:"";var o;const h=null!=(o=t.xj)?o:1;var a;const u=null!=(a=t.BAt)?a:D.ZERO,c=QG(s,r);let l=this.jSt(c);l||(l=this.RSt(c));for(const s of t._X)if(!VG(s,l)){const t=GG(s,h,u,i);t.dB>e&&l.RQ(t)}}async $n(t){await this.tr(),this.ATt=t,this.ATt.yn(Zi.fb,this.zSt),this.zSt()}async tr(){this.ATt&&(this.ATt.fn(Zi.fb,this.zSt),this.ATt=void 0);for(const t of this.Z.AL)this.CQ.BQ(t);await super.tr()}constructor(t){super(),this.ATt=void 0,this.zSt=()=>{var t,i;const e=null!=(i=null==(t=this.ATt.Kyt())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.AL)HI(t,e);for(const t of this.ATt.tAt)if(t.jn>e)for(const i of t.Dyt)this.PSt(i,t,e)},this.CQ=t}};function VG(t,i){const e=t.o;if(void 0!==e){if(dl(i.L.AL,(i=>i.OSt===e&&i.U===t.rI)))return!0}return!1}function GG(t,i,e,s){const n=t.o,r=t.jR.toSigned().subtract(e),o=t.ct,h=t.rI,a=t.XD,u=r.toNumber()/i+s.Cn,c=o?o.toNumber()/i:void 0,l=void 0!==c?u+c:s.dTt;return new FG(u,l,h,a,n)}function WG(t,i,e,s,n){const r=[],o=dl(e,(t=>t.A8===lv));if(void 0===o)return;const h=o.zD?function(t){const i=t.split(":",1)[0];switch(i){case"cbcs":case"cenc":return i;default:return}}(o.zD.toLowerCase()):"cenc";if(void 0!==h){for(const t of e)if(t.A8!==lv)for(const i of xv(t.A8)){const e=n&&t.y8?[t.y8]:[];r.push({NS:i,XY:e,qY:void 0,hY:void 0})}if(r.length)return{IF:t,Mpt:{BSt:h,DF:o.DF},bpt:r,USt:i===Ri.SI?s.slice():[],QSt:i===Ri.NI?s.slice():[],T8:!1}}}function ZG(t,i){if(!t)return i;if(!i)return t;const e=[],s=ll();var n;return HG(e,s,t.bpt),HG(e,s,i.bpt),{IF:t.IF,Mpt:{BSt:t.Mpt.BSt,DF:null!=(n=t.Mpt.DF)?n:i.Mpt.DF},bpt:e,USt:XG(t.USt,i.USt,Qa),QSt:XG(t.QSt,i.QSt,Qa),T8:t.T8||i.T8||!1}}function HG(t,i,e){for(const s of e){const e=s.NS.ZA;let n;i.has(e)?(n=i.get(e),n.XY=XG(n.XY,s.XY,qG)):(n=Ei({},s),t.push(n),i.set(e,n))}}function XG(t,i,e){const s=t.slice();for(const t of i)e(s,t)||s.push(t);return s}function qG(t,i){for(const e of t)if(gm(e,i))return!0;return!1}function KG(t,i,e){let s;const n=t.GY;if(n){const r=t.gX,o=[];for(const i of t.cht)o.push(r+'; codecs="'+i+'"');s=WG(i||{},t.YA,n,o,e)}for(const n of t.lct)s=ZG(s,JG(n,i,e));return s}function JG(t,i,e){return WG(i||{},t.YA,t.GY||[],[t.VN],e)}function $G(t){return t?t.bpt.map((i=>{const e=tW(t.IF,i.NS),s=t.Mpt.BSt;return{NS:i.NS,XY:i.XY,hY:i.hY,HV:[{initDataTypes:[i.NS.GA],audioCapabilities:iW(t.USt,s,null==e?void 0:e.audioRobustness),videoCapabilities:iW(t.QSt,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]}})):[]}function tW(t,i){switch(i.YA){case Sv.BA:return t.widevine;case Sv.zA:return t.playready;case Sv.QA:return t.fairplay;case Sv.UA:return t.clearkey}}function iW(t,i,e){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:i,robustness:e})))}function eW(t,i){const e=t=>{const e=i.indexOf(t.NS.ZA);return e>=0?e:i.length};return qs(t,((t,i)=>e(t)-e(i)))}r(),r();var sW=class extends UG{RSt(t){const i=this.CQ.Wk(z.MQ,t.o,"thumbnails","",!1,El.DEFAULT);return i.UI=ua.Jn,this.CSt(i),i}async $n(t){await this.tr(),this.ATt=t,this.ATt.yn(Zi.fb,this.Yn),this.Yn()}FSt(t){this.YSt(t),this.VSt()}VSt(){const t=[];for(const i of this.Z.AL)this.GSt(i)||t.push(i);for(const i of t)this.it(i)}YSt(t){const i=[];for(const e of this.Jft)-1===t.indexOf(e)&&i.push(e);for(const t of i)ra(this.Jft,t)}async tr(){this.ATt&&(this.ATt.fn(Zi.fb,this.Yn),this.ATt=void 0);for(const t of this.Jft)t.fn(ea.Nut,this.WSt);this.Jft.length=0;for(const t of this.Z.AL)this.CQ.BQ(t);await super.tr()}gn(){return this.WSt=void 0,super.gn()}ZSt(){var t,i;const e=null!=(i=null==(t=this.ATt.Kyt())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.AL)HI(t,e)}HSt(t){return this.Z.AL.some((i=>i.o===t.o))}XSt(t){return dl(this.Z.AL,(i=>i.o===t.o))}GSt(t){return this.Jft.some((i=>t.o===i.o))}constructor(t){super(),this.Jft=[],this.Yn=()=>{const t=[];for(const i of this.ATt.tAt)for(const e of i.Igt)if(e.YA===Ri.II&&e.lct.length>0){const i=e.lct[0];t.push(i),this.HSt(i)||this.RSt(i),-1===this.Jft.indexOf(i)&&(this.Jft.push(i),i.yn(ea.Nut,this.WSt)),this.qSt(i)}this.FSt(t)},this.qSt=t=>{const i=this.XSt(t);i&&t&&i.UI!==ua.Ch&&(this.ZSt(),function(t,i){const e=t.eat,s=t.ubt();if(!s)return;const n=s.Dbt,r=s.Ebt,o=t.ji,h=t.Ti,[a,u]=function(t){for(const i of t)if(Wn(i.A8,rW)||Wn(i.A8,oW)){const t=i.zD.match(nW);if(t){const[,i,e]=t;return[Number(i),Number(e)]}}return[1,1]}(t.ZAt);let c=n;for(;c&&c.ult<=r.ult;){const s=t.rbt.ct||c.ct,n=hW(i,c,t.xdt(c).zu,o,h,a,u,s);for(const t of n)i.RQ(t);c=e.Edt(c)}}(t,i))},this.CQ=t;const i=this;this.WSt=function(){i.qSt(this)}}},nW=/^(\d+)x(\d+)$/,rW="http://dashif.org/guidelines/thumbnail_tile",oW="http://dashif.org/thumbnail_tile";function hW(t,i,e,s,n,r,o,h){const a=[],u=i.lB,c=r*o,l=s/r,d=n/o,f=x.round(l),g=x.round(d),_=h/c;if(1===c){const i=u+_;return aW(t,u,i,e)?a:[new hN(u,i,e,!1)]}for(let s=0;s<o;s++)for(let n=0;n<r;n++){const o=u+(s*r+n)*_,h=o+_,c=e+"#xywh="+x.round(n*l)+","+x.round(s*d)+","+f+","+g;if(aW(t,o,h,c)||a.push(new hN(o,h,c,!1)),h>=i.dB)return a}return a}function aW(t,i,e,s){return t.L.AL.some((t=>t.lB===i&&t.dB===e&&t.U===s))}r(),r(),r(),r();var uW=class extends hN{get xR(){return this.KSt}get zD(){return this.JSt}get $St(){return this.tNt}get ga(){return this.Za||(this.Za=function(t){return fe(Ft(t),{get schemeIDURI(){return t.xR},get value(){return t.zD},get emsgID(){return t.$St}})}(this)),this.Za}EB(t){return _m(this.U,t.U)}constructor(t,i,e,s,n,r){super(t,i,r,!1),this.KSt=e,this.JSt=s,this.tNt=n}},cW=class t extends UG{Cft(i,e,s){const n=pe.dj(Al(i));if(!n)return;const r=function(t,i){const e=[];for(const s of t)hT(s,i)&&e.push(s);return e}(n,Rt.IC);if(r.length){const i=t.iNt(n,e,s);this.eNt(r,i,s)}}eNt(t,i,e){for(const s of t){let t;t=1===s.cj?s.jR.toNumber()/s.xj+e:i+s.PR/s.xj;const n=t+s.OR/s.xj;"https://aomedia.org/emsg/ID3"===s.xR||"https://developer.apple.com/streaming/emsg-id3"===s.xR?this.sNt(s,t):this.nNt(s,t,n)}}nNt(t,i,e){const s=QG(t.xR,t.zD);let n=this.jSt(s);n||(n=this.rNt(s),this.CSt(n)),n.RQ(new uW(i,e,t.xR,t.zD,t.o,t.RR))}sNt(t,i){const e=qO(Al(t.RR));if(!e)return;const s=QG(t.xR,t.zD);let n=this.jSt(s);n||(n=this.oNt(s),this.CSt(n));for(const t of e.Y6){const e=new hR(i,t);TO(e,n.L.AL),n.RQ(e)}}static iNt(t,i,e){const s=aT(t,Rt.DC);return s?os(s.KR,s.xj)+e:i}rNt(t){const i=this.CQ.Wk(z.MQ,"","","",void 0,El.EMSG);return i.YL=t,i.UI=ua.FL,i}oNt(t){const i=this.CQ.Wk(z.MQ,"","","",void 0,El.ID3);return i.YL=t,i.UI=ua.FL,i}async tr(){for(const t of this.Z.AL)this.CQ.BQ(t);await super.tr()}constructor(t){super(),this.CQ=t}},lW=class extends cW{async $n(t){await this.tr(),this.ATt=t,this.ATt.yn(Zi.fb,this.zSt),this.zSt()}async tr(){this.ATt&&(this.ATt.fn(Zi.fb,this.zSt),this.ATt=void 0),await super.tr()}constructor(...t){super(...t),this.zSt=()=>{var t,i;const e=null!=(i=null==(t=this.ATt.Kyt())?void 0:t.Cn)?i:0;this.NQ(e)}}};r(),r();var dW=class{Iot(t,i){return this.hNt?this.slt.Iot(t,i):Promise.resolve(!1)}Eot(t,i){return this.hNt?this.slt.Eot(t,i):Promise.resolve(void 0)}async Tot(t){const i=await this.slt.Tot(t);return this.hNt=void 0!==i,i}VJ(t){return this.slt.VJ(t)}constructor(t){this.hNt=!1,this.slt=t}};r();var fW=class extends FT{yz(){var t;return null!=(t=this.pz)?t:0}qL(){this.ta.LE=1/0}bz(){return!0}constructor(t,i,e){super(t,i,e)}},gW=[Zi.mb,Zi.Ab,Zi.Tb,Zi.gb,Zi.Sb],_W=[Zi.pb,Zi.kb,Zi.$y,Zi.Ky],vW=class t extends tu{aNt(t){return!!this.vV&&this.vV.N$(t)}async Yp(t){this.vV=await this.cz.$n(t),this.uNt(),this.cNt(),this.vV.T5(this.ct)}lNt(t){return this.vV.D$(t)}dNt(t){return this.vV.k$(t)}async fNt(){this.gNt=this._Nt,this.vV&&(await this.cz.tr(),this.vV=void 0)}I3(){this.vV.I3()}w3(){const t=this.ct;this.vV.ct<t&&this.vV.T5(t),this.vV.w3()}async vNt(t){const i=this.vV,e=[];i.p5&&e.push(Ij(i.p5,t)),i.A5&&e.push(Ij(i.A5,t)),await Promise.all(e)}wNt(t,i,e,s,n,r){const o=this.cz,h=this.vV;return new gY(o,h,t,i,e,s,n,r,this.mNt,o,this.vpt,this.lft,this.Lpt,this.SV)}pNt(t,i,e){return t.D$(i,e,this.vV)}async ANt(t,i,e,s){const n=this.wNt(this.OQ,this.UG,this.slt,this.wc,t,s);return n.yn(ea.Dut,this.yNt),n.yn(Zi.gb,this.Ds),await n.FK(i,e),n}bNt(t){void 0===t&&(t=!1),this.MNt.Ty(),this.w7.Ty(),this.TNt.Ty(),this.TNt=new Wt,this.SNt=Vh(this.NNt(this.INt,this.m7,this.SNt,t,this.TNt.ly),this.TNt).catch(this.fAt)}async NNt(t,i,e,s,n){await Promise.all([t,i,e]),yi(n),await Ao(this.DNt.rM,n);const r=this.ENt;await r.sct(),this.w3(),yi(n);const o=r.kc,h=r.dAt,a=r.lAt;let u=this.kNt(o,a,o,h,!1),c=this.LNt(a,u);!s&&this.aNt(c)?await this.xNt(a,u,c):(u=this.kNt(o,a,o,h,!0),c=this.LNt(a,u),await this.CNt(a,u,c,n)),yi(n),this.wk?this.Wb(this.LE):this.jNt(),this.ONt()}async xNt(t,i,e){const s=this.ENt;await this.lNt(e),this.RNt=e,await this.pNt(s,t,i),await s.rct(uU.Uat)}async CNt(t,i,e,s){const n=this.ENt;this.T7(),this.PNt();const r=this.zNt;await this.fNt(),await this.Yp(e),this.RNt=e,await this.pNt(n,t,i);try{const t=this.BNt(r,!1,!0,s);X(t),await n.rct(uU.Uat),await t}finally{this.E7(),this.UNt()}}get ht(){return this.Oz}get uV(){const t=this.zNt,i=this.QNt,e=i.bP(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get QNt(){var t,i,e;const s=null!=(e=null==(t=this.ENt)?void 0:t.TE)?e:Mo.PP();var n;const r=null!=(n=null==(i=this.FNt)?void 0:i.TE)?n:Mo.PP();return s.pP(r)}get TE(){return this.QNt.ks()}get NE(){var t;const i=null==(t=this.tbt)?void 0:t.Sft,e=null==i?void 0:i.xyt;if(!i||!e)return;const s=e.getTime(),n=1e3*this.LE;return new Date(n+s)}set NE(t){var i;const e=null==(i=this.tbt)?void 0:i.Sft,s=null==e?void 0:e.xyt;if(!t||!e||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Wb(r-n)}get bt(){return this.wc}get zNt(){return void 0!==this.F8?this.F8:void 0!==this.YNt?this.YNt:this.cz.LE}get LE(){return this.zNt}set LE(t){this.CE(t)}CE(t,i){this.Wb(t,t===1/0)}get ct(){let t=NaN;return this.ENt&&this.ENt.$pt?t=this.ENt.jn:this.tbt&&void 0!==this.tbt.Sft.YA&&(t=this.tbt.Sft.Pyt?this.tbt.Sft.Pyt.bAt():1/0),t}get jn(){return this.ct}get OE(){return this.wk?this.Y8():!(!this.ENt||!this.ENt.$pt)&&this.cz.OE}Y8(){return!!this.wk&&(!(!this.ENt||!this.ENt.$pt)&&this.zNt===this.ENt.jn)}get lt(){return this.dV}get zE(){return this.fV}get UE(){}VNt(){var t;const i=this.GNt;if(0===i.V)return!0;var e;const s=null!=(e=null==(t=this.uV)?void 0:t.jn)?e:this.zNt,n=i.Cn(0);return s>=n||ce(s,n,.001)}WNt(){var t;if(!this.tbt)return!1;if(this.tbt.Sft.YA!==nc.FQ)return!1;const i=null==(t=this.ENt)?void 0:t.kc;if(i&&i.Eut)return!0;const e=[];for(const t of this.tbt.Sft.tAt){const i=t.qyt,s=t.dTt;void 0!==i&&void 0!==s&&e.push(i,s)}const s=new Mo(e).mP();return function(t,i,e){if(!i.V||!e.V)return Mo.PP();const s=i.Cn(0),n=i.jn(i.V-1),r=t.Sn(e)._P().Sn(t).pP(i);return Mo.RP(r.Cn(0),r.jn(r.V-1)).AP(r).DP(((t,i)=>t<s&&i<=n&&i-t>Be))}(this.QNt,this.GNt,s).V>0}get VE(){return Ei({},this._Nt,{Fz:_i.Ld.LY(),Yz:this.ZNt,Vz:{amountOfBufferedAudioSegments:this.HNt,amountOfBufferedVideoSegments:this.XNt}})}get _Nt(){return function(t,i){return{Bz:t.Bz+i.Bz,Uz:t.Uz+i.Uz,Qz:t.Qz+i.Qz}}(this.gNt,this.cz.GE())}get WE(){return this.cz.WE}set WE(t){this.cz.WE=t}get KE(){return this.G8?this.qNt:this.ENt&&this.ENt.$pt?this.KNt:this.qNt}get $E(){return this.cz.$E}set $E(t){this.cz.$E=t}get rk(){let t=this.Fo;return this.ENt&&(t=t.pP(this.JNt)),t.mP(.1).ks()}get JNt(){return this.cz.rk}$Nt(t){this.Fo=this.Fo.pP(t)}get ck(){return this._V}set ck(t){this._V=t,this.tIt()}get fk(){let t=this.cz.fk;return this.iIt&&(t=x.max(Fn.Xn,t)),t}get GNt(){return this.eIt(!1)}get sIt(){return this.eIt(!0)}get _k(){return this.GNt.ks()}get wk(){return this.kG||this.nIt}get nIt(){return this.cz.wk}get V5(){return this.cz.V5}get wV(){}get rIt(){var t,i;return null!=(i=null==(t=this.tbt)?void 0:t.Sft.YA)?i:nc.QQ}get nt(){return this.Ul}get rt(){return this.Pz}get yk(){var t;return this.oIt||(null==(t=this.hIt())?void 0:t.Ti)||0}get Tk(){var t;return this.aIt||(null==(t=this.hIt())?void 0:t.ji)||0}get Nk(){return this.cz.Nk}set Nk(t){this.cz.Nk=ur(t,0,1)}get Ek(){return this.mV}get xk(){return!1}set xk(t){}get pV(){return this.AV}uIt(t){t.yn(gW,this.Ds),t.yn(Zi.Ib,this.cIt),t.yn(Zi.Qy,this.lIt),t.yn(Xi.ua,this.dIt),t.yn(Zi.Yy,this.fIt),t.yn(Zi.Ab,this.gIt),t.yn("aAt",this._It),t.yn("Upt",this._It)}vIt(t){t.fn(gW,this.Ds),t.fn(Zi.Ib,this.cIt),t.fn(Zi.Qy,this.lIt),t.fn(Xi.ua,this.dIt),t.fn(Zi.Yy,this.fIt),t.fn(Zi.Ab,this.gIt),t.fn("aAt",this._It),t.fn("Upt",this._It)}wIt(t){t.yn(Zi.mb,this.Ds)}mIt(t){t.fn(Zi.mb,this.Ds)}hIt(){if(!this.ENt)return;const t=dl(this.ENt.lAt,(t=>t.Fut===Ri.NI));return t?t.PL:void 0}eIt(t){var i;const e=null==(i=this.tbt)?void 0:i.Sft;if(!e)return Mo.PP();const s=e.XTt;let n=t?e.cTt:e.fbt;if(void 0===s||void 0===n)return Mo.PP();if(!t){const t=this.JNt;t.V>0&&t.jn(t.V-1)>n&&(n=x.min(t.jn(t.V-1),e.cTt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),Mo.RP(s,n).fP()}async $n(t,i){let e,s;yi(i);const n=this.tbt.Sft;try{e=n.qTt,s=n.HTt}catch(t){throw new b("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!e)throw new b("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new b("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.pIt(t.textTracks),this.T7();const r=this.Mgt(e),o=bG(e,r,void 0,void 0,this.Zpt),h=this.kNt(e,o,e,o,!0);o.forEach((t=>t.Rt=!0));const a=this.LNt(o,h);await this.Yp(a),this.RNt=a,yi(i);const u=await this.ANt(e,r,o,h);yi(i),this.AIt(u),this.E7(),yi(i),await u.rct(),yi(i),!this.yIt&&s>0&&this.Wb(s,!0,LG.TSt),this.kG||(this.jNt(),this.bIt())}jNt(){this.MNt.Ty(),this.MNt=new Wt,this.INt=Vh(this.MIt(this.INt,this.SNt,this.MNt.ly),this.MNt).catch(this.fAt)}TIt(){this.MNt.Ty()}async MIt(t,i,e){for(await Promise.all([t,i]),yi(e);;){var s;const t=null==(s=this.ENt)?void 0:s.kc;if(!t){0;break}if(!await this.SIt(t,e)){0;break}}}async SIt(t,i){var e;yi(i);const s=this.ENt;for(0;this.tbt.Sft.YA===nc.FQ&&void 0===(null==(e=this.aTt(t))?void 0:e.qyt);)await Ao(this.NIt.cSt,i),await this.IIt();for(yi(i),await this.IIt(),yi(i);!s.Hpt();)await s.zy(OQ.jgt,i),await this.IIt();yi(i),await this.IIt(),yi(i);const n=this.aTt(t);return n?(this.DIt(n)?await this.EIt(n,i):await this.kIt(n,i),!0):(this.I3(),!1)}DIt(t){var i,e,s,n,r;const o=null!=(r=null==(i=this.wc)?void 0:i.seamlessSwitchStrategy)?r:gu.Mz;if(o===gu.Tz)return!0;if(o===gu.Sz)return!1;const h=this.ENt,a=null==h?void 0:h.kc,u=null==h?void 0:h.lAt,c=bG(t,this.Mgt(t),a,u,this.Zpt),l=this.kNt(t,c,a,u,!1);if(o===gu.CLEAR_ONLY&&((null==(e=this.ENt)?void 0:e.ypt)||l)||o===gu.SAME_DRM_ONLY&&!((null==(s=this.ENt)?void 0:s.ypt)&&l||!(null==(n=this.ENt)?void 0:n.ypt)&&!l))return!1;const d=this.LNt(c,l);return this.aNt(d)}LIt(){return!0}xIt(t){const i=this.CIt();for(const e of i)e!==t&&(e.UI=ua.Ch)}ONt(){if(void 0!==this.jIt){if(this.jIt.GL){const t=dl(this.ht.AL,(t=>t.Rt));void 0!==t&&this.jIt.gs===t.gs||(this.jIt.UI=ua.Ch)}}else this.OIt()}OIt(){if(this.CIt().length)return;const t=dl(this.ht.AL,(t=>t.Rt));if(void 0===t)return;const i=this.nt.AL.filter((t=>t.GL));for(const e of i)if(e.gs===t.gs)return e.UI=ua.Jn,void(this.jIt=e)}CIt(){return this.nt.AL.filter((t=>t.UI===ua.Jn&&(t.Lt===z.yQ||t.Lt===z.AQ)))}RIt(t){if(t&&this.jIt){const i=function(t,i){if(""===t.gs)return;return i.filter((i=>i.gs===t.gs))[0]}(this.jIt,t.nt.AL);i&&(i.UI=ua.Jn)}}async EIt(t,i){var e,s;const n=this.ENt;let r=this.FNt;const o=this.RNt;try{yi(i);const e=n.kc,s=n.lAt,o=this.Mgt(t),h=bG(t,o,e,s,this.Zpt),a=this.kNt(t,h,e,s,!1);h.forEach((t=>t.Rt=!0));const u=this.LNt(h,a);for(0,await n.sct(),this.w3(),yi(i),r&&r.kc===t?(this.aNt(u)&&await this.lNt(u),this.RNt=u):(r&&await r.gn(!0),this.aNt(u)&&await this.lNt(u),this.RNt=u,r=await this.ANt(t,o,h,a),this.FNt=r,this.wIt(r),this.PIt.TL=r.nt,r.hct(n)),await r.rct(),yi(i);this.zNt<t.Cn;)await this.cz.zy(Zi.Eb,i);yi(i),this.AIt(r)}catch(t){throw Tu(t)&&(r&&await r.sct(),o&&this.RNt!==o&&(this.aNt(o)&&await this.lNt(o),this.RNt=o)),t}(null==(s=this.wc)||null==(e=s.dash)?void 0:e.forceSeekToSynchronize)&&await this.zIt(t,i)}async zIt(t,i){const e=Date.now()/1e3;if(void 0===this.BIt)this.BIt=e;else if(e-this.BIt>900){this.BIt=e,this.PNt();const s=x.max(this.zNt,t.Cn);try{await this.BNt(s,!1,!0,i)}finally{this.UNt()}}}async kIt(t,i){for(yi(i),await this.ENt.sct(),this.w3(),await this.vNt(t.Cn),yi(i),this.I3();!this.cz.OE&&this.zNt<t.Cn;)await this.cz.zy([Zi.Eb,Zi.qy],i);yi(i);const e=this.ENt.kc,s=this.ENt.lAt,n=this.Mgt(t),r=bG(t,n,e,s,this.Zpt),o=this.kNt(t,r,e,s,!0);r.forEach((t=>t.Rt=!0));const h=this.LNt(r,o);this.ENt&&(this.UIt.fn(hs.aa,this.QIt),await this.ENt.gn(),this.UIt.yn(hs.aa,this.QIt),this.ENt=void 0),this.FNt&&(await this.FNt.gn(),this.FNt=void 0),this.PNt(),this.T7();const a=x.max(this.zNt,t.Cn);await this.fNt(),await this.Yp(h),this.RNt=h;const u=await this.ANt(t,n,r,o);this.AIt(u);try{const t={stack:[],error:void 0,hasError:!1};try{const e=this.BNt(a,!1,!0,i);X(e),await u.rct();const s=Ne(t,Wt.Iy([i]),!1);await Promise.race([e,u.zy([OQ.jgt],s.ly)])}catch(i){t.error=i,t.hasError=!0}finally{qr(t)}}finally{this.E7(),this.UNt()}}async IIt(){const t=this.FNt;t&&t.kc.Eut&&(await t.gn(!0),this.FNt=void 0)}static FIt(t,i){const e=[],s=[];let n=!i.some((t=>t.Sgt.some((t=>"main"===t.zD))));for(const t of i){if(-1!==e.indexOf(t))continue;const r=mW(t.zft.concat(t.Sgt),n);n=!1;const o=t.lct.map((t=>t.Lut)),h=new EQ(t,o,r),a=pW(t,i);for(const t of a)h.$ft(t),e.push(t);s.push(h)}return new AG(t,s)}Mgt(i){const e=[],s=[];for(const t of i.Ypt)ou(t.YA)&&(0===t.lct.length?this.yo(new jQ("No supported representation found in the AdaptationSet with mimetype : "+t.YA)):t.YA===Ri.SI?e.push(...t.Igt):s.push(...t.Igt));const n=[];return e.length>0&&n.push(t.FIt(Ri.SI,e)),s.length>0&&n.push(t.FIt(Ri.NI,s)),n}LNt(t,i){var e,s,n,r,o,h,a,u;const c=t.map((t=>{var i;return sl.Wdt(null!=(i=t.Kft)?i:t.lct,RT(t.Fut,this.Zpt))})).map((t=>({VN:t.VN}))),l=null==(s=this.wc)||null==(e=s.dash)?void 0:e.desiredTimescale;var d;const f=(null==(n=this.wc)?void 0:n.seamlessSwitchStrategy)!==gu.Sz&&(null==(r=this.wc)?void 0:r.seamlessSwitchStrategy)!==gu.CLEAR_ONLY&&(null==(o=this.wc)?void 0:o.seamlessSwitchStrategy)!==gu.SAME_DRM_ONLY&&(null!=(d=null==(a=this.wc)||null==(h=a.dash)?void 0:h.needsTimescaleShifting)?d:Fe.Ys.jp),g=null==(u=this.wc)?void 0:u.useManagedMediaSource;return{YA:uh.FQ,E5:c,yV:$G(i),T8:null==i?void 0:i.T8,jp:f,T3:l,U5:g}}static YIt(t,i){if(!t.length)return;let e;for(const s of t){const t=0===s.egt.length;e=ZG(e,KG(s.jlt,i,t))}return(null==i?void 0:i.preferredKeySystems)&&e&&(e.bpt=eW(e.bpt,i.preferredKeySystems)),e}kNt(i,e,s,n,r){var o,h;const a=this.wc.contentProtection;let u=t.YIt(e,a);if(void 0!==u)return u;var c;const l=null!=(c=null==(o=this.wc)?void 0:o.seamlessSwitchStrategy)?c:gu.Mz;if(l===gu.Sz||l===gu.CLEAR_ONLY||l===gu.SAME_DRM_ONLY)return;const d=null==(h=this.ENt)?void 0:h.ypt;if(!r&&void 0!==d){const t=!d.T8;if(l===gu.Mz&&t&&!this.LIt())return;return d}const f=!r&&l===gu.Mz;return u=this.VIt(i,a,s,n,f),void 0!==u?(u.T8=!0,u):void 0}VIt(i,e,s,n,r){let o=i,h=!1;for(;;){if(o=h?this.uTt(o):this.aTt(o),void 0===o){if(h)return;h=!0,o=i;continue}const a=bG(o,this.Mgt(o),s,n,this.Zpt),u=t.YIt(a,e);if(r){const t=this.LNt(a,u);if(!this.aNt(t))return}if(void 0!==u)return u}}pIt(t){for(const i of t)i.src&&this.LV.xQ(i);eD(this.LV.Z)}Rk(){var t;const i=this.KE;this.qNt=!0,i||(this.G8||(this.GIt(new J),this.WIt()),(null==(t=this.aV)?void 0:t.zP)&&this.aV.zk(),this.ZIt())}Pk(){this.HIt||(this.HIt=new xh),this.XIt();const t=this.HIt.rM;return X(t),t}XIt(){if(this.qNt=!1,this.s7=!0,this.qIt=!1,this.tIt(),this.OE){const t=this.GNt;t.V>0&&this.Wb(t.Cn(0))}this.G8||this.r7().then(this.KIt,this.GIt),this.yNt(),this.ZIt()}get KNt(){return this.cz.KE}r7(){return this.cz.Pk()}WIt(){this.cz.Rk()}T7(){this.G8||(this.qNt=this.KE,this.G8=!0,this.WIt())}E7(){this.G8&&(this.G8=!1,this.qNt||this.r7().then(this.KIt,this.GIt),this.yNt(),this.ZIt())}ZIt(){const t=this.iF,i=this.KE;t!==i&&(this.iF=i,i?this.yo(new Se(this.LE)):this.yo(new fi(this.LE)))}Wb(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=LG.MSt),this.yIt=!0,this.MNt.Ty(),this.w7.Ty(),this.kG=!0,this.F8=t,this.qIt=this.qIt&&this.Y8(),this.$Nt(this.JNt),this.JIt(new Yr(this.LE)),this.w7=new Wt,this.m7=Vh(this.p7(t,this.INt,this.m7,this.SNt,this.w7.ly,i,e),this.w7).catch(this.fAt),this.m7}$It(){this.w7.Ty()}async p7(t,i,e,s,n,r,o,h){var a;void 0===r&&(r=!1),void 0===o&&(o=LG.MSt),void 0===h&&(h=!1),null==(a=this.aV)||a.zk();try{var u,c;0,await Promise.all([i,e,s]),yi(n),await Ao(this.DNt.rM,n);const a=this.GNt.gP(t);this.F8=a;const l=h||(null==(c=this.wc)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.LE,d=this.tDt(a),f=this.ENt;if(l||!f||!f._k.gr(a)&&o!==LG.TSt&&f.kc!==d){if(d){let t=this.FNt;if(this.T7(),f&&await f.sct(),t&&t.kc===d&&!l){const i=this.LNt(t.dAt,t.ypt);this.w3(),this.aNt(i)&&await this.lNt(i),this.RNt=i}else{t&&await t.gn(!0);const i=this.Mgt(d),e=null==f?void 0:f.kc,s=null==f?void 0:f.lAt,n=bG(d,i,e,s,this.Zpt);let r=this.kNt(d,n,e,s,!1);n.forEach((t=>t.Rt=!0));let o=this.LNt(n,r);this.DIt(d)&&!l?(this.w3(),this.aNt(o)&&await this.lNt(o)):(r=this.kNt(d,n,e,s,!0),o=this.LNt(n,r),f&&(this.UIt.fn(hs.aa,this.QIt),await f.gn(),this.UIt.yn(hs.aa,this.QIt),this.ENt=void 0),await this.fNt(),await this.Yp(o)),this.RNt=o,t=await this.ANt(d,i,n,r),this.FNt=t,this.PIt.TL=t.nt,this.wIt(t),t.hct(this.ENt)}await t.rct(uU.Fat),this.AIt(t)}}else{0;const t=this.FNt;if(t&&!t.iAt){await t.sct(),this.w3();const i=this.LNt(f.dAt,f.ypt);this.aNt(i)&&await this.lNt(i),this.RNt=i}}0;const g=this.BNt(a,r,!1,n);X(g),this.F8=void 0,await this.ENt.rct(uU.Fat),yi(n),this.jNt(),await g,yi(n),this.E7(),this.kG=!1,this.iDt(new aa(this.LE)),this.bIt()}catch(t){if(Tu(t))return void 0;0}}bIt(){if(this.KE||this.wk||void 0===this.Az)return;const t=this.LE;var i,e;this.LE+this.Az-this.Ek.md.maximumOffset<t?null==(i=this.aV)||i.Cn():null==(e=this.aV)||e.zk()}async BNt(t,i,e,s){let n,r,o=!0,h=t;for(;;){const a={stack:[],error:void 0,hasError:!1};try{const u=this.sIt;if(u.V>0){const i=u.gP(t);h!==i&&(u.gr(h)&&this.tbt.Sft.YA===nc.FQ||(h=i,o=!0))}if(o)o=!1,null==r||r.Ty(),r=new Wt,r.Sy(s),n=Vh(this.eDt(h,i,e,r.ly),r),X(n);else if(!this.nIt&&!this.V5)break;const c=Ne(a,Wt.Iy([s]),!1);await Promise.race([n,this.zy([Zi.Tb,Zi.Zy],c.ly),this.tbt.Sft.zy(ea.Nut,c.ly)])}catch(t){a.error=t,a.hasError=!0}finally{qr(a)}}}async eDt(t,i,e,s){for(this.cz.Wb(t,i,e);this.nIt||this.V5;)await this.cz.zy([Zi.bb,Zi.ob],s)}PNt(){void 0===this.YNt&&(this.YNt=this.zNt,this.cz.fn(Zi.Mb,this.JIt),this.cz.fn(Zi.bb,this.iDt))}UNt(){if(void 0===this.YNt)return;const t=this.zNt;this.YNt=void 0,this.cz.yn(Zi.Mb,this.JIt),this.cz.yn(Zi.bb,this.iDt),this.zNt!==t&&this.xc()}sDt(t){this.Fo=this.Fo.pP(t)}tDt(t){const i=this.tbt.Sft,e=i.tAt.filter((t=>t.ct>=.2));if(0===e.length)return;const s=e[0];if(t<=s.Cn)return s;for(const i of e)if(i.jn>t)return i;return i.YA!==nc.FQ?e[e.length-1]:void 0}uTt(t){let i=t.wAt;for(;i&&i.ct<.2;)i=i.wAt;return i}aTt(t){let i=t.mAt;for(;i&&i.ct<.2;)i=i.mAt;return i}async ka(t,i,e){const s={stack:[],error:void 0,hasError:!1};try{var n;if(this.SV.WY(t.contentProtection),this.nDt(),this.wc&&!cS(this.wc)&&await this.tr(),!t||cS(t))return;const o=Ne(s,Wt.Iy([e]),!1);this.zQ=Wt.Iy([o.ly]),this.wc=t,this.rDt=i,this.Zpt=t.abr,this.Lpt=t.ignoreEmbeddedTextTrackTypes;const h=PG(new CG(this.OQ,Boolean(this.wc.useCredentials),this.lft),this.slt);var r;if(this.ZTt(!0),this.NIt=new mG({WL:Fe.Ah(this.wc.src),$Tt:null!=(r=null==(n=this.wc.latencyConfiguration)?void 0:n.targetOffset)?r:this.wc.liveOffset,nSt:this.wc.timeServer,zI:this.wc.useCredentials},this.oDt(this.Zpt),this.OQ,h,this.wc.dash),this.tbt=this.NIt.Tr,this.tbt.Sft.yn(Zi.ub,this.hDt),this.tbt.Sft.yn(Zi.fb,this.aDt),this.tbt.Sft.yn(qV.wTt,this.uDt),this.tbt.Sft.yn(ea.Nut,this.yNt),await this.cDt.$n(this.tbt.Sft),await this.lDt.$n(this.tbt.Sft),Qa(this.Lpt,El.EMSG)||(this.vpt=new lW(this.CQ),this.Ul.$Y(this.vpt.Z),await this.vpt.$n(this.tbt.Sft)),t.latencyConfiguration){const i=t.latencyConfiguration;this.aV=new fW(this,this.cz,i),this.aV.Rt=!0,this.mV.Sa(this.aV)}this.tIt(),o.wy()}catch(t){s.error=t,s.hasError=!0}finally{qr(s)}}async dDt(){const t=this.tbt.Sft.XE;var i,e;(this.ZTt(t),t)?this._It():(await Promise.all([null==(i=this.ENt)?void 0:i.sct(uU.sut),null==(e=this.FNt)?void 0:e.sct(uU.sut)].filter($t)),this.TIt(),this.$It(),this.TNt.Ty())}get XE(){return this.WTt}ZTt(t){this.WTt!==t&&(this.WTt=t,this.yo(t?new BG:new ml))}tIt(){this.tbt&&(this.fDt=this.gDt(this.fDt,this.zQ.ly).catch(this.fAt))}async gDt(t,i){t&&(await t,yi(i));try{this.ck===Dn.Mz||this.s7?await this._Dt(i):this.ck===Dn.MQ&&await this.vDt(i)}catch(t){throw V(t),this.eG(new qi(vt.MANIFEST_LOAD_ERROR,t.message,t)),t}}async _Dt(t){await this.vDt(t),this.wDt||(this.wDt=!0,this.DNt.Sy(this.$n(this.rDt,t)));try{await this.DNt.rM}catch(t){V(t),this.eG(new qi(vt.MEDIA_DECODE_ERROR,t.message,t))}}async vDt(t){await Ao(this.NIt.W,t);const i=this.tbt.Sft;if(void 0===this.aV&&i.YA===nc.FQ){const t=i.Yyt,e=(null==t?void 0:t.TTt)?(null==t?void 0:t.TTt)/1e3:i.KTt,s={minimumOffset:(null==t?void 0:t.yTt)?(null==t?void 0:t.yTt)/1e3:.5*e,maximumOffset:(null==t?void 0:t.MTt)?(null==t?void 0:t.MTt)/1e3:1.5*e,targetOffset:e,forceSeekOffset:2.5*e,minimumPlaybackRate:We,maximumPlaybackRate:ee};this.aV=new fW(this,this.cz,s),this.mV.Sa(this.aV)}}AIt(i){const e=this.ENt;i!==e&&(this.ENt&&this.vIt(this.ENt),this.FNt&&this.mIt(this.FNt),e&&this.$Nt(this.JNt),this.ENt=i,this.FNt=e,this.uIt(this.ENt),this.FNt&&this.wIt(this.FNt),this.Oz.TL=i.ht,this.Pz.TL=i.rt,this.RIt(i),this.UIt.fn(hs.aa,this.QIt),t.mDt(this.UIt),this.UIt.yn(hs.aa,this.QIt),this.UIt.TL=i.nt,this.PIt.TL=void 0,this.OIt())}static mDt(t){for(const i of t.AL)i.UI=ua.Ch}ge(){this.cz.ge()}be(){this.cz.be()}eG(t){this.dV||(X(this.tr()),this.dV=Au(t),this.fV=t,this.yo(new cl(t)))}nDt(){this.dV=void 0,this.fV=void 0}uNt(){const t=this.vV;t&&(t.A5&&(t.A5.PK=this.UG.ZK),t.p5&&(t.p5.PK=this.UG.ZK))}cNt(){const t=this.vV;t&&(t.A5&&(t.A5.QK=this.UG.QK),t.p5&&(t.p5.QK=this.UG.QK))}determineStallJumpTarget(){if(this.ENt)return this.ENt.Hpt()&&this.LE>this.ENt.jn-Mj&&!this.ENt.$pt?this.ENt.jn:void 0}async tr(){if(this.pDt)return this.pDt;try{this.pDt=this.ADt(),await this.pDt}finally{this.pDt=void 0}}async ADt(){this.$E=1,this.zQ.Ty(),this.$It(),this.TIt(),this.TNt.Ty(),this.DNt.Ty(),this.yIt=!1,this.Rk(),this.s7=!1,this.qIt=!1,this.Oz.TL=void 0,this.Pz.TL=void 0,this.UIt.TL=void 0,this.PIt.TL=void 0,this.fDt&&(await this.fDt.catch(Bn),this.fDt=void 0),await Promise.all([this.INt,this.m7,this.SNt,this.DNt.rM.catch(Bn)]),this.ENt&&(await this.ENt.gn(!0),this.ENt=void 0),this.FNt&&(this.mIt(this.FNt),await this.FNt.gn(!0),this.FNt=void 0),await this.fNt(),this.RNt=void 0,this.jIt=void 0,this.OV.tr(),await this.cDt.tr(),await this.lDt.tr(),void 0!==this.vpt&&(this.Ul.eV(this.vpt.Z),await this.vpt.gn(),this.vpt=void 0),this.CQ.tr(),this.tbt&&(this.tbt.Sft.fn(Zi.ub,this.hDt),this.tbt.Sft.fn(Zi.fb,this.aDt),this.tbt.Sft.fn(qV.wTt,this.uDt),await this.NIt.gn(),this.tbt=void 0),this.iIt=!1,this.yDt=NaN,this.bDt=0,this.MDt=0,this.YNt=void 0,this.G8=!1,this.Fo=Mo.PP(),this.iF=!0,this.F8=void 0,this.TDt=!1,this.kG=!1,this.wDt=!1,this.DNt=new xh,this.ZNt=0,this.HNt=0,this.XNt=0,this.wc=void 0,this.rDt=void 0,this.Lpt=[],this.BIt=void 0,this.mV.tr(),this.aV=void 0,this.gNt={Bz:0,Uz:0,Qz:0},await this.LV.tr(),this.cz.jV(),this.SDt.tr()}async gn(){this.Bo(),this.nDt(),await this.tr(),this.Bo(),this.Oz.gn(),this.Pz.gn(),this.UIt.gn(),this.PIt.gn(),this.Ul.gn(),this.OV.gn(),this.NDt.wy(),await this.cDt.gn(),await this.lDt.gn(),this.CQ.gn(),this.SDt.gn(),this.cz.fn(Zi.Zy,this.ptt),this.cz.fn(So.Xy,this.k8),this.cz.fn(Zi.qy,this.IDt),this.cz.fn(Zi.Mb,this.JIt),this.cz.fn(Zi.bb,this.iDt),this.cz.fn(Zi.yb,this.gIt),this.cz.fn(Zi.Eb,this.xc),this.cz.fn([Zi.so,Zi.wb],this.DDt),this.cz.fn(_W,this.Ds),await this.LV.gn(),this.Ul.gn(),this.UG.fn("RK",this.EDt),this.UG.fn("UK",this.kDt),this.cz.fn(Xi.ua,this.LDt),this.cz.fn([Zi.Vy,Zi.Yy],this.Ds),this.cz.fn(Zi.Cb,this.AAt),this.cz.zV=void 0,this.SV.fn("contentProtectionsTracked",this.xDt),this.cz.Rtt=void 0}Ck(){return this.cz.wa}_a(){return this.cz.xV}get FE(){return!1}Bk(){return!1}Uk(){}Qk(){}Fk(){}Yk(){this.bNt(!0)}get Az(){var t;const i=null==(t=this.tbt)?void 0:t.Sft;if(i&&i.YA===nc.FQ&&i.xyt)return i.Tft().getTime()/1e3-i.xyt.getTime()/1e3-this.LE}Wk(t){const i=this.cz.CV(t);return this.SDt.tt(i),i}constructor(t,i,e,s,n,r,o){super(),this.ENt=void 0,this.FNt=void 0,this.s7=!1,this.yDt=NaN,this.dV=void 0,this.fV=void 0,this.G8=!1,this.YNt=void 0,this.F8=void 0,this.TDt=!1,this.bDt=0,this.MDt=0,this.iIt=!1,this.zQ=new Wt,this.DNt=new xh,this.wDt=!1,this.tbt=void 0,this.NIt=void 0,this.WTt=!0,this.qNt=!0,this.HIt=void 0,this.Fo=Mo.PP(),this._V=Dn.pG,this.fDt=void 0,this.iF=!0,this.wc=void 0,this.rDt=void 0,this.Zpt=void 0,this.Lpt=[],this.kG=!1,this.MNt=new Wt,this.INt=Promise.resolve(),this.w7=new Wt,this.m7=Promise.resolve(),this.yIt=!1,this.qIt=!1,this.TNt=new Wt,this.SNt=Promise.resolve(),this.RNt=void 0,this.vpt=void 0,this.ZNt=0,this.HNt=0,this.XNt=0,this.AV=new dr,this.BIt=void 0,this.gNt={Bz:0,Uz:0,Qz:0},this.vV=void 0,this.aV=void 0,this._It=t=>{var i,e,s;let n;"aAt"===(null==t?void 0:t.type)&&(n=t.ogt),n&&(null==(i=n.Zft)?void 0:i.YA)===Ri.SI&&(null==(s=this.bt)||null==(e=s.dash)?void 0:e.forceRecreateMediaSourceOnAudioSwitch)?this.bNt(!0):this.bNt()},this.AAt=t=>{var i;null==(i=this.ENt)||i.AAt(t)},this.xc=()=>{this.yo(new A(this.LE,this.NE))},this.k8=t=>{this.yo(new yG(this.LE,t.GA,t.Vb))},this.cIt=t=>{this.ZNt+=t.Yz,this.yo(t)},this.lIt=t=>{const i=t.segments.filter((t=>t.adt));t.track===Ri.SI?this.HNt=i.length:t.track===Ri.NI&&(this.XNt=i.length)},this.ptt=()=>{const t=this.ct;j(t)||t===this.yDt||(this.yDt=t,this.yo(new yt(this.yDt)))},this.DDt=()=>{this.yNt(),this.ZIt()},this.IDt=t=>{this.qIt||!this.OE||this.wk||(this.qIt=!0,this.yo(null!=t?t:new fa(this.LE)))},this.aDt=t=>{this.Ds(t),this.iIt||(this.iIt=!0,this.NDt.CDt())},this.hDt=()=>{this.tbt.Sft.fn(Zi.ub,this.hDt),this.yo(new ms)},this.fIt=t=>{var i;if(t.errorObject.code===vt.CONTENT_PROTECTION_OUTPUT_RESTRICTED&&(null==(i=this.ENt)?void 0:i.dAt.every((t=>!t.sgt))))return;this.eG(t.errorObject),this.yo(t)},this.dIt=t=>{this.eG(t.errorObject)},this.fAt=t=>{Tu(t)||this.eG(new qi(vt.MEDIA_DECODE_ERROR,t.message,t))},this.yNt=()=>{if(!this.KE)if(this.VNt())if(this.WNt()){const t=this.tbt.Sft.HTt;this.Wb(t,!0)}else;else{const t=this.tbt.Sft.HTt;this.Wb(t,!0)}},this.JIt=t=>{this.TDt=this.wk,this.yo(t)},this.iDt=t=>{const i=this.TDt,e=this.wk;this.TDt=e,i&&!e&&this.yo(t),this.IDt()},this.gIt=()=>{const t=this.Tk,i=this.yk;this.bDt===t&&this.MDt===i||(this.bDt=t,this.MDt=i,this.yo(new vo))},this.QIt=t=>{const i=t.Ht;i.UI===ua.Jn?(this.xIt(i),this.jIt=i):i===this.jIt&&i.UI===ua.Ch&&(this.jIt=void 0,this.OIt())},this.KIt=()=>{this.G8||this.HIt&&(this.HIt.sM(),this.HIt=void 0)},this.GIt=t=>{this.G8||this.HIt&&(this.HIt.nM(t),this.HIt=void 0)},this.uDt=()=>{this.dDt().catch(this.fAt)},this.LDt=t=>{this.eG(ju(t.lt))},this.EDt=()=>{this.uNt()},this.kDt=()=>{this.cNt()},this.xDt=t=>{this.dNt(t.GY)},this.OQ=t,this.slt=new dW(n),this.cz=r,this.mNt=o,this.UG=e,this.UG.yn("RK",this.EDt),this.UG.yn("UK",this.kDt),this.mV=s,this.lft=i.retryConfiguration,this.Oz=new ol,this.Pz=new ol,this.SV=new PE(t),this.SV.yn("contentProtectionsTracked",this.xDt),this.cz.yn(Zi.Zy,this.ptt),this.cz.yn(So.Xy,this.k8),this.cz.yn(Zi.qy,this.IDt),this.cz.yn(Zi.Mb,this.JIt),this.cz.yn(Zi.bb,this.iDt),this.cz.yn(Zi.yb,this.gIt),this.cz.yn(Zi.Eb,this.xc),this.cz.yn([Zi.so,Zi.wb],this.DDt),this.cz.yn(_W,this.Ds),this.cz.yn(Xi.ua,this.LDt),this.cz.zV=this.SV,this.cz.Rtt=this,this.cz.yn([Zi.Vy,Zi.Yy],this.Ds),this.cz.yn(Zi.Cb,this.AAt),this.NDt=new wW(this,this.cz),this.OV=new ko(this.NDt,!0),this.OV.yn(E.rP,this.yNt),this.OV.yn(zT,this.Ds),this.UIt=new Ce,this.UIt.yn(hs.aa,this.QIt),this.PIt=new Ce,this.CQ=this.jDt(),this.cDt=new YG(this.CQ),this.lDt=new sW(this.CQ),this.LV=new or(this.cz,this.OQ),this.SDt=new Uu,this.Ul=new BE([this.UIt,this.cDt.Z,this.lDt.Z,this.LV.Z,this.SDt])}},wW=class extends rD{get fk(){return this.ta.fk}CDt(){this.yo(new cu(this.LE,this.fk))}constructor(t,i){super(i),this.ta=t}};function mW(t,i){const e=t.filter((t=>"urn:mpeg:dash:role:2011"===t.A8)).map((t=>t.zD)).filter($t);return i||Qa(e,"main")?Qa(e,"caption")?"captions":Qa(e,"subtitle")?"subtitles":Qa(e,"dub")?"translation":"main":Qa(e,"sign")?"sign":Qa(e,"description")?"descriptions":Qa(e,"commentary")?"commentary":"alternative"}function pW(t,i){var e;const s=dl([...t.ZAt,...t.HAt],(t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.A8));var n;const r=null!=(n=null==s||null==(e=s.zD)?void 0:e.split(","))?n:[],o=[];for(const t of r){const e=Number(t),s=dl(i,(t=>t.o===e));s&&o.push(s)}return o}var AW=class extends vW{jk(){if(WB(this.cz))return this.cz.jk()}get oIt(){return WB(this.cz)?this.cz.yk:0}get aIt(){return WB(this.cz)?this.cz.Tk:0}async gn(){var t;await super.gn(),null==(t=this.ODt)||t.gn()}DIt(t){var i,e;return((null!=(e=null==(i=this.wc)?void 0:i.seamlessSwitchStrategy)?e:gu.Mz)!==gu.Mz||!Ro.wg)&&super.DIt(t)}LIt(){return!(Ro.Nf&&Ro.Df<3)&&super.LIt()}jDt(){return new XB(this,new Kc)}oDt(t){return ZB(t)}constructor(t,i,e,s,n,r,o){super(t,i,e,s,n,r,new HB(o)),this.vht=o,Ro.qf&&(this.ODt=new nU(this))}},yW=class extends AW{async gn(){await super.gn(),await this.QV.BV(this.cz)}constructor(t,i,e,s,n,r,o,h){const a=new rs(r);super(t,i,e,s,n,a.sG(o),h),this.QV=a}};r(),Uc(),r(),r(),r(),r();var bW=class extends Er{get RDt(){return this.lD.RDt}SE(){return super.SE().Gb(this.RDt)}Fht(){return super.Fht().Gb(this.RDt)}B4(t,i,e){const s=this.RDt;return super.B4(t,{kst:i.kst-s,ct:i.ct,rQ:i.rQ-s},e)}s3(t,i){const e=this.RDt;return super.s3(x.max(0,t-e),x.max(0,i-e))}wS(t,i,e){const s=this.RDt;return super.wS(x.max(0,t-s),x.max(0,i-s),e)}O3(t,i){const e=this.RDt;super.O3(x.max(0,t-e),x.max(0,i-e))}R3(t,i){const e=this.RDt;super.R3(x.max(0,t-e),x.max(0,i-e))}constructor(t,i){super(i),this.lD=t}},MW=class extends Tr{get RDt(){return this.lD.RDt}_d(){return super._d()+this.RDt}T5(t){super.T5(t-this.RDt)}vk(){return super.vk().Gb(this.RDt)}D5(t,i,e,s){const n=this.RDt;super.D5(t-n,i-n,e,s)}Oht(t){return new bW(this,t)}constructor(t,i){super(i),this.Cht(i),this.lD=t}},TW=class extends Br{get wht(){return this.cz}get RDt(){return this.PDt}set RDt(t){this.PDt=t}SE(){return super.SE().Gb(this.PDt)}DE(){return SW(super.DE(),this.PDt)}xE(){return super.xE()+this.PDt}_d(){return super._d()+this.PDt}hk(){return super.hk().Gb(this.PDt)}vk(){return super.vk().Gb(this.PDt)}Wb(t,i,e){const s=x.max(0,t-this.PDt);super.Wb(s,i,e)}cV(t){super.cV(SW(t,-this.PDt))}Ak(){return this.Ul}Wk(t,i,e,s,n,r,o,h){return this.CQ.Wk(t,i,e,s,n,r,o,h)}CV(t){return this.CQ.CV(t)}BQ(t){this.CQ.BQ(t)}jV(){this.CQ.tr(),super.jV()}DV(){return!1}kV(t,i,e,s,n){throw new b("Not supported")}wy(){return this.ast.gn(),this.hst.gn(),this.CQ.gn(),this.Ul.gn(),super.wy()}Eht(t){return new MW(this,t)}Dht(t){return new Jo(t)}Vk(t){let i;switch(t.type){case Zi.so:i=new fi(t.currentTime+this.PDt);break;case Zi.wb:i=new Se(t.currentTime+this.PDt);break;case E.oP:i=new te(t.currentTime+this.PDt);break;case Zi.Eb:i=new A(t.currentTime+this.PDt,SW(t.currentProgramDateTime,this.PDt));break;case Zi.mb:i=new ii(t.currentTime+this.PDt);break;case Zi.Mb:i=new Yr(t.currentTime+this.PDt);break;case Zi.bb:i=new aa(t.currentTime+this.PDt);break;case Zi.eb:i=new Iu(t.currentTime+this.PDt);break;case Zi.ob:i=new SR(t.currentTime+this.PDt);break;case Zi.qy:i=new fa(t.currentTime+this.PDt);break;case Zi.pb:i=new Pu(t.currentTime+this.PDt,t.playbackRate);break;case Zi.kb:i=new $e(t.currentTime+this.PDt,t.volume);break;case Zi.Zy:i=new yt(t.duration+this.PDt);break;case E.lL:i=new cu(t.currentTime+this.PDt,t.readyState);break;default:i=t}super.Vk(i)}be(){super.be(),this.hst.be()}ge(){super.ge(),this.hst.ge()}constructor(t){super(t),this.PDt=0,this.CQ=new XB(this,new Kc),this.Ul=new BE([this.CQ.nt,super.Ak()]),this.hst=new Xn,this.hst.Ott(this.gV.parentElement),this.ast=new Qn(this.hst.we,this.Uu,this.Ul,this.Ll,this.wa,this.xV)}};function SW(t,i){return t?new Date(t.getTime()+1e3*i):void 0}var NW=class extends Sr{sG(t){if(t===Ri.NI)return new TW(super.sG(t))}async BV(t){const i=t;await i.wy(),await super.BV(i.wht)}},IW=class extends AW{async Yp(t){await super.Yp(t),void 0===this.zDt&&(this.zDt=this.BDt(),this.cz.RDt=this.zDt)}BDt(){if(this.ct===1/0){const t=this.GNt;if(t.V>0)return x.max(0,t.Cn(0)-300)}return 0}p7(t,i,e,s,n,r,o,h){return void 0===r&&(r=!1),void 0===o&&(o=LG.MSt),void 0===h&&(h=!1),h||(h=this.ct===1/0&&Ro.Nf&&Ro.Df<3&&t<=this.LE),super.p7(t,i,e,s,n,r,o,h)}async tr(){await super.tr(),this.zDt=void 0,this.cz.RDt=0}async gn(){await super.gn(),await this.cz.wy(),await this.QV.BV(this.cz)}static PS(t){var i;return(!t||"google-dai"!==(null==t||null==(i=t.ssai)?void 0:i.integration))&&(Ro.Nf&&Ro.Df<4)}constructor(t,i,e,s,n,r,o,h){const a=new NW(new rs(r));super(t,i,e,s,n,a.sG(o),h),this.QV=a,this.zDt=void 0}};r(),Uc(),r(),r(),r(),r();var DW=class extends qB{get wht(){return this.cz}get yk(){return this.cz.yk}get Tk(){return this.cz.Tk}constructor(t){super(t)}};r(),r(),r(),bs();var EW=class extends Er{Bht(){return this.UDt?this.XK:super.Bht()}Uht(t){this.UDt?this.XK=t:super.Uht(t)}SE(){return this.UDt?this.QDt:super.SE()}xS(){return this.UDt?this.KS:super.xS()}Fht(){return this.UDt?this.FDt:super.Fht()}Yht(){return this.UDt?this.WK:super.Yht()}Vht(t){this.UDt?this.WK=t:super.Vht(t)}B4(t,i,e){return this.U4((e=>this.YDt(t,i,e)),e)}YDt(t,i,e){return super.B4(t,i,e)}P3(){return this.U4((()=>this.VDt()))}VDt(){return super.P3()}F4(t,i,e){return this.U4((e=>this.GDt(t,i,e)),e)}GDt(t,i,e){return super.F4(t,i,e)}F$(){return this.UDt?this.Ist:super.F$()}I3(){this.UDt?this.WDt=!0:super.I3()}O3(t,i){this.UDt?(this.FDt=this.FDt.pP(new Mo([t,i])),this.ZDt.push({YA:"qlt",lB:t,dB:i})):this.HDt(t,i)}HDt(t,i){super.O3(t,i)}s3(t,i){return this.U4((()=>this.XDt(t,i)))}XDt(t,i){return super.s3(t,i)}R3(t,i){this.UDt?(this.FDt=this.FDt.yP(new Mo([t,i])),this.ZDt.push({YA:"wS",lB:t,dB:i})):this.qDt(t,i)}qDt(t,i){super.R3(t,i)}wS(t,i,e){return this.U4((e=>this.KDt(t,i,e)),e)}KDt(t,i,e){return super.wS(t,i,e)}D$(t){return this.U4((()=>this.JDt(t)))}JDt(t){return super.D$(t)}async U4(t,i){this.d3(),this.UDt&&(await Ao(this.UDt.rM,i),this.d3()),yi(i);try{this.m3=t(i),await this.m3}finally{this.m3=void 0}}d3(){if(this.m3)throw new b("Internal error")}async $Dt(){if(this.UDt)throw new k("Already locked");this.UDt=new xh,this.tEt(),this.m3&&(await this.m3.catch(Bn),this.tEt())}iEt(){var t;null==(t=this.UDt)||t.sM(),this.UDt=void 0,this.eEt()}tEt(){this.KS=super.xS(),this.XK=super.Bht(),this.WK=super.Yht(),this.QDt=super.SE(),this.FDt=super.Fht(),this.Ist=super.F$(),this.WDt=!1}eEt(){this.d3(),super.Uht(this.XK),super.Vht(this.WK);const t=this.ZDt.slice();nt(this.ZDt);for(const i of t)"qlt"===i.YA?this.HDt(i.lB,i.dB):this.qDt(i.lB,i.dB);this.WDt&&super.I3(),this.QDt.IP(super.SE())||this.yo(new Jr(po.g$))}wy(){var t;null==(t=this.UDt)||t.Ty(),this.UDt=void 0,super.wy()}constructor(t){super(t),this.m3=void 0,this.UDt=void 0,this.XK=0,this.QDt=Mo.PP(),this.FDt=Mo.PP(),this.ZDt=[],this.Ist=!1,this.WDt=!1,this.WK=0,this.KS=t.md}},kW=class extends EW{SE(){var t,i;return super.SE().pP(null!=(i=null==(t=this.sEt)?void 0:t.TE)?i:Mo.PP())}Fht(){var t,i;return super.Fht().pP(null!=(i=null==(t=this.sEt)?void 0:t.x3)?i:Mo.PP())}Uht(t){super.Uht(t),this.sEt&&(this.sEt.QK=t)}Vht(t){super.Vht(t),this.sEt&&(this.sEt.PK=t)}HDt(t,i){super.HDt(t,i),this.sEt&&this.sEt.O3(t,i)}qDt(t,i){super.qDt(t,i),this.sEt&&this.sEt.R3(t,i)}async KDt(t,i,e){yi(e);const s=[];s.push(super.KDt(t,i,e)),this.sEt&&s.push(this.sEt.wS(t,i,e)),await Promise.all(s)}N$(t){return!!super.N$(t)||this.lD.nEt(t)}JDt(t){return super.N$(t)?super.JDt(t):this.lD.rEt(t)}oEt(t){var i,e;null==(i=this.sEt)||i.fn(mr,this.Ght),this.sEt=t,null==(e=this.sEt)||e.yn(mr,this.Ght)}constructor(t,i){super(i),this.sEt=void 0,this.lD=t}};Qi();var LW=class extends Tr{N$(t){const i=void 0!==this.y5,e=void 0!==this.b5,s=t.E5.some((t=>I(t.VN,"audio"))),n=t.E5.some((t=>I(t.VN,"video")));return i===s&&e===n&&(!!super.N$(t)||(!(!this.hEt||!this.hEt.N$(t))||this.lD.aEt(t)))}async D$(t){return super.N$(t)?await super.D$(t):this.hEt&&this.hEt.N$(t)?(this.uEt(),await this.D$(t)):(await this.lD.cEt(t),await this.D$(t))}nEt(t){return this.N$(this.lEt(t))}rEt(t){return this.D$(this.lEt(t))}lEt(t){const i=this.md,e=i.E5.map((i=>I(t.VN,"audio")&&I(i.VN,"audio")||I(t.VN,"video")&&I(i.VN,"video")?t:i));return Ei({},i,{E5:e})}D5(t,i,e,s){super.D5(t,i,e,s),this.hEt&&this.hEt.D5(t,i,e,s)}dEt(){return!this.fEt&&this.gEt}_d(){return void 0!==this._Et?this._Et:this.dEt()?this.JM:super._d()}T5(t){this.JM=t,this._Et=void 0,this.dEt()||super.T5(t)}xht(){return!this.dEt()&&super.xht()}I3(){this._Et=x.max(xW(this.vV.p5),xW(this.vV.A5)),this.dEt()||super.I3()}w3(){this._Et=void 0,this.dEt()||super.w3()}Oht(t){return new kW(this,t)}vEt(){this.fEt=!this.fEt}uEt(){const t=this.vV,i=this.hEt;i&&(this.fEt=!this.fEt,this.Cht(i),this.wEt(t),this.dEt()&&this.mEt())}wEt(t){var i,e;this.hEt=t,null==(i=this.y5)||i.oEt(null==t?void 0:t.p5),null==(e=this.b5)||e.oEt(null==t?void 0:t.A5)}pEt(t){const i=this.vV,e=this.hEt;if(!e)return;const s=this.fEt,n=s?i:e,r=(s?e:i).TE.CP(t);if(!r)return;const o=lU(n.TE,this.Fht()).CP(r.jn(0),Be);return!o||r.jn(0)+Be>=o.jn(0)?void 0:x.max(r.jn(0),o.Cn(0))}AEt(t,i){if(this.gEt)return Promise.resolve();const e=this.fEt?this.hEt:this.vV;return e?(this.gEt=!0,this.yEt((i=>{if(yi(i),this.gEt)return async function(t,i,e){yi(e);const s=[];t.p5&&s.push(Ij(t.p5,i,e));t.A5&&s.push(Ij(t.A5,i,e));await Promise.all(s),t.I3()}(e,t,i)}),i)):Promise.resolve()}mEt(){if(!this.gEt)return;const t=this.fEt?this.hEt:this.vV;if(!t)return;var i;this.gEt=!1;const e=null!=(i=this._Et)?i:this.JM;t.ct<e&&t.T5(e),t.w3()}bEt(t){var i;const e=null!=(i=this._Et)?i:this.JM;t.T5(e),this.fEt?this.Cht(t):this.wEt(t)}Fht(){var t,i,e;const s=null!=(e=null==(t=this.y5)?void 0:t.x3)?e:Mo.PP();var n;const r=null!=(n=null==(i=this.b5)?void 0:i.x3)?n:Mo.PP();return s.pP(r)}async yEt(t,i){const e=[];this.y5&&e.push(this.y5.$Dt()),this.b5&&e.push(this.b5.$Dt());try{await Promise.all(e),await t(i)}finally{this.y5&&this.y5.iEt(),this.b5&&this.b5.iEt()}}Pht(t){t.type===po.g$&&this.lD.M3(),super.Pht(t)}constructor(t,i){super(i),this.hEt=void 0,this.JM=NaN,this.fEt=!1,this.gEt=!1,this._Et=void 0,this.Cht(i),this.lD=t}};function xW(t){if(!t)return 0;const i=t.TE;return i.V>0?i.jn(i.V-1):0}function zu(t){return t.md.YA===uh.FQ}r(),Qi(),bs();var CW=class extends DW{get MEt(){return this.TEt}SE(){return super.SE().pP(this.TEt.TE)}_d(){if(!this.SEt){const t=this.vV;if(t&&zu(t))return t.ct}return super._d()}pht(){return!!super.pht()&&!(!this.SEt&&!this.F$())}Aht(){return!!super.Aht()&&!(!this.SEt&&super.pht()&&!this.F$())}F$(){const t=this.vV;return!(!t||!zu(t))&&t.F$}hk(){return this.Fo.pP(this.cz.rk)}vk(){return super.vk().pP(this.TEt._k)}gk(){return super.gk()}mht(){var t;return null!=(t=super.mht())?t:this.TEt.wV}Pk(){return this.CG=!1,super.Pk()}Rk(){this.CG=!0,super.Rk()}ktt(){this.SEt=!0,super.ktt(),this.TEt.ktt()}Ltt(){this.SEt=!1,super.Ltt(),this.TEt.ktt()}xE(){var t;return null!=(t=this.F8)?t:super.xE()}pk(){return void 0!==this.F8||super.pk()}Wb(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.NEt.Ty(),this.w7.Ty(),this.w7=new Wt,this.IEt=Vh(this.p7(t,i,e,this.IEt,this.w7.ly),this.w7).catch(Bn)}async p7(t,i,e,s,n){this.F8=t,this.A7=t,this.yo(new Yr(t)),s&&await s.catch(Bn),yi(n),this.vV&&zu(this.vV)&&this.vV.mEt(),this.F8=void 0,super.Wb(t,i,e),this.TEt.Wb(t,i,e),this.DEt()}cV(t){const i=this.wV;if(!i||j(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Wb(e)}jtt(){super.jtt(),this.TEt.jtt()}get yk(){return this.EEt.yk}get Tk(){return this.EEt.Tk}be(){this.IG&&(this.IG=!1,this.EEt.be())}ge(){this.IG||(this.IG=!0,this.EEt.ge())}async kEt(){var t;this.F8=void 0,this.A7=NaN,this.Fo=Mo.PP(),null==(t=this.LEt)||t.Ty(),this.NEt.Ty(),this.w7.Ty(),this.IEt&&(await this.IEt.catch(Bn),this.IEt=void 0)}Sht(t){super.Sht(t),this.TEt.zV=t}Nht(t){super.Nht(t),this.TEt.Rtt=t}Ak(){return this.Ul}Wk(t,i,e,s,n,r,o,h){return this.CQ.Wk(t,i,e,s,n,r,o,h)}CV(t){return this.CQ.CV(t)}kV(t,i,e,s,n){throw new b("Not implemented yet")}DV(){return!1}BQ(t){this.CQ.BQ(t)}jV(){this.CQ.tr(),super.jV()}async $n(t){const i=await super.$n(t);return zu(i)&&this.DEt(),i}async tr(){await this.kEt(),await super.tr(),await this.TEt.tr()}async wy(){await this.kEt(),this.CQ.gn(),this.Ul.gn(),await super.wy()}Eht(t){return new LW(this,t)}Dht(t){return new Jo(t)}DEt(){this.NEt.Ty(),this.NEt=new Wt,this.IEt=Vh(this.xEt(this.IEt,this.NEt.ly),this.NEt).catch(Bn)}async xEt(t,i){if(t&&await t.catch(Bn),this.vV&&zu(this.vV))for(;;){let t;for(yi(i),this.CEt()&&this.vEt(),this.vV.mEt(),yi(i);;){const e={stack:[],error:void 0,hasError:!1};try{if(yi(i),this.CEt())break;if(t=this.vV.pEt(this.xE()),void 0!==t){0,this.jEt(),await this.vV.AEt(t,i),yi(i),this.TEt.Wb(t);break}const s=Ne(e,Wt.Iy([i]),!1);await Promise.race([this.zy(Zi.Eb,s.ly),this.OEt(s.ly)])}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}for(yi(i);!this.CEt();)await this.cz.zy([Zi.Eb,Zi.qy,E.lL],i)}}CEt(){const t=this.vV;if(void 0===t||!zu(t))return!1;const i=this.xE(),e=this.cz.TE;if(!this.cz.OE&&e.gr(i))return!1;return!!lU(this.TEt.TE,t.Fht()).SP(i,i+Be)}vEt(){if(this.REt)return;this.REt=!0,this.Fo=this.hk();const t=Rj(this),i=this.pk(),e=this.gk(),s=this.cz,n=this.TEt,r=this.vV;r.mEt(),r.vEt(),Pj(n,t),this.Lht(n),this.TEt=s,s.Rk(),s.WE=!0,this.REt=!1;const o=this.pk();i!==o&&(o?this.yo(new Yr(this.LE)):this.yo(new aa(this.LE)));const h=this.gk();e!==h&&this.yo(new cu(this.LE,h)),o||this.jEt()}jEt(){const t=this.cz,i=this.EEt;if(i===t)return;const e=this.Tk,s=this.yk;this.EEt=t,this.IG&&(i.be(),t.ge());const n=this.Tk,r=this.yk;n>0&&r>0&&(e!==n||s!==r)&&this.yo(new vo)}aEt(t){return void 0!==this.TEt.H$([t])}async cEt(t){this.jEt();const i=this.vV,e=this.TEt;await e.tr();const s=await e.$n(t);i.bEt(s)}OEt(t){return this.LEt=new xh,Ao(this.LEt.rM,t)}M3(){var t;null==(t=this.LEt)||t.sM()}Vk(t){t.type===Zi.Mb&&this.A7===t.currentTime||(t.type===Zi.bb&&(this.A7=NaN,this.jEt()),t.type!==E.lL&&t.type!==Zi.wb&&t.type!==Zi.qy||this.REt||!this.CEt()?(t.type!==Zi.qy||this.OE)&&super.Vk(t):this.DEt())}constructor(t,i,e){super(t),this.SEt=!1,this.F8=void 0,this.A7=NaN,this.Fo=Mo.PP(),this.CG=!0,this.REt=!1,this.IG=!0,this.LEt=void 0,this.IEt=void 0,this.NEt=new Wt,this.w7=new Wt,this.TEt=i,this.EEt=t,this.cz.ge(),this.TEt.be(),this.CQ=new XB(this,e),this.Ul=new BE([this.CQ.nt,super.Ak()])}},jW=class extends CW{get wht(){return this.cz}get MEt(){return this.TEt}be(){super.be(),this.hst.be()}ge(){super.ge(),this.hst.ge()}get gV(){return this.cz.gV}get K5(){return this.cz.K5}get xk(){return this.cz.xk}set xk(t){this.cz.xk=t}Ott(t){this.cz.Ott(t),this.TEt.Ott(t)}Fk(){this.cz.Fk(),this.TEt.Fk()}jk(){return this.cz.jk()}_a(){return this.jz}Lht(t){const i=this.Ck(),e=this.jk();super.Lht(t),this.jz.TL=t.xV,this.Ck()!==i&&this.yo(new SS),this.jk()!==e&&this.yo(new Bu)}wy(){return this.jz.gn(),this.ast.gn(),this.hst.gn(),super.wy()}constructor(t,i){super(t,i,new Kc),this.jz=new DS(t.xV),this.hst=new Xn,this.hst.Ott(t.gV.parentElement),this.ast=new Qn(this.hst.we,this.Uu,this.nt,this.Ll,this.wa,this.xV)}},OW=class extends Sr{sG(t){if(t===Ri.NI){const i=super.sG(t),e=super.sG(t);return new jW(i,e)}return super.sG(t)}async BV(t){t instanceof jW?(await t.wy(),await super.BV(t.wht),await super.BV(t.MEt)):await super.BV(t)}},RW=class extends AW{async gn(){await super.gn(),await this.QV.BV(this.cz)}static PS(t){var i;return!Ro.Qs&&!Ro.dg&&!(t&&"google-dai"===(null==(i=t.ssai)?void 0:i.integration))}constructor(t,i,e,s,n,r,o,h){const a=new rs(new OW(r));super(t,i,e,s,n,a.sG(o),h),this.QV=a}};r(),r(),bs(),Qi(),r();var PW=class extends Tr{Oht(t){return new EW(t)}xS(){return this.PEt?this.KS:super.xS()}SE(){return this.PEt?this.QDt:super.SE()}_d(){return this.PEt?this.JM:super._d()}T5(t){this.PEt?(this.JM=t,this.zEt=!0):super.T5(t)}vk(){return this.PEt?this.BEt?this.BEt.Q3():this.I5:super.vk()}D5(t,i,e,s){this.PEt?this.BEt=new Xu(t,i,e,s):super.D5(t,i,e,s)}xht(){return this.PEt?this.Ist&&!1!==this.WDt:super.xht()}I3(){this.PEt?this.WDt=!0:super.I3()}w3(){this.PEt?this.WDt=!1:super.w3()}N$(t){return!this.PEt&&super.N$(t)}D$(t){return this.PEt?Promise.reject(new k("Not supported")):super.D$(t)}async $Dt(){if(this.PEt)throw new k("Already locked");this.PEt=!0,this.tEt();const t=[];this.y5&&t.push(this.y5.$Dt()),this.b5&&t.push(this.b5.$Dt()),await Promise.all(t)}iEt(){this.PEt=!1,this.y5&&this.y5.iEt(),this.b5&&this.b5.iEt(),this.eEt()}tEt(){this.KS=super.xS(),this.QDt=super.SE(),this.JM=super._d(),this.I5=super.vk(),this.zEt=!1,this.WDt=void 0,this.BEt=void 0}eEt(){if(this.zEt&&(super.T5(this.JM),this.zEt=!1),void 0!==this.BEt){const t=this.BEt;super.D5(t.Cn,t.jn,t.F3,t.Y3),this.BEt=void 0}void 0!==this.WDt&&(this.WDt?super.I3():super.w3(),this.WDt=void 0)}constructor(t){super(t),this.PEt=!1,this.QDt=Mo.PP(),this.JM=0,this.zEt=!1,this.Ist=!1,this.WDt=void 0,this.I5=Mo.PP(),this.BEt=void 0,this.Cht(t),this.KS=t.md}},zW=class extends Br{get wht(){return this.cz}Pk(){return void 0!==this.vV&&zu(this.vV)&&this.OE&&this.Wb(0),super.Pk()}Wb(t,i,e){void 0!==this.vV&&zu(this.vV)&&this.OE&&t<this.ct&&this.UEt(),super.Wb(t,i,e)}ktt(){this.QEt=!0,super.ktt()}Ltt(){this.QEt=!1,this.FEt()||super.Ltt()}FEt(){return this.QEt||this.YEt}VEt(){this.YEt||(this.YEt=!0,super.ktt())}GEt(){this.YEt&&(this.YEt=!1,this.FEt()||super.Ltt())}$n(t){this.WEt.Ty();const i=this.oD(t,this.ZEt);return this.HEt=i,i}async oD(t,i){return i&&await i.catch(Bn),this.GEt(),await super.$n(t)}Eht(t){return new PW(t)}Dht(t){return new Jo(t)}tr(){this.WEt.Ty();const t=this.ADt(this.ZEt);return this.HEt=t,t}async ADt(t){return t&&await t.catch(Bn),this.GEt(),await super.tr()}UEt(){this.VEt(),this.WEt.Ty(),this.WEt=new Wt,this.ZEt=Vh(this.XEt(this.HEt,this.ZEt,this.WEt.ly),this.WEt).catch(Ct)}async XEt(t,i,e){t&&await t.catch(Bn),i&&await i.catch(Bn),yi(e);const s=this.vV;if(!s||!zu(s))return;const n=s.md;await s.$Dt(),await this.cz.tr();const r=await this.cz.$n(n);r.T5(s.ct),s.Cht(r),s.iEt(),this.GEt()}async wy(){this.WEt.Ty(),this.ZEt&&(await this.ZEt.catch(Bn),this.ZEt=void 0),this.FEt()&&super.Ltt(),await super.wy()}constructor(...t){super(...t),this.QEt=!1,this.YEt=!1,this.HEt=void 0,this.ZEt=void 0,this.WEt=new Wt}};Uc();var BW=class extends Sr{sG(t){if(t===Ri.NI)return new zW(super.sG(t))}async BV(t){const i=t;await i.wy(),await super.BV(i.wht)}static PS(){return Ro.gg}};Gi(new class extends OB{bx(t,i,e,s,n,r,o,h){const a=new ir(_h.Ld.Hot,_h.Ld.Zot,_h.Ld.Wot,_h.Ld.qot);let u;u=IW.PS(h)?IW:RW.PS(h)?RW:yW;let c=i;return BW.PS()&&(c=new BW(c)),new u(e,s,n,r,a,c,Ri.NI,t)}oG(){return!0}constructor(...t){super(...t),this.hG=pt.RY}}),r(),r(),Ha((function(t){return class extends t{ma(){const t=this.UE.ga;return fe(super.ma(),{get hesp(){return t}})}}}),Hn.nu),r(),r(),r(),r(),r();var UW=0;function Hu(t,i){if(void 0===i&&(i=!0),!t)return;let e=t;return"/"===e.charAt(0)&&(e=e.substring(1)),i&&"/"!==e.charAt(e.length-1)&&(e+="/"),e}function QW(t){var i,e,s;return Ei({},t,{baseUrl:Hu(t.baseUrl),id:null!=(i=t.id)?i:String(UW++),timeBounds:Ei({},t.timeBounds,{scale:null!=(e=t.timeBounds.timescale)?e:1e3}),currentTime:t.currentTime?{value:t.currentTime.timestamp,scale:null!=(s=t.currentTime.timescale)?s:1e3}:void 0,audio:t.audio.map(ZW),video:t.video.map(XW),metadata:t.metadata.map(KW),events:t.events.map(eZ)})}var FW=0;function YW(t){const i=Hu(t.initPattern,!1),e=Hu(t.contPattern,!1);var s;return Ei({},t,{id:null!=(s=t.id)?s:String(FW++),continuationPattern:e?Cv(e,"${segmentId}","{segmentId}"):void 0,initializationPattern:i?Cv(i,"${initId}","{initId}"):void 0})}function VW(t){var i;const e=Hu(t.initPattern,!1),s=Hu(t.contPattern,!1);return Ei({},t,{continuationPattern:s?Cv(s,"${segmentId}","{segmentId}"):void 0,initializationPattern:e?Cv(e,"${initId}","{initId}"):void 0,segmentDuration:t.segmentDuration?{value:t.segmentDuration.duration,scale:t.segmentDuration.timescale}:void 0,segments:t.segments.map(GW),activeSegment:null==(i=dl(t.segments,(t=>t.active)))?void 0:i.id})}function GW(t){var i;return Ei({},t,{timeBounds:Ei({},t.timeBounds,{endTime:void 0!==t.timeBounds.duration?t.timeBounds.startTime+t.timeBounds.duration:void 0,scale:null!=(i=t.timeBounds.timescale)?i:1e3})})}function WW(t){return t&&"-"===t.charAt(0)}function ZW(t){let i;try{var e;i=C(null!=(e=t.channels)?e:"2")}catch(t){i=2}return WW(t.contPattern)||WW(t.initPattern)?function(t,i){const e=t.initPattern,s=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,Ei({},YW(t),{baseUrl:Hu(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map((t=>{var i,n;return t.initPattern=null!=(i=t.initPattern)?i:e,t.contPattern=null!=(n=t.contPattern)?n:s,HW(t)}))})}(t,i):Ei({},YW(t),{baseUrl:Hu(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map(HW)})}function HW(t){let i;try{var e;i=C(null!=(e=t.channels)?e:"2")}catch(t){i=2}return WW(t.contPattern)||WW(t.initPattern)?function(t,i){return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,Ei({},VW(t),{baseUrl:"./",channels:i,sampleRate:t.samplerate})}(t,i):Ei({},VW(t),{baseUrl:Hu(t.baseUrl),channels:i,sampleRate:t.samplerate})}function XW(t){return WW(t.contPattern)||WW(t.initPattern)?function(t){const i=t.initPattern,e=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,Ei({},YW(t),{baseUrl:Hu(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map((t=>(t.initPattern=i,t.contPattern=e,qW(t))))})}(t):Ei({},YW(t),{baseUrl:Hu(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(qW)})}function qW(t){var i,e;return WW(t.contPattern)||WW(t.initPattern)?function(t){var i,e;return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,Ei({},VW(t),{baseUrl:"./",frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:Ei({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(e=t.resolution.sar)?void 0:e.height})})}(t):Ei({},VW(t),{baseUrl:Hu(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:Ei({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(e=t.resolution.sar)?void 0:e.height})})}function KW(t){var i;return Ei({},t,{id:null!=(i=t.id)?i:String(FW++),schemeId:"",tracks:t.tracks.map(JW)})}function JW(t){return Ei({},t,{segments:t.segments.map(tZ)})}var $W=0;function tZ(t){return{id:$W++,timeBounds:Ei({},t.timeBounds,{scale:t.timeBounds.timescale})}}var iZ=0;function eZ(t){var i,e;return Ei({},t,{id:null!=(i=t.id)?i:String(iZ++),timeBounds:Ei({},t.timestamp,{scale:null!=(e=t.timestamp.timescale)?e:1e3})})}var sZ=class{async qEt(t,i){const e={zu:t,ly:i},s=await this.wE.hI(e);let n=await s.BN(i);return function(t){const i=t;if(Ic(i.manifestVersion)&&_t(i.manifestVersion,"alpha"))return!0;let e,s;for(const t of i.presentations){for(const i of[...t.video,...t.audio])if(i.tracks.length>0){e=i.tracks[0],s=i;break}if($t(e))break}return(Ic(null==s?void 0:s.initPattern)||Ic(null==e?void 0:e.initPattern))&&!Ic(null==e?void 0:e.initializationPattern)&&!Ic(null==s?void 0:s.initializationPattern)}(n)&&(n=function(t){return Ei({},t,{availabilityDuration:{value:t.dvrDuration?t.dvrDuration.duration/t.dvrDuration.timescale:0},manifestVersion:"1.0.0",presentations:t.presentations.map(QW),contentBaseUrl:t.contentBaseUrl||"./"})}(n)),n}constructor(t){this.wE=t}};bs(),r();var nZ=class extends tu{get ga(){return this.Za||(this.Za=OM(this)),this.Za}qL(){return this.KEt.qL()}get ZL(){return this.KEt.ZL}get HL(){return this.KEt.HL}get XL(){return this.KEt.XL}yn(t,i){this.KEt.yn(t,i)}fn(t,i){this.KEt.fn(t,i)}constructor(t){super(),this.KEt=t}};r(),r(),r();var rZ=class{get Mst(){const t=1-this.JEt**this.$Et;return this.tkt/t}Ect(t,i){const e=this.JEt**t,s=i*(1-e)+e*this.tkt;j(s)||(this.tkt=s,this.$Et+=t)}D$(t){const i=x.exp(x.log(.5)/t);if(i===this.JEt)return;if(0===this.$Et)return void(this.JEt=i);const e=this.Mst,s=1-i**this.$Et;this.tkt=e*s,this.JEt=i}constructor(t){this.tkt=0,this.$Et=0,this.JEt=x.exp(x.log(.5)/t)}};Qi();var gn=class t{get Mst(){return this.Rct()?x.max(this.ikt.Mst,this.ekt.Mst):this.skt}Ect(t){const i=Fe.Og(),e=t;this.nkt&&void 0!==this.rkt&&i-this.rkt>=this.okt&&this.tr(),this.hkt+=1,this.ikt.Ect(1,e),this.ekt.Ect(1,e),this.akt.push(e),this.akt.length>this.ukt&&this.akt.shift(),this.rkt=i}Rct(){return void 0!==this.rkt&&Fe.Og()-this.rkt<=this.okt}tr(){this.ikt=new rZ(this.ckt),this.ekt=new rZ(this.lkt),this.hkt=0,this.akt=[],this.rkt=void 0}constructor(i=t.dkt,e=t.fkt,s=t.Pct,n=!1){this.hkt=0,this.akt=[],this.rkt=void 0,this.okt=6e4,this.ukt=10,this.ckt=i,this.lkt=e,this.skt=s,this.nkt=n,this.ikt=new rZ(i),this.ekt=new rZ(e)}};gn.dkt=2,gn.fkt=5,gn.Pct=.1,r();var oZ=class{DK(t){for(const i of this.gkt)i.DK(t)}EK(t){for(const i of this.gkt)i.EK(t)}kK(t,i){for(const e of this.gkt)e.kK(t,i)}LK(t){for(const i of this.gkt)i.LK(t)}constructor(t){this.gkt=t}};r();var hZ=class{DK(t){this._kt=t}EK(t){this.vkt.Ect(t-this._kt)}kK(t){}LK(t){}constructor(t){this._kt=0,this.vkt=t}};r();var aZ=class{EK(t){this.wkt=t}kK(t,i){this.Uct.Ect(t-this.wkt,i.byteLength),this.wkt=t}LK(t){}DK(t){}constructor(t){this.wkt=0,this.Uct=t}};r(),Qi();var uZ=class{DK(t){}kK(t,i){const e=i.byteLength,s=this.mkt;this.mkt=e;const n=t-this.An;this.An=t,this.pkt.b0(i);const r=!this.pkt.Akt(),o=e>=this.ykt;s!==Fe.Ys.xp&&r&&o&&this.Uct.Ect(n,e)}EK(t){this.An=t}LK(t){}constructor(t,i=0){this.pkt=new cZ,this.An=0,this.mkt=0,this.Uct=t,this.ykt=i}},cZ=class extends gr{Akt(){return this.bkt}b0(t){this.bkt=!1,super.b0(t)}A0(t,i){this.Mkt&&this.Mkt!==Rt.SC||(this.bkt=!0),super.A0(t,i),this.Mkt=t}x0(t){return!1}j0(t){}R0(t){}constructor(...t){super(...t),this.Mkt=void 0,this.bkt=!1}};r(),Qi();var lZ=function(t){return t.Tkt="sample",t}({}),dZ=class extends tu{DY(){if(!this.Rct())return;const t=Fe.Og();t-this.Skt>1e3&&(this.Skt=t,_i.Ld.DY(this.Mst))}constructor(...t){super(...t),this.Skt=0}};r();var fZ=class extends dZ{get Mst(){return this.Rct()?this.tkt:this.Nkt}Rct(){return this.yT.length>=3}Ect(t,i){if(0===t)return;const e={FY:8*i/t,Ikt:i};if(this.yT.push(e),this.Dkt+=e.Ikt,this.yT.length>30){const t=this.yT.shift();this.Dkt-=t.Ikt}const s=this.yT.slice().sort(((t,i)=>t.FY-i.FY));let n=0;for(let t=0;t<s.length;t++){const i=s[t];if(n+=i.Ikt/this.Dkt,this.tkt=i.FY,n>=.5)break}this.DY(),this.yo(new Jr(lZ.Tkt))}constructor(t){super(),this.yT=[],this.Dkt=0,this.Nkt=t,this.tkt=t}};r();var Li=class t extends dZ{Ect(t,i){const e=8*i/t;this.ikt.Ect(t,e),this.ekt.Ect(t,e),this.Ekt+=i,this.DY(),this.yo(new Jr(lZ.Tkt))}get Mst(){return this.Rct()?x.min(this.ikt.Mst,this.ekt.Mst):this.skt}Rct(){return this.Ekt>=this.kkt}constructor(i=t.dkt,e=t.fkt,s=t.Lkt,n=t.Pct){super(),this.Ekt=0,this.kkt=s,this.ikt=new rZ(i),this.ekt=new rZ(e),this.skt=n}};Li.Lkt=128e3,Li.Pct=OE,Li.dkt=.5,Li.fkt=5;var gZ=class{xkt(t){var i;null==(i=this.Uct)||i.fn(lZ.Tkt,this.Ckt),this.Uct=new fZ(t),this.Uct.yn(lZ.Tkt,this.Ckt)}jkt(t){this.Okt.push(t)}Rkt(t){ra(this.Okt,t)}get FY(){var t,i;return null!=(i=null==(t=this.Uct)?void 0:t.Mst)?i:this.Pkt}get YY(){return this.zkt.Mst}VY(t){if("segment"!==t.YA)return;if("video"!==t.RI)return;const i=[new hZ(this.zkt)];return this.Uct&&("stream"===t.oI&&"initialization-segment"!==t.OI?i.push(new uZ(this.Uct,1e3)):i.push(new aZ(this.Uct))),new oZ(i)}constructor(t,i){this.Okt=[],this.Ckt=()=>{for(const t of this.Okt)t()},this.Pkt=t>0?t:Li.Pct,this.zkt=new gn(gn.dkt,gn.fkt,i>0?i:gn.Pct),this.xkt(this.Pkt)}};r(),Qi(),bs();var _Z=class{Bkt(t,i){const e=i-t;(!this.Ukt||e<this.Ukt)&&(this.Ukt=e)}Qkt(t,i){this.Fkt=i-t}Ykt(t,i){this.Vkt=i-t}Gkt(t,i){this.Wkt=i-t}get Zkt(){const t=ew([this.Vkt,this.Wkt].filter($t),fd);return void 0!==t?Fe.Og()/1e3+t:void 0!==this.Fkt?Fe.Og()/1e3+this.Fkt:void 0!==this.Ukt?Fe.Og()/1e3+this.Ukt:void 0}Hkt(t){const i=this.Zkt;if(void 0!==i)return i-t}tr(){this.Ukt=void 0,this.Fkt=void 0,this.Wkt=void 0,this.Vkt=void 0}};r(),Qi();var vZ=.25,wZ=400,mZ={minimumOffset:.2,targetOffset:.45,maximumOffset:.7,forceSeekOffset:3,minimumPlaybackRate:We,maximumPlaybackRate:ee},pZ={minimumOffset:.4,targetOffset:.65,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:We,maximumPlaybackRate:ee},AZ={minimumOffset:.4,targetOffset:.7,maximumOffset:.9,forceSeekOffset:3,minimumPlaybackRate:We,maximumPlaybackRate:ee},yZ={minimumOffset:.2,targetOffset:.45,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:We,maximumPlaybackRate:ee},bZ={minimumOffset:.5,targetOffset:1.125,maximumOffset:1.75,forceSeekOffset:2.55,minimumPlaybackRate:We,maximumPlaybackRate:ee};function MZ(t){if(Fe.IA.EA){const i=(wZ+250)/1e3,e=x.max(i,t.minimumOffset),s=x.max(e+vZ,t.targetOffset),n=x.max(s+vZ,t.maximumOffset);return{minimumOffset:e,targetOffset:s,maximumOffset:n,forceSeekOffset:x.max(n+vZ,t.forceSeekOffset),minimumPlaybackRate:We,maximumPlaybackRate:ee}}return t}function TZ(){let t;return t=Fe.Ys.Np?yZ:Fe.Ys.Lp?pZ:Fe.Ys.kp?"Android"===Fe.IA.DA?AZ:mZ:bZ,Fe.IA.EA?MZ(t):t}r(),r(),r();var SZ=class{Xkt(t){for(const i of this.QDt)i[1]=i[1].Sn(t)}qkt(t,i){let e=!0;for(const s of this.QDt){let n=s[1];n=n.yP(i),t===s[0]&&(n=n.pP(i),e=!1),s[1]=n.mP(1e-5)}e&&this.QDt.push([t,i])}Kkt(t){for(const i of this.QDt)i[1]=i[1].yP(t)}Jkt(t){for(let i=0;i<this.QDt.length;i++)if(this.QDt[i][1].gr(t))return this.QDt[i][0]}constructor(){this.QDt=[]}},NZ=class extends tu{get TE(){let t=Mo.PP();for(const[,i]of this.$kt){const e=i.kst+i.rQ,s=e+i.ct;t=t.pP(Mo.RP(e,s))}return this.Qht.TE.pP(t)}Jkt(t){return this.tLt.Jkt(t)}get iLt(){return void 0!==this.eLt}get sLt(){return this.eLt?this.eLt.rM:Promise.resolve()}async appendStream(t,i,e){if(this.iLt)throw new b("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=Ne(s,Wt.Iy([e,this.y3.ly]),!1).ly;this.tLt.Xkt(this.TE),this.eLt=new xh;const r=MC(t).getReader();for(;;){const t=await Ao(r.read(),n);if(t.done)break;const e=t.value,s={YA:Me.v$,rI:ih(e.map((t=>t.ilt)))},o={ct:qe(e,(t=>t.ct)),kst:e[0].Evt,rQ:-i.Lut.nLt};await this.Q4(s,o,n);const h=o.kst+o.rQ,a=h+o.ct;this.tLt.qkt(i.Lut,Mo.RP(h,a))}}catch(t){s.error=t,s.hasError=!0}finally{qr(s)}}finally{i.rLt();const t=this.eLt;this.eLt=void 0,null==t||t.sM()}}async B4(t,i,e,s){if(this.iLt)throw new b("Concurrent appends are not supported.");try{const n={stack:[],error:void 0,hasError:!1};try{const r=Ne(n,Wt.Iy([s,this.y3.ly]),!1).ly;this.eLt=new xh,await this.Q4(t,i,r);const o=i.kst+i.rQ,h=o+i.ct;this.tLt.Xkt(this.TE),this.tLt.qkt(e,Mo.RP(o,h))}catch(t){n.error=t,n.hasError=!0}finally{qr(n)}}finally{const t=this.eLt;this.eLt=void 0,null==t||t.sM()}}async Q4(t,i,e){this.Qht.E3===Ri.NI&&this.oLt.Cft(t.rI,i.kst,i.kst+i.ct,i.rQ,this.nbt,!1);const s=this.cz.mz.wz,n=this.Qht.TE.gr(this.cz.LE);if(s||n)return await this.hLt(e),await this.Qht.B4(t,i,e);this.$kt.push([t,i]);const r=this.$kt[0][1].kst;return this.$kt[this.$kt.length-1][1].kst-r>=.4?await this.hLt(e):void 0}async F4(t,i){if(this.iLt)throw new b("Concurrent appends are not supported.");try{const e={stack:[],error:void 0,hasError:!1};try{const s=Ne(e,Wt.Iy([i,this.y3.ly]),!1).ly;this.eLt=new xh,await this.hLt(s),await this.Qht.F4(t,{},s),this.Qht.E3===Ri.NI&&this.oLt.$ht(t.rI)}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}finally{const t=this.eLt;this.eLt=void 0,null==t||t.sM()}}async wS(t,i,e){if(this.iLt)throw new b("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=Ne(s,Wt.Iy([e,this.y3.ly]),!1).ly;this.eLt=new xh,await this.hLt(n),await this.Qht.wS(t,i,n),this.tLt.Kkt(Mo.RP(t,i))}catch(t){s.error=t,s.hasError=!0}finally{qr(s)}}finally{const t=this.eLt;this.eLt=void 0,null==t||t.sM()}}async DX(t){if(this.iLt)throw new b("Concurrent appends are not supported.");try{const i={stack:[],error:void 0,hasError:!1};try{const e=Ne(i,Wt.Iy([t,this.y3.ly]),!1).ly;this.eLt=new xh,await this.hLt(e)}catch(t){i.error=t,i.hasError=!0}finally{qr(i)}}finally{const t=this.eLt;this.eLt=void 0,null==t||t.sM()}}async hLt(t){for(const[i,e]of this.$kt)await this.Qht.B4(i,e,t);nt(this.$kt)}async wy(){for(this.y3.wy();this.iLt;)await this.sLt}constructor(t,i,e,s){super(),this.$kt=[],this.eLt=void 0,this.y3=new Wt,this.cz=i,this.Qht=t,this.nbt=e,this.oLt=s,this.tLt=new SZ,this.Qht.yn(po.g$,this.Ds)}};r(),Qi(),r(),Qi();var IZ=class{async aLt(t,i){if(this.uLt>=this.cLt.maxRetries)throw t;const e=this.lLt(this.uLt++);await Dt(e,i)}lLt(t){let i=0;return 0!==t&&(i+=x.min(this.cLt.maximumBackoff,this.cLt.minimumBackoff*(2**t-1))),i}constructor(t){this.uLt=0,this.cLt=t}};r(),Qi(),r();var DZ=function(t){return t.dLt="emsgdata",t}({}),EZ=class extends Jr{constructor(t,i){super("emsgdata"),this.value=t,this.data=i}};r();var kZ=class{start(t){this.JJ=t}fLt(t){this.JJ.enqueue(t)}};r(),r();var wl=function(t){return t.gLt="initdata",t.MANIFEST_UPDATE="manifestupdate",t._Lt="timestamps:v1",t}({});var LZ="urn:theo:hesp:2020";function xZ(t){if(t.xR!==LZ)return;const i=t.zD;if(i===wl.gLt){return function(t){if(!t||!Z(t))return;const i=t;return!$a(i.index)||!$a(i.offset)||i.index<0&&i.offset<0?void 0:{YA:"initdata",index:i.index,offset:i.offset}}(JSON.parse(qo(Al(t.RR),new da)))}if(i===wl.MANIFEST_UPDATE){return function(t){if(!t||!Z(t))return;const i=t;return!$t(i.url)||Ic(i.url)?{YA:"manifestupdate",url:i.url}:void 0}(JSON.parse(qo(Al(t.RR),new da)))}if(i===wl._Lt){const i=Al(t.RR),e=new da,s=Zw(i,e).toNumber()/t.xj,n=Zw(i,e).toNumber()/1e3,r=al(i,e)/1e3;let o;return e.tc+8<=i.byteLength&&(o={hours:al(i,e),minutes:Gw(i,e),seconds:Gw(i,e),frames:Ks(i,e)}),{YA:wl._Lt,vLt:s,wLt:n,mLt:r,pLt:o}}}var CZ=class extends kZ{transform(t){if(t.YA===Rt.IC)try{const i=xZ(pe.Tj(t.rI));i&&this.ALt.yo(new EZ(i.YA,i))}catch(t){false}this.fLt(t)}wy(){this.ALt.Bo()}constructor(...t){super(...t),this.ALt=new tu}};r();var jZ=class{start(t){this.Bv=new OZ(t)}transform(t){this.Bv.b0(t)}flush(){this.Bv.T0()}},OZ=class extends gr{x0(t){return!0}j0(t){this.JJ.enqueue(t)}R0(t){}constructor(t){super(),this.JJ=t}};r(),r();var RZ=D.fromNumber(jt);var PZ=class extends tu{async hI(t){for(;;)try{return await this.OQ.hI(t)}catch(i){if(Tu(i))throw i;await this.yLt.aLt(i,t.ly)}}constructor(t,i){super(),this.OQ=t,this.yLt=i}};function zZ(t,i,e,s,n,r,o,h){const a=new Rh;return n&&a.zN(function(t,i){return void 0===i&&(i=RZ),new Rh({Range:"bytes="+t.toString()+"-"+i.toString()})}(n.start,n.end)),{zu:t,aI:a,zI:!1,ly:h,YA:Rs.gI,OI:e,RI:s,CI:r,jI:o,oI:i,QI:i===Ee.jN}}r(),r();var el=function(t){return t[t.INITIALIZER=0]="INITIALIZER",t[t.FRAMES=1]="FRAMES",t}({}),BZ=class extends kZ{transform(t){this.bLt.push(t),t.YA===Rt.SC&&this.MLt(this.bLt.splice(0),el.FRAMES)}MLt(t,i){const e={xj:this.KM,gX:this.kX},s=ih(t.map((t=>ka(t.rI.rI)))),n=dl(t,UZ),r=pe.dj(n.rI.rI)[0],o={RI:this.Ict,Vb:e,ilt:s,YA:i,ct:this._d(r)/this.KM,Evt:os(this.TLt(r),this.KM)};this.fLt(o)}_d(t){const i=t.Z[0];if(!i||0===i.bR.length)return 0;var e;const s=null!=(e=i.nj.dR)?e:0;return i.bR[0].kR.reduce(((t,i)=>{var e;return t+(null!=(e=i.ct)?e:s)}),0)}TLt(t){var i,e;return null!=(e=null==(i=t.Z[0].MR)?void 0:i.MR)?e:D.UZERO}constructor(t,i){super(),this.bLt=[],this.kX=t,this.Ict=this.kX.match(/video/)?gt.NI:gt.SI,this.KM=i}};function UZ(t){return t.YA===Rt.mC}r();var QZ=class extends tu{get Lut(){return this.SLt}Edt(t){return t+1}get NLt(){return!1}get ILt(){return this.DLt}get iLt(){return void 0!==this.eLt}get sLt(){return this.eLt?this.eLt.rM:Promise.resolve()}Wb(t){this.DLt=t,this.ELt=void 0,this.kLt=void 0}LLt(){return void 0!==this.ELt}async xLt(){if(this.iLt)throw new b("Concurrent downloads are not supported.");try{this.eLt=new xh;let t;if("now"===this.DLt)t=Fe.TA(this.SLt.CLt("now"),this.SLt.jLt);else{const i=this.DLt,e=0===i?1:this.SLt.OLt(i);t=Fe.TA(this.SLt.CLt(e),this.SLt.jLt)}const i=zZ(t,Ee.xN,ul.wI,this.Ict,void 0,3e3,1e3,this.RLt.ly),e=await this.PLt.hI(i),s=await e.FN(this.RLt.ly),n=new T(s),{zLt:r,zj:o}=function(t){const i=Qe.qC(new Bt(Al(t),new da)),e=dl(i,(t=>t.YA===Rt.EC||t.YA===Rt.mC));if(void 0===e)return{zLt:t,zj:void 0};const s=zr(t,0,e.tc),n=zr(t,e.tc);return{zLt:s,zj:0===n.byteLength?void 0:n}}(n),h=pe.dj(Al(n));this.KM=function(t){const i=dl(t,(t=>t.YA===Rt.kx));return i.Z[0].zj.nj.xj}(h);const a=function(t){const i=t.filter((t=>t.YA===Rt.IC)),e=i.map((t=>xZ(t))),s=dl(e,(t=>(null==t?void 0:t.YA)===wl.gLt));if(!s)throw new b("No init data in init response");return s}(h);let u;if(this.ELt=a.index,this.kLt=a.offset,o){u=function(t,i,e){var s;const n=dl(t,(t=>t.YA===Rt.mC));var r;const o=os(null!=(r=null==(s=n.Z[0].MR)?void 0:s.MR)?r:D.UZERO,e),h=n.Z[0];var a;const u=null!=(a=h.nj.dR)?a:0,c=h.bR[0],l=c.kR.reduce(((t,i)=>{var e;return t+(null!=(e=i.ct)?e:u)}),0)/e;return{kst:o,ct:l,rQ:i}}(pe.dj(Al(n)),-this.Lut.nLt,this.KM)}return{initialization:r,data:o,metadata:u}}finally{const t=this.eLt;this.eLt=void 0,null==t||t.sM()}}BLt(){if(this.iLt)throw new b("Concurrent downloads are not supported.");this.eLt=new xh;const t=void 0!==this.kLt?D.fromNumber(this.kLt):void 0;return Zy(this.ULt(this.ELt,t,this.RLt.ly)).pipeThrough(new La(new BZ(this.Lut.gX,this.KM))).pipeThrough(new La(new FZ(this.RLt.ly)))}async ULt(t,i,e){const s=this.QLt(t,i,e);return(await this.PLt.hI(s)).YN().pipeThrough(new La(new jZ)).pipeThrough(new La(this.FLt))}QLt(t,i,e){const s=this.SLt.YLt(t),n=void 0!==i?{start:i,end:void 0}:void 0;return zZ(Fe.TA(s,this.SLt.jLt),Ee.jN,ul.dI,this.Ict,n,25e3,1e3,e)}rLt(){void 0!==this.ELt&&(this.ELt=this.Edt(this.ELt)),this.kLt=void 0;const t=this.eLt;this.eLt=void 0,null==t||t.sM()}cancelDownload(){var t;this.RLt.Ty(),this.RLt=new Wt,this.eLt=null!=(t=this.eLt)?t:new xh,this.ELt=void 0,this.kLt=void 0;const i=this.eLt;this.eLt=void 0,null==i||i.sM()}async wy(){this.Bo(),this.FLt.wy(),this.RLt.Ty(),await this.sLt,this.ELt=void 0,this.kLt=void 0}constructor(t,i,e){super(),this.DLt="now",this.RLt=new Wt,this.eLt=void 0,this.SLt=t,this.yLt=new IZ(e),this.FLt=new CZ,this.FLt.ALt.yn(DZ.dLt,this.Ds),this.OQ=i,this.Ict=function(t){switch(t){case gt.SI:return Pc.SI;case gt.NI:return Pc.NI;default:return Pc.dI}}(t.YA),this.PLt=new PZ(this.OQ,this.yLt)}};var FZ=class{start(t){this.JJ=t,this.My.uy(this.VLt)}flush(){this.My.oy(this.VLt)}constructor(t){this.VLt=()=>{this.JJ.error(new J)},this.My=t}};function Fr(t){var i;return t.value/(null!=(i=t.scale)?i:1)}r(),r(),r(),r(),r(),Qi();var YZ="{initId}",VZ=/{initId(?::0(?:\d+)d)?}/,GZ=/{segmentId(?::0(?:\d+)d)?}/,WZ=class{get o(){return this.aS}get FY(){return this.EY}get Gyt(){return this.GLt}get Wot(){return this.eMt}get WLt(){return this.ZLt}get HLt(){return this.XLt}get jLt(){return Fe.TA(this.qLt,this.KLt.jLt)}get cht(){return this.JLt}get kh(){return this.eB}get $Lt(){return this.txt}get ixt(){return this.sxt}get nLt(){return this.nxt}get rxt(){return this.Hbt}Yn(t){this.ZLt=t.activeSegment,this.XLt=t.activeSequenceNumber,this.eMt=t.segments}constructor(t,i,e){var s,n,r,o;this.eMt=[],this.bB=t,this.oxt=e,this.aS=t.id,this.EY=t.bandwidth,this.GLt=t.averageBandwidth,this.qLt=null!=(s=t.baseUrl)?s:"",this.JLt=null!=(n=t.codecs)?n:i.codecs,this.txt=null!=(r=t.continuationPattern)?r:i.continuationPattern,this.sxt=null!=(o=t.initializationPattern)?o:i.initializationPattern,this.eB=t.label,this.nxt=t.mediaTimeOffset?Fr(t.mediaTimeOffset):0,this.Hbt=t.segmentDuration?Fr(t.segmentDuration):0,this.Yn(t)}},ZZ=class extends WZ{get YA(){return gt.SI}get KLt(){return this.oxt}get hxt(){return this.axt}get vgt(){return this.uxt}get AO(){return this.OM}get gX(){return'audio/mp4; codecs="'+this.cht+'"'}constructor(t,i,e){var s,n,r,o;super(t,i,e),this.axt=null!=(s=t.channels)?s:1,this.uxt=null!=(r=null!=(n=t.frameRate)?n:i.frameRate)?r:1024,this.OM=null!=(o=t.sampleRate)?o:i.sampleRate}},HZ=class extends WZ{get YA(){return gt.NI}get KLt(){return this.oxt}get cxt(){return this.Wp}get vgt(){return this.uxt}get gX(){return'video/mp4; codecs="'+this.cht+'"'}constructor(t,i,e){var s;super(t,i,e),this.Wp=t.resolution,this.uxt=Fr(null!=(s=t.frameRate)?s:i.frameRate)}};function XZ(t,i){const e=String(i);if(t===YZ||"now"===i)return e;const s=C(t.substring(9,t.lastIndexOf("d")));return _c(e,s,"0")}function qZ(t,i){const e=String(i);if(t===YZ)return e;const s=C(t.substring(12,t.lastIndexOf("d")));return _c(e,s,"0")}Qi();var KZ=class{get Rnt(){return this.lxt}get o(){return this.aS}get dxt(){return this.fxt}get jLt(){return Fe.TA(this.qLt,this.Rnt.jLt)}get kh(){return this.eB}get nLt(){return this.nxt}get gxt(){return this._xt}Yn(t){for(const i of this.yL){const e=dl(t.tracks,(t=>i.o===t.id));e&&i.Yn(e)}}constructor(t,i,e){var s;this.oxt=t,this.yL=e,this.lxt=i,this.aS=t.id,this.fxt=t.alignId,this.qLt=null!=(s=t.baseUrl)?s:"",this.eB=t.label,this.nxt=t.mediaTimeOffset?Fr(t.mediaTimeOffset):0,this._xt=t.protection,this.Yn(t)}},JZ=class extends KZ{get KLt(){return this.oxt}get Z(){return this.yL}get gs(){return this.$M}get hxt(){return this.axt}Yn(t){var i,e;super.Yn(t),this.$M=t.language,this.axt=null!=(i=t.channels)?i:1,this.kX=null!=(e=t.mimeType)?e:"audio/mp4"}constructor(t,i){const e=[];super(t,i,e);for(const i of t.tracks)e.push(new ZZ(i,t,this))}},$Z=class extends KZ{get KLt(){return this.oxt}get Z(){return this.yL}Yn(t){var i;super.Yn(t),this.kX=null!=(i=t.mimeType)?i:"video/mp4"}constructor(t,i){const e=[];super(t,i,e);for(const i of t.tracks)e.push(new HZ(i,t,this))}};Qi();var tH=class{get o(){return this.aS}get jLt(){return Fe.TA(this.qLt,this.wxt.vxt)}get mxt(){return this.pxt}get LE(){return this.EG}get _X(){return this.J_}get Axt(){return this.yxt}get bxt(){return this.Mxt}Yn(t){var i;this.pxt=t.timeBounds,this.J_=null!=(i=t.events)?i:[],this.EG=t.currentTime?Fr(t.currentTime):void 0}constructor(t,i){var e,s,n;this.yxt=[],this.Mxt=[],this.wxt=t,this.aS=i.id,this.qLt=null!=(e=i.baseUrl)?e:"";for(const t of null!=(s=i.audio)?s:[])this.yxt.push(new JZ(t,this));for(const t of null!=(n=i.video)?n:[])this.Mxt.push(new $Z(t,this));this.Yn(i)}};Qi();var iH=class{get XL(){return this.wxt}get Txt(){return this.Sxt}get Nxt(){return this.Ixt}get Dxt(){return this.Ext}get kxt(){return this.Lxt}get xxt(){return this.Cxt}get I1(){return this.TM}get jxt(){return this.Oxt}get vxt(){var t;return Fe.TA(null!=(t=this.Rxt)?t:"",this.Pxt)}get zxt(){return this.Bxt}Yn(t){var i;this.Sxt=Fr(t.availabilityDuration),this.Ixt=t.creationDate,this.Ext=t.fallbackPollRate,this.Lxt=t.manifestVersion,this.TM=t.streamType,this.Oxt=t.activePresentation,this.Rxt=t.contentBaseUrl,this.Bxt=null==(i=t.timeSource)?void 0:i.url,this.wxt=t;for(const i of t.presentations){const t=dl(this.Cxt,(t=>t.o===i.id));t?t.Yn(i):this.Cxt.push(new tH(this,i))}this.Cxt=this.Cxt.filter((i=>t.presentations.some((t=>t.id===i.o))))}constructor(t,i){this.Cxt=[],this.Pxt=t,this.wxt=i,this.Yn(i)}};r(),r();var eH=0,sH=class extends tu{get lot(){return!0}get Gyt(){return this.Uxt.Gyt}get FY(){return this.Uxt.FY}get cht(){return this.Uxt.cht}get o(){return this.Uxt.o}get kh(){var t;return null!=(t=this.Uxt.kh)?t:""}get zL(){return this.iB}get Xyt(){return this.Uxt.jLt}get Wyt(){}get gX(){return this.Uxt.gX}get nLt(){return this.Uxt.nLt}get jLt(){return this.Uxt.jLt}get YA(){return this.Uxt.YA}OLt(t){const i=(t-this.Uxt.KLt.Rnt.LE)*this.framesPerSecond();return x.round(this.Uxt.HLt+i)}Qxt(t){return t+1}CLt(t){var i;let e,s=this.Uxt.ixt;for(;e=null==(i=s.match(VZ))?void 0:i.pop();)s=s.split(e).join(XZ(e,t));return s+("now"===t?"?uuid="+xL():"")}YLt(t){var i;let e,s=this.Uxt.$Lt;for(;e=null==(i=s.match(GZ))?void 0:i.pop();)s=s.split(e).join(qZ(e,t));return s}kQ(){}EQ(){}constructor(t){super(),this.iB=eH++,this.Uxt=t}},nH=class extends sH{get Fxt(){return this.Uxt}get GAt(){return this.Uxt.AO}get Ht(){return this.bB}framesPerSecond(){return this.Uxt.AO/this.Uxt.vgt}get ga(){return this.Za||(this.Za=JY(this)),this.Za}constructor(t,i){super(t),this.Za=void 0,this.bB=i}},rH=class extends sH{get Fxt(){return this.Uxt}get Zyt(){return 0}get vgt(){return this.Uxt.vgt}get Ti(){return this.Uxt.cxt.height}get ji(){return this.Uxt.cxt.width}get cxt(){return this.Uxt.cxt}get Ht(){return this.bB}framesPerSecond(){return this.Uxt.vgt}get ga(){return this.Za||(this.Za=KY(this)),this.Za}constructor(t,i){super(t),this.Za=void 0,this.bB=i}};r();var oH=function(t){return t.Yxt="alternative",t.Vxt="main",t.Gxt="commentary",t.Wxt="",t.bQ="descriptions",t.Zxt="main-desc",t.Hxt="translation",t}({}),Dr=function(t){return t.Yxt="alternative",t.Vxt="main",t.Gxt="commentary",t.Wxt="",t.yQ="captions",t.CL="sign",t.AQ="subtitles",t}({}),hH=0,aH=class extends tu{get PL(){return this.Xxt()}get Rt(){return this.He}set Rt(t){this.Rt!==t&&(this.He=t,t&&this.qxt(),this.Jxt.Kxt(),this.yo(new dM(this)))}get ga(){return this.Za||(this.Za=go(this)),this.Za}get Zft(){return this.$xt}get o(){return this.oxt.o}get zL(){return this.iB}get kh(){var t;return null!=(t=this.oxt.kh)?t:""}get UI(){return this.Rt?"enabled":"disabled"}set UI(t){"enabled"===t?this.Rt=!0:"disabled"===t&&(this.Rt=!1)}get UL(){return this.qz}get QL(){return this.udt}set QL(t){this.udt=t,this.Jxt.Kxt(),this.yo(new th(t,this))}nB(t){this.Rt=t}tCt(t){for(const i of this.qz.AL)i===t&&this.yo(new HF(i))}constructor(t,i,e){super(),this.qz=new ki,this.iB=hH++,this.He=!1,this.udt=void 0,this.oxt=i,this.Jxt=e,this.$xt=new AG(t,[]);for(const t of i.Z)this.qz.Kz(this.createQuality(t))}},uH=class extends aH{get YA(){return gt.SI}get Lt(){return oH.Vxt}get gs(){return this.oxt.gs}get KLt(){return this.oxt}qxt(){this.Jxt.iCt(this)}Xxt(){const t=this.Jxt.eCt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new nH(t,this)}constructor(t,i){super(Ri.SI,t,i)}},cH=class extends aH{get YA(){return gt.NI}get Lt(){return Dr.Vxt}get gs(){return""}get KLt(){return this.oxt}qxt(){this.Jxt.sCt(this)}Xxt(){const t=this.Jxt.nCt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new rH(t,this)}constructor(t,i){super(Ri.NI,t,i)}};function lH(t,i,e,s){if(!t)return;const n=function(t,i,e){const s=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"audio/mp4";var r;const e=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(i+'; codecs="'+e+'"')}return dH(t,i,s,[],e)}(t,i?[i]:[],!s),r=function(t,i,e){const s=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"video/mp4";var r;const e=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(i+'; codecs="'+e+'"')}return dH(t,i,[],s,e)}(t,e?[e]:[],!s),o=ZG(n,r);return t.preferredKeySystems&&(null==o?void 0:o.bpt)&&(o.bpt=eW(o.bpt,t.preferredKeySystems)),o}function dH(t,i,e,s,n){const r=i.map((t=>t.protection)).filter($t);if(!r.length)return;const o=r[0].type,h=Ms(r,(t=>t.systems)),a=Ms(h,(t=>function(t,i){void 0===i&&(i=!0);const e=[],s=i?function(t){return Lv.filter((i=>i.WA===t.toLowerCase()))}(t.schemeId):function(t){return kv.filter((i=>i.WA===t.toLowerCase()))}(t.schemeId);for(const i of s)e.push({hY:fH(t)?t.uri:void 0,NS:i,qY:void 0,XY:t.pssh?[Zn(t.pssh).buffer]:[]});return e}(t,n)));return{IF:t,Mpt:{BSt:o},bpt:a,USt:e,QSt:s}}function fH(t){return t.schemeId===cv.QA&&void 0!==t.keyFormat&&void 0!==t.keyFormatVersions}r(),Qi(),bs(),r(),Qi(),r();var gH;function _H(t){const i=t.LE,e=t.TE.CP(i);return e?e.jn(0)-i:0}gH="Android"===Fe.IA.DA?200:300;var vH=Fe.Ys.Lp?1:.5,wH=class{Cn(){1!==this.Ea&&(this.Ea=1,this.rCt=Fe.dA((()=>{this.oCt()}),gH),this.hCt.jkt(this.aCt),this.cz.KE?this.uCt.yn(E.oP,this.cCt):this.cCt())}zk(){0!==this.Ea&&(this.Ea=0,void 0!==this.rCt&&Fe.fA(this.rCt),this.hCt.Rkt(this.aCt),this.uCt.fn(E.rP,this.lCt),this.uCt.fn(E.oP,this.cCt),this.dCt=void 0,this.VP())}get fCt(){return mH(this.gCt.eCt,this.gCt.nCt)}async oCt(){await this._Ct,this._Ct=this.vCt(),await this._Ct}wCt(t,i){const e=this.mCt(t,i),s=this.hCt.FY;for(const t of e){if(t.pCt<=s)return t}return e[e.length-1]}async vCt(){var t,i;const e=null==(t=this.gCt.eCt)?void 0:t.Ht,s=null==(i=this.gCt.nCt)?void 0:i.Ht,n=this.mCt(e,s);if(0===n.length)return void 0;const r=this.maybeSwitchToTargetQuality(n);if(r)return void await this.ACt(r);const o=this.maybeGetUpSwitch(n);o&&await this.ACt(o)}maybeSwitchToTargetQuality(t){const i=this.fCt;if(t.some((t=>pH(t,i))))return;const e=this.hCt.FY;for(const i of t){if(i.pCt<=e)return i}return t[t.length-1]}maybeGetUpSwitch(t){var i,e;const s=this.hCt.FY;var n;var r;const o=(null!=(n=null==(i=this.gCt.eCt)?void 0:i.FY)?n:0)+(null!=(r=null==(e=this.gCt.nCt)?void 0:e.FY)?r:0);let h;for(const i of t){if(i.pCt<s&&i.pCt>o){h={yCt:i,t_t:Fe.Og()};break}}if(!this.dCt||!pH(this.dCt.yCt,null==h?void 0:h.yCt))return void(this.dCt=h);const a=Fe.Og()-this.dCt.t_t,u=this.dCt.yCt.pCt,c=this.bCt.length>=3&&this.bCt.every((t=>t>u));if(a>1e3&&c){if(this.cz.mz.wz||Fe.Ys.Np){const t=2*this.hCt.YY;if(!(_H(this.cz)>t))return}else{const t=x.max(2*this.hCt.YY+vH,this.aV.BP.minimumOffset);if(!(_H(this.cz)>t))return void(this.MCt&&this.MCt.minimumOffset===t||(this.VP(),this.MCt={minimumOffset:t},this.aV.QP(this.MCt)))}return this.dCt.yCt}}async ACt(t,i){void 0===i&&(i=!1),this.dCt=void 0,this.VP();const e=this.fCt;if(e.TCt===t.TCt&&e.SCt===t.SCt)return;const s=t.TCt,n=t.SCt;e.SCt&&n&&e.SCt.FY>n.FY&&i&&(this.hCt.xkt(t.pCt),this.bCt=[]),await this.gCt.NCt(n,s)}VP(){this.MCt&&(this.aV.VP(this.MCt),this.MCt=void 0)}mCt(t,i){let e=[],s=[];var n;t&&(e=(null==(n=t.QL)?void 0:n.length)?t.QL:t.UL.AL);if(i){var r;const t=(null==(r=i.QL)?void 0:r.length)?i.QL:i.UL.AL,e=t.slice().sort(((t,i)=>t.FY-i.FY)),n=this.ICt(e);0===n.length&&t.length>0&&n.push(ew(t,(t=>t.FY))),s=n}const o=[],h=e.length>0?e:[void 0],a=s.length>0?s:[void 0];for(const t of h)for(const i of a)o.push(mH(t,i));return function(t){return t.sort(((t,i)=>i.pCt-t.pCt))}(o)}ICt(t){for(let i=0;i<t.length;i++){const e=t[i].cxt;if(e.height>=this.cz.Ti&&e.width>=this.cz.ji)return t.slice(0,i+1)}return t.slice()}wy(){this.dCt=void 0,this.uCt.tr(),this.VP()}constructor(t,i,e,s,n){this.cz=t,this.aV=i,this.gCt=e,this.DCt=s,this.hCt=n,this.Ea=0,this._Ct=Promise.resolve(),this.bCt=[],this.MCt=void 0,this.lCt=()=>{var t,i;if(this.DCt.wk)return;const e=null==(t=this.gCt.eCt)?void 0:t.Ht,s=null==(i=this.gCt.nCt)?void 0:i.Ht,n=ew(this.mCt(e,s),(t=>t.pCt));n&&(X(this.ACt(n,!0)),this.cz.mz.wz&&this.DCt.qL())},this.cCt=()=>{this.uCt.yn(E.rP,this.lCt),this.uCt.fn(E.oP,this.cCt)},this.aCt=()=>{if(this.bCt.unshift(this.hCt.FY),this.bCt=this.bCt.slice(0,3),this.dCt){const t=this.dCt.yCt.pCt;this.hCt.FY<t&&(this.dCt=void 0,this.VP())}},this.uCt=new ko(this.cz)}};function mH(t,i){var e;var s;return{TCt:t,SCt:i,pCt:(null!=(e=null==t?void 0:t.FY)?e:0)+(null!=(s=null==i?void 0:i.FY)?s:0)}}function pH(t,i){var e,s,n,r;return void 0===t||void 0===i?t===i:(null==(e=t.TCt)?void 0:e.o)===(null==(s=i.TCt)?void 0:s.o)&&(null==(n=t.SCt)?void 0:n.o)===(null==(r=i.SCt)?void 0:r.o)&&t.pCt===i.pCt}r(),Qi(),bs();var AH=class t{static async create(i,e,s){const n=await yH(i,e,s);return new t(n,i,e)}get Ibt(){return(this.ECt.serverTimeMs+(Fe.Og()-this.ECt.localTimeMs))/1e3}get kCt(){return(this.ECt.localTimeMs-this.ECt.serverTimeMs)/1e3}async xEt(t,i,e){for(;!e.sy;){await Dt(6e5,e);try{this.ECt=await yH(t,i,e)}catch(t){V(t)}}}wy(){this.rN.Ty()}constructor(t,i,e){this.rN=new Wt,this.ECt=t,this.xEt(i,e,this.rN.ly).catch(Bn)}};async function yH(t,i,e){let[s,n,r]=await bH(t,i,e);return n>20&&([s,n,r]=await bH(t,i,e)),{localTimeMs:s,serverTimeMs:r-n/2}}async function bH(t,i,e){const s=Fe.Og(),n=await i.hI({xI:Ve.GET,zu:t,ly:e}),r=Fe.Og()-s,o=await n.UN(e);return[s,r,1e3*Number(o)]}var MH=class extends Jr{constructor(){super("seek")}},TH=function(t){return t.eW="seek",t}({}),SH=[Zi.so,E.lL,Zi.Eb],NH=class extends tu{get XL(){return this.wxt}get TE(){return this.LCt&&this.xCt?this.LCt.TE.Sn(this.xCt.TE):this.LCt?this.LCt.TE:this.xCt?this.xCt.TE:Mo.PP()}get eCt(){return this.CCt}get nCt(){return this.jCt}get ht(){return this.Oz}get rt(){return this.Pz}get OCt(){return this.RCt.rM}get W(){return this.PCt.rM}get _k(){return this.wxt?function(t,i,e){var s;const n=null==(s=t.xxt[0])?void 0:s.LE,r=t.Txt;if(void 0===n||void 0===r)return e>0&&e<jt?new Mo([0,e],[!0,!0]):Mo.PP();let o=i.Zkt;if(!o){const i=bY(t.Nxt).getTime()/1e3;o=n+(Date.now()/1e3-i)}return new Mo([o-r,o],[!0,!0])}(this.wxt,this.zCt,this.cz.ct):Mo.PP()}async BCt(){this.LCt&&await this.LCt.wS(0,1/0),this.xCt&&await this.xCt.wS(0,1/0)}$n(){if(!this.wc.src)throw new qi(vt.SOURCE_INVALID,"No src property found in given source.");this.Ept||(this.Ept=this.oD(this.zQ.ly).catch(this.e8))}async oD(t){this.yo(new ms);const i=this.wc.src,e=await this.UCt.qEt(i,t);this.wxt=new iH(i,e),this.wxt.zxt&&(this.QCt=await AH.create(this.wxt.zxt,this.OQ,t)),this.FCt();const s=this.wxt.xxt[this.wxt.xxt.length-1];this.createTracksForPresentation(s),this.RCt.sM(),this.Kxt()}iCt(t){for(const i of this.Oz.AL)i.nB(i===t)}sCt(t){for(const i of this.Pz.AL)i.nB(i===t)}Kxt(){const t=dl(this.Oz.AL,(t=>t.Rt)),i=dl(this.Pz.AL,(t=>t.Rt)),e=this.UG.wCt(t,i);X(this.NCt(e.SCt,e.TCt))}FCt(){if(!this.wxt||"live"!==this.wxt.I1||!this.QCt)return;const t=this.wxt.xxt.filter((t=>t.o===this.wxt.jxt))[0].LE,i=this.QCt.kCt+new Date(this.wxt.Nxt).getTime()/1e3;this.zCt.Qkt(i,t)}createTracksForPresentation(t){var i,e,s,n;for(const i of null!=(s=t.Axt)?s:[])this.Oz.tt(new uH(i,this));for(const i of null!=(n=t.bxt)?n:[])this.Pz.tt(new cH(i,this));null==(i=this.Oz.bL(0))||i.nB(!0),null==(e=this.Pz.bL(0))||e.nB(!0)}get ZL(){return ew([this.YCt,this.VCt].filter($t),(t=>t.theolive))}get GCt(){const t=this.zCt.Zkt;if(void 0!==t)return t}Cn(){this.WCt=!0,this.ZCt()}zk(){var t;this.WCt=!1,this.HCt().catch(this.e8),"live"===(null==(t=this.XL)?void 0:t.I1)&&(this.XCt(),this.qCt())}XCt(){this.KCt&&this.KCt.cancelDownload()}qCt(){this.JCt&&this.JCt.cancelDownload()}qL(t){this.w7.Ty(),this.w7=new Wt,this.m7=lw((i=>this.$Ct(t,this.m7,i)),this.w7).catch(this.e8)}async $Ct(t,i,e){if(i&&await i,await Ao(this.W,e),"live"!==this.wxt.I1)throw new b("The current video source does not support Live playback.");if(yi(e),await this.HCt(),yi(e),this.KCt&&(this.KCt.LLt()||this.KCt.ILt!==(null!=t?t:"now"))){var s;if(this.XCt(),this.LCt){for(;this.LCt.iLt;)await Ao(this.LCt.sLt,e);await this.LCt.wS(0,1/0)}null==(s=this.KCt)||s.Wb(null!=t?t:"now")}if(this.JCt&&(this.JCt.LLt()||this.JCt.ILt!==(null!=t?t:"now"))){var n;if(this.qCt(),this.xCt){for(;this.xCt.iLt;)await Ao(this.xCt.sLt,e);await this.xCt.wS(0,1/0)}null==(n=this.JCt)||n.Wb(null!=t?t:"now")}this.yo(new MH),yi(e),this.m7=void 0,this.ZCt()}Wb(t){this.w7.Ty(),this.w7=new Wt,this.m7=lw((i=>this.p7(t,this.m7,i)),this.w7).catch(this.e8)}async p7(t,i,e){var s,n;i&&await i,await Ao(this.W,e),yi(e),await this.HCt(),yi(e),this.KCt&&(this.KCt.LLt()||this.KCt.ILt!==t)&&this.XCt(),this.JCt&&(this.JCt.LLt()||this.JCt.ILt!==t)&&this.qCt(),this.yo(new MH),yi(e),null==(s=this.KCt)||s.Wb(t),null==(n=this.JCt)||n.Wb(t),this.m7=void 0,this.ZCt()}NCt(t,i){var e,s;return(null==(e=this.KCt)?void 0:e.Lut)===i&&(null==(s=this.JCt)?void 0:s.Lut)===t?Promise.resolve():(this.tjt.Ty(),this.tjt=new Wt,this.ijt=lw((e=>this.ejt(t,i,this.ijt,e)),this.tjt).catch(this.e8),this.ijt)}async ejt(t,i,e,s){e&&await e,await Ao(this.RCt.rM,s),yi(s),await this.HCt(),yi(s),await this.sjt(t,i),await this.njt(t,i),yi(s),this.ijt=void 0,this.ZCt()}async sjt(t,i){var e,s,n;const r=null!=(n=this.GCt)?n:"now";if((null==(e=this.KCt)?void 0:e.Lut)!==i){var o;const t=this.KCt&&!this.KCt.LLt(),e=null==(o=this.KCt)?void 0:o.ILt;if(this.KCt&&(await this.KCt.wy(),this.KCt=void 0),this.LCt&&await this.LCt.sLt,i){var h,a;const s=null!=(a=null==(h=this.LCt)?void 0:h.TE)?a:Mo.PP(),n=t?e:s.jn(s.V-1);this.KCt=new QZ(i,this.OQ,this.lft),this.KCt.yn(DZ.dLt,(t=>this.rjt(Ri.SI,t))),this.KCt.Wb(null!=n?n:r)}}if((null==(s=this.JCt)?void 0:s.Lut)!==t){var u;const i=this.JCt&&!this.JCt.LLt(),e=null==(u=this.JCt)?void 0:u.ILt;if(this.JCt&&(await this.JCt.wy(),this.JCt=void 0),this.xCt&&await this.xCt.sLt,t){var c,l;const s=null!=(l=null==(c=this.xCt)?void 0:c.TE)?l:Mo.PP(),n=i?e:s.jn(s.V-1);this.JCt=new QZ(t,this.OQ,this.lft),this.JCt.yn(DZ.dLt,(t=>this.rjt(Ri.NI,t))),this.JCt.Wb(null!=n?n:r)}}}async njt(t,i){const e=function(t,i,e,s,n){const r=lH(t,null==i?void 0:i.Ht.KLt.KLt,null==e?void 0:e.Ht.KLt.KLt,s),o=$G(r),h=[];i&&h.push({VN:i.gX});e&&h.push({VN:e.gX});return{YA:uh.FQ,E5:h,yV:o,U5:n&&!s}}(this.wc.contentProtection,i,t,this.cz.mz.wz,this.wc.useManagedMediaSource);if(this.vV&&this.vV.N$(e)){var s,n;const t=!(null==(s=this.KCt)?void 0:s.LLt());if(this.LCt&&t){for(;this.LCt.iLt;)await this.LCt.sLt;await this.LCt.DX()}const i=!(null==(n=this.JCt)?void 0:n.LLt());if(this.xCt&&i){for(var r,o;null==(r=this.xCt)?void 0:r.iLt;)await this.xCt.sLt;await(null==(o=this.xCt)?void 0:o.DX())}await this.vV.D$(e)}else{this.XCt(),this.qCt(),this.LCt&&(await this.LCt.wy(),this.LCt=void 0),this.xCt&&(await this.xCt.wy(),this.xCt=void 0),this.cz.ktt();try{await this.cz.tr(),this.vV=await this.cz.$n(e),this.PCt.sM(),this.vV.p5&&this.KCt&&(this.vV.p5.yn(po.g$,this.Ds),this.LCt=new NZ(this.vV.p5,this.cz,i,this.ojt)),this.vV.A5&&this.JCt&&(this.vV.A5.yn(po.g$,this.Ds),this.xCt=new NZ(this.vV.A5,this.cz,t,this.ojt)),"live"===this.wxt.I1&&this.vV.T5(1/0)}finally{this.cz.Ltt()}}}ZCt(){!this.WCt||this.m7||this.ijt||this.hjt||this.ajt||(this.UG.Cn(),this.ujt=new Wt,this.JCt&&this.xCt&&(this.hjt=this.cjt(this.JCt,this.xCt,this.ujt.ly).catch(this.e8)),this.KCt&&this.LCt&&(this.ajt=this.cjt(this.KCt,this.LCt,this.ujt.ly).catch(this.e8)))}async HCt(){this.UG.zk(),this.ujt&&(this.ujt.Ty(),this.ujt=void 0),this.hjt&&(await this.hjt,this.hjt=void 0),this.ajt&&(await this.ajt,this.ajt=void 0)}async cjt(t,i,e){for(await this.W;t.iLt;)await Ao(t.sLt,e);for(;i.iLt;)await Ao(i.sLt,e);if(!t.LLt()){const e=Fe.Og()/1e3,s="now"===t.ILt,{initialization:n,data:r,metadata:o}=await t.xLt(),h={YA:Me.v$,rI:n},a=r?{YA:Me.v$,rI:r}:void 0,u=i.TE;!Fe.Ys.Dp&&!this.cz.mz.wz&&o&&u.jn(u.V-1)>o.kst&&await i.wS(o.kst,1/0),await i.F4(h),a&&await i.B4(a,o,t.Lut);const c=i.TE.yP(u);s&&c.V>0&&this.zCt.Bkt(e,c.jn(c.V-1))}for(;!t.NLt;){yi(e);const s=t.BLt();await Ao(i.appendStream(s,t),e)}}async wy(){this.zQ.Ty(),this.Ept&&await this.Ept.catch(Bn),this.m7&&(this.w7.Ty(),this.XCt(),this.qCt(),await this.m7.catch(Bn)),this.ijt&&(this.tjt.Ty(),this.XCt(),this.qCt(),await this.ijt.catch(Bn)),await this.HCt(),this.KCt&&await this.KCt.wy(),this.JCt&&await this.JCt.wy(),this.KCt=void 0,this.JCt=void 0,this.PCt.Ty(),this.RCt.Ty(),this.vV&&(await this.cz.tr(),this.vV=void 0),this.LCt=void 0,this.xCt=void 0,this.cz.fn(E.oP,this.vz),this.cz.fn(SH,this.updateActiveQualities),this.Oz.tr(),this.CCt=void 0,this.Pz.tr(),this.jCt=void 0,this.wxt=void 0,this.QCt&&(this.QCt.wy(),this.QCt=void 0),this.WCt=!1}constructor(t,i,e,s,n,r,o,h,a,u){super(),this.WCt=!1,this.ljt=!1,this.Oz=new kt,this.Pz=new kt,this.djt=void 0,this.CCt=void 0,this.jCt=void 0,this.RCt=new xh,this.vV=void 0,this.Ept=void 0,this.PCt=new xh,this.zQ=new Wt,this.ijt=void 0,this.tjt=new Wt,this.m7=void 0,this.w7=new Wt,this.KCt=void 0,this.LCt=void 0,this.ajt=void 0,this.JCt=void 0,this.xCt=void 0,this.hjt=void 0,this.ujt=void 0,this.vz=()=>{this.ljt=!0},this.updateActiveQualities=()=>{var t,i;const e=this.cz.LE,s=null==(t=this.LCt)?void 0:t.Jkt(e),n=null==(i=this.xCt)?void 0:i.Jkt(e);if(this.CCt!==s&&(this.CCt=s,s))for(const t of this.Oz.AL)t.tCt(s);if(this.jCt!==n&&(this.jCt=n,n))for(const t of this.Pz.AL)t.tCt(n)},this.rjt=(t,i)=>{const e=i.data;if(e.YA===wl._Lt){const{wLt:i,mLt:n,vLt:r,pLt:o}=e;if(this.QCt){const e=this.QCt.Ibt,s=this.cz.LE;if(this.ljt&&0!==s){const o={theolive:e-i+r-s,engine:n,distribution:e-(i+n),player:r-s};t===Ri.SI?(this.VCt=o,this.zCt.Gkt(this.QCt.kCt+i,r)):(this.YCt=o,this.zCt.Ykt(this.QCt.kCt+i,r))}}var s;if(o)null!=this.djt||(this.djt=this.cz.Wk(z.MQ,"timecode","timecode",void 0,!1,El.DEFAULT,!1,void 0)),this.djt.RQ(new hN(r,r,o,!1,void 0)),HI(this.djt,null!=(s=this.cz.TE.Cn(0))?s:-1)}this.yo(i)},this.e8=t=>{Tu(t)||(this.zk(),this.yo(new cl(new qi(vt.MEDIA_LOAD_ERROR,t.message))))},this.wc=t,this.UCt=i,this.cz=e,this.OQ=n,this.zCt=r,this.UG=new wH(e,o,this,a,s),this.lft=h,this.ojt=u,this.cz.yn(E.oP,this.vz),this.cz.yn(SH,this.updateActiveQualities)}};r(),Qi();var IH=class extends FT{yz(){const t=this.cz.TE;return 0===t.V?0:t.jn(t.V-1)-this.cz.LE}qL(){this.ta.qL()}GP(){return MZ(super.GP())}bz(){return!Fe.Ys.Np}constructor(t,i,e){super(t,i,e)}},DH=[Zi.yb,Zi.Eb,Zi.qy,Zi.pb,Zi.kb,Zi.Zy,Zi.$y,Zi.Ky],EH=class extends tu{DL(){this.cz.yn(DH,this.Ds),this.cz.yn(E.oP,this.iZ),this.cz.yn([Zi.so,Zi.wb],this.fjt),this.cz.yn(Xi.ua,this.gjt),this.cz.yn(Zi.Eb,this.ld),this.OV.yn(zT,this.Ds)}NL(){this.cz.fn(DH,this.Ds),this.cz.fn(E.oP,this.iZ),this.cz.fn([Zi.so,Zi.wb],this.fjt),this.cz.fn(Xi.ua,this.gjt),this.cz.fn(Zi.Eb,this.ld),this.OV.fn(zT,this.Ds)}get ht(){return this.Oz}get rt(){return this.Pz}get XL(){var t,i;return null==(i=this.gCt)||null==(t=i.XL)?void 0:t.XL}get Nk(){return this.cz.Nk}set Nk(t){this.cz.Nk=t}get xk(){return!1}set xk(t){}get pV(){return this.AV}Bk(){return!1}Ck(){return this.cz.wa}_a(){return this.cz.xV}Wk(t){return this.cz.CV(t)}be(){this.cz.be()}ge(){return this.cz.ge()}Fk(){}Yk(){}Uk(){}Qk(){}get WE(){return this.cz.WE}set WE(t){this.cz.WE=t}get LE(){var t;return null!=(t=this._jt)?t:this.cz.LE}set LE(t){this.CE(t)}CE(t,i){this.w7.Ty(),this.w7=new Wt,this.m7=lw((i=>this.p7(t,i,this.m7)),this.w7)}get NE(){const t=this.vjt();if(t)return new Date(t.getTime()+1e3*this.LE)}set NE(t){const i=this.vjt();t&&i&&(this.LE=i.getTime()-t.getTime())}vjt(){const t=this.XL;if(!t)return;const i=new Date(t.creationDate).getTime();let e=NaN;for(const i of t.presentations)i.currentTime&&(e=i.currentTime.value/(i.currentTime.scale||1)*1e3);return j(e)?void 0:new Date(i-e)}get bt(){return this.wc}get $E(){return this.cz.$E}set $E(t){this.cz.$E=t}get ct(){const t=this.cz.ct;return t===jt?1/0:t}get OE(){return!1}get zE(){return this.fV}get lt(){return this.dV}get UE(){return this.wjt}get FE(){return!1}get VE(){return Ei({},{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.cz.GE())}get XE(){return!0}get wk(){return this.kG}get wV(){}get nt(){return this.Ul}get yk(){return this.cz.yk}get Tk(){return this.cz.Tk}get TE(){return this.QNt.ks()}get QNt(){return this.gCt?this.gCt.TE:Mo.PP()}get rk(){return this.cz.rk.ks()}get _k(){var t,i;return null!=(i=null==(t=this.gCt)?void 0:t._k.ks())?i:Mo.PP().ks()}get KE(){return this.int}get HL(){return!0}get Ek(){return this.QG}get GCt(){var t;return null==(t=this.gCt)?void 0:t.GCt}get Az(){if(this.KE)return;if(!this.ljt)return;const t=this.LE,i=this.zCt.Hkt(t);if(void 0===i)return;const e=this.QNt;let s=0;if(e.V>0){const i=e.jn(e.V-1);s=x.max(i-t,0)}return x.max(i,s)}get ZL(){var t;return null==(t=this.gCt)?void 0:t.ZL}get fk(){return this.cz.fk}get ck(){return this.mjt}set ck(t){this.mjt=t,this.pjt()}async pjt(){this.mjt!==Dn.pG&&this.gCt&&(this.gCt.$n(),this.mjt!==Dn.Mz&&this.mjt!==Dn.QY||(await this.gCt.OCt,"vod"===this.gCt.XL.I1&&this.gCt.Cn()))}async ka(t,i,e){if(yi(e),await this.tr(),yi(e),!uS(t))return this.fV=new qi(vt.SOURCE_INVALID,"HESP source incorrectly configured"),this.dV=Au(this.fV),this.Ajt(this.fV),Promise.resolve();const s=t;this.wc=s;const n=new sZ(this.OQ);this.yjt=this.bjt(t),this.aV=new IH(this,this.cz,this.yjt),this.aV.Rt=!0,this.aV.yn("latencyrecoveryseek",this.Ds),this.Ek.Sa(this.aV),this.gCt=new NH(s,n,this.cz,this.AV,this.OQ,this.zCt,this.aV,this.lft,this,this.ojt),this.gCt.yn(Zi.ub,this.Ds),this.gCt.yn(Xi.ua,this.Mjt),this.Oz.TL=this.gCt.ht,this.Pz.TL=this.gCt.rt,this.SV.WY(t.contentProtection),X(this.pjt())}bjt(t){return t.latencyConfiguration?t.latencyConfiguration:TZ()}async Pk(){var t;if(!this.gCt)return;this.int=!1,this.gCt.$n(),await this.gCt.W,this.yo(new fi(this.LE));const i=this.gCt.zy(TH.eW);this.qL(),await i,this.gCt.Cn(),await this.cz.Pk(),null==(t=this.aV)||t.Cn()}Rk(){var t;this.gCt&&(this.int=!0,this.yo(new Se(this.LE)),this.gCt.zk(),null==(t=this.aV)||t.zk(),this.cz.Rk())}qL(){if(this.pDt)throw new b("Cannot seek while resetting");this.w7.Ty(),this.w7=new Wt,this.m7=lw((t=>this.$Ct(this.m7,t)),this.w7)}Tjt(){var t;null==(t=this.gCt)||t.zk()}Ajt(t){this.yo(new cl(t)),this.Tjt()}async p7(t,i,e){var s;if(this.pDt)throw new b("Cannot seek while resetting");let n=t;if(this.Sjt(n),this._k.length>0&&(n=Mo.xn(this._k).gP(n),this.Sjt(n)),this.gCt){e&&(await e.catch(Bn),yi(i)),(null==(s=this.aV)?void 0:s.zP)&&this.aV.zk();try{const t=this.cz.zy(Zi.bb,i);this.cz.Wb(n),this.gCt.Wb(n),await t}catch(t){throw V(t),this.gCt.zk(),this.Njt(),t}this.Ijt()}}async $Ct(t,i){this.yo(new Jr("golive"));const e=this.GCt;if(this.Sjt(e),this.gCt){t&&(await t.catch(Bn),yi(i));try{let t,s=this.aV.BP.targetOffset;if(await this.gCt.OCt,e&&s>=1){if(!this.aV.bz()){s-=x.min(1,.5*s)}t=e-s}else t=this.GCt?this.GCt-.2:void 0;for(this.gCt.qL(t);this.QNt.V>0;)await this.gCt.zy(po.g$,i);const n=this.QNt;for(;0===this.QNt.yP(n).V;)await this.gCt.zy(po.g$,i);t=this.QNt.Cn(this.QNt.V-1),t=this.Djt(t),this.Sjt(t);const r=this.cz.zy(Zi.bb,i);this.cz.Wb(t,!0),await r}catch(t){var s;if(Tu(t))throw null==(s=this.aV)||s.Cn(),t;throw this.gCt.zk(),await this.gCt.BCt(),this.Njt(),t}this.Ijt()}}Sjt(t){this.kG=!0,this._jt=t,this.yo(new Yr(this.LE))}Ijt(){this.kG&&(this._jt=void 0,this.kG=!1,this.yo(new aa(this.LE)))}Njt(){this._jt=void 0,this.kG=!1}Djt(t){return t}async ADt(t,i,e){var s;yi(e),t&&await t.catch(Bn),i&&await i.catch(Bn),await this.ojt.tr(),null==(s=this.aV)||s.zk(),this.gCt&&(await this.gCt.wy(),this.gCt=void 0),yi(e),await this.cz.tr(),yi(e),this.cz.jV(),this.Pz.tr(),this.Oz.tr(),this.Njt(),this.OV.tr(),this.zCt.tr(),this.fV=void 0,this.dV=void 0,this.int=!0,this.ljt=!1,this.wc=void 0,this.pDt=void 0,this.yjt=void 0}tr(){return this.w7.Ty(),this.w7=new Wt,this.Ejt.Ty(),this.Ejt=new Wt,this.pDt=this.ADt(this.m7,this.pDt,this.Ejt.ly),this.pDt}async gn(){var t,i;this.NL(),this.OV.gn(),this.wc&&await this.tr(),this.Bo(),this.cz.zV=void 0,null==(t=this.aV)||t.fn("latencyrecoveryseek",this.Ds),null==(i=this.aV)||i.wy(),await this.ojt.gn(),this.Ul.gn(),this.Oz.gn(),this.Pz.gn()}constructor(t,i,e,s,n){super(),this.gCt=void 0,this.kG=!1,this.w7=new Wt,this.m7=void 0,this.pDt=void 0,this.Ejt=new Wt,this.int=!0,this.ljt=!1,this.Oz=new ol,this.Pz=new ol,this.fV=void 0,this.dV=void 0,this.mjt=Dn.pG,this.ld=()=>{const t=this.TE;t.length>0&&this.ojt.NQ(t.start(0))},this.fjt=()=>{this.cz.KE!==this.int&&(this.cz.KE?this.Rk():this.Pk().catch(Bn))},this.iZ=()=>{this.ljt=!0},this.Mjt=t=>{this.fV=t.errorObject,this.dV=Au(this.fV),this.Ajt(this.fV)},this.gjt=t=>{this.fV=ju(t.lt),this.dV=t.lt,this.Ajt(this.fV)},this.cz=t,this.OV=new ko(this.cz,!0),this.OQ=i,this.AV=new gZ(e.VK,e.NK.YY),this.SV=new PE(i),this.cz.zV=this.SV,this.ojt=new QF(this.cz),this.Ul=new BE([this.cz.nt,this.ojt.Z]),this.zCt=new _Z,this.wjt=new nZ(this),this.QG=s,this.lft=n.retryConfiguration,this.DL()}};Uc(),Qi();var kH=class extends EH{yo(t){if(this.kjt){if(t.type===Zi.bb)return void this.Ljt();if(t.type===E.rP||t.type===Zi.Mb||t.type===E.oP)return void this.xjt.push(t)}super.yo(t)}Ljt(){this.kjt=!1,void 0!==this.Cjt&&Fe.Rg(this.Cjt);const t=dl(this.xjt,(t=>t.type===E.oP));t&&super.yo(t),nt(this.xjt)}jk(){if(WB(this.cz))return this.cz.jk()}async tr(){this.jjt=!1,this.Ljt(),await super.tr()}async gn(){h.removeEventListener("visibilitychange",this.Ojt),this.Ljt(),await super.gn(),await this.cz.wy(),await this.QV.BV(this.Rjt)}Djt(t){return Ro.qf&&Ro.Jf>=15&&Ro.Kd?t+.25:t}constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.jjt=!1,this.kjt=!1,this.xjt=[],this.Cjt=void 0,this.Ojt=()=>{const t=this.WE||0===this.Nk;"hidden"===h.visibilityState&&!this.KE&&t?(this.Rk(),this.jjt=!0):"visible"===h.visibilityState&&this.jjt&&(this.kjt=!0,this.Cjt=Fe.Pg((()=>{for(const t of this.xjt)super.yo(t);this.Cjt=void 0,this.kjt=!1}),2e3),X(this.Pk()),this.jjt=!1)},this.QV=n,this.Rjt=t,Ro.xg&&h.addEventListener("visibilitychange",this.Ojt)}};r();var LH=class{get hG(){return pt.ox}async nG(t,i){return function(t){if(!t)return!1;const i=t.toLowerCase();return I(i,$n.nx)||I(i,$n.ox)}(t.type)}async rG(t){return mu(t)}};Uc(),Qi();Gi(new class extends LH{bx(t,i,e,s,n,r,o){const h=new rs(i),a=h.sG(Ri.NI);return new kH(a,e,n,r,h,s)}nG(t,i){return Fe.rE&&Uy?Ro.IS_IOS_CHROME||Ro.Nf&&Ro.Df<6?Promise.resolve(!1):Wf(t.useManagedMediaSource)?super.nG(t,i):Promise.resolve(!1):Promise.resolve(!1)}oG(){return!1}}),r(),Uc(),r();var xH=class extends EH{jk(){if(WB(this.cz))return this.cz.jk()}async gn(){await super.gn(),await this.QV.BV(this.cz)}constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.QV=n}};Ro.qf&&Ro.Ka&&Gi(new class extends LH{get hG(){return pt.UY}async nG(t,i){var e,s;if(Ro.IS_IOS_CHROME)return!1;const n=await super.nG(t,i);var r;if(null==(r=null==(s=Eh())||null==(e=s.canPlayType)?void 0:e.call(s,$n.tx))||!r||!n||!("serviceWorker"in Kl))return!1;try{const t=Kl.serviceWorker.ready;return await _w(t,1e3),!0}catch(t){return!1}}async rG(t){return!!t.fairplay&&await super.rG(t)}bx(t,i,e,s,n,r,o){if(t instanceof HTMLDivElement){const t=i.fot(Ri.NI);return new xH(t,e,n,r,i,s)}throw new qi(vt.CONFIGURATION_ERROR,"Container Div element expected.")}oG(){return!1}}),r(),r(),r(),r();var CH="theo_live_user_id",jH=class{incrementSequenceNumber(){this.bT+=1}get sequenceNumber(){return this.bT}constructor(t){this.externalId=t,this.id=xL(),this.userId=OH(),this.bT=0}};function OH(){try{const t=localStorage.getItem(CH);if(t)return t;const i=xL();return localStorage.setItem(CH,i),i}catch(t){return xL()}}r(),Qi();var RH=class{Omt(t){const i=this.Pjt.get(t.id);if(i)return i;const e=new PH(t,this.OQ,this.zjt);return this.Pjt.set(t.id,e),e}constructor(t,i){this.OQ=t,this.Pjt=new Map,this.zjt=i}},PH=class{get Bjt(){return B()-this.Ujt>36e5}Yn(){this.Qjt=!1,this.Ujt=B(),this.Fjt=this.pSt(),this.Fjt.catch((()=>this.Qjt=!0))}async pSt(){const{id:t,discovery:i}=this.aS;if(tt(i.pathname,"manifest.json"))return function(t){return{id:{id:t.id,discovery:Fe.Ah("dev://")},name:"demo",mode:"demo",status:"playing",source:{src:t.id,type:"theo.live"},customization:{autoplay:!0}}}(this.aS);const e=await this.Yjt(this.aS,this.Vjt);if(!e)throw new BH(t);const{mode:s,status:n,fallback:r,metadata:o}=e;if("locked"===s)throw new UH(t);if("deleted"===n)throw new QH(t);return{id:this.aS,name:o.name,mode:s,status:n,source:FH(e),fallback:r?await this.Gjt(r,i,this.Vjt):void 0,insights:null==o?void 0:o.insights,enhancedLogging:null==o?void 0:o.enhancedLogging,customization:null==o?void 0:o.customization,sseEndpoint:e.sseEndpoint}}async Gjt(t,i,e){if("theo.live"!==t.type)return{src:t.src,type:t.type};const s={id:t.src,discovery:i},n=await this.Yjt(s,e);return n?FH(n):void 0}async Yjt(t,i){let{id:e,discovery:s}=t;try{const t=await this.OQ.hI({zu:Fe.Ah(e,s.toString()).toString(),aI:i});return await t.BN()}catch(t){return}}get aet(){return(this.Qjt||this.Bjt)&&this.Yn(),this.Fjt}constructor(t,i,e){this.aS=t,this.OQ=i,this.Vjt=new Rh,e.discoveryHeader&&this.Vjt.append("x-theolive-discovery",e.discoveryHeader),this.Yn()}};var zH=class extends qi{constructor(t,i,e){super(t,"Could not load channel with id "+i+": "+e),this.channelId=i,this.reason=e}},BH=class extends zH{constructor(t){super(vt.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel could not be found")}},UH=class extends zH{constructor(t){super(vt.THEO_LIVE_CHANNEL_NOT_FOUND,t,"This account has been locked")}},QH=class extends zH{constructor(t){super(vt.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel got deleted")}};function FH(t){var i;return{src:t.hespSrc,type:"theo.live",hlsSrc:t.hlsSrc,targetLatency:null==(i=t.metadata.customization)?void 0:i.targetLatency,contentProtection:t.drmConfig?YH(t.drmConfig):void 0}}function YH(t){const{integration:i,widevine:e,playready:s,fairplay:n}=t;return Ei({integration:i},e&&{widevine:{licenseAcquisitionURL:e.licenseUrl}},s&&{playready:{licenseAcquisitionURL:s.licenseUrl}},n&&{fairplay:{licenseAcquisitionURL:n.licenseUrl,certificateURL:n.certificateUrl}})}function VH(t,i){return{id:t,discovery:Fe.Ah(t,i)}}r(),r();var $r=function(t){return t.STARTING="s",t.PLAYING="p",t.SEEKING="k",t.REBUFFERING="r",t.PAUSED="a",t.ENDED="e",t.QUIT="q",t}({}),is=function(t){return t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.OTHER="o",t}({});function Ta(t){return 100*x.round(t/100)}function GH(t){const i=t.xE(),e=t.SE();for(let t=0;t<e.length;t++)if(e.start(t)<=i&&i<=e.end(t))return 1e3*(e.end(t)-i);return 0}function WH(t){return dl(t.AL,(t=>t.Rt))}function ZH(t){return t.UL.bL(0)}function HH(t){return t.UL.bL(t.UL.V-1)}r(),r();var XH=class t{static starting(i,e,s){return new t($r.STARTING,i,e,s)}static playing(i){return new t($r.PLAYING,i)}static seeking(i,e){return new t($r.SEEKING,i,e)}static rebuffering(i,e){return new t($r.REBUFFERING,i,e)}static paused(i){return new t($r.PAUSED,i)}static ended(i){return new t($r.ENDED,i)}static quit(i){return new t($r.QUIT,i)}get ct(){return Date.now()-this.Wjt}Zjt(){const t=this.ta.wZ.NK.FY,i=this.ta.Ek.Az,e=GH(this.ta);t>0&&void 0!==e&&void 0!==i&&(this.Hjt+=1,this.Xjt=this.qjt(this.Xjt,e),this.Kjt=this.qjt(this.Kjt,1e3*this.ta.Ek.md.targetOffset),this.mV=this.qjt(this.mV,1e3*i),this.Jjt=this.qjt(this.Jjt,t/1e3))}qjt(t,i){return t+(i-t)/this.Hjt}bx(){const t={sta:this.Zp,ts:this.Wjt,"theo-vt":this.$jt,"theo-at":this.tOt,"theo-d":this.ct,"theo-r":this.__};return this.Hjt>0?Ei({},t,{bl:Ta(this.Xjt),tbl:Ta(this.Kjt),ltc:Ta(this.mV),mtp:Ta(this.Jjt),"theo-w":this.Hjt}):t}iOt(){return new t(this.Zp,this.ta,this.__)}constructor(t,i,e,s){var n,r,o,h;this.Wjt=Date.now(),this.Xjt=0,this.Kjt=0,this.mV=0,this.Jjt=0,this.Hjt=0,this.Zp=t,this.ta=i,this.$jt=null==(r=WH(this.ta.rt))||null==(n=r.PL)?void 0:n.o,this.tOt=null==(h=WH(this.ta.ht))||null==(o=h.PL)?void 0:o.o,this.__=e,this.dV=s}};Qi();var qH=class{eOt(){var t;const i=this.ta.Ek.Az,e=GH(this.ta),s=this.ta.wZ.NK.FY;return KH({bl:e?Ta(e):void 0,tbl:Ta(1e3*this.ta.Ek.md.targetOffset),ltc:i?Ta(i):void 0,mtp:s?Ta(s/1e3):void 0,sta:null==(t=this.sOt)?void 0:t.Zp,su:!this.ljt||void 0,"theo-sq":this.nOt.sequenceNumber})}rOt(t){var i,e;const s=function(t,i){switch(i){case is.VIDEO:return WH(t.rt);case is.AUDIO:return WH(t.ht)}}(this.ta,t);return KH({br:(null==s||null==(i=s.PL)?void 0:i.FY)?Ta((null==s||null==(e=s.PL)?void 0:e.FY)/1e3):void 0,ot:t,tb:s?Ta(HH(s).FY/1e3):void 0,lb:s?Ta(ZH(s).FY/1e3):void 0})}oOt(){return KH({"theo-cw":this.ta.we.clientWidth,"theo-ch":this.ta.we.clientHeight})}hOt(){var t;return KH({sf:"e",sid:this.nOt.id,st:"l",v:2,"theo-eid":null==(t=this.nOt.externalId)?void 0:t.substring(0,128),"theo-cn":this.aOt.name.substring(0,128),"theo-v":"8.14.0","theo-t":"web","theo-u":this.nOt.userId})}uOt(){const t={"CMCD-States":btoa(JSON.stringify(this.cOt))};return this.cOt=[],t}lOt(t){this.sOt&&this.cOt.push(this.sOt.bx()),this.sOt=t}destroy(){this.dOt(),s.removeEventListener("beforeunload",this.dOt),this.ta.fn(E.oP,this.vz),this.ta.fn(E.rP,this._z),this.ta.fn(Zi.wb,this.fOt),this.ta.UE.fn("latencyrecoveryseek",this.gOt),this.ta.UE.fn("golive",this._Ot),this.ta.rt.fn(zh.Hk,this.rV),this.ta.ht.fn(zh.Hk,this.rV),this.ta.rt.AL.forEach((t=>t.fn(hs.vL,this.Jr))),this.ta.ht.AL.forEach((t=>t.fn(hs.vL,this.Jr))),this.ta.Gnt.removeEventListener("intenttofallback",this.vOt),this.ta.Gnt.removeEventListener("publicationloadstart",this.wOt),this.ta.Gnt.removeEventListener("publicationoffline",this.mOt),this.ta.wZ.AK(this.pOt),Fe.fA(this.AOt)}constructor(t,i,e){this.cOt=[],this.ljt=!1,this.gZ=!1,this.vOt=()=>{var t;this.lOt(XH.starting(this.ta,"fallback",null==(t=this.ta.BE())?void 0:t.message))},this.wOt=()=>{this.lOt(XH.starting(this.ta,"loadChannel"))},this.mOt=()=>{this.lOt(XH.ended(this.ta))},this.rV=t=>{t.Ht.yn(hs.vL,this.Jr)},this.Jr=()=>{var t,i,e,s;const n=null==(i=WH(this.ta.rt))||null==(t=i.PL)?void 0:t.o,r=null==(s=WH(this.ta.ht))||null==(e=s.PL)?void 0:e.o;n&&r&&(this.sOt&&this.sOt.Zp===$r.PLAYING&&this.sOt.$jt===n&&this.sOt.tOt===r||this.lOt(XH.playing(this.ta)))},this.vz=()=>{this.ljt=!0,this.gZ=!1,this.lOt(XH.playing(this.ta))},this.gOt=()=>{this.ljt&&!this.gZ&&(this.gZ=!0,this.lOt(XH.seeking(this.ta,"latencyRecovery")))},this._Ot=()=>{this.ljt&&!this.gZ&&(this.gZ=!0,this.lOt(XH.seeking(this.ta,"goLive")))},this._z=()=>{this.ta.wk||this.lOt(XH.rebuffering(this.ta,"visible"===h.visibilityState?void 0:"invisible"))},this.fOt=()=>{this.lOt(XH.paused(this.ta))},this.pOt=t=>{const i=Fe.Ah(t.url),e=function(t){const{pathname:i}=t;if(tt(i,"manifest.json"))return is.MANIFEST;if(_t(i,"/video/"))return is.VIDEO;if(_t(i,"/audio/"))return is.AUDIO;return is.OTHER}(i);if("o"===e)return;this.nOt.incrementSequenceNumber();let s=Ei({},t.headers,{"CMCD-Request":this.eOt(),"CMCD-Object":this.rOt(e),"CMCD-Status":this.oOt(),"CMCD-Session":this.hOt()});e===is.VIDEO&&tt(i.pathname,".hspc")&&this.sOt&&(this.lOt(this.sOt.iOt()),s=Ei({},s,this.uOt())),t.redirect(Ei({},t,{headers:s}))},this.dOt=()=>{this.sOt&&(this.cOt.push(this.sOt.bx()),this.sOt=void 0),this.cOt.push(XH.quit(this.ta).bx()),X(this.ta.wE.hI({zu:this.yOt,aI:this.uOt(),FI:!0}))},this.ta=t,this.aOt=i,this.nOt=e,this.yOt=Fe.Ah("bye",i.source.src).href,s.addEventListener("beforeunload",this.dOt),this.ta.yn(E.oP,this.vz),this.ta.yn(E.rP,this._z),this.ta.yn(Zi.wb,this.fOt),this.ta.UE.yn("latencyrecoveryseek",this.gOt),this.ta.UE.yn("golive",this._Ot),this.ta.wZ.wK(this.pOt),this.ta.rt.yn(zh.Hk,this.rV),this.ta.ht.yn(zh.Hk,this.rV),this.ta.Gnt.addEventListener("intenttofallback",this.vOt),this.ta.Gnt.addEventListener("publicationloadstart",this.wOt),this.ta.Gnt.addEventListener("publicationoffline",this.mOt),this.sOt=XH.starting(this.ta,"loadchannel"),this.AOt=Fe.dA((()=>{var t;null==(t=this.sOt)||t.Zjt()}),1e3)}};function KH(t){return _.keys(t).map((i=>function(t,i){switch(typeof i){case"boolean":return i?t:t+"=false";case"number":return t+"="+i;case"string":return t+'="'+i+'"';default:return}}(i,t[i]))).filter(Boolean).sort().join(",")}r();var JH=class extends Jr{constructor(t){super("publicationloadstart"),this.publicationId=t}},$H=class extends Jr{constructor(t){super("publicationoffline"),this.publicationId=t}},tX=class extends Jr{constructor(t,i){super("publicationloaded"),this.publicationId=t,this.channelName=i}},iX=class extends Jr{constructor(){super("intenttofallback")}},eX=class extends Jr{constructor(){super("enterbadnetworkmode")}},sX=class extends Jr{constructor(){super("exitbadnetworkmode")}},nX=class extends tu{get ga(){return this.Za||(this.Za=function(t){return{addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)},get badNetworkMode(){return t.bOt},set badNetworkMode(i){t.bOt=i},preloadPublications:async i=>(await t.MOt(i)).map((t=>({name:t.name})))}}(this)),this.Za}get bOt(){return this.ta.bOt}set bOt(t){this.ta.bOt=t}MOt(t){return this.ta.MOt(t)}constructor(t){super(),this.ta=t}};ld(),Qi();var rX=["https://theo-insights-prod-5cb0.ew.r.appspot.com/"],oX=8e5,hX=class extends Xt{TOt(){this.ta.UE.yn("latencyrecoveryseek",this.gOt),this.ta.rt.yn(zh.Hk,this.rV)}SOt(){this.ta.UE.fn("latencyrecoveryseek",this.gOt),this.ta.rt.fn(zh.Hk,this.rV)}Gk(t){return this.WCt?t.type===E.oP?(void 0!==this.NOt?(Fe.Rg(this.NOt),this.NOt=void 0,this.ljt||this.yo(new te(this.xE()))):this.yo(new te(this.xE())),this.ljt=!0,!0):t.type===E.rP?(this.NOt||(this.NOt=Fe.Pg((()=>{this.yo(new sD(this.xE())),this.NOt=void 0}),100)),!0):"error"===t.type?(X(this.IOt()),!0):super.Gk(t):super.Gk(t)}Wnt(){return this.DOt.ga}get bOt(){return this.EOt}set bOt(t){this.WCt&&(t?this.kOt():this.LOt())}kOt(){if(this.EOt)return;if(this.EOt=!0,this.DOt.yo(new eX),0===this.ta.rt.V)return;const t=this.rt.bL(0),i=nw(t.UL.AL,(t=>t.FY));var e;(null!=(e=i.Gyt)?e:i.FY)<oX?(t.QL=[i],Promise.resolve().then((()=>t.QL=t.UL.AL.slice()))):this.LOt()}LOt(){if(!this.EOt)return;if(this.EOt=!1,this.DOt.yo(new sX),0===this.ta.rt.V)return;const t=this.ta.rt.bL(0);var i;const e=aX(null!=(i=t.QL)?i:t.UL.AL);t.QL=e.length>0?e:aX(t.UL.AL)}MOt(t){return Promise.all(t.map((async t=>{const i=this.xOt.Omt(VH(t,this.COt.discoveryUrl));return await Ao(i.aet,this.rN.ly)})))}addSseEndpointToSource(t){var i;if(t&&(null==(i=this.wc)?void 0:i.ads))for(const i of this.wc.ads){var e;if("theoads"===i.integration)null!=(e=i).sseEndpoint||(e.sseEndpoint=t)}}async ka(t,i){var e;this.WCt=!1;for(const s of null!=(e=null==t?void 0:t.sources)?e:[]){if(Jc(s)&&s.type===$n.ux){if(void 0===s.src)continue;this.TOt(),this.WCt=!0,this.DOt.yo(new JH(s.src));const e=VH(s.src,this.COt.discoveryUrl),n=this.DOt.zy("publicationloaded");try{this.wc=t,this.AG=s,this.jOt=this.xOt.Omt(e);const n=await this.jOt.aet;this.addSseEndpointToSource(n.sseEndpoint);const{enhancedLogging:r}=n;(null==r?void 0:r.enabled)&&x.random()<=r.percentage&&this.ta.wZ.wK(this.OOt),this.COt.analyticsEnabled&&"theo.live"===n.source.type&&(this.ROt=new qH(this,n,this.nOt)),await Ao(this.POt(this.ta.Xz),i)}catch(t){throw this.E8(),this.dispatchErrorEvent(t),t}return void await Ao(n,i).catch(V)}if("web"===rn.Ed&&(null==t?void 0:t.contentProtection)&&(!Jc(s)||s.type!==$n.ox)){const t=new qi(vt.CONFIGURATION_ERROR,"Content protection is not supported for this source type");throw this.dispatchErrorEvent(t),t}}return await super.ka(t,i)}async POt(t){if(this.E8(),!this.jOt)return;const{source:i}=await this.jOt.aet,e=await this.zOt(i);if("live"===e)if("primary"===this.BOt)try{await this.UOt(t)}catch(i){await this.QOt(t)}else await this.QOt(t);else if("offline"===e)await this.mOt();else try{await this.UOt(t)}catch(t){await this.mOt()}}async zOt(t){try{const i=await this.ta.wE.hI({zu:t.src});return i.nI>=200&&i.nI<300?"live":404===i.nI||503===i.nI?"offline":"error"}catch(t){return"error"}}async QOt(t){if(!this.jOt)return;const i=await this.jOt.aet;this.BOt="primary",this.z$(i.source,t)}async mOt(){if(!this.jOt)return;const t=await this.jOt.aet;this.DOt.yo(new $H(t.id.id)),this.FOt=Fe.Pg((()=>this.POt(this.ta.Xz)),15e3)}z$(t,i){var e,s,n;const r=this.jOt.aS.id;var o;const h=tl({sources:[{type:uX(t.type),src:t.src,contentProtection:t.contentProtection,useManagedMediaSource:!0,latencyConfiguration:null!=(o=null==(e=this.AG)?void 0:e.latencyConfiguration)?o:cX(t.targetLatency)},t.hlsSrc?{type:"application/x-mpegurl",src:t.hlsSrc}:void 0].filter($t),ads:this.ljt?[]:null==(s=this.wc)?void 0:s.ads,blockContentIfAdError:null==(n=this.wc)?void 0:n.blockContentIfAdError,streamType:"live"});h.sources[0].bypassLicense=!0,this.ta.ka(h,(new Wt).ly).then((()=>{i&&this.ta.Pk()})).catch(this.dispatchErrorEvent),this.jOt.aet.then((t=>{this.DOt.yo(new tX(r,t.name))}))}async UOt(t){if(this.DOt.yo(new iX),!await this.YOt())throw new b("fallback not live");await this.VOt(t)}async VOt(t){var i;const e=await(null==(i=this.jOt)?void 0:i.aet);(null==e?void 0:e.fallback)&&(this.BOt="fallback",this.z$(e.fallback,t))}async YOt(){var t,i;const e=await(null==(t=this.jOt)?void 0:t.aet);if(!(null==(i=this.COt)?void 0:i.fallbackEnabled)||!(null==e?void 0:e.fallback))return!1;const s=await this.ta.wE.hI({zu:e.fallback.src});return s.nI>=200&&s.nI<300}dispatchErrorEvent(t){if(t instanceof qi)return this.yo(new cl(t));this.yo(new cl(new qi(vt.THEO_LIVE_UNKNOWN_ERROR,t.message,t)))}async E8(){await this.ta.zk(),void 0!==this.FOt&&(Fe.Rg(this.FOt),this.FOt=void 0)}zk(){var t;return this.rN.Ty(),this.rN=new Wt,this.SOt(),void 0!==this.NOt&&(Fe.Rg(this.NOt),this.NOt=void 0),this.WCt=!1,this.ljt=!1,null==(t=this.ROt)||t.destroy(),this.ROt=void 0,this.wc=void 0,this.AG=void 0,this.jOt=void 0,this.BOt=void 0,this.GOt=[],this.ta.wZ.AK(this.OOt),this.EOt&&this.LOt(),super.zk()}async gn(t){var i;this.rN.Ty(),void 0!==this.NOt&&(Fe.Rg(this.NOt),this.NOt=void 0),this.Bo(),this.SOt(),null==(i=this.ROt)||i.destroy(),this.ta.UE.fn("latencyrecoveryseek",this.gOt),await super.gn(t)}constructor(t,i){var e,s;super(t,i),this.WCt=!1,this.rN=new Wt,this.NOt=void 0,this.ljt=!1,this.GOt=[],this.EOt=!1,this.rV=t=>{const i=t.Ht;var e;i.yn(hs.vL,this.Jr);const s=aX(null!=(e=i.QL)?e:i.UL.AL);i.QL=s.length>0?s:aX(i.UL.AL)},this.Jr=t=>{const i=t.Lut;var e;(!i||(null!=(e=i.Gyt)?e:i.FY)>=oX)&&this.LOt()},this.gOt=async()=>{this.kOt(),this.GOt.push(Fe.Og()),this.GOt=this.GOt.filter((t=>Fe.Og()-t<=3e5)),this.GOt.length>=3&&(this.GOt=[],await this.POt(!0))},this.IOt=async()=>{if(this.jOt){if("demo"===(await this.jOt.aet).mode){this.jOt.Yn();if("playing"!==(await this.jOt.aet).status)return void this.yo(new cl(new qi(vt.THEO_LIVE_END_OF_DEMO,"This demo channel has been stopped automatically after 5 minutes")))}await this.POt(!0)}},this.OOt=t=>{if("manifest"===t.type||"segment"===t.type||""===t.type){const i=Fe.Ah(t.url);i.searchParams.append("enhancedLogging","true"),t.redirect({url:i.toString()})}},this.DOt=new nX(this);const n=t.md.theoLive;var r,o,h,a;this.COt={sessionId:null!=(r=null==n?void 0:n.sessionId)?r:xL(),userId:null!=(o=null==n?void 0:n.userId)?o:OH(),externalSessionId:null==n?void 0:n.externalSessionId,analyticsEnabled:!1!==(null==n?void 0:n.analyticsEnabled),fallbackEnabled:!1!==(null==n?void 0:n.fallbackEnabled),discoveryUrl:null!=(h=null==n?void 0:n.discoveryUrl)?h:"https://discovery.theo.live/channels/",analyticsUrls:null!=(a=null==n?void 0:n.analyticsUrls)?a:rX},this.nOt=new jH(null==(e=this.COt)?void 0:e.externalSessionId),this.xOt=new RH(t.wE,{discoveryHeader:null==(s=this.COt)?void 0:s.discoveryHeader}),this.ta.UE.yn("latencyrecoveryseek",this.gOt)}};function aX(t){return t.filter((t=>{var i;return(null!=(i=t.Gyt)?i:t.FY)>=oX}))}function uX(t){switch(t){case"theo.live":return"application/vnd.theo.hesp+json";case"hls":return"application/x-mpegurl";case"dash":return"application/dash+xml";default:throw new b("Unknown source type: "+t)}}function cX(t){return void 0===t?TZ():{minimumOffset:t-QT,targetOffset:t,maximumOffset:t+QT,forceSeekOffset:t+2.5,minimumPlaybackRate:We,maximumPlaybackRate:ee}}jr((t=>new hX(t)),Hn.nu),r(),r(),r();var lX=ud(md());Qi(),r(),r(),r();var dX=class extends tu{get Om(){return this.WOt}Yn(t,i){this.gT=t,this.WOt=i,this.Za&&this.yo(new $Y(this.Za))}get ga(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}get o(){return this.gT.id}get zL(){return this.iB}get FY(){return this.gT.bitrate}get Gyt(){}get cht(){return""}get kh(){return""}get Xyt(){return""}get lot(){return!0}get Wyt(){}EQ(){throw new b("Method not implemented.")}kQ(){throw new b("Method not implemented.")}gn(){this.Bo()}constructor(t,i){super(),this.iB=zS(),this.Za=void 0,this.gT=t,this.WOt=i}},fX=class extends dX{ma(){return KY(this)}get vgt(){return 0}get ji(){return this.gT.targetWidth}get Ti(){return this.gT.targetHeight}get Zyt(){return 0}constructor(t,i){super(t,i)}};r();var gX=class extends tu{get Rt(){return!0}set Rt(t){}get ga(){var t;return null!=(t=this.Za)?t:this.Za=go(this)}nB(t){this.Rt=t}get Zft(){}get Lt(){return this._6}get o(){return this.aS||"millitrack"}get zL(){return this.iB}get kh(){return""}get gs(){return""}get UI(){return this.Rt?"enabled":"disabled"}set UI(t){this.nB("enabled"===t)}get PL(){}get UL(){return this.qz}get QL(){return this.ZOt}set QL(t){if(this.ZOt=t,this.Rt){const i=1===(null==t?void 0:t.length)?t[0].Om:void 0;this.HOt(i)}this.yo(new th(this.qz.AL.slice(),this)),((null==t?void 0:t.length)||this.qz.V)&&this.yo(new HF((null==t?void 0:t[0])||this.qz.bL(0)))}get BL(){}gn(){this.Bo();for(const t of this.qz.AL)t.gn();this.qz.tr()}constructor(t,i){super(),this.iB=ft(),this.qz=new ki,this.aS=t,this._6=i}},_X=class extends gX{Yn(t){for(const i of t.active){const e=dl(t.layers,(t=>t.encodingId===i.id)),s=dl(this.qz.AL,(t=>t.o===i.id));s?s.Yn(i,e):this.qz.Kz(new fX(i,e))}this.yo(new su(this))}get YA(){return Ri.NI}HOt(t){var i;null==(i=this.XOt)||i.qOt(t)}gn(){this.XOt=void 0,super.gn()}constructor(t,i,e){super(t,i),this.XOt=e}};bs(),r();var vX=class{Yn(t){this.KOt=t}get FY(){var t,i,e,s,n;var r;return(null!=(n=null==(i=this.KOt)||null==(t=i.video.inbounds)?void 0:t.reduce(((t,i)=>t+i.bitrateBitsPerSecond),0))?n:0)+(null!=(r=null==(s=this.KOt)||null==(e=s.audio.inbounds)?void 0:e.reduce(((t,i)=>t+i.bitrateBitsPerSecond),0))?r:0)}get YY(){var t,i;return null!=(i=null==(t=this.KOt)?void 0:t.currentRoundTripTime)?i:0}VY(t){}};r(),r();var wX=class extends dX{ma(){return JY(this)}get GAt(){return this.JOt}constructor(t,i){super(t,i),this.JOt=0}},mX=class extends gX{Yn(t){for(const i of t.active){const e=dl(t.layers,(t=>t.encodingId===i.id)),s=dl(this.qz.AL,(t=>t.o===i.id));s?s.Yn(i,e):this.qz.Kz(new wX(i,e))}this.yo(new su(this))}get YA(){return Ri.SI}HOt(t){var i;null==(i=this.XOt)||i.$Ot(t)}gn(){this.XOt=void 0,super.gn()}constructor(t,i,e){super(t,i),this.XOt=e}};r();var pX=class extends hN{ma(){return function(t){return fe(Ft(t),{get mid(){return t._Q.mid},get uuid(){return t._Q.uuid},get timecode(){return t._Q.timecode},get unregistered(){return t._Q.unregistered}})}(this)}constructor(t,i){super(t,t,void 0,!1),this._Q=i}};r();var AX=[Zi.so,Zi.wb,E.oP,Zi.Eb,Zi.mb,Zi.ub,Zi.Mb,Zi.bb,Zi.qy,Zi.pb,Zi.kb,Zi.Zy,Zi.yb,Zi.Vy,Zi.Yy,Zi.$y,Zi.Ky],yX=["active","inactive","stopped","vad","layers","migrate","viewercount"],bX=class extends tu{qOt(t){var i;null==(i=this.R_)||i.select(t).catch(this.fAt)}$Ot(t){var i;null==(i=this.R_)||i.select(t).catch(this.fAt)}get xk(){return!1}jk(){return this.cz.jk()}get ht(){return this.Oz}get TE(){return this.cz.TE.ks()}get NE(){return this.cz.NE}set NE(t){}get bt(){return this.wc}get LE(){return this.cz.LE}set LE(t){this.CE(t)}CE(t,i){}get ct(){return this.cz.ct}get OE(){return this.cz.OE}get lt(){return this.dV}get zE(){return this.fV}get UE(){}get FE(){return this.cz.FE}get VE(){var t,i;const e=this.tRt,s=null==e||null==(t=e.video.inbounds)?void 0:t[0],n=null==e||null==(i=e.audio.inbounds)?void 0:i[0];var r,o,h,a;return{Fz:this.UG.NK.FY,Bz:null!=(r=null==s?void 0:s.framesDropped)?r:0,Uz:0,Qz:null!=(o=null==s?void 0:s.framesReceived)?o:0,Yz:(null!=(h=null==s?void 0:s.totalBytesReceived)?h:0)+(null!=(a=null==n?void 0:n.totalBytesReceived)?a:0),Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get WE(){return this.cz.WE}set WE(t){this.cz.WE=t}get XE(){var t,i;return null!=(i=null==(t=this.R_)?void 0:t.isActive())&&i}get KE(){return this.cz.KE}get $E(){return 1}set $E(t){}get rk(){return this.cz.rk.ks()}get ck(){return Dn.pG}set ck(t){}get fk(){return this.cz.fk}get _k(){return this.cz._k.ks()}get wk(){return this.cz.wk}get wV(){return this.cz.wV}get nt(){return this.cz.nt}get yk(){return this.cz.yk}get rt(){return this.Pz}get Tk(){return this.cz.Tk}get Nk(){return this.cz.Nk}set Nk(t){this.cz.Nk=t}get Ek(){return this.QG}get pV(){return this.AV}get Az(){return this.QG.Az}ge(){this.cz.ge()}be(){this.cz.be()}async Pk(){this.$n(),await this.cz.Pk()}Rk(){this.cz.Rk()}async tr(){var t;this.wc=void 0,this.rN.Ty(),null==(t=this.R_)||t.stop(),this.R_=void 0,this.Ept&&(await this.Ept.catch(Bn),this.Ept=void 0),this.iRt=void 0,await this.cz.tr(),this.eRt=void 0,this.sRt=0,this.cz.jV();for(const t of this.Pz.AL)t.gn();this.Oz.tr(),this.Pz.tr()}async gn(){this.Bo(),await this.tr(),this.Oz.gn(),this.Pz.gn(),this.OV.gn(),this.cz.fn(AX,this.Ds),this.cz.fn(Xi.ua,this.Ss),await this.BG.BV(this.cz)}async ka(t,i,e){yi(e),this.nDt();const s=t;this.wc=s,this.rN=new Wt,s.apiUrl&&lX.Director.setEndpoint(s.apiUrl);this.R_=new lX.View(void 0,(()=>lX.Director.getSubscriber({streamName:s.src,streamAccountId:s.streamAccountId,subscriberToken:s.subscriberToken})),void 0,!0),this.nRt=Ei({},s.connectOptions,{events:yX}),this.rRt()}$n(){if(void 0!==this.Ept)return;const t=this.R_;void 0!==t&&(this.Ept=this.oD(t,this.nRt,this.rN.ly).catch(this.fAt))}async oD(t,i,e){yi(e);try{await Ao(t.connect(i),e),t.webRTCPeer.initStats({autoInitStats:!0,statsIntervalMs:1e3})}catch(i){V(i),function(t){return Z(t)&&"FetchError"===t.name}(i)&&400===i.status&&(Fe.uA("[THEOplayer] Millicast connect error, reconnecting.",i),await Ao(t.reconnect(),e)),this.eG(new qi(vt.NETWORK_ERROR,i.message,i))}}async oRt(t,i){yi(i);try{this.cz.ktt(),this.iRt=t,await this.cz.tr(),await this.cz.$n({YA:uh.QQ,WL:"",G$:t,VN:$n.hx,yV:[]})}finally{this.cz.Ltt()}}rRt(){var t;const i=this.R_;i.on("track",(t=>this.hRt(t))),i.on("broadcastEvent",(t=>this.aRt(t))),i.webRTCPeer.on("stats",(t=>{this.tRt=t,this.AV.Yn(t)})),(null==(t=this.nRt)?void 0:t.metadata)&&i.on("metadata",(t=>this.uRt(t)))}hRt(t){const i=this.Oz.V>0,e=this.Pz.V>0,s=i&&!e;if(e&&t.track.kind===Ri.NI||s&&t.track.kind===Ri.SI){const i=t.streams[0];if(s){const t=i.getVideoTracks().slice();for(const e of t)i.removeTrack(e)}this.oRt(i,this.rN.ly).catch(this.fAt)}}aRt(t){switch(t.name){case"active":{this.yo(new BG);const i=t.data;for(const t of i.tracks)t.media===Ri.NI?this.Pz.tt(new _X(t.trackId,this.Pz.V?Dr.Yxt:Dr.Vxt,this)):t.media===Ri.SI&&this.Oz.tt(new mX(t.trackId,this.Oz.V?oH.Yxt:oH.Vxt,this));break}case"inactive":this.yo(new ml),this.Pz.tr(),this.Oz.tr();break;case"stopped":this.yo(new ml);break;case"viewercount":default:break;case"layers":{const i=t.data;if(0===this.Pz.V){const t=new _X("",Dr.Vxt,this);t.Yn(i.medias[0]),this.Pz.tt(t)}else{const t=dl(this.Pz.AL,(t=>t.Lt===Dr.Vxt));null==t||t.Yn(i.medias[0])}break}}}uRt(t){let i=this.eRt;void 0===i&&(i=this.cz.Wk(z.MQ,void 0,void 0,void 0,void 0,El.MILLICAST),i.UI=ua.FL,this.eRt=i);const e=this.LE,s=x.max(0,e-10);this.sRt<s&&(HI(i,s),this.sRt=s);const n=new pX(e+.001,t);i.RQ(n)}eG(t){this.dV||(X(this.tr()),this.dV=Au(t),this.fV=t,this.yo(new cl(t)))}nDt(){this.dV=void 0,this.fV=void 0}Bk(){return!1}Uk(){}Qk(){}Fk(){this.cz.Fk()}Yk(){const t=this.iRt;void 0!==t&&this.oRt(t,this.rN.ly).catch(this.fAt)}Ck(){return this.cz.wa}_a(){return this.cz.xV}Wk(t){return this.cz.CV(t)}constructor(t,i,e){super(),this.BG=t,this.UG=i,this.QG=e,this.rN=new Wt,this.Ept=void 0,this.iRt=void 0,this.Pz=new kt,this.Oz=new kt,this.sRt=0,this.AV=new vX,this.Ss=t=>{this.eG(ju(t.lt))},this.fAt=t=>{Tu(t)||this.eG(new qi(vt.MEDIA_DECODE_ERROR,t.message,t))},this.cz=this.BG.sG(Ri.NI),this.OV=new ko(this.cz,!0),this.cz.yn(AX,this.Ds),this.cz.yn(Xi.ua,this.Ss),this.OV.yn(zT,this.Ds)}};Gi(new class{get hG(){return pt.hx}bx(t,i,e,s,n,r,o,h){return new bX(i,n,r)}nG(t,i){return t.type===$n.hx}async rG(t){let i=await mu(t);return i&&(i=Boolean(t.widevine||t.fairplay)),i&&!1}oG(){return!1}}),r(),r(),r(),r();var js=function(t){return t.cRt="currentbufferingrenditionchange",t.lRt="dRt",t.fRt="gRt",t._Rt="vRt",t}({});r(),r();var MX=class{constructor(t,i){var e,s;this.cht=void 0,this.zL=zS(),this.wRt=i,this.YA=t.YA,this.mRt=t.mRt,this.pRt=t.pRt,this.ARt=t.ARt,this.l=t.l,this.gs=t.gs,this.yRt=t.yRt,this.bRt=t.bRt,this.MRt=void 0===t.Xyt,this.TRt=null!=(s=null==(e=t.TRt)?void 0:e.split(","))?s:[]}};function TX(t,i){return t.YA===i.YA&&(t.l===i.l||!(!t.mRt||!i.mRt))}function SX(t,i){return void 0!==t&&void 0!==i&&NX(t,i)}function NX(t,i){return t.wRt===i.wRt}function IX(t,i){return NX(t,i)&&t.yRt===i.yRt}function DX(t,i){for(const e of t)if(IX(e,i))return!0;return!1}Qi();var EX=class extends tu{get BL(){return this.SRt}get Rt(){const t=this.NRt();if(!t)return!1;for(const i of this.UL.AL)if(i.IRt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var i;let t=null==(i=this.UL.bL(0))?void 0:i.IRt;const e=this.ta.DRt;for(const i of this.UL.AL)if(i.ERt===e){t=i.IRt;break}this.kRt(t)}else this.kRt(void 0)}get PL(){if(!this.Rt)return;const t=this.ta.LRt;for(const i of this.UL.AL)if(DX(t,i.IRt))return i}get ga(){return this.Za||(this.Za=go(this)),this.Za}get o(){return this.iB.toString()}get zL(){return this.iB}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,this.yo(new su(this)))}get gs(){return this.$M}get UI(){return this.Rt?"enabled":"disabled"}get QL(){return this.udt}set QL(t){let i=[];if(t){i=t.filter((t=>{const i=this.PL?NQ(this.PL):void 0;return Fe.Ys.Pp(i,NQ(t))})).filter((i=>this.UL.Jz(t)&&i.lot))}else i=this.UL.AL.filter((t=>t.lot));if(0!==i.length){if(!(t===this.udt||this.udt&&iw(this.udt,i))){if(this.udt=t?i:void 0,this.ta.xRt(i.map((t=>t.ERt))),1===i.length){const t=i[0].ERt,e=this.Zp===Ri.NI,s=this.UG.$K;X(this.ta.CRt(t,{jRt:!0,ORt:s&&e,RRt:s&&!e}))}this.yo(new th(i,this))}}else this.yo(new SQ)}nB(t){this.Rt=t}gn(){this.Bo(),this.ta.fn(js.cRt,this.PRt),this.ta.fn(js.lRt,this.zRt);for(const t of this.UL.AL)t.gn();this.UL.tr()}constructor(t,i,e,s,n){var r;super(),this.Zp=t,this.ta=i,this.UG=e,this.fh=s,this.UL=n,this.udt=void 0,this.BRt=void 0,this.URt=()=>this.yo(new su(this)),this.PRt=()=>{const t=this.PL;t&&this.BRt!==t&&(this.BRt=t,this.yo(new HF(t)))},this.zRt=()=>{const t=this.Rt;this.QRt!==t&&(this.QRt=t,this.fh.yo(new dM(this)),this.yo(new dM(this)))},this.BRt=this.PL,this.QRt=this.Rt;const o=n.bL(0);var h,a;this.eB=null!=(h=null==o?void 0:o.IRt.l)?h:"",this.$M=null!=(a=null==o?void 0:o.IRt.gs)?a:"",this.SRt=null==o||null==(r=o.IRt)?void 0:r.TRt.map(OX).filter($t),this.iB=ft(),this.ta.yn(js.cRt,this.PRt),this.ta.yn(js.lRt,this.zRt);for(let t=0;t<this.UL.V;t++){this.UL.bL(t).yn("update",this.URt)}}},kX=class extends EX{get Lt(){return oH.Vxt}NRt(){return this.ta.FRt}kRt(t){X(this.ta.YRt(t))}constructor(t,i,e,s){super(Ri.SI,t,i,e,s)}},LX=class extends EX{get Lt(){return Dr.Vxt}NRt(){return this.ta.VRt}kRt(t){X(this.ta.GRt(t))}constructor(t,i,e,s){super(Ri.NI,t,i,e,s)}},xX=class extends tu{get o(){return String(this.ERt.o)}get zL(){return this.ERt.o}get FY(){return this.ERt.FY}get Gyt(){return this.ERt.Gyt}get kh(){var t;return null!=(t=this.eB)?t:this.IRt.l}set kh(t){this.kh!==t&&(this.eB=t,this.yo(new $Y(this.ga)))}get Xyt(){return this.IRt.wRt.WRt()}get Wyt(){return this.ERt.Wyt}kQ(){}EQ(){}gn(){this.Bo()}constructor(t,i){super(),this.ERt=t,this.IRt=i,this.eB="",this.lot=!0}},CX=class extends xX{get GAt(){return 0}get cht(){var t;return(null==(t=this.ERt.cht)?void 0:t.Axt)||""}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return JY(this)}constructor(t,i){super(t,i),this.Za=void 0}},jX=class extends xX{get cht(){var t;return(null==(t=this.ERt.cht)?void 0:t.bxt)||""}get Zyt(){return this.ZRt}set Zyt(t){this.ZRt!==t&&(this.ZRt=t,this.yo(new $Y(this.ga)))}get vgt(){var t,i;return null!=(i=null!=(t=this.uxt)?t:this.ERt.vgt)?i:0}set vgt(t){this.vgt!==t&&(this.uxt=t,this.yo(new $Y(this.ga)))}get Ti(){var t,i;return null!=(i=null==(t=this.ERt.cxt)?void 0:t.Ti)?i:0}get ji(){var t,i;return null!=(i=null==(t=this.ERt.cxt)?void 0:t.ji)?i:0}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return KY(this)}constructor(t,i){super(t,i),this.Za=void 0,this.ZRt=0,this.uxt=void 0}};function OX(t){return"public.accessibility.describes-video"===t?Js.RL:"public.accessibility.transcribes-spoken-dialog"===t?Js.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?Js.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?Js.OL:void 0}r(),r(),Qi();var ta=new class{HRt(t){if(!this.Rt())return!1;const i=[];return!(i.length>0)||i.some((i=>i.toLowerCase()===t.toLowerCase()))}XRt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.HRt(t)&&Fe.aA("DEBUG "+t+" -",...e)}Hj(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.HRt(t)&&Fe.aA("INFO "+t+" -",...e)}qRt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.HRt(t)&&Fe.uA("WARNING "+t+" -",...e)}lt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.HRt(t)&&Fe.cA("ERROR "+t+" -",...e)}KRt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.HRt(t)&&Fe.cA("FATAL "+t+" -",...e)}constructor(){this.Rt=()=>!1}},bl="HLSPlaylistParser",RX="Discontinuity",eu="Buffering",PX=class{Mgt(){var t;const i=null==(t=this.ta.Tr)?void 0:t.JRt;if(!i||0===i.length)return void ta.qRt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var e;const s=null!=(e=dl(i,(t=>0!==t.$Rt.length&&0!==t.tPt.length)))?e:i[0],n=i.filter((t=>t!==s));for(const t of s.$Rt){const i=new ki,e=[];i.Kz(new CX(s,t)),e.push(t);for(const s of n)for(const n of s.$Rt)if(TX(n,t)&&!DX(e,n)){i.Kz(new CX(s,n)),e.push(n);break}this.iPt.tt(new kX(this.ta,this.UG,this.iPt,i))}for(const t of s.tPt){const i=new ki,e=[];i.Kz(new jX(s,t)),e.push(t);for(const s of n)for(const n of s.tPt)if(TX(n,t)&&!DX(e,n)){i.Kz(new jX(s,n)),e.push(n);break}this.ePt.tt(new LX(this.ta,this.UG,this.ePt,i))}}sPt(){this.nPt(this.iPt),this.nPt(this.ePt)}nPt(t){const i=[];for(const e of t.AL){const t=[];for(const i of e.UL.AL)Qa(i.ERt.rPt,i.IRt)||t.push(i);for(const i of t)e.UL.wS(i),i.gn();0===e.UL.V&&i.push(e)}for(const e of i)t.it(e),e.gn()}oPt(t,i){const e=this.hPt(t);void 0!==e&&(e.vgt=i)}aPt(t,i){const e=this.hPt(t);void 0!==e&&(e.Zyt=i)}hPt(t){for(const i of this.ePt.AL){const e=dl(i.UL.AL,(i=>i.IRt===t));if(void 0!==e)return e}}constructor(t,i,e,s){this.ta=t,this.UG=i,this.iPt=e,this.ePt=s}};r();var zX=class{get FY(){return this.Uct.Mst}get YY(){return this.zkt.Mst}VY(t){if("segment"!==t.YA&&"preload-hint"!==t.YA)return;const i=[new hZ(this.zkt)];return"stream"!==t.oI||!function(t){return"segment"===t.YA&&"initialization-segment"!==t.OI}(t)&&"preload-hint"!==t.YA?i.push(new aZ(this.Uct)):i.push(new uZ(this.Uct,1e3)),new oZ(i)}xkt(t){this.Uct=new Li(Li.dkt,Li.fkt,1,t)}constructor(t){const i=t.FY>0?t.FY:Li.Pct,e=t.YY>0?t.YY:gn.Pct;this.Uct=new Li(Li.dkt,Li.fkt,1,i),this.zkt=new gn(gn.dkt,gn.fkt,e)}};r();var BX=class extends Jr{constructor(t){super(js._Rt),this.lt=t}};r();var UX=class{H$(t,i){const e={YA:uh.FQ,yV:[],E5:t.map((t=>({VN:t}))),U5:i};return Promise.resolve(void 0!==this.uot.H$([e]))}constructor(t){this.uot=t}};r(),r(),Qi();var QX=(t,i,e,s,n)=>t.filter((t=>!!Qa(s,t)||1.1*t.FY<=e.FY)),FX=(t,i,e,s,n)=>t.filter((t=>{if(Qa(s,t))return!0;let r=1/0;for(const i of t.rPt){var o,h;r=x.min(r,null!=(h=null!=(o=i.wRt.uPt)?o:i.wRt.cPt)?h:1/0)}r===1/0&&(r=1);const a=2*e.YY+t.FY*r/e.FY;return t.FY<=i.FY||n.lPt>a})),YX=(t,i,e,s,n)=>qs(t,((t,i)=>i.FY-t.FY)),VX=(t,i,e,s,n)=>t.every((t=>t.Wyt&&!j(t.Wyt)))?qs(t,((t,i)=>i.Wyt-t.Wyt)):t,GX=(t,i,e,s,n)=>0===s.length?t:qs(t,((t,i)=>{const e=Qa(s,t)?1:0;return(Qa(s,i)?1:0)-e})),WX=(t,i,e,s,n,r)=>t.filter((t=>!t.cht||!i.cht||!(void 0!==i.cht.bxt&&void 0!==t.cht.bxt&&!Wo(i.cht.bxt,t.cht.bxt)&&!r.dPt({VN:'video/mp4; codecs="'+t.cht.bxt+'"'}))&&!(void 0!==i.cht.Axt&&void 0!==t.cht.Axt&&!Wo(i.cht.Axt,t.cht.Axt)&&!r.fPt({VN:'audio/mp4; codecs="'+t.cht.Axt+'"'})))),ZX=(t,i,e,s,n)=>{if(!1===n.Fdt)return t;if(Fe.Ys.Ap)return t;const r=Fe.Ys.yp;var o;const h=(null!=(o=null==r?void 0:r.width)?o:n.ji)*uQ;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Ti)*uQ;for(let i=0;i<t.length;i++){const e=t[i];if(void 0===e.cxt)return t;const s=e.cxt.Ti,n=e.cxt.ji;if(s<=u&&n<=h)return t.slice(i,t.length)}return[]},HX=(t,i,e,s,n)=>function(t,i){const e=i.Fdt;if(void 0===e&&!Fe.Ys.Qs)return t;if(!1===e)return t;for(let e=0;e<t.length;e++){const s=t[e];if(void 0===s.cxt)return t;const n=s.cxt.Ti,r=s.cxt.ji;if(n===i.Ti&&r===i.ji)return t.slice(e,t.length);if(n<i.Ti||r<i.ji)return t.slice(0===e?e:e-1,t.length)}return[]}(t,n);var XX="AbrEvaluator",qX=class{get gPt(){return this.UG.NK}_Pt(t){this.xv=t}async vPt(t,i,e,s,n){return(await this.wPt(t,i,e,s,n))[0]}async wPt(t,i,e,s,n){if(0===t.length)throw new b("AbrEvaluator - Unable to select optimal variant stream from an empty list.");ta.XRt(XX,"Performing optimal variant stream selection.");const r=this.gPt;let o=t;for(const t of this.xv){const h=t(o,i,r,e,s,n);o=Zr(h)?h:await h}if(0===o.length){ta.qRt(XX,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[ew(t,(t=>t.FY))]}return o}constructor(t){this.UG=t,this.xv=[WX,QX,FX,YX,ZX,HX,VX,GX]}};function KX(t,i){return[t,void 0!==i?t+i-1:jt]}function JX(t){return Boolean(t.zj)}function $X(t){return Boolean(t.Wot)}r(),r(),r(),r(),r();var Oe=function(t){return t[t.SI=0]="SI",t[t.NI=1]="NI",t[t.AQ=2]="AQ",t[t.mPt=3]="mPt",t}({}),tq=function(t){return t[t.pPt=0]="pPt",t[t.APt=1]="APt",t}({}),cn=function(t){return t[t.pG=0]="pG",t[t.yPt=1]="yPt",t[t.bPt=2]="bPt",t}({}),Rr=function(t){return t[t.dI=0]="dI",t[t.MPt=1]="MPt",t[t.TPt=2]="TPt",t}({});function Mi(t){return t?t.SMt?t.zD+"@"+t.SMt.Cn+"-"+(null!=(i=t.SMt.V)?i:""):""+t.zD:"";var i}function iq(t,i){if(i===t)return!0;if(i.zD!==t.zD)return!1;if(!t.SMt)return!0;if(i.SMt){const e=KX(t.SMt.Cn,t.SMt.V),s=KX(i.SMt.Cn,i.SMt.V);if(e[0]<=s[0])return void 0===e[1]||void 0!==s[1]&&e[1]>=s[1]}return!1}function eq(t,i){return t===i||t.zD===i.zD&&(t.SMt&&i.SMt?t.SMt.Cn===i.SMt.Cn&&t.SMt.V===i.SMt.V:t.SMt===i.SMt)}function sq(t){const i=!!t.SPt||void 0;return{o:t.o,NPt:t.NPt,wV:t.wV,IPt:t.IPt,ct:t.ct,DPt:t.DPt,SPt:i,EPt:t.kPt,LPt:t.xPt,CPt:t.CPt,jPt:t.jPt}}function nq(t,i){var e,s,n;return{Axt:null!=(e=i.Axt)?e:null==t?void 0:t.Axt,bxt:null!=(s=i.bxt)?s:null==t?void 0:t.bxt,OPt:null!=(n=i.OPt)?n:null==t?void 0:t.OPt}}async function rq(t,i,e,s,n){const r=i.filter((t=>_t(t,"audio"))),o=i.filter((t=>_t(t,"video"))),h=[],a=e.map((t=>async function(t,i,e){if(!t.Xyt)return;if(!t.RPt)return;if(t.xI!==cn.bPt)return;const s=oq(t.RPt);if(!s)return;if(s.ZA===Ps)return{NS:s,XY:[],qY:void 0,hY:t.Xyt};if(s.ZA===Av&&t.RPt===Tv)return{NS:s,XY:[],qY:t.Xyt,hY:void 0};{ta.Hj("HLSDrmUtils","Fetching key uri "+t.Xyt+".");const n=await i.hI({zu:t.Xyt,zI:e});return{NS:s,XY:[await n.FN()],qY:void 0,hY:void 0}}}(t,s,n)));var u;const c=function(t,i){if(0===i.length)return t;const e=t=>{const e=i.indexOf(t.NS.ZA);return e>=0?e:i.length};return qs(t,((t,i)=>e(t)-e(i)))}((await Promise.all(a)).filter($t),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const i of c){const e=tW(null!=t?t:{},i.NS),s="cbcs";h.push({NS:i.NS,XY:i.XY,qY:i.qY,hY:i.hY,HV:[{initDataTypes:[i.NS.GA],audioCapabilities:iW(r,s,null==e?void 0:e.audioRobustness),videoCapabilities:iW(o,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]})}return h}function oq(t){return t===vu?Nv:t===bo?Ga:t===Mv?Dv:t===Tv?Ev:void 0}function hq(t){if("#"!==t[0])throw new b("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function aq(t){return"#"!==t[0]?t:t.split(":",1)[0]}function uq(t){const i=t.indexOf(":");if(-1===i||t.length<i+1)throw new b("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(i+1)}function cq(t){const i=Ti(uq(t));if(void 0===i)throw new b("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return i}function pa(t){const i={},e=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=e.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?i[n]=r:ta.qRt(bl,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=e.exec(t)}return i}function lq(t,i){const e=pa(t);let s,n;try{s=e.URI?Fe.TA(e.URI,i):void 0,n=function(t){switch(t){case"AUDIO":return Oe.SI;case"VIDEO":return Oe.NI;case"SUBTITLES":return Oe.AQ;case"CLOSED-CAPTIONS":return Oe.mPt}throw new b("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(e.TYPE)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=e["GROUP-ID"],o=e.LANGUAGE,h=e["ASSOC-LANGUAGE"],a=e.NAME,u="YES"===e.DEFAULT;let c="YES"===e.AUTOSELECT;const l="YES"===e.FORCED,d=e["INSTREAM-ID"],f=e.CHARACTERISTICS,g=e.CHANNELS;if(r||ta.qRt(bl,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),o||ta.qRt(bl,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||ta.qRt(bl,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===Oe.mPt?(s&&ta.qRt(bl,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),d?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(d)||ta.qRt(bl,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):ta.qRt(bl,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):d&&ta.qRt(bl,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,e.AUTOSELECT&&ta.qRt(bl,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),e.FORCED&&n!==Oe.AQ&&ta.qRt(bl,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new b("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{PPt:h,hxt:g,TRt:f,yRt:r,pRt:c,mRt:u,ARt:l,bRt:d,gs:o,l:a,YA:n,Xyt:s}}function dq(t,i,e){const s=pa(t);let n,r,o;try{n=Fe.TA(e,i),o=function(t){if(void 0===t)return;const i=t.split("x"),e=Number(i[0]),s=Number(i[1]);if(j(e)||j(s))throw new b("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{ji:e,Ti:s}}(s.RESOLUTION),r=function(t){if(!t)return;let i,e,s;const n=t.split(",");for(const t of n){const n=t.trim();I(n,"mp4a")?i="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?i=n:I(n,"avc")||I(n,"hvc1")||I(n,"hev1")||I(n,"dvh")||I(n,"vp09")||I(n,"av01")?e=n:s=s?s+","+n:n}return{Axt:i,bxt:e,OPt:s}}(s.CODECS)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const h=Ti(s.BANDWIDTH),a=Ti(s["AVERAGE-BANDWIDTH"]),u=Ti(s.SCORE),c=Ti(s["FRAME-RATE"]),l=s["HDCP-LEVEL"],d=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");d.push(...t.map((t=>{const i=t.split(":");return{keysystem:i[0],label:i[1]}})))}const f=s["VIDEO-RANGE"],g=s.AUDIO,_=s.VIDEO,v=s.SUBTITLES,w=s["CLOSED-CAPTIONS"];if(void 0===h?ta.qRt(bl,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>h&&ta.qRt(bl,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||ta.Hj(bl,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.bxt&&void 0===o&&ta.Hj(bl,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||Qa(["TYPE-0","TYPE-1","NONE"],l)||ta.qRt(bl,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||Qa(["SDR","PQ","HLG"],f)||ta.qRt(bl,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===h)throw new b("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{zPt:d,BPt:g,Gyt:a,FY:h,UPt:w,cht:r,vgt:c,QPt:l,cxt:o,Wyt:u,FPt:v,Xyt:n,YPt:_,VPt:f}}function fq(t,i){const e=pa(t);if(!e.URI)throw new b("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return dq(t,i,e.URI)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function Ti(t){const i=Number(t);return j(i)?void 0:i}function gq(t,i){const e=pa(t);let s,n;try{s=function(t){switch(t){case"NONE":return cn.pG;case"AES-128":return cn.yPt;case"SAMPLE-AES":return cn.bPt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new b("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(e.METHOD),n=e.URI?bq(e.URI,i):void 0}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=e.KEYFORMAT,o=e.IV,h=e.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==cn.pG){if(c=r||Tv,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(oq(c)!==Nv)throw new b("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=cn.bPt}else a=s;u=n,l=o?lm(o):void 0,d=h?h.split("/").map((t=>Number(t))):[1]}else a=cn.pG,(n||r||h||o)&&ta.qRt(bl,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{xI:a,Xyt:u,GPt:l,RPt:c,WPt:d}}function _q(t){const i=uq(t);if(!i)return[void 0,""];const[e,s]=i.split(",");return[Ti(e),s]}function vq(t,i){const e=t.split("@"),s=Ti(e[0]),n=e.length>1?Ti(e[1]):i;if(void 0===s||void 0===n)throw new b("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Cn:n,V:s}}function wq(t){if(void 0!==t)return vq(t,void 0)}function mq(t,i){return vq(uq(t),i)}function pq(t,i){const e=pa(t);try{const t=bq(e.URI,i);return{zD:t,SMt:wq(e.BYTERANGE)}}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function Aq(t){const i=uq(t);if(!i)throw new b("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const e=new Date(i);if(!If(e))throw new b("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return e}function yq(t){const i=pa(t),e=i["START-DATE"],s=i["END-DATE"],n=Ti(i["PLANNED-DURATION"]);let r,o,h,a=Ti(i.DURATION);void 0!==i["SCTE35-CMD"]&&(r=lm(i["SCTE35-CMD"]).buffer),i["SCTE35-IN"]&&(o=lm(i["SCTE35-IN"]).buffer),i["SCTE35-OUT"]&&(h=lm(i["SCTE35-OUT"]).buffer);const u="YES"===i["END-ON-NEXT"],c=function(t){const i={};for(const e of _.keys(t)){const s=t[e];void 0!==s&&I(e,"X-")&&(i[e]=s)}return i}(i),l=i.ID,d=i.CLASS;let f,g;if(void 0===e)ta.qRt(bl,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+e+".");else if(f=new Date(e),g=void 0!==s?new Date(s):void 0,If(f)||ta.qRt(bl,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const i=new Date(f.getTime()+1e3*a);g?g.getTime()!==i.getTime()&&(ta.qRt(bl,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),g=i):g=i}else g&&(a=(f.getTime()-g.getTime())/1e3);if(u&&(i.CLASS||ta.qRt(bl,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),i.DURATION&&ta.qRt(bl,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),g&&ta.qRt(bl,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&ta.qRt(bl,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new b("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,NPt:d,wV:f,IPt:g,ct:a,DPt:n,xPt:r,jPt:o,CPt:h,SPt:u,kPt:c}}function bq(t,i){if(void 0===t)throw new b("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return Fe.TA(t,i)}function Mq(t,i){const e=pa(t),s=Ti(e.DURATION),n=bq(e.URI,i),r=wq(e.BYTERANGE),o="YES"===e.INDEPENDENT,h="YES"===e.GAP;if(void 0===s)throw new b("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,Xyt:{zD:n,SMt:r},ZPt:o,HPt:h}}function Tq(t){const i=pa(t);return{XPt:"YES"===i["CAN-BLOCK-RELOAD"],qPt:Ti(i["CAN-SKIP-UNTIL"]),KPt:"YES"===i["CAN-SKIP-DATERANGES"],JPt:Ti(i["HOLD-BACK"]),$Pt:Ti(i["PART-HOLD-BACK"])}}function Sq(t,i){const e=pa(t);if(void 0===e.URI)throw new b("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=bq(e.URI,i),n=Ti(e["LAST-MSN"]),r=Ti(e["LAST-PART"]);if(void 0===n)throw new b("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{Xyt:s,tzt:n,izt:r}}function Nq(t,i){var e;const s=pa(t),n=Ti(s["SKIPPED-SEGMENTS"]),r=null==(e=s["RECENTLY-REMOVED-DATERANGES"])?void 0:e.split("\t");if(void 0===n)throw new b("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{ezt:n,szt:r,nzt:i}}function Iq(t){const i=Ti(pa(t)["PART-TARGET"]);if(void 0===i)throw new b("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return i}function Dq(t){switch(uq(t)){case"VOD":return Rr.MPt;case"EVENT":return Rr.TPt;default:return ta.qRt(bl,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),Rr.dI}}function Eq(t,i){const e=pa(t);let s,n;try{s=function(t){if(void 0===t)throw new b("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return tq.pPt;if("PART"===t)return tq.APt;throw new b("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(e.TYPE),n=bq(e.URI,i)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=Ti(e["BYTERANGE-START"]),o=Ti(e["BYTERANGE-LENGTH"]);let h;return void 0===r&&void 0===o||(h={Cn:r||0,V:o}),{YA:s,Xyt:{zD:n,SMt:h}}}r(),Qi(),r(),r();var kq=class t{rzt(){const t=this.ozt[this.hzt];return this.hzt+=1,t}azt(){return this.ozt[this.hzt]}Zb(){const i=new t("");return i.hzt=0,i.ozt=this.ozt.slice(this.hzt),i}static uzt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(i){this.hzt=0,this.ozt=t.uzt(i)}};function Lq(t,i,e){const s=t.Xyt;let n=t.cj,r=t.czt,o=t.Cn;switch(e){case"#EXT-X-VERSION":n=function(t){const i=cq(t);return j(i)?(ta.qRt(bl,"Playlist version is NaN: "+t+"."),1):i}(i);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":o=function(t){const i=pa(t),e=Ti(i["TIME-OFFSET"]);if(void 0===e)throw new b("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{lzt:e,dzt:"YES"===i.PRECISE}}(i);break;case"#EXT-X-DEFINE":ta.qRt(bl,"Ignoring unsupported #EXT-X-DEFINE: "+i+".");break;default:ta.Hj(bl,"Ignoring unrecognized line or comment: "+i+".")}return{Xyt:s,cj:n,czt:r,Cn:o}}function xq(t,i){return t.map((t=>t.xI===cn.pG||t.GPt?t:Ei({},t,{GPt:Cq(i)})))}function Cq(t){const i=new DataView(new ArrayBuffer(16)),e=new da;return e.Gb(8),Hw(i,e,D.fromNumber(t)),new T(i.buffer)}function jq(t,i,e){ta.Hj(bl,"Parsing M3U8 playlist at "+t+".");const s=new kq(e);if("#EXTM3U"!==s.rzt())throw new b("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(e)?function(t,i){let e;try{e=Fe.TA(t)}catch(i){throw ta.qRt(bl,"The master playlist has no valid base URI: "+t+"."),new b("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={Xyt:e,czt:void 0,Cn:void 0,cj:void 0};const n=[],r=[],o=[],h=[];for(;;){const t=i.rzt();if(!t)break;try{const a=hq(t);switch(a){case"#EXT-X-MEDIA":{const i=lq(t,e);n.push(i);break}case"#EXT-X-STREAM-INF":{const s=dq(t,e,i.rzt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const i=fq(t,e);o.push(i);break}case"#EXT-X-SESSION-DATA":ta.qRt(bl,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const i=gq(t,e);h.push(i);break}default:s=Lq(s,t,a)}}catch(i){ta.qRt(bl,"Ignoring unparsable line: "+t,i)}}let a=s.cj;var u;const c=null!=(u=s.czt)&&u,l=s.Cn;return void 0===a&&(ta.qRt(bl,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some((t=>void 0!==t.Wyt))||o.some((t=>void 0!==t.Wyt)))&&(r.some((t=>void 0===t.Wyt))||o.some((t=>void 0===t.Wyt)))&&ta.qRt(bl,"If one master playlist variant stream has a SCORE, all variants should have it."),{Xyt:e,cj:a,czt:c,Cn:l,fzt:o,gzt:h,zj:n,_zt:r}}(t,s):function(t,i,e){let s={Xyt:t,czt:void 0,Cn:void 0,cj:void 0};const n=[];let r,o,h,a,u=!1,c=!1;const l=[],d=ll();let f,g,_,v,w,m,p,A,y,M=[],T=[],S=!1,N=!1;const D=[],E=[];let k,L,x,C,j,O=0,R=!1,P=Rr.dI,z=!1,B=0;try{j=Fe.TA(t)}catch(i){throw ta.qRt(bl,"The media playlist has no valid base URI: "+t+".",i),new b("HLSPlaylistParser - Could not parse HLS media playlist.")}const U=e.Zb();for(;void 0===L||void 0===x;){const t=U.rzt();if(!t)break;try{switch(aq(t)){case"#EXT-X-MEDIA-SEQUENCE":L=cq(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":x=cq(t)}}catch(i){ta.qRt(bl,"Ignoring unparsable line: "+t,i)}}void 0===L&&(ta.Hj(bl,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),L=0),void 0===x&&(ta.Hj(bl,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),x=0);let Q=L,F=x;for(;;){const t=e.rzt();if(!t)break;let i=!1;try{const e=aq(t);switch(e){case"#EXTINF":i=!0,[f,g]=_q(t);break;case"#EXT-X-BYTERANGE":i=!0,_=mq(t,O),_&&(O=_.Cn+_.V);break;case"#EXT-X-DISCONTINUITY":i=!0,S=!0,F++;break;case"#EXT-X-KEY":{var Y;i=!0;const e=gq(t,j);if(e.xI===cn.pG){d.clear(),y=void 0;break}var V;const s=null!=(V=null==(Y=e.RPt)?void 0:Y.toString())?V:"identity";d.set(s,e),e.xI===cn.yPt&&(y=e);break}case"#EXT-X-MAP":i=!0,w=pq(t,j),m=y;break;case"#EXT-X-PROGRAM-DATE-TIME":i=!0,p=Aq(t);break;case"#EXT-X-GAP":i=!0,N=!0;break;case"#EXT-X-BITRATE":i=!0,A=cq(t);break;case"#EXT-X-TARGETDURATION":r=cq(t);break;case"#EXT-X-DATERANGE":{const i=yq(t);n.push(i);break}case"#EXT-X-PART":{i=!0;const e=Mq(t,j);T.push(e);break}case"#EXT-X-PRELOAD-HINT":{const i=Eq(t,j);D.push(i);break}case"#EXT-X-SKIP":{l.length>0&&ta.qRt(bl,"#EXT-X-SKIP must appear before any #EXTINF tags."),i=!0;const e=Nq(t,Q);B=e.ezt,C=e.szt,Q+=e.ezt;break}case"#EXT-X-SERVER-CONTROL":{const i=Tq(t);u=i.XPt,o=i.qPt,c=i.KPt,h=i.JPt,a=i.$Pt;break}case"#EXT-X-RENDITION-REPORT":{const i=Sq(t,j);E.push(i);break}case"#EXT-X-PART-INF":k=Iq(t);break;case"#EXT-X-MEDIA-SEQUENCE":i&&ta.qRt(bl,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":i&&ta.qRt(bl,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":R=!0;break;case"#EXT-X-PLAYLIST-TYPE":P=Dq(t);break;case"#EXT-X-I-FRAMES-ONLY":z=!0;break;default:if(I(e,"#"))s=Lq(s,t,e);else{v=Fe.TA(t,j);const i=w?{Xyt:w,vzt:m}:void 0,e={gzt:xq(ov(d),Q),_Q:M,wzt:T,ct:f,TV:g,mzt:S,Xyt:{SMt:_,zD:v},pzt:i,Azt:p,HPt:N,yzt:A,nzt:Q,bzt:F};l.push(e),Q++,M=[],T=[],f=void 0,g=void 0,S=!1,_=void 0,v=void 0,p=void 0,N=!1,A=void 0}}}catch(i){ta.qRt(bl,"Ignoring unparsable line: "+t,i)}}if(T.length){const t=w?{Xyt:w,vzt:y}:void 0,i={gzt:xq(ov(d),Q),_Q:M,wzt:T,ct:f,TV:g,mzt:S,Xyt:void 0,pzt:t,Azt:p,HPt:N,yzt:A,nzt:Q,bzt:F};l.push(i)}let G=s.cj;var W;const Z=null!=(W=s.czt)&&W,H=s.Cn;void 0===G&&(ta.qRt(bl,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),G=2),void 0===r&&ta.qRt(bl,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const X=l.length,q=X>0;q||ta.qRt(bl,"The HLS media playlist contains no segments.");const K=q&&l[X-1].wzt.length>0;return K&&void 0===k&&ta.qRt(bl,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),K&&void 0===a&&ta.qRt(bl,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{XPt:u,qPt:o,KPt:c,Mzt:n,bzt:x,Tzt:R,czt:Z,JPt:h,Szt:z,nzt:L,ezt:B,$Pt:a,uPt:k,Nzt:P,Izt:D,szt:C,Dzt:E,Ezt:r,Wot:l,Cn:H,Xyt:j,kzt:i,cj:G}}(t,i,s)}Qi(),r(),r();var Oq=class{get Xyt(){return this.wRt.Xyt}get cht(){return this.JLt}set cht(t){this.JLt=t?Pq(t):void 0,this.Lzt=function(t,i){return!(void 0!==(null==t?void 0:t.Axt)&&void 0===(null==i?void 0:i.Axt)||void 0!==(null==t?void 0:t.bxt)&&void 0===(null==i?void 0:i.bxt))}(this.xzt,this.JLt)}get Czt(){return this.Lzt}get rPt(){return this.jzt}get $Rt(){return this.jzt.filter((t=>t.YA===Oe.SI))}get tPt(){return this.jzt.filter((t=>t.YA===Oe.NI))}get Ozt(){return this.jzt.filter((t=>t.YA===Oe.AQ))}get Rzt(){return this.jzt.filter((t=>t.YA===Oe.mPt))}Pzt(t){for(const i of this.jzt){const e=i.wRt.Pzt(t);if(void 0!==e)return e}}zzt(t){for(const i of this.jzt){const e=i.wRt.zzt(t);if(void 0!==e)return e}}Bzt(t){ra(this.jzt,t)}constructor(t,i,e){var s,n,r,o;this.o=Rq++,this.Wyt=void 0,this.cxt=void 0,this.Gyt=void 0,this.Lzt=!1,this.jzt=[],this.wRt=i,this.FY=t.FY,this.Gyt=t.Gyt,this.Wyt=t.Wyt,this.xzt=t.cht?Pq(t.cht):void 0,this.JLt=this.xzt,this.cxt=t.cxt,this.vgt=t.vgt,this.BPt=null!=(s=t.BPt)?s:"Uzt"+this.o,this.YPt=null!=(n=t.YPt)?n:"Qzt"+this.o,this.FPt=null!=(r=t.FPt)?r:"Fzt"+this.o,this.UPt=null!=(o=t.UPt)?o:"Yzt"+this.o,this.jzt=e}},Rq=0;function Pq(t){return Ei({},t,{bxt:t.bxt?JA(t.bxt):void 0})}r(),r(),r();var zq=class{get lB(){var t;return this.yB+(null!=(t=this.Vzt)?t:0)}get Gzt(){return this.Wzt}get Zzt(){return this.Hzt}get gzt(){return this.Xzt.gzt}qzt(t,i,e){this.yB=t,this.Wzt=i,this.Hzt=e}constructor(t,i,e,s,n,r){this.kst=void 0,this.Xzt=t,this.Kzt=i,this.yB=e,this.Wzt=s,this.Hzt=n,this.ct=r.ct,this.Xyt=r.Xyt,this.ZPt=r.ZPt,this.HPt=r.HPt}},Bq=class{get lB(){var t;return this.yB+(null!=(t=this.Jzt)?t:0)}get $zt(){return this.yB}get ct(){return this.JM}get Xyt(){return this.tBt}get Gzt(){return this.Wzt}get Zzt(){return this.Hzt}get wzt(){return this.Cw}get iBt(){return this.eBt}get dB(){var t;return this.lB+(null!=(t=this.JM)?t:this.eBt)}set Vzt(t){this.Jzt=t;for(const i of this.Cw)i.Vzt=t}get Vzt(){return this.Jzt}sBt(t){return this.Cw[t]}nBt(t){for(let i=0;i<this.Cw.length;i++){const e=this.Cw[i],s=e.lB,n=s+e.ct;if(s<=t&&t<=n)return t===n&&i+1<this.Cw.length?this.Cw[i+1]:e}}rBt(t){for(let i=this.Cw.length-1;i>=0;i--){const e=this.Cw[i];if(e.lB<=t)return e}}oBt(t){let i=this.rBt(t);for(;i&&!i.ZPt&&i.Kzt>0;)i=this.sBt(i.Kzt-1);return i}qzt(t,i,e){const s=t.wzt.length!==this.Cw.length||e!==this.Hzt;this.Wzt=i,this.Hzt=e,this.JM=t.ct,null!=this.Azt||(this.Azt=t.Azt),void 0===this.tBt&&(this.tBt=t.Xyt),s&&this.hBt(t.wzt)}hBt(t){this.Cw.length>t.length&&(this.Cw.length=t.length);let i=0;for(let e=0;e<t.length;e++){const s=t[e],n=this.Wzt&&0===e,r=this.Hzt&&e===t.length-1,o=this.yB+i;if(e<this.Cw.length)this.Cw[e].qzt(o,n,r);else{const t=new zq(this,e,o,n,r,s);t.Vzt=this.Jzt,this.Cw.push(t)}i+=s.ct}this.eBt=i}aBt(){nt(this.Cw),this.eBt=0}constructor(t,i,e,s,n){this.kst=void 0,this.Cw=[],this.eBt=0,this.yB=t,this.pzt=n.pzt,this.Wzt=e,this.Hzt=s,this.JM=n.ct,this.Azt=n.Azt,this.tBt=n.Xyt,this.HPt=n.HPt,this.nzt=n.nzt,this.mzt=n.mzt,this.bzt=i,this.gzt=n.gzt,this.hBt(n.wzt)}};r();var Uq=function(t){return t.uBt="YES",t.cBt="v2",t}({});Qi(),r();var Qq=class extends Co{};r(),r(),r();var Fq=class extends hN{get ga(){return this.Za||(this.Za=function(t){return fe(Ft(t),{get content(){return t.U},get class(){return t.NPt},get startDate(){return t.wV},get endDate(){return t.IPt},get duration(){return t.ct},get plannedDuration(){return t.DPt},get endOnNext(){return t.SPt},get scte35Cmd(){return t.LPt},get scte35Out(){return t.CPt},get scte35In(){return t.jPt},get customAttributes(){return t.EPt}})}(this)),this.Za}get NPt(){return this.lBt}get wV(){return this.dBt}get IPt(){return this.fBt}get ct(){return this.JM}get DPt(){return this.gBt}get SPt(){return this._Bt}get LPt(){return this.vBt}get CPt(){return this.wBt}get jPt(){return this.mBt}get EPt(){return this.pBt}Yn(t){let i=!1;var e;(void 0===this.lBt&&void 0!==t.NPt&&(i=!0,this.lBt=t.NPt),void 0===this.fBt&&void 0!==t.IPt&&(i=!0,this.fBt=t.IPt),void 0===this.JM&&void 0!==t.ct&&(i=!0,this.JM=t.ct),void 0===this.gBt&&void 0!==t.DPt&&(i=!0,this.gBt=t.DPt),!this._Bt&&t.SPt&&(i=!0,this._Bt=t.SPt),i=this.updateCustomAttributes(t,i),void 0===this.vBt&&void 0!==t.LPt&&(i=!0,this.vBt=t.LPt),void 0===this.wBt&&void 0!==t.CPt&&(i=!0,this.wBt=t.CPt),void 0===this.mBt&&void 0!==t.jPt&&(i=!0,this.mBt=t.jPt),this.ABt(),this.yBt(),this.bBt(),i)&&(this.yo(new iN(this)),null==(e=this.bB)||e.yo(new sN(this)))}updateCustomAttributes(t,i){let e=i;if(t.EPt)for(const i of _.keys(t.EPt))void 0===this.pBt[i]&&(e=!0,this.pBt[i]=t.EPt[i]);return e}ABt(){this.JM&&!this.fBt&&(this.fBt=new Date(this.dBt.getTime()+io(this.JM)))}yBt(){this.fBt&&!this.JM&&(this.JM=Df(this.fBt.getTime()-this.dBt.getTime()))}bBt(){this.TB===1/0&&(this.fBt||this.JM)&&(this.TB=Yq(this.yB,this.JM,this.dBt,this.fBt))}constructor(t,i){super(i,Yq(i,t.ct,t.wV,t.IPt),void 0,!1,t.o),this.lBt=t.NPt,this.dBt=t.wV,this.fBt=t.IPt,this.JM=t.ct,this.gBt=t.DPt,this._Bt=Boolean(t.SPt),this.pBt=t.EPt||{},this.vBt=t.LPt,this.wBt=t.CPt,this.mBt=t.jPt,this.ABt(),this.yBt()}};function Yq(t,i,e,s){return $t(i)?t+i:s?t+(Df(s.getTime())-Df(e.getTime())):1/0}var Vq=class extends aR{Yn(t,i){Gq(this,Wq(t),i)}RQ(t){Zq(this.L.AL,t),super.RQ(t)}constructor(){super(void 0,void 0,El.DATE_RANGE)}};function Gq(t,i,e){const s=t.L.AL;for(let e=s.length-1;e>=0;e--){const n=s[e],r=dl(i,(t=>t.o===n.o));r?n.Yn(r):t.SQ(n)}for(const s of i){const i=s.wV;if(void 0!==i&&!t.d6(s.o)){const n=e(i),r=new Fq(s,n);Zq(t.L.AL,r),t.RQ(r)}}}function Wq(t){const i=ll(),e=[];for(const s of t)if(i.has(s.o)){const t=i.get(s.o),e=Ei({},t,AM(s),{EPt:Ei({},t.EPt,s.EPt)});i.set(s.o,e)}else i.set(s.o,s),e.push(s.o);return e.map((t=>i.get(t)))}function Zq(t,i){const e=wo(t,(t=>t.NPt===i.NPt));e&&e.SPt&&e.Yn({o:e.o,IPt:i.wV})}var Hq=String.fromCharCode(95),Xq=Hq+"HLS_msn",qq=Hq+"HLS_part",Kq=Hq+"HLS_skip",Jq="HLSMediaPlaylist",$q=class{get Tzt(){if(0===this.eMt.length)return!1;return this.eMt[this.eMt.length-1].Zzt}get ct(){return this.JM}get _k(){return this.I5}get MBt(){return this.TBt}get cPt(){return this.SBt}get uPt(){return this.NBt}get JPt(){return this.Tzt?0:this.IBt?this.IBt:this.SBt?3*this.SBt:void 0}get $Pt(){var t;return null!=(t=this.DBt)?t:this.NBt?3*this.NBt:void 0}get XPt(){return this.EBt}get qPt(){return this.kBt}get KPt(){return this.LBt}get Nzt(){return this.xBt}get CBt(){return void 0!==this.uPt}get jBt(){if(this.Tzt)return!0;const t=Fe.Og()/1e3,i=this.OBt,e=this.RBt;return void 0!==i&&t-i<e}get OBt(){return this.PBt}get zBt(){if(this.BBt)return Fe.Og()/1e3-this.BBt}get Vzt(){return this.Jzt}get RBt(){var t;return null!=(t=this.SBt)?t:void 0===this.PBt?5:1}get Wot(){return this.eMt}get Mzt(){return this.UBt}get QBt(){return this.FBt}set QBt(t){this.FBt=t}get Cn(){return this.mQ}get YBt(){return this.VBt}WRt(t){if(!t)return this.Xyt;const i=Fe.Ah(this.Xyt);return void 0!==t.nzt&&i.searchParams.append(Xq,String(t.nzt)),void 0!==t.GBt&&i.searchParams.append(qq,String(t.GBt)),void 0!==t.ZC&&i.searchParams.append(Kq,t.ZC),i.href}yct(t){const i=this.eMt;if(0===i.length)return;const e=t-i[0].nzt;return e<0||e>=i.length?void 0:i[e]}WBt(t){if(0===this.eMt.length)return;const i=uV(tK.Ld,this.eMt,t);if(!(i<0)){const e=this.eMt[i];return t===e.dB&&i+1<this.eMt.length?this.eMt[i+1]:e}{const i=this.eMt[this.eMt.length-1];if(t===i.dB)return i}}ZBt(t){if(0===this.eMt.length)return;const i=this.eMt[0];if(t<i.dB)return i;const e=this.eMt[this.eMt.length-1];return t>=e.lB?e:this.WBt(t)}Pzt(t){const i=this.ZBt(t);if(void 0===i)return;for(let e=i.nzt-this.eMt[0].nzt;e>=0;e--){const i=this.eMt[e];if(void 0!==i.Azt)return new Date(i.Azt.getTime()+1e3*(t-i.lB))}}zzt(t){let i;for(const e of this.eMt)if(iK(e))if(void 0===i)i=e;else{if(!(e.Azt.getTime()<=t.getTime()))break;i=e}if(void 0!==i)return i.lB+(t.getTime()-i.Azt.getTime())/1e3}HBt(t){switch(t){case tq.pPt:return this.XBt;case tq.APt:return this.qBt;default:return}}qzt(t){var i;void 0===this.SBt&&(this.SBt=null!=(i=t.Ezt)?i:this.KBt(t));void 0===this.IBt&&void 0!==t.JPt&&(this.IBt=t.JPt),void 0===this.NBt&&void 0!==t.uPt&&(this.NBt=t.uPt),void 0===this.DBt&&void 0!==t.$Pt&&(this.DBt=t.$Pt),this.EBt=t.XPt,this.kBt=t.qPt,this.LBt=t.KPt,this.xBt=t.Nzt,this.oMt(t),this.JBt(t);const e=dl(t.Izt,(t=>t.YA===tq.pPt)),s=dl(t.Izt,(t=>t.YA===tq.APt));this.XBt=e?{Xyt:e.Xyt,YA:e.YA,bzt:t.bzt}:void 0,this.qBt=s?{Xyt:s.Xyt,YA:s.YA,bzt:t.bzt}:void 0,this.PBt=Fe.Og()/1e3;const n=this.I5.jn(this.I5.V-1);this.$Bt();const r=this.I5.jn(this.I5.V-1);(!this.BBt||r-n>0)&&(this.BBt=this.PBt),null!=this.mQ||(this.mQ=t.Cn)}$Bt(){this.TBt=this.tUt(),this.I5=this.iUt(this.TBt),this.JM=this.eUt()}tUt(){const t=this.Wot;if(0===t.length)return Mo.PP();const i=t[0].lB,e=t[t.length-1].dB;return new Mo([i,e])}iUt(t){if(0===t.V||this.Tzt)return t;const i=t.Cn(0),e=t.jn(0)-this.$Tt;return e<i?Mo.OP(i):new Mo([i,e])}get $Tt(){return this.Tzt?0:null!=(e=null!=(i=null!=(t=this.sUt)?t:this.$Pt)?i:this.JPt)?e:0;var t,i,e}eUt(){return 0===this.eMt.length?0:this.Tzt?qe(this.eMt,(t=>{var i;return null!=(i=t.ct)?i:t.iBt})):1/0}KBt(t){let i;for(const e of t.Wot)if(void 0!==e.ct){const t=x.max(1,x.round(e.ct));(void 0===i||i<t)&&(i=t)}if(void 0===i)throw new b("HLSModel - Could not determine required segment target duration.");return i}oMt(t){if(0===t.Wot.length)return nt(this.eMt),void this.nUt();const i=this.rUt(t);if(!i)return;let e,s,n;i.oUt>0&&this.eMt.splice(0,i.oUt);const r=t.ezt;if(r>0){if(r>this.eMt.length)throw new Qq("New playlist skips over missing segments.");const i=this.eMt[r-1];if(void 0===i.ct)throw new Qq("New playlist skips over an incomplete segment.");e=i.$zt+i.ct,n=i.bzt-t.bzt,s=r;for(let t=0;t<r;t++)this.eMt[t].aBt()}else e=i.hUt,n=0,s=0;for(let i=0;i<t.Wot.length;i++,s++){const r=t.Wot[i],o=0===i,h=t.Tzt&&i===t.Wot.length-1,a=r.ct,u=r.bzt+n;if(s<this.eMt.length){const t=this.eMt[s];0,t.qzt(r,o,h)}else{let t=r;if(this.eMt.length>0&&void 0===t.pzt){t=Ei({},t,{pzt:this.eMt[this.eMt.length-1].pzt})}const i=new Bq(e,u,o,h,t);i.Vzt=this.Jzt,this.eMt.push(i)}void 0!==a&&(e+=a)}}rUt(t){if(0===this.eMt.length)return{oUt:0,hUt:0};const i=this.eMt[0].nzt,e=this.eMt[this.eMt.length-1].nzt,s=t.Wot[0].nzt-t.ezt,n=t.Wot[t.Wot.length-1].nzt;let r=0,o=0;if(s<i){const e=this.Wot[0].Azt,n=t.Wot[0].Azt;if(!(e&&n&&e<n))return void ta.qRt(Jq,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+i+")");r=this.eMt.length,this.nUt()}else{if(n<e)return void ta.qRt(Jq,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+e+")");if(e<s){var h;o=null!=(h=function(t,i){const e=wo(t,(t=>void 0!==t.Azt));if(void 0===e)return;const s=function(t){let i=0;for(const s of t){if(s.mzt)return;if(s.Azt)return[s,i];var e;i+=null!=(e=s.ct)?e:0}return}(i.Wot);if(void 0===s)return;const[n,r]=s;if(e.bzt!==n.bzt)return;const o=(n.Azt.getTime()-e.Azt.getTime())/1e3;return e.$zt+o-r}(this.eMt,t))?h:function(t,i,e){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:x.max(e,s.iBt),o=e*(i-s.nzt-1);return s.$zt+r+o}(this.eMt,s,this.SBt),ta.XRt(Jq,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+e+"), resetting playlist and restarting at "+o+"s"),r=this.eMt.length,this.nUt()}else{0;const t=Kv(this.eMt,(t=>t.nzt===s));0,o=this.eMt[t].$zt,t>0&&(r=t)}}return{oUt:r,hUt:o}}JBt(t){let i=t.Mzt.map(sq);if(t.KPt&&t.kzt.ZC===Uq.cBt&&(i=this.UBt.concat(i)),this.UBt=Wq(i),t.szt)for(const i of t.szt){const t=Kv(this.UBt,(t=>t.o===i));t>=0&&Mn(this.UBt,t)}}aUt(t,i){if(this.Jzt!==t){this.Jzt=t;for(const t of this.eMt)t.Vzt=this.Jzt;this.$Bt()}this.VBt=i}nUt(){this.Jzt=void 0,this.VBt=void 0}constructor(t,i,e){this.PBt=void 0,this.BBt=void 0,this.XBt=void 0,this.qBt=void 0,this.SBt=void 0,this.NBt=void 0,this.IBt=void 0,this.DBt=void 0,this.eMt=[],this.UBt=[],this.EBt=!1,this.kBt=void 0,this.LBt=!1,this.xBt=Rr.dI,this.I5=Mo.PP(),this.TBt=Mo.PP(),this.JM=void 0,this.FBt=-1/0,this.VBt=void 0,this.Xyt=t,this.mQ=i,this.sUt=e}},tK=class t{static get Ld(){return null!=this.uht||(this.uht=new t),this.uht}Jbt(t){return t.lB}$bt(t){return t.dB}tMt(t,i){return eo(t,i)}iMt(t,i,e){return(t-i)/(e-i)}};function iK(t){return void 0!==t.Azt}function eK(t){return void 0!==t.wzt}function sK(t){return eK(t)?t.Gzt:0===t.Kzt&&t.Xzt.Gzt}function nK(t,i){return eK(t)?eK(i)?t.nzt+1===i.nzt:0===i.Kzt&&nK(t,i.Xzt):t.Kzt===t.Xzt.wzt.length-1?nK(t.Xzt,i):!eK(i)&&t.Xzt===i.Xzt&&t.Kzt+1===i.Kzt}r(),r(),r();var rK=class extends Co{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var oK=class{uUt(t){const i=this.cUt.get(t);return void 0!==i&&hK(i)}lUt(t){if(this.dUt()>t)return Promise.reject(new rK);const i=[];for(const s of this.fUt){var e;if(s<t)null==(e=this.cUt.get(s))||e.gUt.nM(new rK),this.cUt.delete(s);else i.push(s)}return this.fUt=i,-1===this.fUt.indexOf(t)&&this.fUt.push(t),this._Ut(t).gUt.rM}vUt(t){const i=this.cUt.get(t);if(!i||!hK(i))throw new b("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return i}wUt(t){return this.vUt(t).rQ}mUt(t,i){const e=eK(i)?i:i.Xzt,s=this.vUt(e.bzt);let n=t.Kz(s.rQ);if(s.pUt){const t=H.BU(i.lB).qB(n);if(t.ZB().UB(IN())){const i=x.round(t.BB()/NN().BB());n=n.Kz(NN().TU(i))}}return n}AUt(t,i){return this.mUt(t,i).qB(t)}yUt(t,i,e,s,n,r){this.bUt<t&&(this.bUt=t);const o=this._Ut(t);void 0===o.rQ&&(o.MUt.some((t=>t.Fut===i))||(o.MUt.push({Fut:i,TUt:e,SUt:s.OU(e.xj),NUt:n,pUt:r}),this.IUt(o,t)))}IUt(t,i){if(t.rQ||!this.DUt(t))return;const e=function(t){return rw(t,aK)}(t.MUt);t.rQ=e.SUt.qB(e.TUt),t.pUt=t.MUt.some((t=>t.pUt)),t.gUt.sM(),nt(t.MUt),ra(this.fUt,i)}DUt(t){return this.EUt.length>0&&this.EUt.every((i=>t.MUt.some((t=>t.Fut===i))))}_Ut(t){if(this.cUt.has(t))return this.cUt.get(t);{const i={rQ:void 0,pUt:!1,gUt:new xh,MUt:[]};return this.cUt.set(t,i),i}}kUt(t){this.EUt=t,this.cUt.forEach(((t,i)=>this.IUt(t,i)))}LUt(){this.bUt=-1}dUt(){return this.bUt}wy(){this.cUt.forEach((t=>t.gUt.Ty())),this.cUt.clear()}constructor(){this.EUt=[],this.cUt=gc(),this.fUt=[],this.bUt=-1}};function hK(t){return void 0!==t.rQ}function aK(t,i){return-function(t,i){if(t.pUt||i.pUt)return function(t,i){let e=t.qB(i);return t.JB()||i.JB()||(e.FB(IN())?e=e.qB(NN()):e.WB(IN().XB())&&(e=e.Kz(NN()))),e}(t.TUt,i.TUt).QB(H.sU);return t.TUt.QB(i.TUt)}(t,i)||function(t,i){return t.NUt===i.NUt?nn.Zr:t.NUt?nn.iy:nn.ey}(t,i)||function(t,i){return t.SUt.QB(i.SUt)}(t,i)}var uK=class{get xUt(){return this.CUt}get JRt(){return this.jUt}get tP(){return this.OUt}qzt(t,i){if($X(t))if(0===this.jUt.length)this.RUt(t);else{if(!i)return void ta.qRt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");i.wRt.qzt(t)}else{if(0!==this.jUt.length)return void ta.qRt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.PUt(t)}}RUt(t){const i=this.zUt(t.Xyt);i.qzt(t);const e=this.BUt(Oe.SI,i),s=this.BUt(Oe.NI,i),n=new Oq({Xyt:i.Xyt,FY:0,Gyt:0,Wyt:NaN,cht:void 0,cxt:void 0,vgt:0,zPt:[],QPt:void 0,VPt:void 0,BPt:void 0,YPt:void 0,FPt:void 0,UPt:void 0},i,[e,s]);this.jUt.push(n)}PUt(t){this.CUt.push(...t.gzt);const i=this.UUt(t);for(const e of t._zt){const s=i.filter((t=>lK(t,e)));this.QUt(e,s);const n=new Oq(e,this.zUt(e.Xyt,t.Cn),s);this.jUt.push(n)}}zUt(t,i){let e=this.FUt.get(t);return void 0===e&&(e=new $q(t,i,this.sUt),this.FUt.set(t,e)),e}UUt(t){const i=[];for(const e of t.zj)if(void 0===e.Xyt){for(const s of t._zt)if(cK(e.YA,e.yRt,s)){const t=new MX(e,this.zUt(s.Xyt));i.push(t)}}else{const t=new MX(e,this.zUt(e.Xyt));i.push(t)}return i}BUt(t,i){return new MX({YA:t,Xyt:void 0,yRt:"",gs:void 0,PPt:void 0,l:"",mRt:!0,pRt:!1,ARt:!1,TRt:void 0,bRt:void 0,hxt:void 0},i)}QUt(t,i){const e=i.filter((t=>t.YA===Oe.SI)),s=i.filter((t=>t.YA===Oe.NI)),n=t.cht&&(t.cht.bxt||t.cht.Axt);if((!n||t.cht.bxt)&&0===s.length){const e=this.BUt(Oe.NI,this.zUt(t.Xyt));i.push(e)}if((!n||t.cht.Axt)&&0===e.length){const e=this.BUt(Oe.SI,this.zUt(t.Xyt));i.push(e)}t.cht&&t.cht.OPt}YUt(t){for(const i of this.jUt)for(const e of i.rPt)if(e===t)return e}VUt(t){for(const i of this.jUt)if(i===t)return i}GUt(t){for(const i of this.jUt)if(Qa(i.rPt,t))return i}wy(){nt(this.jUt),nt(this.CUt),this.FUt.clear(),this.OUt.wy()}constructor(t,i){this.jUt=[],this.CUt=[],this.FUt=ll(),this.OUt=new oK,this.WUt=t,this.sUt=i}};function cK(t,i,e){switch(t){case Oe.SI:return e.BPt===i;case Oe.NI:return e.YPt===i;case Oe.AQ:return e.FPt===i;case Oe.mPt:return e.UPt===i}return!1}function lK(t,i){return cK(t.YA,t.yRt,i)&&(!t.MRt||t.wRt.Xyt===i.Xyt)}r();var dK=class extends Jr{constructor(t){super(Hi.ZUt),this.IRt=t}};Qi(),r();var fK=class extends Jr{constructor(t){super(Hi.HUt),this.IRt=t}},gK="HlsModelUpdater",Hi=function(t){return t.ZUt="XUt",t.HUt="qUt",t}({}),_K=class extends tu{get KUt(){return this.JUt}get $Ut(){return this.tQt}get Tr(){return this.tbt}get iQt(){return this.eQt}async sQt(t){const i=this.tbt.WUt;if(!i)throw new b("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.yo(new ms);const e=await this.nQt(i,{},2,!0,t),s=e.wRt;if(!JX(s)&&!$X(s))throw new b("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");JX(s)||ta.Hj(gK,"Detected media playlist only HLS stream."),this.rQt(s),e.oQt&&(this.tQt=!0,await this.hQt(t)),this.JUt=!0}async aQt(t,i,e,s){const n=this.tbt.YUt(t);if(!n)throw new b("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={nzt:i,GBt:e,ZC:pK(n)},o=io(x.max(1,3*t.wRt.RBt));try{await this.uQt(n,r,s,o)}catch(t){throw V(t),this.cQt(n),t}}lQt(t,i){const e=this.tbt.YUt(t);if(!e)throw new b("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={nzt:void 0,GBt:void 0,ZC:pK(e)},n=io(x.max(1,3*t.wRt.RBt));return this.uQt(e,s,i,n)}dQt(t,i){return this.fQt.has(t.zL)||this.fQt.set(t.zL,new xh),Ao(this.fQt.get(t.zL).rM,i)}cQt(t){this.yo(new fK(t))}async uQt(t,i,e,s){const n=t.wRt.WRt(i);let r;try{r=(await this.nQt(n,i,0,this.tQt,e,s)).wRt}catch(i){throw V(i),t.wRt.QBt=Fe.Og(),i}if(!$X(r))throw new b("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.gQt&&t!==this.gQt&&!this.gQt.wRt.jBt)try{await this.lQt(this.gQt,e)}catch(i){V(i),this.gQt=t,this._Qt()}try{this.rQt(r,t)}catch(n){if(n instanceof Qq&&void 0!==i.ZC){const n=Ei({},i,{ZC:void 0});return this.uQt(t,n,e,s)}throw n}this.vQt(t),this.gQt=t}async nQt(t,i,e,s,n,r){if(ta.Hj(gK,"Loading HLS playlist at "+t+"."),s){const i=await this.wQt(t,n);if(void 0!==i)return{wRt:i,oQt:!0}}return{wRt:await this.mQt(t,i,e,n,r),oQt:!1}}async wQt(t,i){try{const e=await this.slt.Tot([t]);if(yi(i),void 0!==e)return jq(e.responseURL,{},e.data)}catch(t){V(t)}}async mQt(t,i,e,s,n){const r={zu:t,oI:Ee.ON,zI:this.ISt,xI:Ve.GET,YA:Rs.fI,ly:s,CI:n},o=await co((()=>this.pQt(r)),s,e);return jq(o.lI,i,o.rI)}async pQt(t){const i=await this.OQ.hI(t);return{rI:await i.UN(),lI:i.lI}}async hQt(t){yi(t);const i=[];for(const e of this.tbt.JRt)for(const s of e.rPt)i.push(this.AQt(s,t));await Promise.all(i)}async AQt(t,i){try{const e=await this.slt.Tot([t.wRt.Xyt]);yi(i),void 0===e||t.wRt.jBt||await this.lQt(t,i)}catch(t){V(t)}}_Qt(){for(const t of this.tbt.JRt)for(const i of t.rPt)i!==this.gQt&&void 0!==i.wRt.Vzt&&(i.wRt.jBt?this.vQt(i):i.wRt.nUt())}vQt(t){if(0!==t.wRt.Wot.length){if(!this.gQt)return this.gQt=t,void this.gQt.wRt.aUt(0,void 0);if(this.yQt(this.gQt),!this.yQt(t)&&void 0===t.wRt.Vzt){const i=this.bQt(t,this.gQt);ta.XRt(gK,"Assuming global timeline offset of "+i+"s for rendition "+t.wRt.Xyt+"."),t.wRt.aUt(i,void 0)}}}bQt(t,i){if(vK(t)){const e=t.wRt.Wot[0],s=i.wRt.Wot[0];return ta.XRt(gK,"Synchronizing by start of VOD: "+s.lB+" vs "+e.lB),s.lB-e.$zt}const e=function(t,i){let e=t.length-1,s=i.length-1;for(;e>=0&&s>=0;){const n=t[e],r=i[s];if(n.bzt>r.bzt)e--;else if(n.bzt<r.bzt)s--;else if(n.mzt){if(r.mzt)return{segment:n,referenceSegment:r};s--}else e--}return}(t.wRt.Wot,i.wRt.Wot);if(void 0!==e){const{segment:t,referenceSegment:i}=e;return ta.XRt(gK,"Synchronizing by start of discontinuity #"+i.bzt+": "+i.lB+" vs "+t.lB),i.lB-t.$zt}const s=mK(t.wRt.Wot);if(void 0!==s){const t=mK(i.wRt.Wot);if(void 0!==t){ta.XRt(gK,"Synchronizing by PDT:",t.Azt.toISOString()+" vs "+s.Azt.getTime());return t.lB-s.$zt-(t.Azt.getTime()-s.Azt.getTime())/1e3}}const n=wK(i),r=wK(t);var o;const h=null!=(o=t.wRt.Vzt)?o:0;return ta.XRt(gK,"Synchronizing by last segment:",n+" vs "+r),n-r+h}yQt(t){const i=this.tbt.YUt(t);if(!i)return!1;if(vK(i))return!1;const e=function(t,i){return wo(t,(t=>void 0!==t.kst&&i.uUt(t.bzt)))}(i.wRt.Wot,this.tbt.tP);if(void 0===e)return!1;if(i.wRt.YBt===e.bzt)return!0;const s=this.tbt.tP.mUt(e.kst,e).BB()-e.$zt;return ta.XRt(gK,"Synchronize by media timestamp: "+s+"s for rendition "+t.wRt.Xyt+"."),i.wRt.aUt(s,e.bzt),(void 0===this.gQt||void 0===this.gQt.wRt.YBt||this.gQt.wRt.YBt<e.bzt)&&(this.gQt=i),!0}rQt(t,i){var e;(this.tbt.qzt(t,i),$X(t)&&i)&&(this.eQt=i,this.yo(new dK(i)),null==(e=this.fQt.get(i.zL))||e.sM(),this.fQt.delete(i.zL));this.yo(new XV)}MQt(t,i){for(const e of this.tbt.JRt){const s=dl(e.tPt,(t=>t.wRt===i));void 0!==s&&void 0!==t.bxt&&(s.cht=nq(s.cht,t));const n=dl(e.$Rt,(t=>t.wRt===i));void 0!==n&&void 0!==t.Axt&&(n.cht=nq(n.cht,t)),e.Czt||void 0===s&&void 0===n||(e.cht=nq(e.cht,t))}}TQt(t,i){for(const e of this.tbt.JRt){const s=dl(e.tPt,(t=>t.wRt===i));void 0!==s&&void 0===t.bxt&&e.Bzt(s);const n=dl(e.$Rt,(t=>t.wRt===i));void 0!==n&&void 0===t.Axt&&e.Bzt(n)}}wy(){this.Bo(),this.tbt.wy(),this.fQt.forEach((t=>t.Ty())),this.fQt.clear()}constructor(t,i,e,s,n){super(),this.OQ=t,this.slt=i,this.ISt=e,this.JUt=!1,this.tQt=!1,this.gQt=void 0,this.eQt=void 0,this.fQt=gc(),this.tbt=new uK(s,n)}};function vK(t){return t.wRt.Tzt||t.wRt.Nzt===Rr.TPt}function wK(t){const i=t.wRt.Wot;return i[i.length-1].dB}function mK(t){return wo(t,(t=>void 0!==t.Azt))}function pK(t){if(void 0!==t.wRt.qPt&&!t.wRt.Tzt&&!(void 0===t.wRt.OBt||Fe.Og()/1e3-t.wRt.OBt>=t.wRt.qPt/2))return t.wRt.KPt?Uq.cBt:Uq.uBt}var AK=class{get nt(){return this.npt}JBt(t){if(0===t.wRt.Mzt.length)return;this.SQt||(this.SQt=this.cz.Wk(z.MQ,void 0,void 0,void 0,void 0,El.DATE_RANGE),this.npt.tt(this.SQt));Gq(this.SQt,t.wRt.Mzt,(i=>{var e;return null!=(e=t.wRt.zzt(i))?e:NaN}))}constructor(t,i){this.NQt=t=>{this.JBt(t.IRt)},this.NIt=t,this.cz=i,this.npt=new Uu,this.NIt.yn(Hi.ZUt,this.NQt)}};r();var yK=class extends Jr{constructor(){super(js.cRt)}};r(),r(),r();var bK=class{get IQt(){return this.H4}get TE(){return cU(this.Qht.TE,this.Qht.x3)}get Wot(){return this.eMt}get dpt(){return this.hpt}DQt(t){var i;return null==(i=this.EQt(t))?void 0:i.IRt}kQt(t){this.H4=t,this.LQt()}Cft(t,i,e,s,n,r){this.eMt.push({IRt:t,ilt:i,xQt:Mo.RP(n,r),CQt:Mo.RP(e,s)}),this.LQt()}EQt(t){return dl(this.eMt,(i=>i.CQt.gr(t)))}yct(t){return dl(this.eMt,(i=>i.ilt===t))}Ddt(t,i){return dl(this.eMt,(e=>e.IRt===t&&nK(e.ilt,i)))}I3(){const t=this.TE;t.V>0&&(this.hpt=t.jn(t.V-1))}LQt(){const t=this.Qht.TE;this.eMt=this.eMt.filter((i=>0!==t.Sn(i.CQt).V))}constructor(t){this.Qht=t,this.eMt=[],this.H4=void 0,this.hpt=void 0}},MK=class{get YA(){return this.Zp}get jQt(){return ou(this.Zp)}get OQt(){return this.zut}get RQt(){return this.PQt}get iLt(){return void 0!==this.zQt}BQt(){if(this.iLt)throw new b("Cannot perform new operation while BufferAppender is still busy")}jht(t){this.Qht!==t&&(this.BQt(),this.Qht=t,this.zut=new bK(t))}UQt(){return this.zQt?this.zQt.rM:Promise.resolve()}QQt(t){const i=this.zut.dpt;return void 0!==i&&this.FQt(t,i)}FQt(t,i){var e;const s=x.min(t,i);var n;return null!=(n=null==(e=this.zut.TE.fP().yP(this.RQt).CP(s))?void 0:e.gr(i))&&n}YQt(t){return this.zut.DQt(t)}Ty(){this.rN.Ty(),this.rN=new Wt}F4(t){this.BQt(),this.zQt=new xh;const i=i=>{this.GQt.VQt(t),this.WQt(i)};this.Y4(t,this.rN.ly).then(i,i)}async Y4(t,i){ta.XRt(eu,"Appending initializer",Mi(t.ZQt.Xyt)),await this.Qht.F4(t,i),ta.XRt(eu,"Appended initializer",Mi(t.ZQt.Xyt)),this.zut.kQt(t)}oft(t){this.BQt(),this.zQt=new xh;const i=i=>{this.GQt.VQt(t),this.WQt(i)};this.HQt(t,this.rN.ly).then(i,i)}async HQt(t,i){const e=t.IRt;if(void 0===e.wRt.cPt)throw new b("MediaBufferWrapper - Cannot append HLSAsset to "+this.Zp+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.zut.TE.hP,n=this.Qht.TE;ta.XRt(eu,"Appending",Mi(t.ZQt.Xyt)),await this.Qht.B4(t,i),ta.XRt(eu,"Appended",Mi(t.ZQt.Xyt),s,this.zut.TE.hP);const r=t.lB,o=r+t.ct,h=t.ZQt,a=h.lB;var u;const c=h.lB+(null!=(u=h.ct)?u:0);this.zut.Cft(e,h,r,o,a,c);const l=this.Qht.TE.yP(n),d=this.zut.Ddt(e,h);if(this.YA===Ri.NI)if(d)if(this.XQt(d))if(0===l.V){if(void 0===this.zut.yct(h)){const t=this.Qht.x3.Sn(new Mo([r,o]));this.PQt=this.PQt.pP(t)}}else{const t=l.Cn(0),i=new Mo([t,o]);if(this.PQt=this.PQt.yP(i),t>r){const i=this.Qht.x3.Sn(new Mo([r,t]));this.PQt=this.PQt.pP(i)}}else{const t=l.V>0&&l.Cn(0)<r?l.Cn(0):r;this.PQt=this.PQt.yP(new Mo([t,o]))}else if(0===l.V){const t=this.Qht.x3.Sn(new Mo([r,o]));this.PQt=this.PQt.pP(t)}else{var f;if(t.ZQt.Gzt)return;const i=l.Cn(0),e=null==(f=n.CP(r))?void 0:f.jn(0),s=e&&e>r?e:r;if(i>s){const t=this.Qht.x3.Sn(new Mo([s,l.Cn(0)]));this.PQt=this.PQt.pP(t)}}t.ZQt.Zzt&&this.zut.I3()}XQt(t){const i=t.CQt,e=i.Cn(0),s=i.jn(i.V-1),n=i.uP(0),r=i.lP(i.V-1);return this.PQt.MP(e,s,n,r)}constructor(t,i,e,s,n){this.zQt=void 0,this.rN=new Wt,this.PQt=Mo.PP(),this.WQt=t=>{this.zQt&&(t?jx(t)&&this.jQt?this.qQt.JK(this.Qht.TE.jP)?this.zQt.sM():this.zQt.nM(t):Tu(t)?this.zQt.sM():this.zQt.nM(t):this.zQt.sM(),this.zQt=void 0)},this.Zp=t,this.GQt=e,this.Qht=i,this.zut=s,this.qQt=n}};r(),r();var TK=class{async KQt(t,i,e,s){const n=await this.JQt(i,s);return await this.$Qt.KQt(t,n,e)}async JQt(t,i){var e;if((null==(e=this.tFt)?void 0:e.zu)!==t){ta.XRt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const e=await this.OQ.hI({zu:t,oI:Ee.xN,xI:Ve.GET,ly:i,YA:Rs.vI,OI:ul.TI,zI:this.ISt}),s=await e.FN(),n=new T(s);this.tFt={zu:t,rI:n}}return this.tFt.rI}constructor(t,i,e){this.$Qt=t,this.OQ=i,this.ISt=e,this.tFt=void 0}};r(),Qi();var SK=class{async hI(t,i,e,s,n){const r=await this.iFt(t,i,e,Ee.xN,s,n),o=await r.FN(n);return{httpStatusCode:r.nI,response:new T(o)}}async eFt(t,i,e,s,n){return(await this.iFt(t,i,e,Ee.jN,s,n)).YN(n)}async iFt(t,i,e,s,n,r){let o;t.SMt&&(o=KX(t.SMt.Cn,t.SMt.V),0===o[0]&&o[1]===jt&&(o=void 0));const h=o?{Range:"bytes="+o[0]+"-"+o[1]}:void 0,a=new Gs({zu:t.zD,oI:s,aI:h,zI:this.ISt,xI:Ve.GET,YA:i,OI:e,RI:this.Ict,QI:s===Ee.jN,BI:n,ly:r});try{const i=await this.slt.Eot(t.zD,o);if(yi(r),void 0!==i)return null==n||n(i.buffer.byteLength,i.buffer.byteLength),new qt({hI:a,oI:a.oI,rI:i.buffer})}catch(t){V(t)}return await co((()=>Ao(this.OQ.hI(a),a.ly)),r,this.qrt)}constructor(t,i,e,s,n=2){this.OQ=t,this.slt=i,this.Ict=e,this.ISt=s,this.qrt=n}};r(),bs(),Qi();var NK=class{sFt(){return this.nFt.wRt.XPt}async rFt(t,i,e){if(!this.sFt())throw new b("Could not perform blocking playlist update.");const s=this.oFt,n={nzt:t,GBt:i};return void 0!==s&&function(t,i,e){if(t.nzt===i.nzt){if(t.GBt===i.GBt)return!0;if(0===t.GBt&&void 0===i.GBt)return!0}if(t.nzt===i.nzt+1&&0===t.GBt&&void 0!==i.GBt){const t=e.yct(i.nzt);if(t&&t.Xyt&&i.GBt>=t.wzt.length)return!0}return!1}(s,n,this.nFt.wRt)||(await this.hFt(),this.aFt(n)),this.NIt.dQt(this.nFt,e)}uFt(t){return this.aFt(),this.NIt.dQt(this.nFt,t)}aFt(t){if(!this.cFt&&!this.lFt){const i=()=>{this.cFt=void 0};this.cFt=this.dFt(t,this.fFt.ly).then(i,i)}}async hFt(){this.cFt&&(this.fFt.Ty(),this.fFt=new Wt,await this.cFt.catch(Bn),this.cFt=void 0)}async dFt(t,i){let e=t;for(;;){if(yi(i),this.nFt.wRt.Tzt&&this.nFt.wRt.jBt)return;null!=e||(e=this.gFt()),this.oFt=e;try{if(e)await this.NIt.aQt(this.nFt,e.nzt,e.GBt,i);else{const t=Fe.Og()-this.An,e=1e3*this.nFt.wRt.RBt;t<e&&await Dt(e-t,i),await this.NIt.lQt(this.nFt,i)}}catch(t){throw this.oFt=void 0,V(t),this.NIt.cQt(this.nFt),t}e=void 0,this.An=Fe.Og()}}gFt(){const t=this.nFt.wRt;if(!t.XPt||t.Tzt||0===t.Wot.length)return;const i=t.Wot[t.Wot.length-1];return i.Xyt?{nzt:i.nzt+1,GBt:t.CBt?0:void 0}:{nzt:i.nzt,GBt:i.wzt.length}}wy(){this.lFt=!0,X(this.hFt())}constructor(t,i){this.cFt=void 0,this.fFt=new Wt,this.An=-1/0,this.oFt=void 0,this.lFt=!1,this.NIt=t,this.nFt=i,this.aFt()}};r();var IK=function(t){return t[t.pPt=0]="pPt",t[t.APt=1]="APt",t[t.gI=2]="gI",t[t._I=3]="_I",t}({});r(),r();var ws="AssetExtractor",DK=class{_Ft(t,i,e){let s=i;for(const i of this.vFt){if(s>=t)return!0;if(s<i.Cn)return!1;if(s<i.jn){if(e<=i.jn)return!0;s=i.jn}}return s>=t}wFt(t,i){const e=[];for(let s=0;s<this.vFt.length;s+=1){const n=this.vFt[s],r=t-n.Cn,o=n.rI.length,h=x.min(o,x.max(r,0)),a=x.max(0,i+r),u=vi(n.rI,h,a);u.length&&(s=this.mFt(s,n,t,h,a),e.push(u))}return e}pFt(t,i){this.vFt.push({Cn:t,jn:t+i.length,rI:i})}mFt(t,i,e,s,n){let r=t;this.vFt.splice(r,1),r-=1,i.Cn<e&&(r+=1,this.vFt.splice(r,0,{Cn:i.Cn,jn:e,rI:vi(i.rI,0,s)}));const o=e+n-s;return o<i.jn&&(r+=1,this.vFt.splice(r,0,{Cn:o,jn:i.jn,rI:vi(i.rI,n)})),r}constructor(){this.vFt=[]}},EK=class{get AFt(){return this.yFt}async bFt(){const t=await this.Wg.read();if(t.done)throw this.yFt=1/0,new b("No more data can be read from the given stream.");return this.yFt+=t.value.length,t.value}async MFt(t){await this.Wg.cancel(t)}constructor(t,i){this.yFt=i,this.Wg=t.getReader()}},kK=class{TFt(){this.SFt.sM(),this.SFt=new xh}NFt(t){const{NMt:i,IMt:e}=xK(this.tBt.SMt),s=this.IFt.wFt(i,e-i);ta.XRt(ws,"Collected "+s.length+" chunks.");for(const i of s)t.enqueue(i)}async readAndSliceOutAssetBytes(t){await this.DFt.rM;const{NMt:i,IMt:e}=xK(this.tBt.SMt);try{for(;;){const s=this.Wg.AFt,n=await this.Wg.bFt(),r=n.length;ta.XRt(ws,"Read "+r+" at "+s+" for extraction of "+Mi(this.tBt));const o=x.min(s+r,i)-s;if(!(o>0)){if(s+r<=e)return ta.XRt(ws,"Extracting the read data range for extraction of "+Mi(this.tBt)),t.enqueue(n),this.TFt(),X(this.readAndSliceOutAssetBytes(t));{const i=e-s,o=vi(n,0,i),h=vi(n,i);return o.length>0&&(ta.XRt(ws,"Extracting "+o.length+" bytes for extraction of "+Mi(this.tBt)),t.enqueue(o)),ta.XRt(ws,"Of the read "+r+" bytes, the last "+h.length+" will be stored locally for extraction of "+Mi(this.tBt)),this.IFt.pFt(s+i,h),ta.XRt(ws,"Extraction of "+Mi(this.tBt)+" completed as the entire request has been fulfilled."),this.EFt(t),void(this.kFt&&(ta.XRt(ws,"Aborting stream upstream as no more bytes are needed from "+Mi(this.tBt)+"."),await this.Wg.MFt("AssetExtraction - AbortOnEnd")))}}{const i=vi(n,0,o),e=vi(n,o);if(ta.XRt(ws,"Of the read "+r+" bytes, the first "+o+" will be stored locally for extraction of "+Mi(this.tBt)),this.IFt.pFt(s,i),e.length>0)return ta.XRt(ws,"Extracting "+e.length+" bytes for extraction of "+Mi(this.tBt)),t.enqueue(e),this.TFt(),X(this.readAndSliceOutAssetBytes(t))}}}catch(i){ta.XRt(ws,"Extraction of "+Mi(this.tBt)+" completed as the entire source stream has been read."),this.EFt(t)}}EFt(t){t.close(),this.TFt(),this.LFt.sM()}start(t){ta.XRt(ws,"Preparing to push all collected data to controller for extraction of "+Mi(this.tBt)),this.NFt(t),ta.XRt(ws,"Collected data pushed to controller for extraction of "+Mi(this.tBt));const{IMt:i}=xK(this.tBt.SMt);this.Wg.AFt>=i?(ta.XRt(ws,"Extraction of "+Mi(this.tBt)+" completed as the entire request has been fulfilled."),this.EFt(t)):(ta.XRt(ws,"Continuing read from original stream for extraction of "+Mi(this.tBt)),X(this.readAndSliceOutAssetBytes(t)))}get xFt(){return this.LFt.rM}pull(){return this.DFt.sM(),this.DFt=new xh,this.SFt.rM}constructor(t,i,e,s){this.LFt=new xh,this.tBt=t,this.Wg=i,this.IFt=e,this.kFt=s,this.DFt=new xh,this.SFt=new xh}},LK=class{Jz(t){if(!iq(this.tBt,t))return!1;const{NMt:i,IMt:e}=xK(t.SMt);return this.IFt._Ft(this.CFt.AFt,i,e)}async bmt(t,i){void 0===i&&(i=!1);const e=this.CFt,s=this.IFt;if(ta.Hj(ws,"Extracting data from "+Mi(t)+" out of "+Mi(this.tBt)),this.jFt&&(ta.XRt(ws,"Awaiting previous extraction before extracting "+Mi(t)+" out of "+Mi(this.tBt)),await this.jFt),!this.Jz(t))throw new b("The extractor does not contain the data requested");const n=new kK(t,e,s,i);return this.jFt=n.xFt,new bc(n)}constructor(t,i){this.tBt=i;const{NMt:e}=xK(this.tBt.SMt);this.CFt=new EK(t,e),this.IFt=new DK}};function xK(t){if(t){const i=t.Cn;return{NMt:i,IMt:void 0!==t.V?i+t.V:jt}}return{NMt:0,IMt:jt}}bs();var CK=class{async $n(){const t=await this.OFt.eFt(this.tBt,Rs._I,ul.dI,void 0,this.rN.ly);return new LK(t,this.tBt)}Jz(t){return iq(this.tBt,t)}async bmt(t,i){void 0===i&&(i=!1);const e=await this.Ept;return await Ao(e.bmt(t,i),this.rN.ly)}Ty(){this.Ept.catch(Bn),this.rN.Ty()}constructor(t,i){this.tBt=t,this.OFt=i,this.rN=new Wt,this.Ept=this.$n()}};Qi(),r();var jK=class extends Jr{constructor(t){super(QK.RFt),this.RI=t}};r();var OK=class extends Jr{constructor(t,i,e,s,n,r,o){super(QK.PFt),this.uri=t,this.zFt=i,this.RI=e,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.BFt=r,this.httpStatusCode=o}};function RK(t,i,e){const s=eK(e)?e:e.Xzt;if(i.uUt(s.bzt)){if(void 0!==e.kst)return i.mUt(e.kst,e).BB();if(e!==s&&void 0!==s.kst){const t=i.mUt(s.kst,s).BB();return e.lB+(t-s.lB)}}const n=t.wRt.yct(s.nzt-1);if(void 0!==n&&i.uUt(n.bzt)){if(n.wzt.length>0){const t=n.sBt(n.wzt.length-1);if(void 0!==t.kst){const s=i.mUt(t.kst,t).BB();return e.lB+(s-t.lB)}}if(void 0!==n.kst){const t=i.mUt(n.kst,n).BB();return e.lB+(t-n.lB)}}const r=t.wRt.yct(s.nzt+1);if(void 0!==r&&i.uUt(r.bzt)){if(r.wzt.length>0){const t=r.sBt(0);if(void 0!==t.kst){const s=i.mUt(t.kst,t).BB();return e.lB+(s-t.lB)}}if(void 0!==r.kst){const t=i.mUt(r.kst,r).BB();return e.lB+(t-r.lB)}}return e.lB}function PK(t){return void 0!==t.kst}function zK(t,i,e,s){for(let n=i;n<t.length;n++){const i=t[n];if(i.bzt!==e)break;if(PK(i)){if(s(i,n))break}}}function BK(t,i,e,s){for(let n=i;n>=0;n--){const i=t[n];if(i.bzt!==e)break;if(PK(i)){if(s(i,n))break}}}r();var UK="HlsPlaylistDownloader",QK=function(t){return t.RFt="segmentdownloadprogress",t.PFt="segmentdownloaded",t}({}),FK=class extends tu{UFt(t){this.QFt.wy(),this.QFt=new NK(this.NIt,t),this.iLt?this.FFt=t:(this.nFt=t,this.YFt=0,this.VFt=void 0,this.GFt=void 0)}get iLt(){return void 0!==this.WFt}UQt(){return this.WFt?this.WFt.rM:Promise.resolve()}ZFt(){return this.GQt.ZFt()}HFt(t){this.GQt.HFt(t)}Ty(){var t,i,e;this.XFt.Ty(),this.XFt=new Wt,null==(t=this.qFt)||t.Ty(),this.qFt=void 0,null==(i=this.KFt)||i.Ty(),null==(e=this.JFt)||e.Ty(),this.KFt=void 0,this.JFt=void 0,this.YFt=0,this.VFt=void 0,this.GFt=void 0}wy(){this.QFt.wy()}get IRt(){var t;return null!=(t=this.FFt)?t:this.nFt}get NLt(){if(!this.nFt.wRt.Tzt||void 0===this.VFt)return!1;const t=this.nFt.wRt.yct(this.VFt);if(!t.Zzt)return!1;if(void 0!==this.GFt){if(!t.sBt(this.GFt).Zzt)return!1}return!0}$Ft(t){const i=this.nFt.wRt.WBt(t);if(!i)return!1;if(void 0!==this.VFt){const e=i.nzt===this.VFt;return void 0!==this.GFt?i.nBt(t)===i.sBt(this.GFt)&&e:e}return!1}tYt(t){let i;if(void 0===this.VFt||t<this.YFt-1e-6)i=this.iYt(t);else if(i=this.eYt(this.VFt,this.GFt),void 0!==i){const[e,s]=i,n=RK(this.nFt,this.NIt.Tr.tP,null!=s?s:e),r=3*this.nFt.wRt.cPt;x.abs(n-t)>=r&&(i=this.iYt(t))}else if(this.nFt.wRt.Tzt){if(this.nFt.wRt.yct(this.VFt).Zzt&&(i=this.iYt(t),void 0!==i&&i[0].nzt===this.VFt))return}if(i){this.YFt=t;const[e,s]=i;return 0===(null==s?void 0:s.Kzt)&&void 0!==e.ct?[e,void 0]:[e,s]}}iYt(t){let i,e;const s=this.nFt.wRt.Wot;if(0===s.length)return;const n=this.NIt.Tr.tP,r=H.BU(t),o=function(t,i,e){const s=t.wRt.Wot;if(0===s.length)return;const n=t.wRt.ZBt(e.BB());if(!i.uUt(n.bzt))return;const r=n.nzt-s[0].nzt,o=n.bzt;let h,a,u,c=0;if(BK(s,r,o,((t,i)=>(h=t,c=i,!0))),void 0===h&&(zK(s,r+1,o,((t,i)=>(h=t,c=i,!0))),void 0===h))return;return i.mUt(h.kst,h).VB(e)?(a=h,zK(s,c+1,o,(t=>i.mUt(t.kst,t).UB(e)?(u=t,!0):(a=t,!1)))):(u=h,BK(s,c-1,o,(t=>i.mUt(t.kst,t).VB(e)?(a=t,!0):(u=t,!1)))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.nFt,n,r);let h;if(void 0!==o){const[t,i]=o,e=n.mUt(t.kst,t),s=n.mUt(i.kst,i),a=r.qB(e).BB()/s.qB(e).BB()*(i.lB-t.lB);h=t.lB+a}else h=t;const a=s[s.length-1];return a.dB<=h?(i=a,e=a.oBt(h)):s[0].lB>h?(i=s[0],e=i.sBt(0)):(i=this.nFt.wRt.WBt(h),e=null==i?void 0:i.oBt(h)),i?[i,e]:void 0}eYt(t,i){let e,s;if(e=this.nFt.wRt.yct(t),e&&void 0!==i){if(0===e.wzt.length)return[e,void 0];s=e.sBt(i+1)}return void 0!==e&&void 0!==s||(e=this.nFt.wRt.yct(t+1),s=null==e?void 0:e.sBt(0)),e?[e,s]:void 0}BQt(){if(this.iLt)throw new b("Cannot perform new operation while PlaylistDownloader is still busy")}sYt(t){this.BQt(),this.WFt=new xh,this.nYt(t,this.XFt.ly).then(this.rYt,this.rYt)}oYt(){this.QFt.aFt()}async nYt(t,i){if(this.nFt.wRt.Tzt)return;let e=this.tYt(t);for(!e&&this.QFt.sFt()&&void 0!==this.VFt&&(await this.QFt.rFt(void 0===this.GFt?this.VFt+1:this.VFt,void 0!==this.GFt?this.GFt+1:void 0,i),e=this.tYt(t)),!e&&this.QFt.sFt()&&void 0!==this.VFt&&(await this.QFt.rFt(this.VFt+1,0,i),e=this.tYt(t));!e;){ta.Hj(UK,"No next segment / part available, need to update playlist before continuing."),await this.QFt.uFt(i);const s=this.IRt.wRt.Wot;s[0].lB>t&&(this.GFt=void 0,this.VFt=void 0);s[s.length-1].nzt<this.VFt&&(this.GFt=void 0,this.VFt=void 0),e=this.tYt(t)}}hYt(){return this.GQt.aYt()}uYt(){this.BQt();try{const t=this.nFt.wRt.HBt(tq.pPt);t&&this.cYt(t);const i=this.nFt.wRt.HBt(tq.APt);i&&this.lYt(i)}catch(t){throw V(t),this.nFt.wRt.QBt=Fe.Og(),this.NIt.cQt(this.nFt),t}}cYt(t){this.JFt&&!this.JFt.Jz(t.Xyt)&&(this.JFt.Ty(),this.JFt=void 0),this.JFt||(this.JFt=new CK(t.Xyt,this.OFt))}lYt(t){this.KFt&&!this.KFt.Jz(t.Xyt)&&(this.KFt.Ty(),this.KFt=void 0),this.KFt||(this.KFt=new CK(t.Xyt,this.OFt))}Act(t,i,e){this.BQt(),ta.Hj(UK,"Starting download of segment "+Mi(t.Xyt)+" and part "+(null==i?void 0:i.Kzt)),this.WFt=new xh,this.dYt(t,i,e,this.XFt.ly).catch((t=>{throw V(t),this.nFt.wRt.QBt=Fe.Og(),this.NIt.cQt(this.nFt),t})).then(this.rYt,this.rYt)}async dYt(t,i,e,s){let n;if(t.pzt){var r,o;if(!e||!eq(e.ZQt.Xyt,null==(r=t.pzt)?void 0:r.Xyt)||t.bzt!==e.bzt){var h;null==(h=this.qFt)||h.Ty(),this.qFt=new xh;const i=this.fYt(t.pzt,t,s).then((()=>{this.qFt=void 0}));this.qFt.Sy(i)}n=null==(o=this.qFt)?void 0:o.rM}await this.gYt(t,i,n,s)}async fYt(t,i,e){const s=await this._Yt(t,i,e),n=s.pzt.rI.rI.byteLength;this.GQt.vYt(s),this.yo(new OK(s.pzt.ZQt.Xyt,s.YA,this.Zp,i.nzt,s.IRt.zL,n,s.pzt.Elt)),ta.XRt(eu,"Download initializer complete",Mi(t.Xyt))}async gYt(t,i,e,s){const n=await this.wYt(t,i,s),r=n.ilt.rI.rI.byteLength;var o;e&&await Ao(e,s),this.GQt.vYt(n),this.yo(new OK(n.ilt.ZQt.Xyt,n.YA,this.Zp,t.nzt,n.IRt.zL,r,n.ilt.Elt)),ta.XRt(eu,"Download complete",Mi(null!=(o=null==i?void 0:i.Xyt)?o:t.Xyt))}async wYt(t,i,e){let s;if(i){if(this.KFt)if(this.KFt.Jz(i.Xyt)){const t=await this.KFt.bmt(i.Xyt),n=await Wy(t,e),r=new T(n);s=VK(i,await this.KQt(r,i.gzt,e),200)}else this.KFt.Ty(),this.KFt=void 0;s||(ta.XRt(eu,"Start download",Mi(i.Xyt)),s=await this.mYt(i,e))}else ta.XRt(eu,"Start download",Mi(t.Xyt)),s=await this.Mct(t,e);return this.VFt=t.nzt,this.GFt=null==i?void 0:i.Kzt,{YA:"ilt",ilt:s,IRt:this.nFt,bzt:t.bzt}}async _Yt(t,i,e){let s;if(this.JFt){var n;if(this.JFt.Jz(t.Xyt)){const n=await Ao(this.JFt.bmt(t.Xyt),e),r=await Wy(n,e),o=new T(r);s=YK(t,i,await this.KQt(o,t.vzt?[t.vzt]:[],e),200)}ta.Hj(UK,"MAP is required for segment, downloading MAP data."),null==(n=this.JFt)||n.Ty(),this.JFt=void 0}return s||(ta.XRt(eu,"Start download",Mi(t.Xyt)),s=await this.pYt(t,i,e)),{YA:"pzt",pzt:s,IRt:this.nFt,lB:i.lB,bzt:i.bzt,gzt:i.gzt}}async pYt(t,i,e){const{response:s,httpStatusCode:n}=await this.OFt.hI(t.Xyt,Rs.gI,ul.wI,void 0,e),r=t.vzt?[t.vzt]:[];return YK(t,i,await this.KQt(s,r,e),n)}async Mct(t,i){if(!t.Xyt)throw new b("Internal error: attempted to download an incomplete segment");let e,s;try{this.AYt(t);const n=await this.OFt.hI(t.Xyt,Rs.gI,ul.dI,this.yYt,i);e=n.response,s=n.httpStatusCode}finally{this.bYt()}return function(t,i,e){return{rI:{rI:i,YA:Me.v$},YA:IK.gI,Elt:e,ZQt:t,bzt:t.bzt}}(t,await this.KQt(e,t.gzt,i),s)}async mYt(t,i){let e,s;try{this.AYt(t);const n=await this.OFt.hI(t.Xyt,Rs.gI,ul.dI,this.yYt,i);e=n.response,s=n.httpStatusCode}finally{this.bYt()}return VK(t,await this.KQt(e,t.gzt,i),s)}async KQt(t,i,e){const s=dl(i,(t=>t.xI===cn.yPt));return s?s.Xyt&&s.GPt?await this.MYt.KQt(t,s.Xyt,s.GPt,e):(ta.lt(UK,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}AYt(t){var i,e,s;this.TYt=t,this.SYt=0,this.NYt=Fe.Og(),this.IYt=0,this.DYt=null!=(s=null==(e=t.Xyt)||null==(i=e.SMt)?void 0:i.V)?s:0}bYt(){this.TYt=void 0,this.SYt=0,this.NYt=0,this.IYt=0,this.DYt=0}EYt(){if(void 0!==this.TYt)return{ilt:this.TYt,kYt:this.IYt,LYt:this.DYt,xYt:Fe.Og()-this.NYt}}CYt(t){return void 0!==this.TYt&&(0!==this.SYt&&(!(this.DYt>0&&this.IYt>=this.DYt)&&!(t-this.SYt<500)))}constructor(t,i,e,s,n,r,o,h){super(),this.FFt=void 0,this.WFt=void 0,this.TYt=void 0,this.SYt=0,this.NYt=0,this.IYt=0,this.DYt=0,this.XFt=new Wt,this.qFt=void 0,this.YFt=0,this.VFt=void 0,this.GFt=void 0,this.JFt=void 0,this.KFt=void 0,this.rYt=t=>{this.FFt&&(this.nFt=this.FFt,this.FFt=void 0,this.YFt=0,this.VFt=void 0,this.GFt=void 0),this.WFt&&(t&&!Tu(t)?this.WFt.nM(t):this.WFt.sM(),this.WFt=void 0)},this.yYt=(t,i)=>{this.IYt=t,t>0&&0===this.SYt&&(this.SYt=Fe.Og()),void 0!==i&&(this.DYt=i),this.yo(new jK(this.Zp))},this.Zp=t,this.NIt=e,this.GQt=s,this.nFt=i,this.QFt=new NK(e,i),this.MYt=new TK(o,n,h),this.OFt=new SK(n,r,function(t){switch(t){case Oe.NI:return Pc.NI;case Oe.SI:return Pc.SI;case Oe.AQ:case Oe.mPt:return Pc.ON;default:return Pc.dI}}(i.YA),h)}};function YK(t,i,e,s){return{rI:{rI:e,YA:Me.v$},YA:IK.pPt,Elt:s,ZQt:t,bzt:i.bzt}}function VK(t,i,e){return{rI:{rI:i,YA:Me.v$},Elt:e,YA:IK.APt,ZQt:t,bzt:t.Xzt.bzt}}r();var GK=class{get IQt(){return this.jYt}get OYt(){const t=[];for(const e of this.RYt)if("ilt"===e.YA){const s=e.ilt.ZQt,n=RK(e.IRt,this.OUt,s);var i;t.push({ilt:s,IRt:e.IRt,lB:n,dB:n+(null!=(i=s.ct)?i:0)})}return t}get PYt(){const t=[];return this.zYt.forEach((i=>{for(const e of i.BYt)"ilt"===e.YA&&t.push({ilt:e.ZQt,IRt:e.IRt,lB:e.lB,dB:e.lB+e.ct})})),t}vYt(t){"pzt"===t.YA&&(this.jYt=t.pzt),this.RYt.push(t),this.UYt&&(this.UYt.sM(),this.UYt=void 0)}ZFt(){return this.RYt[0]}HFt(t){ra(this.RYt,t)}aYt(){return null!=this.UYt||(this.UYt=new xh),this.UYt.rM}QYt(t){this.FYt(t.Fut).QYt(t)}YYt(t){return this.FYt(t).YYt()}VQt(t){this.FYt(t.Fut).VQt(t)}VYt(t){var i;null==(i=this.zYt.get(t))||i.wy()}GYt(t){return this.FYt(t).GYt()}FYt(t){if(this.zYt.has(t))return this.zYt.get(t);{const i=new WK;return this.zYt.set(t,i),i}}eM(){this.WYt(),this.ZYt()}WYt(){this.jYt=void 0,nt(this.RYt)}ZYt(){this.zYt.forEach((t=>t.eM()))}wy(){this.zYt.forEach((t=>t.wy())),this.zYt.clear(),this.eM(),this.UYt&&(this.UYt.Ty(),this.UYt=void 0)}constructor(t){this.RYt=[],this.zYt=ll(),this.UYt=void 0,this.jYt=void 0,this.OUt=t}},WK=class{get BYt(){return this.HYt}QYt(t){this.HYt.push(t),this.XYt&&(this.XYt.sM(),this.XYt=void 0)}YYt(){return this.HYt[0]}VQt(t){ra(this.HYt,t)}GYt(){return null!=this.XYt||(this.XYt=new xh),this.XYt.rM}eM(){nt(this.HYt)}wy(){this.eM(),this.XYt&&(this.XYt.Ty(),this.XYt=void 0)}constructor(){this.HYt=[],this.XYt=void 0}};r();var ZK=1e-6,HK=class{get TE(){return this.QDt}get x3(){return this.FDt}async F4(t,i){const e=t.rI.rI;if(this.qYt(e),this.KYt.YA===El.TTML){this.OUt.uUt(t.bzt)||await Ao(this.OUt.lUt(t.bzt),i);const s=this.JYt(e,t.bzt);for(const t of s)this.KYt.RQ(t)}}async B4(t,i){if(void 0===t.rI)return;const e=t.lB,s=e+t.ct;this.QDt=this.QDt.pP(Mo.RP(e,s)).mP(ZK),this.O3(t.$Yt,t.tVt),this.R3(e,s),this.OUt.uUt(t.bzt)||await Ao(this.OUt.lUt(t.bzt),i),this.Q4(t.rI.rI,t.bzt,t.ZQt)}Q4(t,i,e){let s;this.qYt(t),s=this.KYt.YA===El.WEBVTT?this.iVt(t,e):this.JYt(t,i);for(const t of s)this.KYt.RQ(t)}iVt(t,i){const e=PN(t),s=e.L;var n;const r=null!=(n=e.aQ)?n:{uQ:H.sU,lh:H.sU};for(const t of s){const e=H.BU(t.lB).qB(r.lh).Kz(r.uQ),s=this.OUt.mUt(e,i).BB(),n=s+(t.dB-t.lB);t.kB(s,n)}return s}JYt(t,i){const e=this.OUt.wUt(i).BB();return AI(t,this.KYt,{sQ:0,nQ:1/0,rQ:e},zo.APPLICATION_MP4)}qYt(t){this.KYt.YA===El.DEFAULT&&(this.KYt.YA=this.eVt(t)?El.WEBVTT:El.TTML)}eVt(t){return HN(am(Zo(Al(t),0,x.min(t.byteLength,16)),new da))}O3(t,i){this.FDt=this.FDt.pP(Mo.RP(t,i)).mP(ZK)}R3(t,i){this.FDt=this.FDt.yP(Mo.RP(t,i))}constructor(t,i){this.QDt=Mo.PP(),this.FDt=Mo.PP(),this.KYt=t,this.OUt=i}};r(),r(),r();var XK=class extends Jr{constructor(t,i){super(Ss.sVt),this.IRt=t,this.cht=i}};r();var qK=class extends Jr{constructor(t){super(Ss.nVt),this.IRt=t}};r();var KK=class extends Jr{constructor(t,i){super(Ss.rVt),this.IRt=t,this.vgt=i}};r();var JK=class extends Jr{constructor(t,i){super(Ss.oVt),this.IRt=t,this.hVt=i}},Ss=function(t){return t.sVt="aVt",t.rVt="uVt",t.oVt="cVt",t.nVt="lVt",t}({}),$K=class extends tu{get dVt(){return this.fVt}gVt(t){for(const i of this.fVt)Qa(t,i)||this.GQt.VYt(i);this.fVt=t}get iLt(){return void 0!==this._Vt}UQt(){var t,i;return null!=(i=null==(t=this._Vt)?void 0:t.rM)?i:Promise.resolve()}BQt(){if(this.iLt)throw new b("Cannot perform new operation while transmuxer is still busy")}vVt(t,i){}wVt(t){this.BQt(),this._Vt=new xh;const i=i=>{this.mVt(t,i)};this.pVt(t,this.rN.ly).then(i,i)}AVt(t){this.BQt(),this._Vt=new xh;const i=i=>{this.mVt(t,i)};this.yVt(t,this.rN.ly).then(i,i)}mVt(t,i){this._Vt&&(!i||Tu(i)||function(t){return t instanceof rK}(i)?(Tu(i)||this.GQt.HFt(t),this._Vt.sM(),this._Vt=void 0):this._Vt.nM(i))}bVt(t,i){this.yo(new XK(t,i))}MVt(t,i){this.yo(new KK(t,i))}TVt(t,i,e){sK(i)&&this.yo(new JK(t,e))}SVt(t){this.yo(new qK(t))}QYt(t){Qa(this.fVt,t.Fut)&&this.GQt.QYt(t)}NVt(t){return this.GQt.YYt(t)}VQt(t){this.GQt.VQt(t)}IVt(t){return this.GQt.GYt(t)}Ty(){this.rN.Ty(),this.rN=new Wt}constructor(t,i,e){super(),this._Vt=void 0,this.rN=new Wt,this.GQt=t,this.OUt=i,this.fVt=e}};function tJ(t,i){return sK(t)?0:x.min(t.lB,i)}function iJ(t,i){var e;return x.max(t.lB,i)+(null!=(e=t.ct)?e:0)}var eJ=class extends $K{pVt(t,i){yi(i);const e={YA:"zLt",rI:t.pzt.rI,Fut:this.dVt[0],bzt:t.bzt,DVt:{cht:"",gzt:t.gzt},lB:t.lB,IRt:t.IRt,ZQt:t.pzt.ZQt};return this.QYt(e),Promise.resolve()}async yVt(t,i){yi(i);const e=t.ilt.ZQt;let s;void 0!==e.kst?(this.OUt.uUt(t.bzt)||await Ao(this.OUt.lUt(t.bzt),i),s=this.OUt.mUt(e.kst,e).BB()):s=e.lB;const n=tJ(e,s),r=iJ(e,n);var o;const h={YA:"ilt",rI:t.ilt.rI,Fut:this.dVt[0],$Yt:n,tVt:r,lB:s,ct:null!=(o=e.ct)?o:0,rQ:0,bzt:t.bzt,IRt:t.IRt,ZQt:t.ilt.ZQt};this.QYt(h)}constructor(t,i,e){super(t,i,[e])}};function sJ(t,i){let e=Mo.PP();for(const s of t){let n=s.lB;if(s.IRt.wRt.Tzt&&sK(s.ilt))n=0;else{const e=t=>s.IRt===t.IRt&&nK(t.ilt,s.ilt),r=dl(t,e);if(void 0!==r)n=x.min(n,r.dB);else{const t=dl(i,e);void 0!==t&&(n=x.min(n,t.CQt.jn(0)))}}e=e.pP(Mo.RP(n,s.dB))}return e}r();var nJ=.001,rJ=class{get EVt(){return this.kVt}get IRt(){return this.LVt.IRt}UFt(t){this.LVt.UFt(t)}get iLt(){return this.LVt.iLt||this.xVt.iLt||this.kVt.some((t=>t.iLt))}CVt(t){const i=t.slice();for(let t=this.kVt.length-1;t>=0;t--){const e=this.kVt[t];if(!e.jQt)throw new b("Invalid state");const s=Kv(i,(t=>t.YA===e.YA));s>=0?(e.jht(i[s]),Mn(i,s)):Mn(this.kVt,t)}for(const t of i){const i=new bK(t);this.kVt.push(new MK(t.YA,t,this.jVt,i,this))}i.length>0&&this.jVt.eM();const e=t.map((t=>t.YA));this.xVt.gVt(e)}JK(t){var i;const e=(null==(i=this.UG)?void 0:i.JK(t))||!1;return e&&(this.Ty(),this.jVt.eM()),e}OVt(t){for(const t of this.kVt)if(t.YA!==Ri.ON||t.iLt)throw new b("Invalid state");const i=new bK(t),e=new MK(Ri.ON,t,this.jVt,i,this);this.kVt=[e]}get IQt(){const t=this.jVt.IQt;if(t)return t;if(this.kVt.length>0){const t=this.kVt[0].OQt.IQt;if(t&&this.kVt.every((i=>i.OQt.IQt===t)))return t}}mct(){for(const t of this.kVt)t.OQt.LQt()}get RVt(){if(0===this.kVt.length)return Mo.PP();const t=sJ(this.jVt.OYt.concat(this.jVt.PYt),Ms(this.kVt,(t=>t.OQt.Wot))).fP();let i=new Mo([0,1/0]);for(const t of this.kVt)i=i.Sn(t.OQt.TE);for(const t of this.kVt)i=i.yP(t.RQt);return i=i.pP(t),i.mP(nJ)}get PVt(){if(0===this.kVt.length)return Mo.PP();const t=sJ(this.jVt.PYt,Ms(this.kVt,(t=>t.OQt.Wot))).fP();let i=new Mo([0,1/0]);for(const t of this.kVt)i=i.Sn(t.OQt.TE);return i=i.pP(t),i}eft(t){const i=this.RVt.CP(t,nJ);return i?i.jn(i.V-1):t}$Ft(t){return!!this.RVt.CP(t,nJ)||this.LVt.$Ft(t)}zVt(t){return this.PVt.gr(t,nJ)}BVt(t,i,e){for(const t of this.kVt){const e=t.OQt,s=e.dpt;if(void 0!==s&&i>=s&&!e.TE.fP().gr(s))return!0}return i-t<e}Ty(){this.UVt(),this.QVt()}UVt(){this.LVt.Ty()}QVt(){this.xVt.Ty(),this.EVt.forEach((t=>t.Ty()))}wy(){this.Ty(),this.LVt.wy()}constructor(t,i,e,s){this.LVt=t,this.jVt=i,this.xVt=e,this.UG=s,this.kVt=[]}};r();var oJ=class extends Jr{constructor(){super(js.fRt)}};r();var hJ=class extends Jr{constructor(){super(js.lRt)}};r(),r();var aJ="LazyMediaBuffer",uJ=class extends tu{get VN(){return this.WS}get E3(){return this.Zp}get md(){if(!this.Qht)throw new qi(vt.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.Qht.md}get PK(){return this.WK}set PK(t){this.WK=t,this.Qht&&(this.Qht.PK=t)}F$(){return this.Qht?this.Qht.F$():this.FVt}get TE(){return this.Qht?this.Qht.TE:Mo.PP()}get x3(){return this.Qht?this.Qht.x3:this.C3.J$}get QK(){return this.XK}set QK(t){this.XK=t,this.Qht&&(this.Qht.QK=t)}O3(t,i){ta.XRt(aJ,"Marking gap from "+t+" to "+i+"."),this.C3.i0(t,i),this.Qht&&this.Qht.O3(t,i)}R3(t,i){ta.XRt(aJ,"Removing gap from "+t+" to "+i+"."),this.C3.e0(t,i),this.Qht&&this.Qht.R3(t,i)}YVt(t){this.Qht=t,this.Qht.QK=this.XK,this.Qht.PK=this.WK;const i=this.C3.J$;for(let t=0;t<i.V;t++)this.Qht.O3(i.Cn(t),i.jn(t));var e;this.FVt&&(ta.XRt(aJ,"End of stream"),null==(e=this.Qht)||e.I3());this.Qht.yn(po.g$,this.Ds),this.VVt.sM(t)}GVt(t){return Ao(this.VVt.rM,t)}async B4(t,i,e){const s=await this.GVt(e);await s.B4(t,i,e)}async P3(){const t=await this.GVt();await t.P3()}async F4(t,i,e){const s=await this.GVt(e);await s.F4(t,i,e)}async wS(t,i,e){const s=await this.GVt(e);await s.wS(t,i,e)}async s3(t,i){const e=await this.GVt();await e.s3(t,i)}I3(){this.FVt=!0,this.Qht&&this.Qht.I3()}N$(t){return!!this.Qht&&this.Qht.N$(t)}async D$(t){const i=await this.GVt();await i.D$(t)}async gn(){var t;this.Bo(),null==(t=this.Qht)||t.fn(po.g$,this.Ds)}constructor(t,i){super(),this.Zp=t,this.WVt=i,this.WS=void 0,this.Qht=void 0,this.VVt=new xh,this.WK=20,this.FVt=!1,this.XK=30,this.C3=new bC}},cJ="LazyMediaSource",lJ=class{get md(){return{YA:uh.FQ,E5:[],yV:[]}}get p5(){return this.ZVt}get A5(){return this.HVt}get TE(){return this.vV?this.vV.TE:Mo.PP()}get ct(){return this.vV?this.vV.ct:this.JM}get F$(){return!!this.vV&&this.vV.F$}get _k(){return this.vV?this.vV._k:new Mo([0,1/0])}T5(t){this.JM=t,this.vV&&this.vV.T5(t)}I3(){this.Ist=!0,this.vV&&this.vV.I3()}w3(){this.Ist=!1,this.vV&&this.vV.w3()}D5(t,i,e,s){this.XVt=t,this.qVt=i,this.KVt=Boolean(e),this.JVt=Boolean(s),this.vV&&this.vV.D5(t,i,e,s)}N$(t){return!this.vV||this.vV.N$(t)}async D$(t){if(!this.N$(t))throw new b("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.vV)await this.vV.D$(t);else{var i,e;this.cz.ktt();const s=await this.cz.$n(t);j(this.JM)||s.T5(this.JM),this.Ist&&s.I3(),s.D5(this.XVt,this.qVt,this.KVt,this.JVt),ta.XRt(cJ,"The MediaSource has been loaded."),this.$Vt=!0,this.vV=s,null==(i=this.ZVt)||i.YVt(this.vV.p5),null==(e=this.HVt)||e.YVt(this.vV.A5),this.tGt.sM(s),this.cz.Ltt()}}k$(t){this.vV.k$(t)}async wy(){this.vV&&await this.vV.wy()}constructor(t,i,e){this.cz=t,this.ZVt=void 0,this.HVt=void 0,this.tGt=new xh,this.vV=void 0,this.$Vt=!1,this.JM=NaN,this.Ist=!1,this.XVt=0,this.qVt=1/0,this.KVt=!1,this.JVt=!1,i&&(ta.XRt(cJ,"Created lazy media buffer for audio."),this.ZVt=new uJ(Ri.SI,this)),e&&(ta.XRt(cJ,"Created lazy media buffer for video."),this.HVt=new uJ(Ri.NI,this))}};function dJ(t,i){return void 0===i&&(i=!1),function(e,s){void 0===s&&(s="*");let n=gJ(e,"tag");const r=gJ(null==s?"*":s,"range"),o=[];let h,a,u,c=-1;for(;++c<r.length;)if(h=r[c].toLowerCase(),i||"*"!==h){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),h)){if(!i)return n[a];o.push(n[a])}else u.push(n[a]);n=u}return i?o:void 0}}bs(),Qi(),r();dJ(((t,i)=>"*"===i||t===i||_t(t,i+"-")),!0),dJ(((t,i)=>{const e=t.split("-"),s=i.split("-");let n=0,r=0;if("*"!==s[r]&&e[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!e[n])return!1;if(e[n]!==s[r]){if(1===e[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var fJ=dJ(((t,i)=>{let e,s=i;for(;;){if("*"===s||t===s)return!0;if(e=s.lastIndexOf("-"),e<0)return!1;"-"===s.charAt(e-2)&&(e-=2),s=s.slice(0,e)}}));function gJ(t,i){const e=t&&"string"==typeof t?[t]:t;if(!e||"object"!=typeof e||!("length"in e))throw new b("Invalid "+i+" `"+e+"`, expected non-empty string");return e}r(),Qi(),r();var _J=16384,vJ=71,wJ=188,mJ=2,pJ=3,AJ=function(t){return t[t.dI=0]="dI",t[t.sx=1]="sx",t[t.iGt=2]="iGt",t[t.eGt=3]="eGt",t}({});function yJ(t){return bJ(t)?1:function(t){return function(t){if(t.length<mJ*wJ)return-1;const i=t.length<pJ*wJ?mJ:pJ,e=x.min(1e3,t.length-i*wJ);for(let s=0;s<=e;s++){let e=!0;for(let n=0;n<i;n++)if(t[s+n*wJ]!==vJ){e=!1;break}if(e)return s}return-1}(t)>=0}(t)?2:function(t){return null!==ZO(Al(t),new da)}(t)?3:0}function bJ(t){const i=zr(t,0,x.min(t.length,_J));return pe._j(Al(i))}var MJ=class{get YA(){return this.Zp}get TE(){return this.Qht.TE}get x3(){return this.Qht.x3}sGt(t){return this.Qht===t}async F4(t,i){if(this.Qht.md.VN!==t.DVt.cht){const e={VN:t.DVt.cht};this.Qht.N$(e)&&(await this.Qht.D$(e),yi(i))}await this.Qht.F4(t.rI,{u4:t.IRt.zL},i),void 0!==this.ojt&&this.Zp===Ri.NI&&bJ(t.rI.rI)&&this.ojt.$ht(t.rI.rI)}async B4(t,i){yi(i),ta.Hj("HlsMediaBuffer","Got media data, appending to "+this.Zp+" MediaBuffer: "+Mi(t.ZQt.Xyt));const e=t.$Yt,s=t.tVt,n={kst:t.lB,ct:t.ct,rQ:t.rQ,u4:t.IRt.zL};void 0!==t.rI&&(await this.Qht.B4(t.rI,n,i),this.nGt(t.rI,t)),this.rGt(e,s)}nGt(t,i){var e;if(!bJ(t.rI))return;const s=i.lB,n=s+i.ct,r=i.rQ;if(null==(e=this.vpt)||e.Cft(t.rI,s,r),void 0!==this.ojt&&this.Zp===Ri.NI){const e=i.ZQt.Zzt;this.ojt.Cft(t.rI,s,n,r,i.IRt,e)}const o=[];void 0!==this.vpt&&o.push(this.vpt),void 0!==this.ojt&&o.push(this.ojt),XI(this.TE,o)}rGt(t,i){const e=this.Qht.TE,s=new Mo([t,i]).yP(e);for(let t=0;t<s.V;t++)this.Qht.O3(s.Cn(t),s.jn(t));for(let t=0;t<e.V;t++)this.Qht.R3(e.Cn(t),e.jn(t))}O3(t,i){this.Qht.O3(t,i)}R3(t,i){this.Qht.R3(t,i)}constructor(t,i,e,s){this.Zp=t,this.Qht=i,this.vpt=e,this.ojt=s}};function TJ(t){if(t.YA!==Oe.mPt||void 0===t.bRt)return;const i=t.bRt.match(/^CC([1-4])$/);if(i)return Number(i[1]);const e=t.bRt.match(/^SERVICE([\d+])$/);return e?Number(e[1]):void 0}r(),r(),r();var SJ=class{dPt(t){var i,e,s;return null==(s=null==(e=this.vV)||null==(i=e.A5)?void 0:i.N$(t))||s}fPt(t){var i,e,s;return null==(s=null==(e=this.vV)||null==(i=e.p5)?void 0:i.N$(t))||s}constructor(t){this.vV=t}},Hc="LLHLSPlayer",NJ=[E.eP,E.sP,E.nP,E.lL],IJ=[Zi.pb,Zi.Vy,Zi.$y,Zi.Ky],DJ=2e3,EJ=class extends tu{get Az(){var t;const i=[this.oGt,this.hGt].filter($t);if(0===i.length||this.ct!==1/0)return;const e=null==(t=this.NE)?void 0:t.getTime();if(e){return(Date.now()-e)/1e3}let s;for(const t of i){const i=t.wRt._k;if(0===i.V)continue;const e=i.jn(i.V-1)+t.wRt.$Tt,n=t.wRt.zBt,r=e+(null!=n?n:0)-this.LE;(!s||s<r)&&(s=r)}return s}aGt(){if(void 0===this.uGt)return!1;const t=Fe.Og();if(!this.uGt.LVt.CYt(t))return!1;const i=this.uGt.LVt.EYt();if(void 0===i||void 0===i.ilt.ct)return!1;const e=this.LE,s=this.$E,n=this.uGt.RVt.CP(e);if((void 0!==n?n.jn(0)-e:0)>=2*i.ilt.ct*s)return!1;if(i.kYt>0&&0===i.LYt)return i.xYt>1e3*i.ilt.ct*.8;return 8*i.LYt/this.UG.NK.FY>=1.8*i.ilt.ct}async cGt(){var t;const i=await this.vPt();if(void 0===i)return;const e=null==(t=this.uGt)?void 0:t.LVt.EYt();if(void 0===e)return;const s=this.lGt;if(e.LYt>0){if(x.max(0,e.LYt-e.kYt)<=e.LYt*(i.FY/s.FY))return}const n=i.FY<s.FY;await this.CRt(i,{jRt:n})}dGt(t){return ew(t,(t=>t.FY))}async fGt(){let t=await this.gGt();if(0===t.length)return;const i=await this._Gt(t);i.length>0&&(t=i);const e=this.dGt(t);void 0!==e&&(await this.CRt(e,{jRt:!0}),this.AV.xkt(e.FY))}get vGt(){const t=[this.hGt,this.oGt].filter($t);for(const i of t){if(!i.wRt.Tzt)return!1;const t=i.wRt.Wot,e=t[t.length-1];if(e&&e.bzt!==this.wGt)return!1}return!0}get DRt(){return this.lGt}get FRt(){return this.hGt}get VRt(){return this.oGt}get mGt(){return this.pGt}get ht(){return this.Oz}get TE(){return this.cz.TE.ks()}get LRt(){const t=[];if(this.lGt){const i=this.cz.LE;for(const e of this.AGt)for(const s of e.EVt){const e=s.YQt(i);e&&!Qa(t,e)&&t.push(e)}}return t}get NE(){if(this.lGt){const t=this.cz.LE;return this.lGt.Pzt(t)}}set NE(t){if(!t||!this.lGt)return;const i=this.lGt.zzt(t);void 0!==i&&this.CE(i,{yGt:!1,bGt:!0})}get bt(){return this.MGt}get LE(){var t;return null!=(t=this.TGt)?t:this.cz.LE}set LE(t){this.CE(t)}CE(t,i){var e,s,n,r;ta.Hj(Hc,"Seeking to "+t+" s.");const o={yGt:null!=(s=null==i?void 0:i.yGt)?s:t===1/0,bGt:null==(n=null==i?void 0:i.bGt)||n,dzt:null!=(r=null==i?void 0:i.dzt)&&r};this.TGt=t,this.SGt=o,this.NGt=!0,this.yIt=!0,null==(e=this.aV)||e.zk(),this.yo(new Yr(t)),this.w7.Ty(),this.IGt&&(Fe.Rg(this.DGt),o.bGt?this.DGt=Fe.Pg((()=>this.EGt(t,o)),50):this.EGt(t,o))}EGt(t,i){Fe.Rg(this.DGt);const e=[this.Ept,this.kGt,this.m7].filter($t);this.w7=new Wt,this.w7.Sy(this.zQ.ly),this.m7=Vh(this.p7(e,t,i,this.w7.ly),this.w7).catch(this.LGt)}get ct(){var t,i,e,s,n,r,o;if(!this.vGt)return null!=(o=null!=(r=null!=(n=null==(t=this.hGt)?void 0:t.wRt.ct)?n:null==(i=this.oGt)?void 0:i.wRt.ct)?r:null==(s=this.NIt)||null==(e=s.iQt)?void 0:e.wRt.ct)?o:[this.hGt,this.oGt].filter($t).every((t=>function(t){if(void 0===t)return!1;return t.wRt.Wot.length>0&&!t.wRt.Tzt}(t)))?1/0:NaN;const h=this.cz.ct;if(j(h)){var a,u;const t=null==(u=this.NIt)||null==(a=u.iQt)?void 0:a.wRt.ct;if(void 0!==t)return t}return h}get OE(){if(!this.vGt)return!1;if(this.wk&&this.IGt){var t,i;const e=this.LE,s=null==(t=this.hGt)?void 0:t.wRt.ct,n=null==(i=this.oGt)?void 0:i.wRt.ct;return!(void 0!==s&&e<s)&&!(void 0!==n&&e<n)}return this.cz.OE}get lt(){return this.dV}get zE(){return this.fV}get UE(){}get FE(){return!1}get VE(){return Ei({},{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.cz.GE(),{Yz:this.ZNt,Fz:this.UG.NK.FY})}get Tr(){var t;return null==(t=this.NIt)?void 0:t.Tr}get WE(){return this.cz.WE}set WE(t){this.cz.WE=t}get XE(){return this.WTt}set XE(t){this.WTt!==t&&(this.WTt=t,this.yo(t?new BG:new ml))}get KE(){return this.cz.KE}get $E(){return this.cz.$E}set $E(t){ta.Hj(Hc,"Setting playback rate to "+t+"."),this.cz.$E=t}get rk(){return this.JNt.ks()}get JNt(){return this.cz.rk}get ck(){return this._V}set ck(t){this._V!==t&&(this._V=t,this.xGt())}get fk(){let t=this.cz.fk;return this.iIt&&(t=x.max(Fn.Xn,t)),t}get _k(){return this.GNt.ks()}get GNt(){let t=this.I5;const i=[this.hGt,this.oGt].filter($t);if(t.V>0&&i.some((t=>!t.wRt.Tzt))){const e=this.JNt,s=t.jn(t.V-1);if(e.V>0&&e.jn(e.V-1)>s){let n=e.jn(e.V-1);const r=xJ(i);r.V>0&&(n=x.min(n,r.jn(r.V-1))),t=t.pP(new Mo([s,n]))}}return t}$Bt(){let t=function(t){if(0===t.length)return Mo.PP();let i=new Mo([0,1/0]),e=0;for(const s of t){const t=s.wRt._k;t.V>0&&(i=i.Sn(t),e=x.max(e,t.Cn(0)))}if(i.V>0)return i;return Mo.OP(e)}([this.hGt,this.oGt].filter($t));0!==t.V&&(this.vV&&this.vGt&&this.vV.ct!==1/0&&(t=new Mo([t.Cn(0),this.vV.ct])),this.I5=t,this.CGt&&this.vpt.NQ(t.Cn(0)),this.jGt&&this.ojt.NQ(t.Cn(0)))}get wk(){var t;return null!=(t=this.NGt)?t:this.cz.wk}get wV(){}get nt(){return this.Ul}get rt(){return this.Pz}get yk(){var t,i;return this.cz.yk||(null==(i=this.lGt)||null==(t=i.cxt)?void 0:t.Ti)||0}get Tk(){var t,i;return this.cz.Tk||(null==(i=this.lGt)||null==(t=i.cxt)?void 0:t.ji)||0}get Nk(){return this.cz.Nk}set Nk(t){ta.Hj(Hc,"Setting volume to "+t+"."),this.cz.Nk=t}get Ek(){return this.QG}get xk(){return!1}set xk(t){}get pV(){return this.AV}Bk(){return!1}Ck(){return this.cz.wa}_a(){return this.cz.xV}Wk(t){return this.cz.CV(t)}be(){ta.Hj(Hc,"Hiding the player."),this.cz.be()}Rk(){var t;ta.Hj(Hc,"Pausing the player."),this.cz.Rk(),(null==(t=this.aV)?void 0:t.zP)&&this.aV.zk()}async Pk(){this.s7=!0;const t=this.cz.Pk();if(this.OE){const t=this.GNt;t.V>0&&this.CE(t.Cn(0),{bGt:!1})}this.IGt||await this.xGt(),this.yNt(),await t,this.bIt()}yNt(){var t;if(!this.VNt())if(null==(t=this.DRt)?void 0:t.wRt.Tzt){var i;let t=!0,e=0;const s=null==(i=this.lGt)?void 0:i.wRt.Cn;if(!this.yIt&&s&&(t=!s.dzt,e=s.lzt,e<0)){const t=this.DRt.wRt.MBt;e+=t.jn(t.V-1)}this.EGt(e,{yGt:t})}else this.EGt(1/0,{yGt:!0});this.OGt()&&this.EGt(1/0,{yGt:!0})}VNt(){var t;const i=this.GNt;if(0===i.V)return!0;const e=null==(t=this.RGt)?void 0:t.bP(this.LE);return(e&&e>0?this.RGt.jn(e):this.LE)>=i.Cn(0)}get RGt(){var t,i;const e=null==(t=this.PGt)?void 0:t.RVt,s=null==(i=this.uGt)?void 0:i.RVt;return e?s?s.Sn(e):e:s}OGt(){return zJ(this.LE,this.hGt)||zJ(this.LE,this.oGt)}nDt(){this.dV=void 0,this.fV=void 0}eG(t){this.dV||(X(this.tr()),this.dV=Au(t),this.fV=t,this.yo(new cl(t)))}ge(){ta.Hj(Hc,"Showing the player."),this.cz.ge()}Uk(){throw new b("Not implemented")}Qk(){throw new b("Not implemented")}Fk(){}Yk(){this.IGt&&X(this.zGt(this.hGt,this.oGt,this.pGt,{Yk:!0}))}async ka(t,i,e){const s={stack:[],error:void 0,hasError:!1};try{var n;if(ta.Hj(Hc,"Setting the player source to "+t.src+"."),this.nDt(),this.MGt&&!cS(this.MGt)&&(await this.tr(),yi(e)),!t.src||cS(t))return;const o=Ne(s,Wt.Iy([e]),!1);var r;this.zQ=Wt.Iy([o.ly]),this.SV.WY(t.contentProtection),this.MGt=t,this.BGt=t.seamlessSwitchStrategy,this.jGt=!Qa(t.ignoreEmbeddedTextTrackTypes,El.CEA608),this.CGt=!Qa(t.ignoreEmbeddedTextTrackTypes,El.EMSG),this.yn(js._Rt,this.handleBufferingErrorEvent);const h=null!=(r=null==(n=t.latencyConfiguration)?void 0:n.targetOffset)?r:t.liveOffset;if(this.NIt=new _K(this.OQ,this.slt,t.useCredentials,Fe.TA(t.src),h),this.NIt.yn(Hi.ZUt,this.NQt),this.NIt.yn(Hi.HUt,this.UGt),this.NIt.yn(Zi.ub,this.Ds),this.NIt.yn(Zi.fb,this.Ds),t.hlsDateRange&&(this.QGt=new AK(this.NIt,this.cz),this.Ul.$Y(this.QGt.nt)),null!=this.FGt||(this.FGt=this.YGt.xst()),i.textTracks&&this.NV(i.textTracks),t.latencyConfiguration){const i=t.latencyConfiguration;this.aV=new fW(this,this.cz,i),this.aV.Rt=!0,this.Ek.Sa(this.aV)}eD(this.Ul),this.xGt(),o.wy()}catch(t){s.error=t,s.hasError=!0}finally{qr(s)}}xGt(){return this.Ept=this.VGt(this.Ept,this.zQ.ly).catch(this.fAt),this.Ept}async VGt(t,i){if(t&&(await t,yi(i)),!this.NIt)return;const e=this._V;e===Dn.Mz||this.s7?await this.oD(i):e===Dn.MQ&&await this.GGt(i)}async GGt(t){if(void 0===this.NIt||this.iIt)return;if(!this.NIt.KUt){try{await this.NIt.sQt(t)}catch(t){throw V(t),this.XE=!1,new qi(vt.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.WGt.Mgt()}const i=await this.ZGt();this.HGt(i);const e=this.XGt(i.$Rt),s=this.qGt(i.tPt),n=this.KGt(i.Ozt);if(!n){const t=CJ(i.Rzt);t&&(ta.Hj(Hc,"Detected initial closed caption rendition."),this.JGt(i,t))}await this.zGt(e,s,n,{$Gt:!0}),this.iIt=!0,this.NDt.CDt(),this.tWt()}tWt(){const t=[this.hGt,this.oGt].filter($t);if(t.some((t=>t.wRt.Tzt)))return;if(this.aV)return;const i=x.max(...t.map((t=>{var i;return null!=(i=t.wRt.$Tt)?i:0}))),e={minimumOffset:.66*i,maximumOffset:2*i,targetOffset:1*i,forceSeekOffset:3*i,minimumPlaybackRate:We,maximumPlaybackRate:ee};this.aV=new fW(this,this.cz,e),this.QG.Sa(this.aV)}async ZGt(){if(this.iWt=this.NIt.Tr.JRt,!this.iWt.length)throw new qi(vt.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.eWt(this.iWt);if(0===t.length)throw new qi(vt.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const i=await this._Gt(t);return i.length>0&&(t=i),ta.Hj(Hc,"Selecting initial active variant stream."),function(t,i,e,s){void 0===s&&(s=wS.maximumBackoff);const n=function(t,i){if(void 0===i)return t;const e=i.preferredVideoCodecs,s=i.preferredAudioCodecs;if(void 0!==e){let i;for(const n of e){const e=t.filter((t=>t.cht&&t.cht.bxt&&Wo(t.cht.bxt,n)));if(0===e.length)continue;if(void 0===s)return e;void 0===i&&(i=e);const r=jJ(e,s);if(void 0!==r)return r}if(void 0!==i)return i}if(void 0!==s){const i=jJ(t,s);if(void 0!==i)return i}return t}(t,i),r=RJ(n,s);switch(e.BK.type){case Le.BANDWIDTH:{const t=e.VK,i=r.filter((i=>i.FY<=t));if(i.length>0)return sw(i,(t=>t.FY))}case Le.PERFORMANCE:return ew(r,(t=>t.FY));case Le.QUALITY:return sw(r,(t=>t.FY))}}(t,this.MGt.abr,this.UG,this.lft.maximumBackoff)}XGt(t){if(this.sWt){const t=this.nWt(this.sWt);if(t)return t}return OJ(t)}qGt(t){if(this.rWt){const t=this.nWt(this.rWt);if(t)return t}return OJ(t)}KGt(t){for(const t of this.Ul.AL)t.UI===ua.Jn&&(this.oWt=this.hWt(t));if(this.oWt){const t=this.nWt(this.oWt);if(t)return t}return CJ(t)}hWt(t){return dl(this.lGt.Ozt,(i=>t===this.aWt.get(i.zL)))}async oD(t){this.IGt||(await this.GGt(t),yi(t),this.IGt=!0,await this.zGt(this.hGt,this.oGt,this.pGt,{$Gt:!0}))}NV(t){for(const i of t)i.src&&this.LV.xQ(i)}JGt(t,i){if(!this.jGt)return;const e=function(t){const i=[];for(const e of t){const t=TJ(e);void 0!==t&&i.push({aet:t,uet:e.gs||"",kh:e.l})}return i}(t.Rzt);for(const t of e)this.ojt.Pmt(t);if(void 0!==i){const t=TJ(i);this.ojt.Omt(t).UI=ua.Jn}}get AGt(){return[this.PGt,this.uGt,this.uWt].filter($t)}xRt(t){for(const i of t)if(!this.cWt(i))throw new b("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.iWt=t}cWt(t){const i=this.Tr;return!!i&&Qa(i.JRt,t)}nWt(t){if(t&&this.lGt)return dl(this.lGt.rPt,(i=>i===t))}HGt(t){var i;if(ta.Hj(Hc,"Setting active variant stream."),this.lGt===t)return;const e=(null==(i=this.lGt)?void 0:i.FPt)!==(null==t?void 0:t.FPt);if(this.lGt&&e)for(const t of this.lGt.Ozt)this.BQ(t);if(this.lGt=t,this.yo(new oJ),this.gIt(),t&&e)for(const i of t.Ozt)this.lWt(i)}lWt(t){const i=this.cz.Wk(z.AQ,void 0,t.l,t.gs,t.mRt,void 0,void 0,t.TRt.map(OX).filter($t));i.yn(hs.aa,this.onTextTrackChange),this.aWt.set(t.zL,i),this.dWt.tt(i)}BQ(t){const i=this.aWt.get(t.zL);i&&(i.fn(hs.aa,this.onTextTrackChange),this.dWt.it(i),this.aWt.delete(t.zL),this.cz.BQ(i))}async gGt(){var t;const i=null!=(t=this.iWt)?t:this.Tr.JRt;if(0===i.length&&!this.iWt)return ta.Hj(Hc,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===i.length&&!this.iWt)return ta.Hj(Hc,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const e=await this.eWt(i);if(0===e.length)return ta.qRt(Hc,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=RJ(e,this.lft.maximumBackoff);return 0===s.length?(this.fWt||(ta.qRt(Hc,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.gWt++,await this._Wt(e)),[]):s}async vWt(){const t=await this.vPt();if(void 0===t)return;const i=!!this.lGt&&t.FY<this.lGt.FY;await this.CRt(t,{jRt:i})}async vPt(){var t,i;const e=await this.gGt();if(0===e.length)return;const s=_H(this.cz),n=await this._Gt(e),r={ji:this.cz.ji,Ti:this.cz.Ti,lPt:s,Fdt:null==(i=this.MGt)||null==(t=i.abr)?void 0:t.restrictToPlayerSize},o=await this.wWt.vPt(e,this.lGt,n,r,new SJ(this.vV));return!!this.lGt&&o.FY<this.lGt.FY||this.mWt(o,s)?o:void 0}mWt(t,i){var e;if(t===this.DRt)return!1;const s=this.DRt&&PJ(this.DRt,this.lft.maximumBackoff),n=PJ(t,this.lft.maximumBackoff);if(!s&&n)return!0;(!this.dCt||this.dCt.ERt.FY>t.FY)&&(this.dCt={ERt:t,t_t:Fe.Og()});const r=Fe.Og()-this.dCt.t_t;var o;const h=null!=(o=null==(e=this.VRt)?void 0:e.wRt.cPt)?o:1/0;return i>=x.max(h-1,5)||r>1e3}async _Wt(t){this.fWt=!0;let i=!1;for(const e of t)try{const t=this.oGt?dl(e.tPt,(t=>TX(t,this.oGt))):void 0;if(void 0===t)continue;await this.lQt(t),t.wRt.QBt=-1/0,i=!0}catch(t){}if(i)this.gWt=0,await this.pWt();else{if(this.gWt>=this.lft.maxRetries)return void this.eG(new qi(vt.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=x.min(this.lft.minimumBackoff*2**(this.gWt-1),this.lft.maximumBackoff);await Dt(t)}this.fWt=!1,await this.vWt()}async eWt(t){let i=await hw(t,(async t=>{var i,e,s;const n=[(null==(i=t.cht)?void 0:i.Axt)?'audio/mp4; codecs="'+t.cht.Axt+'"':void 0,(null==(e=t.cht)?void 0:e.bxt)?'video/mp4; codecs="'+t.cht.bxt+'"':void 0].filter($t);return 0===n.length||await this.AWt.H$(n,null==(s=this.MGt)?void 0:s.useManagedMediaSource)}));return i.some((t=>{var i;return null==(i=t.cht)?void 0:i.bxt}))&&(i=i.filter((t=>!t.cht||t.cht.bxt||0!==t.tPt.length))),i.some((t=>{var i;return null==(i=t.cht)?void 0:i.Axt}))&&(i=i.filter((t=>!t.cht||t.cht.Axt||0!==t.$Rt.length))),i}_Gt(t){return this.NIt.$Ut?hw(t,(t=>async function(t,i){for(const e of t)if(!await i(e))return!1;return!0}([OJ(t.$Rt),OJ(t.tPt),CJ(t.Ozt),CJ(t.Rzt)].filter($t),(t=>this.yWt(t))))):Promise.resolve([])}async yWt(t){if(0===t.wRt.Wot.length)return!1;const i=t.wRt.Wot[0];if(!i.Xyt)return!1;const e=i.Xyt,s=e.SMt?KX(e.SMt.Cn,e.SMt.V):void 0;try{return await this.slt.Iot(e.zD,s)}catch(t){return!1}}async CRt(t,i){if(!this.IGt)throw new b("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new b("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.cWt(t))throw new b("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.lGt)return void ta.Hj(Hc,"Trying to set the already active variant stream, ignoring.");const e=this.hGt?dl(t.$Rt,(t=>TX(t,this.hGt))):void 0,s=this.oGt?dl(t.tPt,(t=>TX(t,this.oGt))):void 0,n=this.pGt?dl(t.Ozt,(t=>TX(t,this.pGt))):void 0;this.HGt(t),this.dCt=void 0,await this.zGt(e,s,n,i)}async YRt(t){if(!this.lGt)return void(this.sWt=t);const i=this.nWt(t);if(t&&!i)throw new b("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");this.FRt!==i&&(ta.Hj(Hc,"Switching audio rendition"),await this.zGt(i,this.oGt,this.pGt,{RRt:!0}))}async GRt(t){if(!this.lGt)return void(this.rWt=t);const i=this.nWt(t);if(t&&!i)throw new b("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");this.VRt!==i&&(ta.Hj(Hc,"Switching video rendition"),await this.zGt(this.hGt,i,this.pGt,{ORt:!0}))}async bWt(t){if(!t)throw new b("LLHLSPlayer - Cannot explicitly set the active subtitle rendition to undefined.");if(!this.iIt)return void(this.oWt=t);const i=this.nWt(t);if(!i)throw new b("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");ta.Hj(Hc,"Switching subtitle rendition"),await this.zGt(this.hGt,this.oGt,i)}async MWt(t,i){if(this.fWt)return;const e=0===this.rt.V;t.YA===Oe.NI||t.YA===Oe.SI&&e?this.iWt&&this.iWt.length<=1?(t.YA===Oe.NI&&this.oGt!==t?await this.zGt(this.hGt,t,this.pGt):t.YA===Oe.SI&&e&&this.hGt!==t&&await this.zGt(t,this.oGt,this.pGt),await this.TWt(t,i)):await this.vWt():await this.TWt(t,i)}async lQt(t,i){try{await this.NIt.lQt(t,i)}catch(e){throw V(e),(Cb(e)||jb(e))&&await this.MWt(t,i),e}}async TWt(t,i){if(!Qa(this.SWt,t)){this.SWt.push(t);try{const e=t.YA===Oe.AQ||t.YA===Oe.mPt?1/0:this.lft.maxRetries;await co((()=>this.retryOfflineRenditionsCallback(t,i)),i,e,this.lft.minimumBackoff,this.lft.maximumBackoff)}catch(t){this.eG(new qi(vt.MEDIA_LOAD_ERROR,t.message,t))}finally{ra(this.SWt,t),t.wRt.QBt===-1/0&&await this.pWt()}}}zGt(t,i,e,s){void 0===s&&(s={});const n={jRt:s.jRt||!1,RRt:s.RRt||!1,ORt:s.ORt||!1,Yk:s.Yk||!1,$Gt:s.$Gt||!1};return n.$Gt||n.Yk||this.hGt!==t||this.oGt!==i||this.pGt!==e?void 0===t&&void 0===i?Promise.reject(new b("Trying to buffer no media renditions.")):(this.hGt=t,this.oGt=i,this.pGt=e,this.$Bt(),this.yo(new hJ),this.w7.Ty(),this.w7=new Wt,this.w7.Sy(this.zQ.ly),this.NWt.Ty(),this.NWt=new Wt,this.NWt.Sy(this.zQ.ly),this.kGt=Vh(this.IWt([this.kGt,this.m7].filter($t),t,i,e,n,this.NWt.ly),this.NWt).catch(this.LGt),this.kGt):Promise.resolve()}async DWt(t,i,e,s){var n,r;const o=[];if(o.push(this.EWt(i,s)),SX(t,i)||o.push(this.EWt(t,s)),null==(r=this.MGt)||null==(n=r.hls)?void 0:n.delaySubtitlePreload)return Promise.all(o).then((()=>this.EWt(e,s)));const h=this.EWt(e,s);return Promise.all([...o,h])}async EWt(t,i){if(t)try{await this.NIt.lQt(t,i)}catch(e){V(e),(Cb(e)||jb(e))&&await this.kWt(t,i)}}async kWt(t,i){if(this.fWt)return;const e=0===this.rt.V;if(t.YA===Oe.NI||t.YA===Oe.SI&&e)if(this.iWt&&this.iWt.length<=1)await this.TWt(t,i);else{const t=await this.ZGt();this.HGt(t);const i=this.XGt(t.$Rt),e=this.qGt(t.tPt),s=this.KGt(t.Ozt);await this.zGt(i,e,s)}else await this.TWt(t,i)}async IWt(t,i,e,s,n,r){var o;if(!this.IGt)return void await this.DWt(i,e,s,r);await Promise.all(t.map((t=>t.catch(Bn)))),this.LWt(),await this.xWt(r),await this.CWt();const h=[];n.RRt&&this.vV&&this.vV.p5&&h.push(this.vV.p5.wS(0,1/0)),n.ORt&&this.vV&&this.vV.A5&&h.push(this.vV.A5.wS(0,1/0)),await Promise.all(h),yi(r);const a=await this.jWt(i,e,n.Yk,r);this.OWt(i,e,n.jRt||a),this.RWt(s,n.jRt),yi(r);const u=[e,SX(i,e)?void 0:i,s].filter($t);try{await Promise.all(u.filter((t=>!t.wRt.jBt)).map((t=>{var i;return null==(i=this.NIt)?void 0:i.dQt(t,r)})))}catch(t){V(t)}if(yi(r),this.N5(),this.$Bt(),void 0!==this.TGt)this.EGt(this.TGt,this.SGt);else if(!this.yIt&&(null==(o=this.lGt)?void 0:o.wRt.Cn)){const t=this.lGt.wRt,i=t.Cn;let e=i.lzt;if(i.lzt<0){const i=t.MBt;e+=i.jn(i.V-1)}this.EGt(e,{yGt:!i.dzt})}else!this.yIt&&u.every((t=>!t.wRt.Tzt))?this.EGt(1/0,{yGt:!0}):this.AGt.length>0&&this.PWt()}async jWt(t,i,e,s){var n,r;const o=void 0!==t&&t!==i,h=void 0!==i,a=await this.zWt(t,i,this.lGt);if(yi(s),!e&&this.vV&&!a)return!1;const u=void 0!==(null==(n=this.vV)?void 0:n.p5),c=void 0!==(null==(r=this.vV)?void 0:r.A5);if(!e&&!(o!==u||h!==c)&&a&&this.vV&&this.vV.N$(a))return await this.xWt(s),await this.vV.D$(a),!0;for(const t of this.AGt)t.EVt.forEach((t=>t.Ty()));this.cz.ktt();try{this.vV&&await this.cz.tr(),this.vV=await this.BWt(a,o,h)}finally{this.cz.Ltt()}return!0}async zWt(t,i,e){var s,n;const r=e.cht,o=[];if(void 0!==t){var h,a;const i=null!=(a=null==(h=t.cht)?void 0:h.Axt)?a:null==r?void 0:r.Axt;if(!i)return;{const t='audio/mp4; codecs="'+i+'"';ta.Hj(Hc,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),o.push(t)}}if(void 0!==i){var u,c;const t=null!=(c=null==(u=i.cht)?void 0:u.bxt)?c:null==r?void 0:r.bxt;if(!t)return;{const i='video/mp4; codecs="'+t+'"';ta.Hj(Hc,"Configuring MediaSource for initial video rendition with codec: "+i+"."),o.push(i)}}if(0===o.length)return void ta.qRt(Hc,"No codecs found on the active variant stream.");var l;const d=null!=(l=null==i||null==(s=i.wRt.Wot[0])?void 0:s.gzt)?l:[];var f;const g=null!=(f=null==t||null==(n=t.wRt.Wot[0])?void 0:n.gzt)?f:[],_=this.NIt.Tr,v=await rq(this.MGt.contentProtection,o,_.xUt.concat(g).concat(d),this.OQ,this.MGt.useCredentials);return{YA:uh.FQ,E5:o.map((t=>({VN:t}))),yV:v,U5:this.MGt.useManagedMediaSource}}async BWt(t,i,e){let s;return s=t?await this.cz.$n(t):new lJ(this.cz,i,e),this.vV=s,this.N5(),this.uNt(),this.cNt(),s}N5(){const t=this.vV;if(t&&j(t.ct)){var i,e,s;const n=null!=(s=null==(i=this.hGt)?void 0:i.wRt.ct)?s:null==(e=this.oGt)?void 0:e.wRt.ct;void 0!==n&&n>0&&t.T5(n)}this.$Bt()}uNt(){const t=this.vV;t&&(t.A5&&(t.A5.PK=this.UG.ZK),t.p5&&(t.p5.PK=this.UG.ZK))}cNt(){const t=this.vV;t&&(t.A5&&(t.A5.QK=this.UG.QK),t.p5&&(t.p5.QK=this.UG.QK))}OWt(t,i,e){if(!this.vV)throw new b("Invalid state");this.vV.p5?this.y5&&this.y5.sGt(this.vV.p5)||(this.y5=new MJ(Ri.SI,this.vV.p5,this.CGt?this.vpt:void 0,this.jGt?this.ojt:void 0)):this.y5=void 0,this.vV.A5?this.b5&&this.b5.sGt(this.vV.A5)||(this.b5=new MJ(Ri.NI,this.vV.A5,this.CGt?this.vpt:void 0,this.jGt?this.ojt:void 0)):this.b5=void 0;const s=SX(t,i);if(this.b5&&i){const t=s&&this.y5?[this.b5,this.y5]:[this.b5];this.uGt?this.uGt.IRt!==i&&(e&&(this.uGt.Ty(),this.uGt.jVt.eM()),this.uGt.UFt(i)):(this.uGt=function(t,i,e,s,n,r,o,h,a,u){const c=s.Tr.tP,l=new GK(c),d=new FK(Ri.NI,t,s,l,n,r,o,u),f=i.map((t=>t.YA)),g=h.RSt(l,s.Tr.tP,f),_=new rJ(d,l,g,a);return _.CVt(i),_}(i,t,this.cz,this.NIt,this.OQ,this.slt,this.$Qt,this.FGt,this.UG,this.MGt.useCredentials),this.uGt.LVt.yn(QK.RFt,this.UWt),this.uGt.LVt.yn(QK.PFt,this.QWt),this.uGt.xVt.yn(Ss.sVt,this.FWt),this.uGt.xVt.yn(Ss.rVt,this.YWt),this.uGt.xVt.yn(Ss.oVt,this.VWt),this.uGt.xVt.yn(Ss.nVt,this.GWt)),this.uGt.CVt(t)}else{var n;null==(n=this.uGt)||n.wy(),this.uGt=void 0}var r;this.y5&&t&&!s?(this.PGt?this.PGt.IRt!==t&&(e&&(this.PGt.Ty(),this.PGt.jVt.eM()),this.PGt.UFt(t)):(this.PGt=function(t,i,e,s,n,r,o,h,a,u){const c=s.Tr.tP,l=new GK(c),d=new FK(Ri.SI,t,s,l,n,r,o,u),f=h.RSt(l,s.Tr.tP,[i.YA]),g=new rJ(d,l,f,a);return g.CVt([i]),g}(t,this.y5,this.cz,this.NIt,this.OQ,this.slt,this.$Qt,this.FGt,this.UG,this.MGt.useCredentials),this.PGt.LVt.yn(QK.PFt,this.QWt),this.PGt.xVt.yn(Ss.sVt,this.FWt),this.PGt.xVt.yn(Ss.nVt,this.GWt)),this.PGt.CVt([this.y5])):(null==(r=this.PGt)||r.wy(),this.PGt=void 0);this.WWt()}RWt(t,i){if(this.uWt){this.uWt.LVt.IRt===t?i&&(this.uWt.Ty(),this.uWt.jVt.eM()):(this.uWt.wy(),this.uWt=void 0)}if(!this.uWt&&t){const i=this.aWt.get(t.zL);i.UI=ua.Jn,this.uWt=function(t,i,e,s,n,r,o){const h=e.Tr.tP,a=new HK(i,h),u=new GK(h),c=new FK(Ri.ON,t,e,u,s,n,r,o),l=new eJ(u,h,Ri.ON),d=new rJ(c,u,l);return d.OVt(a),d}(t,i,this.NIt,this.OQ,this.slt,this.$Qt,this.MGt.useCredentials)}}WWt(){const t=[this.y5,this.b5].filter($t).map((t=>t.YA));this.NIt.Tr.tP.kUt(t)}async p7(t,i,e,s){let n;if(await Promise.all(t.map((t=>t.catch(Bn)))),yi(s),await this.CWt(),yi(s),this.TGt=void 0,this.NGt=void 0,this.yIt=!0,e.dzt){n=xJ([this.hGt,this.oGt].filter($t))}else n=this.GNt;const r=n.gP(i),o=this.cz.zy(Zi.bb,s);this.cz.Wb(r,e.yGt),this.IGt&&this.AGt.length>0&&(this.NIt.Tr.tP.LUt(),this.ZWt(this.cz.LE),this.PWt()),await o,this.bIt()}bIt(){const t=this.Az;if(this.KE||this.wk||void 0===t)return;const i=this.LE;var e,s;t+this.LE-this.Ek.md.maximumOffset<i?null==(e=this.aV)||e.Cn():null==(s=this.aV)||s.zk()}ZWt(t){for(const i of this.AGt)i.$Ft(t)||(i.UVt(),i.jVt.WYt()),i.zVt(t)||(i.QVt(),i.jVt.ZYt())}LWt(){for(const t of this.AGt)t.Ty()}CWt(){return Promise.all([this.HCt(),this.HWt(),this.XWt()])}PWt(){this.ZCt(),this.qWt(),this.KWt()}async pWt(){this.IGt&&this.AGt.length>0&&(this.AGt.forEach((t=>t.UVt())),await this.HCt(),this.ZCt(),this.AGt.forEach((t=>t.LVt.oYt())))}ZCt(){if(this.JWt)return;const t=()=>{this.JWt=void 0};this.$Wt=new Wt,this.$Wt.Sy(this.zQ.ly),this.JWt=Vh(this.cjt(this.$Wt.ly),this.$Wt).catch(this.LGt).then(t,t)}async HCt(){var t;null==(t=this.$Wt)||t.Ty();const i=this.JWt;this.JWt=void 0,i&&await i}async cjt(t){yi(t);const i=this.AGt;for(;;){const e={stack:[],error:void 0,hasError:!1};try{const s=[],n=this.cz.LE;for(const t of i){const i=t.LVt,e=t.eft(n);if(i.iLt)s.push(i.UQt());else if(t.BVt(n,e,this.UG.ZK)){const n=i.tYt(e);if(void 0===n){if(i.IRt.wRt.Tzt)continue;const t=i.IRt.wRt.Wot;t.length&&t[0].lB>e&&(this.LE=1/0),i.uYt(),i.sYt(e)}else{const[e,s]=n;i.Act(e,s,t.IQt),t.xVt.vVt(e,s)}s.push(i.UQt())}}const r=Ne(e,Wt.Iy([t]),!1);if(0===s.length){i.every((t=>t.LVt.NLt))||s.push(this.cz.zy(Zi.Eb,r.ly));for(const t of i)s.push(t.xVt.zy(Ss.nVt,r.ly))}await Ao(Promise.race(s),r.ly)}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}}qWt(){if(this.tZt)return;const t=()=>{this.tZt=void 0};this.iZt=new Wt,this.iZt.Sy(this.zQ.ly),this.tZt=Vh(this.eZt(this.iZt.ly),this.iZt).catch(this.LGt).then(t,t)}async HWt(){var t;null==(t=this.iZt)||t.Ty();const i=this.tZt;this.tZt=void 0,i&&await i}async eZt(t){yi(t);const i=this.AGt;for(;;){const e=[];for(const t of i){const i=t.LVt,s=t.xVt;if(s.iLt)e.push(s.UQt());else{const t=i.ZFt();t?"ilt"===t.YA?(s.AVt(t),e.push(s.UQt())):"pzt"===t.YA&&(s.wVt(t),e.push(s.UQt())):e.push(i.hYt())}}if(0===e.length)break;await Ao(Promise.race(e),t)}}KWt(){if(this.sZt)return;this.nZt=new Wt,this.nZt.Sy(this.zQ.ly);const t=()=>{this.sZt=void 0};this.sZt=Vh(this.rZt(this.nZt.ly),this.nZt).catch(this.LGt).then(t,t)}async XWt(){var t;null==(t=this.nZt)||t.Ty();const i=this.sZt;this.sZt=void 0,i&&await i}async rZt(t){for(;;){const i=this.AGt;i.forEach((t=>t.mct()));const e=this.cz.LE,s=[],n=[];for(const t of i){const i=t.xVt;for(const r of t.EVt){const t=r.jQt?s:n;if(r.iLt)t.push(r.UQt());else if(!r.QQt(e)){const e=i.NVt(r.YA);e?"ilt"===e.YA&&e.bzt===this.wGt?(r.oft(e),t.push(r.UQt())):"zLt"===e.YA&&e.bzt===this.wGt&&(r.F4(e),t.push(r.UQt())):n.push(i.IVt(r.YA))}}}if(0===s.length){if(await this.oZt(i,e,t))continue}if(0===s.length&&0===n.length){i.every((t=>t.EVt.length>0&&t.EVt.every((t=>t.QQt(e)))))&&this.vV.I3();break}await Ao(Promise.race([...s,...n]),t)}}async oZt(t,i,e){const s=[],n=[];for(const e of t){const t=e.eft(i);for(const r of e.EVt){if(!r.jQt)continue;const o=e.xVt.NVt(r.YA);if(void 0!==o){if(o.bzt===this.wGt)return!1;s.push(o)}else{if(e.iLt||e.BVt(i,t,this.UG.ZK)||!r.FQt(i,t))return!1;{const t=r.OQt.IQt;void 0!==t&&n.push(t)}}}}if(0===s.length)return!1;const r=sw(s,(t=>t.bzt)).bzt;if(s.every((t=>"zLt"===t.YA&&t.bzt===r))){const t=ew(s,(t=>t.lB)).lB,i=[...s,...n],r=await this.hZt(i);this.aZt(r)?(ta.XRt(RX,"Seamless switch from",this.vV.md,"to",r),await this.vV.D$(r),ta.XRt(RX,"Seamless switch complete.")):await this.uZt(t,r,e),this.wGt=s[0].bzt}else for(const i of t)for(const t of i.EVt){let e=i.xVt.NVt(t.YA);for(;void 0!==e&&("zLt"!==e.YA||e.bzt!==r);)ta.XRt(RX,"Removing append for other discontinuity, expecting "+r,e),i.xVt.VQt(e),e=i.xVt.NVt(t.YA)}return!0}aZt(t){return this.BGt===gu.Tz||this.BGt!==gu.Sz&&this.vV.N$(t)}async hZt(t){const i=t.map((t=>t.DVt.cht)),e=i.map((t=>({VN:t}))),s=Ms(t,(t=>t.DVt.gzt));s.push(...this.NIt.Tr.xUt);let n=await rq(this.MGt.contentProtection,i,s,this.OQ,this.MGt.useCredentials);return 0===n.length&&this.vV&&this.vV.md.yV.length>0&&(n=this.vV.md.yV),{YA:uh.FQ,E5:e,yV:n,U5:this.MGt.useManagedMediaSource}}async uZt(t,i,e){var s;const n=this.vV,r=n.ct,o=this.TE.length>0&&this.LE<t;if(o)try{for(ta.XRt(RX,"Marking end of stream and waiting for ended to switch discontinuity."),n.I3();!this.cz.OE&&this.cz.LE<t;)await this.cz.zy([Zi.Eb,Zi.qy],e)}catch(t){throw n.w3(),n.T5(r),t}ta.XRt(RX,"Perform hard switch from",null==(s=this.vV)?void 0:s.md,"to",i);try{this.cz.ktt(),this.LE<t&&this.cz.Wb(t,!0,!0),this.b5=void 0,this.y5=void 0,this.WWt(),await this.cz.tr(),this.vV=await this.cz.$n(i),this.N5(),this.uNt(),this.cNt(),this.vV.A5&&(this.b5=new MJ(Ri.NI,this.vV.A5,this.CGt?this.vpt:void 0,this.jGt?this.ojt:void 0),this.b5.O3(t-1,t)),this.vV.p5&&(this.y5=new MJ(Ri.SI,this.vV.p5,this.CGt?this.vpt:void 0,this.jGt?this.ojt:void 0),this.y5.O3(t-1,t)),this.WWt()}finally{o&&X(this.cz.Pk()),this.cz.Ltt()}if(this.uGt){const t=void 0!==this.y5&&void 0===this.PGt?[this.b5,this.y5]:[this.b5];this.uGt.CVt(t)}this.PGt&&this.PGt.CVt([this.y5]),ta.XRt(RX,"Hard switch complete.")}xWt(t){return Ao(gw(Ms(this.AGt,(t=>t.EVt.map((t=>t.UQt()))))),t)}gIt(){const t=this.Tk,i=this.yk;this.bDt===t&&this.MDt===i||(this.bDt=t,this.MDt=i,this.yo(new vo))}async gn(){ta.Hj(Hc,"Unloading the player."),this.cZt(),this.nDt(),await this.tr(),this.cz.zV=void 0,this.dWt.gn(),await this.LV.gn(),await this.vpt.gn(),await this.ojt.gn(),this.Oz.gn(),this.Pz.gn(),this.Ul.gn(),this.lZt.gn(),this.NDt.wy(),this.$Qt.wy(),this.FGt&&(this.FGt.wy(),this.FGt=void 0)}async tr(){ta.Hj(Hc,"Resetting the player."),this.fn(js._Rt,this.handleBufferingErrorEvent),this.wGt=-1,this.zQ.Ty(),this.w7.Ty(),this.w7=new Wt,this.w7.Sy(this.zQ.ly),this.NWt.Ty(),this.NWt=new Wt,this.NWt.Sy(this.zQ.ly);const t=[this.Ept,this.m7,this.kGt].filter($t);await Promise.all(t.map((t=>t.catch(Bn)))),this.Ept=void 0,this.m7=void 0,this.kGt=void 0,this.hGt=void 0,this.oGt=void 0,this.pGt=void 0,this.iWt=void 0,this.sWt=void 0,this.rWt=void 0,this.oWt=void 0,this.sWt=void 0,this.rWt=void 0,this.oWt=void 0,this.aV=void 0,this.QG.tr(),this.SWt=[],this.HGt(void 0),this.LWt(),await this.CWt(),this.PGt&&(this.PGt.wy(),this.PGt=void 0),this.uGt&&(this.uGt.wy(),this.uGt=void 0),this.uWt&&(this.uWt.wy(),this.uWt=void 0),this.y5=void 0,this.b5=void 0,this.vV=void 0,this.NIt&&(this.NIt.wy(),this.NIt=void 0),this.QGt&&(this.Ul.eV(this.QGt.nt),this.QGt=void 0),await this.LV.tr(),await this.vpt.tr(),await this.ojt.tr(),this.cz.jV(),await this.cz.tr(),this.MGt=void 0,this.IGt=!1,this.I5=Mo.PP(),this.TGt=void 0,this.yDt=void 0,this.bDt=0,this.MDt=0,this.NGt=void 0,this.yIt=!1,this.s7=!1,Fe.Rg(this.DGt),this.iIt=!1,this.dZt=!1,this.ZNt=0,this.BGt=gu.Mz,this.lZt.tr(),this.fZt(),this.yo(new Xe(this.LE,this.fk))}fZt(){for(const t of this.Oz.AL)t.gn();for(const t of this.Pz.AL)t.gn();for(const t of this.Ul.AL)t.gn();this.Oz.tr(),this.Pz.tr(),this.Ul.tr(),this.aWt.clear()}gZt(){this.lZt.yn(NJ,this.Ds),this.lZt.yn(E.oP,this.vz),this.lZt.yn(E.rP,this._Zt),this.lZt.yn(E.iP,this.vZt),this.UG.yn("RK",this.EDt),this.UG.yn("UK",this.kDt),this.cz.yn(IJ,this.Ds),this.cz.yn(Xi.ua,this.LDt),this.cz.yn(Zi.Yy,this.handleContentProtectionErrorEvent),this.cz.yn(Zi.Zy,this.wZt),this.cz.yn(Zi.qy,this.Sh),this.cz.yn(Zi.wb,this.fOt),this.cz.yn(Zi.so,this.mZt),this.cz.yn(Zi.mb,this.pZt),this.cz.yn(E.lL,this.rF),this.cz.yn(Zi.Eb,this.C9),this.cz.yn(Zi.Mb,this.We),this.cz.yn(Zi.bb,this.YV),this.cz.yn(Zi.yb,this.AZt),this.cz.yn(Zi.kb,this.yZt)}cZt(){this.lZt.fn(NJ,this.Ds),this.lZt.fn(E.oP,this.vz),this.lZt.fn(E.rP,this._Zt),this.lZt.fn(E.iP,this.vZt),this.UG.fn("RK",this.EDt),this.UG.fn("UK",this.kDt),this.cz.fn(IJ,this.Ds),this.cz.fn(Xi.ua,this.LDt),this.cz.fn(Zi.Yy,this.handleContentProtectionErrorEvent),this.cz.fn(Zi.Zy,this.wZt),this.cz.fn(Zi.qy,this.Sh),this.cz.fn(Zi.wb,this.fOt),this.cz.fn(Zi.so,this.mZt),this.cz.fn(Zi.mb,this.pZt),this.cz.fn(E.lL,this.rF),this.cz.fn(Zi.Eb,this.C9),this.cz.fn(Zi.Mb,this.We),this.cz.fn(Zi.bb,this.YV),this.cz.fn(Zi.yb,this.AZt),this.cz.fn(Zi.kb,this.yZt)}constructor(t,i,e,s,n,r,o,h){super(),this.UG=e,this.QG=s,this.$Qt=n,this.YGt=r,this.aWt=gc(),this.jGt=!0,this.CGt=!0,this.IGt=!1,this.MGt=void 0,this.vV=void 0,this.Ept=void 0,this.zQ=new Wt,this.NIt=void 0,this.sWt=void 0,this.rWt=void 0,this.oWt=void 0,this.lGt=void 0,this.hGt=void 0,this.oGt=void 0,this.pGt=void 0,this.iWt=void 0,this.SWt=[],this.y5=void 0,this.b5=void 0,this.PGt=void 0,this.uGt=void 0,this.uWt=void 0,this.FGt=void 0,this.NWt=new Wt,this.kGt=void 0,this.w7=new Wt,this.m7=void 0,this.wGt=-1,this.$Wt=void 0,this.iZt=void 0,this.nZt=void 0,this.JWt=void 0,this.tZt=void 0,this.sZt=void 0,this.WTt=!0,this.gWt=0,this.fWt=!1,this._V=Dn.pG,this.dV=void 0,this.fV=void 0,this.I5=Mo.PP(),this.bZt=[],this.TGt=void 0,this.SGt=void 0,this.yIt=!1,this.s7=!1,this.yDt=void 0,this.bDt=0,this.MDt=0,this.NGt=void 0,this.DGt=0,this.iIt=!1,this.dZt=!1,this.BGt=gu.Mz,this.dCt=void 0,this.MZt=void 0,this.ZNt=0,this.handleContentProtectionErrorEvent=t=>{this.dV=Au(t.errorObject),this.fV=t.errorObject,this.Ds(t)},this.handleBufferingErrorEvent=t=>{this.eG(new qi(vt.MEDIA_LOAD_ERROR,t.lt.message,t.lt))},this.LDt=t=>{this.eG(ju(t.lt))},this.wZt=()=>{this.$Bt();const t=this.ct;t!==this.yDt&&(this.yDt=t,this.yo(new yt(this.yDt)))},this.Sh=()=>{this.OE&&this.yo(new fa(this.LE))},this.fOt=()=>{this.yo(new Se(this.LE))},this.mZt=()=>{this.yNt(),this.yo(new fi(this.LE))},this.vz=()=>{void 0!==this.MZt&&(Fe.Rg(this.MZt),this.MZt=void 0),this.yo(new te(this.LE))},this.pZt=()=>{this.yo(new ii(this.LE))},this.rF=()=>{this.yo(new cu(this.LE,this.fk))},this.C9=()=>{const t=this.LRt;iw(this.bZt,t)||(this.yo(new yK),this.bZt=t),this.yo(new A(this.LE,this.NE))},this.UWt=no((t=>{t.RI===Ri.NI&&this.aGt()&&X(this.cGt())}),200),this.QWt=t=>{var i;this.ZNt+=t.BFt;const e=this.rt.V>0?t.RI===Ri.NI:t.RI===Ri.SI;"ilt"===t.zFt&&e&&X(this.vWt()),this.yo(new PU(function(t){if(t){if(void 0!==t.SMt){var i,e;const s=t.SMt.Cn+(null!=(e=t.SMt.V)?e:0);return{zu:t.zD,Nct:[null==(i=t.SMt)?void 0:i.Cn,s],zI:!0}}return{zu:t.zD.toString()||"",zI:!0}}return{zu:"",zI:!0}}(t.uri),(null==(i=this.DRt)?void 0:i.FY)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.RI,t.httpStatusCode,t.BFt))},this.We=()=>{this.yo(new Yr(this.LE))},this.YV=()=>{this.yo(new aa(this.LE))},this.AZt=()=>{this.gIt()},this.yZt=()=>{this.yo(new $e(this.LE,this.Nk))},this._Zt=()=>{this.cz.wk?this.yo(new sD(this.LE)):(null!=this.MZt||(this.MZt=Fe.Pg((()=>{this.dZt&&(this.dCt=void 0,X(this.fGt()))}),2500)),this.yNt(),this.yo(new sD(this.LE)))},this.vZt=()=>{this.dZt=!0,this.yo(new vS(this.LE,this.fk))},this.LGt=t=>{Tu(t)||Cb(t)||jb(t)||(this.LWt(),X(this.CWt()),this.yo(new BX(t)))},this.NQt=()=>{this.$Bt()},this.UGt=t=>{X(this.MWt(t.IRt,this.zQ.ly))},this.fAt=t=>{if(Tu(t))return;const i=t instanceof qi?t:new qi(vt.MEDIA_DECODE_ERROR,t.message,t);this.eG(i)},this.onTextTrackChange=t=>{if(!this.lGt)return;const i=t.Ht,e=this.hWt(i);e&&(i.UI===ua.FL||i.UI===ua.Jn?(X(this.bWt(e)),this.aWt.forEach((t=>{t!==i&&(t.UI=ua.Ch)}))):this.pGt&&this.pGt===e&&X(this.zGt(this.hGt,this.oGt,void 0)))},this.retryOfflineRenditionsCallback=async(t,i)=>{this.mGt!==t&&this.FRt!==t&&this.VRt!==t||(await this.NIt.lQt(t,i),t.wRt.QBt=-1/0)},this.EDt=()=>{this.uNt()},this.kDt=()=>{this.cNt()},this.FWt=t=>{const i=this.lGt,e=null==i?void 0:i.Czt;if(this.NIt.MQt(t.cht,t.IRt.wRt),!e&&(this.NIt.TQt(t.cht,t.IRt.wRt),this.WGt.sPt(),i)){const t=void 0!==this.hGt&&!Qa(i.$Rt,this.hGt),e=void 0!==this.oGt&&!Qa(i.tPt,this.oGt);(t||e)&&this.zGt(t?void 0:this.hGt,e?void 0:this.oGt,this.pGt).catch(Bn)}},this.YWt=t=>{this.WGt.oPt(t.IRt,t.vgt)},this.VWt=t=>{this.WGt.aPt(t.IRt,t.hVt.BB())},this.GWt=t=>{this.NIt.yQt(t.IRt)},this.slt=new dW(o),this.cz=t,this.OQ=i,this.AV=new zX(this.UG.NK),this.AWt=new UX(this.cz),this.wWt=new qX(this.UG),this.lft=h.retryConfiguration,this.Oz=new kt,this.Pz=new kt,this.WGt=new PX(this,this.UG,this.Oz,this.Pz),this.dWt=new Uu,this.LV=new or(this.cz,this.OQ),this.vpt=new cW(this.cz),this.ojt=new QF(this.cz),this.Ul=new BE([this.dWt,this.LV.Z,this.vpt.Z,this.ojt.Z,this.cz.nt]),this.SV=new PE(this.OQ),this.cz.zV=this.SV,this.NDt=new LJ(this,this.cz),this.lZt=new ko(this.NDt,!0),this.gZt()}},kJ=class{async nG(t,i){return!!iS(t.type)&&!t.useNativePlayback}async rG(t){return!!t.aes128||await mu(t,!0)}},LJ=class extends rD{get fk(){return this.ta.fk}CDt(){this.yo(new cu(this.LE,this.fk))}constructor(t,i){super(i),this.ta=t}};function xJ(t){return t.reduce(((t,i)=>t.Sn(i.wRt.MBt)),new Mo([0,1/0]))}function CJ(t){const i=dl(t,(t=>t.mRt)),e=t.filter((t=>t.pRt)),s=Fe.LA,n=e.map((t=>t.gs)).filter($t),r=fJ(n,s);return r?dl(e,(t=>t.gs===r)):i}function jJ(t,i){for(const e of i){const i=t.filter((t=>t.cht&&t.cht.Axt&&Wo(t.cht.Axt,e)));if(0!==i.length)return i}}function OJ(t){var i;return null!=(i=CJ(t))?i:t[0]}function RJ(t,i){return t.filter((t=>PJ(t,i)))}function PJ(t,i){const e=i+DJ,s=0===t.tPt.length||t.tPt.some((t=>t.wRt.QBt<Fe.Og()-e)),n=0===t.$Rt.length||t.$Rt.some((t=>t.wRt.QBt<Fe.Og()-e));return s&&n}function zJ(t,i){if(!i||i.wRt.Tzt)return!1;const e=i.wRt.Wot;return 0!==e.length&&e[0].lB>t}r(),r();var BJ=class{async KQt(t,i,e){try{const s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:e},s,t);return new T(n)}catch(t){throw new qi(vt.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}wy(){}static PS(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}};r(),Qi(),r(),r(),r();var UJ=class extends Jr{constructor(t,i){super(t),this.data=i}},QJ=["message","messageerror","error"];r();var FJ=class extends Jr{constructor(t){super(Xi.ua),this.error=t}},YJ=class extends tu{get TZt(){return this.SZt.ly.sy}NZt(t,i){this.TZt||(void 0!==this.IZt?this.IZt.NZt(t,i):this.DZt.push({Pb:t,EZt:i}))}kZt(){this.TZt||(this.SZt.Ty(),nt(this.DZt),void 0!==this.IZt&&this.IZt.kZt())}constructor(t){super(),this.IZt=void 0,this.DZt=[],this.LZt=t=>{if(this.TZt)t.kZt();else{this.IZt=t,this.IZt.yn(QJ,this.Ds);for(const i of this.DZt)t.NZt(i.Pb,i.EZt);nt(this.DZt)}},this.xZt=t=>{if(this.TZt)return;const i=t instanceof b?t:new b("Could not create Worker.");this.yo(new FJ(i)),this.kZt()},this.SZt=new Wt,t(this.SZt.ly).then(this.LZt,this.xZt)}};r(),r();var VJ=class extends tu{NZt(t,i){i?this.IZt.postMessage(t,i):this.IZt.postMessage(t)}kZt(){this.Bo(),this.IZt.removeEventListener("message",this.CZt),this.IZt.removeEventListener("messageerror",this.jZt),this.IZt.removeEventListener("error",this.ytt),this.IZt.terminate()}constructor(t,i){super(),this.CZt=t=>{this.yo(new UJ("message",t.data))},this.jZt=t=>{this.yo(new UJ("messageerror",t.data))},this.ytt=t=>{null==t.preventDefault||t.preventDefault.call(t);const i=t.error instanceof b?t.error:new b(t.message);this.yo(new FJ(i)),this.kZt()},this.IZt=new Jl(t,i),this.IZt.addEventListener("message",this.CZt),this.IZt.addEventListener("messageerror",this.jZt),this.IZt.addEventListener("error",this.ytt)}};Qi(),r(),Qi();var GJ=0,WJ=class extends tu{NZt(t,i){i?this.OZt.contentWindow.postMessage({type:"message",data:t},"*",i):this.OZt.contentWindow.postMessage({type:"message",data:t},"*")}kZt(){var t;this.OZt.removeEventListener("load",this.RZt),self.removeEventListener("message",this.PZt),null==(t=this.OZt.contentWindow)||t.postMessage({type:"terminate"},"*"),dn(this.OZt)}constructor(t,i){super(),this.RZt=()=>{this.OZt.removeEventListener("load",this.RZt),this.OZt.contentWindow.postMessage({type:"initialize",id:this.aS,script:this.zZt},"*")},this.PZt=t=>{t.origin===this.BZt&&t.data.id===this.aS&&("initialized"===t.data.type||("error"===t.data.type?(this.yo(new FJ(new b(t.data.data.message))),this.kZt()):this.yo(new UJ("message",t.data.data))))},this.aS=GJ++,this.zZt=t;const e=Fe.Ah("iframe.html",i);this.OZt=function(t){const i=h.createElement("iframe");return i.width="0",i.height="0",i.style.display="none",i.role="",i.src=t,h.body.appendChild(i),i}(e.href),this.BZt=e.origin,this.OZt.addEventListener("load",this.RZt),self.addEventListener("message",this.PZt)}};function ZJ(t,i,e){const s=Fe.TA(t,i);return new YJ((t=>async function(t,i,e,s){let n;try{return n=new VJ(t,e),await XJ(n,s),n}catch(t){null==n||n.kZt(),V(t)}if(HJ&&Ec){let i;try{const e=await Fe.wE.hI({zu:t,xI:Ve.GET,oI:Ee.ON,ly:s});i=await e.UN(s)}catch(t){V(t)}if(i){let t;try{const r=Ec([i],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new VJ(t,e),await XJ(n,s),n}catch(t){null==n||n.kZt(),V(t),HJ=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new WJ(t,i),await XJ(n,s),n}catch(t){throw null==n||n.kZt(),t}}(s,i,e,t)))}var HJ=!0;async function XJ(t,i){const e=await t.zy(["message","error"],i);if("error"===e.type)throw function(t){return new qi(vt.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(e.error);if(!function(t){return jd(t)&&"8.14.0"===t.UZt}(e.data))throw new qi(vt.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (8.14.0).");return e}r();var qJ=function(t){return t.QZt="KQt",t.FZt="MFt",t}({}),KJ=function(t){return t.YZt="VZt",t.GZt="WZt",t}({}),JJ=class{ZZt(){const t=ZJ(this.HZt,this.XZt,{name:"THEOplayer decrypt worker"});return t.yn("message",this.qZt),t.yn("error",this.KZt),t}KQt(t,i,e){const s=""+ ++this.JZt,n={$Zt:qJ.QZt,tHt:s,iHt:t,eHt:i,sHt:e},r=new xh;return this.nHt.set(s,r),null!=this.IZt||(this.IZt=this.ZZt()),this.IZt.NZt(n),r.rM}wy(t){void 0===t&&(t=new J),this.nHt.forEach((i=>i.nM(t))),this.nHt.clear(),this.IZt&&(this.IZt.kZt(),this.IZt=void 0)}constructor(t){this.IZt=void 0,this.JZt=0,this.nHt=ll(),this.qZt=t=>{const i=t.data,e=i.rHt,s=this.nHt.get(e);if(s)if(this.nHt.delete(e),i.oHt===KJ.YZt)s.sM(i.hHt);else if(i.oHt===KJ.GZt){const t=i.aHt,e=i.uHt?new b(i.uHt):void 0,n=new qi(vt.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",e);s.nM(n)}},this.KZt=t=>{const i=new qi(vt.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.wy(i)},this.XZt=t;try{this.HZt=Fe.TA("theoplayer.d.js",t)}catch(t){throw new qi(vt.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function $J(t){return BJ.PS()?new BJ:new JJ(t)}function t$(t){const i=dl(t.boxes,EC);if(!i)return;const e=dl(i.boxes,kC);return e?e.handlerType:void 0}function i$(t){const i=new RA;return i.boxes.push(...t.boxes),i}function e$(t){const i=new Il;return i.boxes.push(...t.boxes),i}r(),r(),r(),r(),Qi();var s$=8;function n$(t,i){const e=function(t){const i=new uA;return i.boxes.push(...t.boxes),i}(t),s=o$(i);for(let t=0;t<e.boxes.length;t++){const n=e.boxes[t];if(n===i)e.boxes[t]=new Tp(new T(i.getSize()-s$));else if(LC(n)){const i=n,r=Kv(i.boxes,(t=>t instanceof qp&&t.trackId===s));if(r>=0){const s=i.boxes[r],n=e$(i);n.boxes[r]=new Tp(new T(s.getSize()-s$)),e.boxes[t]=n}}}return e}function r$(t,i){const e=function(t){const i=new AA;return i.boxes.push(...t.boxes),i}(t);for(let t=0;t<e.boxes.length;t++){const s=e.boxes[t];if(jC(s)){const n=dl(s.boxes,OC);n&&n.trackId===i&&(e.boxes[t]=new Tp(new T(s.getSize()-s$)))}}return e}function o$(t){return dl(t.boxes,DC).trackId}function h$(t,i,e,s){const n=dl(t.boxes,OC),r=e.OU(i).fU();let o=D.ZERO;for(const i of t.boxes){if(i instanceof dA){o=Af(i.baseMediaDecodeTime,r),i.baseMediaDecodeTime=i.baseMediaDecodeTime.subtract(o);break}if(i instanceof xc){o=Af(D.fromNumber(i.baseMediaDecodeTime),r),i.baseMediaDecodeTime-=o.toNumber();break}}if(o.isZero())return;const h=dl(t.boxes,RC);if(void 0!==h&&h.samples.length>0){const t=h.samples;if(!h.flags.sampleDurationPresent){h.flags.sampleDurationPresent=!0;const i=null!=s?s:n.defaultSampleDuration;for(const e of t)e.duration=i}t[0].duration+=o.toNumber(),h.samples=t}}r();var a$="Mp4Transmuxer",u$=class extends $K{pVt(t,i){yi(i);const e=t.IRt,s=aj(Al(t.pzt.rI.rI));if(!s)throw new b("Mp4Transmuxer - Unable to parse "+e.YA+" MP4 initializer.");this.G4=s;const n=function(t){let i,e;for(const s of t.Z)i||(i=s.j2),e||(e=s.C2);if(i||e)return{Axt:i,bxt:e,OPt:void 0};return}(s);n&&this.bVt(e,n);const r=function(t){for(const i of t.Z)if(void 0!==i.O2)return i.O2;return}(s);void 0!==r&&this.MVt(e,r);const o=function(t){var i;const e=FA(t),s=dl(e.boxes,NC),n=s.boxes.filter(IC),r=dl(n,(t=>t$(t)===jp.AUDIO)),o=dl(n,(t=>t$(t)===jp.VIDEO)),h={Axt:{Fj:r?o$(r):void 0},bxt:{Fj:o?o$(o):void 0}},a=null==(i=dl(s.boxes,LC))?void 0:i.boxes.filter(xC);var u,c;const l=a?{Axt:null!=(u=dl(a,(t=>t.trackId===h.Axt.Fj)))?u:void 0,bxt:null!=(c=dl(a,(t=>t.trackId===h.bxt.Fj)))?c:void 0}:void 0;var d,f;if(l&&(h.Axt.dR=null==(d=l.Axt)?void 0:d.defaultSampleDuration,h.bxt.dR=null==(f=l.bxt)?void 0:f.defaultSampleDuration),!r||!o)return{Axt:r?t:void 0,bxt:o?t:void 0,_Q:h};const g=i$(e),_=i$(e),v=e.boxes.indexOf(s);g.boxes[v]=n$(s,o),_.boxes[v]=n$(s,r);const w=g.serialize().join(),m=_.serialize().join();return{Axt:w,bxt:m,_Q:h}}(t.pzt.rI.rI);if(this.cHt=o._Q,o.bxt){const i=dl(s.Z,(t=>t.Fj===o._Q.bxt.Fj)),e={YA:"zLt",rI:{YA:Me.v$,rI:o.bxt},Fut:Ri.NI,bzt:t.bzt,DVt:{cht:'video/mp4; codecs="'+i.C2+'"',gzt:t.gzt},lB:t.lB,IRt:t.IRt,ZQt:t.pzt.ZQt};this.QYt(e)}if(o.Axt){const i=dl(s.Z,(t=>t.Fj===o._Q.Axt.Fj)),e={YA:"zLt",rI:{YA:Me.v$,rI:o.Axt},Fut:Ri.SI,bzt:t.bzt,DVt:{cht:'audio/mp4; codecs="'+i.j2+'"',gzt:t.gzt},lB:t.lB,IRt:t.IRt,ZQt:t.pzt.ZQt};this.QYt(e)}return Promise.resolve()}async yVt(t,i){yi(i);const e=t.ilt.ZQt;ta.Hj(a$,"Transmuxing fMP4: "+Mi(e.Xyt));const s=t.ilt.rI,n=c$(s.rI,this.G4),r=nw(n.map((t=>t.Est)),MN);if(void 0!==r&&(e.kst=r,this.SVt(t.IRt)),!this.OUt.uUt(t.bzt)){const s=H.BU(e.lB);if(n.length>0){const i=nw(n.map((t=>t.lHt)),MN);for(const n of this.dVt)this.OUt.yUt(t.bzt,n,i,s,l$(e),!1);this.SVt(t.IRt)}this.OUt.uUt(t.bzt)||await Ao(this.OUt.lUt(t.bzt),i)}const o=this.OUt.wUt(t.bzt),h=e.kst?this.OUt.mUt(e.kst,e).BB():e.lB,a=tJ(e,h);var u;const c={$Yt:a,tVt:iJ(e,a),lB:h,ct:null!=(u=e.ct)?u:0,rQ:o.BB(),bzt:t.bzt,IRt:t.IRt,ZQt:t.ilt.ZQt},l=function(t,i){if(void 0===i.Axt.Fj)return{Axt:void 0,bxt:t};if(void 0===i.bxt.Fj)return{Axt:t,bxt:void 0};const e=FA(t),s=i$(e),n=i$(e);for(let t=0;t<e.boxes.length;t++){const r=e.boxes[t];CC(r)&&(s.boxes[t]=r$(r,i.bxt.Fj),n.boxes[t]=r$(r,i.Axt.Fj))}const r=s.serialize().join(),o=n.serialize().join();return{Axt:r,bxt:o}}(s.rI,this.cHt);if(l.bxt){var d;const i=this.cHt.bxt.Fj,s=dl(this.G4.Z,(t=>t.Fj===i)),o=dl(n,(t=>t.Fj===i)),h=this.dHt(l.bxt,s,o,null==(d=this.cHt)?void 0:d.bxt.dR,e);this.fHt=s,this.TVt(t.IRt,e,o.Est.qB(r));const a=Ei({YA:"ilt",rI:{YA:Me.v$,rI:h},Fut:Ri.NI},c);this.QYt(a)}if(l.Axt){const t=Ei({YA:"ilt",rI:{YA:Me.v$,rI:l.Axt},Fut:Ri.SI},c);this.QYt(t)}this.gHt=e,this._Ht=n}dHt(t,i,e,s,n){if(!l$(n))return t;if(!this.gHt||!this.fHt||!this._Ht)return t;const r=this.fHt.Fj,o=dl(this._Ht,(t=>t.Fj===r)),h=this.OUt.mUt(o.vHt,this.gHt),a=this.OUt.mUt(e.Est,n).qB(h).OU(i.xj);if(a.VB(H.sU))return t;if(a.UB(H.BU(.5)))return t;const u=eK(n)?n:n.Xzt;return ta.XRt(a$,"Stretching first video frame of segment #"+u.nzt+" to fill gap of "+a.BB()+"s"),function(t,i,e,s){const n=FA(t),r=dl(n.boxes,CC);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof mA&&h$(t,i,e,s);const n=r.getSize();if(n!==t){const i=n-t;for(const t of r.boxes)t instanceof mA&&PC(t,i)}}return n.serialize().join()}(t,i.xj,a,s)}constructor(...t){super(...t),this.G4=void 0,this.cHt=void 0,this.gHt=void 0,this._Ht=void 0,this.fHt=void 0}};function c$(t,i){const e=aT(pe.dj(Al(t)),Rt.mC);if(!e)throw new b("Mp4Transmuxer - Unable to parse segment or part.");return function(t,i){const e=[];for(const n of t.Z){if(!n.MR||0===n.bR.length||0===n.bR[0].kR.length)continue;const t=n.nj.Fj,r=dl(i.Z,(i=>i.Fj===t));let o=0,h=1/0,a=0;const u=n.nj.dR||0;for(const t of n.bR)for(const i of t.kR){const t=i.LR||0,e=o+t;var s;o+=null!=(s=i.ct)?s:u;const n=o+t;e<h&&(h=e),n>a&&(a=n)}const c=H.tU(n.MR.MR,r.xj);e.push({Fj:t,lHt:c,Est:c.Kz(H.iU(h,r.xj)),wHt:c.Kz(H.iU(o,r.xj)),vHt:c.Kz(H.iU(a,r.xj))})}return e}(e,i)}function l$(t){return eK(t)?t.mzt:0===t.Kzt&&t.Xzt.mzt}var d$="MpegtsTransmuxer",f$=class extends u${pVt(t,i){return super.pVt(t,i)}vVt(t,i){if(super.vVt(t,i),this.lD.mHt())return;var e;const s=null!=(e=null==i?void 0:i.Xyt)?e:t.Xyt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.zD)&&this.lD.pHt()}AHt(t){let i;return t.IRt===this.yHt&&this.bHt.has(t.bzt)?i=this.bHt.get(t.bzt):(i=yJ(t.ilt.rI.rI),this.yHt=t.IRt,this.bHt.set(t.bzt,i)),i}async yVt(t,i){yi(i);const e=this.AHt(t),s=t.ilt;if(e!==AJ.iGt&&e!==AJ.eGt)return super.yVt(t,i);if(s.ZQt.gzt.some(_$))throw new qi(vt.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.lD.pHt();let r;e===AJ.iGt?(ta.Hj(d$,"Transmuxing MPEG-TS: "+Mi(s.ZQt.Xyt)),r=await n.MHt({data:s.rI.rI,metadata:this.THt})):(ta.Hj(d$,"Transmuxing raw audio: "+Mi(s.ZQt.Xyt)),r=await n.SHt({data:s.rI.rI,metadata:this.THt})),yi(i),this.bVt(t.IRt,{Axt:r.metadata.audio_codec,bxt:r.metadata.video_codec,OPt:void 0}),r.metadata.video_frame_rate&&this.MVt(t.IRt,r.metadata.video_frame_rate);const o=v$(r.metadata.first_decode_timestamp),h=v$(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?v$(r.metadata.first_video_presentation_timestamp):void 0;if(s.ZQt.kst=h,this.SVt(t.IRt),void 0!==a&&this.TVt(t.IRt,s.ZQt,function(t,i){let e=t.qB(i);return e.WB(H.sU)&&(e=e.Kz(NN())),e}(a,h)),!this.OUt.uUt(t.bzt)){const e=H.BU(s.ZQt.lB);for(const i of this.dVt)this.OUt.yUt(t.bzt,i,o,e,l$(s.ZQt),!0);this.SVt(t.IRt),this.OUt.uUt(t.bzt)||await Ao(this.OUt.lUt(t.bzt),i)}const u=this.OUt.AUt(o,s.ZQt);this.THt=r.metadata;const c=this.OUt.mUt(h,s.ZQt).BB(),l=tJ(s.ZQt,c);var d;const f={$Yt:l,tVt:iJ(s.ZQt,l),lB:c,ct:null!=(d=s.ZQt.ct)?d:0,rQ:u.BB(),bzt:t.bzt,IRt:t.IRt,ZQt:s.ZQt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.dVt){const i=Ei({YA:"ilt",rI:void 0,Fut:t},f);this.QYt(i)}return}const g=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.NHt||this.IHt!==t.bzt||!_m(this.NHt,r.data.audio_init))){const i=this.OUt.mUt(s.ZQt.kst,s.ZQt).BB(),e={YA:"zLt",rI:{YA:Me.v$,rI:r.data.audio_init},Fut:Ri.SI,bzt:t.bzt,DVt:{cht:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',gzt:s.ZQt.gzt},lB:i,IRt:t.IRt,ZQt:s.ZQt};this.NHt=r.data.audio_init,this.IHt=t.bzt,this.QYt(e)}const i=Ei({YA:"ilt",rI:{YA:Me.v$,rI:r.data.audio_media},Fut:Ri.SI},f);this.QYt(i)}else if(t.ilt.ZQt.Zzt&&Qa(this.dVt,Ri.SI)){const t=Ei({YA:"ilt",rI:void 0,Fut:Ri.SI},f);this.QYt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.DHt||this.EHt!==t.bzt||!_m(this.DHt,r.data.video_init))){const i=this.OUt.mUt(s.ZQt.kst,s.ZQt).BB(),e={YA:"zLt",rI:{YA:Me.v$,rI:r.data.video_init},Fut:Ri.NI,bzt:t.bzt,DVt:{cht:'video/mp4; codecs="'+r.metadata.video_codec+'"',gzt:s.ZQt.gzt},lB:i,IRt:t.IRt,ZQt:s.ZQt};this.DHt=r.data.video_init,this.EHt=t.bzt,this.kHt=aj(Al(r.data.video_init)),this.QYt(e)}const i=this.kHt.Z[0],e=c$(r.data.video_media,this.kHt)[0],n=this.dHt(r.data.video_media,i,e,void 0,s.ZQt);this.fHt=i;const o=Ei({YA:"ilt",rI:{YA:Me.v$,rI:n},Fut:Ri.NI},f);this.QYt(o),g.push(e)}else if(t.ilt.ZQt.Zzt&&Qa(this.dVt,Ri.NI)){const t=Ei({YA:"ilt",rI:void 0,Fut:Ri.NI},f);this.QYt(t)}this.gHt=s.ZQt,this._Ht=g}Ty(){this.NHt=void 0,this.DHt=void 0,this.IHt=-1,this.EHt=-1,super.Ty()}constructor(t,i,e,s){super(i,e,s),this.THt=void 0,this.NHt=void 0,this.DHt=void 0,this.kHt=void 0,this.IHt=-1,this.EHt=-1,this.yHt=void 0,this.bHt=gc(),this.lD=t}},g$=class{RSt(t,i,e){return new f$(this,t,i,e)}};function _$(t){return t.xI===cn.bPt}function v$(t){return H.tU(D.fromBits(t.low,t.high),t.base)}r(),Qi(),r();var w$=function(t){return t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4",t}({});Uc();var m$=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=Ro.mf;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(Zn("AGFzbQEAAAA="))}catch(t){return!1}}();return m$=()=>t,t};var p$=class{MHt(t){return this.LHt(w$.MPEGTS_TO_FMP4,t)}SHt(t){return this.LHt(w$.RAW_AUDIO_TO_FMP4,t)}ZZt(){const t=ZJ(this.HZt,this.XZt,{name:"THEOplayer transmux worker"});return t.yn("message",this.qZt),t.yn("error",this.KZt),t}LHt(t,i){const e=++this.JZt,s={type:t,id:e,input:i},n=new xh;return this.nHt.set(e,n),this.IZt.NZt(s),n.rM}wy(t){void 0===t&&(t=new J),this.nHt.forEach((i=>i.nM(t))),this.nHt.clear(),this.IZt.kZt()}constructor(t){this.JZt=0,this.nHt=gc(),this.qZt=t=>{const i=t.data;if(void 0!==i.requestId){const t=this.nHt.get(i.requestId);if(!t)return;this.nHt.delete(i.requestId),i.success?t.sM(i.output):t.nM(new qi(i.errorCode,i.error))}else i.success||this.wy(new qi(i.errorCode,i.error))},this.KZt=t=>{const i=new qi(vt.MEDIA_DECODE_ERROR,t.error.message,t.error);this.wy(i)},this.XZt=t;const i=m$()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.HZt=Fe.TA(i,t)}catch(t){throw new qi(vt.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.IZt=this.ZZt()}},A$=class extends g${mHt(){return void 0!==this.IZt}pHt(){var t;return null!=(t=this.IZt)?t:this.IZt=new p$(this.xHt)}wy(){this.IZt&&(this.IZt.wy(),this.IZt=void 0)}constructor(t){super(),this.xHt=t,this.IZt=void 0}},y$=class{xst(){return new A$(this.xHt)}constructor(t){this.xHt=t}};Uc();var b$=class extends EJ{jk(){return this.cz.jk()}get xk(){return this.cz.xk}set xk(t){this.cz.xk=t}async gn(){var t;await super.gn(),null==(t=this.ODt)||t.gn()}constructor(t,i,e,s,n,r,o,h){super(t,i,e,s,n,r,o,h),Ro.qf&&(this.ODt=new nU(this))}},M$=class extends b${async gn(){await super.gn(),await this.QV.BV(this.cz)}constructor(t,i,e,s,n,r,o,h){const a=new rs(t);super(a.sG(Ri.NI),i,e,s,n,r,o,h),this.QV=a}},T$=class extends kJ{async nG(t,i){return!!Wf(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(Ro.Ka||Ro.Sg))&&super.nG(t,i))}async rG(t){return!(t.clearkey&&!t.fairplay&&Ro.qf)&&super.rG(t)}};Gi(new class extends T${bx(t,i,e,s,n,r,o){return new M$(i,e,n,r,$J(s.libraryLocation),new y$(s.libraryLocation),new ir(_h.Ld.Hot,_h.Ld.Zot,_h.Ld.Wot,_h.Ld.qot),s)}oG(){return!0}constructor(...t){super(...t),this.hG=pt.tx}}),ta.Rt=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)},r(),r(),r(),r();var S$=class{Iot(t,i){return Promise.resolve(!1)}Eot(t,i){return Promise.resolve(void 0)}Tot(t){return Promise.resolve(void 0)}VJ(t){return Promise.resolve(void 0)}},N$=class extends tu{CHt(){var t;return null==(t=this.jHt)?void 0:t.wRt}Cn(){X(co((()=>this.OHt(this.rN.ly)),this.rN.ly))}async OHt(t){await this.NIt.sQt(t),this.RHt&&(this.PHt(this.RHt.ji,this.RHt.Ti),this.RHt=void 0),this.Z9=!0}zHt(t,i){this.Z9?this.PHt(t,i):this.RHt={ji:t,Ti:i}}PHt(t,i){const e=this.BHt(t,i),s=null==e?void 0:e.tPt[0];s!==this.jHt&&(this.UHt(),void 0!==s&&(this.jHt=s,this.QHt=new NK(this.NIt,s),this.QHt.aFt()))}UHt(){this.jHt=void 0,this.QHt&&(this.QHt.wy(),this.QHt=void 0)}BHt(t,i){const e=dl(this.NIt.Tr.JRt,(e=>void 0!==e.cxt&&e.cxt.ji===t&&e.cxt.Ti===i));return null!=e?e:this.NIt.Tr.JRt[0]}gn(){this.Bo(),this.rN.Ty(),this.rN.wy(),this.UHt(),this.NIt.wy()}constructor(t,i,e){super(),this.jHt=void 0,this.QHt=void 0,this.RHt=void 0,this.rN=new Wt,this.FHt=()=>{this.yo(new XV)},this.wc=t,this.NIt=new _K(e,new S$,t.useCredentials,t.src,t.liveOffset),this.NIt.yn(Zi.fb,this.Ds),this.Z9=!1}};r();var I$=class extends gs{get ht(){return this.L8.ht}get TE(){return this.L8.TE}get NE(){return this.L8.NE}set NE(t){this.L8.NE=t}get bt(){return this.L8.bt}get LE(){return this.L8.LE}set LE(t){this.L8.LE=t}CE(t,i){this.LE=t}get ct(){return this.L8.ct}get OE(){return this.L8.OE}get zE(){return this.L8.zE}get UE(){return this.L8.UE}get lt(){return this.L8.lt}get FE(){return this.L8.FE}get VE(){return this.L8.VE}get WE(){return this.L8.WE}set WE(t){this.L8.WE=t}get XE(){return this.L8.XE}get KE(){return this.L8.KE}get $E(){return this.L8.$E}set $E(t){this.L8.$E=t}get rk(){return this.L8.rk}get ck(){return this.L8.ck}set ck(t){this.L8.ck=t}get fk(){return this.L8.fk}get _k(){return this.L8._k}get wk(){return this.L8.wk}get wV(){return this.L8.wV}get nt(){return this.L8.nt}get yk(){return this.L8.yk}get rt(){return this.L8.rt}get Tk(){return this.L8.Tk}get Nk(){return this.L8.Nk}set Nk(t){this.L8.Nk=t}get Ek(){return this.L8.Ek}get xk(){return this.L8.xk}set xk(t){this.L8.xk=t}get pV(){return this.L8.pV}get Az(){}Bk(){return this.L8.Bk()}Ck(){return this.L8.Ck()}_a(){return this.L8._a()}Wk(t){return this.L8.Wk(t)}jk(){return this.L8.jk()}be(){return this.L8.be()}Fk(){return this.L8.Fk()}Yk(){return this.L8.Yk()}Rk(){return this.L8.Rk()}Pk(){return this.L8.Pk()}tr(){return this.L8.tr()}ka(t,i,e){return this.L8.ka(t,i,e)}ge(){return this.L8.ge()}Uk(){return this.L8.Uk()}Qk(){return this.L8.Qk()}gn(){this.Bo();for(const t of JE)this.L8.fn(t,this.Ds);return this.L8.gn()}constructor(t){super(),this.L8=t;for(const t of JE)this.L8.yn(t,this.Ds)}},D$=class extends I${async ka(t,i,e){await super.ka(t,i,e),t.hlsDateRange&&this.Vyt(t,i)}Vyt(t,i){this.YHt=new N$(t,i,this.VHt),this.YHt.yn(Zi.fb,this.handleManifestUpdate),this.YHt.Cn()}tr(){return this.SQt&&(this.nt.it(this.SQt),this.C7.it(this.SQt),this.SQt.gn(),this.SQt=void 0,this.GHt=!1),this.YHt&&(this.YHt.gn(),this.YHt=void 0),this.C7.tr(),super.tr()}gn(){return this.fn(Zi.yb,this.AZt),this.YHt&&(this.YHt.gn(),this.YHt=void 0),this.C7.gn(),super.gn()}constructor(t,i,e){super(t),this.YHt=void 0,this.GHt=!1,this.SQt=void 0,this.handleManifestUpdate=()=>{const t=this.YHt.CHt();if(t){const i=this.wV;if(i){const e=i.getTime();let s=this.SQt;s||(s=new Vq,this.SQt=s),s.Yn(t.Mzt,(t=>(t.getTime()-e)/1e3)),!this.GHt&&s.L.V>0&&(this.nt.tt(s),this.C7.tt(s),this.GHt=!0)}}},this.AZt=()=>{this.YHt&&this.YHt.zHt(this.Tk,this.yk)},this.VHt=i,this.C7=new oR(this),this.yn(Zi.yb,this.AZt)}};!function(t){HE.aG().uG(t)}((function(t,i,e){return new D$(t,i,e)})),r(),r(),r(),Qi(),r();var ps=class extends Co{get name(){return"CastError"}constructor(t,i=""){super("An error occurred while casting."),this.errorCode=t,this.description=i}};bs();async function E$(t){x$()||await async function(t){if(null==t?void 0:t.sy)return Promise.reject(new J);const{rM:i,sM:e,nM:n}=function(){let t,i;return{rM:new Promise(((e,s)=>{t=e,i=s})),sM:t,nM:i}}(),r=s.__onGCastApiAvailable,o=()=>{s.__onGCastApiAvailable=r,n(new J)};return s.__onGCastApiAvailable=(i,h)=>{i?e():n(new b(h)),null==t||t.oy(o),s.__onGCastApiAvailable=r,r&&r(i,h)},null==t||t.uy(o),i}(t),L$()||await Dt(100,t),L$()||(Fe.uA('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await k$())}var k$=di((()=>function(t){return new Promise(((i,e)=>{const s=h.createElement("script");s.onload=()=>i(),s.onerror=t=>e((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch((()=>{throw new ps("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))));function L$(){return Boolean("undefined"!=typeof cast&&cast.framework)}function x$(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function C$(t,i,e,s){if($t(i))for(const e of _.keys(i)){if("type"===e||"images"===e)continue;const s=i[e];$t(s)&&(t[e]=s)}!function(t,i,e,s){if(!$t(e)&&!$t(null==i?void 0:i.images))return;t.images=[],e&&t.images.push(new s.Image(e));if(null==i?void 0:i.images)if(Ic(i.images))t.images.push(new s.Image(i.images));else if(Zr(i.images))for(const e of i.images){let i;var n,r;if(Ic(e))i=new s.Image(e);else i=new s.Image(e.src),i.height=null!=(n=e.height)?n:null,i.width=null!=(r=e.width)?r:null;t.images.push(i)}}(t,i,e,s)}function j$(t,i,e){return void 0===e&&(e=chrome),function(t,i,e){switch(null==t?void 0:t.type){case"movie":{const s=new e.MovieMediaMetadata;return C$(s,t,i,e),s}case"audio":{const s=new e.MusicTrackMediaMetadata;return C$(s,t,i,e),!$t(s.artist)&&$t(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new e.TvShowMediaMetadata;return C$(s,t,i,e),!$t(s.title)&&$t(t.episodeTitle)&&(s.title=t.episodeTitle),!$t(s.season)&&$t(t.seasonNumber)&&(s.season=t.seasonNumber),!$t(s.episode)&&$t(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new e.GenericMediaMetadata;return C$(s,t,i,e),s}}}(t,i,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(e))}function Ur(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function O$(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return dl(t.items,(i=>i.itemId===t.currentItemId))}r(),r(),bs(),r(),r(),r();var R$="urn:x-cast:com.theoplayer.cast";r(),r();var P$=function(t){return t.WHt="theoplayer_receiver_info",t.ZHt="theoplayer_trackpropertychange",t.HHt="theoplayer_propertychange",t}({});r();var z$=function(t){return t.SKIP_AD="SKIP_AD",t}({});r();function Xr(t){h.createElement("img").src=t}r(),r(),r();var B$=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function U$(t){if(!Ic(t))return;const i=t.match(B$);return i?3600*C(i[1],10)+60*C(i[2],10)+Number(i[3])+(Number(i[4])||0)/1e3:void 0}function Q$(t){if(void 0===t)return;const i=t.match(/^([1-9]?\d|100)%$/);return i?C(i[1])/100:void 0}function F$(t,i){return"vmap"===t.type||!$t(t.type)&&!$t(i)}function Y$(t,i){return"vast"===t.type||!$t(t.type)&&$t(i)}r(),r(),r();var V$=class{},G$=class extends V${get XHt(){return this.Dc}qHt(){return null!=this.KHt||(this.KHt=Ms(this.Dc,(t=>t.qHt()))),this.KHt}constructor(t){super(),this.Dc=t.sort(((t,i)=>t.mR-i.mR))}};r(),r();var W$=class extends V${get o(){return this.JHt}get mR(){return this.$Ht}get tXt(){return this.iXt}constructor(t,i){super(),this.JHt=t,this.$Ht=i,this.iXt=!1}},Z$=class extends W${get eXt(){return this.sXt}get nXt(){return this.rXt}get oXt(){return this.hXt}get aXt(){return this.uXt}get lt(){return this.dV}qHt(){if(void 0===this.cXt){let t,i,e,s=[];for(const n of this.sXt)n.lXt&&(t=n.lXt),n.dXt&&(i=n.dXt),n.fXt&&(e=n.fXt),s=s.concat(n.universalAdIds);this.cXt={aXt:this.aXt,lXt:t,gXt:i,fXt:e,lt:this.lt,_Xt:s}}return[this.cXt]}constructor(t,i,e,s,n,r,o){super(t,i),this.rXt=e,this.hXt=s,this.uXt=n,this.sXt=r,this.dV=o}};r(),r();var H$=class{get vXt(){return this.wXt}get mXt(){return this.pXt}constructor(t,i){this.wXt=t,this.pXt=i}},X$=class{get AXt(){return this.yXt}get bXt(){return this.MXt}get TXt(){return this.SXt}get NXt(){return this.IXt}get Yl(){return this.DXt}set Yl(t){this.DXt=t}get EXt(){return this.kXt}get LXt(){return this.xXt}CXt(){this.xXt=!0}get nXt(){return this.rXt}constructor(t,i,e,s,n,r){this.yXt=t,this.MXt=i,this.SXt=e,this.IXt=s,this.xXt=!1,this.kXt=n,this.rXt=r}};r();var q$=function(t){return t.jXt="all",t.OXt="any",t.pG="none",t}({});var K$=class{get RXt(){return this.PXt}get zXt(){return this.BXt}constructor(t,i){this.PXt=t,this.BXt=i}},J$=class{get o(){return this.aS}get ji(){return this.dT}get Ti(){return this.fT}get UXt(){return this.QXt}get FXt(){return this.YXt}get VXt(){return this.GXt}get WXt(){return this.ZXt}get HXt(){return this.XXt}get qXt(){return this.KXt}get JXt(){return this.$Xt}get AXt(){return this.yXt}get bXt(){return this.MXt}get TXt(){return this.SXt}get tqt(){return this.iqt}get mXt(){return this.eqt}get sqt(){return this.nqt}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d,f,g,_){this.dT=t,this.fT=i,this.aS=e,this.QXt=s,this.YXt=n,this.GXt=r,this.ZXt=o,this.XXt=h,this.KXt=a,this.$Xt=u,this.yXt=c,this.MXt=l,this.SXt=d,this.iqt=f,this.eqt=g,this.nqt=_}};r();var $$=class{get id(){return this.aS}get uri(){return this.tBt}constructor(t,i){this.aS=t,this.tBt=i}},t0=class{get rqt(){return this.oqt}get hqt(){return this.aqt}get uqt(){return this.cqt}get lqt(){return this.dqt}constructor(t,i,e,s){this.oqt=t,this.aqt=i,this.cqt=e,this.dqt=s}},i0=class extends W${get aXt(){return this.uXt}get fqt(){return this.gqt}get _qt(){return this.vqt}get eXt(){return this.sXt}get wqt(){return this.mqt}get pqt(){return this.Aqt}get lt(){return this.dV}qHt(){return void 0===this.gqt?[]:(null!=this.KHt||(this.KHt=this.gqt.qHt().map((t=>this.yqt(t)))),this.KHt)}yqt(t){let i,e,s;for(const t of this.eXt)t.lXt&&(i=t.lXt),t.dXt&&(e=t.dXt),t.fXt&&(s=t.fXt);const n=t.aXt.concat(this.aXt);let r=t.lXt;if(i&&t.lXt){const e=new t0(t.lXt.bqt.rqt,t.lXt.bqt.hqt,t.lXt.bqt.uqt.concat(i.bqt.uqt),t.lXt.bqt.lqt.concat(i.bqt.lqt));r=t.lXt,r.bqt=e,r.mXt=r.mXt.concat(i.mXt)}let o=t.gXt;if(e&&e.vXt){var h,a;const s=[];for(const t of e.vXt)s.concat(t.NXt.uqt);const n=[];var u,c;for(const e of null!=(u=null==(h=t.gXt)?void 0:h.vXt)?u:[]){var l,d,f;const r=new t0(e.NXt.rqt,e.NXt.hqt,e.NXt.uqt.concat(s),(null!=(d=null==(l=t.lXt)?void 0:l.bqt.lqt)?d:[]).concat(null!=(f=null==i?void 0:i.bqt.lqt)?f:[]));n.push(new X$(e.AXt,e.bXt,e.TXt,r,e.EXt,e.nXt))}o=new H$(n,(null!=(c=null==(a=t.gXt)?void 0:a.mXt)?c:[]).concat(e.mXt))}let g=t.fXt;if(g){var _;let i=g.RXt;var v,w;s&&s.RXt&&(i=s.RXt),g=new K$(i,(null!=(v=null==(_=t.fXt)?void 0:_.zXt)?v:[]).concat(null!=(w=null==s?void 0:s.zXt)?w:[]))}let m=t.lt;return this.lt&&(m=this.lt),{aXt:n,lXt:r,gXt:o,fXt:g,lt:m,_Xt:t._Xt}}constructor(t,i,e,s,n,r,o,h,a){super(t,i),this.uXt=e,this.gqt=s,this.vqt=n,this.sXt=r,this.mqt=o,this.Aqt=h,this.dV=a}};r();var e0=class{get o(){return this.aS}get Mqt(){return this.Tqt}get Sqt(){return this.Nqt}get HXt(){return this.XXt}get lXt(){return this.Iqt}get dXt(){return this.Dqt}get fXt(){return this.Eqt}get universalAdIds(){return this.kqt}constructor(t,i,e,s,n,r,o,h){this.aS=t,this.Tqt=i,this.Nqt=e,this.XXt=s,this.Iqt=n,this.Dqt=r,this.Eqt=o,this.kqt=h}};r();var s0=class{get ct(){return this.Lqt}get xqt(){return this.Cqt}get mXt(){return this.pXt}set mXt(t){this.pXt=t}set bqt(t){this.jqt=t}get bqt(){return this.jqt}get Oqt(){return this.Rqt}set Oqt(t){this.Rqt=t}get Pqt(){return this.xXt}get Yl(){return this.DXt}set Yl(t){this.DXt=t}get EXt(){return this.kXt}get nXt(){return this.rXt}CXt(){this.xXt=!0}get zqt(){return this.Bqt}set zqt(t){this.Bqt=t}get Uqt(){return this.Qqt}constructor(t,i,e,s,n,r,o,h){this.Lqt=t,this.Cqt=i,this.pXt=e,this.jqt=s,this.Rqt=n,this.xXt=!1,this.kXt=r,this.rXt=o,this.Qqt=h}};function O(t,i){return o0(t)&&t.getAttribute(i)||void 0}function n0(t,i){return r0(t,i,void 0,!1)}function r0(t,i,e,s){return i===(t.localName?t.localName:t.nodeName)&&(s&&e?e===t.namespaceURI:!e||!t.namespaceURI||e===t.namespaceURI)}function Nc(t,i){const e=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);o0(n)&&n0(n,i)&&e.push(n)}return e}function o0(t){return t&&1===t.nodeType}function h0(t,i){const e=(new DOMParser).parseFromString(t,i);if(!e||e.getElementsByTagName("parsererror").length>0)throw new b('Invalid document for MIME type "'+i+'"');return e}function a0(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function u0(t){return"data:application/xml,"+encodeURIComponent(t)}r(),r();var dt=function(t){return t.Fqt="mute",t.Yqt="unmute",t.wb="pause",t.Vqt="resume",t.Gqt="rewind",t.Wqt="skip",t.Zqt="playerExpand",t.Hqt="playerCollapse",t.Xqt="fullscreen",t.qqt="exitFullscreen",t.Kqt="expand",t.COLLAPSE="collapse",t.TSt="start",t.Jqt="firstQuartile",t.$qt="thirdQuartile",t.tKt="midpoint",t.iKt="complete",t.eKt="acceptInvitationLinear",t.sKt="acceptInvitation",t.nKt="timeSpentViewing",t.rKt="otherAdInteraction",t.mb="progress",t.oKt="creativeView",t.hKt="adExpand",t.aKt="adCollapse",t.uKt="minimize",t.cKt="close",t.lKt="closeLinear",t.dKt="overlayViewDuration",t.fKt="breakStart",t.gKt="breakEnd",t.ua="error",t}({});function c0(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}var l0=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function d0(t){return void 0!==t&&-1!==l0.indexOf(t)}var f0=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function g0(t){return void 0!==t&&-1!==f0.indexOf(t)}var _0=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function v0(t){return void 0!==t&&-1!==_0.indexOf(t)}function w0(t,i){if(void 0===t||""===t||void 0===i)return;let e=t.match(/^(\d+):(\d+):(\d+)$/);return e?S(e[1]||"0")+60*S(e[2]||"0")+S(e[3]||"0"):(e=t.match(/^(100|[1-9]\d|\d)%$/),e?S(e[1]||"0")*i/100:void 0)}var m0=class{get dZ(){return this._Kt}get tc(){return this.vKt}get eventURL(){return this.wKt}constructor(t,i,e){this._Kt=t,this.vKt=i,this.wKt=e}};r();var p0=class{get mKt(){return this.pKt}constructor(t){this.pKt=t}},A0=class extends p0{get rqt(){return this.oqt}get sqt(){return this.nqt}get AKt(){return this.yKt}constructor(t,i,e,s){super(t),this.yKt=i,this.oqt=e,this.nqt=s}},y0=class extends p0{constructor(t){super(t)}},b0=class extends p0{constructor(t){super(t)}};r(),Qi();var M0={bKt:{oM:100,Pb:"XML parsing error."},MKt:{oM:303,Pb:"Empty or invalid VAST error."},TKt:{oM:400,Pb:"General linear error"},SKt:{oM:403,Pb:"Unsupported MIME-type or missing mediafiles error"},NKt:{oM:500,Pb:"General nonlinear error"},BW:{oM:900,Pb:"Network error"}},T0=class{get IKt(){return this.DKt}EKt(t){if(!this.IKt)return;const i=this.IKt.replace(/\[ERRORCODE]/,""+t.oM);Xr(i)}constructor(t){this.DKt=t}};r();var Ie=class extends Co{get kKt(){return this.LKt}get xKt(){var t;return null!=(t=this.CKt)?t:900}constructor(t,i,e,s){super(e||i&&S0[i]||t,s),this.LKt=t,this.CKt=i,this.jKt=e}},Nr=function(t){return t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general",t}({}),$u=function(t){return t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED",t}({}),S0={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function N0(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case $n.tx:case $n.ix:case $n.$L:return!0;default:return!1}}function I0(t){const i=Eh();return!!(N0(t)||t&&i&&(null==i?void 0:i.canPlayType)&&i.canPlayType(t))||(Vr("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function D0(t,i){for(const e of i){new T0(e).EKt(t)}}function Vr(t){0}r(),Qi(),r();var E0=class{get OKt(){return this.RKt}get PKt(){return this.zKt}constructor(t,i){this.RKt=t,this.zKt=i}},k0=class t{async BKt(i,e){if(F$(i.sources,i.timeOffset)){const s=await t.UKt(i.sources.src,e),n=s&&s.documentElement;if(!n)throw new Ie(Nr.NETWORK,$u.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(n0(n,"VMAP"))return await this.QKt(n,i,e);if(n0(n,"VAST")){const t=await this.FKt(n,e,!1);if(t){const e=new j0("",!0,!0,t);return[new x0("start",e,L0.YKt,"",[],!1,!0,i)]}return[]}throw new Ie(Nr.GENERAL,$u.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(Y$(i.sources,i.timeOffset))return[new C0(String(i.timeOffset),i,e)];throw new Ie(Nr.GENERAL,$u.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async VKt(i,e,s,n){let r;void 0===n&&(n=[]);try{r=await t.UKt(i,e)}catch(t){throw D0(t instanceof Ie&&t.xKt===$u.VAST_MALFORMED_RESPONSE?M0.MKt:M0.BW,n),t}const o=r&&r.documentElement;if(o&&n0(o,"VAST"))return await this.FKt(o,e,s,n);o&&n0(o,"VMAP")&&Bi("Received VMAP ad when expecting VAST. Please set the type of your ad source in the configuration, or make sure to not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included.")}async GKt(t,i,e,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new Ie(Nr.GENERAL,$u.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.VKt(t.sources.src,s,!1),o=new j0("",!0,!0,r),h=new x0(i,o,L0.YKt,"",[],!1,!0,t);return h.WKt=e,h}static async requestSuccessOnly(t,i){let e;try{e=await i.hI(t)}catch(t){throw new Ie(Nr.NETWORK,$u.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!cb(e))throw new Ie(Nr.NETWORK,$u.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return e}static async UKt(t,i){const e=new Gs({zu:t,oI:Ee.ON,xI:Ve.GET}),s=await this.requestSuccessOnly(e,i);try{return function(t){return h0(t,"text/xml")}(await s.rI())}catch(t){throw new Ie(Nr.NETWORK,$u.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async FKt(t,i,e,s){void 0===s&&(s=[]);const n=[],r=[],o=[];if(!t||!n0(t,"VAST")){if(D0(M0.MKt,s),e)throw new Ie(Nr.PARSING,$u.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new Ie(Nr.PARSING,$u.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}if(0!==Nc(t,"Ad").length){for(const e of Nc(t,"Ad"))try{const t=await this.ZKt(e,i,s);0===t.mR?n.push(t):r.push(t)}catch(t){o.push(t)}if(0===n.length&&0===r.length&&o.length>0)throw o[0];if(1===n.length&&0===r.length)return n[0];if(0===n.length&&0!==r.length)return new G$(r);if(n.length>0||r.length>0)return new G$(r.concat(n))}if(0!==Nc(t,"Error").length)for(const i of Nc(t,"Error")){Vr(M0.MKt.Pb);const t=i.textContent;t&&s.push(t.trim())}if(D0(M0.MKt,s),e)throw new Ie(Nr.PARSING,$u.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new Ie(Nr.PARSING,$u.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}async QKt(t,i,e){const s=[],n=Nc(t,"AdBreak");for(const t of n)try{const n=await this.HKt(t,i,e);n&&s.push(n)}catch(t){Fe.aA(t)}return s}async ZKt(i,e,s){const n=O(i,"id")||"";let r=vl(O(i,"sequence"));r||(r=0);const o=Nc(i,"InLine"),h=Nc(i,"Wrapper");if(0!==h.length)return await this.XKt(h[0],n,r,e,s);if(0!==o.length)return t.qKt(o[0],n,r,s);throw new Ie(Nr.PARSING,$u.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static qKt(i,e,s,n){const r=Nc(i,"Error")[0];let o;r&&r.textContent&&(o=r.textContent,n.push(o));const h=Nc(i,"AdSystem")[0];let a,u="";h&&(u=h.textContent||u);const c=Nc(i,"AdTitle")[0];c&&(a=c.textContent||void 0);const l=[];for(const t of Nc(i,"Impression"))t.textContent&&l.push(t.textContent);const d=t.KKt(Nc(i,"Creatives")[0],u,n);return new Z$(e,s,u,a,l,d,new T0(o))}async XKt(i,e,s,n,r){const o=Nc(i,"Error")[0];let h="";o&&o.textContent&&(h=o.textContent,r.push(h));const a=Nc(i,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of Nc(i,"Impression"))t.textContent&&c.push(t.textContent);const l=Nc(i,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.VKt(d,n,!0,r),g=Nc(i,"Creatives")[0];let _=[];g&&(_=t.JKt(g,u,r));let v=ge(O(i,"followAdditionalWrappers"));v||(v=!0);let w=ge(O(i,"allowMultipleAds"));w||(w=!0);let m=ge(O(i,"fallbackOnNoAd"));return m||(m=!1),new i0(e,s,c,f,v,_,w,m,new T0(h))}static JKt(i,e,s){const n=[];for(const r of Nc(i,"Creative")){let i=O(r,"id");i||(i="");let o=vl(O(r,"sequence"));o||(o=0);let h=O(r,"adId");h||(h="");const a=Nc(r,"Linear")[0];let u;a&&(u=t.$Kt(a,"wrapper",i,e,s));const c=Nc(r,"NonLinearAds")[0];let l,d;if(c)try{d=t.tJt(c,i,e),l=d}catch(t){}const f=Nc(r,"CompanionAds")[0];let g;f&&(g=t.iJt(f)),n.push(new e0(i,h,o,"",u,l,g,[]))}return n}static KKt(i,e,s){const n=[];for(const r of Nc(i,"Creative")){let i=O(r,"id");i||(i="");let o=vl(O(r,"sequence"));o||(o=0);let h=O(r,"adId");h||(h="");let a=O(r,"apiFramework");a||(a="");const u=Nc(r,"Linear")[0];let c;if(u)try{c=t.$Kt(u,"inline",i,e,s)}catch(t){}if(0===(null==c?void 0:c.ct))throw new Ie(Nr.PARSING,$u.VAST_UNEXPECTED_DURATION_ERROR,"The VAST response had a duration of 0 seconds, so skipping the ad(s).");const l=Nc(r,"NonLinearAds")[0];let d,f;if(l)try{f=t.tJt(l,i,e),d=f}catch(t){}const g=Nc(r,"CompanionAds")[0];let _;g&&(_=t.iJt(g));const v=Nc(r,"UniversalAdId"),w=t.parseUniversalAdIds(v);n.push(new e0(i,h,o,a,c,d,_,w))}return n}static $Kt(i,e,s,n,r){const o=Nc(i,"Duration")[0];let h=0;if(o)h=U$(o.textContent)||0;else if(!o&&"inline"===e)throw new Ie(Nr.PARSING,$u.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=O(i,"skipoffset");let u=-1;if(a){let t=U$(a);if(void 0===t&&a.indexOf("%")>-1){const i=x.abs(Number(a.replace(/(?![0-9])./g,"")))/100;j(i)||(t=h*i)}void 0!==t&&(u=t)}const c=Nc(i,"MediaFiles")[0];let l=[],d=[];if(c&&(l=function(t,i){const e=[];for(const s of Nc(t,"MediaFile")){const t=O(s,"delivery"),n=O(s,"type");if(!n){Vr();continue}if(!i(n))continue;let r=vl(O(s,"width")),o=vl(O(s,"height"));r||(Vr(),r=0),o||(Vr(),o=0);const h={delivery:t,type:n,width:r,height:o,contentURL:""+s.textContent};e.push(h)}return e}(c,I0),d=function(t){const i=Nc(t,"ClosedCaptionFiles");if(0===i.length)return[];const e=i[0],s=[];for(const t of Nc(e,"ClosedCaptionFile")){const i=O(t,"type");i||Vr();const e=O(t,"language");e||Vr();const n={type:null!=i?i:"",language:null!=e?e:"",contentURL:(""+t.textContent).trim()};s.push(n)}return s}(c)),"inline"===e&&(!c||0===l.length))throw D0(M0.SKt,r),new Ie(Nr.PARSING,$u.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const f=Nc(i,"TrackingEvents")[0];let g=[];f&&(g=t.eJt(f,d0,"linear"));const _=Nc(i,"VideoClicks")[0],v=t.sJt(_);return new s0(h,l,g,v,u,s,n,d)}static sJt(i){if(!i)return new t0("","",[],[]);const e=Nc(i,"ClickThrough")[0];let s,n="";e&&(s=e.textContent||void 0,n=O(e,"id")||"");const r=t.nJt(Nc(i,"ClickTracking")),o=t.nJt(Nc(i,"CustomClick"));return new t0(s,n,r,o)}static nJt(t){const i=[];for(const e of t){const t=e.textContent;if(!t)continue;const s=O(e,"id")||"";i.push(new $$(s,t))}return i}static eJt(t,i,e){const s=[];for(const n of Nc(t,"Tracking")){const r=O(n,"event");if(!i(r)){Vr();continue}let o="";"linear"===e&&(o=O(t,"offset")||"0");const h=n.textContent;h&&s.push(new m0(r,o,h))}return s}static tJt(i,e,s){const n=[];for(const r of Nc(i,"NonLinear")){const i=Nc(r,"NonLinearClickThrough")[0];let o;i&&(o=i.textContent||void 0);const h=t.nJt(Nc(r,"NonLinearClickTracking")),a=Nc(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=O(a,"creativeType"),i=a.textContent||"",e=Nc(a.parentNode,"NonLinearClickThrough")[0];let s="";e&&(s=e.textContent||""),u=new A0(i,t,s,"")}const c=t.rJt(r),l=t.parseHtmlResource(r);if(!u&&!c&&!l){Vr();continue}const d=new t0(o,"",h,[]);n.push(new X$(u,c,l,d,e,s))}if(0===n.length)throw new Ie(Nr.PARSING,$u.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=Nc(i,"TrackingEvents")[0];let o=[];return r&&(o=t.eJt(r,g0,"nonlinear")),new H$(n,o)}static parseUniversalAdIds(t){const i=[];for(const r of t){var e;const t=null!=(e=O(r,"idRegistry"))?e:"";var s,n;const o=null!=(n=null!=(s=O(r,"idValue"))?s:r.textContent)?n:"";i.push(new E0(t,o))}return i}static iJt(i){let e=O(i,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(e)||(e=q$.pG);const s=[];for(const e of Nc(i,"Companion")){let i=vl(O(e,"width")),n=vl(O(e,"height")),r=O(e,"id"),o=vl(O(e,"assetWidth")),h=vl(O(e,"assetHeight")),a=vl(O(e,"expandedWidth")),u=vl(O(e,"rxpandedHeight")),c=O(e,"apiFramework"),l=O(e,"adSlotId"),d=vl(O(e,"pxratio"));const f=Nc(e,"AltText")[0];let g=f?f.textContent:"";i||(Vr(),i=0),n||(Vr(),n=0),r||(r=""),o||(o=0),h||(h=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),g||(g="");const _=t.oJt(e),v=t.rJt(e),w=t.parseHtmlResource(e),m=Nc(e,"TrackingEvents")[0];let p=[];m&&(p=t.eJt(m,v0,"companion"));const A=Nc(e,"CompanionClickThrough")[0];let y;A&&(y=A.textContent||void 0);const b=t.nJt(Nc(e,"CompanionClickTracking"));(_||v||w)&&s.push(new J$(i,n,r,o,h,a,u,c,l,d,_,v,w,new t0(y,"",b,[]),p,g))}return new K$(e,s)}static oJt(t){const i=Nc(t,"StaticResource")[0];let e;if(i&&i.parentNode){let t=O(i,"creativeType");t||(t="");const s=i.textContent,n=Nc(i.parentNode,"AltText")[0],r=Nc(i.parentNode,"CompanionClickThrough")[0];let o,h="";n&&(h=n.textContent||""),r&&(o=r.textContent||void 0),s&&(e=new A0(s,t,o,h))}return e}static rJt(t){const i=Nc(t,"IFrameResource")[0];let e;if(i){const t=i.textContent||"";e=new y0(t)}return e}static parseHtmlResource(t){const i=Nc(t,"HTMLResource")[0];let e;if(i){const t=i.textContent||"";e=new b0(t)}return e}async HKt(i,e,s){const n=O(i,"timeOffset")||"0",r=O(i,"breakType")||L0.dI;let o=O(i,"breakId"),h=ge(O(i,"repeatAfter"));if(void 0===o&&(o=""),void 0===h&&(h=!1),!(void 0!==Xc.hJt(n)))throw new Ie(Nr.PARSING,$u.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=Nc(i,"AdSource")[0],u=Nc(i,"TrackingEvents")[0];let c=[];u&&(c=t.eJt(u,c0,"vmap"));let l=O(a,"id");l||(l="");let d=ge(O(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=ge(O(a,"followRedirects"));f||(f=!0);const g=Nc(a,"AdTagURI")[0];let _="";const v=Nc(a,"VASTAdData")[0];if(!g||!g.textContent){if(v){if(v.firstElementChild&&r0(v.firstElementChild,"VAST")){const t=await this.FKt(v.firstElementChild,s,!1);if(t){const i=new j0(l,d,f,t);return new x0(n,i,r,o,c,h,!1,e)}return}throw new Ie(Nr.PARSING,$u.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new Ie(Nr.PARSING,$u.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{_=g.textContent;const t=oi(e);return t.sources.src=_,new C0(n,t,s)}catch(t){return}}},L0=function(t){return t.dI="",t.YKt="linear",t.aJt="nonlinear",t.uJt="display",t}({}),Xc=class{static cJt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static lJt(t){}static dJt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static fJt(t){const i=t.split(":");let e=0;return e+=3600*Number(i[0]),e+=60*Number(i[1]),e+=Number(i[2]),e}static gJt(t){if(t<=0)return"00:00:00.000";const i=x.floor(t),e=t-i;return this._Jt(i/3600,2)+":"+this._Jt(i/60%60,2)+":"+this._Jt(i%60,2)+"."+this._Jt(1e3*e,3)}static _Jt(t,i){return("00"+x.floor(t)).slice(-i)}static vJt(t,i){const e=this.hJt(t);if(0===e)switch(t){case"start":return 0;case"end":return-1}else{if(2===e)return Q$(t)*i;if(1===e)return U$(t);if(3===e)return this.dJt(t);if(4===e){const i=Number(t);if(!j(i)&&i>=-1)return i}}}static hJt(t){return"start"===t||"end"===t?0:void 0!==U$(t.toString())?1:void 0!==Q$(t.toString())?2:void 0!==this.lJt(t.toString())?3:j(Number(t))?void 0:4}},x0=class{get wJt(){return this.mJt.integration}get pJt(){return this.AJt}get lzt(){return this.yJt}get Oqt(){return this.Rqt}set Oqt(t){this.Rqt=t}get mXt(){return this.eqt}get bJt(){return this.MJt}get TJt(){return this.SJt}get Drt(){return this.mJt}get NJt(){return this.WKt.sd}get W(){return!0}$n(){return Promise.resolve()}get WKt(){return this.IJt}set WKt(t){this.IJt=t}constructor(t,i,e,s,n,r,o,h){this.Rqt=-1,this.AJt=i,this.yJt=t,this.DJt=e,this.MJt=s,this.SJt=r,this.eqt=n,this.EJt=o,this.mJt=h}},C0=class{get wJt(){return this.DXt.wJt}get pJt(){return this.DXt.pJt}get lzt(){return this.DXt.lzt}get Oqt(){return this.DXt.Oqt}set Oqt(t){this.DXt.Oqt=t}get mXt(){return this.DXt.mXt}get bJt(){return this.DXt.bJt}get TJt(){return this.DXt.TJt}get Drt(){return this.DXt.Drt}get NJt(){return this.DXt.NJt}get W(){return this.sD}$n(){var t;return null!=(t=this.kJt)?t:this.kJt=this.oD()}async oD(){const t=new k0;this.DXt=await t.GKt(this.Drt,this.lzt,this.WKt,this.OQ),this.sD=!0}get WKt(){return this.DXt.WKt}set WKt(t){this.DXt.WKt=t}constructor(t,i,e){this.sD=!1,this.OQ=e,this.DXt=new x0(t,void 0,"","",[],!1,!1,i)}},j0=class{get o(){return this.aS}get wqt(){return this.LJt}get xJt(){return this.CJt}get XHt(){return this.jJt}constructor(t,i,e,s){this.aS=t,this.LJt=i,this.jJt=s,this.CJt=e}};function O0(t,i){let e;if(t.vastAdsRequest&&(e=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return u0(t.adsResponse);return}(t.vastAdsRequest)),!e){const i=function(t){const i=t.contentUrl||t.contentId;if(!i)return;const e=t.contentType||"video/mp4",s=JT(e)||iS(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+Xc.gJt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+Xc.gJt(t.whenSkippable)+'"':"",o='<MediaFile delivery="'+s+'" type="'+e+'">'+a0(i)+"</MediaFile>",h=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+a0(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+o+"</MediaFiles>"+h+"</Linear>",u=t.title?"<AdTitle>"+a0(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);i&&(e=u0(i))}const s=t.customData;if(e){const n={integration:null==s?void 0:s.integration,sources:{src:e,type:"vast"},timeOffset:i};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}var R0=function(t){return t.OJt="error",t.RJt="sourceupdate",t}({}),P0=class extends Jr{constructor(t){super("error"),this.lt=t}},z0=class extends Jr{constructor(t,i){super("sourceupdate"),this.bt=t,this.kc=i}},B0=class extends tu{get zj(){return this.PJt}zJt(t){this.BJt.zJt(t)}UJt(t){this.BJt.UJt(t)}QJt(t){this.BJt.QJt(t)}FJt(t){this.BJt.FJt(t)}YJt(t){this.PJt.addUpdateListener(t)}VJt(t){this.PJt.removeUpdateListener(t)}GJt(){const t=new xh,i=new chrome.cast.media.GetStatusRequest;return this.PJt.getStatus(i,(()=>{t.sM({bt:this.kE(),kc:this.Ya()})}),(i=>t.nM(i))),t.rM}kE(){var t;return null==(t=this.PJt.customData)?void 0:t.currentSource}Ya(){var t;let i;if(null==(t=this.nOt.WJt())?void 0:t.version){var e;i=null==(e=this.PJt.customData)?void 0:e.sourceDescription}else{var s;const t=null==(s=O$(this.PJt))?void 0:s.customData;(function(t){return Z(t)&&t.theoplayer_version>=1&&$t(t.streamStart)&&$t(t.isLive)&&$t(t.sourceDescription)})(t)&&(i=t.sourceDescription),i||(i=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:U0(t)}}(this.PJt.media))}return i}Rk(){const t=new chrome.cast.media.PauseRequest;this.PJt.pause(t,Bn,this.ZJt)}zk(){const t=new chrome.cast.media.StopRequest;this.PJt.stop(t,Bn,this.ZJt)}Pk(){const t=new chrome.cast.media.PlayRequest;this.PJt.play(t,Bn,this.ZJt)}Wb(t,i){const e=new chrome.cast.media.SeekRequest;return e.currentTime=t,e.resumeState=i?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,i)=>{this.PJt.seek(e,t,(t=>{var e;i(new ps(Ur(t.code),null!=(e=t.description)?e:void 0))}))}))}nk(t){this.BJt.pst(R$,function(t){return{type:P$.HHt,properties:{playbackRate:t}}}(t)).catch(this.HJt)}XJt(t){const i=new chrome.cast.media.EditTracksInfoRequest(t);this.PJt.editTracksInfo(i,Bn,this.ZJt)}qJt(){return this.PJt.getEstimatedTime()}KJt(){return this.PJt.getEstimatedBreakClipTime()}JJt(){return this.PJt.getEstimatedBreakTime()}$Jt(){this.BJt.pst("urn:x-cast:com.google.cast.media",{type:z$.SKIP_AD,requestId:this.t$t++,mediaSessionId:this.PJt.mediaSessionId}).catch(this.HJt)}gn(){this.Bo()}constructor(t,i,e){super(i),this.t$t=0,this.HJt=t=>{this.yo(new P0(t))},this.ZJt=t=>{var i;const e=new ps(Ur(t.code),null!=(i=t.description)?i:void 0);this.HJt(e)},this.nOt=t,this.BJt=i,this.PJt=e}};function U0(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?Ms(t.breaks,(i=>function(t,i){const e=[];if(t.isWatched)return e;for(const s of t.breakClipIds){const n=dl(i,(t=>t.id===s));if(n){const i=O0(n,t.position);i&&e.push(i)}}return e}(i,t.breakClips))):[]}bs(),r();var Q0=class{i$t(t,i){this.nOt.addMessageListener(t,i)}e$t(t,i){this.nOt.removeMessageListener(t,i)}pst(t,i){return new Promise(((e,s)=>{this.nOt.sendMessage(t,i,e,(t=>{var i;s(new ps(Ur(t.code),null!=(i=t.description)?i:void 0))}))}))}gn(){}constructor(t){this.nOt=t}};function F0(t){return"vmap"===t||"adrule"===t}function Y0(t){if(t)return Ic(t)&&""!==t?{src:Q(t),type:void 0}:function(t){return Z(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:Q(t.src),type:V0(t.type)}:void 0}function V0(t){if(Ic(t)){const i=t.toLowerCase();switch(i){case"vast":case"vmap":case"adrule":return i;default:return void Bi("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||Bi("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function G0(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return B$.test(t)}(t))return Xc.fJt(t);if(W0(t))return t}return Number(t)>=0?Number(t):void 0}}function W0(t){return new RegExp(/^\d{1,2}%$/).test(t)}function Z0(t){const i=[],e=(t,s)=>{if(Zr(s))for(let i=0,n=s.length;i<n;i++){const n=Z(s[i])&&s[i]?String(i):"";e(t+"["+encodeURIComponent(n)+"]",s[i])}else if(Z(s))for(const i of _.keys(s))e(t+"["+encodeURIComponent(i)+"]",s[i]);else((t,e)=>{i.push(t+"="+encodeURIComponent(null!=e?e:""))})(t,String(s))};for(const i of _.keys(t))e(encodeURIComponent(i),t[i]);return i.join("&")}r(),Qi(),r(),r();var H0=function(t){return t.WHt="receiver_info",t.TPt="event",t.s$t="propertychange",t.ZHt="trackevent",t}({});Qi();var X0=class{n$t(t){let i;try{i=JSON.parse(t)}catch(t){0}return i}zJt(t){this.r$t.push(t)}UJt(t){ra(this.r$t,t)}QJt(t){this.o$t.push(t)}FJt(t){ra(this.o$t,t)}h$t(t){this.a$t=t}pst(t,i){return this.u$t.pst(t,i)}gn(){this.u$t.e$t(R$,this.c$t),nt(this.o$t),nt(this.r$t),this.a$t=void 0}constructor(t){this.r$t=[],this.o$t=[],this.c$t=(t,i)=>{const e=this.n$t(i);if(e)if(e.type===H0.s$t)for(const t of this.r$t)for(const i of _.keys(e.properties))t(i,e.properties[i]);else if(e.type===H0.TPt)for(const t of this.o$t)t(e.event);else e.type===H0.ZHt&&this.a$t&&e.event.trackState&&this.a$t(e.event.trackId,e.event.trackState.targetQualityIds)},this.u$t=t,this.u$t.i$t(R$,this.c$t)}};r(),r();var fn=function(t){return t.l$t="medialoadedchange",t.kb="volumechange",t.OJt="casterror",t.d$t="playererror",t.f$t="targetqualitychanged",t.g$t="receiverinfochanged",t}({}),q0=class extends Jr{constructor(){super("medialoadedchange")}},K0=class extends Jr{constructor(t,i){super("volumechange"),this.Nk=t,this.WE=i}},J0=class extends Jr{constructor(t){super("casterror"),this.lt=t}},$0=class extends Jr{constructor(t){super("playererror"),this.lt=t}},t1=class extends Jr{constructor(t,i){super("targetqualitychanged"),this.Fj=t,this._$t=i}},i1=class extends Jr{constructor(){super("receiverinfochanged")}},e1=class extends tu{v$t(t,i,e){this.BJt.pst(R$,function(t,i,e){return{type:P$.ZHt,trackID:t,trackType:i,properties:{targetQuality:e}}}(t,i,e)).catch(this.HJt)}w$t(){this.u$t.i$t(R$,this.m$t),this.BJt.pst(R$,{type:P$.WHt}).catch(Bn)}WJt(){return this.p$t}A$t(){return this.nOt.getSessionObj()}y$t(t){!this.b$t&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.b$t=new B0(this,this.BJt,t),this.M$t(),this.yo(new q0),this.b$t.YJt(this.T$t))}S$t(){return this.b$t}async N$t(t){const i=function(t){const i=function(t,i,e,s){const[n,r]=function(t){for(const e of t.sources)if(aS(e)){const t=e.src;if(t){var i;const s=null!=(i=e.type)?i:wa(t);if(s1(s))return[t,s]}}var e,s;return[null!=(e=Gk(t))?e:"",null!=(s=Yk(t))?s:""]}(t),o=new chrome.cast.media.MediaInfo(n,r);return o.metadata=j$(t.metadata,t.poster),o.streamType=s,function(t,i,e){const s=[],n=[];let r,o=0,h=0;for(const t of i){const i=Y0(t.sources);if(i)if(F$(i,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=i.src;else if(Y$(i,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=Xc.vJt(r,e))?u:0,d=void 0!==c?Xc.vJt(c,e):void 0,f=new chrome.cast.media.BreakClip("bc"+h++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=i.src,f.whenSkippable=d,f.customData={integration:t.integration};let g=dl(n,(t=>t.position===l));void 0===g&&(g=new chrome.cast.media.Break("b"+o++,[],l),n.push(g)),g.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(o,i,e),o}(t.I$t,t.Vc,t.ct,t.I1),e=new chrome.cast.media.LoadRequest(i);return e.autoplay=!0,e.currentTime=t.LE,e.customData=t.D$t,e}(t);let e;try{e=await this.nOt.loadMedia(i)}catch(t){e=t}if(e)throw new ps(Ur(e))}HE(t){this.A$t().setReceiverMuted(t,Bn,this.E$t)}Dk(t){this.A$t().setReceiverVolumeLevel(t,Bn,this.E$t)}k$t(){return this.A$t().receiver.friendlyName}gn(){this.Bo(),this.nOt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.L$t),this.A$t().removeUpdateListener(this.M$t),this.u$t.e$t(R$,this.m$t),this.BJt.gn(),this.u$t.gn()}constructor(t){super(),this.p$t=void 0,this.HJt=t=>{this.yo(new J0(t))},this.x$t=(t,i)=>{"error"===t&&this.yo(new $0(i))},this.C$t=(t,i)=>{this.yo(new t1(t,i))},this.m$t=(t,i)=>{const e=JSON.parse(i);e.type===H0.WHt&&(this.p$t=e.info,this.yo(new i1))},this.M$t=()=>{const t=this.A$t(),{level:i,muted:e}=t.receiver.volume;this.yo(new K0(null!=i?i:void 0,null!=e?e:void 0))},this.L$t=()=>this.y$t(this.nOt.getMediaSession()),this.T$t=t=>{var i;t||(null==(i=this.b$t)||i.VJt(this.T$t),this.b$t=void 0,this.yo(new q0))},this.E$t=t=>{var i;const e=new ps(Ur(t.code),null!=(i=t.description)?i:void 0);this.HJt(e)},this.nOt=t,this.nOt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.L$t),this.u$t=new Q0(t.getSessionObj()),this.BJt=new X0(this.u$t),this.BJt.zJt(this.x$t),this.BJt.h$t(this.C$t),this.A$t().addUpdateListener(this.M$t),this.M$t(),this.w$t();const i=this.nOt.getMediaSession();i&&this.y$t(i)}};function s1(t){switch(t){case $n.tx:case $n.$L:case $n.ix:case $n.sx:return!0}return!1}var n1=function(t){return t.j$t="statechange",t}({}),r1=class extends Jr{constructor(t){super("statechange"),this.Xgt=t}};r(),r(),r(),bs(),r();var o1=class extends tu{Ynt(){return this.Dc}SE(){return Mo.PP()}xE(){return this.EG+this.O$t}Cnt(){return this.xE()}DE(){}_d(){return this.JM}RE(){return this.W5}PE(){}JE(){return this.CG}R$t(){}ek(){return this.jG}nk(t){this.jG!==t&&(this.jG=t,this.yo(new Pu(this.ta.LE,t)))}gk(){return Fn.Nz}hk(){return Mo.PP()}vk(){return Mo.PP()}pk(){return!1}AE(){return this.Oz}Mk(){return this.Pz}Ak(){return this.Ul}XJt(t){}Sk(){return this.P$t}bk(){return this.z$t}Pk(){this.CG=!1}Rk(){this.CG=!0}Wb(t){this.EG=t-this.O$t}B$t(){return this.O$t}U$t(t){this.O$t=t}vrt(t){this.Dc.vrt(t)}zk(){}gn(){this.Bo(),this.Oz.gn(),this.Pz.gn(),this.Ul.gn(),this.Dc.gn()}constructor(t,i,e,s,n,r,o,h,a){super(),this.ta=t,this.O$t=0,this.Oz=new kt,this.Pz=new kt,this.Ul=new Uu,this.Dc=new mB,this.O$t=i,this.EG=e-i,this.JM=s,this.W5=n,this.CG=r,this.jG=o,this.P$t=h,this.z$t=a}};r(),r(),r(),r();var Hr=function(t){return t.Q$t="ccmodechangerequest",t.F$t="cctargetqualitychangerequest",t.Y$t="cctrackchangerequest",t}({}),h1=class extends Jr{constructor(t,i,e){super(Hr.Q$t),this.track=t,this.trackId=i,this.mode=e}};r();var a1=function(t){return t.ON="TEXT",t.SI="AUDIO",t.NI="VIDEO",t}({}),u1=function(t){return t.AQ="SUBTITLES",t.yQ="CAPTIONS",t.bQ="DESCRIPTIONS",t.Fn="CHAPTERS",t.MQ="METADATA",t}({});function c1(t){return"AUDIO"===t.type}function l1(t){return"VIDEO"===t.type}function d1(t){return"TEXT"===t.type}var f1=class extends tu{get ga(){return this.Za||(this.Za=rr(this)),this.Za}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,this.yo(new su(this)))}get q(){return this.c6}get L(){return this.l6}get UI(){return this.zo}set UI(t){const i=Yo(t);this.zo!==i&&(this.zo=i,this.V$t!==i&&this.yo(new h1(this,this.zL,i)),this.yo(new dM(this)))}get G$t(){return this.V$t}set G$t(t){const i=Yo(t),e=this.zo!==i;this.zo=i,this.V$t=i,e&&this.yo(new dM(this))}d6(t){return dl(this.l6.AL,(i=>i.o===t))}VL(t){this.UI=t}W$t(t){}gn(){}tr(){}constructor(t){super(),this.Za=void 0;const i=t.customData;this.zL=Number(t.trackId)||0,this.o=""+(i&&i.id||this.zL),this.eB=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.YL=i&&i.inBandMetadataTrackDispatchType||"",this.Lt=i&&i.kind||function(t){switch(t){case u1.AQ:return z.AQ;case u1.yQ:return z.yQ;case u1.bQ:return z.bQ;case u1.Fn:return z.Fn;case u1.MQ:return z.MQ}return}(t.subtype)||"subtitles",this.fk=Ma.NONE,this.YA=i&&void 0!==i.type?function(t){return KT(t)?t:El.DEFAULT}(i.type):El.WEBVTT,this.u6=[],this.l6=new Kj(this.u6),this.m6=[],this.c6=new Kj(this.m6),this.zo=Yo(i&&i.mode||ua.Ch),this.V$t=this.zo}};r(),r();var g1=class extends Jr{constructor(t,i){super(Hr.Y$t),this.trackId=t,this.enabled=i}};r();var _1=class extends Jr{constructor(t,i){super(Hr.F$t),this.track=t,this.targetQuality=i}};r();var v1=function(t){return t.SI="audio",t.NI="video",t.ON="text",t}({}),w1=class extends tu{get PL(){return this.Gft}get QL(){return this.Yft}set QL(t){this.Z$t(t),this.yo(new _1(this,t))}get UL(){return this.qz}get kh(){return this.eB}set kh(t){t!==this.eB&&(this.eB=t,this.yo(new su(this)))}get Rt(){return this.He}set Rt(t){this.He!==t&&(this.He=t,this.H$t!==t&&this.yo(new g1(this.zL,t)),this.yo(new dM(this)))}get X$t(){return this.H$t}set X$t(t){const i=this.He!==t;this.He=t,this.H$t=t,i&&this.yo(new dM(this))}get ga(){return this.Za||(this.Za=go(this)),this.Za}get UI(){return this.Rt?"enabled":"disabled"}nB(t){this.Rt=t}W$t(t){if(t.targetQualityIds){const i=[];for(const e of this.qz.AL)t.targetQualityIds.indexOf(e.o)>-1&&i.push(e);const e=i.length?i:void 0;this.Z$t(e)}}Z$t(t){(function(t,i){return!t&&i||t&&!i||t&&i&&!iw(t,i)})(this.Yft,t)&&(this.Yft=t&&this.qz.Jz(t)?t:void 0,this.yo(new th(this.Yft,this)))}unload(){for(const t of this.qz.AL)t.fn("update",this.URt);this.qz.tr()}constructor(t){super(),this.Gft=void 0,this.qz=new ki,this.Yft=void 0,this.Za=void 0,this.URt=()=>this.yo(new su(this));const i=t.customData;if(this.zL=Number(t.trackId)||0,this.o=""+(i&&i.id||this.zL),this.eB=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.Lt=i&&i.kind||"main",this.He=i&&i.enabled,this.H$t=this.He,c1(t)){this.E3=v1.SI;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new eV(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);i.yn("update",this.URt),this.qz.Kz(i)}}else{this.E3=v1.NI;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new iV(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);i.yn("update",this.URt),this.qz.Kz(i)}}}};r();var m1=function(t){return t.q$t="legacy",t.K$t="caf",t}({});r(),r(),Qi(),r(),r();var p1=class{Pc(){if(this.J$t>=this.Dc.length)return;const t=this.Dc[this.J$t];return this.J$t+=1,t}lt(){return this.Pc()}constructor(t){this.J$t=0,this.Dc=t}};function A1(t){var i,e,s;return null!=(s=null==(e=t.pJt)||null==(i=e.XHt)?void 0:i.qHt())?s:[]}var y1=class{},b1=class{lrt(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get ads(){return t.Vc.map((t=>t.lrt()))},get integration(){return t.wJt},get maxDuration(){return t.$$t},get maxRemainingDuration(){return t.t0t},get timeOffset(){return t.lzt},get customData(){return t.D$t}}}(this)}constructor(){this.Za=void 0}},M1=class{get i0t(){return this.e0t}get t(){return this.ta}constructor(t,i){this.e0t=t,this.ta=i}},T1=class extends b1{get WKt(){return this.IJt}get Vc(){const t=[];for(const s of this.IJt.s0t)for(const n of A1(s)){var i,e;const r=null!=(e=null==(i=n.fXt)?void 0:i.zXt)?e:[];if(n.lXt&&t.push(this.n0t(n.lXt,r,n._Xt,s.Drt)),n.gXt)for(const i of n.gXt.vXt)t.push(this.r0t(i,r,n.gXt,n._Xt,s.Drt))}return t}n0t(t,i,e,s){const n=dl(this.o0t,(i=>i.lXt===t));if(void 0!==n)return n;const r=new D1(t,i,this,this.h0t,e,s);return this.o0t.push(r),r}r0t(t,i,e,s,n){const r=dl(this.a0t,(i=>i.gXt===t));if(void 0!==r)return r;const o=new I1(t,i,e,this,this.h0t,s,n);return this.a0t.push(o),o}get wJt(){return Si.CSAI}get lzt(){const t=this.IJt.sd;return t>=0?t:this.h0t.t._d()}get t0t(){let t=0;for(const i of this.IJt.s0t)for(const e of A1(i))e.lXt&&!e.lXt.Pqt&&(t+=e.lXt.ct);return this.h0t&&this.h0t.i0t&&(t+=this.h0t.i0t.ct-this.h0t.i0t.LE),t}get $$t(){let t=0;for(const i of this.IJt.s0t)for(const e of A1(i))e.lXt&&(t+=e.lXt.ct);return t}get D$t(){}constructor(t,i){super(),this.o0t=[],this.a0t=[],this.IJt=t,this.h0t=i}},S1={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},N1=class extends y1{get Yl(){return this.DXt}get Drt(){return this.mJt}get _Xt(){return this.kqt}u0t(){return this.c0t}l0t(){this.c0t=!0}d0t(t){return Ei({},S1,{resourceURI:t.mKt||""})}f0t(t){return Ei({},S1,{contentHTML:t.mKt.trim(),type:"HTMLResource"})}g0t(t){var i,e;return Ei({},S1,{clickThrough:(null==(i=t.rqt)?void 0:i.trim())||"",resourceURI:(null==(e=t.mKt)?void 0:e.trim())||"",altText:t.sqt||"",type:"StaticResource"})}_0t(t,i,e){if(!t||!i)return;const s="<img "+(e?"title='"+e+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(i)+"' target='_blank' rel='noopener'>"+s+"</a>"}fXt(t){return t?t.map((t=>{let i;const e={adSlotId:t.qXt||"",height:t.Ti||0,width:t.ji||0};if(t.AXt){var s;const e=this.g0t(t.AXt),n=e.clickThrough||(null==(s=t.tqt)?void 0:s.rqt);i=Ei({},e,{contentHTML:this._0t(e.resourceURI,n,e.altText)||""})}else if(t.TXt)i=this.f0t(t.TXt);else{if(!t.bXt)return;i=this.d0t(t.bXt)}return fe(i,e)})).filter((t=>void 0!==t)):[]}v0t(){return this.w0t.nXt}constructor(t,i,e,s,n,r){super(),this.c0t=!1,this.w0t=t,this.BXt=i,this.DXt=e,this.h0t=s,this.kqt=n,this.mJt=r}},I1=class extends N1{get gXt(){return this.w0t}get dXt(){return this.m0t}ma(){const t=this.DXt,i={companions:this.fXt(this.BXt),type:"nonlinear",id:this.w0t.EXt,skipOffset:this.Oqt,integration:this.mJt.integration,adSystem:this.w0t.nXt,get adBreak(){return t.lrt()},creativeId:this.w0t.EXt,universalAdIds:this.kqt.map((t=>({adIdRegistry:t.OKt,adIdValue:t.PKt})))};return this.w0t.bXt?fe(this.d0t(this.w0t.bXt),i):this.w0t.TXt?fe(this.f0t(this.w0t.TXt),i):this.w0t.AXt?fe(this.g0t(this.w0t.AXt),i):i}lrt(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}p0t(){var t,i;return null!=(i=null==(t=this.w0t.AXt)?void 0:t.mKt)?i:""}A0t(){var t,i,e;return null!=(e=null==(i=this.w0t)||null==(t=i.AXt)?void 0:t.AKt)?e:""}get Oqt(){const t=this.w0t.Yl;return t&&t.Drt&&void 0!==t.Drt.skipOffset?Xc.vJt(t.Drt.skipOffset,this.h0t.i0t.ct):(null==(i=this.w0t.Yl)?void 0:i.Oqt)||-1;var i}constructor(t,i,e,s,n,r,o){super(t,i,s,n,r,o),this.m0t=e}},D1=class extends N1{get lXt(){return this.w0t}ma(){var t;const i=this.DXt,e=this.w0t;return{companions:this.fXt(this.BXt),duration:e.ct,id:e.EXt,mediaFiles:e.xqt,get mediaUrl(){return e.zqt},skipOffset:this.Oqt,type:"linear",integration:this.mJt.integration,adSystem:e.nXt,width:void 0,height:void 0,get adBreak(){return i.lrt()},clickThrough:null==(t=e.bqt)?void 0:t.rqt,creativeId:e.EXt,universalAdIds:this.kqt.map((t=>({adIdRegistry:t.OKt,adIdValue:t.PKt}))),closedCaptionFiles:e.Uqt}}lrt(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}p0t(){return this.w0t.xqt.length>0?this.w0t.xqt[0].contentURL:""}A0t(){return this.w0t.xqt.length>0?this.w0t.xqt[0].type:""}get Oqt(){const t=this.w0t.Yl;return t&&t.Drt&&void 0!==t.Drt.skipOffset?Xc.vJt(t.Drt.skipOffset,this.h0t.i0t.ct):this.w0t.Oqt||-1}constructor(t,i,e,s,n,r){super(t,i,e,s,n,r)}};function E1(t){return t instanceof D1}r();var ah=function(t){return t.y0t="csai",t.b0t="google-ima",t.Xh="google-dai",t.M0t="freewheel",t.T0t="mediatailor",t.Dd="chromecast",t.Knt="theoads",t}({});r();var k1=class extends rB{ma(){return new L1(this.Art.lrt())}constructor(t){super("S0t",t)}},L1=class extends oB{constructor(t){super("updatead",t)}};r();var x1=class extends rB{ma(){return new C1(this.Art.lrt())}constructor(t){super("N0t",t)}},C1=class extends oB{constructor(t){super("adloaded",t)}},j1=class extends gs{get $c(){return void 0!==this.I0t}get crt(){return this.w0t?[this.w0t]:[]}get drt(){var t;return null!=(t=this.I0t)?t:null}get frt(){return Ms(this.D0t,(t=>{const i=t.Vc;if(t===this.I0t&&void 0!==this.w0t){const t=i.indexOf(this.w0t);if(t>=0)return i.slice(t+1)}return t.E0t()?[]:i}))}get grt(){return this.D0t.filter((t=>t===this.I0t||!t.E0t()))}get Znt(){}get ga(){var t;return null!=(t=this.Za)?t:this.Za=$z(this)}I9(t,i,e){throw new k("Scheduling ads while casting is not supported.")}ZC(){this.PJt.$Jt()}wrt(t){var i;null==(i=this.k0t)||i.wrt(t)}_rt(t,i){var e;null==(e=this.k0t)||e._rt(t,i)}L0t(t){return dl(this.D0t,(i=>i.o===t))}x0t(t,i,e,s){const n=this.D0t,r=[];let o=!1;for(const n of t){let t=this.L0t(n.id);void 0===t&&(t=new O1(n),s.push(new Mr(t))),!$t(t.C0t)&&$t(e)&&(t.C0t=this.j0t(t.O0t,e));const h=t.Vc;t.Yn(n,i,e,s);const a=t.Vc;for(const t of a)Qa(h,t)||(s.push(new Ar(t)),o=!0);r.push(t)}this.D0t=r,o&&s.push(new gB);for(const t of n)Qa(r,t)||s.push(new Cr(t))}R0t(t,i){const e=this.I0t,s=this.w0t;let n,r;if(t){var o;const{breakId:i,breakClipId:e}=t;n=i?this.L0t(i):void 0,r=e?null==(o=this.I0t)?void 0:o.P0t(e):void 0}if(this.I0t=n,this.w0t=r,n!==e&&(void 0!==e&&(e.z0t=void 0,i.push(new Zu(e))),void 0!==n&&(n.z0t=this.PJt,i.push(new uB(n)))),r!==s){const t=this.ta.xE();void 0!==s&&i.push(new dB(s,t)),void 0!==r&&i.push(new bu(r,t))}}j0t(t,i){if(!i||!i.breaks)return;const e=dl(i.breaks,(i=>i.id===t.id));return e}vrt(t){const i=[];for(const t of this.D0t){let e=t.Vc;if(t===this.I0t&&void 0!==this.w0t){const t=e.indexOf(this.w0t);t>=0&&(e=e.slice(t))}else if(t.E0t())continue;for(const t of e){const e=t.B0t();e&&i.push(e)}}for(const e of i)t.I9(e,Jz.art,!1)}gn(){return this.Bo(),this.PJt.VJt(this.Yr),void 0!==this.I0t&&(this.I0t.z0t=void 0,this.I0t=void 0),this.w0t=void 0,nt(this.D0t),Promise.resolve(void 0)}constructor(t,i,e){super(),this.D0t=[],this.I0t=void 0,this.w0t=void 0,this.Za=void 0,this.Yr=t=>{var i;if(!t)return;const e=this.PJt.zj,{breakStatus:s}=e,{breakClips:n,breaks:r}=e.media,o=null==(i=O$(e))?void 0:i.media,h=[];r&&n&&this.x0t(r,n,o,h),this.R0t(s,h);for(const t of h)this.yo(t)},this.ta=t,this.PJt=i,this.k0t=e,this.PJt.YJt(this.Yr)}},O1=class extends b1{get O0t(){return this.U0t}get o(){return this.U0t.id}get Vc(){return this.Dc}get wJt(){return ah.Dd}get $$t(){let t=this.U0t.duration;return void 0===t&&this.Dc.length>0&&(t=qe(this.Dc,(t=>t.ct)),j(t)&&(t=void 0)),t}get t0t(){const t=this.$$t;if(void 0!==t&&void 0!==this.z0t){const i=this.z0t.JJt();if(void 0!==i)return x.max(0,t-i)}return t}get lzt(){return this.U0t.position}get D$t(){}E0t(){return this.U0t.isWatched}P0t(t){return dl(this.Dc,(i=>i.o===t))}Yn(t,i,e,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const o=t.breakClipIds[r],h=dl(i,(t=>t.id===o));if(void 0===h)continue;const a=r<this.Dc.length?this.Dc[r]:new R1(h,this);!$t(a.Q0t)&&$t(e)&&(a.Q0t=this.F0t(e,o,r)),a.Yn(h,s),n.push(a)}this.U0t=t,this.Dc=n}F0t(t,i,e){if(!t||!t.breakClips)return;let s=dl(t.breakClips,(t=>t.id===i));if(!s){var n;const i=null==(n=this.C0t)?void 0:n.breakClipIds[e];i&&(s=dl(t.breakClips,(t=>t.id===i)))}return s}constructor(t){super(),this.C0t=void 0,this.Dc=[],this.z0t=void 0,this.U0t=t}},R1=class{get Y0t(){return this.V0t}get o(){return this.V0t.id}get zXt(){return[]}get ct(){var t;return null!=(t=this.V0t.duration)?t:NaN}get xqt(){const t=this.p0t();return t?[{contentURL:t,delivery:"progressive",type:this.A0t(),width:0,height:0}]:[]}get zqt(){return this.p0t()}get Oqt(){const{whenSkippable:t}=this.V0t;return void 0===t?void 0:t<0?-1:t}get rqt(){return this.V0t.clickThroughUrl}get EXt(){}get _Xt(){return[]}get D$t(){}v0t(){return""}A0t(){var t;return null!=(t=this.V0t.contentType)?t:""}p0t(){var t,i;return null!=(i=null!=(t=this.V0t.contentUrl)?t:this.V0t.contentId)?i:""}Yn(t,i){const e=this.o,s=this.ct,n=this.V0t.contentUrl;this.V0t=t;const r=this.o,o=this.ct,h=this.V0t.contentUrl;e===r&&(s===o||j(s)&&j(o))&&n===h||i.push(new k1(this)),j(s)&&!j(o)&&i.push(new x1(this))}B0t(){let t;return this.Q0t&&(t=O0(this.Q0t,this.Yl.lzt)),t||(t=O0(this.V0t,this.Yl.lzt)),t}lrt(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}ma(){const t=this;return{get companions(){return t.zXt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.xqt},get mediaUrl(){return t.zqt},get closedCaptionFiles(){return[]},get skipOffset(){return t.Oqt},type:"linear",integration:ah.Dd,get adSystem(){return t.v0t()},width:void 0,height:void 0,get adBreak(){return t.Yl.lrt()},get resourceURI(){return t.p0t()},get clickThrough(){return t.rqt},get creativeId(){return t.EXt},get customData(){return t.D$t},get isSlate(){return!1},get universalAdIds(){return t._Xt.map((t=>({adIdRegistry:t.OKt,adIdValue:t.PKt})))}}}constructor(t,i){this.Za=void 0,this.V0t=t,this.Yl=i}};r(),Qi();var P1=class extends tu{get G0t(){return this.W0t}set G0t(t){this.W0t!==t&&(this.W0t=t,this.Vs.href=null!=t?t:"",t?this.EQ():this.kQ())}EQ(){if(this.He)return;this.He=!0,this.Vs.style.display="",this.Z0t||(this.lD.style.cursor="pointer");const t=this.Z0t?this.Vs:this.lD;Fe.Ys.Je?(t.addEventListener("touchstart",this.H0t),t.addEventListener("touchend",this.X0t)):(t.addEventListener("mousedown",this.H0t),t.addEventListener("click",this.X0t))}kQ(){if(!this.He)return;this.He=!1,this.Vs.style.display="none",this.Z0t||(this.lD.style.cursor="");const t=this.Z0t?this.Vs:this.lD;Fe.Ys.Je?(t.removeEventListener("touchstart",this.H0t),t.removeEventListener("touchend",this.X0t)):(t.removeEventListener("mousedown",this.H0t),t.removeEventListener("click",this.X0t))}wy(){this.Bo(),this.kQ(),this.lD.removeChild(this.Vs)}constructor(t,i=Fe.Ys.Je){super(),this.He=!1,this.H0t=t=>{t.stopPropagation(),this.yo(new Jr("clickstart"))},this.X0t=t=>{t.stopPropagation(),this.yo(new Jr("click"))},this.lD=t,this.Z0t=i,this.Vs=h.createElement("a"),this.Vs.style.position="absolute",this.Vs.style.zIndex="11",this.Vs.target="Vu",this.Z0t?(Ou(this.Vs,"learn more"),this.Vs.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Vs.setAttribute("rel","noopener")):pc(this.Vs),this.lD.appendChild(this.Vs),this.kQ()}};r(),r();var z1=[1200,992,768,576],B1={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},U1=class{q0t(t){let i=Q1(t);i!==this.K0t&&(Ea(this.Vs,i),Yd(this.Vs,this.K0t),this.K0t=i)}gn(){this.Xu.fn(ZL.pn,this.mn)}constructor(t,i){this.Vs=t,this.Xu=i,this.mn=t=>{this.q0t(t.width)},this.K0t=Q1(i.Su),Ea(this.Vs,this.K0t),i.yn(ZL.pn,this.mn)}};function Q1(t){for(let i of z1)if(t>i)return B1[i];return"theo-size-xs"}var F1=class extends tu{get we(){return this.Vs}get UI(){return this.zo}get UN(){return this.Zl.textContent||""}set UN(t){Ou(this.Zl,t)}J0t(t){"countdown"!==this.zo&&(this.zo="countdown",this.$0t(),this.we.classList.remove("theoplayer-ad-skip-button"),this.we.classList.add("theoplayer-ad-skip-countdown")),this.UN="You can skip in "+x.round(t)+" seconds"}t1t(){"skip"!==this.zo&&(this.zo="skip",this.UN="Skip Ad",this.i1t(),this.we.classList.remove("theoplayer-ad-skip-countdown"),this.we.classList.add("theoplayer-ad-skip-button"))}i1t(){this.we.addEventListener("mouseup",this.e1t),this.we.addEventListener("touchend",this.e1t)}$0t(){this.we.removeEventListener("mouseup",this.e1t),this.we.removeEventListener("touchend",this.e1t)}gn(){this.Bo(),this.$0t(),this.Gu.gn(),dn(this.Vs),dn(this.Zl),this.s1t&&dn(this.s1t)}constructor(t,i){super(),this.e1t=()=>{this.yo(new Jr("ZC"))},this.Vs=h.createElement("div"),this.we.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.we.style.position="absolute",this.Zl=h.createElement("span"),this.we.appendChild(this.Zl),i&&(this.s1t=h.createElement("div"),this.s1t.className="theoplayer-ad-skip-poster",this.s1t.style.backgroundImage='url("'+Bv(i)+'")',this.we.appendChild(this.s1t)),this.zo="countdown",this.Gu=new U1(this.we,t)}};bs();var Y1=class extends tu{n1t(){const t=this.PJt.zj.activeTrackIds;if(t){if(this.r1t()){const i=this.Pz.AL.map((t=>t.o)),e=this.Oz.AL.map((t=>t.o));Qa(i.concat(e),"0")&&t.push(0)}H1(t,this.Oz),H1(t,this.Pz),function(t,i){const e=!1;for(const e of i.AL)e.G$t=Qa(t,e.zL)?ua.Jn:ua.Ch}(t,this.Ul)}}o1t(){var t;const i=null==(t=this.PJt.zj.media)?void 0:t.tracks;if(!i)return;const e=i.filter(c1),s=i.filter(l1),n=i.filter(d1);if(this.r1t()&&0===s.length&&0!==this.Sk()){const t=this.h1t();s.push(t)}if(this.r1t()&&0===e.length){const t=this.a1t();e.push(t)}W1(this.Oz,e.map((t=>t.trackId))),W1(this.Pz,s.map((t=>t.trackId))),W1(this.Ul,n.map((t=>t.trackId))),Z1(e,this.Oz),Z1(s,this.Pz),function(t,i){let e=!1;for(const s of t){let t=G1(i,s.trackId);t||(t=new f1(s),i.tt(t),e=!0)}}(n,this.Ul)}u1t(){this.CG||(this.c1t=v(this.ld,250))}l1t(){m(this.c1t)}d1t(){this.l1t(),this.u1t()}f1t(){var t;const i=this.PJt.zj,e=i.media;var s;const n=null!=(s=null==e?void 0:e.duration)?s:NaN,r=(null==e?void 0:e.streamType)===chrome.cast.media.StreamType.LIVE||n<0,o=r?1/0:n;this.JM=o,this.g1t();const h=i.getEstimatedLiveSeekableRange(),a=null==(t=i.customData)?void 0:t.buffers;if($t(h)){const{start:t,end:i,isMovingWindow:e=r,isLiveDone:s=!1}=h;this.$Bt(t,i,e,s)}else if($t(a)){const[t,i]=a.seekable;this.$Bt(t,i,r,!1)}else r?this.$Bt(void 0,void 0,!0,!1):this.$Bt(0,o,!1,!1)}_1t(){const t=this.PJt.zj,i=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||V1(t);this.v1t=i,this.CG!==i&&(this.CG=i,this.CG?this.yo(new Se(this.xE())):this.yo(new fi(this.xE())))}th(){const{playbackRate:t}=this.PJt.zj;this.w1t!==t&&(this.w1t=void 0,this.jG!==t&&(this.jG=t,this.yo(new Pu(this.xE(),t))))}m1t(){const{playerState:t}=this.PJt.zj;let i;switch(t){case chrome.cast.media.PlayerState.IDLE:i=Fn.Nz;break;case chrome.cast.media.PlayerState.BUFFERING:i=Fn.Xn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:i=Fn.Dz}this.X5(i),this.p1t()}$Bt(t,i,e,s){$t(t)&&$t(i)?this.I5=new Xu(t,i,e,e&&!s):this.I5=void 0}A1t(t,i){this.z$t=null!=i?i:this.z$t,this.P$t=null!=t?t:this.P$t,this.yo(new vo)}We(t){this.y1t!==t?(this.kG=!0,this.yo(new Yr(this.xE()))):this.y1t=void 0}YV(){if(!this.kG)return;this.kG=!1;const t=this.xE();this.yo(new A(t,this.DE())),this.yo(new aa(t))}Sh(){this.W5=!0,this.RE()&&this.yo(new fa(this.xE()))}g1t(){const t=this.yDt,i=this._d();t===i||j(t)&&j(i)||(this.yDt=i,this.yo(new yt(i)))}b1t(){const t=this.xE();this.kG||this.M1t===t||(this.M1t=t,this.yo(new A(t,this.DE())))}R$t(){this.CG&&(this.CG=!1,this.yo(new fi(this.xE())),this.X5(Fn.Nz))}Ynt(){return this.Dc}SE(){return this.QDt.Gb(this.O$t)}xE(){if(this.Dc.$c){const t=this.PJt.KJt();if(void 0!==t)return t}return this.Cnt()}Cnt(){return void 0!==this.T1t?this.O$t+this.T1t:this.W5?this._d():this.O$t+this.PJt.qJt()}DE(){if(this.S1t)return new Date(this.Cnt()+this.S1t)}_d(){if(this.Dc.$c){var t;const i=null==(t=this.Dc.crt[0])?void 0:t.ct;if(void 0!==i&&!j(i))return i}return this.O$t+this.JM}PE(){return this.dV}RE(){return!this.Dc.$c&&this.W5}JE(){return this.CG}ek(){return this.jG}nk(t){this.jG!==t&&(this.w1t=this.jG,this.jG=t,this.yo(new Pu(this.xE(),t)),this.PJt.nk(t))}gk(){return this.Z5}hk(){return this.Dc.$c?Mo.RP(0,this.xE()):this.Fo.Gb(this.O$t)}vk(){var t,i;if(this.Dc.$c)return Mo.PP();let e=null!=(i=null==(t=this.I5)?void 0:t.Q3().Gb(this.O$t))?i:Mo.PP();if(e.V>0){const t=e.jn(e.V-1);e=e.pP(Mo.RP(t,this.xE()))}return e}pk(){return this.kG}AE(){return this.Oz}Mk(){return this.Pz}Ak(){return this.Ul}h1t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.bk(),id:"0",name:"",width:this.Sk()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:a1.NI}}a1t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:a1.SI}}r1t(){var t,i;return!(void 0!==(null==(t=this.nOt.WJt())?void 0:t.version))||(null==(i=this.nOt.WJt())?void 0:i.sdkType)===m1.K$t}XJt(t){this.r1t()&&ra(t,0),this.PJt.XJt(t)}Sk(){return this.P$t}bk(){return this.z$t}Pk(){this.CG&&(this.CG=!1,this.v1t=!1,this.yo(new fi(this.xE()))),this.PJt.Pk()}Rk(){this.CG||(this.CG=!0,this.v1t=!0,this.yo(new Se(this.xE()))),this.PJt.Rk()}Wb(t){if(this.Dc.$c)return;let i=x.max(0,t-this.O$t);i=x.round(1e6*i)/1e6;const e=this.T1t;this.T1t=i,this.v1t=this.JE(),this.y1t=i,this.kG=!0,this.yo(new Yr(this.xE())),void 0===e&&(this.r1t()?this.N1t(i):this.p7(i))}p7(t){this.PJt.Wb(t,this.v1t).then(this.I1t(t)).catch(this.HJt)}I1t(t){return()=>{void 0!==this.T1t&&(this.T1t===t?this.T1t=void 0:this.p7(this.T1t))}}X5(t){this.Z5!==t&&(this.Z5=t,this.yo(new cu(this.xE(),t))),void 0===this.T1t&&this.kG&&t>=Fn.Iz&&this.YV(),this.p1t()}p1t(){if(this.CG)return void(this.D1t=!1);const t=this.Z5>=Fn.Dz;this.D1t!==t&&(this.D1t=t,t?this.yo(new te(this.xE())):this.yo(new sD(this.xE())))}E1t(){this.k1t||(this.k1t=h.createElement("div"),this.ta.we.appendChild(this.k1t),this.k1t.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.k1t.style.zIndex="10",pc(this.k1t)),this.k1t.style.display=this.Dc.$c?"":"none"}L1t(){var t;const i=null==(t=this.Dc.crt[0])?void 0:t.rqt;i&&!this.x1t?(this.x1t=new P1(this.k1t,!0),this.x1t.G0t=i,this.x1t.yn("clickstart",this.C1t)):this.x1t&&(this.x1t.G0t=i)}j1t(){var t;const i=null==(t=this.Dc.crt[0])?void 0:t.Oqt;if(void 0===i||i<0)return void(this.O1t&&(this.O1t.gn(),this.O1t=void 0));if(!this.O1t){var e;const t=null==(e=this.ta.Ca)?void 0:e.mi;this.O1t=new F1(this.ta.Uu,t),this.k1t.appendChild(this.O1t.we),this.O1t.yn("ZC",this.R1t)}const s=this.PJt.KJt();void 0!==s&&(s<i?this.O1t.J0t(i-s):this.O1t.t1t())}B$t(){return this.O$t}U$t(t){this.O$t=t}vrt(t){}zk(){this.PJt.zk()}gn(){this.Bo(),this.Dc.gn(),this.x1t&&(this.x1t.wy(),this.x1t=void 0),this.O1t&&(this.O1t.gn(),this.O1t=void 0),this.k1t&&(dn(this.k1t),this.k1t=void 0),this.PJt.FJt(this.q3),this.PJt.UJt(this.P1t),this.PJt.VJt(this.T$t),this.PJt.fn(R0.OJt,this.z1t),this.PJt.gn()}constructor(t,i,e,s,n){super(),this.QDt=Mo.PP(),this.S1t=void 0,this.W5=!1,this.dV=void 0,this.w1t=void 0,this.Z5=Fn.Nz,this.D1t=!1,this.Fo=Mo.PP(),this.I5=void 0,this.kG=!1,this.Oz=new kt,this.Pz=new kt,this.Ul=new Uu,this.yDt=NaN,this.T1t=void 0,this.v1t=!1,this.M1t=NaN,this.y1t=void 0,this.c1t=0,this.P1t=(t,i)=>{switch(t){case"buffered":this.QDt=new Mo(i),this.yo(new ii(this.xE()));break;case"currentProgramDateTime":this.S1t=new Date(i).getTime()-this.xE();break;case"played":this.Fo=new Mo(i);break;case"seekable":this.f1t();break;case"videoHeight":this.A1t(void 0,i);break;case"videoWidth":this.A1t(i,void 0)}},this.q3=t=>{switch(t.type){case Zi.Mb:this.We(t.currentTime);break;case Zi.bb:this.YV();break;case Zi.Ab:this.yo(new PQ(t.representation,t.previousRepresentation));break;case Zi.Tb:this.yo(new dQ(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case Zi.Xy:this.yo(new yG(t.currentTime,t.initDataType,t.initData));break;case Zi.Yy:this.yo(new Go(new lu(vt.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case Zi.Vy:this.yo(new wR)}},this.T$t=t=>{this.f1t(),this._1t(),this.th(),this.m1t(),this.b1t(),this.d1t(),this.o1t(),this.n1t(),this.E1t(),this.L1t(),this.j1t(),t||V1(this.PJt.zj)&&this.Sh()},this.ld=()=>{this.b1t(),this.j1t()},this.z1t=t=>{this.yo(t)},this.N1t=ze((t=>this.p7(t)),50),this.HJt=t=>{this.T1t=void 0,this.yo(new P0(t))},this.C1t=()=>{this.Rk()},this.R1t=()=>{this.Dc.ZC()},this.ta=t,this.nOt=e,this.PJt=s,this.Dc=new j1(t,s,i.Vc),this.O$t=n.B$t(),this.JM=n._d()-this.O$t,this.CG=n.JE(),this.jG=n.ek(),this.P$t=n.Sk(),this.z$t=n.bk(),this.PJt.QJt(this.q3),this.PJt.zJt(this.P1t),this.PJt.YJt(this.T$t),this.PJt.yn(R0.OJt,this.z1t),this.PJt.GJt().then((t=>{this.yo(new z0(t.bt,t.kc))}),this.HJt)}};function V1(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function G1(t,i){for(const e of t.AL)if(e.zL===i)return e}function W1(t,i){let e=!1;for(let s=0;s<t.V;s++){const n=t.bL(s);-1===i.indexOf(n.zL)&&(t.it(n),s--,e=!0)}return e}function Z1(t,i){let e=!1;for(const s of t){let t=G1(i,s.trackId);t||(t=new w1(s),i.tt(t),e=!0)}return e}function H1(t,i){for(const e of i.AL)e.X$t=Qa(t,e.zL);return!1}r();var X1=class{Qrt(t){return Promise.resolve("all")}Ok(){}gn(){}};r();function q1(t,i,e){if(j(t))return e;if(t===1/0){if("live"===e||"dvr"===e)return e;if(i&&i.length>0){if(i.end(i.length-1)-i.start(0)>60)return"dvr"}return"live"}return"vod"}var K1=[Zi.qy,Zi.Zy,Zi.pb,Zi.yb,Zi.wb,Zi.so,Zi.mb,Zi.Eb,Zi.Mb,Zi.bb,E.rP,E.oP,Zi.Ab,Zi.Tb,Zi.Xy,Zi.Yy,Zi.Vy],J1=class extends Xt{DG(t){if(!t)return;ns(this.AG&&yM(this.AG),t&&yM(t))||(this.AG=t,this.yo(new TS(t)))}B1t(t){if(!t)return;const i=tl(t,this.ta.md);ns(this.wc&&yM(this.wc),i&&yM(i))||(this.Ea.U$t(0),this.wc=i,this.yo(new Wz(i)),this.Ea.R$t())}U1t(t){for(const i of this.rt.AL)if(i.zL===t)return i;for(const i of this.ht.AL)if(i.zL===t)return i}get Xgt(){return this.Ea}set Xgt(t){const i=this.Ea;i&&(i.fn(R0.OJt,this.z1t),i.fn(R0.RJt,this.Q1t),i.fn(K1,this.Ds),i.fn(E.lL,this.rF),t.U$t(i.B$t()),i.vrt(t.Ynt())),this.Ea=t,this.Oz.TL=t.AE(),this.Pz.TL=t.Mk(),this.Ul.TL=t.Ak(),this.Dc.TL=t.Ynt(),i&&i.gn(),t.yn(R0.OJt,this.z1t),t.yn(R0.RJt,this.Q1t),t.yn(K1,this.Ds),t.yn(E.lL,this.rF)}get Yh(){return this.Kh}get Vc(){return this.Ynt()}Ynt(){return this.Dc}Vnt(){return this.Int}AE(){return this.Oz}SE(){return this.Ea.SE().ks()}get F1t(){return this.Y1t||this.wc}set F1t(t){this.Y1t=t}async $n(t,i){var e;t&&await this.N$t(t,null!=(e=t.ads)?e:[],t.streamType,NaN,0,null!=i?i:0)}async V1t(t){var i;const e=null!=(i=this.Y1t)?i:this.wc;if(!e)return;var s;const n=this.Y1t?null!=(s=this.Y1t.ads)?s:[]:this.Crt(),r=this.ta._d(),o=this.ta.vk(),h=q1(r,o,e.streamType),a=o.length>0?o.start(0):0,u=null!=t?t:this.Cnt();await this.N$t(e,n,h,r,a,u)}Crt(){const t=new mB;return this.Dc.vrt(t),t.Crt()}DE(){return this.Ea.DE()}kE(){return this.AG}get LE(){return this.xE()}set LE(t){this.CE(t)}xE(){return this.Ea.xE()}Cnt(){return this.Ea.Cnt()}CE(t,i){this.G1t||(this.nOt.S$t()||this.G1t||!this.wc?this.Ea.Wb(t):this.$n(this.wc,t))}_d(){return this.Ea._d()}RE(){return this.Ea.RE()}PE(){return this.dV}BE(){return this.fV}QE(){return this.Rz}GE(){return this.ta.VE}ZE(){return this.xG}HE(t){this.xG=t,this.yo(new $e(this.LE,this.Nk)),this.nOt.HE(t)}JE(){return this.Ea.JE()}ek(){return this.Ea.ek()}nk(t){this.Ea.nk(t)}hk(){return this.Ea.hk().ks()}lk(){return Dn.Mz}dk(t){}gk(){return this.Ea.gk()}vk(){return this.Ea.vk().ks()}pk(){return this.Ea.pk()}Ya(){return this.wc}async ka(t){this.wc=t,await this.$n(t),this.Y1t=void 0,this.Ea.R$t()}Ak(){return this.Ul}bk(){return this.Ea.bk()}Sk(){return this.Ea.Sk()}Mk(){return this.Pz}Ik(){return this.cT}Dk(t){this.cT=t,this.yo(new $e(this.LE,this.Nk)),this.nOt.Dk(t)}get xk(){return!1}set xk(t){}jk(){}Ck(){return this.Zo}Ok(){}Pk(){this.nOt.S$t()||this.G1t||!this.wc?this.Ea.Pk():this.$n(this.wc)}Rk(){this.Ea.Rk()}ur(){this.Kh=!0}ar(){this.AG=void 0,this.Kh=!1}ge(){}be(){}async N$t(t,i,e,s,n,r){this.G1t=!0,this.W1t(),this.Ea.U$t(n);const o="live"===e||"dvr"===e,h=function(t,i,e){return{theoplayer_version:1,streamStart:t,isLive:i,sourceDescription:e}}(n,o,t),a={I$t:t,Vc:i,LE:x.max(0,r-n),ct:s,I1:o?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,D$t:h};try{await this.nOt.N$t(a)}catch(t){this.Z1t(t)}finally{this.G1t=!1}}H1t(){this.X1t(this.Oz),this.X1t(this.Pz),this.q1t(this.Ul)}X1t(t){for(const i of t.AL)this.K1t(i);t.yn(zh.Hk,(t=>{this.K1t(t.Ht),this.J1t()}))}q1t(t){for(const i of t.AL)this.$1t(i);t.yn(zh.Hk,(t=>{this.$1t(t.Ht),this.J1t()}))}K1t(t){t.yn(Hr.F$t,this.jpt),t.yn(Hr.Y$t,this.t2t),t.yn(Hr.Y$t,this.n1t)}$1t(t){t.yn(Hr.Q$t,this.i2t),t.yn(Hr.Q$t,this.n1t)}e2t(){const t=[];for(const i of this.rt.AL)i.Rt&&t.push(i.zL);for(const i of this.ht.AL)i.Rt&&t.push(i.zL);for(const i of this.nt.AL)i.UI===ua.Jn&&t.push(i.zL);this.Ea.XJt(t)}s2t(t,i,e){this.n2t=t,this.r2t=i,this.o2t=e}h2t(t){var i,e;if(!t)return!1;return(null!=(e=null==(i=this.nOt.WJt())?void 0:i.version)?e:-1)>=2?t.map((t=>t.o)):[t[0].o]}a2t(t){this.u2t=t}Fk(){}Yk(){}Wk(t){throw new b("Can't add a track while casting.")}async zk(){this.Ea.zk(),this.W1t()}W1t(){this.qQ=Fn.Nz,this.VQ=!1,this.ZQ=!1,this.dV=void 0,this.fV=void 0}async gn(){this.W1t(),this.Bo(),this.Xgt=this.c2t(),this.nOt.fn(fn.OJt,this.z1t),this.nOt.fn(fn.d$t,this.IOt),this.nOt.fn(fn.kb,this.l2t),this.nOt.fn(fn.l$t,this.d2t),this.nOt.fn(fn.f$t,this.f2t),this.nOt.gn()}c2t(){return new o1(this,this.Ea.B$t(),this.Ea.xE(),this.Ea._d(),this.Ea.RE(),this.Ea.JE(),this.Ea.ek(),this.Ea.Sk(),this.Ea.bk())}constructor(t,i){super(t,!0),this.Kh=!1,this.u2t=Bn,this.qQ=Fn.Nz,this.VQ=!1,this.ZQ=!1,this.G1t=!1,this.Y1t=void 0,this.dV=void 0,this.fV=void 0,this.Oz=new ol,this.Pz=new ol,this.Ul=new Ce,this.Zo=new ut,this.Rz=new jM,this.Int=new X1,this.n2t=void 0,this.r2t=void 0,this.o2t=void 0,this.l2t=t=>{var i,e;($t(t.Nk)&&!ce(t.Nk,this.cT,1e-5)||$t(t.WE)&&t.WE!==this.xG)&&(this.cT=null!=(i=t.Nk)?i:this.cT,this.xG=null!=(e=t.WE)?e:this.xG,this.yo(new $e(this.LE,this.cT)))},this.d2t=()=>{const t=this.nOt.S$t();this.Xgt=t?new Y1(this,this.ta,this.nOt,t,this.Ea):this.c2t()},this.Q1t=t=>{this.DG(t.bt),this.B1t(t.kc)},this.f2t=t=>{const i=this.U1t(t.Fj);if(!i)return void 0;const e={targetQualityIds:t._$t};i.W$t(e)},this.z1t=t=>{this.Z1t(t.lt)},this.Z1t=t=>{this.u2t&&this.u2t(t)},this.IOt=t=>{this.dV=t.lt,this.fV=ju(this.dV),this.yo(new cl(this.fV))},this.t2t=t=>{if(!t.enabled)return;const i=this.rt.AL.some((i=>i.zL===t.trackId))?this.rt:this.ht;for(const e of i.AL)e.Rt&&e.zL!==t.trackId&&(e.Rt=!1)},this.i2t=t=>{if(t.mode===ua.Jn)for(const i of this.nt.AL)i.UI===ua.Jn&&i.zL!==t.trackId&&RI(i.Lt,t.track.Lt)&&(i.UI=ua.Ch)},this.n1t=ze((()=>{this.e2t()}),50),this.J1t=()=>{const t=[];var i;const e=null!=(i=dl(this.ht.AL,(t=>a2(t,this.n2t))))?i:dl(this.ht.AL,(t=>t.Rt));var s;e&&t.push(e.zL);const n=null!=(s=dl(this.nt.AL,(t=>a2(t,this.r2t))))?s:dl(this.nt.AL,(t=>t.UI===ua.Jn));var r;n&&t.push(n.zL);const o=null!=(r=dl(this.rt.AL,(t=>a2(t,this.o2t))))?r:dl(this.rt.AL,(t=>t.Rt));o&&t.push(o.zL),0!==t.length&&this.Ea.XJt(t)},this.jpt=t=>{const i=this.h2t(t.targetQuality),e=t.track;this.nOt.v$t(e.zL,e.E3,i)},this.rF=t=>{this.yo(t);const i=t.readyState;!this.VQ&&this.qQ===Fn.Nz&&i>=Fn.Xn&&(this.VQ=!0,this.yo(new yu(t.currentTime))),!this.ZQ&&this.qQ<=Fn.Xn&&i>=Fn.Iz&&(this.ZQ=!0,this.yo(new Cu(t.currentTime))),this.qQ<=Fn.Iz&&i>=Fn.Dz&&this.yo(new vS(t.currentTime)),this.qQ<=Fn.Dz&&i===Fn.Ez&&this.yo(new Eu(t.currentTime)),this.qQ=i},this.cT=this.ta.Nk,this.xG=this.ta.WE,this.nOt=i,this.nOt.yn(fn.OJt,this.z1t),this.nOt.yn(fn.d$t,this.IOt),this.nOt.yn(fn.kb,this.l2t),this.nOt.yn(fn.l$t,this.d2t),this.nOt.yn(fn.f$t,this.f2t),this.Dc=new vB(this),this.AG=this.ta.bt,this.wc=this.ta.Ya(),this.Xgt=new o1(this,0,this.ta.Cnt(),this.ta._d(),this.ta.OE,this.ta.KE,this.ta.$E,this.ta.Tk,this.ta.yk),this.H1t()}};r();var $1=class extends Dc{ma(){return new t2(this.lt)}constructor(t){super("error"),this.lt=t}},t2=class extends Jr{constructor(t){super("error"),this.error=t}};r();var i2=class extends Jr{constructor(t){super("statechange"),this.state=t}};function e2(t,i){let e;return{get casting(){return t.TJ},get error(){return t.lt},get receiverName(){return t.g2t},get state(){return t.Xgt},start(){t.Cn()},stop(){t.zk()},join(){t._2t()},leave(){t.v2t()},set connectionCallback(t){null==i||i.w2t(t)},get connectionCallback(){return null==i?void 0:i.m2t()},get source(){return e||t.kc},set source(i){e=i,t.kc=i},addEventListener(i,e){const s=Mt(i,Q);t.yn(s,e)},removeEventListener(i,e){const s=Mt(i,Q);t.fn(s,e)}}}r(),Qi(),bs();var s2=class extends gs{get TJ(){return this.Xgt===an.CONNECTING||this.Xgt===an.CONNECTED}get lt(){return this.dV}get ga(){return this.Za||(this.Za=e2(this,this.p2t)),this.Za}get g2t(){var t;return null==(t=this.p2t.A2t())?void 0:t.k$t()}get kc(){return this.ta?this.ta.F1t:this.Y1t}set kc(t){this.Y1t=t?tl(t,this.y2t.md):void 0,this.ta&&(this.ta.F1t=this.Y1t,this.Y1t&&this.ta.$n(this.Y1t))}get Xgt(){return this.Ea}set Xgt(t){let i=t;this.b2t||i!==an.CONNECTING&&i!==an.CONNECTED||(i=an.AVAILABLE),this.Ea!==i&&(this.Ea=i,this.yo(new i2(this.Xgt)))}async M2t(){if(!this.T2t)throw new b("Chromecast must be initialized before starting a session");await this.T2t,this.p2t.A2t()||await this.p2t.S2t()}async Cn(){this.b2t=!0;try{if(this.Xgt=an.CONNECTING,await this.M2t(),await this.N2t(),this.ta){const t=this.y2t.Ya(),i=this.p2t.I2t(t);this.ta.F1t=i?tl(i,this.y2t.md):this.Y1t,this.ta.V1t()}this.Xgt=an.CONNECTED,await this.y2t.zk()}catch(t){this.D2t(!1).catch(Bn),this.Xgt=an.AVAILABLE,Tu(t)||this.e8(t)}}async _2t(){this.b2t=!0;try{if(this.Xgt=an.CONNECTING,await this.M2t(),await this.N2t(),this.ta){const t=this.y2t.Ya(),i=this.p2t.E2t(t);i&&(this.ta.F1t=tl(i,this.y2t.md))}this.Xgt=an.CONNECTED,await this.y2t.zk()}catch(t){await this.D2t(!0).catch(Bn),this.Xgt=an.AVAILABLE,Tu(t)||this.e8(t)}}async k2t(){this.p2t.A2t()&&await this.Cn()}async N2t(){null!=this.ta||(this.ta=this.L2t()),this.dV=void 0,this.y2t.Rk(),await this.xK.x2t(this.ta)}L2t(){const t=new J1(this.y2t,this.p2t.A2t());return t.a2t(this.e8),t}C2t(){this.ta&&(this.ta.gn(),this.ta=void 0)}async D2t(t){if(this.b2t=!1,!this.ta)return;const i=this.ta.Yh,e=this.ta.Ya(),s=this.ta.Cnt();try{if(i){let i;i=t?this.p2t.j2t(e):this.p2t.O2t(e),null!=i||(i=e),await this.xK.R2t(i,i===e),this.y2t.CE(s),this.y2t.Pk()}}finally{this.C2t()}}v2t(){this.TJ&&(this.p2t.P2t(!1),this.D2t(!0).catch(this.e8))}zk(){this.TJ&&(this.p2t.P2t(!0),this.D2t(!1).catch(this.e8))}gn(){this.zQ.Ty(),this.p2t.fn(n1.j$t,this.z2t),this.Bo(),this.C2t()}constructor(t,i,e,s){super(),this.dV=void 0,this.Za=void 0,this.ta=void 0,this.Ea=an.UNAVAILABLE,this.b2t=!1,this.zQ=new Wt,this.B2t=()=>{this.p2t.yn(n1.j$t,this.z2t),this.Xgt=this.p2t.U2t()},this.z2t=t=>{const i=t.Xgt;this.Xgt=i,i!==an.UNAVAILABLE&&i!==an.AVAILABLE||this.D2t(!1).catch(this.e8)},this.Y1t=void 0,this.e8=t=>{Tu(t)||t instanceof ps&&(this.dV=t,this.yo(new $1(t).ga))},this.xK=t,this.y2t=i,this.p2t=s,this.KS=e.chromecast,this.T2t=Vh(this.p2t.FK(this.KS,this.zQ.ly),this.zQ),this.T2t.then(this.B2t).catch(this.e8)}};r(),Qi();var n2=class extends gs{get TJ(){return!1}get lt(){}get g2t(){}get kc(){}set kc(t){}get Xgt(){return an.UNAVAILABLE}get ga(){return this.Za||(this.Za=e2(this)),this.Za}_2t(){Fe.uA("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}v2t(){Fe.uA("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Cn(){Fe.uA("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}zk(){Fe.uA("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}k2t(){return Promise.resolve()}gn(){}};function r2(t){return{bt:t.bt,LE:t.xE(),ct:t._d(),OE:t.OE,lt:t.PE(),zE:t.BE(),WE:t.WE,KE:t.KE,$E:t.$E,fk:t.fk,wk:t.wk,yk:t.yk,Tk:t.Tk,Nk:t.Nk}}r(),r();var o2=class extends Xt{Ynt(){return this.Dc}AE(){return this.Oz}get UE(){return this.QE()}QE(){return this.Rz}_a(){return this.jz}Ak(){return this.Ul}Mk(){return this.Pz}switchContexts(t){this.ta=t,this.Oz.TL=t.ht,this.Pz.TL=t.rt,this.Ul.TL=t.nt,this.jz.TL=t.xV,this.Rz.TL=t.UE,this.Dc.TL=t.Vc}Q2t(t){this.ta!==t&&(this.bG(),this.switchContexts(t),this.yG())}zz(t){if(this.ta===t)return;let i;this.bG(),this.Xnt&&(i=r2(this));const e=this.kE(),s=this.Ck(),n=this.jk();if(this.switchContexts(t),void 0!==i){St(this,i,r2(this))}const r=this.kE();r!==e&&this.yo(new TS(r)),this.Ck()!==s&&this.yo(new SS),this.jk()!==n&&this.yo(new Bu),this.yG()}async gn(t){await super.gn(t),this.jz.gn(t),this.Oz.gn(t),this.Pz.gn(t),this.Ul.gn(t),this.Rz.gn(),await this.Dc.gn(t)}constructor(t,i){super(t,i),this.Oz=new ol,this.Pz=new ol,this.Ul=new Ce,this.Rz=new xt,this.jz=new DS(t.xV),this.Oz.TL=t.ht,this.Pz.TL=t.rt,this.Ul.TL=t.nt,this.Rz.TL=t.UE,this.Dc=new vB(this),this.Dc.TL=t.Vc}},h2=class extends o2{Ya(){const t=super.Ya();return!t&&this.F2t.TJ&&this.F2t.kc?this.F2t.kc:t}ka(t,i){return this.Go.Wo((i=>(this.Y2t=new Wt,this.Y2t.Sy(i),Vh(super.ka(t,this.Y2t.ly),this.Y2t))),i)}Pk(){super.Pk(),this.md.cast.strategy!==BM.AUTO||this.F2t.TJ||this.F2t.k2t()}x2t(t){return this.Go.Wo((i=>this.V2t(t,i)))}R2t(t,i){return void 0===t&&(t=void 0),void 0===i&&(i=!1),this.Go.Wo((e=>this.G2t(t,i,e)))}V2t(t,i){yi(i),this.W2t.Vc&&this.W2t.Vc.vrt(t.Vc),this.Z2t(),this.H2t=dl(this.W2t.ht.AL,(t=>t.Rt)),this.jIt=dl(this.W2t.nt.AL,(t=>"showing"===t.UI)),this.X2t=dl(this.W2t.rt.AL,(t=>t.Rt)),this.q2t=t,this.q2t.s2t(this.H2t,this.jIt,this.X2t),this.zz(t),this.q2t.ur()}async G2t(t,i,e){yi(e);const s=this.q2t;if(void 0!==s)try{if(t){await this.W2t.zk(),yi(e);const s=tl(t,this.W2t.md);i&&(s.ads=void 0),this.Y2t=new Wt,this.Y2t.Sy(e),await Vh(this.W2t.ka(s,this.Y2t.ly),this.Y2t)}i&&this.W2t.Vc&&s.Vc.vrt(this.W2t.Vc)}catch(t){Ct(t)}finally{s.ar(),this.zz(this.W2t),this.H2t=dl(this.q2t.ht.AL,(t=>t.Rt)),this.jIt=dl(this.q2t.nt.AL,(t=>"showing"===t.UI)),this.X2t=dl(this.q2t.rt.AL,(t=>t.Rt)),this.W2t.ht.yn(zh.Hk,this.K2t),this.W2t.nt.yn(zh.Hk,this.J2t),this.W2t.rt.yn(zh.Hk,this.$2t),this.W2t.yn(E.nP,this.Z2t),this.q2t===s&&(this.q2t=void 0)}}zk(){var t;return this.H2t=void 0,this.jIt=void 0,this.X2t=void 0,this.Z2t(),null==(t=this.Y2t)||t.Ty(),this.Go.Wo((()=>super.zk()))}async gn(){var t;null==(t=this.Y2t)||t.Ty(),this.F2t.gn(),await this.R2t(),await this.Go.gn(),await super.gn()}constructor(t,i){super(t),this.Go=new Wa,this.H2t=void 0,this.jIt=void 0,this.X2t=void 0,this.K2t=t=>{const i=t.Ht;a2(this.H2t,i)&&(i.Rt=!0)},this.J2t=t=>{const i=t.Ht;a2(this.jIt,i)&&(i.UI=ua.Jn)},this.$2t=t=>{const i=t.Ht;a2(this.X2t,i)&&(i.Rt=!0)},this.Z2t=()=>{this.W2t.ht.fn(zh.Hk,this.K2t),this.W2t.nt.fn(zh.Hk,this.J2t),this.W2t.rt.fn(zh.Hk,this.$2t)},this.W2t=t,this.md.cast.strategy!==BM.DISABLED?this.F2t=new s2(this,t,this.md.cast,i):this.F2t=new n2,this.qZ.LJ(this.F2t)}};function a2(t,i){return void 0!==t&&void 0!==i&&(t.gs===i.gs&&i.kh===t.kh)}r(),bs();var u2=new class extends tu{w2t(t){this.t4t=t}m2t(){return this.t4t}A2t(){return this.i4t}U2t(){switch(this.e4t.getCastState()){case cast.framework.CastState.CONNECTED:return an.CONNECTED;case cast.framework.CastState.CONNECTING:return an.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return an.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return an.UNAVAILABLE}}async FK(t,i){await E$(i),this.e4t=cast.framework.CastContext.getInstance(),this.e4t.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.xJ),this.e4t.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async S2t(){try{const t=await this.e4t.requestSession();if(t)throw t}catch(t){throw new ps(Ur(t))}}I2t(t){var i;return null==(i=this.t4t)?void 0:i.onStart(t)}O2t(t){var i;return null==(i=this.t4t)?void 0:i.onStop(t)}E2t(t){var i;return null==(i=this.t4t)?void 0:i.onJoin(t)}j2t(t){var i;return null==(i=this.t4t)?void 0:i.onLeave(t)}P2t(t){this.e4t.endCurrentSession(t)}constructor(...t){super(...t),this.i4t=void 0,this.t4t=void 0,this.xJ=()=>{const t=this.U2t();this.i4t=t===an.CONNECTED?new e1(this.e4t.getCurrentSession()):void 0,this.yo(new r1(t))}}},c2=new class{get ga(){return this.Za||(this.Za=function(t){return{initialize(i){const e=t.FK(UM(i));return e.catch(Bn),e},startSession(){const i=t.S2t();return i.catch(Bn),i},endSession(){t.s4t()}}}(this)),this.Za}async FK(t){this.T2t||(this.T2t=this.n4t(t)),await this.T2t}async n4t(t){await this.p2t.FK(t)}async S2t(){if(!this.T2t)throw new b("Chromecast must be initialized before starting a session");await this.T2t,this.p2t.A2t()||await this.p2t.S2t()}r4t(){this.p2t.P2t(!1)}s4t(){this.p2t.P2t(!0)}constructor(t){this.T2t=void 0,this.Za=void 0,this.p2t=t}}(u2),l2={get chromecast(){return c2.ga}};jr((t=>new h2(t,u2)),Hn.Jnt),r(),r(),r(),r(),r(),r(),r();var d2=class{o4t(t,i,e,s){t.qG.forEach((t=>{if(!this.h4t(t.a4t)){const n=t.u4t(i,e,s);n&&this.c4t(n)}}))}h4t(t){return this.l4t.get(t)}c4t(t){this.l4t.set(t.d4t,t),this.f4t.set(t.d4t,t.g4t),this._4t.iu(t.v4t)}wrt(t){this.f4t.has(t.d4t)||(this.f4t.set(t.d4t,t),this._4t.iu(t.v4t))}w4t(t){return this.f4t.forEach(t)}m4t(t){return this.l4t.forEach(t)}p4t(t){let i=!1;return this.l4t.forEach((e=>{i=e.p4t(t)||i})),i}async gn(){const t=[];this.l4t.forEach((i=>t.push(i.gn()))),this.f4t.forEach((i=>t.push(i.gn()))),await Promise.all(t),this.l4t.clear(),this.f4t.clear()}constructor(t){this._4t=t,this.l4t=ll(),this.f4t=ll()}};r();var hc=class t extends Dc{ma(){return new f2(this.kKt,this.Pb,this.oM,this.kc)}static A4t(i){return new t(Nr.GENERAL,i.Pb,i.xKt)}static y4t(i,e){return new t(i.kKt,i.message,i.xKt,e)}constructor(t,i,e,s){super("b4t"),this.kKt=t,this.Pb=i,this.oM=e,this.kc=s}},f2=class extends Jr{constructor(t,i,e,s){super("aderror"),this.problemType=t,this.message=i,this.errorCode=e,this.source=s}};Qi();var g2=class extends Yt{get M4t(){return this.T4t}get $c(){let t=!1;return this.S4t((i=>{t=t||i.N4t})),t}get crt(){const t=[];return this.S4t((i=>{const e=i.crt;e.length&&t.push(...e)})),t}get drt(){let t=null;return this.S4t((i=>{null!=t||(t=i.drt)})),t}get frt(){const t=[];return this.S4t((i=>{t.push(...i.frt)})),t}get grt(){const t=[];return this.S4t((i=>{t.push(...i.grt)})),t}vrt(t){this.S4t((i=>{i.vrt(t)}))}get Znt(){}get ga(){var t;return null!=(t=this.Za)?t:this.Za=$z(this)}I9(t,i,e){try{this.I4t=e;const s=mk.Ld.JG(t);if(s.a4t===ah.Knt)return;const n=this.T4t.h4t(s.a4t);if(!n)throw new Ie(Nr.ADBLOCK,void 0,"Ads could not be loaded.");i!==Jz.urt&&this.s7||this.E4t.D4t(n),s.I9(t,i,n,this.I4t)}catch(i){0,this.yo(hc.y4t(i,t.sources))}}ZC(){this.S4t((t=>{t.ZC()}))}wrt(t){this.T4t.wrt(t)}_rt(t,i){return this.E4t._rt(t,i)}k4t(t){this.T4t.m4t((i=>{i.k4t(t)}))}p4t(t){return this.T4t.p4t(t)}S4t(t){return this.T4t.w4t(t)}Ok(){this.T4t.m4t((t=>t.Ok()))}async tr(){this.s7=!1;const t=[];this.T4t.m4t((i=>t.push(i.zk()))),await Promise.all(t)}async gn(){this.Bo(),await this.T4t.gn(),this.E4t.fn(Zi.so,this.Vst),this.fn("b4t",this.L4t)}constructor(t){super(),this.I4t=!1,this.s7=!1,this.Za=void 0,this.L4t=t=>{if(!this.I4t)return;const i=new P(lt.ADVERTISEMENT_ERROR,t.Pb),e=new qi(vt.AD_BLOCKER_DETECTED,t.Pb+" Turn off your AdBlocker and try again.",i);this.E4t.eG(e)},this.Vst=()=>{this.s7=!0},this.E4t=t,this.T4t=new d2(this),this.yn("b4t",this.L4t),t.yn(Zi.so,this.Vst)}};Qi(),r(),r(),r();var _2=class extends b1{get Vc(){return this.Dc}get $$t(){return this.x4t}set $$t(t){this.x4t=t}get t0t(){return this.C4t}set t0t(t){this.C4t=t}set lzt(t){this.yJt=t}get lzt(){return this.yJt}get D$t(){return this.j4t}O4t(){this.R4t=!0}P4t(t){this.Dc.push(t),this.R4t=!1}z4t(t){ra(this.Dc,t)}get rk(){return this.R4t}constructor(t){super(),this.yJt=t,this.Dc=[],this.x4t=-1,this.C4t=-1,this.j4t=void 0,this.R4t=!1}},v2=class extends _2{get wJt(){return this.B4t}get frt(){return this.U4t}Yn(t){void 0!==t.maxDuration&&(this.x4t=t.maxDuration),void 0!==t.customData&&(this.j4t=t.customData)}Q4t(t){const i=this.Dc.indexOf(t);return i>=0&&i<this.Dc.length-1}P4t(t){super.P4t(t),this.U4t.push(t)}F4t(t){ra(this.U4t,t)}z4t(t){super.z4t(t),ra(this.U4t,t)}constructor(t,i){super(i.timeOffset),this.U4t=[],this.B4t=t,this.Yn(i)}};r(),r();var la=function(t){return t.YKt="linear",t.Y4t="nonlinear",t.dI="unknown",t}({}),w2=function(t){return t.NONE="none",t.READY="ready",t}({}),m2=class extends y1{V4t(t,i,e,s,n,r){this.aS=t,this.dT=i,this.fT=e,this.JM=s,this.BXt=n,this.Rqt=r,this.G4t="ready"}get W4t(){return this.G4t}get zXt(){return this.BXt}get ct(){return this.JM}lrt(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}get Ti(){return this.fT}get o(){return this.aS}get Oqt(){return this.Rqt}get ji(){return this.dT}get Z4t(){return this.H4t}get rqt(){return this.oqt}get EXt(){return this.kXt}get _Xt(){return this.kqt}get D$t(){return this.j4t}get X4t(){return this.q4t}v0t(){}A0t(){return""}p0t(){return this.K4t}constructor(t,i){super(),this.H4t=i,this.aS=void 0,this.Rqt=void 0,this.dT=void 0,this.fT=void 0,this.JM=void 0,this.kqt=[],this.BXt=[],this.G4t="none",this.j4t=void 0,this.q4t=!1,this.Yl=t}};function Or(t){return{get adSystem(){return t.v0t()},get readyState(){return t.W4t},get adBreak(){return t.Yl.lrt()},get duration(){return t.ct},get companions(){return t.zXt.map((t=>t.ga))},get resourceURI(){return t.p0t()},get clickThrough(){return t.rqt},get width(){return t.ji},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t.Z4t)},get height(){return t.Ti},get id(){return t.o},get skipOffset(){return t.Oqt},get integration(){return t.wJt},get creativeId(){return t.EXt},get universalAdIds(){return t._Xt},get customData(){return t.D$t},get isSlate(){return t.X4t}}}r();var p2=class{get qXt(){return this.KXt}get sqt(){return this.nqt}get J4t(){return this.$4t}get rqt(){return this.oqt}get Ti(){return this.fT}get mKt(){return this.K4t}get ji(){return this.dT}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get adSlotId(){return t.qXt},get altText(){return t.sqt},get contentHTML(){return t.J4t},get clickThrough(){return t.rqt},get height(){return t.Ti},get resourceURI(){return t.mKt},get width(){return t.ji}}}(this)}t3t(t){if(t.rqt&&t.mKt)return;const i=function(t){try{return h0(t,"text/html")}catch(t){return}}(t.J4t);i&&(this.oqt=A2(i,"a","href"),this.K4t=A2(i,"img","src"))}constructor(t){var i;this.Za=void 0,this.oqt=void 0,this.K4t=void 0,this.KXt=t.qXt,this.dT=t.ji,this.fT=t.Ti,this.$4t=t.J4t,this.oqt=t.rqt,this.K4t=t.mKt,this.nqt=null!=(i=t.sqt)?i:"",this.t3t(t)}};function A2(t,i,e){const s=t.querySelector(i);return s&&s.getAttribute(e)||""}var y2=class extends m2{get wJt(){return this.B4t}get i3t(){return this.e3t}set i3t(t){this.e3t=t}ma(){return Or(this)}Yn(t){t.id&&(this.aS=t.id),void 0!==t.skipOffset&&(this.Rqt=t.skipOffset),void 0!==t.width&&(this.dT=t.width),void 0!==t.height&&(this.fT=t.height),void 0!==t.duration&&(this.JM=t.duration),void 0!==t.readyState&&(this.G4t=function(t){return"ready"===t?w2.READY:w2.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.K4t=t.resourceURI),void 0!==t.clickThrough&&(this.oqt=t.clickThrough),void 0!==t.companions&&(this.BXt=[...t.companions].map(b2)),void 0!==t.creativeId&&(this.kXt=t.creativeId),void 0!==t.universalAdIds&&(this.kqt=t.universalAdIds),void 0!==t.customData&&(this.j4t=t.customData)}constructor(t,i,e){super(e,function(t){return"linear"===t?la.YKt:"nonlinear"===t?la.Y4t:la.dI}(i.type)),this.e3t=0,this.B4t=t,this.Yn(i)}};function b2(t){const i={qXt:t.adSlotId,sqt:t.altText,J4t:t.contentHTML,VN:void 0,rqt:t.clickThrough,Ti:t.height,mKt:t.resourceURI,ji:t.width};return new p2(i)}r();var Kr=class extends rB{ma(){return new M2(this.Art.lrt(),this.s3t)}get s3t(){return this.n3t}constructor(t,i){super("r3t",t),this.n3t=i}},M2=class extends oB{constructor(t,i){super("adskip",t),this.playedPercentage=i}};r();var T2=class extends iB{ma(){return new S2(this.Yl.lrt())}constructor(t){super("o3t",t)}},S2=class extends eB{constructor(t){super("updateadbreak",t)}};r();var N2=class extends iB{ma(){return new I2(this.Yl.lrt())}constructor(t){super("h3t",t)}},I2=class extends eB{constructor(t){super("adbreakchange",t)}};bs(),r();var D2=class extends rB{ma(){return new E2(this.Art.lrt(),this.currentTime)}constructor(t,i){super("a3t",t),this.currentTime=i}},E2=class extends oB{constructor(t,i){super("adfirstquartile",t),this.currentTime=i}};r();var k2=class extends rB{ma(){return new L2(this.Art.lrt(),this.currentTime)}constructor(t,i){super("u3t",t),this.currentTime=i}},L2=class extends oB{constructor(t,i){super("admidpoint",t),this.currentTime=i}};r();var x2=class extends rB{ma(){return new C2(this.Art.lrt(),this.currentTime)}constructor(t,i){super("c3t",t),this.currentTime=i}},C2=class extends oB{constructor(t,i){super("adthirdquartile",t),this.ad=t,this.currentTime=i}},j2=class{get Vc(){return this.Dc}get s0t(){return this.D0t}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get integration(){return t.wJt},get ads(){return t.Vc.map((t=>t.lrt()))},get adBreaks(){return t.s0t.map((t=>t.lrt()))},createAd:(i,e)=>t.l3t(i,e?t.d3t(e):void 0).lrt(),updateAd(i,e){t.f3t(t.g3t(i),e)},updateAdProgress(i,e){const s=ur(Number(e),0,1);t._3t(t.g3t(i),s)},beginAd(i){t.F4t(t.g3t(i))},endAd(i){t.v3t(t.g3t(i))},skipAd(i){t.$Jt(t.g3t(i))},removeAd(i){t.z4t(t.g3t(i))},createAdBreak:i=>t.w3t(i).lrt(),updateAdBreak(i,e){t.m3t(t.d3t(i),e)},removeAdBreak(i){t.p3t(t.d3t(i))},removeAllAds(){t.A3t()},error(i){t.y3t(i)},fatalError(i,e){const s=e?Number(e):void 0;t.b3t(i,s)}}}(this)}get Zj(){return this.o8}set Zj(t){this.o8=t}get N4t(){return this.M3t.some((t=>t.Z4t===la.YKt))}get d4t(){return this.wJt}get crt(){return this.M3t}get drt(){var t;return null!=(t=this.I0t)?t:null}get frt(){return Ms(this.D0t,(t=>t.frt))}get grt(){return this.D0t.filter((t=>!t.rk))}ZC(){var t;if(0===this.M3t.length)return;const i=this.M3t[0];(null==(t=this.o8)?void 0:t.skipAd)?this.o8.skipAd(i.lrt()):this.$Jt(i)}vrt(t){}l3t(t,i){var e;const s=null!=i?i:this.T3t({timeOffset:null!=(e=t.timeOffset)?e:0}),n=new y2(this.wJt,t,s);return s.P4t(n),this.Dc.push(n),this.v4t.yo(new Ar(n)),n}f3t(t,i){t.Yn(i),this.v4t.yo(new k1(t))}_3t(t,i){if(!Qa(this.M3t,t))throw new b("Cannot update ad progress on a non-started ad");const e=t.i3t,s=x.max(e,i);t.i3t=s;const n=this.E4t.xE();e<.25&&s>=.25&&this.v4t.yo(new D2(t,n)),e<.5&&s>=.5&&this.v4t.yo(new k2(t,n)),e<.75&&s>=.75&&this.v4t.yo(new x2(t,n))}F4t(t){Qa(this.M3t,t)||(this.M3t.push(t),t.Yl.F4t(t),this.S3t(t.Yl),this.v4t.yo(new bu(t,this.E4t.xE())))}$Jt(t){if(!Qa(this.M3t,t))return;const i=t.Yl.Q4t(t);this.v4t.yo(new Kr(t,t.i3t)),this.N3t(t,i)}v3t(t){if(!Qa(this.M3t,t))return;const i=t.Yl.Q4t(t);this.v4t.yo(new dB(t,this.E4t.xE())),this.N3t(t,i)}z4t(t){if(!Qa(this.Dc,t))return;const i=t.Yl.Q4t(t);ra(this.Dc,t),t.Yl.z4t(t),this.v4t.yo(new N2(t.Yl)),this.N3t(t,i)}w3t(t){const i=new v2(this.wJt,t);return this.D0t.push(i),this.v4t.yo(new Mr(i)),i}m3t(t,i){t.Yn(i),this.v4t.yo(new T2(t))}p3t(t){if(Qa(this.D0t,t)){for(const i of t.Vc.slice())this.z4t(i);ra(this.D0t,t),this.v4t.yo(new Cr(t))}}A3t(){for(const t of this.D0t.slice())this.p3t(t)}y3t(t){this.v4t.yo(new hc(Nr.GENERAL,t.message))}b3t(t,i){const e=new qi(null!=i?i:vt.AD_ERROR,t.message,t);this.E4t.eG(e)}I3t(t){return dl(this.D0t,(i=>i.lzt===t))}T3t(t){var i;return null!=(i=this.I3t(t.timeOffset))?i:this.w3t(t)}N3t(t,i){ra(this.M3t,t);const e=t.Yl;0!==this.M3t.length||this.I0t!==e||i||(e.O4t(),this.S3t(void 0))}S3t(t){this.I0t!==t&&(void 0!==this.I0t&&this.v4t.yo(new Zu(this.I0t)),this.I0t=t,void 0!==t&&this.v4t.yo(new uB(t)))}g3t(t){const i=dl(this.Dc,(i=>i.lrt()===t));if(void 0===i)throw new b('Invalid ad for integration "'+this.wJt+'"');return i}d3t(t){const i=dl(this.D0t,(i=>i.lrt()===t));if(void 0===i)throw new b('Invalid ad break for integration "'+this.wJt+'"');return i}async ka(t,i){var e;if(yi(i),null==(e=this.o8)?void 0:e.setSource){let i=await Promise.resolve(this.o8.setSource(t));return Qk(i)&&(i=t),tl(i,this.E4t.md)}return t}async D3t(){var t;(null==(t=this.o8)?void 0:t.resetSource)?await Promise.resolve(this.o8.resetSource()):this.A3t()}async gn(){var t;(null==(t=this.o8)?void 0:t.destroy)&&await Promise.resolve(this.o8.destroy()).catch(Bn),this.A3t(),this.S3t(void 0),this.o8=void 0,this.v4t.gn()}constructor(t,i){this.v4t=new Yt,this.Dc=[],this.D0t=[],this.M3t=[],this.wJt=t,this.E4t=i}};bs(),r();var O2=class{destroy(){this.removeAdListeners()}get player(){return this.ta}set player(t){this.ta&&this.removeAdListeners(),this.ta=t,this.addAdListeners()}get inAdBreak(){return this.E3t}addAdListeners(){var t,i;null==(t=this.ta.Vc)||t.yn("Mrt",this.xd),null==(i=this.ta.Vc)||i.yn("brt",this.Cd)}removeAdListeners(){var t,i;null==(t=this.ta.Vc)||t.fn("Mrt",this.xd),null==(i=this.ta.Vc)||i.fn("brt",this.Cd)}constructor(t){this.q8=void 0,this.E3t=!1,this.xd=t=>{1!==this.ta.$E&&(this.q8=this.ta.$E,this.ta.$E=1),this.E3t=!0},this.Cd=t=>{this.E3t=!1,void 0!==this.q8&&(this.ta.$E=this.q8,this.q8=void 0)},this.ta=t,this.addAdListeners()}},R2=class extends o2{Ynt(){return this.k3t}get L3t(){return this.x3t}Ok(){this.W2t.Ok(),this.k3t.Ok()}Pk(){void 0===this.dV?(void 0!==this.C3t&&this.j3t(this.C3t),super.Pk()):this.yo(new cl(this.dV))}async ka(t,i){yi(i);let e=t;if(e)for(const t of this.O3t)e=await t.ka(e,i);if(await super.ka(e,i),yi(i),null==e?void 0:e.ads){const t=Boolean(e.blockContentIfAdError);this.k3t.k4t(e.playAdsAfterTime);for(const i of e.ads)this.k3t.I9(i,Jz.urt,t)}}async zk(){this.dV=void 0,this.ZG=void 0,await this.k3t.tr(),this.R2t(),await super.zk();for(const t of this.O3t)await t.D3t()}j3t(t){this.R3t=this.ta.$E;const i=this.ta.Nk,e=this.ta.WE;t.Dk(i),t.HE(e),this.x3t=t,this.C3t=void 0,this.zz(t)}D4t(t){void 0===this.x3t&&(this.C3t=t)}R2t(){this.C3t=void 0,void 0!==this.x3t&&(this.W2t.$E=this.R3t,this.W2t.Nk=this.Nk,this.W2t.WE=this.WE,this.zz(this.W2t),this.x3t=void 0)}PE(){var t;return null!=(t=this.ZG)?t:super.PE()}BE(){var t;return null!=(t=this.dV)?t:super.BE()}eG(t){void 0===this.BE()&&(this.dV=t,this.ZG=Au(t),this.yo(new cl(t)))}Gk(t){return void 0===this.x3t&&this.k3t.p4t(t)}_rt(t,i){try{const e=new j2(t,this);e.Zj=i(e.ga),this.k3t.wrt(e),this.O3t.push(e),t!==Si.UPLYNK&&(this.P3t=new O2(this))}catch(i){this.k3t.yo(new hc(Nr.GENERAL,'Error while constructing ad integration "'+t+'": '+i+'"'))}}nk(t){var i;(null==(i=this.P3t)?void 0:i.inAdBreak)||super.nk(t)}async gn(){var t;for(const t of this.O3t)await t.gn().catch(Bn);await this.k3t.gn(),this.R2t(),null==(t=this.P3t)||t.destroy(),this.P3t=void 0,await super.gn()}constructor(t,i){super(t),this.O3t=[],this.dV=void 0,this.ZG=void 0,this.R3t=1,this.W2t=t,this.k3t=new g2(this),this.k3t.M4t.o4t(i,t,this,t.md)}};jr((t=>new R2(t,mk.Ld)),Hn.qnt),r(),r(),r(),Uc(),Qi();var P2=0!==Ro.Jf?Ro.Jf:Ro.nf,z2=Ro.Ka&&P2<12,B2=class extends Xt{get LE(){return this.xE()}set LE(t){this.CE(t)}Cnt(){return this.ta.Cnt()}get ct(){return this._d()}get UE(){return this.Rz}get _k(){return this.vk()}get Ek(){return this.mV}get v4t(){return this.z3t}get ht(){return this.Oz}get N4t(){return this.E4t.L3t===this}SE(){return Mo.PP().ks()}DE(){}EE(t){}ek(){return 1}nk(t){}hk(){return new Mo([0,this.LE]).ks()}pk(){return!1}Ak(){return this.Ul}Mk(){return this.Pz}cs(){return this.Ck().cs}Ck(){return this.Zo}Sa(){}async gn(){this.Bo(),this.Oz.gn(),this.Pz.gn(),this.Ul.gn(),this.z3t.gn(),this.ta.fn(Zi.Gy,this.Ds)}B3t(){z2&&this.U3t(),this.N4t||this.E4t.j3t(this)}R2t(){this.N4t&&(z2&&this.Q3t(),Ro.Sg&&this.we.querySelectorAll("video[src]").forEach((t=>{t.src=""})),Fe.Ys.Op&&this.ta.Yk(),this.E4t.R2t())}U3t(){this.F3t||(gi.addEventListener("blur",this.Y3t),gi.addEventListener("focus",this.V3t),this.F3t=!0)}Q3t(){gi.removeEventListener("blur",this.Y3t),gi.removeEventListener("focus",this.V3t),this.F3t=!1}G3t(){requestAnimationFrame((()=>this.ta.be()))}constructor(t,i){super(t,!0),this.E4t=i,this.F3t=!1,this.Pz=new kt,this.Oz=new kt,this.Ul=new Uu,this.Rz=new jM,this.z3t=new Yt,this.Zo=new ut,this.mV=new Qu,this.Y3t=()=>{this.ta.ge()},this.V3t=()=>{this.G3t()},this.ta.yn(Zi.Gy,this.Ds)}};r(),r(),Qi();var U2=0,Q2="theoplayer-wrapper",F2=class t{get W3t(){return this.Z3t}get H3t(){return this.X3t}get q3t(){return 1===this.X3t.length&&F0(this.X3t[0].sources.type)}get K3t(){return this.J3t}$3t(t){const i=this.t5t===t.timeOffset;return!this.i5t&&i}get e5t(){return this.s5t}get n5t(){return W0(this.r5t)&&!this.i5t}get t5t(){return this.r5t}get sd(){return this.o5t}h5t(){if(j(this.o5t)){let t=this.t5t;if(void 0===t)return void(this.o5t=0);if("string"==typeof t&&W0(t)){const i=this.ta._d();j(i)||i===1/0||(t=Q$(t)*i)}j(t)||(this.o5t=t)}}get a5t(){return this.u5t}set a5t(t){this.u5t=t}get c5t(){return this.l5t}set c5t(t){this.l5t=t,this.d5t=!1}get f5t(){return this.g5t}_5t(t){this.g5t.push(t)}v5t(){if(!this.i5t){let t,i,e=this.Z3t===Jz.urt&&void 0===this.w5t&&1===this.X3t.length;const s=this.X3t[0];if(!e&&1===this.X3t.length){const t=Fe.Ah(s.sources.src).searchParams.get("output");t&&t.toLowerCase().indexOf("vmap")>-1&&(e=!0,void 0!==this.w5t&&Bi("Do not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included."))}if(F0(s.sources.type)||e)t=s.sources.src;else{if(j(this.ta._d())&&"end"===this.m5t())return;i=this.p5t()}let n=this.ta._d();(j(n)||n===1/0)&&(n=-3),this.i5t={A5t:this.ta.we.offsetWidth,y5t:this.ta.we.offsetHeight,b5t:this.ta.we.offsetWidth,M5t:this.ta.we.offsetHeight,T5t:this.Snt,S5t:this.xG,N5t:t,I5t:i,D5t:s.omidAccessModeRules,E5t:n}}return this.i5t}p5t(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.X3t.map(((t,i)=>this.k5t(t.sources,i))).join("\n")+"</vmap:VMAP>"}k5t(t,i){const e=this.m5t(),s=t.src;return'<vmap:AdBreak timeOffset="'+e+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.zL+"-"+i+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+Q2+"-"+this.zL+"-"+i+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}m5t(){if(0===this.t5t)return"start";if(this.t5t===1/0)return"end";const t=this.t5t;if("string"==typeof t&&W0(t)){const i=Q$(t)*this.ta._d();return Xc.gJt(i)}return Xc.gJt(this.t5t||0)}L5t(t){this.X3t.push(t)}x5t(t){const i=Q2+"-"+this.zL+"-";for(const e of t)if(I(e,i)){const t=Number(e.slice(i.length));if(!j(t)&&t>=0&&t<this.X3t.length)return t}return-1}static C5t(t){if(void 0!==t)return-1===t?1/0:t}j5t(){this.s5t=!0}get Xz(){return this.Snt}set Xz(t){this.Snt=t}get WE(){return this.xG}set WE(t){this.xG=t}constructor(i,e,s,n){this.Z3t=e,this.ta=s,this.J3t=n,this.o5t=NaN,this.u5t=!1,this.l5t=!1,this.s5t=!1,this.g5t=[],this.Snt=!1,this.xG=!1,this.X3t=[],this.zL=++U2,this.w5t=i.timeOffset,this.r5t=t.C5t(this.w5t),this.h5t(),this.X3t.push(i)}};r();var Y2=class{get O5t(){return this.R5t.O5t}get P5t(){return this.R5t.P5t}get frt(){return this.R5t.frt}get t(){return this.R5t.t}k4t(t){this.z5t=t}B5t(t){return!(this.O5t&&!this.O5t.e5t&&"nonlinear"!==this.P5t.Z4t)||this.O5t.sd>t.sd&&this.O5t.sd!==t.sd}U5t(t){if(t.length)return t.sort(((t,i)=>t.sd-i.sd))[0]}Q5t(){if(this.frt.length)return this.U5t(this.F5t(this.t.xE()))}Y5t(){if(!(void 0!==this.z5t&&this.z5t>=0))return this.frt.filter((t=>!t.a5t&&0===t.sd&&t!==this.O5t))[0]}F5t(t){if(!this.V5t&&(this.V5t=!this.frt.some((t=>j(t.sd))),!this.V5t))return[];const i=this.frt.filter((i=>!i.a5t&&(i.q3t||!j(i.sd)&&t<=i.sd)));return void 0===this.z5t?i:i.filter((t=>t.q3t||void 0===t.t5t||t.sd>this.z5t))}constructor(t){this.V5t=!1,this.R5t=t,this.z5t=void 0}};Qi();var V2=function(t){return t[t.G5t=0]="G5t",t[t.W5t=1]="W5t",t[t.Z5t=2]="Z5t",t}({}),G2=class{Ok(){this.do=!0,this.H5t&&this.X5t()}q5t(t,i){this.K5t(t,i);const e=dl(this.frt,(i=>i.$3t(t)));if(e)e.L5t(t);else{var s;const e=new F2(t,i,this.ta,null==(s=t.replaceContent)||s);this.U4t.push(e),2===this.J5t&&this.$5t.w3t(e.sd,e,e.t5t),this.t6t(i,e)}}get P5t(){return this.i6t}get frt(){return this.U4t}get t(){return this.ta}get $Gt(){return Boolean(this.Ept)}get J5t(){return this.e6t}s6t(){if(ra(this.frt,this.O5t),this.O5t){for(const t of this.O5t.f5t)this.$5t.n6t();this.O5t=void 0}}r6t(){for(const t of this.U4t)for(const i of t.f5t)this.$5t.o6t(i,!0);nt(this.U4t)}async h6t(t){this.s6t(),this.a6t=!0,this.O5t=t,this.u6t=t.sd,this.Ept=this.c6t(t),await this.Ept,this.Ept=void 0}async c6t(t){this.l6t(t);const i=t.v5t();if(!i)return this.a6t=!1,void(this.O5t=void 0);const e=this.i6t.d6t(i);t.a5t=!0;try{await e,t.W3t===Jz.art&&this.i6t.f6t()}catch(t){0,this.O5t=void 0,await this.X5t()}}l6t(t){this.do?t.Xz=!0:t.Xz=this.E4t.Xz,t.WE=this.E4t.WE}g6t(){var t;return null!=(t=this._6t.Y5t())?t:this._6t.Q5t()}async X5t(){if(this.O5t&&!this.O5t.e5t)return this.Ept;const t=this.g6t();t&&await this.h6t(t)}get O5t(){return this.v6t}set O5t(t){this.v6t=t}get a6t(){return this.w6t}set a6t(t){this.w6t=t}tr(){this.s6t(),nt(this.U4t),this.u6t=0,this.O5t=void 0,this.Ept=void 0,this.a6t=!1}c5t(){this.a6t=!1,this.O5t&&(this.O5t.c5t=!0)}async t6t(t,i){t===Jz.art&&this.do&&this._6t.B5t(i)&&!this.$Gt&&"linear"!==this.i6t.Z4t&&(!this.O5t||this.O5t&&this.O5t.a5t)&&(await Promise.resolve(),await this.h6t(i))}j5t(){this.O5t&&this.O5t.j5t()}get m6t(){if(this.$Gt||this.a6t)return!1;if(this.O5t&&!this.O5t.e5t)return!1;return!!this.U4t.filter((t=>this.O5t!==t)).length&&Boolean(this.g6t())}async p6t(){if(!this.m6t)return void 0;const t=this.g6t();t&&await this.h6t(t)}K5t(t,i){const e=t.sources.type,s=i===Jz.urt&&void 0===t.timeOffset,n=F0(e)||s?1:2;n!==this.e6t&&(this.e6t=n,this.r6t(),this.i6t.i0t&&!this.$Gt&&"linear"!==this.i6t.Z4t&&(this.i6t.i0t.wy(),this.O5t=void 0,this.Ept=void 0),this.u6t=0,this.H5t=!0)}k4t(t){this._6t.k4t(t)}gn(){this.ta.fn(Zi.Zy,this.pZ)}constructor(t,i,e,s,n){this.e6t=0,this.Ept=void 0,this.w6t=!1,this.pZ=()=>{const t=this.U4t.filter((t=>t.n5t));for(const i of t){i.h5t();const t=i.t5t;this.$5t.A6t(t,i.sd)}this.do&&this.m6t&&this.X5t()},this.U4t=[],this.i6t=t,this.do=!1,this.H5t=!1,this.ta=i,this.E4t=e,this.O5t=void 0,this.u6t=0,this._6t=new Y2(this),this.Int=s,this.$5t=n,this.ta.yn(Zi.Zy,this.pZ)}};r(),r();var Da=function(t){return t.y6t="contentResumeRequested",t.b6t="contentPauseRequested",t.M6t="click",t.Zy="durationChange",t.T6t="expandedChanged",t.S6t="start",t.N6t="impression",t.iW="pause",t.I6t="resume",t.D6t="adProgress",t.E6t="adBuffering",t.k6t="firstQuartile",t.tKt="midpoint",t.L6t="thirdQuartile",t.iKt="complete",t.x6t="userClose",t.C6t="linearChanged",t.j6t="loaded",t.O6t="adCanPlay",t.R6t="adMetadata",t.P6t="adBreakReady",t.z6t="interaction",t.B6t="allAdsCompleted",t.U6t="skip",t.Q6t="skippableStateChanged",t.F6t="log",t.Y6t="viewableImpression",t.V6t="volumeChange",t.G6t="mute",t}({});r();var W2=function(t){return t.W6t="adError",t}({});r();var Z2=function(t){return t[t.Z6t=-1]="Z6t",t[t.H6t=-1]="H6t",t[t.X6t=-1]="X6t",t[t.q6t=101]="q6t",t[t.K6t=102]="K6t",t[t.J6t=200]="J6t",t[t.$6t=201]="$6t",t[t.t9t=202]="t9t",t[t.i9t=300]="i9t",t[t.e9t=301]="e9t",t[t.s9t=302]="s9t",t[t.n9t=303]="n9t",t[t.r9t=400]="r9t",t[t.o9t=402]="o9t",t[t.h9t=403]="h9t",t[t.a9t=405]="a9t",t[t.u9t=500]="u9t",t[t.c9t=501]="c9t",t[t.l9t=-1]="l9t",t[t.d9t=503]="d9t",t[t.f9t=602]="f9t",t[t.g9t=900]="g9t",t[t._9t=901]="_9t",t[t.v9t=1005]="v9t",t[t.w9t=1007]="w9t",t[t.m9t=1009]="m9t",t[t.p9t=1010]="p9t",t[t.A9t=1011]="A9t",t[t.y9t=1012]="y9t",t[t.b9t=1013]="b9t",t[t.M9t=1020]="M9t",t[t.T9t=1021]="T9t",t[t.S9t=1101]="S9t",t[t.N9t=1204]="N9t",t[t.I9t=1205]="I9t",t[t.D9t=1300]="D9t",t[t.E9t=-1]="E9t",t[t.k9t=-1]="k9t",t[t.L9t=-1]="L9t",t[t.x9t=-1]="x9t",t}({}),H2=function(t){return t.C9t="adLoadError",t.j9t="adPlayError",t}({});function X2(t,i){if(t===Da.D6t){const t=i;return{O9t:t.adBreakDuration,R9t:t.adPosition,LE:t.currentTime,ct:t.duration,P9t:t.totalAds}}return i}function q2(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return H2.C9t;case google.ima.AdError.Type.AD_PLAY:return H2.j9t}}function K2(t){return Z(t)&&Rd(t.getVastErrorCode)}function J2(t){const i=t.getInnerError(),e=i&&K2(i)?J2(i):void 0;return{Pb:t.getMessage(),xKt:t.getErrorCode(),z9t:t.getVastErrorCode(),YA:q2(t.getType()),B9t:e}}function $2(t){if($t(t))return t}Qi(),r(),r();var t4=class extends tu{U9t(t){this.i6t.yo(t)}Q9t(t){this.e0t=t,this.e0t.yn(W2.W6t,this.F9t),this.e0t.yn(Da.b6t,this.Y9t),this.e0t.yn(Da.y6t,this.V9t),this.e0t.yn(Da.B6t,this.G9t),this.e0t.yn(Da.S6t,this.W9t),this.e0t.yn(Da.iKt,this.Z9t),this.e0t.yn(Da.U6t,this.H9t),this.e0t.yn(Da.x6t,this.X9t),this.e0t.yn(Da.M6t,this.q9t),this.e0t.yn(Da.O6t,this.K9t),this.e0t.yn(Da.iW,(()=>{this.i6t.KE||(this.i6t.J9t(!0),this.i6t.yo(new Se(this.i6t.LE))),this.$9t(!0)})),this.e0t.yn(Da.I6t,(()=>{this.i6t.KE&&(this.i6t.J9t(!1),this.i6t.yo(new fi(this.i6t.LE)))})),this.e0t.yn(Da.G6t,(()=>{const i=t.Ik();i>=0&&this.t8t(i)})),this.e0t.yn(Da.V6t,(()=>{const i=t.Ik();i>=0&&this.t8t(i)})),this.e0t.yn(Da.R6t,(t=>{this.e8t.i8t(t.type)})),this.e0t.yn(Da.Zy,(t=>{t.Art&&this.s8t(t.Art.ct)})),this.e0t.yn(Da.F6t,(async t=>{const i=t.n8t.adError,e=K2(i)?J2(i):void 0;e&&(this.r8t(e)?await this.o8t(t):this.h8t(e)?await this.a8t(e):this.u8t(e)&&this.c8t(e))})),this.e0t.yn(Da.j6t,(t=>{if(t.Art&&(this.i6t.c5t(),this.e8t.l8t(t.Art),this.d8t=0,t.Art.f8t)){var i;const t=this.i6t.fk,e=Fn.Nz;this.i6t.H5(e);const s=this.i6t.LE,n=this.i6t.fk;n!==t&&this.U9t(new Xe(s,n)),null==(i=this.e0t)||i.Dk(this.i6t.g8t()),this.U9t(new yu(s,e))}})),this.e0t.yn([Da.E6t,Da.N6t,Da.k6t,Da.tKt,Da.L6t],(t=>{t.Art&&this.e8t._8t(t.Art,t.type,this.i6t.LE)})),this.e0t.yn(Da.k6t,this.v8t),this.e0t.yn(Da.D6t,this.w8t)}async switchToPlayerIfNoNextAd(){if(this.e0t){const t=this.e0t.m8t();t&&this.p8t(t)||(this.i6t.m6t()?await this.i6t.p6t():(this.i6t.A8t(),this.ta.KE&&!this.ta.OE&&this.ta.Pk()))}else if(this.i6t.m6t())await this.i6t.p6t();else{const t=this.i6t.KE;this.i6t.A8t(),t||this.ta.Pk()}}p8t(t){const i=t.y8t,e=null==i?void 0:i.P9t;return(null==i?void 0:i.R9t)!==e}fA(){this.i6t.Mc&&(m(this.i6t.Mc),this.i6t.Mc=null)}u8t(t){return t.YA===H2.C9t}h8t(t){return t.YA===H2.j9t}r8t(t){return t.xKt===Z2.m9t}async a8t(t){var i;this.c8t(t);const e=[Z2.r9t,Z2._9t,Z2.T9t,Z2.I9t];var s;this.i6t.krt||Qa(e,t.xKt)||Qa(e,null==(i=t.B9t)?void 0:i.xKt)||(this.i6t.b8t.a6t=!1,null==(s=this.i6t.b8t.O5t)||s.j5t(),await this.switchToPlayerIfNoNextAd())}c8t(t){this.i6t.y3t(t)}async M8t(){this.e8t.n6t(),this.i6t.j5t(),"nonlinear"===this.i6t.Z4t&&(this.e8t.T8t(-1,!1),this.i6t.S8t(void 0)),"nonlinear"!==this.i6t.Z4t&&"none"!==this.i6t.Z4t||this.i6t.m6t()&&await this.i6t.p6t(),this.i6t.N8t(),this.i6t.N4t?this.i6t.R2t():this.I8t()&&this.ta.yo(new fa(this.ta.xE()))}I8t(){return this.i6t.D8t&&!this.i6t.E8t&&this.ta.OE}setCountdownTimer(){this.fA(),this.i6t.Mc=v((()=>this.$9t()),250)}async o8t(t){void 0!==t.Art&&(this.i6t.b8t.a6t=!1,this.i6t.j5t(),this.i6t.m6t()?await this.i6t.p6t():this.i6t.J9t(!0))}s8t(t){this.i6t.ct!==t&&t>=0&&(this.i6t.T5(t),this.U9t(new yt(this.i6t.ct)))}t8t(t){this.i6t.g8t()!==t&&(0===t?this.i6t.k8t(t,!0,!1):this.i6t.k8t(t,!1,!1))}async L8t(){this.i6t.x8t&&void 0!==this.ta.PE()&&(this.C8t=new Wt,await Vh(this.ta.ka(this.ta.Ya(),this.C8t.ly),this.C8t),this.j8t&&this.ta.CE(this.j8t),this.j8t=void 0)}$9t(t){if(this.e0t){const t=this.e0t.O8t();t>this.i6t.ct&&this.s8t(x.round(t))}const i=this.i6t.LE;(t||!this.i6t.KE&&i!==this.i6t.R8t)&&(this.i6t.yo(new A(i,void 0)),this.i6t.R8t=i)}tr(){this.C8t&&(this.C8t.Ty(),this.C8t=void 0),this.P8t=!1,this.d8t=0}gn(){this.tr(),this.Bo()}constructor(t,i,e){super(),this.i6t=t,this.ta=i,this.e8t=e,this.P8t=!1,this.C8t=void 0,this.j8t=void 0,this.d8t=0,this.v8t=t=>{if(!t.Art||!t.Art.y8t)return;const i=t.Art.y8t;this.e8t.m3t(i.lzt,i.P9t,i.$$t)},this.w8t=t=>{var i,e,s;if(this.d8t>=5)return;this.d8t++;const n=t.n8t;if(!function(t){return Z(t)&&void 0!==t.O9t&&void 0!==t.P9t}(n))return;const r=null==(s=this.e0t)||null==(e=s.m8t())||null==(i=e.y8t)?void 0:i.lzt;void 0!==r&&this.e8t.m3t(r,n.P9t,n.O9t)},this.F9t=async t=>{t.n8t.z8t&&await this.a8t(t.n8t.z8t)},this.G9t=async()=>{this.P8t=!0,this.i6t.j5t(),await this.V9t()},this.W9t=t=>{if(!t.Art)return;const i=t.Art;this.i6t.S8t(i),this.i6t.ge(),this.i6t.B8t(),this.i6t.U8t=!0,this.e8t.Q8t(i);const e=i.ct;if(this.s8t(e),i.f8t){const t=this.i6t.LE,i=this.i6t.fk;this.i6t.H5(Fn.Dz),this.U9t(new Cu(t,i)),this.U9t(new vS(t,i)),this.U9t(new Eu(t,i)),this.i6t.KE||this.U9t(new te(this.i6t.LE)),this.setCountdownTimer(),this.$9t(!0)}else this.i6t.R2t(),this.ta.ge(),this.i6t.KE||this.ta.Pk()},this.Z9t=t=>{var i;if(!t.Art)return;const e=t.Art;if(this.fA(),this.e8t.T8t(this.i6t.ct,e.f8t),this.i6t.fk!==Fn.Nz){const t=Fn.Nz;this.i6t.H5(t);const i=this.i6t.LE;this.U9t(new Xe(i,t))}this.s8t(NaN),this.i6t.U8t=!1,null==(i=this.e0t)||i.Dk(this.i6t.g8t())},this.H9t=t=>{t.Art&&(this.Z9t(t),this.e8t.H9t(t.Art,this.i6t.LE,this.i6t.ct))},this.X9t=t=>{t.Art&&(this.e8t.T8t(-1,t.Art.f8t),this.i6t.j5t(),!t.Art.f8t&&this.i6t.m6t()&&this.i6t.p6t())},this.q9t=t=>{t.Art&&(t.Art.f8t?this.i6t.Rk():this.ta.Rk())},this.K9t=()=>{var t;(this.i6t.U8t=!0,this.i6t.F8t)&&(null==(t=this.e0t)||t.Rk(),this.i6t.F8t=!1)},this.Y9t=t=>{var i;if(!t.Art)return;this.i6t.x8t&&(this.j8t=this.ta.xE(),this.ta.Fk(),this.ta.xk=!0),this.i6t.Y8t=!0;const e=t.Art;this.e8t.xd(e);const s=e.ct;this.i6t.S8t(e),this.s8t(s),this.i6t.J9t(!1),this.i6t.ge(),this.i6t.B3t(),this.i6t.x8t||this.ta.be(),this.ta.Rk(),this.i6t.V8t(e);0===(null==(i=e.y8t)?void 0:i.lzt)||this.i6t.yo(new sD(this.i6t.LE))},this.V9t=async t=>{const i=null==t?void 0:t.Art;this.i6t.Y8t=!1,"linear"===this.i6t.Z4t&&this.e8t.Cd(),i&&i.ct>=0&&this.s8t(i.ct),this.ta._d()===1/0&&this.i6t.G8t(),this.i6t.U8t=!1,this.P8t&&await this.M8t(),this.i6t.J9t(!0);try{await this.L8t()}catch(t){return void(Tu(t)||this.yo(new FJ(t)))}if(this.i6t.R2t(),this.i6t.be(),this.ta.OE||this.ta.Pk(),i&&this.i6t.S8t(i),this.i6t.D8t){if(this.i6t.x8t){var e;const t=this.ta.jk(),i=null==(e=this.ta.bt)?void 0:e.src;t&&i&&(t.src=i)}this.i6t.E8t=!0}this.ta.xk=!1,this.i6t.m6t()&&await this.i6t.p6t()}}};r(),r();var i4=class extends _2{get wJt(){return ah.b0t}constructor(t,i,e){super(t),this.W8t=i,this.Z8t=e}};r(),r(),r();var e4=class extends m2{set H8t(t){this.X8t=t}get H8t(){return this.X8t}get wJt(){return ah.Xh}v0t(){var t;return null==(t=this.q8t)?void 0:t.nXt}get K8t(){var t;return null==(t=this.q8t)?void 0:t.HXt}get EXt(){var t;return null==(t=this.q8t)?void 0:t.EXt}get $j(){var t;return null==(t=this.q8t)?void 0:t.$j}get TV(){var t;return null==(t=this.q8t)?void 0:t.TV}get J8t(){var t,i;return null!=(i=null==(t=this.q8t)?void 0:t.J8t)?i:[]}get $8t(){var t,i;return null!=(i=null==(t=this.q8t)?void 0:t.$8t)?i:[]}get t7t(){var t,i;return null!=(i=null==(t=this.q8t)?void 0:t.t7t)?i:[]}ma(){return function(t,i){return fe(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get description(){return i.$j},get apiFramework(){return i.K8t},get creativeId(){return i.EXt},get title(){return i.TV},get wrapperAdIds(){return i.J8t},get wrapperAdSystems(){return i.$8t},get wrapperCreativeIds(){return i.t7t}})}(Or(this),this)}i7t(t){this.q8t=t;const i=s4(t);this.V4t(t.Mqt,t.e7t,t.s7t,t.ct,i,-1)}constructor(t,i){super(t,i),this.X8t=0,this.q8t=void 0}};function s4(t){return t.fXt.map((t=>new p2(t)))}var n4=class extends m2{ma(){return function(t,i){return fe(t,{get adSystem(){return i.v0t()},get apiFramework(){return i.K8t},get bitrate(){return i.n7t},get contentType(){return i.VN},get creativeId(){return i.EXt},get description(){return i.$j},get mediaUrl(){return i.zqt},get title(){return i.TV},get traffickingParameters(){return i.r7t},get traffickingParametersString(){return i.o7t},get wrapperAdIds(){return i.J8t},get wrapperAdSystems(){return i.$8t},get wrapperCreativeIds(){return i.t7t},get universalAdIds(){return i._Xt}})}(Or(this),this)}i7t(t){this.q8t=t,this.V4t(t.Mqt,t.e7t,t.s7t,t.ct,s4(t),t.h7t),this.H4t=t.f8t?la.YKt:la.Y4t}get wJt(){return ah.b0t}v0t(){return this.q8t?r4(this.q8t.nXt):void 0}get K8t(){return this.q8t?r4(this.q8t.HXt):void 0}get n7t(){return this.q8t?this.q8t.a7t:0}get VN(){return this.q8t?r4(this.q8t.VN):void 0}get EXt(){return this.q8t?r4(this.q8t.EXt):void 0}get u7t(){return this.q8t?r4(this.q8t.u7t):void 0}get $j(){var t;return null==(t=this.q8t)?void 0:t.$j}get zqt(){var t;const i=null==(t=this.q8t)?void 0:t.zqt;return $t(i)?i:this.Bqt}set zqt(t){this.Bqt=t}get TV(){var t;return null==(t=this.q8t)?void 0:t.TV}get r7t(){return this.q8t?r4(this.q8t.r7t):void 0}get o7t(){return this.q8t?r4(this.q8t.o7t):void 0}get J8t(){var t,i;return null!=(i=null==(t=this.q8t)?void 0:t.J8t)?i:[]}get $8t(){var t,i;return null!=(i=null==(t=this.q8t)?void 0:t.$8t)?i:[]}get t7t(){var t,i;return null!=(i=null==(t=this.q8t)?void 0:t.t7t)?i:[]}get _Xt(){var t,i;return null!=(i=null==(t=this.q8t)?void 0:t._Xt.map((t=>({adIdRegistry:t.c7t,adIdValue:t.l7t}))))?i:[]}constructor(t){super(t,la.dI),this.q8t=void 0,this.Bqt=void 0}};function r4(t){return null===t?void 0:t}r(),r();var o4=class{get v4t(){return this.e8t.v4t}get d4t(){return this.d7t}get N4t(){return this.e8t.N4t}get drt(){var t;return null!=(t=this.e8t.drt)?t:null}get crt(){const t=this.e8t.f7t;return t?[t]:[]}get frt(){return this.e8t.frt}get grt(){return this.e8t.grt}vrt(t){this.e8t.vrt(t)}ZC(){this.e8t.ZC()}gn(){return Promise.resolve()}constructor(t,i){this.e8t=t,this.d7t=i}},h4=class{get g7t(){return this._7t}get v4t(){return this.z3t}get N4t(){return this.v7t}get f7t(){return this.w0t}get drt(){return this.I0t}get frt(){return Ms(this.D0t,(t=>{if(t.rk)return[];const i=t.Vc;if(t===this.I0t&&void 0!==this.w0t){const t=i.indexOf(this.w0t);if(t>=0)return i.slice(t+1)}return i}))}get grt(){return this.D0t.filter((t=>!t.rk))}constructor(t,i){this.z3t=t,this.D0t=[],this.v7t=!1,this._7t=new o4(this,i)}};r();var a4=class extends rB{ma(){return new u4(this.Art.lrt())}constructor(t){super("w7t",t)}},u4=class extends oB{constructor(t){super("adimpression",t)}};r();var c4=class extends Dc{ma(){return new l4(this.Art.lrt())}constructor(t){super("m7t"),this.Art=t}},l4=class extends Jr{constructor(t){super("adbuffering"),this.ad=t}};r();var d4=class extends Dc{ma(){return new f4}constructor(){super("p7t")}},f4=class extends Jr{constructor(){super("admetadata")}};Qi();var g4=class t extends h4{A7t(t,i){for(let e=0;e<t;e++){const t=new n4(i);i.P4t(t),this.v4t.yo(new Ar(t))}}w3t(t,i,e){let s=t;s===1/0&&(s=-1);const n=new i4(s,e,i);this.D0t.push(n),i._5t(n),this.v4t.yo(new Mr(n))}A6t(t,i){for(const e of this.D0t)j(e.lzt)&&e.W8t===t&&(e.lzt=i,this.v4t.yo(new T2(e)))}o6t(t,i){void 0===i&&(i=!1),i&&ra(this.D0t,t),this.v4t.yo(new Cr(t))}n6t(){if(this.drt){this.o6t(this.drt,!0);const t=Boolean(this.w0t&&this.w0t.Z4t===la.YKt);this.y7t(void 0,t)}}f3t(t,i){const e=i.y8t;if(!e)return;const s=e.R9t-1,n=t.Vc[s];return n.i7t(i),this.v4t.yo(new k1(n)),n.Yl.$$t=e.$$t,n}get N4t(){return this.b7t.N4t}M7t(t){if(!Qa(this.T7t,t)){if(t){if(this.w0t===t)return;this.w0t=t;for(const i of this.S7t)this.i8t(i,t,this.b7t.LE)}else{if(!this.w0t)return;const t=new dB(this.w0t,this.w0t.Yl.lzt);this.T7t.push(this.w0t),this.w0t=void 0,this.z3t.yo(t)}nt(this.S7t)}}y7t(t,i){if(t){var e;if((null==(e=this.drt)?void 0:e.lzt)===t.lzt)return;this.I0t=t,i&&this.v4t.yo(new uB(this.I0t))}else{if(!this.I0t)return;const t=new Zu(this.I0t);this.I0t=void 0,nt(this.T7t),i&&this.z3t.yo(t)}}N7t(t){return this.D0t.filter((i=>ce(i.lzt,t,.01)))[0]}static I7t(t,i){if(i.y8t)return t.Vc[i.y8t.R9t-1]}xd(t){if(!t.y8t)return;const i=t.y8t,e=this.N7t(i.lzt);e&&(nt(this.S7t),this.y7t(e,t.f8t))}Cd(){this.drt&&this.v4t.yo(new Zu(this.drt)),nt(this.S7t),this.n6t()}Q8t(i){if(!this.I0t&&i.y8t){const t=this.N7t(i.y8t.lzt);this.y7t(t,i.f8t)}if(this.I0t){const e=t.I7t(this.I0t,i);if(!e)return;this.f3t(this.I0t,i);const s=i.zqt;$t(s)&&!$t(e.zqt)&&(e.zqt=s,this.v4t.yo(new k1(e))),this.M7t(e),this.v4t.yo(new bu(this.w0t,e.Yl.lzt))}else 0}T8t(t,i){if(this.M7t(void 0),!i&&this.drt){const t=this.drt;this.y7t(void 0,!1),this.o6t(t)}}l8t(t){const i=t.y8t;if(!i)return;const e=this.N7t(i.lzt);if(!e)return;this.m3t(i.lzt,i.P9t,i.$$t);const s=this.f3t(e,t);s&&this.v4t.yo(new x1(s))}m3t(t,i,e){const s=this.N7t(t);if(!s)return;const n=s.Vc.length;if(i>n){const t=i-n;this.A7t(t,s),s.$$t=e,this.v4t.yo(new T2(s))}}H9t(i,e,s){if(!this.I0t)return;const n=t.I7t(this.I0t,i);if(n){const t=e/s;this.v4t.yo(new Kr(n,t))}}_8t(i,e,s){if(!this.I0t)return;let n=this.w0t;if(!n){const s=t.I7t(this.I0t,i);if(!s||Qa(this.T7t,s))return void this.S7t.push(e);n=s,this.f3t(this.I0t,i),this.M7t(n)}this.i8t(e,n,s)}i8t(t,i,e){t===Da.R6t?this.v4t.yo(new d4):t===Da.N6t&&i?this.v4t.yo(new a4(i)):t===Da.E6t&&i?this.v4t.yo(new c4(i)):t===Da.k6t&&i&&e?this.v4t.yo(new D2(i,e)):t===Da.tKt&&i&&e?this.v4t.yo(new k2(i,e)):t===Da.L6t&&i&&e&&this.v4t.yo(new x2(i,e))}ZC(){this.b7t.ZC()}vrt(t){this.b7t.vrt(t)}tr(){const t=Boolean(this.w0t&&this.w0t.Z4t===la.YKt);this.M7t(void 0),this.y7t(void 0,t);for(const t of this.D0t)this.o6t(t);nt(this.D0t),nt(this.S7t),nt(this.T7t)}gn(){this.tr()}constructor(t,i){super(t,ah.b0t),this.b7t=i,this.S7t=[],this.T7t=[]}};function _4(t){const i=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const i=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case HT.ENABLED:return i.ENABLED;case HT.INSECURE:return i.INSECURE;case HT.DISABLED:default:return i.DISABLED}}(t.ads.vpaidMode)),i.setPlayerVersion("8.14.0"),i.setPlayerType("THEOplayer"),i.setAutoPlayAdBreaks(!0),i.setDisableCustomPlaybackForIOS10Plus(!v4(t));const e=function(t){var i,e,s;const n=null==(e=t.ads)||null==(i=e.googleIma)?void 0:i.language;if(void 0!==n)return n;const r=null==(s=t.ui)?void 0:s.language;if(Ic(r))return r;return}(t);e&&i.setLocale(e)}function v4(t){return Ro.Ka&&t.allowNativeFullscreen}r(),Uc();var w4=class t extends B2{get g4t(){return this.$5t.g7t}get D7t(){return this.$5t}get b8t(){return this.R5t}get x8t(){return v4(this.FJ)}E7t(t,i,e){i===Jz.urt&&void 0!==e&&(this.I4t=e),this.R5t.q5t(t,i)}static get d4t(){return ah.b0t}get d4t(){return t.d4t}get k7t(){return this.FJ.ads.preload===qT.MIDROLL_AND_POSTROLL}vrt(t){const i=this.L7t();for(const e of i)F$(e.sources,e.timeOffset)||t.I9(e,Jz.art,!1)}L7t(){const t=[],{crt:i,frt:e}=this.g4t,s=[];for(const n of i.concat(e)){const i=n.Yl.Z8t;if(Qa(s,i.zL))continue;const e=i.x5t(n.J8t);e>=0?t.push(...i.H3t.slice(e)):t.push(...i.H3t),s.push(i.zL)}for(const i of this.R5t.frt)i.a5t||t.push(...i.H3t);return ow(t)}set Z4t(t){this.H4t=t}get Z4t(){return this.H4t}get i0t(){return this.e0t}set i0t(t){this.e0t=t,this.x7t=!1}xE(){if(!this.i0t)return 0;const t=this.i0t.O8t();return j(this.ct)||t<0?0:this.ct-t}CE(t,i){}_d(){return this.JM||NaN}T5(t){this.JM=t}ZE(){return this.ta.WE}HE(t){this.k8t(this.Nk,t,!0)}JE(){return this.CG}J9t(t){this.CG=t}get U8t(){return this.C7t}set U8t(t){this.C7t=t}get krt(){return this.I4t}get D8t(){return this.j7t}get F8t(){return this.O7t}set F8t(t){this.O7t=t}get E8t(){return this.R7t}set E8t(t){this.R7t=t}bk(){var t,i,e;return null!=(e=null==(i=this.i0t)||null==(t=i.m8t())?void 0:t.s7t)?e:0}Sk(){var t,i,e;return null!=(e=null==(i=this.i0t)||null==(t=i.m8t())?void 0:t.e7t)?e:0}bE(){return[]}k4t(t){this.z5t=t,this.R5t.k4t(t)}f6t(){!this.x7t&&this.i0t&&(this.i0t.Cn(),this.x7t=!0)}S8t(t){this.Z4t=t?t.f8t?"linear":"nonlinear":"none"}vk(){return Mo.PP().ks()}Ik(){return this.ta.Nk}Dk(t){this.k8t(t,this.WE,!0)}g8t(){return this.ta.WE?0:this.ta.Nk}k8t(t,i,e){const s=this.ta.Nk!==t||this.ta.WE!==i;s&&(this.ta.Nk=t,this.ta.WE=i),this.i0t&&e&&this.i0t.Dk(this.g8t()),s&&this.yo(new $e(this.LE,this.Nk))}RE(){return!1}PE(){if(this.P7t&&this.I4t)return this.P7t}BE(){if(this.z7t&&this.I4t)return this.z7t}gk(){return this.Z5}H5(t){this.Z5=t,this.yo(new cu(this.LE,t))}get Y8t(){return this.B7t}set Y8t(t){this.B7t=t}Ok(){this.ta.fn(Zi.so,this.U7t),this.do||(this.do=!0,this.R5t.Ok(),this.B8t())}async Pk(){if(this.Q7t)return;this.F7t.Ty(),this.F7t=new Wt;const t=this.KE;this.J9t(!1),this.yo(new fi(this.LE)),this.Y7t()||(this.x8t||this.ta.be(),this.yo(new sD(this.LE))),this.U8t||(this.F8t=!1);const i=Boolean(this.i0t);this.Q7t=this.R5t.X5t();try{await this.Q7t}finally{this.Q7t=void 0}try{yi(this.F7t.ly)}catch(t){return}if(this.do||this.U7t(),!this.P7t||!this.I4t)if(this.i0t){if(t)if(i)try{yi(this.F7t.ly),this.i0t.V7t(),this.yo(new te(this.LE))}catch(t){return}else this.f6t()}else this.I4t||(this.R2t(),this.E4t.Pk())}Rk(){var t;this.KE||(this.J9t(!0),this.yo(new Se(this.LE))),this.F7t.Ty(),this.U8t?null==(t=this.i0t)||t.Rk():this.F8t=!0}ZC(){var t;null==(t=this.i0t)||t.ZC()}N8t(){this.i0t&&(this.W7t.G7t(),this.i0t.zk(),this.i0t.wy(),this.i0t=void 0,this.Z4t="none",this.x7t=!1)}async zk(){var t;this.R8t=0,this.R5t.tr(),this.F7t.Ty(),this.J9t(!0),this.j7t=!1,this.R7t=!1,this.U8t=!1,this.$5t.tr(),this.N8t(),this.A8t(),null==(t=this.Z7t)||t.tr(),this.F8t=!1,this.W7t.wy()}ge(){this.H7t.ge(),this.x8t&&this.ta.ge()}be(){this.H7t.be()}X7t(){return Boolean(this.i0t)&&Qa(this.i0t.q7t(),-1)&&!this.j7t}c5t(){this.R5t.c5t()}m6t(){return this.R5t.m6t}j5t(){this.R5t.j5t()}p6t(){return this.R5t.p6t()}p4t(t){if(this.X7t()){if(t.type===Zi.wb&&this.ta.OE)return!0;if(t.type===Zi.qy)return this.j7t=!0,this.W7t.G7t(),!0}return!1}Y7t(){return Boolean(this.i0t&&this.i0t.m8t())}async d6t(t){try{this.N8t();const i=this.K7t();this.H7t.FK(),this.i0t=await this.W7t.d6t(t,this.Z7t,i),this.J7t(this.i0t)}catch(t){this.$7t.a8t(t)}}J7t(t){if(t.Dk(this.g8t()),this.R5t.J5t===V2.W5t){const i=t.q7t();if(i.length)for(const t of i)this.$5t.w3t(t,this.R5t.O5t);else this.$5t.w3t(this.R5t.O5t.sd,this.R5t.O5t)}this.$7t.tr(),this.$7t.Q9t(t)}jk(){if(this.e0t&&this.x8t&&this.Y7t())return this.ta.jk()}Ck(){return this.x8t&&this.N4t?this.ta.wa:super.Ck()}K7t(){const t=!!(this.R5t.J5t===V2.W5t)&&this.k7t;let i,e;void 0!==this.FJ.ads.googleIma.uiElements?i=this.FJ.ads.googleIma.uiElements:this.FJ.ads.showCountdown||(i=[]),void 0!==this.FJ.ads.allowedMimeTypes&&(e=this.FJ.ads.allowedMimeTypes);return{tti:e,iti:i,eti:t,n7t:this.FJ.ads.googleIma.bitrate,sti:void 0,nti:this.z5t}}B8t(){if(this.e0t){const t=this.K7t();this.e0t.rti(t)}}y3t(t){this.P7t=new P(lt.ADVERTISEMENT_ERROR,t.Pb),this.z7t=new qi(vt.AD_ERROR,"There was a problem playing ads.",this.P7t),this.v4t.yo(hc.A4t(t))}A8t(){this.N4t&&(this.ta.ge(),this.R2t(),this.be())}G8t(){var t;if(this.ta.xE()===1/0||0===this.ta.vk().length)return;(null==(t=this.R5t.O5t)?void 0:t.K3t)&&-1!==this.oti&&(this.ta.CE(this.ta.xE()+this.oti),this.oti=-1)}V8t(t){var i,e;this.oti=null!=(e=null==(i=t.y8t)?void 0:i.$$t)?e:-1}R2t(){super.R2t(),this.ta.ge(),this.x8t&&!this.ta.OE&&this.ta.Pk()}G3t(){this.x8t||super.G3t()}async gn(){this.$7t.fn(Xi.ua,this.hti),await super.gn(),this.N8t(),this.W7t.fn("ati",this.uti),this.W7t.wy(),this.H7t.wy(),this.R5t.gn(),this.$7t.gn()}constructor(t,i,e,s,n,r,o){super(t,i),this.do=!1,this.I4t=!1,this.P7t=void 0,this.z7t=void 0,this.oti=-1,this.H4t="none",this.B7t=!1,this.x7t=!1,this.F7t=new Wt,this.C7t=!1,this.O7t=!1,this.uti=t=>{this.v4t.yo(t)},this.hti=t=>{this.P7t=new P(lt.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.z7t=ju(this.P7t)},this.R8t=NaN,this.U7t=()=>{this.do||this.Ok()},this.FJ=e,this.CG=!0,this.JM=NaN,this.Z5=Fn.Nz,this.j7t=!1,this.R7t=!1,this.$5t=new g4(this.v4t,this),this.$7t=new t4(this,this.ta,this.$5t),this.$7t.yn(Xi.ua,this.hti),this.ta.yn(Zi.so,this.U7t),this.R5t=new G2(this,this.ta,this.E4t,s,this.$5t),this.Z7t=o,this.W7t=r,this.H7t=n,this.be(),this.W7t.yn("ati",this.uti)}};r(),Qi();var m4=class{registerWebImaAdPlayerConstructor(t){this.cti=t}createAdPlayer(t,i,e){return p4()&&this.cti?this.cti(t,i,e):void 0}};function p4(){if(Boolean(gi.google&&gi.google.ima)){return!(1===_.keys(gi.google.ima).length&&gi.google.ima.dai)}return!1}m4.Ld=new m4;var A4=class{get a4t(){return w4.d4t}$G(t){return t&&t.integration===Si.GOOGLE_IMA}u4t(t,i,e){return m4.Ld.createAdPlayer(t,i,e)}I9(t,i,e,s){e.E7t(t,i,s)}fH(t){const i=Y0(t.sources);if(!i)return;const e={integration:Si.GOOGLE_IMA,sources:i,omidAccessModeRules:$2(t.omidAccessModeRules)},s=G0(t.timeOffset);return void 0!==s&&(e.timeOffset=s),e}};mk.Ld.tW(new A4),r(),r(),r(),r();var y4=class extends Dc{ma(){return new b4}constructor(){super("N0t")}},b4=class extends Jr{constructor(){super("adloaded")}};Qi();var M4=-1,T4=class{get s0t(){return this.D0t}get lti(){return this.dti}get ult(){return this.Jp}get fti(){return this.r5t}get gti(){return this._ti}get sd(){if(j(this.vti)){const t=Xc.vJt(this.r5t,this.h0t.t._d());void 0===t||j(t)||(this.vti=t)}return this.vti}wti(){return this.Jp<this.D0t.length}Pc(){let t;return this.Jp<this.D0t.length&&(t=this.D0t[this.Jp],this.Jp++),t}mti(t){t.WKt=this,this.D0t.push(t)}async pti(t){let i=!1;for(const e of this.D0t)try{await e.$n(),i=!0}catch(i){0,ra(this.D0t,e);const s=e.Drt.sources,n="string"==typeof s?s:s.src;t.yo(hc.y4t(i,n))}return this._ti=!0,i}l0t(){this.c0t=!0}u0t(){return this.c0t}Ati(){return this.D0t.some((t=>A1(t).some((t=>t.lXt))))}constructor(t,i){this.D0t=[],this.c0t=!1,this.r5t=t,this.Jp=0,this.h0t=i,this.vti=NaN,this._ti=!1,this.dti=new T1(this,this.h0t)}},S4=class t extends gs{get yti(){let t=0;for(const i of this.bti)i.u0t()||(t+=1);return t}Mti(){this.Sti.Tti()}Cn(){this.Co(),this.Nti.yn("Srt",this.Sti.Iti)}jn(){this.Eo(),this.Nti.fn("Srt",this.Sti.Iti),this._5=this.yB,this.Sti.tr();for(const t of this.bti)t.l0t();nt(this.bti)}Co(){this.Dti||(this.ta.yn(Zi.Eb,this.Eti),this.Dti=!0)}Eo(){this.Dti&&(this.ta.fn(Zi.Eb,this.Eti),this.Dti=!1)}get frt(){return this.bti}kti(){return this.Lti(new A(M4,void 0))}xti(t){return this.Cti(t,0,0).length>0}jti(t,i){let e,s=0;for(const n of this.bti){if(n.u0t())continue;const r=n.sd;r>=t&&r<=i&&r>=s&&!j(r)&&(e=n,s=e.sd)}return e}Oti(t){return this.Lti(new A(t,void 0))}Rti(){if(!this.Pti&&void 0!==this.z5t){this.Pti=!this.bti.some((t=>j(t.sd)));for(const t of this.bti)t.sd!==M4&&t.sd<=this.z5t&&!t.u0t()&&t.l0t()}}zti(t){for(const i of t)i.l0t();this.x3t.Bti(t),0===this.yti&&this.Eo()}Cti(t,i,e){return this.bti.filter((s=>{if(s.u0t())return!1;const n=s.sd;return this.Uti(n,t)||this.Qti(n,t,i,e)}))}Uti(t,i){switch(i){case 0:return 0===t;case M4:return t===M4;default:return!1}}Qti(t,i,e,s){if(t<0)return!1;const n=t-i;return-1!==n&&n<=e&&n>=-s}Fti(i){if(i&&i.length>0){for(const e of i){const i=t.C5t(e.lzt);let s=this.fmt(e);-1===s&&(this.Pti=void 0===this.z5t,this.bti.push(new T4(i,this.Yti)),s=this.bti.length-1);this.bti[s].mti(e)}this.Co()}}static C5t(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}fmt(i){const e=t.C5t(i.lzt);return Kv(this.bti,(i=>e===t.C5t(i.fti)))}Vti(t){ra(this.bti,t)}k4t(t){this.z5t=t,this.Pti=void 0===t}constructor(t,i,e,s){super(),this.Pti=!1,this.Eti=t=>X(this.Lti(t)),this.Lti=async t=>{this.Rti();const i=t.currentTime,e=t.currentTime!==M4?this.jti(this._5,t.currentTime):this.Cti(t.currentTime,0,0)[0];let s,n;const r=this.ta._d()-10;if(n=this.xti(M4)&&x.ceil(i)===x.ceil(r)?this.Cti(M4,10,0).filter((t=>!t.gti)):this.Cti(i,10,0).filter((t=>!t.gti)),n.length){const t=(await Promise.all(n.map((t=>t.pti(this.Nti))))).some((t=>!0===t));t&&this.yo(new y4),(!t||!this.Sti.Gti||n[0].sd<this.Sti.Gti.sd)&&(s=n[0])}e&&(e!==this.Sti.Gti&&(s=e),this.zti([e])),s&&(this.Sti.Iti(),this.Sti.Gti=s,await this.Sti.Tti()),j(this.ta._d())||(this._5=t.currentTime)},this.ta=t,this.x3t=i,this.Yti=new M1(this.x3t,this.ta),this.z5t=void 0,this.Pti=!1,t._d()!==1/0?this.yB=0:this.yB=t.xE(),this._5=this.yB,this.bti=[],this.Nti=e,this.Sti=s,this.Dti=!1}};r(),r(),Qi();var N4=class extends gs{get Wti(){return this.k1t}get v4t(){return this.z3t}Zti(){this.Hti(),this.Xti(),this.dV=void 0}qti(t){this.Kti=this.Kti.concat(t)}Jti(t){this.$ti=this.$ti.concat(t)}Xti(){this.Kti=[]}Hti(){this.$ti=[]}tii(t){for(const i of this.Kti)i.dZ===t&&Xr(i.eventURL)}ge(){this.Wti.style.display=""}be(){this.Wti.style.display="none"}gn(){this.Bo(),this.z3t.Bo(),dn(this.k1t)}constructor(t,i){super(),this.$ti=[],this.Kti=[],this.dV=void 0,this.z3t=new gs,this.eii=t=>{t.stopPropagation(),this.sii()},this.sii=()=>{for(const t of this.$ti)for(const i of t.uqt)Xr(i.uri)},this.k1t=h.createElement("div"),this.k1t.style.display="none",this.nii=t,this.rii=i}};function I4(t,i){let e=i;if(!function(t){return"ui"in t}(t))return e;const s=t.ui.language;let n;if(Ic(s)){const i=t.ui.languages;if(!i)return e;n=i[s]}else n=s;return n&&n[i]&&(e=n[i]),e}r(),r();var D4={[$n.$L]:1,[$n.tx]:2,[$n.ix]:2};function E4(t,i){const e=i?i.map((t=>t.toLowerCase())):i;return qs(t.filter((t=>{const i=t.type.toLowerCase();return!!Zr(e)&&-1!==e.indexOf(i)&&N0(i)})),((t,i)=>D4[t.type]-D4[i.type])).map(k4)}function k4(t){return ct({src:t.contentURL,type:t.type,isAdvertisement:!0})}function L4(t,i){return tQ(x4(t),x4(i))}function x4(t){return{Ti:t.height,ji:t.width}}function C4(t,i,e,s){const n=function(t,i,e,s){let n,r=1/0;const o=t.filter((t=>!N0(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(o.length){for(const t of o){const s=(x.abs(t.width/i-1)+x.abs(t.height/e-1))/2;s<r&&(r=s,n=t)}return n||o.sort(L4)[0]}}(t.xqt,i.width,i.height,e),r=E4(t.xqt,e);if(n){const t=k4(n);t&&r.push(t)}var o;r.length>0&&(t.zqt=null==(o=r[0].src)?void 0:o.trim());return tl({sources:r},s)}Qi();var j4=class extends N4{get oii(){return this.hii}get LE(){return this.aii.LE}get ct(){let t=this.aii.ct;return j(t)&&this.Iqt&&(t=this.Iqt.ct||0),t}get OE(){return this.aii.OE}get WE(){return this.aii.WE}set WE(t){this.aii.WE=t,t?this.tii(dt.Fqt):this.tii(dt.Yqt)}get KE(){return this.aii.KE}get fk(){return this.aii.fk}get Nk(){return this.aii.Nk}set Nk(t){this.aii.Nk=t}get yk(){return this.aii.yk}get Tk(){return this.aii.Tk}get uii(){return this.cii}Pk(){this.aii.KE&&(this.aii.Pk(),this.yo(new fi(this.LE)),this.hii&&this.tii(dt.Vqt),this.hii=!0)}Rk(){this.aii.KE||(this.aii.Rk(),this.yo(new Se(this.LE)),this.tii(dt.wb))}async zk(){var t;null==(t=this.rN)||t.Ty(),this.rN=void 0,this.be(),this.hii=!1,this.lii=!0,this.dii(),this.fii(),await this.gii()}_ii(t){void 0===t&&(t=!0),this.hii=!1,t&&this.tii(dt.iKt),this.be(),this.rii()}vii(){var t;const i=null==(t=this.x3t.Ca)?void 0:t.mi,e=new F1(this.Xu,i);return this.Wti.appendChild(e.we),e.yn("ZC",this.wii),e}mii(){this.Iqt&&this.Iqt.bqt.rqt&&(this.x1t=new P1(this.Wti),this.x1t.G0t=this.Iqt.bqt.rqt,this.x1t.yn("clickstart",this.pii),this.x1t.yn("click",this.sii))}Aii(t,i){for(const e of this.Kti)if(e.dZ===dt.mb){const s=w0(e.tc,i);void 0!==s&&this._5<s&&s<=t&&Xr(e.eventURL)}}async yii(){if(!this.Iqt||!this.bii)return;const t=C4(this.Iqt,this.bii,this.KS.ads.allowedMimeTypes,this.KS);if(!t.sources.length)return await this.aii.tr(),this.nii(""),void this.Iqt.CXt();this.rN=new Wt,this.lii=!0,await Vh(this.aii.ka(t,this.rN.ly),this.rN),this.aii.ge(),this.Iqt.CXt(),this.mii()}async Mii(t,i,e){this.cii=t,this.Iqt=t.lXt,this.aii.yn(Zi.Eb,this.Tii),this.aii.yn(Zi.Zy,this.Sii),this.aii.yn(Zi.kb,this.Nii),this.aii.yn(zT,this.Ds),this.Iqt.mXt&&0!==this.Iqt.mXt.length&&this.qti(this.Iqt.mXt),this.Iqt.bqt&&this.Jti(this.Iqt.bqt),this.dV=i,this.bii=e,0!==this.Iqt.xqt.length&&(this.aii.yn(Xi.ua,this.Iii),await this.yii(),this.aii.yn(Zi.qy,this.Dii),this.aii.yn(Zi.Eb,this.Eii),this.aii.yn(E.oP,this.kii),this.aii.yn(Zi.yb,this.Ds))}$Jt(){this.oii&&this.Lii&&this.wii()}get Lii(){return this.Iqt&&-1!==this.Iqt.Oqt&&this.aii.LE>=this.Iqt.Oqt}xii(){this.tii(dt.TSt),this.cii&&this.v4t.yo(new bu(this.cii,this.LE))}async gii(){this.aii.fn(Xi.ua,this.Iii),this.aii.fn(Zi.qy,this.Dii),this.aii.fn(Zi.Eb,this.Eii),this.aii.fn(E.oP,this.Ds),this.aii.fn(E.oP,this.kii),this.aii.fn(Zi.yb,this.Ds),this.aii.fn(Zi.Eb,this.Tii),this.aii.fn(Zi.Zy,this.Sii),this.aii.fn(Zi.kb,this.Nii),this.aii.fn(zT,this.Ds),this.cii&&(this.cii.l0t(),this.v4t.yo(new dB(this.cii,this.LE))),this.Cii(),this.Zti(),this.dii(),this.fii(),this.cii=void 0,this.Iqt=void 0,this.bii=void 0,await this.aii.tr(),this.aii.be(),this.Wti.style.cursor="",this.jii=0,this._5=-1,this.Oii&&(this.Rii.gii(),this.Oii=!1)}Cii(){this.x1t&&(this.x1t.wy(),this.x1t=void 0)}fii(){this.Pii&&(dn(this.Pii),this.Pii=void 0)}dii(){this.O1t&&(this.O1t.gn(),this.O1t=void 0)}zii(){this.Oii=!0}Bii(){var t;this.Pii||(this.Pii=h.createElement("div"),this.Pii.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.Wti.appendChild(this.Pii));const i=null==(t=this.cii)?void 0:t.Yl;if(!i)return;const e=i.Vc.filter(E1);let s=I4(this.KS,"The content will play in")+" "+x.round(i.t0t)+" "+I4(this.KS,"seconds");if(e.length>1){const t=e.filter((t=>t.u0t())).length;s+=". "+I4(this.KS,"Ad")+" "+(t+1)+"/"+e.length}Ou(this.Pii,s)}constructor(t,i,e,s,n,r,o){super(t,i),this.Rii=e,this.KS=s,this.x3t=n,this.Xu=r,this.aii=o,this.hii=!1,this.jii=0,this._5=-1,this.rN=new Wt,this.lii=!0,this.Dii=()=>{this._ii()},this.kii=()=>{this.rN=void 0,this.hii||(this.xii(),this.hii=!0),this.lii&&(this.lii=!1,this.x3t.Mti()),this.Wti.style.display="block",this.aii.fn(E.oP,this.kii),this.hii=!0},this.Eii=()=>{const t=this.LE,i=this.ct,e=t/i;(0===this.jii&&e>=.25?(this.tii(dt.Jqt),this.jii=1):1===this.jii&&e>=.5?(this.tii(dt.tKt),this.jii=2):2===this.jii&&e>=.75&&(this.tii(dt.$qt),this.jii=3),this.Aii(t,i),this.Bii(),this._5=t,this.Iqt)&&(-1!==this.Iqt.Oqt&&this.Iqt.Oqt<this.Iqt.ct&&(null!=this.O1t||(this.O1t=this.vii()),this.LE<this.Iqt.Oqt?this.O1t.J0t(this.Iqt.Oqt-this.LE):this.O1t.t1t()))},this.Iii=()=>{var t,i;this.rN=void 0,this.aii.fn(Xi.ua,this.Iii),this.lii=!0,null==(t=this.dV)||t.EKt(M0.TKt),this.hii=!1,this.aii.be();const e=(null==(i=this.aii.bt)?void 0:i.src)||"";this.nii(e)},this.Tii=()=>{this.Ds(new A(this.LE,void 0))},this.Sii=()=>{this.Ds(new yt(this.ct))},this.Nii=()=>{this.Ds(new $e(this.LE,this.Nk))},this.pii=()=>{this.x3t.Rk()},this.wii=()=>{this.cii&&(this.tii(dt.Wqt),this.v4t.yo(new Kr(this.cii,this.LE/this.ct)),this._ii(!1))},this.Wti.className="theoplayer-ad-linear",this.Wti.style.zIndex="10",pc(this.Wti),this.aii.be(),this.Oii=!1}};r(),r();var O4=class t extends tu{get we(){return this.Vs}i1t(){this.we.addEventListener("mouseup",this.e1t),this.we.addEventListener("touchend",this.e1t),this.we.addEventListener("mousedown",this.Uii)}$0t(){this.we.removeEventListener("mouseup",this.e1t),this.we.removeEventListener("touchend",this.e1t),this.we.removeEventListener("mousedown",this.Uii)}static cr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}gn(){this.$0t(),dn(this.Vs)}constructor(){super(),this.e1t=t=>{this.yo(new Jr("ZC")),this.Uii(t)},this.Uii=t=>{t.stopPropagation()},this.Vs=t.cr(),this.i1t()}},R4=class extends N4{get Qii(){return this.Fii}get Yii(){return this.lu}Zti(){super.Zti(),this.Wti&&zd(this.Wti)}async Mii(t,i,e){this.m0t&&this.gii(),this.Fii=t,this.m0t=t.dXt,0!==this.m0t.mXt.length&&this.qti(this.m0t.mXt),this.dV=i,0!==this.m0t.vXt.length&&(this.Jti(this.m0t.vXt[0].NXt),this.Wti.addEventListener("error",this.Vii),this.Wti.addEventListener("load",this.Gii),await this.yii(),this.Wii())}$Jt(){var t;if(void 0!==this.Zii)return;const i=null==(t=this.m0t)?void 0:t.vXt[0];i&&i.Yl&&-1!==i.Yl.Oqt&&(this.tii(dt.Wqt),this.v4t.yo(new Kr(this.Fii,0)),this.Hii())}xii(){void 0!==this.Fii&&this.v4t.yo(new bu(this.Fii,this.x3t.LE))}zk(){this.gii(),this.Fii=void 0,this.m0t=void 0}gii(){this.Xii(),void 0!==this.Fii&&(this.Fii.l0t(),this.v4t.yo(new dB(this.Fii,this.x3t.LE))),this.Zti(),this.qii(),void 0!==this.Zii&&(c(this.Zii),this.Zii=void 0)}Xii(){this.Wti.removeEventListener("load",this.Gii),this.Wti.removeEventListener("error",this.Vii)}async yii(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const i=this.m0t.vXt[0],e=h.createElement("a");if(i.NXt.rqt&&(e.href=i.NXt.rqt,e.target="Vu",e.setAttribute("rel","noopener")),i.bXt){const t=i.bXt,s=h.createElement("iframe");s.src=t.mKt,e.appendChild(s)}else if(i.AXt){const t=i.AXt,s=h.createElement("img");s.src=t.mKt,e.appendChild(s)}else if(i.TXt){const t=i.TXt,s=h.createElement("iframe");s.src=t.mKt,e.appendChild(s)}i.CXt(),e.addEventListener("mousedown",this.eii),e.addEventListener("touchend",this.eii),this.Wti.firstChild&&(zd(this.Wti),this.gii()),t.appendChild(e),this.Wti.appendChild(t),this.ge()}Wii(){var t;if(!this.m0t)return;const i=null==(t=this.m0t.vXt[0].Yl)?void 0:t.Oqt;void 0!==i&&-1!==i&&(this.Zii=gi.setTimeout(this.Kii,1e3*i))}qii(){this.lu&&(this.lu.fn("ZC",this.Jii),this.lu.gn()),this.lu=void 0}get $ii(){return this.x3t.tei()}constructor(t,i,e){super(t,i),this.Gii=()=>{this.Xii(),this.tii(dt.oKt),this.rii()},this.Vii=t=>{var i,e;this.Xii(),null==(i=this.dV)||i.EKt(M0.NKt);const s=null==(e=this.m0t)?void 0:e.vXt[0];var n,r;const o=null!=(r=null!=(n=null==s?void 0:s.bXt)?n:null==s?void 0:s.AXt)?r:null==s?void 0:s.TXt;var h;this.nii(null!=(h=null==o?void 0:o.mKt)?h:"")},this.Hii=()=>{this.be(),zd(this.Wti),this.rii(),this.Fii=void 0,this.m0t=void 0},this.Kii=()=>{this.lu||(this.Zii=void 0,this.lu=new O4,this.Wti.children[0].appendChild(this.lu.we),this.lu.yn("ZC",this.Jii))},this.Jii=()=>{this.tii(dt.Wqt),this.$Jt()},this.Wti.className="theoplayer-ad-nonlinear",this.Wti.style.position="absolute",this.Wti.style.width="100%",this.Wti.style.bottom="3em",this.Wti.style.zIndex="10",this.Wti.style.textAlign="center",this.x3t=e}};r(),Qi();var P4=class{static async iei(t,i,e){let s=[],n=t.shift();for(;n;){try{const t=await(new k0).BKt(n,i);s=s.concat(t)}catch(t){0;const i=hc.y4t(t,n.sources.src);e.yo(i)}n=t.shift()}return s}};Qi(),r(),r(),r();var en=class extends Dc{ma(){return new z4}constructor(){super("xut")}},z4=class extends Jr{constructor(){super("statechange")}};r();var un=function(t){return t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted",t}({});r(),r();var B4=class{get Ju(){return this.Qu}get V(){return this.Qu.length}get ga(){return this.Za||(this.Za=this.ma()),this.Za}bL(t){return this.Qu[t]}Kz(t){this.Qu.push(t),this.Za&&this.Za.push(t.ga),this.eei(t)}sei(t){for(const i of t)this.Kz(i)}nei(t,i){i>=0&&i<=this.Qu.length&&(this.Qu.splice(i,0,t),this.Za&&this.Za.splice(i,0,t.ga),this.eei(t))}Jz(t){return Qa(this.Qu,t)}wS(t){this.rei(this.Qu.indexOf(t))}rei(t){if(!(t>=0&&t<this.Qu.length))return;const i=this.Qu[t];Mn(this.Qu,t),this.Za&&Mn(this.Za,t),this.oei(i)}eM(){const t=this.Qu.slice();nt(this.Qu),this.Za&&nt(this.Za);for(const i of t)this.oei(i)}constructor(){this.Qu=[],this.Za=void 0}},U4=class extends B4{ma(){return function(t){const i=function(t){const i=t.Ju.map((t=>t.ga));return i.item=i=>{const e=0|i,s=t.bL(e);return s&&s.ga||void 0},i}(t),e=new es(t,i);return i.addEventListener=(t,i)=>{e.yn(t,i)},i.removeEventListener=(t,i)=>{e.fn(t,i)},i}(this)}yn(t,i){this.hei.yn(t,i)}xy(t){this.hei.xy(t)}Bo(){this.hei.Bo()}yo(t){this.hei.yo(t)}fn(t,i){this.hei.fn(t,i)}Ry(t){this.hei.Ry(t)}Py(t){this.hei.Py(t)}zy(t,i){return this.hei.zy(t,i)}constructor(...t){super(...t),this.hei=new gs,this.Ds=t=>{this.yo(t)}}};r();var Q4=class extends Jr{constructor(t){super("addtask"),this.task=t}},F4=class extends Dc{ma(){return new Q4(this.aei.ga)}constructor(t){super("uei"),this.aei=t}};r();var Y4=class extends Jr{constructor(t){super("removetask"),this.task=t}},V4=class extends Dc{ma(){return new Y4(this.task.ga)}constructor(t){super("cei"),this.task=t}},G4=class extends U4{eei(t){this.yo(new F4(t))}oei(t){this.yo(new V4(t))}constructor(){super()}},W4=class extends tu{async Ok(){await this.lei(),this.Qut("initialised")}async lei(){try{await this.dei()}catch(t){0}}async dei(){const t=await this.Iv.Rot();for(const i of t){const t=this.gei.fei(i.id,i.sourceDescription,i.parameters,this._ei);this.vei(t),this.oN.Kz(t),await t.wei}}get nI(){return this.Uut}Qut(t){this.Uut=t,this.yo(new en)}get mei(){return this.oN}fei(t,i,e){void 0===e&&(e="persistent");const s=this.gei.pei(t,i,e);return this.Aei(s,e),this.oN.Kz(s),this.vei(s),s}async Aei(t,i){try{await this.yei(t,i)}catch(t){throw b("Unable to persist task - "+t)}}async yei(t,i){await this.Iv.Cot({key:t.o,id:t.o,sourceDescription:t.kc,parameters:t.jS},i)}vei(t){t.yn("xut",(()=>{t.nI===un.EVICTED&&this.oN.wS(t)}))}constructor(t,i,e){super(),this.Uut="uninitialised",this.oN=new G4,this.gei=i,this._ei=e,this.Iv=t,this.Ok()}};r(),r(),r(),r();var as=class{get jP(){return this.bei}get Mei(){return this.Tei}get Sei(){return this.Nei.jP}get Iei(){let t=0,i=0;return this.qz.forEach((e=>{t+=e.timeRanges.jP,i+=e.totalQualityDurationToCache})),0===i?0:x.min(1,t/i)}get Nei(){return this.Dei}DB(t){return!!ns(this.qz,t.qz)&&(!!Sf(this.Tei,t.Tei)&&(!!Sf(this.jP,t.jP)&&(!!Sf(this.Sei,t.Sei)&&this.Nei.IP(t.Nei))))}constructor(t,i,e){if(this.Tei=t,this.qz=i,this.bei=e,0===this.qz.size)this.Dei=Mo.PP();else{let t=new Mo([-1/0,1/0]);this.qz.forEach((i=>{t=t.Sn(i.timeRanges)})),this.Dei=t}}};as.QUALITY_TIME_RANGES_NULL_OBJECT=ll(),as.CACHE_PROGRESSION_NULL_OBJECT=new as(0,as.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),as.Eei=as.CACHE_PROGRESSION_NULL_OBJECT,r(),r(),r(),r();var Z4=class extends Jr{constructor(){super("progress")}},H4=class extends Dc{ma(){return new Z4}constructor(){super("i3t")}};r(),r();var Cl=class extends Co{get name(){return"kei"}constructor(t,i){super(t,i)}};r(),r(),r();var X4=function(t){return t[t.$L=0]="$L",t[t.tx=1]="tx",t}({});async function q4(t,i,e){const s=[];for(const n of t.Ypt)s.push(K4(n,i,e));return{Lei:await Promise.all(s)}}async function K4(t,i,e){const s=[];for(const n of t.Igt)J4(n)||s.push(i3(n,i,e));return{Z:await Promise.all(s),YA:t.YA}}function J4(t){return t.lct.every(t3)}Qi();var $4=1;function t3(t){return t.XAt!==$4&&Boolean(t.XAt)}async function i3(t,i,e){const s=[];for(const i of t.lct)t3(i)||s.push(e3(i,e));const n=await Promise.all(s),r=t.cht[0],o=t.GY,h=o?function(t,i){const e=[],s=function(t){return t?_t(t,"avc")?zo.VIDEO_H264:_t(t,"hev")||_t(t,"hvc")||_t(t,"hvt")||_t(t,"lhv")||_t(t,"lhe")||_t(t,"lht")?zo.VIDEO_H265:_t(t,"mp4")?zo.VIDEO_MP4:_t(t,"mpeg2")?zo.VIDEO_MPEG2:_t(t,"mpeg")?zo.VIDEO_MPEG:zo.VIDEO_UNKNOWN:zo.VIDEO_UNKNOWN}(t);for(const t of i){const i=t.A8.split(":").pop(),n=t.y8;e.push({mimeType:s,uuid:i,data:n})}const n=X4.$L,r=dv;return{type:n,schemeType:r,schemeDatas:e}}(r,o):void 0,a=KG(t,i,!0);return{UL:n,gs:t.uet,YA:t.YA,yV:h,ypt:a}}async function e3(t,i){const e={stack:[],error:void 0,hasError:!1};try{const r=Ne(e,new Wt,!1),o=await async function(t,i,e){const s=[],n=t.eat;t.Dft&&s.push({lB:0,ct:0,xei:t.Dft});const r=n.mbt();let o=r;for(;o;){if(t.Mdt(o)){const n=await t.Sdt(o,i,e);for(let i=0;i<n.V;i++)s.push(s3(n.Idt(i),t))}else s.push(s3(o,t));o=n.Edt(o)}const h=n.bbt(),a=h.dB-r.lB;return{ct:a,Wot:s}}(t,i,r.ly),h={o:n3(t),tP:o,FY:t.FY,Qp:t.Qp,Ti:t.Ti,YA:t.YA,ji:t.ji};switch(t.YA){case Ri.ON:break;case Ri.NI:var s,n;h.vgt=null!=(n=null==(s=t.vgt)?void 0:s.BB())?n:NaN;break;case Ri.SI:h.audioSamplingRate=t.GAt}return h}catch(t){e.error=t,e.hasError=!0}finally{qr(e)}}function s3(t,i){return{lB:t.lB,ct:t.ct,xei:i.xdt(t)}}function n3(t){return t.wdt.Cn+"-"+(""+t.o)}function r3(t,i){const e=function(t){const i=function(t){const i=ll();for(const e of t){let t=i.get(e.yRt);t||(t={YA:e.YA,zj:[]},i.set(e.yRt,t)),t.zj.push(e)}return i}(t),e=gc();return i.forEach((t=>{for(const i of t.zj){let s=e.get(t.YA);s||(s=ll(),e.set(t.YA,s));let n=s.get(i.l);n||(n=[],s.set(i.l,n)),n.push(i)}})),e}(t);return function(t,i){const e=gc();return t.forEach(((t,s)=>{const n=ll();t.forEach(((t,e)=>{const r=[];for(const e of t){const t=o3(e,s,i);r.push(t)}n.set(e,r)})),e.set(s,n)})),e}(e,i)}function o3(t,i,e){const s=t.yRt,n={IRt:t,JRt:[]};for(const t of e)cK(i,s,t)&&n.JRt.push(t);return n}async function h3(t,i){const e=await i.pSt([t],{});return jq(e.lI,{},e.ySt)}async function a3(t,i){return JX(t)?async function(t,i){const e=r3(t.zj,t._zt),s=await async function(t,i){const e=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await l3(n,s,i);e.push(r)}return e}(e,i),n=await async function(t,i){const e=[];for(const h of t){var s,n;const t=await _3(h.Xyt,i);var r,o;t.FY=h.FY,t.Qp=h.cht?c3(h.cht):"",t.Ti=null!=(r=null==(s=h.cxt)?void 0:s.Ti)?r:0,t.ji=null!=(o=null==(n=h.cxt)?void 0:n.ji)?o:0,e.push(t)}return{YA:Ri.dI,Z:[{gs:GQ,YA:Ri.dI,UL:e}]}}(t._zt,i);return s.push(n),{ct:u3(s),Cei:[t.Xyt],tAt:[{Lei:s}]}}(t,i):function(t){const i=v3(t);return{ct:i.ct,Cei:[t.Xyt],tAt:[{Lei:[{YA:Ri.dI,Z:[{YA:Ri.dI,gs:GQ,UL:[{o:t.Xyt,tP:i,FY:0,Qp:"",Ti:0,YA:Ri.dI,ji:0}]}]}]}]}}(t)}function u3(t){let i=-1/0;for(const e of t)for(const t of e.Z)i=x.max(i,...t.UL.map((t=>t.tP.ct)));return i}function c3(t){return[t.Axt,t.bxt,t.OPt].filter($t).join(",")}async function l3(t,i,e){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,i]=t.value,n=await d3(i,e);s.push(n)}return{YA:f3(i),Z:s}}async function d3(t,i){const e=[],s=t[0].IRt;for(const s of t){const t=await g3(s,i);e.push(t)}return{gs:s.gs||GQ,YA:f3(s.YA),UL:e}}function f3(t){switch(t){case Oe.SI:return Ri.SI;case Oe.NI:return Ri.NI;case Oe.AQ:case Oe.mPt:return Ri.ON;default:return Ri.dI}}function g3(t,i){const e=function(t){const i=t.IRt.Xyt,e=t.JRt.map((t=>t.Xyt));return i||(e.length?e[0]:void 0)}(t);return _3(e,i)}async function _3(t,i){let e={ct:0,Wot:[]};if(t){const s=await h3(t,i);$X(s)&&(e=v3(s))}return{o:t||"default",jei:t,tP:e,FY:0,Qp:"",Ti:0,YA:Ri.dI,ji:0}}function v3(t){const i=[];let e,s=0;for(const n of t.Wot){const t=s;!n.pzt||void 0!==e&&eq(n.pzt.Xyt,e)||(i.push(w3(n.pzt,t)),e=n.pzt.Xyt),i.push(m3(n,t)),s+=n.ct}return{ct:s,Wot:i}}function w3(t,i){return{lB:i,ct:0,xei:p3(t.Xyt)}}function m3(t,i){return{lB:i,ct:t.ct,xei:p3(t.Xyt)}}function p3(t){return{zu:t.zD,Nct:t.SMt?[t.SMt.Cn,t.SMt.Cn+t.SMt.V]:void 0,zI:!1}}r(),r(),Qi();var A3=class{async Oei(t){if(!t.src)throw new b("Invalid typed source");const i=t.type;if(iS(i))return await this.Rei(t);if(tS(i))return await this.Pei(t);throw new b("Unexpected source type")}async Rei(t){try{const i=await h3(t.src,this.ASt);return await a3(i,this.ASt)}catch(t){throw new b("Unable to fetch HLS manifest")}}async Pei(t){try{const i=new mG({WL:Fe.Ah(t.src),$Tt:t.liveOffset,nSt:t.timeServer,zI:t.useCredentials},this.zei,kc.VI,this.ASt,t.dash);return await i.W,await async function(t,i,e){const s=[];for(const n of t.tAt)s.push(q4(n,i,e));const n=await Promise.all(s);return{ct:t.Pyt.bAt(),Cei:[t.VTt],tAt:n}}(i.Tr.Sft,t.contentProtection,this.Ldt)}catch(t){throw new b("Unable to fetch DASH manifest")}}constructor(t,i,e){this.ASt=t,this.Ldt=i,this.zei=e}};Qi(),r();var y3=class{Bei(){const t=new xh;return this.Uei.push(t),this.Qei(),t.rM}async Fei(t,i){try{await t}finally{this.Yei-=1,this.Qei(),0===this.Uei.length&&0===this.Yei&&i.sM(!0)}}Qei(){if(this.Uei.length>0&&this.Yei<this.Vei){this.Uei.shift().sM(),this.Yei+=1}}constructor(t){this.Uei=[],this.Yei=0,this.Vei=t}};bs();var b3=class extends tu{get wei(){return this.Ok()}async Ok(){const t=new A3(this.ASt,this.Ldt,this.zei);this.wxt=await t.Oei(this.Gei);const i=function(t,i){if(Ic(t)){if(_t(t,"%"))return S(t)/100*i;throw new b("Unexpected - Invalid string supplied as amount to cache.")}return i<t?i:t}(this.xSt.jS.amount,this.wxt.ct);let e;this.bei=i;const s=yr(this.wxt.Cei[0]),n=(await this.Got.Zot.zot(s,"manifestURL")).filter((t=>Qa(t.references,this.xSt.o))),r=[],o=this.xSt.jS.bandwidth;for(const t of this.wxt.tAt)for(const i of t.Lei)for(const t of T3(i,this.xSt.jS.preferredTrackSelection))for(const i of N3(t.UL,o))r.push(i);this.Wei=x.ceil(r.map((t=>t.FY*function(t,i){let e=0;for(const s of t.tP.Wot.map((t=>t.ct)))if(e+=s,e>=i)return e;return e}(t,i)/8)).reduce(((t,i)=>t+i),0));const h=ll();if(n&&0!==n.length){const t=n.reduce(((t,i)=>t+i.byteSize),0);for(const t of n){const i=t.qualityId,e=new Mo(t.startsAndEnds);if(h.has(i))h.get(i).timeRanges=h.get(i).timeRanges.pP(e).mP(5e-4);else{const t=dl(r,(t=>t.o===i));var a;const s=x.min(this.bei,null!=(a=null==t?void 0:t.tP.ct)?a:1/0);h.set(i,{timeRanges:e,totalQualityDurationToCache:s})}}e=new as(t,h,this.bei)}else{for(const t of r)h.set(t.o,{timeRanges:Mo.PP(),totalQualityDurationToCache:x.min(t.tP.ct,this.bei)});e=new as(0,h,this.bei)}this.Zei=e}get Hei(){return this.Wei}get Zei(){return this.Xei}set Zei(t){this.Xei.DB(t)||(this.Xei=t,t.DB(as.Eei)||this.yo(new H4))}async pi(t){await this.do,await this.qei(this.wxt,t)}async qei(t,i){if(!t.Cei)throw new b("Unexpected - manifest is missing locations");await this.Kei();const e=[];for(const s of t.tAt)e.push(this.Jei(s,t.Cei[0],i));return gw(e)}async Kei(){const t=await this.$ei.Rot();for(const i of t){const t=await this.Got.Hot.$b(i.key);if(t)await M3(t,this.xSt.o,this.Got.Hot,this._ei);else try{await this.Got.Hot.Cot(i,this._ei)}catch(t){throw new Cl("Unable to store manifest with url: "+i.locationURL,t)}}await this.$ei.Uot()}Jei(t,i,e){const s=[];for(const n of t.Lei){const t=T3(n,this.xSt.jS.preferredTrackSelection);for(const n of t)s.push(this.tsi(n,i,e))}return gw(s)}async tsi(t,i,e){const s=this.xSt.jS.bandwidth,n=N3(t.UL,s);t.YA===Ri.NI&&t.ypt&&t.ypt.IF.widevine&&"persistent"===t.ypt.IF.widevine.licenseType&&(await this.isi(t.ypt),yi(e));const r=[];for(const t of n)r.push(this.esi(t,i,e));return gw(r)}async esi(t,i,e){yi(e);const s=t.tP.Wot[0].lB+this.bei,n=[];let r=!1;for(const o of t.tP.Wot){if(o.lB>=s||this.stopIfFailed(r))break;await this.ssi(e),await this.nsi.Bei(),n.push(this.nsi.Fei(this.rsi(o,t,i),this.osi).catch((t=>(r=!0,Promise.reject(t)))))}return gw(n)}async ssi(t){if(null==t?void 0:t.sy)throw await this.osi.rM,new J}async hsi(){return await this.do.catch(Bn),this.wxt}isi(t){return Promise.resolve()}asi(){return Fe.uA("License renewal unsupported in this SDK."),Promise.resolve()}async rsi(t,i,e){const s=this.Got.Zot,n=RB(t.xei.zu,t.xei.Nct),r=await s.$b(n);if(r)await M3(r,this.xSt.o,s,this._ei),this.usi(r,!1);else try{const s=await this.lsi(t.xei),{segmentMetadataEntry:n,segmentEntry:r}=this.dsi(t,i,e,s);await this.Got.Vot((async t=>{await t.Zot.Cot(n,this._ei),await t.Wot.Cot(r,this._ei)})),this.usi(n,!0)}catch(i){throw new Cl("Unable to store segment with url: "+t.xei.zu,i)}}async lsi(t){const i=await this.Olt.Act(t,{Dct:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,jI:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.Rlt(i)}async Rlt(t){return{buffer:await t.FN()}}dsi(t,i,e,s){const n=RB(t.xei.zu,t.xei.Nct),r=t.lB,o=t.ct,h=this.fsi(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:yr(e),qualityId:i.o,byteSize:h,startsAndEnds:new Mo([r,r+o]).hP,references:[this.xSt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:yr(e),data:s,references:[this.xSt.o]}}}fsi(t){return t.buffer.byteLength}usi(t,i){const e=t.qualityId,s=this.Xei,n=s.qz;n.get(e).timeRanges=n.get(e).timeRanges.pP(new Mo(t.startsAndEnds)).mP(5e-4),this.Zei=new as(i?s.Mei+t.byteSize:s.Mei,n,this.bei)}stopIfFailed(t){return!1}constructor(t,i,e,s,n,r,o,h){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.osi=new xh,this.Xei=as.Eei,this.xSt=t,this.Got=i,this.ASt=e,this.$ei=s,this.Olt=n,this.Ldt=r,this.zei=h,this._ei=o,this.Wei=-1;const a=this.xSt.kc.sources[0];this.Gei=a,this.do=this.Ok(),this.nsi=new y3(this.xSt.jS.parallelTasksThreshold)}};async function M3(t,i,e,s){Qa(t.references,i)||(t.references.push(i),await e.Cot(t,s))}function T3(t,i){switch(t.YA){case Ri.SI:return S3(t.Z,i.audioTrackSelection);case Ri.ON:return S3(t.Z,i.textTrackSelection);default:return S3(t.Z,[])}}function S3(t,i){if(0===i.length)return t.length?[t[0]]:[];const e=[];for(const s of t)i.indexOf(s.gs)>-1&&e.push(s);return e}function N3(t,i){if(!t.length)return[];const e=[...t].sort(iQ),s=e.filter((t=>t.FY<=i));return s.length>0?[s.pop()]:[e.shift()]}var I3=class{async gsi(){await this.Got.Vot((async t=>{await this._si(t),await this.vsi(t),await this.wsi(t),await this.msi(t)}))}async _si(t){const i=t.Xot,e=this.xSt.o;await i.wS(e)}async vsi(t){const i=t.Zot,e=t.Wot,s=this.xSt.kc.sources[0];if(!aS(s))return;const n=yr(s.src),r=(await i.zot(n,"manifestURL")).filter((t=>Qa(t.references,this.xSt.o)));for(const t of r)ra(t.references,this.xSt.o),0===t.references.length?(await i.wS(t.key),await e.wS(t.key)):await i.Cot(t)}async wsi(t){const i=t.Hot,e=this.psi(),s=(await i.Sot(e)).filter((t=>Qa(t.references,this.xSt.o)));for(const t of s)ra(t.references,this.xSt.o),0===t.references.length?await i.wS(t.key):await i.Cot(t)}psi(){if(!this.wxt)return[];const t=this.xSt.kc.sources[0];if(!aS(t))return[];const i=yr(t.src),e=function(t){if(!t)return[];const i=[];for(const e of t.tAt)for(const t of e.Lei)for(const e of t.Z)for(const t of e.UL)t.jei&&i.push(t.jei);return function(t){return t.reduce(((t,i)=>(t.indexOf(i)<0&&t.push(i),t)),[])}(i)}(this.wxt).map((t=>({src:t}))).map((t=>yr(t.src)));return[i,...e]}async msi(t){const i=t.qot,e=(await i.Rot()).filter((t=>Qa(t.references,this.xSt.o)));for(const t of e)ra(t.references,this.xSt.o),0===t.references.length?(await i.wS(t.key),this.Asi(t)):await i.Cot(t)}Asi(t){}constructor(t,i,e){this.xSt=t,this.Got=i,this.wxt=e}},D3=new class{xst(t,i,e){return new I3(t,i,e)}};r(),r(),Qi();var E3=class{get ga(){return this.Za||(this.Za=function(t){return{renew(i){t.ysi(i)}}}(this)),this.Za}ysi(t){this.bsi(t)}async bsi(t){try{await this.Msi.asi(t)}catch(t){0,this.lD.Qut(un.ERROR)}}constructor(t,i){this.lD=t,this.Msi=i}},k3=class extends gs{get wei(){return this.Msi.wei}get ga(){return this.Za||(this.Za=function(t){let i,e={get id(){return t.o},get status(){return t.nI},get source(){return t.kc},get parameters(){return t.jS},get duration(){return t.ct},get cached(){return t.Tsi.ks()},get secondsCached(){return t.Ssi},get percentageCached(){return t.Nsi},get bytes(){return t.Isi},get bytesCached(){return t.Dsi},get license(){return t.pX.ga},start(){t.Cn()},pause(){t.Rk()},remove(){t.wS()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Vx(t,["i3t","xut"],e),e}(this)),this.Za}get o(){return this.aS}get pX(){return this.Esi}get nI(){return this.Uut}Qut(t){this.Uut!==t&&(this.Uut=t,this.yo(new en))}get kc(){return this.wc}get jS(){return this.ksi}get ct(){return this.Msi.Zei.jP}get Tsi(){return this.Msi.Zei.Nei}get Ssi(){return this.Msi.Zei.Sei}get Nsi(){return this.Msi.Zei.Iei}get Isi(){return this.Msi.Hei}get Dsi(){return this.Msi.Zei.Mei}Cn(){this.Uut===un.EVICTED||this.Uut===un.DONE||this.Lsi()}async Lsi(){try{this.Qut(un.LOADING);const t=new Wt;this.xsi=t,await this.Msi.pi(t.ly),this.Qut(un.DONE)}catch(t){Tu(t)?this.Qut(un.IDLE):this.Qut(un.ERROR)}finally{this.xsi.wy()}}Rk(){this.xsi.Ty()}wS(){this.nI===un.LOADING?(this.yn("xut",this.evictOnLoading),this.Rk()):this.Csi()}async Csi(){try{const t=await this.Msi.hsi();await D3.xst(this,this.Got,t).gsi(),this.Msi.Zei=as.Eei,this.Qut(un.EVICTED)}catch(t){0,this.Qut(un.ERROR)}}constructor(t,i,e,s,n,r){super(),this.xsi=new Wt,this.evictOnLoading=()=>{this.fn("xut",this.evictOnLoading),this.Csi()},this.aS=t,this.wc=i,this.ksi=e,this.Got=s,this.Msi=n.xst(this,this.Got,r),this.Esi=new E3(this,this.Msi),this.Uut=1===this.Msi.Zei.Iei?un.DONE:un.IDLE,this.Msi.yn("i3t",(t=>{this.Ds(t),1===this.Nsi&&this.Qut(un.DONE)}));const o=new Date,h=this.ksi.expirationDate.getTime()-o.getTime();(function(t){return t<2147483647})(h)&&u((()=>this.Csi()),h)}};var L3=class{pei(t,i,e){const s=kL();return this.fei(s,t,i,e)}fei(t,i,e,s){return new k3(t,i,e,this.Got,this.jsi,s)}constructor(t,i){this.Got=t,this.jsi=i}};r();var x3=30,C3=5;function j3(t){if(!t)throw new b("Unexpected - The cache parameters are undefined");const i=function(t){if(Ic(t)&&!_t(t,"%"))return C(t);return t}(t.amount);!function(t){if(function(t){return Ic(t)&&_t(t,"%")}(t)){const i=S(t);if(j(i)||i<0||i>100)throw new b("The amount as percentage must be between 0 and 100 percent.")}if(!Ic(t)&&j(t))throw new b("The amount must be a number or a string")}(i);const e=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+x3),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||Od(t)&&t>new Date}(t))throw new b("Invalid expiration date for the cache parameters")}(e);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(j(t)||t<0)throw new b("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return C3;if(j(t))throw new b("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:i,expirationDate:e,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}bs();var O3=class{set Gti(t){this.Osi=t,this.Rsi=0,this.Psi=0,this.zsi=void 0}get Gti(){return this.Osi}g6t(){if(!this.Osi)return;const t=this.Osi.s0t;for(;this.Rsi<t.length;){const i=t[this.Rsi];for(void 0===this.zsi&&(this.zsi=A1(i),this.Psi=0);this.Psi<this.zsi.length;){const t=this.zsi[this.Psi];if(this.Psi++,void 0!==t.lXt)return t.lXt}this.Rsi++,this.zsi=void 0}}tr(){for(this.Gti=void 0,this.rN.Ty(),this.rN=new Wt;this.Bsi.length;)this.Iti()}Usi(t){return new W4(this.Got.Xot,t,"temporary")}async VGt(t){const i=E4(t.xqt,this.FJ.ads.allowedMimeTypes);if(!i.length)return;const e=await Za.Ld.mG(i,tl({sources:i}));if(!e.t.oG())return;this.Msi||(this.Msi=new this.jsi(this.OQ));const s=this.Got,n=new L3(s,this.Msi),r=this.Usi(n).fei(tl({sources:e.kc}),j3({amount:10,bandwidth:_i.Ld.LY()||this.UG.VK}),"temporary");this.Bsi.push(r);const o=this.Msi.xst(r,s,"temporary");this.rN.Ty(),this.rN=new Wt,Vh(o.pi(this.rN.ly),this.rN).then(Bn),this.Qsi(o,t)}constructor(t,i,e,s){this.Bsi=[],this.Rsi=0,this.Psi=0,this.Tti=async()=>{const t=this.g6t();t&&await this.VGt(t)},this.Iti=()=>{const t=this.Bsi.shift();null==t||t.wS()},this.Qsi=async(t,i)=>{let e=!1;for(;!e;)await t.zy("i3t"),e=1===t.Zei.Iei;i.ct<5&&this.Tti()},this.FJ=t,this.OQ=i,this.rN=new Wt,this.jsi=e,this.UG=s,this.Got=new FB}};r(),r();var R3={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new Mo([0,0]).hP,references:[]},P3={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},z3=class t extends aQ{async Hdt(t,i,e,s){try{return await super.Hdt(t,i,e,s)}catch(t){V(t)}const n=await this.Fsi.Hdt(t,i,e,s);return await this.Ysi(t,i,n),n}async Ysi(i,e,s){if(void 0===this.Vsi)return;const n=this.Got.Zot,r=RB(i,e),o=await n.$b(r);if(o)await M3(o,this.Vsi,n,this._ei);else try{const i={buffer:s},{segmentMetadataEntry:e,segmentEntry:n}=t.dsi(r,i,this.Vsi);await this.Got.Vot((async t=>{await t.Zot.Cot(e,this._ei),await t.Wot.Cot(n,this._ei)}))}catch(t){throw new Cl("Unable to store segment with url: "+i,t)}}static dsi(t,i,e){return{segmentMetadataEntry:Ei({},R3,{key:t,segmentURLsegmentByteRange:t,references:[e]}),segmentEntry:Ei({},P3,{key:t,segmentURLsegmentByteRange:t,data:i,references:[e]})}}constructor(t,i,e,s,n){super(t),this.Fsi=new hQ(i),this.Got=e,this.Vsi=s,this._ei=n}};var B3=class{xst(t,i,e){void 0===e&&(e="persistent");const s=t.kc.sources[0];if(nS(s))throw new b("Caching THEOlive sources is not supported");const n=Boolean(s.useCredentials),r=new _U(this.OQ,Pc.dI),o=new CG(this.OQ,n),h=new ir(i.Hot,i.Zot,i.Wot,i.qot),a=function(t,i,e,s,n){return new z3(i,t,e,s,n)}(this.OQ,h,i,t.o,e),u=new Pr,c=new zG(PG(o,h),u,t);return this.Gsi(t,i,c,u,r,a,e)}constructor(t){this.OQ=t}},U3=class extends B3{Gsi(t,i,e,s,n,r,o){return new b3(t,i,e,s,n,r,o,ZB())}},Q3=U3;bs();var F3=class t extends B2{get g4t(){return this}static get d4t(){return ah.y0t}get d4t(){return t.d4t}E7t(t,i,e){i===Jz.art&&this.s7?X(this.d6t([t])):this.Wsi.push(t)}xE(){return this.Zsi.oii?this.Zsi.LE:this.Cnt()}CE(t,i){}_d(){return this.Zsi.ct}RE(){return this.Zsi.OE}PE(){}BE(){}ZE(){return this.Zsi.WE}HE(t){this.WE!==t&&(this.Zsi.WE=t,this.yo(new $e(this.LE,this.Nk)))}JE(){return this.Zsi.KE}gk(){return this.Zsi.fk}vk(){return Mo.PP().ks()}bk(){return this.Zsi.yk}Sk(){return this.Zsi.Tk}Ik(){return this.Zsi.Nk}Dk(t){this.Nk!==t&&(this.Zsi.Nk=t,this.yo(new $e(this.LE,this.Nk)))}async Pk(){if(this.Hsi)return;this.yo(new fi(this.LE)),this.Xsi(),this.Wsi.length&&(this.Hsi=this.d6t(this.Wsi),await this.Hsi,this.Hsi=void 0),await this.qsi.Oti(this.ta.xE());const t=this.Ksi;4!==t&&1!==t&&5!==t||(!this.I0t&&this.Jsi.length?this.$si():this.I0t?(this.tni=!0,this.Zsi.Pk()):(this.R2t(),this.ta.Pk()),this.Ksi=3)}Rk(){3===this.Ksi&&(this.Zsi.Rk(),this.Ksi=4)}Mti(){this.qsi.Mti()}Cn(){this.Ksi=1,this.qsi.Cn()}async zk(){this.qsi&&(this.qsi.jn(),this.ini(!1),this.Rii.zk(),this.Ksi=5,this.I0t&&(this.qsi.Vti(this.I0t.WKt),this.I0t=void 0)),this.s7=!1,this.tni=!1,nt(this.Jsi),this.N4t&&(this.R2t(),this.ta.ge()),nt(this.Wsi),await this.Zsi.zk(),await this.aii.tr()}ZC(){this.Zsi.$Jt(),this.Rii.$Jt()}Ok(){this.aii.Ok(),this.Xsi()}p4t(t){return!(t.type!==Zi.qy||!this.qsi||!this.qsi.xti(-1))&&(this.qsi.kti().then(Bn),!0)}ge(){void 0!==this.Zsi.uii&&(this.aii.ge(),this.Zsi.ge()),void 0!==this.Rii.Qii&&this.Rii.ge()}be(){this.aii.be(),this.Zsi.be(),this.Rii.be()}async d6t(t){const i=await P4.iei(t,this.OQ,this.v4t);if(!i.length){const t="Ads could not be loaded.";return this.v4t.yo(hc.y4t(new Ie(Nr.ADBLOCK,$u.FILE_NOT_FOUND),t)),void(this.s7&&!this.I0t&&0===this.Jsi.length&&this.eni())}this.qsi.Fti(i),this.v4t.yo(new gB),this.N4t||this.ta.KE||this.qsi.Oti(this.ta.xE()),0!==this.Ksi&&5!==this.Ksi||this.Cn()}Bti(t){this.Jsi.push(...t);for(const i of t)this.s7&&!this.N4t&&this.$si()}async $si(){if(2!==this.Ksi&&!this.sni){0,this.sni=!0,this.Ksi=2;const t=this.I0t;this.nni(),this.I0t?(await this.I0t.WKt.pti(this.v4t),this.rni()||(this.sni=!1),this.v4t.yo(new N2(this.oni(this.I0t))),await this.hni()):((null==t?void 0:t.WKt.Ati())&&this.v4t.yo(new Zu(this.oni(t))),this.sni=!1,this.Ksi=1,this.eni())}}eni(){this.R2t(),this.ta.ge(),this.ta.OE?this.ta.yo(new fa(this.ta.xE())):this.ta.Pk()}nni(){let t;if(this.I0t&&this.rni())t=this.I0t.WKt;else{if(0===this.Jsi.length)return;t=this.Jsi.shift()}if(!t)return;const i=t.Pc();i?this.I0t=i:(this.I0t&&(this.qsi.Vti(this.I0t.WKt),this.I0t=void 0),this.I0t=void 0)}async hni(){const t=this.I0t?function(t){var i,e;const s=null==(e=t.pJt)||null==(i=e.XHt)?void 0:i.qHt();return void 0===s?void 0:new p1(s)}(this.I0t):void 0;if(t){if(!this.I0t)return;this.ani=t,this.uni(this.I0t.mXt),this.cni(dt.fKt);const i=this.ani.Pc();this.I0t.WKt.Ati()&&(this.Rii.gii(),1===this.I0t.WKt.ult&&this.v4t.yo(new uB(this.oni(this.I0t)))),await this.Mii(i)}else this.Ksi=1,this.sni=!1,this.I0t=void 0,this.$si()}async Mii(t){if(t){var i;let s=$t(t.lXt),n=$t(t.gXt);var e;const r=null!=(e=null==(i=t.fXt)?void 0:i.zXt)?e:[],o=r.length>0,h=this.I0t,a=this.oni(h);if(t.lXt){if(t.lXt.Yl=h,void 0!==h.Drt.skipOffset){const i=Xc.vJt(h.Drt.skipOffset,t.lXt.ct);void 0!==i&&i<t.lXt.ct&&(t.lXt.Oqt=i)}const i=a.n0t(t.lXt,r,t._Xt,h.Drt);this.Rii.gii(),this.B3t(),await this.Zsi.Mii(i,t.lt,{width:this.ta.we.offsetWidth,height:this.ta.we.offsetHeight}),s=!0}if(t.gXt){const i=t.gXt.vXt[0];if(i.Yl=h,void 0!==h.Drt.skipOffset){const t=Xc.vJt(h.Drt.skipOffset,this.ta._d());t&&(i.Yl.Oqt=t)}const e=s?[]:r,o=a.r0t(i,e,t.gXt,t._Xt,h.Drt);s&&this.Zsi.zii(),await this.Rii.Mii(o,t.lt,{width:this.ta.we.offsetWidth,height:this.ta.we.offsetHeight}),n=!0}if(s){this.Ksi=3,this.Zsi.ge();const t=0===a.lzt;this.tni=t,this.aii.Rk(),this.Zsi.Pk(),this.ta.Rk(),this.ta.be(),this.B3t(),this.Zsi.xii()}n&&(this.Ksi=3,this.Rii.ge(),this.Rii.xii()),(s||n||o)&&this.lni(t.aXt),s||n||await this.dni(),!s&&n&&(this.rni()||this.Jsi.length>0?this.$si():(this.eni(),this.I0t=h))}else null===t?await this.dni():this.ini(!0)}dni(){const t=this.ani;return this.Mii(t&&t.Pc())}ini(t){this.cni(dt.gKt),this.fni(),this.Ksi=1;const i=void 0!==this.I0t&&this.I0t.WKt.wti();if(this.sni=!1,i)t&&(this.Ksi=1,this.$si());else{if(!this.N4t)return;this.ta.ge(),!this.ta.OE&&t&&this.ta.Pk(),this.R2t()}}R2t(){this.gni(),super.R2t()}gni(){if(this.ta.OE&&(this.Ksi=5),this.I0t){const t=this.I0t.WKt;t.Ati()&&this.v4t.yo(new Zu(this.oni(this.I0t))),this.qsi.Vti(t),this.I0t=void 0}}uni(t){this._ni=this._ni.concat(t)}fni(){this._ni=[]}vni(t){this.ta.we.appendChild(t)}cni(t){for(const i of this._ni)i.dZ===t&&Xr(i.eventURL)}lni(t){this.Zsi.tii(dt.oKt);for(const i of t)Xr(i)}get drt(){return this.I0t?this.oni(this.I0t):null}get crt(){return this.I0t?[this.Zsi.uii,this.Rii.Qii].filter($t):[]}get frt(){const t=this.Jsi.concat(this.qsi.frt.filter((t=>!t.u0t())));return Ms(t,(t=>t.lti.Vc.filter((t=>!t.u0t()))))}get grt(){return this.qsi.frt.map((t=>t.lti))}vrt(t){const i=this.L7t();for(const e of i)F$(e.sources,e.timeOffset)||t.I9(e,Jz.art,!1)}L7t(){const t=[];for(const i of this.crt.concat(this.frt))t.push(i.Drt);const i=this.Jsi.concat(this.qsi.frt.filter((t=>!t.u0t())));for(const e of i)for(const i of e.s0t)i.W||t.push(i.Drt);return t.push(...this.Wsi),ow(t)}rni(){return!!this.I0t&&A1(this.I0t).some((t=>t.lXt))}oni(t){return t.WKt.lti}tei(){return this.wni}jk(){return this.aii.jk()}bE(){return this.aii.bE()}k4t(t){this.qsi.k4t(t)}async gn(){await super.gn(),this.ta.fn(Zi.so,this.Xsi),this.v4t.Bq(this.Zsi.v4t),this.v4t.Bq(this.Rii.v4t),this.v4t.Bq(this.qsi),this.Zsi.gn(),this.Rii.gn(),await this.aii.gn()}constructor(t,i,e,s,n,r){super(t,i),this.Jsi=[],this.Ksi=0,this._ni=[],this.sni=!1,this.s7=!1,this.tni=!0,this.Wsi=[],this.mni=t=>{t.type===Zi.so&&this.tni?this.tni=!1:this.yo(t)},this.Xsi=()=>{this.s7=!0},this.pni=async()=>(this.Ksi=1,await this.Zsi.gii(),this.Mii(this.ani.Pc())),this.Ani=async t=>{const i=new Ie(Nr.PLAYBACK,$u.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.v4t.yo(hc.y4t(i,t)),await this.Zsi.gii(),this.Mii(this.ani.Pc())},this.yni=()=>(this.Rii.gii(),this.Mii(this.ani.Pc())),this.bni=t=>{const i=new Ie(Nr.PLAYBACK,$u.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.v4t.yo(hc.y4t(i,t)),this.Rii.gii(),this.Mii(this.ani.Pc())},this.OQ=r,this.aii=e,this.Rii=new R4(this.bni,this.yni,this),this.Zsi=new j4(this.Ani,this.pni,this.Rii,s,this,t.Uu,e),this.vni(this.Rii.Wti),this.vni(this.Zsi.Wti);const o=new O3(s,r,U3,n);this.qsi=new S4(this.ta,this,this.v4t,o),this.Zsi.xy(this.mni),this.Rii.xy(this.Ds),this.v4t.iu(this.Zsi.v4t),this.v4t.iu(this.Rii.v4t),this.v4t.iu(this.qsi),this.wni=new M1(this,this.ta),this.Uu.yn(ZL.pn,this.Ds),this.ta.yn(Zi.so,this.Xsi)}};mk.Ld.tW(new class{get a4t(){return F3.d4t}$G(t){return t&&("string"!=typeof t.integration||t.integration===Si.DEFAULT||t.integration===Si.CSAI||t.integration===Si.THEO)}u4t(t,i,e){const s=new sk(t.we,e,t.wE,t.Tnt,t.Ek,t.Ent,t.Ll);return new F3(t,i,s,e,t.Tnt,t.wE)}I9(t,i,e,s){e.E7t(t,i,s)}fH(t){const i=Y0(t.sources);if(!i)return;const e={integration:Si.CSAI,sources:i};"vast"===e.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===e.sources.type&&void 0!==t.timeOffset&&Bi("Do not set timeOffset for VMAP ad sources. VMAP ads have their own offsets included.");const s=G0(t.timeOffset);void 0!==s&&(e.timeOffset=s);const n=G0(t.skipOffset);return void 0!==n&&(e.skipOffset=n),e}}),r(),r(),Uc();var Y3=class{FK(){var t;this.Z9||(null==(t=this.H7t)||t.initialize(),this.Z9=!0)}get Wti(){return this.k1t}get Mni(){return this.Tni.offsetHeight}get Sni(){return this.Tni.offsetWidth}get Nni(){return this.H7t}Ini(t){"linear"===t?this.k1t.style.marginTop="0px":"nonlinear"===t&&(this.k1t.style.marginTop="-45px")}ge(){this.k1t.style.opacity="1",this.k1t.style.pointerEvents=""}be(){this.k1t.style.opacity="0",this.k1t.style.pointerEvents="none"}wy(){var t;null==(t=this.H7t)||t.destroy(),this.H7t=void 0}constructor(t,i){this.H7t=void 0,this.Z9=!1,this.tst=t;const e=h.createElement("div");e.className="theoplayer-ima-wrapper",pc(e),e.style.zIndex="10",Ro.Qs&&function(t,i){t.addEventListener(i,Gd)}(e,"mousedown"),i.appendChild(e);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.Tni=s,e.appendChild(s),this.k1t=e,this.H7t=new google.ima.AdDisplayContainer(this.Tni,this.tst)}};r(),r(),r();var V3=class{get Mqt(){return this.Dni.getAdId()}get y8t(){const t=this.Dni.getAdPodInfo();if(void 0!==t)try{return{R9t:t.getAdPosition(),$$t:t.getMaxDuration(),Eni:t.getPodIndex(),lzt:t.getTimeOffset(),P9t:t.getTotalAds(),kni:t.getIsBumper()}}catch(t){return}}get nXt(){return this.Dni.getAdSystem()}get Lni(){return this.Dni.getAdvertiserName()}get HXt(){var t;return null!=(t=this.Dni.getApiFramework())?t:void 0}get fXt(){return this.BXt.map((t=>({qXt:t.getAdSlotId(),VN:t.getContentType(),J4t:t.getContent(),Ti:t.getHeight(),ji:t.getWidth()})))}get VN(){var t;return null!=(t=this.Dni.getContentType())?t:void 0}get EXt(){return this.Dni.getCreativeId()}get u7t(){return this.Dni.getCreativeAdId()}get xni(){return this.Dni.getDealId()}get $j(){return this.Dni.getDescription()}get ct(){return this.Dni.getDuration()}get ji(){return this.Dni.getWidth()}get Ti(){return this.Dni.getHeight()}get zqt(){var t;return null!=(t=this.Dni.getMediaUrl())?t:void 0}get Cni(){return this.Dni.getMinSuggestedDuration()}get h7t(){return this.Dni.getSkipTimeOffset()}get jni(){return this.Dni.getSurveyUrl()}get TV(){return this.Dni.getTitle()}get r7t(){return this.Dni.getTraffickingParameters()}get o7t(){return this.Dni.getTraffickingParametersString()}get _Xt(){return this.Dni.getUniversalAdIds().map((t=>({c7t:t.getAdIdRegistry(),l7t:t.getAdIdValue()})))}get iti(){return this.Dni.getUiElements()}get a7t(){return this.Dni.getVastMediaBitrate()}get s7t(){return this.Dni.getVastMediaHeight()}get e7t(){return this.Dni.getVastMediaWidth()}get J8t(){return this.Dni.getWrapperAdIds()}get $8t(){return this.Dni.getWrapperAdSystems()}get t7t(){return this.Dni.getWrapperCreativeIds()}get f8t(){return this.Dni.isLinear()}constructor(t){this.Dni=t;const i=new google.ima.CompanionAdSelectionSettings;i.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,i.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,i.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.BXt=t.getCompanionAds(0,0,i)}};function G3(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var W3=class extends tu{Dk(t){var i;null==(i=this.e0t)||i.setVolume(t)}Ik(){return this.e0t.getVolume()}O8t(){return this.e0t.getRemainingTime()}wy(){nt(this.Dc),this.Xu.fn(ZL.pn,this.Oni),this.e0t.removeEventListener(google.ima.AdEvent.Type.LOADED,this.Rni),this.e0t.removeEventListener(G3(),this.forwardAdEventListener),this.e0t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.e0t.destroy()}Cn(){this.e0t.start()}V7t(){this.e0t.resume()}Rk(){this.e0t.pause()}ZC(){this.e0t.skip()}zk(){this.e0t.stop()}m8t(){const t=this.e0t.getCurrentAd();if(t)return this.Pni(t)}q7t(){return this.e0t.getCuePoints()}Pni(t){let i=dl(this.Dc,(i=>i.Dni===t));return i||(i=new V3(t),this.Dc.push(i)),i}rti(t){this.e0t.updateAdsRenderingSettings(q3(t))}constructor(t,i,e){super(),this.Dc=[],this.Rni=t=>{t.getAd().isLinear()?this.H7t.Ini("linear"):this.H7t.Ini("nonlinear")},this.Oni=()=>{this.e0t.resize(this.H7t.Sni,this.H7t.Mni,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const i=t.getAd(),e=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:Da.y6t,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:Da.b6t,[google.ima.AdEvent.Type.CLICK]:Da.M6t,[google.ima.AdEvent.Type.DURATION_CHANGE]:Da.Zy,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:Da.T6t,[google.ima.AdEvent.Type.STARTED]:Da.S6t,[google.ima.AdEvent.Type.IMPRESSION]:Da.N6t,[google.ima.AdEvent.Type.PAUSED]:Da.iW,[google.ima.AdEvent.Type.RESUMED]:Da.I6t,[google.ima.AdEvent.Type.AD_PROGRESS]:Da.D6t,[google.ima.AdEvent.Type.AD_BUFFERING]:Da.E6t,[google.ima.AdEvent.Type.FIRST_QUARTILE]:Da.k6t,[google.ima.AdEvent.Type.MIDPOINT]:Da.tKt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:Da.L6t,[google.ima.AdEvent.Type.COMPLETE]:Da.iKt,[google.ima.AdEvent.Type.USER_CLOSE]:Da.x6t,[google.ima.AdEvent.Type.LINEAR_CHANGED]:Da.C6t,[google.ima.AdEvent.Type.LOADED]:Da.j6t,[google.ima.AdEvent.Type.AD_CAN_PLAY]:Da.O6t,[google.ima.AdEvent.Type.AD_METADATA]:Da.R6t,[google.ima.AdEvent.Type.AD_BREAK_READY]:Da.P6t,[google.ima.AdEvent.Type.INTERACTION]:Da.z6t,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:Da.B6t,[google.ima.AdEvent.Type.SKIPPED]:Da.U6t,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:Da.Q6t,[google.ima.AdEvent.Type.LOG]:Da.F6t,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:Da.Y6t,[google.ima.AdEvent.Type.VOLUME_CHANGED]:Da.V6t,[google.ima.AdEvent.Type.VOLUME_MUTED]:Da.G6t}[t]}(t.type),s={type:e,date:new Date,Art:i?this.Pni(i):void 0,n8t:X2(e,t.getAdData())};this.yo(s)},this.forwardAdErrorEventListener=t=>{this.yo({date:new Date,Art:void 0,type:W2.W6t,n8t:{z8t:J2(t.getError())}})},this.e0t=t,this.H7t=i,this.Xu=e,this.Xu.yn(ZL.pn,this.Oni),this.e0t.init(this.H7t.Sni,this.H7t.Mni,google.ima.ViewMode.NORMAL),this.e0t.addEventListener(google.ima.AdEvent.Type.LOADED,this.Rni),this.e0t.addEventListener(G3(),this.forwardAdEventListener),this.e0t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}};r();var Z3=class extends Dc{get zni(){return this.Bni}get Wti(){return this.k1t}ma(){return new H3(this.Bni)}constructor(t,i){super("ati"),this.Bni=t,this.k1t=i}},H3=class extends Jr{get adsManager(){return this.Bni}constructor(t){super("adsmanagerloaded"),this.Bni=t}},X3=class extends tu{G7t(){var t;null==(t=this.W7t)||t.contentComplete()}async d6t(t,i,e){if(this.Uni)throw new b("Only one ImaAdsRequest can be made at a time.");if(!this.Qni.Nni)throw new b("AdDisplayContainer is not initialized.");this.W7t=new google.ima.AdsLoader(this.Qni.Nni),this.W7t.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.W7t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.Uni=new xh,this.Fni=i,this.Yni=e;const s=new google.ima.AdsRequest;return t.N5t?s.adTagUrl=t.N5t:t.I5t&&(s.adsResponse=t.I5t),s.linearAdSlotWidth=t.A5t,s.linearAdSlotHeight=t.y5t,s.nonLinearAdSlotWidth=t.b5t,s.nonLinearAdSlotHeight=t.M5t,s.contentDuration=t.E5t,s.setAdWillAutoPlay(t.T5t),s.setAdWillPlayMuted(t.S5t),t.D5t&&(s.omidAccessModeRules=t.D5t),this.W7t.requestAds(s),this.Uni.rM}wy(){var t;void 0!==this.W7t&&(this.W7t.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.W7t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.W7t.destroy(),this.W7t=void 0),null==(t=this.Uni)||t.nM("AdsLoader destroyed"),this.Uni=void 0}constructor(t,i){super(),this.onAdsManagerLoadedListener=t=>{if(this.Fni&&this.Yni&&this.Uni){var i;const e=q3(this.Yni),s=this.Fni,n=t.getAdsManager({get currentTime(){return s.LE},get duration(){return s.ct}},e),r=new W3(n,this.Qni,this.Xu);this.yo(new Z3(n,this.Qni.Wti)),null==(i=this.Uni)||i.sM(r),this.Uni=void 0}},this.onAdsManagerErrorListener=t=>{var i;const e={Pb:t.getError().getMessage(),z9t:t.getError().getVastErrorCode(),xKt:t.getError().getErrorCode(),YA:q2(t.getError().getType()),B9t:void 0};null==(i=this.Uni)||i.nM(e),this.Uni=void 0},this.Xu=i,this.Qni=t}};function q3(t){const i=new google.ima.AdsRenderingSettings;return i.enablePreloading=t.eti,t.iti&&(i.uiElements=t.iti),i.mimeTypes=t.tti,void 0!==t.nti&&(i.playAdsAfterTime=t.nti),void 0!==t.sti&&(i.loadVideoTimeout=t.sti),void 0!==t.n7t&&(i.bitrate=t.n7t),void 0!==t.nti&&(i.playAdsAfterTime=t.nti),i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i}r();var K3=class extends tu{get LE(){return this.ta.wk?this.Vni:this.ta.xE()}get ct(){return this.ta._d()}get WE(){return this.ta.WE}get Nk(){return this.ta.Nk}tr(){this.Vni=0}constructor(t){super(),this.ta=t,this.Vni=this.ta.xE(),this.ta.yn(Zi.Eb,(()=>{this.ta.wk||(this.Vni=this.ta.xE()),this.yo(new A(this.LE,void 0))}))}};m4.Ld.registerWebImaAdPlayerConstructor((function(t,i,e){_4(e);const s=v4(e)?t.jk():void 0,n=new Y3(s,t.we),r=new X3(n,t.Uu),o=new K3(t);return new w4(t,i,e,t.Nnt,n,r,o)})),r(),r(),r();var xl=class extends Xt{get Gni(){return this.ta===this.Unt?this.x3t:this.Unt}ur(t,i,e,s,n){this.ta===this.x3t&&this.x3t.Wni(),(n||!s.KE||s.OE)&&this.ta.Pk()}CE(t,i){}EE(t){}Zni(t,i){const e=t-this.x3t.Hni;return super.CE(e,i)}Xni(t){return super.EE(t)}kE(){return this.Unt.bt}Ya(){return this.Unt.Ya()}_d(){return this.Unt._d()}vk(){const t=Mo.xn(this.Unt.vk()).Gb(this.x3t.Hni);if(this.qni())return t.ks();const i=Mo.xn(this.x3t.vk());let e=i;return w6(this.Unt)||(e=t.pP(i)),e=e.Sn(Mo.RP(0,this.xE())),e.ks()}xE(){return this.Kni(super.xE())}Kni(t){return this.ta===this.x3t?this.x3t.Jni+t:this.x3t.Hni+t}DE(){return this.$ni(super.xE())}$ni(t){return this.ta===this.x3t&&this.tri?new Date(this.tri.getTime()+1e3*t):this.Unt.NE}SE(){const t=Mo.xn(this.Unt.SE()).Gb(this.x3t.Hni);if(this.qni())return t.ks();const i=Mo.xn(this.x3t.SE());if(t.jn(t.V-1)<i.Cn(0))return i.ks();return t.pP(i).ks()}Gk(t){switch(t.type){case Zi.Eb:return this.yo(new A(this.Kni(t.currentTime),t.currentProgramDateTime)),!0;case Zi.mb:return this.yo(new ii(this.Kni(t.currentTime))),!0;case Zi.so:return this.yo(new fi(this.Kni(t.currentTime))),!0;case Zi.wb:return this.yo(new Se(this.Kni(t.currentTime))),!0;case Zi.qy:return this.yo(new fa(this.Kni(t.currentTime))),!0;case Zi.Mb:return this.yo(new Yr(this.Kni(t.currentTime))),!0;case Zi.bb:return this.yo(new aa(this.Kni(t.currentTime))),!0;case Zi.pb:return this.yo(new Pu(this.Kni(t.currentTime),t.playbackRate)),!0;case Zi.kb:return this.iri?(this.yo(new $e(this.Kni(t.currentTime),t.volume)),!0):(this.iri=!0,!0);case Zi.Hy:return this.yo(new Xe(this.Kni(t.currentTime),t.readyState)),!0;case E.iP:return this.yo(new vS(this.Kni(t.currentTime),t.readyState)),!0;case E.eP:return this.yo(new Eu(this.Kni(t.currentTime),t.readyState)),!0;case E.sP:return this.yo(new Cu(this.Kni(t.currentTime),t.readyState)),!0;case E.nP:return this.yo(new yu(this.Kni(t.currentTime),t.readyState)),!0;case E.lL:return this.yo(new cu(this.Kni(t.currentTime),t.readyState)),!0;case E.rP:return this.yo(new sD(this.Kni(t.currentTime))),!0;case E.oP:return this.yo(new te(this.Kni(t.currentTime))),!0;case Zi.Xy:return this.yo(new yG(this.Kni(t.currentTime),t.initDataType,t.initData)),!0}return super.Gk(t)}async gn(){await super.gn(!0)}constructor(t,i,e){super(e),this.iri=!0,this.Unt=t,this.x3t=i,this.tri=t.NE}};function J3(t,i){i.WE=t.WE,i.Nk=t.Nk,i.$E=t.$E}r();var $3=class extends xl{ur(t,i,e,s,n){super.ur(t,i,e,s,n),this.Gni.Rk();this.eri(i,e).style.flex="1"}ar(t,i,e){this.eri(i,e).style.flex="0"}constructor(t,i,e){super(t,i,e)}},t5=class extends $3{qni(){return!0}eri(t,i){return t}sri(t,i){return i}CE(t,i){return super.Zni(t,i)}EE(t){return super.Xni(t)}constructor(t,i){super(t,i,t)}},i5=class extends xl{qni(){return!1}ur(t,i,e,s,n){super.ur(t,i,e,s,n),this.iri=!1,this.ta.rri(),i.style.flex="1"}ar(t,i,e){this.ta.hri(),i.style.flex="0"}_d(){return this.ta._d()}constructor(t,i){super(t,i,i)}},e5=class extends $3{qni(){return!1}eri(t,i){return i}sri(t,i){return t}ur(t,i,e,s,n){super.ur(t,i,e,s,n);for(const t of[i,e])t.style.transition=""}ar(t,i,e){super.ar(t,i,e)}constructor(t,i){super(t,i,i)}};r(),r();var s5=class extends Dc{ma(){return new n5(this.interstitial.lrt())}constructor(t){super("ari"),this.interstitial=t}},n5=class extends Jr{constructor(t){super("interstitialupdate"),this.interstitial=t}},Qo=function(t){return t.SINGLE="SINGLE",t.DOUBLE="DOUBLE",t.LSHAPE_AD="LSHAPE_AD",t.LSHAPE_CONTENT="LSHAPE_CONTENT",t}({}),r5=class extends tu{get cri(){var t,i;const e=null!=(i=null!=(t=this.lri)?t:this.JM)?i:this.gBt;return void 0!==e?this.lB+e:this.TB?this.TB:void 0}get ct(){const t=this.cri;return void 0===t?void 0:t-this.lB}get i3t(){var t;return null!=(t=this.e3t)?t:0}dri(t){if(!this.ct)return;const i=(t-(this.lB+this.fri))/this.ct;i<this.i3t||(this.e3t=x.min(i,1),1===this.e3t&&(this.rk=!0))}Yn(t){var i,e,s,n;this.JM=null!=(i=t.ct)?i:this.JM,this.TB=null!=(e=t.dB)?e:this.TB,this.lri=null!=(s=t.gri)?s:this.lri,this.fri=null!=(n=t._ri)?n:this.fri,this.vri(),this.yo(new s5(this))}vri(){void 0===this.JM&&void 0!==this.TB?this.JM=this.TB-this.lB:void 0===this.TB&&void 0!==this.JM&&(this.TB=this.lB+this.JM)}constructor(t){super(),this.fri=0,this.rk=!1,this.o=t.o,this.lB=t.lB,this.TB=t.dB,this.gBt=t.DPt,this.JM=t.ct,this.lri=t.gri,this.Evt=t.Evt,this.wri=t.wri,this.vri()}};Qi(),r();var o5=class extends xl{qni(){return!0}ur(t,i,e,s,n){super.ur(t,i,e,s,n),J3(this.ta,this.Gni),this.Gni.WE=!0,t.style.backgroundImage="url('"+this.pri+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center",this.Ari=this.Unt.nt.AL.filter((t=>t.UI===ua.Jn));for(const t of this.Ari)t.UI=ua.Ch;for(const t of[i,e])t.style.flex="1",t.style.borderWidth="20px",t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}ar(t,i,e){for(const t of[i,e])t.style.flex="0",t.style.borderWidth="0px";var s;for(const t of null!=(s=this.Ari)?s:[])t.UI=ua.Jn;this.Ari=void 0}PE(){return this.Unt.PE()||this.x3t.PE()}BE(){return this.Unt.BE()||this.x3t.BE()}gk(){return x.min(this.Unt.fk,this.x3t.fk)}Pk(){this.Unt.Pk(),this.x3t.Pk()}Rk(){this.Unt.Rk(),this.x3t.Rk()}constructor(t,i,e){super(t,i,i),this.Ari=void 0,this.pri=e}};r();var h5=class extends xl{ur(t,i,e,s,n){super.ur(t,i,e,s,n);this.sri(i,e).style.visibility="hidden",this.Gni.Rk(),t.style.backgroundImage="url('"+this.pri+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center";const r=this.eri(i,e);r.style.flex="1",r.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        ";for(const t of[i,e])t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}ar(t,i,e){const s=this.eri(i,e);s.style.flex="0",s.style.transform="";this.sri(i,e).style.visibility=""}constructor(t,i,e,s){super(t,i,e),this.pri=s}},a5=class extends h5{qni(){return!0}eri(t,i){return t}sri(t,i){return i}constructor(t,i,e){super(t,i,t,e)}},u5=class extends h5{qni(){return!1}eri(t,i){return i}sri(t,i){return t}constructor(t,i,e){super(t,i,i,e)}};function c5(t){const i=h.createElement("div"),e=h.createElement("div");return function(t,i){let e;for(;$t(e=t.firstChild);)i.appendChild(e)}(t,i),Ea(t,"theo-ads-sgai-container"),Ea(i,"theo-ads-sgai-content-player"),Ea(e,"theo-ads-sgai-ad-player"),t.appendChild(i),t.appendChild(e),{contentElement:i,adElement:e}}function l5(t){const i=t.style;i.position="relative",i.backgroundColor="transparent",i.backgroundRepeat="no-repeat",i.backgroundAttachment="scroll",i.border="0 solid transparent",i.borderWidth="0px",i.flex="0"}function d5(t){const i=t.style;i.display="",i.backgroundColor="",i.backgroundRepeat="",i.backgroundAttachment="",i.border="",i.borderWidth="",i.flex="",i.transform="",i.transition="",i.backgroundImage="",i.backgroundSize="",i.backgroundPosition="",i.alignItems="",i.position=""}r(),Uc(),r(),r(),r();var f5=class extends Xt{},g5=class extends f5{ur(t,i){t.style.flex="1"}ar(t){t.style.flex="0"}constructor(t){super(t)}};r();var _5=class extends f5{ur(t,i){i.style.backgroundImage="url('"+this.pri+"')",i.style.backgroundSize="contain",i.style.backgroundPosition="center",t.style.flex="1",t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", "),t.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        "}ar(t){t.style.flex="0",t.style.transform=""}constructor(t,i){super(t),this.pri=i}};r();var v5=class extends Dc{ma(){return new w5(this.interstitial.lrt())}constructor(t){super("yri"),this.interstitial=t}},w5=class extends Jr{constructor(t){super("interstitialbegin"),this.interstitial=t}};function m5(t){return{get id(){return t.o},get duration(){return t.ct},get startTime(){return t.lB},get type(){return"adbreak"},get layout(){return function(t){switch(t){case Qo.SINGLE:return"single";case Qo.DOUBLE:return"double";case Qo.LSHAPE_CONTENT:case Qo.LSHAPE_AD:return"l-shape"}}(t.bri)},get ads(){return t.Vc.map((t=>t.lrt()))},get backdropUri(){return t.Mri}}}r(),r(),Qi(),r(),r();var p5=function(t){return t.image="image",t}({}),A5=function(t){return t.png="png",t.svg="svg",t}({}),y5=class extends r5{get YA(){return"overlay"}get rqt(){return this.Tri}get Sri(){return this.Nri}Yn(t){var i,e;this.Nri=null!=(i=t.imageUrl)?i:this.Nri,this.Tri=null!=(e=t.clickThrough)?e:this.Tri,super.Yn(t)}lrt(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get type(){return"overlay"},get id(){return t.o},get duration(){return t.ct},get startTime(){return t.lB},get clickThrough(){return t.rqt},get imageUrl(){return t.Sri},get position(){return function(t){return{get top(){return t.Wtt},get bottom(){return t.Gtt},get left(){return t.Vtt},get right(){return t.Ytt}}}(t.uo)},get size(){return function(t){return{get width(){return t.ji},get height(){return t.Ti}}}(t.Kb)}}}(this)}constructor(t){super(t),this.Iri=t.YA,this.uo=t.uo,this.Kb=t.Kb,this.Dri=t.Dri,this.Eri=t.Eri,this.mKt=t.mKt,this.Tri=t.kri}};Uc(),r();var b5=class extends r5{get YA(){return"adbreak"}get Vc(){return this.Dc}Yn(t){var i;t.ad&&this.Dc.push(t.ad),this.Mri=null!=(i=t.backdropUri)?i:this.Mri,super.Yn(t)}lrt(){var t;return null!=(t=this.Za)?t:this.Za=m5(this)}constructor(t){super(t),this.Dc=[],this.Xyt=t.Xyt,this.bri=t.bri||Qo.SINGLE,this.Mri=t.Lri}},M5="com.theoplayer.theoads.interstitial",T5="com.theoplayer.theoads.overlay",S5=class{get xri(){return this.Cri}jri(t){this.Ori=new EventSource(t),this.Ori.addEventListener("adbreak",this.Rri)}Pri(t){if(!Qa(this.zri,t)){this.zri.push(t);for(const i of t.AL)this.Bri(i);t.yn(zh.Hk,this.zn),t.yn(zh.qk,this.qn)}}Uri(t){if(Qa(this.zri,t)){ra(this.zri,t),t.fn(zh.Hk,this.zn),t.fn(zh.qk,this.qn);for(const i of t.AL)this.Qri(i)}}Bri(t){!this.Fri&&function(t){return t.Lt===z.MQ&&t.YA===El.DATE_RANGE}(t)&&this.Yri!==t?this.Vri(t):this.Fri&&function(t){return t.Lt===z.MQ&&t.YA===El.ID3}(t)&&this.Gri!==t&&this.Wri(t)}Qri(t){this.Yri===t?this.Vri(void 0):this.Gri===t&&this.Wri(void 0)}Vri(t){const i=this.Yri;if(void 0!==i){if(i.L)for(const t of i.L.AL)this.Zri(t);i.fn(hs.Jk,this.Hri),i.fn(hs.eL,this.Xri),i.fn(hs.nL,this.qri),i.fn(hs.tL,this.Kri),i.UI=ua.FL}if(this.Yri=t,void 0!==t){if(t.L)for(const i of t.L.AL)this.Jri(i);t.yn(hs.Jk,this.Hri),t.yn(hs.eL,this.Xri),t.yn(hs.nL,this.qri),t.yn(hs.tL,this.Kri),t.UI=ua.FL}}Wri(t){const i=this.Gri;if(void 0!==i){if(i.L)for(const t of i.L.AL)this.Zri(t);i.fn(hs.Jk,this.$ri),i.fn(hs.nL,this.qri),i.fn(hs.tL,this.Kri),i.UI=ua.FL}if(this.Gri=t,void 0!==t){if(t.L)for(const i of t.L.AL)this.toi(i);t.yn(hs.Jk,this.$ri),t.yn(hs.nL,this.qri),t.yn(hs.tL,this.Kri),t.UI=ua.FL}}ioi(t){const i=this.XOt.NE;if(void 0!==i)try{const n=JSON.parse(t.data);var e;const r=null!=(e=n.podDuration)?e:n.adBreakDuration;if(void 0===r)return void Fe.cA("Tried to schedule an ad break without knowing the duration");const o=(Date.parse(n.startDate)-i.getTime())/1e3;if(o<=-r)return;const h=this.XOt.xE()+o,a=n.networkCode,u=n.assetKey,c=n.podId?C(n.podId):void 0;let l="theo-ads://dai.break/?d="+r;var s;u&&(l+="&k="+u),a&&(l+="&n="+a);const d=new b5({o:t.id,lB:h,Xyt:null!=(s=n.assetURI)?s:l,bri:this.eoi||Qo[n.layout],DPt:r,wri:c,Lri:n.backdropURI,Evt:n.startPTS});this.soi(d,void 0)}catch(t){Fe.cA("Error parsing the Server sent event",t)}else Fe.cA("Tried to schedule an ad break without knowing the Program Date Time of the player")}Jri(t){if((t.NPt===M5||t.NPt===T5)&&t.EPt["X-ASSET-URI"])switch(t.NPt){case T5:try{var i;const e=atob(t.EPt["X-COM-THEOPLAYER-THEOADS-OVERLAY-PROPERTIES"]),s=JSON.parse(e),n=p5[s.type],r=this.XOt.noi(t.lB),o=new y5({o:t.o,YA:n||p5.image,lB:r,dB:isFinite(t.dB)?t.dB:void 0,ct:t.ct,DPt:t.DPt,uo:I5(s.position),Kb:D5(s.size),Dri:s.opacity,Eri:N5(s.gamProperties),mKt:null==(i=s.resourceURI)?void 0:i.map((t=>function(t){const i=A5[t.type];let e=t.default;Ro.Qs&&t.phone?e=t.phone:Ro.dg&&t.tv&&(e=t.tv);return{YA:i,Xyt:e}}(t))),kri:s.clickThroughURI});this.soi(o,t)}catch(t){Fe.cA(t)}break;case M5:{const i=t.EPt["X-RESUME-OFFSET"],e=this.roi||t.EPt["X-ASSET-URI"],s=this.XOt.noi(t.lB);let n;(function(t){return I(t,"theo-ads://dai.break")})(e)&&(n=function(t){const i=t.split("?")[1],e={},s=new URLSearchParams(i);return e.d=Number(s.get("d"))||void 0,e.k=s.get("k")||void 0,e.n=s.get("n")||void 0,e.p=Number(s.get("p"))||void 0,e}(e));const r=new b5({o:t.o,lB:s,Xyt:e,bri:this.eoi||Qo[t.EPt["X-COM-THEOPLAYER-THEOADS-LAYOUT"]]||Qo.SINGLE,Lri:t.EPt["X-COM-THEOPLAYER-THEOADS-BACKDROP"],dB:isFinite(t.dB)?t.dB:void 0,ct:t.ct,DPt:t.DPt,wri:null==n?void 0:n.p,gri:void 0!==i?Number(i):void 0});this.soi(r,t),this.ooi=r}}}toi(t){const i=t.U;if(!function(t){return"GEO"===t.id||"GEOB"===t.id}(i)||!function(t){return"Anvatos"===t.description&&"application/json"===t.mimeType}(i))return;const e=qo(new DataView(i.data),new da),s=new qh(e),n=s.get("type");if("cue"===n){let i=Number(s.get("duration"))/1e3||void 0;const e=new qh(s.get("payload")),n=Number(e.get("dur"))||void 0,r=Number(e.get("s_bd"))||void 0;if(void 0!==n?i=n:void 0!==r&&(i=r/10),!i)return void 0;const o="theo-ads://dai.break/?d="+i,h=Number(s.get("pts"))||void 0,a=this.XOt.noi(t.lB),u=new b5({o:this.roi||t.o,lB:a,Xyt:o,bri:this.eoi||Qo.SINGLE,DPt:i,Evt:h});this.soi(u,t)}else if("cue_end"===n){const i=this.ooi;i&&i.Yn({ct:t.lB-i.lB})}}hoi(t){this.aoi.get(t.zL)&&this.XOt.uoi(t.lB)}coi(t){for(const i of this.Cri)if(t.o===i.o&&t.YA===i.YA)return!0;return!1}soi(t,i){this.coi(t)||(this.Cri.push(t),i&&this.aoi.set(i.zL,t),this.XOt.soi(t))}loi(t){const i=this.aoi.get(t.zL);if(void 0===i)return;const e=t.EPt["X-RESUME-OFFSET"];i.Yn({ct:t.ct,dB:isFinite(t.dB)?t.dB:void 0,gri:void 0!==e?Number(e):void 0})}Zri(t){this.doi(t)}doi(t){void 0!==this.aoi.get(t.zL)&&this.aoi.delete(t.zL)}foi(t){ra(this.Cri,t)}tr(){var t,i;this.ooi=void 0,this.Vri(void 0),this.Wri(void 0);for(const t of this.zri.slice())this.Uri(t);nt(this.zri),nt(this.Cri),this.aoi.clear(),null==(t=this.Ori)||t.removeEventListener("adbreak",this.Rri),null==(i=this.Ori)||i.close(),this.Ori=void 0}gn(){this.tr()}constructor(t){this.Fri=!1,this.Cri=[],this.aoi=gc(),this.zri=[],this.zn=t=>{this.Bri(t.Ht)},this.qn=t=>{this.Qri(t.Ht)},this.Hri=t=>{this.Jri(t.uB)},this.$ri=t=>{this.toi(t.uB)},this.qri=t=>{this.hoi(t.uB)},this.Kri=t=>{this.Zri(t.uB)},this.Xri=t=>{this.loi(t.uB)},this.Rri=t=>{this.ioi(t)},this.XOt=t}};function N5(t){if(!t)return;let i=t.sz.default;return Ro.Qs&&t.sz.phone?i=t.sz.phone:Ro.dg&&t.sz.tv&&(i=t.sz.tv),{goi:t.iu,_oi:i}}function I5(t){let i,e,s,n;return t.top&&t.top>=0&&t.top<=100?i=t.top:t.bottom&&t.bottom>=0&&t.bottom<=100?e=t.bottom:i=10,t.left&&t.left>=0&&t.left<=100?s=t.left:t.right&&t.right>=0&&t.right<=100?n=t.right:s=10,{Wtt:i,Gtt:e,Vtt:s,Ytt:n}}function D5(t){let i,e;return i=t.width&&t.width>=0&&t.width<=100?t.width:10,e=t.height&&t.height>=0&&t.height<=100?t.height:10,{ji:i,Ti:e}}r(),Qi(),r(),r(),r(),r(),r();var E5=class extends kZ{start(t){super.start(t);for(const t of this.prependPackets)this.fLt(t)}constructor(t=[]){super(),this.prependPackets=t}};function k5(t){return t.YA===Rt.mC}var L5=class extends E5{transform(t){this.bLt.push(t),t.YA===Rt.kx?(this.KM=function(t){const i=pe.dj(t.rI.rI)[0];if((null==i?void 0:i.YA)!==Rt.kx)throw new b("Not able to parse Moov Box");if(0===i.Z.length)throw new b("Tracks not found");return i.Z[0].zj.nj.xj}(t),this.voi(this.bLt.splice(0),el.INITIALIZER)):t.YA===Rt.SC&&this.voi(this.bLt.splice(0),el.FRAMES)}voi(t,i){const e={xj:this.KM,gX:this.kX},s=ih(t.map((t=>ka(t.rI.rI)))),n=dl(t,k5),r={RI:this.Ict,Vb:e,ilt:s,YA:i,ct:this.woi(n)/e.xj,Evt:os(this.moi(n),e.xj)};this.fLt(r)}woi(t){if(!t||!this.KM)return 0;const i=pe.dj(t.rI.rI)[0].Z[0];if(!i||0===i.bR.length)return 0;const e=i.nj.dR||0;return i.bR[0].kR.reduce(((t,i)=>{var s;return t+(null!=(s=i.ct)?s:e)}),0)}moi(t){var i;if(!t||!this.KM)return D.UZERO;var e;return null!=(e=null==(i=pe.dj(t.rI.rI)[0].Z[0].MR)?void 0:i.MR)?e:D.UZERO}poi(t){t.YA===el.INITIALIZER&&(this.KM=t.Vb.xj)}constructor(t,i=[],e=!1){super(e?i:[]),this.kX=t,this.bLt=[],this.Ict=this.kX.match(/video/)?gt.NI:gt.SI;for(const t of i)this.poi(t)}};r();var x5="audio/x-theoplayer-fake-json-segment",C5="video/x-theoplayer-fake-json-segment";var j5=1e-6;var O5=class{write(t){if(t.YA===el.FRAMES){const i=t.Vb.xj,e=hj(Al(t.ilt),void 0,i);if(void 0===e)return;this.cM.Aoi(e,t.ct)}else if(t.YA===el.INITIALIZER){const i=new Bt(Al(t.ilt),new da),e=Qe.ej(i,Rt.kx),s=e?pe.pj(e):[];if(s.length){const t=ih(s.map((t=>new T(t.YR))));this.cM.yo(new yw(dv,t))}}}constructor(t){this.cM=t}},R5=class t extends tu{get TE(){return this.QDt}get md(){return this.KS}get E3(){return this.L3}get x3(){return this.FDt}get PK(){return this.WK}set PK(t){this.WK=t}get QK(){return this.XK}set QK(t){this.XK=t}B4(t,i,e){return this.yoi=i.rQ,this.boi((i=>this.Moi(t,i)),e)}Moi(t,i){switch(this.WS){case"audio/mp4":case"video/mp4":return this.Toi(t,i);case x5:case C5:return this.Soi(t,i);default:return Promise.reject(new k("Unknown content type: "+this.WS))}}async Toi(t,i){yi(i);const e=function(t){switch(t.YA){case Me.v$:return Yy(t.rI);case Me.jN:return t.rI;case Me.w$:throw new b("HeadlessMediaBuffer - Cannot convert opaque SegmentData to Stream.")}}(t);await e.pipeThrough(new La(new jZ)).pipeThrough(new La(this.Noi)).pipeTo(new Qy(this.Ioi),{preventClose:!0,preventAbort:!0})}async Soi(t,i){yi(i);const e=function(t){return JSON.parse(tr(t))}(await function(t,i){switch(t.YA){case Me.v$:return Promise.resolve(t.rI);case Me.jN:return Gy(t.rI,i).then((t=>ih(t)));case Me.w$:return Promise.reject(new b("HeadlessMediaBuffer - Cannot convert opaque SegmentData to Uint8Array."))}}(t,i));this.Aoi(e.startTime,e.duration)}P3(){return Promise.resolve()}F4(t,i,e){return this.boi((i=>this.Moi(t,i)),e)}F$(){return this.Ist}I3(){this.Ist=!0}w3(){this.Ist=!1}O3(t,i){this.FDt=this.FDt.pP(new Mo([t,i])).mP(j5)}wS(t,i,e){return this.boi((e=>{yi(e),this.QDt=this.QDt.yP(new Mo([t,i])),this.yo(new Jr(po.g$))}),e)}s3(t,i){return this.boi((()=>{this.Doi=new Mo([t,i])}))}R3(t,i){this.FDt=this.FDt.yP(new Mo([t,i]))}Aoi(t,i){const e=this.yoi+t,s=new Mo([e,e+i]).Sn(this.Doi);this.QDt=this.QDt.pP(s).mP(j5),this.yo(new Jr(po.g$)),this.Eoi()}koi(){return this.Loi}Eoi(){const t=this.QDt,i=t.V>0?t.jn(this.QDt.V-1):0;this.Loi!==i&&(this.Loi=i,this.yo(new yt(i)))}N$(i){if(!t.H$(i))return!1;const e=Yn(i.VN);return this.WS===e.YA}D$(t){return this.KS=t,this.WS=Yn(t.VN).YA,ZA(this.WS)?this.Noi=new L5(t.VN):this.Noi=void 0,Promise.resolve()}async boi(t,i){if(this.xoi)throw new b("Attempted to start concurrent buffer mutation");const e=new Wt;e.Sy(this.y3.ly),i&&e.Sy(i);try{this.xoi=Promise.resolve(t(e.ly)),await this.xoi}finally{this.xoi=void 0}}wy(){this.Bo(),this.y3.Ty()}static H$(t){switch(Yn(t.VN).YA){case"audio/mp4":case"video/mp4":case x5:case C5:return!0;default:return!1}}constructor(t,i){super(),this.Loi=0,this.Ist=!1,this.QDt=Mo.PP(),this.FDt=Mo.PP(),this.XK=30,this.WK=30,this.yoi=0,this.Noi=void 0,this.Ioi=new O5(this),this.xoi=void 0,this.Doi=new Mo([0,1/0]),this.y3=new Wt,this.KS=t,this.WS=Yn(t.VN).YA,ZA(this.WS)&&(this.Noi=new L5(t.VN)),this.L3=i}},P5=class t extends tu{get p5(){return this.y5}get A5(){return this.b5}get TE(){return Nj(this)}get x3(){var t,i,e,s;return(null!=(e=null==(t=this.y5)?void 0:t.x3)?e:Mo.PP()).pP(null!=(s=null==(i=this.b5)?void 0:i.x3)?s:Mo.PP())}get md(){return this.KS}get ct(){return this.JM}get F$(){return(!this.y5||this.y5.F$())&&(!this.b5||this.b5.F$())}get _k(){return this.I5.Q3().Sn(new Mo([0,this.ct],[!0,!0]))}get w8(){return this.Coi}wy(){var t,i;return this.Bo(),null==(t=this.b5)||t.wy(),null==(i=this.y5)||i.wy(),this.y5=void 0,this.b5=void 0,this.JM=NaN,Promise.resolve()}T5(t){this.JM!==t&&(this.JM=t,this.yo(new yt(t)))}koi(){let t=0;return this.y5&&(t=x.max(t,this.y5.koi())),this.b5&&(t=x.max(t,this.b5.koi())),t}D5(t,i,e,s){this.I5=new Xu(t,i,Boolean(e),Boolean(s))}I3(){this.y5&&this.y5.I3(),this.b5&&this.b5.I3(),this.joi()}w3(){this.y5&&this.y5.w3(),this.b5&&this.b5.w3()}N$(i){if(!t.H$(i))return!1;const e=dl(i.E5,(t=>I(t.VN,"audio"))),s=dl(i.E5,(t=>I(t.VN,"video")));return!(this.y5&&e&&!this.y5.N$(e))&&!(this.b5&&s&&!this.b5.N$(s))}async D$(t){this.KS=t;const i=dl(t.E5,(t=>I(t.VN,"audio"))),e=dl(t.E5,(t=>I(t.VN,"video")));this.y5?i?await this.y5.D$(i):(this.y5.wy(),this.y5=void 0):i&&(this.y5=new R5(i,Ri.SI),this.y5.yn(Zi.Zy,this.joi)),this.b5?e?await this.b5.D$(e):(this.b5.wy(),this.b5=void 0):e&&(this.b5=new R5(e,Ri.NI),this.b5.yn(Zi.Zy,this.joi));const s=this.Coi;0===t.yV.length?this.Coi=void 0:s&&!t.yV.some((t=>t.NS===s))&&(this.Coi=t.yV[0].NS)}k$(t){}static H$(t){return t.E5.every((t=>R5.H$(t)))}constructor(t){var i;super(),this.y5=void 0,this.b5=void 0,this.JM=NaN,this.I5=new Xu(0,1/0),this.Coi=void 0,this.joi=()=>{let t;t=this.F$?this.koi():x.max(this.JM||0,this.koi()),this.T5(t)},this.KS=t;const e=dl(t.E5,(t=>I(t.VN,"audio"))),s=dl(t.E5,(t=>I(t.VN,"video")));e&&(this.y5=new R5(e,Ri.SI),this.y5.yn(Zi.Zy,this.joi)),s&&(this.b5=new R5(s,Ri.NI),this.b5.yn(Zi.Zy,this.joi)),this.Coi=null==(i=t.yV[0])?void 0:i.NS}};Qi(),r(),Qi();var z5=class{I9(t){return Fe.Pg(t,16)}k9(t){Fe.Rg(t)}},B5=class extends tu{get TE(){var t,i;return null!=(i=null==(t=this.vV)?void 0:t.TE)?i:Mo.PP()}get LE(){return this.Q8?this.Q8.LE:this.Ooi/1e3}get Uu(){return this.Xu}get ct(){var t,i;return this.Q8?this.Q8.ct:null!=(i=null==(t=this.vV)?void 0:t.ct)?i:NaN}get OE(){return this.Q8?this.Q8.OE:this.W5}get lt(){}get FE(){return!1}get Roi(){return this.vV}get WE(){return this.Q8?this.Q8.WE:this.xG}set WE(t){this.Q8?this.Q8.WE=t:this.xG!==t&&(this.xG=t,this.yo(new $e(this.LE,this.cT)))}get KE(){return this.Q8?this.Q8.KE:this.CG}get $E(){return this.Q8?this.Q8.$E:this.jG}set $E(t){this.jG!==t&&(this.Yn(),this.jG=t,this.yo(new Pu(this.LE,t)))}get fk(){return this.Z5}get _k(){var t;return(null==(t=this.vV)?void 0:t._k)||Mo.PP()}get wk(){return this.Q8?this.Q8.wk:this.kG}get V5(){return this.Q8?this.Q8.V5:this.G5}get e6(){return!1}get wV(){}get Nk(){return this.Q8?this.Q8.Nk:this.cT}set Nk(t){this.Q8?this.Q8.Nk=t:this.cT!==t&&(this.cT=t,this.yo(new $e(this.LE,t)))}get NE(){}get Ti(){return this.Xu.Tu}get rk(){let t=this.Fo;return!this.Q8&&this.D1t&&(t=t.pP(new Mo([this.T1t,this.LE]))),t}get t7(){return this.IG}get ji(){return this.Xu.Su}get wa(){return this.Zo}get xV(){return this.Qo}get xtt(){return!0}get mz(){return gC}GE(){return{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}H$(t){for(const i of t)if(i.YA===uh.FQ&&P5.H$(i))return i}async wy(){this.Bo(),await this.tr(),this.CQ.gn()}$n(t){if(t.YA===uh.FQ){const i=new P5(t);this.Poi(i),this.vV=i,Fe.Pg((()=>{this.vV===i&&(this.yo(new ms),this.Yn())}),0);const e=new iU(i);return e.uot=this,Promise.resolve(e)}return Promise.reject(new b("Unsupported configuration"))}Rk(){this.Q8?this.Q8.Rk():this.zoi(),this.Yn()}zoi(){this.CG=!0,void 0!==this.Boi&&(Fe.fA(this.Boi),this.Boi=void 0),this.yo(new Se(this.LE))}async Pk(){const t=this.zy(E.oP);this.Q8?this.Q8.Pk():this.Uoi(),await t}Uoi(){this.CG&&(this.Yn(),this.CG=!1,this.W5&&(this.Ooi=0),this.yo(new fi(this.LE)),this.Yn(),void 0===this.Boi&&(this.Boi=Fe.dA(this.Qoi,20)))}async tr(){void 0!==this.Boi&&(Fe.fA(this.Boi),this.Boi=void 0),this.vV&&(await this.vV.wy(),this.vV=void 0),this.yo(new yt(NaN)),this.Ooi=0,this.T1t=0,this.Foi=-1/0,this.W5=!1,this.Fo=Mo.PP(),this.D1t=!1,this.G5=!1,this.yo(new A(0,void 0)),this.kG&&(this.kG=!1,this.yo(new aa(0))),this.CG||(this.yo(new Se(0)),this.CG=!0),1!==this.jG&&(this.jG=1,this.yo(new Pu(0,1))),this.Z5!==Fn.Nz&&(this.Z5=Fn.Nz,this.yo(new cu(0,Fn.Nz)))}Wb(t,i,e){if(void 0===i&&(i=!1),void 0===e&&(e=!1),this.Q8)return void this.Q8.Wb(t,i,e);this.Fo=this.rk;const s=this.vV?this.vV._k.gP(t):t;this.T1t=s,this.Ooi=1e3*s,this.Y5=i,e&&!this.kG?(this.G5=!0,this.yo(new Iu(s))):(this.G5=!1,this.kG=!0,this.yo(new Yr(s))),this.Yn()}be(){this.IG=!1}get nt(){return this.CQ.nt}get Ll(){return this.FG}Wk(t,i,e,s,n,r,o,h){return this.CQ.Wk(t,i,e,s,n,r,o,h)}CV(t){return this.CQ.CV(t)}DV(){return!1}kV(){throw new b("Sideloaded native text tracks are not supported")}BQ(t){this.CQ.BQ(t)}jV(){this.CQ.tr()}cV(){}ge(){this.IG=!0}jtt(){}ktt(){this.Q8||(void 0!==this.Boi&&(Fe.fA(this.Boi),this.Boi=void 0),this.Fo=this.rk,this.Q8=Rj(this),this.Q8.yn(jj,this.Ds))}Ltt(){if(!this.Q8)return;const t=this.Q8;this.Q8=void 0,Pj(this,t),t.wy(),this.Yn(),this.CG||void 0!==this.Boi||(this.Boi=Fe.dA(this.Qoi,20))}get yk(){return 0}get Tk(){return 0}get zV(){return this.SV}set zV(t){this.SV=t}get w8(){var t;return null==(t=this.vV)?void 0:t.w8}Yn(){var t,i;if(this.Q8)return;const e=Fe.Og(),s=j(this.Yoi)?0:e-this.Yoi;this.Yoi=e;let n=!1;var r;const o=null!=(r=null==(t=this.vV)?void 0:t.TE)?r:Mo.PP();var h;const a=null!=(h=null==(i=this.vV)?void 0:i.x3)?h:Mo.PP();this.CG||(this.Ooi=this.Voi(s,o,a));const u=cU(o,a).fP().CP(this.LE);var c;const l=1e3*x.min(null!=(c=null==u?void 0:u.jn(0))?c:0,this.ct);this.Goi<l&&(this.Goi=l,this.yo(new ii(this.LE)));const d=this.Woi(u,l);d!==this.Z5&&(this.Z5=d,this.yo(new cu(this.LE,this.Z5))),n=this.Zoi(n),this.p1t(),n=this.rJ(n),!n&&this.D1t&&this.Foi+250<e&&(n=!0,this.yo(new A(this.LE,void 0))),n&&(this.Foi=e)}Voi(t,i,e){let s=this.Ooi,n=t*this.jG;const r=1e3*this.ct;for(;;){const t=e.CP(s/1e3);if(void 0!==t&&i.gr(t.jn(0))&&(s=1e3*t.jn(0)),(this.kG||this.G5)&&this.Y5){const t=s/1e3,e=Dj(i,t,1);if(e!==t){s=1e3*e;break}}if(this.kG||this.G5)break;if(n<=0)break;const o=i.CP(s/1e3);if(void 0===o)break;{const t=x.min(1e3*o.jn(0),r),i=x.min(n,t-s);if(!(i>0))break;s+=i,n-=i}}return s}Woi(t,i){return this.vV?t?this.vV&&this.vV.F$&&i===1e3*this.vV.ct?this.Ooi===i?Fn.Iz:Fn.Ez:this.Ooi===i?Fn.Iz:Fn.Dz:Fn.Xn:Fn.Nz}Zoi(t){let i=t;if(this.Z5>=Fn.Iz){const t=this.kG,e=this.G5;this.kG=!1,this.G5=!1,i||!t&&!e||(i=!0,this.yo(new A(this.LE,void 0))),t?this.yo(new aa(this.LE)):e&&this.yo(new SR(this.LE))}return i}p1t(){const t=this.D1t,i=this.Hoi();!t&&i?(this.D1t=!0,this.yo(new te(this.LE))):t&&!i&&(this.Fo=this.rk,this.D1t=!1)}Hoi(){return!this.wk&&!(this.KE||this.OE||this.lt||this.i6())}i6(){return this.fk<Fn.Dz}rJ(t){let i=t;return this.vV&&this.vV.F$&&this.LE===this.ct?this.W5||(this.W5=!0,i||(i=!0,this.yo(new A(this.LE,void 0))),this.zoi(),this.yo(new fa(this.LE))):this.W5=!1,i}Poi(t){var i,e;null==(i=t.A5)||i.yn(po.g$,this.Xoi),null==(e=t.p5)||e.yn(po.g$,this.Xoi),t.yn(Zi.Zy,this.qoi)}constructor(){super(),this.Q8=void 0,this.SV=void 0,this.Ooi=0,this.Xu=new HL,this.W5=!1,this.Zo=new ut,this.Qo=new tk,this.Goi=0,this.T1t=0,this.Foi=-1/0,this.Yoi=NaN,this.vV=void 0,this.xG=!1,this.CG=!0,this.jG=1,this.Fo=Mo.PP(),this.D1t=!1,this.Z5=Fn.Nz,this.kG=!1,this.Y5=!1,this.G5=!1,this.FG=new UR,this.Boi=void 0,this.IG=!0,this.cT=1,this.Qoi=()=>{this.Yn()},this.Xoi=()=>{this.Yn()},this.qoi=()=>{this.Q8||(this.Yn(),this.yo(new yt(this.vV.ct)))},this.CQ=new XB(this,new z5)}},U5=class{async Koi(t){this.cFt&&await this.cFt,this.Joi.KUt||await this.Joi.sQt(t),void 0===this.$oi&&this.thi(),await this.Joi.lQt(this.$oi,t)}thi(){for(const t of this.Joi.Tr.JRt)0!==t.tPt.length&&(this.$oi=t.tPt[0])}get nt(){return this.QGt.nt}gn(){var t;this.Unt.fn(Zi.fb,this.ihi),null==(t=this.fFt)||t.Ty(),this.Joi.wy()}constructor(t,i,e,s){this.ihi=()=>{this.cFt=this.Koi(this.fFt.ly).catch(this.ehi)},this.ehi=t=>{0},this.Unt=t;const n=new S$,r=new B5;this.Joi=new _K(e,n,!1,i,void 0),this.QGt=new AK(this.Joi,r),this.fFt=new Wt,this.fFt.Sy(s),this.Unt.yn(Zi.fb,this.ihi)}};r();var Q5=class extends tu{get shi(){return this.ta.shi.map((t=>t.lrt()))}get nhi(){return this.ta.nhi.map((t=>t.lrt()))}rhi(t){this.ta.ohi(t)}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get currentInterstitials(){return t.shi},get scheduledInterstitials(){return t.nhi},replaceAdTagParameters(i){t.rhi(i)},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}(this)}constructor(t){super(),this.ta=t}};r(),r(),bs();var F5=Promise;Uc(),r();var Y5=class extends _2{hhi(t){this.Dc.push(t)}get rk(){return this.ahi.rk}get wJt(){return ah.Knt}get $$t(){var t;return null!=(t=this.ahi.ct)?t:-1}get lzt(){return this.ahi.lB}get D$t(){}get uhi(){return this.ahi}constructor(t){var i;super(t.lB),this.ahi=t,this.t0t=null!=(i=this.ahi.ct)?i:-1}},V5=function(t){return t[t.GOOGLE=0]="GOOGLE",t[t.DEFAULT=1]="DEFAULT",t}({}),G5=class extends tu{get s0t(){return this.D0t}get lhi(){return this.dhi}get drt(){return this.I0t}get f7t(){return this.w0t}fhi(){this.ghi()}soi(t){const i=new Y5(t);this.D0t.push(i)}foi(t){const i=this.I3t(t);ra(this.D0t,i)}I3t(t){return dl(this.D0t,(i=>i.uhi===t))}_hi(){this.x3t.yn(Zi.ub,this.vhi),this.x3t.yn(E.eP,this.whi),this.x3t.yn(Zi.qy,this.mhi),this.x3t.yn(Zi.Eb,this.C9)}ghi(){this.x3t.fn(Zi.ub,this.vhi),this.x3t.fn(E.eP,this.whi),this.x3t.fn(Zi.qy,this.mhi),this.x3t.fn(Zi.Eb,this.C9)}ld(t){var i;null==(i=this.dhi)||i.dri(this.Kni(t.currentTime))}async phi(t,i,e,s){const n={stack:[],error:void 0,hasError:!1};try{var r;this._hi(),null==(r=this.zQ)||r.Ty();const o=Ne(n,Wt.Iy([i]),!1);this.zQ=o;const h=o.ly;return yi(h),await this.x3t.ka(tl(t),h),Ro.Ka&&Ro.qf&&(this.x3t.Pk(),this.x3t.Rk()),e&&this.x3t.CE(e),s&&this.x3t.Pk(),await F5.race([this.zy("aderror",h).then(F5.reject),this.zy("adloaded",h).then((()=>F5.resolve()))])}catch(t){n.error=t,n.hasError=!0}finally{qr(n)}}Cd(t){this.dhi&&(this.dhi.dri(t),this.dhi.rk=!0,this.foi(this.dhi),this.dhi=void 0),this.w0t&&(this.z3t.yo(new dB(this.w0t,t)),this.w0t=void 0),this.I0t&&(this.z3t.yo(new Zu(this.I0t)),this.I0t=void 0),this.ghi()}Kni(t){var i,e;return(null!=(e=null==(i=this.dhi)?void 0:i.lB)?e:0)+t}async tr(){var t;null==(t=this.zQ)||t.Ty(),this.zQ=void 0,this.ghi(),this.D0t=[],this.w0t=void 0,this.I0t=void 0,this.dhi=void 0}async gn(){await this.tr(),await this.Ahi.gn()}constructor(t,i,e){super(),this.z3t=new Yt,this.D0t=[],this.C9=t=>{this.ld(t)},this.mhi=()=>{this.ghi(),this.x3t.zk()},this.vhi=()=>{this.yo(new Jr("adloading"))},this.whi=()=>{this.yo(new Jr("adloaded"))},this.x3t=t,this.Ahi=i,this.D0t=e,this.Ahi.yhi(this),this.z3t=i.v4t}};r();var W5=class{yhi(t){this.bhi=t}get v4t(){return this.z3t}get N4t(){var t;return void 0!==(null==(t=this.bhi)?void 0:t.drt)}get d4t(){return ah.Knt}get crt(){var t;return(null==(t=this.bhi)?void 0:t.f7t)?[this.bhi.f7t]:[]}get drt(){var t,i;return null!=(i=null==(t=this.bhi)?void 0:t.drt)?i:null}get frt(){return this.bhi?Ms(this.bhi.s0t,(t=>{var i;const e=t.Vc;if(t===(null==(i=this.bhi)?void 0:i.drt)&&void 0!==this.bhi.f7t){const t=e.indexOf(this.bhi.f7t);if(t>=0)return e.slice(t+1)}return t.rk?[]:e})):[]}get grt(){return this.bhi?this.bhi.s0t.filter((t=>{var i;return t===(null==(i=this.bhi)?void 0:i.drt)||!t.rk})):[]}ZC(){}vrt(t){}gn(){return this.bhi=void 0,Promise.resolve(void 0)}constructor(){this.z3t=new Yt}};r();var Z5=class{rhi(t){this.theoAdsPlayer.ohi(t)}get ga(){return function(t){return{replaceAdTagParameters(i){t.rhi(i)}}}(this)}constructor(t){this.theoAdsPlayer=t}},H5=class extends tB{get Znt(){return this.Mhi}constructor(t,i){super(i),this.Mhi=new Z5(t)}};r(),Qi();var X5=class{get shi(){return this.Thi}get Shi(){return this.Nhi}get Ihi(){return this.Dhi}set Ihi(t){this.Dhi=t}async Ehi(t){this.Thi.push(t),this.Nhi.style.display="";const i=h.createElement("div");i.className="theoplayer-theoads-overlay",i.style.display="",this.khi.set(t.o,i);const e=h.createElement("a"),s=await this.Lhi(t);if(s.clickThroughURI&&(this.Nhi.style.zIndex="11",e.href=s.clickThroughURI,e.target="Vu",e.setAttribute("rel","noopener"),e.addEventListener("mousedown",this.eii),e.addEventListener("touchend",this.eii)),t.Iri===p5.image&&(e.style.backgroundImage="url("+s.resourceURI+")",e.style.backgroundSize="contain",e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",s.impressionURI)){const t=h.createElement("img");t.src=s.impressionURI,t.style.display="none",e.appendChild(t)}pc(e),i.appendChild(e),i.style.cssText=this.xhi(t),this.Nhi.appendChild(i)}Chi(t){const i=this.khi.get(t.o);i&&(this.Nhi.contains(i)&&this.Nhi.removeChild(i),this.khi.delete(t.o),0===this.khi.size&&(this.Nhi.style.display="none"),ra(this.Thi,t))}jhi(){this.khi.forEach(((t,i)=>{this.Nhi.contains(t)&&this.Nhi.removeChild(t)})),this.khi.clear(),this.Thi=[]}xhi(t){const i=t.uo;let e=0,s=1;if(this.Nhi.clientWidth>0&&this.Nhi.clientHeight>0){const t=this.ta.Tk/this.ta.yk,i=this.Shi.clientWidth,n=this.Shi.clientHeight,r=i/t,o=(n-r)/2;e=0===n?0:x.floor(o/n*100),s=0===n?1:x.floor(100*(1-(n-r)/n))/100}let n="position:absolute;zIndex:10;";if(i.Vtt&&(n+="left:"+i.Vtt+"%;"),i.Ytt&&(n+="right:"+i.Ytt+"%;"),i.Wtt){n+="top:"+(i.Wtt*s+e)+"%;"}if(i.Gtt){n+="bottom:"+(i.Gtt*s+e)+"%;"}const r=t.Kb;return r.ji&&(n+="width:"+r.ji+"%;"),r.Ti&&(n+="height:"+r.Ti*s+"%;"),t.Dri&&t.Dri>0&&t.Dri<=100&&(n+="opacity:"+t.Dri/100+";"),n}async Ohi(t){if(!t)return;const i=this.Rhi(t);return i?await this.Phi(i,this.OQ):void 0}async Lhi(t){const i={resourceURI:""},e=await this.Ohi(t.Eri);if(e)i.resourceURI=e.image,i.impressionURI=e.impression;else if(t.mKt){const e=dl(t.mKt,(t=>t.YA===A5.svg));e&&(i.resourceURI=e.Xyt);const s=dl(t.mKt,(t=>t.YA===A5.png));s&&(i.resourceURI=s.Xyt)}var s;return i.clickThroughURI=null!=(s=null==e?void 0:e.clickThrough)?s:t.rqt,t.Yn({imageUrl:i.resourceURI,clickThrough:i.clickThroughURI}),i}Rhi(t){const i=new qh(this.Dhi);return i.set("iu",t.goi),i.set("sz",t._oi),i.set("c",String(this.zhi)),"https://securepubads.g.doubleclick.net/gampad/adx?"+i.toString()}async Phi(t,i){const e=new Gs({zu:t,oI:Ee.CN,xI:Ve.GET});try{const t=await i.hI(e);return await t.rI()}catch(t){throw new Ie(Nr.NETWORK,$u.UNKNOWN_AD_RESPONSE,"The ad source could not be loaded.",t)}}tr(){this.jhi(),this.Nhi.style.display="none"}constructor(t,i,e){this.Thi=[],this.khi=ll(),this.zhi=(new Date).getTime(),this.Bhi=()=>{this.Thi.forEach((t=>{this.khi.get(t.o).style.cssText=this.xhi(t)}))},this.eii=t=>{t.stopPropagation()},this.ta=t,this.ta.yn(ZL.pn,this.Bhi);const s=h.createElement("div");s.style.display="none",s.className="theoads-image-overlays-container",i.appendChild(s),pc(s),this.Nhi=s,this.Uhi=e,this.OQ=Fe.wE}};r();function q5(t){return t&&t.integration===Si.THEOADS}mk.Ld.tW(new class{get a4t(){return ah.Knt}$G(t){return q5(t)}u4t(t,i,e){}I9(t,i,e,s){}fH(t){const i={integration:Si.THEOADS,adTagParameters:Z(t.adTagParameters)?t.adTagParameters:{},useId3:Boolean(t.useId3)};return Ic(t.sources)&&(i.sources=Q(t.sources)),Ic(t.networkCode)&&(i.networkCode=Q(t.networkCode)),Ic(t.customAssetKey)&&(i.customAssetKey=Q(t.customAssetKey)),Ic(t.backdropDoubleBox)&&(i.backdropDoubleBox=Q(t.backdropDoubleBox)),Ic(t.backdropLShape)&&(i.backdropLShape=Q(t.backdropLShape)),Ic(t.overrideLayout)&&(i.overrideLayout=function(t){switch(t){case"single":case"l-shape":case"double":case"single-if-mobile":return t;default:return}}(t.overrideLayout)),Ic(t.overrideAdSrc)&&(i.overrideAdSrc=Q(t.overrideAdSrc)),Ic(t.retrievePodIdURI)&&(i.retrievePodIdURI=Q(t.retrievePodIdURI)),Ic(t.sseEndpoint)&&(i.sseEndpoint=Q(t.sseEndpoint)),Ic(t.streamActivityMonitorId)&&(i.streamActivityMonitorId=Q(t.streamActivityMonitorId)),i}}),bs(),Qi(),r();var K5=class extends Jr{constructor(t){super("addinterstitial"),this.interstitial=t}};r();var J5=class extends Dc{ma(){return new $5(this.interstitial.lrt())}constructor(t){super("Qhi"),this.interstitial=t}},$5=class extends Jr{constructor(t){super("interstitialend"),this.interstitial=t}};Uc(),r();var t6=class extends Dc{ma(){return new i6(this.interstitial.lrt(),this.Pb)}constructor(t,i){super("Fhi"),this.interstitial=t,this.Pb=i}},i6=class extends Jr{constructor(t,i){super("interstitialerror"),this.interstitial=t,this.message=i}};r(),r(),r();var e6=class extends m2{ma(){return Or(this)}get wJt(){return ah.Knt}constructor(t){super(t,function(t){return t===Qo.LSHAPE_CONTENT?la.Y4t:la.YKt}(t.uhi.bri)),t.hhi(this)}};var s6=class extends e6{constructor(t,i){super(t),this.JM=x.min(i,this.Yl.$$t)}},n6=class extends G5{get Yhi(){return V5.DEFAULT}D$(t,i,e){return F5.resolve()}ohi(t){}Vhi(t,i,e,s){let n;if(void 0===s&&(s=!1),this.dhi=t,t.lB<i){const e=x.min(t.ct,t.cri-i);n=t.ct-e,t.Yn({ct:e,_ri:n})}return this.phi({sources:{src:t.Xyt}},e,n,s)}async Ghi(t,i,e){return this.dhi=t,t.Xyt}_hi(){super._hi(),this.x3t.yn(E.oP,this.Whi),this.x3t.yn(Zi.qy,this._tt),this.x3t.yn(Xi.ua,this.KZt)}ghi(){this.x3t.fn(E.oP,this.Whi),this.x3t.fn(Zi.qy,this._tt),this.x3t.fn(Xi.ua,this.KZt),super.ghi()}ld(t){var i;const e=this.Kni(t.currentTime),s=this.dhi.i3t;this.dhi.dri(e);const n=this.dhi.i3t;s<.25&&n>=.25?this.z3t.yo(new D2(this.w0t,e)):s<.5&&n>.5?this.z3t.yo(new k2(this.w0t,e)):s<.75&&n>=.75?this.z3t.yo(new x2(this.w0t,e)):(null==(i=this.dhi)?void 0:i.rk)&&this.Cd(e)}Cd(t){super.Cd(t),this.s7=!1}async tr(){await super.tr(),this.s7=!1}constructor(...t){super(...t),this.s7=!1,this.KZt=()=>{this.yo(new hc(Nr.GENERAL))},this.Whi=t=>{!this.s7&&this.dhi&&(this.s7=!0,this.I0t=this.I3t(this.dhi),this.w0t=new s6(this.I0t,this.x3t._d()),this.dhi.Yn({ad:this.f7t}),this.z3t.yo(new uB(this.I0t)),this.z3t.yo(new bu(this.w0t,this.Kni(t.currentTime))))},this._tt=t=>{this.Cd(this.Kni(t.currentTime))}}};r(),Qi(),r();var r6=class extends e6{v0t(){return this.Zhi.getAdSystem()}p0t(){return this.Yl.uhi.Xyt}get o(){return this.Zhi.getAdId()}get ct(){return this.Zhi.getDuration()}get rqt(){var t,i;return null==(i=this.Zhi)||null==(t=i.ad)?void 0:t.clickThroughUrl}get EXt(){return this.Zhi.getCreativeId()}get Oqt(){return this.Zhi.getSkipTimeOffset()}constructor(t,i){super(t),this.Zhi=i}};r();var o6=class extends e6{constructor(t){super(t),this.q4t=!0,this.JM=t.t0t}},h6="theoads_slot",a6="urn:google:dai:2018",u6=class extends G5{get Yhi(){return V5.GOOGLE}D$(t,i,e){if(void 0===this.Hhi){var s,n;if(void 0===(null==(n=gi.google)||null==(s=n.ima)?void 0:s.dai))throw new b("IMA DAI SDK missing for THEOads");this.Hhi=new google.ima.dai.api.StreamManager(this.x3t.we.querySelector("video"),this.Xhi)}this.qhi=t,this.Khi=i,this.Dhi=e;const r=this.Hhi;this.Jhi(),r.reset();const o=new google.ima.dai.api.PodStreamRequest;return o.networkCode=this.qhi,o.customAssetKey=this.Khi,o.adTagParameters=this.Dhi,this.$hi&&(o.streamActivityMonitorId=this.$hi),o.format="hls",this.tai=this.iai([google.ima.dai.api.StreamEvent.Type.STREAM_INITIALIZED,google.ima.dai.api.StreamEvent.Type.ERROR]).then((t=>{if(t.type===google.ima.dai.api.StreamEvent.Type.ERROR)throw new b("DAI stream request failed");this.eai=t.getStreamData(),this.nai()})),this.Hhi.requestStream(o),this.tai}iai(t,i){return new F5(((e,s)=>{var n;if(i&&i.sy)return s(new J);const r=t=>{h(),e(t)},o=()=>{h(),s(new J)},h=()=>{var e;null==(e=this.Hhi)||e.removeEventListener(t,r),i&&i.oy(o)};null==(n=this.Hhi)||n.addEventListener(t,r),i&&i.uy(o)}))}ohi(t){var i;null==(i=this.Hhi)||i.replaceAdTagParameters(t)}async rai(t){var i,e;return(null==(i=this.dhi)?void 0:i.wri)&&!j(this.dhi.wri)?this.dhi.wri:this.oai&&(null==(e=this.dhi)?void 0:e.Evt)?await co((()=>this.hai()),t,4,500,5e3):void 0}async hai(){const t=this.oai+"/"+this.qhi+"/"+this.Khi+"/"+this.dhi.Evt+".json",i=new Gs({zu:t,oI:Ee.CN,xI:Ve.GET,CI:1e3});let e;try{e=await this.x3t.wE.hI(i)}catch(t){throw new Ie(Nr.NETWORK,$u.UNKNOWN_AD_RESPONSE,"The ad's PodId could not be loaded.")}if(!cb(e))throw new Ie(Nr.NETWORK,$u.UNKNOWN_ERROR,"Something went wrong while requesting JSON from server.");const s=await e.rI();if(s)return s.podid}async Vhi(t,i,e,s){void 0===s&&(s=!1);const n=await this.Ghi(t,i,e);return this.phi({sources:{src:n}},e,void 0,s)}async Ghi(t,i,e){this.dhi=t;const s=Fe.Ah(t.Xyt),n=s.searchParams.get("n"),r=s.searchParams.get("k"),o=this.Dhi;o.cust_params=function(t,i){const e=new qh(t);return e.set(h6,function(t){switch(t){case Qo.DOUBLE:return"double";case Qo.SINGLE:return"single";case Qo.LSHAPE_AD:case Qo.LSHAPE_CONTENT:return"l-shape"}}(i)),e.toString()}(o.cust_params,t.bri),n&&r&&(n!==this.qhi||r!==this.Khi)?(this.qhi=n,this.Khi=r,await this.D$(n,r,this.Dhi),yi(e)):this.ohi(this.Dhi),this.tai&&await Ao(this.tai,e);const h=Number(s.searchParams.get("d")),a=x.floor(1e3*x.min(h,t.cri-i)),u=await this.rai(e);if(!u)throw new b("Something went wrong with retrieving the PodID from the server.");return this.eai.getStandalonePodManifestUrl((()=>u),a)}_hi(){this.x3t.yn(Zi.qy,this.aai),this.x3t.nt.yn(zh.Hk,this.zn),super._hi()}ghi(){super.ghi(),this.x3t.fn(Zi.qy,this.aai),this.x3t.nt.fn(zh.Hk,this.zn)}nai(){var t;null==(t=this.Hhi)||t.addEventListener([google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.RESUMED],this.uai)}Jhi(){var t;null==(t=this.Hhi)||t.removeEventListener([google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.RESUMED],this.uai)}Cd(t){super.Cd(t),this.cai=void 0}async tr(){var t;await super.tr(),this.Jhi(),null==(t=this.Hhi)||t.reset(),this.Hhi=void 0,this.eai=void 0,this.$hi=void 0,this.Khi=void 0,this.qhi=void 0}async gn(){var t;await super.gn(),null==(t=this.lai)||t.gn()}constructor(t,i,e,s,n,r,o){super(t,i,s),this.aai=()=>{this.Cd(this.Kni(this.x3t.xE()))},this.zn=t=>{const i=t.Ht;if(i.Lt===z.MQ&&!(i.YA!==El.ID3&&i.YA!==El.EVENT_STREAM||i.YA===El.EVENT_STREAM&&i.YL!==a6)){if(i.yn(hs.Jk,this.fai),i.yn(hs.tL,this.Kri),i.L)for(const t of i.L.AL)this.fai(new eO(t));i.UI=ua.FL,this.lai=i}},this.fai=t=>{t.uB.yn(oa.kz,this.gai)},this.Kri=t=>{t.uB.fn(oa.kz,this.gai)},this.gai=t=>{var i,e;if(this.eai)if((null==(i=this.lai)?void 0:i.YA)===El.ID3){const i=t.uB.U;var s;if(dR(i))if(this.cai!==i.text)this.cai=i.text,null==(s=this.Hhi)||s.processMetadata("ID3",i.text,t.uB.lB)}else if((null==(e=this.lai)?void 0:e.YA)===El.EVENT_STREAM){var n;const i=t.uB.U;null==(n=this.Hhi)||n.processMetadata(a6,i,t.uB.lB)}},this.uai=t=>{switch(this.I0t&&(this.I0t.t0t=this.x3t._d()-this.x3t.xE()),t.type){case google.ima.dai.api.StreamEvent.Type.ERROR:this.z3t.yo(new hc(Nr.GENERAL));break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED:this.I0t=this.I3t(this.dhi),this.z3t.yo(new uB(this.I0t)),this._ai=Fe.Pg(this.vai,250);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:Fe.Rg(this._ai);break;case google.ima.dai.api.StreamEvent.Type.STARTED:{var i;const e=t.getAd();this.w0t=new r6(this.I0t,e),null==(i=this.dhi)||i.Yn({ad:this.w0t}),this.z3t.yo(new bu(this.w0t,this.Kni(this.x3t.xE())));break}case google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE:this.z3t.yo(new D2(this.w0t,this.Kni(this.x3t.xE())));break;case google.ima.dai.api.StreamEvent.Type.MIDPOINT:this.z3t.yo(new k2(this.w0t,this.Kni(this.x3t.xE())));break;case google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE:this.z3t.yo(new x2(this.w0t,this.Kni(this.x3t.xE())));break;case google.ima.dai.api.StreamEvent.Type.COMPLETE:this.z3t.yo(new dB(this.w0t,this.Kni(this.x3t.xE()))),this.w0t=void 0;break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:if(!this.I0t)break;this.I0t.t0t>1&&this.vai()}},this.vai=()=>{var t;this.w0t=new o6(this.I0t),null==(t=this.dhi)||t.Yn({ad:this.w0t}),this.z3t.yo(new bu(this.w0t,this.Kni(this.x3t.xE())))},this.Xhi=e,this.Dhi=null!=n?n:{},this.$hi=r,this.oai=o}};var c6=class extends o2{get shi(){var t;return[null==(t=this.bhi)?void 0:t.lhi,...this.wai.shi].filter($t)}get nhi(){return this.mai?this.pai.xri:[]}get Vc(){return this.Aai}Hnt(){return this.yai.ga}get Ihi(){var t,i,e;return null!=(e=null!=(i=this.Dhi)?i:null==(t=this.bai)?void 0:t.adTagParameters)?e:{}}jE(){return this.Vs}Fnt(){return this.Unt.Tnt}PE(){var t;return null!=(t=this.ZG)?t:super.PE()}BE(){var t;return null!=(t=this.dV)?t:super.BE()}Ok(){this.Unt.Ok()}noi(t){return t}async ka(t,i){if(await super.ka(t,i),void 0===t||void 0===t.ads)return;const e=dl(t.ads,q5);if(void 0===e)return;this.Mai(),this.bai=e,this.Tai=e.backdropLShape,this.pai.eoi=function(t){switch(t){case"single":return Qo.SINGLE;case"l-shape":return Qo.LSHAPE_AD;case"double":return Qo.DOUBLE;case"single-if-mobile":return Ro.Qs?Qo.SINGLE:void 0;default:return}}(e.overrideLayout),this.pai.roi=e.overrideAdSrc,this.pai.Fri=e.useId3,this.pai.Pri(this.ta.nt),this.wai.Ihi=e.adTagParameters,this.Unt.yn(E.sP,this.wd),this.Unt.yn(E.nP,this.Sai),this.Nai();const s=void 0===e.networkCode||void 0===e.customAssetKey;if(await this.Iai(s),void 0!==e.sources){var n;const t=null==(n=this.ta.bt)?void 0:n.src;this.Dai(e.sources+t)}}async Iai(t){var i,e,s;const n=this.h4t(),r=this.Eai();var o;const h=null!=(o=null==(i=this.bhi)?void 0:i.s0t)?o:[];var a;t&&(null==(e=this.bhi)?void 0:e.Yhi)!==V5.DEFAULT&&(await(null==(a=this.bhi)?void 0:a.tr()),this.bhi=new n6(n,this.Uhi,h));if(!t&&(null==(s=this.bhi)?void 0:s.Yhi)!==V5.GOOGLE){var u,c,l,d,f;await(null==(u=this.bhi)?void 0:u.tr()),this.bhi=new u6(n,this.Uhi,r,h,this.Ihi,null==(c=this.bai)?void 0:c.streamActivityMonitorId,null==(l=this.bai)?void 0:l.retrievePodIdURI);const t=null==(d=this.bai)?void 0:d.networkCode,i=null==(f=this.bai)?void 0:f.customAssetKey;void 0!==t&&void 0!==i&&await this.bhi.D$(t,i,this.Ihi)}}eG(t){void 0===this.BE()&&(this.dV=t,this.ZG=Au(t),this.yo(new cl(t)))}Nai(){this.Unt.yn(Zi.Eb,this.kai),this.Unt.yn(Zi.Mb,this.eZ),this.Unt.yn(Zi.mb,this.BI)}Lai(){this.Unt.fn(Zi.Eb,this.kai),this.Unt.fn(Zi.Mb,this.eZ),this.Unt.fn(Zi.mb,this.BI)}xai(){this.Uhi.v4t.yn("brt",this.Cai)}jai(){this.Uhi.v4t.fn("brt",this.Cai)}R2t(){this.Oai()}async Rai(){this.Oai()}Oai(){const t=this.ta.yk,i=this.ta.Tk;t===this.Pai&&i===this.zai||(this.Pai=t,this.zai=i,this.yo(new vo))}soi(t){if(this.mai){var i;if(l6(t))null==(i=this.bhi)||i.soi(t),this.uoi(this.Unt.xE());t.yn("ari",this.Bai),this.yai.yo(new K5(t.lrt()))}}foi(t){var i;(this.pai.foi(t),l6(t))?null==(i=this.bhi)||i.foi(t):d6(t)&&(this.wai.Chi(t),this.Uai.delete(t.o));this.mai&&(t.fn("ari",this.Bai),this.yai.yo(new J5(t).ga))}uoi(t){this.Qai(t),this.Fai()}Qai(t){this.Yai(t),this.Vai(t),this.Gai(t)}Yai(t){let i;const e=[];for(const s of this.pai.xri.filter(l6)){if(s.rk){e.push(s);continue}const n=s.cri;void 0!==n&&t>=n?(s.rk=!0,e.push(s)):void 0!==i&&i.lB<s.lB||(i=s)}for(const t of e)this.foi(t);this.Wai!==i&&(this.Wai=i,this.Zai())}Zai(){var t,i;null==(t=this.bhi)||t.fhi(),null==(i=this.Hai)||i.Ty(),this.Xai=void 0,this.qai=void 0}Vai(t){if(void 0===this.Wai||void 0!==this.Xai||this.Kai)return;let i=!1;const e=Mo.xn(this.Unt.SE()).CP(t);if(void 0!==e&&(i=e.jn(0)>=this.Wai.lB),l6(this.Wai)){const e=this.Wai,s=e.cri,n=t>=e.lB&&(void 0===s||t<s);(i||n)&&(this.Hai=new Wt,this.Xai=Vh(this.Vhi(e,t,this.Hai.ly),this.Hai).catch((t=>{Tu(t)||(this.yai.yo(new t6(e,"Could not load the ad break.").ga),e.rk=!0,this.Wai=void 0)})))}}Gai(t){if(void 0===this.Wai||void 0!==this.qai||this.Kai)return;const i=this.Wai.cri;var e;t>=this.Wai.lB&&(void 0===i||t<i)&&(this.qai=null==(e=this.Xai)?void 0:e.then((()=>this.Rai())))}ohi(t){var i,e,s;this.Dhi=t,null==(e=this.bhi)||e.ohi(null!=(s=null!=t?t:null==(i=this.bai)?void 0:i.adTagParameters)?s:{}),this.wai.Ihi=t}Fai(){const t=this.xE(),i=[];this.Uai.forEach((e=>{t>=e.lB&&(void 0===e.cri||t<e.cri)||i.push(e)})),i.forEach((t=>this.foi(t)));for(const i of this.pai.xri.filter(d6)){const e=i.cri;if(void 0!==e&&t>=e)continue;const s=i.lB,n=i.lB+i.ct;t>=s&&t<=n&&!this.Uai.has(i.o)&&(this.wai.Ehi(i).catch((t=>{this.yai.yo(new t6(i,"Could not load the overlay.").ga)})),this.yai.yo(new v5(i).ga),this.Uai.set(i.o,i))}}Dai(t){this.Jai=new Wt,this.$ai=new U5(this.Unt,t,this.Unt.wE,this.Jai.ly),this.pai.Pri(this.$ai.nt)}tui(){var t;void 0!==this.$ai&&(null==(t=this.Jai)||t.Ty(),this.Jai=void 0,this.$ai.gn(),this.$ai=void 0)}async zk(){var t,i;this.dV=void 0,this.ZG=void 0,this.mai=!1,this.bai=void 0,this.iui=!0,this.eui=NaN,this.zai=NaN,this.Pai=NaN,this.Wai=void 0,null==(t=this.Hai)||t.Ty(),this.Xai=void 0,this.qai=void 0,await(null==(i=this.bhi)?void 0:i.tr()),this.bhi=void 0,this.pai.tr(),this.wai.tr(),this.Uai.clear(),this.Unt.fn(E.sP,this.wd),this.Unt.fn(E.nP,this.Sai),this.Lai(),this.jai(),this.Zai(),this.tui(),await super.zk()}async gn(){var t;await this.zk().catch(Bn),this.pai.gn(),await(null==(t=this.bhi)?void 0:t.gn()),await super.gn()}Gk(t){switch(t.type){case Zi.ub:case Zi.Gy:case E.nP:return!this.iui;case E.sP:return!this.iui||(this.iui=!1,!1);case Zi.Zy:{const t=this._d();return t!==this.eui&&(this.eui=t,this.yo(new yt(t))),!0}case Zi.yb:return this.Oai(),!0}return super.Gk(t)}constructor(t){super(t),this.dV=void 0,this.ZG=void 0,this.Uai=ll(),this.iui=!0,this.eui=NaN,this.zai=NaN,this.Pai=NaN,this.mai=!1,this.Kai=!1,this.Mai=async()=>{try{await this.jnt.UH([oL.THEOADS])}catch(t){await this.zk().catch(Bn),this.eG(gy(t,vt.LICENSE_INVALID_FEATURE))}},this.Sai=()=>{var t;this.Unt.fn(E.nP,this.Sai),(null==(t=this.bai)?void 0:t.sseEndpoint)&&this.pai.jri(this.bai.sseEndpoint)},this.wd=()=>{this.uoi(this.xE()),this.mai=!0,this.Unt.fn(E.sP,this.wd),this.pai.xri.forEach((t=>this.soi(t)))},this.kai=()=>{this.Qai(this.xE()),this.Fai()},this.eZ=()=>{this.Qai(this.xE()),this.Fai()},this.BI=()=>{this.Vai(this.xE())},this.Cai=()=>{this.R2t()},this.Bai=t=>{this.yai.yo(t.ga)},this.Unt=t,this.Vs=t.we;const{contentElement:i,adElement:e}=c5(this.Vs);this.sui=i,this.nui=e,pc(this.sui),pc(this.nui),this.yai=new Q5(this),this.Uhi=new W5,this.Aai=new H5(this,t.Vc),this.Aai.wrt(this.Uhi),this.pai=new S5(this),this.wai=new X5(this,i,this.Uhi)}};function l6(t){return"adbreak"===t.YA}function d6(t){return"overlay"===t.YA}var f6=class extends c6{_d(){var t;return null!=(t=this.JM)?t:super._d()}Ya(){var t;return null!=(t=this.wc)?t:super.Ya()}async ka(t,i){await super.ka(t,i),this.bai&&(this.wc=t,this.rui=new g5(this.Unt),this.rui.ur(this.Unt.we,this.Unt.we.parentElement),this.zz(this.rui))}Nai(){super.Nai(),this.Unt.yn(Zi.Zy,this.wZt),this.Unt.yn(E.oP,this.eF)}Lai(){super.Lai(),this.Unt.fn(Zi.Zy,this.wZt),this.Unt.fn(E.oP,this.eF)}h4t(){return this.Unt}Eai(){return this.sui}CE(t,i){this.oui=!0,super.CE(t,i)}Pk(){super.Pk(),this.yo(new fi(this.xE())),this.hui=!0,this.aui=!1}Rk(){this.aui=!0,super.Rk()}async Vhi(t,i,e){var s;const n=!I(t.Xyt,"theo-ads://dai.break");await this.Iai(n),this.uui=await(null==(s=this.bhi)?void 0:s.Ghi(t,i,e))}async Rai(){var t,i,e;if(void 0===this.Wai||void 0===this.uui)return;this.Lai();const s=!I(this.Wai.Xyt,"theo-ads://dai.break");return null==(t=this.Hai)||t.Ty(),this.Hai=new Wt,await this.Iai(s),this.dBt=this.Unt.NE,null==(i=this.rui)||i.ar(this.Unt.we),this.cui=!0,this.Unt.yn(E.oP,this.eF),this.yai.yo(new v5(this.Wai).ga),await(null==(e=this.bhi)?void 0:e.phi({sources:{src:this.uui}},this.Hai.ly,void 0,!0)),this.rui=this.lui(this.Wai.bri,this.Tai),this.Q2t(this.rui),this.rui.ur(this.we,this.Unt.we.parentElement),this.xai(),this.Kai=!0,this.dui=!1,super.Rai()}lui(t,i){switch(t){case Qo.LSHAPE_AD:return new _5(this.Unt,i);case Qo.SINGLE:default:return new g5(this.Unt)}}async R2t(){var t;this.Wai&&(this.cui=!0,this.Unt.yn(E.oP,this.eF),await this.Unt.ka(this.wc,(new Wt).ly),null==(t=this.rui)||t.ar(this.Unt.we),this.rui=new g5(this.Unt),this.rui.ur(this.Unt.we,this.Unt.we.parentElement),this.Q2t(this.rui),this.Unt.Pk(),this.dui=!0,this.Unt.NE=new Date(Number(this.dBt)+1e3*this.Wai.ct),this.Wai=void 0,this.dBt=void 0,this.Kai=!1,this.Nai(),super.R2t())}async zk(){this.rui=void 0,this.JM=void 0,this.dui=!0,this.cui=!1,this.hui=!0,this.aui=!0,await super.zk()}Gk(t){if(void 0!==this.rui)switch(t.type){case Zi.so:return!0;case Zi.wb:if(!this.aui)return!0;this.aui=!1;break;case E.oP:if(!this.hui)return!0;this.hui=!1;break;case E.rP:if(this.cui)return!0;this.hui=!0;break;case Zi.bb:if(this.cui&&!this.oui)return!0;this.oui=!1;break;case Zi.Mb:if(this.cui&&!this.oui)return!0;break;case Zi.qy:if(!this.dui)return!0}return super.Gk(t)}constructor(...t){super(...t),this.cui=!0,this.oui=!1,this.hui=!0,this.aui=!0,this.dui=!0,this.wZt=t=>{this.JM=t.duration},this.eF=()=>{this.Unt.fn(E.oP,this.eF),this.cui=!1}}};r(),bs();var g6=class extends o2{get Jni(){return this.fui}get Hni(){return this.gui}Wni(){this.fui=this.Unt.xE()+this.gui}rri(){var t;if(void 0!==this._ui)return;const i=this.vui;this.vui=void 0,null==(t=this.wui)||t.Ty(),w6(this.Unt)&&(this.mui=new Wt,this._ui=Vh(this.pui(i,this.mui.ly),this.mui).catch(Ct))}hri(){var t;const i=this._ui;this._ui=void 0,null==(t=this.mui)||t.Ty(),this.wui=new Wt,this.vui=Vh(this.Aui(i,this.wui.ly),this.wui).catch(Ct)}_a(){return this.Unt.xV}yui(){this.bui={source:this.Unt.Ya(),duration:this.Unt._d(),currentTime:this.Unt.xE(),preload:this.Unt.ck,autoplay:this.Unt.Xz}}async Mui(t){this.Unt.ck=Dn.Mz,this.Unt.Xz=!1,this.x3t.WE=!0;const i=this.x3t.Ya();await this.Unt.ka(i,t),this.Unt.CE(this.x3t.xE())}async Tui(t){this.bui&&(this.Unt.ck=this.bui.preload,this.Unt.Xz=this.bui.autoplay,await this.Unt.ka(this.bui.source,t),this.bui=void 0)}async pui(t,i){await(null==t?void 0:t.catch(Bn)),this.yui(),this.Sui=this.Unt.NE,await this.Unt.zk(),await this.Mui(i),this.Q2t(this.Unt),this.Unt.Pk()}async Aui(t,i){await(null==t?void 0:t.catch(Bn)),this.Nui=this.x3t.xE(),this.gui=this.Nui+this.Jni,await this.Unt.zk(),await this.Tui(i),this.Q2t(this.x3t),this.Unt.yn(E.nP,this.Iui),this.Unt.Pk()}Ya(){return this.bui?this.bui.source:super.Ya()}_d(){return this.bui?this.bui.duration:super._d()}vk(){const t=super.vk();return Mo.xn(t).Gb(this.Jni).ks()}SE(){const t=super.SE();return Mo.xn(t).Gb(this.Jni).ks()}tr(){this.gui=0,this.fui=0,this.Nui=0,this.Sui=void 0}async gn(){await super.gn(),this.tr(),this.Unt.fn(E.nP,this.Iui)}constructor(t,i){super(i),this.fui=0,this.gui=0,this.Nui=0,this.Iui=()=>{if(this.Unt.fn(E.nP,this.Iui),this.Sui){const t=this.Sui;t.setSeconds(this.Sui.getSeconds()+this.Nui),this.Unt.NE=t,this.Sui=void 0}this.gui-=this.Unt.xE()},this.Unt=t,this.x3t=i}};r();var _6=class extends Xt{ka(t,i){var e;return void 0!==dl(null!=(e=null==t?void 0:t.ads)?e:[],q5)?Promise.reject(new qi(vt.CONFIGURATION_ERROR,"THEOads must be enabled in the player configuration.")):super.ka(t,i)}},v6=class extends c6{Dui(){this.Unt.Rnt.yn("presentationmodechange",this.Eui)}kui(){this.Unt.Rnt.fn("presentationmodechange",this.Eui)}get Rnt(){return this.Unt.Rnt}async ka(t,i){await super.ka(t,i),this.bai&&(this.Lui=this.bai.backdropDoubleBox,this.xui(),this.Cui(new t5(this.Unt,this.x3t),!1,!0))}Cui(t,i,e){var s;void 0!==this.jui&&(this.jui.ar(this.we,this.sui,this.nui),this.jui.gn());const n=null!=(s=this.jui)?s:this,r=null!=t?t:this.Unt;J3(n,r),null==t||t.ur(this.we,this.sui,this.nui,n,i),this.jui=t,e?this.zz(r):this.Q2t(r)}xui(){this.Oui||(this.Oui=!0,Hd(this.sui),Hd(this.nui),l5(this.Vs),l5(this.sui),l5(this.nui),function(t){const i=t.style;i.display="flex",i.alignItems="center"}(this.Vs))}Rui(){this.Oui&&(this.Oui=!1,d5(this.Vs),d5(this.sui),d5(this.nui),pc(this.sui),pc(this.nui))}h4t(){return this.x3t}Eai(){return this.Xhi}Ok(){super.Ok(),this.x3t.Ok()}CE(t,i){this.Pui=!0,super.CE(t,i)}noi(t){return t+this.x3t.Hni}xai(){super.xai(),this.x3t.yn(Zi.mb,this.zui),this.Unt.yn(Zi.fb,this.ihi)}jai(){super.jai(),this.x3t.fn(Zi.mb,this.zui),this.Unt.fn(Zi.fb,this.ihi)}Bui(){var t,i;const e=null==(t=this.Wai)?void 0:t.cri;if(void 0===e||(null==(i=this.jui)?void 0:i.qni())||ce(this.Unt.xE(),e,.001))return;const s=Mo.xn(this.x3t.SE()),n=this.x3t.vk(),r=x.min(n.end(n.length-1),this.Wai.ct);s.fP().gr(r)&&this.Unt.CE(e,{dzt:!0})}async Vhi(t,i,e){var s;const n=function(t){return!I(t.Xyt,"theo-ads://dai.break")}(t);await this.Iai(n),await(null==(s=this.bhi)?void 0:s.Vhi(t,i,e))}async Rai(){const t=this.Wai;if(void 0===t)return;const i=t.bri,e=this.lui(i,t);return this.Lai(),Ro.qf&&Ro.Jf>=16&&Ro.Jf<18&&this.x3t.CE(this.x3t.xE()),Ro.Zd&&!e.qni()&&(d5(this.sui),pc(this.sui)),this.Cui(e,this.hui,!1),this.yai.yo(new v5(t).ga),this.xai(),this.Kai=!0,this.Uui=!1,this.qai=void 0,super.Rai()}lui(t,i){if(w6(this.Unt))return new i5(this.Unt,this.x3t);switch(t){case Qo.DOUBLE:return i.Mri||i.Yn({backdropUri:this.Lui}),new o5(this.Unt,this.x3t,i.Mri);case Qo.LSHAPE_AD:return i.Mri||i.Yn({backdropUri:this.Tai}),new u5(this.Unt,this.x3t,i.Mri);case Qo.LSHAPE_CONTENT:return i.Mri||i.Yn({backdropUri:this.Tai}),new a5(this.Unt,this.x3t,i.Mri);case Qo.SINGLE:default:return new e5(this.Unt,this.x3t)}}R2t(){var t;if(void 0===this.Wai)return;this.jai();const i=null==(t=this.jui)?void 0:t.qni();Ro.Zd&&(Hd(this.sui),l5(this.sui)),this.Cui(new t5(this.Unt,this.x3t),!0,!1),i||(this.Pui=!1,this.Unt.CE(this.Wai.cri,{dzt:!0})),this.Nai(),this.Kai=!1,this.Uui=!1,this.Wai=void 0,super.R2t()}async zk(){this.hui=!0,this.Pui=!0,this.Uui=!0,this.Kai=!1,this.Cui(void 0,!1,!0),await this.x3t.zk(),this.Rui(),await super.zk()}async gn(){this.kui(),await this.x3t.gn(),await super.gn()}Gk(t){if(void 0!==this.jui)switch(t.type){case Zi.so:if(!this.Uui)return this.Uui=!0,!0;this.hui=!0;break;case Zi.wb:if(this.OE&&this.Kai)return!0;break;case E.oP:if(!this.hui)return!0;this.hui=!1;break;case E.rP:this.hui=!0;break;case Zi.Mb:if(!this.Pui)return!0;break;case Zi.bb:if(!this.Pui)return this.Pui=!0,!0}return super.Gk(t)}constructor(t){super(t),this.Uui=!0,this.hui=!0,this.Pui=!0,this.Oui=!1,this.Eui=t=>{if(this.jui&&!function(t){return t instanceof i5}(this.jui)&&this.Kai)switch(t.presentationMode){case"native-picture-in-picture":this.Cui(new i5(this.Unt,this.x3t),!1,!1);break;case"fullscreen":v4(this.md)&&this.Cui(new i5(this.Unt,this.x3t),!1,!1);break}},this.zui=t=>{w6(this.Unt)||this.Bui()},this.ihi=t=>{w6(this.Unt)||this.Bui()};const i=new R2(new Rz(this.nui,t.md,new AL),mk.Ld);i.ck=Dn.Mz,i.Xz=!1,this.x3t=new g6(this.Unt,i),this.Xhi=function(t){const i=h.createElement("div");return Ea(i,"theo-ads-sgai-ima-container"),function(t){t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%"}(i),t.appendChild(i),i}(this.nui),this.Dui()}};function w6(t){const i=t.Rnt.Uo()===Ba.FULLSCREEN&&v4(t.md);return t.xV.xz||i}jr((t=>t.md.ads.theoads?Ro.Nf||Ro.kf?new f6(t):new v6(t):new _6(t)),Hn.Knt),r(),r(),r(),Uc(),Qi(),r(),r();var m6=class extends tu{get ga(){return this.Za||(this.Za=function(t){return{get casting(){return t.TJ},get state(){return t.Xgt},start(){t.Uk()},stop(){t.Qk()},addEventListener(i,e){const s=Mt(i,Q);t.yn(s,e)},removeEventListener(i,e){const s=Mt(i,Q);t.fn(s,e)}}}(this)),this.Za}constructor(...t){super(...t),this.Za=void 0}},p6=class extends m6{get TJ(){return this.Xgt===an.CONNECTED}get Xgt(){return this.Ea}Qui(){this.Fui(),this.cpt.yn(Zi.ro,this.Yui),this.Na(an.AVAILABLE)}Fui(){this.ta&&this.ta.fn(Zi.By,this.handleAirplayChangedEvent),this.Vui?this.ta=this.xK:this.ta=this.Gui,this.ta.yn(Zi.By,this.handleAirplayChangedEvent)}get Vui(){return this.xK.Bk()}async Wui(){if(this.ta){if(this.Vui){if(!this.ta.KE){const t=new Promise((t=>u(t,800))),i=this.ta.zy(Zi.wb,this.Zui.ly);await Promise.race([i,t])}this.ta.Pk()}else{this.Hui=this.xK.LE,this.Xui=this.xK.NE,this.Gui.yn(Zi.Eb,this.handleAirplayPlayerTimeUpdate),this.qui=this.xK.TL,this.xK.TL=this.Gui,this.qui.Rk(),this.qui.be(),this.Gui.ge(),this.Gui.WE=this.qui.WE,this.Gui.$E=this.qui.$E,this.Gui.Nk=this.qui.Nk;const t=this.Gui.zy(Zi.bb);this.Gui.LE=this.qui.LE,await t,this.Gui.Pk(),this.Gui.WE=this.qui.WE,this.Gui.$E=this.qui.$E,this.Gui.Nk=this.qui.Nk}this.Na(an.CONNECTED)}}Kui(){if(this.qui){this.Gui.fn(Zi.Eb,this.handleAirplayPlayerTimeUpdate),this.qui.WE=this.Gui.WE,this.qui.$E=this.Gui.$E,this.qui.Nk=this.Gui.Nk;Ro.qf&&!Ro.Ka&&this.xK.ct===1/0?this.Xui?this.qui.NE=this.Xui:this.qui.LE=1/0:this.qui.LE=this.Hui,this.Xui=void 0,this.Hui=void 0,this.qui.ge(),this.Gui.be(),this.Gui.KE||this.qui.Pk(),this.xK.TL=this.qui,this.Gui.tr(),this.qui=void 0}else this.ta&&(this.ta.LE=this.ta.LE+1e-4);this.Na(an.AVAILABLE)}preloadPlayer(t){if(yi(t),this.ta.fk<Fn.Xn){const i=this.ta.zy(E.nP,t);return this.ta.ck=Dn.MQ,i}return Promise.resolve()}Na(t){t!==this.Ea&&(this.Ea=t,this.yo(new i2(this.Ea)))}Uk(){let t;this.cpt.Ok(),this.Zui.Ty(),this.Zui=new Wt,t=this.Vui?this.Jui(this.Zui.ly):this.$ui(this.Zui.ly),X(Vh(t,this.Zui))}async Jui(t){await this.preloadPlayer(t),this.xK.Uk()}async $ui(t){try{await this.Gui.tr();const i=this.xK.Ya();if(void 0===i)throw new b("Not possible to start Airplay without a source");await this.Gui.ka(i,t);const e=this.Gui.zy(E.oP,t);this.Gui.Pk(),await _w(e,3e3),this.Gui.Rk(),yi(t),this.Gui.Uk()}catch(t){if(Tu(t))return;0}}Qk(){this.ta.Qk()}gn(){var t;this.Bo(),this.cpt.fn(Zi.ro,this.Yui),this.Zui.Ty(),this.xK.Zz(this.Gui),null==(t=this.Gui)||t.gn()}constructor(t,i,e){super(),this.Ea=an.UNAVAILABLE,this.Zui=new Wt,this.Yui=()=>{var t;const i=null==(t=this.xK.Ya())?void 0:t.sources.filter(Jc);(null==i?void 0:i.some(VE))?this.Na(an.AVAILABLE):this.Na(an.UNAVAILABLE)},this.handleAirplayChangedEvent=()=>{this.ta&&this.ta.FE?this.Wui():this.Xgt===an.CONNECTED&&this.Kui()},this.handleAirplayPlayerTimeUpdate=t=>{this.Hui=t.currentTime,this.Xui=this.xK.NE},this.cpt=t,this.xK=i,this.Gui=e,this.Gui.be(),i.Wz(e),this.Qui()}};r();var A6=class extends m6{get TJ(){return!1}get Xgt(){return an.UNAVAILABLE}Uk(){}Qk(){}};r();var y6=class extends gs{Yk(){this.tci.Yk()}Wk(t){throw new b("Can't add a track while using AirPlay.")}get ht(){return this.tci.ht}get TE(){return this.tci.TE}get bt(){return this.AG}get LE(){return this.tci.LE}set LE(t){this.CE(t)}CE(t,i){this.tci.CE(t,i)}get NE(){return this.tci.NE}get ct(){return this.tci.ct}get we(){return this.Vs}get OE(){return this.tci.OE}get lt(){return this.tci.lt}get zE(){return this.tci.zE}get UE(){return this.tci.UE}get FE(){return this.tci.FE}get xk(){return this.tci.xk}get Ek(){return this.tci.Ek}get VE(){return this.tci.VE}get WE(){return this.tci.WE}set WE(t){this.tci.WE=t}get XE(){return this.tci.XE}get KE(){return this.tci.KE}get $E(){return this.tci.$E}set $E(t){this.tci.$E=t}get rk(){return this.tci.rk}get ck(){return this.tci.ck}set ck(t){this.tci.ck=t}get fk(){return this.tci.fk}get _k(){return this.tci._k}get wk(){return this.tci.wk}Bk(){return this.tci.Bk()}Uk(){this.tci.Uk()}Qk(){this.tci.Qk()}get nt(){return this.tci.nt}get yk(){return this.tci.yk}get Tk(){return this.tci.Tk}get rt(){return this.tci.rt}get Nk(){return this.tci.Nk}set Nk(t){this.tci.Nk=t}Pk(){X(this.tci.Pk())}Rk(){this.tci.Rk()}async zk(){}Ya(){return this.wc}async ka(t,i){let e;if(yi(i),this.wc=t,cS(t.sources))e=ct({src:""});else{const i=t.sources.filter(Jc);for(const t of i)if(VE(t)){e=t;break}}if(!e)throw new b("Unsupported source.");await this.tci.ka(e,t,i),this.DG(e)}DG(t){this.AG!==t&&(this.AG=t,this.yo(new TS(t)))}jk(){return this.tci.jk()}bE(){return[]}Ok(){this.ici.zG()}ur(t){bS(this,t)}ar(){}Vk(t){return!1}Fk(){this.tci.Fk()}async tr(){this.AG=void 0,this.wc=void 0,await this.tci.tr()}ge(){this.tci.ge()}be(){this.tci.be()}Ck(){return this.tci.Ck()}_a(){return this.tci._a()}async gn(){this.Bo(),this.ici.gn(),await this.tci.gn(),this.Oz.gn(),this.Pz.gn(),this.Ul.gn()}constructor(t,i,e,s,n,r,o){super(),this.AG=void 0,this.wc=void 0,this.Oz=new ol,this.Pz=new ol,this.Ul=new Ce,this.Vs=t,this.ici=new Qf(r,o,1,[Ri.NI]),this.ici.GG(t),this.tci=new YE(t,this.ici,i,e,s,n),this.tci.xy(this.Ds),this.Oz.TL=this.tci.ht,this.Pz.TL=this.tci.rt,this.Ul.TL=this.tci.nt}};Qi();var b6=class extends Xt{async gn(){this.eci.gn(),await super.gn()}constructor(t){super(t);const i=new y6(this.xa.we,this.wE,this.md,this.Tnt,this.Ek,this.Ent,this.Ll);this.eci=new p6(this,this.xa,i),this.qZ.EJ(this.eci),this.yn(Zi.Gy,(()=>{this.eci.Fui()}))}};jr((t=>Fe.Ys.Mp?new b6(t):(t.qZ.EJ(new A6),t)),Hn.Jnt),r(),r(),Uc();var M6="VPAID";function T6(t){return"spotx"===t.integration}mk.Ld.tW(new class t{get a4t(){return this.sci.a4t}$G(t){return T6(t)}u4t(i,e,s){return s.ads||(s.ads=fS({})),s.ads.vpaidMode=s.ads.vpaidMode||t.nci(),this.sci.u4t(i,e,s)}I9(i,e,s,n){!function(t){if(!T6(t))throw new b("Unknown ad integration: "+t.integration)}(i);const r=t.rci(i,s.we);this.sci.I9(r,e,s,n)}fH(t){const i=oi(t);if(!j(i.id))return i.queryParameters||(i.queryParameters={}),i.custom&&(i.queryParameters.custom?Bi('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(i.queryParameters.custom=i.custom,delete i.custom)),i.app&&(i.queryParameters.app?Bi('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(i.queryParameters.app=i.app,delete i.app)),i.device&&(i.queryParameters.device?Bi('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(i.queryParameters.device=i.device,delete i.device)),i.user&&(i.queryParameters.user?Bi('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(i.queryParameters.user=i.user,delete i.user)),i.ipAddress&&(i.queryParameters.ip_addr?Bi('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(i.queryParameters.ip_addr=i.ipAddress,delete i.ipAddress)),i.maximumAdDuration&&(i.queryParameters.VMaxd?Bi('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(i.queryParameters.VMaxd=i.maximumAdDuration,delete i.maximumAdDuration)),i}static rci(i,e){return{integration:Si.SPOTX,sources:{src:t.hci(i,gi.location.href,e.offsetWidth,e.offsetHeight,Ro.Sg)}}}static hci(i,e,s,n,r){if(i.sources)return i.sources;let o=n,h=s;r&&0===h&&(h=320,o=180);const a={custom_skin:1,player_width:h,player_height:o};i.cacheBuster&&(a.cb=x.random()),t.aci(e)&&(a.content_page_url=e);const u=Ei({},a,i.queryParameters);return u[M6]||u.VPI||(u[M6]="js"),"https://search.spotxchange.com/vast/2.0/"+i.id+"?"+t.uci(u)}static aci(t){return I(t,"http://")||I(t,"https://")}static uci(t){return Z0(t)}static nci(){return Ro.zf?HT.ENABLED:HT.INSECURE}constructor(){this.sci=new A4}}),r(),r(),r(),r(),r();var S6=class{cci(t,i){const e=this.lci;let s;switch(i){case e.VERTEX_SHADER:s=e.createShader(i),this.dci=s;break;case e.FRAGMENT_SHADER:s=e.createShader(i),this.fci=s;break;default:return void console.error("Invalid Shader Type:",i)}e.attachShader(this.gci,s),e.shaderSource(s,t),e.compileShader(s)}_ci(t){const i=this.lci;if(t){this.vci={};for(const e in t)i.bindAttribLocation(this.gci,t[e],e),this.vci[e]=t[e]}}wci(){this.lci.linkProgram(this.gci)}mci(){const t=this.lci;if(this.pci){if(t.getProgramParameter(this.gci,t.LINK_STATUS)){if(!this.vci){this.vci={};const i=t.getProgramParameter(this.gci,t.ACTIVE_ATTRIBUTES);for(let e=0;e<i;e++){const i=t.getActiveAttrib(this.gci,e);this.vci[i.name]=t.getAttribLocation(this.gci,i.name)}}this.Aci={};const i=t.getProgramParameter(this.gci,t.ACTIVE_UNIFORMS);let e="";for(let s=0;s<i;s++){e=t.getActiveUniform(this.gci,s).name.replace("[0]",""),this.Aci[e]=t.getUniformLocation(this.gci,e)}}else this.dci&&!t.getShaderParameter(this.dci,t.COMPILE_STATUS)?console.error("Vertex shader compile error:",t.getShaderInfoLog(this.dci)):this.fci&&!t.getShaderParameter(this.fci,t.COMPILE_STATUS)?console.error("Fragment shader compile error:",t.getShaderInfoLog(this.fci)):console.error("Program link error:",t.getProgramInfoLog(this.gci)),t.deleteProgram(this.gci),this.gci=null;t.deleteShader(this.dci),t.deleteShader(this.fci),this.pci=!1}t.useProgram(this.gci)}constructor(t){this.vci=null,this.Aci=null,this.pci=!0,this.dci=null,this.fci=null,this.lci=t,this.gci=t.createProgram()}},N6=class{pr(t,i,e){let s=this.lci;this.yci(t,i,s,e),this.t.KE||this.t.Ow.UX(s,s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE),s.drawElements(s.TRIANGLES,this.bci,s.UNSIGNED_SHORT,0)}Mci(t){this.Tci||(t.bindTexture(t.TEXTURE_2D,this.Sci),this.t.Ow.UX(t,t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.Tci=!0)}yci(t,i,e,s){const n=this.gci;n.mci(),this.Mci(e);const r=n.Aci,o=n.vci;let h;e.uniformMatrix4fv(r.projectionMat,!1,t),e.uniformMatrix4fv(r.modelViewMat,!1,i),h="right"===s?this.Nci:this.Ici,e.bindBuffer(e.ARRAY_BUFFER,h),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.Dci),e.enableVertexAttribArray(o.position),e.enableVertexAttribArray(o.texCoord),e.vertexAttribPointer(o.position,3,e.FLOAT,!1,20,0),e.vertexAttribPointer(o.texCoord,2,e.FLOAT,!1,20,12),e.activeTexture(e.TEXTURE0),e.uniform1i(r.diffuse,0),e.bindTexture(e.TEXTURE_2D,this.Sci)}constructor(t,i,e){this.Tci=!1,this.lci=t,this.Sci=t.createTexture();let s=["uniform mat4 projectionMat;","uniform mat4 modelViewMat;","attribute vec3 position;","attribute vec2 texCoord;","varying vec2 vTexCoord;","void main() {","  vTexCoord = texCoord;","  gl_Position = projectionMat * modelViewMat * vec4( position, 1.0 );","}"].join("\n"),n=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");this.gci=new S6(t),this.gci.cci(s,t.VERTEX_SHADER),this.gci.cci(n,t.FRAGMENT_SHADER),this.gci._ci({position:0,texCoord:1}),this.gci.wci();const r=[],o=[],h=[],a=40;for(let t=0;t<=40;++t){const i=t*x.PI/40,s=x.sin(i),n=x.cos(i);for(let i=0;i<=a;++i){const h=2*i*x.PI/a-x.PI,u=x.sin(h)*s,c=n,l=-x.cos(h)*s,d=i/a,f=t/40;switch(e){case"horizontal":r.push(2*u,2*c,2*l,d/2,f),o.push(2*u,2*c,2*l,d/2+.5,f);break;case"vertical":r.push(2*u,2*c,2*l,d,f/2),o.push(2*u,2*c,2*l,d,f/2+.5);break;default:r.push(2*u,2*c,2*l,d,f)}}}for(let t=0;t<40;++t){let i=41*t,e=41*(t+1);for(let t=0;t<a;++t){let s=i+t,n=e+t;h.push(s,n,s+1,n,n+1,s+1)}}switch(this.Ici=t.createBuffer(),this.Nci=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Ici),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.Nci),e){case"horizontal":case"vertical":t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW);break;default:t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW)}this.Dci=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.Dci),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(h),t.STATIC_DRAW),this.bci=h.length,this.t=i}};r();var I6=class extends Dc{ma(){return new D6}constructor(){super("Eci")}},D6=class extends Jr{constructor(){super("stereochange")}};r();var E6=class extends Dc{ma(){return new k6}constructor(){super("kci")}},k6=class extends Jr{constructor(){super("directionchange")}};r(),r();var yn=x.PI/180,L6=180/x.PI,cr=class{tM(t,i){return this.x=t,this.y=i,this}D_t(t){return this.x=t.x,this.y=t.y,this}Lci(t){return this.tM(t[0],t[1])}xci(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}Cci(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}constructor(t,i){this.x=t||0,this.y=i||0}},vn=class{tM(t,i,e){return this.x=t,this.y=i,this.z=e,this}D_t(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}Lci(t){return this.tM(t[0],t[1],t[2])}xci(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}V(){return x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}jci(){const t=this.V();if(0!==t){const i=1/t;this.Oci(i)}else this.x=0,this.y=0,this.z=0;return this}Oci(t){this.x*=t,this.y*=t,this.z*=t}Rci(t){const i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,o=t.z,h=t.w,a=h*i+r*s-o*e,u=h*e+o*i-n*s,c=h*s+n*e-r*i,l=-n*i-r*e-o*s;return this.x=a*h+l*-n+u*-o-c*-r,this.y=u*h+l*-r+c*-n-a*-o,this.z=c*h+l*-o+a*-r-u*-n,this}Pci(t){return this.x*t.x+this.y*t.y+this.z*t.z}zci(t,i){const e=t.x,s=t.y,n=t.z,r=i.x,o=i.y,h=i.z;return this.x=s*h-n*o,this.y=n*r-e*h,this.z=e*o-s*r,this}constructor(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0}},Un=class{tM(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this}D_t(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}Lci(t){return this.tM(t[0],t[1],t[2],t[3])}xci(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}Pci(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}TU(t){return this.Bci(this,t)}Bci(t,i){const e=t.x,s=t.y,n=t.z,r=t.w,o=i.x,h=i.y,a=i.z,u=i.w;return this.x=e*u+r*o+s*a-n*h,this.y=s*u+r*h+n*o-e*a,this.z=n*u+r*a+e*h-s*o,this.w=r*u-e*o-s*h-n*a,this}Uci(){return this.x*=-1,this.y*=-1,this.z*=-1,this.jci(),this}Qci(){const t=this.x,i=this.y,e=this.z,s=this.w,n=t*i+e*s;let r,o,h;if(n>.499)r=2*x.atan2(t,s),o=x.PI/2,h=0;else if(n<-.499)r=-2*x.atan2(t,s),o=-x.PI/2,h=0;else{const a=t*t,u=i*i,c=e*e;r=x.atan2(2*i*s-2*t*e,1-2*u-2*c),o=x.asin(2*n),h=x.atan2(2*t*s-2*i*e,1-2*a-2*c)}return new x6(r,h,o)}jci(){let t=x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1}},x6=class{tM(t,i,e){return this.Fci=t,this.Yci=i,this.Vci=e,this}D_t(t){return this.tM(t.Fci,t.Yci,t.Vci)}Kz(t){return this.Fci+=t.Fci,this.Yci+=t.Yci,this.Vci+=t.Vci,this}Gci(){const t=this.Fci,i=this.Vci,e=this.Yci,s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),o=x.sin(t/2),h=x.sin(i/2),a=x.sin(e/2),u=s*n,c=o*h;return new Un(u*a+c*r,o*n*r+s*h*a,s*h*r-o*n*a,u*r-c*a)}constructor(t,i,e){this.Fci=t||0,this.Yci=i||0,this.Vci=e||0}},C6=.15,j6=class{EQ(){this.Rt||(this.Rt=!0,this.we.addEventListener("keydown",this.Wci),this.we.addEventListener("mousedown",this.Zci),this.we.addEventListener("touchstart",this.Hci),s.addEventListener("mousemove",this.er),s.addEventListener("mouseup",this.Xci),this.qci(s),s.addEventListener("touchmove",this.Kci),s.addEventListener("touchend",this.Jci))}qci(t){if(Kd(t));else if(Jd(t))try{t.parent.addEventListener("mouseup",this.Xci),this.qci(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.$ci)}}kQ(){this.Rt&&(this.Rt=!1,this.tli=!1,this.ili&&(pi(this.ili),this.ili=null),this.we.removeEventListener("keydown",this.Wci),this.we.removeEventListener("mousedown",this.Zci),this.we.removeEventListener("touchstart",this.Hci),s.removeEventListener("mousemove",this.er),s.removeEventListener("mouseup",this.Xci),this.eli(s),s.removeEventListener("touchmove",this.Kci),s.removeEventListener("touchend",this.Jci))}eli(t){if(t.document.documentElement.removeEventListener("mouseleave",this.$ci),Jd(t))try{t.parent.removeEventListener("mouseup",this.Xci),this.eli(t.parent)}catch(t){}}get sli(){return new x6(this.nli,this.rli,this.oli)}set sli(t){this.nli=t.Fci,this.rli=t.Yci,this.oli=t.Vci}hli(t){this.ali("nli",t)}uli(t){t=ur(t,-x.PI/2,x.PI/2),this.ali("rli",t)}ali(t,i){this.ili&&pi(this.ili);let e=this[t],s=CL(),n=()=>{let r=CL()-s;if(r>=80)return this[t]=i,pi(this.ili),void(this.ili=null);this.ili=oc(n);let o=r/80;this[t]=e+(i-e)*o};this.ili=oc(n)}cli(){this.rli+=2*x.PI*this.lli.y/this.we.clientHeight*.3,this.nli+=2*x.PI*this.lli.x/this.we.clientWidth*.5,this.rli=ur(this.rli,-x.PI/2,x.PI/2)}dli(){this.tli=!1}fli(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.we}resetPose(){this.rli=0,this.nli=0}gn(){this.kQ()}constructor(t){this.Rt=!1,this.rli=0,this.nli=0,this.oli=0,this.ili=null,this.gli=new cr,this._li=new cr,this.lli=new cr,this.tli=!1,this.Wci=t=>{38===t.keyCode?this.uli(this.rli+C6):39===t.keyCode?this.hli(this.nli-C6):40===t.keyCode?this.uli(this.rli-C6):37===t.keyCode&&this.hli(this.nli+C6)},this.Zci=t=>{this.gli.tM(t.clientX,t.clientY),this.tli=!0,t.preventDefault()},this.Hci=t=>{t.touches&&1===t.touches.length&&(this.gli.tM(t.touches[0].pageX,t.touches[0].pageY),this.tli=!0,t.preventDefault())},this.er=t=>{if(this.tli||this.fli()){if(this.fli()){let i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this._li.tM(this.gli.x-i,this.gli.y-e)}else this._li.tM(t.clientX,t.clientY);this.lli.Cci(this._li,this.gli),this.gli.D_t(this._li),this.cli()}},this.Kci=t=>{this.tli&&(this._li.tM(t.touches[0].pageX,t.touches[0].pageY),this.lli.Cci(this._li,this.gli),this.gli.D_t(this._li),this.cli())},this.Xci=t=>{this.dli()},this.Jci=t=>{this.dli()},this.$ci=t=>{this.dli()},this.we=t}};r();var bn=ud(pd()),O6=ud(Ad()),R6=(ud(yd()),ud(bd())),P6=(ud(Md()),ud(Td())),z6=ud(Sd()),B6=ud(Nd()),U6=ud(Id()),Q6=ud(Dd());Uc(),r();var F6=["kci","xut","Eci","error"];function Y6(t){let i,e={get stereo(){return t.vli},set stereo(i){t.vli=i},get useDeviceMotionControls(){return t.wli},set useDeviceMotionControls(i){t.wli=i},get direction(){return t.mli},set direction(i){t.mli=i},get verticalFOV(){return t.Ali},set verticalFOV(i){t.Ali=i},get canPresentVR(){return t.yli},get state(){return t.Xgt},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Vx(t,F6,e),e}r();var V6=function(t){return t.Rs="unavailable",t.bli="available",t.za="presenting",t}({});Qi(),bs();var G6=ud(Ld()),W6=new x6(0*yn,0,0);function Z6(t){return Mf(t+180,360)-180}function H6(t,i){let e=t.Pci(i);return 1-e*e<1e-4}var X6=class extends tu{Mli(){this.Tli||((0,G6.installWebVRPolyfill)(),Kl.getVRDisplays?(this.Sli=new VRFrameData,this.Nli(),s.addEventListener("vrdisplayconnect",this.Nli,!1),s.addEventListener("vrdisplaydisconnect",this.Nli,!1),s.addEventListener("vrdisplayactivate",this.Ili,!1),s.addEventListener("vrdisplaydeactivate",this.Dli,!1),s.addEventListener("vrdisplaypresentchange",this.Eli,!1)):Kl.getVRDevices?this.Ajt("Your browser supports WebVR but not the latest version.",vt.VR_PLATFORM_UNSUPPORTED):this.Ajt("Your browser does not support WebVR.",vt.VR_PLATFORM_UNSUPPORTED),this.Tli=!0)}kli(){let t={alpha:!1,antialias:!1,preserveDrawingBuffer:!0};if(!this.Lli){const t=h.createElement("canvas");t.className="theoplayer-vr",pc(t),t.style.zIndex="2",this.t.we.appendChild(t),this.Lli=t}this.lci=this.Lli.getContext("webgl",t),this.lci||(this.lci=this.Lli.getContext("experimental-webgl",t),this.lci)?(this.lci.enable(this.lci.DEPTH_TEST),this.lci.enable(this.lci.CULL_FACE)):this.Ajt("Your browser does not support WebGL.",vt.VR_PLATFORM_UNSUPPORTED)}xli(){let t=this.mli;this.Cli||(this.kli(),this.Cli=!0),this.lci&&(this.jli(new N6(this.lci,this.t,this.Oli)),this.Lli.style.display="",this.gi||(this.gi=new j6(this.Lli)),this.gi.EQ(),this.t.wa.yn($s.aa,this.dp),this.t.yn(ZL.pn,this.dp),this.mli=t,this.dp(),this.Rli=oc(this.Pli))}zli(){let t=this.mli;this.jli(void 0),this.gi&&this.gi.kQ(),this.Lli&&(this.Lli.style.display="none"),this.t.wa.fn($s.aa,this.dp),this.t.fn(ZL.pn,this.dp),this.Rli&&pi(this.Rli),this.mli=t}Bli(){var t;return null==(t=this.t.Ya())?void 0:t.vr}Uli(t){let i=this.Xgt,e=this.vli;this.Qli&&(this.Fli=void 0,this.Dli()),this.Qli=t,this.Qli&&(this.Qli.depthNear=.1,this.Qli.depthFar=1024),this.vli=e,this.Xgt!==i&&this.yo(new en),this.vli!==e&&this.yo(new I6)}Yli(t){let i=this.Xgt;this.Vli=t,t&&this.Mli(),this.Xgt!==i&&this.yo(new en)}jli(t){let i=this.Xgt;this.Gli=t,this.Xgt!==i&&this.yo(new en)}Wli(t){let i=this.Xgt,e=this.vli;this.Zli=t,this.gi&&(t?this.gi.kQ():this.gi.EQ()),this.Xgt!==i&&this.yo(new en),this.vli!==e&&this.yo(new I6)}Hli(t){let i=this.vli;this.Xli=t,this.vli!==i&&this.yo(new I6)}qli(){let t=this.Lli;this.Kli===t.width&&this.Jli===t.height||(t.width=this.Kli,t.height=this.Jli,this.$li())}tdi(t,i){(0,O6.default)(t,i.xci()),(0,P6.default)(t,t)}useDeviceOrientation(){return!!this.Zli||this.idi}edi(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().catch(Bn)}Ajt(t,i){Gr(t),this.yo(new cl(new qi(i,t)))}sdi(){this.yo(new E6)}get vli(){return this.yli?this.Zli:this.Xli}set vli(t){this.yli?t?this.Ili():this.Dli():this.Hli(t)}get wli(){return this.idi}set wli(t){this.vli||(this.idi=t,t&&Ro.Ka&&this.edi())}get mli(){let t=this.sli;return{yaw:Z6(t.Fci*L6),pitch:t.Yci*L6,roll:x.round(t.Vci*L6)}}set mli(t){let i=Z6(t&&+t.yaw||0),e=Z6(t&&+t.pitch||0),s=Z6(t&&+t.roll||0);this.sli=new x6(i*yn,e*yn,s*yn)}get sli(){if(this.Xgt===V6.Rs)return this.ndi.Qci();let t=this.rdi,i=this.odi,e=new x6;return t&&e.Kz(t),i&&e.Kz(i),e}set sli(t){const i=this.sli.Gci();if(this.Xgt===V6.Rs)this.ndi=t.Gci();else{let i=this.Qli;i&&i.resetPose&&i.resetPose(),this.gi&&(this.gi.sli=t),this.ndi=this.sli.Gci()}H6(i,this.ndi)||this.sdi()}get rdi(){let t=this.Fli&&this.Fli.orientation;if(t)return(new Un).Lci(t).Qci()}get odi(){return this.gi&&this.gi.sli}get Ali(){return 180*this.hdi}set Ali(t){t&&t>=0&&t<=180&&(this.hdi=+t/180)}get yli(){return!(!this.Qli||!this.Qli.capabilities.canPresent)}get Xgt(){var t;return this.Vli&&((null==(t=this.Bli())?void 0:t.nativeVR)||this.Gli)?this.Zli?V6.za:V6.bli:V6.Rs}gn(){this.zQ.Ty(),this.Bo(),this.zli(),this.Dli(),this.t.fn(Zi.ro,this.ho),s.removeEventListener("vrdisplayconnect",this.Nli,!1),s.removeEventListener("vrdisplaydisconnect",this.Nli,!1),s.removeEventListener("vrdisplayactivate",this.Ili,!1),s.removeEventListener("vrdisplaydeactivate",this.Dli,!1),s.removeEventListener("vrdisplaypresentchange",this.Eli,!1),this.t=void 0}constructor(t){super(),this.zQ=new Wt,this.Tli=!1,this.ndi=new Un,this.hdi=.4,this.Xli=!1,this.idi=!1,this.Vli=!1,this.md=void 0,this.Oli=Pk.NONE,this.gi=void 0,this.adi=[],this.Qli=void 0,this.Zli=!1,this.Cli=!1,this.Lli=void 0,this.Gli=void 0,this.lci=null,this.Rli=0,this.Sli=void 0,this.Fli=void 0,this.udi=(0,bn.default)(),this.cdi=(0,bn.default)(),this.Kli=0,this.Jli=0,this.ldi=!0,this.ddi=0,this.fdi=()=>{this.t.fn(E.oP,this.fdi);let t=this.Bli();t&&!t.nativeVR&&this.xli()},this.ho=()=>{this.zli();let t=this.Bli();this.md=t,t&&t.panoramaMode!==me.NONE?(t.panoramaMode===me.PM180&&Bi("PanoramaMode is set to '180' while the VR API only supports '360', consider using the WebXR API if you need to play 180 degree content."),this.Yli(!0),t.nativeVR?this.yo(new en):(this.Oli=t.stereoMode,this.t.yn(E.oP,this.fdi))):this.Yli(!1)},this.Ili=async()=>{if(this.Xgt!==V6.Rs&&this.yli){this.ldi=!1,this.gdi();try{await this.Qli.requestPresent([{source:this.Lli}])}catch(t){this.Ajt("Failed to present VR content.",vt.VR_PRESENTATION_ERROR)}finally{this.Eli()}}},this.Dli=async()=>{if(this.Qli)try{await this.Qli.exitPresent()}catch(t){}finally{this.Eli()}},this.Nli=async()=>{try{this.adi=await Ao(Kl.getVRDisplays(),this.zQ.ly),this.Qli&&Qa(this.adi,this.Qli)||this.Uli(this.adi[0])}catch(t){this.adi=[],this.Uli(void 0)}},this.Eli=()=>{this.Wli(!!this.Qli&&this.Qli.isPresenting),this.dp(),this.ldi=!this.Zli,this.ldi?oc(this.$li):this.gdi()},this.dp=()=>{if(!this.Lli)return;const t=this.t.we.offsetWidth,i=this.t.we.offsetHeight;let e=this.Qli;if(e&&this.vli){let t=e.getEyeParameters("left"),i=e.getEyeParameters("right");t&&i&&(this.Kli=2*x.max(t.renderWidth,i.renderWidth),this.Jli=x.max(t.renderHeight,i.renderHeight))}else{let e=Fe.Ys.bp;this.Kli=t*e,this.Jli=i*e}},this.$li=()=>{if(!Ro.Ka||!this.Lli||!this.ldi)return;this.gdi();let t=this.Lli,i=t.offsetWidth+1,e=t.offsetHeight;t.style.width=i+"px",t.style.height=e+"px",this.ddi=oc(this.gdi)},this.gdi=()=>{if(!this.ddi)return;let t=this.Lli;t.style.width="100%",t.style.height="100%",pi(this.ddi),this.ddi=0},this.Pli=()=>{let t=this.Qli,i=this.hdi,e=this.Lli,s=this.Gli,n=this.lci,r=this.Sli,o=this.udi,h=this.cdi;this.qli(),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t&&this.useDeviceOrientation()&&(t.getFrameData(r),this.Fli=r.pose);let a=this.sli.Gci();this.tdi(h,a),t&&t.isPresenting?(this.Rli=t.requestAnimationFrame(this.Pli),n.viewport(0,0,.5*e.width,e.height),s.pr(r.leftProjectionMatrix,h,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(r.rightProjectionMatrix,h,"right"),t.submitFrame()):(this.Rli=oc(this.Pli),(0,B6.default)(o,x.PI*i,e.width/e.height,.1,1024),this.vli?(n.viewport(0,0,.5*e.width,e.height),s.pr(o,h,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(o,h,"right")):(n.viewport(0,0,e.width,e.height),s.pr(o,h))),H6(a,this.ndi)||(this.ndi.D_t(a),this.sdi())},this.t=t,this.sli=W6,this.ga=Y6(this),this.t.yn(Zi.ro,this.ho),this.ho()}};r(),Ha((function(t){return class extends t{ma(){if(null!==this._di){const t=this._di.ga;return fe(super.ma(),{vr:t})}return super.ma()}gn(){var t;null==(t=this._di)||t.gn(),super.gn()}constructor(t,i){super(t,i),this._di=null,i.vr.useWebXR||(this._di=new X6(this))}}}),Hn.nu),r(),r(),r(),r();var q6=class{EQ(){this.He||(this.He=!0,this.Vs.addEventListener("mousedown",this.Zci),this.Vs.addEventListener("touchstart",this.Hci),s.addEventListener("mousemove",this.er),s.addEventListener("touchmove",this.Kci),s.addEventListener("mouseup",this.Xci),s.addEventListener("touchend",this.Jci),this.qci(s))}kQ(){this.He&&(this.He=!1,this.Vs.removeEventListener("mousedown",this.Zci),this.Vs.removeEventListener("touchstart",this.Hci),s.removeEventListener("mousemove",this.er),s.removeEventListener("touchmove",this.Kci),s.removeEventListener("mouseup",this.Xci),s.removeEventListener("touchend",this.Jci),this.eli(s))}qci(t){if(Kd(t));else if(Jd(t))try{t.parent.addEventListener("mouseup",this.Xci),this.qci(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.$ci)}}eli(t){if(t.document.documentElement.removeEventListener("mouseleave",this.$ci),Jd(t))try{t.parent.removeEventListener("mouseup",this.Xci),this.eli(t.parent)}catch(t){}}dli(){this.vdi=!1}cli(){const t=this.mdi.wdi;t.yaw+=2*x.PI*this.pdi.x*.4/this.Vs.clientWidth,t.pitch+=2*x.PI*this.pdi.y*.5/this.Vs.clientHeight,t.pitch=ur(t.pitch,-x.PI/2,x.PI/2),this.mdi.wdi=t}fli(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Vs}gn(){this.kQ()}constructor(t,i){this.He=!1,this.Adi=new cr,this.ydi=new cr,this.pdi=new cr,this.vdi=!1,this.Zci=t=>{this.Adi.tM(t.clientX,t.clientY),this.vdi=!0,t.preventDefault(),t.stopPropagation()},this.Hci=t=>{t.touches&&1===t.touches.length&&(this.Adi.tM(t.touches[0].pageX,t.touches[0].pageY),this.vdi=!0,t.preventDefault())},this.er=t=>{if(this.vdi||this.fli()){if(this.fli()){const i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.ydi.tM(this.Adi.x-i,this.Adi.y-e)}else this.ydi.tM(t.clientX,t.clientY);this.pdi.Cci(this.ydi,this.Adi),this.Adi.D_t(this.ydi),this.cli()}},this.Kci=t=>{this.vdi&&(this.ydi.tM(t.touches[0].pageX,t.touches[0].pageY),this.pdi.Cci(this.ydi,this.Adi),this.Adi.D_t(this.ydi),this.cli())},this.Xci=()=>{this.dli()},this.Jci=()=>{this.dli()},this.$ci=()=>{this.dli()},this.mdi=t,this.Vs=i}};r();var K6=class{bdi(t){t.clearColor(...this.s$),t.clear(t.COLOR_BUFFER_BIT)}Mdi(t,i){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.Tdi.forEach((e=>{e.Mdi(t,i)}))}Sdi(t){this.Tdi.push(t)}Ndi(){this.Tdi=[]}constructor(){this.s$=[0,0,0,1],this.Tdi=[]}};r(),r(),r();var J6=class{Idi(t,i,e){const s=t.createBuffer();return null===s?(Bi("Failed to create buffer."),null):(t.bindBuffer(i,s),t.bufferData(i,e,t.STATIC_DRAW),s)}constructor(t,i,e,s,n){this.Ddi=t,this.cM=this.Idi(t,i,e),this.Edi=s,this.Zp=n,this.kdi=!1,this.Ldi=0,this.ic=0}},$6=class extends J6{EQ(t){if(null===this.cM)return void Bi("Attempted to enable buffer that failed to initialize.");if(null===t)return void Bi("Attempted to enable attribute without location.");const i=this.Ddi;i.bindBuffer(i.ARRAY_BUFFER,this.cM),i.vertexAttribPointer(t,this.Edi,this.Zp,this.kdi,this.Ldi,this.ic),i.enableVertexAttribArray(t)}kQ(t){t&&this.Ddi.disableVertexAttribArray(t)}constructor(t,i,e){super(t,t.ARRAY_BUFFER,i,e,t.FLOAT)}};var t9=class extends J6{xdi(){const t=this.Ddi;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.cM),t.drawElements(t.TRIANGLES,this.Cdi,this.Zp,this.ic)}constructor(t,i){super(t,t.ELEMENT_ARRAY_BUFFER,i,1,t.UNSIGNED_SHORT),this.Cdi=i.length}};r();var i9=function(t){return t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor",t}({}),fh=function(t){return t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture",t}({}),e9=function(t){return t.Normal="vNormal",t.Color="vColor",t.UV="vUV",t}({}),s9=class{jdi(t,i,e){const s=this.Odi(t,t.VERTEX_SHADER,i),n=this.Odi(t,t.FRAGMENT_SHADER,e);if(null===s||null===n)return Bi("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(Bi("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(Bi("Failed to initialize shader program"),null))}Odi(t,i,e){const s=t.createShader(i);if(null===s)return Bi("failed to create shader."),null;if(t.shaderSource(s,e),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(s);return Bi("Failed to compile shader with error: "+i),t.deleteShader(s),null}return s}Rdi(){return this.Pdi}zdi(t){const i=this.Pdi;if(null===i)return Bi("Attempted to retrieve attribute location when shader program was not initialized"),null;const e=this.Ddi.getAttribLocation(i,t);return-1===e?null:e}Bdi(t){const i=this.Pdi;if(null===i)return Bi("Attempted to retrieve uniform location when shader program was not initialized"),null;const e=this.Ddi.getUniformLocation(i,t);return null===e&&Gr("Attempted to retrieve nonexistent uniform: "+t),e}constructor(t,i,e){this.Ddi=t,this.Pdi=this.jdi(this.Ddi,i,e)}},n9=class{Udi(){const t=this.Qdi.length,i=x.max(...this.Fdi);return i>=t?(Gr("Created geometry where largest index ("+i+") is larger than/equal to attribute array size ("+t+")"),!1):(i<t-1&&Bi("Created geometry where largest index ("+i+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.Ydi||this.Ydi.length===t||(Gr("Created geometry where position ("+t+") and uv ("+this.Ydi.length+") buffers have different length."),!1))}Vdi(t,i){if(!this.Udi())throw new b("Failed to validate buffers for WebGLGeometry.");const e=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y,t.z)})),new $6(t,new Float32Array(e),3)}(t,this.Qdi),s=function(t,i){return new t9(t,new Uint16Array(i))}(t,this.Fdi),n=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y)})),new $6(t,new Float32Array(e),2)}(t,this.Ydi);return new r9(e,s,n,i)}constructor(t,i,e){this.Qdi=t,this.Fdi=i,this.Ydi=e}},r9=class{Gdi(){this.Qdi.EQ(this.Wdi),null!==this.Zdi&&this.Ydi.EQ(this.Zdi)}Hdi(){this.Qdi.kQ(this.Wdi),null!==this.Zdi&&this.Ydi.kQ(this.Zdi)}Mdi(){this.Fdi.xdi()}constructor(t,i,e,s){this.Qdi=t;const n=s.zdi(i9.VertexPos);if(null===n)throw new b("Failed to get position attribute location.");this.Wdi=n,this.Ydi=e,this.Zdi=s.zdi(i9.VertexUV),this.Fdi=i}},o9=class extends n9{constructor(t=1,i=32,e=16,s=0,n=2*x.PI,r=0,o=x.PI){let h=0;const a=x.min(r+o,x.PI),u=[],c=[],l=[],d=[];for(let u=0;u<=e;u++){const f=[],g=u/e;let _=0;0===u&&0===r?_=.5/i:u===e&&a===x.PI&&(_=-.5/i);for(let e=0;e<=i;e++){const a=e/i,u=-t*x.cos(s+a*n)*x.sin(r+g*o),d=t*x.cos(r+g*o),v=t*x.sin(s+a*n)*x.sin(r+g*o);c.push(new vn(u,d,v)),l.push(new cr(a+_,1-g)),f.push(h++)}d.push(f)}for(let t=0;t<e;t++)for(let s=0;s<i;s++){const i=d[t][s+1],n=d[t][s],o=d[t+1][s],h=d[t+1][s+1];(0!==t||r>0)&&u.push(i,n,h),(t!==e-1||a<x.PI)&&u.push(n,o,h)}super(c,u,l)}};r(),r();var h9=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],a9=class{Xdi(){const t=this.Ddi;t.activeTexture(this.qdi),t.bindTexture(t.TEXTURE_2D,this.Kdi)}ur(){const t=this.Ddi;t.activeTexture(this.qdi),t.bindTexture(t.TEXTURE_2D,this.Kdi),t.uniform1i(this.Jdi,0)}$di(t){const i=this.Ddi;i.bindTexture(i.TEXTURE_2D,this.Kdi),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,this.u4,this.tfi,this.ifi,this.efi,t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}sfi(t){const i=this.Ddi;i.bindTexture(i.TEXTURE_2D,this.Kdi),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),t.Ow.UX(i,i.TEXTURE_2D,this.u4,this.tfi,this.ifi,this.efi),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,i){if(this.Ddi=t,this.Kdi=t.createTexture(),null===this.Kdi)throw new b("Failed to create texture");const e=i.Bdi(fh.Texture);if(null===e)throw new b("Failed to get texture location.");this.Jdi=e,t.bindTexture(t.TEXTURE_2D,this.Kdi),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.qdi=t.TEXTURE0,this.u4=0,this.tfi=t.RGBA,this.ifi=t.RGBA,this.efi=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.u4,this.tfi,2,2,0,this.ifi,this.efi,new T(h9))}},u9="\n    attribute vec4 "+i9.VertexPos+";\n    attribute vec2 "+i9.VertexUV+";\n\n    uniform mat4 "+fh.ModelViewMat+";\n    uniform mat4 "+fh.ProjectionMat+";\n    \n    varying mediump vec2 "+e9.UV+";\n    \n    void main() {\n      gl_Position = "+fh.ProjectionMat+" * "+fh.ModelViewMat+" * "+i9.VertexPos+";\n      "+e9.UV+" = "+i9.VertexUV+";\n    }\n",c9="\n    varying mediump vec2 "+e9.UV+";\n    \n    uniform sampler2D "+fh.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+fh.Texture+", "+e9.UV+");\n    }\n",l9=class{Rdi(){return this.Pdi}EQ(){this.Ddi.useProgram(this.Pdi.Rdi()),this.Kdi.ur()}nfi(t){this.Kdi.$di(t)}rfi(t){this.Kdi.sfi(t)}constructor(t){this.Ddi=t,this.Pdi=new s9(t,u9,c9),this.Kdi=new a9(t,this.Pdi)}};r();var d9=class{Mdi(t,i){if(this.ofi(i.hfi)){this.afi.Gdi(),this.ufi.EQ();const e=this.cfi,s=i.lfi,n=(0,z6.default)(s,s,e);t.uniformMatrix4fv(this.dfi,!1,n);const r=i.ffi;t.uniformMatrix4fv(this.gfi,!1,r),this.afi.Mdi(),this.afi.Hdi()}}ofi(t){return"none"===this.hfi||"right"!==t&&"left"===this.hfi||"right"===t&&"right"===this.hfi}get cfi(){const t=(0,bn.default)(),i=this.uo;return(0,Q6.default)(t,t,i.xci()),(0,U6.default)(t,t,this._fi.x,new Float32Array([1,0,0])),(0,U6.default)(t,t,this._fi.y,new Float32Array([0,1,0])),(0,U6.default)(t,t,this._fi.z,new Float32Array([0,0,1])),t}constructor(t,i,e,s){this.uo=new vn,this._fi=new vn,this.hfi="none",this.ufi=e;const n=e.Rdi();this.afi=i.Vdi(t,n),s&&(this.hfi=s);const r=n.Bdi(fh.ModelViewMat);if(null===r)throw new b("Failed to get model view matrix location.");this.dfi=r;const o=n.Bdi(fh.ProjectionMat);if(null===o)throw new b("Failed to get projection matrix location.");this.gfi=o}};r();var f9=class{vfi(){const t=(0,bn.default)();return(0,B6.default)(t,this.wfi,this.mfi,this.pfi,this.Afi)}yfi(){this.bfi=this.vfi()}get ffi(){return new Float32Array(this.bfi)}set ffi(t){this.bfi=t}Mfi(){const t=(0,bn.default)(),i=(0,R6.default)((0,bn.default)(),this.Tfi.xci()),e=(0,O6.default)((0,bn.default)(),this.Sfi.xci());return(0,z6.default)(t,i,e),(0,P6.default)(t,t),t}Nfi(){this.Ifi=this.Mfi()}get lfi(){return new Float32Array(this.Ifi)}Dfi(){this.Nfi(),this.yfi()}tr(){this.Tfi=new vn,this._fi=new Un,this.Dfi()}Efi(t){const i=this.Sfi.Qci();i.Kz(t),this._fi=i.Gci()}kfi(t){this._fi=t.Gci()}get Lfi(){return this.wfi}set Lfi(t){this.wfi=t,this.yfi()}get xfi(){return this.mfi}set xfi(t){this.mfi=t,this.yfi()}get uo(){return(new vn).D_t(this.Tfi)}set uo(t){this.Tfi=t,this.Nfi()}get _fi(){return(new Un).D_t(this.Sfi)}set _fi(t){this.Sfi=t,this.Nfi()}constructor(t){this.wfi=72*x.PI/180,this.mfi=1.77,this.pfi=.1,this.Afi=100,this.hfi="none",this.Tfi=new vn,this.Sfi=new Un,this.bfi=this.vfi(),this.Ifi=this.Mfi(),t&&(this.hfi=t)}};Qi(),Uc();var g9=1e-4,_9=class extends tu{fo(){this.Cfi(),this.Ddi?Kl.xr?(Kl.xr.addEventListener("devicechange",this.jfi),this.Ofi().then((()=>{this.Rfi?(this.Pfi(),this.zfi(),this.Bfi()):this.Ajt("XR: Inline session not available. Panorama functionality will not work.",vt.VR_PRESENTATION_ERROR)}))):this.Ajt("Your browser does not support WebXR",vt.VR_PLATFORM_UNSUPPORTED):this.Ajt("Your browser does not support webGL",vt.VR_PLATFORM_UNSUPPORTED)}Bfi(){this.ta.wa.yn($s.aa,this.mn),this.ta.yn(ZL.pn,this.mn),this.ta.yn(Zi.ro,this.ho),this.ta.yn(Zi.bb,this.sZ)}Cfi(){this.Ufi=h.createElement("canvas"),this.Ufi.className="theoplayer-vr",this.Ufi.style.zIndex="2",this.Ufi.style.background="black",this.Ufi.style.display="none",this.ta.we.appendChild(this.Ufi),pc(this.Ufi);let t=this.Ufi.getContext("webgl2");t||(t=this.Ufi.getContext("webgl")),t&&(this.Ddi=t,this.Qfi=new q6(this,this.Ufi))}async Ofi(){Kl.xr?await Promise.all([Kl.xr.isSessionSupported("inline").then((t=>{this.Rfi=t})).catch((t=>{this.Rfi=!1,this.Ajt("exception when calling xr.isSessionSupported for inline session: "+t,vt.VR_PRESENTATION_ERROR)})),Kl.xr.isSessionSupported("immersive-vr").then((t=>{this.Ffi=t})).catch((t=>{this.Ffi=!1,this.Ajt("exception when calling xr.isSessionSupported for immersive-vr session: "+t,vt.VR_PRESENTATION_ERROR)}))]):(this.Rfi=!1,this.Ffi=!1)}Pfi(){const t=this.Bli();this.KS=t,this.Vli=Boolean(t),this.Vli&&(this.Yfi=(null==t?void 0:t.stereoMode)||Pk.NONE,this.Vfi=(null==t?void 0:t.panoramaMode)||me.NONE,this.Gfi&&(this.Wfi(this.Vfi,this.Yfi),this.xli()))}Wfi(t,i){if(!this.Ddi||t===me.NONE)return;const e=this.Ddi;let s,n;this.Zfi.Ndi(),t===me.PM360?(s=2*x.PI,n=-x.PI/2):(s=x.PI,n=-x.PI);const r=new o9(16,60,40,0,s),o=[],h=[];for(let t=0;t<r.Ydi.length;t++){const e=r.Ydi[t];switch(i){case Pk.NONE:o.push(e),h.push(e);break;case Pk.VERTICAL:o.push(new cr(e.x,.5*e.y)),h.push(new cr(e.x,.5*e.y+.5));break;case Pk.HORIZONTAL:o.push(new cr(.5*e.x,e.y)),h.push(new cr(.5*e.x+.5,e.y))}}r.Qdi.forEach((t=>{t.x*=-1}));const a=new n9(r.Qdi,r.Fdi,o),u=new n9(r.Qdi,r.Fdi,h);this.Hfi=new l9(e);const c=new d9(e,a,this.Hfi,"left");c._fi.y=n,this.Zfi.Sdi(c);const l=new d9(e,u,this.Hfi,"right");l._fi.y=n,this.Zfi.Sdi(l)}xli(){this.Ufi.style.display="block",this.Rfi&&this.ta.yn(Zi.so,this.Xfi)}zli(){this.qfi(),this.ta.fn(Zi.so,this.Xfi),this.Ufi.style.display="none"}Kfi(){this.Jfi(),this.$fi()}async tgi(){if(!this.igi&&this.Rfi)try{const t=await Ao(Kl.xr.requestSession("inline"),this.zQ.ly);let i;i=Ro.Qs?Ro.vf?"viewer":"local":"viewer";const e=await t.requestReferenceSpace(i);t.addEventListener("end",this.Jfi),this.egi=e,this.igi=t,this.Qfi.EQ(),this.sgi(),await t.updateRenderState({baseLayer:new XRWebGLLayer(t,this.Ddi),inlineVerticalFieldOfView:this.wfi*yn})}catch(t){this.Jfi(),this.Ajt(t,vt.VR_PRESENTATION_ERROR)}}Jfi(){this.igi&&(this.qfi(),this.Qfi.kQ(),this.igi.removeEventListener("end",this.$fi),this.igi.end(),this.igi=null,this.zfi())}async ngi(){if(!this.rgi&&this.Ffi){this.qfi();try{const t=await Ao(Kl.xr.requestSession("immersive-vr"),this.zQ.ly),i=await t.requestReferenceSpace("local");t.addEventListener("end",this.$fi),this.ogi=i,this.rgi=t,await this.hgi(),this.sgi()}catch(t){this.$fi(),this.Ajt(t,vt.VR_PRESENTATION_ERROR)}}}async hgi(){const t=this.Ddi,i=this.rgi;this.Ufi&&t&&i&&!this.agi&&(this.Ufi.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),this.Ufi.addEventListener("webglcontextrestored",(()=>{this.Wfi(this.Vfi,this.Yfi)})),this.agi=!0,await t.makeXRCompatible(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}))}zfi(){if(!this.rgi&&this.Ddi){const t=this.Ddi,i=this.Ufi.clientWidth,e=this.Ufi.clientHeight,s=Fe.Ys.bp;this.Ufi.width=i*s,this.Ufi.height=e*s,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}sgi(){null===this.ugi&&(this.cgi(),this.lgi?this.ugi=this.lgi.requestAnimationFrame(this.dgi):(this.fgi(),Bi("XR: Attempted to start animation loop without inline or immersive session.")))}qfi(){null!==this.ugi&&(this.fgi(),this.lgi?this.lgi.cancelAnimationFrame(this.ugi):Bi("XR: Attempted to stop animation loop by cancelAnimationFrame even though there is no session running."),this.ugi=null)}cgi(){if(null!==this.ggi)return;const t=this.ta.jk();if(void 0===t||!(t instanceof HTMLVideoElement))return void Bi("No video source.");if("function"!=typeof t.requestVideoFrameCallback)return;const i=()=>{this.Hfi.rfi(this.ta),this.ggi=t.requestVideoFrameCallback(i)};this._gi=t,this.ggi=t.requestVideoFrameCallback(i)}fgi(){var t,i;null!==this.ggi&&(null==(i=this._gi)||null==(t=i.cancelVideoFrameCallback)||t.call(i,this.ggi),this._gi=null,this.ggi=null)}vgi(){return!!this.wgi||(Ro.Ka?this.mgi&&this.pgi:this.mgi)}edi(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.pgi="granted"===t}))}Agi(){return(!this.KE()||Boolean(this.ygi))&&this.bgi()}KE(){return this.ta.KE}bgi(){return this.ta.fk>=2}get Vli(){return this.Mgi}set Vli(t){const i=this.Xgt;this.Mgi=t,this.Xgt!==i&&this.yo(new en)}get Gfi(){return this.Vfi!==me.NONE}get Vfi(){return this.Tgi}set Vfi(t){const i=this.Xgt;this.Tgi=t,this.Xgt!==i&&this.yo(new en)}get Ffi(){return this.Sgi}set Ffi(t){const i=this.Xgt;this.Sgi=t,this.Xgt!==i&&this.yo(new en)}get yli(){return this.Ffi}get lgi(){return this.rgi||this.igi}get rgi(){return this.wgi}set rgi(t){const i=this.Xgt;this.wgi=t,this.Xgt!==i&&this.yo(new en)}get Ngi(){return this.ogi||this.egi}get mli(){const t=this.Igi.Qci();return{yaw:t.Fci*L6,pitch:t.Yci*L6,roll:t.Vci*L6}}set mli(t){const i=v9(t&&t.pitch||0)*yn,e=v9(t&&t.roll||0)*yn,s=v9(t&&t.yaw||0)*yn,n=new x6(s,i,e);this.Igi=n.Gci()}get wdi(){const t=this.Dgi.Qci();return{yaw:t.Fci,pitch:t.Yci,roll:t.Vci}}set wdi(t){const i=w9(t&&t.pitch||0),e=w9(t&&t.roll||0),s=w9(t&&t.yaw||0),n=new x6(s,i,e);this.Dgi=n.Gci()}get Xgt(){return this.Vli?this.rgi?V6.za:V6.bli:V6.Rs}get vli(){return null!==this.rgi}set vli(t){const i=this.vli;t&&this.Ffi?this.ngi():this.$fi(),this.vli!==i&&this.yo(new I6)}get wli(){return this.mgi}set wli(t){null===this.wgi&&(this.mgi=t,t&&Ro.Ka&&this.edi())}get Ali(){return this.wfi}set Ali(t){t&&t>=0&&t<=180&&(this.wfi=t,null!==this.igi&&this.igi.updateRenderState({inlineVerticalFieldOfView:this.wfi*yn}))}Ajt(t,i){Gr(t),this.yo(new cl(new qi(i,t)))}Bli(){const t=this.ta.Ya();return t&&t.vr}gn(){this.zQ.Ty(),this.Kfi(),this.Bo(),this.ta=void 0,this.Ddi=void 0}constructor(t){super(),this.zQ=new Wt,this.Rfi=!1,this.Sgi=!1,this.Igi=new Un,this.Egi=new Un,this.Dgi=new Un,this.wfi=74,this.mgi=!1,this.KS=void 0,this.Yfi=Pk.NONE,this.Mgi=!1,this.Tgi=me.NONE,this.Zfi=new K6,this.igi=null,this.wgi=null,this.egi=null,this.ogi=null,this.agi=!1,this.ugi=null,this._gi=null,this.ggi=null,this.ygi=0,this.pgi=!1,this.jfi=()=>{this.Ofi()},this.ho=()=>{this.zli(),this.Kfi(),this.Pfi()},this.Xfi=()=>{this.tgi()},this.$fi=()=>{this.rgi&&(ig("Ending immersive session"),this.qfi(),this.rgi.removeEventListener("end",this.$fi),this.rgi.end(),this.rgi=null,this.ogi=null,this.agi=!1,this.igi?this.sgi():this.tgi())},this.mn=()=>{this.zfi()},this.dgi=(t,i)=>{if(!this.Ddi)return;const e=this.Ddi,s=this.lgi;if(null===this.ggi&&this.Agi()&&(this.Hfi.rfi(this.ta),this.ygi>0&&(this.ygi-=1)),null===s||void 0===i)return void Bi("Attempted to run webXR animation loop without session or xrFrame.");this.ugi=s.requestAnimationFrame(this.dgi);const n=s.renderState.baseLayer,r=i.getViewerPose(this.Ngi);if(void 0===n||void 0===r)return void Bi("Attempted to run webXR animation loop without glLayer or viewerPose.");e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer);let o=new x6,h=0;for(const t of r.views){const i=new f9(t.eye);if(i.ffi=t.projectionMatrix,this.vgi()){let e;if(Ro.Qs&&Ro.vf&&null===this.wgi){if(e=t.transform.inverse.orientation,0===e.x&&0===e.y&&0===e.z&&1===e.w)return}else e=t.transform.orientation;i._fi=new Un(e.x,e.y,e.z,e.w)}this.igi&&i.Efi(this.Dgi.Qci()),o=o.Kz(i._fi.Qci()),h+=1;const s=n.getViewport(t);s&&e.viewport(s.x,s.y,s.width,s.height),this.Zfi.Mdi(e,i)}const a=new x6(o.Fci/h,o.Yci/h,o.Vci);this.Igi=a.Gci(),function(t,i){const e=t.Pci(i);return 1-e*e<g9}(this.Igi,this.Egi)||(this.Egi.D_t(this.Igi),this.yo(new E6))},this.sZ=()=>{this.ygi=5},this.ta=t,this.ga=Y6(this),this.fo()}};function v9(t){return Mf(t+180,360)-180}function w9(t){return Mf(t+x.PI,2*x.PI)-x.PI}Ha((function(t){return class extends t{ma(){return null!==this.mdi?fe(super.ma(),{vr:this.mdi.ga}):super.ma()}gn(){var t;null==(t=this.mdi)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.mdi=null,i.vr.useWebXR&&(this.mdi=new _9(this))}}}),Hn.nu),r(),r(),Qi();var m9=class extends gs{get ga(){return this.Za||(this.Za=function(t){let i,e={get status(){return t.nI},get tasks(){return t.mei},get network(){return t.wZ.ga},createTask:(i,e)=>t.kgi(i,e),addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new es(t,e),e}(this)),this.Za}get nI(){return this.Lgi.nI}get mei(){return this.Lgi.mei.ga}get wZ(){return this.Lnt}kgi(t,i,e){let s,n;if(void 0===e&&(e="persistent"),!t)throw new b("Unexpected - The source description is undefined");if(s=tl(t),n=j3(i),Qk(s))throw new b("Invalid source description");return this.Lgi.fei(s,n).ga}constructor(t,i){super(),this.Lgi=t,this.Lnt=i,this.Lgi.yn("xut",this.Ds)}};var p9=function(){const t=new Ex(Fe.wE,!1),i=_h.Ld,e=new Q3(t),s=new L3(i,e),n=new Lx(t),r=new W4(i.Xot,s,"persistent");return new m9(r,n)}().ga;function A9(t,i){if("function"==typeof t.getAll){return y9(void 0===i?t.getAll():t.getAll(i))}return function(t){let i=new xh,e=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(e.push(s.value),s.continue()):i.sM(e),Bn()},t.onerror=()=>{i.nM(t.error),Bn()},i.rM}(void 0===i?t.openCursor():t.openCursor(i))}function y9(t){return new Promise(((i,e)=>{t.onsuccess=()=>{i(t.result),Bn()},t.onerror=()=>{e(t.error),Bn()}}))}r(),r(),r(),r(),r(),r();var b9=class{Ty(){if(this.Yh)try{this.Vot.abort(),this.Yh=!1}catch(t){}}constructor(t){this.Vot=t,this.Yh=!0,this.rM=new Promise(((t,i)=>{this.Vot.oncomplete=()=>{this.Yh=!1,t(),Bn()},this.Vot.onerror=()=>{this.Yh&&(this.Yh=!1,i(this.Vot.error||new b("Transaction error")),Bn())},this.Vot.onabort=()=>{this.Yh=!1,i(new b("Transaction aborted")),Bn()}}))}};async function M9(t,i,e){const s=new b9(t);try{const[t]=await Promise.all([i(e),s.rM]);return t}catch(t){if(!s.Yh)throw new Cl("IDBTransaction committed prematurely",t);throw t}finally{s.Ty()}}var T9=class{get l(){return this.lD.l}xot(t){return Promise.resolve("persistent"===t)}Cot(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(kr(i));return y9(this.xgi($h.Jot).put(t))}async jot(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(kr(i));for(const e of t)await this.Cot(e,i)}async Jb(t){return Boolean(await this.$b(t))}$b(t){return y9(this.xgi($h.Kot).get(t))}Oot(t,i){return y9(this.xgi($h.Kot).index(i).get(t))}async Sot(t){const i=[];for(let e of t){const t=await this.$b(e);t&&i.push(t)}return i}Rot(){return A9(this.xgi($h.Kot))}Pot(t){return A9(this.xgi($h.Kot),t)}zot(t,i){return A9(this.xgi($h.Kot).index(i),t)}wS(t){return y9(this.xgi($h.Jot).delete(t))}async Bot(t){for(const i of t)await this.wS(i)}Uot(){return y9(this.xgi($h.Jot).clear())}xgi(t){if(!this.Cgi)throw new b("Lock was released");if(!function(t,i){return t===$h.Kot&&i===$h.Kot||i===$h.Jot}(t,this.Cgi.mode))throw new b("Incompatible transaction mode: "+this.Cgi.mode+", expected "+t);return this.Cgi.objectStore(this.l)}jgi(){this.lD.Ogi(this),this.Cgi=void 0}constructor(t,i){this.lD=t,this.Cgi=i}};bs();var Wi=class{xot(t){return Promise.resolve("persistent"===t)}Cot(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(kr(i)):this.Vot($h.Jot,(i=>i.Cot(t)))}jot(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(kr(i)):this.Vot($h.Jot,(i=>i.jot(t)))}Jb(t){return this.Vot($h.Kot,(i=>i.Jb(t)))}$b(t){return this.Vot($h.Kot,(i=>i.$b(t)))}Oot(t,i){return this.Vot($h.Kot,(e=>e.Oot(t,i)))}Sot(t){return this.Vot($h.Kot,(i=>i.Sot(t)))}Rot(){return this.Vot($h.Kot,(t=>t.Rot()))}Pot(t){return this.Vot($h.Kot,(i=>i.Pot(t)))}zot(t,i){return this.Vot($h.Kot,(e=>e.zot(t,i)))}wS(t){return this.Vot($h.Jot,(i=>i.wS(t)))}Bot(t){return this.Vot($h.Jot,(i=>i.Bot(t)))}Uot(){return this.Vot($h.Jot,(t=>t.Uot()))}$Dt(t){return this.Rgi(),this.UDt=new T9(this,t),this.UDt}Rgi(){if(void 0!==this.UDt)throw new b("Already locked")}Ogi(t){if(this.UDt!==t)throw new b("Incorrect lock");this.UDt=void 0}Wo(t){return this.Go.Wo(t)}Vot(t,i){return this.Wo((()=>this.Pgi(t,i)))}async Pgi(t,i){this.Rgi();const e=this.zgi.transaction(this.l,t),s=this.$Dt(e);try{return await M9(e,i,s)}finally{s.jgi()}}Bgi(t){this.Rgi();const i=this.zgi.transaction(this.l,t);return this.$Dt(i)}static Ugi(t,i){let e;const s=new Promise((t=>{e=t})),n=t.reduce(((t,i)=>t.then((()=>{let t;const e=new Promise((i=>{t=i}));return i.Wo((()=>(t(),s))).catch(Bn),e}))),Promise.resolve());return e(n.then(i)),s}constructor(t,i){this.UDt=void 0,this.Go=new Wa,this.zgi=t,this.l=i}};r(),r(),r(),r(),r();var S9={cj:17,Qgi:async t=>{const{transaction:i,database:e}=t,s=i.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)e.deleteObjectStore(s[t]);e.createObjectStore(k9,{keyPath:"id"}),e.createObjectStore(L9,{keyPath:"key"}),e.createObjectStore(x9,{keyPath:"key"});e.createObjectStore(C9,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");e.createObjectStore(j9,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},N9=class{async Fgi(t){for(const i of this.Ygi)this.Vgi<i.cj&&await i.Qgi(t)}constructor(t){this.Vgi=t}},I9=class extends N9{get Ygi(){return[S9]}},D9=new class{Ggi(t){this.Wgi=t}xst(t){return this.Wgi(t)}constructor(){this.Wgi=t=>new I9(t)}},E9=18,k9="cachingTask",L9="licences",x9="manifest",C9="segment",j9="segmentMetadata";async function O9(){!function(){if("undefined"==typeof indexedDB)throw new b("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",E9);return t.addEventListener("upgradeneeded",R9),await y9(t)}async function R9(t){const i=t.oldVersion<=E9?t.oldVersion:-1,e=t.target,s=e.result,n=e.transaction,r=D9.xst(i),o={database:s,transaction:n};await M9(n,(t=>r.Fgi(t)),o)}var P9=class{static get Ld(){return this.uht||(this.uht=O9()),this.uht}};P9.uht=void 0,r();var z9=class{Vot(t){return t(this)}jgi(){this.Zot.jgi(),this.Wot.jgi(),this.Hot.jgi(),this.Xot.jgi(),this.qot.jgi()}constructor(t,i){this.Zot=t.Zot.$Dt(i),this.Wot=t.Wot.$Dt(i),this.Hot=t.Hot.$Dt(i),this.Xot=t.Xot.$Dt(i),this.qot=t.qot.$Dt(i)}};_h.ja(class t{static async xst(){const i=await P9.Ld;return new t(i)}Vot(t){const i=this.allCollections;return Wi.Ugi(i,(()=>this.Pgi(i,t)))}async Pgi(t,i){const e=t.map((t=>t.l)),s=this.zgi.transaction(e,$h.Jot),n=new z9(this,s);try{return await M9(s,i,n)}finally{n.jgi()}}get allCollections(){return[this.Wot,this.Zot,this.Hot,this.Xot,this.qot]}constructor(t){this.zgi=t,this.Zot=new Wi(t,j9),this.Wot=new Wi(t,C9),this.Hot=new Wi(t,x9),this.Xot=new Wi(t,k9),this.qot=new Wi(t,L9)}}.xst),r(),r(),r();var B9=class{Zgi(t){const i=this.xK.bE(),e=t.createGain();for(const s of i){t.createMediaElementSource(s).connect(e)}return e}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){const t=this;return{createAudioSourceNode:i=>t.Zgi(i)}}constructor(t){this.Za=void 0,this.xK=t}};Ha((function(t){return class extends t{ma(){const t=this.Hgi.ga;return fe(super.ma(),{get audio(){return t}})}constructor(t,i){super(t,i),this.Hgi=new B9(this.xa)}}}),Hn.nu),r(),r();Ha((function(t){return class i extends t{ka(t){const e=i.Xgi(this.md.analytics),s=i.Xgi(t?t.analytics:void 0);e||s?this.qgi(Ei({},e,s)):this.Kgi&&this.Kgi.disable(),super.ka(t)}qgi(t){if(this.Kgi)this.Kgi.enable(),this.Kgi.setOptions(t);else{const i=s.youbora;if(!i)throw new b("Youbora JavaScript library not loaded.");if(!i.adapters.TheoPlayer2)throw new b("TheoPlayer2 adapter not available on Youbora JavasScript library");const e=new i.Plugin(t);e.setAdapter(new i.adapters.TheoPlayer2(this.ga)),this.Vc&&i.adapters.TheoPlayer2.NativeAdsAdapter&&e.setAdsAdapter(new i.adapters.TheoPlayer2.NativeAdsAdapter(this.ga)),this.Kgi=e}}static Xgi(t){if(t){const i=t.filter((t=>"youbora"===t.integration));if(0===i.length)return;if(i.length>1)throw new b("Only one youbora analytics configuration expected");const e=i[0],{integration:s}=e;return iT(e,["integration"])}}gn(){this.Kgi&&this.Kgi.disable(),super.gn()}constructor(t,i){super(t,i)}}}),Hn.$nt),r(),r(),r();var U9=1,Q9=0,F9=1e3,Y9=class t extends rM{Jgi(){const t=this.ct===1/0,i=t?U9:Q9,e=t?-1:this.ct,s=Ms(this.ta.rt.AL,this.$gi);this.t_i.setPresentationInformation(new this.i_i(i,e,s))}$gi(t){const i=t.UL.AL,e=[];for(let t=0;t<i.length;t++){const s=i[t];s.ji&&s.Ti&&e.push({trackIdx:t,bitrate:s.FY,width:s.ji,height:s.Ti,codecIdentifier:s.cht})}return e}e_i(){return this.ta.xE()*F9}get ct(){return this.ta._d()*F9}get s_i(){return this.n_i}get r_i(){return this.o_i}set r_i(t){this.o_i=t,t&&this.t_i.reportPlayerState(t)}set h_i(t){this.a_i=t}u_i(){return v((()=>{this.c_i(),this.l_i()}),t.d_i)}TOt(){this.ta.Vc&&(this.ta.Vc.yn("Trt",this.f_i),this.ta.Vc.yn("Srt",this.g_i),this.ta.Vc.yn("b4t",this.__i),this.ta.Vc.yn("r3t",this.v_i)),this.ta.yn(Zi.qy,this.aai),this.ta.yn(Xi.ua,this.e8),this.ta.yn(Zi.wb,this.w_i),this.ta.yn(Zi.so,this.Xfi),this.ta.yn(E.oP,this.iZ),this.ta.yn(Zi.yb,this.dp),this.ta.yn(Zi.bb,this.sZ),this.ta.yn(E.rP,this.$W),this.ta.yn(Zi.Sb,this.m_i)}SOt(){this.ta.Vc&&(this.ta.Vc.fn("Trt",this.f_i),this.ta.Vc.fn("Srt",this.g_i),this.ta.Vc.fn("b4t",this.__i),this.ta.Vc.fn("r3t",this.v_i)),this.ta.fn(Zi.qy,this.aai),this.ta.fn(Xi.ua,this.e8),this.ta.fn(Zi.wb,this.w_i),this.ta.fn(Zi.so,this.Xfi),this.ta.fn(E.oP,this.iZ),this.ta.fn(Zi.yb,this.dp),this.ta.fn(Zi.bb,this.sZ),this.ta.fn(E.rP,this.$W),this.ta.fn(Zi.Sb,this.m_i)}gn(){m(this.p_i),this.SOt()}constructor(t,i,e,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.ta=t,this.KS=i,this.t_i=e,this.A_i=s,this.y_i=n,this.i_i=r,this.b_i=!0,this.n_i=!1,this.a_i=void 0,this.o_i=void 0,this.M_i=void 0,this.f_i=t=>{const i=t.Art;i.p0t();var e;e=i.lrt().duration;const s="linear"===i.lrt().type;i.A0t(),i.v0t();s&&(this.n_i=!0),this.h_i=this.y_i.AD_IMPRESSION,this.h_i=this.y_i.AD_STARTED},this.g_i=t=>{this.n_i=!1,this.h_i=this.y_i.AD_COMPLETED},this.__i=t=>{t.kKt===Nr.ADBLOCK?this.h_i=this.y_i.AD_BLOCKED:this.h_i=this.y_i.AD_ERROR},this.v_i=()=>{this.h_i=this.y_i.AD_SKIPPED},this.m_i=t=>{var i,e,s,n;t.RI===Ri.NI&&(this.M_i&&t.YZ!==this.M_i&&this.t_i.reportABRSwitch(this.M_i,t.YZ),this.M_i=t.YZ,this.t_i.reportChunkRequest(new MMChunkInformation(t.Fj,t.YZ,t.mR,t.clt.zu,void 0,void 0,null!=(s=null==(i=t.clt.Nct)?void 0:i[0])?s:0,null!=(n=null==(e=t.clt.Nct)?void 0:e[1])?n:-1)))},this.aai=t=>{this.r_i=this.A_i.STOPPED,this.yo(t)},this.e8=t=>{this.r_i=this.A_i.ERROR,this.t_i.reportError(t.error,this.e_i())},this.w_i=()=>{this.s_i?this.h_i=this.y_i.AD_PAUSED:this.r_i=this.A_i.PAUSED},this.Xfi=()=>{this.s_i&&(this.h_i=this.y_i.AD_PLAY)},this.iZ=()=>{this.s_i?(this.a_i===this.y_i.AD_PAUSED&&(this.h_i=this.y_i.AD_RESUMED),this.h_i=this.y_i.AD_PLAYING):(this.b_i&&(this.b_i=!1,this.Jgi(),this.r_i=this.A_i.STARTED),this.r_i!==this.A_i.PAUSED&&this.r_i!==this.A_i.BUFFERING||(this.r_i=this.A_i.RESUMED))},this.dp=()=>{this.t_i.reportPresentationSize(this.ta.Tk,this.ta.yk)},this.sZ=t=>{this.s_i||this.r_i!==this.A_i.PAUSED||this.t_i.reportPlayerSeekCompleted(t.currentTime*F9)},this.$W=()=>{this.s_i||(this.r_i=this.A_i.BUFFERING)},this.l_i=()=>{this.t_i.reportDownloadRate(x.floor(_i.Ld.LY()))},this.c_i=()=>{this.s_i||this.t_i.reportPlaybackPosition(this.e_i())},this.r_i=this.A_i.INITIALIZED,this.TOt(),this.p_i=this.u_i()}};Y9.d_i=2e3,Ha((function(t){return class extends t{gn(){super.gn(),this.T_i()}constructor(t,i){super(t,i),this.S_i=void 0,this.N_i=void 0,this.I_i=()=>{this.N_i=void 0,this.T_i();const t=super.Ya();t&&(this.N_i=function(t,i){const e=function(t,i){if(t&&t.analytics)for(const i of t.analytics)if("smartsight"===i.integration)return i;if(i&&i.analytics)for(const t of i.analytics)if("smartsight"===t.integration)return t;return}(t,i);if(!e)return;return e}(t,this.md)),this.D_i()},this.D_i=()=>{if(!this.S_i&&this.N_i&&this.bt&&this.bt.src&&!this.KE){const t=MMSmartStreaming.getInstance();!function(t,i,e){t.registerMMSmartStreaming(e.playerName,e.customerID,e.subscriberID,e.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","8.14.0"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",i,e.metaURL,e.assetID)}(t,this.bt.src,this.N_i),this.S_i=new Y9(this,this.N_i,t),this.S_i.yn("ended",this.T_i)}},this.T_i=()=>{this.S_i&&(this.S_i.gn(),this.S_i=void 0)},this.yn(Zi.ro,this.I_i),this.yn(Zi.Gy,this.D_i),this.yn(Zi.so,this.D_i)}}}),Hn.$nt),r(),r();var V9=String.fromCharCode(95);var G9=class t{get ga(){return this.Za||(this.Za=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(i){t.sendEvent=i}}}(this)),this.Za}get id(){return this.aS}get adsManager(){return this.Bni}get ids(){return this.Tv}get adContainer(){return this.k1t}get sendEvent(){return this.E_i}set sendEvent(t){for(let t of this.k_i)this.Bni.removeEventListener(t.type,t.listener);this.k_i=[],this.E_i=t,this.L_i()}get imaSDK(){return!0}x_i(){for(let t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.Bni.addEventListener(i,this.C_i),this.k_i.push({type:i,listener:this.C_i})}}j_i(){nt(this.k_i);for(let t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.Bni.removeEventListener(i,this.C_i)}}O_i(t){this.J_.push({type:t.type,adVolume:this.adsManager.getVolume()})}L_i(){null==this.E_i||this.E_i.call(this,this.J_),this.J_=[]}static R_i(i){return t.P_i[i]||i}constructor(i,e,s,n){this.C_i=i=>{this.O_i({type:t.R_i(i.type)})},this.aS=i,this.Bni=e,this.Tv=s,this.k1t=n,this.k_i=[],this.J_=[]}};G9.P_i={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var W9=class{z_i(t,i){this.B_i=h.createElement("script"),this.B_i.id=t.id,this.B_i.type="text/javascript",t.adContainer.appendChild(this.B_i),this.B_i.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t.id,this.U_i=t.id,s[this.U_i]=t.ga}Q_i(){this.B_i&&dn(this.B_i),this.U_i&&(s[this.U_i]=void 0)}constructor(){this.B_i=void 0,this.U_i=void 0}};Ha((function(t){return class i extends t{ka(t){var e,s,n;this.F_i(),null==(e=this.Y_i)||e.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.V_i),null==(s=this.Y_i)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.F_i),null==(n=this.Y_i)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.G_i),this.Y_i=void 0,this.k1t=void 0,super.ka(t);const r=t&&t.analytics;this.W_i=i.Z_i(r);this.Vc&&this.W_i&&p4()&&this.H_i()}gn(){var t,i,e;this.F_i(),null==(t=this.Y_i)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.V_i),null==(i=this.Y_i)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.F_i),null==(e=this.Y_i)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.G_i),this.Y_i=void 0,this.k1t=void 0,this.Vc&&this.Vc.fn("ati",this.uti),super.gn()}H_i(){this.Vc&&this.Vc.yn("ati",this.uti)}X_i(t,i,e){const s=V9+"moatApi"+x.floor(1e8*x.random());this.q_i=new G9(s,t,i,e),this.q_i.x_i(),this.K_i.z_i(this.q_i,this.W_i.partnerCode)}static Z_i(t){if(t){const i=t.filter((t=>"moat"===t.integration));if(0===i.length)return;if(i.length>1)throw new b("Only one Moat analytics configuration expected");return i[0]}}constructor(t,i){super(t,i),this.W_i=void 0,this.q_i=void 0,this.Y_i=void 0,this.k1t=void 0,this.G_i=()=>{this.X_i(this.Y_i,{partnerCode:this.W_i.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.k1t)},this.uti=t=>{this.Y_i=t.zni,this.k1t=t.Wti,this.F_i(),this.Y_i.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.V_i),this.Y_i.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.F_i),this.Y_i.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.G_i)},this.V_i=t=>{const i=t.getAd().getAdPodInfo();i.getAdPosition()<i.getTotalAds()&&(this.F_i(),this.G_i())},this.F_i=()=>{this.q_i&&(this.q_i.j_i(),this.q_i=void 0),this.K_i.Q_i()},this.K_i=new W9}}}),Hn.$nt),r(),r(),r();var An=class extends Jr{constructor(t,i,e){super(t,new Date),this.J_i=i,this.Art=e}},Lh=function(t){return t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete",t}({}),Z9=class extends An{constructor(t,i){super("DAILoaded",t,i)}},H9=class extends An{constructor(t,i){super("DAIAdBreakStarted",t,i)}},X9=class extends An{constructor(t,i){super("DAIAdBreakEnded",t,i)}},q9=class extends An{constructor(t,i){super("DAIAdProgress",t,i)}},K9=class extends An{constructor(t,i){super("DAICuePointsChanged",t,i)}},J9=class extends An{constructor(t,i){super("DAIClick",t,i)}},$9=class extends An{constructor(t,i){super("DAIError",t,i)}},t8=class extends An{constructor(t,i){super("DAIStarted",t,i)}},i8=class extends An{constructor(t,i){super("DAIFirstQuartile",t,i)}},e8=class extends An{constructor(t,i){super("DAIMidpoint",t,i)}},s8=class extends An{constructor(t,i){super("DAIStreamInitialized",t,i)}},n8=class extends An{constructor(t,i){super("DAIThirdQuartile",t,i)}},r8=class extends An{constructor(t,i){super("DAIComplete",t,i)}};var o8=class extends tu{replaceAdTagParameters(t){return this.Hhi.replaceAdTagParameters(null!=t?t:null)}$_i(t){return this.Hhi.contentTimeForStreamTime(t)}tvi(t){return this.Hhi.streamTimeForContentTime(t)}eFt(t,i){const e=function(t){return"vod"===t.availabilityType?new s.google.ima.dai.api.VODStreamRequest(Ei({},h8(t),{contentSourceId:t.contentSourceID,videoId:t.videoID})):new s.google.ima.dai.api.LiveStreamRequest(Ei({},h8(t),{assetKey:t.assetKey}))}(t);this.Hhi.requestStream(e)}tr(){this.ivi(!1),this.Hhi.reset()}gn(){this.Bo();const t=google.ima.dai.api.StreamEvent.Type;this.Hhi.removeEventListener(t.AD_BREAK_STARTED,this.evi),this.Hhi.removeEventListener(t.AD_PROGRESS,this.svi),this.Hhi.removeEventListener(t.CLICK,this.e1t),this.Hhi.removeEventListener(t.COMPLETE,this.nvi),this.Hhi.removeEventListener(t.CUEPOINTS_CHANGED,this.rvi),this.Hhi.removeEventListener(t.ERROR,this.Ss),this.Hhi.removeEventListener(t.FIRST_QUARTILE,this.ovi),this.Hhi.removeEventListener(t.LOADED,this.hvi),this.Hhi.removeEventListener(t.MIDPOINT,this.avi),this.Hhi.removeEventListener(t.STARTED,this.uvi),this.Hhi.removeEventListener(t.STREAM_INITIALIZED,this.cvi),this.Hhi.removeEventListener(t.THIRD_QUARTILE,this.lvi),this.Hhi.removeEventListener(t.AD_BREAK_ENDED,this.dvi),this.tr(),this.fvi&&dn(this.fvi)}gvi(t){this.Hhi.onTimedMetadata(t)}_vi(t,i,e){this.Hhi.processMetadata(t,i,e)}vvi(t){const i=this.Hhi.previousCuePointForStreamTime(t);if(i)return{dB:i.end,lB:i.start,rk:i.played}}wvi(t,i){const e=this.vvi(t);if(!e)return;const s=t>i&&e.dB>i,n=e.dB>t&&e.lB<=t;return e.rk||!s&&!n?void 0:e.lB}ivi(t){this.x1t&&(this.x1t.style.display=t?"block":"none")}constructor(t,i,e){super(),this.Hhi=t,this.x1t=i,this.fvi=e,this.evi=t=>{this.ivi(!0);const i=sa(t),e=ha(t);this.yo(new H9(i,e))},this.dvi=t=>{this.ivi(!1);const i=sa(t),e=ha(t);this.yo(new X9(i,e))},this.svi=t=>{const i=sa(t),e=ha(t);this.yo(new q9(i,e))},this.e1t=t=>{const i=sa(t),e=ha(t);this.yo(new J9(i,e))},this.nvi=t=>{const i=sa(t),e=ha(t);this.yo(new r8(i,e))},this.rvi=t=>{const i=sa(t),e=ha(t);this.yo(new K9(i,e))},this.Ss=t=>{const i=sa(t),e=ha(t);this.yo(new $9(i,e))},this.ovi=t=>{const i=sa(t),e=ha(t);this.yo(new i8(i,e))},this.hvi=t=>{const i=sa(t),e=ha(t);this.yo(new Z9(i,e))},this.avi=t=>{const i=sa(t),e=ha(t);this.yo(new e8(i,e))},this.uvi=t=>{const i=sa(t),e=ha(t);this.yo(new t8(i,e))},this.cvi=t=>{const i=sa(t),e=ha(t);this.yo(new s8(i,e))},this.lvi=t=>{const i=sa(t),e=ha(t);this.yo(new n8(i,e))},this.x1t&&(this.x1t.style.display="none",this.Hhi.setClickElement(this.x1t));const s=google.ima.dai.api.StreamEvent.Type;this.Hhi.addEventListener(s.AD_BREAK_STARTED,this.evi),this.Hhi.addEventListener(s.AD_PROGRESS,this.svi),this.Hhi.addEventListener(s.CLICK,this.e1t),this.Hhi.addEventListener(s.COMPLETE,this.nvi),this.Hhi.addEventListener(s.CUEPOINTS_CHANGED,this.rvi),this.Hhi.addEventListener(s.ERROR,this.Ss),this.Hhi.addEventListener(s.FIRST_QUARTILE,this.ovi),this.Hhi.addEventListener(s.LOADED,this.hvi),this.Hhi.addEventListener(s.MIDPOINT,this.avi),this.Hhi.addEventListener(s.STARTED,this.uvi),this.Hhi.addEventListener(s.STREAM_INITIALIZED,this.cvi),this.Hhi.addEventListener(s.THIRD_QUARTILE,this.lvi),this.Hhi.addEventListener(s.AD_BREAK_ENDED,this.dvi)}};function h8(t){const i=google.ima.dai.api.StreamRequest.StreamFormat;var e;return{apiKey:t.apiKey,authToken:t.authToken,format:"dash"===t.format?i.DASH:i.HLS,networkCode:t.networkCode,streamActivityMonitorId:t.streamActivityMonitorID,adTagParameters:t.adTagParameters,omidAccessModeRules:null!=(e=$2(t.omidAccessModeRules))?e:{}}}function sa(t){const i=t.getStreamData(),e=i.adProgressData;let s;e&&(s={O9t:e.adBreakDuration,mvi:e.duration,R9t:e.adPosition,LE:e.currentTime,ct:e.duration,P9t:e.totalAds});return{pvi:s,Avi:(i.cuepoints||[]).map((t=>({lB:t.start,dB:t.end,rk:t.played}))),yvi:i.errorMessage||void 0,bvi:i.manifestFormat||void 0,Mvi:i.streamId||void 0,Tvi:(i.subtitles||[]).map((t=>({Svi:t.webvtt,Nvi:t.ttml,gs:t.language}))),zu:i.url}}function a8(t){return{qXt:t.getAdSlotId(),J4t:t.getContent(),VN:t.getContentType(),Ti:t.getHeight(),ji:t.getWidth()}}function ha(t){const i=t.getAd();if(!i)return;const e=i.getAdPodInfo(),s=i.getCompanionAds().map(a8);return{Mqt:i.getAdId(),y8t:{R9t:e.getAdPosition(),$$t:e.getMaxDuration(),Eni:e.getPodIndex(),lzt:e.getTimeOffset(),P9t:e.getTotalAds()},nXt:i.getAdSystem(),Lni:i.getAdvertiserName(),HXt:i.getApiFramework(),fXt:s,EXt:i.getCreativeId(),u7t:i.getCreativeAdId(),xni:i.getDealId(),$j:i.getDescription(),ct:i.getDuration(),TV:i.getTitle(),Ivi:i.getUniversalAdIdRegistry(),Dvi:i.getUniversalAdIdValue(),s7t:i.getVastMediaHeight(),e7t:i.getVastMediaWidth(),J8t:i.getWrapperAdIds(),$8t:i.getWrapperAdSystems(),t7t:i.getWrapperCreativeIds()}}function u8(){const t=h.body.lastElementChild;if(t instanceof HTMLIFrameElement&&"Advertisement"===t.title)return t}r(),r(),r();var c8="theo-dai-clickthrough",l8="urn:google:dai:2018",d8=class{get ga(){const t=this,i=this.Evi;return{contentTimeForStreamTime:i=>t.Hhi?t.Hhi.$_i(i):i,streamTimeForContentTime:i=>t.Hhi?t.Hhi.tvi(i):i,replaceAdTagParameters(i){t.Hhi&&t.Hhi.replaceAdTagParameters(i)},get snapback(){return t.kvi},set snapback(i){t.kvi=i},get sourceTransformer(){return i.Lvi},set sourceTransformer(t){i.Lvi=t}}}CE(t){this.w7.Ty(),this.w7=new Wt;X(Vh(this.Zni(t,this.w7.ly),this.w7))}async Zni(t,i){if(yi(i),!this.xvi||!this.Hhi)return this.ta.Cvi(t);if(this.xvi.drt)return;const e=this.ta.xE();if(this.kvi){const s=this.Hhi.wvi(t,e);if(s){this.ta.Cvi(s),await this.Hhi.zy(Lh.AD_BREAK_ENDED,i);if(this.Hhi.vvi(t).dB>t)return}}this.ta.Cvi(t)}vk(){const t=this.xvi&&this.xvi.drt;if(t){const i=Mo.xn(this.ta.jvi()),e=t.lzt,s=e+t.$$t,n=new Mo([e,s]);return i.Sn(n).ks()}return this.ta.jvi()}async Prt(t,i){if(!t)return this.ta.Ovi(t,i);let e=t;try{this.ta.nt.yn(zh.Hk,this.Rvi),e=await this.Evi.Pvi(t,i),this.xvi&&this.Hhi&&(this.zvi=!0)}catch(t){if(V(t),t.code===lt.LICENSE_INVALID)return;const i=new qi(vt.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.dV=Au(i),this.fV=i,this.ta.yo(new cl(i)),i}await this.ta.Ovi(e,i)}tr(){if(this.zvi){if(this.ta.nt.fn(zh.Hk,this.Rvi),this.lai){this.lai.fn(hs.Jk,this.Bvi);for(const t of this.lai.L.AL)t.fn(oa.kz,this.Uvi);this.lai=void 0}this.dV=void 0,this.fV=void 0,this.w7.Ty(),this.xvi&&this.xvi.tr(),this.Hhi&&this.Hhi.tr(),this.zvi=!1}}get lt(){return this.dV||this.ta.Qvi()}get zE(){return this.fV||this.ta.Fvi()}gn(){this.tr(),this.ta.Yvi(),this.Hhi&&this.Hhi.gn()}constructor(t,i,e,s){this.lai=void 0,this.dV=void 0,this.fV=void 0,this.w7=new Wt,this.zvi=!1,this.kvi=!0,this.Rvi=t=>{const i=t.Ht;i.Lt===z.MQ&&(i.YA===El.ID3||i.YA===El.EVENT_STREAM&&i.YL===l8)&&(i.UI=ua.FL,this.lai=i,i.yn(hs.Jk,this.Bvi))},this.Bvi=t=>{t.uB.yn(oa.kz,this.Uvi)},this.Uvi=t=>{var i,e;if(this.Hhi)if((null==(i=this.lai)?void 0:i.YA)===El.ID3){const i=t.uB.U;"TXXX"===i.id&&this.Hhi.gvi({TXXX:i.text})}else if((null==(e=this.lai)?void 0:e.YA)===El.EVENT_STREAM){const i=t.uB.U;this.Hhi._vi(l8,i,t.kU)}},this.ta=t,this.Hhi=i,this.xvi=e,this.Evi=s,e&&i&&this.ta.Vc&&this.ta.Vc.wrt(e.g7t)}};r(),r();var f8=class extends _2{get Vvi(){return this.Gvi}get wJt(){return ah.Xh}constructor(t,i,e,s=!0){super(e),this.Gvi=s,this.x4t=t,this.C4t=i}},g8=class extends h4{Wvi(){const t=[Lh.STARTED,Lh.FIRST_QUARTILE,Lh.MIDPOINT,Lh.THIRD_QUARTILE,Lh.COMPLETE];this.Hhi.yn(t,this.Zvi),this.Hhi.yn(Lh.AD_BREAK_ENDED,this.dvi),this.Hhi.yn(Lh.AD_PROGRESS,this.svi),this.Hhi.yn(Lh.CUEPOINTS_CHANGED,this.rvi)}get N4t(){return this.v7t}get v4t(){return this.z3t}Hvi(t){let i=t.y8t.lzt,e=this.I0t||this.findAdBreakWithPredicate(i,(t=>!t.rk));if(!e){const s=t.y8t.$$t;i=this.ta.xE(),e=new f8(s,s,i,!1),e.O4t(),this.D0t.push(e)}return e}Xvi(t){switch(t){case Lh.STARTED:this.v7t=!0;break;case Lh.AD_BREAK_ENDED:this.v7t=!1}}qvi(t,i,e){if(i)switch(t){case Lh.STARTED:case Lh.FIRST_QUARTILE:case Lh.MIDPOINT:case Lh.THIRD_QUARTILE:case Lh.COMPLETE:this.v4t.yo(new uB(this.I0t))}if(e)switch(t){case Lh.STARTED:case Lh.FIRST_QUARTILE:case Lh.MIDPOINT:case Lh.THIRD_QUARTILE:case Lh.COMPLETE:this.v4t.yo(new bu(this.w0t,this.w0t.H8t))}switch(t){case Lh.COMPLETE:this.v4t.yo(new dB(this.w0t,this.f7t.H8t));break;case Lh.AD_BREAK_ENDED:this.v4t.yo(new Zu(this.drt))}switch(t){case Lh.FIRST_QUARTILE:this.v4t.yo(new D2(this.w0t,this.f7t.H8t));break;case Lh.MIDPOINT:this.v4t.yo(new k2(this.w0t,this.f7t.H8t));break;case Lh.THIRD_QUARTILE:this.v4t.yo(new x2(this.w0t,this.f7t.H8t))}}Kvi(t){const i=t.Art,e=this.Hvi(i),s=function(t,i){if(t.Vc.length)return!1;for(let e=0;e<i;e++){const i=new e4(t,la.YKt);t.P4t(i)}return!0}(e,i.y8t.P9t),n=function(t,i){const e=i.y8t.R9t-1;return t.Vc[e]}(e,i),r=function(t,i){return t.W4t!==w2.READY&&(t.i7t(i),!0)}(n,i);this.w0t=n,this.I0t=e,e.O4t(),this.qvi(t.type,s,r)}Jvi(t){for(const i of this.D0t)if(bf(t,i.lzt))return i}findAdBreakWithPredicate(t,i){for(const e of this.D0t)if(bf(e.lzt,t)&&i(e))return e}get $vi(){const t=this.findAdBreakWithPredicate(0,(t=>t.Vvi));let i=0;return t&&(i=t.$$t),i}iwi(t,i){let e;for(const s of this.D0t)s.lzt>=t&&s.lzt<=i&&!s.rk&&(!e||s.lzt>=e.lzt)&&(e=s);return e}ZC(){}vrt(t){}tr(){this.w0t&&(this.v4t.yo(new dB(this.w0t,this.w0t.H8t)),this.w0t=void 0),this.I0t&&(this.v4t.yo(new Zu(this.I0t)),this.I0t=void 0),this.v7t=!1,nt(this.D0t)}gn(){this.tr(),this.v4t.gn()}constructor(t,i){super(new Yt,ah.Xh),this.Hhi=t,this.ta=i,this.svi=t=>{const i=this.I0t;if(!i||!this.w0t)return;const e=t.J_i.pvi;this.w0t.H8t=e.LE,function(t,i){const e=i.R9t,s=i.O9t,n=i.LE,r=qe(t.Vc.slice(0,e-1),(t=>{var i;return null!=(i=t.ct)?i:0}));t.t0t=s-n-r}(i,e)},this.rvi=t=>{const i=t.J_i.Avi;if(i)for(const t of i)if(!this.Jvi(t.lB)){const i=t.dB-t.lB,e=new f8(i,i,t.lB,!0);this.D0t.push(e)}},this.Zvi=t=>{this.Xvi(t.type),this.Kvi(t)},this.dvi=t=>{this.v7t=!1,this.w0t=void 0;const i=this.drt;i&&(i.t0t=0,this.qvi(t.type,!1,!1),this.I0t=void 0)},this.Wvi()}};function _8(t){if(t.sources)if(Zr(t.sources)){for(const i of t.sources)if(eS(i))return!0}else if(Z(t.sources))return eS(t.sources);return!1}r(),Qi();var v8=class{async Pvi(t,i){const e=[],s=[];for(const i of t.sources)if(eS(i)){if(!this.Hhi)continue;e.push(i)}else s.push(i);if(0===e.length)return t;let n,r;for(;void 0===n&&0!==e.length;){const{kc:o}=await Za.Ld.mG(e,t),h=o;yi(i);try{n=await this.ewi(h,i),s.push(n)}catch(t){V(t),r=t,ra(e,h)}}if(0!==t.sources.length&&0===s.length)throw new b("Fatal: unable to play DAI streams.");return r&&Bi(r.message),Ei({},t,{sources:s})}async ewi(t,i){if(!this.Hhi)throw new b("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=this.Hhi.zy(Lh.LOADED,i),s=this.Hhi.zy(Lh.ERROR,i),n=t.type===$n.$L?"dash":"hls";this.Hhi.eFt(Ei({},t.ssai,{format:n}));const r=await Promise.race([e,s]);if(r.type===Lh.LOADED){const i=t.type===$n.$L?$n.$L:$n.ix;return ct(Ei({},t,{src:this.Lvi?await this.Lvi(r.J_i.zu||""):r.J_i.zu,type:i}))}throw b(r.J_i.yvi)}constructor(t){this.Hhi=t,this.Lvi=t=>t}};Ha(function(t){return i=>class extends i{ma(){const t=super.ma(),i=t.ads;if(i){const t=this.swi.ga;fe(i,{get dai(){return t}})}return t}get zl(){return this.nwi}Cvi(t){super.CE(t)}CE(t,i){this.swi.CE(t)}jvi(){return super.vk()}vk(){return this.swi.vk()}ka(t){return this.swi.tr(),super.ka(t)}async Ovi(t,i){return super.Prt(t,i)}async Prt(t,i){return this.swi.Prt(t,i)}Qvi(){return super.PE()}Fvi(){return super.BE()}PE(){return this.swi.lt}BE(){return this.swi.zE}Yvi(){super.gn()}gn(){this.swi.gn(),this.x1t&&(dn(this.x1t),this.x1t.removeEventListener("keydown",this.rwi),this.x1t.removeEventListener("click",this.rwi),this.x1t=void 0),this.owi&&(dn(this.owi),this.owi=void 0)}constructor(i,e){super(i,e),this.nwi=!1,this.rwi=t=>{13===t.which&&this.x1t.click(),this.Rk()};const s=this.jk(),n=e.ads.googleIma.useAdUiElementForSsai;let r,o;try{var a;n?(this.owi=h.createElement("div"),pc(this.owi),this.owi.className="theo-dai-ad-ui"):(this.x1t=h.createElement("button"),this.x1t.className=c8),r=t(s,this.x1t,this.owi),o=new g8(r,this);const i=null!=(a=this.x1t)?a:this.owi;i&&this.we.appendChild(i),this.nwi=!0}catch(t){this.x1t=void 0,this.owi=void 0}const u=new v8(r);this.swi=new d8(this,r,o,u),this.x1t&&(this.x1t.addEventListener("keydown",this.rwi),this.x1t.addEventListener("click",this.rwi))}}}((function(t,i,e){if(!(s.google&&s.google.ima&&Z(s.google.ima.dai)))throw new b("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const n=u8(),r=new google.ima.dai.api.StreamManager(t,e),o=u8();return new o8(r,i,o&&o!==n?o:void 0)})),Hn.qnt),r(),r(),r();var w8=class{get hwi(){return void 0===this.awi?0:(performance.now()-this.awi)/1e3}uwi(t){this.cwi=t,this.dwi.lwi(t),this.ta.yn(Zi.so,this.Xfi),this.ta.yn(Zi.qy,this.aai),this.ta.yn(Zi.Eb,this.kai),this.ta.yn(Xi.ua,this.e8),this.ta.yn(E.rP,this.fwi),this.ta.yn([E.iP,E.eP,E.oP],this.gwi),this.ta.yn(Zi.Zy,this._wi),Gn.zX(this.dOt)}vwi(){this.ta.fn(Zi.so,this.Xfi),this.ta.fn(Zi.qy,this.aai),this.ta.fn(Zi.Eb,this.kai),this.ta.fn(Xi.ua,this.e8),this.ta.fn(E.rP,this.fwi),this.ta.fn([E.iP,E.eP,E.oP],this.gwi),this.ta.fn(Zi.Zy,this._wi),Gn.jX(this.dOt),this.wwi||(this.dwi.mwi(this.pwi),this.dwi.Awi()),this.ywi&&this.bwi(),this.cwi=void 0,this.Mwi=!1,this.wwi=!1,this.pwi=-1/0,nt(this.Swi)}Nwi(){this.Mwi&&this.dwi.Iwi(),this.awi=performance.now(),this.Dwi=v(this.Ewi,6e4)}bwi(){this.dwi.kwi(this.hwi),this.ywi=!1,this.awi=void 0,this.Dwi&&(m(this.Dwi),this.Dwi=void 0)}Lwi(){if(j(this.ta._d()))return;const t=10*function(t,i){return x.floor(t/i)}(this.ta.xE()/this.ta._d()*100,10);Qa(this.Swi,t)||(this.Swi.push(t),this.dwi.xwi(t))}constructor(t,i){this.ta=t,this.dwi=i,this.Mwi=!1,this.wwi=!1,this.Swi=[],this.pwi=-1/0,this.ywi=!1,this.Xfi=()=>{this.Mwi||(this.dwi.Cwi(),this.ywi&&this.dwi.Iwi(),this.Mwi=!0)},this.aai=()=>{this.dwi.jwi(),this.wwi=!0},this.kai=()=>{this.pwi<this.ta.xE()&&(this.pwi=this.ta.xE()),this.Lwi()},this.fwi=()=>{this.Mwi&&(this.Owi=performance.now(),this.dwi.Rwi(this.ta.xE()))},this.gwi=()=>{this.Owi&&(this.dwi.Pwi((performance.now()-this.Owi)/1e3),this.Owi=void 0)},this.e8=()=>{this.pwi<this.ta.xE()&&(this.pwi=this.ta.xE()),this.dwi.$rt(this.ta.PE().message)},this._wi=()=>{const t=this.ta._d()===1/0;t&&!this.ywi&&(this.ywi=t,this.Nwi())},this.dOt=()=>{this.dwi.mwi(this.pwi),this.dwi.zwi()},this.Ewi=()=>{void 0!==this.awi&&this.dwi.Bwi(this.hwi)}}};r();var m8=class{lwi(t){this.Uwi(["setDocumentTitle",t.itemTitle]),this.Uwi(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.Uwi(["trackPageView"])}Cwi(){this.Qwi("item first play","viewing","1")}Awi(){this.Qwi("item skipped","skipped","1")}xwi(t){this.Qwi("item progress","percent",""+t)}zwi(){this.Qwi("item abandoned","window closed","1")}mwi(t){this.Qwi("item time","watched",""+t)}jwi(){this.Qwi("item finished","ended","1")}Rwi(t){this.Qwi("buffering started","timestamp",""+t)}Pwi(t){this.Qwi("buffering ended","duration",""+t)}$rt(t){this.Qwi("error","message",""+t)}Iwi(){this.Qwi("livestream first play","viewing","1")}Bwi(t){this.Qwi("livestream progress","duration",""+t)}kwi(t){this.Qwi("livestream time","watched",""+t)}Qwi(t,i,e){this.Uwi(["trackEvent","Video",t,i,e])}Uwi(t){const i="undefined"!=typeof _paq?_paq:void 0;i?i.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}};r();var p8=class{get Fwi(){if(!this.Ywi)return;const t=this.ta.xE()/this.Ywi;return x.floor(4*t)+1}get Vwi(){return void 0!==this.Ywi}uwi(){this.Dc.yn("Trt",this.f_i),this.Dc.yn("Srt",this.g_i),this.Dc.yn("r3t",this.v_i),this.Dc.yn("b4t",this.__i),this.ta.yn(Zi.Eb,this.kai),Gn.zX(this.dOt)}vwi(){this.Dc.fn("Trt",this.f_i),this.Dc.fn("Srt",this.g_i),this.Dc.fn("r3t",this.v_i),this.Dc.fn("b4t",this.__i),this.ta.fn(Zi.Eb,this.kai),nt(this.Gwi),Gn.jX(this.dOt),this.Ywi=void 0}constructor(t,i,e){this.ta=t,this.Dc=i,this.dwi=e,this.Gwi=[],this.f_i=()=>{this.Ywi=this.ta._d(),this.dwi.Wwi(this.Ywi)},this.g_i=()=>{this.Ywi&&(this.dwi.Zwi(this.Ywi),nt(this.Gwi),this.Ywi=void 0)},this.v_i=t=>{if(!this.Ywi)return;const i=this.Ywi-this.Ywi*t.s3t;this.dwi.Hwi(i),this.Ywi=void 0},this.__i=()=>{this.Ywi=this.ta._d(),this.dwi.Xwi()},this.kai=()=>{const t=this.Fwi;if(this.Vwi&&t&&!Qa(this.Gwi,t)){switch(t){case 1:this.dwi.qwi();break;case 2:this.dwi.Kwi();break;case 3:this.dwi.Jwi();break;case 4:this.dwi.$wi()}this.Gwi.push(t)}},this.dOt=()=>{this.dwi.tmi()}}};r();var A8=class{Wwi(t){this.dwi.Qwi("ad start","duration",""+t)}Zwi(t){this.dwi.Qwi("ad finished","duration",""+t)}Hwi(t){this.dwi.Qwi("ad skipped","remaining time",""+t)}Xwi(){this.dwi.Qwi("ad blocker","detected","1")}qwi(){this.dwi.Qwi("ad progress","firstQuartile","")}Kwi(){this.dwi.Qwi("ad progress","secondQuartile","")}Jwi(){this.dwi.Qwi("ad progress","thirdQuartile","")}$wi(){this.dwi.Qwi("ad progress","fourthQuartile","")}tmi(){this.dwi.Qwi("ad abandoned","window closed","1")}constructor(t){this.dwi=t}};function y8(t){return t&&"streamone"===t.integration}Ha((function(t){return class extends t{gn(){this.fn(Zi.ro,this.ho),this.imi&&(this.emi&&this.emi.vwi(),this.smi&&this.smi.vwi(),this.imi=!1),super.gn()}constructor(t,i){super(t,i),this.imi=!1,this.ho=()=>{this.imi&&(this.emi.vwi(),this.smi&&this.smi.vwi());const t=this.Ya();if(this.imi=!1,!t)return;const i=function(t){if(t.analytics)for(let i of t.analytics)if(y8(i))return i}(t);i&&(this.imi=!0,this.emi.uwi(i),this.smi&&this.smi.uwi())};const e=new m8;if(this.emi=new w8(this,e),this.Vc){const t=new A8(e);this.smi=new p8(this,this.Vc,t)}this.yn(Zi.ro,this.ho)}}}),Hn.$nt),r(),r(),r(),r(),r(),r(),Qi();var b8=class extends Er{async F4(t,i,e){const s=await M8(t);await super.F4(s,i,e),this.nmi(s,i)}async B4(t,i,e){const s=await M8(t);await super.B4(s,i,e),this.nmi(s,i)}nmi(t,i){const e=this.omi.rmi;if(void 0===e)return;const s=i.u4;let n;if(this.hmi!==s&&(this.hmi=s,e.setLevelSwitching(s),e.setContainerFormat(2)),function(t){return Bh.call(t,"kst")}(i)){const t=i.kst,r=i.kst+i.ct;n=i.rQ,e.newPts(t,r,"video",s)}else 0;e.appendBuffer(t.rI,"video",s,n)}async wS(t,i,e){var s;await super.wS(t,i,e),null==(s=this.omi.rmi)||s.flushBuffer(t,i)}constructor(t,i){super(t),this.omi=i,this.hmi=void 0}};async function M8(t){switch(t.YA){case Me.v$:return t;case Me.jN:{const i=await Wy(t.rI);return{YA:Me.v$,rI:new T(i)}}case Me.w$:throw new b("Opaque initialization segments are not supported on web.")}}var T8=class extends Tr{Oht(t){return t.E3===Ri.NI?new b8(t,this.omi):new Er(t)}constructor(t,i){super(t),this.omi=i,this.Cht(t)}},S8=class extends Br{get rmi(){return this.ami}umi(){this.ami=new LCEVCdec.LCEVCdec(this.cz.gV,this.cmi,{})}ge(){super.ge(),this.lmi()}be(){super.be(),this.cmi.style.display="none"}tr(){return this.cmi.style.display="none",void 0!==this.ami&&(this.ami.close(),this.umi()),super.tr()}wy(){return this.dmi=!0,void 0!==this.ami&&(this.ami.close(),this.ami=void 0),this.ku.removeChild(this.cmi),super.wy()}eG(t){this.yo(new _r(new P(lt.ABORTED,t)))}lmi(){this.cz.gV.style.display="none",this.cmi.style.display="block"}get wht(){return this.cz}Eht(t){return new T8(t,this)}Dht(t){return new Jo(t)}constructor(t,i){super(t),this.dmi=!1,this.fmi=t=>{this.dmi||(t||this.eG("LCEVC SDK failed to initialize."),this.umi())},this.gmi=()=>{this.dmi||this.eG("LCEVC SDK failed to initialize.")},this.ku=i,this.cmi=h.createElement("canvas"),this.cmi.style.width="100%",this.cmi.style.height="100%",this.cmi.style.position="absolute",this.cmi.style.transform="translate(0%, -100%)",this.cmi.style.display="none",this.ku.appendChild(this.cmi),LCEVCdec.ready.then(this.fmi,this.gmi)}},N8=class extends Sr{sG(t){if(t===Ri.NI)return this._mi=new S8(super.sG(t),this.ku),this._mi}async BV(t){this._mi=void 0;const i=t;await i.wy(),await super.BV(i.wht)}get vmi(){return this._mi}constructor(t,i){super(t),this.ku=i}};Qi();var I8=class extends AW{async gn(){for(const t of this.Pz.AL)t.fn(hs.vL,this.wmi);this.rt.fn(zh.Hk,this.mmi),this.rt.fn(zh.qk,this.pmi),await super.gn(),await this.cz.wy(),await this.QV.BV(this.cz)}constructor(t,i,e,s,n,r,o,h){const a=new N8(r,h),u=new rs(a);super(t,i,e,s,n,u.sG(o),h),this.mmi=t=>{t.Ht.yn(hs.vL,this.wmi)},this.pmi=t=>{t.Ht.fn(hs.vL,this.wmi)},this.wmi=t=>{var i;const e=null==(i=this.Ami.vmi)?void 0:i.rmi,s=t.Lut.zL;null==e||e.setCurrentLevel(s)},this.QV=u,this.Ami=a,this.Pz.yn(zh.Hk,this.mmi),this.Pz.yn(zh.qk,this.pmi)}};Gi(new class extends OB{bx(t,i,e,s,n,r,o){const h=new ir(_h.Ld.Hot,_h.Ld.Zot,_h.Ld.Wot,_h.Ld.qot);let a=i;return BW.PS()&&(a=new BW(a)),new I8(e,s,n,r,h,a,Ri.NI,t)}async nG(t){if(!t.lcevc)return!1;if(!await super.nG(t))return!1;if(void 0===s.LCEVCdec)throw new qi(vt.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}oG(){return!1}constructor(...t){super(...t),this.hG=pt.CY}}),r(),Qi();var D8=class extends b${async gn(){for(const t of this.Pz.AL)t.fn(hs.vL,this.wmi);this.rt.fn(zh.Hk,this.mmi),this.rt.fn(zh.qk,this.pmi),await super.gn(),await this.QV.BV(this.cz)}constructor(t,i,e,s,n,r,o,h,a){const u=new N8(i,t),c=new rs(u);super(c.sG(Ri.NI),e,s,n,r,o,h,a),this.mmi=t=>{t.Ht.yn(hs.vL,this.wmi)},this.pmi=t=>{t.Ht.fn(hs.vL,this.wmi)},this.wmi=t=>{var i;const e=null==(i=this.Ami.vmi)?void 0:i.rmi,s=t.Lut.IRt.zL;null==e||e.setCurrentLevel(s)},this.QV=c,this.Ami=u,this.Pz.yn(zh.Hk,this.mmi),this.Pz.yn(zh.qk,this.pmi)}};Gi(new class extends T${bx(t,i,e,s,n,r,o){return new D8(t,i,e,n,r,$J(s.libraryLocation),new y$(s.libraryLocation),new ir(_h.Ld.Hot,_h.Ld.Zot,_h.Ld.Wot,_h.Ld.qot),s)}async nG(t,i){if(!t.lcevc)return!1;if(!await super.nG(t,i))return!1;if(void 0===s.LCEVCdec)throw new qi(vt.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}oG(){return!1}constructor(...t){super(...t),this.hG=pt.PY}}),r(),r(),r(),r();var E8=function(t){return t.ymi="tr",t.bmi="Mmi",t}({}),k8="freewheel-nonlinear-ad",L8=[Zi.Zy,Zi.Eb,Zi.kb,Zi.wb,E.oP,Zi.so],x8=class t extends B2{Ok(){this.QV.zG()}Tmi(){this.Smi.yn("Mrt",this.Nmi),this.Smi.yn(["Trt","Srt"],this.Imi),this.Smi.yn("brt",this.eni)}Dmi(){this.Smi.fn("Mrt",this.Nmi),this.Smi.fn(["Trt","Srt"],this.Imi),this.Smi.fn("brt",this.eni)}Emi(){this.v4t.iu(this.Smi.kmi)}Lmi(){this.Smi.xmi.yn(L8,this.Ds)}Cmi(){this.Smi.xmi.fn(L8,this.Ds)}get g4t(){return this}static get d4t(){return ah.M0t}get d4t(){return t.d4t}get drt(){var t;return null!=(t=this.Smi.kmi.drt)?t:null}get crt(){const t=this.Smi.kmi.f7t;return t?[t]:[]}vrt(t){}xE(){return this.Smi.xmi.LE}CE(t,i){}_d(){return this.Smi.xmi.ct}RE(){return this.Smi.xmi.OE}PE(){return this.dV}BE(){return this.fV}bk(){return 0}Sk(){return 0}Ik(){return this.Smi.xmi.Nk}Dk(t){this.Smi.xmi.Nk=t}ZE(){return this.Smi.xmi.WE}HE(t){this.Smi.xmi.WE=t}gk(){return this.Smi.xmi.fk}get frt(){return this.Smi.kmi.frt}get grt(){return this.Smi.kmi.grt}vk(){return this.Smi.xmi._k}JE(){return this.Smi.xmi.KE}p4t(t){if(this.N4t||this.Smi.p4t(t),this.Smi.jmi){if(t.type===Zi.wb&&this.ta.OE)return!0;if(t.type===Zi.qy)return this.Smi.Rmi.Omi(),!0}return!1}be(){this.Smi.be()}Rk(){this.KE||this.Smi.xmi.Rk()}async Pmi(){if(!this.Smi.zmi)try{await this.Smi.d6t()}catch(t){this.Bmi(t,Nr.GENERAL)}}async Umi(){if(this.Smi.xmi.Qmi)return this.Smi.xmi.Pk(),!1;if(this.Smi.Fmi)try{await this.Smi.Rmi.Ymi()}catch(t){this.Bmi(t,Nr.PLAYBACK)}return!0}get Vmi(){return $t(this.PE())}Bmi(t,i){t.name!==E8.ymi&&this.v4t.yo(new hc(i,"Ads could not be loaded."))}async Pk(){if(this.KE&&this.yo(new fi(this.LE)),await this.Pmi(),this.Vmi)return;const t=await this.Umi();!this.Vmi&&t&&this.eni()}E7t(t,i,e){i===Jz.urt&&this.Smi.E7t(t)}ge(){this.Smi.ge()}ZC(){this.Smi.xmi.ZC()}jk(){return this.tst}bE(){return this.QV.YG.map((t=>t.gV))}k4t(t){}async gn(){await this.zk(),this.Smi.gn(),await this.QV.BV(this.cz),this.Dmi(),this.Cmi(),this.v4t.Bq(this.Smi.kmi)}async zk(){this.Smi.tr(),this.N4t&&(this.ta.ge(),this.R2t(),this.be())}constructor(t,i,e,s,n){super(t,i),this.dV=void 0,this.fV=void 0,this.Imi=t=>{const i=t.Art,e="Trt"===t.type;if(i.Z4t===la.Y4t){const t=this.ta.we.classList;e?t.add(k8):t.remove(k8)}e?this.ge():this.be()},this.Nmi=()=>{this.B3t(),this.ta.Rk(),this.ta.be()},this.eni=()=>{this.Smi.zmi&&(this.ta.OE||this.ta.Pk(),this.be(),this.ta.ge(),this.R2t())},this.Smi=s,this.QV=e,this.cz=n,this.tst=n.gV,this.tst.controls=!1,this.Tmi(),this.Emi(),this.Lmi()}};r(),r(),r();var C8=class extends _2{get Gmi(){return this.Wmi}get Zmi(){return this.Vc[this.Hmi]}set Xmi(t){this.Hmi=t}get Xmi(){return this.Hmi}get Z4t(){return this.H4t}get wJt(){return ah.M0t}constructor(t,i,e,s){super(e),this.Wmi=s,this.Hmi=0,this.H4t=O8(s),this.x4t=t,this.C4t=i}};r();var j8=class extends m2{get qmi(){return this.Kmi}set qmi(t){this.Kmi!==t&&(this.Kmi=t)}get Ti(){return this.Yl.Gmi.getHeight()}get ji(){return this.Yl.Gmi.getWidth()}get rqt(){return this.qmi.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get wJt(){return ah.M0t}ma(){return Or(this)}constructor(t,i,e){super(t,i),this.Kmi=e}};function O8(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?la.Y4t:la.YKt}Qi();var R8=class t extends gs{async Jmi(t,i){this.$mi=t,this.tpi=i,this.ipi(t),await i,this.epi()}get spi(){return this.npi}get rpi(){return this.opi}get hpi(){return this.upi}get drt(){return this.I0t}get f7t(){return this.w0t}get frt(){const t=[];if(this.I0t){const i=this.I0t.Xmi;i>=0&&t.push(...this.I0t.Vc.slice(i+1))}for(const i of this.cpi)t.push(...i.Vc);return t}get grt(){return this.cpi}epi(){this.lpi()}ipi(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.fpi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.gpi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this._pi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.vpi),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.wpi)}mpi(){this.$mi&&(this.$mi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.fpi),this.$mi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.gpi),this.$mi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this._pi),this.$mi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.vpi),this.$mi.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.wpi))}lpi(){this.npi=this.ppi(this.Api),this.opi=this.ppi(this.ypi).concat(this.ppi(this.bpi)),this.upi=this.ppi(this.Mpi),this.cpi=this.npi.concat(this.opi).concat(this.upi)}ppi(t){if(!this.$mi)return[];const i=this.$mi.getSlotsByTimePositionClass(t);return this.Tpi(i)}Spi(t){if(!this.I0t)return void 0;const i=t.getSlot().getAdInstances().indexOf(t);-1!==i&&(this.I0t.Xmi=i);const e=this.I0t.Zmi;return e&&(e.qmi=t),e}Npi(t){return dl(this.cpi,(i=>i.Gmi===t))}Tpi(i){return i.map((i=>{const e=i.getTotalDuration(),s=t.Ipi(i);return new C8(e,e,s,i)}))}static Dpi(t,i){const e=t.getAdInstances(),s=[];for(const t of e){const e=O8(t.getSlot()),n=new j8(i,e,t),r=[];n.V4t(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),i.P4t(n),s.push(n)}return s}R1t(){const t=this.f7t;t&&this.yo(new Kr(t,this.Epi()))}kpi(){const t=this.f7t;t&&(this.yo(new dB(t,t.qmi.getPlayheadTime())),this.w0t=void 0)}Lpi(t){const i=this.drt;i&&(i.t0t=function(t,i,e){void 0===e&&(e=0);let s=0;const n=t.Vc.length;for(let r=i;r<n;r++){const n=t.Vc[r],o=n.ct;if(n){let t=o;r===i&&(t=ur(o-e,0,o)),s+=t}}return s}(i,i.Xmi,t))}static Ipi(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}Epi(){const t=this.f7t;if(!t)return 0;const i=t.qmi;return i.getPlayheadTime()/i.getDuration()}xpi(t){ra(this.cpi,t),ra(this.npi,t),ra(this.opi,t),ra(this.upi,t)}tr(){this.mpi(),this.npi.length=0,this.opi.length=0,this.upi.length=0,this.cpi.length=0,this.w0t=void 0,this.I0t=void 0,this.$mi=void 0,this.tpi=void 0}gn(){this.tr(),this.Bo()}constructor(i,e){super(),this.Vs=i,this.vN=e,this.Api=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.ypi=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.Mpi=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.bpi=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.npi=[],this.opi=[],this.upi=[],this.cpi=[],this.fpi=i=>{const e=i.slot,s=this.Npi(e);s&&(t.Dpi(e,s),this.I0t=s,s.O4t(),this.xpi(s),s.Z4t===la.YKt&&this.yo(new uB(s)))},this.gpi=()=>{const t=this.drt;t&&t.Z4t===la.YKt&&(this.yo(new Zu(t)),this.vN.src=""),this.I0t=void 0},this._pi=t=>{const i=this.Spi(t.adInstance);i&&(this.yo(new bu(i,i.qmi.getPlayheadTime())),this.w0t=i),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Vs.style.cursor="pointer",this.Vs.addEventListener("click",this.Cpi))},this.vpi=()=>{this.Vs.style.cursor="",this.Vs.removeEventListener("click",this.Cpi)},this.Cpi=()=>{this.f7t&&this.f7t.qmi.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.wpi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.kpi();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.R1t(),this.kpi()}}}};r();var P8=class t extends gs{jpi(){if(this.ept){this.ept.setAdVolume(z8(this.WE,this.Nk))}}Opi(t){this.ept=t,this.ipi(t)}ipi(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.Rpi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Ppi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.zpi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.Bpi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.Upi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Qpi)}Fpi(){const t=this.ept;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.Rpi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Ppi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.zpi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.Bpi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.Upi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Qpi))}Pk(){this.tbt.drt&&(this.tbt.drt.Gmi.resume(),this.KE=!1)}Rk(){this.tbt.drt&&(this.tbt.drt.Gmi.pause(),this.KE=!0)}get LE(){const t=this.tbt.f7t;return t&&(this.LE=t.qmi.getPlayheadTime()),this.EG}set LE(t){this.EG=t}get ct(){return this.JM}get Qmi(){return!!this.tbt&&void 0!==this.tbt.drt}get KE(){return this.CG}set KE(t){this.CG=t}get Nk(){return this.cT}set Nk(t){this.ept&&this.ept.setAdVolume(t),this.cT=t}get WE(){return this.ept&&(this.Ypi=0===this.ept.getAdVolume()),this.Ypi}set WE(t){this.ept&&this.ept.setAdVolume(z8(t,this.Nk)),this.Ypi=t}get _k(){return this.I5}get OE(){return this.W5}set OE(t){this.W5=t}get fk(){return this.Z5}static Vpi(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}Gpi(i){const e=t.Vpi(i);this.ept&&e&&this.ept.setVideoState(e)}ZC(){const t=this.tbt.f7t;t&&t.qmi.skip()}tr(){if(this.Fpi(),this.ept){this.Gpi("stop"),this.ept.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.ept.getTemporalSlots();for(const i of t)i.stop();this.ept.dispose(),this.ept=void 0}this.JM=NaN,this.OE=!1,this.Z5=Fn.Nz,this.LE=0,this.Wpi=0,this.KE=!0,void 0!==this.Zpi&&(m(this.Zpi),this.Zpi=void 0)}gn(){this.tr(),this.Bo(),this.tbt.fn("Mrt",this.xd),this.Xu.fn(ZL.pn,this.Ppi),this.k1t.removeEventListener("click",this.Hpi)}constructor(t,i,e,s){super(),this.ta=t,this.Xu=i,this.tbt=e,this.k1t=s,this.I5=Mo.PP().ks(),this.CG=!0,this.JM=NaN,this.Ypi=!1,this.W5=!1,this.Z5=Fn.Nz,this.EG=0,this.Wpi=0,this.Rpi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const i=t.qmi,e=i.getPlayheadTime(),s=i.getDuration();return e>=s||bf(s,e)})(this.tbt.f7t)||(this.KE=!0,this.yo(new Se(this.LE)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.KE=!1,this.yo(new te(this.LE));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.ept){const t=this.ept.getAdVolume();0===t?this.Ypi=!0:this.cT=t,this.yo(new $e(this.LE,this.Nk))}}},this.zpi=()=>{this.OE=!1;const t=this.KE;if(this.KE=!1,t&&(this.yo(new fi(this.LE)),this.yo(new te(this.LE))),this.Z5=Fn.Dz,this.LE=0,!this.tbt.f7t)return;const i=this.tbt.f7t.qmi;this.JM=i.getDuration(),this.yo(new yt(this.JM)),this.Zpi=v((()=>{if(!this.Qmi)return void this.fA();this.tbt.Lpi(this.LE);const t=i.getPlayheadTime();ce(t,this.Wpi,.001)||this.yo(new A(t,void 0)),this.Wpi=t}),250),this.ept&&this.ept.setAdVolume(z8(this.WE,this.Nk))},this.Hpi=()=>{const t=this.tbt.f7t;t&&(t.Z4t===la.Y4t?this.ta.Rk():this.KE||this.Rk())},this.fA=()=>{m(this.Zpi),this.Zpi=void 0},this.Bpi=()=>{this.fA(),this.OE=!0},this.Upi=()=>{this.Gpi("pause")},this.Qpi=()=>{this.Gpi("playing")},this.xd=t=>{t.Yl.Z4t===la.YKt&&(this.KE=!1)},this.Ppi=()=>{this.ept&&this.ept.resize(this.Xu.Su,this.Xu.Tu)},this.cT=t.Nk,e.yn("Mrt",this.xd),this.Xu.yn(ZL.pn,this.Ppi),this.k1t.addEventListener("click",this.Hpi)}};function z8(t,i){return t?0:i}r(),r();var B8=class extends Co{get name(){return E8.bmi}constructor(){super("A FreeWheel Ad Error occurred")}};r();var U8=class extends Co{get name(){return E8.ymi}constructor(){super("A FreeWheel Reset Error Occurred")}},Q8=0;var F8=class{Xpi(t,i,e){t.setNetwork(i.networkId),t.setServer(i.adServerUrl);const s=this.ept;if(s.setProfile(i.profile),i.assetId&&i.assetDuration&&s.setVideoAsset(i.assetId,i.assetDuration),i.siteSectionId&&s.setSiteSection(i.siteSectionId),s.registerVideoDisplayBase(e),i.cuePoints&&i.cuePoints.length)for(const t of i.cuePoints)s.addTemporalSlot("cue-"+ ++Q8,t.adUnit,t.timeOffset);const n=i.customData;if(Z(n)){const t=_.keys(n);for(const i of t){const t=n[i];s.addKeyValue(i,t)}}}async qpi(){this.ept.submitRequest(),await this.Kpi.rM}tr(){this.ept.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Jpi),this.Kpi.nM(new U8)}constructor(t,i,e,s){this.ept=i,this.Jpi=t=>{this.ept.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Jpi),t.success?this.Kpi.sM(void 0):this.Kpi.nM(new B8)},this.Xpi(t,e,s),i.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Jpi),this.Kpi=new xh}};r(),r();var Y8=class{$pi(){this.$mi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.gpi),this.$mi.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.gpi)}get tAi(){return this.My.rM}MFt(){this.$pi(),this.My.nM(new U8)}constructor(t){this.$mi=t,this.gpi=t=>{this.$pi(),this.My.sM(void 0)},this.a8t=t=>{this.$pi(),this.My.nM(new B8)},this.My=new xh,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.gpi),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.a8t)}},V8=class{Wz(t){this.$mi=t}Ymi(){return this.iAi(this.eAi.spi)}Omi(){this.iAi(this.eAi.hpi)}async iAi(t){if(this.$mi)for(;t.length>0;){this.sAi=new Y8(this.$mi);const i=this.sAi.tAi,e=this.eAi.drt;e&&e.Z4t===la.Y4t&&e.Gmi.stop();t.shift().Gmi.play();try{await i}finally{this.sAi=void 0}}}tr(){this.sAi&&(this.sAi.MFt(),this.sAi=void 0),this.nAi=0}gn(){this.ta.fn(Zi.Eb,this.rAi)}constructor(t,i){this.ta=t,this.eAi=i,this.nAi=0,this.rAi=()=>{const t=this.ta.xE();for(const i of this.eAi.rpi){const e=new Mo([this.nAi,t],[!0,!0]),s=i.Gmi.getTimePosition();if(e.gr(s))switch(i.Gmi.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.iAi([i]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:i.Gmi.play(),i.Gmi.setVisible(!0)}}this.nAi=t},t.yn(Zi.Eb,this.rAi)}},G8=0,W8=class t extends Yt{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++G8}get jmi(){return 0!==this.kmi.hpi.length}get Fmi(){return 0!==this.kmi.spi.length}async d6t(){if(!this.mJt)throw new b("Invalid state");const t=this.oAi,i=t.newContext();i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),i.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const e=new F8(t,i,this.mJt,this.hAi),s=this.kmi.Jmi(i,e.qpi());this.aAi.Wz(i),this.xmi.Opi(i),this.uAi=e;try{await s}finally{this.xmi.jpi(),this.cAi=!0}}get xmi(){return this.e8t}get kmi(){return this.lAi}get zmi(){return this.cAi}static dAi(t,i,e){const s=h.createElement("div");return s.id=e,s.className="theo-freewheel",i.classList.add("theo-freewheel-video"),s.appendChild(i),t.appendChild(s),s}get Rmi(){return this.aAi}p4t(t){this.xmi.Gpi(t.type)}ge(){this.k1t.style.display="block",this.vN.style.display="block"}be(){this.k1t.style.display="none",this.vN.style.display="none"}E7t(t){this.mJt=t}tr(){this.cAi=!1,this.mJt=void 0,this.kmi.tr(),this.aAi.tr(),this.uAi&&(this.uAi.tr(),this.uAi=void 0),this.xmi.tr(),this.vN.src=""}gn(){this.tr(),this.e8t.gn(),this.aAi.gn(),this.kmi.gn(),this.k1t.remove(),this.ta.we.removeChild(this.k1t)}constructor(i,e,n){super(),this.ta=i,this.vN=e,this.cAi=!1,this.hAi=t.createUniqueDisplayBaseId(),this.k1t=t.dAi(i.we,e,this.hAi),this.oAi=new s.tv.freewheel.SDK.AdManager,this.lAi=new R8(this.k1t,this.vN),this.aAi=new V8(this.ta,this.kmi),this.iu(this.kmi),this.e8t=new P8(i,n,this.kmi,this.k1t)}};function Z8(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function H8(t,i,e){if(void 0!==i&&j(i)||i<0||i===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return e}return G0(i)}Qi();mk.Ld.tW(new class{get a4t(){return ah.M0t}$G(t){return t.integration===Si.FREEWHEEL}u4t(t,i,e){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new Qf(t.Uu,t.Ll,1,[Ri.NI]);n.GG(t.we);const r=n.sG(Ri.NI),o=new W8(t,r.gV,t.Uu);return new x8(t,i,n,o,r)}fH(t){const i=oi(t);Zr(i.cuePoints)||(i.cuePoints=[]);const e=[],s=t.assetDuration||0;for(const t of i.cuePoints){const i=H8(t.adUnit,t.timeOffset,s),n=Z8(t.adUnit);!j(i)&&Ic(n)?(t.adUnit=n,t.timeOffset=i,e.push(t)):Fe.uA("Invalid adUnit/timeOffset combination. Cue was removed.")}return i.cuePoints=e,i}I9(t,i,e,s){e.E7t(t,i,s)}}),r(),r(),r(),r(),r();var X8=self.theoplayerDeviceMetadata;function q8(t){return t.navigator&&t.navigator.userAgent||""}r(),r(),r(),Uc(),r();var K8={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function En(t,i){const e=K8[i];return!!e&&Boolean(q8(t).match(e))}function J8(t){return En(t,"Android")}function $8(t){return En(t,"Windows Phone")}function t7(t){return En(t,"iOS")&&!$8(t)}function i7(t){return En(t,"Ubuntu")}var e7=/Windows (NT|Phone) ([0-9.]+)/i,s7=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,n7={"Windows 10":e7,"Windows 8.1":e7,"Windows 8":e7,"Windows 7":e7,"Windows Vista":e7,"Windows Server 2003":e7,"Windows XP":e7,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":s7,"Mac OS":s7,"Chrome OS":void 0};function r7(t,i){const e=n7[i];return e?q8(t).match(e):null}function o7(t){return t.split(/[_.]/).map((t=>C(t,10)))}function h7(t){if(function(t){return Boolean(q8(t).match(/Windows/i))}(t)){if(function(t){return En(t,"Windows 10")}(t))return"Windows 10";if($8(t))return"Windows Phone";if(function(t){return En(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return En(t,"Windows 8")}(t))return"Windows 8";if(function(t){return En(t,"Windows 7")}(t))return"Windows 7";if(function(t){return En(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return En(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return En(t,"Windows XP")}(t))return"Windows XP"}else{if(J8(t))return"Android";if(t7(t))return"iOS";if(function(t){return En(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return En(t,"Mac OS")}(t))return"Mac OS";if(i7(t))return"Ubuntu";if(function(t){return En(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return En(t,"Linux")&&!i7(t)}(t))return"Linux"}}function a7(t,i){const e=function(t){const i=r7(t,"Windows 10");return i&&i.length>2?o7(i[2]):void 0}(t),s=function(t){const i=r7(t,"Mac OS X");return i&&i.length>2?o7(i[2]):void 0}(t),n=function(t){const i=r7(t,"Android");return i&&i.length>1?o7(i[1]):void 0}(t),r=function(t){const i=r7(t,"iOS");return i&&i.length>3?o7(i[3]):void 0}(t),o=function(t){const i=r7(t,"Chrome OS");return i&&i.length>0?o7(i[0]):void 0}(t);return e?e.length>i?e[i]:void 0:s?s.length>i?s[i]:void 0:n?n.length>i?n[i]:void 0:r?r.length>i?r[i]:void 0:o&&o.length>i?o[i]:void 0}function u7(t){const i=function(t){return a7(t,0)}(t),e=function(t){return a7(t,1)}(t),s=function(t){return a7(t,2)}(t);if(void 0!==i)return void 0===e?""+i:void 0===s?i+"."+e:i+"."+e+"."+s}var c7={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function l7(t,i){const e=c7[i];return!!e&&Boolean(q8(t).match(e))}function d7(t){return Boolean(q8(t).match(/Mobi/i))}function f7(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||g7(t)}function g7(t){return l7(t,"Chrome iOS")}function _7(t){return l7(t,"Firefox")&&!w7(t)}function v7(t){return l7(t,"Firefox Mobile")&&!w7(t)&&d7(t)}function w7(t){return l7(t,"Seamonkey")}function m7(t){return l7(t,"Firefox iOS")&&!w7(t)}function p7(t){return l7(t,"Safari")&&!l7(t,"Chrome")&&!Ro.Gd}function A7(t){return Boolean(D7(t))}function y7(t){return l7(t,"Edge")}function b7(t){return l7(t,"Edge Chromium")}function M7(t){return l7(t,"IE")}function T7(t){return l7(t,"Vivaldi")}var S7=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,N7={Chrome:S7,"Chrome Mobile":S7,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:S7,HeadlessChrome:S7,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function I7(t,i){const e=N7[i];return e?q8(t).match(e):null}function D7(t){return I7(t,"Opera")}function E7(t){const i=function(t){return I7(t,"Firefox")}(t);return i?S(i[1]):0}function k7(t){const i=function(t){return I7(t,"Firefox iOS")}(t);return i?S(i[1].split(".")[0]):0}function L7(t){const i=function(t){return I7(t,"Safari")}(t);return i?S(i[2].split(".")[0]):0}function x7(t){const i=function(t){return I7(t,"Edge")}(t);return i?S(i[1]):0}function C7(t){const i=function(t){return I7(t,"Edge Chromium")}(t);return i?S(i[1]):0}function j7(t){const i=function(t){return I7(t,"IE")}(t);return i?S(i[2]):0}function O7(t){const i=function(t){return I7(t,"Vivaldi")}(t);return i?S(i[1]):0}function R7(t){if(J8(t))return f7(t)?"Chrome Mobile":_7(t)||v7(t)?"Firefox Mobile":y7(t)?"Edge Mobile":A7(t)?"Opera Mobile":"Android Browser";if(t7(t)){if(f7(t)||g7(t))return"Chrome iOS";if(_7(t)||m7(t))return"Firefox iOS";if(y7(t))return"Edge Mobile";if(p7(t)||function(t){return p7(t)&&d7(t)}(t))return"Safari Mobile";if(A7(t))return"Opera Mobile"}return function(t){return l7(t,"Chromium")}(t)?"Chromium":function(t){return l7(t,"HeadlessChrome")}(t)?"HeadlessChrome":f7(t)?"Chrome":_7(t)?"Firefox":p7(t)?"Safari":y7(t)?"Edge":b7(t)?"Edge Chromium":M7(t)?"IE":A7(t)?"Opera":T7(t)?"Vivaldi":void 0}function P7(t){return T7(t)?O7(t):g7(t)?Number(function(t){const i=N7["Chrome iOS"];return i&&i.exec(q8(t))||[]}(t)[1]):f7(t)?Number(function(t){const i=N7.Chrome;return i&&i.exec(q8(t))||[]}(t)[1]):_7(t)||v7(t)?E7(t):m7(t)?k7(t):p7(t)?L7(t):y7(t)?x7(t):b7(t)?C7(t):M7(t)?j7(t):A7(t)?function(t){const i=D7(t);return i&&i[0].indexOf("Opera")>-1?S(i[5]):i?S(i[2].split(".")[0]):0}(t):void 0}var z7=function(t){return t.fAi="pc",t.gAi="console",t._Ai="settop",t.vAi="mobile",t.wAi="tablet",t.mAi="smarttv",t.pAi="searchbot",t}({});function B7(t){const i=q8(t);return i.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":i.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(i)?"tablet":/Mobi/.test(i)?"mobile":i.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":i.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(R7(t))}(t)?"pc":void 0}Qi();var U7=class{dH(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){let t=xy.$b("deviceId");if(t)return t;let i=Ck();return xy.tM("deviceId",i),i}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"8.14.0"),this.AAi(t),this.yAi(),this.bAi(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const i=t.connectionType;i?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i):(this.MAi(),Kl.connection&&Kl.connection.addEventListener&&Kl.connection.addEventListener("change",this.MAi))}AAi(t){this.TAi(t);const i=t.deviceManufacturer||X8&&X8.manufacturer;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,i);const e=t.deviceModel||X8&&X8.model;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,e)}TAi(t){const i=t.deviceType||function(){const t=B7(self);switch(t){case z7.gAi:return"game-console";case z7.mAi:return"tv";case z7._Ai:return"media-streamer";default:return t}}();i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,i)}yAi(){const t=R7(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const i=P7(self);void 0!==i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,i.toString())}bAi(t){const i=t.deviceOs||h7(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,i);const e=t.deviceOsVersion||u7(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,e.toString())}gn(){Kl.connection&&Kl.connection.removeEventListener&&Kl.connection.removeEventListener("change",this.MAi)}constructor(t,i){this.empClient=t,this.agama=i,this.MAi=()=>{const t=Fe.vE;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const i=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(Fe._E);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i)}}}};Ha(function(t){return i=>class extends i{CE(t,i){this.SAi&&this.SAi.nZ(),super.CE(t)}gn(){this.SAi&&this.SAi.gn(),super.gn()}constructor(i,e){super(i,e),this.WW=new t,this.SAi=new Ok(this,this.WW,e)}}}(class extends Mk{Ok(t){this.NAi=t,this.IAi&&(this.WW=function(t,i){const e=function(t,i){switch(i){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(i,t.logLevel);i.setLogLevel(e);const s=new i.EMPClient(t.config);return function(t,i){return t.setExternalConfig(i.config),t}(s,t)}(t,this.IAi),this.WW&&(this.DAi=new U7(this.WW,this.IAi),this.do=!0))}lH(){return this.IAi||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),!!this.IAi}uH(){return this.do}FZ(t,i){if(this.WW&&this.IAi)switch(t){case nr.dW:this.WW.setMeasurement(this.IAi.Measurement.BUFFER_LENGTH,i);break;case nr.fW:this.WW.setMeasurement(this.IAi.Measurement.BYTES_RECEIVED,i);break;case nr._W:this.WW.setMeasurement(this.IAi.Measurement.SEGMENT_PROFILE_BITRATE,i);break;case nr.vW:this.WW.setMeasurement(this.IAi.Measurement.VIDEO_PROFILE_BITRATE,i);break;case nr.gW:this.WW.setMeasurement(this.IAi.Measurement.SEGMENT_READ_BITRATE,i);break;case nr.hW:this.WW.setMeasurement(this.IAi.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,i);break;case nr.aW:this.WW.setMeasurement(this.IAi.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,i);break;case nr.uW:this.WW.setMeasurement(this.IAi.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,i);break;case nr.cW:this.WW.setMeasurement(this.IAi.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,i);break;case nr.lW:this.WW.setMeasurement(this.IAi.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,i);break;case nr.mW:this.WW.setMeasurement(this.IAi.Measurement.PLAYBACK_POSITION,i);break;case nr.pW:this.WW.setMeasurement(this.IAi.Measurement.NUMBER_OF_FRAMES_DECODED,i);break;case nr.wW:this.WW.setMeasurement(this.IAi.Measurement.NUMBER_OF_FRAMES_DROPPED,i)}}MZ(t,i){if(this.WW&&this.IAi)switch(t){case pk.TW:this.WW.setSessionMetadata(this.IAi.SessionMetadata.ASSET_DURATION,i);break;case pk.MW:this.WW.setSessionMetadata(this.IAi.SessionMetadata.MANIFEST_URI,i);break;case pk.NW:this.WW.setSessionMetadata(this.IAi.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,i);break;case pk.EW:this.WW.setSessionMetadata(this.IAi.SessionMetadata.SERVICE_NAME,i);break;case pk.IW:this.WW.setSessionMetadata(this.IAi.SessionMetadata.CDN,i);break;case pk.DW:this.WW.setSessionMetadata(this.IAi.SessionMetadata.CONTENT_TITLE,i);break;case pk.kW:this.WW.setSessionMetadata(this.IAi.SessionMetadata.CONTENT_TYPE,i);break;case pk.LW:this.WW.setSessionMetadata(this.IAi.SessionMetadata.CONTENT_DESCRIPTION,i)}}dH(){this.DAi&&this.NAi&&this.DAi.dH(this.NAi)}cH(t,i){this.IAi&&this.WW&&(this.HZ(),function(t,i,e,s){const n=jk(t,e,s);i.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.IAi,this.WW,t,i),this.EAi=!0)}gn(){this.DAi&&this.DAi.gn(),this.kAi(Ak.xW),this.WW=void 0}uZ(t){this.LAi(t)}dZ(t,i){this.WW&&this.WW.event(t.code,i)}HZ(){this.WW&&this.EAi&&(this.WW.exitSession(),this.EAi=!1)}kAi(t){if(this.WW&&this.IAi&&(this.HZ(),t===Ak.xW))this.WW.shutdown(this.IAi.ShutdownType.NORMAL_SHUTDOWN)}cZ(t,i,e){this.LAi(t,i,e)}LAi(t,i,e){if(this.WW&&this.IAi)switch(t){case he.oP:this.xAi(this.IAi.ViewState.PLAYING,i,e);break;case he.nW:this.xAi(this.IAi.ViewState.FAILED,i,e);break;case he.rW:this.xAi(this.IAi.ViewState.INITIAL_BUFFERING,i,e);break;case he.iW:this.xAi(this.IAi.ViewState.PAUSED,i,e);break;case he.eW:this.xAi(this.IAi.ViewState.SEEK,i,e);break;case he.sW:this.xAi(this.IAi.ViewState.STALLED,i,e);break;case he.oW:this.xAi(this.IAi.ViewState.NO_ACCESS,i,e)}}xAi(t,i,e){if(this.WW)if(i){const s=function(t){return t||""}(e);this.WW.viewStateExtended(t,i.code,s)}else this.WW.viewStateChanged(t)}constructor(){super(),this.do=!1,this.EAi=!1,this.IAi=gi.Agama}}),Hn.$nt),r(),r(),r(),r(),r();var Q7=function(t){return t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last",t}({});r();var se=function(t){return t.VOD="vod",t.LIVE="live",t}({}),F7=class{get ga(){return this.CAi.ga}get lt(){return this.dV}get zE(){return this.fV}jAi(t){this.dV=Au(t),this.fV=t,this.ta.yo(new cl(t))}ka(t){this.OAi.resetSource(),this.RAi.eM(),this.PAi=!1,this.ta.zAi(t)}async Prt(t,i){if(this.BAi.tr(),this.PAi=!1,!t||!function(t){return t.sources.some((t=>t.integration===zc.UPLYNK))}(t))return await this.ta.UAi(t,i);try{this.QAi=await this.FAi.Pvi(t),await this.ta.UAi(this.QAi,i)}catch(t){this.jAi(new qi(vt.MANIFEST_LOAD_ERROR,t.message,t))}}gn(){this.w7.Ty(),this.YAi.Ty(),this.ta.fn(Zi.Gy,this.VAi),this.ta.fn(Zi.so,this.Xfi),this.ta.fn(Zi.Eb,this.kai),this.ta.fn(Zi.qy,this.aai),this.ta.fn(E.sP,this.wd);for(const t of this.OAi.s0t.Ju)t.fn("GAi",this.WAi),t.fn("Mrt",this.ZAi),t.fn("brt",this.HAi);this.OAi.s0t.fn("prt",this.XAi),this.OAi.s0t.fn("mrt",this.qAi),this.OAi.destroy(),this.x1t&&(this.x1t.wy(),this.x1t=void 0),this.PAi=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const i=await this.KAi.pSt(t.integrationData.source.prefix,t.integrationData.source.id,this.YAi.ly,t.integrationData.preplayResponse.sid);this.CAi.JAi(i),this.RAi.$Ai(i,this.OAi.s0t.Ju)}catch(t){0}}tyi(t){this.OAi.iyi(t),this.OAi.crt.forEach((i=>i.eyi(t))),this.OAi.syi(this.ta.vk()),this.L1t()}CE(t){if(this.OAi.drt)return;this.w7.Ty(),this.w7=new Wt;X(Vh(this.Zni(t,this.w7.ly),this.w7))}async Zni(t,i){if(yi(i),t<this.ta.xE())return void this.nyi(t);let e=[];switch(this.OAi.ryi){case Q7.PLAY_ALL:e=this.OAi.oyi(this.ta.xE(),t),await this.hyi(t,e,i);break;case Q7.PLAY_LAST:const s=this.OAi.oyi(this.ta.xE(),t).pop();e=s?[s]:[],await this.hyi(t,e,i);break;case Q7.PLAY_NONE:this.ayi(t)}}nyi(t){const i=dl(this.OAi.s0t.Ju,(i=>i.Nct.gr(t)));i?this.ta.uyi(i.lB):this.ta.uyi(t)}ayi(t){const i=this.OAi.oyi(this.ta.xE(),t).pop();i&&i.Nct.gr(t)?this.ta.uyi(i.dB):this.ta.uyi(t)}async hyi(t,i,e){for(const t of i)await this.cyi(t,e);const s=i[i.length-1];s&&s.Nct.gr(t)?this.ta.xE()<t&&this.ta.uyi(s.dB):this.ta.uyi(t)}async cyi(t,i){t.fn("GAi",this.WAi);const e=Promise.race([t.zy("brt",i),t.zy("GAi",i)]);this.tyi(this.ta.xE()),t.Yh||this.ta.uyi(t.lB),await e,t.yn("GAi",this.WAi)}L1t(){const t=dl(this.OAi.crt,(t=>t.lyi.length>0));if(t){const i=t.lyi[0];this.x1t||(this.x1t=new P1(this.ta.we),this.x1t.yn("clickstart",this.dyi)),this.x1t.G0t=i}else this.x1t&&(this.x1t.wy(),this.x1t=void 0)}constructor(t,i,e,s,n,r,o){this.ta=t,this.BAi=i,this.FAi=e,this.OAi=s,this.CAi=n,this.KAi=r,this.RAi=o,this.dV=void 0,this.fV=void 0,this.w7=new Wt,this.YAi=new Wt,this.fyi=void 0,this.PAi=!1,this.x1t=void 0,this.VAi=t=>{const i=t.currentSource;if(!i||!i.integrationData)return;const{preplayResponse:e,source:s}=i.integrationData;this.CAi.gyi(e),e&&e.type===se.VOD&&e.ads&&this.OAi.$Ai(e.ads),this.BAi._yi=i.integrationData,s.assetInfo&&X(this.fetchAssetInfo(i))},this.Xfi=()=>{this.PAi=!0},this.kai=()=>{this.PAi&&this.tyi(this.ta.xE())},this.aai=()=>{this.PAi&&(this.tyi(1/0),this.PAi=!1)},this.wd=()=>{X(this.BAi.Cn())},this.WAi=t=>{this.w7.Ty(),this.w7=new Wt;X(Vh(this.Zni(t.Yl.dB,this.w7.ly),this.w7))},this.ZAi=()=>{1!==this.ta.$E&&(this.fyi=this.ta.$E,this.ta.$E=1)},this.HAi=()=>{void 0!==this.fyi&&(this.ta.$E=this.fyi,this.fyi=void 0)},this.XAi=t=>{t.Yl.yn("GAi",this.WAi),t.Yl.yn("Mrt",this.ZAi),t.Yl.yn("brt",this.HAi)},this.qAi=t=>{t.Yl.fn("GAi",this.WAi),t.Yl.fn("Mrt",this.ZAi),t.Yl.fn("brt",this.HAi)},this.dyi=()=>{this.ta.Rk()},this.ta.yn(Zi.Gy,this.VAi),this.ta.yn(Zi.so,this.Xfi),this.ta.yn(Zi.Eb,this.kai),this.ta.yn(Zi.qy,this.aai),this.ta.yn(E.sP,this.wd),this.OAi.s0t.yn("prt",this.XAi),this.OAi.s0t.yn("mrt",this.qAi)}};r(),r();var Y7=xu({breaksIndex:xs,adsIndex:xs,startTime:xs,endTime:xs}),V7=xu({index:xs,timeOffset:xs}),G7=xu({duration:xs,apiFramework:Du(sn,nE),creative:sn,mimeType:sn,width:xs,height:xs,companions:Ra(function(t){return new gE(t)}((()=>G7))),extensions:Du(eE,Ra(sE)),fw_parameters:Du(eE,fE(sn)),events:fE(Ra(sn))}),W7=xu({type:uE(["linear","nonlinear"]),position:uE(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:xs,duration:xs,ads:Ra(G7),events:fE(Ra(sn))}),Z7=xu({breaks:Ra(W7),breakOffsets:Du(eE,Ra(V7)),placeholderOffsets:Du(eE,Ra(Y7))}),H7=xu({required:Du(eE,iE),fairplayCertificateURL:Du(eE,sn),widevineLicenseURL:Du(eE,sn),playreadyLicenseURL:Du(eE,sn)}),X7={type:uE(hE(se)),playURL:sn,prefix:sn,sid:sn,drm:Du(eE,H7)},q7=xu(Ei({},X7,{type:uE([se.VOD]),ads:Z7,interstitialURL:Du(sn,nE,eE)})),K7=Du(q7,xu(Ei({},X7,{type:uE([se.LIVE])})));r();var J7=sn,$7=xu({userId:sn,externalId:Du(sn,Ra(sn))});Qi();var ttt=class{async pSt(t){try{return this.vyi(t)}catch(t){throw t}}async vyi(t){const i=await async function(t){const i=t.prefix,e=itt[t.assetType],s=function(t){if(Ra(J7).uY(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(J7.uY(t))return t;if($7.uY(t)&&Zr(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if($7.uY(t))return"ext/"+t.userId+"/"+t.externalId;throw new k("Invalid asset id")}(t.id),n=await async function(t){if(t&&await Fe.wA())return{rmt:"fps",manifest:"m3u8"};if(t&&await Fe.pA())return{rmt:"wv",manifest:"mpd"};if(t&&await Fe.mA())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),r=function(t,i){const e=ett(t,i);return e?{"ad.cping":"1","ad.pingf":String(e)}:{}}(t.assetType,t.ping);let o={};Zr(t.preplayParameters)?t.preplayParameters.forEach((t=>{o[t[0]]=t[1]})):o=t.preplayParameters;const h=i+"/preplay/"+e+s+".json";return fb(h,Ei({v:"2"},o,n,r,o))}(t),e=this.OQ.hI({xI:Ve.GET,zu:i,oI:Ee.CN}),s=await e,n=Ei({},await s.rI(),{type:t.assetType===Fo.ASSET?se.VOD:se.LIVE});return K7.uY(n)||K7.lY(n,"PreplayResponse"),n}constructor(t){this.OQ=t}},itt={[Fo.ASSET]:"",[Fo.CHANNEL]:"channel/",[Fo.EVENT]:"event/"};function ett(t,i){const e=t!==Fo.ASSET;return(!e&&i.adImpressions?1:0)+(!e&&i.freeWheelVideoViews?2:0)+(e&&i.linearAdData?4:0)}r(),r();var stt=xu({ad_id:sn,apiFramework:Du(nE,sn),companions:Ra(sE),creative:sn,duration:xs,mimeType:sn,height:xs,width:xs,extensions:Du(eE,Ra(sE)),fw_parameters:Du(eE,fE(sn))}),ntt=xu({breakId:sn,ads:Ra(stt),type:uE(["linear","nonlinear"]),position:uE(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:xs,duration:xs,height:Du(eE,xs),width:Du(eE,xs),events:fE(Ra(sn))}),rtt=xu({breaks:Ra(ntt)}),ott=xu({next_time:xs,ads:Du(eE,rtt),extensions:Du(eE,Ra(sE)),error:Du(eE,sn),currentBreakEnd:Du(eE,xs)}),htt=function(t){return t.TSt="start",t.eW="seek",t}({}),att=class{async pSt(t,i){try{return this.vyi(t,i)}catch(t){throw t}}async vyi(t,i){const e=function(t){const i={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(i.ft=String(t.seekTime));t.event&&(i.ev=t.event);return fb(t.zonePrefix+"/session/ping/"+t.sessionId+".json",Ei({},i))}(t),s=this.OQ.hI({xI:Ve.GET,zu:e,oI:Ee.CN,ly:i}),n=await s,r=await n.rI();return ott.uY(r)||ott.lY(r,"PingResponse"),r}constructor(t){this.OQ=t}};r(),r();var utt=class extends Dc{get iD(){return this.eD}ma(){return new ctt(this.eD)}constructor(t){super("wyi"),this.eD=t}},ctt=class extends Jr{constructor(t){super("pingresponse"),this.response=t}};r();var ltt=class extends Dc{get lt(){return this.dV}ma(){return new dtt(this.dV)}constructor(t){super("myi"),this.dV=t}},dtt=class extends Jr{constructor(t){super("pingerror"),this.error=t}},ftt=class extends tu{set _yi(t){this.pyi=t}get Ayi(){return this.yyi}async Cn(){const t=this.pyi;if(!t)return;0!==ett(t.source.assetType,t.source.ping)&&(this.yyi=this.ta.vk().start(0),await this.byi(htt.TSt),this.ta.yn("timeupdate",this.Myi),this.ta.yn("seeking",this.Tyi))}async byi(t,i){const e=this.pyi.preplayResponse,s={};if(j(this.yyi))return void 0;if($t(this.Syi)&&bf(this.Syi,this.ta.xE()-this.yyi))return;void 0!==i&&(s.seekTime=i),void 0!==t&&(s.event=t);let n,r=this.ta.xE()-this.yyi;t===htt.TSt?r=0:t!==htt.eW&&this.Nyi&&(r=x.min(r,this.Nyi)),this.Syi=r;try{var o;const t=await this.Iyi.pSt(Ei({zonePrefix:e.prefix,sessionId:e.sid,currentTime:r,hasFreeWheelVideoViews:null==(o=this.pyi)?void 0:o.source.ping.freeWheelVideoViews},s),this.rN.ly);this.yo(new utt(t)),this.Nyi=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){Tu(t)||(n=t.message)}finally{n&&this.yo(new ltt(n))}}tr(){this.Nyi=void 0,this.pyi=void 0,this.yyi=NaN,this.Dyi=!1,this.Eyi=NaN,this.Syi=void 0,this.ta.fn("seeking",this.Tyi),this.ta.fn("timeupdate",this.Myi),this.kyi()}kyi(){this.rN.Ty(),this.rN=new Wt}gn(){this.tr()}constructor(t,i){super(),this.Iyi=t,this.ta=i,this.yyi=NaN,this.Nyi=void 0,this.Dyi=!1,this.Eyi=NaN,this.rN=new Wt,this.Syi=void 0,this.Myi=async()=>{const t=this.ta.xE();if(this.Eyi=t,this.Dyi||He(this.Nyi)||j(this.yyi))return;this.yyi+this.Nyi<=t&&(this.Dyi=!0,await this.byi(),this.Dyi=!1)},this.Tyi=()=>{if(this.ta.xE()===this.yyi)return;this.Dyi&&this.kyi(),this.Eyi=this.ta.xE();const t=this.Eyi-(this.yyi||0);j(t)?X(this.byi(htt.eW,0)):X(this.byi(htt.eW,t))}}};r();var gtt=class{async Pvi(t){const i=[];for(const e of t.sources)if(_tt(e))try{const s=wtt({source:e,preplayResponse:await this.Lyi.pSt(e)},t,this.FJ);s.src&&(s.src=fb(s.src,e.playbackUrlParameters)),i.push(s)}catch(t){0}else i.push(e);if(0!==t.sources.length&&0===i.length)throw new b("Fatal: unable to play UplynkSources.");return Ei({},t,{sources:i})}constructor(t,i){this.Lyi=t,this.FJ=i}};function _tt(t){return"verizon-media"===t.integration||"uplynk"===t.integration}function vtt(t){if(t.sources)if(Zr(t.sources)){for(const i of t.sources)if(!Ic(i)&&("verizon-media"===i.integration||"uplynk"===i.integration))return!0}else if(!Ic(t.sources))return"verizon-media"===t.sources.integration||"uplynk"===t.sources.integration;return!1}function wtt(t,i,e){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=ct({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},i,e);return r.integrationData=t,r}r(),r(),r();var mtt=class extends Dc{ma(){return new ptt(this.Yl.ga)}constructor(t,i){super("Mrt"),this.Yl=t,this.kU=i}},ptt=class extends Jr{constructor(t){super("adbreakbegin"),this.adBreak=t}};r();var Att=class extends Dc{ma(){return new ytt(this.Yl.ga)}constructor(t,i){super("brt"),this.Yl=t,this.kU=i}},ytt=class extends Jr{constructor(t){super("adbreakend"),this.adBreak=t}};r();var btt=class extends Dc{ma(){return new Mtt(this.Yl.ga)}constructor(t){super("GAi"),this.Yl=t}},Mtt=class extends Jr{constructor(t){super("adbreakskip"),this.adBreak=t}};r(),r();var Ttt=class extends Dc{ma(){return new Stt(this.Yl.ga)}constructor(t){super("o3t"),this.Yl=t}},Stt=class extends Jr{constructor(t){super("updateadbreak"),this.adBreak=t}},Ntt=class extends gs{get ga(){return this.Za||(this.Za=function(t){let i;const e={get startTime(){return t.lB},get endTime(){return t.dB},get duration(){return t.ct},get ads(){return t.Vc.ga},get skipOffset(){return t.Oqt},set skipOffset(i){t.Oqt=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new es(t,e),e}(this)),this.Za}get lB(){return this.yB}get dB(){return this.JM?this.yB+this.JM:void 0}xyi(t){this.JM=t-this.lB;for(const i of this.Vc.Ju)i.lB>t&&this.Vc.wS(i);this.yo(new Ttt(this))}get ct(){return this.JM}get Nct(){const t=this.dB;return $t(t)?new Mo([this.lB,t]):Mo.PP()}get Vc(){return this.Dc}get Cyi(){return this.jyi}get Yh(){return this.Kh}get Oqt(){return this.ywi?-1:this.Rqt}set Oqt(t){this.ywi||(this.Rqt=t)}Hlt(t){return t>=this.lB&&(He(this.ct)||t<=this.lB+this.ct)}Oyi(t){return-1!==this.Oqt&&(!!$t(this.dB)&&t-this.lB>=this.Oqt)}ZC(){this.Dc.Ju.forEach((t=>t.ZC())),this.yo(new btt(this))}Ryi(t){const i=$t(this.dB)&&t>=this.dB,e=this.lB<=t&&!i&&!this.Yh,s=this.Yh&&this.dB&&t>=this.dB;e&&(this.Kh=!0,this.yo(new mtt(this,this.lB))),this.Dc.Ju.forEach((i=>i.Ryi(t))),s&&(this.jyi=!0,this.Kh=!1,this.yo(new Att(this,this.dB)))}constructor(t,i,e,s,n){super(),this.yB=t,this.JM=i,this.Dc=e,this.ywi=s,this.Kh=!1,this.jyi=!1,this.Rqt=n}};r(),r();var Itt=class extends Dc{ma(){return new Dtt(this.Art.ga)}constructor(t,i){super("Trt"),this.Art=t,this.kU=i}},Dtt=class extends Jr{constructor(t){super("adbegin"),this.ad=t}};r();var Ett=class extends Dc{ma(){return new ktt(this.Art.ga)}constructor(t,i){super("Srt"),this.Art=t,this.kU=i}},ktt=class extends Jr{constructor(t){super("adend"),this.ad=t}};r(),r();var Ltt=class extends Dc{ma(){return new xtt(this.Art.ga)}constructor(t){super("Pyi"),this.Art=t}},xtt=class extends Jr{constructor(t){super("removead"),this.ad=t}},Ctt=class extends U4{eei(t){}oei(t){this.yo(new Ltt(t))}constructor(){super()}};r();var jtt=class extends Dc{ma(){return new Ott(this.Art.ga)}constructor(t){super("a3t"),this.Art=t}},Ott=class extends Jr{constructor(t){super("adfirstquartile"),this.ad=t}},Rtt=class extends Dc{ma(){return new Ptt(this.Art.ga)}constructor(t){super("u3t"),this.Art=t}},Ptt=class extends Jr{constructor(t){super("admidpoint"),this.ad=t}},ztt=class extends Dc{ma(){return new Btt(this.Art.ga)}constructor(t){super("c3t"),this.Art=t}},Btt=class extends Jr{constructor(t){super("adthirdquartile"),this.ad=t}},Utt=class extends Dc{ma(){return new Qtt(this.Art.ga)}constructor(t){super("zyi"),this.Art=t}},Qtt=class extends Jr{constructor(t){super("adcomplete"),this.ad=t}};r();var Ftt=class t extends gs{static Byi(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.Byi(i,e))),e.extensions,e.fw_parameters,e.events,void 0)}static Uyi(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.Uyi(i,e))),e.extensions,e.fw_parameters,void 0,e.ad_id)}get ga(){return this.Za||(this.Za=function(t){let i;const e={get apiFramework(){return t.HXt},get companions(){return t.zXt.ga},get creative(){return t.Qyi},get duration(){return t.ct},get endTime(){return t.dB},get events(){return t._X},get extensions(){return t.Fyi},get freeWheelParameters(){return t.Yyi},get height(){return t.Ti},get mimeType(){return t.gX},get startTime(){return t.lB},get width(){return t.ji},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new es(t,e),e}(this)),this.Za}get lB(){return this.yB}get dB(){return this.yB+this.JM}get ct(){return this.JM}get HXt(){return this.XXt}get Qyi(){return this.Vyi}get gX(){return this.kX}get ji(){return this.dT}get Ti(){return this.fT}get _X(){return this.J_}get zXt(){return this.BXt}get Fyi(){return this.Gyi}get Yyi(){return this.Wyi}get Yh(){return this.Kh}get lyi(){var t;return null!=(t=this.J_.clickthroughs)?t:[]}Ryi(t){const i=this.lB<=t&&t<this.dB,e=i&&!this.Yh,s=!i&&this.Yh;e&&(this.Zyi=!1,this.Hyi=!1,this.Xyi=!1,this.qyi=!1,this.Kh=!0,this.yo(new Itt(this,this.lB))),s&&(this.Kh=!1,this.yo(new Ett(this,this.dB)))}eyi(t){const i=(t-this.lB)/this.ct;!this.Zyi&&i>=.25&&(this.Zyi=!0,this.yo(new jtt(this))),!this.Hyi&&i>=.5&&(this.Hyi=!0,this.yo(new Rtt(this))),!this.Xyi&&i>=.75&&(this.Xyi=!0,this.yo(new ztt(this))),!this.qyi&&i>=.9999&&(this.qyi=!0,this.yo(new Utt(this)))}ZC(){this.Zyi=!0,this.Hyi=!0,this.Xyi=!0,this.qyi=!0}gn(){this.fn("Trt",this.Kyi),this.fn("Srt",this.Jyi)}constructor(t,i,e,s,n,r,o,h,a=[],u={},c={},l){super(),this.yB=t,this.JM=i,this.XXt=e,this.Vyi=s,this.kX=n,this.dT=r,this.fT=o,this.Gyi=a,this.Wyi=u,this.J_=c,this.Tqt=l,this.BXt=new Ctt,this.Kh=!1,this.Zyi=!1,this.Hyi=!1,this.Xyi=!1,this.qyi=!1,this.Kyi=()=>this.eyi(this.yB),this.Jyi=()=>this.eyi(this.dB),this.BXt.sei(h),this.yn("Trt",this.Kyi),this.yn("Srt",this.Jyi)}};r(),r();var Ytt=class extends Dc{ma(){return new Vtt(this.Yl.ga)}constructor(t){super("prt"),this.Yl=t}},Vtt=class extends Jr{constructor(t){super("addadbreak"),this.adBreak=t}};r();var Gtt=class extends Dc{ma(){return new Wtt(this.Yl.ga)}constructor(t){super("mrt"),this.Yl=t}},Wtt=class extends Jr{constructor(t){super("removeadbreak"),this.adBreak=t}},Ztt=class extends U4{eei(t){this.yo(new Ytt(t))}oei(t){this.yo(new Gtt(t))}constructor(){super()}},Htt=class{get ga(){return this.Za||(this.Za=function(t){return{get adBreaks(){return t.s0t.ga},get currentAdBreak(){if(t.drt)return t.drt.ga},get currentAds(){return t.drt?t.drt.Vc.ga:(new Ctt).ga},skip(){t.ZC()}}}(this)),this.Za}get s0t(){return this.D0t}get drt(){return dl(this.D0t.Ju,(t=>t.Yh))}get crt(){return this.drt?this.drt.Vc.Ju.filter((t=>t.Yh)):[]}get $yi(){if(0===this.s0t.V||0===this.ta.vk().length)return;const t=this.ta.vk().end(this.ta.vk().length-1);return dl(this.s0t.Ju,(i=>i.Hlt(t)))}get ryi(){return this.tbi}syi(t){if(0===t.length)return;const i=Mo.xn(t);for(const t of this.D0t.Ju.slice())$t(t.dB)&&i.Cn(0)>t.dB&&this.D0t.wS(t)}$Ai(t){const i=!function(t){return $t(t.breakOffsets)}(t),e=i?this.BAi.Ayi:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+e;const n=new Ctt;let r=0;for(const e of s.ads){const s=i?Ftt.Uyi(t,e):Ftt.Byi(t,e);n.Kz(s),t+=s.ct,r+=s.ct}const o=s.timeOffset+e,h=i?void 0:s.duration,a=new Ntt(o,h,n,i,this.ibi);i&&this.ebi.push({DXt:a,tkt:o+r}),this.D0t.Kz(a)}}sbi(t){const i=this.$yi;i&&i.xyi(t+this.BAi.Ayi)}iyi(t){this.nbi=t,this.D0t.Ju.forEach((i=>i.Ryi(t)))}ZC(){const t=this.nbi,i=this.drt;t&&i&&i.Oyi(t)&&i.ZC()}skipAd(t){this.ZC()}oyi(t,i){let e=[];for(const s of this.s0t.Ju)!s.Cyi&&s.lB>=t&&s.lB<i&&e.push(s);return e}destroy(){this.ta.fn("timeupdate",this.rbi),this.BAi.fn("wyi",this.obi)}resetSource(){var t;for(const t of this.s0t.Ju){for(const i of t.Vc.Ju)i.Bo();t.Bo()}this.s0t.eM(),null==(t=this.hbi)||t.removeAllAds(),this.nbi=void 0,this.ebi=[]}abi(t){return dl(this.hbi.ads,(i=>i.creativeId===t.Qyi))}constructor(t,i,e,s){var n;this.ebi=[],this.hbi=void 0,this.ubi=t=>(this.hbi=t,this),this.obi=t=>{t.iD.ads&&this.$Ai(t.iD.ads),t.iD.currentBreakEnd&&this.sbi(t.iD.currentBreakEnd)},this.rbi=t=>{if(0===this.ebi.length||0===this.ta.vk().length)return;const i=this.ta.vk().end(this.ta.vk().length-1);for(const t of this.ebi.slice())$t(t.DXt.ct)?ra(this.ebi,t):t.tkt<i&&(t.DXt.xyi(t.tkt),ra(this.ebi,t))},this.yd=t=>{var i;const e=null==(i=this.hbi)?void 0:i.createAdBreak({timeOffset:t.Yl.lB,maxDuration:t.Yl.ct,customData:t.Yl});t.Yl.yn("GAi",this.cbi);for(const i of t.Yl.Vc.Ju){var s,n;const r={type:"linear",timeOffset:i.lB,duration:i.ct,creativeId:i.Qyi,skipOffset:t.Yl.Oqt,clickThrough:null==(s=i.lyi)?void 0:s[0],customData:i};null==(n=this.hbi)||n.createAd(r,e),i.yn("Trt",this.Q8t),i.yn("Srt",this.lbi),i.yn("a3t",this.dbi),i.yn("u3t",this.fbi),i.yn("c3t",this.gbi),i.yn("zyi",this.kpi)}},this.cbi=t=>{for(const s of t.Yl.Vc.Ju){const t=this.abi(s);var i,e;if(t)null==(i=this.hbi)||i.beginAd(t),null==(e=this.hbi)||e.skipAd(t)}},this.bd=t=>{for(const i of t.Yl.Vc.Ju)i.Bo();t.Yl.Bo()},this.Q8t=t=>{const i=this.abi(t.Art);var e;i&&(null==(e=this.hbi)||e.beginAd(i))},this.lbi=t=>{const i=this.abi(t.Art);var e;i&&(null==(e=this.hbi)||e.endAd(i))},this.dbi=t=>{const i=this.abi(t.Art);var e;i&&(null==(e=this.hbi)||e.updateAdProgress(i,.25))},this.fbi=t=>{const i=this.abi(t.Art);var e;i&&(null==(e=this.hbi)||e.updateAdProgress(i,.5))},this.gbi=t=>{const i=this.abi(t.Art);var e;i&&(null==(e=this.hbi)||e.updateAdProgress(i,.75))},this.kpi=t=>{const i=this.abi(t.Art);var e;i&&(null==(e=this.hbi)||e.updateAdProgress(i,1))},this.ta=t,this.BAi=i,this.D0t=new Ztt,this.D0t.yn("prt",this.yd),this.D0t.yn("mrt",this.bd),this.ibi=e,this.tbi=s,t.yn("timeupdate",this.rbi),this.BAi.yn("wyi",this.obi),null==(n=this.ta.Vc)||n._rt(Si.UPLYNK,this.ubi)}};r(),r(),r();var Xtt=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED",t}({}),qtt=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED",t}({}),Ktt=class t{static _bi(i,e,s){const n=new Bw(i.rating_flags);return new t(e,s,i.duration,Boolean(i.audio_only),i.boundary_details,Boolean(i.error),i.tv_rating,i.max_slice,i.thumb_prefix,i.slice_dur,i.movie_rating,i.owner,i.meta,i.rates,i.thumbs,i.poster_url,i.default_poster_url,i.desc,n.Hb(1),n.Hb(2),n.Hb(4),n.Hb(8),i.external_id,Boolean(i.is_ad),i.asset)}get ga(){return this.Za||(this.Za=function(t){return{startTime:t.lB,endTime:t.dB,duration:t.ct,audioOnly:t.vbi,boundaryDetails:t.wbi,error:t.lt,tvRating:t.mbi,maxSlice:t.pbi,thumbPrefix:t.Abi,sliceDuration:t.ybi,movieRating:t.bbi,ownerId:t.Mbi,metadata:t._Q,rates:t.Tbi,thumbnailResolutions:t.Sbi,posterUrl:t.Nbi,defaultPosterUrl:t.Ibi,description:t.$j,hasAdultLanguage:t.Dbi,hasSexualSituations:t.Ebi,hasViolence:t.kbi,hasDrugSituations:t.Lbi,externalId:t.xbi,isAd:t.Cbi,assetId:t.jbi}}(this)),this.Za}constructor(t,i,e,s,n,r,o,h,a,u,c,l,d,f,g,_,v,w,m,p,A,y,b,M,T){this.lB=t,this.dB=i,this.ct=e,this.vbi=s,this.wbi=n,this.lt=r,this.mbi=o,this.pbi=h,this.Abi=a,this.ybi=u,this.bbi=c,this.Mbi=l,this._Q=d,this.Tbi=f,this.Sbi=g,this.Nbi=_,this.Ibi=v,this.$j=w,this.Dbi=m,this.Ebi=p,this.kbi=A,this.Lbi=y,this.xbi=b,this.Cbi=M,this.jbi=T}};var Jtt=xu({duration:xs,offset:xs}),$tt=xu({c3:Jtt}),tit=xu({c7:Jtt}),iit=xu({halftime:Jtt}),eit=uE(hE(qtt)),sit=uE(hE(Xtt)),nit=xu({width:Du(eE,xs),prefix:sn,bw:xs,bh:xs,height:Du(eE,xs)}),rit=xu({audio_only:xs,boundary_details:Du(eE,Ra(Du($tt,tit,iit))),error:xs,tv_rating:eit,max_slice:xs,thumb_prefix:sn,slice_dur:xs,movie_rating:sit,owner:sn,meta:sE,rates:Ra(xs),thumbs:Ra(nit),poster_url:sn,duration:xs,default_poster_url:sn,desc:sn,rating_flags:xs,external_id:sn,is_ad:xs,asset:sn}),oit=class{async pSt(t,i,e,s){const n=function(t,i,e){if(J7.uY(i))return[hit(t,i,e)];if(Ra(J7).uY(i))return i.map((i=>hit(t,i,e)));if($7.uY(i)){return(Zr(i.externalId)?i.externalId:[i.externalId]).map((s=>hit(t,"ext/"+i.userId+"/"+s,e)))}throw new k("Invalid asset id")}(t,i,s),r=n.map((t=>co((()=>this.vyi(t)),e)));return(await Promise.all(r)).filter($t)}async vyi(t){const i=this.OQ.hI({xI:Ve.GET,zu:t,oI:Ee.CN}),e=await i,s=await e.rI();return rit.uY(s)||rit.lY(s,"AssetInfoResponse"),s}constructor(t){this.OQ=t}};function hit(t,i,e){return e?t+"/player/assetinfo/"+i+".json?pbs="+e:t+"/player/assetinfo/"+i+".json"}r(),r();var ait=class extends Dc{ma(){return new uit(this.rd.ga)}constructor(t){super("Obi"),this.rd=t}},uit=class extends Jr{constructor(t){super("removeasset"),this.asset=t}};r();var cit=class extends Dc{ma(){return new lit(this.rd.ga)}constructor(t){super("Rbi"),this.rd=t}},lit=class extends Jr{constructor(t){super("addasset"),this.asset=t}},dit=class extends U4{$Ai(t,i){let e,s=0;for(const n of t){e=s+n.duration;for(const t of i)s<=t.lB&&t.lB<e&&(e+=t.ct||0);this.Kz(Ktt._bi(n,s,e)),s=e}}eei(t){this.yo(new cit(t))}oei(t){this.yo(new ait(t))}constructor(){super()}};r(),r();var fit=class extends Dc{ma(){return new git(this.iD)}constructor(t){super("Pbi"),this.iD=t}},git=class extends Jr{constructor(t){super("preplayresponse"),this.response=t}};r();var _it=class extends Dc{ma(){return new vit(this.iD)}constructor(t){super("zbi"),this.iD=t}},vit=class extends Jr{constructor(t){super("assetinforesponse"),this.response=t}},wit=class extends gs{gyi(t){t&&this.yo(new fit(oi(t)))}JAi(t){t.forEach((t=>this.yo(new _it(t))))}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){let t;const i=this,e={get ads(){return i.OAi.ga},get assets(){return i.RAi.ga},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}};return t=new es(i,e),e}constructor(t,i,e){super(),this.OAi=t,this.RAi=i,this.BAi=e,e.yn("wyi",this.Ds),e.yn("myi",this.Ds)}},mit=class{Bbi(t,i){const e=new ttt(t.wE),s=new att(t.wE),n=function(t){if(t.uplynk&&$t(t.uplynk.defaultSkipOffset))return pit(t.uplynk.defaultSkipOffset);if(t.verizonMedia&&$t(t.verizonMedia.defaultSkipOffset))return pit(t.verizonMedia.defaultSkipOffset);return-1}(i),r=function(t){var i,e,s,n;const r=null!=(n=null!=(s=null==(i=t.uplynk)?void 0:i.onSeekOverAd)?s:null==(e=t.verizonMedia)?void 0:e.onSeekOverAd)?n:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(r)}(i),o=new ftt(s,t),h=new gtt(e,i),a=new Htt(t,o,n,r),u=new oit(t.wE),c=new dit,l=new wit(a,c,o);return new F7(t,o,h,a,l,u,c)}};function pit(t){return $a(t)?t:-1}Ha((function(t){return class extends t{zAi(t){super.ka(t)}UAi(t,i){return super.Prt(t,i)}uyi(t){super.CE(t)}PE(){var t;return null!=(t=this.Ubi.lt)?t:super.PE()}BE(){var t;return null!=(t=this.Ubi.zE)?t:super.BE()}CE(t,i){this.Ubi.CE(t)}ka(t){this.Ubi.ka(t)}Prt(t,i){return this.Ubi.Prt(t,i)}ma(){const t=this.Ubi.ga;return fe(super.ma(),{get verizonMedia(){return t},get uplynk(){return t}})}gn(){this.Ubi.gn(),super.gn()}constructor(t,i){super(t,i),this.Ubi=(new mit).Bbi(this,i)}}}),Hn.qnt),r(),r(),r(),Qi(),r();var Sl=function(t){return t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error",t}({});r();var Ait=class extends m2{ma(){return Or(this)}get wJt(){return ah.T0t}get lB(){return this.yB}get mXt(){return this.eqt}constructor(t,i,e,s){super(t,i),this.eqt=s,this.yB=e}};r();var yit=class extends _2{get Azt(){return this.Qbi}get wJt(){return ah.T0t}constructor(t,i,e){if(super(i),this.x4t=t,this.C4t=t,e){const t=new Date(e);If(t)&&(this.Qbi=t)}}},bit=class{DL(){this.ta.yn(E.oP,this.vz),this.ta.yn(Zi.wb,this.fOt),this.ta.yn(Zi.so,this.mZt),this.ta.yn(Zi.Mb,this.We),this.ta.yn(Zi.qy,this.Sh),this.ta.yn(Zi.Eb,this.ld),this.ta.yn(Zi.kb,this.l2t),this.ta.yn(gx.MODE_CHANGE,this.Fbi)}NL(){this.ta.fn(E.oP,this.vz),this.ta.fn(Zi.wb,this.fOt),this.ta.fn(Zi.so,this.mZt),this.ta.fn(Zi.Mb,this.We),this.ta.fn(Zi.qy,this.Sh),this.ta.fn(Zi.Eb,this.ld),this.ta.fn(Zi.kb,this.l2t),this.ta.fn(gx.MODE_CHANGE,this.Fbi)}get Ybi(){return this.Vbi}get crt(){const t=this.Ybi;if(!t)return[];const i=[],e=this.Gbi();for(const s of t.Vc)e>=s.lB&&this.nAi<=s.lB+s.ct&&i.push(s);return i}Gbi(){return this.ta.xE()-this.Wbi}Zbi(){if(this.Hbi)return;if(this.ta._d()!==1/0)return void(0===this.Xbi.length&&(this.Hbi=this.qbi()));const t=()=>{var t;null==(t=this.Kbi)||t.wy(),this.Kbi=void 0,this.Hbi=void 0};this.Kbi=new Wt,this.Hbi=this.Jbi(this.Kbi.ly).catch(this.e8).then(t,t)}async $bi(){const t=x.min(1e3*2**this.tMi,3e4);try{var i;await Dt(t,null==(i=this.Kbi)?void 0:i.ly),this.tMi++}catch(t){if(Tu(t))return void(this.tMi=0)}this.Zbi()}async Jbi(t){for(;yi(t),!this.ta.KE;){const i=Fe.Og()-this.iMi;if(i>1e4)await this.qbi(t),this.iMi=Fe.Og(),this.tMi=0;else{const e=1e4-i;await Dt(e,t)}}}eMi(t){const i=t.Azt;if(i&&this.ta.NE&&0===this.Wbi&&!this.sMi&&0!==x.floor(this.ta.vk().start(0))){const e=(this.ta.NE.getTime()-i.getTime())/1e3,s=this.ta.xE()-t.lzt;this.Wbi=s-e}}async qbi(t){try{const i=await this.ta.wE.hI({zu:this.nMi}),e=await i.BN(t);if(0===e.avails.length)return void(0!==this.Xbi.length&&(this.Xbi=[]));if(e.avails.length===this.Xbi.length&&e.avails[0].startTimeInSeconds===this.Xbi[0].lzt)return void this.eMi(this.Xbi[0]);const s=[];for(const t of e.avails){const i=new yit(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const e of t.ads){const t=new Ait(i,la.YKt,e.startTimeInSeconds,e.trackingEvents);t.V4t(e.adId,e.width,e.height,e.durationInSeconds,[],e.skipoffset),i.P4t(t)}s.push(i),this.eMi(i)}this.Xbi=qs(s,((t,i)=>t.lzt-i.lzt))}catch(t){throw V(t),new b("Failed to poll MediaTailor tracking events")}}rMi(){var t;null==(t=this.Kbi)||t.Ty(),this.Kbi=void 0,this.Hbi=void 0,this.iMi=-1/0}oMi(){if(0===this.Xbi.length)return;const t=this.Xbi[this.Xbi.length-1],i=this.Gbi();if(t.lzt+t.$$t<this.nAi){var e;this.Vbi&&(null==(e=this.ta.Vc)||e.yo(new Zu(this.Vbi)),this.Vbi=void 0)}else{for(const t of this.Xbi){const e=t.lzt;if(!(e+t.$$t<this.nAi)&&(e<=i&&e+t.$$t>this.nAi)){var s;if(this.Ybi===t)return;return this.Vbi=t,void(null==(s=this.ta.Vc)||s.yo(new uB(this.Vbi)))}}var n;if(this.Vbi)null==(n=this.ta.Vc)||n.yo(new Zu(this.Vbi)),this.Vbi=void 0}}hMi(){const t=this.crt;if(0===t.length)return;let i=[];for(const e of t){const t=e.mXt.filter((t=>Qa(this.aMi,t.eventType)));i=i.concat(t)}for(const t of i)this.uMi(t.startTimeInSeconds)&&(t.eventType===Sl.COMPLETE&&this.cMi(Sl.ENGAGED_VIEW),this.lMi(t))}dMi(t,i){return i.mXt.filter((i=>Wn(i.eventType,t)))[0]}cMi(t){const i=this.crt;if(0===i.length)return;const e=this.dMi(t,i[0]);e&&this.lMi(e)}lMi(t){this.qvi(t.eventType);for(const i of t.beaconUrls){const t={xI:Ve.GET,zu:i,GN:"",oI:Ee.CN};0,X(this.fMi(t))}}qvi(t){let i;const e=this.crt;switch(t){case Sl.START:i=new bu(e[e.length-1],this.ta.xE());break;case Sl.COMPLETE:i=new dB(e[0],this.ta.xE());break;case Sl.FIRST_QUARTILE:i=new D2(e[0],this.ta.xE());break;case Sl.MID_POINT:i=new k2(e[0],this.ta.xE());break;case Sl.THIRD_QUARTILE:i=new x2(e[0],this.ta.xE())}var s;void 0!==i&&(null==(s=this.ta.Vc)||s.yo(i))}async fMi(t){const i=await this.ta.wE.hI(t);i.nI}uMi(t){const i=this.Gbi();return t>=this.nAi&&t<i}gn(){this.NL(),this.rMi(),this.nAi=-1}constructor(t,i,e){this.iMi=-1/0,this.Vbi=void 0,this.Wbi=0,this.Xbi=[],this.Ypi=!1,this.Nq=!1,this.nAi=-1,this.Kbi=void 0,this.Hbi=void 0,this.tMi=0,this.vz=()=>{this.Zbi()},this.mZt=()=>{this.cMi(Sl.RESUME)},this.fOt=()=>{this.rMi(),this.cMi(Sl.PAUSE)},this.We=()=>{this.rMi(),this.nAi=-1},this.Sh=()=>{this.rMi()},this.ld=()=>{-1===this.nAi&&(this.nAi=this.Gbi()),this.oMi(),this.hMi(),this.nAi=this.Gbi()},this.l2t=()=>{if(this.Ypi!==this.ta.WE){this.Ypi=this.ta.WE;const t=this.Ypi?Sl.MUTE:Sl.UNMUTE;this.cMi(t)}},this.Fbi=()=>{if(this.Nq!==this.ta.cs()){this.Nq=this.ta.cs();const t=this.Nq?Sl.FULL_SCREEN:Sl.EXIT_FULL_SCREEN;this.cMi(t)}},this.e8=t=>{Tu(t)||(this.cMi(Sl.ERROR),X(this.$bi()))},this.aMi=[Sl.START,Sl.FIRST_QUARTILE,Sl.MID_POINT,Sl.THIRD_QUARTILE,Sl.COMPLETE,Sl.IMPRESSION,Sl.CREATIVE_VIEW],this.ta=t,this.nMi=i,this.sMi=e,this.DL()}};Ha((function(t){return class extends t{ka(t){return this.gMi&&(this.gMi.gn(),this.gMi=void 0,this.nDt()),super.ka(t)}async Prt(t,i){if(!t||!function(t){return t.sources.some((t=>t.integration===zc.MEDIATAILOR))}(t))return super.Prt(t,i);try{const e=await this._Mi(t,i);this.vMi=new O2(this),await super.Prt(e,i)}catch(t){this.eG(new qi(vt.MANIFEST_LOAD_ERROR,t.message,t))}}nk(t){var i;(null==(i=this.vMi)?void 0:i.inAdBreak)||super.nk(t)}CE(t,i){var e;(null==(e=this.gMi)?void 0:e.Ybi)||super.CE(t,i)}PE(){var t;return null!=(t=this.dV)?t:super.PE()}BE(){var t;return null!=(t=this.fV)?t:super.BE()}eG(t){this.dV=Au(t),this.fV=t,this.yo(new cl(t))}nDt(){this.dV=void 0,this.fV=void 0}async _Mi(t,i){let e=[];for(const s of t.sources){if(!rS(s)){e.push(s);continue}const t=s;if(!t.src){e.push(s);continue}const n=await this.wMi(t,i);yi(i);const r=Ei({},t,{integration:void 0,src:n});e.push(r)}const s=oi(t);return s.sources=e,s}async wMi(t,i){const e=t.src||"",s=e.match(/.+?(?=\/v1\/)/);if(!s)throw new b("Could not find MediaTailor session initialization url");const n=s[0],r=_t(e,"?ads."),o=r?{zu:e,oI:Ee.CN}:{zu:e,xI:Ve.POST,GN:JSON.stringify({adParams:t.adParams}),oI:Ee.CN},h=await co((()=>this.mMi(o,i)),i);let a;try{if(a=n+h.manifestUrl,!r){const t=n+h.trackingUrl,i=JT(a);this.gMi=new bit(this,t,i)}}catch(t){throw new b("Something went wrong parsing the MediaTailor session initialization response")}return a}async mMi(t,i){try{const e=await this.wE.hI(t);return await e.BN(i)}catch(t){throw V(t),new b("Failed to initialize MediaTailor session manifest")}}gn(){var t;this.gMi&&(this.gMi.gn(),this.gMi=void 0),this.nDt(),null==(t=this.vMi)||t.destroy(),this.vMi=void 0,super.gn()}constructor(t,i){super(t,i),this.gMi=void 0,this.dV=void 0,this.fV=void 0,this.vMi=void 0}}}),Hn.$nt),r(),r(),r(),r(),Qi(),r();var Ah=function(t){return t[t.pMi=0]="pMi",t[t.oP=1]="oP",t[t.iW=2]="iW",t[t.AMi=3]="AMi",t[t.yMi=4]="yMi",t[t.bMi=5]="bMi",t[t.ua=6]="ua",t}({});r();var Mit=class extends tu{get PL(){}get Rt(){return this.He}set Rt(t){this.nB(t)}get ga(){var t;return null!=(t=this.Za)?t:this.Za=go(this)}get o(){return String(this.ou.componentTag)||"hbbtvaudiotrack"}get Lt(){return this._6}get kh(){return this.eB}get gs(){return""}get UI(){return this.Rt?"enabled":"disabled"}set UI(t){this.nB("enabled"===t)}get UL(){return this.qz}get QL(){}set QL(t){}get zL(){return this.iB}nB(t){this.He=t,t?this.XOt.MMi(this.ou):this.XOt.TMi(this.ou)}constructor(t,i,e,s,n=!1){super(),this.iB=ft(),this.qz=new ki,this.ou=t,this.eB=i,this._6=e,this.He=n,this.XOt=s}};r(),r(),r();var Tit=function(t){return t.zA="urn:dvb:casystemid:19219",t.BA="urn:dvb:casystemid:19156",t}({}),Sit=function(t){return t.zA="application/vnd.ms-playready.initiator+xml",t.BA="application/widevine+xml",t}({});function Nit(t,i,e){switch(t){case"urn:dvb:casystemid:19219":return function(t){return'<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><LicenseServerUriOverride><LA_URL>'+(null!=t?t:"")+"</LA_URL></LicenseServerUriOverride></PlayReadyInitiator>"}(i);case"urn:dvb:casystemid:19156":if(!e)throw new b("Content URL is needed for Widevine license request");return function(t,i){return'<?xml version="1.0" encoding="utf-8"?><WidevineCredentialsInfo xmlns="http://www.smarttv-alliance.org/DRM/widevine/2012/protocols/"><ContentURL>'+a0(null!=i?i:"")+"</ContentURL><DeviceID></DeviceID><StreamID></StreamID><ClientIP></ClientIP><DRMServerURL>"+a0(null!=t?t:"")+"</DRMServerURL><DRMAckServerURL></DRMAckServerURL><DRMHeartBeatURL></DRMHeartBeatURL><DRMHeartBeatPeriod></DRMHeartBeatPeriod><UserData></UserData><Portal></Portal><StoreFront></StoreFront><BandwidthCheckURL></BandwidthCheckURL><BandwidthCheckInterval></BandwidthCheckInterval></WidevineCredentialsInfo>"}(i,e);default:throw new b("DRM key system is not supported")}}var Iit=class extends TR{SMi(t){this.NMi(),this.ku=t}async IMi(t){if(!t.yV.length)return void this.NMi();if(!this.ku)throw new b("The OIPF DRM agent has to be attached to the DOM");let i;this.DMi||(this.DMi=h.createElement("object"),this.DMi.type="application/oipfDrmAgent",this.ku.appendChild(this.DMi),this.DMi.onDRMMessageResult=this.EMi,this.DMi.onDRMRightsError=this.kMi,this.LMi=h.createElement("object"),this.LMi.type="application/oipfCapabilities",this.ku.appendChild(this.LMi));for(const e of t.yV){let s,n,r;if(e.NS===Ga)s=Tit.zA,n=Sit.zA,r=Nit(Tit.zA,e.qY);else{if(e.NS!==Nv)continue;s=Tit.BA,n=Sit.BA,r=Nit(Tit.BA,e.qY,t.WL)}try{return await this.pst(n,r,s),void this.yo(new wR)}catch(t){i=t}}i&&this.yo(new Go(i))}wy(){return this.xMi=void 0,this.ku=void 0,super.wy()}pst(t,i,e){var s,n;return this.xMi=new xh,this.CMi=null==(n=this.DMi)||null==(s=n.sendDRMMessage)?void 0:s.call(n,t,i,e),this.CMi||null==this.xMi.nM||this.xMi.nM.call(this.xMi,new lu(vt.CONTENT_PROTECTION_INTERNAL_ERROR,"No DRM message returned by OIPF DRM agent")),this.xMi.rM}jMi(t){switch(t){case 5:return vt.CONTENT_PROTECTION_NOT_SUPPORTED;case 2:case 1:case 3:case 4:case 6:return vt.CONTENT_PROTECTION_INTERNAL_ERROR;default:return vt.CONTENT_PROTECTION_ERROR}}OMi(t){switch(t){case 2:return"The DRM agent was unable to complete the request";case 3:return"The specified MIME type is unknown for the specified DRM system";case 4:return"User consent is needed for that action";case 5:return"The specified DRM System is unknown";case 6:return"The license message has the wrong format";default:return"Unspecified error occurred"}}RMi(t){return 0===t?vt.CONTENT_PROTECTION_LICENSE_ERROR:1===t?vt.CONTENT_PROTECTION_LICENSE_INVALID:vt.CONTENT_PROTECTION_ERROR}PMi(t){switch(t){case 0:return"No license, consumption of the content is blocked";case 1:return"Invalid license, consumption of the content is blocked";case 2:return"Valid license, consumption of the content is unblocked";default:return"Unknown error occurred"}}NMi(){this.DMi&&(dn(this.DMi),this.DMi=void 0),this.LMi&&(dn(this.LMi),this.LMi=void 0)}async b8(t,i,e){}constructor(...t){super(...t),this.DMi=void 0,this.LMi=void 0,this.ku=void 0,this.CMi=void 0,this.xMi=void 0,this.EMi=(t,i,e)=>{var s,n,r,o;if(0===e)return void(null==(o=this.xMi)||null==(r=o.sM)||r.call(o,t));const h=this.jMi(e),a=this.OMi(e),u=new lu(h,a);null==(n=this.xMi)||null==(s=n.nM)||s.call(n,u)},this.kMi=(t,i,e,s)=>{const n=this.RMi(t),r=this.PMi(t),o=new lu(n,r);this.yo(new Go(o))}}};r();var Dit=class{get _k(){return Mo.RP(0,this.cz.ct)}get ck(){return Dn.pG}set ck(t){}get md(){return this.KS}N$(t){return!1}D$(t){return F5.resolve(void 0)}async IMi(t){await this.E$.IMi(this.KS)}wy(){return F5.resolve(void 0)}constructor(t,i,e){this.KS=t,this.cz=i,this.E$=e}};Qi(),bs();var Eit=class extends tu{get TE(){return Mo.PP()}get NE(){}get wV(){}get Uu(){return this.Xu}get _k(){var t,i;return null!=(i=null==(t=this.vV)?void 0:t._k)?i:Mo.PP()}get wk(){return this.kG}get e6(){return!1}get FE(){return!1}get mz(){return Ei({},gC)}get lt(){return this.dV}get K5(){return!1}get wa(){return this.Zo}get xtt(){return!0}get V5(){return!1}get xk(){return!0}set xk(t){}get Ll(){return this.FG}get nt(){return this.x7}get t7(){return this.IG}get xV(){return this.Qo}Ott(t){this.E$.SMi(t),this.hst.Ott(t)}H$(t){for(const i of t)if(i.YA===uh.QQ)return i}async $n(t){if(this.vV)throw new b("Already loaded a media source");if(t.YA===uh.QQ)return this.vV=new Dit(t,this,this.E$),await this.vV.IMi(t),this.vV;throw new b("Unsupported media source configuration for HbbTV")}async zMi(t){await this.BMi()}async Pk(){await this.BMi()}cV(t){}async tr(){this.vV=void 0,this.UMi=void 0}async wy(){await this.tr(),this.Ul.gn(),this.x7.gn(),this.hst.gn(),this.ast.gn(),this.E$.fn(vR,this.Ds),await this.E$.wy()}ge(){this.IG=!0,this.hst.ge()}be(){this.IG=!1,this.hst.be()}DV(){return!1}kV(t,i,e,s,n){throw new b("Adding native sideloaded text tracks is not supported on HbbTV")}ktt(){}Ltt(){}jtt(){}GE(){return{Bz:0,Uz:0,Qz:0}}Fk(){}CV(t){throw new b("Adding custom text tracks is not supported on HbbTV")}jk(){}Wk(t,i,e,s,n,r,o,h,a){const u=new oO(t,i,e,s,n,r,o,a,h);return this.Ul.tt(u),this.C7.tt(u),u}jV(){for(const t of this.Ul.AL.slice())t.gn();this.Ul.tr()}BQ(t){this.Ul.it(t),this.C7.it(t)}QMi(){const t=h.getElementsByTagName("object");for(let i=0;i<t.length;i++){const e=t.item(i);if("video/broadcast"===e.type){const t=e;return t.onPlayStateChange=this.FMi,0===t.playState&&(null==t.bindToCurrentChannel||t.bindToCurrentChannel.call(t)),t}}}BMi(){var t,i;if(!this.YMi||3===this.YMi.playState||0===this.YMi.playState)return Promise.resolve("");if(null==(t=this.UMi)?void 0:t.rM)return null==(i=this.UMi)?void 0:i.rM;this.UMi=new xh;try{null==this.YMi.stop||this.YMi.stop.call(this.YMi)}catch(t){Fe.cA("Unable to stop broadcast for HbbTV",t),this.UMi.nM(new b("Unable to stop broadcast for HbbTV"))}return this.UMi.rM}constructor(t,i){super(),this.Xu=t,this.FG=i,this.Zo=new ut,this.Qo=new tk,this.Ul=new Uu,this.vV=void 0,this.kG=!1,this.dV=void 0,this.qQ=Fn.Nz,this.IG=!0,this.UMi=void 0,this.FMi=()=>{var t,i,e,s;(null==(t=this.YMi)?void 0:t.playState)&&((null==(i=this.UMi)?void 0:i.rM)||2!==this.YMi.playState||this.BMi().catch(Bn),3===this.YMi.playState&&(null==(s=this.UMi)||null==(e=s.sM)||e.call(s,String(this.YMi.playState)),this.UMi=void 0))},this.E$=new Iit(this),this.E$.yn(vR,this.Ds),this.x7=new BE([this.Ul]),this.C7=new oR(this),this.hst=new Xn,this.ast=new Qn(this.hst.we,this.Uu,this.nt,this.Ll,this.wa,this.xV),this.YMi=this.QMi(),this.BMi().catch(Bn)}},kit=class extends Eit{get gV(){}get ht(){return this.Oz}get rt(){return this.Pz}get $E(){return this.jG}set $E(t){this.jG=t,this.KE||this.VMi.play(t)}get WE(){return this.VMi.muted}set WE(t){this.VMi.muted=t}get Nk(){var t,i;return(null!=(i=null!=(t=this.VMi.volume)?t:null==this.VMi.getVolume?void 0:this.VMi.getVolume.call(this.VMi))?i:100)/100}set Nk(t){null==this.VMi.setVolume||this.VMi.setVolume.call(this.VMi,100*t)}get LE(){return this.VMi.playPosition?this.VMi.playPosition/1e3:0}get ct(){return!this.VMi.playTime||this.VMi.playTime<0?1/0:this.VMi.playTime/1e3}get OE(){return this.VMi.playState===Ah.bMi}get Ti(){return this.VMi.offsetHeight*Fe.Ys.bp}get ji(){return this.VMi.offsetWidth*Fe.Ys.bp}get KE(){return this.VMi.playState===Ah.iW}get rk(){return Mo.PP()}get fk(){return this.Z5}get yk(){return 0}get Tk(){return 0}Ott(t){super.Ott(t),t.appendChild(this.VMi)}async $n(t){if(t.YA===uh.QQ){const i=await super.$n(t);return await this.zMi(t),this.VMi.onPlayStateChange=this.GMi,i}throw new b("Unsupported media source configuration for HbbTV")}async zMi(t){this.VMi.type=wa(t.WL),this.VMi.data=t.WL,await super.zMi(t)}async Pk(){await super.Pk(),this.VMi.play(this.jG),this.yo(new fi(this.LE))}Rk(){this.VMi.play(0),this.yo(new Se(this.LE))}Wb(t,i,e){this.VMi.seek(1e3*t),this.kG=!0,this.yo(new Yr(this.LE))}async tr(){void 0!==this.vV&&this.VMi.stop(),this.WMi&&(Fe.fA(this.WMi),this.WMi=void 0),await super.tr(),zd(this.VMi),this.VMi.data&&this.VMi.removeAttribute("data"),this.Oz.tr(),this.Pz.tr()}async wy(){await super.wy(),dn(this.VMi)}ge(){super.ge(),this.VMi.style.display="block"}be(){super.be(),this.VMi.style.display="none"}MMi(t){const i=this.ZMi(t);if(!i)throw new b("Selected track does not exist on HbbTV");null==this.VMi.selectComponent||this.VMi.selectComponent.call(this.VMi,i)}TMi(t){const i=this.ZMi(t);if(!i)throw new b("Selected track does not exist on HbbTV");null==this.VMi.unselectComponent||this.VMi.unselectComponent.call(this.VMi,i)}ZMi(t){var i;const e=null!=(i=null==this.VMi.getComponents?void 0:this.VMi.getComponents.call(this.VMi,t.type))?i:this.HMi();return this.XMi(e,t)}qMi(t){var i;const e=null!=(i=null==this.VMi.getCurrentActiveComponents?void 0:this.VMi.getCurrentActiveComponents.call(this.VMi,1))?i:this.HMi();this.Oz.tr();for(let i=0;i<t.length;i++){const s=t.item(i);this.Oz.tt(new Mit(s,s.language,this.Oz.V?oH.Yxt:oH.Vxt,this,this.KMi(e,s)))}}JMi(t){var i;const e=null!=(i=null==this.VMi.getCurrentActiveComponents?void 0:this.VMi.getCurrentActiveComponents.call(this.VMi,0))?i:this.HMi();this.Pz.tr();for(let i=0;i<t.length;i++){const s=t.item(i);this.Pz.tt(new Mit(s,String(s.aspectRatio),this.Pz.V?Dr.Yxt:Dr.Vxt,this,this.KMi(e,s)))}}HMi(){return{length:0,item:t=>{}}}KMi(t,i){return void 0!==this.XMi(t,i)}XMi(t,i){for(let e=0;e<t.length;e++){const s=t.item(e);if(this.$Mi(s,i))return s}}$Mi(t,i){return t.pid===i.pid&&t.componentTag===i.componentTag&&t.type===i.type&&t.encoding===i.encoding&&t.encrypted===i.encrypted}tTi(t){switch(t){case 0:return lt.SRC_NOT_SUPPORTED;case 1:case 5:case 6:return lt.NETWORK;default:return lt.DECODE}}constructor(t,i,e){super(i,e),this.VMi=t,this.jG=1,this.Oz=new kt,this.Pz=new kt,this.Z5=Fn.Nz,this.iTi=void 0,this.WMi=void 0,this.GMi=()=>{if(!this.VMi.playState)return;this.qQ=this.Z5,this.eTi=this.sTi,this.sTi=this.VMi.playState;const t=this.ct;switch(t!==this.iTi&&(this.yo(new yt(t)),this.iTi=t),this.WMi&&this.sTi!==Ah.oP&&(Fe.fA(this.WMi),this.WMi=void 0),this.sTi){case Ah.AMi:this.Z5=Fn.Nz;break;case Ah.yMi:if(this.eTi===Ah.AMi){var i;const t=null!=(i=null==this.VMi.getComponents?void 0:this.VMi.getComponents.call(this.VMi,1))?i:this.HMi();var e;const s=null!=(e=null==this.VMi.getComponents?void 0:this.VMi.getComponents.call(this.VMi,0))?e:this.HMi();if(0===t.length&&0===s.length)break;this.qMi(t),this.JMi(s)}this.Z5=Fn.Xn;break;case Ah.oP:this.kG&&(this.kG=!1,this.yo(new aa(this.LE))),this.yo(new te(this.LE)),this.Z5=Fn.Dz,this.WMi=Fe.dA(this.nTi,250);break;case Ah.ua:this.Z5=Fn.Nz,this.yo(new _r(new P(this.tTi(this.VMi.error))));break;case Ah.bMi:this.yo(new fa(this.LE));case Ah.iW:case Ah.pMi:}this.Z5!==this.qQ&&this.yo(new cu(this.LE,this.Z5))},this.nTi=()=>{this.yo(new A(this.LE,void 0))}}};r(),Qi();var Lit=class extends Eit{get gV(){return this.vN}get ht(){return this.Oz}get rt(){return this.Pz}get $E(){return this.vN.playbackRate}set $E(t){this.vN.playbackRate=t}get WE(){return this.vN.muted}set WE(t){this.vN.muted=t}get Nk(){return this.vN.volume}set Nk(t){this.vN.volume=t}get LE(){return this.vN.currentTime}get ct(){return this.vN.duration}get OE(){return this.vN.ended}get Ti(){return this.vN.offsetHeight*Fe.Ys.bp}get ji(){return this.vN.offsetWidth*Fe.Ys.bp}get KE(){return this.vN.paused}get rk(){return Mo.xn(this.vN.played)}get fk(){return this.Z8.fk}get yk(){return this.vN.videoHeight}get Tk(){return this.vN.videoWidth}Ott(t){super.Ott(t),t.appendChild(this.vN)}async $n(t){if(t.YA===uh.QQ){const i=await super.$n(t);return await this.zMi(t),i}throw new b("Unsupported media source configuration for HbbTV")}async zMi(t){switch(t.MV){case pu.KL:case pu.JL:this.vN.setAttribute("crossorigin",t.MV);break;case pu.EI:default:this.vN.removeAttribute("crossorigin")}void 0!==t.ck?this.vN.preload=t.ck:this.vN.preload=Dn.QY,void 0!==t.TV?this.vN.title=t.TV:Xd(this.vN);const i=this.$E;this.vN.src=t.WL,this.$E=i,await super.zMi(t)}async Pk(){await super.Pk(),await this.vN.play()}Rk(){this.vN.pause()}Wb(t,i,e){i&&this.vN.fastSeek?this.vN.fastSeek(t):this.vN.currentTime=t,this.kG=!0,this.yo(new Yr(this.LE))}async tr(){await super.tr(),zd(this.vN),this.vN.src&&this.vN.removeAttribute("src"),this.Oz.tr(),this.Pz.tr()}async wy(){await super.wy(),this.u7.wy(),this.Z8.wy(),this.ott(),this.PV(),dn(this.vN)}ge(){super.ge(),this.vN.style.display="block",this.vN.style.height="100%",this.vN.style.width="100%"}be(){super.be(),this.vN.style.display="none"}ett(){this.gV.addEventListener("play",this.sF),this.gV.addEventListener("pause",this.nF),this.gV.addEventListener("timeupdate",this.xc),this.gV.addEventListener("progress",this.rTi),this.gV.addEventListener("loadstart",this.Ts),this.gV.addEventListener("ended",this.Cc),this.gV.addEventListener("ratechange",this.oTi),this.gV.addEventListener("volumechange",this.yZt),this.gV.addEventListener("durationchange",this.wZt),this.gV.addEventListener("loadedmetadata",this.hTi),this.gV.addEventListener("emptied",this.aTi),this.gV.addEventListener("seeked",this.uTi),this.gV.addEventListener("seeking",this.cTi),this.gV.addEventListener("error",this.lTi),kl()&&this.gV.addEventListener("encrypted",this.k8)}ott(){this.gV.removeEventListener("play",this.sF),this.gV.removeEventListener("pause",this.nF),this.gV.removeEventListener("timeupdate",this.xc),this.gV.removeEventListener("progress",this.rTi),this.gV.removeEventListener("loadstart",this.Ts),this.gV.removeEventListener("ended",this.Cc),this.gV.removeEventListener("ratechange",this.oTi),this.gV.removeEventListener("volumechange",this.yZt),this.gV.removeEventListener("durationchange",this.wZt),this.gV.removeEventListener("loadedmetadata",this.hTi),this.gV.removeEventListener("emptied",this.aTi),this.gV.removeEventListener("seeked",this.uTi),this.gV.removeEventListener("seeking",this.cTi),this.gV.removeEventListener("error",this.lTi),this.gV.removeEventListener("encrypted",this.k8)}eG(t){this.dV=t,this.yo(new _r(this.dV))}XV(){const t=this.vN.audioTracks,i=this.vN.videoTracks;t&&(t.addEventListener("addtrack",this.dTi),t.addEventListener("removetrack",this.fTi),t.addEventListener("change",this.gTi)),i&&(i.addEventListener("addtrack",this._Ti),i.addEventListener("removetrack",this.vTi),i.addEventListener("change",this.wTi))}PV(){const t=this.vN.audioTracks,i=this.vN.videoTracks;t&&(t.removeEventListener("addtrack",this.dTi),t.removeEventListener("removetrack",this.fTi),t.removeEventListener("change",this.gTi)),i&&(i.removeEventListener("addtrack",this._Ti),i.removeEventListener("removetrack",this.vTi),i.removeEventListener("change",this.wTi))}nh(t){for(let i=0;i<t.V;i++){t.bL(i).rB()}}constructor(t,i,e){super(i,e),this.vN=t,this.Oz=new kt,this.Pz=new kt,this.mTi=void 0,this.sF=()=>{this.yo(new fi(this.LE))},this.nF=()=>{this.yo(new Se(this.LE))},this.xc=()=>{const t=this.LE,i=this.wk,e=void 0!==this.mTi,s=e&&this.mTi!==t;(i||!e||s)&&(this.yo(new A(t,void 0)),this.mTi=t)},this.rTi=()=>{this.yo(new ii(this.LE))},this.Ts=()=>{this.yo(new ms)},this.Cc=()=>{this.yo(new fa(this.LE))},this.oTi=()=>{this.yo(new Pu(this.LE,this.$E))},this.yZt=()=>{this.yo(new $e(this.LE,this.Nk))},this.wZt=()=>{this.yo(new yt(this.ct))},this.hTi=()=>{},this.aTi=()=>{},this.uTi=()=>{this.kG&&(this.kG=!1),this.yo(new aa(this.LE))},this.cTi=()=>{this.yo(new Yr(this.LE))},this.rF=t=>{this.qQ!==t.readyState&&(this.qQ=t.readyState,this.yo(t))},this.eF=()=>{this.yo(new te(this.LE))},this.lTi=()=>{if(null!==this.vN.error){const i=this.vN.error;var t;this.eG(new P(null!=(t=i.code)?t:lt.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.k8=t=>{this.yo(new yw(t.initDataType,t.initData||new ArrayBuffer(0)))},this._Ti=t=>{const i=this.vN.videoTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];WE(this.Pz,e)||this.Pz.tt(new VS(e))}},this.vTi=t=>{const i=[],e=this.vN.videoTracks;if(e){for(const t of this.Pz.AL)ZE(e,t.sB)||i.push(t);for(const t of i)this.Pz.it(t)}},this.wTi=t=>{this.nh(this.Pz)},this.dTi=t=>{const i=this.vN.audioTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];WE(this.Oz,e)||this.Oz.tt(new FS(e))}},this.fTi=t=>{const i=[],e=this.vN.audioTracks;if(e){for(const t of this.Oz.AL)ZE(e,t.sB)||i.push(t);for(const t of i)this.Oz.it(t)}},this.gTi=t=>{this.nh(this.Oz)},this.Z8=new NR(this),this.Z8.yn(E.lL,this.rF),this.Z8.x8(new Uj(this)),this.u7=new Vj(this),this.u7.yn(E.oP,this.eF),this.ett(),this.XV()}},xit=[Zi.so,Zi.wb,E.oP,Zi.Mb,Zi.bb,Zi.qy,Zi.Zy,Zi.Vy,Zi.Yy,Zi.Eb,Zi.mb,Zi.ub,Zi.pb,Zi.kb,Zi.yb,Zi.$y,Zi.Ky],Cit=class extends tu{get ht(){return this.cz.ht}get TE(){return this.cz.TE.ks()}get Az(){}get NE(){return this.cz.NE}set NE(t){t&&this.cz.cV(t)}get bt(){return this.wc}get LE(){return this.cz.LE}set LE(t){this.cz.Wb(t)}get pV(){return this.AV}get ct(){return this.cz.ct}get OE(){return this.cz.OE}get zE(){return this.fV}get lt(){return this.dV}get UE(){}get FE(){return!1}get xk(){return this.cz.xk}set xk(t){this.cz.xk=t}get Ek(){return this.QG}get VE(){return Ei({},{Bz:0,Uz:0,Qz:0,Fz:0,Yz:0,Vz:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.cz.GE())}get WE(){return this.cz.WE}set WE(t){this.cz.WE=t}get XE(){return!0}get KE(){return this.cz.KE}get $E(){return this.cz.$E}set $E(t){this.cz.$E=t}get rk(){return this.cz.rk.ks()}get ck(){return this._V}set ck(t){this._V=t,this.vV&&(this.vV.ck=t)}get fk(){return this.cz.fk}get _k(){return this.cz._k.ks()}get wk(){return this.cz.wk}get wV(){return this.cz.wV}get nt(){return this.Ul}get yk(){return this.cz.yk}get rt(){return this.cz.rt}get Tk(){return this.cz.Tk}get Nk(){return this.cz.Nk}set Nk(t){this.cz.Nk=t}Wk(t){return this.cz.CV(t)}Bk(){return!1}Ck(){return this.cz.wa}jk(){}be(){this.cz.be()}Fk(){this.cz.Fk()}Rk(){this.cz.Rk()}async Pk(){await this.cz.Pk()}Yk(){throw new b("Recreate media source is not supported on HbbTV")}CE(t,i){this.cz.Wb(t)}async ka(t,i,e){var s;yi(e),this.wc=t;const n={YA:uh.QQ,WL:t.src,VN:t.type,yV:this.bV(t),ck:this._V,MV:t.crossOrigin,TV:null==(s=i.metadata)?void 0:s.title};this.vV=await this.cz.$n(n),i.textTracks&&this.NV(i.textTracks),eD(this.nt)}ge(){this.cz.ge()}Uk(){}Qk(){}_a(){return this.cz.xV}async tr(){this.wc=void 0,this.dV=void 0,this.fV=void 0,this.vV=void 0,await this.LV.tr(),this.cz.jV(),await this.cz.tr()}async gn(){await this.tr(),this.OV.gn(),this.cz.fn(xit,this.Ds),this.cz.fn(Xi.ua,this.GV),await this.cz.wy(),this.vn.gn(),this.Ul.gn(),await this.LV.gn()}eG(t,i){this.dV||(this.dV=i,this.fV=t,this.yo(new cl(t)))}NV(t){for(const i of t)void 0!==i.src&&this.LV.xQ(i)}bV(t){if(!t.contentProtection)return[];const i=[];return t.contentProtection.widevine&&i.push({NS:Nv,qY:t.contentProtection.widevine.licenseAcquisitionURL,HV:[]}),t.contentProtection.playready&&i.push({NS:Ga,qY:t.contentProtection.playready.licenseAcquisitionURL,HV:[]}),this.pTi(i,t.contentProtection.preferredKeySystems)}pTi(t,i){if(void 0===i||0===i.length)return t;const e=t=>{const e=i.indexOf(t.NS.ZA);return e>=0?e:i.length};return qs(t,((t,i)=>e(t)-e(i)))}constructor(t,i,e,s){super(),this.vV=void 0,this.AV=new dr,this.wc=void 0,this.dV=void 0,this.fV=void 0,this._V=Dn.pG,this.GV=t=>{const i=t.lt,e=i.code,s=new qi(CS(e),"Something went wrong during HbbTV playback.",i),n=Au(s);this.eG(s,n)},this.vn=new ox(t),this.vn.bn(),this.cz=ef()?new Lit(h.createElement(Ri.NI),this.vn,s):new kit(h.createElement("object"),this.vn,s),this.cz.Ott(t),this.cz.yn(xit,this.Ds),this.cz.yn(Xi.ua,this.GV),this.OV=new ko(this.cz,!0),this.OV.yn(zT,this.Ds),this.LV=new or(this.cz,i),this.Ul=new BE([this.cz.nt,this.LV.Z]),this.QG=e}};Uc();Gi(new class{bx(t,i,e,s,n,r,o,h){return new Cit(t,e,r,o)}nG(t,i){var e;return!(!Ro.xf||t.type!==$n.sx&&!tS(t.type)&&!iS(t.type))&&!(ef()&&!(null==(e=t.contentProtection)?void 0:e.useOipfDrmAgent)&&(!t.contentProtection||kl()))}async rG(t){return!!await mu(t,!0)}oG(){return!1}constructor(){this.hG=pt.xY}});export{Bo as a,f as b,r as c,Ro as d,Uc as e,$t as f,Zr as g,Z as h,Ic as i,dn as j,Bd as k,Fd as l,Ea as m,Yd as n,Vd as o,pc as p,Xd as q,qd as r,Fe as s,Qi as t,Bn as u,no as v,bs as w,ur as x,Bf as y,Uf as z,$_ as A,Ei as B,_t as C,Bv as D,qs as E,nn as F,eo as G,dl as H,ra as I,Qa as J,nt as K,yi as L,X as M,tu as N,Jr as O,Zi as P,vt as Q,xd as R,wM as S,fe as T,ns as U,mM as V,Fu as W,bM as X,xS as Y,Ma as Z,Io as _,ua as $,z as aa,RI as ba,zI as ca,Fn as da,sD as ea,Hn as fa,Ha as ga,Qz as ha,Mo as ia,oS as ja,Xe as ka,yt as la,Ba as ma,AS as na,MS as oa,$s as pa,an as qa,Fk as ra,oc as sa,ZL as ta,XL as ua,ex as va,ox as wa,hx as xa,ax as ya,cx as za,gx as Aa,_x as Ba,vx as Ca,px as Da,ms as Ea,KR as Fa,JR as Ga,$R as Ha,iP as Ia,eP as Ja,sP as Ka,kP as La,LP as Ma,xP as Na,CP as Oa,Ou as Pa,Cz as Qa,jz as Ra,Vz as Sa,yB as Ta,bB as Ua,MB as Va,TB as Wa,DB as Xa,EB as Ya,kB as Za,LB as _a,GQ as $a,WQ as ab,ah as bb,U1 as cb,q1 as db,l2 as eb,V6 as fb,p9 as gb,c8 as hb,_8 as ib,vtt as jb};