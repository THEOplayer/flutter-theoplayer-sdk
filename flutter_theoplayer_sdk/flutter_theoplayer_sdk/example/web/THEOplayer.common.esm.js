/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 10.0.0
 Created: 2025-09-12T12:50:32.290Z
 */
var Io,td,f,Nt,id,ed,sd,nd,y,rd,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,hd=a.location,od=a.navigator,u=a.setTimeout,c=a.clearTimeout,v=a.setInterval,p=a.clearInterval,m=a.Error,g=a.TypeError,w=(a.SyntaxError,a.Object),_=a.Math,x=a.parseInt,C=a.parseFloat,S=a.isNaN,j=a.Uint8Array,ad=a.Worker,ud=(a.WorkerGlobalScope,a.XMLHttpRequest),cd=w.create,dd=w.defineProperty,ld=w.getOwnPropertyDescriptor,fd=w.getOwnPropertyNames,vd=w.getPrototypeOf,_d=w.prototype.hasOwnProperty,Qn=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),sn=(t,i,e)=>(e=null!=t?cd(vd(t)):{},((t,i,e,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let n of fd(i))_d.call(t,n)||n===e||dd(t,n,{get:()=>i[n],enumerable:!(s=ld(i,n))||s.enumerable});return t})(!i&&t&&t.__esModule?e:dd(e,"default",{value:t,enumerable:!0}),t)),r=(y=()=>{"use strict";if("function"==typeof Symbol&&Symbol.iterator)Io=Symbol,td=null!=(ed=Symbol.for)?ed:Symbol,f=Symbol.iterator,Nt=null!=(sd=Symbol.dispose)?sd:td("Symbol.dispose"),id=null!=(nd=Symbol.asyncDispose)?nd:td("Symbol.asyncDispose");else{let t=0;Io=function(i){return"hd"+i+"_"+ ++t},f=(td=function(t){return"hd"+t})("Symbol.iterator"),Nt=td("Symbol.dispose"),id=td("Symbol.asyncDispose"),Io.for=td,Io.iterator=f,Io.dispose=Nt,Io.asyncDispose=id}},()=>(y&&(rd=y(y=0)),rd)),gd=Qn((t,i)=>{r(),function(e,s){"object"==typeof t&&void 0!==i?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((e=e||self).WebStreamsPolyfill={})}(t,function(t){"use strict";var i="function"==typeof Io&&"symbol"==typeof f?Io:function(t){return"Symbol("+t+")"};function e(){}var s=Number.isNaN||function(t){return t!=t},n=e;function r(t){return"object"==typeof t&&null!==t||"function"==typeof t}function h(t){return t.slice()}function o(t,i,e,s,n){new j(t).set(new j(e,s,n),i)}function a(t){return!1!==function(t){if("number"!=typeof t)return!1;if(s(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function u(t,i,e){if("function"!=typeof t)throw new g("Argument is not a function");return Function.prototype.apply.call(t,i,e)}function c(t,i,e,s){var n=t[i];if(void 0!==n){if("function"!=typeof n)throw new g(n+" is not a method");switch(e){case 0:return function(){return l(n,t,s)};case 1:return function(i){var e=[i].concat(s);return l(n,t,e)}}}return function(){return k(void 0)}}function d(t,i,e){var s=t[i];if(void 0!==s)return u(s,t,e)}function l(t,i,e){try{return k(u(t,i,e))}catch(t){return E(t)}}function v(t){if(t=Number(t),s(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function p(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new g("size property of a queuing strategy must be a function");return function(i){return t(i)}}var y=Promise,A=Promise.prototype.then,b=Promise.resolve.bind(y),S=Promise.reject.bind(y);function T(t){return new y(t)}function k(t){return b(t)}function E(t){return S(t)}function P(t,i,e){return A.call(t,i,e)}function x(t,i,e){P(P(t,i,e),void 0,n)}function I(t,i){x(t,i)}function R(t,i){x(t,void 0,i)}function C(t,i,e){return P(t,i,e)}function D(t){P(t,void 0,n)}var B=function(){function t(){this.Rd=0,this.Dd=0,this.Ld={Od:[],Fd:void 0},this.Ud=this.Ld,this.Rd=0,this.Dd=0}return w.defineProperty(t.prototype,"length",{get:function(){return this.Dd},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var i=this.Ud,e=i;16383===i.Od.length&&(e={Od:[],Fd:void 0}),i.Od.push(t),e!==i&&(this.Ud=e,i.Fd=e),++this.Dd},t.prototype.shift=function(){var t=this.Ld,i=t,e=this.Rd,s=e+1,n=t.Od,r=n[e];return 16384===s&&(i=t.Fd,s=0),--this.Dd,this.Rd=s,t!==i&&(this.Ld=i),n[e]=void 0,r},t.prototype.forEach=function(t){for(var i=this.Rd,e=this.Ld,s=e.Od;!(i===s.length&&void 0===e.Fd||i===s.length&&(i=0,0===(s=(e=e.Fd).Od).length));)t(s[i]),++i},t.prototype.peek=function(){var t=this.Ld,i=this.Rd;return t.Od[i]},t}();function N(t,i,e){var s=null;!0===e&&(s=w.prototype);var n=w.create(s);return n.value=t,n.done=i,n}function M(t,i){t.Vd=!0,t.Hd=i,i.Wd=t,"readable"===i.Ra?U(t):"closed"===i.Ra?function(t){U(t),W(t)}(t):V(t,i.qd)}function L(t,i){return ji(t.Hd,i)}function O(t){"readable"===t.Hd.Ra?H(t,new g("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,i){V(t,i)}(t,new g("Reader was released and can no longer be used to monitor the stream's closedness")),t.Hd.Wd=void 0,t.Hd=void 0}function F(t){return new g("Cannot "+t+" a stream using a released reader")}function U(t){t.zd=T(function(i,e){t.Gd=i,t.Xd=e})}function V(t,i){U(t),H(t,i)}function H(t,i){D(t.zd),t.Xd(i),t.Gd=void 0,t.Xd=void 0}function W(t){t.Gd(void 0),t.Gd=void 0,t.Xd=void 0}var q=i("[[CancelSteps]]"),z=i("[[PullSteps]]");function G(t,i){void 0===i&&(i=!1);var e=new $(t);return e.Vd=i,e}function X(t){return T(function(i,e){var s={Qd:i,Kd:e};t.Wd.Yd.push(s)})}function Q(t,i,e){var s=t.Wd;s.Yd.shift().Qd(N(i,e,s.Vd))}function K(t){return t.Wd.Yd.length}function Y(t){var i=t.Wd;return void 0!==i&&!!tt(i)}var J,Z,$=function(){function t(t){if(!1===Gi(t))throw new g("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===Xi(t))throw new g("This stream has already been locked for exclusive reading by another reader");M(this,t),this.Yd=new B}return w.defineProperty(t.prototype,"closed",{get:function(){return tt(this)?this.zd:E(et("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return tt(this)?void 0===this.Hd?E(F("cancel")):L(this,t):E(et("cancel"))},t.prototype.read=function(){return tt(this)?void 0===this.Hd?E(F("read from")):it(this):E(et("read"))},t.prototype.releaseLock=function(){if(!tt(this))throw et("releaseLock");if(void 0!==this.Hd){if(this.Yd.length>0)throw new g("Tried to release a reader lock when that reader has pending read() calls un-settled");O(this)}},t}();function tt(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Yd")}function it(t){var i=t.Hd;return i.Jd=!0,"closed"===i.Ra?k(N(void 0,!0,t.Vd)):"errored"===i.Ra?E(i.qd):i.Zd[z]()}function et(t){return new g("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof i.asyncIterator&&((J={})[i.asyncIterator]=function(){return this},Z=J,w.defineProperty(Z,i.asyncIterator,{enumerable:!1}));var st={next:function(){if(!1===nt(this))return E(rt("next"));var t=this.$d;return void 0===t.Hd?E(F("iterate")):C(it(t),function(i){var e=i.done;return e&&O(t),N(i.value,e,!0)})},return:function(t){if(!1===nt(this))return E(rt("next"));var i=this.$d;if(void 0===i.Hd)return E(F("finish iterating"));if(i.Yd.length>0)return E(new g("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.ul){var e=L(i,t);return O(i),C(e,function(){return N(t,!0,!0)})}return O(i),k(N(t,!0,!0))}};function nt(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"$d")}function rt(t){return new g("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function ht(t){var i=t.tf.shift();return t.if-=i.size,t.if<0&&(t.if=0),i.value}function ot(t,i,e){if(!a(e=Number(e)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.tf.push({value:i,size:e}),t.if+=e}function at(t){t.tf=new B,t.if=0}void 0!==Z&&w.setPrototypeOf(st,Z),w.defineProperty(st,"next",{enumerable:!1}),w.defineProperty(st,"return",{enumerable:!1});var ut=i("[[AbortSteps]]"),ct=i("[[ErrorSteps]]"),dt=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),ft(this);var e=i.size,s=i.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=p(e);void 0===s&&(s=1),function(t,i,e,s){var n=w.create(Ct.prototype);function r(){return d(i,"start",[n])}var h=c(i,"write",1,[n]),o=c(i,"close",0,[]),a=c(i,"abort",1,[]);Dt(t,n,r,h,o,a,e,s)}(this,t,s=v(s),n)}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===vt(this))throw Ut("locked");return _t(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===vt(this)?E(Ut("abort")):!0===_t(this)?E(new g("Cannot abort a stream that already has a writer")):gt(this,t)},t.prototype.close=function(){return!1===vt(this)?E(Ut("close")):!0===_t(this)?E(new g("Cannot close a stream that already has a writer")):!0===At(this)?E(new g("Cannot close an already-closing stream")):pt(this)},t.prototype.getWriter=function(){if(!1===vt(this))throw Ut("getWriter");return lt(this)},t}();function lt(t){return new Tt(t)}function ft(t){t.Ra="writable",t.qd=void 0,t.ef=void 0,t.nf=void 0,t.rf=new B,t.hf=void 0,t.uf=void 0,t.cf=void 0,t.df=void 0,t.lf=!1}function vt(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"nf")}function _t(t){return void 0!==t.ef}function gt(t,i){var e=t.Ra;if("closed"===e||"errored"===e)return k(void 0);if(void 0!==t.df)return t.df.vf;var s=!1;"erroring"===e&&(s=!0,i=void 0);var n=T(function(e,n){t.df={vf:void 0,Qd:e,Kd:n,_f:i,gf:s}});return t.df.vf=n,!1===s&&wt(t,i),n}function pt(t){var i=t.Ra;if("closed"===i||"errored"===i)return E(new g("The stream (in "+i+" state) is not in the writable state and cannot be closed"));var e=T(function(i,e){var s={Qd:i,Kd:e};t.uf=s}),s=t.ef;return void 0!==s&&!0===t.lf&&"writable"===i&&Yt(s),function(t){ot(t,"close",0),Mt(t)}(t.nf),e}function mt(t,i){"writable"!==t.Ra?yt(t):wt(t,i)}function wt(t,i){var e=t.nf;t.Ra="erroring",t.qd=i;var s=t.ef;void 0!==s&&xt(s,i),!1===function(t){if(void 0===t.hf&&void 0===t.cf)return!1;return!0}(t)&&!0===e.pf&&yt(t)}function yt(t){t.Ra="errored",t.nf[ct]();var i=t.qd;if(t.rf.forEach(function(t){t.Kd(i)}),t.rf=new B,void 0!==t.df){var e=t.df;if(t.df=void 0,!0===e.gf)return e.Kd(i),void bt(t);x(t.nf[ut](e._f),function(){e.Qd(),bt(t)},function(i){e.Kd(i),bt(t)})}else bt(t)}function At(t){return void 0!==t.uf||void 0!==t.cf}function bt(t){void 0!==t.uf&&(t.uf.Kd(t.qd),t.uf=void 0);var i=t.ef;void 0!==i&&zt(i,t.qd)}function St(t,i){var e=t.ef;void 0!==e&&i!==t.lf&&(!0===i?function(t){Xt(t)}(e):Yt(e)),t.lf=i}var Tt=function(){function t(t){if(!1===vt(t))throw new g("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===_t(t))throw new g("This stream has already been locked for exclusive writing by another writer");this.mf=t,t.ef=this;var i=t.Ra;if("writable"===i)!1===At(t)&&!0===t.lf?Xt(this):Qt(this),Wt(this);else if("erroring"===i)jt(this,t.qd),Wt(this);else if("closed"===i)Qt(this),function(t){Wt(t),Gt(t)}(this);else{var e=t.qd;jt(this,e),qt(this,e)}}return w.defineProperty(t.prototype,"closed",{get:function(){return!1===kt(this)?E(Vt("closed")):this.zd},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===kt(this))throw Vt("desiredSize");if(void 0===this.mf)throw Ht("desiredSize");return function(t){var i=t.mf,e=i.Ra;if("errored"===e||"erroring"===e)return null;if("closed"===e)return 0;return Nt(i.nf)}(this)},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"ready",{get:function(){return!1===kt(this)?E(Vt("ready")):this.wf},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===kt(this)?E(Vt("abort")):void 0===this.mf?E(Ht("abort")):function(t,i){var e=t.mf;return gt(e,i)}(this,t)},t.prototype.close=function(){if(!1===kt(this))return E(Vt("close"));var t=this.mf;return void 0===t?E(Ht("close")):!0===At(t)?E(new g("Cannot close an already-closing stream")):Et(this)},t.prototype.releaseLock=function(){if(!1===kt(this))throw Vt("releaseLock");void 0!==this.mf&&It(this)},t.prototype.write=function(t){return!1===kt(this)?E(Vt("write")):void 0===this.mf?E(Ht("write to")):Rt(this,t)},t}();function kt(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"mf")}function Et(t){return pt(t.mf)}function Pt(t,i){"pending"===t.yf?zt(t,i):function(t,i){qt(t,i)}(t,i)}function xt(t,i){"pending"===t.Af?Kt(t,i):function(t,i){jt(t,i)}(t,i)}function It(t){var i=t.mf,e=new g("Writer was released and can no longer be used to monitor the stream's closedness");xt(t,e),Pt(t,e),i.ef=void 0,t.mf=void 0}function Rt(t,i){var e=t.mf,s=e.nf,n=function(t,i){try{return t.bf(i)}catch(i){return Lt(t,i),1}}(s,i);if(e!==t.mf)return E(Ht("write to"));var r=e.Ra;if("errored"===r)return E(e.qd);if(!0===At(e)||"closed"===r)return E(new g("The stream is closing or closed and cannot be written to"));if("erroring"===r)return E(e.qd);var h=function(t){return T(function(i,e){var s={Qd:i,Kd:e};t.rf.push(s)})}(e);return function(t,i,e){var s={chunk:i};try{ot(t,s,e)}catch(i){return void Lt(t,i)}var n=t.Sf;if(!1===At(n)&&"writable"===n.Ra){St(n,Ot(t))}Mt(t)}(s,i,n),h}var Ct=function(){function t(){throw new g("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!r(t))return!1;if(!w.prototype.hasOwnProperty.call(t,"Sf"))return!1;return!0}(this))throw new g("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.Sf.Ra&&Ft(this,t)},t.prototype[ut]=function(t){var i=this.Tf(t);return Bt(this),i},t.prototype[ct]=function(){at(this)},t}();function Dt(t,i,e,s,n,r,h,o){i.Sf=t,t.nf=i,i.tf=void 0,i.if=void 0,at(i),i.pf=!1,i.bf=o,i.kf=h,i.Ef=s,i.Pf=n,i.Tf=r;var a=Ot(i);St(t,a),x(k(e()),function(){i.pf=!0,Mt(i)},function(e){i.pf=!0,mt(t,e)})}function Bt(t){t.Ef=void 0,t.Pf=void 0,t.Tf=void 0,t.bf=void 0}function Nt(t){return t.kf-t.if}function Mt(t){var i=t.Sf;if(!1!==t.pf&&void 0===i.hf)if("erroring"!==i.Ra){if(0!==t.tf.length){var e=function(t){return t.tf.peek().value}(t);"close"===e?function(t){var i=t.Sf;(function(t){t.cf=t.uf,t.uf=void 0})(i),ht(t);var e=t.Pf();Bt(t),x(e,function(){!function(t){t.cf.Qd(void 0),t.cf=void 0,"erroring"===t.Ra&&(t.qd=void 0,void 0!==t.df&&(t.df.Qd(),t.df=void 0)),t.Ra="closed";var i=t.ef;void 0!==i&&Gt(i)}(i)},function(t){!function(t,i){t.cf.Kd(i),t.cf=void 0,void 0!==t.df&&(t.df.Kd(i),t.df=void 0),mt(t,i)}(i,t)})}(t):function(t,i){var e=t.Sf;!function(t){t.hf=t.rf.shift()}(e);var s=t.Ef(i);x(s,function(){!function(t){t.hf.Qd(void 0),t.hf=void 0}(e);var i=e.Ra;if(ht(t),!1===At(e)&&"writable"===i){var s=Ot(t);St(e,s)}Mt(t)},function(i){"writable"===e.Ra&&Bt(t),function(t,i){t.hf.Kd(i),t.hf=void 0,mt(t,i)}(e,i)})}(t,e.chunk)}}else yt(i)}function Lt(t,i){"writable"===t.Sf.Ra&&Ft(t,i)}function Ot(t){return Nt(t)<=0}function Ft(t,i){var e=t.Sf;Bt(t),wt(e,i)}function Ut(t){return new g("WritableStream.prototype."+t+" can only be used on a WritableStream")}function Vt(t){return new g("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function Ht(t){return new g("Cannot "+t+" a stream using a released writer")}function Wt(t){t.zd=T(function(i,e){t.Gd=i,t.Xd=e,t.yf="pending"})}function qt(t,i){Wt(t),zt(t,i)}function zt(t,i){D(t.zd),t.Xd(i),t.Gd=void 0,t.Xd=void 0,t.yf="rejected"}function Gt(t){t.Gd(void 0),t.Gd=void 0,t.Xd=void 0,t.yf="resolved"}function Xt(t){t.wf=T(function(i,e){t.xf=i,t.If=e}),t.Af="pending"}function jt(t,i){Xt(t),Kt(t,i)}function Qt(t){Xt(t),Yt(t)}function Kt(t,i){D(t.wf),t.If(i),t.xf=void 0,t.If=void 0,t.Af="rejected"}function Yt(t){t.xf(void 0),t.xf=void 0,t.If=void 0,t.Af="fulfilled"}function Jt(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var Zt="undefined"!=typeof DOMException?DOMException:void 0;var $t,ti=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(Zt)?Zt:(($t=function(t,i){this.message=t||"",this.name=i||"Error",m.captureStackTrace&&m.captureStackTrace(this,this.constructor)}).prototype=w.create(m.prototype),w.defineProperty($t.prototype,"constructor",{value:$t,writable:!0,configurable:!0}),$t);function ii(t,i,s,n,r,h){var o=G(t),a=lt(i);t.Jd=!0;var u=!1,c=k(void 0);return T(function(d,l){var f,v,_,p;if(void 0!==h){if(f=function(){var e=new ti("Aborted","AbortError"),s=[];!1===n&&s.push(function(){return"writable"===i.Ra?gt(i,e):k(void 0)}),!1===r&&s.push(function(){return"readable"===t.Ra?ji(t,e):k(void 0)}),A(function(){return Promise.all(s.map(function(t){return t()}))},!0,e)},!0===h.aborted)return void f();h.addEventListener("abort",f)}if(y(t,o.zd,function(t){!1===n?A(function(){return gt(i,t)},!0,t):b(!0,t)}),y(i,a.zd,function(i){!1===r?A(function(){return ji(t,i)},!0,i):b(!0,i)}),v=t,_=o.zd,p=function(){!1===s?A(function(){return function(t){var i=t.mf,e=i.Ra;return!0===At(i)||"closed"===e?k(void 0):"errored"===e?E(i.qd):Et(t)}(a)}):b()},"closed"===v.Ra?p():I(_,p),!0===At(i)||"closed"===i.Ra){var m=new g("the destination writable stream closed before all data could be piped to it");!1===r?A(function(){return ji(t,m)},!0,m):b(!0,m)}function w(){var t=c;return P(c,function(){return t!==c?w():void 0})}function y(t,i,e){"errored"===t.Ra?e(t.qd):R(i,e)}function A(t,e,s){function n(){x(t(),function(){return S(e,s)},function(t){return S(!0,t)})}!0!==u&&(u=!0,"writable"===i.Ra&&!1===At(i)?I(w(),n):n())}function b(t,e){!0!==u&&(u=!0,"writable"===i.Ra&&!1===At(i)?I(w(),function(){return S(t,e)}):S(t,e))}function S(t,i){It(a),O(o),void 0!==h&&h.removeEventListener("abort",f),t?l(i):d(void 0)}D(T(function(t,i){!function s(n){n?t():P(!0===u?k(!0):P(a.wf,function(){return P(it(o),function(t){return!0===t.done||(c=P(Rt(a,t.value),void 0,e),!1)})}),s,i)}(!1)}))})}var ei=function(){function t(){throw new g}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===si(this))throw fi("desiredSize");return ci(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===si(this))throw fi("close");if(!1===di(this))throw new g("The stream is not in a state that permits close");oi(this)},t.prototype.enqueue=function(t){if(!1===si(this))throw fi("enqueue");if(!1===di(this))throw new g("The stream is not in a state that permits enqueue");return ai(this,t)},t.prototype.error=function(t){if(!1===si(this))throw fi("error");ui(this,t)},t.prototype[q]=function(t){at(this);var i=this.Rf(t);return hi(this),i},t.prototype[z]=function(){var t=this.Cf;if(this.tf.length>0){var i=ht(this);return!0===this.Df&&0===this.tf.length?(hi(this),Qi(t)):ni(this),k(N(i,!1,t.Wd.Vd))}var e=X(t);return ni(this),e},t}();function si(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Cf")}function ni(t){!1!==ri(t)&&(!0!==t.Bf?(t.Bf=!0,x(t.Nf(),function(){t.Bf=!1,!0===t.Mf&&(t.Mf=!1,ni(t))},function(i){ui(t,i)})):t.Mf=!0)}function ri(t){var i=t.Cf;return!1!==di(t)&&(!1!==t.pf&&(!0===Xi(i)&&K(i)>0||ci(t)>0))}function hi(t){t.Nf=void 0,t.Rf=void 0,t.bf=void 0}function oi(t){var i=t.Cf;t.Df=!0,0===t.tf.length&&(hi(t),Qi(i))}function ai(t,i){var e=t.Cf;if(!0===Xi(e)&&K(e)>0)Q(e,i,!1);else{var s=void 0;try{s=t.bf(i)}catch(i){throw ui(t,i),i}try{ot(t,i,s)}catch(i){throw ui(t,i),i}}ni(t)}function ui(t,i){var e=t.Cf;"readable"===e.Ra&&(at(t),hi(t),Ki(e,i))}function ci(t){var i=t.Cf.Ra;return"errored"===i?null:"closed"===i?0:t.kf-t.if}function di(t){var i=t.Cf.Ra;return!1===t.Df&&"readable"===i}function li(t,i,e,s,n,r,h){i.Cf=t,i.tf=void 0,i.if=void 0,at(i),i.pf=!1,i.Df=!1,i.Mf=!1,i.Bf=!1,i.bf=h,i.kf=r,i.Nf=s,i.Rf=n,t.Zd=i,x(k(e()),function(){i.pf=!0,ni(i)},function(t){ui(i,t)})}function fi(t){return new g("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var vi=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&_.floor(t)===t},_i=function(){function t(){throw new g("ReadableStreamBYOBRequest cannot be used directly")}return w.defineProperty(t.prototype,"view",{get:function(){if(!1===mi(this))throw Ni("view");return this.Lf},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===mi(this))throw Ni("respond");if(void 0===this.Of)throw new g("This BYOB request has been invalidated");this.Lf.buffer,function(t,i){if(i=Number(i),!1===a(i))throw new RangeError("bytesWritten must be a finite");xi(t,i)}(this.Of,t)},t.prototype.respondWithNewView=function(t){if(!1===mi(this))throw Ni("respond");if(void 0===this.Of)throw new g("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new g("You can only respond with array buffer views");t.buffer,function(t,i){var e=t.Ff.peek();if(e.byteOffset+e.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(e.byteLength!==i.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");e.buffer=i.buffer,xi(t,i.byteLength)}(this.Of,t)},t}(),gi=function(){function t(){throw new g("ReadableByteStreamController constructor cannot be used directly")}return w.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===pi(this))throw Mi("byobRequest");if(void 0===this.Uf&&this.Ff.length>0){var t=this.Ff.peek(),i=new j(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),e=w.create(_i.prototype);!function(t,i,e){t.Of=i,t.Lf=e}(e,this,i),this.Uf=e}return this.Uf},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===pi(this))throw Mi("desiredSize");return Di(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===pi(this))throw Mi("close");if(!0===this.Df)throw new g("The stream has already been closed; do not close it again!");var t=this.Vf.Ra;if("readable"!==t)throw new g("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var i=t.Vf;if(t.if>0)return void(t.Df=!0);if(t.Ff.length>0){if(t.Ff.peek().bytesFilled>0){var e=new g("Insufficient bytes to fill elements in the given buffer");throw Ci(t,e),e}}Ri(t),Qi(i)}(this)},t.prototype.enqueue=function(t){if(!1===pi(this))throw Mi("enqueue");if(!0===this.Df)throw new g("stream is closed or draining");var i=this.Vf.Ra;if("readable"!==i)throw new g("The stream (in "+i+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new g("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,i){var e=t.Vf,s=i.buffer,n=i.byteOffset,r=i.byteLength,h=s;if(!0===Y(e)){if(0===K(e))bi(t,h,n,r);else Q(e,new j(h,n,r),!1)}else!0===Fi(e)?(bi(t,h,n,r),Pi(t)):bi(t,h,n,r);wi(t)}(this,t)},t.prototype.error=function(t){if(!1===pi(this))throw Mi("error");Ci(this,t)},t.prototype[q]=function(t){this.Ff.length>0&&(this.Ff.peek().bytesFilled=0);at(this);var i=this.Rf(t);return Ri(this),i},t.prototype[z]=function(){var t=this.Vf;if(this.if>0){var i=this.tf.shift();this.if-=i.byteLength,ki(this);var e=void 0;try{e=new j(i.buffer,i.byteOffset,i.byteLength)}catch(t){return E(t)}return k(N(e,!1,t.Wd.Vd))}var s=this.Hf;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return E(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:j,readerType:"default"};this.Ff.push(r)}var h=X(t);return wi(this),h},t}();function pi(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Vf")}function mi(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Of")}function wi(t){var i=function(t){var i=t.Vf;if("readable"!==i.Ra)return!1;if(!0===t.Df)return!1;if(!1===t.pf)return!1;if(!0===Y(i)&&K(i)>0)return!0;if(!0===Fi(i)&&Oi(i)>0)return!0;var e=Di(t);if(e>0)return!0;return!1}(t);!1!==i&&(!0!==t.Bf?(t.Bf=!0,x(t.Nf(),function(){t.Bf=!1,!0===t.Mf&&(t.Mf=!1,wi(t))},function(i){Ci(t,i)})):t.Mf=!0)}function yi(t,i){var e=!1;"closed"===t.Ra&&(e=!0);var s=Ai(i);"default"===i.readerType?Q(t,s,e):function(t,i,e){var s=t.Wd,n=s.Wf.shift();n.Qd(N(i,e,s.Vd))}(t,s,e)}function Ai(t){var i=t.bytesFilled,e=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,i/e)}function bi(t,i,e,s){t.tf.push({buffer:i,byteOffset:e,byteLength:s}),t.if+=s}function Si(t,i){var e=i.elementSize,s=i.bytesFilled-i.bytesFilled%e,n=_.min(t.if,i.byteLength-i.bytesFilled),r=i.bytesFilled+n,h=r-r%e,a=n,u=!1;h>s&&(a=h-i.bytesFilled,u=!0);for(var c=t.tf;a>0;){var d=c.peek(),l=_.min(a,d.byteLength),f=i.byteOffset+i.bytesFilled;o(i.buffer,f,d.buffer,d.byteOffset,l),d.byteLength===l?c.shift():(d.byteOffset+=l,d.byteLength-=l),t.if-=l,Ti(t,l,i),a-=l}return u}function Ti(t,i,e){Ei(t),e.bytesFilled+=i}function ki(t){0===t.if&&!0===t.Df?(Ri(t),Qi(t.Vf)):wi(t)}function Ei(t){void 0!==t.Uf&&(t.Uf.Of=void 0,t.Uf.Lf=void 0,t.Uf=void 0)}function Pi(t){for(;t.Ff.length>0;){if(0===t.if)return;var i=t.Ff.peek();!0===Si(t,i)&&(Ii(t),yi(t.Vf,i))}}function xi(t,i){var e=t.Ff.peek();if("closed"===t.Vf.Ra){if(0!==i)throw new g("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,i){i.buffer=i.buffer;var e=t.Vf;if(!0===Fi(e))for(;Oi(e)>0;)yi(e,Ii(t))}(t,e)}else!function(t,i,e){if(e.bytesFilled+i>e.byteLength)throw new RangeError("bytesWritten out of range");if(Ti(t,i,e),!(e.bytesFilled<e.elementSize)){Ii(t);var s=e.bytesFilled%e.elementSize;if(s>0){var n=e.byteOffset+e.bytesFilled,r=e.buffer.slice(n-s,n);bi(t,r,0,r.byteLength)}e.buffer=e.buffer,e.bytesFilled-=s,yi(t.Vf,e),Pi(t)}}(t,i,e);wi(t)}function Ii(t){var i=t.Ff.shift();return Ei(t),i}function Ri(t){t.Nf=void 0,t.Rf=void 0}function Ci(t,i){var e=t.Vf;"readable"===e.Ra&&(!function(t){Ei(t),t.Ff=new B}(t),at(t),Ri(t),Ki(e,i))}function Di(t){var i=t.Vf.Ra;return"errored"===i?null:"closed"===i?0:t.kf-t.if}function Bi(t,i,e){var s=w.create(gi.prototype);var n=c(i,"pull",0,[s]),r=c(i,"cancel",1,[]),h=i.autoAllocateChunkSize;if(void 0!==h&&(h=Number(h),!1===vi(h)||h<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,i,e,s,n,r,h){i.Vf=t,i.Mf=!1,i.Bf=!1,i.Uf=void 0,i.tf=i.if=void 0,at(i),i.Df=!1,i.pf=!1,i.kf=v(r),i.Nf=s,i.Rf=n,i.Hf=h,i.Ff=new B,t.Zd=i,x(k(e()),function(){i.pf=!0,wi(i)},function(t){Ci(i,t)})}(t,s,function(){return d(i,"start",[s])},n,r,e,h)}function Ni(t){return new g("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Mi(t){return new g("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function Li(t){return T(function(i,e){var s={Qd:i,Kd:e};t.Wd.Wf.push(s)})}function Oi(t){return t.Wd.Wf.length}function Fi(t){var i=t.Wd;return void 0!==i&&!!Vi(i)}var Ui=function(){function t(t){if(!Gi(t))throw new g("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===pi(t.Zd))throw new g("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(Xi(t))throw new g("This stream has already been locked for exclusive reading by another reader");M(this,t),this.Wf=new B}return w.defineProperty(t.prototype,"closed",{get:function(){return Vi(this)?this.zd:E(Hi("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return Vi(this)?void 0===this.Hd?E(F("cancel")):L(this,t):E(Hi("cancel"))},t.prototype.read=function(t){return Vi(this)?void 0===this.Hd?E(F("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?E(new g("view must have non-zero byteLength")):function(t,i){var e=t.Hd;if(e.Jd=!0,"errored"===e.Ra)return E(e.qd);return function(t,i){var e=t.Vf,s=1;i.constructor!==DataView&&(s=i.constructor.BYTES_PER_ELEMENT);var n=i.constructor,r={buffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.Ff.length>0)return t.Ff.push(r),Li(e);if("closed"===e.Ra)return k(N(new n(r.buffer,r.byteOffset,0),!0,e.Wd.Vd));if(t.if>0){if(!0===Si(t,r)){var h=Ai(r);return ki(t),k(N(h,!1,e.Wd.Vd))}if(!0===t.Df){var o=new g("Insufficient bytes to fill elements in the given buffer");return Ci(t,o),E(o)}}t.Ff.push(r);var a=Li(e);return wi(t),a}(e.Zd,i)}(this,t)):E(new g("view must be an array buffer view")):E(Hi("read"))},t.prototype.releaseLock=function(){if(!Vi(this))throw Hi("releaseLock");if(void 0!==this.Hd){if(this.Wf.length>0)throw new g("Tried to release a reader lock when that reader has pending read() calls un-settled");O(this)}},t}();function Vi(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Wf")}function Hi(t){return new g("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var Wi=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),zi(this);var e=i.size,s=i.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==e)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),Bi(this,t,s=v(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=p(e);void 0===s&&(s=1),function(t,i,e,s){var n=w.create(ei.prototype),r=c(i,"pull",0,[n]),h=c(i,"cancel",1,[]);li(t,n,function(){return d(i,"start",[n])},r,h,e,s)}(this,t,s=v(s),r)}}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===Gi(this))throw Yi("locked");return Xi(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Gi(this)?E(Yi("cancel")):!0===Xi(this)?E(new g("Cannot cancel a stream that already has a reader")):ji(this,t)},t.prototype.getReader=function(t){var i=(void 0===t?{}:t).mode;if(!1===Gi(this))throw Yi("getReader");if(void 0===i)return G(this,!0);if("byob"===(i=String(i)))return function(t,i){void 0===i&&(i=!1);var e=new Ui(t);return e.Vd=i,e}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,i){var e=t.writable,s=t.readable,n=void 0===i?{}:i,r=n.preventClose,h=n.preventAbort,o=n.preventCancel,a=n.signal;if(!1===Gi(this))throw Yi("pipeThrough");if(!1===vt(e))throw new g("writable argument to pipeThrough must be a WritableStream");if(!1===Gi(s))throw new g("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),h=Boolean(h),o=Boolean(o),void 0!==a&&!Jt(a))throw new g("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===Xi(this))throw new g("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===_t(e))throw new g("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return D(ii(this,e,r,h,o,a)),s},t.prototype.pipeTo=function(t,i){var e=void 0===i?{}:i,s=e.preventClose,n=e.preventAbort,r=e.preventCancel,h=e.signal;return!1===Gi(this)?E(Yi("pipeTo")):!1===vt(t)?E(new g("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===h||Jt(h)?!0===Xi(this)?E(new g("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===_t(t)?E(new g("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ii(this,t,s,n,r,h):E(new g("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Gi(this))throw Yi("tee");var t=function(t){var i,e,s,n,r,o=G(t),a=!1,u=!1,c=!1,d=T(function(t){r=t});function l(){return!0===a||(a=!0,D(C(it(o),function(t){if(a=!1,!0===t.done)return!1===u&&oi(s.Zd),void(!1===c&&oi(n.Zd));var i=t.value,e=i,r=i;!1===u&&ai(s.Zd,e),!1===c&&ai(n.Zd,r)}))),k(void 0)}function f(){}return s=qi(f,l,function(s){if(u=!0,i=s,!0===c){var n=h([i,e]),o=ji(t,n);r(o)}return d}),n=qi(f,l,function(s){if(c=!0,e=s,!0===u){var n=h([i,e]),o=ji(t,n);r(o)}return d}),R(o.zd,function(t){ui(s.Zd,t),ui(n.Zd,t)}),[s,n]}(this);return h(t)},t.prototype.getIterator=function(t){var i=(void 0===t?{}:t).preventCancel,e=void 0!==i&&i;if(!1===Gi(this))throw Yi("getIterator");return function(t,i){void 0===i&&(i=!1);var e=G(t),s=w.create(st);return s.$d=e,s.ul=Boolean(i),s}(this,e)},t}();function qi(t,i,e,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=w.create(Wi.prototype);return zi(r),li(r,w.create(ei.prototype),t,i,e,s,n),r}function zi(t){t.Ra="readable",t.Wd=void 0,t.qd=void 0,t.Jd=!1}function Gi(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Zd")}function Xi(t){return void 0!==t.Wd}function ji(t,i){return t.Jd=!0,"closed"===t.Ra?k(void 0):"errored"===t.Ra?E(t.qd):(Qi(t),C(t.Zd[q](i),e))}function Qi(t){t.Ra="closed";var i=t.Wd;void 0!==i&&(tt(i)&&(i.Yd.forEach(function(t){t.Qd(N(void 0,!0,i.Vd))}),i.Yd=new B),W(i))}function Ki(t,i){t.Ra="errored",t.qd=i;var e=t.Wd;void 0!==e&&(tt(e)?(e.Yd.forEach(function(t){t.Kd(i)}),e.Yd=new B):(e.Wf.forEach(function(t){t.Kd(i)}),e.Wf=new B),H(e,i))}function Yi(t){return new g("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof i.asyncIterator&&w.defineProperty(Wi.prototype,i.asyncIterator,{value:Wi.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var Ji=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(t){return t.byteLength},t}(),Zi=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(){return 1},t}(),$i=function(){function t(t,i,e){void 0===t&&(t={}),void 0===i&&(i={}),void 0===e&&(e={});var s=i.size,n=i.highWaterMark,r=e.size,h=e.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var o=p(s);if(void 0===n&&(n=1),n=v(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=p(r);void 0===h&&(h=0),h=v(h),function(t,i,e,s,n,r){function h(){return i}function o(i){return function(t,i){var e=t.qf;if(!0===t.lf){return C(t.zf,function(){var s=t.Gf;if("erroring"===s.Ra)throw s.qd;return ae(e,i)})}return ae(e,i)}(t,i)}function a(i){return function(t,i){return ie(t,i),k(void 0)}(t,i)}function u(){return function(t){var i=t.Xf,e=t.qf,s=e.jf();return he(e),C(s,function(){if("errored"===i.Ra)throw i.qd;var t=i.Zd;!0===di(t)&&oi(t)},function(e){throw ie(t,e),i.qd})}(t)}function c(){return function(t){return se(t,!1),t.zf}(t)}function d(i){return ee(t,i),k(void 0)}t.Gf=function(t,i,e,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var h=w.create(dt.prototype);return ft(h),Dt(h,w.create(Ct.prototype),t,i,e,s,n,r),h}(h,o,u,a,e,s),t.Xf=qi(h,c,d,n,r),t.lf=void 0,t.zf=void 0,t.Qf=void 0,se(t,!0),t.qf=void 0}(this,T(function(t){a=t}),n,o,h,u),function(t,i){var e=w.create(ne.prototype),s=function(t){try{return oe(e,t),k(void 0)}catch(t){return E(t)}},n=i.transform;if(void 0!==n){if("function"!=typeof n)throw new g("transform is not a method");s=function(t){return l(n,i,[t,e])}}var r=c(i,"flush",0,[e]);!function(t,i,e,s){i.Kf=t,t.qf=i,i.Yf=e,i.jf=s}(t,e,s,r)}(this,t);var f=d(t,"start",[this.qf]);a(f)}return w.defineProperty(t.prototype,"readable",{get:function(){if(!1===te(this))throw ce("readable");return this.Xf},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"writable",{get:function(){if(!1===te(this))throw ce("writable");return this.Gf},enumerable:!0,configurable:!0}),t}();function te(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"qf")}function ie(t,i){ui(t.Xf.Zd,i),ee(t,i)}function ee(t,i){he(t.qf),Lt(t.Gf.nf,i),!0===t.lf&&se(t,!1)}function se(t,i){void 0!==t.zf&&t.Qf(),t.zf=T(function(i){t.Qf=i}),t.lf=i}var ne=function(){function t(){throw new g("TransformStreamDefaultController instances cannot be created directly")}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===re(this))throw ue("desiredSize");return ci(this.Kf.Xf.Zd)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===re(this))throw ue("enqueue");oe(this,t)},t.prototype.error=function(t){if(!1===re(this))throw ue("error");!function(t,i){ie(t.Kf,i)}(this,t)},t.prototype.terminate=function(){if(!1===re(this))throw ue("terminate");!function(t){var i=t.Kf,e=i.Xf.Zd;!0===di(e)&&oi(e);var s=new g("TransformStream terminated");ee(i,s)}(this)},t}();function re(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Kf")}function he(t){t.Yf=void 0,t.jf=void 0}function oe(t,i){var e=t.Kf,s=e.Xf.Zd;if(!1===di(s))throw new g("Readable side is not in a state that permits enqueue");try{ai(s,i)}catch(t){throw ee(e,t),e.Xf.qd}var n=function(t){return!0!==ri(t)}(s);n!==e.lf&&se(e,!0)}function ae(t,i){return C(t.Yf(i),void 0,function(i){throw ie(t.Kf,i),i})}function ue(t){return new g("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function ce(t){return new g("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=Ji,t.CountQueuingStrategy=Zi,t.ReadableStream=Wi,t.TransformStream=$i,t.WritableStream=dt,w.defineProperty(t,"__esModule",{value:!0})})}),pd=Qn(t=>{"use strict";function i(){const t=gd();return i=function(){return t},t}r(),w.defineProperty(t,"__esModule",{value:!0}),function(t,i){for(var e in i)w.defineProperty(t,e,{enumerable:!0,get:w.getOwnPropertyDescriptor(i,e).get})}(t,{get ByteLengthQueuingStrategy(){return i().ByteLengthQueuingStrategy},get CountQueuingStrategy(){return i().CountQueuingStrategy},get ReadableStream(){return i().ReadableStream},get TransformStream(){return i().TransformStream},get WritableStream(){return i().WritableStream}})}),md=Qn((t,i)=>{r(),function(e,s){"object"==typeof t&&typeof i<"u"?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((e=typeof globalThis<"u"?globalThis:e||self).millicast={})}(t,function(t){"use strict";var i,e=w.defineProperty,n=w.defineProperties,r=w.getOwnPropertyDescriptors,o=w.getOwnPropertySymbols,a=w.prototype.hasOwnProperty,c=w.prototype.propertyIsEnumerable,d=(t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,l=(t,i)=>{for(var e in i||(i={}))a.call(i,e)&&d(t,e,i[e]);if(o)for(var e of o(i))c.call(i,e)&&d(t,e,i[e]);return t},f=(t,i)=>n(t,r(i)),y=(t,i)=>{var e={};for(var s in t)a.call(t,s)&&i.indexOf(s)<0&&(e[s]=t[s]);if(null!=t&&o)for(var s of o(t))i.indexOf(s)<0&&c.call(t,s)&&(e[s]=t[s]);return e},A=typeof globalThis<"u"?globalThis:typeof s<"u"?s:typeof global<"u"?global:typeof self<"u"?self:{};function b(t){return t&&t.__esModule&&w.prototype.hasOwnProperty.call(t,"default")?t.default:t}var T,k={exports:{}};var E,P=(T||(T=1,E=k,function(t){var i,e={VERSION:"1.6.1"},s={},n=function(t,i){return function(){return i.apply(t,arguments)}},r=function(){var t,i,e=arguments,s=e[0];for(i=1;i<e.length;i++)for(t in e[i])!(t in s)&&e[i].hasOwnProperty(t)&&(s[t]=e[i][t]);return s},h=function(t,i){return{value:t,name:i}};e.TRACE=h(1,"TRACE"),e.DEBUG=h(2,"DEBUG"),e.INFO=h(3,"INFO"),e.TIME=h(4,"TIME"),e.WARN=h(5,"WARN"),e.ERROR=h(8,"ERROR"),e.OFF=h(99,"OFF");var o=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};o.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var i=this.context.filterLevel;return t.value>=i.value},trace:function(){this.invoke(e.TRACE,arguments)},debug:function(){this.invoke(e.DEBUG,arguments)},info:function(){this.invoke(e.INFO,arguments)},warn:function(){this.invoke(e.WARN,arguments)},error:function(){this.invoke(e.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(e.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(e.TIME,[t,"end"])},invoke:function(t,e){i&&this.enabledFor(t)&&i(e,r({level:t},this.context))}};var a,u=new o({filterLevel:e.OFF});(a=e).enabledFor=n(u,u.enabledFor),a.trace=n(u,u.trace),a.debug=n(u,u.debug),a.time=n(u,u.time),a.timeEnd=n(u,u.timeEnd),a.info=n(u,u.info),a.warn=n(u,u.warn),a.error=n(u,u.error),a.log=a.info,e.setHandler=function(t){i=t},e.setLevel=function(t){for(var i in u.setLevel(t),s)s.hasOwnProperty(i)&&s[i].setLevel(t)},e.getLevel=function(){return u.getLevel()},e.get=function(t){return s[t]||(s[t]=new o(r({name:t},u.context)))},e.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,i){i.name&&t.unshift("["+i.name+"]")};var i={},s=function(t,i){Function.prototype.apply.call(t,console,i)};return typeof console>"u"?function(){}:function(n,r){n=Array.prototype.slice.call(n);var h,o=console.log;r.level===e.TIME?(h=(r.name?"["+r.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(h):i[h]=(new Date).getTime():console.timeEnd?console.timeEnd(h):s(o,[h+": "+((new Date).getTime()-i[h])+"ms"])):(r.level===e.WARN&&console.warn?o=console.warn:r.level===e.ERROR&&console.error?o=console.error:r.level===e.INFO&&console.info?o=console.info:r.level===e.DEBUG&&console.debug?o=console.debug:r.level===e.TRACE&&console.trace&&(o=console.trace),t.formatter(n,r),s(o,n))}},e.useDefaults=function(t){e.setLevel(t&&t.defaultLevel||e.DEBUG),e.setHandler(e.createDefaultHandler(t))},e.setDefaults=e.useDefaults,E.exports?E.exports=e:(e.Jf=t.Logger,e.noConflict=function(){return t.Logger=e.Jf,e},t.Logger=e)}(k.exports)),k.exports);const I=b(P),R="0.6.0",C=(null==(i=null==s?void 0:s.navigator)?void 0:i.userAgent)||"No user agent available";let D="",B="",N="",M="",L="",O="",F="",U=0;const V=[];const H=t=>{D=""===D?t:D},W=t=>{B=""===B?t:B},q=t=>{N=""===N?t:N},z=t=>{M=""===M?t:M},G=t=>{L=""===L?t:L},X=t=>{U=0===U?t:U},Q=t=>{O=t},K=t=>{F=""===F?t:F},Y=t=>{60===V.length&&V.shift(),V.push(t)},J=(t,i)=>{let e;void 0===t&&(t=60),void 0===i&&(i="JSON"),e=!Number.isInteger(t)||t>60||t<=0?60:t;const s={client:"@millicast/millicast-sdk",version:R,timestamp:(new Date).toISOString(),userAgent:C,clusterId:F,accountId:D,streamName:B,subscriberId:N,connection:O,stats:V.slice(-e),connectionDurationMs:(new Date).getTime()-U};return""!==L?s.feedId=L:""!==M&&(s.streamViewId=M),"CMCD"===i?function(t){function i(t,i){return{ts:_.round(i.timestamp)||"",ot:"audio"===t?"a":"v",bl:i.jitterBufferDelay||0,br:_.round(i.bitrateBitsPerSecond||0),pld:i.packetsLostDeltaPerSecond||0,j:i.jitter||0,mtp:i.packetRate||0,mid:i.mid||"",mimeType:i.mimeType||""}}return t.stats=t.stats.reduce((t,e)=>{const s=0!==e.audio.inbounds.length?e.audio.inbounds.map(t=>i("audio",t)):e.audio.outbounds.map(t=>i("audio",t)),n=0!==e.video.inbounds.length?e.video.inbounds.map(t=>i("video",t)):e.video.outbounds.map(t=>i("video",t));return t.concat([...s,...n])},[]),t}(s):s};I.useDefaults({defaultLevel:I.TRACE});const Z=["TRACE","DEBUG","INFO","WARN","ERROR"],tt=(t,i)=>{t.unshift("[".concat(i.name||"Global","] ").concat((new Date).toISOString()," - ").concat(i.level.name," -"))},it=(t,i)=>i?t.value>=ht[i].value:t.value>=rt.value,et=I.createDefaultHandler({formatter:tt});I.setHandler((t,i)=>{((t,i)=>{t=(t=Array.prototype.slice.call(t)).map(t=>"object"==typeof t?JSON.stringify(t):t),tt(t,i),0!==st?(nt.push(t.join(" ")),nt.length>=st&&(nt=nt.slice(-st))):nt=[]})(t,i),it(i.level,i.name)&&et(t,i);for(const{handler:e,level:s}of ot)i.level.value>=s.value&&e(t,i)});let st=1e4,nt=[],rt=I.OFF;const ht={},ot=[],at=f(l({},I),{enabledFor:it,getHistory:()=>nt,getHistoryMaxSize:()=>st,setHistoryMaxSize:t=>{st=t},setLevel:t=>{rt=t;for(const i in ht)ht[i]=t},getLevel:()=>rt,get:t=>{ht[t]||(ht[t]=rt);const i=I.get(t);return i.setLevel=i=>{ht[t]=i},i.getLevel=()=>ht[t],i},setHandler:(t,i)=>{ot.push({handler:t,level:i})},diagnose:t=>{let i;void 0===t&&(t={});const e={statsCount:60,historySize:1e3,minLogLevel:"TRACE",statsFormat:"JSON"};"number"==typeof t?(e.statsCount=t,i=e):i=l(l({},e),t);const{statsCount:s,historySize:n,minLogLevel:r,statsFormat:h}=i,o=J(s,h),a=at.getHistory();if(!Number.isInteger(n)||n<=0)throw new m("Invalid Argument Exception : historySize must be a positive integer.");if(!Z.includes(r.toUpperCase()))throw new m('Invalid Argument Exception : the minLogLevel parameter only excepts "trace", "debug", "info", "warn", and "error" as arguments.');if(Z.includes(r.toUpperCase())){const t=Z.slice(Z.indexOf(r.toUpperCase())),i=a.filter(i=>t.some(t=>i.includes(t)));o.history=i.slice(-n)}return o},JSON:"JSON",CMCD:"CMCD",VERSION:R});var ut,ct={exports:{}};function dt(){if(ut)return ct.exports;ut=1;var t,i="object"==typeof Reflect?Reflect:null,e=i&&"function"==typeof i.apply?i.apply:function(t,i,e){return Function.prototype.apply.call(t,i,e)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function n(){n.init.call(this)}ct.exports=n,ct.exports.once=function(t,i){return new Promise(function(e,s){function n(e){t.removeListener(i,r),s(e)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),e([].slice.call(arguments))}v(t,i,r,{once:!0}),"error"!==i&&function(t,i,e){"function"==typeof t.on&&v(t,"error",i,e)}(t,n,{once:!0})})},n.EventEmitter=n,n.prototype.Zf=void 0,n.prototype.$f=0,n.prototype.rv=void 0;var r=10;function h(t){if("function"!=typeof t)throw new g('The "listener" argument must be of type Function. Received type '+typeof t)}function o(t){return void 0===t.rv?n.defaultMaxListeners:t.rv}function a(t,i,e,s){var n,r,a;if(h(e),void 0===(r=t.Zf)?(r=t.Zf=w.create(null),t.$f=0):(void 0!==r.newListener&&(t.emit("newListener",i,e.listener?e.listener:e),r=t.Zf),a=r[i]),void 0===a)a=r[i]=e,++t.$f;else if("function"==typeof a?a=r[i]=s?[e,a]:[a,e]:s?a.unshift(e):a.push(e),(n=o(t))>0&&a.length>n&&!a.warned){a.warned=!0;var u=new m("Possible EventEmitter memory leak detected. "+a.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=i,u.count=a.length,function(t){console&&console.warn&&console.warn(t)}(u)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(t,i,e){var s={fired:!1,wrapFn:void 0,target:t,type:i,listener:e},n=u.bind(s);return n.listener=e,s.wrapFn=n,n}function d(t,i,e){var s=t.Zf;if(void 0===s)return[];var n=s[i];return void 0===n?[]:"function"==typeof n?e?[n.listener||n]:[n]:e?function(t){for(var i=new Array(t.length),e=0;e<i.length;++e)i[e]=t[e].listener||t[e];return i}(n):f(n,n.length)}function l(t){var i=this.Zf;if(void 0!==i){var e=i[t];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function f(t,i){for(var e=new Array(i),s=0;s<i;++s)e[s]=t[s];return e}function v(t,i,e,s){if("function"==typeof t.on)s.once?t.once(i,e):t.on(i,e);else{if("function"!=typeof t.addEventListener)throw new g('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,function n(r){s.once&&t.removeEventListener(i,n),e(r)})}}return w.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");r=t}}),n.init=function(){(void 0===this.Zf||this.Zf===w.getPrototypeOf(this).Zf)&&(this.Zf=w.create(null),this.$f=0),this.rv=this.rv||void 0},n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.rv=t,this},n.prototype.getMaxListeners=function(){return o(this)},n.prototype.emit=function(t){for(var i=[],s=1;s<arguments.length;s++)i.push(arguments[s]);var n="error"===t,r=this.Zf;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var h;if(i.length>0&&(h=i[0]),h instanceof m)throw h;var o=new m("Unhandled error."+(h?" ("+h.message+")":""));throw o.context=h,o}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)e(a,this,i);else{var u=a.length,c=f(a,u);for(s=0;s<u;++s)e(c[s],this,i)}return!0},n.prototype.addListener=function(t,i){return a(this,t,i,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(t,i){return a(this,t,i,!0)},n.prototype.once=function(t,i){return h(i),this.on(t,c(this,t,i)),this},n.prototype.prependOnceListener=function(t,i){return h(i),this.prependListener(t,c(this,t,i)),this},n.prototype.removeListener=function(t,i){var e,s,n,r,o;if(h(i),void 0===(s=this.Zf))return this;if(void 0===(e=s[t]))return this;if(e===i||e.listener===i)0===--this.$f?this.Zf=w.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,e.listener||i));else if("function"!=typeof e){for(n=-1,r=e.length-1;r>=0;r--)if(e[r]===i||e[r].listener===i){o=e[r].listener,n=r;break}if(n<0)return this;0===n?e.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(e,n),1===e.length&&(s[t]=e[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||i)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(t){var i,e,s;if(void 0===(e=this.Zf))return this;if(void 0===e.removeListener)return 0===arguments.length?(this.Zf=w.create(null),this.$f=0):void 0!==e[t]&&(0===--this.$f?this.Zf=w.create(null):delete e[t]),this;if(0===arguments.length){var n,r=w.keys(e);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Zf=w.create(null),this.$f=0,this}if("function"==typeof(i=e[t]))this.removeListener(t,i);else if(void 0!==i)for(s=i.length-1;s>=0;s--)this.removeListener(t,i[s]);return this},n.prototype.listeners=function(t){return d(this,t,!0)},n.prototype.rawListeners=function(t){return d(this,t,!1)},n.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):l.call(t,i)},n.prototype.listenerCount=l,n.prototype.eventNames=function(){return this.$f>0?t(this.Zf):[]},ct.exports}const lt=b(dt());var ft,vt={exports:{}};var _t=function(){if(ft)return vt.exports;ft=1,vt.exports=i,vt.exports.filter=function(e,s){var n=new t;return i(e,n,s),n};var t=dt().EventEmitter;function i(t,i,e){Array.isArray(e)||(e=[e]);var s=[];return e.forEach(function(e){var n=function(){var t=[].slice.call(arguments);t.unshift(e),i.emit.apply(i,t)};s.push(n),t.on(e,n)}),function(){e.forEach(function(i,e){t.removeListener(i,s[e])})}}return vt.exports}();const gt=b(_t);var pt,mt={exports:{}};var wt=(pt||(pt=1,function(t){var i;self,i=()=>{return t={7:t=>{var i,e="object"==typeof Reflect?Reflect:null,s=e&&"function"==typeof e.apply?e.apply:function(t,i,e){return Function.prototype.apply.call(t,i,e)};i=e&&"function"==typeof e.ownKeys?e.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,i){return new Promise(function(e,s){function n(e){t.removeListener(i,r),s(e)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),e([].slice.call(arguments))}var h,o;_(t,i,r,{once:!0}),"error"!==i&&(o=n,"function"==typeof(h=t).on&&_(h,"error",o,{once:!0}))})},r.EventEmitter=r,r.prototype.Zf=void 0,r.prototype.$f=0,r.prototype.rv=void 0;var h=10;function o(t){if("function"!=typeof t)throw new g('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t.rv?r.defaultMaxListeners:t.rv}function u(t,i,e,s){var n,r,h,u;if(o(e),void 0===(r=t.Zf)?(r=t.Zf=w.create(null),t.$f=0):(void 0!==r.newListener&&(t.emit("newListener",i,e.listener?e.listener:e),r=t.Zf),h=r[i]),void 0===h)h=r[i]=e,++t.$f;else if("function"==typeof h?h=r[i]=s?[e,h]:[h,e]:s?h.unshift(e):h.push(e),(n=a(t))>0&&h.length>n&&!h.warned){h.warned=!0;var c=new m("Possible EventEmitter memory leak detected. "+h.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=i,c.count=h.length,u=c,console&&console.warn&&console.warn(u)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,i,e){var s={fired:!1,wrapFn:void 0,target:t,type:i,listener:e},n=c.bind(s);return n.listener=e,s.wrapFn=n,n}function l(t,i,e){var s=t.Zf;if(void 0===s)return[];var n=s[i];return void 0===n?[]:"function"==typeof n?e?[n.listener||n]:[n]:e?function(t){for(var i=new Array(t.length),e=0;e<i.length;++e)i[e]=t[e].listener||t[e];return i}(n):v(n,n.length)}function f(t){var i=this.Zf;if(void 0!==i){var e=i[t];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function v(t,i){for(var e=new Array(i),s=0;s<i;++s)e[s]=t[s];return e}function _(t,i,e,s){if("function"==typeof t.on)s.once?t.once(i,e):t.on(i,e);else{if("function"!=typeof t.addEventListener)throw new g('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(i,function n(r){s.once&&t.removeEventListener(i,n),e(r)})}}w.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),r.init=function(){void 0!==this.Zf&&this.Zf!==w.getPrototypeOf(this).Zf||(this.Zf=w.create(null),this.$f=0),this.rv=this.rv||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.rv=t,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(t){for(var i=[],e=1;e<arguments.length;e++)i.push(arguments[e]);var n="error"===t,r=this.Zf;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var h;if(i.length>0&&(h=i[0]),h instanceof m)throw h;var o=new m("Unhandled error."+(h?" ("+h.message+")":""));throw o.context=h,o}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)s(a,this,i);else{var u=a.length,c=v(a,u);for(e=0;e<u;++e)s(c[e],this,i)}return!0},r.prototype.addListener=function(t,i){return u(this,t,i,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,i){return u(this,t,i,!0)},r.prototype.once=function(t,i){return o(i),this.on(t,d(this,t,i)),this},r.prototype.prependOnceListener=function(t,i){return o(i),this.prependListener(t,d(this,t,i)),this},r.prototype.removeListener=function(t,i){var e,s,n,r,h;if(o(i),void 0===(s=this.Zf))return this;if(void 0===(e=s[t]))return this;if(e===i||e.listener===i)0==--this.$f?this.Zf=w.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,e.listener||i));else if("function"!=typeof e){for(n=-1,r=e.length-1;r>=0;r--)if(e[r]===i||e[r].listener===i){h=e[r].listener,n=r;break}if(n<0)return this;0===n?e.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(e,n),1===e.length&&(s[t]=e[0]),void 0!==s.removeListener&&this.emit("removeListener",t,h||i)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var i,e,s;if(void 0===(e=this.Zf))return this;if(void 0===e.removeListener)return 0===arguments.length?(this.Zf=w.create(null),this.$f=0):void 0!==e[t]&&(0==--this.$f?this.Zf=w.create(null):delete e[t]),this;if(0===arguments.length){var n,r=w.keys(e);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Zf=w.create(null),this.$f=0,this}if("function"==typeof(i=e[t]))this.removeListener(t,i);else if(void 0!==i)for(s=i.length-1;s>=0;s--)this.removeListener(t,i[s]);return this},r.prototype.listeners=function(t){return l(this,t,!0)},r.prototype.rawListeners=function(t){return l(this,t,!1)},r.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):f.call(t,i)},r.prototype.listenerCount=f,r.prototype.eventNames=function(){return this.$f>0?i(this.Zf):[]}},156:function(t,i,e){var s=this&&this.hv||(w.create?function(t,i,e,s){void 0===s&&(s=e);var n=w.getOwnPropertyDescriptor(i,e);n&&!("get"in n?!i.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return i[e]}}),w.defineProperty(t,s,n)}:function(t,i,e,s){void 0===s&&(s=e),t[s]=i[e]}),n=this&&this.ov||function(t,i){for(var e in t)"default"===e||w.prototype.hasOwnProperty.call(i,e)||s(i,t,e)},r=this&&this.uv||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(i,"__esModule",{value:!0}),i.Logger=void 0;var h=e(586);w.defineProperty(i,"Logger",{enumerable:!0,get:function(){return r(h).default}}),n(e(284),i),n(e(280),i),n(e(738),i),n(e(767),i)},185:(t,i)=>{w.defineProperty(i,"__esModule",{value:!0}),i.calculatePacketsLostRatio=i.calculateRate=i.getMediaKind=void 0,i.getMediaKind=t=>{let i=t.kind||t.mediaType;return["audio","video"].includes(i)||"inbound-rtp"!==t.type||(i=t.id.toLocaleLowerCase().includes("video")?"video":"audio"),i},i.calculateRate=(t,i,e,s)=>e&&s?(i-s)/((t-e)/1e3):0,i.calculatePacketsLostRatio=(t,i,e,s)=>{const n=t-(null!=e?e:0),r=n+(i-(null!=s?s:0));return 0===r?0:n/r}},280:(t,i)=>{w.defineProperty(i,"__esModule",{value:!0})},284:function(t,i,e){var s,n,r,h,o,a,u,c,d,l,f,_,m,y,A,b,S=this&&this.fv||function(t,i,e,s){return new(e||(e=Promise))(function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e(function(t){t(i)})).then(h,o)}a((s=s.apply(t,i||[])).next())})},T=this&&this.vv||function(t,i,e,s,n){if("m"===s)throw new g("Private method is not writable");if("a"===s&&!n)throw new g("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!n:!i.has(t))throw new g("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,e):n?n.value=e:i.set(t,e),e},k=this&&this._v||function(t,i,e,s){if("a"===e&&!s)throw new g("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!s:!i.has(t))throw new g("Cannot read private member from an object whose class did not declare it");return"m"===e?s:"a"===e?s.call(t):s?s.value:i.get(t)},E=this&&this.uv||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(i,"__esModule",{value:!0}),i.WebRTCStats=void 0;const P=e(7),x=E(e(586)),I=e(738),R=e(185);class C extends P.EventEmitter{constructor(t){super(),s.add(this),n.set(this,void 0),r.set(this,void 0),h.set(this,void 0),o.set(this,null),a.set(this,void 0),u.set(this,null),this.start=()=>{k(this,a,"f").info("WebRTC statistics collection is starting..."),T(this,u,null,"f"),T(this,o,v(k(this,c,"f"),k(this,r,"f")),"f")},this.stop=()=>{k(this,o,"f")&&(p(k(this,o,"f")),T(this,o,null,"f"),k(this,a,"f").info("WebRTC statistics collection has stopped."))},c.set(this,()=>S(this,void 0,void 0,function*(){let t,i;try{k(this,a,"f").trace("Requesting WebRTC statistics..."),t=yield k(this,n,"f").call(this),i=(new Date).toISOString()}catch(t){return k(this,a,"f").error("Problem collecting the WebRTC statistics.",t),void this.emit("error","Problem collecting the WebRTC statistics - ".concat(t))}const e=Array.from(t.values()),r={timestamp:i,input:{audio:[],video:[]},output:{audio:[],video:[]}};k(this,h,"f")&&(r.rawStats=t);for(let i=0;i<w.keys(e).length;i++){const n=e[i];switch(n.type){case"outbound-rtp":const i=n,e=(0,R.getMediaKind)(i);"audio"===e?yield k(this,s,"m",f).call(this,t,i,r):"video"===e&&(yield k(this,s,"m",_).call(this,t,i,r));break;case"inbound-rtp":const h=n;let o=(0,R.getMediaKind)(h);"audio"===o?yield k(this,s,"m",y).call(this,t,h,r):"video"===o&&(yield k(this,s,"m",A).call(this,t,h,r));break;case"candidate-pair":const a=n;a.nominated&&k(this,s,"m",b).call(this,a,r)}}T(this,u,r,"f"),this.emit("stats",r)})),T(this,a,x.default.get("WebRTCStats"),"f"),T(this,n,t.getStats,"f"),T(this,r,t.getStatsInterval||1e3,"f"),T(this,h,!!t.includeRawStats,"f")}}i.WebRTCStats=C,n=new WeakMap,r=new WeakMap,h=new WeakMap,o=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,s=new WeakSet,d=function(t,i){if(i){const e=t.get(i);if(e)return{mimeType:e.mimeType}}return{}},l=function(t,i,e){return S(this,void 0,void 0,function*(){var n,r,h,o;const a=(0,R.calculateRate)(i.timestamp,i.bytesSent,null==e?void 0:e.timestamp,null==e?void 0:e.totalBytesSent),u=(0,R.calculateRate)(i.timestamp,i.packetsSent,null==e?void 0:e.timestamp,null==e?void 0:e.totalPacketsSent),c=k(this,s,"m",d).call(this,t,i.codecId);return w.assign({id:i.id,timestamp:i.timestamp,mid:i.mid,totalBytesSent:i.bytesSent,bytesSentDelta:i.bytesSent-(null!==(n=null==e?void 0:e.totalBytesSent)&&void 0!==n?n:0),totalPacketsSent:i.packetsSent,packetsSentDelta:i.packetsSent-(null!==(r=null==e?void 0:e.totalPacketsSent)&&void 0!==r?r:0),bitrate:a,packetRate:u,targetBitrate:i.targetBitrate,retransmittedPacketsSent:i.retransmittedPacketsSent,retransmittedPacketsSentDelta:i.retransmittedPacketsSent-(null!==(h=null==e?void 0:e.retransmittedPacketsSent)&&void 0!==h?h:0),retransmittedBytesSent:i.retransmittedBytesSent,retransmittedBytesSentDelta:i.retransmittedBytesSent-(null!==(o=null==e?void 0:e.retransmittedBytesSent)&&void 0!==o?o:0)},c)})},f=function(t,i,e){return S(this,void 0,void 0,function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.output.audio.find(t=>t.id===i.id);if(r&&i.timestamp-r.timestamp<=0)return;const h=yield k(this,s,"m",l).call(this,t,i,r),o=w.assign({},h);e.output.audio.push(o)})},_=function(t,i,e){return S(this,void 0,void 0,function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.output.video.find(t=>t.id===i.id);if(r&&i.timestamp-r.timestamp<=0)return;const h=yield k(this,s,"m",l).call(this,t,i,r);let o=I.QualityLimitationReason.none;i.qualityLimitationReason&&(o=i.qualityLimitationReason);const a=w.assign(w.assign({},h),{frameWidth:i.frameWidth,frameHeight:i.frameHeight,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,qualityLimitationReason:o,qualityLimitationDurations:i.qualityLimitationDurations});e.output.video.push(a)})},m=function(t,i,e){return S(this,void 0,void 0,function*(){var n,r;const h=(0,R.calculateRate)(i.timestamp,i.bytesReceived,null==e?void 0:e.timestamp,null==e?void 0:e.totalBytesReceived),o=(0,R.calculateRate)(i.timestamp,i.packetsReceived,null==e?void 0:e.timestamp,null==e?void 0:e.totalPacketsReceived),a=(0,R.calculatePacketsLostRatio)(i.packetsLost,i.packetsReceived,null==e?void 0:e.totalPacketsLost,null==e?void 0:e.totalPacketsReceived),u=(null!==(n=i.packetsLost)&&void 0!==n?n:0)-(null!==(r=null==e?void 0:e.totalPacketsLost)&&void 0!==r?r:0),c=k(this,s,"m",d).call(this,t,i.codecId);return w.assign({id:i.id,timestamp:i.timestamp,mid:i.mid,trackIdentifier:i.trackIdentifier,jitter:i.jitter,jitterBufferDelay:i.jitterBufferDelay,jitterBufferEmittedCount:i.jitterBufferEmittedCount,totalBytesReceived:i.bytesReceived,totalPacketsReceived:i.packetsReceived,totalPacketsLost:i.packetsLost,bitrate:h,packetRate:o,packetLossRatio:a,packetLossDelta:u},c)})},y=function(t,i,e){return S(this,void 0,void 0,function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.input.audio.find(t=>t.id===i.id);if(r&&i.timestamp-r.timestamp<=0)return;const h=yield k(this,s,"m",m).call(this,t,i,r);e.input.audio.push(h)})},A=function(t,i,e){return S(this,void 0,void 0,function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.input.video.find(t=>t.id===i.id);if(r&&i.timestamp-r.timestamp<=0)return;const h=yield k(this,s,"m",m).call(this,t,i,r),o=w.assign(w.assign({},h),{keyFramesDecoded:i.keyFramesDecoded,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesDecoded:i.framesDecoded,framesDropped:i.framesDropped,framesPerSecond:i.framesPerSecond,framesReceived:i.framesReceived});e.input.video.push(o)})},b=function(t,i){i.totalRoundTripTime=t.totalRoundTripTime,i.currentRoundTripTime=t.currentRoundTripTime,i.responsesReceived=t.responsesReceived,i.availableOutgoingBitrate=t.availableOutgoingBitrate,i.availableIncomingBitrate=t.availableIncomingBitrate}},586:function(t,i,e){var s,n;!function(){var r,h={VERSION:"1.6.1"},o={},a=function(t,i){return function(){return i.apply(t,arguments)}},u=function(){var t,i,e=arguments,s=e[0];for(i=1;i<e.length;i++)for(t in e[i])!(t in s)&&e[i].hasOwnProperty(t)&&(s[t]=e[i][t]);return s},c=function(t,i){return{value:t,name:i}};h.TRACE=c(1,"TRACE"),h.DEBUG=c(2,"DEBUG"),h.INFO=c(3,"INFO"),h.TIME=c(4,"TIME"),h.WARN=c(5,"WARN"),h.ERROR=c(8,"ERROR"),h.OFF=c(99,"OFF");var d=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};d.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var i=this.context.filterLevel;return t.value>=i.value},trace:function(){this.invoke(h.TRACE,arguments)},debug:function(){this.invoke(h.DEBUG,arguments)},info:function(){this.invoke(h.INFO,arguments)},warn:function(){this.invoke(h.WARN,arguments)},error:function(){this.invoke(h.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"end"])},invoke:function(t,i){r&&this.enabledFor(t)&&r(i,u({level:t},this.context))}};var l,f=new d({filterLevel:h.OFF});(l=h).enabledFor=a(f,f.enabledFor),l.trace=a(f,f.trace),l.debug=a(f,f.debug),l.time=a(f,f.time),l.timeEnd=a(f,f.timeEnd),l.info=a(f,f.info),l.warn=a(f,f.warn),l.error=a(f,f.error),l.log=l.info,h.setHandler=function(t){r=t},h.setLevel=function(t){for(var i in f.setLevel(t),o)o.hasOwnProperty(i)&&o[i].setLevel(t)},h.getLevel=function(){return f.getLevel()},h.get=function(t){return o[t]||(o[t]=new d(u({name:t},f.context)))},h.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,i){i.name&&t.unshift("["+i.name+"]")};var i={},e=function(t,i){Function.prototype.apply.call(t,console,i)};return typeof console>"u"?function(){}:function(s,n){s=Array.prototype.slice.call(s);var r,o=console.log;n.level===h.TIME?(r=(n.name?"["+n.name+"] ":"")+s[0],"start"===s[1]?console.time?console.time(r):i[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):e(o,[r+": "+((new Date).getTime()-i[r])+"ms"])):(n.level===h.WARN&&console.warn?o=console.warn:n.level===h.ERROR&&console.error?o=console.error:n.level===h.INFO&&console.info?o=console.info:n.level===h.DEBUG&&console.debug?o=console.debug:n.level===h.TRACE&&console.trace&&(o=console.trace),t.formatter(s,n),e(o,s))}},h.useDefaults=function(t){h.setLevel(t&&t.defaultLevel||h.DEBUG),h.setHandler(h.createDefaultHandler(t))},h.setDefaults=h.useDefaults,void 0===(n="function"==typeof(s=h)?s.call(i,e,i,t):s)||(t.exports=n)}()},738:(t,i)=>{var e,s;w.defineProperty(i,"__esModule",{value:!0}),i.QualityLimitationReason=void 0,(s=e||(i.QualityLimitationReason=e={}))[s.none=0]="none",s[s.cpu=1]="cpu",s[s.bandwidth=2]="bandwidth",s[s.other=3]="other"},767:(t,i)=>{w.defineProperty(i,"__esModule",{value:!0})}},i={},function e(s){var n=i[s];if(void 0!==n)return n.exports;var r=i[s]={exports:{}};return t[s].call(r.exports,r,r.exports,e),r.exports}(156);var t,i},t.exports=i()}(mt)),mt.exports);const yt=at.get("PeerConnectionStats"),At="stats";class bt extends lt{init(t){if(this.initialized)return void yt.warn("PeerConnectionStats.init() has already been called. Automatic initialization occurs when the PeerConnectionStats object is constructed.");yt.info("Initializing peer connection stats");const i=this.peer;try{this.collection=new wt.WebRTCStats({getStatsInterval:t,getStats:()=>i.getStats(),includeRawStats:!0}),this.collection.on("stats",t=>{const i=(t=>{const i=t,{input:e,output:s,rawStats:n}=i,r=y(i,["input","output","rawStats"]);return f(l({},r),{audio:{inbounds:t.input.audio.map(t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=y(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}),outbounds:t.output.audio.map(t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=y(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})},video:{inbounds:t.input.video.map(t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=y(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}),outbounds:t.output.video.map(t=>{var i=t,{packetLossRatio:e,packetLossDelta:s,bitrate:n}=i,r=y(i,["packetLossRatio","packetLossDelta","bitrate"]);return l({packetsLostRatioPerSecond:e,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})},raw:t.rawStats})})(t);Y(i),this.emit(At,i)}),this.collection.start(),this.initialized=!0}catch(t){yt.error(t)}}parseStats(t){return yt.warn("The parseStats method is deprecated and will be removed in future releases."),null}stop(){yt.info("Stopping peer connection stats"),this.collection.stop()}constructor(t,i={statsIntervalMs:1e3,autoInitStats:!0}){super(),this.peer=t,this.collection=null,this.initialized=!1,i.autoInitStats&&this.init(i.statsIntervalMs)}}var St,Tt,kt,Et,Pt,xt,It,Rt,Ct,Dt,Bt,Nt,Mt,Lt,Ot,Ft,Ut,Vt,Ht,Wt,qt,zt={},Gt={},Xt={},jt={exports:{}};function Qt(){if(St)return jt.exports;St=1;var t=jt.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return null!=t.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return null!=t.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return null!=t.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var i="candidate:%s %d %s %d %s %d typ %s";return i+=null!=t.raddr?" raddr %s rport %d":"%v%v",i+=null!=t.tcptype?" tcptype %s":"%v",null!=t.generation&&(i+=" generation %d"),i+=null!=t["network-id"]?" network-id %d":"%v",i+=null!=t["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var i="ssrc:%d";return null!=t.attribute&&(i+=" %s",null!=t.value&&(i+=":%s")),i}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return null!=t.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(null!=t.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var i="mediaclk:";return i+=null!=t.id?"id=%s %s":"%v%s",i+=null!=t.mediaClockValue?"=%s":"",i+=null!=t.rateNumerator?" rate=%s":"",i+=null!=t.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return w.keys(t).forEach(function(i){t[i].forEach(function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")})}),jt.exports}function Kt(){return Tt||(Tt=1,function(t){var i=function(t){return String(Number(t))===t?Number(t):t},e=function(t,e,s){var n=t.name&&t.names;t.push&&!e[t.push]?e[t.push]=[]:n&&!e[t.name]&&(e[t.name]={});var r=t.push?{}:n?e[t.name]:e;(function(t,e,s,n){if(n&&!s)e[n]=i(t[1]);else for(var r=0;r<s.length;r+=1)null!=t[r+1]&&(e[s[r]]=i(t[r+1]))})(s.match(t.reg),r,t.names,t.name),t.push&&e[t.push].push(r)},s=Qt(),n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(t){var i={},r=[],h=i;return t.split(/(\r\n|\r|\n)/).filter(n).forEach(function(t){var i=t[0],n=t.slice(2);"m"===i&&(r.push({rtp:[],fmtp:[]}),h=r[r.length-1]);for(var o=0;o<(s[i]||[]).length;o+=1){var a=s[i][o];if(a.reg.test(n))return e(a,h,n)}}),i.media=r,i};var r=function(t,e){var s=e.split(/=(.+)/,2);return 2===s.length?t[s[0]]=i(s[1]):1===s.length&&e.length>1&&(t[s[0]]=void 0),t};t.parseParams=function(t){return t.split(/;\s?/).reduce(r,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(t){return t.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(t){for(var e=[],s=t.split(" ").map(i),n=0;n<s.length;n+=3)e.push({component:s[n],ip:s[n+1],port:s[n+2]});return e},t.parseImageAttributes=function(t){return t.split(" ").map(function(t){return t.substring(1,t.length-1).split(",").reduce(r,{})})},t.parseSimulcastStreamList=function(t){return t.split(";").map(function(t){return t.split(",").map(function(t){var e,s=!1;return"~"!==t[0]?e=i(t):(e=i(t.substring(1,t.length)),s=!0),{scid:e,paused:s}})})}}(Xt)),Xt}function Yt(){if(Et)return kt;Et=1;var t=Qt(),i=/%[sdv%]/g,e=function(t){var e=1,s=arguments,n=s.length;return t.replace(i,function(t){if(e>=n)return t;var i=s[e];switch(e+=1,t){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})},s=function(t,i,s){var n=[t+"="+(i.format instanceof Function?i.format(i.push?s:s[i.name]):i.format)];if(i.names)for(var r=0;r<i.names.length;r+=1){var h=i.names[r];i.name?n.push(s[i.name][h]):n.push(s[i.names[r]])}else n.push(s[i.name]);return e.apply(null,n)},n=["v","o","s","i","u","e","p","c","b","t","r","z","a"],r=["i","c","b","a"];return kt=function(i,e){e=e||{},null==i.version&&(i.version=0),null==i.name&&(i.name=" "),i.media.forEach(function(t){null==t.payloads&&(t.payloads="")});var h=e.outerOrder||n,o=e.innerOrder||r,a=[];return h.forEach(function(e){t[e].forEach(function(t){t.name in i&&null!=i[t.name]?a.push(s(e,t,i)):t.push in i&&null!=i[t.push]&&i[t.push].forEach(function(i){a.push(s(e,t,i))})})}),i.media.forEach(function(i){a.push(s("m",t.m[0],i)),o.forEach(function(e){t[e].forEach(function(t){t.name in i&&null!=i[t.name]?a.push(s(e,t,i)):t.push in i&&null!=i[t.push]&&i[t.push].forEach(function(i){a.push(s(e,t,i))})})})}),a.join("\r\n")+"\r\n"}}function Jt(){if(Ct)return Rt;Ct=1;class t{equals(t){return t.foundation===this.foundation&&t.componentId===this.componentId&&t.transport===this.transport&&t.priority===this.priority&&t.address===this.address&&t.port===this.port&&t.type===this.type&&t.relAddr===this.relAddr&&t.relPort===this.relPort}clone(){return new t(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.relAddr,this.relPort)}plain(){const t={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type};return this.relAddr&&(t.relAddr=this.relAddr),this.relPort&&(t.relPort=this.relPort),t}getFoundation(){return this.foundation}getComponentId(){return this.componentId}getTransport(){return this.transport}getPriority(){return this.priority}getAddress(){return this.address}getPort(){return this.port}getType(){return this.type}getRelAddr(){return this.relAddr}getRelPort(){return this.relPort}constructor(t,i,e,s,n,r,h,o,a){this.foundation=t,this.componentId=i,this.transport=e,this.priority=s,this.address=n,this.port=r,this.type=h,this.relAddr=o,this.relPort=a}}return t.expand=function(i){return"CandidateInfo"===i.constructor.name?i:new t(i.foundation,i.componentId,i.transport,i.priority,i.address,i.port,i.type,i.relAddr,i.relPort)},t.clone=function(i){return"CandidateInfo"===i.constructor.name?i.clone():t.expand(i)},Rt=t}function Zt(){if(Bt)return Dt;Bt=1;class t{clone(){return new t(this.id,this.params)}plain(){return this.params.length?{id:this.id,params:this.params}:{id:this.id}}getId(){return this.id}getParams(){return this.params}constructor(t,i){this.id=t,this.params=i||[]}}return t.expand=function(i){return"RTCPFeedbackInfo"===i.constructor.name?i:new t(i.id,i.params)},t.clone=function(i){return"RTCPFeedbackInfo"===i.constructor.name?i.clone():t.expand(i)},Dt=t}function $t(){if(Mt)return Nt;Mt=1;const t=Zt();class i{clone(){const t=new i(this.codec,this.type,this.params);this.hasRTX()&&t.setRTX(this.getRTX());for(const i of this.rtcpfbs)t.addRTCPFeedback(i.clone());return this.hasChannels()&&t.setChannels(this.getChannels()),t}plain(){const t={codec:this.codec,type:this.type};this.rtx&&(t.rtx=this.rtx),this.channels&&(t.channels=this.channels),w.keys(this.params).length&&(t.params=this.params);for(const i of this.rtcpfbs)t.rtcpfbs||(t.rtcpfbs=[]),t.rtcpfbs.push(i.plain());return t}setRTX(t){this.rtx=t}getType(){return this.type}setType(t){this.type=t}getCodec(){return this.codec}getParams(){return this.params}addParams(t){for(const i in t)this.params[i]=t[i]}addParam(t,i){this.params[t]=i}hasParam(t){return w.hasOwnProperty.call(this.params,t)}getParam(t,i){if(void 0===i&&(i=void 0),this.hasParam(t))return this.params[t];if(void 0===i)throw new m("param ".concat(t," not found and no default value provided"));return""+i}hasRTX(){return this.rtx}getRTX(){return this.rtx}hasChannels(){return this.channels}getChannels(){return this.channels}setChannels(t){this.channels=t}addRTCPFeedback(t){this.rtcpfbs.add(t)}getRTCPFeedbacks(){return this.rtcpfbs}constructor(t,i,e){this.codec=t,this.type=i,this.params={},this.rtcpfbs=new Set,e&&this.addParams(e)}}return i.expand=function(e){if("CodecInfo"===e.constructor.name)return e;const s=new i(e.codec,e.type,e.params);e.rtx&&s.setRTX(e.rtx),e.channels&&s.setChannels(e.channels);for(const i of e.rtcpfbs||[]){const e=t.expand(i);s.addRTCPFeedback(e)}return s},i.clone=function(t){return"CodecInfo"===t.constructor.name?t.clone():i.expand(t)},i.MapFromNames=function(e,s,n){var r;const h=new Map;let o=96;for(const a of e){let e;const u=a.split(";"),c=u.shift().toLowerCase().trim();e="pcmu"===c?0:"pcma"===c?8:++o;const d=new i(c,e);"opus"===c?d.setChannels(2):"multiopus"===c&&d.setChannels(6),s&&"ulpfec"!==c&&"flexfec-03"!==c&&"red"!==c&&d.setRTX(++o);for(const i of n||[])d.addRTCPFeedback(new t(i.id,i.params));for(const t of u){let i=t.split("=");d.addParam(i[0].trim(),null===(r=i[1])||void 0===r?void 0:r.trim())}h.set(e,d)}return h},Nt=i}function ti(){if(Ot)return Lt;return Ot=1,Lt=function t(){var i=this;if(!(this instanceof t))return new(Function.prototype.bind.apply(t,[null].concat(Array.prototype.slice.call(arguments))));Array.from(arguments).forEach(function(t){i[t]=td("pv"+t)})},Lt}function ii(){if(Ut)return Ft;Ut=1;const t=ti()("ACTIVE","PASSIVE","ACTPASS","INACTIVE");return t.byValue=function(i){switch(i){case t.ACTIVE:case t.PASSIVE:case t.ACTPASS:case t.INACTIVE:return i}return t[i.toUpperCase()]},t.toString=function(i){switch(i){case t.ACTIVE:return"active";case t.PASSIVE:return"passive";case t.ACTPASS:return"actpass";case t.INACTIVE:return"inactive"}},t.reverse=function(i,e){switch(i){case t.ACTIVE:return t.PASSIVE;case t.PASSIVE:return t.ACTIVE;case t.ACTPASS:return e?t.ACTIVE:t.PASSIVE;case t.INACTIVE:return t.INACTIVE}},Ft=t}function ei(){if(Ht)return Vt;Ht=1;const t=ii();class i{clone(){return new i(this.setup,this.hash,this.fingerprint)}plain(){return{setup:t.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}}getFingerprint(){return this.fingerprint}getHash(){return this.hash}getSetup(){return this.setup}setSetup(t){this.setup=t}constructor(t,i,e){this.setup=t,this.hash=i,this.fingerprint=e}}return i.expand=function(e){return"DTLSInfo"===e.constructor.name?e:new i(e.setup?t.byValue(e.setup):t.ACTPASS,e.hash,e.fingerprint)},i.clone=function(t){return"DTLSInfo"===t.constructor.name?t.clone():i.expand(t)},Vt=i}function si(){if(qt)return Wt;qt=1;class t{clone(){return new t(this.tag,this.suite,this.keyParams,this.sessionParams)}plain(){return{tag:this.tag,suite:this.suite,keyParams:this.keyParams,sessionParams:this.sessionParams}}getSessionParams(){return this.sessionParams}getKeyParams(){return this.keyParams}getSuite(){return this.suite}getTag(){return this.tag}constructor(t,i,e,s){this.tag=t,this.suite=i,this.keyParams=e,this.sessionParams=s}}return t.expand=function(i){return"CryptoInfo"===i.constructor.name?i:new t(i.tag,i.suite,i.keyParams,i.sessionParams)},t.clone=function(i){return"CryptoInfo"===i.constructor.name?i.clone():t.expand(i)},Wt=t}var ni,ri={exports:{}},hi={exports:{}},oi={},ai={};var ui,ci,di,li,fi,vi,_i,gi,pi,mi,wi,yi,Ai,bi,Si,Ti,ki,Ei,Pi,xi,Ii,Ri,Ci,Di,Bi,Ni,Mi,Li,Oi,Fi,Ui,Vi,Hi,Wi={};function qi(){return ci||(ci=1,function(t){const i=function(){if(ni)return ai;ni=1,ai.byteLength=function(t){var i=r(t),e=i[0],s=i[1];return 3*(e+s)/4-s},ai.toByteArray=function(t){var s,n,h=r(t),o=h[0],a=h[1],u=new e(function(t,i,e){return 3*(i+e)/4-e}(0,o,a)),c=0,d=a>0?o-4:o;for(n=0;n<d;n+=4)s=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[c++]=s>>16&255,u[c++]=s>>8&255,u[c++]=255&s;return 2===a&&(s=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[c++]=255&s),1===a&&(s=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[c++]=s>>8&255,u[c++]=255&s),u},ai.fromByteArray=function(i){for(var e,s=i.length,n=s%3,r=[],h=16383,a=0,u=s-n;a<u;a+=h)r.push(o(i,a,a+h>u?u:a+h));return 1===n?(e=i[s-1],r.push(t[e>>2]+t[e<<4&63]+"==")):2===n&&(e=(i[s-2]<<8)+i[s-1],r.push(t[e>>10]+t[e>>4&63]+t[e<<2&63]+"=")),r.join("")};for(var t=[],i=[],e=typeof j<"u"?j:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0;n<64;++n)t[n]=s[n],i[s.charCodeAt(n)]=n;function r(t){var i=t.length;if(i%4>0)throw new m("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");return-1===e&&(e=i),[e,e===i?0:4-e%4]}function h(i){return t[i>>18&63]+t[i>>12&63]+t[i>>6&63]+t[63&i]}function o(t,i,e){for(var s,n=[],r=i;r<e;r+=3)s=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),n.push(h(s));return n.join("")}return i[45]=62,i[95]=63,ai}(),e=(ui||(ui=1,Wi.read=function(t,i,e,s,n){var r,h,o=8*n-s-1,a=(1<<o)-1,u=a>>1,c=-7,d=e?n-1:0,l=e?-1:1,f=t[i+d];for(d+=l,r=f&(1<<-c)-1,f>>=-c,c+=o;c>0;r=256*r+t[i+d],d+=l,c-=8);for(h=r&(1<<-c)-1,r>>=-c,c+=s;c>0;h=256*h+t[i+d],d+=l,c-=8);if(0===r)r=1-u;else{if(r===a)return h?NaN:1/0*(f?-1:1);h+=_.pow(2,s),r-=u}return(f?-1:1)*h*_.pow(2,r-s)},Wi.write=function(t,i,e,s,n,r){var h,o,a,u=8*r-n-1,c=(1<<u)-1,d=c>>1,l=23===n?_.pow(2,-24)-_.pow(2,-77):0,f=s?0:r-1,v=s?1:-1,g=i<0||0===i&&1/i<0?1:0;for(i=_.abs(i),S(i)||i===1/0?(o=S(i)?1:0,h=c):(h=_.floor(_.log(i)/_.LN2),i*(a=_.pow(2,-h))<1&&(h--,a*=2),(i+=h+d>=1?l/a:l*_.pow(2,1-d))*a>=2&&(h++,a/=2),h+d>=c?(o=0,h=c):h+d>=1?(o=(i*a-1)*_.pow(2,n),h+=d):(o=i*_.pow(2,d-1)*_.pow(2,n),h=0));n>=8;t[e+f]=255&o,f+=v,o/=256,n-=8);for(h=h<<n|o,u+=n;u>0;t[e+f]=255&h,f+=v,h/=256,u-=8);t[e+f-v]|=128*g}),Wi),s="function"==typeof Io&&"function"==typeof td?td("nodejs.util.inspect.custom"):null;t.Buffer=h,t.SlowBuffer=function(t){return+t!=t&&(t=0),h.alloc(+t)},t.INSPECT_MAX_BYTES=50;const n=2147483647;function r(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');const i=new j(t);return w.setPrototypeOf(i,h.prototype),i}function h(t,i,e){if("number"==typeof t){if("string"==typeof i)throw new g('The "string" argument must be of type string. Received type number');return u(t)}return o(t,i,e)}function o(t,i,e){if("string"==typeof t)return function(t,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!h.isEncoding(i))throw new g("Unknown encoding: "+i);const e=0|f(t,i);let s=r(e);const n=s.write(t,i);return n!==e&&(s=s.slice(0,n)),s}(t,i);if(ArrayBuffer.isView(t))return function(t){if(tt(t,j)){const i=new j(t);return d(i.buffer,i.byteOffset,i.byteLength)}return c(t)}(t);if(null==t)throw new g("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(tt(t,ArrayBuffer)||t&&tt(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(tt(t,SharedArrayBuffer)||t&&tt(t.buffer,SharedArrayBuffer)))return d(t,i,e);if("number"==typeof t)throw new g('The "value" argument must not be of type number. Received type number');const s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return h.from(s,i,e);const n=function(t){if(h.isBuffer(t)){const i=0|l(t.length),e=r(i);return 0===e.length||t.copy(e,0,0,i),e}if(void 0!==t.length)return"number"!=typeof t.length||it(t.length)?r(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}(t);if(n)return n;if(typeof Io<"u"&&null!=Io.toPrimitive&&"function"==typeof t[Io.toPrimitive])return h.from(t[Io.toPrimitive]("string"),i,e);throw new g("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new g('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),r(t<0?0:0|l(t))}function c(t){const i=t.length<0?0:0|l(t.length),e=r(i);for(let s=0;s<i;s+=1)e[s]=255&t[s];return e}function d(t,i,e){if(i<0||t.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<i+(e||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===i&&void 0===e?new j(t):void 0===e?new j(t,i):new j(t,i,e),w.setPrototypeOf(s,h.prototype),s}function l(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function f(t,i){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||tt(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new g('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const e=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===e)return 0;let n=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return Z(t).length;default:if(n)return s?-1:J(t).length;i=(""+i).toLowerCase(),n=!0}}function v(t,i,e){let s=!1;if((void 0===i||i<0)&&(i=0),i>this.length||((void 0===e||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(i>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,i,e);case"utf8":case"utf-8":return R(this,i,e);case"ascii":return D(this,i,e);case"latin1":case"binary":return B(this,i,e);case"base64":return I(this,i,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,i,e);default:if(s)throw new g("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function p(t,i,e){const s=t[i];t[i]=t[e],t[e]=s}function y(t,i,e,s,n){if(0===t.length)return-1;if("string"==typeof e?(s=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),it(e=+e)&&(e=n?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(n)return-1;e=t.length-1}else if(e<0){if(!n)return-1;e=0}if("string"==typeof i&&(i=h.from(i,s)),h.isBuffer(i))return 0===i.length?-1:A(t,i,e,s,n);if("number"==typeof i)return i&=255,"function"==typeof j.prototype.indexOf?n?j.prototype.indexOf.call(t,i,e):j.prototype.lastIndexOf.call(t,i,e):A(t,[i],e,s,n);throw new g("val must be string, number or Buffer")}function A(t,i,e,s,n){let r,h=1,o=t.length,a=i.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||i.length<2)return-1;h=2,o/=2,a/=2,e/=2}function u(t,i){return 1===h?t[i]:t.readUInt16BE(i*h)}if(n){let s=-1;for(r=e;r<o;r++)if(u(t,r)===u(i,-1===s?0:r-s)){if(-1===s&&(s=r),r-s+1===a)return s*h}else-1!==s&&(r-=r-s),s=-1}else for(e+a>o&&(e=o-a),r=e;r>=0;r--){let e=!0;for(let s=0;s<a;s++)if(u(t,r+s)!==u(i,s)){e=!1;break}if(e)return r}return-1}function b(t,i,e,s){e=Number(e)||0;const n=t.length-e;s?(s=Number(s))>n&&(s=n):s=n;const r=i.length;let h;for(s>r/2&&(s=r/2),h=0;h<s;++h){const s=x(i.substr(2*h,2),16);if(it(s))return h;t[e+h]=s}return h}function T(t,i,e,s){return $(J(i,t.length-e),t,e,s)}function k(t,i,e,s){return $(function(t){const i=[];for(let e=0;e<t.length;++e)i.push(255&t.charCodeAt(e));return i}(i),t,e,s)}function E(t,i,e,s){return $(Z(i),t,e,s)}function P(t,i,e,s){return $(function(t,i){let e,s,n;const r=[];for(let h=0;h<t.length&&!((i-=2)<0);++h)e=t.charCodeAt(h),s=e>>8,n=e%256,r.push(n),r.push(s);return r}(i,t.length-e),t,e,s)}function I(t,e,s){return 0===e&&s===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,s))}function R(t,i,e){e=_.min(t.length,e);const s=[];let n=i;for(;n<e;){const i=t[n];let r=null,h=i>239?4:i>223?3:i>191?2:1;if(n+h<=e){let e,s,o,a;switch(h){case 1:i<128&&(r=i);break;case 2:e=t[n+1],128==(192&e)&&(a=(31&i)<<6|63&e,a>127&&(r=a));break;case 3:e=t[n+1],s=t[n+2],128==(192&e)&&128==(192&s)&&(a=(15&i)<<12|(63&e)<<6|63&s,a>2047&&(a<55296||a>57343)&&(r=a));break;case 4:e=t[n+1],s=t[n+2],o=t[n+3],128==(192&e)&&128==(192&s)&&128==(192&o)&&(a=(15&i)<<18|(63&e)<<12|(63&s)<<6|63&o,a>65535&&a<1114112&&(r=a))}}null===r?(r=65533,h=1):r>65535&&(r-=65536,s.push(r>>>10&1023|55296),r=56320|1023&r),s.push(r),n+=h}return function(t){const i=t.length;if(i<=C)return String.fromCharCode.apply(String,t);let e="",s=0;for(;s<i;)e+=String.fromCharCode.apply(String,t.slice(s,s+=C));return e}(s)}t.kMaxLength=n,h.TYPED_ARRAY_SUPPORT=function(){try{const t=new j(1),i={foo:function(){return 42}};return w.setPrototypeOf(i,j.prototype),w.setPrototypeOf(t,i),42===t.foo()}catch(t){return!1}}(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),w.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),w.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,i,e){return o(t,i,e)},w.setPrototypeOf(h.prototype,j.prototype),w.setPrototypeOf(h,j),h.alloc=function(t,i,e){return function(t,i,e){return a(t),t<=0?r(t):void 0!==i?"string"==typeof e?r(t).fill(i,e):r(t).fill(i):r(t)}(t,i,e)},h.allocUnsafe=function(t){return u(t)},h.allocUnsafeSlow=function(t){return u(t)},h.isBuffer=function(t){return null!=t&&!0===t.mv&&t!==h.prototype},h.compare=function(t,i){if(tt(t,j)&&(t=h.from(t,t.offset,t.byteLength)),tt(i,j)&&(i=h.from(i,i.offset,i.byteLength)),!h.isBuffer(t)||!h.isBuffer(i))throw new g('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===i)return 0;let e=t.length,s=i.length;for(let n=0,r=_.min(e,s);n<r;++n)if(t[n]!==i[n]){e=t[n],s=i[n];break}return e<s?-1:s<e?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,i){if(!Array.isArray(t))throw new g('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let e;if(void 0===i)for(i=0,e=0;e<t.length;++e)i+=t[e].length;const s=h.allocUnsafe(i);let n=0;for(e=0;e<t.length;++e){let i=t[e];if(tt(i,j))n+i.length>s.length?(h.isBuffer(i)||(i=h.from(i)),i.copy(s,n)):j.prototype.set.call(s,i,n);else{if(!h.isBuffer(i))throw new g('"list" argument must be an Array of Buffers');i.copy(s,n)}n+=i.length}return s},h.byteLength=f,h.prototype.mv=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<t;i+=2)p(this,i,i+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<t;i+=4)p(this,i,i+3),p(this,i+1,i+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<t;i+=8)p(this,i,i+7),p(this,i+1,i+6),p(this,i+2,i+5),p(this,i+3,i+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?R(this,0,t):v.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new g("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let i="";const e=t.INSPECT_MAX_BYTES;return i=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(i+=" ... "),"<Buffer "+i+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,i,e,s,n){if(tt(t,j)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new g('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===i&&(i=0),void 0===e&&(e=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),i<0||e>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&i>=e)return 0;if(s>=n)return-1;if(i>=e)return 1;if(this===t)return 0;let r=(n>>>=0)-(s>>>=0),o=(e>>>=0)-(i>>>=0);const a=_.min(r,o),u=this.slice(s,n),c=t.slice(i,e);for(let t=0;t<a;++t)if(u[t]!==c[t]){r=u[t],o=c[t];break}return r<o?-1:o<r?1:0},h.prototype.includes=function(t,i,e){return-1!==this.indexOf(t,i,e)},h.prototype.indexOf=function(t,i,e){return y(this,t,i,e,!0)},h.prototype.lastIndexOf=function(t,i,e){return y(this,t,i,e,!1)},h.prototype.write=function(t,i,e,s){if(void 0===i)s="utf8",e=this.length,i=0;else if(void 0===e&&"string"==typeof i)s=i,e=this.length,i=0;else{if(!isFinite(i))throw new m("Buffer.write(string, encoding, offset[, length]) is no longer supported");i>>>=0,isFinite(e)?(e>>>=0,void 0===s&&(s="utf8")):(s=e,e=void 0)}const n=this.length-i;if((void 0===e||e>n)&&(e=n),t.length>0&&(e<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let r=!1;for(;;)switch(s){case"hex":return b(this,t,i,e);case"utf8":case"utf-8":return T(this,t,i,e);case"ascii":case"latin1":case"binary":return k(this,t,i,e);case"base64":return E(this,t,i,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,i,e);default:if(r)throw new g("Unknown encoding: "+s);s=(""+s).toLowerCase(),r=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.yv||this,0)}};const C=4096;function D(t,i,e){let s="";e=_.min(t.length,e);for(let n=i;n<e;++n)s+=String.fromCharCode(127&t[n]);return s}function B(t,i,e){let s="";e=_.min(t.length,e);for(let n=i;n<e;++n)s+=String.fromCharCode(t[n]);return s}function N(t,i,e){const s=t.length;(!i||i<0)&&(i=0),(!e||e<0||e>s)&&(e=s);let n="";for(let s=i;s<e;++s)n+=et[t[s]];return n}function M(t,i,e){const s=t.slice(i,e);let n="";for(let t=0;t<s.length-1;t+=2)n+=String.fromCharCode(s[t]+256*s[t+1]);return n}function L(t,i,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+i>e)throw new RangeError("Trying to access beyond buffer length")}function O(t,i,e,s,n,r){if(!h.isBuffer(t))throw new g('"buffer" argument must be a Buffer instance');if(i>n||i<r)throw new RangeError('"value" argument is out of bounds');if(e+s>t.length)throw new RangeError("Index out of range")}function F(t,i,e,s,n){X(i,s,n,t,e,7);let r=Number(i&BigInt(4294967295));t[e++]=r,r>>=8,t[e++]=r,r>>=8,t[e++]=r,r>>=8,t[e++]=r;let h=Number(i>>BigInt(32)&BigInt(4294967295));return t[e++]=h,h>>=8,t[e++]=h,h>>=8,t[e++]=h,h>>=8,t[e++]=h,e}function U(t,i,e,s,n){X(i,s,n,t,e,7);let r=Number(i&BigInt(4294967295));t[e+7]=r,r>>=8,t[e+6]=r,r>>=8,t[e+5]=r,r>>=8,t[e+4]=r;let h=Number(i>>BigInt(32)&BigInt(4294967295));return t[e+3]=h,h>>=8,t[e+2]=h,h>>=8,t[e+1]=h,h>>=8,t[e]=h,e+8}function V(t,i,e,s,n,r){if(e+s>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function H(t,i,s,n,r){return i=+i,s>>>=0,r||V(t,0,s,4),e.write(t,i,s,n,23,4),s+4}function W(t,i,s,n,r){return i=+i,s>>>=0,r||V(t,0,s,8),e.write(t,i,s,n,52,8),s+8}h.prototype.slice=function(t,i){const e=this.length;(t=~~t)<0?(t+=e)<0&&(t=0):t>e&&(t=e),(i=void 0===i?e:~~i)<0?(i+=e)<0&&(i=0):i>e&&(i=e),i<t&&(i=t);const s=this.subarray(t,i);return w.setPrototypeOf(s,h.prototype),s},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,i,e){t>>>=0,i>>>=0,e||L(t,i,this.length);let s=this[t],n=1,r=0;for(;++r<i&&(n*=256);)s+=this[t+r]*n;return s},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,i,e){t>>>=0,i>>>=0,e||L(t,i,this.length);let s=this[t+--i],n=1;for(;i>0&&(n*=256);)s+=this[t+--i]*n;return s},h.prototype.readUint8=h.prototype.readUInt8=function(t,i){return t>>>=0,i||L(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,i){return t>>>=0,i||L(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,i){return t>>>=0,i||L(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,i){return t>>>=0,i||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,i){return t>>>=0,i||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=st(function(t){Q(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&K(t,this.length-8);const s=i+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+e*2**24;return BigInt(s)+(BigInt(n)<<BigInt(32))}),h.prototype.readBigUInt64BE=st(function(t){Q(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&K(t,this.length-8);const s=i*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+e;return(BigInt(s)<<BigInt(32))+BigInt(n)}),h.prototype.readIntLE=function(t,i,e){t>>>=0,i>>>=0,e||L(t,i,this.length);let s=this[t],n=1,r=0;for(;++r<i&&(n*=256);)s+=this[t+r]*n;return n*=128,s>=n&&(s-=_.pow(2,8*i)),s},h.prototype.readIntBE=function(t,i,e){t>>>=0,i>>>=0,e||L(t,i,this.length);let s=i,n=1,r=this[t+--s];for(;s>0&&(n*=256);)r+=this[t+--s]*n;return n*=128,r>=n&&(r-=_.pow(2,8*i)),r},h.prototype.readInt8=function(t,i){return t>>>=0,i||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,i){t>>>=0,i||L(t,2,this.length);const e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},h.prototype.readInt16BE=function(t,i){t>>>=0,i||L(t,2,this.length);const e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},h.prototype.readInt32LE=function(t,i){return t>>>=0,i||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,i){return t>>>=0,i||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=st(function(t){Q(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&K(t,this.length-8);const s=this[t+4]+256*this[t+5]+65536*this[t+6]+(e<<24);return(BigInt(s)<<BigInt(32))+BigInt(i+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),h.prototype.readBigInt64BE=st(function(t){Q(t>>>=0,"offset");const i=this[t],e=this[t+7];(void 0===i||void 0===e)&&K(t,this.length-8);const s=(i<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(s)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+e)}),h.prototype.readFloatLE=function(t,i){return t>>>=0,i||L(t,4,this.length),e.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,i){return t>>>=0,i||L(t,4,this.length),e.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,i){return t>>>=0,i||L(t,8,this.length),e.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,i){return t>>>=0,i||L(t,8,this.length),e.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,i,e,s){if(t=+t,i>>>=0,e>>>=0,!s){O(this,t,i,e,_.pow(2,8*e)-1,0)}let n=1,r=0;for(this[i]=255&t;++r<e&&(n*=256);)this[i+r]=t/n&255;return i+e},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,i,e,s){if(t=+t,i>>>=0,e>>>=0,!s){O(this,t,i,e,_.pow(2,8*e)-1,0)}let n=e-1,r=1;for(this[i+n]=255&t;--n>=0&&(r*=256);)this[i+n]=t/r&255;return i+e},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,1,255,0),this[i]=255&t,i+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,2,65535,0),this[i]=255&t,this[i+1]=t>>>8,i+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,2,65535,0),this[i]=t>>>8,this[i+1]=255&t,i+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,4,4294967295,0),this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=255&t,i+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,4,4294967295,0),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},h.prototype.writeBigUInt64LE=st(function(t,i){return void 0===i&&(i=0),F(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=st(function(t,i){return void 0===i&&(i=0),U(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(t,i,e,s){if(t=+t,i>>>=0,!s){const s=_.pow(2,8*e-1);O(this,t,i,e,s-1,-s)}let n=0,r=1,h=0;for(this[i]=255&t;++n<e&&(r*=256);)t<0&&0===h&&0!==this[i+n-1]&&(h=1),this[i+n]=(t/r|0)-h&255;return i+e},h.prototype.writeIntBE=function(t,i,e,s){if(t=+t,i>>>=0,!s){const s=_.pow(2,8*e-1);O(this,t,i,e,s-1,-s)}let n=e-1,r=1,h=0;for(this[i+n]=255&t;--n>=0&&(r*=256);)t<0&&0===h&&0!==this[i+n+1]&&(h=1),this[i+n]=(t/r|0)-h&255;return i+e},h.prototype.writeInt8=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,1,127,-128),t<0&&(t=255+t+1),this[i]=255&t,i+1},h.prototype.writeInt16LE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,2,32767,-32768),this[i]=255&t,this[i+1]=t>>>8,i+2},h.prototype.writeInt16BE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,2,32767,-32768),this[i]=t>>>8,this[i+1]=255&t,i+2},h.prototype.writeInt32LE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,4,2147483647,-2147483648),this[i]=255&t,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24,i+4},h.prototype.writeInt32BE=function(t,i,e){return t=+t,i>>>=0,e||O(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},h.prototype.writeBigInt64LE=st(function(t,i){return void 0===i&&(i=0),F(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=st(function(t,i){return void 0===i&&(i=0),U(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(t,i,e){return H(this,t,i,!0,e)},h.prototype.writeFloatBE=function(t,i,e){return H(this,t,i,!1,e)},h.prototype.writeDoubleLE=function(t,i,e){return W(this,t,i,!0,e)},h.prototype.writeDoubleBE=function(t,i,e){return W(this,t,i,!1,e)},h.prototype.copy=function(t,i,e,s){if(!h.isBuffer(t))throw new g("argument should be a Buffer");if(e||(e=0),!s&&0!==s&&(s=this.length),i>=t.length&&(i=t.length),i||(i=0),s>0&&s<e&&(s=e),s===e||0===t.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-i<s-e&&(s=t.length-i+e);const n=s-e;return this===t&&"function"==typeof j.prototype.copyWithin?this.copyWithin(i,e,s):j.prototype.set.call(t,this.subarray(e,s),i),n},h.prototype.fill=function(t,i,e,s){if("string"==typeof t){if("string"==typeof i?(s=i,i=0,e=this.length):"string"==typeof e&&(s=e,e=this.length),void 0!==s&&"string"!=typeof s)throw new g("encoding must be a string");if("string"==typeof s&&!h.isEncoding(s))throw new g("Unknown encoding: "+s);if(1===t.length){const i=t.charCodeAt(0);("utf8"===s&&i<128||"latin1"===s)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(i<0||this.length<i||this.length<e)throw new RangeError("Out of range index");if(e<=i)return this;let n;if(i>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(n=i;n<e;++n)this[n]=t;else{const r=h.isBuffer(t)?t:h.from(t,s),o=r.length;if(0===o)throw new g('The value "'+t+'" is invalid for argument "value"');for(n=0;n<e-i;++n)this[n+i]=r[n%o]}return this};const q={};function z(t,i,e){q[t]=class extends e{get code(){return t}set code(t){w.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}constructor(){super(),w.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(t,"]"),this.stack,delete this.name}}}function G(t){let i="",e=t.length;const s="-"===t[0]?1:0;for(;e>=s+4;e-=3)i="_".concat(t.slice(e-3,e)).concat(i);return"".concat(t.slice(0,e)).concat(i)}function X(t,i,e,s,n,r){if(t>e||t<i){const e="bigint"==typeof i?"n":"";let s;throw s=0===i||i===BigInt(0)?">= 0".concat(e," and < 2").concat(e," ** ").concat(8*(r+1)).concat(e):">= -(2".concat(e," ** ").concat(8*(r+1)-1).concat(e,") and < 2 ** ")+"".concat(8*(r+1)-1).concat(e),new q.ERR_OUT_OF_RANGE("value",s,t)}!function(t,i,e){Q(i,"offset"),(void 0===t[i]||void 0===t[i+e])&&K(i,t.length-(e+1))}(s,n,r)}function Q(t,i){if("number"!=typeof t)throw new q.ERR_INVALID_ARG_TYPE(i,"number",t)}function K(t,i,e){throw _.floor(t)!==t?(Q(t,e),new q.ERR_OUT_OF_RANGE("offset","an integer",t)):i<0?new q.ERR_BUFFER_OUT_OF_BOUNDS:new q.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(i),t)}z("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),z("ERR_INVALID_ARG_TYPE",function(t,i){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(typeof i)},g),z("ERR_OUT_OF_RANGE",function(t,i,e){let s='The value of "'.concat(t,'" is out of range.'),n=e;return Number.isInteger(e)&&_.abs(e)>2**32?n=G(String(e)):"bigint"==typeof e&&(n=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(n=G(n)),n+="n"),s+=" It must be ".concat(i,". Received ").concat(n),s},RangeError);const Y=/[^+/0-9A-Za-z-_]/g;function J(t,i){let e;i=i||1/0;const s=t.length;let n=null;const r=[];for(let h=0;h<s;++h){if(e=t.charCodeAt(h),e>55295&&e<57344){if(!n){if(e>56319){(i-=3)>-1&&r.push(239,191,189);continue}if(h+1===s){(i-=3)>-1&&r.push(239,191,189);continue}n=e;continue}if(e<56320){(i-=3)>-1&&r.push(239,191,189),n=e;continue}e=65536+(n-55296<<10|e-56320)}else n&&(i-=3)>-1&&r.push(239,191,189);if(n=null,e<128){if((i-=1)<0)break;r.push(e)}else if(e<2048){if((i-=2)<0)break;r.push(e>>6|192,63&e|128)}else if(e<65536){if((i-=3)<0)break;r.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new m("Invalid code point");if((i-=4)<0)break;r.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return r}function Z(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,i,e,s){let n;for(n=0;n<s&&!(n+e>=i.length||n>=t.length);++n)i[n+e]=t[n];return n}function tt(t,i){return t instanceof i||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===i.name}function it(t){return t!=t}const et=function(){const t="0123456789abcdef",i=new Array(256);for(let e=0;e<16;++e){const s=16*e;for(let n=0;n<16;++n)i[s+n]=t[e]+t[n]}return i}();function st(t){return typeof BigInt>"u"?nt:t}function nt(){throw new m("BigInt not supported")}}(oi)),oi}function zi(){if(li)return ri.exports;li=1;var t=65536;var i=(di||(di=1,function(t,i){var e=qi(),s=e.Buffer;function n(t,i){for(var e in t)i[e]=t[e]}function r(t,i,e){return s(t,i,e)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=e:(n(e,i),i.Buffer=r),r.prototype=w.create(s.prototype),n(s,r),r.from=function(t,i,e){if("number"==typeof t)throw new g("Argument must not be a number");return s(t,i,e)},r.alloc=function(t,i,e){if("number"!=typeof t)throw new g("Argument must be a number");var n=s(t);return void 0!==i?"string"==typeof e?n.fill(i,e):n.fill(i):n.fill(0),n},r.allocUnsafe=function(t){if("number"!=typeof t)throw new g("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new g("Argument must be a number");return e.SlowBuffer(t)}}(hi,hi.exports)),hi.exports).Buffer,e=A.crypto||A.msCrypto;return e&&e.getRandomValues?ri.exports=function(s,n){if(s>4294967295)throw new RangeError("requested too many random bytes");var r=i.allocUnsafe(s);if(s>0)if(s>t)for(var h=0;h<s;h+=t)e.getRandomValues(r.slice(h,h+t));else e.getRandomValues(r);return"function"==typeof n?process.nextTick(function(){n(null,r)}):r}:ri.exports=function(){throw new m("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")},ri.exports}function Gi(){if(vi)return fi;vi=1;const t=zi();class i{clone(){const t=new i(this.ufrag,this.pwd);return t.setLite(this.lite),t.setEndOfCandidates(this.endOfCandidates),t}plain(){const t={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(t.lite=this.lite),this.endOfCandidates&&(t.endOfCandidates=this.endOfCandidates),t}getUfrag(){return this.ufrag}getPwd(){return this.pwd}isLite(){return this.lite}setLite(t){this.lite=t}isEndOfCandidates(){return this.endOfCandidates}setEndOfCandidates(t){this.endOfCandidates=t}constructor(t,i){this.ufrag=t,this.pwd=i,this.lite=!1,this.endOfCandidates=!1}}return i.generate=function(e){const s=new i,n=t(8),r=t(24);return s.ufrag=n.toString("hex"),s.pwd=r.toString("hex"),s.lite=e,s},i.expand=function(t){if("ICEInfo"===t.constructor.name)return t;const e=new i(t.ufrag,t.pwd);return e.setLite(t.lite),e.setEndOfCandidates(t.endOfCandidates),e},i.clone=function(t){return"ICEInfo"===t.constructor.name?t.clone():i.expand(t)},fi=i}function Xi(){if(gi)return _i;gi=1;const t=ti()("SEND","RECV");return t.byValue=function(i){return t[i.toUpperCase()]},t.toString=function(i){switch(i){case t.SEND:return"send";case t.RECV:return"recv"}},t.reverse=function(i){switch(i){case t.SEND:return t.RECV;case t.RECV:return t.SEND}},_i=t}function ji(){if(mi)return pi;mi=1;const t=Xi();class i{clone(){var t=new i(this.id,this.direction);return t.setFormats(this.formats),t.setParams(this.params),t}plain(){var i={id:this.id,direction:t.toString(this.direction)};for(var[e,s]of(this.formats&&(i.formats=this.formats),this.params.entries()))i.params||(i.params={}),i.params[e]=s;return i}getId(){return this.id}getDirection(){return this.direction}setDirection(t){this.direction=t}getFormats(){return this.formats}setFormats(t){this.formats=[];for(let i=0;i<t.length;++i)this.formats.push(x(t[i]))}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,i){this.params.set(t,i)}constructor(t,i){this.id=t,this.direction=i,this.formats=[],this.params=new Map}}return i.expand=function(e){if("RIDInfo"===e.constructor.name)return e;const s=new i(e.id,t.byValue(e.direction));for(const[t,i]of w.entries(e.params||{}))s.addParam(t,i);return e.formats&&s.setFormats(e.formats),s},i.clone=function(t){return"RIDInfo"===t.constructor.name?t.clone():i.expand(t)},pi=i}function Qi(){if(yi)return wi;yi=1;class t{clone(){return new t(this.id,this.paused)}plain(){return{id:this.id,paused:this.paused}}isPaused(){return this.paused}getId(){return this.id}constructor(t,i){this.paused=i,this.id=t}}return t.expand=function(i){return"SimulcastStreamInfo"===i.constructor.name?i:new t(i.id,i.paused)},t.clone=function(i){return"SimulcastStreamInfo"===i.constructor.name?i.clone():t.expand(i)},wi=t}function Ki(){if(bi)return Ai;bi=1;const t=Qi(),i=Xi();class e{clone(){const t=new e;for(const e of this.send)t.addSimulcastAlternativeStreams(i.SEND,e.map(t=>t.clone()));for(const e of this.recv)t.addSimulcastAlternativeStreams(i.RECV,e.map(t=>t.clone()));return t}plain(){const t={send:[],recv:[]};for(const i of this.send)t.send.push(i.map(t=>t.plain()));for(const i of this.recv)t.recv.push(i.map(t=>t.plain()));return t}addSimulcastAlternativeStreams(t,e){return t===i.SEND?this.send.push(e):this.recv.push(e)}addSimulcastStream(t,e){return t===i.SEND?this.send.push([e]):this.recv.push([e])}getSimulcastStreams(t){return t===i.SEND?this.send:this.recv}constructor(){this.send=[],this.recv=[]}}return e.expand=function(s){if("SimulcastInfo"===s.constructor.name)return s;const n=new e;for(const e of s.send||[])n.addSimulcastAlternativeStreams(i.SEND,e.map(t.expand));for(const e of s.recv||[])n.addSimulcastAlternativeStreams(i.RECV,e.map(t.expand));return n},e.clone=function(t){return"SimulcastInfo"===t.constructor.name?t.clone():e.expand(t)},Ai=e}function Yi(){if(Ti)return Si;Ti=1;const t=ti()("SENDRECV","SENDONLY","RECVONLY","INACTIVE");return t.byValue=function(i){return t[i.toUpperCase()]},t.toString=function(i){switch(i){case t.SENDRECV:return"sendrecv";case t.SENDONLY:return"sendonly";case t.RECVONLY:return"recvonly";case t.INACTIVE:return"inactive"}},t.reverse=function(i){switch(i){case t.SENDRECV:return t.SENDRECV;case t.SENDONLY:return t.RECVONLY;case t.RECVONLY:return t.SENDONLY;case t.INACTIVE:return t.INACTIVE}},Si=t}function Ji(){if(Ei)return ki;Ei=1;class t{clone(){return new t(this.port,this.maxMessageSize)}plain(){return{port:this.port,maxMessageSize:this.maxMessageSize}}getPort(){return this.port}getMaxMessageSize(){return this.maxMessageSize}constructor(t,i){this.port=t,this.maxMessageSize=i}}return t.expand=function(i){return"DataChannelInfo"===i.constructor.name?i:new t(i.port,i.maxMessageSize)},t.clone=function(i){return"DataChannelInfo"===i.constructor.name?i.clone():t.expand(i)},ki=t}function Zi(){if(xi)return Pi;xi=1;const t=$t(),i=ji(),e=Ki(),s=Yi(),n=Xi();Zt();const r=Ji();class h{clone(){const t=new h(this.id,this.type);t.setDirection(this.direction),t.setBitrate(this.bitrate);for(const i of this.codecs.values())t.addCodec(i.clone());for(const[i,e]of this.extensions.entries())t.addExtension(i,e);for(const i of this.rids.values())t.addRID(i.clone());return this.simulcast&&t.setSimulcast(this.simulcast.clone()),this.control&&t.setControl(this.control),this.dataChannel&&t.setDataChannel(this.dataChannel.clone()),t}plain(){const t={id:this.id,type:this.type,direction:s.toString(this.direction),codecs:[]};this.dataChannel&&(t.dataChannel=this.dataChannel.plain()),this.bitrate&&(t.bitrate=this.bitrate);for(const i of this.codecs.values())t.codecs.push(i.plain());for(const[i,e]of this.extensions.entries())t.extensions||(t.extensions={}),t.extensions[i]=e;for(const i of this.rids.values())t.rids||(t.rids=[]),t.rids.push(i.plain());return this.simulcast&&(t.simulcast=this.simulcast.plain()),this.control&&(t.control=this.control),t}getType(){return this.type}getId(){return this.id}setId(t){this.id=t}addExtension(t,i){this.extensions.set(t,i)}addRID(t){this.rids.set(t.getId(),t)}addCodec(t){this.codecs.set(t.getType(),t)}setCodecs(t){this.codecs=t}getCodecForType(t){return this.codecs.get(t)}getCodec(t){for(const i of this.codecs.values())if(i.getCodec().toLowerCase()===t.toLowerCase())return i;return null}hasCodec(t){return null!==this.getCodec(t)}getCodecs(){return this.codecs}hasRTX(){for(const t of this.codecs.values())if(t.hasRTX())return!0;return!1}getExtensions(){return this.extensions}getRIDs(){return this.rids}getRID(t){return this.rids.get(t)}getBitrate(){return this.bitrate}setBitrate(t){this.bitrate=t}getDirection(){return this.direction}setDirection(t){this.direction=t}hasControl(){return!!this.control}getControl(){return this.control}setControl(t){this.control=t}hasDataChannel(){return!!this.dataChannel}getDataChannel(){return this.dataChannel}setDataChannel(t){this.dataChannel=t}answer(i){const o=new h(this.id,this.type);if(i){o.setDirection(s.reverse(this.direction));const{codecs:h,dataChannel:a}=i;if(h){let e;e=Array.isArray(h)?t.MapFromNames(h,i.rtx,i.rtcpfbs):h;for(let t of this.codecs.values())for(let i of e.values()){if(i.getCodec().toLowerCase()!==t.getCodec().toLowerCase()||"h264"===i.getCodec()&&i.hasParam("packetization-mode")&&i.getParam("packetization-mode")!=t.getParam("packetization-mode","0")||"h264"===i.getCodec()&&i.hasParam("profile-level-id")&&t.hasParam("profile-level-id")&&i.getParam("profile-level-id")!=t.getParam("profile-level-id")||"multiopus"===i.getCodec()&&i.hasParam("num_streams")&&t.hasParam("num_streams")&&i.getParam("num_streams")!=t.getParam("num_streams"))continue;const e=i.clone();e.setType(t.getType()),e.hasRTX()&&e.setRTX(t.getRTX()),t.hasChannels()&&e.setChannels(t.getChannels()),e.addParams(t.getParams()),o.addCodec(e);break}}const u=new Set(i.extensions);for(let[t,i]of this.extensions)u.has(i)&&o.addExtension(t,i);if(i.simulcast&&this.simulcast){const t=new e,i=this.simulcast.getSimulcastStreams(n.SEND);if(i)for(const e of i){const i=e.map(t=>t.clone());t.addSimulcastAlternativeStreams(n.RECV,i)}const s=this.simulcast.getSimulcastStreams(n.RECV);if(s)for(const i of s){const e=i.map(t=>t.clone());t.addSimulcastAlternativeStreams(n.SEND,e)}for(const t of this.rids.values()){const i=t.clone();i.setDirection(n.reverse(t.getDirection())),o.addRID(i)}o.setSimulcast(t)}if(a&&this.dataChannel){const t=new r(this.dataChannel.getPort(),a.maxMessageSize?a.maxMessageSize:this.dataChannel.getMaxMessageSize());o.setDataChannel(t)}}else o.setDirection(s.INACTIVE);return o}getSimulcast(){return this.simulcast}setSimulcast(t){this.simulcast=t}constructor(t,i){this.id=t,this.type=i,this.direction=s.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.bitrate=0,this.control=null,this.dataChannel=null}}function o(t){const i=t.toString();if(!/^\d+$/.test(i))throw new m("invalid integer ".concat(i));return x(i)}return h.create=function(i,e,n){!n&&"string"!=typeof e&&(n=e,e=i);const r=new h(i,e);if(n){const{codecs:i}=n;i&&(Array.isArray(i)?r.setCodecs(t.MapFromNames(i,n.rtx,n.rtcpfbs)):r.setCodecs(i))}else r.setDirection(s.INACTIVE);return r},h.expand=function(n){if("MediaInfo"===n.constructor.name)return n;const a=new h(n.id,n.type);if(n.direction&&a.setDirection(s.byValue(n.direction)),a.setBitrate(n.bitrate),n.dataChannel){const t=r.expand(n.dataChannel);t&&a.setDataChannel(t)}for(const[t,i]of w.entries(n.extensions))a.addExtension(o(t),i);for(const i of n.codecs){const e=t.expand(i);e&&a.addCodec(e)}for(const t of n.rids||[]){const e=i.expand(t);a.addRID(e)}return n.simulcast&&a.setSimulcast(e.expand(n.simulcast)),n.control&&a.setControl(n.control),a},h.clone=function(t){return"MediaInfo"===t.constructor.name?t.clone():h.expand(t)},Pi=h}function $i(){if(Ri)return Ii;Ri=1;class t{clone(){return new t(this.semantics,this.ssrcs)}plain(){const t={semantics:this.semantics,ssrcs:[]};for(let i=0;i<this.ssrcs.length;++i)t.ssrcs.push(this.ssrcs[i]);return t}getSemantics(){return this.semantics}getSSRCs(){return this.ssrcs}constructor(t,i){this.semantics=t,this.ssrcs=[];for(let t=0;t<i.length;++t)this.ssrcs.push(x(i[t]))}}return t.expand=function(i){return"SourceGroupInfo"===i.constructor.name?i:new t(i.semantics,i.ssrcs)},t.clone=function(i){return"SourceGroupInfo"===i.constructor.name?i.clone():t.expand(i)},Ii=t}function te(){if(Di)return Ci;Di=1;class t{clone(){const i=new t(this.ssrc);return i.setCName(this.cname),i.setStreamId(this.streamId),i.setTrackId(this.trackId),i}plain(){const t={ssrc:this.ssrc};return this.cname&&(t.cname=this.cname),this.streamId&&(t.streamId=this.streamId),this.trackId&&(t.trackId=this.trackId),t}getCName(){return this.cname}setCName(t){this.cname=t}getStreamId(){return this.streamId}setStreamId(t){this.streamId=t}getTrackId(){return this.trackId}setTrackId(t){this.trackId=t}getSSRC(){return this.ssrc}constructor(t){this.ssrc=t}}return t.expand=function(i){if("SourceInfo"===i.constructor.name)return i;const e=new t(i.ssrc);return e.setCName(i.cname),e.setStreamId(i.streamId),e.setTrackId(i.trackId),e},t.clone=function(i){return"SourceInfo"===i.constructor.name?i.clone():t.expand(i)},Ci=t}function ie(){if(Ni)return Bi;Ni=1;const t=$t();class i{clone(){var t=new i(this.id,this.paused);for(let i of this.codecs.values())t.addCodec(i.clone());return t.setParams(this.params),t}plain(){var t={id:this.id,paused:this.paused,codecs:{},params:{}};for(var[i,e]of this.codecs.entries())t.codecs[i]=e.plain();for(var[i,s]of this.params.entries())t.params[i]=s;return t}getId(){return this.id}getCodecs(){return this.codecs}addCodec(t){this.codecs.set(t.getType(),t)}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,i){this.params.set(t,i)}isPaused(){return this.paused}constructor(t,i=!1){this.id=t,this.paused=i,this.codecs=new Map,this.params=new Map}}return i.expand=function(e){if("TrackEncodingInfo"===e.constructor.name)return e;const s=new i(e.id,e.paused);for(const i of w.values(e.codecs||{}))s.addCodec(t.expand(i));for(const[t,i]of w.entries(e.params||{}))s.addParam(t,i);return s},i.clone=function(t){return"TrackEncodingInfo"===t.constructor.name?t.clone():i.expand(t)},Bi=i}function ee(){if(Li)return Mi;Li=1;const t=$i(),i=ie();class e{clone(){const t=new e(this.media,this.id);this.mediaId&&t.setMediaId(this.mediaId);for(let i=0;i<this.ssrcs.length;++i)t.addSSRC(this.ssrcs[i]);for(let i=0;i<this.groups.length;++i)t.addSourceGroup(this.groups[i].clone());for(let i=0;i<this.encodings.length;++i){const e=[];for(let t=0;t<this.encodings[i].length;++t)e.push(this.encodings[i][t].clone());t.addAlternativeEncodings(e)}return t}plain(){const t={media:this.media,id:this.id,ssrcs:[]};this.mediaId&&(t.mediaId=this.mediaId);for(let i=0;i<this.ssrcs.length;++i)t.ssrcs.push(this.ssrcs[i]);for(let i=0;i<this.groups.length;++i)t.groups||(t.groups=[]),t.groups.push(this.groups[i].plain());for(let i=0;i<this.encodings.length;++i){const e=[];for(let t=0;t<this.encodings[i].length;++t)e.push(this.encodings[i][t].plain());e.length&&(t.encodings||(t.encodings=[]),t.encodings.push(e))}return t}getMedia(){return this.media}setMediaId(t){this.mediaId=t}getMediaId(){return this.mediaId}getId(){return this.id}addSSRC(t){this.ssrcs.push(t)}getSSRCs(){return this.ssrcs}addSourceGroup(t){this.groups.push(t)}getSourceGroup(t){for(const i of this.groups)if(i.getSemantics().toLowerCase()===t.toLowerCase())return i;return null}getSourceGroups(){return this.groups}getSourceGroupsForMediaSSRC(t){return this.groups.filter(i=>i.getSSRCs()[0]===t)}hasSourceGroup(t){for(const i of this.groups)if(i.getSemantics().toLowerCase()===t.toLowerCase())return!0;return!1}getEncodings(){return this.encodings}addEncoding(t){this.encodings.push([t])}addAlternativeEncodings(t){this.encodings.push(t)}setEncodings(t){this.encodings=t}getEncodingSources(){const t=[];if(this.encodings.length)for(const i of this.encodings)for(const e of i){const i={id:e.getId(),rid:e.getId()},s=e.getParams(),n=null==s?void 0:s.get("ssrc");if(void 0!==n){i.media=x(n);for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}}t.push(i)}else if(this.hasSourceGroup("SIM")){const i=this.getSourceGroup("SIM").getSSRCs();this.getSourceGroups();for(const e of i){const i={id:String(e),media:e};for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}t.push(i)}}else{const i={id:""};if(this.ssrcs.length){i.media=this.ssrcs[0];for(const t of this.getSourceGroupsForMediaSSRC(i.media))switch(t.getSemantics()){case"FID":i.rtx=t.getSSRCs()[1];break;case"FEC-FR":i.fec=t.getSSRCs()[1]}}t.push(i)}return t}constructor(t,i){this.media=t,this.id=i,this.ssrcs=[],this.groups=[],this.encodings=[]}}return e.expand=function(s){var n,r;if("TrackInfo"===s.constructor.name)return s;const h=new e(s.media,s.id);if(s.mediaId&&h.setMediaId(s.mediaId),Array.isArray(s.ssrcs))for(const t of s.ssrcs)h.addSSRC(t);else if(void 0!==(null===(n=s.ssrcs)||void 0===n?void 0:n.media)){const i=s.ssrcs.media;if(h.addSSRC(i),void 0!==s.ssrcs.rtx){const e=s.ssrcs.rtx;h.addSSRC(e),h.addSourceGroup(new t("FID",[i,e]))}if(void 0!==s.ssrcs.fec){const e=s.ssrcs.fec;h.addSSRC(e),h.addSourceGroup(new t("FEC-FR",[i,e]))}}if(s.rid){const t=new i(s.rid);void 0!==(null===(r=s.ssrcs)||void 0===r?void 0:r.media)&&t.addParam("ssrc",s.ssrcs.media),h.addAlternativeEncodings([t])}for(const i of s.groups||[])h.addSourceGroup(t.expand(i));for(const t of s.encodings||[]){const e=[];for(const s of t)e.push(i.expand(s));h.addAlternativeEncodings(e)}return h},e.clone=function(t){return"TrackInfo"===t.constructor.name?t.clone():e.expand(t)},Mi=e}function se(){if(Fi)return Oi;Fi=1;const t=ee();class i{clone(){const t=new i(this.id);for(const i of this.tracks.values())t.addTrack(i.clone());return t}plain(){const t={id:this.id,tracks:[]};for(const i of this.tracks.values())t.tracks.push(i.plain());return t}getId(){return this.id}addTrack(t){this.tracks.set(t.getId(),t)}removeTrack(t){return this.tracks.delete(t.getId())}removeTrackById(t){return this.tracks.delete(t)}getFirstTrack(t){for(let i of this.tracks.values())if(i.getMedia().toLowerCase()===t.toLowerCase())return i;return null}getTracks(){return this.tracks}removeAllTracks(){this.tracks.clear()}getTrack(t){return this.tracks.get(t)}constructor(t){this.id=t,this.tracks=new Map}}return i.expand=function(e){if("StreamInfo"===e.constructor.name)return e;const s=new i(e.id);for(const i of e.tracks||[]){const e=t.expand(i);e&&s.addTrack(e)}return s},i.clone=function(t){return"StreamInfo"===t.constructor.name?t.clone():i.expand(t)},Oi=i}function ne(){if(Vi)return Ui;Vi=1;const t=function(){if(Pt)return Gt;Pt=1;var t=Kt(),i=Yt();return Gt.write=i,Gt.parse=t.parse,Gt.parseParams=t.parseParams,Gt.parseFmtpConfig=t.parseFmtpConfig,Gt.parsePayloads=t.parsePayloads,Gt.parseRemoteCandidates=t.parseRemoteCandidates,Gt.parseImageAttributes=t.parseImageAttributes,Gt.parseSimulcastStreamList=t.parseSimulcastStreamList,Gt}(),i=(It||(It=1,xt=function(t){const i=new Intl.Collator(t,{sensitivity:"base"});return(t,e)=>0==i.compare(t,e)}),xt)("en-US"),e=Jt(),s=$t(),n=Zt(),r=ei(),h=si(),o=Gi(),a=Zi(),u=ii(),c=Yi(),d=Xi(),l=$i(),f=te(),v=se(),_=ee(),g=ie(),p=Ki(),m=Qi(),y=ji(),A=Ji();class b{clone(){const t=new b(this.version);for(const i of this.medias)t.addMedia(i.clone());for(const i of this.streams.values())t.addStream(i.clone());for(const i of this.candidates)t.addCandidate(i.clone());return t.setICE(this.ice.clone()),this.dtls&&t.setDTLS(this.dtls.clone()),this.crypto&&t.setCrypto(this.crypto.clone()),t.setExtmapAllowMixed(this.extmapAllowMixed),t}plain(){const t={version:this.version,streams:[],medias:[],candidates:[]};for(const i of this.medias)t.medias.push(i.plain());for(const i of this.streams.values())t.streams.push(i.plain());for(const i of this.candidates)t.candidates.push(i.plain());return this.ice&&(t.ice=this.ice.plain()),this.dtls&&(t.dtls=this.dtls.plain()),this.crypto&&(t.crypto=this.crypto.plain()),this.extmapAllowMixed||(t.extmapAllowMixedNotSupported=!this.extmapAllowMixed),t}unify(){const t=new b(this.version);for(const i of this.medias)t.addMedia(i.clone());const i={audio:t.getMediasByType("audio"),video:t.getMediasByType("video")};for(const e of this.streams.values()){const s=e.clone();for(const e of s.getTracks().values()){let s=i[e.getMedia()].pop();s||(s=this.getMedia(e.getMedia()).clone(),s.setId(e.getId()),t.addMedia(s)),e.setMediaId(s.getId())}t.addStream(s)}for(const i of this.candidates)t.addCandidate(i.clone());return this.ice&&t.setICE(this.ice.clone()),this.dtls&&t.setDTLS(this.dtls.clone()),this.crypto&&t.setCrypto(this.crypto.clone()),t}setVersion(t){this.version=t}addMedia(t){this.medias.push(t)}getMedia(t){for(let e in this.medias){let s=this.medias[e];if(i(s.getType(),t))return s}return null}getMediasByType(t){let e=[];for(let s in this.medias){let n=this.medias[s];i(n.getType(),t)&&e.push(n)}return e}getMediaById(t){for(const e of this.medias)if(i(e.getId(),t))return e;return null}replaceMedia(t){for(let i in this.medias)if(this.medias[i].getId()==t.getId())return this.medias[i]=t,!0;return!1}getMedias(){return this.medias}getVersion(){return this.version}getDTLS(){return this.dtls}setDTLS(t){this.dtls=t}hasCrypto(){return!!this.crypto}getCrypto(){return this.crypto}setCrypto(t){this.crypto=t}hasICE(){return!!this.ice}getICE(){return this.ice}setICE(t){this.ice=t}addCandidate(t){for(const i of this.candidates)if(i.equals(t))return;this.candidates.push(t)}addCandidates(t){for(const i of t)this.addCandidate(i)}getCandidates(){return this.candidates}getStream(t){return this.streams.get(t)}getStreams(){return this.streams}getFirstStream(){for(const t of this.streams.values())return t;return null}addStream(t){this.streams.set(t.getId(),t)}removeStream(t){return this.streams.delete(t.getId())}removeAllStreams(){this.streams.clear()}getTracksByMediaType(t){let e=[];for(const s of this.streams.values())for(const[n,r]of s.getTracks())i(r.getMedia(),t)&&e.push(r);return e}getTrackByMediaId(t){for(const i of this.streams.values())for(const[e,s]of i.getTracks())if(s.getMediaId()==t)return s;return null}getStreamByMediaId(t){for(const i of this.streams.values())for(const[e,s]of i.getTracks())if(s.getMediaId()==t)return i;return null}getExtmapAllowMixed(){return this.extmapAllowMixed}setExtmapAllowMixed(t){this.extmapAllowMixed=t}answer(t){const i=new b;t.ice&&(t.ice instanceof o?i.setICE(t.ice.clone()):i.setICE(o.expand(t.ice))),t.dtls&&(t.dtls instanceof r?i.setDTLS(t.dtls):i.setDTLS(r.expand(t.dtls))),t.crypto&&(t.crypto instanceof h?i.setCrypto(t.crypto):i.setCrypto(h.expand(t.crypto)));for(let s=0;t.candidates&&s<t.candidates.length;++s)t.candidates[s]instanceof e?i.addCandidate(t.candidates[s].clone()):i.addCandidate(e.expand(t.candidates[s]));for(const e of this.medias){const s=t&&t.capabilities&&t.capabilities[e.getType()];i.addMedia(e.answer(s))}return i.setExtmapAllowMixed(this.extmapAllowMixed),i}toString(){let e={version:0,media:[]};e.version=0,e.origin={username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},e.name="semantic-sdp",e.connection={version:4,ip:"0.0.0.0"},e.timing={start:0,stop:0},this.hasICE()&&this.getICE().isLite()&&(e.icelite="ice-lite"),e.msidSemantic={semantic:"WMS",token:"*"},e.groups=[],this.extmapAllowMixed&&(e.extmapAllowMixed="extmap-allow-mixed");const s=[];for(const t of this.medias){let n={type:t.getType(),port:9,protocol:"",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};n.direction=c.toString(t.getDirection()),this.extmapAllowMixed&&(n.extmapAllowMixed="extmap-allow-mixed"),n.mid=t.getId(),s.push(t.getId()),t.hasControl()&&(n.control=t.getControl()),t.getBitrate()>0&&(n.bandwidth.push({type:"AS",limit:t.getBitrate()}),n.bandwidth.push({type:"TIAS",limit:1e3*t.getBitrate()}));let r=this.getCandidates();for(const t of r)n.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});if(this.getICE()&&(n.iceUfrag=this.getICE().getUfrag(),n.icePwd=this.getICE().getPwd()),i("audio",t.getType())||i("video",t.getType())){n.rtcpMux="rtcp-mux",n.rtcpRsize="rtcp-rsize",this.getDTLS()?(n.protocol="UDP/TLS/RTP/SAVPF",n.fingerprint={type:this.getDTLS().getHash(),hash:this.getDTLS().getFingerprint()},n.setup=u.toString(this.getDTLS().getSetup())):this.getCrypto()?(n.protocol="RTP/SAVPF",n.crypto=[{id:this.getCrypto().getTag(),suite:this.getCrypto().getSuite(),config:this.getCrypto().getKeyParams()}]):n.protocol="RTP/AVP";for(const e of t.getCodecs().values()){i("video",t.getType())?n.rtp.push({payload:e.getType(),codec:e.getCodec().toUpperCase(),rate:9e4}):i("opus",e.getCodec())||i("multiopus",e.getCodec())?n.rtp.push({payload:e.getType(),codec:e.getCodec(),rate:48e3,encoding:e.getChannels()}):n.rtp.push({payload:e.getType(),codec:e.getCodec(),rate:8e3});for(const t of e.getRTCPFeedbacks())n.rtcpFb.push({payload:e.getType(),type:t.getId(),subtype:t.getParams().join(" ")});e.hasRTX()&&(n.rtp.push({payload:e.getRTX(),codec:"rtx",rate:9e4}),n.fmtp.push({payload:e.getRTX(),config:"apt="+e.getType()}));const s=e.getParams();if(w.keys(s).length){const t={payload:e.getType(),config:""};for(const i in s)t.config.length&&(t.config+=";"),w.hasOwnProperty.call(s,i)?t.config+=i+"="+s[i]:t.config+=i;n.fmtp.push(t)}}const e=[];for(const t of n.rtp)e.push(t.payload);n.payloads=e.join(" ");for(let[i,e]of t.getExtensions().entries())n.ext.push({value:i,uri:e});for(let i of t.getRIDs().values()){let t={id:i.getId(),direction:d.toString(i.getDirection()),params:""};i.getFormats().length&&(t.params="pt="+i.getFormats().join(","));for(let[e,s]of i.getParams().entries())t.params+=(t.params.length?";":"")+e+"="+s;n.rids.push(t)}const s=t.getSimulcast();if(s){let t=1;n.simulcast={};const i=s.getSimulcastStreams(d.SEND),e=s.getSimulcastStreams(d.RECV);if(i&&i.length){let e="";for(const t of i){let i="";for(const e of t)i+=(i.length?",":"")+(e.isPaused()?"~":"")+e.getId();e+=(e.length?";":"")+i}n.simulcast["dir"+t]="send",n.simulcast["list"+t]=e,t++}if(e&&e.length){let i="";for(const t of e){let e="";for(const i of t)e+=(e.length?",":"")+(i.isPaused()?"~":"")+i.getId();i+=(i.length?";":"")+e}n.simulcast["dir"+t]="recv",n.simulcast["list"+t]=i,t++}}}else if(t.hasDataChannel()){n.protocol="UDP/DTLS/SCTP",n.payloads="webrtc-datachannel";const i=t.getDataChannel();n.sctpPort=i.getPort(),n.maxMessageSize=i.getMaxMessageSize()}e.media.push(n)}for(let t of this.streams.values())for(let s of t.getTracks().values())for(let n in e.media){let r=e.media[n];if(s.getMediaId()){if(s.getMediaId()==r.mid){let i=s.getSourceGroups();for(let t in i){let e=i[t];r.ssrcGroups.push({semantics:e.getSemantics(),ssrcs:e.getSSRCs().join(" ")})}let e=s.getSSRCs();for(let i in e)r.ssrcs.push({id:e[i],attribute:"cname",value:t.getId()}),r.ssrcs.push({id:e[i],attribute:"msid",value:t.getId()+" "+s.getId()});r.msid=t.getId()+" "+s.getId();break}}else if(i(r.type,s.getMedia())){let i=s.getSourceGroups();for(let t in i){let e=i[t];r.ssrcGroups.push({semantics:e.getSemantics(),ssrcs:e.getSSRCs().join(" ")})}let e=s.getSSRCs();for(let i in e)r.ssrcs.push({id:e[i],attribute:"cname",value:t.getId()}),r.ssrcs.push({id:e[i],attribute:"msid",value:t.getId()+" "+s.getId()});break}}const n={type:"BUNDLE",mids:s.join(" ")};return e.groups.push(n),t.write(e)}toIceFragmentString(){let i={version:0,media:[],candidates:[]};this.hasICE()&&this.getICE().isLite()&&(i.icelite="ice-lite"),this.getICE()&&(i.iceUfrag=this.getICE().getUfrag(),i.icePwd=this.getICE().getPwd());for(const t of this.getCandidates())i.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});return t.write(i).slice(10)}constructor(t){this.version=t||1,this.streams=new Map,this.medias=new Array,this.candidates=new Array,this.ice=null,this.dtls=null,this.crypto=null,this.extmapAllowMixed=!0}}return b.create=function(t){var i;const s=new b;if(t.streams)for(const i of t.streams)s.addStream(v.expand(i));t.ice&&(t.ice instanceof o?s.setICE(t.ice.clone()):s.setICE(o.expand(t.ice))),t.dtls&&(t.dtls instanceof r?s.setDTLS(t.dtls):s.setDTLS(r.expand(t.dtls))),t.crypto&&(t.crypto instanceof h?s.setCrypto(t.crypto):s.setCrypto(h.expand(t.crypto)));for(const i of t.candidates||[])i instanceof e?s.addCandidate(i.clone()):s.addCandidate(e.expand(i));let n=96,u=1,c=0;for(const[e,r]of w.entries(t.capabilities||{}))if(t.unified&&null!==(i=t.streams)&&void 0!==i&&i.length)for(const t of s.getTracksByMediaType(e)){const i=a.create(t.getMediaId(),e,r);for(const[t,e]of i.getCodecs())e.getType()>=96&&e.setType(n++),e.getRTX()&&e.setRTX(n++);if(r.extensions)for(let t of r.extensions)15===u&&u++,i.addExtension(u++,t);s.addMedia(i)}else{const i=a.create(t.unified?String(c++):e,e,r);for(const[t,e]of i.getCodecs())e.getType()>=96&&e.setType(n++),e.getRTX()&&e.setRTX(n++);if(r.extensions)for(let t of r.extensions)15===u&&u++,i.addExtension(u++,t);s.addMedia(i)}return s},b.expand=function(t){if("SDPInfo"===t.constructor.name)return t;const i=new b(t.version);for(const e of t.medias||[]){const t=a.expand(e);t&&i.addMedia(t)}for(const e of t.streams||[]){const t=v.expand(e);t&&i.addStream(t)}for(const s of t.candidates||[]){const t=e.expand(s);t&&i.addCandidate(t)}return t.ice&&i.setICE(o.expand(t.ice)),t.dtls&&i.setDTLS(r.expand(t.dtls)),t.crypto&&i.setCrypto(h.expand(t.crypto)),t.extmapAllowMixedNotSupported&&(this.extmapAllowMixed=!t.extmapAllowMixedNotSupported),i},b.clone=function(t){return"SDPInfo"===t.constructor.name?t.clone():b.expand(t)},b.process=function(t){return b.parse(t)},b.parse=function(w){const S=t.parse(w),T=new b;if(T.setVersion(S.version),S.iceUfrag&&S.icePwd){const t=String(S.iceUfrag),i=String(S.icePwd),e=new o(t,i);e.setLite("ice-lite"==S.icelite),e.setEndOfCandidates("end-of-candidates"==S.endOfCandidates),T.setICE(e)}for(let w in S.media){const b=S.media[w],k=b.type,E=b.mid?b.mid.toString():w,P=new a(E,k);if(b.iceUfrag&&b.icePwd){const t=String(b.iceUfrag),i=String(b.icePwd),e=new o(t,i);e.setLite("ice-lite"==S.icelite),e.setEndOfCandidates("end-of-candidates"==b.endOfCandidates),T.setICE(e)}for(let t=0;b.candidates&&t<b.candidates.length;++t){const i=b.candidates[t],s=new e(i.foundation,i.component,i.transport,i.priority,i.ip,i.port,i.type,i.raddr,i.rport);T.addCandidate(s)}const I=b.fingerprint||S.fingerprint;if(I){const t=I.type,i=I.hash;let e=u.ACTPASS;b.setup&&(e=u.byValue(b.setup)),T.setDTLS(new r(e,t,i))}if(b.crypto){const t=b.crypto[0];T.setCrypto(new h(t.id,t.suite,t.config,t.sessionConfig))}let R=c.SENDRECV;b.direction&&(R=c.byValue(b.direction),P.setDirection(R)),b.control&&P.setControl(b.control),T.setExtmapAllowMixed("extmap-allow-mixed"==b.extmapAllowMixed||"extmap-allow-mixed"==S.extmapAllowMixed);const C=new Map;for(let t in b.rtp){const i=b.rtp[t],e=i.payload,n=i.codec;if("RED"===n.toUpperCase()||"ULPFEC"===n.toUpperCase())continue;let r={};for(let t in b.fmtp){const i=b.fmtp[t];if(i.payload===e){const t=i.config.split(";");for(let i in t){const e=t[i].split("="),s=e[0].trim(),n=e.splice(1).join("=").trim();r[s]=n}}}if("RTX"===n.toUpperCase())C.set(x(r.apt),e);else{const t=new s(n,e,r);i.encoding>1&&t.setChannels(i.encoding),P.addCodec(t)}}for(let t of C.entries()){const i=P.getCodecForType(t[0]);i&&i.setRTX(t[1])}for(let t=0;b.rtcpFb&&t<b.rtcpFb.length;++t){const i=P.getCodecForType(b.rtcpFb[t].payload);if(i){const e=b.rtcpFb[t].type,s=b.rtcpFb[t].subtype?b.rtcpFb[t].subtype.split(" "):null;i.addRTCPFeedback(new n(e,s))}}const D=b.ext;for(let t in D){const i=D[t];P.addExtension(i.value,i.uri)}const B=b.rids;for(let i in B){const e=B[i],s=new y(e.id,d.byValue(e.direction));let n=[];const r=new Map;if(e.params){const i=t.parseParams(e.params);for(let t in i)"pt"===t?n=i[t].split(","):r.set(t,i[t]);s.setFormats(n),s.setParams(r)}P.addRID(s)}const N=[];if(b.simulcast){const i=new p;if(b.simulcast.dir1){const e=d.byValue(b.simulcast.dir1),s=t.parseSimulcastStreamList(b.simulcast.list1);for(let t=0;t<s.length;++t){const n=[];for(let i=0;i<s[t].length;++i)n.push(new m(s[t][i].scid,s[t][i].paused));i.addSimulcastAlternativeStreams(e,n)}}if(b.simulcast.dir2){const e=d.byValue(b.simulcast.dir2),s=t.parseSimulcastStreamList(b.simulcast.list2);for(let t=0;t<s.length;++t){const n=[];for(let i=0;i<s[t].length;++i)n.push(new m(s[t][i].scid,s[t][i].paused));i.addSimulcastAlternativeStreams(e,n)}}for(let t of i.getSimulcastStreams(d.SEND)){const i=[];for(let e=0;e<t.length;e++){const s=new g(t[e].getId(),t[e].isPaused()),n=P.getRID(s.getId());if(n){const t=n.getFormats();for(let i=0;t&&i<t.length;++i){const e=P.getCodecForType(t[i]);e&&s.addCodec(e)}s.setParams(n.getParams()),i.push(s)}}i.length&&N.push(i)}P.setSimulcast(i)}const M=new Map;if(b.ssrcs)for(let t in b.ssrcs){let e=b.ssrcs[t],s=e.id,n=e.attribute,r=e.value,h=M.get(s);if(h||(h=new f(s),M.set(h.getSSRC(),h)),i("cname",n))h.setCName(r);else if(i("msid",n)){let t=r.split(" "),i=t[0],e=t[1];h.setStreamId(i),h.setTrackId(e);let n=T.getStream(i);n||(n=new v(i),T.addStream(n));let o=n.getTrack(e);o||(o=new _(k,e),o.setMediaId(E),o.setEncodings(N),n.addTrack(o)),o.addSSRC(s)}}if(b.msid){let t=b.msid.split(" "),i=t[0],e=t[1],s=T.getStream(i);s||(s=new v(i),T.addStream(s));let n=s.getTrack(e);n||(n=new _(k,e),n.setMediaId(E),n.setEncodings(N),s.addTrack(n));for(let[t,s]of M.entries())s.getStreamId()||(s.setStreamId(i),s.setTrackId(e),n.addSSRC(t))}for(let[t,i]of M.entries())if(!i.getStreamId()){let e=i.getCName(),s=E;i.setStreamId(e),i.setTrackId(s);let n=T.getStream(e);n||(n=new v(e),T.addStream(n));let r=n.getTrack(s);r||(r=new _(k,s),r.setMediaId(E),r.setEncodings(N),n.addTrack(r)),r.addSSRC(t)}if(b.ssrcGroups)for(let t in b.ssrcGroups){let i=b.ssrcGroups[t],e=i.ssrcs.split(" "),s=new l(i.semantics,e),n=M.get(x(e[0]));n&&T.getStream(n.getStreamId()).getTrack(n.getTrackId()).addSourceGroup(s)}if("application"==b.type&&"webrtc-datachannel"==b.payloads){const t=new A(b.sctpPort,b.maxMessageSize);P.setDataChannel(t)}T.addMedia(P)}return T},Ui=b}var re,he=(Hi||(Hi=1,w.defineProperty(zt,"__esModule",{value:!0}),zt.SDPInfo=ne(),zt.CandidateInfo=Jt(),zt.CodecInfo=$t(),zt.DTLSInfo=ei(),zt.CryptoInfo=si(),zt.ICEInfo=Gi(),zt.MediaInfo=Zi(),zt.Setup=ii(),zt.SourceGroupInfo=$i(),zt.SourceInfo=te(),zt.StreamInfo=se(),zt.TrackInfo=ee(),zt.RTCPFeedbackInfo=Zt(),zt.TrackEncodingInfo=ie(),zt.RIDInfo=ji(),zt.SimulcastInfo=Ki(),zt.SimulcastStreamInfo=Qi(),zt.DataChannelInfo=Ji(),zt.Direction=Yi()),zt),oe={exports:{}},ae=oe.exports;var ue=(re||(re=1,function(t,i){!function(e,s){var n="function",r="undefined",h="object",o="string",a="major",u="model",c="name",d="type",l="vendor",f="version",v="architecture",_="console",g="mobile",p="tablet",m="smarttv",w="wearable",y="embedded",A="Amazon",b="Apple",S="ASUS",T="BlackBerry",k="Browser",E="Chrome",P="Firefox",x="Google",I="Huawei",R="LG",C="Microsoft",D="Motorola",B="Opera",N="Samsung",M="Sharp",L="Sony",O="Xiaomi",F="Zebra",U="Facebook",V="Chromium OS",H="Mac OS",W=" Browser",q=function(t){for(var i={},e=0;e<t.length;e++)i[t[e].toUpperCase()]=t[e];return i},z=function(t,i){return typeof t===o&&-1!==G(i).indexOf(G(t))},G=function(t){return t.toLowerCase()},X=function(t,i){if(typeof t===o)return t=t.replace(/^\s\s*/,""),typeof i===r?t:t.substring(0,500)},j=function(t,i){for(var e,r,o,a,u,c,d=0;d<i.length&&!u;){var l=i[d],f=i[d+1];for(e=r=0;e<l.length&&!u&&l[e];)if(u=l[e++].exec(t))for(o=0;o<f.length;o++)c=u[++r],typeof(a=f[o])===h&&a.length>0?2===a.length?typeof a[1]==n?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==n||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):s:this[a[0]]=c?a[1].call(this,c,a[2]):s:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):s):this[a]=c||s;d+=2}},Q=function(t,i){for(var e in i)if(typeof i[e]===h&&i[e].length>0){for(var n=0;n<i[e].length;n++)if(z(i[e][n],t))return"?"===e?s:e}else if(z(i[e],t))return"?"===e?s:e;return i.hasOwnProperty("*")?i["*"]:t},K={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,f],[/opios[\/ ]+([\w\.]+)/i],[f,[c,B+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[c,B+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[c,B]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[c,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[c,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[c,"UC"+k]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[c,"Smart Lenovo "+k]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+k],f],[/\bfocus\/([\w\.]+)/i],[f,[c,P+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[c,B+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[c,B+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI "+k]],[/fxios\/([-\w\.]+)/i],[f,[c,P]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360"+W]],[/\b(qq)\/([\w\.]+)/i],[[c,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1"+W],f],[/samsungbrowser\/([\w\.]+)/i],[f,[c,N+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[c,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,U],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[c,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,E+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[c,"Android "+k]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[f,Q,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],f],[/(wolvic)\/([\w\.]+)/i],[c,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[c,P+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[c,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,G]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[l,N],[d,p]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[l,N],[d,g]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[l,b],[d,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[l,b],[d,p]],[/(macintosh);/i],[u,[l,b]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[l,M],[d,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[l,I],[d,p]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[l,I],[d,g]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[l,O],[d,g]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[l,O],[d,p]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[l,"OPPO"],[d,g]],[/\b(opd2\d{3}a?) bui/i],[u,[l,"OPPO"],[d,p]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[l,"Vivo"],[d,g]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[l,"Realme"],[d,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[l,D],[d,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[l,D],[d,p]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[l,R],[d,p]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[l,R],[d,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[l,"Lenovo"],[d,p]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[l,"Nokia"],[d,g]],[/(pixel c)\b/i],[u,[l,x],[d,p]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[l,x],[d,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[l,L],[d,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[l,L],[d,p]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[l,"OnePlus"],[d,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[l,A],[d,p]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[l,A],[d,g]],[/(playbook);[-\w\),; ]+(rim)/i],[u,l,[d,p]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[l,T],[d,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[l,S],[d,p]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[l,S],[d,g]],[/(nexus 9)/i],[u,[l,"HTC"],[d,p]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[l,[u,/_/g," "],[d,g]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[l,"TCL"],[d,p]],[/(itel) ((\w+))/i],[[l,G],u,[d,Q,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[l,"Acer"],[d,p]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[l,"Meizu"],[d,g]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[l,"Ulefone"],[d,g]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[l,"Nothing"],[d,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,u,[d,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,u,[d,p]],[/(surface duo)/i],[u,[l,C],[d,p]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[l,"Fairphone"],[d,g]],[/(u304aa)/i],[u,[l,"AT&T"],[d,g]],[/\bsie-(\w*)/i],[u,[l,"Siemens"],[d,g]],[/\b(rct\w+) b/i],[u,[l,"RCA"],[d,p]],[/\b(venue[\d ]{2,7}) b/i],[u,[l,"Dell"],[d,p]],[/\b(q(?:mv|ta)\w+) b/i],[u,[l,"Verizon"],[d,p]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[l,"Barnes & Noble"],[d,p]],[/\b(tm\d{3}\w+) b/i],[u,[l,"NuVision"],[d,p]],[/\b(k88) b/i],[u,[l,"ZTE"],[d,p]],[/\b(nx\d{3}j) b/i],[u,[l,"ZTE"],[d,g]],[/\b(gen\d{3}) b.+49h/i],[u,[l,"Swiss"],[d,g]],[/\b(zur\d{3}) b/i],[u,[l,"Swiss"],[d,p]],[/\b((zeki)?tb.*\b) b/i],[u,[l,"Zeki"],[d,p]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],u,[d,p]],[/\b(ns-?\w{0,9}) b/i],[u,[l,"Insignia"],[d,p]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[l,"NextBook"],[d,p]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],u,[d,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],u,[d,g]],[/\b(ph-1) /i],[u,[l,"Essential"],[d,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[l,"Envizen"],[d,p]],[/\b(trio[-\w\. ]+) b/i],[u,[l,"MachSpeed"],[d,p]],[/\btu_(1491) b/i],[u,[l,"Rotor"],[d,p]],[/(shield[\w ]+) b/i],[u,[l,"Nvidia"],[d,p]],[/(sprint) (\w+)/i],[l,u,[d,g]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[l,C],[d,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[l,F],[d,p]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[l,F],[d,g]],[/smart-tv.+(samsung)/i],[l,[d,m]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[l,N],[d,m]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,R],[d,m]],[/(apple) ?tv/i],[l,[u,b+" TV"],[d,m]],[/crkey/i],[[u,E+"cast"],[l,x],[d,m]],[/droid.+aft(\w+)( bui|\))/i],[u,[l,A],[d,m]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[l,M],[d,m]],[/(bravia[\w ]+)( bui|\))/i],[u,[l,L],[d,m]],[/(mitv-\w{5}) bui/i],[u,[l,O],[d,m]],[/Hbbtv.*(technisat) (.*);/i],[l,u,[d,m]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[l,X],[u,X],[d,m]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,u,[d,_]],[/droid.+; (shield) bui/i],[u,[l,"Nvidia"],[d,_]],[/(playstation [345portablevi]+)/i],[u,[l,L],[d,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[l,C],[d,_]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[l,N],[d,w]],[/((pebble))app/i],[l,u,[d,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[l,b],[d,w]],[/droid.+; (glass) \d/i],[u,[l,x],[d,w]],[/droid.+; (wt63?0{2,3})\)/i],[u,[l,F],[d,w]],[/(quest( \d| pro)?)/i],[u,[l,U],[d,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[d,y]],[/(aeobc)\b/i],[u,[l,A],[d,y]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[d,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[d,p]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,p]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,g]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[f,Q,K]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,Q,K],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,H],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,f],[/\(bb(10);/i],[f,[c,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[c,P+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[c,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,V],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,f],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,f]]},J=function(t,i){if(typeof t===h&&(i=t,t=s),!(this instanceof J))return new J(t,i).getResult();var _=typeof e!==r&&e.navigator?e.navigator:s,m=t||(_&&_.userAgent?_.userAgent:""),w=_&&_.userAgentData?_.userAgentData:s,y=i?function(t,i){var e={};for(var s in t)i[s]&&i[s].length%2==0?e[s]=i[s].concat(t[s]):e[s]=t[s];return e}(Y,i):Y,A=_&&_.userAgent==m;return this.getBrowser=function(){var t={};return t[c]=s,t[f]=s,j.call(t,m,y.browser),t[a]=function(t){return typeof t===o?t.replace(/[^\d\.]/g,"").split(".")[0]:s}(t[f]),A&&_&&_.brave&&typeof _.brave.isBrave==n&&(t[c]="Brave"),t},this.getCPU=function(){var t={};return t[v]=s,j.call(t,m,y.cpu),t},this.getDevice=function(){var t={};return t[l]=s,t[u]=s,t[d]=s,j.call(t,m,y.device),A&&!t[d]&&w&&w.mobile&&(t[d]=g),A&&"Macintosh"==t[u]&&_&&typeof _.standalone!==r&&_.maxTouchPoints&&_.maxTouchPoints>2&&(t[u]="iPad",t[d]=p),t},this.getEngine=function(){var t={};return t[c]=s,t[f]=s,j.call(t,m,y.engine),t},this.getOS=function(){var t={};return t[c]=s,t[f]=s,j.call(t,m,y.os),A&&!t[c]&&w&&w.platform&&"Unknown"!=w.platform&&(t[c]=w.platform.replace(/chrome os/i,V).replace(/macos/i,H)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return m},this.setUA=function(t){return m=typeof t===o&&t.length>500?X(t,500):t,this},this.setUA(m),this};J.VERSION="0.7.39",J.BROWSER=q([c,f,a]),J.CPU=q([v]),J.DEVICE=q([u,l,d,_,g,m,p,w,y]),J.ENGINE=J.OS=q([c,f]),t.exports&&(i=t.exports=J),i.UAParser=J;var Z=typeof e!==r&&(e.jQuery||e.Zepto);if(Z&&!Z.ua){var $=new J;Z.ua=$.getResult(),Z.ua.get=function(){return $.getUA()},Z.ua.set=function(t){$.setUA(t);var i=$.getResult();for(var e in i)Z.ua[e]=i[e]}}}("object"==typeof s?s:ae)}(oe,oe.exports)),oe.exports);const ce=b(ue),de=["iOS"];class le extends ce{isChromium(){return this.getUA().match(/Chrome/i)}isChrome(){const t=this.getBrowser();if(!t.name)return!1;const i=this.getOS();let e=!0;return e=!new RegExp(de.join("|"),"i").test(i.name),t.name.match(/Chrome/i)&&e}isFirefox(){const t=this.getBrowser();return!!t.name&&t.name.match(/Firefox/i)}isOpera(){const t=this.getBrowser();return!!t.name&&t.name.match(/Opera/i)}isSafari(){const t=this.getBrowser();return!!t.name&&t.name.match(/Safari/i)}constructor(){super(s.navigator.userAgent)}}const fe=at.get("SdpParser"),ve=Array.from({length:31},(t,i)=>i+35),_e=Array.from({length:32},(t,i)=>i+96),ge=Array.from({length:14},(t,i)=>i+1),pe=Array.from({length:240},(t,i)=>i+16),me={setSimulcast(t,i){if(fe.info("Setting simulcast. Codec: ",i),!(new le).isChromium())return fe.warn("Your browser does not appear to support Simulcast. For a better experience, use a Chromium based browser."),t;if("h264"!==i&&"vp8"!==i)return fe.warn("Your selected codec ".concat(i," does not appear to support Simulcast.  To broadcast using simulcast, please use H.264 or VP8.")),t;if(!/m=video/.test(t))return fe.warn("There is no available video for simulcast to be enabled."),t;try{const i=new RegExp("m=video.*?a=ssrc:(\\d*) cname:(.+?)\\r\\n","s"),e=new RegExp("m=video.*?a=ssrc:(\\d*) msid:(.+?)\\r\\n","s"),s=i.exec(t),n=s[1],r=s[2],h=e.exec(t)[2],o=2,a=[n];for(let i=0;i<o;++i){const e=100+2*i,s=e+1;a.push(e),t+="a=ssrc-group:FID "+e+" "+s+"\r\na=ssrc:"+e+" cname:"+r+"\r\na=ssrc:"+e+" msid:"+h+"\r\na=ssrc:"+s+" cname:"+r+"\r\na=ssrc:"+s+" msid:"+h+"\r\n"}return t+="a=ssrc-group:SIM "+a.join(" ")+"\r\n",fe.info("Simulcast setted"),fe.debug("Simulcast SDP: ",t),t}catch(t){throw fe.error("Error setting SDP for simulcast: ",t),t}},setStereo:t=>(fe.info("Replacing SDP response for support stereo"),t=t.replace(/useinbandfec=1/g,"useinbandfec=1; stereo=1"),fe.info("Replaced SDP response for support stereo"),fe.debug("New SDP value: ",t),t),setDTX:t=>(fe.info("Replacing SDP response for support dtx"),t=t.replace("useinbandfec=1","useinbandfec=1; usedtx=1"),fe.info("Replaced SDP response for support dtx"),fe.debug("New SDP value: ",t),t),setAbsoluteCaptureTime(t){const i="a=extmap:"+me.getAvailableHeaderExtensionIdRange(t)[0]+" http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,(t,e,s)=>e+i+s),fe.info("Replaced SDP response for setting absolute capture time"),fe.debug("New SDP value: ",t),t},setDependencyDescriptor(t){const i="a=extmap:"+me.getAvailableHeaderExtensionIdRange(t)[0]+" https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,(t,e,s)=>e+i+s),fe.info("Replaced SDP response for setting depency descriptor"),fe.debug("New SDP value: ",t),t},setVideoBitrate(t,i){if(i<1)fe.info("Remove bitrate restrictions"),t=t.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"");else{const e=he.SDPInfo.parse(t),s=e.getMedia("video");fe.info("Setting video bitrate"),s.setBitrate(i),t=e.toString()}return t},removeSdpLine:(t,i)=>(fe.debug("SDP before trimming: ",t),t=t.split("\n").filter(t=>t.trim()!==i).join("\n"),fe.debug("SDP trimmed result: ",t),t),adaptCodecName(t,i,e){if(!t)return t;const s=new RegExp("".concat(i),"i");return t.replace(s,e)},setMultiopus(t,i){if(!(new le).isFirefox()&&(!i||we(i)))if(t.includes("multiopus/48000/6"))fe.info("Multiopus already setted");else{fe.info("Setting multiopus");const i=/m=audio 9 UDP\/TLS\/RTP\/SAVPF (.*)\r\n/.exec(t)[0],e=me.getAvailablePayloadTypeRange(t)[0],s=i.replace("\r\n"," ")+e+"\r\na=rtpmap:"+e+" multiopus/48000/6\r\na=fmtp:"+e+" channel_mapping=0,4,1,2,3,5;coupled_streams=2;minptime=10;num_streams=4;useinbandfec=1\r\n";t=t.replace(i,s),fe.info("Multiopus offer created"),fe.debug("SDP parsed for multioups: ",t)}return t},getAvailablePayloadTypeRange(t){const i=t.matchAll(/m=(?:.*) (?:.*) UDP\/TLS\/RTP\/SAVPF (.*)\r\n/gm);let e=_e.concat(ve);for(const t of i){const i=t[1].split(" ").map(t=>x(t));e=e.filter(t=>!i.includes(t))}return e},getAvailableHeaderExtensionIdRange(t){const i=t.matchAll(/a=extmap:(\d+)(?:.*)\r\n/gm);let e=ge.concat(pe);for(const t of i){const i=t[1].split(" ").map(t=>x(t));e=e.filter(t=>!i.includes(t))}return e},renegotiate(t,i){const e=he.SDPInfo.parse(t),s=he.SDPInfo.parse(i);for(const t of e.getMedias()){let i=s.getMediaById(t.getId());if(!i){i=new he.MediaInfo(t.getId(),t.getType()),i.setDirection(he.Direction.reverse(t.getDirection()));const e=s.getMedia(t.getType());if(e){i.setCodecs(e.getCodecs());for(const[t,s]of e.getExtensions())i.addExtension(t,s)}s.addMedia(i)}}return s.toString()},updateMissingVideoExtensions(t,i){var e;const s=he.SDPInfo.parse(t),n=null==(e=he.SDPInfo.parse(i).getMediasByType("video")[0])?void 0:e.getExtensions();if(n||n.length){for(const i of s.getMediasByType("video")){const e=i.getExtensions();n.forEach((s,n)=>{if(!e.get(n)){const e=i.getId(),r="a=extmap:"+n+" "+s+"\r\n",h=new RegExp("(a=mid:"+e+"\r\n(?:.*\r\n)*?)","g");t=t.replace(h,(t,i,e)=>i+r)}})}return t}},getCodecPayloadType(t){const i=t.matchAll(/a=rtpmap:(\d+) (\w+)\/\d+/g),e={};for(const t of i)e[t[1]]=t[2];return e}},we=t=>t.getAudioTracks().some(t=>t.getSettings().channelCount>2),ye={VP8:"vp8",VP9:"vp9",H264:"h264",AV1:"av1",H265:"h265"},Ae={OPUS:"opus",MULTIOPUS:"multiopus"},be=at.get("PeerConnection"),Se="Publisher",Te="Viewer",ke={track:"track",connectionStateChange:"connectionStateChange"},Ee={stereo:!1,mediaStream:null,codec:"h264",simulcast:!1,scalabilityMode:null,disableAudio:!1,disableVideo:!1,setSDPToPeer:!0};class Pe extends lt{async createRTCPeer(t,i){void 0===t&&(t={autoInitStats:!0,statsIntervalMs:1e3}),void 0===i&&(i=Te),be.info("Creating new RTCPeerConnection"),be.debug("RTC configuration provided by user: ",t),this.peer=Re(this,t),this.mode=i,t.autoInitStats&&this.initStats(t)}getRTCPeer(){return be.info("Getting RTC Peer"),this.peer}async closeRTCPeer(){var t;be.info("Closing RTCPeerConnection"),null==(t=this.peer)||t.close(),this.peer=null,this.stopStats(),this.emit(ke.connectionStateChange,"closed")}async setRTCRemoteSDP(t){be.info("Setting RTC Remote SDP");const i={type:"answer",sdp:t};try{await this.peer.setRemoteDescription(i),be.info("RTC Remote SDP was set successfully."),be.debug("RTC Remote SDP new value: ",t)}catch(t){throw be.error("Error while setting RTC Remote SDP: ",t),t}}async getRTCLocalSDP(t){void 0===t&&(t=Ee),be.info("Getting RTC Local SDP"),t=l(l({},Ee),t),be.debug("Options: ",t);const i=Ie(t.mediaStream);i?Be(this.peer,i,t):Ne(this.peer,t),be.info("Creating peer offer");const e=await this.peer.createOffer();return be.info("Peer offer created"),be.debug("Peer offer response: ",e.sdp),this.sessionDescription=e,t.disableAudio||(t.stereo&&(this.sessionDescription.sdp=me.setStereo(this.sessionDescription.sdp)),t.dtx&&(this.sessionDescription.sdp=me.setDTX(this.sessionDescription.sdp)),this.sessionDescription.sdp=me.setMultiopus(this.sessionDescription.sdp,i)),!t.disableVideo&&t.simulcast&&(this.sessionDescription.sdp=me.setSimulcast(this.sessionDescription.sdp,t.codec)),t.absCaptureTime&&(this.sessionDescription.sdp=me.setAbsoluteCaptureTime(this.sessionDescription.sdp)),t.dependencyDescriptor&&(this.sessionDescription.sdp=me.setDependencyDescriptor(this.sessionDescription.sdp)),t.setSDPToPeer&&(await this.peer.setLocalDescription(this.sessionDescription),be.info("Peer local description set")),this.sessionDescription.sdp}async addRemoteTrack(t,i){return new Promise((e,s)=>{try{const s=this.peer.addTransceiver(t,{direction:"recvonly",streams:i});this.transceiverMap.set(s,e)}catch(t){s(t)}})}updateBandwidthRestriction(t,i){if(this.mode===Te)throw be.error("Viewer attempting to update bitrate, this is not allowed"),new m("It is not possible for a viewer to update the bitrate.");return be.info("Updating bandwidth restriction, bitrate value: ",i),be.debug("SDP value: ",t),me.setVideoBitrate(t,i)}async updateBitrate(t){if(void 0===t&&(t=0),this.mode===Te)throw be.error("Viewer attempting to update bitrate, this is not allowed"),new m("It is not possible for a viewer to update the bitrate.");if(!this.peer)throw be.error("Cannot update bitrate. No peer found."),new m("Cannot update bitrate. No peer found.");be.info("Updating bitrate to value: ",t),this.sessionDescription=await this.peer.createOffer(),await this.peer.setLocalDescription(this.sessionDescription);const i=this.updateBandwidthRestriction(this.peer.remoteDescription.sdp,t);await this.setRTCRemoteSDP(i),be.info("Bitrate restrictions updated: ","".concat(t>0?t:"unlimited"," kbps"))}getRTCPeerStatus(){if(be.info("Getting RTC peer status"),!this.peer)return null;const t=Me(this.peer);return be.info("RTC peer status getted, value: ",t),t}replaceTrack(t){if(!this.peer)return void be.error("Could not change track if there is not an active connection.");const i=this.peer.getSenders().find(i=>i.track.kind===t.kind);i?i.replaceTrack(t):be.error("There is no ".concat(t.kind," track in active broadcast."))}static getCapabilities(t){const i=new le,e=RTCRtpSender.getCapabilities(t);if(e){const s={};let n=new RegExp("^video/(".concat(w.values(ye).join("|"),")x?$"),"i");"audio"===t&&(n=new RegExp("^audio/(".concat(w.values(Ae).join("|"),")$"),"i"),i.isChrome()&&(s.multiopus={mimeType:"audio/multiopus",channels:6}));for(const t of e.codecs){const i=t.mimeType.match(n);if(i){const e=i[1].toLowerCase();if(s[e]=f(l({},s[e]),{mimeType:t.mimeType}),t.scalabilityModes){let i=s[e].scalabilityModes||[];i=[...i,...t.scalabilityModes],s[e].scalabilityModes=[...new Set(i)]}t.channels&&(s[e].channels=t.channels)}}e.codecs=w.keys(s).map(t=>l({codec:t},s[t]))}return e}getTracks(){var t,i;return null==(i=null==(t=this.peer)?void 0:t.getSenders())?void 0:i.map(t=>t.track)}initStats(t){this.peerConnectionStats?be.warn("PeerConnection.initStats() has already been called. Automatic initialization occurs via View.connect(), Publish.connect() or this.createRTCPeer(). See options"):this.peer?(this.peerConnectionStats=new bt(this.peer,t),gt(this.peerConnectionStats,this,[At])):be.warn("Cannot init peer stats: RTCPeerConnection not initialized")}stopStats(){var t;null==(t=this.peerConnectionStats)||t.stop(),this.peerConnectionStats=null}constructor(){super(),this.mode=null,this.sessionDescription=null,this.peer=null,this.peerConnectionStats=null,this.transceiverMap=new Map}}const xe=t=>(null==t?void 0:t.getAudioTracks().length)<=1&&(null==t?void 0:t.getVideoTracks().length)<=1,Ie=t=>{if(!t)return null;if(t instanceof MediaStream&&xe(t))return t;if(!(t instanceof MediaStream)){be.info("Creating MediaStream to add received tracks.");const i=new MediaStream;for(const e of t)i.addTrack(e);if(xe(i))return i}throw be.error("MediaStream must have 1 audio track and 1 video track, or at least one of them."),new m("MediaStream must have 1 audio track and 1 video track, or at least one of them.")},Re=(t,i)=>{const e=new RTCPeerConnection(i);return De(t,e),e};async function Ce(t){return new Promise(i=>u(i,t))}const De=(t,i)=>{i.ontrack=async i=>{be.info("New track from peer."),be.debug("Track event value: ",i);const e=t.transceiverMap.get(i.transceiver);if(e){for(;!i.transceiver.mid;)await Ce(100);e(i.transceiver),t.transceiverMap.delete(i.transceiver)}u(()=>{t.emit(ke.track,i)},0)},i.connectionState?i.onconnectionstatechange=e=>{be.info("Peer connection state change: ",i.connectionState),t.emit(ke.connectionStateChange,i.connectionState)}:i.oniceconnectionstatechange=e=>{be.info("Peer ICE connection state change: ",i.iceConnectionState),t.emit(ke.connectionStateChange,i.iceConnectionState)},i.onnegotiationneeded=async t=>{if(!i.remoteDescription)return;be.info("Peer onnegotiationneeded, updating local description");const e=await i.createOffer();be.info("Peer onnegotiationneeded, got local offer",e.sdp),e.sdp=me.updateMissingVideoExtensions(e.sdp,i.remoteDescription.sdp),await i.setLocalDescription(e);const s=me.renegotiate(e.sdp,i.remoteDescription.sdp);be.info("Peer onnegotiationneeded, updating remote description",s),await i.setRemoteDescription({type:"answer",sdp:s}),be.info("Peer onnegotiationneeded, renegotiation done")}},Be=(t,i,e)=>{be.info("Adding mediaStream tracks to RTCPeerConnection");for(const s of i.getTracks()){const n={streams:[i]};"audio"===s.kind&&(n.direction=e.disableAudio?"inactive":"sendonly"),"video"===s.kind&&(n.direction=e.disableVideo?"inactive":"sendonly",e.scalabilityMode&&(new le).isChrome()?(be.debug("Video track with scalability mode: ".concat(e.scalabilityMode,".")),n.sendEncodings=[{scalabilityMode:e.scalabilityMode}]):e.scalabilityMode&&be.warn("SVC is only supported in Google Chrome")),t.addTransceiver(s,n),be.info("Track '".concat(s.label,"' added: "),"id: ".concat(s.id),"kind: ".concat(s.kind))}},Ne=(t,i)=>{const e=new le;if(!i.disableVideo){const i=t.addTransceiver("video",{direction:"recvonly"});e.isOpera()&&i.setCodecPreferences(RTCRtpReceiver.getCapabilities("video").codecs.filter(t=>"video/H264"!==t.mimeType||t.sdpFmtpLine.includes("profile-level-id=4")))}i.disableAudio||t.addTransceiver("audio",{direction:"recvonly"});for(let e=0;e<i.multiplexedAudioTracks;e++)t.addTransceiver("audio",{direction:"recvonly"})},Me=t=>{var i;const e=null!=(i=t.connectionState)?i:t.iceConnectionState;switch(e){case"checking":return"connecting";case"completed":return"connected";default:return e}};var Le,Oe,Fe,Ue={};var Ve=function(){if(Fe)return Oe;Fe=1;const{TypedEmitter:t}=(Le||(Le=1,w.defineProperty(Ue,"__esModule",{value:!0}),Ue.TypedEmitter=dt().EventEmitter),Ue);class i extends t{cmd(t,i){return this.tm.cmd(t,i,this.namespace)}event(t,i){return this.tm.event(t,i,this.namespace)}close(){return this.tm.namespaces.delete(this.namespace)}constructor(t,i){super(),this.namespace=t,this.tm=i}}return Oe=class extends t{Av(t){this.transport.send(JSON.stringify(t))}cmd(t,i,e){return void 0===e&&(e=void 0),new Promise((s,n)=>{if(!t||0===t.length)throw new m("Bad command name");const r={type:"cmd",transId:this.maxId++,name:t,data:i};e&&(r.namespace=e),this.transactions.set(r.transId,f(l({},r),{resolve:s,reject:n}));try{this.Av(r)}catch(t){throw this.transactions.delete(r.transId),t}})}event(t,i,e){if(void 0===e&&(e=void 0),!t||0===t.length)throw new m("Bad event name");const s={type:"event",name:t,data:i};e&&(s.namespace=e),this.Av(s)}namespace(t){let e=this.namespaces.get(t);return e||(e=new i(t,this),this.namespaces.set(t,e),e)}close(){for(const t of this.namespaces.values())t.close();this.transport.removeListener?this.transport.removeListener("message",this.listener):this.transport.removeEventListener("message",this.listener)}constructor(t){super(),this.maxId=0,this.namespaces=new Map,this.transactions=new Map,this.transport=t,this.listener=t=>{let i;try{i=JSON.parse(t.utf8Data||t.data||t)}catch(t){return}switch(i.type){case"cmd":const{transId:t}=i,s={name:i.name,data:i.data,namespace:i.namespace,accept:i=>{this.Av({type:"response",transId:t,data:i})},reject:i=>{this.Av({type:"error",transId:t,data:i})}};if(s.namespace){const t=this.namespaces.get(s.namespace);t?t.emit("cmd",s):this.emit("cmd",s)}else this.emit("cmd",s);break;case"response":{const t=this.transactions.get(i.transId);if(!t)return;this.transactions.delete(i.transId),t.resolve(i.data);break}case"error":{const t=this.transactions.get(i.transId);if(!t)return;this.transactions.delete(i.transId),t.reject(i.data);break}case"event":const n={name:i.name,data:i.data,namespace:i.namespace};if(n.namespace){var e=this.namespaces.get(n.namespace);e?e.emit("event",n):this.emit("event",n)}else this.emit("event",n)}},this.transport.addListener?this.transport.addListener("message",this.listener):this.transport.addEventListener("message",this.listener)}}}();const He=b(Ve),We=at.get("Signaling"),qe="wsConnectionSuccess",ze="wsConnectionError",Ge="wsConnectionClose",Xe="broadcastEvent";class je extends lt{async connect(){var t;return We.info("Connecting to Signaling Server"),this.transactionManager&&(null==(t=this.webSocket)?void 0:t.readyState)===WebSocket.OPEN?(We.info("Connected to server: ",this.webSocket.url),We.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(qe,{ws:this.webSocket,tm:this.transactionManager}),this.webSocket):new Promise((t,i)=>{this.webSocket=new WebSocket(this.wsUrl),this.transactionManager=new He(this.webSocket),this.webSocket.onopen=()=>{We.info("WebSocket opened"),this.transactionManager.on("event",t=>{this.emit(Xe,t)}),We.info("Connected to server: ",this.webSocket.url),We.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(qe,{ws:this.webSocket,tm:this.transactionManager}),t(this.webSocket)},this.webSocket.onerror=()=>{We.error("WebSocket not connected: ",this.webSocket.url),this.emit(ze,this.webSocket.url),i(this.webSocket.url)},this.webSocket.onclose=()=>{this.webSocket=null,this.transactionManager=null,We.info("Connection closed with Signaling Server."),this.emit(Ge)}})}close(){var t;We.info("Closing connection with Signaling Server."),null==(t=this.webSocket)||t.close()}async subscribe(t,i,e,s){var n,r,h,o,a;void 0===e&&(e=null),void 0===s&&(s=null),We.info("Starting subscription to streamName: ",this.streamName),We.debug("Subcription local description: ",t);const u=Qe(i,e,s),c={sdp:t=me.adaptCodecName(t,"AV1X",ye.AV1),streamId:this.streamName,pinnedSourceId:u.pinnedSourceId,excludedSourceIds:u.excludedSourceIds,events:["active","inactive","layers","viewercount","vad","updated","migrate","stopped"]};u.vad&&(c.vad=!0),Array.isArray(u.events)&&(c.events=u.events),u.forcePlayoutDelay&&(c.forcePlayoutDelay=u.forcePlayoutDelay),u.layer&&(c.layer=u.layer),u.abrConfiguration&&(c.abr={initialBitrate:null==(n=u.abrConfiguration.metadata)?void 0:n.bitrate,strategy:u.abrConfiguration.strategy}),u.customKeys&&(c.customKeys=u.customKeys),u.forceSmooth&&(c.abr=f(l({},c.abr||{}),{forceSmooth:u.forceSmooth}));try{if(u.disableVideo&&u.disableAudio)throw new m("Not attempting to connect as video and audio are disabled");await this.connect(),We.info("Sending view command",c);const t=await this.transactionManager.cmd("view",c),i=null==(a=null==(o=null==(h=null==(r=RTCRtpReceiver.getCapabilities)?void 0:r.call(RTCRtpReceiver,"video"))?void 0:h.codecs)?void 0:o.find)?void 0:a.call(o,t=>"video/AV1X"===t.mimeType);return t.sdp=i?me.adaptCodecName(t.sdp,ye.AV1,"AV1X"):t.sdp,We.info("Command sent, subscriberId: ",t.subscriberId),We.debug("Command result: ",t),this.serverId=t.subscriberId,this.clusterId=t.clusterId,this.streamViewId=t.streamViewId,W(this.streamName),q(this.serverId),z(t.streamViewId),K(this.clusterId),t.sdp}catch(t){throw We.error("Error sending view command, error: ",t),t}}async publish(t,i,e,s){var n,r,h,o,a,u,c,d;void 0===e&&(e=null),void 0===s&&(s=null);const l=Ke(i,e,s);We.info("Starting publishing to streamName: ".concat(this.streamName,", codec: ").concat(l.codec)),We.debug("Publishing local description: ",t);const f=null!=(o=null==(h=null==(r=null==(n=Pe.getCapabilities)?void 0:n.call(Pe,"video"))?void 0:r.codecs)?void 0:h.map(t=>t.codec))?o:[],v=w.values(ye);if(-1===v.indexOf(l.codec))throw We.error("Invalid codec ".concat(l.codec,". Possible values are: "),v),new m("Invalid codec ".concat(l.codec,". Possible values are: ").concat(v));if(f.length>0&&-1===f.indexOf(l.codec))throw We.error("Unsupported codec ".concat(l.codec,". Possible values are: "),f),new m("Unsupported codec ".concat(l.codec,". Possible values are: ").concat(f));l.codec===ye.AV1&&(t=me.adaptCodecName(t,"AV1X",ye.AV1));const _={name:this.streamName,sdp:t,codec:l.codec,sourceId:l.sourceId};if(l.priority){if(!(Number.isInteger(l.priority)&&l.priority>=-2147483648&&l.priority<=2147483647))throw new m("Invalid value for priority option. It should be a decimal integer between the range [-2^31, +2^31 - 1]");_.priority=l.priority}null!==l.record&&(_.record=l.record),Array.isArray(l.events)&&(_.events=l.events);try{if(l.disableVideo&&l.disableAudio)throw new m("Not attempting to connect as video and audio are disabled");await this.connect(),We.info("Sending publish command");const t=await this.transactionManager.cmd("publish",_);if(l.codec===ye.AV1){const i=null==(d=null==(c=null==(u=null==(a=RTCRtpSender.getCapabilities)?void 0:a.call(RTCRtpSender,"video"))?void 0:u.codecs)?void 0:c.find)?void 0:d.call(c,t=>"video/AV1X"===t.mimeType);t.sdp=i?me.adaptCodecName(t.sdp,ye.AV1,"AV1X"):t.sdp}return We.info("Command sent, publisherId: ",t.publisherId),We.debug("Command result: ",t),this.serverId=t.publisherId,this.clusterId=t.clusterId,W(this.streamName),q(this.serverId),G(t.feedId),K(this.clusterId),t.sdp}catch(t){throw We.error("Error sending publish command, error: ",t),t}}async cmd(t,i){return We.info("Sending cmd: ".concat(t)),this.transactionManager.cmd(t,i)}constructor(t={streamName:null,url:"ws://localhost:8080/"}){super(),this.streamName=t.streamName,this.wsUrl=t.url,this.webSocket=null,this.transactionManager=null,this.serverId=null,this.clusterId=null,this.streamViewId=null}}const Qe=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={vad:t,pinnedSourceId:i,excludedSourceIds:e}),s},Ke=(t,i,e)=>{let s="object"==typeof t?t:{};if(0===w.keys(s).length){s={codec:null!=t?t:ye.H264,record:i,sourceId:e}}return s};class Ye extends m{constructor(t,i){super(t),this.name="FetchError",this.status=i}}const Je=at.get("Director"),Ze="WebRtc";let $e="",ts="https://director.millicast.com";const is={setEndpoint:t=>{ts=t.replace(/\/$/,"")},getEndpoint:()=>ts,setLiveDomain:t=>{$e=t.replace(/\/$/,"")},getLiveDomain:()=>$e,getPublisher:async(t,i,e)=>{void 0===i&&(i=null),void 0===e&&(e=Ze);const s=es(t,i,e);Je.info("Getting publisher connection path for stream name: ",s.streamName);const n={streamName:s.streamName,streamType:s.streamType},r={"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},h="".concat(is.getEndpoint(),"/api/director/publish");try{const t=await fetch(h,{method:"POST",headers:r,body:JSON.stringify(n)});let i=await t.json();if("fail"===i.status)throw new Ye(i.data.message,t.status);return i=ns(i),Je.debug("Getting publisher response: ",i),H(i.data.streamAccountId),i.data}catch(t){throw Je.error("Error while getting publisher connection path. ",t),t}},getSubscriber:async(t,i,e)=>{void 0===i&&(i=null),void 0===e&&(e=null);const s=ss(t,i,e);H(s.streamAccountId),Je.info("Getting subscriber connection data for stream name: ".concat(s.streamName," and account id: ").concat(s.streamAccountId));const n={streamAccountId:s.streamAccountId,streamName:s.streamName};let r={"Content-Type":"application/json"};s.subscriberToken&&(r=f(l({},r),{Authorization:"Bearer ".concat(s.subscriberToken)}));const h="".concat(is.getEndpoint(),"/api/director/subscribe");try{const t=await fetch(h,{method:"POST",headers:r,body:JSON.stringify(n)});let i=await t.json();if("fail"===i.status)throw new Ye(i.data.message,t.status);return i=ns(i),Je.debug("Getting subscriber response: ",i),s.subscriberToken&&(i.data.subscriberToken=s.subscriberToken),i.data}catch(t){throw Je.error("Error while getting subscriber connection path. ",t),t}}},es=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={token:t,streamName:i,streamType:e}),s},ss=(t,i,e)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={streamName:t,streamAccountId:i,subscriberToken:e}),s},ns=t=>{if(is.getLiveDomain()){const i=/\/\/(.*?)\//,e=t.data.urls.map(t=>{const e=i.exec(t);return t.replace(e[1],is.getLiveDomain())});t.data.urls=e}if(t.data.drmObject){const i=t.data.drmObject.playReadyUrl;i&&(t.data.drmObject.playReadyUrl="".concat(is.getEndpoint()).concat(i));const e=t.data.drmObject.widevineUrl;e&&(t.data.drmObject.widevineUrl="".concat(is.getEndpoint()).concat(e));const s=t.data.drmObject.fairPlayUrl;s&&(t.data.drmObject.fairPlayUrl="".concat(is.getEndpoint()).concat(s));const n=t.data.drmObject.fairPlayCertUrl;n&&(t.data.drmObject.fairPlayCertUrl="".concat(is.getEndpoint()).concat(n))}return t};function rs(t){this.message=t}rs.prototype=new m,rs.prototype.name="InvalidCharacterError";var hs=typeof s<"u"&&s.atob&&s.atob.bind(s)||function(t){var i=String(t).replace(/=+$/,"");if(i.length%4==1)throw new rs("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,s,n=0,r=0,h="";s=i.charAt(r++);~s&&(e=n%4?64*e+s:s,n++%4)?h+=String.fromCharCode(255&e>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return h};function os(t){this.message=t}function as(t,i){if("string"!=typeof t)throw new os("Invalid token specified");var e=!0===(i=i||{}).header?0:1;try{return JSON.parse(function(t){var i=t.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(hs(i).replace(/(.)/g,function(t,i){var e=i.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e}))}catch(t){return hs(i)}}(t.split(".")[e]))}catch(t){throw new os("Invalid token specified: "+t.message)}}os.prototype=new m,os.prototype.name="InvalidTokenError";var us,cs={exports:{}};var ds=(us||(us=1,function(t,i){!function(e){if(null!=i&&"number"!=typeof i.nodeType)t.exports=e();else{var s=e(),n=typeof self<"u"?self:$.global;"function"!=typeof n.btoa&&(n.btoa=s.btoa),"function"!=typeof n.atob&&(n.atob=s.atob)}}(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(t){this.message=t}return i.prototype=new m,i.prototype.name="InvalidCharacterError",{btoa:function(e){for(var s,n,r,h,o=String(e),a=0,u="";a<o.length;){if(s=o.charCodeAt(a++),n=o.charCodeAt(a++),r=o.charCodeAt(a++),s>255||n>255||r>255)throw new i("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u+=t.charAt((h=s<<16|n<<8|r)>>18&63)+t.charAt(h>>12&63)+t.charAt(h>>6&63)+t.charAt(63&h)}switch(o.length%3){case 0:return u;case 1:return u.slice(0,-2)+"==";case 2:return u.slice(0,-1)+"="}},atob:function(e){var s=String(e).replace(/[=]+$/,"");if(s.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,h=0,o=0,a="";r=s.charAt(o++);~r&&(n=h%4?64*n+r:r,h++%4)?a+=String.fromCharCode(255&n>>(-2*h&6)):0)r=t.indexOf(r);return a}}})}(cs,cs.exports)),cs.exports);function ls(t){var i,e,s;return{lang:null!=(i=null==t?void 0:t.lang)?i:void 0,message:null==t?void 0:t.message,abortEarly:null!=(e=null==t?void 0:t.abortEarly)?e:void 0,abortPipeEarly:null!=(s=null==t?void 0:t.abortPipeEarly)?s:void 0}}function fs(t){var i,e,s;const n=typeof t;return"string"===n?'"'.concat(t,'"'):"number"===n||"bigint"===n||"boolean"===n?"".concat(t):"object"===n||"function"===n?null!=(s=t&&(null==(e=null==(i=w.getPrototypeOf(t))?void 0:i.constructor)?void 0:e.name))?s:"null":n}function vs(t,i,e,s,n){var r,h,o,a,u,c,d,l;const f=n&&"input"in n?n.input:e.value,v=null!=(h=null!=(r=null==n?void 0:n.expected)?r:t.expects)?h:null,_=null!=(o=null==n?void 0:n.received)?o:fs(f),g={kind:t.kind,type:t.type,input:f,expected:v,received:_,message:"Invalid ".concat(i,": ").concat(v?"Expected ".concat(v," but r"):"R","eceived ").concat(_),requirement:t.requirement,path:null==n?void 0:n.path,issues:null==n?void 0:n.issues,lang:s.lang,abortEarly:s.abortEarly,abortPipeEarly:s.abortPipeEarly},p="schema"===t.kind,m=null!=(l=null!=(d=null!=(c=null!=(u=null!=(a=null==n?void 0:n.message)?a:t.message)?u:function(t,i){var e;return null==(e=void 0)?void 0:e.get(i)}(t.reference,g.lang))?c:p?void g.lang:null)?d:s.message)?l:void g.lang;void 0!==m&&(g.message="function"==typeof m?m(g):m),p&&(e.typed=!1),e.issues?e.issues.push(g):e.issues=[g]}function _s(t){return{version:1,vendor:"valibot",validate:i=>t["~run"]({value:i},ls())}}function gs(t,i){return w.hasOwn(t,i)&&"__proto__"!==i&&"prototype"!==i&&"constructor"!==i}function ps(t,i){var e;const s=[...new Set(t)];return s.length>1?"(".concat(s.join(" ".concat(i," ")),")"):null!=(e=s[0])?e:"never"}var ms=class extends m{constructor(t){super(t[0].message),this.name="ValiError",this.issues=t}};function ws(t,i,e){return"function"==typeof t.fallback?t.fallback(i,e):t.fallback}function ys(t,i,e){return"function"==typeof t.default?t.default(i,e):t.default}function As(t,i){return{kind:"schema",type:"array",reference:As,expects:"Array",async:!1,item:t,message:i,get"~standard"(){return _s(this)},"~run"(t,i){var e;const s=t.value;if(Array.isArray(s)){t.typed=!0,t.value=[];for(let n=0;n<s.length;n++){const r=s[n],h=this.item["~run"]({value:r},i);if(h.issues){const o={type:"array",origin:"value",input:s,key:n,value:r};for(const i of h.issues)i.path?i.path.unshift(o):i.path=[o],null==(e=t.issues)||e.push(i);if(t.issues||(t.issues=h.issues),i.abortEarly){t.typed=!1;break}}h.typed||(t.typed=!1),t.value.push(h.value)}}else vs(this,"type",t,i);return t}}}function bs(t){return{kind:"schema",type:"boolean",reference:bs,expects:"boolean",async:!1,message:t,get"~standard"(){return _s(this)},"~run"(t,i){return"boolean"==typeof t.value?t.typed=!0:vs(this,"type",t,i),t}}}function Ss(t,i){return{kind:"schema",type:"loose_object",reference:Ss,expects:"Object",async:!1,entries:t,message:i,get"~standard"(){return _s(this)},"~run"(t,i){var e;const s=t.value;if(s&&"object"==typeof s){t.typed=!0,t.value={};for(const n in this.entries){const r=this.entries[n];if(n in s||("exact_optional"===r.type||"optional"===r.type||"nullish"===r.type)&&void 0!==r.default){const h=n in s?s[n]:ys(r),o=r["~run"]({value:h},i);if(o.issues){const r={type:"object",origin:"value",input:s,key:n,value:h};for(const i of o.issues)i.path?i.path.unshift(r):i.path=[r],null==(e=t.issues)||e.push(i);if(t.issues||(t.issues=o.issues),i.abortEarly){t.typed=!1;break}}o.typed||(t.typed=!1),t.value[n]=o.value}else if(void 0!==r.fallback)t.value[n]=ws(r);else if("exact_optional"!==r.type&&"optional"!==r.type&&"nullish"!==r.type&&(vs(this,"key",t,i,{input:void 0,expected:'"'.concat(n,'"'),path:[{type:"object",origin:"key",input:s,key:n,value:s[n]}]}),i.abortEarly))break}if(!t.issues||!i.abortEarly)for(const i in s)gs(s,i)&&!(i in this.entries)&&(t.value[i]=s[i])}else vs(this,"type",t,i);return t}}}function Ts(t,i){return{kind:"schema",type:"nullish",reference:Ts,expects:"(".concat(t.expects," | null | undefined)"),async:!1,wrapped:t,default:i,get"~standard"(){return _s(this)},"~run"(t,i){return null!==t.value&&void 0!==t.value||(void 0!==this.default&&(t.value=ys(this,t,i)),null!==t.value&&void 0!==t.value)?this.wrapped["~run"](t,i):(t.typed=!0,t)}}}function ks(t){return{kind:"schema",type:"number",reference:ks,expects:"number",async:!1,message:t,get"~standard"(){return _s(this)},"~run"(t,i){return"number"!=typeof t.value||S(t.value)?vs(this,"type",t,i):t.typed=!0,t}}}function Es(t,i){return{kind:"schema",type:"picklist",reference:Es,expects:ps(t.map(fs),"|"),async:!1,options:t,message:i,get"~standard"(){return _s(this)},"~run"(t,i){return this.options.includes(t.value)?t.typed=!0:vs(this,"type",t,i),t}}}function Ps(t){return{kind:"schema",type:"string",reference:Ps,expects:"string",async:!1,message:t,get"~standard"(){return _s(this)},"~run"(t,i){return"string"==typeof t.value?t.typed=!0:vs(this,"type",t,i),t}}}function xs(t){let i;if(t)for(const e of t)i?i.push(...e.issues):i=e.issues;return i}function Is(t,i){return{kind:"schema",type:"union",reference:Is,expects:ps(t.map(t=>t.expects),"|"),async:!1,options:t,message:i,get"~standard"(){return _s(this)},"~run"(t,i){let e,s,n;for(const r of this.options){const h=r["~run"]({value:t.value},i);if(h.typed){if(!h.issues){e=h;break}s?s.push(h):s=[h]}else n?n.push(h):n=[h]}if(e)return e;if(s){if(1===s.length)return s[0];vs(this,"type",t,i,{issues:xs(s)}),t.typed=!0}else{if(1===(null==n?void 0:n.length))return n[0];vs(this,"type",t,i,{issues:xs(n)})}return t}}}function Rs(){return{kind:"schema",type:"unknown",reference:Rs,expects:"unknown",async:!1,get"~standard"(){return _s(this)},"~run":t=>(t.typed=!0,t)}}let Cs;class Ds extends lt{getRTCPeerConnection(){return this.webRTCPeer?this.webRTCPeer.getRTCPeer():null}stop(){var t;Cs.info("Stopping"),this.webRTCPeer.closeRTCPeer(),null==(t=this.signaling)||t.close(),this.signaling=null,this.stopReconnection=!0,this.webRTCPeer=new Pe}isActive(){const t=this.webRTCPeer.getRTCPeerStatus();return Cs.info("Broadcast status: ",t||"not_established"),"connected"===t}setReconnect(){this.signaling.on("migrate",()=>this.replaceConnection()),this.autoReconnect&&(this.signaling.on(ze,()=>{(this.firstReconnection||!this.alreadyDisconnected)&&(this.firstReconnection=!1,this.reconnect({error:new m("Signaling error: wsConnectionError")}))}),this.webRTCPeer.on(ke.connectionStateChange,t=>{Q(t),"connected"===t&&X(new Date),("failed"===t||"disconnected"===t&&this.alreadyDisconnected)&&this.firstReconnection?(this.firstReconnection=!1,this.reconnect({error:new m("Connection state change: RTCPeerConnectionState disconnected")})):"disconnected"===t?(this.alreadyDisconnected=!0,u(()=>this.reconnect({error:new m("Connection state change: RTCPeerConnectionState disconnected")}),1500)):this.alreadyDisconnected=!1}))}async reconnect(t){try{Cs.info("Attempting to reconnect..."),!this.isActive()&&!this.stopReconnection&&!this.isReconnecting&&(this.stop(),this.emit("reconnect",{timeout:Bs(this.reconnectionInterval),error:null!=t&&t.error?null==t?void 0:t.error:new m("Attempting to reconnect")}),this.isReconnecting=!0,await this.connect(this.options),this.alreadyDisconnected=!1,this.reconnectionInterval=1e3,this.firstReconnection=!0,this.isReconnecting=!1)}catch(t){this.isReconnecting=!1,this.reconnectionInterval=Bs(this.reconnectionInterval),Cs.error("Reconnection failed, retrying in ".concat(this.reconnectionInterval,"ms. "),t),u(()=>this.reconnect({error:t}),this.reconnectionInterval)}}constructor(t,i,e,s){if(super(),Cs=e,!i)throw Cs.error("Token generator is required to construct this module."),new m("Token generator is required to construct this module.");this.webRTCPeer=new Pe,this.signaling=null,this.autoReconnect=s,this.reconnectionInterval=1e3,this.alreadyDisconnected=!1,this.firstReconnection=!0,this.stopReconnection=!1,this.isReconnecting=!1,this.tokenGenerator=i,this.options=null}}const Bs=t=>t<32e3?2*t:t,Ns=s.RTCRtpSender&&!!RTCRtpSender.prototype.createEncodedStreams&&s.RTCRtpReceiver&&!!RTCRtpReceiver.prototype.createEncodedStreams,Ms="RTCRtpScriptTransform"in s,Ls='(function(){"use strict";function z(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var U={exports:{}};/*!\n * js-logger - http://github.com/jonnyreeves/js-logger\n * Jonny Reeves, http://jonnyreeves.co.uk/\n * js-logger may be freely distributed under the MIT license.\n */var q=U.exports,D;function V(){return D||(D=1,function(t){(function(n){var e={};e.VERSION="1.6.1";var i,r={},o=function(s,u){return function(){return u.apply(s,arguments)}},a=function(){var s=arguments,u=s[0],h,c;for(c=1;c<s.length;c++)for(h in s[c])!(h in u)&&s[c].hasOwnProperty(h)&&(u[h]=s[c][h]);return u},d=function(s,u){return{value:s,name:u}};e.TRACE=d(1,"TRACE"),e.DEBUG=d(2,"DEBUG"),e.INFO=d(3,"INFO"),e.TIME=d(4,"TIME"),e.WARN=d(5,"WARN"),e.ERROR=d(8,"ERROR"),e.OFF=d(99,"OFF");var l=function(s){this.context=s,this.setLevel(s.filterLevel),this.log=this.info};l.prototype={setLevel:function(s){s&&"value"in s&&(this.context.filterLevel=s)},getLevel:function(){return this.context.filterLevel},enabledFor:function(s){var u=this.context.filterLevel;return s.value>=u.value},trace:function(){this.invoke(e.TRACE,arguments)},debug:function(){this.invoke(e.DEBUG,arguments)},info:function(){this.invoke(e.INFO,arguments)},warn:function(){this.invoke(e.WARN,arguments)},error:function(){this.invoke(e.ERROR,arguments)},time:function(s){typeof s=="string"&&s.length>0&&this.invoke(e.TIME,[s,"start"])},timeEnd:function(s){typeof s=="string"&&s.length>0&&this.invoke(e.TIME,[s,"end"])},invoke:function(s,u){i&&this.enabledFor(s)&&i(u,a({level:s},this.context))}};var f=new l({filterLevel:e.OFF});(function(){var s=e;s.enabledFor=o(f,f.enabledFor),s.trace=o(f,f.trace),s.debug=o(f,f.debug),s.time=o(f,f.time),s.timeEnd=o(f,f.timeEnd),s.info=o(f,f.info),s.warn=o(f,f.warn),s.error=o(f,f.error),s.log=s.info})(),e.setHandler=function(s){i=s},e.setLevel=function(s){f.setLevel(s);for(var u in r)r.hasOwnProperty(u)&&r[u].setLevel(s)},e.getLevel=function(){return f.getLevel()},e.get=function(s){return r[s]||(r[s]=new l(a({name:s},f.context)))},e.createDefaultHandler=function(s){s=s||{},s.formatter=s.formatter||function(p,_){_.name&&p.unshift("["+_.name+"]")};var u={},h=function(c,p){Function.prototype.apply.call(c,console,p)};return typeof console>"u"?function(){}:function(c,p){c=Array.prototype.slice.call(c);var _=console.log,g;p.level===e.TIME?(g=(p.name?"["+p.name+"] ":"")+c[0],c[1]==="start"?console.time?console.time(g):u[g]=new Date().getTime():console.timeEnd?console.timeEnd(g):h(_,[g+": "+(new Date().getTime()-u[g])+"ms"])):(p.level===e.WARN&&console.warn?_=console.warn:p.level===e.ERROR&&console.error?_=console.error:p.level===e.INFO&&console.info?_=console.info:p.level===e.DEBUG&&console.debug?_=console.debug:p.level===e.TRACE&&console.trace&&(_=console.trace),s.formatter(c,p),h(_,c))}},e.useDefaults=function(s){e.setLevel(s&&s.defaultLevel||e.DEBUG),e.setHandler(e.createDefaultHandler(s))},e.setDefaults=e.useDefaults,t.exports?t.exports=e:(e._prevLogger=n.Logger,e.noConflict=function(){return n.Logger=e._prevLogger,e},n.Logger=e)})(q)}(U)),U.exports}var j=V(),R=z(j);class w{constructor(n){this.data=n,this.bitOffset=0}readBits(n){if(this.bitOffset+n>this.data.length*8)throw new Error("Attempted to read past the end of the bitstream");let e=0;for(let i=0;i<n;i++){const r=Math.floor(this.bitOffset/8),o=7-this.bitOffset%8,a=this.data[r]>>o&1;e|=a<<n-1-i,this.bitOffset++}return e}skip(n){this.bitOffset+=n}readExpGolombUnsigned(){let n=-1;for(let e=0;e===0;n++)e=this.readBits(1);return(1<<n)-1+this.readBits(n)}readExpGolombSigned(){const n=this.readExpGolombUnsigned();return n%2===0?-(n/2):(n+1)/2}}const m={SLICE_NON_IDR:1,SLICE_PARTITION_A:2,SLICE_IDR:5,SEI_H264:6,SEI_H265_PREFIX:39,SEI_H265_SUFFIX:40,SPS_H264:7,SPS_H265:33,PPS_H264:8,PPS_H265:34},G={PIC_TIMING:1,USER_DATA_UNREGISTERED:5},E={LEGACY:1,NEW:2,TIMECODE:3,OTHER:4},Y="6e9cfd2a-5907-49ff-b363-8978a6e8340e",X="9a21f3be-31f0-4b78-b0be-c7f7dbb97250",P="d40e38ea-d419-4c62-94ed-20ac37b4e4fa";class ${constructor(n="H264"){this.sps=new Map,this.pps=new Map,this.activeSPS=null,this.codec=n}collectPPS(n){this.codec==="H264"?this.collectH264PPS(n):this.collectH265PPS(n)}collectSPS(n){this.codec==="H264"?this.collectH264SPS(n):this.collectH265SPS(n)}collectH264SPS(n){const e=new w(n),i=e.readBits(8),r=[100,110,122,244,44,83,86,118,128,138,139,134,135];e.skip(8),e.skip(8);const o=e.readExpGolombUnsigned();if(o>31||o<0)throw new Error("Invalid seq_parameter_set_id");if(r.includes(i)){const l=e.readExpGolombUnsigned();if(l===3&&e.skip(1),e.readExpGolombUnsigned(),e.readExpGolombUnsigned(),e.skip(1),e.readBits(1)){const s=l!==3?8:12;for(let u=0;u<s;u++)if(e.readBits(1)){const h=u<6?16:64;let c=8,p=8;for(let _=0;_<h;_++){if(p!==0){const g=e.readExpGolombSigned();p=(c+g+256)%256}c=p===0?c:p}}}}e.readExpGolombUnsigned();const a=e.readExpGolombUnsigned();if(a===0)e.readExpGolombUnsigned();else if(a===1){e.skip(1),e.readExpGolombSigned(),e.readExpGolombSigned();const l=e.readExpGolombUnsigned();for(let f=0;f<l;f++)e.readExpGolombSigned()}e.readExpGolombUnsigned(),e.skip(1),e.readExpGolombUnsigned(),e.readExpGolombUnsigned(),e.readBits(1)===0&&e.skip(1),e.skip(1),e.readBits(1)&&(e.readExpGolombUnsigned(),e.readExpGolombUnsigned(),e.readExpGolombUnsigned(),e.readExpGolombUnsigned());let d;if(e.readBits(1)){let f=function(c){const p=c.readExpGolombUnsigned();c.skip(4),c.skip(4);for(let x=0;x<=p;x++)c.readExpGolombUnsigned(),c.readExpGolombUnsigned(),c.skip(1);c.skip(5);const _=c.readBits(5),g=c.readBits(5),B=c.readBits(5);return{cpb_removal_delay_length_minus1:_,dpb_output_delay_length_minus1:g,time_offset_length:B}};e.readBits(1)&&e.readBits(8)===255&&(e.skip(16),e.skip(16)),e.readBits(1)&&e.skip(1),e.readBits(1)&&(e.skip(3),e.skip(1),e.readBits(1)&&e.skip(24)),e.readBits(1)&&(e.readExpGolombUnsigned(),e.readExpGolombUnsigned());const l=e.readBits(1)?{num_units_in_tick:e.readBits(32),time_scale:e.readBits(32),fixed_frame_rate_flag:e.readBits(1)}:void 0,s=e.readBits(1)?f(e):void 0,u=e.readBits(1)?f(e):void 0;(s||u)&&e.skip(1);const h=e.readBits(1);d={timing_info:l,nal_hrd_parameters:s,vcl_hrd_parameters:u,pic_struct_present_flag:h}}this.sps.set(o,{vui_parameters:d})}collectH265SPS(n){}collectH264PPS(n){const e=new w(n),i=e.readExpGolombUnsigned();if(i>255||i<0)throw new Error("Invalid pic_parameter_set_id");const r=e.readExpGolombUnsigned();this.pps.set(i,{seq_parameter_set_id:r})}collectH265PPS(n){}findActiveSPS(n){const e=new w(n);e.readExpGolombUnsigned(),e.readExpGolombUnsigned();const i=e.readExpGolombUnsigned(),r=this.pps.get(i);if(r){const o=this.sps.get(r.seq_parameter_set_id);if(o){this.activeSPS=o;return}}throw new Error("Cannot find the active SPS")}}const S=new $;function O(t,n){for(;n<t.byteLength-4;){if(t[n]===0&&t[n+1]===0&&(t[n+2]===1||t[n+2]===0&&t[n+3]===1))return n;n+=1}return-1}function T(t){const n=new Uint8Array(t.byteLength);let e=0,i=0;for(let r=2;r<t.byteLength;r++)t[r]===3&&t[r-1]===0&&t[r-2]===0&&(n.set(t.subarray(i,r),e),e+=r-i,i=r+1);return i<t.byteLength&&n.set(t.subarray(i),e),n}function J(t,n){let e=0;const i=n==="H264"?1:2,r=[];for(;e<t.byteLength-4;){const o=O(t,e);if(o>=e){const a=t[o+2]===1?3:4,d=O(t,o+a+i);if(d>o)r.push(t.subarray(o,d)),e=d;else{r.push(t.subarray(o));break}}else break}return r}function K(t,n){let e=!0;return J(t,n).filter(i=>{const r=i[2]===1?3:4,o=n==="H264"?1:2,a=i[r],d=n==="H264"?a&31:a>>1&63;if(e)switch(d){case m.PPS_H264:case m.PPS_H265:S.collectPPS(T(i.subarray(r+o)));break;case m.SPS_H264:case m.SPS_H265:S.collectSPS(T(i.subarray(r+o)));break;case m.SLICE_IDR:case m.SLICE_NON_IDR:case m.SLICE_PARTITION_A:try{S.findActiveSPS(T(i.subarray(r+o))),e=!1}catch(l){console.info("Failed to find active SPS. Will not be able to extract PIC timing metadata")}break}return[m.SEI_H264,m.SEI_H265_PREFIX,m.SEI_H265_SUFFIX].includes(d)})}function Z(t){let n=0,e=0;for(;t[e]===255;)n+=255,e++;n+=t[e],e++;let i=0;for(;t[e]===255;)i+=255,e++;return i+=t[e],e++,{type:n,content:t.subarray(e,e+i)}}function Q(t){const n=new Uint8Array(L(X)),e=new Uint8Array(L(Y)),i=new Uint8Array(L(P));return n.every((r,o)=>r===t[o])?E.TIMECODE:e.every((r,o)=>r===t[o])?E.LEGACY:i.every((r,o)=>r===t[o])?E.NEW:E.OTHER}function ee(t,n){let e=0;t.uuid=n.subarray(e,e+16),e+=16;const i=Q(t.uuid),r=n.subarray(e);switch(i){case E.LEGACY:case E.OTHER:t.unregistered=r;break;case E.TIMECODE:t.timecode=C(r);break;case E.NEW:{let o=0;const a=H(Date.now()).length,d=r.subarray(o,a);o+=a;const l=r.subarray(o);t.timecode=C(d),t.unregistered=l;break}}}function C(t){const n=t.reduce((o,a)=>(o<<BigInt(8))+BigInt(a),BigInt(0)),e=Number(n),i=new Date(e);return new TextEncoder().encode(i.toISOString())}function te(t,n){var f,s,u,h,c;if(!S.activeSPS){console.warn("Cannot find the active SPS");return}const e=(f=S.activeSPS.vui_parameters.nal_hrd_parameters)!=null?f:S.activeSPS.vui_parameters.vcl_hrd_parameters,i={cpb_dpb_delays_present_flag:e?1:0,cpb_removal_delay_length_minus1:(s=e==null?void 0:e.cpb_removal_delay_length_minus1)!=null?s:23,dpb_output_delay_length_minus1:(u=e==null?void 0:e.dpb_output_delay_length_minus1)!=null?u:23,time_offset_length:e?(h=e.time_offset_length)!=null?h:24:void 0,pic_struct_present_flag:(c=S.activeSPS.vui_parameters.pic_struct_present_flag)!=null?c:0};if(!i.pic_struct_present_flag){console.warn("pic_struct_present_flag is not present");return}const r=new w(n);i.cpb_dpb_delays_present_flag&&(r.skip(i.cpb_removal_delay_length_minus1+1),r.skip(i.dpb_output_delay_length_minus1+1));const o=[1,1,1,2,2,3,3,2,3],a=r.readBits(4);if(a>=o.length)throw new Error("Invalid pic_struct");const d=o[a],l=[];for(let p=0;p<d;p++)if(r.readBits(1)){const g={};r.skip(2),r.skip(1),r.skip(5);const B=r.readBits(1);if(r.skip(2),g.n_frames=r.readBits(8),B?(g.seconds_value=r.readBits(6),g.minutes_value=r.readBits(6),g.hours_value=r.readBits(5)):r.readBits(1)&&(g.seconds_value=r.readBits(6),r.readBits(1)&&(g.minutes_value=r.readBits(6),r.readBits(1)&&(g.hours_value=r.readBits(5)))),i.time_offset_length)try{g.time_offset=r.readBits(i.time_offset_length)}catch(x){console.error("Failed to read time_offset",x),g.time_offset=0}else g.time_offset=0;l.push(g)}t.seiPicTimingTimeCodeArray=l}function ne(t,n){if(n!=="H264"&&n!=="H265")throw new Error("Unsupported codec ".concat(n));const e={};return S.codec=n,K(new Uint8Array(t.data),n).forEach(i=>{const r=i[2]===1?3:4,o=n==="H264"?1:2,a=T(i.subarray(r+o)),d=Z(a);switch(d.type){case G.PIC_TIMING:te(e,d.content);break;case G.USER_DATA_UNREGISTERED:ee(e,d.content);break}}),e}function re(t){return/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(t)}function L(t){return t.replace(/-/g,"").match(/.{1,2}/g).map(n=>parseInt(n,16))}function ie(t,n,e){const i=new Uint8Array(L(t)),r=H(e),o=new TextEncoder().encode(JSON.stringify(n)),a=new Uint8Array(i.length+r.length+o.length);return a.set(i),a.set(r,i.length),a.set(o,r.length+i.length),a}function se(t){const n=[],e=Math.floor(t.byteLength/255),i=t.byteLength%255;for(let r=0;r<e;r++)n.push(255);return n.push(i),new Uint8Array([5,...n])}function oe(t){const n=[];for(let e=0;e<t.byteLength;e++)e+2<t.byteLength&&[0,1,2,3].includes(t[e+2])&&t[e]===0&&t[e+1]===0?(n.push(t[e]),n.push(t[e+1]),e+=2,n.push(3)):n.push(t[e]);return n.push(128),new Uint8Array(n)}function H(t){const n=[];if(!isNaN(t)){const e=BigInt(t);for(let i=0;i<Math.ceil(Math.floor(Math.log2(new Number(t))+1)/8);i++)n.unshift(new Number(e>>BigInt(8*i)&BigInt(255)))}return new Uint8Array(n)}function ae({uuid:t,payload:n,timecode:e}){const i=[0,0,0,1],r=[102],o=ie(t,n,e),a=se(o),d=oe(o),l=new Uint8Array(i.length+r.length+a.length+d.length);return l.set(i),l.set(r,i.length),l.set(a,i.length+r.length),l.set(d,i.length+r.length+a.length),l}function ce({uuid:t,payload:n,timecode:e},i){if(t===""||n==="")throw new Error("uuid and payload cannot be empty");re(t)||(console.warn("Invalid UUID. Using default UUID."),t=P,e=Date.now());const r=ae({uuid:t,payload:n,timecode:e}),o=new DataView(i.data),a=new ArrayBuffer(i.data.byteLength+r.byteLength),d=new DataView(a);for(let l=0;l<i.data.byteLength;l++)d.setUint8(l,o.getUint8(l));for(let l=0;l<r.byteLength;l++)d.setUint8(i.data.byteLength+l,r[l]);i.data=a}R.get("TransformWorker").setLevel(R.DEBUG);const le=2e3,b=[];let y="",k={};const v={};let I=[];function M(t){return new TransformStream({start(){},flush(){},async transform(n,e){var i,r;if(N(n)){const o=((i=k[n.getMetadata().payloadType])==null?void 0:i.toUpperCase())||(y==null?void 0:y.toUpperCase());if(o==="H264"){const a=ne(n,o);(a.timecode||a.unregistered||((r=a.seiPicTimingTimeCodeArray)==null?void 0:r.length)>0)&&self.postMessage({event:"metadata",mid:t,metadata:a})}self.postMessage({event:"complete",frame:{type:n.type,timestamp:n.timestamp,data:n.data}})}e.enqueue(n)}})}function N(t){if(typeof RTCEncodedVideoFrame<"u")try{if(t instanceof RTCEncodedVideoFrame)return!0}catch(n){}return!!(t.constructor&&t.constructor.name==="RTCEncodedVideoFrame"||typeof t.width=="number"&&typeof t.height=="number"||t.type==="video")}function F(){Object.keys(v).sort().join()===I.sort().join()&&(b.shift(),I=[])}function de(t){const n=new Date().getTime();v[t]=n,Object.keys(v).filter(i=>n-v[i]>le).forEach(i=>{delete v[i],delete I[i]}),F()}function W(){return new TransformStream({start(){},flush(){},async transform(t,n){if(N(t)){const i=t.getMetadata().synchronizationSource;if(de(i),!I.includes(i)&&b.length)try{if(!/(h26[4])/.test(y))throw new Error("Sending metadata is not supported with any other codec other than H.264");b[0].uuid===P&&(b[0].timecode=Date.now()),ce(b[0],t),I.push(i)}catch(r){console.error(r)}finally{F()}}n.enqueue(t)}})}function A({readable:t,writable:n},e){t.pipeThrough(e).pipeTo(n)}addEventListener("rtctransform",t=>{let n;if(t.transformer.options.name==="senderTransform")y=t.transformer.options.codec,n=W();else if(t.transformer.options.name==="receiverTransform")k=t.transformer.options.payloadTypeCodec||{},y=t.transformer.options.codec||"",n=M(t.transformer.options.mid);else return;A(t.transformer,n)}),addEventListener("message",t=>{const{action:n}=t.data;switch(n){case"insertable-streams-sender":y=t.data.codec,A(t.data,W());break;case"insertable-streams-receiver":k=t.data.payloadTypeCodec||{},y=t.data.codec||"",A(t.data,M(t.data.mid));break;case"metadata-sei-user-data-unregistered":b.push({uuid:t.data.uuid,payload:t.data.payload});break}})})();\n',Os=typeof self<"u"&&self.Blob&&new Blob([Ls],{type:"text/javascript;charset=utf-8"});function Fs(t){let i;try{if(i=Os&&(self.URL||self.webkitURL).createObjectURL(Os),!i)throw"";const e=new ad(i,{name:null==t?void 0:t.name});return e.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(i)}),e}catch(i){return new ad("data:text/javascript;charset=utf-8,"+encodeURIComponent(Ls),{name:null==t?void 0:t.name})}finally{i&&(self.URL||self.webkitURL).revokeObjectURL(i)}}const Us=at.get("Publish"),Vs={mediaStream:null,bandwidth:0,metadata:!1,disableVideo:!1,disableAudio:!1,codec:ye.H264,simulcast:!1,scalabilityMode:null,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};let Hs;const Ws=t=>{Hs=Hs||Ss({sourceId:Ts(Ps()),stereo:Ts(bs()),dtx:Ts(bs()),absCaptureTime:Ts(bs()),dependencyDescriptor:Ts(bs()),mediaStream:Ts(Is([As(Rs()),Rs()])),bandwidth:Ts(ks()),metadata:Ts(bs()),disableVideo:Ts(bs()),disableAudio:Ts(bs()),codec:Ts(Es(w.values(ye))),simulcast:Ts(bs()),scalabilityMode:Ts(Ps()),peerConfig:Ts(Ss({autoInitStats:Ts(bs()),statsIntervalMs:Ts(ks())})),record:Ts(bs()),events:Ts(As(Es(["active","inactive","viewercount"]))),priority:Ts(ks())});const{success:i,issues:e}=function(t,i,e){const s=t["~run"]({value:i},ls(e));return{typed:s.typed,success:!s.issues,output:s.value,issues:s.issues}}(Hs,t);i||Us.warn(new ms(e),t)};function qs(t){if(!t)return new j;const i=t.length,e=new j(i/2);for(let s=0;s<i;s+=2)e[s/2]=x(t.substr(s,2),16);return e}function zs(t,i,e){if(w.prototype.hasOwnProperty.call(t,e)&&w.prototype.hasOwnProperty.call(i,e)){const s=t[e];t[e]=i[e],i[e]=s}else console.error('One or both objects do not have the property "'.concat(e,'"'))}function Gs(t,i,e,s){return new(e||(e=Promise))(function(n,r){function h(t){try{a(s.next(t))}catch(t){r(t)}}function o(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e(function(t){t(i)})).then(h,o)}a((s=s.apply(t,i||[])).next())})}const Xs=Qs;var js;function Qs(t,i){const e=nn();return(Qs=function(t,i){return e[t-=440]})(t,i)}!function(){const t=Qs,i=nn();for(;;)try{if(-x(t(447))/1+x(t(445))/2+x(t(449))/3*(x(t(454))/4)+x(t(453))/5+-x(t(456))/6+x(t(450))/7+-x(t(441))/8*(-x(t(455))/9)==847340)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Ks=od&&od[Xs(448)]||"",Ys=od&&od[Xs(443)]||"",Js=!(null==s||!s.RTCRtpScriptTransform),Zs=Ks.includes("Firefox"),$s=!Zs&&Ys.includes("Apple"),tn=!Zs&&!$s&&Ks[Xs(440)](Xs(451)),en=!Zs&&!$s&&!tn&&Ks[Xs(440)](Xs(446)),sn=(null===(js=null==od?void 0:od[Xs(442)])||void 0===js?void 0:js[Xs(452)])||(null==od?void 0:od[Xs(452)])||"";function nn(){const t=["1583117AOxBcs","userAgent","153Sdjzsk","5371359GvUFPp","Edg","platform","7141470dfeDnP","10068LWEgOs","243621EPkoPw","8310150fEFCnA","includes","328VMcnkw","userAgentData","vendor","Win32","763310RGZQro","Chrome"];return(nn=function(){return t})()}const rn={supportsRtpScriptTransform:Js,isFirefox:Zs,isSafari:$s,isEdge:tn,isChrome:en,platform:sn,isWindows:"Windows"===sn||sn===Xs(444)},hn=on;function on(t,i){const e=ln();return(on=function(t,i){return e[t-=300]})(t,i)}!function(){const t=on,i=ln();for(;;)try{if(-x(t(327))/1+x(t(304))/2*(x(t(300))/3)+-x(t(332))/4*(x(t(316))/5)+-x(t(322))/6*(x(t(311))/7)+x(t(308))/8*(-x(t(307))/9)+x(t(314))/10*(x(t(302))/11)+x(t(329))/12==997665)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();class an{[hn(323)](){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];const s=hn;cn[s(319)]>=4&&console[s(323)](this[s(310)],...i)}[hn(331)](){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];const s=hn;cn[s(319)]>=3&&console[s(331)](this[s(310)],...i)}[hn(320)](){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];const s=hn;cn[s(319)]>=2&&console[s(320)](this[s(310)],...i)}error(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];cn[hn(319)]>=1&&console.error(this.tag,...i)}constructor(t){this[on(310)]=t}}function un(t){return new an(t)}const cn={logLevel:3,mediaDumps:{video:{in:{durationMs:0,delimited:!0},out:{durationMs:0}},audio:{in:{durationMs:0},out:{durationMs:0}}}};function dn(){return(new Date)[hn(317)]().slice(11,-1)}function ln(){const t=["mediaBuffer","click","529321KfbOwo","endTimestampMs","28972188cmcnxe","containerFileExt","info","4ZlZeJQ","9kyfNFe","mediaType","172953TzXwsI","byteLength","1327806tybvjI","href","createObjectURL","1089qysnCz","112088WLFXHK","substring","tag","692993ZcAeLj","set","download","810qiScYX","startTimestampMs","8821555KArxhe","toISOString","application/octet-stream","logLevel","warn","revokeObjectURL","42PDuKrJ","debug","targetDurationMs"];return(ln=function(){return t})()}class fn{append(t,i){const e=hn;if(!this[e(325)])return!1;if(this[e(325)]=function(t,i){const e=hn,s=new j((0|t[e(303)])+(0|i.byteLength));return s[e(312)](t,0),s[e(312)](i,0|t.byteLength),s}(this[e(325)],t),void 0!==i)if(-1===this[e(315)])this.startTimestampMs=i,this[e(328)]=i+this[e(324)];else if(i>=this[e(328)]){const t=(new Date)[e(317)]()[e(309)](0,19).replace(/:/g,"-"),i=this.mediaType+"-"+t+"."+this.containerFileExt;return function(t,i,e){void 0===e&&(e=hn(318));const s=hn,n=h.createElement("a"),r=new Blob([t],{type:e});n.href=URL[s(306)](r),n[s(313)]=i,n[s(326)](),URL[s(321)](n[s(305)])}(this[e(325)],i),this.mediaBuffer=null,!1}return!0}constructor(t,i,e){const s=hn;this[s(325)]=null,this[s(315)]=-1,this.endTimestampMs=-1,this[s(301)]=t,this[s(330)]=i,this[s(324)]=e,e>0&&(this[s(325)]=new j)}}const vn=mn;!function(){const t=mn,i=Cn();for(;;)try{if(x(t(160))/1+-x(t(363))/2+-x(t(321))/3*(-x(t(401))/4)+x(t(229))/5+-x(t(276))/6+x(t(400))/7*(-x(t(153))/8)+-x(t(223))/9==858456)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const _n=un("[MUX]"),gn=rn[vn(387)];function pn(t,i){const e=vn;let s=new j((0|t[e(413)])+(0|i[e(413)]));return s.set(t,0),s[e(251)](i,0|t[e(413)]),s}function mn(t,i){const e=Cn();return(mn=function(t,i){return e[t-=147]})(t,i)}function wn(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=1/0),((t,i,e,s)=>{const n=vn,r=s[n(425)]||1;i*=r,e*=r;const h=(u=t)instanceof ArrayBuffer?u:u[vn(366)],o=(t[n(188)]||0)+t[n(413)],a=(t[n(188)]||0)+i;var u;let c=_[n(177)](0,_[n(291)](a,o)),d=_[n(291)](c+_[n(177)](e,0),o);return c/=r,d/=r,new s(h,c,d-c)})(t,i,e,j)}function yn(t){const i=vn,e=Array.from(t)[i(238)](t=>t[i(384)](0));return new j(e)}class An{static get[vn(449)](){return 1}static get[vn(427)](){return 5}static get SEI(){return 6}static get[vn(324)](){return 7}static get[vn(379)](){return 8}static get[vn(272)](){return 9}static get[vn(159)](){const t=vn;return{[An[t(427)]]:t(427),[An[t(273)]]:t(273),[An[t(324)]]:t(324),[An.PPS]:"PPS",[An[t(449)]]:"NDR",[An.AUD]:t(272)}}static[vn(234)](t){const i=vn;return t[i(186)]in An[i(159)]?An[i(159)][t.ntype]:i(344)}[vn(365)](){const t=vn;return An[t(234)](this)+": NRI: "+this[t(209)]()}[vn(209)](){return this[vn(402)]}[vn(234)](){return this[vn(186)]}[vn(306)](){return this[vn(186)]===An.IDR}[vn(203)](){return this[vn(452)]}[vn(327)](){return this[vn(452)].byteLength}[vn(194)](){return 4+this[vn(327)]()}[vn(341)](){const t=vn,i=new j(this[t(194)]());return new DataView(i[t(366)]).setUint32(0,this[t(194)]()-4),i[t(251)](this.getPayload(),4),i}constructor(t){const i=vn;this[i(452)]=t,this[i(402)]=(96&this[i(452)][0])>>5,this[i(186)]=31&this[i(452)][0],this.isvcl=1==this[i(186)]||5==this[i(186)],this[i(309)]="",this.isfmb=!1}}class bn{[vn(433)](t){const i=vn;this.data=t,this[i(368)]=0,this.bitLength=8*t[i(413)]}get[vn(451)](){return this[vn(157)]-this.index}skipBits(t){const i=vn;if(this[i(451)]<t)return!1;this[i(368)]+=t}[vn(338)](t,i){void 0===i&&(i=!0);const e=vn;return this[e(259)](t,this[e(368)],i)}getBits(t,i,e){void 0===e&&(e=!0);const s=vn;if(this[s(451)]<t)return 0;const n=i%8,r=this.data[i/8|0]&255>>>n,h=8-n;if(h>=t)return e&&(this[s(368)]+=t),r>>h-t;{e&&(this[s(368)]+=h);const n=t-h;return r<<n|this[s(259)](n,i+h,e)}}[vn(444)](){const t=vn;let i;for(i=0;i<this[t(157)]-this[t(368)];++i)if(0!==this[t(259)](1,this[t(368)]+i,!1))return this[t(368)]+=i,i;return i}[vn(334)](){const t=vn;this[t(155)](1+this[t(444)]())}skipEG(){const t=vn;this[t(155)](1+this[t(444)]())}[vn(179)](){const t=vn,i=this.skipLZ();return this[t(338)](i+1)-1}[vn(248)](){const t=this[vn(179)]();return 1&t?1+t>>>1:-1*(t>>>1)}[vn(239)](){return 1===this[vn(338)](1)}[vn(419)](t){return void 0===t&&(t=1),this.readBits(8*t)}[vn(232)](){return this.readBits(16)}readUInt(){return this[vn(338)](32)}constructor(t){const i=vn;this[i(316)]=t,this[i(368)]=0,this[i(157)]=8*t.byteLength}}class Sn{static[vn(267)](t,i){const e=vn;let s=[],n=!1,r=!1,h=!1,o=!1,a=0,u=0,c=0,d=[];for(;a<=t.byteLength;){if(a<t.byteLength){const i=t[a++];0!==i?(1===i&&u>1&&(c=u>2?4:3,d.push(a)),u=0):++u}else c=0,d.push(a++);if(d.length>1){const e=d.shift(),l=d[0]-c;if(e<l){let c=!1;const d=31&t[e];if(d===An.NDR?r=!0:d===An.IDR?n=!0:d===An.SPS?(c=h,h=!0):d===An.PPS&&(c=o,o=!0),!c)if(!i||d!==An.NDR&&d!==An.IDR)s.push(t.subarray(e,l));else{const i=new j(l-e);let n=0;for(a=e,u=0;a<l;){let e=t[a++];u>1&&3===e&&(u=0,e=t[a++]),0!==e?u=0:++u,i[n++]=e}s.push(i.subarray(0,n))}}}}let l=!0,f=!1;return r||n?r&&n&&(_n[e(265)](e(331)),l=!1):(_n[e(265)]("[H264Parser] No VCL NALUs found"),l=!1),n&&(h&&o?f=!0:_n.warn(e(158))),{valid:l,idr:f,nalus:s}}static[vn(333)](t,i){let e,s=8,n=8;for(let r=0;r<i;r++)0!==n&&(e=t.readEG(),n=(s+e+256)%256),s=0===n?s:n}static[vn(432)](t){const i=vn;let e,s,n,r,h,o,a=new bn(t),u=0,c=0,d=0,l=0,f=1;if(a.readUByte(),e=a[i(419)](),a.readBits(5),a[i(155)](3),a[i(419)](),a[i(334)](),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var v=a.readUEG();if(3===v&&a[i(155)](1),a[i(334)](),a[i(334)](),a[i(155)](1),a[i(239)]()){o=3!==v?8:12;for(let t=0;t<o;++t)a[i(239)]()&&(t<6?Sn[i(333)](a,16):Sn[i(333)](a,64))}}a[i(334)]();var g=a[i(179)]();if(0===g)a.readUEG();else if(1===g){a.skipBits(1),a[i(221)](),a[i(221)](),s=a[i(179)]();for(let t=0;t<s;++t)a[i(221)]()}if(a[i(334)](),a.skipBits(1),n=a[i(179)](),r=a.readUEG(),h=a[i(338)](1),0===h&&a[i(155)](1),a[i(155)](1),a.readBoolean()&&(u=a[i(179)](),c=a[i(179)](),d=a[i(179)](),l=a[i(179)]()),a[i(239)]()){if(a.readBoolean()){let t;switch(a.readUByte()){case 1:t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[a[i(419)]()<<8|a[i(419)](),a[i(419)]()<<8|a[i(419)]()]}t&&t[0]>0&&t[1]>0&&(f=t[0]/t[1])}a.readBoolean()&&a[i(155)](1),a[i(239)]()&&(a[i(155)](4),a[i(239)]()&&a[i(155)](24)),a[i(239)]()&&(a[i(334)](),a[i(334)]()),a.readBoolean()&&(a.readUInt(),a[i(187)](),a.readBoolean())}return{width:_[i(440)]((16*(n+1)-2*u-2*c)*f),height:(2-h)*(r+1)*16-(h?2:4)*(d+l)}}static[vn(386)](t){const i=vn;let e=new bn(t[i(203)]());e[i(419)](),t[i(196)]=0===e[i(179)](),t[i(309)]=e[i(179)]()}[vn(256)](t){const i=vn;var e=Sn[i(432)](new j(t));this.track[i(237)]=e.width,this[i(233)].height=e.height,this.track[i(382)]=[new j(t)],this.track[i(210)]=i(292);let s=new DataView(t.buffer,t[i(188)]+1,4);for(let t=0;t<3;++t){var n=s[i(313)](t)[i(365)](16);n[i(268)]<2&&(n="0"+n),this.track[i(210)]+=n}}[vn(345)](t){const i=vn;this[i(233)][i(434)]=[new j(t)]}[vn(378)](t){const i=vn;if(!t)return!1;let e=!1;switch(t[i(234)]()){case An[i(427)]:case An.NDR:e=!0;break;case An[i(379)]:!this[i(233)][i(434)]&&(this[i(345)](t.getPayload()),!this[i(175)][i(296)]&&this[i(233)][i(434)]&&this.track[i(382)]&&(this.remuxer[i(296)]=!0)),e=!0;break;case An[i(324)]:!this.track.sps&&(this[i(256)](t[i(203)]()),!this[i(175)][i(296)]&&this[i(233)].pps&&this[i(233)][i(382)]&&(this.remuxer[i(296)]=!0)),e=!0;break;case An[i(272)]:break;case An.SEI:e=!0}return e}constructor(t){const i=vn;this.remuxer=t,this[i(233)]=t.mp4track}}class Tn{on(t,i){const e=vn;return!this[e(270)][t]&&(this.listener[t]=[]),this[e(270)][t].push(i),!0}off(t,i){const e=vn;if(this[e(270)][t]){var s=this[e(270)][t].indexOf(i);return s>-1&&this[e(270)][t][e(369)](s,1),!0}return!1}[vn(219)](){this.listener={}}[vn(225)](t,i){const e=vn;return!!this[e(270)][t]&&(this[e(270)][t].map(t=>{t[e(200)](null,[i])}),!0)}constructor(t){const i=vn;this.listener={},this[i(234)]=""|t}}class kn{static box(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=vn;let r,h=8,o=e.length,a=o;for(;o--;)e[o]&&(h+=e[o].byteLength);for(r=new j(h),r[0]=h>>>24,r[1]=h>>>16&255,r[2]=h>>>8&255,r[3]=255&h,r[n(251)](t,4),o=0,h=8;o<a;++o)e[o]&&(r[n(251)](e[o],h),h+=e[o][n(413)]);return r}[vn(190)](t){const i=vn;return kn[i(347)](kn[i(212)][i(190)],kn[i(418)][t])}[vn(244)](t){const i=vn;return kn[i(347)](kn[i(212)][i(244)],t)}[vn(380)](t,i){const e=vn;return kn[e(347)](kn[e(212)][e(380)],new j([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,0,0,0,0,85,196,0,0]))}[vn(215)](t){const i=vn;return kn[i(347)](kn[i(212)].mdia,this[i(380)](t[i(274)],t[i(290)]),this[i(190)](t[i(234)]),this[i(230)](t))}[vn(443)](t){const i=vn;return kn.box(kn[i(212)][i(443)],new j([0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[vn(230)](t){const i=vn;return t[i(234)]===i(407)?kn[i(347)](kn[i(212)][i(230)],kn.box(kn.types[i(255)],kn.SMHD),kn[i(147)],this[i(362)](t)):kn[i(347)](kn.types[i(230)],kn[i(147)],this[i(362)](t),kn[i(347)](kn[i(212)].vmhd,kn[i(438)]))}[vn(370)](t,i,e){const s=vn;return kn[s(347)](kn.types.moof,this[s(443)](t),this[s(293)](e,i))}[vn(295)](t,i,e){const s=vn;let n=t[s(268)],r=[];for(;n--;)r[n]=this.trak(t[n]);return kn.box[s(200)](null,[kn[s(212)][s(295)],this[s(240)](e,i),this[s(447)](t)][s(389)](r)[s(389)](this[s(322)](t)))}[vn(322)](t){const i=vn;let e=t[i(268)],s=[];for(;e--;)s[e]=this[i(305)](t[e]);return kn[i(347)][i(200)](null,[kn[i(212)][i(322)]][i(389)](s))}[vn(240)](t,i){const e=vn;let s=new j([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return kn[e(347)](kn.types.mvhd,s)}[vn(420)](t){const i=vn;let e=t[i(428)]||[],s=new j(4+e.length);for(let t=0;t<e[i(268)];t++){const n=e[t][i(375)];s[t+4]=n.dependsOn<<4|n[i(149)]<<2|n[i(422)]}return kn[i(347)](kn[i(212)][i(420)],s)}[vn(362)](t){const i=vn;return kn[i(347)](kn.types[i(362)],this[i(165)](t),kn.box(kn[i(212)][i(329)],kn[i(421)]),kn[i(347)](kn.types[i(227)],kn[i(377)]),kn[i(347)](kn.types[i(235)],kn[i(218)]),kn[i(347)](kn[i(212)].stco,kn[i(213)]))}[vn(303)](t){const i=vn;let e,s,n,r=[],h=[];for(e=0;e<t[i(382)].length;e++)s=t.sps[e],n=s[i(413)],r.push(n>>>8&255),r.push(255&n),r=r[i(389)](Array.prototype[i(314)][i(395)](s));for(e=0;e<t[i(434)][i(268)];e++)s=t[i(434)][e],n=s[i(413)],h[i(406)](n>>>8&255),h[i(406)](255&n),h=h.concat(Array.prototype[i(314)].call(s));const o=kn[i(347)](kn[i(212)][i(408)],new j([1,r[3],r[4],r[5],255,224|t.sps[i(268)]].concat(r)[i(389)]([t[i(434)][i(268)]]).concat(h))),a=t[i(237)],u=t[i(374)],c=kn[i(347)](kn.types[i(441)],kn.box(kn[i(212)][i(318)],new j([97,118,99,49])),kn[i(347)](kn[i(212)][i(349)],new j([0,0,0,0,...yn(this[i(285)][i(154)][i(415)][i(201)]),0,1,0,0])),kn.box(kn.types[i(217)],this[i(298)](i(415))));return kn[i(347)](kn[i(212)].encv,new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,255&a,u>>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),o,c)}[vn(372)](t){const i=vn;let e=t[i(154)][i(413)],s=new j(26+e+3);return s[i(251)]([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5,e]),s[i(251)](t[i(154)],26),s.set([6,1,2],26+e),s}[vn(403)](t){const i=vn,e=t[i(354)];return kn[i(347)](kn[i(212)][i(403)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(390)],0,16,0,0,0,0,e>>>8&255,255&e,0,0]),kn[i(347)](kn[i(212)][i(372)],this[i(372)](t)))}[vn(266)](t){const i=vn,e=t[i(354)];return new j([0,t[i(390)],1,56,0,0,e>>>8&255,255&e,0,0,0])}[vn(416)](t){const i=vn,e=t.audiosamplerate;return kn[i(347)](kn.types[i(416)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(390)],0,16,0,0,0,0,e>>>8&255,255&e,0,0]),kn[i(347)](kn[i(212)][i(266)],this[i(266)](t)))}[vn(394)](t){const i=vn,e=kn[i(347)](kn.types[i(266)],this.dOps(t)),s=kn[i(347)](kn.types[i(441)],kn.box(kn.types.frma,new j([79,112,117,115])),kn[i(347)](kn.types.schm,new j([0,0,0,0,...yn(this[i(285)][i(154)].audio[i(201)]),0,1,0,0])),kn.box(kn.types[i(217)],this[i(298)](i(407)))),n=t[i(354)];return kn[i(347)](kn[i(212)].enca,new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[i(390)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),e,s)}[vn(165)](t){const i=vn;return t[i(234)]===i(407)?kn[i(347)](kn[i(212)][i(165)],kn[i(168)],t[i(199)]?this[i(394)](t):this[i(416)](t)):kn[i(347)](kn.types[i(165)],kn[i(168)],this[i(303)](t))}[vn(278)](t){const i=vn,e=t.id,s=t[i(290)],n=t[i(237)],r=t[i(374)],h=t[i(388)];return kn[i(347)](kn[i(212)].tkhd,new j([0,0,0,7,0,0,0,0,0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,0,0,0,0,s>>>24,s>>>16&255,s>>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,255&h,h%1*10&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,r>>>8&255,255&r,0,0]))}[vn(293)](t,i){var e;const s=vn,n=t.id,r=t[s(428)][0][s(171)],h=t.samples[0][s(290)],o=t[s(428)][0].flags,a=kn[s(347)](kn[s(212)].tfhd,new j([0,2,0,58,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,1,h>>>24,n>>>16&255,h>>>8&255,255&h,r>>>24,r>>>16&255,r>>>8&255,255&r,0,o[s(264)],0,0])),u=kn[s(347)](kn[s(212)].tfdt,new j([0,0,0,0,i>>>24,i>>>16&255,i>>>8&255,255&i]));if(t.encrypted){let i,n;if(t[s(234)]===s(415)?(i=!0,n=this[s(350)][s(415)]+(null==(e=t.samples[0][s(191)])?void 0:e.byteLength)):(i=!1,n=this[s(350)].audio),n>0){const e=this[s(242)](n),r=this[s(340)](t[s(428)],i),h=e[s(268)]+20+r[s(268)]+a[s(268)]+u[s(268)]+8+16+8+8,o=this[s(271)](t,h);return kn[s(347)](kn[s(212)][s(293)],a,u,o,e,this.saio(h-r[s(268)]+o.length+8),r)}{const i=this[s(340)](null,!1),e=i.length+a[s(268)]+u[s(268)]+8+16+8+8,n=this[s(271)](t,e);return kn[s(347)](kn.types[s(293)],a,u,n,i)}}return kn.box(kn[s(212)].traf,a,u,this.trun(t,a[s(268)]+u.length+8+16+8+8))}trak(t){const i=vn;return t.duration=t[i(290)]||4294967295,kn.box(kn[i(212)].trak,this[i(278)](t),this[i(215)](t))}[vn(305)](t){const i=vn,e=t.id;return kn[i(347)](kn.types[i(305)],new j([0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e,0,0,0,1,0,0,0,16,0,0,0,0,0,0,0,0]))}trun(t,i){const e=vn;let s=(t[e(428)]||[])[e(268)],n=new j(12);return i+=20,n.set([0,0,0,1,s>>>24,s>>>16&255,s>>>8&255,255&s,i>>>24,i>>>16&255,i>>>8&255,255&i],0),kn[e(347)](kn.types[e(271)],n)}[vn(224)](t,i){const e=vn,s=e(445),n=function(t){const i=function(t){const i=vn;let e="";for(let s=0;s<t[i(268)];s+=16e3){const n=t.subarray(s,s+16e3);e+=String[i(358)].apply(null,n)}return e}(wn(t));return btoa(i)}(function(t){const i=vn,e=[];return e[i(406)](t[3]),e[i(406)](t[2]),e.push(t[1]),e.push(t[0]),e[i(406)](t[5]),e[i(406)](t[4]),e.push(t[7]),e.push(t[6]),(t=wn(t))[i(251)](e,0),t}(t));return wn(function(t){const i=vn,e=new j(2*t[i(268)]),s=new DataView(e[i(366)]);for(let e=0;e<t[i(268)];++e){const n=t.charCodeAt(e);s[i(253)](2*e,n,true)}return e[i(366)]}([e(328)+s+'" version="4.3.0.0">',e(308),"<PROTECTINFO>",e(398),e(353),e(216)+n+'"',">",e(412),e(249),e(391),i?"<LA_URL>"+i+e(423):"",e(351),e(269)].join("")))}pssh(t){const i=vn;if(this[i(285)][i(383)][i(202)](i(178)))return kn[i(347)](kn.types[i(447)],new j([0,0,0,0,237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237,0,0,0,18,18,16,...this[i(285)][i(154)][t[0][i(234)]].keyId]));if(this[i(285)][i(383)]===i(356)){const e=this[i(224)](this[i(285)][i(154)][t[0][i(234)]][i(429)],this.drm[i(371)]),s=e[i(413)];return kn[i(347)](kn[i(212)][i(447)],new j([0,0,0,0,154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149,s>>>24,s>>>16&255,s>>>8&255,255&s,...e]))}return this.drm[i(383)]===i(323)?kn[i(347)](kn[i(212)][i(447)],new j([1,0,0,0,16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75,0,0,0,1,...this.drm[i(154)][t[0].type].keyId,0,0,0,0])):this.drm[i(383)]===i(397)?null:void _n[i(189)](i(393)+this[i(285)][i(383)])}[vn(298)](t){const i=vn;let e,s,n=this[i(285)][i(154)][t];return n[i(201)]===i(226)?(e=new j([16,...n.iv]),s=25):(e=new j([]),s=0),kn[i(347)](kn[i(212)][i(298)],new j([1,0,0,0,0,s,1,this[i(350)][t],...n[i(429)],...e]))}[vn(242)](t){const i=vn;return kn[i(347)](kn[i(212)][i(242)],new j([0,0,0,0,t,0,0,0,1]))}[vn(204)](t){const i=vn;return kn[i(347)](kn[i(212)][i(204)],new j([0,0,0,0,0,0,0,1,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[vn(340)](t,i){const e=vn;let s=null;return t&&(1!==t[e(268)]&&_n[e(189)](e(182)+t[e(268)]+" samples - expected 1"),s=t[0][e(191)]),s&&s[e(413)]?kn[e(347)](kn[e(212)].senc,new j([0,0,0,i?2:0,0,0,0,1,...s])):kn.box(kn[e(212)][e(340)],new j([0,0,0,0,0,0,0,1]))}[vn(439)](t,i,e){const s=vn,n=this[s(295)](t,i,e);let r=new j(kn[s(183)].byteLength+n[s(413)]);return r[s(251)](kn[s(183)]),r[s(251)](n,kn[s(183)][s(413)]),r}constructor(t){var i,e;const s=vn;this[s(285)]=t,this.saiIvSize={video:"cenc"===(null==(i=t.config[s(415)])?void 0:i[s(201)])?16:0,audio:"cenc"===(null==(e=t[s(154)][s(407)])?void 0:e[s(201)])?16:0},kn[s(212)]={avc1:[],encv:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],Opus:[],dOps:[],enca:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pssh:[],sinf:[],frma:[],schm:[],schi:[],tenc:[],saiz:[],saio:[],senc:[]};for(let t in kn[s(212)])kn.types[t]=[t[s(384)](0),t[s(384)](1),t[s(384)](2),t.charCodeAt(3)];const n=new j([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new j([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);kn.HDLR_TYPES={video:n,audio:r};const h=new j([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new j([0,0,0,0,0,0,0,0]);kn.STTS=kn[s(377)]=kn[s(213)]=o,kn.STSZ=new j([0,0,0,0,0,0,0,0,0,0,0,0]),kn[s(438)]=new j([0,0,0,1,0,0,0,0,0,0,0,0]),kn[s(307)]=new j([0,0,0,0,0,0,0,0]),kn[s(168)]=new j([0,0,0,0,0,0,0,1]);const a=new j([105,115,111,109]),u=new j([97,118,99,49]),c=new j([0,0,0,1]);kn[s(183)]=kn[s(347)](kn[s(212)].ftyp,a,c,a,u),kn[s(147)]=kn[s(347)](kn.types.dinf,kn[s(347)](kn[s(212)][s(280)],h))}}let En=1;class Pn{static[vn(411)](){return En++}[vn(246)](){const t=vn;this.mp4track[t(263)]=0,this[t(207)][t(428)]=[]}[vn(211)](){const t=vn;return!(!this[t(296)]||!this[t(428)][t(268)])}constructor(){this.seq=1}}class xn extends Pn{resetTrack(){const t=vn;this[t(437)]=1,this[t(222)]=0,this[t(336)]=0}[vn(181)](t,i,e){const s=vn;if(t[s(268)]>0)for(let n=0;n<t.length;n++){let r=t[n],h=r[s(392)],o=h[s(413)];this.samples[s(406)]({units:h,size:o,duration:r.duration,sampleAuxInfo:i,timestamp:e}),this[s(207)][s(263)]+=o}}[vn(161)](){const t=vn;if(!this.samples)return null;let i,e=this[t(207)][t(428)];for(;this[t(428)][t(268)];){let s=this.samples[t(342)](),n=(1e3*s.timestamp|0)-this[t(222)]|0;n<5&&(n=5),this[t(336)]=this[t(222)],this.nextDts+=n,i={size:s[t(171)],duration:n,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1},sampleAuxInfo:s[t(191)]};let r=new j(s[t(171)]);return r[t(251)](s.units,0),e[t(406)](i),new j(r[t(366)],0,s[t(171)])}return null}constructor(t){const i=vn;super(),this[i(296)]=!0,this[i(222)]=0,this.dts=0,this.mp4track={id:Pn[i(411)](),type:i(407),channelCount:2,audiosamplerate:48e3,len:0,fragmented:!0,timescale:t,duration:t,samples:[],codec:i(364),encrypted:!0},this[i(428)]=[]}}class In extends Pn{[vn(297)](){const t=vn;this[t(437)]=1,this[t(296)]=!1,this[t(207)][t(382)]="",this.mp4track[t(434)]="",this.nextDts=0,this.dts=0}remux(t,i,e){const s=vn;for(let n of t){let t=[],r=0;for(let i of n[s(392)])this[s(302)].parseNAL(i)&&(t[s(406)](i),r+=i[s(194)]());t[s(268)]>0&&this.readyToDecode&&(this[s(207)][s(263)]+=r,this[s(428)].push({units:t,size:r,keyFrame:n.keyFrame,duration:n[s(290)],sampleAuxInfo:i,timestamp:e}))}}[vn(161)](){const t=vn;if(!this[t(211)]()||!this[t(428)])return null;let i,e=this.mp4track[t(428)],s=this.samples[t(342)](),n=s.units,r=(1e3*s[t(332)]|0)-this[t(222)]|0;r<5&&(r=5),r>5e3&&_n[t(381)](t(430)+(r/1e3|0)+" s"),this.dts=this[t(222)],this[t(222)]+=r,i={size:s.size,duration:r,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:s[t(148)]?0:1,dependsOn:s[t(148)]?2:1},sampleAuxInfo:s[t(191)]};let h=0;for(const i of n)h+=i[t(194)]();let o=0,a=new j(h);for(const i of n)a[t(251)](i[t(341)](),o),o+=i[t(194)]();return e.push(i),new j(a[t(366)],0,h)}constructor(t,i){const e=vn;super(),this[e(296)]=!1,this[e(222)]=0,this[e(336)]=0,this[e(361)]=i,this[e(207)]={id:Pn[e(411)](),type:e(415),len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:t,duration:t,samples:[],encrypted:!0},this[e(428)]=[],this[e(302)]=new Sn(this)}}class Rn extends Tn{[vn(281)](t){const i=vn;("video"===t||"both"===t)&&(this[i(357)][i(415)]=new In(this.timescale,this[i(361)]),this[i(335)][i(406)](i(415))),(t===i(407)||t===i(417))&&(this[i(357)][i(407)]=new xn(this.timescale),this.trackTypes[i(406)](i(407)))}[vn(250)](){const t=vn;for(let i of this[t(335)])this.tracks[i].resetTrack();this[t(260)]=!1}[vn(262)](){const t=vn;this.tracks={},this[t(219)]()}[vn(246)](){const t=vn;if(this[t(260)])for(let i of this[t(335)]){let e=this[t(357)][i];for(;;){let s=e[t(161)]();if(!s||!s.byteLength)break;let n={type:i,payload:pn(this[t(164)][t(370)](e[t(437)]++,e[t(336)],e[t(207)]),this.mp4[t(244)](s)),dts:e[t(336)]};this[t(225)](t(366),n),e[t(246)]()}}else this[t(211)]()&&(this[t(225)]("ready"),this.initSegment(),this[t(260)]=!0,this[t(246)]())}[vn(439)](){const t=vn;for(let i of this[t(335)]){let e=this[t(357)][i],s={type:i,payload:this[t(164)][t(439)]([e[t(207)]],this[t(163)],this.timescale)};this[t(225)]("buffer",s)}}isReady(){const t=vn;for(let i of this[t(335)])if(!this.tracks[i][t(296)]||!this[t(357)][i][t(428)][t(268)])return!1;return!0}[vn(181)](t){const i=vn;for(let e of this[i(335)]){let s=t[e];s.length>0&&this[i(357)][e][i(181)](s,"audio"===e?t.audioSampleAuxInfo:t[i(310)],t[i(332)])}this[i(246)]()}constructor(t,i){const e=vn;super(e(175)),this[e(260)]=!1,this.trackTypes=[],this[e(357)]={},this[e(274)]=1e3,this[e(163)]=0,this[e(361)]=t,this.mp4=i}}function Cn(){const t=["stsd","isSupported","src","STSD","endMSE","abort","size","appendBufferError","addSourceBuffer","setupMSE","remuxer","addEventListener","max","com.widevine","readUEG"," - ","remux","Received ","FTYP","readyState","valid","ntype","readUInt","byteOffset","error","hdlr","sampleAuxInfo","webkitsourceopen","Checking codec","getSize","irrecoverableError","isfmb","[MSE] buffer error:","url","encrypted","apply","encryption","startsWith","getPayload","saio","open","[MSE] source buffer error","mp4track","append","getNri","codec","isReady","types","STCO","feed","mdia",'VALUE="',"schi","STSZ","offAll","jmuxer","skipEG","nextDts","1036611gAoRea","generatePlayReadyHeader","dispatch","cbcs","stsc","endOfStream","6576815frVeWy","minf","releaseBuffer","readUShort","track","type","stsz","isvcl","width","map","readBoolean","mvhd","onReady","saiz","reportDiscontinuity","mdat","bufferControllers","flush","patchSampleAuxinfo","readEG","</KIDS>","reset","set","onMSEClose","setUint16","idr","smhd","parseSPS","bind","message","getBits","initialized","sourceBuffer","destroy","len","isNonSync","warn","dOps","extractNALUs","length","</WRMHEADER>","listener","trun","AUD","SEI","timescale","Num frames in chunk: ","7620738FWzrwf","mode","tkhd","dbgMediaDump","dref","addTrack","doAppend","options","[MSE] sourceclose","drm","mediaSource","Failure: Browser doesn't support MSE/MMS",'/mp4; codecs="',"function","duration","min","avc1.","traf","[MSE] sourceopen","moov","readyToDecode","resetTrack","tenc","onMSEOpen","MediaSource","removeSourceBuffer","h264","encv","sourceopen","trex","isKeyframe","SMHD","<DATA>","stype","videoSampleAuxInfo","ended","getElementById","getUint8","slice","audioSampleAuxInfo","data","ready","frma","mseReady","string","4760043VatbTq","mvex","org.w3.clearkey","SPS","buffered","no video element were found to render, provide a valid video element","getPayloadSize",'<WRMHEADER xmlns="',"stts","start","[H264Parser] Both IDR and non-IDR VCL NALUs found in the same frame","timestamp","skipScalingList","skipUEG","trackTypes","dts","queue","readBits","mseEnded","senc","getData","shift","[MSE] error: ","UNKNOWN","parsePPS","appendBuffer","box","initBrowser","schm","saiIvSize","</DATA>","out",'<KID ALGID="AESCTR" ',"audiosamplerate","reduce","com.microsoft.playready.recommendation","tracks","fromCharCode","updating","calculateExpectedSizeFromSai","videoElement","stbl","1159252OkMfWN","opus","toString","buffer","nalus","index","splice","moof","licenseUrl","esds","disableRemotePlayback","height","flags","createBuffer","STSC","parseNAL","PPS","mdhd","debug","sps","keySystem","charCodeAt","mse","parseHeader","isSafari","volume","concat","channelCount","</PROTECTINFO>","units","Unsupported DRM type ","enca","call","POSITIVE_INFINITY","com.apple.fps","<KIDS>","getVideoFrames","646233hEZDuD","4LuRDMh","nri","mp4a","ManagedMediaSource","buffer error","push","audio","avcC","onError","Buffered range ","getTrackID","</KID>","byteLength","No A/V data","video","Opus","both","HDLR_TYPES","readUByte","sdtp","STTS","hasRedundancy","</LA_URL>","revokeObjectURL","BYTES_PER_ELEMENT","webkitsourceclose","IDR","samples","keyId","timestamp gap: ","node","readSPS","setData","pps","onBuffer","remuxController","seq","VMHD","initSegment","ceil","sinf","sourceclose","mfhd","skipLZ","http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader","Browser does not support codec","pssh","mediasource is not available to end: ","NDR","isReset","bitsAvailable","payload","DINF","keyFrame","isDependedOn","isTypeSupported","assign","waitingForIdr","8hmeyto","config","skipBits","remove","bitLength","[H264Parser] IDR without SPS/PPS, not suitable for recovery","TYPES","13659xNePtU","getFramePayload","onBufferError","mediaDuration","mp4"];return(Cn=function(){return t})()}class Dn extends Tn{[vn(262)](){const t=vn;this[t(337)]=null,this[t(279)]=null;try{this[t(261)]&&(this.sourceBuffer[t(170)](),this.mse[t(301)](this[t(261)]),this.sourceBuffer=null)}catch(t){}this.offAll()}[vn(282)](){const t=vn;if(this[t(337)][t(268)]&&this[t(261)]&&!this.sourceBuffer.updating){if(this[t(261)].buffered.length>1){for(let i=0;i<this[t(261)][t(325)][t(268)];++i){const e=i<this[t(261)].buffered.length-1;_n[t(381)](t(410)+i+(e?" (remove)":"")+": "+this[t(261)][t(325)][t(330)](i)+t(180)+this[t(261)][t(325)].end(i)),e&&this[t(261)][t(156)](this[t(261)].buffered[t(330)](i),this[t(261)][t(325)].end(i))}if(this[t(261)][t(359)])return}try{this[t(261)][t(346)](this[t(337)]),this[t(337)]=new j}catch(i){this[t(225)](t(189),{type:this.type,name:t(172),error:i})}}}[vn(214)](t,i){const e=vn;this.dbgMediaDump&&(this[e(279)][e(208)](t,i)||(this[e(279)]=null)),this[e(195)]||(this.queue=pn(this.queue,t)),this[e(282)]()}constructor(t,i,e){var s;const n=vn;super(n(366)),this[n(234)]=i,this[n(337)]=new j;const r=null==(s=cn.mediaDumps[i])?void 0:s[n(352)].durationMs;r>0&&(this[n(279)]=new fn(i,n(164),r)),this.sourceBuffer=t,this[n(385)]=e,this[n(195)]=!1,this[n(261)].addEventListener(n(189),t=>{const i=n;_n.warn(i(206),t,this.type),this[i(195)]=!0,this.dispatch("error",{type:this[i(234)],name:i(366),error:i(405)})})}}class Bn extends Tn{static isSupported(t){const i=vn;return s[i(404)]?s.ManagedMediaSource[i(150)](t):!!s[i(300)]&&s[i(300)][i(150)](t)}[vn(348)](){const t=vn;typeof this[t(283)][t(431)]===t(320)&&""==this.options[t(431)]&&_n[t(189)](t(326)),this[t(319)]=!1,this[t(174)]()}[vn(174)](){const t=vn;if(!s.ManagedMediaSource&&!s[t(300)])throw t(287);s.ManagedMediaSource?(this.node[t(373)]=!0,this[t(286)]=new ManagedMediaSource):this[t(286)]=new MediaSource,this[t(198)]=URL.createObjectURL(this[t(286)]),this.node[t(167)]=this[t(198)],this[t(339)]=!1,this[t(286)][t(176)](t(304),this[t(299)][t(257)](this)),this.mediaSource.addEventListener(t(442),this[t(252)][t(257)](this)),this.mediaSource.addEventListener(t(192),this[t(299)][t(257)](this)),this[t(286)][t(176)](t(426),this[t(252)][t(257)](this)),this[t(286)][t(176)](t(189),function(i){const e=t;_n[e(189)](e(343),i[e(258)])})}[vn(169)](){const t=vn;if(!this.mseEnded)try{this[t(339)]=!0,this[t(286)][t(184)]===t(205)&&this[t(286)][t(228)]()}catch(i){_n[t(189)](t(448),i)}}[vn(243)](){const t=vn;_n[t(381)]("Discontinuity!"),this[t(152)]=!0}feed(t){const i=vn;let e={video:[],audio:[]};if(this[i(195)]||this[i(339)]||!t||!this.remuxController)return-1;if(t[i(415)]){e[i(332)]=t.timestamp;const s=this[i(360)](t[i(310)],this[i(164)][i(350)][i(415)]),n=s!=t.video[i(413)];let r=Sn[i(267)](t[i(415)],n);if(!r[i(185)]||r[i(367)].length<1)return 0;if(this.waitingForIdr){if(!r[i(254)])return 0;this[i(152)]=!1}if(!gn&&t[i(310)]){const e=r[i(367)][i(355)]((t,e)=>t+4+e[i(413)],0);e!==s&&this.patchSampleAuxinfo(t[i(310)],this[i(164)][i(350)][i(415)],e-s)}e[i(415)]=this[i(399)](r[i(367)]),e[i(310)]=t[i(310)]}return t[i(407)]&&(e[i(332)]=t.timestamp,e[i(407)]=[{units:t[i(407)]}],e[i(315)]=t[i(315)]),t[i(415)]||t[i(407)]?(this[i(436)][i(181)](e),0):(_n[i(189)](i(414)),0)}[vn(399)](t){const i=vn;let e=[],s=[],n=!1,r=!1;for(let h of t){let t=new An(h);t[i(234)]()!==An[i(427)]&&t[i(234)]()!==An[i(449)]||Sn[i(386)](t),e.length&&r&&(t[i(196)]||!t[i(236)])&&(s[i(406)]({units:e,keyFrame:n}),e=[],n=!1,r=!1),e.push(t),n=n||t.isKeyframe(),r=r||t[i(236)]}if(e[i(268)])if(r)s.push({units:e,keyFrame:n});else{let t=s[i(268)]-1;t>=0&&(s[t][i(392)]=s[t][i(392)].concat(e))}return 1!==s[i(268)]&&_n.warn(i(275)+s[i(268)]),s}[vn(360)](t,i){if(!t)return 0;const e=(t[0]<<8)+t[1],s=i+2+4;let n=0,r=2;for(;0<e&&r+s<=t.byteLength;){r+=i;const e=(t[r]<<8)+t[r+1],s=(t[r+2]<<24)+(t[r+3]<<16)+(t[r+4]<<8)+t[r+5];r+=6,n+=e+s}return n}[vn(247)](t,i,e){let s=2;if(0<(t[0]<<8)+t[1]&&s+(i+2+4)<=t.byteLength){s+=i;let n=(t[s]<<8)+t[s+1];n+=e,n>=0&&(t[s]=n>>>8&255,t[s+1]=255&n)}return 0}[vn(376)](){const t=vn;if(this[t(319)]&&this[t(436)]&&this[t(436)][t(211)]()&&!this[t(245)]){this[t(245)]={};for(let i in this[t(436)][t(357)]){let e=this.remuxController[t(357)][i];const s=""[t(389)](i,t(288)).concat(e.mp4track[t(210)],'"');if(_n[t(381)](t(193),s),!Bn[t(166)](s))return _n.error(t(446)),!1;let n=this.mediaSource[t(173)](s);this[t(245)][i]=new Dn(n,i,this[t(286)]),this[t(245)][i].on(t(189),this[t(162)][t(257)](this))}}}[vn(231)](){const t=vn;for(let i in this.bufferControllers)this[t(245)][i][t(282)]()}[vn(435)](t){const i=vn;this[i(319)]&&this[i(245)]&&this[i(245)][t[i(234)]]&&this[i(245)][t[i(234)]].feed(t[i(452)],t[i(336)])}onMSEOpen(){const t=vn;_n[t(381)](t(294)),this[t(286)].readyState!==t(311)&&(this[t(286)][t(290)]=Number[t(396)],this[t(319)]=!0,typeof this[t(283)].onReady===t(289)&&this[t(283)][t(241)][t(395)](null,this.isReset),URL[t(424)](this[t(198)]),this[t(376)]())}[vn(252)](){const t=vn;_n[t(381)](t(284)),this.mseReady=!1,this[t(169)]()}onBufferError(t){const i=vn;_n.warn(i(197),t),this[i(195)]=!0,this.endMSE(),typeof this.options[i(409)]===i(289)&&this[i(283)][i(409)][i(395)](null,t)}constructor(t){const i=vn;super(i(220)),this[i(195)]=!1,this[i(152)]=!0,this[i(450)]=!1,this[i(319)]=!1,this.mseEnded=!1;let e={node:"",mode:i(415),debug:!1,onReady:function(){},onError:function(t){}};this.options=w[i(151)]({},e,t),this[i(431)]=typeof this.options[i(431)]===i(320)?h[i(312)](this[i(283)][i(431)]):this[i(283)][i(431)],this[i(285)]=t.drm,this[i(164)]=new kn(this[i(285)]),this[i(436)]=new Rn(this.node,this[i(164)]),this[i(436)][i(281)](this[i(283)][i(277)]),this[i(436)].on(i(366),this.onBuffer[i(257)](this)),this[i(436)].on(i(317),this[i(376)][i(257)](this)),this[i(348)]()}}function Nn(t,i){const e=Mn();return(Nn=function(t,i){return e[t-=182]})(t,i)}function Mn(){const t=["1247170HwkwNv","bv","gitVersion","352GaBvIm","toISOString","14XlATBT","2568948xDjIMf","1027225mjPCDe","19691yiLZrh","195999uPnZlk","3038288UlnUQm","2033937CLMUfn"];return(Mn=function(){return t})()}!function(){const t=Nn,i=Mn();for(;;)try{if(x(t(182))/1+x(t(192))/2*(x(t(184))/3)+-x(t(185))/4+-x(t(187))/5+x(t(193))/6+-x(t(183))/7*(x(t(190))/8)+-x(t(186))/9==553943)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Ln=Hn;function On(){const t=["1236858jPUtaw","certificate","11225xsjioT","275391VrsSlK","5816evMpkd","CrsCCAMSEKDc0WAwLAQT1SB2ogyBJEwYv4Tx7gUijgIwggEKAoIBAQC8Xc/GTRwZDtlnBThq8","7299lkgbxa","1470Lkqtku","production","Development","charCodeAt","xUuwokpsqVIHZrJfu62ar+BF8UVUKdK5oYQoiTZd9OzK3kr29kqGGk3lSgM0/p499p/FUL8oH","baseUrl","375060LzZhzk","230861ZKueQt","12pvGCSu","https://lic.drmtoday.com","35fxICRY","pQnNI61gzHO42XZOMuxytMm0F6puNHTTqhyY3Z290YqvSDdOB+UY5QJuXJgjhvOUD9+oaLlvT","Production","development","https://lic.test.drmtoday.com","UrTEfQxfPR4dJTquE+IDLAi5yeVVxzbAgMBAAE6DGNhc3RsYWJzLmNvbUABEoADMmGXpXg/0q","from","RL9KsD0v7ysBQVdUXEbJotcFz71tI5qc3jwr6GjYIPA3VzusD17PN6AGQniMwxJV12z/EgnUo","baigovcoURAZcr1d/G0rpREjLdVLG0Gjqk63Gx688W5gh3TKemsK3R1jV0dOfj3e6uV/kTpsN","pcFB13osydpD2AaDsgWo5RWJcNf+fzCgtUQx/0Au9+xVm5LQBdv8Ja4f2oiHN3dw","V382D1oJAM0F/YgCQtNDLz7vTWJ+QskNGi5Dd2qzO4s48Cnx5BLvL4H0xCRSw2Ed6ekHSdrRU","27eI5MATX39gYtCnn7dDXVxo4/rCYK0A4VemC3HRai2X3pSGcsKY7+6we7h4IycjqtuGtYg8A","HzgsJ7Hajdsyzn0Vs3+VysAgaJAkXZ+k+N6Ka0WBiZlCtcunVJDiHQbz1sF9GvcePUUi2fM/h","Staging","staging","name"];return(On=function(){return t})()}!function(){const t=Hn,i=On();for(;;)try{if(x(t(326))/1+x(t(325))/2+x(t(315))/3+x(t(327))/4*(-x(t(314))/5)+-x(t(312))/6+x(t(329))/7*(x(t(316))/8)+-x(t(318))/9*(x(t(319))/10)==181728)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Fn=Ln(317)+Ln(306)+"wyoYOE+M/t1oIbccwlTQ7o+BpV1X6TB7fxFyx1jsBtRsBWphU65w121zqmSiwzZzJ4xsXVQCJ"+Ln(330)+"+vwmV2/NJWxKqHBKdL9JqvOnNiQUF0hDI7Wf8Wb63RYSXKE27Ky31hKgx1wuq7TTWkA+kHnJT"+Ln(334)+Ln(323)+Ln(308)+"7hyskG5ZLAyJMzTvgnV3D8/I5Y6mCFBPb/+/Ri+9bEvquPF3Ff9ip3yEHu9mcQeEYCeGe9zR/"+Ln(307)+Ln(304)+Ln(336)+Ln(305),Un=j[Ln(335)](s.atob(Fn),t=>t[Ln(322)](0));class Vn{toString(){return this.name}[Ln(324)](){const t=Ln;switch(this[t(311)]){case"staging":return"https://lic.staging.drmtoday.com";case"development":return t(333);default:return t(328)}}[Ln(313)](){return Un}constructor(t){this[Ln(311)]=t}}function Hn(t,i){const e=On();return(Hn=function(t,i){return e[t-=304]})(t,i)}Vn[Ln(309)]=new Vn(Ln(310)),Vn[Ln(331)]=new Vn(Ln(320)),Vn[Ln(321)]=new Vn(Ln(332));const Wn=qn;function qn(t,i){const e=zn();return(qn=function(t,i){return e[t-=252]})(t,i)}function zn(){const t=["SampleAuxInfo corrupted","error","50012RXzLep","3301necisu","[RTC-DRM]","subarray","buffer","64zGPhLV","162pDdDkb","659466dfDPqj","SampleAuxInfo corrupted (postfix not found)","data","4199670WddvRf","95WaGAXy","getUint8","137436hbCkvG","1351035XuhSnW","getUint16","byteLength","184863QcuifQ"];return(zn=function(){return t})()}!function(){const t=qn,i=zn();for(;;)try{if(-x(t(253))/1*(x(t(258))/2)+x(t(259))/3+x(t(252))/4*(-x(t(263))/5)+-x(t(265))/6+-x(t(269))/7*(-x(t(257))/8)+-x(t(266))/9+x(t(262))/10==173102)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Gn=un(Wn(254));!function(){const t=jn,i=Yn();for(;;)try{if(x(t(369))/1+x(t(374))/2+x(t(366))/3+-x(t(373))/4+-x(t(365))/5+-x(t(368))/6*(x(t(370))/7)+x(t(367))/8==110661)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Xn=[];function jn(t,i){const e=Yn();return(jn=function(t,i){return e[t-=365]})(t,i)}let Qn=null,Kn=0;function Yn(){const t=["799144UpkRWz","356926NfeJZx","set","slice","237700RBIjTO","627444ELwjUL","76968OxbdcX","6xPMWky","172231EpHRtx","1480332fEizHX","push","buffer"];return(Yn=function(){return t})()}const Jn=vr;!function(){const t=vr,i=sr();for(;;)try{if(-x(t(452))/1+-x(t(412))/2+-x(t(478))/3*(x(t(441))/4)+-x(t(485))/5*(-x(t(415))/6)+-x(t(400))/7+x(t(460))/8*(-x(t(486))/9)+-x(t(437))/10*(-x(t(470))/11)==412983)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const Zn=un(Jn(424));let $n={licenseUrl:"",onFetch:void 0};const tr={},ir=(t,i,e)=>(void 0===i&&(i=0),void 0===e&&(e=1/0),((t,i,e)=>{const s=Jn,n=j.BYTES_PER_ELEMENT;i*=n,e*=n;const r=(a=t)instanceof ArrayBuffer?a:a[Jn(484)],h=t[s(483)],o=i;var a;let u=_[s(432)](0,_.min(o,h)),c=_.min(u+_[s(432)](e,0),h);return u/=n,c/=n,new j(r,u,c-u)})(t,i,e));const er=t=>{const i=Jn;let e="";for(const s of t){let t=s.toString(16);1==t[i(433)]&&(t="0"+t),e+=t}return e};function sr(){const t=["360308tFqTFd","usable for decryption (status: ","oct","decode","parse","license","parseFromString","message","8pQccIM","No clear key test key provided!","generateRequest","text/xml","Failed to update the session: ","output-downscaled","target","apply","bind","Failed to update the session","24280927IKsRHd","No PR challenge data!","kids","status","getElementsByTagName","rtcdrmerror","CK license request:","A128KW","3KcCnPp","createSession","License acquisition failed with error ","No media keys for media element!","stringify","byteLength","buffer","82765KyOCry","7206525fRtYVA","error","btoa","9a04f07998404286ab92e65be0885f95","set","[PR] License fetched:","getUint16","onFetch","4630892EspqDe","addEventListener","debug","has","json","Previous lic will be reused","internal-error","subarray","fromCharCode","expired","text","temporary","665922eWbQGg","then","[FPS] License fetched:","174puebov","Content-Type","update","POST","<Challenge","nodeValue","replace","sessionId","initData","[CDM]","[WV] License fetched:","No media element available!","CDM error generating license request: ","Failed to load previous EME session","initDataType","keyStatuses","forEach","max","length","indexOf","New lic will be requested","edef8ba979d64acea3c827dcd51d21ed","10DoxNsv","atob","catch","arrayBuffer","475444JqsldJ","No init data available!","append","warn","licenseUrl","dispatchEvent","floor","Data has an incorrect length, must be even.","EME createSession() failed - no DRM available","keystatuseschange","Failed to reuse previous EME session: "];return(sr=function(){return t})()}let nr=null;const rr=t=>{const i=Jn;return s[i(394)](String[i(408)][i(467)](null,t))[i(421)](/\+/g,"-")[i(421)](/\//g,"_")[i(421)](/=*$/,"")},hr=(t,i)=>{const e=Jn,s=(t=>{const i=Jn,e=JSON[i(456)]((new TextDecoder)[i(455)](t));if(Zn[i(402)](i(476),e),null===nr)throw new m(i(461));const s=[];for(const t of e[i(472)]){const e={kty:i(454),alg:i(477),kid:t,k:rr(nr)};s.push(e)}return(new TextEncoder).encode(JSON[i(482)]({keys:s}))})(i.message);i.target.update(s)[e(439)](function(t){const i=e;Zn[i(393)](i(469),t)})},or=t=>{const i=Jn,e=s[i(438)](t.replace(/-/g,"+")[i(421)](/_/g,"/")),n=new j(e[i(433)]);for(let t=0;t<e.length;++t)n[t]=e.charCodeAt(t);return n},ar=function(t,i){for(var e=arguments.length,s=new Array(e>2?e-2:0),n=2;n<e;n++)s[n-2]=arguments[n];return Gs(void 0,[t,i,...s],void 0,function*(t,i,e){void 0===e&&(e=!1);const s=Jn,n=new Headers(tr);e&&n[s(443)](s(416),s(463));const r={method:s(418),headers:n,body:i},h=yield $n[s(399)]?$n.onFetch(t,r):fetch(t,r);if(!h.ok)throw new m(s(480)+h[s(473)]);return h})},ur=(t,i)=>{const e=Jn;ar($n[e(445)],i[e(459)])[e(413)](t=>t[e(404)]()).then(t=>{const s=e;Zn[s(402)](s(425),t[s(457)]);const n=or(t[s(457)])[s(484)];i[s(466)][s(417)](n)[s(439)](t=>{const i=s;Zn[i(393)](i(469),t)})})[e(439)](i=>{const s=e;t[s(446)](new CustomEvent(s(475),{detail:{message:""+i}})),Zn[s(393)](i)})},cr=(t,i)=>{const e=Jn,s=((t,i)=>{const e=Jn,s=new DOMParser;try{const t=function(t,i,e){void 0===e&&(e=!1);const s=Jn;if(!t)return"";let n=t;if(!e&&n[s(483)]%2!=0)throw Zn[s(393)](s(448)),new m("Data does not seem to be UTF-16 encoded!");const r=ir(n);let h;if((255===r[0]&&254===r[1]||254===r[0]&&255===r[1])&&(n=r[s(407)](2)),n instanceof ArrayBuffer)h=n;else{const t=new j(n[s(483)]);t[s(396)](ir(n)),h=t[s(484)]}const o=_[s(447)](n[s(483)]/2),a=new Uint16Array(o),u=new DataView(h);for(let t=0;t<o;t++)a[t]=u[s(398)](2*t,i);return function(t){const i=Jn;let e="";for(let s=0;s<t[i(433)];s+=16e3){const n=t.subarray(s,s+16e3);e+=String[i(408)][i(467)](null,n)}return e}(a)}(i,!0);if(t[e(434)](e(419))>-1){const i=s[e(458)](t,e(463))[e(474)]("Challenge")[0].childNodes[0][e(420)];if(null===i)throw new m(e(471));return or(i)}Zn[e(444)]("[PR] Challenge node not found")}catch(i){t[e(446)](new CustomEvent(e(475),{detail:{message:""+i}})),Zn[e(393)](i)}return null})(t,i.message);if(null===s)return t[e(446)](new CustomEvent("rtcdrmerror",{detail:{message:e(471)}})),void Zn[e(393)](e(471));ar($n[e(445)],s[e(484)],!0)[e(413)](t=>t[e(440)]())[e(413)](s=>{const n=e;Zn[n(402)](n(397),s),i[n(466)][n(417)](s)[n(439)](function(i){const e=n;t[e(446)](new CustomEvent(e(475),{detail:{message:e(464)+i}})),Zn[e(393)]("Failed to update the session",i)})}).catch(i=>{const s=e;t.dispatchEvent(new CustomEvent(s(475),{detail:{message:""+i}})),Zn[s(393)](i)})},dr=(t,i)=>{const e=Jn;ar($n.licenseUrl,i[e(459)])[e(413)](t=>{const i=e,s=t[i(410)]();return Zn[i(402)](i(414),t,s),s})[e(413)](t=>{const s=e;i.target[s(417)](or(t))})[e(439)](i=>{const s=e;t[s(446)](new CustomEvent(s(475),{detail:{message:""+i}})),Zn.error(i)})},lr=(t,i)=>{tr[t]=i},fr=rn.isSafari;function vr(t,i){const e=sr();return(vr=function(t,i){return e[t-=393]})(t,i)}let _r=!fr;const gr=new Map;function pr(t){return Gs(this,void 0,void 0,function*(){const i=vr;if(null===t.initData)throw new m(i(442));const e=t[i(466)];if(null===e)throw new m(i(426));const s=e.mediaKeys;if(null===s)throw new m(i(481));const n=er(new j(t[i(423)])),r=n+e.id;let h=null;gr[i(403)](r)&&(h=gr.get(r),null!=h&&h.close(),gr.delete(r)),Zn[i(402)](i(h?405:435));let o=null;try{o=s.createSession(_r?"persistent-license":"temporary")}catch(t){Zn[i(402)]("EME createSession(persistent) failed:",t)}if(!o&&_r){_r=!1;try{o=s[i(479)](i(411))}catch(t){Zn.error("EME createSession(temporary) failed:",t)}}if(o)if(o.addEventListener(i(450),t=>{const s=i;t[s(466)][s(430)][s(431)]((t,i)=>{const n=s;(t===n(409)||"output-restricted"===t||t===n(465)||t===n(406))&&e[n(446)](new CustomEvent(n(475),{detail:{message:"Key "+er(new j(i))+" is not "+(n(453)+t)+")",keyId:i}}))})}),fr?o[i(401)](i(459),dr.bind(null,e),!1):-1!==n.indexOf(i(436))?o[i(401)](i(459),ur[i(468)](null,e),!1):-1!==n[i(434)](i(395))?o.addEventListener(i(459),cr[i(468)](null,e),!1):o.addEventListener(i(459),hr[i(468)](null,e),!1),h)try{(yield o.load(h[i(422)]))?gr[i(396)](r,o):e[i(446)](new CustomEvent(i(475),{detail:{message:i(428)}}))}catch(t){e[i(446)](new CustomEvent(i(475),{detail:{message:i(451)+t}}))}else o[i(462)](t[i(429)],t[i(423)])[i(413)](()=>{_r&&gr[i(396)](r,o)})[i(439)](t=>{const s=i;e.dispatchEvent(new CustomEvent(s(475),{detail:{message:s(427)+t}}))});else e[i(446)](new CustomEvent(i(475),{detail:{message:i(449)}}))})}const mr=Vr;!function(){const t=Vr,i=Or();for(;;)try{if(-x(t(462))/1*(-x(t(532))/2)+-x(t(543))/3+x(t(682))/4+-x(t(692))/5*(x(t(588))/6)+-x(t(539))/7+x(t(496))/8+-x(t(549))/9==672532)break;i.push(i.shift())}catch(t){i.push(i.shift())}}();const wr=un(mr(673)),yr=rn[mr(607)],Ar=rn[mr(540)],br=rn[mr(647)],Sr=rn[mr(489)],Tr=rn[mr(478)],kr=rn.platform,Er=rn[mr(620)],Pr=Sr||Tr&&kr===mr(578),xr=1e6*(Ar?82:br?220:120),Ir=Ar?5e3:2e3,Rr=Ar?1.5:.5;function Cr(t){const i=mr;return typeof t!==i(672)||null===t||t instanceof Element||t instanceof Vn?t:(null==(e=t)?void 0:e[mr(584)])instanceof ArrayBuffer&&null!=e&&e.BYTES_PER_ELEMENT?t[i(550)]():Array[i(636)](t)?t.reduce((t,i,e)=>(t[e]=Cr(i),t),[]):t instanceof w?w.keys(t).reduce((i,e)=>(i[e]=Cr(t[e]),i),{}):t;var e}class Dr{constructor(t){const i=mr;this[i(547)]="",this[i(471)]="",this.keySystem="",this[i(603)]=[],this[i(479)]=Cr(t),this.jmuxer=null,this.keyFrameLogCntr=0,this[i(561)]=Date[i(658)](),this[i(585)]=0,this[i(602)]=0,this[i(490)]=-1,this[i(680)]=0,this[i(596)]=0,this[i(491)]=!0,this.keyFrameNeededPosted=!1,this[i(617)]=Ir,this[i(500)]=null,this.dbgMediaDump={video:null,audio:null}}}const Br=new Map,Nr=new j([60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60]),Mr=new j([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]),Lr=new j([213,251,214,184,46,217,62,78,249,138,228,9,49,238,51,183]);function Or(){const t=["isSafari","ansform=$=>{let e=$.transformer;handleTransform(e.options.operation,e.readable,e.writable)}),onmessage=$=>{keyFra","status","DRM config:","key","Development"," will be used","Staging","const DUMMY_IDR_FRAME_SLICE_HDR0=new Uint8Array([32,0,203]),DUMMY_IDR_FRAME_SLICE_HDR1=new Uint8Array([16,0,50]);","enabled","playback at ","now",".experiment","seq","videoElement","data","btoa","PlayReady might not support '","logLevel","cbcs-1-9","encryption"," to ","offset","x-dt-custom-data","let brokenFrame=null,idrFrames=[];function initializeDummyFrames(){brokenFrame=new Uint8Array([0,0,0,1,65,154,255","object","[RTC-DRM]","not-allowed","durationMs","Default transform mode enabled, ","keySystem","timestamp","DRM config keyId must be an instance of 16-byte long Uint8Array.","lastKeyFrameTime","H264 is the only supported video codec.","2533916KeNZJm","out","Applying pre-configured certificate (","buffered","Widevine","x-dt-auth-token"," ms)","com.microsoft.playready.recommendation","error","currentTime","225RwtgWL","end","requestMediaKeySystemAccess","50705YjLCIv","onmessage","environment","wvLicenseUrl","a1d1f1"," requesting a new key frame (latency ","userId","ClearKey","createEncodedStreams","licenseUrl","PlayReady license acquisition might fail without output protection enabled (sessionId is ","feed","dbgMediaDump","jmuxer","MSE (re)init",",255]).buffer,idrFrames.push(new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,","isChrome","config","forEach","Invalid config argument type, DRM config must be an object.","hwSecurity","audioEncrypted","setMediaKeys","fpsCertificate","Unable to create Worker!","GET","customTransform","isEdge","prevSeqNum","keyFrameNeeded","encrypted","targetLatency not set!","opus","FairPlay","7963992IJNztq","streamType","SampleAuxInfo extraction failed (video)"," seeking from ","worker","]: ","video","kind","audio","jitterBufferDelayHint","size","No target media element!","fpsCertificateUrl","wvCertificate","delimited","3000","pipeThrough","/license-server-fairplay/cert/","string",") not found in [","indexOf","warn","ignoreAudio","append","jitterBufferTarget","prLicenseUrl","sessionTypes","authToken","get","RTCRtpScriptTransform","audioElement","catch","trim","join","waitingForIdr","info","52hXHKkY","enqueue","). It has to be a string containing a JWT.","playbackRate","sai","persistent-license","Blob","2699340CvuQCI","isFirefox","transform",'rame:{type:$.type,timestamp:$.timestamp,data:$.data}}),"key"===$.type&&(keyFrameNeeded=!1),$.data=generateDummyFr',"554109usxuWq"," will not be created, use rtcDrmFeedFrame to push frames manually","bind","streams","serverCertificateUrl","includes","3473577nNrBJc","slice","URL","serverCertificate","length","Invalid authToken type (","addEventListener","', it's safer to use 'cbcs' instead.","srcObject","ClearKey is not supported by Safari.","meNeeded=$.data};","value","nextKeyFrameAllowedTime","Error recovery attempted","rtcdrmerror","184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32]).buffer"," bytes","both","debug","No valid DRM config found, call rtcDrmConfigure first.","dispatchEvent","certificate","mediaBufferMs","clear","merchant","src","sessionId","reportDiscontinuity","mediaBufferMs should be an integer.","Android","rtcDrmConfigure did not specify audioElement, audio will be dropped","/license-proxy-widevine/cenc/","arrayBuffer","). Edge only supports PlayReady, Widevine and ClearKey.","). Chrome only supports Widevine and ClearKey.","buffer","videoStartTimestamp",'audio/mp4; codecs="opus"',"set","175800AyhMKK","PlayReady","SampleAuxInfo extraction failed (audio)","cenc","codec","videoCapabilities",".. ","Duplicate/reordered frame, prev seq: ","bytesSinceKey","wvCertificateUrl","/license-proxy-headerauth/drmtoday/RightsManager.asmx","robustness","baseUrl","type","audioStartTimestamp","emeConfig","com.widevine.alpha","SW_SECURE_CRYPTO","fpsLicenseUrl","supportsRtpScriptTransform","Target video element (","?audioTransformFunction:videoTransformFunction});e.pipeThrough(a).pipeTo(x)}self.RTCTransformEvent&&(self.onrtctr","createObjectURL","playoutDelayHint","POSITIVE_INFINITY",'ame(keyFrameNeeded),e.enqueue($)}function handleTransform($,e,x){let a=new TransformStream({transform:"audio"===$',"track",'video/mp4; codecs="avc1.640032"',"cbcs","keyFrameRequestInterval","Frame gap: ","keyFrameNeededPosted","isWindows","HW_SECURE_ALL"," bytes, ","GOP is getting too long, requesting a new key frame","temporary","Safari does not support Opus, audio will not be rendered.","stringify","byteLength","message"," frame","H264","mediaDumps","h264","keyFrameLogCntr","requestMediaKeySystemAccess(","Safari doesn't support 'cenc'/AES-CTR, use 'cbcs' instead if possible.","isArray","Invalid DRM type (","DRM config iv must be an instance of 16-byte long Uint8Array.","keyId","pipeTo"," - ","receiver","isInteger","toString","onFetch","next"];return(Or=function(){return t})()}function Fr(t){const i=mr;let e=!1;if((t[i(479)][i(502)]&&t[i(479)].video[i(667)]!==i(572)&&"HW"===t[i(479)][i(502)][i(599)]||t[i(479)][i(504)]&&t[i(479)][i(504)][i(667)]!==i(572)&&"HW"===t.config[i(504)][i(599)])&&(e=!0),t.hwSecurity=e,function(t,i){const e=mr;void 0!==i&&(t[e(479)].mediaBufferMs=i),(void 0===t[e(479)][e(571)]||t.config[e(571)]<0)&&(t[e(479)].mediaBufferMs=100,Ar?t[e(479)][e(571)]=350:!br&&Er&&("PlayReady"===t.config[e(601)]||t[e(482)])&&(t.config[e(571)]=1400))}(t,t[i(479)][i(571)]),void 0===t.config[i(523)]){void 0===t[i(479)][i(468)]&&(t[i(479)][i(468)]="purchase"),void 0===t[i(479)][i(575)]&&(t.config[i(575)]=i(466));const e=s[i(663)](JSON[i(626)]({userId:t[i(479)].userId,sessionId:t.config.sessionId,merchant:t[i(479)].merchant}));lr(i(670),e)}else lr(i(687),t[i(479)][i(523)]);for(const e of[t[i(479)][i(504)],t[i(479)][i(502)]])e&&e.encryption!==i(572)&&(e.keyId||(e[i(639)]=Mr),e.iv||(e.iv=Lr));t[i(552)]=void 0,t[i(547)]="",t[i(471)]="";const n=t[i(479)][i(464)][i(600)]();var r;if(t[i(479)].type===i(469)?(t[i(677)]="org.w3.clearkey",nr=Nr):t[i(479)][i(601)]===i(686)?(t[i(677)]=i(604),Er&&e&&(t[i(677)]+=i(659)),t[i(479)][i(509)]?t[i(552)]=t[i(479)][i(509)]:t[i(479)][i(597)]?t[i(547)]=t.config[i(597)]:t[i(552)]=t.config[i(464)][i(570)](),t[i(479)].wvLicenseUrl?t[i(471)]=t.config[i(465)]:t[i(471)]=n+i(580)):t[i(479)][i(601)]===i(589)?(t.keySystem=i(689),t[i(479)][i(521)]?t[i(471)]=t[i(479)][i(521)]:t[i(471)]=n+i(598)):t.config[i(601)]===i(495)&&(t.keySystem="com.apple.fps",t[i(479)][i(485)]?t[i(552)]=t[i(479)][i(485)]:t[i(479)][i(508)]?t[i(547)]=t.config.fpsCertificateUrl:t[i(547)]=n+i(513)+t[i(479)][i(573)],t[i(479)].fpsLicenseUrl?t[i(471)]=t.config[i(606)]:t[i(471)]=n+"/license-server-fairplay/"),r={licenseUrl:t[i(471)],onFetch:t[i(479)][i(645)]},$n=r,t[i(603)]=[],t[i(479)][i(601)]!==i(495)){t[i(603)].push({initDataTypes:[i(591)],sessionTypes:[i(537),i(624)]});for(const e of[t[i(479)][i(502)],t.config[i(504)]])if(e&&e[i(667)]!==i(572)){const s=e==t.config[i(502)]?i(502):i(504);let n;"Widevine"===t.config[i(601)]?n="HW"===e[i(599)]?i(621):i(605):"PlayReady"===t.config[i(601)]&&(n="HW"===e[i(599)]?i(511):"2000"),"video"===s?t[i(603)][0][i(593)]=[{contentType:i(615),encryptionScheme:e[i(667)]===i(591)?i(591):"cbcs-1-9",robustness:n||void 0}]:t[i(603)][0].audioCapabilities=[{contentType:i(586),encryptionScheme:e[i(667)]===i(591)?i(591):i(666),robustness:n||void 0}]}}else t.emeConfig=[{initDataTypes:["sinf"],videoCapabilities:[{contentType:"video/mp4",robustness:""}],distinctiveIdentifier:i(674),persistentState:"not-allowed",sessionTypes:[i(624)]}];wr[i(567)](i(650),t)}function Ur(t){const i=mr;wr[i(567)](i(476));let e=t[i(479)][i(661)];(!t[i(479)][i(502)]||t[i(479)][i(502)][i(667)]===i(572))&&(e=t.config.audioElement),t[i(475)]=null;const s=!t[i(518)]&&t[i(479)].audio&&t[i(479)][i(504)][i(667)]!==i(572),n=t[i(479)][i(502)]&&t[i(479)].video.encryption!==i(572);t[i(596)]=0,t.keyFrameNeeded=!0,t[i(619)]=!1,t[i(617)]=Ir,t[i(585)]=0,t[i(602)]=0,t[i(490)]=-1,t[i(680)]=0,t[i(475)]=new Bn({node:e,mode:i(s?n?566:504:502),fps:60,drm:t}),br&&t[i(479)][i(661)]&&t.config.videoElement.play().then(()=>{})[i(527)](()=>{})}function Vr(t,i){const e=Or();return(Vr=function(t,i){return e[t-=461]})(t,i)}function Hr(t,i,e){const s=mr;if(t[s(474)][s(502)]){cn.mediaDumps[s(502)].in[s(510)]&&t[s(474)][s(502)][s(519)](new j([0,0,0,1,9,80]));const e=i[s(678)]/90;t[s(474)][s(502)][s(519)](new j(i[s(662)]),e)||(t[s(474)][s(502)]=null)}if(t[s(479)][s(502)]&&"clear"===t[s(479)][s(502)][s(667)])return null==e||e[s(533)](i),!1;const n=Date[s(658)]();if(i[s(601)]===s(651)){const e=cn.logLevel>=4;++t[s(633)]<(e?Number[s(612)]:5)&&(wr.debug(dn()+" "+i[s(601)]+", "+i.data.byteLength+s(622)+(s(657)+t.config[s(661)].currentTime)),e&&1===t.keyFrameLogCntr&&function(t,i,e){void 0===i&&(i=64),void 0===e&&(e=64);const s=mr,n=new j(t[s(662)]);let r="",h=0;for(let t=0;t<i&&t<n[s(553)];++t)r+=(n[t]<16?"0":"")+n[t][s(644)](16)+" ";if(h<n[s(553)])for(h<n[s(553)]-e&&(r+=s(594),h=n[s(553)]-e);h<n[s(553)];h++)r+=(n[h]<16?"0":"")+n[h][s(644)](16)+" ";wr[s(531)]("["+((t[s(601)]||s(504))+s(629))+s(501)+r[s(528)]())}(i,128,8)),t.keyFrameNeeded=!1,t[s(596)]=0,t[s(561)]=n+t[s(617)]}return t[s(596)]+=i[s(662)][s(627)],!t[s(491)]&&t[s(596)]>xr&&(wr.info(s(623)),t[s(491)]=!0),t[s(475)]&&(function(t,i){const e=mr;0===t.videoStartTimestamp&&(t.videoStartTimestamp=i.timestamp,t[e(617)]=Ir,t[e(561)]=Date.now()+2e3);let s=null,n=!1;if(i[e(662)][e(627)]<=4)wr[e(517)]("Discarding corrupted video frame (too small)"),n=!0;else{const r=new j(i[e(662)],0,4);0!=r[0]||0!=r[1]||0!=r[2]||1!=r[3]?(wr.warn("Discarding corrupted video frame (no Annex B startcode)"),n=!0):(s=function(t,i){const e=Wn,s=new DataView(t.data),n=t.data[e(268)]-2,r=s[e(267)](n);if(r<n){let t=n-r;if(69!==s[e(264)](n-1))return Gn[e(271)](e(260)),null;if(s[e(264)](t++)>>>4!=1)return Gn[e(271)]("Unsupported SampleAuxInfo version"),null;const h=new j(r-2);let o=0,a=0;for(;t<n-1;){let i=s[e(264)](t++);a>1&&3===i&&(a=0,i=s.getUint8(t++)),0!==i?a=0:++a,h[o++]=i}const u=new DataView(h[e(256)]),c="cenc"===i?16:0,d=c+2+6*u[e(267)](c);return d+2>o?(Gn[e(271)](e(270)),null):{sai:h[e(255)](0,d),offset:n-r,seq:u[e(267)](d)}}return null}(i,t.config[e(502)][e(667)]),!s&&(wr.warn(e(498)),n=!0))}if(s)if(i[e(601)]===e(651))t[e(490)]=s.seq;else{if(-1===t[e(490)])return 0;{let r=s[e(660)]-t[e(490)];if(r<-32767&&(r+=65536),r<=0)return wr.debug(e(595)+t.prevSeqNum+", curr: "+s.seq),0;r>1&&(n=i[e(601)]!==e(651),wr[e(517)](e(618)+t[e(490)]+e(641)+s[e(660)]+", restart required: "+n)),t.prevSeqNum=s[e(660)]}}let r=0;n&&!t[e(475)][e(530)]&&(r=-1,t[e(475)][e(576)]());const h=(i[e(678)]-t[e(585)])/9e4;return s&&t[e(475)][e(473)]({video:new j(i[e(662)],0,s.offset),videoSampleAuxInfo:s[e(536)],timestamp:h})<0&&(r=-1,wr[e(517)](e(562)),Ur(t)),r>=0&&i[e(601)]===e(651)&&(t[e(680)]=h),r}(t,i)<0?t[s(491)]=!0:function(t){const i=mr,e=t[i(479)][i(661)];if(!e||e[i(685)][i(553)]<1||e.paused||e[i(691)]<Rr)return;const s=t[i(479)][i(571)];if(void 0===s||s<0)throw new m(i(493));const n=e[i(685)].end(e.buffered[i(553)]-1),r=1e3*(n-e[i(691)])|0;if(!t[i(483)]&&function(t,i,e){const s=mr;let n;n=i<3*e>>>2?.875:i<=e?1:i<7*e>>>2?1.125:i<9*e>>>2?1.25:i<11*e>>>2?1.375:1.5,n!==t.playbackRate&&(t[s(535)]=n)}(e,r,s),!(r<s+50||r<5*s>>>2))if(t[i(680)]>e[i(691)]+.1){const r=1e3*(n-t.lastKeyFrameTime)|0;r>40&&r>s-100?(wr.debug(dn()+i(499)+(e[i(691)]+i(668)+t.lastKeyFrameTime+" (")+(t[i(680)]-e[i(691)])+")"),e[i(691)]=t[i(680)]):wr[i(567)](dn()+" too close to seek, "+r)}else!t.keyFrameNeeded&&Date[i(658)]()>t[i(561)]&&r>s+100&&r>3*s>>>1&&(wr[i(567)](dn()+i(467)+r+i(688)),t[i(491)]=!0,t[i(617)]<16e3&&(t[i(617)]<<=1))}(t)),e?(!t[s(491)]||!Pr)&&(i[s(662)]=function(t){return!Qn&&function(){const t=jn;Qn=new j([0,0,0,1,65,154,255,255])[t(372)],Xn[t(371)](new j([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32])[t(372)]),Xn[t(371)](Xn[0][t(376)](0)),new j(Xn[1])[t(375)]([16,0,50],27)}(),t?Qn:(Kn^=1,Xn[Kn])}(t[s(491)]),e[s(533)](i)):t[s(491)]!=t.keyFrameNeededPosted&&(t[s(500)]&&t.worker.postMessage(t[s(491)]),t.keyFrameNeededPosted=t[s(491)]),t.keyFrameNeeded}function Wr(t,i,e){const s=mr;if(t.dbgMediaDump.audio){const e=i[s(678)]/48;t[s(474)][s(504)][s(519)](new j(i.data),e)||(t.dbgMediaDump[s(504)]=null)}return t[s(479)].audio&&t[s(479)].audio[s(667)]!==s(572)?i[s(662)][s(627)]>0&&function(t,i){const e=mr;var s;if(!t[e(475)]||t[e(518)])return 0;0===t[e(602)]&&(t.audioStartTimestamp=i[e(678)]);const n=(i[e(678)]-t[e(602)])/48e3;if((null===(s=t[e(479)][e(504)])||void 0===s?void 0:s[e(667)])===e(616))return t.jmuxer[e(473)]({audio:new j(i[e(662)]),timestamp:n});const r=function(t){const i=Wn,e=new DataView(t[i(261)]),s=t.data[i(268)]-2,n=e[i(267)](s);if(n<s){let t=s-n;if(69!==e[i(264)](s-1))return Gn.error("SampleAuxInfo corrupted (postfix not found)"),null;if(e[i(264)](t++)>>>4!=1)return Gn[i(271)]("Unsupported SampleAuxInfo version"),null;const r=new j(n-2);let h=0;for(;t<s-1;){const s=e[i(264)](t++);if(r[h++]=s,h>=16)break}return{sai:r,offset:s-n}}return null}(i);r?t.jmuxer[e(473)]({audio:new j(i[e(662)],0,r[e(669)]),audioSampleAuxInfo:r[e(536)],timestamp:n}):wr[e(690)](e(590))}(t,i):e&&e[s(533)](i),!1}function qr(t){const i=mr;var e,s,n,r,h;if(!t||typeof t!==i(672))throw new g(i(481));if(!(t.videoElement instanceof HTMLVideoElement))throw new g("Invalid videoElement, it must be an instance of HTMLVideoElement.");if(t[i(526)]&&!(t[i(526)]instanceof HTMLMediaElement))throw new g("Invalid audioElement, it must be an instance of HTMLMediaElement.");if(void 0!==t[i(571)]&&!Number[i(643)](t[i(571)]))throw new g("DRM config mediaBufferMs should be an integer.");let o=!1,a=!1,u=!1;const c=[i(616),"cenc",i(572)],d=["SW","HW"];for(const e of[t.video,t[i(504)]])if(e){if(!c[i(548)](e[i(667)]))throw new RangeError("DRM config encryption value must be one of: "+c[i(529)](", "));if(br&&e.encryption===i(591))throw new RangeError(i(635));if("clear"!==e[i(667)]){if(a=!0,e.keyId){if(!(e[i(639)]instanceof j)||16!==e[i(639)][i(553)])throw new g(i(679));u=!0}else if(br)throw new ReferenceError(i(558));if(e.iv&&(!(e.iv instanceof j)||16!==e.iv[i(553)]))throw new g(i(638));if(e[i(599)]&&!d[i(548)](e[i(599)]))throw new RangeError("DRM config robustness can only be one of: "+d[i(529)](", "));if(e===t.video&&e.codec!==i(630))throw new RangeError(i(681));br&&e===t.audio&&e[i(592)]===i(494)&&(o=!0,wr.warn(i(625))),t[i(601)]===i(589)&&("cenc"!==e[i(667)]&&wr[i(517)](i(664)+e[i(667)]+i(556)),void 0===t.sessionId||t[i(575)][i(548)]("f1")||wr[i(517)](i(472)+t[i(575)]+", a1d1f1 is recommended)."))}}if(a){const e=[Vn[i(652)],Vn[i(654)],Vn.Production];if(!e[i(548)](t[i(464)]))throw new RangeError("DRM config env value must be one of: "+e.join(", "));if(t[i(523)]&&typeof t.authToken!==i(514))throw new g(i(554)+typeof t[i(523)]+i(534));if(t[i(601)])if(br){if("FairPlay"!==t.type)throw new RangeError(i(637)+t[i(601)]+"). Safari only supports FairPlay.")}else if(Tr){if(t[i(601)]!==i(686)&&"ClearKey"!==t.type)throw new RangeError(i(637)+t[i(601)]+i(583))}else if(Sr&&t[i(601)]!==i(589)&&"Widevine"!==t[i(601)]&&t[i(601)]!==i(469))throw new RangeError(i(637)+t.type+i(582))}if(void 0!==t[i(665)]&&(cn[i(665)]=t[i(665)]),void 0!==t.mediaDumps){if(t.mediaDumps[i(502)]){const r=t[i(631)].video,h=cn[i(631)][i(502)];!(null===(e=r.in)||void 0===e)&&e.durationMs&&(h.in[i(675)]=r.in.durationMs),!(null===(s=r.in)||void 0===s)&&s.delimited&&(h.in.delimited=r.in[i(510)]),null!==(n=r[i(683)])&&void 0!==n&&n.durationMs&&(h[i(683)][i(675)]=r[i(683)].durationMs)}if(t[i(631)][i(504)]){const e=t[i(631)][i(504)],s=cn[i(631)][i(504)];!(null===(r=e.in)||void 0===r)&&r.durationMs&&(s.in.durationMs=e.in.durationMs),null!==(h=e.out)&&void 0!==h&&h[i(675)]&&(s[i(683)][i(675)]=e[i(683)].durationMs)}}let l=Br[i(524)](t[i(661)]);!l&&(l=new Dr(t),Br[i(587)](t.videoElement,l)),l[i(656)]=a,l.ignoreAudio=o,l[i(483)]=!o&&l[i(479)][i(504)]&&l[i(479)][i(504)][i(667)]!==i(572),a&&(l[i(479)][i(601)]||(l[i(479)][i(601)]=br?"FairPlay":i(686)),u||l.config.type===i(469)||(l[i(479)][i(601)]=i(469)),Fr(l),function(t){Gs(this,void 0,void 0,function*(){const i=Vr;var e,s;let n=t.config[i(661)];if((!t.config[i(502)]||t[i(479)].video[i(667)]===i(572))&&(n=t[i(479)][i(526)]),!n)throw new m(i(507));n[i(574)]="",n[i(557)]=null,yield n[i(484)](null);let r=null;try{r=yield od[i(461)](t[i(677)],t[i(603)])}catch(t){}if(!r&&t.emeConfig[0]){const n=null===(e=t.emeConfig[0][i(522)])||void 0===e?void 0:e[i(516)](i(537));if(void 0!==n&&n>=0){null===(s=t[i(603)][0][i(522)])||void 0===s||s.splice(n,1);try{r=yield od[i(461)](t[i(677)],t[i(603)])}catch(t){}}}if(!r){const e=i(634)+t[i(677)]+") failed";return n[i(569)](new CustomEvent(i(563),{detail:{message:e}})),void wr[i(690)](e)}let h=null;try{h=yield r.createMediaKeys()}catch(t){}if(!h){const e="createMediaKeys("+t.keySystem+") failed";return n.dispatchEvent(new CustomEvent(i(563),{detail:{message:e}})),void wr[i(690)](e)}if(t.serverCertificate)wr[i(567)](i(684)+t[i(552)][i(627)]+" bytes)"),yield h.setServerCertificate(t[i(552)]);else if(t[i(547)]){const e={method:i(487)},s=t.serverCertificateUrl;try{const r=yield t.config[i(645)]?t[i(479)][i(645)](s,e):fetch(s,e);if(!r.ok){const t="Server certificate fetch failed with error "+r[i(649)];return void n[i(569)](new CustomEvent(i(563),{detail:{message:t}}))}const o=yield r[i(581)]();wr[i(567)]("Fetched certificate from "+s+", "+o.byteLength+i(565)),yield h.setServerCertificate(o)}catch(t){const e=t.name+": "+t[i(628)];return wr[i(690)](e),void n[i(569)](new CustomEvent("rtcdrmerror",{detail:{message:e}}))}}yield n[i(484)](h),n[i(555)](i(492),pr),Ur(t)})}(l)),l[i(479)][i(661)][i(555)]("play",function(){const t=i;l[t(479)][t(661)][t(691)]>.5&&(l[t(561)]=Date[t(658)]())})}const zr=mr(655)+mr(671)+mr(477)+mr(564)+'),idrFrames.push(idrFrames[0].slice());let $=new Uint8Array(idrFrames[1]);$.set([16,0,50],27)}let idrPicIdToggle=0;function generateDummyFrame($){return(brokenFrame||initializeDummyFrames(),$)?brokenFrame:idrFrames[idrPicIdToggle^=1]}function audioTransformFunction($,e){postMessage({streamType:"audio",frame:{timestamp:$.timestamp,data:$.data}}),e.enqueue($)}let keyFrameNeeded=!1;function videoTransformFunction($,e){postMessage({streamType:"video",f'+mr(542)+mr(613)+mr(609)+mr(648)+mr(559);function Gr(t){const i=mr;if(0===Br[i(506)])throw new g(i(568));let e;if(t&&t[i(661)])e=t.videoElement;else{if(1!==Br[i(506)])throw new g("Several DRM configs detected, rtcDrmOnTrack have to be called with target DRM config.");e=Br.keys()[i(646)]()[i(560)]}const s=Br[i(524)](e);if(!s){let t="";throw Br[i(480)]((i,e)=>{t+=e.id+", "}),t=t[i(550)](0,-2),new g(i(608)+e.id+i(515)+t+"]")}return s}function Xr(t,i){const e=mr;if(t&&t.config[e(661)]){const s=t.config[e(661)];if(s.buffered[e(553)]>0){const t=s.buffered[e(693)](s.buffered[e(553)]-1)-s.currentTime;i[e(611)]=i.jitterBufferDelayHint=i[e(520)]=t}u(Xr,1e3,t,i)}}const jr=at.get("View");jr.setLevel(at.DEBUG);const Qr={metadata:!1,enableDRM:!1,disableVideo:!1,disableAudio:!1,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};t.Director=is,t.Logger=at,t.PeerConnection=Pe,t.Publish=class extends Ds{async connect(t){void 0===t&&(t=Vs),Ws(t),this.options=f(l(l({},Vs),t),{peerConfig:l(l({},Vs.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.options.metadata=this.options.metadata&&this.options.codec===ye.H264&&!this.options.disableVideo,await this.initConnection({migrate:!1})}async reconnect(t){var i,e;this.options.mediaStream=null!=(e=null==(i=this.webRTCPeer)?void 0:i.getTracks())?e:this.options.mediaStream,super.reconnect(t)}async replaceConnection(){var t,i;Us.info("Migrating current connection"),this.options.mediaStream=null!=(i=null==(t=this.webRTCPeer)?void 0:t.getTracks())?i:this.options.mediaStream,await this.initConnection({migrate:!0})}async record(){var t;this.recordingAvailable?(this.options.record=!0,await(null==(t=this.signaling)?void 0:t.cmd("record")),Us.info("Broadcaster start recording")):Us.error("Record not available")}async unrecord(){var t;this.recordingAvailable?(this.options.record=!1,await(null==(t=this.signaling)?void 0:t.cmd("unrecord")),Us.info("Broadcaster stop recording")):Us.error("Unrecord not available")}stop(){var t;super.stop(),null==(t=this.worker)||t.terminate(),this.worker=null}async initConnection(t){var i,e;let s,n;if(Us.debug("Broadcast option values: ",this.options),this.stopReconnection=!1,!this.options.mediaStream)throw Us.error("Error while broadcasting. MediaStream required"),new m("MediaStream required");if(!t.migrate&&this.isActive())throw Us.warn("Broadcast currently working"),new m("Broadcast currently working");try{n=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==n?void 0:n.iceServers,this.options.peerConfig.encodedInsertableStreams=this.options.metadata}catch(t){throw Us.error("Error generating token."),t instanceof Ye&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!n)throw Us.error("Error while broadcasting. Publisher data required"),new m("Publisher data required");const r=as(n.jwt);if(this.streamName=r.millicast.streamName,this.recordingAvailable=r[ds.atob("bWlsbGljYXN0")].record,this.options.record&&!this.recordingAvailable)throw Us.error("Error while broadcasting. Record option detected but recording is not available"),new m("Record option detected but recording is not available");const h=new je({streamName:this.streamName,url:"".concat(n.urls[0],"?token=").concat(n.jwt)}),o=t.migrate?new Pe:this.webRTCPeer;await o.createRTCPeer(this.options.peerConfig,Se),null==(i=this.stopReemitingWebRTCPeerInstanceEvents)||i.call(this),null==(e=this.stopReemitingSignalingInstanceEvents)||e.call(this),this.stopReemitingWebRTCPeerInstanceEvents=gt(o,this,[ke.connectionStateChange]),this.stopReemitingSignalingInstanceEvents=gt(h,this,[Xe]);const a=o.getRTCLocalSDP(this.options),u=h.connect();s=await Promise.all([a,u]);const c=s[0];this.options.metadata&&(this.worker||(this.worker=new Fs),this.getRTCPeerConnection().getSenders().forEach(t=>{if(Ms)t.transform=new RTCRtpScriptTransform(this.worker,{name:"senderTransform",codec:this.options.codec});else if(Ns){const{readable:i,writable:e}=t.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-sender",codec:this.options.codec,readable:i,writable:e},[i,e])}}));let d=this.signaling;this.signaling=h;const l=this.signaling.publish(c,this.options),f=o.peer.setLocalDescription(o.sessionDescription);s=await Promise.all([l,f]);let v=s[0];!this.options.disableVideo&&this.options.bandwidth>0&&(v=o.updateBandwidthRestriction(v,this.options.bandwidth)),await o.setRTCRemoteSDP(v),Us.info("Broadcasting to streamName: ",this.streamName);let _=this.webRTCPeer;this.webRTCPeer=o,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ke.connectionStateChange,t=>{var i,e;["connected","disconnected","failed","closed"].includes(t)&&(null==(i=null==d?void 0:d.close)||i.call(d),null==(e=null==_?void 0:_.closeRTCPeer)||e.call(_),d=_=null)})}sendMetadata(t,i){var e;if(void 0===i&&(i="d40e38ea-d419-4c62-94ed-20ac37b4e4fa"),null!=(e=this.options)&&e.metadata&&this.worker)this.worker.postMessage({action:"metadata-sei-user-data-unregistered",uuid:i,payload:t});else{let t="Could not send metadata due to:";this.options?this.options.metadata?this.worker||(t+="\n- Stream not being published."):(t+="\n- Metadata option is not enabled.",this.options.codec!==ye.H264&&(t+="\n- Incompatible codec. Only H264 available."),this.options.disableVideo&&(t+="\n- Video disabled.")):t+="\n- Stream not being published.",Us.warn(t)}}constructor(t,i,e=!0){t&&Us.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,i,Us,e)}},t.Signaling=je,t.View=class extends Ds{async connect(t){void 0===t&&(t=Qr),this.options=f(l(l({},Qr),t),{peerConfig:l(l({},Qr.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.eventQueue.length=0,await this.initConnection({migrate:!1})}async select(t){void 0===t&&(t={}),jr.debug("Viewer select layer values: ",t),await this.signaling.cmd("select",{layer:t}),jr.info("Connected to streamName: ",this.streamName)}async addRemoteTrack(t,i){jr.info("Viewer adding remote track",t);const e=await this.webRTCPeer.addRemoteTrack(t,i);for(const t of i)t.addTrack(e.receiver.track);return e}async project(t,i){for(const t of i){if(!t.trackId&&!t.media)throw jr.error("Error in projection mapping, trackId or mediaId must be set"),new m("Error in projection mapping, trackId or mediaId must be set");const i=this.webRTCPeer.getRTCPeer();if(t.mediaId&&!i.getTransceivers().find(i=>i.mid===t.mediaId.toString()))throw jr.error("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers")),new m("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers"))}jr.debug("Viewer project source: layer mappings: ",t,i),await this.signaling.cmd("project",{sourceId:t,mapping:i}),jr.info("Projection done")}async unproject(t){jr.debug("Viewer unproject mediaIds: ",t),await this.signaling.cmd("unproject",{mediaIds:t}),jr.info("Unprojection done")}async replaceConnection(){jr.info("Migrating current connection"),await this.initConnection({migrate:!0})}stop(){var t,i;super.stop(),null==(t=this.drmOptionsMap)||t.clear(),this.DRMProfile=null,null==(i=this.worker)||i.terminate(),this.worker=null,this.payloadTypeCodec={},this.tracksMidValues={},this.eventQueue.length=0}async initConnection(t){var i;let e,s;if(jr.debug("Viewer connect options values: ",this.options),this.stopReconnection=!1,t.abrConfiguration&&t.abrConfiguration.metadata){const i=t.abrConfiguration.metadata.bitrate;if(!i||i<0)throw new m("Invalid bitrate ".concat(i," supplied for ABR. The value must be a non-negative integer value."))}if(!t.migrate&&this.isActive())throw jr.warn("Viewer currently subscribed"),new m("Viewer currently subscribed");try{s=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==s?void 0:s.iceServers,this.options.peerConfig.encodedInsertableStreams=Ns&&(this.options.enableDRM||this.options.metadata)}catch(t){throw jr.error("Error generating token."),t instanceof Ye&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!s)throw jr.error("Error while subscribing. Subscriber data required"),new m("Subscriber data required");const n=as(s.jwt);this.streamName=n.millicast.streamName;const r=new je({streamName:this.streamName,url:"".concat(s.urls[0],"?token=").concat(s.jwt)});s.subscriberToken&&(this.subscriberToken=s.subscriberToken);const h=t.migrate?new Pe:this.webRTCPeer;await h.createRTCPeer(this.options.peerConfig),null==(i=this.stopReemitingWebRTCPeerInstanceEvents)||i.call(this),this.stopReemitingWebRTCPeerInstanceEvents=gt(h,this,w.values(ke).filter(t=>t!==ke.track)),this.options.metadata&&(this.worker||(this.worker=new Fs),this.worker.onmessage=t=>{if("metadata"===t.data.event){const i=new TextDecoder,e=t.data.metadata;if(e.mid=t.data.mid,e.track=this.tracksMidValues[t.data.mid],e.uuid){const t=e.uuid;e.uuid=t.reduce((t,i)=>t+i.toString(16).padStart(2,"0"),""),e.uuid=e.uuid.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}if(e.timecode&&(e.timecode=new Date(i.decode(e.timecode))),e.unregistered){const t=i.decode(e.unregistered);try{const i=JSON.parse(t);e.unregistered=i}catch(t){jr.info("The content could not be converted to JSON, returning raw bytes instead")}}this.emit("metadata",e)}}),h.on(ke.track,t=>{this.isMainStreamActive?this.onTrackEvent(t):this.eventQueue.push(t)}),r.on(Xe,async t=>{if(this.isMainStreamActive||"active"!==t.name)"inactive"===t.name&&this.isMainStreamActive&&this.mainSourceId===t.data.sourceId&&(this.isMainStreamActive=!1),this.emit(Xe,t);else{if(this.mainSourceId=t.data.sourceId,!this.DRMProfile&&t.data.encryption){const t=await this.tokenGenerator();t.drmObject&&(this.DRMProfile=t.drmObject)}for(this.emit(Xe,t),this.isMainStreamActive=!0;this.eventQueue.length>0;)this.onTrackEvent(this.eventQueue.shift())}});const o=h.getRTCLocalSDP(f(l({},this.options),{stereo:!0})),a=r.connect();e=await Promise.all([o,a]);const c=e[0];let d=this.signaling;this.signaling=r;const v=this.signaling.subscribe(c,f(l({},this.options),{vad:this.options.multiplexedAudioTracks>0})),_=h.peer.setLocalDescription(h.sessionDescription);e=await Promise.all([v,_]);const g=e[0];this.payloadTypeCodec=me.getCodecPayloadType(g),await h.setRTCRemoteSDP(g),jr.info("Connected to streamName: ",this.streamName);let p=this.webRTCPeer;this.webRTCPeer=h,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ke.connectionStateChange,t=>{var i,e;"connected"===t?u(()=>{var t,i;null==(t=null==d?void 0:d.close)||t.call(d),null==(i=null==p?void 0:p.closeRTCPeer)||i.call(p),d=p=null,jr.info("Current connection migrated")},1e3):["disconnected","failed","closed"].includes(t)&&(null==(i=null==d?void 0:d.close)||i.call(d),null==(e=null==p?void 0:p.closeRTCPeer)||e.call(p),d=p=null)})}onTrackEvent(t){var i,e,n;if(this.tracksMidValues[null==(i=t.transceiver)?void 0:i.mid]=t.track,this.isDRMOn){const i=t.transceiver.mid,e=this.getDRMConfiguration(i);try{!function(t,i){const e=mr;var n,r;const h=t[e(614)][e(503)];h===e(502)&&(t[e(642)][e(611)]=t.receiver[e(505)]=t[e(642)][e(520)]=0);const o=Gr(i),a=o[e(479)][e(661)],u=o.config.audioElement;if(o.enabled){const i=""+e(yr?525:470);if(o[e(479)][e(488)])wr[e(567)](i+e(544));else{if(wr[e(567)](e(676)+i+e(653)),h===e(502)){const t=cn[e(631)][e(502)].in[e(675)];t>0&&(o.dbgMediaDump[e(502)]=new fn(e(502),e(632),t))}else if(h===e(504)){const t=cn[e(631)][e(504)].in[e(675)];t>0&&(o[e(474)][e(504)]=new fn(e(504),e(494),t))}if(yr){if(o[e(500)]=function(t){const i=mr,e=s[i(551)]||s.webkitURL,n=s[i(538)],r=s.Worker;if(!(e&&n&&r&&t))return null;const h=new n([t]);return new r(e[i(610)](h))}(zr),null==o[e(500)])throw new m(e(486));o[e(500)][e(463)]=t=>{const i=e;t[i(662)][i(497)]===i(502)?Hr(o,t.data.frame,null):Wr(o,t.data.frame,null)},t[e(642)][e(541)]=new RTCRtpScriptTransform(o.worker,{operation:h})}else{const i=h===e(502)?Hr:Wr,s={drm:o,transform:(t,e)=>{i(o,t,e)}},n=t[e(642)][e(470)](),r=new TransformStream({transform:s[e(541)][e(545)](s)}),{readable:a,writable:u}=n;a[e(512)](r)[e(640)](u)}}if("audio"===h&&(null===(n=o.config[e(504)])||void 0===n?void 0:n.encryption)===e(572)){if(!u)return void wr[e(517)](e(579));u[e(557)]!==t[e(546)][0]&&(u[e(557)]=t.streams[0]),o[e(479)][e(661)]&&(t[e(642)].playoutDelayHint=t.receiver.jitterBufferDelayHint=t[e(642)][e(520)]=o[e(479)][e(571)],Xr(o,t[e(642)]))}else h===e(502)&&(null===(r=o[e(479)][e(502)])||void 0===r?void 0:r.encryption)===e(572)&&a[e(557)]!==t[e(546)][0]&&(a.srcObject=t[e(546)][0])}else a[e(557)]!==t[e(546)][0]&&(a.srcObject=t[e(546)][0])}(t,e)}catch(t){jr.error("Failed to apply DRM on media Id:",i,"error is: ",t),this.emit("error",new m("Failed to apply DRM on media Id: "+i+" error is: "+t))}this.worker||(this.worker=new Fs),this.worker.addEventListener("message",t=>{"complete"===t.data.event&&function(t,i,e){const s=mr,n=Gr(e);t[s(601)]?Hr(n,t,i):Wr(n,t,i)}(t.data.frame,null,e)})}if(this.options.metadata)if(Ms)t.receiver.transform=new RTCRtpScriptTransform(this.worker,{name:"receiverTransform",payloadTypeCodec:l({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(e=t.transceiver)?void 0:e.mid});else if(Ns){const{readable:i,writable:e}=t.receiver.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-receiver",payloadTypeCodec:l({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(n=t.transceiver)?void 0:n.mid,readable:i,writable:e},[i,e])}this.emit(ke.track,t)}getDRMConfiguration(t){return this.drmOptionsMap?this.drmOptionsMap.get(t):null}async onRtcDrmFetch(t,i){return i.headers||(i.headers=new Headers),i.headers.get("x-dt-custom-data")&&i.headers.delete("x-dt-custom-data"),this.subscriberToken?i.headers.append("Authorization","Bearer ".concat(this.subscriberToken)):jr.warn("onRtcDrmFetch: no subscriberToken"),fetch(t,i)}configureDRM(t){if(!t)throw new m("Required DRM options is not provided");this.drmOptionsMap||(this.drmOptionsMap=new Map);const i={merchant:"dolby",environment:Vn.Production,customTransform:this.options.metadata,videoElement:t.videoElement,audioElement:t.audioElement,video:{codec:"H264",encryption:"cbcs",keyId:qs(t.videoEncryptionParams.keyId),iv:qs(t.videoEncryptionParams.iv)},audio:{codec:"opus",encryption:"clear"},onFetch:this.onRtcDrmFetch.bind(this)};t.mediaBufferMs&&(i.mediaBufferMs=t.mediaBufferMs),this.DRMProfile&&(this.DRMProfile.playReadyUrl&&(i.prLicenseUrl=this.DRMProfile.playReadyUrl),this.DRMProfile.widevineUrl&&(i.wvLicenseUrl=this.DRMProfile.widevineUrl),this.DRMProfile.fairPlayUrl&&(i.fpsLicenseUrl=this.DRMProfile.fairPlayUrl),this.DRMProfile.fairPlayCertUrl&&(i.fpsCertificateUrl=this.DRMProfile.fairPlayCertUrl));try{qr(i),this.drmOptionsMap.set(t.videoMid,i),t.audioMid&&this.drmOptionsMap.set(t.audioMid,i),i.videoElement.addEventListener("rtcdrmerror",t=>{jr.error("DRM error: ",t.detail.message,"in video element:",i.videoElement.id),this.emit("error",new m(t.detail.message))})}catch(i){jr.error("Failed to configure DRM with options:",t,"error is:",i)}}removeDRMConfiguration(t){var i;null==(i=this.drmOptionsMap)||i.delete(t)}get isDRMOn(){return!!this.drmOptionsMap&&this.drmOptionsMap.size>0}exchangeDRMConfiguration(t,i){const e=this.getDRMConfiguration(t),s=this.getDRMConfiguration(i);if(null===e)throw new m("No DRM configuration found for "+t);if(null===s)throw new m("No DRM configuration found for "+i);zs(e.video,s.video,"keyId"),zs(e.video,s.video,"iv");try{qr(e)}catch(t){jr.error("Failed to configure DRM with options:",e,"error is:",t)}try{qr(s)}catch(t){jr.error("Failed to configure DRM with options:",s,"error is:",t)}}constructor(t,i,e=null,s=!0){t&&jr.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,i,jr,s),this.payloadTypeCodec={},this.tracksMidValues={},this.drmOptionsMap=null,this.eventQueue=[],this.isMainStreamActive=!1,e&&(this.on(ke.track,t=>{e.srcObject=t.streams[0]}),jr.warn("The mediaElement property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, do this in either the `track` or the `active` broadcast event."))}},w.defineProperty(t,Io.toStringTag,{value:"Module"})})}),wd=Qn(t=>{"use strict";function i(){const t=md();return i=function(){return t},t}r(),w.defineProperty(t,"__esModule",{value:!0}),function(t,i){for(var e in i)w.defineProperty(t,e,{enumerable:!0,get:w.getOwnPropertyDescriptor(i,e).get})}(t,{get Director(){return i().Director},get Logger(){return i().Logger},get View(){return i().View}})}),yd=Qn((t,i)=>{r(),i.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}}),Ad=Qn((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=e+e,o=s+s,a=n+n,u=e*h,c=s*h,d=s*o,l=n*h,f=n*o,v=n*a,_=r*h,g=r*o,p=r*a;return t[0]=1-d-v,t[1]=c+p,t[2]=l-g,t[3]=0,t[4]=c-p,t[5]=1-u-v,t[6]=f+_,t[7]=0,t[8]=l+g,t[9]=f-_,t[10]=1-u-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}}),bd=Qn((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,h=e[0],o=e[1],a=e[2],u=_.sqrt(h*h+o*o+a*a);if(_.abs(u)<1e-6)return null;return h*=u=1/u,o*=u,a*=u,s=_.sin(i),n=_.cos(i),r=1-n,t[0]=h*h*r+n,t[1]=o*h*r+a*s,t[2]=a*h*r-o*s,t[3]=0,t[4]=h*o*r-a*s,t[5]=o*o*r+n,t[6]=a*o*r+h*s,t[7]=0,t[8]=h*a*r+o*s,t[9]=o*a*r-h*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}}),Sd=Qn((t,i)=>{r(),i.exports=function(t,i){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}}),Td=Qn((t,i)=>{r(),i.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}}),kd=Qn((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],d=i[9],l=i[10],f=i[11],v=i[12],_=i[13],g=i[14],p=i[15],m=e*o-s*h,w=e*a-n*h,y=e*u-r*h,A=s*a-n*o,b=s*u-r*o,S=n*u-r*a,T=c*_-d*v,k=c*g-l*v,E=c*p-f*v,P=d*g-l*_,x=d*p-f*_,I=l*p-f*g,R=m*I-w*x+y*P+A*E-b*k+S*T;if(!R)return null;return R=1/R,t[0]=(o*I-a*x+u*P)*R,t[1]=(n*x-s*I-r*P)*R,t[2]=(_*S-g*b+p*A)*R,t[3]=(l*b-d*S-f*A)*R,t[4]=(a*E-h*I-u*k)*R,t[5]=(e*I-n*E+r*k)*R,t[6]=(g*y-v*S-p*w)*R,t[7]=(c*S-l*y+f*w)*R,t[8]=(h*x-o*E+u*T)*R,t[9]=(s*E-e*x-r*T)*R,t[10]=(v*b-_*y+p*m)*R,t[11]=(d*y-c*b-f*m)*R,t[12]=(o*k-h*P-a*T)*R,t[13]=(e*P-s*k+n*T)*R,t[14]=(_*w-v*A-g*m)*R,t[15]=(c*A-d*w+l*m)*R,t}}),Ed=Qn((t,i)=>{r(),i.exports=function(t,i,e){var s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],d=i[8],l=i[9],f=i[10],v=i[11],_=i[12],g=i[13],p=i[14],m=i[15],w=e[0],y=e[1],A=e[2],b=e[3];return t[0]=w*s+y*o+A*d+b*_,t[1]=w*n+y*a+A*l+b*g,t[2]=w*r+y*u+A*f+b*p,t[3]=w*h+y*c+A*v+b*m,w=e[4],y=e[5],A=e[6],b=e[7],t[4]=w*s+y*o+A*d+b*_,t[5]=w*n+y*a+A*l+b*g,t[6]=w*r+y*u+A*f+b*p,t[7]=w*h+y*c+A*v+b*m,w=e[8],y=e[9],A=e[10],b=e[11],t[8]=w*s+y*o+A*d+b*_,t[9]=w*n+y*a+A*l+b*g,t[10]=w*r+y*u+A*f+b*p,t[11]=w*h+y*c+A*v+b*m,w=e[12],y=e[13],A=e[14],b=e[15],t[12]=w*s+y*o+A*d+b*_,t[13]=w*n+y*a+A*l+b*g,t[14]=w*r+y*u+A*f+b*p,t[15]=w*h+y*c+A*v+b*m,t}}),Pd=Qn((t,i)=>{r(),i.exports=function(t,i,e,s,n){var r=1/_.tan(i/2),h=1/(s-n);return t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*h,t[15]=0,t}}),xd=Qn((t,i)=>{r(),i.exports=function(t,i,e,s){var n,r,h,o,a,u,c,d,l,f,v,g,p,m,w,y,A,b,S,T,k,E,P,x,I=s[0],R=s[1],C=s[2],D=_.sqrt(I*I+R*R+C*C);if(_.abs(D)<1e-6)return null;I*=D=1/D,R*=D,C*=D,n=_.sin(e),r=_.cos(e),h=1-r,o=i[0],a=i[1],u=i[2],c=i[3],d=i[4],l=i[5],f=i[6],v=i[7],g=i[8],p=i[9],m=i[10],w=i[11],y=I*I*h+r,A=R*I*h+C*n,b=C*I*h-R*n,S=I*R*h-C*n,T=R*R*h+r,k=C*R*h+I*n,E=I*C*h+R*n,P=R*C*h-I*n,x=C*C*h+r,t[0]=o*y+d*A+g*b,t[1]=a*y+l*A+p*b,t[2]=u*y+f*A+m*b,t[3]=c*y+v*A+w*b,t[4]=o*S+d*T+g*k,t[5]=a*S+l*T+p*k,t[6]=u*S+f*T+m*k,t[7]=c*S+v*T+w*k,t[8]=o*E+d*P+g*x,t[9]=a*E+l*P+p*x,t[10]=u*E+f*P+m*x,t[11]=c*E+v*P+w*x,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]);return t}}),Id=Qn((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,h,o,a,u,c,d,l,f,v,_=e[0],g=e[1],p=e[2];i===t?(t[12]=i[0]*_+i[4]*g+i[8]*p+i[12],t[13]=i[1]*_+i[5]*g+i[9]*p+i[13],t[14]=i[2]*_+i[6]*g+i[10]*p+i[14],t[15]=i[3]*_+i[7]*g+i[11]*p+i[15]):(s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],d=i[8],l=i[9],f=i[10],v=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=d,t[9]=l,t[10]=f,t[11]=v,t[12]=s*_+o*g+d*p+i[12],t[13]=n*_+a*g+l*p+i[13],t[14]=r*_+u*g+f*p+i[14],t[15]=h*_+c*g+v*p+i[15]);return t}});r();var Vo=function(t){return t[t.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",t[t.LICENSE_ERROR=2e3]="LICENSE_ERROR",t[t.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",t[t.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",t[t.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",t[t.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",t[t.SOURCE_INVALID=3e3]="SOURCE_INVALID",t[t.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",t[t.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",t[t.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",t[t.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",t[t.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",t[t.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",t[t.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",t[t.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",t[t.MEDIA_ABORTED=5004]="MEDIA_ABORTED",t[t.NETWORK_ERROR=6e3]="NETWORK_ERROR",t[t.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",t[t.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",t[t.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",t[t.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",t[t.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",t[t.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",t[t.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",t[t.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",t[t.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",t[t.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",t[t.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",t[t.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",t[t.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",t[t.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",t[t.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",t[t.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",t[t.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",t[t.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",t[t.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",t[t.AD_ERROR=1e4]="AD_ERROR",t[t.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",t[t.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",t[t.PICTURE_IN_PICTURE_ERROR=11001]="PICTURE_IN_PICTURE_ERROR",t[t.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",t[t.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",t[t.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",t[t.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",t[t.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",t[t.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",t}({}),Je=function(t){return t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE",t}({});!function(t){t.fromCode=function(i){const e=_.floor(i/1e3);if(e in t)return e;throw new g("Invalid error code: "+i)}}(Je||(Je={})),r(),r(),r(),r(),r(),r(),r(),r();var ei=function(t){return t.Sv="web",t.Tv="android",t.Ev="android-tv",t.Pv="ios",t.xv="tvos",t.Iv="chromecast",t.Rv="theoliveweb",t}({});var dl=od?od.userAgent:"",Rd=dl.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Cd=dl.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Dd=dl.match(/Android ([0-9\.]+)/i),Bd=dl.match(/Windows NT ([0-9\.]+)/i),Nd=dl.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),Md=dl.match(/Firefox\/([0-9\.]+)/i),Ld=dl.match(/OPR\/(\d+\.\d+)/i),Od=dl.match(/Tizen ([0-9\.]+)/i),Fd=dl.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),Ud=dl.match(/HbbTV\/([0-9.]+)/i),Vd=dl.match(/(AFT.*) Build/i),Hd=class{get Ke(){return this.Cv}get Dv(){return this.Bv}get Nv(){return this.Mv}get Lv(){return this.Ov}get Fv(){return this.Uv}get Vv(){return this.Hv}get Wv(){return this.qv}get zv(){return this.Gv}get Xv(){return this.Qv}get Kv(){return this.Yv}get Jv(){return this.Zv}get ru(){return this.$v}get t_(){return this.i_}get e_(){return this.s_||this.n_}get vd(){return this.r_}get Ks(){return this.h_}get o_(){return this.a_}get u_(){return this.c_}get d_(){var t;return null!=(t=this.l_)?t:this.f_}get v_(){return this.__}get g_(){var t;return(null==(t=s.chrome)?void 0:t.webview)&&this.p_>0}get m_(){return this.p_}get w_(){return this.y_}get A_(){return this.b_}get S_(){return this.T_}get k_(){return this.E_}get P_(){return this.x_}get I_(){return this.R_}get IS_FIRETV_AFTMM(){return"AFTMM"===this.C_}get D_(){return this.B_}get N_(){return this.M_}get L_(){return this.O_}get F_(){return this.U_}get V_(){return this.H_}get W_(){return this.q_}get z_(){return this.G_}get X_(){return this.j_}get Q_(){return 0===this.K_&&Qt.ru?this.i_:this.K_}get Y_(){return this.J_}get Z_(){return this.eg}get rg(){return this.hg}get og(){return this.ag}get cg(){return!(!this.S_&&!this.w_)&&this.d_<=56}get dg(){return this.fg}get vg(){return this._g}get gg(){return this.pg}get wg(){return this.yg}get Ag(){return this.Sg}get Tg(){return this.Eg}get Pg(){return this.xg}get Ig(){return this.Rg}get Cg(){return this.Dg}get IS_IOS_CHROME(){return this.Bg}constructor(){this.Cv=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||od&&od.msMaxTouchPoints),this.Bv=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(dl)||/(macintosh|mac(?=_powerpc)\s)/i.test(dl),this.Mv=/Windows NT/i.test(dl),this.Ov=Bd?C(Bd[1]):0,this.Uv=/Android/i.test(dl),this.Hv=Dd?C(Dd[1]):0,this.qv=/windows phone (8|8\.1)/i.test(dl),this.Gv=/iPhone/i.test(dl),this.Qv=/iPad/i.test(dl),this.Yv=this.Bv&&this.Cv&&!this.Qv,this.Zv=/iPod/i.test(dl),this.r_=/Mobile Safari/i.test(dl),this.s_=/EOS\d*STB/i.test(dl),this.n_=/APP\d*STB/i.test(dl),this.$v=(this.Gv||this.Qv||this.Yv||this.Zv)&&!this.qv,this.i_=Fd?C(Fd[2]):0,this.h_=this.qv||this.$v||this.Uv||this.r_,this.a_=/CriOS/i.test(dl),this.c_=Boolean(self.chrome&&/google/i.test(od.vendor))||this.a_,this.__=this.c_&&/Edg\//i.test(od.userAgent),this.p_=Cd?x(Cd[1],10):0,this.Bg=Boolean(/CriOS/i.test(dl)),this.Dg=Boolean(self.chrome||/Chrome/i.test(dl)||this.Bg),this.f_=Rd?x(Rd[1],10):0,this.y_=/SMART-TV.*Tizen/i.test(dl),this.b_=Od?C(Od[1]):0,this.l_=this.b_>0?function(t){return t>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0}(this.b_):void 0,this.T_=/webos|web0s/i.test(dl),this.E_=/HbbTV/i.test(dl),this.x_=!!Ud&&function(t){if(!t)return!1;const i=t.split(".").map(Number);return 3===i.length&&1===i[0]&&2===i[1]}(Ud[1]),this.R_=/AFT.* Build/i.test(dl),this.C_=Vd?Vd[1]:void 0,this.B_=/VIZIO/i.test(dl),this.M_=/Edge\/\d+/i.test(dl),this.O_=/Trident/i.test(dl),this.U_=this.O_&&!self.ActiveXObject&&"ActiveXObject"in self,this.H_=/Vivaldi/i.test(dl),this.q_=/Firefox/i.test(dl)&&!/Seamonkey/i.test(dl),this.G_=Md?C(Md[1]):0,this.j_=/Safari/i.test(dl)&&!/Chrome/i.test(dl)&&!this.qv&&!this.y_,this.K_=Nd?C(Nd[2]):0,this.J_=Boolean(Ld),this.eg=Ld?C(Ld[1]):0,this.hg=/CrKey/.test(dl),this.ag=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(dl),this.fg=/PlayStation 4/i.test(dl),this._g=/PlayStation 5/i.test(dl),this.pg="web"===ei.Ev,this.yg="web"===ei.Tv,this.Sg=this.yg||this.pg,this.Eg="web"===ei.Pv,this.xg="web"===ei.xv,this.Rg="web"===ei.Iv}};Hd.Ng=new Hd;var Qt=Hd.Ng;r();var La={}.hasOwnProperty,Wd={}.toString;function it(t){return null!=t}function qd(t){return void 0===t}var zd,ul=Array.isArray||function(t){return"[object Array]"===Wd.call(t)};function Pc(t){return Lu(t)&&La.call(t,"length")&&ho(t.length)}function Lu(t){return"object"==typeof t&&null!==t}function Gd(t){return Lu(t)&&t.constructor&&t.constructor===w}function Z(t){return"string"==typeof t}function Xd(t){return"boolean"==typeof t}function ih(t){return it(t)&&"function"==typeof t.then}function jd(t){return"[object Date]"===Wd.call(t)}function ho(t){return"number"==typeof t}function Qd(t){return"function"==typeof t}function ri(t){return Qd(t)||Lu(t)}function Kd(t){return Lu(t)&&!ul(t)}function os(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Yd(t){let i;for(;it(i=t.firstChild);)t.removeChild(i)}function Jd(t,i){let e;for(;it(e=t.firstChild);)i.appendChild(e)}function Zd(t,i){t.insertBefore(i,t.firstChild)}function $d(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}function El(t){const i=t.className;return"string"==typeof i?i:i&&"string"==typeof i.baseVal?i.baseVal:""}function Pl(t,i){const e=t.className;"string"==typeof e?t.className=i:e&&"string"==typeof e.baseVal&&(e.baseVal=i)}function Il(t,i){return void 0!==t.classList?t.classList.contains(i):void 0!==t.className&&-1!==(" "+El(t)+" ").indexOf(" "+i+" ")}function fi(t,i){if(void 0!==t.classList)t.classList.add(i);else if(void 0!==t.className){const e=El(t);-1===(" "+e+" ").indexOf(" "+i+" ")&&Pl(t,(e+" "+i).trim())}}function Rl(t,i){if(void 0!==t.classList)t.classList.remove(i);else if(void 0!==t.className){let e=" "+El(t)+" ";const s=" "+i+" ";for(;-1!==e.indexOf(s);)e=e.replace(s," ");Pl(t,e.trim())}}function Dl(t,i,e){void 0===e&&(e=!Il(t,i)),e?fi(t,i):Rl(t,i)}function Bl(t){t.stopPropagation()}function Nl(t,i){Qt.w_&&Qt.A_<3?function(t,i){let e=i;switch(i){case"flex":e="-webkit-flex";break;case"inline-flex":e="-webkit-inline-flex"}t.display=e}(t,i):function(t,i){if(t.display=i,t.display!==i){let e=i;switch(i){case"flex":e="-ms-flexbox";break;case"inline-flex":e="-ms-inline-flexbox"}t.display=e}}(t,i)}function Ll(t,i){const e=i.style;if(e)for(const i of w.keys(t)){const s=t[i];void 0!==s&&(e[i]=s)}}function oa(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.top="0",i.bottom="0",i.width="100%",i.height="100%"}function Ol(t){const i=t.style;i.position="",i.left="",i.right="",i.top="",i.bottom="",i.width="",i.height=""}function Fl(t){t.removeAttribute("title")}function Ul(t){t.addEventListener("mouseover",t=>{Fl(t.target)})}function Vl(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}r(),r();var Ct=()=>{},jo=t=>t;function ph(t,i){let e=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const h=zd.Mg();h-e>=i&&(t.apply(this,n),e=h)}}function Hl(t,i){let e=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const h=this;0!==e&&zd.Lg(e),e=zd.Og(()=>{e=0,t.apply(h,n)},i)}}function mu(t){let i;return()=>(void 0!==t&&(i=t(),t=void 0),i)}function Be(t,i,e){if(null!=i){if("object"!=typeof i&&"function"!=typeof i)throw new g("Object expected.");var s,n;if(e){if(!id)throw new g("Symbol.asyncDispose is not defined.");s=i[id]}if(void 0===s){if(!Nt)throw new g("Symbol.dispose is not defined.");s=i[Nt],e&&(n=s)}if("function"!=typeof s)throw new g("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(t){return Promise.reject(t)}}),t.stack.push({value:i,dispose:s,async:e})}else e&&t.stack.push({async:!0});return i}r(),r(),r();var Wl="function"==typeof SuppressedError?SuppressedError:function(t,i,e){var s=new m(e);return s.name="SuppressedError",s.error=t,s.suppressed=i,s};function Cs(t){function i(i){t.error=t.hasError?new Wl(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var e,s=0;return function n(){for(;e=t.stack.pop();)try{if(!e.async&&1===s)return s=0,t.stack.push(e),Promise.resolve().then(n);if(e.dispose){var r=e.dispose.call(e.value);if(e.async)return s|=2,Promise.resolve(r).then(n,function(t){return i(t),n()})}else s|=1}catch(t){i(t)}if(1===s)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}function xe(t,i){return zl(t.slice(),i)}function ql(t,i){const e=zl(t,i);return e!==t&&Gl(e,void 0,t.length,t),t}function zl(t,i){let e=t;const s=e.length;if(s<=1)return e;let n=new Array(s);for(let t=1;t<s;t*=2){Gl(e,i,t,n);const s=e;e=n,n=s}return e}function Gl(t,i,e,s){const n=t.length;let r=0;const h=2*e;let o,a,u,c,d;for(a=0;a<n;a+=h)for(u=a+e,o=u+e,u>n&&(u=n),o>n&&(o=n),c=a,d=u;;)if(c<u&&d<o)i&&i(t[c],t[d])<=0?s[r++]=t[c++]:s[r++]=t[d++];else if(c<u)s[r++]=t[c++];else{if(!(d<o))break;s[r++]=t[d++]}}r(),r(),r(),r(),r(),r();var Xl=9007199254740991,Ql=2**-52;function ur(t,i,e){return _.min(_.max(t,i),e)}function uh(t,i,e){return t===i||_.abs(t-i)<=e}function sr(t,i){if(t===i)return!0;const e=_.abs(t-i);if(e<Ql)return!0;return e<_.max(_.abs(t),_.abs(i))*Ql}function Kl(t,i){return t%i+(t<0?i:0)}function Yl(t){return t!=t}function Jl(t,i){return t===i||Yl(t)&&Yl(i)}function Zl(t,i){let e=t,s=i;for(;0!==s;){const t=e%s;e=s,s=t}return e<0?-e:e}function $l(t,i){return t.reduce((t,e)=>t+i(e),0)}var Qc=function(t){return t[t.rh=0]="rh",t[t.Fg=1]="Fg",t[t.Ug=-1]="Ug",t}({}),tf=(t,i)=>(0|t)-(0|i),gu=(t,i)=>t===i?0:t<i?-1:t>i?1:S(t)?S(i)?0:1:-1;function ef(t,i,e){return uh(t,i,e)?0:gu(t,i)}var sf=(t,i)=>sr(t,i)?0:gu(t,i);var nf="function"==typeof Array.prototype.find?(t,i)=>t.find(i):(t,i)=>{const e=li(t,i);return-1===e?void 0:t[e]},Jr=nf,rf="function"==typeof Array.prototype.findLast?(t,i)=>t.findLast(i):(t,i)=>{const e=of(t,i);return-1===e?void 0:t[e]},hf=rf,li="function"==typeof Array.prototype.findIndex?(t,i)=>t.findIndex(i):(t,i)=>{for(let e=0;e<t.length;e+=1){if(i(t[e],e,t))return e}return-1},of="function"==typeof Array.prototype.findLastIndex?(t,i)=>t.findLastIndex(i):(t,i)=>{for(let e=t.length-1;e>=0;e-=1){if(i(t[e],e,t))return e}return-1},af="function"==typeof Array.prototype.at?(t,i)=>t.at(i):(t,i)=>{const e=t.length,s=i>=0?i:e+i;return s<0||s>=e?void 0:t[s]};function oi(t,i){const e=t.indexOf(i);return-1!==e&&(ka(t,e),!0)}function ka(t,i){0===i?t.shift():t.splice(i,1)}function uf(t,i){const e=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===i){n++,e.length-=1;break}e[s++]=t[n++]}for(;n<t.length;)e[s++]=t[n++];return e}function pi(t,i){return-1!==t.indexOf(i)}function cf(t,i,e){if(t===i)return!0;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s+=1)if(!e(t[s],i[s]))return!1;return!0}function Yo(t){t.length=0}function df(t,i){if(t.length!==i.length)return!1;for(const e of t)if(!pi(i,e))return!1;return!0}Array.prototype.flat;var De="function"==typeof Array.prototype.flatMap?(t,i)=>t.flatMap(i):(t,i)=>{const e=[];for(let s=0;s<t.length;s++)e.push(...i(t[s],s));return e};function oo(t,i){return ff(t,(t,e)=>gu(i(t),i(e)))}function lf(t,i){return vf(t,(t,e)=>gu(i(t),i(e)))}function ff(t,i){if(0!==t.length)return t.reduce((t,e)=>i(t,e)<=0?t:e)}function vf(t,i){return ff(t,(t,e)=>i(e,t))}function Bo(t){return t.filter((i,e)=>t.indexOf(i)===e)}function _f(t,i){return Promise.all(t.map(i)).then(i=>t.filter((t,e)=>i[e]))}function gf(t,i,e){if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],i[s]))return!1;return!0}function pf(t,i){return function(t,i){const e=new Array(t);for(let s=0;s<t;s++)e[s]=i(s);return e}(t,i)}var mf=class{Vg(){if(!this.Hg&&!this.Wg){this.Hg=!0;for(const t of this.qg.slice())t();this.zg()}}zg(){if(!this.Wg){this.Wg=!0;for(const t of this.Gg.slice())t();Yo(this.qg),Yo(this.Gg)}}Xg(t){this.Wg||this.qg.push(t)}jg(t){this.Wg||oi(this.qg,t)}Qg(t){this.Wg||this.Gg.push(t)}Kg(t){this.Wg||oi(this.Gg,t)}constructor(){this.Hg=!1,this.Wg=!1,this.qg=[],this.Gg=[]}},at=class t{get Yg(){return this.Jg}Zg(){this.Jg.Vg()}zg(){this.Jg.zg()}$g(t){const i=this.Jg;if(i.Hg)return;if(t.Hg)return void i.Vg();if(i.Wg||t.Wg)return;const e=()=>{s(),i.Vg()},s=()=>{t.jg(e),t.Kg(s),i.jg(e),i.Kg(s)};t.Xg(e),t.Qg(s),i.Xg(e),i.Qg(s)}tp(){const i=new t,e=new t,s=i.Yg,n=e.Yg,r=this.Jg,h=()=>{s.Hg&&n.Wg||n.Hg&&s.Wg?r.Vg():s.Wg&&n.Wg&&r.zg()};s.Xg(h),n.Xg(h),s.Qg(h),n.Qg(h),i.$g(r),e.$g(r);return r.Qg(()=>{s.jg(h),n.jg(h),s.Kg(h),n.Kg(h)}),[i,e]}static ep(i){const e=new t;for(const t of i)void 0!==t&&e.$g(t);return e}[Nt](){this.Zg()}constructor(){this.Jg=new mf}};r(),r();var wf=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];m.apply(this,i)};(wf.prototype=w.create(m.prototype)).constructor=wf;var R=class extends wf{get name(){return"BaseError"}constructor(t,i){super(),this.cause=void 0,this.message=t||"Unknown error",this.cause=i,m.captureStackTrace&&m.captureStackTrace(this,this.constructor)}},dt=class extends R{get name(){return"AbortError"}constructor(t,i){super(t||"Aborted",i)}};function D(t){return t instanceof m&&"AbortError"===t.name}function ii(t){if(t&&t.Hg)throw new dt}function sa(t){if(D(t))throw t}function yf(t){if(!D(t))throw t}function Nc(t,i){return i?new Promise((e,s)=>{if(i.Hg)return t.catch(Ct),s(new dt);const n=()=>{i.jg(n),s(new dt)};i.Xg(n),t.then(t=>{i.jg(n),e(t)},t=>{i.jg(n),s(t)})}):t}async function $e(t,i){const e={stack:[],error:void 0,hasError:!1};try{Be(e,i,!1);return await t}catch(t){e.error=t,e.hasError=!0}finally{Cs(e)}}async function Af(t,i){const e={stack:[],error:void 0,hasError:!1};try{Be(e,i,!1);return await t(i.Yg)}catch(t){e.error=t,e.hasError=!0}finally{Cs(e)}}var bf=Promise.resolve(),ct="function"==typeof queueMicrotask?queueMicrotask:t=>{bf.then(t)};function Wr(t){t.then(Ct,Ct)}async function gn(t){try{return await Promise.all(t)}catch(i){throw await Promise.all(t.map(t=>t.catch(Ct))),i}}function Er(t,i){return new Promise((e,s)=>{if(void 0!==i&&i.Hg)return void s(new dt);const n=zd.Og(()=>{void 0!==i&&i.jg(r),e()},t),r=()=>{zd.Lg(n),s(new dt)};void 0!==i&&i.Xg(r)})}async function Sf(t,i){const e={stack:[],error:void 0,hasError:!1};try{const s=Be(e,new at,!1);return await Promise.race([t,Er(i,s.Yg).then(()=>{throw new m("Timeout")})])}catch(t){e.error=t,e.hasError=!0}finally{Cs(e)}}function Tf(t){return"video"===$d(t)}function kf(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load()),t.hasChildNodes()&&(!function(t,i){const e=t.childNodes;for(let s=e.length-1;s>=0;s--){const n=e.item(s);$d(n)===i&&t.removeChild(n)}}(t,"source"),t.load())}function Ef(){return void 0!==h?h.createElement("video"):void 0}var gr=mu(Ef),Pf=mu(()=>"undefined"!=typeof HTMLVideoElement&&gr()instanceof HTMLVideoElement);function xf(t){const i=h.createElement(t);return Tf(i)&&i.addEventListener("contextmenu",Df),Rf(i),i}function If(t){Rf(t),t.removeEventListener("contextmenu",Df)}function Rf(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),Yd(t),kf(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload="auto",t.controls=!1,t.style.display="none",Tf(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function Cf(t,i){if(i.sp){const i=t.muted;t.muted=!0,t.muted=!1,t.muted=i}else if(t.paused){const i=t.play();ih(i)&&Wr(i),t.pause()}}function Df(t){t.preventDefault()}r(),r(),r();var Bf=null;try{Bf=new WebAssembly.Instance(new WebAssembly.Module(new j([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(y){}function ca(t,i,e){this.low=0|t,this.high=0|i,this.unsigned=!!e}function uo(t){return!0===(t&&t.np)}function Nf(t){var i=_.clz32(t&-t);return t?31-i:i}ca.prototype.np,w.defineProperty(ca.prototype,"np",{value:!0}),ca.isLong=uo;var Mf={},Lf={};function Of(t,i){var e,s,n;return i?(n=0<=(t>>>=0)&&t<256)&&(s=Lf[t])?s:(e=ys(t,0,!0),n&&(Lf[t]=e),e):(n=-128<=(t|=0)&&t<128)&&(s=Mf[t])?s:(e=ys(t,t<0?-1:0,!1),n&&(Mf[t]=e),e)}function Ff(t,i){if(S(t))return i?mr:su;if(i){if(t<0)return mr;if(t>=qf)return Yf}else{if(t<=-zf)return gi;if(t+1>=zf)return Kf}return t<0?Ff(-t,i).neg():ys(t%Wf|0,t/Wf|0,i)}function ys(t,i,e){return new ca(t,i,e)}ca.fromInt=Of,ca.fromNumber=Ff,ca.fromBits=ys;var Uf=_.pow;function Vf(t,i,e){if(0===t.length)throw m("empty string");if("number"==typeof i?(e=i,i=!1):i=!!i,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i?mr:su;if((e=e||10)<2||36<e)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw m("interior hyphen");if(0===s)return Vf(t.substring(1),i,e).neg();for(var n=Ff(Uf(e,8)),r=su,h=0;h<t.length;h+=8){var o=_.min(8,t.length-h),a=x(t.substring(h,h+o),e);if(o<8){var u=Ff(Uf(e,o));r=r.mul(u).add(Ff(a))}else r=(r=r.mul(n)).add(Ff(a))}return r.unsigned=i,r}function Hf(t,i){return"number"==typeof t?Ff(t,i):"string"==typeof t?Vf(t,i):ys(t.low,t.high,"boolean"==typeof i?i:t.unsigned)}ca.fromString=Vf,ca.fromValue=Hf;var Wf=4294967296,qf=Wf*Wf,zf=qf/2,Gf=Of(1<<24),su=Of(0);ca.ZERO=su;var mr=Of(0,!0);ca.UZERO=mr;var Xf=Of(1);ca.ONE=Xf;var jf=Of(1,!0);ca.UONE=jf;var Qf=Of(-1);ca.NEG_ONE=Qf;var Kf=ys(-1,2147483647,!1);ca.MAX_VALUE=Kf;var Yf=ys(-1,-1,!0);ca.MAX_UNSIGNED_VALUE=Yf;var gi=ys(0,-2147483648,!1);ca.MIN_VALUE=gi;var $s=ca.prototype;$s.toInt=function(){return this.unsigned?this.low>>>0:this.low},$s.toNumber=function(){return this.unsigned?(this.high>>>0)*Wf+(this.low>>>0):this.high*Wf+(this.low>>>0)},$s.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(gi)){var i=Ff(t),e=this.div(i),s=e.mul(i).sub(this);return e.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=Ff(Uf(t,6),this.unsigned),r=this,h="";;){var o=r.div(n),a=(r.sub(o.mul(n)).toInt()>>>0).toString(t);if((r=o).isZero())return a+h;for(;a.length<6;)a="0"+a;h=""+a+h}},$s.getHighBits=function(){return this.high},$s.getHighBitsUnsigned=function(){return this.high>>>0},$s.getLowBits=function(){return this.low},$s.getLowBitsUnsigned=function(){return this.low>>>0},$s.getNumBitsAbs=function(){if(this.isNegative())return this.eq(gi)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&!(t&1<<i);i--);return 0!=this.high?i+33:i+1},$s.isSafeInteger=function(){var t=this.high>>21;return!t||!this.unsigned&&(-1===t&&!(0===this.low&&-2097152===this.high))},$s.isZero=function(){return 0===this.high&&0===this.low},$s.eqz=$s.isZero,$s.isNegative=function(){return!this.unsigned&&this.high<0},$s.isPositive=function(){return this.unsigned||this.high>=0},$s.isOdd=function(){return!(1&~this.low)},$s.isEven=function(){return!(1&this.low)},$s.equals=function(t){return uo(t)||(t=Hf(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},$s.eq=$s.equals,$s.notEquals=function(t){return!this.eq(t)},$s.neq=$s.notEquals,$s.ne=$s.notEquals,$s.lessThan=function(t){return this.comp(t)<0},$s.lt=$s.lessThan,$s.lessThanOrEqual=function(t){return this.comp(t)<=0},$s.lte=$s.lessThanOrEqual,$s.le=$s.lessThanOrEqual,$s.greaterThan=function(t){return this.comp(t)>0},$s.gt=$s.greaterThan,$s.greaterThanOrEqual=function(t){return this.comp(t)>=0},$s.gte=$s.greaterThanOrEqual,$s.ge=$s.greaterThanOrEqual,$s.compare=function(t){if(uo(t)||(t=Hf(t)),this.eq(t))return 0;var i=this.isNegative(),e=t.isNegative();return i&&!e?-1:!i&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},$s.comp=$s.compare,$s.negate=function(){return!this.unsigned&&this.eq(gi)?gi:this.not().add(Xf)},$s.neg=$s.negate,$s.add=function(t){uo(t)||(t=Hf(t));var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=0,u=0,c=0,d=0;return c+=(d+=n+(65535&t.low))>>>16,u+=(c+=s+o)>>>16,a+=(u+=e+h)>>>16,a+=i+r,ys((c&=65535)<<16|(d&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},$s.subtract=function(t){return uo(t)||(t=Hf(t)),this.add(t.neg())},$s.sub=$s.subtract,$s.multiply=function(t){if(this.isZero())return this;if(uo(t)||(t=Hf(t)),Bf)return ys(Bf.mul(this.low,this.high,t.low,t.high),Bf.get_high(),this.unsigned);if(t.isZero())return this.unsigned?mr:su;if(this.eq(gi))return t.isOdd()?gi:su;if(t.eq(gi))return this.isOdd()?gi:su;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Gf)&&t.lt(Gf))return Ff(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=65535&t.low,u=0,c=0,d=0,l=0;return d+=(l+=n*a)>>>16,c+=(d+=s*a)>>>16,d&=65535,c+=(d+=n*o)>>>16,u+=(c+=e*a)>>>16,c&=65535,u+=(c+=s*o)>>>16,c&=65535,u+=(c+=n*h)>>>16,u+=i*a+e*o+s*h+n*r,ys((d&=65535)<<16|(l&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},$s.mul=$s.multiply,$s.divide=function(t){if(uo(t)||(t=Hf(t)),t.isZero())throw m("division by zero");var i,e,s;if(Bf)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?ys((this.unsigned?Bf.div_u:Bf.div_s)(this.low,this.high,t.low,t.high),Bf.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?mr:su;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return mr;if(t.gt(this.shru(1)))return jf;s=mr}else{if(this.eq(gi))return t.eq(Xf)||t.eq(Qf)?gi:t.eq(gi)?Xf:(i=this.shr(1).div(t).shl(1)).eq(su)?t.isNegative()?Xf:Qf:(e=this.sub(t.mul(i)),s=i.add(e.div(t)));if(t.eq(gi))return this.unsigned?mr:su;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=su}for(e=this;e.gte(t);){i=_.max(1,_.floor(e.toNumber()/t.toNumber()));for(var n=_.ceil(_.log(i)/_.LN2),r=n<=48?1:Uf(2,n-48),h=Ff(i),o=h.mul(t);o.isNegative()||o.gt(e);)o=(h=Ff(i-=r,this.unsigned)).mul(t);h.isZero()&&(h=Xf),s=s.add(h),e=e.sub(o)}return s},$s.div=$s.divide,$s.modulo=function(t){return uo(t)||(t=Hf(t)),Bf?ys((this.unsigned?Bf.rem_u:Bf.rem_s)(this.low,this.high,t.low,t.high),Bf.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},$s.mod=$s.modulo,$s.rem=$s.modulo,$s.not=function(){return ys(~this.low,~this.high,this.unsigned)},$s.countLeadingZeros=function(){return this.high?_.clz32(this.high):_.clz32(this.low)+32},$s.clz=$s.countLeadingZeros,$s.countTrailingZeros=function(){return this.low?Nf(this.low):Nf(this.high)+32},$s.ctz=$s.countTrailingZeros,$s.and=function(t){return uo(t)||(t=Hf(t)),ys(this.low&t.low,this.high&t.high,this.unsigned)},$s.or=function(t){return uo(t)||(t=Hf(t)),ys(this.low|t.low,this.high|t.high,this.unsigned)},$s.xor=function(t){return uo(t)||(t=Hf(t)),ys(this.low^t.low,this.high^t.high,this.unsigned)},$s.shiftLeft=function(t){return uo(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ys(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):ys(0,this.low<<t-32,this.unsigned)},$s.shl=$s.shiftLeft,$s.shiftRight=function(t){return uo(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ys(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):ys(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},$s.shr=$s.shiftRight,$s.shiftRightUnsigned=function(t){return uo(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ys(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):ys(32===t?this.high:this.high>>>t-32,0,this.unsigned)},$s.shru=$s.shiftRightUnsigned,$s.shr_u=$s.shiftRightUnsigned,$s.rotateLeft=function(t){var i;return uo(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?ys(this.high,this.low,this.unsigned):t<32?(i=32-t,ys(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)):(i=32-(t-=32),ys(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned))},$s.rotl=$s.rotateLeft,$s.rotateRight=function(t){var i;return uo(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?ys(this.high,this.low,this.unsigned):t<32?(i=32-t,ys(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)):(i=32-(t-=32),ys(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned))},$s.rotr=$s.rotateRight,$s.toSigned=function(){return this.unsigned?ys(this.low,this.high,!1):this},$s.toUnsigned=function(){return this.unsigned?this:ys(this.low,this.high,!0)},$s.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},$s.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},$s.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},ca.fromBytes=function(t,i,e){return e?ca.fromBytesLE(t,i):ca.fromBytesBE(t,i)},ca.fromBytesLE=function(t,i){return new ca(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},ca.fromBytesBE=function(t,i){return new ca(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)},"function"==typeof BigInt&&(ca.fromBigInt=function(t,i){return ys(Number(BigInt.asIntN(32,t)),Number(BigInt.asIntN(32,t>>BigInt(32))),i)},ca.fromValue=function(t,i){return"bigint"==typeof t?ca.fromBigInt(t,i):Hf(t,i)},$s.toBigInt=function(){var t=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|t});var Wt=ca;function Jf(t,i){return t.lessThan(i)?t:i}function Zf(t){return!S(t.getTime())}function ku(){return Date.now()||(new Date).getTime()}function $f(t){return t/1e3}function on(t){return 1e3*t}var yt=1/6,iv=Wt.fromNumber(Xl);function Bs(t,i){if(0===i)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(iv))return t.toNumber()/i;const e=t.divide(i),s=t.subtract(e.multiply(i));return e.toNumber()+s.toNumber()/i}var ev=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||Boolean(od&&od.msMaxTouchPoints),sv=gr(),nv=Boolean(sv&&sv.webkitShowPlaybackTargetPicker),rv=class{get rp(){return void 0===this.hp&&(this.hp=this.op()),this.hp}op(){return 0}get ap(){return Qt.Fv?"android":Qt.Dv?"macos":Qt.ru?"ios":Qt.Nv?"windows":"other"}get cp(){return Qt.og?"tv":Qt.Ks?"mobile":"desktop"}get dp(){return!Qt.og}get lp(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get fp(){return s.devicePixelRatio||1}get vp(){return nv}get _p(){return!1}get gp(){return!0}get pp(){return!!(Qt.X_||Qt.ru||Qt.g_)||!!Qt.D_}get mp(){return Qt.D_}get wp(){return!Qt.ru}get yp(){return!0}get Ap(){return!0}get bp(){return!1}get Sp(){}get Tp(){return!0}get kp(){return!1}get Ep(){return Qt.D_}get Pp(){return!1}xp(t,i){return!0}Ip(t){return t>=2*yt}get Rp(){return!1}get Cp(){return!1}get Dp(){return!1}constructor(){this.hp=void 0,this.Bp=!1,this.Ke=ev,this.Ks=!1,this.sp=!0}},hv=class extends rv{constructor(){super()}};r();var ov=class extends hv{get Sp(){if(Qt.Dv)return 4096}xp(t,i){if(t&&t.Np&&i&&i.Np){const e=av(t.Np,"mp4a.40.2")&&av(i.Np,"mp4a.40.5"),s=av(t.Np,"mp4a.40.5")&&av(i.Np,"mp4a.40.2"),n=av(t.Np,"mp4a.40.2")&&av(i.Np,"mp4a.40.34"),r=av(t.Np,"mp4a.40.34")&&av(i.Np,"mp4a.40.2"),h=av(t.Np,"mp4a.40.5")&&av(i.Np,"mp4a.40.34"),o=av(t.Np,"mp4a.40.34")&&av(i.Np,"mp4a.40.5");return!(e||s||n||r||h||o)}return!0}get Dp(){return!0}};function av(t,i){return t.indexOf(i)>-1}r();var uv=class extends hv{Ip(t){return t>=2}};r();var cv=class extends hv{get Pp(){return Qt.Q_<17}get Rp(){return!0}constructor(){super(),this.Bp=Qt.Q_>=11,this.sp=Qt.X_&&!(Qt.ru&&Qt.Q_<10)}};r();var dv,lv=class extends hv{get Tp(){return!Qt.Nv||(Qt.v_?92!==Qt.m_:Qt.d_>=100)}};r(),r(),r(),r(),r();var fv=function(){const t=Ef();if(!t)return!1;const i=t.muted;return t.muted=!i,t.muted!==i}(),vv=function(){if(Qt.Kv)return!1;const t=Ef();if(!t)return!1;const i=t.volume;return t.volume=i/2+.1,i!==t.volume}();var wi=class extends rv{op(){return this.Mp.rp}get Sp(){return this.Mp.Sp}get Tp(){return this.Mp.Tp}xp(t,i){return this.Mp.xp(t,i)}Ip(t){return this.Mp.Ip(t)}get Pp(){return this.Mp.Pp}get Dp(){return this.Mp.Dp}constructor(t){super(),this.Mp=void 0,this.Mp=t,this.Bp=this.Mp.Bp,this.Ke=this.Mp.Ke,this.sp=fv&&this.Mp.sp}},_v=class extends wi{get bp(){return Qt.ru}constructor(t){super(t),this.Bp=!0,this.Ks=!0}};r();var gv=class{Lp(){return new this.Op}Fp(t){return this.Op.isTypeSupported(t)}constructor(t){this.Op=void 0,this.Op=za(t)}};function za(t){return t&&ri(s.ManagedMediaSource)?s.ManagedMediaSource:ri(s.MediaSource)?s.MediaSource:void 0}var pv=class extends _v{get bp(){return!0}op(){return za(!0)?super.op():1}};r();var mv=class extends wi{get _p(){return Qt.A_<3}get gp(){return Qt.A_>=3}get lp(){return s.tizen&&!this.Up&&s.tizen.systeminfo.getPropertyValue("DISPLAY",t=>{const i=t.resolutionWidth,e=t.resolutionHeight;1===i&&1===e||(this.Up={width:i,height:e})}),this.Up}get kp(){return Qt.A_<3}xp(t,i){return super.xp(t,i)}constructor(...t){super(...t),this.Up=void 0}};r();var wv=class extends wi{get lp(){return s.webOS&&!this.Up&&s.webOS.deviceInfo(t=>{this.Up={width:t.screenWidth,height:t.screenHeight}}),this.Up}get yp(){return!1}constructor(...t){super(...t),this.Up=void 0}};r();var yv=class extends wi{get bp(){return!0}get Rp(){return this.Mp.Rp}};r();var Av=class extends wi{get Cp(){return Qt.IS_FIRETV_AFTMM}};!function(t){dv=t}(function(){const t=function(){if(Qt.W_)return new ov;if(Qt.N_||Qt.L_)return new uv;if(Qt.X_)return new cv;if(Qt.u_)return new lv;return new hv}();return Qt.ru?new pv(t):Qt.I_?new Av(t):Qt.Ks?new _v(t):Qt.w_?new mv(t):Qt.S_?new wv(t):Qt.Dv?new yv(t):new wi(t)}()),r(),r(),r();var bv=!(Qt.L_&&!Qt.F_),Sh=self.console;function Sv(t){if(Lu(t))try{return JSON.stringify(t)}catch(t){}return t}function Tv(t){return t.map(Sv).join(" ")}function kv(t){const i=Sh&&Sh[t];return i?i.bind&&bv?i.bind(Sh):function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];Sh[t](Tv(e))}:void 0}var Ev=kv("log")||Ct,Ye=kv("warn")||Ev.bind(void 0,"WARNING:"),Pv=kv("error")||Ev.bind(void 0,"ERROR:"),xv=(()=>{const t=Sh&&Sh.assert;return t?t.bind&&bv?t.bind(Sh):function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];Sh.assert(t,Tv(e))}:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];t||Pv("Assertion failed:",...e)}})();function Iv(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}function Rv(t,i){var e=function(t,i){var e=t.length;if(e<=1)return t;for(var s=new Array(e),n=1;n<e;n*=2){Cv(t,i,n,s);var r=t;t=s,s=r}return t}(t,i);return e!==t&&Cv(e,null,t.length,t),t}function Cv(t,i,e,s){var n,r,h,o,a,u=t.length,c=0,d=2*e;for(n=0;n<u;n+=d)for(h=(r=n+e)+e,r>u&&(r=u),h>u&&(h=u),o=n,a=r;;)if(o<r&&a<h)i(t[o],t[a])<=0?s[c++]=t[o++]:s[c++]=t[a++];else if(o<r)s[c++]=t[o++];else{if(!(a<h))break;s[c++]=t[a++]}}r();var Dv=/[a-zA-Z]/,Bv=/[0-9]/,Nv=/[0-9a-fA-F]/,Mv=/^0x/i,Lv=/^[0-9]+$/,Ov=/^[0-9a-fA-F]+$/,Fv=/^[0-7]+$/,Uv=w.prototype.toString,Vv=Array.isArray||function(t){return"[object Array]"===Uv.call(t)},Hv=void 0!==Io&&"symbol"==typeof f;function Wv(t){return Vv(t)?t:Array.from(t)}function qv(t,i,e){var s=t[i];t[i]=t[e],t[e]=s}function zv(t){return t>=65&&t<=90}function Gv(t){return zv(t)||function(t){return t>=97&&t<=122}(t)}function Xv(t){return t>=48&&t<=57}function jv(t){return Xv(t)||Gv(t)}function Qv(t){return Xv(t)||t>=65&&t<=70||t>=97&&t<=102}function Kv(t){return zv(t)?t+32:t}function Yv(t){return Xv(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function Jv(t,i){return void 0===i&&(i=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(i?87:55):-1}var Zv=_.min,$v=String.fromCharCode;function t_(t){for(var i=t.length,e=[],s=0;s<i;s+=16384){var n=Zv(s+16384,i);e.push($v.apply(null,t.slice(s,n)))}return e.join("")}var i_=2147483647,e_=/[^\0-\x7E]/,s_=/[\x2E\u3002\uFF0E\uFF61]/g,n_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},r_=_.floor,h_=String.fromCharCode;function o_(t){throw new RangeError(n_[t])}function a_(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}var u_,c_,Eo,d_=function(t,i){return t+22+75*(t<26)-((0!=i)<<5)},l_=function(t,i,e){var s=0;for(t=e?r_(t/700):t>>1,t+=r_(t/i);t>455;s+=36)t=r_(t/35);return r_(s+36*t/(t+38))},f_=function(t){return function(t,i){var e=t.split("@"),s="";e.length>1&&(s=e[0]+"@",t=e[1]);var n=function(t,i){for(var e=[],s=t.length;s--;)e[s]=i(t[s]);return e}((t=t.replace(s_,".")).split("."),i).join(".");return s+n}(t,function(t){return e_.test(t)?"xn--"+function(t){for(var i=[],e=(t=a_(t)).length,s=128,n=0,r=72,h=0,o=t;h<o.length;h++){var a=o[h];a<128&&i.push(h_(a))}var u=i.length,c=u;for(u&&i.push("-");c<e;){for(var d=i_,l=0,f=t;l<f.length;l++){var v=f[l];v>=s&&v<d&&(d=v)}var _=c+1;d-s>r_((i_-n)/_)&&o_("overflow"),n+=(d-s)*_,s=d;for(var g=0,p=t;g<p.length;g++){var m=p[g];if(m<s&&++n>i_&&o_("overflow"),m==s){for(var w=n,y=36;;y+=36){var A=y<=r?1:y>=r+26?26:y-r;if(w<A)break;var b=w-A,S=36-A;i.push(h_(d_(A+b%S,0))),w=r_(b/S)}i.push(h_(d_(w,0))),r=l_(n,_,c==u),n=0,++c}}++n,++s}return i.join("")}(t):t})};function hn(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s)}return t_(i)}function v_(t){if(t>=55296&&t<=57343)throw new m("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function __(t,i){return t>>i&63|128}function g_(t,i){4294967168&t?(4294965248&t?4294901760&t?4292870144&t||(i.push(t>>18&7|240),i.push(__(t,12)),i.push(__(t,6))):(v_(t),i.push(t>>12&15|224),i.push(__(t,6))):i.push(t>>6&31|192),i.push(63&t|128)):i.push(t)}function p_(t){for(var i=[],e=0;e<t.length;e++){g_(t[e],i)}return i}function m_(){if(Eo>=c_)throw new m("Invalid byte index");var t=255&u_[Eo];if(Eo++,128==(192&t))return 63&t;throw new m("Invalid continuation byte")}function w_(){var t,i;if(Eo>c_)throw new m("Invalid byte index");if(Eo===c_)return!1;if(t=255&u_[Eo],Eo++,!(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|m_())>=128)return i;throw new m("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|m_()<<6|m_())>=2048)return v_(i),i;throw new m("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|m_()<<12|m_()<<6|m_())>=65536&&i<=1114111)return i;throw new m("Invalid UTF-8 detected")}function y_(t){return[37,Jv(t>>4),Jv(15&t)]}function A_(t){return function(t){return t>=0&&t<=31}(t)||t>126}function b_(t){return A_(t)||32===t||34===t||60===t||62===t||96===t}function S_(t){return b_(t)||35===t||63===t||123===t||125===t}function T_(t){return S_(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function k_(t){return t<33||t>126||34===t||35===t||60===t||62===t}function E_(t){return k_(t)||39===t}function P_(t,i){if(!i(t))return[t];for(var e=p_([t]),s=[],n=0;n<e.length;n++){var r=e[n];s.push.apply(s,y_(r))}return s}function x_(t,i){for(var e=[],s=0,n=a_(t);s<n.length;s++){var r=n[s];e.push.apply(e,P_(r,i))}return hn(e)}function I_(t){return function(t){for(var i=[],e=t.length,s=0;s<e;s++){var n=t[s];if(37===n&&s+2<e&&Qv(t[s+1])&&Qv(t[s+2])){var r=Yv(t[s+1])<<4|Yv(t[s+2]);i.push(r),s+=2}else i.push(n)}return i}(p_(t))}function R_(t){return hn(function(t){u_=t.slice(),c_=u_.length,Eo=0;for(var i,e=[];!1!==(i=w_());)e.push(i);return e}(I_(a_(t))))}function C_(t){var i=t.length,e=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<i&&":"===t[r]){if(!(r+1<i&&":"===t[r+1]))throw new g;r+=2,n=s+=1}for(;r<i;){if(8===s)throw new g("Too many groups");if(":"!==t[r]){for(var h=0,o=0;o<4&&r<i&&Nv.test(t[r]);)h=h<<4|x(t[r],16),r+=1,o+=1;if("."===t[r]){if(0===o)throw new g;if(r-=o,s>6)throw new g;for(var a=0;r<i;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new g;r+=1}if(!Bv.test(t[r]))throw new g;for(;r<i&&Bv.test(t[r]);){var c=x(t[r],10);if(null===u)u=c;else{if(0===u)throw new g;if((u=10*u+c)>255)throw new g}r+=1}e[s]=e[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new g;break}if(":"===t[r]){if((r+=1)===i)throw new g}else if(r<i)throw new g;e[s]=h,s+=1}else{if(null!==n)throw new g("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var d=s-n;for(s=7;0!==s&&d>0;)qv(e,s,n+d-1),s-=1,d-=1}else if(8!==s)throw new g;return e}function D_(t){var i=10,e=Lv;return Mv.test(t)?(t=t.slice(2),i=16,e=Ov):t.length>=2&&"0"===t[0]&&(t=t.slice(1),i=8,e=Fv),""===t?0:e.test(t)?x(t,i):void 0}var So={Vp:4},B_=/[\0\t\n\r #%/:?@\[\\\]]/,N_=/[\0\t\n\r #/:?@\[\\\]]/;function M_(t,i){if("["===t[0]){if("]"!==t[t.length-1])throw new g("Invalid IPv6 address");return{Vp:2,Hp:C_(t.slice(1,-1))}}if(!i)return function(t){if(N_.test(t))throw new g("Invalid code point in opaque host");var i=x_(t,A_);return""===i?So:{Vp:3,Wp:i}}(t);var e=function(t){var i=function(t){return f_(t.toLowerCase())}(t);return i}(R_(t));if(B_.test(e))throw new g("Invalid code point in host");var s=function(t){var i=t.split(".");if(""===i[i.length-1]&&i.pop(),!(i.length>4)){for(var e=[],s=0;s<i.length;s++){var n=i[s];if(""===n)return;var r=D_(n);if(void 0===r)return;e.push(r)}for(var h=0;h<e.length-1;h++)if(e[h]>255)throw new g;if(e[e.length-1]>=_.pow(256,5-e.length))throw new g;for(var o=e.pop(),a=0;a<e.length;a++)o+=e[a]*_.pow(256,3-a);return o}}(e);return void 0!==s?{Vp:1,Hp:s}:""===e?So:{Vp:0,qp:e}}function L_(t){switch(t.Vp){case 0:return t.qp;case 1:return function(t){for(var i=[],e=t,s=1;s<=4;s++)i.push(""+(255&e)),4!==s&&i.push("."),e>>>=8;return i.reverse().join("")}(t.Hp);case 2:return"["+function(t){for(var i="",e=function(t){for(var i=0,e=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>e&&(i=s,e=n),n=0);return n>e&&(i=s,e=n),e>1?i:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}e!==n?(i+=t[n].toString(16),7!==n&&(i+=":")):(i+=0===n?"::":":",s=!0)}return i}(t.Hp)+"]";case 3:return t.Wp;case 4:return""}}var O_=/\+/g;function F_(t){return 42===t||45===t||46===t||95===t||jv(t)}function U_(t){for(var i=t.split("&"),e=[],s=0;s<i.length;s++){var n=i[s];if(""!==n){var r=n.indexOf("="),h=void 0,o=void 0;-1!==r?(h=n.slice(0,r),o=n.slice(r+1)):(h=n,o=""),h=h.replace(O_," "),o=o.replace(O_," ");var a=R_(h),u=R_(o);e.push([a,u])}}return e}function V_(t){for(var i="",e=0;e<t.length;e++){var s=t[e];e>0&&(i+="&"),i+=H_(p_(a_(s[0])))+"="+H_(p_(a_(s[1])))}return i}function H_(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];32===s?i.push(43):F_(s)?i.push(s):i.push.apply(i,y_(s))}return t_(i)}var W_=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function Ti(t){var i=""+t,e=W_.exec(i);return e?function(t,i){for(var e=t.length,s=[],n=i;n<e;n++){var r=t.charCodeAt(n);if(z_(r))if(G_(r)||n===e-1)s.push(q_);else{var h=t.charCodeAt(n+1);G_(h)?(s.push(r,h),n++):s.push(q_)}else s.push(r)}return t.slice(0,i)+t_(s)}(i,e.index):i}var q_=65533,z_=function(t){return 55296==(63488&t)},G_=function(t){return!!(1024&t)};function X_(t,i){var e=t[0],s=i[0];return e===s?0:e<s?-1:1}function j_(t){t.zp.length=0}function Q_(t,i){!function(t,i){for(var e=0;e<i.length;e++)t[e]=i[e];t.length=i.length}(t.zp,U_(i))}function K_(t){if(t.rc){var i=V_(t.zp);""===i&&(i=null),t.rc.rc.Gp=i}}var wr=function(){function t(t){if(void 0===t&&(t=void 0),this.rc=null,null==t)this.zp=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof wr&&!!Vv(t.zp)&&(!Hv||t[f]===Y_)}(t))this.zp=t.zp.slice();else if(function(t){return null!=t&&(!!Vv(t)||!!Hv&&"function"==typeof t[f])}(t)){this.zp=[];for(var i=0,e=Wv(t);i<e.length;i++){var s=Wv(e[i]);if(2!==s.length)throw new g("Invalid name-value pair");this.zp.push([Ti(s[0]),Ti(s[1])])}}else for(var n in this.zp=[],t)w.prototype.hasOwnProperty.call(t,n)&&this.zp.push([Ti(n),Ti(t[n])]);else(t=Ti(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.zp=U_(t)}var i=t.prototype;return i.append=function(t,i){t=Ti(t),i=Ti(i),this.zp.push([t,i]),K_(this)},i.delete=function(t){t=Ti(t);for(var i=this.zp,e=0;e<i.length;){i[e][0]===t?i.splice(e,1):e++}K_(this)},i.get=function(t){t=Ti(t);for(var i=this.zp,e=0;e<i.length;e++){var s=i[e];if(s[0]===t)return s[1]}return null},i.getAll=function(t){t=Ti(t);for(var i=this.zp,e=[],s=0;s<i.length;s++){var n=i[s];n[0]===t&&e.push(n[1])}return e},i.has=function(t){t=Ti(t);for(var i=this.zp,e=0;e<i.length;e++){if(i[e][0]===t)return!0}return!1},i.set=function(t,i){t=Ti(t),i=Ti(i);for(var e=this.zp,s=!1,n=0;n<e.length;){var r=e[n];r[0]===t?s?e.splice(n,1):(r[1]=i,s=!0,n++):n++}s||e.push([t,i]),K_(this)},i.sort=function(){Rv(this.zp,X_),K_(this)},i.toString=function(){return V_(this.zp)},i.entries=function(){return new tg(this.zp,J_)},i.keys=function(){return new tg(this.zp,Z_)},i.values=function(){return new tg(this.zp,$_)},i.forEach=function(t){var i=this;this.zp.forEach(function(e){return t(e[1],e[0],i)})},t}(),Y_=wr.prototype.entries;Hv&&(wr.prototype[f]=Y_);var J_=function(t){return[t[0],t[1]]},Z_=function(t){return t[0]},$_=function(t){return t[1]},tg=function(){function t(t,i){this.Xp=0,this.zp=t,this.jp=i}return t.prototype.next=function(){return this.Xp<this.zp.length?{done:!1,value:this.jp(this.zp[this.Xp++])}:{done:!0,value:void 0}},t}(),ig="null";var Ph=w.create(null);Ph.ftp=21,Ph.file=0,Ph.gopher=70,Ph.http=80,Ph.https=443,Ph.ws=80,Ph.wss=443;var eg=/^(?:\.|%2e)$/i,sg=/^(?:\.|%2e){2}$/i;function ng(t){return eg.test(t)}function rg(t){return sg.test(t)}function hg(t){return void 0!==Ph[t]}function Et(t){return hg(t.Qp)}function og(t){return""!==t.Kp||""!==t.Yp}function ag(t){var i=t.length;if(!(i>=2))return!1;if(!cg(t.slice(0,2)))return!1;if(2!==i){var e=t[2];if(47!==e&&92!==e&&63!==e&&35!==e)return!1}return!0}function ug(t){return 2===t.length&&Dv.test(t[0])&&(":"===t[1]||"|"===t[1])}function cg(t){return 2===t.length&&ug(t_(t))}function dg(t){return ug(t)&&":"===t[1]}function lg(t){var i=t.Jp;0!==i.length&&("file"===t.Qp&&1===i.length&&dg(i[0])||i.pop())}function fg(t){return null===t.Zp||So===t.Zp||t.$p||"file"===t.Qp}var vg=-1,_g=/\t|\n|\r/g,gg=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function pg(t,i,e,s){void 0===e&&(e=null),void 0===s&&(s=null),e||(e=new wg,t=t.replace(gg,""));var n=null!==s?s:0;i=i||null;for(var r=[],h=!1,o=!1,a=!1,u=a_(t=t.replace(_g,"")),c=u.length,d=0;d<=c;){var l=d<c?u[d]:vg;switch(n){case 0:if(!Gv(l)){if(null===s){r.length=0,n=2;continue}throw new g("Invalid scheme")}r.push(Kv(l)),n=1;break;case 1:if(jv(l)||43===l||45===l||46===l)r.push(Kv(l));else{if(58!==l){if(null===s){r.length=0,n=2,d=0;continue}throw new g("Invalid scheme")}var f=hn(r);if(null!==s){if(hg(e.Qp)&&!hg(f))return;if(!hg(e.Qp)&&hg(f))return;if((og(e)||null!==e.im)&&"file"===f)return;if("file"===e.Qp&&(e.Zp===So||null===e.Zp))return}if(e.Qp=f,null!==s)return void(Et(e)&&e.im===Ph[e.Qp]&&(e.im=null));r.length=0,"file"===e.Qp?n=13:Et(e)&&i&&i.Qp===e.Qp?n=3:Et(e)?n=7:47===u[d+1]?(n=4,d+=1):(e.$p=!0,e.Jp.push(""),n=18)}break;case 2:if(!i||i.$p&&35!==l)throw new g("Invalid scheme");i.$p&&35===l?(e.Qp=i.Qp,e.Jp=i.Jp.slice(),e.Gp=i.Gp,e.nm="",e.$p=!0,n=20):"file"!==i.Qp?(n=5,d-=1):(n=13,d-=1);break;case 3:47===l&&47===u[d+1]?n=8:(n=5,d-=1);break;case 4:47===l?n=9:(n=17,d-=1);break;case 5:e.Qp=i.Qp,vg===l?(e.Kp=i.Kp,e.Yp=i.Yp,e.Zp=i.Zp,e.im=i.im,e.Jp=i.Jp.slice(),e.Gp=i.Gp):47===l?n=6:63===l?(e.Kp=i.Kp,e.Yp=i.Yp,e.Zp=i.Zp,e.im=i.im,e.Jp=i.Jp.slice(),e.Gp="",n=19):35===l?(e.Kp=i.Kp,e.Yp=i.Yp,e.Zp=i.Zp,e.im=i.im,e.Jp=i.Jp.slice(),e.Gp=i.Gp,e.nm="",n=20):92===l&&Et(e)?n=6:(e.Kp=i.Kp,e.Yp=i.Yp,e.Zp=i.Zp,e.im=i.im,e.Jp=i.Jp.slice(),e.Jp.pop(),n=17,d-=1);break;case 6:!Et(e)||47!==l&&92!==l?47===l?n=9:(e.Kp=i.Kp,e.Yp=i.Yp,e.Zp=i.Zp,e.im=i.im,n=17,d-=1):n=8;break;case 7:if(47!==l||47!==u[d+1]){n=8;continue}n=8,d+=1;break;case 8:47!==l&&92!==l&&(n=9,d-=1);break;case 9:if(64===l){h&&r.unshift(37,52,48),h=!0;for(var v=0;v<r.length;v++){var _=r[v];if(58!==_||a){var p=hn(P_(_,T_));a?e.Yp+=p:e.Kp+=p}else a=!0}r.length=0}else if(vg===l||47===l||63===l||35===l||Et(e)&&92===l){if(h&&0===r.length)throw new g("Invalid host");d-=r.length+1,r.length=0,n=10}else r.push(l);break;case 10:case 11:if(null!==s&&"file"===e.Qp)d-=1,n=15;else if(58!==l||o)if(vg===l||47===l||63===l||35===l||Et(e)&&92===l){if(d-=1,Et(e)&&0===r.length)throw new g("Invalid host");if(null!==s&&0===r.length&&(og(e)||null!==e.im))return;var m=M_(hn(r),Et(e));if(e.Zp=m,r.length=0,n=16,null!==s)return}else 91===l?o=!0:93===l&&(o=!1),r.push(l);else{if(0===r.length)throw new g("Invalid host");var w=M_(hn(r),Et(e));if(e.Zp=w,r.length=0,n=12,11===s)return}break;case 12:if(Xv(l))r.push(l);else{if(!(vg===l||47===l||63===l||35===l||Et(e)&&92===l||null!==s))throw new g("Invalid port");if(0!==r.length){var y=x(hn(r),10);if(y>65535)throw new g("Invalid port");e.im=y===Ph[e.Qp]?null:y,r.length=0}if(null!==s)return;n=16,d-=1}break;case 13:e.Qp="file",47===l||92===l?n=14:i&&"file"===i.Qp?vg===l?(e.Zp=i.Zp,e.Jp=i.Jp.slice(),e.Gp=i.Gp):63===l?(e.Zp=i.Zp,e.Jp=i.Jp.slice(),e.Gp="",n=19):35===l?(e.Zp=i.Zp,e.Jp=i.Jp.slice(),e.Gp=i.Gp,e.nm="",n=20):(ag(u.slice(d))||(e.Zp=i.Zp,e.Jp=i.Jp.slice(),lg(e)),n=17,d-=1):(n=17,d-=1);break;case 14:47===l||92===l?n=15:(i&&"file"===i.Qp&&!ag(u.slice(d))&&(dg(i.Jp[0])?e.Jp.push(i.Jp[0]):e.Zp=i.Zp),n=17,d-=1);break;case 15:if(vg===l||47===l||92===l||63===l||35===l)if(d-=1,null===s&&cg(r))n=17;else if(0===r.length){if(e.Zp=So,null!==s)return;n=16}else{var A=M_(hn(r),Et(e));if(0===A.Vp&&"localhost"===A.qp&&(A=So),e.Zp=A,null!==s)return;r.length=0,n=16}else r.push(l);break;case 16:Et(e)?(n=17,47!==l&&92!==l&&(d-=1)):null===s&&63===l?(e.Gp="",n=19):null===s&&35===l?(e.nm="",n=20):vg!==l&&(n=17,47!==l&&(d-=1));break;case 17:if(vg===l||47===l||Et(e)&&92===l||null===s&&(63===l||35===l)){var b=hn(r);if(rg(b)?(lg(e),47===l||Et(e)&&92===l||e.Jp.push("")):!ng(b)||47===l||Et(e)&&92===l?ng(b)||("file"===e.Qp&&0===e.Jp.length&&cg(r)&&(So!==e.Zp&&null!==e.Zp&&(e.Zp=So),r[1]=58,b=hn(r)),e.Jp.push(b)):e.Jp.push(""),r.length=0,"file"===e.Qp&&(vg===l||63===l||35===l))for(;e.Jp.length>1&&""===e.Jp[0];)e.Jp.shift();63===l?(e.Gp="",n=19):35===l&&(e.nm="",n=20)}else r.push.apply(r,P_(l,S_));break;case 18:63===l?(e.Gp="",n=19):35===l?(e.nm="",n=20):vg!==l&&(e.Jp[0]+=hn(P_(l,A_)));break;case 19:null===s&&35===l?(e.nm="",n=20):vg!==l&&(e.Gp+=hn(P_(l,Et(e)?E_:k_)));break;case 20:vg===l||0===l||(e.nm+=hn(P_(l,b_)))}d++}return e}function mg(t,i,e,s){try{pg(t,i,e,s)}catch(t){}}var wg=function(){this.Qp="",this.Kp="",this.Yp="",this.Zp=null,this.im=null,this.Jp=[],this.Gp=null,this.nm=null,this.$p=!1};function yg(t){switch(t.Qp){case"blob":var i;try{i=pg(t.Jp[0],null)}catch(t){return ig}return yg(i);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,i,e){return t+"://"+L_(i)+(null===e?"":":"+e)}(t.Qp,t.Zp,t.im);default:return ig}}var Ag=function(){function t(t,i){var e,s=null;if(null!=i)if(function(t){return null!=t&&t instanceof Ag&&"object"==typeof t.rc}(i))s=i.rc;else try{s=pg(String(i),null)}catch(t){throw new g("Invalid base URL: "+t.message)}try{e=pg(String(t),s)}catch(t){throw new g("Invalid URL: "+t.message)}var n=e.Gp;this.rc=e,this.Gp=function(t){var i=new wr;return null!==t&&Q_(i,t),i}(n),this.Gp.rc=this}var i=t.prototype;return i.toString=function(){return this.href},i.toJSON=function(){return this.href},function(t,i,e){i&&Iv(t.prototype,i),e&&Iv(t,e)}(t,[{key:"href",get:function(){return function(t,i){void 0===i&&(i=!1);var e=t.Qp+":";if(null!==t.Zp?(e+="//",og(t)&&(e+=t.Kp,""!==t.Yp&&(e+=":"+t.Yp),e+="@"),e+=L_(t.Zp),null!==t.im&&(e+=":"+t.im)):null===t.Zp&&"file"===t.Qp&&(e+="//"),t.$p)e+=t.Jp[0];else for(var s=0,n=t.Jp;s<n.length;s++)e+="/"+n[s];return null!==t.Gp&&(e+="?"+t.Gp),i||null===t.nm||(e+="#"+t.nm),e}(this.rc)},set:function(t){var i;try{i=pg(String(t),null)}catch(t){throw new g("Invalid URL: "+t.message)}this.rc=i,j_(this.Gp);var e=this.rc.Gp;null!==e&&Q_(this.Gp,e)}},{key:"origin",get:function(){return yg(this.rc)}},{key:"protocol",get:function(){return this.rc.Qp+":"},set:function(t){mg(t+":",null,this.rc,0)}},{key:"username",get:function(){return this.rc.Kp},set:function(t){fg(this.rc)||(this.rc.Kp=x_(t,T_))}},{key:"password",get:function(){return this.rc.Yp},set:function(t){fg(this.rc)||(this.rc.Yp=x_(t,T_))}},{key:"host",get:function(){var t=this.rc,i=t.Zp;if(null===i)return"";var e=t.im,s=L_(i);return null!==e&&(s+=":"+e),s},set:function(t){this.rc.$p||mg(t,null,this.rc,10)}},{key:"hostname",get:function(){var t=this.rc.Zp;return null===t?"":L_(t)},set:function(t){this.rc.$p||mg(t,null,this.rc,11)}},{key:"port",get:function(){var t=this.rc.im;return null===t?"":""+t},set:function(t){fg(this.rc)||(""===t?this.rc.im=null:mg(t,null,this.rc,12))}},{key:"pathname",get:function(){var t=this.rc.Jp;return this.rc.$p?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.rc.$p||(this.rc.Jp.length=0,mg(t,null,this.rc,16))}},{key:"search",get:function(){var t=this.rc.Gp;return null===t||""===t?"":"?"+t},set:function(t){t=Ti(t);var i=this.rc;if(""===t)return i.Gp=null,void j_(this.Gp);"?"===t[0]&&(t=t.slice(1)),i.Gp="",mg(t,null,i,19),Q_(this.Gp,t)}},{key:"searchParams",get:function(){return this.Gp}},{key:"hash",get:function(){var t=this.rc.nm;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.rc.nm="",mg(t,null,this.rc,20)):this.rc.nm=null}}]),t}();function bg(t){return t.document&&t.document.baseURI||t.location.href||""}function Sg(){let t=s,i=t.location.href;for(;t!==s.top;){t=t.parent;try{i=t.location.href}catch(t){}}return i}r();var Tg=class{hm(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Ev(...i)}um(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Ye(...i)}dm(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Pv(...i)}lm(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];xv(t,...e)}Og(t,i){return u(t,i)}fm(t,i){return v(t,i)}Lg(t){c(t)}vm(t){p(t)}_m(){return this.gm._m()}pm(){return this.gm.pm()}wm(){return this.gm.wm()}ym(){return this.gm.ym()}Am(){return this.gm.Am()}Sm(t,i){return this.gm.Sm(t,i)}Tm(t){return this.gm.Tm(t)}get Em(){return this.Pm}Dh(t,i){let e;return void 0===i&&(i=bg(s)),e="object"!=typeof i||i instanceof Ag?i:i.href,new Ag(t,e)}xm(t,i){if(void 0===i&&(i=bg(s)),this.Im){const e=Z(i)?i:i.toString();return new self.URL(t,e).href}return this.Dh(t,i).href}get Zs(){return this.Rm}get Cm(){return{Dm:od&&od.userAgent.match(/Android /i)?"Android":"other",Bm:Boolean(od&&od.userAgent.match(/Android 8.0.0/i))}}get Nm(){return self&&self.location&&"https:"===self.location.protocol}get Mm(){return"languages"in od?od.languages.slice():[od.language]}constructor(){this.Mg=void 0,this.Pm=new kg,this.Rm=dv,this.Im=Eg(),self.performance&&self.performance.now?this.Mg=()=>self.performance.now():this.Mg=ku}},kg=class{get Lm(){return od.oscpu}get Zs(){return od.platform}get Om(){return od.vendor}get Fm(){return od.vendorSub}};function Eg(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}function Mo(){return Mo=w.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)w.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Mo.apply(this,arguments)}function Pg(){const t=w.create(null);return t.Um=void 0,delete t.Um,t}function qh(){return new Cg}function ar(){return new Dg}function xg(t){const i=qh();for(const e in t)La.call(t,e)&&i.set(e,t[e]);return i}function Ig(t){const i=[];return t.forEach(t=>i.push(t)),i}r(),r(),r();var Rg="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,Cg=Rg||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,i){this.data=void 0,this.keys=void 0,this.index=0,this.selector=void 0,this.data=t,this.selector=i,this.keys=w.keys(t)}}return class{get(t){return this.data[t]}set(t,i){return this.has(t)||this.size++,this.data[t]=i,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=Pg(),this.size=0}keys(){return new t(this.data,(t,i)=>i)}values(){return new t(this.data,(t,i)=>t[i])}entries(){return new t(this.data,(t,i)=>[i,t[i]])}forEach(t){for(const i in this.data)t(this.data[i],i)}constructor(){this.data=Pg(),this.size=0}}}();var Dg=Rg||function(){class t{next(){const t=this.Vm.next();return t.done?t:{value:this.Hm(t.value),done:!1}}constructor(t,i){this.Vm=void 0,this.Hm=void 0,this.Vm=t,this.Hm=i}}return class{get size(){return this.Wm.size}get(t){return this.Wm.get(""+t)}set(t,i){return this.Wm.set(""+t,i),this}has(t){return this.Wm.has(""+t)}delete(t){return this.Wm.delete(""+t)}clear(){this.Wm.clear()}keys(){return new t(this.Wm.keys(),t=>Number(t))}values(){return this.Wm.values()}entries(){return new t(this.Wm.entries(),t=>{let[i,e]=t;return[Number(i),e]})}forEach(t){this.Wm.forEach((i,e)=>{t(i,Number(e))})}constructor(){this.Wm=qh()}}}();r(),r();var Bg=function(t){return t.qm="9a04f079-9840-4286-ab92-e65be0885f95",t.zm="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.Gm="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.Xm="e2719d58-a985-b3c9-781a-b030af78d30e",t.jm="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",t}({}),Ng="urn:mpeg:dash:mp4protection:2011",Mg="cenc",Lg="sinf",Og="skd",Fg="keyids",Ug="9a04f079-9840-4286-ab92-e65be0885f95",Vg="urn:uuid:"+Ug,Mu="com.microsoft.playready",Hg="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Wg="urn:uuid:"+Hg,qg="com.widevine.alpha",zg="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Gg="urn:uuid:"+zg,Xg="org.w3.clearkey",jg="e2719d58-a985-b3c9-781a-b030af78d30e",Qg="urn:uuid:"+jg,Kg="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Qs="urn:uuid:"+Kg,Yg="com.apple.fps.1_0",Jg="identity";r();var an=function(t){return t.qm="playready",t.zm="widevine",t.jm="fairplay",t.Gm="clearkey",t.Xm="clearkey_dash_if",t.Qm="aes128",t}({}),Zg={Km:an.qm,Ym:Mu,Jm:"cenc",Zm:Ug,$m:Vg,iw:"PlayReady"},xi={Km:an.zm,Ym:qg,Jm:"cenc",Zm:Hg,$m:Wg,iw:"Widevine"},$g={Km:an.jm,Ym:Yg,Jm:"skd",Zm:Kg,$m:Qs,iw:"FairPlay"},tp={Km:an.jm,Ym:"com.apple.fps",Jm:"sinf",Zm:Kg,$m:Qs,iw:"FairPlay"},ip={Km:an.Gm,Ym:Xg,Jm:"cenc",Zm:zg,$m:Gg,iw:"ClearKey"},ep={Km:an.Xm,Ym:Xg,Jm:"keyids",Zm:jg,$m:Qg,iw:"ClearKey DASH-IF"},sp=[Zg,xi,$g,ip,ep],np=[Zg,xi,tp,ip,ep];function rp(t){return sp.filter(i=>i.$m===t.toLowerCase())}r();var fh="function"==typeof String.prototype.replaceAll?(t,i,e)=>t.replaceAll(i,e):(t,i,e)=>t.split(i).join(e);function Ho(t,i){return it(t)&&-1!==t.indexOf(i)}var Vh="function"==typeof String.prototype.startsWith?(t,i)=>it(t)&&t.startsWith(i):(t,i)=>it(t)&&t.substr(0,i.length)===i,Ju="function"==typeof String.prototype.endsWith?(t,i)=>it(t)&&t.endsWith(i):(t,i)=>it(t)&&t.substr(t.length-i.length,i.length)===i;function Ih(t,i){return t.length===i.length&&t.toUpperCase()===i.toUpperCase()}var hp="function"==typeof String.prototype.repeat?(t,i)=>t.repeat(i):(t,i)=>{let e=0|i;if(0===t.length||0===e)return"";let s=t,n="";for(;1&~e||(n+=s),e>>>=1,0!==e;)s+=s;return n},Na="function"==typeof String.prototype.padStart?(t,i,e)=>(void 0===e&&(e=" "),t.padStart(i,e)):(t,i,e)=>{void 0===e&&(e=" ");let s=e;const n=(0|i)-t.length;return n<=0?t:(n>s.length&&(s+=hp(s,n/s.length)),s.slice(0,n)+t)},op=(String.prototype.padEnd,16384),ap="function"==typeof String.fromCodePoint?t=>t.length<=op?String.fromCodePoint(...t):cp(t,String.fromCodePoint):t=>{const i=[];for(let e of t)e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e);return up(i)};function up(t){return t.length<=op?String.fromCharCode(...t):cp(t,String.fromCharCode)}function cp(t,i){const e=[];for(let s=0;s<t.length;s+=op)e.push(i(...t.slice(s,s+op)));return e.join("")}function dp(t){return t.replace(/[\\"]/g,t=>"\\"+t)}var lp=Qt.u_&&Qt.d_>=42||Qt.W_&&Qt.z_>=38||Qt.N_||Qt.F_||Qt.Y_&&Qt.Z_>=29;function fp(t,i){return Ho(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[Mo({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[Mo({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function vp(){return void 0!==od&&"function"==typeof od.requestMediaKeySystemAccess}function _p(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var gp=class{Am(){return this.Tm(xi)}pm(){return this.Tm(ip)}ym(){return this.Tm(Zg)}wm(){return this.Tm($g)}Tm(t){const i=t.$m,e=this.ew.get(i);if(e)return e;const s=this.Sm(t,'video/mp4; codecs="avc1.42000a"');return this.ew.set(i,s),s}async Sm(t,i){try{return await this.hw.nw(t.Ym,[fp(i,!0)]),!0}catch(e){try{return await this.hw.nw(t.Ym,[fp(i,!1)]),!0}catch(t){return!1}}}_m(){return this.ow||(this.ow=this.aw()),this.ow}async aw(){return"https:"!==s.location.protocol&&(!!lp&&!await this.pm())}constructor(t){this.hw=void 0,this.ew=qh(),this.ow=void 0,this.hw=t}};function pp(t,i,e){if("function"==typeof e)e.call(t,i);else for(const s of e)s.call(t,i)}r(),r(),r(),r(),r(),r();var Ne=class{wn(t,i){if("function"==typeof i)if("string"==typeof t)this.uw(t,i);else for(const e of t)this.uw(e,i)}uw(t,i){const e=this.cw[t];void 0===e?this.cw[t]=i:"function"==typeof e?this.cw[t]=[e,i]:0===this.dw?e.push(i):this.cw[t]=e.concat(i)}lw(t){if("function"!=typeof t)return;const i=this.fw;void 0===i?this.fw=t:"function"==typeof i?this.fw=[i,t]:0===this.dw?i.push(t):this.fw=i.concat(t)}Vo(){this.cw=Pg(),this.fw=void 0}So(t){this.dw++;const i=this.cw[t.type],e=this.fw;void 0!==i&&pp(this._w,t,i),void 0!==e&&pp(this._w,t,e),this.dw--}mn(t,i){if("function"==typeof i)if("string"==typeof t)this.gw(t,i);else for(const e of t)this.gw(e,i)}gw(t,i){const e=this.cw[t];void 0!==e&&("function"==typeof e?e===i&&(this.cw[t]=void 0):0===this.dw?oi(e,i):this.cw[t]=uf(e,i))}pw(t){if("string"==typeof t)this.cw[t]=void 0;else for(const i of t)this.cw[i]=void 0}mw(t){const i=this.fw;void 0!==i&&("function"==typeof i?i===t&&(this.fw=void 0):0===this.dw?oi(i,t):this.fw=uf(i,t))}ww(t,i){return new Promise((e,s)=>{if(i&&i.Hg)return s(new dt);const n=t=>{h(),e(t)},r=()=>{h(),s(new dt)},h=()=>{this.mn(t,n),i&&i.jg(r)};this.wn(t,n),i&&i.Xg(r)})}constructor(t){this.cw=Pg(),this.fw=void 0,this.dw=0,this._w=void 0,this.Rs=t=>{this.So(t)},this._w=null!=t?t:this}},mp=class extends Ne{So(t){ct(()=>{super.So(t)})}},_o=class extends Ne{lw(t){super.lw(t)}mw(t){super.mw(t)}};r(),r();var wp=class{constructor(t,i=new Date){this.type=void 0,this.date=void 0,this.type=t,this.date=i}};r();var d=function(t){return t.yw="Aw",t.Sw="Tw",t.Ew="contentprotectionerror",t.Pw="contentprotectionsuccess",t.xw="currentsourcechange",t.Iw="destroy",t.Rw="durationchange",t.Cw="emptied",t.Dw="encrypted",t.Bw="ended",t.Nw="Mw",t.Lw="Ow",t.Fw="Uw",t.Vw="Hw",t.Ww="loadstart",t.qw="manifestupdate",t.zw="nosupportedrepresentationfound",t.Gw="offline",t.Xw="online",t.jw="pause",t.uo="play",t.Qw="progress",t.Kw="ratechange",t.Yw="representationchange",t.Jw="resize",t.Zw="seeked",t.$w="seeking",t.iy="segmentnotfound",t.ey="sy",t.oy="uy",t.ly="vy",t.do="sourcechange",t._y="timeupdate",t.gy="volumechange",t.py="wy",t.yy="Ay",t.LICENSE_REQUEST_GENERATED="by",t.Sy="metricschange",t}({}),yp=["cenc"],Ap=["cbcs","cbcs-1-9"],cr=class extends wp{constructor(t){super(d.yy),this.Ty=void 0,this.Ty=t}},bp=class extends wp{constructor(t){super(d.LICENSE_REQUEST_GENERATED),this.Ey=void 0,this.Ey=t}},Bh=class extends wp{constructor(t,i,e,s){super("Py"),this.xy=void 0,this.Iy=void 0,this.Py=void 0,this.Ry=void 0,this.xy=t,this.Iy=i,this.Py=e,this.Ry=s}},Sp=class extends wp{constructor(){super("lt")}},_r=function(t){return t.Dw="Cy",t.Dy="By",t}({}),Tp=class extends wp{constructor(t,i){super("Cy"),this.Jm=void 0,this.Ey=void 0,this.Jm=t,this.Ey=i}},kp=class extends wp{constructor(){super("By")}};r(),r(),r();var dr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Ep=/[\t\n\f\r ]/g;function Pp(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:xp()}function xp(){throw new m("Invalid base64 input")}function _c(t){let i=t;Ep.test(i)&&(i=i.replace(Ep,""));let e=i.length;e%4==0&&e>=1&&"="===i[e-1]&&(e>=2&&"="===i[e-2]?e-=2:e-=1,i=i.substr(0,e));const s=e%4;if(1===s)return xp();const n=0===s?0:4-s,r=new j(function(t,i){return 3*(t+i)/4-i}(e,n)),h=n>0?e-4:e;let o,a=0,u=0;for(;a<h;a+=4)o=Pp(i.charCodeAt(a))<<18|Pp(i.charCodeAt(a+1))<<12|Pp(i.charCodeAt(a+2))<<6|Pp(i.charCodeAt(a+3)),r[u++]=o>>16&255,r[u++]=o>>8&255,r[u++]=255&o;return 2===n?(o=Pp(i.charCodeAt(a))<<2|Pp(i.charCodeAt(a+1))>>4,r[u++]=255&o):1===n&&(o=Pp(i.charCodeAt(a))<<10|Pp(i.charCodeAt(a+1))<<4|Pp(i.charCodeAt(a+2))>>2,r[u++]=o>>8&255,r[u++]=255&o),r}function Ip(t,i,e){return dr[t>>2]+dr[(3&t)<<4|i>>4]+dr[(15&i)<<2|e>>6]+dr[63&e]}function Rp(t,i,e){const s=[];for(let n=i;n<e;n+=3)s.push(Ip(t[n],t[n+1],t[n+2]));return s.join("")}function Go(t){const i=t.length,e=i%3,s=[],n=i-e;for(let i=0;i<n;i+=16383)s.push(Rp(t,i,_.min(n,i+16383)));if(1===e){const e=t[i-1];s.push(dr[e>>2]+dr[(3&e)<<4]+"==")}else if(2===e){const e=t[i-2],n=t[i-1];s.push(dr[e>>2]+dr[(3&e)<<4|n>>4]+dr[(15&n)<<2]+"=")}return s.join("")}function Cp(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}function pu(t,i){const e=i.ac,s=t.getUint8(e>>3),n=1<<7-(7&e);return i.Ny(1),(s&n)===n?1:0}function vs(t,i,e){let s=0;for(let n=0;n<e;n++)s=2*s+pu(t,i);return s}r(),r();var Dp=class t{get ac(){return this.uc}Ny(t){this.uc+=t}My(t){this.uc=t}Ly(){return new t(this.ac)}constructor(t=0){this.uc=void 0,this.uc=t}};var Bp=_.clz32||function(t){let i=32,e=t>>16;return e&&(i-=16,t=e),e=t>>8,e&&(i-=8,t=e),e=t>>4,e&&(i-=4,t=e),e=t>>2,e&&(i-=2,t=e),e=t>>1,e?i-2:i-t};function Np(t){if(t>=55296&&t<=57343)throw new m("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Mp(t,i){return t>>i&63|128}function Lp(t,i){4294967168&t?(4294965248&t?4294901760&t?4292870144&t||(i.push(t>>18&7|240),i.push(Mp(t,12)),i.push(Mp(t,6))):(Np(t),i.push(t>>12&15|224),i.push(Mp(t,6))):i.push(t>>6&31|192),i.push(63&t|128)):i.push(t)}function Op(t,i){if(i.ac>=t.length)throw new m("Invalid byte index");const e=255&t[i.ac];if(i.Ny(1),128==(192&e))return 63&e;throw new m("Invalid continuation byte")}function Fp(t,i){const e=i.ac;if(e>t.length)throw new m("Invalid byte index");if(e===t.length)return!1;const s=255&t[e];if(i.Ny(1),!(128&s))return s;if(192==(224&s)){const e=(31&s)<<6|Op(t,i);if(e>=128)return e;throw new m("Invalid continuation byte")}if(224==(240&s)){const e=(15&s)<<12|Op(t,i)<<6|Op(t,i);if(e>=2048)return Np(e),e;throw new m("Invalid continuation byte")}if(240==(248&s)){const e=(7&s)<<18|Op(t,i)<<12|Op(t,i)<<6|Op(t,i);if(e>=65536&&e<=1114111)return e}throw new m("Invalid UTF-8 detected")}r(),r();var Up=[128,64,32,16,8,4,2,1],Vp=class{Oy(t){return Hp(this.Fy,t)}constructor(t){this.Fy=void 0,this.Fy=t}};function Hp(t,i){return(t&i)===i}function Lt(t,i){return Hp(t,Up[i])}function ua(t,i){const e=t.getUint8(i.ac);return i.Ny(1),e}function Wp(t,i,e){t.setUint8(i.ac,e),i.Ny(1)}function T(t,i,e){const s=ao(ta(t),i.ac,i.ac+e);return i.Ny(s.byteLength),s}function qp(t,i,e){ta(t).set(ta(e),i.ac),i.Ny(e.byteLength)}function zp(t,i,e){return i.ac+e<=t.byteLength}function Gp(t,i,e,s){return void 0===s&&(s=!1),s?function(t,i,e){let s=0,n=1;for(let r=0;r<e;r++)s+=ua(t,i)*n,n*=256;return s}(t,i,e):function(t,i,e){let s=0;for(let n=0;n<e;n++)s=256*s+ua(t,i);return s}(t,i,e)}function Xp(t,i){const e=t.getUint8(i.ac);return i.Ny(1),e}function qe(t,i,e){void 0===e&&(e=!1);const s=t.getUint16(i.ac,e);return i.Ny(2),s}function jp(t,i,e,s){void 0===s&&(s=!1),t.setUint16(i.ac,e,s),i.Ny(2)}function Cu(t,i,e){void 0===e&&(e=!1);const s=t.getUint32(i.ac,e);return i.Ny(4),s}function di(t,i,e,s){void 0===s&&(s=!1),t.setUint32(i.ac,e,s),i.Ny(4)}function et(t,i,e){void 0===e&&(e=!1);const s=Cu(t,i,e),n=Cu(t,i,e),r=e?n:s,h=e?s:n;return Wt.fromBits(h,r,!0)}function Qp(t,i,e,s){void 0===s&&(s=!1);const n=e.getHighBitsUnsigned(),r=e.getLowBitsUnsigned(),h=s?n:r;di(t,i,s?r:n,s),di(t,i,h,s)}function Kp(t,i){return E(t,i)}function Wc(t,i,e){return up(am(T(t,i,e)))}function Yp(t,i){const e=ua(t,i);let s;return 128&e?192==(224&e)?s=64*(31&e)+(63&ua(t,i)):224==(240&e)?s=4096*(15&e)+64*(63&ua(t,i))+(63&ua(t,i)):240==(248&e)&&(s=262144*(7&e)+4096*(63&ua(t,i))+64*(63&ua(t,i))+(63&ua(t,i))):s=e,s}function E(t,i){return Jp(t,i,!0)}function Jp(t,i,e){const s=[];for(;i.ac<t.byteLength;){const n=ua(t,i);if(e&&!n)break;s.push(n)}return up(s)}function Zp(t,i,e){const s=e.length;for(let n=0;n<s;n+=1){Wp(t,i,e.charCodeAt(n))}}function $p(t,i){if(!(i.ac+2<=t.byteLength))return;const e=t.getUint8(i.ac),s=t.getUint8(i.ac+1);return(254!==e||255!==s)&&(255===e&&254===s||void 0)}function tm(t,i){const e=$p(t,i);return void 0!==e&&i.Ny(2),so(t,i,!0===e)}function so(t,i,e){return void 0===e&&(e=!1),im(t,i,e,!0)}function im(t,i,e,s){const n=[];for(;i.ac+2<=t.byteLength;){const r=qe(t,i,e);if(s&&!r)break;n.push(r)}return up(n)}function em(t,i,e,s){void 0===s&&(s=!1);const n=e.length;for(let r=0;r<n;r+=1){jp(t,i,e.charCodeAt(r),s)}}function Yh(t){return Jp(dh(t),new Ui,!1)}function vc(t){const i=new j(t.length);return Zp(dh(i),new Ui,t),i}function sm(t,i){return void 0===i&&(i=!1),im(dh(t),new Ui,i,!1)}function nm(t,i){void 0===i&&(i=!1);const e=new j(2*t.length);return em(dh(e),new Ui,t,i),e}function rm(t,i){return i.ac+3<=t.byteLength&&(239===t.getUint8(i.ac)&&187===t.getUint8(i.ac+1)&&191===t.getUint8(i.ac+2))}function vr(t,i){return function(t,i,e){const s=[],n=rm(t,i);n&&i.Ny(3);for(;i.ac<t.byteLength;){const n=Yp(t,i);if(void 0===n)break;if(e&&0===n)break;s.push(n)}return ap(s)}(t,i,!0)}function pc(t){return function(t){return ap(t)}(function(t,i){const e=[],s=new Ui;let n;if(!i){if(n=Fp(t,s),!1===n)return e;65279===n||e.push(n)}for(;!1!==(n=Fp(t,s));)e.push(n);return e}(ta(t)))}function br(t){return new j(function(t){const i=[];for(const e of t)Lp(e,i);return i}(function(t){const i=[];let e=0;const s=t.length;for(;e<s;){const n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){const s=t.charCodeAt(e++);56320==(64512&s)?i.push(((1023&n)<<10)+(1023&s)+65536):(i.push(n),e--)}else i.push(n)}return i}(t)))}function hm(t,i){if(rm(t,i))return vr(t,i);if(void 0!==$p(t,i))return tm(t,i);if(i.ac+4<=t.byteLength){if(0===t.getUint8(i.ac)&&0===t.getUint8(i.ac+2))return so(t,i,!1);if(0===t.getUint8(i.ac+1)&&0===t.getUint8(i.ac+3))return so(t,i,!0)}return vr(t,i)}function ao(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new j(t.buffer,t.byteOffset+i,e-i)}function Au(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function dh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ta(t){return new j(t.buffer,t.byteOffset,t.byteLength)}function om(t){return t instanceof ArrayBuffer||xc(t)}function wa(t){return t instanceof ArrayBuffer?new j(t):ta(t)}function gl(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),t.slice?t.slice(i,e):Gu(ao(t,i,e))}function Gu(t){if(t.slice)return t.slice(0);{const i=new j(t.byteLength);return i.set(t,0),i}}function am(t){return[].slice.call(t)}var Ui=class t{get ac(){return this.uc}Ny(t){this.uc+=t}My(t){this.uc=t}Ly(){return new t(this.ac)}Uy(){return new Dp(this.ac<<3)}constructor(t=0){this.uc=void 0,this.uc=t}};function um(t){let i=t.toLowerCase(),e=0,s=0;Vh(i,"0x")&&(i=i.substring(2));const n=new j(_.ceil(i.length/2));for(1&~i.length||(e=1,n[s++]=x(i[0],16));e<i.length;e+=2)n[s++]=x(i.substr(e,2),16);return n}function cm(t){return.001*t}var dm=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],xc=ArrayBuffer.isView||(t=>t&&pi(dm,Wd.call(t)));function lm(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;return L(new j(t),new j(i))}function L(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;if(t.buffer===i.buffer&&t.byteOffset===i.byteOffset)return!0;for(let e=0;e<t.length;e+=1)if(t[e]!==i[e])return!1;return!0}function fm(t,i){return t===i||L(wa(t),wa(i))}function vm(t){const i=t.reduce((t,i)=>t+i.byteLength,0);return _m(t,i)}function _m(t,i){const e=new j(i);let s=0;for(const i of t)e.set(i,s),s+=i.byteLength;return e}function gm(t,i,e){const s=new j(t.byteLength+i.byteLength),n=ao(t,0,e),r=ao(t,e);return s.set(n),s.set(i,e),s.set(r,e+i.byteLength),s}function wu(t){return _c(t).buffer}function pm(t){return Go(new j(t))}function wc(t){return Go(vc(t))}var Cc=new j([0]).buffer,mm=class{get Vy(){return this.nc.length}Hy(t){for(const i of this.nc)if(fm(i[0],t))return!0;return!1}Wy(t){for(const i of this.nc)if(fm(i[0],t))return i[1]}qy(t,i){for(const e of this.nc)if(fm(e[0],t))return void(e[1]=i);this.nc.push([t,i])}zy(t,i){this.nc.forEach(i=>t(i[1],i[0]),i)}Gy(){Yo(this.nc)}constructor(){this.nc=void 0,this.nc=[]}};r();var pa=class{Xy(t){this.Qd&&(this.Qd(t),this.zg())}jy(t){this.Kd&&(this.Kd(t),this.zg())}Zg(){this.Qy.catch(Ct),this.jy(new dt)}$g(t){t.then(t=>this.Xy(t),t=>this.jy(t))}zg(){this.Qd=void 0,this.Kd=void 0}constructor(){this.Qy=void 0,this.Qd=void 0,this.Kd=void 0,this.Qy=new Promise((t,i)=>{this.Qd=t,this.Kd=i})}};function wm(){return new j([8,4]).buffer}function ym(t,i){return t===Mu?function(t){if(t.byteLength<2*Am.length)return t;const i=new DataView(t,0,2*Am.length),e=sm(i,!0);if(e===Am)return t;return function(t){const i='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',e='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+i+pm(t)+e;return nm(s,!0).buffer}(t)}(i):i}r();var Am="<PlayReady";r(),r();var dn=class extends R{constructor(t,i,e,s){super(t,s),this.Ky=void 0,this.Yy=void 0,this.Ky=i,this.Yy=e}};r(),r(),r(),r(),r();var bm=function(t,i){return(bm=w.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)w.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)};function $o(t,i){if("function"!=typeof i&&null!==i)throw new g("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}bm(t,i),t.prototype=null===i?w.create(i):(e.prototype=i.prototype,new e)}function Sm(t,i,e){return t.indexOf?t.indexOf(i,e):Array.prototype.indexOf.call(t,i,e)}r(),r(),r(),r(),r(),r(),r();!function(){function t(t,i){this.Jy=t,this.Zy=i}t.prototype.get=function(t){var i=this.Jy.get(t);if(0===this.Zy||void 0===i)return i;var e=this.Jy.get(t+1)||0,s=i&(1<<8-this.Zy)-1,n=e>>8-this.Zy;return(s<<this.Zy)+n},t.prototype.getBit=function(t){if(!(t<0)){var i=this.Jy.get(_.floor((t+this.Zy)/8));if(void 0!==i)return(i&1<<7-this.Zy-t%8)>0?1:0}},w.defineProperty(t.prototype,"bitLength",{get:function(){return this.Jy.bitLength-this.Zy},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"length",{get:function(){return this.Jy.length},enumerable:!1,configurable:!0})}();r(),r();_.pow(2,-52);function Tm(t,i,e){return _.min(_.max(t,i),e)}function km(t,i){return t>>8-i}function Em(t,i){return t&(1<<i)-1}var W=function(){function t(t){this.$y=t,this.tA=0,this.iA=0}return w.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.tA+this.iA},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"done",{get:function(){return this.tA===this.$y.length&&0===this.iA},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"location",{get:function(){return{byte:this.tA,bit:this.iA}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var i=new t(this.$y);return i.seek(this.tA,this.iA),i},t.prototype.canReadBits=function(t){return 8*this.tA+t+this.iA<=8*this.$y.length},t.prototype.canReadBytes=function(t){return 0===this.iA?this.tA+t<=this.$y.length:this.tA+t<this.$y.length},t.prototype.incBit=function(){this.iA++,this.iA>7&&(this.tA++,this.iA=0)},t.prototype.seek=function(t,i){this.tA=t,this.iA=i},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new m("Cannot read past end of buffer.");return this.$y.get(this.tA)>>7-this.iA&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new m("Cannot read past end of buffer.");if(0===this.iA)return this.$y.get(this.tA++);var t=Em(this.$y.get(this.tA),8-this.iA),i=km(this.$y.get(this.tA+1),this.iA);return this.tA++,t<<this.iA|i},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new m("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readBit());return i},t.prototype.readUInt=function(t){if(t>32)throw new m("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new m("Cannot read past end of buffer.");var i=0;if(0===this.iA&&t%8==0)for(var e=t-8;e>=0;e-=8)i|=this.readByte()<<e;else for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i},t.prototype.readInt=function(t){if(t>32)throw new m("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new m("Cannot read past end of buffer.");var i=this.readUInt(t);return 0===(i&1<<t-1)?i:i-_.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var i=1<<t;return i+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new m("Skipping over the buffer edge is not allowed.");var i=this.iA+t;this.tA+=i>>3,this.iA=7&i},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new m("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readByte());return String.fromCharCode.apply(String,i)},t}();r(),r(),r();var Pm=function(t,i){return t===i?0:t<i?-1:t>i?1:S(t)?S(i)?0:1:-1},ah=function(){function t(){this.eA=[],this.sA=[],this.nA=0}return t.from=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var s=new t,n=0,r=i;n<r.length;n++){var h=r[n];s.pushRange(h)}return s},t.prototype.pushRange=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=t.length),e<0)throw new m("The buffer length must be positive.");if(0!==e){if(0===this.sA.length)this.sA.push(0);else{var s=this.sA[this.sA.length-1]+this.eA[this.eA.length-1].length;this.sA.push(s)}this.eA.push(t.subarray(i,i+e)),this.nA+=e}},t.prototype.concat=function(i){var e=new t;return e.pushRange(this.join()),e.pushRange(i.join()),e},t.prototype.copy=function(t,i,e,s){if(void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=this.length),i<0||e<0||s<0)throw new RangeError;return this.slice(e,s).copyInternal(t,i)},t.prototype.copyInternal=function(t,i){for(var e=0,s=i,n=0,r=this.eA;n<r.length;n++){var h=r[n];t.set(h,s),e+=h.length,s+=h.length}return e},t.prototype.clear=function(){this.eA=[],this.sA=[],this.nA=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var i=this.findContainingBufferIndex(t),e=t-this.sA[i];return this.eA[i][e]}},w.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.eA.length<1)return-1;if(this.eA.length>1){var i=this.join();this.clear(),this.pushRange(i)}var e=this.eA[0];return"number"==typeof t?Sm(e,t):"undefined"!=typeof Buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength).indexOf(t):function(t,i){if(0===i.length)return 0;for(var e=i[0],s=i.length,n=t.length-s,r=0;r<=n&&!((r=Sm(t,e,r))<0||r>n);r++){for(var h=r+1,o=r+s,a=1;h<o&&t[h]===i[a];h++,a++);if(h===o)return r}return-1}(e,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,i,e){if(0!==t.length){var s=0,n=t.length-1;if(1!==e(t[s],i)){if(1===e(i,t[n]))return n;for(;s!==n;){var r=_.ceil((s+n)/2);e(t[r],i)<=0?s=r:n=r-1}return s}}}(this.sA,t,Pm)},t.prototype.join=function(){if(1===this.eA.length)return this.eA[0];var t=new j(this.length);return this.copyInternal(t,0),t},w.defineProperty(t.prototype,"length",{get:function(){return this.nA},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,i){if(i<=0||i>4)throw new m("Expected byteLength to be between 0 and 4 but was "+i);if(t<0||t>this.length-i)throw new m("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-i)+")");if(1===i)return this.get(t);for(var e=0,s=0;s<i;s++)e+=this.get(t+s)*_.pow(2,8*(i-s-1));return e},t.prototype.slice=function(i,e){void 0===e&&(e=this.length);var s=Tm(i,0,this.length),n=Tm(e,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,h=this.findContainingBufferIndex(s),o=this.eA[h],a=s,u=a-this.sA[h];a+o.length-u<n;)r.pushRange(o,u,o.length-u),h+=1,u=(a+=o.length-u)-this.sA[h],o=this.eA[h];var c=n-a;return r.pushRange(o,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var i=this.length-1,e=this.eA.length-1,s=this.eA[e],n=s.length-1;i>=0&&e>=0;){if(0!==s[n])break;if(0===n){if(0===e)return new t;e-=1,n=(s=this.eA[e]).length-1}else n-=1;i-=1}return this.slice(0,i+1)},t}(),xm=function(){function t(i){this.rA=i||t.BUFFER_CHUNK_SIZE,this.hA=!1,this.oA=new ah,this.$y=new j(this.rA),this.aA=0,this.uA=0,this.iA=7}return t.prototype.closeByte=function(){this.$y[this.aA++]=this.uA,this.aA>=this.rA&&this.closeBuffer(),this.uA=0,this.iA=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.aA&&(this.oA.pushRange(this.$y,0,this.aA),t&&(this.$y=new j(this.rA)),this.aA=0)},w.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.iA},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.hA)throw new m("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.hA=!0,this.oA},t.prototype.writeBit=function(t){if(this.hA)throw new m("Cannot write to a closed BitWriter.");this.uA|=t<<this.iA,0===this.iA?this.closeByte():this.iA--},t.prototype.writeByte=function(t){if(this.hA)throw new m("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.uA=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var i=this.iA;this.uA|=km(t,i+1),this.closeByte(),this.uA=Em(t,8-i)<<i+1,this.iA=i},t.prototype.writeBits=function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.hA)throw new m("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.aA+t.length<=this.rA?(this.$y.set(t,this.aA),this.aA+=t.length,this.aA===this.rA&&this.closeBuffer()):(this.closeBuffer(),this.oA.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var i=this.iA;this.uA|=km(t[0],i+1),this.closeByte();for(var e=1;e<t.length;e++){var s=Em(t[e-1],8-i),n=km(t[e],i+1);this.uA=s<<i+1|n,this.closeByte()}this.uA=Em(t[t.length-1],8-i)<<i+1,this.iA=i}},t.prototype.writeUInt=function(t,i){if(t<0)throw new m("Received a negative number.");if(i>32)throw new m("The max bitlength that can be provided is 32.");if(t>=_.pow(2,i))throw new m("Uint "+t+" cannot be represented in "+i+" bit(s).");if(this.isWritingStartBit&&i%8==0)for(var e=i-8;e>=0;e-=8)this.writeByte(t>>e&255);else for(e=i-1;e>=0;e--)this.writeBool((t&1<<e)>0)},t.prototype.writeInt=function(t,i){if(i>32)throw new m("The max bitlength that can be provided is 32.");if(_.abs(t)>=_.pow(2,i-1))throw new m("Signed integer "+t+" cannot be represented in "+i+" bit(s).");t<0?this.writeUInt(t+_.pow(2,i),i):this.writeUInt(t,i)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new m("Received a negative number.");for(var i=_.floor(_.log2(t+1))+1,e=0;e<i-1;e++)this.writeBit(0);this.writeUInt(t+1,i)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var i=function(t){for(var i=new j(t.length),e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}(t),e=0;e<i.length;e++)this.writeByte(i[e])},t.BUFFER_CHUNK_SIZE=1024,t}();r();var Im=function(){function t(t){this.rb=new ah,this.ef=t}return t.prototype.closeWriter=function(){void 0!==this.ef&&(this.rb=this.rb.concat(this.ef.close()),this.ef=void 0)},w.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.ef&&(this.ef=new xm),this.ef},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),Wh=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new m("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(i){var e=this.getSize(),s=e>=t.LARGE_SIZE/8,n=16===this.boxType.length;i.writeUInt(s?1:e,32),i.writeString(n?"uuid":this.boxType),s&&(i.writeUInt(_.floor(e/t.LARGE_SIZE),32),i.writeUInt(e%t.LARGE_SIZE,32)),n&&i.writeString(this.boxType)},t.prototype.getSize=function(){var i=8+(this.boxType.length>4?16:0),e=this.getBoxContentSize()+i;return e>=t.LARGE_SIZE/8&&(e+=8),e},t.prototype.serialize=function(){var t=new Im;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=_.pow(2,32),t}();function ol(t,i){return t instanceof Wt?64===i:t<_.pow(2,i)}function ss(t,i){return _.round(t*_.pow(2,i))}function Rm(t,i){for(var e=0;e<i.length;e++)t.writeByte(i[e])}function $t(t,i){return t/_.pow(2,i)}r();var je=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!ol(e,8))throw new m("the provided version cannot fit in 8 bits.");return n.flags=s,n}return $o(i,t),w.defineProperty(i.prototype,"flags",{get:function(){return this.cA},set:function(t){this.cA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new m("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(Wh);r(),r();var Cm=function(t){function i(i,e){var s=t.call(this,i)||this;return s.data=e,s}return $o(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(ah.from(this.data))},i}(Wh);r(),r();var Dm=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();r();var Bm=16384;function Nm(t){var i=t.length;if(i<=Bm)return String.fromCharCode.apply(String,t);for(var e=[],s=0;s<i;s+=Bm)e.push(String.fromCharCode.apply(String,t.slice(s,s+Bm)));return e.join("")}var Mm=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,i){return(t&i)===i}(this.raw,t)},t}();function Cr(t,i){var e=t.getUint8(i.offset);return i.shift(1),e}function Lm(t,i,e){var s=Wm(Gm(t),i.offset,i.offset+e);return i.shift(s.byteLength),s}function Om(t,i,e){return i.offset+e<=t.byteLength}function xr(t,i,e){void 0===e&&(e=!1);var s=t.getUint32(i.offset,e);return i.shift(4),s}function Fm(t,i,e){void 0===e&&(e=!1);var s=xr(t,i,e),n=xr(t,i,e),r=e?n:s,h=e?s:n;return Wt.fromBits(h,r,!0)}function Um(t,i,e){return Nm(function(t){return[].slice.call(t)}(Lm(t,i,e)))}function Vm(t,i){var e,s=Cr(t,i);return 128&s?192==(224&s)?e=64*(31&s)+(63&Cr(t,i)):224==(240&s)?e=4096*(15&s)+64*(63&Cr(t,i))+(63&Cr(t,i)):240==(248&s)&&(e=262144*(7&s)+4096*(63&Cr(t,i))+64*(63&Cr(t,i))+(63&Cr(t,i))):e=s,e}function Hm(t,i){return function(t,i,e){var s=[],n=function(t,i){return i.offset+3<=t.byteLength&&239===t.getUint8(i.offset)&&187===t.getUint8(i.offset+1)&&191===t.getUint8(i.offset+2)}(t,i);n&&i.shift(3);for(;i.offset<t.byteLength;){var r=Vm(t,i);if(void 0===r)break;if(e&&0===r)break;s.push(r)}return function(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return Nm(i)}(s)}(t,i,!0)}function Wm(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new j(t.buffer,t.byteOffset+i,e-i)}function qm(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function zm(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Gm(t){return new j(t.buffer,t.byteOffset,t.byteLength)}var Xm=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new Dm(this.offset<<3)},t}();r();var jm=function(){function t(t,i){this.data=t,this.cursor=i}return t.prototype.nextUint8=function(){return Cr(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getUint16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return xr(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt32(i.offset,e);return i.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,i,e){void 0===e&&(e=!1);var s=xr(t,i,e),n=xr(t,i,e),r=e?n:s,h=e?s:n;return Wt.fromBits(h,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return Fm(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return Lm(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,i,e){for(var s=[],n=0;n<e;n++)s.push(xr(t,i));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return Um(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return Hm(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function Hs(t,i){return t.type===i}function Li(t){var i=function(t,i){var e=[];for(;i.offset<t.byteLength;){var s=Qm(t,i);if(!s.complete)return{complete:!1,boxes:e};e.push(s.box)}return{complete:!0,boxes:e}}(t.data,t.cursor);if(!i.complete)throw new m("Data incomplete");return i.boxes}function Qm(t,i){var e=i.offset,s=function(t,i){var e=i.offset;if(!Om(t,i,8)){return{complete:!1,neededOffset:r=i.offset+8}}var s=xr(t,i),n=Um(t,i,4);if(1===s){if(!Om(t,i,8)){var r=i.offset+8;return i.seek(e),{complete:!1,neededOffset:r}}s=Fm(t,i).toNumber()}if("uuid"===n){if(!Om(t,i,16)){r=i.offset+16;return i.seek(e),{complete:!1,neededOffset:r}}n=Um(t,i,16)}var h=i.offset,o={type:n,size:s,headerSize:h-e};return{complete:!0,header:o}}(t,i);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-e);var h=e+r;if(h>t.byteLength){var o=h;return i.seek(e),{complete:!1,neededOffset:o}}var a={type:n.type,offset:e,data:new jm(qm(t,e,h),new Xm(n.headerSize))};return i.seek(h),{complete:!0,box:a}}function ai(t){return{version:t>>24,flags:new Mm(16777215&t)}}function Km(t,i){var e,s,n,r;return 1===i?(e=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(e=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:e,modification:s,scale:n,duration:r}}function Ym(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function Jm(t){var i=t.nextUint32Array(9);return{a:$t(i[0],16),b:$t(i[1],16),u:$t(i[2],30),c:$t(i[3],16),d:$t(i[4],16),v:$t(i[5],30),x:$t(i[6],16),y:$t(i[7],16),w:$t(i[8],30)}}function go(t){return new Cm(t.type,Wm(Gm(t.data.data),t.data.cursor.offset))}var Zm=function(t){function i(i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=e,r.handlerType=i,r}return $o(i,t),w.defineProperty(i.prototype,"handlerType",{get:function(){return this.dA},set:function(t){this.dA=t},enumerable:!1,configurable:!0}),i.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(e=null===(i=this.name)||void 0===i?void 0:i.length)&&void 0!==e?e:0)+1},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeString(this.handlerType),this.serializeReserved(i),this.name&&i.writer.writeString(this.name),i.writer.writeByte(0)},i}(je);function $m(t){var i=t.data,e=ai(i.nextUint32()),s=e.version,n=e.flags;i.skip(4);var r=i.nextChars(4);i.skip(12);var h=i.nextUTF8String();return new Zm(r,h,s,n.raw)}!function(t){function i(){return t.call(this,"mdir")||this}$o(i,t),i.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(Zm);r(),r(),r();var tw=function(){function t(t,i){void 0===i&&(i=!1),this.fixed28BitMode=i,this.tag=t}return t.prototype.encodeSize=function(t){for(var i=[];t>0;)i.length>0&&(i[i.length-1]+=128),i.push(t%128),t>>=7;if(this.fixed28BitMode)for(;i.length<4;)i.push(128);return i.reverse()},w.defineProperty(t.prototype,"tag",{get:function(){return this.lA},set:function(t){if(!ol(t,8))throw new m("Provided tag does not fit in 8 bits.");this.lA=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var i=0,e=this.encodeSize(this.getDescriptorSize());i<e.length;i++){var s=e[i];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}();r();!function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a=t.call(this,4,o.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=h,a.objectTypeIndication=i,a.streamType=e,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}$o(i,t),w.defineProperty(i.prototype,"objectTypeIndication",{get:function(){return this.fA},set:function(t){if(!ol(t,8))throw new m("Provided objectTypeIndication does not fit in 8 bits.");this.fA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"streamType",{get:function(){return this.vA},set:function(t){if(!ol(t,6))throw new m("Provided streamType does not fit in 6 bits.");this.vA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this._A},set:function(t){if(!ol(t,24))throw new m("Provided bufferSizeDb does not fit in 24 bits.");this._A=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.gA},set:function(t){if(!ol(t,32))throw new m("Provided maxBitrate does not fit in 32 bits.");this.gA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"avgBitrate",{get:function(){return this.pA},set:function(t){if(!ol(t,32))throw new m("Provided avgBitrate does not fit in 32 bits.");this.pA=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce(function(t,i){return t+i.getSize()},0)},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var i=0,e=this.decoderSpecificInfo;i<e.length;i++){e[i].serialize(t)}}}(tw);r();!function(t){function i(i,e){void 0===e&&(e={});var s=t.call(this,5,e.fixed28BitMode)||this;return s.data=i,s}$o(i,t),i.prototype.getDescriptorSize=function(){return this.data.length},i.prototype.serializeDescriptorContent=function(t){t.concat(ah.from(this.data))}}(tw);r(),r();var iw=function(t){function i(i){void 0===i&&(i=!1);var e=t.call(this,6,i)||this;return e.predefined=2,e}return $o(i,t),i.prototype.getDescriptorSize=function(){return 1},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},i}(tw);!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=i,r.streamPriority=e,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new iw(n.fixed28BitMode),r}$o(i,t),w.defineProperty(i.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"esId",{get:function(){return this.mA},set:function(t){if(!ol(t,16))throw new m("Provided esId does not fit in 16 bits.");this.mA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"streamPriority",{get:function(){return this.wA},set:function(t){if(!ol(t,5))throw new m("Provided streamPriority does not fit in 5 bits.");this.wA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"dependsOnEsId",{get:function(){return this.yA},set:function(t){if(t&&!ol(t,16))throw new m("Provided dependsOnEsId does not fit in 16 bits.");this.yA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"ocrEsId",{get:function(){return this.AA},set:function(t){if(t&&!ol(t,16))throw new m("Provided ocrEsId does not fit in 16 bits.");this.AA=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},i.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(tw);r(),r(),r(),r(),r();var ew=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.boxes=[],i}return $o(i,t),i.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce(function(t,i){return t+i.getSize()},0)},i.prototype.serialize=function(){for(var i=t.prototype.serialize.call(this),e=0,s=this.boxes;e<s.length;e++){var n=s[e];i=i.concat(n.serialize())}return i},i}(Wh),ju=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return $o(i,t),i.prototype.serializeBoxContent=function(t){},i.prototype.getBoxContentSize=function(){return 0},i}(ew),sw=function(t){function i(i,e){var s=t.call(this,i)||this;return s.dataReferenceIndex=e,s}return $o(i,t),w.defineProperty(i.prototype,"dataReferenceIndex",{get:function(){return this.bA},set:function(t){if(!ol(t,16))throw new m("Provided dataReferenceIndex does not fit in 16 bits.");this.bA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){for(var i=0;i<6;i++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},i}(ju),nw=function(t){function i(i,e,s,n){var r,h,o=this;return(o=t.call(this,i,e)||this).extra=n,o.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,o.sampleSize=null!==(h=s.sampleSize)&&void 0!==h?h:16,o.sampleRate=s.sampleRate,o}return $o(i,t),w.defineProperty(i.prototype,"channelCount",{get:function(){return this.SA},set:function(t){if(!ol(t,16))throw new m("Provided channelCount does not fit in 16 bits.");this.SA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleSize",{get:function(){return this.TA},set:function(t){if(!ol(t,16))throw new m("Provided sampleSize does not fit in 16 bits.");this.TA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleRate",{get:function(){return this.kA},set:function(t){if(!ol(ss(t,16),32))throw new m("Provided rate does not fit in 32 bits (fixed 16.16).");this.kA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(e=null===(i=this.extra)||void 0===i?void 0:i.length)&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.channelCount,16),i.writer.writeUInt(this.sampleSize,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(ss(this.sampleRate,16),32),this.extra&&Rm(i.writer,this.extra)},i}(sw);r();!function(t){function i(i){var e=t.call(this,"stco",0,0)||this;return e.entries=i,e}$o(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.EA},set:function(t){if(!ol(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!ol(t,32)}))throw new m("Not all entries can be represented in 32 bits.");this.EA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(je);r();!function(t){function i(i){var e=t.call(this,"clap")||this;return e.cleanApertureWidthN=i.cleanApertureWidthN,e.cleanApertureWidthD=i.cleanApertureWidthD,e.cleanApertureHeightN=i.cleanApertureHeightN,e.cleanApertureHeightD=i.cleanApertureHeightD,e.horizOffN=i.horizOffN,e.horizOffD=i.horizOffD,e.vertOffN=i.vertOffN,e.vertOffD=i.vertOffD,e}$o(i,t),w.defineProperty(i.prototype,"cleanApertureWidthN",{get:function(){return this.PA},set:function(t){if(!ol(t,32))throw new m("Provided cleanApertureWidthN does not fit in 32 bits.");this.PA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureWidthD",{get:function(){return this.xA},set:function(t){if(!ol(t,32))throw new m("Provided cleanApertureWidthD does not fit in 32 bits.");this.xA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureHeightN",{get:function(){return this.IA},set:function(t){if(!ol(t,32))throw new m("Provided cleanApertureHeightN does not fit in 32 bits.");this.IA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureHeightD",{get:function(){return this.RA},set:function(t){if(!ol(t,32))throw new m("Provided cleanApertureHeightD does not fit in 32 bits.");this.RA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizOffN",{get:function(){return this.CA},set:function(t){if(!ol(t,32))throw new m("Provided horizOffN does not fit in 32 bits.");this.CA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizOffD",{get:function(){return this.DA},set:function(t){if(!ol(t,32))throw new m("Provided horizOffD does not fit in 32 bits.");this.DA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vertOffN",{get:function(){return this.BA},set:function(t){if(!ol(t,32))throw new m("Provided vertOffN does not fit in 32 bits.");this.BA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vertOffD",{get:function(){return this.NA},set:function(t){if(!ol(t,32))throw new m("Provided vertOffD does not fit in 32 bits.");this.NA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 32},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(Wh);r();!function(t){function i(i,e){var s=t.call(this,"ctts",i,0)||this;return s.entries=e,s}$o(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.EA},set:function(t){if(!ol(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!ol(t.sampleCount,32)||!ol(t.sampleOffset,32)}))throw new m("Not all entries can be represented in 64 bits.");this.EA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),0===this.version?i.writer.writeUInt(n.sampleOffset,32):1===this.version&&i.writer.writeInt(n.sampleOffset,32)}}}(je);r();!function(t){function i(i){var e=t.call(this,"url ",0,void 0===i?1:0)||this;return e.location=i,e}$o(i,t),w.defineProperty(i.prototype,"location",{get:function(){return this.MA},set:function(t){this.flags=void 0===t?1:0,this.MA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this);return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(je);r();!function(t){function i(i,e,s){var n=t.call(this,"urn ",0,s)||this;return n.name=i,n.location=e,n}$o(i,t),w.defineProperty(i.prototype,"location",{get:function(){return this.MA},set:function(t){if(1&this.flags)throw new m("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.MA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.name),i.writer.writeByte(0),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(je);r();!function(t){function i(){return t.call(this,"dinf")||this}$o(i,t)}(ju);r(),r();var Dc=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!ol(e,8))throw new m("the provided version cannot fit in 8 bits.");return n.flags=s,n}return $o(i,t),w.defineProperty(i.prototype,"flags",{get:function(){return this.cA},set:function(t){this.cA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new m("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(ew);!function(t){function i(){return t.call(this,"dref",0,0)||this}$o(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(Dc);r(),r();var rw=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"elst",e,s)||this;return n.entries=i,n}return $o(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"entries",{get:function(){return this.EA},set:function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!ol(s.segmentDuration,this.bitSize))throw new m("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!ol(s.mediaTime,this.bitSize))throw new m("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!ol(s.mediaRateInteger,16))throw new m("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!ol(s.mediaRateFraction,16))throw new m("Provided mediaRateFraction does not fit in 16 bits.")}this.EA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(i)},i}(je),hw=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return $o(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(rw),ow=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return $o(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(rw);function aw(t){for(var i=t.data,e=ai(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=[],o=0;o<r;o++){var a=void 0,u=void 0;0===s?(a=i.nextUint32(),u=i.nextInt32()):(a=i.nextUint64(),u=i.nextInt64());var c=i.nextInt16(),d=i.nextInt16();h.push({segmentDuration:a,mediaTime:u,mediaRateFraction:d,mediaRateInteger:c})}return 0===s?new hw(h,n.raw):new ow(h,n.raw)}var uw=function(t){function i(){return t.call(this,"edts")||this}return $o(i,t),i}(ju);function cw(t){for(var i=new uw,e=0,s=Li(t.data);e<s.length;e++){var n=s[e];Hs(n,"elst")?i.boxes.push(aw(n)):i.boxes.push(go(n))}return i}r(),r();var dw=function(t){function i(i,e,s,n){var r=t.call(this,i)||this;return r.majorBrand=e,r.minorVersion=s,r.compatibleBrands=n,r}return $o(i,t),w.defineProperty(i.prototype,"majorBrand",{get:function(){return this.LA},set:function(t){if(4!==t.length)throw new m("the provided major brand does not conform to the 4 character requirement");this.LA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"minorVersion",{get:function(){return this.OA},set:function(t){if(!ol(t,32))throw new m("the provided minor version does not fit in 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"compatibleBrands",{get:function(){return this.FA},set:function(t){if(t.some(function(t){return 4!==t.length}))throw new m("Some of the compatible brands do not conform to the 4 character requirement");this.FA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var i=0,e=this.compatibleBrands;i<e.length;i++){var s=e[i];t.writer.writeString(s)}},i}(Wh),lw=function(t){function i(i,e,s){return t.call(this,"ftyp",i,e,s)||this}return $o(i,t),i}(dw);function fw(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new lw(e,s,n)}r();var vw=function(t){function i(i,e){void 0===e&&(e="free");var s=t.call(this,e)||this;return s.data=i,s}return $o(i,t),i.prototype.getBoxContentSize=function(){var t,i;return null!==(i=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==i?i:0},i.prototype.serializeBoxContent=function(t){this.data&&t.concat(ah.from(this.data))},i}(Wh);r(),r();var _w=function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=i.creation,r.modificationTime=i.modification,r.timescale=i.scale,r.duration=i.duration,r.language=e,r}return $o(i,t),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.UA},set:function(t){if(!ol(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.UA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.VA},set:function(t){if(!ol(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.VA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.HA},set:function(t){if(!ol(t,32))throw new m("Provided sequence number does not fit in 32 bits.");this.HA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.WA},set:function(t){if(!ol(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.WA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"language",{get:function(){return this.qA},set:function(t){if(!ww(t))throw new m("Expected an ISO-639-2/T language code");this.qA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMdiaContent(i),i.writer.writeBit(0);for(var e=0,s=this.language;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.charCodeAt(0)-96,5)}i.writer.writeUInt(0,16)},i}(je),gw=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,0,s)||this}return $o(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(_w),pw=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,1,s)||this}return $o(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(_w);function mw(t){var i=t.data,e=ai(i.nextUint32()),s=e.version,n=e.flags,r=Km(i,s),h=new W(ah.from(i.nextUint8Array(2)));h.skipBits(1);for(var o=[],a=0;a<3;a++)o.push(h.readUInt(5));var u=o.map(function(t){return String.fromCharCode(t+96)}).join("");return ww(u)||(u="und"),i.skip(2),0===s?new gw(r,u,n.raw):new pw(r,u,n.raw)}function ww(t){return/^[a-z]{3}$/.test(t)}var yw=function(t){function i(){return t.call(this,"mdia")||this}return $o(i,t),i}(ju);function Aw(t){for(var i=new yw,e=0,s=Li(t.data);e<s.length;e++){var n=s[e];Hs(n,"mdhd")?i.boxes.push(mw(n)):Hs(n,"hdlr")?i.boxes.push($m(n)):i.boxes.push(go(n))}return i}r();var bw=function(t){function i(){var i=t.call(this,"mdat")||this;return i.data=new ah,i}return $o(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(this.data)},i}(Wh);function Sw(t){var i=t.data,e=i.nextUint8Array(i.data.byteLength-i.cursor.offset),s=new bw;return s.data.pushRange(e),s}r();!function(t){function i(){return t.call(this,"minf")||this}$o(i,t)}(ju);r();var Tw;!function(t){function i(i){var e=t.call(this,"meta",0,0)||this;return e.handler=i,e}$o(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.handler.serialize())}}(Dc);r(),r(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(Tw||(Tw={})),r();var kw,Ew,Pw={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function xw(t,i){i.writer.writeUInt(ss(t.a,16),32),i.writer.writeUInt(ss(t.b,16),32),i.writer.writeUInt(ss(0,30),32),i.writer.writeUInt(ss(t.c,16),32),i.writer.writeUInt(ss(t.d,16),32),i.writer.writeUInt(ss(0,30),32),i.writer.writeUInt(ss(t.x,16),32),i.writer.writeUInt(ss(t.y,16),32),i.writer.writeUInt(ss(1,30),32)}function Iw(t,i){var e,s,n,r;i.writer.writeUInt(null!==(e=t.isLeading)&&void 0!==e?e:kw.UNKNOWN,2),i.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:Ew.UNKNOWN,2),i.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:Ew.UNKNOWN,2),i.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:Ew.UNKNOWN,2)}function Rw(t,i){var e,s,n;i.writer.writeUInt(0,4),Iw(t,i),i.writer.writeUInt(null!==(e=t.samplePaddingValue)&&void 0!==e?e:0,3),i.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),i.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}r(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(kw||(kw={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(Ew||(Ew={})),r(),r();var Cw=function(){};r(),r(),r();var Dw=function(t){function i(i,e,s){var n=t.call(this,"pssh",i,0)||this;return n.systemId=e,n.data=s,n}return $o(i,t),w.defineProperty(i.prototype,"systemId",{get:function(){return this.zA},set:function(t){if(16!==t.length)throw new m("Provided systemId length is not 16.");this.zA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"data",{get:function(){return this.Wp},set:function(t){if(!ol(t.length,32))throw new m("Provided data length does not fit in 32 bits.");this.Wp=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},i.prototype.serializeVersionBoxContent=function(t){},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(ah.from(this.systemId)),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.data.length,32),i.concat(ah.from(this.data))},i}(je),Bw=function(t){function i(i,e){return t.call(this,0,i,e)||this}return $o(i,t),i}(Dw),Nw=function(t){function i(i,e,s){var n=t.call(this,1,i,e)||this;return n.kIds=s,n}return $o(i,t),w.defineProperty(i.prototype,"kIds",{get:function(){return this.GA},set:function(t){if(!ol(t.length,32))throw new m("Provided kIds length cannot fit in 32 bits.");if(t.some(function(t){return 16!==t.length}))throw new m("Not all provided key ids are 16 bytes long.");this.GA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var i=0,e=this.kIds;i<e.length;i++){var s=e[i];t.concat(ah.from(s))}},i}(Dw);function Mw(t){var i=t.data.nextUint8();t.data.skip(3);var e=t.data.nextUint8Array(16),s=[];if(1===i)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var h=t.data.nextUint32(),o=t.data.nextUint8Array(h);return 1===i?new Nw(e,o,s):new Bw(e,o)}r(),r();var Lw=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"mehd",e,s)||this;return n.fragmentDuration=i,n}return $o(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"fragmentDuration",{get:function(){return this.XA},set:function(t){if(!ol(t,this.bitSize))throw new m("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.XA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(je),Ow=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return $o(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration,32)},i}(Lw),Fw=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return $o(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),i.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},i}(Lw);function Uw(t){var i=t.data,e=ai(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new Ow(i.nextUint32(),n.raw):new Fw(i.nextUint64(),n.raw)}r();var Fc=function(t){function i(i,e,s,n){void 0===e&&(e={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,h,o,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=i,a.defaultSampleDescriptionIndex=null!==(r=null==e?void 0:e.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(h=e.sampleDuration)&&void 0!==h?h:0,a.defaultSampleSize=null!==(o=e.sampleSize)&&void 0!==o?o:0,a.defaultSampleFlags=e.sampleFlags,a}return $o(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.jA},set:function(t){if(!ol(t,32))throw new m("Provided track id does not fit in 32 bits.");this.jA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.QA},set:function(t){if(!ol(t,32))throw new m("Provided default sample description index does not fit in 32 bits.");this.QA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.KA},set:function(t){if(!ol(t,32))throw new m("Provided default sample duration does not fit in 32 bits.");this.KA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.YA},set:function(t){if(!ol(t,32))throw new m("Provided default sample size does not fit in 32 bits.");this.YA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.JA},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!ol(t.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!ol(t.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");this.JA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},i.prototype.serializeBoxContent=function(i){var e;t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),i.writer.writeUInt(this.defaultSampleDescriptionIndex,32),i.writer.writeUInt(this.defaultSampleDuration,32),i.writer.writeUInt(this.defaultSampleSize,32),Rw(null!==(e=this.defaultSampleFlags)&&void 0!==e?e:{},i)},i}(je);function Vw(t){var i=t.data,e=ai(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=i.nextUint32(),o=i.nextUint32(),a=i.nextUint32(),u=Ym(new W(ah.from(i.nextUint8Array(4))));return new Fc(r,{sampleDescriptionIndex:h,sampleDuration:o,sampleSize:a,sampleFlags:u},s,n.raw)}var al=function(t){function i(){return t.call(this,"mvex")||this}return $o(i,t),i}(ju);function Hw(t){for(var i=new al,e=0,s=Li(t.data);e<s.length;e++){var n=s[e];Hs(n,"mehd")?i.boxes.push(Uw(n)):Hs(n,"trex")?i.boxes.push(Vw(n)):i.boxes.push(go(n))}return i}r();var Ww=function(t){function i(e,s,n,r,h){void 0===h&&(h=0);var o,a,u,c=this;return(c=t.call(this,"mvhd",r,h)||this).creationTime=e.creation,c.modificationTime=e.modification,c.timescale=e.scale,c.duration=e.duration,c.rate=null!==(o=n.rate)&&void 0!==o?o:i.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:i.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:Pw,c.ZA=s,c}return $o(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.UA},set:function(t){if(!ol(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.UA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.VA},set:function(t){if(!ol(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.VA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.HA},set:function(t){if(!ol(t,32))throw new m("Provided sequence number does not fit in 32 bits.");this.HA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.WA},set:function(t){if(!ol(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.WA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"rate",{get:function(){return this.$A},set:function(t){if(!ol(ss(t,16),32))throw new m("Provided rate does not fit in 32 bits (fixed 16.16).");this.$A=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"volume",{get:function(){return this.ib},set:function(t){if(!ol(ss(t,8),16))throw new m("Provided volume does not fit in 16 bits (fixed 8.8).");this.ib=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"matrix",{get:function(){return this.eb},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new m("(u, v, w) does not match the required (0, 0, 1)");this.eb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"nextTrackId",{get:function(){return this.ZA},set:function(t){if(0===t)throw new m("NextTrackId cannot be 0.");if(!ol(t,32))throw new m("NextTrackId cannot exceed 32 bits.");this.ZA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMvhdContent(i),i.writer.writeUInt(ss(this.rate,16),32),i.writer.writeUInt(ss(this.volume,8),16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),xw(this.matrix,i);for(var e=0;e<6;e++)i.writer.writeUInt(0,32);i.writer.writeUInt(this.nextTrackId,32)},i.DEFAULT_RATE=1,i.DEFAULT_VOLUME=1,i}(je),qw=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,0,n)||this}return $o(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(Ww),zw=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,1,n)||this}return $o(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Ww);function Gw(t){var i=t.data,e=ai(i.nextUint32()),s=e.version,n=e.flags,r=Km(i,s),h=$t(i.nextUint32(),16),o=$t(i.nextUint16(),8);i.skip(2),i.skip(8);var a=Jm(i);i.skip(24);var u=i.nextUint32();return 0===s?new qw(r,u,{rate:h,volume:o,matrix:a},n.raw):new zw(r,u,{rate:h,volume:o,matrix:a},n.raw)}r(),r();var Xw=function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a,u,c,d=this;return d=t.call(this,"tkhd",i,function(t){var i,e,s,n;return{trackEnabled:null===(i=null==t?void 0:t.trackEnabled)||void 0===i||i,trackInMovie:null===(e=null==t?void 0:t.trackInMovie)||void 0===e||e,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(o))||this,d.creationTime=e.creation,d.modificationTime=e.modification,d.trackId=s,d.duration=e.duration,d.volume=n,d.width=r,d.height=h,d.layer=null!==(a=o.layer)&&void 0!==a?a:0,d.alternateGroup=null!==(u=o.alternateGroup)&&void 0!==u?u:0,d.matrix=null!==(c=o.matrix)&&void 0!==c?c:Pw,d}return $o(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.UA},set:function(t){if(!ol(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.UA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.VA},set:function(t){if(!ol(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.VA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"trackId",{get:function(){return this.jA},set:function(t){if(0===t)throw new m("trackId cannot be 0.");if(!ol(t,32))throw new m("trackId cannot exceed 32 bits.");this.jA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.WA},set:function(t){if(!ol(t,this.bitSize))throw new m("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.WA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"volume",{get:function(){return this.ib},set:function(t){if(!ol(ss(t,8),16))throw new m("Provided volume does not fit in 16 bits (fixed 8.8).");this.ib=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"width",{get:function(){return this.sb},set:function(t){if(!ol(ss(t,16),32))throw new m("Provided width does not fit in 32 bits (fixed 16.16).");this.sb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"height",{get:function(){return this.hb},set:function(t){if(!ol(ss(t,16),32))throw new m("Provided height does not fit in 32 bits (fixed 16.16).");this.hb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"layer",{get:function(){return this.ob},set:function(t){if(!ol(t,16))throw new m("Provided layer does not fit in 16 bits.");this.ob=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"alternateGroup",{get:function(){return this.ub},set:function(t){if(!ol(t,16))throw new m("Provided alternateGroup does not fit in 16 bits.");this.ub=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"matrix",{get:function(){return this.eb},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new m("(u, v, w) does not match the required (0, 0, 1)");this.eb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeTkhdContent(i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.layer,16),i.writer.writeUInt(this.alternateGroup,16),i.writer.writeUInt(ss(this.volume,8),16),i.writer.writeUInt(0,16),xw(this.matrix,i),i.writer.writeUInt(ss(this.width,16),32),i.writer.writeUInt(ss(this.height,16),32)},i}(je),jw=function(t){function i(i,e,s,n,r,h){return t.call(this,0,i,e,s,n,r,h)||this}return $o(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},i}(Xw),Qw=function(t){function i(i,e,s,n,r,h){return t.call(this,1,i,e,s,n,r,h)||this}return $o(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Xw);function Kw(t){var i,e,s,n,r=t.data,h=ai(r.nextUint32()),o=h.version,a=h.flags,u=a.isSet(8),c=a.isSet(4),d=a.isSet(2),l=a.isSet(1);0===o?(i=r.nextUint32(),e=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(i=r.nextUint64(),e=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),v=r.nextInt16(),_=$t(r.nextInt16(),8);r.skip(2);var g=Jm(r),p=$t(r.nextUint32(),16),m=$t(r.nextUint32(),16);return 0===o?new jw({creation:i,modification:e,duration:n},s,_,p,m,{layer:f,matrix:g,alternateGroup:v,trackSizeIsAspectRatio:u,trackEnabled:l,trackInPreview:c,trackInMovie:d}):new Qw({creation:i,modification:e,duration:n},s,_,p,m,{layer:f,matrix:g,alternateGroup:v,trackSizeIsAspectRatio:u,trackEnabled:l,trackInPreview:c,trackInMovie:d})}var Yw=function(t){function i(){return t.call(this,"trak")||this}return $o(i,t),i}(ju);function Jw(t){for(var i=new Yw,e=0,s=Li(t.data);e<s.length;e++){var n=s[e];Hs(n,"tkhd")?i.boxes.push(Kw(n)):Hs(n,"mdia")?i.boxes.push(Aw(n)):Hs(n,"edts")?i.boxes.push(cw(n)):i.boxes.push(go(n))}return i}var Zw=function(t){function i(){return t.call(this,"moov")||this}return $o(i,t),i}(ju);function $w(t){for(var i=new Zw,e=0,s=Li(t.data);e<s.length;e++){var n=s[e];Hs(n,"mvhd")?i.boxes.push(Gw(n)):Hs(n,"trak")?i.boxes.push(Jw(n)):Hs(n,"mvex")?i.boxes.push(Hw(n)):Hs(n,"pssh")?i.boxes.push(Mw(n)):i.boxes.push(go(n))}return i}r(),r(),r();var ty=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",e,s)||this;return n.baseMediaDecodeTime=i,n}return $o(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"baseMediaDecodeTime",{get:function(){return this.fb},set:function(t){if(!ol(t,this.bitSize))throw new m("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.fb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(je),iy=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return $o(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime,32)},i}(ty),Xc=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return $o(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},i}(ty);function ey(t){var i=t.data,e=ai(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new iy(i.nextUint32(),n.raw):new Xc(i.nextUint64(),n.raw)}r();var sy=function(t){function i(i,e){void 0===e&&(e=0);var s=t.call(this,"tfhd",e,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(i))||this;return s.trackId=i.trackId,s.baseDataOffset=i.baseDataOffset,s.sampleDescriptionIndex=i.sampleDescriptionIndex,s.defaultSampleDuration=i.defaultSampleDuration,s.defaultSampleSize=i.defaultSampleSize,s.defaultSampleFlags=i.defaultSampleFlags,s}return $o(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.jA},set:function(t){if(!ol(t,32))throw new m("Provided track id does not fit in 32 bits.");this.jA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"baseDataOffset",{get:function(){return this._b},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new m("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new m("The base data offset present flag is not set.");if(t&&!ol(t,64))throw new m("Provided baseDataOffset does not fit in 32 bits.");this._b=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleDescriptionIndex",{get:function(){return this.gb},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new m("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new m("The sample description index flag is not set.");if(t&&!ol(t,32))throw new m("Provided sampleDescriptionIndex does not fit in 32 bits.");this.gb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.KA},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new m("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new m("The default sample duration present flag is not set.");if(t&&!ol(t,32))throw new m("Provided defaultSampleDuration does not fit in 32 bits.");this.KA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.YA},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new m("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new m("The default sample size present flag is not set.");if(t&&!ol(t,32))throw new m("Provided defaultSampleSize does not fit in 32 bits.");this.YA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.JA},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new m("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new m("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!ol(t.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!ol(t.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");this.JA=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(i+=8),this.flags.sampleDescriptionIndexPresent&&(i+=4),this.flags.defaultSampleDurationPresent&&(i+=4),this.flags.defaultSampleSizePresent&&(i+=4),this.flags.defaultSampleFlagsPresent&&(i+=4),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(i.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&i.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&i.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&i.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Rw(this.defaultSampleFlags,i)},i}(je);function ny(t){var i=t.data,e=i.nextUint8(),s=new W(ah.from(i.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var h=Boolean(s.readBit()),o=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),d=i.nextUint32(),l=c?i.nextUint64():void 0,f=u?i.nextUint32():void 0,v=a?i.nextUint32():void 0,_=o?i.nextUint32():void 0,g=h?Ym(new W(ah.from(i.nextUint8Array(4)))):void 0;return new sy({trackId:d,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:l,sampleDescriptionIndex:f,defaultSampleDuration:v,defaultSampleSize:_,defaultSampleFlags:g},e)}r();var ry=function(t){function i(i,e,s){var n=t.call(this,"trun",i,function(t){var i,e,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(i=t.sampleDurationPresent)&&void 0!==i&&i,sampleSizePresent:null!==(e=t.sampleSizePresent)&&void 0!==e&&e,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(e))||this;return n.dataOffset=e.dataOffset,n.samples=s,n.firstSampleFlags=e.firstSampleFlags,n}return $o(i,t),w.defineProperty(i.prototype,"dataOffset",{get:function(){return this.pb},set:function(t){if(t&&!ol(t,32))throw new m("Provided data offset does not fit in 32 bits.");this.pb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"firstSampleFlags",{get:function(){return this.mb},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!ol(t.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!ol(t.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");this.mb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"samples",{get:function(){return this.wb},set:function(t){var i,e;if(!ol(t.length,32))throw new m("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new m("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new m("The sample duration present flag is not set.");if(r.duration&&!ol(r.duration,32))throw new m("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new m("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new m("The sample size present flag is not set.");if(r.size&&!ol(r.size,32))throw new m("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new m("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new m("The sample flags present flag is not set.");if((null===(i=r.flags)||void 0===i?void 0:i.samplePaddingValue)&&!ol(r.flags.samplePaddingValue,3))throw new m("Provided sample padding value does not fit in 3 bits.");if((null===(e=r.flags)||void 0===e?void 0:e.sampleDegradationPriority)&&!ol(r.flags.sampleDegradationPriority,16))throw new m("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new m("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new m("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!ol(r.compositionTimeOffset,32))throw new m("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.wb=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(i+=4),this.flags.firstSampleFlagsPresent&&(i+=4),this.flags.sampleDurationPresent&&(i+=4*this.samples.length),this.flags.sampleSizePresent&&(i+=4*this.samples.length),this.flags.sampleFlagsPresent&&(i+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(i+=4*this.samples.length),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&i.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Rw(this.firstSampleFlags,i);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];this.flags.sampleDurationPresent&&i.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&i.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&Rw(n.flags,i),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?i.writer.writeUInt(n.compositionTimeOffset,32):i.writer.writeInt(n.compositionTimeOffset,32))}},i}(je);function hy(t){var i=t.data,e=i.nextUint8(),s=new W(ah.from(i.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),h=Boolean(s.readBit()),o=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=i.nextUint32(),d={sampleDurationPresent:o,sampleSizePresent:h,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(d.dataOffset=i.nextInt32()),a&&(d.firstSampleFlags=Ym(new W(ah.from(i.nextUint8Array(4)))));for(var l=[],f=0;f<c;f++){var v={};o&&(v.duration=i.nextUint32()),h&&(v.size=i.nextUint32()),r&&(v.flags=Ym(new W(ah.from(i.nextUint8Array(4))))),n&&(v.compositionTimeOffset=0===e?i.nextUint32():i.nextInt32()),l.push(v)}return new ry(e,d,l)}var Fh=function(t){function i(){return t.call(this,"traf")||this}return $o(i,t),i}(ju);function oy(t){for(var i=new Fh,e=0,s=Li(t.data);e<s.length;e++){var n=s[e];Hs(n,"tfhd")?i.boxes.push(ny(n)):Hs(n,"tfdt")?i.boxes.push(ey(n)):Hs(n,"trun")?i.boxes.push(hy(n)):i.boxes.push(go(n))}return i}var ay=function(t){function i(){return t.call(this,"moof")||this}return $o(i,t),i}(ju);function uy(t){for(var i=new ay,e=0,s=Li(t.data);e<s.length;e++){var n=s[e];Hs(n,"traf")?i.boxes.push(oy(n)):Hs(n,"pssh")?i.boxes.push(Mw(n)):i.boxes.push(go(n))}return i}r();!function(t){function i(i){var e=t.call(this,"mfhd",0,0)||this;return e.sequenceNumber=i,e}$o(i,t),w.defineProperty(i.prototype,"sequenceNumber",{get:function(){return this.yb},set:function(t){if(!ol(t,32))throw new m("Provided sequence number does not fit in 32 bits.");this.yb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.sequenceNumber,32)}}(je);r();var cy=function(t){function i(i){var e=t.call(this,"frma")||this;return e.codingName=i,e}return $o(i,t),w.defineProperty(i.prototype,"codingName",{get:function(){return this.Ab},set:function(t){if(4!==t.length)throw new m("Provided coding name was not 4 characters long.");this.Ab=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},i}(Wh);r();!function(t){function i(i,e){var s=t.call(this,"pasp")||this;return s.hSpacing=i,s.vSpacing=e,s}$o(i,t),w.defineProperty(i.prototype,"hSpacing",{get:function(){return this.bb},set:function(t){if(!ol(t,32))throw new m("Provided hSpacing does not fit in 32 bits.");this.bb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vSpacing",{get:function(){return this.Sb},set:function(t){if(!ol(t,32))throw new m("Provided vSpacing does not fit in 32 bits.");this.Sb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(Wh);r();!function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.sample=e,n.sinf=s,n}$o(i,t),i.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},i.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(ju);r();!function(t){function i(i,e,s){var n=t.call(this,"sinf")||this;return n.schm=e,n.schi=s,n.frma=new cy(i),n}$o(i,t),i.prototype.getBoxContentSize=function(){var t,i,e,s;return this.frma.getSize()+(null!==(i=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==i?i:0)+(null!==(s=null===(e=this.schi)||void 0===e?void 0:e.getSize())&&void 0!==s?s:0)},i.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(Wh);r();var dy=function(t){function i(i,e,s){var n=t.call(this,"saio",i,void 0===s?0:1)||this;return n.entries=e,n.explicitAuxInfoType=s,n}return $o(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"entries",{get:function(){return this.EA},set:function(t){var i=this;if(!ol(t.length,32))throw new m("Number of entries provided does not fit in 32 bits.");if(t.some(function(t){return!ol(t,i.bitSize)}))throw new m("Not all provided entries fit in ".concat(this.bitSize," bits."));this.EA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.Tb},set:function(t){if(void 0===t)this.flags=0;else{if(!ol(t.auxInfoType,32))throw new m("Provided auxInfoType does not fit in 32 bits.");if(!ol(t.auxInfoTypeParameter,32))throw new m("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.Tb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(i)},i}(je);(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}$o(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s,32)}}})(dy),function(t){function i(){return null!==t&&t.apply(this,arguments)||this}$o(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(dy);r();!function(t){function i(i,e,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=i,n.sampleInfoSizes=e,n.explicitAuxInfoType=s,n}$o(i,t),w.defineProperty(i.prototype,"defaultSampleInfoSize",{get:function(){return this.kb},set:function(t){if(!ol(t,8))throw new m("Provided defaultSampleInfoSize does not fit in a single byte.");this.kb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleInfoSizes",{get:function(){return this.Eb},set:function(t){if(!ol(t.length,32))throw new m("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some(function(t){return!ol(t,8)}))throw new m("Not all provided sampleInfoSizes fit in a byte.");this.Eb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.Tb},set:function(t){if(void 0===t)this.flags=0;else{if(!ol(t.auxInfoType,32))throw new m("Provided auxInfoType does not fit in 32 bits.");if(!ol(t.auxInfoTypeParameter,32))throw new m("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.Tb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},i.prototype.serializeBoxContent=function(i){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new m("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeByte(this.defaultSampleInfoSize),i.writer.writeUInt(this.sampleInfoSizes.length,32);for(var e=0,s=this.sampleInfoSizes;e<s.length;e++){var n=s[e];i.writer.writeByte(n)}}}(je);r();!function(t){function i(i){var e=t.call(this,"sdtp",0,0)||this;return e.samples=i,e}$o(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i);for(var e=0,s=this.samples;e<s.length;e++){Iw(s[e],i)}}}(je);r();!function(t){function i(i){return t.call(this,"stsd",i,0)||this}$o(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(Dc);r();var ly=function(t){function i(i,e,s){var n=t.call(this,"sgpd",i,0)||this;return n.entries=s,n.groupingType=e,n}return $o(i,t),w.defineProperty(i.prototype,"groupingType",{get:function(){return this.Pb},set:function(t){if(4!==t.length)throw new m("The provided groupingType does not equal 4 characters.");this.Pb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.groupingType),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];this.serializeEntryBoxContent(i,n)}},i.prototype.serializeEntryBoxContent=function(t,i){i.serializeBoxContent(t)},i}(je);(function(t){function i(i,e){return t.call(this,0,i,e)||this}$o(i,t),i.prototype.serializeVersionBoxContent=function(t){}})(ly),function(t){function i(i,e,s){var n=t.call(this,1,i,s)||this;return n.defaultLength=e,n}$o(i,t),w.defineProperty(i.prototype,"defaultLength",{get:function(){return this.xb},set:function(t){if(!ol(t,32))throw new m("The provided defaultLength does not fit in 32 bits.");this.xb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},i.prototype.serializeEntryBoxContent=function(t,i){0===this.defaultLength&&t.writer.writeUInt(i.getBoxContentSize(),32),i.serializeBoxContent(t)}}(ly),function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=this;if(i<2)throw new m("This constructor is only meant for versions 2 and up.");return(r=t.call(this,i,e,s)||this).defaultSampleDescriptionIndex=n,r}$o(i,t),w.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.QA},set:function(t){if(!ol(t,32))throw new m("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.QA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(ly);r();(function(t){function i(i){void 0===i&&(i=[]);var e=t.call(this,"stsz",0,0)||this;return e.sampleSizes=i,e}$o(i,t),w.defineProperty(i.prototype,"sampleSizes",{get:function(){return this.Ib},set:function(t){if(!ol(t.length,32))throw new m("Number of allowed samples cannot fit in 32 bits.");if(t.some(function(t){return!ol(t,32)}))throw new m("Not all sampleSizes can be represented in 32 bits.");this.Ib=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(this.sampleSizes.length,32);for(var e=0,s=this.sampleSizes;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}})(je),function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=i,s.samples=e,s}$o(i,t),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.YA},set:function(t){if(!ol(t,32))throw new m("Provided defaultSampleSize does not fit in 32 bits.");this.YA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"samples",{get:function(){return this.wb},set:function(t){if(!ol(t,32))throw new m("Number of allowed samples cannot fit in 32 bits.");this.wb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.defaultSampleSize,32),i.writer.writeUInt(this.samples,32)}}(je);r();!function(t){function i(){return t.call(this,"stbl")||this}$o(i,t)}(ju);r();!function(t){function i(i){var e=t.call(this,"stsc",0,0)||this;return e.entries=i,e}$o(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.EA},set:function(t){if(!ol(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!ol(t.firstChunk,32)||!ol(t.sampleDescriptionIndex,32)||!ol(t.samplesPerChunk,32)}))throw new m("Not all entries can be represented in 96 bits.");this.EA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.firstChunk,32),i.writer.writeUInt(n.samplesPerChunk,32),i.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(je);r();!function(t){function i(){return t.call(this,"schi")||this}$o(i,t)}(ju);r();!function(t){function i(i,e,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=i,n.schemeVersion=e,n.schemeUri=s,n}$o(i,t),w.defineProperty(i.prototype,"schemeType",{get:function(){return this.Rb},set:function(t){if(4!==t.length)throw new m("The provided schemeType does not have a length of 4.");this.Rb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"schemeVersion",{get:function(){return this.Cb},set:function(t){if(!ol(t,32))throw new m("The provided schemeVersion does not fit in 23 bits.");this.Cb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"schemeUri",{get:function(){return this.Db},set:function(t){if(t&&4!==t.length)throw new m("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.Db=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeType),i.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(i.writer.writeString(this.schemeUri),i.writer.writeByte(0))}}(je);r();var fy=function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o=0);var a=t.call(this,"sidx",i,o)||this;return a.referenceId=e,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=h,a}return $o(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"referenceId",{get:function(){return this.Bb},set:function(t){if(!ol(t,32))throw new m("Provided referenceId does not fit in 32 bits.");this.Bb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.HA},set:function(t){if(!ol(t,32))throw new m("Provided timescale does not fit in 32 bits.");this.HA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"earliestPresentationTime",{get:function(){return this.Nb},set:function(t){if(!ol(t,this.bitSize))throw new m("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.Nb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"firstOffset",{get:function(){return this.Mb},set:function(t){if(!ol(t,this.bitSize))throw new m("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.Mb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"references",{get:function(){return this.Lb},set:function(t){if(!ol(t.length,16))throw new m("The number of provided reference items does not fit in 16 bits.");for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!ol(s.referencedSize,31))throw new m("Provided referenced size does not fit in 31 bits.");if(!ol(s.subsegmentDuration,32))throw new m("Provided subsegment duration does not fit in 31 bits.");if(!ol(s.sapType,3))throw new m("Provided SAP type does not fit in 3 bits.");if(!ol(s.sapDeltaTime,28))throw new m("Provided SAP delta time does not fit in 28 bits.")}this.Lb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.referenceId,32),i.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(i),i.writer.writeUInt(0,16),i.writer.writeUInt(this.references.length,16);for(var e=0,s=this.references;e<s.length;e++){var n=s[e];i.writer.writeBit(n.referenceType),i.writer.writeUInt(n.referencedSize,31),i.writer.writeUInt(n.subsegmentDuration,32),i.writer.writeBool(n.startsWithSap),i.writer.writeUInt(n.sapType,3),i.writer.writeUInt(n.sapDeltaTime,28)}},i}(je),vy=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,0,i,e,s,n,r,h)||this}return $o(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},i}(fy),_y=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,1,i,e,s,n,r,h)||this}return $o(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},i}(fy);r();var gy=function(t){function i(i,e,s){return t.call(this,"styp",i,e,s)||this}return $o(i,t),i}(dw);function py(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new gy(e,s,n)}r();!function(t){function i(i){void 0===i&&(i=0);var e=t.call(this,"smhd",0,0)||this;return e.balance=i,e}$o(i,t),w.defineProperty(i.prototype,"balance",{get:function(){return this.Ob},set:function(t){if(t<-1||t>1)throw new m("Provided balance does not fit in the allowed range [-1, 1].");if(!ol(ss(t,8),16))throw new m("Provided balance does not fit in 16 bits (fixed 8.8).");this.Ob=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(ss(this.balance,8),16),i.writer.writeUInt(0,16)}}(je);r();!function(t){function i(i){var e=t.call(this,"stss",0,0)||this;return e.entries=i,e}$o(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.EA},set:function(t){if(!ol(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!ol(t,32)}))throw new m("Not all entries can be represented in 32 bits.");this.EA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(je);r();!function(t){function i(i){var e=t.call(this,"stts",0,0)||this;return e.entries=i,e}$o(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.EA},set:function(t){if(!ol(t.length,32))throw new m("Number of allowed entries cannot fit in 32 bits.");if(t.some(function(t){return!ol(t.sampleCount,32)||!ol(t.sampleDelta,32)}))throw new m("Not all entries can be represented in 64 bits.");this.EA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),i.writer.writeUInt(n.sampleDelta,32)}}}(je);r();!function(t){function i(i){var e=t.call(this,"trep",0,0)||this;return e.trackId=i,e}$o(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.jA},set:function(t){if(!ol(t,32))throw new m("The provided trackId does not fit in 32 bits.");this.jA=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32)}}(Dc);r();!function(t){function i(){return t.call(this,"udta")||this}$o(i,t)}(ju);r();var my={red:0,green:0,blue:0};!function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=my);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=i,s.opColor=e,s}$o(i,t),w.defineProperty(i.prototype,"opColor",{get:function(){return this.Fb},set:function(t){if(!ol(t.red,16)||!ol(t.green,16)||!ol(t.blue,16))throw new m("Not all colors could be represented in 16 bits.");this.Fb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.graphicsMode,16),i.writer.writeUInt(this.opColor.red,16),i.writer.writeUInt(this.opColor.green,16),i.writer.writeUInt(this.opColor.blue,16)}}(je);r();var wy=function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h,o,a,u,c,d=this;return(d=t.call(this,i,e)||this).width=s.width,d.height=s.height,d.horizontalResolution=null!==(h=s.horizontal)&&void 0!==h?h:72,d.verticalResolution=null!==(o=s.vertical)&&void 0!==o?o:72,d.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",d.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,d.depth=null!==(c=n.depth)&&void 0!==c?c:24,d.clap=n.clap,d.pasp=n.pasp,d.extra=r,d}return $o(i,t),w.defineProperty(i.prototype,"width",{get:function(){return this.sb},set:function(t){if(!ol(t,16))throw new m("Provided width does not fit in 16 bits.");this.sb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"height",{get:function(){return this.hb},set:function(t){if(!ol(t,16))throw new m("Provided height does not fit in 16 bits.");this.hb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizontalResolution",{get:function(){return this.Ub},set:function(t){if(!ol(ss(t,16),32))throw new m("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.Ub=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"verticalResolution",{get:function(){return this.Vb},set:function(t){if(!ol(ss(t,16),32))throw new m("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.Vb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"compressorName",{get:function(){return this.Hb},set:function(t){if(t.length>31)throw new m("The provided compressorName should at most be 31 characters long.");this.Hb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"frameCount",{get:function(){return this.Wb},set:function(t){if(!ol(t,16))throw new m("Provided frameCount does not fit in 16 bits.");this.Wb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"depth",{get:function(){return this.qb},set:function(t){if(!ol(t,16))throw new m("Provided depth does not fit in 16 bits.");this.qb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e,s,n,r,h;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(e=null===(i=this.clap)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(h=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==h?h:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.width,16),i.writer.writeUInt(this.height,16),i.writer.writeUInt(ss(this.horizontalResolution,16),32),i.writer.writeUInt(ss(this.verticalResolution,16),32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.frameCount,16),i.writer.writeByte(this.compressorName.length),i.writer.writeString(this.compressorName);for(var e=0;e<31-this.compressorName.length;e++)i.writer.writeByte(0);i.writer.writeUInt(this.depth,16),i.writer.writeInt(-1,16),this.clap&&i.concat(this.clap.serialize()),this.pasp&&i.concat(this.pasp.serialize()),this.extra&&Rm(i.writer,this.extra)},i}(sw);r(),r();!function(t){function i(i){var e=t.call(this,"esds",0,0)||this;return e.esDescriptor=i,e}$o(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof j?this.esDescriptor.length:this.esDescriptor.getSize())},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor instanceof j?i.concat(ah.from(this.esDescriptor)):this.esDescriptor.serialize(i)}}(je);r();!function(t){function i(i,e,s){var n=t.call(this,"mp4a",i,s)||this;return n.esd=e,n}$o(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.esd.serialize())}}(nw);r();!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",i,e,n)||this;return r.esDescriptor=s,r}$o(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(wy);r();!function(t){function i(i,e){var s=t.call(this,"mp4s",i)||this;return s.esDescriptor=e,s}$o(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(sw);r(),r();!function(t){function i(i){var e=t.call(this,"avcC")||this;return e.decoderConfig=i,e}$o(i,t),i.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},i.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(Wh);r();!function(){function t(t,i,e,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=e,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=i,this.spsSets=s,this.ppsSets=n}w.defineProperty(t.prototype,"version",{get:function(){return this.zb},set:function(t){if(!ol(t,8))throw new m("Provided version does not fit in 8 bits.");this.zb=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileIndication",{get:function(){return this.Gb},set:function(t){if(!ol(t,8))throw new m("Provided profileIndication does not fit in 8 bits.");this.Gb=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.Xb},set:function(t){if(!ol(t,8))throw new m("Provided profileCompatibility does not fit in 8 bits.");this.Xb=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"levelIndication",{get:function(){return this.jb},set:function(t){if(!ol(t,8))throw new m("Provided levelIndication does not fit in 8 bits.");this.jb=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"spsSets",{get:function(){return this.Qb},set:function(t){if(!ol(t.length,5))throw new m("Provided number of spsSets exceeds the max (32)");this.Qb=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"ppsSets",{get:function(){return this.Kb},set:function(t){if(!ol(t.length,8))throw new m("Provided number of ppsSets exceeds the max (256)");this.Kb=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce(function(t,i){return t+i.length},0)+2*this.ppsSets.length+this.ppsSets.reduce(function(t,i){return t+i.length},0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var i=0,e=this.spsSets;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.length,16),t.concat(ah.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var h=r[n];t.writer.writeUInt(h.length,16),t.concat(ah.from(h))}}}();r();!function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h=t.call(this,"avc1",i,e,n)||this;return h.configurationBox=s,h.bitrateBox=r,h}$o(i,t),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(e=null===(i=this.bitrateBox)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.configurationBox.serialize()),this.bitrateBox&&i.concat(this.bitrateBox.serialize())}}(wy);r();!function(t){function i(i,e,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=i,n.max=e,n.avg=s,n}$o(i,t),w.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this._A},set:function(t){if(!ol(t,32))throw new m("Provided bufferSizeDb does not fit in 32 bits.");this._A=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"max",{get:function(){return this.Yb},set:function(t){if(!ol(t,32))throw new m("Provided max does not fit in 32 bits.");this.Yb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"avg",{get:function(){return this.Jb},set:function(t){if(!ol(t,32))throw new m("Provided avg does not fit in 32 bits.");this.Jb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 12},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(Wh);r(),r(),r();var yy=function(t){function i(i,e){var s,n,r,h,o=this;if(o=t.call(this,"tenc",i,0)||this,e.perSampleIvSize>0&&(null!==(n=null===(s=e.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new m("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return o.kId=e.kId,o.isProtected=null!==(r=e.isProtected)&&void 0!==r?r:1,e.perSampleIvSize>0?o.perSampleIvSize=e.perSampleIvSize:o.constantIv=null!==(h=e.constantIv)&&void 0!==h?h:new j(0),o}return $o(i,t),w.defineProperty(i.prototype,"isProtected",{get:function(){return this.Zb},set:function(t){if(!ol(t,8))throw new m("Provided isProtected does not fit in 1 byte.");this.Zb=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"perSampleIvSize",{get:function(){return this.$b},set:function(t){if(![8,16].includes(t))throw new m("Provided perSampleIvSize does not match any allowed value [8, 16].");this.$b=t,this.tS=new j(0)},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"kId",{get:function(){return this.iS},set:function(t){if(16!==t.length)throw new m("Provided kId length is not 16.");this.iS=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"constantIv",{get:function(){return this.tS},set:function(t){if(![8,16].includes(t.length))throw new m("Provided constant IV length does not match any allowed value [8, 16].");this.tS=t,this.$b=0},enumerable:!1,configurable:!0}),i.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeOwnContent(i)},i.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),Rm(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),Rm(t.writer,this.constantIv))},i}(je),Ay=(function(t){function i(i){return t.call(this,0,i)||this}$o(i,t)}(yy),function(t){function i(i){var e=t.call(this,1,i)||this;return e.cryptByteBlocks=i.cryptByteBlock,e.skipByteBlocks=i.skipByteBlock,e}return $o(i,t),w.defineProperty(i.prototype,"cryptByteBlocks",{get:function(){return this.eS},set:function(t){if(!ol(t,4))throw new m("Provided cryptByteBlocks does not fit in 4 bits.");this.eS=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"skipByteBlocks",{get:function(){return this.sS},set:function(t){if(!ol(t,4))throw new m("Provided skipByteBlocks does not fit in 4 bits.");this.sS=t},enumerable:!1,configurable:!0}),i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},i}(yy));!function(t){function i(i){var e=t.call(this)||this;return e.tencBox=new Ay(i),e}$o(i,t),i.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},i.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(Cw);function by(t){return void 0!==t.iv}function Sy(t){return void 0!==t.subsamples}r();!function(t){function i(i){var e=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return e.samples=i,e}$o(i,t),w.defineProperty(i.prototype,"samples",{get:function(){return this.wb},set:function(t){var i;if(!ol(t.length,32))throw new m("The number of samples provided does not fit in 32 bits.");for(var e=0,s=t;e<s.length;e++){var n=s[e];if(by(n)&&![8,16].includes(n.iv.length))throw new m("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===i&&(i=Sy(n)),!0===i&&!Sy(n)||!1===i&&Sy(n))throw new m("Mix of samples with and without subsamples detected.");if(Sy(n)){if(!ol(n.subsamples.length,16))throw new m("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];if(!ol(o.clearData,16))throw new m("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!ol(o.protectedData,23))throw new m("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=i&&i,this.wb=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){for(var i=0,e=0,s=this.samples;e<s.length;e++){var n=s[e];by(n)&&(i+=n.iv.length),Sy(n)&&(i+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];if(by(n)&&Rm(i.writer,n.iv),Sy(n)){i.writer.writeUInt(n.subsamples.length,16);for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];i.writer.writeUInt(o.clearData,16),i.writer.writeUInt(o.protectedData,32)}}}},i.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(je);r(),r();!function(t){function i(i,e,s,n,r){var h=t.call(this,"emsg",0,0)||this;return h.schemeIdUri=i,h.value=e,h.data=r,h.id=s,h.timescale=n.timescale,h.presentationTimeDelta=n.presentationTimeDelta,h.eventDuration=n.eventDuration,h}$o(i,t),w.defineProperty(i.prototype,"timescale",{get:function(){return this.HA},set:function(t){if(!ol(t,32))throw new m("The provided timescale does not fit in 32 bits.");this.HA=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"presentationTimeDelta",{get:function(){return this.nS},set:function(t){if(!ol(t,32))throw new m("The provided presentationTimeDelta does not fit in 32 bits.");this.nS=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"eventDuration",{get:function(){return this.rS},set:function(t){if(!ol(t,32))throw new m("The provided eventDuration does not fit in 32 bits.");this.rS=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"id",{get:function(){return this.hS},set:function(t){if(!ol(t,32))throw new m("The provided id does not fit in 32 bits.");this.hS=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeIdUri),i.writer.writeByte(0),i.writer.writeString(this.value),i.writer.writeByte(0),i.writer.writeUInt(this.timescale,32),i.writer.writeUInt(this.presentationTimeDelta,32),i.writer.writeUInt(this.eventDuration,32),i.writer.writeUInt(this.id,32),i.concat(ah.from(this.data))}}(je);r(),r(),r();var Ty=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new Im,i=0,e=this.boxes;i<e.length;i++){var s=e[i];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function ky(t,i){return function(e){var s=function(t,i){for(var e=t.data,s=t.cursor;s.offset<e.byteLength;){var n=Qm(e,s);if(!n.complete)return;if(Hs(n.box,i))return n.box}}(new jm(zm(e),new Xm),t);if(!s)throw new m("".concat(t," box not found"));return i(s)}}var Ey=ky("moov",$w),Py=ky("sidx",function(t){var i,e,s=t.data,n=ai(s.nextUint32()),r=n.version,h=n.flags,o=s.nextUint32(),a=s.nextUint32();0===r?(i=s.nextUint32(),e=s.nextUint32()):(i=s.nextUint64(),e=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],d=0;d<u;d++){var l=new W(ah.from(s.nextUint8Array(12))),f=l.readBit(),v=l.readUInt(31),_=l.readUInt(32),g=Boolean(l.readBit()),p=l.readUInt(3),m=l.readUInt(28);c.push({referenceType:f,referencedSize:v,subsegmentDuration:_,startsWithSap:g,sapType:p,sapDeltaTime:m})}return 0===r?new vy(o,a,i,e,c,h.raw):new _y(o,a,i,e,c,h.raw)}),xy=ky("moof",uy),Iy=ky("pssh",Mw);function Ry(t){return function(t){for(var i=new Ty,e=0,s=Li(t);e<s.length;e++){var n=s[e];Hs(n,"ftyp")?i.boxes.push(fw(n)):Hs(n,"styp")?i.boxes.push(py(n)):Hs(n,"moov")?i.boxes.push($w(n)):Hs(n,"moof")?i.boxes.push(uy(n)):Hs(n,"mdat")?i.boxes.push(Sw(n)):i.boxes.push(go(n))}return i}(new jm(zm(t),new Xm))}var Cy=class extends Ne{get oS(){return this.zd}get aS(){return this.uS.expiration}get Ty(){return this.cS}get dS(){return this.uS.sessionId}Xs(){if(this.lS)return this.zd;const t=[];return t.push(Promise.resolve(this.uS.close())),t.push(Er(1e3)),this.fS.$g(Promise.race(t).catch(Dy)),this.lS=!0,this.zd}vS(t,i,e){if(Qt.e_){const t=Iy(wa(i));if(1===t.version){i=new Bw(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.uS.generateRequest(t,i)).catch(Dy)}Un(t){return Promise.resolve(this.uS.load(t)).catch(Dy)}_S(){return Promise.resolve(this.uS.remove()).catch(Dy)}er(t){return Promise.resolve(this.uS.update(t)).catch(Dy)}gS(){this.cS.Gy(),this.uS.keyStatuses.forEach((t,i)=>{this.pS(i,t)}),this.So(new cr(this.cS))}pS(t,i){if("string"==typeof t){const e=t;t=i,i=e}const e=wa(t);if(this.mS===Mu&&16===e.byteLength&&(Qt.v_||Qt.dg)){const t=dh(e),i=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,i,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.mS===Mu&&"status-pending"===i&&(i="usable"),this.cS.qy(e,i)}constructor(t,i){super(),this.uS=void 0,this.mS=void 0,this.cS=void 0,this.lS=void 0,this.zd=void 0,this.fS=void 0,this.wS=void 0,this.yS=void 0,this.bS=void 0,this.uS=t,this.mS=i,this.lS=!1,this.wS=()=>{this.gS()},this.yS=t=>{this.So(new Bh(this,t.messageType,ym(this.mS,t.message)))},this.bS=()=>{this.lS=!0,this.cS.Vy>0&&(this.cS.Gy(),this.So(new cr(this.cS))),this.uS.removeEventListener("keystatuseschange",this.wS),this.uS.removeEventListener("message",this.yS)},this.uS.addEventListener("keystatuseschange",this.wS),this.uS.addEventListener("message",this.yS),this.cS=new mm;const e=[];this.uS.closed&&e.push(Promise.resolve(this.uS.closed)),this.fS=new pa,e.push(this.fS.Qy),this.zd=Promise.race(e).then(this.bS,this.bS),this.gS()}};function Dy(t){let i;if(t.message){const e=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);e&&(i=0|x(e[1],16))}throw new dn(t.message,void 0,i,t)}var By=class{async SS(t){return new Cy(this.TS.createSession(t),this.kS)}ES(t){return Promise.resolve(this.TS.setServerCertificate(t))}_n(t){return Promise.resolve(t.setMediaKeys(this.TS))}PS(t){return Promise.resolve(t.setMediaKeys(null))}hr(){return Promise.resolve()}constructor(t,i,e){this.TS=void 0,this.kS=void 0,this.Cd=void 0,this.TS=t,this.kS=i,this.Cd=e}},Ny=class{get kS(){return this.xS.keySystem}async IS(){const t=await this.xS.createMediaKeys();return new By(t,this.mS,this.RS)}CS(){return this.RS}constructor(t,i,e){this.xS=void 0,this.mS=void 0,this.RS=void 0,this.xS=t,this.mS=i,this.RS=e}};r(),r();var My="video/avc",Ly="video/hevc",Oy="video/mp4",Fy="video/mpeg",Uy="video/mpeg2",Vy="video/webm",Hy="video/x-unknown",Wy="audio/mp4",qy="audio/webm",zy="image/jpeg",Gy="application/ttml+xml",Xy="application/mp4",jy="text/vtt";function I(t){return Vh(t,"audio/")}function tt(t){return Vh(t,"video/")}function Hh(t){return Ho(t,Xy)||Ho(t,Oy)||Ho(t,Wy)}function Qy(t){return Ho(t,Vy)||Ho(t,qy)}var Ky=class{DS(t){for(const[i,e]of this.NS)if(i.toLowerCase()===t.toLowerCase())return e}constructor(t,i){this.Km=void 0,this.NS=void 0,this.Km=t,this.NS=i}};function Vc(t){const i=t.trim(),e=i.indexOf(";");if(e<0)return new Ky(i,[]);const s=i.substr(0,e).trim(),n=i.substr(e+1).trim(),r=[];let h=0,o=!1;for(let t=0;t<n.length;t++){const i=n[t];if(o||";"!==i)'"'===i&&(o=!o);else{const i=Yy(n.substr(h,t));i&&r.push(i),h=t+1}}if(h!==n.length){const t=Yy(n.substr(h));t&&r.push(t)}return new Ky(s,r)}function Yy(t){const i=t.indexOf("=");if(i<0)return;const e=t.substr(0,i).trim();let s=t.substr(i+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[e,s]}function Jy(t){const i=t.trim(),e=i.indexOf(";");return e<0?i:i.substr(0,e).trim()}function Zy(t){let i=t;const e=i.match(/^avc1\.(\d+)\.(\d+)$/);if(e){const t=Number(e[1]),s=Number(e[2]);i="avc1."+Na((t<<16|s).toString(16),6,"0")}return i}function $y(t,i,e,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,MS:s.MS};let h=!1;if(s.audioCapabilities){const o=s.audioCapabilities.filter(t=>Boolean(t.contentType));o.length&&(r.audioCapabilities=o.filter(s=>tA(t,i,e,s)),h=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const o=s.videoCapabilities.filter(t=>Boolean(t.contentType));o.length&&(r.videoCapabilities=o.filter(s=>tA(t,i,e,s)),h=!0,r.videoCapabilities.length&&(n=!0))}return h||(n=t(e,"video/mp4")),n?r:void 0}function tA(t,i,e,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!pi(i,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(e,Jy(s.contentType))}function iA(t){if(t.videoCapabilities)for(const i of t.videoCapabilities)if(i.contentType)return i.contentType;if(t.audioCapabilities)for(const i of t.audioCapabilities)if(i.contentType)return i.contentType}function eA(t){const i=[];for(const e of t)e.encryptionScheme&&i.push({contentType:e.contentType,robustness:e.robustness});return t.concat(i)}function sA(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(nA))||!(!t.videoCapabilities||!t.videoCapabilities.some(nA))}function nA(t){return!t.robustness}function rA(t,i){const e=[];for(const s of t)s.robustness?e.push(s):e.push(Mo({},s,{robustness:i}));return e}var hA=class{async nw(t,i){i=i.filter(t=>!t.MS);for(const t of i)t.audioCapabilities&&(t.audioCapabilities=eA(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=eA(t.videoCapabilities));if(t===qg&&i.some(sA)){const e=i.map(t=>function(t,i){return Mo({},t,{videoCapabilities:t.videoCapabilities?rA(t.videoCapabilities,i):void 0,audioCapabilities:t.audioCapabilities?rA(t.audioCapabilities,i):void 0})}(t,"SW_SECURE_CRYPTO"));try{const i=await od.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new Ny(i,t,s)}catch(t){}}const e=await od.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new Ny(e,t,s)}static LS(){return vp()}};r(),r(),r(),r();var oA=class extends Ne{get dS(){return this.FS&&this.FS.sessionId||""}get aS(){return NaN}get oS(){return this.US.Qy}get Ty(){return this.VS}async vS(t,i,e){this.HS(),this.WS=new pa,this.SS(wa(i),e),await this.WS.Qy}SS(t,i){if(!t)throw new g("Expected initData to be defined but was "+t+".");const e=i&&i.playready&&i.playready.qS;let s;return s=i?this.zS.createSession(this.GS,t,e):this.zS.createSession(this.GS,t),s.addEventListener("mskeyclose",this.bS),s.addEventListener("mskeymessage",this.XS),s.addEventListener("mskeyerror",this.Ts),s.addEventListener("mskeyadded",this.jS),this.FS=s,this.QS("status-pending"),s}async Un(t){return this.HS(),!0}async er(t){if(this.KS=new pa,this.HS(),!this.FS)return Promise.resolve();const i=wa(t);if(0===i.byteLength)throw new g("Cannot call update with an empty response.");this.FS.update(i),await this.KS.Qy}Xs(){return!this.lS&&this.FS&&(this.lS=!0,this.FS.close()),this.US.Qy}async _S(){this.HS()}HS(){if(this.lS)throw new g("Already closing or closed.")}QS(t){this.VS.Gy(),this.VS.qy(Cc,t),this.So(new cr(this.VS))}constructor(t,i){super(),this.zS=void 0,this.GS=void 0,this.lS=void 0,this.US=void 0,this.KS=void 0,this.WS=void 0,this.VS=void 0,this.FS=void 0,this.bS=void 0,this.XS=void 0,this.Ts=void 0,this.jS=void 0,this.zS=t,this.GS=i,this.lS=!1,this.KS=void 0,this.WS=void 0,this.FS=void 0,this.bS=()=>{this.lS=!0,this.US.Xy(void 0),this.FS&&(this.FS.removeEventListener("mskeyclose",this.bS),this.FS.removeEventListener("mskeymessage",this.XS),this.FS.removeEventListener("mskeyerror",this.Ts),this.FS.removeEventListener("mskeyadded",this.jS))},this.XS=t=>{this.WS&&(this.WS.Xy(void 0),this.WS=void 0),this.So(new Bh(this,"license-request",Gu(t.message).buffer,t.destinationURL||void 0))},this.Ts=()=>{const t=this.FS&&this.FS.error;if(!t)return;const i=new dn("Unknown CDM error",t.code,t.systemCode);if(this.WS)this.WS.jy(i),this.WS=void 0;else if(this.KS)this.KS.jy(i),this.KS=void 0;else switch(i.Ky){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.QS("output-not-allowed");break;default:this.QS("internal-error")}},this.jS=()=>{this.WS&&(this.QS("usable"),this.WS.Xy(void 0),this.WS=void 0),this.KS&&(this.QS("usable"),this.KS.Xy(void 0),this.KS=void 0)},this.US=new pa,this.VS=new mm}},aA=class{async SS(t){return new oA(this.zS,this.GS)}ES(t){return Promise.resolve(!1)}_n(t){const i=()=>{t.msSetMediaKeys(this.zS),t.removeEventListener("loadedmetadata",i)};return t.readyState>=1?t.msSetMediaKeys(this.zS):t.addEventListener("loadedmetadata",i),Promise.resolve()}PS(t){return Promise.resolve()}hr(){return Promise.resolve()}constructor(t,i,e){this.zS=void 0,this.kS=void 0,this.Cd=void 0,this.GS=void 0,this.zS=t,this.kS=i,this.Cd=e;const s=iA(e)||"video/mp4";this.GS=Jy(s)}},uA=class{get kS(){return this.mS}CS(){return this.YS}IS(){const t=new s.MSMediaKeys(this.mS);return Promise.resolve(new aA(t,this.mS,this.YS))}constructor(t,i){this.mS=void 0,this.YS=void 0,this.mS=t,this.YS=i}},cA=class{nw(t,i){try{return Promise.resolve(function(t,i){if(!dA())throw new g("Unsupported key system "+t);for(const e of i){const i=$y(lA,yp,t,e);if(i)return new uA(t,i)}throw new g("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static LS(){return dA()}};function dA(){return void 0!==s.MSMediaKeys&&"function"==typeof s.MSMediaKeys.isTypeSupported}function lA(t,i){return s.MSMediaKeys.isTypeSupported(t,i)}r(),r(),r(),r();var fA=class extends Ne{get dS(){return this.JS?this.JS.sessionId:""}get aS(){return NaN}get oS(){return this.US.Qy}get Ty(){return this.VS}vS(t,i,e){const s=e&&e.fairplay&&e.fairplay.ZS;if(!s)throw new g("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,i,e){const s=pc(t),n=2*s.length,r=2*i.length,h=new ArrayBuffer(4+n+4+r+4+e.byteLength),o=new DataView(h),a=new Ui;return di(o,a,n,!0),em(o,a,s,!0),di(o,a,r,!0),em(o,a,i,!0),di(o,a,e.byteLength,!0),qp(o,a,e),new j(h)}(wa(i),s,this.$S);return this.JS=this.tT.createSession(this.GS,n),this.JS.addEventListener("webkitkeymessage",this.XS,!1),this.JS.addEventListener("webkitkeyadded",this.jS,!1),this.JS.addEventListener("webkitkeyerror",this.Ts,!1),this.QS("status-pending"),this.iT.Xy(this.JS),this.iT=new pa,Promise.resolve()}Un(t){return Promise.resolve(!0)}async er(t){const i=wa(t);if(0===i.byteLength)throw new g("Cannot call update with an empty response.");this.eT=new pa;(this.JS||await this.iT.Qy).update(i),await this.eT.Qy}Xs(){var t;const i=this.JS;return i&&(i.removeEventListener("webkitkeymessage",this.XS,!1),i.removeEventListener("webkitkeyadded",this.jS,!1),i.removeEventListener("webkitkeyerror",this.Ts,!1),i.close()),this.iT.Zg(),null==(t=this.eT)||t.Zg(),this.US.Xy(void 0),this.US.Qy}_S(){return Promise.resolve(void 0)}QS(t){this.VS.Gy(),this.VS.qy(Cc,t),this.So(new cr(this.VS))}constructor(t,i,e){super(),this.tT=void 0,this.GS=void 0,this.$S=void 0,this.US=void 0,this.eT=void 0,this.VS=void 0,this.JS=void 0,this.iT=void 0,this.Ts=void 0,this.XS=void 0,this.jS=void 0,this.tT=t,this.GS=i,this.$S=e,this.US=new pa,this.eT=void 0,this.VS=new mm,this.JS=void 0,this.iT=new pa,this.Ts=()=>{const t=this.JS&&this.JS.error;if(!t)return;const i=new dn("Unknown CDM error",t.code,t.systemCode);this.eT?(this.eT.jy(i),this.eT=void 0):i.Ky===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.QS("output-not-allowed"):this.QS("internal-error"),this.So(new Sp)},this.XS=t=>{this.So(new Bh(this,"license-request",Gu(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.jS=()=>{this.eT&&(this.eT.Xy(void 0),this.eT=void 0),this.QS("usable")}}};r();var Ga=class extends R{get name(){return"THEOplayerError"}get category(){return Je.fromCode(this.code)}constructor(t,i,e){super(i,e),this.code=void 0,this.code=t}};function vA(t,i){return t instanceof Ga?t:t instanceof m?new Ga(i,t.message,t):new Ga(i,String(t))}var _A=class{getInternalMediaKeys(){return this.tT}async SS(t){if(!this.$S)throw new Ga(Vo.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new fA(this.tT,this.GS,this.$S)}ES(t){return this.$S=wa(t),Promise.resolve(!0)}_n(t){return t.webkitSetMediaKeys(this.tT),Promise.resolve()}PS(t){return t.webkitSetMediaKeys(null),Promise.resolve()}hr(){return Promise.resolve()}constructor(t,i,e){this.tT=void 0,this.kS=void 0,this.Cd=void 0,this.GS=void 0,this.$S=void 0,this.tT=t,this.kS=i,this.Cd=e,this.$S=void 0;const s=iA(e)||"video/mp4";this.GS=Jy(s)}},gA=class{get kS(){return this.mS}CS(){return this.YS}IS(){const t=new s.WebKitMediaKeys(this.mS);return Promise.resolve(new _A(t,this.mS,this.YS))}constructor(t,i){this.mS=void 0,this.YS=void 0,this.mS=t,this.YS=i}},pA=class{nw(t,i){try{return Promise.resolve(function(t,i){if(t!==Yg)throw new g(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!mA())throw new g("Unsupported key system "+t);for(const e of i){const i=$y(wA,Ap,t,e);if(i)return new gA(t,i)}throw new g("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static LS(){return mA()}};function mA(){return void 0!==s.WebKitMediaKeys&&"function"==typeof s.WebKitMediaKeys.isTypeSupported}function wA(t,i){return s.WebKitMediaKeys.isTypeSupported(t,i)}r();var yA=class{async nw(t,i){for(const e of this.sT)try{return await e.nw(t,i)}catch(t){}throw new g("Unsupported key system configuration for "+t)}constructor(t){this.sT=void 0,this.sT=t}};r(),r(),r(),r(),r();var te=class{Zo(t,i){return new Promise(e=>{const s=at.ep([this.nT.Yg,i]),n=()=>{s.zg()};this.rT.push(()=>{const i=AA(t,s.Yg);return e(i),i.then(n,n)}),this.hT||(this.hT=this.oT())})}Zg(){return this.aT(!0)}kn(){return this.uT=void 0,this.aT(!1)}aT(t){const i=this.hT;return this.nT.Zg(),t&&(this.nT=new at),Promise.resolve(i)}constructor(t){this.rT=[],this.hT=void 0,this.nT=new at,this.uT=void 0,this.oT=()=>{if(0===this.rT.length)return this.uT?AA(this.uT,this.nT.Yg).then(this.cT,this.cT):this.cT();return this.rT.shift()().then(this.oT)},this.cT=()=>{if(0!==this.rT.length)return this.oT();this.hT=void 0},this.uT=t}};function AA(t,i){return new Promise(e=>e(t(i)))}var bA=new te,SA=class extends Ne{dT(){this.eT&&(this.QS("usable"),this.eT.Xy(void 0),this.eT=void 0)}lT(t){const i=new dn("Unknown CDM error",t.errorCode,t.systemCode);this.eT?(this.eT.jy(i),this.eT=void 0):this.WS?(this.WS.jy(i),this.WS=void 0):i.Ky===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.QS("output-restricted"):1===i.Yy?this.QS("expired"):this.QS("internal-error")}fT(t){0!==t.message.byteLength?(this.WS&&(this.WS.Xy(void 0),this.WS=void 0),this.So(new Bh(this,"license-request",ym(this.mS,Gu(t.message).buffer),t.defaultURL||void 0))):this.WS&&(this.WS.jy("Empty key message"),this.WS=void 0)}vT(t){this._T||(this._T=t,this.gT.Xy(t))}get Ty(){return this.pT}get dS(){return this.mT}set dS(t){this.mT=t}get oS(){return this.US.Qy}get aS(){return NaN}async Xs(){this.throwIfClosed(),this.eT&&(this.eT.jy(void 0),this.eT=void 0),this.hA=!0,this.US.Xy(void 0)}async vS(t,i){this.throwIfClosed(),this.WS=new pa,this.wT=wa(i);(this._T||await this.gT.Qy).webkitGenerateKeyRequest(this.mS,this.wT),await this.WS.Qy}async Un(t){return this.throwIfClosed(),!1}async _S(){this.throwIfClosed()}async er(t){if(this.throwIfClosed(),this.eT=new pa,Qt.S_||Qt.w_)return bA.Zo(async()=>{await this.doUpdate(t)});await this.doUpdate(t)}async doUpdate(t){if(void 0===this.eT)return;(this._T||await this.gT.Qy).webkitAddKey(this.mS,wa(t),this.wT,this.dS),await this.eT.Qy,Qt.w_&&await Er(500)}throwIfClosed(){if(this.hA)throw new g("Already closing or closed.")}QS(t){this.pT.Gy(),this.pT.qy(Cc,t),this.So(new cr(this.pT))}async yT(){const t=this._T||await this.gT.Qy;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.mS,this.mT)}catch(t){}finally{await Er(500)}}constructor(t){super(),this.mS=void 0,this.WS=void 0,this.eT=void 0,this.US=void 0,this.hA=void 0,this.wT=void 0,this.mT=void 0,this.pT=void 0,this._T=void 0,this.gT=void 0,this.mS=t,this.WS=void 0,this.eT=void 0,this.hA=!1,this.wT=void 0,this._T=void 0,this.US=new pa,this.mT="",this.gT=new pa,this.pT=new mm}},TA=class{_n(t){return this._T=t,this._T.addEventListener("webkitkeyadded",this.jS),this._T.addEventListener("webkitkeyerror",this.AT),this._T.addEventListener("webkitkeymessage",this.bT),this.ST.forEach((i,e)=>i.vT(t)),this.TT.forEach(i=>i.vT(t)),Promise.resolve()}PS(t){return t.removeEventListener("webkitkeyadded",this.jS),t.removeEventListener("webkitkeyerror",this.AT),t.removeEventListener("webkitkeymessage",this.bT),this._T=void 0,Promise.resolve()}async hr(){const t=this.ST.entries();let i=t.next();for(;!i.done;)await i.value[1].yT(),i=t.next();this.ST.clear()}async SS(t,i,e){const s=new SA(this.kS);return this._T&&s.vT(this._T),this.TT.push(s),s}ES(t){return Promise.resolve(!1)}kT(t){if(!t)return;let i=this.ST.get(t);return i||(i=this.TT.shift(),i?(i.dS=t,this.ST.set(t,i),i):void 0)}constructor(t,i){this.kS=void 0,this.Cd=void 0,this._T=void 0,this.ST=void 0,this.TT=void 0,this.jS=void 0,this.AT=void 0,this.bT=void 0,this.kS=t,this.Cd=i,this._T=void 0,this.ST=qh(),this.TT=[],this.jS=t=>{const i=this.kT(t.sessionId);i&&i.dT()},this.AT=t=>{const i=this.kT(t.sessionId);i&&i.lT(t)},this.bT=t=>{const i=this.kT(t.sessionId);i&&i.fT(t)}}},kA=class{IS(){return Promise.resolve(new TA(this.kS,this.ET))}CS(){return this.ET}constructor(t,i){this.kS=void 0,this.ET=void 0,this.kS=t,this.ET=i}},EA=class{nw(t,i){try{return Promise.resolve(function(t,i){if(!EA.LS())throw new g("Unsupported key system "+t);for(const e of i){const i=$y(PA,yp,t,e);if(i)return new kA(t,i)}throw new g("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static LS(){return _p()}};function PA(t,i){const e=gr();return Boolean(e&&e.canPlayType&&""!==e.canPlayType(i,t))}r();var xA,IA=class{nw(t,i){return t===qg||t===Mu?Promise.resolve(void 0):Promise.reject(new m("DRM configuration not supported"))}};function RA(){return xA||(xA=function(){const t=[];pA.LS()&&t.push(new pA);hA.LS()&&t.push(new hA);cA.LS()&&t.push(new cA);EA.LS()&&t.push(new EA);Qt.k_&&t.push(new IA);return new yA(t)}()),xA}r(),r();var CA=class{Gy(t){this.PT.delete(t)}xT(){this.PT.clear()}Wy(t){return this.PT.get(t)}qy(t,i){this.PT.set(t,i)}constructor(){this.PT=qh()}},DA=class t{static IT(){return t.Ng||(t.Ng=BA.LS()?new BA:new CA),t.Ng}static Gy(i){t.IT().Gy(i)}static xT(){t.IT().xT()}static Wy(i){return t.IT().Wy(i)}static qy(i,e){t.IT().qy(i,e)}};DA.Ng=void 0;var BA=class extends DA{static LS(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}Gy(t){self.sessionStorage.removeItem(t)}xT(){self.sessionStorage.clear()}Wy(t){var i;return null!=(i=self.sessionStorage.getItem(t))?i:void 0}qy(t,i){self.sessionStorage.setItem(t,i)}};r(),r();var NA=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(i,e)=>new t(i,e)}(t)}catch(t){}const i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(i)return function(t){return(i,e)=>{const s=new t;if(i)for(const t of i)s.append(t);return s.getBlob(e&&e.type||"")}}(i)})();function MA(t,i,e){const s=NA([i],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,i){let e=t;const s=e.indexOf("?");if(s>=0&&(e=e.substr(0,s)),e=e.substr(e.lastIndexOf("/")+1),i){let t=e.indexOf(".");t<0&&(t=e.length),e=e.substr(0,t)+i+e.substr(t)}return e}(t,e),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}r();var LA="default";r(),r(),r(),r();var M=function(t){return t.CT="arraybuffer",t.DT="json",t.BT="stream",t.NT="text",t}({});r();var Ra=class t{append(t,i){let e=t,s=i;e=OA(e),s=FA(s);const n=e.toLowerCase();if(this.Wm.hasOwnProperty(n)){const t=this.Wm[n],i=t[1];t[1]=i?i+", "+s:s}else this.Wm[n]=[e,s]}delete(t){const i=OA(t).toLowerCase();delete this.Wm[i]}get(t){const i=OA(t).toLowerCase();return this.Wm.hasOwnProperty(i)?this.Wm[i][1]:null}has(t){const i=OA(t).toLowerCase();return this.Wm.hasOwnProperty(i)}set(t,i){let e=t;e=OA(e);const s=e.toLowerCase();this.Wm[s]=[e,FA(i)]}forEach(t,i){for(const e in this.Wm)this.Wm.hasOwnProperty(e)&&t.call(i,this.Wm[e][1],e,this)}asList(){const t=[];for(const i in this.Wm)if(this.Wm.hasOwnProperty(i)){const[e,s]=this.Wm[i];t.push([e,s])}return t}MT(){const t={};return this.forEach((i,e)=>{t[e]=i}),t}LT(t){t.forEach((t,i)=>{this.append(i,t)})}OT(t){t.forEach((t,i)=>{this.set(i,t)})}constructor(i){this.Wm=void 0,this.Wm={},i instanceof t?i.asList().forEach(t=>{let[i,e]=t;this.append(i,e)}):Array.isArray(i)?i.forEach(t=>{let[i,e]=t;this.append(i,e)}):i&&w.getOwnPropertyNames(i).forEach(t=>{this.append(t,i[t])})}};function OA(t){let i=t;if("string"!=typeof i&&(i=String(i)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(i))throw new g("Invalid character in header field name");return i}function FA(t){let i=t;return"string"!=typeof i&&(i=String(i)),i}r(),r(),r();var no=sn(pd());r();var UA=class extends R{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=void 0,this.causes=t}},fu=a,VA=ri(fu.ReadableStream)&&ri(fu.WritableStream)&&ri(fu.TransformStream)&&Qd(fu.ReadableStream.prototype.pipeThrough)&&!dv.Pp,HA=VA?fu.ReadableStream:no.ReadableStream,Ta=(VA?fu.WritableStream:no.WritableStream,VA?fu.TransformStream:no.TransformStream),WA=(VA&&fu.ByteLengthQueuingStrategy?fu.ByteLengthQueuingStrategy:no.ByteLengthQueuingStrategy,VA&&fu.CountQueuingStrategy?fu.CountQueuingStrategy:no.CountQueuingStrategy);function qA(t){return function(t){return new HA({start(i){for(const e of t)i.enqueue(e);i.close()}})}([t])}function zA(t){return qA(function(t){return new j(t)}(t))}function bn(t,i){return function(t,i){let e=i;const s=t.getReader(),n=new pa,r=()=>{h();const t=new dt;s.cancel(t).catch(Ct),n.jy(t)},h=()=>{e&&(e.jg(r),e=void 0)};e&&(e.Hg?r():e.Xg(r));const o=[],a=t=>t.done?(h(),Promise.resolve(o)):(o.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then(t=>{h(),n.Xy(t)},t=>{h(),n.jy(t)}),n.Qy}(t,i).then(t=>vm(t).buffer)}function GA(t,i){let e=i;const{readable:s,writable:n}=new Ta,r=n.getWriter(),h=()=>{e&&e.Zg()};return r.closed.then(h,h),t.then(t=>(e=void 0,r.releaseLock(),t.pipeTo(n).catch(Ct)),t=>(e=void 0,r.releaseLock(),n.abort(t).catch(Ct))),s}function XA(t){const{readable:i,writable:e}=new Ta;return t.pipeTo(e,{preventCancel:!0}).catch(i=>{let e;e=ul(i)?i[0]===i[1]||D(i[0])&&D(i[1])?i[0]:new UA(i):i,t.cancel(e).catch(Ct)}),i.tee()}function jA(t){return pc(new j(t))}function QA(t){return br(t).buffer}r();var KA="text/plain;charset=UTF-8",zc=class{FT(t){return this.UT(t).then(JSON.parse)}VT(t,i){switch(t){case M.CT:return this.HT(i);case M.DT:return this.FT(i);case M.BT:return this.WT();case M.NT:return this.UT(i);default:throw new g}}};function YA(t,i,e){if(t instanceof zc)return t;if(t instanceof HA)return function(t,i){return new ZA({Km:0,WT:t,qT:JA(i)})}(t,e);const s=JA(e),n=Promise.resolve(t).then(t=>function(t,i){if(t){if("string"==typeof t)return{Km:M.NT,zT:t,qT:i||KA};if(t instanceof ArrayBuffer||xc(t))return{Km:M.CT,zT:rb(t),qT:i};if(Gd(t)||ul(t))return{Km:M.DT,zT:t,qT:i};throw new g("Unsupported BodyInit type")}return{Km:M.NT,zT:null,qT:i}}(t,s));return new ZA({Km:1,Qy:n,GT:i})}function JA(t){return(t.get("content-type")||"").toLowerCase()}var ZA=class t extends zc{get XT(){return this.jT}get QT(){return 0===this.KT.Km}YT(){return this.JT.Qy}UT(t){return this.ZT($A,t)}FT(t){return this.ZT(ib,t)}HT(t){return this.ZT(sb,t)}WT(){return this.$T(function(t){return 0===t.Km?t.WT:GA(t.Qy.then(nb).then(zA),t.GT)}(this.KT))}ZT(t,i){if(this.jT)return Promise.reject(new g("Already used"));this.jT=!0;const e=t(this.KT,i);return this.JT.$g(e.then(Ct)),e}$T(t){if(this.jT)throw new g("Already used");if(t.locked)throw new g("Body stream is locked");this.jT=!0;const i=new Ta,e=Promise.resolve(t.pipeTo(i.writable));return this.JT.$g(e),i.readable}ek(t){this.KT=t,1===t.Km&&t.Qy.catch(Ct)}nk(){if(this.jT)throw new g("Already used");const i=function(t){if(0===t.Km){const[i,e]=t.WT.tee();return[{Km:t.Km,WT:i,qT:t.qT},{Km:t.Km,WT:e,qT:t.qT}]}{const[i,e]=t.GT.tp();return[{Km:t.Km,Qy:t.Qy,GT:i},{Km:t.Km,Qy:t.Qy,GT:e}]}}(this.KT),e=i[0],s=i[1];return this.ek(e),new t(s)}constructor(t){super(),this.jT=!1,this.KT=void 0,this.JT=new pa,this.JT.Qy.catch(Ct),this.ek(t)}};function $A(t,i){return 0===t.Km?bn(t.WT,i).then(jA):(i&&t.GT.$g(i),$e(t.Qy.then(tb),t.GT))}function tb(t){switch(t.Km){case M.NT:return Promise.resolve(t.zT||"");case M.CT:return Promise.resolve(t.zT).then(jA);case M.DT:return Promise.resolve(t.zT).then(JSON.stringify)}}function ib(t,i){return 0===t.Km?$A(t,i).then(JSON.parse):(i&&t.GT.$g(i),$e(t.Qy.then(eb),t.GT))}function eb(t){return t.Km===M.DT?Promise.resolve(t.zT):tb(t).then(JSON.parse)}function sb(t,i){return 0===t.Km?bn(t.WT,i):(i&&t.GT.$g(i),$e(t.Qy.then(nb),t.GT))}function nb(t){switch(t.Km){case M.CT:return Promise.resolve(t.zT);case M.NT:case M.DT:return tb(t).then(QA)}}function rb(t){return t instanceof ArrayBuffer?t:Gu(ta(t)).buffer}var hb=class extends zc{get XT(){return this.rk.XT}get QT(){return this.rk.QT}YT(){return this.rk.YT()}UT(t){return this.rk.UT(t)}FT(t){return this.rk.FT(t)}HT(t){return this.rk.HT(t)}WT(t){return this.rk.WT(t)}nk(){return this.rk.nk()}constructor(t){super(),this.rk=void 0,this.rk=t}};function jr(t){return t.hk>=200&&t.hk<=299||304===t.hk}var sc=class t extends hb{ck(t){return this.VT(this.dk,t)}Ly(){return new t({ck:this.nk(),lk:this.lk},this)}constructor(t,i){let e,s,n,r,h;i?(e=i.fk,s=i.dk,n=i.hk,r=i.vk,h=i._k):(e=[],s=M.NT,n=200,r="OK",h=!1);const o=t.lk,a=new Ra(t.fk||e),u=t.dk||s,c=t.gk||(i&&i.lk===o?i.gk:o.Yu),d=i?i.rk:null;super(YA(void 0!==t.ck?t.ck:d,t.GT||new at,a)),this.fk=void 0,this.lk=void 0,this.gk=void 0,this.dk=void 0,this.hk=void 0,this.vk=void 0,this._k=void 0,this.fk=a,this.lk=o,this.gk=c,this.dk=u,this.hk=void 0!==t.hk?t.hk:n,this.vk=void 0!==t.vk?String(t.vk):r,this._k=t._k||h}};r();var X=function(t){return t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT",t}({}),Al=function(t){return t.pk="",t.wk="manifest",t.yk="segment",t.Ak="preload-hint",t.bk="content-protection",t}({}),Xa=function(t){return t.pk="",t.Sk="initialization-segment",t.Tk="fairplay-license",t.Ek="fairplay-certificate",t.Pk="widevine-license",t.xk="widevine-certificate",t.Ik="playready-license",t.Rk="clearkey-license",t.Ck="aes128-key",t}({}),Za=function(t){return t.pk="",t.Dk="audio",t.Bk="video",t.NT="text",t.Nk="image",t}({}),ob=function(t){return t.Mk="same-origin",t.Lk="no-cors",t.Ok="cors",t.Fk="navigate",t}({}),$n=class{constructor(t,i){this.zT=void 0,this.fk=void 0,this.Uk=void 0,this.dk=void 0,this.Vk=void 0,this.Hk=void 0,this.Yg=void 0,this.Km=void 0,this.Wk=void 0,this.qk=void 0,this.Yu=void 0,this.zk=void 0,this.Gk=void 0,this.Xk=void 0,this.jk=void 0,this.Qk=void 0;const e=t.Yu;let s,n,r,h,o,a,u,c,d,l,f,v,_,g,p;var m,w,y;i?(s=i.zT,n=i.fk,r=i.Uk,h=i.dk,o=i.Vk,a=i.Hk,u=i.Yg,c=i.Km,d=i.Wk,l=i.qk,f=i.zk,v=i.Gk,_=i.Xk,g=i.jk,p=i.Qk):(s=null,n={},r="GET",h=M.NT,o=0,a=0,c="",d="",l="",f=!1,_=void 0,g=!1,p=void 0),this.Yu=e,this.zT=t.zT||s,this.fk=new Ra(t.fk||n),this.Uk=t.Uk||r,this.dk=t.dk||h,this.Vk=void 0!==t.Vk?Number(t.Vk)||0:o,this.Hk=void 0!==t.Hk?Number(t.Hk)||0:a,this.Yg=t.Yg||u||(new at).Yg,this.Km=t.Km||c,this.Wk=t.Wk||d,this.qk=t.qk||l,this.zk=void 0!==t.zk?Boolean(t.zk):f,this.Gk=t.Gk||v,this.Xk=null!=(m=t.Xk)?m:_,this.jk=null!=(w=t.jk)?w:g,this.Qk=null!=(y=t.Qk)?y:p}},ab=class{lk(t){const i=function(t){return new sc({ck:null,fk:{},lk:t,gk:t.Yu,dk:t.dk,hk:0,vk:d.Gw})}(new $n(t));return Promise.resolve(i)}Kk(t){}kn(){}};var Mr=class t{static get Yk(){return t.Jk||(t.Jk=new t(new ab)),t.Jk}lk(t){const i=this.Zk(t);return this.$k.lk(i)}Kk(t){return this.$k.Kk(this.tE(t))}Zk(i){let e=new $n(i);if(!this.iE){const i=t.eE(e.Yu);e=new $n({Yu:i},e)}return e}tE(i){let e=i.Yu;return this.iE||(e=t.eE(e)),{Yu:e,zT:i.zT}}static eE(t){return zd.Nm&&Vh(t,"http://")?t.replace(":","s:"):t}kn(){this.$k.kn()}constructor(t,i=!0){this.$k=void 0,this.iE=void 0,this.$k=t,this.iE=i}};function Gc(t,i){const e=zd.Dh(t);return ub(e,i),e.toString()}function ub(t,i){for(const e of w.keys(i))t.searchParams.set(e,i[e])}function fn(t,i){let e=zd.xm(t);return i&&!Ju(e,"/")&&(e+="/"),e}Mr.Jk=void 0,r(),r(),r();var cb=/cache:(.+)?(?=&|$)/;function db(t){if(!Vh(t,"http://webcache.googleusercontent.com/search?q=cache:"))return"";const i=zd.Dh(t).search.match(cb);return i&&i.length>1?i[1]:""}function lb(t){return zd.Dh(".",t)}r(),r();var qc=function(t){return t.sE="HttpOpenError",t.nE="HttpResponseError",t.rE="HttpTimeoutError",t}({}),fb=class extends R{get lk(){return this.hE}constructor(t,i,e){super(i,e),this.hE=void 0,this.hE=t}},vb=class extends fb{get name(){return qc.sE}constructor(t,i){super(t,"Error while opening "+t.Yu+".",i)}};r();var An=class extends fb{get name(){return qc.nE}get oE(){return this.aE}constructor(t,i,e){super(t.lk,null!=e?e:function(t){return"Error while loading "+t.lk.Yu+", status code "+t.hk}(t),i),this.aE=void 0,this.aE=t}};r();var Kc=class extends fb{get name(){return qc.rE}constructor(t,i){super(t,function(t){return"Request for "+t.Yu+" timed out after "+t.Vk+" seconds."}(t),i)}};r();var _b=self.fetch,gb=self.Request,pb=self.Response,mb=self.Headers,wb=self.ReadableStream,yb=self.AbortSignal,Ab=self.AbortController,bb=mu(()=>{try{return Qd(_b)&&ri(gb)&&ri(pb)&&ri(mb)&&"forEach"in mb.prototype&&Eg()}catch(t){return!1}}),Sb=["http:","https:"];var Tb=mu(()=>{try{return bb()&&ri(yb)&&ri(Ab)&&"signal"in gb.prototype}catch(t){return!1}}),kb=mu(()=>{try{return bb()&&ri(wb)&&"body"in pb.prototype&&!Qt.e_}catch(t){return!1}});function rt(t){return t instanceof fb}function ll(t){return t instanceof An}function Eb(t){return t instanceof Kc}function Pb(t,i){const e=t.fk.has("content-length")?Number(t.fk.get("content-length")):void 0;let s;return s=t.QT?function(t,i,e){return t.pipeThrough(new Ta(new xb(i,e)))}(t.WT(),i,e):async function(t,i,e){await Promise.resolve(),i(0,e);const s=await t,n=s.byteLength;return i(n,null!=e?e:n),s}(t.HT(),i,e),new sc({ck:s,lk:t.lk},t)}r(),r();var xb=class{transform(t,i){this.uE+=t.byteLength,this.cE(this.uE,this.dE),i.enqueue(t)}flush(t){var i;this.cE(this.uE,null!=(i=this.dE)?i:this.uE)}constructor(t,i){this.cE=void 0,this.dE=void 0,this.uE=void 0,this.cE=t,this.dE=i,this.uE=0}};var Ib=class{async lE(){const t=this.hE;let i,e;t.Vk&&(this.fE=u(()=>{this.vE=!0,this.nT.Zg()},t.Vk),this.nT.Yg.Qg(()=>{c(this.fE)}));try{i=_b(t.Yu,{method:t.Uk,headers:t.fk.MT(),body:t.zT,credentials:t.zk?"include":"same-origin",signal:Db(this.nT.Yg),mode:t.Xk,keepalive:t.Qk})}catch(i){throw new vb(t,i)}try{e=await i}catch(t){const i=this._E(t);throw D(i)&&this.nT.Zg(),i}const s=e.url||t.Yu,n=0===e.status&&"file:"===function(t){return zd.Dh(t).protocol}(s)?200:e.status,r=new Rb(this,e,this.nT);let h=new sc({ck:r,lk:t,dk:t.dk,fk:Bb(e.headers),hk:n,vk:e.statusText,gk:s});if(!jr(h))throw new An(h);return t.Gk&&(h=Pb(h,t.Gk)),h}_E(t){return rt(t)?t:D(t)?this.vE?new Kc(this.hE):new dt(t.message,t):this.aE?new An(this.aE,t):new vb(this.hE,t)}constructor(t){this.oE=void 0,this.hE=void 0,this.nT=new at,this.aE=void 0,this.fE=0,this.vE=!1,this.hE=t,this.nT.$g(t.Yg),this.oE=this.lE()}},Rb=class t extends zc{get XT(){return this.gE.bodyUsed}get QT(){return it(this.gE.body)}YT(){return this.JT.Qy}UT(t){return this.ZT(this.gE.text(),t)}HT(t){return this.ZT(this.gE.arrayBuffer(),t)}WT(){const t=this.gE.body;return t?this.$T(t):GA(this.HT().then(zA),this.nT)}nk(){const i=this.gE.clone(),[e,s]=this.nT.tp();return this.nT=e,new t(this.pE,i,s)}ZT(t,i){i&&this.nT.$g(i);let e=Nc(Promise.resolve(t),this.nT.Yg).catch(t=>{throw this.pE._E(t)});return e=$e(e,this.nT),this.JT.$g(e.then(Ct)),e}$T(t){return new HA(new Nb(t,t=>this.pE._E(t),this.nT,this.JT),{highWaterMark:0})}constructor(t,i,e){super(),this.pE=void 0,this.gE=void 0,this.nT=void 0,this.JT=new pa,this.pE=t,this.gE=i,this.nT=e,this.JT.Qy.catch(Ct)}},Cb="abort";function Db(t){if(!Tb())return;const i=new Ab;if(t.Hg)i.abort();else if(!t.Wg){const e=()=>{s(),i.abort()},s=()=>{i.signal.removeEventListener(Cb,e),t.jg(e),t.Kg(s)};i.signal.addEventListener(Cb,e),t.Xg(e),t.Qg(s)}return i.signal}function Bb(t){if(function(t){return Lu(t)&&"function"==typeof t.forEach}(t)){const i=new Ra;return t.forEach((t,e)=>{Array.isArray(t)&&2===t.length?i.append(t[0],t[1]):i.append(e,t)}),i}return new Ra(t)}var Nb=class{start(t){this.Wd=this.mE.getReader()}async pull(t){let i;try{i=await Nc(this.Wd.read(),this.nT.Yg)}catch(i){const e=this.wE(i);return this.JT.jy(e),this.nT.Zg(),this.Wd.cancel(e).catch(Ct),void t.error(e)}i.done?(this.JT.Xy(),this.nT.Zg(),t.close()):t.enqueue(i.value)}cancel(t){return this.nT.Zg(),this.JT.jy(t),this.Wd.cancel(t)}constructor(t,i,e,s){this.mE=void 0,this.wE=void 0,this.nT=void 0,this.JT=void 0,this.Wd=void 0,this.mE=t,this.wE=i,this.nT=e,this.JT=s}};r();var Mb=class{get oE(){return this.yE.Qy}lE(){const t=this.AE,i=this.hE;if(i.Yg.Hg)return this.bE();t.onreadystatechange=()=>this.SE(),t.onprogress=t=>this.cE(t),t.onload=()=>this.TE(),t.onloadend=()=>this.kE(),t.onerror=()=>this.EE(),t.ontimeout=()=>this.PE(),t.onabort=()=>this.bE(),t.open(i.Uk,i.Yu,!0),t.withCredentials=Boolean(i.zk),"responseType"in t&&i.dk&&(i.dk===M.NT?t.responseType="text":t.responseType="arraybuffer"),i.fk.forEach((i,e)=>{t.setRequestHeader(e,i)}),i.Vk&&(t.timeout=i.Vk),this.nT.Yg.Xg(this.xE);const e=i.zT;e?t.send(e):t.send()}SE(){const t=this.AE;void 0!==t&&t.readyState>=2&&!this.RE&&(this.RE=!0,this.CE())}CE(){var t;const i=this.AE,e=function(t){const i=new Ra,e=t.replace(/\r?\n[\t ]+/g," ");return e.split(/\r?\n/).forEach(t=>{const e=t.split(":"),s=e.shift().trim();if(s){const t=e.join(":").trim();i.append(s,t)}}),i}(i.getAllResponseHeaders()||""),s=this.hE;var n;this.DE=new pa,this.aE=new sc({lk:s,dk:s.dk,ck:this.DE.Qy,hk:i.status,vk:i.statusText,fk:e,gk:null!=(n=i.responseURL)?n:e.get("X-Request-URL")}),null==(t=this.yE)||t.Xy(this.aE)}TE(){var t;const i=this.AE;if(void 0===i)return;let e=i.response;if(!it(e)){const t=this.hE.dk;e=t===M.NT?i.responseText:t===M.CT?new ArrayBuffer(0):{}}null==(t=this.DE)||t.Xy(e)}kE(){this.kn()}cE(t){void 0!==this.AE&&(null==this.hE.Gk||this.hE.Gk.call(this.hE,t.loaded,t.lengthComputable?t.total:void 0))}EE(){const t=new m("Network request failed");this.aE?this.Ts(new An(this.aE,t)):this.Ts(new vb(this.hE,t))}PE(){this.Ts(new Kc(this.hE))}bE(){this.Ts(new dt),this.kn()}Ts(t){var i,e;null==(i=null!=(e=this.DE)?e:this.yE)||i.jy(t)}kn(){this.AE=void 0,this.aE=void 0,this.yE=void 0,this.DE=void 0,this.nT.zg()}constructor(t){this.AE=void 0,this.hE=void 0,this.nT=new at,this.aE=void 0,this.yE=new pa,this.DE=void 0,this.RE=!1,this.xE=()=>{var t;this.bE(),null==(t=this.AE)||t.abort()},this.hE=t,this.nT.$g(t.Yg),this.AE=new ud,this.lE()}};function Lb(t,i,e){return new Promise((s,n)=>{if(e&&e.Hg)return n(new dt);const r=t=>{o(),s(t)},h=()=>{o(),n(new dt)},o=()=>{t.removeEventListener(i,r),e&&e.jg(h)};t.addEventListener(i,r),e&&e.Xg(h)})}r();var Ob=class{lk(t){return function(t){if(!bb()||!function(t){try{return Sb.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.Yu))return!1;if(!kb()&&t.Gk)return!1;if(!t.jk&&t.Uk!==X.POST){if(Qt.S_&&Qt.d_<=68)return!1;if(Qt.w_)return!1}return!0}(t)?new Ib(t).oE:new Mb(t).oE}Kk(t){const i=s.navigator;if(i&&i.sendBeacon)i.sendBeacon(t.Yu,NA([t.zT],{type:t.qT}));else{const i=t.qT?{"Content-type":t.qT}:void 0;this.lk(new $n({Uk:X.POST,Yu:t.Yu,zT:t.zT,fk:i,Xk:ob.Lk})).then(t=>{Wr(t.HT())},Ct)}}kn(){}};r(),r();var xu=function(t){return t[t.BE=1]="BE",t[t.NE=2]="NE",t[t.NT=3]="NT",t[t.LE=4]="LE",t[t.OE=9]="OE",t}({});function to(t){return 1===t.FE}function Fb(t){return 3===t.FE}r();var Ub=class extends R{constructor(t){super("Invalid XML",t)}},Vb=class{UE(t){const i=new DOMParser;let e;try{e=i.parseFromString(t,"text/xml")}catch(t){throw new Ub(t)}if(!e||e.getElementsByTagName("parsererror").length>0)throw new Ub;return new jb(e)}},Hb=class t{get FE(){return xu.NE}get VE(){var t;return null!=(t=this.HE.localName)?t:Yb(this.HE.nodeName)}get l(){return this.HE.nodeName}get WE(){var t;return null!=(t=this.HE.namespaceURI)?t:void 0}get qE(){var t;return null!=(t=this.HE.prefix)?t:void 0}get zE(){return this.HE.nodeValue}GE(t){return this.HE.isEqualNode(t.HE)}XE(i){return new t(this.HE.cloneNode(i))}constructor(t){this.HE=void 0,this.HE=t}},Wb=class{get jE(){return void 0===this.QE&&(this.QE=function(t){const i=[];for(let e=0;e<t.length;e++){const s=Kb(t.item(e));s&&i.push(s)}return i}(this.KE.childNodes)),this.QE}get m(){return this.jE.filter(Qb)}YE(t){return this.jE.filter(i=>Qb(i)&&i.JE===t)}ZE(t,i){return this.jE.filter(e=>Qb(e)&&e.VE===i&&e.WE===t)}get $E(){return this.KE}tP(t){this.KE.appendChild(t.$E),this.QE&&this.QE.push(t)}GE(t){return this.KE.isEqualNode(t.$E)}constructor(t){this.KE=void 0,this.QE=void 0,this.KE=t}},qb=class t extends Wb{get FE(){return xu.BE}get VE(){var t;return null!=(t=this.KE.localName)?t:Yb(this.KE.nodeName)}get WE(){var t;return null!=(t=this.KE.namespaceURI)?t:void 0}get qE(){var t;return null!=(t=this.KE.prefix)?t:void 0}get JE(){return this.KE.nodeName}get iP(){return function(t){const i=[];for(let e=0;e<t.length;e++)i.push(new Hb(t.item(e)));return i}(this.KE.attributes)}get eP(){return this.KE.textContent}sP(t){if(this.KE.hasAttribute(t))return this.KE.getAttribute(t)}nP(t,i){if(this.KE.hasAttributeNS(t,i))return this.KE.getAttributeNS(t,i)}rP(t){this.KE.removeAttribute(t)}hP(t,i){this.KE.removeAttributeNS(t,i)}oP(t,i){this.KE.setAttribute(t,i)}aP(t,i,e){this.KE.setAttributeNS(t,i,e)}XE(i){return new t(this.KE.cloneNode(i))}constructor(t){super(t)}},zb=class{get ck(){return this.KE.nodeValue}get $E(){return this.KE}GE(t){return this.ck===t.ck}constructor(t){this.KE=void 0,this.KE=t}},Gb=class t extends zb{get FE(){return xu.NT}XE(i){return new t(this.KE.cloneNode(i))}constructor(t){super(t)}},Xb=class t extends zb{get FE(){return xu.LE}XE(i){return new t(this.KE.cloneNode(i))}constructor(t){super(t)}},jb=class t extends Wb{get FE(){return xu.OE}get uP(){return new qb(this.KE.documentElement)}XE(i){return new t(this.KE.cloneNode(i))}constructor(t){super(t)}};function Qb(t){return to(t)}function Kb(t){switch(t.nodeType){case xu.BE:return new qb(t);case xu.NT:return new Gb(t);case xu.LE:return new Xb(t)}}function Yb(t){const i=t.indexOf(":");return i<0?t:t.substr(i+1)}!function(t){zd=t}(new class extends Tg{get gm(){return this.cP||(this.cP=new gp(RA())),this.cP}get dP(){return this.lP}get fP(){return this.vP}get _P(){return this.gP}get pP(){return!1}get mP(){return DA.IT()}get wP(){return{yP:MA}}get AP(){return od.connection&&od.connection.effectiveType||LA}get bP(){return od.connection&&od.connection.type||"unknown"}get SP(){return this.TP||(this.TP=new Mr(new Ob)),this.TP}UE(t){return this.kP.UE(t)}constructor(...t){super(...t),this.cP=void 0,this.lP=kb(),this.vP=Qt.cg||Qt.e_,this.gP=(Qt.cg||Qt.S_&&Qt.d_<=68||Qt.e_)&&!(Qt.w_&&Qt.A_<3),this.TP=void 0,this.kP=new Vb}}),r(),r(),r(),r(),r(),r();var Jb=class extends _o{},Yc=class extends _o{get ht(){return this.EP()}EP(){return this.PP.ht}xP(){return this.PP.xP()}get IP(){return this.RP()}RP(){return this.PP.IP}get CP(){return this.DP()}set CP(t){this.BP(t)}DP(){return this.PP.CP}BP(t){this.PP.CP=t}get bt(){return this.NP()}NP(){return this.PP.bt}get MP(){return this.LP()}set MP(t){this.OP(t)}LP(){return this.PP.MP}OP(t,i){this.PP.OP(t,i)}get ct(){return this.Nd()}Nd(){return this.PP.ct}get xe(){return this.FP()}FP(){return this.PP.xe}get UP(){return this.VP()}VP(){return this.PP.UP}get lt(){return this.HP()}get WP(){return this.qP()}HP(){return this.PP.lt}qP(){return this.PP.WP}get zP(){return this.GP()}get jP(){return this.QP()}GP(){return this.PP.zP}QP(){return this.PP.jP}get KP(){return this.YP()}YP(){return this.PP.KP}get JP(){return this.ZP()}ZP(){return this.PP.JP}get $P(){return this.tx()}set $P(t){this.ix(t)}tx(){return this.PP.$P}ix(t){this.PP.$P=t}get sx(){return this.nx()}nx(){return this.PP.sx}get hx(){return this.ox()}ox(){return this.PP.hx}get ux(){return this.lx()}set ux(t){this.vx(t)}lx(){return this.PP.ux}vx(t){this.PP.ux=t}get _x(){return this.gx()}gx(){return this.PP._x}get mx(){return this.wx()}set mx(t){this.yx(t)}wx(){return this.PP.mx}yx(t){this.PP.mx=t}get Ax(){return this.bx()}bx(){return this.PP.Ax}get Sx(){return this.Tx()}Tx(){return this.PP.Sx}get kx(){return this.Ex()}Ex(){return this.PP.kx}nu(){return this.PP.nu()}Ta(t,i){return this.PP.Ta(t,i)}Px(t,i,e){return this.PP.Px(t,i,e)}xx(){return this.PP.xx()}get nt(){return this.Ix()}Ix(){return this.PP.nt}get Rx(){return this.Cx()}Cx(){return this.PP.Rx}get rt(){return this.Dx()}Dx(){return this.PP.rt}get Bx(){return this.Nx()}Nx(){return this.PP.Bx}get Mx(){return this.Lx()}set Mx(t){this.Ox(t)}get Fx(){return this.Ux()}Ux(){return this.PP.Fx}Lx(){return this.PP.Mx}Ox(t){this.PP.Mx=t}get Vx(){return this.PP.Vx}set Vx(t){this.PP.Vx=t}Hx(){return this.PP.Hx()}Aa(){return this.PP.Aa()}Wx(){return this.PP.Wx()}gr(t){this.PP.gr(t)}mr(){this.PP.mr()}we(){this.PP.we()}qx(){this.PP.qx()}zx(){this.PP.zx()}Gx(){this.PP.Gx()}be(){this.PP.be()}Xx(){return this.PP.Xx()}jx(){return this.PP.jx()}Qx(){this.PP.Qx()}Kx(){this.PP.Kx()}hr(){return this.PP.hr()}Yx(){this.PP.Yx()}Jx(){this.PP.Jx()}Zx(t){return this.PP.Zx(t)}$x(t){return!1}async kn(){this.Vo(),await this.PP.kn()}tI(t){return this.PP.tI(t)}constructor(t){super(),this.PP=void 0,this.iI=t=>{this.$x(t)||this.So(t)},this.PP=t,t.lw(this.iI)}};r(),r(),r();var Vt=function(t){return t.eI="sI",t.nI="rI",t}({});r(),r(),r(),r();var Oi=class extends wp{get Ca(){return this.hu||(this.hu=this.xa()),this.hu}constructor(t,i){super(t,i),this.hu=void 0}};function Zb(t){return Boolean(t&&t.Ca)}var Js=class extends Oi{constructor(t){super(t)}},Ae=class extends wp{constructor(t){super(t)}},$b=class extends Js{xa(){return new tS(this.Ht.Ca)}constructor(t){super(Vt.eI),this.Ht=void 0,this.Ht=t}},tS=class extends Ae{constructor(t){super("addtrack"),this.track=void 0,this.track=t}};r();var iS=class extends Js{xa(){return new eS(this.Ht.Ca)}constructor(t){super(Vt.nI),this.Ht=void 0,this.Ht=t}},eS=class extends Ae{constructor(t){super("removetrack"),this.track=void 0,this.track=t}};r();var Te=function(t){return t.hI="oI",t.aI="uI",t.cI="dI",t.lI="fI",t.vI="_I",t.gI="pI",t.pa="mI",t.wI="yI",t.AI="bI",t.SI="er",t.TI="kI",t.EI="xI",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality",t}({}),eo=class extends Ne{get II(){return this.RI}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}get V(){return this.RI.length}CI(t){return this.RI[t]}tt(t){return!(!t||pi(this.RI,t))&&(this.RI.push(t),this.hu&&this.hu.push(t.Ca),t.wn(Te.pa,this.Rs),this.So(new $b(t)),!0)}it(t){if(!t)return!1;const i=this.RI.indexOf(t);return!(i<0)&&(ka(this.RI,i),this.hu&&ka(this.hu,i),t.mn(Te.pa,this.Rs),this.So(new iS(t)),!0)}DI(t){return pi(this.RI,t)}hr(){const t=this.RI;for(let i=t.length-1;i>=0;i-=1)this.it(t[i])}kn(){this.hr(),this.Vo()}constructor(){super(),this.RI=[],this.hu=void 0}};r();var nr=class extends Js{xa(){return new sS(this.Ht.Ca)}constructor(t){super(Te.pa),this.Ht=void 0,this.Ht=t}},sS=class extends Ae{constructor(t){super("change"),this.track=void 0,this.track=t}},nS=class extends eo{get BI(){return this.NI}set BI(t){const i=this.NI;if(t!==i){if(i){this.MI(i);for(const e of i.II)t&&t.DI(e)||this.it(e)}if(this.NI=t,t){const i=[];for(const e of t.II)this.tt(e),this.LI(e)&&i.push(e);this.OI(t);for(const t of i)t.So(new nr(t))}}}OI(t){t.wn(Vt.eI,this.FI),t.wn(Vt.nI,this.UI)}MI(t){t.mn(Vt.eI,this.FI),t.mn(Vt.nI,this.UI)}kn(t){!t&&this.NI&&this.NI.kn(),super.kn()}constructor(){super(),this.NI=void 0,this.FI=t=>{const i=t.Ht;this.tt(i)},this.UI=t=>{const i=t.Ht;this.it(i)}}};r(),r(),r();var rS=w.freeze||jo;function hS(t,i,e){w.defineProperty(t,i,{writable:!1,enumerable:!0,value:e})}function oS(t){return rS(t)}function po(t,i){for(const e of w.getOwnPropertyNames(i))w.defineProperty(t,e,w.getOwnPropertyDescriptor(i,e));return t}function Ua(t){if(Gd(t)){const i={};for(const e in t)La.call(t,e)&&(i[e]=Ua(t[e]));return i}if(ul(t)){const i=new Array(t.length);for(let e=0;e<i.length;e++)e in t&&(i[e]=Ua(t[e]));return i}return t}function _t(t,i){return t===i||!(!t||!i)&&(!(!Lu(t)||!Lu(i))&&(Pc(t)?!!Pc(i)&&function(t,i){const e=t.length,s=i.length;if(e!==s)return!1;for(let s=0;s<e;s+=1)if(!_t(t[s],i[s]))return!1;return!0}(t,i):!Pc(i)&&function(t,i){const e=w.keys(t),s=w.keys(i);if(!e||!s||e.length!==s.length)return!1;for(const s of e)if(!La.call(i,s)||!_t(t[s],i[s]))return!1;return!0}(t,i)))}function aS(t,i){if(!Lu(t))return!1;for(const e of i)if(!(e in t))return!1;return!0}function uS(t,i){return t.constructor===i.constructor}function cS(t){const i={};for(const e of w.keys(t)){const s=t[e];null!=s&&(i[e]=s)}return i}function dS(t){const i={};for(const e of w.keys(t)){const s=t[e];if(Pc(s)){const t=[];for(let i=0;i<s.length;i+=1){const e=s[i];if(null!=e){const i=Lu(e)?dS(e):e;t.push(i)}}i[e]=t}else null!=s&&(i[e]=Lu(s)?dS(s):s)}return i}function Zn(t){let i=t;if("string"==typeof i){if(i=i.toLowerCase(),"true"===i)return!0;if("false"===i)return!1}return Boolean(i)}function lS(t){return it(t)?Zn(t):void 0}function co(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function fS(t){const i=co(t);if(S(i))throw new m("Expected a valid number.");return i}function Hi(t){return"string"==typeof t?t:""}function vS(t,i){if(!Pc(t))return[];const e=0|t.length,s=new Array(e);for(let n=0;n<e;n++)s[n]=i(t[n]);return s}function $a(t,i){let e;return e=Pc(t)?vS(t,i):i(t),e}r();var _S=[Vt.eI,Vt.nI,Te.pa];function gS(t){let i;const e=t.II.map(t=>t.Ca);return e.item=i=>{const e=0|i,s=t.CI(e);return s&&s.Ca||void 0},e.addEventListener=(t,e)=>{i.wn(t,e)},e.removeEventListener=(t,e)=>{i.mn(t,e)},i=new mp(e),t.wn(_S,t=>i.So(t.Ca)),e}r();var Tn=function(t){return t[t.VI=0]="VI",t[t.HI=1]="HI",t[t.WI=2]="WI",t[t.qI=3]="qI",t[t.zI=4]="zI",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.GI=7]="GI",t}({});function pS(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function mS(){}function fo(t){const i=[Te.SI,Te.pa,Te.TI,Te.EI,Te.QUALITY_UNAVAILABLE];let e;const s={get activeQuality(){return t.XI&&t.XI.Ca},get enabled(){return t.Rt},set enabled(i){t.Rt=Zn(i)},get id(){return t.o},get uid(){return t.jI},get kind(){return t.Lt},get label(){return t.Th},set label(i){t.Th=Hi(i)},get accessibility(){var i,e;return null!=(e=null==(i=t.QI)?void 0:i.map(pS))?e:[]},get language(){return t.bs},get qualities(){return t.KI.Ca},set targetQuality(i){let e;e=i?function(t,i){const e=[];for(const s of t.KI.II)for(const t of i)s.Ca===t&&e.push(s);return e}(t,ul(i)?i:[i]):[],e.length>0?t.YI=e:t.YI=void 0},get targetQuality(){if(t.YI)return 1===t.YI.length?t.YI[0].Ca:t.YI.map(t=>t.Ca)},addEventListener(t,i){const s=$a(t,Hi);e.wn(s,i)},removeEventListener(t,i){const s=$a(t,Hi);e.mn(s,i)}};return e=new mp(s),t.wn(i,t=>e.So(t.Ca)),w.defineProperty(s,"constructor",{value:mS}),s}function wS(){}function yS(t){const i=gS(t);return w.defineProperty(i,"constructor",{value:wS}),i}var He=class extends nS{xa(){return yS(this)}LI(t){return t.Rt}};r(),r(),r();var xh=function(t){return t.Nh="disabled",t.JI="hidden",t.Kn="showing",t}({});function AS(t){if("string"==typeof t){const i=t.toLowerCase();switch(i){case"disabled":case"hidden":case"showing":return i}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}r();var Mc=function(t){return t.ma="error",t}({});function bS(){}function zh(t){const i=[Te.pa,Te.SI,Te.hI,Te.aI,Te.lI,Te.vI,Te.cI,Te.gI,Te.wI,Te.AI],e=[Mc.ma];let s;const n={get kind(){return t.Lt},get label(){return t.Th},set label(i){t.Th=Hi(i)},get language(){return t.bs},get id(){return t.o},get uid(){return t.jI},get inBandMetadataTrackDispatchType(){return t.ZI},get mode(){return t.Xk},set mode(i){i!==xh.Kn&&i!==xh.JI&&i!==xh.Nh||t.$I(i)},get forced(){return Boolean(t.tR)},get accessibility(){var i,e;return null!=(e=null==(i=t.QI)?void 0:i.map(pS))?e:[]},get type(){return t.Km},get readyState(){return t.Ax},get cues(){return t.Xk===xh.Nh?null:t.L.Ca},get activeCues(){return t.Xk===xh.Nh?null:t.q.Ca},get src(){return t.iR||""},addEventListener(t,i){const e=$a(t,Hi);s.wn(e,i)},removeEventListener(t,i){const e=$a(t,Hi);s.mn(e,i)}};return s=new mp(t),t.wn(i,t=>s.So(t.Ca)),t.wn(e,t=>s.So(t)),w.defineProperty(n,"constructor",{value:bS}),n}function SS(){}function TS(t){const i=gS(t);return w.defineProperty(i,"constructor",{value:SS}),i}var sl=class extends nS{xa(){return TS(this)}LI(t){return t.Xk===xh.Kn}};r(),r();var kS=class extends Ne{get eR(){}get sR(){}get nR(){}get rR(){return!1}get hR(){}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=ES(this)}oR(){}constructor(...t){super(...t),this.hu=void 0}};function ES(t){return{goLive:()=>t.oR(),get isLive(){return t.rR},get latencies(){return t.eR},get videoLatencies(){return t.sR},get audioLatencies(){return t.nR},get manifest(){return t.hR},addEventListener(i,e){t.wn(xS(i),e)},removeEventListener(i,e){t.mn(xS(i),e)}}}var PS=["golive","latencyrecoveryseek"];function xS(t){const i=$a(t,Hi);return(Z(i)?[i]:i).filter(t=>pi(PS,t))}var yl=class extends Ne{set BI(t){const i=this.NI;t!==i&&(i&&this.MI(i),t&&this.OI(t),this.NI=t)}get BI(){return this.NI}get Ca(){return this.hu||(this.hu=ES(this)),this.hu}OI(t){t.wn(PS,this.Rs)}MI(t){t.mn(PS,this.Rs)}oR(){var t;null==(t=this.NI)||t.oR()}get eR(){var t;return null==(t=this.NI)?void 0:t.eR}get sR(){var t;return null==(t=this.NI)?void 0:t.sR}get nR(){var t;return null==(t=this.NI)?void 0:t.nR}get rR(){return!!this.NI&&this.NI.rR}get hR(){var t;return null==(t=this.NI)?void 0:t.hR}kn(){this.Vo(),this.NI&&this.MI(this.NI),this.NI=void 0}constructor(){super(),this.NI=void 0,this.hu=void 0,this.NI=void 0}};r(),r();var IS=function(t){return t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled",t}({});function RS(t){return{appID:t&&t.appID?Hi(t.appID):"8E80B9CE"}}r(),r();var Xh=function(t){return t.Lk="",t.aR="anonymous",t.uR="use-credentials",t}({}),Ba=function(t){return t.cR="application/dash+xml",t.dR="application/vnd.apple.mpegurl",t.lR="application/x-mpegurl",t.fR="video/mp4",t.vR="application/vnd.theoplayer.hesp+json",t._R="application/vnd.theo.hesp+json",t.gR="millicast",t.pR="theolive",t}({});function CS(t){if(null!==t)return t}function DS(t){const i={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:CS(t.streamActivityMonitorID),adTagParameters:Lu(t.adTagParameters)?t.adTagParameters:{},authToken:CS(t.authToken),omidAccessModeRules:CS(t.omidAccessModeRules)};if(t.enableNonce&&(i.enableNonce=!0),"vod"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.videoID&&i.contentSourceID)}(t)){const e=t.videoID,s=t.contentSourceID;return e?s?Mo({},i,{availabilityType:"vod",videoID:e,contentSourceID:s}):void zd.um("A VOD DAI configuration was provided without valid contentSourceID which is required."):void zd.um("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.assetKey)}(t)){const e=t.assetKey;return e?Mo({},i,{availabilityType:"live",assetKey:e}):void zd.um("A Live DAI configuration was provided without valid assetKey which is required.")}zd.um("A DAI configuration was provided without a valid availabilityType which is required.")}function BS(t){return"google-dai"===t.integration?DS(t):Mo({},t,{integration:String(t.integration)})}r(),r(),r(),r(),r(),r();var ze,Pr="titanium",NS="conax",MS="ezdrm",LS="irdeto",OS="vudrm",FS="verimatrix",Ar="keyos",US="drmtoday",VS="expressplay",HS="azure",WS="xstream",qS="vimond",zS="axinom",GS="uplynk",XS="comcast",jS="custom";function QS(t,i){if(null==t)return{};var e,s,n={},r=w.keys(t);for(s=0;s<r.length;s++)e=r[s],i.indexOf(e)>=0||(n[e]=t[e]);return n}function KS(t){return it(t.token&&t.deviceId)}function YS(t){var i;const e=null==(i=t.fairplay)?void 0:i.headers;return void 0!==e&&it(e.PreAuthorization)}function JS(t){const i=t;return KS(i)&&""!==i.token&&""!==i.deviceId&&!YS(i)}r(),r(),r(),r(),r(),function(t){t.mR=!1,t.wR=!1,t.yR=!1,t.AR=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.bR=!1,t.SR=!1,t.LOG_LCEVC_DETAILS=!1}(ze||(ze={})),r();var fs=class extends Ga{get name(){return"ContentProtectionError"}constructor(t,i,e,s,n,r,h,o){super(t,i,e),this.url=void 0,this.status=void 0,this.statusText=void 0,this.response=void 0,this.systemCode=void 0,this.url=s,this.status=n,this.statusText=r,this.response=h,this.systemCode=o}};r();var ZS=class{get kR(){return this.ER}get kS(){return this.mS}PR(t){return function(t){const i=t.onCertificateRequest;if(void 0!==i&&"function"!=typeof i)throw new g("ContentProtectionIntegration.onCertificateRequest is not a function.");const e=t.onCertificateResponse;if(void 0!==e&&"function"!=typeof e)throw new g("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new g("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new g("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new g("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.xR.build(t))}constructor(t,i,e){this.ER=void 0,this.mS=void 0,this.xR=void 0,this.ER=t,this.mS=i,this.xR=e}};r();var $S=function(t){return t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED",t}({}),tT=class{registerContentProtectionIntegration(t,i,e){switch(this.IR(t,i,e)){case $S.FAILED:throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+i+".");case $S.OVERRIDDEN:{const e=ST(i);zd.um("Warning: Overwriting an earlier registered integration for "+t+" and "+e+".");break}case $S.SUCCEEDED:ST(i);0;break}}IR(t,i,e){const s=ST(i);if(!s)return $S.FAILED;let n=$S.SUCCEEDED;for(const i of this.RR.slice())i.kR===t&&i.kS===s&&(n=$S.OVERRIDDEN,oi(this.RR,i));return this.RR.push(new ZS(t,s,e)),n}DR(t,i){return void 0!==this.NR(t,i)}MR(t,i,e){const s=this.NR(t,i);if(!s)throw m("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+i);return s.PR(e)}NR(t,i){for(const e of this.RR)if(e.kR===t&&(!i||e.kS===i))return e}constructor(){this.RR=[]}};tT.LR=new tT,r(),r();var Ro=function(t){return t.OR="moov",t.FR="mvhd",t.UR="trak",t.HR="tkhd",t.WR="mdia",t.qR="mdhd",t.zR="hdlr",t.GR="minf",t.XR="stbl",t.jR="stsd",t.QR="stsc",t.KR="mvex",t.YR="trex",t.JR="avc1",t.ZR="avcC",t.$R="hev1",t.tC="hvc1",t.iC="hvcC",t.eC="vp09",t.sC="vpcC",t.nC="av01",t.rC="av1C",t.hC="dvcC",t.oC="dvvC",t.aC="dvwC",t.uC="dac3",t.cC="dec3",t.dC="dvav",t.lC="dva1",t.fC="dvhe",t.vC="dvh1",t._C="ac-3",t.gC="ec-3",t.pC="colr",t.mC="pasp",t.wC="mp4a",t.yC="esds",t.AC="fLaC",t.bC="dfLa",t.SC="wvtt",t.TC="vttC",t.kC="vlab",t.EC="enca",t.xC="encv",t.IC="moof",t.RC="mfhd",t.DC="traf",t.BC="tfhd",t.NC="trun",t.MC="tfdt",t.LC="senc",t.OC="mdat",t.FC="pssh",t.VC="emsg",t.HC="sidx",t.WC="styp",t.qC="ftyp",t.zC="sinf",t.GC="frma",t.XC="schi",t.jC="tenc",t}({}),iT=function(t){return t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof",t}({}),Jh=function(t){return t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",t}({}),eT=function(t){return t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT",t}({});r();var lc=class t{QC(){return ua(this.ck,this.KC)}YC(){return qe(this.ck,this.KC)}JC(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt16(i.ac,e);return i.Ny(2),s}(this.ck,this.KC)}ZC(){return Cu(this.ck,this.KC)}$C(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt32(i.ac,e);return i.Ny(4),s}(this.ck,this.KC)}tD(){return et(this.ck,this.KC)}iD(t){return T(this.ck,this.KC,t)}eD(t){return function(t,i,e){const s=[];for(let n=0;n<e;n++)s.push(Cu(t,i));return s}(this.ck,this.KC,t)}sD(t){return Wc(this.ck,this.KC,t)}nD(){return vr(this.ck,this.KC)}rD(t){this.KC.Ny(t)}Ly(){return new t(this.ck,this.KC.Ly())}constructor(t,i){this.ck=void 0,this.KC=void 0,this.ck=t,this.KC=i}};r(),r();function sT(t,i){return t.Km===i}function lr(t,i){for(const e of t)if(sT(e,i))return e}var nT=class extends R{get name(){return"DataIncompleteError"}constructor(t,i){super(),this.hD=void 0,this.oD=void 0,this.hD=t,this.oD=i}},Cl=class t{static aD(i){const e=i.ck,s=i.KC,n=t.uD(e,s,!1);if(!n.cD)throw new nT(s.ac,n.m);return n.m}static uD(i,e,s){const n=[];for(;e.ac<i.byteLength;){const r=t.dD(i,e,s);if(!r.cD)return{cD:!1,m:n};n.push(r.lD)}return{cD:!0,m:n}}static fD(i,e){const s=t.dD(i,e,!1);if(!s.cD)throw new nT(e.ac);return s.lD}static vD(i,e){const s=i.ck,n=i.KC;for(;n.ac<s.byteLength;){const i=t.dD(s,n,!1);if(!i.cD)return;if(i.lD.Km===e)return i.lD}}static dD(i,e,s){const n=e.ac,r=t._D(i,e);if(!r.cD)return r;const h=r.gD;let o=h.Vy;if(0===o){if(s)return e.My(n),{cD:!1,pD:1/0};o=i.byteLength-n}const a=n+o;if(a>i.byteLength){const t=a;return e.My(n),{cD:!1,pD:t}}const u={Km:h.Km,ac:n,ck:new lc(Au(i,n,a),new Ui(h.mD))};return e.My(a),{cD:!0,lD:u}}static _D(t,i){const e=i.ac;if(!zp(t,i,8)){return{cD:!1,pD:i.ac+8}}let s=Cu(t,i),n=Wc(t,i,4);if(1===s){if(!zp(t,i,8)){const t=i.ac+8;return i.My(e),{cD:!1,pD:t}}s=et(t,i).toNumber()}if("uuid"===n){if(!zp(t,i,16)){const t=i.ac+16;return i.My(e),{cD:!1,pD:t}}n=Wc(t,i,16)}return{cD:!0,gD:{Km:n,Vy:s,mD:i.ac-e}}}static wD(t,i,e){const s=t.ck,n=t.KC;let r=ao(ta(s),n.ac,s.byteLength);return e&&(r=Gu(r)),n.Ny(r.byteLength),{Km:i,ck:r}}static yD(i,e,s){const n=i.ZC(),{version:r,flags:h}=hT(n);return{Km:e,bD:r,SD:h,ck:t.wD(i,e,s).ck}}};function Gh(t,i){const e=vo(t,i);if(!e)throw new m("Missing "+i+" atom");return e}function vo(t,i){for(const e of t)if(e.Km===i)return e.ck}function rT(t,i){const e=[];for(const s of t)s.Km===i&&e.push(s.ck);return e}function hT(t){return{version:t>>24,flags:new Vp(16777215&t)}}var jt=class t{static TD(i){const e=[],s=Cl.aD(new lc(i,new Ui));for(const i of s){const s=t.kD(i);s&&e.push(s)}return e}static ED(t){return Cl.uD(t,new Ui,!1).m.some(this.PD)}static xD(i){return rT(Cl.aD(new lc(i,new Ui)),Ro.FC).map(t.RD)}static CD(i){return rT(Cl.aD(i.ck),Ro.FC).map(t.RD)}static PD(t){return t.Km===Ro.qC||t.Km===Ro.WC||t.Km===Ro.OR||t.Km===Ro.IC||t.Km===Ro.OC||t.Km===Ro.HC||t.Km===Ro.VC}static kD(i){switch(i.Km){case Ro.OR:return t.DD(i.ck);case Ro.IC:return t.BD(i.ck,i.ac);case Ro.OC:return t.ND(i.ck);case Ro.HC:return t.MD(i.ck);case Ro.VC:return t.LD(i.ck)}}static DD(i){const e=Cl.aD(i),s=Gh(e,Ro.FR),n=rT(e,Ro.UR),r=vo(e,Ro.KR),h=t.OD(s),o=n.map(t.FD),a=r?t.UD(r):void 0;return{Km:Ro.OR,gD:h,Z:o,VD:a}}static OD(t){const i=t.ZC(),{version:e,flags:s}=hT(i),n=1===e?t.tD():t.ZC(),r=1===e?t.tD():t.ZC(),h=t.ZC(),o=1===e?t.tD():t.ZC(),a=t.ZC(),u=t.YC()>>8;t.rD(2),t.rD(8);const c=t.eD(9);t.rD(24);const d=t.ZC();return{Km:Ro.FR,bD:e,SD:s,HD:n,WD:r,qD:h,ct:o,zD:a,Mx:u,GD:c,XD:d}}static FD(i){const e=Cl.aD(i),s=Gh(e,Ro.HR),n=Gh(e,Ro.WR),r=t.jD(s),h=t.QD(n);return{Km:Ro.UR,gD:r,KD:h}}static jD(t){const i=t.ZC(),{version:e,flags:s}=hT(i),n=1===e?t.tD():t.ZC(),r=1===e?t.tD():t.ZC(),h=t.ZC();t.rD(4);const o=1===e?t.tD():t.ZC();t.rD(8);const a=t.JC(),u=t.JC(),c=t.JC()/256;t.rD(2);const d=t.eD(9),l=t.ZC()/65536,f=t.ZC()/65536;return{Km:Ro.HR,YD:s.Oy(1),JD:s.Oy(2),ZD:s.Oy(4),HD:n,WD:r,$D:h,ct:o,tB:a,iB:u,Mx:c,GD:d,Ti:l,Mi:f}}static QD(i){const e=Cl.aD(i),s=Gh(e,Ro.qR),n=Gh(e,Ro.zR),r=Gh(e,Ro.GR),h=t.eB(s),o=t.sB(n),a=t.nB(r);return{Km:Ro.WR,gD:h,rB:o,hB:a}}static eB(t){const i=t.ZC(),{version:e,flags:s}=hT(i),n=1===e?t.tD():t.ZC(),r=1===e?t.tD():t.ZC(),h=t.ZC(),o=1===e?t.tD():t.ZC();t.YC();return t.rD(2),{Km:Ro.qR,bD:e,SD:s,HD:n,WD:r,qD:h,ct:o}}static sB(t){const i=t.ZC(),{version:e,flags:s}=hT(i);t.rD(4);const n=t.sD(4);t.rD(12);const r=t.nD();return{Km:Ro.zR,bD:e,SD:s,oB:n,l:r}}static nB(i){const e=Gh(Cl.aD(i),Ro.XR),s=t.aB(e);return{Km:Ro.GR,uB:s}}static aB(i){const e=Gh(Cl.aD(i),Ro.jR),s=t.cB(e);return{Km:Ro.XR,dB:s}}static cB(i){const e=i.ZC(),{version:s,flags:n}=hT(e),r=(i.ZC(),[]),h=Cl.aD(i);for(const i of h){const e=t.lB(i.ck,i.Km);e&&r.push(e)}return{Km:Ro.jR,bD:s,SD:n,fB:r}}static lB(i,e){let s=t.vB(i,e);return s||(s=t._B(i,e),s||(e===Ro.SC?t.gB(i):void 0))}static vB(i,e){return e===Ro.wC?t.pB(i):e===Ro.AC||e===Ro.AC.toLowerCase()||e===Ro.AC.toUpperCase()?t.mB(i):e===Ro.EC?t.wB(i):e===Ro._C?t.yB(i):e===Ro.gC?t.AB(i):void 0}static _B(i,e){return e===Ro.JR?t.bB(i):e===Ro.$R||e===Ro.tC?t.SB(i,e):e===Ro.eC?t.TB(i,e):e===Ro.nC?t.kB(i,e):e===Ro.xC?t.EB(i):e===Ro.dC||e===Ro.lC||e===Ro.fC||e===Ro.vC?t.PB(i,e):void 0}static xB(t,i){t.rD(6);return{Km:i,IB:t.YC()}}static RB(i,e){const s=t.xB(i,e);i.rD(8);const n=i.YC(),r=i.YC();i.rD(2),i.rD(2);return Mo({},s,{CB:n,DB:r,BB:i.ZC()>>>16})}static NB(i,e){const s=t.xB(i,e);i.rD(2),i.rD(2),i.rD(12);const n=i.YC(),r=i.YC(),h=i.ZC(),o=i.ZC();i.rD(4);const a=i.YC();i.rD(32);const u=i.YC();return i.rD(2),Mo({},s,{Ti:n,Mi:r,MB:h,LB:o,OB:a,FB:u})}static pB(i){const e=t.RB(i,Ro.wC),s=Gh(Cl.aD(i),Ro.yC);return Mo({},e,{UB:t.VB(s)})}static mB(i){const e=t.RB(i,Ro.AC),s=Gh(Cl.aD(i),Ro.bC);return Mo({},e,{HB:t.WB(s)})}static gB(i){const e=t.xB(i,Ro.SC),s=Cl.aD(i),n=Gh(s,Ro.TC),r=t.qB(n),h=vo(s,Ro.kC);return Mo({},e,{zB:r,GB:h?t.XB(h):void 0})}static qB(t){return{Km:Ro.TC,Cd:t.nD()}}static XB(t){return{Km:Ro.kC,Th:t.nD()}}static VB(t){return Cl.yD(t,Ro.yC,!0)}static WB(t){return Cl.yD(t,Ro.bC,!0)}static bB(i){const e=t.NB(i,Ro.JR),s=Cl.aD(i),n=Gh(s,Ro.ZR),r=vo(s,Ro.mC);return Mo({},e,{jB:t.QB(n),KB:r?t.YB(r):void 0})}static SB(i,e){const s=t.NB(i,e),n=Gh(Cl.aD(i),Ro.iC);return Mo({},s,{JB:t.ZB(n)})}static TB(i,e){const s=t.NB(i,e),n=Gh(Cl.aD(i),Ro.sC);return Mo({},s,{$B:t.tN(n)})}static kB(i,e){const s=t.NB(i,e),n=Cl.aD(i),r=Gh(n,Ro.rC),h=t.iN(r),o=vo(n,Ro.pC);return Mo({},s,{eN:h,sN:o?t.nN(o):void 0})}static EB(i){const e=i.Ly(),s=t.NB(i,Ro.xC),n=Gh(Cl.aD(i),Ro.zC),r=t.rN(n);return Mo({},s,{hN:t._B(e,r.aN.oN),uN:r})}static PB(i,e){const s=t.NB(i,e),n=Cl.aD(i);return Mo({},s,{cN:t.dN(n)})}static yB(i){const e=t.RB(i,Ro._C),s=Gh(Cl.aD(i),Ro.uC);return Mo({},e,{lN:t.fN(s)})}static AB(i){const e=t.RB(i,Ro.gC),s=Gh(Cl.aD(i),Ro.cC);return Mo({},e,{vN:t._N(s)})}static wB(i){const e=i.Ly(),s=t.RB(i,Ro.EC),n=Gh(Cl.aD(i),Ro.zC),r=t.rN(n);return Mo({},s,{hN:t.vB(e,r.aN.oN),uN:r})}static rN(i){const e=Cl.aD(i),s=Gh(e,Ro.GC),n=t.gN(s),r=Gh(e,Ro.XC),h=t.pN(r);return{Km:Ro.zC,aN:n,mN:h}}static gN(t){const i=t.sD(4);return{Km:Ro.GC,oN:i}}static pN(i){const e=Gh(Cl.aD(i),Ro.jC),s=t.wN(e);return{Km:Ro.XC,yN:s}}static wN(t){const i=Cu(t.ck,t.KC),{version:e,flags:s}=hT(i),n=t.QC()>0,r=t.QC(),h=t.iD(16);return{Km:Ro.jC,bD:e,SD:s,AN:n,bN:r,SN:h}}static QB(t){return Cl.wD(t,Ro.ZR,!0)}static ZB(t){return Cl.wD(t,Ro.iC,!0)}static dN(t){const i=vo(t,Ro.hC);if(void 0!==i)return Cl.wD(i,Ro.hC,!0);const e=vo(t,Ro.oC);if(void 0!==e)return Cl.wD(e,Ro.oC,!0);const s=vo(t,Ro.aC);if(void 0!==s)return Cl.wD(s,Ro.aC,!0);throw m("Error parsing Dolby Vision configuration box.")}static fN(t){return Cl.wD(t,Ro.uC,!0)}static _N(t){return Cl.wD(t,Ro.cC,!0)}static tN(t){return Cl.wD(t,Ro.sC,!0)}static iN(t){return Cl.wD(t,Ro.rC,!0)}static nN(t){const i=t.sD(4);switch(i){case"nclx":return{TN:iT.ON_SCREEN_COLOURS,kN:t.YC(),EN:t.YC(),PN:t.YC(),xN:!!(128&t.QC())};case"rICC":return{TN:iT.RESTRICTED_ICC_PROFILE};case"prof":return{TN:iT.UNRESTRICED_ICC_PROFILE};default:throw m("Could not parse ColourInformationBox: unknown type '"+i+"'.")}}static YB(t){const i=t.ZC(),e=t.ZC();return{Km:Ro.mC,RN:i,CN:e}}static UD(i){const e=rT(Cl.aD(i),Ro.YR).map(t.DN);return{Km:Ro.KR,Z:e}}static DN(t){const i=t.ZC(),{version:e,flags:s}=hT(i),n=t.ZC(),r=t.ZC(),h=t.ZC(),o=t.ZC(),a=t.ZC();return{Km:Ro.YR,bD:e,SD:s,$D:n,BN:r,NN:h,MN:o,LN:a}}static BD(i,e){const s=Cl.aD(i),n=Gh(s,Ro.RC),r=rT(s,Ro.DC),h=t.ON(n),o=r.map(t.FN);return{Km:Ro.IC,UN:e,gD:h,Z:o}}static ON(t){const i=t.ZC(),{version:e,flags:s}=hT(i),n=t.ZC();return{Km:Ro.RC,bD:e,SD:s,VN:n}}static FN(i){const e=Cl.aD(i),s=Gh(e,Ro.BC),n=rT(e,Ro.NC),r=vo(e,Ro.MC),h=t.HN(s),o=n.map(i=>t.WN(i,h)),a=r?t.qN(r):void 0;return{Km:Ro.DC,gD:h,zN:o,GN:a}}static HN(t){const i=t.ZC(),{version:e,flags:s}=hT(i),n=t.ZC(),r=s.Oy(Jh.BASE_DATA_OFFSET_PRESENT)?t.tD():void 0,h=s.Oy(Jh.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.ZC():void 0,o=s.Oy(Jh.DEFAULT_SAMPLE_DURATION_PRESENT)?t.ZC():void 0,a=s.Oy(Jh.DEFAULT_SAMPLE_SIZE_PRESENT)?t.ZC():void 0,u=s.Oy(Jh.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.ZC():void 0;return{Km:Ro.BC,bD:e,SD:s,$D:n,XN:r,jN:h,NN:o,MN:a,LN:u}}static WN(i,e){const s=i.ZC(),{version:n,flags:r}=hT(s),h=i.ZC(),o=r.Oy(eT.DATA_OFFSET_PRESENT)?i.$C():void 0,a=r.Oy(eT.FIRST_SAMPLE_FLAGS_PRESENT)?i.ZC():void 0,u=[];for(let s=0;s<h;s++){const h=t.QN(i,r,n,e);0===s&&void 0!==a&&(h.SD=a),u.push(h)}return{Km:Ro.NC,bD:n,SD:r,KN:h,UN:o,YN:a,JN:u}}static QN(t,i,e,s){return{ct:i.Oy(eT.SAMPLE_DURATION_PRESENT)?t.ZC():s.NN,Vy:i.Oy(eT.SAMPLE_SIZE_PRESENT)?t.ZC():s.MN,SD:i.Oy(eT.SAMPLE_FLAGS_PRESENT)?t.ZC():s.LN,ZN:i.Oy(eT.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===e?t.ZC():t.$C():void 0}}static LD(t){const i=t.ck,e=t.KC,s=Cu(i,e),{version:n,flags:r}=hT(s);if(1===n){const t=Cu(i,e),s=et(i,e),h=Cu(i,e),o=Cu(i,e),a=Kp(i,e),u=Kp(i,e),c=gl(ta(i),e.ac,i.byteLength);return e.Ny(c.byteLength),{Km:Ro.VC,bD:n,SD:r,$N:a,zE:u,qD:t,tM:s,iM:h,o:o,eM:c}}{const t=Kp(i,e),s=Kp(i,e),h=Cu(i,e),o=Cu(i,e),a=Cu(i,e),u=Cu(i,e),c=gl(ta(i),e.ac,i.byteLength);return e.Ny(c.byteLength),{Km:Ro.VC,SD:r,bD:n,$N:t,zE:s,qD:h,sM:o,iM:a,o:u,eM:c}}}static ND(t){return Cl.wD(t,Ro.OC,!1)}static RD(i){const e=i.ck,s=i.KC,n=Gu(ta(e)).buffer,r=Cu(e,s),{version:h,flags:o}=hT(r),a=t.nM(e,s),u=[];if(h>0){const t=Cu(e,s);for(let i=0;i<t;i++){const t=T(e,s,16);u.push(t)}}const c=Cu(e,s),d=new j(n,s.ac,c);return s.Ny(e.byteLength),{Km:Ro.FC,bD:h,SD:o,rM:a,hM:u,oM:c,ck:d,aM:n}}static nM(t,i){let e="";for(let s=0;s<4;s++){const s=ua(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=ua(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=ua(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=ua(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<6;s++){const s=ua(t,i).toString(16);e+=1===s.length?"0"+s:s}return e.toLowerCase()}static MD(t){const i=t.ck,e=t.KC,s=Cu(i,e),{version:n,flags:r}=hT(s),h=Cu(i,e),o=Cu(i,e);let a,u;0===n?(a=Wt.fromBits(Cu(i,e),0,!0),u=Wt.fromBits(Cu(i,e),0,!0)):(a=et(i,e),u=et(i,e)),e.Ny(2);const c=qe(i,e),d=[];for(let t=0;t<c;t+=1){const t=Cu(i,e),s=t>>31&1,n=2147483647&t,r=Cu(i,e),h=Cu(i,e),o=h>>31&1,a=h>>28&7,u=268435455&h;d.push({uM:s,cM:n,ct:r,dM:o,lM:a,fM:u})}return{Km:Ro.HC,bD:n,SD:r,vM:h,qD:o,_M:a,gM:u,pM:c,mM:d}}static qN(t){const i=t.ck,e=t.KC,s=Cu(i,e),{version:n,flags:r}=hT(s);let h;return h=0===n?Wt.fromBits(Cu(i,e),0,!0):et(i,e),{Km:Ro.MC,bD:n,SD:r,GN:h}}},oT={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function aT(t){if(!t)return!0;const i=t.licenseAcquisitionURL,e=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,h=t.queryParameters;return!(i||e||s||n||r||h)}function uT(t){return t&&void 0!==t.licenseAcquisitionURL}var cT=uT,dT=uT;function lT(t){if(!t)return!0;if(gT(t))return!1;const i=t.fairplay,e=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return aT(i)&&aT(e)&&aT(s)&&void 0===n&&aT(r)}function fT(t){const i=JS(t),e=function(t){var i;const e=t;return YS(e)&&""!==(null==(i=e.fairplay)?void 0:i.headers.PreAuthorization)&&!KS(e)}(t);return(!i||!e)&&(i||e)}function vT(t){return t.integration===LS}function _T(t){const i=t;if(!i)return!1;if(lT(i))return!1;const e=i.fairplay,s=i.playready,n=i.widevine,r=i.clearkey;if(gT(t))return!0;if(e&&!function(t){const i=t;return i&&(void 0!==i.certificateURL||void 0!==i.certificate)}(e))return!1;if(s&&!cT(s))return!1;if(n&&!dT(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(i.integration){if(tT.LR.DR(i.integration))return!0;switch(i.integration){case Pr:if(!function(t){const i=t,e=i.integration===Pr;return e&&(pT(t)||mT(t))}(t))return!1;break;case OS:if(!wT(t))return!1;break;case FS:if(!function(t){const i=t;return i.integration===FS}(t))return!1;break;case LS:if(!vT(t))return!1;break;case NS:if(!fT(t))return!1;break;case MS:if(!function(t){const i=t;return i.integration===MS}(t))return!1;break;case Ar:if(!gT(t))return!1;break;case US:if(!function(t){const i=t;return i.integration===US&&(void 0!==i.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(i))}(t))return!1;break;case VS:if(!function(t){const i=t;return i.integration===VS}(t))return!1;break;case WS:if(!yT(t))return!1;break;case qS:if(!function(t){return t.integration===qS}(t))return!1;break;case zS:if(!AT(t))return!1;break;case HS:if(!function(t){const i=t;return i.integration===HS&&void 0!==i.token}(t))return!1;break;case GS:if(!function(t){const i=t;return i.integration===GS}(t))return!1;break;case XS:if(!function(t){const i=t;return i&&it(i.releasePid)&&it(i.accountId)&&it(i.token)}(t))return!1;break;case jS:return!0;default:return!1}}return!0}function gT(t){return t.integration===Ar}function pT(t){return void 0!==t.authToken}function mT(t){const i=t;return void 0!==i.accountName&&void 0!==i.customerName&&void 0!==i.portalId}function wT(t){const i=t;return i.integration===OS&&void 0!==i.token}function yT(t){const i=t;return i&&i.integration===WS&&Z(i.ticketAcquisitionURL)&&Z(i.streamId)}function AT(t){const i=t;return i.integration===zS&&void 0!==i.token}function bT(t,i){const e=i[t];var s;const n=null!=(s=null==e?void 0:e.licenseAcquisitionURL)?s:oT[t];var r;const h=null!=(r=null==e?void 0:e.customdata)?r:i.customdata,o=h?{customData:h}:{};var a;const u=Mo({},null!=(a=null==e?void 0:e.headers)?a:{},o),c=null!=e?e:{},{customdata:d}=c;return Mo({},QS(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function ST(t){switch(t.toLowerCase()){case"widevine":case Wg:return Wg;case"playready":case Vg:return Vg;case"fairplay":case Qs:return Qs}}function TT(t,i){switch(t){case Mg:return function(t){const i={},e=jt.xD(new DataView(t));for(const t of e)i[t.rM]=t.aM;return i}(i);case Lg:case Og:return function(t){return{[Kg]:t}}(i);case Fg:return function(t){return{[jg]:t}}(i);default:throw new Ga(Vo.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}async function kT(t,i){return void 0===i&&(i=!1),!(!t.widevine||!await zd.Am())||(!(!t.playready||!await zd.ym())||(!(!t.clearkey||!await zd.pm())||!(i||!t.fairplay||!await zd.wm())))}function ml(t,i,e){const s=function(t,i,e){var s;const{useCredentials:n,crossOrigin:r}=function(t,i){let e=Xh.Lk;return t.useCredentials?e=Xh.uR:t.crossOrigin&&(e=JT(t.crossOrigin)),e===Xh.Lk&&i&&i.vr&&i.vr[360]&&(e=Xh.aR),{useCredentials:e===Xh.uR,crossOrigin:e}}(t,i);let h=t.liveOffset;it(h)||(h=e&&it(e.liveOffset)?e.liveOffset:void 0);let o=t.timeServer;it(o)||(o=i&&it(i.timeServer)?i.timeServer:void 0);let a=t.hlsDateRange;it(a)||(a=e&&it(e.hlsDateRange)?Boolean(e.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),d=Boolean(t.lowLatency),l=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),v=it(t.dash)?PT(t.dash):void 0,_=it(t.hls)?xT(t.hls):void 0,g=DT(CT(t.abr),null==e?void 0:e.abr),p=lS(t.lcevc),m=it(t.ignoreEmbeddedTextTrackTypes)?fk(t.ignoreEmbeddedTextTrackTypes):[];var w;const y=XT(null!=(w=t.seamlessSwitchStrategy)?w:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch),A=zT(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:h,timeServer:o,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:d,useNativePlayback:l,useManagedMediaSource:f,dash:v,hls:_,abr:g,lcevc:p,ignoreEmbeddedTextTrackTypes:m,seamlessSwitchStrategy:y,latencyConfiguration:A}}(t,i,e),n=CS(t.src);let r=t.type;r||(r=t.src?_u(t.src):void 0);const h=function(t,i){let e;e=it(t.contentProtection)?t.contentProtection:it(t.drm)?t.drm:it(i)&&it(i.contentProtection)?i.contentProtection:it(i)&&it(i.drm)?i.drm:void 0;return ET(e)}(t,i);return Mo({},s,{src:n,type:r,contentProtection:h,ssai:it(t.ssai)?BS(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function ET(t){return _T(t)&&t.integration&&t.integration===Ar?function(t){const i=bT(an.zm,t),e=bT(an.qm,t),s=t[an.jm]&&bT(an.jm,t);return Mo({integration:"keyos",widevine:i,playready:e},s?{fairplay:s}:{})}(t):t}function PT(t){return{useSeamlessPeriodSwitch:XT(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:lS(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?co(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:lS(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:lS(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:lS(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards),segmentRelativeVttTiming:lS(null==t?void 0:t.segmentRelativeVttTiming),forceRecreateMediaSourceOnAudioSwitch:lS(null==t?void 0:t.forceRecreateMediaSourceOnAudioSwitch)}}function xT(t){return{discontinuityAlignment:IT(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:Zn(null==t?void 0:t.delaySubtitlePreload)}}function IT(t){if(!t||!Z(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}r(),r(),r(),r();var Ci=function(t){return t.Dk="audio",t.Bk="video",t.NT="text",t.Nk="image",t.pk="unknown",t}({});function RT(t){return"audio"===t||"video"===t}function CT(t){if(!it(t))return;return BT(vS(null==t?void 0:t.preferredAudioCodecs,Hi),vS(null==t?void 0:t.preferredVideoCodecs,Hi),lS(null==t?void 0:t.restrictToPlayerSize))}function DT(t,i){if(!it(t)&&!it(i))return;var e;return BT(NT(null==t?void 0:t.preferredAudioCodecs,null==i?void 0:i.preferredAudioCodecs),NT(null==t?void 0:t.preferredVideoCodecs,null==i?void 0:i.preferredVideoCodecs),null!=(e=null==t?void 0:t.restrictToPlayerSize)?e:null==i?void 0:i.restrictToPlayerSize)}function BT(t,i,e){if(0!==t.length||0!==i.length||void 0!==e)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===i.length?void 0:i,restrictToPlayerSize:e}}function NT(t,i){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=i?i:[]}function MT(t,i){if(void 0!==i)switch(t){case Ci.Bk:return i.preferredVideoCodecs;case Ci.Dk:return i.preferredAudioCodecs;default:return}}r(),r(),r();var Vi=!1;r();var Do=function(t){return t.wM="canplay",t.yM="canplaythrough",t.AM="loadeddata",t.bM="loadedmetadata",t.wI="readystatechange",t.SM="waiting",t.TM="playing",t}({}),K=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function LT(t,i,e){return e?t<=i:t<i}r();var ve=class t{get kM(){return this.EM.slice()}Tn(t){return this.EM[2*t]}An(t){return this.EM[2*t+1]}PM(t){return this.xM[2*t]}IM(t){return this.xM[2*t+1]}_s(){const t=this;return{get length(){return t.V},start(i){const e=0|i;return t.RM(e),t.Tn(e)},end(i){const e=0|i;return t.RM(e),t.An(e)}}}CM(){const i=new Array(2*this.V),e=new Array(2*this.V);for(let t=0;t<this.V;t++)i[2*t]=this.Tn(t),i[2*t+1]=this.An(t),e[2*t]=!0,e[2*t+1]=!0;return new t(i,e)}RM(t){if(t<0)throw new m("The index provided ("+t+") must be non-negative");if(t>=this.V)throw new m("The index provided ("+t+") is greater than the maximum bound ("+this.V+")")}DM(t){if(0===this.V)return 0;if(this.Cr(t))return t;if(t<=this.Tn(0))return this.Tn(0);if(t>=this.An(this.V-1))return this.An(this.V-1);{let i=0,e=1/0;for(let s=0;s<this.V;s++){const n=this.Tn(s),r=_.abs(n-t);r<e&&(i=n,e=r);const h=this.An(s),o=_.abs(h-t);o<e&&(i=h,e=o)}return i}}Mn(i){let e=0,s=0;const n=[],r=[];for(;e<this.V&&s<i.V;){const t=this.Tn(e),h=this.An(e),o=this.PM(e),a=this.IM(e),u=i.Tn(s),c=i.An(s),d=i.PM(s),l=i.IM(s),f=_.max(t,u),v=_.min(h,c);let g,p;g=t===u?o&&d:f===t?o:d,p=h===c?a&&l:v===h?a:l,(f<v||g&&p&&f===v)&&(n.push(f,v),r.push(g,p)),h===c?(e+=1,s+=1):h<c?e+=1:s+=1}return new t(n,r)}BM(){const i=this.NM(),e=i.V;if(0===e)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=i.Tn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!i.PM(0)));for(let t=0;t<e-1;t++)s.push(i.An(t),i.Tn(t+1)),n.push(!i.IM(t),!i.PM(t+1));const h=i.An(e-1);return h!==1/0&&(s.push(h,1/0),n.push(!i.IM(e-1),!1)),new t(s,n)}MM(i){let e=0,s=0;const n=this.V,r=i.V,h=new Array(2*(n+r)),o=new Array(2*(n+r));let a=0;for(;e<n&&s<r;){const t=this.Tn(e),n=this.An(e),r=i.Tn(s),u=i.An(s);t<r||t===r&&n<u?(h[a]=t,h[a+1]=n,o[a]=this.PM(e),o[a+1]=this.IM(e),e++):(h[a]=r,h[a+1]=u,o[a]=i.PM(s),o[a+1]=i.IM(s),s++),a+=2}for(;e<n;)h[a]=this.Tn(e),h[a+1]=this.An(e),o[a]=this.PM(e),o[a+1]=this.IM(e),e++,a+=2;for(;s<r;)h[a]=i.Tn(s),h[a+1]=i.An(s),o[a]=i.PM(s),o[a+1]=i.IM(s),s++,a+=2;return new t(h,o)}LM(i){void 0===i&&(i=0);const e=this.V;if(e<2)return this;const s=[],n=[];let r=this.Tn(0),h=this.An(0),o=this.PM(0),a=this.IM(0);for(let t=1;t<e;t++){const e=this.Tn(t),u=this.An(t);let c=this.PM(t),d=this.IM(t);r<e&&h>u||(r===e&&(c=o||c,o=c),h===u&&(d=a||d,a=d),LT(e,h+i,a||c)?(h=u,a=d):(s.push(r,h),n.push(o,a),r=e,h=u,o=c,a=d))}return s.push(r,h),n.push(o,a),new t(s,n).NM()}NM(){const i=[],e=[];for(let t=0;t<this.V;t++){const s=this.Tn(t),n=this.An(t),r=this.PM(t),h=this.IM(t);s===n?(r||h)&&(i.push(s,n),e.push(!0,!0)):(i.push(s,n),e.push(r,h))}return new t(i,e)}OM(t){if(0===this.V)return t;if(0===t.V)return this;return this.MM(t).LM()}FM(t){const i=this.NM(),e=t.NM(),s=i.BM(),n=e.BM(),r=s.Mn(e),h=n.Mn(i);return r.OM(h)}Ny(i){if(0===this.V||0===i)return this;const e=[],s=[];for(let t=0;t<this.V;t++){const n=this.Tn(t)+i,r=this.An(t)+i;e.push(n,r),s.push(this.PM(t),this.IM(t))}return new t(e,s)}UM(t){return 0===this.V||0===t.V?this:this.NM().Mn(t.NM().BM())}Cr(t,i){return this.VM(t,i)>=0}HM(t,i,e,s,n){return this.WM(t,i,e,s,n)>=0}qM(t,i,e,s,n){return this.zM(t,i,e,s,n)>=0}GM(t){if(t.V!==this.V)return!1;for(let i=0;i<this.V;i++)if(this.Tn(i)!==t.Tn(i)||this.An(i)!==t.An(i)||this.PM(i)!==t.PM(i)||this.IM(i)!==t.IM(i))return!1;return!0}XM(i){const e=[],s=[];for(let t=0;t<this.V;t++){const n=this.Tn(t),r=this.An(t),h=this.PM(t),o=this.IM(t);i(n,r,h,o)&&(e.push(n,r),s.push(h,o))}return new t(e,s)}zM(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,h=i+n;for(let t=0;t<this.V;t+=1)if(LT(this.Tn(t),h,!s||this.PM(t))&&LT(r,this.An(t),!e||this.IM(t)))return t;return-1}WM(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,h=i-n;for(let t=0;t<this.V;t+=1)if(LT(this.Tn(t),r,!e||this.PM(t))&&LT(h,this.An(t),!s||this.IM(t)))return t;return-1}VM(t,i){return this.WM(t,t,!0,!0,i)}jM(t,i){void 0===i&&(i=0);const e=t+i;for(let t=this.V-1;t>=0;t-=1)if(LT(this.Tn(t),e,this.PM(t)))return t;return-1}QM(t,i){void 0===i&&(i=0);const e=t-i;for(let t=0;t<this.V;t+=1)if(LT(e,this.An(t),this.IM(t)))return t;return-1}KM(t,i){void 0===i&&(i=0);const e=t+i;for(let t=0;t<this.V;t+=1)if(this.Tn(t)>e)return t;return-1}YM(i){return this.RM(i),new t([this.Tn(i),this.An(i)],[this.PM(i),this.IM(i)])}JM(t,i){const e=this.VM(t,i);return e<0?void 0:this.YM(e)}get ZM(){let t=0;for(let i=0;i<this.V;i++){t+=this.An(i)-this.Tn(i)}return t}static jn(i){const e=[];for(let t=0;t<i.length;t++)e.push(i.start(t),i.end(t));return new t(e)}static $M(i){return new t([i,i],[!0,!0])}static tL(i,e){return i<=e?new t([i,e]):t.iL()}static iL(){return OT}static eL(){return FT}constructor(t,i){this.V=void 0,this.EM=void 0,this.xM=void 0,this.V=t.length>>1,this.EM=t,this.xM=i||function(t){const i=new Array(2*t);for(let e=0,s=0;e<t;e+=1,s+=2)i[s]=!0,i[s+1]=!1;return i}(this.V)}},OT=new ve([]),FT=new ve([0,1/0]),Ot=.92,Jt=1.08,UT=.25,VT=class extends Ne{get sL(){return this.We&&this.ho}get nL(){return this.rL}get Rt(){return this.We}set Rt(t){this.We=t,t?this.Tn():this.Xx()}hL(t){this.oL.push(t),this.aL()}uL(t){oi(this.oL,t),this.aL()}aL(){this.rL=this.cL(),this.ho&&this.dL()}cL(){const t=this.lL,i=function(t,i){const e=i-t.targetOffset;return{minimumOffset:t.minimumOffset+e,targetOffset:t.targetOffset+e,maximumOffset:t.maximumOffset+e,forceSeekOffset:t.forceSeekOffset+e,minimumPlaybackRate:t.minimumPlaybackRate,maximumPlaybackRate:t.maximumPlaybackRate,leniency:t.leniency}}(this.fL,this.vL),e=[i,...this.oL],s=e.reduce((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.minimumOffset)?e:0)},t),n=e.reduce((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.targetOffset)?e:0)},s+UT),r=e.reduce((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.maximumOffset)?e:0)},n+UT);return{minimumOffset:s,targetOffset:n,maximumOffset:r,forceSeekOffset:e.reduce((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.forceSeekOffset)?e:0)},r+UT),minimumPlaybackRate:e.reduce((t,i)=>{var e;return _.min(t,null!=(e=i.minimumPlaybackRate)?e:Ot)},Ot),maximumPlaybackRate:e.reduce((t,i)=>{var e;return _.max(t,null!=(e=i.maximumPlaybackRate)?e:Jt)},Jt)}}_L(){var t;const i=null==(t=ve.jn(this.oa.IP).JM(this.oa.MP))?void 0:t.An(0),e=void 0!==i?i-this.oa.MP:0;this.gL=_.min(this.gL,e),this.pL+=1}mL(){if(this.pL<10)return;const t=.25-this.gL,i=ur(this.vL+t,this.vL-.1,this.vL+.1);this.vL=ur(i,this.wL,this.yL),this.gL=1/0,this.pL=0}AL(){this.bL(),this.fE=zd.Og(()=>this.dL(),500)}bL(){void 0!==this.fE&&(zd.Lg(this.fE),this.fE=void 0)}Tn(){this.We&&this.SL&&(this.ho||this.TL.wn(d._y,this.dL),this.kL=zd.fm(()=>this._L(),1e3),this.EL=zd.fm(()=>this.mL(),6e4),this.AL(),this.ho=!0)}Xx(){this.ho&&(this.bL(),this.kL&&zd.vm(this.kL),this.EL&&zd.vm(this.EL),this.TL.mn(d._y,this.dL),this.PL(1),this.ho=!1)}zg(){this.Xx(),this.oa.mn(Do.SM,this.xL),this.oa.mn(Do.TM,this.IL),this.Vo()}PL(t){this.TL.CL.RL||this.oa.ux!==t&&(this.oa.ux=t)}get DL(){return this.oa.BL}constructor(t,i,e){var s;super(),this.oa=void 0,this.TL=void 0,this.ho=!1,this.We=!1,this.vL=void 0,this.rL=void 0,this.wL=void 0,this.yL=void 0,this.fL=void 0,this.oL=[],this.SL=!1,this.lL=0,this.fE=void 0,this.pL=0,this.gL=1/0,this.kL=void 0,this.EL=void 0,this.xL=()=>{const t=this.TL.IP,i=this.TL.MP,e=t.JM(i);e&&(this.lL=ur(e.An(0)-i,this.lL,.5),this.aL())},this.IL=()=>{this.SL=!0,this.oa.mn(Do.TM,this.IL),this.We&&this.Tn()},this.dL=()=>{this.bL(),this.AL();const t=this.DL;if(!t)return;const i=this.NL();if(t>this.rL.forceSeekOffset)return this.So(new wp("latencyrecoveryseek")),void this.oR();const{minimumOffset:e,targetOffset:s,maximumOffset:n}=this.rL,r=this.TL.ux;if(!this.ML(i,e,n))if(i>n&&this.LL()){const t=this.rL.maximumPlaybackRate;Vi,this.PL(t)}else if(i<e&&!zd.Zs.pp){const t=this.rL.minimumPlaybackRate;Vi,this.PL(t)}else if(r>1&&i<s){const t=1;Vi,this.PL(t)}else if(r<1&&i>s){const t=1;Vi,this.PL(t)}},this.oa=t,this.TL=i,this.fL=e,this.wL=e.targetOffset,this.yL=e.targetOffset+(null!=(s=e.leniency)?s:0),this.vL=e.targetOffset,this.rL=this.cL(),this.oa.wn(Do.SM,this.xL),this.oa.wn(Do.TM,this.IL)}},HT=.66,WT=1.5,qT=3;function zT(t){if(!it(t))return;const i=zd.Zs.mp?10:0,e=t.targetOffset;var s;var n;var r;var h;var o;var a;return{minimumOffset:null!=(s=t.minimumOffset)?s:e*HT,targetOffset:e,maximumOffset:null!=(n=t.maximumOffset)?n:e*WT,forceSeekOffset:_.max(null!=(r=t.forceSeekOffset)?r:e*qT,i),minimumPlaybackRate:null!=(h=t.minimumPlaybackRate)?h:Ot,maximumPlaybackRate:null!=(o=t.maximumPlaybackRate)?o:Jt,leniency:null!=(a=t.leniency)?a:void 0}}var Oh=function(t){return t.OL="auto",t.FL="always",t.UL="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only",t}({}),GT=function(t){return t.UPLYNK="uplynk",t.MEDIATAILOR="mediatailor",t}({});function XT(t){if(!t||!Z(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}r(),r();var jT=function(t){return t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled",t}({});r();var QT=!1;r();var KT=function(t){return t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll",t}({});r();var nh=function(t){return t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange",t.MILLICAST="millicast",t}({});function YT(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":case"millicast":return!0;default:return!1}}function _u(t){const i=null==t?void 0:t.match(/\b(?:m3u8|mpd)\b/i);if(!i)return Ba.fR;switch(i[0].toLowerCase()){case"mpd":return Ba.cR;case"m3u8":return Ba.dR;default:return Ba.fR}}function JT(t){switch(t){case Xh.aR:case Xh.uR:return t;default:return Xh.Lk}}function ZT(t){if(!t)return!1;const i=t.toLowerCase();return Vh(i,Ba.cR)}function $T(t){if(!t)return!1;const i=t.toLowerCase();return Vh(i,Ba.dR)||Vh(i,Ba.lR)}function tk(t){return Lu(t)&&Lu(t.ssai)&&"google-dai"===t.ssai.integration}function Qi(t){return Lu(t)&&"uplynk"===t.integration}function ik(t){return Lu(t)&&"theolive"===t.type}function ek(t){return Lu(t)&&"mediatailor"===t.integration}function bl(t){return Lu(t)&&"millicast"===t.type}function sk(t){if(t.sources)if(ul(t.sources)){for(const i of t.sources)if(bl(i))return!0}else if(Lu(t.sources))return bl(t.sources);return!1}function nk(t){if(Z(t))return!t;if(Qi(t))return!t.id;if(tk(t)){const i=t.ssai,e="live"===i.availabilityType&&i.assetKey,s="vod"===i.availabilityType&&i.contentSourceID&&i.videoID;return Boolean(e&&s)}return bl(t)?!t.src||!t.streamAccountId:!t.src}function pr(t){return Boolean(Lu(t)&&Z(t.src))}function rk(t){return t.type===Ba.vR||t.type===Ba._R}function hk(t){return Z(t)||pr(t)||tk(t)||Qi(t)||bl(t)}function ok(t){if(t){if(hk(t))return nk(t);for(const i of t)if(!nk(i))return!1;return!0}return!0}function ak(){return{crossOrigin:Xh.Lk,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:Oh.OL,latencyConfiguration:void 0}}function uk(){return Mo({},ak(),{src:void 0,type:Ba.fR,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function ck(t){const i={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:jT.ENABLED,googleIma:{useNativeIma:!1,useAdUiElementForSsai:!0,bitrate:-1,language:void 0,uiElements:void 0,allowSeekingForGoogleDai:!1},theoads:QT,allowSkipAdBreak:!1};return void 0===t||(void 0!==t.preload&&(i.preload=function(t){return"none"===t?KT.NONE:KT.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(i.showCountdown=Zn(t.showCountdown)),void 0!==t.vpaidMode&&(i.vpaidMode=function(t){switch(t){case"insecure":return jT.INSECURE;case"disabled":return jT.DISABLED;default:return jT.ENABLED}}(t.vpaidMode)),ul(t.allowedMimeTypes)&&(i.allowedMimeTypes=t.allowedMimeTypes.filter(Z)),void 0!==t.googleIma&&(i.googleIma=function(t){return void 0===t?{useNativeIma:!1,useAdUiElementForSsai:!0,bitrate:-1,language:void 0,uiElements:void 0,allowSeekingForGoogleDai:!1}:{useNativeIma:Zn(t.useNativeIma),useAdUiElementForSsai:null==(i=lS(t.useAdUiElementForSsai))||i,bitrate:null!=(e=t.bitrate)?e:-1,language:it(t.language)?Hi(t.language):void 0,uiElements:t.uiElements,allowSeekingForGoogleDai:Zn(t.allowSeekingForGoogleDai)};var i,e}(t.googleIma)),void 0!==t.theoads?i.theoads=Zn(t.theoads):i.theoads=QT,i.allowSkipAdBreak=Zn(t.allowSkipAdBreak)),i}function dk(t){if(!Pc(t))return[];const i=[];for(const e of t)Lu(e)&&i.push(e);return i}function lk(t){return Z(t.src)||bl(t)}function fk(t){return ul(t)?t.filter(YT):[]}r(),r();var mh=function(t){return t[t.VL=0]="VL",t[t.Qn=1]="Qn",t[t.HL=2]="HL",t[t.WL=3]="WL",t[t.qL=4]="qL",t}({}),G=class extends wp{constructor(t,i=mh.VL){super(d.Cw),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var hl=class extends wp{constructor(t){super(d.jw),this.currentTime=void 0,this.currentTime=t}};r();var Tc=class extends wp{constructor(t){super(d.uo),this.currentTime=void 0,this.currentTime=t}};r();var ut=class extends wp{constructor(t,i=mh.Qn){super(Do.bM),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var Rs=class extends wp{constructor(t){super(d.Rw),this.duration=void 0,this.duration=t}};r();var aa=class extends wp{constructor(t,i){super(d.Kw),this.currentTime=void 0,this.playbackRate=void 0,this.currentTime=t,this.playbackRate=i}};r();var Si=class extends wp{constructor(t,i){super(d._y),this.currentTime=void 0,this.currentProgramDateTime=void 0,this.currentTime=t,this.currentProgramDateTime=i}};r();var At=class extends wp{constructor(t){super(d.Bw),this.currentTime=void 0,this.currentTime=t}};r();var ot=class extends wp{constructor(t,i=mh.HL){super(Do.AM),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var F=class extends wp{constructor(t){super(d.$w),this.currentTime=void 0,this.currentTime=t}};r();var Es=class extends wp{constructor(t){super(d.Zw),this.currentTime=void 0,this.currentTime=t}};r();var Ze=class extends wp{constructor(t,i){super(d.gy),this.currentTime=void 0,this.volume=void 0,this.currentTime=t,this.volume=i}};r();var lo=class extends wp{constructor(t,i=mh.WL){super(Do.wM),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var qt=class extends wp{constructor(t,i=mh.qL){super(Do.yM),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var ou=class extends wp{constructor(t,i){super(Do.wI),this.currentTime=void 0,this.readyState=void 0,this.currentTime=t,this.readyState=i}};r();var Pi=class extends Oi{get error(){return this.errorObject.message}xa(){return this}constructor(t){super(Mc.ma),this.errorObject=void 0,this.errorObject=t}};async function $i(t,i,e,s,n){void 0===e&&(e=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(i)}catch(t){if(sa(t),r<e){const t=_.min(s*2**r,n);r++,await Er(t,i);continue}throw t}}r();var vk={maxRetries:void 0,minimumBackoff:200,maximumBackoff:3e4},_k=Mo({},vk,{maxRetries:1/0});r();var tc=function(t){return t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture",t.NATIVE_PICTURE_IN_PICTURE="native-picture-in-picture",t}({}),gk=function(t){return t.NONE="none",t.ALL="all",t.CONTENT="content",t}({});function pk(t){switch(t){case"all":case"content":return t;default:return"none"}}function mk(t){const i=Ua(t||{});return i.libraryLocation&&(i.libraryLocation=fn(i.libraryLocation,!0)),i.isEmbeddable=Boolean(i.isEmbeddable),i.cast=function(t){const i=RS(t?t.chromecast:void 0),e=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:i,strategy:e}}(i.cast),i.ads=ck(i.ads),i.analytics=dk(i.analytics),i.mutedAutoplay=pk(i.mutedAutoplay),i.allowNativeFullscreen=Boolean(i.allowNativeFullscreen),i.allowMixedContent=Boolean(i.allowMixedContent),i.persistVolume=Boolean(i.persistVolume),i.liveOffset=function(t){return Number(t)||void 0}(i.liveOffset),i.hlsDateRange=function(t){return Boolean(t)}(i.hlsDateRange),i.retainPlaybackRateOnSourceChange=Boolean(i.retainPlaybackRateOnSourceChange),i.license=function(t){return Z(t)?t:void 0}(i.license),i.licenseUrl=function(t){if(!t)return;try{return fn(t)}catch(t){return void zd.um("Invalid 'licenseUrl', falling back to default URL")}}(i.licenseUrl),i.abr=CT(i.abr),i.retryConfiguration=function(t){const i=Mo({},vk);return void 0!==t&&(void 0!==t.maxRetries&&(i.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(i.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(i.maximumBackoff=Number(t.maximumBackoff))),i}(i.retryConfiguration),i.hideDeprecationWarnings=Boolean(i.hideDeprecationWarnings),i.theoLive=function(t){if(!t)return t;return Mo({},t,{externalSessionId:t.externalSessionId?Hi(t.externalSessionId):void 0,fallbackEnabled:lS(t.fallbackEnabled)})}(i.theoLive),i.ps5=function(t){var i;return Mo({},t,{playMode:"2K"===(null==t?void 0:t.playMode)?"2K":"4K",passThrough:null==(i=lS(null==t?void 0:t.passThrough))||i})}(i.ps5),i}function wk(t){return{bt:t.bt,MP:t.MP,ct:t.ct,UP:t.UP,lt:t.lt,WP:t.WP,$P:t.$P,hx:t.hx,ux:t.ux,Ax:t.Ax,kx:t.kx,Rx:t.Rx,Bx:t.Bx,Mx:t.Mx}}function yk(t,i){const e=i.Mx,s=i.$P;t.Mx=e,t.$P=s}function Ri(t,i,e){if(i===e)return;const s=i.bt!==e.bt,n=i.MP,r=i.ct,h=i.$P,o=i.hx,a=i.ux,u=i.Ax,c=i.kx,d=(i.Bx,i.Rx,i.Mx),l=e.MP,f=e.ct,v=e.UP,_=e.WP,g=e.$P,p=e.hx,m=e.ux,w=e.Ax,y=e.kx,A=(e.Bx,e.Rx,e.Mx);(s||u>mh.VL&&w===mh.VL)&&t.So(new G(l,w)),p&&!o?t.So(new hl(l)):!p&&o&&t.So(new Tc(l)),w>=mh.Qn&&(s||u<mh.Qn)&&t.So(new ut(l,w)),f===r||S(f)&&S(r)||t.So(new Rs(f)),m!==a&&t.So(new aa(l,m)),l!==n&&t.So(new Si(l,void 0)),v&&t.So(new At(l)),w>=mh.HL&&(s||u<mh.HL)&&t.So(new ot(l,w)),y&&!c?t.So(new F(l)):!y&&c&&t.So(new Es(l)),A===d&&g===h||t.So(new Ze(l,A)),w>=mh.WL&&(s||u<mh.WL)&&t.So(new lo(l,w)),w>=mh.qL&&(s||u<mh.qL)&&t.So(new qt(l,w)),w!==u&&t.So(new ou(l,w)),_&&t.So(new Pi(_))}function Ak(t){switch(t){case tc.INLINE:case tc.FULLSCREEN:case tc.PICTURE_IN_PICTURE:case tc.NATIVE_PICTURE_IN_PICTURE:return t;default:return}}r();var bk=class extends wp{constructor(t){super(d.xw),this.currentSource=void 0,this.currentSource=t}};r();var lt=class extends wp{constructor(){super(d.Nw)}};r();var Sk=class extends wp{constructor(){super(d.Lw)}};r(),r(),r();var re=function(t){return t.zL="enterpictureinpicture",t.GL="exitpictureinpicture",t.ma="pictureinpictureerror",t}({}),Tk=class extends wp{constructor(){super(re.zL)}};r();var kk=class extends wp{constructor(){super(re.GL)}},io=class extends Ne{get BI(){return this.NI}set BI(t){if(t===this.NI)return;this.MI(this.NI);const i=this.NI.XL;this.NI=t,this.OI(t),!i&&this.NI.XL?this.So(new Tk):i&&!this.NI.XL&&this.So(new kk)}OI(t){t.wn(re.zL,this.Rs),t.wn(re.GL,this.Rs),t.wn(re.ma,this.Rs)}MI(t){t.mn(re.zL,this.Rs),t.mn(re.GL,this.Rs),t.mn(re.ma,this.Rs)}get jL(){return this.NI.jL}get XL(){return this.NI.XL}yo(){return this.NI.yo()}jo(){return this.NI.jo()}kn(t){this.Vo(),this.MI(this.NI),t||this.NI.kn()}constructor(t){super(),this.NI=void 0,this.NI=t,this.OI(this.NI)}};r(),r();var Ek=class extends Ne{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=Pk(this)}QL(t){return{}}constructor(...t){super(...t),this.hu=void 0}};function Pk(t){return{diagnose:i=>t.QL(i),addEventListener(i,e){t.wn(Ik(i),e)},removeEventListener(i,e){t.mn(Ik(i),e)}}}var xk=["stats"];function Ik(t){const i=$a(t,Hi);return(Z(i)?[i]:i).filter(t=>pi(xk,t))}var Rk=class extends Ne{set BI(t){const i=this.NI;t!==i&&(i&&this.MI(i),t&&this.OI(t),this.NI=t)}get BI(){return this.NI}get Ca(){return this.hu||(this.hu=Pk(this)),this.hu}OI(t){t.wn(xk,this.Rs)}MI(t){t.mn(xk,this.Rs)}QL(t){var i,e;return null!=(e=null==(i=this.NI)?void 0:i.QL(t))?e:{}}kn(){this.Vo(),this.NI&&this.MI(this.NI),this.NI=void 0}constructor(){super(),this.NI=void 0,this.hu=void 0,this.NI=void 0}},Ck=class extends Yc{Aa(){return this.KL}EP(){return this.YL}get zP(){return this.GP()}get jP(){var t;return null!=(t=this.QP())?t:this.JL}GP(){return this.ZL}QP(){return this.JL}Ix(){return this.Gl}Dx(){return this.$L}tO(t){const i=this.PP;if(i===t)return;i.mw(this.iI);const e=wk(this),s=this.NP(),n=this.Hx(),r=this.Wx();this.PP=t,this.YL.BI=t.ht,this.$L.BI=t.rt,this.Gl.BI=t.nt,this.KL.BI=t.Aa(),this.ZL.BI=t.zP,this.JL.BI=t.jP,void 0!==e&&Ri(this,e,this);const h=this.NP();h!==s&&this.So(new bk(h)),this.Hx()!==n&&this.So(new lt),this.Wx()!==r&&this.So(new Sk),t.lw(this.iI)}async kn(){await super.kn(),this.KL.kn(),this.YL.kn(),this.$L.kn(),this.Gl.kn(),this.ZL.kn(),this.JL.kn()}constructor(t){super(t),this.YL=new He,this.$L=new He,this.Gl=new sl,this.KL=void 0,this.ZL=new yl,this.JL=new Rk,this.KL=new io(t.Aa()),this.YL.BI=t.ht,this.$L.BI=t.rt,this.Gl.BI=t.nt,this.ZL.BI=t.zP,this.JL.BI=t.jP}};r();var Dk=class extends Ck{ZP(){return function(t){let i=0,e=0,s=0,n=0,r=0,h=0,o=0;for(const a of t)i+=a.iO,e+=a.eO,s+=a.sO,n+=a.nO,r+=a.rO,h+=a.hO.amountOfBufferedAudioSegments,o+=a.hO.amountOfBufferedVideoSegments;return{iO:i,eO:e,sO:s,nO:n,rO:r,hO:{amountOfBufferedAudioSegments:h,amountOfBufferedVideoSegments:o}}}(this.oO.map(t=>t.JP))}Xx(){return gn(this.oO.map(t=>t.Xx())).then(Ct)}hr(){return gn(this.oO.map(t=>t.hr())).then(Ct)}qx(){if(!this.ko){for(const t of this.oO)t.qx();this.ko=!0}}xP(){const t=[];for(const i of this.oO)t.push(...i.xP());return t}Zx(t){let i=!1;for(const e of this.oO)i=e.Zx(t)||i;return i}So(t){this.Zx(t)||super.So(t)}get BI(){return this.PP}set BI(t){this.tO(t)}aO(t){this.oO.push(t)}uO(t){oi(this.oO,t)}tO(t){if(t===this.PP)return;const i=this.PP;i.mr(),super.tO(t),t.gr(i)}Yx(){for(const t of this.oO)t.Yx()}async kn(){this.Vo(),this.PP.mr();for(const t of this.oO)this.PP!==t&&await t.kn();await super.kn()}constructor(t){super(t),this.oO=[],this.ko=!1,this.cO=!1,this.aO(t)}};r();var Bk=function(t){return t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR",t}({}),Nk=class extends wf{get name(){return"MediaError"}constructor(t,i,e,s){super(i),this.code=void 0,this.message=void 0,this.cause=void 0,this.systemCode=void 0,this.code=t,this.message=null!=i?i:"Unknown error",this.cause=e,this.systemCode=s,m.captureStackTrace&&m.captureStackTrace(this,this.constructor)}};function Mk(t){hS(t,"MEDIA_ERR_ABORTED",1),hS(t,"MEDIA_ERR_NETWORK",2),hS(t,"MEDIA_ERR_DECODE",3),hS(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),hS(t,"MEDIA_ERR_ENCRYPTED",5)}function P(t){var i,e;return function(t){return t.category===Je.CONTENT_PROTECTION}(t)?new Nk(5,t.message,null==(i=t.cause)?void 0:i.message,t.systemCode):new Nk(Lk(t.code),t.message,null==(e=t.cause)?void 0:e.message)}function Lk(t){if(t===Vo.MEDIA_ABORTED)return 1;if(t===Vo.MANIFEST_LOAD_ERROR||t===Vo.MEDIA_LOAD_ERROR||t===Vo.SUBTITLE_LOAD_ERROR)return 2;if(t===Vo.MEDIA_DECODE_ERROR)return 3;if(t===Vo.MEDIA_NOT_SUPPORTED)return 4;const i=Je.fromCode(t);return i===Je.NETWORK?2:i===Je.SOURCE?4:i===Je.LICENSE?6:i===Je.CONTENT_PROTECTION?5:i===Je.AD?7:3}function Ok(t){return new Ga(Fk(t.code),t.message,t)}function Fk(t){switch(t){case 1:return Vo.MEDIA_ABORTED;case 2:return Vo.NETWORK_ERROR;case 3:return Vo.MEDIA_DECODE_ERROR;case 4:return Vo.SOURCE_NOT_SUPPORTED;case 5:return Vo.CONTENT_PROTECTION_ERROR;case 6:return Vo.LICENSE_ERROR;case 7:return Vo.AD_ERROR}}Mk(Nk),Mk(Nk.prototype),r(),r(),r(),r(),r();var rs=class extends eo{tt(t){return super.tt(t)}xa(){return yS(this)}};r(),r(),r(),r();var Uk=class{get II(){return this.dO}get V(){return this.dO.length}get Ca(){return this.hu||(this.hu=function(t){const i=t.II.map(t=>t.Ca);return i.item=i=>{const e=0|i,s=t.CI(e);return s&&s.Ca||void 0},i}(this)),this.hu}lO(t){this.dO.push(t),this.hu&&this.hu.push(t.Ca)}_S(t){oi(this.dO,t),this.hu&&oi(this.hu,t.Ca)}CI(t){return this.dO[t]}fO(t){return ul(t)?function(t,i){for(const e of i)if(!pi(t,e))return!1;return!0}(this.dO,t):pi(this.dO,t)}hr(){Yo(this.dO),this.hu&&Yo(this.hu)}constructor(){this.dO=[],this.hu=void 0}};r();var Uh=class extends Js{xa(){return new Vk(this.Ht.Ca)}constructor(t){super(Te.SI),this.Ht=void 0,this.Ht=t}},Vk=class extends Ae{constructor(t){super("update"),this.track=void 0,this.track=t}};r();var Hk=0;function ki(){return Hk++}var Wk=0;var qk=0;function zk(){return qk++}var Gk=0;function Xk(){return Gk++}var jk=0;var Qk=class extends Ne{get XI(){}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.vO=t,this.So(new nr(this)))}get vO(){return this._O.enabled}set vO(t){this._O.enabled=t}get Ca(){return this.hu||(this.hu=fo(this)),this.hu}get o(){return this.hS}get jI(){return this.gO}get Lt(){return this._O.kind}get Th(){return this.pO}set Th(t){t!==this.pO&&(this.pO=t,this.So(new Uh(this)))}get bs(){return this._O.language}get Xk(){return this.Rt?"enabled":"disabled"}get mO(){return this._O}get KI(){return this.dO}get YI(){}set YI(t){}wO(t){this.Rt=t}yO(){this.Rt=this.vO}constructor(t){super(),this.Km=Ci.Dk,this._O=void 0,this.hS=void 0,this.pO=void 0,this.gO=void 0,this.We=!1,this.dO=void 0,this.hu=void 0,this._O=t,this.gO=ki(),this.hS=""+jk++,this.pO=t.label,this.dO=new Uk,this.yO()}};r();var Kk=0;var Yk=class extends Ne{get XI(){}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.vO=t,this.So(new nr(this)))}get vO(){return Boolean(this._O.selected)}set vO(t){this._O.selected=t}get Ca(){return this.hu||(this.hu=fo(this)),this.hu}get o(){return this.hS}get jI(){return this.gO}get Lt(){return"main"}get Th(){return this.pO}set Th(t){t!==this.pO&&(this.pO=t,this.So(new Uh(this)))}get bs(){return this._O.language}get Xk(){return this.Rt?"enabled":"disabled"}get mO(){return this._O}get KI(){return this.dO}get YI(){}set YI(t){}yO(){this.Rt=this.vO}wO(t){this.Rt=t}constructor(t){super(),this.Km=Ci.Bk,this._O=void 0,this.hS=void 0,this.gO=void 0,this.We=!1,this.dO=void 0,this.pO=void 0,this.hu=void 0,this._O=t,this.gO=ki(),this.hS=""+Kk++,this.dO=new Uk,this.pO=t.label,this.yO()}};r();var Jk=class extends wp{constructor(t){super(d.yw),this.KP=void 0,this.KP=t}};r(),r();var Zu=function(t){return t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR",t}({});r(),r();var Zk=function(t){return t.AO="cue",t.bO="region",t.SO="stylesheet",t}({});r(),r();var $k={"line-left":"start",center:"middle","line-right":"end"},tE={start:"line-left",middle:"center",end:"line-right"};function iE(t,i){if("auto"===t)switch(i){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function eE(t,i){if("auto"===t)switch(i){case"left":return 0;case"right":return 100;default:return 50}return function(t,i){const e="number"==typeof t?t:C(t);return S(e)?i:e}(t,50)}r(),r(),r();var Me=function(t){return t.zL="yo",t.GL="jo",t.SI="er",t}({}),sE=class extends Js{constructor(t,i){super(t),this.TO=void 0,this.TO=i}},nE=class extends Ae{constructor(t,i){super(t),this.cue=void 0,this.cue=i}};function zt(t){const i=[Me.zL,Me.GL,Me.SI];let e;const s={get kO(){return t},get track(){return t.Ht.Ca},get id(){return t.o},get uid(){return t.jI},get startTime(){return t.EO},set startTime(i){t.EO=i},get endTime(){return t.PO},set endTime(i){t.PO=i},get content(){return t.U},addEventListener(t,i){const s=$a(t,Hi);e.wn(s,i)},removeEventListener(t,i){const s=$a(t,Hi);e.mn(s,i)}};return e=new mp(s),t.wn(i,t=>e.So(t.Ca)),s}function rE(){}function hE(t){return po(zt(t),{get align(){return t.xO},get line(){return t.IO},get lineAlign(){return t.RO},get position(){return t.mo},get positionAlign(){return t.CO},get region(){return t.DO?t.DO.Ca:null},get size(){return t.Vy},get snapToLines(){return t.BO},get text(){return t.U},get vertical(){return t.Pt}})}r(),r();var ue=class extends sE{xa(){return new oE(this.TO.Ca)}constructor(t){super(Me.SI,t)}},oE=class extends nE{constructor(t){super("update",t)}};r();var aE=class extends Js{xa(){return new uE(this.TO.Ca)}constructor(t){super(Te.cI),this.TO=void 0,this.TO=t}},uE=class extends Ae{constructor(t){super("updatecue"),this.cue=void 0,this.cue=t}},cE=.02;function dE(t,i){return uh(t.MO,i.MO,cE)&&uh(t.LO,i.LO,cE)&&t.o===i.o}var _h=class extends Ne{get EO(){return this.OO}set EO(t){var i,e;this.OO!==t&&(this.OO=t,null==(i=this.FO)||i.UO(this),this.So(new ue(this)),null==(e=this.FO)||e.So(new aE(this)))}get PO(){return this.VO}set PO(t){var i,e;this.VO!==t&&(this.VO=t,null==(i=this.FO)||i.UO(this),this.So(new ue(this)),null==(e=this.FO)||e.So(new aE(this)))}get o(){return this.hS}get jI(){return this.gO}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return zt(this)}get ro(){return this.ho}set ro(t){this.ho=t}get Ht(){return this.FO}set Ht(t){this.FO=t}get U(){return this.HO}set U(t){var i;this.HO!==t&&(this.HO=t,this.So(new ue(this)),null==(i=this.FO)||i.So(new aE(this)))}get WO(){return this.qO}set WO(t){this.qO=t}zO(t){return this===t||uS(this,t)&&dE(this,t)&&this.GO(t)}GO(t){return _t(this.U,t.U)}XO(t,i){this.OO=t,this.VO=i,this.MO=t,this.LO=i}kn(){this.Vo()}constructor(t,i,e,s,n){super(),this.gO=void 0,this.hS=void 0,this.MO=void 0,this.LO=void 0,this.OO=void 0,this.VO=void 0,this.hu=void 0,this.FO=void 0,this.ho=!1,this.HO=void 0,this.qO=void 0,this.jO=-1,this.gO=Xk(),this.OO=t,this.VO=i,this.MO=t,this.LO=i,this.HO=e,this.qO=Boolean(s),this.hS=null!=n?n:""}};function lE(t,i){return t.U===i.U&&t.IO===i.IO&&t.RO===i.RO&&t.mo===i.mo&&t.CO===i.CO&&t.DO===i.DO&&t.BO===i.BO&&t.Vy===i.Vy&&t.xO===i.xO&&t.Pt===i.Pt}var fE=class extends _h{get Ca(){return this.hu||(this.hu=hE(this)),this.hu}get Km(){return Zk.AO}GO(t){return lE(this,t)}constructor(t,i,e,s,n){super(t,i,e,s,n),this.IO="auto",this.RO="start",this.mo="auto",this.CO="auto",this.DO=void 0,this.BO=!0,this.Vy=100,this.xO="center",this.Pt=""}};function vE(t){const i=t.IO,e=ho(i);return e&&!t.BO&&(i<0||i>100)?100:e?Number(i):t.BO?-1:100}function _E(t){return eE(t.mo,t.xO)}function gE(t){return iE(t.CO,t.xO)}function pE(t){const i=gE(t),e=_E(t);let s;switch(i){case"line-left":s=100-e;break;case"line-right":s=e;break;case"center":s=e<=50?2*e:2*(100-e)}return _.min(t.Vy,s)}function mE(t){return{get id(){return t.o},get lines(){return t.QO},get regionAnchorX(){return t.KO},get regionAnchorY(){return t.YO},get scrollValue(){return t.JO},get viewportAnchorX(){return t.ZO},get viewportAnchorY(){return t.$O},get width(){return t.Ti}}}r(),r();var wE=class{get Ca(){return this.hu||(this.hu=mE(this)),this.hu}get Km(){return Zk.bO}constructor(t,i,e,s,n,r,h,o){this.o=void 0,this.Ti=void 0,this.QO=void 0,this.KO=void 0,this.YO=void 0,this.ZO=void 0,this.$O=void 0,this.JO=void 0,this.hu=void 0,this.o=t,this.Ti=i,this.QO=e,this.KO=s,this.YO=n,this.ZO=r,this.$O=h,this.JO=o}};r(),r();var yE=1e6,AE=class{tF(t){return this.iF()*t}eF(t){return this.sF(t)>0}nF(t){return this.sF(t)>=0}rF(t,i){return this.oF(t).hF(i)}zO(t){return 0===this.sF(t)}aF(t){return this.sF(t)<0}hF(t){return this.sF(t)<=0}uF(){return this.cF()?this.dF():this}lF(t){return this.lO(t.dF())}oF(t){return this.lF(t).uF()}};function bE(t,i){return t.fF()?i.fF()?Qc.rh:Qc.Fg:i.fF()?Qc.Ug:t.vF()?i.vF()&&t.cF()===i.cF()?Qc.rh:t.cF()?Qc.Ug:Qc.Fg:i.cF()?Qc.Fg:Qc.Ug}r(),r();var SE=4294967296,TE=SE*SE,kE=TE*TE,EE=kE/2,No=class t{static _F(i,e,s){return s?new t(i.toUnsigned(),e.toUnsigned()):new t(i.toSigned(),e.toSigned())}static gF(i){return i.unsigned?new t(i,Wt.UZERO):new t(i,i.isNegative()?Wt.NEG_ONE:Wt.ZERO)}static pF(i,e){if(S(i))return e?t.mF:t.wF;if(e){if(i<0)return t.mF;if(i>=kE)return t.yF}else{if(i<=-EE)return t.AF;if(i+1>=EE)return t.bF}return i<0?t.pF(-i,e).dF():t._F(Wt.fromNumber(i%TE),Wt.fromNumber(i/TE),e)}SF(){return this.TF.unsigned}kF(){return this.EF.isZero()&&this.TF.isZero()}cF(){return this.TF.isNegative()}PF(){return this.SF()?t._F(this.EF,this.TF,!1):this}xF(){return this.SF()?this:t._F(this.EF,this.TF,!0)}IF(){return this.EF}iF(){return this.cF()?-this.dF().iF():this.TF.toNumber()*TE+this.EF.toUnsigned().toNumber()}RF(){return this.EF.toInt()}zO(t){return(this.SF()===t.SF()||this.TF.getHighBits()>>>31!=1||t.TF.getHighBits()>>>31!=1)&&(this.TF.toUnsigned().eq(t.TF.toUnsigned())&&this.EF.toUnsigned().eq(t.EF.toUnsigned()))}sF(t){if(this.zO(t))return Qc.rh;const i=this.cF(),e=t.cF();if(i&&!e)return Qc.Ug;if(!i&&e)return Qc.Fg;if(!this.SF())return this.lF(t).cF()?Qc.Ug:Qc.Fg;const s=this.xF(),n=t.xF(),r=n.TF.comp(s.TF);return r>0||0===r&&n.EF.gt(s.EF)?Qc.Ug:Qc.Fg}aF(t){return this.sF(t)<0}hF(t){return this.sF(t)<=0}CF(t){return this.sF(t)>0}DF(t){return this.sF(t)>=0}BF(){return new t(this.EF.not(),this.TF.not())}NF(i){return new t(this.EF.and(i.EF),this.TF.and(i.TF))}MF(i){return new t(this.EF.or(i.EF),this.TF.or(i.TF))}LF(i){const e=127&i;return 0===e?this:e<64?t._F(this.EF.shl(e),this.TF.shl(e).or(this.EF.shru(64-e)),this.SF()):t._F(Wt.ZERO,this.EF.shl(e-64),this.SF())}OF(i){const e=127&i;return 0===e?this:e<64?t._F(this.EF.shru(e).or(this.TF.shl(64-e)),this.TF.shr(e),this.SF()):t._F(this.TF.shr(e-64),this.TF.isNegative()?Wt.NEG_ONE:Wt.ZERO,this.SF())}FF(i){const e=127&i;return 0===e?this:e<64?t._F(this.EF.shru(e).or(this.TF.shl(64-e)),this.TF.shru(e),this.SF()):64===e?t._F(this.TF,Wt.ZERO,this.SF()):t._F(this.TF.shru(e-64),Wt.ZERO,this.SF())}lO(i){const e=this.TF.high>>>16,s=65535&this.TF.high,n=this.TF.low>>>16,r=65535&this.TF.low,h=this.EF.high>>>16,o=65535&this.EF.high,a=this.EF.low>>>16,u=65535&this.EF.low,c=i.TF.high>>>16,d=65535&i.TF.high,l=i.TF.low>>>16,f=65535&i.TF.low,v=i.EF.high>>>16,_=65535&i.EF.high,g=i.EF.low>>>16;let p=0,m=0,w=0,y=0,A=0,b=0,S=0,T=0;T+=u+(65535&i.EF.low),S+=T>>>16,T&=65535,S+=a+g,b+=S>>>16,S&=65535,b+=o+_,A+=b>>>16,b&=65535,A+=h+v,y+=A>>>16,A&=65535,y+=r+f,w+=y>>>16,y&=65535,w+=n+l,m+=w>>>16,w&=65535,m+=s+d,p+=m>>>16,m&=65535,p+=e+c,p&=65535;const k=this.SF(),E=Wt.fromBits(w<<16|y,p<<16|m,k),P=Wt.fromBits(S<<16|T,A<<16|b,k);return t._F(P,E,k)}lF(t){return this.lO(t.dF())}dF(){return this.BF().lO(t.UF)}VF(i){if(this.kF()||i.kF())return this.SF()?t.mF:t.wF;if(this.cF())return i.cF()?this.dF().VF(i.dF()):this.dF().VF(i).dF();if(i.cF())return this.VF(i.dF()).dF();if(this.TF.isZero()&&0===this.EF.high&&i.TF.isZero()&&0===i.EF.high)return t.gF(this.EF.multiply(i.EF));const e=Wt.fromBits(4294967295,0,!0),s=this.EF.and(e),n=this.EF.shru(32),r=this.TF.and(e),h=this.TF.shru(32),o=i.EF.and(e),a=i.EF.shru(32),u=i.TF.and(e),c=i.TF.shru(32);let d=Wt.UZERO,l=Wt.UZERO,f=Wt.UZERO,v=Wt.UZERO;d=d.add(s.mul(o)),l=l.add(d.shru(32)),d=d.and(e),l=l.add(n.mul(o)),f=f.add(l.shru(32)),l=l.and(e),l=l.add(s.mul(a)),f=f.add(l.shru(32)),l=l.and(e),f=f.add(r.mul(o)),v=v.add(f.shru(32)),f=f.and(e),f=f.add(n.mul(a)),v=v.add(f.shru(32)),f=f.and(e),f=f.add(s.mul(u)),v=v.add(f.shru(32)),f=f.and(e),v=v.add(h.mul(o)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(e);const _=Wt.fromBits(d.getLowBitsUnsigned(),l.getLowBitsUnsigned(),!0),g=Wt.fromBits(f.getLowBitsUnsigned(),v.getLowBitsUnsigned(),!0);return t._F(_,g,this.SF())}HF(i){let e,s,n=i;if(n.kF())throw new RangeError("division by zero");if(this.kF())return this.SF()?[t.mF,t.mF]:[t.wF,t.wF];if(this.SF()){if(n.SF()||(n=n.xF()),n.CF(this))return[t.mF,this];if(n.CF(this.FF(1)))return s=t.WF,e=this.lF(n),[s,e];s=t.mF}else{if(this.zO(t.AF)){if(n.zO(t.UF)||n.zO(t.qF))return[t.AF,t.wF];if(n.zO(t.AF))return[t.UF,t.wF];{const i=this.OF(1).zF(n).LF(1);return i.zO(t.wF)?s=n.cF()?t.UF:t.qF:(e=this.lF(n.VF(i)),s=i.lO(e.zF(n))),e=this.lF(n.VF(s)),[s,e]}}if(n.zO(t.AF))return this.SF()?[t.mF,this]:[t.wF,this];if(this.cF())return n.cF()?this.dF().HF(n.dF()):([s,e]=this.dF().HF(n),[s.dF(),e.dF()]);if(n.cF())return[s,e]=this.HF(n.dF()),[s.dF(),e.dF()];s=t.wF}for(e=this;e.DF(n);){let i=_.max(1,_.floor(e.iF()/n.iF()));const r=_.ceil(_.log(i)/_.LN2),h=r<=48?1:2**(r-48);let o=t.pF(i),a=o.VF(n);for(;a.cF()||a.CF(e);)i-=h,o=t.pF(i,this.SF()),a=o.VF(n);o.kF()&&(o=t.UF),s=s.lO(o),e=e.lF(a)}return[s,e]}zF(t){return this.HF(t)[0]}GF(t){return this.HF(t)[1]}toString(i){const e=i||10;if(e<2||e>36)throw new RangeError("radix");if(this.kF())return"0";if(this.cF()){if(this.zO(t.AF)){const i=t.pF(e),s=this.zF(i),n=s.VF(i).lF(this);return s.toString(e)+n.RF().toString(e)}return"-"+this.dF().toString(e)}const s=t.pF(e**6,this.SF());let n=this,r="";for(;;){const t=n.zF(s);let i=(n.lF(t.VF(s)).RF()>>>0).toString(e);if(n=t,n.kF())return i+r;for(;i.length<6;)i="0"+i;r=String(i)+r}}constructor(t,i){this.EF=void 0,this.TF=void 0,this.EF=t,this.TF=i}};No.wF=No.gF(Wt.ZERO),No.mF=No.gF(Wt.UZERO),No.UF=No.gF(Wt.ONE),No.WF=No.gF(Wt.UONE),No.qF=No.gF(Wt.NEG_ONE),No.bF=No._F(Wt.NEG_ONE,Wt.MAX_VALUE,!1),No.yF=No._F(Wt.MAX_UNSIGNED_VALUE,Wt.MAX_UNSIGNED_VALUE,!0),No.AF=No._F(Wt.ZERO,Wt.MIN_VALUE,!1),r();var rn=class t{get vF(){return!isFinite(this.XF)}get dd(){return this.XF/this.qD}static jF(i){return new t(_.ceil(i.XF),i.qD)}static QF(i){return new t(_.floor(i.XF),i.qD)}static KF(t,i){return t.nF(i)?t:i}static YF(t,i){return t.hF(i)?t:i}lO(i){return this.qD>=i.qD?new t(this.XF+i.JF(this.qD).XF,this.qD):new t(this.JF(i.qD).XF+i.XF,i.qD)}eF(t){return t.aF(this)}nF(t){return t.hF(this)}oF(i){if(this.qD>=i.qD){const e=_.abs(this.XF-i.JF(this.qD).XF),s=this.qD;return new t(e,s)}return i.oF(this)}rF(t,i){return this.oF(t).hF(i)}sF(t){return function(t,i){return t.qD>=i.qD?sf(t.XF,i.JF(t.qD).XF):sf(t.JF(i.qD).XF,i.XF)}(this,t)}zO(t){return 0===this.sF(t)}aF(t){return this.sF(t)<0}hF(t){return this.sF(t)<=0}JF(i){return new t(this.XF*(i/this.qD),i)}lF(i){return this.qD>=i.qD?new t(this.XF-i.JF(this.qD).XF,this.qD):new t(this.JF(i.qD).XF-i.XF,i.qD)}ZF(i){return new t(this.XF*i,this.qD)}constructor(t,i=1){this.XF=void 0,this.qD=void 0,this.XF=t,this.qD=i}};rn.fd=new rn(1/6,1),rn.wF=new rn(0),rn.tU=new rn(1/0),rn.iU=1e6;var ko=class t extends AE{static eU(i,e){return void 0===e&&(e=yE),t.pF(i*e,e)}static pF(i,e){return S(i)?t.sU:i===1/0?t.nU:i===-1/0?t.rU:new t(Wt.fromNumber(i),e)}static gF(i,e){return new t(i,e)}static hU(i){return t.eU(i.dd,yE)}static oU(i){return new t(Wt.fromNumber(i.getTime()),1e3)}static KF(t,i){return t.nF(i)?t:i}static YF(t,i){return t.hF(i)?t:i}static aU(i,e,s){return t.KF(e,t.YF(s,i))}cF(){return this.zE.isNegative()}kF(){return 0!==this.qD&&this.zE.isZero()}vF(){return 0===this.qD&&!this.zE.isZero()}fF(){return 0===this.qD&&this.zE.isZero()}iF(){if(0===this.qD)return this.zE.isZero()?NaN:this.zE.isNegative()?-1/0:1/0;const t=this.zE.divide(this.qD),i=this.zE.subtract(t.multiply(this.qD));return t.toNumber()+i.toNumber()/this.qD}IF(){if(0===this.qD)throw new m("Failed to convert timestamp");return this.zE}uU(){return new Date(0===this.qD?NaN:this.JF(1e3).zE.toNumber())}cU(){return new rn(0===this.qD?this.iF():this.zE.toNumber(),this.qD)}JF(i,e){void 0===e&&(e=Ki.dU);const s=this.qD;if(s===i)return this;if(0===s)return this;const n=Zl(s,i),r=function(t,i,e){const[s,n]=t.HF(i);if(n.kF())return s;if(e===Ki.dU)return n.cF()?s.lF(No.UF):s;if(e===Ki.lU)return n.cF()?s:s.lO(No.UF);{const t=n.VF(No.pF(2));return t.cF()?t.dF().aF(i)?s:s.lF(No.UF):t.aF(i)?s:s.lO(No.UF)}}(No.gF(this.zE).VF(No.pF(i/n)),No.pF(s/n),e);return new t(r.IF(),i)}sF(t){if(this===t)return Qc.rh;if(0===this.qD||0===t.qD)return bE(this,t);if(this.kF())return t.kF()?Qc.rh:t.cF()?Qc.Fg:Qc.Ug;if(t.kF())return this.cF()?Qc.Ug:Qc.Fg;const i=_.min(this.qD,t.qD),e=this.JF(i,Ki.fU).zE,s=t.JF(i,Ki.fU).zE;return e.compare(s)}dF(){return 0===this.qD?function(t){0;return t.fF()?t:t.cF()?ko.nU:ko.rU}(this):new t(this.zE.negate(),this.qD)}lO(i){if(0===this.qD||0===i.qD)return function(t,i){0;if(t.fF()||i.fF())return ko.sU;if(t.vF()&&i.vF())return t.cF()===i.cF()?t:ko.sU;return t.vF()?t:i}(this,i);if(this.kF())return i;if(i.kF())return this;const e=_.max(this.qD,i.qD),s=this.JF(e,Ki.fU),n=i.JF(e,Ki.fU);return new t(s.zE.add(n.zE),e)}VF(i){if(this.fF()||S(i))return t.sU;if(this.vF()||!isFinite(i)){if(this.kF()||0===i)return t.sU;{const e=this.cF()?t.rU:t.nU;return i<0?e.dF():e}}return this.kF()?this:new t(0===i?Wt.ZERO:this.zE.multiply(i),this.qD)}zF(i){if(this.fF()||S(i))return t.sU;if(this.vF())return isFinite(i)?0===i?1/i<0?this.dF():this:i<0?this.dF():this:t.sU;if(!isFinite(i))return new t(Wt.ZERO,this.qD);if(this.kF())return 0===i?t.sU:new t(Wt.ZERO,this.qD);if(0===i){const e=this.cF()?t.rU:t.nU;return 1/i<0?e.dF():e}return new t(this.zE.divide(i),this.qD)}vU(){return[this.zE.low,this.zE.high,this.qD]}constructor(t,i){super(),this.zE=void 0,this.qD=void 0,this.zE=t.toSigned(),this.qD=i>>>0}};ko.wF=new ko(Wt.ZERO,yE),ko.sU=new ko(Wt.ZERO,0),ko.nU=new ko(Wt.ONE,0),ko.rU=new ko(Wt.NEG_ONE,0),r();var PE=class t extends AE{static eU(i,e){return void 0===e&&(e=yE),t.pF(i*e,e)}static pF(i,e){return S(i)?t.sU:i===1/0?t.nU:i===-1/0?t.rU:new t(BigInt(_.floor(i)),e)}static gF(i,e){return new t(BigInt(i.high)<<BigInt(32)|BigInt(i.low>>>0),e)}static hU(i){return t.eU(i.dd,yE)}static oU(i){return t.pF(i.getTime(),1e3)}static get wF(){return t._U||(t._U=new t(BigInt(0),yE)),t._U}static get sU(){return t.gU||(t.gU=new t(BigInt(0),0)),t.gU}static get nU(){return t.pU||(t.pU=new t(BigInt(1),0)),t.pU}static get rU(){return t.mU||(t.mU=new t(BigInt(-1),0)),t.mU}static KF(t,i){return t.nF(i)?t:i}static YF(t,i){return t.hF(i)?t:i}static aU(i,e,s){return t.KF(e,t.YF(s,i))}cF(){return this.zE<BigInt(0)}kF(){return 0!==this.qD&&this.zE===BigInt(0)}vF(){return 0===this.qD&&this.zE!==BigInt(0)}fF(){return 0===this.qD&&this.zE===BigInt(0)}iF(){if(0===this.qD)return this.zE===BigInt(0)?NaN:this.zE<BigInt(0)?-1/0:1/0;const t=this.zE/BigInt(this.qD),i=this.zE-t*BigInt(this.qD);return Number(t)+Number(i)/this.qD}IF(){if(0===this.qD)throw new m("Failed to convert timestamp");return this.wU()}wU(){const t=this.zE&BigInt(4294967295),i=this.zE>>BigInt(32)&BigInt(4294967295);return Wt.fromBits(Number(t),Number(i))}uU(){return new Date(0===this.qD?NaN:Number(this.JF(1e3).zE))}cU(){return new rn(0===this.qD?this.iF():Number(this.zE),this.qD)}JF(i,e){void 0===e&&(e=Ki.dU);const s=this.qD;if(s===i)return this;if(0===s)return this;const n=Zl(s,i),r=function(t,i,e){const s=t/i,n=t-s*i;if(n===BigInt(0))return s;if(e===Ki.dU)return n<BigInt(0)?s-BigInt(1):s;if(e===Ki.lU)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<i?s:s-BigInt(1):t<i?s:s+BigInt(1)}}(this.zE*BigInt(i/n),BigInt(s/n),e);return new t(r,i)}sF(t){if(this===t)return Qc.rh;if(0===this.qD||0===t.qD)return bE(this,t);if(this.kF())return t.kF()?Qc.rh:t.cF()?Qc.Fg:Qc.Ug;if(t.kF())return this.cF()?Qc.Ug:Qc.Fg;const i=_.min(this.qD,t.qD),e=this.JF(i,Ki.fU).zE,s=t.JF(i,Ki.fU).zE;return e>s?Qc.Fg:e<s?Qc.Ug:Qc.rh}dF(){return 0===this.qD?function(t){0;return t.fF()?t:t.cF()?PE.nU:PE.rU}(this):new t(-this.zE,this.qD)}lO(i){if(0===this.qD||0===i.qD)return function(t,i){0;if(t.fF()||i.fF())return PE.sU;if(t.vF()&&i.vF())return t.cF()===i.cF()?t:PE.sU;return t.vF()?t:i}(this,i);if(this.kF())return i;if(i.kF())return this;const e=_.max(this.qD,i.qD),s=this.JF(e,Ki.fU),n=i.JF(e,Ki.fU);return new t(s.zE+n.zE,e)}VF(i){if(this.fF()||S(i))return t.sU;if(this.vF()||!isFinite(i)){if(this.kF()||0===i)return t.sU;{const e=this.cF()?t.rU:t.nU;return i<0?e.dF():e}}return this.kF()?this:new t(0===i?BigInt(0):this.zE*BigInt(i),this.qD)}zF(i){if(this.fF()||S(i))return t.sU;if(this.vF())return isFinite(i)?0===i?1/i<0?this.dF():this:i<0?this.dF():this:t.sU;if(!isFinite(i))return new t(BigInt(0),this.qD);if(this.kF())return 0===i?t.sU:new t(BigInt(0),this.qD);if(0===i){const e=this.cF()?t.rU:t.nU;return 1/i<0?e.dF():e}return new t(this.zE/BigInt(i),this.qD)}vU(){const t=this.wU();return[t.low,t.high,this.qD]}constructor(t,i){super(),this.zE=void 0,this.qD=void 0,this.zE=BigInt.asIntN(64,t),this.qD=i>>>0}};PE._U=void 0,PE.gU=void 0,PE.pU=void 0,PE.mU=void 0;var Ki=function(t){return t[t.dU=0]="dU",t[t.lU=1]="lU",t[t.fU=2]="fU",t}({}),$c=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?PE:ko;function xE(t,i){return t.sF(i)}function IE(t,i){return void 0!==t?void 0!==i?$c.YF(t,i):t:i}r();var RE=2**33,CE=mu(()=>$c.pF(RE,9e4)),DE=mu(()=>CE().zF(2));r();var BE={yU:0,AU:1/0,bU:0},NE=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],ME=[" ","\t","\n","\f","\r"],LE=/^\d*$/,OE=/.*[0-9]+.*/,FE=/^[\d.-]+$/,UE=/(^\.|\.$)/,VE=/(\D\.|\.\D)/;function HE(t,i,e){void 0===i&&(i=BE),void 0===e&&(e=!0);return WE(hm(dh(t),new Ui),i,e)}function WE(t,i,e){void 0===i&&(i=BE),void 0===e&&(e=!0);const s={L:[],SU:[],TU:[]},n=qE(t),r=new Ui,h=!1;if(tP(n),Ms(n,t=>"\n"!==t,r),r.ac>=n.length)return s;if(r.Ny(1),"\n"!==n.charAt(r.ac)){QE(zE(n,r,h,!0,s,i,e),s)}else r.Ny(1);for(Ms(n,t=>"\n"===t,r);r.ac<n.length;){QE(zE(n,r,h,!1,s,i,e),s),Ms(n,t=>"\n"===t,r)}return s}function qE(t){const i=fh(t,"\0"," "),e=fh(i,"\r\n","\n");return fh(e,"\r","\n")}function Ms(t,i,e){const s=e.ac;for(;e.ac<t.length&&i(t.charAt(e.ac));)e.Ny(1);return t.substring(s,e.ac)}function zE(t,i,e,s,n,r,h){let o,a=0,u=i.ac,c="",d=!1,l=!1,f=null,v=null,_=null;for(;!d;)if(o=Ms(t,t=>"\n"!==t,i),a++,i.ac>=t.length?d=!0:i.Ny(1),Ho(o,"--\x3e")){if(s||1!==a&&(2!==a||l)){i.My(u);break}l=!0,u=i.ac,f=new fE(0,0,"",!1,c);try{KE(o,n.SU,f,r,h),c=""}catch(t){zd.um(t),f=null}}else{if(""===o)break;s&&Vh(o,"X-TIMESTAMP-MAP")&&(n.kU=GE(o)),s||2!==a||e||(Ih("STYLE",c.replace(/ /g,""))?(v={Km:Zk.SO},c=""):Ih("REGION",c.replace(/ /g,""))&&(_=new wE("",100,3,0,100,0,100,""),c="")),c&&(c+="\n"),c+=o,u=i.ac}if(f)return f.U=c,f;if(v);else if(_)return function(t,i){const e=t.split(/\s/),s=":";for(const t of e)if(0!==t.length&&Ho(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const e=t.indexOf(s),n=t.substring(0,e),r=t.substring(e+1,t.length);switch(n.toUpperCase()){case"ID":lP(r,i);break;case"WIDTH":_P(r,i);break;case"LINES":vP(r,i);break;case"REGIONANCHOR":{const t=dP(r);t&&(i.KO=t[0],i.YO=t[1]);break}case"VIEWPORTANCHOR":{const t=dP(r);t&&(i.ZO=t[0],i.$O=t[1]);break}case"SCROLL":fP(r,i)}}}(c,_),_;return null}function GE(t){const i=t.split("=")[1].trim().split(","),e=jE(i[0].trim(),"MPEGTS")?i[0]:i[1],s=jE(i[0].trim(),"LOCAL")?i[0]:i[1];var n;return{EU:XE(Number(e.split(/:(.*)/)[1].trim())||0),bh:$c.eU(null!=(n=ZE(s.split(/:(.*)/)[1].trim(),new Ui))?n:0)}}function XE(t){return $c.pF(t,9e4)}function jE(t,i){return Vh(t,i)}function QE(t,i){t&&function(t){return"cue"===t.Km}(t)?i.L.push(t):t&&function(t){return"region"===t.Km}(t)?i.SU.push(t):t&&function(t){return"stylesheet"===t.Km}(t)&&i.TU.push(t)}function KE(t,i,e,s,n){const r=new Ui;eP(t,r);const h=YE(ZE(t,r),s,n);if(eP(t,r),"--\x3e"!==t.substring(r.ac,r.ac+3))throw m("Something went wrong with parsing a WebVTT Cue");r.Ny(3),eP(t,r);const o=YE(ZE(t,r),s,n);e.XO(h,o);!function(t,i,e){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&Ho(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),h=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":oP(h,i,e);break;case"VERTICAL":uP(h,i);break;case"D":cP(h,i);break;case"LINE":case"L":rP(h,i);break;case"POSITION":case"T":hP(h,i);break;case"SIZE":case"S":aP(h,i);break;case"ALIGN":case"A":nP(h,i)}}}(t.substring(r.ac,t.length),e,i)}function YE(t,i,e){return e?t+i.yU:t}function JE(t){return/^[0-9]$/.test(t)}function ZE(t,i){const e=fh(t,",",".");let s,n,r,h=!1;if(i.ac>=e.length||!JE(e.charAt(i.ac)))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");const o=Ms(e,JE,i),a=x(o,10);if((o.length>2||a>59)&&(h=!0),i.ac>=e.length||":"!==e.charAt(i.ac))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");i.Ny(1);const u=Ms(e,JE,i);if(2!==u.length)throw new m("Something went wrong with parsing a WebVTT Cue timestamp");const c=x(u,10);if(h||i.ac<e.length&&":"===e.charAt(i.ac)){if(i.ac>=e.length||":"!==e.charAt(i.ac))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");i.Ny(1);const t=Ms(e,JE,i);if(2!==u.length)throw new m("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=x(t,10)}else s=0,n=a,r=c;if(i.ac>=e.length||"."!==e.charAt(i.ac))throw new m("Something went wrong with parsing a WebVTT Cue timestamp");i.Ny(1);const d=Ms(e,JE,i),l=x(d,10);if(c>59||r>59)throw new m("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+l/1e3}function $E(t){return tP(qE(t))}function tP(t){if(t.length<6)return!1;for(const i of NE)if(Vh(t,i))return!0;return!1}function iP(t){return pi(ME,t)}function eP(t,i){for(;i.ac<t.length&&iP(t.charAt(i.ac));)i.Ny(1)}function sP(t){const i=t.lastIndexOf("%");if(i>-1){const e=C(t.substring(0,i));if(!S(e)&&e>=0&&e<=100)return e}return null}function nP(t,i){const e=t.toLowerCase();switch(e){case"start":case"center":case"end":case"left":case"right":i.xO=e;break;case"middle":i.xO="center"}}function rP(t,i){let e,s;const n=t.indexOf(",");if(n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s=""),!OE.test(e))return;let r,h;if(Ju(e,"%")){const t=sP(e);if(null===t)return;r=t,h=!1}else{if(!FE.test(e)||e.lastIndexOf("-")>0)return;const t=e.indexOf(".");if(t>=0&&(t!==e.lastIndexOf(".")||!VE.test(e)||UE.test(e)))return;if(r=C(e),S(r))return;h=!0}switch(i.IO=r,i.BO=h,s=s.toLowerCase(),s){case"start":case"center":case"end":i.RO=s;break;case"middle":i.RO="center"}}function hP(t,i){let e,s;const n=t.indexOf(",");n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s="");const r=sP(e);if(null!==r)switch(i.mo=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":i.CO=s;break;case"start":i.CO="line-left";break;case"middle":i.CO="center";break;case"end":i.CO="line-right"}}function oP(t,i,e){const s=hf(e,i=>i.o===t);void 0!==s&&(i.DO=s)}function aP(t,i){const e=sP(t);null!==e&&(i.Vy=e)}function uP(t,i){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":i.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":i.Pt="lr";break;default:i.Pt=""}}function cP(t,i){"VERTICAL"===t.toUpperCase()?i.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(i.Pt="lr")}function dP(t){if(t.indexOf(",")>=0){const i=sP(t.substring(0,t.indexOf(","))),e=sP(t.substring(t.indexOf(",")+1,t.length));return[ur(i||0,0,100),ur(e||100,0,100)]}return null}function lP(t,i){i.o=t}function fP(t,i){"up"===t.toLowerCase()&&(i.JO="up")}function vP(t,i){LE.test(t)&&(i.QO=x(t))}function _P(t,i){const e=sP(t);null!==e&&(i.Ti=e)}function gP(t){return t&&"$E"in t?t.$E:t}r(),r(),r();var pP=class extends _h{get PU(){return this.xU}get IU(){return this.RU}get SU(){return this.CU}get DU(){return this.BU}get Ca(){return this.hu||(this.hu=function(t){return po(zt(t),{get extent(){return t.PU},get styles(){return t.IU},get regions(){return t.SU},get metadata(){return gP(t.DU)},get content(){return gP(t.U)}})}(this)),this.hu}GO(t){return!!_t(this.PU,t.PU)&&(!!_t(this.IU,t.IU)&&(!!_t(this.SU,t.SU)&&(this.DU&&t.DU?!!this.DU.GE(t.DU)&&(this.U&&t.U?this.U.GE(t.U):this.U===t.U):this.DU===t.DU)))}constructor(t,i,e,s,n,r,h,o){super(t,i,e,s),this.xU=void 0,this.RU=void 0,this.CU=void 0,this.BU=void 0,this.xU=n,this.RU=r,this.CU=h,this.BU=o||void 0}};r();var mP=class{get NU(){return this.Lf.XE(!0)}get EO(){return this.MU}get PO(){return this.LU}constructor(t,i,e){this.Lf=void 0,this.MU=void 0,this.LU=void 0,this.MU=t,this.LU=i,to(e)?this.Lf=function(t,i,e){for(const t of["begin","end","dur"])e.rP(t);return e}(0,0,e):this.Lf=e}};r();var wP="http://www.w3.org/XML/1998/namespace";function yP(t,i,e,s){let n=t.ZE(e,i);return 0===n.length&&(n=t.YE(s+":"+i)),n}function AP(t){const i={};for(const e of t.iP)i[e.VE]=e.zE;return i}var bP=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,SP=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,TP="http://www.w3.org/ns/ttml";function kP(t,i,e,s){void 0===e&&(e=BE),void 0===s&&(s=Gy);let n=[];const r=dh(t);return s===Xy?n=function(t,i,e){const s=jt.TD(t),n=lr(s,Ro.OC);if(!n)return[];return xP(dh(n.ck),i,e)}(r,i,e):s===Gy&&(n=xP(r,i,e)),n}function EP(t,i,e){return void 0===e&&(e=BE),IP(t,i,e)}function PP(t,i){const e=LP(i.NU),s={};for(const i of e)s[i]=t[i];return s}function xP(t,i,e){return IP(hm(t,new Ui),i,e)}function IP(t,i,e){const s=[];let n;try{n=zd.UE(t)}catch(t){return s}const r=n.uP;if("tt"!==r.VE)return s;const h=r.ZE(TP,"head")[0],o=r.ZE(TP,"body")[0];if(!o||!h)return s;const a=CP(r.sP("tts:extent")),u=a?{width:a[0],height:a[1]}:void 0,c=function(t){const i={},e=t.ZE(TP,"styling")[0],s=e&&e.ZE(TP,"style")||[];for(const t of s){i[t.nP(wP,"id")]=AP(t)}return i}(h),d=function(t){const i={},e=t.ZE(TP,"layout")[0],s=e&&e.ZE(TP,"region")||[];for(const t of s){const e=t.nP(wP,"id");if(!e)continue;i[e]=AP(t);const s=MP(t);for(const t in s)La.call(s,t)&&(i[e][t]=s[t])}return i}(h),l=a?function(t,i){const e=Ua(t);for(const t of w.keys(e)){const s=CP(e[t].extent);if(s){const n=RP(s[0],i[0]),r=RP(s[1],i[1]);e[t].extent=n+" "+r}const n=CP(e[t].origin);if(n){const s=RP(n[0],i[0]),r=RP(n[1],i[1]);e[t].origin=s+" "+r}}return e}(d,a):d,f=h.ZE(TP,"metadata")[0],v=DP(o,e.yU,e.AU,e.bU);for(const t of v){const i=PP(l,t);s.push(new pP(t.EO,t.PO,t.NU,!1,u,c,i,f))}return s}function RP(t,i){return t/i*100+"%"}function CP(t){if(!t)return;const i=t.split(" ",2);if(2!==i.length)return;const[e,s]=i;if(!Ju(e,"px")||!Ju(s,"px"))return;return[Number(e.slice(0,-2)),Number(s.slice(0,-2))]}function DP(t,i,e,s){let n,r=i,h=e,o=[];const a=[];if(to(t)){var u,c;r=null!=(u=NP(t.sP("begin"),s))?u:r,n=NP(t.sP("dur"),0),h=null!=(c=NP(t.sP("end"),s))?c:void 0!==n?r+n:h;const i=t.jE;for(let e=0;e<i.length;e++)("body"===t.VE||"div"===t.VE)&&i[e].FE>1||(o=o.concat(DP(i[e],r,h,s)))}const d=function(t,i,e){const s=[];s.push(t,i);for(const t of e)s.push(t.EO,t.PO);s.sort(gu);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(ka(s,t+1),t--,n=s.length);return s}(r,h,o);for(let i=0;i<d.length-1;i++){const e=BP(d[i],d[i+1],o);if(e.length<=0&&OP(t)){const e=t.XE(!1);a.push(new mP(d[i],d[i+1],e))}else if(e.length>0){const s=t.XE(!1);e.forEach(t=>s.tP(t.NU)),a.push(new mP(d[i],d[i+1],s))}}return a}function BP(t,i,e){const s=[];for(let n=0;n<e.length;n++){const r=e[n].EO,h=e[n].PO;(r>=t&&h<=i||r<i&&h>=i||r<t&&h>t)&&s.push(e[n])}return s}function NP(t,i){if(t){if(bP.test(t)){const e=bP.exec(t);if(!e)return;const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=e[6];return 3600*s+60*n+r+(h?Number(h)*.1**h.length:0)+i}if(SP.test(t)){const e=SP.exec(t);if(!e)return;const s=Number(e[1]);let n;switch(e[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+i}}}function MP(t){const i={},e=t.YE("style")||[];for(const t of e){const e=AP(t);for(const t in e)La.call(e,t)&&(i[t]=e[t])}return i}function LP(t){let i,e=[];if(to(t)){i=t.sP("region"),i&&e.push(i);const s=t.jE;for(let t=0;t<s.length;t++)e=e.concat(LP(s[t]))}return e}function OP(t){if(to(t)){const i=t.VE.toUpperCase(),e=Boolean(t.sP("smpte:backgroundImage"));return"BR"===i||e}return t.FE===xu.NT}function FP(t){const i=function(t){try{return zd.UE(t).uP}catch(t){}}(t);return"tt"===(null==i?void 0:i.VE)}r(),r();var cc=class extends eo{tt(t){return super.tt(t)}it(t){const i=super.it(t);return i&&(t.Xk=xh.Nh),i}xa(){return TS(this)}};r(),r();var Ao=function(t){return t.OU="subtitles",t.FU="captions",t.UU="descriptions",t.Yn="chapters",t.VU="metadata",t.HU="thumbnails",t}({}),UP=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function VP(t){return"string"==typeof t&&pi(UP,t)}function HP(t,i){return!(!VP(t)||!VP(i))&&(t===i||"subtitles"===t&&"captions"===i||"captions"===t&&"subtitles"===i)}r();var WP=class extends Ga{constructor(t,i,e,s,n){super(t,i,n),this.url=void 0,this.status=void 0,this.url=e,this.status=s}};function qP(t){return t===Ao.OU||t===Ao.FU}function zP(t){return t.some(GP)}function GP(t){return Ho(t,"stpp")}function XP(t){return t.some(jP)}function jP(t){return Ho(t,"vtt")||Ho(t,"wvtt")}function QP(t,i){return Hh(t)&&XP(i)}function KP(t,i){return t===Ao.HU||t===Ao.VU&&i===Ao.HU}function YP(t,i,e,s){for(const n of t.L.II){if(n.EO>e)break;i<=n.PO&&!pi(s,n)&&s.push(n)}}function JP(t,i){return tf(t.jI,i.jI)}function ZP(t,i,e,s){const n=function(t){switch(t){case nh.WEBVTT:return"WebVTT";case nh.SRT:return"SRT";case nh.TTML:return"TTML";default:return""}}(t);return new WP(Vo.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",i,e,s)}function St(t,i){const e=[];for(const s of t.L.II)if(s.PO<=i)e.push(s);else if(s.EO>=i)break;for(const i of e)t.WU(i)}function $P(t,i){if(t.V>0){const e=t.Tn(0),s=_.max(0,e-10);for(const t of i)t.qU(s)}}var es=class extends Ne{get bU(){return this.zU}set bU(t){this.zU=t;for(const i of this.Z.II)i.bU=t}tt(t){t.wn(Te.pa,this.GU),t.bU=this.bU,this.Z.tt(t),this.XU(t)}it(t){t.mn(Te.pa,this.GU),t.Xk=xh.Nh,this.Z.it(t)}jU(t){}QU(t){}XU(t){t.Xk!==xh.Nh?this.jU(t):this.QU(t)}KU(){for(const t of this.Z.II)t.mn(Te.pa,this.GU),t.kn()}qU(t){if(t>0)for(const i of this.Z.II)St(i,t)}YU(t){const i=this.JU;if(t===i)return;this.JU=t;const e=this.Z.II.slice();for(const s of e){const e=this.ZU(s,i,t);s!==e&&(this.it(s),this.tt(e),s.kn())}}hr(){return this.KU(),this.Z.hr(),Promise.resolve()}async kn(){this.Vo(),await this.hr(),this.Z.kn()}constructor(t){super(),this.JU=void 0,this.Z=new cc,this.zU=0,this.GU=t=>{const i=t.Ht;this.XU(i)},this.JU=t}};function Ut(t,i,e){const s=e.tI(t.Lt,t.o,t.Th,t.bs,t.$U,t.Km,t.tR,t.QI);s.iR=t.iR,s.Ax=t.Ax,s.ZI=t.ZI,s.bU=t.bU;const n=t.L.II.slice();for(const i of n)t.WU(i),s.tV(i);return s.Xk=t.Xk,i.iV(t),s}r();var tx=class extends Oi{get error(){return this.errorObject.message}xa(){return this}constructor(t){super(Mc.ma),this.errorObject=void 0,this.errorObject=t}},Kh=class extends es{eV(t){if(!t.src)return;const i=t.kind||Ao.OU,e=this.JU.tI(i,t.id,t.label,t.srclang,t.default);return e.iR=fn(t.src),this.tt(e),e}async sV(t,i){t.Ax=Zu.LOADING;const e=new $n({Yu:t.iR,dk:M.NT,Uk:X.GET,Yg:i});let s,n;try{const t=await this.nV.lk(e);n=t.hk,s=await t.UT()}catch(i){return sa(i),t.Ax=Zu.ERROR,void t.So(new tx(function(t,i){let e=i,s=0;if(rt(t)&&t.name===qc.sE)e=t.lk.Yu;else if(ll(t)){const i=t.oE;if(e=i.gk,s=i.hk,0===s)return new WP(Vo.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",e,s,t)}return new WP(Vo.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",e,s,t)}(i,t.iR)))}try{const i=function(t){return $E(t)?nh.WEBVTT:FP(t)?nh.TTML:nh.SRT}(s);t.Km=i;let e=[];if(i===nh.WEBVTT||i===nh.SRT){e=WE(s).L}else i===nh.TTML&&(e=EP(s,t));for(const i of e)t.tV(i)}catch(i){return sa(i),t.Ax=Zu.ERROR,void t.So(new tx(ZP(t.Km,t.iR,n,i)))}t.Ax=Zu.LOADED}jU(t){pi(this.Z.II,t)&&t.Ax===Zu.NONE&&this.sV(t,this.rV.Yg).catch(yf)}Un(){}ZU(t,i,e){return Ut(t,i,e)}async hr(){this.rV.Zg(),this.rV=new at;for(const t of this.Z.II)this.JU.iV(t);await super.hr()}constructor(t,i){super(t),this.nV=void 0,this.rV=new at,this.nV=i}};function ix(t){return"TXXX"===t.id||"TXX"===t.id}r(),r();var ex=class extends es{hV(){this.oV.wn(Vt.eI,this.aV),this.oV.wn(Vt.nI,this.uV)}cV(){this.oV.mn(Vt.eI,this.aV),this.oV.mn(Vt.nI,this.uV)}dV(t){const i=t.L.II[0];if(!sx(i))return;const e=function(t){const i=t.match(nx);if(!i)return;return{Ht:i[1],bs:i[2]}}(i.U.description),s=e.Ht,n=e.bs;if(this.lV(s,n))return;const r=this.JU.tI(Ao.OU,t.o,s,n,!1,nh.TTML);this.tt(r),this.fV.set(t.jI,r);for(const i of t.L.II)sx(i)&&this.vV(i);t.wn(Te.hI,this._V)}lV(t,i){return this.Z.II.some(e=>e.Th===t&&e.bs===i)}vV(t){if(!t.Ht)return;const i=this.fV.get(t.Ht.jI),e=EP(t.U.text,i,{yU:0,AU:1/0,bU:t.EO});for(const t of e)i.tV(t)}ZU(t,i,e){const s=Ut(t,i,e);return this.fV.forEach((i,e)=>{i===t&&this.fV.set(e,s)}),s}async hr(){for(const t of this.oV.II)t.mn(Te.AI,this.aV),t.mn(Te.hI,this.gV),t.mn(Te.hI,this._V);for(const t of this.Z.II)this.JU.iV(t);this.fV.clear(),await super.hr()}async kn(){this.cV(),await super.kn()}constructor(t,i){super(t),this.oV=void 0,this.fV=void 0,this.pV=void 0,this.aV=void 0,this.gV=void 0,this.uV=void 0,this._V=void 0,this.oV=i,this.fV=ar(),this.pV=t=>{t.mn(Te.AI,this.aV),t.Km?t.Km===nh.ID3&&(t.mn(Te.hI,this.gV),0!==t.L.V?this.dV(t):t.wn(Te.hI,this.gV)):t.wn(Te.AI,this.aV)},this.aV=t=>{this.pV(t.Ht)},this.gV=t=>{this.pV(t.TO.Ht)},this.uV=t=>{const i=t.Ht;if(i.Km!==nh.ID3||!this.fV.has(i.jI))return;const e=this.fV.get(i.jI);this.it(e),this.JU.iV(e),i.mn(Te.AI,this.aV),i.mn(Te.hI,this.gV),i.mn(Te.hI,this._V)},this._V=t=>{sx(t.TO)&&this.vV(t.TO)},this.hV()}};function sx(t){return function(t){return ix(t)&&nx.test(t.description)}(t.U)}var nx=/^Track:(.+),Lang:(.+)$/;function rx(t,i){for(const e of t)if(e.Lt===i&&e.$U)return e}function hx(t,i){ox(rx(t.II,i))}function ox(t){void 0!==t&&(t.Xk=xh.Kn)}function ax(t,i){const e=rx(t.II,i)||function(t,i){for(const e of t)if(e.Lt===i)return e}(t.II,i);ox(e)}function Ds(t){for(const i of UP)i===Ao.Yn?ax(t,i):hx(t,i)}r(),r();var ts=class extends wp{constructor(){super(d.Jw)}};r(),r();var Zr=function(t){return t[t.mV=0]="mV",t[t.wV=1]="wV",t}({});r(),r();var ux=class extends wp{constructor(t){super(Do.SM),this.currentTime=void 0,this.currentTime=t}};r();var ce=class extends wp{constructor(t){super(Do.TM),this.currentTime=void 0,this.currentTime=t}},cx=[Do.wI,Do.TM,d.uo,d.jw],bs=class extends Ne{yV(t,i){!this.AV&&i>=mh.Qn&&(this.AV=!0,this.So(new ut(t,i)))}bV(t,i){!this.SV&&i>=mh.HL&&(this.SV=!0,this.So(new ot(t,i)))}TV(t,i){this.kV||(i>=mh.WL&&this.EV<mh.WL&&!this.PV.hx||this.xV&&i>=mh.WL)&&this.So(new ce(t))}RV(t,i){!this.CV(i)||this.PV.UP||this.PV.lt||this.So(new ux(t))}DV(t,i){this.EV<=mh.HL&&i>=mh.WL&&this.So(new lo(t,i))}BV(t,i){i===mh.qL&&this.So(new qt(t,i))}CV(t){const i=!this.PV.hx&&t<=mh.HL,e=!this.NV&&this.EV<=mh.HL;return i&&!e}get xV(){return!this.PV.hx&&this.NV}hr(){this.EV=mh.VL,this.NV=!0,this.SV=!1,this.AV=!1}kn(){this.Vo(),this.kV&&this.PV.mn(Do.TM,this.MV),this.PV.mn(d.uo,this.LV),this.PV.mn(d.jw,this.OV),this.PV.mn(Do.wI,this.FV)}constructor(t,i=!1){super(),this.PV=void 0,this.kV=void 0,this.EV=void 0,this.NV=void 0,this.SV=void 0,this.AV=void 0,this.FV=void 0,this.LV=void 0,this.OV=void 0,this.MV=void 0,this.PV=t,this.kV=i,this.EV=mh.VL,this.NV=!0,this.SV=!1,this.AV=!1,this.FV=t=>{const i=this.PV.MP,e=this.PV.Ax;e!==this.EV&&this.So(new ou(i,e)),e===mh.VL&&(this.SV=!1,this.AV=!1),this.yV(i,e),this.bV(i,e),this.DV(i,e),this.BV(i,e),this.TV(i,e),this.RV(i,e),this.EV=e},this.LV=()=>{const t=this.PV.MP;this.RV(t,this.EV),this.TV(t,this.EV),this.NV=this.PV.hx},this.OV=()=>{this.NV=this.PV.hx},this.MV=()=>{this.So(new ce(this.PV.MP))},this.PV.wn(Do.wI,this.FV),this.PV.wn(d.uo,this.LV),this.PV.wn(d.jw,this.OV),this.kV&&this.PV.wn(Do.TM,this.MV)}};r();var dx=class extends Ne{get MP(){return this.oa.MP}get UP(){return this.oa.UP}get lt(){return this.TL.lt}get hx(){return this.TL.hx}get Ax(){return this.oa.Ax}zg(){this.Vo(),this.TL.mn(cx,this.Rs)}VV(){this.So(new ou(this.MP,this.Ax))}constructor(t,i){super(),this.oa=void 0,this.TL=void 0,this.oa=t,this.TL=i,this.TL.wn(cx,this.Rs)}};r(),r(),r(),r();var Qo=class{HV(){return this.WV}qV(t){this.WV=t}get SP(){return this.nV}get zV(){return!1}get GV(){const t=this.XV.certificate;if(t)return Z(t)?_c(t):wa(t)}jV(){return this.XV.licenseAcquisitionURL||this.HV()}get QV(){return!1}KV(t){return Promise.resolve()}YV(t,i){return Promise.resolve(void 0)}get zk(){return Boolean(this.XV.useCredentials)}async JV(t,i,e,s){const n=this.ZV(t,i,e,s);if(""===n.Yu)throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.SP.lk(n);return await t.VT(i)}catch(t){return sa(t),void await this.$V(t,n.Yu,s)}}ZV(t,i,e,s){const n=this.tH().MT(),r=this.zk,h={Yu:this.iH(),dk:i,fk:n,zT:t,zk:r,Uk:X.POST,Vk:0,Yg:s,Km:Al.bk,Wk:e};return new $n(h)}eH(t,i){return Promise.resolve(t)}sH(t,i,e,s){return Promise.resolve(t)}tH(){return new Ra(this.XV.headers||{})}async $V(t,i,e){throw new fs(Vo.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}iH(t,i){let e=i;const s=this.XV.queryParameters;if(!e){const t=this.jV();if(!t)return"";e=t}if(s||t){const i=zd.Dh(e);t&&ub(i,t),s&&ub(i,s),e=i.href}return e}nH(t,i){return lx(t)}rH(t){return new j(t)}async hH(t,i,e){const s=await this.nH(t,e),n=await this.JV(s,this.oH,i,e);return this.rH(n)}kn(){}constructor(t,i,e,s,n){this.kS=void 0,this.aH=void 0,this.uH=void 0,this.XV=void 0,this.nV=void 0,this.WV=void 0,this.oH=void 0,this.kS=t,this.aH=i,this.uH=e,this.nV=s,this.oH=n,this.XV=this.cH(i)}};function lx(t){return Promise.resolve(Gu(t).buffer)}var ic=class extends Qo{cH(t){return t.widevine||{}}async dH(t,i){return this.GV?this.GV:this.lH(new j(t),i)}lH(t,i){return super.hH(t,Xa.Pk,i)}constructor(t,i,e,s){super(xi,t,i,e,s)}};r();var fx=function(t){return t.zm="Widevine",t.fH="PlayreadyV2",t.vH="PlayreadyV3",t.qm="PlayreadyV2",t.jm="Fairplay",t}({}),vx={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function _x(t,i){var e,s,n,r;const h=vx[i],o=t.accountName;return{CustomerName:t.customerName,AccountName:o,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(e=zd.Em)?void 0:e.Zs,OSVersion:null==(s=zd.Em)?void 0:s.Lm,DRMProvider:h.DRMProvider,DRMVersion:h.DRMVersion,DRMType:h.DRMType,DeviceVendor:null==(n=zd.Em)?void 0:n.Om,DeviceModel:null==(r=zd.Em)?void 0:r.Fm}}}function gx(t,i){if(!t.accountName)throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, accountName is not set.");if(!t.customerName)throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, customerName is not set.");if(!t.portalId)throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, portalId is not set.");throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration.")}function px(t,i,e){let s;if(pT(t))s={AuthToken:t.authToken,Payload:i};else{if(!mT(t))throw gx(t,e);s={LatensRegistration:_x(t,e),Payload:i}}return wc(JSON.stringify(s))}async function mx(t,i,e){const s=t.oE;if(!s)throw new fs(Vo.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,i);const n=s;let r,h;try{r=await n.FT(e),h=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){h=""}throw new fs(Vo.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.lk.Yu,n.hk,n.vk,h)}r();var wx=class extends ic{static _H(){return zd.Zs.yp?"required":"optional"}$V(t,i,e){return mx(t,i,e)}KV(t){return this.gH?Nc(this.gH.Qy,t):(this.gH=new pa,Promise.resolve())}async nH(t,i){const e=this.aH;if(!e)throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return px(e,Go(t),fx.zm)}rH(t){let i;if(!t.license)throw new fs(Vo.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return i=_c(t.license),i}pH(t){return Promise.resolve(new j(t))}async dH(t,i){this.mH();const e=await this.nH(t,i),s=await this.JV(e,M.CT,Xa.xk,i);return await this.pH(s)}async lH(t,i){const e=await super.lH(t,i);return this.mH(),e}mH(){this.gH||(this.gH=new pa),this.gH.Xy()}kn(){this.gH&&this.gH.Zg(),super.kn()}constructor(t,i,e){super(t,i,e,M.DT),this.gH=void 0}};r();var yx=class extends ic{get wH(){if(wT(this.aH))return this.aH.token}async nH(t,i){const e=await lx(t),s=this.uH,n=am(new j(e)),r=this.wH;if(void 0===r)throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,i,e){super(t,i,e,M.CT),this.qV("https://widevine-proxy.drm.technology/proxy")}};function Ax(t,i){let e=i||{};return t.ticket&&t.sessionId&&(e=Mo({},e,{SessionId:t.sessionId,Ticket:t.ticket})),Mo({},e,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}r(),r();var bx=class extends ic{iH(t,i){let e=t;return vT(this.aH)&&(e=Ax(this.aH,e)),super.iH(e,i)}constructor(t,i,e){super(t,i,e,M.CT),this.qV("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}};r(),r();var Sx="Conax-Custom-Data";function Tx(t,i,e){const s=t&&fT(t)&&t;if(s&&!e.has(Sx)){const t=JS(s)?s.token:void 0,n=JS(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:i+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});e.set(Sx,r)}return e}var kx=class extends ic{tH(){const t=super.tH();return Tx(this.aH,"Widevine",t)}constructor(t,i,e){super(t,i,e,M.CT),this.qV("https://connect.conax.com:8094/license")}};function Ex(t){const i=Yh(new j(t));return _c(JSON.parse(i).license)}function Px(t){return"string"==typeof t.token?t.token:wc(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function xx(t,i,e){let s;return s=e.token?"x-dt-auth-token":"dt-custom-data",t.set(s,i),t}r(),r();var Ix=class extends ic{get wH(){return Px(this.aH)}rH(t){return Ex(t)}tH(){return xx(super.tH(),this.wH,this.aH)}constructor(t,i,e){super(t,i,e,M.CT),this.qV("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}};r();var Rx=class extends ic{tH(){const t=super.tH(),i=this.aH.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e){super(t,i,e,M.CT)}};async function Cx(t,i,e,s){if(!yT(t))throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new Ra;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const h=t.streamId;let o;o=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:i,licenseType:o,streamId:h},u={Yu:t.ticketAcquisitionURL,dk:M.DT,fk:n,Uk:X.POST,zT:JSON.stringify(a),Yg:s},c=await e.lk(u);return await c.FT()}r(),r();var Dx=class extends ic{tH(){const t=super.tH();return t.set("Content-Type","application/json"),t}async nH(t,i){const e=pm(t.buffer),s=this.aH,n=await Cx(s,"widevine_modular",this.SP,i);this.qV(n.licenseServerUrl);const r=vc(JSON.stringify({payload:e,ticket:n.ticket}));return super.nH(r,i)}rH(t){return _c(t.license)}constructor(t,i,e){super(t,i,e,M.DT)}};r();var Bx=class extends ic{tH(){if(!AT(this.aH))throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.tH();return t.set("X-AxDRM-Message",this.aH.token),t}constructor(t,i,e){super(t,i,e,M.CT)}};function Nx(t){const i=new j(2*t.length);for(let e=0;e<t.length;e+=1)i[2*e]=t.charCodeAt(e),i[2*e+1]=0;return i}r();var gc=class extends Qo{cH(t){return t.playready||{}}tH(){const t=new Ra(this.yH);return t.OT(super.tH()),t}AH(t){return t.length>=1&&t[0].jE.length>0}YV(t){const i=this.aH.playready.customData;if(i){const t=Nx(i),e=Nx('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+Go(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{qS:e}})}return super.YV(t)}async nH(t,i){const e=await lx(t);return this.bH(e)}async bH(t){var i,e;let s=null;const n=so(new DataView(t),new Ui,!0);let r;try{r=zd.UE(n)}catch(t){return s}const h=null==(i=r.YE("PlayReadyKeyMessage")[0])?void 0:i.YE("LicenseAcquisition")[0];var o;const a=null!=(o=null==h?void 0:h.YE("Challenge"))?o:[];this.AH(a)&&(s=wu(a[0].eP));const u=new Ra;var c;const d=null!=(c=null==h||null==(e=h.YE("HttpHeaders")[0])?void 0:e.YE("HttpHeader"))?c:[];for(const t of d){const i=t.YE("name")[0].eP,e=t.YE("value")[0].eP;u.append(i,e)}return this.yH=u,s}dH(t,i){return Promise.resolve(t)}lH(t,i){return super.hH(t,Xa.Ik,i)}constructor(t,i,e){super(Zg,t,i,e,M.CT),this.yH=void 0}};r(),r();var Mx=class t{static SH(t){return"3"===t.version?fx.vH:fx.fH}TH(){const t={};if(this.zb===fx.vH){const i={LatensRegistration:_x(this.kH,fx.vH)};t["X-TITANIUM-DRM-CDATA"]=wc(JSON.stringify(i))}return t}get EH(){return this.zb}get MS(){return this.zb===fx.fH}constructor(i){this.kH=void 0,this.zb=void 0,this.kH=i,this.zb=t.SH(i)}};var Lx=class extends gc{YV(t){const i=this.aH;if(!this.aH)throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(mT(i)){const t={};return t.playready={qS:Ox(i,this.PH.EH)},Promise.resolve(t)}return Promise.reject(gx(i,fx.qm))}tH(){const t=new Ra(this.PH.TH());return t.OT(super.tH()),t}async $V(t,i,e){const s=t.oE;if(!s)throw new fs(Vo.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i);let n,r;try{const t=await s.HT(e),i=Yh(new j(t)),o=zd.UE(i);if(o){const t=function(t,i){return function(t,i){const e=t.m.slice(),s=[];for(;e.length>0;){const t=e.shift();i(t)?s.push(t):e.push(...t.m)}return s}(t,t=>t.JE===i)}(o,"CustomData");var h;if(t.length>0)n=JSON.parse(t[0].eP),r=null==(h=n.DrmErr)?void 0:h.desc}}catch(t){}throw new fs(Vo.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i,s.hk,s.vk,r)}AH(t){if(1!==t.length)throw new fs(Vo.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,i,e){super(t,i,e),this.PH=void 0,this.PH=new Mx(this.aH)}};function Ox(t,i){const e=_x(t,i),s=e.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+wc('<LatensRegistration formatversion="'+s+'"><AccountName>'+e.AccountName+"</AccountName><CustomerName>"+e.CustomerName+"</CustomerName><PortalID>"+e.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+e.DeviceInfo.DeviceType+"</DeviceType><OSType>"+e.DeviceInfo.OSType+"</OSType><OSVersion>"+e.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+e.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+e.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+e.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+e.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+e.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=nm(n,!0);return nm('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+Go(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}r();var Fx=class extends gc{get wH(){if(wT(this.aH))return this.aH.token}AH(t){if(1!==t.length)throw new fs(Vo.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}iH(t,i){const e=Mo({},t||{},{token:this.wH});return super.iH(e,i)}constructor(t,i,e){super(t,i,e),this.qV("https://playready-license.drm.technology/rightsmanager.asmx")}};r();var Ux=class extends gc{iH(t,i){let e=t;return vT(this.aH)&&(e=Ax(this.aH,e)),super.iH(e,i)}constructor(t,i,e){super(t,i,e),this.qV("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}};r();var Vx=class extends gc{tH(){const t=super.tH();return Tx(this.aH,"PlayReady",t)}constructor(t,i,e){super(t,i,e),this.qV("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}};r();var Hx=class extends gc{get wH(){return Px(this.aH)}rH(t){const i=function(t){const i=Yh(new j(t));return Vh(i,"<?xml")?0:1}(t);return 1===i?Ex(t):super.rH(new j(t))}tH(){return xx(super.tH(),this.wH,this.aH)}constructor(t,i,e){super(t,i,e),this.qV("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};r();var Wx=class extends gc{tH(){const t=super.tH();return this.xH&&t.set("Ticket",this.xH),t.set("Content-Type","text/xml"),t}async nH(t,i){const e=this.aH,s=await Cx(e,"playready",this.SP,i);return this.qV(s.licenseServerUrl),this.xH=s.ticket,super.nH(t,i)}constructor(t,i,e){super(t,i,e),this.xH=void 0}};r();var qx=class extends gc{tH(){if(!AT(this.aH))throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.tH();return t.set("X-AxDRM-Message",this.aH.token),t}};r(),r();var Hu=function(t){return t.DT="application/json",t.IH="application/x-www-form-urlencoded",t.RH="application/octet-stream",t.NT="text/plain;charset=UTF-8",t}({}),ro=class extends Qo{get QV(){return!0}CH(){return this.XV.certificateURL||this.DH}BH(t){this.DH=t}nH(t){return Promise.resolve(this.NH(t,this.MH))}NH(t,i){return"spc="+encodeURIComponent(Go(t))+"&assetId="+encodeURIComponent(i)}get LH(){return Hu.IH}cH(t){return t.fairplay||{}}OH(t){const i=t.indexOf("?");if(i>=0)return Promise.resolve(t.substr(i+1));{const i=t.split("skd://").pop();if(i){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(i))return Promise.resolve(i)}const e=t.split("/");return Promise.resolve(e[e.length-1])}}async YV(t){var i;const e=null!=(i=this.FH)?i:pc(new j(t)),s=await this.OH(e);this.MH=s;const n={};return n.fairplay={ZS:s},n}tH(){const t=super.tH();return t.set("Content-Type",this.LH),t}async dH(t,i){return this.GV?this.GV:await this.UH(i)}lH(t,i){return super.hH(t,Xa.Tk,i)}VH(t){const i=this.CH(),e=this.tH(),s={Yu:i,dk:M.CT,fk:e,Uk:X.GET,zk:!1,zT:null,Vk:0,Yg:t,Km:Al.bk,Wk:Xa.Ek};return new $n(s)}async UH(t){const i=this.VH(t),e=await this.SP.lk(i),s=await e.HT();return new j(s)}rH(t){let i;if("string"==typeof t){let e=t.trim();"<ckc>"===e.substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),i=_c(e)}else i=new j(t);return i}iH(t,i){let e=super.iH(t,i);return Vh(e,"skd:")&&(e=e.substr(4)),e}constructor(t,i,e,s,n){super(t.kS,i,e,s,n),this.MH="",this.DH=void 0,this.FH=void 0,this.FH=t.HH}};r();var zx=class extends ro{get LH(){return Hu.RH}OH(t){let i=t.split("://",1);return"skd"!==i[0].slice(-3).toLowerCase()?Promise.resolve(""):(i=t.split(";",2),i.length>1?Promise.resolve(i[1]):Promise.resolve(super.OH(t)))}async nH(t){return t}rH(t){return new j(t)}iH(t,i){const e=t||{};return e.p1=ku(),super.iH(e,i)}constructor(t,i,e,s){super(t,i,e,s,M.CT)}};r();var Gx=class extends ro{get LH(){return Hu.DT}get wH(){if(!wT(this.aH))throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.aH.token}NH(t,i){const e={token:this.wH,contentId:i,payload:Go(t)};return JSON.stringify(e)}rH(t){return new j(t)}tH(){const t=super.tH();return t.set("x-vudrm-token",this.wH),t}constructor(t,i,e,s){super(t,i,e,s,M.CT),this.qV("https://fairplay-license.drm.technology/license"),this.BH("https://fairplay-license.drm.technology/certificate")}};r();var Xx="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",jx="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",Qx=class extends ro{rH(t){const i=function(t){let i;try{i=JSON.parse(t).ckc}catch(t){throw new fs(Vo.CONTENT_PROTECTION_LICENSE_INVALID,Xx)}if(!i)throw new fs(Vo.CONTENT_PROTECTION_LICENSE_ERROR,jx);return i}(Yh(new DataView(t)));return super.rH(i)}constructor(t,i,e,s){super(t,i,e,s,M.CT)}};r();var Kx=class extends ro{get LH(){return Hu.DT}async nH(t){const i=this.aH;if(!i)throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return px(i,Go(t),fx.jm)}rH(t){try{let i;if(Z(t)){const e=t.trim();i=JSON.parse(e)}else i=t;if(i.license){const t=wu(i.license);return new j(t)}throw new fs(Vo.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new fs(Vo.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}$V(t,i,e){return mx(t,i,e)}constructor(t,i,e,s){super(t,i,e,s,M.DT)}};r();var Yx=class extends ro{CH(){const t=super.CH();if(!t)return t;const i=zd.Dh(t),e=this.aH;return vT(e)&&ub(i,{accountId:e.accountId,applicationId:e.applicationId||""}),i.href}OH(t){return vT(this.aH)?Promise.resolve(this.aH.contentId):super.OH(t)}async nH(t){return t}rH(t){return new j(t)}get LH(){return Hu.RH}iH(t,i){let e=t;return vT(this.aH)&&(e=function(t,i){return Mo({},Ax(t,i),{KeyId:t.keyId})}(this.aH,e)),super.iH(e,i)}constructor(t,i,e,s){super(t,i,e,s,M.CT),this.qV("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.BH("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}};r();var Jx=class extends ro{tH(){const t=super.tH();return Tx(this.aH,"FairPlay",t)}async UH(t){const i={Yu:this.CH(),dk:M.CT,fk:{},Uk:X.GET,zk:!1,zT:null,Vk:0,Yg:t,Km:Al.bk,Wk:Xa.Ek},e=await this.SP.lk(i),s=await e.HT();return new j(s)}async nH(t){return t}OH(t){const i=t.indexOf("?");if(0===t.indexOf("skd://")){let e;return e=i>=0?t.substring(6,i):t.substring(6),Promise.resolve(function(t){return Yh(_c(t))}(e))}return Promise.resolve("unknown")}rH(t){try{const i=JSON.parse(t);return new j(wu(i.CkcMessage))}catch(t){throw new m("CFLRW-66")}}constructor(t,i,e,s){if(super(t,i,e,s,M.NT),!fT(i))throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.qV("https://connect.conax.com:8097/license")}};r();var Zx=class extends ro{OH(t){return Vh(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new fs(Vo.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}NH(t,i){return"spc="+Go(t)+"&assetId="+i}constructor(t,i,e,s){super(t,i,e,s,M.NT),this.qV(oT[an.jm])}};r();var $x=class extends ro{get wH(){return Px(this.aH)}NH(t,i){const e="spc="+encodeURIComponent(Go(t))+"&"+encodeURI(i);return"persistent"===this.XV.licenseType?e+"&offline=true":e}tH(){return xx(super.tH(),this.wH,this.aH)}constructor(t,i,e,s){super(t,i,e,s,M.NT),this.qV("https://lic.drmtoday.com/license-server-fairplay/")}};r();var tI=class extends ro{OH(t){let i=t;return Vh(i,"skd:")&&(i="http:"+i.substring(4)),Vh(i,"http:")||Vh(i,"https:")?Promise.resolve(zd.Dh(i).hostname):Promise.reject(new m("Could not parse ExpressPlay FairPlay content ID."))}async nH(t){return t}rH(t){return new j(t)}get LH(){return Hu.RH}constructor(t,i,e,s){super(t,i,e,s,M.CT)}};r();var iI=class extends ro{tH(){const t=super.tH(),i=this.aH.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e,s){super(t,i,e,s,M.NT)}};r();var eI=class extends ro{async UH(t){const i=this.CH(),e=this.tH(),s={Yu:i,dk:M.DT,fk:e,Uk:X.POST,Yg:t,Km:Al.bk,Wk:Xa.Ek},n=await this.SP.lk(s),r=await n.FT();return new j(_c(r.certificate))}get LH(){return Hu.DT}async lH(t,i,e){void 0===e&&(e=M.NT);const s=Go(t),n=this.aH,r=await Cx(n,"fairplay",this.SP,i),h=vc(JSON.stringify({spc:s,ticket:r.ticket})),o={Yu:this.jV(),dk:M.DT,fk:this.tH(),Uk:X.POST,zT:h,Vk:0,Yg:i,Km:Al.bk,Wk:Xa.Tk},a=await this.SP.lk(o);return _c((await a.FT()).licence)}constructor(t,i,e,s){if(super(t,i,e,s,M.DT),!yT(i))throw new m("Invalid Xstream DRM configuration")}};r();var sI=class extends ro{NH(t,i){return Go(t)}rH(t){if(0===t.length)throw new fs(Vo.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.rH(t)}tH(){const t=super.tH();return t.set("Content-Type","text/plain"),t}constructor(t,i,e,s){super(t,i,e,s,M.NT)}};r();var nI=class extends ro{get LH(){return Hu.DT}NH(t,i){return t}rH(t){return new j(t)}tH(){if(!AT(this.aH))throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.tH();return t.set("X-AxDRM-Message",this.aH.token),t}constructor(t,i,e,s){super(t,i,e,s,M.CT)}};r();var rI=class extends ro{get LH(){return Hu.NT}NH(t,i){const e={spc:Go(t)};return JSON.stringify(e)}OH(t){const i=zd.Dh(t);return this.WH=t,i.searchParams.has("b")?Promise.resolve(i.searchParams.get("b")):Promise.reject(new fs(Vo.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}iH(t,i){let e=this.jV();return!e&&this.WH&&(e=this.WH),e&&(e=e.replace("skd://","https://")),super.iH(t,i||e)}rH(t){try{let i;if(i=Z(t)?JSON.parse(t.trim()):t,i.ckc)return _c(i.ckc)}catch(t){throw new fs(Vo.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new fs(Vo.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,i,e,s){super(t,i,e,s,M.DT),this.WH=void 0}};r(),r(),r();var Nu=class{qH(t){return this.zH(t)}GH(t,i){throw new g(i+" must be "+this.XH+". (Received: "+t+")")}constructor(t,i){this.zH=void 0,this.XH=void 0,this.zH=t,this.XH=i}},xt=(new Nu(function(t){return!0},"any"),new Nu(ho,"a number")),hi=new Nu(Z,"a string"),hI=new Nu(Xd,"a boolean"),Zh=(new Nu(jd,"a date"),new Nu(qd,"undefined")),Ns=new Nu(Lu,"an object"),oI=new Nu(function(t){return null===t},"null");new Nu(function(t){return null==t},"null or undefined");function aI(t,i){throw new g(i+" has an incorrect type")}var uI=class{qH(t){if(!Lu(t))return!1;for(const i of w.keys(this.Qp)){if(!this.Qp[i].qH(t[i]))return!1}return!0}GH(t,i){if(!Lu(t))throw new g(i+" must be an object.");for(const e of w.keys(this.Qp)){const s=this.Qp[e];if(!s.qH(t[e]))return s.GH(t[e],i+"."+String(e))}throw new g}constructor(t){this.Qp=void 0,this.Qp=t}};function $h(t){return new uI(t)}function cI(t){return w.keys(t).map(i=>t[i])}var dI=class{qH(t){return pi(this.jH,t)}GH(t,i){return aI(0,i)}constructor(t){this.jH=void 0,this.jH=t}};function lI(t){return new dI(t)}var fI=class{qH(t){return this.QH.some(i=>i.qH(t))}GH(t,i){return aI(0,i)}constructor(t){this.QH=void 0,this.QH=t}};function Fs(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return new fI(i)}var vI=class{qH(t){return ul(t)&&t.every(t=>this.KH.qH(t))}GH(t,i){if(!ul(t))throw new g(i+" must be an array.");for(let e=0;e<t.length;e++){const s=t[e];this.KH.qH(s)||this.KH.GH(s,i+"["+e+"]")}return aI(0,i)}constructor(t){this.KH=void 0,this.KH=t}};function ln(t){return new vI(t)}var _I=class{qH(t){return Lu(t)&&w.keys(t).every(i=>this.KH.qH(t[i]))}GH(t,i){if(!Lu(t))throw new g(i+" must be an object.");for(const e of w.keys(t))if(!this.KH.qH(t[e]))return this.KH.GH(t[e],i+"."+e);return aI(0,i)}constructor(t){this.KH=void 0,this.KH=t}};function gI(t){return new _I(t)}var pI=class{qH(t){return this.KH().qH(t)}GH(t,i){return this.KH().GH(t,i)}constructor(t){this.KH=void 0,this.KH=mu(t)}};var mI=$h({responseCode:xt,isException:hI,description:hi,title:hi,correlationId:hi});async function wI(t,i,e,s,n){const r=function(t,i,e,s){const n={token:i.token,account:i.accountId,form:"json"},r=decodeURIComponent(Gc(e,n)),h=new Ra({});h.append("Content-Type","application/json");const o=Go(t),a={getFairplayLicense:{releasePid:i.releasePid,spcMessage:o}};return{Yu:r,dk:M.NT,fk:h,Uk:X.POST,zT:JSON.stringify(a),Yg:s,Km:Al.bk,Wk:Xa.Tk}}(t,i,e,n);return await async function(t,i){const e=await i.lk(t),s=await e.FT();if(mI.qH(s))throw new fs(Vo.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.Yu,s.responseCode);return _c(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var yI=class extends ro{OH(t){const i=t.replace("FairPlay",this.YH.releasePid);return super.OH(i)}async lH(t,i){return await wI(t,this.YH,this.jV(),this.SP,i)}constructor(t,i,e,s){super(t,i,e,s,M.CT),this.YH=void 0,this.YH=i}};r();var AI=class extends Qo{cH(t){return t.clearkey||{}}async JV(t,i,e,s){const n=this.XV;if(this.jV())return super.JV(t,this.oH,e,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map(t=>({kty:"oct",kid:t.id,k:t.value}))};return br(JSON.stringify(t)).buffer}throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}dH(t,i){return Promise.resolve(new j(0))}async lH(t,i){const e=await super.hH(t,Xa.Rk,i),s=JSON.parse(pc(e));if(s.keys)for(const t of s.keys)t.k&&(t.k=Cp(t.k)),t.kid&&(t.kid=Cp(t.kid));return br(JSON.stringify(s))}constructor(t,i,e,s){super(t,i,e,s,M.CT)}},bI=class extends AI{constructor(t,i,e){super(ip,t,i,e)}},SI=class extends AI{constructor(t,i,e){super(ep,t,i,e)}};r();var TI=class extends ic{};r(),r();var kI={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function EI(t,i,e){const s=BI(i),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(i);const r=await Nc(Promise.resolve(n.call(t,s)),e);return om(r)?wa(r):DI(Mo({},kI,r))}async function PI(t,i,e,s,n){const r=t.onCertificateResponse,h=CI(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);return wa(await Nc(Promise.resolve(r.call(t,h)),n))}async function xI(t,i,e,s){const n=await async function(t,i,e,s){const n=null==t?void 0:t.onLicenseRequest,r=RI(i,e);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const h=await Nc(Promise.resolve(n.call(t,r)),s);if(om(h))return wa(h).buffer;return Mo({fairplaySkdUrl:void 0},kI,h)}(t,i,e,s);return n instanceof ArrayBuffer?n:DI(n)}async function II(t,i,e,s,n,r){const h=RI(e,n),o=await async function(t,i,e,s,n){const r=null==t?void 0:t.onLicenseResponse,h=CI(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);0;const o=await Nc(Promise.resolve(r.call(t,h)),n);return wa(o)}(t,new j(i),h,s,r);return wa(o)}function RI(t,i){return Mo({},BI(t),{fairplaySkdUrl:i})}function CI(t,i,e){return{url:e.gk,status:e.hk,statusText:e.vk,headers:e.fk.MT(),body:t,request:i}}function DI(t){return new $n({Yu:t.url,Uk:t.method,fk:t.headers,zT:t.body,zk:t.useCredentials,Km:Al.bk})}function BI(t){var i;return{url:t.Yu,body:null!=(i=NI(t.zT))?i:null,headers:t.fk.MT(),method:t.Uk,useCredentials:t.zk}}function NI(t){if(t)return"string"==typeof t?br(t):t instanceof ArrayBuffer?new j(t):xc(t)?ta(t):void 0}var MI=class extends gc{dH(t,i){return Promise.resolve(t)}async lH(t,i){const e=await this.bH(Gu(t).buffer),s=this.ZV(e,M.CT,Xa.Ik,i),n=await xI(this.JH,s,void 0,i);if(n instanceof ArrayBuffer)return new j(n);if(""===n.Yu)throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.SP.lk(n),e=await t.HT(i);return await II(this.JH,e,s,t,void 0,i)}catch(t){throw sa(t),new fs(Vo.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,i,e,s){super(t,i,e),this.JH=void 0,this.JH=s}};r();var LI=class extends TI{async dH(t,i){if(this.GV)return this.GV;const e=this.ZV(t,M.CT,Xa.xk,i),s=await EI(this.JH,e,i);if(s instanceof j)return s;if(""===s.Yu)throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.SP.lk(s),r=await n.HT(i)}catch(t){throw sa(t),new fs(Vo.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const h=RI(e,void 0);return await PI(this.JH,new j(r),h,n,i)}async lH(t,i){const e=this.ZV(t,M.CT,Xa.Pk,i),s=await xI(this.JH,e,void 0,i);if(s instanceof ArrayBuffer)return new j(s);if(""===s.Yu)throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.SP.lk(s),n=await t.HT(i);return await II(this.JH,n,e,t,void 0,i)}catch(t){throw sa(t),new fs(Vo.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,i,e,s){super(t,i,e,M.CT),this.JH=void 0,this.JH=s}};r();var OI=class extends ro{async dH(t,i){if(this.GV)return this.GV;const e=this.VH(i),s=await EI(this.JH,e,i);if(xc(s))return s;try{const t=await this.SP.lk(s),n=await t.HT(),r=RI(e,void 0);return await PI(this.JH,new j(n),r,t,i)}catch(t){throw sa(t),new fs(Vo.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async lH(t,i){const e=this.ZV(t,M.CT,Xa.Tk,i),s=await xI(this.JH,e,this.ZH,i);if(s instanceof ArrayBuffer)return new j(s);if(""===s.Yu)throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.SP.lk(s),n=await t.HT(i);return await II(this.JH,n,e,t,this.ZH,i)}catch(t){throw sa(t),new fs(Vo.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}OH(t){var i;return this.ZH=t,(null==(i=this.JH)?void 0:i.extractFairplayContentId)?Promise.resolve(this.JH.extractFairplayContentId(t)):super.OH(t)}constructor(t,i,e,s,n){super(t,i,e,s,M.CT),this.JH=void 0,this.ZH=void 0,this.JH=n}},FI=class{$H(t,i,e,s){switch(t.kS.Km){case an.zm:return this.tW(i,e,s);case an.qm:return this.iW(i,e,s);case an.jm:return this.eW(t,i,e,s);case an.Xm:return this.sW(i,e,s);case an.Gm:default:return this.nW(i,e,s)}}tW(t,i,e){const s=function(t){return t.integration===jS&&Z(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&tT.LR.DR(s,Wg)){const n=tT.LR.MR(s,Wg,t);return new LI(t,i,e,n)}switch(s){case Pr:return new wx(t,i,e);case OS:return new yx(t,i,e);case LS:return new bx(t,i,e);case NS:return new kx(t,i,e);case US:return new Ix(t,i,e);case HS:return new Rx(t,i,e);case WS:return new Dx(t,i,e);case zS:return new Bx(t,i,e);default:return new TI(t,i,e,M.CT)}}iW(t,i,e){const s=t.integration;if(s&&tT.LR.DR(s,Vg)){const n=tT.LR.MR(s,Vg,t);return new MI(t,i,e,n)}switch(s){case Pr:return new Lx(t,i,e);case OS:return new Fx(t,i,e);case LS:return new Ux(t,i,e);case NS:return new Vx(t,i,e);case US:return new Hx(t,i,e);case WS:return new Wx(t,i,e);case zS:return new qx(t,i,e);default:return new gc(t,i,e)}}eW(t,i,e,s){const n=i.integration;if(n&&tT.LR.DR(n,Qs)){const r=tT.LR.MR(n,Qs,i);return new OI(t,i,e,s,r)}switch(n){case MS:return new zx(t,i,e,s);case OS:return new Gx(t,i,e,s);case FS:return new Qx(t,i,e,s);case Pr:return new Kx(t,i,e,s);case LS:return new Yx(t,i,e,s);case NS:return new Jx(t,i,e,s);case Ar:return new Zx(t,i,e,s);case US:return new $x(t,i,e,s);case VS:return new tI(t,i,e,s);case HS:return new iI(t,i,e,s);case WS:return new eI(t,i,e,s);case qS:return new sI(t,i,e,s);case zS:return new nI(t,i,e,s);case GS:return new rI(t,i,e,s);case XS:return new yI(t,i,e,s);default:return new ro(t,i,e,s,M.NT)}}nW(t,i,e){return new bI(t,i,e)}sW(t,i,e){return new SI(t,i,e)}rW(t){return t.Km===an.qm||t.Km===an.zm||t.Km===an.jm||t.Km===an.Gm||t.Km===an.Xm}MS(t,i){var e;if(t.Km!==an.qm)return!1;if(it(null==(e=i.playready)?void 0:e.customData))return!0;const s=i.integration;return(!s||!tT.LR.DR(s,Qs))&&(s===Pr&&new Mx(i).MS)}_H(t,i){if(t.Km!==an.zm)return;const e=i.integration;return e&&tT.LR.DR(e,Qs)?void 0:e===Pr?wx._H():void 0}};r(),r(),r();var UI="theoplayer-stored-network-info-v2",VI=25e5,HI=class{hW(t){var i;const e=null==(i=zd.mP)?void 0:i.Wy(t);if(void 0===e)return;const s=JSON.parse(e);if(void 0!==s&&void 0!==s[this.oW]){if(!this.aW(s))return s[this.oW].availableBandwidth;var n;null==(n=zd.mP)||n.qy(t,JSON.stringify({}))}}uW(){const t=this.hW(UI);if(void 0!==t)return t;const i=this.hW("theoplayer-stored-network-info");return i?8*i:void 0}aW(t){const i=t[this.oW].storedTimestamp;return!!i&&ku()-i>36e5}cW(t){this.dW=t,this.lW()}fW(){var t;return null!=this.dW||(this.dW=null!=(t=this.uW())?t:VI),this.dW}constructor(){this.oW=LA,this.dW=void 0,this.lW=ph(()=>{var t;const i={[this.oW]:{availableBandwidth:this.dW,storedTimestamp:ku()}};null==(t=zd.mP)||t.qy(UI,JSON.stringify(i))},1e4)}};HI.Ng=new HI,r();var V=function(t){return t[t.vW=0]="vW",t[t._W=1]="_W",t[t.gW=2]="gW",t[t.pW=3]="pW",t[t.mW=4]="mW",t[t.wW=5]="wW",t[t.dR=6]="dR",t[t.yW=7]="yW",t[t.AW=8]="AW",t[t._R=9]="_R",t[t.bW=10]="bW",t[t.gR=11]="gR",t[t.TW=12]="TW",t}({});r();var To=class{get kW(){return 0}get EW(){return 0}PW(t){}};r(),r();var WI=class extends wp{constructor(t){super("contentProtectionsTracked"),this.xW=void 0,this.xW=t}},ya=class extends Ne{IW(t){this.kH=t}_H(t){const i=this.kH;if(void 0!==i)return this.RW._H(t,i)}MS(t){const i=this.kH;return void 0!==i&&this.RW.MS(t,i)}DW(t){const i={kS:t.kS,BW:t.BW||[],NW:t.NW,HH:t.HH,MW:t.MW||[]},e=this.RW.$H(i,this.kH||{},t.uH,this.nV);return i.NW&&e.qV(i.NW),new qI(e)}LW(t){if(!t)return;Jr(t,t=>void 0!==t.uH)&&this.So(new WI(t))}constructor(t,i=new FI){super(),this.nV=void 0,this.RW=void 0,this.kH=void 0,this.nV=t,this.RW=i}},qI=class{KV(t){return this.OW.KV(t)}YV(t,i,e){return this.OW.YV(i,e)}QV(){return this.OW.QV||void 0!==this.OW.GV}dH(t,i){return this.OW.dH(t,i)}lH(t,i,e){return i&&this.OW.qV(i),this.OW.lH(t,e)}zg(){this.OW.kn()}constructor(t){this.OW=void 0,this.OW=t}};r();var Yu=class extends eo{FW(t){this.UW.push(t);for(const i of t.II)this.tt(i);this.VW(t)}WW(t){oi(this.UW,t),this.qW(t);for(const i of t.II)this.zW(i)||this.it(i)}zW(t){for(const i of this.UW)if(i.DI(t))return!0;return!1}VW(t){t.wn(Vt.eI,this.GW),t.wn(Vt.nI,this.uV)}qW(t){t.mn(Vt.eI,this.GW),t.mn(Vt.nI,this.uV)}kn(){for(;this.UW.length>0;)this.WW(this.UW[0]);super.kn()}xa(){return TS(this)}constructor(t){super(),this.UW=[],this.GW=t=>{this.tt(t.Ht)},this.uV=t=>{const i=t.Ht;this.zW(i)||this.it(i)};for(const i of t)this.FW(i)}};r(),r();var zI,GI={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},XI=class{get Ca(){return null!=this.hu||(this.hu=function(t){return{get enabled(){return t.Rt},set enabled(i){t.Rt=Zn(i)},get monitoringLivePlayback(){return t.XW},get currentLatency(){return t.BL},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.Cd)}}}(this)),this.hu}get Rt(){var t,i;return null!=(i=this.We)?i:Boolean(null==(t=this.jW)?void 0:t.Rt)}set Rt(t){this.We=t,this.jW&&(this.jW.Rt=t)}get XW(){var t,i;return null!=(i=null==(t=this.jW)?void 0:t.sL)&&i}get BL(){var t;return null==(t=this.jW)?void 0:t.DL}get Cd(){return this.jW?this.jW.nL:GI}Ea(t){this.jW=t,void 0!==this.We&&(this.jW.Rt=this.We)}hr(){this.jW=void 0,this.We=void 0}constructor(){this.hu=void 0,this.jW=void 0,this.We=void 0}};var jI=Boolean(s&&s.TextTrack),QI=class extends _o{get BL(){}get QW(){const t=this.TL.IP,i=this.MP;return t.Cr(i,.01)}get ht(){return this.YL}get IP(){return this.TL.IP._s()}get CP(){return this.TL.CP}set CP(t){t&&this.TL.KW(t)}get bt(){return this.Ac}get MP(){return void 0!==this.YW?this.YW:this.TL.MP}set MP(t){this.OP(t)}OP(t,i){this.KP&&(this.YW=t),this.TL.My(t)}get ct(){return this.TL.ct}get UP(){return this.TL.UP}get lt(){return this.JW}get WP(){return this.ZW}get zP(){}get jP(){}get KP(){return this.TL.KP}get JP(){return Mo({},{iO:0,eO:0,sO:0,nO:0,rO:0,hO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.TL.ZP())}get $P(){return this.TL.$P}set $P(t){this.TL.$P=t}get sx(){return!0}get hx(){return this.TL.hx}get ux(){return this.TL.ux}set ux(t){this.TL.ux=t}get _x(){return this.TL.$W.played}get mx(){return this.tq}set mx(t){this.tq=t,this.iq&&(this.iq.mx=t)}get Ax(){return this.TL.Ax}get Sx(){return this.TL.Sx._s()}get kx(){return this.TL.kx}get nq(){return this.TL.nq}get nt(){return this.Gl}get rt(){return this.$L}get Rx(){return this.TL.Rx}get Bx(){return this.TL.Bx}get Mx(){return this.TL.Mx}set Mx(t){this.TL.Mx=t}get Fx(){return this.rq}get Vx(){return this.TL.Vx}set Vx(t){this.TL.Vx=t}get hq(){return this.oq}we(){this.TL.we()}be(){this.TL.be()}async Ta(t,i,e){ii(e),this.Ac=t;const s={Km:Zr.mV,iR:t.src,qT:t.type,aq:this.uq(t),mx:this.tq,cq:t.crossOrigin,dq:i.metadata&&i.metadata.title};this.lq.IW(t.contentProtection),this.iq=await this.TL.Un(s),ii(e),i.textTracks&&this.fq(i.textTracks),Ds(this.nt)}Px(t,i,e,s){return Promise.resolve()}xx(){return Promise.resolve()}fq(t){for(const e of t)if(this.TL.vq()&&Qt.ru&&jI&&!KP(e.kind,e.label)&&this._q(e)){var i;const t=null!=(i=e.kind)?i:Ao.OU;this.TL.gq(e.src,t,e.label,e.srclang,e.default)}else{if(void 0===e.src)continue;this.pq.eV(e)}}_q(t){return!t.format||"webvtt"===t.format}async Gx(){try{await this.TL.Gx()}catch(t){}for(;!this.QW;)await this.TL.ww(d.Qw)}zx(){this.TL.zx()}jx(){return void 0!==this.TL.$W.webkitShowPlaybackTargetPicker}Qx(){this.TL.$W.webkitShowPlaybackTargetPicker&&this.TL.$W.webkitShowPlaybackTargetPicker()}Kx(){this.TL.$W.webkitShowPlaybackTargetPicker&&this.TL.$W.webkitShowPlaybackTargetPicker()}Wx(){return this.TL.$W}Hx(){return this.TL.Ma}Aa(){return this.TL.mq}tI(t){return this.TL.wq(t)}async hr(){this.Ac=void 0,this.JW=void 0,this.ZW=void 0,this.iq=void 0,await this.pq.hr(),await this.yq.hr(),this.TL.Aq(),await this.TL.hr(),this.bq.hr(),this.mx=this.tq,this.ht.hr(),this.rt.hr(),this.YW=void 0}async kn(){await this.hr(),this.Vo(),this.Sq(),this.Tq(),this.bq.kn(),this.kq.zg(),this.TL.Eq=void 0,await this.xq.Pq(this.TL),this.YL.kn(),this.$L.kn(),this.Gl.kn(),await this.pq.kn(),await this.yq.kn()}Iq(){this.TL.wn(d.uo,this.Rs),this.TL.wn(d.jw,this.Rs),this.TL.wn(d._y,this.Nc),this.TL.wn(d.Qw,this.Rs),this.TL.wn(d.Ww,this.Rs),this.TL.wn(d.$w,this.Rs),this.TL.wn(d.Zw,this.Rq),this.TL.wn(d.Bw,this.Rs),this.TL.wn(d.Kw,this.Rs),this.TL.wn(d.gy,this.Rs),this.TL.wn(d.Rw,this.Rs),this.TL.wn(d.Jw,this.Cq),this.TL.wn(Do.TM,this.IL),this.TL.wn(Mc.ma,this.Dq),this.TL.wn(d.Pw,this.Rs),this.TL.wn(d.Ew,this.Bq),this.TL.$W.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.Nq)}Sq(){this.TL.mn(d.uo,this.Rs),this.TL.mn(d.jw,this.Rs),this.TL.mn(d._y,this.Nc),this.TL.mn(d.Qw,this.Rs),this.TL.mn(d.Ww,this.Rs),this.TL.mn(d.$w,this.Rs),this.TL.mn(d.Zw,this.Rq),this.TL.mn(d.Bw,this.Rs),this.TL.mn(d.Kw,this.Rs),this.TL.mn(d.gy,this.Rs),this.TL.mn(d.Rw,this.Rs),this.TL.mn(d.Jw,this.Cq),this.TL.mn(Do.TM,this.IL),this.TL.mn(Mc.ma,this.Dq),this.TL.mn(d.Pw,this.Rs),this.TL.mn(d.Ew,this.Bq),this.TL.$W.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.Nq)}uq(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{kS:$g,Mq:[{initDataTypes:[$g.Jm],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}Lq(){const t=this.TL.$W.audioTracks,i=this.TL.$W.videoTracks;t&&(t.addEventListener("addtrack",this.Oq),t.addEventListener("removetrack",this.Fq),t.addEventListener("change",this.Uq)),i&&(i.addEventListener("addtrack",this.Vq),i.addEventListener("removetrack",this.Hq),i.addEventListener("change",this.Wq))}Tq(){const t=this.TL.$W.audioTracks,i=this.TL.$W.videoTracks;t&&(t.removeEventListener("addtrack",this.Oq),t.removeEventListener("removetrack",this.Fq),t.removeEventListener("change",this.Uq)),i&&(i.removeEventListener("addtrack",this.Vq),i.removeEventListener("removetrack",this.Hq),i.removeEventListener("change",this.Wq))}dh(t){for(let i=0;i<t.V;i++){t.CI(i).yO()}}Yx(){this.TL.Yx()}Jx(){}qq(t,i){this.JW||(this.JW=i,this.ZW=t,this.So(new Pi(t)))}constructor(t,i,e,s,n,r,h=new FI,o=RA()){super(),this.xq=void 0,this.TL=void 0,this.iq=void 0,this.YL=void 0,this.$L=void 0,this.Gl=void 0,this.yq=void 0,this.Ac=void 0,this.JW=void 0,this.ZW=void 0,this.tq=void 0,this.kq=void 0,this.bq=void 0,this.pq=void 0,this.nV=void 0,this.hw=void 0,this.lq=void 0,this.YW=void 0,this.oq=new To,this.rq=new XI,this.Dq=t=>{const i=t.lt,e=i.code,s=new Ga(Fk(e),"Something went wrong during native playback.",i),n=new Nk(e,s.message,i.message);this.qq(s,n)},this.Nc=()=>{this.So(new Si(this.MP,this.CP))},this.zq=()=>{!this.kx&&Qt.ru&&Qt.X_&&this.ct===1/0&&this.OP(1/0)},this.Rq=t=>{this.hx||(this.YW=void 0),this.So(t)},this.IL=t=>{this.YW=void 0},this.Nq=()=>{this.So(new Jk(this.KP))},this.Cq=()=>{this.Bx>0&&this.Rx>0&&this.So(new ts)},this.Oq=t=>{const i=this.TL.$W.audioTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];JI(this.YL,e)||this.YL.tt(new Qk(e))}},this.Fq=t=>{const i=[],e=this.TL.$W.audioTracks;if(e){for(const t of this.YL.II)ZI(e,t.mO)||i.push(t);for(const t of i)this.YL.it(t)}},this.Uq=()=>{this.dh(this.YL)},this.Vq=t=>{const i=this.TL.$W.videoTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];JI(this.$L,e)||this.$L.tt(new Yk(e))}},this.Hq=t=>{const i=[],e=this.TL.$W.videoTracks;if(e){for(const t of this.$L.II)ZI(e,t.mO)||i.push(t);for(const t of i)this.$L.it(t)}},this.Wq=()=>{this.dh(this.$L)},this.Bq=t=>{this.So(t),this.qq(t.errorObject,P(t.errorObject))},this.xq=i,this.nV=e,this.hw=o,this.TL=this.xq.Gq(Ci.Bk),this.tq=this.TL.$W.preload,this.kq=new dx(this,this.TL),this.bq=new bs(this.kq,!0),this.bq.wn(K,this.Rs),this.bq.wn(Do.bM,this.zq),this.lq=new ya(e,h),this.TL.Eq=this.lq,this.Iq(),this.YL=new rs,this.$L=new rs,this.Lq(),this.pq=new Kh(this.TL,this.nV),this.yq=new ex(this.TL,this.TL.nt),this.Gl=new Yu([this.TL.nt,this.pq.Z,this.yq.Z]),this.be()}};function KI(t){var i,e;if(!(null==(i=(zI||(zI=s&&s.document&&s.document.createElement("video")),e=zI).canPlayType)?void 0:i.call(e,t.type)))return!1;if(t.useNativePlayback)return!0;const n=Qt.ru||Qt.Tg;return!t.useManagedMediaSource||!n}var YI=class{PR(t,i,e,s,n,r,h){return new QI(t,i,e,s,n,r)}Xq(t,i){return KI(t)}jq(t){return kT(t)}Qq(){return!1}constructor(){this.Kq=V.TW}};function JI(t,i){for(const e of t.II)if(e.mO===i)return e}function ZI(t,i){for(let e=0;e<t.length;e++)if(t[e]===i)return!0;return!1}var $I=class{static Yq(){return this.Ng}Jq(t){this.Zq.push(t)}get Kq(){return this.$q.Kq}PR(t,i,e,s,n,r,h){let o=this.$q.PR(t,i,e,s,n,r,h);for(const t of this.Zq)o=t(o,e,s);return o}Xq(t,i){return this.$q.Xq(t,i)}jq(t){return this.$q.jq(t)}Qq(){return!1}constructor(){this.$q=new YI,this.Zq=[]}};function tR(t,i){return tf(t.Kq,i.Kq)}$I.Ng=new $I,r(),r();var iR=class{tz(t){this.iz.push(t),this.iz.sort(tR)}async ez(t,i){for(const e of this.iz){const s=e.Xq(t,i);if(ih(s)?await s:Boolean(s))return e}}constructor(){this.iz=[]}};function cs(t){eR.Ng.tz(t)}r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r();var eR=class extends iR{nz(t){this.rz=t}oz(){return this.rz}async cz(t,i){const e=this.rz;let s=!1;for(const n of t){const t=await this.ez(n,i);if(t){if(lT(n.contentProtection)||await t.jq(n.contentProtection))return{Mc:n,t:t};n.contentProtection&&(s=!0)}const r=e.Xq(n,i);if(ih(r)?await r:Boolean(r)){if(lT(n.contentProtection)||await e.jq(n.contentProtection))return{Mc:n,t:e};n.contentProtection&&(s=!0)}}if(s)throw await zd._m()?new Ga(Vo.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported."):new Ga(Vo.CONTENT_PROTECTION_NOT_SUPPORTED,"The DRM configuration is not supported by this platform.");return{Mc:t[0],t:e}}constructor(...t){super(...t),this.rz=$I.Yq()}};eR.Ng=new eR,r();var sR=class{kn(){os(this.Ls)}constructor(t){this.Ls=void 0,this.Ls=s&&s.document&&s.document.createElement("div"),oa(this.Ls),t.appendChild(this.Ls)}};r(),r();var q=function(t){return t.TW="",t.lz="none",t.VU="metadata",t.OL="auto",t}({});var nR=[Mc.ma,d.Cw,d.Dw,d.Sy,d.yw,d.Nw,d.Lw,d.Gw,d.Xw,d.oy,d.ly,Do.wM,Do.yM,Do.AM,Do.bM,Do.wI,Do.SM,Do.TM,d.Ew,d.Pw,d.Rw,d.Bw,d.Ww,d.qw,d.uo,d.Qw,d.jw,d.Kw,d.Jw,d.$w,d.Zw,d._y,d.gy,d.Yw,d.zw,d.iy,d.ey],rR=class extends _o{get ht(){return this.YL}get IP(){return this.oa.IP}get lt(){return this.oa.lt}get WP(){return this.oa.WP}get CP(){return this.oa.CP}set CP(t){this.oa.CP=t}get bt(){return this.fz}get MP(){return this.oa.MP}set MP(t){this.oa.MP=t}get ct(){return this.oa.ct}get UP(){return this.oa.UP}get zP(){return this.ZL}get jP(){return this.JL}get KP(){return this.oa.KP}get JP(){return this.oa.JP}get $P(){return this.oa.$P}set $P(t){this.oa.$P=t}get sx(){return this.oa.sx}get hx(){return this.oa.hx}get ux(){return this.oa.ux}set ux(t){this.oa.ux=t}get _x(){return this.oa._x}get mx(){return this.tq}set mx(t){this.tq=t,this.oa&&(this.oa.mx=this.tq)}get Ax(){return this.oa.Ax}get Sx(){return this.oa.Sx}get kx(){return this.oa.kx}get nt(){return this.Gl}get Rx(){return this.oa.Rx}get rt(){return this.$L}get Bx(){return this.oa.Bx}get Mx(){return this.oa.Mx}set Mx(t){this.oa.Mx=t}get Fx(){return this.oa.Fx}get hq(){return this.oa.hq}zx(){this.oa.zx()}Gx(){const t=this.oa.Gx();ih(t)&&Wr(t)}Xx(){return this.Ta(void 0)}qx(){}vz(){this.KL.BI=this.oa.Aa(),this.YL.BI=this.oa.ht,this.$L.BI=this.oa.rt,this.Gl.BI=this.oa.nt,this.ZL.BI=this.oa.zP,this.JL.BI=this.oa.jP,this.oa.wn(nR,this.Rs)}_z(){this.oa.mn(nR,this.Rs),this.YL.BI=void 0,this.$L.BI=void 0,this.Gl.BI=void 0,this.ZL.BI=void 0,this.JL.BI=void 0}nu(){return this.gz}async Ta(t,i){if(ii(i),this.gz=t,!t)return;const e=t.sources.filter(lk);if(ok(e))return;const s=await this.pz.cz(e,t);ii(i);const n=s.Mc,r=s.t,h=this.Hx(),o=wk(this);(this.mz!==r||this.lt)&&(this._z(),await this.oa.kn(),ii(i),this.mz=r,this.oa=this.wz(r,n),function(t,i){t.$P!==i.$P&&(t.$P=i.$P);t.Mx!==i.Mx&&(t.Mx=i.Mx);t.ux!==i.ux&&(t.ux=i.ux)}(this.oa,o),Ri(this,o,this),this.vz()),this.oa.mx=this.mx,this.yz?this.oa.be():this.oa.we(),await this.oa.Ta(n,t,i),ii(i),this.Az(n),this.Hx()!==h&&this.So(new lt)}async Px(t,i,e){ii(e);const s=t.sources.filter(lk);if(ok(s))return;const n=await this.pz.cz(s,t);ii(e);const r=n.Mc,h=n.t;this.mz!==h||this.lt||await this.oa.Px(r,t,i,e)}xx(){return this.oa.xx()}Az(t){this.fz!==t&&(this.fz=t,this.So(new bk(t)))}jx(){return this.oa.jx()}Qx(){this.oa.Qx()}Kx(){this.oa.Kx()}Hx(){return this.oa.Hx()}Aa(){return this.KL}Yx(){this.oa.Yx()}Jx(){this.oa.Jx()}tI(t){return this.oa.tI(t)}async hr(){this.gz=void 0,this.Az(void 0),await this.oa.hr()}async kn(){this.Vo(),await this.hr(),await this.oa.kn(),this.YL.kn(),this.$L.kn(),this.Gl.kn(),this.KL.kn(),this.ZL.kn(),this.JL.kn()}be(){this.yz=!0,this.oa.be()}we(){this.yz=!1,this.oa.we()}constructor(t,i){super(),this.pz=void 0,this.mz=void 0,this.oa=void 0,this.fz=void 0,this.tq=q.lz,this.gz=void 0,this.yz=!0,this.YL=new He,this.$L=new He,this.Gl=new sl,this.KL=void 0,this.ZL=new yl,this.JL=new Rk,this.pz=t,this.oa=i,this.oa.mx=this.mx,this.KL=new io(i.Aa()),this.vz()}};r(),r(),r(),r();var Gi=function(t){return t.pa="fullscreenchange",t.ka="fullscreensupportchange",t.ma="fullscreenerror",t}({});r();var hR=class extends wp{constructor(){super(Gi.ma)}},ls=(Gi.pa,Gi.ka,Gi.ma,class extends Ne{get ds(){return!1}get ca(){return!1}yo(){this.So(new hR)}jo(){}kn(){this.Vo()}});r(),r();var oR=class extends wp{constructor(){super(re.ma)}},aR=class extends Ne{get jL(){return!1}get XL(){return!1}async yo(){this.So(new oR)}async jo(){this.So(new oR)}kn(){this.Vo()}},uR=class extends Ne{get CP(){}set CP(t){}get bt(){}get MP(){return this.bz}set MP(t){this.OP(t)}OP(t,i){this.bz!==t&&(this.bz=t,this.Sz=!0,this.So(new F(this.MP)))}get JP(){return{iO:0,eO:0,sO:0,nO:0,rO:0,hO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get $P(){return this.Tz}set $P(t){this.Tz!==t&&(this.Tz=t,this.So(new Ze(this.MP,this.Mx)))}get hx(){return this.kz}get ux(){return this.Ez}set ux(t){this.Ez!==t&&(this.Ez=t,this.So(new aa(this.MP,this.ux)))}get kx(){return this.Sz}get Mx(){return this.ib}set Mx(t){this.ib!==t&&(this.ib=t,this.So(new Ze(this.MP,this.Mx)))}get Vx(){return!1}set Vx(t){}get hq(){return this.oq}get BL(){}be(){}we(){}Gx(){this.kz&&(this.kz=!1,this.So(new Tc(this.MP)),this.So(new ux(this.MP)))}zx(){this.kz||(this.kz=!0,this.So(new Si(this.MP,this.CP)),this.So(new hl(this.MP)))}Ta(t,i){return Promise.resolve()}Px(t,i,e,s){return Promise.resolve()}xx(){return Promise.resolve()}jx(){return!1}Qx(){}Kx(){}Hx(){return this.ha}Aa(){return this.ea}tI(t){throw new m("Adding a CustomTextTrack is not supported without setting a source.")}Yx(){}Jx(){}async hr(){this.bz=0,this.Sz=!1,this.zx(),this.So(new G(this.bz))}async kn(){this.Vo(),this.ht.kn(),this.nt.kn(),this.rt.kn()}constructor(...t){super(...t),this.bz=0,this.Tz=!1,this.kz=!0,this.Ez=1,this.Sz=!1,this.ib=1,this.ht=new rs,this.IP=ve.iL()._s(),this.ct=NaN,this.UP=!1,this.lt=void 0,this.WP=void 0,this.zP=void 0,this.jP=void 0,this.KP=!1,this.sx=!0,this._x=ve.iL()._s(),this.mx=q.lz,this.Ax=mh.VL,this.Sx=ve.iL()._s(),this.nq=void 0,this.nt=new cc,this.Rx=0,this.rt=new rs,this.Bx=0,this.Fx=new XI,this.oq=new To,this.ha=new ls,this.ea=new aR}},cR=class extends uR{set Pz(t){this.xq=t,this.TL=t.Gq(Ci.Bk)}Wx(){var t;return null==(t=this.TL)?void 0:t.$W}async kn(){await super.kn(),this.TL&&(await this.xq.Pq(this.TL),this.TL=void 0)}constructor(...t){super(...t),this.xq=void 0,this.TL=void 0}},dR=class extends rR{get xe(){return this.Tu}get Vx(){return this.oa.Vx}set Vx(t){this.oa.Vx=t}qx(){super.qx(),this.Iz.xz()}gr(t){yk(this,t)}mr(){}Zx(t){return!1}async Ta(t,i){const e=this.Hx(),s=this.Wx();await super.Ta(t,i),this.Hx()!==e&&this.So(new lt),this.Wx()!==s&&this.So(new Sk)}OP(t,i){this.oa.OP(t,i)}wz(t,i){return t.PR(this.Tu,this.Iz,this.nV,this.YS,this.Rz,this.Cz,this.Dz,i)}Wx(){return this.oa.Wx()}xP(){return this.Iz.Bz.map(t=>t.$W)}async kn(){await super.kn(),this.Iz.kn(),this.Nz.kn()}constructor(t,i,e,s,n,r,h){const o=new cR;super(eR.Ng,o),this.YS=void 0,this.Iz=void 0,this.Tu=void 0,this.Dz=void 0,this.nV=void 0,this.Rz=void 0,this.Cz=void 0,this.Nz=void 0,this.Tu=t,this.YS=i,this.nV=e,this.Rz=s,this.Cz=n,this.Dz=h,this.Iz=r,o.Pz=r,this.Nz=new sR(this.Tu)}};r(),r();var lR=class extends _o{get ht(){return this.Mz}get IP(){return ve.iL()._s()}get CP(){return new Date(NaN)}set CP(t){}get bt(){}get MP(){return 0}set MP(t){}OP(t,i){}get ct(){return 0}get xe(){return this.Tu}get UP(){return!0}get lt(){return this.Lz}get WP(){return this.Oz}get zP(){}get jP(){}get JP(){return{iO:0,eO:0,sO:0,nO:0,rO:0,hO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get $P(){return!1}set $P(t){}get sx(){return!0}get hx(){return!0}get ux(){return 0}set ux(t){}get _x(){return ve.iL()._s()}get mx(){return q.lz}set mx(t){}get Ax(){return mh.VL}get Sx(){return ve.iL()._s()}get kx(){return!1}get nt(){return this.Fz}get Rx(){return 0}get rt(){return this.Mz}get Bx(){return 0}get Mx(){return 1}set Mx(t){}get Fx(){return this.rq}get Vx(){return!1}set Vx(t){}Zx(t){return!0}we(){}Gx(){throw this.So(new Pi(this.Oz)),this.Lz}zx(){}nu(){}async Ta(t,i){throw ii(i),this.So(new Pi(this.Oz)),this.Lz}Px(t,i,e){return Promise.resolve()}xx(){return Promise.resolve()}be(){}Xx(){return Promise.resolve()}Wx(){}Hx(){return this.ha}Aa(){return this.ea}xP(){return[]}qx(){}gr(t){}mr(){}get KP(){return!1}jx(){return!1}Qx(){}Kx(){}Yx(){}Jx(){}tI(t){}hr(){return Promise.resolve()}kn(){return this.Vo(),this.Mz.kn(),this.Fz.kn(),Promise.resolve()}constructor(t,i,e){super(),this.Tu=void 0,this.Lz=void 0,this.Oz=void 0,this.Mz=void 0,this.Fz=void 0,this.ha=new ls,this.ea=new aR,this.rq=new XI,this.Tu=t,this.Lz=i,this.Mz=new rs,this.Fz=new cc,this.Oz=e}};function fR(t){if(t&&Lu(t))return Mo({},t,{integration:vR(t.integration),fairplay:yR(t.fairplay),widevine:_R(t.widevine),playready:gR(t.playready),clearkey:AR(t.clearkey),aes128:bR(t.aes128),integrationParameters:SR(t.integrationParameters),preferredKeySystems:TR(t.preferredKeySystems),useOipfDrmAgent:Zn(t.useOipfDrmAgent)})}function vR(t){if(Z(t))return t}function _R(t){if(t&&Lu(t))return{persistentState:pR(t.persistentState),distinctiveIdentifier:pR(t.distinctiveIdentifier),audioRobustness:mR(t.audioRobustness),videoRobustness:mR(t.videoRobustness),licenseAcquisitionURL:Z(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:wR(t.licenseType),headers:t.headers,useCredentials:!!Xd(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:Z(t.certificate)||om(t.certificate)?t.certificate:void 0}}function gR(t){if(!t)return;const i=_R(t);if(!i)return;return Mo({},i,{customData:Z(t.customData)?t.customData:void 0})}function pR(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function mR(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function wR(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function yR(t){if(!t)return;const i=_R(t);if(!i)return;return Mo({},i,{certificateURL:Z(t.certificateURL)?t.certificateURL:void 0})}function AR(t){if(!t)return;const i=_R(t);if(!i)return;const e=ul(t.keys)?t.keys.map(t=>function(t){if(!t||!Lu(t))return;const i=t.id,e=t.value;if(!Z(i)||!Z(e))return;return{id:i,value:e}}(t)).filter(it):void 0;return Mo({},i,{keys:e})}function bR(t){if(Lu(t))return{useCredentials:Xd(t.useCredentials)?t.useCredentials:void 0}}function SR(t){if(Lu(t))return t}function TR(t){return t&&ul(t)?t.map(t=>ST(t)).filter(it):[Wg,Vg,Qs]}r(),r(),r(),r();var kR={bt:void 0,MP:0,ct:NaN,UP:!1,lt:void 0,WP:void 0,$P:!1,hx:!0,ux:1,Ax:mh.VL,kx:!1,Rx:0,Bx:0,Mx:1};r();var ru=function(t){return t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads",t.UPLYNK="uplynk",t}({}),Qh=class{get Uz(){return this.Vz}Wz(t){const i=this.Vz.filter(i=>i.qz(t));if(i.length>1)0;else if(0===i.length)throw m("Unknown ad integration: "+t.integration);return i[0]||null}zz(t){this.Vz.push(t)}constructor(){this.Vz=[]}};Qh.Ng=new Qh,r(),r(),r(),r();var Un=function(t){return t.TM="PLAYING",t.Gz="PAUSED",t.Xz="SEEK",t.jz="STALLED",t.Qz="FAILED",t.Kz="INITIAL_BUFFERING",t.Yz="NO_ACCESS",t}({}),Ka=function(t){return t.Jz="HTTP_REQUEST_STATUS_CODE_1XX",t.Zz="HTTP_REQUEST_STATUS_CODE_2XX",t.$z="HTTP_REQUEST_STATUS_CODE_3XX",t.tG="HTTP_REQUEST_STATUS_CODE_4XX",t.iG="HTTP_REQUEST_STATUS_CODE_5XX",t.eG="BUFFER_LENGTH",t.sG="BYTES_RECEIVED",t.nG="SEGMENT_READ_BITRATE",t.rG="SEGMENT_PROFILE_BITRATE",t.hG="VIDEO_PROFILE_BITRATE",t.oG="NUMBER_OF_FRAMES_DROPPED",t.aG="PLAYBACK_POSITION",t.uG="NUMBER_OF_FRAMES_DECODED",t.cG="PLAYBACK_DELTA_TO_ORIGIN",t.dG="STREAM_DELTA_TO_ORIGIN",t.lG="ORIGIN_TIMESTAMP",t}({}),yi=function(t){return t.fG="MANIFEST_URI",t.vG="ASSET_DURATION",t._G="NUMBER_OF_CONTENT_PROFILES",t.gG="CDN",t.pG="CONTENT_TITLE",t.mG="SERVICE_NAME",t.wG="CONTENT_TYPE",t.yG="CONTENT_DESCRIPTION",t}({}),ER=function(t){return t.AG="shutdown_normal_shutdown",t}({}),PR=function(t){return t.bG="session/",t.SG="content/",t.TG="internalError/",t.kG="drmError/",t.EG="caError/",t.xG="networkError/",t}({}),xR=class{get code(){return this.category+this.statusCode}constructor(t,i){this.category=void 0,this.statusCode=void 0,this.category=t,this.statusCode=i}},IR=class extends Ne{};r(),r(),r();var RR=function(t){return t.PAUSE="IG",t.RESUME="CG",t}({}),CR=class extends wp{constructor(){super("DG")}},DR=class extends Ne{BG(){this.NG=!0}MG(){}kn(){this.NG=!1,this.OG.mn(RR.PAUSE,this.FG),this.OG.mn(RR.RESUME,this.UG)}VG(){return isFinite(this.oa.Nd())}constructor(t,i){super(),this.oa=void 0,this.OG=void 0,this.NG=void 0,this.FG=void 0,this.UG=void 0,this.oa=t,this.OG=i,this.NG=!1,this.FG=()=>{this.MG(),this.NG=!1},this.UG=()=>{this.NG=!0},this.OG.wn(RR.PAUSE,this.FG),this.OG.wn(RR.RESUME,this.UG)}},BR=class extends DR{BG(){super.BG(),this.HG()}kn(){this.WG(),super.kn()}HG(){this.oa.wn(Do.SM,this.qG),this.oa.wn(d.jw,this.zG),this.oa.wn(Do.TM,this.GG),this.oa.wn(d.$w,this.XG),this.oa.wn(d.Zw,this.jG)}WG(){this.oa.mn(Do.SM,this.qG),this.oa.mn(d.jw,this.zG),this.oa.mn(Do.TM,this.GG),this.oa.mn(d.$w,this.XG),this.oa.mn(d.Zw,this.jG)}QG(){this.KG=!0}YG(){const t=this.oa.HP(),i=new xR(PR.TG,String(t.code));this.JG(Un.Qz,i,t.message)}ZG(t){this.NG&&(this.OG.$G(t),this.So(new CR))}JG(t,i,e){this.OG.tX(t,i,e),this.So(new CR)}iX(t,i){this.OG.eX(t,i)}constructor(...t){super(...t),this.KG=!1,this.sX=!1,this.nX=!1,this.qG=()=>{this.sX&&!this.nX&&this.ZG(Un.jz)},this.GG=()=>{this.oa.hx||(this.sX||this.iX(new xR(PR.SG,"firstFrameDisplayed"),"now"),this.sX=!0,this.ZG(Un.TM))},this.zG=()=>{this.oa.hx&&(this.sX=!0,this.ZG(Un.Gz))},this.XG=()=>{this.KG&&(this.nX=!0,this.KG=!1,this.ZG(Un.Xz))},this.jG=()=>{this.nX=!1,this.oa.hx&&this.ZG(Un.Gz)}}};r();var NR=class extends DR{BG(){super.BG(),this.rX(),this.HG()}kn(){this.WG(),super.kn()}HG(){this.oa.rt.wn(Te.pa,this.rX),this.oa.oX.hX(this.aX),this.oa.wn(d.Rw,this.uX)}WG(){this.oa.rt.mn(Te.pa,this.rX),this.oa.oX.cX(this.aX),this.oa.mn(d.Rw,this.uX)}dX(t){t.serviceName&&this.lX(yi.mG,t.serviceName),t.cdn&&this.lX(yi.gG,t.cdn),t.contentTitle&&this.lX(yi.pG,t.contentTitle),t.contentType&&this.lX(yi.wG,t.contentType),t.contentDescription&&this.lX(yi.yG,t.contentDescription)}lX(t,i){this.NG&&this.OG.fX(t,i)}constructor(...t){super(...t),this.uX=()=>{this.VG()&&this.lX(yi.vG,_.round(this.oa.Nd()))},this.aX=t=>{"manifest"===t.request.type&&this.lX(yi.fG,t.url)},this.rX=()=>{const t=Jr(this.oa.rt.II,t=>t.Rt);t&&this.lX(yi._G,t.KI.V)}}};r();var MR=class extends DR{BG(){super.BG(),this.vX=this.oa.JP.iO,this._X=this.oa.JP.sO,this.HG(),this.gX.push(v(this.pX,1e3))}MG(){super.MG(),this.mX()}kn(){this.mX(),this.WG(),this.gX.forEach(p),Yo(this.gX),super.kn()}HG(){this.oa.oX.hX(this.wX),this.oa.wn(d.ly,this.yX)}WG(){this.oa.oX.cX(this.wX),this.oa.mn(d.ly,this.yX)}AX(){this.mX()}bX(t){this.SX+=t,this.TX(Ka.sG,this.SX)}kX(t,i){const e=this.EX.get(i)||0;this.TX(t,e)}PX(){const t=this.oa.JP.iO-this.vX;this.TX(Ka.oG,t)}xX(){const t=this.oa.JP.sO-this._X;this.TX(Ka.uG,t)}IX(){const t=HI.Ng.fW();this.TX(Ka.nG,cm(t))}RX(t){this.TX(Ka.rG,cm(t)),this.TX(Ka.hG,cm(t))}mX(){if(!this.VG())return;const t=_.round(on(this.oa.LP()));this.TX(Ka.aG,t)}CX(){const t=ve.jn(this.oa.RP()),i=this.oa.LP(),e=t.JM(i),s=e?on(e.An(0)-i):0;this.TX(Ka.eG,s)}TX(t,i){this.NG&&this.OG.DX(t,i)}constructor(...t){super(...t),this.EX=qh(),this.SX=0,this.vX=0,this._X=0,this.gX=[],this.pX=()=>{this.PX(),this.xX(),this.CX()},this.yX=t=>{t.qk===Ci.Bk&&(this.bX(t.rO),this.IX(),this.RX(t.BX),this.mX())},this.wX=t=>{const i=t.status.toString()[0],e=this.EX.get(i)||0;this.EX.set(i,e+1),this.kX(Ka.Jz,"1"),this.kX(Ka.Zz,"2"),this.kX(Ka.$z,"3"),this.kX(Ka.tG,"4"),this.kX(Ka.iG,"5")}}};r();function LR(t){return t&&t.integration===WR}function OR(t){if(!Z(t.asset))throw new g("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!Z(t)&&("live"===t||"vod"===t)}(t.streamType))throw new g("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!Z(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new g("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!Z(t.cdn))throw new g("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!Z(t.contentTitle))throw new g("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!Z(t.contentType))throw new g("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!Z(t.contentDescription))throw new g("Agama source configuration: expected 'contentDescription' to be a string");return t}function FR(t){if(!Z(t.config))throw new g("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!Z(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new g("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!Z(t.application))throw new g("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!Z(t.applicationVersion))throw new g("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!Z(t.userAccountID))throw new g("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!Z(t.deviceID))throw new g("Agama player configuration: expected 'deviceID' to be a string");return t}function UR(){let t="00000000-0000-0000-0000-000000000000";const i=s.navigator,e=s.screen;let n=""+i.mimeTypes.length;n+=i.userAgent.replace(/\D+/g,""),n+=i.plugins.length,n+=e.height||"",n+=e.width||"",n+=e.pixelDepth||"",n+=_.floor(1e3*_.random());const r=function(t){let i,e,s=0;if(0===t.length)return"0";for(i=0;i<t.length;i++)e=t.charCodeAt(i),s=(s<<5)-s+e,s|=0;return _.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function VR(t,i,e){const s=i,n=function(t,i){return $T(i)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,i){let e=t.DsPlaylistType.VOD;"live"===i&&(e=t.DsPlaylistType.LIVE);return e}(t,e.streamType);return{asset:e.asset,playlistType:r,protocol:n,uri:s.src}}r();var Yr=function(t){return t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected",t}({}),HR=class{NX(){this.oa.mn(Mc.ma,this.MX),this.LX(),this.OX(),this.OG.FX()}UX(){this.oa.VX.Ca.chromecast&&this.oa.VX.Ca.chromecast.addEventListener("statechange",this.HX)}OX(){this.oa.VX.Ca.chromecast&&this.oa.VX.Ca.chromecast.removeEventListener("statechange",this.HX)}WX(){return void 0!==this.oa.VX.Ca.chromecast&&this.oa.VX.Ca.chromecast.state===Yr.CONNECTED}kn(){this.oa.mn(d.do,this.fo),this.oa.mn(d.uo,this.qX),this.oa.mn(d.Bw,this.zX),this.NX(),this.OG.kn()}GX(){this.XX||(this.XX=new BR(this.oa,this.OG)),this.jX||(this.jX=new MR(this.oa,this.OG)),this.QX||(this.QX=new NR(this.oa,this.OG))}BG(){this.XX&&(this.XX.BG(),this.XX.wn("DG",this.KX)),this.jX&&this.jX.BG(),this.QX&&this.QX.BG()}LX(){this.XX&&(this.XX.mn("DG",this.KX),this.XX.kn(),this.XX=void 0),this.jX&&(this.jX.kn(),this.jX=void 0),this.QX&&(this.QX.kn(),this.QX=void 0)}dX(t){this.QX&&this.QX.dX(t)}YX(){this.XX&&this.XX.YG()}QG(){this.XX&&this.XX.QG()}constructor(t,i,e){this.oa=void 0,this.OG=void 0,this.XX=void 0,this.QX=void 0,this.jX=void 0,this.JX=void 0,this.fo=void 0,this.ZX=void 0,this.zX=void 0,this.qX=void 0,this.HX=void 0,this.MX=void 0,this.KX=void 0,this.oa=t,this.OG=i,this.fo=()=>{this.ZX(),this.zX()},this.ZX=()=>{const t=this.oa.nu(),i=t&&t.analytics;this.JX=function(t){void 0===t&&(t=[]);for(const i of t)if(LR(i))return OR(i)}(i)},this.zX=()=>{this.NX(),this.oa.mn(d.uo,this.qX),!this.WX()&&this.OG.$X()&&this.oa.bt&&this.JX&&(this.GX(),this.oa.hx||this.oa.UP?this.oa.wn(d.uo,this.qX):this.qX())},this.qX=()=>{this.oa.bt&&this.JX&&(this.OG.tj(this.oa.bt,this.JX),this.BG(),this.dX(this.JX),this.UX(),this.oa.wn(Mc.ma,this.MX),this.oa.mn(d.uo,this.qX))},this.HX=()=>{this.WX()&&this.NX()},this.MX=()=>{this.YX(),this.NX()},this.KX=()=>{this.jX&&this.jX.AX()};const s=function(t){void 0===t&&(t=[]);for(const i of t)if(LR(i))return FR(i)}(e.analytics);s&&this.OG.ij()&&(this.OG.qx(s),this.OG.$X()?(this.OG.ej(),this.oa.wn(d.do,this.fo),this.oa.wn(d.Bw,this.zX)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},WR="agama";r(),r();var Vu=function(t){return t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t}({});r();var qR=function(t){return t.NONE="",t.PM360="360",t.PM180="180",t}({});function zR(t){switch(t){case"":return Vu.NONE;case"horizontal":return Vu.HORIZONTAL;case"vertical":return Vu.VERTICAL;default:throw new g}}function GR(t,i){if(i)return qR.PM360;if(null==t)return qR.NONE;switch(t){case"":return qR.NONE;case"360":return qR.PM360;case"180":return qR.PM180;default:throw new g("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}r();var XR=function(t){return t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event",t}({});r();var jR="https://content.uplynk.com";function qo(t){if(!t)return!0;const i=!function(t){return hk(t)||Pc(t)&&hk(t[0])}(t.sources)||ok(t.sources),e=!t.ads||QR(t.ads),s=""!==t.poster&&!t.poster;return i&&e&&s}function QR(t){return!t||ul(t)&&0===t.length}function KR(t){if(t&&t.sources)return YR(t.sources)}function YR(t){return Z(t)?_u(t):pr(t)?t.type||t.src&&_u(t.src):Pc(t)&&t.length>0?YR(t[0]):void 0}function JR(t){if(t&&t.sources)return ZR(t.sources)}function ZR(t){return Z(t)?t:pr(t)?t.src:Pc(t)&&t.length>0?ZR(t[0]):void 0}function $R(t,i,e){return Qi(t)?function(t,i,e){let s=Mo({},ak(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:GT.UPLYNK,id:"",prefix:jR,preplayParameters:{},playbackUrlParameters:{},assetType:XR.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(Z(t))return t;if(Pc(t)&&Z(t[0]))return t;if(function(t){return Lu(t)&&Z(t.userId)&&(Pc(t.externalId)||Z(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return XR.CHANNEL;case"event":return XR.EVENT;default:return XR.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=Zn(t.contentProtected));t.assetInfo?s.assetInfo=Zn(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=Hi(t.prefix)||jR);return s.ping=function(t,i){let e=!1,s=!1,n=!1;i?(e=!!Xd(i.adImpressions)&&i.adImpressions,s=!!Xd(i.freeWheelVideoViews)&&i.freeWheelVideoViews,n=Xd(i.linearAdData)?i.linearAdData:t!==XR.ASSET):t!==XR.ASSET&&(n=!0);return{adImpressions:e,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=eC(s,t),s=nC(s,i,e),s=sC(s,t,e),s}(t,i,e):ek(t)?function(t,i,e){var s;return Mo({},tC(t,i,e),{integration:GT.MEDIATAILOR,adsParams:null!=(s=t.adsParams)?s:{}})}(t,i,e):ik(t)?function(t,i,e){return Mo({},tC(t,i,e),{type:"theolive"})}(t,i,e):bl(t)?function(t,i,e){return Mo({},tC(t,i,e),{type:Ba.gR,src:t.src,streamAccountId:t.streamAccountId,subscriberToken:t.subscriberToken,connectOptions:oC(t.connectOptions),apiUrl:t.apiUrl,statsIntervalMs:iC(t.statsIntervalMs)})}(t,i,e):tC(t,i,e)}function tC(t,i,e){let s=uk();const n=i&&(i.contentProtection||i.drm);if(Z(t)){if(s.src=t,s.type=_u(t),n){const t=fR(n);s.contentProtection=ET(t)}}else if(pr(t)||tk(t)||bl(t)){s.src=t.src,s.type=t.type||_u(t.src),s.isAdvertisement=t.isAdvertisement;const i=rk(t)?t.hesp:void 0;void 0!==i&&(s.hesp=i);ek(t)&&(s.integration=t.integration);const e=fR(t.contentProtection||t.drm||n);s.contentProtection=ET(e),t.ssai&&(s.ssai=BS(t.ssai)),s=eC(s,t)}return s=nC(s,i,e),s=sC(s,t,e),s}function iC(t){if(ho(t)&&t>0)return t}function eC(t,i){var e,s;i.useCredentials?t.crossOrigin=Xh.uR:i.crossOrigin&&(t.crossOrigin=JT(i.crossOrigin)),Z(i.timeServer)&&(t.timeServer=i.timeServer),i.liveOffset&&(t.liveOffset=i.liveOffset),i.hlsDateRange&&(t.hlsDateRange=i.hlsDateRange),i.lowLatency&&(t.lowLatency=Zn(i.lowLatency)),i.useNativePlayback&&(t.useNativePlayback=Zn(i.useNativePlayback)),i.useManagedMediaSource&&(t.useManagedMediaSource=Zn(i.useManagedMediaSource)),i.dash&&(t.dash=PT(i.dash)),i.hls&&(t.hls=xT(i.hls)),i.lcevc&&(t.lcevc=Zn(i.lcevc)),i.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=fk(i.ignoreEmbeddedTextTrackTypes)),i.latencyConfiguration&&(t.latencyConfiguration=zT(i.latencyConfiguration)),t.seamlessSwitchStrategy=XT(null!=(s=i.seamlessSwitchStrategy)?s:null==(e=i.dash)?void 0:e.useSeamlessPeriodSwitch);const n=lS(i.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=lS(i.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function sC(t,i,e){return t.abr=DT(Z(i)?void 0:CT(i.abr),null==e?void 0:e.abr),t}function nC(t,i,e){var s;const n=i&&i.timeServer;return e&&e.liveOffset&&!it(t.liveOffset)&&(t.liveOffset=e.liveOffset),e&&e.hlsDateRange&&!it(t.hlsDateRange)&&(t.hlsDateRange=e.hlsDateRange),t.crossOrigin===Xh.Lk&&(null==i||null==(s=i.vr)?void 0:s[360])&&(t.crossOrigin=Xh.aR),t.useCredentials=t.crossOrigin===Xh.uR,Z(n)&&!t.timeServer&&(t.timeServer=n),t}function rC(t){const i={src:""};if(t&&t.src){if(i.src=Hi(t.src),"default"in t&&(i.default=Zn(t.default)),i.kind=function(t){const i=String(t||"").toLowerCase();return VP(i)?i:i?"metadata":"subtitles"}(t.kind),YT(t.format)&&(i.format=t.format),"srclang"in t){const e=t.srclang;"string"==typeof e&&""!==e&&(i.srclang=e)}if("label"in t){const e=t.label;"string"==typeof e&&""!==e&&(i.label=e)}}return i}function hC(t,i){if(Lu(t))try{return i.Wz(t).sj(t)}catch(t){return}}function oC(t){if(null==t)return t;if(!Lu(t))throw new m("connectOptions must be an object");return t}function Cn(t,i,e){if(void 0===e&&(e=Qh.Ng),qo(t))return{sources:[uk()]};const s=Ua(t);if(s.sources=function(t,i,e){if(hk(t))return[$R(t,i,e)];if(Pc(t)&&hk(t[0])){const s=[];for(const n of t)s.push($R(n,i,e));return s}return[uk()]}(s.sources,s,i),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,i){if(!Pc(t))return[];const e=[];for(let s of t)s=hC(s,i),s&&e.push(s);return e}(s.ads,e);0===t.length?delete s.ads:s.ads=t}const n=!ok(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!Pc(t))return[];const i=[];for(let e of t)e=rC(e),""!==e.src&&i.push(e);return i}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=Hi(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const i=t||{};return i.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(i.stereoMode),{panoramaMode:GR(i.panoramaMode,Boolean(i[360])),stereoMode:i.stereoMode?zR(i.stereoMode):Vu.NONE,nativeVR:Boolean(i.nativeVR)}}(s.vr));if("analytics"in s||(null==i?void 0:i.analytics)){const t=dk(s.analytics),e=i&&i.analytics||[];s.analytics=function(t,i){const e=Ua(t);for(const s of i){const i=!t.some(t=>t.integration===s.integration);i&&s.integration!==WR&&e.push(s)}return e}(t,e)}return"mutedAutoplay"in s&&(s.mutedAutoplay=pk(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=co(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}r(),r(),r();var $r=function(){function t(t){this.nj=t}return t.prototype.rj=function(t){var i,e,s,n,r,h,o,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.nj.charAt(64);for(i=0;i<t.length;i+=4)e=(o=this.nj.indexOf(t.charAt(i))<<18|this.nj.indexOf(t.charAt(i+1))<<12|(r=this.nj.indexOf(t.charAt(i+2)))<<6|(h=this.nj.indexOf(t.charAt(i+3))))>>>16&255,s=o>>>8&255,n=255&o,a[i/4]=String.fromCharCode(e,s,n),64===h&&(a[i/4]=String.fromCharCode(e,s)),64===r&&(a[i/4]=String.fromCharCode(e));return a.join("")},t.prototype.hj=function(t,i){var e,s,n,r,h,o,a,u=[],c="";if((o=t.length%3)>0)for(;o++<3;)c+=this.nj.charAt(64),t+="\0";for(o=0;o<t.length;o+=3)s=(e=t.charCodeAt(o)<<16|t.charCodeAt(o+1)<<8|t.charCodeAt(o+2))>>18&63,n=e>>12&63,r=e>>6&63,h=63&e,u[o/3]=this.nj.charAt(s)+this.nj.charAt(n)+this.nj.charAt(r)+this.nj.charAt(h);return a=(a=u.join("")).slice(0,a.length-c.length),i||(a+=c),a},t.bh=new t(function(){var t,i,e,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(i=r[t],e=0;e<i.length;e+=1)s=i.charAt(e),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.aj=new t(function(t){return t.rj("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.bh)),t}();function aC(t){return"string"==typeof t}function uC(t){return"number"==typeof t}r(),r(),r();var cC={}.toString;var dC,lC=Array.isArray||function(t){return"[object Array]"===cC.call(t)};function fC(t,i){return lC(t)&&t.every(i)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(dC||(dC={}));var se,vC=w.keys(dC).map(function(t){return dC[t]});function _C(t){return-1!==vC.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads",t.MILLICAST="millicast"}(se||(se={}));var gC,pC=w.keys(se).map(function(t){return se[t]});function mC(t){return-1!==pC.indexOf(t)}function wC(t){try{var i=$r.aj.rj(t),e=JSON.parse(i);if(!function(t,i){var e,s=function(t){return"object"==typeof t&&null!==t}(t),n=aC(t.key),r=aC(t.customer_id),h=uC(t.generation_date),o=uC(t.expiration_date),a=fC(t.domains_page,aC),u=fC(t.domains_source,aC),c=fC(t.sdks,i?_C:aC),d=function(t){return"boolean"==typeof t}(t.send_impression);t.features?e=fC(t.features,i?mC:aC):(e=!0,t.features=[]);if(!(s&&n&&r&&h&&o&&a&&u&&c&&d&&e))return!1;return!0}(e,!1))throw new m("The provided license could not be decoded correctly.");return e}catch(t){throw new m("The provided license could not be decoded correctly.")}}function yC(){return gC||(gC={Yu:s.location.href,uj:s.parent&&s.parent!==s,cj:bC()}),gC}var AC=["http:","https:","ftp:","ws:","wss:"];function bC(){var t,i;try{var e;if(null==(e=s)?void 0:e.top)return s.top.location.href}catch(t){}return null==(i=s)||null==(t=i.document)?void 0:t.referrer}var Ee=function(t){return t[t.dj=0]="dj",t[t.lj=1]="lj",t[t.vj=2]="vj",t}({}),SC=class{constructor(t,i,e,s,n=[],r="",h=Date.now(),o=[],a=!0){this._j=void 0,this.gj=void 0,this.pj=void 0,this.mj=void 0,this.wj=void 0,this.yj=void 0,this.Aj=void 0,this.bj=void 0,this.Sj=void 0,this._j=t,this.gj=i,this.pj=e,this.mj=s,this.wj=n,this.yj=r,this.Aj=h,this.bj=o,this.Sj=a}},TC=function(t){return t.lj="expired",t.Tj="invaliddomain",t.Ej="invalidsource",t.Pj="invalidfeature",t.ma="error",t}({}),kC=class t{xj(t,i){let e=[];hk(t.sources)?e=[t.sources]:Pc(t.sources)&&(e=t.sources),this.Ij(t,e,i),this.Rj(e,i)}Ij(t,i,e){if(qo(t)||0===e.pj.length||CC(e.pj))return;if(!i.every(t=>this.Cj(t,e))){const t="invalidsource",i=MC.Dj(t);throw new Ga(PC(t),i)}}Rj(t,i){for(const e of t)pr(e)&&rk(e)&&!e.bypassLicense&&this.Bj([se.HESP],i)}Nj(i){return this.Mj(i.bj)&&this.Lj(i)?t.Oj(i.mj)?0:1:2}Bj(t,i){for(const e of t)if(!pi(i.wj,e)){const t="invalidfeature",i=MC.Fj(t,e);throw new Ga(PC(t),i)}}Mj(t){return 0===t.length||t.some(t=>this.Uj(t))}Uj(t){return"web"===function(t){switch(t){case dC.ANDROID:return ei.Tv;case dC.ANDROIDTV:case dC.FIRETV:return ei.Ev;case dC.IOS:return ei.Pv;case dC.TVOS:return ei.xv;case dC.CHROMECAST:case dC.CHROMECASTCAF:return ei.Iv;case dC.THEOLIVEWEB:return ei.Rv;default:return ei.Sv}}(t)}static Oj(t){const i=Number(new Date);return!!t&&i<=t}Lj(t){return!(this.Vj&&0!==t.gj.length&&!CC(t.gj))||!!(this.Vj&&this.Hj(t.gj)&&this.Wj(t.gj))}Hj(t){return DC(this.MA.Yu,t)}Wj(t){if(!this.MA.uj)return!0;if(this.qj)return!0;const i=this.zj();return!!i&&DC(i,t)}zj(){if(!this.MA.uj)return;const t=hd.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.MA.cj?this.MA.cj:void 0}Cj(i,e){return!!t.Gj(i,e.pj)}static Gj(t,i){return DC(this.Xj(t),i)}static Xj(t){return Z(t)?t:pr(t)&&t.src||""}constructor(t,i,e){this.qj=void 0,this.jj=void 0,this.MA=void 0,this.Vj=void 0,this.qj=t,this.jj=i,this.MA=e,this.Vj=NC(this.MA)}},EC=class{Nj(t){return 0}xj(t,i){}Bj(t,i){}};function PC(t){switch(t){case"invaliddomain":return Vo.LICENSE_INVALID_DOMAIN;case"invalidsource":return Vo.LICENSE_INVALID_SOURCE;case"expired":return Vo.LICENSE_EXPIRED;case"invalidfeature":return Vo.LICENSE_INVALID_FEATURE;case"error":return Vo.LICENSE_ERROR}}var xC="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",IC=mu(()=>{const t="\\.",i="(\\*|"+xC+")";return new RegExp("ip-range\\("+i+t+i+t+i+t+i+"\\)")});function RC(t,i){let e=t,s=i;if(!e)return!1;if(s=s.trim(),"*"===s)return!0;if(e=e.replace(/\.+$/,""),s===e)return!0;if(Vh(s,"ip-range(")){const t="\\.",i=s.match(IC()),n=t=>"*"===t?"("+xC+")":t;if(null!==i&&5===i.length){const s=new RegExp("^"+i[1]+t+n(i[2])+t+n(i[3])+t+n(i[4])+"$");return null!==e.match(s)}}return s="."+s,-1!==e.indexOf(s,e.length-s.length)}function CC(t){return t.some(t=>"*"===t)}function DC(t,i){const e=zd.Dh(t);if(!BC(e))return!0;for(const s of i){if(RC(e.hostname,s))return!0;if(RC(db(t),s))return!0}return!1}function BC(t){return-1!==AC.indexOf(t.protocol)}function NC(t){const i=zd.Dh(t.Yu);return BC(i)&&!function(t){return RC(t.hostname,"localhost")}(i)&&!function(t){return RC(t.hostname,"theoplayer.doubleclick.net")}(i)}var MC=class{static Fj(t,i){return"The requested feature '"+i+"' is not available with the license for this player."}static Dj(t){return"invaliddomain"===t?this.Qj:"invalidsource"===t?this.Kj:"expired"===t?this.Yj:"invalidfeature"===t?this.Jj:this.Zj}};MC.Zj="The license for this player is invalid.",MC.Yj="The usage license for this video player has expired.",MC.Qj="The current domain is incompatible with the license for this player.",MC.Kj="The provided video source is incompatible with the license for this player.",MC.Jj="The requested feature is not available with the license for this player.",r(),r();var Ir=function(t){return t[t.$j=1]="$j",t[t.tQ=4]="tQ",t[t.iQ=5]="iQ",t[t.eQ=9]="eQ",t}({});function LC(t){const i=[t.VN,t.sQ,t.nQ];switch(t.sQ){case 1:i.push(t.iR);break;case 4:i.push(t.MP),i.push(t.lt);break;case 5:i.push(t.lt);break;case 9:i.push(t.Km)}return i}r();var It=new Array(256);for(let t=0;t<256;t+=1)It[t]=(t<16?"0":"")+t.toString(16);function Ys(){const t=ku(),i=(4294967296*_.random()|0)+t&3029421624,e=(4294967296*_.random()|0)+t&3595553209,s=(4294967296*_.random()|0)+t&1130486254,n=(4294967296*_.random()|0)+t&1284287105;return It[255&i]+It[i>>>8&255]+It[i>>>16&255]+It[i>>>24&255]+"-"+It[255&e]+It[e>>>8&255]+"-"+It[e>>>16&15|64]+It[e>>>24&255]+"-"+It[63&s|128]+It[s>>>8&255]+"-"+It[s>>>16&255]+It[s>>>24&255]+It[255&n]+It[n>>>8&255]+It[n>>>16&255]+It[n>>>24&255]}function OC(t){return um(t.replace(/-/g,""))}function FC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const i=16*_.random()|0;return("x"===t?i:3&i|8).toString(16)})}function UC(){return zd.Mg()}r(),r(),r();var VC,HC="theoplayer-session-id";function WC(){if(!VC){const t=DA.Wy(HC);t?VC=t:(VC=Ys(),DA.qy(HC,VC))}return VC}r(),r();var qC=/[^\x00-\x7E]/g;function zC(t){return"\\u"+Na(t.charCodeAt(0).toString(16),4,"0")}var GC="https://license.theoplayer.com";function XC(t){const i=function(t){const i=[];return function(t,i,e){return JSON.stringify(t,i,e).replace(qC,zC)}(t,(t,e)=>{if(Lu(e)){if(-1!==i.indexOf(e))return null;i.push(e)}return e})}(function(t){return[t.rQ,t.dS,t._j,t.bD,t.hQ,t.oQ,t.aQ.map(LC)]}(t));return $r.aj.hj(i)}var jC=class{get aQ(){return this.Zf}uQ(){return Boolean(this.hQ)}get hQ(){return this.cQ}async dQ(t){if(!(await this.fQ.lQ()).Sj)return;const i={sQ:Ir.$j,nQ:ku(),iR:t};await this.iX(i)}async vQ(t){if(!(await this.fQ.lQ()).Sj)return;const i={sQ:Ir.eQ,nQ:ku(),Km:t};await this.iX(i)}async _Q(t,i){const e={sQ:Ir.tQ,nQ:ku(),MP:i,lt:t};await this.iX(e)}async gQ(t){const i={sQ:Ir.iQ,nQ:ku(),lt:t};await this.iX(i)}async iX(t){const i=await this.fQ.lQ();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.pQ.hj(i._j)&&t.sQ!==Ir.iQ||(t.sQ===Ir.$j?this.mQ():this.uQ()||this.mQ(),t.VN=this.yb++,this.Zf.push(t),!function(t){return t===Ir.$j||t===Ir.iQ}(t.sQ)?this.Zf.length>this.wQ&&await this.yQ():await this.AQ())}async AQ(t){for(void 0===t&&(t=!1);this.Zf.length>0;)await this.yQ(t)}async bQ(t){const i=await this.fQ.lQ();return{rQ:ku(),dS:WC(),_j:this.pQ.hj(i._j)||"dev",bD:this.zb,hQ:this.cQ,oQ:this.SQ,aQ:t}}async yQ(t){void 0===t&&(t=!1);const i=this.Zf.splice(0,this.TQ),e=await this.bQ(i);t?this.Kk(e):this.kQ(e),this.EQ=UC()}async kQ(t){const i=XC(t),e=new $n({Yu:GC,zT:i,zk:!1,dk:M.NT,fk:{"Content-Type":Hu.IH},Vk:4e3,Uk:X.POST});try{const t=await this.nV.lk(e);await t.HT()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+i}}Kk(t){const i=XC(t);this.nV.Kk({Yu:GC,zT:i,qT:Hu.IH})}mQ(){this.uQ()&&this.AQ(),this.cQ=Ys(),this.yb=0}kn(){s.removeEventListener("beforeunload",this.xQ),p(this.IQ),this.AQ()}constructor(t,i,e,n=$r.bh,r=0,h=1){this.zb=void 0,this.nV=void 0,this.fQ=void 0,this.pQ=void 0,this.wQ=void 0,this.TQ=void 0,this.Zf=void 0,this.cQ=void 0,this.EQ=void 0,this.SQ=void 0,this.yb=void 0,this.IQ=void 0,this.RQ=void 0,this.xQ=void 0,this.zb=t,this.nV=i,this.fQ=e,this.pQ=n,this.wQ=r,this.TQ=h,this.Zf=[],this.cQ=null,this.EQ=0,this.SQ="unknown",this.yb=0,this.RQ=()=>{UC()-this.EQ>6e4&&this.AQ()},this.xQ=()=>{this.AQ(!0)},s.addEventListener("beforeunload",this.xQ),this.IQ=v(this.RQ,6e4)}};r(),r(),r();var QC=0;var KC=c,Is=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,Ii=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;Is&&Ii||(Is=function(t){const i=UC(),e=_.max(0,16-(i-QC)),s=u(()=>t(i+e),e);return QC=i+e,s},Ii=KC),Is=Is.bind(self),Ii=Ii.bind(self);var YC=Qt.L_||Qt.ru&&Qt.Q_<13;function JC(t,i,e){const s=t.getImageData(i,e,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var ZC=class{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{drawImage(i){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return t.CQ(i,...s)},texImage2D:(i,e,s,n,r,h)=>t.DQ(i,e,s,n,r,h),requestVideoFrameCallback:i=>t.BQ(i),cancelVideoFrameCallback:i=>t.NQ(i)}}(this)}CQ(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=this.MQ;return void 0!==n&&(t.drawImage(n,...e),!0)}DQ(t,i,e,s,n,r){let h=this.MQ;return void 0!==h&&(YC&&(h=this.LQ(h)),t.texImage2D(i,e,s,n,r,h),!0)}BQ(t){const i=this.OQ++,e=this.FQ(t,i);return this.UQ.set(i,{VQ:t,HQ:e}),i}NQ(t){const i=this.UQ.get(t);void 0!==i&&(this.UQ.delete(t),i.HQ())}FQ(t,i){const e=this.MQ;if(void 0===e)return Ct;if(e instanceof HTMLVideoElement&&e.requestVideoFrameCallback){const s=e.requestVideoFrameCallback((e,s)=>{this.UQ.delete(i),t(e,s)});return()=>e.cancelVideoFrameCallback(s)}{let e;const s=n=>{this.WQ()?(this.UQ.delete(i),this.qQ=!1,t(n,void 0)):e=Is(s)};return e=Is(s),()=>Ii(e)}}WQ(){return(!this.t.hx||this.qQ)&&!this.t.kx&&this.t.Ax>=mh.HL}LQ(t){let i=this.zQ;void 0===i&&(i=h.createElement("canvas"),this.zQ=i);const e=i.getContext("2d"),s=this.t,n=s.Bx,r=s.Rx,o=i.width,a=i.height;e.clearRect(0,0,i.width,i.height),o===n&&a===r||(i.width=n,i.height=r),e.drawImage(t,0,0,n,r);let u=!1;return n>0&&JC(e,n-1,0)&&(i.width=o,u=!0),r>0&&JC(e,0,r-1)&&(i.height=a,u=!0),u&&e.drawImage(t,0,0,n,r),i}kn(){this.UQ.forEach(t=>t.HQ()),this.UQ.clear(),this.t.mn(d.Lw,this.GQ),this.t.mn(d.Zw,this.XQ),this.MQ=void 0,this.zQ=void 0}constructor(t){this.t=void 0,this.MQ=void 0,this.hu=void 0,this.zQ=void 0,this.UQ=ar(),this.OQ=1,this.qQ=!0,this.XQ=()=>{this.qQ=!0},this.GQ=()=>{this.MQ=this.t.Wx(),this.UQ.forEach((t,i)=>{t.HQ(),t.HQ=this.FQ(t.VQ,i)})},this.t=t,this.t.wn(d.Lw,this.GQ),this.t.wn(d.Zw,this.XQ),this.GQ()}};r(),r(),r();var Rh=function(t){return t.yn="dimensionchange",t}({}),$C=class extends wp{constructor(t,i){super(Rh.yn),this.width=void 0,this.height=void 0,this.width=t,this.height=i}};r(),r();var tD,iD=class{constructor(t,i){this.xe=void 0,this.VQ=void 0,this.xe=t,this.VQ=i}},eD=class extends iD{get Iu(){return this.jQ}get Eu(){return this.QQ}kn(){this.KQ.disconnect()}constructor(t,i){super(t,i),this.KQ=void 0,this.jQ=0,this.QQ=0,this.YQ=t=>{if(t.length>0){const i=t[t.length-1].contentRect;this.QQ=i.width,this.jQ=i.height,this.VQ(this.QQ,this.jQ)}},this.KQ=new s.ResizeObserver(this.YQ),this.KQ.observe(this.xe)}};r(),r();var sD=["Webkit","Moz","O","ms"],nD=(()=>{let t=!1;try{if(void 0!==s&&"function"==typeof s.addEventListener){const i=w.defineProperty({},"passive",{get(){t=!0}});s.addEventListener("testPassiveEventSupport",Ct,i),s.removeEventListener("testPassiveEventSupport",Ct,i)}}catch(t){}return t})(),rD=qh();function hD(t){return rD.has(t)||rD.set(t,function(t){const i=(tD||(tD=s&&s.document&&s.document.createElement("span")),tD);if(!i||!i.style)return t;if(void 0!==i.style[t])return t;const e=t.charAt(0).toUpperCase()+t.slice(1);for(const t of sD){const s=t+e;if(void 0!==i.style[s])return s}return t}(t)),rD.get(t)}function oD(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.bottom="0",i.top="0",i.overflow="scroll",i.zIndex="-1",i.visibility="hidden"}function aD(t){const i=t.style;i.position="absolute",i.left="0",i.top="0",i[hD("transition")]="0s"}var uD=class extends iD{kn(){Ii(this.JQ),this.JQ=0,this.ZQ.removeEventListener("scroll",this.$Q),this.tK.removeEventListener("scroll",this.$Q),os(this.iK),s&&s.removeEventListener("resize",this.eK)}get Iu(){return this.xe.getBoundingClientRect().height||this.jQ||0}get Eu(){return this.xe.getBoundingClientRect().width||this.QQ||0}constructor(t,i,e){super(t,i),this.iK=void 0,this.JQ=0,this.QQ=NaN,this.jQ=NaN,this.ZQ=void 0,this.sK=void 0,this.tK=void 0,this.nK=void 0,this.rK=void 0,this.hr=()=>{const t=1e5;this.sK.style.width=t+"px",this.sK.style.height=t+"px",this.ZQ.scrollLeft=t,this.ZQ.scrollTop=t,this.tK.scrollLeft=t,this.tK.scrollTop=t,0===this.tK.scrollTop&&Is(this.hr)},this.hK=()=>{const t=this.Eu,i=this.Iu;this.VQ(t,i),this.QQ=t,this.jQ=i,this.hr(),this.JQ=0},this.$Q=()=>{if(this.JQ)return;const t=this.Eu,i=this.Iu;t===this.QQ&&i===this.jQ||(this.JQ=Is(this.hK))},this.eK=()=>{this.rK||(this.rK=u(this.oK,66))},this.oK=()=>{this.rK=void 0,this.aK()},this.aK=()=>{this.$Q()};const n=function(t,i){return s.getComputedStyle(t,void 0).getPropertyValue(i)||t.style[i]}(t,"position");e||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.iK=r,this.ZQ=h.createElement("div"),this.sK=h.createElement("div"),this.tK=h.createElement("div"),this.nK=h.createElement("div"),oD(this.ZQ),oD(this.tK),aD(this.sK),function(t){aD(t),t.style.width="200%",t.style.height="200%"}(this.nK),r.appendChild(this.ZQ),r.appendChild(this.tK),this.ZQ.appendChild(this.sK),this.tK.appendChild(this.nK),t.appendChild(r),this.ZQ.addEventListener("scroll",this.$Q),this.tK.addEventListener("scroll",this.$Q),s&&s.addEventListener("resize",this.eK),this.$Q()}},Oe=class extends Ne{_n(t){this.KQ||("function"==typeof s.ResizeObserver?this.KQ=new eD(this.xe,this.YQ):this.KQ=new uD(this.xe,this.YQ,t))}kn(){this.Vo(),this.KQ&&(this.KQ.kn(),this.KQ=void 0)}get Iu(){return this.KQ?this.KQ.Iu:0}get Eu(){return this.KQ?this.KQ.Eu:0}constructor(t){super(),this.xe=void 0,this.KQ=void 0,this.YQ=(t,i)=>{this.So(new $C(t,i))},this.xe=t}};r(),r();var cD=class extends wp{constructor(){super(Gi.pa)}};r();var Tt=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(const i of t)if(i[1]in h)return{uK:i[0],sa:i[1],cK:i[2],dK:i[3],Ze:i[4],lK:i[5]}}();r();var dD=class extends wp{constructor(){super(Gi.ka)}},lD=class t extends Ne{static la(t){return Boolean(Tt&&h[Tt.dK]&&Tt.uK in t)}yo(){const t=this.xe[Tt.uK]();t&&t.then?t.then(this.fK,this.vK):(h.removeEventListener(Tt.lK,this.vK),h.addEventListener(Tt.lK,this.vK))}jo(){const t=h[Tt.sa]();t&&t.then?t.then(this.fK,this.vK):(h.removeEventListener(Tt.lK,this.vK),h.addEventListener(Tt.lK,this.vK))}_K(){const t=this.ds,i=this.xe===h[Tt.cK];this.ds=i,t!==i&&this.So(new cD)}gK(){this.So(new hR)}kn(){this.Vo(),h.removeEventListener(Tt.Ze,this.fK),h.removeEventListener(Tt.lK,this.vK)}constructor(i){super(),this.xe=void 0,this.ca=void 0,this.ds=!1,this.fK=()=>this._K(),this.vK=()=>this.gK(),this.xe=i,this.ca=t.la(i),h.addEventListener(Tt.Ze,this.fK),this._K()}},fD=class t extends Ne{static la(t){return Qt.ru&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}yo(){this.xe.webkitSupportsPresentationMode&&this.xe.webkitSupportsPresentationMode("fullscreen")?Qt.ru?requestAnimationFrame(()=>this.xe.webkitSetPresentationMode("fullscreen")):this.xe.webkitSetPresentationMode("fullscreen"):this.xe.webkitEnterFullscreen()}jo(){this.xe.webkitSupportsPresentationMode&&this.xe.webkitSupportsPresentationMode("inline")?this.xe.webkitSetPresentationMode("inline"):this.xe.webkitExitFullscreen()}_K(){const t=this.ds;let i;i=this.xe.webkitPresentationMode?"fullscreen"===this.xe.webkitPresentationMode:Boolean(this.xe.webkitDisplayingFullscreen),this.ds=i,t!==i&&this.So(new cD)}kn(){this.Vo(),this.xe.removeEventListener("webkitbeginfullscreen",this.fK),this.xe.removeEventListener("webkitendfullscreen",this.fK),this.xe.removeEventListener("webkitpresentationmodechanged",this.fK)}constructor(i){super(),this.xe=void 0,this.ca=void 0,this.ds=!1,this.fK=()=>this._K(),this.xe=i,this.ca=t.la(i),this.xe.addEventListener("webkitbeginfullscreen",this.fK),this.xe.addEventListener("webkitendfullscreen",this.fK),this.xe.addEventListener("webkitpresentationmodechanged",this.fK),this._K()}},vD=class extends Ne{get ca(){return!!this.pK&&this.pK.ca}get ds(){return this.mK}yo(){this.pK?this.pK.yo():this.So(new hR)}jo(){for(const t of this.wK)t.ds&&t.jo()}yK(t){this.pK=t}AK(t){this.wK.push(t),t.wn(Gi.pa,this._K),t.wn(Gi.ma,this.Rs),this._K()}bK(t){oi(this.wK,t),t.mn(Gi.pa,this._K),t.mn(Gi.ma,this.Rs)}SK(){for(const t of this.wK)if(t.ds)return!0;return!1}hr(){this.pK=void 0,this.mK=!1;const t=this.wK.slice();for(const i of t)this.bK(i),i.kn();this._K()}kn(){this.Vo(),this.hr()}constructor(...t){super(...t),this.wK=[],this.pK=void 0,this.mK=!1,this._K=()=>{const t=this.mK,i=this.SK();t!==i&&(this.mK=i,this.So(new cD))}}},_D=class extends Ne{get ca(){return!!this.TK&&this.kK.ca}get ds(){return this.kK.ds}yo(){this.TK&&this.kK.yo()}jo(){this.kK.jo()}EK(){this.kK.wn([Gi.pa,Gi.ka],this._K),this.kK.wn(Gi.ma,this.Rs)}PK(){this.kK.mn([Gi.pa,Gi.ka],this._K),this.kK.mn(Gi.ma,this.Rs)}er(){const t=this.kK,i=this.t.Hx();if(t===i)return;this.ga=!0;const e=this.ds,s=this.ca;e&&this.jo(),this.PK(),this.kK=i,this.EK(),e&&!this.ds&&this.ca?this.yo():this.jo(),this.ga=!1,s!==this.ca&&this.So(new dD),e!==this.ds&&this.So(new cD)}kn(){this.Vo(),this.PK(),this.t.mn(d.Nw,this.xK)}constructor(t,i){super(),this.t=void 0,this.TK=void 0,this.kK=void 0,this.ga=!1,this.xK=()=>this.er(),this._K=t=>{this.ga||this.So(t)},this.t=t,this.TK=i,this.kK=new ls,this.EK(),this.t.wn(d.Nw,this.xK),this.er()}};r(),r(),r();var Ku=function(t){return t.MODE_CHANGE="presentationmodechange",t.ERROR="error",t}({}),gD=class extends wp{constructor(t){super(Ku.MODE_CHANGE),this.presentationMode=void 0,this.presentationMode=t}};r(),r();var pD=class extends Ne{au(t){for(const i of this.Zf)t.wn(i,this.IK);this.RK.push(t)}CK(t){for(const i of this.Zf)t.mn(i,this.IK);this.RK.push(t)}kn(){this.Vo();for(const t of this.RK)this.CK(t);Yo(this.RK)}constructor(t,i=!1,e){super(e),this.RK=[],this.Zf=void 0,this.IK=void 0,this.DK=t=>{ct(()=>{this.Rs(t)})},this.Zf=t,this.IK=i?this.DK:this.Rs}},Sc=class extends _o{au(t){t.lw(this.BK),this.RK.push(t)}CK(t){t.mw(this.BK),oi(this.RK,t)}kn(){this.Vo();for(const t of this.RK)t.mw(this.BK);Yo(this.RK)}constructor(t,i=!1){super(t),this.RK=[],this.BK=void 0,this.DK=t=>{ct(()=>{this.Rs(t)})},this.BK=i?this.DK:this.Rs}};r();var mD=class extends Oi{get error(){return this.errorObject.message}xa(){return this}constructor(t){super(Ku.ERROR),this.errorObject=void 0,this.errorObject=t}};r();var wD=class extends Ga{constructor(t,i,e){super(t,i,e)}},yD=class extends _o{get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return function(t){let i;const e={get currentMode(){return t.Wo()},requestMode(i){const e=Ak(i);e&&t.Jo(e)},supportsMode(i){const e=Ak(i);return!!e&&t.Xo(e)},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new Sc(e,!0),i.au(t),e}(this)}Jo(t){this.Yo!==t&&(this.Yo=t,this.ra=!0,this.Ko(t))}Wo(){return this.Yo}Xo(t){switch(t){case tc.NATIVE_PICTURE_IN_PICTURE:return this.ea.jL;case tc.FULLSCREEN:return this.ha.ca;case tc.INLINE:return!0}return!1}Ko(t){switch(this.ta.Zg(),t){case tc.FULLSCREEN:Wr(this.ta.Zo(t=>this.NK(t)));break;case tc.NATIVE_PICTURE_IN_PICTURE:Wr(this.ta.Zo(t=>this.MK(t)));break;case tc.INLINE:Wr(this.ta.Zo(t=>this.LK(t)))}}async NK(t){ii(t),await this.ea.jo().catch(Ct),ii(t);try{await this.FK(),this.So(new gD(this.Yo))}catch(i){const e=new wD(Vo.FULLSCREEN_ERROR,"Failed to enter fullscreen.");throw this.So(new mD(e)),ii(t),this.Jo(tc.INLINE),e}finally{this.ra=!1}}async MK(t){ii(t),await this.sa().catch(Ct),ii(t);try{await this.ea.yo(),this.So(new gD(this.Yo))}catch(i){const e=new wD(Vo.PICTURE_IN_PICTURE_ERROR,"Failed to enter native picture-in-picture.");throw this.So(new mD(e)),ii(t),this.Jo(tc.INLINE),e}finally{this.ra=!1}}async LK(t){ii(t),await this.sa().catch(Ct),ii(t),await this.ea.jo().catch(Ct),this.So(new gD(this.Yo)),this.ra=!1}async FK(){if(this.ha.ds)return;const t=this.ha.ww([Gi.pa,Gi.ma]);if(this.ha.yo(),await t,!this.ha.ds)throw new m("Failed to enter fullscreen.")}async sa(){if(!this.ha.ds)return;const t=this.ha.ww([Gi.pa,Gi.ma]);if(this.ha.jo(),await t,this.ha.ds)throw new m("Failed to exit fullscreen.")}_i(){this.ra||(this.Yo!==tc.FULLSCREEN||this.ha.ds?this.Yo!==tc.FULLSCREEN&&this.ha.ds&&this.Jo(tc.FULLSCREEN):this.Jo(tc.INLINE))}kn(){this.ha.mn(Gi.pa,this._K),this.ha.mn(Gi.ma,this.gK),this.ea.mn(re.zL,this.UK),this.ea.mn(re.GL,this.UK),this.ea.mn(re.ma,this.VK),this.Vo()}constructor(t,i){super(),this.Yo=tc.INLINE,this.ra=!1,this.ha=void 0,this.ea=void 0,this.ta=new te,this.hu=void 0,this._K=()=>{this._i()},this.gK=()=>{this.ra||(this.So(new Pi(new Ga(Vo.FULLSCREEN_ERROR,"Failed to enter fullscreen."))),this._i())},this.UK=()=>{this.ra||(this.Yo!==tc.NATIVE_PICTURE_IN_PICTURE||this.ea.XL?this.Yo!==tc.NATIVE_PICTURE_IN_PICTURE&&this.ea.XL&&this.Jo(tc.NATIVE_PICTURE_IN_PICTURE):this.Jo(tc.INLINE))},this.VK=()=>{this.ra||(this.So(new mD(new wD(Vo.PICTURE_IN_PICTURE_ERROR,"Unexpected native picture-in-picture error."))),this.UK())},this.ha=t,this.ea=i,this.ha.wn(Gi.pa,this._K),this.ha.wn(Gi.ma,this.gK),this.ea.wn(re.zL,this.UK),this.ea.wn(re.GL,this.UK),this.ea.wn(re.ma,this.VK)}};r();var AD=class t{HK(t){return this.WK.Zo(()=>this.qK(t))}qx(){this.Iz.xz()}async qK(i){const e=this.Iz.Gq(Ci.Bk),s=e.$W,n=await t.zK(s,i);return await this.Iz.Pq(e),n}static async zK(i,e){return Qt.S_||Qt.w_?"all":(i.src||(i.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.GK(),!e&&await t.XK(i,!1)?"all":await t.XK(i,!0)?"muted":"none")}static async XK(t,i){t.muted=i;const e=t.play();try{if(!ih(e))return!Qt.Ks;const t=Er(250);return await Promise.race([e,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static GK(){return new Promise(t=>{if("function"==typeof MessageChannel){const i=new MessageChannel;i.port1.onmessage=()=>t(),i.port2.postMessage("")}else u(t,0)})}kn(){this.WK.kn()}constructor(t){this.Iz=void 0,this.WK=void 0,this.Iz=t,this.WK=new te}},bD=AD;function SD(t){bD=t}function TD(t){let i;return{get url(){return t.Yu},get method(){return t.Uk},get headers(){return i||(i=t.fk.MT()),i},get body(){return t.zT},get useCredentials(){return t.zk},get type(){return t.Km},get subType(){return t.Wk},get mediaType(){return t.qk},get responseType(){return t.dk}}}function kD(t){switch(t.toLowerCase()){case"arraybuffer":return M.CT;case"json":return M.DT;case"stream":return M.BT;default:return M.NT}}function ED(t){switch(t.toUpperCase()){case"POST":return X.POST;case"PUT":return X.PUT;case"DELETE":return X.DELETE;case"HEAD":return X.HEAD;case"OPTIONS":return X.OPTIONS;default:return X.GET}}function PD(t){switch(t.toLowerCase()){case"manifest":return Al.wk;case"segment":return Al.yk;case"preload-hint":return Al.Ak;case"content-protection":return Al.bk;default:return Al.pk}}function xD(t){switch(t.toLowerCase()){case"initialization-segment":return Xa.Sk;case"fairplay-license":return Xa.Tk;case"fairplay-certificate":return Xa.Ek;case"widevine-license":return Xa.Pk;case"widevine-certificate":return Xa.xk;case"playready-license":return Xa.Ik;case"clearkey-license":return Xa.Rk;case"aes128-key":return Xa.Ck;default:return Xa.pk}}function ID(t){switch(t.toLowerCase()){case"audio":return Za.Dk;case"video":return Za.Bk;case"text":return Za.NT;case"image":return Za.Nk;default:return Za.pk}}r(),r(),r(),r();var RD=class{get jK(){return this.QK.Qy}get Ca(){return this.hu||(this.hu=this.KK()),this.hu}get YK(){return this.JK}get ZK(){return!this.JK}get $K(){return this.tY>0}get oE(){return this.aE}cD(){this.JK=!0,this.QK.Xy(null)}iY(){this.QK.jy(new UA(this.eY))}sY(t){if(!this.ZK)throw new g("Cannot respond more than once");if(!Lu(t))throw new g("Expected valid response");this.aE=this.nY(t),this.cD()}rY(){try{const t=this.hY(this.Ca);t?this.oY(t):this.$K||this.YK||this.cD()}catch(t){this.eY.push(t),this.iY()}}oY(t){if(this.YK)throw new m("Request has been redirected or a response already exists");if(ih(t))this.aY(t);else{if("function"!=typeof t)throw new g("Expected promise or function");{const i=new pa,e=t=>{t?i.jy(t):i.Xy(void 0)};try{const s=t(e);ih(s)&&i.$g(s)}catch(t){i.jy(t)}this.aY(i.Qy)}}}async aY(t){try{this.tY++,await t,this.tY--,this.$K||this.YK||(this.eY.length?this.iY():this.cD())}catch(t){this.tY--,this.eY.push(t),this.$K||this.YK||this.iY()}}constructor(t,i){this.uY=void 0,this.hY=void 0,this.QK=void 0,this.eY=void 0,this.hu=void 0,this.JK=void 0,this.aE=void 0,this.tY=void 0,this.uY=t,this.hY=i,this.QK=new pa,this.eY=[],this.hu=void 0,this.JK=!1,this.aE=void 0,this.tY=0}},CD=class t extends RD{get zT(){return this.cY}get fk(){return this.uY.fk}get lk(){return this.uY.lk}get oE(){return this.aE}get hk(){return this.uY.hk}get vk(){return this.uY.vk}get Yu(){return this.uY.gk}static dY(t,i,e){const s=void 0===t.body?e:t.body;return new sc({ck:s,lk:i.lk,dk:i.lk.dk,fk:t.headers,hk:t.status,vk:t.statusText,gk:t.url,_k:!0},i)}KK(){return function(t){let i;const e=TD(t.lk);return{get closed(){return!t.ZK},get request(){return e},get url(){return t.Yu},get status(){return t.hk},get statusText(){return t.vk},get headers(){return i||(i=t.fk.MT()),i},get body(){return t.zT},respondWith:i=>t.sY(i),waitUntil:i=>t.oY(i)}}(this)}nY(i){return t.dY(i,this.uY,this.cY)}constructor(t,i,e){super(t,i),this.cY=void 0,this.cY=e,this.rY()}};r();var DD=class extends RD{get zT(){return this.uY.zT}get ZK(){return this.lY&&!this.JK}get fk(){return this.uY.fk}get Uk(){return this.uY.Uk}get fY(){return this.vY}get oE(){return this.aE}get dk(){return this.uY.dk}get Vk(){return this.uY.Vk}get Hk(){return this.uY.Hk}get Yg(){return this.uY.Yg}get Km(){return this.uY.Km}get Wk(){return this.uY.Wk}get qk(){return this.uY.qk}get Yu(){return this.uY.Yu}get zk(){return this.uY.zk}get jk(){return this.uY.jk}get Gk(){return this.uY.Gk}get Xk(){return this.uY.Xk}get Qk(){return this.uY.Qk}KK(){return function(t){let i;return{get url(){return t.Yu},get method(){return t.Uk},get headers(){return i||(i=t.fk.MT()),i},get body(){return t.zT},get closed(){return!t.ZK},get useCredentials(){return t.zk},get type(){return t.Km},get subType(){return t.Wk},get mediaType(){return t.qk},get responseType(){return t.dk},redirect:i=>t._Y(i),respondWith:i=>t.sY(i),waitUntil:i=>t.oY(i)}}(this)}nY(t){const i=this.uY.zT,e=new sc({ck:i,fk:{},lk:this.uY,gk:this.uY.Yu,dk:this.uY.dk,hk:200,vk:"OK"});return CD.dY(t,e,i)}_Y(t){if(!this.ZK)throw new g("Cannot redirect, already redirected or has a response");let i;i=Z(t)?{url:t}:t,this.vY=function(t,i){return new $n({Yu:void 0===t.url?i.Yu:t.url,Uk:void 0!==t.method?ED(t.method):void 0,fk:t.headers,zT:t.body,zk:t.useCredentials,Km:void 0!==t.type?PD(t.type):void 0,Wk:void 0!==t.subType?xD(t.subType):void 0,qk:void 0!==t.mediaType?ID(t.mediaType):void 0,dk:void 0!==t.responseType?kD(t.responseType):void 0},i)}(i,this.uY),this.cD()}constructor(t,i,e){super(t,i),this.vY=void 0,this.lY=void 0,this.lY=e,this.rY()}};var BD=class extends Mr{gY(t){this.pY.gY(t)}mY(t){this.pY.mY(t)}wY(t){this.pY.wY(t)}hX(t){this.pY.hX(t)}cX(t){this.pY.cX(t)}constructor(t,i=!0){const e=new ND(t);super(e,i),this.pY=void 0,this.pY=e}},ND=class{async lk(t){let i;try{i=await this.yY(t,t.Yg)}catch(i){if(i instanceof fb)return await this.AY(i,t.Yg);throw i}if(i=await this.bY(i,t.Yg),jr(i))return i;throw new An(i)}Kk(t){return this.$k.Kk(t)}async yY(t,i){ii(i);let e,s=t;for(const t of this.SY.slice()){ii(i);const n=new DD(s,t,!e);if(!n.YK)try{await n.jK}catch(t){0;continue}n.fY&&!e?s=n.fY:n.oE&&!e&&(e=n.oE)}return e||this.$k.lk(s)}async AY(t,i){let e;if(t instanceof An)e=t.oE;else{const i=t.lk;e=new sc({ck:null,lk:i,dk:i.dk,hk:0,vk:""})}const s=await this.bY(e,i);if(s===e)throw t;if(jr(s))return s;throw new An(s)}async bY(t,i){let e=t;for(const t of this.TY.slice()){ii(i);const s=await Promise.resolve(e.Ly().ck(i)),n=new CD(e,t,s);if(!n.YK)try{await n.jK}catch(t){0;continue}e=n.oE||e}return e}gY(t){this.SY.unshift(t)}mY(t){this.SY.push(t)}wY(t){oi(this.SY,t)}hX(t){this.TY.unshift(t)}cX(t){oi(this.TY,t)}kn(){this.$k.kn(),Yo(this.SY),Yo(this.TY)}constructor(t){this.$k=void 0,this.SY=[],this.TY=[],this.$k=t}};r();var MD=class{get Ca(){return this.hu||(this.hu=function(t){return{addRequestInterceptor(i){t.gY(i)},removeRequestInterceptor(i){t.wY(i)},addResponseInterceptor(i){t.hX(i)},removeResponseInterceptor(i){t.cX(i)}}}(this)),this.hu}gY(t){this.nV.gY(t)}wY(t){this.nV.wY(t)}hX(t){this.nV.hX(t)}cX(t){this.nV.cX(t)}constructor(t){this.nV=void 0,this.hu=void 0,this.nV=t}},LD=class extends Ne{get Ca(){return this.hu||(this.hu=function(t){return{get online(){return t.sx},get estimator(){return function(t){return{get bandwidth(){return t.kW},get roundTripTime(){return t.EW}}}(t.kY)},setEstimator(i){t.EY(function(t){if(!t)return;return{get kW(){return fS(t.bandwidth)},get EW(){return fS(t.roundTripTime)},PW:i=>function(t){if(!t)return;return{PY(i){t.markRequestStart(i)},xY(i){t.markResponseStart(i)},IY(i,e){t.markResponseData(i,e)},RY(i){t.markResponseEnd(i)}}}(t.createMeasurer(TD(i)))}}(i))},addRequestInterceptor(i){t.gY(i)},removeRequestInterceptor(i){t.wY(i)},addResponseInterceptor(i){t.hX(i)},removeResponseInterceptor(i){t.cX(i)},addEventListener(i,e){t.wn(i,e)},removeEventListener(i,e){t.mn(i,e)}}}(this)),this.hu}get sx(){return this.CY.sx}get kY(){return this.Rz.kY}EY(t){this.Rz.EY(t)}gY(t){this.nV.gY(t)}wY(t){this.nV.wY(t)}hX(t){this.nV.hX(t)}cX(t){this.nV.cX(t)}kn(){this.Vo(),this.CY.mn(d.Xw,this.DY),this.CY.mn(d.Gw,this.BY)}constructor(t,i,e){super(i),this.CY=void 0,this.nV=void 0,this.Rz=void 0,this.hu=void 0,this.DY=void 0,this.BY=void 0,this.CY=t,this.nV=i,this.Rz=e,this.DY=t=>{this.So(t)},this.BY=t=>{this.So(t)},this.CY.wn(d.Xw,this.DY),this.CY.wn(d.Gw,this.BY)}};r(),r(),r();var Sa=function(t){return t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth",t}({});r();function OD(t,i,e,s,n,r){const h=[];let o=t-_.max(r,1),a=t+n;if(i&&e){const t=ur(e,1,5),s=i-t;o=_.min(o,s);const n=i+e+t;a=_.max(a,n)}0!==o&&s.qM(0,o)&&h.push([0,o]);return s.qM(a,1/0)&&h.push([a,1/0]),h}function FD(t){return t instanceof m&&"QuotaExceededError"===t.name}r();var UD={type:Sa.BANDWIDTH};function VD(t){const i=Ua(UD);return Z(t)?i.type=HD(t):Lu(t)&&function(t){switch(t){case Sa.PERFORMANCE:case Sa.QUALITY:case Sa.BANDWIDTH:return!0;default:return!1}}(t.type)&&(i.type=HD(t.type)),Lu(t)&&Lu(t.metadata)&&(i.metadata=function(t){const i={},e=co(t.bitrate);return S(e)||(i.bitrate=e),i}(t.metadata)),i}function HD(t){switch(t){case"bandwidth":return Sa.BANDWIDTH;case"performance":return Sa.PERFORMANCE;case"quality":return Sa.QUALITY}}r();var WD=class extends wp{constructor(t){super("NY"),this.MY=void 0,this.MY=t}};r();var qD=class extends wp{constructor(t){super("LY"),this.OY=void 0,this.OY=t}};r();var zD=class extends wp{constructor(t){super("FY"),this.UY=void 0,this.UY=t}},GD=class extends Ne{VY(t){this.HY=t}get WY(){switch(this.qY.type){case Sa.PERFORMANCE:return 0;case Sa.QUALITY:return 1/0;case Sa.BANDWIDTH:return this.qY.metadata&&void 0!==this.qY.metadata.bitrate?this.qY.metadata.bitrate:HI.Ng.fW();default:return HI.Ng.fW()}}get Ca(){return this.hu}get OY(){return this.qY}set OY(t){this.qY=t,this.So(new qD(t))}get MY(){return this.zY}set MY(t){this.zY=t,this.So(new WD(t))}get GY(){return _.min(this.zY,this.XY)}get UY(){return this.jY}set UY(t){this.jY=t,this.So(new zD(t))}get QY(){return this.XY}get kY(){var t;return null!=(t=this.KY)?t:this.HY.hq}EY(t){this.KY=t}YY(t){let i=_.min(t,.8*this.XY);if(i=_.max(10,i),this.XY===i)return!1;const e=this.GY;this.XY=i;const s=this.GY;return s!==e&&this.So(new WD(s)),!0}get JY(){return this.ZY}set JY(t){this.ZY=t}constructor(...t){super(...t),this.hu=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.OY)},set strategy(i){t.OY=VD(i)},get targetBuffer(){return t.MY},set targetBuffer(i){const e=co(i);S(e)||(t.MY=e)},get bufferLookbackWindow(){return t.UY},set bufferLookbackWindow(i){const e=co(i);S(e)||(t.UY=e<=0?30:e)},get maxBufferLength(){return t.QY},get clearBufferWhenSettingTargetQuality(){return t.JY},set clearBufferWhenSettingTargetQuality(i){t.JY=Zn(i)}}}(this),this.qY=UD,this.zY=20,this.jY=30,this.XY=1/0,this.ZY=!1,this.KY=void 0,this.HY=void 0}};r(),r();var XD=class extends Oi{xa(){return new jD}constructor(){super("mI")}},jD=class extends wp{constructor(){super("change")}};r(),r();var QD=class extends Ne{kn(){this.Vo();for(const t of this.Zf)this.$Y.mn(t,this.tJ)}constructor(t,i,e){super(e),this.$Y=void 0,this.Zf=void 0,this.tJ=t=>{Zb(t)&&ct(()=>{this.So(t.Ca)})},this.$Y=t,this.Zf=i;for(const t of this.Zf)this.$Y.wn(t,this.tJ)}},ws=class extends _o{kn(){this.Vo(),this.$Y.mw(this.tJ)}constructor(t,i){super(i),this.$Y=void 0,this.tJ=t=>{Zb(t)&&ct(()=>{this.So(t.Ca)})},this.$Y=t,this.$Y.lw(this.tJ)}};var KD=class extends _o{get EO(){return this.OO}set EO(t){if(this.PO<=t)throw new m("Start time of a clip should be smaller than the end time.");this.OO!==t&&(this.OO=t,this.So(new XD))}get PO(){return this.VO}set PO(t){if(t<=this.EO)throw new m("End time of a clip should be larger than the start time.");this.VO!==t&&(this.VO=t,this.So(new XD))}get Ca(){return this.hu||(this.hu=function(t){let i;const e={get startTime(){return t.EO},set startTime(i){t.EO=i},get endTime(){return t.PO},set endTime(i){t.PO=i},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new ws(t,e),e}(this)),this.hu}hr(){0===this.OO&&this.VO===1/0||(this.OO=0,this.VO=1/0,this.So(new XD))}iJ(){return new ve([this.EO,this.PO],[!0,!0])}constructor(...t){super(...t),this.OO=0,this.VO=1/0,this.hu=void 0}};r();var YD=class t extends Yc{OP(t,i){const e=this.eJ.iJ().DM(t);super.OP(e,i),this.sJ()}VP(){return super.VP()||this.nJ}get rJ(){return this.Tx().length?this.Tx():this.eJ.iJ()._s()}Tx(){return ve.jn(super.Tx()).Mn(this.eJ.iJ())._s()}Gx(){this.VP()?this.OP(this.rJ.start(0)):this.hJ(),super.Gx(),this.sJ()}async Ta(t,i){ii(i),this.nJ=!1,this.eJ.hr(),await super.Ta(t,i)}kn(){return this.eJ.mn("mI",this.oJ),this.PP.mn(d._y,this.Nc),this.aJ(),super.kn()}$x(t){switch(t.type){case d.$w:return this.So(t),this.uJ(),!0;case d.Zw:case d.Cw:return this.So(t),this.cJ(),!0;case d.Bw:if(this.dJ)return!0}return super.$x(t)}get dJ(){return this.eJ.PO<this.ct}aJ(){this.lJ&&(Ii(this.lJ),this.lJ=void 0)}sJ(){const i=this.MP,e=this.dJ&&i>=this.eJ.PO-t.fd;this.nJ&&!e?(this.nJ=!1,this.hx&&this.Gx()):this.nJ||!e||this.kx||this.fJ||(this.nJ=!0,this.So(new At(i)),this.zx())}hJ(){if(this.ct===1/0)return;const i=this.rJ,e=ve.jn(i).DM(this.MP);uh(this.MP,e,t.fd)||this.OP(e)}constructor(i,e){super(i),this.eJ=void 0,this.nJ=!1,this.lJ=void 0,this.fJ=!1,this.oJ=()=>{this.hJ(),this.sJ()},this.Nc=()=>{this.aJ(),this.sJ();this.dJ&&this.MP>=this.eJ.PO-t.vJ&&!this.UP&&(this.lJ=Is(this.Nc))},this.uJ=()=>{this.fJ=!0},this.cJ=()=>{this.fJ&&(this.fJ=!1,this.sJ())},this.eJ=e,this.eJ.wn("mI",this.oJ),this.PP.wn(d._y,this.Nc)}};YD.vJ=1,YD.fd=.001,r();var JD=class{get _J(){return this.gJ}set _J(t){this.gJ=t}constructor(){this.gJ=void 0,this.gJ=!1}};r();var ZD=class extends Yc{VP(){return!this.gJ._J&&super.VP()}zx(){this.pJ=!0,super.zx()}Gx(){this.pJ=!1,super.Gx()}$x(t){if(this.gJ._J)switch(t.type){case d.Bw:return this.MP=0,this.pJ||(this.kx?this.mJ=!0:this.Gx()),!0;case d.Zw:this.mJ&&(this.mJ=!1,this.Gx());break;case d.jw:if(this.mJ||super.VP())return!0}return super.$x(t)}constructor(t,i){super(t),this.gJ=void 0,this.mJ=!1,this.pJ=!1,this.gJ=i}};r(),r();var $D=class{get Ca(){return this.hu}get eO(){return this.oa.JP.eO}get nO(){return this.oa.JP.nO}get iO(){return this.oa.JP.iO}get wJ(){throw new m("Not implemented")}get yJ(){throw new m("Not implemented")}get rO(){return this.oa.JP.rO}get sO(){return this.oa.JP.sO}get hO(){return this.oa.JP.hO}constructor(t){this.oa=void 0,this.hu=void 0,this.oa=t,this.hu=function(t){return{get currentBandwidthEstimate(){return t.nO},get corruptedVideoFrames(){return t.eO},get droppedVideoFrames(){return t.iO},get totalVideoFrames(){return t.sO},get totalBytesLoaded(){return t.rO},get bufferedSegments(){return t.hO}}}(this)}};function tB(t){if(!t||!Tf(t))return{iO:0,eO:0,sO:0,nO:0,rO:0,hO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const i=t.getVideoPlaybackQuality();return{iO:i.droppedVideoFrames,eO:i.corruptedVideoFrames||0,sO:i.totalVideoFrames}}return{iO:t.webkitDroppedFrameCount||0,eO:0,sO:t.webkitDecodedFrameCount||0}}r(),r();var iB=class extends Oi{xa(){return new eB}constructor(){super("AJ")}},eB=class extends wp{constructor(){super("castingchange")}};r();var sB=class extends Ne{get bJ(){var t,i;return(null==(t=this.SJ)?void 0:t.bJ)||(null==(i=this.TJ)?void 0:i.bJ)||!1}get kJ(){return this.SJ}get EJ(){return this.TJ}PJ(t){this.SJ=t,this.xJ(t)}IJ(t){this.TJ=t,this.xJ(t)}xJ(t){t.wn("statechange",this.RJ)}CJ(t){t.mn("statechange",this.RJ)}get Ca(){return this.hu||(this.hu=function(t){let i;const e={get casting(){return t.bJ},get airplay(){var i;return null==(i=t.kJ)?void 0:i.Ca},get chromecast(){var i;return null==(i=t.EJ)?void 0:i.Ca},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new QD(t,["AJ"],e),e}(this)),this.hu}kn(){this.Vo(),this.SJ&&(this.CJ(this.SJ),this.SJ=void 0),this.TJ&&(this.CJ(this.TJ),this.TJ=void 0)}constructor(...t){super(...t),this.SJ=void 0,this.TJ=void 0,this.DJ=!1,this.hu=void 0,this.RJ=()=>{const t=this.DJ,i=this.bJ;t!==i&&(this.DJ=i,this.So(new iB))}}};r(),r();var Ru=class{static async BJ(t,i){try{const e=new $n({Yu:t,dk:M.NT,Uk:X.GET}),s=await i.lk(e);return(await s.ck()).trim()}catch(t){return void D(t)}}static NJ(t){try{const i=wC(t);return new SC(i.key,i.domains_page,i.domains_source,i.expiration_date,i.features,i.customer_id,i.generation_date,i.sdks,i.send_impression)}catch(t){throw new Ga(Vo.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static MJ(t){void 0===t&&(t=$r.bh),zd.um("The baked-in license is used. Please update the configuration with your license.");const i=t.rj("F2b-iL'[FL[S"),e=JSON.parse('["F$(:_L50F|aY"]').map(i=>t.rj(i)),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map(i=>t.rj(i)),n=Number(new Date(Number(t.rj('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map(i=>t.rj(i));return new SC(i,e,s,n,r)}static convertLicenseToDummyLicense(t){return new SC(t._j,t.gj,t.pj,864e13,t.wj,t.yj,Date.now(),t.bj,t.Sj)}};r();var ba=class t{static IT(){return t.Ng||(t.Ng=nB.LS()?new nB:new CA),t.Ng}static Gy(i){t.IT().Gy(i)}static xT(){t.IT().xT()}static Wy(i){return t.IT().Wy(i)}static qy(i,e){t.IT().qy(i,e)}static LJ(i){const e=t.Wy(i);if(void 0!==e)return C(e)}static OJ(i){return"true"===t.Wy(i)}};ba.Ng=void 0;var nB=class extends ba{static LS(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}Gy(t){self.localStorage.removeItem(t)}xT(){self.localStorage.clear()}Wy(t){var i;return null!=(i=self.localStorage.getItem(t))?i:void 0}qy(t,i){self.localStorage.setItem(t,i)}},rB="https://validate.theoplayer.com/1/",hB=72e5,oB=_.floor(14399999*_.random()-hB),aB="THEOplayer.license",uB=class{async FJ(){const t=await this.UJ(this.VJ.license,this.VJ.licenseUrl);this.fQ.HJ(t)}async UJ(t,i){let e,s=i;t?e=Ru.NJ(t):s||(e=Ru.MJ()),s||(s=rB+e._j);const n=this.WJ();let r;if(e&&(r=this.qJ.Nj(e),r===Ee.dj)){if(this.zJ(e.mj)&&this.zJ(null==n?void 0:n.mj)){const t=await this.GJ(s);if(t)return t}return e}if(n){if(this.qJ.Nj(n)===Ee.dj){if(this.zJ(null==n?void 0:n.mj)){const t=await this.GJ(s);if(t)return t}return n}ba.Gy(aB)}const h=await Ru.BJ(s,this.nV);let o;if(h){o=Ru.NJ(h);if(this.qJ.Nj(o)===Ee.dj)return ba.qy(aB,h),o;ba.Gy(aB)}else if(!this.Vj&&e&&r===Ee.lj&&s===rB+e._j)return Ru.convertLicenseToDummyLicense(e);if(!e&&!o)throw new Ga(Vo.LICENSE_ERROR,"The given license is invalid!");this.XJ(null!=e?e:o,new Ga(Vo.LICENSE_ERROR,"The given license is invalid!"))}async xj(t){let i=await this.fQ.lQ();if(this.zJ(i.mj)){var e;const t=null!=(e=this.VJ.licenseUrl)?e:rB+i._j,s=await this.GJ(t);s&&(this.fQ.HJ(s),i=s)}try{const e=this.qJ.Nj(i);if(e===Ee.vj){const t=TC.Tj;throw new Ga(PC(t),MC.Dj(t))}if(e===Ee.lj){const t=TC.lj;throw new Ga(PC(t),MC.Dj(t))}this.qJ.xj(t,i)}catch(t){this.jJ(t)}}async Bj(t){const i=await this.fQ.lQ();try{this.qJ.Bj(t,i)}catch(t){this.jJ(t)}}async GJ(t){try{const i=await Ru.BJ(t,this.nV);if(void 0===i)return;const e=Ru.NJ(i);return this.qJ.Nj(e)===Ee.dj?(ba.qy(aB,i),e):void 0}catch(t){return}}zJ(t){return!t||Number(new Date)+2592e5+oB>=t}WJ(){const t=ba.Wy(aB);if(t)return Ru.NJ(t)}XJ(t,i){this.fQ.HJ(t),this.jJ(i)}jJ(t){throw Pv(t.message),this.QJ.gQ(t.message),t}constructor(t,i,e,s,n,r){this.nV=void 0,this.qJ=void 0,this.QJ=void 0,this.fQ=void 0,this.VJ=void 0,this.MA=void 0,this.Vj=void 0,this.nV=t,this.qJ=i,this.QJ=e,this.fQ=s,this.VJ=n,this.MA=r,this.Vj=NC(r)}};r();var cB=class{HJ(t){this.KJ=t,this.YJ.Xy()}get JJ(){return this.KJ}async lQ(){return this.KJ?Promise.resolve(this.KJ):(await this.YJ.Qy,this.KJ)}constructor(){this.KJ=void 0,this.YJ=new pa}};r(),r();var dB=class extends Oi{xa(){return new lB}constructor(){super("mI")}},lB=class extends wp{constructor(){super("change")}};function fB(t){let i;const e={get fontFamily(){return t.ZJ},set fontFamily(i){t.ZJ=i},get fontColor(){return t.$J},set fontColor(i){t.$J=i},get fontSize(){return t.tZ},set fontSize(i){t.tZ=i},get backgroundColor(){return t.iZ},set backgroundColor(i){t.iZ=i},get windowColor(){return t.eZ},set windowColor(i){t.eZ=i},get edgeStyle(){return t.sZ},set edgeStyle(i){t.sZ=i},get marginTop(){return t.nZ},set marginTop(i){t.nZ=i},get marginBottom(){return t.rZ},set marginBottom(i){t.rZ=i},get marginLeft(){return t.hZ},set marginLeft(i){t.hZ=i},get marginRight(){return t.oZ},set marginRight(i){t.oZ=i},addEventListener(t,e){const s=$a(t,Hi);i.wn(s,e)},removeEventListener(t,e){const s=$a(t,Hi);i.mn(s,e)}};return i=new mp(e),t.wn(["mI"],t=>i.So(t.Ca)),e}r();var vB={ZJ:void 0,$J:void 0,tZ:void 0,iZ:void 0,eZ:void 0,sZ:void 0,nZ:void 0,rZ:void 0,hZ:void 0,oZ:void 0},_B="THEOplayer.textTrackStyle.",gB=class t extends Ne{get aZ(){return this.uZ}get ZJ(){return this.uZ.ZJ}set ZJ(t){this.er({ZJ:t})}get $J(){return this.uZ.$J}set $J(t){this.er({$J:t})}get tZ(){return this.uZ.tZ}set tZ(t){this.er({tZ:t})}get iZ(){return this.uZ.iZ}set iZ(t){this.er({iZ:t})}get eZ(){return this.uZ.eZ}set eZ(t){this.er({eZ:t})}get sZ(){return this.uZ.sZ}set sZ(t){this.er({sZ:t})}get nZ(){return this.uZ.nZ}set nZ(t){this.er({nZ:t})}get rZ(){return this.uZ.rZ}set rZ(t){this.er({rZ:t})}get oZ(){return this.uZ.oZ}set oZ(t){this.er({oZ:t})}get hZ(){return this.uZ.hZ}set hZ(t){this.er({hZ:t})}get Ca(){return this.hu||(this.hu=fB(this)),this.hu}er(i){this.uZ=Mo({},this.uZ,i),t.cZ(this.uZ),this.So(new dB)}static dZ(){const t=Mo({},vB);return t.ZJ=ba.Wy(_B+"fontFamily")||t.ZJ,t.$J=ba.Wy(_B+"fontColor")||t.$J,t.tZ=ba.Wy(_B+"fontSize")||t.tZ,t.iZ=ba.Wy(_B+"backgroundColor")||t.iZ,t.eZ=ba.Wy(_B+"windowColor")||t.eZ,t.sZ=ba.Wy(_B+"edgeStyle")||t.sZ,t}static cZ(t){ba.qy(_B+"fontFamily",t.ZJ||""),ba.qy(_B+"fontColor",t.$J||""),ba.qy(_B+"fontSize",t.tZ||""),ba.qy(_B+"backgroundColor",t.iZ||""),ba.qy(_B+"windowColor",t.eZ||""),ba.qy(_B+"edgeStyle",t.sZ||"")}constructor(){super(),this.uZ=void 0,this.hu=void 0,this.uZ=t.dZ()}};function pB(t,i){var e,s;t.style.marginLeft=(null!=(e=i.hZ)?e:0)+"px",t.style.marginRight=(null!=(s=i.oZ)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}r(),r(),r(),r();var mB=[d.uo,d.jw,Do.TM,d._y,d.Qw,d.Ww,d.$w,d.Zw,d.Bw,d.Kw,d.gy,d.Rw,Do.wI,d.Jw,Mc.ma,_r.Dw,_r.Dy,d.Pw,d.Ew,d.py,d.yy,d.LICENSE_REQUEST_GENERATED,d.Fw,d.Vw,d.Lw,d.Nw],wB={RL:!1};function yB(t){return void 0!==t.Rx}function AB(t){return t.Cd.Km===Zr.wV}r();var Zs=function(t){return t.lZ="fZ",t}({}),bo=["fZ"],Po=function(t){return t[t.vZ=0]="vZ",t[t.BT=1]="BT",t[t._Z=2]="_Z",t}({});r(),r();var bB=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"],SB=function(t){return t.gZ="pZ",t.mZ="wZ",t.yZ="AZ",t}({}),TB=class extends Ne{get Cd(){return this.YS}get $W(){return this._T}async bZ(t,i){const e=await this.hw.nw(t.Ym,i),s=await e.IS();return await this.SZ(s),s}TZ(t){const i=this.TS;return i?0!==t.aq.length&&t.aq.some(t=>t.kS.Ym===i.kS):0!==this.YS.aq.length?t.aq.some(t=>this.YS.aq.some(i=>t.kS===i.kS)):0===t.aq.length||!this.kZ}EZ(t){return this.PZ.EZ(t),this.YS=t,Promise.resolve()}xZ(t){this.PZ.xZ(t)}IZ(){if(!Qt.vg)return"";const t=this.VJ.ps5;return"; pass_through="+t.passThrough+'; playmode="'+t.playMode+'";'}async zg(){this.Vo(),this._T.removeEventListener("loadedmetadata",this.RZ);for(const t of bB)this._T.removeEventListener(t,this.CZ);await this.ta.kn(),this.DZ(),await this.PZ.hr(),await this.BZ(void 0)}NZ(t){t!==this.MZ&&(this.MZ=t,t?this.LZ.Xy(void 0):this.LZ=new pa)}SZ(t){return this.ta.Zo(()=>this.BZ(t))}async BZ(t){if(t&&!this._T.src&&!this._T.srcObject)throw new fs(Vo.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this._T.src||this._T.srcObject))throw new fs(Vo.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.MZ&&await this.LZ.Qy;const i=this.TS;i&&(await i.PS(this._T),this.TS=void 0),t&&(await t._n(this._T),this.TS=t)}Ta(t,i){return this.ta.Zo(()=>this.OZ(t,i))}OZ(t,i){this.NZ(!1);const e=this.TL.ux;if(Z(t)&&i){const e=this.FZ(t,i);this._T.appendChild(e)}else if(Z(t))this._T.src=t;else if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&Qt.ru&&Qt.Q_>=17}(this._T))try{this._T.srcObject=t}catch(i){this._T.src=URL.createObjectURL(t)}else this._T.src=URL.createObjectURL(t);else kB(t)&&(this._T.srcObject=t);this.TL.ux=e}FZ(t,i){const e=h.createElement("source");return e.src=t,e.type=i+this.IZ(),e}UZ(t){return this.ta.Zo(()=>this.VZ(t))}VZ(t){this.OZ(t),this._T.load()}DZ(){this.NZ(!1),kf(this._T)}async HZ(){this.TS&&await this.TS.hr()}constructor(t,i,e,s,n){super(),this.YS=void 0,this.TL=void 0,this._T=void 0,this.MZ=!1,this.LZ=new pa,this.kZ=!1,this.ta=new te,this.PZ=void 0,this.hw=void 0,this.VJ=void 0,this.TS=void 0,this.RZ=()=>{this.kZ=!0},this.CZ=()=>{this.NZ(!0)},this.YS=t,this.TL=i,this._T=i.$W,this.PZ=e,this.hw=s,this.VJ=n,this._T.addEventListener("loadedmetadata",this.RZ);for(const t of bB)this._T.addEventListener(t,this.CZ)}};function kB(t){return"undefined"!=typeof MediaStream&&t instanceof MediaStream}var EB=class extends TB{get IP(){return ve.jn(this._T.buffered)}get ct(){return this._T.duration}get WZ(){const t=this.ct;if(!isFinite(t))return!1;const i=this.IP;if(0===i.V)return!1;return t-i.An(i.V-1)<yt}get mx(){return this._T.preload}set mx(t){this._T.preload=t}get Sx(){return ve.jn(this._T.seekable)}get qZ(){return this.IP}get zZ(){if(Tf(this._T)&&(this._T.videoWidth>0||this._T.videoHeight>0))return this.IP}async VY(){const t=this.Cd;switch(t.cq){case Xh.aR:case Xh.uR:this._T.setAttribute("crossorigin",t.cq);break;case Xh.Lk:default:this._T.removeAttribute("crossorigin")}void 0!==t.mx?this._T.preload=t.mx:this._T.preload=q.TW,void 0!==t.dq?this._T.title=t.dq:Fl(this._T),t.GZ?await this.UZ(t.GZ):Qt.vg?await this.Ta(t.iR,t.qT):await this.Ta(t.iR),this.PZ.Un(this,t)}TZ(t){return!1}EZ(t){return Promise.resolve(void 0)}XZ(t){return!1}jZ(){return!kB(this.YS.GZ)}async zg(){Fl(this._T),await super.zg()}static QZ(t,i){return!!i.canPlayType&&Boolean(i.canPlayType(t.qT))}};r();var H=class extends wp{constructor(t){super(d.Qw),this.currentTime=void 0,this.currentTime=t}};r();var Pt=class extends wp{constructor(){super(d.Ww)}};r(),r();var PB=function(t){return t.KZ="YZ",t}({}),xB=class extends wp{constructor(t){super("YZ"),this.JZ=void 0,this.JZ=t}},IB=class extends Ne{get ZZ(){return this.$Z}t$(t,i){const e=new ve([t,i]);this.$Z=this.$Z.OM(e),this.So(new xB(e))}i$(t,i){this.$Z=this.$Z.UM(new ve([t,i]))}hr(){this.$Z=ve.iL()}kn(){this.Vo()}constructor(...t){super(...t),this.$Z=ve.iL()}};function RB(t,i){return void 0===i&&(i=new WA({highWaterMark:1/0})),new HA(new CB(t,i),{highWaterMark:0})}r(),r(),r();var CB=class{start(t){this.YJ=t,this.e$()&&this.s$()}pull(){this.tf.length>0?this.n$():this.r$=!0,this.e$()&&this.s$()}cancel(t){return Yo(this.tf),this.if=0,this.r$=!1,this.Wd.cancel(t)}n$(){if(0===this.tf.length)return;const t=this.tf;this.tf=[],this.if=0,this.r$=!1,this.YJ.enqueue(t)}e$(){if(this.r$)return!0;return this.h$-this.if>0}s$(){if(this.o$)return;const t=this.Wd.read().then(this.a$).catch(this.EE);this.o$=t;const i=()=>{this.o$===t&&(this.o$=void 0)};t.then(i,i)}constructor(t,{size:i=()=>1,highWaterMark:e=1}){this.Wd=void 0,this.u$=void 0,this.h$=void 0,this.tf=[],this.if=0,this.YJ=void 0,this.r$=!1,this.o$=void 0,this.a$=t=>t.done?(this.n$(),void this.YJ.close()):(this.tf.push(t.value),this.if+=this.u$(t.value),this.r$&&this.n$(),this.e$()?this.Wd.read().then(this.a$):void 0),this.EE=t=>{this.n$(),this.YJ.error(t)},this.Wd=t.getReader(),this.u$=i,this.h$=e}};r(),r(),r(),r();var DB=class{c$(t){this.d$.push(t),this.Vy+=t.byteLength}l$(t){if(this.Vy<=t)return this.f$();const i=this.d$;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.slice(0,s);if(s<i.length&&e<t){const r=t-e;0,n.push(ao(i[s],0,r)),e+=r}return{d$:n,Vy:e}}v$(t){const i=this.l$(t);return 1===i.d$.length?i.d$[0]:_m(i.d$,i.Vy)}f$(){return{d$:this.d$,Vy:this.Vy}}_$(t){if(this.Vy<=t)return this.g$();const i=this.d$;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.splice(0,s);if(i.length>0&&e<t){const s=t-e;0,n.push(ao(i[0],0,s)),i[0]=ao(i[0],s),e+=s}return this.Vy-=e,{d$:n,Vy:e}}p$(t){const i=this._$(t);return 1===i.d$.length?i.d$[0]:_m(i.d$,i.Vy)}g$(){const t=this.f$();return this.d$=[],this.Vy=0,t}m$(){const t=1===this.d$.length?this.d$[0]:_m(this.d$,this.Vy);return this.d$=[],this.Vy=0,t}constructor(){this.d$=[],this.Vy=0}},Xo=class{w$(t,i){}y$(){}A$(t){this.tf.c$(t),this.b$(!1)}S$(){this.b$(!0)}T$(){return 0!==this.Ra||0!==this.tf.Vy}b$(t){for(;0!==this.tf.Vy;){if(!t&&this.k$>this.tf.Vy)return;switch(this.Ra){case 0:this.E$(t);break;case 1:this.P$(t);break;case 2:this.x$(t)}}}I$(){this.Ra=0,this.k$=8}E$(t){const i=dh(this.tf.v$(this.k$)),e=new Ui,s=Cl._D(i,e);if(!s.cD)return this.k$=s.pD,void(t&&this.k$>this.tf.Vy&&this.R$(this.tf.Vy));const n=s.gD.Km;let r=s.gD.Vy;0===r&&(r=1/0),this.w$(n,r),this.C$(n)?this.D$(r):this.R$(r)}D$(t){this.Ra=1,this.k$=t}P$(t){const i=dh(this.tf.p$(this.k$)),e=new Ui,s=Cl.dD(i,e,!t);if(!s.cD)throw new nT(e.ac);this.y$(),this.B$(s.lD),this.I$()}R$(t){this.Ra=2,this.k$=0,this.N$=t}x$(t){const i=this.tf._$(this.N$);this.N$-=i.Vy;for(const t of i.d$)this.M$(t);(0===this.N$||t&&this.N$===1/0)&&(this.y$(),this.I$())}constructor(){this.tf=new DB,this.Ra=0,this.k$=0,this.N$=0,this.I$()}};function BB(t){return t instanceof Zw}function NB(t){return t instanceof Yw}function MB(t){return t instanceof jw||t instanceof Qw}function LB(t){return t instanceof yw}function OB(t){return t instanceof Zm}function FB(t){return t instanceof al}function UB(t){return t instanceof Fc}function VB(t){return t instanceof ay}function HB(t){return t instanceof Fh}function WB(t){return t instanceof sy}function qB(t){return t instanceof ry}function zB(t,i){const e=Jr(t.boxes,WB);if(e&&e.flags.baseDataOffsetPresent)e.baseDataOffset=e.baseDataOffset.add(i);else for(const e of t.boxes)e instanceof ry&&e.flags.dataOffsetPresent&&(e.dataOffset=e.dataOffset+i)}r();var GB=class extends Xo{start(t){this.YJ=t}transform(t){this.A$(t)}flush(){this.S$()}C$(t){return t===Ro.OR||t===Ro.IC||t===Ro.HC}B$(t){const i=this.L$(t);this.YJ.enqueue(i)}M$(t){this.YJ.enqueue(t)}L$(t){const i=ta(t.ck.ck);switch(t.Km){case"moov":return this.O$(i);case"sidx":return this.F$(i);case"moof":return this.U$(i)}return i}get V$(){if(void 0===this.H$)throw new m("Expected to have found a movie header timescale.");return this.H$}W$(t){const i=this.q$.get(t);if(void 0===i)throw new m("Expected to have found a media header timescale for track ID "+t+".");return i}O$(t){const i=Ey(t);for(let t=0;t<i.boxes.length;t++){const e=i.boxes[t];e instanceof qw?i.boxes[t]=this.z$(e):e instanceof zw?i.boxes[t]=this.G$(e):e instanceof Yw&&this.X$(e)}for(const t of i.boxes)t instanceof al&&this.j$(t);return i.serialize().join()}z$(t){this.H$=t.timescale;const i=Zi(Wt.fromNumber(t.duration,!0),this.V$,this.Q$);return 0!==i.getHighBits()?this.G$(function(t){return new zw({creation:Wt.fromNumber(t.creationTime,!0),modification:Wt.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Wt.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.Q$,t.duration=i.toInt(),t)}G$(t){return this.H$=t.timescale,t.timescale=this.Q$,t.duration=Zi(t.duration,this.V$,this.Q$),t}X$(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof jw?(i=s.trackId,t.boxes[e]=this.K$(s)):s instanceof Qw?(i=s.trackId,t.boxes[e]=this.Y$(s)):s instanceof yw?this.J$(s,i):s instanceof uw&&this.Z$(s)}}K$(t){const i=Zi(Wt.fromNumber(t.duration,!0),this.V$,this.Q$);return 0!==i.getHighBits()?this.Y$(function(t){return new Qw({creation:Wt.fromNumber(t.creationTime,!0),modification:Wt.fromNumber(t.modificationTime,!0),duration:Wt.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=i.toInt(),t)}Y$(t){return t.duration=Zi(t.duration,this.V$,this.Q$),t}J$(t,i){for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof gw?t.boxes[e]=this.t0(s,i):s instanceof pw&&(t.boxes[e]=this.i0(s,i))}}t0(t,i){this.q$.set(i,t.timescale);const e=Zi(Wt.fromNumber(t.duration,!0),t.timescale,this.Q$);return 0!==e.getHighBits()?this.i0(function(t){return new pw({creation:Wt.fromNumber(t.creationTime,!0),modification:Wt.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Wt.fromNumber(t.duration,!0)},t.language,t.flags)}(t),i):(t.timescale=this.Q$,t.duration=e.toInt(),t)}i0(t,i){return this.q$.set(i,t.timescale),t.timescale=this.Q$,t.duration=Zi(t.duration,t.timescale,this.Q$),t}Z$(t){for(const i of t.boxes)i instanceof hw?this.e0(i):i instanceof ow&&this.s0(i)}e0(t){for(const i of t.entries)i.mediaTime=jB(i.mediaTime,this.V$,this.Q$),i.segmentDuration=jB(i.segmentDuration,this.V$,this.Q$)}s0(t){for(const i of t.entries)i.mediaTime=Zi(i.mediaTime,this.V$,this.Q$),i.segmentDuration=Zi(i.segmentDuration,this.V$,this.Q$)}j$(t){for(let i=0;i<t.boxes.length;i++){const e=t.boxes[i];e instanceof Fc?this.n0(e):e instanceof Ow?t.boxes[i]=this.r0(e):e instanceof Fw&&(t.boxes[i]=this.h0(e))}}n0(t){const i=this.W$(t.trackId);t.defaultSampleDuration=jB(t.defaultSampleDuration,i,this.Q$)}r0(t){const i=Zi(Wt.fromNumber(t.fragmentDuration,!0),this.V$,this.Q$);return 0!==i.getHighBits()?this.h0(function(t){return new Fw(Wt.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=i.toInt(),t)}h0(t){return t.fragmentDuration=Zi(t.fragmentDuration,this.V$,this.Q$),t}F$(t){let i=Py(t);return i=i instanceof vy?this.o0(i):this.a0(i),i.serialize().join()}o0(t){const i=t.timescale,e=Zi(Wt.fromNumber(t.earliestPresentationTime,!0),i,this.Q$);if(0!==e.getHighBits())return this.a0(function(t){return new _y(t.referenceId,t.timescale,Wt.fromNumber(t.earliestPresentationTime,!0),Wt.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.Q$,t.earliestPresentationTime=e.toInt();for(const e of t.references)e.subsegmentDuration=jB(e.subsegmentDuration,i,this.Q$);return t}a0(t){const i=t.timescale;t.timescale=this.Q$,t.earliestPresentationTime=Zi(t.earliestPresentationTime,i,this.Q$);for(const e of t.references)e.subsegmentDuration=jB(e.subsegmentDuration,i,this.Q$);return t}U$(t){const i=xy(t),e=i.getSize();for(const t of i.boxes)t instanceof Fh&&this.u0(t);const s=i.getSize();if(s!==e){const t=s-e;for(const e of i.boxes)e instanceof Fh&&zB(e,t)}return i.serialize().join()}u0(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof sy?(i=this.W$(s.trackId),this.c0(s,i)):s instanceof iy?t.boxes[e]=this.d0(s,i):s instanceof Xc?t.boxes[e]=this.l0(s,i):s instanceof ry&&this.f0(s,i)}}c0(t,i){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=jB(t.defaultSampleDuration,i,this.Q$))}d0(t,i){const e=Zi(Wt.fromNumber(t.baseMediaDecodeTime,!0),i,this.Q$);return 0!==e.getHighBits()?this.l0(function(t){return new Xc(Wt.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),i):(t.baseMediaDecodeTime=e.toInt(),t)}l0(t,i){return t.baseMediaDecodeTime=Zi(t.baseMediaDecodeTime,i,this.Q$),t}f0(t,i){let e=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=jB(s,i,this.Q$);n.duration=t-e,e=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=XB(n.compositionTimeOffset,i,this.Q$))}}constructor(t){super(),this.YJ=void 0,this.Q$=void 0,this.H$=void 0,this.q$=ar(),this.Q$=t}};function XB(t,i,e){return Wt.fromInt(t,!1).multiply(e).divide(i).toNumber()}function jB(t,i,e){return Wt.fromInt(t,!0).multiply(e).divide(i).toNumber()}function Zi(t,i,e){return No.gF(t).VF(No.pF(e,!0)).zF(No.pF(i,!0)).IF()}var QB=class{v0(t){return t.pipeThrough(new Ta(this._0))}constructor(t){this._0=void 0,this._0=new GB(t)}};r(),r();var KB=function(t){return t[t.g0=64]="g0",t[t.p0=103]="p0",t[t.m0=107]="m0",t}({});function YB(t,i,e){const s=ua(t,i);if(s!==e)throw new g("Expected descriptor with tag "+e+", but found "+s)}function JB(t,i){YB(t,i,3);const e=ZB(t,i),s=i.ac+e,n=qe(t,i),r=ua(t,i),h=!!(64&r),o=!!(32&r),a=31&r;let u,c,d;if(!!(128&r)&&(u=qe(t,i)),h){c=Wc(t,i,ua(t,i))}o&&(d=Wc(t,i,2));const l=function(t,i){YB(t,i,4);const e=ZB(t,i),s=i.ac+e,n=ua(t,i),r=ua(t,i),h=r>>2,o=!!(2&r),a=Gp(t,i,3),u=Cu(t,i),c=Cu(t,i);let d;if(i.ac<s){const e=function(t,i){return t.getUint8(i.ac)}(t,i);5===e&&(d=function(t,i){YB(t,i,5);const e=ZB(t,i),s=T(t,i,e);return{w0:5,y0:s}}(t,i))}return i.My(s),{w0:4,A0:n,b0:h,S0:o,T0:a,k0:u,E0:c,P0:d}}(t,i);return i.My(s),{w0:3,o:n,x0:u,Yu:c,I0:a,R0:d,C0:l}}function ZB(t,i){let e=0;for(let s=0;s<4;s++){const s=ua(t,i);if(e=e<<7|127&s,!(128&s))break}return e}function $B(t,i){const e=ua(t,i),s=ua(t,i),n=ua(t,i),r=ua(t,i),h=3&ua(t,i),o=31&ua(t,i),a=[];for(let e=0;e<o;e++){const e=qe(t,i);a.push(T(t,i,e))}const u=ua(t,i),c=[];for(let e=0;e<u;e++){const e=qe(t,i);c.push(T(t,i,e))}return{D0:e,B0:s,N0:n,M0:r,L0:h,O0:a,F0:c}}function Wu(t,i,e){if(e&&i.byte>=e)return;const s=t.Wy(i.byte);return i.byte+=1,s}function tN(t,i){return function(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=256*s+Wu(t,i);return s}(t,i,2)}r(),r(),r(),r(),r(),r();var iN=class t{U0(t){this.V0=this.V0.concat(t.V0),this.H0+=t.V}W0(t,i,e){const s=this.H0,n=e-i;n>0&&(this.V0.push({q0:i,z0:e,G0:n,X0:s,j0:t}),this.H0+=n)}Wy(t){for(const i of this.V0)if(i.X0<=t&&t<i.X0+i.G0)return i.j0[t+i.q0-i.X0]}Q0(t,i){let e=i;for(const i of this.V0){const s=i.z0;for(let n=i.q0;n<s;n+=1,e+=1)t[e]=i.j0[n]}return e}get V(){return this.H0}set V(t){const i=this.V0;let e=this.H0-t;if(!(t>=this.H0))if(this.H0=t,0!==t)for(let t=i.length-1;t>=0;t-=1){const s=i[t];if(e<=s.G0)return s.z0-=e,s.G0-=e,void(i.length!==t+1&&(i.length=t+1));e-=s.G0}else i.length=0}get ck(){const t=new Array(this.H0);let i=0;for(const e of this.V0){const s=e.z0;for(let n=e.q0;n<s;n+=1,i+=1)t[i]=e.j0[n]}return t}K0(){const t=new j(this.H0);let i=0;for(const e of this.V0){const s=e.z0;for(let n=e.q0;n<s;n+=1,i+=1)t[i]=e.j0[n]}return t}Ly(i){const e=new t;for(const t of this.V0)e.W0(t.j0,t.q0,t.z0);return e.DU=i||Mo({},this.DU),e}constructor(){this.H0=0,this.V0=[],this.DU={}}};r();var eN=[128,64,32,16,8,4,2,1];function sN(t,i){const e=_.floor(i.bit/8),s=0===(t.Wy(e)&eN[i.bit%8])?0:1;return i.bit+=1,s}function tu(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=2*s+sN(t,i);return s}function _i(t,i){let e=0;for(;0===sN(t,i)&&e<32;)e+=1;return tu(t,i,e)+2**e-1}function nN(t,i){const e=_i(t,i);return 1&e?_.floor((e+1)/2):-_.floor(e/2)}function rN(t,i){const e=[],s={byte:1};let n;do{e.push(oN(t,i,s)),n=i.Wy(s.byte)}while(void 0!==n&&128!==n);return e}function hN(t,i){let e,s=0;do{e=Wu(t,i),s+=e}while(255===e);return s}function oN(t,i,e){const s=hN(i,e),n=hN(i,e),r=e.byte,h=r+n;return e.byte=h,{Y0:t,J0:s,Z0:n,$0:r,t1:h,i1:i}}var aN=function(t){return t[t.e1=1]="e1",t[t.s1=2]="s1",t[t.n1=3]="n1",t[t.h1=4]="h1",t[t.o1=5]="o1",t[t.a1=6]="a1",t[t.u1=7]="u1",t[t.c1=8]="c1",t[t.d1=9]="d1",t}({}),uN=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function cN(t,i,e){let s=8,n=8;for(let r=0;r<e;r+=1){if(0!==n){n=(s+nN(t,i)+256)%256}s=0===n?s:n}}var dN=class{l1(){const t=this.v1;let i=_.max(0,this._1+t.length-2);const e=this.g1,s=e.V;let n=0;for(;i<s;i+=1){const s=e.Wy(i);0===s?n+=1:(3===s&&n>=2&&t.push(i),n=0)}this._1=i-t.length}m1(t){const i=this.v1;let e=t;for(const t of i){if(!(t<=e))return e;e+=1}return e}Wy(t){if(!(t>this.g1.V))return t>this._1&&this.l1(),this.g1.Wy(this.m1(t))}constructor(t){this.g1=void 0,this.v1=[],this._1=0,this.g1=t}};function lN(t){const i=new dN(t);let e,s,n,r,h,o,a=0,u=0,c=0,d=0;const l=i.Wy(1),f={bit:32};if(_i(i,f),100===l||110===l||122===l||144===l){const t=_i(i,f);3===t&&(e=sN(i,f)),_i(i,f),_i(i,f),sN(i,f);if(1===sN(i,f))for(let e=0;e<(3!==t?8:12);e+=1){1===sN(i,f)&&cN(i,f,e<6?16:64)}}const v=_i(i,f),g=_i(i,f);if(0===g)_i(i,f);else if(1===g){sN(i,f),nN(i,f),nN(i,f);const t=_i(i,f);for(let e=0;e<t;e+=1)nN(i,f)}_i(i,f),sN(i,f);const p=_i(i,f),m=_i(i,f),w=sN(i,f);0===w&&sN(i,f),sN(i,f);1===sN(i,f)&&(a=_i(i,f),u=_i(i,f),c=_i(i,f),d=_i(i,f));if(1===sN(i,f)){if(1===sN(i,f)){const t=tu(i,f,8);if(255===t)s=tu(i,f,16),n=tu(i,f,16);else{const i=uN[t];i&&(s=i[0],n=i[1])}}1===sN(i,f)&&sN(i,f);if(1===sN(i,f)){tu(i,f,3),sN(i,f);1===sN(i,f)&&(tu(i,f,8),tu(i,f,8),tu(i,f,8))}1===sN(i,f)&&(_i(i,f),_i(i,f)),r=sN(i,f),1===r&&(h=tu(i,f,32),o=tu(i,f,32),sN(i,f))}return{width:_.floor(16*(p+1)-2*a-2*u),height:_.floor((2-w)*(m+1)*16-2*c-2*d),RN:s,CN:n,w1:r?o/(2*h):void 0,A1:e,b1:v}}function fN(t){const i=lr(jt.TD(t),Ro.OR);if(!i)return;const e=i.gD.qD,s=[];for(const t of i.Z){const i=t.gD.$D,e=t.KD.gD.qD;let o,a,u;for(const i of t.KD.hB.uB.dB.fB){const t=vN(i);var n,r,h;if(t)o=null!=(n=t.S1)?n:o,a=null!=(r=t.T1)?r:a,u=null!=(h=t.E1)?h:u}s.push({$D:i,qD:e,S1:o,T1:a,E1:u})}return{qD:e,Z:s}}function vN(t){let i,e,s;if(t.Km===Ro.JR){var n;const e=$B(dh(t.jB.ck),new Ui);i=function(t){return"avc1."+_N(t.B0,2)+_N(t.N0,2)+_N(t.M0,2)}(e),s=null==(n=function(t){if(0===t.O0.length)return;const i=t.O0[0],e=new iN;return e.W0(i,0,i.byteLength),lN(e)}(e))?void 0:n.w1}else if(t.Km===Ro.$R||t.Km===Ro.tC){const e=function(t,i){const e=i.Uy(),s=vs(t,e,8),n=vs(t,e,2),r=vs(t,e,1),h=vs(t,e,5),o=vs(t,e,32),a=[];for(let i=0;i<6;i++)a.push(vs(t,e,8));const u=vs(t,e,8);e.Ny(4);const c=vs(t,e,12);e.Ny(6);const d=vs(t,e,2);e.Ny(6);const l=vs(t,e,2);e.Ny(5);const f=vs(t,e,3);e.Ny(5);const v=vs(t,e,3),_=vs(t,e,16),g=vs(t,e,2),p=vs(t,e,3),m=vs(t,e,1),w=vs(t,e,2),y=vs(t,e,8),A=[];for(let i=0;i<y;i++){const i=vs(t,e,1);e.Ny(1);const s=vs(t,e,6),n=vs(t,e,16),r=[];for(let i=0;i<n;i++){const i=vs(t,e,16),s=T(t,new Ui(e.ac>>3),i);e.Ny(8*i),r.push({P1:i,I1:s})}A.push({R1:i,C1:s,D1:n,B1:r})}return{D0:s,N1:n,M1:r,L1:h,O1:a,F1:u,U1:c,V1:d,H1:o,W1:l,q1:f,z1:v,G1:_,X1:p,j1:m,Q1:g,L0:w,K1:y,Y1:A}}(dh(t.JB.ck),new Ui);i=function(t,i){let e=t.toString()+".";switch(i.N1){case 0:break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C";break;default:return}switch(e+=i.L1.toString()+".",e+=function(t){let i=t;return i=i>>>1&1431655765|(1431655765&i)<<1,i=i>>>2&858993459|(858993459&i)<<2,i=i>>>4&252645135|(252645135&i)<<4,i=i>>>8&16711935|(16711935&i)<<8,i=i>>>16|i<<16,i}(i.H1).toString(16)+".",i.M1){case 0:e+="L";break;case 1:e+="H";break;default:return}e+=i.F1.toString();const s=i.O1.reduce((t,i)=>0===t?i:i+1,0);for(let t=0;t<s;t++)e+="."+i.O1[t].toString(16).toUpperCase();return e}(t.Km,e)}else if(t.Km===Ro.dC||t.Km===Ro.lC||t.Km===Ro.fC||t.Km===Ro.vC){const e=function(t,i){const e=i.Uy(),s=vs(t,e,8),n=vs(t,e,8),r=vs(t,e,7),h=vs(t,e,6),o=Boolean(vs(t,e,1)),a=Boolean(vs(t,e,1)),u=Boolean(vs(t,e,1)),c=vs(t,e,4);return vs(t,e,28),vs(t,e,32),vs(t,e,32),vs(t,e,32),vs(t,e,32),{J1:s,Z1:n,t2:r,i2:h,e2:o,s2:a,n2:u,h2:c}}(dh(t.cN.ck),new Ui);i=function(t,i){const e=t.toString(),s=Na(i.t2.toString(),2,"0"),n=Na(i.i2.toString(),2,"0");return e+"."+s+"."+n}(t.Km,e)}else if(t.Km===Ro.eC){const e=function(t,i){const e=i.Uy(),s=vs(t,e,8);e.Ny(24);const n=vs(t,e,8),r=vs(t,e,8),h=vs(t,e,4),o=vs(t,e,3),a=pu(t,e),u=vs(t,e,8),c=vs(t,e,8),d=vs(t,e,8),l=vs(t,e,16),f=new Array(8);for(let i=0;i<l;i++)f[i]=vs(t,e,8);return{D0:s,t2:n,i2:r,o2:h,a2:o,u2:a,kN:u,EN:c,PN:d,c2:l,d2:f}}(dh(t.$B.ck),new Ui);i=function(t,i){let e=t.toString()+".";return e+="0"+i.t2+".",e+=Na(""+i.i2,2,"0")+".",e+=Na(""+i.o2,2,"0")+".",e+=Na(""+i.a2,2,"0")+".",e+=Na(""+i.kN,2,"0")+".",e+=Na(""+i.EN,2,"0")+".",e+=Na(""+i.PN,2,"0")+".",e+="0"+i.u2,e}(t.Km,e)}else if(t.Km===Ro.nC){const e=function(t,i){const e=i.Uy();e.Ny(1);const s=vs(t,e,7),n=vs(t,e,3),r=vs(t,e,5),h=pu(t,e),o=pu(t,e),a=pu(t,e),u=pu(t,e),c=pu(t,e),d=pu(t,e),l=vs(t,e,2);e.Ny(3);const f=pu(t,e);let v;return f?v=vs(t,e,4):e.Ny(4),{bD:s,l2:n,f2:r,_2:h,g2:o,m2:a,w2:u,A2:c,b2:d,S2:l,T2:f,E2:v}}(dh(t.eN.ck),new Ui);i=function(t,i,e){let s=t.toString()+".";if(s+=i.l2+".",s+=""+Na(""+i.f2,2,"0"),s+=(0===i._2?"M":"H")+".",s+=(1===i.m2?12:10)+".",s+=(1===i.l2?0:i.w2)+".",s+=""+i.A2+i.b2+(1===i.A2&&1===i.b2?i.S2:"0"),e&&e.TN===iT.ON_SCREEN_COLOURS){const t=e;s+="."+Na(""+t.kN,2,"0")+"."+Na(""+t.EN,2,"0")+"."+Na(""+t.PN,2,"0")+"."+(t.xN?1:0)}return s}(t.Km,e,t.sN)}else if(t.Km===Ro.wC){e=function(t){const i=t.C0;switch(i.A0){case KB.g0:return function(t){var i;if(!(null==(i=t.P0)?void 0:i.y0))return"mp4a.40";const e=function(t,i){let e=vs(t,i,5);31===e&&(e=32+vs(t,i,6));const s=vs(t,i,4);let n;return 15===s&&(n=vs(t,i,24)),{P2:e,I2:s,R2:n,C2:vs(t,i,4)}}(dh(t.P0.y0),new Dp);return"mp4a.40."+e.P2}(i);case KB.p0:return"mp4a.40.2";case KB.m0:return"mp4a.40.34"}}(JB(dh(t.UB.ck),new Ui))}else if(t.Km===Ro.AC)e="fLaC";else if(t.Km===Ro._C)e="ac-3";else{if(t.Km!==Ro.gC)return(t.Km===Ro.xC||t.Km===Ro.EC)&&t.hN?vN(t.hN):void 0;e="ec-3"}return{S1:i,T1:e,E1:s}}function _N(t,i){const e=t.toString(16);return Na(e,i,"0")}function gN(t,i){const e=jt.TD(dh(t)),s=function(t,i){let e;for(const n of t.Z){var s;const t=null==(s=n.GN)?void 0:s.GN;if(t){const s=n.gD.$D,r=Jr(i.Z,t=>t.$D===s),h=$c.gF(t,r.qD);e&&!h.aF(e)||(e=h)}}return e}(lr(e,Ro.IC),i),n=lr(e,Ro.OC);return{EO:s.iF(),D2:n.ck}}function Ge(t){const i=t.DS("codecs");return i?i.split(",").map(t=>t.trim()):[]}function pN(t,i){return gf(t,i,bN)}function mN(t,i){return!("opus"===t)&&!("opus"===i)||t===i}function wN(t,i){const e=yN(t),s=yN(i);if((e||s)&&zd.Zs.Rp)return!0;const n=e||AN(t),r=s||AN(i);return!n&&!r||t.split(".")[0]===i.split(".")[0]}function yN(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function AN(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function bN(t,i){if(t===i)return!0;const e=t.split("."),s=i.split("."),n=e[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,i]=e,[,n,r]=s;if(t!==n)return!1;if(Number(i)!==Number(r))return!1}return!0}r(),r(),r();var SN=class extends R{get B2(){return this.N2}get M2(){return this.L2}constructor(t,i,e,s){super(e),this.N2=void 0,this.L2=void 0,this.O2=void 0,this.N2=t,this.L2=i,this.O2=e}};var TN=Qt.X_,kN=class extends Ne{get MY(){return this.zY}set MY(t){this.zY=t}get UY(){return this.jY}set UY(t){this.jY=t}get ga(){return this.F2||this.U2.updating}H2(t,i,e){switch(t.Km){case Po.vZ:case Po.BT:return this.W2(e=>this.q2(t,i,e),e);case Po._Z:throw new m("Opaque segments are not supported on web.")}}z2(t,i){switch(t.Km){case Po.vZ:return this.W2(i=>this.G2(t,i),i);case Po.BT:throw new m("Streaming initialization segments are not supported on web.");case Po._Z:throw new m("Opaque initialization segments are not supported on web.")}}async G2(t,i){this.X2?this.j2=fN(dh(t.ck)):(await this.Q2(t,void 0,i),TN&&(this.K2=!1,this.Y2=t))}async q2(t,i,e){TN&&this.K2&&this.Y2&&await this.G2(this.Y2,e);try{if(ii(e),this.X2&&this.j2){const n=await async function(t,i){switch(t.Km){case Po.vZ:return t;case Po.BT:{const e=await bn(t.ck,i);return ii(i),{Km:Po.vZ,ck:new j(e)}}case Po._Z:throw new m("Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,e),r=gN(n.ck,this.j2);var s;t={Km:Po.vZ,ck:r.D2},i=Mo({},i,{bU:r.EO+(null!=(s=i.bU)?s:0)})}await this.Q2(t,i,e),this.So(new wp(Zs.lZ))}finally{t.Km===Po.BT&&t.ck.cancel(new dt).catch(Ct)}}async Q2(t,i,e){switch(ii(e),i&&await this.J2(i),t.Km){case Po.vZ:if(this.Z2){const i=this.Z2.v0(qA(t.ck));return await this.t3(i,e)}return await this.i3(t.ck);case Po.BT:if(this.Z2){const i=this.Z2.v0(t.ck);return await this.t3(i,e)}return await this.t3(t.ck,e)}}async t3(t,i){const e=this.e3.IP,s=RB(t).getReader();let n=!1;try{for(;;){const t=await Nc(s.read(),i);if(t.done){n=!1;break}ii(i);const e=vm(t.value);n=!0,await this.i3(e)}}catch(t){if(s.cancel(t).catch(Ct),n){await this.s3();const t=this.e3.IP.Mn(e.BM());for(let i=0;i<t.V;i++)await this.n3(t.Tn(i),t.An(i))}throw t}}r3(t,i){return this.W2(()=>this.h3(t,i))}async h3(t,i){this.U2.appendWindowStart===t&&this.U2.appendWindowEnd===i||(await this.s3(),this.U2.appendWindowStart=0,this.U2.appendWindowEnd=i,this.U2.appendWindowStart=t)}async J2(t){if(!uh(this.U2.timestampOffset,t.bU,.001))try{this.U2.timestampOffset=t.bU}catch(i){await this.s3(),this.U2.timestampOffset=t.bU}}async i3(t){this.U2.appendBuffer(t),this.o3=!0,await this.a3()}u3(t,i,e){return this.W2(e=>this.n3(t,i,e),e)}async n3(t,i,e){ii(e),this.U2.remove(t,i),await this.a3()}a3(){const t=this.e3.IP;return new Promise((i,e)=>{let s,n=!1;const r=()=>{n=!0},h=()=>{n=!1,s="error"},o=()=>{n=!1,s="aborted"},a=()=>{n=!1,s="sourceclose",u()},u=()=>{c(),n&&!s?(t.GM(this.e3.IP)||this.So(new wp(Zs.lZ)),i()):e(new m(s))},c=()=>{this.U2.removeEventListener("update",r),this.U2.removeEventListener("error",h),this.U2.removeEventListener("abort",o),this.U2.removeEventListener("updateend",u),this.d3.mn(SB.mZ,a)};this.U2.addEventListener("update",r),this.U2.addEventListener("error",h),this.U2.addEventListener("abort",o),this.U2.addEventListener("updateend",u),Qt.w_&&Qt.A_<3&&this.d3.wn(SB.mZ,a)})}l3(){return this.W2(()=>this.s3())}async s3(){if(this.d3.Ax===VN.sE){TN&&(this.K2=!0),this.U2.updating&&(this.F2=!0);try{this.U2.abort()}catch(t){0,this.F2=!1}this.ga&&await this.a3().catch(Ct)}}f3(){return"function"==typeof this.U2.changeType&&!Qt.g_}EZ(t){if(this.v3(),this.d3.Ax===VN._3)return;var i;this.g3=t;const e=null!=(i=this.d3.m3(t.qT))?i:t.qT;if(this.X2=EN(t.qT,this.w3),this.f3()&&this.y3(e)){this.w3=e;const t=this.d3.IZ();this.U2.changeType(""+e+t)}}y3(t){if(Ih(this.w3,t))return!1;const i=Vc(this.w3),e=Vc(t);if(i.Km!==e.Km)return!0;return!pN(Ge(i),Ge(e))||!(Qt.Nv&&Qt.v_)}A3(){this.d3.Ax!==VN.Bw||this.b3||this.ga||(this.U2.timestampOffset=this.U2.timestampOffset,this.d3.S3())}async W2(t,i){this.v3();const e=new at;e.$g(this.T3.Yg),i&&e.$g(i);try{this.b3=t(e.Yg),await this.b3,this.d3.S3(),this.ga&&await this.a3()}finally{this.b3=void 0,e.zg()}}v3(){if(this.b3)throw new m("Internal error")}async zg(){this.Vo(),this.T3.Zg(),this.b3&&(await this.b3.catch(Ct),this.b3=void 0),this.U2.removeEventListener("updateend",this.E3),this.U2.removeEventListener("bufferedchange",this.P3)}constructor(t,i,e,s,n){var r;if(super(),this.d3=void 0,this.e3=void 0,this.U2=void 0,this.g3=void 0,this.w3=void 0,this.zY=20,this.jY=30,this.F2=!1,this.o3=!1,this.b3=void 0,this.T3=new at,this.Z2=void 0,this.K2=!1,this.Y2=void 0,this.X2=!1,this.j2=void 0,this.E3=()=>{this.F2=!1},this.P3=t=>{t.removedRanges&&this.So(new wp(Zs.lZ))},this.d3=i,this.e3=t,this.U2=e,this.U2.addEventListener("updateend",this.E3),this.U2.addEventListener("bufferedchange",this.P3),this.g3=s,this.w3=n,this.X2=EN(s.qT,n),null==(r=i.Cd)?void 0:r.kp){var h;const t=null!=(h=i.Cd.x3)?h:1e5;this.Z2=new QB(t)}}};function EN(t,i){return Vh(t,"audio/mp4")&&Vh(i,"audio/mpeg")}r();var PN=class{get IP(){if(this.I3.Ax===VN._3)return ve.iL();let t=ve.jn(this.U2.buffered).Mn(ve.eL());const i=this.R3;return void 0!==i&&t.V>0&&t.An(t.V-1)===i&&(t=t.OM(ve.$M(i))),t}WZ(){return!!this.R3&&this.IP.CM().Cr(this.R3)}C3(){const t=this.IP;this.R3=t.V>0?t.An(t.V-1):0,this.I3.D3()}A3(){this.R3=void 0}constructor(t,i){this.I3=void 0,this.U2=void 0,this.R3=void 0,this.I3=i,this.U2=t}};function xN(t,i,e,s,n,r,h){const o=new PN(n,t),a=new kN(o,t,n,e,r);return new IN(t,i,e,s,o,a,h)}var IN=class extends Ne{get IP(){return this.e3.IP}get Cd(){return this.YS}get qT(){return this.GS}get B3(){return this.N3}get M3(){return this.L3.ZZ}get MY(){return this.O3.MY}set MY(t){this.O3.MY=t}get UY(){return this.O3.UY}set UY(t){this.O3.UY=t}get ga(){return this.O3.ga}WZ(){return this.e3.WZ()}C3(){this.e3.C3()}A3(){this.e3.A3(),this.O3.A3()}F3(t,i){this.L3.t$(t,i)}U3(t,i){this.L3.i$(t,i)}V3(){return this.O3.l3()}H2(t,i,e){return this.O3.H2(t,i,e)}z2(t,i,e){return this.O3.z2(t,e)}r3(t,i){return Qt.w_&&Qt.A_<3?this.O3.r3(t,1/0):this.O3.r3(t,i)}async _S(t,i,e){this.U3(t,i);const s=this.IP;await this.O3.u3(t,i,e);const n=0!==s.V&&0===this.IP.V;(Qt.rg||Qt.S_)&&n&&this.TL.My(this.TL.MP)}TZ(t){const i=t.qT;if(this.GS===i)return!0;const e=this.H3.get(i);if(void 0!==e)return e;const s=this.W3(t);return this.H3.set(i,s),s}W3(t){const i=this.d3.m3(t.qT);if(void 0===i)return!1;const e=Vc(this.GS),s=Vc(i),n=Ge(e),r=Ge(s);if(this.O3.f3()){if(!function(t,i){return gf(t,i,wN)}(n,r))return!1;if(Qt.og&&!function(t,i){return gf(t,i,mN)}(n,r))return!1}else{if(e.Km!==s.Km)return!1;if(!pN(n,r))return!1}return!0}async EZ(t){const i=t.qT;this.GS!==i&&(this.H3.clear(),this.O3.EZ(t),this.GS=i),this.YS=t,this.d3.q3()}async zg(){this.H3.clear(),this.Vo(),this.L3.kn();try{this.O3.mn(Zs.lZ,this.Rs),await this.O3.zg()}catch(t){}}constructor(t,i,e,s,n,r,h){super(),this.d3=void 0,this.YS=void 0,this.N3=void 0,this.TL=void 0,this.GS=void 0,this.L3=void 0,this.e3=void 0,this.O3=void 0,this.H3=qh(),this.d3=t,this.YS=e,this.GS=e.qT,this.N3=s,this.TL=i,this.e3=n,this.O3=r,this.L3=h,this.O3.wn(Zs.lZ,this.Rs)}};r();var RN=class{z3(){let t=this.Tn,i=this.An;if(this.G3||this.X3){const e=.001*(zd.Mg()-this.j3);this.G3&&(t+=e),this.X3&&(i+=e)}return ve.tL(t,i)}constructor(t,i,e=!1,s=!1){this.Tn=void 0,this.An=void 0,this.G3=void 0,this.X3=void 0,this.j3=void 0,this.Tn=t,this.An=i,this.G3=e,this.X3=s,this.j3=zd.Mg()}};function CN(t){const i=[];if(t.Q3&&i.push(t.Q3.IP),t.K3&&i.push(t.K3.IP),0===i.length)return ve.iL();let e=0;for(const t of i)t.V>0&&(e=_.max(e,t.An(t.V-1)));const s=t.WZ;let n=new ve([0,e],[!0,s]);for(let t of i)s&&t.V>0&&(t=t.OM(new ve([t.An(t.V-1),e],[!0,!0]))),n=n.Mn(t);return n}function DN(t,i,e){const s=t.IP;let n,r=s.VM(i);if(r>=0){if(!(r+1<s.V))return Promise.resolve();n=s.Tn(r+1)}else{if(r=s.KM(i),!(r>=0))return Promise.resolve();n=s.Tn(r)}return t._S(n,1/0,e)}function BN(t,i,e){if(!t.Cr(i)){const s=t.VM(i,e);if(s>=0){const e=t.Tn(s);if(i<e)return e}}return i}r(),r(),r(),r();var NN=.5,MN=[d.uo,d.jw,d.$w,d.Zw,d.Fw,d.Vw,d.Bw,d.Kw,Do.wI,Mc.ma],LN=class{Y3(t){this.J3.push(t),t.wn(PB.KZ,this.Z3)}get ZZ(){return this.J3.reduce((t,i)=>t.OM(i.ZZ),ve.iL())}kn(){this.t4(),this.i4.mn(Do.wI,this.e4),this.TL.mn(d.Qw,this.e4),this.TL.mn(MN,this.s4),this.J3.forEach(t=>t.mn(PB.KZ,this.Z3)),this.n4(),this.r4=!0}XZ(t){if(this.TL.UP)return!1;if(0!==this.h4)return!1;const i=this.e3.IP,e=i.VM(t);if(e>=0&&t+NN<i.An(e))return!1;const s=e>=0?e+1:i.KM(t);if(s<0||s>=i.V)return!1;const n=i.Tn(s);if(ve.tL(t,n).UM(this.ZZ).ZM>1)return!1;if(0===t&&!this.TL.kx)return this.o4(t,n,2e3),!0;if(zd.fP)return this.o4(t,n,250),!0;return!(_.abs(n-t)<=.001)&&(this.a4(n),!0)}o4(t,i,e){this.n4(),this.u4=t,this.TL.wn(d.$w,this.c4),this.h4=zd.Og(()=>{this.u4===this.TL.MP&&this.a4(i),this.n4()},e)}n4(){0!==this.h4&&(this.TL.mn(d.$w,this.c4),zd.Lg(this.h4),this.h4=0)}a4(t){this.TL.My(t,!1,!0)}d4(){0!==this.l4&&(zd.Lg(this.l4),this.l4=0),this.TL.mn(d._y,this.ad)}f4(){this.r4||0===this.v4&&(this.d4(),this.v4=zd.fm(this._4,250))}t4(){0!==this.v4&&(zd.vm(this.v4),this.v4=0),this.d4(),this.TL.kx||(this.g4=0)}m4(){return!this.TL.hx&&(!this.TL.kx||this.w4())&&0!==this.TL.ux&&!this.TL.UP&&!this.TL.lt&&(this.y4()||this.i4.Ax>=mh.WL)}w4(){return!1}y4(){const t=this.TL.MP,i=this.e3.IP,e=i.VM(t);return-1!==e&&i.An(e)>t+NN}A4(t,i){const e=i.VM(t);return e>-1?i.An(e):t}constructor(t,i,e,s){this.e3=void 0,this.i4=void 0,this.TL=void 0,this.r4=void 0,this.J3=void 0,this.h4=void 0,this.l4=void 0,this.b4=void 0,this.u4=void 0,this.g4=void 0,this.v4=void 0,this.S4=void 0,this.T4=void 0,this.E4=void 0,this.Z3=void 0,this.e4=void 0,this.ad=void 0,this.c4=void 0,this.s4=void 0,this._4=void 0,this.e3=t,this.i4=i,this.TL=e,this.r4=!1,this.J3=[],this.h4=0,this.l4=0,this.b4=0,this.u4=0,this.g4=0,this.v4=0,this.S4=1,this.Z3=t=>{const i=this.TL.MP,e=t.JZ.Cr(i),s=t.JZ.Cr(i,NN)&&this.TL.Ax<=mh.HL;(e||s)&&this.XZ(i)},this.e4=Hl(t=>{if(this.r4)return;if(this.i4.Ax<=mh.HL){const t=this.TL.MP;this.XZ(t)||this._4()}else this.n4()},100),this.ad=Hl(t=>{this.f4()},100),this.c4=t=>{t.currentTime!==this.u4&&this.n4()},this.s4=()=>{this.m4()?0===this.v4&&(this.TL.wn(d._y,this.ad),this.l4=zd.Og(()=>{this.f4()},3500)):this.t4()},this._4=()=>{const t=this.b4,i=this.g4,e=this.TL.MP,s=zd.Mg(),n=this.e3.IP;if(t!==e)return this.b4=e,this.g4=s,this.S4=1,void(this.T4=zd._P?2e3:1e3);if(this.m4()&&0!==n.V&&i>0&&s>i+this.T4){let t;const i=this.ZZ.CM().UM(n),s=i.QM(e);if(-1!==s){const n=i.Tn(s);if(n-e<1||this.w4()){const e=i.An(s);0,t=e}}var r;if(!t)t=null==(r=this.E4)?void 0:r.determineStallJumpTarget(),t&&t!==e||(t=e+.01*this.S4,n.Cr(t)||(t=this.A4(e,n)));0,this.b4=t,this.S4++,this.T4=_.min(2*this.T4,1e4),this.a4(t)}},this.i4.wn(Do.wI,this.e4),this.TL.wn(d.Qw,this.e4),this.TL.wn(MN,this.s4),this.E4=s,this.T4=zd._P?2e3:1e3}},ON=class extends LN{w4(){if(!Qt.S_||!this.TL.kx)return!1;const t=this.TL.MP,i=this.e3.IP,e=this.ZZ.CM().UM(i),s=e.QM(t);if(-1===s)return!1;return e.Tn(s)-t<=3e3}},FN=Qt.N_||Qt.L_,UN=Qt.W_||Qt.X_||Qt.ru,VN=function(t){return t._3="closed",t.sE="open",t.Bw="ended",t}({}),HN=class extends TB{get Q3(){return this.P4}get K3(){return this.x4}get ct(){if(void 0!==this.I4)return this.I4;if(void 0!==this.R4)return this.R4;const t=this.iq.duration;return t===Xl?1/0:t}C4(t){if(t<0)throw new m("Invalid duration");this.D4()?this.B4(t):this.I4=t}B4(t){const i=t===1/0;if(i&&this.iq.setLiveSeekableRange){const t=2**39;this.iq.setLiveSeekableRange(0,t)}S(t)?(this.iq.duration=Xl,this.R4=NaN):(this.iq.duration=i?UN?1/0:Xl:t,this.R4=void 0),this.I4=void 0}get IP(){return FN?CN(this):function(t,i){let e=i;return e.V>0&&t.WZ&&(e=e.OM(ve.$M(e.An(e.V-1)))),e}(this,ve.jn(this._T.buffered))}get qZ(){var t;return null==(t=this.P4)?void 0:t.IP}get zZ(){var t;return null==(t=this.x4)?void 0:t.IP}get Sx(){return this.N4.z3().Mn(new ve([0,this.ct],[!0,!0]))}M4(t,i,e,s){this.N4=new RN(t,i,Boolean(e),Boolean(s))}get WZ(){return(!this.P4||this.P4.WZ())&&(!this.x4||this.x4.WZ())}get Ax(){return this.iq.readyState}async VY(){const t=this.YS,i=Jr(t.L4,t=>I(t.qT)),e=Jr(t.L4,t=>tt(t.qT));this._T.disableRemotePlayback=!0,await this.O4();const s=this.IZ();if(i){const t=new IB;var n;this.F4.Y3(t);const e=null!=(n=this.m3(i.qT))?n:i.qT;this.U4=this.iq.addSourceBuffer(""+e+s),this.P4=xN(this,this.TL,i,Ci.Dk,this.U4,e,t),this.P4.wn(Zs.lZ,this.P3)}if(e){const t=new IB;var r;this.F4.Y3(t);const i=null!=(r=this.m3(e.qT))?r:e.qT;this.V4=this.iq.addSourceBuffer(""+i+s),this.x4=xN(this,this.TL,e,Ci.Bk,this.V4,i,t),this.x4.wn(Zs.lZ,this.P3)}this.PZ.Un(this,t)}async O4(){await super.UZ(this.iq),"open"!==this.Ax&&await Lb(this.iq,"sourceopen")}D4(){if("open"!==this.Ax)return!1;const t=this.P4&&this.P4.ga,i=this.x4&&this.x4.ga;return!(t||i)}C3(){this.H4=!0,this.P4&&this.P4.C3(),this.x4&&this.x4.C3(),this.H4=!1,this.W4()}A3(){this.P4&&this.P4.A3(),this.x4&&this.x4.A3()}TZ(t){const i=Jr(t.L4,t=>I(t.qT)),e=Jr(t.L4,t=>tt(t.qT));if(this.P4){if(!i)return!1;if(!this.P4.TZ(i))return!1}else if(i)return!1;if(this.x4){if(!e)return!1;if(!this.x4.TZ(e))return!1}else if(e)return!1;return!!super.TZ(t)}async EZ(t){const i=Jr(t.L4,t=>I(t.qT)),e=Jr(t.L4,t=>tt(t.qT)),s=[];this.P4&&s.push(this.P4.EZ(i)),this.x4&&s.push(this.x4.EZ(e)),await Promise.all(s),await super.EZ(t)}xZ(t){super.xZ(t)}async zg(){if(this.iq.removeEventListener("sourceclose",this.q4),Qt.S_&&await this.HZ(),this.P4){if(await this.P4.zg(),this.P4=void 0,_p()&&(Qt.S_||Qt.w_))try{this.iq.removeSourceBuffer(this.U4)}catch(t){}this.U4=void 0}if(this.x4){if(await this.x4.zg(),this.x4=void 0,_p()&&(Qt.S_||Qt.w_))try{this.iq.removeSourceBuffer(this.V4)}catch(t){}this.V4=void 0}this._T.src&&URL.revokeObjectURL(this._T.src),this._T.disableRemotePlayback=!1,this.TL.mn([d._y,d.$w,d.Fw],this.bd),this.F4.kn(),Qt.w_&&await this.HZ(),await super.zg()}q3(){const t=this.YS,i=t.L4.map(t=>I(t.qT)&&this.P4?this.P4.Cd:tt(t.qT)&&this.x4?this.x4.Cd:t);this.YS=Mo({},t,{L4:i})}D3(){this.H4||this.W4()}get z4(){if(!this.WZ)return!1;const t=this.IP;return 0!==t.V&&t.Tn(t.V-1)<=this.TL.MP}W4(){this.z4&&this.D4()&&(this.iq.endOfStream(),this.I4=void 0,this.R4=void 0,this.So(new wp(SB.gZ)),this.TL.P3())}S3(){this.D4()&&(this.WZ?this.W4():void 0!==this.I4&&this.B4(this.I4))}XZ(t){return this.F4.XZ(t)}jZ(){return!0}m3(t){return WN(this.G4,t)}static QZ(t){const i=za(t.X4);if(void 0===i)return!1;if("function"!=typeof i.isTypeSupported)return!1;const e=new gv(t.X4);for(const i of t.L4)if(void 0===WN(e,i.qT))return!1;return!0}constructor(t,i,e,s,n,r=new gv(t.X4),h,o){super(t,i,s,n,o),this.G4=void 0,this.P4=void 0,this.U4=void 0,this.x4=void 0,this.V4=void 0,this.N4=new RN(0,1/0),this.iq=void 0,this.I4=void 0,this.R4=void 0,this.F4=void 0,this.H4=!1,this.q4=()=>{this.So(new wp(SB.mZ))},this.j4=()=>{this.So(new wp(SB.yZ))},this.bd=()=>{this.W4()},this.P3=()=>{this.TL.P3()},this.G4=r,this.iq=this.G4.Lp(),this.iq.addEventListener("sourceclose",this.q4),this.iq.addEventListener("sourceopen",this.j4),this.TL.wn([d._y,d.$w,d.Fw],this.bd),this.F4=new ON(this,e,this.TL,h)}};function WN(t,i){const e=Vc(i),s=Ge(e),n="audio/mp4"===e.Km,r=n&&1===s.length&&"mp4a.40.34"===s[0];if(t.Fp(i)&&(!r||!Qt.X_))return i;if(r){const i=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const e of i)if(t.Fp(e))return e}if(n&&1===s.length&&"flac"===s[0].toLowerCase()){const e=["flac","fLaC","FLAC"];for(const s of e){const e='audio/mp4; codecs="'+s+'"';if(t.Fp(i))return e}}}r(),r();var qN=class extends wp{constructor(t){super(d.Fw),this.currentTime=void 0,this.currentTime=t}},zN=[d.gy,d.Kw,d.$w,d.Fw,d.uo,d.jw],GN=class extends Ne{get MP(){return this.bz}get Q4(){return this.K4}get Y4(){return this.J4}get ct(){return this.WA}get UP(){return this.Z4}get hx(){return this.kz}get Ax(){return this.t5}get kx(){return this.Sz}get $P(){return this.Tz}set $P(t){this.$P!==t&&(this.Tz=t,this.So(new Ze(this.MP,this.Mx)))}get ux(){return this.Ez}set ux(t){this.ux!==t&&(this.Ez=t,this.So(new aa(this.MP,this.ux)))}get Mx(){return this.ib}set Mx(t){this.Mx!==t&&(this.ib=t,this.So(new Ze(this.MP,this.Mx)))}My(t,i,e){this.bz!==t&&(this.bz=t,this.K4=i,e&&!this.Sz?(this.J4=!0,this.So(new qN(this.MP))):(this.J4=!1,this.Sz=!0,this.So(new F(this.MP))))}zx(){this.kz||(this.kz=!0,this.So(new hl(this.MP)))}Gx(){this.kz&&(this.kz=!1,this.So(new Tc(this.MP)))}zg(){this.Vo()}constructor(t,i,e,s,n,r,h,o,a,u,c){super(),this.bz=void 0,this.WA=void 0,this.Z4=void 0,this.kz=void 0,this.Sz=void 0,this.Tz=void 0,this.Ez=void 0,this.ib=void 0,this.t5=void 0,this.K4=void 0,this.J4=void 0,this.bz=t,this.WA=i,this.Z4=e,this.kz=s,this.Sz=n,this.Tz=r,this.Ez=h,this.ib=o,this.t5=a,this.K4=u,this.J4=c}};function XN(t){return new GN(t.MP,t.ct,t.UP,t.hx,t.kx,t.$P,t.ux,t.Mx,t.Ax,!1,t.Y4)}function jN(t,i){i.ct===t.ct||S(i.ct)&&S(t.ct)||t.So(new Rs(t.ct)),t.$P=i.$P,t.Mx=i.Mx,t.ux=i.ux,i.hx?t.zx():t.Gx().catch(Ct),i.MP!==t.MP||i.Ax>mh.VL&&t.Ax===mh.VL?t.My(i.MP,i.Q4,i.Y4):!i.kx&&t.kx?t.So(new F(t.MP)):i.kx&&!t.kx&&t.Ax>=mh.HL&&t.So(new Es(t.MP)),!i.UP&&t.UP&&t.So(new At(t.MP))}r(),r();var QN=class extends Ne{get Ax(){return this.bx()}i5(t){this.EV!==t&&(this.EV=t,this.So(new ou(this.TL.MP,t)))}e5(){this.i5(this.bx())}hr(){this.i5(mh.VL)}zg(){this.Vo()}constructor(t){super(),this.TL=void 0,this.EV=mh.VL,this.s5=()=>{this.e5()},this.TL=t}};r();var KN=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],YN=class extends QN{bx(){let t=this.TL.$W.readyState;return t>mh.HL&&this.TL.n5?mh.HL:(this.TL.$W.seeking&&t>mh.Qn&&(t=mh.Qn),t)}zg(){for(const t of KN)this.TL.$W.removeEventListener(t,this.s5);super.zg()}constructor(t){super(t);for(const t of KN)this.TL.$W.addEventListener(t,this.s5)}};r();var JN=yt,ZN=class extends QN{bx(){if(this.TL.$W.readyState===mh.VL)return mh.VL;const t=this.r5(),i=t?t.An-t.Tn:0;if(!t)return mh.Qn;const e=this.TL.ux;return this.h5()||i>=3*e?mh.qL:i>=3?mh.WL:mh.HL}r5(){const t=this.TL.MP,i=this.TL.IP.LM(.04),e=i.VM(t);if(!(e<0))return{Tn:t,An:i.An(e)}}h5(){if(this.TL.UP)return!0;const t=this.TL.ct,i=this.r5();return!!i&&t-i.An<=JN}zg(){this.TL.mn([d.$w,d.Fw],this.s5);for(const t of KN)this.TL.$W.removeEventListener(t,this.s5);super.zg()}constructor(t){super(t),this.TL.wn([d.$w,d.Fw],this.s5);for(const t of KN)this.TL.$W.addEventListener(t,this.s5)}};r(),r();var $N=[Do.wI,d.uo,d.jw,d.$w,d.Zw,d.Fw,d.Vw,d.Bw,Mc.ma],tM=class extends Ne{o5(){return(!this.PV.Y4||!this.PV.a5)&&this.PV.Ax<mh.WL}u5(){return!this.PV.kx&&!(this.PV.hx||this.PV.UP||this.PV.lt||this.o5())}er(){const t=this.c5;this.c5=this.u5(),!t&&this.c5&&this.So(new ce(this.PV.MP))}hr(){this.c5=!1}zg(){this.Vo(),this.PV.mn($N,this.xK)}constructor(t){super(),this.PV=void 0,this.c5=!1,this.xK=()=>{this.er()},this.PV=t,this.PV.wn($N,this.xK)}},iM=class extends tM{u5(){return this.d5&&super.u5()}er(){this.d5&&(this._T.paused||this._T.ended||this._T.error)&&(this.d5=!1),super.er()}hr(){super.hr(),this.d5=!1}zg(){this._T.removeEventListener(Do.TM,this.MV),super.zg()}constructor(t){super(t),this._T=void 0,this.d5=!1,this.MV=()=>{this.d5=!0,this.er()},this._T=t.$W,this._T.addEventListener(Do.TM,this.MV)}};r();var eu=class extends wp{constructor(t){super(Mc.ma),this.lt=void 0,this.lt=t}};function eM(t,i){return t.EO<=i&&t.PO>i}function Sn(t,i){return function(t,i){return ef(t.EO,i.EO,cE)}(t,i)||function(t,i){return ef(t.PO,i.PO,cE)}(t,i)}function sM(t,i){return function(t,i){return ef(t.MO,i.MO,cE)}(t,i)||function(t,i){return ef(t.LO,i.LO,cE)}(t,i)}function nM(t,i,e){let s=function(t,i,e,s,n,r,h){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===h&&(h=t.length);let o=r,a=h-1;for(;o<=a;){const h=o+(a-o>>1),u=s(e(t[h]),i);if(u<0)o=h+1;else if(u>0)a=h-1;else{if(!(n&&h>r&&0===s(e(t[h-1]),i)))return h;a=h-1}}return~o}(t,i,jo,e,!0);if(s<0)return s;for(;s<t.length&&e(i,t[s])===Qc.rh;s++)if(t[s].zO(i))return s;return-(s+1)}function rM(t,i,e){const s=nM(t,i,e);return s>=0?s:-(s+1)}function hM(t){const i=t.Ht;if(!i)return-1;if(t instanceof _h)return i.l5(t);const e=i.L;if(!e)return-1;const s=nM(e.II,t,Sn);return s>=0?s:-1}function oM(t,i){const e=function(t,i,e){const s=t.length,n=i.length;let r=0,h=0;const o=[],a=[];for(;r<s&&h<n;){const s=t[r],n=i[h];s===n?(r++,h++):e(n,s)<=0?(o.push(n),h++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;h<n;)o.push(i[h]),h++;return{f5:o,v5:a}}(t,i,Sn);return function(t,i){const e=i.length;for(let s=0;s<e;s++)t[s]=i[s];t.length=e}(t,i),e}r(),r(),r(),r();var aM=class{get II(){return this._5}get V(){return this._5.length}get Ca(){if(this.hu){const t=this._5;this.hu.length=t.length;for(let i=0;i<t.length;i++)this.hu[i]=t[i].Ca}else this.hu=this.xa();return this.hu}xa(){return function(t){const i=[];for(let e=0;e<t.V;e++)i[e]=t.Wy(e).Ca;return i.item=i=>{const e=0|i,s=t.Wy(e);return s&&s.Ca||void 0},w.defineProperty(i,"constructor",{value:rE}),i}(this)}fO(t){const i=this._5;for(let e=i.length-1;e>=0;e-=1){const s=i[e];if(t.zO(s))return!0}return!1}Wy(t){return this._5[t]}constructor(t){this._5=void 0,this.hu=void 0,this._5=t}};r();var uM=class extends Js{xa(){return new cM(this.Ht.Ca,this.Ax)}constructor(t,i){super(Te.wI),this.Ht=void 0,this.Ax=void 0,this.Ht=t,this.Ax=i}},cM=class extends Ae{constructor(t,i){super("readystatechange"),this.track=void 0,this.readyState=void 0,this.track=t,this.readyState=i}};r();var dM=class extends Js{xa(){return new lM(this.Ht.Ca)}constructor(t){super(Te.AI),this.Ht=void 0,this.Ht=t}},lM=class extends Ae{constructor(t){super("typechange"),this.track=void 0,this.track=t}};r();var Ve=class extends Js{xa(){return new fM(this.TO.Ca)}constructor(t){super(Te.hI),this.TO=void 0,this.TO=t}},fM=class extends Ae{constructor(t){super("addcue"),this.cue=void 0,this.cue=t}};r();var vM=class extends Js{xa(){return new _M(this.TO.Ca)}constructor(t){super(Te.aI),this.TO=void 0,this.TO=t}},_M=class extends Ae{constructor(t){super("removecue"),this.cue=void 0,this.cue=t}},gM=class extends Ne{get q(){return this.g5}get L(){return this.p5}m5(t){return Jr(this.p5.II,i=>i.o===t)}get $U(){return this.w5}set $U(t){this.w5=t}get tR(){return this.y5}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return zh(this)}get o(){return this.hS}get jI(){return this.gO}get ZI(){return this.A5}set ZI(t){this.A5=t}get Lt(){return this.b5}get Th(){return this.pO}set Th(t){t!==this.pO&&(this.pO=t,this.So(new Uh(this)))}get bs(){return this.qA}get QI(){return this.S5}get Xk(){return this.Yo}set Xk(t){this.T5(t)}T5(t){const i=AS(t);i!==this.Xk&&(this.Yo=i,i===xh.Nh&&(this.k5.forEach(t=>{t.ro=!1}),Yo(this.k5),this.E5=0),this.So(new nr(this)))}get Ax(){return this.t5}set Ax(t){this.t5!==t&&(this.t5=t,this.So(new uM(this,this.t5)))}get iR(){return this.P5}set iR(t){this.P5=t}get Km(){return this.Vp}set Km(t){this.Vp!==t&&(this.Vp=t,this.So(new dM(this)))}get bU(){return this.zU}set bU(t){this.zU=t}tV(t){if(!t||t.Ht)return;const i=nM(this.x5,t,sM);if(i>=0)return;t.Ht=this;const e=-(i+1);this.x5.splice(e,0,t);const s=rM(this.L.II,t,Sn);this.I5(t,s),this.So(new Ve(t))}I5(t,i){this._5.splice(i,0,t),this.R5(i),t.jO=i,i<this.E5&&(this.E5=i)}WU(t){if(!t||t.Ht!==this)return;const i=this.l5(t);if(i<0)return;t.ro=!1;const e=this.k5,s=nM(e,t,Sn);s>=0&&ka(e,s);const n=nM(this.x5,t,sM);n>=0&&ka(this.x5,n),t.Ht=void 0,this.C5(t,i),this.So(new vM(t))}C5(t,i){ka(this._5,i),this.R5(i),t.jO=-1,this.E5>i&&--this.E5}UO(t){if(!t||t.Ht!==this)return;const i=this.l5(t);if(i<0)return;this.C5(t,i);const e=rM(this.L.II,t,Sn);this.I5(t,e);const s=li(this.k5,i=>i===t);if(s>=0){ka(this.k5,s);const i=rM(this.k5,t,Sn);this.k5.splice(i,0,t)}}D5(t,i){const e=this.k5,s=this._5;let n=this.E5,r=!1,h=1/0;i&&(n=0);for(let i=e.length-1;i>=0;i--){const s=e[i];eM(s,t)?s.PO<h&&(h=s.PO):(r=!0,ka(e,i))}for(;n<s.length&&s[n].EO<=t;){const i=s[n];eM(i,t)&&(pi(e,i)||(r=!0,e.push(i)),i.PO<h&&(h=i.PO)),n++}return n<s.length&&s[n].EO<h&&(h=s[n].EO),r&&ql(e,Sn),this.E5=n,h}l5(t){return(-1===t.jO||t.jO>=this.B5)&&this.N5(),t.jO}N5(){const t=this._5;for(let i=this.B5;i<t.length;i++)t[i].jO=i;this.B5=t.length}R5(t){t<this.B5&&(this.B5=_.max(t,0))}$I(t){this.tR||(this.Xk=t)}kn(){this.Vo();const t=this._5.slice();for(const i of t)i.kn();Yo(this._5),Yo(this.x5),Yo(this.k5)}constructor(t,i,e,s,n,r,h,o,a){super(),this.hu=void 0,this.hS=void 0,this.gO=ki(),this.w5=!1,this.A5=void 0,this.b5=void 0,this.pO=void 0,this.qA=void 0,this.Yo=xh.Nh,this.t5=Zu.NONE,this.P5=void 0,this.Vp=void 0,this.y5=void 0,this.S5=void 0,this.zU=0,this._5=[],this.x5=[],this.k5=[],this.p5=void 0,this.g5=void 0,this.B5=0,this.E5=0,this.hS=i||"",this.A5=o||"",this.b5=t,this.qA=s||"",this.w5=Boolean(n),this.y5=Boolean(h),this.Vp=r||nh.DEFAULT,this.pO=e||"",this.S5=a||[],this.p5=new aM(this._5),this.g5=new aM(this.k5)}};r(),r(),r();var pM=class extends sE{xa(){return new mM(this.TO.Ca)}constructor(t,i){super(Me.zL,t),this.XF=void 0,this.XF=i}},mM=class extends nE{constructor(t){super("enter",t)}};r();var rc=class extends sE{xa(){return new wM(this.TO.Ca)}constructor(t,i){super(Me.GL,t),this.XF=void 0,this.XF=i}},wM=class extends nE{constructor(t){super("exit",t)}};r();var yM=class extends Js{xa(){return new AM(this.TO.Ca)}constructor(t){super(Te.lI),this.TO=void 0,this.TO=t}},AM=class extends Ae{constructor(t){super("entercue"),this.cue=void 0,this.cue=t}};r();var bM=class extends Js{xa(){return new SM(this.TO.Ca)}constructor(t){super(Te.vI),this.TO=void 0,this.TO=t}},SM=class extends Ae{constructor(t){super("exitcue"),this.cue=void 0,this.cue=t}},Xe=class extends _o{get jI(){return this.gO}get EO(){var t,i;return this.M5.startTime-(null!=(i=null==(t=this.FO)?void 0:t.bU)?i:0)}set EO(t){var i,e;this.M5.startTime=t+(null!=(e=null==(i=this.FO)?void 0:i.bU)?e:0)}get PO(){var t,i;return this.M5.endTime-(null!=(i=null==(t=this.FO)?void 0:t.bU)?i:0)}set PO(t){var i,e;this.M5.endTime=t+(null!=(e=null==(i=this.FO)?void 0:i.bU)?e:0)}get U(){return this.HO}set U(t){this.HO=t}get WO(){return Boolean(this.M5.pauseOnExit)}set WO(t){this.M5.pauseOnExit=Boolean(t)}get Ht(){return this.FO}set Ht(t){this.FO=t,this.L5()}get o(){return this.M5.id||""}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return zt(this)}get ro(){return this.ho}set ro(t){this.ro!==t&&(this.ho=t,t?(this.So(new pM(this,this.EO)),this.FO&&this.FO.So(new yM(this))):(this.So(new rc(this,this.PO)),this.FO&&this.FO.So(new bM(this))))}zO(t){return this===t||uS(this,t)&&dE(this,t)&&this.GO(t)}L5(){var t,i;const e=null!=(i=this.M5.THEOplayerTimestampOffset)?i:0;var s;const n=null!=(s=null==(t=this.FO)?void 0:t.bU)?s:0;if(e===n)return;const r=n-e;this.M5.startTime+=r,this.M5.endTime+=r,this.M5.THEOplayerTimestampOffset=n}GO(t){return _t(this.U,t.U)}kn(){this.Vo(),this.M5.removeEventListener("enter",this.O5),this.M5.removeEventListener("exit",this.F5)}constructor(t){super(),this.M5=void 0,this.HO=void 0,this.MO=void 0,this.LO=void 0,this.gO=void 0,this.FO=void 0,this.hu=void 0,this.ho=!1,this.O5=()=>{this.ro=!0},this.F5=()=>{this.ro=!1},this.gO=Xk(),this.M5=t,this.MO=t.startTime,this.LO=t.endTime,this.M5.addEventListener("enter",this.O5),this.M5.addEventListener("exit",this.F5)}};r();var TM=class extends Js{xa(){return new kM(this.Ht.Ca)}constructor(t){super(Te.gI),this.Ht=void 0,this.Ht=t}},kM=class extends Ae{constructor(t){super("cuechange"),this.track=void 0,this.track=t}};function EM(t){if(!t)return;let i=t.THEOplayerVTTRegion;return i||(i=new PM(t),t.THEOplayerVTTRegion=i),i}r(),r();var PM=class{get U5(){return this.V5}get o(){return this.V5.id||""}get Ti(){return Number(this.V5.width)||0}set Ti(t){this.V5.width=t||0}get QO(){return Number(this.V5.lines)||0}set QO(t){this.V5.lines=t||0}get KO(){return Number(this.V5.regionAnchorX)||0}set KO(t){this.V5.regionAnchorX=t||0}get YO(){return Number(this.V5.regionAnchorY)||0}set YO(t){this.V5.regionAnchorY=t||0}get ZO(){return Number(this.V5.viewportAnchorX)||0}set ZO(t){this.V5.viewportAnchorX=t||0}get $O(){return Number(this.V5.viewportAnchorY)||0}set $O(t){this.V5.viewportAnchorY=t||0}get JO(){return this.V5.scroll||""}get Ca(){return this.hu||(this.hu=mE(this)),this.hu}constructor(t){this.V5=void 0,this.hu=void 0,this.V5=t}};var xM=class extends Xe{get U(){return this.M5.text}set U(t){this.M5.text=t}get Pt(){return this.M5.vertical||""}set Pt(t){this.M5.vertical=t||""}get BO(){return this.M5.snapToLines}set BO(t){this.M5.snapToLines=t}get IO(){return this.M5.line}set IO(t){this.M5.line=t}get Vy(){return Number(this.M5.size)}set Vy(t){this.M5.size=ur(t,0,100)}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return hE(this)}GO(t){return lE(this,t)}constructor(t){super(t)}},IM=class extends xM{get DO(){return EM(this.M5.region)}get RO(){return this.M5.lineAlign||"start"}set RO(t){this.M5.lineAlign=t||"start"}get mo(){return this.M5.position}set mo(t){this.M5.position=t}get CO(){return this.M5.positionAlign||"auto"}set CO(t){this.M5.positionAlign=t||"auto"}get xO(){return this.M5.align||"center"}set xO(t){this.M5.align=t||"center"}constructor(t){super(t)}},RM=class extends xM{get DO(){return EM(this.U5)}get U5(){return function(t,i){if(void 0===i)return;const e=t&&t.regions;return e&&e.getRegionById(i)||void 0}(this.M5.track,this.M5.regionId)}get RO(){return function(t){return"middle"===t?"center":t}(this.M5.lineAlign||"start")}set RO(t){this.M5.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get mo(){return this.M5.position}set mo(t){this.M5.position=function(t,i){return eE(t,i)}(t,this.xO)}get CO(){return function(t){return tE[t]}(this.M5.positionAlign||"middle")}set CO(t){this.M5.positionAlign=function(t,i){return $k[iE(t,i)]}(t||"center",this.xO)}get xO(){return function(t){return"middle"===t?"center":t}(this.M5.align||"middle")}set xO(t){this.M5.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function CM(t,i){return t.U===i.U}function DM(t,i){if(0===i.length)return;const e=i.length-1;if(i[e].EO<t.EO)return void BM(i,e,t.EO);const s=i[0];if(s.EO>t.EO)return void(t.PO=s.EO);const n=nM(i,t,Sn);if(n>=0)return;const r=-(n+1),h=r-1;if(h>=0){i[h].EO<t.EO&&BM(i,h,t.EO)}if(r<i.length){const e=i[r];t.PO=e.EO}}function BM(t,i,e){const s=t[i].EO;for(let n=i;n>=0&&t[n].EO===s;n--)t[n].PO=e}function NM(t){return zt(t)}r(),r(),r(),r();var MM=class extends Xe{get U(){return this.H5}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return NM(this)}GO(t){return CM(this,t)}constructor(t,i){super(t),this.H5=void 0,this.H5=i}};function LM(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function OM(t){switch(t){case 0:return E;case 1:return tm;case 2:return so;case 3:return vr}}function FM(t,i){const e=i.ac,s=t.byteLength,n=ta(t);return i.Ny(s-e),gl(n,e,s).buffer}function UM(t,i){return{id:t||"",data:i instanceof ArrayBuffer?i:void 0}}function VM(t,i,e){const s=ua(t,i);if(!LM(s))return;const n=OM(s);return{id:e,language:Wc(t,i,3),description:n(t,i),text:n(t,i)}}function HM(t,i,e){const s=ua(t,i);if(!LM(s))return;const n=OM(s);return{id:e,mimeType:E(t,i),fileName:n(t,i),description:n(t,i),data:FM(t,i)}}function WM(t,i,e){const s=ua(t,i);if(!LM(s))return;const n=OM(s),r=[];for(;i.ac<t.byteLength;)r.push({involvement:n(t,i),involvee:n(t,i)});return{id:e,entries:r}}function qM(t,i,e){const s=ua(t,i);if(!LM(s))return;const n=OM(s),r=Wc(t,i,3),h=ua(t,i),o=ua(t,i),a=n(t,i);let u=!1;const c=[];for(;i.ac<t.byteLength;){let e;if(1===s){let s=$p(t,i);void 0===s?s=u:u=s,e=so(t,i,s)}else e=n(t,i);if(!e||i.ac+4>t.byteLength)break;c.push({text:e,timestamp:Cu(t,i)})}return{id:e,language:r,format:h,contentType:o,description:a,entries:c}}function zM(t,i,e){return{id:e,ownerIdentifier:E(t,i),identifier:FM(t,i)}}function GM(t,i,e){const s=ua(t,i);if(!LM(s))return;const n=OM(s);return{id:e,language:Wc(t,i,3),description:n(t,i),text:n(t,i)}}function XM(t,i,e){const s=ua(t,i);if(!LM(s))return;return{id:e,text:OM(s)(t,i)}}function jM(t,i,e){return{id:e,url:E(t,i)}}function QM(t,i,e){const s=ua(t,i);if(!LM(s))return;const n=OM(s);return{id:e,description:n(t,i),text:n(t,i)}}function KM(t,i,e){const s=ua(t,i);if(!LM(s))return;return{id:e,description:OM(s)(t,i),url:E(t,i)}}function YM(t,i,e){switch(e){case"COM":return VM(t,i,e);case"GEO":return HM(t,i,e);case"IPL":return WM(t,i,e);case"PIC":return function(t,i,e){const s=ua(t,i);if(!LM(s))return;const n=OM(s),r=Wc(t,i,3),h=ua(t,i),o=n(t,i);let a,u;return"--\x3e"===r?(a=r,u=E(t,i)):(a="image/"+r.toLowerCase(),u=FM(t,i)),{id:e,mimeType:a,pictureType:h,description:o,data:u}}(t,i,e);case"SLT":return qM(t,i,e);case"TXX":return QM(t,i,e);case"UFI":return zM(t,i,e);case"ULT":return GM(t,i,e);case"WXX":return KM(t,i,e);default:if("T"===e.charAt(0))return XM(t,i,e);if("W"===e.charAt(0))return jM(t,i,e)}}function JM(t,i,e){switch(e){case"APIC":return function(t,i,e){const s=ua(t,i);if(!LM(s))return;const n=OM(s),r=E(t,i),h=ua(t,i),o=n(t,i);let a;return a="--\x3e"===r?E(t,i):FM(t,i),{id:e,mimeType:r,pictureType:h,description:o,data:a}}(t,i,e);case"COMM":return VM(t,i,e);case"COMR":return function(t,i,e){const s=ua(t,i);if(!LM(s))return;const n=OM(s),r=E(t,i),h=Wc(t,i,8),o=E(t,i),a=ua(t,i),u=n(t,i),c=n(t,i);let d,l;return i.ac<t.byteLength&&(d=E(t,i)||"image/",l=FM(t,i)),{id:e,price:r,validUntil:h,contactURL:o,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:d,sellerLogo:l}}(t,i,e);case"GEOB":return HM(t,i,e);case"IPLS":return WM(t,i,e);case"PRIV":return function(t,i,e){return{id:e,ownerIdentifier:E(t,i),data:FM(t,i)}}(t,i,e);case"POSS":return function(t,i,e){return{id:e,format:ua(t,i),position:Cu(t,i)}}(t,i,e);case"SYLT":return qM(t,i,e);case"TXXX":return QM(t,i,e);case"UFID":return zM(t,i,e);case"USER":return function(t,i,e){const s=ua(t,i);if(!LM(s))return;const n=OM(s);return{id:e,language:Wc(t,i,3),text:n(t,i)}}(t,i,e);case"USLT":return GM(t,i,e);case"WXXX":return KM(t,i,e);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return XM(t,i,e);default:{const s=e.charAt(0);if("T"===s)return XM(t,i,e);if("W"===s)return jM(t,i,e)}}}r(),r();function ZM(t,i){return(127&ua(t,i))<<21|(127&ua(t,i))<<14|(127&ua(t,i))<<7|127&ua(t,i)}function $M(t,i){switch(t){case 4:return{W5:Lt(i,0),q5:Lt(i,1),z5:Lt(i,2),G5:Lt(i,3)};case 3:return{W5:Lt(i,0),q5:Lt(i,1),z5:Lt(i,2)};case 2:return{W5:Lt(i,0),X5:Lt(i,1)}}}function tL(t,i,e){switch(e.bD){case 3:e.SD.q5&&function(t,i){const e=i.ac,s=Cu(t,i)+4,n=32768&qe(t,i);i.My(e+s),n&&Cu(t,i)}(t,i);break;case 4:e.SD.q5&&function(t,i){const e=i.ac,s=ZM(t,i);i.My(e+s)}(t,i)}}function iL(t,i){if(t.byteLength-i.ac<10)return null;if(73!==ua(t,i)||68!==ua(t,i)||51!==ua(t,i))return null;const e=ua(t,i),s=ua(t,i);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(e))return null;const n=ua(t,i),r=ZM(t,i);return{bD:e,j5:s,SD:$M(e,n),Q5:r}}function eL(t,i,e){switch(e){case 2:return function(t,i){if(i.ac+6>t.byteLength)return;return{o:Wc(t,i,3),Vy:Gp(t,i,3)}}(t,i);case 3:return function(t,i){if(i.ac+10>t.byteLength)return;const e=Wc(t,i,4),s=Cu(t,i);ua(t,i);const n=ua(t,i);return{o:e,Vy:s,SD:{X5:Lt(n,0),K5:Lt(n,1),groupingIdentity:Lt(n,2)}}}(t,i);case 4:return function(t,i){if(i.ac+10>t.byteLength)return;const e=Wc(t,i,4),s=ZM(t,i);ua(t,i);const n=ua(t,i);return{o:e,Vy:s,SD:{groupingIdentity:Lt(n,1),X5:Lt(n,4),K5:Lt(n,5),W5:Lt(n,6),Y5:Lt(n,7)}}}(t,i)}}function sL(t){const i=ta(t),e=new j(i.byteLength);let s=0;for(let t=0;t<i.byteLength;t++){const n=i[t];255===n&&t++,e[s]=n,s++}return dh(gl(e,0,s))}function nL(t,i){const e=i||new Ui,s=iL(t,e);if(!s)return null;const n=function(t,i,e){const s=[],n=i.ac;let r=Au(t,n,n+e.Q5);const h=new Ui;switch(i.Ny(e.Q5),e.bD){case 2:case 3:e.SD.W5&&(r=sL(r))}tL(t,i,e);for(;h.ac<r.byteLength;){const t=rL(r,h,e);if(void 0===t)break;s.push(t)}return s}(t,e,s);return{gD:s,J5:n}}function rL(t,i,e){const s=eL(t,i,e.bD);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.Vy)return;const n=i.ac;let r,h,o=Au(t,n,n+s.Vy);switch(i.Ny(s.Vy),e.bD){case 2:{const t=s;h=o,r=YM(h,new Ui,t.o);break}case 3:{const t=s,i=new Ui;!function(t,i,e){const s=e.SD;let n,r,h;s.X5&&(n=Cu(t,i)),s.K5&&(r=ua(t,i)),s.groupingIdentity&&(h=ua(t,i))}(o,i,t);h=Au(o,i.ac,o.byteLength),r=JM(h,new Ui,t.o);break}case 4:{const t=s,i=new Ui;t.SD.W5&&(o=sL(o)),function(t,i,e){const s=e.SD;let n,r,h,o;s.groupingIdentity&&(n=ua(t,i)),s.X5&&(r=Cu(t,i)),s.K5&&(h=ua(t,i)),s.Y5&&(o=ZM(t,i))}(o,i,t);h=Au(o,i.ac,o.byteLength),r=JM(h,new Ui,t.o);break}}if(!r){const t=Gu(ta(h));r=UM(s.o,t.buffer)}return r}r();function hL(t){return it(t)&&"org.id3"===t.type&&it(t.value)}function oL(t){return function(t,i,e){return XM(t,i,e)}(new DataView(t.data),new Ui,t.key)}function aL(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return oL(t);default:const i=t.key.charAt(0);if("T"===i)return function(t){return{id:t.key,text:t.data}}(t);if("W"===i)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return UM(t.key,t.data)}(t)}r(),r();var uL=class extends Ne{get q(){return this.g5}get $U(){return this.Z5?this.Z5.default:void 0}get L(){return this.p5}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return zh(this)}get o(){return this.hS||this._O.id||this.Z5&&this.Z5.id||""}get jI(){return this.gO}get ZI(){return this._O.inBandMetadataTrackDispatchType||""}get Lt(){return this._O.kind||Ao.OU}get Th(){return this.pO}set Th(t){t!==this.pO&&(this.pO=t,void 0!==this.Z5&&(this.Z5.label=t),this.So(new Uh(this)))}get bs(){return this._O.language||""}get Xk(){return this.Yo}set Xk(t){const i=this.Xk;this.Yo=AS(t),this.t6();const e=this.Xk;i!==e&&this.So(new nr(this)),e!==xh.Nh&&this.i6(Zu.LOADING)}get e6(){return AS(this._O.mode)}set e6(t){this._O.mode=t}get mO(){return this._O}get Ax(){return this.t5}get s6(){return this.Z5?Number(this.Z5.readyState)||Zu.NONE:Zu.LOADED}get iR(){return this.P5}get Km(){return this.Vp}set Km(t){this.Vp!==t&&(this.Vp=t,this.So(new dM(this)))}get bU(){return this.zU}set bU(t){if(this.zU!==t){this.zU=t;for(const t of this._5)t.L5()}}get n6(){return this.r6}set n6(t){this.r6=t,t&&(this.h6=!0,u(()=>{this.h6=!1},50)),this.t6()}tV(t){t.Ht!==this&&(t.Ht=this,this._O.addCue(t.M5),this.o6())}WU(t){t.Ht===this&&(t.Ht=void 0,this._O.removeCue(t.M5),this.o6())}m5(t){var i;const e=null==(i=this._O.cues)?void 0:i.getCueById(t);if(!e)return;const s=cL(e);return s&&Pc(s)?s[0]:s}qU(t){this.a6>=t||(this.a6=t,St(this,t))}t6(){const t=this.Xk;this.n6||t!==xh.Kn?this.e6=t:this.e6=xh.JI}u6(){const t=this.Xk,i=this.e6;t!==i&&(this.n6||t!==xh.Kn||i!==xh.JI)&&("metadata"===this.Lt&&i===xh.Nh?this.Xk=t:this.h6&&i===xh.Nh&&t===xh.Kn?this.e6=t:this.Xk=i)}e5(t){this.t5!==t&&(this.t5=t,this.So(new uM(this,t)))}i6(t){const i=_.max(this.t5,this.s6,t);this.e5(i)}c6(t){let i=cL(t);if(i)return i;if(i=this.d6(t),Pc(i))for(const t of i)t.Ht=this;else i.Ht=this;return i}d6(t){const i=this.l6(t);return t.THEOplayerTextTrackCue=i,i}l6(t){return t.endTime<this.a6?[]:hL(t)?(this.Km=nh.ID3,function(t){let i;try{i=aL(t.value)}catch(t){i=UM("")}return new MM(t,i)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.Km=nh.ID3,function(t){const i=[];try{const e=nL(new DataView(t.data));if(e)for(const s of e.J5)i.push(new MM(t,s))}catch(t){}return i}(t)):function(t){return"text"in t}(t)?(this.Km=nh.WEBVTT,function(t){return"regionId"in t}(t)?new RM(t):new IM(t)):new Xe(t)}f6(t){const i=[];if(!t)return i;const e=t.length;for(let n=0;n<e;n++){var s;const e=this.c6(null!=(s=t[n])?s:t.item(n));if(Pc(e))for(const t of e)i.push(t);else i.push(e)}return i}v6(){const t=this.f6(this._O.cues),i=oM(this._5,t);for(const t of i.v5)t.mn(Me.GL,this.o6),t.mn(Me.zL,this.o6),this.So(new vM(t));for(const t of i.f5)t.wn(Me.zL,this.o6),t.wn(Me.GL,this.o6),this.So(new Ve(t))}D5(){const t=this.f6(this._O.activeCues),i=oM(this.k5,t);for(const t of i.v5)t.ro=!1;for(const t of i.f5)t.ro=!0;(i.f5.length||i.v5.length)&&this.So(new TM(this))}$I(t){this.Xk=t}kn(){this.Vo();const t=this._5.slice();for(const i of t)i.kn();Yo(this._5),Yo(this.k5),this._O.removeEventListener("cuechange",this._6),this._O.removeEventListener("cuechange",this.o6),this.Z5&&(this.Z5.removeEventListener("load",this.g6),this.Z5.removeEventListener("error",this.p6),os(this.Z5))}constructor(t,i,e,s=!0){super(),this._O=void 0,this.Z5=void 0,this._5=[],this.k5=[],this.p5=void 0,this.g5=void 0,this.gO=void 0,this.hS=void 0,this.pO=void 0,this.Yo=xh.Nh,this.t5=Zu.NONE,this.hu=void 0,this.P5=void 0,this.Vp=nh.DEFAULT,this.h6=!1,this.a6=0,this.zU=0,this.r6=void 0,this._6=()=>{this.t6(),this._O.removeEventListener("cuechange",this._6)},this.o6=()=>{this.Xk!==xh.Nh&&(this.v6(),this.D5(),this._5.length&&this.i6(Zu.LOADING))},this.g6=()=>{this.i6(Zu.LOADED)},this.p6=()=>{this.i6(Zu.ERROR)},this.hS=t||Ys(),this._O=i,this.r6=s,this._O.addEventListener("cuechange",this._6),this._O.addEventListener("cuechange",this.o6),this.Z5=e,this.Z5&&(this.P5=fn(this.Z5.src),this.Z5.addEventListener("load",this.g6),this.Z5.addEventListener("error",this.p6)),this.gO=ki(),this.pO=i.label||"",this.p5=new aM(this._5),this.g5=new aM(this.k5),this.Xk=this.e6,ct(()=>{this.o6(),this.i6(Zu.NONE)})}};function cL(t){return null==t?void 0:t.THEOplayerTextTrackCue}r(),r();function dL(t,i){return gu(t.XF,i.XF)||function(t,i){return t.Ht===i.Ht?tf(hM(t),hM(i)):JP(t.Ht,i.Ht)}(t.TO,i.TO)||function(t,i){return t===i?Qc.rh:t===Me.zL?Qc.Ug:Qc.Fg}(t.type,i.type)}var lL=class{hr(){Yo(this.m6);for(const t of this.Gl.slice())this.it(t);this.w6(),this.y6=0,this.En=0,Yo(this.A6),this.b6=!1,this.S6=!1,this.T6=0}tt(t){pi(this.Gl,t)||(this.Gl.push(t),t.wn(Te.pa,this.k6),t.Xk!==xh.Nh&&this.E6())}it(t){oi(this.Gl,t)&&(t.mn(Te.pa,this.k6),t.Xk!==xh.Nh&&this.E6())}E6(){const t=this.A6,i=this.Gl.filter(t=>t.Xk!==xh.Nh);this.A6=i;for(const e of t)pi(i,e)||this.P6(e);for(const e of i)pi(t,e)||this.x6(e);this.T6=0}x6(t){if(t.wn(Te.hI,this.I6),t.wn(Te.aI,this.R6),t.wn(Te.cI,this.C6),t.L.V>0){for(const i of t.L.II)this.D6.push(i);this.B6()}}P6(t){if(t.mn(Te.hI,this.I6),t.mn(Te.aI,this.R6),t.mn(Te.cI,this.C6),t.L.V>0){for(const i of t.L.II)oi(this.m6,i),oi(this.D6,i);this.B6()}}N6(){this.oa.kx||this.oa.hx?this.w6():this.B6()}B6(){this.b6&&0!==this.A6.length&&(this.T6-this.oa.MP>.25*this.oa.ux||this.y6||(this.y6=this.L6.M6(this.O6)))}w6(){this.y6&&(this.L6.F6(this.y6),this.y6=0)}U6(t){var i,e;if(0===this.T6)return;const s=null!=(e=null==(i=t.Ht)?void 0:i.bU)?e:0,n=t.EO+s,r=t.PO+s,h=this.oa.MP,o=n<=h&&h<r;t.ro!==o?this.T6=0:this.En<n&&n<this.T6?this.T6=n:this.En<r&&r<this.T6&&(this.T6=r)}V6(){if(!this.b6)return;if(0===this.A6.length)return;if(this.oa.kx)return;const t=this.A6,i=this.En,e=this.oa.MP,s=e-i<-.1;let n=this.S6||s;n&&e>i&&e-i<.1&&(n=!1),this.S6=!1;const r=[];let h=1/0;for(const i of t){const t=e-i.bU,s=i.D5(t,n)+i.bU;s<h&&(h=s);for(const t of i.q.II)r.push(t)}const o=this.m6.slice();if(n);else for(const s of t){YP(s,i-s.bU-yt,e-s.bU,o)}for(let t=o.length-1;t>=0;t--)pi(r,o[t])&&ka(o,t);const a=[];if(!n)for(let t=o.length-1;t>=0;t--){const s=o[t],n=s.Ht.bU;s.EO+n>i&&s.PO+n<=e&&(a.push(s),ka(o,t))}for(const t of this.D6)t.EO!==t.PO&&oi(a,t);Yo(this.D6);const u=[],c=[];for(const t of a)t.ro||u.push(new pM(t,t.EO)),u.push(new rc(t,_.max(t.EO,t.PO))),t.ro=!1;for(const t of o)t.ro&&(u.push(new rc(t,_.max(t.EO,t.PO))),t.ro=!1);for(const t of r)t.ro||(u.push(new pM(t,t.EO)),t.ro=!0);u.sort(dL);for(const t of u){const i=t.TO;i.So(t);const e=i.Ht;e&&(t.type===Me.zL?e.So(new yM(i)):e.So(new bM(i)),pi(c,e)||c.push(e))}c.sort(JP);for(const t of c)t.So(new TM(t));this.En=e,this.m6=r,this.T6=h}kn(){this.hr(),this.oa.mn(d._y,this.H6),this.oa.mn(d.uo,this.W6),this.oa.mn(Do.TM,this.H6),this.oa.mn(d.jw,this.H6),this.oa.mn(d.$w,this.q6),this.oa.mn(d.Zw,this.H6)}constructor(t,i){this.oa=void 0,this.L6=void 0,this.Gl=[],this.y6=0,this.En=0,this.m6=[],this.D6=[],this.A6=[],this.b6=!1,this.S6=!1,this.T6=0,this.O6=()=>{this.y6=0,this.V6(),this.N6()},this.H6=()=>{this.V6(),this.N6()},this.W6=()=>{this.b6=!0,this.H6()},this.q6=()=>{this.S6=!0,this.T6=0,this.w6()},this.k6=()=>{this.E6(),this.V6(),this.N6()},this.I6=t=>{const i=t.TO;pi(this.D6,i)||this.D6.push(i),this.U6(i),this.B6()},this.R6=t=>{const i=t.TO;oi(this.m6,i),oi(this.D6,i),this.U6(i),this.B6()},this.C6=t=>{const i=t.TO;this.U6(i),this.B6()},this.L6=i,this.oa=t,t.wn(d._y,this.H6),t.wn(d.uo,this.W6),t.wn(Do.TM,this.H6),t.wn(d.jw,this.H6),t.wn(d.$w,this.q6),t.wn(d.Zw,this.H6),this.B6()}};r();var ec=class{M6(t){return Is(t)}F6(t){Ii(t)}},fL=new ec,hu=class extends lL{constructor(t,i=fL){super(t,i)}};r(),r();var vL=class extends _h{get Ca(){return this.hu||(this.hu=NM(this)),this.hu}GO(t){return CM(this,t)}constructor(t,i,e){super(t,1/0,i,!1,e)}};r(),r();var _L=class extends gM{constructor(t,i,e=nh.DEFAULT){super(Ao.VU,"",i||"","",!1,e,!1,t)}},gL=class extends _L{tV(t){DM(t,this._5),super.tV(t)}xa(){return zh(this)}constructor(t,i){super(t,i),this.Km=nh.ID3}},pL=class extends gL{get o(){return this._O.id||""}get ZI(){return this._O.inBandMetadataTrackDispatchType||""}get bs(){return this._O.language||""}T5(t){super.T5(t),this.e6=this.Xk}get e6(){return AS(this._O.mode)}set e6(t){this._O.mode=t}get mO(){return this._O}tV(t){super.tV(t),t.M5.track!==this._O&&this._O.addCue(t.M5)}WU(t){super.WU(t),t.M5.track===this._O&&this._O.removeCue(t.M5)}qU(t){this.a6>=t||(this.a6=t,St(this,t))}i6(t){this.Ax=_.max(this.Ax,t)}v6(){const t=this._O.cues;if(!t)return;const i=t.length,e=[],s=[];for(let h=0;h<i;h++){var n;const i=null!=(n=t[h])?n:t.item(h);if(hL(i)&&i.endTime>=this.a6){var r;const t=null!=(r=null==i?void 0:i.THEOplayerTextTrackCue)?r:new mL(i);e.push(t)}else s.push(i)}ql(e,Sn);const h=oM(this.L.II.slice(),e);for(const t of s)this._O.removeCue(t);for(const t of h.v5)t.kn(),this.WU(t);for(const t of h.f5)this.tV(t)}kn(){this._O.removeEventListener("cuechange",this.o6),super.kn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this._O=void 0,this.a6=0,this.o6=()=>{this.Xk!==xh.Nh&&(this.v6(),this.i6(Zu.LOADED))},this._O=t,this._O.addEventListener("cuechange",this.o6),this.Xk=this.e6,ct(()=>{this.o6()})}},mL=class extends vL{kn(){super.kn(),this.M5.THEOplayerTextTrackCue=void 0}constructor(t){super(t.startTime,aL(t.value),t.id),this.M5=void 0,this.M5=t,this.M5.THEOplayerTextTrackCue=this}};r(),r();var Du=[d.Pw,d.Ew,d.py,d.yy,d.LICENSE_REQUEST_GENERATED];r();var wL=class extends wp{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(d.Ew),this.errorObject=void 0,this.errorObject=t}};r(),r(),r();var un=class extends wp{constructor(t){super(d.Pw),this.z6=void 0,this.z6=t}};r();var yL=class extends wp{constructor(t){super("wy"),this.z6=void 0,this.z6=t}},AL=new te,bL=class extends wp{constructor(t){super("Xs"),this.session=void 0,this.session=t}},SL=class extends Ne{get G6(){return this.X6}vS(){return this.j6=!0,AL.Zo(t=>this.Q6(t),this.nT.Yg)}async Q6(t){try{ii(t),await this.K6.KV(t);const i=await this.K6.YV(this.Y6.Jm,this.Y6.Ey,t);await this.J6.vS(this.Y6.Jm,this.Y6.Ey,i)}catch(t){sa(t);const i=t instanceof dn?t.Yy:void 0,e=new fs(Vo.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,i);throw this.Ts(e),e}}async eH(t,i){let e;try{e=function(t){return lm(t,wm())}(t)?await this.K6.dH(new j(t),this.nT.Yg):await this.K6.lH(new j(t),i,this.nT.Yg)}catch(t){if(D(t))return;throw t}if(this.nT.Yg.Hg)return;const s=this.Z6,n=new pa;this.Z6=n;try{await this.J6.er(e),await Er(100)}catch(t){const i=t instanceof dn?t.Yy:void 0;throw new fs(Vo.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,i)}finally{void 0!==s&&await s.Qy,n.Xy(),this.Z6===n&&(this.Z6=void 0)}}Ts(t){const i=t instanceof fs?t:new fs(Vo.CONTENT_PROTECTION_ERROR,t.message,t);this.So(new wL(i)),this.Xs()}t8(){this.J6.mn("Py",this.yS),this.J6.mn(d.yy,this.i8),this.J6.mn("lt",this.e8),this.s8=!1,this.X6=!1,this.nT.Zg(),this.So(new bL(this))}async Xs(){let t;this.Vo();do{t=this.Z6,void 0!==t&&await t.Qy}while(this.Z6!==t);this.t8(),await this.J6.Xs().catch(Ct)}constructor(t,i,e){super(),this.J6=void 0,this.K6=void 0,this.Y6=void 0,this.j6=void 0,this.s8=void 0,this.nT=void 0,this.Z6=void 0,this.X6=void 0,this.yS=void 0,this.i8=void 0,this.e8=void 0,this.J6=t,this.K6=i,this.Y6=e,this.j6=!1,this.s8=!1,this.nT=new at,this.X6=!1,this.yS=t=>{if(!this.nT.Yg.Hg)switch(t.Iy){case"license-request":case"license-renewal":this.eH(t.Py,t.Ry).catch(t=>this.Ts(t));break;default:this.Ts(new fs(Vo.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.Iy))}},this.i8=t=>{this.J6.Ty.zy((t,i)=>{switch(t){case"usable":zd.Og(()=>{this.s8=!0,this.So(new un(i))},100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.So(new yL(i))}}),this.X6=!0,this.So(t)},this.e8=t=>{this.Ts(new fs(Vo.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.wn("Py",this.yS),t.wn(d.yy,this.i8),t.wn("lt",this.e8),t.oS.then(()=>this.t8(),t=>this.Ts(t))}},TL=class extends Ne{get kS(){return this.mS}get n8(){return this.r8.every(t=>t.G6)}QV(){return this.h8.QV()}o8(t){return this.a8||(this.a8=this.u8(t)),this.a8}async u8(t){ii(t);const i=await this.h8.dH(new j(wm()),t);if(ii(t),!this.TS)throw new m("Invalid MediaKeys when setting ServerCertificate");await this.TS.ES(i.buffer)}async c8(t){if(!this.TS)throw new m("Invalid MediaKeys when creating KeySession");try{this.d8.push(t);const i=await this.TS.SS("temporary"),e=new SL(i,this.h8,t);return this.r8.push(e),e.wn(Du,this.l8),e.wn("Xs",this.f8),e}finally{oi(this.d8,t)}}v8(t){if(t._8)return!1;for(const i of this.r8)if(kL(i.Y6,t))return!0;for(const i of this.d8)if(kL(i,t))return!0;return!1}async kn(){this.TS=void 0,this.Vo();const t=this.r8.slice();Yo(this.r8),await Promise.all(t.map(t=>t.Xs())),this.g8=void 0,this.h8.zg()}constructor(t,i,e){super(),this.mS=void 0,this.TS=void 0,this.h8=void 0,this.r8=[],this.a8=void 0,this.d8=[],this.g8=void 0,this.l8=t=>{if(t.type===d.yy)return null!=this.g8||(this.g8=new mm),t.Ty.zy((t,i)=>{this.g8.qy(i,t)}),void(this.n8&&this.So(new cr(this.g8)));this.Rs(t)},this.f8=t=>{t.session.mn(Du,this.Rs),t.session.mn("Xs",this.f8),oi(this.r8,t.session),this.g8=void 0},this.mS=t,this.TS=i,this.h8=e}};function kL(t,i){if(t._8)return!1;if(t.Jm!==i.Jm)return!1;if(lm(t.Ey,i.Ey))return!0;if("sinf"===t.Jm&&"sinf"===i.Jm){const i=EL(t),e=EL(t);if(i&&e)return lm(i,e)}return!1}function EL(t){try{const i=vr(dh(new j(t.Ey)),new Ui),e=JSON.parse(i).sinf[0],s=new j(wu(e)),n=new lc(dh(s),new Ui);return jt.rN(n).mN.yN.SN}catch(t){return}}var PL=class extends Ne{get p8(){var t;return null==(t=this.mS)?void 0:t.kS}get Eq(){return this.h8}set Eq(t){this.h8=t}Un(t,i){this.iq=t,this.EZ(i)}EZ(t){this.YS=t,this.m8(this.nT.Yg).catch(yf)}xZ(t){this.w8(t,this.nT.Yg).catch(yf)}async w8(t,i){var e,s;ii(i);var n;if(null==(e=this.YS)?void 0:e.aq)for(const e of null!=(n=null==(s=this.YS)?void 0:s.aq)?n:[]){var r;const s=Jr(t,t=>t.y8===e.kS.$m);if(void 0!==(null==s?void 0:s.A8)&&!(null==(r=e.BW)?void 0:r.some(t=>lm(s.A8,t))))try{return void await this.b8(e.kS.Jm,s.A8,i)}catch(t){sa(t)}}}async m8(t){if(!zd.Zs.gp||!await this.S8(t))return this.YS&&this.YS.T8?await this.k8(t):void 0}async S8(t){var i,e;if(!(null==(i=this.YS)?void 0:i.aq))return!1;let s=!1;var n;for(const i of null!=(n=null==(e=this.YS)?void 0:e.aq)?n:[]){if(i.MW&&0!==i.MW.length){try{const e={kids:i.MW.map(t=>t.id)},n=br(JSON.stringify(e)).buffer;await this.b8(Fg,n,t),s=!0}catch(t){sa(t)}if(s)return!0}var r;for(const e of null!=(r=i.BW)?r:[])try{await this.b8(i.kS.Jm,e,t),s=!0}catch(t){sa(t)}if(s)return!0}return!1}E8(t){return t===Mg||t===Og||t===Lg||t===Fg}async b8(t,i,e){if(ii(e),!i.byteLength)return;if(!this.YS||!this.YS.aq.length)throw new fs(Vo.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(!this.E8(t))return void 0;const s=TT(t,i),n=this.YS.aq;let r;const h=[];for(const i of n){ii(e);const n=s[i.kS.Zm];if(n&&i.kS.Jm===t)try{const t=await this.P8(i,e);t.QV()&&await t.o8();const s=this.TL.KP,r={Jm:i.kS.Jm,Ey:n,_8:s};if(h.push(!0),this.x8(t,r)){const i=await t.c8(r);await i.vS(),this.So(new bp(n))}return}catch(t){sa(t),r=t}else i.kS.Km===an.Xm&&h.push(!1)}if(0===h.length||h.some(jo))throw await zd._m()?new fs(Vo.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new fs(Vo.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async k8(t){var i;const e=null==(i=this.YS)?void 0:i.aq;if(e)for(const i of e){ii(t);try{const e=await this.P8(i,t);return void(e.QV()&&await e.o8())}catch(t){sa(t)}}}x8(t,i){return zd.Zs._p||this.TL.CL.RL||!t.v8(i)}P8(t,i){return this.ta.Zo(i=>this.I8(t,i),i)}async I8(t,i){if(ii(i),!this.YS||!this.h8||!this.iq)throw new m("Not initialized");if(this.mS){if(this.mS.kS!==t.kS)throw new m("Internal key system error");return this.mS}const e=this.h8,s=Mo({},t,{Mq:t.Mq.map(i=>{var s;return Mo({},i,{persistentState:null!=(s=i.persistentState)?s:e._H(t.kS),MS:i.MS||e.MS(t.kS)})})}),n=await this.iq.bZ(s.kS,s.Mq),r=e.DW(s),h=new TL(s.kS,n,r);return h.wn(Du,this.Rs),this.mS=h,h}Ts(t){if(D(t))return;const i=t instanceof fs?t:new fs(Vo.CONTENT_PROTECTION_ERROR,t.message,t);this.So(new wL(i))}async hr(){this.iq=void 0,this.YS=void 0,this.nT.Zg(),this.nT=new at,await this.C8()}async C8(){await this.ta.Zg();const t=this.mS;t&&(t.mn(d.py,this.Rs),this.mS=void 0,await t.kn())}async zg(){this.Vo(),this.TL.mn(_r.Dw,this.D8),await this.hr(),await this.ta.kn()}constructor(t){super(),this.TL=void 0,this.nT=new at,this.ta=new te,this.YS=void 0,this.h8=void 0,this.iq=void 0,this.mS=void 0,this.D8=t=>{this.b8(t.Jm,t.Ey,this.nT.Yg).catch(t=>this.Ts(t))},this.TL=t,this.TL.wn(_r.Dw,this.D8)}};r();var xL=class extends wp{constructor(t){super(d.Vw),this.currentTime=void 0,this.currentTime=t}};r();var IL=class extends Ne{get Ax(){return void 0!==this.B8?this.B8.Ax:mh.VL}e5(){var t;null==(t=this.B8)||t.e5()}hr(){var t;null==(t=this.B8)||t.hr()}zg(){this.Vo(),void 0!==this.B8&&(this.B8.zg(),this.B8=void 0)}N8(t){if(this.B8===t)return;const i=this.Ax;void 0!==this.B8&&this.B8.zg(),this.B8=t,void 0!==t&&(t.wn(Do.wI,this.Rs),t.e5());const e=this.Ax;i!==e&&this.So(new ou(this.M8.MP,e))}constructor(t){super(),this.M8=void 0,this.B8=void 0,this.M8=t}};r();var RL=class extends gM{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=CL(this)}L8(t,i,e){const s=new fE(t,i,e,!1);return this.tV(s),s}O8(t){this.WU(t)}constructor(t,i,e){super(t,i,"",e,void 0,nh.WEBVTT)}};function CL(t){return po(zh(t),{get type(){return t.Km},addCue:(i,e,s)=>t.L8(i,e,s).Ca,removeCue(i){t.O8(i.kO)}})}r();var DL=class extends uL{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=CL(this)}L8(t,i,e){const n=this.d6(new s.VTTCue(t,i,e));return this.uE?this.tV(n):this.F8.push(n),n}O8(t){oi(this.F8,t),this.WU(t)}kn(){var t;super.kn(),null==(t=this.Z5)||t.removeEventListener("load",this.U8),Yo(this.F8)}constructor(t,i,e){var s;super(t,i,e),this.uE=!1,this.F8=[],this.U8=()=>{var t;null==(t=this.Z5)||t.removeEventListener("load",this.U8),this.uE=!0;for(const t of this.F8)this.tV(t);Yo(this.F8)},null==(s=this.Z5)||s.addEventListener("load",this.U8),this.Km=nh.WEBVTT}};function BL(t,i){if(void 0!==t.Q3!==i.L4.some(t=>I(t.qT)))return!1;return void 0!==t.K3===i.L4.some(t=>tt(t.qT))}r();var NL=Qt.N_||Qt.L_,ML=Qt.Cg,LL=Qt.X_,OL=Qt.X_&&Qt.ru,FL=class extends Ne{get n5(){return this.V8}get IP(){return this.iq?this.iq.IP:ve.iL()}get CP(){const t=this.nq;if(!t||S(t.getTime()))return;const i=1e3*this.MP;return new Date(t.getTime()+i)}get nq(){if(this.$W.getStartDate)return this.Sz&&this.H8||(this.H8=this.$W.getStartDate()),this.H8}get MP(){return this.W8?this.W8.MP:void 0!==this.q8?this.q8:this._T.currentTime}get Wu(){return this.sc}get ct(){return this.W8?this.W8.ct:this.iq?this.iq.ct:this._T.duration}get UP(){return this.kx?this.z8():this.W8?this.W8.UP:this._T.ended||this.G8}z8(){return void 0!==this.q8&&this.ct===this.q8}get lt(){return this.JW}get $W(){return this._T}get hx(){return this.X8?this.j8:this.W8?this.W8.hx:this._T.paused}get _x(){return this.Ho.OM(ve.jn(this._T.played))}get Mi(){return this._T.offsetHeight*zd.Zs.fp}get Ti(){return this._T.offsetWidth*zd.Zs.fp}get Ma(){return this.ha}get mq(){return this.ea}get Ax(){return this.Q8.Ax}get Sx(){return this.iq?this.iq.Sx:ve.iL()}get kx(){return this.W8?this.W8.kx:this.Sz||this._T.seeking&&!this.J4}get Y4(){return this.W8?this.W8.Y4:this.J4}get a5(){return 0!==this.K8}get $P(){return this.W8?this.W8.$P:this._T.muted}set $P(t){this.W8?this.W8.$P=t:(this._T.muted=t,this.Y8())}get ux(){return this.W8?this.W8.ux:void 0!==this.J8?this.J8:this._T.playbackRate}set ux(t){this.W8?this.W8.ux=t:this.hx||this.V8?(this.J8=t,this.Z8()):(this.J8=void 0,this._T.playbackRate=t,this.Z8())}Z8(){const t=this.ux;this.t7!==t&&(this.t7=t,this.So(new aa(this.MP,t)))}get i7(){return this.yz}get Mx(){return this.W8?this.W8.Mx:this._T.volume}set Mx(t){this.W8?this.W8.Mx=t:(this._T.volume=t,this.Y8())}Y8(){const t=this.Mx,i=this.$P;this.e7===t&&this.s7===i||(this.e7=t,this.s7=i,this.So(new Ze(this.MP,this.Mx)))}ZP(){return tB(this._T)}Gx(){this.n7||(this.n7=!0);const t=this.r7();return this.h7(),t}h7(){this.X8?this.j8&&(this.j8=!1,this.So(new Tc(this.MP))):this.o7()}o7(){if(this.W8)this.W8.Gx();else{Qt.X_&&!Qt.ru&&this._T.preload===q.lz&&(this._T.preload=q.VU);const t=this.ux,i=this._T.play();t!==this.$W.playbackRate&&(this.ux=t),this.G8=!1,ih(i)?i.then(this.a7,this.u7):this.d7.u5()&&this.l7()}}zx(){this.X8?this.j8||(this.j8=!0,this.So(new hl(this.MP))):this.f7()}f7(){this.W8?this.W8.zx():(this._T.pause(),this.d7.er()),this.v7(new dt)}r7(){const t=new pa;return this._7.push(t),t.Qy}g7(){for(const t of this._7)t.Xy(void 0);Yo(this._7)}v7(t){for(const i of this._7)i.jy(t);Yo(this._7)}l7(){this.X8||this.W8||this.g7()}p7(t){this.X8||this.W8||this.v7(t)}My(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.W8?this.W8.My(t,i,e):(this.m7.Zg(),this.m7=new at,this.w7=$e(this.y7(t,i,e,this.w7,this.m7.Yg),this.m7).catch(Ct))}KW(t){const i=this.nq;if(!i||S(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.My(e)}async y7(t,i,e,s,n){try{if(this.q8=t,this.A7=t,this.b7=zd.Mg(),e&&!this.Sz?this.J4=!0:(this.Sz=!0,this.J4=!1),this.G8&&!this.z8()&&(this.G8=!1),this.J4?(this.So(new qN(this.MP)),(Qt.w_||Qt.S_)&&(t+=.05)):this.So(new F(t)),await s.catch(Ct),ii(n),this.iq&&!this.iq.jZ())return void this.S7();for(this.T7&&this.k7(),this.Q8.Ax===mh.VL&&await this.Q8.ww(Do.wI,n);0===this._T.seekable.length||OL&&!this.n7;){const t={stack:[],error:void 0,hasError:!1};try{const i=Be(t,at.ep([n]),!1);await Promise.race([Lb(this._T,"timeupdate",i.Yg),Er(100,i.Yg)]),ii(n)}catch(i){t.error=i,t.hasError=!0}finally{Cs(t)}}let h=BN(this.IP,t,.05),o=this.Sx,a=!0,u=!1;for(;;){const t={stack:[],error:void 0,hasError:!1};try{var r;if(o=this.Sx,o.V>0&&!o.Cr(h)&&(h=o.DM(h),a=!0),i&&(zd.Zs.Dp||!this._T.fastSeek)){const t=this.IP;if(!t.Cr(h)){const i=BN(t,h,1);i!==h&&(h=i,a=!0)}}if(LL){const t=this.E7();void 0!==t&&h>t&&(h=t,a=!0)}if(!u){const t=this.P7();void 0!==t&&h>t&&(u=!0,await this.x7(t,!1,n),await Lb(this._T,"seeked",n),ii(n),a=!0)}if(a){a=!1,await this.x7(h,i,n),ii(n);let t=this.MP;o=this.Sx,h=o.DM(h);let e=1;for(;_.abs(h-t)>=yt;)o=this.Sx,h=VL(h,o,e),await this.x7(h,i,n),ii(n),t=this.MP,e++}if(!(this._T.seeking||this.Q8.Ax<mh.HL))break;const e=Be(t,at.ep([n]),!1);await Promise.race([Lb(this._T,"seeked",e.Yg),this.ww([d.Qw,d.Rw],e.Yg),this.Q8.ww(Do.wI,e.Yg),null==(r=this.iq)?void 0:r.ww(SB.gZ,e.Yg)].filter(it)),ii(n)}catch(i){t.error=i,t.hasError=!0}finally{Cs(t)}}this.S7()}catch(t){if(D(t))return;0}}async x7(t,i,e){ii(e);let s=this.Sx;if(t=s.DM(t),this.T7){let i=!0;for(;i||this.Q8.Ax<mh.WL;){const n={stack:[],error:void 0,hasError:!1};try{if(s=this.Sx,s.Cr(t)||(t=s.DM(t),i=!0),i){i=!1,this.q8=t,this.I7(this.MP);continue}const r=Be(n,at.ep([e]),!1);await Promise.race([this.ww(d.Rw,r.Yg),this.Q8.ww(Do.wI,r.Yg)])}catch(t){n.error=t,n.hasError=!0}finally{Cs(n)}}ii(e)}const n=Lb(this._T,"seeking",e);i&&!zd.Zs.Dp&&this._T.fastSeek?this._T.fastSeek(t):this._T.currentTime=t,this.q8=void 0,this.I7(this.MP),this._T.seeking&&await n}E7(){if(!this.iq||!this.iq.WZ)return;const t=this.iq.qZ,i=this.iq.zZ,e=t&&i?t.Mn(i):t||i;if(!e||0===e.V)return;const s=e.Tn(e.V-1),n=e.An(e.V-1);return _.max(s,n-.001)}P7(){if(!this.iq||!this.iq.WZ)return;const t=this.iq.zZ;if(!t||0===t.V)return;const i=t.Tn(t.V-1);let e=t.An(t.V-1)-.02;return e-=.001,_.max(i,e)}I7(t){this.A7!==t&&(this.A7=t,this.J4?this.So(new qN(t)):this.So(new F(t)))}S7(){const t=this.J4;this.Sz=!1,this.J4=!1,this.b7=0,this.A7=NaN,this.T7&&this.R7(),t?(this.So(new xL(this.MP)),this.C7()):(this.So(new Es(this.MP)),this.D7=!0),this.sJ()}k7(){this.X8||(this.j8=this.hx,this.X8=!0,this.f7())}R7(){this.X8&&(this.X8=!1,this.j8||this.h7())}QZ(t){for(const i of t){if(i.Km===Zr.mV&&EB.QZ(i,this._T))return i;if(i.Km===Zr.wV&&HN.QZ(i))return i}}we(){this.yz=!1,Tf(this._T)&&(this._T.style.display="none")}be(){this.yz=!0,Tf(this._T)&&(this._T.style.display="block")}get nt(){return this.B7}get Ql(){return this.Dz}tI(t,i,e,s,n,r,h,o,a){const u=new gM(t,i,e,s,n,r,h,a,o);return this.Gl.tt(u),this.N7.tt(u),u}wq(t){const{Lt:i,Th:e,bs:n}=t;if("function"==typeof this._T.addTextTrack&&"function"==typeof s.VTTCue){const t=this.M7("data:text/vtt,WEBVTT%0A%0A",i,e,n),s=t.track,r=new DL(s.label,s,t);return this.L7.tt(r),this.O7.push(r),r}const r=new RL(i,e,n);return this.Gl.tt(r),this.N7.tt(r),r}vq(){return!0}gq(t,i,e,s,n){const r=this.M7(t,i,e,s,n),h=r.track,o=new uL(h.label,h,r);return this.L7.tt(o),this.O7.push(o),o}M7(t,i,e,s,n){const r=h.createElement("track");return r.src=fn(t),r.kind=i,r.label=null!=e?e:"",s&&(r.srclang=s),r.default=Boolean(n),this._T.appendChild(r),r}iV(t){this.Gl.it(t),this.N7.it(t)}Aq(){for(const t of this.Gl.II.slice())t.kn();this.Gl.hr();for(const t of this.O7.slice())this.L7.it(t),t.kn();Yo(this.O7)}Lq(){const t=this._T.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.F7),t.addEventListener("removetrack",this.U7),t.addEventListener("change",this.V7))}Tq(){const t=this._T.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.F7),t.removeEventListener("removetrack",this.U7),t.removeEventListener("change",this.V7))}H7(t){t.mode=xh.JI;const i=new pL(t);this.L7.tt(i),this.N7.tt(i)}W7(t,i){const e=()=>{WL(t)&&(t.removeEventListener("cuechange",e),this.L7.tt(new uL(t.id,t,i)))};t.addEventListener("cuechange",e),t.mode=xh.JI}q7(t){const i=this._T.getElementsByTagName("track");for(let e=0;e<i.length;e++){const s=i[e]||i.item(e);if(s.track===t)return s}}z7(){if(0===this.L7.V)return;const t=this.Sx;if(0===t.V)return;const i=t.Tn(0);if(this.G7!==i){for(const t of this.L7.II)t.qU(i);this.G7=i}}Un(t){return this.X7.Zo(async i=>{if(ii(i),this.iq)throw new m("Already loaded a media source");let e;if(t.Km===Zr.mV)e=new EB(t,this,this.PZ,this.hw,this.VJ),this.T7=!1,this.Q8.N8(this.j7());else{if(t.Km!==Zr.wV)throw new m("Unsupported configuration");{this.T7=NL;const i=this.j7();e=new HN(t,this,i,this.PZ,this.hw,void 0,this.E4,this.VJ),this.Q8.N8(i),ML&&(this.wn(d._y,this.Q7),this.Q8.wn(Do.wI,this.K7))}}return this.iq=e,await e.VY(),e})}j7(){return this.T7?new ZN(this):new YN(this)}Y7(){if(this.V8)return;const t=this.ux;this.V8=!0,this.ux=t,this._T.playbackRate=0,this.Q8&&this.Q8.e5()}J7(){if(!this.V8)return;const t=this.ux;this.V8=!1,this.ux=t,this.Z7()}Z7(){this._T.currentTime=this._T.currentTime,this.Q8&&this.Q8.e5()}t9(){this.Sz=!1,this.J4=!1,this.D7=!1,zd.Lg(this.K8),this.K8=0,this.Ho=ve.iL(),this.m7.Zg(),this.q8=void 0,this.A7=NaN,this.H8=void 0,this.T7=!1,this.X8=!1,this.JW=void 0,this.G8=!1,this.i9=void 0,this.G7=0,this.e9=!1,this.n7=!1,this.s9&&(this.n9(),this.s9=!1),this.v7(new dt),this.Q8.N8(new YN(this)),this.d7.hr(),this.L7.hr(),this.J7(),ML&&(Ii(this.r9),this.r9=0,this.mn(d._y,this.Q7))}async hr(){this.t9(),await this.X7.Zg(),await this.X7.Zo(async()=>{this.iq&&(await this.iq.zg(),this.iq=void 0,Qt.w_&&Qt.A_<3&&this.h9())})}async C8(){const t=this.iq;if(void 0===t||!AB(t)||void 0!==this.JW)throw new g("Invalid state");this.t9(),this._T.pause(),this._T.currentTime=0,await this.X7.Zo(()=>async function(t){t.A3();const i=[t.Q3,t.K3].filter(it);await Promise.all(i.map(t=>t.r3(0,1/0))),t.C4(NaN)}(t))}h9(){this.o9();const t=this._T,i=t.parentElement,e=t.tagName.toLowerCase();this._T=xf(e),this.retainMediaElementState(t),If(t),null==i||i.replaceChild(this._T,t),this.n9(),this.Q8.N8(this.j7()),this.d7.mn(Do.TM,this.a9),this.d7.zg(),this.d7=new iM(this),this.d7.wn(Do.TM,this.a9),this.yz?this.be():this.we(),this.So(new lt),this.So(new Sk)}retainMediaElementState(t){this.$W.muted=t.muted,this.$W.volume=t.volume}async zg(){this.s9=!1,this.o9(),this.Tq(),await this.hr(),await this.X7.kn(),this.d7.zg(),this.Q8.zg(),await this.PZ.zg(),this.Aq(),this.Gl.kn(),this.L7.kn(),this.B7.kn(),this.Vo()}n9(){this.$W.addEventListener("play",this.u9),this.$W.addEventListener("pause",this.c9),this.$W.addEventListener("timeupdate",this.d9),this.$W.addEventListener("progress",this.l9),this.$W.addEventListener("loadstart",this.f9),this.$W.addEventListener("ended",this.v9),this.$W.addEventListener("ratechange",this._9),this.$W.addEventListener("volumechange",this.g9),this.$W.addEventListener("durationchange",this.p9),this.$W.addEventListener("resize",this.m9),this.$W.addEventListener("loadedmetadata",this.m9),this.$W.addEventListener("error",this.w9),this.$W.addEventListener("emptied",this.y9),this.$W.addEventListener("seeked",this.A9),this.$W.addEventListener("seeking",this.b9),vp()?(this._T.addEventListener("encrypted",this.S9),this._T.addEventListener("waitingforkey",this.T9)):void 0!==s.WebKitMediaKeys&&"function"==typeof s.WebKitMediaKeys.isTypeSupported?this._T.addEventListener("webkitneedkey",this.k9):_p()?this._T.addEventListener("webkitneedkey",this.E9):void 0!==s.MSMediaKeys&&"function"==typeof s.MSMediaKeys.isTypeSupported&&this._T.addEventListener("msneedkey",this.P9)}o9(){this.$W.removeEventListener("play",this.u9),this.$W.removeEventListener("pause",this.c9),this.$W.removeEventListener("timeupdate",this.d9),this.$W.removeEventListener("progress",this.l9),this.$W.removeEventListener("loadstart",this.f9),this.$W.removeEventListener("ended",this.v9),this.$W.removeEventListener("ratechange",this._9),this.$W.removeEventListener("volumechange",this.g9),this.$W.removeEventListener("durationchange",this.p9),this.$W.removeEventListener("resize",this.m9),this.$W.removeEventListener("loadedmetadata",this.m9),this.$W.removeEventListener("error",this.w9),this.$W.removeEventListener("encrypted",this.S9),this.$W.removeEventListener("waitingforkey",this.T9),this.$W.removeEventListener("webkitneedkey",this.k9),this.$W.removeEventListener("webkitneedkey",this.E9),this.$W.removeEventListener("msneedkey",this.P9),this.$W.removeEventListener("emptied",this.y9),this.$W.removeEventListener("seeked",this.A9),this.$W.removeEventListener("seeking",this.b9)}x9(){this.W8||(this.Ho=this._x,this.W8=XN(this),this.o9(),this.W8.wn(zN,this.Rs))}I9(){if(!this.W8)return;const t=this.W8;this.W8=void 0,this.Q8.e5(),jN(this,t),t.zg(),this.n9()}C7(){const t=this.MP;this.So(new Si(t,void 0)),this.i9=t}sJ(){this.G8||!this.UP||this.kx||(this.G8=!0,this.So(new At(this.MP)))}qq(t){this.JW=t,this.v7(this.JW),this.So(new eu(this.JW))}get KP(){return Boolean(this._T.webkitCurrentPlaybackTargetIsWireless)}get R9(){return this.C9}get CL(){return Mo({},wB)}D9(){this.C9||(Cf(this._T,zd.Zs),this.C9=!0)}B9(t){t.appendChild(this._T)}P3(){ML&&this.Q7(),this.Q8.e5()}get Eq(){return this.PZ.Eq}set Eq(t){this.PZ.Eq=t}get N9(){return this.E4}set N9(t){this.E4=t}get p8(){return this.PZ.p8}Yx(){this.PZ.C8().catch(Ct),this.L7.hr()}get Vx(){return this.e9}set Vx(t){this.e9=t,this.s9&&!this.e9&&(this.s9=!1,this.n9())}constructor(t,i,e,s,n){super(),this._T=void 0,this.sc=void 0,this.VJ=void 0,this.JW=void 0,this.yz=!0,this.iq=void 0,this.X7=new te,this.W8=void 0,this.Q8=void 0,this.d7=void 0,this.PZ=void 0,this.ha=new ls,this.ea=new aR,this.Gl=void 0,this.Dz=void 0,this.O7=[],this.L7=void 0,this.B7=void 0,this.N7=void 0,this.q8=void 0,this.b7=0,this.A7=NaN,this.H8=void 0,this.D7=!1,this.i9=void 0,this.G7=0,this.Sz=!1,this.J4=!1,this.M9=mh.VL,this.K8=0,this.w7=Promise.resolve(),this.m7=new at,this._7=[],this.Ho=ve.iL(),this.J8=void 0,this.t7=1,this.s7=!1,this.e7=1,this.G8=!1,this.e9=!1,this.s9=!1,this.T7=!1,this.hw=void 0,this.X8=!1,this.j8=!1,this.V8=!1,this.C9=!1,this.r9=0,this.E4=void 0,this.n7=!1,this.F7=t=>{const i=t.track,e=this.q7(i);if(!HL(this.L7,i)){if(Qt.X_){if(i.kind===Ao.VU)return void this.H7(i);if(i.kind===Ao.FU&&""===i.label&&""===i.language&&!WL(i))return void this.W7(i,e)}this.L7.tt(new uL(i.id,i,e))}},this.U7=t=>{const i=HL(this.L7,t.track);i&&this.L7.it(i)},this.V7=()=>{for(let t=0;t<this.L7.V;t++){const i=this.L7.CI(t);i instanceof uL&&i.u6()}},this.Q7=()=>{if(void 0===this.iq||!AB(this.iq))return;if(this.hx)return;const t=this.iq,i=t.Q3,e=t.K3;if(!i||!e)return;if(t.WZ)return void this.J7();if(t.Ax===VN._3)return;const s=i.IP,n=e.IP;if(0===s.V&&0===n.V)return void this.J7();const r=this.MP;if(r<s.Tn(0)||r<n.Tn(0))return void this.J7();if(s.Cr(r)!==n.Cr(r)){if(t.XZ(r))return;this.Y7()}else if(this.J7(),!this.r9&&this.d7.u5()){s.FM(n).qM(r,r+.5)&&(this.r9=Is(this.L9))}},this.L9=()=>{this.r9=0,this.Q7()},this.K7=()=>{if(this.kx||this.Y4)return;if(this.Q8.Ax>=mh.WL)return;if(void 0===this.iq||!AB(this.iq))return;const t=this.iq,i=t.Q3,e=t.K3;if(!i||!e)return;const s=this.MP,n=i.IP,r=e.IP;if(!n.Cr(s)||!r.Cr(s))return;n.FM(r).qM(s-5,s)&&(this.V8?this.J7():this.Z7())},this.u9=()=>{this.So(new Tc(this.MP))},this.c9=()=>{this.p7(new dt),this.So(new hl(this.MP))},this.a9=()=>{this.l7(),this.So(new ce(this.MP))},this._9=()=>{this.Z8()},this.p9=()=>{this.So(new Rs(this.ct))},this.l9=()=>{this.So(new H(this.MP))},this.f9=()=>{this.So(new Pt)},this.A9=()=>{this.Sz||this.J4||this.D7?this.D7=!1:this.So(new Es(this.MP))},this.b9=()=>{this.I7(this.MP),this.D7=!1},this.d9=()=>{const t=this.MP,i=this.kx,e=this.Q8.Ax<mh.WL&&!this.UP,s=void 0!==this.i9,n=s&&this.i9!==t;this.z7(),(i||!s||n&&!e)&&this.C7()},this.v9=()=>{this.sJ()},this.w9=()=>{if(null!==this._T.error){const i=this._T.error;var t;this.qq(new Nk(null!=(t=i.code)?t:Bk.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.y9=()=>{this.e9&&(this.o9(),this.s9=!0)},this.O9=t=>{if(zd.Lg(this.K8),this.K8=0,t.readyState<=mh.HL)if(this.Sz||this.J4){const i=zd.Mg()-this.b7;if(i<250)return void(this.K8=zd.Og(()=>this.O9(t),250-i))}else if(void 0!==this.iq&&this.iq.XZ(this.MP))return void(this.K8=zd.Og(()=>this.O9(t),250));this.M9!==t.readyState&&(this.M9=t.readyState,this.So(t))},this.g9=()=>{this.Y8()},this.m9=()=>{this.Bx>0&&this.Rx>0&&this.So(new ts)},this.S9=t=>{this.So(new Tp(t.initDataType,t.initData||new ArrayBuffer(0)))},this.T9=()=>{this.So(new kp)},this.P9=t=>{const i=t.initData,e=i?Gu(i).buffer:new ArrayBuffer(0);this.So(new Tp(Mg,e))},this.k9=t=>{if(t.initData){const i=function(t){try{const i=dh(t),e=new Ui,s=T(i,e,Cu(i,e,!0));return vc(sm(s,!0))}catch(t){return}}(t.initData);if(!i)return;this.So(new Tp(Og,i))}else this.So(new Tp(Og,new ArrayBuffer(0)))},this.E9=t=>{const i=t.initData,e=i?Gu(i).buffer:new ArrayBuffer(0);this.So(new Tp(Mg,e))},this.a7=()=>{this.l7()},this.u7=t=>{this.p7(t)},this.F9=t=>{this.So(t),t.type===d.Ew&&this.qq(P(t.errorObject))},this._T=t,this.hw=i,this.sc=e,this.Dz=s,this.VJ=n,this.Q8=new IL(this),this.Q8.wn(Do.wI,this.O9),this.Q8.N8(new YN(this)),this.d7=new iM(this),this.d7.wn(Do.TM,this.a9),this.PZ=new PL(this),this.PZ.wn(Du,this.F9),this.Gl=new cc,this.L7=new cc,this.B7=new Yu([this.Gl,this.L7]),this.N7=new hu(this),this.n9(),this.Lq()}};var UL=.01;function VL(t,i,e){if(void 0===e&&(e=0),!i.V)return 0;let s=i.DM(t);const n=UL*e;return s===i.Tn(0)?s+=n:s===i.An(i.V-1)&&(s-=n),s}function HL(t,i){for(const e of t.II)if(e.mO===i)return e}function WL(t){return!!t.cues&&t.cues.length>0}r();var qL={ZJ:void 0,$J:void 0,tZ:void 0,iZ:void 0,eZ:void 0,sZ:void 0,nZ:void 0,rZ:void 0,hZ:void 0,oZ:void 0},zL=class extends Ne{get Ca(){return this.hu||(this.hu=fB(this)),this.hu}get ZJ(){}get $J(){}get tZ(){}get iZ(){}get eZ(){}get sZ(){}get U9(){}get nZ(){}get rZ(){}get hZ(){}get oZ(){}constructor(...t){super(...t),this.hu=void 0}},GL=class extends FL{Wx(){}get Rx(){return 0}get Bx(){return 0}constructor(t,i,e,s){super(t,i,e,new zL,s)}};r(),r();var XL=class{get xe(){return this.V9}we(){this.V9.style.display="none"}be(){this.V9.style.display="block"}B9(t){t.appendChild(this.V9)}kn(){os(this.V9)}constructor(t=5){this.V9=void 0;const i=s.document.createElement("div");i.className="theoplayer-texttracks",i.style.position="absolute",i.style.display="none",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.width="100%",i.style.height="100%",i.style.lineHeight="1.3em",i.style.zIndex=""+t,this.V9=i,this.be()}};function jL(t,i){return Mo({},i,cS(function(t){return{ZJ:t.ZJ,$J:t.$J,tZ:t.tZ,iZ:t.iZ,eZ:t.eZ,sZ:t.sZ,nZ:t.nZ,rZ:t.rZ,hZ:t.hZ,oZ:t.oZ}}(t)))}function QL(t){return t.tZ&&Ju(t.tZ,"%")?Number(t.tZ.replace("%",""))/100:t.tZ&&Ju(t.tZ,"em")?Number(t.tZ.replace("em","")):1}r(),r(),r(),r(),r();var KL=class t{get H9(){return this.W9+this.Ti}set H9(t){this.W9=t-this.Ti}get q9(){return this.z9+this.Mi}set q9(t){this.z9=t-this.Mi}G9(t){return this.W9<t.H9&&this.H9>t.W9&&this.z9<t.q9&&this.q9>t.z9}fO(t){return this.W9<=t.W9&&t.H9<=this.H9&&this.z9<=t.z9&&t.q9<=this.q9}Ly(){return new t(this.W9,this.z9,this.Ti,this.Mi)}X9(i){const e=this.W9+i,s=this.z9+i,n=_.max(0,this.Ti-2*i),r=_.max(0,this.Mi-2*i);return new t(e,s,n,r)}j9(i){const e=_.min(this.W9,i.W9),s=_.max(this.H9,i.H9),n=_.min(this.z9,i.z9),r=_.max(this.q9,i.q9);return new t(e,n,s-e,r-n)}constructor(t,i,e,s){this.W9=void 0,this.z9=void 0,this.Ti=void 0,this.Mi=void 0,this.W9=t,this.z9=i,this.Ti=e,this.Mi=s}},YL=class{Q9(t){const i=this.K9(t);if(!i)return!1;for(const t of i)os(t);return this.Y9(t),!0}get Ht(){return this.FO}get $W(){return this._T}get Wu(){return this.sc}get J9(){return this.Z9}get ttt(){return this.itt}VY(){this.ett(),this.FO.L.II.forEach(t=>this.tV(t)),this.Wu.wn(Rh.yn,this.stt),this.oe(this.Wu.Eu,this.Wu.Iu)}ntt(t){this.itt=t,this.Z9=jL(this.itt,this.htt),this.Z9.ZJ&&(this.$W.style.fontFamily=this.Z9.ZJ),this.oe(this.Wu.Eu,this.Wu.Iu),this.ott(!0)}att(){return this.Z9}utt(t){return this.ctt.has(t.jI)}ett(){this.FO.wn(Te.hI,this.dtt),this.FO.wn(Te.aI,this.ltt),this.FO.wn(Te.pa,this.ftt)}_tt(){this.FO.mn(Te.hI,this.dtt),this.FO.mn(Te.aI,this.ltt),this.FO.mn(Te.pa,this.ftt)}gtt(t){t.wn(Me.zL,this.ptt),t.wn(Me.GL,this.mtt),t.wn(Me.SI,this.wtt)}ytt(t){t.mn(Me.zL,this.ptt),t.mn(Me.GL,this.mtt),t.mn(Me.SI,this.wtt)}tV(t){this.gtt(t),t.ro&&this.Att(t)}WU(t){this.ytt(t),this.btt(t)}Stt(){this.FO.Xk===xh.Kn?this.Ttt():this.ktt()}Ttt(){if(!this.Ett)return;this.Ett=!1;const t=this.Wu.Eu,i=this.Wu.Iu;this.oe(t,i),this.ott(!1)}ktt(){this.Ett||(this.Ett=!0,this.ott(!0))}Att(t){this.Ett||t.ro&&!this.utt(t)&&this.ott(!1)}btt(t){this.utt(t)&&this.ott(!0)}Ptt(t){(t.ro||this.utt(t))&&this.ott(!0)}ott(t){const i=this.xtt,e=this.Ett?[]:this.FO.q.II.slice();this.Itt(e,i,t),this.xtt=e}K9(t){return this.ctt.get(t.jI)}Rtt(t,i){this.ctt.set(t.jI,i)}Y9(t){this.ctt.delete(t.jI)}Ctt(t){const i=[],e=this.Z9;if(void 0!==e.nZ){const s=t.Ly();s.Mi=e.nZ,i.push(s)}if(void 0!==e.rZ){const s=t.Ly();s.Mi=e.rZ,s.q9=t.q9,i.push(s)}return i}Dtt(){return this.xtt.slice()}kn(){os(this.$W),this.ctt.clear(),this._tt(),this.FO.L.II.forEach(t=>this.ytt(t)),this.Wu.mn(Rh.yn,this.stt)}constructor(t,i,e,s,n){this.ctt=ar(),this.Ett=!0,this.Z9=void 0,this.itt=Mo({},qL),this.xtt=[],this.FO=void 0,this._T=void 0,this.sc=void 0,this.htt=void 0,this.dtt=t=>this.tV(t.TO),this.ltt=t=>this.WU(t.TO),this.ftt=()=>this.Stt(),this.ptt=t=>this.Att(t.TO),this.mtt=t=>this.btt(t.TO),this.wtt=t=>this.Ptt(t.TO),this.stt=t=>this.oe(t.width,t.height),this.FO=t,this.htt=this.Z9=n,this._T=this.Btt(e),this.sc=s,i.appendChild(this._T)}};function JL(t,i,e,s,n){const r=t.Ly();let h=r,o=1,a=!1;const u=C(getComputedStyle(i).lineHeight)/4;if(!S(u)&&u>0){for(let i=0;i<e.length&&!a;i++){for(;!iO(t,s,e[i],.01)&&(!s.fO(t)||ZL(t,n));)tO(t,e[i],u);if(s.fO(t)){h=t.Ly(),a=!0;break}const c=eO(t,s);o>c&&(h=t.Ly(),o=c),t=r.Ly()}s.fO(t)||(h=r.Ly())}i.style.left=(h.W9-s.W9)/s.Ti*100+"%",i.style.top=(h.z9-s.z9)/s.Mi*100+"%"}function ZL(t,i){return i.some(i=>t.G9(i))}function $L(t){return new KL(t.left,t.top,t.width,t.height)}var A=function(t){return t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y",t}({});function tO(t,i,e){switch(i){case 0:t.W9+=e;break;case 1:t.W9-=e;break;case 2:t.z9+=e;break;case 3:t.z9-=e}}function iO(t,i,e,s){switch(e){case 0:return t.H9>i.H9+s;case 1:return t.W9<i.W9-s;case 2:return t.q9>i.q9+s;case 3:return t.z9<i.z9-s}}function eO(t,i){return _.max(0,_.min(t.H9,i.H9)-_.max(t.W9,i.W9))*_.max(0,_.min(t.q9,i.q9)-_.max(t.z9,i.z9))/(t.Ti*t.Mi)}r();var sO=function(t){return t.il='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.sl='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.nl='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.rl='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif',t}({});function nO(t,i){return t?{Ntt:t.Ntt,Mtt:t.Mtt,Ltt:t.Ltt,Ul:i}:null}function rO(t){const i=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return i?{Ntt:x(i[1],16),Mtt:x(i[2],16),Ltt:x(i[3],16)}:null}function hO(t){return("0"+t.toString(16)).slice(-2)}function oO(t){return"#"+hO(t.Ntt)+hO(t.Mtt)+hO(t.Ltt)}function aO(t){const i=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return i?{Ntt:x(i[1],10),Mtt:x(i[2],10),Ltt:x(i[3],10),Ul:C(i[4])}:null}function uO(t,i){return function(t){return t?"rgba("+t.Ntt+", "+t.Mtt+", "+t.Ltt+", "+t.Ul+")":void 0}(nO(rO(t),i/100))}var vl=function(t){return t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent",t}({});function cO(t){return lO[t||"none"]}var dO,lO={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},fO="monospace, sans-serif",vO="Arial, Helvetica, sans-serif",_O='"Times New Roman", Times, serif',gO=xg({monospace:"monospace",sansSerif:vO,serif:_O,monospaceSansSerif:fO,monospaceSerif:"monospace, serif",proportionalSansSerif:vO,proportionalSerif:_O,default:fO}),pO="1.3em",mO=class extends YL{Btt(t){const i=h.createElement("div");i.className="theoplayer-ttml-texttrack-"+t;const e=i.style;return e.position="absolute",Nl(e,"flex"),e.flexDirection=e.webkitFlexDirection="column",e.overflow="hidden",e.pointerEvents="none",e.top="0",e.left="0",e.width="100%",e.height="100%",e.fontSize="16px",e.lineHeight=pO,i}oe(t,i){const e=16*_.min(t/640,i/360)*QL(this.J9);this.$W.style.fontSize=e+"px"}Itt(t,i,e){for(const t of i)!e&&t.ro||this.Q9(t);const s=[],n=$L(this.$W.getBoundingClientRect());s.push(...this.Ctt(n));for(const i of t){const t=this.Ott(i,s,n);for(const i of t)s.push(i.X9(.1))}}Ott(t,i,e){let s=this.K9(t);s||(s=this.Ftt(t),this.Rtt(t,s));for(const t of s)this.$W.appendChild(t);const n=[],r=[A.POS_Y,A.NEG_Y,A.POS_X,A.NEG_X];for(const t of s){JL(CO(t),t,r,e,i),n.push(CO(t))}return n}Ftt(t){const i=[],e=t.IU,s=t.SU,n=t.DU,r=t.U,o=t.PU,a=o?_.min(640/o.width,360/o.height):1,u=this.J9;if(0===w.keys(s).length){const t=h.createElement("div");IO(t),wO(r,e,n,t,t,a,u),yO(t,"body",u),t.firstChild&&i.push(t)}else for(const t of w.keys(s)){const o=h.createElement("div");o.id=t,IO(o),SO(o,"region",s[t],e,a),wO(r,e,n,o,o,a,u),yO(o,"body",u),o.firstChild&&i.push(o)}return i}ntt(t){return pB(this.$W,t),super.ntt(t)}constructor(t,i,e,s){super(t,i,e,s,qL)}};function wO(t,i,e,s,n,r,o){if(to(t)&&function(t){const i=t.VE.toUpperCase();return"SPAN"===i||"P"===i||"BR"===i||"DIV"===i||"BODY"===i}(t)){const a=AO(t);if(!a||(null==n?void 0:n.id)===a){let a;if("BODY"===t.VE.toUpperCase())a=n;else{if(a=function(t){let i;switch(t.VE.toUpperCase()){case"BR":i=h.createElement("br");break;case"SPAN":i=h.createElement("span"),RO(i),bO(i,t);break;case"P":i=h.createElement("p"),function(t){RO(t);const i=t.style;i.textAlign="inherit",i.padding="0",i.margin="0"}(i),bO(i,t);break;case"DIV":i=h.createElement("div"),bO(i,t)}return i}(t),!a)return;s.appendChild(a)}!function(t,i,e,s,n){const r=i.sP("style");EO(t,i.VE,r,e,s,n),function(t,i,e,s){for(const n of i.iP)PO(t,i.VE,n.VE,n.zE,e,s)}(t,i,s,n)}(a,t,i,n,r),function(t,i,e){let s=null==i?void 0:i.sP("smpte:backgroundImage");if(s){s=s.replace("#","");const n=e&&TO(e,t=>t.iP.some(t=>"id"===t.VE&&t.zE===s));n&&kO(t,n,i,!0)}!function(t,i){const e=i.m[0];if(!e||"metadata"!==e.VE.toLowerCase())return;const s=e.m[0];kO(t,s,i)}(t,i)}(a,t,e),yO(a,t.VE,o);for(const s of t.jE)wO(s,i,e,a,n,r,o)}}else if(Fb(t)){const i=h.createTextNode(t.ck);if("SPAN"!==s.nodeName.toUpperCase()){const t=h.createElement("span");RO(t),yO(t,"span",o),t.appendChild(i),s.appendChild(t)}else s.appendChild(i)}}function yO(t,i,e){const s=t.style;switch(e.ZJ&&(s.fontFamily=e.ZJ),e.$J&&(s.color=e.$J),i.toLowerCase()){case"span":e.iZ&&(s.background=e.iZ);break;case"p":case"div":e.eZ&&(s.backgroundColor=e.eZ);break;case"body":e.sZ&&(s.textShadow=cO(e.sZ))}}function AO(t){const i=t.sP("region");if("p"===t.VE.toLowerCase())return i;const e=[];for(const i of t.m)e.push(AO(i));return Bo(e),0===e.length?i:1===e.length?null!=(s=e[0])?s:i:void 0;var s}function bO(t,i){const e=i.nP(wP,"id");e&&(t.id=e)}function SO(t,i,e,s,n){EO(t,i,e.style,s,t,n);for(const s of w.keys(e))PO(t,i,s,e[s],t,n)}function TO(t,i){if(i(t))return t;for(const e of t.m){const t=TO(e,i);if(t)return t}return null}function kO(t,i,e,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const i=t&&t.jE.length>0?t.jE[0]:null;return i&&Fb(i)?"data:image/png;base64,"+i.ck:""}(i),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,i){const e=t.style;Nl(e,"flex"),e.flexDirection=e.webkitFlexDirection="column";const s=i.sP("smpte:backgroundImageVertical");let n="center";if(s)switch(s.toLowerCase()){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end";break;case"inherit":n="inherit"}e.justifyContent=e.webkitJustifyContent=n;const r=i.sP("smpte:backgroundImageHorizontal");let h="center";if(r)switch(r.toLowerCase()){case"left":h="flex-start";break;case"center":h="center";break;case"right":h="flex-end";break;case"inherit":h="inherit"}e.alignItems=e.webkitAlignItems=h}(t,e),t.appendChild(n)}function EO(t,i,e,s,n,r){if(e)for(const h of e.split(" "))if(s[h])for(const e of w.keys(s[h]))"style"===e.toLowerCase()?EO(t,i,s[h][e],s,n,r):PO(t,i,e,s[h][e],n,r)}function PO(t,i,e,s,n,r){const h=t.style;switch(e){case"backgroundColor":h.backgroundColor=s;break;case"color":h.color=s;break;case"direction":h.direction=s;break;case"display":"none"===s&&(h.display="none");break;case"fontFamily":var o;h.fontFamily=null!=(o=gO.get(s))?o:s;break;case"fontSize":{let t=s;if(Ju(t,"px")){const i=Number(t.slice(0,-2));t=i*r/16+"em"}else Ju(t,"c")&&(t=t.replace("c","em"));h.fontSize=t,h.lineHeight&&"inherit"!==h.lineHeight||(h.lineHeight=pO);break}case"fontStyle":h.fontStyle=s;break;case"fontWeight":h.fontWeight=s;break;case"lineHeight":{let t=s;if(Ju(t,"px")){const i=Number(t.slice(0,-2));t=i*r+"px"}h.lineHeight=t;break}case"opacity":h.opacity=s;break;case"overflow":h.overflow=s;break;case"padding":h.padding=s;break;case"textAlign":h.textAlign=s;break;case"textDecoration":switch(s){case"lineThrough":h.textDecoration="line-through";break;case"underline":case"overline":h.textDecoration=s;break;case"noUnderline":case"noLineThrough":case"noOverline":h.textDecoration="none"}break;case"unicodeBidi":switch(s){case"bidiOverride":h.unicodeBidi="bidi-override";break;case"normal":case"embed":case"isolate":h.unicodeBidi=s}break;case"visibility":h.visibility=s;break;case"zIndex":h.zIndex=s;break;case"displayAlign":{let t;switch(s.toLowerCase()){case"before":t="flex-start";break;case"center":t="center";break;case"after":t="flex-end";break;case"justify":t="space-between";break;default:return}h.justifyContent=h.webkitJustifyContent=t;break}case"extent":{const e=xO(i.toLowerCase())?n:t;let r,h;const o=s.split(" ",2);2===o.length?(r=o[0],h=o[1]):r=h="100%",e&&(e.style.height=h,e.style.width=r);break}case"origin":{const e=xO(i.toLowerCase())?n:t,[r,h]=s.split(" ",2);e&&(r||h)&&(r&&(e.style.left=r),h&&(e.style.top=h));break}case"showBackground":case"textOutline":break;case"wrapOption":switch(s){case"wrap":h.whiteSpace="normal";break;case"noWrap":h.whiteSpace="nowrap"}break;case"writingMode":{let t,i,e,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",i="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",e="upright";break;case"tblr":t="vertical-lr",e="upright";break;case"rl":t="horizontal-tb",i="rtl";break;default:return}h.writingMode=t,h.setProperty("-webkit-writing-mode",t),i&&(h.direction=i),e&&(h.textOrientation=e,h.setProperty("-webkit-text-orientation",e)),n&&(h.unicodeBidi=n);break}case"linePadding":if(Ju(s,"c")){const t=s.replace("c","em");h.paddingLeft=h.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?h.textAlign="":h.textAlign=s}}function xO(t){return"div"===t||"p"===t||"span"===t}function IO(t){const i=t.style;Nl(i,"flex"),i.flexDirection=i.webkitFlexDirection="column",i.top="auto",i.left="5%",i.width="90%",i.height="100%",i.maxHeight="100%",i.maxWidth="100%",i.overflow="visible",i.position="absolute",i.fontFamily=vO,i.color=vl.WHITE,i.background=vl.TRANSPARENT,i.textShadow=cO("uniform"),i.textAlign="start",i.writingMode="horizontal-tb",i.setProperty("-webkit-writing-mode","horizontal-tb"),i.padding="0",i.margin="0",i.fontSize="inherit",i.lineHeight="inherit"}function RO(t){const i=t.style;i.fontFamily="inherit",i.color="inherit",i.fontSize="inherit",i.lineHeight="inherit",i.textShadow="inherit"}function CO(t){let i=$L(t.getBoundingClientRect());if("visible"===getComputedStyle(t).overflow&&t.scrollHeight>t.clientHeight){const e=t.children;for(let t=0;t<e.length;t++){const s=e[t];i=i.j9($L(s.getBoundingClientRect()))}}return i}function DO(t){return dO||(dO=s.document.createElement("textarea")),dO.innerHTML=t,dO.value}function BO(t,i){let e="Data",s="";const n=[];let r=t.charAt(i.ac),h="";const o={Km:"starttag",JE:"",Utt:[]};for(;i.ac<t.length+1;){switch(r=i.ac<t.length?t.charAt(i.ac):"EOF",e){case"Data":switch(r){case"&":const n=t.substring(i.ac).match(/&#?[0-9a-zA-Z]+;/);n?(s+=DO(n[0]),i.Ny(n[0].length-1)):s+="&";break;case"<":if(s)return{Km:"string",U:s};e="Tag";break;case"EOF":return{Km:"string",U:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":e="StartTagAnnotation";break;case".":e="StartTagClass";break;case"/":e="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,e="TimestampTag";break;case">":return i.Ny(1),o;case"EOF":return o;default:s=r,e="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":e="StartTagAnnotation";break;case"\n":h=r,e="StartTagAnnotation";break;case".":e="StartTagClass";break;case">":return i.Ny(1),{Km:"starttag",JE:s,Utt:[]};case"EOF":return{Km:"starttag",JE:s,Utt:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(h),h="",e="StartTagAnnotation";break;case"\n":n.push(h),h=r,e="StartTagAnnotation";break;case".":n.push(h),h="";break;case">":return i.Ny(1),n.push(h),{Km:"starttag",JE:s,Utt:n};case"EOF":return n.push(h),{Km:"starttag",JE:s,Utt:n};default:h+=r}break;case"StartTagAnnotation":switch(r){case"&":e="CharRefInAnnotation";break;case">":i.Ny(1);let t=h.trim();return t=t.replace(/\s/," "),{Km:"starttag",JE:s,Utt:n,Vtt:t};default:h+=r}break;case"CharRefInAnnotation":let a="";for(let e=i.ac;">"===t.charAt(e);e++)a+=t.charAt(e);h+=a||"&",e="StartTagAnnotation";break;case"EndTag":switch(r){case">":return i.Ny(1),{Km:"endtag",JE:s};case"EOF":return{Km:"endtag",JE:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return i.Ny(1),{Km:"timestamp",Htt:s};case"EOF":return{Km:"timestamp",Htt:s};default:s+=r}}i.Ny(1)}return o}r(),r();var NO=function(t){return t.Wtt="string",t.qtt="starttag",t.ztt="endtag",t.Gtt="timestamp",t}({});function MO(t){let i;if(t.getBoundingClientRect&&t.parentNode&&(i=t.getBoundingClientRect()),!i)return{left:0,top:0};const e=h.documentElement,n=h.body,r=e.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=i.left+o-r,u=e.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,d=i.top+c-u;return{left:_.round(a),top:_.round(d)}}function LO(t,i,e,s){if(void 0===s&&(s=0),!t||!i)return;t.style.left="0px";const n=t.getClientRects(),r=i.getClientRects();if(0===n.length||0===r.length)return;const h=n[0],o=r[0],a=h.width/2+h.left;OO(t,o.width/2+o.left-a,e,s)}function OO(t,i,e,s){void 0===s&&(s=0),UO(t,i,"left","right",e,s)}function FO(t,i,e,s){void 0===s&&(s=0),UO(t,i,"top","bottom",e,s)}function UO(t,i,e,s,n,r){void 0===r&&(r=0);const h=t.getClientRects();if(n&&h.length>0){const t=h[0];i=ur(i,n[e]+r-t[e],n[s]-r-t[s])}t.style[e]=i+"px"}function Xu(t,i){void 0===t.textContent?t.innerText=i:t.textContent=i}r();var VO={$J:vl.WHITE,ZJ:"sans-serif",tZ:"100%",iZ:"rgba(0,0,0,0.8)",eZ:vl.TRANSPARENT,sZ:"none",nZ:void 0,rZ:void 0,hZ:void 0,oZ:void 0},HO="theoplayer-webvtt-region-",WO="theoplayer-webvtt-styling-",qO="theoplayer-webvtt-default-style",zO=5.23,GO=class extends YL{Btt(t){const i=h.createElement("div");i.className="theoplayer-webvtt-texttrack-"+t,oa(i),i.style.overflow="hidden",i.style.pointerEvents="none";const e=this.J9.ZJ;return e&&(i.style.fontFamily=e),i.style.whiteSpace="pre-line",i}VY(){this.$W.appendChild(this.Xtt),super.VY()}oe(t,i){const e=_.min(t/100,i/100),s=QL(this.J9);this.jtt.forEach(t=>{let{DO:i,Qtt:n}=t;this.Ktt(n,e,s,i)}),this.Ktt(this.Xtt,e,s)}ntt(t){pB(this.$W,t),super.ntt(t)}Itt(t,i,e){const s=this.$W,n=this.Wu.Iu/100,r=[];for(const i of t)void 0!==i.DO&&(pi(r,i.DO)||r.push(i.DO));this.jtt.forEach((t,i)=>{let{DO:s,Qtt:n}=t;!e&&pi(r,s)||(os(n),this.jtt.delete(i))});for(const t of i)!e&&t.ro||this.Q9(t);const h=[],o=$L(this.Xtt.getBoundingClientRect());h.push(...this.Ctt(o));for(const t of r){let i;this.jtt.has(t.o)?i=this.jtt.get(t.o).Qtt:(i=ZO(t,n),s.appendChild(i),this.jtt.set(t.o,{DO:t,Qtt:i})),h.push($L(i.getBoundingClientRect()))}t.sort(eF);for(const i of t){const t=this.Ott(i,h,o);void 0!==t&&h.push(t.X9(.1))}}Ott(t,i,e){var s;let n;t.DO?(n=this.jtt.get(t.DO.o).Qtt,"up"===t.DO.JO&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.Xtt;let r=null==(s=this.K9(t))?void 0:s[0];if(r||(r=this.Ytt(t),this.Rtt(t,[r])),n.appendChild(r),t.DO||(XO(r,t),t.BO?function(t,i,e,s){const n=$O(t),r=n?e.Mi:e.Ti;let h=C(getComputedStyle(i).lineHeight);if(0===h||S(h))return;const o=$L(i.getBoundingClientRect());let a=_.round(vE(t));"rl"===t.Pt&&(a=-(a+1));let u=h*a;"rl"===t.Pt&&(u=u-o.Ti+h);a<0&&(u+=r,h=-h);n?o.z9+=u:o.W9+=u;const c=o.Ly();let d=!1;for(;!e.fO(o)||ZL(o,s);)if(n)if(h<0&&o.z9<e.z9||h>0&&o.q9>e.q9){if(o.z9=c.z9,d)break;h=-h,d=!0}else o.z9+=h;else if(h<0&&o.W9<e.W9||h>0&&o.H9>e.H9){if(o.W9=c.W9,d)break;h=-h,d=!0}else o.W9+=h;n?i.style.top=(o.z9-e.z9)/e.Mi*100+"%":i.style.left=(o.W9-e.W9)/e.Ti*100+"%"}(t,r,e,i):function(t,i,e,s){const n=$L(i.getBoundingClientRect());if(0===n.Ti||0===n.Mi)return;$O(t)?"center"===t.RO?n.z9-=n.Mi/2:"end"===t.RO&&(n.z9-=n.Mi):"center"===t.RO?n.W9-=n.Ti/2:"end"===t.RO&&(n.W9-=n.Ti);let r;r=""===t.Pt?[A.POS_Y,A.NEG_Y,A.POS_X,A.NEG_X]:"lr"===t.Pt?[A.POS_X,A.NEG_X,A.POS_Y,A.NEG_Y]:[A.NEG_X,A.POS_X,A.POS_Y,A.NEG_Y];JL(n,i,r,e,s)}(t,r,e,i)),!t.DO)return $L(r.getBoundingClientRect())}Ytt(t){const i=new Ui,e=t.U,s=this.Jtt(t),n={Ztt:void 0,xe:s};let r=n,o="",a="";const u=[n],c=[],d=[];for(;i.ac<e.length;){const t=BO(e,i);if(t.Km===NO.Wtt){const i=h.createElement("span");Xu(i,t.U),jO(i,u),""!==o&&(i.lang=o),this.$tt(i,a),r.xe.appendChild(i)}else if(t.Km===NO.qtt){const i=t.JE.toLowerCase();switch(i){case"i":case"b":case"u":case"ruby":{const e=h.createElement(i);r.xe.appendChild(e),r={Ztt:t,xe:e},u.push(r);break}case"rt":var l;if("ruby"===(null==(l=r.Ztt)?void 0:l.JE.toLowerCase())){const i=h.createElement("rt");r.xe.appendChild(i),r={Ztt:t,xe:i},u.push(r)}break;case"c":case"v":r={Ztt:t,xe:r.xe},u.push(r);break;case"font":{var f;const i=null==(f=t.Vtt)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);i&&(a=i[1],d.push(a),r={Ztt:t,xe:r.xe},u.push(r));break}case"lang":var v;o=null!=(v=t.Vtt)?v:"",c.push(o)}}else if(t.Km===NO.ztt){var _;const i=t.JE.toLowerCase(),e=null==(_=r.Ztt)?void 0:_.JE.toLowerCase();e===i?(u.pop(),r=u[u.length-1],"font"===i&&(d.pop(),a=d.length>0?d[d.length-1]:"")):"rt"===e&&"ruby"===i?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===i&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.Km===NO.Gtt){const i=t.Htt,e=new Ui;try{ZE(i,e)}catch(t){Pv("ERROR collecting timestamp",t)}}}return s}$tt(t,i){const e=this.J9,s=this.ttt;e.iZ&&(t.style.background=e.iZ);const n=s.$J||i||e.$J;n&&(t.style.color=n)}Ktt(t,i,e,s){if(s){const n=QO(s,i);t.style.height=n*e+"px",t.style.left=KO(s)+"%",t.style.top=YO(s,i)+"px"}t.style.fontSize=zO*i*e+"px"}Jtt(t){const i=h.createElement("div");i.style.position="absolute",i.style.margin="0",i.style.padding="0",i.style.unicodeBidi="plaintext",i.style.wordWrap="break-word",i.style.overflowWrap="break-word",i.style.width="auto",i.style.textAlign=t.xO,function(t,i){"rl"===i.Pt?t.style.writingMode="vertical-rl":"lr"===i.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(i,t),function(t,i){const e=pE(i);$O(i)?(t.style.width=e+"%",t.style.height="auto"):(t.style.height=e+"%",t.style.width="auto")}(i,t),XO(i,t);const e=this.J9.eZ;e&&(i.style.background=e);const s=this.J9.$J;return s&&(i.style.color=s),i.style.textShadow=cO(this.J9.sZ),i}constructor(t,i,e,s){super(t,i,e,s,VO),this.jtt=qh(),this.Xtt=JO(3),function(t){const i=function(t){const i=null==t.getRootNode?void 0:t.getRootNode.call(t);if(i&&i.host)return i}(t);var e;const s=null!=(e=null!=i?i:t.ownerDocument)?e:h;if(s.getElementById(qO))return;const n=[];for(const[t,i]of tF)n.push("."+WO+t+" { color: "+i+" !important; }"),n.push("."+WO+"bg"+iF+t+" { background-color: "+i+" !important; }"),n.push("video::cue(."+t+") { color: "+i+"; }"),n.push("video::cue(.bg"+iF+t+") { background-color: "+i+"; }");const r=h.createElement("style");r.id=qO,r.innerHTML=n.join("\n"),i?i.appendChild(r):s.body.appendChild(r)}(i)}};function XO(t,i){let e,s;const n=gE(i),r=_E(i),h=pE(i);if($O(i)){switch(n){case"line-left":e=r;break;case"center":e=r-h/2;break;case"line-right":e=r-h}s=i.BO?0:vE(i)}else{switch(n){case"line-left":s=r;break;case"center":s=r-h/2;break;case"line-right":s=r-h}e=i.BO?0:vE(i)}t.style.left=e+"%",t.style.top=s+"%"}function jO(t,i){for(const e of i)if(e.Ztt){for(const i of e.Ztt.Utt)fi(t,WO+i);"v"===e.Ztt.JE.toLowerCase()&&e.Ztt.Vtt&&fi(t,"theoplayer-webvtt-voice-"+e.Ztt.Vtt)}}function QO(t,i){return t.QO*(zO*i)*1.14}function KO(t){return t.ZO-t.KO*t.Ti/100}function YO(t,i){const e=t.$O,s=t.YO*QO(t,i)/100;return _.max(0,e-s)}function JO(t){const i=h.createElement("div");return i.className=HO+"default",oa(i),i.style.wordWrap="break-word",i.style.writingMode="horizontal-tb",i.style.pointerEvents="none",i.style.width="auto",i.style.height="auto",i.style.maxHeight="100%",i.style.minHeight="0px",i.style.padding="0",i.style.boxSizing="border-box",i.style.fontSize=zO*t+"px",i.style.lineHeight="1.14em",i}function ZO(t,i){const e=JO(i);e.className=HO+t.o;const s=t.Ti,n=QO(t,i);return e.style.width=s+"%",e.style.height=n+"px",e.style.left=KO(t)+"%",e.style.right="",e.style.top=YO(t,i)+"px",e.style.bottom="",e.style.boxSizing="border-box",e}function $O(t){return""===t.Pt}var tF=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]],iF=String.fromCharCode(95);function eF(t,i){const e=vE(t),s=vE(i),n=sF(e,t.BO),r=sF(s,i.BO);return n&&r?e-s||Sn(i,t)||i.jI-t.jI:Sn(t,i)||t.jI-i.jI}function sF(t,i){return i?t<0?t>-8:t>8:t>50}r(),r(),r();var nF=function(t){return t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics",t}({}),rF={$J:vl.WHITE,ZJ:sO.nl,tZ:"100%",iZ:vl.BLACK,eZ:"transparent",sZ:"none",tit:"regular",nZ:void 0,rZ:void 0,hZ:void 0,oZ:void 0},hF=[{iit:vl.WHITE,tit:"regular",eit:0},{iit:vl.WHITE,tit:"underline",eit:0},{iit:vl.GREEN,tit:"regular",eit:0},{iit:vl.GREEN,tit:"underline",eit:0},{iit:vl.BLUE,tit:"regular",eit:0},{iit:vl.BLUE,tit:"underline",eit:0},{iit:vl.CYAN,tit:"regular",eit:0},{iit:vl.CYAN,tit:"underline",eit:0},{iit:vl.RED,tit:"regular",eit:0},{iit:vl.RED,tit:"underline",eit:0},{iit:vl.YELLOW,tit:"regular",eit:0},{iit:vl.YELLOW,tit:"underline",eit:0},{iit:vl.MAGENTA,tit:"regular",eit:0},{iit:vl.MAGENTA,tit:"underline",eit:0},{iit:vl.WHITE,tit:"italics",eit:0},{iit:vl.WHITE,tit:"underline-italics",eit:0},{iit:vl.WHITE,tit:"regular",eit:0},{iit:vl.WHITE,tit:"underline",eit:0},{iit:vl.WHITE,tit:"regular",eit:4},{iit:vl.WHITE,tit:"underline",eit:4},{iit:vl.WHITE,tit:"regular",eit:8},{iit:vl.WHITE,tit:"underline",eit:8},{iit:vl.WHITE,tit:"regular",eit:12},{iit:vl.WHITE,tit:"underline",eit:12},{iit:vl.WHITE,tit:"regular",eit:16},{iit:vl.WHITE,tit:"underline",eit:16},{iit:vl.WHITE,tit:"regular",eit:20},{iit:vl.WHITE,tit:"underline",eit:20},{iit:vl.WHITE,tit:"regular",eit:24},{iit:vl.WHITE,tit:"underline",eit:24},{iit:vl.WHITE,tit:"regular",eit:28},{iit:vl.WHITE,tit:"underline",eit:28}],oF=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function aF(t,i){return xE(t.sit,i.sit)||tf(t.VN,i.VN)}r();var Ht=32,uF=/CC([1-4])=(.*)/;function cF(t){if(!t)return[];const i=[],e=t.trim().split(";");if(e.every(t=>t.match(uF)))for(const t of e){const[,e,s]=t.match(uF);i.push({nit:Number(e),rit:s})}else for(let t=0;t<e.length;t++)i.push({nit:t+1,rit:e[t]});return i}var dF=class t{get hit(){return this.ait.oit}get uit(){return this.ait.cit}get dit(){return this.ait.cit.eit-this.ait.oit.eit+1}get fit(){return this.ait.cit.vit-this.ait.oit.vit+1}wr(){return this._it=this.git(),this.pit(),this.mit(),this._it}git(){const t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.dit/Ht*this.yit.wit*100+"%",t.style.height=1.2*this.fit+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.yit.Ait?"calc(1em - 1ch)":"";const i=this.Z9.ZJ;i&&(t.style.fontFamily=i);const e=this.Z9.eZ;return e&&(t.style.backgroundColor=e),t}pit(){if(!this._it)return;const t=this.hit.vit/15*100;let i=this.hit.eit/Ht*100,e=(Ht-this.uit.eit-1)/Ht*100;const s=(15-this.uit.vit-1)/15*100;this.yit.Sit||(i=e=1,this._it.style.width="98%"),s<t?this._it.style.bottom=s*this.yit.wit+"%":this._it.style.top=t*this.yit.wit+"%",e<i?this._it.style.right=e+"%":this._it.style.left=i+"%"}mit(){const t=this.ait.Tit.sort(lF);for(let i=0;i<t.length;i++)this.kit(t[i-1],t[i]),this.Eit(t[i]);this.kit(t[t.length-1],void 0)}Eit(i){var e;const s=jL(this.Z9,i.Pit),n=t.xit(s);Xu(n,i.Iit),null==(e=this._it)||e.appendChild(n)}static xit(t){const i=h.createElement("span");i.style.display="inline-block",t.tit!==nF.FONT_ITALICS&&t.tit!==nF.FONT_UNDERLINE_ITALICS||(i.style.fontStyle="italic"),t.tit!==nF.FONT_UNDERLINE&&t.tit!==nF.FONT_UNDERLINE_ITALICS||(i.style.textDecoration="underline");const e=t.$J;e&&(i.style.color=e);const s=t.iZ;return s&&(i.style.backgroundColor=s),i.style.textShadow=cO(t.sZ),i.style.height="1.2em",i}kit(t,i){const e=t?t.cit.vit:this.ait.oit.vit,s=i?i.oit.vit:this.ait.cit.vit;let n=t?t.cit.eit:this.ait.oit.eit;const r=i?i.oit.eit:this.ait.cit.eit;e<s&&(!i||t&&t.oit.vit!==i.oit.vit?this.Rit():this.Cit(this.ait.cit.eit-n),n=this.ait.oit.eit),n<r&&(i?this.Cit(r-n):this.Rit())}Rit(){var t;const i=h.createElement("br");null==(t=this._it)||t.appendChild(i)}Cit(t){var i;if(t<=0)return;const e=h.createElement("span");e.style.display="inline-block",Xu(e,hp(" ",t)),null==(i=this._it)||i.appendChild(e)}constructor(t,i,e){this.ait=void 0,this.yit=void 0,this.Z9=void 0,this._it=void 0,this.ait=t,this.yit=i,this.Z9=e}};function lF(t,i){return function(t,i){if(t.vit!==i.vit)return t.vit-i.vit;return t.eit-i.eit}(t.oit,i.oit)}var fF=class extends YL{Btt(t){const i=h.createElement("div");return i.className="theoplayer-cea608-texttrack-"+t,i.style.position="absolute",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top="10%",i.style.bottom="10%",this.J9.ZJ&&(i.style.fontFamily=this.J9.ZJ),i}oe(t,i){this.Ml()}Ml(){const t=QL(this.J9);this.Dit=function(t){return{wit:t/100,Ait:t<=100,Sit:t<=150}}(100*t);const i=this.Bit/Ht;this.Nit=i*t,this.$W.style.fontSize=this.Nit+"px"}get Bit(){let t=this.$W.offsetWidth;return this.Dit&&this.Dit.Sit||(t*=.8),t}Itt(t,i,e){for(const t of i)!e&&t.ro||this.Q9(t);for(const i of t)this.Ott(i)}Ott(t){this.Dit&&this.Dit.Sit?this.Mit(80):this.Mit(100),this.Ml();let i=this.K9(t);i||(i=this.Ftt(t),this.Rtt(t,i));for(const t of i)this.$W.appendChild(t)}Ftt(t){return t.U.map(t=>new dF(t,this.Dit,this.J9).wr())}Mit(t){const i=(100-t)/2;this.$W.style.left=i+"%",this.$W.style.width=t+"%"}constructor(t,i,e,s){super(t,i,e,s,rF),this.Nit=void 0,this.Dit=void 0}},vF=class t{Lit(t){for(const i of this.Oit)if(i.Ht===t)return i}static Fit(t){switch(t.Km){case nh.TTML:case nh.SRT:case nh.WEBVTT:case nh.CEA608:return!0}return!1}Uit(t){switch(t.Km){case nh.TTML:return new mO(t,this.Vit,t.Th,this.sc);case nh.SRT:case nh.WEBVTT:return new GO(t,this.Vit,t.Th,this.sc);case nh.CEA608:return new fF(t,this.Vit,t.Th,this.sc)}}Hit(t){let i=this.Lit(t);i||(i=this.Uit(t),i&&(i.VY(),i.ntt(this.Dz),this.Oit.push(i),t.Xk===xh.Kn&&i.Ttt()))}Wit(t){const i=this.Oit;for(let e=i.length-1;e>=0;e-=1){const s=i[e];s.Ht===t&&(s.kn(),ka(i,e))}}qit(i){qP(i.Lt)&&t.Fit(i)&&(i.Ax===Zu.ERROR?this.Wit(i):this.Hit(i))}get n6(){return this.zit.ds||this.ea.XL}hr(){for(const t of this.Oit)t.Ht.mn(Te.wI,this.Git),t.Ht.mn(Te.AI,this.Git),t.kn();Yo(this.Oit)}kn(){this.hr();for(const t of this.Oit)t.kn();this.Gl.mn(Vt.eI,this.Xit),this.Gl.mn(Vt.nI,this.jit),this.Gl.mn(Te.pa,this.Git),this.zit.mn(Gi.pa,this.Qit),this.ea.mn([re.zL,re.GL],this.Qit),this.Dz.mn("mI",this.Kit)}constructor(t,i,e,s,n,r){this.Vit=void 0,this.sc=void 0,this.Gl=void 0,this.zit=void 0,this.ea=void 0,this.Oit=[],this.Dz=void 0,this.Xit=t=>{const i=t.Ht;i.wn(Te.wI,this.Git),i.wn(Te.AI,this.Git),i instanceof uL&&(i.n6=this.n6),this.qit(i)},this.Git=t=>{const i=t.Ht;this.qit(i)},this.jit=t=>{const i=t.Ht;i.mn(Te.wI,this.Git),i.mn(Te.AI,this.Git),this.Wit(i)},this.Qit=()=>{const t=this.n6;for(const i of this.Gl.II)i instanceof uL&&(i.n6=t)},this.Kit=()=>{for(const t of this.Oit)t.ntt(this.Dz)},this.Vit=t,this.sc=i,this.Gl=e,this.zit=n,this.ea=r,this.Dz=s,this.Gl.wn(Vt.eI,this.Xit),this.Gl.wn(Vt.nI,this.jit),this.Gl.wn(Te.pa,this.Git),this.zit.wn(Gi.pa,this.Qit),this.ea.wn([re.zL,re.GL],this.Qit),this.Dz.wn("mI",this.Kit),this.Qit()}};r();var _F=class extends Ne{get jL(){var t;return null!=(t=this.Yit.ownerDocument.pictureInPictureEnabled)&&t}get XL(){return this.Jit}async yo(){if(this.jL){if(!this.XL){const t=this.ww([re.zL,re.ma]);await this.Yit.requestPictureInPicture(),await t,this.Jit||this.So(new oR)}}else this.So(new oR)}async jo(){if(this.jL){if(this.Jit){const t=this.ww([re.GL,re.ma]);await this.Yit.ownerDocument.exitPictureInPicture(),await t,this.Jit&&this.So(new oR)}}else this.So(new oR)}kn(){this.Vo(),this.Yit.removeEventListener("enterpictureinpicture",this.Zit),this.Yit.removeEventListener("leavepictureinpicture",this.$it)}constructor(t){super(),this.Yit=void 0,this.Jit=!1,this.Zit=()=>{this.Jit=!0,this.So(new Tk)},this.$it=()=>{this.Jit=!1,this.So(new kk)},this.Yit=t,this.Yit.addEventListener("enterpictureinpicture",this.Zit),this.Yit.addEventListener("leavepictureinpicture",this.$it)}};function gF(t){const i=new vD,e=function(t){const i=[];return lD.la(t)&&i.push(new lD(t)),fD.la(t)&&i.push(new fD(t)),i}(t);if(e.length>0){for(const t of e)i.AK(t);i.yK(e[0])}return i}var pF=class extends FL{get $W(){return this._T}get Rx(){return this._T.videoHeight}get Bx(){return this._T.videoWidth}get Ma(){return this.tet}get mq(){return this.iet}Wx(){return this._T}async zg(){this.iet.kn(),this.tet.kn(),this.eet.kn(),this.net.kn(),await super.zg()}we(){super.we(),this.eet.we()}be(){super.be(),this.eet.be()}B9(t){super.B9(t),this.eet.B9(t)}constructor(t,i,e,s,n){super(t,i,e,s,n),this.eet=void 0,this.net=void 0,this.tet=void 0,this.iet=void 0,this.tet=gF(t),this.iet=new _F(t),this.eet=new XL,this.net=new vF(this.eet.xe,this.Wu,this.nt,this.Ql,this.Ma,this.mq)}};r(),r();r(),r();var mF=function(t){return t.ret="HELLO",t.het="HI_THERE",t.oet="INITIALIZE",t.aet="APPEND_INIT",t.uet="APPEND_DATA",t.cet="ACK",t.det="REMOVE",t.let="DESTROY_SESSION",t}({}),wF=class{fet(t){return this.ta.Zo(async t=>{ii(t);const i=new MessageChannel,e=i.port1,s=i.port2;od.serviceWorker.controller||await Lb(od.serviceWorker,"install",t),"activated"!==od.serviceWorker.controller.state&&await Lb(od.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};od.serviceWorker.controller.postMessage(n,[s]),e.start(),this.im=e;try{const i=await Lb(e,"message",t),s=i.data;if("HI_THERE"!==s.kind)throw new m("Could not set up message channel");this.mT=s.sessionId}catch(t){throw D(t)&&this.vet(),t}},t)}_et(t,i){return this.im,this.ta.Zo(async()=>{if(!this.im)throw new m("MessageSession not set up yet or already closed.");i||(i=[]),this.im.postMessage(t,i);const e=await Lb(this.im,"message");return e.data})}pet(){return this.ta.Zo(()=>this.vet())}vet(){if(!od.serviceWorker.controller)return;if("activated"!==od.serviceWorker.controller.state)return;if(!this.im)return;const t={kind:"DESTROY_SESSION"};this.im.postMessage(t),this.im.close(),this.im=void 0}constructor(){this.im=void 0,this.mT=void 0,this.ta=new te}};r();var yF=class{get met(){return this.wet}yet(t,i){const e=t-i;this.wet=e>this.met?this.wet:e}Aet(t){this.wet=t}constructor(){this.wet=1/0}};r(),r(),r();var On=function(t){return t.Dk="audio",t.Bk="video",t.VU="metadata",t}({}),AF=class extends Ne{get IP(){return void 0===this.bet||void 0===this.Tet?ve.iL():new ve([this.bet,this.Tet])}get Cd(){return{qT:this.SQ}}get B3(){return I(this.SQ)?Ci.Dk:tt(this.SQ)?Ci.Bk:Ci.pk}get oQ(){return this.SQ}get M3(){return ve.iL()}get MY(){return 30}set MY(t){}get UY(){return 30}set UY(t){}F3(t,i){}U3(t,i){}WZ(){return this.ket}get ga(){return this.Eet}get Pet(){return this.bet}get PO(){return this.Tet}async V3(){}async r3(t,i){}async H2(t,i,e){if(t.Km!==Po.vZ)throw new m("Streaming or opaque segments are not supported yet.");const s=t.ck,n=async()=>{const t=s.buffer,e={kind:mF.uet,mediaType:bF(this.SQ),segment:s,startPts:i.xet,totalDuration:i.ct};if(await this.Iet._et(e,[t]),void 0===this.bet){const t=i.xet+i.bU;this.bet=t,this.Tet=t}this.Tet=this.Tet+i.ct,this.So(new wp(Zs.lZ))};return this.ta.Zo(async t=>{ii(t);try{this.Eet=!0,await n()}finally{this.Eet=!1}},e)}async z2(t,i,e){if(t.Km!==Po.vZ)throw new m("Streaming or opaque initialization segments are not supported yet.");const s=t.ck,n=async()=>{const t={kind:mF.aet,mediaType:bF(this.SQ),segment:s};await this.Iet._et(t,[])};return this.ta.Zo(async t=>{ii(t);try{this.Eet=!0,await n()}finally{this.Eet=!1}},e)}C3(){this.ket=!0}A3(){this.ket=!1}async _S(t,i,e){const s=async()=>{const t={kind:mF.det,mediaType:bF(this.SQ),endTime:i};await this.Iet._et(t),this.bet=void 0,this.Tet=void 0,this.So(new wp(Zs.lZ))};return this.ta.Zo(async t=>{ii(t);try{this.Eet=!0,await s()}finally{this.Eet=!1}},e)}TZ(t){return this.SQ===t.qT}EZ(t){return this.SQ=t.qT,Promise.resolve()}async zg(){this.Vo(),await this.ta.kn()}constructor(t,i){super(),this.SQ=void 0,this.Iet=void 0,this.bet=void 0,this.Tet=void 0,this.ta=void 0,this.Eet=void 0,this.ket=void 0,this.SQ=t,this.Iet=i,this.bet=void 0,this.Tet=void 0,this.ta=new te,this.Eet=!1,this.ket=!1}};function bF(t){return t.match(/video/)?On.Bk:On.Dk}var SF=class t{static Ret(i,e,s,n){const r=[];for(let t=0;t<i.L4.length;t++){const s=i.L4[t].qT;r.push(new AF(s,e))}return new t(i,r,s,n)}Cet(){}get Det(){return[this.P4,this.x4].filter(it)}get Q3(){return this.P4}get IP(){return CN(this)}get Cd(){return this.YS}get ct(){return 0}get WZ(){var t,i,e;const s=null==(e=null==(t=this.P4)?void 0:t.WZ())||e;var n;const r=null==(n=null==(i=this.x4)?void 0:i.WZ())||n;return s&&r}get Sx(){return ve.eL()}get K3(){return this.x4}async zg(){await Promise.all([this.P4,this.x4].filter(it).map(t=>t.zg()))}C4(t){}M4(t,i,e,s){}C3(){var t,i;null==(t=this.P4)||t.C3(),null==(i=this.x4)||i.C3()}A3(){var t,i;null==(t=this.P4)||t.A3(),null==(i=this.x4)||i.A3()}TZ(t){return!!BL(this,t)}EZ(t){return this.YS=t,Promise.resolve()}xZ(t){}async bZ(t,i){const e=await this.hw.nw(t.Ym,i),s=await e.IS();return await this.SZ(s),s}async SZ(t){if(t&&!this._T.src)throw new fs(Vo.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this._T.src)throw new fs(Vo.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const i=this.TS;i&&(await i.PS(this._T),this.TS=void 0),t&&(await t._n(this._T),this.TS=t)}constructor(t,i,e,s){this.YS=void 0,this.hw=void 0,this._T=void 0,this.P4=void 0,this.x4=void 0,this.TS=void 0,this.YS=t,this.x4=Jr(i,t=>Boolean(t.oQ.match(/video/))),this.P4=Jr(i,t=>Boolean(t.oQ.match(/audio/))),this.hw=e,this._T=s,this.Cet()}},TF=class extends Ne{Bet(){this.Yit.addEventListener("timeupdate",this.Net),this.Yit.addEventListener("ended",this.Met),this.Yit.addEventListener("timeupdate",this.Let),this.Yit.addEventListener("ratechange",this.Oet),this.Yit.addEventListener("volumechange",this.Fet),this.Yit.addEventListener("durationchange",this.Uet),this.Yit.addEventListener("playing",this.Vet),this.Yit.addEventListener("seeking",this.Het),this.Yit.addEventListener("play",this.Wet),this.Yit.addEventListener("pause",this.qet),this.Yit.addEventListener("encrypted",this.S9)}zet(){this.Yit.removeEventListener("timeupdate",this.Net),this.Yit.removeEventListener("ended",this.Met),this.Yit.removeEventListener("timeupdate",this.Let),this.Yit.removeEventListener("ratechange",this.Oet),this.Yit.removeEventListener("volumechange",this.Fet),this.Yit.removeEventListener("durationchange",this.Uet),this.Yit.removeEventListener("playing",this.Vet),this.Yit.removeEventListener("seeking",this.Het),this.Yit.removeEventListener("play",this.Wet),this.Yit.removeEventListener("pause",this.qet)}Get(){this.Q8.wn(Do.wI,this.Rs)}Xet(){this.Q8.mn(Do.wI,this.Rs)}get $W(){return this.Yit}get n5(){return!1}get MP(){return this.Yit.currentTime+this.jet.met}get hx(){return this.Yit.paused}get Mx(){return this.Yit.volume}set Mx(t){this.Yit.volume=t}get ux(){return this.Yit.playbackRate}set ux(t){this.Yit.playbackRate=t}get Qet(){return this.Yit.defaultPlaybackRate}get IP(){var t,i;return null!=(i=null==(t=this.iq)?void 0:t.IP)?i:ve.iL()}get Ket(){return ve.jn(this.Yit.buffered)}get _x(){const t=this.Yet;return this.Ho.OM(t.Ny(this.jet.met))}get Yet(){return ve.jn(this.Yit.played)}get kx(){return this.Sz}get Y4(){return!1}get a5(){return!1}get ct(){return this.Yit.duration}get $P(){return this.Yit.muted}set $P(t){this.Yit.muted=t}get Pit(){return this.Yit.style}get CL(){return Mo({},wB,{RL:!0})}My(t,i,e){this.m7.Zg(),this.m7=new at,this.w7=$e(this.y7(t,this.w7,this.m7.Yg),this.m7).catch(Ct)}async y7(t,i,e){var s;this.Ho=this._x;const n=null==(s=this.iq)?void 0:s.Det;if(!n)return;const r=_.max(...n.map(t=>t.Pet?t.Pet:1/0));this.Sz=!0,this.So(new F(t)),await i.catch(Ct),ii(e);try{for(this.Jet||this.Zet(),this.Yit.load(),this.$et||(this.tst=!1,await Nc(this.Yit.play(),e));this.Ax<mh.HL;)await this.Q8.ww(Do.wI,e);this.ist.Xy(),this.Jet=!1,this.Sz=!1,this.So(new Es(this.MP))}catch(t){throw this.ist.jy(t),t}finally{this.sst(),this.jet.Aet(r)}}zx(){this.$et=!0,this.Yit.pause()}async Gx(){this.$et&&(this.Yit.src||this.D9(),await this.ist.Qy,await this.Yit.play())}async zg(){this.Iet&&this.Iet.pet().catch(Ct),this.m7.Zg(),this.zet(),this.Xet(),this.Q8.zg(),this.Vo(),this.Gl.kn(),this.eet.kn(),this.net.kn()}async hr(){this.Iet&&this.Iet.pet().catch(Ct),this.m7.Zg(),this.Yit.removeAttribute("src"),this.Yit.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.Yit.removeAttribute("x-airplay-deny"),this.Yit.disableRemotePlayback=!1,this.Yit.load(),this.Q8.hr(),this.Ho=ve.iL()}async C8(){throw new g("Not supported")}D9(){this.R9||(Cf(this.Yit,zd.Zs),this.C9=!0)}get Ax(){return this.Q8.Ax}Zet(){const t=this.Yit.getClientRects();let i;if(!(t.length>0))return;i=t[0];const e=i.width,s=this.Yit.videoWidth/this.Yit.videoHeight,n=i.height;let r,h;e/n>s?(r=n*s,h=n):(h=e/s,r=e),this.Yit.style.width=r+"px",this.Yit.style.height=h+"px",this.Yit.style.marginLeft=(e-r)/2+"px",this.Yit.style.marginTop=(n-h)/2+"px",this.Yit.style.backgroundColor="black"}sst(){this.Yit.style.width="100%",this.Yit.style.height="100%",this.Yit.style.marginLeft="",this.Yit.style.marginTop="",this.Yit.style.backgroundColor=""}get Rx(){return this.Yit.videoHeight}get Bx(){return this.Yit.videoWidth}get UP(){return this.Yit.ended}get Mi(){return this.Yit.offsetHeight*zd.Zs.fp}get Ti(){return this.Yit.offsetWidth*zd.Zs.fp}get KP(){return!1}get R9(){return this.C9}get CP(){}get Wu(){return this.nst}get lt(){}get Ma(){return this.tet}get mq(){return this.ea}get Sx(){return this.iq?this.iq.Sx:ve.iL()}get nq(){}get nt(){return this.Gl}get Ql(){return this.Dz}get Vx(){return!1}set Vx(t){}gq(t,i,e,s,n){}tI(t,i,e,s,n,r,h,o,a){const u=new gM(t,i,e,s,n,r,h,a,o);return this.Gl.tt(u),this.N7.tt(u),u}wq(t){throw m("Not supported.")}QZ(t){}ZP(){return tB(this.Yit)}get i7(){return"block"===this.Yit.style.display}be(){this.Yit.style.display="block",this.eet.be()}we(){this.Yit.style.display="none",this.eet.we()}x9(){}async Un(t){if(t.Km===Zr.mV)throw new m("Not yet implemented");await this.Iet.fet();const i=Jr(t.aq,t=>t.kS.Km===an.jm),e={kind:mF.oet,mediaBufferConfigs:t.L4.map(t=>t.qT),fairPlaySdkUri:null==i?void 0:i.HH};return await this.Iet._et(e),this.iq=SF.Ret(t,this.Iet,this.hw,this.Yit),this.PZ.Un(this.iq,t),this.Yit.setAttribute("x-webkit-airplay","deny"),this.Yit.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.Yit.disableRemotePlayback=!0,this.Yit.preload="none",this.Yit.src="https://theo.proxy/"+this.Iet.mT+"/master.m3u8",this.iq}I9(){}iV(t){this.Gl.it(t),this.N7.it(t)}Aq(){for(const t of this.Gl.II.slice())t.kn();this.Gl.hr()}KW(t){}vq(){return!1}B9(t){t.appendChild(this.Yit),this.eet.B9(t)}Wx(){return this.Yit}get Eq(){return this.PZ.Eq}set Eq(t){this.PZ.Eq=t}get N9(){}set N9(t){}get p8(){}Yx(){}constructor(t,i,e,s){super(),this.Jet=!0,this.Iet=new wF,this.jet=new yF,this.iq=void 0,this.Q8=void 0,this.$et=!0,this.ist=new pa,this.Sz=!1,this.w7=Promise.resolve(),this.m7=new at,this.tst=!0,this.Ho=ve.iL(),this.tet=void 0,this.ea=void 0,this.Yit=void 0,this.C9=!1,this.PZ=void 0,this.hw=void 0,this.Gl=void 0,this.N7=void 0,this.eet=void 0,this.net=void 0,this.nst=void 0,this.Dz=void 0,this.Net=()=>{this.hx||this.Ket.V<=0||this.IP.V<=0||this.jet.yet(this.IP.An(this.IP.V-1),this.Ket.An(this.Ket.V-1))},this.Met=()=>{this.So(new At(this.MP))},this.Let=()=>{this.So(new Si(this.MP,this.CP))},this.Oet=()=>{this.So(new aa(this.MP,this.ux))},this.Fet=()=>{this.So(new Ze(this.MP,this.Mx))},this.Uet=()=>{this.So(new Rs(this.ct))},this.Vet=()=>{this.So(new ce(this.MP))},this.Het=()=>{this.My(this.MP)},this.Wet=async()=>{this.tst&&this.So(new Tc(this.MP)),this.$et=!1,this.tst=!0},this.qet=()=>{this.$et=!0,this.So(new hl(this.MP))},this.S9=t=>{const i=t.initDataType;var e;const s=null!=(e=t.initData)?e:new ArrayBuffer(0);this.So(new Tp(i,s))},this.Yit=t,this.Q8=new YN(this),this.nst=e,this.Dz=s,this.Yit.playsInline=!0,this.Yit.style.width="100%",this.Yit.style.height="100%",this.Bet(),this.Get(),this.tet=gF(this.Yit),this.ea=new _F(this.Yit),this.PZ=new PL(this),this.hw=i,this.Gl=new cc,this.N7=new hu(this),this.eet=new XL,this.net=new vF(this.eet.xe,this.Wu,this.nt,this.Ql,this.Ma,this.mq)}},kF=[Ci.Dk,Ci.Bk],EF=class{get Bz(){const t=[];for(const i of this.rst){const e=this.hst.get(i);if(e){const i=e.map(t=>t.ost);t.push(...i)}}return this.ast&&t.push(this.ast),t}ust(t){for(const i of this.Bz)i.B9(t)}Gq(t){const i=this.hst.get(t);if(!i)return;const e=Jr(i,t=>t.cst);return e?(e.cst=!1,e.ost):void 0}dst(t){if(!this.ast){var i;const t=null==(i=this.hst.get(Ci.Bk))?void 0:i[0].ost.$W;if(!t)throw new m("Error creating iOS Safari MediaController");this.ast=new TF(t,this.hw,this.sc,this.Dz),t.parentElement&&this.ast.B9(t.parentElement)}return this.ast}async Pq(t){const i=t.$W,e=i.tagName.toLowerCase();await t.hr(),Rf(i);const s=Jr(this.hst.get(e)||[],i=>t===i.ost);s&&(s.cst=!0)}xz(){for(const t of this.Bz)t.D9()}kn(){for(const t of this.Bz){const i=t.$W;t.zg(),If(i),os(i)}this.hst.clear(),this.ast=void 0}lst(){for(const t of this.rst){const i=[];this.hst.set(t,i);for(let e=0;e<this.fst;e++){const e=xf(t),s=t===Ci.Dk?new GL(e,this.hw,this.sc,this.VJ):new pF(e,this.hw,this.sc,this.Dz,this.VJ);i.push({ost:s,cst:!0})}}}constructor(t,i,e,s=2,n=kF,r=RA()){this.fst=void 0,this.rst=void 0,this.hw=void 0,this.hst=void 0,this.sc=void 0,this.Dz=void 0,this.VJ=void 0,this.ast=void 0,this.fst=s,this.rst=[...n],this.hw=r,this.sc=t,this.Dz=i,this.VJ=e,this.hst=qh(),this.lst()}};r(),r();var PF=class{lk(t){return this.nV.lk(t)}Kk(t){this.nV.Kk(t)}kn(){this.nV.kn()}constructor(t){this.nV=void 0,this.nV=t}},xF=class extends PF{lk(t){const i=new $n(t),e=this.Rz.kY.PW(i);return e?this.vst(i,e):this.nV.lk(i)}async vst(t,i){i.PY(zd.Mg()/1e3);const e=await this.nV.lk(t);let s;i.xY(zd.Mg()/1e3),s=e.QT?e.WT().pipeThrough(new Ta(new IF(i))):e.HT().then(t=>{const e=zd.Mg()/1e3;return i.IY(e,new j(t)),i.RY(e),t});const n={ck:s,lk:e.lk};return new sc(n,e)}constructor(t,i){super(t),this.Rz=void 0,this.Rz=i}},IF=class{start(t){this.YJ=t}transform(t){this._st.IY(zd.Mg()/1e3,t),this.YJ.enqueue(t)}flush(){this._st.RY(zd.Mg()/1e3)}constructor(t){this._st=void 0,this.YJ=void 0,this._st=t}};function RF(t){return{get ratio(){return t.qo},get thresholds(){return t.gst.slice()}}}function CF(t){const i=[],e=_.floor(1/t);if(S(e))return[];for(let s=0;s<=e;s++){const e=ur(s*t,0,1);i.push(e)}return i}r(),r(),r();var DF=class{get qo(){return this.pst}get gst(){return this.mst}wst(t){return i=>{const e=i[i.length-1];this.pst=e.intersectionRatio,t(e.intersectionRatio)}}get Ca(){return this.hu||(this.hu=RF(this)),this.hu}Xx(){this.yst.disconnect()}constructor(t,i,e){this.pst=1,this.mst=void 0,this.yst=void 0,this.hu=void 0,this.mst=CF(i);const n=this.wst(e);this.yst=new s.IntersectionObserver(n,{root:null,threshold:this.mst}),this.yst.observe(t)}},BF=class{get qo(){return this.pst}get gst(){return this.mst}get Ca(){return this.hu||(this.hu=RF(this)),this.hu}Ast(t){this.pst=t;const i=this.mst;let e=0;if(t>0)for(;e<i.length&&i[e]<=t;)++e;this.bst!==e&&(this.bst=e,this.Sst(t))}constructor(t,i){this.mst=void 0,this.Sst=void 0,this.pst=1,this.bst=-1,this.hu=void 0,this.mst=CF(t),this.Sst=i}},NF=class extends BF{Tst(){const t=this.bo.getBoundingClientRect();return ur(_.max(0,_.min(s.innerWidth,t.right)-_.max(0,t.left))*_.max(0,_.min(s.innerHeight,t.bottom)-_.max(0,t.top))/(t.width*t.height),0,1)}Xx(){s.removeEventListener("scroll",this.kst)}constructor(t,i,e){super(i,e),this.bo=void 0,this.kst=ph(()=>this.Ast(this.Tst()),50),this.bo=t,s.addEventListener("scroll",this.kst,!!nD&&{passive:!0}),ct(()=>this.Ast(this.Tst()))}},MF=.1,LF=class{get Est(){return this.Pst}get Lo(){return this.xst}set Lo(t){if(S(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.xst=t}get Ca(){return this.hu||(this.hu=function(t){return{get ratio(){return t.Est},get visible(){return t.Est>t.Lo},get visibleThreshold(){return t.Lo},set visibleThreshold(i){i=co(i),t.Lo=i},addObserver:(i,e)=>(i=co(i),t.Do(i,e).Ca),removeObserver(i){const e=t.Ist(i);e&&t.Uo(e)}}}(this)),this.hu}Rst(t){return i=>{this.Pst=i,null==t||t(this.Pst)}}Do(t,i){if(S(t))throw new g("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let e;return e="function"==typeof s.IntersectionObserver?new DF(this.bo,t,this.Rst(i)):new NF(this.bo,t,this.Rst(i)),this.Cst.push(e),e}Uo(t){t.Xx(),oi(this.Cst,t)}Ist(t){for(const i of this.Cst)if(i.Ca===t)return i}kn(){for(const t of this.Cst)t.Xx();Yo(this.Cst)}constructor(t){this.bo=void 0,this.Pst=1,this.xst=0,this.Cst=[],this.hu=void 0,this.bo=t,this.Do(.1,this.Rst())}};r();var OF=class extends wp{constructor(){super(d.Iw)}},FF=class extends _o{get Dst(){return this.Rz}get cO(){return this.Bst}set cO(t){this.Bst=t,this.Pa.cO=t}get Nst(){return this.Mst}get ht(){return this.Pa.ht}get VX(){return this.Lst}get Wu(){return this.Ost}get zP(){return this.Pa.zP}get jP(){return this.Pa.jP}get JP(){return this.Fst}get oX(){return this.Ust}get nt(){return this.Pa.nt}get Ql(){return this.Dz}get rt(){return this.Pa.rt}get IP(){return this.RP()}RP(){return this.Pa.IP}get Vst(){return this.eJ}get _J(){return this.gJ}get MP(){return this.LP()}set MP(t){this.OP(t)}LP(){return this.Pa.MP}OP(t,i){this.Pa.OP(t,i)}Hst(){return this.LP()}get CP(){return this.Pa.CP}set CP(t){this.Pa.CP=t}get bt(){return this.Pa.bt}get ct(){return this.Nd()}Nd(){return this.Pa.ct}get xe(){return this.Pa.xe}get UP(){return this.Pa.UP}get lt(){return this.HP()}HP(){return this.Pa.lt}get WP(){return this.qP()}qP(){return this.Pa.WP}get Ma(){return this.Pa.Hx()}get mq(){return this.Pa.Aa()}get Vx(){return this.Pa.Vx}set Vx(t){this.Pa.Vx=t}get $P(){return this.Pa.$P}set $P(t){const i=Boolean(t);this.ix(i)}ix(t){this.Pa.$P=t,t||this.hx||this.qx()}get hx(){return this.Pa.hx}get ux(){return this.lx()}set ux(t){this.vx(t)}lx(){return this.Pa.ux}vx(t){this.Pa.ux=t}get _x(){return this.gx()}gx(){return this.Pa._x}get mx(){return this.Pa.mx}set mx(t){this.Pa.mx=t}get Ax(){return this.Pa.Ax}get Sx(){return this.Tx()}Tx(){return this.Pa.Sx}get kx(){return this.Pa.kx}get jI(){return this.gO}get Rx(){return this.Pa.Rx}get Bx(){return this.Pa.Bx}get Mx(){return this.Pa.Mx}set Mx(t){const i=ur(Number(t),0,1)||0;this.Ox(i)}get Fx(){return this.Cz}Ox(t){this.Pa.Mx=t}Ea(){Ri(this,kR,this)}Gx(){this.Pa.Gx()}zx(){this.Pa.zx()}nu(){return this.gz}async Ta(t,i){if(this.gz=t,t){this.Wst.xj(t).catch(this.qst);const e=function(t){t.sources;const i=t.sources.filter(t=>qd(t.integration));0;return t.sources=i,t}(t);await this.Pa.Ta(e,i)}}Px(t,i,e){return this.Pa.Px(t,i,e)}xx(){return this.Pa.xx()}qx(){if(this.ko)return;this.Pa.qx(),this.Mst.qx();const t=this.xe.getElementsByTagName("video");for(let i=0;i<t.length;i++){const e=t[i];"Advertisement"===e.title&&Cf(e,zd.Zs)}this.ko=!0}ds(){return this.zst.Wo()===tc.FULLSCREEN}be(){this.Pa.be()}we(){this.Pa.we()}Wx(){return this.Pa.Wx()}Yx(){this.Pa.Yx()}Jx(){this.Pa.Jx()}tI(t){return this.Pa.tI(t)}async Xx(){this.gz=void 0,await this.Pa.Xx(),await this.Pa.hr()}async kn(){this.So(new OF),this.Vo(),this.Lst.kn(),this.SP.kn(),this.Ust.kn(),this.Gst.kn(),this.Xst.kn(),this.zst.kn(),this.Ost.kn(),this.jst.kn(),this.Mst.kn(),this.Iz.kn(),await this.Pa.kn()}constructor(t,i,e,s){super(),this.Qst=void 0,this.Cd=void 0,this.Pa=void 0,this.jst=void 0,this.SP=void 0,this.eJ=void 0,this.gJ=void 0,this.Gst=void 0,this.zst=void 0,this.Rz=void 0,this.Cz=void 0,this.Wst=void 0,this.qJ=void 0,this.Ost=void 0,this.Xst=void 0,this.Dz=void 0,this.Bst=!1,this.ko=!1,this.gO=void 0,this.gz=void 0,this.Kst=!1,this.Iz=void 0,this.Mst=void 0,this.Ust=void 0,this.Lst=void 0,this.Jc=void 0,this.Io=void 0,this.Fst=void 0,this.Na=void 0,this.qst=t=>{if(this.Kst)return;this.Kst=!0;const i=this.Qst,e=P(t);this.Pa.BI=new lR(this.xe,e,t),Wr(i.kn())},this.Yst=t=>{t.type!==d.Xw&&t.type!==d.Gw&&this.So(t)};const n=co(i.uid);S(n)?this.gO=Wk++:this.gO=n,this.Cd=i;const r=zd.SP,h=new cB;this.jst=new jC("10.0.0",r,h),this.Rz=new GD,this.Cz=new XI;const o=new xF(r,this.Rz);this.SP=new BD(o,i.allowMixedContent),this.qJ=null!=e?e:new kC(i.isEmbeddable,"10.0.0",yC()),this.Wst=new uB(r,this.qJ,this.jst,h,i,yC()),this.Wst.FJ().catch(this.qst),this.Ost=new Oe(t),this.Ost.wn(Rh.yn,this.Rs),this.Dz=new gB;const a=new(null!=s?s:EF)(this.Ost,this.Dz,i);a.ust(t),this.eJ=new KD,this.gJ=new JD;const u=new dR(t,i,this.SP,this.Rz,this.Cz,a,this.Dz);this.Rz.VY(u);let c=u;c=new YD(c,this.Vst),c=new ZD(c,this._J),this.Qst=c,this.Pa=new Dk(this.Qst),this.Pa.lw(this.Yst),this.Fst=new $D(this.Pa),this.Ust=new LD(this.Pa,this.SP,this.Rz),this.Gst=new ZC(this),this.Xst=new _D(this.Pa,i.allowNativeFullscreen),this.zst=new yD(this.Xst,this.Pa.Aa()),this.Ost._n(),this.Io=new LF(t),this.Iz=new EF(this.Ost,this.Dz,i,1,[Ci.Bk]),this.Mst=new bD(this.Iz),this.Lst=new sB}};r(),r();var Oc=class extends _o{get Dst(){return this.Jst()}Jst(){return this.oa.Dst}get Jc(){return this.Zst()}Zst(){return this.oa.Jc}get jst(){return this.oa.jst}get Nst(){return this.$st()}$st(){return this.oa.Nst}get cO(){return this.oa.cO}set cO(t){this.oa.cO=t}get Gst(){return this.oa.Gst}get VX(){return this.oa.VX}get Vst(){return this.oa.Vst}get Cd(){return this.oa.Cd}get Wu(){return this.oa.Wu}get Ma(){return this.Hx()}Hx(){return this.oa.Ma}get mq(){return this.Aa()}Aa(){return this.oa.mq}get SP(){return this.oa.SP}get Fx(){return this.oa.Fx}get Wst(){return this.oa.Wst}get _J(){return this.oa._J}get oX(){return this.oa.oX}get zst(){return this.oa.zst}get Ost(){return this.oa.Ost}get Pa(){return this.oa.Pa}get Ql(){return this.oa.Ql}get tnt(){return this.int()}int(){return this.oa.tnt}get ent(){return this.snt()}snt(){return this.oa.ent}get jI(){return this.oa.jI}get Io(){return this.oa.Io}get ht(){return this.EP()}EP(){return this.oa.ht}RP(){return this.oa.RP()}get CP(){return this.DP()}set CP(t){this.BP(t)}DP(){return this.oa.CP}BP(t){this.oa.CP=t}get bt(){return this.NP()}NP(){return this.oa.bt}LP(){return this.oa.LP()}OP(t,i){this.oa.OP(t,i)}Hst(){return this.oa.Hst()}Nd(){return this.oa.Nd()}get xe(){return this.FP()}FP(){return this.oa.xe}get UP(){return this.VP()}VP(){return this.oa.UP}HP(){return this.oa.HP()}qP(){return this.oa.qP()}get zP(){return this.GP()}get jP(){return this.QP()}GP(){return this.oa.zP}QP(){return this.oa.jP}get Vx(){return this.oa.Vx}set Vx(t){this.oa.Vx=t}get JP(){return this.ZP()}ZP(){return this.oa.JP}get $P(){return this.tx()}set $P(t){this.ix(t)}tx(){return this.oa.$P}ix(t){this.oa.ix(t)}get hx(){return this.ox()}ox(){return this.oa.hx}get ux(){return this.lx()}set ux(t){this.vx(t)}lx(){return this.oa.ux}vx(t){this.oa.ux=t}gx(){return this.oa.gx()}get mx(){return this.wx()}set mx(t){this.yx(t)}wx(){return this.oa.mx}yx(t){this.oa.mx=t}get Ax(){return this.bx()}bx(){return this.oa.Ax}get Na(){return this.oa.Na}set Na(t){this.oa.Na=t}Tx(){return this.oa.Tx()}get kx(){return this.Ex()}Ex(){return this.oa.kx}get nt(){return this.Ix()}Ix(){return this.oa.nt}get Rx(){return this.Cx()}Cx(){return this.oa.Rx}get rt(){return this.Dx()}Dx(){return this.oa.rt}get Bx(){return this.Nx()}Nx(){return this.oa.Bx}get Mx(){return this.Lx()}set Mx(t){this.Ox(t)}Lx(){return this.oa.Mx}Ox(t){this.oa.Ox(t)}qx(){this.oa.qx()}zx(){this.oa.zx()}Gx(){this.oa.Gx()}be(){this.oa.be()}we(){this.oa.we()}ds(){return this.oa.ds()}Wx(){return this.oa.Wx()}Yx(){this.oa.Yx()}Jx(){this.oa.Jx()}tI(t){return this.oa.tI(t)}Ea(){this.oa.Ea()}nu(){return this.oa.nu()}Ta(t,i){return this.oa.Ta(t,i)}Px(t,i,e){return this.oa.Px(t,i,e)}xx(){return this.oa.xx()}Xx(){return this.oa.Xx()}$x(t){return!1}vz(){this.nnt&&this.oa.lw(this.iI)}_z(){this.nnt&&this.oa.mw(this.iI)}async kn(t){this.Vo(),t||await this.oa.kn(),this._z()}constructor(t,i){super(),this.oa=void 0,this.nnt=void 0,this.iI=t=>{this.$x(t)||this.So(t)},this.oa=t,this.nnt=!i,this.vz()}},zo=function(t){return t[t.lu=0]="lu",t[t.rnt=1]="rnt",t[t.hnt=2]="hnt",t}({}),UF=pf(3,()=>[]);function VF(t,i){UF[i].push(t)}var HF=function(t){return t[t.rnt=0]="rnt",t[t.ont=1]="ont",t[t.ant=2]="ant",t[t.pR=3]="pR",t}({}),WF=pf(4,()=>[]);function Pu(t,i){WF[i].push(t)}var qF=[];function zF(t){for(const i of qF)i(t)}r();var GF=self.CustomEvent;var XF=function(){try{const t=new GF("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,i){return new CustomEvent(t,i)}:function(t,i){const e=h.createEvent("CustomEvent");return e.initCustomEvent(t,(null==i?void 0:i.bubbles)||!1,(null==i?void 0:i.cancelable)||!1,null==i?void 0:i.detail),e};r();var jF=new class{get V(){return this.oO.length}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){const i=[];for(let e=0;e<t.V;e++)i[e]=t.CI(e).Ca;return i.getPlayerByUID=i=>{const e=t.unt(i);return e&&e.Ca},i}(this)}CI(t){return this.oO[t]}c$(t){this.oO.push(t),this.Ca.push(t.Ca)}_S(t){const i=this.oO.indexOf(t);i<0||(ka(this.oO,i),this.hu&&ka(this.hu,i))}unt(t){for(const i of this.oO)if(i.jI===t)return i}constructor(){this.oO=[],this.hu=void 0}};function QF(t){let i,e;const s=i=>{e=i;const s=Cn(i,t.Cd);t.Ta(s)},n={get abr(){return t.Dst.Ca},get ads(){var i;return null==(i=t.Jc)?void 0:i.Ca},get audioTracks(){return t.ht.Ca},get autoplay(){return t.cO},set autoplay(i){t.cO=Boolean(i)},get buffered(){return t.RP()},get canvas(){return t.Gst.Ca},get cast(){var i;return null==(i=t.VX)?void 0:i.Ca},get clip(){return t.Vst.Ca},get currentProgramDateTime(){var i;return null!=(i=t.CP)?i:null},set currentProgramDateTime(i){t.CP=null!=i?i:void 0},get currentTime(){return t.LP()},set currentTime(i){t.OP(Number(i))},get duration(){return t.Nd()},get element(){return t.xe},get ended(){return t.UP},get error(){return t.HP()},get errorObject(){return t.qP()},get loop(){return t._J._J},set loop(i){t._J._J=Boolean(i)},get metrics(){return t.JP.Ca},get muted(){return t.$P},set muted(i){t.ix(i)},get network(){return t.oX.Ca},get paused(){return t.hx},get playbackRate(){return t.ux},set playbackRate(i){const e=Number(i);if(e<0)throw new RangeError("playbackRate must be a positive number");t.ux=e},get played(){return t.gx()},get poster(){return t.gi},set poster(i){t.gi=Hi(i)},get preload(){return t.mx},set preload(i){t.mx=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(i)},get presentation(){return t.zst.Ca},get readyState(){return t.Ax},get seekable(){return t.Tx()},get seeking(){return t.kx},get source(){return e},set source(t){s(t)},get src(){return JR(t.nu())},set src(t){s({sources:t})},get textTracks(){return t.nt.Ca},get textTrackStyle(){return t.Ql.Ca},get theoLive(){return t.tnt},get uid(){return t.jI},get videoHeight(){return t.Rx},get videoTracks(){return t.rt.Ca},get videoWidth(){return t.Bx},get visibility(){return t.Io.Ca},get volume(){return t.Mx},set volume(i){t.Ox(Number(i))},get latency(){return t.Fx.Ca},get theoads(){return t.ent},get millicast(){return t.jP.Ca},destroy(){t.kn(),t=null,e=void 0},play(){t.cnt()},pause(){t.zx()},stop(){e=void 0,t.Xx()},prepareWithUserAction(){t.qx()},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)},setSource(t){s(t)},addTextTrack:i=>t.tI(function(t){return{Lt:Hi(t.kind),Th:Hi(t.label),bs:Hi(t.language),Km:Hi(t.type)}}(i)).Ca};return i=new Sc(n,!0),i.au(t),i.wn("destroy",()=>{i.kn()}),n}r(),r(),r(),r();var KF=class extends wp{constructor(t){super(d.do),this.source=void 0,this.source=t}};r();var YF=class extends _o{get CP(){}set CP(t){}get MP(){return this.LP()}set MP(t){this.OP(t)}LP(){return this.bz}Hst(){return this.LP()}OP(t,i){this.Sz&&this.bz===t||(this.bz=t,this.Sz=!0,this.So(new F(this.bz)))}get hx(){return this.kz}get ux(){return this.Ez}set ux(t){this.Ez!==t&&(this.Ez=t,this.So(new aa(this.bz,this.ux)))}get Ax(){return mh.VL}get kx(){return this.Sz}Gx(){this.kz&&(this.kz=!1,this.So(new Tc(this.bz)),this.So(new ux(this.bz)))}zx(){this.kz||(this.kz=!0,this.So(new Si(this.bz,this.CP)),this.So(new hl(this.bz)))}hr(){this.bz=0,this.Sz=!1,this.Ez=1,this.zx()}kn(){this.Vo()}we(){}be(){}constructor(){super(),this.bz=void 0,this.kz=void 0,this.Sz=void 0,this.Ez=void 0,this.bz=0,this.kz=!0,this.Sz=!1,this.Ez=1}};r();var JF={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},ZF={visibility:"hidden"},$F={visibility:"visible"},tU=class{get Yu(){return void 0!==this.dnt?this.dnt:void 0!==this.lnt?this.lnt:void 0}set fnt(t){this.lnt=t,this.er()}er(){const t=this.oa.hx,i=this.vnt;this.Yu?this.Ls.style.backgroundImage='url("'+dp(this.Yu)+'")':this.Ls.style.backgroundImage="",t&&this.Yu&&!i?this.be():this.we()}be(){Ll(ZF,this.oa.xe),Ll($F,this.Ls)}we(){Ll(ZF,this.Ls),Ll($F,this.oa.xe)}vz(){this.oa.wn(d.do,this._nt),this.oa.wn(d.uo,this.LV)}kn(){this.oa.mn(d.do,this._nt),this.oa.mn(d.uo,this.LV),os(this.Ls)}constructor(t){this.Ls=void 0,this.oa=void 0,this.vnt=!1,this.dnt=void 0,this.lnt=void 0,this._nt=t=>{var i;this.vnt=!this.oa.hx,this.dnt=null==(i=t.source)?void 0:i.poster,this.er()},this.LV=()=>{this.vnt=!0,this.we()},this.oa=t,this.vz(),this.Ls=function(){const t=s&&s.document&&s.document.createElement("div");return t.className="theoplayer-poster",Ll(JF,t),t}(),t.xe.appendChild(this.Ls)}};r(),r(),r(),r();var iu=function(t){return t[t.gnt=0]="gnt",t[t.pnt=1]="pnt",t}({});function iU(t){let i;const e={get playing(){return t.zc},get currentAds(){return t.mnt.map(t=>t.wnt())},get currentAdBreak(){var i,e;return null!=(e=null==(i=t.ynt)?void 0:i.wnt())?e:null},get scheduledAds(){return t.Ant.map(t=>t.wnt())},get scheduledAdBreaks(){return t.bnt.map(t=>t.wnt())},skip(){t.rD()},skipAdBreak(i){t.Snt(null!=i?i:void 0)},schedule(i){const e=hC(i,Qh.Ng);e?t.M6(e,iu.gnt,!1):console.error("Invalid ad description")},registerServerSideIntegration(i,e){t.Tnt(i,e)},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new ws(t,e),e}var eU=class extends _o{get zc(){return!!this.qc&&this.qc.zc}get mnt(){return this.qc?this.qc.mnt:[]}get ynt(){return this.qc?this.qc.ynt:null}get Ant(){return this.qc?this.qc.Ant:[]}get bnt(){return this.qc?this.qc.bnt:[]}M6(t,i,e){var s;null==(s=this.qc)||s.M6(t,i,e)}knt(t){var i;null==(i=this.qc)||i.knt(t)}rD(){var t;null==(t=this.qc)||t.rD()}Snt(t){var i;null==(i=this.qc)||i.Snt(t)}Ent(t){var i;null==(i=this.qc)||i.Ent(t)}Tnt(t,i){var e;null==(e=this.qc)||e.Tnt(t,i)}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=iU(this)}async kn(t){this.Vo(),void 0!==this.qc&&(this.qc.mw(this.Rs),t||await this.qc.kn(),this.qc=void 0)}constructor(t){var i;super(),this.qc=void 0,this.hu=void 0,this.qc=t,null==(i=this.qc)||i.lw(this.Rs)}};r(),r();var Gt=class extends Oi{constructor(t,i){super(t),this.od=void 0,this.od=i}},Re=class extends wp{constructor(t,i){super(t),this.adBreak=void 0,this.adBreak=i}},Uu=class extends Gt{xa(){return new sU(this.od.wnt())}constructor(t){super("Pnt",t)}},sU=class extends Re{constructor(t){super("removeadbreak",t)}};r();var nU=class extends Gt{xa(){return new rU(this.od.wnt())}constructor(t){super("xnt",t)}},rU=class extends Re{constructor(t){super("addadbreak",t)}};r(),r();var du=class extends Oi{constructor(t,i){super(t),this.Int=void 0,this.Int=i}},vu=class extends wp{constructor(t,i){super(t),this.ad=void 0,this.ad=i}},Qa=class extends du{xa(){return new hU(this.Int.wnt())}constructor(t){super("Rnt",t)}},hU=class extends vu{constructor(t){super("addad",t)}};r();var Fa=class extends Gt{xa(){return new oU(this.od.wnt())}constructor(t){super("Cnt",t)}},oU=class extends Re{constructor(t){super("adbreakend",t)}};r();var aU=class extends Gt{xa(){return new uU(this.od.wnt())}constructor(t){super("Dnt",t)}},uU=class extends Re{constructor(t){super("adbreakbegin",t)}};r();var dc=class extends du{xa(){return new cU(this.Int.wnt(),this.currentTime)}constructor(t,i){super("Bnt",t),this.currentTime=void 0,this.currentTime=i}},cU=class extends vu{constructor(t,i){super("adbegin",t),this.currentTime=void 0,this.currentTime=i}};r();var bc=class extends du{xa(){return new dU(this.Int.wnt(),this.currentTime)}constructor(t,i){super("Nnt",t),this.currentTime=void 0,this.currentTime=i}},dU=class extends vu{constructor(t,i){super("adend",t),this.currentTime=void 0,this.currentTime=i}};r();var wl=class extends Oi{xa(){return new lU}constructor(){super("Mnt")}},lU=class extends wp{constructor(){super("adadded")}},_l=class extends eU{get BI(){return this.qc}set BI(t){const i=this.qc;if(i===t)return;const e=this.mnt,s=this.ynt,n=this.Ant,r=this.bnt;null==i||i.mw(this.Rs),this.qc=t,null==t||t.lw(this.Rs);const h=this.mnt,o=this.ynt,a=this.Ant,u=this.bnt,c=[];let d=!1;for(const t of r)pi(u,t)||c.push(new Uu(t));for(const t of u)pi(r,t)||c.push(new nU(t));for(const t of a)pi(n,t)||(c.push(new Qa(t)),d=!0);d&&c.push(new wl),s!==o&&(s&&c.push(new Fa(s)),o&&c.push(new aU(o)));for(const t of e)pi(h,t)||c.push(new bc(t,this.oa.LP()));for(const t of h)pi(e,t)||c.push(new dc(t,this.oa.LP()));for(const t of c)this.So(t)}constructor(t){super(void 0),this.oa=void 0,this.oa=t}};r(),r();var fU=class extends _o{get Ca(){var t;return null!=(t=this.hu)?t:this.hu=iU(this)}Ent(t){}Tnt(t,i){}M6(t,i,e){}rD(){}Snt(t){}knt(t){}kn(){return this.Vo(),Promise.resolve()}constructor(...t){super(...t),this.zc=!1,this.ynt=null,this.mnt=[],this.bnt=[],this.Ant=[],this.hu=void 0}},xl=class extends fU{M6(t,i,e){this.Lnt.push({Ont:t,Fnt:i,Unt:e})}rD(){}Ent(t){}Tnt(t,i){this.Vnt.push({kR:t,Hnt:i})}knt(t){const i=this.Vnt.slice(),e=this.Lnt.slice();this.hr();for(const e of i)t.Tnt(e.kR,e.Hnt);for(const i of e)t.M6(i.Ont,i.Fnt,i.Unt)}Wnt(){const t=this.Lnt.map(t=>t.Ont);return this.hr(),t}hr(){Yo(this.Vnt),Yo(this.Lnt)}async kn(){this.hr(),await super.kn()}constructor(...t){super(...t),this.Vnt=[],this.Lnt=[]}};r();var vU=class extends wp{constructor(t){super("tizen2retry"),this.originalErrorEvent=void 0,this.originalErrorEvent=t}};var _U=mu(()=>{let t=FF;t=function(t){return class extends Oc{constructor(i,e){let s=new t(i,e);for(const t of WF)for(const i of t)s=i(s);super(s)}}}(t);let i=function(t){return class extends _o{get jst(){return this.qnt.jst}get Jc(){return this.qc}get Gst(){return this.qnt.Gst}get Cd(){return this.qnt.Cd}get SP(){return this.qnt.SP}get Ma(){return this.qnt.Ma}get mq(){return this.qnt.mq}get zst(){return this.qnt.zst}get Ost(){return this.qnt.Ost}get Pa(){return this.qnt.Pa}get Dst(){return this.qnt.Dst}get cO(){return this.qnt.cO}set cO(t){this.qnt.cO=t,this.znt()}get Nst(){return this.qnt.Nst}get ht(){return this.qnt.ht}get VX(){return this.qnt.VX}get Wu(){return this.qnt.Ost}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}get zP(){return this.qnt.zP}get jP(){return this.qnt.jP}get Vx(){return this.qnt.Vx}set Vx(t){this.qnt.Vx=t}get JP(){return this.qnt.JP}get oX(){return this.qnt.oX}get nt(){return this.qnt.nt}get Ql(){return this.qnt.Ql}get rt(){return this.qnt.rt}get Vst(){return this.qnt.Vst}get _J(){return this.qnt._J}get CP(){return this.oa.CP}set CP(t){this.oa.CP=t}get bt(){return this.qnt.bt}get xe(){return this.qnt.xe}get UP(){return this.qnt.UP}get $P(){return this.qnt.$P}set $P(t){this.ix(t)}get hx(){return this.oa.hx}get gi(){return this.Gnt.Yu||""}set gi(t){this.Gnt.fnt=t}get ux(){return this.lx()}set ux(t){this.vx(t)}lx(){return this.qnt.ux}vx(t){this.oa.ux=t}get mx(){return this.qnt.mx}set mx(t){this.qnt.mx=t}get Ax(){return this.oa.Ax}get Na(){return this.qnt.Na}set Na(t){this.qnt.Na=t}get kx(){return this.oa.kx}get tnt(){return this.qnt.tnt}get ent(){return this.qnt.ent}get jI(){return this.qnt.jI}get Rx(){return this.qnt.Rx}get Bx(){return this.qnt.Bx}get Mx(){return this.qnt.Mx}set Mx(t){this.Ox(t)}get Fx(){return this.qnt.Fx}get Wst(){return this.qnt.Wst}get Io(){return this.qnt.Io}async Zo(t,i){return this.ta.Zo(t,i).catch(yf)}async Xnt(t,i){ii(i),this.qnt.lw(this.jnt);try{await this.qnt.Ta(t,i)}finally{this.qnt.mw(this.jnt)}}async znt(){const t=await this.Qnt();this.Knt(t)}async Qnt(){const t=this.nu();return t&&!qo(t)&&this.cO&&this.hx?this.Nst.HK(this.$P):"none"}Knt(t){var i;const e=(null==(i=this.nu())?void 0:i.mutedAutoplay)||this.Cd.mutedAutoplay;switch(t){case"all":this.cnt();break;case"muted":(this.$P||e===gk.ALL)&&(this.$P=!0,this.Gx())}}Ta(t){qo(this.gz)||this.So(new G(0,mh.VL)),this.hr(),this.gz=t,Wr(this.Zo(async i=>{ii(i);try{await this.Xnt(t,i)}catch(t){return sa(t),this.gz=void 0,void this.qq(vA(t,Vo.SOURCE_NOT_SUPPORTED))}finally{this.Ynt(this.qnt)}const e=await this.Qnt();this.So(new KF(this.nu())),this.Knt(e)}))}OP(t,i){this.oa.OP(t,i)}HP(){var t;return null!=(t=this.Lz)?t:this.qnt.HP()}qP(){var t;return null!=(t=this.JW)?t:this.qnt.qP()}qq(t){void 0===this.qP()&&(this.JW=t,this.Lz=P(t),this.So(new Pi(t)))}Gx(){this.oa.Gx()}cnt(){this.$P||this.qx(),this.Gx()}qx(){this.qnt.qx()}zx(){this.oa.zx()}Xx(){this.Ta(void 0)}be(){this.yz=!0,this.oa.be()}we(){this.yz=!1,this.oa.we()}Ea(){this.qnt.Ea()}Ox(t){this.qnt.Ox(t)}ix(t){this.qnt.ix(t)}Ba(t){this.Jnt=t,t.c$(this)}ds(){return this.qnt.ds()}nu(){return this.gz}Wx(){return this.qnt.Wx()}LP(){return this.oa.LP()}Hst(){return this.oa.Hst()}Nd(){return this.qnt.Nd()}RP(){return this.qnt.RP()}gx(){return this.qnt.gx()}Tx(){return this.qnt.Tx()}Yx(){this.qnt.Yx()}Jx(){this.qnt.Jx()}tI(t){return this.qnt.tI(t)}hr(){this.gz=void 0,this.JW=void 0,this.Lz=void 0,this.Znt=!0,Yo(this.$nt),this.trt.hr(),this.Ynt(this.trt),this.ta.Zg(),Wr(this.ta.Zo(async t=>{ii(t),await this.qnt.Xx()}))}kn(){this.So(new OF),this.Gnt.kn(),this._z(),this.hr(),Wr(this.Zo(async()=>{await this.qnt.kn(),this.Jnt&&(this.Jnt._S(this),this.Jnt=void 0),this.ta.kn()})),this.Vo()}Ynt(t){if(this.oa===t)return;const i=this.oa.hx,e=this.oa.LP(),s=this.oa.ux,n=this.oa.Ax,r=this.oa.kx;this.irt=i,this.M9=n,this._z(),t.lw(this.ert),t===this.qnt?(void 0!==this.qc&&(this.qc.BI=t.Jc,this.nrt.knt(this.qc)),(r||t.LP()!==e)&&t.OP(e),t.ux!==s&&(t.ux=s),i?t.zx():t.Gx()):(void 0!==this.qc&&(this.qc.BI=this.nrt,this.nrt.hr()),this.Cd.retainPlaybackRateOnSourceChange?t.ux=s:1!==s&&this.So(new aa(this.LP(),1))),t.mw(this.ert),this.oa=t,this.vz();for(const t of this.$nt)this.So(t);Yo(this.$nt),this.yz?t.be():t.we()}vz(){this.oa.lw(this.Zx)}_z(){this.oa.mw(this.Zx)}xa(){return QF(this)}constructor(i,e){super(),this.oa=void 0,this.qnt=void 0,this.trt=void 0,this.Gnt=void 0,this.Jnt=void 0,this.ta=void 0,this.$nt=void 0,this.irt=!0,this.M9=mh.VL,this.yz=void 0,this.Znt=!1,this.gz=void 0,this.JW=void 0,this.Lz=void 0,this.qc=void 0,this.nrt=void 0,this.hu=void 0,this.jnt=t=>{t.type!==d.Kw&&this.$nt.push(t)},this.ert=t=>{(t.type!==d.uo||this.oa.hx)&&(t.type===d.jw&&this.oa.hx||t.type===d.$w&&this.oa.kx&&this.oa.LP()===t.currentTime||t.type===d.Kw&&this.oa.ux===t.playbackRate||this.So(t))},this.Zx=t=>{if(this.Znt){if(t.type===Do.SM)return;t.type!==Do.wM&&t.type!==Do.TM||(this.Znt=!1)}if(t.type===d.uo){if(!this.irt)return;this.irt=!1}else if(t.type===d.jw){if(this.irt)return;this.irt=!0}else if(t.type===Do.wI){if(this.M9===t.readyState)return;this.M9=t.readyState}else if(t.type===d.Iw)return;this.So(t)},this.qnt=new t(i,e),this.trt=new YF,this.oa=this.qnt,this.Gnt=new tU(this),this.qnt.Jc&&(this.qc=new _l(this),this.qc.BI=this.qnt.Jc,this.nrt=new xl),this.ta=new te,this.$nt=[],this.yz=!0,this.vz()}}}(t);return Qt.w_&&Qt.A_<3&&(i=function(t){return class extends t{Ta(t){this.rrt=0,super.Ta(t)}So(t){if(t.type===Mc.ma&&this.rrt<3)return this.rrt++,super.So(new vU(t)),void super.Ta(this.nu());super.So(t)}constructor(...t){super(...t),this.rrt=0}}}(i)),i=function(t){let i=t;for(const t of UF)for(const e of t)i=e(i);return i}(i),i});function gU(t,i){const e=mk(i),s=new(_U())(t,e);s.Na=s;let n=s.Ca;return s.Ea(),s.Ba(jF),w.defineProperty(n,"constructor",{value:gU}),n=oS(n),zF(s),n}ct(()=>{self.dispatchEvent&&self.dispatchEvent(XF("theoplayerready"))}),r();var pU={base64:new class{encode(t){return Go(t)}decode(t){return _c(t)}}};r();var mU=JSON.parse('["hbbtv","dash","hesp","millicast","hls","chromecast","ads","theoads","airplay","spotx","vr","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","uplynk","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');r(),r(),r();var wU=class{get MP(){const t=this.oa.currentTime;return isFinite(t)?t:"now"}get hrt(){return this.oa.src||""}hr(){}constructor(t,i){this.oa=void 0,this.ort=void 0,this.art=!1,this.urt=t=>{this.ort._Q(t.error,this.MP)},this.crt=()=>{this.ort.dQ(this.hrt),this.oa.removeEventListener("playing",this.crt),this.art=!1},this.Ms=()=>{var t,i,e,s;this.art||(this.oa.addEventListener("playing",this.crt),this.art=!0),null==(t=this.oa.ads)||t.removeEventListener("adbegin",this.drt),null==(i=this.oa.theoads)||i.removeEventListener("interstitialbegin",this.lrt);var n,r;(null==(s=this.oa.source)||null==(e=s.ads)?void 0:e.some(t=>"theoads"===t.integration))&&(null==(n=this.oa.ads)||n.addEventListener("adbegin",this.drt),null==(r=this.oa.theoads)||r.addEventListener("interstitialbegin",this.lrt))},this.drt=t=>{"theoads"!==t.ad.integration||t.ad.isSlate||this.ort.vQ("ad")},this.lrt=t=>{const i=t.interstitial;(function(t){return"adbreak"===t.type})(i)||this.ort.vQ(function(t){switch(t){case"adbreak":default:return"ad";case"overlay":return"overlay"}}(i.type))},this.ort=i,this.oa=t,this.oa.addEventListener("error",this.urt),this.oa.addEventListener("sourcechange",this.Ms),this.Ms()}};!function(t){qF.push(t)}(function(t){new wU(t.Ca,t.jst)}),r();var yU="theoplayer-stored-volume",AU="theoplayer-stored-mutedstate";VF(function(t){return class extends t{ix(t){this.Cd.persistVolume&&ba.qy(AU,""+Boolean(t)),super.ix(t)}Ox(t){this.Cd.persistVolume&&ba.qy(yU,""+Number(t)),super.Ox(t)}constructor(t,i){if(super(t,i),i.persistVolume){let t=ba.LJ(yU);(void 0===t||S(t))&&(t=1);const i=ba.OJ(AU)||!1;this.Mx=t,this.$P=i}}}},zo.lu);var bU="10.0.0",SU=jF.Ca,TU=tT.LR.registerContentProtectionIntegration.bind(tT.LR);r(),r();Qt.k_&&Qt.P_?SD(class{HK(t){return Promise.resolve("all")}qx(){}kn(){}}):SD(AD),r(),r(),r(),r();var kU=class{async Xq(t){return ZT(t.type)}async jq(t){return!!await kT(t,!0)}},EU=class extends kU{async Xq(t){return!!za(t.useManagedMediaSource)&&super.Xq(t)}};function PU(t){return yB(t)}function xU(t){const i=Qt.S_||Qt.w_,e=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some(t=>"ac-3"===t||"ec-3"===t),s=i&&!e,n=new gv(!0);return async t=>{const i=t.qT;if(!n.Fp(i)&&!function(t,i){return!!t&&(Hh(t)?zP(i)||XP(i):Ho(t,Gy)||Ho(t,jy)||Ho(t,zy))}(t.oQ,t.frt))return!1;const e=t.frt.some(t=>"ac-3"===t||"ec-3"===t);if(s&&e)return!1;if(t.xW){const e=t.xW,s=De(e,t=>rp(t.y8)).filter(it),n=await async function(t,i){for(const e of t)if(await i(e))return!0;return!1}(s,t=>zd.Sm(t,i));if(!n)return!1}return!0}}r(),r(),r(),r();var IU=class{get Mi(){return this.vrt.offsetHeight*zd.Zs.fp}get Ti(){return this.vrt.offsetWidth*zd.Zs.fp}constructor(t){this.vrt=void 0,this.vrt=t}};r(),r();var RU=class{Gq(t){return this.RW.Gq(t)}dst(t){return this.RW.dst(t)}Pq(t){return this.RW.Pq(t)}constructor(t){this.RW=void 0,this.RW=t}};function CU(t){return class extends t{get $W(){return this.TL.$W}}}r(),r(),r(),r(),r();var DU=class{get Cd(){return this.CS()}CS(){return this.iq.Cd}get Sx(){return this.Tx()}Tx(){return this.iq.Sx}TZ(t){return this.iq.TZ(t)}EZ(t){return this.iq.EZ(t)}zg(){return Promise.resolve()}constructor(t){this.iq=void 0,this.iq=t}},Wo=class extends DU{get Q3(){return this.P4}get K3(){return this.x4}get IP(){return this.RP()}RP(){return this.iq.IP}get ct(){return this.Nd()}Nd(){return this.iq.ct}get WZ(){return this._rt()}_rt(){return this.iq.WZ}C4(t){this.iq.C4(t)}M4(t,i,e,s){this.iq.M4(t,i,e,s)}C3(){this.iq.C3()}A3(){this.iq.A3()}zg(){return this.P4&&(this.P4.zg(),this.P4=void 0),this.x4&&(this.x4.zg(),this.x4=void 0),super.zg()}grt(t){this.iq=t,this.P4?t.Q3?this.P4.prt(t.Q3):(this.P4.zg(),this.P4=void 0):t.Q3&&(this.P4=this.mrt(t.Q3),this.P4.wn(bo,this.wrt)),this.x4?t.K3?this.x4.prt(t.K3):(this.x4.zg(),this.x4=void 0):t.K3&&(this.x4=this.mrt(t.K3),this.x4.wn(bo,this.wrt))}xZ(t){this.iq.xZ(t)}yrt(t){}constructor(t){super(t),this.P4=void 0,this.x4=void 0,this.wrt=t=>this.yrt(t)}};r(),r(),r();var BU=class extends Ne{get UY(){return this.jY}set UY(t){this.jY=t}get IP(){return ve.iL()}get Cd(){return this.YS}get B3(){return Ci.pk}get M3(){return ve.iL()}get Art(){return!1}get MY(){return this.zY}set MY(t){this.zY=t}H2(t,i,e){return Promise.reject(new m("Invalid media buffer"))}V3(){return Promise.reject(new m("Invalid media buffer"))}z2(t,i,e){return Promise.reject(new m("Invalid media buffer"))}WZ(){return!1}C3(){}F3(t,i){}U3(t,i){}_S(t,i,e){return Promise.resolve()}r3(t,i){return Promise.reject(new m("Invalid media buffer"))}wO(t,i){return Promise.reject(new m("Invalid media buffer"))}TZ(t){return!1}EZ(t){return Promise.reject(new m("Invalid media buffer"))}zg(){this.Vo()}constructor(t){super(),this.YS=void 0,this.zY=0,this.jY=0,this.YS=t}},NU=class extends Ne{get UY(){return this.brt()}set UY(t){this.Srt(t)}brt(){return this.Trt.UY}Srt(t){this.Trt.UY=t}get IP(){return this.RP()}RP(){return this.Trt.IP}get Cd(){return this.CS()}CS(){return this.Trt.Cd}get B3(){return this.Trt.B3}get M3(){return this.krt()}krt(){return this.Trt.M3}get MY(){return this.Ert()}set MY(t){this.Prt(t)}Ert(){return this.Trt.MY}Prt(t){this.Trt.MY=t}H2(t,i,e){return this.Trt.H2(t,i,e)}V3(){return this.Trt.V3()}z2(t,i,e){return this.Trt.z2(t,i,e)}F3(t,i){this.Trt.F3(t,i)}U3(t,i){this.Trt.U3(t,i)}_S(t,i,e){return this.Trt._S(t,i,e)}r3(t,i){return this.Trt.r3(t,i)}TZ(t){return this.Trt.TZ(t)}EZ(t){return this.Trt.EZ(t)}Zx(t){this.So(t)}zg(){this.Vo(),this.prt(new BU(this.Cd))}prt(t){this.Trt.mn(bo,this.xrt),this.Trt=t,this.Trt.wn(bo,this.xrt)}constructor(t){super(),this.Trt=void 0,this.xrt=t=>this.Zx(t),this.Trt=t,this.Trt.wn(bo,this.xrt)}},MU=class extends NU{get ost(){return this.TL}set ost(t){this.TL=t}async H2(t,i,e){return ii(e),await this.Irt(this.TL.MP,null==i?void 0:i.xet,null==i?void 0:i.ct),ii(e),t.Km===Po.BT?await this.Rrt(t,i,e):await this.Crt(t,i,e)}async Rrt(t,i,e){let s=t;for(;;){const[t,n]=XA(s.ck);s={Km:Po.BT,ck:t};try{return await this.Drt(s,i,e),void n.cancel(new dt).catch(Ct)}catch(t){if(FD(t)){if(await this.Irt(this.TL.MP,i.xet,i.ct,e)){s={Km:Po.BT,ck:n};continue}}throw n.cancel(t).catch(Ct),t}}}async Crt(t,i,e){for(;;)try{return ii(e),await this.Drt(t,i,e)}catch(t){if(FD(t)){if(await this.Irt(this.TL.MP,i.xet,i.ct,e))continue}throw t}}async Irt(t,i,e,s){const n=OD(t,i,e,this.IP,this.MY,this.UY);for(const[t,i]of n)await this.Brt(t,i,s);return n.length>0}Drt(t,i,e){return super.H2(t,i,e)}Brt(t,i,e){return super._S(t,i,e)}constructor(t){super(t),this.TL=void 0}},LU=class extends Wo{get ost(){return this.TL}set ost(t){this.TL=t,this.P4&&(this.P4.ost=t),this.x4&&(this.x4.ost=t)}mrt(t){const i=new MU(t);return i.ost=this.TL,i}constructor(t){super(t),this.TL=void 0,this.grt(t)}};r();var Jo=class extends DU{get mx(){return this.iq.mx}set mx(t){this.iq.mx=t}};function Sl(t){return class extends t{get $W(){return this.TL.$W}get Bx(){return this.TL.Bx}get Rx(){return this.TL.Rx}Wx(){return this.TL.Wx()}}}r(),r(),r();var OU=class extends Ne{get Nrt(){return this.TL}get IP(){return this.RP()}RP(){return this.TL.IP}get CP(){return this.DP()}DP(){return this.TL.CP}get MP(){return this.LP()}LP(){return this.TL.MP}get Wu(){return this.TL.Wu}get ct(){return this.Nd()}Nd(){return this.TL.ct}get nq(){return this.Mrt()}Mrt(){return this.TL.nq}get UP(){return this.Lrt()}Lrt(){return this.TL.UP}get lt(){return this.TL.lt}get Mi(){return this.TL.Mi}get Ti(){return this.TL.Ti}get Ma(){return this.Hx()}Hx(){return this.TL.Ma}get mq(){return this.Aa()}Aa(){return this.TL.mq}get $P(){return this.TL.$P}set $P(t){this.TL.$P=t}get hx(){return this.Ort()}Ort(){return this.TL.hx}get ux(){return this.TL.ux}set ux(t){this.TL.ux=t}get _x(){return this.gx()}gx(){return this.TL._x}get Ax(){return this.bx()}bx(){return this.TL.Ax}get Sx(){return this.Tx()}Tx(){return this.TL.Sx}get kx(){return this.Ex()}Ex(){return this.TL.kx}get Y4(){return this.Frt()}Frt(){return this.TL.Y4}get a5(){return this.Urt()}Urt(){return this.TL.a5}get nt(){return this.Ix()}Ix(){return this.Vrt}get Ql(){return this.att()}att(){return this.TL.Ql}get i7(){return this.TL.i7}get Mx(){return this.TL.Mx}set Mx(t){this.TL.Mx=t}get R9(){return this.TL.R9}get KP(){return this.TL.KP}get CL(){return this.TL.CL}get Eq(){return this.Hrt()}set Eq(t){this.Wrt(t)}Hrt(){return this.TL.Eq}Wrt(t){this.TL.Eq=t}get N9(){return this.TL.N9}set N9(t){this.qrt(t)}qrt(t){this.TL.N9=t}get p8(){return this.zrt()}zrt(){return this.TL.p8}ZP(){return this.TL.ZP()}Gx(){return this.TL.Gx()}zx(){this.TL.zx()}My(t,i,e){this.TL.My(t,i,e)}KW(t){this.TL.KW(t)}be(){this.TL.be()}we(){this.TL.we()}tI(t,i,e,s,n,r,h,o){return this.TL.tI(t,i,e,s,n,r,h,o)}wq(t){return this.TL.wq(t)}vq(){return this.TL.vq()}gq(t,i,e,s,n){return this.TL.gq(t,i,e,s,n)}iV(t){this.TL.iV(t)}Aq(){this.TL.Aq()}QZ(t){return this.TL.QZ(t)}async Un(t){const i=await this.TL.Un(t);let e;return e=t.Km===Zr.mV?this.Grt(i):this.Xrt(i),this.iq=e,e}async hr(){this.iq&&(await this.iq.zg(),this.iq=void 0),await this.TL.hr()}C8(){return this.TL.C8()}x9(){this.TL.x9()}I9(){this.TL.I9()}async zg(){this.Vo(),this.TL.mn(mB,this.jrt),this.Vrt.BI=void 0,this.Vrt.kn(),this.iq&&(await this.iq.zg(),this.iq=void 0)}D9(){this.TL.D9()}Qrt(t){this.TL.mn(mB,this.jrt),this.TL=t,this.Vrt.BI=t.nt,this.TL.wn(mB,this.jrt)}Zx(t){this.So(t)}constructor(t){super(),this.TL=void 0,this.iq=void 0,this.Vrt=new sl,this.jrt=t=>this.Zx(t),this.TL=t,this.Vrt.BI=t.nt,this.TL.wn(mB,this.jrt)}},$u=class extends OU{get Nrt(){return this.TL}get $W(){return this.TL.$W}get n5(){return this.TL.n5}get Vx(){return this.TL.Vx}set Vx(t){this.TL.Vx=t}B9(t){this.TL.B9(t)}Yx(){this.TL.Yx()}constructor(t){super(t)}},FU=class extends $u{Xrt(t){const i=new LU(t);return i.ost=this,i}Grt(t){return new Jo(t)}},UU=class extends(CU(FU)){constructor(t){super(t)}},VU=class extends(Sl(FU)){constructor(t){super(t)}},Ss=class extends RU{Gq(t){return t===Ci.Bk?new VU(super.Gq(t)):t===Ci.Dk?new UU(super.Gq(t)):void 0}async Pq(t){const i=t;await i.zg(),await super.Pq(i.Nrt)}};r();var HU=class{Krt(){this.oa.Jx()}kn(){s.removeEventListener("pageshow",this.Yrt)}constructor(t){this.oa=void 0,this.Yrt=t=>{t.persisted&&this.Krt()},this.oa=t,s.addEventListener("pageshow",this.Yrt)}};r(),r(),r(),r(),r();var WU=class{Jrt(t,i,e){return Promise.resolve()}Zrt(t,i,e,s){let n=[];if(s){const r={yU:i.EO,AU:i.PO,bU:e.$rt.bU};s.Km===nh.TTML?n=kP(t,s,r,e.oQ):s.Km===nh.WEBVTT&&(n=HE(t,r,this.tht).L)}return n}hr(){}constructor(t){this.tht=void 0,this.tht=t}};r(),r(),r();var qU=function(t){return t.TC="vttc",t.iht="vsid",t.eht="iden",t.sht="ctim",t.nht="sttg",t.rht="payl",t.hht="vtte",t.oht="vtta",t}({}),Ml=class t{static aht(i){return Boolean(t.uht[i])}static TD(i){const e=[],s=Cl.aD(new lc(i,new Ui));for(const i of s)t.aht(i.Km)&&e.push(t.uht[i.Km](i.ck));return e}static cht(i){const e=Cl.aD(i),s=vo(e,qU.iht),n=vo(e,qU.eht),r=vo(e,qU.sht),h=vo(e,qU.nht),o=vo(e,qU.rht);return{Km:qU.TC,dht:s?t.fht(s):void 0,vht:n?t._ht(n):void 0,ght:r?t.pht(r):void 0,mht:h?t.wht(h):void 0,yht:o?t.Aht(o):void 0}}static fht(t){return{Km:qU.iht,bht:t.$C()}}static _ht(t){return{Km:qU.eht,vht:t.nD()}}static pht(t){return{Km:qU.sht,Sht:t.nD()}}static wht(t){return{Km:qU.nht,Tht:t.nD()}}static Aht(t){return{Km:qU.rht,kht:t.nD()}}static Eht(t){return{Km:qU.hht}}static Pht(t){return{Km:qU.oht,xht:t.nD()}}};Ml.uht={[qU.TC]:Ml.cht,[qU.hht]:Ml.Eht,[qU.oht]:Ml.Pht};var zU=class{Jrt(t,i,e){const s=new DataView(t.Iht),n=jt.TD(s),r=Jr(n,t=>t.Km===Ro.OR);return r&&(this.Rht=r.Z[0].KD.gD.qD),Promise.resolve()}Zrt(t,i,e){if(S(this.Rht))return[];const s=dh(t),n=jt.TD(s),r=lr(n,Ro.IC),h=lr(n,Ro.OC);if(!r||0===r.Z.length||!h)return[];const o=function(t,i,e){const s=t.Z[0],n=s.GN?s.GN.GN.toNumber()/e:i.EO,r=[];for(const t of s.zN)r.push(...t.JN);return{Cht:n,JN:r}}(r,i,this.Rht),a=e.$rt.bU;return function(t,i,e,s){const n=Ml.TD(dh(i.ck)),r=t.JN,h=t.Cht+s,o=[];let a=0;for(let t=0;t<r.length;t++){const i=r[t],s=n[t];var u;const c=(null!=(u=i.ct)?u:0)/e;let d;s.Km===qU.TC&&(d=GU(s,a,c,h)),d&&o.push(d),a+=c}return o}(o,h,this.Rht,a)}hr(){this.Rht=NaN}constructor(){this.Rht=NaN}};function GU(t,i,e,s){if(!t.yht)return void 0;const n=t.ght?function(t){return ZE(t.Sht,new Ui(0))}(t.ght):i,r=s+n,h=r+e,o=t.yht.kht;return new fE(r,h,o,!1)}r(),r();var Tu=function(t){return t[t.Qz=0]="Qz",t[t.Dht=1]="Dht",t[t.Bht=10]="Bht",t[t.Nht=11]="Nht",t[t.Mht=12]="Mht",t[t.Lht=13]="Lht",t[t.Oht=14]="Oht",t[t.Fht=15]="Fht",t[t.Uht=20]="Uht",t[t.Vht=21]="Vht",t[t.Hht=22]="Hht",t[t.Wht=23]="Wht",t[t.qht=24]="qht",t[t.zht=30]="zht",t[t.Ght=31]="Ght",t[t.Xht=32]="Xht",t[t.jht=33]="jht",t[t.Qht=34]="Qht",t[t.Kht=35]="Kht",t[t.Yht=40]="Yht",t[t.Jht=41]="Jht",t[t.Zht=42]="Zht",t[t.$ht=43]="$ht",t[t.tot=44]="tot",t[t.iot=50]="iot",t[t.eot=51]="eot",t[t.rot=52]="rot",t[t.hot=60]="hot",t[t.oot=61]="oot",t[t.aot=62]="aot",t[t.uot=63]="uot",t[t.cot=70]="cot",t[t.dot=71]="dot",t[t.lot=72]="lot",t[t.fot=73]="fot",t[t.vot=74]="vot",t[t._ot=75]="_ot",t[t.got=76]="got",t[t.pot=77]="pot",t[t.mot=90]="mot",t[t.wot=91]="wot",t}({});function XU(t,i){const e=i.XM((i,e)=>t.qM(i,e,!1,!1));return t.OM(e)}function jU(t,i){const e=i.Mn(t.BM()).XM((i,e)=>t.Cr(e));return t.OM(e)}r(),r(),r(),r();var Ls=function(t){return t.yot="Aot",t.bot="Sot",t}({});r();var Ou=class extends R{constructor(t,i,e){super("Tot"),this.Tn=void 0,this.An=void 0,this.kot=void 0,this.Tn=t,this.An=i,this.kot=e}},QU=class extends wp{constructor(){super("Eot")}},KU=[d.oy,d.ly,d.iy,d.Sw],YU=class extends Ne{get Pot(){var t,i;return(null==(t=this.Iot.xot)?void 0:t.kot)||(null==(i=this.Iot.Rot)?void 0:i.kot)}get Cot(){return this.Dot}set Bot(t){this.Iot.Bot=t}get Bot(){return this.Iot.Bot}get hk(){return this.Not}Mot(t){this.Not!==t&&(this.Not=t,this.So(new QU))}get Lot(){return this.Dot.Ht.Lot}get lt(){return this.JW}async Tn(t){if(!this.Oot&&!this.Fot)return;const i=this.ww("Eot");this.Oot?(this.Uot.Zg(),this.Uot=new at,$e(this.Vot(this.Uot.Yg),this.Uot)):(this.Hot.Xy(void 0),this.Hot=new pa),await i}get Oot(){return"Wot"===this.Not}get Fot(){return"qot"===this.Not}get zot(){return"Got"===this.Not}get Xot(){return"jot"===this.Not}async Xx(t){if(this.zot||this.Fot)for(0,this.Uot.Zg();!this.Oot&&!this.Xot;)await this.ww("Eot")}async hr(t){this.Xot?(this.JW=void 0,this.Mot("Wot")):await this.Xx(t),this.Iot.hr(),this.Dot.hr()}qq(t){this.JW=t,this.Mot("jot"),this.So(new Pi(t))}Qot(){this.M8.wn(d._y,this.bd),this.M8.wn([d.$w,d.Fw],this.Je),this.Iot.wn(KU,this.Rs),this.Kot.wn(Ls.yot,this.bd)}Yot(){this.M8.mn(d._y,this.bd),this.M8.mn([d.$w,d.Fw],this.Je),this.Iot.mn(KU,this.Rs),this.Kot.mn(Ls.yot,this.bd)}async Jot(t){this.Yot(),this.Zot.Zg(),await this.Xx(null!=t?t:Tu.$ht),this.Iot.hr()}async $ot(t){this.Qot(),await this.Tn(null!=t?t:Tu.Fht)}iat(t,i,e){if(this.Oot)for(const s of t.Dot.eat())s.sat<=e&&i<=s.nat&&this.Kot.rat.some(t=>t.o===s.oat)&&this.Dot.aat(s)}async kn(){this.Vo(),this.Yot(),this.Zot.Zg(),await this.Xx(Tu.tot),this.Iot.kn()}async Vot(t){for(;;)try{ii(t),this.Mot("Got"),await this.Iot.uat(t),ii(t),this.Mot("qot"),await Nc(this.Hot.Qy,t)}catch(t){if(D(t))this.Mot("Wot");else{const i=t instanceof Ga?t:new Ga(Vo.MEDIA_LOAD_ERROR,t.message,t);this.qq(i)}break}}async dat(t){ii(t),await this.Xx(Tu.Zht),this.Iot.hr(),ii(t),await this.Tn(Tu.Lht)}constructor(t,i,e,s,n){super(),this.fat=void 0,this.Kot=void 0,this.Dot=void 0,this.Iot=void 0,this.M8=void 0,this.Not=void 0,this.JW=void 0,this.Hot=void 0,this.Zot=void 0,this.Uot=void 0,this.Je=void 0,this.bd=void 0,this.fat=t,this.Kot=i,this.Dot=e,this.Iot=s,this.M8=n,this.Not="Wot",this.JW=void 0,this.Hot=new pa,this.Zot=new at,this.Uot=new at,this.Je=t=>{if(this.Oot||this.Xot)return;if(!zd.pP&&this.Iot.vat(t.currentTime))return;this.Zot.Zg(),this.Zot=new at;$e(this.dat(this.Zot.Yg),this.Zot).catch(yf)},this.bd=ph(()=>{if(this.Fot){try{this.Iot._at();if(this.Iot.gat())return}catch(t){if(!(t instanceof Ou))throw t}this.Tn(Tu.Oht)}},250),this.Qot()}};r(),r();var JU=class t{pat(t,i){return this.mat(t,!1,i)}wat(t,i){return this.mat(t,!0,i)}async mat(i,e,s){ii(s.Yg);const n=await this.yat(i,e,s);return n.QT?t.Aat(n):this.bat(n)}bat(t){return t}static Aat(t){return t}yat(t,i,e){var s;const n=new $n({Yu:t.Yu,dk:M.CT,fk:t.Sat?{Range:"bytes="+t.Sat[0]+"-"+(null!=(s=t.Sat[1])?s:"")}:void 0,zk:t.zk,Uk:X.GET,Km:Al.yk,Wk:i?Xa.Sk:Xa.pk,qk:this.Tat,Vk:e.Eat,Hk:e.Hk,Yg:e.Yg,jk:e.jk});return this.nV.lk(n)}constructor(t,i){this.nV=void 0,this.Tat=void 0,this.nV=t,this.Tat=i}};r(),r();var ZU=class{Pat(t,i){const e=this.xat**t,s=i*(1-e)+e*this.yet;S(s)||(this.yet=s,this.Iat+=t)}Rat(){const t=1-this.xat**this.Iat;return this.yet/t}constructor(t){this.xat=void 0,this.yet=0,this.Iat=0,this.xat=_.exp(_.log(.5)/t)}},$U=class{Pat(t,i){const e=8e3*i/t,s=t/1e3;this.Cat+=i,this.Dat.Pat(s,e),this.Bat.Pat(s,e)}Rat(){return this.Nat()?_.min(this.Dat.Rat(),this.Bat.Rat()):this.Mat}Nat(){return this.Cat>=this.Lat}constructor(t=2,i=5,e=128e3){this.Dat=void 0,this.Bat=void 0,this.Cat=0,this.Lat=void 0,this.Mat=VI,this.Dat=new ZU(t),this.Bat=new ZU(i),this.Lat=e}},tV=class{get Oat(){return this.Fat.Rat()}get Nat(){return this.Fat.Nat()}Uat(t){const i=t.Vat,e=this.Hat?t.Wat-t.qat:t.Wat-t.zat,s=t.Gat;!s&&i<this.Xat||(s?this.Fat.Pat(2*e,i):this.Fat.Pat(e,i))}constructor(t,i){this.Hat=void 0,this.Fat=void 0,this.Xat=void 0,this.Hat=i,i&&RT(t)?t===Ci.Bk?(this.Xat=5e3,this.Fat=new $U(.05,1,0)):(this.Xat=0,this.Fat=new $U(.005,.1,0)):(this.Xat=16e3,this.Fat=new $U)}};r(),r(),r();var iV=class{transform(t,i){this.ef.write(t).catch(Ct),i.enqueue(t)}flush(){this.ef.close().catch(Ct)}constructor(t){this.ef=void 0,this.ef=t}},Tl=class{jat(){return new eV(zA(this.Iht),this.Qat,this.Kat)}constructor(t,i,e){this.Iht=void 0,this.Qat=void 0,this.Kat=void 0,this.Iht=t,this.Qat=i,this.Kat=e}},eV=class t{get WT(){return this.Yat}HT(t){return bn(this.Yat,t)}Ly(){const[i,e]=XA(this.Yat);return this.Yat=i,new t(e,this.Qat,this.Kat)}Jat(){const[i,e]=function(t){const i=new Ta,e=i.writable.getWriter(),s=new Ta(new iV(e));return t.pipeTo(s.writable).catch(t=>{e.abort(t).catch(Ct)}),[s.readable,i.readable]}(this.Yat);return this.Yat=i,new t(e,this.Qat,this.Kat)}Zat(t){return this.HT(t).then(t=>new Tl(t,this.Qat,this.Kat))}constructor(t,i,e){this.Yat=void 0,this.Qat=void 0,this.Kat=void 0,this.Yat=t,this.Qat=i,this.Kat=e}};r();var sV=class extends R{constructor(t,i,e){super(i,e),this.$at=void 0,this.$at=t}},nV="Cache lookup failed.",rV=class extends Ne{async tut(t,i){ii(i);const e=await this.eut.iut(t.Yu.Yu,t.Yu.Sat);if(ii(i),!e)throw new sV(t,nV);const s=new Tl(e.buffer,e.byteLength,e.reference);return{$at:t.$at,sut:{Km:Po.vZ,ck:s},kot:t.kot,Yu:t.Yu}}async nut(t,i){ii(i);const e=await this.eut.iut(t.Yu,t.Sat);if(ii(i),!e)throw new sV(t,nV);const s=new Tl(e.buffer,e.byteLength,e.reference);return{Km:Po.vZ,ck:s}}kn(){this.Vo()}constructor(t){super(),this.eut=void 0,this.eut=t}};r();var hV=["uy","vy"],oV=class extends Ne{async tut(t,i){let e;for(const s of this.rut)try{return await s.tut(t,i)}catch(t){sa(t),e=t}throw e}async nut(t,i){let e;for(const s of this.rut)try{return await s.nut(t,i)}catch(t){sa(t),e=t}throw e}kn(){for(const t of this.rut)t.mn(hV,this.Rs),t.kn()}constructor(t){super(),this.rut=void 0,this.rut=t;for(const t of this.rut)t.wn(hV,this.Rs)}};function aV(t){return ho(t.hut)}function uV(t){return aV(t)?t.hut:t.aut}r(),r(),r(),r();var cV=class extends wp{constructor(t,i,e,s,n,r){super(t),this.uut=void 0,this.BX=void 0,this.VN=void 0,this.$D=void 0,this.qk=void 0,this.uut=i,this.BX=e,this.VN=s,this.$D=n,this.qk=r}},dV=class extends cV{constructor(t,i,e,s,n){super(d.oy,t,i,e,s,n)}};r(),r();var lV=class{constructor(t,i){this.cut=void 0,this.lut=void 0,this.cut=t,this.lut=i}},fV=class extends lV{get Vat(){return this.fut}start(){}transform(t,i){this.fut+=t.byteLength,i.enqueue(t)}flush(){this.vut(!1)}Zg(){this.vut(!0)}vut(t){this.cut(this.lut,zd.Mg(),this.Vat,t)}constructor(...t){super(...t),this.fut=0}},vV=class extends lV{get Vat(){return this.fut}start(){this.lut=zd.Mg()}transform(t,i){this.fut+=t.byteLength,this._ut||this.gut(t)&&this.vut(!1),i.enqueue(t)}flush(){}Zg(){this.vut(!0)}gut(t){const i=this.mut(t),e=this.wut(i);return Boolean(Jr(e,_V))}mut(t){return this.yut&&void 0!==this.Aut?(this.yut=vm([this.yut,t]),new lc(dh(this.yut),new Ui(this.Aut))):(this.yut=t,new lc(dh(t),new Ui))}wut(t){const i=Cl.uD(t.ck,t.KC,!0);return i.cD?(this.yut=void 0,this.Aut=void 0):this.Aut=t.KC.ac,i.m}vut(t){this._ut||(this.cut(this.lut,zd.Mg(),this.Vat,t),this._ut=!0)}constructor(...t){super(...t),this.fut=0,this._ut=!1,this.yut=void 0,this.Aut=void 0}};function _V(t){return t.Km===Ro.OC}var gV=class{but(t){const i=t._k?this.Sut:zd.Mg(),e=this.Tut(i),s=new Ta(e),n=t.WT().pipeTo(s.writable).then(()=>({JP:{Vat:e.Vat}}),t=>{throw e.Zg(),t});return this.kut.$g(n),s.readable}Eut(t){const i=t._k?this.Sut:zd.Mg(),e=t.HT(),s=e.then(t=>{const e=zd.Mg();return this.Uat(i,e,t.byteLength,!1),{JP:{Vat:t.byteLength}}},t=>{const e=zd.Mg();throw this.Uat(i,e,0,!0),t});return this.kut.$g(s),e}get Put(){return this.kut.Qy}constructor(t){this.xut=void 0,this.kut=void 0,this.Sut=void 0,this.Uat=void 0,this.xut=t,this.kut=new pa,this.Uat=(t,i,e,s)=>{const n={zat:this.Sut,qat:t,Wat:i,Vat:e,Gat:s};this.xut.Uat(n),this.xut.Nat&&HI.Ng.cW(this.xut.Oat)},this.kut.Qy.catch(Ct),this.Sut=zd.Mg()}},pV=class extends gV{Tut(t){return new fV(this.Uat,t)}},mV=class extends gV{Tut(t){return new vV(this.Uat,t)}};r();var wV=class extends cV{constructor(t,i,e,s,n,r,h){super(d.ly,t,i,e,s,n),this.Iut=void 0,this.rO=void 0,this.Iut=r,this.rO=h}};r();var nt=class extends R{constructor(t,i,e){super("Error downloading segment "+uV(i),t),this.Rut=void 0,this.Cut=void 0,this.Dut=void 0,this.Rut=i.EO,this.Cut=i.PO,this.Dut=e}},yV=class extends Ne{But(){return this.Hat?new mV(this.xut):new pV(this.xut)}async tut(t,i){ii(i);const e=t.kot,s=t.Yu,n=t.$at,r=uV(n),h=e.kot?e.kot.jI:-1,o=function(t){const i=t.kot;let e;e=i===function(t){return t.rat.reduce((t,i)=>t.kW<i.kW?t:i)}(i.Nut)?on(5*t.$at.ct):on(1.2*t.$at.ct);return ur(e,1e3,18e3)}(t);this.So(new dV(s,e.kW,r,h,e.Km));try{const t=this.But(),a=await this.Mut.pat(s,{jk:this.Hat,Eat:o,Yg:i}),u=await this.Lut(a,a.QT,i,t);return Wr(this.Out(t.Put,e,s,r,h,a)),{sut:u,kot:e,$at:n,Yu:s}}catch(t){throw sa(t),new nt(t,n,e)}}async nut(t,i){ii(i);const e=!1,s=await this.Mut.wat(t,{jk:e,Eat:1e4,Yg:i});return await this.Lut(s,e,i)}async Lut(t,i,e,s){if(i){const i=s?s.but(t):t.WT();return{Km:Po.BT,ck:new eV(i)}}{const i=s?await s.Eut(t):await t.HT(e);return{Km:Po.vZ,ck:new Tl(i)}}}async Out(t,i,e,s,n,r){try{const h=await t;this.So(new wV(e,i.kW,s,n,i.Km,r.hk,h.JP.Vat))}catch(t){}}kn(){this.Vo()}constructor(t,i,e){super(),this.Mut=void 0,this.xut=void 0,this.Hat=void 0,this.Mut=t,this.xut=i,this.Hat=e}};r();var AV=.001,bV=class{get IP(){return this.Fut.IP}get Uut(){return this.Fut.Uut}get ZZ(){return this.Fut.ZZ}get Vut(){if(this.i4.Ax<mh.Qn)return!1;if(this.Fut.An<=this.Hut&&this.Fut.Wut())return!0;const t=this.Fut.QW;if(!t||0===t.V)return!1;const i=ve.tL(this.M8.MP,1/0);return t.Mn(i).UM(this.Fut.ZZ).ZM>=this.Rz.GY}get Hut(){const t=this.Fut.QW;let i;if(t&&t.V>0)i=t.An(0);else{i=this.M8.MP;const t=this.Fut.ZZ,e=t.VM(i);e>=0&&(i=t.An(e))}const e=this.Fut.Sx.Tn(0);if(e>i){if(this.Fut.Tn<=i&&this.Fut.An>=i&&e>i+AV)throw new Ou(i,e);i=e}return i=this.Fut.qut.DM(i),i}constructor(t,i,e,s){this.Fut=void 0,this.M8=void 0,this.i4=void 0,this.Rz=void 0,this.Fut=t,this.M8=i,this.i4=e,this.Rz=s}};r();var SV=class{get zut(){if(0===this.Wm.size)return this.Gut;let t=ve.tL(0,1/0);return t=t.Mn(this.Gut),this.Wm.forEach(i=>{t=t.Mn(i)}),t}Xut(t){return this.Wm.get(t.o)}jut(){let t=this.Gut;return this.Wm.forEach(i=>{t=t.OM(i)}),t}Qut(t){if(this.Gut.Cr(t))return!0;let i=!1;return this.Wm.forEach(e=>{i=i||e.Cr(t)}),i}Kut(t,i){const e=this.Wm.get(i.o);return!!e&&e.Cr(t)}HM(t,i){if(this.Gut.HM(t,i))return!0;let e=!1;return this.Wm.forEach(s=>{e=e||s.HM(t,i)}),e}Yut(t,i){const e=this.Wm.get(i),s=e?e.OM(t):t;this.Wm.set(i,s),this.Gut=this.Gut.OM(t)}Jut(t){this.Wm.forEach((i,e)=>{this.Wm.set(e,i.OM(t))}),this.Gut=this.Gut.OM(t)}Zut(t){this.Wm.forEach((i,e)=>{this.Wm.set(e,i.Mn(t))}),this.Gut=this.Gut.Mn(t)}hr(){this.Wm.forEach((t,i)=>{this.Wm.set(i,ve.iL())}),this.Gut=ve.iL()}constructor(){this.Wm=void 0,this.Gut=void 0,this.Wm=qh(),this.Gut=ve.iL()}},TV=class{get $ut(){return this.tct}get ZZ(){return this.$Z}ict(t){for(const i of this.ect){if(i.sat>t)break;if(i.nat>t)return i}}sct(t){for(const i of this.ect){if(i.nct>t)break;if(i.rct>=t)return i}}hct(t,i){const e=[];for(const s of this.ect){if(s.sat>t)break;s.nat>=i&&e.push(s)}return e}eat(){return this.ect}aat(t){const i=ve.tL(t.nct,t.rct),e=i.BM();this.tct.Zut(e),this.tct.Yut(i,t.oat),this.act(e);const s=li(this.ect,i=>t.sat<=i.sat);if(s<0)this.ect.push(t);else{this.ect[s].nat<=t.nat?this.ect.splice(s,1,t):this.ect.splice(s,0,t)}}t$(t,i){this.$Z.Yut(t,i)}uct(t){this.$Z.Jut(t)}Zut(t){this.tct.Zut(t),this.$Z.Zut(t);const i=this.tct.jut();this.act(i)}act(t){this.ect=this.ect.filter(i=>t.qM(i.nct,i.rct)).map(i=>i.cct&&!t.HM(i.nct,i.rct)?function(t,i){return{oat:t.oat,sat:t.sat,nat:t.nat,nct:t.nct,rct:t.rct,cct:i}}(i,!1):i)}hr(){this.tct.hr(),this.$Z.hr(),this.ect=[]}kn(){this.hr()}constructor(t){this.Ht=void 0,this.tct=void 0,this.$Z=void 0,this.ect=[],this.Ht=t,this.tct=new SV,this.$Z=new SV}};r(),r();var kV=class{get Bot(){return this.dct}set Bot(t){this.dct=t}get Lot(){return this.Dot.Ht.Lot}async lct(t,i,e){let s;ii(e);const n=this.Dot.sct(t);s=n&&uh(n.rct,t,1e-5)?n.nat:t;const r=this.fct(s),h=function(t){return EV.bind(void 0,t)}(s);let o=await this.jp.vct(h,r,i,e);for(ii(e);o&&this._ct(o.$at);){const t=RV(o.$at),s=o.kot;o=await this.jp.vct(t,[s],i,e),ii(e)}if(!o)return void 0;if(!this.gct(o.$at))return o;const a=this.pct(o.$at);if(t<a.Tn)return await this.findFirstNonAppendedSegmentBeforeSegment(o,i,e,a);if(t>=a.An)return await this.findFirstNonAppendedSegmentAfterSegment(o,i,e);if(!o.kot.mct(o.$at))throw new m("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,i,e){let s=t;do{const n=RV(s.$at),r=t.kot;s=await this.jp.vct(n,[r],i,e),ii(e)}while(s&&this.gct(s.$at));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,i,e,s){let n=t;do{const s=IV(n.$at),r=t.kot;n=await this.jp.vct(s,[r],i,e),ii(e)}while(n&&this.gct(n.$at));if(!n){0;const i=t.kot.wct.Tn;throw new Ou(i,s.Tn,t.kot)}return n}yct(t){return this.Dot.$ut.Qut(t)}Act(t){return this.Dot.hct(t.EO,t.PO)}gct(t){const i=this.Act(t);return i.length>0&&function(t,i){return function(t){let i=ve.iL();for(const e of t)i=i.OM(ve.tL(e.sat,e.nat));return i}(t).HM(i.EO,i.PO)}(i,t)&&i.every(CV)}_ct(t){return this.Dot.ZZ.HM(t.EO,t.PO)}pct(t){const i=this.Act(t);return{Tn:i[0].nct,An:i[i.length-1].rct}}fct(t){const i=this.bct(t);if(0===i.length){const t=this.dct?this.dct:this.Dot.Ht.rat;return[t[t.length-1]]}const e=i.filter(t=>{var i;return(null==(i=t.kot)?void 0:i.cst)&&!t.Sct});return e.length>0?e:[i[i.length-1]]}bct(t){return(this.dct?this.dct:this.Dot.Ht.rat).filter(i=>!this.Dot.ZZ.Kut(t,i))}constructor(t,i,e){this.fat=void 0,this.Dot=void 0,this.jp=void 0,this.dct=void 0,this.fat=t,this.Dot=i,this.jp=e}};async function EV(t,i,e,s){const n=i.$rt.Tct(t);if(n){if(i.kct(n)){return(await i.Pct(n,e,s)).Ect(t)}return n}}async function PV(t,i,e,s){if(aV(t)){if(0===t.hut)return;const n=i.$rt.xct(t);if(!n)return;return(await i.Pct(n,e,s)).Ict(t.hut-1)}return i.$rt.Rct(t)}async function xV(t,i,e,s){if(aV(t)){const n=i.$rt.xct(t);if(!n)return;const r=await i.Pct(n,e,s);if(t.hut+1===r.V)return;return r.Ict(t.hut+1)}return i.$rt.Cct(t)}function IV(t){return PV.bind(void 0,t)}function RV(t){return xV.bind(void 0,t)}function CV(t){return t.cct}r();var DV=class{async vct(t,i,e,s){ii(s);const n=this.Dct(i,e);if(!n)return;const r=await t(n,this.Bct,s);if(!r)return;const h=n.Nct(r);return{kot:n,$at:r,Yu:h}}Dct(t,i){if(0===t.length)return;const e=this.Lct.Mct(t,this.Oct?i:void 0,this.Fut,this.Rz.WY);return this.Oct||(this.Oct=!0),e}constructor(t,i,e,s){this.Lct=void 0,this.Fut=void 0,this.Rz=void 0,this.Bct=void 0,this.Oct=void 0,this.Lct=t,this.Fut=i,this.Rz=e,this.Bct=s,this.Oct=!1}};r();var BV=class{async vct(t,i,e,s){ii(s);const n=this.Lct.Fct(i,e,this.Fut);if(!n.length)return;let r;for(const i of n)try{ii(s);const e=await t(i,this.Bct,s);if(e){const t=i.Nct(e);if(await this.eut.Uct(t.Yu,t.Sat))return{$at:e,kot:i,Yu:t}}}catch(t){sa(t),r=t}if(r)throw r}constructor(t,i,e,s){this.Lct=void 0,this.Fut=void 0,this.eut=void 0,this.Bct=void 0,this.Lct=t,this.Fut=i,this.eut=e,this.Bct=s}};function NV(t){return void 0!==t.ux}function MV(t,i){const e=t.Ti&&i.Ti,s=t.Mi&&i.Mi;if(e||s){if(e&&s)return t.Ti*t.Mi-i.Ti*i.Mi;if(e)return t.Ti-i.Ti;if(s)return t.Mi-i.Mi;return(t.Ti||1)*(t.Mi||1)-(i.Ti||1)*(i.Mi||1)}return 0}function LV(t,i){return MV(t,i)||function(t,i){return t.kW-i.kW}(t,i)}r(),r();var Br=class t{Mct(i,e,s,n){let r=t.sortByQuality(i);if(void 0!==this.Vct&&void 0===e&&i.length>1){const i=t.Hct(r,this.Vct);i&&(r=i)}const h=this.Fct(r,e,s,n);return h.length?h[h.length-1]:r[0]}Fct(i,e,s,n){var r;const h=t.sortByQuality(i),o={Oat:void 0===n||this.Wct.Nat?this.Wct.Oat:n,ux:NV(s)&&s.ux?s.ux:1,qct:s.Ti,zct:s.Mi,Gct:null==(r=this.Xct)?void 0:r.restrictToPlayerSize};let a=h;for(const t of this.jct)a=t(a,e,o,this.Rm,this.Qct);return a}static Kct(i){return t.sortByQuality(i)[0]}static Yct(i,e){var s;return e?t.Kct(null!=(s=t.Hct(i,e))?s:i):t.Kct(i)}static Hct(t,i){for(const e of i){const i=t.filter(t=>bN(t.Np,e));if(i.length>0)return i}}static sortByQuality(t){const i=[...t];return i.sort(LV),i}constructor(t,i,e,s,n,r){this.Wct=void 0,this.jct=void 0,this.Rm=void 0,this.Xct=void 0,this.Vct=void 0,this.Qct=void 0,this.jct=t,this.Wct=i,this.Rm=e,this.Xct=s,this.Vct=n,this.Qct=r}};r();var OV=(t,i,e,s,n)=>t.filter(t=>n.TZ(t)&&s.xp(i,t));r();var FV=(t,i,e,s)=>void 0===i&&s.Cp?[t[t.length-1]]:t.filter(t=>function(t,i,e){const s=e.Oat;if(s<=0)return!1;return.8*s>t.kW*e.ux}(t,0,e));r();var UV=(t,i,e,s,n)=>{const r=e.Gct;if(void 0===r&&!s.Ks)return t;if(!1===r)return t;if(t.length>0&&t[0].Km!==Ci.Bk)return t;for(let i=t.length-1;i>=0;i--){const s=t[i];if(s.Mi===e.zct&&s.Ti===e.qct)return t.slice(0,i+1);if(s.Mi<e.zct||s.Ti<e.qct)return t.slice(0,i+2)}return[]};r();var VV=class{async vct(t,i,e,s){let n;for(const r of this.Jct)try{const n=await r.vct(t,i,e,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.Jct=void 0,this.Jct=t}};r(),r();var HV=class{async Zct(t,i,e,s){let n;for(const r of this.$ct)try{return await r.Zct(t,i,e,s)}catch(t){sa(t),n=t}throw n}constructor(t){this.$ct=void 0,this.$ct=t}};r();var WV=class{async Zct(t,i,e,s){var n;const r=await this.nV.lk({Yu:t,dk:M.CT,fk:i?{Range:"bytes="+i[0]+"-"+(null!=(n=i[1])?n:"")}:void 0,zk:e,Uk:X.GET,Km:Al.pk,Yg:s});return await r.HT()}constructor(t){this.nV=void 0,this.nV=t}};r();var qV=class{async Zct(t,i,e,s){const n=await this.eut.iut(t,i);if(n)return n.buffer;if(i){const e=await this.eut.iut(t);if(e)return gl(new j(e.buffer),i[0],i[1])}throw new sV({Yu:t,Sat:i,zk:!1})}constructor(t){this.eut=void 0,this.eut=t}};r();var zV=1.05,GV=(t,i,e,s)=>{if(!1===e.Gct)return t;if(s.dp)return t;const n=s.lp;var r;const h=(null!=(r=null==n?void 0:n.width)?r:e.qct)*zV;var o;const a=(null!=(o=null==n?void 0:n.height)?o:e.zct)*zV;for(let i=t.length-1;i>=0;i--){const e=t[i];if(e.Mi<=a&&e.Ti<=h)return t.slice(0,i+1)}return[]},XV=class{static Ret(t,i,e,s,n,r,h,o,a,u){const c=function(t,i){return new HV([new qV(i),new WV(t)])}(r,h),d=new Br([OV],n,zd.Zs,o,a,u),l=new BV(d,i,h,c),f=new Br([FV,OV,UV,GV],n,zd.Zs,o,a,u),v=new DV(f,i,s,c),_=new VV([l,v]);return new kV(t,e,_)}};r(),r();var jV=class extends wp{constructor(t,i,e,s,n,r=0){super(d.iy),this.segmentStartTime=void 0,this.error=void 0,this.trackType=void 0,this.track=void 0,this.quality=void 0,this.retryCount=void 0,this.segmentStartTime=t,this.error=i,this.trackType=e,this.track=s,this.quality=n,this.retryCount=r}};r();var QV=class extends wp{constructor(t,i){super(d.Sw),this.track=void 0,this.segments=void 0,this.track=t,this.segments=i}},KV=class extends R{constructor(t,i){super(i),this.tdt=void 0,this.tdt=t}},YV=[d.oy,d.ly],JV=class extends Ne{get xot(){return this.idt}get Rot(){return this.edt}set Bot(t){this.sdt.Bot=t}get Bot(){return this.sdt.Bot}get Lot(){return this.Dot.Ht.Lot}ndt(t){return!this.Y2||!t||!lm(this.Y2.Iht,t.Iht)}vat(t){if(!this.idt)return!1;const i=this.idt.$at,e=ve.tL(i.EO,i.PO),s=this.rdt.Uut,n=s.VM(t);return n<0?e.Cr(t,AV):e.qM(t,s.An(n),!0,!0,AV)}async uat(t){const i=this.Dot.Ht.rat;for(;;){let n;try{var e;ii(t),this._at();if(this.gat())break;n=this.hdt();const r=await this.vct(n,t);if(void 0===r)break;if(this.idt=r,!ZV(this.idt)){await this.odt(this.idt,t);continue}var s;if(this.edt&&!pN(this.edt.kot.frt,this.idt.kot.frt)&&await this.Qct.EZ(this.idt.kot),this.idt.kot.xW&&(!this.Rot||(null==(e=this.edt)?void 0:e.kot)!==this.idt.kot))null==(s=this.lq)||s.LW(this.idt.kot.xW);await this.adt(n,this.idt.$at,t),this.Y2=await this.udt(this.idt.kot,t);const h=await this.tut(this.idt,t),o=this.rdt.IP,a=this.edt;this.edt=await this.cdt(h,t);const u=this.rdt.IP;this.ddt(a,this.idt,o,u,n),i.forEach(t=>t.Sct=!1),this.ldt=0,this.fdt=0}catch(e){if(e instanceof Ou){this.F3(e.Tn,e.An,e.kot);continue}if(e instanceof KV){let s=500;if(i.every(t=>t.Sct)){if(2===this.ldt){const t=this.rdt.IP;if(this.vdt(this.idt),this.ddt(this.edt,this.idt,t,t,n),i.forEach(t=>t.Sct=!1),this.fdt+=1,this.ldt=0,this.fdt===this._dt.maxRetries)throw new Ga(Vo.MEDIA_LOAD_ERROR,"The segments could not be loaded.",e);continue}this.ldt++;const t=this._dt.minimumBackoff*2**(this.ldt-1);s=_.min(t,this._dt.maximumBackoff)}await Er(s,t);continue}throw this.gdt=ve.iL(),e}finally{this.idt=void 0}}}ddt(t,i,e,s,n){const r=s.UM(e),h=i.kot,o=h.pdt(i.$at),a=h.mct(i.$at);let u=i.$at.EO,c=i.$at.PO;o&&(u=_.min(u,_.max(0,h.wct.Tn-.05))),a&&(c=_.max(c,h.wct.An));const d=ve.tL(u,c).UM(s);if(0===r.V)return void this.mdt(e,d,u,n);if(o||this.gdt.V>0){const t=d.Mn(ve.tL(u,r.Tn(0)));this.wdt(t)}const l=r.BM().Mn(ve.tL(r.Tn(0),r.An(r.V-1)));if(this.wdt(l),a){const t=d.Mn(ve.tL(r.An(r.V-1),c));this.wdt(t)}if(this.gdt.V>0){const t=this.gdt.UM(r);this.wdt(t),this.gdt=ve.iL()}const f=h.$rt,v=aV(i.$at)?void 0:f.Rct(i.$at);var g;const p=null!=(g=null==t?void 0:t.$at)?g:this.ydt(v)?v:void 0;if(p){const t=this.Dot.hct(p.EO,p.PO);if(t.length>0){const i=ve.tL(t[t.length-1].rct,r.Tn(0));this.wdt(i)}}const m=aV(i.$at)?void 0:f.Cct(i.$at);if(m&&this.ydt(m)){const t=this.Dot.hct(m.EO,m.PO);if(t.length>0){const i=ve.tL(r.An(r.V-1),t[0].nct);this.wdt(i)}}}mdt(t,i,e,s){let n=i;0===this.gdt.V&&(this.gdt=ve.tL(t.An(t.V-1),e)),0===n.V&&void 0!==s&&(n=ve.$M(s)),this.gdt=this.gdt.OM(n),this.Dot.uct(this.gdt)}ydt(t){return!!t&&this.Dot.hct(t.EO,t.PO).length>0}wdt(t){const i=t.UM(this.rdt.IP);for(let t=0;t<i.V;t++)i.Tn(t)!==i.An(t)&&this.Adt.t$(i.Tn(t),i.An(t))}bdt(t,i){throw new KV(t,i)}_at(){if(this.gdt.V>0)return;var t;const i=this.rdt.Uut.OM(null!=(t=this.rdt.ZZ.CM().JM(this.rdt.Hut))?t:ve.iL());this.Dot.Zut(i),this.Sdt&&!this.Tdt(this.Sdt)&&(this.Sdt=void 0),this.So(new QV(this.Dot.Ht.Lot,this.Dot.eat()))}gat(){return this.edt&&this.edt.kot.mct(this.edt.$at)?(this.Adt.C3(),!0):(this.Sdt&&this.Sdt.kot.mct(this.Sdt.$at)&&this.Tdt(this.Sdt)&&this.Adt.C3(),!!this.rdt.Vut)}Tdt(t){return this.Dot.$ut.HM(t.kdt,t.Edt)}Pdt(t,i,e){(!this.Sdt||this.Sdt.$at.PO<t.$at.PO)&&(this.Sdt=Mo({},t,{kdt:i,Edt:e}))}hdt(){const t=this.rdt.Hut;return t}async vct(t,i){ii(i);const e=this.edt?this.edt.kot:void 0,s=await this.sdt.lct(t,e,i);if(s)return s}async odt(t,i){const e={stack:[],error:void 0,hasError:!1};try{const s=t.kot,n=s.$rt,r=aV(t.$at)?n.xct(t.$at):t.$at,h=s.Idt.xdt(),o=n.Rdt(r);if(o&&o.getTime()<=h.getTime())return this.bdt(Tu.Hht,"Segment is not available.");const a=n.Cdt(r).getTime()-h.getTime();0;const u=Be(e,at.ep([i]),!1);await Promise.race([Er(a,u.Yg),s.ww(Ls.yot,u.Yg)])}catch(t){e.error=t,e.hasError=!0}finally{Cs(e)}}async udt(t,i,e){void 0===e&&(e=0),ii(i);const s=t.Ddt;if(!s)return this.Y2;try{if(!t.Bdt){const e=await this.Ndt.nut(s,i);t.Bdt=e.ck}}catch(s){if(sa(s),rt(s)){if(2===e)return t.Sct=!0,this.bdt(Tu.Kht,"Could not fetch the initializer.");const s=_.min(this._dt.minimumBackoff*2**e,this._dt.maximumBackoff);return await Er(s,i),this.udt(t,i,e+1)}throw new Ga(Vo.MEDIA_LOAD_ERROR,s.message,s)}ii(i);try{this.ndt(t.Bdt)&&await this.Adt.Jrt(t.Bdt,t,i)}catch(t){if(sa(t),rt(t))return this.bdt(Tu.Kht,"Could not append the initializer.");throw new Ga(Vo.MEDIA_DECODE_ERROR,t.message,t)}return t.Bdt}async tut(t,i){for(let e=0;;e++)try{return ii(i),await this.Ndt.tut(t,i)}catch(s){if(sa(s),s instanceof nt){if(Eb(s.cause))return this.Mdt(new nt(s,t.$at,t.kot),e),this.bdt(Tu.Hht,"Timeout while fetching the segment.");if(ll(s.cause)&&e>=2)return t.kot.Sct=!0,this.Mdt(s,e),this.bdt(Tu.Hht,"Could not fetch the segment.");const n=_.min(this._dt.minimumBackoff*2**e,this._dt.maximumBackoff);await Er(n,i);continue}throw new Ga(Vo.MEDIA_LOAD_ERROR,s.message,s)}}async adt(t,i,e){const s=this.Dot.hct(i.EO,i.PO),n=this.rdt.Uut.JM(t);let r=ve.iL();for(const t of s){ii(e);const i=t.nct,s=t.rct,h=n&&n.qM(i,s)?_.max(i,n.An(0)):i,o=s;h<o&&(r=r.OM(ve.tL(h,o)))}for(let t=0;t<r.V;t++)await this.Adt.Ldt(r.Tn(t),r.An(t),e);this._at()}async cdt(t,i){try{ii(i);const e=await this.Adt.Odt(t.sut,t.$at,t.kot,i);return this.Fdt(t,e.kdt,e.Edt),this.Pdt(t,e.kdt,e.Edt),t}catch(i){if(sa(i),rt(i))return this.Mdt(new nt(i,t.$at,t.kot),0),this.bdt(Tu.Hht,"Could not append the segment.");if(FD(i)&&this.Adt.YY())return this.bdt(Tu.qht,"Buffer is full. Could not reduce the buffer.");throw new Ga(Vo.MEDIA_DECODE_ERROR,i.message,i)}}Fdt(t,i,e){const s=t.kot,n=t.$at;this.aat(n,s,i,e)}aat(t,i,e,s){this.Dot.aat({oat:i.o,sat:t.EO,nat:t.PO,nct:e,rct:s,cct:!0}),this.Adt.i$(e,s)}F3(t,i,e){const s=ve.tL(t,i);e?this.Dot.t$(s,e.o):this.Dot.uct(s),this.Adt.t$(t,i)}vdt(t){const i=ve.tL(t.$at.EO,t.$at.PO);t.kot?this.Dot.t$(i,t.kot.o):this.Dot.uct(i)}Mdt(t,i){const e=t.Rut,s=this.Dot.Ht.Lot,n=this.Dot.Ht.Ca,r=t.Dut.kot&&t.Dut.kot.Ca,h=new jV(e,t.message,s,n,r,i);this.So(h)}hr(){this.Y2=void 0,this.edt=void 0}kn(){this.hr(),this.Sdt=void 0,this.Ndt.mn(YV,this.Rs),this.Ndt.kn()}constructor(t,i,e,s,n,r,h,o,a){super(),this.fat=void 0,this.Dot=void 0,this.rdt=void 0,this.sdt=void 0,this.Ndt=void 0,this.Adt=void 0,this.Qct=void 0,this._dt=void 0,this.lq=void 0,this.idt=void 0,this.Y2=void 0,this.edt=void 0,this.Sdt=void 0,this.ldt=void 0,this.fdt=void 0,this.gdt=void 0,this.fat=t,this.Dot=i,this.rdt=e,this.sdt=s,this.Ndt=n,this.Adt=r,this.Qct=h,this._dt=o,this.lq=a,this.idt=void 0,this.Y2=void 0,this.edt=void 0,this.Sdt=void 0,this.ldt=0,this.fdt=0,this.gdt=ve.iL(),this.Ndt.wn(YV,this.Rs)}};function ZV(t){const i=t.kot,e=i.$rt,s=aV(t.$at)?e.xct(t.$at):t.$at;return e.Udt(s,i.Idt.xdt())}var $V=0,tH=class{Ret(t){const i=$V++,e=this.Fut.B3,s=new TV(t),n=this.Vdt&&RT(e),r=new tV(e,n),h=new bV(this.Fut,this.M8,this.i4,this.Rz),o=XV.Ret(i,this.Fut,s,this.Rz,r,this.nV,this.eut,this.Xct,this.Vct,this.Qct),a=function(t){switch(t){case Ci.Dk:return Za.Dk;case Ci.Bk:return Za.Bk;case Ci.NT:return Za.NT;case Ci.Nk:return Za.Nk;default:return Za.pk}}(e),u=function(t,i,e,s){const n=new rV(s),r=new yV(t,i,e);return new oV([n,r])}(new JU(this.nV,a),r,n,this.eut),c=new JV(i,s,h,o,u,this.Fut,this.Qct,this._dt,this.lq);return new YU(i,t.Nut,s,c,this.M8)}Hdt(t,i){const e={Lot:Ci.NT,Nut:i,rat:i.rat,Ca:t.Ca};return this.Ret(e)}constructor(t,i,e,s,n,r,h,o,a,u,c,d){this.Fut=void 0,this.M8=void 0,this.i4=void 0,this.nV=void 0,this.Rz=void 0,this.Vdt=void 0,this.eut=void 0,this.Xct=void 0,this.Vct=void 0,this.Qct=void 0,this._dt=void 0,this.lq=void 0,this.Fut=t,this.M8=i,this.i4=e,this.nV=s,this.Rz=n,this.Vdt=r,this.eut=h,this.Xct=o,this.Vct=a,this.Qct=u,this._dt=c,this.lq=d}};r();var iH=class{TZ(t){return this.Trt.TZ(t)}EZ(t){return this.Trt.EZ(t)}constructor(t){this.Trt=void 0,this.Trt=t}},eH=class{TZ(t){return!0}EZ(t){return Promise.resolve(void 0)}};r(),r();var Zo=class extends Oi{xa(){return new sH(this.KI.map(t=>t.Ca))}constructor(t,i){super(Te.EI),this.KI=void 0,this.Ht=void 0,this.KI=t||[],this.Ht=i}},sH=class extends wp{constructor(t){super("targetqualitychanged"),this.qualities=void 0,this.quality=void 0,this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}};r();var nH=class extends Js{xa(){return new rH(this.quality.Ca)}constructor(t){super(Te.QUALITY_UNAVAILABLE),this.quality=void 0,this.quality=t}},rH=class extends Ae{constructor(t){super("qualityunavailable"),this.quality=void 0,this.quality=t}};r();var hH=class extends wp{constructor(){super(Te.NO_QUALITY)}};function oH(t){return{kW:t.kW,Np:t.frt,Mi:aH(t)?t.Mi:0,Km:aH(t)?Ci.Bk:Ci.Dk,Ti:aH(t)?t.Ti:0}}function aH(t){const i=t;return void 0!==i.Mi&&void 0!==i.Ti}r();var uH=0,cH=class extends Ne{get QI(){return this.Kot.Wdt.map(dH).filter(it)}qdt(t){for(const i of t)i.wn("update",this.zdt),this.dO.lO(i)}Gdt(t){if(!this.dO.fO(t))return;t.QU();const i=this.Xdt();if(this.jdt&&pi(this.jdt,t)){const t=this.jdt.filter(t=>t.cst);0===t.length&&i.length>0?this.YI=i:this.YI=t}else this.YI=i;this.So(new nH(t))}Qdt(t){if(!this.dO.fO(t))return;const i=this.Xdt();t.jU(),this.jdt&&!function(t,i){return cf(t,i,(t,i)=>t===i)}(this.jdt,i)||(this.YI=this.Xdt())}Xdt(){return this.dO.II.filter(t=>t.cst)}get XI(){return this.Kdt}Ydt(t){this.Kdt=t.kot,this.So(t)}get Nut(){return this.Kot}get Rt(){return this.We}set Rt(t){this.wO(t)}get Ca(){return this.hu||(this.hu=fo(this)),this.hu}get Jdt(){return this.Zdt}set Jdt(t){this.Zdt=t}get o(){return this.hS}get jI(){return this.gO}get Lt(){return this.b5}get bs(){return this.qA}get Th(){return this.pO}set Th(t){t!==this.pO&&(this.pO=t,this.So(new Uh(this)))}get Xk(){return this.Rt?"enabled":"disabled"}get YI(){return this.jdt}set YI(t){let i;if(t){const e=this.XI?oH(this.XI):void 0;i=t.filter(t=>t.cst&&zd.Zs.xp(e,oH(t)))}else i=this.Xdt();0!==i.length?(this.jdt=t&&this.dO.fO(t)?t:void 0,this.$dt=this.tlt(this.jdt),this.So(new Zo(t,this))):this.So(new hH)}get ilt(){return this.$dt}tlt(t){if(!t||0===t.length)return;const i=[];for(const e of this.rat)for(const s of t)s===e.kot&&s.cst&&i.push(e);return i}get KI(){return this.dO}get rat(){return this.elt}slt(t){this.nlt.push(t),this.elt.push(...t.rat);const i=t.rat.map(t=>t.kot);this.qdt(i)}get Lot(){return this.rlt}get hlt(){return this.nlt}get olt(){return this.rat.every(t=>t.olt)}wO(t){this.We=t,this.Zdt&&(t?this.Zdt.jU(this):this.Zdt.QU(this))}ult(t){this.We=t,this.clt!==t&&(this.clt=t,this.So(new nr(this)))}kn(){for(const t of this.dO.II)t.mn("update",this.zdt);this.dO.hr()}constructor(t,i,e="alternative"){super(),this.Kdt=void 0,this.Kot=void 0,this.We=!1,this.hu=void 0,this.Zdt=void 0,this.hS="",this.gO=void 0,this.b5=void 0,this.pO=void 0,this.qA=void 0,this.clt=!1,this.dO=new Uk,this.elt=[],this.jdt=void 0,this.$dt=void 0,this.rlt=void 0,this.zdt=()=>this.So(new Uh(this)),this.nlt=[],this.Kot=t,this.hS=String(uH++),this.gO=ki(),this.b5=e,this.qA=t.rit,this.pO=t.Th,this.rlt=t.Km,this.elt=t.rat.slice(),this.qdt(i)}};function dH(t){if("urn:mpeg:dash:role:2011"===t.y8)return lH(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.y8){if("1"===t.zE)return Tn.HI;if("2"===t.zE)return Tn.qI}}function lH(t){if(void 0!==(null==t?void 0:t.zE))switch(t.zE){case"caption":return Tn.VI;case"sign":return Tn.WI;case"description":return Tn.HI;case"enhanced-audio-intelligibility":return Tn.qI;default:return}}var fH=class t extends es{get Rt(){for(const t of this.Z.II)if(t.Xk!==xh.Nh)return!0;return!1}get QW(){const t=this.M8.MP;return this.Uut.JM(t,.01)}get qut(){return ve.eL()}get IP(){var t;return null!=(t=this.dlt&&this.llt.get(this.dlt.jI))?t:ve.iL()}get ZZ(){return this.flt?this.flt.Cot.ZZ.zut:ve.iL()}get Uut(){return XU(this.IP,this.ZZ).LM(2*this.vlt)}get Tn(){return this._lt?this._lt.wct.Tn:NaN}get An(){return this._lt?this._lt.wct.An:NaN}get UP(){const t=this.An;return!!t&&this.M8.MP>=t}get vlt(){var t;const i=this.glt();if(!i)return.04;var e;return 1/(null!=(e=this.dlt&&(null==i||null==(t=i.plt)?void 0:t.iF()))?e:25)}get Mi(){return 0}get B3(){return Ci.NT}get ux(){return this.Ez}set ux(t){this.Ez=t}get _x(){var t;return null!=(t=this.dlt&&this.wlt.get(this.dlt.jI))?t:ve.iL()}get Sx(){if(!this.dlt)return ve.$M(0);const t=this.ylt(this.dlt),i=null==t?void 0:t.Alt,e=null==t?void 0:t.blt;if(void 0===e||void 0===i)return ve.$M(0);const s=_.max(i,this.M8.MP);return new ve([e,s]).CM()}get Ti(){return 0}C3(){}Wut(){return this.Uut.Cr(this.An)}async Odt(t,i,e,s){const n=t.Km===Po.vZ?t.ck.Iht:await t.ck.HT(s),r=this.findTrackForRepresentation(e);let h=this.llt.get(r.jI);const o=i.EO,a=i.PO,u=new ve([o,a]);h||(h=ve.iL(),this.llt.set(r.jI,ve.iL()),this.wlt.set(r.jI,ve.iL())),this.Irt(s);const c=this.Zrt(new j(n),i,e,r);for(const t of c)r.tV(t);return this.llt.set(r.jI,h.OM(u)),{kdt:o,Edt:a}}Irt(t){const i=OD(this.M8.MP,void 0,void 0,this.IP,this.Rz.GY,this.Rz.UY);for(const[e,s]of i)Wr(this.Ldt(e,s,t))}Jrt(t,i,e){return this.Slt.Jrt(t,i,e)}Zrt(t,i,e,s){return this.Slt.Zrt(t,i,e,s)}Ldt(t,i,e){const s=t,n=i;let r=new ve([t,i]);for(const t of this.Z.II){const i=[];for(const e of t.L.II)e.EO>=s&&e.PO<=n?i.push(e):r=r.UM(new ve([e.EO,e.PO]));for(const e of i)t.WU(e);const e=this.llt.get(t.jI);e&&this.llt.set(t.jI,e.UM(r))}return Promise.resolve()}t$(t,i){}i$(t,i){}YY(){return!1}jU(t){if(t&&this.dlt!==t){this.dlt=t;for(const i of this.Z.II)i!==t&&(i.Xk=xh.Nh);if(this.Slt.hr(),this.flt&&(this.flt.kn(),this.flt=void 0),this.dlt){const t=this.ylt(this.dlt);this.flt=new tH(this,this.M8,this.M8,this.nV,this.Rz,!1,this.eut,void 0,void 0,new eH,_k,void 0).Hdt(this.dlt,t),this.flt.wn(Mc.ma,this.Tlt),this.flt.Tn(Tu.Nht)}}}QU(t){this.dlt===t&&(t&&this.dlt===t&&(this.dlt=void 0),this.flt&&(this.flt.kn(),this.flt=void 0))}async Un(t){await this.hr(),this._lt=t,this.klt(t)}Elt(t){const i=function(t){const i=t.rat&&t.rat.length>0&&t.rat[0],e=i&&zP(i.frt),s=zP(t.frt),n=t.oQ===Gy;return e||s||n?nh.TTML:t.oQ===jy||QP(t.oQ,t.frt)?nh.WEBVTT:nh.DEFAULT}(t);if(!i)throw new m("Unknown TextTrack type for Representation");const e=t.Plt.concat(t.Wdt);return this.xlt(function(t){return pi(t.filter(t=>"urn:mpeg:dash:role:2011"===t.y8).map(t=>t.zE).filter(it),"caption")?Ao.FU:Ao.OU}(e),t.Th,t.rit,!1,i,t,function(t){return t.filter(t=>"urn:mpeg:dash:role:2011"===t.y8).some(t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.zE))}(t.Plt),t.Wdt.map(lH).filter(it))}klt(t){for(const i of t.Ilt){const t=this.Elt(i);this.Rlt.set(t.jI,i),t.Ax=Zu.LOADED,this.tt(t)}}it(t){this.Rlt.delete(t.jI),super.it(t)}xlt(t,i,e,s,n,r,h,o){var a;const u=Jr(r.rat,t=>""!==t.o);var c,d;const l=null!=(d=null!=(c=null==u?void 0:u.o)?c:null==(a=r.o)?void 0:a.toString())?d:"";return this.JU.tI(t,l,i,e,s,n,h,o)}ZU(t,i,e){const s=Ut(t,i,e),n=this.Rlt.get(t.jI);void 0!==n&&(this.Rlt.set(s.jI,n),this.Rlt.delete(t.jI));const r=this.llt.get(t.jI);void 0!==r&&(this.llt.set(s.jI,r),this.llt.delete(t.jI));const h=this.wlt.get(t.jI);return void 0!==h&&(this.wlt.set(s.jI,h),this.wlt.delete(t.jI)),s}async hr(){await super.hr(),this.flt&&(await this.flt.hr(Tu.eot),this.flt.mn(Mc.ma,this.Tlt),this.flt=void 0),this._lt=void 0,this.llt.clear(),this.wlt.clear()}findTrackForRepresentation(i){for(const e of this.Z.II){const s=this.ylt(e);if(s&&t.Clt(s)===i)return e}}ylt(t){return this.Rlt.get(t.jI)}glt(){if(!this.dlt)return;const i=this.ylt(this.dlt);return i?t.Clt(i):void 0}static Clt(t){return t.rat&&t.rat.length>0?t.rat[0]:void 0}kn(){for(const t of this.Z.II)this.JU.iV(t);return super.kn()}constructor(t,i,e,s,n,r){super(r),this.Ez=1,this.flt=void 0,this.llt=ar(),this.wlt=ar(),this.dlt=void 0,this._lt=void 0,this.Rlt=ar(),this.nV=void 0,this.eut=void 0,this.M8=void 0,this.Rz=void 0,this.Slt=void 0,this.Tlt=t=>{0},this.M8=t,this.nV=i,this.Rz=e,this.Slt=s,this.eut=n}},vH=class{get nt(){return this.Gl}async sV(t){if(t.Km!==Ci.NT)return;const i=function(t,i,e){return zP(i)||t===Gy||t===jy?new WU(e):QP(t,i)?new zU:void 0}(t.oQ,t.frt,this.tht);if(i){const e=this.Dlt(i);return this.Blt(e),await e.Un(t),e}}Dlt(t){return new fH(this.M8,this.nV,this.Rz,t,this.eut,this.JU)}Blt(t){this.Nlt.push(t),this.Gl.FW(t.Z)}async hr(){for(const t of this.Nlt.slice())await t.hr();Yo(this.Nlt),this.Gl.hr()}async kn(){for(const t of this.Nlt)await t.kn();Yo(this.Nlt),this.Gl.kn()}constructor(t,i,e,s,n,r){this.Nlt=[],this.Gl=new Yu([]),this.JU=void 0,this.tht=void 0,this.M8=void 0,this.nV=void 0,this.Rz=void 0,this.eut=void 0,this.M8=t,this.nV=i,this.Rz=e,this.eut=s,this.JU=n,this.tht=r}};r();var _H=class extends wp{constructor(t){super(d.zw),this.error=void 0,this.error=t}};r();var Eh=function(t){return t.mV="static",t.wV="dynamic",t}({});r(),r();var gH=function(t){return t.Mlt="Llt",t}({}),pH=class extends wp{constructor(){super(gH.Mlt)}};r(),r();var mH=class extends wp{constructor(t,i){super(d.Yw),this.representation=void 0,this.previousRepresentation=void 0,this.representation=t,this.previousRepresentation=i}};r(),r(),r();var wH=function(t){return t[t.Olt=0]="Olt",t[t.Flt=1]="Flt",t[t.Ult=2]="Ult",t[t.Vlt=3]="Vlt",t[t.Hlt=4]="Hlt",t[t.Wlt=5]="Wlt",t}({}),qu=function(t){return t[t.qlt=0]="qlt",t[t.zlt=1]="zlt",t[t.Glt=2]="Glt",t[t.Xlt=3]="Xlt",t}({});function yH(t,i,e){return e===wH.Olt?e:i!==qu.qlt&&i!==qu.zlt||e!==wH.Flt&&e!==wH.Ult?t?i===qu.Glt?wH.Hlt:i===qu.Xlt?wH.Vlt:wH.Olt:wH.Wlt:wH.Ult}function AH(t,i,e,s){const n={byte:e};let r=wH.Flt;const h=[],o=31&Wu(i,n,s);n.byte+=1;for(let e=0;e<o;e+=1){const o=Wu(i,n,s),a=4&o,u=3&o;r=yH(Boolean(a),u,r);const c=Wu(i,n,s),d=Wu(i,n,s);h.push({jlt:t,VN:-1,Qlt:!e,Klt:Boolean(a),Km:u,Ylt:r,Jlt:c,Zlt:d})}return h}function bH(t,i,e){const s=Wu(t,i,e);if(!S(s))return String.fromCharCode(s)}function SH(t){const i=t.i1,e={byte:t.$0},s=t.t1,n=Wu(i,e,s);if(255===n&&(e.byte+=1),181!==n)return;const r=tN(i,e);if(47!==r&&49!==r)return;if(49===r){const t=function(t,i,e){let s="",n=e;for(;n>0;)n-=1,s+=bH(t,i);return s}(i,e,4);if("GA94"!==t)return}if(3!==Wu(i,e,s))return;47===r&&(e.byte+=1);const h=t;return h.$lt=e.byte,h}function TH(t){return 4===t.J0}function kH(t){const i=t.filter(TH).map(SH).filter(it),e=[];for(const t of i)e.push(...AH(t.Y0,t.i1,t.$lt,t.t1));return e}r();var EH="und";function PH(t){if(t===EH)return;const i=t.toLowerCase();for(const t of xH)if(t[1]===i||t[2]===i||t["2T"]===i||t["2B"]===i||t[3]===i)return t}var xH=[{l:"Abkhaz",bh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",bh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",bh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",bh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",bh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",bh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",bh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",bh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",bh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",bh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",bh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",bh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",bh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",bh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",bh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",bh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",bh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",bh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",bh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",bh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",bh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",bh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",bh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",bh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",bh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",bh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",bh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",bh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",bh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",bh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",bh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",bh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",bh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",bh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",bh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",bh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",bh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",bh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",bh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",bh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",bh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",bh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",bh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",bh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",bh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",bh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",bh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",bh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",bh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",bh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",bh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",bh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",bh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",bh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",bh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",bh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",bh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",bh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",bh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",bh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",bh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",bh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",bh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",bh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",bh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",bh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",bh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",bh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",bh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",bh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",bh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",bh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",bh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",bh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",bh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",bh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",bh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",bh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",bh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",bh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",bh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",bh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",bh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",bh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",bh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",bh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",bh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",bh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",bh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",bh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",bh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",bh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",bh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",bh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",bh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",bh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",bh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",bh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",bh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",bh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",bh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",bh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",bh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",bh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",bh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",bh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",bh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",bh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",bh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",bh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",bh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",bh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",bh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",bh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",bh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",bh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",bh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",bh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",bh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",bh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",bh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",bh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",bh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",bh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",bh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",bh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",bh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",bh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",bh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",bh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",bh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",bh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",bh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",bh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",bh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",bh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",bh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",bh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",bh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",bh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",bh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",bh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",bh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",bh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",bh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",bh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",bh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",bh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",bh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",bh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",bh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",bh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",bh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",bh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",bh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",bh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",bh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",bh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",bh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",bh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",bh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",bh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",bh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",bh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",bh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",bh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",bh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",bh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",bh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",bh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",bh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",bh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",bh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",bh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",bh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",bh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",bh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",bh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",bh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",bh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",bh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",bh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",bh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",bh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];r();function IH(t){var i;const e=null!=(i=function(t){const i=t.O0,e=new iN;return e.W0(i,0,i.byteLength),lN(e).w1}(t))?i:24;return t.tft/e}function RH(t){return t.Km===Ro.IC}function CH(t,i,e,s,n){const r=function(t,i,e,s){const n=e.tft,r=Wt.fromNumber(t.ZN||0),h=s.lO($c.gF(r,n));return{ift:s.iF(),eft:s,sft:h,nft:s}}(t,0,e,s),h=$c.pF(t.ct||0,e.tft),o=t.SD||0,a=!(65536&o)&&1!==(o>>24&3);let u;const c=dh(n),d=new Ui;for(;d.ac<c.byteLength;){const t=Cu(c,d);if((31&Gp(c,d,1))===aN.a1){const i=new iN;i.W0(n,d.ac-1,d.ac+t-1);const e=new dN(i),s=rN(r.sft,e);u=u||[],u.push(...kH(s))}d.Ny(t-1)}return Mo({},r,{ct:h.iF(),rft:h,hft:r.sft.iF(),oft:r.ift,aft:a,uft:u,cft:!1,dft:!1})}function DH(t){return{$D:t.gD.$D,tft:t.KD.gD.qD}}function BH(t){return t.Km===Ro.OR}r(),r(),r(),r(),r(),r(),r(),r();var NH=class{zO(t){return this.vit===t.vit&&this.eit===t.eit}constructor(t,i){this.vit=void 0,this.eit=void 0,this.vit=t,this.eit=i}};r();var MH=class{get Iit(){return this.lft}get Tit(){return[this]}get Pit(){return this.uZ}get oit(){return this.fft}get cit(){return new NH(this.oit.vit,this.oit.eit+this.Iit.length-1)}vft(t){this.lft+=t}_ft(t){for(const i of t)this.vft(i)}constructor(t,i){this.uZ=void 0,this.fft=void 0,this.lft=void 0,this.uZ=t,this.fft=i,this.lft=""}};function LH(t,i){return t===i||t.Iit===i.Iit&&t.oit.zO(i.oit)&&_t(t.Pit,i.Pit)}function OH(t,i){return t===i||t.oit.zO(i.oit)&&t.cit.zO(i.cit)&&cf(t.Tit,i.Tit,LH)}var FH=class extends _h{GO(t){return cf(this.U,t.U,OH)}constructor(t,i,e){super(t,i,e,!1)}};r();var UH=class{gft(t){return t.vU(this)}pft(t){return De(t,(t,i)=>t.vU(this,i))}mft(t,i){return new VH(t,i).wft()}},VH=class{wft(){if(this.yft)return[];for(let t=0;t<this.vit.length;t++)this.Aft(t);return this.bft(),this.Sft}Tft(t){this.kft=new MH(rF,new NH(this.Eft,t))}bft(){this.kft&&(this.Sft.push(this.kft),this.kft=null)}Aft(t){const i=this.vit[t];HH(i)?this.kft&&this.bft():(this.kft||this.Tft(t),this.kft.vft(i))}get yft(){return this.vit.every(HH)}constructor(t,i){this.vit=void 0,this.Eft=void 0,this.Sft=void 0,this.kft=void 0,this.vit=t,this.Eft=i,this.Sft=[],this.kft=null}};function HH(t){return null==t}var WH=class{static Pft(t,i,e){if(i>=e)return;const s=De(t,(t,i)=>new VH(t.map(t=>t?t.xft():null),i).wft());return 0!==s.length?new FH(i,e,s):void 0}},qH="black",zH="white";r(),r();var GH=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce((t,i)=>(t[i[0]]=i[1],t),{}),XH=class{Ift(t){for(let i=0;i<Ht;i++)t&&(this.Rft[i]=t.Rft[i])}zO(t){for(let i=0;i<Ht;i++)if(this.Rft[i]!==t.Rft[i])return!1;return!0}Cft(){for(let t=0;t<Ht;t++)if(null!==this.Rft[t])return!1;return!0}Dft(t){this.Bft!==t&&(this.Bft=t),this.Bft<0?this.Bft=0:this.Bft>Ht&&(this.Bft=31)}Nft(t){const i=this.Bft+t;this.Dft(i)}Mft(){this.Nft(-1),this.Rft[this.Bft]=null}vft(t){t>=144&&this.Mft();const i=function(t){return GH[t]?String.fromCharCode(GH[t]):String.fromCharCode(t)}(t);this.addParsedChar(i)}addParsedChar(t){this.Bft>=Ht||(32===Number(t)?(this.Rft[this.Bft]=this.Lft?"</i>":"<i>",this.Lft=!this.Lft):this.Rft[this.Bft]=t,this.Nft(1))}Oft(t){for(let i=t;i<Ht;i++)this.Rft[i]=null}Gy(){this.Oft(0),this.Bft=0}Fft(){this.Oft(this.Bft)}Uft(t,i){const e=this.Rft;let s=null;for(let n=0;n<Ht;n++){const r=e[n];null===r?s=null:(s||(s={Gh:n,Xh:t,Ti:0,Mi:1,Rft:[[]]},i.push(s)),s.Rft[0].push(r),s.Ti++)}}vU(t,i){return t.mft(this.Rft,i)}constructor(){this.Rft=[],this.Bft=0,this.Lft=void 0;for(let t=0;t<Ht;t++)this.Rft.push(null);this.Lft=!1}};var jH=class{Vft(t,i){const e="CC"+(this.Hft<<1|this.Wft+1);if(t>=i)return null;const s=(new UH).pft(this.qft.slice(1));return 0===s.length?null:{TO:new FH(t,i,s),WT:e,zft:this.Hft<<1|this.Wft+1}}hr(){this.Gft(),this.Xft=1}jft(){return this.Xft}Qft(t){this.Xft=t}Dft(t){this.qft[this.Xft].Dft(t)}Nft(t){this.qft[this.Xft].Nft(t)}Kft(){return this.Yft}Jft(t){this.Yft=t}vft(t,i){if(i<32||i>127)return;let e="";switch(t){case 0:e=void 0!==YH[i]?YH[i]:String.fromCharCode(i);break;case 1:e=JH[i];break;case 2:this.Zft(),e=ZH[i];break;case 3:this.Zft(),e=$H[i]}e&&this.qft[this.Xft].addParsedChar(e)}Zft(){this.qft[this.Xft].Mft()}$ft(t,i,e){if(t>=i)for(let s=e-1;s>=0;s--)this.qft[t+s]=this.qft[i+s];else for(let s=0;s<e;s++)this.qft[t+s]=this.qft[i+s]}tvt(t,i){for(let e=0;e<=i;e++)this.qft[t+e]=new XH}Gft(){this.tvt(0,QH)}ivt(){this.Xft=this.Yft>0?this.Yft:0,this.Gft()}evt(t){this.svt=t}nvt(t){this.rvt=t}ovt(t){this.avt=t}uvt(t){this.cvt=t}constructor(t,i){this.qft=void 0,this.Xft=void 0,this.Yft=void 0,this.Hft=void 0,this.Wft=void 0,this.svt=void 0,this.rvt=void 0,this.avt=void 0,this.cvt=void 0,this.qft=new Array(QH+1);for(let t=0;t<=QH;t++)this.qft[t]=new XH;this.Xft=1,this.Yft=0,this.Hft=t,this.Wft=i,this.svt=!1,this.rvt=!1,this.avt=zH,this.cvt=qH,this.hr()}},QH=15,KH=function(t){return t[t.dvt=0]="dvt",t[t.lvt=1]="lvt",t[t.fvt=2]="fvt",t[t.vvt=3]="vvt",t}({}),YH={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},JH={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},ZH={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},$H={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},Rr=class{hr(){this._vt=!0,this.gvt=0,this.Vp=0,this.pvt=this.mvt,this.wvt=void 0,this.mvt.hr(),this.yvt.hr(),this.Avt.hr()}bvt(t,i){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|i>>5&1]}Svt(t,i){const e=this.bvt(t,i),s=(30&i)>>1;let n=zH,r=!1;s<7?n=eW[s]:7===s&&(r=!0);const h=!(1&~i);if(4===this.Vp)return;const o=this.pvt;if(3===this.Vp&&e!==o.jft()){const t=1+o.jft()-o.Kft(),i=1+e-o.Kft();o.$ft(i,t,o.Kft()),o.tvt(0,i-1),o.tvt(e+1,QH-e)}o.Qft(e);const a=oF[t<<1&14|i>>5&1]-1;if(a<0)return;const u=function(t,i){const e=i>95?i-96:i-64;return{iit:hF[e].iit,tit:hF[e].tit,eit:hF[e].eit,vit:t}}(a,i);o.Dft(u.eit),this.pvt.evt(h),this.pvt.nvt(r),this.pvt.ovt(n),this.pvt.uvt(qH)}Tvt(t,i){this.pvt.evt(!1),this.pvt.nvt(!1),this.pvt.ovt(zH);const e=this.kvt(t,KH.dvt," ".charCodeAt(0));let s=zH,n=!1;const r=!(1&~i);return s=eW[(14&i)>>1],"white_italics"===s&&(s="white",n=!0),this.pvt.evt(r),this.pvt.nvt(n),this.pvt.ovt(s),e}kvt(t,i,e){if(this.pvt.vft(i,e),2===this.Vp||3===this.Vp){const i=this.Evt(this.pvt,this.gvt,t);return this.gvt=t,i}return null}Evt(t,i,e){return this._vt?null:2===this.Vp||3===this.Vp?t.Vft(e,e+10):t.Vft(i,e)}Pvt(t,i){let e=qH;7&t||(e=iW[(14&i)>>1]),this.pvt.uvt(e)}xvt(t){const i=tW,e=t.Ivt,s=t.Rvt;let n=null;switch(e){case i.RCL:this.Cvt();break;case i.BS:this.Dvt();break;case i.AOD:case i.AON:case i.DER:break;case i.RU2:n=this.Bvt(2,s);break;case i.RU3:n=this.Bvt(3,s);break;case i.RU4:n=this.Bvt(4,s);break;case i.FON:n=this.Nvt(s);break;case i.RDC:this.Mvt(s);break;case i.TR:this.Lvt();break;case i.RTD:this.Ovt();break;case i.EDM:n=this.Fvt(s);break;case i.CR:n=this.Uvt(s);break;case i.ENM:this.Vvt();break;case i.EOC:n=this.Hvt(s)}return n}Uvt(t){const i=this.pvt;if(3!==this.Vp)return null;const e=this.Evt(i,this.gvt,t),s=i.jft()-i.Kft()+1;return i.$ft(s-1,s,i.Kft()),i.tvt(0,s-1),i.tvt(i.jft(),QH-i.jft()),this.gvt=t,e}Bvt(t,i){this.pvt=this.mvt;const e=this.pvt;let s=null;return 3!==this.Vp&&4!==this.Vp&&(s=this.Evt(e,this.gvt,i),this.mvt.ivt(),this.yvt.ivt(),this._vt=!1,e.Qft(QH)),this.Vp=3,e.Jft(t),s}Nvt(t){return this.kvt(t,KH.dvt," ".charCodeAt(0))}Fvt(t){const i=this.mvt;let e=null;return 4!==this.Vp&&(e=this.Evt(i,this.gvt,t)),i.Gft(),this._vt=!1,e}Mvt(t){this.Vp=2,this.pvt=this.mvt,this.pvt.Jft(0),this.gvt=t}Vvt(){this.yvt.Gft()}Hvt(t){let i=null;4!==this.Vp&&(i=this.Evt(this.mvt,this.gvt,t));const e=this.yvt;return this.yvt=this.mvt,this.mvt=e,this.Cvt(),this.gvt=t,i}Cvt(){this.Vp=1,this.pvt=this.yvt,this.pvt.Jft(0)}Dvt(){this.pvt.Zft()}Lvt(){this.Avt.hr(),this._vt=!1,this.Ovt()}Ovt(){this.pvt=this.Avt,this.Vp=4}Wvt(t,i,e){return this.pvt.vft(KH.dvt,i),this.kvt(t,KH.dvt,e)}qvt(t,i,e){const s=1&i?KH.vvt:KH.fvt;return this.kvt(t,s,e)}zvt(t){const i=t.Gvt,e=t.Ivt,s=t.Rvt;if(this.wvt===(i<<8|e))return this.wvt=void 0,null;if(this.wvt=i<<8|e,this.Xvt(i,e))this.Svt(i,e);else{if(this.jvt(i,e))return this.Tvt(s,e);if(this.Qvt(i,e))this.Pvt(i,e);else{if(this.Kvt(i,e))return this.kvt(s,KH.lvt,e);if(this.Yvt(i,e))return this.qvt(s,i,e);if(this.Jvt(i,e))return this.xvt(t);this.isTabOffset(i)&&this.pvt.Nft(e-32)}}return null}isTabOffset(t){return 23===t||31===t}Jvt(t,i){return 20==(246&t)&&32==(240&i)}Xvt(t,i){return 16==(240&t)&&64==(192&i)}jvt(t,i){return 17==(247&t)&&32==(240&i)}Qvt(t,i){return 16==(247&t)&&32==(240&i)||23==(247&t)&&45==(255&i)}Kvt(t,i){return 17==(247&t)&&48==(240&i)}Yvt(t,i){return 18==(246&t)&&32==(224&i)}static Zvt(t){return 16==(112&t)}constructor(t,i){this.Vp=void 0,this.Avt=void 0,this.mvt=void 0,this.yvt=void 0,this.pvt=void 0,this.gvt=void 0,this.wvt=void 0,this._vt=void 0,this.Vp=0,this.Avt=new jH(t,i),this.mvt=new jH(t,i),this.yvt=new jH(t,i),this.pvt=this.mvt,this.gvt=0,this.wvt=void 0,this._vt=!1}},tW={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47},iW=["black","green","blue","cyan","red","yellow","magenta","black"],eW=["white","green","blue","cyan","red","yellow","magenta","white_italics"];r(),r(),r();var sW=class{xft(){return this.$vt}t_t(){return this.svt}i_t(){return this.rvt}e_t(){return this.cvt}s_t(){return this.avt}constructor(t,i,e,s,n){this.$vt=void 0,this.svt=void 0,this.rvt=void 0,this.cvt=void 0,this.avt=void 0,this.$vt=t,this.svt=i,this.rvt=e,this.cvt=s,this.avt=n}},nW=class{n_t(t,i,e,s,n,r,h){this.yz=t,this.r_t=i,this.h_t=e,this.o_t=s,this.a_t=n,this.u_t=r,this.c_t=h}d_t(){this.l_t=[];for(let t=0;t<hW;t++)this.l_t.push(this.f_t())}f_t(){const t=[];for(let i=0;i<rW;i++)t.push(null);return t}v_t(t){this.__t()&&(this.l_t[this.Xft][this.g_t]=new sW(t,this.svt,this.rvt,this.cvt,this.avt),this.g_t++)}p_t(){this.__t()&&(this.g_t<=0&&this.Xft<=0||(this.g_t<=0?(this.g_t=this.c_t-1,this.Xft--):this.g_t--,this.l_t[this.Xft][this.g_t]=null))}__t(){const t=this.Xft<this.u_t&&this.Xft>=0,i=this.g_t<this.c_t&&this.g_t>=0;return t&&i}Re(){return this.yz}m_t(t){let i=0;for(let e=t;e<hW;e++,i++)this.l_t[i]=this.l_t[e];for(let e=0;e<t;e++,i++)this.l_t[i]=this.f_t()}w_t(){if(this.Xft+1>=this.u_t)return this.m_t(1),void(this.g_t=0);this.Xft++,this.g_t=0}y_t(){this.l_t[this.Xft]=this.f_t(),this.g_t=0}Vft(t,i){if(this.OO>=t)return null;const e=WH.Pft(this.l_t,this.OO,t);return e?(this.A_t(t),{TO:e,WT:"svc"+i,zft:i}):null}b_t(t,i){this.Xft=t,this.g_t=i}S_t(t){this.cvt=t}T_t(t){this.avt=t}k_t(t){this.svt=t}E_t(t){this.rvt=t}P_t(){this.Xft=0,this.g_t=0,this.svt=!1,this.rvt=!1,this.avt=zH,this.cvt=qH}x_t(t){this.I_t=t}R_t(){this.yz=!0}we(){this.yz=!1}Mh(){this.yz=!this.yz}A_t(t){this.OO=t}constructor(t){this.C_t=void 0,this.yz=void 0,this.a_t=void 0,this.h_t=void 0,this.r_t=void 0,this.o_t=void 0,this.u_t=void 0,this.c_t=void 0,this.I_t=void 0,this.l_t=void 0,this.OO=void 0,this.Xft=void 0,this.g_t=void 0,this.rvt=void 0,this.svt=void 0,this.avt=void 0,this.cvt=void 0,this.C_t=t,this.yz=!1,this.a_t=!1,this.h_t=0,this.r_t=0,this.o_t=0,this.u_t=0,this.c_t=0,this.I_t=2,this.l_t=[],this.OO=0,this.Xft=0,this.g_t=0,this.rvt=!1,this.svt=!1,this.avt=zH,this.cvt=qH,this.d_t()}},rW=42,hW=15,oW=class{D_t(t){const i=t.B_t();let e=i.zE;const s=i.Rvt;if(e===lW){e=e<<16|t.B_t().zE}return e>=0&&e<=31?this.N_t(e,s):e>=128&&e<=159?this.M_t(t,e,s):(e>=4096&&e<=4127?this.L_t(t,255&e):e>=4224&&e<=4255?this.O_t(t,255&e):e>=32&&e<=127?this.F_t(e):e>=160&&e<=255?this.U_t(e):e>=4128&&e<=4223?this.V_t(255&e):e>=4256&&e<=4351&&this.H_t(255&e),null)}F_t(t){this.W_t&&(127!==t?this.W_t.v_t(String.fromCharCode(t)):this.W_t.v_t("\u266a"))}U_t(t){this.W_t&&this.W_t.v_t(String.fromCharCode(t))}V_t(t){if(!this.W_t)return;if(void 0===fW[t])return void this.W_t.v_t("_");const i=fW[t];this.W_t.v_t(i)}H_t(t){this.W_t&&(160===t?this.W_t.v_t("[CC]"):this.W_t.v_t("_"))}N_t(t,i){if(!this.W_t)return null;const e=this.W_t;let s=null;switch(t){case aW:e.p_t();break;case cW:e.Re()&&(s=e.Vft(i,this.q_t)),e.w_t();break;case dW:e.Re()&&(s=e.Vft(i,this.q_t)),e.y_t();break;case uW:e.Re()&&(s=e.Vft(i,this.q_t)),e.d_t(),e.b_t(0,0)}return s}M_t(t,i,e){if(i>=128&&i<=135){const t=7&i;this.z_t(t)}else{if(136===i){const i=t.B_t().zE;return this.G_t(i,e)}if(137===i){const i=t.B_t().zE;this.X_t(i,e)}else{if(138===i){const i=t.B_t().zE;return this.j_t(i,e)}if(139===i){const i=t.B_t().zE;return this.Q_t(i,e)}if(140===i){const i=t.B_t().zE;return this.K_t(i,e)}if(143===i)return this.hr(e);if(144===i)this.Y_t(t);else if(145===i)this.J_t(t);else if(146===i)this.b_t(t);else if(151===i)this.Z_t(t);else if(i>=152&&i<=159){const s=(15&i)-8;this.n_t(t,s,e)}}}return null}L_t(t,i){i>=8&&i<=15?t.rD(1):i>=16&&i<=23?t.rD(2):i>=24&&i<=31&&t.rD(3)}O_t(t,i){i>=128&&i<=135?t.rD(4):i>=136&&i<=143&&t.rD(5)}z_t(t){this.$_t[t]&&(this.W_t=this.$_t[t])}*tgt(t){for(let i=0;i<8;i++){!(1&~t)&&this.$_t[i]&&(yield i),t>>=1}}G_t(t,i){let e=null;for(const s of this.tgt(t)){const t=this.$_t[s];t.Re()&&(e=t.Vft(i,this.q_t)),t.d_t()}return e}X_t(t,i){for(const e of this.tgt(t)){const t=this.$_t[e];t.Re()||t.A_t(i),t.R_t()}}j_t(t,i){let e=null;for(const s of this.tgt(t)){const t=this.$_t[s];t.Re()&&(e=t.Vft(i,this.q_t)),t.we()}return e}Q_t(t,i){let e=null;for(const s of this.tgt(t)){const t=this.$_t[s];t.Re()?e=t.Vft(i,this.q_t):t.A_t(i),t.Mh()}return e}K_t(t,i){let e=null;for(const s of this.tgt(t)){const t=this.$_t[s];t.Re()&&(e=t.Vft(i,this.q_t)),this.$_t[s]=void 0}return e}hr(t){const i=this.K_t(255,t);return this.Gy(),i}Gy(){this.W_t=void 0,this.$_t=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}Y_t(t){t.rD(1);const i=t.B_t().zE;if(!this.W_t)return;const e=(128&i)>0,s=(64&i)>0;this.W_t.E_t(e),this.W_t.k_t(s)}J_t(t){const i=t.B_t().zE,e=t.B_t().zE;if(t.rD(1),!this.W_t)return;const s=3&i,n=(12&i)>>2,r=(48&i)>>4,h=3&e,o=(12&e)>>2,a=(48&e)>>4,u=this.igt(r,n,s),c=this.igt(a,o,h);this.W_t.T_t(u),this.W_t.S_t(c)}b_t(t){const i=t.B_t().zE,e=t.B_t().zE;if(!this.W_t)return;const s=15&i,n=63&e;this.W_t.b_t(s,n)}Z_t(t){t.rD(1),t.rD(1);const i=t.B_t().zE;if(t.rD(1),!this.W_t)return;const e=3&i;this.W_t.x_t(e)}n_t(t,i,e){const s=void 0!==this.$_t[i];if(!s){const t=new nW(i);t.A_t(e),this.$_t[i]=t}const n=t.B_t().zE,r=t.B_t().zE,h=t.B_t().zE,o=t.B_t().zE,a=t.B_t().zE,u=t.B_t().zE,c=(32&n)>0,d=127&r,l=(128&r)>0,f=h,v=1+(15&o),_=(240&o)>>4,g=1+(63&a);s&&0===(7&u)||this.$_t[i].P_t(),this.$_t[i].n_t(c,d,f,_,l,v,g),this.W_t=this.$_t[i]}igt(t,i,e){const s={0:0,1:0,2:1,3:1};return vW[s[t]<<2|s[i]<<1|s[e]]}constructor(t){this.q_t=void 0,this.$_t=void 0,this.W_t=void 0,this.q_t=t,this.$_t=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.W_t=void 0}},aW=8,uW=12,cW=13,dW=14,lW=16,fW={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},vW=["black","blue","green","cyan","red","magenta","yellow","white"];r();var _W=class{egt(t){if(t.Km===qu.Xlt){const i=63&t.zE;return this.sgt=2*i-1,void(this.ngt=[])}if(this.ngt&&(this.sgt>0&&(this.ngt.push(t),this.sgt--),0===this.sgt)){const t=new gW(this.ngt);this.rgt.push(t),this.ngt=null,this.sgt=0}}hgt(){return this.rgt}ogt(){this.rgt=[]}Gy(){this.rgt=[],this.ngt=[],this.sgt=0}constructor(){this.rgt=void 0,this.ngt=void 0,this.sgt=void 0,this.rgt=[],this.ngt=null,this.sgt=0}},gW=class{agt(){return this.ugt<this.cgt.length}dgt(){return this.ugt}B_t(){if(!this.agt())throw new Ga(Vo.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.cgt[this.ugt++]}rD(t){if(this.ugt+t>this.cgt.length)throw new Ga(Vo.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.ugt+=t}constructor(t){this.ugt=void 0,this.cgt=void 0,this.ugt=0,this.cgt=t}},pW=class{Gy(){this.lgt=0,this.fgt=[],this.vgt=[],this._gt.Gy(),this.hr(),this.ggt.forEach(t=>{t.Gy()})}hr(){this.pgt=0,this.mgt=0,this.wgt.forEach(t=>{t.hr()})}ygt(t,i){if(t.Klt){const e=t.Jlt,s=t.Zlt,n=t.Km;n===qu.qlt||n===qu.zlt?this.fgt.push({Rvt:i,Km:n,Gvt:e,Ivt:s,Agt:this.fgt.length}):this.bgt&&(this.vgt.push({Rvt:i,Km:n,zE:e,Agt:this.vgt.length}),this.vgt.push({Rvt:i,Km:qu.Glt,zE:s,Agt:this.vgt.length}))}}rj(){const t=[];this.fgt.sort((t,i)=>t.Rvt-i.Rvt||t.Agt-i.Agt),this.vgt.sort((t,i)=>t.Rvt-i.Rvt||t.Agt-i.Agt);for(const i of this.fgt){const e=this.Sgt(i);e&&t.push(e)}for(const t of this.vgt)this._gt.egt(t);const i=this._gt.hgt();for(const e of i){const i=this.Tgt(e);t.push(...i)}return this._gt.ogt(),this.fgt=[],this.vgt=[],t}Sgt(t){const i=t.Km;if(Rr.Zvt(t.Gvt)){const e=t.Gvt>>3&1;0===i?this.pgt=e:this.mgt=e}const e="CC"+(i<<1|(i?this.mgt:this.pgt)+1),s=this.wgt.get(e);return 255===t.Gvt&&255===t.Ivt||!t.Gvt&&!t.Ivt||!this.kgt(t.Gvt)||!this.kgt(t.Ivt)?(++this.lgt>=45&&this.hr(),null):(this.lgt=0,t.Gvt&=127,t.Ivt&=127,t.Gvt||t.Ivt?Rr.Zvt(t.Gvt)?s.zvt(t):s.Wvt(t.Rvt,t.Gvt,t.Ivt):null)}Tgt(t){const i=[];try{for(;t.agt();){const e=t.B_t().zE;let s=(224&e)>>5;const n=31&e;if(7===s&&0!==n){s=63&t.B_t().zE}if(0!==s){if(!this.ggt.has(s)){const t=new oW(s);this.ggt.set(s,t)}const e=this.ggt.get(s),r=t.dgt();for(;t.dgt()-r<n;){const s=e.D_t(t);s&&i.push(s)}}}}catch(t){if(!(t instanceof Ga&&t.code===Vo.SUBTITLE_PARSE_ERROR))throw t}return i}kgt(t){let i=0;for(;t;)i^=1&t,t>>=1;return 1===i}constructor(){this.fgt=void 0,this.vgt=void 0,this._gt=void 0,this.lgt=void 0,this.wgt=void 0,this.pgt=void 0,this.mgt=void 0,this.ggt=void 0,this.bgt=!1,this.fgt=[],this.vgt=[],this._gt=new _W,this.lgt=0,this.wgt=xg({CC1:new Rr(0,0),CC2:new Rr(0,1),CC3:new Rr(1,0),CC4:new Rr(1,1)}),this.pgt=0,this.mgt=0,this.ggt=ar(),this.hr()}};r();var mW=class extends wp{constructor(t,i){super("Egt"),this.zft=void 0,this.TO=void 0,this.zft=t,this.TO=i}},wW=$c.eU(.1),yW=class extends Ne{Pgt(t,i){this.xgt.ygt(t,i)}rj(){const t=this.xgt.rj();for(const i of t)this.So(new mW(i.zft,i.TO))}hr(){this.xgt.Gy()}kn(){this.Vo(),this.xgt.Gy()}constructor(){super(),this.xgt=void 0,this.xgt=new pW}},AW=class extends yW{Igt(t,i,e,s){const n=this.Rgt(t,s);this.Cgt(n,i,e),this.rj()}Rgt(t,i){const e=t.slice().sort(aF),s=this.Dgt;if(0===s.length)return e;if(0===e.length)return s;let n;const r=s[0].sit,h=s[s.length-1].sit,o=e[0].sit,a=s[0].kot===e[0].kot;if(h.lF(o).uF().aF($c.eU(2.5*i))&&a)n=s.concat(e).sort(aF);else if(o.nF(r)){let t=0;for(;t<s.length&&s[t].sit.aF(o);)t++;let i=!1,r=!1;for(let n=t,h=0;n<s.length&&h<e.length;n++,h++)bW(s[n],e[h])?i=!0:r=!0;const h=i&&!r,a=i&&r;!i&&r?n=s.concat(e).sort(aF):h?n=s.slice(0,t).concat(e):(n=e,a&&this.hr())}else n=e,this.hr();return n}Cgt(t,i,e){for(let s=0;s<t.length;s++){const n=t[s],r=n.sit.iF();if(!e&&i-r<wW.iF())return void(this.Dgt=t.slice(s));this.Pgt(n,r)}this.Dgt=[]}constructor(...t){super(...t),this.Dgt=[]}};function bW(t,i){return t.sit.zO(i.sit)&&t.Km===i.Km&&t.Jlt===i.Jlt&&t.Zlt===i.Zlt}var SW=class extends es{Bgt(t){return this.Ngt.get(t)}Mgt(t){let i=this.Ngt.get(t.nit);return i||(i=this.Lgt(t),this.Ngt.set(t.nit,i)),i}Lgt(t){const i=[Tn.VI],e=PH(t.rit);let s=e?e.l:"";t.Ogt&&(s="easy "+s,i.push(Tn.zI));const n=t.Th||s||"CC"+t.nit,r=this.Fgt(n,t.rit,i);return this.tt(r),r}Jrt(t){const i=jt.TD(dh(t));this.Ugt=function(t){for(const i of t.Z){const t=DH(i),e=i.KD.hB.uB.dB.fB;let s=Jr(e,t=>t.Km===Ro.JR);if(!s){const t=e.filter(t=>t.Km===Ro.xC),i=Jr(t,t=>{var i;return(null==(i=t.hN)?void 0:i.Km)===Ro.JR});i&&(s=i.hN)}if(!s)continue;const n=$B(dh(s.jB.ck),new Ui),r=s.KB;return Mo({},t,{$D:i.gD.$D,jB:am(s.jB.ck),Ti:s.Ti,Mi:s.Mi,CN:r&&r.CN,RN:r&&r.RN,t2:n.B0,Vgt:n.N0,i2:n.M0,O0:n.O0[0],F0:n.F0[0]})}}(Jr(i,BH))}Odt(t,i,e,s,n,r){var h;if(!this.Ugt)return;if(!S(this.Hgt)&&uh(this.Hgt,i,1e-5))return;S(this.Wgt)||uh(this.Wgt,i,.1)||this.qgt.hr();const o=function(t,i,e,s,n){const r=[],h=i.filter(RH),o=s(e);for(const i of h){const s=Jr(i.Z,t=>t.gD.$D===e.$D);if(!s)continue;const h=s.gD.NN||0,u=s.gD.MN||0;let c=s.GN?s.GN.GN:Wt.ZERO;var a;const d=i.UN+(null!=(a=s.gD.XN)?a:Wt.ZERO).toNumber();for(const a of s.zN){let s=d+(a.UN||0);for(const d of a.JN){const a=d.Vy||u,l=new iN;l.W0(t,s,s+a);const f=$c.gF(c,e.tft);l.DU=n(d,i,e,f,gl(t,s,s+a)),r.push(l),s+=a,c=c.add(d.ct||h||o)}}}return r}(t,jt.TD(dh(t)),this.Ugt,IH,CH);var a;const u=null!=(a=null==(h=vf(o,t=>t.DU.ct))?void 0:h.DU.ct)?a:0,c=function(t){const i=[];for(const e of t)e.DU.uft&&i.push(...e.DU.uft),delete e.DU.uft;for(let t=0;t<i.length;t+=1)i[t].VN=t;return i}(o),d=$c.eU(s),l=[];for(const t of c)l.push(Mo({},t,{kot:n,sit:t.jlt.lO(d)}));this.qgt.Igt(l,e,r,u),this.Hgt=i,this.Wgt=e}ZU(t,i,e){const s=this.zgt(t,i,e);return this.Ngt.forEach((i,e)=>{i===t&&this.Ngt.set(e,s)}),s}hr(){return this.qgt.hr(),this.Ngt.forEach(t=>{t.kn(),this.it(t),this.Ggt(t)}),this.Ngt.clear(),this.Ugt=void 0,this.Hgt=NaN,this.Wgt=NaN,super.hr()}kn(){return this.qgt.mn("Egt",this.Xgt),this.qgt.kn(),super.kn()}constructor(t){super(t),this.qgt=void 0,this.Ugt=void 0,this.Hgt=NaN,this.Wgt=NaN,this.Ngt=void 0,this.Xgt=t=>{const i=this.Mgt({nit:t.zft,rit:""}),e=t.TO;for(const t of i.L.II)e.EO<t.EO&&e.PO>t.EO?e.PO=t.EO:e.EO>t.EO&&t.PO>e.EO?t.PO=e.EO:e.EO===t.EO&&(e.PO=t.PO);this.jgt(i,e)},this.Ngt=ar(),this.qgt=new AW,this.qgt.wn("Egt",this.Xgt)}},TW=class extends SW{Ggt(t){}jgt(t,i){if(t.Xk===xh.Nh)return;const e=i.U.map(t=>t.Iit).join("\n"),s=af(t.L.II,-1);s&&s.U===e&&s.EO<=i.EO&&i.EO<=s.PO?s.PO=_.max(s.PO,i.PO):t.L8(i.EO,i.PO,e)}Fgt(t,i,e){return this.JU.wq({Km:"webvtt",Lt:Ao.FU,Th:t,bs:i})}zgt(t,i,e){return t}},kW=class extends SW{Ggt(t){this.JU.iV(t)}jgt(t,i){t.tV(i)}Fgt(t,i,e){return this.JU.tI(Ao.FU,t,t,i,!1,nh.CEA608,void 0,e)}zgt(t,i,e){return Ut(t,i,e)}};r(),r();var EW=/(.*)=(.*)/,PW=/(.*):(.*)/;function xW(t){if(!t)return[];const i=[],e=t.trim().split(";");for(const t of e){const e=t.match(EW);if(e){const[,t,s]=e;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(PW)){const[,i,e]=t.match(PW);switch(i){case"lang":n=e;break;case"er":r=Boolean(Number(e))}}i.push({nit:Number(t),rit:n,Ogt:r})}}return i}var IW={1:1,2:3,3:2,4:4},RW="urn:scte:dash:cc:cea-608:2015",CW="urn:scte:dash:cc:cea-708:2015";r(),r();var DW=class extends Oi{xa(){return new BW(this.kot&&this.kot.Ca)}constructor(t,i,e){super(Te.TI),this.kot=void 0,this.Dut=void 0,this.Qgt=void 0,this.kot=t,this.Dut=i,this.Qgt=e}},BW=class extends wp{constructor(t){super("activequalitychanged"),this.quality=void 0,this.quality=t}},NW=[d.uo,Do.wI,d._y],MW=class extends Ne{Kgt(t){const i=this.flt.Cot;for(const e of i.Ht.rat)if(i.$ut.Kut(t,e))return e}kn(){this.Vo(),this.TL.mn(NW,this.Ygt)}constructor(t,i){super(),this.TL=void 0,this.flt=void 0,this.Jgt=void 0,this.Ygt=t=>{const i=this.Jgt,e=this.Kgt(t.currentTime)||this.flt.Pot;e&&i!==e&&(this.Jgt=e,e.kot&&this.So(new DW(e.kot,null==e?void 0:e.Ca,null==i?void 0:i.Ca)))},this.TL=t,this.TL.wn(NW,this.Ygt),this.flt=i}};function LW(t,i,e){const s=new lc(dh(t),new Ui),n=Cl.vD(s,Ro.OR);if(!n)return;const r=Cl.aD(n.ck),h=Jr(r,t=>t.Km===Ro.UR),o=Jr(r,t=>t.Km===Ro.FC);if(!h)return;const a=Cl.vD(h.ck,Ro.WR);if(!a)return;const u=Cl.vD(a.ck,Ro.GR);if(!u)return;const c=Cl.vD(u.ck,Ro.XR);if(!c)return;const d=Cl.aD(c.ck),l=Jr(d,t=>t.Km===Ro.jR);if(!l)return;const f=Cl.yD(l.ck,Ro.jR,!1),v=new lc(dh(f.ck),new Ui);v.rD(4);const _=Cl.aD(v),g=[];for(const t of _){if(t.Km===Ro.EC||t.Km===Ro.xC)return;t.Km===Ro.JR?g.push({Zgt:t,$gt:Ro.xC}):t.Km===Ro.wC&&g.push({Zgt:t,$gt:Ro.EC})}if(!function(t,i){return void 0===t&&void 0!==i&&i.length>0}(o,i)&&0===g.length)return;let p=Gu(t);const m=Jr(r,t=>t.Km===Ro.KR),w=m?Cl.vD(m.ck,Ro.YR):void 0,y=w?function(t){const i=t.ck.Ly();return i.rD(4),i.rD(4),i.ZC()}(w):1,A=Jr(d,t=>t.Km===Ro.QR);A&&function(t,i,e){const s=UW(dh(t),i),n=Cl.fD(s,new Ui),r=n.ck;r.rD(4);const h=r.ZC();for(let t=0;t<h;t++){r.rD(4),r.rD(4);const t=r.KC.Ly(),i=r.ZC();di(r.ck,t,i+e)}}(p,A,g.length),w&&function(t,i,e){const s=UW(dh(t),i),n=Cl.fD(s,new Ui),r=n.ck;r.rD(4),r.rD(4),di(r.ck,r.KC,e)}(p,w,1),p=function(t,i,e,s){if(e||!s)return t;let n=t;for(const t of s)n=OW(n,i,new j(t));return n}(p,n,o,i);const b=[n,h,a,u,c,l];for(let t=g.length-1;t>=0;t--){const i=g[t];p=FW(p,i.Zgt,l,b,i.$gt,e)}return{tpt:p,ipt:{ept:g.length,BN:y}}}function OW(t,i,e){const s=gm(t,e,i.ck.ck.byteOffset+i.ck.ck.byteLength);return VW(UW(dh(s),i),e.byteLength),s}function FW(t,i,e,s,n,r){const h=function(t,i,e){0;const s=t.ck.ck,n=GW(),r=new j(s.byteLength+n.byteLength),h=dh(r);r.set(ta(s),0),VW(h,n.byteLength),Zp(h,new Ui(QW),i),r.set(n,s.byteLength),Zp(h,new Ui(s.byteLength+XW),t.Km),e&&qp(h,new Ui(s.byteLength+jW),e);return r}(i,n,r),o=gm(t,h,i.ck.ck.byteOffset),a=dh(o);!function(t,i){const e=Cl.fD(t,new Ui),s=Cl.yD(e.ck,Ro.jR,!1),n=dh(s.ck),r=n.getUint32(0);n.setUint32(0,r+i)}(UW(a,e),1);for(const t of s)VW(UW(a,t),h.byteLength);return o}function UW(t,i){const e=i.ck.ck.byteOffset;return Au(t,e,e+i.ck.ck.byteLength)}function VW(t,i){const e=new Ui,s=Cu(t,e);if(0===s);else if(1===s){e.Ny(4);const s=et(t,e.Ly());Qp(t,e,s.add(i))}else e.My(0),di(t,e,s+i)}r();var HW=class extends Xo{start(t){this.YJ=t}transform(t){this.A$(t),this.spt()}flush(){this.S$(),this.spt()}C$(t){return t===Ro.IC}B$(t){let i=Gu(ta(t.ck.ck));const e=Cl.fD(dh(i),new Ui);i=WW(i,e,this.npt),this.rpt.push(i)}M$(t){this.rpt.push(t)}spt(){for(const t of function(t){if(t.length<2)return t;const i=[];let{buffer:e,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const h=t[r];e===h.buffer&&s+n===h.byteOffset?n+=h.byteLength:(i.push(new j(e,s,n)),({buffer:e,byteOffset:s,byteLength:n}=h))}return i.push(new j(e,s,n)),i}(this.rpt))this.YJ.enqueue(t);Yo(this.rpt)}constructor(t){super(),this.npt=void 0,this.YJ=void 0,this.rpt=[],this.npt=t}};function WW(t,i,e){let s=t;const n=Cl.aD(i.ck);for(let t=n.length-1;t>=0;t--){const r=n[t];r.Km===Ro.DC&&(s=qW(s,r,i,e))}return s}function qW(t,i,e,s){const n=UW(dh(t),i),r=Cl.fD(n,new Ui),h=Cl.aD(r.ck),o=Jr(h,t=>t.Km===Ro.BC);if(!o)return t;const a=o.ck,u=a.KC.Ly(),c=a.ZC(),{flags:d}=hT(c);a.rD(4),d.Oy(Jh.BASE_DATA_OFFSET_PRESENT)&&a.rD(8);const l=a.KC.Ly();if(d.Oy(Jh.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const i=Cu(a.ck,l);return di(a.ck,a.KC,i+s.ept),t}{di(a.ck,u,c|Jh.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new j(4);dh(n).setUint32(0,s.BN+s.ept);const r=a.ck.byteOffset+l.ac;for(const t of h.filter(t=>t.Km===Ro.NC))zW(t,n.byteLength);for(const s of[o,i,e])VW(UW(dh(t),s),n.byteLength);return gm(t,n,r)}}function zW(t,i){const e=t.ck,s=e.ZC(),{flags:n}=hT(s);if(e.rD(4),n.Oy(eT.DATA_OFFSET_PRESENT)){const t=e.Ly().ZC();di(e.ck,e.KC,t+i)}}var GW=mu(()=>new j([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),XW=16,jW=64,QW=4,KW=[Mc.ma,d.iy,d.oy,d.ly,d.Sw],YW=class extends Ne{get hpt(){return this.dlt}get o(){return this.hS}get B3(){return this.N3}get nt(){return this.opt}get plt(){return function(t){const i=29.97,e=1024,s=44100;return t===Ci.Dk?s/e:i}(this.N3)}get vlt(){return 1/this.plt}get Rt(){return Boolean(this.dlt&&this.dlt.Rt)}get ZZ(){const t=this.flt?this.flt.Cot.ZZ.zut:ve.iL();return this.upt().OM(t)}get IP(){let t=this.cpt();const i=this.dpt;return void 0!==i&&t.CM().Cr(i)&&(t=t.OM(ve.$M(i))),t}get Uut(){return XU(this.cpt(),this.ZZ.OM(this.lpt)).LM(2*this.vlt)}get lpt(){const t=this.dpt;if(t&&isFinite(t)){const i=this.fpt.An;if(isFinite(i)&&t<i)return new ve([t,i],[!1,!0])}return ve.iL()}get Sx(){const t=this.dlt;if(!t)return ve.$M(0);const i=t.Nut.Alt,e=t.Nut.blt;if(void 0===e||void 0===i)return ve.$M(0);const s=e;let n=i>=t.Nut.wct.An?_.max(i,this.An):i;return n=_.max(s,n),ve.tL(s,n).CM()}get QW(){return this.Uut.JM(this.MP)}get qut(){return this.fpt.qut}get MP(){return this.TL.MP}get Tn(){return this.dlt?this.dlt.Nut.wct.Tn:NaN}get An(){const t=this.vpt(),i=this.dpt;return void 0===t?NaN:void 0!==i?i:t}vpt(){var t;return null==(t=this.dlt)?void 0:t.Nut.wct.An}get Mi(){return this.fpt.Mi}get Ti(){return this.fpt.Ti}get _pt(){return this.dpt}zot(){return void 0!==this.flt&&this.flt.zot}Wut(){if(void 0===this.dpt)return!1;const t=this.cpt().CM(),i=t.VM(this.dpt);return!(i<0)&&t.Tn(i)!==this.dpt}C3(){const t=this.fpt.qut,i=this.cpt().Mn(t);this.dpt=i.V>0?i.An(i.V-1):0;const e=t.An(0);isFinite(e)&&this.dpt<e&&this.t$(this.dpt,e),this.gpt()}async Odt(t,i,e,s){const n=e.$rt.bU,r=this.ppt(t,i,e,n,s),h=this.mpt(t,i,e,n,s),[o]=await gn([h,r]);return o}async ppt(t,i,e,s,n){if(!Hh(e.oQ))return;let r;if(t.Km===Po.BT){const i=t.ck.Jat(),e=await i.HT(n);r=new j(e)}else r=new j(t.ck.Iht);const h=[];if(void 0!==this.wpt&&(this.wpt.Odt(r,i.EO,s),h.push(this.wpt)),void 0!==this.ypt){const t=e.mct(i);this.ypt.Odt(r,i.EO,i.PO,s,e.kot,t),h.push(this.ypt)}$P(this.IP,h)}async mpt(t,i,e,s,n){var r;let h;if(ii(n),t.Km===Po.BT){let i=t.ck.WT;this.Apt&&(i=function(t,i){return t.pipeThrough(new Ta(new HW(i)))}(i,this.Apt)),h={Km:Po.BT,ck:i}}else{let i=new j(t.ck.Iht);this.Apt&&(i=function(t,i){let e=Gu(t);const s=new lc(dh(e),new Ui),n=Cl.aD(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.Km===Ro.IC&&(e=WW(e,s,i))}return e}(i,this.Apt)),h={Km:Po.vZ,ck:i}}const o={xet:i.EO,ct:i.ct,bU:s,i2:null==(r=e.kot)?void 0:r.jI},a=this.Trt.IP;await this.bpt(),await this.Trt.H2(h,o,n);return function(t,i,e,s){let n,r,h=i.UM(t.CM());h=h.UM(e.UM(i)),!1;0===h.V?(n=s.PO,r=n):(n=h.Tn(0),r=h.An(0));return{kdt:n,Edt:r}}(a,this.Trt.IP,this.Trt.M3,i)}async Jrt(t,i,e){var s,n;ii(e),this.ypt&&this.ypt.Jrt(new j(t.Iht));let r=new j(t.Iht);if(this.Spt(i)){const t=this.fpt.Tpt;let i,e=[];t&&(e=De(t.kpt,t=>t.BW),i=t.Ept.uH?OC(t.Ept.uH):void 0);const s=LW(r,e,i);s?(this.Apt=s.ipt,r=s.tpt):this.Apt=void 0}if((null==(s=this.Trt)?void 0:s.Cd)&&this.Trt.Cd.qT!==i.qT){const t={qT:i.qT};this.Trt.TZ(t)&&(await this.Trt.EZ(t),ii(e))}const h={Km:Po.vZ,ck:r};await this.bpt(),await this.Trt.z2(h,{i2:null==(n=i.kot)?void 0:n.jI},e)}Ldt(t,i,e){return this.Trt._S(t,i,e)}t$(t,i){this.Trt.F3(t,i)}i$(t,i){this.Trt.U3(t,i)}cpt(){return this.Trt?this.Trt.IP:ve.iL()}upt(){return this.Trt?this.Trt.M3:ve.iL()}Ppt(){return this.Trt?this.Trt._S(0,1/0):Promise.resolve()}xpt(){return this.Trt&&(this.Trt.mn(Zs.lZ,this.Rs),this.Trt=void 0),Promise.resolve()}async Ipt(t){var i;const e=Br.Yct(null!=(i=t.ilt)?i:t.rat,this.Vct).oQ;this.Trt||(this.Trt=this.fpt.Rpt(e),this.Trt.wn(Zs.lZ,this.Rs),this.Qct=new iH(this.Trt)),await this.bpt()}Un(t,i){const e=at.ep([i]);this.rV.Zg(),this.rV=e;const s=this.Cpt(t,this.Dpt,e.Yg);return this.Dpt=s,s}Bpt(t){if(pi(this.Npt,nh.CEA608))return;const i=t.Nut.Wdt;if(function(t){return t.some(t=>t.y8===RW||t.y8===CW)}(i)){this.ypt=new kW(this.JU);const t=function(t){const i=[];for(const e of t)if(e.y8===RW){const t=cF(e.zE);for(const e of t)i.push(e)}else if(e.y8===CW){const t=xW(e.zE);for(const e of t)if(e.nit<=4){const t=IW[e.nit];i.push(Mo({},e,{nit:t}))}}return i}(i);for(const i of t)this.ypt.Mgt(i);this.opt.FW(this.ypt.Z)}}async Cpt(t,i,e){ii(e),i&&await i.catch(Ct),this.dlt===t&&this.Mpt||(await this.Lpt(),ii(e),await this.Ppt(),ii(e),t&&await this.sV(t))}async Lpt(){const t=this.dlt;this.dlt=void 0,this.Mpt=!1,this.dpt=void 0,t&&(t.mn(Te.EI,this.Opt),t.ult(!1),t.mn(Te.NO_QUALITY,this.Rs)),this.Fpt&&(this.Fpt.kn(),this.Fpt=void 0),this.flt&&(await this.flt.kn(),this.flt=void 0),this.ypt&&(this.opt.WW(this.ypt.Z),await this.ypt.kn())}async sV(t){this.dlt=t,this.Bpt(t),t.wn(Te.EI,this.Opt),t.wn(Te.NO_QUALITY,this.Rs),await this.Ipt(t),this.flt=this.Upt(t),this.flt.wn(KW,this.Rs),this.flt.wn("Eot",this.gpt),this.flt.Bot=t.ilt,this.Fpt=new MW(this.TL,this.flt),this.Fpt.wn(Te.TI,this.Ydt),t.ult(!0),this.Mpt=!0}Upt(t){return new tH(this,this.TL,this.TL,this.nV,this.Rz,this.Vdt,this.eut,this.Xct,this.Vct,this.Qct,this._dt,this.lq).Ret(t)}async hr(t){this.rV.Zg(),this.Dpt&&(await this.Dpt.catch(Ct),this.Dpt=void 0),await this.Lpt(),t||await this.Ppt(),await this.xpt()}async Vpt(){await this.Lpt()}Qdt(t){var i;null==(i=this.hpt)||i.Qdt(t)}async Gdt(t,i){var e,s;await this.Jot(),null==(e=this.hpt)||e.Gdt(i);const n=null==(s=this.flt)?void 0:s.Cot.$ut.Xut(t);if(n&&n.V>0)for(let t=0;t<n.V;t++){var r;await(null==(r=this.Trt)?void 0:r._S(n.Tn(t),n.An(t)))}await this.$ot()}Hpt(t){const i=t.Ht.ilt;if(void 0===i)return this.Wpt(t);if(i.some(t=>this.Qct.TZ(t)))return this.Wpt(t);this.So(new wp("qpt"))}Wpt(t){this.flt&&this.dlt&&this.dlt===t.Ht&&(this.flt.Bot=this.dlt.ilt)}async Jot(t){this.flt&&await this.flt.Jot(t)}async $ot(t){this.flt&&await this.flt.$ot(t)}YY(){const t=this.IP.ZM;return this.Rz.YY(t)}bpt(){const t=this.fpt.qut,i=_.max(0,t.Tn(0)-.1),e=t.An(0)+.01;return this.Trt.r3(i,e)}Spt(t){if(!Hh(t.oQ))return!1;if(this.fpt.p8)return!0;return void 0!==this.fpt.Tpt}iat(t){if(!RT(this.N3))return;const i=this.flt,e=t.flt;void 0!==i&&void 0!==e&&i.iat(e,this.Tn,this.An)}async kn(t){this.Vo();try{await this.hr(t),await this.Vpt()}catch(t){}}constructor(t,i,e,s,n,r,h,o,a,u,c,d,l){super(),this.hS=void 0,this.N3=void 0,this.dlt=void 0,this.flt=void 0,this.Xct=void 0,this.Vct=void 0,this.Mpt=!1,this.rV=new at,this.Dpt=void 0,this.Fpt=void 0,this.dpt=void 0,this.Trt=void 0,this.Qct=new eH,this.Apt=void 0,this.fpt=void 0,this.TL=void 0,this.nV=void 0,this.Rz=void 0,this.wpt=void 0,this.ypt=void 0,this.opt=new Yu([]),this.JU=void 0,this.eut=void 0,this._dt=void 0,this.Npt=void 0,this.Vdt=void 0,this.lq=void 0,this.gpt=()=>{!this.zot()&&this.Wut()&&this.fpt.gpt()},this.Ydt=t=>{this.dlt.Ydt(t),this.So(new mH(t.Dut,t.Qgt))},this.Opt=t=>{this.Hpt(t)},this.hS=function(){const t=JW;return JW+=1,t}(),this.N3=t,this.nV=s,this.Rz=n,this.fpt=i,this.TL=e,this.eut=r,this.JU=h,this.wpt=o,this.Xct=a,this.Vct=a?MT(t,a):void 0,this._dt=u,this.Npt=c,this.Vdt=d,this.lq=l}};var JW=0;var ZW=class extends Ne{VY(t,i){return this.zpt(t,i)}async zpt(t,i){for(const i of t)this.Gpt(i);await this.Un(i);for(const t of this.jpt.Xpt)t.Km===Ci.NT&&(t.rat&&0!==t.rat.length?await this.Qpt.sV(t):this.So(new _H("No supported representation found in the AdaptationSet with mimetype : "+t.Km)))}get jI(){return this.gO}get ct(){return this.TL.ct}Kpt(t){return new YW(t,this,this.TL,this.nV,this.Rz,this.eut,this.JU,this.wpt,this.Ypt,this._dt,this.Npt,this.Vdt,this.lq)}zot(){return this.Nlt.some(t=>t.zot())}Wut(){return 0!==this.Nlt.length&&this.Nlt.every(t=>t.Wut())}gpt(){this.Jpt()&&this.So(new pH)}Rpt(t){if(I(t)){if(this.d3.Q3)return this.d3.Q3}else if(tt(t)&&this.d3.K3)return this.d3.K3;throw new m("Cannot allocate source buffer for mime type "+t)}Zpt(t){t.wn([Mc.ma,d.Yw,d.iy,d.oy,d.ly,d.Sw],this.Rs),t.wn(Zs.lZ,this.$pt),t.wn("qpt",this.Rs)}get Rt(){return this.Nlt.some(t=>t.Rt)}async tmt(t){await Promise.all(this.Nlt.map(i=>i.kn(t))),Yo(this.Nlt)}get ht(){return this.YL}get IP(){if(0===this.Nlt.length)return ve.iL();const t=this.Nlt.map(t=>t.IP);let i=ve.tL(0,1/0);for(const e of t)i=i.Mn(e);if(0===i.V)return i;if(this.Wut()){const t=i.Mn(this.qut);if(0===t.V)return i;const e=t.An(t.V-1);let s=0;for(const t of this.Nlt)s=_.max(s,t._pt);e<=s&&(i=i.OM(new ve([e,s],[!0,!0])))}return i}get p8(){return this.TL.p8}get MP(){return this.TL.MP}get Tpt(){return this.imt}get An(){if(this.emt){const t=this.ct;if(!S(t)&&t!==Xl)return t}if(!this.Nlt.length)return NaN;let t=0;for(const i of this.Nlt)t=_.max(t,i.An);return t}get emt(){const t=this.jpt.Idt;if(t.Km===Eh.wV)return!1;const i=t.smt;return 0!==i.length&&this.jpt===i[i.length-1]}get Sx(){if(!this.Nlt.length)return ve.iL();let t=ve.eL();for(const i of this.Nlt)t=t.Mn(i.Sx);if(t.V>0&&this.emt&&isFinite(this.ct)){const i=this.ct,e=t.An(t.V-1);i>e&&(t=t.OM(ve.tL(e,i).CM()))}return t}get Mc(){return this.jpt}get nt(){return this.Gl}get rt(){return this.$L}get Ti(){return this.ju.Ti}get Mi(){return this.ju.Mi}get QW(){const t=this.MP,i=this.IP,e=i.VM(t);if(-1!==e)return{Tn:i.Tn(e),An:i.An(e)}}get qut(){const t=this.jpt.Tn,i=this.emt?1/0:this.jpt.An;return ve.tL(t,i)}Jpt(){if(this.zot())return!1;if(!this.Wut())return!1;const t=this.IP;if(0===t.V)return!1;const i=this.MP;if(this.emt)return t.Tn(t.V-1)<=i;{const e=t.Mn(this.qut);if(0===e.V)return!0;const s=e.Tn(e.V-1),n=e.An(e.V-1)+.1;return s<=i&&i<=n}}get nmt(){return this.hmt}async Jot(t){this.hmt||(this.hmt=!0,await Promise.all(this.Nlt.map(i=>i.Jot(t))))}async $ot(t){this.hmt&&(this.hmt=!1,await Promise.all(this.Nlt.map(i=>i.$ot(t))))}async kn(t){this.TL.mn(d.py,this.omt),this.TL.mn(d.Pw,this.amt),this.TL.mn(d.LICENSE_REQUEST_GENERATED,this.umt),this.Vo(),this.jpt.mn(Ls.bot,this.Rs),this.cmt.Zg(),this.Dpt&&(await this.Dpt.catch(Ct),this.Dpt=void 0),await this.tmt(t),await this.Qpt.kn(),this.YL.kn(),this.$L.kn(),this.Gl.kn(),this.dmt()}Gpt(t){this.lmt.push(t),t.wn("fmt",this.vmt);const i=t.Km===Ci.Dk?this.YL:this.$L;for(const e of t.Z)i.tt(e)}_mt(t){const i=t.Km===Ci.Dk?this.YL:this.$L;for(const e of t.Z)i.it(e),e.kn();t.kn(),oi(this.lmt,t)}dmt(){for(let t=this.lmt.length-1;t>=0;t--)this._mt(this.lmt[t])}get gmt(){return this.lmt.map(t=>t.hpt).filter(it)}get pmt(){return this.Nlt.map(t=>t.hpt).filter(it)}Un(t,i){return this.cmt.Zg(),this.cmt=at.ep([i]),this.Dpt=$e(this.lE(t,this.Dpt,this.cmt.Yg),this.cmt).catch(this.mmt),this.Dpt}async lE(t,i,e){i&&await i.catch(Ct),ii(e);const s=[],n=this.Nlt.slice(),r=t.slice();Yo(this.Nlt);for(const t of n){const i=t.hpt;i&&pi(r,i)?(this.Nlt.push(t),s.push(t.Un(i,e)),oi(r,i)):(this.Gl.WW(t.nt),await t.kn(),ii(e))}for(const t of r){const i=this.Kpt(t.Lot);this.Gl.FW(i.nt),this.Nlt.push(i),this.Zpt(i),s.push(i.Un(t,e))}await Promise.all(s)}async EZ(t,i,e){this.d3!==e&&(this.d3=e,await this.tmt(!1)),await this.Un(t),this.imt=i}async wmt(t){for(const i of this.Nlt){const e=i.hpt;if(void 0!==e)for(const s of e.Nut.rat){(s.xW||[]).some(i=>i.uH&&L(wa(t),OC(i.uH)))&&!s.olt&&(s.olt=!0,await i.Gdt(s,s.kot),this.So(new wL(new fs(Vo.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions"))))}}}async ymt(t){for(const i of this.Nlt){const e=i.hpt;if(void 0!==e)for(const s of e.rat){const e=s.xW,n=s.kot;if(void 0===e||0===e.length||void 0===n)continue;if(!e.some(t=>pi(s.Amt,t)))continue;const r=this.bmt(e,t.Ty);n.cst!==r&&(r?i.Qdt(n):await i.Gdt(s,n))}}}bmt(t,i){let e=!1;const s=t.reduce((t,i)=>!i.uH||pi(t,i.uH)?t:[...t,i.uH],[]);return 0===s.length||(i.zy((n,r)=>{if("usable"!==n)return;(t.some(t=>t.uH&&L(wa(r),OC(t.uH)))||fm(r,Cc)&&1===s.length&&1===i.Vy)&&(e=!0)}),e)}iat(t){if(void 0===t)return;const i=t.jpt;if(this.jpt.Smt===i||this.jpt.Tmt===i)for(const i of this.Nlt){const e=Jr(t.Nlt,t=>t.B3===i.B3);void 0!==e&&i.iat(e)}}get kmt(){return this.lmt}constructor(t,i,e,s,n,r,h,o,a,u,c,l,f,v){var _,g;super(),this.gO=void 0,this.YL=new rs,this.$L=new rs,this.Gl=void 0,this.JU=void 0,this.Qpt=void 0,this.nV=void 0,this.Rz=void 0,this.eut=void 0,this.TL=void 0,this.jpt=void 0,this.lmt=[],this.cmt=new at,this.hmt=!0,this.Nlt=[],this.imt=void 0,this.lq=void 0,this.Dpt=void 0,this._dt=void 0,this.Npt=void 0,this.d3=void 0,this.Vdt=void 0,this.ju=void 0,this.wpt=void 0,this.Ypt=void 0,this.$pt=ph(()=>{this.So(new H(this.MP))},350),this.vmt=t=>{const i=t.Emt.hpt;if(i)for(const t of this.lmt){var e;t.hpt&&t.hpt!==i&&t.Km===(null==(e=i.Jdt)?void 0:e.Km)&&(t.mn("fmt",this.vmt),t.hpt.Rt=!1,t.wn("fmt",this.vmt))}this.Rs(t)},this.mmt=t=>{D(t)||this.So(new Pi(vA(t,Vo.MEDIA_LOAD_ERROR)))},this.omt=t=>{const i=t.z6;i&&this.wmt(i).catch(this.mmt)},this.Pmt=t=>{this.ymt(t).catch(this.mmt)},this.umt=t=>{for(const i of this.Nlt){const e=i.hpt;if(void 0!==e)for(const i of e.rat){const e=i.xW;if(void 0===e||0===e.length)continue;const s=t.Ey;e.filter(t=>t.A8&&L(new j(s),new j(t.A8))).forEach(t=>{i.xmt(t)})}}},this.amt=t=>{const i=t.z6;if(i)for(const t of this.pmt)for(const e of t.Nut.rat){const s=(e.xW||[]).some(t=>t.uH&&L(wa(i),OC(t.uH)));e.olt&&s&&(e.olt=!1,e.kot&&t.Qdt(e.kot))}},this.nV=e,this.Rz=s,this.eut=n,this.TL=t,this.gO=ki(),this.lmt=[],this.jpt=h,this.imt=o,this.lq=v,this.JU=u,this.Qpt=new vH(t,e,s,n,u,null==(g=null==r||null==(_=r.dash)?void 0:_.segmentRelativeVttTiming)||g),this.Gl=new Yu([this.Qpt.nt]),this._dt=l,this.Npt=f,this.jpt.wn(Ls.bot,this.Rs),this.ju=a,this.d3=i,this.Vdt=r.lowLatency,this.wpt=c,this.Ypt=r.abr,this.TL.wn(d.py,this.omt),this.TL.wn(d.Pw,this.amt),this.TL.wn(d.LICENSE_REQUEST_GENERATED,this.umt)}};r(),r(),r();var $W=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,tq=class t{static TD(i){const e=i.match($W);if(!e)throw new m("The given value could not be parsed as a valid DateTimeInterval");const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=Number(e[4])||0,o=Number(e[5])||0,a=Number(e[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*h+60*o+a)}get ift(){return $c.eU(this.Imt,1e3)}Rmt(){return this.Imt}Cmt(){return 1e3*this.Imt}constructor(t){this.Imt=void 0,this.Imt=t}};r();var iq=function(t){return t.Dmt="progressive",t.Bmt="interlaced",t.pk="unknown",t}({});r();var eq=class{iF(){return this.Nmt/this.Mmt}constructor(t,i){this.Nmt=void 0,this.Mmt=void 0,this.Nmt=t,this.Mmt=i}};r();var sq=1886614376;function nq(t){const i=OC(Ug),e=t.byteLength,s=12+i.length+4+e,n=new j(s),r=dh(n),h=new Ui;return di(r,h,s),di(r,h,sq),di(r,h,0),qp(r,h,i),di(r,h,e),qp(r,h,new j(t)),n}var rq=/^(?:true|false)$/i,hq=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function Su(t){if(void 0!==t)return tq.TD(t)}function oq(t){if(void 0===t)return;const i=t.match(hq);if(!i)throw new m("The given value could not be parsed as a valid Date");const[,e,s,n,r,h,o,a,u,c,d,l]=i,f=("-"===e?-1:1)*Number(s),v=Number(n)-1,g=Number(r),p=Number(h);let w=Number(o);const y=Number(a),A=Number("0."+(u||"")),b=_.round(1e3*A);if(c){w-=("-"===c?-1:1)*(60*Number(d)+Number(l))}const T=new Date(Date.UTC(f,v,g,p,w,y,b));if(S(T.getTime()))throw new m("The given value could not be parsed as a valid Date");return T}function aq(t){if(!t)return;const i=/(\d+)-(\d+)/.exec(t);return i?[ti(i[1]),ti(i[2])]:void 0}function uq(t){if(void 0!==t){if(!S(Number(t)))try{return Wt.fromString(t,!0)}catch(t){}throw new m("The given value could not be parsed as a valid unsigned long")}}function ti(t){if(void 0===t)return;const i=Number(t);if(!S(i))return i;throw new m("The given value could not be parsed as a valid Number")}function cq(t){if(void 0===t)return;const i=t.split("/"),e=Number(i[0]),s=Number(i[1]||1);if(!S(e)&&!S(s))return new eq(e,s);throw new m("The given value could not be parsed as a valid frame rate")}function Xn(t){if(void 0!==t){if(rq.test(t))return"true"===t.toLowerCase();if(!S(x(t)))return Boolean(x(t));throw new m("The given value could not be parsed as a valid Boolean.")}}function dq(t){return{Yu:t.eP,Lmt:Xn(t.sP("availabilityTimeComplete")),Omt:ti(t.sP("availabilityTimeOffset"))}}function lq(t){return t.map(dq)}function fq(t){const i=Sq(t),e=function(t,i,e,s){let n=t.nP(e,i);return void 0===n&&(n=t.sP(s+":"+i)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=yP(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=wu(n.eP)),!s){const i=yP(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==i&&(s=function(t){const i=wu(t.eP);return nq(i)}(i))}return{uH:e,A8:s,y8:i.y8,zE:i.zE}}function vq(t){return{Fmt:t.sP("sourceURL"),Sat:aq(t.sP("range"))}}function _q(t,i){const e=t.sP("d"),s=t.sP("t"),n=ti(t.sP("r"));i.push({ct:e,EO:s,Umt:n})}function gq(t){return{aut:t.sP("index"),Vmt:aq(t.sP("indexRange")),KD:t.sP("media"),Hmt:aq(t.sP("mediaRange"))}}function pq(t){const i=wq(t),e=function(t){const i=t.map(gq);return i.length>0?i:void 0}(t.YE("SegmentURL"));return Mo({},i,{Wmt:e,qmt:t.sP("xlink:href"),zmt:t.sP("xlink:actuate")})}function mq(t){const i=Xn(t.sP("availabilityTimeComplete")),e=ti(t.sP("availabilityTimeOffset")),s=aq(t.sP("indexRange")),n=Xn(t.sP("indexRangeExact")),r=t.YE("Initialization");if(r.length>1)throw new m("The provided MPEG-DASH document's "+t.JE+" element can not have more than one Initialization element.");const h=1===r.length?vq(r[0]):void 0,o=uq(t.sP("presentationTimeOffset")),a=t.YE("RepresentationIndex");if(a.length>1)throw new m("The provided MPEG-DASH document's "+t.JE+" element can not have more than one RepresentationIndex element.");return{Lmt:i,Omt:e,Vmt:s,Gmt:n,Xmt:h,jmt:o,Qmt:1===a.length?vq(a[0]):void 0,Kmt:Su(t.sP("timeShiftBufferDepth")),qD:ti(t.sP("timescale"))}}function wq(t){const i=mq(t),e=t.YE("BitstreamSwitching"),s=e.length>0?vq(e[0]):void 0,n=ti(t.sP("duration")),r=t.YE("SegmentTimeline");if(r.length>1)throw new m("The provided MPEG-DASH document's "+t.JE+" element can not have more than one SegmentTimeline element.");const h=1===r.length?function(t){const i=[],e=t.YE("S");for(const t of e)_q(t,i);return i}(r[0]):void 0;return Mo({},i,{Ymt:s,ct:n,$rt:h,Jmt:ti(t.sP("startNumber")),Zmt:ti(t.sP("endNumber"))})}function yq(t){return{$mt:function(t){if(!t)return;const i=t.split(/\s/);return i.length>1?(i.length=2,i.map(ti)):1===i.length?i.map(ti)[0]:void 0}(t.sP("audioSamplingRate")),frt:t.sP("codecs"),twt:Xn(t.sP("codingDependency")),xW:function(t){if(0!==t.length)return t.map(fq)}(t.YE("ContentProtection")),iwt:function(t){return t.map(Tq)}(t.YE("EssentialProperty")),ewt:function(t){return t.map(kq)}(t.YE("SupplementalProperty")),plt:cq(t.sP("frameRate")),Mi:ti(t.sP("height")),swt:ti(t.sP("maxPlayoutRate")),nwt:ti(t.sP("maximumSAPPeriod")),oQ:t.sP("mimeType"),rwt:t.sP("profiles"),hwt:t.sP("sar"),owt:function(t){switch(t){case iq.Dmt:case iq.Bmt:case iq.pk:return t;default:return}}(t.sP("scanType")),awt:t.sP("segmentProfiles"),uwt:ti(t.sP("startWithSAP")),Ti:ti(t.sP("width"))}}function Aq(t){const i=lq(t.YE("BaseURL")),e=t.YE("SegmentBase");if(e.length>1)throw new m("The provided MPEG-DASH document's "+t.VE+" element can not have more than one SegmentBase element.");const s=1===e.length?mq(e[0]):void 0,n=function(t){const i=t.map(pq);return i.length>0?i:void 0}(t.YE("SegmentList")),r=t.YE("SegmentTemplate");if(r.length>1)throw new m("The provided MPEG-DASH document's "+t.VE+" element can not have more than one SegmentTemplate element.");const h=1===r.length?function(t){return Mo({},wq(t),{cwt:t.sP("bitstreamSwitching"),dwt:t.sP("index"),lwt:t.sP("initialization"),fwt:t.sP("media")})}(r[0]):void 0;return{vwt:i,_wt:s,gwt:n,pwt:h}}function bq(t){const i=yq(t),e=Aq(t),s=ti(t.sP("bandwidth")),n=t.sP("dependencyId"),r=t.sP("id"),h=t.sP("mediaStreamStructureId"),o=ti(t.sP("qualityRanking"));if(t.YE("SegmentBase").length>1)throw new m("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return Mo({},i,e,{kW:s,mwt:n,o:r,wwt:h,ywt:o})}function Sq(t){return{y8:t.sP("schemeIdUri"),zE:t.sP("value")}}function Tq(t){return Sq(t)}function kq(t){return Sq(t)}function Eq(t){return Sq(t)}function Pq(t){return Sq(t)}function xq(t){var i;const e=yq(t),s=Aq(t),n=function(t){return t.map(Pq)}(t.YE("Accessibility")),r=Xn(t.sP("bitstreamSwitching")),h=t.sP("contentType"),o=ti(t.sP("group")),a=ti(t.sP("id")),u=(null==(i=t.YE("Label")[0])?void 0:i.eP)||"",c=t.sP("lang"),d=ti(t.sP("maxBandwidth")),l=cq(t.sP("maxFrameRate")),f=ti(t.sP("maxHeight")),v=ti(t.sP("maxWidth")),_=ti(t.sP("minBandwidth")),g=cq(t.sP("minFrameRate")),p=ti(t.sP("minHeight")),w=ti(t.sP("minWidth")),y=t.sP("par"),A=function(t){return t.map(bq)}(t.YE("Representation"));if(0===A.length)throw new m("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const b=function(t){return t.map(Eq)}(t.YE("Role")),S=Xn(t.sP("segmentAlignment"))||!1,T=ti(t.sP("selectionPriority")),k=T||1,E=Xn(t.sP("subsegmentAlignment"))||!1;let P;try{P=ti(t.sP("subsegmentStartsWithSAP"))}catch(t){}return Mo({},e,s,{Wdt:n,Ymt:r,qT:h,Jdt:o,o:a,Th:u,bs:c,Awt:d,bwt:l,Swt:f,Twt:v,kwt:_,Ewt:g,Pwt:p,xwt:w,Iwt:y,rat:A,Plt:b,Rwt:S,Kq:k,Cwt:E,Dwt:P,Bwt:t.sP("xlink:actuate")||"onRequest",Nwt:t.sP("xlink:href")})}function Iq(t){const i=uq(t.sP("presentationTime"))||Wt.ZERO,e=uq(t.sP("duration")),s=ti(t.sP("id")),n=function(t){const i=t.iP,e={};for(let t=0;t<i.length;t++)e[i[t].l]=i[t].zE;return e}(t),r=t.eP;return{tM:i,ct:e,o:s,iP:n,ck:""!==r.trim()?r:t.sP("messageData")||""}}function Rq(t){return{Nwt:t.sP("xlink:href"),Bwt:t.sP("xlink:actuate"),y8:t.sP("schemeIdUri"),zE:t.sP("value"),qD:ti(t.sP("timescale")),jmt:uq(t.sP("presentationTimeOffset")),aQ:t.YE("Event").map(Iq)}}function Cq(t){const i=Aq(t),e=t.YE("AssetIdentifier");if(e.length>1)throw new m("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===e.length?function(t){return Sq(t)}(e[0]):void 0,n=function(t){return t.map(xq)}(t.YE("AdaptationSet")),r=Xn(t.sP("bitstreamSwitching")),h=Su(t.sP("duration")),o=function(t){return t.map(Rq)}(t.YE("EventStream")),a=t.sP("id"),u=Su(t.sP("start")),c=(t.YE("Subset"),t.sP("xlink:href"));return Mo({},i,{Ilt:n,Mwt:s,Ymt:r,ct:h,Lwt:o,o:a,Tn:u,Bwt:t.sP("xlink:actuate"),Nwt:c})}function Dq(t){const i=t.sP("schemeIdUri");if(!i)return;return{y8:i,zE:t.sP("value")}}function Bq(t,i){const e=oq(t.sP("availabilityEndTime")),s=oq(t.sP("availabilityStartTime")),n=lq(t.YE("BaseURL")),r=t.sP("id"),h=function(t){return t.map(t=>""+t.eP)}(t.YE("Location")),o=Su(t.sP("maxSegmentDuration")),a=Su(t.sP("maxSubsegmentDuration")),u=Su(t.sP("mediaPresentationDuration")),c=(t.YE("Metrics"),Su(t.sP("minBufferTime")));if(!c)throw new m("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const d=Su(t.sP("minimumUpdatePeriod")),l=function(t){return t.map(t=>Cq(t))}(t.YE("Period"));if(!l.length)throw new m("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.sP("profiles");if(!f)throw new m("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const v=oq(t.sP("publishTime")),_=Su(t.sP("suggestedPresentationDelay")),g=Su(t.sP("timeShiftBufferDepth")),p=function(t){switch(t){case Eh.mV:case Eh.wV:return t;default:return}}(t.sP("type")),w=function(t){const i=[];for(const e of t){const t=Dq(e);t&&i.push(t)}return i}(t.YE("UTCTiming")),y=function(t){if(0===t.length)return;const i=t[0],e=i.YE("Latency");if(0===e.length)return;const s=function(t){const i=t[0],e=ti(i.sP("target"));if(void 0===e)return;const s=ti(i.sP("min")),n=ti(i.sP("max"));return{Owt:e,YF:s,KF:n}}(e);if(void 0===s)return;const n=function(t){if(0===t.length)return;const i=t[0],e=ti(i.sP("max")),s=ti(i.sP("min"));return{YF:s,KF:e}}(i.YE("PlaybackRate"));return{Fwt:s,ux:n}}(t.YE("ServiceDescription"));return{Uwt:e,Vwt:s,vwt:n,o:r,Hwt:h,Wwt:i,qwt:o,zwt:a,Gwt:u,Xwt:c,Qwt:d,smt:l,rwt:f,Kwt:v,Ywt:_,Kmt:g,Km:p,Jwt:w,Zwt:y}}var Nq=class{$wt(t,i){return function(t,i){if(!t)throw new m("The provided MPEG-DASH document does not contain a valid MPD root element.");return Bq(t,i)}(zd.UE(t).uP,i)}};function Mq(t){return{get bandwidth(){return t.kW},get codecs(){return t.frt},get id(){return t.o},get uid(){return t.jI},get name(){return t.Th},get averageBandwidth(){return t.tyt},get label(){return t.Th},set label(i){t.Th=Hi(i)},get available(){return t.cst},get score(){return t.iyt},addEventListener(i,e){t.wn(i,e)},removeEventListener(i,e){t.mn(i,e)}}}function Lq(t){return po(Mq(t),{get height(){return t.Mi},get width(){return t.Ti},get frameRate(){return t.plt},get firstFrame(){return t.eyt}})}function Oq(t){return po(Mq(t),{get audioSamplingRate(){return t.$mt}})}r(),r(),r(),r(),r(),r(),r(),r();var ea=class extends wp{constructor(t){super("update"),this.quality=void 0,this.quality=t}},Fq=class extends Ne{get Th(){return this.pO}set Th(t){this.pO!==t&&(this.pO=t,this.So(new ea(this.Ca)))}get tyt(){}get cst(){return this.syt}get iyt(){}QU(){this.syt=!1,this.So(new ea(this.Ca))}jU(){this.syt=!0,this.So(new ea(this.Ca))}constructor(t,i,e,s,n){super(),this.o=void 0,this.kW=void 0,this.frt=void 0,this.nyt=void 0,this.jI=void 0,this.pO=void 0,this.syt=void 0,this.o=t,this.kW=i,this.frt=e,this.nyt=n,this.jI=zk(),this.pO=s||"",this.syt=!0}},Uq=class extends Fq{get Ca(){return this.hu||(this.hu=Lq(this)),this.hu}constructor(t,i,e,s,n,r,h,o,a=0){super(t,i,e,s,n),this.plt=void 0,this.Ti=void 0,this.Mi=void 0,this.eyt=void 0,this.hu=void 0,this.plt=r,this.Ti=h,this.Mi=o,this.eyt=a,this.hu=void 0}},Vq=class extends Fq{get Ca(){return this.hu||(this.hu=Oq(this)),this.hu}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.$mt=void 0,this.hu=void 0,this.$mt=r,this.hu=void 0}};r(),r();var Hq=class extends Ne{get ryt(){const t=this.hyt();return null==t?void 0:t.Tn}get oyt(){const t=this.hyt();return null==t?void 0:t.An}constructor(...t){super(...t),this.ayt=t=>{this.So(t)}}},Wq=class extends Hq{get Nut(){return this.Kot}get $mt(){var t;return null!=(t=this.uyt.ck.$mt)?t:this.Nut.$mt}get kW(){return this.uyt.ck.kW||0}get frt(){const t=this.uyt.ck;return t.frt?[t.frt]:this.Nut.frt}get cyt(){const t=this.uyt.ck;return t.frt?[t.frt]:[]}get Np(){return this.uyt.ck.frt||this.Nut.Np}get twt(){return this.uyt.ck.twt||this.Nut.twt}get xW(){return this.uyt.ck.xW||this.Nut.xW}get Amt(){return this.dyt}get qT(){return this.oQ+'; codecs="'+this.Np+'"'}get iwt(){const t=this.uyt.ck;return t.iwt.length?t.iwt:this.Nut.iwt}get Ca(){return this.hu||(this.hu=function(t){return{get id(){return t.o},get type(){return t.Km},get bandwidth(){return t.kW},get width(){return t.Ti},get height(){return t.Mi},get frameRate(){var i,e;return null!=(e=null==(i=t.plt)?void 0:i.iF())?e:NaN},get audioSamplingRate(){return t.$mt}}}(this))}get plt(){var t;return null!=(t=this.uyt.ck.plt)?t:this.Nut.plt}get Mi(){return this.uyt.ck.Mi||this.Nut.Mi}get o(){return this.uyt.ck.o||""}get Bdt(){return this.lyt}set Bdt(t){this.lyt=t}get Ddt(){const t=this.uyt.fyt();if(t)return{Yu:t.Yu,Sat:t.Sat,zk:this.Idt.zk}}get swt(){return this.uyt.ck.swt||this.Nut.swt||1}get nwt(){return this.uyt.ck.nwt||this.Nut.nwt}get Idt(){return this.wct.Idt}get oQ(){return this.uyt.ck.oQ||this.Nut.oQ}get wct(){return this.Nut.wct}get rwt(){return this.uyt.ck.rwt||this.Nut.rwt}get kot(){return this.vyt}get hwt(){return this.uyt.ck.hwt||this.Nut.hwt}get owt(){return this.uyt.ck.owt||this.Nut.owt}get _yt(){return this.uyt._yt}get awt(){return this.uyt.ck.awt||this.Nut.awt}get $rt(){return this.uyt.$rt}get uwt(){return this.uyt.ck.uwt||this.Nut.uwt}get Km(){const t=this.oQ.split("/")[0];return"application"===t||"text"===t||QP(this.oQ,this.frt)?Ci.NT:"video"===t?Ci.Bk:"audio"===t?Ci.Dk:"image"===t?Ci.Nk:Ci.pk}get Ti(){return this.uyt.ck.Ti||this.Nut.Ti}get Sct(){return this.gyt}set Sct(t){this.gyt=t}get olt(){return this.pyt}set olt(t){this.pyt=t}Nct(t){const i=aV(t)?this.uyt.myt(t):this.uyt.Nct(t);return{Yu:i.Yu,Sat:i.Sat,zk:this.Idt.zk}}wyt(){return this.uyt.wyt()}hyt(){return this.uyt.hyt()}yyt(){return this.uyt.yyt()}kct(t){return this.uyt.kct(t)}Pct(t,i,e){return this.uyt.Pct(t,this.Idt.zk,i,e)}pdt(t){return aV(t)?this.$rt.Ayt(t,this.uyt):this.$rt.pdt(t)}mct(t){return aV(t)?this.$rt.byt(t,this.uyt):this.$rt.mct(t)}xmt(t){pi(this.dyt,t)||this.dyt.push(t)}kn(){this.uyt.mn(Ls.yot,this.ayt),this.dyt=[]}constructor(t,i){if(super(),this.Kot=void 0,this.hu=void 0,this.uyt=void 0,this.vyt=void 0,this.lyt=void 0,this.gyt=!1,this.pyt=!1,this.dyt=[],this.Kot=t,this.uyt=i,this.uyt.wn(Ls.yot,this.ayt),this.Km===Ci.Bk){var e,s;const t=null!=(s=null==(e=this.plt)?void 0:e.iF())?s:NaN;this.vyt=new Uq(this.o,this.kW,this.Np,"","",t,this.Ti,this.Mi)}else this.Km===Ci.Dk?this.vyt=new Vq(this.o,this.kW,this.Np,"","",this.$mt):this.vyt=void 0}},qq=class extends Hq{get Wdt(){return this.uyt.ck.Wdt}get $mt(){var t;return null!=(t=this.uyt.ck.$mt)?t:-1}get frt(){if(this.uyt.ck.frt)return[this.uyt.ck.frt];{const t=[];for(const i of this.rat)i.cyt.length&&-1===t.indexOf(i.Np)&&t.push(i.Np);return t}}get Np(){return this.frt.join()}get twt(){return this.uyt.ck.twt}get xW(){return this.uyt.ck.xW}get qT(){return this.oQ+'; codecs="'+this.Np+'"'}get iwt(){return this.uyt.iwt}get ewt(){return this.uyt.ewt}get plt(){return this.uyt.ck.plt}get Jdt(){return this.uyt.ck.Jdt}get Mi(){return this.uyt.ck.Mi||0}get o(){return this.uyt.ck.o}get Th(){return this.uyt.ck.Th||""}get swt(){return this.uyt.ck.swt}get nwt(){return this.uyt.ck.nwt}get Idt(){return this.wct.Idt}get oQ(){return this.uyt.ck.oQ||this.elt[0].oQ}get wct(){return this.jpt}get rwt(){return this.uyt.ck.rwt}get rat(){return this.elt}get Plt(){return this.uyt.ck.Plt||[]}get hwt(){return this.uyt.ck.hwt}get owt(){return this.uyt.ck.owt}get awt(){return this.uyt.ck.awt}get Kq(){return this.uyt.ck.Kq}get uwt(){return this.uyt.ck.uwt}get Km(){const t=(this.uyt.ck.qT||this.oQ).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||QP(this.oQ,this.frt)?Ci.NT:"video"===t?Ci.Bk:"audio"===t?Ci.Dk:"image"===t?Ci.Nk:Ci.pk}get Ti(){return this.uyt.ck.Ti||0}get rit(){return this.uyt.ck.bs||""}get blt(){return this.ryt}get Alt(){const t=this.blt,i=this.oyt;if(void 0===t||void 0===i)return;const e=_.min(i,this.Idt.Syt);return _.max(t,e)}async er(t,i){if(0===this.elt.length){const e=this.uyt.rat.map(e=>this.Tyt(e,t,i));this.elt=(await Promise.all(e)).filter(it)}this.kyt()}async Tyt(t,i,e){const s=new Wq(this,t),n=await i(s);if(ii(e),n)return s}kyt(){if(!this.elt.length)throw new m("Detected an AdaptationSet without any supported Representations.")}hyt(){return this.uyt.hyt()}yyt(){return this.uyt.yyt()}kn(){this.uyt.mn(Ls.yot,this.ayt);for(const t of this.elt)t.kn();Yo(this.elt)}constructor(t,i){super(),this.uyt=void 0,this.jpt=void 0,this.elt=[],this.jpt=t,this.uyt=i,this.uyt.wn(Ls.yot,this.ayt)}};function zq(t,i){const e=[];for(const s of i)for(const i of t)e.push(zd.Dh(i,s));return e}r(),r(),r(),r(),r(),r(),r();var st=class{Eyt(t){const i=t-this.jpt.Tn;if(i<0||i>=this.jpt.ct)return;const e=this.Pyt();return void 0!==e&&uh(e,i,1e-5)?this.xyt():this.Iyt(i)}Tct(t){const i=t-this.jpt.Tn;if(!(i<0))return this.Ryt(_.min(i,this.jpt.ct))}xyt(){return this.Cyt(0)}Dyt(){const t=this.jpt.ct;if(isFinite(t))return this.Ryt(t)}get Byt(){return this.jpt.Myt.Nyt&&void 0!==this.Lyt()}wyt(t){if(this.jpt.Myt.Km===Eh.wV){if(this.Byt){const i=this.xyt(),e=this.Lyt();if(void 0===i||void 0===e)return;return{Oyt:t,Fyt:i,Uyt:e}}const i=this.Vyt(t);if(!i)return;return{Oyt:t,Fyt:this.Hyt(t),Uyt:i}}{0;const i=this.xyt();if(i)return{Oyt:t,Fyt:i,Uyt:this.Dyt()}}}yyt(t,i){if(i){let t=this.Rdt(i.Fyt);const e=this.Cct(i.Uyt);if(e){const i=this.Cdt(e);(!t||i.getTime()<t.getTime())&&(t=i)}return t}{const i=this.xyt();if(i){const e=this.Cdt(i);if(t.getTime()<e.getTime())return e}const e=this.jpt.Myt.Vwt;return t.getTime()<e.getTime()?e:void 0}}Vyt(t){const i=(t.getTime()-this.jpt.Myt.Vwt.getTime())/1e3-this.jpt.Tn+this.Wyt;let e=this.Ryt(ur(i,0,this.jpt.ct));if(!e)return;if(e=this.qyt(e,t),!e)return;let s=this.Cct(e);for(;s&&this.Udt(s,t);)e=s,s=this.Cct(e);return e}Hyt(t){let i;const e=this.zyt.Kmt;if(e){const s=(t.getTime()-this.jpt.Myt.Vwt.getTime())/1e3-this.jpt.Tn-e.Rmt();i=this.Ryt(ur(s,0,this.jpt.ct)),i||(i=this.xyt())}else i=this.xyt();if(!i)return;if(i=this.qyt(i,t),!i)return;let s=this.Rct(i);for(;s&&this.Udt(s,t);)i=s,s=this.Rct(i);return i}qyt(t,i){let e=t;for(;e&&this.Cdt(e).getTime()>i.getTime();)e=this.Rct(e);if(!e)return;const s=this.Rdt(e);if(s&&s.getTime()<=i.getTime()){const t=this.Rct(e);for(t&&this.Udt(t,i)&&(e=t);e;){if(this.Cdt(e).getTime()>i.getTime())return;if(this.Udt(e,i))break;e=this.Cct(e)}if(!e)return}return e}Udt(t,i){if(this.Byt)return!0;if(this.Cdt(t).getTime()>i.getTime())return!1;const e=this.Rdt(t);return!(e&&i.getTime()>=e.getTime())}Gyt(t,i){if(this.Byt)return!0;if(this.Xyt(t).getTime()>i.getTime())return!1;const e=this.Rdt(t);return!(e&&i.getTime()>=e.getTime())}jyt(t,i,e){const s=Bs(i,this.HA)+this.jpt.Tn;return{aut:t,Qyt:i,EO:s,ct:e,PO:s+e}}Xyt(t){return this.jpt.Myt.Km===Eh.wV?new Date(this.jpt.Myt.Vwt.getTime()+1e3*(t.EO+t.ct)):this.jpt.Myt.Vwt}Cdt(t){const i=this.Xyt(t);return this.jpt.Myt.Km===Eh.wV?new Date(i.getTime()-1e3*this.Wyt):i}Rdt(t){let i=1/0;if(this.jpt.Myt.Km===Eh.wV){const e=this.zyt.Kmt;e&&(i=this.Xyt(t).getTime()+1e3*t.ct+e.Cmt())}const e=this.jpt.Myt.Uwt;return e&&(i=_.min(i,e.getTime())),i===1/0?void 0:new Date(i)}Kyt(t,i){return t.aut+i}get bU(){return this.jpt.Tn-Bs(this.Yyt,this.HA)}get jmt(){return Bs(this.Yyt,this.HA)}kct(t){return!1}Pct(t,i,e,s,n){const r=this.Jyt(t);if(!r)return Promise.reject(new m("Invalid segment"));const h=this.Zyt(r.aut,i);return h?Promise.resolve(h):Nc(this.$yt(r.aut,i,e,s),n)}Zyt(t,i){}$yt(t,i,e,s){return Promise.reject(new m("Not supported"))}Rct(t){const i=this.Jyt(t);if(i)return this.Cyt(i.aut-1)}Cct(t){const i=this.Jyt(t);if(i)return this.Cyt(i.aut+1)}Jyt(t){const i=this.Cyt(t.aut);if(i&&i.EO===t.EO)return i;const e=this.Eyt(t.EO);return e&&e.EO===t.EO?e:void 0}tAt(t,i){const e=this.xct(t);if(!e||!this.kct(e.aut))return;const s=this.Zyt(e.aut,i);return s?s.tAt(t):void 0}xct(t){return this.Cyt(t.iAt)}pdt(t){const i=this.Jyt(t);return!!i&&0===i.aut}Ayt(t,i){const e=this.tAt(t,i);return!!e&&0===e.hut}mct(t){const i=this.Jyt(t);if(!i)return!1;const e=this.Dyt();return!!e&&i.aut===e.aut}byt(t,i){const e=this.tAt(t,i);if(!e)return!1;const s=this.Dyt();if(!s||e.iAt!==s.aut)return!1;const n=this.Zyt(e.iAt,i);return e.hut+1===n.V}zg(){}constructor(t,i){this.jpt=void 0,this.zyt=void 0,this.HA=void 0,this.Wyt=void 0,this.Yyt=void 0,this.jpt=t,this.zyt=i,this.HA=i.qD,this.Wyt=i.Omt,this.Yyt=i.jmt}},Gq=class extends st{Cyt(t){if(t<0)return;const i=this.eAt.multiply(t),e=Bs(i,this.HA),s=this.jpt.ct;if(e>=s)return;const n=this.sAt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.jyt(t,i,s-e)}return isFinite(s)&&e+this.nAt>s?this.jyt(t,i,s-e):this.jyt(t,i,this.nAt)}Pyt(){return 0}Iyt(t){const i=_.floor(t/this.nAt),e=this.sAt();return void 0!==e&&i>=e?this.Cyt(e):this.Cyt(i)}Ryt(t){if(t>=this.jpt.ct){const t=_.ceil(this.jpt.ct/this.nAt)-1,i=this.sAt();return void 0!==i&&t>=i?this.Cyt(i):this.Cyt(t)}return this.Iyt(t)}sAt(){const t=this.zyt.Zmt;var i;if(void 0!==t)return t-(null!=(i=this.zyt.Jmt)?i:1);const e=this.zyt.rAt;return void 0!==e&&e>0?e-1:void 0}Lyt(){if(isFinite(this.jpt.ct))return this.Dyt()}hAt(t,i){return this.eAt.multiply(t.aut+(i-1))}er(){}constructor(t,i){super(i,t),this.nAt=void 0,this.eAt=void 0;const e=t.oAt,s=t.ct;if(void 0===e||void 0===s)throw new m("MultipleSegmentBase does not have a segment duration specified.");this.eAt=e,this.nAt=s}};function Xq(t,i,e){const s=i.length;if(0===s)return-1;let n=0,r=s-1,h=t.aAt(i[n]),o=t.uAt(i[r]);for(;n<=r&&t.cAt(h,e)<=0&&t.cAt(e,o)<0;){const a=n+_.floor(t.dAt(e,h,o)*(r-n)),u=i[a],c=t.aAt(u),d=a+1<s?t.aAt(i[a+1]):t.uAt(u);if(t.cAt(d,e)<=0)n=a+1,h=d;else{if(!(t.cAt(e,c)<0))return a;r=a-1,o=c}}return-1}function jq(t,i){return Xq(Qq.Ng,t,i)}r(),r(),r();var Qq=class t{static get Ng(){return null!=this.lAt||(this.lAt=new t),this.lAt}aAt(t){return t.EO}uAt(t){return t.PO}cAt(t,i){return t.compare(i)}dAt(t,i,e){return t.subtract(i).toNumber()/e.subtract(i).toNumber()}};Qq.lAt=void 0;var Kq=.01,Yq=class extends st{Cyt(t){if(!(t<0))return t<this.fAt.length?this.fAt[t].$at:this.vAt(t-this.fAt.length)}Pyt(){if(this.fAt.length>0)return Bs(this.fAt[0].EO,this.HA)}Iyt(t){if(this._At&&Bs(this._At.EO,this.HA)<=t){const i=Bs(this._At.EO,this.HA),e=Bs(this._At.ct,this.HA),s=_.floor((t-i)/e);return this.vAt(s)}if(this.fAt.length>0&&uh(t,Bs(this.fAt[0].EO,this.HA),1e-5))return this.fAt[0].$at;const i=jq(this.fAt,Wt.fromNumber(t*this.HA));return i<0?void 0:this.fAt[i].$at}Ryt(t){if(!this._At&&this.fAt.length>0){const i=this.fAt[this.fAt.length-1];if(function(t,i,e){return ef(t,i,e)>=0}(t,Bs(i.PO,this.HA),1e-5))return i.$at}const i=this.Pyt();return i&&t<i?this.fAt[0].$at:this.Iyt(t)}Lyt(){return isFinite(this.jpt.ct)?this.Dyt():this.Cyt(this.fAt.length-1)}hAt(t){return this.gAt(t)}vAt(t){if(!this._At)return;const i=this._At.EO,e=this._At.ct,s=i.add(e.multiply(t)),n=Bs(s,this.HA),r=this.jpt.ct;if(n>=r)return;const h=this.fAt.length+t,o=_.min(Bs(e,this.HA),n+r);return this.jyt(h,s,o)}gAt(t){return t.Qyt.add(this.Yyt)}er(){const t=this.zyt.ck.$rt;if(!t)throw new m("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.pAt(t)}pAt(t){const i=this.Yyt;this.mAt(t,i);const e=this.wAt(t);this.yAt(t,i,e.AAt,e.iAt)}mAt(t,i){const e=this.fAt;if(0===t.length)Yo(e);else{const s=t[0];let n=0;const r=Bs(s.EO?Wt.fromString(s.EO,!1).subtract(i):Wt.ZERO,this.HA);for(;n<e.length&&Bs(e[n].EO,this.HA)<r-Kq;)n++;n>0&&e.splice(0,n)}}wAt(t){const i=this.fAt,e=this.Hgt;let s=0,n=0;for(;s<t.length&&n<i.length;){const r=t[s].Umt||0;if(r<0)break;const h=n+r;if(h>=i.length)break;if(i[h].EO.greaterThanOrEqual(e))break;if(i[n].$at.aut===n)n=h+1;else for(;n<=h;)i[n].$at.aut=n,n++;0,s++}return{AAt:s,iAt:n}}yAt(t,i,e,s){const n=this.fAt;let r,h=e,o=s;for(;h<t.length;){const e=t[h],s=Wt.fromString(e.ct,!1),a=e.Umt||0;let u;if(e.EO){if(u=Wt.fromString(e.EO,!1).subtract(i),o>0){const t=n[o-1];t.PO.greaterThan(u)&&(t.ct=u.subtract(t.EO),t.PO=t.EO.add(t.ct))}}else u=o>0?n[o-1].PO:Wt.ZERO;if(a<0){if(h+1===t.length){r={EO:u,ct:s};break}const e=Wt.fromString(t[h+1].EO,!1).subtract(i);for(;u.lessThan(e);){const t=u.add(s);this.bAt(n,o,u,s,t),u=t,o++}}else{const t=o+a;for(;o<=t;){const t=u.add(s);this.bAt(n,o,u,s,t),u=t,o++}}h++}o<n.length&&n.splice(o),n.length>0&&(this.Hgt=n[n.length-1].EO),this._At=r}bAt(t,i,e,s,n){if(i<t.length){const r=t[i];0,r.ct.equals(s)?r.$at.aut=i:t[i]={EO:e,ct:s,PO:n,$at:this.jyt(i,e,Bs(s,this.HA))}}else t.push({EO:e,ct:s,PO:n,$at:this.jyt(i,e,Bs(s,this.HA))})}constructor(t,i){super(i,t),this.fAt=[],this._At=void 0,this.Hgt=Wt.ZERO,this.er()}};r();var Jq=class{get ck(){return this.Wp}get Omt(){return this.Wp&&void 0!==this.Wp.Omt?this.Wp.Omt:this.SAt?this.SAt.Omt:0}get jmt(){return this.Wp&&void 0!==this.Wp.jmt?this.Wp.jmt:this.SAt?this.SAt.jmt:Wt.ZERO}get Kmt(){return this.Wp&&void 0!==this.Wp.Kmt?this.Wp.Kmt:this.SAt?this.SAt.Kmt:this.wct.Myt.Kmt}get qD(){return this.Wp&&void 0!==this.Wp.qD?this.Wp.qD:this.SAt&&this.SAt.qD?this.SAt.qD:1}get Vmt(){return this.Wp&&void 0!==this.Wp.Vmt?this.Wp.Vmt:this.SAt?this.SAt.Vmt:void 0}get Xmt(){return this.Wp&&void 0!==this.Wp.Xmt?this.Wp.Xmt:this.SAt?this.SAt.Xmt:void 0}get $rt(){return this.TAt||(this.TAt=this.kAt()),this.TAt}kAt(){if(this.EAt=this.PAt(),this.EAt)return this.EAt;if(this.SAt)return this.SAt.$rt;throw new m("Missing media segment information.")}fyt(t){const i=this.Xmt;if(i){return{Yu:(void 0!==i.Fmt?zd.Dh(i.Fmt,t.vwt[0]):t.vwt[0]).href,Sat:i.Sat}}const e=this.Vmt;if(e)return{Yu:t.vwt[0].href,Sat:[0,e[0]-1]}}er(t){this.Wp=t,this.EAt&&this.EAt.er()}zg(){this.EAt&&(this.EAt.zg(),this.EAt=void 0)}constructor(t,i,e){this.wct=void 0,this.SAt=void 0,this.Wp=void 0,this.TAt=void 0,this.EAt=void 0,this.wct=t,this.SAt=i,this.Wp=e}},uc=class extends Jq{get ct(){return void 0!==this.Wp.ct?this.Wp.ct/this.qD:this.SAt&&Zq(this.SAt)?this.SAt.ct:void 0}get oAt(){return void 0!==this.Wp.ct?Wt.fromNumber(this.Wp.ct):this.SAt&&Zq(this.SAt)?this.SAt.oAt:void 0}get Jmt(){return void 0!==this.Wp.Jmt?this.Wp.Jmt:this.SAt&&Zq(this.SAt)?this.SAt.Jmt:void 0}get Zmt(){return void 0!==this.Wp.Zmt?this.Wp.Zmt:this.SAt&&Zq(this.SAt)?this.SAt.Zmt:void 0}PAt(){return void 0!==this.Wp.$rt?new Yq(this,this.wct):void 0!==this.Wp.ct?new Gq(this,this.wct):void 0}};function Zq(t){return t instanceof uc}r();var $q=class{Xy(t){return this.xAt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,(i,e,s,n)=>{if("$$"===i)return"$";const r=t[e];if(void 0===r)return i;if(void 0===s)return r.toString();let h=function(t,i){switch(i){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===h?i:(h=Na(h,Number(s),"0"),h)})}constructor(t){this.xAt=void 0,this.xAt=t}};var tz=class t extends uc{get lwt(){return this.IAt?this.IAt:this.SAt&&this.SAt instanceof t?this.SAt.lwt:void 0}get fwt(){return this.RAt?this.RAt:this.SAt&&this.SAt instanceof t?this.SAt.fwt:void 0}fyt(t){const i=this.lwt;if(!i)return super.fyt(t);const e=i.Xy({Bandwidth:t.ck.kW,RepresentationID:t.ck.o});return{Yu:zd.xm(e,t.vwt[0])}}Nct(t,i){var e;const s=null!=(e=i._yt.Jmt)?e:1,n=this.fwt.Xy({Bandwidth:i.ck.kW,Number:i.$rt.Kyt(t,s),RepresentationID:i.ck.o,Time:i.$rt.hAt(t,s)});return{Yu:zd.xm(n,i.vwt[0])}}myt(t,i){}get rAt(){}constructor(t,i,e){super(t,i,e),this.IAt=void 0,this.RAt=void 0,this.IAt=e.lwt?new $q(e.lwt):void 0,this.RAt=e.fwt?new $q(e.fwt):void 0}};r();var iz=class t extends uc{Nct(t,i){const e=this.Wmt[t.aut],s=i.vwt[0];let n;return n=e.KD?zd.Dh(e.KD,s):s,{Yu:n.href,Sat:e.Hmt}}myt(t,i){}get Wmt(){return void 0!==this.Wp.Wmt?this.Wp.Wmt:this.SAt&&this.SAt instanceof t?this.SAt.Wmt:void 0}get rAt(){var t;return null==(t=this.Wmt)?void 0:t.length}};r(),r(),r(),r();var ez=class{tAt(t){const i=this.Ict(t.hut);if(i&&i.EO===t.EO)return i;const e=this.CAt(t.EO);return e&&e.EO===t.EO?e:void 0}},sz=class extends ez{get V(){return this.DAt.length}Ict(t){if(t>=0&&t<this.V)return this.BAt(this.DAt[t])}CAt(t){const i=this.NAt(t);if(this.DAt.length>0){const t=this.DAt[0];if(i<=Bs(t.EO,this.qD))return this.BAt(t)}const e=jq(this.DAt,Wt.fromNumber(i*this.qD));if(!(e<0))return this.BAt(this.DAt[e])}Ect(t){const i=this.NAt(t),e=af(this.DAt,-1);return void 0!==e&&i>=Bs(e.PO,this.qD)?this.BAt(e):this.CAt(t)}BAt(t){const i=Bs(t.EO,this.qD)-this.jmt,e=i+this.MAt,s=Bs(t.ct,this.qD);return{iAt:this.iAt,hut:t.aut,EO:e,Qyt:Wt.fromNumber(i*this.qD),ct:s,PO:e+s,LAt:[t.OAt,t.FAt]}}NAt(t){return t-this.MAt+this.jmt}constructor(t,i,e,s,n){super(),this.iAt=void 0,this.qD=void 0,this.MAt=void 0,this.jmt=void 0,this.DAt=void 0,this.iAt=t,this.qD=i,this.MAt=e,this.jmt=s,this.DAt=n}};r(),r(),r();var nz=class t{agt(){return this.KC.ac<this.ck.byteLength}UAt(){const i=this.VAt(),e=this.HAt(),s=this.KC.ac,n=this.ck.byteLength;let r;r=t.WAt(e)?n-s:t.qAt(e);const h=s+r<=n?r:n-s,o=T(this.ck,this.KC,h);return new hz(i,dh(o))}VAt(){const t=this.HAt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let i=0;for(let e=0;e<t.length;e++)i=256*i+t[e];return i}HAt(){const t=ua(this.ck,this.KC.Ly());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const i=8-(31-Bp(t));return zd.lm(i<=8&&i>=1,"Incorrect log2 value"),T(this.ck,this.KC,i)}static qAt(t){if(8===t.length&&224&t[1])throw new g("EBML variable sized integer is too large");let i=0;for(let e=0;e<t.length;e++){const s=t[e];if(0===e){i=s&(1<<8-t.length)-1}else i=256*i+s}return i}static WAt(t){for(const i of rz)if(L(t,new j(i)))return!0;return!1}constructor(t){this.ck=void 0,this.KC=void 0,this.ck=t,this.KC=new Ui}},rz=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],hz=class{zAt(){return this.GAt.byteOffset}XAt(){return new nz(this.GAt)}jAt(){const t=this.GAt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.GAt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let i=0;for(let e=0;e<t;e++){i=256*i+this.GAt.getUint8(e)}return i}LJ(){if(4===this.GAt.byteLength)return this.GAt.getFloat32(0);if(8===this.GAt.byteLength)return this.GAt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,i){this.id=void 0,this.GAt=void 0,this.id=t,this.GAt=i}};function oz(t,i){const e=function(t){const i=new nz(dh(t)),e=i.UAt();if(e.id!==uz)throw new g("Missing WebM EBML header");const s=i.UAt();if(s.id!==cz)throw new g("Missing WebM SegmentElement");const n=s.zAt(),r=function(t){const i=t.XAt();let e;for(;i.agt();){const t=i.UAt();if(t.id===dz){e=t;break}}if(!e)throw new g("Missing WebM InfoElement");return function(t){const i=t.XAt();let e,s=1e6;for(;i.agt();){const t=i.UAt();t.id===lz?s=t.jAt():t.id===fz&&(e=t.LJ())}if(void 0===e)throw new g("Missing Duration in WebM InfoElement");const n=s/1e9,r=e*n;return{timecodeScale:n,duration:r}}(e)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(i),s=new nz(dh(t)).UAt();if(s.id!==vz)throw new g("Missing WebM CuesElement");const n=function(t,i,e,s){const n=[],r=t.XAt();let h,o;for(;r.agt();){const t=r.UAt();if(t.id!==_z)continue;const e=az(t);if(!e)continue;const s=e.unscaledTime,a=i+e.relativeOffset;void 0!==h&&n.push({aut:n.length,EO:h,ct:s.subtract(h),PO:s,OAt:o,FAt:a-1}),h=s,o=a}if(void 0!==h){0;const t=Wt.fromNumber(s/e);n.push({aut:n.length,EO:h,ct:t.subtract(h),PO:t,OAt:o,FAt:void 0})}return n}(s,e.segmentOffset,e.timecodeScale,e.duration);return{qD:_.round(1/e.timecodeScale),QAt:n}}function az(t){const i=t.XAt(),e=i.UAt();if(e.id!==gz)throw new g("Missing CueTime in WebM CuePointElement");const s=Wt.fromNumber(e.jAt()),n=i.UAt();if(n.id!==pz)throw new g("Missing CueTrackPositions in WebM CuePointElement");const r=n.XAt();let h=0;for(;r.agt();){const t=r.UAt();if(t.id===mz){h=t.jAt();break}}return{unscaledTime:s,relativeOffset:h}}var uz=440786851,cz=408125543,dz=357149030,lz=2807729,fz=17545,vz=475249515,_z=187,gz=179,pz=183,mz=241,wz=class extends st{Cyt(t){if(0===t)return this.KAt}Pyt(){return 0}Iyt(t){return this.KAt}Ryt(t){return this.Iyt(t)}Lyt(){return this.KAt}hAt(t,i){return Wt.ZERO}wyt(t){const i=this.YAt(t);return i&&{Oyt:t,Fyt:i,Uyt:i}}YAt(t){const i=this.KAt;return this.Udt(i,t)?i:void 0}Vyt(t){return this.YAt(t)}Hyt(t){return this.YAt(t)}er(){}kct(t){return 0===t&&void 0!==this.JAt}Zyt(t,i){const e=i.vwt[0].href;return this.ZAt.get(e)}$yt(t,i,e,s){const n=i.vwt[0].href;let r=this.$At.get(n);if(void 0===r){const h=i.oQ,o=this.tbt.Yg;if(Hh(h))r=this.ibt(t,n,e,s,o);else{if(!Qy(h))throw new Ga(Vo.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+h);r=this.ebt(t,n,i,e,s,o)}this.$At.set(n,r)}return r}async ibt(t,i,e,s,n){const r=this.JAt,h=await s.Zct(i,r,e,n),o=this.sbt(t,h);return this.ZAt.set(i,o),o}sbt(t,i){const e=this.JAt,s=Cl.fD(new DataView(i),new Ui);if(s.Km!==Ro.HC)throw new m("Invalid segment index");const n=jt.MD(s.ck),r=function(t,i){const e=[];let s=t._M,n=i+t.gM.toNumber(),r=0;for(const i of t.mM){const t=i.cM,h=Wt.fromNumber(i.ct),o=s.add(h);0===i.uM&&e.push({aut:r++,EO:s,ct:h,PO:o,OAt:n,FAt:n+t-1}),n+=t,s=o}return e}(n,e[1]+1);return new sz(t,n.qD,this.jpt.Tn,Bs(this.Yyt,this.HA),r)}async ebt(t,i,e,s,n,r){const h=e.fyt(),o=this.JAt,a=n.Zct(h.Yu,h.Sat,s,r),u=n.Zct(i,o,s,r),[c,d]=await Promise.all([a,u]),l=this.nbt(t,d,c);return this.ZAt.set(i,l),l}nbt(t,i,e){const s=oz(new j(i),new j(e));return new sz(t,s.qD,this.jpt.Tn,Bs(this.Yyt,this.HA),s.QAt)}zg(){super.zg(),this.tbt.Zg()}constructor(t,i){super(i,t),this.JAt=void 0,this.KAt=void 0,this.ZAt=qh(),this.$At=qh(),this.tbt=new at,this.JAt=t.Vmt,this.KAt=this.jyt(0,Wt.ZERO,this.jpt.ct)}},yz=class extends Jq{get Jmt(){}Nct(t,i){return{Yu:i.vwt[0].href}}myt(t,i){return{Yu:i.vwt[0].href,Sat:t.LAt}}PAt(){return new wz(this,this.wct)}};r();var Az=class extends wp{constructor(){super(Ls.yot)}};r();var ft=class extends Ne{get ck(){return this.Wp}get vwt(){return this.rbt}hbt(){var t,i;return null!=(i=this.zyt)?i:null==(t=this.pE)?void 0:t.hbt()}obt(t){const i=this.wct,e=this.pE&&this.pE.hbt();this.Wp.pwt?this.zyt=new tz(i,e,this.Wp.pwt):this.Wp.gwt?this.zyt=new iz(i,e,this.Wp.gwt[0]):this.Wp._wt?this.zyt=new yz(i,e,this.Wp._wt):t&&!e&&(this.zyt=new yz(i,e,void 0))}abt(t,i){this.Wp=t,this.rbt=t.vwt&&t.vwt.length>0?zq(t.vwt.map(t=>t.Yu),i):i.slice(),this.zyt&&(t.pwt?this.zyt.er(t.pwt):t.gwt?this.zyt.er(t.gwt[0]):t._wt&&this.zyt.er(t._wt))}hyt(){var t;return null==(t=this.ubt)?void 0:t.cbt}yyt(){var t;return null==(t=this.ubt)?void 0:t.dbt}lbt(t){const i=this.fbt,e=this.wct.ct,s=this.ubt,n=this.vbt(t);s&&uh(e,i,1e-5)&&kz(s,n)||(this.fbt=e,this.ubt=n,this.So(new Az))}zg(){this.Vo(),this.zyt&&(this.zyt.zg(),this.zyt=void 0)}constructor(t,i,e){super(),this.pE=void 0,this.Wp=void 0,this.rbt=void 0,this.zyt=void 0,this.fbt=1/0,this.ubt=void 0,this.pE=i,this.abt(t,e)}};function bz(t){let i,e;for(const e of t){const t=e.hyt();if(t){i=t.Tn;break}}if(void 0!==i){for(let i=t.length-1;i>=0;i--){const s=t[i].hyt();if(s){e=s.An;break}}return void 0!==e?{Tn:i,An:e}:void 0}}function Sz(t){if(0===t.length)return;let i=0,e=1/0;for(const s of t){const t=s.hyt();if(!t)return;if(i=_.max(i,t.Tn),e=_.min(e,t.An),i>=e)return}return{Tn:i,An:e}}function Tz(t){let i;for(const e of t){const t=e.yyt();t&&(!i||t.getTime()<i.getTime())&&(i=t)}return i}function kz(t,i){return function(t,i){return t&&i?t.getTime()===i.getTime():t===i}(t.dbt,i.dbt)&&function(t,i){return t&&i?uh(t.Tn,i.Tn,1e-5)&&uh(t.An,i.An,1e-5):t===i}(t.cbt,i.cbt)}var Ez=class extends Hq{get Ilt(){return this._bt}get frt(){return this.Ilt.reduce((t,i)=>{for(const e of i.frt)pi(t,e)||t.push(e);return t},[])}get Np(){return this.frt.length>0?this.frt[0]:""}get Km(){return this._bt[0].Km}get o(){return this.hS}get Idt(){return this.jpt.Idt}get oQ(){return this._bt[0].oQ}get wct(){return this.jpt}get rat(){return De(this.Ilt,t=>t.rat)}hyt(){return Sz(this._bt)}yyt(){let t;for(const i of this._bt){const e=i.yyt();e&&(!t||e.getTime()<t.getTime())&&(t=e)}return t}kn(){this.Vo();for(const t of this._bt)t.mn(Ls.yot,this.ayt)}constructor(t,i,e){super(),this.jpt=void 0,this.hS=void 0,this._bt=void 0,this.jpt=t,this.hS=i,this._bt=e.slice();for(const t of e)t.wn(Ls.yot,this.ayt)}};r();var Pz=class extends wp{constructor(){super(Ls.bot)}};function xz(t){const i=[];for(const e of t){let t;const s=e.Jdt;void 0===s||(t=Jr(i,t=>t.o===s)),t||(t={o:s,Ilt:[]},i.push(t)),t.Ilt.push(e)}return i}r();var Iz=class extends Hq{get Ilt(){return this._bt}get Xpt(){return this.gbt}get Mwt(){return this.uyt.ck.Mwt}get ct(){return this.uyt.ct}get An(){return this.Tn+this.ct}get Lwt(){return this.uyt.ck.Lwt||[]}get o(){return this.uyt.o}get Sot(){return this.pbt}get Idt(){return this.mbt}get Tmt(){return this.mbt.wbt(this)}get wct(){return this}get Smt(){return this.mbt.ybt(this)}get Abt(){return this.bbt(1/0,_.min)}get Sbt(){return this.bbt(0,_.max)}bbt(t,i){if(0===this.gbt.length)return;let e=t;for(const t of this.gbt)if(RT(t.Km)){const s=t.oyt;if(void 0===s)return;e=i(e,s)}return e}get Tn(){return this.uyt.Tn}get zk(){return this.Idt.zk}Tbt(){this.pbt||(this.pbt=!0,this.So(new Pz),this.kn())}async er(t,i){0===this._bt.length?(await this.kbt(this.uyt.Ilt,t,i),this.Ebt(this._bt),ii(i)):await this.Pbt(t,i)}async kbt(t,i,e){for(const s of t){const t=new qq(this,s);try{await t.er(i,e),this._bt.push(t)}catch(t){sa(t)}}}Ebt(t){const i=xz(t);for(const t of i){const i=new Ez(this,t.o,t.Ilt);this.gbt.push(i)}}async Pbt(t,i){for(const e of this._bt)await e.er(t,i)}hyt(){return this.uyt.hyt()}yyt(){return this.uyt.yyt()}kn(){this.Vo(),this.uyt.mn(Ls.yot,this.ayt);for(const t of this.gbt)t.kn();for(const t of this._bt)t.kn();Yo(this._bt),Yo(this.gbt)}constructor(t,i){super(),this.uyt=void 0,this._bt=[],this.gbt=[],this.mbt=void 0,this.pbt=!1,this.mbt=t,this.uyt=i,this.uyt.wn(Ls.yot,this.ayt)}};r();var Rz=class extends wp{constructor(){super(d.qw)}};r(),r();var Cz=function(t){return t.xbt="Ibt",t}({}),Dz=class extends wp{constructor(){super(Cz.xbt)}};r(),r(),r(),r();var Bz=class extends ft{get Nut(){return this.Kot}get wct(){return this.Kot.wct}get Myt(){return this.Kot.Myt}get oQ(){return this.Wp.oQ||this.Kot.oQ}get _yt(){return this.hbt()}get $rt(){return this._yt.$rt}kct(t){const i=this.oQ;return!(!Hh(i)&&!Qy(i))&&this.$rt.kct(t.aut)}Pct(t,i,e,s){return this.$rt.Pct(t,this,i,e,s)}fyt(){return this._yt.fyt(this)}Nct(t){return this._yt.Nct(t,this)}myt(t){return this._yt.myt(t,this)}wyt(){return this.Rbt}vbt(t){const i=this.$rt,e=i.wyt(t),s=e&&function(t,i){const{Fyt:e,Uyt:s,Oyt:n}=t,r=e.EO;let h;const o=i.Xyt(s);if(o.getTime()<=n.getTime())h=s.PO;else{const t=(o.getTime()-n.getTime())/1e3,i=_.max(s.ct-t,0);h=s.EO+i}return{Tn:r,An:h}}(e,i),n=this.$rt.yyt(t,e);return this.Rbt=e,{Oyt:t,cbt:s,dbt:n}}er(t){this.abt(t,this.Kot.vwt)}constructor(t,i){super(t,i,i.vwt),this.Kot=void 0,this.Rbt=void 0,this.Kot=i,this.obt(!0)}},Nz=class extends ft{get rat(){return this.elt}get wct(){return this.jpt}get Myt(){return this.jpt.Myt}get Jdt(){return this.Wp.Jdt}get oQ(){var t;return this.Wp.oQ||(null==(t=this.elt[0])?void 0:t.ck.oQ)||""}get iwt(){return this.ck.iwt}get ewt(){return this.ck.ewt}er(t){this.abt(t,this.jpt.vwt);const i=t.rat||[];if(this.elt.length!==i.length)throw new m("Expected "+this.elt.length+' representations in adaptation set "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.elt[t].er(i[t])}lbt(t){for(const i of this.elt)i.lbt(t);super.lbt(t)}vbt(t){return{Oyt:t,cbt:Sz(this.elt),dbt:Tz(this.elt)}}zg(){for(const t of this.elt)t.zg();super.zg()}constructor(t,i){super(t,i,i.vwt),this.jpt=void 0,this.elt=void 0,this.jpt=i,this.obt(!1),this.elt=t.rat.map(t=>new Bz(t,this))}},Mz=class extends ft{get Ilt(){return this._bt}get Xpt(){return this.gbt}get wct(){return this}get Myt(){return this.Cbt}get o(){return this.Wp.o}get Tn(){return this.MU}get ct(){return this.WA}er(t,i){this.abt(t,this.Cbt.vwt),this.WA=i;const e=t.Ilt||[];if(this._bt.length!==e.length)throw new m("Expected "+this._bt.length+' adaptation sets in period "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this._bt[t].er(e[t])}lbt(t){for(const i of this._bt)i.lbt(t);super.lbt(t)}vbt(t){return{Oyt:t,cbt:Sz(this._bt),dbt:Tz(this._bt)}}zg(){for(const t of this._bt)t.zg();super.zg()}constructor(t,i,e,s){super(i,void 0,t.vwt),this.Cbt=void 0,this.MU=void 0,this.WA=void 0,this._bt=void 0,this.gbt=[],this.Cbt=t,this.MU=e,this.WA=s,this.obt(!1),this._bt=(i.Ilt||[]).map(t=>new Nz(t,this)),this.gbt=xz(this._bt)}};r();var Lz=class{get Dbt(){return this.Bbt.Fwt.YF}get Nbt(){return this.Bbt.Fwt.KF}get Mbt(){return this.Bbt.Fwt.Owt}get Lbt(){var t;return null==(t=this.Bbt.ux)?void 0:t.YF}get Obt(){var t;return null==(t=this.Bbt.ux)?void 0:t.YF}constructor(t){this.Bbt=void 0,this.Bbt=t}},Oz=new Date("2000-01-01"),Fz=class extends Ne{get ck(){return this.Wp}get Km(){return this.Wp.Km||Eh.mV}get Vwt(){return this.Fbt||this.Wp.Vwt||this.Kwt}get Uwt(){return this.Wp.Uwt}get Nyt(){var t,i;return null!=(i=null==(t=this.Ubt)?void 0:t.ignoreAvailabilityWindow)&&i}get Gwt(){return this.Vbt}get vwt(){return this.rbt}get Hwt(){return this.Hbt}get smt(){return this.Wbt}get Kwt(){return this.Wp.Kwt||this.En}get Kmt(){return this.Wp.Kmt}get qbt(){return this.zbt}get Gbt(){return this.En}get Zwt(){return this.Bbt}hyt(){var t;return null==(t=this.ubt)?void 0:t.cbt}yyt(){var t;return null==(t=this.ubt)?void 0:t.dbt}er(t,i,e,s){var n;const r=void 0!==this.Wp&&this.Wp.Km===Eh.wV;this.Wp=t,this.zbt=null!=s?s:e,this.En=e;const h=[lb(i)];this.rbt=t.vwt&&t.vwt.length>0?zq(t.vwt.map(t=>t.Yu),h):h,this.Hbt=t.Hwt&&t.Hwt.length>0?zq(t.Hwt,this.rbt):[];const o=this.Hbt.map(t=>t.href),a=i.href;pi(o,a)||(this.Hbt.push(i),o.push(a));const u=this.Xbt.href;pi(o,u)||(this.Hbt.push(this.Xbt),o.push(u)),this.Vbt=null==(n=t.Gwt)?void 0:n.Rmt(),t.Zwt&&(this.Bbt=new Lz(t.Zwt));const c=t.Km===Eh.wV,d=function(t,i,e){const s=[];for(let e=0;e<t.length;e++){const n=t[e];let r;if(n.Tn)r=n.Tn.Rmt();else if(e>0&&t[e-1].ct){r=s[e-1]+t[e-1].ct.Rmt()}else{if(0!==e||i)break;r=0}s.push(r)}const n=[];for(let i=0;i<s.length-1;i++)n.push({ck:t[i],Tn:s[i],ct:s[i+1]-s[i]});if(s.length>0){const r=s.length-1,h=t[r],o=s[r];let a=1/0;i||(a=h.ct?h.ct.Rmt():e-o),n.push({ck:h,Tn:o,ct:a})}return n}(t.smt,c,this.Vbt);this.jbt(d,r,c),this.lbt(e)}jbt(t,i,e){const s=this.Wbt;if(0===t.length)return void Yo(s);const n=t[0].ck.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const h=s.splice(0,r);for(const t of h)t.zg();if(i&&!e&&s.length>0&&t.length>0){var o;const i=null!=(o=Uz(s[0].ck))?o:$c.wF;var a;const e=null!=(a=Uz(t[0].ck))?a:$c.wF;if(e.eF(i)){const n=e.lF(i);void 0!==this.Vbt&&(this.Vbt+=n.iF());for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];e.Tn=t.Tn,zz(e.ck,t.ck)}i===t.length-1&&(e.ct+=n.iF())}}}for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];0,t.er(e.ck,e.ct)}else s.push(new Mz(this,e.ck,e.Tn,e.ct))}}lbt(t){for(const i of this.Wbt)i.lbt(t);const i=this.ubt,e=this.vbt(t);i&&kz(i,e)||(this.ubt=e,this.So(new Az))}vbt(t){return{Oyt:t,cbt:bz(this.Wbt),dbt:Tz(this.Wbt)}}Lyt(){const t=af(this.Wbt,-1);if(void 0===t)return;if(isFinite(t.ct))return;if(0===t.Ilt.length)return;const i=t.Ilt[0];if(0===i.rat.length)return;const e=i.rat[0].$rt,s=e.Lyt();return s?{$at:s,Uwt:e.Rdt(s)}:void 0}zg(){this.Vo();for(const t of this.Wbt)t.zg()}constructor(t,i,e,s,n){if(super(),this.Wp=void 0,this.Xbt=void 0,this.En=void 0,this.zbt=void 0,this.ubt=void 0,this.rbt=void 0,this.Hbt=void 0,this.Vbt=void 0,this.Fbt=void 0,this.Wbt=[],this.Ubt=void 0,this.Bbt=void 0,this.Xbt=i,this.Ubt=n,this.er(t,e,s),t.Km===Eh.wV){const t=this.Lyt();t&&t.Uwt&&t.Uwt.getTime()<Oz.getTime()&&(this.Fbt=new Date(this.Kwt.getTime()-1e3*(t.$at.EO+t.$at.ct)),this.lbt(s))}}};function Uz(t){let i=Wz(t);var e,s;for(const s of null!=(e=t.Ilt)?e:[])i=IE(i,Vz(s));for(const e of null!=(s=t.Lwt)?s:[])i=IE(i,qz(e));return i}function Vz(t){let i=Wz(t);for(const e of t.rat)i=IE(i,Hz(e));return i}function Hz(t){return Wz(t)}function Wz(t){let i;if(void 0!==t.pwt&&(i=IE(i,qz(t.pwt))),void 0!==t._wt&&(i=IE(i,qz(t._wt))),void 0!==t.gwt)for(const e of t.gwt)i=IE(i,qz(e));return i}function qz(t){var i,e;return $c.gF(null!=(i=t.jmt)?i:Wt.ZERO,null!=(e=t.qD)?e:1)}function zz(t,i){if(jz(t,i),t.Tn=i.Tn,void 0!==t.Ilt&&void 0!==i.Ilt&&t.Ilt.length===i.Ilt.length)for(let e=0;e<t.Ilt.length;e++)Gz(t.Ilt[e],i.Ilt[e]);if(void 0!==t.Lwt&&void 0!==i.Lwt&&t.Lwt.length===i.Lwt.length)for(let e=0;e<t.Lwt.length;e++)Qz(t.Lwt[e],i.Lwt[e])}function Gz(t,i){if(jz(t,i),void 0!==t.rat&&void 0!==i.rat&&t.rat.length===i.rat.length)for(let e=0;e<t.rat.length;e++)Xz(t.rat[e],i.rat[e])}function Xz(t,i){jz(t,i)}function jz(t,i){if(void 0!==t.pwt&&void 0!==i.pwt&&Qz(t.pwt,i.pwt),void 0!==t._wt&&void 0!==i._wt&&Qz(t._wt,i._wt),void 0!==t.gwt&&void 0!==i.gwt&&t.gwt.length===i.gwt.length)for(let e=0;e<t.gwt.length;e++)Qz(t.gwt[e],i.gwt[e])}function Qz(t,i){t.qD=i.qD,t.jmt=i.jmt}r();var Kz=class{async VY(t){await this.Qbt(t,this.nV,this.Kbt,this.Ybt).catch(yf)}xdt(){return new Date(ku()+this.Jbt)}async Qbt(t,i,e,s){let n;if(s&&(n=await this.Zbt(i,s,e)),void 0===n){ii(e);for(const s of t)if(n=await this.$bt(i,s,e),void 0!==n)break}this.Jbt=void 0===n?0:n-ku()}async $bt(t,i,e){switch(i.y8){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=i.zE;if(s)return await this.Zbt(t,s,e);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=i.zE;if(t){const i=new Date(t).getTime();if(!S(i))return i}break}default:return}}async Zbt(t,i,e){try{const s=await t.lk({Yu:i,Uk:X.GET,dk:M.NT,Yg:e}),n=await s.UT(),r=new Date(n).getTime();if(!S(r))return r}catch(t){sa(t)}}constructor(t,i,e){this.nV=void 0,this.Kbt=void 0,this.Ybt=void 0,this.Jbt=void 0,this.nV=t,this.Kbt=i,this.Ybt=e,this.Jbt=0}},Yz=class extends Ne{get Uwt(){return this.uyt&&this.uyt.Uwt}get Vwt(){return this.uyt&&this.uyt.Vwt}get Nyt(){return this.uyt&&this.uyt.Nyt}get o(){return this.uyt&&this.uyt.ck.o}get qbt(){var t;return null==(t=this.uyt)?void 0:t.qbt}get tSt(){var t;return null==(t=this.uyt)?void 0:t.Gbt}get Hwt(){return this.uyt?this.uyt.Hwt.map(t=>t.href):[this.iSt]}get iSt(){return this.eSt.href}get qwt(){return this.uyt&&this.uyt.ck.qwt}get zwt(){return this.uyt&&this.uyt.ck.zwt}get Gwt(){return this.uyt&&this.uyt.ck.Gwt}get Xwt(){return this.uyt&&this.uyt.ck.Xwt}get Qwt(){var t,i;const e=(null==(i=this.uyt)||null==(t=i.ck.Qwt)?void 0:t.Cmt())||0;return _.max(e,Zz)}get sx(){return this.sSt}nSt(t){const i=this.sx;this.sSt=t,i!==this.sx&&this.So(new Dz)}get smt(){return this.Wbt}get rSt(){return this.Km===Eh.wV?this.Syt:this.hSt}get oSt(){const t=this.rSt;if(void 0!==t)for(const i of this.smt)if(i.Tn<=t&&i.An>t)return i}get rwt(){return this.uyt&&this.uyt.ck.rwt}get Kwt(){return this.uyt&&this.uyt.Kwt}get Abt(){for(let t=this.Wbt.length-1;t>=0;t-=1){const i=this.Wbt[t].Abt;if(i)return i}}get Syt(){const t=this.Abt;if(void 0===t)return;const i=t-this.aSt;return _.max(i,this.hSt)}get hSt(){for(const t of this.Wbt){const i=t.ryt;if(void 0!==i)return i}}get zk(){return Boolean(this.uSt.zk)}get aSt(){var t,i;if(this.uSt.cSt&&this.Km===Eh.wV)return this.uSt.cSt;const e=null==(i=this.uyt)||null==(t=i.ck.Ywt)?void 0:t.Rmt();return void 0!==e?e:this.Km===Eh.wV?1.5*this.Xwt.Rmt():0}get Kmt(){return this.uyt&&this.uyt.Kmt}get Km(){return this.uyt?this.uyt.Km:void 0}get Zwt(){var t;return null==(t=this.uyt)?void 0:t.Zwt}async er(t,i,e){const s=[],n=[],r=t.Wwt?zd.Dh(t.Wwt,this.eSt):this.eSt;void 0===this.uyt?(await this.dSt.VY(t.Jwt),this.uyt=new Fz(t,this.eSt,r,this.xdt(),this.Ubt),this.uyt.wn(Ls.yot,this.Rs)):this.uyt.er(t,r,this.xdt(),i);const h=this.uyt.smt;let o;if(0===h.length)o=this.Wbt.slice(),Yo(this.Wbt);else{const t=h[0].o;let i=0;for(;i<this.Wbt.length&&this.Wbt[i].o!==t;)i++;o=this.Wbt.splice(0,i);for(let t=0;t<h.length;t++){const i=h[t];let r;t<this.Wbt.length?r=this.Wbt[t]:(r=new Iz(this,i),s.push(r)),n.push(r.er(this.lSt,e))}}await Promise.all(n),this.Wbt.push(...s);for(const t of o)t.Tbt();this.So(new Rz)}xdt(){return this.dSt.xdt()}ybt(t){const i=this.Wbt.indexOf(t);if(i>0)return this.Wbt[i-1]}wbt(t){const i=this.Wbt.indexOf(t);if(i>=0&&i+1<this.Wbt.length)return this.Wbt[i+1]}hyt(){return this.uyt?this.uyt.hyt():void 0}yyt(){return this.uyt&&this.uyt.yyt()}lbt(t){this.uyt&&this.uyt.lbt(t)}kn(){this.Vo(),this.fSt=void 0,this.nSt(!1);for(const t of this.Wbt)t.kn();Yo(this.Wbt),this.uyt&&this.uyt.zg()}constructor(t,i,e,s,n){super(),this.vSt=void 0,this.uyt=void 0,this.eSt=void 0,this.sSt=!0,this.Wbt=[],this.uSt=void 0,this.lSt=void 0,this.fSt=void 0,this.nV=void 0,this.dSt=void 0,this.Ubt=void 0,this.uSt=t,this.eSt=t.iR,this.lSt=i,this.nV=e,this.vSt=s,this.dSt=new Kz(this.nV,this.vSt,this.uSt._St),this.Ubt=n}},Jz=class{get Idt(){return this.mbt}constructor(t,i,e,s,n){this.mbt=void 0,this.mbt=new Yz(t,i,e,s,n)}},Zz=1e3,$z=class{get Br(){return this.uyt}get W(){return this.gSt||(this.gSt=this.lE(this.pSt.Yg),Wr(this.gSt)),this.gSt}async lE(t){this.uyt.Idt.So(new Pt);try{await this.mSt(t),this.uyt.Idt.nSt(!0)}catch(t){throw sa(t),this.gSt=void 0,this.uyt.Idt.nSt(!1),new m("The provided MPEG-DASH document could not be loaded - "+t.message)}this.wSt=this.ySt(this.pSt.Yg)}async ySt(t){try{for(;this.uyt.Idt.Km===Eh.wV;)await Nc(this.ASt,t)}catch(t){}}get ASt(){return this.uyt.Idt.tSt&&this.uyt.Idt.Km===Eh.wV?this.bSt(this.pSt.Yg):this.W}async SSt(t){ii(t);const i=this.TSt();if(i>0){const e=_.min(i,2147483647);await Er(e,t)}try{await this.mSt(t),this.uyt.Idt.nSt(!0)}catch(t){throw new m("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.kSt=void 0}}TSt(){const t=this.uyt.Idt.xdt().getTime()-this.uyt.Idt.qbt.getTime();return this.uyt.Idt.Qwt-t}ESt(t){const i=this.uyt.Idt.yyt();if(i){const e=i.getTime()-t.getTime();if(e>0)return e}this.uyt.Idt.lbt(t);const e=this.uyt.Idt.yyt();return e?e.getTime()-t.getTime():NaN}async bSt(t){const i={stack:[],error:void 0,hasError:!1};try{null!=this.kSt||(this.kSt=this.SSt(t));const e=Be(i,at.ep([t]),!1),s=[this.kSt,this.PSt(e.Yg)].filter(it);await Promise.race(s).catch(yf)}catch(t){i.error=t,i.hasError=!0}finally{Cs(i)}}PSt(t){const i=this.uyt.Idt.xdt(),e=this.ESt(i);if(!S(e)&&!this.Br.Idt.Nyt)return this.xSt(e,t)}async xSt(t,i){await Er(t,i);const e=this.uyt.Idt.xdt();this.uyt.Idt.lbt(e)}async ISt(t,i){const e=await this.CSt.RSt(t,{},i);return(new Nq).$wt(e.DSt,e.gk)}kn(){return this.pSt.Zg(),this.wSt=void 0,this.gSt=void 0,this.kSt=void 0,this.uyt.Idt.kn(),Promise.resolve()}constructor(t,i,e,s,n){this.CSt=void 0,this.uyt=void 0,this.wSt=void 0,this.gSt=void 0,this.kSt=void 0,this.pSt=new at,this.mSt=async t=>{try{const i=this.uyt.Idt.xdt(),e=await this.ISt(this.uyt.Idt.Hwt,t);await this.uyt.Idt.er(e,i,t)}catch(t){throw rt(t)&&this.uyt.Idt.nSt(!1),t}},this.CSt=s,this.uyt=new Jz(t,i,e,this.pSt.Yg,n)}};r(),r();var tG=class extends wp{constructor(t,i){super("fmt"),this.Emt=void 0,this.hpt=void 0,this.Emt=t,this.hpt=i}},iG=class extends Ne{get hpt(){return this.dlt}get Km(){return this.Vp}get Z(){return this.RI.slice()}jU(t){t&&this.dlt!==t&&this.BSt(t)}QU(t){this.dlt===t&&this.BSt(void 0)}BSt(t){this.dlt=t,this.So(new tG(this,this.dlt))}kn(){this.Vo();for(const t of this.RI)t.Jdt=void 0;Yo(this.RI)}constructor(t,i){super(),this.dlt=void 0,this.RI=void 0,this.Vp=void 0,this.Vp=t,this.RI=i;for(const t of this.RI)t.Jdt=this}};r(),r(),r();var eG=class extends wp{constructor(t,i,e){super(d.Dw),this.currentTime=void 0,this.initDataType=void 0,this.initData=void 0,this.currentTime=t,this.initDataType=i,this.initData=e}};function mc(t,i,e,s,n){let r=[],h=[];for(const t of i)t.Km===Ci.Dk?r=r.concat(t.Z):t.Km===Ci.Bk&&(h=h.concat(t.Z));return[sG(t,r,e,s,null==n?void 0:n.preferredAudioCodecs),nG(t,h,e,s,null==n?void 0:n.preferredVideoCodecs)].filter(it)}function sG(t,i,e,s,n){const r=Jr(s||[],t=>t.Lot===Ci.Dk&&t.Rt),h=[hG(r,e,t),oG(r),aG(r),uG(r,n),cG(),t=>{const i=t.filter(t=>"main"===t.Lt);return i.length>0?i:t}];return rG(i,h)}function nG(t,i,e,s,n){const r=Jr(s||[],t=>t.Lot===Ci.Bk&&t.Rt),h=[hG(r,e,t),uG(r,n),cG(),t=>{const i=t.filter(t=>"main"===t.Lt);return i.length>0?i:t}];return rG(i,h)}function rG(t,i){if(0===t.length)return;let e=t;for(const t of i){if(1===e.length)return e[0];e=t(e)}return e[0]}function hG(t,i,e){return s=>{const n=t?t.Nut.o:void 0;if(!it(n))return s;const r=null==i?void 0:i.Mwt,h=e.Mwt,o=r&&h&&r.zE===h.zE,a=Jr(s,t=>t.Nut.o===n);return o&&a?[a]:s}}function oG(t){return i=>{const e=t?t.bs:"",s=i.some(t=>""!==t.bs)?i.filter(t=>""!==t.bs):i;if(""===e)return s;const n=s.filter(t=>t.bs===e);return n.length>0?n:s}}function aG(t){return i=>{const e=t?t.Lt:"";if(""===e)return i;const s=i.filter(t=>t.Lt===e);return s.length>0?s:i}}function uG(t,i){return t=>{if(i&&i.length>0)for(const e of i){const i=t.filter(t=>t.KI.II.some(t=>bN(t.frt,e)));if(i.length>0)return i}return t}}function cG(){return t=>{let i=[],e=-1/0;for(const s of t){const t=s.Nut.Kq;t>e?(e=t,i=[s]):t===e&&i.push(s)}return i}}r(),r();var ac=function(t){return t.NSt="api",t.MSt="start",t}({});r();var dG={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},lG=class{LSt(t,i,e){const s=this._dt.maxRetries===1/0?dG:this._dt;return $i(()=>this.OSt(t,i,e),e,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async OSt(t,i,e){let s;for(const n of t)try{const t=new $n({Yu:n,dk:M.NT,fk:i,zk:this.FSt,Uk:X.GET,Km:Al.wk,Wk:Xa.pk,Yg:e,Vk:15e3,Hk:5e3}),s=await this.nV.lk(t),r=await s.UT(e);return{DSt:r,USt:n,gk:s.gk}}catch(t){s=t}throw s}constructor(t,i,e=dG){this.nV=void 0,this.FSt=void 0,this._dt=void 0,this.nV=t,this.FSt=i,this._dt=e}};function ia(t){return fn(t)}function fG(t,i){const e=fn(t);return i?""+e+i:""+e}r(),r();var vG=class{async RSt(t,i,e){let s;for(const n of this.VSt)try{return await n.RSt(t,i,e)}catch(t){sa(t),s=t}throw s}constructor(t){this.VSt=void 0,this.VSt=t}},_G=class{async RSt(t,i,e){const s=await this.eut.HSt(t);if(s)return{DSt:s.data,USt:s.locationURL,gk:s.responseURL};throw new m("Manifest fetch from cache unsuccesful")}constructor(t){this.eut=void 0,this.eut=t}},gG=class{async RSt(t,i,e){return await this.WSt.LSt(t,i,e)}constructor(t){this.WSt=void 0,this.WSt=t}};function pG(t,i){return new vG([new _G(i),new gG(t)])}var mG=class{async RSt(t,i,e){const s=await this.CSt.RSt(t,i,e);return await this.qSt(s),s}async qSt(t){await this.GSt.zSt({key:ia(t.USt),locationURL:fn(t.USt),responseURL:fn(t.gk),data:t.DSt,references:[this.XSt.o]})}constructor(t,i,e){this.CSt=void 0,this.GSt=void 0,this.XSt=void 0,this.CSt=t,this.GSt=i,this.XSt=e}};r();var gt=class extends wp{constructor(){super(d.Xw)}};r();var Fr=class extends wp{constructor(){super(d.Gw)}};r(),r();var pt=class extends es{jSt(t){return t.Ax=Zu.LOADED,this.tt(t),t}QSt(t){for(const i of this.Z.II)if(i.ZI===t)return i}constructor(t){super(t)}};function wG(t,i){return""===i?t:t+" "+i}r(),r(),r();var yG=class extends _h{get Ca(){return this.hu||(this.hu=function(t){return po(zt(t),{get attributes(){return t.iP},get eventID(){var i;return""+(null!=(i=t.KSt)?i:"")}})}(this)),this.hu}GO(t){return this.U===t.U}constructor(t,i,e,s,n){super(t,i,e,!1,null==n?void 0:n.toString()),this.iP=void 0,this.KSt=void 0,this.iP=s,this.KSt=n}},AG=class extends pt{YSt(t){const i=this.JU.tI(Ao.VU,"","","",void 0,nh.EVENT_STREAM);return i.ZI=t,this.jSt(i),i}JSt(t,i,e){const s=t.y8;var n;const r=null!=(n=t.zE)?n:"";var h;const o=null!=(h=t.qD)?h:1;var a;const u=null!=(a=t.jmt)?a:Wt.ZERO,c=wG(s,r);let d=this.QSt(c);d||(d=this.YSt(c));for(const s of t.aQ)if(!bG(s,d)){const t=SG(s,o,u,i);t.PO>e&&d.tV(t)}}async Un(t){await this.hr(),this.Cbt=t,this.Cbt.wn(d.qw,this.ZSt),this.ZSt()}async hr(){this.Cbt&&(this.Cbt.mn(d.qw,this.ZSt),this.Cbt=void 0);for(const t of this.Z.II)this.JU.iV(t);await super.hr()}ZU(t,i,e){return Ut(t,i,e)}constructor(t){super(t),this.Cbt=void 0,this.ZSt=()=>{var t,i;const e=null!=(i=null==(t=this.Cbt.hyt())?void 0:t.Tn)?i:0;if(e>0)for(const t of this.Z.II)St(t,e);for(const t of this.Cbt.smt)if(t.An>e)for(const i of t.Lwt)this.JSt(i,t,e)}}};function bG(t,i){const e=t.o;if(void 0!==e){if(Jr(i.L.II,i=>i.KSt===e&&i.U===t.ck))return!0}return!1}function SG(t,i,e,s){const n=t.o,r=t.tM.toSigned().subtract(e),h=t.ct,o=t.ck,a=t.iP,u=r.toNumber()/i+s.Tn,c=h?h.toNumber()/i:void 0,d=void 0!==c?u+c:s.Sbt;return new yG(u,d,o,a,n)}function TG(t,i,e,s,n){const r=[],h=Jr(e,t=>t.y8===Ng);if(void 0===h)return;const o=h.zE?function(t){const i=t.split(":",1)[0];switch(i){case"cbcs":case"cenc":return i;default:return}}(h.zE.toLowerCase()):"cenc";if(void 0!==o){for(const i of e)if(i.y8!==Ng)for(const e of rp(i.y8)){var a;const s=n&&i.A8?[i.A8]:[];var u;const h=null!=(u=null==(a=t.clearkey)?void 0:a.keys)?u:[];r.push({kS:e,BW:s,NW:void 0,HH:void 0,MW:h})}if(r.length)return{aH:t,Ept:{$St:o,uH:h.uH},kpt:r,tTt:i===Ci.Dk?s.slice():[],iTt:i===Ci.Bk?s.slice():[],T8:!1}}}function kG(t,i){if(!t)return i;if(!i)return t;const e=[],s=qh();var n;return EG(e,s,t.kpt),EG(e,s,i.kpt),{aH:t.aH,Ept:{$St:t.Ept.$St,uH:null!=(n=t.Ept.uH)?n:i.Ept.uH},kpt:e,tTt:PG(t.tTt,i.tTt,pi),iTt:PG(t.iTt,i.iTt,pi),T8:t.T8||i.T8||!1}}function EG(t,i,e){for(const s of e){const e=s.kS.$m;let n;i.has(e)?(n=i.get(e),n.BW=PG(n.BW,s.BW,xG)):(n=Mo({},s),t.push(n),i.set(e,n))}}function PG(t,i,e){const s=t.slice();for(const t of i)e(s,t)||s.push(t);return s}function xG(t,i){for(const e of t)if(lm(e,i))return!0;return!1}function IG(t,i,e){let s;const n=t.xW;if(n){const r=t.oQ,h=[];for(const i of t.frt)h.push(r+'; codecs="'+i+'"');s=TG(i||{},t.Km,n,h,e)}for(const n of t.rat)s=kG(s,RG(n,i,e));return s}function RG(t,i,e){return TG(i||{},t.Km,t.xW||[],[t.qT],e)}function CG(t){return t?t.kpt.map(i=>{const e=DG(t.aH,i.kS),s=t.Ept.$St;return{kS:i.kS,BW:i.BW,HH:i.HH,Mq:[{initDataTypes:[i.kS.Jm],audioCapabilities:BG(t.tTt,s,null==e?void 0:e.audioRobustness),videoCapabilities:BG(t.iTt,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}],MW:i.MW}}):[]}function DG(t,i){switch(i.Km){case an.zm:return t.widevine;case an.qm:return t.playready;case an.jm:return t.fairplay;case an.Gm:case an.Xm:return t.clearkey}}function BG(t,i,e){if(0!==t.length)return t.map(t=>({contentType:t,encryptionScheme:i,robustness:e}))}function NG(t,i){const e=t=>{const e=i.indexOf(t.kS.$m);return e>=0?e:i.length};return xe(t,(t,i)=>e(t)-e(i))}r(),r();var MG=class extends pt{YSt(t){const i=this.JU.tI(Ao.VU,t.o,"thumbnails","",!1,nh.DEFAULT);return i.Xk=xh.Kn,this.jSt(i),i}async Un(t){await this.hr(),this.Cbt=t,this.Cbt.wn(d.qw,this.er),this.er()}eTt(t){this.sTt(t),this.nTt()}nTt(){const t=[];for(const i of this.Z.II)this.rTt(i)||t.push(i);for(const i of t)this.it(i)}sTt(t){const i=[];for(const e of this.elt)-1===t.indexOf(e)&&i.push(e);for(const t of i)oi(this.elt,t)}async hr(){this.Cbt&&(this.Cbt.mn(d.qw,this.er),this.Cbt=void 0);for(const t of this.elt)t.mn(Ls.yot,this.hTt);this.elt.length=0;for(const t of this.Z.II)this.JU.iV(t);await super.hr()}ZU(t,i,e){return Ut(t,i,e)}kn(){return this.hTt=void 0,super.kn()}oTt(){var t,i;const e=null!=(i=null==(t=this.Cbt.hyt())?void 0:t.Tn)?i:0;if(e>0)for(const t of this.Z.II)St(t,e)}aTt(t){return this.Z.II.some(i=>i.o===t.o)}uTt(t){return Jr(this.Z.II,i=>i.o===t.o)}rTt(t){return this.elt.some(i=>t.o===i.o)}constructor(t){super(t),this.elt=[],this.hTt=void 0,this.Cbt=void 0,this.er=()=>{const t=[];for(const i of this.Cbt.smt)for(const e of i.Ilt)if(e.Km===Ci.Nk&&e.rat.length>0){const i=e.rat[0];t.push(i),this.aTt(i)||this.YSt(i),-1===this.elt.indexOf(i)&&(this.elt.push(i),i.wn(Ls.yot,this.hTt)),this.cTt(i)}this.eTt(t)},this.cTt=t=>{const i=this.uTt(t);i&&t&&i.Xk!==xh.Nh&&(this.oTt(),function(t,i){const e=t.$rt,s=t.wyt();if(!s)return;const n=s.Fyt,r=s.Uyt,h=t.Ti,o=t.Mi,[a,u]=function(t){for(const i of t)if(Ih(i.y8,OG)||Ih(i.y8,FG)){const t=i.zE.match(LG);if(t){const[,i,e]=t;return[Number(i),Number(e)]}}return[1,1]}(t.iwt);let c=n;for(;c&&c.aut<=r.aut;){const s=t._yt.ct||c.ct,n=UG(i,c,t.Nct(c).Yu,h,o,a,u,s);for(const t of n)i.tV(t);c=e.Cct(c)}}(t,i))};const i=this;this.hTt=function(){i.cTt(this)}}},LG=/^(\d+)x(\d+)$/,OG="http://dashif.org/guidelines/thumbnail_tile",FG="http://dashif.org/thumbnail_tile";function UG(t,i,e,s,n,r,h,o){const a=[],u=i.EO,c=r*h,d=s/r,l=n/h,f=_.round(d),v=_.round(l),g=o/c;if(1===c){const i=u+g;return VG(t,u,i,e)?a:[new _h(u,i,e,!1)]}for(let s=0;s<h;s++)for(let n=0;n<r;n++){const h=u+(s*r+n)*g,o=h+g,c=e+"#xywh="+_.round(n*d)+","+_.round(s*l)+","+f+","+v;if(VG(t,h,o,c)||a.push(new _h(h,o,c,!1)),o>=i.PO)return a}return a}function VG(t,i,e,s){return t.L.II.some(t=>t.EO===i&&t.PO===e&&t.U===s)}r(),r(),r(),r();var HG=class extends _h{get $N(){return this.dTt}get zE(){return this.lTt}get fTt(){return this.vTt}get Ca(){return this.hu||(this.hu=function(t){return po(zt(t),{get schemeIDURI(){return t.$N},get value(){return t.zE},get emsgID(){return t.fTt}})}(this)),this.hu}GO(t){return L(this.U,t.U)}constructor(t,i,e,s,n,r){super(t,i,r,!1),this.dTt=void 0,this.lTt=void 0,this.vTt=void 0,this.dTt=e,this.lTt=s,this.vTt=n}},WG=class t extends pt{Odt(i,e,s){const n=jt.TD(dh(i));if(!n)return;const r=function(t,i){const e=[];for(const s of t)sT(s,i)&&e.push(s);return e}(n,Ro.VC);if(r.length){const i=t._Tt(n,e,s);this.gTt(r,i,s)}}gTt(t,i,e){for(const s of t){let t;t=1===s.bD?s.tM.toNumber()/s.qD+e:i+s.sM/s.qD;const n=t+s.iM/s.qD;"https://aomedia.org/emsg/ID3"===s.$N||"https://developer.apple.com/streaming/emsg-id3"===s.$N?this.pTt(s,t):this.mTt(s,t,n)}}mTt(t,i,e){const s=wG(t.$N,t.zE);let n=this.QSt(s);n||(n=this.wTt(s),this.jSt(n)),n.tV(new HG(i,e,t.$N,t.zE,t.o,t.eM))}pTt(t,i){const e=nL(dh(t.eM));if(!e)return;const s=wG(t.$N,t.zE);let n=this.QSt(s);n||(n=this.yTt(s),this.jSt(n));for(const t of e.J5){const e=new vL(i,t);DM(e,n.L.II),n.tV(e)}}static _Tt(t,i,e){const s=lr(t,Ro.HC);return s?Bs(s._M,s.qD)+e:i}wTt(t){const i=this.JU.tI(Ao.VU,"","","",void 0,nh.EMSG);return i.ZI=t,i.Xk=xh.JI,i}yTt(t){const i=this.JU.tI(Ao.VU,"","","",void 0,nh.ID3);return i.ZI=t,i.Xk=xh.JI,i}ZU(t,i,e){return Ut(t,i,e)}async hr(){for(const t of this.Z.II)this.JU.iV(t);await super.hr()}constructor(t){super(t)}},qG=class extends WG{async Un(t){await this.hr(),this.Cbt=t,this.Cbt.wn(d.qw,this.ZSt),this.ZSt()}async hr(){this.Cbt&&(this.Cbt.mn(d.qw,this.ZSt),this.Cbt=void 0),await super.hr()}constructor(...t){super(...t),this.Cbt=void 0,this.ZSt=()=>{var t,i;const e=null!=(i=null==(t=this.Cbt.hyt())?void 0:t.Tn)?i:0;this.qU(e)}}};r(),r();var zG=class{Uct(t,i){return this.ATt?this.eut.Uct(t,i):Promise.resolve(!1)}iut(t,i){return this.ATt?this.eut.iut(t,i):Promise.resolve(void 0)}async HSt(t){const i=await this.eut.HSt(t);return this.ATt=void 0!==i,i}WJ(t){return this.eut.WJ(t)}constructor(t){this.eut=void 0,this.ATt=!1,this.eut=t}};r();var GG=class extends VT{NL(){var t;return null!=(t=this.DL)?t:0}oR(){this.oa.MP=1/0}ML(t,i,e){return!1}LL(){return!0}constructor(t,i,e){super(t,i,e)}},XG=[d.Qw,d.Yw,d.iy,d.zw,d.oy],jG=[d.Kw,d.gy,d.Lw,d.Nw],QG=class t extends Ne{bTt(t){return!!this.iq&&this.iq.TZ(t)}async Lp(t){this.iq=await this.TL.Un(t),this.STt(),this.TTt(),this.iq.C4(this.ct)}kTt(t){return this.iq.EZ(t)}ETt(t){return this.iq.xZ(t)}async PTt(){this.xTt=this.ITt,this.iq&&(await this.TL.hr(),this.iq=void 0)}C3(){this.iq.C3()}A3(){const t=this.ct;this.iq.ct<t&&this.iq.C4(t),this.iq.A3()}async RTt(t){const i=this.iq,e=[];i.Q3&&e.push(DN(i.Q3,t)),i.K3&&e.push(DN(i.K3,t)),await Promise.all(e)}CTt(t,i,e,s,n,r){const h=this.TL,o=this.iq;return new ZW(h,o,t,i,e,s,n,r,this.DTt,h,this.wpt,this._dt,this.Npt,this.lq)}BTt(t,i,e){return t.EZ(i,e,this.iq)}async NTt(t,i,e,s){const n=this.CTt(this.nV,this.Rz,this.eut,this.Ac,t,s);return n.wn(Ls.bot,this.MTt),n.wn(d.zw,this.Rs),await n.VY(i,e),n}LTt(t){void 0===t&&(t=!1),this.OTt.Zg(),this.m7.Zg(),this.FTt.Zg(),this.FTt=new at,this.UTt=$e(this.VTt(this.HTt,this.w7,this.UTt,t,this.FTt.Yg),this.FTt).catch(this.mmt)}async VTt(t,i,e,s,n){await Promise.all([t,i,e]),ii(n),await Nc(this.WTt.Qy,n);const r=this.qTt;await r.Jot(),this.A3(),ii(n);const h=r.Mc,o=r.pmt,a=r.gmt;let u=this.zTt(h,a,h,o,!1),c=this.GTt(a,u);!s&&this.bTt(c)?await this.XTt(a,u,c):(u=this.zTt(h,a,h,o,!0),c=this.GTt(a,u),await this.jTt(a,u,c,n)),ii(n),this.kx?this.My(this.MP):this.QTt(),this.KTt()}async XTt(t,i,e){const s=this.qTt;await this.kTt(e),this.YTt=e,await this.BTt(s,t,i),await s.$ot(Tu.Nht)}async jTt(t,i,e,s){const n=this.qTt;this.k7(),this.JTt();const r=this.ZTt;await this.PTt(),await this.Lp(e),this.YTt=e,await this.BTt(n,t,i);try{const t=this.$Tt(r,!1,!0,s);Wr(t),await n.$ot(Tu.Nht),await t}finally{this.R7(),this.tkt()}}get ht(){return this.YL}get QW(){const t=this.ZTt,i=this.ikt,e=i.VM(t);if(-1!==e)return{Tn:i.Tn(e),An:i.An(e)}}get ikt(){var t,i,e;const s=null!=(e=null==(t=this.qTt)?void 0:t.IP)?e:ve.iL();var n;const r=null!=(n=null==(i=this.ekt)?void 0:i.IP)?n:ve.iL();return s.OM(r)}get IP(){return this.ikt._s()}get CP(){var t;const i=null==(t=this.uyt)?void 0:t.Idt,e=null==i?void 0:i.Vwt;if(!i||!e)return;const s=e.getTime(),n=1e3*this.MP;return new Date(n+s)}set CP(t){var i;const e=null==(i=this.uyt)?void 0:i.Idt,s=null==e?void 0:e.Vwt;if(!t||!e||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.My(r-n)}get bt(){return this.Ac}get ZTt(){return void 0!==this.q8?this.q8:void 0!==this.skt?this.skt:this.TL.MP}get MP(){return this.ZTt}set MP(t){this.OP(t)}OP(t,i){this.My(t,t===1/0)}get ct(){let t=NaN;return this.qTt&&this.qTt.emt?t=this.qTt.An:this.uyt&&void 0!==this.uyt.Idt.Km&&(t=this.uyt.Idt.Gwt?this.uyt.Idt.Gwt.Rmt():1/0),t}get An(){return this.ct}get UP(){return this.kx?this.z8():!(!this.qTt||!this.qTt.emt)&&this.TL.UP}z8(){return!!this.kx&&(!(!this.qTt||!this.qTt.emt)&&this.ZTt===this.qTt.An)}get lt(){return this.JW}get WP(){return this.ZW}get zP(){}get jP(){}nkt(){var t;const i=this.rkt;if(0===i.V)return!0;var e;const s=null!=(e=null==(t=this.QW)?void 0:t.An)?e:this.ZTt,n=i.Tn(0);return s>=n||uh(s,n,.001)}hkt(){var t;if(!this.uyt)return!1;if(this.uyt.Idt.Km!==Eh.wV)return!1;const i=null==(t=this.qTt)?void 0:t.Mc;if(i&&i.Sot)return!0;const e=[];for(const t of this.uyt.Idt.smt){const i=t.ryt,s=t.Sbt;void 0!==i&&void 0!==s&&e.push(i,s)}const s=new ve(e).LM();return function(t,i,e){if(!i.V||!e.V)return ve.iL();const s=i.Tn(0),n=i.An(i.V-1),r=t.Mn(e).BM().Mn(t).OM(i);return ve.tL(r.Tn(0),r.An(r.V-1)).FM(r).XM((t,i)=>t<s&&i<=n&&i-t>yt)}(this.ikt,this.rkt,s).V>0}get JP(){return Mo({},this.ITt,{nO:HI.Ng.fW(),rO:this.okt,hO:{amountOfBufferedAudioSegments:this.akt,amountOfBufferedVideoSegments:this.ukt}})}get ITt(){return function(t,i){return{iO:t.iO+i.iO,eO:t.eO+i.eO,sO:t.sO+i.sO}}(this.xTt,this.TL.ZP())}get $P(){return this.TL.$P}set $P(t){this.TL.$P=t}get hx(){return this.X8?this.ckt:this.qTt&&this.qTt.emt?this.dkt:this.ckt}get ux(){return this.TL.ux}set ux(t){this.TL.ux=t}get _x(){let t=this.Ho;return this.qTt&&(t=t.OM(this.lkt)),t.LM(.1)._s()}get lkt(){return this.TL._x}fkt(t){this.Ho=this.Ho.OM(t)}get mx(){return this.tq}set mx(t){this.tq=t,this.vkt()}get Ax(){let t=this.TL.Ax;return this._kt&&(t=_.max(mh.Qn,t)),t}get rkt(){return this.gkt(!1)}get pkt(){return this.gkt(!0)}get Sx(){return this.rkt._s()}get kx(){return this.Sz||this.mkt}get mkt(){return this.TL.kx}get Y4(){return this.TL.Y4}get nq(){}get wkt(){var t,i;return null!=(i=null==(t=this.uyt)?void 0:t.Idt.Km)?i:Eh.mV}get nt(){return this.Gl}get rt(){return this.$L}get Rx(){var t;return yB(this.TL)&&(this.TL.Rx||(null==(t=this.ykt())?void 0:t.Mi))||0}get Bx(){var t;return yB(this.TL)&&(this.TL.Bx||(null==(t=this.ykt())?void 0:t.Ti))||0}get Mx(){return this.TL.Mx}set Mx(t){this.TL.Mx=ur(t,0,1)}get Fx(){return this.rq}get Vx(){return!1}set Vx(t){}get hq(){return this.oq}Akt(t){t.wn(XG,this.Rs),t.wn(d.ly,this.bkt),t.wn(d.Sw,this.Skt),t.wn(Mc.ma,this.Tkt),t.wn(d.Ew,this.kkt),t.wn(d.Yw,this.Ekt),t.wn("fmt",this.Pkt),t.wn("qpt",this.Pkt)}xkt(t){t.mn(XG,this.Rs),t.mn(d.ly,this.bkt),t.mn(d.Sw,this.Skt),t.mn(Mc.ma,this.Tkt),t.mn(d.Ew,this.kkt),t.mn(d.Yw,this.Ekt),t.mn("fmt",this.Pkt),t.mn("qpt",this.Pkt)}Ikt(t){t.wn(d.Qw,this.Rs)}Rkt(t){t.mn(d.Qw,this.Rs)}ykt(){if(!this.qTt)return;const t=Jr(this.qTt.gmt,t=>t.Lot===Ci.Bk);return t?t.XI:void 0}gkt(t){var i;const e=null==(i=this.uyt)?void 0:i.Idt;if(!e)return ve.iL();const s=e.hSt;let n=t?e.Abt:e.Syt;if(void 0===s||void 0===n)return ve.iL();if(!t){const t=this.lkt;t.V>0&&t.An(t.V-1)>n&&(n=_.min(t.An(t.V-1),e.Abt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),ve.tL(s,n).CM()}async Un(t,i){let e,s;ii(i);const n=this.uyt.Idt;try{e=n.oSt,s=n.rSt}catch(t){throw new m("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!e)throw new m("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new m("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.Ckt(t.textTracks),this.k7();const r=this.klt(e),h=mc(e,r,void 0,void 0,this.Ypt),o=this.zTt(e,h,e,h,!0);h.forEach(t=>t.Rt=!0);const a=this.GTt(h,o);await this.Lp(a),this.YTt=a,ii(i);const u=await this.NTt(e,r,h,o);ii(i),this.Dkt(u),this.R7(),ii(i),await u.$ot(),ii(i),!this.Bkt&&s>0&&this.My(s,!0,ac.MSt),this.Sz||(this.QTt(),this.Nkt())}QTt(){this.OTt.Zg(),this.OTt=new at,this.HTt=$e(this.Mkt(this.HTt,this.UTt,this.OTt.Yg),this.OTt).catch(this.mmt)}Lkt(){this.OTt.Zg()}async Mkt(t,i,e){for(await Promise.all([t,i]),ii(e);;){var s;const t=null==(s=this.qTt)?void 0:s.Mc;if(!t){0;break}if(!await this.Okt(t,e)){0;break}}}async Okt(t,i){var e;ii(i);const s=this.qTt;for(0;this.uyt.Idt.Km===Eh.wV&&void 0===(null==(e=this.wbt(t))?void 0:e.ryt);){try{await Nc(this.Fkt.ASt,i)}catch(t){if(sa(t),this.Ukt())return!0;throw t}await this.Vkt()}for(ii(i),await this.Vkt(),ii(i);!s.Jpt();)await s.ww(gH.Mlt,i),await this.Vkt();ii(i),await this.Vkt(),ii(i);const n=this.wbt(t);return n?(this.Hkt(n)?await this.Wkt(n,i):await this.qkt(n,i),!0):(this.C3(),!1)}Ukt(){const t=this.QW;return it(t)&&t.An>this.MP}Hkt(t){var i,e,s,n,r;const h=null!=(r=null==(i=this.Ac)?void 0:i.seamlessSwitchStrategy)?r:Oh.OL;if(h===Oh.FL)return!0;if(h===Oh.UL)return!1;const o=this.qTt,a=null==o?void 0:o.Mc,u=null==o?void 0:o.gmt,c=mc(t,this.klt(t),a,u,this.Ypt),d=this.zTt(t,c,a,u,!1);if(h===Oh.CLEAR_ONLY&&((null==(e=this.qTt)?void 0:e.Tpt)||d)||h===Oh.SAME_DRM_ONLY&&!((null==(s=this.qTt)?void 0:s.Tpt)&&d||!(null==(n=this.qTt)?void 0:n.Tpt)&&!d))return!1;const l=this.GTt(c,d);return this.bTt(l)}zkt(){return!0}Gkt(t){const i=this.Xkt();for(const e of i)e!==t&&(e.Xk=xh.Nh)}KTt(){if(void 0!==this.jkt){if(this.jkt.tR){const t=Jr(this.ht.II,t=>t.Rt);void 0!==t&&this.jkt.bs===t.bs||(this.jkt.Xk=xh.Nh)}}else this.Qkt()}Qkt(){if(this.Xkt().length)return;const t=Jr(this.ht.II,t=>t.Rt);if(void 0===t)return;const i=this.nt.II.filter(t=>t.tR);for(const e of i)if(e.bs===t.bs)return e.Xk=xh.Kn,void(this.jkt=e)}Xkt(){return this.nt.II.filter(t=>t.Xk===xh.Kn&&(t.Lt===Ao.FU||t.Lt===Ao.OU))}Kkt(t){if(t&&this.jkt){const i=function(t,i){if(""===t.bs)return;return i.filter(i=>i.bs===t.bs)[0]}(this.jkt,t.nt.II);i&&(i.Xk=xh.Kn)}}async Wkt(t,i){var e,s;const n=this.qTt;let r=this.ekt;const h=this.YTt;try{ii(i);const e=n.Mc,s=n.gmt,h=this.klt(t);JG(n.kmt,h);const o=mc(t,h,e,s,this.Ypt),a=this.zTt(t,o,e,s,!1);o.forEach(t=>t.Rt=!0);const u=this.GTt(o,a);for(0,await n.Jot(),this.A3(),ii(i),r&&r.Mc===t?(this.bTt(u)&&await this.kTt(u),this.YTt=u):(r&&await r.kn(!0),this.bTt(u)&&await this.kTt(u),this.YTt=u,r=await this.NTt(t,h,o,a),this.ekt=r,this.Ikt(r),this.Ykt.BI=r.nt,r.iat(n)),await r.$ot(),ii(i);this.ZTt<t.Tn;)await this.TL.ww(d._y,i);ii(i),this.Dkt(r)}catch(t){throw D(t)&&(r&&await r.Jot(),h&&this.YTt!==h&&(this.bTt(h)&&await this.kTt(h),this.YTt=h)),t}(null==(s=this.Ac)||null==(e=s.dash)?void 0:e.forceSeekToSynchronize)&&await this.Jkt(t,i)}async Jkt(t,i){const e=Date.now()/1e3;if(void 0===this.Zkt)this.Zkt=e;else if(e-this.Zkt>900){this.Zkt=e,this.JTt();const s=_.max(this.ZTt,t.Tn);try{await this.$Tt(s,!1,!0,i)}finally{this.tkt()}}}async qkt(t,i){for(ii(i),await this.qTt.Jot(),this.A3(),await this.RTt(t.Tn),ii(i),this.C3();!this.TL.UP&&this.ZTt<t.Tn;)await this.TL.ww([d._y,d.Bw],i);ii(i);const e=this.qTt.Mc,s=this.qTt.gmt,n=this.klt(t);JG(this.qTt.kmt,n);const r=mc(t,n,e,s,this.Ypt),h=this.zTt(t,r,e,s,!0);r.forEach(t=>t.Rt=!0);const o=this.GTt(r,h);this.qTt&&(this.$kt.mn(Te.pa,this.tEt),await this.qTt.kn(),this.$kt.wn(Te.pa,this.tEt),this.qTt=void 0),this.ekt&&(await this.ekt.kn(),this.ekt=void 0),this.JTt(),this.k7();const a=_.max(this.ZTt,t.Tn);await this.PTt(),await this.Lp(o),this.YTt=o;const u=await this.NTt(t,n,r,h);this.Dkt(u);try{const t={stack:[],error:void 0,hasError:!1};try{const e=this.$Tt(a,!1,!0,i);Wr(e),await u.$ot();const s=Be(t,at.ep([i]),!1);await Promise.race([e,u.ww([gH.Mlt],s.Yg)])}catch(i){t.error=i,t.hasError=!0}finally{Cs(t)}}finally{this.R7(),this.tkt()}}async Vkt(){const t=this.ekt;t&&t.Mc.Sot&&(await t.kn(!0),this.ekt=void 0)}static iEt(t,i){const e=[],s=[];let n=!i.some(t=>t.Plt.some(t=>"main"===t.zE));for(const t of i){if(-1!==e.indexOf(t))continue;const r=KG(t.Wdt.concat(t.Plt),n);n=!1;const h=t.rat.map(t=>t.kot),o=new cH(t,h,r),a=YG(t,i);for(const t of a)o.slt(t),e.push(t);s.push(o)}return new iG(t,s)}klt(i){const e=[],s=[];for(const t of i.Xpt)RT(t.Km)&&(0===t.rat.length?this.So(new _H("No supported representation found in the AdaptationSet with mimetype : "+t.Km)):t.Km===Ci.Dk?e.push(...t.Ilt):s.push(...t.Ilt));const n=[];return e.length>0&&n.push(t.iEt(Ci.Dk,e)),s.length>0&&n.push(t.iEt(Ci.Bk,s)),n}GTt(t,i){var e,s,n,r,h,o,a,u;const c=t.map(t=>{var i;return Br.Yct(null!=(i=t.ilt)?i:t.rat,MT(t.Lot,this.Ypt))}).map(t=>({qT:t.qT})),d=null==(s=this.Ac)||null==(e=s.dash)?void 0:e.desiredTimescale;var l;const f=(null==(n=this.Ac)?void 0:n.seamlessSwitchStrategy)!==Oh.UL&&(null==(r=this.Ac)?void 0:r.seamlessSwitchStrategy)!==Oh.CLEAR_ONLY&&(null==(h=this.Ac)?void 0:h.seamlessSwitchStrategy)!==Oh.SAME_DRM_ONLY&&(null!=(l=null==(a=this.Ac)||null==(o=a.dash)?void 0:o.needsTimescaleShifting)?l:zd.Zs.kp),v=null==(u=this.Ac)?void 0:u.useManagedMediaSource;return{Km:Zr.wV,L4:c,aq:CG(i),T8:null==i?void 0:i.T8,kp:f,x3:d,X4:v}}static eEt(t,i){if(!t.length)return;let e;for(const s of t){const t=0===s.hlt.length;e=kG(e,IG(s.Nut,i,t))}return(null==i?void 0:i.preferredKeySystems)&&e&&(e.kpt=NG(e.kpt,i.preferredKeySystems)),e}zTt(i,e,s,n,r){var h,o;const a=this.Ac.contentProtection;let u=t.eEt(e,a);if(void 0!==u)return u;var c;const d=null!=(c=null==(h=this.Ac)?void 0:h.seamlessSwitchStrategy)?c:Oh.OL;if(d===Oh.UL||d===Oh.CLEAR_ONLY||d===Oh.SAME_DRM_ONLY)return;const l=null==(o=this.qTt)?void 0:o.Tpt;if(!r&&void 0!==l){const t=!l.T8;if(d===Oh.OL&&t&&!this.zkt())return;return l}const f=!r&&d===Oh.OL;return u=this.sEt(i,a,s,n,f),void 0!==u?(u.T8=!0,u):void 0}sEt(i,e,s,n,r){let h=i,o=!1;for(;;){if(h=o?this.ybt(h):this.wbt(h),void 0===h){if(o)return;o=!0,h=i;continue}const a=mc(h,this.klt(h),s,n,this.Ypt),u=t.eEt(a,e);if(r){const t=this.GTt(a,u);if(!this.bTt(t))return}if(void 0!==u)return u}}Ckt(t){for(const i of t)i.src&&this.pq.eV(i);Ds(this.pq.Z)}zx(){var t;const i=this.hx;this.ckt=!0,i||(this.X8||(this.nEt(new dt),this.rEt()),(null==(t=this.jW)?void 0:t.sL)&&this.jW.Xx(),this.hEt())}Gx(){this.oEt||(this.oEt=new pa),this.aEt();const t=this.oEt.Qy;return Wr(t),t}aEt(){if(this.ckt=!1,this.n7=!0,this.uEt=!1,this.vkt(),this.UP){const t=this.rkt;t.V>0&&this.My(t.Tn(0))}this.X8||this.h7().then(this.cEt,this.nEt),this.MTt(),this.hEt()}get dkt(){return this.TL.hx}h7(){return this.TL.Gx()}rEt(){this.TL.zx()}k7(){this.X8||(this.ckt=this.hx,this.X8=!0,this.rEt())}R7(){this.X8&&(this.X8=!1,this.ckt||this.h7().then(this.cEt,this.nEt),this.MTt(),this.hEt())}hEt(){const t=this.NV,i=this.hx;t!==i&&(this.NV=i,i?this.So(new hl(this.MP)):this.So(new Tc(this.MP)))}My(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=ac.NSt),this.Bkt=!0,this.OTt.Zg(),this.m7.Zg(),this.Sz=!0,this.q8=t,this.uEt=this.uEt&&this.z8(),this.fkt(this.lkt),this.dEt(new F(this.MP)),this.m7=new at,this.w7=$e(this.y7(t,this.HTt,this.w7,this.UTt,this.m7.Yg,i,e),this.m7).catch(this.mmt),this.w7}lEt(){this.m7.Zg()}async y7(t,i,e,s,n,r,h,o){var a;void 0===r&&(r=!1),void 0===h&&(h=ac.NSt),void 0===o&&(o=!1),null==(a=this.jW)||a.Xx();try{var u,c;0,await Promise.all([i,e,s]),ii(n),await Nc(this.WTt.Qy,n);const a=this.rkt.DM(t);this.q8=a;const d=o||(null==(c=this.Ac)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.MP,l=this.fEt(a),f=this.qTt;if(d||!f||!f.Sx.Cr(a)&&h!==ac.MSt&&f.Mc!==l){if(l){let t=this.ekt;if(this.k7(),f&&await f.Jot(),t&&t.Mc===l&&!d){const i=this.GTt(t.pmt,t.Tpt);this.A3(),this.bTt(i)&&await this.kTt(i),this.YTt=i}else{t&&await t.kn(!0);const i=this.klt(l);f&&JG(f.kmt,i);const e=null==f?void 0:f.Mc,s=null==f?void 0:f.gmt,n=mc(l,i,e,s,this.Ypt);let r=this.zTt(l,n,e,s,!1);n.forEach(t=>t.Rt=!0);let h=this.GTt(n,r);this.Hkt(l)&&!d?(this.A3(),this.bTt(h)&&await this.kTt(h)):(r=this.zTt(l,n,e,s,!0),h=this.GTt(n,r),f&&(this.$kt.mn(Te.pa,this.tEt),await f.kn(),this.$kt.wn(Te.pa,this.tEt),this.qTt=void 0),await this.PTt(),await this.Lp(h)),this.YTt=h,t=await this.NTt(l,i,n,r),this.ekt=t,this.Ykt.BI=t.nt,this.Ikt(t),t.iat(this.qTt)}await t.$ot(Tu.Lht),this.Dkt(t)}}else{0;const t=this.ekt;if(t&&!t.nmt){await t.Jot(),this.A3();const i=this.GTt(f.pmt,f.Tpt);this.bTt(i)&&await this.kTt(i),this.YTt=i}}0;const v=this.$Tt(a,r,!1,n);Wr(v),this.q8=void 0,await this.qTt.$ot(Tu.Lht),ii(n),this.QTt(),await v,ii(n),this.R7(),this.Sz=!1,this.vEt(new Es(this.MP)),this.Nkt()}catch(t){if(D(t))return void 0;0}}Nkt(){if(this.hx||this.kx||void 0===this.BL)return;const t=this.MP;var i,e;this.MP+this.BL-this.Fx.Cd.maximumOffset<t?null==(i=this.jW)||i.Tn():null==(e=this.jW)||e.Xx()}async $Tt(t,i,e,s){let n,r,h=!0,o=t;for(;;){const a={stack:[],error:void 0,hasError:!1};try{const u=this.pkt;if(u.V>0){const i=u.DM(t);o!==i&&(u.Cr(o)&&this.uyt.Idt.Km===Eh.wV||(o=i,h=!0))}if(h)h=!1,null==r||r.Zg(),r=new at,r.$g(s),n=$e(this._Et(o,i,e,r.Yg),r),Wr(n);else if(!this.mkt&&!this.Y4)break;const c=Be(a,at.ep([s]),!1);await Promise.race([n,this.ww([d.iy,d.Rw],c.Yg),this.uyt.Idt.ww(Ls.yot,c.Yg)])}catch(t){a.error=t,a.hasError=!0}finally{Cs(a)}}}async _Et(t,i,e,s){for(this.TL.My(t,i,e);this.mkt||this.Y4;)await this.TL.ww([d.Zw,d.Vw],s)}JTt(){void 0===this.skt&&(this.skt=this.ZTt,this.TL.mn(d.$w,this.dEt),this.TL.mn(d.Zw,this.vEt))}tkt(){if(void 0===this.skt)return;const t=this.ZTt;this.skt=void 0,this.TL.wn(d.$w,this.dEt),this.TL.wn(d.Zw,this.vEt),this.ZTt!==t&&this.Nc()}gEt(t){this.Ho=this.Ho.OM(t)}fEt(t){const i=this.uyt.Idt,e=i.smt.filter(t=>t.ct>=.2);if(0===e.length)return;const s=e[0];if(t<=s.Tn)return s;for(const i of e)if(i.An>t)return i;return i.Km!==Eh.wV?e[e.length-1]:void 0}ybt(t){let i=t.Smt;for(;i&&i.ct<.2;)i=i.Smt;return i}wbt(t){let i=t.Tmt;for(;i&&i.ct<.2;)i=i.Tmt;return i}async Ta(t,i,e){const s={stack:[],error:void 0,hasError:!1};try{var n;if(this.lq.IW(t.contentProtection),this.pEt(),this.Ac&&!nk(this.Ac)&&await this.hr(),!t||nk(t))return;const h=Be(s,at.ep([e]),!1);this.rV=at.ep([h.Yg]),this.Ac=t,this.mEt=i,this.Ypt=t.abr,this.Npt=t.ignoreEmbeddedTextTrackTypes;const o=pG(new lG(this.nV,Boolean(this.Ac.useCredentials),this._dt),this.eut);var r;if(this.nSt(!0),this.Fkt=new $z({iR:zd.Dh(this.Ac.src),cSt:null!=(r=null==(n=this.Ac.latencyConfiguration)?void 0:n.targetOffset)?r:this.Ac.liveOffset,_St:this.Ac.timeServer,zk:this.Ac.useCredentials},this.wEt(this.Ypt),this.nV,o,this.Ac.dash),this.uyt=this.Fkt.Br,this.uyt.Idt.wn(d.Ww,this.yEt),this.uyt.Idt.wn(d.qw,this.AEt),this.uyt.Idt.wn(Cz.xbt,this.bEt),this.uyt.Idt.wn(Ls.yot,this.MTt),await this.SEt.Un(this.uyt.Idt),await this.TEt.Un(this.uyt.Idt),pi(this.Npt,nh.EMSG)||(this.wpt=new qG(this.TL),this.Gl.FW(this.wpt.Z),await this.wpt.Un(this.uyt.Idt)),t.latencyConfiguration){const i=t.latencyConfiguration;this.jW=new GG(this,this.TL,i),this.jW.Rt=!0,this.rq.Ea(this.jW)}this.vkt(),h.zg()}catch(t){s.error=t,s.hasError=!0}finally{Cs(s)}}Px(t,i,e,s){return Promise.resolve()}xx(){return Promise.resolve()}async kEt(){const t=this.uyt.Idt.sx;if(this.nSt(t),t)return this.Pkt(),void this.bq.mn(Do.SM,this.EEt);this.Ukt()?this.bq.wn(Do.SM,this.EEt):await this.PEt()}async PEt(){var t,i;throw await Promise.all([null==(t=this.qTt)?void 0:t.Jot(Tu.Jht),null==(i=this.ekt)?void 0:i.Jot(Tu.Jht)].filter(it)),this.Lkt(),this.lEt(),this.FTt.Zg(),new m("The provided MPEG-DASH manifest could not be loaded")}get sx(){return this.sSt}nSt(t){this.sSt!==t&&(this.sSt=t,this.So(t?new gt:new Fr))}vkt(){this.uyt&&(this.xEt=this.IEt(this.xEt,this.rV.Yg).catch(this.mmt))}async IEt(t,i){t&&(await t,ii(i));try{this.mx===q.OL||this.n7?await this.REt(i):this.mx===q.VU&&await this.CEt(i)}catch(t){throw sa(t),this.qq(new Ga(Vo.MANIFEST_LOAD_ERROR,t.message,t)),t}}async REt(t){await this.CEt(t),this.DEt||(this.DEt=!0,this.WTt.$g(this.Un(this.mEt,t)));try{await this.WTt.Qy}catch(t){sa(t),this.qq(new Ga(Vo.MEDIA_DECODE_ERROR,t.message,t))}}async CEt(t){await Nc(this.Fkt.W,t);const i=this.uyt.Idt;if(void 0===this.jW&&i.Km===Eh.wV){const t=i.Zwt,e=(null==t?void 0:t.Mbt)?(null==t?void 0:t.Mbt)/1e3:i.aSt,s={minimumOffset:(null==t?void 0:t.Dbt)?(null==t?void 0:t.Dbt)/1e3:.5*e,maximumOffset:(null==t?void 0:t.Nbt)?(null==t?void 0:t.Nbt)/1e3:1.5*e,targetOffset:e,forceSeekOffset:2.5*e,minimumPlaybackRate:Ot,maximumPlaybackRate:Jt};this.jW=new GG(this,this.TL,s),this.rq.Ea(this.jW)}}Dkt(i){const e=this.qTt;i!==e&&(this.qTt&&this.xkt(this.qTt),this.ekt&&this.Rkt(this.ekt),e&&this.fkt(this.lkt),this.qTt=i,this.ekt=e,this.Akt(this.qTt),this.ekt&&this.Ikt(this.ekt),this.YL.BI=i.ht,this.$L.BI=i.rt,this.Kkt(i),this.$kt.mn(Te.pa,this.tEt),t.BEt(this.$kt),this.$kt.wn(Te.pa,this.tEt),this.$kt.BI=i.nt,this.Ykt.BI=void 0,this.Qkt())}static BEt(t){for(const i of t.II)i.Xk=xh.Nh}be(){this.TL.be()}we(){this.TL.we()}qq(t){this.JW||(Wr(this.hr()),this.JW=P(t),this.ZW=t,this.So(new Pi(t)))}pEt(){this.JW=void 0,this.ZW=void 0}STt(){const t=this.iq;t&&(t.K3&&(t.K3.MY=this.Rz.GY),t.Q3&&(t.Q3.MY=this.Rz.GY))}TTt(){const t=this.iq;t&&(t.K3&&(t.K3.UY=this.Rz.UY),t.Q3&&(t.Q3.UY=this.Rz.UY))}determineStallJumpTarget(){if(this.qTt)return this.qTt.Jpt()&&this.MP>this.qTt.An-NN&&!this.qTt.emt?this.qTt.An:void 0}async hr(){if(this.NEt)return this.NEt;try{this.NEt=this.MEt(),await this.NEt}finally{this.NEt=void 0}}async MEt(){this.ux=1,this.rV.Zg(),this.lEt(),this.Lkt(),this.FTt.Zg(),this.WTt.Zg(),this.Bkt=!1,this.zx(),this.n7=!1,this.uEt=!1,this.YL.BI=void 0,this.$L.BI=void 0,this.$kt.BI=void 0,this.Ykt.BI=void 0,this.xEt&&(await this.xEt.catch(Ct),this.xEt=void 0),await Promise.all([this.HTt,this.w7,this.UTt,this.WTt.Qy.catch(Ct)]),this.qTt&&(await this.qTt.kn(!0),this.qTt=void 0),this.ekt&&(this.Rkt(this.ekt),await this.ekt.kn(!0),this.ekt=void 0),await this.PTt(),this.YTt=void 0,this.jkt=void 0,this.bq.mn(Do.SM,this.EEt),this.bq.hr(),await this.SEt.hr(),await this.TEt.hr(),void 0!==this.wpt&&(this.Gl.WW(this.wpt.Z),await this.wpt.kn(),this.wpt=void 0),this.uyt&&(this.uyt.Idt.mn(d.Ww,this.yEt),this.uyt.Idt.mn(d.qw,this.AEt),this.uyt.Idt.mn(Cz.xbt,this.bEt),await this.Fkt.kn(),this.uyt=void 0),this._kt=!1,this.LEt=NaN,this.OEt=0,this.FEt=0,this.skt=void 0,this.X8=!1,this.Ho=ve.iL(),this.NV=!0,this.q8=void 0,this.UEt=!1,this.Sz=!1,this.DEt=!1,this.WTt=new pa,this.okt=0,this.akt=0,this.ukt=0,this.Ac=void 0,this.mEt=void 0,this.Npt=[],this.Zkt=void 0,this.rq.hr(),this.jW=void 0,this.xTt={iO:0,eO:0,sO:0},await this.pq.hr(),this.TL.Aq(),this.VEt.hr()}async kn(){this.Vo(),this.pEt(),await this.hr(),this.Vo(),this.YL.kn(),this.$L.kn(),this.$kt.kn(),this.Ykt.kn(),this.Gl.kn(),this.bq.kn(),this.kq.zg(),await this.SEt.kn(),await this.TEt.kn(),this.VEt.kn(),this.TL.mn(d.Rw,this.p9),this.TL.mn(_r.Dw,this.D8),this.TL.mn(d.Bw,this.HEt),this.TL.mn(d.$w,this.dEt),this.TL.mn(d.Zw,this.vEt),this.TL.mn(d.Jw,this.Ekt),this.TL.mn(d._y,this.Nc),this.TL.mn([d.uo,d.jw],this.WEt),this.TL.mn(jG,this.Rs),await this.pq.kn(),this.Gl.kn(),this.Rz.mn("NY",this.qEt),this.Rz.mn("FY",this.zEt),this.TL.mn(Mc.ma,this.GEt),this.TL.mn([d.Pw,d.Ew],this.Rs),this.TL.mn(d.yy,this.Pmt),this.TL.mn(d.LICENSE_REQUEST_GENERATED,this.umt),this.TL.Eq=void 0,this.lq.mn("contentProtectionsTracked",this.XEt),this.TL.N9=void 0}Hx(){return this.TL.Ma}Aa(){return this.TL.mq}get KP(){return!1}jx(){return!1}Qx(){}Kx(){}Yx(){}Jx(){this.LTt(!0)}get BL(){var t;const i=null==(t=this.uyt)?void 0:t.Idt;if(i&&i.Km===Eh.wV&&i.Vwt)return i.xdt().getTime()/1e3-i.Vwt.getTime()/1e3-this.MP}tI(t){const i=this.TL.wq(t);return this.VEt.tt(i),i}constructor(t,i,e,s,n,r,h){var o;super(),this.nV=void 0,this.Rz=void 0,this._dt=void 0,this.eut=void 0,this.TL=void 0,this.kq=void 0,this.bq=void 0,this.qTt=void 0,this.ekt=void 0,this.n7=!1,this.LEt=NaN,this.JW=void 0,this.ZW=void 0,this.X8=!1,this.skt=void 0,this.q8=void 0,this.UEt=!1,this.OEt=0,this.FEt=0,this._kt=!1,this.rV=new at,this.WTt=new pa,this.NEt=void 0,this.DEt=!1,this.uyt=void 0,this.Fkt=void 0,this.sSt=!0,this.ckt=!0,this.oEt=void 0,this.Ho=ve.iL(),this.tq=q.lz,this.xEt=void 0,this.NV=!0,this.Ac=void 0,this.mEt=void 0,this.Ypt=void 0,this.Npt=[],this.Sz=!1,this.rq=void 0,this.OTt=new at,this.HTt=Promise.resolve(),this.m7=new at,this.w7=Promise.resolve(),this.Bkt=!1,this.uEt=!1,this.FTt=new at,this.UTt=Promise.resolve(),this.YTt=void 0,this.jkt=void 0,this.YL=void 0,this.$L=void 0,this.Gl=void 0,this.$kt=void 0,this.Ykt=void 0,this.wpt=void 0,this.SEt=void 0,this.TEt=void 0,this.pq=void 0,this.VEt=void 0,this.okt=0,this.akt=0,this.ukt=0,this.oq=new To,this.Zkt=void 0,this.xTt={iO:0,eO:0,sO:0},this.iq=void 0,this.DTt=void 0,this.lq=void 0,this.jW=void 0,this.Pkt=t=>{var i,e,s;let n;"fmt"===(null==t?void 0:t.type)&&(n=t.hpt),n&&(null==(i=n.Jdt)?void 0:i.Km)===Ci.Dk&&(null==(s=this.bt)||null==(e=s.dash)?void 0:e.forceRecreateMediaSourceOnAudioSwitch)?this.LTt(!0):this.LTt()},this.Pmt=t=>{var i;null==(i=this.qTt)||i.Pmt(t)},this.umt=t=>{var i;null==(i=this.qTt)||i.umt(t)},this.Nc=()=>{this.So(new Si(this.MP,this.CP))},this.D8=t=>{this.So(new eG(this.MP,t.Jm,t.Ey))},this.bkt=t=>{this.okt+=t.rO,this.So(t)},this.Skt=t=>{const i=t.segments.filter(t=>t.cct);t.track===Ci.Dk?this.akt=i.length:t.track===Ci.Bk&&(this.ukt=i.length)},this.p9=()=>{const t=this.ct;S(t)||t===this.LEt||(this.LEt=t,this.So(new Rs(this.LEt)))},this.WEt=()=>{this.MTt(),this.hEt()},this.HEt=t=>{this.uEt||!this.UP||this.kx||(this.uEt=!0,this.So(null!=t?t:new At(this.MP)))},this.AEt=t=>{this.Rs(t),this._kt||(this._kt=!0,this.kq.VV())},this.yEt=()=>{this.uyt.Idt.mn(d.Ww,this.yEt),this.So(new Pt)},this.kkt=t=>{var i;if(t.errorObject.code===Vo.CONTENT_PROTECTION_OUTPUT_RESTRICTED&&(null==(i=this.qTt)?void 0:i.pmt.every(t=>!t.olt)))return;this.qq(t.errorObject),this.So(t)},this.Tkt=t=>{this.qq(t.errorObject)},this.mmt=t=>{D(t)||this.qq(new Ga(Vo.MEDIA_DECODE_ERROR,t.message,t))},this.MTt=()=>{if(!this.hx){if(!this.nkt()){const t=this.uyt.Idt.rSt;return void this.My(t,!0)}if(this.hkt()){const t=this.uyt.Idt.rSt;return void this.My(t,!0)}}},this.dEt=t=>{this.UEt=this.kx,this.So(t)},this.vEt=t=>{const i=this.UEt,e=this.kx;this.UEt=e,i&&!e&&this.So(t),this.HEt()},this.Ekt=()=>{const t=this.Bx,i=this.Rx;this.OEt===t&&this.FEt===i||(this.OEt=t,this.FEt=i,this.So(new ts))},this.tEt=t=>{const i=t.Ht;i.Xk===xh.Kn?(this.Gkt(i),this.jkt=i):i===this.jkt&&i.Xk===xh.Nh&&(this.jkt=void 0,this.Qkt())},this.cEt=()=>{this.X8||this.oEt&&(this.oEt.Xy(),this.oEt=void 0)},this.nEt=t=>{this.X8||this.oEt&&(this.oEt.jy(t),this.oEt=void 0)},this.bEt=()=>{this.kEt().catch(this.mmt)},this.EEt=()=>{this.PEt().catch(this.mmt),this.bq.mn(Do.SM,this.EEt)},this.GEt=t=>{this.qq(Ok(t.lt))},this.qEt=()=>{this.STt()},this.zEt=()=>{this.TTt()},this.XEt=t=>{this.ETt(t.xW)},this.nV=t,this.eut=new zG(n),this.TL=r,this.DTt=h,this.Rz=e,this.Rz.wn("NY",this.qEt),this.Rz.wn("FY",this.zEt),this.rq=s,this._dt=Mo({},i.retryConfiguration,{maxRetries:null!=(o=i.retryConfiguration.maxRetries)?o:1/0}),this.YL=new He,this.$L=new He,this.lq=new ya(t),this.lq.wn("contentProtectionsTracked",this.XEt),this.TL.wn(d.Rw,this.p9),this.TL.wn(_r.Dw,this.D8),this.TL.wn(d.Bw,this.HEt),this.TL.wn(d.$w,this.dEt),this.TL.wn(d.Zw,this.vEt),this.TL.wn(d.Jw,this.Ekt),this.TL.wn(d._y,this.Nc),this.TL.wn([d.uo,d.jw],this.WEt),this.TL.wn(jG,this.Rs),this.TL.wn(Mc.ma,this.GEt),this.TL.Eq=this.lq,this.TL.N9=this,this.TL.wn([d.Pw,d.Ew],this.Rs),this.TL.wn(d.yy,this.Pmt),this.TL.wn(d.LICENSE_REQUEST_GENERATED,this.umt),this.kq=new dx(this,this.TL),this.bq=new bs(this.kq,!0),this.bq.wn(Do.SM,this.MTt),this.bq.wn(K,this.Rs),this.$kt=new sl,this.$kt.wn(Te.pa,this.tEt),this.Ykt=new sl,this.SEt=new AG(this.TL),this.TEt=new MG(this.TL),this.pq=new Kh(this.TL,this.nV),this.VEt=new cc,this.Gl=new Yu([this.$kt,this.SEt.Z,this.TEt.Z,this.pq.Z,this.VEt])}};function KG(t,i){const e=t.filter(t=>"urn:mpeg:dash:role:2011"===t.y8).map(t=>t.zE).filter(it);return i||pi(e,"main")?pi(e,"caption")?"captions":pi(e,"subtitle")?"subtitles":pi(e,"dub")?"translation":"main":pi(e,"sign")?"sign":pi(e,"description")?"descriptions":pi(e,"commentary")?"commentary":"alternative"}function YG(t,i){var e;const s=Jr([...t.iwt,...t.ewt],t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.y8);var n;const r=null!=(n=null==s||null==(e=s.zE)?void 0:e.split(","))?n:[],h=[];for(const t of r){const e=Number(t),s=Jr(i,t=>t.o===e);s&&h.push(s)}return h}function JG(t,i){for(const e of t){const t=Jr(i,t=>t.Km===e.Km);if(!t)continue;const s=e.Z,n=t.Z;for(const t of s){const i=t.YI;if(!i)continue;const e=t.rat.map(t=>t.o),s=Jr(n,t=>{const i=t.rat.map(t=>t.o);return df(e,i)});if(!s)continue;const r=i.map(t=>t.o);s.YI=s.KI.II.filter(t=>pi(r,t.o))}}}r();var bt=class{async HSt(t){return(await this.QEt.jEt(t.map(ia))).shift()}Uct(t,i){const e=fG(t,i);return this.KEt.Hy(e)}async iut(t,i){var e;const s=fG(t,i);return null==(e=await this.YEt.Wy(s))?void 0:e.data}WJ(t){return this.JEt.Wy(t)}constructor(t,i,e,s){this.QEt=void 0,this.KEt=void 0,this.YEt=void 0,this.JEt=void 0,this.QEt=t,this.KEt=i,this.YEt=e,this.JEt=s}};r(),r(),r();var wt=class{ZEt(t){return Promise.resolve(!1)}zSt(t){return Promise.reject(ZG)}$Et(t){return Promise.reject(ZG)}Hy(t){return Promise.resolve(!1)}Wy(t){return Promise.resolve(void 0)}tPt(t,i){return Promise.resolve(void 0)}jEt(t){return Promise.resolve([])}iPt(){return Promise.resolve([])}ePt(t){return Promise.resolve([])}sPt(t,i){return Promise.resolve([])}_S(t){return Promise.reject(ZG)}nPt(t){return Promise.reject(ZG)}rPt(){return Promise.reject(ZG)}},ZG="Storage disabled",$G="Storage disabled";r(),r(),r();var tX=class{get hPt(){return this.Jg.Qy}async ZEt(t){return(this.oPt||await this.hPt).ZEt(t)}async zSt(t,i){return(this.oPt||await this.hPt).zSt(t,i)}async $Et(t,i){return(this.oPt||await this.hPt).$Et(t,i)}async Hy(t){return(this.oPt||await this.hPt).Hy(t)}async Wy(t){return(this.oPt||await this.hPt).Wy(t)}async tPt(t,i){return(this.oPt||await this.hPt).tPt(t,i)}async jEt(t){return(this.oPt||await this.hPt).jEt(t)}async iPt(){return(this.oPt||await this.hPt).iPt()}async ePt(t){return(this.oPt||await this.hPt).ePt(t)}async sPt(t,i){return(this.oPt||await this.hPt).sPt(t,i)}async _S(t){return(this.oPt||await this.hPt)._S(t)}async nPt(t){return(this.oPt||await this.hPt).nPt(t)}async rPt(){return(this.oPt||await this.hPt).rPt()}constructor(t){this.Jg=new pa,this.oPt=void 0,this.Jg.$g(t),this.Jg.Qy.then(t=>{this.oPt=t})}},iX=class{get aPt(){return this.Jg.Qy}async uPt(t){const i=this.cPt||await this.aPt;return await i.uPt(t)}constructor(t){this.Jg=new pa,this.cPt=void 0,this.ect=void 0,this.dPt=void 0,this.lPt=void 0,this.fPt=void 0,this.vPt=void 0,this.Jg.$g(t);const i=this.Jg.Qy;i.then(t=>{this.cPt=t}),this.ect=new tX(i.then(t=>t.ect)),this.dPt=new tX(i.then(t=>t.dPt)),this.lPt=new tX(i.then(t=>t.lPt)),this.fPt=new tX(i.then(t=>t.fPt)),this.vPt=new tX(i.then(t=>t.vPt))}};function Aa(t){return new m("This storage cannot handle persistency type "+t)}r(),r(),r();var cu=function(t){return t._Pt="readonly",t.gPt="readwrite",t}({}),vn=class{ZEt(t){return Promise.resolve("temporary"===t)}zSt(t,i){return void 0===i&&(i="temporary"),"temporary"!==i?Promise.reject(Aa(i)):(this.pPt(t.key),this.EA.push(t),Promise.resolve())}$Et(t,i){if(void 0===i&&(i="temporary"),"temporary"!==i)return Promise.reject(Aa(i));for(const i of t)this.pPt(i.key);for(const i of t)this.EA.push(i);return Promise.resolve()}Hy(t){return Promise.resolve(Boolean(this.mPt(t)))}Wy(t){return Promise.resolve(this.mPt(t))}tPt(t,i){return Promise.resolve(this.wPt(t,i))}jEt(t){const i=t?t.map(t=>this.mPt(t)):this.EA;return Promise.resolve(i.filter(it))}iPt(){return Promise.resolve([...this.EA])}ePt(t){return this.sPt(t,"key")}sPt(t,i){const e=this.EA.filter(e=>e[i]===t);return Promise.resolve(e)}_S(t){return this.pPt(t),Promise.resolve()}nPt(t){for(const i of t)this.pPt(i);return Promise.resolve()}rPt(){return Yo(this.EA),Promise.resolve()}mPt(t){return this.wPt(t,"key")}wPt(t,i){for(const e of this.EA)if(e[i]===t)return e}pPt(t){const i=this.mPt(t);i&&oi(this.EA,i)}constructor(){this.EA=[]}},eX=class t{static Ret(){return Promise.resolve(new t)}uPt(t){return t(this)}constructor(){this.dPt=void 0,this.ect=void 0,this.lPt=void 0,this.fPt=void 0,this.vPt=void 0,this.dPt=new vn,this.ect=new vn,this.lPt=new vn,this.fPt=new vn,this.vPt=new vn}};r(),r();var sX=class{async ZEt(t){for(const i of this.yPt)if(await i.ZEt(t))return!0;return!1}async zSt(t,i){void 0===i&&(i="persistent");for(const e of this.yPt)if(await e.ZEt(i))return e.zSt(t);throw Aa(i)}async $Et(t,i){void 0===i&&(i="persistent");for(const e of this.yPt)if(await e.ZEt(i))return e.$Et(t);throw Aa(i)}async Hy(t){for(const i of this.yPt)if(await i.Hy(t))return!0;return!1}async Wy(t){for(const i of this.yPt){const e=await i.Wy(t);if(e)return e}}async tPt(t,i){for(const e of this.yPt){const s=await e.tPt(t,i);if(s)return s}}async jEt(t){const i=[];for(const e of this.yPt)i.push(...await e.jEt(t));return i}async iPt(){const t=[];for(const i of this.yPt)t.push(...await i.iPt());return t}async ePt(t){const i=[];for(const e of this.yPt)i.push(...await e.ePt(t));return i}async sPt(t,i){const e=[];for(const s of this.yPt)e.push(...await s.sPt(t,i));return e}async _S(t){for(const i of this.yPt)await i._S(t)}async nPt(t){for(const i of this.yPt)await i.nPt(t)}async rPt(){for(const t of this.yPt)await t.rPt()}constructor(t){this.yPt=void 0,this.yPt=t}};function nX(t){return async()=>{const i=await Promise.all(t.map(t=>t()));return rX.Ret(i)}}var rX=class t{static Ret(i){return Promise.resolve(new t(i))}get fPt(){return this.APt}get vPt(){return this.bPt}get lPt(){return this.SPt}get dPt(){return this.TPt}get ect(){return this.kPt}uPt(i){if(0===this.EPt.length)return i(this);const e=[];let s=0;const n=r=>(e.push(r),s++,s<this.EPt.length?this.EPt[s].uPt(n):i(new t(e)));return this.EPt[s].uPt(n)}constructor(t){this.EPt=void 0,this.APt=void 0,this.bPt=void 0,this.SPt=void 0,this.TPt=void 0,this.kPt=void 0,this.EPt=t,this.APt=new sX(t.map(t=>t.fPt)),this.bPt=new sX(t.map(t=>t.vPt)),this.SPt=new sX(t.map(t=>t.lPt)),this.TPt=new sX(t.map(t=>t.dPt)),this.kPt=new sX(t.map(t=>t.ect))}},Rc=class t{static Ba(i){t.RW.Ba(i)}static get Ng(){var i,e;return null!=(e=(i=t).lAt)?e:i.lAt=t.RW.Ret()}};Rc.RW=new class{Ret(){return new iX(this.PPt())}async PPt(){this.xPt&&(await Promise.resolve(),this.xPt=!1);for(const t of this.IPt)try{return await nX([eX.Ret,t])()}catch(t){}return await nX([eX.Ret,this.RPt])()}Ba(t){if(!this.xPt)throw new m("Registration overdue");this.IPt.push(t)}constructor(t){this.RPt=void 0,this.IPt=[],this.xPt=!0,this.RPt=t}}(class t{static Ret(){return Promise.resolve(new t)}uPt(t){return Promise.reject($G)}constructor(){this.dPt=void 0,this.ect=void 0,this.lPt=void 0,this.fPt=void 0,this.vPt=void 0,this.dPt=new wt,this.ect=new wt,this.lPt=new wt,this.fPt=new wt,this.vPt=new wt}}.Ret),Rc.lAt=void 0;var hX=class extends QG{Wx(){if(PU(this.TL))return this.TL.Wx()}async kn(){var t;await super.kn(),null==(t=this.CPt)||t.kn()}Hkt(t){var i,e;return((null!=(e=null==(i=this.Ac)?void 0:i.seamlessSwitchStrategy)?e:Oh.OL)!==Oh.OL||!Qt.gg)&&super.Hkt(t)}zkt(){return!(Qt.w_&&Qt.A_<3)&&super.zkt()}wEt(t){return xU(t)}constructor(t,i,e,s,n,r){super(t,i,e,s,new bt(Rc.Ng.lPt,Rc.Ng.dPt,Rc.Ng.ect,Rc.Ng.vPt),n,new IU(r)),this.vrt=void 0,this.CPt=void 0,this.vrt=r,Qt.X_&&(this.CPt=new HU(this))}},oX=class extends hX{async kn(){await super.kn(),await this.xq.Pq(this.TL)}constructor(t,i,e,s,n,r,h){const o=new Ss(n);super(t,i,e,s,o.Gq(r),h),this.xq=void 0,this.xq=o}};r(),r(),r(),r(),r();var aX=class extends NU{get DPt(){return this.pE.DPt}RP(){return super.RP().Ny(this.DPt)}krt(){return super.krt().Ny(this.DPt)}H2(t,i,e){const s=this.DPt;return super.H2(t,{xet:i.xet-s,ct:i.ct,bU:i.bU-s},e)}r3(t,i){const e=this.DPt;return super.r3(_.max(0,t-e),_.max(0,i-e))}_S(t,i,e){const s=this.DPt;return super._S(_.max(0,t-s),_.max(0,i-s),e)}F3(t,i){const e=this.DPt;super.F3(_.max(0,t-e),_.max(0,i-e))}U3(t,i){const e=this.DPt;super.U3(_.max(0,t-e),_.max(0,i-e))}constructor(t,i){super(i),this.pE=void 0,this.pE=t}},uX=class extends Wo{get DPt(){return this.pE.DPt}Nd(){return super.Nd()+this.DPt}C4(t){super.C4(t-this.DPt)}Tx(){return super.Tx().Ny(this.DPt)}M4(t,i,e,s){const n=this.DPt;super.M4(t-n,i-n,e,s)}mrt(t){return new aX(this,t)}constructor(t,i){super(i),this.pE=void 0,this.grt(i),this.pE=t}};r(),r();var cX=class{get nt(){return this.Gl}tI(t,i,e,s,n,r,h,o){const a=new gM(t,i,e,s,n,r,h,void 0,o);return this.Gl.tt(a),a}wq(t){const i=new RL(t.Lt,t.Th,t.bs);return this.Gl.tt(i),i}iV(t){this.Gl.it(t)}hr(){this.Gl.hr()}kn(){for(const t of this.Gl.II.slice())t.kn();this.Gl.kn()}constructor(){this.Gl=new cc}},dX=class extends cX{tI(t,i,e,s,n,r,h,o){const a=super.tI(t,i,e,s,n,r,h,o);return this.N7.tt(a),a}iV(t){super.iV(t),this.N7.it(t),t.kn()}wq(t){const i=super.wq(t);return this.N7.tt(i),i}hr(){super.hr(),this.N7.hr()}kn(){super.kn(),this.N7.kn()}constructor(t,i){super(),this.N7=void 0,this.N7=new lL(t,i)}},lX=class extends $u{get DPt(){return this.BPt}set DPt(t){this.BPt=t}RP(){return super.RP().Ny(this.BPt)}DP(){return _X(super.DP(),this.BPt)}LP(){return super.LP()+this.BPt}Nd(){return super.Nd()+this.BPt}gx(){return super.gx().Ny(this.BPt)}Tx(){return super.Tx().Ny(this.BPt)}My(t,i,e){const s=_.max(0,t-this.BPt);super.My(s,i,e)}KW(t){super.KW(_X(t,-this.BPt))}Ix(){return this.Gl}tI(t,i,e,s,n,r,h,o){return this.JU.tI(t,i,e,s,n,r,h,o)}wq(t){return this.JU.wq(t)}iV(t){this.JU.iV(t)}Aq(){this.JU.hr(),super.Aq()}vq(){return!1}gq(t,i,e,s,n){throw new m("Not supported")}zg(){return this.net.kn(),this.eet.kn(),this.JU.kn(),this.Gl.kn(),super.zg()}Xrt(t){return new uX(this,t)}Grt(t){return new Jo(t)}Zx(t){let i;switch(t.type){case d.uo:i=new Tc(t.currentTime+this.BPt);break;case d.jw:i=new hl(t.currentTime+this.BPt);break;case Do.TM:i=new ce(t.currentTime+this.BPt);break;case d._y:i=new Si(t.currentTime+this.BPt,_X(t.currentProgramDateTime,this.BPt));break;case d.Qw:i=new H(t.currentTime+this.BPt);break;case d.$w:i=new F(t.currentTime+this.BPt);break;case d.Zw:i=new Es(t.currentTime+this.BPt);break;case d.Fw:i=new qN(t.currentTime+this.BPt);break;case d.Vw:i=new xL(t.currentTime+this.BPt);break;case d.Bw:i=new At(t.currentTime+this.BPt);break;case d.Kw:i=new aa(t.currentTime+this.BPt,t.playbackRate);break;case d.gy:i=new Ze(t.currentTime+this.BPt,t.volume);break;case d.Rw:i=new Rs(t.duration+this.BPt);break;case Do.wI:i=new ou(t.currentTime+this.BPt,t.readyState);break;default:i=t}super.Zx(i)}we(){super.we(),this.eet.we()}be(){super.be(),this.eet.be()}constructor(t){super(t),this.BPt=0,this.Gl=void 0,this.JU=void 0,this.eet=void 0,this.net=void 0,this.JU=new dX(this,new ec),this.Gl=new Yu([this.JU.nt,super.Ix()]),this.eet=new XL,this.eet.B9(this.$W.parentElement),this.net=new vF(this.eet.xe,this.Wu,this.Gl,this.Ql,this.Ma,this.mq)}},fX=class extends(CU(lX)){constructor(t){super(t)}},vX=class extends(Sl(lX)){constructor(t){super(t)}};function _X(t,i){return t?new Date(t.getTime()+1e3*i):void 0}var gX=class extends RU{Gq(t){return t===Ci.Bk?new vX(super.Gq(t)):t===Ci.Dk?new fX(super.Gq(t)):void 0}async Pq(t){const i=t;await i.zg(),await super.Pq(i.Nrt)}},pX=class extends hX{async Lp(t){await super.Lp(t),void 0===this.NPt&&(this.NPt=this.MPt(),this.TL.DPt=this.NPt)}MPt(){if(this.ct===1/0){const t=this.rkt;if(t.V>0)return _.max(0,t.Tn(0)-300)}return 0}y7(t,i,e,s,n,r,h,o){return void 0===r&&(r=!1),void 0===h&&(h=ac.NSt),void 0===o&&(o=!1),o||(o=this.ct===1/0&&Qt.w_&&Qt.A_<3&&t<=this.MP),super.y7(t,i,e,s,n,r,h,o)}async hr(){await super.hr(),this.NPt=void 0,this.TL.DPt=0}async kn(){await super.kn(),await this.TL.zg(),await this.xq.Pq(this.TL)}static LS(t){var i;return(!t||"google-dai"!==(null==t||null==(i=t.ssai)?void 0:i.integration))&&(Qt.w_&&Qt.A_<4)}constructor(t,i,e,s,n,r,h){const o=new gX(new Ss(n));super(t,i,e,s,o.Gq(r),h),this.xq=void 0,this.NPt=void 0,this.xq=o,this.NPt=void 0}};r(),r(),r(),r(),r();var mX=class extends OU{get Nrt(){return this.TL}get Rx(){return this.TL.Rx}get Bx(){return this.TL.Bx}constructor(t){super(t)}};r(),r(),r();var wX=class extends NU{brt(){return this.LPt?this.jY:super.brt()}Srt(t){this.LPt?this.jY=t:super.Srt(t)}RP(){return this.LPt?this.OPt:super.RP()}CS(){return this.LPt?this.YS:super.CS()}krt(){return this.LPt?this.FPt:super.krt()}Ert(){return this.LPt?this.zY:super.Ert()}Prt(t){this.LPt?this.zY=t:super.Prt(t)}H2(t,i,e){return this.W2(e=>this.UPt(t,i,e),e)}UPt(t,i,e){return super.H2(t,i,e)}V3(){return this.W2(()=>this.VPt())}VPt(){return super.V3()}z2(t,i,e){return this.W2(e=>this.HPt(t,i,e),e)}HPt(t,i,e){return super.z2(t,i,e)}F3(t,i){this.LPt?(this.FPt=this.FPt.OM(new ve([t,i])),this.WPt.push({Km:"Yut",EO:t,PO:i})):this.qPt(t,i)}qPt(t,i){super.F3(t,i)}r3(t,i){return this.W2(()=>this.zPt(t,i))}zPt(t,i){return super.r3(t,i)}U3(t,i){this.LPt?(this.FPt=this.FPt.UM(new ve([t,i])),this.WPt.push({Km:"_S",EO:t,PO:i})):this.GPt(t,i)}GPt(t,i){super.U3(t,i)}_S(t,i,e){return this.W2(e=>this.XPt(t,i,e),e)}XPt(t,i,e){return super._S(t,i,e)}EZ(t){return this.W2(()=>this.jPt(t))}jPt(t){return super.EZ(t)}async W2(t,i){for(this.v3();this.LPt;)await Nc(this.LPt.Qy,i),this.v3();ii(i);try{this.b3=t(i),await this.b3}finally{this.b3=void 0}}v3(){if(this.b3)throw new m("Internal error")}async QPt(){if(this.LPt)throw new g("Already locked");this.LPt=new pa,this.KPt(),this.b3&&(await this.b3.catch(Ct),this.KPt())}YPt(){const t=this.LPt;void 0!==t&&(t.Xy(),this.LPt=void 0,this.JPt())}KPt(){this.YS=super.CS(),this.jY=super.brt(),this.zY=super.Ert(),this.OPt=super.RP(),this.FPt=super.krt(),this.ZPt=!1}JPt(){this.v3(),super.Srt(this.jY),super.Prt(this.zY);const t=this.WPt.slice();Yo(this.WPt);for(const i of t)"Yut"===i.Km?this.qPt(i.EO,i.PO):this.GPt(i.EO,i.PO);this.OPt.GM(super.RP())||this.So(new wp(Zs.lZ))}zg(){var t;null==(t=this.LPt)||t.Zg(),this.LPt=void 0,super.zg()}constructor(t){super(t),this.b3=void 0,this.LPt=void 0,this.jY=0,this.OPt=ve.iL(),this.YS=void 0,this.FPt=ve.iL(),this.WPt=[],this.ZPt=!1,this.zY=0,this.YS=t.Cd}},yX=class extends wX{RP(){var t,i;return super.RP().OM(null!=(i=null==(t=this.$Pt)?void 0:t.IP)?i:ve.iL())}krt(){var t,i;return super.krt().OM(null!=(i=null==(t=this.$Pt)?void 0:t.M3)?i:ve.iL())}Srt(t){super.Srt(t),this.$Pt&&(this.$Pt.UY=t)}Prt(t){super.Prt(t),this.$Pt&&(this.$Pt.MY=t)}qPt(t,i){super.qPt(t,i),this.$Pt&&this.$Pt.F3(t,i)}GPt(t,i){super.GPt(t,i),this.$Pt&&this.$Pt.U3(t,i)}async XPt(t,i,e){ii(e);const s=[];s.push(super.XPt(t,i,e)),this.$Pt&&s.push(this.$Pt._S(t,i,e)),await Promise.all(s)}TZ(t){return!!super.TZ(t)||this.pE.txt(t)}jPt(t){return super.TZ(t)?super.jPt(t):this.pE.ixt(t)}sxt(t){var i,e;null==(i=this.$Pt)||i.mn(bo,this.xrt),this.$Pt=t,null==(e=this.$Pt)||e.wn(bo,this.xrt)}constructor(t,i){super(i),this.pE=void 0,this.$Pt=void 0,this.pE=t}},AX=class extends Wo{TZ(t){return!!BL(this,t)&&(!!super.TZ(t)||(!(!this.nxt||!this.nxt.TZ(t))||this.pE.rxt(t)))}async EZ(t){return super.TZ(t)?await super.EZ(t):this.nxt&&this.nxt.TZ(t)?(this.hxt(),await this.EZ(t)):(await this.pE.oxt(t),await this.EZ(t))}txt(t){return this.TZ(this.axt(t))}ixt(t){return this.EZ(this.axt(t))}axt(t){const i=this.Cd,e=i.L4.map(i=>I(t.qT)&&I(i.qT)||tt(t.qT)&&tt(i.qT)?t:i);return Mo({},i,{L4:e})}M4(t,i,e,s){super.M4(t,i,e,s),this.nxt&&this.nxt.M4(t,i,e,s)}uxt(){return!this.cxt&&this.dxt}Nd(){return void 0!==this.lxt?this.lxt:this.uxt()?this.WA:super.Nd()}C4(t){this.WA=t,this.lxt=void 0,this.uxt()||super.C4(t)}_rt(){return!this.uxt()&&super._rt()}C3(){this.lxt=_.max(bX(this.iq.Q3),bX(this.iq.K3)),this.uxt()||super.C3()}A3(){this.lxt=void 0,this.uxt()||super.A3()}mrt(t){return new yX(this,t)}fxt(){this.cxt=!this.cxt}hxt(){const t=this.iq,i=this.nxt;i&&(this.cxt=!this.cxt,this.grt(i),this.vxt(t),this.uxt()&&this._xt())}vxt(t){var i,e;this.nxt=t,null==(i=this.P4)||i.sxt(null==t?void 0:t.Q3),null==(e=this.x4)||e.sxt(null==t?void 0:t.K3)}gxt(t){const i=this.iq,e=this.nxt;if(!e)return;const s=this.cxt,n=s?i:e,r=(s?e:i).IP.JM(t);if(!r)return;const h=jU(n.IP,this.krt()).JM(r.An(0),yt);return!h||r.An(0)+yt>=h.An(0)?void 0:_.max(r.An(0),h.Tn(0))}pxt(t,i){if(this.dxt)return Promise.resolve();const e=this.cxt?this.nxt:this.iq;return e?(this.dxt=!0,this.mxt(i=>{if(ii(i),this.dxt)return async function(t,i,e){ii(e);const s=[];t.Q3&&s.push(DN(t.Q3,i,e));t.K3&&s.push(DN(t.K3,i,e));await Promise.all(s),t.C3()}(e,t,i)},i)):Promise.resolve()}_xt(){if(!this.dxt)return;const t=this.cxt?this.nxt:this.iq;if(!t)return;var i;this.dxt=!1;const e=null!=(i=this.lxt)?i:this.WA;t.ct<e&&t.C4(e),t.A3()}wxt(t){var i;const e=null!=(i=this.lxt)?i:this.WA;t.C4(e),this.cxt?this.grt(t):this.vxt(t)}krt(){var t,i,e;const s=null!=(e=null==(t=this.P4)?void 0:t.M3)?e:ve.iL();var n;const r=null!=(n=null==(i=this.x4)?void 0:i.M3)?n:ve.iL();return s.OM(r)}async mxt(t,i){const e=[];this.P4&&e.push(this.P4.QPt()),this.x4&&e.push(this.x4.QPt());try{await Promise.all(e),await t(i)}finally{this.P4&&this.P4.YPt(),this.x4&&this.x4.YPt()}}yrt(t){t.type===Zs.lZ&&this.pE.P3(),super.yrt(t)}constructor(t,i){super(i),this.pE=void 0,this.nxt=void 0,this.WA=NaN,this.cxt=!1,this.dxt=!1,this.lxt=void 0,this.grt(i),this.pE=t}};function bX(t){if(!t)return 0;const i=t.IP;return i.V>0?i.An(i.V-1):0}function SX(t){return t.Cd.Km===Zr.wV}r();var TX=class extends mX{get yxt(){return this.Axt}RP(){return super.RP().OM(this.Axt.IP)}Nd(){if(!this.bxt){const t=this.iq;if(t&&SX(t))return t.ct}return super.Nd()}Lrt(){return!!super.Lrt()&&!(!this.bxt&&!this.WZ())}Ort(){return!!super.Ort()&&!(!this.bxt&&super.Lrt()&&!this.WZ())}WZ(){const t=this.iq;return!(!t||!SX(t))&&t.WZ}gx(){return this.Ho.OM(this.TL._x)}Tx(){return super.Tx().OM(this.Axt.Sx)}bx(){return super.bx()}Mrt(){var t;return null!=(t=super.Mrt())?t:this.Axt.nq}Gx(){return this.kz=!1,super.Gx()}zx(){this.kz=!0,super.zx()}x9(){this.bxt=!0,super.x9(),this.Axt.x9()}I9(){this.bxt=!1,super.I9(),this.Axt.x9()}LP(){var t;return null!=(t=this.q8)?t:super.LP()}Ex(){return void 0!==this.q8||super.Ex()}My(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.Sxt.Zg(),this.m7.Zg(),this.m7=new at,this.Txt=$e(this.y7(t,i,e,this.Txt,this.m7.Yg),this.m7).catch(Ct)}async y7(t,i,e,s,n){this.q8=t,this.A7=t,this.So(new F(t)),s&&await s.catch(Ct),ii(n),this.iq&&SX(this.iq)&&this.iq._xt(),this.q8=void 0,super.My(t,i,e),this.Axt.My(t,i,e),this.kxt()}KW(t){const i=this.nq;if(!i||S(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.My(e)}D9(){super.D9(),this.Axt.D9()}get Rx(){return this.Ext.Rx}get Bx(){return this.Ext.Bx}we(){this.yz&&(this.yz=!1,this.Ext.we())}be(){this.yz||(this.yz=!0,this.Ext.be())}async Pxt(){var t;this.q8=void 0,this.A7=NaN,this.Ho=ve.iL(),null==(t=this.xxt)||t.Zg(),this.Sxt.Zg(),this.m7.Zg(),this.Txt&&(await this.Txt.catch(Ct),this.Txt=void 0)}Wrt(t){super.Wrt(t),this.Axt.Eq=t}qrt(t){super.qrt(t),this.Axt.N9=t}Ix(){return this.Gl}tI(t,i,e,s,n,r,h,o){return this.JU.tI(t,i,e,s,n,r,h,o)}wq(t){return this.JU.wq(t)}gq(t,i,e,s,n){throw new m("Not implemented yet")}vq(){return!1}iV(t){this.JU.iV(t)}Aq(){this.JU.hr(),super.Aq()}async Un(t){const i=await super.Un(t);return SX(i)&&this.kxt(),i}async hr(){await this.Pxt(),await super.hr(),await this.Axt.hr()}async C8(){await this.Pxt(),await super.C8(),await this.Axt.C8()}async zg(){await this.Pxt(),this.JU.kn(),this.Gl.kn(),await super.zg()}Xrt(t){return new AX(this,t)}Grt(t){return new Jo(t)}kxt(){this.Sxt.Zg(),this.Sxt=new at,this.Txt=$e(this.Ixt(this.Txt,this.Sxt.Yg),this.Sxt).catch(Ct)}async Ixt(t,i){if(t&&await t.catch(Ct),this.iq&&SX(this.iq))for(;;){let t;for(ii(i),this.Rxt()&&this.fxt(),this.iq._xt(),ii(i);;){const e={stack:[],error:void 0,hasError:!1};try{if(ii(i),this.Rxt())break;if(t=this.iq.gxt(this.LP()),void 0!==t){0,this.Cxt(),await this.iq.pxt(t,i),ii(i),this.Axt.My(t);break}const s=Be(e,at.ep([i]),!1);await Promise.race([this.ww(d._y,s.Yg),this.Dxt(s.Yg)])}catch(t){e.error=t,e.hasError=!0}finally{Cs(e)}}for(ii(i);!this.Rxt();)await this.TL.ww([d._y,d.Bw,Do.wI],i)}}Rxt(){const t=this.iq;if(void 0===t||!SX(t))return!1;const i=this.LP(),e=this.TL.IP;if(!this.TL.UP&&e.Cr(i))return!1;return!!jU(this.Axt.IP,t.krt()).qM(i,i+yt)}fxt(){if(this.Bxt)return;this.Bxt=!0,this.Ho=this.gx();const t=XN(this),i=this.Ex(),e=this.bx(),s=this.TL,n=this.Axt,r=this.iq;r._xt(),r.fxt(),jN(n,t),this.Qrt(n),this.Axt=s,s.zx(),s.$P=!0,this.Bxt=!1;const h=this.Ex();i!==h&&(h?this.So(new F(this.MP)):this.So(new Es(this.MP)));const o=this.bx();e!==o&&this.So(new ou(this.MP,o)),h||this.Cxt()}Cxt(){const t=this.TL,i=this.Ext;if(i===t)return;const e=this.Bx,s=this.Rx;this.Ext=t,this.yz&&(i.we(),t.be());const n=this.Bx,r=this.Rx;n>0&&r>0&&(e!==n||s!==r)&&this.So(new ts)}rxt(t){return void 0!==this.Axt.QZ([t])}async oxt(t){this.Cxt();const i=this.iq,e=this.Axt;await e.hr();const s=await e.Un(t);i.wxt(s)}Dxt(t){return this.xxt=new pa,Nc(this.xxt.Qy,t)}P3(){var t;null==(t=this.xxt)||t.Xy()}Zx(t){t.type===d.$w&&this.A7===t.currentTime||(t.type===d.Zw&&(this.A7=NaN,this.Cxt()),t.type!==Do.wI&&t.type!==d.jw&&t.type!==d.Bw||this.Bxt||!this.Rxt()?(t.type!==d.Bw||this.UP)&&super.Zx(t):this.kxt())}constructor(t,i,e){super(t),this.Axt=void 0,this.Gl=void 0,this.JU=void 0,this.bxt=!1,this.q8=void 0,this.A7=NaN,this.Ho=ve.iL(),this.kz=!0,this.Bxt=!1,this.yz=!0,this.Ext=void 0,this.xxt=void 0,this.Txt=void 0,this.Sxt=new at,this.m7=new at,this.Axt=i,this.Ext=t,this.TL.be(),this.Axt.we(),this.JU=new dX(this,e),this.Gl=new Yu([this.JU.nt,super.Ix()])}},kX=class extends TX{get Nrt(){return this.TL}get yxt(){return this.Axt}we(){super.we(),this.eet.we()}be(){super.be(),this.eet.be()}get $W(){return this.TL.$W}get n5(){return this.TL.n5}get Vx(){return this.TL.Vx}set Vx(t){this.TL.Vx=t}B9(t){this.TL.B9(t),this.Axt.B9(t)}Yx(){this.TL.Yx(),this.Axt.Yx()}Wx(){return this.TL.Wx()}Aa(){return this.KL}Qrt(t){const i=this.Hx(),e=this.Wx();super.Qrt(t),this.KL.BI=t.mq,this.Hx()!==i&&this.So(new lt),this.Wx()!==e&&this.So(new Sk)}zg(){return this.KL.kn(),this.net.kn(),this.eet.kn(),super.zg()}constructor(t,i){super(t,i,new ec),this.eet=void 0,this.net=void 0,this.KL=void 0,this.KL=new io(t.mq),this.eet=new XL,this.eet.B9(t.$W.parentElement),this.net=new vF(this.eet.xe,this.Wu,this.nt,this.Ql,this.Ma,this.mq)}},EX=class extends RU{Gq(t){if(t===Ci.Bk){const i=super.Gq(t),e=super.Gq(t);return new kX(i,e)}return super.Gq(t)}async Pq(t){t instanceof kX?(await t.zg(),await super.Pq(t.Nrt),await super.Pq(t.yxt)):await super.Pq(t)}},PX=class extends hX{async kn(){await super.kn(),await this.xq.Pq(this.TL)}static LS(t){var i;return!Qt.Ks&&!Qt.og&&!(t&&"google-dai"===(null==(i=t.ssai)?void 0:i.integration))}constructor(t,i,e,s,n,r,h){const o=new Ss(new EX(n));super(t,i,e,s,o.Gq(r),h),this.xq=void 0,this.xq=o}};r(),r(),r();var xX=class extends Wo{mrt(t){return new wX(t)}CS(){return this.Nxt?this.YS:super.CS()}RP(){return this.Nxt?this.OPt:super.RP()}Nd(){return this.Nxt?this.WA:super.Nd()}C4(t){this.Nxt?(this.WA=t,this.Mxt=!0):super.C4(t)}Tx(){return this.Nxt?this.Lxt?this.Lxt.z3():this.N4:super.Tx()}M4(t,i,e,s){this.Nxt?this.Lxt=new RN(t,i,e,s):super.M4(t,i,e,s)}_rt(){return this.Nxt?this.ket&&!1!==this.ZPt:super._rt()}C3(){this.Nxt?this.ZPt=!0:super.C3()}A3(){this.Nxt?this.ZPt=!1:super.A3()}TZ(t){return!this.Nxt&&super.TZ(t)}EZ(t){return this.Nxt?Promise.reject(new g("Not supported")):super.EZ(t)}async QPt(){if(this.Nxt)throw new g("Already locked");this.Nxt=!0,this.KPt();const t=[];this.P4&&t.push(this.P4.QPt()),this.x4&&t.push(this.x4.QPt()),await Promise.all(t)}YPt(){this.Nxt=!1,this.P4&&this.P4.YPt(),this.x4&&this.x4.YPt(),this.JPt()}KPt(){this.YS=super.CS(),this.OPt=super.RP(),this.WA=super.Nd(),this.N4=super.Tx(),this.Mxt=!1,this.ZPt=void 0,this.Lxt=void 0}JPt(){if(this.Mxt&&(super.C4(this.WA),this.Mxt=!1),void 0!==this.Lxt){const t=this.Lxt;super.M4(t.Tn,t.An,t.G3,t.X3),this.Lxt=void 0}void 0!==this.ZPt&&(this.ZPt?super.C3():super.A3(),this.ZPt=void 0)}constructor(t){super(t),this.Nxt=!1,this.OPt=ve.iL(),this.YS=void 0,this.WA=0,this.Mxt=!1,this.ket=!1,this.ZPt=void 0,this.N4=ve.iL(),this.Lxt=void 0,this.grt(t),this.YS=t.Cd}},IX=class extends $u{Gx(){return void 0!==this.iq&&SX(this.iq)&&this.UP&&this.My(0),super.Gx()}My(t,i,e){void 0!==this.iq&&SX(this.iq)&&this.UP&&t<this.ct&&this.Oxt(),super.My(t,i,e)}x9(){this.Fxt=!0,super.x9()}I9(){this.Fxt=!1,this.Uxt()||super.I9()}Uxt(){return this.Fxt||this.Vxt}Hxt(){this.Vxt||(this.Vxt=!0,super.x9())}Wxt(){this.Vxt&&(this.Vxt=!1,this.Uxt()||super.I9())}Un(t){this.qxt.Zg();const i=this.lE(t,this.zxt);return this.Gxt=i,i}async lE(t,i){return i&&await i.catch(Ct),this.Wxt(),await super.Un(t)}Xrt(t){return new xX(t)}Grt(t){return new Jo(t)}hr(){this.qxt.Zg();const t=this.MEt(this.zxt);return this.Gxt=t,t}async MEt(t){return t&&await t.catch(Ct),this.Wxt(),await super.hr()}C8(){this.qxt.Zg();const t=this.Xxt(this.zxt);return this.Gxt=t,t}async Xxt(t){return t&&await t.catch(Ct),this.Wxt(),await super.C8()}Oxt(){this.Hxt(),this.qxt.Zg(),this.qxt=new at,this.zxt=$e(this.jxt(this.Gxt,this.zxt,this.qxt.Yg),this.qxt).catch(yf)}async jxt(t,i,e){t&&await t.catch(Ct),i&&await i.catch(Ct),ii(e);const s=this.iq;if(!s||!SX(s))return;const n=s.Cd;await s.QPt(),await this.TL.hr();const r=await this.TL.Un(n);r.C4(s.ct),s.grt(r),s.YPt(),this.Wxt()}async zg(){this.qxt.Zg(),this.zxt&&(await this.zxt.catch(Ct),this.zxt=void 0),this.Uxt()&&super.I9(),await super.zg()}constructor(...t){super(...t),this.Fxt=!1,this.Vxt=!1,this.Gxt=void 0,this.zxt=void 0,this.qxt=new at}},RX=class extends(CU(IX)){constructor(t){super(t)}},CX=class extends(Sl(IX)){constructor(t){super(t)}},DX=class extends RU{Gq(t){return t===Ci.Bk?new CX(super.Gq(t)):t===Ci.Dk?new RX(super.Gq(t)):void 0}async Pq(t){const i=t;await i.zg(),await super.Pq(i.Nrt)}static LS(){return Qt.cg}};cs(new class extends EU{PR(t,i,e,s,n,r,h,o){let a;a=pX.LS(o)?pX:PX.LS(o)?PX:oX;let u=i;return DX.LS()&&(u=new DX(u)),new a(e,s,n,r,u,Ci.Bk,t)}Qq(){return!0}constructor(...t){super(...t),this.Kq=V.mW}}),r(),r(),VF(function(t){return class extends t{xa(){const t=this.zP.Ca;return po(super.xa(),{get hesp(){return t}})}}},zo.lu),r(),r(),r(),r(),r();var BX=0;function NX(t,i){if(void 0===i&&(i=!0),!t)return;let e=t;return"/"===e.charAt(0)&&(e=e.substring(1)),i&&"/"!==e.charAt(e.length-1)&&(e+="/"),e}function MX(t){var i,e,s;return Mo({},t,{baseUrl:NX(t.baseUrl),id:null!=(i=t.id)?i:String(BX++),timeBounds:Mo({},t.timeBounds,{scale:null!=(e=t.timeBounds.timescale)?e:1e3}),currentTime:t.currentTime?{value:t.currentTime.timestamp,scale:null!=(s=t.currentTime.timescale)?s:1e3}:void 0,audio:t.audio.map(VX),video:t.video.map(WX),metadata:t.metadata.map(zX),events:t.events.map(KX)})}var LX=0;function OX(t){const i=NX(t.initPattern,!1),e=NX(t.contPattern,!1);var s;return Mo({},t,{id:null!=(s=t.id)?s:String(LX++),continuationPattern:e?fh(e,"${segmentId}","{segmentId}"):void 0,initializationPattern:i?fh(i,"${initId}","{initId}"):void 0})}function FX(t){var i;const e=NX(t.initPattern,!1),s=NX(t.contPattern,!1);return Mo({},t,{continuationPattern:s?fh(s,"${segmentId}","{segmentId}"):void 0,initializationPattern:e?fh(e,"${initId}","{initId}"):void 0,segmentDuration:t.segmentDuration?{value:t.segmentDuration.duration,scale:t.segmentDuration.timescale}:void 0,segments:t.segments.map(UX),activeSegment:null==(i=Jr(t.segments,t=>t.active))?void 0:i.id})}function UX(t){var i;return Mo({},t,{timeBounds:Mo({},t.timeBounds,{endTime:void 0!==t.timeBounds.duration?t.timeBounds.startTime+t.timeBounds.duration:void 0,scale:null!=(i=t.timeBounds.timescale)?i:1e3})})}function Bt(t){return t&&"-"===t.charAt(0)}function VX(t){let i;try{var e;i=x(null!=(e=t.channels)?e:"2")}catch(t){i=2}return Bt(t.contPattern)||Bt(t.initPattern)?function(t,i){const e=t.initPattern,s=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,Mo({},OX(t),{baseUrl:NX(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map(t=>{var i,n;return t.initPattern=null!=(i=t.initPattern)?i:e,t.contPattern=null!=(n=t.contPattern)?n:s,HX(t)})})}(t,i):Mo({},OX(t),{baseUrl:NX(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map(HX)})}function HX(t){let i;try{var e;i=x(null!=(e=t.channels)?e:"2")}catch(t){i=2}return Bt(t.contPattern)||Bt(t.initPattern)?function(t,i){return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,Mo({},FX(t),{baseUrl:"./",channels:i,sampleRate:t.samplerate})}(t,i):Mo({},FX(t),{baseUrl:NX(t.baseUrl),channels:i,sampleRate:t.samplerate})}function WX(t){return Bt(t.contPattern)||Bt(t.initPattern)?function(t){const i=t.initPattern,e=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,Mo({},OX(t),{baseUrl:NX(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(t=>(t.initPattern=i,t.contPattern=e,qX(t)))})}(t):Mo({},OX(t),{baseUrl:NX(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(qX)})}function qX(t){var i,e;return Bt(t.contPattern)||Bt(t.initPattern)?function(t){var i,e;return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,Mo({},FX(t),{baseUrl:"./",frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:Mo({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(e=t.resolution.sar)?void 0:e.height})})}(t):Mo({},FX(t),{baseUrl:NX(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:Mo({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(e=t.resolution.sar)?void 0:e.height})})}function zX(t){var i;return Mo({},t,{id:null!=(i=t.id)?i:String(LX++),schemeId:"",tracks:t.tracks.map(GX)})}function GX(t){return Mo({},t,{segments:t.segments.map(jX)})}var XX=0;function jX(t){return{id:XX++,timeBounds:Mo({},t.timeBounds,{scale:t.timeBounds.timescale})}}var QX=0;function KX(t){var i,e;return Mo({},t,{id:null!=(i=t.id)?i:String(QX++),timeBounds:Mo({},t.timestamp,{scale:null!=(e=t.timestamp.timescale)?e:1e3})})}var YX=class{async Qxt(t,i){const e={Yu:t,Km:Al.wk,Yg:i},s=await this.SP.lk(e);let n=await s.FT(i);return function(t){const i=t;if(Z(i.manifestVersion)&&Ho(i.manifestVersion,"alpha"))return!0;let e,s;for(const t of i.presentations){for(const i of[...t.video,...t.audio])if(i.tracks.length>0){e=i.tracks[0],s=i;break}if(it(e))break}return(Z(null==s?void 0:s.initPattern)||Z(null==e?void 0:e.initPattern))&&!Z(null==e?void 0:e.initializationPattern)&&!Z(null==s?void 0:s.initializationPattern)}(n)&&(n=function(t){return Mo({},t,{availabilityDuration:{value:t.dvrDuration?t.dvrDuration.duration/t.dvrDuration.timescale:0},manifestVersion:"1.0.0",presentations:t.presentations.map(MX),contentBaseUrl:t.contentBaseUrl||"./"})}(n)),n}constructor(t){this.SP=void 0,this.SP=t}};r();var JX=class extends Ne{get Ca(){return this.hu||(this.hu=ES(this)),this.hu}oR(){return this.Kxt.oR()}get eR(){return this.Kxt.eR}get sR(){return this.Kxt.sR}get nR(){return this.Kxt.nR}get rR(){return this.Kxt.rR}get hR(){return this.Kxt.hR}wn(t,i){this.Kxt.wn(t,i)}mn(t,i){this.Kxt.mn(t,i)}constructor(t){super(),this.hu=void 0,this.Kxt=void 0,this.Kxt=t}};r(),r(),r();var cn=class{get yet(){const t=1-this.Yxt**this.Jxt;return this.Zxt/t}Pat(t,i){const e=this.Yxt**t,s=i*(1-e)+e*this.Zxt;S(s)||(this.Zxt=s,this.Jxt+=t)}EZ(t){const i=_.exp(_.log(.5)/t);if(i===this.Yxt)return;if(0===this.Jxt)return void(this.Yxt=i);const e=this.yet,s=1-i**this.Jxt;this.Zxt=e*s,this.Yxt=i}constructor(t){this.Yxt=void 0,this.Zxt=0,this.Jxt=0,this.Yxt=_.exp(_.log(.5)/t)}},de=class t{get yet(){return this.Nat()?_.max(this.$xt.yet,this.tIt.yet):this.iIt}Pat(t){const i=zd.Mg(),e=t;this.eIt&&void 0!==this.sIt&&i-this.sIt>=this.nIt&&this.hr(),this.rIt+=1,this.$xt.Pat(1,e),this.tIt.Pat(1,e),this.hIt.push(e),this.hIt.length>this.oIt&&this.hIt.shift(),this.sIt=i}Nat(){return void 0!==this.sIt&&zd.Mg()-this.sIt<=this.nIt}hr(){this.$xt=new cn(this.aIt),this.tIt=new cn(this.uIt),this.rIt=0,this.hIt=[],this.sIt=void 0}constructor(i=t.cIt,e=t.dIt,s=t.Mat,n=!1){this.$xt=void 0,this.tIt=void 0,this.rIt=0,this.hIt=[],this.sIt=void 0,this.nIt=6e4,this.oIt=10,this.aIt=void 0,this.uIt=void 0,this.iIt=void 0,this.eIt=void 0,this.aIt=i,this.uIt=e,this.iIt=s,this.eIt=n,this.$xt=new cn(i),this.tIt=new cn(e)}};de.cIt=2,de.dIt=5,de.Mat=.1,r();var ZX=class{PY(t){for(const i of this.lIt)i.PY(t)}xY(t){for(const i of this.lIt)i.xY(t)}IY(t,i){for(const e of this.lIt)e.IY(t,i)}RY(t){for(const i of this.lIt)i.RY(t)}constructor(t){this.lIt=void 0,this.lIt=t}};r();var $X=class{PY(t){this.fIt=t}xY(t){this.vIt.Pat(t-this.fIt)}IY(t){}RY(t){}constructor(t){this.vIt=void 0,this.fIt=0,this.vIt=t}};r();var tj=class{xY(t){this._It=t}IY(t,i){this.Fat.Pat(t-this._It,i.byteLength),this._It=t}RY(t){}PY(t){}constructor(t){this.Fat=void 0,this._It=0,this.Fat=t}};r();var ij=class{PY(t){}IY(t,i){const e=i.byteLength,s=this.gIt;this.gIt=e;const n=t-this.En;this.En=t,this.pIt.A$(i);const r=!this.pIt.mIt(),h=e>=this.wIt;s!==zd.Zs.Sp&&r&&h&&this.Fat.Pat(n,e)}xY(t){this.En=t}RY(t){}constructor(t,i=0){this.Fat=void 0,this.wIt=void 0,this.pIt=new ej,this.En=0,this.gIt=0,this.Fat=t,this.wIt=i}},ej=class extends Xo{mIt(){return this.yIt}A$(t){this.yIt=!1,super.A$(t)}w$(t,i){this.AIt&&this.AIt!==Ro.OC||(this.yIt=!0),super.w$(t,i),this.AIt=t}C$(t){return!1}B$(t){}M$(t){}constructor(...t){super(...t),this.AIt=void 0,this.yIt=!1}};r();var sj=function(t){return t.bIt="sample",t}({}),nj=class extends Ne{cW(){if(!this.Nat())return;const t=zd.Mg();t-this.SIt>1e3&&(this.SIt=t,HI.Ng.cW(this.yet))}constructor(...t){super(...t),this.SIt=0}};r();var rj=class extends nj{get yet(){return this.Nat()?this.Zxt:this.TIt}Nat(){return this.wb.length>=3}Pat(t,i){if(0===t)return;const e={kW:8*i/t,kIt:i};if(this.wb.push(e),this.EIt+=e.kIt,this.wb.length>30){const t=this.wb.shift();this.EIt-=t.kIt}const s=this.wb.slice().sort((t,i)=>t.kW-i.kW);let n=0;for(let t=0;t<s.length;t++){const i=s[t];if(n+=i.kIt/this.EIt,this.Zxt=i.kW,n>=.5)break}this.cW(),this.So(new wp(sj.bIt))}constructor(t){super(),this.TIt=void 0,this.wb=[],this.Zxt=void 0,this.EIt=0,this.TIt=t,this.Zxt=t}};r();var ps=class t extends nj{Pat(t,i){const e=8*i/t;this.$xt.Pat(t,e),this.tIt.Pat(t,e),this.PIt+=i,this.cW(),this.So(new wp(sj.bIt))}get yet(){return this.Nat()?_.min(this.$xt.yet,this.tIt.yet):this.iIt}Nat(){return this.PIt>=this.xIt}constructor(i=t.cIt,e=t.dIt,s=t.IIt,n=t.Mat){super(),this.$xt=void 0,this.tIt=void 0,this.PIt=0,this.iIt=void 0,this.xIt=void 0,this.xIt=s,this.$xt=new cn(i),this.tIt=new cn(e),this.iIt=n}};ps.IIt=128e3,ps.Mat=VI,ps.cIt=.5,ps.dIt=5;var hj=class{RIt(t){var i;null==(i=this.Fat)||i.mn(sj.bIt,this.CIt),this.Fat=new rj(t),this.Fat.wn(sj.bIt,this.CIt)}DIt(t){this.BIt.push(t)}NIt(t){oi(this.BIt,t)}get kW(){var t,i;return null!=(i=null==(t=this.Fat)?void 0:t.yet)?i:this.MIt}get EW(){return this.LIt.yet}PW(t){if("segment"!==t.Km)return;if("video"!==t.qk)return;const i=[new $X(this.LIt)];return this.Fat&&("stream"===t.dk&&"initialization-segment"!==t.Wk?i.push(new ij(this.Fat,1e3)):i.push(new tj(this.Fat))),new ZX(i)}constructor(t,i){this.Fat=void 0,this.BIt=[],this.LIt=void 0,this.MIt=void 0,this.CIt=()=>{for(const t of this.BIt)t()},this.MIt=t>0?t:ps.Mat,this.LIt=new de(de.cIt,de.dIt,i>0?i:de.Mat),this.RIt(this.MIt)}};r();var oj=class{OIt(t,i){const e=i-t;(!this.FIt||e<this.FIt)&&(this.FIt=e)}UIt(t,i){this.VIt=i-t}HIt(t,i){this.WIt=i-t}qIt(t,i){this.zIt=i-t}get GIt(){const t=oo([this.WIt,this.zIt].filter(it),jo);return void 0!==t?zd.Mg()/1e3+t:void 0!==this.VIt?zd.Mg()/1e3+this.VIt:void 0!==this.FIt?zd.Mg()/1e3+this.FIt:void 0}XIt(t){const i=this.GIt;if(void 0!==i)return i-t}hr(){this.FIt=void 0,this.VIt=void 0,this.zIt=void 0,this.WIt=void 0}constructor(){this.FIt=void 0,this.VIt=void 0,this.zIt=void 0,this.WIt=void 0}};r();var aj=.25,uj={minimumOffset:.2,targetOffset:.45,maximumOffset:.7,forceSeekOffset:3,minimumPlaybackRate:Ot,maximumPlaybackRate:Jt},cj={minimumOffset:.4,targetOffset:.65,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:Ot,maximumPlaybackRate:Jt},dj={minimumOffset:.4,targetOffset:.7,maximumOffset:.9,forceSeekOffset:3,minimumPlaybackRate:Ot,maximumPlaybackRate:Jt},lj={minimumOffset:.2,targetOffset:.45,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:Ot,maximumPlaybackRate:Jt},fj={minimumOffset:.5,targetOffset:1.125,maximumOffset:1.75,forceSeekOffset:2.55,minimumPlaybackRate:Ot,maximumPlaybackRate:Jt};function vj(t){if(zd.Cm.Bm){const i=(400+250)/1e3,e=_.max(i,t.minimumOffset),s=_.max(e+aj,t.targetOffset),n=_.max(s+aj,t.maximumOffset);return{minimumOffset:e,targetOffset:s,maximumOffset:n,forceSeekOffset:_.max(n+aj,t.forceSeekOffset),minimumPlaybackRate:Ot,maximumPlaybackRate:Jt}}return t}function _j(){let t;return t=zd.Zs.pp?lj:zd.Zs.bp?cj:zd.Zs.Ap?"Android"===zd.Cm.Dm?dj:uj:fj,zd.Cm.Bm?vj(t):t}r(),r(),r();var gj=class{jIt(t){for(const i of this.OPt)i[1]=i[1].Mn(t)}QIt(t,i){let e=!0;for(const s of this.OPt){let n=s[1];n=n.UM(i),t===s[0]&&(n=n.OM(i),e=!1),s[1]=n.LM(1e-5)}e&&this.OPt.push([t,i])}KIt(t){for(const i of this.OPt)i[1]=i[1].UM(t)}YIt(t){for(let i=0;i<this.OPt.length;i++)if(this.OPt[i][1].Cr(t))return this.OPt[i][0]}constructor(){this.OPt=[]}},pj=class extends Ne{get IP(){let t=ve.iL();for(const[,i]of this.JIt){const e=i.xet+i.bU,s=e+i.ct;t=t.OM(ve.tL(e,s))}return this.Trt.IP.OM(t)}YIt(t){return this.ZIt.YIt(t)}get $It(){return void 0!==this.tRt}get iRt(){return this.tRt?this.tRt.Qy:Promise.resolve()}async appendStream(t,i,e){if(this.$It)throw new m("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=Be(s,at.ep([e,this.T3.Yg]),!1).Yg;this.ZIt.jIt(this.IP),this.tRt=new pa;const r=RB(t).getReader();for(;;){const t=await Nc(r.read(),n);if(t.done)break;const e=t.value,s={Km:Po.vZ,ck:vm(e.map(t=>t.$at))},h={ct:$l(e,t=>t.ct),xet:e[0].Rvt,bU:-i.kot.eRt};await this.q2(s,h,n);const o=h.xet+h.bU,a=o+h.ct;this.ZIt.QIt(i.kot,ve.tL(o,a))}}catch(t){s.error=t,s.hasError=!0}finally{Cs(s)}}catch(t){throw i.sRt(),t}finally{i.nRt();const t=this.tRt;this.tRt=void 0,null==t||t.Xy()}}async H2(t,i,e,s){if(this.$It)throw new m("Concurrent appends are not supported.");try{const n={stack:[],error:void 0,hasError:!1};try{const r=Be(n,at.ep([s,this.T3.Yg]),!1).Yg;this.tRt=new pa,await this.q2(t,i,r);const h=i.xet+i.bU,o=h+i.ct;this.ZIt.jIt(this.IP),this.ZIt.QIt(e,ve.tL(h,o))}catch(t){n.error=t,n.hasError=!0}finally{Cs(n)}}finally{const t=this.tRt;this.tRt=void 0,null==t||t.Xy()}}async q2(t,i,e){this.Trt.B3===Ci.Bk&&this.rRt.Odt(t.ck,i.xet,i.xet+i.ct,i.bU,this.vyt,!1);const s=this.TL.CL.RL,n=this.Trt.IP.Cr(this.TL.MP);if(s||n)return await this.hRt(e),await this.Trt.H2(t,i,e);this.JIt.push([t,i]);const r=this.JIt[0][1].xet;return this.JIt[this.JIt.length-1][1].xet-r>=.4?await this.hRt(e):void 0}async z2(t,i){if(this.$It)throw new m("Concurrent appends are not supported.");try{const e={stack:[],error:void 0,hasError:!1};try{const s=Be(e,at.ep([i,this.T3.Yg]),!1).Yg;this.tRt=new pa,await this.hRt(s),await this.Trt.z2(t,{},s),this.Trt.B3===Ci.Bk&&this.rRt.Jrt(t.ck)}catch(t){e.error=t,e.hasError=!0}finally{Cs(e)}}finally{const t=this.tRt;this.tRt=void 0,null==t||t.Xy()}}async _S(t,i,e){if(this.$It)throw new m("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=Be(s,at.ep([e,this.T3.Yg]),!1).Yg;this.tRt=new pa,await this.hRt(n),await this.Trt._S(t,i,n),this.ZIt.KIt(ve.tL(t,i))}catch(t){s.error=t,s.hasError=!0}finally{Cs(s)}}finally{const t=this.tRt;this.tRt=void 0,null==t||t.Xy()}}async AQ(t){if(this.$It)throw new m("Concurrent appends are not supported.");try{const i={stack:[],error:void 0,hasError:!1};try{const e=Be(i,at.ep([t,this.T3.Yg]),!1).Yg;this.tRt=new pa,await this.hRt(e)}catch(t){i.error=t,i.hasError=!0}finally{Cs(i)}}finally{const t=this.tRt;this.tRt=void 0,null==t||t.Xy()}}async hRt(t){for(const[i,e]of this.JIt)await this.Trt.H2(i,e,t);Yo(this.JIt)}async zg(){for(this.T3.zg();this.$It;)await this.iRt}constructor(t,i,e,s){super(),this.Trt=void 0,this.ZIt=void 0,this.TL=void 0,this.JIt=[],this.vyt=void 0,this.rRt=void 0,this.tRt=void 0,this.T3=new at,this.TL=i,this.Trt=t,this.vyt=e,this.rRt=s,this.ZIt=new gj,this.Trt.wn(Zs.lZ,this.Rs)}};r(),r();var mj=class{async oRt(t,i){if(this.aRt>=this.uRt.maxRetries)throw t;const e=this.cRt(this.aRt++);await Er(e,i)}cRt(t){let i=0;return 0!==t&&(i+=_.min(this.uRt.maximumBackoff,this.uRt.minimumBackoff*2**(t-1))),i}constructor(t){this.aRt=0,this.uRt=void 0,this.uRt=t}};r(),r();var wj=function(t){return t.dRt="emsgdata",t}({}),yj=class extends wp{constructor(t,i){super("emsgdata"),this.value=void 0,this.data=void 0,this.value=t,this.data=i}};r();var Aj=class{start(t){this.YJ=t}lRt(t){this.YJ.enqueue(t)}constructor(){this.YJ=void 0}};r(),r();var Ur=function(t){return t.fRt="initdata",t.MANIFEST_UPDATE="manifestupdate",t.vRt="timestamps:v1",t}({});function bj(t){if("urn:theo:hesp:2020"!==t.$N)return;const i=t.zE;if(i===Ur.fRt){return function(t){if(!t||!Lu(t))return;const i=t;return!ho(i.index)||!ho(i.offset)||i.index<0&&i.offset<0?void 0:{Km:"initdata",index:i.index,offset:i.offset}}(JSON.parse(vr(dh(t.eM),new Ui)))}if(i===Ur.MANIFEST_UPDATE){return function(t){if(!t||!Lu(t))return;const i=t;return!it(i.url)||Z(i.url)?{Km:"manifestupdate",url:i.url}:void 0}(JSON.parse(vr(dh(t.eM),new Ui)))}if(i===Ur.vRt){const i=dh(t.eM),e=new Ui,s=et(i,e).toNumber()/t.qD,n=et(i,e).toNumber()/1e3,r=Cu(i,e)/1e3;let h;return e.ac+8<=i.byteLength&&(h={hours:Cu(i,e),minutes:Xp(i,e),seconds:Xp(i,e),frames:qe(i,e)}),{Km:Ur.vRt,_Rt:s,gRt:n,pRt:r,mRt:h}}}var Sj=class extends Aj{transform(t){if(t.Km===Ro.VC)try{const i=bj(jt.LD(t.ck));i&&this.wRt.So(new yj(i.Km,i))}catch(t){false}this.lRt(t)}zg(){this.wRt.Vo()}constructor(...t){super(...t),this.wRt=new Ne}};r();var Tj=class{start(t){this.yRt=new kj(t)}transform(t){this.yRt.A$(t)}flush(){this.yRt.S$()}constructor(){this.yRt=void 0}},kj=class extends Xo{C$(t){return!0}B$(t){this.YJ.enqueue(t)}M$(t){}constructor(t){super(),this.YJ=void 0,this.YJ=t}};r(),r();var Ej=Wt.fromNumber(Xl);var Pj=class extends Ne{async lk(t){for(;;)try{return await this.nV.lk(t)}catch(i){if(D(i))throw i;await this.ARt.oRt(i,t.Yg)}}constructor(t,i){super(),this.nV=void 0,this.ARt=void 0,this.nV=t,this.ARt=i}};function xj(t,i,e,s,n,r,h,o){const a=new Ra;return n&&a.OT(function(t,i){return void 0===i&&(i=Ej),new Ra({Range:"bytes="+t.toString()+"-"+i.toString()})}(n.start,n.end)),{Yu:t,fk:a,zk:!1,Yg:o,Km:Al.yk,Wk:e,qk:s,Vk:r,Hk:h,dk:i,jk:i===M.BT}}r(),r();var Ij=function(t){return t[t.INITIALIZER=0]="INITIALIZER",t[t.FRAMES=1]="FRAMES",t}({}),Rj=class extends Aj{transform(t){this.bRt.push(t),t.Km===Ro.OC&&this.SRt(this.bRt.splice(0),Ij.FRAMES)}SRt(t,i){const e={qD:this.HA,oQ:this.SQ},s=vm(t.map(t=>ta(t.ck.ck))),n=Jr(t,Cj),r=jt.TD(n.ck.ck)[0],h={qk:this.Tat,Ey:e,$at:s,Km:i,ct:this.Nd(r)/this.HA,Rvt:Bs(this.TRt(r),this.HA)};this.lRt(h)}Nd(t){const i=t.Z[0];if(!i||0===i.zN.length)return 0;var e;const s=null!=(e=i.gD.NN)?e:0;return $l(i.zN[0].JN,t=>{var i;return null!=(i=t.ct)?i:s})}TRt(t){var i,e;return null!=(e=null==(i=t.Z[0].GN)?void 0:i.GN)?e:Wt.UZERO}constructor(t,i){super(),this.SQ=void 0,this.Tat=void 0,this.HA=void 0,this.bRt=[],this.SQ=t,this.Tat=this.SQ.match(/video/)?On.Bk:On.Dk,this.HA=i}};function Cj(t){return t.Km===Ro.IC}r();var Dj=class extends Ne{get kot(){return this.kRt}Cct(t){return t+1}get ERt(){return!1}get PRt(){return this.xRt}get $It(){return void 0!==this.tRt}get iRt(){return this.tRt?this.tRt.Qy:Promise.resolve()}My(t){this.xRt=t,this.IRt=void 0,this.RRt=void 0}CRt(){return void 0!==this.IRt}async DRt(){if(this.$It)throw new m("Concurrent downloads are not supported.");try{this.tRt=new pa;let t;if("now"===this.xRt)t=zd.xm(this.kRt.BRt("now"),this.kRt.NRt);else{const i=this.xRt,e=0===i?1:this.kRt.MRt(i);t=zd.xm(this.kRt.BRt(e),this.kRt.NRt)}const i=xj(t,M.CT,Xa.Sk,this.Tat,void 0,3e3,1e3,this.LRt.Yg),e=await this.ORt.lk(i),s=await e.HT(this.LRt.Yg),n=new j(s),{FRt:r,KD:h}=function(t){const i=Cl.aD(new lc(dh(t),new Ui)),e=Jr(i,t=>t.Km===Ro.WC||t.Km===Ro.IC);if(void 0===e)return{FRt:t,KD:void 0};const s=ao(t,0,e.ac),n=ao(t,e.ac);return{FRt:s,KD:0===n.byteLength?void 0:n}}(n),o=jt.TD(dh(n));this.HA=function(t){const i=Jr(t,t=>t.Km===Ro.OR);return i.Z[0].KD.gD.qD}(o);const a=function(t){const i=t.filter(t=>t.Km===Ro.VC),e=i.map(t=>bj(t)),s=Jr(e,t=>(null==t?void 0:t.Km)===Ur.fRt);if(!s)throw new m("No init data in init response");return s}(o);let u;if(this.IRt=a.index,this.RRt=a.offset,h){u=function(t,i,e){var s;const n=Jr(t,t=>t.Km===Ro.IC);var r;const h=Bs(null!=(r=null==(s=n.Z[0].GN)?void 0:s.GN)?r:Wt.UZERO,e),o=n.Z[0];var a;const u=null!=(a=o.gD.NN)?a:0,c=o.zN[0],d=$l(c.JN,t=>{var i;return null!=(i=t.ct)?i:u})/e;return{xet:h,ct:d,bU:i}}(jt.TD(dh(n)),-this.kot.eRt,this.HA)}return{initialization:r,data:h,metadata:u}}finally{const t=this.tRt;this.tRt=void 0,null==t||t.Xy()}}URt(){if(this.$It)throw new m("Concurrent downloads are not supported.");this.tRt=new pa;const t=void 0!==this.RRt?Wt.fromNumber(this.RRt):void 0;return GA(this.VRt(this.IRt,t,this.LRt.Yg)).pipeThrough(new Ta(new Rj(this.kot.oQ,this.HA))).pipeThrough(new Ta(new Bj(this.LRt.Yg)))}async VRt(t,i,e){const s=this.HRt(t,i,e);return(await this.ORt.lk(s)).WT().pipeThrough(new Ta(new Tj)).pipeThrough(new Ta(this.WRt))}HRt(t,i,e){const s=this.kRt.qRt(t),n=void 0!==i?{start:i,end:void 0}:void 0;return xj(zd.xm(s,this.kRt.NRt),M.BT,Xa.pk,this.Tat,n,25e3,1e3,e)}sRt(){this.IRt=void 0,this.RRt=void 0}nRt(){void 0!==this.IRt&&(this.IRt=this.Cct(this.IRt)),this.RRt=void 0;const t=this.tRt;this.tRt=void 0,null==t||t.Xy()}cancelDownload(){var t;this.LRt.Zg(),this.LRt=new at,this.tRt=null!=(t=this.tRt)?t:new pa,this.sRt();const i=this.tRt;this.tRt=void 0,null==i||i.Xy()}async zg(){this.Vo(),this.WRt.zg(),this.LRt.Zg(),await this.iRt,this.IRt=void 0,this.RRt=void 0}constructor(t,i,e){super(),this.kRt=void 0,this.ORt=void 0,this.nV=void 0,this.ARt=void 0,this.Tat=void 0,this.WRt=void 0,this.xRt="now",this.IRt=void 0,this.RRt=void 0,this.HA=void 0,this.LRt=new at,this.tRt=void 0,this.kRt=t,this.ARt=new mj(e),this.WRt=new Sj,this.WRt.wRt.wn(wj.dRt,this.Rs),this.nV=i,this.Tat=function(t){switch(t){case On.Dk:return Za.Dk;case On.Bk:return Za.Bk;default:return Za.pk}}(t.Km),this.ORt=new Pj(this.nV,this.ARt)}};var Bj=class{start(t){this.YJ=t,this.Jg.Xg(this.zRt)}flush(){this.Jg.jg(this.zRt)}constructor(t){this.YJ=void 0,this.Jg=void 0,this.zRt=()=>{this.YJ.error(new dt)},this.Jg=t}};function pn(t){var i;return t.value/(null!=(i=t.scale)?i:1)}r(),r(),r(),r(),r();var Nj="{initId}",Mj=/{initId(?::0(?:\d+)d)?}/,Lj=/{segmentId(?::0(?:\d+)d)?}/,Oj=class{get o(){return this.hS}get kW(){return this.dW}get tyt(){return this.GRt}get ect(){return this.fAt}get XRt(){return this.jRt}get QRt(){return this.KRt}get NRt(){return zd.xm(this.YRt,this.JRt.NRt)}get frt(){return this.ZRt}get Th(){return this.pO}get $Rt(){return this.tCt}get iCt(){return this.eCt}get eRt(){return this.sCt}get nCt(){return this.nAt}er(t){this.jRt=t.activeSegment,this.KRt=t.activeSequenceNumber,this.fAt=t.segments}constructor(t,i,e){var s,n,r,h;this.FO=void 0,this.rCt=void 0,this.hS=void 0,this.dW=void 0,this.GRt=void 0,this.YRt=void 0,this.ZRt=void 0,this.tCt=void 0,this.eCt=void 0,this.pO=void 0,this.sCt=void 0,this.nAt=void 0,this.jRt=void 0,this.KRt=void 0,this.fAt=[],this.FO=t,this.rCt=e,this.hS=t.id,this.dW=t.bandwidth,this.GRt=t.averageBandwidth,this.YRt=null!=(s=t.baseUrl)?s:"",this.ZRt=null!=(n=t.codecs)?n:i.codecs,this.tCt=null!=(r=t.continuationPattern)?r:i.continuationPattern,this.eCt=null!=(h=t.initializationPattern)?h:i.initializationPattern,this.pO=t.label,this.sCt=t.mediaTimeOffset?pn(t.mediaTimeOffset):0,this.nAt=t.segmentDuration?pn(t.segmentDuration):0,this.er(t)}},Fj=class extends Oj{get Km(){return On.Dk}get JRt(){return this.rCt}get hCt(){return this.oCt}get plt(){return this.aCt}get BB(){return this.kA}get oQ(){return'audio/mp4; codecs="'+this.frt+'"'}constructor(t,i,e){var s,n,r,h;super(t,i,e),this.oCt=void 0,this.aCt=void 0,this.kA=void 0,this.oCt=null!=(s=t.channels)?s:1,this.aCt=null!=(r=null!=(n=t.frameRate)?n:i.frameRate)?r:1024,this.kA=null!=(h=t.sampleRate)?h:i.sampleRate}},Uj=class extends Oj{get Km(){return On.Bk}get JRt(){return this.rCt}get uCt(){return this.Up}get plt(){return this.aCt}get oQ(){return'video/mp4; codecs="'+this.frt+'"'}constructor(t,i,e){var s;super(t,i,e),this.Up=void 0,this.aCt=void 0,this.Up=t.resolution,this.aCt=pn(null!=(s=t.frameRate)?s:i.frameRate)}};function Vj(t,i){const e=String(i);if(t===Nj||"now"===i)return e;const s=x(t.substring(9,t.lastIndexOf("d")));return Na(e,s,"0")}function Hj(t,i){const e=String(i);if(t===Nj)return e;const s=x(t.substring(12,t.lastIndexOf("d")));return Na(e,s,"0")}var Wj=class{get zst(){return this.cCt}get o(){return this.hS}get dCt(){return this.lCt}get NRt(){return zd.xm(this.YRt,this.zst.NRt)}get Th(){return this.pO}get eRt(){return this.sCt}get fCt(){return this.vCt}er(t){for(const i of this.RI){const e=Jr(t.tracks,t=>i.o===t.id);e&&i.er(e)}}constructor(t,i,e){var s;this.rCt=void 0,this.RI=void 0,this.cCt=void 0,this.hS=void 0,this.lCt=void 0,this.YRt=void 0,this.pO=void 0,this.sCt=void 0,this.vCt=void 0,this.rCt=t,this.RI=e,this.cCt=i,this.hS=t.id,this.lCt=t.alignId,this.YRt=null!=(s=t.baseUrl)?s:"",this.pO=t.label,this.sCt=t.mediaTimeOffset?pn(t.mediaTimeOffset):0,this.vCt=t.protection,this.er(t)}},qj=class extends Wj{get JRt(){return this.rCt}get Z(){return this.RI}get bs(){return this.qA}get hCt(){return this.oCt}er(t){var i,e;super.er(t),this.qA=t.language,this.oCt=null!=(i=t.channels)?i:1,this.SQ=null!=(e=t.mimeType)?e:"audio/mp4"}constructor(t,i){const e=[];super(t,i,e),this.qA=void 0,this.oCt=void 0,this.SQ=void 0;for(const i of t.tracks)e.push(new Fj(i,t,this))}},zj=class extends Wj{get JRt(){return this.rCt}get Z(){return this.RI}get _Ct(){return this.rCt.captions}er(t){var i;super.er(t),this.SQ=null!=(i=t.mimeType)?i:"video/mp4"}constructor(t,i){const e=[];super(t,i,e),this.SQ=void 0;for(const i of t.tracks)e.push(new Uj(i,t,this))}},Gj=class{get o(){return this.hS}get NRt(){return zd.xm(this.YRt,this.pCt.gCt)}get mCt(){return this.wCt}get MP(){return this.bz}get aQ(){return this.Zf}get yCt(){return this.ACt}get bCt(){return this.SCt}er(t){var i;this.wCt=t.timeBounds,this.Zf=null!=(i=t.events)?i:[],this.bz=t.currentTime?pn(t.currentTime):void 0}constructor(t,i){var e,s,n;this.ACt=[],this.SCt=[],this.pCt=void 0,this.hS=void 0,this.YRt=void 0,this.wCt=void 0,this.bz=void 0,this.Zf=void 0,this.pCt=t,this.hS=i.id,this.YRt=null!=(e=i.baseUrl)?e:"";for(const t of null!=(s=i.audio)?s:[])this.ACt.push(new qj(t,this));for(const t of null!=(n=i.video)?n:[])this.SCt.push(new zj(t,this));this.er(i)}},Xj=class{get hR(){return this.pCt}get TCt(){return this.kCt}get ECt(){return this.PCt}get xCt(){return this.ICt}get RCt(){return this.CCt}get DCt(){return this.BCt}get b0(){return this.vA}get NCt(){return this.MCt}get gCt(){var t;return zd.xm(null!=(t=this.LCt)?t:"",this.OCt)}get FCt(){return this.UCt}er(t){var i;this.kCt=pn(t.availabilityDuration),this.PCt=t.creationDate,this.ICt=t.fallbackPollRate,this.CCt=t.manifestVersion,this.vA=t.streamType,this.MCt=t.activePresentation,this.LCt=t.contentBaseUrl,this.UCt=null==(i=t.timeSource)?void 0:i.url,this.pCt=t;for(const i of t.presentations){const t=Jr(this.BCt,t=>t.o===i.id);t?t.er(i):this.BCt.push(new Gj(this,i))}this.BCt=this.BCt.filter(i=>t.presentations.some(t=>t.id===i.o))}constructor(t,i){this.OCt=void 0,this.pCt=void 0,this.kCt=void 0,this.PCt=void 0,this.ICt=void 0,this.CCt=void 0,this.BCt=[],this.vA=void 0,this.MCt=void 0,this.LCt=void 0,this.UCt=void 0,this.OCt=t,this.pCt=i,this.er(i)}};r(),r();var jj=0,Qj=class extends Ne{get cst(){return!0}get tyt(){return this.VCt.tyt}get kW(){return this.VCt.kW}get frt(){return this.VCt.frt}get o(){return this.VCt.o}get Th(){var t;return null!=(t=this.VCt.Th)?t:""}get jI(){return this.gO}get nyt(){return this.VCt.NRt}get iyt(){}get oQ(){return this.VCt.oQ}get eRt(){return this.VCt.eRt}get NRt(){return this.VCt.NRt}get Km(){return this.VCt.Km}MRt(t){const i=(t-this.VCt.JRt.zst.MP)*this.framesPerSecond();return _.round(this.VCt.QRt+i)}HCt(t){return t+1}BRt(t){var i;let e,s=this.VCt.iCt;for(;e=null==(i=s.match(Mj))?void 0:i.pop();)s=s.split(e).join(Vj(e,t));return s+("now"===t?"?uuid="+FC():"")}qRt(t){var i;let e,s=this.VCt.$Rt;for(;e=null==(i=s.match(Lj))?void 0:i.pop();)s=s.split(e).join(Hj(e,t));return s}QU(){}jU(){}constructor(t){super(),this.VCt=void 0,this.gO=jj++,this.VCt=t}},Kj=class extends Qj{get WCt(){return this.VCt}get $mt(){return this.VCt.BB}get Ht(){return this.FO}framesPerSecond(){return this.VCt.BB/this.VCt.plt}get Ca(){return this.hu||(this.hu=Oq(this)),this.hu}constructor(t,i){super(t),this.FO=void 0,this.hu=void 0,this.FO=i}},Yj=class extends Qj{get WCt(){return this.VCt}get eyt(){return 0}get plt(){return this.VCt.plt}get Mi(){return this.VCt.uCt.height}get Ti(){return this.VCt.uCt.width}get uCt(){return this.VCt.uCt}get Ht(){return this.FO}framesPerSecond(){return this.VCt.plt}get Ca(){return this.hu||(this.hu=Lq(this)),this.hu}constructor(t,i){super(t),this.FO=void 0,this.hu=void 0,this.FO=i}};r();var mn=function(t){return t.qCt="alternative",t.zCt="main",t.GCt="commentary",t.XCt="",t.UU="descriptions",t.jCt="main-desc",t.QCt="translation",t}({}),Ca=function(t){return t.qCt="alternative",t.zCt="main",t.GCt="commentary",t.XCt="",t.FU="captions",t.WI="sign",t.OU="subtitles",t}({}),Jj=0,Zj=class extends Ne{get XI(){return this.KCt()}get Rt(){return this.We}set Rt(t){this.Rt!==t&&(this.We=t,t&&this.YCt(),this.ZCt.JCt(),this.So(new nr(this)))}get Ca(){return this.hu||(this.hu=fo(this)),this.hu}get Jdt(){return this.$Ct}get o(){return this.rCt.o}get jI(){return this.gO}get Th(){var t;return null!=(t=this.rCt.Th)?t:""}get Xk(){return this.Rt?"enabled":"disabled"}set Xk(t){"enabled"===t?this.Rt=!0:"disabled"===t&&(this.Rt=!1)}get KI(){return this.dO}get YI(){return this.dct}set YI(t){this.dct=t,this.ZCt.JCt(),this.So(new Zo(t,this))}wO(t){this.Rt=t}tDt(t){for(const i of this.dO.II)i===t&&this.So(new DW(i))}constructor(t,i,e){super(),this.rCt=void 0,this.ZCt=void 0,this.dO=new Uk,this.$Ct=void 0,this.gO=Jj++,this.We=!1,this.dct=void 0,this.hu=void 0,this.rCt=i,this.ZCt=e,this.$Ct=new iG(t,[]);for(const t of i.Z)this.dO.lO(this.createQuality(t))}},$j=class extends Zj{get Km(){return On.Dk}get Lt(){return mn.zCt}get bs(){return this.rCt.bs}get JRt(){return this.rCt}YCt(){this.ZCt.iDt(this)}KCt(){const t=this.ZCt.eDt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new Kj(t,this)}constructor(t,i){super(Ci.Dk,t,i)}},tQ=class extends Zj{get Km(){return On.Bk}get Lt(){return Ca.zCt}get bs(){return""}get JRt(){return this.rCt}get _Ct(){return this.rCt._Ct}YCt(){this.ZCt.sDt(this)}KCt(){const t=this.ZCt.nDt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new Yj(t,this)}constructor(t,i){super(Ci.Bk,t,i)}};function iQ(t,i,e,s){if(!t)return;const n=function(t,i,e){const s=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"audio/mp4";var r;const e=null!=(r=t.codecs)?r:t.tracks.map(t=>t.codecs)[0];s.push(i+'; codecs="'+e+'"')}return eQ(t,i,s,[],e)}(t,i?[i]:[],!s),r=function(t,i,e){const s=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"video/mp4";var r;const e=null!=(r=t.codecs)?r:t.tracks.map(t=>t.codecs)[0];s.push(i+'; codecs="'+e+'"')}return eQ(t,i,[],s,e)}(t,e?[e]:[],!s),h=kG(n,r);return t.preferredKeySystems&&(null==h?void 0:h.kpt)&&(h.kpt=NG(h.kpt,t.preferredKeySystems)),h}function eQ(t,i,e,s,n){const r=i.map(t=>t.protection).filter(it);if(!r.length)return;const h=r[0].type,o=De(r,t=>t.systems),a=De(o,t=>function(t,i){void 0===i&&(i=!0);const e=[],s=i?function(t){return np.filter(i=>i.Zm===t.toLowerCase())}(t.schemeId):function(t){return sp.filter(i=>i.Zm===t.toLowerCase())}(t.schemeId);for(const i of s)e.push({HH:sQ(t)?t.uri:void 0,kS:i,NW:void 0,BW:t.pssh?[_c(t.pssh).buffer]:[],MW:[]});return e}(t,n));return{aH:t,Ept:{$St:h},kpt:a,tTt:e,iTt:s}}function sQ(t){return t.schemeId===Bg.jm&&void 0!==t.keyFormat&&void 0!==t.keyFormatVersions}r(),r(),r();var nQ;function rQ(t){const i=t.MP,e=t.IP.JM(i);return e?e.An(0)-i:0}nQ="Android"===zd.Cm.Dm?200:300;var hQ=zd.Zs.bp?1:.5,oQ=class{Tn(){1!==this.Ra&&(this.Ra=1,this.rDt=zd.fm(()=>{this.hDt()},nQ),this.oDt.DIt(this.aDt),this.TL.hx?this.uDt.wn(Do.TM,this.cDt):this.cDt())}Xx(){0!==this.Ra&&(this.Ra=0,void 0!==this.rDt&&zd.vm(this.rDt),this.oDt.NIt(this.aDt),this.uDt.mn(Do.SM,this.dDt),this.uDt.mn(Do.TM,this.cDt),this.lDt=void 0,this.uL())}get fDt(){return aQ(this.vDt.eDt,this.vDt.nDt)}async hDt(){await this._Dt,this._Dt=this.gDt(),await this._Dt}pDt(t,i){var e,s;const n=this.mDt(t,i),r=this.wDt.OY;if(r.type===Sa.PERFORMANCE)return n[n.length-1];if(r.type===Sa.QUALITY)return n[0];const h=(null==(e=r.metadata)?void 0:e.bitrate)?1.3*(null==(s=r.metadata)?void 0:s.bitrate):this.oDt.kW;for(const t of n){if(t.yDt<=h)return t}return n[n.length-1]}async gDt(){var t,i;const e=null==(t=this.vDt.eDt)?void 0:t.Ht,s=null==(i=this.vDt.nDt)?void 0:i.Ht,n=this.mDt(e,s);if(0===n.length)return void 0;const r=this.maybeSwitchToTargetQuality(n);if(r)return void await this.ADt(r);const h=this.maybeGetUpSwitch(n);h&&await this.ADt(h)}maybeSwitchToTargetQuality(t){const i=this.fDt;if(t.some(t=>uQ(t,i)))return;const e=this.oDt.kW;for(const i of t){if(i.yDt<=e)return i}return t[t.length-1]}maybeGetUpSwitch(t){var i,e;const s=this.oDt.kW;var n;var r;const h=1.3*((null!=(n=null==(i=this.vDt.eDt)?void 0:i.kW)?n:0)+(null!=(r=null==(e=this.vDt.nDt)?void 0:e.kW)?r:0));let o;for(const i of t)if(i.yDt<s&&i.yDt>h){o={bDt:i,ift:zd.Mg()};break}if(!this.lDt||!uQ(this.lDt.bDt,null==o?void 0:o.bDt))return void(this.lDt=o);const a=zd.Mg()-this.lDt.ift,u=this.lDt.bDt.yDt,c=this.SDt.length>=3&&this.SDt.every(t=>t>u);if(a>1e3&&c){if(this.TL.CL.RL||zd.Zs.pp){const t=2*this.oDt.EW;if(!(rQ(this.TL)>t))return}else{const t=_.max(2*this.oDt.EW+hQ,this.jW.nL.minimumOffset);if(!(rQ(this.TL)>t))return void(this.TDt&&this.TDt.minimumOffset===t||(this.uL(),this.TDt={minimumOffset:t},this.jW.hL(this.TDt)))}return this.lDt.bDt}}async ADt(t,i){void 0===i&&(i=!1),this.lDt=void 0,this.uL();const e=this.fDt;if(e.kDt===t.kDt&&e.EDt===t.EDt)return;const s=t.kDt,n=t.EDt;e.EDt&&n&&e.EDt.kW>n.kW&&i&&(this.oDt.RIt(t.yDt),this.SDt=[]),await this.vDt.PDt(n,s)}uL(){this.TDt&&(this.jW.uL(this.TDt),this.TDt=void 0)}mDt(t,i){let e=[],s=[];var n;t&&(e=(null==(n=t.YI)?void 0:n.length)?t.YI:t.KI.II);if(i){var r;const t=(null==(r=i.YI)?void 0:r.length)?i.YI:i.KI.II,e=t.slice().sort((t,i)=>t.kW-i.kW),n=this.xDt(e);0===n.length&&t.length>0&&n.push(oo(t,t=>t.kW)),s=n}const h=[],o=e.length>0?e:[void 0],a=s.length>0?s:[void 0];for(const t of o)for(const i of a)h.push(aQ(t,i));return function(t){return t.sort((t,i)=>i.yDt-t.yDt)}(h)}xDt(t){const i=Jr(t,t=>t.Mi>=this.TL.Mi&&t.Ti>=this.TL.Ti);return i?t.filter(t=>t.Mi<=i.Mi&&t.Ti<=i.Ti):t.slice()}zg(){this.lDt=void 0,this.uDt.hr(),this.uL()}constructor(t,i,e,s,n,r){this.TL=void 0,this.jW=void 0,this.vDt=void 0,this.IDt=void 0,this.oDt=void 0,this.wDt=void 0,this.uDt=void 0,this.Ra=void 0,this._Dt=void 0,this.rDt=void 0,this.lDt=void 0,this.SDt=void 0,this.TDt=void 0,this.dDt=void 0,this.cDt=void 0,this.aDt=void 0,this.TL=t,this.jW=i,this.vDt=e,this.IDt=s,this.oDt=n,this.wDt=r,this.Ra=0,this._Dt=Promise.resolve(),this.SDt=[],this.TDt=void 0,this.dDt=()=>{var t,i;if(this.IDt.kx)return;const e=null==(t=this.vDt.eDt)?void 0:t.Ht,s=null==(i=this.vDt.nDt)?void 0:i.Ht,n=oo(this.mDt(e,s),t=>t.yDt);n&&(Wr(this.ADt(n,!0)),this.TL.CL.RL&&this.IDt.oR())},this.cDt=()=>{this.uDt.wn(Do.SM,this.dDt),this.uDt.mn(Do.TM,this.cDt)},this.aDt=()=>{if(this.SDt.unshift(this.oDt.kW),this.SDt=this.SDt.slice(0,3),this.lDt){const t=this.lDt.bDt.yDt;this.oDt.kW<t&&(this.lDt=void 0,this.uL())}},this.uDt=new bs(this.TL)}};function aQ(t,i){var e;var s;return{kDt:t,EDt:i,yDt:1.3*((null!=(e=null==t?void 0:t.kW)?e:0)+(null!=(s=null==i?void 0:i.kW)?s:0))}}function uQ(t,i){var e,s,n,r;return void 0===t||void 0===i?t===i:(null==(e=t.kDt)?void 0:e.o)===(null==(s=i.kDt)?void 0:s.o)&&(null==(n=t.EDt)?void 0:n.o)===(null==(r=i.EDt)?void 0:r.o)&&t.yDt===i.yDt}r();var cQ=class t{static async create(i,e,s){const n=await dQ(i,e,s);return new t(n,i,e)}get Oyt(){return(this.RDt.serverTimeMs+(zd.Mg()-this.RDt.localTimeMs))/1e3}get CDt(){return(this.RDt.localTimeMs-this.RDt.serverTimeMs)/1e3}async Ixt(t,i,e){for(;!e.Hg;){await Er(6e5,e);try{this.RDt=await dQ(t,i,e)}catch(t){sa(t)}}}zg(){this.nT.Zg()}constructor(t,i,e){this.RDt=void 0,this.nT=new at,this.RDt=t,this.Ixt(i,e,this.nT.Yg).catch(Ct)}};async function dQ(t,i,e){let[s,n,r]=await lQ(t,i,e);return n>20&&([s,n,r]=await lQ(t,i,e)),{localTimeMs:s,serverTimeMs:r-n/2}}async function lQ(t,i,e){const s=zd.Mg(),n=await i.lk({Uk:X.GET,Yu:t,Yg:e}),r=zd.Mg()-s,h=await n.UT(e);return[s,r,1e3*Number(h)]}var fQ=class extends wp{constructor(){super("seek")}},vQ=function(t){return t.Xz="seek",t}({}),_Q=[d.uo,Do.wI,d._y],gQ=class extends Ne{get hR(){return this.pCt}get IP(){return this.DDt&&this.BDt?this.DDt.IP.Mn(this.BDt.IP):this.DDt?this.DDt.IP:this.BDt?this.BDt.IP:ve.iL()}get eDt(){return this.NDt}get nDt(){return this.MDt}get ht(){return this.YL}get rt(){return this.$L}get LDt(){return this.ODt.Qy}get W(){return this.FDt.Qy}get Sx(){return this.pCt?function(t,i,e){var s;const n=null==(s=t.DCt[0])?void 0:s.MP,r=t.TCt;if(void 0===n||void 0===r)return e>0&&e<Xl?new ve([0,e],[!0,!0]):ve.iL();let h=i.GIt;if(!h){const i=oq(t.ECt).getTime()/1e3;h=n+(Date.now()/1e3-i)}return new ve([h-r,h],[!0,!0])}(this.pCt,this.UDt,this.TL.ct):ve.iL()}async VDt(){this.DDt&&await this.DDt._S(0,1/0),this.BDt&&await this.BDt._S(0,1/0)}Un(){if(!this.Ac.src)throw new Ga(Vo.SOURCE_INVALID,"No src property found in given source.");this.Dpt||(this.Dpt=this.lE(this.rV.Yg).catch(this.e8))}async lE(t){this.So(new Pt);const i=this.Ac.src,e=await this.HDt.Qxt(i,t);this.pCt=new Xj(i,e),this.pCt.FCt&&(this.WDt=await cQ.create(this.pCt.FCt,this.nV,t)),this.qDt();const s=af(this.pCt.DCt,-1);this.createTracksForPresentation(s),this.ODt.Xy(),this.JCt()}iDt(t){for(const i of this.YL.II)i.wO(i===t)}sDt(t){for(const i of this.$L.II)i.wO(i===t)}JCt(){const t=Jr(this.YL.II,t=>t.Rt),i=Jr(this.$L.II,t=>t.Rt),e=this.Rz.pDt(t,i);Wr(this.PDt(e.EDt,e.kDt))}qDt(){if(!this.pCt||"live"!==this.pCt.b0||!this.WDt)return;const t=this.pCt.DCt.filter(t=>t.o===this.pCt.NCt)[0].MP,i=this.WDt.CDt+new Date(this.pCt.ECt).getTime()/1e3;this.UDt.UIt(i,t)}createTracksForPresentation(t){var i,e,s,n;for(const i of null!=(s=t.yCt)?s:[])this.YL.tt(new $j(i,this));for(const i of null!=(n=t.bCt)?n:[])this.$L.tt(new tQ(i,this));null==(i=this.YL.CI(0))||i.wO(!0),null==(e=this.$L.CI(0))||e.wO(!0)}get eR(){return oo([this.zDt,this.GDt].filter(it),t=>t.theolive)}get sR(){return this.zDt}get nR(){return this.GDt}get XDt(){const t=this.UDt.GIt;if(void 0!==t)return t}Tn(){this.jDt=!0,this.QDt()}Xx(){var t;this.jDt=!1,this.KDt().catch(this.e8),"live"===(null==(t=this.hR)?void 0:t.b0)&&(this.YDt(),this.JDt())}YDt(){this.ZDt&&this.ZDt.cancelDownload()}JDt(){this.$Dt&&this.$Dt.cancelDownload()}oR(t){this.m7.Zg(),this.m7=new at,this.w7=Af(i=>this.tBt(t,this.w7,i),this.m7).catch(this.e8)}async tBt(t,i,e){if(i&&await i,await Nc(this.W,e),"live"!==this.pCt.b0)throw new m("The current video source does not support Live playback.");if(ii(e),await this.KDt(),ii(e),this.ZDt&&(this.ZDt.CRt()||this.ZDt.PRt!==(null!=t?t:"now"))){var s;if(this.YDt(),this.DDt){for(;this.DDt.$It;)await Nc(this.DDt.iRt,e);await this.DDt._S(0,1/0)}null==(s=this.ZDt)||s.My(null!=t?t:"now")}if(this.$Dt&&(this.$Dt.CRt()||this.$Dt.PRt!==(null!=t?t:"now"))){var n;if(this.JDt(),this.BDt){for(;this.BDt.$It;)await Nc(this.BDt.iRt,e);await this.BDt._S(0,1/0)}null==(n=this.$Dt)||n.My(null!=t?t:"now")}this.So(new fQ),ii(e),this.w7=void 0,this.QDt()}My(t){this.m7.Zg(),this.m7=new at,this.w7=Af(i=>this.y7(t,this.w7,i),this.m7).catch(this.e8)}async y7(t,i,e){var s,n;i&&await i,await Nc(this.W,e),ii(e),await this.KDt(),ii(e),this.ZDt&&(this.ZDt.CRt()||this.ZDt.PRt!==t)&&this.YDt(),this.$Dt&&(this.$Dt.CRt()||this.$Dt.PRt!==t)&&this.JDt(),this.So(new fQ),ii(e),null==(s=this.ZDt)||s.My(t),null==(n=this.$Dt)||n.My(t),this.w7=void 0,this.QDt()}PDt(t,i){var e,s;return(null==(e=this.ZDt)?void 0:e.kot)===i&&(null==(s=this.$Dt)?void 0:s.kot)===t?Promise.resolve():(this.iBt.Zg(),this.iBt=new at,this.eBt=Af(e=>this.sBt(t,i,this.eBt,e),this.iBt).catch(this.e8),this.eBt)}async sBt(t,i,e,s){var n,r;e&&await e,await Nc(this.ODt.Qy,s),ii(s),await this.KDt(),ii(s),await this.nBt(t,i),await this.rBt(t,i),ii(s);for(const i of null!=(r=null==t||null==(n=t.Ht)?void 0:n._Ct)?r:[])this.hBt.Mgt({nit:i.channel,rit:i.language,Th:i.label});this.eBt=void 0,this.QDt()}async nBt(t,i){var e,s,n;const r=null!=(n=this.XDt)?n:"now";if((null==(e=this.ZDt)?void 0:e.kot)!==i){var h;const t=this.ZDt&&!this.ZDt.CRt(),e=null==(h=this.ZDt)?void 0:h.PRt;if(this.ZDt&&(await this.ZDt.zg(),this.ZDt=void 0),this.DDt&&await this.DDt.iRt,i){var o,a;const s=null!=(a=null==(o=this.DDt)?void 0:o.IP)?a:ve.iL(),n=t?e:s.An(s.V-1);this.ZDt=new Dj(i,this.nV,this._dt),this.ZDt.wn(wj.dRt,t=>this.oBt(Ci.Dk,t)),this.ZDt.My(null!=n?n:r)}}if((null==(s=this.$Dt)?void 0:s.kot)!==t){var u;const i=this.$Dt&&!this.$Dt.CRt(),e=null==(u=this.$Dt)?void 0:u.PRt;if(this.$Dt&&(await this.$Dt.zg(),this.$Dt=void 0),this.BDt&&await this.BDt.iRt,t){var c,d;const s=null!=(d=null==(c=this.BDt)?void 0:c.IP)?d:ve.iL(),n=i?e:s.An(s.V-1);this.$Dt=new Dj(t,this.nV,this._dt),this.$Dt.wn(wj.dRt,t=>this.oBt(Ci.Bk,t)),this.$Dt.My(null!=n?n:r)}}}async rBt(t,i){const e=function(t,i,e,s,n){const r=iQ(t,null==i?void 0:i.Ht.JRt.JRt,null==e?void 0:e.Ht.JRt.JRt,s),h=CG(r),o=[];i&&o.push({qT:i.oQ});e&&o.push({qT:e.oQ});return{Km:Zr.wV,L4:o,aq:h,X4:n&&!s}}(this.Ac.contentProtection,i,t,this.TL.CL.RL,this.Ac.useManagedMediaSource);if(this.iq&&this.iq.TZ(e)){var s,n;const t=!(null==(s=this.ZDt)?void 0:s.CRt());if(this.DDt&&t){for(;this.DDt.$It;)await this.DDt.iRt;await this.DDt.AQ()}const i=!(null==(n=this.$Dt)?void 0:n.CRt());if(this.BDt&&i){for(var r,h;null==(r=this.BDt)?void 0:r.$It;)await this.BDt.iRt;await(null==(h=this.BDt)?void 0:h.AQ())}await this.iq.EZ(e)}else{this.YDt(),this.JDt(),this.DDt&&(await this.DDt.zg(),this.DDt=void 0),this.BDt&&(await this.BDt.zg(),this.BDt=void 0),this.TL.x9();try{await this.TL.hr(),this.iq=await this.TL.Un(e),this.FDt.Xy(),this.iq.Q3&&this.ZDt&&(this.iq.Q3.wn(Zs.lZ,this.Rs),this.DDt=new pj(this.iq.Q3,this.TL,i,this.hBt)),this.iq.K3&&this.$Dt&&(this.iq.K3.wn(Zs.lZ,this.Rs),this.BDt=new pj(this.iq.K3,this.TL,t,this.hBt)),"live"===this.pCt.b0&&this.iq.C4(1/0)}finally{this.TL.I9()}}}QDt(){!this.jDt||this.w7||this.eBt||this.aBt||this.uBt||(this.Rz.Tn(),this.cBt=new at,this.$Dt&&this.BDt&&(this.aBt=this.dBt(this.$Dt,this.BDt,this.cBt.Yg).catch(this.e8)),this.ZDt&&this.DDt&&(this.uBt=this.dBt(this.ZDt,this.DDt,this.cBt.Yg).catch(this.e8)))}async KDt(){this.Rz.Xx(),this.cBt&&(this.cBt.Zg(),this.cBt=void 0),this.aBt&&(await this.aBt,this.aBt=void 0),this.uBt&&(await this.uBt,this.uBt=void 0)}async dBt(t,i,e){for(await this.W;t.$It;)await Nc(t.iRt,e);for(;i.$It;)await Nc(i.iRt,e);if(!t.CRt()){const e=zd.Mg()/1e3,s="now"===t.PRt,{initialization:n,data:r,metadata:h}=await t.DRt(),o={Km:Po.vZ,ck:n},a=r?{Km:Po.vZ,ck:r}:void 0,u=i.IP;!zd.Zs.wp&&!this.TL.CL.RL&&h&&u.An(u.V-1)>h.xet&&await i._S(h.xet,1/0),await i.z2(o),a&&await i.H2(a,h,t.kot);const c=i.IP.UM(u);s&&c.V>0&&this.UDt.OIt(e,c.An(c.V-1))}for(;!t.ERt;){ii(e);const s=t.URt();await Nc(i.appendStream(s,t),e)}}async zg(){this.rV.Zg(),this.Dpt&&await this.Dpt.catch(Ct),this.w7&&(this.m7.Zg(),this.YDt(),this.JDt(),await this.w7.catch(Ct)),this.eBt&&(this.iBt.Zg(),this.YDt(),this.JDt(),await this.eBt.catch(Ct)),await this.KDt(),this.ZDt&&await this.ZDt.zg(),this.$Dt&&await this.$Dt.zg(),this.ZDt=void 0,this.$Dt=void 0,this.FDt.Zg(),this.ODt.Zg(),this.iq&&(await this.TL.hr(),this.iq=void 0),this.DDt=void 0,this.BDt=void 0,this.TL.mn(Do.TM,this.IL),this.TL.mn(_Q,this.updateActiveQualities),this.YL.hr(),this.NDt=void 0,this.$L.hr(),this.MDt=void 0,this.pCt=void 0,this.WDt&&(this.WDt.zg(),this.WDt=void 0),this.jDt=!1}constructor(t,i,e,s,n,r,h,o,a,u,c){super(),this.Ac=void 0,this.nV=void 0,this.HDt=void 0,this.TL=void 0,this.UDt=void 0,this._dt=void 0,this.hBt=void 0,this.jDt=!1,this.lBt=!1,this.Rz=void 0,this.YL=new rs,this.$L=new rs,this.fBt=void 0,this.NDt=void 0,this.MDt=void 0,this.pCt=void 0,this.ODt=new pa,this.WDt=void 0,this.GDt=void 0,this.zDt=void 0,this.jW=void 0,this.iq=void 0,this.Dpt=void 0,this.FDt=new pa,this.rV=new at,this.eBt=void 0,this.iBt=new at,this.w7=void 0,this.m7=new at,this.ZDt=void 0,this.DDt=void 0,this.uBt=void 0,this.$Dt=void 0,this.BDt=void 0,this.aBt=void 0,this.cBt=void 0,this.IL=()=>{this.lBt=!0},this.updateActiveQualities=()=>{var t,i;const e=this.TL.MP,s=null==(t=this.DDt)?void 0:t.YIt(e),n=null==(i=this.BDt)?void 0:i.YIt(e);if(this.NDt!==s&&(this.NDt=s,s))for(const t of this.YL.II)t.tDt(s);if(this.MDt!==n&&(this.MDt=n,n))for(const t of this.$L.II)t.tDt(n)},this.oBt=(t,i)=>{const e=i.data;if(e.Km===Ur.vRt){const{gRt:i,pRt:n,_Rt:r,mRt:h}=e;if(this.WDt){const e=this.WDt.Oyt,s=this.TL.MP;if(this.lBt&&0!==s){const h={theolive:e-i+r-s,engine:n,distribution:_.max(e-(i+n),0),player:_.min(r-s,this.jW.nL.forceSeekOffset)};t===Ci.Dk?(this.GDt=h,this.UDt.qIt(this.WDt.CDt+i,r)):(this.zDt=h,this.UDt.HIt(this.WDt.CDt+i,r))}}var s;if(h)null!=this.fBt||(this.fBt=this.TL.tI(Ao.VU,"timecode","timecode",void 0,!1,nh.DEFAULT,!1,void 0)),this.fBt.tV(new _h(r,r,h,!1,void 0)),St(this.fBt,null!=(s=this.TL.IP.Tn(0))?s:-1)}this.So(i)},this.e8=t=>{D(t)||(this.Xx(),this.So(new Pi(new Ga(Vo.MEDIA_LOAD_ERROR,t.message))))},this.Ac=t,this.HDt=i,this.TL=e,this.nV=n,this.UDt=r,this.Rz=new oQ(e,h,this,a,s,c),this._dt=o,this.hBt=u,this.jW=h,this.TL.wn(Do.TM,this.IL),this.TL.wn(_Q,this.updateActiveQualities)}};r();var pQ=class extends VT{NL(){const t=this.TL.IP;return 0===t.V?0:t.An(t.V-1)-this.TL.MP}oR(){this.oa.oR()}ML(t,i,e){if(t>e+2){const e=t-i;if(e<=this.lastAmountToSeekForward&&!this.oa.kx)return this.oa.MP+=e,this.lastAmountToSeekForward=0,!0;this.lastAmountToSeekForward=e}else this.lastAmountToSeekForward=0;return!1}cL(){return vj(super.cL())}LL(){return!zd.Zs.pp}constructor(t,i,e){super(t,i,e),this.lastAmountToSeekForward=0}},mQ=[d.Jw,d.Qw,d._y,d.Bw,d.Kw,d.gy,d.Rw,d.Lw,d.Nw,d.Pw,d.Ew],wQ=class extends Ne{OI(){this.TL.wn(mQ,this.Rs),this.TL.wn(Do.TM,this.GG),this.TL.wn([d.uo,d.jw],this.vBt),this.TL.wn(Mc.ma,this._Bt),this.TL.wn(d._y,this.bd),this.bq.wn(K,this.Rs)}MI(){this.TL.mn(mQ,this.Rs),this.TL.mn(Do.TM,this.GG),this.TL.mn([d.uo,d.jw],this.vBt),this.TL.mn(Mc.ma,this._Bt),this.TL.mn(d._y,this.bd),this.bq.mn(K,this.Rs)}get ht(){return this.YL}get rt(){return this.$L}get hR(){var t,i;return null==(i=this.vDt)||null==(t=i.hR)?void 0:t.hR}get Mx(){return this.TL.Mx}set Mx(t){this.TL.Mx=t}get Vx(){return!1}set Vx(t){}get hq(){return this.oq}jx(){return!1}Hx(){return this.TL.Ma}Aa(){return this.TL.mq}tI(t){return this.TL.wq(t)}we(){this.TL.we()}be(){return this.TL.be()}Yx(){}Jx(){}Qx(){}Kx(){}get $P(){return this.TL.$P}set $P(t){this.TL.$P=t}get MP(){var t;return null!=(t=this.gBt)?t:this.TL.MP}set MP(t){this.OP(t)}OP(t,i){this.m7.Zg(),this.m7=new at,this.w7=Af(i=>this.y7(t,i,this.w7),this.m7)}get CP(){const t=this.pBt();if(t)return new Date(t.getTime()+1e3*this.MP)}set CP(t){const i=this.pBt();t&&i&&(this.MP=i.getTime()-t.getTime())}pBt(){const t=this.hR;if(!t)return;const i=new Date(t.creationDate).getTime();let e=NaN;for(const i of t.presentations)i.currentTime&&(e=i.currentTime.value/(i.currentTime.scale||1)*1e3);return S(e)?void 0:new Date(i-e)}get bt(){return this.Ac}get ux(){return this.TL.ux}set ux(t){this.TL.ux=t}get ct(){const t=this.TL.ct;return t===Xl?1/0:t}get UP(){return!1}get WP(){return this.ZW}get lt(){return this.JW}get zP(){return this.mBt}get jP(){}get KP(){return!1}get JP(){return Mo({},{iO:0,eO:0,sO:0,nO:0,rO:0,hO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.TL.ZP())}get sx(){return!0}get kx(){return this.Sz}get nq(){}get nt(){return this.Gl}get Rx(){return this.TL.Rx}get Bx(){return this.TL.Bx}get IP(){return this.ikt._s()}get ikt(){return this.vDt?this.vDt.IP:ve.iL()}get _x(){return this.TL._x._s()}get Sx(){var t,i;return null!=(i=null==(t=this.vDt)?void 0:t.Sx._s())?i:ve.iL()._s()}get hx(){return this.$et}get rR(){return!0}get Fx(){return this.Cz}get XDt(){var t;return null==(t=this.vDt)?void 0:t.XDt}get BL(){if(this.hx)return;if(!this.lBt)return;const t=this.MP,i=this.UDt.XIt(t);if(void 0===i)return;const e=this.ikt;let s=0;if(e.V>0){const i=e.An(e.V-1);s=_.max(i-t,0)}return _.max(i,s)}get eR(){var t;return null==(t=this.vDt)?void 0:t.eR}get sR(){var t;return null==(t=this.vDt)?void 0:t.sR}get nR(){var t;return null==(t=this.vDt)?void 0:t.nR}get Ax(){return this.TL.Ax}get mx(){return this.wBt}set mx(t){this.wBt=t,this.yBt()}async yBt(){this.wBt!==q.lz&&this.vDt&&(this.vDt.Un(),this.wBt!==q.OL&&this.wBt!==q.TW||(await this.vDt.LDt,"vod"===this.vDt.hR.b0&&this.vDt.Tn()))}async Ta(t,i,e){if(ii(e),await this.hr(),ii(e),!rk(t))return this.ZW=new Ga(Vo.SOURCE_INVALID,"HESP source incorrectly configured"),this.JW=P(this.ZW),this.ABt(this.ZW),Promise.resolve();const s=t;this.Ac=s;const n=new YX(this.nV);this.bBt=this.SBt(t),this.jW=new pQ(this,this.TL,this.bBt),this.jW.Rt=!0,this.jW.wn("latencyrecoveryseek",this.Rs),this.Fx.Ea(this.jW),this.vDt=new gQ(s,n,this.TL,this.oq,this.nV,this.UDt,this.jW,this._dt,this,this.hBt,this.Rz),this.vDt.wn(d.Ww,this.Rs),this.vDt.wn(Mc.ma,this.TBt),this.YL.BI=this.vDt.ht,this.$L.BI=this.vDt.rt,this.lq.IW(t.contentProtection),Wr(this.yBt())}Px(t,i,e,s){return Promise.resolve()}xx(){return Promise.resolve()}SBt(t){return t.latencyConfiguration?t.latencyConfiguration:_j()}async Gx(){var t;if(!this.vDt)return;this.$et=!1,this.vDt.Un(),await this.vDt.W,this.So(new Tc(this.MP));const i=this.vDt.ww(vQ.Xz);this.oR(),await i,this.vDt.Tn(),await this.TL.Gx(),null==(t=this.jW)||t.Tn()}zx(){var t;this.vDt&&(this.$et=!0,this.So(new hl(this.MP)),this.vDt.Xx(),null==(t=this.jW)||t.Xx(),this.TL.zx())}oR(){if(this.NEt)throw new m("Cannot seek while resetting");this.m7.Zg(),this.m7=new at,this.w7=Af(t=>this.tBt(this.w7,t),this.m7)}async y7(t,i,e){if(this.NEt)throw new m("Cannot seek while resetting");let s=t;if(this.kBt(s),this.Sx.length>0&&(s=ve.jn(this.Sx).DM(s),this.kBt(s)),this.vDt){e&&(await e.catch(Ct),ii(i));try{const t=this.TL.ww(d.Zw,i);this.TL.My(s),this.vDt.My(s),await t}catch(t){throw sa(t),this.vDt.Xx(),this.EBt(),t}this.PBt()}}async tBt(t,i){this.So(new wp("golive"));const e=this.XDt;if(this.kBt(e),this.vDt){t&&(await t.catch(Ct),ii(i));try{let t,s=this.jW.nL.targetOffset;if(await this.vDt.LDt,e&&s>=1){if(!this.jW.LL()){s-=_.min(1,.5*s)}t=e-s}else t=this.XDt?this.XDt-.2:void 0;for(this.vDt.oR(t);this.ikt.V>0;)await this.vDt.ww(Zs.lZ,i);const n=this.ikt;for(;0===this.ikt.UM(n).V;)await this.vDt.ww(Zs.lZ,i);t=this.ikt.Tn(this.ikt.V-1),t=this.xBt(t),this.kBt(t);const r=this.TL.ww(d.Zw,i);this.TL.My(t,!0),await r}catch(t){var s;if(D(t))throw null==(s=this.jW)||s.Tn(),t;throw this.vDt.Xx(),await this.vDt.VDt(),this.EBt(),t}this.PBt()}}kBt(t){this.Sz=!0,this.gBt=t,this.So(new F(this.MP))}PBt(){this.Sz&&(this.gBt=void 0,this.Sz=!1,this.So(new Es(this.MP)))}EBt(){this.gBt=void 0,this.Sz=!1}xBt(t){return t}IBt(){var t;null==(t=this.vDt)||t.Xx()}ABt(t){this.So(new Pi(t)),this.IBt()}async MEt(t,i,e){var s;ii(e),null==(s=this.jW)||s.Xx(),t&&await t.catch(Ct),i&&await i.catch(Ct),await this.hBt.hr(),this.vDt&&(await this.vDt.zg(),this.vDt=void 0),ii(e),await this.TL.hr(),ii(e),this.TL.Aq(),this.$L.hr(),this.YL.hr(),this.EBt(),this.bq.hr(),this.UDt.hr(),this.ZW=void 0,this.JW=void 0,this.$et=!0,this.lBt=!1,this.Ac=void 0,this.NEt=void 0,this.bBt=void 0}hr(){return this.m7.Zg(),this.m7=new at,this.RBt.Zg(),this.RBt=new at,this.NEt=this.MEt(this.w7,this.NEt,this.RBt.Yg).catch(t=>yf(t)),this.NEt}async kn(){var t,i;this.MI(),this.bq.kn(),this.kq.zg(),this.Ac&&await this.hr(),this.Vo(),this.TL.Eq=void 0,null==(t=this.jW)||t.mn("latencyrecoveryseek",this.Rs),null==(i=this.jW)||i.zg(),await this.hBt.kn(),this.Gl.kn(),this.YL.kn(),this.$L.kn()}constructor(t,i,e,s,n){var r;super(),this.TL=void 0,this.nV=void 0,this.oq=void 0,this.kq=void 0,this.bq=void 0,this.jW=void 0,this.lq=void 0,this.UDt=void 0,this.Cz=void 0,this.mBt=void 0,this._dt=void 0,this.Rz=void 0,this.Ac=void 0,this.vDt=void 0,this.Sz=!1,this.gBt=void 0,this.m7=new at,this.w7=void 0,this.NEt=void 0,this.RBt=new at,this.$et=!0,this.lBt=!1,this.YL=new He,this.$L=new He,this.Gl=void 0,this.hBt=void 0,this.ZW=void 0,this.JW=void 0,this.wBt=q.lz,this.bBt=void 0,this.bd=()=>{const t=this.IP;t.length>0&&this.hBt.qU(t.start(0))},this.vBt=()=>{this.TL.hx!==this.$et&&(this.TL.hx?this.zx():this.Gx().catch(Ct))},this.GG=()=>{this.lBt=!0},this.TBt=t=>{this.ZW=t.errorObject,this.JW=P(this.ZW),this.ABt(this.ZW)},this._Bt=t=>{this.ZW=Ok(t.lt),this.JW=t.lt,this.ABt(this.ZW)},this.TL=t,this.kq=new dx(this,this.TL),this.bq=new bs(this.kq,!0),this.nV=i,this.Rz=e,this.oq=new hj(e.WY,e.kY.EW),this.lq=new ya(i),this.TL.Eq=this.lq,n.allowNativeFullscreen?this.hBt=new TW(this.TL):this.hBt=new kW(this.TL),this.Gl=new Yu([this.hBt.Z]),this.UDt=new oj,this.mBt=new JX(this),this.Cz=s,this._dt=Mo({},n.retryConfiguration,{maxRetries:null!=(r=n.retryConfiguration.maxRetries)?r:3}),this.OI()}},yQ=class extends wQ{So(t){if(this.CBt){if(t.type===d.Zw)return void this.DBt();if(t.type===Do.SM||t.type===d.$w||t.type===Do.TM)return void this.BBt.push(t)}super.So(t)}DBt(){this.CBt=!1,void 0!==this.NBt&&zd.Lg(this.NBt);const t=Jr(this.BBt,t=>t.type===Do.TM);t&&super.So(t),Yo(this.BBt)}Wx(){if(PU(this.TL))return this.TL.Wx()}async hr(){this.MBt=!1,this.DBt(),await super.hr()}async kn(){h.removeEventListener("visibilitychange",this.LBt),this.DBt(),await super.kn(),await this.TL.zg(),await this.xq.Pq(this.OBt)}xBt(t){return Qt.X_&&Qt.Q_>=15&&Qt.Kv?t+.25:t}constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.xq=void 0,this.OBt=void 0,this.MBt=!1,this.CBt=!1,this.BBt=[],this.NBt=void 0,this.LBt=()=>{const t=this.$P||0===this.Mx;"hidden"!==h.visibilityState||this.hx||!t||this.Aa().XL?"visible"===h.visibilityState&&this.MBt&&(this.CBt=!0,this.NBt=zd.Og(()=>{for(const t of this.BBt)super.So(t);this.NBt=void 0,this.CBt=!1},2e3),Wr(this.Gx()),this.MBt=!1):(this.zx(),this.MBt=!0)},this.xq=n,this.OBt=t,Qt.Cg&&h.addEventListener("visibilitychange",this.LBt)}};r();var AQ=class{get Kq(){return V._R}async Xq(t,i){return function(t){if(!t)return!1;const i=t.toLowerCase();return Vh(i,Ba.vR)||Vh(i,Ba._R)}(t.type)}async jq(t){return kT(t)}};cs(new class extends AQ{PR(t,i,e,s,n,r,h){const o=new Ss(i),a=o.Gq(Ci.Bk);return new yQ(a,e,n,r,o,s)}Xq(t,i){return zd.dP&&VA?Qt.w_||Qt.S_||Qt.D_?Promise.resolve(!1):za(t.useManagedMediaSource)?super.Xq(t,i):Promise.resolve(!1):Promise.resolve(!1)}Qq(){return!1}}),r(),r();var bQ=class extends wQ{Wx(){if(PU(this.TL))return this.TL.Wx()}async kn(){await super.kn(),await this.xq.Pq(this.TL)}constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.xq=void 0,this.xq=n}};Qt.X_&&Qt.ru&&cs(new class extends AQ{get Kq(){return V.bW}async Xq(t,i){var e,s;if(Qt.IS_IOS_CHROME)return!1;const n=await super.Xq(t,i);var r;if(null==(r=null==(s=gr())||null==(e=s.canPlayType)?void 0:e.call(s,Ba.dR))||!r||!n||!("serviceWorker"in od))return!1;try{const t=od.serviceWorker.ready;return await Sf(t,1e3),!0}catch(t){return!1}}async jq(t){return!!t.fairplay&&await super.jq(t)}PR(t,i,e,s,n,r,h){if(t instanceof HTMLDivElement){const t=i.dst(Ci.Bk);return new bQ(t,e,n,r,i,s)}throw new Ga(Vo.CONFIGURATION_ERROR,"Container Div element expected.")}Qq(){return!1}}),r(),r(),r(),r();var SQ="theo_live_user_id",TQ=class{incrementSequenceNumber(){this.yb+=1}get sequenceNumber(){return this.yb}constructor(t){this.externalId=void 0,this.id=void 0,this.userId=void 0,this.yb=void 0,this.externalId=t,this.id=FC(),this.userId=kQ(),this.yb=0}};function kQ(){try{const t=localStorage.getItem(SQ);if(t)return t;const i=FC();return localStorage.setItem(SQ,i),i}catch(t){return FC()}}function EQ(t){var i;return{hespSrc:t.hespSrc,type:"theo.live",hlsSrc:t.hlsSrc,maxMobileBitrate:t.maxMobileBitrate,targetLatency:null==(i=t.metadata.customization)?void 0:i.targetLatency,contentProtection:t.drmConfig?t.drmConfig:void 0}}function PQ(t){const{integration:i,widevine:e,playready:s,fairplay:n}=t;return Mo({integration:i},e&&{widevine:{licenseAcquisitionURL:e.licenseUrl}},s&&{playready:{licenseAcquisitionURL:s.licenseUrl}},n&&{fairplay:{licenseAcquisitionURL:n.licenseUrl,certificateURL:n.certificateUrl}})}function xQ(t,i){return{id:t.id,name:t.name,deleted:"deleted"===t.status,targetLatency:t.source.targetLatency,maxMobileBitrate:t.source.maxMobileBitrate,endpoints:[{hespSrc:t.source.hespSrc,hlsSrc:t.source.hlsSrc,weight:1,priority:1,contentProtection:t.source.contentProtection},t.fallback&&i?{hespSrc:t.fallback.hespSrc,hlsSrc:t.fallback.hlsSrc,weight:1,priority:2,contentProtection:t.fallback.contentProtection}:void 0].filter(it)}}function IQ(t){return void 0!==t.mode}r(),r(),r(),r();var kn=function(t){return t.STARTING="s",t.PLAYING="p",t.SEEKING="k",t.REBUFFERING="r",t.PAUSED="a",t.ENDED="e",t.QUIT="q",t}({}),RQ=function(t){return t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.OTHER="o",t}({});function CQ(t){return 100*_.round(t/100)}function DQ(t){const i=t.LP(),e=t.RP();for(let t=0;t<e.length;t++)if(e.start(t)<=i&&i<=e.end(t))return 1e3*(e.end(t)-i);return 0}function Rt(t){return Jr(t.II,t=>t.Rt)}function BQ(t){return oo(t.KI.II,t=>t.kW)}function NQ(t){return lf(t.KI.II,t=>t.kW)}r(),r();var Yi=class t{static starting(i,e,s){return new t(kn.STARTING,i,e,s)}static playing(i){return new t(kn.PLAYING,i)}static seeking(i,e){return new t(kn.SEEKING,i,e)}static rebuffering(i,e){return new t(kn.REBUFFERING,i,e)}static paused(i){return new t(kn.PAUSED,i)}static ended(i){return new t(kn.ENDED,i)}static quit(i){return new t(kn.QUIT,i)}get ct(){return Date.now()-this.FBt}UBt(){const t=this.oa.oX.kY.kW,i=this.oa.Fx.BL,e=DQ(this.oa);t>0&&void 0!==e&&void 0!==i&&(this.VBt+=1,this.HBt=this.WBt(this.HBt,e),this.qBt=this.WBt(this.qBt,1e3*this.oa.Fx.Cd.targetOffset),this.rq=this.WBt(this.rq,1e3*i),this.zBt=this.WBt(this.zBt,t/1e3))}WBt(t,i){return t+(i-t)/this.VBt}PR(){const t={sta:this.Vp,ts:this.FBt,"theo-vt":this.GBt,"theo-at":this.XBt,"theo-d":this.ct,"theo-r":this._f,"theo-e":this.JW};return this.VBt>0?Mo({},t,{bl:CQ(this.HBt),tbl:CQ(this.qBt),ltc:CQ(this.rq),mtp:CQ(this.zBt),"theo-w":this.VBt}):t}jBt(){return new t(this.Vp,this.oa,this._f)}constructor(t,i,e,s){var n,r,h,o;this.Vp=void 0,this.FBt=Date.now(),this.HBt=0,this.qBt=0,this.GBt=void 0,this.XBt=void 0,this.rq=0,this.zBt=0,this.VBt=0,this._f=void 0,this.JW=void 0,this.oa=void 0,this.Vp=t,this.oa=i,this.GBt=null==(r=Rt(this.oa.rt))||null==(n=r.XI)?void 0:n.o,this.XBt=null==(o=Rt(this.oa.ht))||null==(h=o.XI)?void 0:h.o,this._f=e,this.JW=s}},MQ=class{QBt(){var t;const i=this.oa.Fx.BL,e=DQ(this.oa),s=this.oa.oX.kY.kW;return LQ({bl:void 0!==e?CQ(e):void 0,tbl:CQ(1e3*this.oa.Fx.Cd.targetOffset),ltc:void 0!==i?CQ(1e3*i):void 0,mtp:void 0!==s?CQ(s/1e3):void 0,sta:null==(t=this.KBt)?void 0:t.Vp,su:!this.lBt||void 0,"theo-sq":this.YBt.sequenceNumber})}JBt(t){var i,e;const s=function(t,i){switch(i){case RQ.VIDEO:return Rt(t.rt);case RQ.AUDIO:return Rt(t.ht)}}(this.oa,t);return LQ({br:(null==s||null==(i=s.XI)?void 0:i.kW)?CQ((null==s||null==(e=s.XI)?void 0:e.kW)/1e3):void 0,ot:t,tb:s?CQ(NQ(s).kW/1e3):void 0,lb:s?CQ(BQ(s).kW/1e3):void 0})}ZBt(){return LQ({"theo-cw":this.oa.xe.clientWidth,"theo-ch":this.oa.xe.clientHeight,"theo-m":this.oa.$P,"theo-vo":_.ceil(100*this.oa.Mx)})}$Bt(){var t;return LQ({sf:OQ(this.oa.bt),sid:this.YBt.id,st:"l",v:2,"theo-eid":null==(t=this.YBt.externalId)?void 0:t.substring(0,128),"theo-cn":this.tNt.name.substring(0,128),"theo-v":"10.0.0","theo-t":"web","theo-u":this.YBt.userId})}iNt(){const t={"CMCD-States":btoa(JSON.stringify(this.eNt))};return this.eNt=[],t}sNt(t){this.KBt&&this.eNt.push(this.KBt.PR()),this.KBt=t}async nNt(){this.KBt&&(this.eNt.push(this.KBt.PR()),this.KBt=void 0),this.eNt.push(Yi.quit(this.oa).PR());const t=Mo({},this.iNt(),{"CMCD-Session":this.$Bt()}),i=await this.oa.SP.lk({Yu:this.rNt,fk:t,Qk:!0});await i.ck()}destroy(){this.hNt(),s.removeEventListener("beforeunload",this.hNt),this.oa.mn(Do.TM,this.IL),this.oa.mn(Do.SM,this.xL),this.oa.mn(d.jw,this.oNt),this.oa.zP.mn("latencyrecoveryseek",this.aNt),this.oa.zP.mn("golive",this.uNt),this.oa.rt.mn(Vt.eI,this.GW),this.oa.ht.mn(Vt.eI,this.GW),this.oa.rt.II.forEach(t=>t.mn(Te.TI,this.ih)),this.oa.ht.II.forEach(t=>t.mn(Te.TI,this.ih)),this.oa.tnt.removeEventListener("intenttofallback",this.cNt),this.oa.tnt.removeEventListener("distributionloadstart",this.dNt),this.oa.tnt.removeEventListener("distributionoffline",this.lNt),this.oa.oX.wY(this.fNt),zd.vm(this.vNt)}constructor(t,i,e){this.oa=void 0,this.tNt=void 0,this.rNt=void 0,this.vNt=void 0,this.YBt=void 0,this.eNt=[],this.KBt=void 0,this.lBt=!1,this.nX=!1,this.cNt=t=>{var i,e,s;this.sNt(Yi.starting(this.oa,"fallback",null!=(s=null==(i=t.reason)?void 0:i.message)?s:null==(e=this.oa.qP())?void 0:e.message))},this.dNt=()=>{this.sNt(Yi.starting(this.oa,"loadChannel"))},this.lNt=()=>{this.sNt(Yi.ended(this.oa))},this.GW=t=>{t.Ht.wn(Te.TI,this.ih)},this.ih=()=>{var t,i,e,s;const n=null==(i=Rt(this.oa.rt))||null==(t=i.XI)?void 0:t.o,r=null==(s=Rt(this.oa.ht))||null==(e=s.XI)?void 0:e.o;n&&r&&(this.KBt&&this.KBt.Vp===kn.PLAYING&&this.KBt.GBt===n&&this.KBt.XBt===r||this.sNt(Yi.playing(this.oa)))},this.IL=()=>{this.lBt=!0,this.nX=!1,this.sNt(Yi.playing(this.oa))},this.aNt=()=>{this.lBt&&!this.nX&&(this.nX=!0,this.sNt(Yi.seeking(this.oa,"latencyRecovery")))},this.uNt=()=>{this.lBt&&!this.nX&&(this.nX=!0,this.sNt(Yi.seeking(this.oa,"goLive")))},this.xL=()=>{this.oa.kx||this.sNt(Yi.rebuffering(this.oa,"visible"===h.visibilityState?void 0:"invisible"))},this.oNt=()=>{this.sNt(Yi.paused(this.oa))},this.fNt=t=>{const i=zd.Dh(t.url),e=function(t){const{pathname:i}=t;if(Ju(i,"manifest.json"))return RQ.MANIFEST;if(Ho(i,"/video/"))return RQ.VIDEO;if(Ho(i,"/audio/"))return RQ.AUDIO;return RQ.OTHER}(i);if(e===RQ.OTHER)return;this.YBt.incrementSequenceNumber();let s=Mo({},t.headers,{"CMCD-Request":this.QBt(),"CMCD-Object":this.JBt(e),"CMCD-Status":this.ZBt(),"CMCD-Session":this.$Bt()});e===RQ.VIDEO&&!Ju(i.pathname,".hspi")&&this.KBt&&(this.sNt(this.KBt.jBt()),s=Mo({},s,this.iNt())),t.redirect(Mo({},t,{headers:s}))},this.hNt=()=>{Wr(this.nNt())},this.oa=t,this.tNt=i,this.YBt=e;const n=i.endpoints[0],r=(null==n?void 0:n.hespSrc)||(null==n?void 0:n.hlsSrc)||"";this.rNt=zd.Dh("bye",r).href,s.addEventListener("beforeunload",this.hNt),this.oa.wn(Do.TM,this.IL),this.oa.wn(Do.SM,this.xL),this.oa.wn(d.jw,this.oNt),this.oa.zP.wn("latencyrecoveryseek",this.aNt),this.oa.zP.wn("golive",this.uNt),this.oa.oX.gY(this.fNt),this.oa.rt.wn(Vt.eI,this.GW),this.oa.ht.wn(Vt.eI,this.GW),this.oa.tnt.addEventListener("intenttofallback",this.cNt),this.oa.tnt.addEventListener("distributionloadstart",this.dNt),this.oa.tnt.addEventListener("distributionoffline",this.lNt),this.KBt=Yi.starting(this.oa,"loadchannel"),this.vNt=zd.fm(()=>{var t;null==(t=this.KBt)||t.UBt()},1e3)}};function LQ(t){return w.keys(t).map(i=>function(t,i){switch(typeof i){case"boolean":return i?t:t+"=false";case"number":return t+"="+i;case"string":return t+'="'+i+'"';default:return}}(i,t[i])).filter(Boolean).sort().join(",")}function OQ(t){if(t)return t.type===Ba.dR||t.type===Ba.lR?"h":t.type===Ba._R?"e":void 0}var FQ=class extends Ga{constructor(t,i,e){super(t,"Could not load channel with id "+i+": "+e),this.channelId=void 0,this.reason=void 0,this.channelId=i,this.reason=e}},UQ=class extends FQ{constructor(t){super(Vo.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel could not be found")}},VQ=class extends FQ{constructor(t){super(Vo.THEO_LIVE_CHANNEL_NOT_FOUND,t,"This account has been locked")}},HQ=class extends FQ{constructor(t){super(Vo.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel got deleted")}},WQ=class{Bgt(t){const i=this._Nt.get(t);if(i)return i;const e=new qQ(t,this.nV,this.gNt);return this._Nt.set(t,e),e}constructor(t,i){this.nV=void 0,this.gNt=void 0,this._Nt=void 0,this.nV=t,this.gNt=i,this._Nt=new Map}},qQ=class{get pNt(){return ku()-this.mNt>36e5}er(){this.wNt=!1,this.mNt=ku(),this.yNt=this.RSt(),this.yNt.catch(()=>this.wNt=!0)}async RSt(){for(const i of this.gNt.discoveryUrls){const e=await this.ANt(this.hS,i,this.bNt);if(e){if(IQ(e)){const{mode:s,status:n,fallback:r,metadata:h}=e;if("locked"===s)throw new VQ(this.hS);if("deleted"===n)throw new HQ(this.hS);var t;return xQ({id:this.hS,name:h.name,mode:s,status:n,source:EQ(e),fallback:r?await this.SNt(r,i,this.bNt):void 0,insights:null==h?void 0:h.insights,enhancedLogging:null==h?void 0:h.enhancedLogging,customization:null==h?void 0:h.customization,sseEndpoint:e.sseEndpoint},null==(t=this.gNt.fallbackEnabled)||t)}return e}}throw new UQ(this.hS)}async SNt(t,i,e){if("theo.live"!==t.type)return{hespSrc:t.src,type:t.type};const s=await this.ANt(t.src,i,e);return s?EQ(s):void 0}async ANt(t,i,e){try{const s=zd.Dh(t,i);s.searchParams.set("osName",function(){const t=zd.Zs.ap;if("ios"===t||"macos"===t)return"apple";return t}()),s.searchParams.set("deviceType",zd.Zs.cp),s.searchParams.set("sdkType","web");const n=await this.nV.lk({Yu:s.toString(),fk:e});return await n.FT()}catch(t){return}}get TNt(){return(this.wNt||this.pNt)&&this.er(),this.yNt}constructor(t,i,e){var s;this.hS=void 0,this.nV=void 0,this.gNt=void 0,this.mNt=void 0,this.yNt=void 0,this.wNt=void 0,this.bNt=void 0,this.hS=t,this.nV=i,this.gNt=e,this.bNt=new Ra,this.gNt.discoveryHeader&&this.bNt.append("x-theolive-discovery",this.gNt.discoveryHeader),this.bNt.set("CMCD-Session",LQ({sid:this.gNt.sessionId,st:"l",v:2,"theo-eid":null==(s=this.gNt.externalSessionId)?void 0:s.substring(0,128),"theo-v":"10.0.0","theo-t":"web","theo-u":this.gNt.userId})),this.er()}};r();var zQ=class extends wp{constructor(t){super("distributionloadstart"),this.distributionId=void 0,this.distributionId=t}},GQ=class extends wp{constructor(t){super("distributionoffline"),this.distributionId=void 0,this.distributionId=t}},XQ=class extends wp{constructor(t){super("endpointloaded"),this.endpoint=void 0,this.endpoint=t}},jQ=class extends wp{constructor(t){super("intenttofallback"),this.reason=void 0,this.reason=t}},QQ=class extends wp{constructor(){super("enterbadnetworkmode")}},KQ=class extends wp{constructor(){super("exitbadnetworkmode")}},YQ=class extends Ne{get Ca(){return this.hu||(this.hu=function(t){return{addEventListener(i,e){t.wn(i,e)},removeEventListener(i,e){t.mn(i,e)},get badNetworkMode(){return t.kNt},set badNetworkMode(i){t.kNt=i},get authToken(){return t.ENt},set authToken(i){t.ENt=i},preloadPublications:async i=>(await t.PNt(i)).map(t=>({name:t.name}))}}(this)),this.hu}get kNt(){return this.oa.kNt}set kNt(t){this.oa.kNt=t}get ENt(){return this.oa.ENt}set ENt(t){this.oa.ENt=t}PNt(t){return this.oa.PNt(t)}constructor(t){super(),this.oa=void 0,this.hu=void 0,this.oa=t}};var JQ=["https://discovery.theo.live/channels/"],ZQ=8e5,$Q=class extends Oc{xNt(){this.oa.zP.wn("latencyrecoveryseek",this.aNt),this.oa.rt.wn(Vt.eI,this.GW)}INt(){this.oa.zP.mn("latencyrecoveryseek",this.aNt),this.oa.rt.mn(Vt.eI,this.GW)}$x(t){if(!this.jDt||this.JW||this.Lz)return super.$x(t);if(t.type===Do.TM)return void 0!==this.RNt?(zd.Lg(this.RNt),this.RNt=void 0,this.lBt||this.So(new ce(this.LP()))):this.So(new ce(this.LP())),this.CNt=0,this.lBt=!0,!0;if(t.type===Do.SM)return this.RNt||(this.RNt=zd.Og(()=>{this.So(new ux(this.LP())),this.RNt=void 0},100)),!0;if(t.type===Mc.ma){var i;this.CNt++;const e=(null==(i=this.fz)?void 0:i.src)&&nK(this.fz.src),s=this.CNt>5;return e||s?(this.dispatchErrorEvent(t.errorObject),!0):(this.DNt.So(new jQ(t.errorObject)),Wr(this.BNt()),!0)}if(t.type===d.uo){if(this.NNt=zd.Mg(),void 0===this.MNt&&(this.MNt=zd.fm(()=>{var t;zd.Mg()-(null!=(t=this.NNt)?t:0)>15e3&&(this.DNt.So(new jQ(new Ga(Vo.THEO_LIVE_UNKNOWN_ERROR,"Indefinite stall detected"))),Wr(this.BNt()))},1e3)),this.oa.bt&&(this.LNt=!1),this.LNt)return!0}else if(t.type===d.jw){if(void 0!==this.MNt&&(zd.vm(this.MNt),this.MNt=void 0),this.oa.bt&&(this.LNt=!0),!this.LNt)return!0}else t.type===d._y?this.NNt=zd.Mg():t.type===Do.bM?this.ONt&&(!function(t,i){const e=Jr(t.rt.II,t=>t.o===i.enabledVideoTrackId),s=Jr(t.rt.II,t=>t.Rt);if(e){var n;s&&s.o===e.o||(e.Rt=!0),e.YI=null==(n=i.targetVideoQualities)?void 0:n.map(t=>Jr(e.KI.II,i=>i.o===t)).filter(it)}else s&&(s.Rt=!1);const r=Jr(t.ht.II,t=>t.o===i.enabledAudioTrackId),h=Jr(t.ht.II,t=>t.Rt);r?h&&h.o===r.o||(r.Rt=!0):h&&(h.Rt=!1);for(const e of t.nt.II){var o;const t=null!=(o=i.textTrackModes.get(e.o))?o:xh.Nh;e.Xk!==t&&(e.Xk=t)}}(this.oa,this.ONt),this.ONt=void 0):t.type===d.ey&&(this.DNt.So(new jQ(new Ga(Vo.THEO_LIVE_UNKNOWN_ERROR,"manifest not found"))),Wr(this.BNt()));return super.$x(t)}int(){return this.DNt.Ca}HP(){return this.jDt?this.Lz:super.HP()}qP(){return this.jDt?this.JW:super.qP()}get kNt(){return this.FNt}set kNt(t){this.jDt&&(t?this.UNt():this.VNt())}UNt(){if(this.FNt)return;if(this.FNt=!0,this.DNt.So(new QQ),0===this.oa.rt.V)return;const t=this.rt.CI(0),i=ff(t.KI.II,t=>t.kW);var e;(null!=(e=i.tyt)?e:i.kW)<ZQ?(t.YI=[i],Promise.resolve().then(()=>t.YI=t.KI.II.slice())):this.VNt()}VNt(){if(!this.FNt)return;if(this.FNt=!1,this.DNt.So(new KQ),0===this.oa.rt.V)return;const t=this.oa.rt.CI(0);var i;const e=tK(null!=(i=t.YI)?i:t.KI.II);t.YI=e.length>0?e:tK(t.KI.II)}get ENt(){return this.HNt}set ENt(t){this.HNt=t,this.oa.oX.wY(this.WNt),this.HNt&&this.oa.oX.gY(this.WNt)}PNt(t){return Promise.all(t.map(async t=>{const i=this.qNt.Bgt(t);return await Nc(i.TNt,this.nT.Yg)}))}nu(){var t;return null!=(t=this.Ac)?t:super.nu()}async Ta(t,i){var e;this.jDt=!1;for(const s of null!=(e=null==t?void 0:t.sources)?e:[])if(lk(s)&&s.type===Ba.pR&&s.src){if(this.jDt=!0,this.Ac=t,this.fz=s,this.DNt.So(new zQ(s.src)),this.xNt(),nK(s.src)){const e=Mo({},t,{sources:[Mo({},s,{type:Ba._R,useManagedMediaSource:!0})]});return void await super.Ta(e,i)}this.zNt=this.qNt.Bgt(s.src);try{const t=await this.zNt.TNt;return this.tNt=t,void(this.GNt.analyticsEnabled&&(this.XNt=new MQ(this,t,this.YBt)))}catch(t){throw sa(t),this.jNt(),t}}return await super.Ta(t,i)}ox(){return this.jDt?this.LNt:super.ox()}Gx(){this.n7||(this.n7=!0,this.QNt(!1)),this.LNt=!1,super.Gx()}zx(){this.LNt=!0,super.zx()}async BNt(){null!=this.ONt||(this.ONt=function(t){var i,e;const s=Jr(t.rt.II,t=>t.Rt),n=null==s?void 0:s.o,r=null==s||null==(i=s.YI)?void 0:i.map(t=>t.o),h=null==(e=Jr(t.ht.II,t=>t.Rt))?void 0:e.o,o=qh();return t.nt.II.forEach(t=>o.set(t.o,t.Xk)),{enabledVideoTrackId:n,targetVideoQualities:r,enabledAudioTrackId:h,textTrackModes:o}}(this.oa)),await this.oa.Xx().catch(Ct),this.QNt(!0)}QNt(t){if(!this.zNt)return;if(this.KNt)return;this.jNt();const i=()=>{this.KNt=void 0};this.KNt=this.YNt(this.zNt,t).then(i).catch(i)}async YNt(t,i){i&&t.er();const e=await t.TNt;this.tNt=e;const s=await this.selectEndpoint(e,this.JNt);if(this.JNt=s,s){const t=this.convertEndpointToSource(e,s);try{await this.oa.Ta(t,(new at).Yg)}catch(t){return this.dispatchErrorEvent(t),void this.jNt()}this.DNt.So(new XQ(s)),this.LNt||this.oa.Gx()}else this.DNt.So(new GQ(e.id)),this.ZNt=zd.Og(()=>this.QNt(!0),15e3)}convertEndpointToSource(t,i){var e,s;const n={sources:[this.getHespSource(t,i),this.getHlsSource(i)].filter(it),ads:this.lBt?[]:null==(e=this.Ac)?void 0:e.ads,blockContentIfAdError:null==(s=this.Ac)?void 0:s.blockContentIfAdError,streamType:"live"};if(i.adSrc||i.daiAssetKey){var r;const t=null!=(r=n.ads)?r:[],e=t.filter(t=>"theoads"===t.integration);e.length>0?e.forEach(t=>{const e=t;var s,n;e.sseEndpoint=null!=(s=i.adSrc)?s:e.sseEndpoint,e.daiAssetKey=null!=(n=i.daiAssetKey)?n:e.daiAssetKey}):t.push({integration:"theoads",sseEndpoint:i.adSrc,daiAssetKey:i.daiAssetKey}),n.ads=t}const h=Cn(n);return h.sources[0].bypassLicense=!0,h}getHespSource(t,i){var e,s;if(i.hespSrc)return{type:"application/vnd.theo.hesp+json",src:i.hespSrc,contentProtection:i.contentProtection?PQ(i.contentProtection):void 0,useManagedMediaSource:!0,latencyConfiguration:null!=(s=null==(e=this.fz)?void 0:e.latencyConfiguration)?s:iK(t.targetLatency),hesp:{maxMobileBitrate:t.maxMobileBitrate}}}getHlsSource(t){if(t.hlsSrc)return{type:"application/x-mpegurl",src:t.hlsSrc,contentProtection:t.contentProtection?PQ(t.contentProtection):void 0}}dispatchErrorEvent(t){const i=t instanceof Ga?t:new Ga(Vo.THEO_LIVE_UNKNOWN_ERROR,t.message,t);this.Lz=P(i),this.JW=i,this.jNt(),this.So(new Pi(i))}jNt(){void 0!==this.RNt&&(zd.Lg(this.RNt),this.RNt=void 0),void 0!==this.ZNt&&(zd.Lg(this.ZNt),this.ZNt=void 0),void 0!==this.MNt&&(zd.vm(this.MNt),this.MNt=void 0)}Xx(){var t;return this.nT.Zg(),this.nT=new at,this.INt(),this.jNt(),this.NNt=void 0,this.jDt=!1,this.n7=!1,this.lBt=!1,null==(t=this.XNt)||t.destroy(),this.XNt=void 0,this.Ac=void 0,this.fz=void 0,this.zNt=void 0,this.tNt=void 0,this.JNt=void 0,this.JW=void 0,this.Lz=void 0,this.CNt=0,this.$Nt=[],this.LNt=!0,this.ONt=void 0,this.FNt&&this.VNt(),super.Xx()}async kn(t){var i;this.nT.Zg(),this.oa.oX.wY(this.WNt),void 0!==this.RNt&&(zd.Lg(this.RNt),this.RNt=void 0),this.Vo(),this.INt(),null==(i=this.XNt)||i.destroy(),this.oa.zP.mn("latencyrecoveryseek",this.aNt),await super.kn(t)}async selectEndpoint(t,i){let e=!1;const s=t.endpoints.slice();oi(s,i);const n=Bo(s.map(t=>t.priority)).sort();for(const t of n){const i=s.filter(i=>i.priority===t);for(;i.length>0;){const t=sK(i),s=await eK(t,this.oa.SP);if("online"===s)return t;"invalid-security"===s&&(e=!0),oi(i,t)}}if(i){const t=await eK(i,this.oa.SP);if("online"===t)return i;"invalid-security"===t&&(e=!0)}if(e){const t=new Ga(Vo.MEDIA_LOAD_ERROR,"Trying to play a token protected stream without the correct token configured.");throw this.dispatchErrorEvent(t),t}}constructor(t,i){var e;super(t,i),this.DNt=void 0,this.YBt=void 0,this.qNt=void 0,this.GNt=void 0,this.XNt=void 0,this.Ac=void 0,this.fz=void 0,this.zNt=void 0,this.tNt=void 0,this.JNt=void 0,this.jDt=!1,this.Lz=void 0,this.JW=void 0,this.nT=new at,this.RNt=void 0,this.lBt=!1,this.n7=!1,this.KNt=void 0,this.ZNt=void 0,this.MNt=void 0,this.NNt=void 0,this.$Nt=[],this.FNt=!1,this.HNt=void 0,this.LNt=!0,this.CNt=0,this.ONt=void 0,this.GW=t=>{var i;const e=t.Ht,s=null==(i=this.tNt)?void 0:i.maxMobileBitrate;if(void 0!==s&&zd.Zs.Ks){e.KI.II.filter(t=>t.kW>s).forEach(t=>e.KI._S(t))}var n;e.wn(Te.TI,this.ih);const r=tK(null!=(n=e.YI)?n:e.KI.II);e.YI=r.length>0?r:tK(e.KI.II)},this.ih=t=>{const i=t.kot;var e;(!i||(null!=(e=i.tyt)?e:i.kW)>=ZQ)&&this.VNt()},this.aNt=()=>{this.UNt(),this.$Nt.push(zd.Mg()),this.$Nt=this.$Nt.filter(t=>zd.Mg()-t<=3e5),this.$Nt.length>=3&&(this.$Nt=[],this.DNt.So(new jQ(new Ga(Vo.THEO_LIVE_UNKNOWN_ERROR,"Unstable playback detected."))),Wr(this.BNt()))},this.WNt=t=>{this.jDt&&this.HNt&&("manifest"!==t.type&&"segment"!==t.type||(t.headers.Authorization="Bearer "+this.HNt,t.redirect(t)))},this.DNt=new YQ(this);const s=t.Cd.theoLive;var n,r,h;this.GNt={sessionId:null!=(n=null==s?void 0:s.sessionId)?n:FC(),userId:null!=(r=null==s?void 0:s.userId)?r:kQ(),externalSessionId:null==s?void 0:s.externalSessionId,analyticsEnabled:!1!==(null==s?void 0:s.analyticsEnabled),fallbackEnabled:!1!==(null==s?void 0:s.fallbackEnabled),discoveryUrls:[null==s?void 0:s.discoveryUrl,...null!=(h=null==s?void 0:s.discoveryUrls)?h:[],...JQ].filter(it).map(t=>t.lastIndexOf("/")===t.length-1?t:t+"/")},this.YBt=new TQ(null==(e=this.GNt)?void 0:e.externalSessionId),this.qNt=new WQ(t.SP,this.GNt),this.oa.zP.wn("latencyrecoveryseek",this.aNt)}};function tK(t){return t.filter(t=>{var i;return(null!=(i=t.tyt)?i:t.kW)>=ZQ})}function iK(t){return void 0===t?Mo({},_j(),{forceSeekOffset:20}):{minimumOffset:t-UT,targetOffset:t,maximumOffset:t+UT,forceSeekOffset:20,minimumPlaybackRate:Ot,maximumPlaybackRate:Jt}}async function eK(t,i){try{const e=t.hespSrc||t.hlsSrc,s=await i.lk({Yu:e,Km:Al.wk,Vk:3e3});if(s.hk>=200&&s.hk<300)return"online"}catch(t){if(t instanceof An&&403===t.oE.hk)return"invalid-security"}return"offline"}function sK(t){const i=t.reduce((t,i)=>t+i.weight,0);if(0===i){return t[_.floor(_.random()*t.length)]}const e=_.random()*i;let s=0;for(const i of t)if(s+=i.weight,e<=s)return i;return t[t.length-1]}function nK(t){try{return Ju(zd.Dh(t).pathname,"manifest.json")}catch(t){return!1}}Pu(t=>new $Q(t),HF.pR),r(),r(),r();var rK=sn(wd());r(),r(),r();var hK=class extends Ne{get tB(){return this.tMt}er(t,i){this.ob=t,this.tMt=i,this.hu&&this.So(new ea(this.hu))}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}get o(){return this.ob.id}get jI(){return this.gO}get kW(){return this.ob.bitrate}get tyt(){}get frt(){return""}get Th(){return""}get nyt(){return""}get cst(){return!0}get iyt(){}jU(){throw new m("Method not implemented.")}QU(){throw new m("Method not implemented.")}kn(){this.Vo()}constructor(t,i){super(),this.gO=zk(),this.ob=void 0,this.tMt=void 0,this.hu=void 0,this.ob=t,this.tMt=i}},oK=class extends hK{xa(){return Lq(this)}get plt(){return 0}get Ti(){return this.ob.width}get Mi(){return this.ob.height}get eyt(){return 0}constructor(t,i){super(t,i)}};r();var aK=class extends Ne{get Rt(){return!0}set Rt(t){}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=fo(this)}wO(t){this.Rt=t}get Jdt(){}get Lt(){return this.b5}get o(){return this.hS||"millitrack"}get jI(){return this.gO}get Th(){return""}get bs(){return""}get Xk(){return this.Rt?"enabled":"disabled"}set Xk(t){this.wO("enabled"===t)}get XI(){}get KI(){return this.dO}get YI(){return this.iMt}set YI(t){if(this.iMt=t,this.Rt){const i=1===(null==t?void 0:t.length)?t[0].tB:void 0;this.eMt(i)}this.So(new Zo(this.dO.II.slice(),this)),((null==t?void 0:t.length)||this.dO.V)&&this.So(new DW((null==t?void 0:t[0])||this.dO.CI(0)))}get QI(){}kn(){this.Vo();for(const t of this.dO.II)t.kn();this.dO.hr()}constructor(t,i){super(),this.gO=ki(),this.dO=new Uk,this.iMt=void 0,this.hS=void 0,this.b5=void 0,this.hu=void 0,this.hS=t,this.b5=i}},uK=class extends aK{er(t){for(const i of t.active){const e=Jr(t.layers,t=>t.encodingId===i.id),s=Jr(this.dO.II,t=>t.o===i.id);s?s.er(i,e):this.dO.lO(new oK(i,e))}this.So(new Uh(this))}get Km(){return Ci.Bk}eMt(t){var i;null==(i=this.sMt)||i.nMt(t)}kn(){this.sMt=void 0,super.kn()}constructor(t,i,e){super(t,i),this.sMt=void 0,this.sMt=e}};r();var cK=class{er(t){this.rMt=t}get kW(){var t,i,e,s,n;var r;return(null!=(n=null==(i=this.rMt)||null==(t=i.video.inbounds)?void 0:t.reduce((t,i)=>t+i.bitrateBitsPerSecond,0))?n:0)+(null!=(r=null==(s=this.rMt)||null==(e=s.audio.inbounds)?void 0:e.reduce((t,i)=>t+i.bitrateBitsPerSecond,0))?r:0)}get EW(){var t,i;return null!=(i=null==(t=this.rMt)?void 0:t.currentRoundTripTime)?i:0}PW(t){}constructor(){this.rMt=void 0}};r(),r();var dK=class extends hK{xa(){return Oq(this)}get $mt(){return this.hMt}constructor(t,i){super(t,i),this.hMt=0}},lK=class extends aK{er(t){for(const i of t.active){const e=Jr(t.layers,t=>t.encodingId===i.id),s=Jr(this.dO.II,t=>t.o===i.id);s?s.er(i,e):this.dO.lO(new dK(i,e))}this.So(new Uh(this))}get Km(){return Ci.Dk}eMt(t){var i;null==(i=this.sMt)||i.oMt(t)}kn(){this.sMt=void 0,super.kn()}constructor(t,i,e){super(t,i),this.sMt=void 0,this.sMt=e}};r();var fK=class extends _h{xa(){return function(t){return po(zt(t),{get mid(){return t.DU.mid},get uuid(){return t.DU.uuid},get timecode(){return t.DU.timecode},get unregistered(){return t.DU.unregistered}})}(this)}constructor(t,i){super(t,t,void 0,!1),this.DU=void 0,this.DU=i}};r(),r();var vK=sn(wd()),_K=class extends Ne{get Ca(){return this.hu||(this.hu=Pk(this)),this.hu}QL(t){return vK.Logger.diagnose(t)}wn(t,i){this.aMt.wn(t,i)}mn(t,i){this.aMt.mn(t,i)}constructor(t){super(),this.hu=void 0,this.aMt=void 0,this.aMt=t}},gK=[d.uo,d.jw,Do.TM,d._y,d.Qw,d.Ww,d.$w,d.Zw,d.Bw,d.Kw,d.gy,d.Rw,d.Jw,d.Pw,d.Ew,d.Lw,d.Nw],pK=["active","inactive","stopped","vad","layers","migrate","viewercount"],mK=1e3,wK=class extends wp{get stats(){return this.rMt}constructor(t){super("stats"),this.rMt=void 0,this.rMt=t}},yK=class extends Ne{nMt(t){var i;null==(i=this.Lf)||i.select(t).catch(this.mmt)}oMt(t){var i;null==(i=this.Lf)||i.select(t).catch(this.mmt)}get Vx(){return!1}Wx(){return this.TL.Wx()}get ht(){return this.YL}get IP(){return this.TL.IP._s()}get CP(){return this.TL.CP}set CP(t){}get bt(){return this.Ac}get MP(){return this.TL.MP}set MP(t){this.OP(t)}OP(t,i){}get ct(){return this.TL.ct}get UP(){return this.TL.UP}get lt(){return this.JW}get WP(){return this.ZW}get zP(){}get jP(){return this.uMt}get KP(){return this.TL.KP}get JP(){var t,i;const e=this.cMt,s=null==e||null==(t=e.video.inbounds)?void 0:t[0],n=null==e||null==(i=e.audio.inbounds)?void 0:i[0];var r,h,o,a;return{nO:this.Rz.kY.kW,iO:null!=(r=null==s?void 0:s.framesDropped)?r:0,eO:0,sO:null!=(h=null==s?void 0:s.framesReceived)?h:0,rO:(null!=(o=null==s?void 0:s.totalBytesReceived)?o:0)+(null!=(a=null==n?void 0:n.totalBytesReceived)?a:0),hO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get $P(){return this.TL.$P}set $P(t){this.TL.$P=t}get sx(){var t,i;return null!=(i=null==(t=this.Lf)?void 0:t.isActive())&&i}get hx(){return this.TL.hx}get ux(){return 1}set ux(t){}get _x(){return this.TL._x._s()}get mx(){return q.lz}set mx(t){}get Ax(){return this.TL.Ax}get Sx(){return this.TL.Sx._s()}get kx(){return this.TL.kx}get nq(){return this.TL.nq}get nt(){return this.TL.nt}get Rx(){return this.TL.Rx}get rt(){return this.$L}get Bx(){return this.TL.Bx}get Mx(){return this.TL.Mx}set Mx(t){this.TL.Mx=t}get Fx(){return this.Cz}get hq(){return this.oq}get BL(){return this.Cz.BL}be(){this.TL.be()}we(){this.TL.we()}async Gx(){this.Un(),await this.TL.Gx()}zx(){this.TL.zx()}async hr(){var t;this.dMt(),this.Ac=void 0,this.nT.Zg(),null==(t=this.Lf)||t.stop(),this.Lf=void 0,this.Dpt&&(await this.Dpt.catch(Ct),this.Dpt=void 0),this.lMt=void 0,await this.TL.hr(),this.fMt=void 0,this.vMt=0,this.TL.Aq();for(const t of this.$L.II)t.kn();this.YL.hr(),this.$L.hr()}async kn(){this.dMt(),this.Vo(),await this.hr(),this.YL.kn(),this.$L.kn(),this.bq.kn(),this.kq.zg(),this.TL.mn(gK,this.Rs),this.TL.mn(Mc.ma,this.Ts),await this.Iz.Pq(this.TL)}async Ta(t,i,e){var s;ii(e),this.pEt(),this.dMt();const n=t;this.Ac=n,this.nT=new at,n.apiUrl&&rK.Director.setEndpoint(n.apiUrl);const r=this._Mt(this.Rz.OY.type);this.Lf=new rK.View(void 0,()=>rK.Director.getSubscriber({streamName:n.src,streamAccountId:n.streamAccountId,subscriberToken:n.subscriberToken}),void 0,!0),this.gMt=Mo({},n.connectOptions,{events:pK,abrConfiguration:{strategy:r,metadata:{bitrate:null==(s=this.Rz.OY.metadata)?void 0:s.bitrate}}}),this.pMt()}_Mt(t){switch(t){case Sa.PERFORMANCE:return"performance";case Sa.BANDWIDTH:return"bandwidth";case Sa.QUALITY:return"quality";default:return}}Px(t,i,e,s){return Promise.resolve()}xx(){return Promise.resolve()}Un(){if(void 0!==this.Dpt)return;const t=this.Lf;void 0!==t&&(this.Dpt=this.lE(t,this.gMt,this.nT.Yg).catch(this.mmt))}async lE(t,i,e){ii(e);try{var s,n;await Nc(t.connect(i),e),t.webRTCPeer.initStats({autoInitStats:!0,statsIntervalMs:_.min(null!=(n=null==(s=this.Ac)?void 0:s.statsIntervalMs)?n:mK,mK)})}catch(i){sa(i),function(t){return Lu(t)&&"FetchError"===t.name}(i)&&400===i.status&&(zd.um("[THEOplayer] Millicast connect error, reconnecting.",i),await Nc(t.reconnect(),e)),this.qq(new Ga(Vo.NETWORK_ERROR,i.message,i))}}async mMt(t,i){ii(i);try{this.TL.x9(),this.lMt=t,await this.TL.hr(),await this.TL.Un({Km:Zr.mV,iR:"",GZ:t,qT:Ba.gR,aq:[]})}finally{this.TL.I9()}}pMt(){var t;const i=this.Lf;i.on("track",t=>this.wMt(t)),i.on("broadcastEvent",t=>this.yMt(t)),i.webRTCPeer.on("stats",t=>{this.cMt=t,this.oq.er(t),this.AMt()}),(null==(t=this.gMt)?void 0:t.metadata)&&i.on("metadata",t=>this.bMt(t))}AMt(){var t,i;void 0===this.SMt&&(this.So(new wK(this.cMt)),this.SMt=zd.fm(()=>{this.So(new wK(this.cMt))},null!=(i=null==(t=this.Ac)?void 0:t.statsIntervalMs)?i:mK))}dMt(){void 0!==this.SMt&&(zd.vm(this.SMt),this.SMt=void 0)}wMt(t){const i=this.YL.V>0,e=this.$L.V>0,s=i&&!e,n=t.streams[0];if(s){const t=n.getVideoTracks().slice();for(const i of t)n.removeTrack(i)}n!==this.lMt&&this.mMt(n,this.nT.Yg).catch(this.mmt)}yMt(t){switch(t.name){case"active":{this.So(new gt);const i=t.data,e=this.gMt;for(const t of i.tracks)if(t.media!==Ci.Bk||e.disableVideo||this.$L.II.some(i=>i.o===t.trackId)){if(t.media===Ci.Dk&&!e.disableAudio&&!this.YL.II.some(i=>i.o===t.trackId)){const i=this.YL.V>0?mn.qCt:mn.zCt;this.YL.tt(new lK(t.trackId,i,this))}}else{const i=this.$L.V>0?Ca.qCt:Ca.zCt;this.$L.tt(new uK(t.trackId,i,this))}break}case"inactive":this.So(new Fr),this.$L.hr(),this.YL.hr();break;case"stopped":this.So(new Fr);break;case"viewercount":default:break;case"layers":{const i=t.data;if(0===this.$L.V){const t=new uK("",Ca.zCt,this);t.er(i.medias[0]),this.$L.tt(t)}else{const t=Jr(this.$L.II,t=>t.Lt===Ca.zCt);null==t||t.er(i.medias[0])}break}}}bMt(t){let i=this.fMt;void 0===i&&(i=this.TL.tI(Ao.VU,void 0,void 0,void 0,void 0,nh.MILLICAST),i.Xk=xh.JI,this.fMt=i);const e=this.MP,s=_.max(0,e-10);this.vMt<s&&(St(i,s),this.vMt=s);const n=new fK(e+.001,t);i.tV(n)}qq(t){this.JW||(Wr(this.hr()),this.JW=P(t),this.ZW=t,this.So(new Pi(t)))}pEt(){this.JW=void 0,this.ZW=void 0}jx(){return!1}Qx(){}Kx(){}Yx(){this.TL.Yx()}Jx(){const t=this.lMt;void 0!==t&&this.mMt(t,this.nT.Yg).catch(this.mmt)}Hx(){return this.TL.Ma}Aa(){return this.TL.mq}tI(t){return this.TL.wq(t)}constructor(t,i,e){super(),this.Iz=void 0,this.Rz=void 0,this.Cz=void 0,this.TL=void 0,this.Lf=void 0,this.gMt=void 0,this.Ac=void 0,this.nT=void 0,this.Dpt=void 0,this.lMt=void 0,this.$L=void 0,this.YL=void 0,this.fMt=void 0,this.JW=void 0,this.ZW=void 0,this.cMt=void 0,this.vMt=void 0,this.oq=void 0,this.kq=void 0,this.bq=void 0,this.uMt=void 0,this.SMt=void 0,this.Ts=void 0,this.mmt=void 0,this.Iz=t,this.Rz=i,this.Cz=e,this.nT=new at,this.Dpt=void 0,this.lMt=void 0,this.$L=new rs,this.YL=new rs,this.vMt=0,this.oq=new cK,this.Ts=t=>{this.qq(Ok(t.lt))},this.mmt=t=>{D(t)||this.qq(new Ga(Vo.MEDIA_DECODE_ERROR,t.message,t))},this.TL=this.Iz.Gq(Ci.Bk),this.kq=new dx(this,this.TL),this.bq=new bs(this.kq,!0),this.TL.wn(gK,this.Rs),this.TL.wn(Mc.ma,this.Ts),this.bq.wn(K,this.Rs),this.uMt=new _K(this)}};cs(new class{get Kq(){return V.gR}PR(t,i,e,s,n,r,h,o){return new yK(i,n,r)}Xq(t,i){return t.type===Ba.gR}async jq(t){let i=await kT(t);return i&&(i=Boolean(t.widevine||t.fairplay)),i&&!1}Qq(){return!1}}),r(),r(),r(),r();var AK=function(t){return t.TMt="currentbufferingrenditionchange",t.kMt="EMt",t.PMt="xMt",t}({});r(),r();var bK=class{constructor(t,i){var e,s;this.jI=void 0,this.IMt=void 0,this.Km=void 0,this.RMt=void 0,this.CMt=void 0,this.DMt=void 0,this.l=void 0,this.bs=void 0,this.BMt=void 0,this.NMt=void 0,this.MMt=void 0,this.LMt=void 0,this.frt=void 0,this.jI=zk(),this.IMt=i,this.Km=t.Km,this.RMt=t.RMt,this.CMt=t.CMt,this.DMt=t.DMt,this.l=t.l,this.bs=t.bs,this.BMt=t.BMt,this.NMt=t.NMt,this.MMt=void 0===t.nyt,this.LMt=null!=(s=null==(e=t.LMt)?void 0:e.split(","))?s:[]}};function SK(t,i){return t.Km===i.Km&&(t.l===i.l||!(!t.RMt||!i.RMt))}function TK(t,i){return void 0!==t&&void 0!==i&&kK(t,i)}function kK(t,i){return t.IMt===i.IMt}function EK(t,i){return kK(t,i)&&t.BMt===i.BMt}function PK(t,i){for(const e of t)if(EK(e,i))return!0;return!1}var xK=class extends Ne{get QI(){return this.OMt}get Rt(){const t=this.FMt();if(!t)return!1;for(const i of this.KI.II)if(i.UMt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var i;let t=null==(i=this.KI.CI(0))?void 0:i.UMt;const e=this.HMt.VMt;for(const i of this.KI.II)if(i.WMt===e){t=i.UMt;break}this.qMt(t)}else this.qMt(void 0)}get XI(){if(!this.Rt)return;const t=this.HMt.zMt;for(const i of this.KI.II)if(PK(t,i.UMt))return i}get Ca(){return this.hu||(this.hu=fo(this)),this.hu}get o(){return this.gO.toString()}get jI(){return this.gO}get Th(){return this.pO}set Th(t){t!==this.pO&&(this.pO=t,this.So(new Uh(this)))}get bs(){return this.qA}get Xk(){return this.Rt?"enabled":"disabled"}get YI(){return this.dct}set YI(t){let i=[];if(t){i=t.filter(t=>{const i=this.XI?oH(this.XI):void 0;return zd.Zs.xp(i,oH(t))}).filter(i=>this.KI.fO(t)&&i.cst)}else i=this.KI.II.filter(t=>t.cst);if(0!==i.length){if(!(t===this.dct||this.dct&&df(this.dct,i))){if(this.dct=t?i:void 0,this.HMt.GMt(i.map(t=>t.WMt)),1===i.length){const t=i[0].WMt,e=this.Vp===Ci.Bk,s=this.Rz.JY;Wr(this.HMt.XMt(t,{jMt:!0,QMt:s&&e,KMt:s&&!e}))}this.So(new Zo(i,this))}}else this.So(new hH)}wO(t){this.Rt=t}YMt(t){return Jr(this.KI.II,i=>i.UMt===t)}kn(){this.Vo(),this.HMt.mn(AK.TMt,this.JMt),this.HMt.mn(AK.kMt,this.ZMt);for(const t of this.KI.II)t.kn();this.KI.hr()}constructor(t,i,e,s,n){var r;super(),this.Vp=void 0,this.HMt=void 0,this.Rz=void 0,this.wh=void 0,this.KI=void 0,this.pO=void 0,this.qA=void 0,this.OMt=void 0,this.dct=void 0,this.$Mt=void 0,this.tLt=void 0,this.hu=void 0,this.gO=void 0,this.iLt=void 0,this.JMt=void 0,this.ZMt=void 0,this.Vp=t,this.HMt=i,this.Rz=e,this.wh=s,this.KI=n,this.dct=void 0,this.$Mt=void 0,this.iLt=()=>this.So(new Uh(this)),this.JMt=()=>{const t=this.XI;t&&this.$Mt!==t&&(this.$Mt=t,this.So(new DW(t)))},this.ZMt=()=>{const t=this.Rt;this.tLt!==t&&(this.tLt=t,this.wh.So(new nr(this)),this.So(new nr(this)))},this.$Mt=this.XI,this.tLt=this.Rt;const h=n.CI(0);var o,a;this.pO=null!=(o=null==h?void 0:h.UMt.l)?o:"",this.qA=null!=(a=null==h?void 0:h.UMt.bs)?a:"",this.OMt=null==h||null==(r=h.UMt)?void 0:r.LMt.map(NK).filter(it),this.gO=ki(),this.HMt.wn(AK.TMt,this.JMt),this.HMt.wn(AK.kMt,this.ZMt);for(let t=0;t<this.KI.V;t++){this.KI.CI(t).wn("update",this.iLt)}}},IK=class extends xK{get Lt(){return mn.zCt}FMt(){return this.HMt.eLt}qMt(t){Wr(this.HMt.sLt(t))}constructor(t,i,e,s){super(Ci.Dk,t,i,e,s)}},RK=class extends xK{get Lt(){return Ca.zCt}FMt(){return this.HMt.nLt}qMt(t){Wr(this.HMt.rLt(t))}constructor(t,i,e,s){super(Ci.Bk,t,i,e,s)}},CK=class extends Ne{get o(){return String(this.WMt.o)}get jI(){return this.WMt.o}get kW(){return this.WMt.kW}get tyt(){return this.WMt.tyt}get Th(){var t;return null!=(t=this.pO)?t:this.UMt.l}set Th(t){this.Th!==t&&(this.pO=t,this.So(new ea(this.Ca)))}get nyt(){return this.UMt.IMt.hLt()}get iyt(){return this.WMt.iyt}QU(){}jU(){}kn(){this.Vo()}constructor(t,i){super(),this.WMt=void 0,this.UMt=void 0,this.pO=void 0,this.cst=void 0,this.WMt=t,this.UMt=i,this.pO="",this.cst=!0}},DK=class extends CK{get $mt(){return 0}get frt(){var t;return(null==(t=this.WMt.frt)?void 0:t.yCt)||""}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return Oq(this)}constructor(t,i){super(t,i),this.hu=void 0}},BK=class extends CK{get frt(){var t;return(null==(t=this.WMt.frt)?void 0:t.bCt)||""}get eyt(){return this.oLt}set eyt(t){this.oLt!==t&&(this.oLt=t,this.So(new ea(this.Ca)))}get plt(){var t,i;return null!=(i=null!=(t=this.aCt)?t:this.WMt.plt)?i:0}set plt(t){this.plt!==t&&(this.aCt=t,this.So(new ea(this.Ca)))}get Mi(){var t,i;return null!=(i=null==(t=this.WMt.uCt)?void 0:t.Mi)?i:0}get Ti(){var t,i;return null!=(i=null==(t=this.WMt.uCt)?void 0:t.Ti)?i:0}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){return Lq(this)}constructor(t,i){super(t,i),this.hu=void 0,this.oLt=0,this.aCt=void 0}};function NK(t){return"public.accessibility.describes-video"===t?Tn.GI:"public.accessibility.transcribes-spoken-dialog"===t?Tn.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?Tn.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?Tn.zI:void 0}r();var Ft=new class{aLt(t){if(!this.Rt())return!1;const i=[];return!(i.length>0)||i.some(i=>i.toLowerCase()===t.toLowerCase())}uLt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.aLt(t)&&zd.hm("DEBUG "+t+" -",...e)}hB(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.aLt(t)&&zd.hm("INFO "+t+" -",...e)}cLt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.aLt(t)&&zd.um("WARNING "+t+" -",...e)}lt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.aLt(t)&&zd.dm("ERROR "+t+" -",...e)}dLt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.aLt(t)&&zd.dm("FATAL "+t+" -",...e)}constructor(){this.Rt=()=>!1}},B="HLSPlaylistParser",yc="Discontinuity",MK="Buffering";r();var LK=class{get kW(){return this.Fat.yet}get EW(){return this.LIt.yet}PW(t){if("segment"!==t.Km&&"preload-hint"!==t.Km)return;const i=[new $X(this.LIt)];return"stream"!==t.dk||!function(t){return"segment"===t.Km&&"initialization-segment"!==t.Wk}(t)&&"preload-hint"!==t.Km?i.push(new tj(this.Fat)):i.push(new ij(this.Fat,1e3)),new ZX(i)}RIt(t){this.Fat=new ps(ps.cIt,ps.dIt,1,t)}constructor(t){this.Fat=void 0,this.LIt=void 0;const i=t.kW>0?t.kW:ps.Mat,e=t.EW>0?t.EW:de.Mat;this.Fat=new ps(ps.cIt,ps.dIt,1,i),this.LIt=new de(de.cIt,de.dIt,e)}};r();var OK=class{QZ(t,i){const e={Km:Zr.wV,aq:[],L4:t.map(t=>({qT:t})),X4:i};return Promise.resolve(void 0!==this.ost.QZ([e]))}constructor(t){this.ost=void 0,this.ost=t}};r(),r();var FK=(t,i,e,s,n)=>t.filter(t=>!!pi(s,t)||1.1*t.kW<=e.kW),UK=(t,i,e,s,n)=>t.filter(t=>{if(pi(s,t))return!0;let r=1/0;for(const i of t.lLt){var h,o;r=_.min(r,null!=(o=null!=(h=i.IMt.fLt)?h:i.IMt.vLt)?o:1/0)}r===1/0&&(r=1);const a=2*e.EW+t.kW*r/e.kW;return t.kW<=i.kW||n._Lt>a}),VK=(t,i,e,s,n)=>xe(t,(t,i)=>i.kW-t.kW),HK=(t,i,e,s,n)=>t.every(t=>t.iyt&&!S(t.iyt))?xe(t,(t,i)=>i.iyt-t.iyt):t,WK=(t,i,e,s,n)=>0===s.length?t:xe(t,(t,i)=>{const e=pi(s,t)?1:0;return(pi(s,i)?1:0)-e}),qK=(t,i,e,s,n,r)=>t.filter(t=>!t.frt||!i.frt||!(void 0!==i.frt.bCt&&void 0!==t.frt.bCt&&!bN(i.frt.bCt,t.frt.bCt)&&!r.gLt({qT:'video/mp4; codecs="'+t.frt.bCt+'"'}))&&!(void 0!==i.frt.yCt&&void 0!==t.frt.yCt&&!bN(i.frt.yCt,t.frt.yCt)&&!r.pLt({qT:'audio/mp4; codecs="'+t.frt.yCt+'"'}))),zK=(t,i,e,s,n)=>{if(!1===n.Gct)return t;if(zd.Zs.dp)return t;const r=zd.Zs.lp;var h;const o=(null!=(h=null==r?void 0:r.width)?h:n.Ti)*zV;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Mi)*zV;for(let i=0;i<t.length;i++){const e=t[i];if(void 0===e.uCt)return t;const s=e.uCt.Mi,n=e.uCt.Ti;if(s<=u&&n<=o)return t.slice(i,t.length)}return[]},GK=(t,i,e,s,n)=>function(t,i){const e=i.Gct;if(void 0===e&&!zd.Zs.Ks)return t;if(!1===e)return t;for(let e=0;e<t.length;e++){const s=t[e];if(void 0===s.uCt)return t;const n=s.uCt.Mi,r=s.uCt.Ti;if(n===i.Mi&&r===i.Ti)return t.slice(e,t.length);if(n<i.Mi||r<i.Ti)return t.slice(0===e?e:e-1,t.length)}return[]}(t,n);var XK="AbrEvaluator",jK=class{get mLt(){return this.Rz.kY}wLt(t){this.jct=t}async yLt(t,i,e,s,n){return(await this.ALt(t,i,e,s,n))[0]}async ALt(t,i,e,s,n){if(0===t.length)throw new m("AbrEvaluator - Unable to select optimal variant stream from an empty list.");Ft.uLt(XK,"Performing optimal variant stream selection.");const r=this.mLt;let h=t;for(const t of this.jct){const o=t(h,i,r,e,s,n);h=ul(o)?o:await o}if(0===h.length){Ft.cLt(XK,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[oo(t,t=>t.kW)]}return h}constructor(t){this.Rz=void 0,this.jct=void 0,this.Rz=t,this.jct=[qK,FK,UK,VK,zK,GK,HK,WK]}};function QK(t,i){return[t,void 0!==i?t+i-1:Xl]}function KK(t){return Boolean(t.KD)}function YK(t){return Boolean(t.ect)}r(),r(),r(),r(),r();var nl=function(t){return t[t.Dk=0]="Dk",t[t.Bk=1]="Bk",t[t.OU=2]="OU",t[t.bLt=3]="bLt",t}({}),Qu=function(t){return t[t.SLt=0]="SLt",t[t.TLt=1]="TLt",t}({}),Zt=function(t){return t[t.lz=0]="lz",t[t.kLt=1]="kLt",t[t.ELt=2]="ELt",t}({}),Bn=function(t){return t[t.pk=0]="pk",t[t.PLt=1]="PLt",t[t.xLt=2]="xLt",t}({});function we(t){return t?t.LAt?t.zE+"@"+t.LAt.Tn+"-"+(null!=(i=t.LAt.V)?i:""):""+t.zE:"";var i}function JK(t,i){if(i===t)return!0;if(i.zE!==t.zE)return!1;if(!t.LAt)return!0;if(i.LAt){const e=QK(t.LAt.Tn,t.LAt.V),s=QK(i.LAt.Tn,i.LAt.V);if(e[0]<=s[0])return void 0===e[1]||void 0!==s[1]&&e[1]>=s[1]}return!1}function ZK(t,i){return t===i||t.zE===i.zE&&(t.LAt&&i.LAt?t.LAt.Tn===i.LAt.Tn&&t.LAt.V===i.LAt.V:t.LAt===i.LAt)}function $K(t){const i=!!t.ILt||void 0;return{o:t.o,RLt:t.RLt,nq:t.nq,CLt:t.CLt,ct:t.ct,DLt:t.DLt,ILt:i,BLt:t.NLt,MLt:t.LLt,OLt:t.OLt,FLt:t.FLt}}function tY(t,i){var e,s,n;return{yCt:null!=(e=i.yCt)?e:null==t?void 0:t.yCt,bCt:null!=(s=i.bCt)?s:null==t?void 0:t.bCt,ULt:null!=(n=i.ULt)?n:null==t?void 0:t.ULt}}async function iY(t,i,e,s,n){const r=i.filter(t=>Ho(t,"audio")),h=i.filter(t=>Ho(t,"video")),o=[],a=e.map(t=>async function(t,i,e){if(!t.nyt)return;if(!t.VLt)return;if(t.Uk!==Zt.ELt)return;const s=eY(t.VLt);if(!s)return;if(s.$m===Qs)return{kS:s,BW:[],NW:void 0,HH:t.nyt,MW:[]};if(s.$m===Gg&&t.VLt===Jg)return{kS:s,BW:[],NW:t.nyt,HH:void 0,MW:[]};{Ft.hB("HLSDrmUtils","Fetching key uri "+t.nyt+".");const n=await i.lk({Yu:t.nyt,zk:e});let r=await n.HT();return s.$m===Vg&&(r=function(t){const i=new DataView(t);return i.byteLength>=8&&i.getUint32(4)===sq?t:nq(t)}(r)),{kS:s,BW:[r],NW:void 0,HH:void 0,MW:[]}}}(t,s,n));var u;const c=function(t,i){if(0===i.length)return t;const e=t=>{const e=i.indexOf(t.kS.$m);return e>=0?e:i.length};return xe(t,(t,i)=>e(t)-e(i))}((await Promise.all(a)).filter(it),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const i of c){const e=DG(null!=t?t:{},i.kS),s="cbcs";o.push({kS:i.kS,BW:i.BW,NW:i.NW,HH:i.HH,Mq:[{initDataTypes:[i.kS.Jm],audioCapabilities:BG(r,s,null==e?void 0:e.audioRobustness),videoCapabilities:BG(h,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}],MW:i.MW})}return o}function eY(t){return t===Wg?xi:t===Mu?Zg:"com.apple.streamingkeydelivery"===t?tp:t===Jg?ip:void 0}function sY(t){if("#"!==t[0])throw new m("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function nY(t){return"#"!==t[0]?t:t.split(":",1)[0]}function rY(t){const i=t.indexOf(":");if(-1===i||t.length<i+1)throw new m("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(i+1)}function hY(t){const i=dY(rY(t));if(void 0===i)throw new m("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return i}function oY(t){const i={},e=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=e.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?i[n]=r:Ft.cLt(B,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=e.exec(t)}return i}function aY(t,i){const e=oY(t);let s,n;try{s=e.URI?zd.xm(e.URI,i):void 0,n=function(t){switch(t){case"AUDIO":return nl.Dk;case"VIDEO":return nl.Bk;case"SUBTITLES":return nl.OU;case"CLOSED-CAPTIONS":return nl.bLt}throw new m("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(e.TYPE)}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=e["GROUP-ID"],h=e.LANGUAGE,o=e["ASSOC-LANGUAGE"],a=e.NAME,u="YES"===e.DEFAULT;let c="YES"===e.AUTOSELECT;const d="YES"===e.FORCED,l=e["INSTREAM-ID"],f=e.CHARACTERISTICS,v=e.CHANNELS;if(r||Ft.cLt(B,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),h||Ft.cLt(B,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||Ft.cLt(B,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===nl.bLt?(s&&Ft.cLt(B,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),l?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(l)||Ft.cLt(B,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):Ft.cLt(B,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):l&&Ft.cLt(B,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,e.AUTOSELECT&&Ft.cLt(B,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),e.FORCED&&n!==nl.OU&&Ft.cLt(B,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new m("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{HLt:o,hCt:v,LMt:f,BMt:r,CMt:c,RMt:u,DMt:d,NMt:l,bs:h,l:a,Km:n,nyt:s}}function uY(t,i,e){const s=oY(t);let n,r,h;try{n=zd.xm(e,i),h=function(t){if(void 0===t)return;const i=t.split("x"),e=Number(i[0]),s=Number(i[1]);if(S(e)||S(s))throw new m("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{Ti:e,Mi:s}}(s.RESOLUTION),r=function(t){if(!t)return;let i,e,s;const n=t.split(",");for(const t of n){const n=t.trim();Vh(n,"mp4a")?i="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?i=n:Vh(n,"avc")||Vh(n,"hvc1")||Vh(n,"hev1")||Vh(n,"dvh")||Vh(n,"vp09")||Vh(n,"av01")?e=n:s=s?s+","+n:n}return{yCt:i,bCt:e,ULt:s}}(s.CODECS)}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const o=dY(s.BANDWIDTH),a=dY(s["AVERAGE-BANDWIDTH"]),u=dY(s.SCORE),c=dY(s["FRAME-RATE"]),d=s["HDCP-LEVEL"],l=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");l.push(...t.map(t=>{const i=t.split(":");return{keysystem:i[0],label:i[1]}}))}const f=s["VIDEO-RANGE"],v=s.AUDIO,_=s.VIDEO,g=s.SUBTITLES,p=s["CLOSED-CAPTIONS"];if(void 0===o?Ft.cLt(B,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>o&&Ft.cLt(B,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||Ft.hB(B,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.bCt&&void 0===h&&Ft.hB(B,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===d||pi(["TYPE-0","TYPE-1","NONE"],d)||Ft.cLt(B,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||pi(["SDR","PQ","HLG"],f)||Ft.cLt(B,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===o)throw new m("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{WLt:l,qLt:v,tyt:a,kW:o,zLt:p,frt:r,plt:c,GLt:d,uCt:h,iyt:u,XLt:g,nyt:n,jLt:_,QLt:f}}function cY(t,i){const e=oY(t);if(!e.URI)throw new m("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return uY(t,i,e.URI)}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function dY(t){const i=Number(t);return S(i)?void 0:i}function lY(t,i){const e=oY(t);let s,n;try{s=function(t){switch(t){case"NONE":return Zt.lz;case"AES-128":return Zt.kLt;case"SAMPLE-AES":return Zt.ELt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new m("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(e.METHOD),n=e.URI?yY(e.URI,i):void 0}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=e.KEYFORMAT,h=e.IV,o=e.KEYFORMATVERSIONS;let a,u,c,d,l;if(s!==Zt.lz){if(c=r||Jg,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(eY(c)!==xi)throw new m("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=Zt.ELt}else a=s;u=n,d=h?um(h):void 0,l=o?o.split("/").map(t=>Number(t)):[1]}else a=Zt.lz,(n||r||o||h)&&Ft.cLt(B,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{Uk:a,nyt:u,KLt:d,VLt:c,YLt:l}}function fY(t){const i=rY(t);if(!i)return[void 0,""];const[e,s]=i.split(",");return[dY(e),s]}function vY(t,i){const e=t.split("@"),s=dY(e[0]),n=e.length>1?dY(e[1]):i;if(void 0===s||void 0===n)throw new m("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Tn:n,V:s}}function _Y(t){if(void 0!==t)return vY(t,void 0)}function gY(t,i){return vY(rY(t),i)}function pY(t,i){const e=oY(t);try{const t=yY(e.URI,i);return{zE:t,LAt:_Y(e.BYTERANGE)}}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function mY(t){const i=rY(t);if(!i)throw new m("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const e=new Date(i.trim());if(!Zf(e))throw new m("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return e}function wY(t){const i=oY(t),e=i["START-DATE"],s=i["END-DATE"],n=dY(i["PLANNED-DURATION"]);let r,h,o,a=dY(i.DURATION);void 0!==i["SCTE35-CMD"]&&(r=um(i["SCTE35-CMD"]).buffer),i["SCTE35-IN"]&&(h=um(i["SCTE35-IN"]).buffer),i["SCTE35-OUT"]&&(o=um(i["SCTE35-OUT"]).buffer);const u="YES"===i["END-ON-NEXT"],c=function(t){const i={};for(const e of w.keys(t)){const s=t[e];void 0!==s&&Vh(e,"X-")&&(i[e]=s)}return i}(i),d=i.ID,l=i.CLASS;let f,v;if(void 0===e)Ft.cLt(B,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+e+".");else if(f=new Date(e),v=void 0!==s?new Date(s):void 0,Zf(f)||Ft.cLt(B,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const i=new Date(f.getTime()+1e3*a);v?v.getTime()!==i.getTime()&&(Ft.cLt(B,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),v=i):v=i}else v&&(a=(f.getTime()-v.getTime())/1e3);if(u&&(i.CLASS||Ft.cLt(B,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),i.DURATION&&Ft.cLt(B,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),v&&Ft.cLt(B,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===d&&Ft.cLt(B,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===d||void 0===f)throw new m("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:d,RLt:l,nq:f,CLt:v,ct:a,DLt:n,LLt:r,FLt:h,OLt:o,ILt:u,NLt:c}}function yY(t,i){if(void 0===t)throw new m("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return zd.xm(t,i)}function AY(t,i){const e=oY(t),s=dY(e.DURATION),n=yY(e.URI,i),r=_Y(e.BYTERANGE),h="YES"===e.INDEPENDENT,o="YES"===e.GAP;if(void 0===s)throw new m("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,nyt:{zE:n,LAt:r},JLt:h,ZLt:o}}function bY(t){const i=oY(t);return{$Lt:"YES"===i["CAN-BLOCK-RELOAD"],tOt:dY(i["CAN-SKIP-UNTIL"]),iOt:"YES"===i["CAN-SKIP-DATERANGES"],eOt:dY(i["HOLD-BACK"]),sOt:dY(i["PART-HOLD-BACK"])}}function SY(t,i){const e=oY(t);if(void 0===e.URI)throw new m("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=yY(e.URI,i),n=dY(e["LAST-MSN"]),r=dY(e["LAST-PART"]);if(void 0===n)throw new m("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{nyt:s,nOt:n,rOt:r}}function TY(t,i){var e;const s=oY(t),n=dY(s["SKIPPED-SEGMENTS"]),r=null==(e=s["RECENTLY-REMOVED-DATERANGES"])?void 0:e.split("\t");if(void 0===n)throw new m("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{hOt:n,oOt:r,aOt:i}}function kY(t){const i=dY(oY(t)["PART-TARGET"]);if(void 0===i)throw new m("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return i}function EY(t){switch(rY(t)){case"VOD":return Bn.PLt;case"EVENT":return Bn.xLt;default:return Ft.cLt(B,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),Bn.pk}}function PY(t,i){const e=oY(t);let s,n;try{s=function(t){if(void 0===t)throw new m("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return Qu.SLt;if("PART"===t)return Qu.TLt;throw new m("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(e.TYPE),n=yY(e.URI,i)}catch(i){throw new m("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=dY(e["BYTERANGE-START"]),h=dY(e["BYTERANGE-LENGTH"]);let o;return void 0===r&&void 0===h||(o={Tn:r||0,V:h}),{Km:s,nyt:{zE:n,LAt:o}}}r(),r(),r();var xY=class t{uOt(){const t=this.cOt[this.dOt];return this.dOt+=1,t}lOt(){return this.cOt[this.dOt]}Ly(){const i=new t("");return i.dOt=0,i.cOt=this.cOt.slice(this.dOt),i}static fOt(t){if(!t)return[];return t.split(/[\r\n]+/).map(t=>t.trim()).filter(t=>t)}constructor(i){this.dOt=0,this.cOt=void 0,this.cOt=t.fOt(i)}};function IY(t,i,e){const s=t.nyt;let n=t.bD,r=t.vOt,h=t.Tn;switch(e){case"#EXT-X-VERSION":n=function(t){const i=hY(t);return S(i)?(Ft.cLt(B,"Playlist version is NaN: "+t+"."),1):i}(i);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":h=function(t){const i=oY(t),e=dY(i["TIME-OFFSET"]);if(void 0===e)throw new m("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{_Ot:e,gOt:"YES"===i.PRECISE}}(i);break;case"#EXT-X-DEFINE":Ft.cLt(B,"Ignoring unsupported #EXT-X-DEFINE: "+i+".");break;default:Ft.hB(B,"Ignoring unrecognized line or comment: "+i+".")}return{nyt:s,bD:n,vOt:r,Tn:h}}function RY(t,i){return t.map(t=>t.Uk===Zt.lz||t.KLt?t:Mo({},t,{KLt:CY(i)}))}function CY(t){const i=new DataView(new ArrayBuffer(16)),e=new Ui;return e.Ny(8),Qp(i,e,Wt.fromNumber(t)),new j(i.buffer)}function DY(t,i,e){Ft.hB(B,"Parsing M3U8 playlist at "+t+".");const s=new xY(e);if("#EXTM3U"!==s.uOt())throw new m("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(e)?function(t,i){let e;try{e=zd.xm(t)}catch(i){throw Ft.cLt(B,"The master playlist has no valid base URI: "+t+"."),new m("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={nyt:e,vOt:void 0,Tn:void 0,bD:void 0};const n=[],r=[],h=[],o=[];for(;;){const t=i.uOt();if(!t)break;try{const a=sY(t);switch(a){case"#EXT-X-MEDIA":{const i=aY(t,e);n.push(i);break}case"#EXT-X-STREAM-INF":{const s=uY(t,e,i.uOt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const i=cY(t,e);h.push(i);break}case"#EXT-X-SESSION-DATA":Ft.cLt(B,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const i=lY(t,e);o.push(i);break}default:s=IY(s,t,a)}}catch(i){Ft.cLt(B,"Ignoring unparsable line: "+t,i)}}let a=s.bD;var u;const c=null!=(u=s.vOt)&&u,d=s.Tn;return void 0===a&&(Ft.cLt(B,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some(t=>void 0!==t.iyt)||h.some(t=>void 0!==t.iyt))&&(r.some(t=>void 0===t.iyt)||h.some(t=>void 0===t.iyt))&&Ft.cLt(B,"If one master playlist variant stream has a SCORE, all variants should have it."),{nyt:e,bD:a,vOt:c,Tn:d,pOt:h,MW:o,KD:n,mOt:r}}(t,s):function(t,i,e){let s={nyt:t,vOt:void 0,Tn:void 0,bD:void 0};const n=[];let r,h,o,a,u=!1,c=!1;const d=[],l=qh();let f,v,_,g,p,w,y,A,b,S=[],T=[],k=!1,E=!1;const P=[],x=[];let I,R,C,D,N,M=0,L=!1,O=Bn.pk,F=!1,U=0;try{N=zd.xm(t)}catch(i){throw Ft.cLt(B,"The media playlist has no valid base URI: "+t+".",i),new m("HLSPlaylistParser - Could not parse HLS media playlist.")}const V=e.Ly();for(;void 0===R||void 0===C;){const t=V.uOt();if(!t)break;try{switch(nY(t)){case"#EXT-X-MEDIA-SEQUENCE":R=hY(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":C=hY(t)}}catch(i){Ft.cLt(B,"Ignoring unparsable line: "+t,i)}}void 0===R&&(Ft.hB(B,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),R=0),void 0===C&&(Ft.hB(B,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),C=0);let H=R,W=C;for(;;){const t=e.uOt();if(!t)break;let i=!1;try{const e=nY(t);switch(e){case"#EXTINF":i=!0,[f,v]=fY(t);break;case"#EXT-X-BYTERANGE":i=!0,_=gY(t,M),_&&(M=_.Tn+_.V);break;case"#EXT-X-DISCONTINUITY":i=!0,k=!0,W++;break;case"#EXT-X-KEY":{var q;i=!0;const e=lY(t,N);if(e.Uk===Zt.lz){l.clear(),b=void 0;break}var z;const s=null!=(z=null==(q=e.VLt)?void 0:q.toString())?z:"identity";l.set(s,e),e.Uk===Zt.kLt&&(b=e);break}case"#EXT-X-MAP":i=!0,p=pY(t,N),w=b;break;case"#EXT-X-PROGRAM-DATE-TIME":i=!0,y=mY(t);break;case"#EXT-X-GAP":i=!0,E=!0;break;case"#EXT-X-BITRATE":i=!0,A=hY(t);break;case"#EXT-X-TARGETDURATION":r=hY(t);break;case"#EXT-X-DATERANGE":{const i=wY(t);n.push(i);break}case"#EXT-X-PART":{i=!0;const e=AY(t,N);T.push(e);break}case"#EXT-X-PRELOAD-HINT":{const i=PY(t,N);P.push(i);break}case"#EXT-X-SKIP":{d.length>0&&Ft.cLt(B,"#EXT-X-SKIP must appear before any #EXTINF tags."),i=!0;const e=TY(t,H);U=e.hOt,D=e.oOt,H+=e.hOt;break}case"#EXT-X-SERVER-CONTROL":{const i=bY(t);u=i.$Lt,h=i.tOt,c=i.iOt,o=i.eOt,a=i.sOt;break}case"#EXT-X-RENDITION-REPORT":{const i=SY(t,N);x.push(i);break}case"#EXT-X-PART-INF":I=kY(t);break;case"#EXT-X-MEDIA-SEQUENCE":i&&Ft.cLt(B,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":i&&Ft.cLt(B,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":L=!0;break;case"#EXT-X-PLAYLIST-TYPE":O=EY(t);break;case"#EXT-X-I-FRAMES-ONLY":F=!0;break;default:if(Vh(e,"#"))s=IY(s,t,e);else{g=zd.xm(t,N);const i=p?{nyt:p,wOt:w}:void 0,e={MW:RY(Ig(l),H),DU:S,yOt:T,ct:f,dq:v,AOt:k,nyt:{LAt:_,zE:g},bOt:i,SOt:y,ZLt:E,TOt:A,aOt:H,kOt:W};d.push(e),H++,S=[],T=[],f=void 0,v=void 0,k=!1,_=void 0,g=void 0,y=void 0,E=!1,A=void 0}}}catch(i){Ft.cLt(B,"Ignoring unparsable line: "+t,i)}}if(T.length){const t=p?{nyt:p,wOt:b}:void 0,i={MW:RY(Ig(l),H),DU:S,yOt:T,ct:f,dq:v,AOt:k,nyt:void 0,bOt:t,SOt:y,ZLt:E,TOt:A,aOt:H,kOt:W};d.push(i)}let G=s.bD;var X;const j=null!=(X=s.vOt)&&X,Q=s.Tn;void 0===G&&(Ft.cLt(B,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),G=2),void 0===r&&Ft.cLt(B,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const K=d.length,Y=K>0;Y||Ft.cLt(B,"The HLS media playlist contains no segments.");const J=Y&&d[K-1].yOt.length>0;return J&&void 0===I&&Ft.cLt(B,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),J&&void 0===a&&Ft.cLt(B,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{$Lt:u,tOt:h,iOt:c,EOt:n,kOt:C,POt:L,vOt:j,eOt:o,xOt:F,aOt:R,hOt:U,sOt:a,fLt:I,IOt:O,ROt:P,oOt:D,COt:x,DOt:r,ect:d,Tn:Q,nyt:N,BOt:i,bD:G}}(t,i,s)}r(),r();var BY=class{get nyt(){return this.IMt.nyt}get frt(){return this.ZRt}set frt(t){this.ZRt=t?MY(t):void 0,this.NOt=function(t,i){return!(void 0!==(null==t?void 0:t.yCt)&&void 0===(null==i?void 0:i.yCt)||void 0!==(null==t?void 0:t.bCt)&&void 0===(null==i?void 0:i.bCt))}(this.MOt,this.ZRt)}get LOt(){return this.NOt}get lLt(){return this.OOt}get FOt(){return this.OOt.filter(t=>t.Km===nl.Dk)}get UOt(){return this.OOt.filter(t=>t.Km===nl.Bk)}get VOt(){return this.OOt.filter(t=>t.Km===nl.OU)}get HOt(){return this.OOt.filter(t=>t.Km===nl.bLt)}WOt(t){for(const i of this.OOt){const e=i.IMt.WOt(t);if(void 0!==e)return e}}qOt(t){for(const i of this.OOt){const e=i.IMt.qOt(t);if(void 0!==e)return e}}zOt(t){oi(this.OOt,t)}constructor(t,i,e){var s,n,r,h;this.o=NY++,this.IMt=void 0,this.kW=void 0,this.iyt=void 0,this.uCt=void 0,this.plt=void 0,this.qLt=void 0,this.jLt=void 0,this.XLt=void 0,this.zLt=void 0,this.tyt=void 0,this.MOt=void 0,this.ZRt=void 0,this.NOt=!1,this.OOt=[],this.IMt=i,this.kW=t.kW,this.tyt=t.tyt,this.iyt=t.iyt,this.MOt=t.frt?MY(t.frt):void 0,this.ZRt=this.MOt,this.uCt=t.uCt,this.plt=t.plt,this.qLt=null!=(s=t.qLt)?s:"GOt"+this.o,this.jLt=null!=(n=t.jLt)?n:"XOt"+this.o,this.XLt=null!=(r=t.XLt)?r:"jOt"+this.o,this.zLt=null!=(h=t.zLt)?h:"QOt"+this.o,this.OOt=e}},NY=0;function MY(t){return Mo({},t,{bCt:t.bCt?Zy(t.bCt):void 0})}r(),r(),r();var LY=class{get EO(){var t;return this.OO+(null!=(t=this.KOt)?t:0)}get YOt(){return this.JOt}get ZOt(){return this.$Ot}get MW(){return this.tFt.MW}iFt(t,i,e){this.OO=t,this.JOt=i,this.$Ot=e}constructor(t,i,e,s,n,r){this.tFt=void 0,this.eFt=void 0,this.ct=void 0,this.nyt=void 0,this.JLt=void 0,this.ZLt=void 0,this.JOt=void 0,this.$Ot=void 0,this.OO=void 0,this.xet=void 0,this.KOt=void 0,this.tFt=t,this.eFt=i,this.OO=e,this.JOt=s,this.$Ot=n,this.ct=r.ct,this.nyt=r.nyt,this.JLt=r.JLt,this.ZLt=r.ZLt}},OY=class{get EO(){var t;return this.OO+(null!=(t=this.sFt)?t:0)}get nFt(){return this.OO}get ct(){return this.WA}get nyt(){return this.rFt}get YOt(){return this.JOt}get ZOt(){return this.$Ot}get yOt(){return this.hFt}get oFt(){return this.aFt}get PO(){var t;return this.EO+(null!=(t=this.WA)?t:this.aFt)}set KOt(t){this.sFt=t;for(const i of this.hFt)i.KOt=t}get KOt(){return this.sFt}uFt(t){return this.hFt[t]}cFt(t){for(let i=0;i<this.hFt.length;i++){const e=this.hFt[i],s=e.EO,n=s+e.ct;if(s<=t&&t<=n)return t===n&&i+1<this.hFt.length?this.hFt[i+1]:e}}dFt(t){for(let i=this.hFt.length-1;i>=0;i--){const e=this.hFt[i];if(e.EO<=t)return e}}lFt(t){let i=this.dFt(t);for(;i&&!i.JLt&&i.eFt>0;)i=this.uFt(i.eFt-1);return i}iFt(t,i,e){const s=t.yOt.length!==this.hFt.length||e!==this.$Ot;this.JOt=i,this.$Ot=e,this.WA=t.ct,null!=this.SOt||(this.SOt=t.SOt),void 0===this.rFt&&(this.rFt=t.nyt),s&&this.fFt(t.yOt)}fFt(t){this.hFt.length>t.length&&(this.hFt.length=t.length);let i=0;for(let e=0;e<t.length;e++){const s=t[e],n=this.JOt&&0===e,r=this.$Ot&&e===t.length-1,h=this.OO+i;if(e<this.hFt.length)this.hFt[e].iFt(h,n,r);else{const t=new LY(this,e,h,n,r,s);t.KOt=this.sFt,this.hFt.push(t)}i+=s.ct}this.aFt=i}vFt(){Yo(this.hFt),this.aFt=0}constructor(t,i,e,s,n){this.WA=void 0,this.SOt=void 0,this.rFt=void 0,this.bOt=void 0,this.ZLt=void 0,this.JOt=void 0,this.$Ot=void 0,this.aOt=void 0,this.AOt=void 0,this.kOt=void 0,this.MW=void 0,this.OO=void 0,this.xet=void 0,this.hFt=[],this.aFt=0,this.sFt=void 0,this.OO=t,this.bOt=n.bOt,this.JOt=e,this.$Ot=s,this.WA=n.ct,this.SOt=n.SOt,this.rFt=n.nyt,this.ZLt=n.ZLt,this.aOt=n.aOt,this.AOt=n.AOt,this.kOt=i,this.MW=n.MW,this.fFt(n.yOt)}};r();var FY=function(t){return t._Ft="YES",t.gFt="v2",t}({});r();var UY=class extends R{};r(),r(),r();var VY=class extends _h{get Ca(){return this.hu||(this.hu=function(t){return po(zt(t),{get content(){return t.U},get class(){return t.RLt},get startDate(){return t.nq},get endDate(){return t.CLt},get duration(){return t.ct},get plannedDuration(){return t.DLt},get endOnNext(){return t.ILt},get scte35Cmd(){return t.MLt},get scte35Out(){return t.OLt},get scte35In(){return t.FLt},get customAttributes(){return t.BLt}})}(this)),this.hu}get RLt(){return this.pFt}get nq(){return this.mFt}get CLt(){return this.wFt}get ct(){return this.WA}get DLt(){return this.yFt}get ILt(){return this.AFt}get MLt(){return this.bFt}get OLt(){return this.SFt}get FLt(){return this.TFt}get BLt(){return this.kFt}er(t){let i=!1;var e;(void 0===this.pFt&&void 0!==t.RLt&&(i=!0,this.pFt=t.RLt),void 0===this.wFt&&void 0!==t.CLt&&(i=!0,this.wFt=t.CLt),void 0===this.WA&&void 0!==t.ct&&(i=!0,this.WA=t.ct),void 0===this.yFt&&void 0!==t.DLt&&(i=!0,this.yFt=t.DLt),!this.AFt&&t.ILt&&(i=!0,this.AFt=t.ILt),i=this.updateCustomAttributes(t,i),void 0===this.bFt&&void 0!==t.MLt&&(i=!0,this.bFt=t.MLt),void 0===this.SFt&&void 0!==t.OLt&&(i=!0,this.SFt=t.OLt),void 0===this.TFt&&void 0!==t.FLt&&(i=!0,this.TFt=t.FLt),this.EFt(),this.PFt(),this.xFt(),i)&&(this.So(new ue(this)),null==(e=this.FO)||e.So(new aE(this)))}updateCustomAttributes(t,i){let e=i;if(t.BLt)for(const i of w.keys(t.BLt))void 0===this.kFt[i]&&(e=!0,this.kFt[i]=t.BLt[i]);return e}EFt(){this.WA&&!this.wFt&&(this.wFt=new Date(this.mFt.getTime()+on(this.WA)))}PFt(){this.wFt&&!this.WA&&(this.WA=$f(this.wFt.getTime()-this.mFt.getTime()))}xFt(){this.VO===1/0&&(this.wFt||this.WA)&&(this.VO=HY(this.OO,this.WA,this.mFt,this.wFt))}constructor(t,i){super(i,HY(i,t.ct,t.nq,t.CLt),void 0,!1,t.o),this.pFt=void 0,this.mFt=void 0,this.wFt=void 0,this.WA=void 0,this.yFt=void 0,this.AFt=void 0,this.kFt=void 0,this.bFt=void 0,this.SFt=void 0,this.TFt=void 0,this.pFt=t.RLt,this.mFt=t.nq,this.wFt=t.CLt,this.WA=t.ct,this.yFt=t.DLt,this.AFt=Boolean(t.ILt),this.kFt=t.BLt||{},this.bFt=t.MLt,this.SFt=t.OLt,this.TFt=t.FLt,this.EFt(),this.PFt()}};function HY(t,i,e,s){return it(i)?t+i:s?t+($f(s.getTime())-$f(e.getTime())):1/0}var WY=class extends _L{er(t,i){qY(this,zY(t),i)}tV(t){GY(this.L.II,t),super.tV(t)}constructor(){super(void 0,void 0,nh.DATE_RANGE)}};function qY(t,i,e){const s=t.L.II;for(let e=s.length-1;e>=0;e--){const n=s[e],r=Jr(i,t=>t.o===n.o);r?n.er(r):t.WU(n)}for(const s of i){const i=s.nq;if(void 0!==i&&!t.m5(s.o)){const n=e(i),r=new VY(s,n);GY(t.L.II,r),t.tV(r)}}}function zY(t){const i=qh(),e=[];for(const s of t)if(i.has(s.o)){const t=i.get(s.o),e=Mo({},t,cS(s),{BLt:Mo({},t.BLt,s.BLt)});i.set(s.o,e)}else i.set(s.o,s),e.push(s.o);return e.map(t=>i.get(t))}function GY(t,i){const e=hf(t,t=>t.RLt===i.RLt);e&&e.ILt&&e.er({o:e.o,CLt:i.nq})}var XY=String.fromCharCode(95),jY=XY+"HLS_msn",QY=XY+"HLS_part",KY=XY+"HLS_skip",YY="HLSMediaPlaylist",JY=class{get POt(){if(0===this.fAt.length)return!1;return this.fAt[this.fAt.length-1].ZOt}get ct(){return this.WA}get Sx(){return this.N4}get IFt(){return this.RFt}get vLt(){return this.CFt}get fLt(){return this.DFt}get eOt(){return this.POt?0:this.BFt?this.BFt:this.CFt?3*this.CFt:void 0}get sOt(){var t;return null!=(t=this.NFt)?t:this.DFt?3*this.DFt:void 0}get $Lt(){return this.MFt}get tOt(){return this.LFt}get iOt(){return this.OFt}get IOt(){return this.FFt}get UFt(){return void 0!==this.fLt}get VFt(){if(this.POt)return!0;const t=zd.Mg()/1e3,i=this.HFt,e=this.WFt;return void 0!==i&&t-i<e}get HFt(){return this.qFt}get zFt(){if(this.GFt)return zd.Mg()/1e3-this.GFt}get KOt(){return this.sFt}get WFt(){var t;return null!=(t=this.CFt)?t:void 0===this.qFt?5:1}get ect(){return this.fAt}get EOt(){return this.XFt}get jFt(){return this.QFt}set jFt(t){this.QFt=t}get Tn(){return this.MU}get KFt(){return this.YFt}hLt(t){if(!t)return this.nyt;const i=zd.Dh(this.nyt);return void 0!==t.aOt&&i.searchParams.append(jY,String(t.aOt)),void 0!==t.JFt&&i.searchParams.append(QY,String(t.JFt)),void 0!==t.rD&&i.searchParams.append(KY,t.rD),i.href}mat(t){const i=this.ZFt(t);return i<0?void 0:this.fAt[i]}ZFt(t){const i=this.fAt;if(0===i.length)return-1;const e=t-i[0].aOt;return e<0||e>=i.length?-1:e}$Ft(t){if(0===this.fAt.length)return;const i=Xq(ZY.Ng,this.fAt,t);if(!(i<0)){const e=this.fAt[i];return t===e.PO&&i+1<this.fAt.length?this.fAt[i+1]:e}{const i=this.fAt[this.fAt.length-1];if(t===i.PO)return i}}tUt(t){if(0===this.fAt.length)return;const i=this.fAt[0];if(t<i.PO)return i;const e=this.fAt[this.fAt.length-1];return t>=e.EO?e:this.$Ft(t)}WOt(t){const i=this.tUt(t);if(void 0===i)return;for(let e=i.aOt-this.fAt[0].aOt;e>=0;e--){const i=this.fAt[e];if(void 0!==i.SOt)return new Date(i.SOt.getTime()+1e3*(t-i.EO))}}qOt(t){let i;for(const e of this.fAt)if($Y(e))if(void 0===i)i=e;else{if(!(e.SOt.getTime()<=t.getTime()))break;i=e}if(void 0!==i)return i.EO+(t.getTime()-i.SOt.getTime())/1e3}iUt(t){switch(t){case Qu.SLt:return this.eUt;case Qu.TLt:return this.sUt;default:return}}iFt(t){var i;void 0===this.CFt&&(this.CFt=null!=(i=t.DOt)?i:this.nUt(t));void 0===this.BFt&&void 0!==t.eOt&&(this.BFt=t.eOt),void 0===this.DFt&&void 0!==t.fLt&&(this.DFt=t.fLt),void 0===this.NFt&&void 0!==t.sOt&&(this.NFt=t.sOt),this.MFt=t.$Lt,this.LFt=t.tOt,this.OFt=t.iOt,this.FFt=t.IOt,this.pAt(t),this.rUt(t);const e=Jr(t.ROt,t=>t.Km===Qu.SLt),s=Jr(t.ROt,t=>t.Km===Qu.TLt);this.eUt=e?{nyt:e.nyt,Km:e.Km,kOt:t.kOt}:void 0,this.sUt=s?{nyt:s.nyt,Km:s.Km,kOt:t.kOt}:void 0,this.qFt=zd.Mg()/1e3;const n=this.N4.An(this.N4.V-1);this.hUt();const r=this.N4.An(this.N4.V-1);(!this.GFt||r-n>0)&&(this.GFt=this.qFt),null!=this.MU||(this.MU=t.Tn)}hUt(){this.RFt=this.oUt(),this.N4=this.aUt(this.RFt),this.WA=this.uUt()}oUt(){const t=this.ect;if(0===t.length)return ve.iL();const i=t[0].EO,e=t[t.length-1].PO;return new ve([i,e])}aUt(t){if(0===t.V||this.POt)return t;const i=t.Tn(0),e=t.An(0)-this.cSt;return e<i?ve.$M(i):new ve([i,e])}get cSt(){return this.POt?0:null!=(e=null!=(i=null!=(t=this.cUt)?t:this.sOt)?i:this.eOt)?e:0;var t,i,e}uUt(){return 0===this.fAt.length?0:this.POt?$l(this.fAt,t=>{var i;return null!=(i=t.ct)?i:t.oFt}):1/0}nUt(t){let i;for(const e of t.ect)if(void 0!==e.ct){const t=_.max(1,_.round(e.ct));(void 0===i||i<t)&&(i=t)}if(void 0===i)throw new m("HLSModel - Could not determine required segment target duration.");return i}pAt(t){if(0===t.ect.length)return Yo(this.fAt),void this.dUt();const i=this.lUt(t);if(!i)return;let e,s,n;i.fUt>0&&this.fAt.splice(0,i.fUt);const r=t.hOt;if(r>0){if(r>this.fAt.length)throw new UY("New playlist skips over missing segments.");const i=this.fAt[r-1];if(void 0===i.ct)throw new UY("New playlist skips over an incomplete segment.");e=i.nFt+i.ct,n=i.kOt-t.kOt,s=r;for(let t=0;t<r;t++)this.fAt[t].vFt()}else e=i.vUt,n=0,s=0;for(let i=0;i<t.ect.length;i++,s++){const r=t.ect[i],h=0===i,o=t.POt&&i===t.ect.length-1,a=r.ct,u=r.kOt+n;if(s<this.fAt.length){const t=this.fAt[s];0,t.iFt(r,h,o)}else{let t=r;if(this.fAt.length>0&&void 0===t.bOt){t=Mo({},t,{bOt:this.fAt[this.fAt.length-1].bOt})}const i=new OY(e,u,h,o,t);i.KOt=this.sFt,this.fAt.push(i)}void 0!==a&&(e+=a)}}lUt(t){if(0===this.fAt.length)return{fUt:0,vUt:0};const i=this.fAt[0].aOt,e=this.fAt[this.fAt.length-1].aOt,s=t.ect[0].aOt-t.hOt,n=t.ect[t.ect.length-1].aOt;let r=0,h=0;if(s<i){const e=this.ect[0].SOt,n=t.ect[0].SOt;if(!(e&&n&&e<n))return void Ft.cLt(YY,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+i+")");r=this.fAt.length,this.dUt()}else{if(n<e)return void Ft.cLt(YY,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+e+")");if(e<s){var o;h=null!=(o=function(t,i){const e=hf(t,t=>void 0!==t.SOt);if(void 0===e)return;const s=function(t){let i=0;for(const s of t){if(s.AOt)return;if(s.SOt)return[s,i];var e;i+=null!=(e=s.ct)?e:0}return}(i.ect);if(void 0===s)return;const[n,r]=s;if(e.kOt!==n.kOt)return;const h=(n.SOt.getTime()-e.SOt.getTime())/1e3;return e.nFt+h-r}(this.fAt,t))?o:function(t,i,e){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:_.max(e,s.oFt),h=e*(i-s.aOt-1);return s.nFt+r+h}(this.fAt,s,this.CFt),Ft.uLt(YY,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+e+"), resetting playlist and restarting at "+h+"s"),r=this.fAt.length,this.dUt()}else{0;const t=li(this.fAt,t=>t.aOt===s);0,h=this.fAt[t].nFt,t>0&&(r=t)}}return{fUt:r,vUt:h}}rUt(t){let i=t.EOt.map($K);if(t.iOt&&t.BOt.rD===FY.gFt&&(i=this.XFt.concat(i)),this.XFt=zY(i),t.oOt)for(const i of t.oOt){const t=li(this.XFt,t=>t.o===i);t>=0&&ka(this.XFt,t)}}_Ut(t,i){if(this.sFt!==t){this.sFt=t;for(const t of this.fAt)t.KOt=this.sFt;this.hUt()}this.YFt=i}dUt(){this.sFt=void 0,this.YFt=void 0}constructor(t,i,e){this.nyt=void 0,this.qFt=void 0,this.GFt=void 0,this.eUt=void 0,this.sUt=void 0,this.CFt=void 0,this.DFt=void 0,this.BFt=void 0,this.NFt=void 0,this.fAt=[],this.XFt=[],this.sFt=void 0,this.MFt=!1,this.LFt=void 0,this.OFt=!1,this.FFt=Bn.pk,this.N4=ve.iL(),this.RFt=ve.iL(),this.WA=void 0,this.QFt=-1/0,this.MU=void 0,this.cUt=void 0,this.YFt=void 0,this.nyt=t,this.MU=i,this.cUt=e}},ZY=class t{static get Ng(){return null!=this.lAt||(this.lAt=new t),this.lAt}aAt(t){return t.EO}uAt(t){return t.PO}cAt(t,i){return gu(t,i)}dAt(t,i,e){return(t-i)/(e-i)}};function $Y(t){return void 0!==t.SOt}function tJ(t){return void 0!==t.yOt}function iJ(t){return tJ(t)?t.YOt:0===t.eFt&&t.tFt.YOt}function eJ(t,i){return tJ(t)?tJ(i)?t.aOt+1===i.aOt:0===i.eFt&&eJ(t,i.tFt):t.eFt===t.tFt.yOt.length-1?eJ(t.tFt,i):!tJ(i)&&t.tFt===i.tFt&&t.eFt+1===i.eFt}ZY.lAt=void 0,r(),r(),r();var sJ=class extends R{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var nJ=class{gUt(t){const i=this.pUt.get(t);return void 0!==i&&rJ(i)}mUt(t){if(this.wUt()>t)return Promise.reject(new sJ);const i=[];for(const s of this.yUt){var e;if(s<t)null==(e=this.pUt.get(s))||e.AUt.jy(new sJ),this.pUt.delete(s);else i.push(s)}return this.yUt=i,-1===this.yUt.indexOf(t)&&this.yUt.push(t),this.bUt(t).AUt.Qy}SUt(t){const i=this.pUt.get(t);if(!i||!rJ(i))throw new m("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return i}TUt(t){return this.SUt(t).bU}kUt(t,i){const e=tJ(i)?i:i.tFt,s=this.SUt(e.kOt);let n=t.lO(s.bU);const r=$c.eU(i.EO).lF(n);if(r.uF().eF(DE())){const t=_.round(r.iF()/CE().iF());n=n.lO(CE().VF(t))}return n}EUt(t,i){return this.kUt(t,i).lF(t)}PUt(t,i,e,s,n,r){this.xUt<t&&(this.xUt=t);const h=this.bUt(t);void 0===h.bU&&(h.IUt.some(t=>t.Lot===i)||(h.IUt.push({Lot:i,RUt:e,CUt:s.JF(e.qD),DUt:n,BUt:r}),this.NUt(h,t)))}NUt(t,i){if(t.bU||!this.MUt(t))return;const e=function(t){return vf(t,hJ)}(t.IUt);t.bU=e.CUt.lF(e.RUt),t.AUt.Xy(),Yo(t.IUt),oi(this.yUt,i)}MUt(t){return this.LUt.length>0&&this.LUt.every(i=>t.IUt.some(t=>t.Lot===i))}bUt(t){if(this.pUt.has(t))return this.pUt.get(t);{const i={bU:void 0,AUt:new pa,IUt:[]};return this.pUt.set(t,i),i}}OUt(t){this.LUt=t,this.pUt.forEach((t,i)=>this.NUt(t,i))}FUt(){this.xUt=-1}wUt(){return this.xUt}zg(){this.pUt.forEach(t=>t.AUt.Zg()),this.pUt.clear()}constructor(){this.LUt=[],this.pUt=ar(),this.yUt=[],this.xUt=-1}};function rJ(t){return void 0!==t.bU}function hJ(t,i){return-function(t,i){if(t.BUt||i.BUt)return function(t,i){let e=t.lF(i);return t.vF()||i.vF()||(e.nF(DE())?e=e.lF(CE()):e.aF(DE().dF())&&(e=e.lO(CE()))),e}(t.RUt,i.RUt).sF($c.wF);return t.RUt.sF(i.RUt)}(t,i)||function(t,i){return t.DUt===i.DUt?Qc.rh:t.DUt?Qc.Fg:Qc.Ug}(t,i)||function(t,i){return t.CUt.sF(i.CUt)}(t,i)}var oJ=class{get UUt(){return this.VUt}get HUt(){return this.WUt}get mM(){return this.qUt}iFt(t,i){if(YK(t))if(0===this.WUt.length)this.zUt(t);else{if(!i)return void Ft.cLt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");i.IMt.iFt(t)}else{if(0!==this.WUt.length)return void Ft.cLt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.GUt(t)}}zUt(t){const i=this.XUt(t.nyt);i.iFt(t);const e=this.jUt(nl.Dk,i),s=this.jUt(nl.Bk,i),n=new BY({nyt:i.nyt,kW:0,tyt:0,iyt:NaN,frt:void 0,uCt:void 0,plt:0,WLt:[],GLt:void 0,QLt:void 0,qLt:void 0,jLt:void 0,XLt:void 0,zLt:void 0},i,[e,s]);this.WUt.push(n)}GUt(t){this.VUt.push(...t.MW);const i=this.QUt(t);for(const e of t.mOt){const s=i.filter(t=>uJ(t,e));this.KUt(e,s);const n=new BY(e,this.XUt(e.nyt,t.Tn),s);this.WUt.push(n)}}XUt(t,i){let e=this.YUt.get(t);return void 0===e&&(e=new JY(t,i,this.cUt),this.YUt.set(t,e)),e}QUt(t){const i=[];for(const e of t.KD)if(void 0===e.nyt){for(const s of t.mOt)if(aJ(e.Km,e.BMt,s)){const t=new bK(e,this.XUt(s.nyt));i.push(t)}}else{const t=new bK(e,this.XUt(e.nyt));i.push(t)}return i}jUt(t,i){return new bK({Km:t,nyt:void 0,BMt:"",bs:void 0,HLt:void 0,l:"",RMt:!0,CMt:!1,DMt:!1,LMt:void 0,NMt:void 0,hCt:void 0},i)}KUt(t,i){const e=i.filter(t=>t.Km===nl.Dk),s=i.filter(t=>t.Km===nl.Bk),n=t.frt&&(t.frt.bCt||t.frt.yCt);if((!n||t.frt.bCt)&&0===s.length){const e=this.jUt(nl.Bk,this.XUt(t.nyt));i.push(e)}if((!n||t.frt.yCt)&&0===e.length){const e=this.jUt(nl.Dk,this.XUt(t.nyt));i.push(e)}t.frt&&t.frt.ULt}JUt(t){for(const i of this.WUt)for(const e of i.lLt)if(e===t)return e}ZUt(t){for(const i of this.WUt)if(i===t)return i}$Ut(t){for(const i of this.WUt)if(pi(i.lLt,t))return i}zg(){Yo(this.WUt),Yo(this.VUt),this.YUt.clear(),this.qUt.zg()}constructor(t,i){this.WUt=[],this.VUt=[],this.YUt=qh(),this.qUt=new nJ,this.cUt=void 0,this.tVt=void 0,this.tVt=t,this.cUt=i}};function aJ(t,i,e){switch(t){case nl.Dk:return e.qLt===i;case nl.Bk:return e.jLt===i;case nl.OU:return e.XLt===i;case nl.bLt:return e.zLt===i}return!1}function uJ(t,i){return aJ(t.Km,t.BMt,i)&&(!t.MMt||t.IMt.nyt===i.nyt)}r();var cJ=class extends wp{constructor(t){super(vJ.iVt),this.UMt=void 0,this.UMt=t}};r();var dJ=class extends wp{constructor(t){super(vJ.eVt),this.UMt=void 0,this.UMt=t}};r();var lJ=class extends wp{constructor(){super(d.ey)}},fJ="HlsModelUpdater",vJ=function(t){return t.iVt="sVt",t.eVt="nVt",t}({}),_J=class extends Ne{get rVt(){return this.hVt}get oVt(){return this.aVt}get Br(){return this.uyt}get uVt(){return this.cVt}async dVt(t){const i=this.uyt.tVt;if(!i)throw new m("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.So(new Pt);const e=await this.lVt(i,{},2,!0,t),s=e.IMt;if(!KK(s)&&!YK(s))throw new m("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");KK(s)||Ft.hB(fJ,"Detected media playlist only HLS stream."),this.fVt(s),e.vVt&&(this.aVt=!0,await this._Vt(t)),this.hVt=!0}async gVt(t,i,e,s){const n=this.uyt.JUt(t);if(!n)throw new m("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={aOt:i,JFt:e,rD:wJ(n)},h=on(_.max(1,3*t.IMt.WFt));try{await this.pVt(n,r,s,h)}catch(t){throw sa(t),this.mVt(n),t}}wVt(t,i){const e=this.uyt.JUt(t);if(!e)throw new m("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={aOt:void 0,JFt:void 0,rD:wJ(e)},n=on(_.max(1,3*t.IMt.WFt));return this.pVt(e,s,i,n)}yVt(t,i){return this.AVt.has(t.jI)||this.AVt.set(t.jI,new pa),Nc(this.AVt.get(t.jI).Qy,i)}mVt(t){this.So(new dJ(t))}async pVt(t,i,e,s){const n=t.IMt.hLt(i);let r;try{r=(await this.lVt(n,i,0,this.aVt,e,s)).IMt}catch(i){throw sa(i),t.IMt.jFt=zd.Mg(),i}if(!YK(r))throw new m("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.bVt&&t!==this.bVt&&!this.bVt.IMt.VFt)try{await this.wVt(this.bVt,e)}catch(i){sa(i),this.bVt=t,this.SVt()}try{this.fVt(r,t)}catch(n){if(n instanceof UY&&void 0!==i.rD){const n=Mo({},i,{rD:void 0});return this.pVt(t,n,e,s)}throw n}this.bVt=t}async lVt(t,i,e,s,n,r){if(Ft.hB(fJ,"Loading HLS playlist at "+t+"."),s){const i=await this.TVt(t,n);if(void 0!==i)return{IMt:i,vVt:!0}}return{IMt:await this.kVt(t,i,e,n,r),vVt:!1}}async TVt(t,i){try{const e=await this.eut.HSt([t]);if(ii(i),void 0!==e)return DY(e.responseURL,{},e.data)}catch(t){sa(t)}}async kVt(t,i,e,s,n){const r={Yu:t,dk:M.NT,zk:this.FSt,Uk:X.GET,Km:Al.wk,Yg:s,Vk:n},h=await $i(()=>this.EVt(r),s,e);return DY(h.gk,i,h.ck)}async EVt(t){try{const i=await this.nV.lk(t);return{ck:await i.UT(),gk:i.gk}}catch(t){throw D(t)||this.So(new lJ),t}}async _Vt(t){ii(t);const i=[];for(const e of this.uyt.HUt)for(const s of e.lLt)i.push(this.PVt(s,t));await Promise.all(i)}async PVt(t,i){try{const e=await this.eut.HSt([t.IMt.nyt]);ii(i),void 0===e||t.IMt.VFt||await this.wVt(t,i)}catch(t){sa(t)}}SVt(){for(const t of this.uyt.HUt)for(const i of t.lLt)i!==this.bVt&&void 0!==i.IMt.KOt&&(i.IMt.VFt?this.xVt(i):i.IMt.dUt())}xVt(t){if(0!==t.IMt.ect.length){if(!this.bVt)return this.bVt=t,void this.bVt.IMt._Ut(0,void 0);if(this.IVt(this.bVt),!this.IVt(t)&&void 0===t.IMt.KOt){const i=this.RVt(t,this.bVt);Ft.uLt(fJ,"Assuming global timeline offset of "+i+"s for rendition "+t.IMt.nyt+"."),t.IMt._Ut(i,void 0)}}}RVt(t,i){if(gJ(t)){const e=t.IMt.ect[0],s=i.IMt.ect[0];return Ft.uLt(fJ,"Synchronizing by start of VOD: "+s.EO+" vs "+e.EO),s.EO-e.nFt}const e=function(t,i){let e=t.length-1,s=i.length-1;for(;e>=0&&s>=0;){const n=t[e],r=i[s];if(n.kOt>r.kOt)e--;else if(n.kOt<r.kOt)s--;else if(n.AOt){if(r.AOt)return{segment:n,referenceSegment:r};s--}else e--}return}(t.IMt.ect,i.IMt.ect);if(void 0!==e){const{segment:t,referenceSegment:i}=e;return Ft.uLt(fJ,"Synchronizing by start of discontinuity #"+i.kOt+": "+i.EO+" vs "+t.EO),i.EO-t.nFt}const s=mJ(t.IMt.ect);if(void 0!==s){const t=mJ(i.IMt.ect);if(void 0!==t){Ft.uLt(fJ,"Synchronizing by PDT:",t.SOt.toISOString()+" vs "+s.SOt.getTime());return t.EO-s.nFt-(t.SOt.getTime()-s.SOt.getTime())/1e3}}const n=pJ(i),r=pJ(t);var h;const o=null!=(h=t.IMt.KOt)?h:0;return Ft.uLt(fJ,"Synchronizing by last segment:",n+" vs "+r),n-r+o}IVt(t){const i=this.uyt.JUt(t);if(!i)return!1;if(gJ(i))return!1;const e=function(t,i){return hf(t,t=>void 0!==t.xet&&i.gUt(t.kOt))}(i.IMt.ect,this.uyt.mM);if(void 0===e)return!1;if(i.IMt.KFt===e.kOt)return!0;const s=this.uyt.mM.kUt(e.xet,e).iF()-e.nFt;return Ft.uLt(fJ,"Synchronize by media timestamp: "+s+"s for rendition "+t.IMt.nyt+"."),i.IMt._Ut(s,e.kOt),(void 0===this.bVt||void 0===this.bVt.IMt.KFt||this.bVt.IMt.KFt<e.kOt)&&(this.bVt=i),!0}fVt(t,i){var e;(this.uyt.iFt(t,i),YK(t)&&i)&&(this.cVt=i,this.xVt(i),this.So(new cJ(i)),null==(e=this.AVt.get(i.jI))||e.Xy(),this.AVt.delete(i.jI));this.So(new Rz)}CVt(t,i){for(const e of this.uyt.HUt){const s=Jr(e.UOt,t=>t.IMt===i);void 0!==s&&void 0!==t.bCt&&(s.frt=tY(s.frt,t));const n=Jr(e.FOt,t=>t.IMt===i);void 0!==n&&void 0!==t.yCt&&(n.frt=tY(n.frt,t)),e.LOt||void 0===s&&void 0===n||(e.frt=tY(e.frt,t))}}DVt(t,i){for(const e of this.uyt.HUt){const s=Jr(e.UOt,t=>t.IMt===i);void 0!==s&&void 0===t.bCt&&e.zOt(s);const n=Jr(e.FOt,t=>t.IMt===i);void 0!==n&&void 0===t.yCt&&e.zOt(n)}}zg(){this.Vo(),this.uyt.zg(),this.AVt.forEach(t=>t.Zg()),this.AVt.clear()}constructor(t,i,e,s,n){super(),this.nV=void 0,this.eut=void 0,this.FSt=void 0,this.uyt=void 0,this.hVt=void 0,this.aVt=void 0,this.bVt=void 0,this.cVt=void 0,this.AVt=void 0,this.nV=t,this.eut=i,this.FSt=e,this.hVt=!1,this.aVt=!1,this.bVt=void 0,this.cVt=void 0,this.AVt=ar(),this.uyt=new oJ(s,n)}};function gJ(t){return t.IMt.POt||t.IMt.IOt===Bn.xLt}function pJ(t){const i=t.IMt.ect;return i[i.length-1].PO}function mJ(t){return hf(t,t=>void 0!==t.SOt)}function wJ(t){if(void 0!==t.IMt.tOt&&!t.IMt.POt&&!(void 0===t.IMt.HFt||zd.Mg()/1e3-t.IMt.HFt>=t.IMt.tOt/2))return t.IMt.iOt?FY.gFt:FY._Ft}var yJ=class extends es{rUt(t){if(0===t.IMt.EOt.length)return;this.BVt||(this.BVt=this.JU.tI(Ao.VU,void 0,void 0,void 0,void 0,nh.DATE_RANGE),this.tt(this.BVt));qY(this.BVt,t.IMt.EOt,i=>{var e;return null!=(e=t.IMt.qOt(i))?e:NaN})}ZU(t,i,e){const s=Ut(t,i,e);return this.BVt===t&&(this.BVt=s),s}constructor(t,i){super(i),this.Fkt=void 0,this.BVt=void 0,this.NVt=t=>{this.rUt(t.UMt)},this.Fkt=t,this.Fkt.wn(vJ.iVt,this.NVt)}};r();var AJ=class extends wp{constructor(){super(AK.TMt)}};r(),r(),r();var bJ=class{get MVt(){return this.Y2}get IP(){return XU(this.Trt.IP,this.Trt.M3)}get ect(){return this.fAt}get _pt(){return this.dpt}LVt(t){var i;return null==(i=this.OVt(t))?void 0:i.UMt}FVt(t){this.Y2=t,this.UVt()}Odt(t,i,e,s,n,r){this.fAt.push({UMt:t,$at:i,VVt:ve.tL(n,r),HVt:ve.tL(e,s)}),this.UVt()}OVt(t){return Jr(this.fAt,i=>i.HVt.Cr(t))}mat(t){return Jr(this.fAt,i=>i.$at===t)}Rct(t,i){return Jr(this.fAt,e=>e.UMt===t&&eJ(e.$at,i))}C3(){const t=this.IP;t.V>0&&(this.dpt=t.An(t.V-1))}UVt(){const t=this.Trt.IP;this.fAt=this.fAt.filter(i=>0!==t.Mn(i.HVt).V)}constructor(t){this.Trt=void 0,this.fAt=void 0,this.Y2=void 0,this.dpt=void 0,this.Trt=t,this.fAt=[],this.Y2=void 0,this.dpt=void 0}};r();var SJ=188,TJ=function(t){return t[t.pk=0]="pk",t[t.fR=1]="fR",t[t.WVt=2]="WVt",t[t.qVt=3]="qVt",t}({});function kJ(t){return EJ(t)?1:function(t){return function(t){if(t.length<376)return-1;const i=t.length<564?2:3,e=_.min(1e3,t.length-i*SJ);for(let s=0;s<=e;s++){let e=!0;for(let n=0;n<i;n++)if(71!==t[s+n*SJ]){e=!1;break}if(e)return s}return-1}(t)>=0}(t)?2:function(t){return null!==iL(dh(t),new Ui)}(t)?3:0}function EJ(t){const i=ao(t,0,_.min(t.length,16384));return jt.ED(dh(i))}var PJ=class{get Km(){return this.Vp}get zVt(){return this.Dot}get GVt(){return this.XVt}get $It(){return void 0!==this.jVt}get QVt(){return this.KVt}YVt(){if(this.$It)throw new m("Cannot perform new operation while BufferAppender is still busy")}JVt(t){this.$y!==t&&(this.YVt(),this.$y=t,this.Dot=new bJ(t))}ZVt(){return this.jVt?this.jVt.Qy:Promise.resolve()}$Vt(t){const i=this.Dot._pt;return void 0!==i&&this.tHt(t,i)}tHt(t,i){var e;const s=_.min(t,i);var n;return null!=(n=null==(e=this.Dot.IP.CM().UM(this.GVt).JM(s))?void 0:e.Cr(i))&&n}iHt(t){return this.Dot.LVt(t)}Zg(){this.nT.Zg(),this.nT=new at,this.eHt=!0}z2(t){this.YVt(),this.jVt=new pa;const i=i=>{this.nHt.sHt(t),this.rHt(i)};this.G2(t,this.nT.Yg).then(i,i)}async G2(t,i){Ft.uLt(MK,"Appending initializer",we(t.hHt.nyt)),this.Ugt=t,await this.$y.z2(t,i),void 0!==this.hBt&&this.Vp===Ci.Bk&&EJ(t.ck.ck)&&this.hBt.Jrt(t.ck.ck),Ft.uLt(MK,"Appended initializer",we(t.hHt.nyt)),this.eHt=!1,this.Dot.FVt(t)}cdt(t){this.YVt(),this.jVt=new pa;const i=i=>{this.nHt.sHt(t),this.rHt(i)};this.oHt(t,this.nT.Yg).then(i,i)}async oHt(t,i){const e=t.UMt;if(void 0===e.IMt.vLt)throw new m("HlsBufferAppender: Cannot append HLSAsset to "+this.Vp+" buffer for a HLSRendition with an undefined targetDuration.");this.eHt&&void 0!==this.Ugt&&await this.G2(this.Ugt,i);const s=this.Dot.IP.kM,n=this.$y.IP;Ft.uLt(MK,"Appending",we(t.hHt.nyt)),await this.$y.H2(t,i),void 0!==t.ck&&this.aHt(t.ck,t),Ft.uLt(MK,"Appended",we(t.hHt.nyt),s,this.Dot.IP.kM);const r=t.EO,h=r+t.ct,o=t.hHt,a=o.EO;var u;const c=o.EO+(null!=(u=o.ct)?u:0);this.Dot.Odt(e,o,r,h,a,c),this.uHt(e,o,r,h,n),t.hHt.ZOt&&this.Dot.C3()}uHt(t,i,e,s,n){if(this.Km!==Ci.Bk)return;const r=this.$y.IP.UM(n),h=this.Dot.Rct(t,i);if(h)if(this.cHt(h))if(0===r.V){if(void 0===this.Dot.mat(i)){const t=this.$y.M3.Mn(new ve([e,s]));this.XVt=this.XVt.OM(t)}}else{const t=r.Tn(0),i=new ve([t,s]);if(this.XVt=this.XVt.UM(i),t>e){const i=this.$y.M3.Mn(new ve([e,t]));this.XVt=this.XVt.OM(i)}}else{const t=r.V>0&&r.Tn(0)<e?r.Tn(0):e;this.XVt=this.XVt.UM(new ve([t,s]))}else if(0===r.V){const t=this.$y.M3.Mn(new ve([e,s]));this.XVt=this.XVt.OM(t)}else{var o;if(i.YOt)return;const t=r.Tn(0),s=null==(o=n.JM(e))?void 0:o.An(0),h=s&&s>e?s:e;if(t>h){const t=this.$y.M3.Mn(new ve([h,r.Tn(0)]));this.XVt=this.XVt.OM(t)}}}cHt(t){const i=t.HVt,e=i.Tn(0),s=i.An(i.V-1),n=i.PM(0),r=i.IM(i.V-1);return this.XVt.HM(e,s,n,r)}aHt(t,i){var e;if(!EJ(t.ck))return;const s=i.EO,n=s+i.ct,r=i.bU;if(null==(e=this.wpt)||e.Odt(t.ck,s,r),void 0!==this.hBt&&this.Vp===Ci.Bk){const e=i.hHt.ZOt;this.hBt.Odt(t.ck,s,n,r,i.UMt,e)}const h=[];void 0!==this.wpt&&h.push(this.wpt),void 0!==this.hBt&&h.push(this.hBt),$P(this.$y.IP,h)}dHt(t){this.YVt(),this.jVt=new pa;try{Ft.uLt(MK,"Appending gap from "+t.lHt+" to "+t.fHt,we(t.$at.nyt)),this.F3(t.lHt,t.fHt)}finally{this.nHt.sHt(t),this.rHt()}}F3(t,i){this.$y.F3(t,i)}constructor(t,i,e,s,n,r,h){this.$y=void 0,this.Dot=void 0,this.nHt=void 0,this.Vp=void 0,this.wpt=void 0,this.hBt=void 0,this.vHt=void 0,this.jVt=void 0,this.nT=new at,this.XVt=ve.iL(),this._Ht=void 0,this.Ugt=void 0,this.eHt=!0,this.KVt=!1,this.rHt=t=>{this.jVt&&(t?FD(t)&&xJ(this)?this.vHt.YY(this.$y.IP.ZM)?this.jVt.Xy():this.jVt.jy(t):D(t)?this.jVt.Xy():(this.KVt=!0,this.jVt.jy(t)):this.jVt.Xy(),this.jVt=void 0)},this.Vp=t,this.nHt=e,this.$y=i,this.Dot=s,this.vHt=n,this.wpt=r,this.hBt=h}};function xJ(t){return RT(t.Km)}r(),r();var IJ=class{async gHt(t,i,e,s){const n=await this.pHt(i,s);return await this.mHt.gHt(t,n,e)}async pHt(t,i){var e;if((null==(e=this.wHt)?void 0:e.Yu)!==t){Ft.uLt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const e=await this.nV.lk({Yu:t,dk:M.CT,Uk:X.GET,Yg:i,Km:Al.bk,Wk:Xa.Ck,zk:this.FSt}),s=await e.HT(),n=new j(s);this.wHt={Yu:t,ck:n}}return this.wHt.ck}constructor(t,i,e){this.mHt=void 0,this.nV=void 0,this.FSt=void 0,this.wHt=void 0,this.mHt=t,this.nV=i,this.FSt=e,this.wHt=void 0}};r();var RJ=class{async lk(t,i,e,s,n){const r=await this.yHt(t,i,e,M.CT,s,n),h=await r.HT(n);return{httpStatusCode:r.hk,response:new j(h)}}async AHt(t,i,e,s,n){return(await this.yHt(t,i,e,M.BT,s,n)).WT(n)}async yHt(t,i,e,s,n,r){let h;t.LAt&&(h=QK(t.LAt.Tn,t.LAt.V),0===h[0]&&h[1]===Xl&&(h=void 0));const o=h?{Range:"bytes="+h[0]+"-"+h[1]}:void 0,a=new $n({Yu:t.zE,dk:s,fk:o,zk:this.FSt,Uk:X.GET,Km:i,Wk:e,qk:this.Tat,jk:s===M.BT,Gk:n,Yg:r});try{const i=await this.eut.iut(t.zE,h);if(ii(r),void 0!==i)return null==n||n(i.buffer.byteLength,i.buffer.byteLength),new sc({lk:a,dk:a.dk,ck:i.buffer})}catch(t){sa(t)}return await $i(()=>Nc(this.nV.lk(a),a.Yg),r,this.rrt)}constructor(t,i,e,s,n=2){this.nV=void 0,this.eut=void 0,this.Tat=void 0,this.FSt=void 0,this.rrt=void 0,this.nV=t,this.eut=i,this.Tat=e,this.FSt=s,this.rrt=n}};r();var CJ=class{bHt(){return this.SHt.IMt.$Lt}async THt(t,i,e){if(!this.bHt())throw new m("Could not perform blocking playlist update.");const s=this.kHt,n={aOt:t,JFt:i};return void 0!==s&&function(t,i,e){if(t.aOt===i.aOt){if(t.JFt===i.JFt)return!0;if(0===t.JFt&&void 0===i.JFt)return!0}if(t.aOt===i.aOt+1&&0===t.JFt&&void 0!==i.JFt){const t=e.mat(i.aOt);if(t&&t.nyt&&i.JFt>=t.yOt.length)return!0}return!1}(s,n,this.SHt.IMt)||(await this.EHt(),this.PHt(n)),this.Fkt.yVt(this.SHt,e)}xHt(t){return this.PHt(),this.Fkt.yVt(this.SHt,t)}PHt(t){if(!this.IHt&&!this.RHt){const i=()=>{this.IHt=void 0};this.IHt=this.CHt(t,this.DHt.Yg).then(i,i)}}async EHt(){this.IHt&&(this.DHt.Zg(),this.DHt=new at,await this.IHt.catch(Ct),this.IHt=void 0)}async CHt(t,i){let e=t;for(;;){if(ii(i),this.SHt.IMt.POt&&this.SHt.IMt.VFt)return;null!=e||(e=this.BHt()),this.kHt=e;try{if(e)await this.Fkt.gVt(this.SHt,e.aOt,e.JFt,i);else{const t=zd.Mg()-this.En,e=1e3*this.SHt.IMt.WFt;t<e&&await Er(e-t,i),await this.Fkt.wVt(this.SHt,i)}}catch(t){throw this.kHt=void 0,sa(t),this.Fkt.mVt(this.SHt),t}e=void 0,this.En=zd.Mg()}}BHt(){const t=this.SHt.IMt;if(!t.$Lt||t.POt||0===t.ect.length)return;const i=t.ect[t.ect.length-1];return i.nyt?{aOt:i.aOt+1,JFt:t.UFt?0:void 0}:{aOt:i.aOt,JFt:i.yOt.length}}zg(){this.RHt=!0,Wr(this.EHt())}constructor(t,i){this.Fkt=void 0,this.SHt=void 0,this.IHt=void 0,this.DHt=new at,this.En=-1/0,this.kHt=void 0,this.RHt=!1,this.Fkt=t,this.SHt=i,this.PHt()}};r();var DJ=function(t){return t[t.SLt=0]="SLt",t[t.TLt=1]="TLt",t[t.yk=2]="yk",t[t.Ak=3]="Ak",t}({});r(),r();var ms="AssetExtractor",BJ=class{NHt(t,i,e){let s=i;for(const i of this.MHt){if(s>=t)return!0;if(s<i.Tn)return!1;if(s<i.An){if(e<=i.An)return!0;s=i.An}}return s>=t}LHt(t,i){const e=[];for(let s=0;s<this.MHt.length;s+=1){const n=this.MHt[s],r=t-n.Tn,h=n.ck.length,o=_.min(h,_.max(r,0)),a=_.max(0,i+r),u=gl(n.ck,o,a);u.length&&(s=this.OHt(s,n,t,o,a),e.push(u))}return e}FHt(t,i){this.MHt.push({Tn:t,An:t+i.length,ck:i})}OHt(t,i,e,s,n){let r=t;this.MHt.splice(r,1),r-=1,i.Tn<e&&(r+=1,this.MHt.splice(r,0,{Tn:i.Tn,An:e,ck:gl(i.ck,0,s)}));const h=e+n-s;return h<i.An&&(r+=1,this.MHt.splice(r,0,{Tn:h,An:i.An,ck:gl(i.ck,n)})),r}constructor(){this.MHt=[]}},NJ=class{get UHt(){return this.VHt}async HHt(){const t=await this.Wd.read();if(t.done)throw this.VHt=1/0,new m("No more data can be read from the given stream.");return this.VHt+=t.value.length,t.value}async WHt(t){await this.Wd.cancel(t)}constructor(t,i){this.VHt=void 0,this.Wd=void 0,this.VHt=i,this.Wd=t.getReader()}},MJ=class{qHt(){this.zHt.Xy(),this.zHt=new pa}GHt(t){const{OAt:i,FAt:e}=OJ(this.rFt.LAt),s=this.XHt.LHt(i,e-i);Ft.uLt(ms,"Collected "+s.length+" chunks.");for(const i of s)t.enqueue(i)}async readAndSliceOutAssetBytes(t){await this.jHt.Qy;const{OAt:i,FAt:e}=OJ(this.rFt.LAt);try{for(;;){const s=this.Wd.UHt,n=await this.Wd.HHt(),r=n.length;Ft.uLt(ms,"Read "+r+" at "+s+" for extraction of "+we(this.rFt));const h=_.min(s+r,i)-s;if(!(h>0)){if(s+r<=e)return Ft.uLt(ms,"Extracting the read data range for extraction of "+we(this.rFt)),t.enqueue(n),this.qHt(),Wr(this.readAndSliceOutAssetBytes(t));{const i=e-s,h=gl(n,0,i),o=gl(n,i);return h.length>0&&(Ft.uLt(ms,"Extracting "+h.length+" bytes for extraction of "+we(this.rFt)),t.enqueue(h)),Ft.uLt(ms,"Of the read "+r+" bytes, the last "+o.length+" will be stored locally for extraction of "+we(this.rFt)),this.XHt.FHt(s+i,o),Ft.uLt(ms,"Extraction of "+we(this.rFt)+" completed as the entire request has been fulfilled."),this.QHt(t),void(this.KHt&&(Ft.uLt(ms,"Aborting stream upstream as no more bytes are needed from "+we(this.rFt)+"."),await this.Wd.WHt("AssetExtraction - AbortOnEnd")))}}{const i=gl(n,0,h),e=gl(n,h);if(Ft.uLt(ms,"Of the read "+r+" bytes, the first "+h+" will be stored locally for extraction of "+we(this.rFt)),this.XHt.FHt(s,i),e.length>0)return Ft.uLt(ms,"Extracting "+e.length+" bytes for extraction of "+we(this.rFt)),t.enqueue(e),this.qHt(),Wr(this.readAndSliceOutAssetBytes(t))}}}catch(i){Ft.uLt(ms,"Extraction of "+we(this.rFt)+" completed as the entire source stream has been read."),this.QHt(t)}}QHt(t){t.close(),this.qHt(),this.YHt.Xy()}start(t){Ft.uLt(ms,"Preparing to push all collected data to controller for extraction of "+we(this.rFt)),this.GHt(t),Ft.uLt(ms,"Collected data pushed to controller for extraction of "+we(this.rFt));const{FAt:i}=OJ(this.rFt.LAt);this.Wd.UHt>=i?(Ft.uLt(ms,"Extraction of "+we(this.rFt)+" completed as the entire request has been fulfilled."),this.QHt(t)):(Ft.uLt(ms,"Continuing read from original stream for extraction of "+we(this.rFt)),Wr(this.readAndSliceOutAssetBytes(t)))}get JHt(){return this.YHt.Qy}pull(){return this.jHt.Xy(),this.jHt=new pa,this.zHt.Qy}constructor(t,i,e,s){this.rFt=void 0,this.Wd=void 0,this.XHt=void 0,this.KHt=void 0,this.jHt=void 0,this.zHt=void 0,this.YHt=new pa,this.rFt=t,this.Wd=i,this.XHt=e,this.KHt=s,this.jHt=new pa,this.zHt=new pa}},LJ=class{fO(t){if(!JK(this.rFt,t))return!1;const{OAt:i,FAt:e}=OJ(t.LAt);return this.XHt.NHt(this.ZHt.UHt,i,e)}async ygt(t,i){void 0===i&&(i=!1);const e=this.ZHt,s=this.XHt;if(Ft.hB(ms,"Extracting data from "+we(t)+" out of "+we(this.rFt)),this.$Ht&&(Ft.uLt(ms,"Awaiting previous extraction before extracting "+we(t)+" out of "+we(this.rFt)),await this.$Ht),!this.fO(t))throw new m("The extractor does not contain the data requested");const n=new MJ(t,e,s,i);return this.$Ht=n.JHt,new HA(n)}constructor(t,i){this.rFt=void 0,this.XHt=void 0,this.ZHt=void 0,this.$Ht=void 0,this.rFt=i;const{OAt:e}=OJ(this.rFt.LAt);this.ZHt=new NJ(t,e),this.XHt=new BJ}};function OJ(t){if(t){const i=t.Tn;return{OAt:i,FAt:void 0!==t.V?i+t.V:Xl}}return{OAt:0,FAt:Xl}}var FJ=class{async Un(){const t=await this.tWt.AHt(this.rFt,Al.Ak,Xa.pk,void 0,this.nT.Yg);return new LJ(t,this.rFt)}fO(t){return JK(this.rFt,t)}async ygt(t,i){void 0===i&&(i=!1);const e=await this.Dpt;return await Nc(e.ygt(t,i),this.nT.Yg)}Zg(){this.Dpt.catch(Ct),this.nT.Zg()}constructor(t,i){this.rFt=void 0,this.tWt=void 0,this.nT=void 0,this.Dpt=void 0,this.rFt=t,this.tWt=i,this.nT=new at,this.Dpt=this.Un()}};r();var UJ=class extends wp{constructor(t){super(XJ.iWt),this.qk=void 0,this.qk=t}};r();var VJ=class extends wp{constructor(t,i,e,s,n,r,h){super(XJ.eWt),this.uri=void 0,this.sWt=void 0,this.qk=void 0,this.mediaSequenceNumeber=void 0,this.mediaTrackId=void 0,this.nWt=void 0,this.httpStatusCode=void 0,this.uri=t,this.sWt=i,this.qk=e,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.nWt=r,this.httpStatusCode=h}};function HJ(t,i,e){const s=tJ(e)?e:e.tFt;if(i.gUt(s.kOt)){if(void 0!==e.xet)return i.kUt(e.xet,e).iF();if(e!==s&&void 0!==s.xet){const t=i.kUt(s.xet,s).iF();return e.EO+(t-s.EO)}}const n=t.IMt.mat(s.aOt-1);if(void 0!==n&&i.gUt(n.kOt)){if(n.yOt.length>0){const t=n.uFt(n.yOt.length-1);if(void 0!==t.xet){const s=i.kUt(t.xet,t).iF();return e.EO+(s-t.EO)}}if(void 0!==n.xet){const t=i.kUt(n.xet,n).iF();return e.EO+(t-n.EO)}}const r=t.IMt.mat(s.aOt+1);if(void 0!==r&&i.gUt(r.kOt)){if(r.yOt.length>0){const t=r.uFt(0);if(void 0!==t.xet){const s=i.kUt(t.xet,t).iF();return e.EO+(s-t.EO)}}if(void 0!==r.xet){const t=i.kUt(r.xet,r).iF();return e.EO+(t-r.EO)}}return e.EO}function WJ(t){return void 0!==t.xet}function qJ(t,i,e,s){for(let n=i;n<t.length;n++){const i=t[n];if(i.kOt!==e)break;if(WJ(i)){if(s(i,n))break}}}function zJ(t,i,e,s){for(let n=i;n>=0;n--){const i=t[n];if(i.kOt!==e)break;if(WJ(i)){if(s(i,n))break}}}r();var GJ="HlsPlaylistDownloader",XJ=function(t){return t.iWt="rWt",t.eWt="hWt",t}({}),jJ=class extends Ne{oWt(t){this.aWt.zg(),this.aWt=new CJ(this.Fkt,t),this.$It?this.uWt=t:(this.SHt=t,this.cWt=0,this.dWt=void 0,this.lWt=void 0,this.fWt=!1)}get $It(){return void 0!==this.vWt}get _Wt(){return this.fWt}ZVt(){return this.vWt?this.vWt.Qy:Promise.resolve()}gWt(){return this.nHt.gWt()}Zg(){var t,i,e;this.pWt.Zg(),this.pWt=new at,null==(t=this.mWt)||t.Zg(),this.mWt=void 0,null==(i=this.wWt)||i.Zg(),null==(e=this.yWt)||e.Zg(),this.wWt=void 0,this.yWt=void 0,this.cWt=0,this.dWt=void 0,this.lWt=void 0,this.fWt=!1}zg(){this.aWt.zg()}get UMt(){var t;return null!=(t=this.uWt)?t:this.SHt}get ERt(){if(!this.SHt.IMt.POt||void 0===this.dWt)return!1;const t=this.SHt.IMt.mat(this.dWt);if(!t.ZOt)return!1;if(void 0!==this.lWt){if(!t.uFt(this.lWt).ZOt)return!1}return!0}AWt(t){const i=this.SHt.IMt.$Ft(t);if(!i)return!1;if(void 0!==this.dWt){const e=i.aOt===this.dWt;return void 0!==this.lWt?i.cFt(t)===i.uFt(this.lWt)&&e:e}return!1}bWt(t){let i;var e;if(!this._Wt&&(void 0===this.dWt||t<this.cWt-1e-6))i=this.SWt(t);else if(i=this.TWt(null!=(e=this.dWt)?e:0,this.lWt),void 0!==i){const[e,s]=i,n=HJ(this.SHt,this.Fkt.Br.mM,null!=s?s:e),r=3*this.SHt.IMt.vLt;_.abs(n-t)>=r&&(i=this.SWt(t))}else if(this.SHt.IMt.POt&&void 0!==this.dWt){if(this.SHt.IMt.mat(this.dWt).ZOt&&(i=this.SWt(t),void 0!==i&&i[0].aOt===this.dWt))return}if(i){this.cWt=t;const[e,s]=i;return 0===(null==s?void 0:s.eFt)&&void 0!==e.ct?[e,void 0]:[e,s]}}SWt(t){let i,e;const s=this.SHt.IMt.ect;if(0===s.length)return;const n=this.Fkt.Br.mM,r=$c.eU(t),h=function(t,i,e){const s=t.IMt.ect;if(0===s.length)return;const n=t.IMt.tUt(e.iF());if(!i.gUt(n.kOt))return;const r=n.aOt-s[0].aOt,h=n.kOt;let o,a,u,c=0;if(zJ(s,r,h,(t,i)=>(o=t,c=i,!0)),void 0===o&&(qJ(s,r+1,h,(t,i)=>(o=t,c=i,!0)),void 0===o))return;return i.kUt(o.xet,o).hF(e)?(a=o,qJ(s,c+1,h,t=>i.kUt(t.xet,t).eF(e)?(u=t,!0):(a=t,!1))):(u=o,zJ(s,c-1,h,t=>i.kUt(t.xet,t).hF(e)?(a=t,!0):(u=t,!1))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.SHt,n,r);let o;if(void 0!==h){const[t,i]=h,e=n.kUt(t.xet,t),s=n.kUt(i.xet,i),a=r.lF(e).iF()/s.lF(e).iF()*(i.EO-t.EO);o=t.EO+a}else o=t;const a=s[s.length-1];return a.PO<=o?(i=a,e=a.lFt(o)):s[0].EO>o?(i=s[0],e=i.uFt(0)):(i=this.SHt.IMt.$Ft(o),e=null==i?void 0:i.lFt(o)),i?[i,e]:void 0}TWt(t,i){let e,s;if(e=this.SHt.IMt.mat(t),e&&void 0!==i){if(0===e.yOt.length)return[e,void 0];s=e.uFt(i+1)}return void 0!==e&&void 0!==s||(e=this.SHt.IMt.mat(t+1),s=null==e?void 0:e.uFt(0)),e?[e,s]:void 0}YVt(){if(this.$It)throw new m("Cannot perform new operation while PlaylistDownloader is still busy")}kWt(t){this.YVt(),this.vWt=new pa,this.EWt(t,this.pWt.Yg).then(this.PWt,this.PWt)}xWt(){this.aWt.PHt()}async EWt(t,i){if(this.SHt.IMt.POt)return;let e=this.bWt(t);for(!e&&this.aWt.bHt()&&void 0!==this.dWt&&(await this.aWt.THt(void 0===this.lWt?this.dWt+1:this.dWt,void 0!==this.lWt?this.lWt+1:void 0,i),e=this.bWt(t)),!e&&this.aWt.bHt()&&void 0!==this.dWt&&(await this.aWt.THt(this.dWt+1,0,i),e=this.bWt(t));!e;){Ft.hB(GJ,"No next segment / part available, need to update playlist before continuing."),await this.aWt.xHt(i);const s=this.UMt.IMt.ect;s[0].EO>t&&(this.lWt=void 0,this.dWt=void 0,this.fWt=!1);s[s.length-1].aOt<this.dWt&&(this.lWt=void 0,this.dWt=void 0,this.fWt=!1),e=this.bWt(t)}}IWt(){return this.nHt.RWt()}CWt(){this.YVt();try{const t=this.SHt.IMt.iUt(Qu.SLt);t&&this.DWt(t);const i=this.SHt.IMt.iUt(Qu.TLt);i&&this.BWt(i)}catch(t){throw sa(t),this.SHt.IMt.jFt=zd.Mg(),this.Fkt.mVt(this.SHt),t}}DWt(t){this.yWt&&!this.yWt.fO(t.nyt)&&(this.yWt.Zg(),this.yWt=void 0),this.yWt||(this.yWt=new FJ(t.nyt,this.tWt))}BWt(t){this.wWt&&!this.wWt.fO(t.nyt)&&(this.wWt.Zg(),this.wWt=void 0),this.wWt||(this.wWt=new FJ(t.nyt,this.tWt))}pat(t,i,e){this.YVt(),Ft.hB(GJ,"Starting download of segment "+we(t.nyt)+" and part "+(null==i?void 0:i.eFt)),this.vWt=new pa,this.NWt(t,i,e,this.pWt.Yg).catch(t=>{throw sa(t),this.SHt.IMt.jFt=zd.Mg(),this.Fkt.mVt(this.SHt),t}).then(this.PWt,this.PWt)}async NWt(t,i,e,s){let n;if(t.bOt){var r,h;if(!e||!ZK(e.hHt.nyt,null==(r=t.bOt)?void 0:r.nyt)||t.kOt!==e.kOt){var o;null==(o=this.mWt)||o.Zg(),this.mWt=new pa;const i=this.MWt(t.bOt,t,s).then(()=>{this.mWt=void 0});this.mWt.$g(i)}n=null==(h=this.mWt)?void 0:h.Qy}t.ZLt||i&&i.ZLt?await this.LWt(t,i,n,s):await this.OWt(t,i,n,s)}async MWt(t,i,e){const s=await this.FWt(t,i,e),n=s.bOt.ck.ck.byteLength;this.nHt.UWt(s),this.So(new VJ(s.bOt.hHt.nyt,s.Km,this.Vp,i.aOt,s.UMt.jI,n,s.bOt.Iut)),Ft.uLt(MK,"Download initializer complete",we(t.nyt))}async OWt(t,i,e,s){const n=await this.VWt(t,i,s),r=n.$at.ck.ck.byteLength;var h;e&&await Nc(e,s),this.nHt.UWt(n),this.So(new VJ(n.$at.hHt.nyt,n.Km,this.Vp,t.aOt,n.UMt.jI,r,n.$at.Iut)),Ft.uLt(MK,"Download complete",we(null!=(h=null==i?void 0:i.nyt)?h:t.nyt))}async LWt(t,i,e,s){const n=this.HWt(t,i);var r;e&&await Nc(e,s),this.nHt.UWt(n),Ft.uLt(MK,"Download gap complete",we(null!=(r=null==i?void 0:i.nyt)?r:t.nyt))}async VWt(t,i,e){let s;if(i){if(this.wWt)if(this.wWt.fO(i.nyt)){const t=await this.wWt.ygt(i.nyt),n=await bn(t,e),r=new j(n);s=KJ(i,await this.gHt(r,i.MW,e),200)}else this.wWt.Zg(),this.wWt=void 0;s||(Ft.uLt(MK,"Start download",we(i.nyt)),s=await this.WWt(i,e))}else Ft.uLt(MK,"Start download",we(t.nyt)),s=await this.yat(t,e);return this.dWt=t.aOt,this.lWt=null==i?void 0:i.eFt,this.fWt=!1,{Km:"$at",$at:s,UMt:this.SHt,kOt:t.kOt}}async FWt(t,i,e){let s;if(this.yWt){var n;if(this.yWt.fO(t.nyt)){const n=await Nc(this.yWt.ygt(t.nyt),e),r=await bn(n,e),h=new j(r);s=QJ(t,i,await this.gHt(h,t.wOt?[t.wOt]:[],e),200)}Ft.hB(GJ,"MAP is required for segment, downloading MAP data."),null==(n=this.yWt)||n.Zg(),this.yWt=void 0}return s||(Ft.uLt(MK,"Start download",we(t.nyt)),s=await this.qWt(t,i,e)),{Km:"bOt",bOt:s,UMt:this.SHt,EO:i.EO,kOt:i.kOt,MW:i.MW}}HWt(t,i){const e=null!=i?i:t;return this.dWt=t.aOt,this.lWt=null==i?void 0:i.eFt,this.fWt=!0,{Km:"zWt",lHt:e.EO,fHt:e.EO+e.ct,UMt:this.SHt,$at:e,kOt:t.kOt}}async qWt(t,i,e){const{response:s,httpStatusCode:n}=await this.tWt.lk(t.nyt,Al.yk,Xa.Sk,void 0,e),r=t.wOt?[t.wOt]:[];return QJ(t,i,await this.gHt(s,r,e),n)}async yat(t,i){if(!t.nyt)throw new m("Internal error: attempted to download an incomplete segment");let e,s;try{this.GWt(t);const n=await this.tWt.lk(t.nyt,Al.yk,Xa.pk,this.XWt,i);e=n.response,s=n.httpStatusCode}finally{this.jWt()}return function(t,i,e){return{ck:{ck:i,Km:Po.vZ},Km:DJ.yk,Iut:e,hHt:t,kOt:t.kOt}}(t,await this.gHt(e,t.MW,i),s)}async WWt(t,i){let e,s;try{this.GWt(t);const n=await this.tWt.lk(t.nyt,Al.yk,Xa.pk,this.XWt,i);e=n.response,s=n.httpStatusCode}finally{this.jWt()}return KJ(t,await this.gHt(e,t.MW,i),s)}async gHt(t,i,e){const s=Jr(i,t=>t.Uk===Zt.kLt);return s?s.nyt&&s.KLt?await this.QWt.gHt(t,s.nyt,s.KLt,e):(Ft.lt(GJ,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}GWt(t){var i,e,s;this.KWt=t,this.YWt=0,this.JWt=zd.Mg(),this.ZWt=0,this.$Wt=null!=(s=null==(e=t.nyt)||null==(i=e.LAt)?void 0:i.V)?s:0}jWt(){this.KWt=void 0,this.YWt=0,this.JWt=0,this.ZWt=0,this.$Wt=0}tqt(){if(void 0!==this.KWt)return{$at:this.KWt,iqt:this.ZWt,eqt:this.$Wt,sqt:zd.Mg()-this.JWt}}nqt(t){return void 0!==this.KWt&&(0!==this.YWt&&(!(this.$Wt>0&&this.ZWt>=this.$Wt)&&!(t-this.YWt<500)))}constructor(t,i,e,s,n,r,h,o){super(),this.Vp=void 0,this.Fkt=void 0,this.nHt=void 0,this.tWt=void 0,this.QWt=void 0,this.SHt=void 0,this.aWt=void 0,this.uWt=void 0,this.vWt=void 0,this.KWt=void 0,this.YWt=0,this.JWt=0,this.ZWt=0,this.$Wt=0,this.pWt=new at,this.mWt=void 0,this.cWt=0,this.dWt=void 0,this.lWt=void 0,this.fWt=!1,this.yWt=void 0,this.wWt=void 0,this.PWt=t=>{this.uWt&&(this.SHt=this.uWt,this.uWt=void 0,this.cWt=0,this.dWt=void 0,this.lWt=void 0,this.fWt=!1),this.vWt&&(t&&!D(t)?this.vWt.jy(t):this.vWt.Xy(),this.vWt=void 0)},this.XWt=(t,i)=>{this.ZWt=t,t>0&&0===this.YWt&&(this.YWt=zd.Mg()),void 0!==i&&(this.$Wt=i),this.So(new UJ(this.Vp))},this.Vp=t,this.Fkt=e,this.nHt=s,this.SHt=i,this.aWt=new CJ(e,i),this.QWt=new IJ(h,n,o),this.tWt=new RJ(n,r,function(t){switch(t){case nl.Bk:return Za.Bk;case nl.Dk:return Za.Dk;case nl.OU:case nl.bLt:return Za.NT;default:return Za.pk}}(i.Km),o)}};function QJ(t,i,e,s){return{ck:{ck:e,Km:Po.vZ},Km:DJ.SLt,Iut:s,hHt:t,kOt:i.kOt}}function KJ(t,i,e){return{ck:{ck:i,Km:Po.vZ},Iut:e,Km:DJ.TLt,hHt:t,kOt:t.tFt.kOt}}r();var YJ=class{get MVt(){return this.rqt}get hqt(){const t=[];for(const e of this.oqt)if("$at"===e.Km){const s=e.$at.hHt,n=HJ(e.UMt,this.qUt,s);var i;t.push({$at:s,UMt:e.UMt,EO:n,PO:n+(null!=(i=s.ct)?i:0)})}else"zWt"===e.Km&&t.push({$at:e.$at,UMt:e.UMt,EO:e.lHt,PO:e.fHt});return t}get aqt(){const t=[];return this.uqt.forEach(i=>{for(const e of i.cqt)"$at"===e.Km?t.push({$at:e.hHt,UMt:e.UMt,EO:e.EO,PO:e.EO+e.ct}):"zWt"===e.Km&&t.push({$at:e.$at,UMt:e.UMt,EO:e.lHt,PO:e.fHt})}),t}UWt(t){"bOt"===t.Km&&(this.rqt=t.bOt),this.oqt.push(t),this.dqt&&(this.dqt.Xy(),this.dqt=void 0)}gWt(){return this.oqt[0]}lqt(t){oi(this.oqt,t)}RWt(){return null!=this.dqt||(this.dqt=new pa),this.dqt.Qy}fqt(t){this.vqt(t.Lot).fqt(t)}_qt(t){return this.vqt(t)._qt()}sHt(t){this.vqt(t.Lot).sHt(t)}gqt(t){var i;null==(i=this.uqt.get(t))||i.zg()}pqt(t){return this.vqt(t).pqt()}vqt(t){if(this.uqt.has(t))return this.uqt.get(t);{const i=new JJ;return this.uqt.set(t,i),i}}Gy(){this.mqt(),this.wqt()}mqt(){this.rqt=void 0,Yo(this.oqt)}wqt(){this.uqt.forEach(t=>t.Gy())}zg(){this.uqt.forEach(t=>t.zg()),this.uqt.clear(),this.Gy(),this.dqt&&(this.dqt.Zg(),this.dqt=void 0)}constructor(t){this.oqt=[],this.uqt=qh(),this.qUt=void 0,this.dqt=void 0,this.rqt=void 0,this.qUt=t}},JJ=class{get cqt(){return this.yqt}fqt(t){this.yqt.push(t),this.Aqt&&(this.Aqt.Xy(),this.Aqt=void 0)}_qt(){return this.yqt[0]}sHt(t){oi(this.yqt,t)}pqt(){return null!=this.Aqt||(this.Aqt=new pa),this.Aqt.Qy}Gy(){Yo(this.yqt)}zg(){this.Gy(),this.Aqt&&(this.Aqt.Zg(),this.Aqt=void 0)}constructor(){this.yqt=[],this.Aqt=void 0}};r(),r(),r();var ZJ=class extends wp{constructor(t,i){super(sZ.bqt),this.UMt=void 0,this.frt=void 0,this.UMt=t,this.frt=i}};r();var $J=class extends wp{constructor(t){super(sZ.Sqt),this.UMt=void 0,this.UMt=t}};r();var tZ=class extends wp{constructor(t,i){super(sZ.Tqt),this.UMt=void 0,this.plt=void 0,this.UMt=t,this.plt=i}};r();var iZ=class extends wp{constructor(t,i){super(sZ.kqt),this.UMt=void 0,this.Eqt=void 0,this.UMt=t,this.Eqt=i}};r();var eZ=class extends wp{constructor(){super(sZ.Pqt)}},sZ=function(t){return t.bqt="xqt",t.Tqt="Iqt",t.kqt="Rqt",t.Sqt="Cqt",t.Pqt="Dqt",t}({}),nZ=class extends Ne{get Bqt(){return this.Nqt}Mqt(t){for(const i of this.Nqt)pi(t,i)||this.nHt.gqt(i);this.Nqt=t}get $It(){return void 0!==this.Lqt}ZVt(){var t,i;return null!=(i=null==(t=this.Lqt)?void 0:t.Qy)?i:Promise.resolve()}YVt(){if(this.$It)throw new m("Cannot perform new operation while transmuxer is still busy")}Oqt(t,i){}Fqt(t){this.YVt(),this.Lqt=new pa;const i=i=>{this.Uqt(t,i)};this.Vqt(t,this.nT.Yg).then(i,i)}Hqt(t){this.YVt(),this.Lqt=new pa;const i=i=>{this.Uqt(t,i)};this.Wqt(t,this.nT.Yg).then(i,i)}qqt(t){this.YVt(),this.Lqt=new pa;try{for(const i of this.Bqt){const e={Km:"zWt",Lot:i,lHt:t.lHt,fHt:t.fHt,kOt:t.kOt,UMt:t.UMt,$at:t.$at};this.fqt(e)}}finally{this.Uqt(t)}}Uqt(t,i){this.Lqt&&(!i||D(i)||function(t){return t instanceof sJ}(i)?(D(i)||this.nHt.lqt(t),this.Lqt.Xy(),this.Lqt=void 0):this.Lqt.jy(i),this.So(new eZ))}zqt(t,i){this.So(new ZJ(t,i))}Gqt(t,i){this.So(new tZ(t,i))}Xqt(t,i,e){iJ(i)&&this.So(new iZ(t,e))}jqt(t){this.So(new $J(t))}fqt(t){pi(this.Nqt,t.Lot)&&this.nHt.fqt(t)}Qqt(t){return this.nHt._qt(t)}sHt(t){this.nHt.sHt(t)}Kqt(t){return this.nHt.pqt(t)}Zg(){this.nT.Zg(),this.nT=new at}constructor(t,i,e){super(),this.nHt=void 0,this.qUt=void 0,this.Nqt=void 0,this.Lqt=void 0,this.nT=new at,this.nHt=t,this.qUt=i,this.Nqt=e}};function rZ(t,i){return iJ(t)?0:_.min(t.EO,i)}function hZ(t,i){var e;return _.max(t.EO,i)+(null!=(e=t.ct)?e:0)}var oZ=class extends nZ{Vqt(t,i){ii(i);const e={Km:"FRt",ck:t.bOt.ck,Lot:this.Bqt[0],kOt:t.kOt,Yqt:{frt:"",MW:t.MW},EO:t.EO,UMt:t.UMt,hHt:t.bOt.hHt};return this.fqt(e),Promise.resolve()}async Wqt(t,i){ii(i);const e=t.$at.hHt;let s;void 0!==e.xet?(this.qUt.gUt(t.kOt)||await Nc(this.qUt.mUt(t.kOt),i),s=this.qUt.kUt(e.xet,e).iF()):s=e.EO;const n=rZ(e,s),r=hZ(e,n);var h;const o={Km:"$at",ck:t.$at.ck,Lot:this.Bqt[0],lHt:n,fHt:r,EO:s,ct:null!=(h=e.ct)?h:0,bU:0,kOt:t.kOt,UMt:t.UMt,hHt:t.$at.hHt};this.fqt(o)}constructor(t,i,e){super(t,i,[e])}};function aZ(t,i){let e=ve.iL();for(const s of t){let n=s.EO;if(s.UMt.IMt.POt&&iJ(s.$at))n=0;else{const e=t=>s.UMt===t.UMt&&eJ(t.$at,s.$at),r=Jr(t,e);if(void 0!==r)n=_.min(n,r.PO);else{const t=Jr(i,e);void 0!==t&&(n=_.min(n,t.HVt.An(0)))}}e=e.OM(ve.tL(n,s.PO))}return e}r();var uZ=.001,cZ=class{get Jqt(){return this.Zqt}get UMt(){return this.$qt.UMt}oWt(t){this.$qt.oWt(t)}get $It(){return this.$qt.$It||this.tzt.$It||this.Zqt.some(t=>t.$It)}izt(t){const i=this.Zqt.length>0,e=t.slice();for(let t=this.Zqt.length-1;t>=0;t--){const i=this.Zqt[t];if(!xJ(i))throw new m("Invalid state");const s=li(e,t=>t.Km===i.Km);s>=0&&!i.QVt?(i.JVt(e[s]),ka(e,s)):ka(this.Zqt,t)}for(const t of e){const i=new bJ(t);this.Zqt.push(new PJ(t.Km,t,this.ezt,i,this,this.szt,this.nzt))}i&&e.length>0&&this.ezt.Gy();const s=t.map(t=>t.Km);this.tzt.Mqt(s)}YY(t){var i;const e=(null==(i=this.Rz)?void 0:i.YY(t))||!1;return e&&(this.Zg(),this.ezt.Gy()),e}rzt(t){const i=this.Zqt[0];if(void 0!==i){if(i.Km!==Ci.NT||i.$It)throw new m("Invalid state");if(!i.QVt)return void i.JVt(t)}const e=new bJ(t),s=new PJ(Ci.NT,t,this.ezt,e,this,void 0,void 0);this.Zqt=[s]}get MVt(){const t=this.ezt.MVt;if(t)return t;if(this.Zqt.length>0){const t=this.Zqt[0].zVt.MVt;if(t&&this.Zqt.every(i=>i.zVt.MVt===t))return t}}_at(){for(const t of this.Zqt)t.zVt.UVt()}get hzt(){const t=aZ(this.ezt.hqt.concat(this.ezt.aqt),De(this.Zqt,t=>t.zVt.ect)).CM();let i;if(0===this.Zqt.length)i=t;else{i=ve.eL();for(const t of this.Zqt)i=i.Mn(t.zVt.IP);for(const t of this.Zqt)i=i.UM(t.GVt);i=i.OM(t)}return i.LM(uZ)}get ozt(){const t=aZ(this.ezt.aqt,De(this.Zqt,t=>t.zVt.ect)).CM();let i;if(0===this.Zqt.length)i=t;else{i=ve.eL();for(const t of this.Zqt)i=i.Mn(t.zVt.IP);i=i.OM(t)}return i}hdt(t){const i=this.hzt.JM(t,uZ);return i?i.An(i.V-1):t}AWt(t){return!!this.hzt.JM(t,uZ)||this.$qt.AWt(t)}azt(t){return this.ozt.Cr(t,uZ)}uzt(t,i,e){for(const t of this.Zqt){const e=t.zVt,s=e._pt;if(void 0!==s&&i>=s&&!e.IP.CM().Cr(s))return!0}return i-t<e}Zg(){this.czt(),this.dzt()}czt(){this.$qt.Zg()}dzt(){this.tzt.Zg(),this.Jqt.forEach(t=>t.Zg())}zg(){this.Zg(),this.$qt.zg()}constructor(t,i,e,s,n,r){this.$qt=void 0,this.ezt=void 0,this.tzt=void 0,this.szt=void 0,this.nzt=void 0,this.Rz=void 0,this.Zqt=void 0,this.$qt=t,this.ezt=i,this.tzt=e,this.szt=s,this.nzt=n,this.Rz=r,this.Zqt=[]}};r();var dZ=class extends wp{constructor(){super(AK.PMt)}};r();var lZ=class extends wp{constructor(){super(AK.kMt)}};r(),r();var fZ="LazyMediaBuffer",vZ=class extends Ne{get qT(){return this.GS}get B3(){return this.Vp}get Cd(){if(!this.Trt)throw new Ga(Vo.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.Trt.Cd}get MY(){return this.zY}set MY(t){this.zY=t,this.Trt&&(this.Trt.MY=t)}get IP(){return this.Trt?this.Trt.IP:ve.iL()}get M3(){return this.Trt?this.Trt.M3:this.L3.ZZ}get UY(){return this.jY}set UY(t){this.jY=t,this.Trt&&(this.Trt.UY=t)}F3(t,i){Ft.uLt(fZ,"Marking gap from "+t+" to "+i+"."),this.L3.t$(t,i),this.Trt&&this.Trt.F3(t,i)}U3(t,i){Ft.uLt(fZ,"Removing gap from "+t+" to "+i+"."),this.L3.i$(t,i),this.Trt&&this.Trt.U3(t,i)}lzt(t){this.Trt=t,this.Trt.UY=this.jY,this.Trt.MY=this.zY;const i=this.L3.ZZ;for(let t=0;t<i.V;t++)this.Trt.F3(i.Tn(t),i.An(t));this.Trt.wn(Zs.lZ,this.Rs),this.fzt.Xy(t)}vzt(t){return Nc(this.fzt.Qy,t)}async H2(t,i,e){const s=await this.vzt(e);await s.H2(t,i,e)}async V3(){const t=await this.vzt();await t.V3()}async z2(t,i,e){const s=await this.vzt(e);await s.z2(t,i,e)}async _S(t,i,e){const s=await this.vzt(e);await s._S(t,i,e)}async r3(t,i){const e=await this.vzt();await e.r3(t,i)}TZ(t){return!!this.Trt&&this.Trt.TZ(t)}async EZ(t){const i=await this.vzt();await i.EZ(t)}kn(){var t;this.Vo(),null==(t=this.Trt)||t.mn(Zs.lZ,this.Rs),this.Trt=void 0}constructor(t,i){super(),this.Vp=void 0,this._zt=void 0,this.GS=void 0,this.Trt=void 0,this.fzt=void 0,this.zY=void 0,this.jY=void 0,this.L3=void 0,this.Vp=t,this._zt=i,this.GS=void 0,this.Trt=void 0,this.fzt=new pa,this.zY=20,this.jY=30,this.L3=new IB}},_Z="LazyMediaSource",gZ=class{get Cd(){return{Km:Zr.wV,L4:[],aq:[]}}get Q3(){return this.gzt}get K3(){return this.pzt}get IP(){return this.iq?this.iq.IP:ve.iL()}get ct(){return this.iq?this.iq.ct:this.WA}get WZ(){return!!this.iq&&this.iq.WZ}get Sx(){return this.iq?this.iq.Sx:ve.eL()}C4(t){this.WA=t,this.iq&&this.iq.C4(t)}C3(){this.ket=!0,this.iq&&this.iq.C3()}A3(){this.ket=!1,this.iq&&this.iq.A3()}M4(t,i,e,s){this.mzt=t,this.wzt=i,this.yzt=Boolean(e),this.Azt=Boolean(s),this.iq&&this.iq.M4(t,i,e,s)}TZ(t){return this.iq?this.iq.TZ(t):BL(this,t)}async EZ(t){if(!this.TZ(t))throw new m("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.iq)await this.iq.EZ(t);else{var i,e;this.TL.x9();const s=await this.TL.Un(t);S(this.WA)||s.C4(this.WA),this.ket&&s.C3(),s.M4(this.mzt,this.wzt,this.yzt,this.Azt),Ft.uLt(_Z,"The MediaSource has been loaded."),this.bzt=!0,this.iq=s,null==(i=this.gzt)||i.lzt(this.iq.Q3),null==(e=this.pzt)||e.lzt(this.iq.K3),this.Szt.Xy(s),this.TL.I9()}}xZ(t){this.iq.xZ(t)}async zg(){var t,i;null==(t=this.gzt)||t.kn(),null==(i=this.pzt)||i.kn(),this.iq&&await this.iq.zg()}constructor(t,i,e){this.TL=void 0,this.gzt=void 0,this.pzt=void 0,this.Szt=void 0,this.iq=void 0,this.bzt=void 0,this.WA=void 0,this.ket=void 0,this.mzt=void 0,this.wzt=void 0,this.yzt=void 0,this.Azt=void 0,this.TL=t,this.gzt=void 0,this.pzt=void 0,this.Szt=new pa,this.iq=void 0,this.bzt=!1,this.WA=NaN,this.ket=!1,this.mzt=0,this.wzt=1/0,this.yzt=!1,this.Azt=!1,i&&(Ft.uLt(_Z,"Created lazy media buffer for audio."),this.gzt=new vZ(Ci.Dk,this)),e&&(Ft.uLt(_Z,"Created lazy media buffer for video."),this.pzt=new vZ(Ci.Bk,this))}};r();var pZ=class{get Km(){return this.Vp}get IP(){return this.Trt.IP.Ny(-this.zU).Mn(ve.eL())}get M3(){return this.Trt.M3.Ny(-this.zU).Mn(ve.eL())}Tzt(t,i){return this.Trt===t&&this.zU===i}async z2(t,i){if(this.Trt.Cd.qT!==t.Yqt.frt){const e={qT:t.Yqt.frt};if(!this.Trt.TZ(e))throw new SN(this.Trt.Cd.qT,t.Yqt.frt);await this.Trt.EZ(e),ii(i)}await this.Trt.z2(t.ck,{i2:t.UMt.jI},i)}async H2(t,i){ii(i),Ft.hB("HlsMediaBuffer","Got media data, appending to "+this.Vp+" MediaBuffer: "+we(t.hHt.nyt));const e=t.lHt+this.zU,s=t.fHt+this.zU,n={xet:t.EO+this.zU,ct:t.ct,bU:t.bU+this.zU,i2:t.UMt.jI};void 0!==t.ck&&await this.Trt.H2(t.ck,n,i),this.kzt(e,s)}kzt(t,i){const e=this.Trt.IP,s=new ve([t,i]).UM(e);for(let t=0;t<s.V;t++)this.Trt.F3(s.Tn(t),s.An(t));for(let t=0;t<e.V;t++)this.Trt.U3(e.Tn(t),e.An(t))}F3(t,i){this.Trt.F3(t+this.zU,i+this.zU)}U3(t,i){this.Trt.U3(t+this.zU,i+this.zU)}constructor(t,i,e){this.Vp=void 0,this.Trt=void 0,this.zU=void 0,this.Vp=t,this.Trt=i,this.zU=e}};r();var mZ=1e-6,wZ=class{get IP(){return this.OPt}get M3(){return this.FPt}Tzt(t){return this.Ezt===t}async z2(t,i){const e=t.ck.ck;if(this.Pzt(e),this.Ezt.Km===nh.TTML){this.qUt.gUt(t.kOt)||await Nc(this.qUt.mUt(t.kOt),i);const s=this.xzt(e,t.kOt);for(const t of s)this.Ezt.tV(t)}}async H2(t,i){if(void 0===t.ck)return;const e=t.EO,s=e+t.ct;this.OPt=this.OPt.OM(ve.tL(e,s)).LM(mZ),this.F3(t.lHt,t.fHt),this.U3(e,s),this.qUt.gUt(t.kOt)||await Nc(this.qUt.mUt(t.kOt),i),this.q2(t.ck.ck,t.kOt,t.hHt)}q2(t,i,e){let s;this.Pzt(t),s=this.Ezt.Km===nh.WEBVTT?this.Izt(t,e):this.xzt(t,i);for(const t of s)this.Ezt.tV(t)}Izt(t,i){const e=HE(t),s=e.L;var n;const r=null!=(n=e.kU)?n:{EU:$c.wF,bh:$c.wF};for(const t of s){const e=$c.eU(t.EO).lF(r.bh).lO(r.EU),s=this.qUt.kUt(e,i).iF(),n=s+(t.PO-t.EO);t.XO(s,n)}return s}xzt(t,i){const e=this.qUt.TUt(i).iF();return kP(t,this.Ezt,{yU:0,AU:1/0,bU:e},Xy)}Pzt(t){this.Ezt.Km===nh.DEFAULT&&(this.Ezt.Km=this.Rzt(t)?nh.WEBVTT:nh.TTML)}Rzt(t){return $E(hm(Au(dh(t),0,_.min(t.byteLength,16)),new Ui))}F3(t,i){this.FPt=this.FPt.OM(ve.tL(t,i)).LM(mZ)}U3(t,i){this.FPt=this.FPt.UM(ve.tL(t,i))}constructor(t,i){this.Ezt=void 0,this.qUt=void 0,this.OPt=ve.iL(),this.FPt=ve.iL(),this.Ezt=t,this.qUt=i}};function yZ(t){if(t.Km!==nl.bLt||void 0===t.NMt)return;const i=t.NMt.match(/^CC([1-4])$/);if(i)return Number(i[1]);const e=t.NMt.match(/^SERVICE([\d+])$/);return e?Number(e[1]):void 0}r(),r(),r();var AZ=class{gLt(t){var i,e,s;return null==(s=null==(e=this.iq)||null==(i=e.K3)?void 0:i.TZ(t))||s}pLt(t){var i,e,s;return null==(s=null==(e=this.iq)||null==(i=e.Q3)?void 0:i.TZ(t))||s}constructor(t){this.iq=void 0,this.iq=t}};r();function bZ(t,i,e,s){void 0===s&&(s=_k.maximumBackoff);const n=function(t,i){if(void 0===i)return t;const e=i.preferredVideoCodecs,s=i.preferredAudioCodecs;if(void 0!==e){let i;for(const n of e){const e=t.filter(t=>t.frt&&t.frt.bCt&&bN(t.frt.bCt,n));if(0===e.length)continue;if(void 0===s)return e;void 0===i&&(i=e);const r=SZ(e,s);if(void 0!==r)return r}if(void 0!==i)return i}if(void 0!==s){const i=SZ(t,s);if(void 0!==i)return i}return t}(t,i),r=TZ(n,s),h=r.length>0?r:n;switch(e.OY.type){case Sa.BANDWIDTH:{const t=e.WY,i=h.filter(i=>i.kW<=t);if(i.length>0)return lf(i,t=>t.kW)}case Sa.PERFORMANCE:return oo(h,t=>t.kW);case Sa.QUALITY:return lf(h,t=>t.kW)}}function SZ(t,i){for(const e of i){const i=t.filter(t=>t.frt&&t.frt.yCt&&bN(t.frt.yCt,e));if(0!==i.length)return i}}function TZ(t,i){return t.filter(t=>kZ(t,i))}function kZ(t,i){const e=i+2e3,s=0===t.UOt.length||t.UOt.some(t=>t.IMt.jFt<zd.Mg()-e),n=0===t.FOt.length||t.FOt.some(t=>t.IMt.jFt<zd.Mg()-e);return s&&n}function EZ(t,i){return void 0===i&&(i=!1),function(e,s){void 0===s&&(s="*");let n=xZ(e,"tag");const r=xZ(null==s?"*":s,"range"),h=[];let o,a,u,c=-1;for(;++c<r.length;)if(o=r[c].toLowerCase(),i||"*"!==o){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),o)){if(!i)return n[a];h.push(n[a])}else u.push(n[a]);n=u}return i?h:void 0}}r(),r();EZ((t,i)=>"*"===i||t===i||Ho(t,i+"-"),!0),EZ((t,i)=>{const e=t.split("-"),s=i.split("-");let n=0,r=0;if("*"!==s[r]&&e[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!e[n])return!1;if(e[n]!==s[r]){if(1===e[n].length)return!1;n++}else n++,r++}else r++;return!0},!0);var PZ=EZ((t,i)=>{let e,s=i;for(;;){if("*"===s||t===s)return!0;if(e=s.lastIndexOf("-"),e<0)return!1;"-"===s.charAt(e-2)&&(e-=2),s=s.slice(0,e)}});function xZ(t,i){const e=t&&"string"==typeof t?[t]:t;if(!e||"object"!=typeof e||!("length"in e))throw new m("Invalid "+i+" `"+e+"`, expected non-empty string");return e}function IZ(t){const i=Jr(t,t=>t.RMt),e=t.filter(t=>t.CMt),s=zd.Mm,n=e.map(t=>t.bs).filter(it),r=PZ(n,s);return r?Jr(e,t=>t.bs===r):i}function RZ(t){var i;return null!=(i=IZ(t))?i:t[0]}r();var CZ=class extends es{Czt(t){const i=this.JU.tI(Ao.OU,t.l,t.l,t.bs,t.RMt,void 0,void 0,t.LMt.map(NK).filter(it));this.Dzt.set(t.jI,i),this.tt(i)}zOt(t){const i=this.Dzt.get(t.jI);i&&(this.Dzt.delete(t.jI),this.JU.iV(i))}jU(t){const i=this.Bzt(t);i&&(Wr(this.HMt.Nzt(i)),this.Dzt.forEach(i=>{i!==t&&(i.Xk=xh.Nh)}))}QU(t){const i=this.Bzt(t);i&&this.HMt.Mzt&&this.HMt.Mzt===i&&Wr(this.HMt.Nzt(void 0))}Lzt(t){return this.Dzt.get(t.jI)}Bzt(t){const i=this.HMt.VMt;if(i)return Jr(i.VOt,i=>t===this.Lzt(i))}ZU(t,i,e){const s=Ut(t,i,e);return this.Dzt.forEach((i,e)=>{i===t&&this.Dzt.set(e,s)}),s}async hr(){await super.hr(),this.Dzt.clear()}constructor(t,i){super(i),this.HMt=void 0,this.Dzt=ar(),this.HMt=t}},ra="LLHLSPlayer",DZ=[Do.yM,Do.AM,Do.bM,Do.wI],BZ=[d.Kw,d.Pw,d.Lw,d.Nw],NZ=[d.Ww,d.qw,d.Gw,d.Xw,d.ly,d.iy,d.ey],MZ=class extends Ne{get BL(){var t;if(this.ct!==1/0)return;const i=this.CP;if(i){return(Date.now()-i.getTime())/1e3}const e=null==(t=this.HMt)?void 0:t.Ozt;return e?e-this.MP:void 0}get Fzt(){const t=this.Uzt;for(const i of t){if(!i.IMt.POt)return!1;const t=af(i.IMt.ect,-1);if(t&&t.kOt!==this.Vzt)return!1}return!0}get VMt(){var t;return null==(t=this.HMt)?void 0:t.VMt}get eLt(){var t;return null==(t=this.HMt)?void 0:t.eLt}get nLt(){var t;return null==(t=this.HMt)?void 0:t.nLt}get Mzt(){var t;return null==(t=this.HMt)?void 0:t.Mzt}get Uzt(){return this.HMt?this.HMt.Uzt:[]}get ht(){return this.YL}get IP(){let t=this.TL.IP;return void 0!==this.HMt&&(t=t.Ny(-this.HMt.bU).Mn(ve.eL())),t._s()}get CP(){if(this.VMt){const t=this.MP;return this.VMt.WOt(t)}}set CP(t){if(!t||!this.VMt)return;const i=this.VMt.qOt(t);void 0!==i&&this.OP(i,{Hzt:!1,Wzt:!0})}get bt(){var t;return null==(t=this.HMt)?void 0:t.Mc}get MP(){var t;return null!=(t=this.qzt)?t:this.zzt(this.HMt)}set MP(t){this.OP(t)}OP(t,i){var e,s,n,r;Ft.hB(ra,"Seeking to "+t+" s.");const h={Hzt:null!=(s=null==i?void 0:i.Hzt)?s:t===1/0,Wzt:null==(n=null==i?void 0:i.Wzt)||n,gOt:null!=(r=null==i?void 0:i.gOt)&&r};this.qzt=t,this.Gzt=h,this.Xzt=!0,this.Bkt=!0,null==(e=this.jW)||e.Xx(),this.So(new F(t)),this.m7.Zg(),this.jzt&&(zd.Lg(this.Qzt),h.Wzt?this.Qzt=zd.Og(()=>this.Kzt(t,h),50):this.Kzt(t,h))}Kzt(t,i){zd.Lg(this.Qzt);const e=[this.Dpt,this.Yzt,this.w7].filter(it);this.m7=new at,this.m7.$g(this.rV.Yg),this.w7=$e(this.y7(e,t,i,this.m7.Yg),this.m7).catch(this.Jzt)}get ct(){var t,i;if(void 0===this.Zzt&&this.Fzt){const t=this.TL.ct;if(!S(t))return this.$zt(this.HMt,t)}return null!=(i=null==(t=this.HMt)?void 0:t.ct)?i:NaN}get UP(){if(!this.Fzt)return!1;if(this.kx&&void 0!==this.HMt&&this.jzt){const t=this.MP,i=this.HMt.tGt;return isFinite(i)&&t>=i}return this.TL.UP||this.iGt()}get lt(){return this.JW}get WP(){return this.ZW}get zP(){}get jP(){}get KP(){return!1}get JP(){var t,i;return Mo({},{iO:0,eO:0,sO:0,nO:0,rO:0,hO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.TL.ZP(),{rO:null!=(i=null==(t=this.HMt)?void 0:t.rO)?i:0,nO:this.Rz.kY.kW})}get Br(){var t;return null==(t=this.HMt)?void 0:t.Br}get eGt(){var t;return null==(t=this.HMt)?void 0:t.eGt}get $P(){return this.TL.$P}set $P(t){this.TL.$P=t}get sx(){var t,i;return null==(i=null==(t=this.HMt)?void 0:t.sx)||i}get hx(){return this.TL.hx}get ux(){return this.TL.ux}set ux(t){Ft.hB(ra,"Setting playback rate to "+t+"."),this.TL.ux=t}get _x(){return this.lkt._s()}get lkt(){let t=this.TL._x;return void 0!==this.HMt&&(t=t.Ny(-this.HMt.bU).Mn(ve.eL())),t}get mx(){return this.tq}set mx(t){this.tq!==t&&(this.tq=t,this.sGt())}get Ax(){var t;let i=this.TL.Ax;return(null==(t=this.HMt)?void 0:t.nGt)&&(i=_.max(mh.Qn,i)),i}get IFt(){var t,i;return null!=(i=null==(t=this.HMt)?void 0:t.IFt)?i:ve.iL()}get Sx(){return this.rkt._s()}get rkt(){var t,i;let e=null!=(i=null==(t=this.HMt)?void 0:t.Sx)?i:ve.iL();if(0===e.V)return e;if(this.iq&&this.Fzt&&this.iq.ct!==1/0&&(e=new ve([e.Tn(0),this.$zt(this.HMt,this.iq.ct)])),this.HMt&&!this.HMt.POt){const t=this.lkt,i=e.An(e.V-1);if(t.V>0&&t.An(t.V-1)>i){let s=t.An(t.V-1);const n=this.HMt.IFt;n&&n.V>0&&(s=_.min(s,n.An(n.V-1))),e=e.OM(new ve([i,s]))}}return e}get kx(){var t;return null!=(t=this.Xzt)?t:this.TL.kx}get nq(){}get nt(){return this.Gl}get rt(){return this.$L}get Rx(){var t,i;return this.TL.Rx||(null==(i=this.VMt)||null==(t=i.uCt)?void 0:t.Mi)||0}get Bx(){var t,i;return this.TL.Bx||(null==(i=this.VMt)||null==(t=i.uCt)?void 0:t.Ti)||0}get Mx(){return this.TL.Mx}set Mx(t){Ft.hB(ra,"Setting volume to "+t+"."),this.TL.Mx=t}get Fx(){return this.Cz}get Vx(){return!1}set Vx(t){}get hq(){return this.oq}jx(){return!1}Hx(){return this.TL.Ma}Aa(){return this.TL.mq}tI(t){var i;const e=this.TL.wq(t);var s;return e.bU=null!=(s=null==(i=this.HMt)?void 0:i.bU)?s:0,this.VEt.tt(e),e}we(){Ft.hB(ra,"Hiding the player."),this.TL.we()}zx(){var t;Ft.hB(ra,"Pausing the player."),this.TL.zx(),(null==(t=this.jW)?void 0:t.sL)&&this.jW.Xx()}async Gx(){this.n7=!0;const t=this.TL.Gx();if(this.UP){const t=this.rkt;t.V>0&&this.OP(t.Tn(0),{Wzt:!1})}this.jzt||await this.sGt(),this.MTt(),await t,this.Nkt()}MTt(){if(!this.nkt()){var t;const i=null==(t=this.VMt)?void 0:t.IMt;if(null==i?void 0:i.POt){let t=!0,e=0;const s=i.Tn;if(!this.Bkt&&s&&(t=!s.gOt,e=s._Ot,e<0)){const t=i.IFt;e+=t.An(t.V-1)}this.Kzt(e,{Hzt:t})}else this.Kzt(1/0,{Hzt:!0})}this.rGt()&&this.Kzt(1/0,{Hzt:!0})}nkt(){var t;const i=this.rkt;if(0===i.V)return!0;const e=this.MP,s=null==(t=this.HMt)?void 0:t.hGt,n=null==s?void 0:s.VM(e);return(n&&n>0?s.An(n):e)>=i.Tn(0)}rGt(){const t=this.MP;return OZ(t,this.eLt)||OZ(t,this.nLt)}pEt(){this.JW=void 0,this.ZW=void 0}qq(t){this.JW||(Wr(this.hr()),this.JW=P(t),this.ZW=t,this.So(new Pi(t)))}be(){Ft.hB(ra,"Showing the player."),this.TL.be()}Qx(){throw new m("Not implemented")}Kx(){throw new m("Not implemented")}Yx(){}Jx(){this.jzt&&Wr(this.oGt({Jx:!0}))}async Ta(t,i,e){const s={stack:[],error:void 0,hasError:!1};try{if(Ft.hB(ra,"Setting the player source to "+t.src+"."),this.pEt(),this.HMt&&(await this.hr(),ii(e)),nk(t))return;const r=Be(s,at.ep([e]),!1);var n;if(this.lq.IW(t.contentProtection),void 0!==this.Zzt&&this.Zzt.Mc===t)this.HMt=this.Zzt,this.HMt.mn(NZ,this.aGt),this.rV=this.uGt,this.rV.$g(r.Yg),this.uGt=new at,this.cGt=void 0,null==(n=this.dGt)||n.Zg(),this.dGt=void 0,this.Zzt=void 0,this.lGt=!1,this.fGt!==this.HMt&&(this.fGt=void 0),this.HMt.vGt(this.TL);else void 0!==this.Zzt&&(await this.xx(),await this._Gt()),this.rV=at.ep([r.Yg]),this.HMt=this.gGt(t,i,void 0,this.TL);this.HMt.wn(NZ,this.Rs),this.HMt.wn(AK.PMt,this.pGt),this.YL.BI=this.HMt.ht,this.$L.BI=this.HMt.rt,this.mGt.BI=this.HMt.nt;const h=this.HMt.wGt;h&&(this.jW=new GG(this,this.TL,h),this.jW.Rt=!0,this.Cz.Ea(this.jW)),Ds(this.Gl),this.yGt(),this.Ekt(),this.AGt.forEach(this.Rs),this.AGt=[],this.sGt(),r.zg()}catch(t){s.error=t,s.hasError=!0}finally{Cs(s)}}async Px(t,i,e,s){ii(s),void 0!==this.Zzt&&await this.xx(),ii(s),this.Zzt=this.gGt(t,i,e,void 0),this.Zzt.wn(NZ,this.aGt)}async xx(){var t;void 0!==this.Zzt&&(this.uGt.Zg(),null==(t=this.dGt)||t.Zg(),this.dGt=void 0,void 0!==this.cGt&&(await this.cGt.catch(Ct),this.cGt=void 0),await this.Zzt.zg(),this.uGt=new at,this.fGt===this.Zzt&&(this.fGt=void 0),this.Zzt=void 0,this.lGt=!1,this.AGt=[])}gGt(t,i,e,s){return null!=this.bGt||(this.bGt=this.SGt.Ret()),new LZ(this,t,i,this.nV,this.Rz,this.TGt,this.eut,this.kGt,this.mHt,this.bGt,this._dt,e,s)}sGt(){return this.Dpt=this.EGt(this.Dpt,this.rV.Yg).catch(this.mmt),this.Dpt}async EGt(t,i){if(t&&(await t,ii(i)),!this.HMt)return;const e=this.tq;e===q.OL||this.n7?(await this.PGt(i),await this.xGt(i)):e===q.VU&&await this.PGt(i)}async PGt(t){ii(t),void 0===this.HMt||this.HMt.nGt||(await this.HMt.PGt(t),this.kq.VV(),this.yGt())}yGt(){var t;if(this.jW)return;const i=null==(t=this.HMt)?void 0:t.wGt;i&&(this.jW=new GG(this,this.TL,i),this.Cz.Ea(this.jW))}get IGt(){return this.jzt}async xGt(t){ii(t),this.jzt||(this.jzt=!0,await this.HMt.oGt(this.eLt,this.nLt,this.Mzt,{RGt:!0}))}CGt(){const t=this.Zzt;return void 0===t?Promise.resolve():(0===t.bU&&(t.bU=this.HMt.bU+this.HMt.ct),null!=this.dGt||(this.dGt=new pa),void 0===this.cGt&&(this.cGt=t.PGt(this.uGt.Yg),this.dGt.$g(this.cGt)),this.dGt.Qy)}DGt(){var t;return(null!=(t=this.dGt)?t:this.dGt=new pa).Qy}zzt(t){return this.$zt(t,this.TL.MP)}$zt(t,i){let e=i;return t===this.HMt&&void 0!==this.Zzt&&this.Zzt.bU>0&&(e=_.min(e,this.Zzt.bU)),void 0!==t&&(e=_.max(0,e-t.bU)),e}iGt(){if(void 0===this.Zzt||0===this.Zzt.bU)return!1;if(!this.lGt)return!1;return this.TL.MP+.25>=this.Zzt.bU}get BGt(){return void 0===this.HMt?[]:void 0===this.Zzt?this.HMt.NGt:this.HMt.NGt.concat(this.Zzt.NGt)}MGt(){var t,i;return{Ti:this.TL.Ti,Mi:this.TL.Mi,_Lt:rQ(this.TL),Gct:null==(i=this.bt)||null==(t=i.abr)?void 0:t.restrictToPlayerSize}}LGt(){return new AZ(this.iq)}oGt(t){void 0===t&&(t={});const i={jMt:t.jMt||!1,KMt:t.KMt||!1,QMt:t.QMt||!1,Jx:t.Jx||!1,RGt:t.RGt||!1},e=[this.Yzt,this.w7].filter(it);return this.m7.Zg(),this.m7=new at,this.m7.$g(this.rV.Yg),this.OGt.Zg(),this.OGt=new at,this.OGt.$g(this.rV.Yg),this.Yzt=$e(this.FGt(e,i,this.OGt.Yg),this.OGt).catch(this.Jzt),this.Yzt}async FGt(t,i,e){var s,n,r;if(!this.jzt)return void await this.HMt.UGt(e);await Promise.all(t.map(t=>t.catch(Ct))),this.VGt(),await this.HGt(e),await this.WGt(),await this.qGt(i.KMt,i.QMt),ii(e);const h=await this.HMt.zGt();ii(e);const o=await this.GGt(h,i.Jx,e),a=null==(s=this.iq)?void 0:s.Q3,u=null==(n=this.iq)?void 0:n.K3;if(this.HMt.XGt(void 0!==a,void 0!==u,i.jMt||o,i.KMt,i.QMt),this.HMt.jGt(i.jMt),void 0!==this.Zzt&&(this.Zzt.XGt(void 0!==a,void 0!==u,i.jMt||o,i.KMt,i.QMt),this.Zzt.jGt(i.jMt)),this.HMt.izt(a,u),void 0!==this.Zzt){const t=await this.Zzt.zGt();t&&this.iq&&this.iq.TZ(t)?(this.Zzt.izt(a,u),this.lGt=!0):(this.Zzt.izt(void 0,void 0),this.lGt=!1)}this.QGt(),ii(e);try{var c;await Promise.all([this.HMt.KGt(e),null==(c=this.Zzt)?void 0:c.KGt(e)].filter(it))}catch(t){sa(t)}if(ii(e),this.B4(),this.HMt.hUt(),null==(r=this.Zzt)||r.hUt(),void 0===this.qzt){if(!this.Bkt){const t=this.HMt.YGt;if(t)return void this.Kzt(t.XF,{Hzt:t.Hzt});if(this.HMt.bU>0)return void this.Kzt(0,{Hzt:!1})}this.BGt.length>0&&this.JGt()}else this.Kzt(this.qzt,this.Gzt)}async GGt(t,i,e){if(!i&&this.iq){if(!t)return!1;if(this.iq.TZ(t))return await this.HGt(e),await this.iq.EZ(t),!1}for(const t of this.HMt.NGt)t.Jqt.forEach(t=>t.Zg());this.TL.x9();try{let i;if(this.iq&&await this.TL.hr(),t)i=await this.TL.Un(t);else{const t=void 0!==this.eLt,e=void 0!==this.nLt;i=new gZ(this.TL,t,e)}this.ZGt(i)}finally{this.TL.I9()}return!0}ZGt(t){this.iq=t,this.B4(),this.STt(),this.TTt()}B4(){var t,i;const e=this.iq,s=void 0!==this.Zzt&&this.lGt?this.Zzt:this.HMt;if(e&&void 0!==s&&(s!==this.fGt||S(e.ct))){var n;s!==this.fGt&&e.A3();const t=(null!=(n=s.$Gt)?n:NaN)+s.bU;t>0&&e.C4(t),this.fGt=s}null==(t=this.HMt)||t.hUt(),null==(i=this.Zzt)||i.hUt()}async qGt(t,i){if(!this.iq)return;const e=[];t&&this.iq.Q3&&e.push(this.iq.Q3._S(0,1/0)),i&&this.iq.K3&&e.push(this.iq.K3._S(0,1/0)),await Promise.all(e)}STt(){const t=this.iq;t&&(t.K3&&(t.K3.MY=this.Rz.GY),t.Q3&&(t.Q3.MY=this.Rz.GY))}TTt(){const t=this.iq;t&&(t.K3&&(t.K3.UY=this.Rz.UY),t.Q3&&(t.Q3.UY=this.Rz.UY))}QGt(){var t,i,e,s;const n=void 0!==(null==(t=this.iq)?void 0:t.Q3),r=void 0!==(null==(i=this.iq)?void 0:i.K3);null==(e=this.HMt)||e.QGt(n,r),null==(s=this.Zzt)||s.QGt(n,r)}async y7(t,i,e,s){await Promise.all(t.map(t=>t.catch(Ct))),ii(s),await this.WGt(),ii(s),this.qzt=void 0,this.Xzt=void 0,this.Bkt=!0;const n=(e.gOt?this.IFt:this.rkt).DM(i+this.HMt.bU),r=this.TL.ww(d.Zw,s);this.TL.My(n,e.Hzt),this.jzt&&this.HMt.NGt.length>0&&(this.Br.mM.FUt(),this.tXt(this.MP),this.JGt()),await r,this.Nkt()}Nkt(){const t=this.jW;if(void 0===t)return;const i=this.BL;if(this.hx||this.kx||void 0===i)return;i<this.Cz.Cd.maximumOffset?t.Tn():t.Xx()}tXt(t){var i,e;const s=null!=(e=null==(i=this.HMt)?void 0:i.NGt)?e:[];let n=!1;for(const i of s)i.AWt(t)||(i.czt(),i.ezt.mqt(),n=!0),i.azt(t)||(i.dzt(),i.ezt.wqt(),n=!0);if(void 0!==this.Zzt&&n){const t=this.Zzt.NGt;for(const i of t)i.Zg()}}VGt(){for(const t of this.BGt)t.Zg()}WGt(){return Promise.all([this.KDt(),this.iXt(),this.eXt()])}JGt(){this.QDt(),this.sXt(),this.nXt()}async rXt(){this.jzt&&this.BGt.length>0&&(this.BGt.forEach(t=>t.czt()),await this.KDt(),this.QDt(),this.BGt.forEach(t=>t.$qt.xWt()))}QDt(){if(this.hXt)return;const t=()=>{this.hXt=void 0};this.oXt=new at,this.oXt.$g(this.rV.Yg),this.hXt=$e(this.aXt(this.oXt.Yg),this.oXt).catch(this.Jzt).then(t,t)}async KDt(){var t;null==(t=this.oXt)||t.Zg();const i=this.hXt;this.hXt=void 0,i&&await i}async aXt(t){ii(t),await this.uXt(this.HMt,t),ii(t),void 0!==this.Zzt&&(await Nc(this.CGt(),t),ii(t),await this.uXt(this.Zzt,t))}async uXt(t,i){ii(i);const e=t.NGt;for(;;){const s={stack:[],error:void 0,hasError:!1};try{const n=[],r=_.max(0,this.TL.MP-t.bU);for(const t of e){const i=t.$qt,e=t.hdt(r);if(i.$It)n.push(i.ZVt());else if(t.uzt(r,e,this.Rz.GY)||i._Wt){const s=i.UMt.IMt,r=i.bWt(e);if(void 0===r){if(s.POt)continue;const t=s.ect;t.length&&t[0].EO>e&&(this.MP=1/0),i.CWt(),i.kWt(e)}else{const[e,s]=r;i.pat(e,s,t.MVt),t.tzt.Oqt(e,s)}n.push(i.ZVt())}}const h=Be(s,at.ep([i]),!1);if(0===n.length){e.every(t=>t.$qt.ERt)||n.push(this.TL.ww(d._y,h.Yg));for(const t of e)void 0!==t.$qt.gWt()&&n.push(t.tzt.ww([sZ.Sqt,sZ.Pqt],h.Yg));if(0===n.length)break}await Nc(Promise.race(n),h.Yg)}catch(t){s.error=t,s.hasError=!0}finally{Cs(s)}}}sXt(){if(this.cXt)return;const t=()=>{this.cXt=void 0};this.dXt=new at,this.dXt.$g(this.rV.Yg),this.cXt=$e(this.lXt(this.dXt.Yg),this.dXt).catch(this.Jzt).then(t,t)}async iXt(){var t;null==(t=this.dXt)||t.Zg();const i=this.cXt;this.cXt=void 0,i&&await i}async lXt(t){ii(t);const i=this.BGt;for(;;){const e=[];for(const t of i){const i=t.$qt,s=t.tzt;if(s.$It)e.push(s.ZVt());else{const t=i.gWt();t?"$at"===t.Km?(s.Hqt(t),e.push(s.ZVt())):"bOt"===t.Km?(s.Fqt(t),e.push(s.ZVt())):"zWt"===t.Km&&(s.qqt(t),e.push(s.ZVt())):e.push(i.IWt())}}if(0===e.length)break;await Nc(Promise.race(e),t)}}nXt(){if(this.fXt)return;this.vXt=new at,this.vXt.$g(this.rV.Yg);const t=()=>{this.fXt=void 0};this.fXt=$e(this._Xt(this.vXt.Yg),this.vXt).catch(this.Jzt).then(t,t)}async eXt(){var t;null==(t=this.vXt)||t.Zg();const i=this.fXt;this.fXt=void 0,i&&await i}async _Xt(t){ii(t);let i=await this.gXt(this.HMt,t);void 0!==this.Zzt&&this.lGt&&i&&(ii(t),await Nc(this.DGt(),t),ii(t),this.B4(),i=await this.gXt(this.Zzt,t)),i?this.iq.C3():this.iq.A3()}async gXt(t,i){for(;;){const e=t.NGt;e.forEach(t=>t._at());const s=_.max(0,this.TL.MP-t.bU),n=[],r=[];for(const t of e){const i=t.tzt;for(const e of t.Jqt){const t=xJ(e)?n:r;if(e.$It)t.push(e.ZVt());else if(!e.$Vt(s)){const s=i.Qqt(e.Km);s?"$at"===s.Km&&s.kOt===this.Vzt?(e.cdt(s),t.push(e.ZVt())):"FRt"===s.Km&&s.kOt===this.Vzt?(e.z2(s),t.push(e.ZVt())):"zWt"===s.Km&&(e.dHt(s),t.push(e.ZVt())):r.push(i.Kqt(e.Km))}}}if(0===n.length){if(await this.pXt(t,e,s,i))continue}if(0===n.length&&0===r.length){return e.every(t=>t.Jqt.length>0&&t.Jqt.every(t=>t.$Vt(s)))}await Nc(Promise.race([...n,...r]),i)}}async pXt(t,i,e,s){const n=[],r=[];for(const t of i){const i=t.hdt(e);for(const s of t.Jqt){if(!xJ(s))continue;const h=t.tzt.Qqt(s.Km);if(void 0!==h){if(h.kOt===this.Vzt)return!1;n.push(h)}else{if(t.$It||t.uzt(e,i,this.Rz.GY)||!s.tHt(e,i))return!1;{const t=s.zVt.MVt;void 0!==t&&r.push(t)}}}}if(0===n.length)return!1;const h=lf(n,t=>t.kOt).kOt;if(n.every(t=>"FRt"===t.Km&&t.kOt===h)){const i=oo(n,t=>t.EO).EO+t.bU,e=[...n,...r],h=await this.mXt(e);this.wXt(h)?(Ft.uLt(yc,"Seamless switch from",this.iq.Cd,"to",h),await this.iq.EZ(h),Ft.uLt(yc,"Seamless switch complete.")):await this.yXt(t,i,h,s),this.Vzt=n[0].kOt}else for(const t of i)for(const i of t.Jqt){let e=t.tzt.Qqt(i.Km);for(;void 0!==e&&("FRt"!==e.Km||e.kOt!==h);)Ft.uLt(yc,"Removing append for other discontinuity, expecting "+h,e),t.tzt.sHt(e),e=t.tzt.Qqt(i.Km)}return!0}wXt(t){var i,e;switch(null!=(e=null==(i=this.bt)?void 0:i.seamlessSwitchStrategy)?e:Oh.OL){case Oh.FL:return!0;case Oh.UL:return!1;default:return this.iq.TZ(t)}}async mXt(t){const i=t.map(t=>t.Yqt.frt),e=i.map(t=>({qT:t})),s=[...De(t,t=>t.Yqt.MW),...this.Br.UUt],n=this.bt;let r=await iY(n.contentProtection,i,s,this.nV,n.useCredentials);return 0===r.length&&this.iq&&this.iq.Cd.aq.length>0&&(r=this.iq.Cd.aq),{Km:Zr.wV,L4:e,aq:r,X4:n.useManagedMediaSource}}async yXt(t,i,e,s){var n,r,h;const o=this.iq,a=o.ct,u=this.TL.IP.V>0&&this.TL.MP<i;if(u)try{for(Ft.uLt(yc,"Marking end of stream and waiting for ended to switch discontinuity."),o.C3();!this.TL.UP&&this.TL.MP<i;)await this.TL.ww([d._y,d.Bw],s)}catch(t){throw o.A3(),o.C4(a),t}Ft.uLt(yc,"Perform hard switch from",null==(n=this.iq)?void 0:n.Cd,"to",e);try{var c,l;this.TL.x9(),this.TL.MP<i&&this.TL.My(i,!0,!0),this.QGt(),await this.TL.hr();const t=await this.TL.Un(e);this.ZGt(t),null==(c=t.K3)||c.F3(i-1,i),null==(l=t.Q3)||l.F3(i-1,i),this.QGt()}finally{u&&Wr(this.TL.Gx()),this.TL.I9()}t.izt(null==(r=this.iq)?void 0:r.Q3,null==(h=this.iq)?void 0:h.K3),Ft.uLt(yc,"Hard switch complete.")}HGt(t){return Nc(gn(De(this.BGt,t=>t.Jqt.map(t=>t.ZVt()))),t)}Ekt(){const t=this.Bx,i=this.Rx;this.OEt===t&&this.FEt===i||(this.OEt=t,this.FEt=i,this.So(new ts))}async kn(){Ft.hB(ra,"Unloading the player."),this.AXt(),this.pEt(),void 0!==this.Zzt&&await this.xx(),await this.hr(),this.TL.Eq=void 0,this.YL.kn(),this.$L.kn(),this.Gl.kn(),this.VEt.kn(),this.bXt.kn(),this.kq.zg(),this.mHt.zg(),this.bGt&&(this.bGt.zg(),this.bGt=void 0)}async hr(){Ft.hB(ra,"Resetting the player."),this.Vzt=-1,this.rV.Zg(),this.m7.Zg(),this.m7=new at,this.m7.$g(this.rV.Yg),this.OGt.Zg(),this.OGt=new at,this.OGt.$g(this.rV.Yg);const t=[this.Dpt,this.w7,this.Yzt].filter(it);await Promise.all(t.map(t=>t.catch(Ct))),this.Dpt=void 0,this.w7=void 0,this.Yzt=void 0,this.VGt(),await this.WGt(),this.HMt&&(this.YL.BI=void 0,this.$L.BI=void 0,this.mGt.BI=void 0,await this.HMt.zg(),this.fGt===this.HMt&&(this.fGt=void 0),this.HMt=void 0),this.jW=void 0,this.Cz.hr(),this.TL.Aq(),void 0!==this.Zzt&&void 0!==this.iq&&void 0===this.TL.lt?await this.TL.C8():await this._Gt(),this.jzt=!1,this.qzt=void 0,this.LEt=void 0,this.OEt=0,this.FEt=0,this.Xzt=void 0,this.Bkt=!1,this.n7=!1,zd.Lg(this.Qzt),this.SXt=!1,this.bXt.hr(),this.TXt(),this.So(new G(this.MP,this.Ax))}async _Gt(){this.iq=void 0,await this.TL.hr()}TXt(){for(const t of this.Gl.II)t.kn();this.mGt.hr(),this.VEt.hr(),this.Gl.hr()}kXt(){this.bXt.wn(DZ,this.Rs),this.bXt.wn(Do.TM,this.IL),this.bXt.wn(Do.SM,this.EXt),this.bXt.wn(Do.wM,this.PXt),this.Rz.wn("NY",this.qEt),this.Rz.wn("FY",this.zEt),this.TL.wn(BZ,this.Rs),this.TL.wn(Mc.ma,this.GEt),this.TL.wn(d.Ew,this.kkt),this.TL.wn(d.Rw,this.xXt),this.TL.wn(d.Bw,this.Eh),this.TL.wn(d.jw,this.oNt),this.TL.wn(d.uo,this.IXt),this.TL.wn(d.Qw,this.RXt),this.TL.wn(Do.wI,this.FV),this.TL.wn(d._y,this.H6),this.TL.wn(d.$w,this.Je),this.TL.wn(d.Zw,this.Rq),this.TL.wn(d.Jw,this.CXt),this.TL.wn(d.gy,this.DXt)}AXt(){this.bXt.mn(DZ,this.Rs),this.bXt.mn(Do.TM,this.IL),this.bXt.mn(Do.SM,this.EXt),this.bXt.mn(Do.wM,this.PXt),this.Rz.mn("NY",this.qEt),this.Rz.mn("FY",this.zEt),this.TL.mn(BZ,this.Rs),this.TL.mn(Mc.ma,this.GEt),this.TL.mn(d.Ew,this.kkt),this.TL.mn(d.Rw,this.xXt),this.TL.mn(d.Bw,this.Eh),this.TL.mn(d.jw,this.oNt),this.TL.mn(d.uo,this.IXt),this.TL.mn(d.Qw,this.RXt),this.TL.mn(Do.wI,this.FV),this.TL.mn(d._y,this.H6),this.TL.mn(d.$w,this.Je),this.TL.mn(d.Zw,this.Rq),this.TL.mn(d.Jw,this.CXt),this.TL.mn(d.gy,this.DXt)}constructor(t,i,e,s,n,r,h,o){var a;super(),this.Rz=void 0,this.Cz=void 0,this.mHt=void 0,this.SGt=void 0,this.TL=void 0,this.nV=void 0,this.oq=void 0,this.lq=void 0,this.kq=void 0,this.bXt=void 0,this.kGt=void 0,this.TGt=void 0,this.eut=void 0,this._dt=void 0,this.YL=void 0,this.$L=void 0,this.mGt=void 0,this.VEt=void 0,this.Gl=void 0,this.jzt=void 0,this.HMt=void 0,this.Zzt=void 0,this.lGt=void 0,this.fGt=void 0,this.iq=void 0,this.Dpt=void 0,this.rV=void 0,this.cGt=void 0,this.dGt=void 0,this.uGt=void 0,this.bGt=void 0,this.OGt=void 0,this.Yzt=void 0,this.m7=void 0,this.w7=void 0,this.Vzt=void 0,this.oXt=void 0,this.dXt=void 0,this.vXt=void 0,this.hXt=void 0,this.cXt=void 0,this.fXt=void 0,this.tq=void 0,this.JW=void 0,this.ZW=void 0,this.qzt=void 0,this.Gzt=void 0,this.Bkt=void 0,this.n7=void 0,this.LEt=void 0,this.OEt=void 0,this.FEt=void 0,this.Xzt=void 0,this.Qzt=void 0,this.SXt=void 0,this.AGt=void 0,this.BXt=void 0,this.jW=void 0,this.kkt=void 0,this.GEt=void 0,this.xXt=void 0,this.Eh=void 0,this.oNt=void 0,this.IXt=void 0,this.IL=void 0,this.RXt=void 0,this.FV=void 0,this.H6=void 0,this.Je=void 0,this.Rq=void 0,this.CXt=void 0,this.DXt=void 0,this.EXt=void 0,this.PXt=void 0,this.Jzt=void 0,this.mmt=void 0,this.aGt=void 0,this.qEt=void 0,this.zEt=void 0,this.pGt=void 0,this.Rz=e,this.Cz=s,this.mHt=n,this.SGt=r,this.VEt=new cc,this.jzt=!1,this.HMt=void 0,this.Zzt=void 0,this.lGt=!1,this.fGt=void 0,this.iq=void 0,this.Dpt=void 0,this.rV=new at,this.cGt=void 0,this.dGt=void 0,this.uGt=new at,this.bGt=void 0,this.OGt=new at,this.Yzt=void 0,this.m7=new at,this.w7=void 0,this.Vzt=-1,this.oXt=void 0,this.dXt=void 0,this.vXt=void 0,this.hXt=void 0,this.cXt=void 0,this.fXt=void 0,this.tq=q.lz,this.JW=void 0,this.ZW=void 0,this.qzt=void 0,this.Gzt=void 0,this.Bkt=!1,this.n7=!1,this.LEt=void 0,this.OEt=0,this.FEt=0,this.Xzt=void 0,this.Qzt=0,this.SXt=!1,this.AGt=[],this.BXt=void 0,this.kkt=t=>{this.JW=P(t.errorObject),this.ZW=t.errorObject,this.Rs(t)},this.GEt=t=>{this.qq(Ok(t.lt))},this.xXt=()=>{var t;null==(t=this.HMt)||t.hUt();const i=this.ct;i!==this.LEt&&(this.LEt=i,this.So(new Rs(this.LEt)))},this.Eh=()=>{this.UP&&this.So(new At(this.MP))},this.oNt=()=>{this.So(new hl(this.MP))},this.IXt=()=>{this.MTt(),this.So(new Tc(this.MP))},this.IL=()=>{void 0!==this.BXt&&(zd.Lg(this.BXt),this.BXt=void 0),this.So(new ce(this.MP))},this.RXt=()=>{this.So(new H(this.MP))},this.FV=()=>{this.So(new ou(this.MP,this.Ax))},this.H6=()=>{var t;const i=this.MP,e=this.CP;null==(t=this.HMt)||t.NXt(i),this.So(new Si(i,e)),!this.hx&&this.iGt()&&(this.zx(),this.Eh())},this.Je=()=>{this.So(new F(this.MP))},this.Rq=()=>{this.So(new Es(this.MP))},this.CXt=()=>{this.Ekt()},this.DXt=()=>{this.So(new Ze(this.MP,this.Mx))},this.EXt=()=>{this.TL.kx?this.So(new ux(this.MP)):(null!=this.BXt||(this.BXt=zd.Og(()=>{this.HMt&&this.SXt&&Wr(this.HMt.MXt())},2500)),this.MTt(),this.So(new ux(this.MP)))},this.PXt=()=>{this.SXt=!0,this.So(new lo(this.MP,this.Ax))},this.Jzt=t=>{D(t)||rt(t)||ll(t)||(this.VGt(),Wr(this.WGt()),!function(t){return t instanceof SN}(t)?this.qq(new Ga(Vo.MEDIA_LOAD_ERROR,t.message,t)):Wr(this.oGt({Jx:!0})))},this.mmt=t=>{if(D(t))return;const i=t instanceof Ga?t:new Ga(Vo.MEDIA_DECODE_ERROR,t.message,t);this.qq(i)},this.aGt=t=>{this.AGt.push(t)},this.qEt=()=>{this.STt()},this.zEt=()=>{this.TTt()},this.pGt=()=>{this.Ekt()},this.eut=new zG(h),this.TL=t,this.nV=i,this.oq=new LK(this.Rz.kY),this.kGt=new OK(this.TL),this.TGt=new jK(this.Rz),this._dt=Mo({},o.retryConfiguration,{maxRetries:null!=(a=o.retryConfiguration.maxRetries)?a:1/0}),this.YL=new He,this.$L=new He,this.mGt=new sl,this.Gl=new Yu([this.mGt,this.VEt]),this.lq=new ya(this.nV),this.TL.Eq=this.lq,this.kq=new dx(this,this.TL),this.bXt=new bs(this.kq,!0),this.kXt()}},LZ=class extends Ne{get VMt(){return this.LXt}get eLt(){return this.OXt}get nLt(){return this.FXt}get Mzt(){return this.UXt}get Uzt(){return[this.OXt,this.FXt].filter(it)}get ht(){return this.YL}get Br(){return this.Fkt.Br}get eGt(){return this.Fkt}get IFt(){const t=this.Uzt;return 0===t.length?ve.iL():t.reduce((t,i)=>t.Mn(i.IMt.IFt),ve.eL())}get zMt(){return this.VXt}get MP(){return this.oa.zzt(this)}get hGt(){var t,i;const e=null==(t=this.HXt)?void 0:t.hzt,s=null==(i=this.WXt)?void 0:i.hzt;return e&&s?s.Mn(e):null!=s?s:e}get Sx(){return this.N4}get nt(){return this.Gl}get rt(){return this.$L}get POt(){var t,i;return(null==(t=this.OXt)?void 0:t.IMt.POt)||(null==(i=this.FXt)?void 0:i.IMt.POt)||!1}get $Gt(){var t,i,e;return null!=(e=null==(t=this.OXt)?void 0:t.IMt.ct)?e:null==(i=this.FXt)?void 0:i.IMt.ct}get qXt(){var t,i;const e=null==(t=this.OXt)?void 0:t.IMt.ct,s=null==(i=this.OXt)?void 0:i.IMt.ct;return void 0!==e&&void 0!==s?_.min(e,s):null!=e?e:s}get zXt(){var t;const i=null==(t=this.Fkt.uVt)?void 0:t.IMt.ct;if(void 0!==i)return i;const e=this.Uzt;return e.length>0&&e.every(t=>function(t){return t.IMt.ect.length>0&&!t.IMt.POt}(t))?1/0:NaN}get ct(){var t;return null!=(t=this.$Gt)?t:this.zXt}get tGt(){var t;return null!=(t=this.qXt)?t:this.zXt}get Ozt(){const t=this.Uzt;if(0===t.length||this.ct!==1/0)return;let i;for(const e of t){const t=e.IMt.Sx;if(0===t.V)continue;const s=t.An(t.V-1)+e.IMt.cSt,n=e.IMt.zFt,r=s+(null!=n?n:0);(!i||i<r)&&(i=r)}return i}get YGt(){var t,i,e;if(void 0!==(null==(t=this.GXt)?void 0:t.EO))return{XF:this.GXt.EO,Hzt:!1};if(void 0!==(null==(i=this.GXt)?void 0:i.XXt)){var s;const t=null==(s=this.LXt)?void 0:s.qOt(this.GXt.XXt);if(void 0!==t)return{XF:t,Hzt:!1}}if(null==(e=this.LXt)?void 0:e.IMt.Tn){const t=this.LXt.IMt,i=t.Tn;let e=i._Ot;if(i._Ot<0){const i=t.IFt;e+=i.An(i.V-1)}return{XF:e,Hzt:!i.gOt}}return this.POt?void 0:{XF:1/0,Hzt:!0}}hUt(){var t,i;const e=function(t){if(0===t.length)return ve.iL();let i=ve.eL(),e=0;for(const s of t){const t=s.IMt.Sx;t.V>0&&(i=i.Mn(t),e=_.max(e,t.Tn(0)))}if(i.V>0)return i;return ve.$M(e)}(this.Uzt);0!==e.V&&(this.N4=e,null==(t=this.wpt)||t.qU(e.Tn(0)),null==(i=this.hBt)||i.qU(e.Tn(0)))}NXt(t){const i=[];if(this.LXt)for(const e of this.NGt)for(const s of e.Jqt){const e=s.iHt(t);e&&!pi(i,e)&&i.push(e)}df(this.VXt,i)||(this.VXt=i,this.So(new AJ))}get wGt(){if(this.Mc.latencyConfiguration)return this.Mc.latencyConfiguration;const t=this.Uzt;if(0===t.length)return;if(this.POt)return;const i=_.max(...t.map(t=>{var i;return null!=(i=t.IMt.cSt)?i:0}));return{minimumOffset:.66*i,maximumOffset:2*i,targetOffset:1*i,forceSeekOffset:3*i,minimumPlaybackRate:Ot,maximumPlaybackRate:Jt}}get nGt(){return this._kt}get sx(){return this.sSt}set sx(t){this.sSt!==t&&(this.sSt=t,this.So(t?new gt:new Fr))}get rO(){return this.okt}get bU(){return this.zU}set bU(t){this.zU=t;for(const i of this.jXt)i.bU=t}get jXt(){return[this.QXt,this.KXt,this.pq,this.wpt,this.yq,this.hBt].filter(it)}fq(t){for(const i of t)i.src&&this.pq.eV(i)}klt(){const t=this.Br.HUt;if(0===t.length)return void Ft.cLt(ra,"The HLSModel contains no variant streams.");var i;const e=null!=(i=Jr(t,t=>0!==t.FOt.length&&0!==t.UOt.length))?i:t[0],s=t.filter(t=>t!==e);for(const t of e.FOt){const i=new Uk,n=[];i.lO(new DK(e,t)),n.push(t);for(const e of s){const s=Jr(e.FOt,i=>SK(i,t)&&!PK(n,i));s&&(i.lO(new DK(e,s)),n.push(s))}this.YL.tt(new IK(this,this.Rz,this.YL,i))}for(const t of e.UOt){const i=new Uk,n=[];i.lO(new BK(e,t)),n.push(t);for(const e of s){const s=Jr(e.UOt,i=>SK(i,t)&&!PK(n,i));s&&(i.lO(new BK(e,s)),n.push(s))}this.$L.tt(new RK(this,this.Rz,this.$L,i))}}async PGt(t){if(this._kt)return;if(!this.Fkt.rVt){try{await this.Fkt.dVt(t)}catch(t){throw sa(t),this.sx=!1,new Ga(Vo.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.klt()}const i=await this.YXt();this.JXt(i),this.ZXt(i);const e=this.$Xt(i.FOt),s=this.tjt(i.UOt),n=this.ijt(i.VOt);n||this.ejt(i.HOt),await this.oGt(e,s,n,{RGt:!0}),this._kt=!0}ZXt(t){const i=this.hBt;if(!i)return;const e=function(t){const i=[];for(const e of t){const t=yZ(e);void 0!==t&&i.push({nit:t,rit:e.bs||"",Th:e.l})}return i}(t.HOt);for(const t of e)i.Mgt(t)}async YXt(){if(this.sjt=this.Br.HUt,!this.sjt.length)throw new Ga(Vo.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.njt(this.sjt);if(0===t.length)throw new Ga(Vo.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const i=await this.rjt(t);return i.length>0&&(t=i),Ft.hB(ra,"Selecting initial active variant stream."),bZ(t,this.Mc.abr,this.Rz,this._dt.maximumBackoff)}$Xt(t){if(this.hjt){const t=this.ojt(this.hjt);if(t)return t}return RZ(t)}tjt(t){if(this.ajt){const t=this.ojt(this.ajt);if(t)return t}return RZ(t)}ijt(t){for(const t of this.Gl.II)t.Xk===xh.Kn&&(this.ujt=this.KXt.Bzt(t));if(this.ujt){const t=this.ojt(this.ujt);if(t)return t}return IZ(t)}ejt(t){const i=this.hBt;if(!i)return;const e=IZ(t);if(void 0!==e){const t=yZ(e);i.Bgt(t).Xk=xh.Kn}}GMt(t){for(const i of t)if(!this.cjt(i))throw new m("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.sjt=t}cjt(t){const i=this.Br;return!!i&&pi(i.HUt,t)}ojt(t){if(t&&this.LXt)return Jr(this.LXt.lLt,i=>i===t)}async djt(){var t;const i=null!=(t=this.sjt)?t:this.Br.HUt;if(0===i.length&&!this.sjt)return Ft.hB(ra,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===i.length&&!this.sjt)return Ft.hB(ra,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const e=await this.njt(i);if(0===e.length)return Ft.cLt(ra,"No variant streams with supported codecs available to perform ABR selection on."),[];const s=TZ(e,this._dt.maximumBackoff);return 0===s.length?(this.ljt||(Ft.cLt(ra,"No variant streams with online renditions available to perform ABR selection on."),this.fjt++,await this.vjt(e)),[]):s}async _jt(){const t=await this.yLt();if(void 0===t)return;const i=!!this.LXt&&t.kW<this.LXt.kW;await this.XMt(t,{jMt:i})}async yLt(){const t=await this.djt();if(0===t.length)return;const i=await this.rjt(t),e=this.oa.MGt(),s=await this.TGt.yLt(t,this.LXt,i,e,this.oa.LGt());return!!this.LXt&&s.kW<this.LXt.kW||this.gjt(s,e._Lt)?s:void 0}gjt(t,i){var e;if(t===this.LXt)return!1;const s=this.LXt&&kZ(this.LXt,this._dt.maximumBackoff),n=kZ(t,this._dt.maximumBackoff);if(!s&&n)return!0;(!this.lDt||this.lDt.WMt.kW>t.kW)&&(this.lDt={WMt:t,ift:zd.Mg()});const r=zd.Mg()-this.lDt.ift;var h;const o=null!=(h=null==(e=this.FXt)?void 0:e.IMt.vLt)?h:1/0;return i>=_.max(o-1,5)||r>1e3}pjt(t){return oo(t,t=>t.kW)}async MXt(){this.lDt=void 0;let t=await this.djt();if(0===t.length)return;const i=await this.rjt(t);i.length>0&&(t=i);const e=this.pjt(t);void 0!==e&&(await this.XMt(e,{jMt:!0}),this.oa.hq.RIt(e.kW))}async vjt(t){this.ljt=!0;let i=!1;for(const e of t)try{const t=this.FXt?Jr(e.UOt,t=>SK(t,this.FXt)):void 0;if(void 0===t)continue;await this.wVt(t),t.IMt.jFt=-1/0,i=!0}catch(t){}if(i)this.fjt=0,await this.oa.rXt();else{if(this.fjt>=this._dt.maxRetries)return void this.oa.qq(new Ga(Vo.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=_.min(this._dt.minimumBackoff*2**(this.fjt-1),this._dt.maximumBackoff);await Er(t)}this.ljt=!1,await this._jt()}async njt(t){let i=await _f(t,async t=>{var i,e;const s=[(null==(i=t.frt)?void 0:i.yCt)?'audio/mp4; codecs="'+t.frt.yCt+'"':void 0,(null==(e=t.frt)?void 0:e.bCt)?'video/mp4; codecs="'+t.frt.bCt+'"':void 0].filter(it);return 0===s.length||await this.kGt.QZ(s,this.Mc.useManagedMediaSource)});return i.some(t=>{var i;return null==(i=t.frt)?void 0:i.bCt})&&(i=i.filter(t=>!t.frt||t.frt.bCt||0!==t.UOt.length)),i.some(t=>{var i;return null==(i=t.frt)?void 0:i.yCt})&&(i=i.filter(t=>!t.frt||t.frt.yCt||0!==t.FOt.length)),i}rjt(t){return this.Fkt.oVt?_f(t,t=>async function(t,i){for(const e of t)if(!await i(e))return!1;return!0}([RZ(t.FOt),RZ(t.UOt),IZ(t.VOt),IZ(t.HOt)].filter(it),t=>this.mjt(t))):Promise.resolve([])}async mjt(t){if(0===t.IMt.ect.length)return!1;const i=t.IMt.ect[0];if(!i.nyt)return!1;const e=i.nyt,s=e.LAt?QK(e.LAt.Tn,e.LAt.V):void 0;try{return await this.eut.Uct(e.zE,s)}catch(t){return!1}}async sLt(t){if(!this.LXt)return void(this.hjt=t);const i=this.ojt(t);if(t&&!i)return void Ft.lt(ra,"Trying to set an invalid rendition as the active audio rendition.");if(this.OXt===i)return;const e=it(i)!==it(this.OXt);Ft.hB(ra,"Switching audio rendition"),await this.oGt(i,this.FXt,this.UXt,{KMt:!0,jMt:e})}async rLt(t){if(!this.LXt)return void(this.ajt=t);const i=this.ojt(t);if(t&&!i)return void Ft.lt(ra,"Trying to set an invalid rendition as the active video rendition.");if(this.FXt===i)return;const e=it(i)!==it(this.FXt);Ft.hB(ra,"Switching video rendition"),await this.oGt(this.OXt,i,this.UXt,{QMt:!0,jMt:e})}async Nzt(t){if(!this.LXt)return void(this.ujt=t);const i=this.ojt(t);!t||i?(Ft.hB(ra,"Switching subtitle rendition"),await this.oGt(this.OXt,this.FXt,i)):Ft.lt(ra,"Trying to set an invalid rendition as the active subtitle rendition.")}async wjt(t,i){if(this.ljt)return;const e=0===this.$L.V;t.Km===nl.Bk||t.Km===nl.Dk&&e?this.sjt&&this.sjt.length<=1?(t.Km===nl.Bk&&this.FXt!==t?await this.oGt(this.OXt,t,this.UXt):t.Km===nl.Dk&&e&&this.OXt!==t&&await this.oGt(t,this.FXt,this.UXt),await this.yjt(t,i)):await this._jt():await this.yjt(t,i)}async wVt(t,i){try{await this.Fkt.wVt(t,i)}catch(e){throw sa(e),(rt(e)||ll(e))&&await this.wjt(t,i),e}}async yjt(t,i){if(!pi(this.Ajt,t)){this.Ajt.push(t);try{const e=t.Km===nl.OU||t.Km===nl.bLt?1/0:this._dt.maxRetries;await $i(()=>this.retryOfflineRenditionsCallback(t,i),i,e,this._dt.minimumBackoff,this._dt.maximumBackoff)}catch(t){this.oa.qq(new Ga(Vo.MEDIA_LOAD_ERROR,t.message,t))}finally{oi(this.Ajt,t),t.IMt.jFt===-1/0&&await this.oa.rXt()}}}async UGt(t){var i;const e=this.OXt,s=this.FXt,n=[];n.push(this.bjt(s,t)),TK(e,s)||n.push(this.bjt(e,t));const r=this.UXt;if(null==(i=this.Mc.hls)?void 0:i.delaySubtitlePreload)await Promise.all(n),await this.bjt(r,t);else{const i=this.bjt(r,t);await Promise.all([...n,i])}}async bjt(t,i){if(t)try{await this.Fkt.wVt(t,i)}catch(e){sa(e),(rt(e)||ll(e))&&await this.Sjt(t,i)}}async Sjt(t,i){if(this.ljt)return;const e=0===this.$L.V;if(t.Km===nl.Bk||t.Km===nl.Dk&&e)if(this.sjt&&this.sjt.length<=1)await this.yjt(t,i);else{const t=await this.YXt();this.JXt(t);const i=this.$Xt(t.FOt),e=this.tjt(t.UOt),s=this.ijt(t.VOt);await this.oGt(i,e,s)}else await this.yjt(t,i)}oGt(t,i,e,s){void 0===s&&(s={});const n={jMt:s.jMt||!1,KMt:s.KMt||!1,QMt:s.QMt||!1,Jx:s.Jx||!1,RGt:s.RGt||!1};return n.RGt||n.Jx||this.OXt!==t||this.FXt!==i||this.UXt!==e?void 0===t&&void 0===i?Promise.reject(new m("Trying to buffer no media renditions.")):(this.OXt=t,this.FXt=i,this.UXt=e,this.hUt(),this.So(new lZ),this.oa.oGt(n)):Promise.resolve()}async XMt(t,i){if(!this.oa.IGt)return void Ft.lt(ra,"The LLHLSPlayer is not loaded.");if(!t)return void Ft.lt(ra,"Cannot explicitly set the active variant stream to undefined.");if(!this.cjt(t))return void Ft.lt(ra,"Trying to set an active variant stream that does not exists on the internal model.");if(t===this.LXt)return void Ft.hB(ra,"Trying to set the already active variant stream, ignoring.");const e=this.OXt?Jr(t.FOt,t=>SK(t,this.OXt)):void 0,s=this.FXt?Jr(t.UOt,t=>SK(t,this.FXt)):void 0,n=this.UXt?Jr(t.VOt,t=>SK(t,this.UXt)):void 0;this.JXt(t),this.lDt=void 0,await this.oGt(e,s,n,i)}JXt(t){var i;if(Ft.hB(ra,"Setting active variant stream."),this.LXt===t)return;const e=(null==(i=this.LXt)?void 0:i.XLt)!==(null==t?void 0:t.XLt);if(this.LXt&&e)for(const t of this.LXt.VOt)this.KXt.zOt(t);if(this.LXt=t,this.So(new dZ),t&&e)for(const i of t.VOt)this.KXt.Czt(i)}Tjt(){this.kjt(this.YL),this.kjt(this.$L)}kjt(t){const i=[];for(const e of t.II){const t=[];for(const i of e.KI.II)pi(i.WMt.lLt,i.UMt)||t.push(i);for(const i of t)e.KI._S(i),i.kn();0===e.KI.V&&i.push(e)}for(const e of i)t.it(e),e.kn()}async KGt(t){const i={stack:[],error:void 0,hasError:!1};try{const e=Be(i,at.ep([t]),!1),s=[this.FXt,TK(this.OXt,this.FXt)?void 0:this.FXt,this.UXt].filter(it);await Promise.all(s.filter(t=>!t.IMt.VFt).map(t=>this.Fkt.yVt(t,e.Yg)))}catch(t){i.error=t,i.hasError=!0}finally{Cs(i)}}async zGt(){var t,i,e;const s=this.OXt,n=this.FXt,r=null==(t=this.LXt)?void 0:t.frt,h=[];if(void 0!==s){var o,a;const t=null!=(a=null==(o=s.frt)?void 0:o.yCt)?a:null==r?void 0:r.yCt;if(!t)return;{const i='audio/mp4; codecs="'+t+'"';Ft.hB(ra,"Configuring MediaSource for initial audio rendition with codec: "+i+"."),h.push(i)}}if(void 0!==n){var u,c;const t=null!=(c=null==(u=n.frt)?void 0:u.bCt)?c:null==r?void 0:r.bCt;if(!t)return;{const i='video/mp4; codecs="'+t+'"';Ft.hB(ra,"Configuring MediaSource for initial video rendition with codec: "+i+"."),h.push(i)}}if(0===h.length)return void Ft.cLt(ra,"No codecs found on the active variant stream.");var d;const l=null!=(d=null==n||null==(i=n.IMt.ect[0])?void 0:i.MW)?d:[];var f;const v=null!=(f=null==s||null==(e=s.IMt.ect[0])?void 0:e.MW)?f:[],_=this.Mc,g=this.Br,p=await iY(_.contentProtection,h,[...g.UUt,...v,...l],this.nV,_.useCredentials);return{Km:Zr.wV,L4:h.map(t=>({qT:t})),aq:p,X4:_.useManagedMediaSource}}get NGt(){return[this.HXt,this.WXt,this.Ejt].filter(it)}XGt(t,i,e,s,n){const r=this.OXt,h=this.FXt,o=t&&TK(r,h);var a,u;if(i&&h)if(this.WXt)(e||n||o&&s)&&(this.WXt.Zg(),this.WXt.ezt.Gy()),this.WXt.UMt!==h&&this.WXt.oWt(h);else{const t=o?[Ci.Bk,Ci.Dk]:[Ci.Bk];this.WXt=this.Pjt(h,t)}else null==(a=this.WXt)||a.zg(),this.WXt=void 0;t&&r&&!o?this.HXt?((e||s)&&(this.HXt.Zg(),this.HXt.ezt.Gy()),this.HXt.UMt!==r&&this.HXt.oWt(r)):this.HXt=this.xjt(r):(null==(u=this.HXt)||u.zg(),this.HXt=void 0)}jGt(t){const i=this.UXt;if(this.Ejt){this.Ejt.UMt===i?t&&(this.Ejt.Zg(),this.Ejt.ezt.Gy()):(this.Ejt.zg(),this.Ejt=void 0)}if(!this.Ejt&&i&&(this.Ejt=this.Ijt(i)),i){const t=this.KXt.Lzt(i);t.Xk=xh.Kn,this.rzt(t)}}Pjt(t,i){const e=function(t,i,e,s,n,r,h,o,a,u,c){const d=e.Br.mM,l=new YJ(d),f=new jJ(Ci.Bk,t,e,l,s,n,r,c),v=h.YSt(l,d,i);return new cZ(f,l,v,o,a,u)}(t,i,this.Fkt,this.nV,this.eut,this.mHt,this.bGt,this.wpt,this.hBt,this.Rz,this.Mc.useCredentials);return e.$qt.wn(XJ.iWt,this.Rjt),e.$qt.wn(XJ.eWt,this.Cjt),e.tzt.wn(sZ.bqt,this.Djt),e.tzt.wn(sZ.Tqt,this.Bjt),e.tzt.wn(sZ.kqt,this.Njt),e.tzt.wn(sZ.Sqt,this.Mjt),e}xjt(t){const i=function(t,i,e,s,n,r,h,o,a){const u=i.Br.mM,c=new YJ(u),d=new jJ(Ci.Dk,t,i,c,e,s,n,a),l=r.YSt(c,u,[Ci.Dk]);return new cZ(d,c,l,h,void 0,o)}(t,this.Fkt,this.nV,this.eut,this.mHt,this.bGt,this.wpt,this.Rz,this.Mc.useCredentials);return i.$qt.wn(XJ.eWt,this.Cjt),i.tzt.wn(sZ.bqt,this.Djt),i.tzt.wn(sZ.Sqt,this.Mjt),i}Ijt(t){return function(t,i,e,s,n,r){const h=i.Br.mM,o=new YJ(h),a=new jJ(Ci.NT,t,i,o,e,s,n,r),u=new oZ(o,h,Ci.NT);return new cZ(a,o,u)}(t,this.Fkt,this.nV,this.eut,this.mHt,this.Mc.useCredentials)}izt(t,i){if(t?this.P4&&this.P4.Tzt(t,this.zU)||(this.P4=new pZ(Ci.Dk,t,this.zU)):this.P4=void 0,i?this.x4&&this.x4.Tzt(i,this.zU)||(this.x4=new pZ(Ci.Bk,i,this.zU)):this.x4=void 0,void 0!==this.WXt){const i=void 0!==t&&void 0===this.HXt,e=[this.x4,i?this.P4:void 0].filter(it);this.WXt.izt(e)}if(void 0!==this.HXt){const t=this.P4?[this.P4]:[];this.HXt.izt(t)}}rzt(t){t?this.Ljt&&this.Ljt.Tzt(t)||(this.Ljt=new wZ(t,this.Br.mM)):this.Ljt=void 0,void 0!==this.Ejt&&void 0!==this.Ljt&&this.Ejt.rzt(this.Ljt)}vGt(t){if(this.JU===t)return;this.JU=t;for(const i of this.jXt)i.YU(t);const i=this.UXt;if(void 0!==i){const t=this.KXt.Lzt(i);this.rzt(t)}}QGt(t,i){const e=[];t&&e.push(Ci.Dk),i&&e.push(Ci.Bk),this.Br.mM.OUt(e)}Ojt(){if(void 0===this.WXt)return!1;const t=zd.Mg();if(!this.WXt.$qt.nqt(t))return!1;const i=this.WXt.$qt.tqt();if(void 0===i||void 0===i.$at.ct)return!1;const e=this.MP,s=this.oa.ux,n=this.WXt.hzt.JM(e);if((void 0!==n?n.An(0)-e:0)>=2*i.$at.ct*s)return!1;if(i.iqt>0&&0===i.eqt)return i.sqt>1e3*i.$at.ct*.8;return 8*i.eqt/this.Rz.kY.kW>=1.8*i.$at.ct}async Fjt(){var t;const i=await this.yLt();if(void 0===i)return;const e=null==(t=this.WXt)?void 0:t.$qt.tqt();if(void 0===e)return;const s=this.LXt;if(e.eqt>0){if(_.max(0,e.eqt-e.iqt)<=e.eqt*(i.kW/s.kW))return}const n=i.kW<s.kW;await this.XMt(i,{jMt:n})}TXt(){for(const t of this.YL.II)t.kn();for(const t of this.$L.II)t.kn();for(const t of this.Gl.II)t.kn();this.YL.hr(),this.$L.hr(),this.Gl.hr()}async zg(){this.Vo(),this.rV.Zg(),this.Fkt.zg(),this.HXt&&(this.HXt.zg(),this.HXt=void 0),this.WXt&&(this.WXt.zg(),this.WXt=void 0),this.Ejt&&(this.Ejt.zg(),this.Ejt=void 0);for(const t of this.jXt)await t.kn(),this.Gl.WW(t.Z);this.TXt(),this.YL.kn(),this.$L.kn(),this.Gl.kn(),this.Ajt=[],this.JXt(void 0)}constructor(t,i,e,s,n,r,h,o,a,u,c,l,f){var v,_;super(),this.oa=void 0,this.Mc=void 0,this.nV=void 0,this.TGt=void 0,this.Rz=void 0,this.eut=void 0,this.kGt=void 0,this.mHt=void 0,this.bGt=void 0,this._dt=void 0,this.GXt=void 0,this.JU=void 0,this.YL=new rs,this.$L=new rs,this.Gl=new Yu([]),this.KXt=void 0,this.pq=void 0,this.wpt=void 0,this.yq=void 0,this.hBt=void 0,this.Fkt=void 0,this.QXt=void 0,this.rV=void 0,this.hjt=void 0,this.ajt=void 0,this.ujt=void 0,this.sjt=void 0,this.Ajt=[],this.LXt=void 0,this.OXt=void 0,this.FXt=void 0,this.UXt=void 0,this.P4=void 0,this.x4=void 0,this.Ljt=void 0,this.HXt=void 0,this.WXt=void 0,this.Ejt=void 0,this.sSt=!0,this.fjt=0,this.ljt=!1,this.N4=ve.iL(),this._kt=!1,this.okt=0,this.lDt=void 0,this.VXt=[],this.zU=0,this.NVt=()=>{this.hUt()},this.Ujt=t=>{Wr(this.wjt(t.UMt,this.rV.Yg))},this.retryOfflineRenditionsCallback=async(t,i)=>{this.UXt!==t&&this.OXt!==t&&this.FXt!==t||(await this.Fkt.wVt(t,i),t.IMt.jFt=-1/0)},this.Djt=t=>{const i=this.LXt,e=null==i?void 0:i.LOt;if(this.Fkt.CVt(t.frt,t.UMt.IMt),!e&&(this.Fkt.DVt(t.frt,t.UMt.IMt),this.Tjt(),i)){const t=void 0!==this.OXt&&!pi(i.FOt,this.OXt),e=void 0!==this.FXt&&!pi(i.UOt,this.FXt);(t||e)&&this.oGt(t?void 0:this.OXt,e?void 0:this.FXt,this.UXt).catch(Ct)}},this.Bjt=t=>{const i=this.Vjt(t.UMt);void 0!==i&&(i.plt=t.plt)},this.Njt=t=>{const i=this.Vjt(t.UMt);void 0!==i&&(i.eyt=t.Eqt.iF())},this.Vjt=t=>{for(const i of this.$L.II){const e=i.YMt(t);if(void 0!==e)return e}},this.Mjt=t=>{this.Fkt.IVt(t.UMt)},this.Rjt=ph(t=>{t.qk===Ci.Bk&&this.Ojt()&&Wr(this.Fjt())},200),this.Cjt=t=>{var i;this.okt+=t.nWt;const e=this.$L.V>0?t.qk===Ci.Bk:t.qk===Ci.Dk;"$at"===t.sWt&&e&&Wr(this._jt()),this.So(new wV(function(t){if(t){if(void 0!==t.LAt){var i,e;const s=t.LAt.Tn+(null!=(e=t.LAt.V)?e:0);return{Yu:t.zE,Sat:[null==(i=t.LAt)?void 0:i.Tn,s],zk:!0}}return{Yu:t.zE.toString()||"",zk:!0}}return{Yu:"",zk:!0}}(t.uri),(null==(i=this.LXt)?void 0:i.kW)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.qk,t.httpStatusCode,t.nWt))},this.oa=t,this.Mc=i,this.nV=s,this.Rz=n,this.TGt=r,this.eut=h,this.kGt=o,this.mHt=a,this.bGt=u,this._dt=c,this.GXt=l,this.JU=null!=f?f:new cX,this.rV=new at;const g=null!=(_=null==(v=i.latencyConfiguration)?void 0:v.targetOffset)?_:i.liveOffset;this.Fkt=new _J(this.nV,this.eut,i.useCredentials,zd.xm(i.src),g),this.Fkt.wn(vJ.iVt,this.NVt),this.Fkt.wn(vJ.eVt,this.Ujt),this.Fkt.wn([d.Ww,d.qw,d.ey],this.Rs),this.KXt=new CZ(this,this.JU),this.Gl.FW(this.KXt.Z),i.hlsDateRange&&(this.QXt=new yJ(this.Fkt,this.JU),this.Gl.FW(this.QXt.Z)),e.textTracks&&(this.pq=new Kh(this.JU,this.nV),this.Gl.FW(this.pq.Z),this.fq(e.textTracks));!pi(i.ignoreEmbeddedTextTrackTypes,nh.CEA608)&&(this.hBt=new kW(this.JU),this.Gl.FW(this.hBt.Z));!pi(i.ignoreEmbeddedTextTrackTypes,nh.EMSG)&&(this.wpt=new WG(this.JU),this.yq=new ex(this.JU,this.wpt.Z),this.Gl.FW(this.wpt.Z),this.Gl.FW(this.yq.Z))}};function OZ(t,i){if(!i||i.IMt.POt)return!1;const e=i.IMt.ect;return 0!==e.length&&e[0].EO>t}r();var FZ=class{Xq(t,i){return!!$T(t.type)&&!t.useNativePlayback}async jq(t){return!!t.aes128||await kT(t,!0)}};r(),r();var UZ=class{async gHt(t,i,e){try{const s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:e},s,t);return new j(n)}catch(t){throw new Ga(Vo.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}zg(){}static LS(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}};r(),r(),r(),r();var kc=class extends wp{constructor(t,i){super(t),this.data=void 0,this.data=i}},VZ=["message","messageerror","error"];r();var HZ=class extends wp{constructor(t){super(Mc.ma),this.error=void 0,this.error=t}},WZ=class extends Ne{get Hjt(){return this.Wjt.Yg.Hg}qjt(t,i){this.Hjt||(void 0!==this.zjt?this.zjt.qjt(t,i):this.Gjt.push({Py:t,Xjt:i}))}jjt(){this.Hjt||(this.Wjt.Zg(),Yo(this.Gjt),void 0!==this.zjt&&this.zjt.jjt())}constructor(t){super(),this.zjt=void 0,this.Wjt=void 0,this.Gjt=[],this.Qjt=t=>{if(this.Hjt)t.jjt();else{this.zjt=t,this.zjt.wn(VZ,this.Rs);for(const i of this.Gjt)t.qjt(i.Py,i.Xjt);Yo(this.Gjt)}},this.Kjt=t=>{if(this.Hjt)return;const i=t instanceof m?t:new m("Could not create Worker.");this.So(new HZ(i)),this.jjt()},this.Wjt=new at,t(this.Wjt.Yg).then(this.Qjt,this.Kjt)}};r(),r();var qZ=class extends Ne{qjt(t,i){i?this.zjt.postMessage(t,i):this.zjt.postMessage(t)}jjt(){this.Vo(),this.zjt.removeEventListener("message",this.Yjt),this.zjt.removeEventListener("messageerror",this.Jjt),this.zjt.removeEventListener("error",this.w9),this.zjt.terminate()}constructor(t,i){super(),this.zjt=void 0,this.Yjt=t=>{this.So(new kc("message",t.data))},this.Jjt=t=>{this.So(new kc("messageerror",t.data))},this.w9=t=>{null==t.preventDefault||t.preventDefault.call(t);const i=t.error instanceof m?t.error:new m(t.message);this.So(new HZ(i)),this.jjt()},this.zjt=new ad(t,i),this.zjt.addEventListener("message",this.Yjt),this.zjt.addEventListener("messageerror",this.Jjt),this.zjt.addEventListener("error",this.w9)}};r();var zZ=0,GZ=class extends Ne{qjt(t,i){i?this.Zjt.contentWindow.postMessage({type:"message",data:t},"*",i):this.Zjt.contentWindow.postMessage({type:"message",data:t},"*")}jjt(){var t;this.Zjt.removeEventListener("load",this.$jt),self.removeEventListener("message",this.tQt),null==(t=this.Zjt.contentWindow)||t.postMessage({type:"terminate"},"*"),os(this.Zjt)}constructor(t,i){super(),this.hS=void 0,this.iQt=void 0,this.Zjt=void 0,this.eQt=void 0,this.$jt=()=>{this.Zjt.removeEventListener("load",this.$jt),this.Zjt.contentWindow.postMessage({type:"initialize",id:this.hS,script:this.iQt},"*")},this.tQt=t=>{t.origin===this.eQt&&t.data.id===this.hS&&("initialized"===t.data.type||("error"===t.data.type?(this.So(new HZ(new m(t.data.data.message))),this.jjt()):this.So(new kc("message",t.data.data))))},this.hS=zZ++,this.iQt=t;const e=zd.Dh("iframe.html",i);this.Zjt=function(t){const i=h.createElement("iframe");return i.width="0",i.height="0",i.style.display="none",i.role="",i.src=t,h.body.appendChild(i),i}(e.href),this.eQt=e.origin,this.Zjt.addEventListener("load",this.$jt),self.addEventListener("message",this.tQt)}};function XZ(t,i,e){const s=zd.xm(t,i);return new WZ(t=>async function(t,i,e,s){let n;try{return n=new qZ(t,e),await QZ(n,s),n}catch(t){null==n||n.jjt(),sa(t)}if(jZ&&NA){let i;try{const e=await zd.SP.lk({Yu:t,Uk:X.GET,dk:M.NT,Yg:s});i=await e.UT(s)}catch(t){sa(t)}if(i){let t;try{const r=NA([i],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new qZ(t,e),await QZ(n,s),n}catch(t){null==n||n.jjt(),sa(t),jZ=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new GZ(t,i),await QZ(n,s),n}catch(t){throw null==n||n.jjt(),t}}(s,i,e,t))}var jZ=!0;async function QZ(t,i){const e=await t.ww(["message","error"],i);if("error"===e.type)throw function(t){return new Ga(Vo.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(e.error);if(!function(t){return Gd(t)&&"10.0.0"===t.sQt}(e.data))throw new Ga(Vo.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (10.0.0).");return e}r();var KZ=function(t){return t.nQt="gHt",t.rQt="WHt",t}({}),YZ=function(t){return t.hQt="oQt",t.aQt="uQt",t}({}),JZ=class{cQt(){const t=XZ(this.dQt,this.lQt,{name:"THEOplayer decrypt worker"});return t.wn("message",this.fQt),t.wn("error",this.vQt),t}gHt(t,i,e){const s=""+ ++this._Qt,n={gQt:KZ.nQt,pQt:s,mQt:t,wQt:i,yQt:e},r=new pa;return this.AQt.set(s,r),null!=this.zjt||(this.zjt=this.cQt()),this.zjt.qjt(n),r.Qy}zg(t){void 0===t&&(t=new dt),this.AQt.forEach(i=>i.jy(t)),this.AQt.clear(),this.zjt&&(this.zjt.jjt(),this.zjt=void 0)}constructor(t){this.lQt=void 0,this.dQt=void 0,this.zjt=void 0,this._Qt=0,this.AQt=qh(),this.fQt=t=>{const i=t.data,e=i.bQt,s=this.AQt.get(e);if(s)if(this.AQt.delete(e),i.SQt===YZ.hQt)s.Xy(i.TQt);else if(i.SQt===YZ.aQt){const t=i.kQt,e=i.EQt?new m(i.EQt):void 0,n=new Ga(Vo.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",e);s.jy(n)}},this.vQt=t=>{const i=new Ga(Vo.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.zg(i)},this.lQt=t;try{this.dQt=zd.xm("theoplayer.d.js",t)}catch(t){throw new Ga(Vo.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function ZZ(t){const i=Jr(t.boxes,LB);if(!i)return;const e=Jr(i.boxes,OB);return e?e.handlerType:void 0}function $Z(t){const i=new Ty;return i.boxes.push(...t.boxes),i}function t$(t){const i=new al;return i.boxes.push(...t.boxes),i}r(),r(),r(),r();var i$=8;function e$(t,i){const e=function(t){const i=new Zw;return i.boxes.push(...t.boxes),i}(t),s=n$(i);for(let t=0;t<e.boxes.length;t++){const n=e.boxes[t];if(n===i)e.boxes[t]=new vw(new j(i.getSize()-i$));else if(FB(n)){const i=n,r=li(i.boxes,t=>t instanceof Fc&&t.trackId===s);if(r>=0){const s=i.boxes[r],n=t$(i);n.boxes[r]=new vw(new j(s.getSize()-i$)),e.boxes[t]=n}}}return e}function s$(t,i){const e=function(t){const i=new ay;return i.boxes.push(...t.boxes),i}(t);for(let t=0;t<e.boxes.length;t++){const s=e.boxes[t];if(HB(s)){const n=Jr(s.boxes,WB);n&&n.trackId===i&&(e.boxes[t]=new vw(new j(s.getSize()-i$)))}}return e}function n$(t){return Jr(t.boxes,MB).trackId}function r$(t,i,e,s){const n=Jr(t.boxes,WB),r=e.JF(i).IF();let h=Wt.ZERO;for(const i of t.boxes){if(i instanceof Xc){h=Jf(i.baseMediaDecodeTime,r),i.baseMediaDecodeTime=i.baseMediaDecodeTime.subtract(h);break}if(i instanceof iy){h=Jf(Wt.fromNumber(i.baseMediaDecodeTime),r),i.baseMediaDecodeTime-=h.toNumber();break}}if(h.isZero())return;const o=Jr(t.boxes,qB);if(void 0!==o&&o.samples.length>0){const t=o.samples;if(!o.flags.sampleDurationPresent){o.flags.sampleDurationPresent=!0;const i=null!=s?s:n.defaultSampleDuration;for(const e of t)e.duration=i}t[0].duration+=h.toNumber(),o.samples=t}}r();var h$="Mp4Transmuxer",o$=class extends nZ{Vqt(t,i){ii(i);const e=t.UMt,s=fN(dh(t.bOt.ck.ck));if(!s)throw new m("Mp4Transmuxer - Unable to parse "+e.Km+" MP4 initializer.");this.j2=s;const n=function(t){let i,e;for(const s of t.Z)i||(i=s.T1),e||(e=s.S1);if(i||e)return{yCt:i,bCt:e,ULt:void 0};return}(s);n&&this.zqt(e,n);const r=function(t){for(const i of t.Z)if(void 0!==i.E1)return i.E1;return}(s);void 0!==r&&this.Gqt(e,r);const h=function(t){var i;const e=Ry(t),s=Jr(e.boxes,BB),n=s.boxes.filter(NB),r=Jr(n,t=>ZZ(t)===Tw.AUDIO),h=Jr(n,t=>ZZ(t)===Tw.VIDEO),o={yCt:{$D:r?n$(r):void 0},bCt:{$D:h?n$(h):void 0}},a=null==(i=Jr(s.boxes,FB))?void 0:i.boxes.filter(UB);var u,c;const d=a?{yCt:null!=(u=Jr(a,t=>t.trackId===o.yCt.$D))?u:void 0,bCt:null!=(c=Jr(a,t=>t.trackId===o.bCt.$D))?c:void 0}:void 0;var l,f;if(d&&(o.yCt.NN=null==(l=d.yCt)?void 0:l.defaultSampleDuration,o.bCt.NN=null==(f=d.bCt)?void 0:f.defaultSampleDuration),!r||!h)return{yCt:r?t:void 0,bCt:h?t:void 0,DU:o};const v=$Z(e),_=$Z(e),g=e.boxes.indexOf(s);v.boxes[g]=e$(s,h),_.boxes[g]=e$(s,r);const p=v.serialize().join(),m=_.serialize().join();return{yCt:p,bCt:m,DU:o}}(t.bOt.ck.ck);if(this.PQt=h.DU,h.bCt){const i=Jr(s.Z,t=>t.$D===h.DU.bCt.$D),e={Km:"FRt",ck:{Km:Po.vZ,ck:h.bCt},Lot:Ci.Bk,kOt:t.kOt,Yqt:{frt:'video/mp4; codecs="'+i.S1+'"',MW:t.MW},EO:t.EO,UMt:t.UMt,hHt:t.bOt.hHt};this.fqt(e)}if(h.yCt){const i=Jr(s.Z,t=>t.$D===h.DU.yCt.$D),e={Km:"FRt",ck:{Km:Po.vZ,ck:h.yCt},Lot:Ci.Dk,kOt:t.kOt,Yqt:{frt:'audio/mp4; codecs="'+i.T1+'"',MW:t.MW},EO:t.EO,UMt:t.UMt,hHt:t.bOt.hHt};this.fqt(e)}return Promise.resolve()}async Wqt(t,i){ii(i);const e=t.$at.hHt;Ft.hB(h$,"Transmuxing fMP4: "+we(e.nyt));const s=t.$at.ck,n=a$(s.ck,this.j2),r=ff(n.map(t=>t.Pet),xE);if(void 0!==r&&(e.xet=r,this.jqt(t.UMt)),!this.qUt.gUt(t.kOt)){const s=$c.eU(e.EO);if(n.length>0){const i=ff(n.map(t=>t.xQt),xE);for(const n of this.Bqt)this.qUt.PUt(t.kOt,n,i,s,u$(e),!1);this.jqt(t.UMt)}this.qUt.gUt(t.kOt)||await Nc(this.qUt.mUt(t.kOt),i)}const h=this.qUt.TUt(t.kOt),o=e.xet?this.qUt.kUt(e.xet,e).iF():e.EO,a=rZ(e,o);var u;const c={lHt:a,fHt:hZ(e,a),EO:o,ct:null!=(u=e.ct)?u:0,bU:h.iF(),kOt:t.kOt,UMt:t.UMt,hHt:t.$at.hHt},d=function(t,i){if(void 0===i.yCt.$D)return{yCt:void 0,bCt:t};if(void 0===i.bCt.$D)return{yCt:t,bCt:void 0};const e=Ry(t),s=$Z(e),n=$Z(e);for(let t=0;t<e.boxes.length;t++){const r=e.boxes[t];VB(r)&&(s.boxes[t]=s$(r,i.bCt.$D),n.boxes[t]=s$(r,i.yCt.$D))}const r=s.serialize().join(),h=n.serialize().join();return{yCt:r,bCt:h}}(s.ck,this.PQt);if(d.bCt){var l;const i=this.PQt.bCt.$D,s=Jr(this.j2.Z,t=>t.$D===i),h=Jr(n,t=>t.$D===i),o=this.IQt(d.bCt,s,h,null==(l=this.PQt)?void 0:l.bCt.NN,e);this.RQt=s,this.Xqt(t.UMt,e,h.Pet.lF(r));const a=Mo({Km:"$at",ck:{Km:Po.vZ,ck:o},Lot:Ci.Bk},c);this.fqt(a)}if(d.yCt){const t=Mo({Km:"$at",ck:{Km:Po.vZ,ck:d.yCt},Lot:Ci.Dk},c);this.fqt(t)}this.CQt=e,this.DQt=n}IQt(t,i,e,s,n){if(!u$(n))return t;if(!this.CQt||!this.RQt||!this.DQt)return t;const r=this.RQt.$D,h=Jr(this.DQt,t=>t.$D===r),o=this.qUt.kUt(h.BQt,this.CQt),a=this.qUt.kUt(e.Pet,n).lF(o).JF(i.qD);if(a.hF($c.wF))return t;if(a.eF($c.eU(.5)))return t;const u=tJ(n)?n:n.tFt;return Ft.uLt(h$,"Stretching first video frame of segment #"+u.aOt+" to fill gap of "+a.iF()+"s"),function(t,i,e,s){const n=Ry(t),r=Jr(n.boxes,VB);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof Fh&&r$(t,i,e,s);const n=r.getSize();if(n!==t){const i=n-t;for(const t of r.boxes)t instanceof Fh&&zB(t,i)}}return n.serialize().join()}(t,i.qD,a,s)}constructor(...t){super(...t),this.j2=void 0,this.PQt=void 0,this.CQt=void 0,this.DQt=void 0,this.RQt=void 0}};function a$(t,i){const e=lr(jt.TD(dh(t)),Ro.IC);if(!e)throw new m("Mp4Transmuxer - Unable to parse segment or part.");return function(t,i){const e=[];for(const n of t.Z){if(!n.GN||0===n.zN.length||0===n.zN[0].JN.length)continue;const t=n.gD.$D,r=Jr(i.Z,i=>i.$D===t);let h=0,o=1/0,a=0;const u=n.gD.NN||0;for(const t of n.zN)for(const i of t.JN){const t=i.ZN||0,e=h+t;var s;h+=null!=(s=i.ct)?s:u;const n=h+t;e<o&&(o=e),n>a&&(a=n)}const c=$c.gF(n.GN.GN,r.qD);e.push({$D:t,xQt:c,Pet:c.lO($c.pF(o,r.qD)),NQt:c.lO($c.pF(h,r.qD)),BQt:c.lO($c.pF(a,r.qD))})}return e}(e,i)}function u$(t){return tJ(t)?t.AOt:0===t.eFt&&t.tFt.AOt}var c$="MpegtsTransmuxer",d$=class extends o${Vqt(t,i){return super.Vqt(t,i)}Oqt(t,i){if(super.Oqt(t,i),this.pE.MQt())return;var e;const s=null!=(e=null==i?void 0:i.nyt)?e:t.nyt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.zE)&&this.pE.LQt()}OQt(t){let i;return t.UMt===this.FQt&&this.UQt.has(t.kOt)?i=this.UQt.get(t.kOt):(i=kJ(t.$at.ck.ck),this.FQt=t.UMt,this.UQt.set(t.kOt,i)),i}async Wqt(t,i){ii(i);const e=this.OQt(t),s=t.$at;if(e!==TJ.WVt&&e!==TJ.qVt)return super.Wqt(t,i);if(s.hHt.MW.some(f$))throw new Ga(Vo.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.pE.LQt();let r;e===TJ.WVt?(Ft.hB(c$,"Transmuxing MPEG-TS: "+we(s.hHt.nyt)),r=await n.VQt({data:s.ck.ck,metadata:this.HQt})):(Ft.hB(c$,"Transmuxing raw audio: "+we(s.hHt.nyt)),r=await n.WQt({data:s.ck.ck,metadata:this.HQt})),ii(i),this.zqt(t.UMt,{yCt:r.metadata.audio_codec,bCt:r.metadata.video_codec,ULt:void 0}),r.metadata.video_frame_rate&&this.Gqt(t.UMt,r.metadata.video_frame_rate);const h=v$(r.metadata.first_decode_timestamp),o=v$(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?v$(r.metadata.first_video_presentation_timestamp):void 0;if(s.hHt.xet=o,this.jqt(t.UMt),void 0!==a&&this.Xqt(t.UMt,s.hHt,function(t,i){let e=t.lF(i);return e.aF($c.wF)&&(e=e.lO(CE())),e}(a,o)),!this.qUt.gUt(t.kOt)){const e=$c.eU(s.hHt.EO);for(const i of this.Bqt)this.qUt.PUt(t.kOt,i,h,e,u$(s.hHt),!0);this.jqt(t.UMt),this.qUt.gUt(t.kOt)||await Nc(this.qUt.mUt(t.kOt),i)}const u=this.qUt.EUt(h,s.hHt);this.HQt=r.metadata;const c=this.qUt.kUt(o,s.hHt).iF(),d=rZ(s.hHt,c);var l;const f={lHt:d,fHt:hZ(s.hHt,d),EO:c,ct:null!=(l=s.hHt.ct)?l:0,bU:u.iF(),kOt:t.kOt,UMt:t.UMt,hHt:s.hHt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.Bqt){const i=Mo({Km:"$at",ck:void 0,Lot:t},f);this.fqt(i)}return}const v=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.qQt||this.zQt!==t.kOt||!L(this.qQt,r.data.audio_init))){const i=this.qUt.kUt(s.hHt.xet,s.hHt).iF(),e={Km:"FRt",ck:{Km:Po.vZ,ck:r.data.audio_init},Lot:Ci.Dk,kOt:t.kOt,Yqt:{frt:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',MW:s.hHt.MW},EO:i,UMt:t.UMt,hHt:s.hHt};this.qQt=r.data.audio_init,this.zQt=t.kOt,this.fqt(e)}const i=Mo({Km:"$at",ck:{Km:Po.vZ,ck:r.data.audio_media},Lot:Ci.Dk},f);this.fqt(i)}else if(t.$at.hHt.ZOt&&pi(this.Bqt,Ci.Dk)){const t=Mo({Km:"$at",ck:void 0,Lot:Ci.Dk},f);this.fqt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.GQt||this.XQt!==t.kOt||!L(this.GQt,r.data.video_init))){const i=this.qUt.kUt(s.hHt.xet,s.hHt).iF(),e={Km:"FRt",ck:{Km:Po.vZ,ck:r.data.video_init},Lot:Ci.Bk,kOt:t.kOt,Yqt:{frt:'video/mp4; codecs="'+r.metadata.video_codec+'"',MW:s.hHt.MW},EO:i,UMt:t.UMt,hHt:s.hHt};this.GQt=r.data.video_init,this.XQt=t.kOt,this.jQt=fN(dh(r.data.video_init)),this.fqt(e)}const i=this.jQt.Z[0],e=a$(r.data.video_media,this.jQt)[0],n=this.IQt(r.data.video_media,i,e,void 0,s.hHt);this.RQt=i;const h=Mo({Km:"$at",ck:{Km:Po.vZ,ck:n},Lot:Ci.Bk},f);this.fqt(h),v.push(e)}else if(t.$at.hHt.ZOt&&pi(this.Bqt,Ci.Bk)){const t=Mo({Km:"$at",ck:void 0,Lot:Ci.Bk},f);this.fqt(t)}this.CQt=s.hHt,this.DQt=v}Zg(){this.qQt=void 0,this.GQt=void 0,this.zQt=-1,this.XQt=-1,super.Zg()}constructor(t,i,e,s){super(i,e,s),this.pE=void 0,this.HQt=void 0,this.qQt=void 0,this.GQt=void 0,this.jQt=void 0,this.zQt=-1,this.XQt=-1,this.FQt=void 0,this.UQt=ar(),this.pE=t}},l$=class{YSt(t,i,e){return new d$(this,t,i,e)}};function f$(t){return t.Uk===Zt.ELt}function v$(t){return $c.gF(Wt.fromBits(t.low,t.high),t.base)}r(),r();var _$=function(t){return t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4",t}({}),g$=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=Qt.d_;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(_c("AGFzbQEAAAA="))}catch(t){return!1}}();return g$=()=>t,t};var p$=class{VQt(t){return this.QQt(_$.MPEGTS_TO_FMP4,t)}WQt(t){return this.QQt(_$.RAW_AUDIO_TO_FMP4,t)}cQt(){const t=XZ(this.dQt,this.lQt,{name:"THEOplayer transmux worker"});return t.wn("message",this.fQt),t.wn("error",this.vQt),t}QQt(t,i){const e=++this._Qt,s={type:t,id:e,input:i},n=new pa;return this.AQt.set(e,n),this.zjt.qjt(s),n.Qy}zg(t){void 0===t&&(t=new dt),this.AQt.forEach(i=>i.jy(t)),this.AQt.clear(),this.zjt.jjt()}constructor(t){this.lQt=void 0,this.dQt=void 0,this.zjt=void 0,this._Qt=0,this.AQt=ar(),this.fQt=t=>{const i=t.data;if(void 0!==i.requestId){const t=this.AQt.get(i.requestId);if(!t)return;this.AQt.delete(i.requestId),i.success?t.Xy(i.output):t.jy(new Ga(i.errorCode,i.error))}else i.success||this.zg(new Ga(i.errorCode,i.error))},this.vQt=t=>{const i=new Ga(Vo.MEDIA_DECODE_ERROR,t.error.message,t.error);this.zg(i)},this.lQt=t;const i=g$()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.dQt=zd.xm(i,t)}catch(t){throw new Ga(Vo.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.zjt=this.cQt()}},m$=class extends l${MQt(){return void 0!==this.zjt}LQt(){var t;return null!=(t=this.zjt)?t:this.zjt=new p$(this.KQt)}zg(){this.zjt&&(this.zjt.zg(),this.zjt=void 0)}constructor(t){super(),this.KQt=void 0,this.zjt=void 0,this.KQt=t,this.zjt=void 0}},w$=class{Ret(){return new m$(this.KQt)}constructor(t){this.KQt=void 0,this.KQt=t}},y$=class extends MZ{Wx(){return this.TL.Wx()}get Vx(){return this.TL.Vx}set Vx(t){this.TL.Vx=t}async kn(){var t;await super.kn(),null==(t=this.CPt)||t.kn()}constructor(t,i,e,s,n){const r=function(t){return UZ.LS()?new UZ:new JZ(t)}(n.libraryLocation);super(t,i,e,s,r,new w$(n.libraryLocation),new bt(Rc.Ng.lPt,Rc.Ng.dPt,Rc.Ng.ect,Rc.Ng.vPt),n),this.CPt=void 0,Qt.X_&&(this.CPt=new HU(this))}},A$=class extends y${async kn(){await super.kn(),await this.xq.Pq(this.TL)}constructor(t,i,e,s,n){const r=new Ss(t);super(r.Gq(Ci.Bk),i,e,s,n),this.xq=void 0,this.xq=r}},b$=class extends FZ{Xq(t,i){return!!za(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(Qt.ru||Qt.Tg))&&super.Xq(t,i))}async jq(t){return!(t.clearkey&&!t.fairplay&&Qt.X_)&&super.jq(t)}};cs(new class extends b${PR(t,i,e,s,n,r,h){return new A$(i,e,n,r,s)}Qq(){return!0}constructor(...t){super(...t),this.Kq=V.dR}}),Ft.Rt=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)},r(),r(),r(),r();var S$=class{Uct(t,i){return Promise.resolve(!1)}iut(t,i){return Promise.resolve(void 0)}HSt(t){return Promise.resolve(void 0)}WJ(t){return Promise.resolve(void 0)}},T$=class extends Ne{YQt(){var t;return null==(t=this.JQt)?void 0:t.IMt}Tn(){Wr($i(()=>this.ZQt(this.nT.Yg),this.nT.Yg))}async ZQt(t){await this.Fkt.dVt(t),this.$Qt&&(this.tKt(this.$Qt.Ti,this.$Qt.Mi),this.$Qt=void 0),this.j6=!0}iKt(t,i){this.j6?this.tKt(t,i):this.$Qt={Ti:t,Mi:i}}tKt(t,i){const e=this.eKt(t,i),s=null==e?void 0:e.UOt[0];s!==this.JQt&&(this.sKt(),void 0!==s&&(this.JQt=s,this.nKt=new CJ(this.Fkt,s),this.nKt.PHt()))}sKt(){this.JQt=void 0,this.nKt&&(this.nKt.zg(),this.nKt=void 0)}eKt(t,i){const e=Jr(this.Fkt.Br.HUt,e=>void 0!==e.uCt&&e.uCt.Ti===t&&e.uCt.Mi===i);return null!=e?e:this.Fkt.Br.HUt[0]}kn(){this.Vo(),this.nT.Zg(),this.nT.zg(),this.sKt(),this.Fkt.zg()}constructor(t,i,e){super(),this.Ac=void 0,this.Fkt=void 0,this.JQt=void 0,this.nKt=void 0,this.j6=void 0,this.$Qt=void 0,this.nT=new at,this.Ac=t,this.Fkt=new _J(e,new S$,t.useCredentials,t.src,t.liveOffset),this.Fkt.wn(d.qw,this.Rs),this.j6=!1}};r();var k$=class extends _o{get ht(){return this.B8.ht}get IP(){return this.B8.IP}get CP(){return this.B8.CP}set CP(t){this.B8.CP=t}get bt(){return this.B8.bt}get MP(){return this.B8.MP}set MP(t){this.B8.MP=t}OP(t,i){this.MP=t}get ct(){return this.B8.ct}get UP(){return this.B8.UP}get WP(){return this.B8.WP}get zP(){return this.B8.zP}get jP(){return this.B8.jP}get lt(){return this.B8.lt}get KP(){return this.B8.KP}get JP(){return this.B8.JP}get $P(){return this.B8.$P}set $P(t){this.B8.$P=t}get sx(){return this.B8.sx}get hx(){return this.B8.hx}get ux(){return this.B8.ux}set ux(t){this.B8.ux=t}get _x(){return this.B8._x}get mx(){return this.B8.mx}set mx(t){this.B8.mx=t}get Ax(){return this.B8.Ax}get Sx(){return this.B8.Sx}get kx(){return this.B8.kx}get nq(){return this.B8.nq}get nt(){return this.B8.nt}get Rx(){return this.B8.Rx}get rt(){return this.B8.rt}get Bx(){return this.B8.Bx}get Mx(){return this.B8.Mx}set Mx(t){this.B8.Mx=t}get Fx(){return this.B8.Fx}get Vx(){return this.B8.Vx}set Vx(t){this.B8.Vx=t}get hq(){return this.B8.hq}get BL(){}jx(){return this.B8.jx()}Hx(){return this.B8.Hx()}Aa(){return this.B8.Aa()}tI(t){return this.B8.tI(t)}Wx(){return this.B8.Wx()}we(){return this.B8.we()}Yx(){return this.B8.Yx()}Jx(){return this.B8.Jx()}zx(){return this.B8.zx()}Gx(){return this.B8.Gx()}hr(){return this.B8.hr()}Ta(t,i,e){return this.B8.Ta(t,i,e)}Px(t,i,e,s){return this.B8.Px(t,i,e,s)}xx(){return this.B8.xx()}be(){return this.B8.be()}Qx(){return this.B8.Qx()}Kx(){return this.B8.Kx()}kn(){this.Vo();for(const t of nR)this.B8.mn(t,this.Rs);return this.B8.kn()}constructor(t){super(),this.B8=void 0,this.B8=t;for(const t of nR)this.B8.wn(t,this.Rs)}},E$=class extends k${async Ta(t,i,e){await super.Ta(t,i,e),t.hlsDateRange&&this.$wt(t,i)}$wt(t,i){this.rKt=new T$(t,i,this.hKt),this.rKt.wn(d.qw,this.handleManifestUpdate),this.rKt.Tn()}hr(){return this.BVt&&(this.nt.it(this.BVt),this.N7.it(this.BVt),this.BVt.kn(),this.BVt=void 0,this.oKt=!1),this.rKt&&(this.rKt.kn(),this.rKt=void 0),this.N7.hr(),super.hr()}kn(){return this.mn(d.Jw,this.CXt),this.rKt&&(this.rKt.kn(),this.rKt=void 0),this.N7.kn(),super.kn()}constructor(t,i,e){super(t),this.rKt=void 0,this.hKt=void 0,this.oKt=!1,this.BVt=void 0,this.N7=void 0,this.handleManifestUpdate=t=>{this.So(t);const i=this.rKt.YQt();if(i){const t=this.nq;if(t){const e=t.getTime();let s=this.BVt;s||(s=new WY,this.BVt=s),s.er(i.EOt,t=>(t.getTime()-e)/1e3),!this.oKt&&s.L.V>0&&(this.nt.tt(s),this.N7.tt(s),this.oKt=!0)}}},this.CXt=()=>{this.rKt&&this.rKt.iKt(this.Bx,this.Rx)},this.hKt=i,this.N7=new hu(this),this.wn(d.Jw,this.CXt)}};!function(t){$I.Yq().Jq(t)}(function(t,i,e){return new E$(t,i,e)}),r(),r(),r(),r();var Vs=class extends R{get name(){return"CastError"}constructor(t,i=""){super("An error occurred while casting."),this.errorCode=void 0,this.description=void 0,this.errorCode=t,this.description=i}};async function P$(t){R$()||await async function(t){if(null==t?void 0:t.Hg)return Promise.reject(new dt);const{Qy:i,Xy:e,jy:n}=function(){let t,i;return{Qy:new Promise((e,s)=>{t=e,i=s}),Xy:t,jy:i}}(),r=s.__onGCastApiAvailable,h=()=>{s.__onGCastApiAvailable=r,n(new dt)};return s.__onGCastApiAvailable=(i,o)=>{i?e():n(new m(o)),null==t||t.jg(h),s.__onGCastApiAvailable=r,r&&r(i,o)},null==t||t.Xg(h),i}(t),I$()||await Er(100,t),I$()||(zd.um('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await x$())}var x$=mu(()=>function(t){return new Promise((i,e)=>{const s=h.createElement("script");s.onload=()=>i(),s.onerror=t=>e((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)})}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch(()=>{throw new Vs("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}));function I$(){return Boolean("undefined"!=typeof cast&&cast.framework)}function R$(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function C$(t,i,e,s){if(it(i))for(const e of w.keys(i)){if("type"===e||"images"===e)continue;const s=i[e];it(s)&&(t[e]=s)}!function(t,i,e,s){if(!it(e)&&!it(null==i?void 0:i.images))return;t.images=[],e&&t.images.push(new s.Image(e));if(null==i?void 0:i.images)if(Z(i.images))t.images.push(new s.Image(i.images));else if(ul(i.images))for(const e of i.images){let i;var n,r;if(Z(e))i=new s.Image(e);else i=new s.Image(e.src),i.height=null!=(n=e.height)?n:null,i.width=null!=(r=e.width)?r:null;t.images.push(i)}}(t,i,e,s)}function D$(t,i,e){return void 0===e&&(e=chrome),function(t,i,e){switch(null==t?void 0:t.type){case"movie":{const s=new e.MovieMediaMetadata;return C$(s,t,i,e),s}case"audio":{const s=new e.MusicTrackMediaMetadata;return C$(s,t,i,e),!it(s.artist)&&it(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new e.TvShowMediaMetadata;return C$(s,t,i,e),!it(s.title)&&it(t.episodeTitle)&&(s.title=t.episodeTitle),!it(s.season)&&it(t.seasonNumber)&&(s.season=t.seasonNumber),!it(s.episode)&&it(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new e.GenericMediaMetadata;return C$(s,t,i,e),s}}}(t,i,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(e))}function wn(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function B$(t){if(t.items&&t.items.length>0&&it(t.currentItemId)&&t.currentItemId>=0)return Jr(t.items,i=>i.itemId===t.currentItemId)}r(),r(),r(),r(),r();var xn="urn:x-cast:com.theoplayer.cast";r(),r();var N$=function(t){return t.aKt="theoplayer_receiver_info",t.uKt="theoplayer_trackpropertychange",t.cKt="theoplayer_propertychange",t}({});r();var M$=function(t){return t.SKIP_AD="SKIP_AD",t}({});r();function L$(t){h.createElement("img").src=t}r(),r(),r();var O$=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function F$(t){if(!Z(t))return;const i=t.match(O$);return i?3600*x(i[1],10)+60*x(i[2],10)+Number(i[3])+(Number(i[4])||0)/1e3:void 0}function U$(t){if(void 0===t)return;const i=t.match(/^([1-9]?\d|100)%$/);return i?x(i[1])/100:void 0}function V$(t,i){return"vmap"===t.type||!it(t.type)&&!it(i)}function H$(t,i){return"vast"===t.type||!it(t.type)&&it(i)}r(),r(),r();var W$=class{},q$=class extends W${get dKt(){return this.qc}lKt(){return null!=this.fKt||(this.fKt=De(this.qc,t=>t.lKt())),this.fKt}constructor(t){super(),this.qc=void 0,this.fKt=void 0,this.qc=t.sort((t,i)=>t.VN-i.VN)}};r(),r();var z$=class extends W${get o(){return this.vKt}get VN(){return this._Kt}get gKt(){return this.pKt}constructor(t,i){super(),this.vKt=void 0,this._Kt=void 0,this.pKt=void 0,this.vKt=t,this._Kt=i,this.pKt=!1}},G$=class extends z${get mKt(){return this.wKt}get yKt(){return this.AKt}get bKt(){return this.SKt}get TKt(){return this.kKt}get lt(){return this.JW}lKt(){if(void 0===this.EKt){let t,i,e,s=[];for(const n of this.wKt)n.PKt&&(t=n.PKt),n.xKt&&(i=n.xKt),n.IKt&&(e=n.IKt),s=s.concat(n.universalAdIds);this.EKt={TKt:this.TKt,PKt:t,RKt:i,IKt:e,lt:this.lt,CKt:s}}return[this.EKt]}constructor(t,i,e,s,n,r,h){super(t,i),this.AKt=void 0,this.SKt=void 0,this.kKt=void 0,this.wKt=void 0,this.JW=void 0,this.EKt=void 0,this.AKt=e,this.SKt=s,this.kKt=n,this.wKt=r,this.JW=h}};r(),r();var X$=class{get DKt(){return this.BKt}get NKt(){return this.MKt}constructor(t,i){this.BKt=void 0,this.MKt=void 0,this.BKt=t,this.MKt=i}},j$=class{get LKt(){return this.OKt}get FKt(){return this.UKt}get VKt(){return this.HKt}get WKt(){return this.qKt}get od(){return this.zKt}set od(t){this.zKt=t}get GKt(){return this.XKt}get jKt(){return this.QKt}KKt(){this.QKt=!0}get yKt(){return this.AKt}constructor(t,i,e,s,n,r){this.OKt=void 0,this.UKt=void 0,this.HKt=void 0,this.qKt=void 0,this.QKt=void 0,this.XKt=void 0,this.zKt=void 0,this.AKt=void 0,this.OKt=t,this.UKt=i,this.HKt=e,this.qKt=s,this.QKt=!1,this.XKt=n,this.AKt=r}};r();var Q$=function(t){return t.YKt="all",t.JKt="any",t.lz="none",t}({});var K$=class{get ZKt(){return this.$Kt}get tYt(){return this.iYt}constructor(t,i){this.$Kt=void 0,this.iYt=void 0,this.$Kt=t,this.iYt=i}},Y$=class{get o(){return this.hS}get Ti(){return this.sb}get Mi(){return this.hb}get eYt(){return this.sYt}get nYt(){return this.rYt}get hYt(){return this.oYt}get aYt(){return this.uYt}get cYt(){return this.dYt}get lYt(){return this.fYt}get vYt(){return this._Yt}get LKt(){return this.OKt}get FKt(){return this.UKt}get VKt(){return this.HKt}get gYt(){return this.pYt}get NKt(){return this.mYt}get wYt(){return this.yYt}constructor(t,i,e,s,n,r,h,o,a,u,c,d,l,f,v,_){this.sb=void 0,this.hb=void 0,this.hS=void 0,this.sYt=void 0,this.rYt=void 0,this.oYt=void 0,this.uYt=void 0,this.dYt=void 0,this.fYt=void 0,this._Yt=void 0,this.OKt=void 0,this.UKt=void 0,this.HKt=void 0,this.pYt=void 0,this.mYt=void 0,this.yYt=void 0,this.sb=t,this.hb=i,this.hS=e,this.sYt=s,this.rYt=n,this.oYt=r,this.uYt=h,this.dYt=o,this.fYt=a,this._Yt=u,this.OKt=c,this.UKt=d,this.HKt=l,this.pYt=f,this.mYt=v,this.yYt=_}};r();var J$=class{get id(){return this.hS}get uri(){return this.rFt}constructor(t,i){this.hS=void 0,this.rFt=void 0,this.hS=t,this.rFt=i}},_n=class{get AYt(){return this.bYt}get SYt(){return this.TYt}get kYt(){return this.EYt}get PYt(){return this.xYt}constructor(t,i,e,s){this.bYt=void 0,this.TYt=void 0,this.EYt=void 0,this.xYt=void 0,this.bYt=t,this.TYt=i,this.EYt=e,this.xYt=s}},Z$=class extends z${get TKt(){return this.kKt}get IYt(){return this.RYt}get CYt(){return this.DYt}get mKt(){return this.wKt}get BYt(){return this.NYt}get MYt(){return this.LYt}get lt(){return this.JW}lKt(){return void 0===this.RYt?[]:(null!=this.fKt||(this.fKt=this.RYt.lKt().map(t=>this.OYt(t))),this.fKt)}OYt(t){let i,e,s;for(const t of this.mKt)t.PKt&&(i=t.PKt),t.xKt&&(e=t.xKt),t.IKt&&(s=t.IKt);const n=t.TKt.concat(this.TKt);let r=t.PKt;if(i&&t.PKt){const e=new _n(t.PKt.FYt.AYt,t.PKt.FYt.SYt,t.PKt.FYt.kYt.concat(i.FYt.kYt),t.PKt.FYt.PYt.concat(i.FYt.PYt));r=t.PKt,r.FYt=e,r.NKt=r.NKt.concat(i.NKt)}let h=t.RKt;if(e&&e.DKt){var o,a;const s=[];for(const t of e.DKt)s.concat(t.WKt.kYt);const n=[];var u,c;for(const e of null!=(u=null==(o=t.RKt)?void 0:o.DKt)?u:[]){var d,l,f;const r=new _n(e.WKt.AYt,e.WKt.SYt,e.WKt.kYt.concat(s),(null!=(l=null==(d=t.PKt)?void 0:d.FYt.PYt)?l:[]).concat(null!=(f=null==i?void 0:i.FYt.PYt)?f:[]));n.push(new j$(e.LKt,e.FKt,e.VKt,r,e.GKt,e.yKt))}h=new X$(n,(null!=(c=null==(a=t.RKt)?void 0:a.NKt)?c:[]).concat(e.NKt))}let v=t.IKt;if(v){var _;let i=v.ZKt;var g,p;s&&s.ZKt&&(i=s.ZKt),v=new K$(i,(null!=(g=null==(_=t.IKt)?void 0:_.tYt)?g:[]).concat(null!=(p=null==s?void 0:s.tYt)?p:[]))}let m=t.lt;return this.lt&&(m=this.lt),{TKt:n,PKt:r,RKt:h,IKt:v,lt:m,CKt:t.CKt}}constructor(t,i,e,s,n,r,h,o,a){super(t,i),this.kKt=void 0,this.RYt=void 0,this.DYt=void 0,this.NYt=void 0,this.LYt=void 0,this.wKt=void 0,this.JW=void 0,this.fKt=void 0,this.kKt=e,this.RYt=s,this.DYt=n,this.wKt=r,this.NYt=h,this.LYt=o,this.JW=a}};r();var $$=class{get o(){return this.hS}get UYt(){return this.VYt}get HYt(){return this.WYt}get cYt(){return this.dYt}get PKt(){return this.qYt}get xKt(){return this.zYt}get IKt(){return this.GYt}get universalAdIds(){return this.XYt}constructor(t,i,e,s,n,r,h,o){this.hS=void 0,this.VYt=void 0,this.WYt=void 0,this.dYt=void 0,this.qYt=void 0,this.zYt=void 0,this.GYt=void 0,this.XYt=void 0,this.hS=t,this.VYt=i,this.WYt=e,this.dYt=s,this.qYt=n,this.zYt=r,this.GYt=h,this.XYt=o}};r();var t0=class{get ct(){return this.jYt}get QYt(){return this.KYt}get NKt(){return this.MKt}set NKt(t){this.MKt=t}set FYt(t){this.YYt=t}get FYt(){return this.YYt}get JYt(){return this.ZYt}set JYt(t){this.ZYt=t}get $Yt(){return this.QKt}get od(){return this.zKt}set od(t){this.zKt=t}get GKt(){return this.XKt}get yKt(){return this.AKt}KKt(){this.QKt=!0}get tJt(){return this.iJt}set tJt(t){this.iJt=t}get eJt(){return this.sJt}get nJt(){return this.rJt}constructor(t,i,e,s,n,r,h,o,a){this.jYt=void 0,this.KYt=void 0,this.iJt=void 0,this.MKt=void 0,this.YYt=void 0,this.ZYt=void 0,this.QKt=void 0,this.XKt=void 0,this.zKt=void 0,this.AKt=void 0,this.sJt=void 0,this.rJt=void 0,this.jYt=t,this.KYt=i,this.MKt=e,this.YYt=s,this.ZYt=n,this.QKt=!1,this.XKt=r,this.AKt=h,this.sJt=o,this.rJt=a}};function he(t,i){return e0(t)&&t.getAttribute(i)||void 0}function Ec(t,i){return i0(t,i,void 0,!1)}function i0(t,i,e,s){return i===(t.localName?t.localName:t.nodeName)&&(s&&e?e===t.namespaceURI:!e||!t.namespaceURI||e===t.namespaceURI)}function ds(t,i){const e=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);e0(n)&&Ec(n,i)&&e.push(n)}return e}function e0(t){return t&&1===t.nodeType}function s0(t,i){const e=(new DOMParser).parseFromString(t,i);if(!e||e.getElementsByTagName("parsererror").length>0)throw new m('Invalid document for MIME type "'+i+'"');return e}function n0(t){return t.replace(/[<>&'"]/g,t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}})}function r0(t){return"data:application/xml,"+encodeURIComponent(t)}r(),r();var kl=function(t){return t.hJt="mute",t.oJt="unmute",t.jw="pause",t.aJt="resume",t.uJt="rewind",t.cJt="skip",t.dJt="playerExpand",t.lJt="playerCollapse",t.fJt="fullscreen",t.vJt="exitFullscreen",t._Jt="expand",t.COLLAPSE="collapse",t.MSt="start",t.gJt="firstQuartile",t.pJt="thirdQuartile",t.mJt="midpoint",t.wJt="complete",t.yJt="acceptInvitationLinear",t.AJt="acceptInvitation",t.bJt="timeSpentViewing",t.SJt="otherAdInteraction",t.Qw="progress",t.TJt="creativeView",t.kJt="adExpand",t.EJt="adCollapse",t.PJt="minimize",t.xJt="close",t.IJt="closeLinear",t.RJt="overlayViewDuration",t.CJt="breakStart",t.DJt="breakEnd",t.ma="error",t}({});function h0(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}var o0=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function a0(t){return void 0!==t&&-1!==o0.indexOf(t)}var u0=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function c0(t){return void 0!==t&&-1!==u0.indexOf(t)}var d0=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function l0(t){return void 0!==t&&-1!==d0.indexOf(t)}function f0(t,i){if(void 0===t||""===t||void 0===i)return;let e=t.match(/^(\d+):(\d+):(\d+)$/);return e?C(e[1]||"0")+60*C(e[2]||"0")+C(e[3]||"0"):(e=t.match(/^(100|[1-9]\d|\d)%$/),e?C(e[1]||"0")*i/100:void 0)}var v0=class{get eX(){return this.BJt}get ac(){return this.NJt}get eventURL(){return this.MJt}constructor(t,i,e){this.BJt=void 0,this.NJt=void 0,this.MJt=void 0,this.BJt=t,this.NJt=i,this.MJt=e}};r();var _0=class{get LJt(){return this.OJt}constructor(t){this.OJt=void 0,this.OJt=t}},g0=class extends _0{get AYt(){return this.bYt}get wYt(){return this.yYt}get FJt(){return this.UJt}constructor(t,i,e,s){super(t),this.UJt=void 0,this.yYt=void 0,this.bYt=void 0,this.UJt=i,this.bYt=e,this.yYt=s}},p0=class extends _0{constructor(t){super(t)}},m0=class extends _0{constructor(t){super(t)}};r();var yr={VJt:{Ky:100,Py:"XML parsing error."},HJt:{Ky:303,Py:"Empty or invalid VAST error."},WJt:{Ky:400,Py:"General linear error"},qJt:{Ky:403,Py:"Unsupported MIME-type or missing mediafiles error"},zJt:{Ky:500,Py:"General nonlinear error"},xG:{Ky:900,Py:"Network error"}},w0=class{get GJt(){return this.XJt}jJt(t){if(!this.GJt)return;const i=this.GJt.replace(/\[ERRORCODE]/,""+t.Ky);L$(i)}constructor(t){this.XJt=void 0,this.XJt=t}};r();var Co=class extends R{get QJt(){return this.KJt}get YJt(){var t;return null!=(t=this.JJt)?t:900}constructor(t,i,e,s){super(e||i&&y0[i]||t,s),this.KJt=void 0,this.JJt=void 0,this.O2=void 0,this.KJt=t,this.JJt=i,this.O2=e}},Ic=function(t){return t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general",t}({}),Wi=function(t){return t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED",t}({}),y0={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function A0(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case Ba.dR:case Ba.lR:case Ba.cR:return!0;default:return!1}}function b0(t){const i=gr();return!!(A0(t)||t&&i&&(null==i?void 0:i.canPlayType)&&i.canPlayType(t))||(T0("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function S0(t,i){for(const e of i){new w0(e).jJt(t)}}function T0(t){0}r(),r();var k0=class{get ZJt(){return this.$Jt}get tZt(){return this.iZt}constructor(t,i){this.$Jt=void 0,this.iZt=void 0,this.$Jt=t,this.iZt=i}},E0=class t{async eZt(i,e){if(V$(i.sources,i.timeOffset)){const s=await t.sZt(i.sources.src,e),n=s&&s.documentElement;if(!n)throw new Co(Ic.NETWORK,Wi.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(Ec(n,"VMAP"))return await this.nZt(n,i,e);if(Ec(n,"VAST")){const t=await this.rZt(n,e,!1);if(t){const e=new R0("",!0,!0,t);return[new x0("start",e,P0.hZt,"",[],!1,!0,i)]}return[]}throw new Co(Ic.GENERAL,Wi.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(H$(i.sources,i.timeOffset))return[new I0(String(i.timeOffset),i,e)];throw new Co(Ic.GENERAL,Wi.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async oZt(i,e,s,n){let r;void 0===n&&(n=[]);try{r=await t.sZt(i,e)}catch(t){throw S0(t instanceof Co&&t.YJt===Wi.VAST_MALFORMED_RESPONSE?yr.HJt:yr.xG,n),t}const h=r&&r.documentElement;if(h&&Ec(h,"VAST"))return await this.rZt(h,e,s,n);h&&Ec(h,"VMAP")&&Ye("Received VMAP ad when expecting VAST. Please set the type of your ad source in the configuration, or make sure to not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included.")}async aZt(t,i,e,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new Co(Ic.GENERAL,Wi.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.oZt(t.sources.src,s,!1),h=new R0("",!0,!0,r),o=new x0(i,h,P0.hZt,"",[],!1,!0,t);return o.uZt=e,o}static async requestSuccessOnly(t,i){let e;try{e=await i.lk(t)}catch(t){throw new Co(Ic.NETWORK,Wi.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!jr(e))throw new Co(Ic.NETWORK,Wi.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return e}static async sZt(t,i){const e=new $n({Yu:t,dk:M.NT,Uk:X.GET}),s=await this.requestSuccessOnly(e,i);try{return function(t){return s0(t,"text/xml")}(await s.ck())}catch(t){throw new Co(Ic.NETWORK,Wi.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async rZt(t,i,e,s){void 0===s&&(s=[]);const n=[],r=[],h=[];if(!t||!Ec(t,"VAST")){if(S0(yr.HJt,s),e)throw new Co(Ic.PARSING,Wi.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new Co(Ic.PARSING,Wi.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}if(0!==ds(t,"Ad").length){for(const e of ds(t,"Ad"))try{const t=await this.cZt(e,i,s);0===t.VN?n.push(t):r.push(t)}catch(t){h.push(t)}if(0===n.length&&0===r.length&&h.length>0)throw h[0];if(1===n.length&&0===r.length)return n[0];if(0===n.length&&0!==r.length)return new q$(r);if(n.length>0||r.length>0)return new q$(r.concat(n))}if(0!==ds(t,"Error").length)for(const i of ds(t,"Error")){T0(yr.HJt.Py);const t=i.textContent;t&&s.push(t.trim())}if(S0(yr.HJt,s),e)throw new Co(Ic.PARSING,Wi.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new Co(Ic.PARSING,Wi.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}async nZt(t,i,e){const s=[],n=ds(t,"AdBreak");if(0===n.length)throw new Co(Ic.PARSING,Wi.VAST_EMPTY_RESPONSE,"The VMAP element was empty.");for(const t of n)try{const n=await this.dZt(t,i,e);n&&s.push(n)}catch(t){zd.hm(t)}return s}async cZt(i,e,s){const n=he(i,"id")||"";let r=ti(he(i,"sequence"));r||(r=0);const h=ds(i,"InLine"),o=ds(i,"Wrapper");if(0!==o.length)return await this.lZt(o[0],n,r,e,s);if(0!==h.length)return t.fZt(h[0],n,r,s);throw new Co(Ic.PARSING,Wi.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static fZt(i,e,s,n){const r=ds(i,"Error")[0];let h;r&&r.textContent&&(h=r.textContent,n.push(h));const o=t.vZt(ds(i,"Extensions")[0]),a=ds(i,"AdSystem")[0];let u,c="";a&&(c=a.textContent||c);const d=ds(i,"AdTitle")[0];d&&(u=d.textContent||void 0);const l=[];for(const t of ds(i,"Impression"))t.textContent&&l.push(t.textContent);const f=t._Zt(ds(i,"Creatives")[0],c,o,n);return new G$(e,s,c,u,l,f,new w0(h))}async lZt(i,e,s,n,r){const h=ds(i,"Error")[0];let o="";h&&h.textContent&&(o=h.textContent,r.push(o));const a=ds(i,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of ds(i,"Impression"))t.textContent&&c.push(t.textContent);const d=ds(i,"VASTAdTagURI")[0];let l="";d&&d.textContent&&(l=d.textContent);const f=await this.oZt(l,n,!0,r),v=t.vZt(ds(i,"Extensions")[0]),_=ds(i,"Creatives")[0];let g=[];_&&(g=t.gZt(_,u,v,r));let p=Xn(he(i,"followAdditionalWrappers"));p||(p=!0);let m=Xn(he(i,"allowMultipleAds"));m||(m=!0);let w=Xn(he(i,"fallbackOnNoAd"));return w||(w=!1),new Z$(e,s,c,f,p,g,m,w,new w0(o))}static gZt(i,e,s,n){const r=[];for(const h of ds(i,"Creative")){let i=he(h,"id");i||(i="");let o=ti(he(h,"sequence"));o||(o=0);let a=he(h,"adId");a||(a="");const u=ds(h,"Linear")[0];let c;u&&(c=t.pZt(u,"wrapper",i,e,s,n));const d=ds(h,"NonLinearAds")[0];let l,f;if(d)try{f=t.mZt(d,i,e),l=f}catch(t){}const v=ds(h,"CompanionAds")[0];let _;v&&(_=t.wZt(v)),r.push(new $$(i,a,o,"",c,l,_,[]))}return r}static _Zt(i,e,s,n){const r=[];for(const h of ds(i,"Creative")){let i=he(h,"id");i||(i="");let o=ti(he(h,"sequence"));o||(o=0);let a=he(h,"adId");a||(a="");let u=he(h,"apiFramework");u||(u="");const c=ds(h,"Linear")[0];let d;if(c)try{d=t.pZt(c,"inline",i,e,s,n)}catch(t){}if(0===(null==d?void 0:d.ct))throw new Co(Ic.PARSING,Wi.VAST_UNEXPECTED_DURATION_ERROR,"The VAST response had a duration of 0 seconds, so skipping the ad(s).");const l=ds(h,"NonLinearAds")[0];let f,v;if(l)try{v=t.mZt(l,i,e),f=v}catch(t){}const _=ds(h,"CompanionAds")[0];let g;_&&(g=t.wZt(_));const p=ds(h,"UniversalAdId"),m=t.parseUniversalAdIds(p);r.push(new $$(i,a,o,u,d,f,g,m))}return r}static vZt(t){const i=[];if(!t)return i;for(const s of ds(t,"Extension")){var e;const t=null!=(e=he(s,"type"))?e:"",n=s.outerHTML;i.push({type:t,xml:n})}return i}static pZt(i,e,s,n,r,h){const o=ds(i,"Duration")[0];let a=0;if(o)a=F$(o.textContent)||0;else if(!o&&"inline"===e)throw new Co(Ic.PARSING,Wi.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const u=he(i,"skipoffset");let c=-1;if(u){let t=F$(u);if(void 0===t&&u.indexOf("%")>-1){const i=_.abs(Number(u.replace(/(?![0-9])./g,"")))/100;S(i)||(t=a*i)}void 0!==t&&(c=t)}const d=ds(i,"MediaFiles")[0];let l=[],f=[];if(d&&(l=function(t,i){const e=[];for(const s of ds(t,"MediaFile")){const t=he(s,"delivery"),n=he(s,"type");if(!n){T0();continue}if(!i(n))continue;let r=ti(he(s,"width")),h=ti(he(s,"height"));r||(T0(),r=0),h||(T0(),h=0);const o={delivery:t,type:n,width:r,height:h,contentURL:""+s.textContent};e.push(o)}return e}(d,b0),f=function(t){const i=ds(t,"ClosedCaptionFiles");if(0===i.length)return[];const e=i[0],s=[];for(const t of ds(e,"ClosedCaptionFile")){const i=he(t,"type");i||T0();const e=he(t,"language");e||T0();const n={type:null!=i?i:"",language:null!=e?e:"",contentURL:(""+t.textContent).trim()};s.push(n)}return s}(d)),"inline"===e&&(!d||0===l.length))throw S0(yr.qJt,h),new Co(Ic.PARSING,Wi.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const v=ds(i,"TrackingEvents")[0];let g=[];v&&(g=t.yZt(v,a0,"linear"));const p=ds(i,"VideoClicks")[0],m=t.AZt(p);return new t0(a,l,g,m,c,s,n,f,r)}static AZt(i){if(!i)return new _n("","",[],[]);const e=ds(i,"ClickThrough")[0];let s,n="";e&&(s=e.textContent||void 0,n=he(e,"id")||"");const r=t.bZt(ds(i,"ClickTracking")),h=t.bZt(ds(i,"CustomClick"));return new _n(s,n,r,h)}static bZt(t){const i=[];for(const e of t){const t=e.textContent;if(!t)continue;const s=he(e,"id")||"";i.push(new J$(s,t))}return i}static yZt(t,i,e){const s=[];for(const n of ds(t,"Tracking")){const r=he(n,"event");if(!i(r)){T0();continue}let h="";"linear"===e&&(h=he(t,"offset")||"0");const o=n.textContent;o&&s.push(new v0(r,h,o))}return s}static mZt(i,e,s){const n=[];for(const r of ds(i,"NonLinear")){const i=ds(r,"NonLinearClickThrough")[0];let h;i&&(h=i.textContent||void 0);const o=t.bZt(ds(r,"NonLinearClickTracking")),a=ds(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=he(a,"creativeType"),i=a.textContent||"",e=ds(a.parentNode,"NonLinearClickThrough")[0];let s="";e&&(s=e.textContent||""),u=new g0(i,t,s,"")}const c=t.SZt(r),d=t.parseHtmlResource(r);if(!u&&!c&&!d){T0();continue}const l=new _n(h,"",o,[]);n.push(new j$(u,c,d,l,e,s))}if(0===n.length)throw new Co(Ic.PARSING,Wi.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=ds(i,"TrackingEvents")[0];let h=[];return r&&(h=t.yZt(r,c0,"nonlinear")),new X$(n,h)}static parseUniversalAdIds(t){const i=[];for(const r of t){var e;const t=null!=(e=he(r,"idRegistry"))?e:"";var s,n;const h=null!=(n=null!=(s=he(r,"idValue"))?s:r.textContent)?n:"";i.push(new k0(t,h))}return i}static wZt(i){let e=he(i,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(e)||(e=Q$.lz);const s=[];for(const e of ds(i,"Companion")){let i=ti(he(e,"width")),n=ti(he(e,"height")),r=he(e,"id"),h=ti(he(e,"assetWidth")),o=ti(he(e,"assetHeight")),a=ti(he(e,"expandedWidth")),u=ti(he(e,"rxpandedHeight")),c=he(e,"apiFramework"),d=he(e,"adSlotId"),l=ti(he(e,"pxratio"));const f=ds(e,"AltText")[0];let v=f?f.textContent:"";i||(T0(),i=0),n||(T0(),n=0),r||(r=""),h||(h=0),o||(o=0),a||(a=0),u||(u=0),c||(c=""),d||(d=""),l||(l=1),v||(v="");const _=t.TZt(e),g=t.SZt(e),p=t.parseHtmlResource(e),m=ds(e,"TrackingEvents")[0];let w=[];m&&(w=t.yZt(m,l0,"companion"));const y=ds(e,"CompanionClickThrough")[0];let A;y&&(A=y.textContent||void 0);const b=t.bZt(ds(e,"CompanionClickTracking"));(_||g||p)&&s.push(new Y$(i,n,r,h,o,a,u,c,d,l,_,g,p,new _n(A,"",b,[]),w,v))}return new K$(e,s)}static TZt(t){const i=ds(t,"StaticResource")[0];let e;if(i&&i.parentNode){let t=he(i,"creativeType");t||(t="");const s=i.textContent,n=ds(i.parentNode,"AltText")[0],r=ds(i.parentNode,"CompanionClickThrough")[0];let h,o="";n&&(o=n.textContent||""),r&&(h=r.textContent||void 0),s&&(e=new g0(s,t,h,o))}return e}static SZt(t){const i=ds(t,"IFrameResource")[0];let e;if(i){const t=i.textContent||"";e=new p0(t)}return e}static parseHtmlResource(t){const i=ds(t,"HTMLResource")[0];let e;if(i){const t=i.textContent||"";e=new m0(t)}return e}async dZt(i,e,s){const n=he(i,"timeOffset")||"0",r=he(i,"breakType")||P0.pk;let h=he(i,"breakId"),o=Xn(he(i,"repeatAfter"));if(void 0===h&&(h=""),void 0===o&&(o=!1),!(void 0!==Ha.kZt(n)))throw new Co(Ic.PARSING,Wi.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=ds(i,"AdSource")[0],u=ds(i,"TrackingEvents")[0];let c=[];u&&(c=t.yZt(u,h0,"vmap"));let d=he(a,"id");d||(d="");let l=Xn(he(a,"allowMultipleAds"));void 0===l&&(l=!0);let f=Xn(he(a,"followRedirects"));f||(f=!0);const v=ds(a,"AdTagURI")[0];let _="";const g=ds(a,"VASTAdData")[0];if(!v||!v.textContent){if(g){if(g.firstElementChild&&i0(g.firstElementChild,"VAST")){const t=await this.rZt(g.firstElementChild,s,!1);if(t){const i=new R0(d,l,f,t);return new x0(n,i,r,h,c,o,!1,e)}return}throw new Co(Ic.PARSING,Wi.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new Co(Ic.PARSING,Wi.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{_=v.textContent;const t=Ua(e);return t.sources.src=_,new I0(n,t,s)}catch(t){return}}},P0=function(t){return t.pk="",t.hZt="linear",t.EZt="nonlinear",t.PZt="display",t}({}),Ha=class{static xZt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static IZt(t){}static RZt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static CZt(t){const i=t.split(":");let e=0;return e+=3600*Number(i[0]),e+=60*Number(i[1]),e+=Number(i[2]),e}static DZt(t){if(t<=0)return"00:00:00.000";const i=_.floor(t),e=t-i;return this.BZt(i/3600,2)+":"+this.BZt(i/60%60,2)+":"+this.BZt(i%60,2)+"."+this.BZt(1e3*e,3)}static BZt(t,i){return("00"+_.floor(t)).slice(-i)}static NZt(t,i){const e=this.kZt(t);if(0===e)switch(t){case"start":return 0;case"end":return-1}else{if(2===e)return U$(t)*i;if(1===e)return F$(t);if(3===e)return this.RZt(t);if(4===e){const i=Number(t);if(!S(i)&&i>=-1)return i}}}static kZt(t){return"start"===t||"end"===t?0:void 0!==F$(t.toString())?1:void 0!==U$(t.toString())?2:void 0!==this.IZt(t.toString())?3:S(Number(t))?void 0:4}},x0=class{get MZt(){return this.LZt.integration}get OZt(){return this.FZt}get _Ot(){return this.UZt}get JYt(){return this.ZYt}set JYt(t){this.ZYt=t}get NKt(){return this.mYt}get VZt(){return this.HZt}get WZt(){return this.qZt}get Ont(){return this.LZt}get zZt(){return this.uZt.dd}get W(){return!0}Un(){return Promise.resolve()}get uZt(){return this.GZt}set uZt(t){this.GZt=t}constructor(t,i,e,s,n,r,h,o){this.FZt=void 0,this.mYt=void 0,this.UZt=void 0,this.ZYt=-1,this.XZt=void 0,this.HZt=void 0,this.qZt=void 0,this.jZt=void 0,this.LZt=void 0,this.GZt=void 0,this.FZt=i,this.UZt=t,this.XZt=e,this.HZt=s,this.qZt=r,this.mYt=n,this.jZt=h,this.LZt=o}},I0=class{get MZt(){return this.zKt.MZt}get OZt(){return this.zKt.OZt}get _Ot(){return this.zKt._Ot}get JYt(){return this.zKt.JYt}set JYt(t){this.zKt.JYt=t}get NKt(){return this.zKt.NKt}get VZt(){return this.zKt.VZt}get WZt(){return this.zKt.WZt}get Ont(){return this.zKt.Ont}get zZt(){return this.zKt.zZt}get W(){return this.uE}Un(){var t;return null!=(t=this.QZt)?t:this.QZt=this.lE()}async lE(){const t=new E0;this.zKt=await t.aZt(this.Ont,this._Ot,this.uZt,this.nV),this.uE=!0}get uZt(){return this.zKt.uZt}set uZt(t){this.zKt.uZt=t}constructor(t,i,e){this.zKt=void 0,this.QZt=void 0,this.uE=!1,this.nV=void 0,this.nV=e,this.zKt=new x0(t,void 0,"","",[],!1,!1,i)}},R0=class{get o(){return this.hS}get BYt(){return this.KZt}get YZt(){return this.JZt}get dKt(){return this.ZZt}constructor(t,i,e,s){this.hS=void 0,this.KZt=void 0,this.JZt=void 0,this.ZZt=void 0,this.hS=t,this.KZt=i,this.ZZt=s,this.JZt=e}};function C0(t,i){let e;if(t.vastAdsRequest&&(e=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return r0(t.adsResponse);return}(t.vastAdsRequest)),!e){const i=function(t){const i=t.contentUrl||t.contentId;if(!i)return;const e=t.contentType||"video/mp4",s=ZT(e)||$T(e)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+Ha.DZt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+Ha.DZt(t.whenSkippable)+'"':"",h='<MediaFile delivery="'+s+'" type="'+e+'">'+n0(i)+"</MediaFile>",o=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+n0(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+h+"</MediaFiles>"+o+"</Linear>",u=t.title?"<AdTitle>"+n0(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);i&&(e=r0(i))}const s=t.customData;if(e){const n={integration:null==s?void 0:s.integration,sources:{src:e,type:"vast"},timeOffset:i};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}var D0=function(t){return t.$Zt="error",t.t$t="sourceupdate",t}({}),B0=class extends wp{constructor(t){super("error"),this.lt=void 0,this.lt=t}},N0=class extends wp{constructor(t,i){super("sourceupdate"),this.bt=void 0,this.Mc=void 0,this.bt=t,this.Mc=i}},M0=class extends Ne{get KD(){return this.i$t}e$t(t){this.s$t.e$t(t)}n$t(t){this.s$t.n$t(t)}r$t(t){this.s$t.r$t(t)}h$t(t){this.s$t.h$t(t)}o$t(t){this.i$t.addUpdateListener(t)}a$t(t){this.i$t.removeUpdateListener(t)}u$t(){const t=new pa,i=new chrome.cast.media.GetStatusRequest;return this.i$t.getStatus(i,()=>{t.Xy({bt:this.NP(),Mc:this.nu()})},i=>t.jy(i)),t.Qy}NP(){var t;return null==(t=this.i$t.customData)?void 0:t.currentSource}nu(){var t;let i;if(null==(t=this.YBt.c$t())?void 0:t.version){var e;i=null==(e=this.i$t.customData)?void 0:e.sourceDescription}else{var s;const t=null==(s=B$(this.i$t))?void 0:s.customData;(function(t){return Lu(t)&&t.theoplayer_version>=1&&it(t.streamStart)&&it(t.isLive)&&it(t.sourceDescription)})(t)&&(i=t.sourceDescription),i||(i=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:L0(t)}}(this.i$t.media))}return i}zx(){const t=new chrome.cast.media.PauseRequest;this.i$t.pause(t,Ct,this.d$t)}Xx(){const t=new chrome.cast.media.StopRequest;this.i$t.stop(t,Ct,this.d$t)}Gx(){const t=new chrome.cast.media.PlayRequest;this.i$t.play(t,Ct,this.d$t)}My(t,i){const e=new chrome.cast.media.SeekRequest;return e.currentTime=t,e.resumeState=i?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise((t,i)=>{this.i$t.seek(e,t,t=>{var e;i(new Vs(wn(t.code),null!=(e=t.description)?e:void 0))})})}vx(t){this.s$t._et(xn,function(t){return{type:N$.cKt,properties:{playbackRate:t}}}(t)).catch(this.l$t)}f$t(t){const i=new chrome.cast.media.EditTracksInfoRequest(t);this.i$t.editTracksInfo(i,Ct,this.d$t)}v$t(){return this.i$t.getEstimatedTime()}_$t(){return this.i$t.getEstimatedBreakClipTime()}g$t(){return this.i$t.getEstimatedBreakTime()}p$t(){this.s$t._et("urn:x-cast:com.google.cast.media",{type:M$.SKIP_AD,requestId:this.m$t++,mediaSessionId:this.i$t.mediaSessionId}).catch(this.l$t)}kn(){this.Vo()}constructor(t,i,e){super(i),this.YBt=void 0,this.s$t=void 0,this.i$t=void 0,this.m$t=0,this.l$t=t=>{this.So(new B0(t))},this.d$t=t=>{var i;const e=new Vs(wn(t.code),null!=(i=t.description)?i:void 0);this.l$t(e)},this.YBt=t,this.s$t=i,this.i$t=e}};function L0(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?De(t.breaks,i=>function(t,i){const e=[];if(t.isWatched)return e;for(const s of t.breakClipIds){const n=Jr(i,t=>t.id===s);if(n){const i=C0(n,t.position);i&&e.push(i)}}return e}(i,t.breakClips)):[]}r();var O0=class{w$t(t,i){this.YBt.addMessageListener(t,i)}y$t(t,i){this.YBt.removeMessageListener(t,i)}_et(t,i){return new Promise((e,s)=>{this.YBt.sendMessage(t,i,e,t=>{var i;s(new Vs(wn(t.code),null!=(i=t.description)?i:void 0))})})}kn(){}constructor(t){this.YBt=void 0,this.YBt=t}};function F0(t){return"vmap"===t||"adrule"===t}function U0(t){if(t)return Z(t)&&""!==t?{src:Hi(t),type:void 0}:function(t){return Lu(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:Hi(t.src),type:V0(t.type)}:void 0}function V0(t){if(Z(t)){const i=t.toLowerCase();switch(i){case"vast":case"vmap":case"adrule":return i;default:return void Ye("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||Ye("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function Ac(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return O$.test(t)}(t))return Ha.CZt(t);if(H0(t))return t}return Number(t)>=0?Number(t):void 0}}function H0(t){return new RegExp(/^\d{1,2}%$/).test(t)}function W0(t){const i=[],e=(t,s)=>{if(ul(s))for(let i=0,n=s.length;i<n;i++){const n=Lu(s[i])&&s[i]?String(i):"";e(t+"["+encodeURIComponent(n)+"]",s[i])}else if(Lu(s))for(const i of w.keys(s))e(t+"["+encodeURIComponent(i)+"]",s[i]);else((t,e)=>{i.push(t+"="+encodeURIComponent(null!=e?e:""))})(t,String(s))};for(const i of w.keys(t))e(encodeURIComponent(i),t[i]);return i.join("&")}r(),r(),r();var q0=function(t){return t.aKt="receiver_info",t.xLt="event",t.A$t="propertychange",t.uKt="trackevent",t}({}),z0=class{b$t(t){let i;try{i=JSON.parse(t)}catch(t){0}return i}e$t(t){this.S$t.push(t)}n$t(t){oi(this.S$t,t)}r$t(t){this.T$t.push(t)}h$t(t){oi(this.T$t,t)}k$t(t){this.E$t=t}_et(t,i){return this.P$t._et(t,i)}kn(){this.P$t.y$t(xn,this.x$t),Yo(this.T$t),Yo(this.S$t),this.E$t=void 0}constructor(t){this.P$t=void 0,this.S$t=[],this.T$t=[],this.E$t=void 0,this.x$t=(t,i)=>{const e=this.b$t(i);if(e)if(e.type===q0.A$t)for(const t of this.S$t)for(const i of w.keys(e.properties))t(i,e.properties[i]);else if(e.type===q0.xLt)for(const t of this.T$t)t(e.event);else e.type===q0.uKt&&this.E$t&&e.event.trackState&&this.E$t(e.event.trackId,e.event.trackState.targetQualityIds)},this.P$t=t,this.P$t.w$t(xn,this.x$t)}};r(),r();var kr=function(t){return t.I$t="medialoadedchange",t.gy="volumechange",t.$Zt="casterror",t.R$t="playererror",t.C$t="targetqualitychanged",t.D$t="receiverinfochanged",t}({}),G0=class extends wp{constructor(){super("medialoadedchange")}},X0=class extends wp{constructor(t,i){super("volumechange"),this.Mx=void 0,this.$P=void 0,this.Mx=t,this.$P=i}},j0=class extends wp{constructor(t){super("casterror"),this.lt=void 0,this.lt=t}},Q0=class extends wp{constructor(t){super("playererror"),this.lt=void 0,this.lt=t}},K0=class extends wp{constructor(t,i){super("targetqualitychanged"),this.$D=void 0,this.B$t=void 0,this.$D=t,this.B$t=i}},Y0=class extends wp{constructor(){super("receiverinfochanged")}},J0=class extends Ne{N$t(t,i,e){this.s$t._et(xn,function(t,i,e){return{type:N$.uKt,trackID:t,trackType:i,properties:{targetQuality:e}}}(t,i,e)).catch(this.l$t)}M$t(){this.P$t.w$t(xn,this.L$t),this.s$t._et(xn,{type:N$.aKt}).catch(Ct)}c$t(){return this.O$t}F$t(){return this.YBt.getSessionObj()}U$t(t){!this.V$t&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.V$t=new M0(this,this.s$t,t),this.H$t(),this.So(new G0),this.V$t.o$t(this.W$t))}q$t(){return this.V$t}async z$t(t){const i=function(t){const i=function(t,i,e,s){const[n,r]=function(t){for(const e of t.sources)if(pr(e)){const t=e.src;if(t){var i;const s=null!=(i=e.type)?i:_u(t);if(Z0(s))return[t,s]}}var e,s;return[null!=(e=JR(t))?e:"",null!=(s=KR(t))?s:""]}(t),h=new chrome.cast.media.MediaInfo(n,r);return h.metadata=D$(t.metadata,t.poster),h.streamType=s,function(t,i,e){const s=[],n=[];let r,h=0,o=0;for(const t of i){const i=U0(t.sources);if(i)if(V$(i,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=i.src;else if(H$(i,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const d=null!=(u=Ha.NZt(r,e))?u:0,l=void 0!==c?Ha.NZt(c,e):void 0,f=new chrome.cast.media.BreakClip("bc"+o++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=i.src,f.whenSkippable=l,f.customData={integration:t.integration};let v=Jr(n,t=>t.position===d);void 0===v&&(v=new chrome.cast.media.Break("b"+h++,[],d),n.push(v)),v.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(h,i,e),h}(t.G$t,t.Jc,t.ct,t.b0),e=new chrome.cast.media.LoadRequest(i);return e.autoplay=!0,e.currentTime=t.MP,e.customData=t.X$t,e}(t);let e;try{e=await this.YBt.loadMedia(i)}catch(t){e=t}if(e)throw new Vs(wn(e))}ix(t){this.F$t().setReceiverMuted(t,Ct,this.j$t)}Ox(t){this.F$t().setReceiverVolumeLevel(t,Ct,this.j$t)}Q$t(){return this.F$t().receiver.friendlyName}kn(){this.Vo(),this.YBt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.K$t),this.F$t().removeUpdateListener(this.H$t),this.P$t.y$t(xn,this.L$t),this.s$t.kn(),this.P$t.kn()}constructor(t){super(),this.YBt=void 0,this.P$t=void 0,this.s$t=void 0,this.O$t=void 0,this.V$t=void 0,this.l$t=t=>{this.So(new j0(t))},this.Y$t=(t,i)=>{"error"===t&&this.So(new Q0(i))},this.J$t=(t,i)=>{this.So(new K0(t,i))},this.L$t=(t,i)=>{const e=JSON.parse(i);e.type===q0.aKt&&(this.O$t=e.info,this.So(new Y0))},this.H$t=()=>{const t=this.F$t(),{level:i,muted:e}=t.receiver.volume;this.So(new X0(null!=i?i:void 0,null!=e?e:void 0))},this.K$t=()=>this.U$t(this.YBt.getMediaSession()),this.W$t=t=>{var i;t||(null==(i=this.V$t)||i.a$t(this.W$t),this.V$t=void 0,this.So(new G0))},this.j$t=t=>{var i;const e=new Vs(wn(t.code),null!=(i=t.description)?i:void 0);this.l$t(e)},this.YBt=t,this.YBt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.K$t),this.P$t=new O0(t.getSessionObj()),this.s$t=new z0(this.P$t),this.s$t.e$t(this.Y$t),this.s$t.k$t(this.J$t),this.F$t().addUpdateListener(this.H$t),this.H$t(),this.M$t();const i=this.YBt.getMediaSession();i&&this.U$t(i)}};function Z0(t){switch(t){case Ba.dR:case Ba.cR:case Ba.lR:case Ba.fR:return!0}return!1}var $0=function(t){return t.Z$t="statechange",t}({}),t1=class extends wp{constructor(t){super("statechange"),this.Ylt=void 0,this.Ylt=t}};r(),r(),r(),r();var i1=class extends Ne{Zst(){return this.qc}RP(){return ve.iL()}LP(){return this.bz+this.$$t}Hst(){return this.LP()}DP(){}Nd(){return this.WA}VP(){return this.Z4}HP(){}ox(){return this.kz}t0t(){}lx(){return this.Ez}vx(t){this.Ez!==t&&(this.Ez=t,this.So(new aa(this.oa.MP,t)))}bx(){return mh.VL}gx(){return ve.iL()}Tx(){return ve.iL()}Ex(){return!1}EP(){return this.YL}Dx(){return this.$L}Ix(){return this.Gl}f$t(t){}Nx(){return this.i0t}Cx(){return this.e0t}Gx(){this.kz=!1}zx(){this.kz=!0}My(t){this.bz=t-this.$$t}s0t(){return this.$$t}n0t(t){this.$$t=t}knt(t){this.qc.knt(t)}Xx(){}kn(){this.Vo(),this.YL.kn(),this.$L.kn(),this.Gl.kn(),this.qc.kn()}constructor(t,i,e,s,n,r,h,o,a){super(),this.oa=void 0,this.bz=void 0,this.WA=void 0,this.Z4=void 0,this.kz=void 0,this.Ez=void 0,this.$$t=void 0,this.i0t=void 0,this.e0t=void 0,this.YL=void 0,this.$L=void 0,this.Gl=void 0,this.qc=void 0,this.oa=t,this.$$t=0,this.YL=new rs,this.$L=new rs,this.Gl=new cc,this.qc=new xl,this.$$t=i,this.bz=e-i,this.WA=s,this.Z4=n,this.kz=r,this.Ez=h,this.i0t=o,this.e0t=a}};r(),r(),r(),r();var ma=function(t){return t.r0t="ccmodechangerequest",t.h0t="cctargetqualitychangerequest",t.o0t="cctrackchangerequest",t}({}),e1=class extends wp{constructor(t,i,e){super(ma.r0t),this.track=void 0,this.trackId=void 0,this.mode=void 0,this.track=t,this.trackId=i,this.mode=e}};r();var s1=function(t){return t.NT="TEXT",t.Dk="AUDIO",t.Bk="VIDEO",t}({}),n1=function(t){return t.OU="SUBTITLES",t.FU="CAPTIONS",t.UU="DESCRIPTIONS",t.Yn="CHAPTERS",t.VU="METADATA",t}({});function r1(t){return"AUDIO"===t.type}function h1(t){return"VIDEO"===t.type}function o1(t){return"TEXT"===t.type}var a1=class extends Ne{get Ca(){return this.hu||(this.hu=zh(this)),this.hu}get Th(){return this.pO}set Th(t){t!==this.pO&&(this.pO=t,this.So(new Uh(this)))}get q(){return this.g5}get L(){return this.p5}get Xk(){return this.Yo}set Xk(t){const i=AS(t);this.Yo!==i&&(this.Yo=i,this.a0t!==i&&this.So(new e1(this,this.jI,i)),this.So(new nr(this)))}get u0t(){return this.a0t}set u0t(t){const i=AS(t),e=this.Yo!==i;this.Yo=i,this.a0t=i,e&&this.So(new nr(this))}m5(t){return Jr(this.p5.II,i=>i.o===t)}$I(t){this.Xk=t}c0t(t){}kn(){}hr(){}constructor(t){super(),this.o=void 0,this.jI=void 0,this.ZI=void 0,this.Lt=void 0,this.bs=void 0,this.Ax=void 0,this.Km=void 0,this.pO=void 0,this._5=void 0,this.k5=void 0,this.p5=void 0,this.g5=void 0,this.Yo=void 0,this.a0t=void 0,this.hu=void 0;const i=t.customData;this.jI=Number(t.trackId)||0,this.o=""+(i&&i.id||this.jI),this.pO=i&&i.label||t.name||"",this.bs=i&&i.language||t.language||"",this.ZI=i&&i.inBandMetadataTrackDispatchType||"",this.Lt=i&&i.kind||function(t){switch(t){case n1.OU:return Ao.OU;case n1.FU:return Ao.FU;case n1.UU:return Ao.UU;case n1.Yn:return Ao.Yn;case n1.VU:return Ao.VU}return}(t.subtype)||"subtitles",this.Ax=Zu.NONE,this.Km=i&&void 0!==i.type?function(t){return YT(t)?t:nh.DEFAULT}(i.type):nh.WEBVTT,this._5=[],this.p5=new aM(this._5),this.k5=[],this.g5=new aM(this.k5),this.Yo=AS(i&&i.mode||xh.Nh),this.a0t=this.Yo}};r(),r();var u1=class extends wp{constructor(t,i){super(ma.o0t),this.trackId=void 0,this.enabled=void 0,this.trackId=t,this.enabled=i}};r();var c1=class extends wp{constructor(t,i){super(ma.h0t),this.track=void 0,this.targetQuality=void 0,this.track=t,this.targetQuality=i}};r();var d1=function(t){return t.Dk="audio",t.Bk="video",t.NT="text",t}({}),l1=class extends Ne{get XI(){return this.Kdt}get YI(){return this.jdt}set YI(t){this.d0t(t),this.So(new c1(this,t))}get KI(){return this.dO}get Th(){return this.pO}set Th(t){t!==this.pO&&(this.pO=t,this.So(new Uh(this)))}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.l0t!==t&&this.So(new u1(this.jI,t)),this.So(new nr(this)))}get f0t(){return this.l0t}set f0t(t){const i=this.We!==t;this.We=t,this.l0t=t,i&&this.So(new nr(this))}get Ca(){return this.hu||(this.hu=fo(this)),this.hu}get Xk(){return this.Rt?"enabled":"disabled"}wO(t){this.Rt=t}c0t(t){if(t.targetQualityIds){const i=[];for(const e of this.dO.II)t.targetQualityIds.indexOf(e.o)>-1&&i.push(e);const e=i.length?i:void 0;this.d0t(e)}}d0t(t){(function(t,i){return!t&&i||t&&!i||t&&i&&!df(t,i)})(this.jdt,t)&&(this.jdt=t&&this.dO.fO(t)?t:void 0,this.So(new Zo(this.jdt,this)))}unload(){for(const t of this.dO.II)t.mn("update",this.iLt);this.dO.hr()}constructor(t){super(),this.o=void 0,this.jI=void 0,this.Lt=void 0,this.bs=void 0,this.B3=void 0,this.pO=void 0,this.Kdt=void 0,this.dO=new Uk,this.jdt=void 0,this.We=void 0,this.l0t=void 0,this.hu=void 0,this.iLt=()=>this.So(new Uh(this));const i=t.customData;if(this.jI=Number(t.trackId)||0,this.o=""+(i&&i.id||this.jI),this.pO=i&&i.label||t.name||"",this.bs=i&&i.language||t.language||"",this.Lt=i&&i.kind||"main",this.We=i&&i.enabled,this.l0t=this.We,r1(t)){this.B3=d1.Dk;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new Vq(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);i.wn("update",this.iLt),this.dO.lO(i)}}else{this.B3=d1.Bk;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new Uq(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);i.wn("update",this.iLt),this.dO.lO(i)}}}};r();var f1=function(t){return t.v0t="legacy",t._0t="caf",t}({});r(),r(),r(),r();var v1=class{Rc(){if(this.g0t>=this.qc.length)return;const t=this.qc[this.g0t];return this.g0t+=1,t}lt(){return this.Rc()}constructor(t){this.qc=void 0,this.g0t=0,this.qc=t}};function Pn(t){var i,e,s;return null!=(s=null==(e=t.OZt)||null==(i=e.dKt)?void 0:i.lKt())?s:[]}var _1=class{},g1=class{wnt(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get ads(){return t.Jc.map(t=>t.wnt())},get integration(){return t.MZt},get maxDuration(){return t.p0t},get maxRemainingDuration(){return t.m0t},get timeOffset(){return t._Ot},get customData(){return t.X$t}}}(this)}constructor(){this.hu=void 0}},p1=class{get w0t(){return this.y0t}get t(){return this.oa}constructor(t,i){this.y0t=void 0,this.oa=void 0,this.y0t=t,this.oa=i}},m1=class extends g1{get uZt(){return this.GZt}get Jc(){const t=[];for(const s of this.GZt.A0t)for(const n of Pn(s)){var i,e;const r=null!=(e=null==(i=n.IKt)?void 0:i.tYt)?e:[];if(n.PKt&&t.push(this.b0t(n.PKt,r,n.CKt,s.Ont)),n.RKt)for(const i of n.RKt.DKt)t.push(this.S0t(i,r,n.RKt,n.CKt,s.Ont))}return t}b0t(t,i,e,s){const n=Jr(this.T0t,i=>i.PKt===t);if(void 0!==n)return n;const r=new b1(t,i,this,this.k0t,e,s);return this.T0t.push(r),r}S0t(t,i,e,s,n){const r=Jr(this.E0t,i=>i.RKt===t);if(void 0!==r)return r;const h=new A1(t,i,e,this,this.k0t,s,n);return this.E0t.push(h),h}get MZt(){return ru.CSAI}get _Ot(){const t=this.GZt.dd;return t>=0?t:this.k0t.t.Nd()}get m0t(){let t=0;for(const i of this.GZt.A0t)for(const e of Pn(i))e.PKt&&!e.PKt.$Yt&&(t+=e.PKt.ct);return this.k0t&&this.k0t.w0t&&(t+=this.k0t.w0t.ct-this.k0t.w0t.MP),t}get p0t(){let t=0;for(const i of this.GZt.A0t)for(const e of Pn(i))e.PKt&&(t+=e.PKt.ct);return t}get X$t(){}constructor(t,i){super(),this.GZt=void 0,this.k0t=void 0,this.T0t=[],this.E0t=[],this.GZt=t,this.k0t=i}},w1={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},y1=class extends _1{get od(){return this.zKt}get Ont(){return this.LZt}get CKt(){return this.XYt}P0t(){return this.x0t}I0t(){this.x0t=!0}R0t(t){return Mo({},w1,{resourceURI:t.LJt||""})}C0t(t){return Mo({},w1,{contentHTML:t.LJt.trim(),type:"HTMLResource"})}D0t(t){var i,e;return Mo({},w1,{clickThrough:(null==(i=t.AYt)?void 0:i.trim())||"",resourceURI:(null==(e=t.LJt)?void 0:e.trim())||"",altText:t.wYt||"",type:"StaticResource"})}B0t(t,i,e){if(!t||!i)return;const s="<img "+(e?"title='"+e+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(i)+"' target='_blank' rel='noopener'>"+s+"</a>"}IKt(t){return t?t.map(t=>{let i;const e={adSlotId:t.lYt||"",height:t.Mi||0,width:t.Ti||0};if(t.LKt){var s;const e=this.D0t(t.LKt),n=e.clickThrough||(null==(s=t.gYt)?void 0:s.AYt);i=Mo({},e,{contentHTML:this.B0t(e.resourceURI,n,e.altText)||""})}else if(t.VKt)i=this.C0t(t.VKt);else{if(!t.FKt)return;i=this.R0t(t.FKt)}return po(i,e)}).filter(t=>void 0!==t):[]}N0t(){return this.M0t.yKt}constructor(t,i,e,s,n,r){super(),this.M0t=void 0,this.iYt=void 0,this.zKt=void 0,this.k0t=void 0,this.XYt=void 0,this.LZt=void 0,this.x0t=!1,this.M0t=t,this.iYt=i,this.zKt=e,this.k0t=s,this.XYt=n,this.LZt=r}},A1=class extends y1{get RKt(){return this.M0t}get xKt(){return this.L0t}xa(){const t=this.zKt,i={companions:this.IKt(this.iYt),type:"nonlinear",id:this.M0t.GKt,skipOffset:this.JYt,integration:this.LZt.integration,adSystem:this.M0t.yKt,get adBreak(){return t.wnt()},creativeId:this.M0t.GKt,universalAdIds:this.XYt.map(t=>({adIdRegistry:t.ZJt,adIdValue:t.tZt}))};return this.M0t.FKt?po(this.R0t(this.M0t.FKt),i):this.M0t.VKt?po(this.C0t(this.M0t.VKt),i):this.M0t.LKt?po(this.D0t(this.M0t.LKt),i):i}wnt(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}O0t(){var t,i;return null!=(i=null==(t=this.M0t.LKt)?void 0:t.LJt)?i:""}F0t(){var t,i,e;return null!=(e=null==(i=this.M0t)||null==(t=i.LKt)?void 0:t.FJt)?e:""}get JYt(){const t=this.M0t.od;return t&&t.Ont&&void 0!==t.Ont.skipOffset?Ha.NZt(t.Ont.skipOffset,this.k0t.w0t.ct):(null==(i=this.M0t.od)?void 0:i.JYt)||-1;var i}constructor(t,i,e,s,n,r,h){super(t,i,s,n,r,h),this.L0t=void 0,this.hu=void 0,this.L0t=e}},b1=class extends y1{get PKt(){return this.M0t}xa(){var t;const i=this.zKt,e=this.M0t;return{companions:this.IKt(this.iYt),duration:e.ct,id:e.GKt,mediaFiles:e.QYt,get mediaUrl(){return e.tJt},skipOffset:this.JYt,type:"linear",integration:this.LZt.integration,adSystem:e.yKt,width:void 0,height:void 0,get adBreak(){return i.wnt()},clickThrough:null==(t=e.FYt)?void 0:t.AYt,creativeId:e.GKt,universalAdIds:this.XYt.map(t=>({adIdRegistry:t.ZJt,adIdValue:t.tZt})),closedCaptionFiles:e.eJt,extensions:e.nJt}}wnt(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}O0t(){return this.M0t.QYt.length>0?this.M0t.QYt[0].contentURL:""}F0t(){return this.M0t.QYt.length>0?this.M0t.QYt[0].type:""}get JYt(){const t=this.M0t.od;return t&&t.Ont&&void 0!==t.Ont.skipOffset?Ha.NZt(t.Ont.skipOffset,this.k0t.w0t.ct):this.M0t.JYt||-1}constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.hu=void 0}};function S1(t){return t instanceof b1}r();var mt=function(t){return t.U0t="csai",t.V0t="google-ima",t.so="google-dai",t.H0t="freewheel",t.W0t="mediatailor",t.Iv="chromecast",t.ont="theoads",t}({});r();var T1=class extends du{xa(){return new k1(this.Int.wnt())}constructor(t){super("q0t",t)}},k1=class extends vu{constructor(t){super("updatead",t)}};r();var E1=class extends du{xa(){return new P1(this.Int.wnt())}constructor(t){super("z0t",t)}},P1=class extends vu{constructor(t){super("adloaded",t)}},x1=class extends _o{get zc(){return void 0!==this.G0t}get mnt(){return this.M0t?[this.M0t]:[]}get ynt(){var t;return null!=(t=this.G0t)?t:null}get Ant(){return De(this.X0t,t=>{const i=t.Jc;if(t===this.G0t&&void 0!==this.M0t){const t=i.indexOf(this.M0t);if(t>=0)return i.slice(t+1)}return t.j0t()?[]:i})}get bnt(){return this.X0t.filter(t=>t===this.G0t||!t.j0t())}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=iU(this)}M6(t,i,e){throw new g("Scheduling ads while casting is not supported.")}rD(){this.i$t.p$t()}Ent(t){var i;null==(i=this.Q0t)||i.Ent(t)}Tnt(t,i){var e;null==(e=this.Q0t)||e.Tnt(t,i)}K0t(t){return Jr(this.X0t,i=>i.o===t)}Y0t(t,i,e,s){const n=this.X0t,r=[];let h=!1;for(const n of t){let t=this.K0t(n.id);void 0===t&&(t=new I1(n),s.push(new nU(t))),!it(t.J0t)&&it(e)&&(t.J0t=this.Z0t(t.$0t,e));const o=t.Jc;t.er(n,i,e,s);const a=t.Jc;for(const t of a)pi(o,t)||(s.push(new Qa(t)),h=!0);r.push(t)}this.X0t=r,h&&s.push(new wl);for(const t of n)pi(r,t)||s.push(new Uu(t))}t1t(t,i){const e=this.G0t,s=this.M0t;let n,r;if(t){var h;const{breakId:i,breakClipId:e}=t;n=i?this.K0t(i):void 0,r=e?null==(h=this.G0t)?void 0:h.i1t(e):void 0}if(this.G0t=n,this.M0t=r,n!==e&&(void 0!==e&&(e.e1t=void 0,i.push(new Fa(e))),void 0!==n&&(n.e1t=this.i$t,i.push(new aU(n)))),r!==s){const t=this.oa.LP();void 0!==s&&i.push(new bc(s,t)),void 0!==r&&i.push(new dc(r,t))}}Z0t(t,i){if(!i||!i.breaks)return;const e=Jr(i.breaks,i=>i.id===t.id);return e}knt(t){const i=[];for(const t of this.X0t){let e=t.Jc;if(t===this.G0t&&void 0!==this.M0t){const t=e.indexOf(this.M0t);t>=0&&(e=e.slice(t))}else if(t.j0t())continue;for(const t of e){const e=t.s1t();e&&i.push(e)}}for(const e of i)t.M6(e,iu.gnt,!1)}kn(){return this.Vo(),this.i$t.a$t(this.eh),void 0!==this.G0t&&(this.G0t.e1t=void 0,this.G0t=void 0),this.M0t=void 0,Yo(this.X0t),Promise.resolve(void 0)}Snt(t){}constructor(t,i,e){super(),this.oa=void 0,this.i$t=void 0,this.Q0t=void 0,this.X0t=[],this.G0t=void 0,this.M0t=void 0,this.hu=void 0,this.eh=t=>{var i;if(!t)return;const e=this.i$t.KD,{breakStatus:s}=e,{breakClips:n,breaks:r}=e.media,h=null==(i=B$(e))?void 0:i.media,o=[];r&&n&&this.Y0t(r,n,h,o),this.t1t(s,o);for(const t of o)this.So(t)},this.oa=t,this.i$t=i,this.Q0t=e,this.i$t.o$t(this.eh)}},I1=class extends g1{get $0t(){return this.n1t}get o(){return this.n1t.id}get Jc(){return this.qc}get MZt(){return mt.Iv}get p0t(){let t=this.n1t.duration;return void 0===t&&this.qc.length>0&&(t=$l(this.qc,t=>t.ct),S(t)&&(t=void 0)),t}get m0t(){const t=this.p0t;if(void 0!==t&&void 0!==this.e1t){const i=this.e1t.g$t();if(void 0!==i)return _.max(0,t-i)}return t}get _Ot(){return this.n1t.position}get X$t(){}j0t(){return this.n1t.isWatched}i1t(t){return Jr(this.qc,i=>i.o===t)}er(t,i,e,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const h=t.breakClipIds[r],o=Jr(i,t=>t.id===h);if(void 0===o)continue;const a=r<this.qc.length?this.qc[r]:new R1(o,this);!it(a.r1t)&&it(e)&&(a.r1t=this.h1t(e,h,r)),a.er(o,s),n.push(a)}this.n1t=t,this.qc=n}h1t(t,i,e){if(!t||!t.breakClips)return;let s=Jr(t.breakClips,t=>t.id===i);if(!s){var n;const i=null==(n=this.J0t)?void 0:n.breakClipIds[e];i&&(s=Jr(t.breakClips,t=>t.id===i))}return s}constructor(t){super(),this.n1t=void 0,this.J0t=void 0,this.qc=[],this.e1t=void 0,this.n1t=t}},R1=class{get o1t(){return this.a1t}get o(){return this.a1t.id}get tYt(){return[]}get ct(){var t;return null!=(t=this.a1t.duration)?t:NaN}get QYt(){const t=this.O0t();return t?[{contentURL:t,delivery:"progressive",type:this.F0t(),width:0,height:0}]:[]}get tJt(){return this.O0t()}get JYt(){const{whenSkippable:t}=this.a1t;return void 0===t?void 0:t<0?-1:t}get AYt(){return this.a1t.clickThroughUrl}get GKt(){}get CKt(){return[]}get X$t(){}N0t(){return""}F0t(){var t;return null!=(t=this.a1t.contentType)?t:""}O0t(){var t,i;return null!=(i=null!=(t=this.a1t.contentUrl)?t:this.a1t.contentId)?i:""}er(t,i){const e=this.o,s=this.ct,n=this.a1t.contentUrl;this.a1t=t;const r=this.o,h=this.ct,o=this.a1t.contentUrl;e===r&&(s===h||S(s)&&S(h))&&n===o||i.push(new T1(this)),S(s)&&!S(h)&&i.push(new E1(this))}s1t(){let t;return this.r1t&&(t=C0(this.r1t,this.od._Ot)),t||(t=C0(this.a1t,this.od._Ot)),t}wnt(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}xa(){const t=this;return{get extensions(){return[]},get companions(){return t.tYt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.QYt},get mediaUrl(){return t.tJt},get closedCaptionFiles(){return[]},get skipOffset(){return t.JYt},type:"linear",integration:mt.Iv,get adSystem(){return t.N0t()},width:void 0,height:void 0,get adBreak(){return t.od.wnt()},get resourceURI(){return t.O0t()},get clickThrough(){return t.AYt},get creativeId(){return t.GKt},get customData(){return t.X$t},get isSlate(){return!1},get universalAdIds(){return t.CKt.map(t=>({adIdRegistry:t.ZJt,adIdValue:t.tZt}))}}}constructor(t,i){this.a1t=void 0,this.r1t=void 0,this.od=void 0,this.hu=void 0,this.a1t=t,this.od=i}};r();var C1=class extends Ne{get u1t(){return this.c1t}set u1t(t){this.c1t!==t&&(this.c1t=t,this.Ls.href=null!=t?t:"",t?this.jU():this.QU())}jU(){if(this.We)return;this.We=!0,this.Ls.style.display="",this.d1t||(this.pE.style.cursor="pointer");const t=this.d1t?this.Ls:this.pE;zd.Zs.Ke?(t.addEventListener("touchstart",this.l1t),t.addEventListener("touchend",this.f1t)):(t.addEventListener("mousedown",this.l1t),t.addEventListener("click",this.f1t))}QU(){if(!this.We)return;this.We=!1,this.Ls.style.display="none",this.d1t||(this.pE.style.cursor="");const t=this.d1t?this.Ls:this.pE;zd.Zs.Ke?(t.removeEventListener("touchstart",this.l1t),t.removeEventListener("touchend",this.f1t)):(t.removeEventListener("mousedown",this.l1t),t.removeEventListener("click",this.f1t))}zg(){this.Vo(),this.QU(),this.pE.removeChild(this.Ls)}constructor(t,i=zd.Zs.Ke){super(),this.pE=void 0,this.Ls=void 0,this.d1t=void 0,this.c1t=void 0,this.We=!1,this.l1t=t=>{t.stopPropagation(),this.So(new wp("clickstart"))},this.f1t=t=>{t.stopPropagation(),this.So(new wp("click"))},this.pE=t,this.d1t=i,this.Ls=h.createElement("a"),this.Ls.style.position="absolute",this.Ls.style.zIndex="11",this.Ls.target="Xu",this.d1t?(Xu(this.Ls,"learn more"),this.Ls.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Ls.setAttribute("rel","noopener")):oa(this.Ls),this.pE.appendChild(this.Ls),this.QU()}};r(),r();var D1=[1200,992,768,576],B1={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},N1=class{v1t(t){const i=M1(t);i!==this._1t&&(fi(this.Ls,i),Rl(this.Ls,this._1t),this._1t=i)}kn(){this.sc.mn(Rh.yn,this.bn)}constructor(t,i){this.Ls=void 0,this.sc=void 0,this._1t=void 0,this.bn=void 0,this.Ls=t,this.sc=i,this.bn=t=>{this.v1t(t.width)},this._1t=M1(i.Eu),fi(this.Ls,this._1t),i.wn(Rh.yn,this.bn)}};function M1(t){for(const i of D1)if(t>i)return B1[i];return"theo-size-xs"}var L1=class extends Ne{get xe(){return this.Ls}get Xk(){return this.Yo}get UT(){return this.ud.textContent||""}set UT(t){Xu(this.ud,t)}g1t(t){"countdown"!==this.Yo&&(this.Yo="countdown",this.p1t(),this.xe.classList.remove("theoplayer-ad-skip-button"),this.xe.classList.add("theoplayer-ad-skip-countdown")),this.UT="You can skip in "+_.round(t)+" seconds"}m1t(){"skip"!==this.Yo&&(this.Yo="skip",this.UT="Skip Ad",this.w1t(),this.xe.classList.remove("theoplayer-ad-skip-countdown"),this.xe.classList.add("theoplayer-ad-skip-button"))}w1t(){this.xe.addEventListener("mouseup",this.y1t),this.xe.addEventListener("touchend",this.y1t)}p1t(){this.xe.removeEventListener("mouseup",this.y1t),this.xe.removeEventListener("touchend",this.y1t)}kn(){this.Vo(),this.p1t(),this.tc.kn(),os(this.Ls),os(this.ud),this.A1t&&os(this.A1t)}constructor(t,i){super(),this.Ls=void 0,this.A1t=void 0,this.ud=void 0,this.tc=void 0,this.Yo=void 0,this.y1t=()=>{this.So(new wp("rD"))},this.Ls=h.createElement("div"),this.xe.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.xe.style.position="absolute",this.ud=h.createElement("span"),this.xe.appendChild(this.ud),i&&(this.A1t=h.createElement("div"),this.A1t.className="theoplayer-ad-skip-poster",this.A1t.style.backgroundImage='url("'+dp(i)+'")',this.xe.appendChild(this.A1t)),this.Yo="countdown",this.tc=new N1(this.xe,t)}},O1=class extends Ne{b1t(){const t=this.i$t.KD.activeTrackIds;if(t){if(this.S1t()){const i=this.$L.II.map(t=>t.o),e=this.YL.II.map(t=>t.o);pi(i.concat(e),"0")&&t.push(0)}W1(t,this.YL),W1(t,this.$L),function(t,i){const e=!1;for(const e of i.II)e.u0t=pi(t,e.jI)?xh.Kn:xh.Nh}(t,this.Gl)}}T1t(){var t;const i=null==(t=this.i$t.KD.media)?void 0:t.tracks;if(!i)return;const e=i.filter(r1),s=i.filter(h1),n=i.filter(o1);if(this.S1t()&&0===s.length&&0!==this.Nx()){const t=this.k1t();s.push(t)}if(this.S1t()&&0===e.length){const t=this.E1t();e.push(t)}V1(this.YL,e.map(t=>t.trackId)),V1(this.$L,s.map(t=>t.trackId)),V1(this.Gl,n.map(t=>t.trackId)),H1(e,this.YL),H1(s,this.$L),function(t,i){let e=!1;for(const s of t){let t=U1(i,s.trackId);t||(t=new a1(s),i.tt(t),e=!0)}}(n,this.Gl)}P1t(){this.kz||(this.x1t=v(this.bd,250))}I1t(){p(this.x1t)}R1t(){this.I1t(),this.P1t()}C1t(){var t;const i=this.i$t.KD,e=i.media;var s;const n=null!=(s=null==e?void 0:e.duration)?s:NaN,r=(null==e?void 0:e.streamType)===chrome.cast.media.StreamType.LIVE||n<0,h=r?1/0:n;this.WA=h,this.D1t();const o=i.getEstimatedLiveSeekableRange(),a=null==(t=i.customData)?void 0:t.buffers;if(it(o)){const{start:t,end:i,isMovingWindow:e=r,isLiveDone:s=!1}=o;this.hUt(t,i,e,s)}else if(it(a)){const[t,i]=a.seekable;this.hUt(t,i,r,!1)}else r?this.hUt(void 0,void 0,!0,!1):this.hUt(0,h,!1,!1)}B1t(){const t=this.i$t.KD,i=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||F1(t);this.N1t=i,this.kz!==i&&(this.kz=i,this.kz?this.So(new hl(this.LP())):this.So(new Tc(this.LP())))}hh(){const{playbackRate:t}=this.i$t.KD;this.M1t!==t&&(this.M1t=void 0,this.Ez!==t&&(this.Ez=t,this.So(new aa(this.LP(),t))))}L1t(){const{playerState:t}=this.i$t.KD;let i;switch(t){case chrome.cast.media.PlayerState.IDLE:i=mh.VL;break;case chrome.cast.media.PlayerState.BUFFERING:i=mh.Qn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:i=mh.WL}this.e5(i),this.O1t()}hUt(t,i,e,s){it(t)&&it(i)?this.N4=new RN(t,i,e,e&&!s):this.N4=void 0}F1t(t,i){this.e0t=null!=i?i:this.e0t,this.i0t=null!=t?t:this.i0t,this.So(new ts)}Je(t){this.U1t!==t?(this.Sz=!0,this.So(new F(this.LP()))):this.U1t=void 0}Rq(){if(!this.Sz)return;this.Sz=!1;const t=this.LP();this.So(new Si(t,this.DP())),this.So(new Es(t))}Eh(){this.Z4=!0,this.VP()&&this.So(new At(this.LP()))}D1t(){const t=this.LEt,i=this.Nd();t===i||S(t)&&S(i)||(this.LEt=i,this.So(new Rs(i)))}V1t(){const t=this.LP();this.Sz||this.H1t===t||(this.H1t=t,this.So(new Si(t,this.DP())))}t0t(){this.kz&&(this.kz=!1,this.So(new Tc(this.LP())),this.e5(mh.VL))}Zst(){return this.qc}RP(){return this.OPt.Ny(this.$$t)}LP(){if(this.qc.zc){const t=this.i$t._$t();if(void 0!==t)return t}return this.Hst()}Hst(){return void 0!==this.W1t?this.$$t+this.W1t:this.Z4?this.Nd():this.$$t+this.i$t.v$t()}DP(){if(this.q1t)return new Date(this.Hst()+this.q1t)}Nd(){if(this.qc.zc){var t;const i=null==(t=this.qc.mnt[0])?void 0:t.ct;if(void 0!==i&&!S(i))return i}return this.$$t+this.WA}HP(){return this.JW}VP(){return!this.qc.zc&&this.Z4}ox(){return this.kz}lx(){return this.Ez}vx(t){this.Ez!==t&&(this.M1t=this.Ez,this.Ez=t,this.So(new aa(this.LP(),t)),this.i$t.vx(t))}bx(){return this.t5}gx(){return this.qc.zc?ve.tL(0,this.LP()):this.Ho.Ny(this.$$t)}Tx(){var t,i;if(this.qc.zc)return ve.iL();let e=null!=(i=null==(t=this.N4)?void 0:t.z3().Ny(this.$$t))?i:ve.iL();if(e.V>0){const t=e.An(e.V-1);e=e.OM(ve.tL(t,this.LP()))}return e}Ex(){return this.Sz}EP(){return this.YL}Dx(){return this.$L}Ix(){return this.Gl}k1t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.Cx(),id:"0",name:"",width:this.Nx()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:s1.Bk}}E1t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:s1.Dk}}S1t(){var t,i;return!(void 0!==(null==(t=this.YBt.c$t())?void 0:t.version))||(null==(i=this.YBt.c$t())?void 0:i.sdkType)===f1._0t}f$t(t){this.S1t()&&oi(t,0),this.i$t.f$t(t)}Nx(){return this.i0t}Cx(){return this.e0t}Gx(){this.kz&&(this.kz=!1,this.N1t=!1,this.So(new Tc(this.LP()))),this.i$t.Gx()}zx(){this.kz||(this.kz=!0,this.N1t=!0,this.So(new hl(this.LP()))),this.i$t.zx()}My(t){if(this.qc.zc)return;let i=_.max(0,t-this.$$t);i=_.round(1e6*i)/1e6;const e=this.W1t;this.W1t=i,this.N1t=this.ox(),this.U1t=i,this.Sz=!0,this.So(new F(this.LP())),void 0===e&&(this.S1t()?this.z1t(i):this.y7(i))}y7(t){this.i$t.My(t,this.N1t).then(this.G1t(t)).catch(this.l$t)}G1t(t){return()=>{void 0!==this.W1t&&(this.W1t===t?this.W1t=void 0:this.y7(this.W1t))}}e5(t){this.t5!==t&&(this.t5=t,this.So(new ou(this.LP(),t))),void 0===this.W1t&&this.Sz&&t>=mh.HL&&this.Rq(),this.O1t()}O1t(){if(this.kz)return void(this.X1t=!1);const t=this.t5>=mh.WL;this.X1t!==t&&(this.X1t=t,t?this.So(new ce(this.LP())):this.So(new ux(this.LP())))}j1t(){this.Q1t||(this.Q1t=h.createElement("div"),this.oa.xe.appendChild(this.Q1t),this.Q1t.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.Q1t.style.zIndex="10",oa(this.Q1t)),this.Q1t.style.display=this.qc.zc?"":"none"}K1t(){var t;const i=null==(t=this.qc.mnt[0])?void 0:t.AYt;i&&!this.Y1t?(this.Y1t=new C1(this.Q1t,!0),this.Y1t.u1t=i,this.Y1t.wn("clickstart",this.J1t)):this.Y1t&&(this.Y1t.u1t=i)}Z1t(){var t;const i=null==(t=this.qc.mnt[0])?void 0:t.JYt;if(void 0===i||i<0)return void(this.$1t&&(this.$1t.kn(),this.$1t=void 0));if(!this.$1t){var e;const t=null==(e=this.oa.Na)?void 0:e.gi;this.$1t=new L1(this.oa.Wu,t),this.Q1t.appendChild(this.$1t.xe),this.$1t.wn("rD",this.t2t)}const s=this.i$t._$t();void 0!==s&&(s<i?this.$1t.g1t(i-s):this.$1t.m1t())}s0t(){return this.$$t}n0t(t){this.$$t=t}knt(t){}Xx(){this.i$t.Xx()}kn(){this.Vo(),this.qc.kn(),this.Y1t&&(this.Y1t.zg(),this.Y1t=void 0),this.$1t&&(this.$1t.kn(),this.$1t=void 0),this.Q1t&&(os(this.Q1t),this.Q1t=void 0),this.i$t.h$t(this.e4),this.i$t.n$t(this.i2t),this.i$t.a$t(this.W$t),this.i$t.mn(D0.$Zt,this.e2t),this.i$t.kn()}constructor(t,i,e,s,n){super(),this.oa=void 0,this.YBt=void 0,this.i$t=void 0,this.OPt=ve.iL(),this.q1t=void 0,this.WA=void 0,this.Z4=!1,this.JW=void 0,this.kz=void 0,this.Ez=void 0,this.M1t=void 0,this.t5=mh.VL,this.X1t=!1,this.Ho=ve.iL(),this.N4=void 0,this.Sz=!1,this.$$t=void 0,this.i0t=void 0,this.e0t=void 0,this.YL=new rs,this.$L=new rs,this.Gl=new cc,this.qc=void 0,this.Q1t=void 0,this.Y1t=void 0,this.$1t=void 0,this.LEt=NaN,this.W1t=void 0,this.N1t=!1,this.H1t=NaN,this.U1t=void 0,this.x1t=0,this.i2t=(t,i)=>{switch(t){case"buffered":this.OPt=new ve(i),this.So(new H(this.LP()));break;case"currentProgramDateTime":this.q1t=new Date(i).getTime()-this.LP();break;case"played":this.Ho=new ve(i);break;case"seekable":this.C1t();break;case"videoHeight":this.F1t(void 0,i);break;case"videoWidth":this.F1t(i,void 0)}},this.e4=t=>{switch(t.type){case d.$w:this.Je(t.currentTime);break;case d.Zw:this.Rq();break;case d.Yw:this.So(new mH(t.representation,t.previousRepresentation));break;case d.iy:this.So(new jV(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case d.Dw:this.So(new eG(t.currentTime,t.initDataType,t.initData));break;case d.Ew:this.So(new wL(new fs(Vo.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case d.Pw:this.So(new un)}},this.W$t=t=>{this.C1t(),this.B1t(),this.hh(),this.L1t(),this.V1t(),this.R1t(),this.T1t(),this.b1t(),this.j1t(),this.K1t(),this.Z1t(),t||F1(this.i$t.KD)&&this.Eh()},this.bd=()=>{this.V1t(),this.Z1t()},this.e2t=t=>{this.So(t)},this.z1t=Hl(t=>this.y7(t),50),this.l$t=t=>{this.W1t=void 0,this.So(new B0(t))},this.J1t=()=>{this.zx()},this.t2t=()=>{this.qc.rD()},this.oa=t,this.YBt=e,this.i$t=s,this.qc=new x1(t,s,i.Jc),this.$$t=n.s0t(),this.WA=n.Nd()-this.$$t,this.kz=n.ox(),this.Ez=n.lx(),this.i0t=n.Nx(),this.e0t=n.Cx(),this.i$t.r$t(this.e4),this.i$t.e$t(this.i2t),this.i$t.o$t(this.W$t),this.i$t.wn(D0.$Zt,this.e2t),this.i$t.u$t().then(t=>{this.So(new N0(t.bt,t.Mc))},this.l$t)}};function F1(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function U1(t,i){for(const e of t.II)if(e.jI===i)return e}function V1(t,i){let e=!1;for(let s=0;s<t.V;s++){const n=t.CI(s);-1===i.indexOf(n.jI)&&(t.it(n),s--,e=!0)}return e}function H1(t,i){let e=!1;for(const s of t){let t=U1(i,s.trackId);t||(t=new l1(s),i.tt(t),e=!0)}return e}function W1(t,i){for(const e of i.II)e.f0t=pi(t,e.jI);return!1}r();var q1=class{HK(t){return Promise.resolve("all")}qx(){}kn(){}};r();function z1(t,i,e){if(S(t))return e;if(t===1/0){if("live"===e||"dvr"===e)return e;if(i&&i.length>0){if(i.end(i.length-1)-i.start(0)>60)return"dvr"}return"live"}return"vod"}var G1=[d.Bw,d.Rw,d.Kw,d.Jw,d.jw,d.uo,d.Qw,d._y,d.$w,d.Zw,Do.SM,Do.TM,d.Yw,d.iy,d.Dw,d.Ew,d.Pw],X1=class extends Oc{Az(t){if(!t)return;_t(this.fz&&dS(this.fz),t&&dS(t))||(this.fz=t,this.So(new bk(t)))}s2t(t){if(!t)return;const i=Cn(t,this.oa.Cd);_t(this.Ac&&dS(this.Ac),i&&dS(i))||(this.Ra.n0t(0),this.Ac=i,this.So(new KF(i)),this.Ra.t0t())}n2t(t){for(const i of this.rt.II)if(i.jI===t)return i;for(const i of this.ht.II)if(i.jI===t)return i}get Ylt(){return this.Ra}set Ylt(t){const i=this.Ra;i&&(i.mn(D0.$Zt,this.e2t),i.mn(D0.t$t,this.r2t),i.mn(G1,this.Rs),i.mn(Do.wI,this.FV),t.n0t(i.s0t()),i.knt(t.Zst())),this.Ra=t,this.YL.BI=t.EP(),this.$L.BI=t.Dx(),this.Gl.BI=t.Ix(),this.qc.BI=t.Zst(),i&&i.kn(),t.wn(D0.$Zt,this.e2t),t.wn(D0.t$t,this.r2t),t.wn(G1,this.Rs),t.wn(Do.wI,this.FV)}get ro(){return this.ho}get Jc(){return this.Zst()}Zst(){return this.qc}$st(){return this.Mst}EP(){return this.YL}RP(){return this.Ra.RP()._s()}get h2t(){return this.o2t||this.Ac}set h2t(t){this.o2t=t}async Un(t,i){var e;t&&await this.z$t(t,null!=(e=t.ads)?e:[],t.streamType,NaN,0,null!=i?i:0)}async a2t(t){var i;const e=null!=(i=this.o2t)?i:this.Ac;if(!e)return;var s;const n=this.o2t?null!=(s=this.o2t.ads)?s:[]:this.Wnt(),r=this.oa.Nd(),h=this.oa.Tx(),o=z1(r,h,e.streamType),a=h.length>0?h.start(0):0,u=null!=t?t:this.Hst();await this.z$t(e,n,o,r,a,u)}Wnt(){const t=new xl;return this.qc.knt(t),t.Wnt()}DP(){return this.Ra.DP()}NP(){return this.fz}get MP(){return this.LP()}set MP(t){this.OP(t)}LP(){return this.Ra.LP()}Hst(){return this.Ra.Hst()}OP(t,i){this.u2t||(this.YBt.q$t()||this.u2t||!this.Ac?this.Ra.My(t):this.Un(this.Ac,t))}Nd(){return this.Ra.Nd()}VP(){return this.Ra.VP()}HP(){return this.JW}qP(){return this.ZW}GP(){return this.ZL}ZP(){return this.oa.JP}tx(){return this.Tz}ix(t){this.Tz=t,this.So(new Ze(this.MP,this.Mx)),this.YBt.ix(t)}ox(){return this.Ra.ox()}lx(){return this.Ra.lx()}vx(t){this.Ra.vx(t)}gx(){return this.Ra.gx()._s()}wx(){return q.OL}yx(t){}bx(){return this.Ra.bx()}Tx(){return this.Ra.Tx()._s()}Ex(){return this.Ra.Ex()}nu(){return this.Ac}async Ta(t){this.Ac=t,await this.Un(t),this.o2t=void 0,this.Ra.t0t()}Ix(){return this.Gl}Cx(){return this.Ra.Cx()}Nx(){return this.Ra.Nx()}Dx(){return this.$L}Lx(){return this.ib}Ox(t){this.ib=t,this.So(new Ze(this.MP,this.Mx)),this.YBt.Ox(t)}get Vx(){return!1}set Vx(t){}Wx(){}Hx(){return this.ha}qx(){}Gx(){this.YBt.q$t()||this.u2t||!this.Ac?this.Ra.Gx():this.Un(this.Ac)}zx(){this.Ra.zx()}gr(){this.ho=!0}mr(){this.fz=void 0,this.ho=!1}be(){}we(){}async z$t(t,i,e,s,n,r){this.u2t=!0,this.c2t(),this.Ra.n0t(n);const h="live"===e||"dvr"===e,o=function(t,i,e,s){return{theoplayer_version:1,streamStart:t,isLive:i,sourceDescription:e,configuration:s}}(n,h,t,this.Cd),a={G$t:t,Jc:i,MP:_.max(0,r-n),ct:s,b0:h?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,X$t:o};try{await this.YBt.z$t(a)}catch(t){this.d2t(t)}finally{this.u2t=!1}}l2t(){this.f2t(this.YL),this.f2t(this.$L),this.v2t(this.Gl)}f2t(t){for(const i of t.II)this._2t(i);t.wn(Vt.eI,t=>{this._2t(t.Ht),this.g2t()})}v2t(t){for(const i of t.II)this.p2t(i);t.wn(Vt.eI,t=>{this.p2t(t.Ht),this.g2t()})}_2t(t){t.wn(ma.h0t,this.Opt),t.wn(ma.o0t,this.m2t),t.wn(ma.o0t,this.b1t)}p2t(t){t.wn(ma.r0t,this.w2t),t.wn(ma.r0t,this.b1t)}y2t(){const t=[];for(const i of this.rt.II)i.Rt&&t.push(i.jI);for(const i of this.ht.II)i.Rt&&t.push(i.jI);for(const i of this.nt.II)i.Xk===xh.Kn&&t.push(i.jI);this.Ra.f$t(t)}A2t(t,i,e){this.b2t=t,this.S2t=i,this.T2t=e}k2t(t){var i,e;if(!t)return!1;return(null!=(e=null==(i=this.YBt.c$t())?void 0:i.version)?e:-1)>=2?t.map(t=>t.o):[t[0].o]}E2t(t){this.P2t=t}Yx(){}Jx(){}tI(t){throw new m("Can't add a track while casting.")}async Xx(){this.Ra.Xx(),this.c2t()}c2t(){this.EV=mh.VL,this.AV=!1,this.SV=!1,this.JW=void 0,this.ZW=void 0}async kn(){this.c2t(),this.Vo(),this.Ylt=this.x2t(),this.YBt.mn(kr.$Zt,this.e2t),this.YBt.mn(kr.R$t,this.I2t),this.YBt.mn(kr.gy,this.R2t),this.YBt.mn(kr.I$t,this.C2t),this.YBt.mn(kr.C$t,this.D2t),this.YBt.kn()}x2t(){return new i1(this,this.Ra.s0t(),this.Ra.LP(),this.Ra.Nd(),this.Ra.VP(),this.Ra.ox(),this.Ra.lx(),this.Ra.Nx(),this.Ra.Cx())}constructor(t,i){super(t,!0),this.ho=!1,this.P2t=Ct,this.EV=mh.VL,this.AV=!1,this.SV=!1,this.u2t=!1,this.o2t=void 0,this.YBt=void 0,this.ib=void 0,this.Tz=void 0,this.Ra=void 0,this.fz=void 0,this.Ac=void 0,this.JW=void 0,this.ZW=void 0,this.YL=new He,this.$L=new He,this.Gl=new sl,this.qc=void 0,this.ha=new ls,this.ZL=new kS,this.Mst=new q1,this.b2t=void 0,this.S2t=void 0,this.T2t=void 0,this.R2t=t=>{var i,e;(it(t.Mx)&&!uh(t.Mx,this.ib,1e-5)||it(t.$P)&&t.$P!==this.Tz)&&(this.ib=null!=(i=t.Mx)?i:this.ib,this.Tz=null!=(e=t.$P)?e:this.Tz,this.So(new Ze(this.MP,this.ib)))},this.C2t=()=>{const t=this.YBt.q$t();this.Ylt=t?new O1(this,this.oa,this.YBt,t,this.Ra):this.x2t()},this.r2t=t=>{this.Az(t.bt),this.s2t(t.Mc)},this.D2t=t=>{const i=this.n2t(t.$D);if(!i)return void 0;const e={targetQualityIds:t.B$t};i.c0t(e)},this.e2t=t=>{this.d2t(t.lt)},this.d2t=t=>{this.P2t&&this.P2t(t)},this.I2t=t=>{this.JW=t.lt,this.ZW=Ok(this.JW),this.So(new Pi(this.ZW))},this.m2t=t=>{if(!t.enabled)return;const i=this.rt.II.some(i=>i.jI===t.trackId)?this.rt:this.ht;for(const e of i.II)e.Rt&&e.jI!==t.trackId&&(e.Rt=!1)},this.w2t=t=>{if(t.mode===xh.Kn)for(const i of this.nt.II)i.Xk===xh.Kn&&i.jI!==t.trackId&&HP(i.Lt,t.track.Lt)&&(i.Xk=xh.Nh)},this.b1t=Hl(()=>{this.y2t()},50),this.g2t=()=>{const t=[];var i;const e=null!=(i=Jr(this.ht.II,t=>Bc(t,this.b2t)))?i:Jr(this.ht.II,t=>t.Rt);var s;e&&t.push(e.jI);const n=null!=(s=Jr(this.nt.II,t=>Bc(t,this.S2t)))?s:Jr(this.nt.II,t=>t.Xk===xh.Kn);var r;n&&t.push(n.jI);const h=null!=(r=Jr(this.rt.II,t=>Bc(t,this.T2t)))?r:Jr(this.rt.II,t=>t.Rt);h&&t.push(h.jI),0!==t.length&&this.Ra.f$t(t)},this.Opt=t=>{const i=this.k2t(t.targetQuality),e=t.track;this.YBt.N$t(e.jI,e.B3,i)},this.FV=t=>{this.So(t);const i=t.readyState;!this.AV&&this.EV===mh.VL&&i>=mh.Qn&&(this.AV=!0,this.So(new ut(t.currentTime))),!this.SV&&this.EV<=mh.Qn&&i>=mh.HL&&(this.SV=!0,this.So(new ot(t.currentTime))),this.EV<=mh.HL&&i>=mh.WL&&this.So(new lo(t.currentTime)),this.EV<=mh.WL&&i===mh.qL&&this.So(new qt(t.currentTime)),this.EV=i},this.ib=this.oa.Mx,this.Tz=this.oa.$P,this.YBt=i,this.YBt.wn(kr.$Zt,this.e2t),this.YBt.wn(kr.R$t,this.I2t),this.YBt.wn(kr.gy,this.R2t),this.YBt.wn(kr.I$t,this.C2t),this.YBt.wn(kr.C$t,this.D2t),this.qc=new _l(this),this.fz=this.oa.bt,this.Ac=this.oa.nu(),this.Ylt=new i1(this,0,this.oa.Hst(),this.oa.Nd(),this.oa.UP,this.oa.hx,this.oa.ux,this.oa.Bx,this.oa.Rx),this.l2t()}};r();var j1=class extends Oi{xa(){return new Q1(this.lt)}constructor(t){super("error"),this.lt=void 0,this.lt=t}},Q1=class extends wp{constructor(t){super("error"),this.error=void 0,this.error=t}};r();var K1=class extends wp{constructor(t){super("statechange"),this.state=void 0,this.state=t}};function Y1(t,i){let e;return{get casting(){return t.bJ},get error(){return t.lt},get receiverName(){return t.B2t},get state(){return t.Ylt},start(){t.Tn()},stop(){t.Xx()},join(){t.N2t()},leave(){t.M2t()},set connectionCallback(t){null==i||i.L2t(t)},get connectionCallback(){return null==i?void 0:i.O2t()},get source(){return e||t.Mc},set source(i){e=i,t.Mc=i},addEventListener(i,e){const s=$a(i,Hi);t.wn(s,e)},removeEventListener(i,e){const s=$a(i,Hi);t.mn(s,e)}}}r();var J1=class extends _o{get bJ(){return this.Ylt===Yr.CONNECTING||this.Ylt===Yr.CONNECTED}get lt(){return this.JW}get Ca(){return this.hu||(this.hu=Y1(this,this.F2t)),this.hu}get B2t(){var t;return null==(t=this.F2t.U2t())?void 0:t.Q$t()}get Mc(){return this.oa?this.oa.h2t:this.o2t}set Mc(t){this.o2t=t?Cn(t,this.V2t.Cd):void 0,this.oa&&(this.oa.h2t=this.o2t,this.o2t&&this.oa.Un(this.o2t))}get Ylt(){return this.Ra}set Ylt(t){let i=t;this.H2t||i!==Yr.CONNECTING&&i!==Yr.CONNECTED||(i=Yr.AVAILABLE),this.Ra!==i&&(this.Ra=i,this.So(new K1(this.Ylt)))}async W2t(){if(!this.q2t)throw new m("Chromecast must be initialized before starting a session");await this.q2t,this.F2t.U2t()||await this.F2t.z2t()}async Tn(){this.H2t=!0;try{if(this.Ylt=Yr.CONNECTING,await this.W2t(),await this.G2t(),this.oa){const t=this.V2t.nu(),i=this.F2t.X2t(t);this.oa.h2t=i?Cn(i,this.V2t.Cd):this.o2t,this.oa.a2t()}this.Ylt=Yr.CONNECTED,await this.V2t.Xx()}catch(t){this.j2t(!1).catch(Ct),this.Ylt=Yr.AVAILABLE,D(t)||this.e8(t)}}async N2t(){this.H2t=!0;try{if(this.Ylt=Yr.CONNECTING,await this.W2t(),await this.G2t(),this.oa){const t=this.V2t.nu(),i=this.F2t.Q2t(t);i&&(this.oa.h2t=Cn(i,this.V2t.Cd))}this.Ylt=Yr.CONNECTED,await this.V2t.Xx()}catch(t){await this.j2t(!0).catch(Ct),this.Ylt=Yr.AVAILABLE,D(t)||this.e8(t)}}async K2t(){this.F2t.U2t()&&await this.Tn()}async G2t(){null!=this.oa||(this.oa=this.Y2t()),this.JW=void 0,this.V2t.zx(),await this.CY.J2t(this.oa)}Y2t(){const t=new X1(this.V2t,this.F2t.U2t());return t.E2t(this.e8),t}Z2t(){this.oa&&(this.oa.kn(),this.oa=void 0)}async j2t(t){if(this.H2t=!1,!this.oa)return;const i=this.oa.ro,e=this.oa.nu(),s=this.oa.Hst();try{if(i){let i;i=t?this.F2t.$2t(e):this.F2t.t3t(e),null!=i||(i=e),await this.CY.i3t(i,i===e),this.V2t.OP(s),this.V2t.Gx()}}finally{this.Z2t()}}M2t(){this.bJ&&(this.F2t.e3t(!1),this.j2t(!0).catch(this.e8))}Xx(){this.bJ&&(this.F2t.e3t(!0),this.j2t(!1).catch(this.e8))}kn(){this.rV.Zg(),this.F2t.mn($0.Z$t,this.s3t),this.Vo(),this.Z2t()}constructor(t,i,e,s){super(),this.YS=void 0,this.JW=void 0,this.hu=void 0,this.V2t=void 0,this.oa=void 0,this.Ra=Yr.UNAVAILABLE,this.q2t=void 0,this.CY=void 0,this.F2t=void 0,this.H2t=!1,this.rV=new at,this.n3t=()=>{this.F2t.wn($0.Z$t,this.s3t),this.Ylt=this.F2t.r3t()},this.s3t=t=>{const i=t.Ylt;this.Ylt=i,i!==Yr.UNAVAILABLE&&i!==Yr.AVAILABLE||this.j2t(!1).catch(this.e8)},this.o2t=void 0,this.e8=t=>{D(t)||t instanceof Vs&&(this.JW=t,this.So(new j1(t).Ca))},this.CY=t,this.V2t=i,this.F2t=s,this.YS=e.chromecast,this.q2t=$e(this.F2t.VY(this.YS,this.rV.Yg),this.rV),this.q2t.then(this.n3t).catch(this.e8)}};r();var Z1=class extends _o{get bJ(){return!1}get lt(){}get B2t(){}get Mc(){}set Mc(t){}get Ylt(){return Yr.UNAVAILABLE}get Ca(){return this.hu||(this.hu=Y1(this)),this.hu}N2t(){zd.um("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}M2t(){zd.um("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Tn(){zd.um("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}Xx(){zd.um("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}K2t(){return Promise.resolve()}kn(){}constructor(...t){super(...t),this.hu=void 0}};function $1(t){return{bt:t.bt,MP:t.LP(),ct:t.Nd(),UP:t.UP,lt:t.HP(),WP:t.qP(),$P:t.$P,hx:t.hx,ux:t.ux,Ax:t.Ax,kx:t.kx,Rx:t.Rx,Bx:t.Bx,Mx:t.Mx}}r(),r();var In=class extends Oc{Zst(){return this.qc}EP(){return this.YL}get zP(){return this.GP()}get jP(){return this.QP()}GP(){return this.ZL}QP(){return this.JL}Aa(){return this.KL}Ix(){return this.Gl}Dx(){return this.$L}switchContexts(t){this.oa=t,this.YL.BI=t.ht,this.$L.BI=t.rt,this.Gl.BI=t.nt,this.KL.BI=t.mq,this.ZL.BI=t.zP,this.JL.BI=t.jP,this.qc.BI=t.Jc}h3t(t){this.oa!==t&&(this._z(),this.switchContexts(t),this.vz())}tO(t){if(this.oa===t)return;let i;this._z(),this.nnt&&(i=$1(this));const e=this.NP(),s=this.Hx(),n=this.Wx();if(this.switchContexts(t),void 0!==i){Ri(this,i,$1(this))}const r=this.NP();r!==e&&this.So(new bk(r)),this.Hx()!==s&&this.So(new lt),this.Wx()!==n&&this.So(new Sk),this.vz()}async kn(t){await super.kn(t),this.KL.kn(t),this.YL.kn(t),this.$L.kn(t),this.Gl.kn(t),this.ZL.kn(),this.JL.kn(),await this.qc.kn(t)}constructor(t,i){super(t,i),this.YL=new He,this.$L=new He,this.Gl=new sl,this.KL=void 0,this.ZL=new yl,this.JL=new Rk,this.qc=void 0,this.KL=new io(t.mq),this.YL.BI=t.ht,this.$L.BI=t.rt,this.Gl.BI=t.nt,this.ZL.BI=t.zP,this.JL.BI=t.jP,this.qc=new _l(this),this.qc.BI=t.Jc}};r();function t2(t){const i=h.createElement("div");return fi(i,"theo-ads-sgai-ima-container"),function(t){t.style.boxSizing="border-box",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%"}(i),t.appendChild(i),i}function i2(t){const i=t.style;i.boxSizing="border-box",i.position="absolute",i.display="none",i.border="0 solid transparent",i.borderWidth="0px",i.width="100%",i.height="100%"}function e2(t){const i=t.style;i.display="",i.backgroundColor="",i.backgroundRepeat="",i.backgroundAttachment="",i.border="",i.borderWidth="",i.flex="",i.transform="",i.transition="",i.backgroundImage="",i.backgroundSize="",i.backgroundPosition="",i.alignItems="",i.position=""}function s2(t,i,e,s,n){const r=i/e;let h=1,o=0,a=0;if(r>=s/n){const t=s/r;o=(n-t)/2,h=t/e}else{const t=n*r;a=(s-t)/2,h=t/i}t.style.left=a/s*100+"%",t.style.top=o/n*100+"%",t.style.width=i*h/s*100+"%",t.style.height=e*h/n*100+"%"}function n2(t){return Vh(t,"theo-ads://dai.break")}function r2(t){return t&&t.integration===ru.THEOADS}var h2=class extends In{nu(){const t=super.nu();return!t&&this.o3t.bJ&&this.o3t.Mc?this.o3t.Mc:t}Ta(t,i){return this.ta.Zo(i=>(this.a3t=new at,this.a3t.$g(i),$e(super.Ta(t,this.a3t.Yg),this.a3t)),i)}Gx(){super.Gx(),this.Cd.cast.strategy!==IS.AUTO||this.o3t.bJ||this.o3t.K2t()}J2t(t){return this.ta.Zo(i=>this.u3t(t,i))}i3t(t,i){return void 0===t&&(t=void 0),void 0===i&&(i=!1),this.ta.Zo(e=>this.c3t(t,i,e))}u3t(t,i){ii(i),this.d3t.Jc&&this.d3t.Jc.knt(t.Jc),this.l3t(),this.f3t=Jr(this.d3t.ht.II,t=>t.Rt),this.jkt=Jr(this.d3t.nt.II,t=>"showing"===t.Xk),this.v3t=Jr(this.d3t.rt.II,t=>t.Rt),this._3t=t,this._3t.A2t(this.f3t,this.jkt,this.v3t),this.tO(t),this._3t.gr()}async c3t(t,i,e){ii(e);const s=this._3t;if(void 0!==s)try{if(t){await this.d3t.Xx(),ii(e);const s=Cn(t,this.d3t.Cd);var n;if(i)s.ads=null==(n=s.ads)?void 0:n.filter(r2);this.a3t=new at,this.a3t.$g(e),await $e(this.d3t.Ta(s,this.a3t.Yg),this.a3t)}i&&this.d3t.Jc&&s.Jc.knt(this.d3t.Jc)}catch(t){yf(t)}finally{s.mr(),this.tO(this.d3t),this.f3t=Jr(this._3t.ht.II,t=>t.Rt),this.jkt=Jr(this._3t.nt.II,t=>"showing"===t.Xk),this.v3t=Jr(this._3t.rt.II,t=>t.Rt),this.d3t.ht.wn(Vt.eI,this.g3t),this.d3t.nt.wn(Vt.eI,this.p3t),this.d3t.rt.wn(Vt.eI,this.m3t),this.d3t.wn(Do.bM,this.l3t),this._3t===s&&(this._3t=void 0)}}Xx(){var t;return this.f3t=void 0,this.jkt=void 0,this.v3t=void 0,this.l3t(),null==(t=this.a3t)||t.Zg(),this.ta.Zo(()=>super.Xx())}async kn(){var t;null==(t=this.a3t)||t.Zg(),this.o3t.kn(),await this.i3t(),await this.ta.kn(),await super.kn()}constructor(t,i){super(t),this.o3t=void 0,this.d3t=void 0,this._3t=void 0,this.ta=new te,this.a3t=void 0,this.f3t=void 0,this.jkt=void 0,this.v3t=void 0,this.g3t=t=>{const i=t.Ht;Bc(this.f3t,i)&&(i.Rt=!0)},this.p3t=t=>{const i=t.Ht;Bc(this.jkt,i)&&(i.Xk=xh.Kn)},this.m3t=t=>{const i=t.Ht;Bc(this.v3t,i)&&(i.Rt=!0)},this.l3t=()=>{this.d3t.ht.mn(Vt.eI,this.g3t),this.d3t.nt.mn(Vt.eI,this.p3t),this.d3t.rt.mn(Vt.eI,this.m3t)},this.d3t=t,this.Cd.cast.strategy!==IS.DISABLED?this.o3t=new J1(this,t,this.Cd.cast,i):this.o3t=new Z1,this.VX.IJ(this.o3t)}};function Bc(t,i){return void 0!==t&&void 0!==i&&(t.bs===i.bs&&i.Th===t.Th)}r();var o2=new class extends Ne{L2t(t){this.w3t=t}O2t(){return this.w3t}U2t(){return this.y3t}r3t(){switch(this.A3t.getCastState()){case cast.framework.CastState.CONNECTED:return Yr.CONNECTED;case cast.framework.CastState.CONNECTING:return Yr.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return Yr.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return Yr.UNAVAILABLE}}async VY(t,i){await P$(i),this.A3t=cast.framework.CastContext.getInstance(),this.A3t.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.RJ),this.A3t.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async z2t(){try{const t=await this.A3t.requestSession();if(t)throw t}catch(t){throw new Vs(wn(t))}}X2t(t){var i;return null==(i=this.w3t)?void 0:i.onStart(t)}t3t(t){var i;return null==(i=this.w3t)?void 0:i.onStop(t)}Q2t(t){var i;return null==(i=this.w3t)?void 0:i.onJoin(t)}$2t(t){var i;return null==(i=this.w3t)?void 0:i.onLeave(t)}e3t(t){this.A3t.endCurrentSession(t)}constructor(...t){super(...t),this.A3t=void 0,this.y3t=void 0,this.w3t=void 0,this.RJ=()=>{const t=this.r3t();this.y3t=t===Yr.CONNECTED?new J0(this.A3t.getCurrentSession()):void 0,this.So(new t1(t))}}},a2=new class{get Ca(){return this.hu||(this.hu=function(t){return{initialize(i){const e=t.VY(RS(i));return e.catch(Ct),e},startSession(){const i=t.z2t();return i.catch(Ct),i},endSession(){t.b3t()}}}(this)),this.hu}async VY(t){this.q2t||(this.q2t=this.S3t(t)),await this.q2t}async S3t(t){await this.F2t.VY(t)}async z2t(){if(!this.q2t)throw new m("Chromecast must be initialized before starting a session");await this.q2t,this.F2t.U2t()||await this.F2t.z2t()}T3t(){this.F2t.e3t(!1)}b3t(){this.F2t.e3t(!0)}constructor(t){this.q2t=void 0,this.hu=void 0,this.F2t=void 0,this.F2t=t}}(o2),u2={get chromecast(){return a2.Ca}};Pu(t=>new h2(t,o2),HF.ant),r(),r(),r(),r(),r(),r(),r();var c2=class{k3t(t,i,e,s){t.Uz.forEach(t=>{if(!this.E3t(t.P3t)){const n=t.x3t(i,e,s);n&&this.I3t(n)}})}E3t(t){return this.R3t.get(t)}I3t(t){this.R3t.set(t.C3t,t),this.D3t.set(t.C3t,t.B3t),this.N3t.au(t.M3t)}Ent(t){this.D3t.has(t.C3t)||(this.D3t.set(t.C3t,t),this.N3t.au(t.M3t))}L3t(t){return this.D3t.forEach(t)}O3t(t){return this.R3t.forEach(t)}F3t(t){let i=!1;return this.R3t.forEach(e=>{i=e.F3t(t)||i}),i}async kn(){const t=[];this.R3t.forEach(i=>t.push(i.kn())),this.D3t.forEach(i=>t.push(i.kn())),await Promise.all(t),this.R3t.clear(),this.D3t.clear()}constructor(t){this.N3t=void 0,this.R3t=void 0,this.D3t=void 0,this.N3t=t,this.R3t=qh(),this.D3t=qh()}};r();var Pa=class t extends Oi{xa(){return new d2(this.QJt,this.Py,this.Ky,this.Mc)}static U3t(i){return new t(Ic.GENERAL,i.Py,i.YJt)}static V3t(i,e){return new t(i.QJt,i.message,i.YJt,e)}constructor(t,i,e,s){super("H3t"),this.QJt=void 0,this.Py=void 0,this.Ky=void 0,this.Mc=void 0,this.QJt=t,this.Py=i,this.Ky=e,this.Mc=s}},d2=class extends wp{constructor(t,i,e,s){super("aderror"),this.problemType=void 0,this.message=void 0,this.errorCode=void 0,this.source=void 0,this.problemType=t,this.message=i,this.errorCode=e,this.source=s}},l2=class extends Sc{get W3t(){return this.q3t}get zc(){let t=!1;return this.z3t(i=>{t=t||i.G3t}),t}get mnt(){const t=[];return this.z3t(i=>{const e=i.mnt;e.length&&t.push(...e)}),t}get ynt(){let t=null;return this.z3t(i=>{null!=t||(t=i.ynt)}),t}get Ant(){const t=[];return this.z3t(i=>{t.push(...i.Ant)}),t}get bnt(){const t=[];return this.z3t(i=>{t.push(...i.bnt)}),t}knt(t){this.z3t(i=>{i.knt(t)})}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=iU(this)}M6(t,i,e){try{this.X3t=e;const s=Qh.Ng.Wz(t);if(s.P3t===mt.ont)return;const n=this.q3t.E3t(s.P3t);if(!n)throw new Co(Ic.ADBLOCK,void 0,"Ads could not be loaded.");i!==iu.pnt&&this.n7||this.Q3t.j3t(n),s.M6(t,i,n,this.X3t)}catch(i){0,this.So(Pa.V3t(i,t.sources))}}rD(){this.z3t(t=>{t.rD()})}Snt(t){this.z3t(i=>{i.Snt(t)})}Ent(t){this.q3t.Ent(t)}Tnt(t,i){return this.Q3t.Tnt(t,i)}K3t(t){this.q3t.O3t(i=>{i.K3t(t)})}F3t(t){return this.q3t.F3t(t)}z3t(t){return this.q3t.L3t(t)}qx(){this.q3t.O3t(t=>t.qx())}async hr(){this.n7=!1;const t=[];this.q3t.O3t(i=>t.push(i.Xx())),await Promise.all(t)}async kn(){this.Vo(),await this.q3t.kn(),this.Q3t.mn(d.uo,this.Wet),this.mn("H3t",this.Y3t)}constructor(t){super(),this.Q3t=void 0,this.q3t=void 0,this.X3t=!1,this.n7=!1,this.hu=void 0,this.Y3t=t=>{if(!this.X3t)return;if(t.Ky===Wi.VAST_NO_ADS_AFTER_WRAPPER||t.Ky===Wi.VAST_EMPTY_RESPONSE)return;const i=new Nk(Bk.ADVERTISEMENT_ERROR,t.Py),e=new Ga(Vo.AD_BLOCKER_DETECTED,t.Py+" Turn off your AdBlocker and try again.",i);this.Q3t.qq(e)},this.Wet=()=>{this.n7=!0},this.Q3t=t,this.q3t=new c2(this),this.wn("H3t",this.Y3t),t.wn(d.uo,this.Wet)}};r(),r(),r();var Le=class extends g1{get Jc(){return this.qc}get p0t(){return this.J3t}set p0t(t){this.J3t=t}get m0t(){return this.Z3t}set m0t(t){this.Z3t=t}set _Ot(t){this.UZt=t}get _Ot(){return this.UZt}get X$t(){return this.$3t}t4t(){this.i4t=!0}e4t(t){this.qc.push(t),this.i4t=!1}s4t(t){oi(this.qc,t)}get _x(){return this.i4t}constructor(t){super(),this.UZt=void 0,this.qc=void 0,this.J3t=void 0,this.Z3t=void 0,this.$3t=void 0,this.i4t=void 0,this.UZt=t,this.qc=[],this.J3t=-1,this.Z3t=-1,this.$3t=void 0,this.i4t=!1}},f2=class extends Le{get MZt(){return this.n4t}get Ant(){return this.r4t}er(t){void 0!==t.maxDuration&&(this.J3t=t.maxDuration),void 0!==t.customData&&(this.$3t=t.customData)}h4t(t){const i=this.qc.indexOf(t);return i>=0&&i<this.qc.length-1}e4t(t){super.e4t(t),this.r4t.push(t)}o4t(t){oi(this.r4t,t)}s4t(t){super.s4t(t),oi(this.r4t,t)}constructor(t,i){super(i.timeOffset),this.n4t=void 0,this.r4t=[],this.n4t=t,this.er(i)}};r(),r();var bi=function(t){return t.hZt="linear",t.a4t="nonlinear",t.pk="unknown",t}({}),v2=function(t){return t.NONE="none",t.READY="ready",t}({}),Ps=class extends _1{u4t(t,i,e,s,n,r){this.hS=t,this.sb=i,this.hb=e,this.WA=s,this.iYt=n,this.ZYt=r,this.c4t="ready"}get d4t(){return this.c4t}get tYt(){return this.iYt}get ct(){return this.WA}wnt(){var t;return null!=(t=this.hu)?t:this.hu=this.xa()}get Mi(){return this.hb}get o(){return this.hS}get JYt(){return this.ZYt}get Ti(){return this.sb}get l4t(){return this.f4t}get AYt(){return this.bYt}get GKt(){return this.XKt}get CKt(){return this.XYt}get X$t(){return this.$3t}get v4t(){return this._4t}N0t(){}F0t(){return""}O0t(){return this.g4t}constructor(t,i){super(),this.f4t=void 0,this.od=void 0,this.hu=void 0,this.hS=void 0,this.ZYt=void 0,this.sb=void 0,this.hb=void 0,this.WA=void 0,this.g4t=void 0,this.bYt=void 0,this.XKt=void 0,this.XYt=void 0,this.iYt=void 0,this.c4t=void 0,this.$3t=void 0,this._4t=void 0,this.f4t=i,this.hS=void 0,this.ZYt=void 0,this.sb=void 0,this.hb=void 0,this.WA=void 0,this.XYt=[],this.iYt=[],this.c4t="none",this.$3t=void 0,this._4t=!1,this.od=t}};function _a(t){return{get adSystem(){return t.N0t()},get readyState(){return t.d4t},get adBreak(){return t.od.wnt()},get duration(){return t.ct},get companions(){return t.tYt.map(t=>t.Ca)},get resourceURI(){return t.O0t()},get clickThrough(){return t.AYt},get width(){return t.Ti},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t.l4t)},get height(){return t.Mi},get id(){return t.o},get skipOffset(){return t.JYt},get integration(){return t.MZt},get creativeId(){return t.GKt},get universalAdIds(){return t.CKt},get customData(){return t.X$t},get isSlate(){return t.v4t}}}r();var _2=class{get lYt(){return this.fYt}get wYt(){return this.yYt}get p4t(){return this.m4t}get AYt(){return this.bYt}get Mi(){return this.hb}get LJt(){return this.g4t}get Ti(){return this.sb}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get adSlotId(){return t.lYt},get altText(){return t.wYt},get contentHTML(){return t.p4t},get clickThrough(){return t.AYt},get height(){return t.Mi},get resourceURI(){return t.LJt},get width(){return t.Ti}}}(this)}w4t(t){if(t.AYt&&t.LJt)return;const i=function(t){try{return s0(t,"text/html")}catch(t){return}}(t.p4t);i&&(this.bYt=g2(i,"a","href"),this.g4t=g2(i,"img","src"))}constructor(t){var i;this.hu=void 0,this.sb=void 0,this.hb=void 0,this.m4t=void 0,this.fYt=void 0,this.bYt=void 0,this.g4t=void 0,this.yYt=void 0,this.fYt=t.lYt,this.sb=t.Ti,this.hb=t.Mi,this.m4t=t.p4t,this.bYt=t.AYt,this.g4t=t.LJt,this.yYt=null!=(i=t.wYt)?i:"",this.w4t(t)}};function g2(t,i,e){const s=t.querySelector(i);return s&&s.getAttribute(e)||""}var p2=class extends Ps{get MZt(){return this.n4t}get y4t(){return this.A4t}set y4t(t){this.A4t=t}xa(){return _a(this)}er(t){t.id&&(this.hS=t.id),void 0!==t.skipOffset&&(this.ZYt=t.skipOffset),void 0!==t.width&&(this.sb=t.width),void 0!==t.height&&(this.hb=t.height),void 0!==t.duration&&(this.WA=t.duration),void 0!==t.readyState&&(this.c4t=function(t){return"ready"===t?v2.READY:v2.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.g4t=t.resourceURI),void 0!==t.clickThrough&&(this.bYt=t.clickThrough),void 0!==t.companions&&(this.iYt=[...t.companions].map(m2)),void 0!==t.creativeId&&(this.XKt=t.creativeId),void 0!==t.universalAdIds&&(this.XYt=t.universalAdIds),void 0!==t.customData&&(this.$3t=t.customData)}constructor(t,i,e){super(e,function(t){return"linear"===t?bi.hZt:"nonlinear"===t?bi.a4t:bi.pk}(i.type)),this.n4t=void 0,this.A4t=0,this.n4t=t,this.er(i)}};function m2(t){const i={lYt:t.adSlotId,wYt:t.altText,p4t:t.contentHTML,qT:void 0,AYt:t.clickThrough,Mi:t.height,LJt:t.resourceURI,Ti:t.width};return new _2(i)}r();var da=class extends du{xa(){return new w2(this.Int.wnt(),this.b4t)}get b4t(){return this.S4t}constructor(t,i){super("T4t",t),this.S4t=void 0,this.S4t=i}},w2=class extends vu{constructor(t,i){super("adskip",t),this.playedPercentage=void 0,this.playedPercentage=i}};r();var y2=class extends Gt{xa(){return new A2(this.od.wnt())}constructor(t){super("k4t",t)}},A2=class extends Re{constructor(t){super("updateadbreak",t)}};r();var b2=class extends Gt{xa(){return new S2(this.od.wnt())}constructor(t){super("E4t",t)}},S2=class extends Re{constructor(t){super("adbreakchange",t)}};r();var _s=class extends du{xa(){return new T2(this.Int.wnt(),this.currentTime)}constructor(t,i){super("P4t",t),this.currentTime=void 0,this.currentTime=i}},T2=class extends vu{constructor(t,i){super("adfirstquartile",t),this.currentTime=void 0,this.currentTime=i}};r();var ks=class extends du{xa(){return new k2(this.Int.wnt(),this.currentTime)}constructor(t,i){super("x4t",t),this.currentTime=void 0,this.currentTime=i}},k2=class extends vu{constructor(t,i){super("admidpoint",t),this.currentTime=void 0,this.currentTime=i}};r();var oe=class extends du{xa(){return new E2(this.Int.wnt(),this.currentTime)}constructor(t,i){super("I4t",t),this.currentTime=void 0,this.currentTime=i}},E2=class extends vu{constructor(t,i){super("adthirdquartile",t),this.ad=void 0,this.currentTime=void 0,this.ad=t,this.currentTime=i}},P2=class{get Jc(){return this.qc}get A0t(){return this.X0t}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get integration(){return t.MZt},get ads(){return t.Jc.map(t=>t.wnt())},get adBreaks(){return t.A0t.map(t=>t.wnt())},createAd:(i,e)=>t.R4t(i,e?t.C4t(e):void 0).wnt(),updateAd(i,e){t.D4t(t.B4t(i),e)},updateAdProgress(i,e){const s=ur(Number(e),0,1);t.N4t(t.B4t(i),s)},beginAd(i){t.o4t(t.B4t(i))},endAd(i){t.M4t(t.B4t(i))},skipAd(i){t.p$t(t.B4t(i))},removeAd(i){t.s4t(t.B4t(i))},createAdBreak:i=>t.L4t(i).wnt(),updateAdBreak(i,e){t.O4t(t.C4t(i),e)},removeAdBreak(i){t.F4t(t.C4t(i))},removeAllAds(){t.U4t()},error(i){t.V4t(i)},fatalError(i,e){const s=e?Number(e):void 0;t.H4t(i,s)}}}(this)}get rB(){return this.h8}set rB(t){this.h8=t}get G3t(){return this.W4t.some(t=>t.l4t===bi.hZt)}get C3t(){return this.MZt}get mnt(){return this.W4t}get ynt(){var t;return null!=(t=this.G0t)?t:null}get Ant(){return De(this.X0t,t=>t.Ant)}get bnt(){return this.X0t.filter(t=>!t._x)}rD(){var t;if(0===this.W4t.length)return;const i=this.W4t[0];(null==(t=this.h8)?void 0:t.skipAd)?this.h8.skipAd(i.wnt()):this.p$t(i)}Snt(t){}knt(t){}R4t(t,i){var e;const s=null!=i?i:this.q4t({timeOffset:null!=(e=t.timeOffset)?e:0}),n=new p2(this.MZt,t,s);return s.e4t(n),this.qc.push(n),this.M3t.So(new Qa(n)),n}D4t(t,i){t.er(i),this.M3t.So(new T1(t))}N4t(t,i){if(!pi(this.W4t,t))throw new m("Cannot update ad progress on a non-started ad");const e=t.y4t,s=_.max(e,i);t.y4t=s;const n=this.Q3t.LP();e<.25&&s>=.25&&this.M3t.So(new _s(t,n)),e<.5&&s>=.5&&this.M3t.So(new ks(t,n)),e<.75&&s>=.75&&this.M3t.So(new oe(t,n))}o4t(t){pi(this.W4t,t)||(this.W4t.push(t),t.od.o4t(t),this.z4t(t.od),this.M3t.So(new dc(t,this.Q3t.LP())))}p$t(t){if(!pi(this.W4t,t))return;const i=t.od.h4t(t);this.M3t.So(new da(t,t.y4t)),this.G4t(t,i)}M4t(t){if(!pi(this.W4t,t))return;const i=t.od.h4t(t);this.M3t.So(new bc(t,this.Q3t.LP())),this.G4t(t,i)}s4t(t){if(!pi(this.qc,t))return;const i=t.od.h4t(t);oi(this.qc,t),t.od.s4t(t),this.M3t.So(new b2(t.od)),this.G4t(t,i)}L4t(t){const i=new f2(this.MZt,t);return this.X0t.push(i),this.M3t.So(new nU(i)),i}O4t(t,i){t.er(i),this.M3t.So(new y2(t))}F4t(t){if(pi(this.X0t,t)){for(const i of t.Jc.slice())this.s4t(i);oi(this.X0t,t),this.M3t.So(new Uu(t))}}U4t(){for(const t of this.X0t.slice())this.F4t(t)}V4t(t){this.M3t.So(new Pa(Ic.GENERAL,t.message))}H4t(t,i){const e=new Ga(null!=i?i:Vo.AD_ERROR,t.message,t);this.Q3t.qq(e)}X4t(t){return Jr(this.X0t,i=>i._Ot===t)}q4t(t){var i;return null!=(i=this.X4t(t.timeOffset))?i:this.L4t(t)}G4t(t,i){oi(this.W4t,t);const e=t.od;0!==this.W4t.length||this.G0t!==e||i||(e.t4t(),this.z4t(void 0))}z4t(t){this.G0t!==t&&(void 0!==this.G0t&&this.M3t.So(new Fa(this.G0t)),this.G0t=t,void 0!==t&&this.M3t.So(new aU(t)))}B4t(t){const i=Jr(this.qc,i=>i.wnt()===t);if(void 0===i)throw new m('Invalid ad for integration "'+this.MZt+'"');return i}C4t(t){const i=Jr(this.X0t,i=>i.wnt()===t);if(void 0===i)throw new m('Invalid ad break for integration "'+this.MZt+'"');return i}async Ta(t,i){var e;if(ii(i),null==(e=this.h8)?void 0:e.setSource){let i=await Promise.resolve(this.h8.setSource(t));return qo(i)&&(i=t),Cn(i,this.Q3t.Cd)}return t}async j4t(){var t;(null==(t=this.h8)?void 0:t.resetSource)?await Promise.resolve(this.h8.resetSource()):this.U4t()}async kn(){var t;(null==(t=this.h8)?void 0:t.destroy)&&await Promise.resolve(this.h8.destroy()).catch(Ct),this.U4t(),this.z4t(void 0),this.h8=void 0,this.M3t.kn()}constructor(t,i){this.MZt=void 0,this.Q3t=void 0,this.h8=void 0,this.M3t=new Sc,this.qc=[],this.X0t=[],this.W4t=[],this.G0t=void 0,this.hu=void 0,this.MZt=t,this.Q3t=i}};r();var x2=class{destroy(){this.removeAdListeners()}get player(){return this.oa}set player(t){this.oa&&this.removeAdListeners(),this.oa=t,this.addAdListeners()}get inAdBreak(){return this.Q4t}addAdListeners(){var t,i;null==(t=this.oa.Jc)||t.wn("Dnt",this.Ed),null==(i=this.oa.Jc)||i.wn("Cnt",this.Bd)}removeAdListeners(){var t,i;null==(t=this.oa.Jc)||t.mn("Dnt",this.Ed),null==(i=this.oa.Jc)||i.mn("Cnt",this.Bd)}constructor(t){this.oa=void 0,this.J8=void 0,this.Q4t=!1,this.Ed=t=>{1!==this.oa.ux&&(this.J8=this.oa.ux,this.oa.ux=1),this.Q4t=!0},this.Bd=t=>{this.Q4t=!1,void 0!==this.J8&&(this.oa.ux=this.J8,this.J8=void 0)},this.oa=t,this.addAdListeners()}},I2=class extends In{Zst(){return this.K4t}get Y4t(){return this.J4t}qx(){this.d3t.qx(),this.K4t.qx()}Gx(){void 0===this.JW?(void 0!==this.Z4t&&this.$4t(this.Z4t),super.Gx()):this.So(new Pi(this.JW))}async Ta(t,i){ii(i);let e=t;if(e)for(const t of this.t5t)e=await t.Ta(e,i);if(await super.Ta(e,i),ii(i),null==e?void 0:e.ads){const t=Boolean(e.blockContentIfAdError);this.K4t.K3t(e.playAdsAfterTime);for(const i of e.ads)this.K4t.M6(i,iu.pnt,t)}}async Xx(){this.JW=void 0,this.Lz=void 0,await this.K4t.hr(),this.i3t(),await super.Xx();for(const t of this.t5t)await t.j4t()}$4t(t){this.i5t=this.oa.ux;const i=this.oa.Mx,e=this.oa.$P;t.Ox(i),t.ix(e),this.J4t=t,this.Z4t=void 0,this.tO(t)}j3t(t){void 0===this.J4t&&(this.Z4t=t)}i3t(){this.Z4t=void 0,void 0!==this.J4t&&(this.d3t.ux=this.i5t,this.d3t.Mx=this.Mx,this.d3t.$P=this.$P,this.tO(this.d3t),this.J4t=void 0)}HP(){var t;return null!=(t=this.Lz)?t:super.HP()}qP(){var t;return null!=(t=this.JW)?t:super.qP()}qq(t){void 0===this.qP()&&(this.JW=t,this.Lz=P(t),this.So(new Pi(t)))}$x(t){return void 0===this.J4t&&this.K4t.F3t(t)}Tnt(t,i){try{const e=new P2(t,this);e.rB=i(e.Ca),this.K4t.Ent(e),this.t5t.push(e),t!==ru.UPLYNK&&(this.e5t=new x2(this))}catch(i){this.K4t.So(new Pa(Ic.GENERAL,'Error while constructing ad integration "'+t+'": '+i+'"'))}}vx(t){var i;(null==(i=this.e5t)?void 0:i.inAdBreak)||super.vx(t)}async kn(){var t;for(const t of this.t5t)await t.kn().catch(Ct);await this.K4t.kn(),this.i3t(),null==(t=this.e5t)||t.destroy(),this.e5t=void 0,await super.kn()}constructor(t,i){super(t),this.K4t=void 0,this.d3t=void 0,this.t5t=[],this.J4t=void 0,this.Z4t=void 0,this.JW=void 0,this.Lz=void 0,this.e5t=void 0,this.i5t=1,this.d3t=t,this.K4t=new l2(this),this.K4t.W3t.k3t(i,t,this,t.Cd)}};Pu(t=>new I2(t,Qh.Ng),HF.rnt),r(),r(),r();var R2=Qt.ru&&Qt.Q_<12,C2=class extends Oc{get MP(){return this.LP()}set MP(t){this.OP(t)}Hst(){return this.oa.Hst()}get ct(){return this.Nd()}get zP(){return this.ZL}get jP(){return this.JL}get Sx(){return this.Tx()}get Fx(){return this.rq}get M3t(){return this.s5t}get ht(){return this.YL}get G3t(){return this.Q3t.Y4t===this}RP(){return ve.iL()._s()}DP(){}BP(t){}lx(){return 1}vx(t){}gx(){return new ve([0,this.MP])._s()}Ex(){return!1}Ix(){return this.Gl}Dx(){return this.$L}ds(){return this.Hx().ds}Hx(){return this.ha}Ea(){}async kn(){this.Vo(),this.YL.kn(),this.$L.kn(),this.Gl.kn(),this.s5t.kn(),this.oa.mn(d.xw,this.Rs)}n5t(){R2&&this.r5t(),this.G3t||this.Q3t.$4t(this)}i3t(){this.G3t&&(R2&&this.h5t(),Qt.Tg&&this.xe.querySelectorAll("video[src]").forEach(t=>{t.src=""}),zd.Zs.Ep&&this.oa.Jx(),this.Q3t.i3t())}r5t(){this.o5t||(s.addEventListener("blur",this.a5t),s.addEventListener("focus",this.u5t),this.o5t=!0)}h5t(){s.removeEventListener("blur",this.a5t),s.removeEventListener("focus",this.u5t),this.o5t=!1}c5t(){requestAnimationFrame(()=>this.oa.we())}constructor(t,i){super(t,!0),this.Q3t=void 0,this.o5t=void 0,this.$L=void 0,this.YL=void 0,this.Gl=void 0,this.ZL=void 0,this.JL=void 0,this.s5t=void 0,this.ha=void 0,this.rq=void 0,this.a5t=void 0,this.u5t=void 0,this.Q3t=i,this.o5t=!1,this.$L=new rs,this.YL=new rs,this.Gl=new cc,this.ZL=new kS,this.JL=new Ek,this.s5t=new Sc,this.ha=new ls,this.rq=new XI,this.a5t=()=>{this.oa.be()},this.u5t=()=>{this.c5t()},this.oa.wn(d.xw,this.Rs)}};r(),r();var D2=0,B2="theoplayer-wrapper",N2=class t{get d5t(){return this.l5t}get f5t(){return this.v5t}get _5t(){return 1===this.v5t.length&&F0(this.v5t[0].sources.type)}get g5t(){return this.p5t}m5t(t){const i=this.w5t===t.timeOffset;return!this.y5t&&i}get A5t(){return this.b5t}get S5t(){return H0(this.T5t)&&!this.y5t}get w5t(){return this.T5t}get dd(){return this.k5t}E5t(){if(S(this.k5t)){let t=this.w5t;if(void 0===t)return void(this.k5t=0);if("string"==typeof t&&H0(t)){const i=this.oa.Nd();S(i)||i===1/0||(t=U$(t)*i)}S(t)||(this.k5t=t)}}get P5t(){return this.x5t}set P5t(t){this.x5t=t}get I5t(){return this.R5t}set I5t(t){this.R5t=t,this.C5t=!1}get D5t(){return this.B5t}N5t(t){this.B5t.push(t)}M5t(){if(!this.y5t){let t,i,e=this.l5t===iu.pnt&&void 0===this.L5t&&1===this.v5t.length;const s=this.v5t[0];if(!e&&1===this.v5t.length){const t=zd.Dh(s.sources.src).searchParams.get("output");t&&t.toLowerCase().indexOf("vmap")>-1&&(e=!0,void 0!==this.L5t&&Ye("Do not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included."))}if(F0(s.sources.type)||e)t=s.sources.src;else{if(S(this.oa.Nd())&&"end"===this.O5t())return;i=this.F5t()}let n=this.oa.Nd();(S(n)||n===1/0)&&(n=-3),this.y5t={U5t:this.oa.xe.offsetWidth,V5t:this.oa.xe.offsetHeight,H5t:this.oa.xe.offsetWidth,W5t:this.oa.xe.offsetHeight,q5t:this.Bst,z5t:this.Tz,G5t:t,X5t:i,j5t:s.omidAccessModeRules,Q5t:n}}return this.y5t}F5t(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.v5t.map((t,i)=>this.K5t(t.sources,i)).join("\n")+"</vmap:VMAP>"}K5t(t,i){const e=this.O5t(),s=t.src;return'<vmap:AdBreak timeOffset="'+e+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.jI+"-"+i+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+B2+"-"+this.jI+"-"+i+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}O5t(){if(0===this.w5t)return"start";if(this.w5t===1/0)return"end";const t=this.w5t;if("string"==typeof t&&H0(t)){const i=U$(t)*this.oa.Nd();return Ha.DZt(i)}return Ha.DZt(this.w5t||0)}Y5t(t){this.v5t.push(t)}J5t(t){const i=B2+"-"+this.jI+"-";for(const e of t)if(Vh(e,i)){const t=Number(e.slice(i.length));if(!S(t)&&t>=0&&t<this.v5t.length)return t}return-1}static Z5t(t){if(void 0!==t)return-1===t?1/0:t}$5t(){this.b5t=!0}get cO(){return this.Bst}set cO(t){this.Bst=t}get $P(){return this.Tz}set $P(t){this.Tz=t}constructor(i,e,s,n){this.l5t=void 0,this.oa=void 0,this.p5t=void 0,this.T5t=void 0,this.y5t=void 0,this.k5t=void 0,this.x5t=void 0,this.R5t=void 0,this.C5t=void 0,this.b5t=void 0,this.B5t=void 0,this.Bst=void 0,this.Tz=void 0,this.v5t=void 0,this.L5t=void 0,this.jI=void 0,this.l5t=e,this.oa=s,this.p5t=n,this.k5t=NaN,this.x5t=!1,this.R5t=!1,this.b5t=!1,this.B5t=[],this.Bst=!1,this.Tz=!1,this.v5t=[],this.jI=++D2,this.L5t=i.timeOffset,this.T5t=t.Z5t(this.L5t),this.E5t(),this.v5t.push(i)}};r();var M2=class{get t6t(){return this.i6t.t6t}get e6t(){return this.i6t.e6t}get Ant(){return this.i6t.Ant}get t(){return this.i6t.t}K3t(t){this.s6t=t}n6t(t){return!(this.t6t&&!this.t6t.A5t&&"nonlinear"!==this.e6t.l4t)||this.t6t.dd>t.dd&&this.t6t.dd!==t.dd}r6t(t){if(t.length)return t.sort((t,i)=>t.dd-i.dd)[0]}h6t(){if(this.Ant.length)return this.r6t(this.o6t(this.t.LP()))}a6t(){if(!(void 0!==this.s6t&&this.s6t>=0))return this.Ant.filter(t=>!t.P5t&&0===t.dd&&t!==this.t6t)[0]}o6t(t){if(!this.u6t&&(this.u6t=!this.Ant.some(t=>S(t.dd)),!this.u6t))return[];const i=this.Ant.filter(i=>!i.P5t&&(i._5t||!S(i.dd)&&t<=i.dd));return void 0===this.s6t?i:i.filter(t=>t._5t||void 0===t.w5t||t.dd>this.s6t)}constructor(t){this.i6t=void 0,this.s6t=void 0,this.u6t=!1,this.i6t=t,this.s6t=void 0}},L2=function(t){return t[t.c6t=0]="c6t",t[t.d6t=1]="d6t",t[t.l6t=2]="l6t",t}({}),O2=class{qx(){this.ko=!0,this.f6t&&this.v6t()}_6t(t,i){this.g6t(t,i);const e=Jr(this.Ant,i=>i.m5t(t));if(e)e.Y5t(t);else{var s;const e=new N2(t,i,this.oa,null==(s=t.replaceContent)||s);this.r4t.push(e),2===this.p6t&&this.m6t.L4t(e.dd,e,e.w5t),this.w6t(i,e)}}get e6t(){return this.y6t}get Ant(){return this.r4t}get t(){return this.oa}get RGt(){return Boolean(this.Dpt)}get p6t(){return this.A6t}b6t(){if(oi(this.Ant,this.t6t),this.t6t){for(const t of this.t6t.D5t)this.m6t.S6t();this.t6t=void 0}}T6t(){for(const t of this.r4t)for(const i of t.D5t)this.m6t.k6t(i,!0);Yo(this.r4t)}async E6t(t){this.b6t(),this.P6t=!0,this.t6t=t,this.x6t=t.dd,this.Dpt=this.I6t(t),await this.Dpt,this.Dpt=void 0}async I6t(t){await this.R6t(t);const i=t.M5t();if(!i)return this.P6t=!1,void(this.t6t=void 0);const e=this.y6t.C6t(i);t.P5t=!0;try{await e,t.d5t===iu.gnt&&this.y6t.D6t()}catch(t){0,this.t6t=void 0,await this.v6t()}}async R6t(t){if(t.$P=this.Q3t.$P,!this.Q3t.cO)return void(t.cO=!1);switch(await this.Mst.HK(this.Q3t.$P)){case"all":case"muted":t.cO=!0;break;case"none":t.cO=!1}}B6t(){var t;return null!=(t=this.N6t.a6t())?t:this.N6t.h6t()}async v6t(){if(this.t6t&&!this.t6t.A5t)return this.Dpt;const t=this.B6t();t&&await this.E6t(t)}get t6t(){return this.M6t}set t6t(t){this.M6t=t}get P6t(){return this.L6t}set P6t(t){this.L6t=t}hr(){this.b6t(),Yo(this.r4t),this.x6t=0,this.t6t=void 0,this.Dpt=void 0,this.P6t=!1}I5t(){this.P6t=!1,this.t6t&&(this.t6t.I5t=!0)}async w6t(t,i){t===iu.gnt&&this.ko&&this.N6t.n6t(i)&&!this.RGt&&"linear"!==this.y6t.l4t&&(!this.t6t||this.t6t&&this.t6t.P5t)&&(await Promise.resolve(),await this.E6t(i))}$5t(){this.t6t&&this.t6t.$5t()}get O6t(){if(this.RGt||this.P6t)return!1;if(this.t6t&&!this.t6t.A5t)return!1;return!!this.r4t.filter(t=>this.t6t!==t).length&&Boolean(this.B6t())}async F6t(){if(!this.O6t)return void 0;const t=this.B6t();t&&await this.E6t(t)}g6t(t,i){const e=t.sources.type,s=i===iu.pnt&&void 0===t.timeOffset,n=F0(e)||s?1:2;n!==this.A6t&&(this.A6t=n,this.T6t(),this.y6t.w0t&&!this.RGt&&"linear"!==this.y6t.l4t&&(this.y6t.w0t.zg(),this.t6t=void 0,this.Dpt=void 0),this.x6t=0,this.f6t=!0)}K3t(t){this.N6t.K3t(t)}kn(){this.oa.mn(d.Rw,this.uX)}constructor(t,i,e,s,n){this.y6t=void 0,this.r4t=void 0,this.f6t=void 0,this.ko=void 0,this.oa=void 0,this.Q3t=void 0,this.M6t=void 0,this.x6t=void 0,this.N6t=void 0,this.Mst=void 0,this.A6t=0,this.Dpt=void 0,this.m6t=void 0,this.L6t=!1,this.uX=()=>{const t=this.r4t.filter(t=>t.S5t);for(const i of t){i.E5t();const t=i.w5t;this.m6t.U6t(t,i.dd)}this.ko&&this.O6t&&this.v6t()},this.r4t=[],this.y6t=t,this.ko=!1,this.f6t=!1,this.oa=i,this.Q3t=e,this.t6t=void 0,this.x6t=0,this.N6t=new M2(this),this.Mst=s,this.m6t=n,this.oa.wn(d.Rw,this.uX)}};r(),r();var Ce=function(t){return t.V6t="contentResumeRequested",t.H6t="contentPauseRequested",t.W6t="click",t.Rw="durationChange",t.q6t="expandedChanged",t.z6t="start",t.G6t="impression",t.Gz="pause",t.X6t="resume",t.j6t="adProgress",t.Q6t="adBuffering",t.K6t="firstQuartile",t.mJt="midpoint",t.Y6t="thirdQuartile",t.wJt="complete",t.J6t="userClose",t.Z6t="linearChanged",t.$6t="loaded",t.t8t="adCanPlay",t.i8t="adMetadata",t.e8t="adBreakReady",t.s8t="interaction",t.n8t="allAdsCompleted",t.r8t="skip",t.h8t="skippableStateChanged",t.o8t="log",t.a8t="viewableImpression",t.u8t="volumeChange",t.c8t="mute",t}({});r();var F2=function(t){return t.d8t="adError",t}({});r();var jn=function(t){return t[t.l8t=-1]="l8t",t[t.f8t=-1]="f8t",t[t.v8t=-1]="v8t",t[t._8t=101]="_8t",t[t.g8t=102]="g8t",t[t.p8t=200]="p8t",t[t.m8t=201]="m8t",t[t.w8t=202]="w8t",t[t.y8t=300]="y8t",t[t.A8t=301]="A8t",t[t.b8t=302]="b8t",t[t.S8t=303]="S8t",t[t.T8t=400]="T8t",t[t.k8t=402]="k8t",t[t.E8t=403]="E8t",t[t.P8t=405]="P8t",t[t.x8t=500]="x8t",t[t.I8t=501]="I8t",t[t.R8t=-1]="R8t",t[t.C8t=503]="C8t",t[t.D8t=602]="D8t",t[t.B8t=900]="B8t",t[t.N8t=901]="N8t",t[t.M8t=1005]="M8t",t[t.L8t=1007]="L8t",t[t.O8t=1009]="O8t",t[t.F8t=1010]="F8t",t[t.U8t=1011]="U8t",t[t.V8t=1012]="V8t",t[t.H8t=1013]="H8t",t[t.W8t=1020]="W8t",t[t.q8t=1021]="q8t",t[t.z8t=1101]="z8t",t[t.G8t=1204]="G8t",t[t.X8t=1205]="X8t",t[t.j8t=1300]="j8t",t[t.Q8t=-1]="Q8t",t[t.K8t=-1]="K8t",t[t.Y8t=-1]="Y8t",t[t.J8t=-1]="J8t",t}({}),U2=function(t){return t.Z8t="adLoadError",t.$8t="adPlayError",t}({});function V2(t,i){if(t===Ce.j6t){const t=i;return{t7t:t.adBreakDuration,i7t:t.adPosition,MP:t.currentTime,ct:t.duration,e7t:t.totalAds}}return i}function H2(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return U2.Z8t;case google.ima.AdError.Type.AD_PLAY:return U2.$8t}}function W2(t){return Lu(t)&&Qd(t.getVastErrorCode)}function q2(t){const i=t.getInnerError(),e=i&&W2(i)?q2(i):void 0;return{Py:t.getMessage(),YJt:t.getErrorCode(),s7t:t.getVastErrorCode(),Km:H2(t.getType()),n7t:e}}function z2(t){if(it(t))return t}r(),r();var G2=class extends Ne{r7t(t){this.y6t.So(t)}h7t(t){this.y0t=t,this.y0t.wn(F2.d8t,this.o7t),this.y0t.wn(Ce.H6t,this.a7t),this.y0t.wn(Ce.V6t,this.u7t),this.y0t.wn(Ce.n8t,this.c7t),this.y0t.wn(Ce.z6t,this.d7t),this.y0t.wn(Ce.wJt,this.l7t),this.y0t.wn(Ce.r8t,this.f7t),this.y0t.wn(Ce.J6t,this.v7t),this.y0t.wn(Ce.W6t,this._7t),this.y0t.wn(Ce.t8t,this.g7t),this.y0t.wn(Ce.Gz,()=>{this.y6t.hx||(this.y6t.p7t(!0),this.y6t.So(new hl(this.y6t.MP))),this.m7t(!0)}),this.y0t.wn(Ce.X6t,()=>{this.y6t.hx&&(this.y6t.p7t(!1),this.y6t.So(new Tc(this.y6t.MP)))}),this.y0t.wn(Ce.c8t,()=>{const i=t.Lx();i>=0&&this.w7t(i)}),this.y0t.wn(Ce.u8t,()=>{const i=t.Lx();i>=0&&this.w7t(i)}),this.y0t.wn(Ce.i8t,t=>{this.A7t.y7t(t.type)}),this.y0t.wn(Ce.Rw,t=>{t.Int&&this.b7t(t.Int.ct)}),this.y0t.wn(Ce.o8t,async t=>{const i=t.S7t.adError,e=W2(i)?q2(i):void 0;e&&(this.T7t(e)?await this.k7t(t):this.E7t(e)?await this.P7t(e):this.x7t(e)&&this.I7t(e))}),this.y0t.wn(Ce.$6t,t=>{if(t.Int&&(this.y6t.I5t(),this.A7t.R7t(t.Int),this.C7t=0,t.Int.D7t)){var i;const t=this.y6t.Ax,e=mh.VL;this.y6t.i5(e);const s=this.y6t.MP,n=this.y6t.Ax;n!==t&&this.r7t(new G(s,n)),null==(i=this.y0t)||i.Ox(this.y6t.B7t()),this.r7t(new ut(s,e))}}),this.y0t.wn([Ce.Q6t,Ce.G6t,Ce.K6t,Ce.mJt,Ce.Y6t],t=>{t.Int&&this.A7t.N7t(t.Int,t.type,this.y6t.MP)}),this.y0t.wn(Ce.K6t,this.M7t),this.y0t.wn(Ce.j6t,this.L7t)}async switchToPlayerIfNoNextAd(){if(this.y0t){const t=this.y0t.O7t();t&&this.F7t(t)||(this.y6t.O6t()?await this.y6t.F6t():(this.y6t.U7t(),this.oa.hx&&!this.oa.UP&&this.oa.Gx()))}else if(this.y6t.O6t())await this.y6t.F6t();else{const t=this.y6t.hx;this.y6t.U7t(),t||this.oa.Gx()}}F7t(t){const i=t.V7t,e=null==i?void 0:i.e7t;return(null==i?void 0:i.i7t)!==e}vm(){this.y6t.Dc&&(p(this.y6t.Dc),this.y6t.Dc=null)}x7t(t){return t.Km===U2.Z8t}E7t(t){return t.Km===U2.$8t}T7t(t){return t.YJt===jn.O8t}async P7t(t){var i;(this.I7t(t),this.H7t(t))&&(this.y6t.W7t.P6t=!1,null==(i=this.y6t.W7t.t6t)||i.$5t(),await this.switchToPlayerIfNoNextAd())}H7t(t){var i;if(X2(t))return!0;if(this.y6t.Unt)return!1;const e=[jn.T8t,jn.N8t,jn.q8t,jn.X8t];return!(pi(e,t.YJt)||pi(e,null==(i=t.n7t)?void 0:i.YJt))}I7t(t){this.y6t.V4t(t)}async q7t(){this.A7t.S6t(),this.y6t.$5t(),"nonlinear"===this.y6t.l4t&&(this.A7t.z7t(-1,!1),this.y6t.G7t(void 0)),"nonlinear"!==this.y6t.l4t&&"none"!==this.y6t.l4t||this.y6t.O6t()&&await this.y6t.F6t(),this.y6t.X7t(),this.y6t.G3t?this.y6t.i3t():this.j7t()&&this.oa.So(new At(this.oa.LP()))}j7t(){return this.y6t.Q7t&&!this.y6t.K7t&&this.oa.UP}setCountdownTimer(){this.vm(),this.y6t.Dc=v(()=>this.m7t(),250)}async k7t(t){void 0!==t.Int&&(this.y6t.W7t.P6t=!1,this.y6t.$5t(),this.y6t.O6t()?await this.y6t.F6t():this.y6t.p7t(!0))}b7t(t){this.y6t.ct!==t&&t>=0&&(this.y6t.C4(t),this.r7t(new Rs(this.y6t.ct)))}w7t(t){this.y6t.B7t()!==t&&(0===t?this.y6t.Y7t(t,!0,!1):this.y6t.Y7t(t,!1,!1))}async J7t(){this.y6t.Z7t&&void 0!==this.oa.HP()&&(this.$7t=new at,await $e(this.oa.Ta(this.oa.nu(),this.$7t.Yg),this.$7t),this.t9t&&this.oa.OP(this.t9t),this.t9t=void 0)}m7t(t){if(this.y0t){const t=this.y0t.i9t();t>this.y6t.ct&&this.b7t(_.round(t))}const i=this.y6t.MP;(t||!this.y6t.hx&&i!==this.y6t.e9t)&&(this.y6t.So(new Si(i,void 0)),this.y6t.e9t=i)}hr(){this.$7t&&(this.$7t.Zg(),this.$7t=void 0),this.s9t=!1,this.C7t=0}kn(){this.hr(),this.Vo()}constructor(t,i,e){super(),this.y6t=void 0,this.oa=void 0,this.A7t=void 0,this.s9t=void 0,this.$7t=void 0,this.t9t=void 0,this.y0t=void 0,this.C7t=void 0,this.M7t=void 0,this.L7t=void 0,this.o7t=void 0,this.c7t=void 0,this.d7t=void 0,this.l7t=void 0,this.f7t=void 0,this.v7t=void 0,this._7t=void 0,this.g7t=void 0,this.a7t=void 0,this.u7t=void 0,this.y6t=t,this.oa=i,this.A7t=e,this.s9t=!1,this.$7t=void 0,this.t9t=void 0,this.C7t=0,this.M7t=t=>{if(!t.Int||!t.Int.V7t)return;const i=t.Int.V7t;this.A7t.O4t(i._Ot,i.e7t,i.p0t)},this.L7t=t=>{var i,e,s;if(this.C7t>=5)return;this.C7t++;const n=t.S7t;if(!function(t){return Lu(t)&&void 0!==t.t7t&&void 0!==t.e7t}(n))return;const r=null==(s=this.y0t)||null==(e=s.O7t())||null==(i=e.V7t)?void 0:i._Ot;void 0!==r&&this.A7t.O4t(r,n.e7t,n.t7t)},this.o7t=async t=>{t.S7t.n9t&&await this.P7t(t.S7t.n9t)},this.c7t=async()=>{this.s9t=!0,this.y6t.$5t(),await this.u7t()},this.d7t=t=>{if(!t.Int)return;const i=t.Int;this.y6t.G7t(i),this.y6t.be(),this.y6t.r9t(),this.y6t.h9t=!0,this.A7t.o9t(i);const e=i.ct;if(this.b7t(e),i.D7t){const t=this.y6t.MP,i=this.y6t.Ax;this.y6t.i5(mh.WL),this.r7t(new ot(t,i)),this.r7t(new lo(t,i)),this.r7t(new qt(t,i)),this.y6t.hx||this.r7t(new ce(this.y6t.MP)),this.setCountdownTimer(),this.m7t(!0)}else this.y6t.i3t(),this.oa.be(),this.y6t.hx||this.oa.Gx()},this.l7t=t=>{var i;if(!t.Int)return;const e=t.Int;if(this.vm(),this.A7t.z7t(this.y6t.ct,e.D7t),this.y6t.Ax!==mh.VL){const t=mh.VL;this.y6t.i5(t);const i=this.y6t.MP;this.r7t(new G(i,t))}this.b7t(NaN),this.y6t.h9t=!1,null==(i=this.y0t)||i.Ox(this.y6t.B7t())},this.f7t=t=>{t.Int&&(this.l7t(t),this.A7t.f7t(t.Int,this.y6t.MP,this.y6t.ct))},this.v7t=t=>{t.Int&&(this.A7t.z7t(-1,t.Int.D7t),this.y6t.$5t(),!t.Int.D7t&&this.y6t.O6t()&&this.y6t.F6t())},this._7t=t=>{t.Int&&(t.Int.D7t?this.y6t.zx():this.oa.zx())},this.g7t=()=>{var t;(this.y6t.h9t=!0,this.y6t.a9t)&&(null==(t=this.y0t)||t.zx(),this.y6t.a9t=!1)},this.a7t=t=>{var i;if(!t.Int)return;this.y6t.Z7t&&(this.t9t=this.oa.LP(),this.oa.Yx(),this.oa.Vx=!0),this.y6t.u9t=!0;const e=t.Int;this.A7t.Ed(e);const s=e.ct;this.y6t.G7t(e),this.b7t(s),this.y6t.p7t(!1),this.y6t.be(),this.y6t.n5t(),this.y6t.Z7t||this.oa.we(),this.oa.zx(),this.y6t.c9t(e);0===(null==(i=e.V7t)?void 0:i._Ot)||this.y6t.So(new ux(this.y6t.MP))},this.u7t=async t=>{const i=null==t?void 0:t.Int;this.y6t.u9t=!1,"linear"===this.y6t.l4t&&this.A7t.Bd(),i&&i.ct>=0&&this.b7t(i.ct),this.oa.Nd()===1/0&&this.y6t.d9t(),this.y6t.h9t=!1,this.s9t&&await this.q7t(),this.y6t.p7t(!0);try{await this.J7t()}catch(t){return void(D(t)||this.So(new HZ(t)))}if(this.y6t.i3t(),this.y6t.we(),this.oa.UP||this.oa.Gx(),i&&this.y6t.G7t(i),this.y6t.Q7t){if(this.y6t.Z7t){var e;const t=this.oa.Wx(),i=null==(e=this.oa.bt)?void 0:e.src;t&&i&&(t.src=i)}this.y6t.K7t=!0}this.oa.Vx=!1,this.y6t.O6t()&&await this.y6t.F6t()}}};function X2(t){var i,e;return t.s7t===jn.S8t||(null==(i=t.n7t)?void 0:i.s7t)===jn.S8t||t.YJt===jn.O8t||(null==(e=t.n7t)?void 0:e.YJt)===jn.O8t}r(),r();var j2=class extends Le{get MZt(){return mt.V0t}constructor(t,i,e){super(t),this.l9t=void 0,this.f9t=void 0,this.l9t=i,this.f9t=e}};r(),r(),r();var Q2=class extends Ps{set v9t(t){this._9t=t}get v9t(){return this._9t}get MZt(){return mt.so}N0t(){var t;return null==(t=this.g9t)?void 0:t.yKt}get p9t(){var t;return null==(t=this.g9t)?void 0:t.cYt}get GKt(){var t;return null==(t=this.g9t)?void 0:t.GKt}get dB(){var t;return null==(t=this.g9t)?void 0:t.dB}get dq(){var t;return null==(t=this.g9t)?void 0:t.dq}get m9t(){var t,i;return null!=(i=null==(t=this.g9t)?void 0:t.m9t)?i:[]}get w9t(){var t,i;return null!=(i=null==(t=this.g9t)?void 0:t.w9t)?i:[]}get y9t(){var t,i;return null!=(i=null==(t=this.g9t)?void 0:t.y9t)?i:[]}xa(){return function(t,i){return po(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get description(){return i.dB},get apiFramework(){return i.p9t},get creativeId(){return i.GKt},get title(){return i.dq},get wrapperAdIds(){return i.m9t},get wrapperAdSystems(){return i.w9t},get wrapperCreativeIds(){return i.y9t}})}(_a(this),this)}A9t(t){this.g9t=t;const i=K2(t);this.u4t(t.UYt,t.b9t,t.S9t,t.ct,i,-1)}constructor(t,i){super(t,i),this._9t=0,this.g9t=void 0}};function K2(t){return t.IKt.map(t=>new _2(t))}var Y2=class extends Ps{xa(){return function(t,i){return po(t,{get adSystem(){return i.N0t()},get apiFramework(){return i.p9t},get bitrate(){return i.T9t},get contentType(){return i.qT},get creativeId(){return i.GKt},get description(){return i.dB},get mediaUrl(){return i.tJt},get title(){return i.dq},get traffickingParameters(){return i.k9t},get traffickingParametersString(){return i.E9t},get wrapperAdIds(){return i.m9t},get wrapperAdSystems(){return i.w9t},get wrapperCreativeIds(){return i.y9t},get universalAdIds(){return i.CKt}})}(_a(this),this)}A9t(t){this.g9t=t,this.u4t(t.UYt,t.b9t,t.S9t,t.ct,K2(t),t.P9t),this.f4t=t.D7t?bi.hZt:bi.a4t}get MZt(){return mt.V0t}N0t(){return this.g9t?J2(this.g9t.yKt):void 0}get p9t(){return this.g9t?J2(this.g9t.cYt):void 0}get T9t(){return this.g9t?this.g9t.x9t:0}get qT(){return this.g9t?J2(this.g9t.qT):void 0}get GKt(){return this.g9t?J2(this.g9t.GKt):void 0}get I9t(){return this.g9t?J2(this.g9t.I9t):void 0}get dB(){var t;return null==(t=this.g9t)?void 0:t.dB}get tJt(){var t;const i=null==(t=this.g9t)?void 0:t.tJt;return it(i)?i:this.iJt}set tJt(t){this.iJt=t}get dq(){var t;return null==(t=this.g9t)?void 0:t.dq}get k9t(){return this.g9t?J2(this.g9t.k9t):void 0}get E9t(){return this.g9t?J2(this.g9t.E9t):void 0}get m9t(){var t,i;return null!=(i=null==(t=this.g9t)?void 0:t.m9t)?i:[]}get w9t(){var t,i;return null!=(i=null==(t=this.g9t)?void 0:t.w9t)?i:[]}get y9t(){var t,i;return null!=(i=null==(t=this.g9t)?void 0:t.y9t)?i:[]}get CKt(){var t,i;return null!=(i=null==(t=this.g9t)?void 0:t.CKt.map(t=>({adIdRegistry:t.R9t,adIdValue:t.C9t})))?i:[]}constructor(t){super(t,bi.pk),this.g9t=void 0,this.iJt=void 0}};function J2(t){return null===t?void 0:t}r(),r();var Z2=class{get M3t(){return this.A7t.M3t}get C3t(){return this.D9t}get G3t(){return this.A7t.G3t}get ynt(){var t;return null!=(t=this.A7t.ynt)?t:null}get mnt(){const t=this.A7t.B9t;return t?[t]:[]}get Ant(){return this.A7t.Ant}get bnt(){return this.A7t.bnt}knt(t){this.A7t.knt(t)}rD(){this.A7t.rD()}Snt(t){this.A7t.Snt(t)}kn(){return Promise.resolve()}constructor(t,i){this.A7t=void 0,this.D9t=void 0,this.A7t=t,this.D9t=i}},$2=class{get N9t(){return this.M9t}get M3t(){return this.s5t}get G3t(){return this.L9t}get B9t(){return this.M0t}get ynt(){return this.G0t}get Ant(){return De(this.X0t,t=>{if(t._x)return[];const i=t.Jc;if(t===this.G0t&&void 0!==this.M0t){const t=i.indexOf(this.M0t);if(t>=0)return i.slice(t+1)}return i})}get bnt(){return this.X0t.filter(t=>!t._x)}constructor(t,i){this.s5t=void 0,this.X0t=void 0,this.M0t=void 0,this.G0t=void 0,this.L9t=void 0,this.M9t=void 0,this.s5t=t,this.X0t=[],this.L9t=!1,this.M9t=new Z2(this,i)}};r();var t3=class extends du{xa(){return new i3(this.Int.wnt())}constructor(t){super("O9t",t)}},i3=class extends vu{constructor(t){super("adimpression",t)}};r();var e3=class extends Oi{xa(){return new s3(this.Int.wnt())}constructor(t){super("F9t"),this.Int=void 0,this.Int=t}},s3=class extends wp{constructor(t){super("adbuffering"),this.ad=void 0,this.ad=t}};r();var n3=class extends Oi{xa(){return new r3}constructor(){super("U9t")}},r3=class extends wp{constructor(){super("admetadata")}},h3=class t extends $2{V9t(t,i){for(let e=0;e<t;e++){const t=new Y2(i);i.e4t(t),this.M3t.So(new Qa(t))}}L4t(t,i,e){let s=t;s===1/0&&(s=-1);const n=new j2(s,e,i);this.X0t.push(n),i.N5t(n),this.M3t.So(new nU(n))}U6t(t,i){for(const e of this.X0t)S(e._Ot)&&e.l9t===t&&(e._Ot=i,this.M3t.So(new y2(e)))}k6t(t,i){void 0===i&&(i=!1),i&&oi(this.X0t,t),this.M3t.So(new Uu(t))}S6t(){if(this.ynt){this.k6t(this.ynt,!0);const t=Boolean(this.M0t&&this.M0t.l4t===bi.hZt);this.H9t(void 0,t)}}D4t(t,i){const e=i.V7t;if(!e)return;const s=e.i7t-1,n=t.Jc[s];return n.A9t(i),this.M3t.So(new T1(n)),n.od.p0t=e.p0t,n}get G3t(){return this.W9t.G3t}q9t(t){if(!pi(this.z9t,t)){if(t){if(this.M0t===t)return;this.M0t=t;for(const i of this.G9t)this.y7t(i,t,this.W9t.MP)}else{if(!this.M0t)return;const t=new bc(this.M0t,this.M0t.od._Ot);this.z9t.push(this.M0t),this.M0t=void 0,this.s5t.So(t)}Yo(this.G9t)}}H9t(t,i){if(t){var e;if((null==(e=this.ynt)?void 0:e._Ot)===t._Ot)return;this.G0t=t,i&&this.M3t.So(new aU(this.G0t))}else{if(!this.G0t)return;const t=new Fa(this.G0t);this.G0t=void 0,Yo(this.z9t),i&&this.s5t.So(t)}}X9t(t){return this.X0t.filter(i=>uh(i._Ot,t,.01))[0]}static j9t(t,i){if(i.V7t)return t.Jc[i.V7t.i7t-1]}Ed(t){if(!t.V7t)return;const i=t.V7t,e=this.X9t(i._Ot);e&&(Yo(this.G9t),this.H9t(e,t.D7t))}Bd(){this.ynt&&this.M3t.So(new Fa(this.ynt)),Yo(this.G9t),this.S6t()}o9t(i){if(!this.G0t&&i.V7t){const t=this.X9t(i.V7t._Ot);this.H9t(t,i.D7t)}if(this.G0t){const e=t.j9t(this.G0t,i);if(!e)return;this.D4t(this.G0t,i);const s=i.tJt;it(s)&&!it(e.tJt)&&(e.tJt=s,this.M3t.So(new T1(e))),this.q9t(e),this.M3t.So(new dc(this.M0t,e.od._Ot))}else 0}z7t(t,i){if(this.q9t(void 0),!i&&this.ynt){const t=this.ynt;this.H9t(void 0,!1),this.k6t(t)}}R7t(t){const i=t.V7t;if(!i)return;const e=this.X9t(i._Ot);if(!e)return;this.O4t(i._Ot,i.e7t,i.p0t);const s=this.D4t(e,t);s&&this.M3t.So(new E1(s))}O4t(t,i,e){const s=this.X9t(t);if(!s)return;const n=s.Jc.length;if(i>n){const t=i-n;this.V9t(t,s),s.p0t=e,this.M3t.So(new y2(s))}}f7t(i,e,s){if(!this.G0t)return;const n=t.j9t(this.G0t,i);if(n){const t=e/s;this.M3t.So(new da(n,t))}}N7t(i,e,s){if(!this.G0t)return;let n=this.M0t;if(!n){const s=t.j9t(this.G0t,i);if(!s||pi(this.z9t,s))return void this.G9t.push(e);n=s,this.D4t(this.G0t,i),this.q9t(n)}this.y7t(e,n,s)}y7t(t,i,e){t===Ce.i8t?this.M3t.So(new n3):t===Ce.G6t&&i?this.M3t.So(new t3(i)):t===Ce.Q6t&&i?this.M3t.So(new e3(i)):t===Ce.K6t&&i&&e?this.M3t.So(new _s(i,e)):t===Ce.mJt&&i&&e?this.M3t.So(new ks(i,e)):t===Ce.Y6t&&i&&e&&this.M3t.So(new oe(i,e))}rD(){this.W9t.rD()}knt(t){this.W9t.knt(t)}hr(){const t=Boolean(this.M0t&&this.M0t.l4t===bi.hZt);this.q9t(void 0),this.H9t(void 0,t);for(const t of this.X0t)this.k6t(t);Yo(this.X0t),Yo(this.G9t),Yo(this.z9t)}kn(){this.hr()}Snt(t){}constructor(t,i){super(t,mt.V0t),this.W9t=void 0,this.G9t=void 0,this.z9t=void 0,this.W9t=i,this.G9t=[],this.z9t=[]}};function o3(t){const i=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const i=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case jT.ENABLED:return i.ENABLED;case jT.INSECURE:return i.INSECURE;case jT.DISABLED:default:return i.DISABLED}}(t.ads.vpaidMode)),i.setPlayerVersion("10.0.0"),i.setPlayerType("THEOplayer"),i.setAutoPlayAdBreaks(!0),i.setDisableCustomPlaybackForIOS10Plus(!a3(t));const e=function(t){var i,e,s;const n=null==(e=t.ads)||null==(i=e.googleIma)?void 0:i.language;if(void 0!==n)return n;const r=null==(s=t.ui)?void 0:s.language;if(Z(r))return r;return}(t);e&&i.setLocale(e)}function a3(t){return Qt.ru&&t.allowNativeFullscreen}r();var u3=class t extends C2{get B3t(){return this.m6t.N9t}get Q9t(){return this.m6t}get W7t(){return this.i6t}get Z7t(){return a3(this.VJ)}K9t(t,i,e){i===iu.pnt&&void 0!==e&&(this.X3t=e),this.i6t._6t(t,i)}static get C3t(){return mt.V0t}get C3t(){return t.C3t}get Y9t(){return this.VJ.ads.preload===KT.MIDROLL_AND_POSTROLL}knt(t){const i=this.J9t();for(const e of i)V$(e.sources,e.timeOffset)||t.M6(e,iu.gnt,!1)}J9t(){const t=[],{mnt:i,Ant:e}=this.B3t,s=[];for(const n of i.concat(e)){const i=n.od.f9t;if(pi(s,i.jI))continue;const e=i.J5t(n.m9t);e>=0?t.push(...i.f5t.slice(e)):t.push(...i.f5t),s.push(i.jI)}for(const i of this.i6t.Ant)i.P5t||t.push(...i.f5t);return Bo(t)}set l4t(t){this.f4t=t}get l4t(){return this.f4t}get w0t(){return this.y0t}set w0t(t){this.y0t=t,this.Z9t=!1}LP(){if(!this.w0t)return 0;const t=this.w0t.i9t();return S(this.ct)||t<0?0:this.ct-t}OP(t,i){}Nd(){return this.WA||NaN}C4(t){this.WA=t}tx(){return this.oa.$P}ix(t){this.Y7t(this.Mx,t,!0)}ox(){return this.kz}p7t(t){this.kz=t}get h9t(){return this.$9t}set h9t(t){this.$9t=t}get Unt(){return this.X3t}get Q7t(){return this.tti}get a9t(){return this.iti}set a9t(t){this.iti=t}get K7t(){return this.eti}set K7t(t){this.eti=t}Cx(){var t,i,e;return null!=(e=null==(i=this.w0t)||null==(t=i.O7t())?void 0:t.S9t)?e:0}Nx(){var t,i,e;return null!=(e=null==(i=this.w0t)||null==(t=i.O7t())?void 0:t.b9t)?e:0}xP(){return[]}K3t(t){this.s6t=t,this.i6t.K3t(t)}D6t(){!this.Z9t&&this.w0t&&(this.w0t.Tn(),this.Z9t=!0)}G7t(t){this.l4t=t?t.D7t?"linear":"nonlinear":"none"}Tx(){return ve.iL()._s()}Lx(){return this.oa.Mx}Ox(t){this.Y7t(t,this.$P,!0)}B7t(){return this.oa.$P?0:this.oa.Mx}Y7t(t,i,e){const s=this.oa.Mx!==t||this.oa.$P!==i;s&&(this.oa.Mx=t,this.oa.$P=i),this.w0t&&e&&this.w0t.Ox(this.B7t()),s&&this.So(new Ze(this.MP,this.Mx))}VP(){return!1}HP(){if(this.sti&&this.X3t)return this.sti}qP(){if(this.nti&&this.X3t)return this.nti}bx(){return this.t5}i5(t){this.t5=t,this.So(new ou(this.MP,t))}get u9t(){return this.rti}set u9t(t){this.rti=t}qx(){this.oa.mn(d.uo,this.hti),this.ko||(this.ko=!0,this.i6t.qx(),this.r9t())}async Gx(){if(this.oti)return;this.ati.Zg(),this.ati=new at;const t=this.hx;this.p7t(!1),this.So(new Tc(this.MP)),this.uti()||(this.Z7t||this.oa.we(),this.So(new ux(this.MP))),this.h9t||(this.a9t=!1);const i=Boolean(this.w0t);this.oti=this.i6t.v6t();try{await this.oti}finally{this.oti=void 0}try{ii(this.ati.Yg)}catch(t){return}if(this.ko||this.hti(),!this.sti||!this.X3t)if(this.w0t){if(t)if(i)try{ii(this.ati.Yg),this.w0t.cti(),this.So(new ce(this.MP))}catch(t){return}else this.D6t()}else this.X3t||(this.i3t(),this.Q3t.Gx())}zx(){var t;this.hx||(this.p7t(!0),this.So(new hl(this.MP))),this.ati.Zg(),this.h9t?null==(t=this.w0t)||t.zx():this.a9t=!0}rD(){var t;null==(t=this.w0t)||t.rD()}X7t(){this.w0t&&(this.lti.dti(),this.w0t.Xx(),this.w0t.zg(),this.w0t=void 0,this.l4t="none",this.Z9t=!1)}async Xx(){var t;this.e9t=0,this.i6t.hr(),this.ati.Zg(),this.p7t(!0),this.tti=!1,this.eti=!1,this.h9t=!1,this.m6t.hr(),this.X7t(),this.U7t(),null==(t=this.fti)||t.hr(),this.a9t=!1,this.lti.zg()}be(){this.vti.be(),this.Z7t&&this.oa.be()}we(){this.vti.we()}_ti(){return Boolean(this.w0t)&&pi(this.w0t.gti(),-1)&&!this.tti}I5t(){this.i6t.I5t()}O6t(){return this.i6t.O6t}$5t(){this.i6t.$5t()}F6t(){return this.i6t.F6t()}F3t(t){if(this._ti()){if(t.type===d.jw&&this.oa.UP)return!0;if(t.type===d.Bw)return this.tti=!0,this.lti.dti(),!0}return!1}uti(){return Boolean(this.w0t&&this.w0t.O7t())}async C6t(t){try{this.X7t();const i=this.pti();this.vti.VY(),this.w0t=await this.lti.C6t(t,this.fti,i),this.mti(this.w0t)}catch(t){this.wti.P7t(t)}}mti(t){if(t.Ox(this.B7t()),this.i6t.p6t===L2.d6t){const i=t.gti();if(i.length)for(const t of i)this.m6t.L4t(t,this.i6t.t6t);else this.m6t.L4t(this.i6t.t6t.dd,this.i6t.t6t)}this.wti.hr(),this.wti.h7t(t)}Wx(){if(this.y0t&&this.Z7t&&this.uti())return this.oa.Wx()}Hx(){return this.Z7t&&this.G3t?this.oa.Ma:super.Hx()}pti(){const t=!!(this.i6t.p6t===L2.d6t)&&this.Y9t;let i,e;void 0!==this.VJ.ads.googleIma.uiElements?i=this.VJ.ads.googleIma.uiElements:this.VJ.ads.showCountdown||(i=[]),void 0!==this.VJ.ads.allowedMimeTypes&&(e=this.VJ.ads.allowedMimeTypes);return{yti:e,Ati:i,bti:t,T9t:this.VJ.ads.googleIma.bitrate,Sti:void 0,Tti:this.s6t}}r9t(){if(this.y0t){const t=this.pti();this.y0t.kti(t)}}V4t(t){X2(t)||(this.sti=new Nk(Bk.ADVERTISEMENT_ERROR,t.Py),this.nti=new Ga(Vo.AD_ERROR,"There was a problem playing ads.",this.sti)),this.M3t.So(Pa.U3t(t))}U7t(){this.G3t&&(this.oa.be(),this.i3t(),this.we())}d9t(){var t;if(this.oa.LP()===1/0||0===this.oa.Tx().length)return;(null==(t=this.i6t.t6t)?void 0:t.g5t)&&-1!==this.Eti&&(this.oa.OP(this.oa.LP()+this.Eti),this.Eti=-1)}c9t(t){var i,e;this.Eti=null!=(e=null==(i=t.V7t)?void 0:i.p0t)?e:-1}i3t(){super.i3t(),this.oa.be(),this.Z7t&&!this.oa.UP&&this.oa.Gx()}c5t(){this.Z7t||super.c5t()}async kn(){this.wti.mn(Mc.ma,this.Pti),await super.kn(),this.X7t(),this.lti.mn("xti",this.Iti),this.lti.zg(),this.vti.zg(),this.i6t.kn(),this.wti.kn()}constructor(t,i,e,s,n,r,h){super(t,i),this.ko=!1,this.fti=void 0,this.kz=void 0,this.t5=void 0,this.y0t=void 0,this.lti=void 0,this.vti=void 0,this.Dc=void 0,this.WA=void 0,this.tti=void 0,this.eti=void 0,this.X3t=!1,this.sti=void 0,this.nti=void 0,this.i6t=void 0,this.wti=void 0,this.Eti=-1,this.f4t="none",this.VJ=void 0,this.oti=void 0,this.rti=!1,this.m6t=void 0,this.Z9t=!1,this.ati=new at,this.s6t=void 0,this.$9t=!1,this.iti=!1,this.Iti=t=>{this.M3t.So(t)},this.Pti=t=>{this.sti=new Nk(Bk.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.nti=Ok(this.sti)},this.e9t=NaN,this.hti=()=>{this.ko||this.qx()},this.VJ=e,this.kz=!0,this.WA=NaN,this.t5=mh.VL,this.tti=!1,this.eti=!1,this.m6t=new h3(this.M3t,this),this.wti=new G2(this,this.oa,this.m6t),this.wti.wn(Mc.ma,this.Pti),this.oa.wn(d.uo,this.hti),this.i6t=new O2(this,this.oa,this.Q3t,s,this.m6t),this.fti=h,this.lti=r,this.vti=n,this.we(),this.lti.wn("xti",this.Iti)}};r();var c3=class{registerWebImaAdPlayerConstructor(t){this.Rti=t}createAdPlayer(t,i,e){return d3()&&this.Rti?this.Rti(t,i,e):void 0}constructor(){this.Rti=void 0}};function d3(){if(Boolean(s.google&&s.google.ima)){return!(1===w.keys(s.google.ima).length&&Boolean(s.google.ima.dai))}return!1}c3.Ng=new c3;var l3=class{get P3t(){return u3.C3t}qz(t){return t&&t.integration===ru.GOOGLE_IMA}x3t(t,i,e){return c3.Ng.createAdPlayer(t,i,e)}M6(t,i,e,s){e.K9t(t,i,s)}sj(t){const i=U0(t.sources);if(!i)return;const e={integration:ru.GOOGLE_IMA,sources:i,omidAccessModeRules:z2(t.omidAccessModeRules)},s=Ac(t.timeOffset);return void 0!==s&&(e.timeOffset=s),e}};Qh.Ng.zz(new l3),r(),r(),r(),r();var f3=class extends Oi{xa(){return new v3}constructor(){super("z0t")}},v3=class extends wp{constructor(){super("adloaded")}},jc=-1,_3=class{get A0t(){return this.X0t}get Cti(){return this.Dti}get aut(){return this.Xp}get Bti(){return this.T5t}get Nti(){return this.Mti}get dd(){if(S(this.Lti)){const t=Ha.NZt(this.T5t,this.k0t.t.Nd());void 0===t||S(t)||(this.Lti=t)}return this.Lti}Oti(){return this.Xp<this.X0t.length}Rc(){let t;return this.Xp<this.X0t.length&&(t=this.X0t[this.Xp],this.Xp++),t}Fti(t){t.uZt=this,this.X0t.push(t)}async Uti(t){let i=!1;for(const e of this.X0t)try{await e.Un(),i=!0}catch(i){0,oi(this.X0t,e);const s=e.Ont.sources,n="string"==typeof s?s:s.src;t.So(Pa.V3t(i,n))}return this.Mti=!0,i}I0t(){this.x0t=!0}P0t(){return this.x0t}Vti(){return this.X0t.some(t=>Pn(t).some(t=>t.PKt))}constructor(t,i){this.X0t=void 0,this.T5t=void 0,this.Dti=void 0,this.x0t=void 0,this.Xp=void 0,this.k0t=void 0,this.Lti=void 0,this.Mti=void 0,this.X0t=[],this.x0t=!1,this.T5t=t,this.Xp=0,this.k0t=i,this.Lti=NaN,this.Mti=!1,this.Dti=new m1(this,this.k0t)}},g3=class t extends _o{get Hti(){let t=0;for(const i of this.Wti)i.P0t()||(t+=1);return t}qti(){this.Gti.zti()}Tn(){this.No(),this.Xti.wn("Nnt",this.Gti.jti)}An(){this.Ro(),this.Xti.mn("Nnt",this.Gti.jti),this.b4=this.OO,this.Gti.hr();for(const t of this.Wti)t.I0t();Yo(this.Wti)}No(){this.Qti||(this.oa.wn(d._y,this.Kti),this.Qti=!0)}Ro(){this.Qti&&(this.oa.mn(d._y,this.Kti),this.Qti=!1)}get Ant(){return this.Wti}Yti(){return this.Jti(new Si(jc,void 0))}Zti(t){return this.$ti(t,0,0).length>0}tii(t,i){let e,s=0;for(const n of this.Wti){if(n.P0t())continue;const r=n.dd;r>=t&&r<=i&&r>=s&&!S(r)&&(e=n,s=e.dd)}return e}eii(t){return this.Jti(new Si(t,void 0))}sii(){if(!this.nii&&void 0!==this.s6t){this.nii=!this.Wti.some(t=>S(t.dd));for(const t of this.Wti)t.dd!==jc&&t.dd<=this.s6t&&!t.P0t()&&t.I0t()}}rii(t){for(const i of t)i.I0t();this.J4t.hii(t),0===this.Hti&&this.Ro()}$ti(t,i,e){return this.Wti.filter(s=>{if(s.P0t())return!1;const n=s.dd;return this.oii(n,t)||this.aii(n,t,i,e)})}oii(t,i){switch(i){case 0:return 0===t;case jc:return t===jc;default:return!1}}aii(t,i,e,s){if(t<0)return!1;const n=t-i;return-1!==n&&n<=e&&n>=-s}uii(i){if(i&&i.length>0){for(const e of i){const i=t.Z5t(e._Ot);let s=this.dgt(e);-1===s&&(this.nii=void 0===this.s6t,this.Wti.push(new _3(i,this.cii)),s=this.Wti.length-1);this.Wti[s].Fti(e)}this.No()}}static Z5t(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}dgt(i){const e=t.Z5t(i._Ot);return li(this.Wti,i=>e===t.Z5t(i.Bti))}dii(t){oi(this.Wti,t)}K3t(t){this.s6t=t,this.nii=void 0===t}constructor(t,i,e,s){super(),this.Wti=void 0,this.oa=void 0,this.cii=void 0,this.OO=void 0,this.Xti=void 0,this.b4=void 0,this.J4t=void 0,this.Gti=void 0,this.Qti=void 0,this.s6t=void 0,this.nii=!1,this.Kti=t=>Wr(this.Jti(t)),this.Jti=async t=>{this.sii();const i=t.currentTime,e=t.currentTime!==jc?this.tii(this.b4,t.currentTime):this.$ti(t.currentTime,0,0)[0];let s,n;const r=this.oa.Nd()-10;if(n=this.Zti(jc)&&_.ceil(i)===_.ceil(r)?this.$ti(jc,10,0).filter(t=>!t.Nti):this.$ti(i,10,0).filter(t=>!t.Nti),n.length){const t=(await Promise.all(n.map(t=>t.Uti(this.Xti)))).some(t=>!0===t);t&&this.So(new f3),(!t||!this.Gti.lii||n[0].dd<this.Gti.lii.dd)&&(s=n[0])}e&&(e!==this.Gti.lii&&(s=e),this.rii([e])),s&&(this.Gti.jti(),this.Gti.lii=s,await this.Gti.zti()),S(this.oa.Nd())||(this.b4=t.currentTime)},this.oa=t,this.J4t=i,this.cii=new p1(this.J4t,this.oa),this.s6t=void 0,this.nii=!1,t.Nd()!==1/0?this.OO=0:this.OO=t.LP(),this.b4=this.OO,this.Wti=[],this.Xti=e,this.Gti=s,this.Qti=!1}};r(),r();var p3=class extends _o{get fii(){return this.Q1t}get M3t(){return this.s5t}vii(){this._ii(),this.gii(),this.JW=void 0}pii(t){this.mii=this.mii.concat(t)}wii(t){this.yii=this.yii.concat(t)}gii(){this.mii=[]}_ii(){this.yii=[]}Aii(t){for(const i of this.mii)i.eX===t&&L$(i.eventURL)}be(){this.fii.style.display=""}we(){this.fii.style.display="none"}kn(){this.Vo(),this.s5t.Vo(),os(this.Q1t)}constructor(t,i){super(),this.Q1t=void 0,this.yii=[],this.mii=[],this.JW=void 0,this.bii=void 0,this.Sii=void 0,this.s5t=new _o,this.Tii=t=>{t.stopPropagation(),this.kii()},this.kii=()=>{for(const t of this.yii)for(const i of t.kYt)L$(i.uri)},this.Q1t=h.createElement("div"),this.Q1t.style.display="none",this.bii=t,this.Sii=i}};function m3(t,i){let e=i;if(!function(t){return"ui"in t}(t))return e;const s=t.ui.language;let n;if(Z(s)){const i=t.ui.languages;if(!i)return e;n=i[s]}else n=s;return n&&n[i]&&(e=n[i]),e}r(),r();var w3={[Ba.cR]:1,[Ba.dR]:2,[Ba.lR]:2};function y3(t,i){const e=i?i.map(t=>t.toLowerCase()):i;return xe(t.filter(t=>{const i=t.type.toLowerCase();return!!ul(e)&&-1!==e.indexOf(i)&&A0(i)}),(t,i)=>w3[t.type]-w3[i.type]).map(A3)}function A3(t){return ml({src:t.contentURL,type:t.type,isAdvertisement:!0})}function b3(t,i){return MV(S3(t),S3(i))}function S3(t){return{Mi:t.height,Ti:t.width}}function T3(t,i,e,s){const n=function(t,i,e,s){let n,r=1/0;const h=t.filter(t=>!A0(t.type)).filter(t=>void 0===s||-1!==s.indexOf(t.type));if(h.length){for(const t of h){const s=(_.abs(t.width/i-1)+_.abs(t.height/e-1))/2;s<r&&(r=s,n=t)}return n||h.sort(b3)[0]}}(t.QYt,i.width,i.height,e),r=y3(t.QYt,e);if(n){const t=A3(n);t&&r.push(t)}var h;r.length>0&&(t.tJt=null==(h=r[0].src)?void 0:h.trim());return Cn({sources:r},s)}var k3=class extends p3{get Eii(){return this.Pii}get MP(){return this.xii.MP}get ct(){let t=this.xii.ct;return S(t)&&this.qYt&&(t=this.qYt.ct||0),t}get UP(){return this.xii.UP}get $P(){return this.xii.$P}set $P(t){this.xii.$P=t,t?this.Aii(kl.hJt):this.Aii(kl.oJt)}get hx(){return this.xii.hx}get Ax(){return this.xii.Ax}get Mx(){return this.xii.Mx}set Mx(t){this.xii.Mx=t}get Rx(){return this.xii.Rx}get Bx(){return this.xii.Bx}get Iii(){return this.Rii}Gx(){this.xii.hx&&(this.xii.Gx(),this.So(new Tc(this.MP)),this.Pii&&this.Aii(kl.aJt),this.Pii=!0)}zx(){this.xii.hx||(this.xii.zx(),this.So(new hl(this.MP)),this.Aii(kl.jw))}async Xx(){var t;null==(t=this.nT)||t.Zg(),this.nT=void 0,this.we(),this.Pii=!1,this.Cii=!0,this.Dii(),this.Bii(),await this.Nii()}Mii(t){void 0===t&&(t=!0),this.Pii=!1,t&&this.Aii(kl.wJt),this.we(),this.Sii()}Lii(){var t;const i=null==(t=this.J4t.Na)?void 0:t.gi,e=new L1(this.sc,i);return this.fii.appendChild(e.xe),e.wn("rD",this.Oii),e}Fii(){this.qYt&&this.qYt.FYt.AYt&&(this.Y1t=new C1(this.fii),this.Y1t.u1t=this.qYt.FYt.AYt,this.Y1t.wn("clickstart",this.Uii),this.Y1t.wn("click",this.kii))}Vii(t,i){for(const e of this.mii)if(e.eX===kl.Qw){const s=f0(e.ac,i);void 0!==s&&this.b4<s&&s<=t&&L$(e.eventURL)}}async Hii(){if(!this.qYt||!this.Wii)return;const t=T3(this.qYt,this.Wii,this.YS.ads.allowedMimeTypes,this.YS);if(!t.sources.length)return await this.xii.hr(),this.bii(""),void this.qYt.KKt();this.nT=new at,this.Cii=!0,await $e(this.xii.Ta(t,this.nT.Yg),this.nT),this.xii.be(),this.qYt.KKt(),this.Fii()}async qii(t,i,e){this.Rii=t,this.qYt=t.PKt,this.xii.wn(d._y,this.zii),this.xii.wn(d.Rw,this.Gii),this.xii.wn(d.gy,this.Xii),this.xii.wn(K,this.Rs),this.qYt.NKt&&0!==this.qYt.NKt.length&&this.pii(this.qYt.NKt),this.qYt.FYt&&this.wii(this.qYt.FYt),this.JW=i,this.Wii=e,0!==this.qYt.QYt.length&&(this.xii.wn(Mc.ma,this.jii),await this.Hii(),this.xii.wn(d.Bw,this.Qii),this.xii.wn(d._y,this.Kii),this.xii.wn(Do.TM,this.Yii),this.xii.wn(d.Jw,this.Rs))}p$t(){this.Eii&&this.Jii&&this.Oii()}get Jii(){return this.qYt&&-1!==this.qYt.JYt&&this.xii.MP>=this.qYt.JYt}Zii(){this.Aii(kl.MSt),this.Rii&&this.M3t.So(new dc(this.Rii,this.MP))}async Nii(){this.xii.mn(Mc.ma,this.jii),this.xii.mn(d.Bw,this.Qii),this.xii.mn(d._y,this.Kii),this.xii.mn(Do.TM,this.Rs),this.xii.mn(Do.TM,this.Yii),this.xii.mn(d.Jw,this.Rs),this.xii.mn(d._y,this.zii),this.xii.mn(d.Rw,this.Gii),this.xii.mn(d.gy,this.Xii),this.xii.mn(K,this.Rs),this.Rii&&(this.Rii.I0t(),this.M3t.So(new bc(this.Rii,this.MP))),this.$ii(),this.vii(),this.Dii(),this.Bii(),this.Rii=void 0,this.qYt=void 0,this.Wii=void 0,await this.xii.hr(),this.xii.we(),this.fii.style.cursor="",this.tei=0,this.b4=-1,this.iei&&(this.eei.Nii(),this.iei=!1)}$ii(){this.Y1t&&(this.Y1t.zg(),this.Y1t=void 0)}Bii(){this.sei&&(os(this.sei),this.sei=void 0)}Dii(){this.$1t&&(this.$1t.kn(),this.$1t=void 0)}nei(){this.iei=!0}rei(){var t;this.sei||(this.sei=h.createElement("div"),this.sei.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.fii.appendChild(this.sei));const i=null==(t=this.Rii)?void 0:t.od;if(!i)return;const e=i.Jc.filter(S1);let s=m3(this.YS,"The content will play in")+" "+_.round(i.m0t)+" "+m3(this.YS,"seconds");if(e.length>1){const t=e.filter(t=>t.P0t()).length;s+=". "+m3(this.YS,"Ad")+" "+(t+1)+"/"+e.length}Xu(this.sei,s)}constructor(t,i,e,s,n,r,h){super(t,i),this.eei=void 0,this.YS=void 0,this.J4t=void 0,this.sc=void 0,this.xii=void 0,this.Rii=void 0,this.qYt=void 0,this.Wii=void 0,this.Pii=void 0,this.tei=void 0,this.b4=void 0,this.iei=void 0,this.sei=void 0,this.$1t=void 0,this.Y1t=void 0,this.nT=void 0,this.Cii=void 0,this.Qii=void 0,this.Yii=void 0,this.Kii=void 0,this.jii=void 0,this.zii=void 0,this.Gii=void 0,this.Xii=void 0,this.Uii=void 0,this.Oii=void 0,this.eei=e,this.YS=s,this.J4t=n,this.sc=r,this.xii=h,this.Pii=!1,this.tei=0,this.b4=-1,this.nT=new at,this.Cii=!0,this.Qii=()=>{this.Mii()},this.Yii=()=>{this.nT=void 0,this.Pii||(this.Zii(),this.Pii=!0),this.Cii&&(this.Cii=!1,this.J4t.qti()),this.fii.style.display="block",this.xii.mn(Do.TM,this.Yii),this.Pii=!0},this.Kii=()=>{const t=this.MP,i=this.ct,e=t/i;(0===this.tei&&e>=.25?(this.Aii(kl.gJt),this.tei=1):1===this.tei&&e>=.5?(this.Aii(kl.mJt),this.tei=2):2===this.tei&&e>=.75&&(this.Aii(kl.pJt),this.tei=3),this.Vii(t,i),this.rei(),this.b4=t,this.qYt)&&(-1!==this.qYt.JYt&&this.qYt.JYt<this.qYt.ct&&(null!=this.$1t||(this.$1t=this.Lii()),this.MP<this.qYt.JYt?this.$1t.g1t(this.qYt.JYt-this.MP):this.$1t.m1t()))},this.jii=()=>{var t,i;this.nT=void 0,this.xii.mn(Mc.ma,this.jii),this.Cii=!0,null==(t=this.JW)||t.jJt(yr.WJt),this.Pii=!1,this.xii.we();const e=(null==(i=this.xii.bt)?void 0:i.src)||"";this.bii(e)},this.zii=()=>{this.Rs(new Si(this.MP,void 0))},this.Gii=()=>{this.Rs(new Rs(this.ct))},this.Xii=()=>{this.Rs(new Ze(this.MP,this.Mx))},this.Uii=()=>{this.J4t.zx()},this.Oii=()=>{this.Rii&&(this.Aii(kl.cJt),this.M3t.So(new da(this.Rii,this.MP/this.ct)),this.Mii(!1))},this.fii.className="theoplayer-ad-linear",this.fii.style.zIndex="10",oa(this.fii),this.xii.we(),this.iei=!1}};r(),r();var E3=class t extends Ne{get xe(){return this.Ls}w1t(){this.xe.addEventListener("mouseup",this.y1t),this.xe.addEventListener("touchend",this.y1t),this.xe.addEventListener("mousedown",this.hei)}p1t(){this.xe.removeEventListener("mouseup",this.y1t),this.xe.removeEventListener("touchend",this.y1t),this.xe.removeEventListener("mousedown",this.hei)}static yr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}kn(){this.p1t(),os(this.Ls)}constructor(){super(),this.Ls=void 0,this.y1t=t=>{this.So(new wp("rD")),this.hei(t)},this.hei=t=>{t.stopPropagation()},this.Ls=t.yr(),this.w1t()}},P3=class extends p3{get oei(){return this.aei}get uei(){return this.yu}vii(){super.vii(),this.fii&&Yd(this.fii)}async qii(t,i,e){this.L0t&&this.Nii(),this.aei=t,this.L0t=t.xKt,0!==this.L0t.NKt.length&&this.pii(this.L0t.NKt),this.JW=i,0!==this.L0t.DKt.length&&(this.wii(this.L0t.DKt[0].WKt),this.fii.addEventListener("error",this.cei),this.fii.addEventListener("load",this.dei),await this.Hii(),this.lei())}p$t(){var t;if(void 0!==this.fei)return;const i=null==(t=this.L0t)?void 0:t.DKt[0];i&&i.od&&-1!==i.od.JYt&&(this.Aii(kl.cJt),this.M3t.So(new da(this.aei,0)),this.vei())}Zii(){void 0!==this.aei&&this.M3t.So(new dc(this.aei,this.J4t.MP))}Xx(){this.Nii(),this.aei=void 0,this.L0t=void 0}Nii(){this._ei(),void 0!==this.aei&&(this.aei.I0t(),this.M3t.So(new bc(this.aei,this.J4t.MP))),this.vii(),this.gei(),void 0!==this.fei&&(c(this.fei),this.fei=void 0)}_ei(){this.fii.removeEventListener("load",this.dei),this.fii.removeEventListener("error",this.cei)}async Hii(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const i=this.L0t.DKt[0],e=h.createElement("a");if(i.WKt.AYt&&(e.href=i.WKt.AYt,e.target="Xu",e.setAttribute("rel","noopener")),i.FKt){const t=i.FKt,s=h.createElement("iframe");s.src=t.LJt,e.appendChild(s)}else if(i.LKt){const t=i.LKt,s=h.createElement("img");s.src=t.LJt,e.appendChild(s)}else if(i.VKt){const t=i.VKt,s=h.createElement("iframe");s.src=t.LJt,e.appendChild(s)}i.KKt(),e.addEventListener("mousedown",this.Tii),e.addEventListener("touchend",this.Tii),this.fii.firstChild&&(Yd(this.fii),this.Nii()),t.appendChild(e),this.fii.appendChild(t),this.be()}lei(){var t;if(!this.L0t)return;const i=null==(t=this.L0t.DKt[0].od)?void 0:t.JYt;void 0!==i&&-1!==i&&(this.fei=s.setTimeout(this.pei,1e3*i))}gei(){this.yu&&(this.yu.mn("rD",this.mei),this.yu.kn()),this.yu=void 0}get wei(){return this.J4t.yei()}constructor(t,i,e){super(t,i),this.aei=void 0,this.L0t=void 0,this.J4t=void 0,this.yu=void 0,this.fei=void 0,this.dei=()=>{this._ei(),this.Aii(kl.TJt),this.Sii()},this.cei=t=>{var i,e;this._ei(),null==(i=this.JW)||i.jJt(yr.zJt);const s=null==(e=this.L0t)?void 0:e.DKt[0];var n,r;const h=null!=(r=null!=(n=null==s?void 0:s.FKt)?n:null==s?void 0:s.LKt)?r:null==s?void 0:s.VKt;var o;this.bii(null!=(o=null==h?void 0:h.LJt)?o:"")},this.vei=()=>{this.we(),Yd(this.fii),this.Sii(),this.aei=void 0,this.L0t=void 0},this.pei=()=>{this.yu||(this.fei=void 0,this.yu=new E3,this.fii.children[0].appendChild(this.yu.xe),this.yu.wn("rD",this.mei))},this.mei=()=>{this.Aii(kl.cJt),this.p$t()},this.fii.className="theoplayer-ad-nonlinear",this.fii.style.position="absolute",this.fii.style.width="100%",this.fii.style.bottom="3em",this.fii.style.zIndex="10",this.fii.style.textAlign="center",this.J4t=e}};r();var x3=class{static async Aei(t,i,e){let s=[],n=t.shift();const r=[];for(;n;){try{const t=await(new E0).eZt(n,i);s=s.concat(t)}catch(t){0;const i=Pa.V3t(t,n.sources.src);e.So(i),r.push(i.Ky)}n=t.shift()}return[s,r]}};r(),r(),r();var Tr=class extends Oi{xa(){return new I3}constructor(){super("Eot")}},I3=class extends wp{constructor(){super("statechange")}};r();var Yt=function(t){return t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted",t}({});r(),r();var R3=class{get ec(){return this.nc}get V(){return this.nc.length}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}CI(t){return this.nc[t]}lO(t){this.nc.push(t),this.hu&&this.hu.push(t.Ca),this.bei(t)}Sei(t){for(const i of t)this.lO(i)}Tei(t,i){i>=0&&i<=this.nc.length&&(this.nc.splice(i,0,t),this.hu&&this.hu.splice(i,0,t.Ca),this.bei(t))}fO(t){return pi(this.nc,t)}_S(t){this.kei(this.nc.indexOf(t))}kei(t){if(!(t>=0&&t<this.nc.length))return;const i=this.nc[t];ka(this.nc,t),this.hu&&ka(this.hu,t),this.Eei(i)}Gy(){const t=this.nc.slice();Yo(this.nc),this.hu&&Yo(this.hu);for(const i of t)this.Eei(i)}constructor(){this.nc=[],this.hu=void 0}},C3=class extends R3{xa(){return function(t){const i=function(t){const i=t.ec.map(t=>t.Ca);return i.item=i=>{const e=0|i,s=t.CI(e);return s&&s.Ca||void 0},i}(t),e=new ws(t,i);return i.addEventListener=(t,i)=>{e.wn(t,i)},i.removeEventListener=(t,i)=>{e.mn(t,i)},i}(this)}wn(t,i){this.Pei.wn(t,i)}lw(t){this.Pei.lw(t)}Vo(){this.Pei.Vo()}So(t){this.Pei.So(t)}mn(t,i){this.Pei.mn(t,i)}pw(t){this.Pei.pw(t)}mw(t){this.Pei.mw(t)}ww(t,i){return this.Pei.ww(t,i)}constructor(...t){super(...t),this.Pei=new _o,this.Rs=t=>{this.So(t)}}};r();var D3=class extends wp{constructor(t){super("addtask"),this.task=void 0,this.task=t}},B3=class extends Oi{xa(){return new D3(this.xei.Ca)}constructor(t){super("Iei"),this.xei=void 0,this.xei=t}};r();var N3=class extends wp{constructor(t){super("removetask"),this.task=void 0,this.task=t}},M3=class extends Oi{xa(){return new N3(this.task.Ca)}constructor(t){super("Rei"),this.task=void 0,this.task=t}},L3=class extends C3{bei(t){this.So(new B3(t))}Eei(t){this.So(new M3(t))}constructor(){super()}},O3=class extends Ne{async qx(){await this.Cei(),this.Mot("initialised")}async Cei(){try{await this.Dei()}catch(t){0}}async Dei(){const t=await this.GSt.iPt();for(const i of t){const t=this.Nei.Bei(i.id,i.sourceDescription,i.parameters,this.Mei);this.Lei(t),this.rT.lO(t),await t.Oei}}get hk(){return this.Not}Mot(t){this.Not=t,this.So(new Tr)}get Fei(){return this.rT}Bei(t,i,e){void 0===e&&(e="persistent");const s=this.Nei.Uei(t,i,e);return this.Vei(s,e),this.rT.lO(s),this.Lei(s),s}async Vei(t,i){try{await this.Hei(t,i)}catch(t){throw m("Unable to persist task - "+t)}}async Hei(t,i){await this.GSt.zSt({key:t.o,id:t.o,sourceDescription:t.Mc,parameters:t.NS},i)}Lei(t){t.wn("Eot",()=>{t.hk===Yt.EVICTED&&this.rT._S(t)})}constructor(t,i,e){super(),this.Not="uninitialised",this.rT=new L3,this.GSt=void 0,this.Mei=void 0,this.Nei=void 0,this.Nei=i,this.Mei=e,this.GSt=t,this.qx()}};r(),r(),r(),r();var Os=class{get ZM(){return this.Wei}get qei(){return this.zei}get Gei(){return this.Xei.ZM}get jei(){let t=0,i=0;return this.dO.forEach(e=>{t+=e.timeRanges.ZM,i+=e.totalQualityDurationToCache}),0===i?0:_.min(1,t/i)}get Xei(){return this.Qei}zO(t){return!!_t(this.dO,t.dO)&&(!!Jl(this.zei,t.zei)&&(!!Jl(this.ZM,t.ZM)&&(!!Jl(this.Gei,t.Gei)&&this.Xei.GM(t.Xei))))}constructor(t,i,e){if(this.zei=void 0,this.dO=void 0,this.Wei=void 0,this.Qei=void 0,this.zei=t,this.dO=i,this.Wei=e,0===this.dO.size)this.Qei=ve.iL();else{let t=new ve([-1/0,1/0]);this.dO.forEach(i=>{t=t.Mn(i.timeRanges)}),this.Qei=t}}};Os.QUALITY_TIME_RANGES_NULL_OBJECT=qh(),Os.CACHE_PROGRESSION_NULL_OBJECT=new Os(0,Os.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),Os.Kei=Os.CACHE_PROGRESSION_NULL_OBJECT,r(),r(),r(),r();var F3=class extends wp{constructor(){super("progress")}},U3=class extends Oi{xa(){return new F3}constructor(){super("y4t")}};r(),r();var V3=class extends R{get name(){return"Yei"}constructor(t,i){super(t,i)}};r(),r(),r();var H3=function(t){return t[t.cR=0]="cR",t[t.dR=1]="dR",t}({});async function W3(t,i,e){const s=[];for(const n of t.Xpt)s.push(q3(n,i,e));return{kmt:await Promise.all(s)}}async function q3(t,i,e){const s=[];for(const n of t.Ilt)z3(n)||s.push(j3(n,i,e));return{Z:await Promise.all(s),Km:t.Km}}function z3(t){return t.rat.every(X3)}var G3=1;function X3(t){return t.swt!==G3&&Boolean(t.swt)}async function j3(t,i,e){const s=[];for(const i of t.rat)X3(i)||s.push(Q3(i,e));const n=await Promise.all(s),r=t.frt[0],h=t.xW,o=h?function(t,i){const e=[],s=function(t){return t?Ho(t,"avc")?My:Ho(t,"hev")||Ho(t,"hvc")||Ho(t,"hvt")||Ho(t,"lhv")||Ho(t,"lhe")||Ho(t,"lht")?Ly:Ho(t,"mp4")?Oy:Ho(t,"mpeg2")?Uy:Ho(t,"mpeg")?Fy:Hy:Hy}(t);for(const t of i){const i=t.y8.split(":").pop(),n=t.A8;e.push({mimeType:s,uuid:i,data:n})}const n=H3.cR,r=Mg;return{type:n,schemeType:r,schemeDatas:e}}(r,h):void 0,a=IG(t,i,!0);return{KI:n,bs:t.rit,Km:t.Km,aq:o,Tpt:a}}async function Q3(t,i){const e={stack:[],error:void 0,hasError:!1};try{const r=Be(e,new at,!1),h=await async function(t,i,e){const s=[],n=t.$rt;t.Ddt&&s.push({EO:0,ct:0,Jei:t.Ddt});const r=n.xyt();let h=r;for(;h;){if(t.kct(h)){const n=await t.Pct(h,i,e);for(let i=0;i<n.V;i++)s.push(K3(n.Ict(i),t))}else s.push(K3(h,t));h=n.Cct(h)}const o=n.Dyt(),a=o.PO-r.EO;return{ct:a,ect:s}}(t,i,r.Yg),o={o:Y3(t),mM:h,kW:t.kW,Np:t.Np,Mi:t.Mi,Km:t.Km,Ti:t.Ti};switch(t.Km){case Ci.NT:break;case Ci.Bk:var s,n;o.plt=null!=(n=null==(s=t.plt)?void 0:s.iF())?n:NaN;break;case Ci.Dk:o.audioSamplingRate=t.$mt}return o}catch(t){e.error=t,e.hasError=!0}finally{Cs(e)}}function K3(t,i){return{EO:t.EO,ct:t.ct,Jei:i.Nct(t)}}function Y3(t){return t.wct.Tn+"-"+(""+t.o)}function J3(t,i){const e=function(t){const i=function(t){const i=qh();for(const e of t){let t=i.get(e.BMt);t||(t={Km:e.Km,KD:[]},i.set(e.BMt,t)),t.KD.push(e)}return i}(t),e=ar();return i.forEach(t=>{for(const i of t.KD){let s=e.get(t.Km);s||(s=qh(),e.set(t.Km,s));let n=s.get(i.l);n||(n=[],s.set(i.l,n)),n.push(i)}}),e}(t);return function(t,i){const e=ar();return t.forEach((t,s)=>{const n=qh();t.forEach((t,e)=>{const r=[];for(const e of t){const t=Z3(e,s,i);r.push(t)}n.set(e,r)}),e.set(s,n)}),e}(e,i)}function Z3(t,i,e){const s=t.BMt,n={UMt:t,HUt:[]};for(const t of e)aJ(i,s,t)&&n.HUt.push(t);return n}async function $3(t,i){const e=await i.RSt([t],{});return DY(e.gk,{},e.DSt)}async function t4(t,i){return KK(t)?async function(t,i){const e=J3(t.KD,t.mOt),s=await async function(t,i){const e=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await s4(n,s,i);e.push(r)}return e}(e,i),n=await async function(t,i){const e=[];for(const o of t){var s,n;const t=await o4(o.nyt,i);var r,h;t.kW=o.kW,t.Np=o.frt?e4(o.frt):"",t.Mi=null!=(r=null==(s=o.uCt)?void 0:s.Mi)?r:0,t.Ti=null!=(h=null==(n=o.uCt)?void 0:n.Ti)?h:0,e.push(t)}return{Km:Ci.pk,Z:[{bs:EH,Km:Ci.pk,KI:e}]}}(t.mOt,i);return s.push(n),{ct:i4(s),Zei:[t.nyt],smt:[{kmt:s}]}}(t,i):function(t){const i=a4(t);return{ct:i.ct,Zei:[t.nyt],smt:[{kmt:[{Km:Ci.pk,Z:[{Km:Ci.pk,bs:EH,KI:[{o:t.nyt,mM:i,kW:0,Np:"",Mi:0,Km:Ci.pk,Ti:0}]}]}]}]}}(t)}function i4(t){let i=-1/0;for(const e of t)for(const t of e.Z)i=_.max(i,...t.KI.map(t=>t.mM.ct));return i}function e4(t){return[t.yCt,t.bCt,t.ULt].filter(it).join(",")}async function s4(t,i,e){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,i]=t.value,n=await n4(i,e);s.push(n)}return{Km:r4(i),Z:s}}async function n4(t,i){const e=[],s=t[0].UMt;for(const s of t){const t=await h4(s,i);e.push(t)}return{bs:s.bs||EH,Km:r4(s.Km),KI:e}}function r4(t){switch(t){case nl.Dk:return Ci.Dk;case nl.Bk:return Ci.Bk;case nl.OU:case nl.bLt:return Ci.NT;default:return Ci.pk}}function h4(t,i){const e=function(t){const i=t.UMt.nyt,e=t.HUt.map(t=>t.nyt);return i||(e.length?e[0]:void 0)}(t);return o4(e,i)}async function o4(t,i){let e={ct:0,ect:[]};if(t){const s=await $3(t,i);YK(s)&&(e=a4(s))}return{o:t||"default",$ei:t,mM:e,kW:0,Np:"",Mi:0,Km:Ci.pk,Ti:0}}function a4(t){const i=[];let e,s=0;for(const n of t.ect){const t=s;!n.bOt||void 0!==e&&ZK(n.bOt.nyt,e)||(i.push(u4(n.bOt,t)),e=n.bOt.nyt),i.push(c4(n,t)),s+=n.ct}return{ct:s,ect:i}}function u4(t,i){return{EO:i,ct:0,Jei:d4(t.nyt)}}function c4(t,i){return{EO:i,ct:t.ct,Jei:d4(t.nyt)}}function d4(t){return{Yu:t.zE,Sat:t.LAt?[t.LAt.Tn,t.LAt.Tn+t.LAt.V]:void 0,zk:!1}}r(),r();var l4=class{async tsi(t){if(!t.src)throw new m("Invalid typed source");const i=t.type;if($T(i))return await this.isi(t);if(ZT(i))return await this.esi(t);throw new m("Unexpected source type")}async isi(t){try{const i=await $3(t.src,this.CSt);return await t4(i,this.CSt)}catch(t){throw new m("Unable to fetch HLS manifest")}}async esi(t){try{const i=new $z({iR:zd.Dh(t.src),cSt:t.liveOffset,_St:t.timeServer,zk:t.useCredentials},this.ssi,Mr.Yk,this.CSt,t.dash);return await i.W,await async function(t,i,e){const s=[];for(const n of t.smt)s.push(W3(n,i,e));const n=await Promise.all(s);return{ct:t.Gwt.Rmt(),Zei:[t.iSt],smt:n}}(i.Br.Idt,t.contentProtection,this.Bct)}catch(t){throw new m("Unable to fetch DASH manifest")}}constructor(t,i,e){this.CSt=void 0,this.Bct=void 0,this.ssi=void 0,this.CSt=t,this.Bct=i,this.ssi=e}};r();var f4=class{nsi(){const t=new pa;return this.rsi.push(t),this.hsi(),t.Qy}async osi(t,i){try{await t}finally{this.asi-=1,this.hsi(),0===this.rsi.length&&0===this.asi&&i.Xy(!0)}}hsi(){if(this.rsi.length>0&&this.asi<this.usi){this.rsi.shift().Xy(),this.asi+=1}}constructor(t){this.usi=void 0,this.rsi=[],this.asi=0,this.usi=t}};var v4=class extends Ne{get Oei(){return this.qx()}async qx(){const t=new l4(this.CSt,this.Bct,this.ssi);this.pCt=await t.tsi(this.dsi);const i=function(t,i){if(Z(t)){if(Ho(t,"%"))return C(t)/100*i;throw new m("Unexpected - Invalid string supplied as amount to cache.")}return i<t?i:t}(this.XSt.NS.amount,this.pCt.ct);let e;this.Wei=i;const s=ia(this.pCt.Zei[0]),n=(await this.cPt.dPt.sPt(s,"manifestURL")).filter(t=>pi(t.references,this.XSt.o)),r=[],h=this.XSt.NS.bandwidth;for(const t of this.pCt.smt)for(const i of t.kmt)for(const t of g4(i,this.XSt.NS.preferredTrackSelection))for(const i of m4(t.KI,h))r.push(i);this.lsi=_.ceil(r.map(t=>t.kW*function(t,i){let e=0;for(const s of t.mM.ect.map(t=>t.ct))if(e+=s,e>=i)return e;return e}(t,i)/8).reduce((t,i)=>t+i,0));const o=qh();if(n&&0!==n.length){const t=n.reduce((t,i)=>t+i.byteSize,0);for(const t of n){const i=t.qualityId,e=new ve(t.startsAndEnds);if(o.has(i))o.get(i).timeRanges=o.get(i).timeRanges.OM(e).LM(5e-4);else{const t=Jr(r,t=>t.o===i);var a;const s=_.min(this.Wei,null!=(a=null==t?void 0:t.mM.ct)?a:1/0);o.set(i,{timeRanges:e,totalQualityDurationToCache:s})}}e=new Os(t,o,this.Wei)}else{for(const t of r)o.set(t.o,{timeRanges:ve.iL(),totalQualityDurationToCache:_.min(t.mM.ct,this.Wei)});e=new Os(0,o,this.Wei)}this.fsi=e}get vsi(){return this.lsi}get fsi(){return this._si}set fsi(t){this._si.zO(t)||(this._si=t,t.zO(Os.Kei)||this.So(new U3))}async mi(t){await this.ko,await this.gsi(this.pCt,t)}async gsi(t,i){if(!t.Zei)throw new m("Unexpected - manifest is missing locations");await this.psi();const e=[];for(const s of t.smt)e.push(this.msi(s,t.Zei[0],i));return gn(e)}async psi(){const t=await this.wsi.iPt();for(const i of t){const t=await this.cPt.lPt.Wy(i.key);if(t)await _4(t,this.XSt.o,this.cPt.lPt,this.Mei);else try{await this.cPt.lPt.zSt(i,this.Mei)}catch(t){throw new V3("Unable to store manifest with url: "+i.locationURL,t)}}await this.wsi.rPt()}msi(t,i,e){const s=[];for(const n of t.kmt){const t=g4(n,this.XSt.NS.preferredTrackSelection);for(const n of t)s.push(this.ysi(n,i,e))}return gn(s)}async ysi(t,i,e){const s=this.XSt.NS.bandwidth,n=m4(t.KI,s);t.Km===Ci.Bk&&t.Tpt&&t.Tpt.aH.widevine&&"persistent"===t.Tpt.aH.widevine.licenseType&&(await this.Asi(t.Tpt),ii(e));const r=[];for(const t of n)r.push(this.bsi(t,i,e));return gn(r)}async bsi(t,i,e){ii(e);const s=t.mM.ect[0].EO+this.Wei,n=[];let r=!1;for(const h of t.mM.ect){if(h.EO>=s||this.stopIfFailed(r))break;await this.Ssi(e),await this.Tsi.nsi(),n.push(this.Tsi.osi(this.ksi(h,t,i),this.Esi).catch(t=>(r=!0,Promise.reject(t))))}return gn(n)}async Ssi(t){if(null==t?void 0:t.Hg)throw await this.Esi.Qy,new dt}async Psi(){return await this.ko.catch(Ct),this.pCt}Asi(t){return Promise.resolve()}xsi(){return zd.um("License renewal unsupported in this SDK."),Promise.resolve()}async ksi(t,i,e){const s=this.cPt.dPt,n=fG(t.Jei.Yu,t.Jei.Sat),r=await s.Wy(n);if(r)await _4(r,this.XSt.o,s,this.Mei),this.Isi(r,!1);else try{const s=await this.Rsi(t.Jei),{segmentMetadataEntry:n,segmentEntry:r}=this.Csi(t,i,e,s);await this.cPt.uPt(async t=>{await t.dPt.zSt(n,this.Mei),await t.ect.zSt(r,this.Mei)}),this.Isi(n,!0)}catch(i){throw new V3("Unable to store segment with url: "+t.Jei.Yu,i)}}async Rsi(t){const i=await this.Mut.pat(t,{Eat:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,Hk:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.Lut(i)}async Lut(t){return{buffer:await t.HT()}}Csi(t,i,e,s){const n=fG(t.Jei.Yu,t.Jei.Sat),r=t.EO,h=t.ct,o=this.Dsi(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:ia(e),qualityId:i.o,byteSize:o,startsAndEnds:new ve([r,r+h]).kM,references:[this.XSt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:ia(e),data:s,references:[this.XSt.o]}}}Dsi(t){return t.buffer.byteLength}Isi(t,i){const e=t.qualityId,s=this._si,n=s.dO;n.get(e).timeRanges=n.get(e).timeRanges.OM(new ve(t.startsAndEnds)).LM(5e-4),this.fsi=new Os(i?s.qei+t.byteSize:s.qei,n,this.Wei)}stopIfFailed(t){return!1}constructor(t,i,e,s,n,r,h,o){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.XSt=void 0,this.cPt=void 0,this.Mei=void 0,this.pCt=void 0,this.Tsi=void 0,this.Esi=new pa,this.dsi=void 0,this.wsi=void 0,this.CSt=void 0,this.Mut=void 0,this.Bct=void 0,this.ssi=void 0,this.ko=void 0,this.Wei=void 0,this.lsi=void 0,this._si=Os.Kei,this.XSt=t,this.cPt=i,this.CSt=e,this.wsi=s,this.Mut=n,this.Bct=r,this.ssi=o,this.Mei=h,this.lsi=-1;const a=this.XSt.Mc.sources[0];this.dsi=a,this.ko=this.qx(),this.Tsi=new f4(this.XSt.NS.parallelTasksThreshold)}};async function _4(t,i,e,s){pi(t.references,i)||(t.references.push(i),await e.zSt(t,s))}function g4(t,i){switch(t.Km){case Ci.Dk:return p4(t.Z,i.audioTrackSelection);case Ci.NT:return p4(t.Z,i.textTrackSelection);default:return p4(t.Z,[])}}function p4(t,i){if(0===i.length)return t.length?[t[0]]:[];const e=[];for(const s of t)i.indexOf(s.bs)>-1&&e.push(s);return e}function m4(t,i){if(!t.length)return[];const e=[...t].sort(LV),s=e.filter(t=>t.kW<=i);return s.length>0?[s.pop()]:[e.shift()]}var w4=class{async Bsi(){await this.cPt.uPt(async t=>{await this.Nsi(t),await this.Msi(t),await this.Lsi(t),await this.Osi(t)})}async Nsi(t){const i=t.fPt,e=this.XSt.o;await i._S(e)}async Msi(t){const i=t.dPt,e=t.ect,s=this.XSt.Mc.sources[0];if(!pr(s))return;const n=ia(s.src),r=(await i.sPt(n,"manifestURL")).filter(t=>pi(t.references,this.XSt.o));for(const t of r)oi(t.references,this.XSt.o),0===t.references.length?(await i._S(t.key),await e._S(t.key)):await i.zSt(t)}async Lsi(t){const i=t.lPt,e=this.Fsi(),s=(await i.jEt(e)).filter(t=>pi(t.references,this.XSt.o));for(const t of s)oi(t.references,this.XSt.o),0===t.references.length?await i._S(t.key):await i.zSt(t)}Fsi(){if(!this.pCt)return[];const t=this.XSt.Mc.sources[0];if(!pr(t))return[];const i=ia(t.src),e=function(t){if(!t)return[];const i=[];for(const e of t.smt)for(const t of e.kmt)for(const e of t.Z)for(const t of e.KI)t.$ei&&i.push(t.$ei);return function(t){return t.reduce((t,i)=>(t.indexOf(i)<0&&t.push(i),t),[])}(i)}(this.pCt).map(t=>({src:t})).map(t=>ia(t.src));return[i,...e]}async Osi(t){const i=t.vPt,e=(await i.iPt()).filter(t=>pi(t.references,this.XSt.o));for(const t of e)oi(t.references,this.XSt.o),0===t.references.length?(await i._S(t.key),this.Usi(t)):await i.zSt(t)}Usi(t){}constructor(t,i,e){this.XSt=void 0,this.cPt=void 0,this.pCt=void 0,this.XSt=t,this.cPt=i,this.pCt=e}},y4=new class{Ret(t,i,e){return new w4(t,i,e)}};r(),r();var A4=class{get Ca(){return this.hu||(this.hu=function(t){return{renew(i){t.Vsi(i)}}}(this)),this.hu}Vsi(t){this.Hsi(t)}async Hsi(t){try{await this.Wsi.xsi(t)}catch(t){0,this.pE.Mot(Yt.ERROR)}}constructor(t,i){this.pE=void 0,this.Wsi=void 0,this.hu=void 0,this.pE=t,this.Wsi=i}},b4=class extends _o{get Oei(){return this.Wsi.Oei}get Ca(){return this.hu||(this.hu=function(t){let i;const e={get id(){return t.o},get status(){return t.hk},get source(){return t.Mc},get parameters(){return t.NS},get duration(){return t.ct},get cached(){return t.qsi._s()},get secondsCached(){return t.zsi},get percentageCached(){return t.Gsi},get bytes(){return t.Xsi},get bytesCached(){return t.jsi},get license(){return t.lQ.Ca},start(){t.Tn()},pause(){t.zx()},remove(){t._S()},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new QD(t,["y4t","Eot"],e),e}(this)),this.hu}get o(){return this.hS}get lQ(){return this.Qsi}get hk(){return this.Not}Mot(t){this.Not!==t&&(this.Not=t,this.So(new Tr))}get Mc(){return this.Ac}get NS(){return this.Ksi}get ct(){return this.Wsi.fsi.ZM}get qsi(){return this.Wsi.fsi.Xei}get zsi(){return this.Wsi.fsi.Gei}get Gsi(){return this.Wsi.fsi.jei}get Xsi(){return this.Wsi.vsi}get jsi(){return this.Wsi.fsi.qei}Tn(){this.Not===Yt.EVICTED||this.Not===Yt.DONE||this.Ysi()}async Ysi(){try{this.Mot(Yt.LOADING);const t=new at;this.Jsi=t,await this.Wsi.mi(t.Yg),this.Mot(Yt.DONE)}catch(t){D(t)?this.Mot(Yt.IDLE):this.Mot(Yt.ERROR)}finally{this.Jsi.zg()}}zx(){this.Jsi.Zg()}_S(){this.hk===Yt.LOADING?(this.wn("Eot",this.evictOnLoading),this.zx()):this.Zsi()}async Zsi(){try{const t=await this.Wsi.Psi();await y4.Ret(this,this.cPt,t).Bsi(),this.Wsi.fsi=Os.Kei,this.Mot(Yt.EVICTED)}catch(t){0,this.Mot(Yt.ERROR)}}constructor(t,i,e,s,n,r){super(),this.hS=void 0,this.Not=void 0,this.hu=void 0,this.Ac=void 0,this.Ksi=void 0,this.cPt=void 0,this.Wsi=void 0,this.Jsi=new at,this.Qsi=void 0,this.evictOnLoading=()=>{this.mn("Eot",this.evictOnLoading),this.Zsi()},this.hS=t,this.Ac=i,this.Ksi=e,this.cPt=s,this.Wsi=n.Ret(this,this.cPt,r),this.Qsi=new A4(this,this.Wsi),this.Not=1===this.Wsi.fsi.jei?Yt.DONE:Yt.IDLE,this.Wsi.wn("y4t",t=>{this.Rs(t),1===this.Gsi&&this.Mot(Yt.DONE)});const h=new Date,o=this.Ksi.expirationDate.getTime()-h.getTime();(function(t){return t<2147483647})(o)&&u(()=>this.Zsi(),o)}};var S4=class{Uei(t,i,e){const s=Ys();return this.Bei(s,t,i,e)}Bei(t,i,e,s){return new b4(t,i,e,this.cPt,this.$si,s)}constructor(t,i){this.cPt=void 0,this.$si=void 0,this.cPt=t,this.$si=i}};r();function T4(t){if(!t)throw new m("Unexpected - The cache parameters are undefined");const i=function(t){if(Z(t)&&!Ho(t,"%"))return x(t);return t}(t.amount);!function(t){if(function(t){return Z(t)&&Ho(t,"%")}(t)){const i=C(t);if(S(i)||i<0||i>100)throw new m("The amount as percentage must be between 0 and 100 percent.")}if(!Z(t)&&S(t))throw new m("The amount must be a number or a string")}(i);const e=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+30),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||jd(t)&&t>new Date}(t))throw new m("Invalid expiration date for the cache parameters")}(e);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(S(t)||t<0)throw new m("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return 5;if(S(t))throw new m("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:i,expirationDate:e,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var k4=class{set lii(t){this.tni=t,this.ini=0,this.eni=0,this.sni=void 0}get lii(){return this.tni}B6t(){if(!this.tni)return;const t=this.tni.A0t;for(;this.ini<t.length;){const i=t[this.ini];for(void 0===this.sni&&(this.sni=Pn(i),this.eni=0);this.eni<this.sni.length;){const t=this.sni[this.eni];if(this.eni++,void 0!==t.PKt)return t.PKt}this.ini++,this.sni=void 0}}hr(){for(this.lii=void 0,this.nT.Zg(),this.nT=new at;this.nni.length;)this.jti()}rni(t){return new O3(this.cPt.fPt,t,"temporary")}async EGt(t){const i=y3(t.QYt,this.VJ.ads.allowedMimeTypes);if(!i.length)return;const e=await eR.Ng.cz(i,Cn({sources:i}));if(!e.t.Qq())return;this.Wsi||(this.Wsi=new this.$si(this.nV));const s=this.cPt,n=new S4(s,this.Wsi),r=this.rni(n).Bei(Cn({sources:e.Mc}),T4({amount:10,bandwidth:HI.Ng.fW()||this.Rz.WY}),"temporary");this.nni.push(r);const h=this.Wsi.Ret(r,s,"temporary");this.nT.Zg(),this.nT=new at,$e(h.mi(this.nT.Yg),this.nT).then(Ct),this.hni(h,t)}constructor(t,i,e,s){this.cPt=void 0,this.Wsi=void 0,this.tni=void 0,this.VJ=void 0,this.nni=[],this.ini=0,this.eni=0,this.sni=void 0,this.nT=void 0,this.nV=void 0,this.$si=void 0,this.Rz=void 0,this.zti=async()=>{const t=this.B6t();t&&await this.EGt(t)},this.jti=()=>{const t=this.nni.shift();null==t||t._S()},this.hni=async(t,i)=>{let e=!1;for(;!e;)await t.ww("y4t"),e=1===t.fsi.jei;i.ct<5&&this.zti()},this.VJ=t,this.nV=i,this.nT=new at,this.$si=e,this.Rz=s,this.cPt=new eX}};r(),r();var E4={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new ve([0,0]).kM,references:[]},P4={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},x4=class t extends qV{async Zct(t,i,e,s){try{return await super.Zct(t,i,e,s)}catch(t){sa(t)}const n=await this.oni.Zct(t,i,e,s);return await this.ani(t,i,n),n}async ani(i,e,s){if(void 0===this.uni)return;const n=this.cPt.dPt,r=fG(i,e),h=await n.Wy(r);if(h)await _4(h,this.uni,n,this.Mei);else try{const i={buffer:s},{segmentMetadataEntry:e,segmentEntry:n}=t.Csi(r,i,this.uni);await this.cPt.uPt(async t=>{await t.dPt.zSt(e,this.Mei),await t.ect.zSt(n,this.Mei)})}catch(t){throw new V3("Unable to store segment with url: "+i,t)}}static Csi(t,i,e){return{segmentMetadataEntry:Mo({},E4,{key:t,segmentURLsegmentByteRange:t,references:[e]}),segmentEntry:Mo({},P4,{key:t,segmentURLsegmentByteRange:t,data:i,references:[e]})}}constructor(t,i,e,s,n){super(t),this.oni=void 0,this.uni=void 0,this.cPt=void 0,this.Mei=void 0,this.oni=new WV(i),this.cPt=e,this.uni=s,this.Mei=n}};var I4=class{Ret(t,i,e){void 0===e&&(e="persistent");const s=t.Mc.sources[0];if(ik(s))throw new m("Caching THEOlive sources is not supported");const n=Boolean(s.useCredentials),r=new JU(this.nV,Za.pk),h=new lG(this.nV,n),o=new bt(i.lPt,i.dPt,i.ect,i.vPt),a=function(t,i,e,s,n){return new x4(i,t,e,s,n)}(this.nV,o,i,t.o,e),u=new vn,c=new mG(pG(h,o),u,t);return this.cni(t,i,c,u,r,a,e)}constructor(t){this.nV=void 0,this.nV=t}},R4=class extends I4{cni(t,i,e,s,n,r,h){return new v4(t,i,e,s,n,r,h,xU())}},C4=R4,D4=class t extends C2{get B3t(){return this}static get C3t(){return mt.U0t}get C3t(){return t.C3t}K9t(t,i,e){i===iu.gnt&&this.n7?Wr(this.C6t([t])):this.dni.push(t)}LP(){return this.lni.Eii?this.lni.MP:this.Hst()}OP(t,i){}Nd(){return this.lni.ct}VP(){return this.lni.UP}HP(){}qP(){}tx(){return this.lni.$P}ix(t){this.$P!==t&&(this.lni.$P=t,this.So(new Ze(this.MP,this.Mx)))}ox(){return this.lni.hx}bx(){return this.lni.Ax}Tx(){return ve.iL()._s()}Cx(){return this.lni.Rx}Nx(){return this.lni.Bx}Lx(){return this.lni.Mx}Ox(t){this.Mx!==t&&(this.lni.Mx=t,this.So(new Ze(this.MP,this.Mx)))}async Gx(){if(this.fni)return;this.So(new Tc(this.MP)),this.vni(),this.dni.length&&(this.fni=this.C6t(this.dni),await this.fni,this.fni=void 0),await this._ni.eii(this.oa.LP());const t=this.gni;4!==t&&1!==t&&5!==t||(!this.G0t&&this.pni.length?this.mni():this.G0t?(this.wni=!0,this.lni.Gx()):(this.i3t(),this.oa.Gx()),this.gni=3)}zx(){3===this.gni&&(this.lni.zx(),this.gni=4)}qti(){this._ni.qti()}Tn(){this.gni=1,this._ni.Tn()}async Xx(){this._ni&&(this._ni.An(),this.yni(!1),this.eei.Xx(),this.gni=5,this.G0t&&(this._ni.dii(this.G0t.uZt),this.G0t=void 0)),this.n7=!1,this.wni=!1,Yo(this.pni),this.G3t&&(this.i3t(),this.oa.be()),Yo(this.dni),await this.lni.Xx(),await this.xii.hr()}rD(){this.lni.p$t(),this.eei.p$t()}Snt(t){this.Cd.ads.allowSkipAdBreak&&(this.Ani=!0,this.bni=t,this.rD())}qx(){this.xii.qx(),this.vni()}F3t(t){return!(t.type!==d.Bw||!this._ni||!this._ni.Zti(-1))&&(this._ni.Yti().then(Ct),!0)}be(){void 0!==this.lni.Iii&&(this.xii.be(),this.lni.be()),void 0!==this.eei.oei&&this.eei.be()}we(){this.xii.we(),this.lni.we(),this.eei.we()}async C6t(t){const[i,e]=await x3.Aei(t,this.nV,this.M3t);if(i.length)this._ni.uii(i),this.M3t.So(new wl),this.G3t||this.oa.hx||await this._ni.eii(this.oa.LP()),0!==this.gni&&5!==this.gni||this.Tn();else{if(0===e.length||e.some(t=>t!==Wi.VAST_EMPTY_RESPONSE&&t!==Wi.VAST_NO_ADS_AFTER_WRAPPER)){const t="Ads could not be loaded.";this.M3t.So(Pa.V3t(new Co(Ic.ADBLOCK,Wi.FILE_NOT_FOUND),t))}this.n7&&!this.G0t&&0===this.pni.length&&this.Sni()}}hii(t){for(const i of t)pi(this.pni,i)||this.pni.push(i);for(const i of t)this.n7&&!this.G3t&&this.mni()}async mni(){if(2!==this.gni&&!this.Tni){0,this.Tni=!0,this.gni=2;const t=this.G0t;this.kni(),this.G0t?(await this.G0t.uZt.Uti(this.M3t),this.Eni()||(this.Tni=!1),this.M3t.So(new b2(this.Pni(this.G0t))),await this.xni()):((null==t?void 0:t.uZt.Vti())&&this.M3t.So(new Fa(this.Pni(t))),this.Tni=!1,this.gni=1,this.Sni())}}Sni(){this.i3t(),this.oa.be(),this.oa.UP?this.oa.So(new At(this.oa.LP())):this.oa.Gx()}kni(){let t;if(this.G0t&&this.Eni())t=this.G0t.uZt;else{if(0===this.pni.length)return;t=this.pni.shift()}if(!t)return;const i=t.Rc();i?this.G0t=i:(this.G0t&&(this._ni.dii(this.G0t.uZt),this.G0t=void 0),this.G0t=void 0)}async xni(){const t=this.G0t?function(t){var i,e;const s=null==(e=t.OZt)||null==(i=e.dKt)?void 0:i.lKt();return void 0===s?void 0:new v1(s)}(this.G0t):void 0;if(t){if(!this.G0t)return;this.Ini=t,this.Rni(this.G0t.NKt),this.Cni(kl.CJt);const i=this.Ini.Rc();this.G0t.uZt.Vti()&&(this.eei.Nii(),1===this.G0t.uZt.aut&&this.M3t.So(new aU(this.Pni(this.G0t)))),await this.qii(i)}else this.gni=1,this.Tni=!1,this.G0t=void 0,this.mni()}async qii(t){if(t){var i;let s=it(t.PKt),n=it(t.RKt);var e;const r=null!=(e=null==(i=t.IKt)?void 0:i.tYt)?e:[],h=r.length>0,o=this.G0t,a=this.Pni(o);if(t.PKt){if(t.PKt.od=o,void 0!==o.Ont.skipOffset){const i=Ha.NZt(o.Ont.skipOffset,t.PKt.ct);void 0!==i&&i<t.PKt.ct&&(t.PKt.JYt=i)}const i=a.b0t(t.PKt,r,t.CKt,o.Ont);this.eei.Nii(),this.n5t(),await this.lni.qii(i,t.lt,{width:this.oa.xe.offsetWidth,height:this.oa.xe.offsetHeight}),s=!0}if(t.RKt){const i=t.RKt.DKt[0];if(i.od=o,void 0!==o.Ont.skipOffset){const t=Ha.NZt(o.Ont.skipOffset,this.oa.Nd());t&&(i.od.JYt=t)}const e=s?[]:r,h=a.S0t(i,e,t.RKt,t.CKt,o.Ont);s&&this.lni.nei(),await this.eei.qii(h,t.lt,{width:this.oa.xe.offsetWidth,height:this.oa.xe.offsetHeight}),n=!0}if(s){this.gni=3,this.lni.be();const t=0===a._Ot;this.wni=t,this.xii.zx(),this.lni.Gx(),this.oa.zx(),this.oa.we(),this.n5t(),this.lni.Zii()}n&&(this.gni=3,this.eei.be(),this.eei.Zii()),(s||n||h)&&this.Dni(t.TKt),s||n||await this.Bni(),!s&&n&&(this.Eni()||this.pni.length>0?this.mni():(this.Sni(),this.G0t=o))}else null===t?await this.Bni():this.yni(!0)}Bni(){const t=this.Ini;return this.qii(t&&t.Rc())}yni(t){this.Cni(kl.DJt),this.Nni(),this.gni=1;const i=void 0!==this.G0t&&this.G0t.uZt.Oti();if(this.Tni=!1,!i||this.Ani){if(!this.G3t)return;this.oa.be(),!this.oa.UP&&t&&this.oa.Gx(),void 0!==this.bni&&this.oa.OP(this.bni),this.i3t(),this.Ani=!1,this.bni=void 0}else t&&(this.gni=1,this.mni())}i3t(){this.Mni(),super.i3t()}Mni(){if(this.oa.UP&&(this.gni=5),this.G0t){const t=this.G0t.uZt;t.Vti()&&this.M3t.So(new Fa(this.Pni(this.G0t))),this._ni.dii(t),this.G0t=void 0}}Rni(t){this.Lni=this.Lni.concat(t)}Nni(){this.Lni=[]}Oni(t){this.oa.xe.appendChild(t)}Cni(t){for(const i of this.Lni)i.eX===t&&L$(i.eventURL)}Dni(t){this.lni.Aii(kl.TJt);for(const i of t)L$(i)}get ynt(){return this.G0t?this.Pni(this.G0t):null}get mnt(){return this.G0t?[this.lni.Iii,this.eei.oei].filter(it):[]}get Ant(){const t=this.pni.concat(this._ni.Ant.filter(t=>!t.P0t()));return De(t,t=>t.Cti.Jc.filter(t=>!t.P0t()))}get bnt(){return this._ni.Ant.map(t=>t.Cti)}knt(t){const i=this.J9t();for(const e of i)V$(e.sources,e.timeOffset)||t.M6(e,iu.gnt,!1)}J9t(){const t=[];for(const i of this.mnt.concat(this.Ant))t.push(i.Ont);const i=this.pni.concat(this._ni.Ant.filter(t=>!t.P0t()));for(const e of i)for(const i of e.A0t)i.W||t.push(i.Ont);return t.push(...this.dni),Bo(t)}Eni(){return!!this.G0t&&Pn(this.G0t).some(t=>t.PKt)}Pni(t){return t.uZt.Cti}yei(){return this.Fni}Wx(){return this.xii.Wx()}xP(){return this.xii.xP()}K3t(t){this._ni.K3t(t)}async kn(){await super.kn(),this.oa.mn(d.uo,this.vni),this.M3t.CK(this.lni.M3t),this.M3t.CK(this.eei.M3t),this.M3t.CK(this._ni),this.lni.kn(),this.eei.kn(),await this.xii.kn()}constructor(t,i,e,s,n,r){super(t,i),this.fni=void 0,this.lni=void 0,this.eei=void 0,this._ni=void 0,this.pni=[],this.gni=0,this.G0t=void 0,this.Ini=void 0,this.Lni=[],this.Fni=void 0,this.Tni=!1,this.n7=!1,this.wni=!0,this.xii=void 0,this.Ani=!1,this.bni=void 0,this.dni=[],this.nV=void 0,this.Uni=t=>{t.type===d.uo&&this.wni?this.wni=!1:this.So(t)},this.vni=()=>{this.n7=!0},this.Vni=async()=>(this.gni=1,await this.lni.Nii(),this.qii(this.Ini.Rc())),this.Hni=async t=>{const i=new Co(Ic.PLAYBACK,Wi.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.M3t.So(Pa.V3t(i,t)),await this.lni.Nii(),this.qii(this.Ini.Rc())},this.Wni=()=>(this.eei.Nii(),this.qii(this.Ini.Rc())),this.qni=t=>{const i=new Co(Ic.PLAYBACK,Wi.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.M3t.So(Pa.V3t(i,t)),this.eei.Nii(),this.qii(this.Ini.Rc())},this.nV=r,this.xii=e,this.eei=new P3(this.qni,this.Wni,this),this.lni=new k3(this.Hni,this.Vni,this.eei,s,this,t.Wu,e),this.Oni(this.eei.fii),this.Oni(this.lni.fii);const h=new k4(s,r,R4,n);this._ni=new g3(this.oa,this,this.M3t,h),this.lni.lw(this.Uni),this.eei.lw(this.Rs),this.M3t.au(this.lni.M3t),this.M3t.au(this.eei.M3t),this.M3t.au(this._ni),this.Fni=new p1(this,this.oa),this.Wu.wn(Rh.yn,this.Rs),this.oa.wn(d.uo,this.vni)}};Qh.Ng.zz(new class{get P3t(){return D4.C3t}qz(t){return t&&("string"!=typeof t.integration||t.integration===ru.DEFAULT||t.integration===ru.CSAI||t.integration===ru.THEO)}x3t(t,i,e){const s=new EF(t.Ost,t.Ql,e);s.ust(t.xe);const n=new dR(t.xe,e,t.SP,t.Dst,t.Fx,s,t.Ql);return new D4(t,i,n,e,t.Dst,t.SP)}M6(t,i,e,s){e.K9t(t,i,s)}sj(t){const i=U0(t.sources);if(!i)return;const e={integration:ru.CSAI,sources:i};"vast"===e.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===e.sources.type&&void 0!==t.timeOffset&&Ye("Do not set timeOffset for VMAP ad sources. VMAP ads have their own offsets included.");const s=Ac(t.timeOffset);void 0!==s&&(e.timeOffset=s);const n=Ac(t.skipOffset);return void 0!==n&&(e.skipOffset=n),e}}),r(),r();var B4=class{VY(){var t;this.j6||(null==(t=this.vti)||t.initialize(),this.j6=!0)}get fii(){return this.Q1t}get zni(){return this.Gni.offsetHeight}get Xni(){return this.Gni.offsetWidth}get jni(){return this.vti}Qni(t){"linear"===t?this.Q1t.style.marginTop="0px":"nonlinear"===t&&(this.Q1t.style.marginTop="-45px")}be(){this.Q1t.style.opacity="1",this.Q1t.style.pointerEvents=""}we(){this.Q1t.style.opacity="0",this.Q1t.style.pointerEvents="none"}zg(){var t;null==(t=this.vti)||t.destroy(),this.vti=void 0}constructor(t,i){this.vti=void 0,this.Q1t=void 0,this.Yit=void 0,this.Gni=void 0,this.j6=!1,this.Yit=t;const e=h.createElement("div");e.className="theoplayer-ima-wrapper",oa(e),e.style.zIndex="10",Qt.Ks&&function(t,i){t.addEventListener(i,Bl)}(e,"mousedown"),i.appendChild(e);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.Gni=s,e.appendChild(s),this.Q1t=e,this.vti=new google.ima.AdDisplayContainer(this.Gni,this.Yit)}};r(),r(),r();var N4=class{get UYt(){return this.Kni.getAdId()}get V7t(){const t=this.Kni.getAdPodInfo();if(void 0!==t)try{return{i7t:t.getAdPosition(),p0t:t.getMaxDuration(),Yni:t.getPodIndex(),_Ot:t.getTimeOffset(),e7t:t.getTotalAds(),Jni:t.getIsBumper()}}catch(t){return}}get yKt(){return this.Kni.getAdSystem()}get Zni(){return this.Kni.getAdvertiserName()}get cYt(){var t;return null!=(t=this.Kni.getApiFramework())?t:void 0}get IKt(){return this.iYt.map(t=>({lYt:t.getAdSlotId(),qT:t.getContentType(),p4t:t.getContent(),Mi:t.getHeight(),Ti:t.getWidth()}))}get qT(){var t;return null!=(t=this.Kni.getContentType())?t:void 0}get GKt(){return this.Kni.getCreativeId()}get I9t(){return this.Kni.getCreativeAdId()}get $ni(){return this.Kni.getDealId()}get dB(){return this.Kni.getDescription()}get ct(){return this.Kni.getDuration()}get Ti(){return this.Kni.getWidth()}get Mi(){return this.Kni.getHeight()}get tJt(){var t;return null!=(t=this.Kni.getMediaUrl())?t:void 0}get tri(){return this.Kni.getMinSuggestedDuration()}get P9t(){return this.Kni.getSkipTimeOffset()}get iri(){return this.Kni.getSurveyUrl()}get dq(){return this.Kni.getTitle()}get k9t(){return this.Kni.getTraffickingParameters()}get E9t(){return this.Kni.getTraffickingParametersString()}get CKt(){return this.Kni.getUniversalAdIds().map(t=>({R9t:t.getAdIdRegistry(),C9t:t.getAdIdValue()}))}get Ati(){return this.Kni.getUiElements()}get x9t(){return this.Kni.getVastMediaBitrate()}get S9t(){return this.Kni.getVastMediaHeight()}get b9t(){return this.Kni.getVastMediaWidth()}get m9t(){return this.Kni.getWrapperAdIds()}get w9t(){return this.Kni.getWrapperAdSystems()}get y9t(){return this.Kni.getWrapperCreativeIds()}get D7t(){return this.Kni.isLinear()}constructor(t){this.Kni=void 0,this.iYt=void 0,this.Kni=t;const i=new google.ima.CompanionAdSelectionSettings;i.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,i.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,i.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.iYt=t.getCompanionAds(0,0,i)}};function M4(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var L4=class extends Ne{Ox(t){var i;null==(i=this.y0t)||i.setVolume(t)}Lx(){return this.y0t.getVolume()}i9t(){return this.y0t.getRemainingTime()}zg(){Yo(this.qc),this.sc.mn(Rh.yn,this.eri),this.y0t.removeEventListener(google.ima.AdEvent.Type.LOADED,this.sri),this.y0t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener);for(const t of M4())this.y0t.removeEventListener(t,this.forwardAdEventListener);this.y0t.destroy()}Tn(){this.y0t.start()}cti(){this.y0t.resume()}zx(){this.y0t.pause()}rD(){this.y0t.skip()}Xx(){this.y0t.stop()}O7t(){const t=this.y0t.getCurrentAd();if(t)return this.rri(t)}gti(){return this.y0t.getCuePoints()}rri(t){let i=Jr(this.qc,i=>i.Kni===t);return i||(i=new N4(t),this.qc.push(i)),i}kti(t){this.y0t.updateAdsRenderingSettings(V4(t))}constructor(t,i,e){super(),this.y0t=void 0,this.vti=void 0,this.sc=void 0,this.qc=[],this.sri=t=>{t.getAd().isLinear()?this.vti.Qni("linear"):this.vti.Qni("nonlinear")},this.eri=()=>{this.y0t.resize(this.vti.Xni,this.vti.zni,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const i=t.getAd(),e=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:Ce.V6t,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:Ce.H6t,[google.ima.AdEvent.Type.CLICK]:Ce.W6t,[google.ima.AdEvent.Type.DURATION_CHANGE]:Ce.Rw,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:Ce.q6t,[google.ima.AdEvent.Type.STARTED]:Ce.z6t,[google.ima.AdEvent.Type.IMPRESSION]:Ce.G6t,[google.ima.AdEvent.Type.PAUSED]:Ce.Gz,[google.ima.AdEvent.Type.RESUMED]:Ce.X6t,[google.ima.AdEvent.Type.AD_PROGRESS]:Ce.j6t,[google.ima.AdEvent.Type.AD_BUFFERING]:Ce.Q6t,[google.ima.AdEvent.Type.FIRST_QUARTILE]:Ce.K6t,[google.ima.AdEvent.Type.MIDPOINT]:Ce.mJt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:Ce.Y6t,[google.ima.AdEvent.Type.COMPLETE]:Ce.wJt,[google.ima.AdEvent.Type.USER_CLOSE]:Ce.J6t,[google.ima.AdEvent.Type.LINEAR_CHANGED]:Ce.Z6t,[google.ima.AdEvent.Type.LOADED]:Ce.$6t,[google.ima.AdEvent.Type.AD_CAN_PLAY]:Ce.t8t,[google.ima.AdEvent.Type.AD_METADATA]:Ce.i8t,[google.ima.AdEvent.Type.AD_BREAK_READY]:Ce.e8t,[google.ima.AdEvent.Type.INTERACTION]:Ce.s8t,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:Ce.n8t,[google.ima.AdEvent.Type.SKIPPED]:Ce.r8t,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:Ce.h8t,[google.ima.AdEvent.Type.LOG]:Ce.o8t,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:Ce.a8t,[google.ima.AdEvent.Type.VOLUME_CHANGED]:Ce.u8t,[google.ima.AdEvent.Type.VOLUME_MUTED]:Ce.c8t}[t]}(t.type),s={type:e,date:new Date,Int:i?this.rri(i):void 0,S7t:V2(e,t.getAdData())};this.So(s)},this.forwardAdErrorEventListener=t=>{this.So({date:new Date,Int:void 0,type:F2.d8t,S7t:{n9t:q2(t.getError())}})},this.y0t=t,this.vti=i,this.sc=e,this.sc.wn(Rh.yn,this.eri),this.y0t.init(this.vti.Xni,this.vti.zni,google.ima.ViewMode.NORMAL),this.y0t.addEventListener(google.ima.AdEvent.Type.LOADED,this.sri),this.y0t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener);for(const t of M4())this.y0t.addEventListener(t,this.forwardAdEventListener)}};r();var O4=class extends Oi{get hri(){return this.ari}get fii(){return this.Q1t}xa(){return new F4(this.ari)}constructor(t,i){super("xti"),this.ari=void 0,this.Q1t=void 0,this.ari=t,this.Q1t=i}},F4=class extends wp{get adsManager(){return this.ari}constructor(t){super("adsmanagerloaded"),this.ari=void 0,this.ari=t}},U4=class extends Ne{dti(){var t;null==(t=this.lti)||t.contentComplete()}async C6t(t,i,e){if(this.cri)throw new m("Only one ImaAdsRequest can be made at a time.");if(!this.dri.jni)throw new m("AdDisplayContainer is not initialized.");this.lti=new google.ima.AdsLoader(this.dri.jni),this.lti.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.lti.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.cri=new pa,this.lri=i,this.fri=e;const s=new google.ima.AdsRequest;return t.G5t?s.adTagUrl=t.G5t:t.X5t&&(s.adsResponse=t.X5t),s.linearAdSlotWidth=t.U5t,s.linearAdSlotHeight=t.V5t,s.nonLinearAdSlotWidth=t.H5t,s.nonLinearAdSlotHeight=t.W5t,s.contentDuration=t.Q5t,s.setAdWillAutoPlay(t.q5t),s.setAdWillPlayMuted(t.z5t),t.j5t&&(s.omidAccessModeRules=t.j5t),this.lti.requestAds(s),this.cri.Qy}zg(){var t;void 0!==this.lti&&(this.lti.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.lti.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.lti.destroy(),this.lti=void 0),null==(t=this.cri)||t.jy("AdsLoader destroyed"),this.cri=void 0}constructor(t,i){super(),this.lti=void 0,this.sc=void 0,this.dri=void 0,this.cri=void 0,this.lri=void 0,this.fri=void 0,this.onAdsManagerLoadedListener=t=>{if(this.lri&&this.fri&&this.cri){var i;const e=V4(this.fri),s=this.lri,n=t.getAdsManager({get currentTime(){return s.MP},get duration(){return s.ct}},e),r=new L4(n,this.dri,this.sc);this.So(new O4(n,this.dri.fii)),null==(i=this.cri)||i.Xy(r),this.cri=void 0}},this.onAdsManagerErrorListener=t=>{var i;const e={Py:t.getError().getMessage(),s7t:t.getError().getVastErrorCode(),YJt:t.getError().getErrorCode(),Km:H2(t.getError().getType()),n7t:void 0};null==(i=this.cri)||i.jy(e),this.cri=void 0},this.sc=i,this.dri=t}};function V4(t){const i=new google.ima.AdsRenderingSettings;return i.enablePreloading=t.bti,t.Ati&&(i.uiElements=t.Ati),i.mimeTypes=t.yti,void 0!==t.Tti&&(i.playAdsAfterTime=t.Tti),void 0!==t.Sti&&(i.loadVideoTimeout=t.Sti),void 0!==t.T9t&&(i.bitrate=t.T9t),void 0!==t.Tti&&(i.playAdsAfterTime=t.Tti),i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i}r();var H4=class extends Ne{get MP(){return this.oa.kx?this.vri:this.oa.LP()}get ct(){return this.oa.Nd()}get $P(){return this.oa.$P}get Mx(){return this.oa.Mx}hr(){this.vri=0}constructor(t){super(),this.vri=void 0,this.oa=void 0,this.oa=t,this.vri=this.oa.LP(),this.oa.wn(d._y,()=>{this.oa.kx||(this.vri=this.oa.LP()),this.So(new Si(this.MP,void 0))})}};c3.Ng.registerWebImaAdPlayerConstructor(function(t,i,e){o3(e);const s=a3(e)?t.Wx():void 0,n=new B4(s,t.xe),r=new U4(n,t.Wu),h=new H4(t);return new u3(t,i,e,t.Nst,n,r,h)}),r(),r(),r();var W4=class extends Oc{get _ri(){return this.oa===this.Qst?this.J4t:this.Qst}gr(t,i,e,s,n){(n||!s.hx||s.UP)&&this.oa.hx&&this.oa.Gx()}OP(t,i){}BP(t){}gri(t,i){const e=t-this.J4t.pri;return super.OP(e,i)}wri(t){return super.BP(t)}NP(){return this.Qst.bt}nu(){return this.Qst.nu()}Nd(){return this.Qst.Nd()}Tx(){const t=ve.jn(this.Qst.Tx()).Ny(this.J4t.pri);if(this.yri())return t._s();const i=ve.jn(this.J4t.Tx());let e=i;return m6(this.Qst)||(e=t.OM(i)),e=e.Mn(ve.tL(0,this.LP())),e._s()}LP(){return this.Ari(super.LP())}Ari(t){return this.J4t.bri?this.J4t.bri:this.oa===this.J4t?this.J4t.Sri+t:this.J4t.pri+t}DP(){return this.Tri(super.LP())}Tri(t){return this.J4t.kri?this.J4t.kri:this.oa===this.J4t&&this.J4t.Eri?new Date(this.J4t.Eri.getTime()+1e3*t):this.Qst.CP}RP(){const t=ve.jn(this.Qst.RP()).Ny(this.J4t.pri);if(this.yri())return t._s();const i=ve.jn(this.J4t.RP());if(t.An(t.V-1)<i.Tn(0))return i._s();return t.OM(i)._s()}$x(t){switch(t.type){case d._y:return this.So(new Si(this.Ari(t.currentTime),t.currentProgramDateTime)),!0;case d.Qw:return this.So(new H(this.Ari(t.currentTime))),!0;case d.uo:return this.So(new Tc(this.Ari(t.currentTime))),!0;case d.jw:return this.So(new hl(this.Ari(t.currentTime))),!0;case d.Bw:return this.So(new At(this.Ari(t.currentTime))),!0;case d.$w:return this.So(new F(this.Ari(t.currentTime))),!0;case d.Zw:return this.So(new Es(this.Ari(t.currentTime))),!0;case d.Kw:return this.So(new aa(this.Ari(t.currentTime),t.playbackRate)),!0;case d.gy:return this.Pri?(this.So(new Ze(this.Ari(t.currentTime),t.volume)),!0):(this.Pri=!0,!0);case d.Cw:return this.So(new G(this.Ari(t.currentTime),t.readyState)),!0;case Do.wM:return this.So(new lo(this.Ari(t.currentTime),t.readyState)),!0;case Do.yM:return this.So(new qt(this.Ari(t.currentTime),t.readyState)),!0;case Do.AM:return this.So(new ot(this.Ari(t.currentTime),t.readyState)),!0;case Do.bM:return this.So(new ut(this.Ari(t.currentTime),t.readyState)),!0;case Do.wI:return this.So(new ou(this.Ari(t.currentTime),t.readyState)),!0;case Do.SM:return this.So(new ux(this.Ari(t.currentTime))),!0;case Do.TM:return this.So(new ce(this.Ari(t.currentTime))),!0;case d.Dw:return this.So(new eG(this.Ari(t.currentTime),t.initDataType,t.initData)),!0}return super.$x(t)}zx(){this.Qst.zx(),this.J4t.zx()}async kn(){await super.kn(!0)}constructor(t,i,e){super(e),this.Qst=void 0,this.J4t=void 0,this.Pri=!0,this.Qst=t,this.J4t=i}};function q4(t,i){i.$P=t.$P,i.Mx=t.Mx}r();var z4=class extends W4{gr(t,i,e,s,n){super.gr(t,i,e,s,n),this._ri.zx();this.xri(i,e).style.display="block"}mr(t,i,e){this.xri(i,e).style.display="none"}constructor(t,i,e){super(t,i,e)}},G4=class extends z4{yri(){return!0}xri(t,i){return t}Iri(t,i){return i}OP(t,i){return super.gri(t,i)}BP(t){return super.wri(t)}constructor(t,i){super(t,i,t)}},Lc=class extends W4{yri(){return!1}gr(t,i,e,s,n){super.gr(t,i,e,s,n),this.Pri=!1,this.oa.Rri(),i.style.display="block"}mr(t,i,e){this.oa.Cri(),i.style.display="none"}Nd(){return this.oa.Nd()}constructor(t,i){super(t,i,i)}},X4=class extends z4{yri(){return!1}xri(t,i){return i}Iri(t,i){return t}gr(t,i,e,s,n){super.gr(t,i,e,s,n);for(const t of[i,e])t.style.transition=""}mr(t,i,e){super.mr(t,i,e)}Gx(){super.Gx(),Qt.X_&&(this._ri.$P=!0,this._ri.Gx())}constructor(t,i){super(t,i,i)}};function j4(t){return t instanceof Lc}r(),r();var Q4=class extends Oi{xa(){return new K4(this.interstitial.wnt())}constructor(t){super("Dri"),this.interstitial=void 0,this.interstitial=t}},K4=class extends wp{constructor(t){super("interstitialupdate"),this.interstitial=void 0,this.interstitial=t}},Ws=function(t){return t.SINGLE="SINGLE",t.DOUBLE="DOUBLE",t.LSHAPE_AD="LSHAPE_AD",t.LSHAPE_CONTENT="LSHAPE_CONTENT",t}({}),Y4=class extends Ne{get Bri(){var t,i;const e=null!=(i=null!=(t=this.Nri)?t:this.WA)?i:this.yFt;return void 0!==e?this.EO+e:this.VO?this.VO:void 0}get ct(){const t=this.Bri;return void 0===t?void 0:t-this.EO}get y4t(){var t;return null!=(t=this.A4t)?t:0}Mri(t){if(!this.ct)return;const i=(t-(this.EO+this.Lri))/this.ct;i<this.y4t||(this.A4t=_.min(i,1),1===this.A4t&&(this._x=!0))}er(t){var i,e,s,n;this.WA=null!=(i=t.ct)?i:this.WA,this.VO=null!=(e=t.PO)?e:this.VO,this.Nri=null!=(s=t.Ori)?s:this.Nri,this.Lri=null!=(n=t.Fri)?n:this.Lri,this.Uri(),this.So(new Q4(this))}Uri(){void 0===this.WA&&void 0!==this.VO?this.WA=this.VO-this.EO:void 0===this.VO&&void 0!==this.WA&&(this.VO=this.EO+this.WA)}constructor(t){super(),this.o=void 0,this.EO=void 0,this.Rvt=void 0,this.Vri=void 0,this.Hri={},this.yFt=void 0,this.VO=void 0,this.WA=void 0,this.Nri=void 0,this.A4t=void 0,this.Lri=0,this._x=!1,this.o=t.o,this.EO=t.EO,this.VO=t.PO,this.yFt=t.DLt,this.WA=t.ct,this.Nri=t.Ori,this.Rvt=t.Rvt,this.Vri=t.Vri,this.Uri()}};r(),r();var J4=class extends W4{gr(t,i,e,s,n){super.gr(t,i,e,s,n);const r=h.createElement("a");if(r.style.backgroundImage="url('"+this.Wri+"')",r.style.backgroundSize="contain",r.style.backgroundPosition="center",r.style.backgroundRepeat="no-repeat",this.qri&&(r.href=this.qri,r.target="Xu",r.setAttribute("rel","noopener")),this.zri){const t=h.createElement("img");t.src=this.zri,t.style.visibility="hidden",r.appendChild(t)}oa(r),this.Gri=r,Zd(t,this.Gri)}mr(t,i,e){i.addEventListener("transitionend",this.Xri)}constructor(t,i,e,s,n,r){super(t,i,e),this.Gri=void 0,this.Wri=void 0,this.qri=void 0,this.zri=void 0,this.Xri=t=>{var i;t.target.removeEventListener("transitionend",this.Xri);const e=null==(i=this.Gri)?void 0:i.parentElement;void 0!==this.Gri&&e&&(e.removeChild(this.Gri),this.Gri=void 0)},this.Wri=s,this.qri=n,this.zri=r}},Z4=class extends J4{yri(){return!0}gr(t,i,e,s,n){super.gr(t,i,e,s,n),q4(this.oa,this._ri),this._ri.$P=!0,this.jri=this.Qst.nt.II.filter(t=>t.Xk===xh.Kn);for(const t of this.jri)t.Xk=xh.Nh;i.style.display="block",i.style.width="45%",i.style.height="45%",i.style.top="27.5%",i.style.transform="scale("+100/45+")",i.style.transformOrigin="left center",e.style.right="0",e.style.top="27.5%",e.style.display="block",e.style.width="45%",e.style.height="45%",e.style.transformOrigin="right center",e.style.transform="scale(0)",e.getBoundingClientRect(),e.style.transition="transform 1s ease-in-out",e.style.transform="scale(1) translateX(-"+2.5/45*100+"%)",i.style.transition="transform 1s ease-in-out",i.style.transform="scale(1) translateX("+2.5/45*100+"%)"}mr(t,i,e){var s;super.mr(t,i,e),i.style.width="100%",i.style.height="100%",i.style.top="",i.style.transform="scale(0.45) translateX("+2.5/45*100+"%)",i.style.transformOrigin="left center",i.style.transition="",i.getBoundingClientRect(),i.style.transform="",i.style.transition="transform 1s ease-in-out",i.addEventListener("transitionend",this.Qri),e.style.transform="scale(0)",e.addEventListener("transitionend",this.Kri);for(const t of null!=(s=this.jri)?s:[])t.Xk=xh.Kn;this.jri=void 0}HP(){return this.Qst.HP()||this.J4t.HP()}qP(){return this.Qst.qP()||this.J4t.qP()}bx(){return _.min(this.Qst.Ax,this.J4t.Ax)}Gx(){this.Qst.Gx(),this.J4t.Gx()}constructor(t,i,e,s,n){super(t,i,i,e,s,n),this.jri=void 0,this.Qri=t=>{const i=t.target;i.removeEventListener("transitionend",this.Qri),i.style.transform="",i.style.transition="",i.style.transformOrigin=""},this.Kri=t=>{const i=t.target;i.removeEventListener("transitionend",this.Kri),i.style.display="none",i.style.width="100%",i.style.height="100%",i.style.right="",i.style.top="",i.style.transition="",i.style.transform="",i.style.transformOrigin=""}}};r();var $4=class extends J4{gr(t,i,e,s,n){super.gr(t,i,e,s,n),this._ri.zx();const r=this.xri(i,e);r.style.display="block",r.getBoundingClientRect()}constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.Yri=t=>{const i=t.target;i.removeEventListener("transitionend",this.Yri),i.style.transition=""}}},t5=class extends $4{yri(){return!0}xri(t,i){return t}Iri(t,i){return i}gr(t,i,e,s,n){super.gr(t,i,e,s,n);const r=this.xri(i,e);r.style.transform="\n            translate(-50%, -50%)\n            scale(calc(43/60))\n            translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        ",r.style.transition="transform 1s ease-in-out"}mr(t,i,e){super.mr(t,i,e);const s=this.xri(i,e);s.style.display="",s.style.transform="",s.addEventListener("transitionend",this.Yri)}constructor(t,i,e,s,n){super(t,i,t,e,s,n)}},i5=class extends $4{yri(){return!1}xri(t,i){return i}Iri(t,i){return t}gr(t,i,e,s,n){super.gr(t,i,e,s,n);for(const t of[i,e])t.style.transform="\n                translate(-50%, -50%)\n                scale(calc(43/60))\n                translate(calc(50% + 100%/30), calc(50% + 100%/30))\n            ",t.style.transition="transform 1s ease-in-out"}mr(t,i,e){super.mr(t,i,e);const s=this.xri(i,e);s.style.display="none",s.style.transform="",s.style.transition="";const n=this.Iri(i,e);n.style.display="",n.getBoundingClientRect(),n.style.transform="",n.addEventListener("transitionend",this.Yri)}Gx(){super.Gx(),Qt.X_&&(this._ri.$P=!0,this._ri.Gx())}constructor(t,i,e,s,n){super(t,i,i,e,s,n)}};r(),r(),r();var e5=class extends Oc{gr(t,i){}mr(t){}},s5=class extends e5{OP(t,i){}},n5=class extends e5{OP(t,i){}gr(t,i){i.style.backgroundImage="url('"+this.Wri+"')",i.style.backgroundSize="contain",i.style.backgroundPosition="center",t.style.transition="transform 1s ease-in-out",t.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        "}mr(t){t.style.transform="",t.addEventListener("transitionend",this.Yri)}constructor(t,i){super(t),this.Wri=void 0,this.Yri=t=>{const i=t.target;i.removeEventListener("transitionend",this.Yri),i.style.transition="transform 1s ease-in-out"},this.Wri=i}};r();var r5=class extends Oi{xa(){return new h5(this.interstitial.wnt())}constructor(t){super("Jri"),this.interstitial=void 0,this.interstitial=t}},h5=class extends wp{constructor(t){super("interstitialbegin"),this.interstitial=void 0,this.interstitial=t}};function o5(t){return{get id(){return t.o},get duration(){return t.ct},get startTime(){return t.EO},get type(){return"adbreak"},get layout(){return function(t){switch(t){case Ws.SINGLE:return"single";case Ws.DOUBLE:return"double";case Ws.LSHAPE_CONTENT:case Ws.LSHAPE_AD:return"l-shape"}}(t.Zri)},get ads(){return t.Jc.map(t=>t.wnt())},get backdropUri(){return t.$ri},get adTagParameters(){return t.Hri},set adTagParameters(i){Kd(i)?t.Hri=i:zd.dm("Incorrect ad tag parameters type, expecting a Record.")}}}r(),r(),r(),r();var a5=function(t){return t.image="image",t}({}),u5=function(t){return t.png="png",t.svg="svg",t}({}),c5=class extends Y4{get Km(){return"overlay"}get AYt(){return this.thi}get ihi(){return this.ehi}er(t){var i,e;this.ehi=null!=(i=t.imageUrl)?i:this.ehi,this.thi=null!=(e=t.clickThrough)?e:this.thi,super.er(t)}wnt(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get type(){return"overlay"},get id(){return t.o},get duration(){return t.ct},get startTime(){return t.EO},get clickThrough(){return t.AYt},get imageUrl(){return t.ihi},get position(){return function(t){return{get top(){return t.z9},get bottom(){return t.q9},get left(){return t.W9},get right(){return t.H9}}}(t.mo)},get size(){return function(t){return{get width(){return t.Ti},get height(){return t.Mi}}}(t.Vy)},get adTagParameters(){return t.Hri},set adTagParameters(i){Kd(i)?t.Hri=i:zd.dm("Incorrect ad tag parameters type, expecting a Record.")}}}(this)}constructor(t){super(t),this.hu=void 0,this.shi=void 0,this.mo=void 0,this.Vy=void 0,this.nhi=void 0,this.rhi=void 0,this.LJt=void 0,this.thi=void 0,this.ehi=void 0,this.shi=t.Km,this.mo=t.mo,this.Vy=t.Vy,this.nhi=t.nhi,this.rhi=t.rhi,this.LJt=t.LJt,this.thi=t.hhi}};r();var d5=class extends Y4{get Km(){return"adbreak"}get Jc(){return this.qc}er(t){var i;t.ad&&this.qc.push(t.ad),this.$ri=null!=(i=t.backdropUri)?i:this.$ri,this.ohi=t.backdropClickThrough,this.ahi=t.backdropImpressionUrl,super.er(t)}wnt(){var t;return null!=(t=this.hu)?t:this.hu=o5(this)}constructor(t){super(t),this.hu=void 0,this.qc=[],this.nyt=void 0,this.uhi=void 0,this.Zri=void 0,this.dhi=void 0,this.lhi=void 0,this.fhi=void 0,this.vhi=void 0,this.$ri=void 0,this.ohi=void 0,this.ahi=void 0,this.nyt=t.nyt,this.uhi=t.uhi,this.Zri=t.Zri||Ws.SINGLE,this.dhi=t.dhi,this.lhi=t.lhi,this.vhi=t._hi,this.$ri=t.ghi,this.fhi=t.fhi}};r(),r();var l5=class extends Le{phi(t){this.qc.push(t)}get _x(){return this.mhi._x}get MZt(){return mt.ont}get p0t(){var t;return null!=(t=this.mhi.ct)?t:-1}get _Ot(){return this.mhi.EO}get X$t(){}get whi(){return this.mhi}constructor(t){var i;super(t.EO),this.mhi=void 0,this.mhi=t,this.m0t=null!=(i=this.mhi.ct)?i:-1}};r(),r();var Fn=class extends Ps{xa(){return _a(this)}get MZt(){return mt.ont}constructor(t){super(t,function(t){return t===Ws.LSHAPE_CONTENT?bi.a4t:bi.hZt}(t.whi.Zri)),t.phi(this)}};var f5=class extends Fn{constructor(t,i){super(t),this.WA=_.min(i,this.od.p0t)}};r();var Wn="ott_placement",v5=class{async yhi(t,i,e){const s=new wr(i);s.set("iu",t.Ahi),s.set("sz",t.bhi),s.set("c",String(this.Shi));const n="https://securepubads.g.doubleclick.net/gampad/adx?"+s.toString();return await this.Thi(n,e)}async Thi(t,i){const e=new $n({Yu:t,dk:M.DT,Uk:X.GET,Yg:i});try{const t=await this.nV.lk(e);return await t.ck()}catch(t){throw new Co(Ic.NETWORK,Wi.UNKNOWN_AD_RESPONSE,"The ad source could not be loaded.",t)}}constructor(t){this.Shi=(new Date).getTime(),this.nV=void 0,this.nV=t}},_5=function(t){return t.khi="0",t.jw="1",t.Ehi="2",t.PICTURE_IN_PICTURE="3",t.Phi="4",t.xhi="5",t.Ihi="99",t}({});function g5(t){switch(t){case Ws.DOUBLE:return"3";case Ws.SINGLE:return"0";case Ws.LSHAPE_AD:case Ws.LSHAPE_CONTENT:return"4"}}var p5=function(t){return t.AD_LOADING="adloading",t.AD_LOADED="adloaded",t.AD_PAUSED="adpaused",t.AD_ERROR="aderror",t.AD_ENDED="adended",t}({}),Qr=function(t){return t[t.GOOGLE=0]="GOOGLE",t[t.DEFAULT=1]="DEFAULT",t[t.COMPANION=2]="COMPANION",t[t.CSAI=3]="CSAI",t}({}),Ln=class extends Ne{get A0t(){return this.X0t}get Rhi(){return this.Chi}get ynt(){return this.G0t}get B9t(){return this.M0t}Dhi(){return Boolean(this.Chi)}Bhi(t){}Nhi(t){}Mhi(t){this.Lhi=this.Ohi(t),this.Fhi=!t[Wn]}Ohi(t){const i=Ua(t);return t[Wn]||(i[Wn]=g5(Ws.SINGLE)),i}Uhi(t){if(!this.Fhi)return;const i=this.Lhi[Wn],e=g5(t);i!==e&&(this.Lhi[Wn]=e)}async Vhi(t,i){if(t.vhi)try{const e={ott_placement:_5.Phi},s=await this.Hhi.yhi(t.vhi,e,i);t.er({backdropUri:null==s?void 0:s.image,backdropClickThrough:null==s?void 0:s.clickThrough,backdropImpressionUrl:null==s?void 0:s.impression})}catch(t){throw new m("Could not load the backdrop")}}Whi(t,i){let e;if(t.EO<i){const s=_.min(t.ct,t.Bri-i);e=t.ct-s,t.er({ct:s,Fri:e})}return e}qhi(t){const i=new l5(t);this.X0t.push(i)}zhi(t){const i=this.X4t(t);oi(this.X0t,i)}X4t(t){return Jr(this.X0t,i=>i.whi===t)}Ghi(){this.J4t.wn(d.Ww,this.Xhi),this.J4t.wn(Do.yM,this.jhi),this.J4t.wn(d._y,this.H6),this.J4t.wn(d.Bw,this.Qhi),this.J4t.wn(Mc.ma,this.vQt)}Khi(){this.J4t.mn(d.Ww,this.Xhi),this.J4t.mn(Do.yM,this.jhi),this.J4t.mn(d._y,this.H6),this.J4t.mn(d.Bw,this.Qhi),this.J4t.mn(Mc.ma,this.vQt)}bd(t){var i;null==(i=this.Chi)||i.Mri(this.Ari(t.currentTime))}async Yhi(t,i,e,s){const n={stack:[],error:void 0,hasError:!1};try{var r;null==(r=this.rV)||r.Zg();const h=Be(n,at.ep([i]),!1);this.rV=h;const o=h.Yg;return ii(o),await this.J4t.Yhi(Cn(t),e,s,o)}catch(t){n.error=t,n.hasError=!0}finally{Cs(n)}}d7t(t){void 0!==this.Jhi?(this.Chi=this.Jhi,this.Jhi=void 0,this.G0t=this.X4t(this.Chi),this.M0t=new f5(this.G0t,this.J4t.Nd()),this.Chi.er({ad:this.B9t}),this.s5t.So(new aU(this.G0t)),this.s5t.So(new dc(this.M0t,t))):zd.um("Expected an ad to start.")}Bd(t){this.Chi&&(this.Chi.Mri(t),this.Chi._x=!0,this.zhi(this.Chi),this.Chi=void 0),this.M0t&&(this.s5t.So(new bc(this.M0t,t)),this.M0t=void 0),this.G0t?(this.s5t.So(new Fa(this.G0t)),this.G0t=void 0):(zd.um("An ad break has ended without realizing we are in an ad break."),this.So(new wp("adended")))}Ari(t){var i,e;return(null!=(e=null==(i=this.Chi)?void 0:i.EO)?e:0)+t}async hr(){var t;null==(t=this.rV)||t.Zg(),this.rV=void 0,this.Khi(),this.X0t=[],this.M0t=void 0,this.G0t=void 0,this.Chi=void 0,this.Jhi=void 0}async kn(){await this.hr(),await this.Zhi.kn()}constructor(t,i,e,s,n={}){super(),this.J4t=void 0,this.Zhi=void 0,this.s5t=new Sc,this.Hhi=void 0,this.X0t=[],this.G0t=void 0,this.M0t=void 0,this.Chi=void 0,this.Jhi=void 0,this.Lhi=void 0,this.Fhi=!0,this.rV=void 0,this.H6=t=>{this.bd(t)},this.Xhi=()=>{this.So(new wp("adloading"))},this.jhi=()=>{this.So(new wp("adloaded"))},this.Qhi=t=>{this.Bd(this.Ari(this.J4t.LP()))},this.vQt=()=>{this.So(new Pa(Ic.GENERAL))},this.J4t=t,this.Zhi=i,this.X0t=e,this.Hhi=s,this.Zhi.$hi(this),this.s5t=i.M3t,this.Lhi=this.Ohi(n),this.Fhi=!n[Wn]}},m5="com.theoplayer.theoads.interstitial",w5="com.theoplayer.theoads.overlay",y5="X-ASSET-URI",A5="X-ASSET-URI-VAST",b5=class{get toi(){return this.ioi}eoi(t){this.soi=new EventSource(t),this.soi.addEventListener("adbreak",this.noi),this.soi.addEventListener("overlay",this.roi),this.soi.addEventListener("streaminfo",this.hoi)}ooi(t){if(!pi(this.aoi,t)){this.aoi.push(t);for(const i of t.II)this.uoi(i);t.wn(Vt.eI,this.Wn),t.wn(Vt.nI,this.Gn)}}coi(t){if(pi(this.aoi,t)){oi(this.aoi,t),t.mn(Vt.eI,this.Wn),t.mn(Vt.nI,this.Gn);for(const i of t.II)this.doi(i)}}uoi(t){!this.loi&&function(t){return t.Lt===Ao.VU&&t.Km===nh.DATE_RANGE}(t)&&this.foi!==t?this.voi(t):this.loi&&function(t){return t.Lt===Ao.VU&&t.Km===nh.ID3}(t)&&this._oi!==t&&this.goi(t)}doi(t){this.foi===t?this.voi(void 0):this._oi===t&&this.goi(void 0)}voi(t){const i=this.foi;if(void 0!==i){if(i.L)for(const t of i.L.II)this.poi(t);i.mn(Te.hI,this.moi),i.mn(Te.cI,this.woi),i.mn(Te.lI,this.yoi),i.mn(Te.aI,this.Aoi),i.Xk=xh.JI}if(this.foi=t,void 0!==t){if(t.L)for(const i of t.L.II)this.boi(i);t.wn(Te.hI,this.moi),t.wn(Te.cI,this.woi),t.wn(Te.lI,this.yoi),t.wn(Te.aI,this.Aoi),t.Xk=xh.JI}}goi(t){const i=this._oi;if(void 0!==i){if(i.L)for(const t of i.L.II)this.poi(t);i.mn(Te.hI,this.Soi),i.mn(Te.lI,this.yoi),i.mn(Te.aI,this.Aoi),i.Xk=xh.JI}if(this._oi=t,void 0!==t){if(t.L)for(const i of t.L.II)this.Toi(i);t.wn(Te.hI,this.Soi),t.wn(Te.lI,this.yoi),t.wn(Te.aI,this.Aoi),t.Xk=xh.JI}}koi(t){try{var i,e;const s=JSON.parse(t.data),n=s.networkCode,r=null==(i=s.assetKeys)?void 0:i[0];this.Poi.Eoi(n,r),null==(e=this.soi)||e.removeEventListener("streaminfo",this.hoi)}catch(t){zd.dm("Error parsing the Server sent stream info",t)}}xoi(t){const i=this.Poi.CP;if(void 0!==i)try{const n=JSON.parse(t.data);var e;const r=null!=(e=n.podDuration)?e:n.adBreakDuration;if(void 0===r)return void zd.dm("Tried to schedule an ad break without knowing the duration");const h=(Date.parse(n.startDate)-i.getTime())/1e3;if(h<=-r)return;const o=this.Poi.LP()+h,a=n.networkCode,u=n.assetKey,c=n.podId?x(n.podId):void 0,d=this.Ioi(Ws[n.layout]),l=n.assetURIVAST,f=void 0!==u&&void 0!==a||c,v=!f&&void 0!==l;var s;let _=null!=(s=n.assetURI)?s:"";f?_="theo-ads://dai.break/?d="+r:v&&(_=l);const g=this.Roi(d,_,v),p=new d5({o:n.id,EO:o,nyt:_,uhi:g,Zri:d,dhi:a,lhi:u,DLt:r,Vri:c,ghi:n.backdropURI,_hi:S5(n.backdropURIGamProperties),Rvt:n.startPTS,fhi:n.eabnVersion});this.qhi(p,void 0)}catch(t){zd.dm("Error parsing the Server sent event",t)}else zd.dm("Tried to schedule an ad break without knowing the Program Date Time of the player")}Coi(t){const i=this.Poi.CP;if(void 0!==i)try{var e;const s=JSON.parse(t.data),n=s.duration;if(void 0===n)return void zd.dm("Tried to schedule an overlay without knowing the duration");const r=(Date.parse(s.startDate)-i.getTime())/1e3;if(r<=-n)return;const h=this.Poi.LP()+r,o=a5[s.type],a=new c5({o:s.id,Km:o||a5.image,EO:h,DLt:n,mo:k5(s.position),Vy:E5(s.size),nhi:s.opacity,rhi:S5(s.gamProperties),LJt:null==(e=s.resourceURI)?void 0:e.map(t=>T5(t)),hhi:s.clickThroughURI});this.qhi(a,void 0)}catch(t){zd.dm(t)}else zd.dm("Tried to schedule an overlay without knowing the Program Date Time of the player")}boi(t){if((t.RLt===m5||t.RLt===w5)&&(t.BLt[y5]||t.BLt[A5]))switch(t.RLt){case w5:this.Doi(t);break;case m5:this.Boi(t)}}Doi(t){try{var i;if(void 0===t.ct&&void 0===t.DLt)return;const e=atob(t.BLt["X-COM-THEOPLAYER-THEOADS-OVERLAY-PROPERTIES"]),s=JSON.parse(e),n=a5[s.type],r=this.Poi.Noi(t.EO),h=isFinite(t.PO)?this.Poi.Noi(t.PO):void 0,o=new c5({o:t.o,Km:n||a5.image,EO:r,PO:h,ct:t.ct,DLt:t.DLt,mo:k5(s.position),Vy:E5(s.size),nhi:s.opacity,rhi:S5(s.gamProperties),LJt:null==(i=s.resourceURI)?void 0:i.map(t=>T5(t)),hhi:s.clickThroughURI});this.qhi(o,t)}catch(t){zd.dm(t)}}Boi(t){const i=t.BLt["X-RESUME-OFFSET"];if(void 0===t.ct&&void 0===t.DLt&&void 0===i)return;const e=t.BLt[y5],s=t.BLt[A5],n=n2(e)?function(t){const i=t.split("?")[1],e={},s=new URLSearchParams(i);return e.d=Number(s.get("d"))||void 0,e.k=s.get("k")||void 0,e.n=s.get("n")||void 0,e.p=Number(s.get("p"))||void 0,e}(e):void 0,r=null==n?void 0:n.n,h=null==n?void 0:n.k,o=this.Poi.Noi(t.EO),a=isFinite(t.PO)?this.Poi.Noi(t.PO):void 0,u=this.Ioi(Ws[t.BLt["X-COM-THEOPLAYER-THEOADS-LAYOUT"]]),c=t.BLt["X-COM-THEOPLAYER-THEOADS-BACKDROP-GAMPROPERTIES"],d=c?JSON.parse(atob(c)):void 0,l=null==n?void 0:n.p,f=!(void 0!==r&&void 0!==h||l)&&void 0!==t.BLt[A5],v=f?s:e,_=this.Roi(u,v,f),g=new d5({o:t.o,EO:o,nyt:v,uhi:_,Zri:u,dhi:r,lhi:h,ghi:t.BLt["X-COM-THEOPLAYER-THEOADS-BACKDROP"],_hi:S5(d),PO:a,ct:t.ct,DLt:t.DLt,Vri:l,Ori:void 0!==i?Number(i):void 0});this.qhi(g,t),this.Moi=g}Ioi(t){return t===Ws.LSHAPE_CONTENT?t:this.Loi||t}Roi(t,i,e){return t===Ws.LSHAPE_CONTENT?Qr.COMPANION:e?Qr.CSAI:n2(i)?Qr.GOOGLE:Qr.DEFAULT}Toi(t){const i=t.U;if(!function(t){return"GEO"===t.id||"GEOB"===t.id}(i)||!function(t){return"Anvatos"===t.description&&"application/json"===t.mimeType}(i))return;const e=vr(new DataView(i.data),new Ui),s=new wr(e),n=s.get("type");if("cue"===n){let i=Number(s.get("duration"))/1e3||void 0;const e=new wr(s.get("payload")),n=Number(e.get("dur"))||void 0,r=Number(e.get("s_bd"))||void 0;if(void 0!==n?i=n:void 0!==r&&(i=r/10),!i)return void 0;const h="theo-ads://dai.break/?d="+i,o=Number(s.get("pts"))||void 0,a=this.Poi.Noi(t.EO),u=this.Ioi(Ws.SINGLE),c=new d5({o:t.o,EO:a,nyt:h,uhi:Qr.GOOGLE,Zri:u,DLt:i,Rvt:o});this.qhi(c,t)}else if("cue_end"===n){const i=this.Moi;i&&i.er({ct:this.Poi.Noi(t.EO)-i.EO})}}Ooi(t){const i=this.Foi.get(t.jI);i&&this.Poi.Uoi(i.EO)}Voi(t){for(const i of this.ioi)if(t.o===i.o&&t.Km===i.Km)return!0;return!1}Hoi(t){const i=[];if(0===this.Poi.Tx().length)return zd.um("Seekable is undefined."),!1;const e=this.Poi.Tx().start(0);for(const s of this.Woi)if(s.Bri<e)i.push(s);else if(t.o===s.o&&t.Km===s.Km)return!0;for(const t of i)oi(this.Woi,t);return!1}qhi(t,i){var e;const s=t.EO+(null!=(e=t.ct)?e:1/0);this.Voi(t)||this.Hoi(t)||this.Poi.LP()>=s||(this.ioi.push(t),i?this.Foi.set(i.jI,t):this.Woi.push(t),this.Poi.qhi(t))}qoi(t){const i=this.Foi.get(t.jI);if(void 0===i)return;const e=t.BLt["X-RESUME-OFFSET"],s=isFinite(t.PO)?this.Poi.Noi(t.PO):void 0;i.er({ct:t.ct,PO:s,Ori:void 0!==e?Number(e):void 0})}poi(t){this.zoi(t)}zoi(t){void 0!==this.Foi.get(t.jI)&&this.Foi.delete(t.jI)}Goi(t){t.forEach(t=>this.zhi(t))}zhi(t){oi(this.ioi,t)}hr(){var t,i,e,s;this.Moi=void 0,this.voi(void 0),this.goi(void 0);for(const t of this.aoi.slice())this.coi(t);Yo(this.aoi),Yo(this.ioi),Yo(this.Woi),this.Foi.clear(),null==(t=this.soi)||t.removeEventListener("adbreak",this.noi),null==(i=this.soi)||i.removeEventListener("overlay",this.roi),null==(e=this.soi)||e.removeEventListener("streaminfo",this.hoi),null==(s=this.soi)||s.close(),this.soi=void 0}kn(){this.hr()}constructor(t){this.Poi=void 0,this.loi=!1,this.Loi=void 0,this.ioi=[],this.Woi=[],this.Foi=ar(),this.Moi=void 0,this.aoi=[],this.foi=void 0,this._oi=void 0,this.soi=void 0,this.Wn=t=>{this.uoi(t.Ht)},this.Gn=t=>{this.doi(t.Ht)},this.moi=t=>{this.boi(t.TO)},this.Soi=t=>{this.Toi(t.TO)},this.yoi=t=>{this.Ooi(t.TO)},this.Aoi=t=>{this.poi(t.TO)},this.woi=t=>{this.qoi(t.TO)},this.noi=t=>{this.xoi(t)},this.roi=t=>{this.Coi(t)},this.hoi=t=>{this.koi(t)},this.Poi=t}};function S5(t){if(!t)return;let i=t.sz.default;return Qt.Ks&&t.sz.phone?i=t.sz.phone:Qt.og&&t.sz.tv&&(i=t.sz.tv),{Ahi:t.iu,bhi:i}}function T5(t){const i=u5[t.type];let e=t.default;return Qt.Ks&&t.phone?e=t.phone:Qt.og&&t.tv&&(e=t.tv),{Km:i,nyt:e}}function k5(t){let i,e,s,n;return t.top&&t.top>=0&&t.top<=100?i=t.top:t.bottom&&t.bottom>=0&&t.bottom<=100?e=t.bottom:i=10,t.left&&t.left>=0&&t.left<=100?s=t.left:t.right&&t.right>=0&&t.right<=100?n=t.right:s=10,{z9:i,q9:e,W9:s,H9:n}}function E5(t){let i,e;return i=t.width&&t.width>=0&&t.width<=100?t.width:10,e=t.height&&t.height>=0&&t.height<=100?t.height:10,{Ti:i,Mi:e}}r();var P5=class extends Ne{get Xoi(){return this.oa.Xoi.map(t=>t.wnt())}get joi(){return this.oa.joi.map(t=>t.wnt())}Mhi(t){Kd(t)?this.oa.Mhi(t):zd.dm("Incorrect ad tag parameters type, expecting a Record.")}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=function(t){return{get currentInterstitials(){return t.Xoi},get scheduledInterstitials(){return t.joi},replaceAdTagParameters(i){t.Mhi(i)},addEventListener(i,e){t.wn(i,e)},removeEventListener(i,e){t.mn(i,e)}}}(this)}constructor(t){super(),this.oa=void 0,this.hu=void 0,this.oa=t}};r();var x5=class{$hi(t){this.Qoi=t}get M3t(){return this.s5t}get G3t(){var t;return void 0!==(null==(t=this.Qoi)?void 0:t.ynt)}get C3t(){return mt.ont}get mnt(){var t;return(null==(t=this.Qoi)?void 0:t.B9t)?[this.Qoi.B9t]:[]}get ynt(){var t,i;return null!=(i=null==(t=this.Qoi)?void 0:t.ynt)?i:null}get Ant(){return this.Qoi?De(this.Qoi.A0t,t=>{var i;const e=t.Jc;if(t===(null==(i=this.Qoi)?void 0:i.ynt)&&void 0!==this.Qoi.B9t){const t=e.indexOf(this.Qoi.B9t);if(t>=0)return e.slice(t+1)}return t._x?[]:e}):[]}get bnt(){return this.Qoi?this.Qoi.A0t.filter(t=>{var i;return t===(null==(i=this.Qoi)?void 0:i.ynt)||!t._x}):[]}rD(){}Snt(t){}knt(t){}kn(){return this.Qoi=void 0,Promise.resolve()}constructor(){this.s5t=new Sc,this.Qoi=void 0}};r();var I5=class{get Xoi(){return this.Koi}get Hri(){return this.Lhi}set Hri(t){this.Lhi=t}async Yoi(t){this.Koi.push(t),this.Joi.style.display="";const i=h.createElement("div");i.className="theoplayer-theoads-overlay",i.style.display="",this.Zoi.set(t.o,i);const e=h.createElement("a"),s=await this.$oi(t);if(s.clickThroughURI&&(this.Joi.style.zIndex="11",e.href=s.clickThroughURI,e.target="Xu",e.setAttribute("rel","noopener"),e.addEventListener("mousedown",this.Tii),e.addEventListener("touchend",this.Tii)),t.shi===a5.image&&(e.style.backgroundImage="url("+s.resourceURI+")",e.style.backgroundSize="contain",e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",s.impressionURI)){const t=h.createElement("img");t.src=s.impressionURI,t.style.display="none",e.appendChild(t)}oa(e),function(t,i){t.style.position="absolute";const e=i.mo;e.W9&&(t.style.left=e.W9+"%");e.H9&&(t.style.right=e.H9+"%");e.z9&&(t.style.top=e.z9+"%");e.q9&&(t.style.bottom=e.q9+"%");const s=i.Vy;s.Ti&&(t.style.width=s.Ti+"%");s.Mi&&(t.style.height=s.Mi+"%");i.nhi&&i.nhi>0&&i.nhi<=100&&(t.style.opacity=""+i.nhi/100)}(i,t),i.appendChild(e),this.Joi.appendChild(i)}tai(t){const i=this.Zoi.get(t.o);i&&(this.Joi.contains(i)&&this.Joi.removeChild(i),this.Zoi.delete(t.o),0===this.Zoi.size&&(this.Joi.style.display="none"),oi(this.Koi,t))}iai(){this.Zoi.forEach(t=>{this.Joi.contains(t)&&this.Joi.removeChild(t)}),this.Zoi.clear(),this.Koi=[]}async $oi(t){const i={resourceURI:""};let e;if(t.rhi){const i=Mo({},this.Lhi,t.Hri);i&&!i[Wn]&&(i[Wn]=_5.xhi),e=await this.eai.yhi(t.rhi,i)}if(e)i.resourceURI=e.image,i.impressionURI=e.impression;else if(t.LJt){const e=Jr(t.LJt,t=>t.Km===u5.svg);e&&(i.resourceURI=e.nyt);const s=Jr(t.LJt,t=>t.Km===u5.png);s&&(i.resourceURI=s.nyt)}var s;return i.clickThroughURI=null!=(s=null==e?void 0:e.clickThrough)?s:t.AYt,t.er({imageUrl:i.resourceURI,clickThrough:i.clickThroughURI}),i}hr(){this.iai(),this.Joi.style.display="none"}constructor(t,i,e){this.oa=void 0,this.Lhi=void 0,this.Koi=[],this.Joi=void 0,this.Zoi=qh(),this.eai=void 0,this.gn=void 0,this.stt=t=>{s2(this.Joi,this.oa.Bx,this.oa.Rx,t.width,t.height)},this.CXt=()=>{s2(this.Joi,this.oa.Bx,this.oa.Rx,this.gn.Eu,this.gn.Iu)},this.Tii=t=>{t.stopPropagation()},this.oa=t,this.eai=e;const s=h.createElement("div");s.style.display="none",s.className="theoads-image-overlays-container",oa(s),i.appendChild(s),this.Joi=s,this.gn=new Oe(i),this.gn._n(),this.gn.wn(Rh.yn,this.stt),this.oa.wn(d.Jw,this.CXt)}};r();var R5=class extends wp{constructor(t){super("addinterstitial"),this.interstitial=void 0,this.interstitial=t}};r();var C5=class extends Oi{xa(){return new D5(this.interstitial.wnt())}constructor(t){super("nai"),this.interstitial=void 0,this.interstitial=t}},D5=class extends wp{constructor(t){super("interstitialend"),this.interstitial=void 0,this.interstitial=t}};r();var rh=class extends Oi{xa(){return new B5(this.interstitial.wnt(),this.Py)}constructor(t,i){super("rai"),this.interstitial=void 0,this.Py=void 0,this.interstitial=t,this.Py=i}},B5=class extends wp{constructor(t,i){super("interstitialerror"),this.interstitial=void 0,this.message=void 0,this.interstitial=t,this.message=i}};r();var N5=class extends Ln{get uhi(){return Qr.DEFAULT}IW(t,i,e){return Promise.resolve()}hai(t,i,e,s){void 0===s&&(s=!1),this.Jhi=t;const n=this.Whi(t,i),r={sources:{src:t.nyt}};return this.Yhi(r,e,n,s)}async oai(t,i,e){return this.Jhi=t,t.nyt}Ghi(){super.Ghi(),this.J4t.wn(Do.TM,this.aai)}Khi(){this.J4t.mn(Do.TM,this.aai),super.Khi()}bd(t){if(!this.Chi)return void zd.um("Got timeupdate without a current interstitial");const i=this.Ari(t.currentTime),e=this.Chi.y4t;this.Chi.Mri(i);const s=this.Chi.y4t;e<.25&&s>=.25?this.s5t.So(new _s(this.M0t,i)):e<.5&&s>.5?this.s5t.So(new ks(this.M0t,i)):e<.75&&s>=.75?this.s5t.So(new oe(this.M0t,i)):this.Chi._x&&this.Bd(i)}Bd(t){super.Bd(t),this.n7=!1}async hr(){await super.hr(),this.n7=!1}constructor(...t){super(...t),this.n7=!1,this.aai=t=>{!this.n7&&this.Jhi&&(this.n7=!0,this.d7t(this.Ari(t.currentTime)))},this.Qhi=t=>{this.Bd(this.Ari(t.currentTime))}}};r(),r(),r();var Rn=class extends wp{constructor(t,i,e){super(t,new Date),this.uai=void 0,this.Int=void 0,this.uai=i,this.Int=e}},nn=function(t){return t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete",t}({}),M5=class extends Rn{constructor(t,i){super("DAILoaded",t,i)}},L5=class extends Rn{constructor(t,i){super("DAIAdBreakStarted",t,i)}},O5=class extends Rn{constructor(t,i){super("DAIAdBreakEnded",t,i)}},F5=class extends Rn{constructor(t,i){super("DAIAdProgress",t,i)}},U5=class extends Rn{constructor(t,i){super("DAICuePointsChanged",t,i)}},V5=class extends Rn{constructor(t,i){super("DAIClick",t,i)}},H5=class extends Rn{constructor(t,i){super("DAIError",t,i)}},W5=class extends Rn{constructor(t,i){super("DAIStarted",t,i)}},q5=class extends Rn{constructor(t,i){super("DAIFirstQuartile",t,i)}},z5=class extends Rn{constructor(t,i){super("DAIMidpoint",t,i)}},G5=class extends Rn{constructor(t,i){super("DAIStreamInitialized",t,i)}},X5=class extends Rn{constructor(t,i){super("DAIThirdQuartile",t,i)}},j5=class extends Rn{constructor(t,i){super("DAIComplete",t,i)}};var Q5=class extends Ne{replaceAdTagParameters(t){return this.cai.replaceAdTagParameters(null!=t?t:null)}lai(t){return this.cai.contentTimeForStreamTime(t)}fai(t){return this.cai.streamTimeForContentTime(t)}AHt(t,i){const e=function(t){return"vod"===t.availabilityType?new s.google.ima.dai.api.VODStreamRequest(Mo({},K5(t),{contentSourceId:t.contentSourceID,videoId:t.videoID})):new s.google.ima.dai.api.LiveStreamRequest(Mo({},K5(t),{assetKey:t.assetKey}))}(t);t.enableNonce&&(e.enableNonce=!0),this.cai.requestStream(e)}hr(){this.vai(!1),this.cai.reset()}kn(){this.Vo();const t=google.ima.dai.api.StreamEvent.Type;this.cai.removeEventListener(t.AD_BREAK_STARTED,this._ai),this.cai.removeEventListener(t.AD_PROGRESS,this.gai),this.cai.removeEventListener(t.CLICK,this.y1t),this.cai.removeEventListener(t.COMPLETE,this.pai),this.cai.removeEventListener(t.CUEPOINTS_CHANGED,this.mai),this.cai.removeEventListener(t.ERROR,this.Ts),this.cai.removeEventListener(t.FIRST_QUARTILE,this.wai),this.cai.removeEventListener(t.LOADED,this.yai),this.cai.removeEventListener(t.MIDPOINT,this.Aai),this.cai.removeEventListener(t.STARTED,this.bai),this.cai.removeEventListener(t.STREAM_INITIALIZED,this.Sai),this.cai.removeEventListener(t.THIRD_QUARTILE,this.Tai),this.cai.removeEventListener(t.AD_BREAK_ENDED,this.kai),this.hr(),this.Eai&&os(this.Eai)}Pai(t){this.cai.onTimedMetadata(t)}xai(t,i,e){this.cai.processMetadata(t,i,e)}Iai(t){const i=this.cai.previousCuePointForStreamTime(t);if(i)return{PO:i.end,EO:i.start,_x:i.played}}Rai(t,i){const e=this.Iai(t);if(!e)return;const s=t>i&&e.PO>i,n=e.PO>t&&e.EO<=t;return e._x||!s&&!n?void 0:e.EO}vai(t){this.Y1t&&(this.Y1t.style.display=t?"block":"none")}constructor(t,i,e){super(),this.cai=void 0,this.Y1t=void 0,this.Eai=void 0,this._ai=void 0,this.kai=void 0,this.gai=void 0,this.y1t=void 0,this.pai=void 0,this.mai=void 0,this.Ts=void 0,this.wai=void 0,this.yai=void 0,this.Aai=void 0,this.bai=void 0,this.Sai=void 0,this.Tai=void 0,this.cai=t,this.Y1t=i,this.Eai=e,this._ai=t=>{this.vai(!0);const i=Y5(t),e=Z5(t);this.So(new L5(i,e))},this.kai=t=>{this.vai(!1);const i=Y5(t),e=Z5(t);this.So(new O5(i,e))},this.gai=t=>{const i=Y5(t),e=Z5(t);this.So(new F5(i,e))},this.y1t=t=>{const i=Y5(t),e=Z5(t);this.So(new V5(i,e))},this.pai=t=>{const i=Y5(t),e=Z5(t);this.So(new j5(i,e))},this.mai=t=>{const i=Y5(t),e=Z5(t);this.So(new U5(i,e))},this.Ts=t=>{const i=Y5(t),e=Z5(t);this.So(new H5(i,e))},this.wai=t=>{const i=Y5(t),e=Z5(t);this.So(new q5(i,e))},this.yai=t=>{const i=Y5(t),e=Z5(t);this.So(new M5(i,e))},this.Aai=t=>{const i=Y5(t),e=Z5(t);this.So(new z5(i,e))},this.bai=t=>{const i=Y5(t),e=Z5(t);this.So(new W5(i,e))},this.Sai=t=>{const i=Y5(t),e=Z5(t);this.So(new G5(i,e))},this.Tai=t=>{const i=Y5(t),e=Z5(t);this.So(new X5(i,e))},this.Y1t&&(this.Y1t.style.display="none",this.cai.setClickElement(this.Y1t));const s=google.ima.dai.api.StreamEvent.Type;this.cai.addEventListener(s.AD_BREAK_STARTED,this._ai),this.cai.addEventListener(s.AD_PROGRESS,this.gai),this.cai.addEventListener(s.CLICK,this.y1t),this.cai.addEventListener(s.COMPLETE,this.pai),this.cai.addEventListener(s.CUEPOINTS_CHANGED,this.mai),this.cai.addEventListener(s.ERROR,this.Ts),this.cai.addEventListener(s.FIRST_QUARTILE,this.wai),this.cai.addEventListener(s.LOADED,this.yai),this.cai.addEventListener(s.MIDPOINT,this.Aai),this.cai.addEventListener(s.STARTED,this.bai),this.cai.addEventListener(s.STREAM_INITIALIZED,this.Sai),this.cai.addEventListener(s.THIRD_QUARTILE,this.Tai),this.cai.addEventListener(s.AD_BREAK_ENDED,this.kai)}};function K5(t){const i=google.ima.dai.api.StreamRequest.StreamFormat;var e;return{apiKey:t.apiKey,authToken:t.authToken,format:"dash"===t.format?i.DASH:i.HLS,networkCode:t.networkCode,streamActivityMonitorId:t.streamActivityMonitorID,adTagParameters:t.adTagParameters,omidAccessModeRules:null!=(e=z2(t.omidAccessModeRules))?e:{}}}function Y5(t){const i=t.getStreamData(),e=i.adProgressData;let s;e&&(s={t7t:e.adBreakDuration,Cai:e.duration,i7t:e.adPosition,MP:e.currentTime,ct:e.duration,e7t:e.totalAds});return{Dai:s,Bai:(i.cuepoints||[]).map(t=>({EO:t.start,PO:t.end,_x:t.played})),Nai:i.errorMessage||void 0,Mai:i.manifestFormat||void 0,Lai:i.streamId||void 0,Oai:(i.subtitles||[]).map(t=>({Fai:t.webvtt,Uai:t.ttml,bs:t.language})),Yu:i.url}}function J5(t){return{lYt:t.getAdSlotId(),p4t:t.getContent(),qT:t.getContentType(),Mi:t.getHeight(),Ti:t.getWidth()}}function Z5(t){const i=t.getAd();if(!i)return;const e=i.getAdPodInfo(),s=i.getCompanionAds().map(J5);return{UYt:i.getAdId(),V7t:{i7t:e.getAdPosition(),p0t:e.getMaxDuration(),Yni:e.getPodIndex(),_Ot:e.getTimeOffset(),e7t:e.getTotalAds()},yKt:i.getAdSystem(),Zni:i.getAdvertiserName(),cYt:i.getApiFramework(),IKt:s,GKt:i.getCreativeId(),I9t:i.getCreativeAdId(),$ni:i.getDealId(),dB:i.getDescription(),ct:i.getDuration(),dq:i.getTitle(),Vai:i.getUniversalAdIdRegistry(),Hai:i.getUniversalAdIdValue(),S9t:i.getVastMediaHeight(),b9t:i.getVastMediaWidth(),m9t:i.getWrapperAdIds(),w9t:i.getWrapperAdSystems(),y9t:i.getWrapperCreativeIds()}}function $5(){const t=h.body.lastElementChild;if(t instanceof HTMLIFrameElement&&"Advertisement"===t.title)return t}r();var t6=class extends Fn{N0t(){return this.Wai.getAdSystem()}O0t(){return this.od.whi.nyt}get o(){return this.Wai.getAdId()}get ct(){return this.Wai.getDuration()}get AYt(){var t,i;return null==(i=this.Wai)||null==(t=i.ad)?void 0:t.clickThroughUrl}get GKt(){return this.Wai.getCreativeId()}get JYt(){return this.Wai.getSkipTimeOffset()}constructor(t,i){super(t),this.Wai=void 0,this.Wai=i}};r();var i6=class extends Fn{constructor(t){super(t),this._4t=!0,this.WA=t.m0t}},e6="urn:google:dai:2018",s6=class extends Ln{get uhi(){return Qr.GOOGLE}Bhi(t){if(t){const t=this.cai;this.cai=this.qai,this.qai=t;const i=this.zai;this.zai=this.Gai,this.Gai=i}for(const t of this.J4t.nt.II)this.Xai(t)}async IW(t,i,e){if(!t||!i||t===this.jai&&i===this.Qai)return;if(void 0===this.cai){var n,r;if(void 0===(null==(r=s.google)||null==(n=r.ima)?void 0:n.dai))throw new m("IMA DAI SDK missing for THEOads");this.cai=new google.ima.dai.api.StreamManager(this.J4t.xe.querySelector("video"),this.Kai)}this.jai=t,this.Qai=i;const h=this.Yai(!1),o=this.Yai(!0);this.Jai=Nc(Promise.all([h,o]),e),await this.Jai}Yai(t){let i=this.cai;if(t&&(i=this.qai),!i)return Promise.resolve();this.Zai(i),i.reset();const e=new google.ima.dai.api.PodStreamRequest;e.networkCode=this.jai,e.customAssetKey=this.Qai,e.adTagParameters=this.Lhi,this.$ai&&(e.streamActivityMonitorId=this.$ai),e.format="hls";const s=this.tui(i,[google.ima.dai.api.StreamEvent.Type.STREAM_INITIALIZED,google.ima.dai.api.StreamEvent.Type.ERROR]).then(e=>{if(e.type===google.ima.dai.api.StreamEvent.Type.ERROR)throw new m("DAI stream request failed");t?this.Gai=e.getStreamData():this.zai=e.getStreamData(),this.iui(i)});return i.requestStream(e),s}tui(t,i,e){return new Promise((s,n)=>{if(e&&e.Hg)return n(new dt);const r=t=>{o(),s(t)},h=()=>{o(),n(new dt)},o=()=>{for(const e of i)t.removeEventListener(e,r);e&&e.jg(h)};for(const e of i)t.addEventListener(e,r);e&&e.Xg(h)})}Mhi(t){void 0===t&&(t={}),super.Mhi(t),this.eui(this.Lhi)}eui(t){var i,e;void 0===t&&(t={}),null==(i=this.cai)||i.replaceAdTagParameters(t),null==(e=this.qai)||e.replaceAdTagParameters(t)}async sui(t){var i,e;return(null==(i=this.Jhi)?void 0:i.Vri)&&!S(this.Jhi.Vri)?this.Jhi.Vri:this.nui&&(null==(e=this.Jhi)?void 0:e.Rvt)?await $i(()=>this.rui(),t,4,500,5e3):void 0}async rui(){const t=this.nui+"/"+this.jai+"/"+this.Qai+"/"+this.Jhi.Rvt+".json",i=new $n({Yu:t,dk:M.DT,Uk:X.GET,Vk:1e3});let e;try{e=await this.J4t.SP.lk(i)}catch(t){throw new Co(Ic.NETWORK,Wi.UNKNOWN_AD_RESPONSE,"The ad's PodId could not be loaded.")}if(!jr(e))throw new Co(Ic.NETWORK,Wi.UNKNOWN_ERROR,"Something went wrong while requesting JSON from server.");const s=await e.ck();if(s)return s.podid}async hai(t,i,e,s){void 0===s&&(s=!1);const n={sources:{src:await this.oai(t,i,e)}};await this.Yhi(n,e,void 0,s)}async oai(t,i,e){var s;this.Jhi=t;const n=t.dhi,r=t.lhi;this.Uhi(t.Zri);const h=Mo({},this.Lhi,t.Hri);this.eui(h),await this.IW(n,r,e);const o=zd.Dh(t.nyt),a=Number(o.searchParams.get("d")),u=_.floor(1e3*_.min(a,t.Bri-i)),c=await this.sui(e);if(!c)throw new m("Something went wrong with retrieving the PodID from the server.");(null==(s=this.zai)?void 0:s.streamId)||await this.Jai;const d=zd.Dh("https://dai.google.com/linear/pods/v1/hls/network/"+this.jai+"/custom_asset/"+this.Qai);"V2"===t.fhi?d.pathname+="/ad_break_id/"+c+".m3u8":d.pathname+="/pod/"+c+".m3u8";let l=this.zai.streamId;if(this.Chi){const t=this.J4t.hui();void 0!==t&&void 0===this.qai&&(this.qai=new google.ima.dai.api.StreamManager(t.xe.querySelector("video"),this.Kai),await Nc(this.Yai(!0),e)),this.Gai&&(l=this.Gai.streamId)}return d.searchParams.set("stream_id",l),d.searchParams.set("pd",String(u)),d.toString()}Ghi(){this.J4t.nt.wn(Vt.eI,this.Wn),super.Ghi()}Khi(){super.Khi(),this.J4t.nt.mn(Vt.eI,this.Wn)}Xai(t){if(t.Lt===Ao.VU&&!(t.Km!==nh.ID3&&t.Km!==nh.EVENT_STREAM||t.Km===nh.EVENT_STREAM&&t.ZI!==e6)){if(t.wn(Te.hI,this.oui),t.wn(Te.aI,this.Aoi),t.L)for(const i of t.L.II)this.oui(new Ve(i));t.Xk=xh.JI,this.aui=t}}iui(t){t&&(t.addEventListener(google.ima.dai.api.StreamEvent.Type.ERROR,this.uui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.CLICK,this.uui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.STARTED,this.uui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,this.uui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.MIDPOINT,this.uui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,this.uui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.COMPLETE,this.uui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,this.uui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,this.uui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,this.uui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,this.uui),t.addEventListener(google.ima.dai.api.StreamEvent.Type.RESUMED,this.uui))}Zai(t){t&&(t.removeEventListener(google.ima.dai.api.StreamEvent.Type.ERROR,this.uui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.CLICK,this.uui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.STARTED,this.uui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,this.uui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.MIDPOINT,this.uui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,this.uui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.COMPLETE,this.uui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,this.uui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,this.uui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,this.uui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,this.uui),t.removeEventListener(google.ima.dai.api.StreamEvent.Type.RESUMED,this.uui))}Bd(t){super.Bd(t),this.cui=-1,this.dui=void 0}async hr(){var t,i;await super.hr(),this.Zai(this.cai),this.Zai(this.qai),null==(t=this.cai)||t.reset(),this.cai=void 0,null==(i=this.qai)||i.reset(),this.qai=void 0,this.zai=void 0,this.Gai=void 0,this.Jai=void 0,this.$ai=void 0,this.Qai=void 0,this.jai=void 0,this.Fhi=!0,this.cui=-1,this.dui=void 0;const e=$5();void 0!==e&&os(e)}async kn(){var t;await super.kn(),null==(t=this.aui)||t.kn()}constructor(t,i,e,s,n,r={},h,o){super(t,i,s,n,r),this.cai=void 0,this.zai=void 0,this.qai=void 0,this.Gai=void 0,this.Jai=void 0,this.aui=void 0,this.jai=void 0,this.Qai=void 0,this.$ai=void 0,this.nui=void 0,this.Kai=void 0,this.cui=-1,this.dui=void 0,this.lui=void 0,this.Wn=t=>{const i=t.Ht;this.Xai(i)},this.oui=t=>{t.TO.wn(Me.zL,this.fui)},this.Aoi=t=>{t.TO.mn(Me.zL,this.fui)},this.fui=t=>{var i,e;if(this.zai)if((null==(i=this.aui)?void 0:i.Km)===nh.ID3){const i=t.TO.U;var s;if(ix(i))if(this.cui<=t.TO.EO&&this.dui!==i.text)this.cui=t.TO.EO,this.dui=i.text,null==(s=this.cai)||s.processMetadata("ID3",i.text,t.TO.EO)}else if((null==(e=this.aui)?void 0:e.Km)===nh.EVENT_STREAM){var n;const i=t.TO.U;null==(n=this.cai)||n.processMetadata(e6,i,t.TO.EO)}},this.uui=t=>{switch(this.G0t&&(this.G0t.m0t=this.J4t.Nd()-this.J4t.LP()),t.type){case google.ima.dai.api.StreamEvent.Type.ERROR:this.s5t.So(new Pa(Ic.GENERAL));break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED:if(this.Chi)break;if(this.Chi=this.Jhi,this.Jhi=void 0,this.G0t=this.X4t(this.Chi),!this.G0t){zd.dm("Started an ad break without having a current adbreak to our knowledge");break}this.s5t.So(new aU(this.G0t)),this.lui=zd.Og(this.vui,250),this.eui(this.Lhi);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:zd.Lg(this.lui);break;case google.ima.dai.api.StreamEvent.Type.STARTED:{var i;const e=t.getAd();this.M0t=new t6(this.G0t,e),null==(i=this.Chi)||i.er({ad:this.M0t}),this.s5t.So(new dc(this.M0t,this.Ari(this.J4t.LP())));break}case google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE:this.s5t.So(new _s(this.M0t,this.Ari(this.J4t.LP())));break;case google.ima.dai.api.StreamEvent.Type.MIDPOINT:this.s5t.So(new ks(this.M0t,this.Ari(this.J4t.LP())));break;case google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE:this.s5t.So(new oe(this.M0t,this.Ari(this.J4t.LP())));break;case google.ima.dai.api.StreamEvent.Type.COMPLETE:this.s5t.So(new bc(this.M0t,this.Ari(this.J4t.LP()))),this.M0t=void 0;break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:if(!this.G0t)break;this.G0t.m0t>1&&this.vui()}},this.vui=()=>{var t;this.M0t=new i6(this.G0t),null==(t=this.Chi)||t.er({ad:this.M0t}),this.s5t.So(new dc(this.M0t,this.Ari(this.J4t.LP())))},this.Kai=e,this.$ai=h,this.nui=o}};r();var n6=class extends In{hui(){}async Yhi(t,i,e,s){await this.oa.Ta(t,s),this._ui(this.oa,i,e)}_ui(t,i,e){Qt.ru&&Qt.X_&&(t.Gx(),t.zx()),i&&t.OP(i),e&&t.Gx()}gui(t){}constructor(t){super(t)}};r(),r();var Xr=Promise,r6=class extends Ln{get uhi(){return Qr.COMPANION}IW(t,i,e){return Xr.resolve()}hai(t,i,e,s){return void 0===s&&(s=!1),this.Jhi=t,this.Whi(t,i),Xr.resolve()}async Yhi(t,i,e,s){return Xr.resolve()}async oai(t,i,e){return this.Jhi=t,t.nyt}Nhi(t){this.NPt=t-this.J4t.LP(),this.d7t(t)}bd(t){if(!this.Chi)return void zd.um("Got timeupdate without a current interstitial");const i=this.Ari(t.currentTime);this.Chi.Mri(i),this.Chi._x&&this.Bd(i)}Ari(t){return this.NPt+t}constructor(...t){super(...t),this.NPt=0,this.Qhi=t=>{this.Bd(this.Ari(t.currentTime))}}};r(),r();var h6=class extends Fn{N0t(){return this.pui.N0t()}O0t(){return this.od.whi.nyt}get o(){return this.pui.o}get ct(){return this.pui.ct}get AYt(){return this.pui.AYt}get GKt(){return this.pui.GKt}get JYt(){return this.pui.JYt}constructor(t,i){super(t),this.pui=void 0,this.pui=i}},o6=class extends Ln{get uhi(){return Qr.CSAI}IW(t,i,e){return Xr.resolve()}hai(t,i,e,s){return void 0===s&&(s=!1),this.Jhi=t,this.Yhi({ads:[{integration:"google-ima",sources:this.mui(t)}]},e,void 0,s)}async oai(t,i,e){return this.Jhi=t,this.mui(t)}mui(t){const i=new URL(t.nyt),e=i.searchParams;this.Uhi(t.Zri);const s=Mo({},this.Lhi,t.Hri);for(const t of w.keys(s))e.set(t,s[t]);return i.toString()}Ghi(){var t,i,e,s,n,r,h;super.Ghi(),null==(t=this.J4t.Jc)||t.wn("Dnt",this.wui),null==(i=this.J4t.Jc)||i.wn("Bnt",this.yui),null==(e=this.J4t.Jc)||e.wn("P4t",this.Aui),null==(s=this.J4t.Jc)||s.wn("x4t",this.bui),null==(n=this.J4t.Jc)||n.wn("I4t",this.Sui),null==(r=this.J4t.Jc)||r.wn("Nnt",this.Tui),null==(h=this.J4t.Jc)||h.wn("Cnt",this.kui)}Khi(){var t,i,e,s,n,r,h;null==(t=this.J4t.Jc)||t.mn("Dnt",this.wui),null==(i=this.J4t.Jc)||i.mn("Bnt",this.yui),null==(e=this.J4t.Jc)||e.mn("P4t",this.Aui),null==(s=this.J4t.Jc)||s.mn("x4t",this.bui),null==(n=this.J4t.Jc)||n.mn("I4t",this.Sui),null==(r=this.J4t.Jc)||r.mn("Nnt",this.Tui),null==(h=this.J4t.Jc)||h.mn("Cnt",this.kui),super.Khi()}async hr(){await super.hr(),this.Eui=0}constructor(t,i,e,s,n={}){super(t,i,e,s,n),this.Eui=0,this.Qhi=t=>{this.Bd(this.Ari(t.currentTime))},this.wui=()=>{this.Jhi?(this.Chi=this.Jhi,this.Jhi=void 0,this.G0t=this.X4t(this.Chi),this.s5t.So(new aU(this.G0t))):zd.um("Started an ad break without having a current adbreak to our knowledge")},this.yui=t=>{var i,e;const s=t.Int;this.M0t=new h6(this.G0t,s),null==(i=this.Chi)||i.er({ad:this.M0t}),this.Eui=this.Ari(null==(e=this.J4t)?void 0:e.LP()),this.s5t.So(new dc(this.M0t,this.Eui))},this.Aui=()=>{this.s5t.So(new _s(this.M0t,this.Ari(this.J4t.LP())))},this.bui=()=>{this.s5t.So(new ks(this.M0t,this.Ari(this.J4t.LP())))},this.Sui=()=>{this.s5t.So(new oe(this.M0t,this.Ari(this.J4t.LP())))},this.Tui=()=>{const t=this.Eui+this.M0t.ct;this.s5t.So(new bc(this.M0t,t)),this.M0t=void 0},this.kui=()=>{this.Bd(this.Ari(this.G0t.p0t))}}},a6=class extends In{get Xoi(){var t;return[null==(t=this.Qoi)?void 0:t.Rhi,...this.Pui.Xoi].filter(it)}get joi(){return this.xui.toi}Zst(){return this.Qst.Jc}snt(){return this.Iui.Ca}get Hri(){var t,i,e;return null!=(e=null!=(i=this.Lhi)?i:null==(t=this.Rui)?void 0:t.adTagParameters)?e:{}}FP(){return this.Ls}Jst(){return this.Qst.Dst}HP(){var t;return null!=(t=this.Lz)?t:super.HP()}qP(){var t;return null!=(t=this.JW)?t:super.qP()}qx(){this.Qst.qx()}Noi(t){return t}async Ta(t,i){if(await this.xpt(),await super.Ta(t,i),void 0===t||void 0===t.ads)return;const e=Jr(t.ads,r2);void 0!==e&&(this.Cui(),this.Dui(),this.Bui(),this.Rui=e,this.Nui=e.backdropLShape,this.Pui.Hri=e.adTagParameters,this.xui.Loi=function(t){switch(t){case"single":return Ws.SINGLE;case"l-shape":return Ws.LSHAPE_AD;case"double":return Ws.DOUBLE;case"single-if-mobile":return Qt.Ks?Ws.SINGLE:void 0;default:return}}(this.Rui.overrideLayout),this.xui.loi=this.Rui.useId3,this.Qst.wn(Do.AM,this.Pd),this.Wu.wn(Rh.yn,this.stt),this.wn(d.Jw,this.CXt),await this.Mui(Qr.DEFAULT,void 0,void 0),this.Qst.wn(Do.TM,this.GG))}async Lui(t){this.Oui();const i=void 0===t.networkCode||void 0===t.customAssetKey?Qr.DEFAULT:Qr.GOOGLE;await this.Mui(i,t.networkCode,t.customAssetKey),t.sseEndpoint&&this.xui.eoi(t.sseEndpoint)}Dui(){Jd(this.Ls,this.Fui),oa(this.Uui),oa(this.Fui),this.Uui.appendChild(this.Fui),this.Ls.appendChild(this.Uui)}Vui(){Jd(this.Fui,this.Ls),Ol(this.Fui),Ol(this.Uui),os(this.Fui),os(this.Uui)}async Mui(t,i,e){var s,n,r;const h=this.E3t(),o=this.Kai;if(!h||!o)return;if(t===(null==(s=this.Qoi)?void 0:s.uhi))return;var a;const u=null!=(a=null==(n=this.Qoi)?void 0:n.A0t)?a:[];switch(await(null==(r=this.Qoi)?void 0:r.hr()),t){case Qr.GOOGLE:var c,d,l;this.Qoi=new s6(h,this.Hui,o,u,this.eai,this.Hri,null==(c=this.Rui)?void 0:c.streamActivityMonitorId,null==(d=this.Rui)?void 0:d.retrievePodIdURI),await(null==(l=this.Qoi)?void 0:l.IW(i,e));break;case Qr.COMPANION:this.Qoi=new r6(this.Qst,this.Hui,u,this.eai);break;case Qr.CSAI:this.Qoi=new o6(h,this.Hui,u,this.eai,this.Hri);break;case Qr.DEFAULT:default:this.Qoi=new N5(h,this.Hui,u,this.eai)}}async Eoi(t,i){var e;this.Wui||void 0===t||void 0===i||(null==(e=this.Qoi)?void 0:e.uhi)!==Qr.GOOGLE&&await this.Mui(Qr.GOOGLE,t,i)}qq(t){void 0===this.qP()&&(this.JW=t,this.Lz=P(t),this.So(new Pi(t)))}Oui(){this.Qst.wn(d._y,this.qui),this.Qst.wn(d.$w,this.XG)}zui(){this.Qst.mn(d._y,this.qui),this.Qst.mn(d.$w,this.XG)}Gui(){var t,i;this.Hui.M3t.wn("Cnt",this.Xui),null==(t=this.Qoi)||t.wn(p5.AD_ENDED,this.Xui),null==(i=this.E3t())||i.wn(Mc.ma,this.jui)}Qui(){var t,i;this.Hui.M3t.mn("Cnt",this.Xui),null==(t=this.Qoi)||t.wn(p5.AD_ENDED,this.Xui),null==(i=this.E3t())||i.mn(Mc.ma,this.jui)}Kui(t){const i=()=>{this.Yui=void 0};this.Yui=t().then(i).catch(i)}Jui(t,i){this.Iui.So(new rh(t,i).Ca),t._x=!0,this.Yui&&(this.Wui=void 0)}async Zui(){var t;null==(t=this.Qoi)||t.Ghi(),this.$ui()}async tci(){this.$ui()}async i3t(){var t;this.ici(),null==(t=this.Qoi)||t.Khi(),this.zhi(this.eci),this.eci=void 0}$ui(){this.ici(),this.eci=this.Wui,this.Wui=void 0,this.sci=void 0,this.nci=void 0}ici(){const t=this.oa.Rx,i=this.oa.Bx;t===this.rci&&i===this.hci||(this.rci=t,this.hci=i,this.So(new ts))}qhi(t){var i;u6(t)&&(null==(i=this.Qoi)||i.qhi(t),this.Uoi(this.LP()));t.wn("Dri",this.aci),this.Iui.So(new R5(t.wnt()))}zhi(t){if(pi(this.xui.toi,t)){var i;if(this.xui.zhi(t),u6(t))null==(i=this.Qoi)||i.zhi(t);else c6(t)&&(this.Pui.tai(t),this.uci.delete(t.o));t.mn("Dri",this.aci),this.Iui.So(new C5(t).Ca)}}Uoi(t){this.cci(t),this.dci()}cci(t){this.lci(t),this.fci(t),this.vci(t)}lci(t){if(void 0!==this.Yui)return;let i;const e=[];for(const s of this.xui.toi.filter(u6))s._x?e.push(s):s!==this.eci&&(t>=s.EO+5||this.eci&&s.EO+5<this.eci.Bri?(s._x=!0,e.push(s)):void 0!==i&&i.EO<s.EO||(i=s));for(const t of e)this.zhi(t);this.Wui!==i&&(this._ci(),this.Wui=i)}_ci(){var t;if(void 0!==this.Wui){var i;const t=void 0!==this.eci;null==(i=this.E3t())||i.gui(t)}null==(t=this.gci)||t.Zg(),this.sci=void 0,this.nci=void 0}pci(t,i){let e=!1;const s=ve.jn(this.RP()).JM(i,5);void 0!==s&&(e=s.An(0)>=t.EO);const n=t.Bri,r=i>=t.EO&&(void 0===n||i<n);return e&&!r}fci(t){if(void 0===this.Wui||void 0!==this.sci)return;const i=this.Wui;u6(i)&&void 0===this.Yui&&this.pci(i,t)&&(this.gci=new at,this.sci=$e(this.hai(i,t,this.gci.Yg),this.gci).catch(t=>{D(t)||this.Jui(i,"Could not load the ad break: "+t.message)}))}vci(t){if(void 0===this.Wui||void 0!==this.nci||void 0!==this.eci)return;const i=this.Wui.Bri;var e;t>=this.Wui.EO&&(void 0===i||t<i)&&(this.nci=null==(e=this.sci)?void 0:e.then(()=>{this.Kui(()=>this.Zui())}))}Mhi(t){var i,e,s;this.Lhi=t,null==(e=this.Qoi)||e.Mhi(null!=(s=null!=t?t:null==(i=this.Rui)?void 0:i.adTagParameters)?s:{}),this.Pui.Hri=t}dci(){const t=this.LP(),i=[];this.uci.forEach(e=>{t>=e.EO&&(void 0===e.Bri||t<e.Bri)||i.push(e)}),i.forEach(t=>{this.Pui.tai(t),this.uci.delete(t.o)});for(const i of this.xui.toi.filter(c6)){const e=i.Bri;if(void 0!==e&&t>=e)continue;const s=i.EO,n=i.EO+i.ct;t>=s&&t<=n&&!this.uci.has(i.o)&&(this.Pui.Yoi(i).catch(()=>{this.Iui.So(new rh(i,"Could not load the overlay.").Ca)}),this.Iui.So(new r5(i).Ca),this.uci.set(i.o,i))}}mci(){return void 0!==this.eci&&void 0!==this.Wui&&uh(this.eci.Bri,this.Wui.EO,5)}async xpt(){var t,i;this.JW=void 0,this.Lz=void 0,this.Rui=void 0,this.wci=!1,this.yci=!0,this.Aci=NaN,this.hci=NaN,this.rci=NaN,this.eci=void 0,null==(t=this.gci)||t.Zg(),this.sci=void 0,this.nci=void 0,this.Wui=void 0,this.Yui=void 0,await(null==(i=this.Qoi)?void 0:i.hr()),this.Qoi=void 0,this.xui.hr(),this.Pui.hr(),this.uci.clear(),this.Wu.mn(Rh.yn,this.stt),this.oa.mn(d.Jw,this.CXt),this.Qst.mn(Do.AM,this.Pd),this.Qst.mn(Do.TM,this.GG),this.zui(),this.Qui(),this.Vui(),this.bci&&zd.Lg(this.bci),this.bci=void 0}async Xx(){await this.xpt(),await super.Xx()}async kn(){var t;await this.Xx().catch(Ct),this.xui.kn(),await(null==(t=this.Qoi)?void 0:t.kn()),await super.kn()}$x(t){switch(t.type){case d.Ww:case d.xw:case Do.bM:return!this.yci;case Do.AM:return!this.yci||(this.yci=!1,!1);case d.Rw:{const t=this.Nd();return t!==this.Aci&&(this.Aci=t,this.So(new Rs(t))),!0}case d.Jw:return this.ici(),!0;case Mc.ma:return void 0!==this.eci}return super.$x(t)}constructor(t){var i;super(t),this.Qst=void 0,this.Uui=void 0,this.Ls=void 0,this.Fui=void 0,this.Kai=void 0,this.JW=void 0,this.Lz=void 0,this.Rui=void 0,this.Nui=void 0,this.Iui=void 0,this.Qoi=void 0,this.Hui=void 0,this.Lhi=void 0,this.eci=void 0,this.Wui=void 0,this.sci=void 0,this.gci=void 0,this.nci=void 0,this.Yui=void 0,this.xui=void 0,this.eai=void 0,this.Pui=void 0,this.uci=qh(),this.yci=!0,this.Aci=NaN,this.hci=NaN,this.rci=NaN,this.bci=void 0,this.wci=!1,this.Sci=!0,this.GG=async()=>{this.Qst.mn(Do.TM,this.GG),this.Rui&&(this.Rui.initializationDelay?this.bci=zd.Og(async()=>{this.Rui&&await this.Lui(this.Rui)},1e3*this.Rui.initializationDelay):await this.Lui(this.Rui))},this.Pd=()=>{this.Qst.mn(Do.AM,this.Pd),this.xui.ooi(this.oa.nt)},this.Cui=async()=>{try{await this.Wst.Bj([se.THEOADS])}catch(t){await this.Xx().catch(Ct),this.qq(vA(t,Vo.LICENSE_INVALID_FEATURE))}},this.stt=t=>{s2(this.Uui,this.oa.Bx,this.oa.Rx,t.width,t.height)},this.CXt=()=>{s2(this.Uui,this.oa.Bx,this.oa.Rx,this.Wu.Eu,this.Wu.Iu)},this.qui=()=>{this.cci(this.LP()),this.dci()},this.XG=()=>{this.cci(this.LP()),this.dci()},this.Xui=async()=>{if(this.mci()){if(this.nci)return;this.nci=this.sci,await this.nci,this.Kui(()=>this.tci())}else this.Kui(()=>this.i3t())},this.jui=t=>(this.Jui(this.eci,"Error playing the current adbreak: "+t.error),this.Kui(()=>this.i3t())),this.aci=t=>{this.Iui.So(t.Ca)},this.Qst=new n6(t),this.Ls=t.xe,this.Uui=function(){const t=h.createElement("div");return fi(t,"theo-ads-sgai-container"),t}(),this.Fui=function(){const t=h.createElement("div");return fi(t,"theo-ads-sgai-content-player"),t}(),this.Iui=new P5(this),this.Hui=new x5,null==(i=this.Qst.Jc)||i.Ent(this.Hui),this.eai=new v5(t.SP),this.xui=new b5(this),this.Pui=new I5(this.Qst,this.Fui,this.eai)}};function u6(t){return"adbreak"===t.Km}function c6(t){return"overlay"===t.Km}var d6=class extends a6{Nd(){var t;return null!=(t=this.WA)?t:super.Nd()}nu(){var t;return null!=(t=this.Ac)?t:super.nu()}LP(){return this.Noi(super.LP())}DP(){return this.Tci?new Date(this.Tci.getTime()+on(this.Qst.LP())):super.DP()}RP(){const t=super.RP();return ve.jn(t).Ny(this.kci)._s()}Tx(){const t=super.Tx();return ve.jn(t).Ny(this.kci)._s()}Noi(t){return t+this.kci}async Ta(t,i){await super.Ta(t,i),this.Rui&&(this.Ac=t,this.Eci=new e5(this.Qst),this.Eci.gr(this.Fui,this.Uui),this.tO(this.Eci))}Bui(){}Dui(){super.Dui(),this.Kai=t2(this.Uui)}Oui(){super.Oui(),this.Pci()}zui(){super.zui(),this.xci()}Pci(){this.Qst.wn(d.Rw,this.xXt),this.Qst.wn(Do.TM,this.MV)}xci(){this.Qst.mn(d.Rw,this.xXt),this.Qst.mn(Do.TM,this.MV)}E3t(){return this.Qst}OP(t,i){this.Ici=!0,super.OP(t,i)}Gx(){super.Gx(),this.So(new Tc(this.LP())),this.Sci=!0,this.Rci=!1}zx(){this.Rci=!0,super.zx()}async hai(t,i,e){var s,n;if(await this.Mui(t.uhi,t.dhi,t.lhi),this.Cci=await(null==(s=this.Qoi)?void 0:s.oai(t,i,e)),await(null==(n=this.Qoi)?void 0:n.Vhi(t,e).catch(()=>{this.Iui.So(new rh(t,"Could not load the backdrop.").Ca)})),t.uhi===Qr.COMPANION)return;const r=new S4(this.cPt,this.Dci),h=new O3(this.cPt.fPt,r,"temporary");this.Bci=h.Bei(Cn(Cn({sources:{src:this.Cci}})),T4({amount:30,bandwidth:HI.Ng.fW()||this.Dst.WY}),"temporary"),this.Nci.Zg(),this.Nci=new at;this.Dci.Ret(this.Bci,this.cPt,"temporary").mi(this.Nci.Yg).catch(Ct)}Mci(t,i){switch(t){case Ws.LSHAPE_CONTENT:case Ws.LSHAPE_AD:return new n5(this.Qst,i);case Ws.SINGLE:default:return new s5(this.Qst)}}async Lci(t){var i,e,s,n,r,h;null==(i=this.gci)||i.Zg(),this.gci=new at,await this.Mui(t.uhi,t.dhi,t.lhi),null==(e=this.Eci)||e.mr(this.Fui),(null==(s=this.Qoi)?void 0:s.uhi)!==Qr.COMPANION&&(this.wci=!0,this.kci=this.LP(),this.Tci=this.DP(),this.Qst.wn(Do.TM,this.MV)),this.Iui.So(new r5(t).Ca),await(null==(n=this.Qoi)?void 0:n.Yhi({sources:{src:this.Cci}},this.gci.Yg,void 0,!0)),this.Eci=this.Mci(t.Zri,null!=(h=t.$ri)?h:this.Nui),this.h3t(this.Eci),this.Eci.gr(this.Fui,this.Uui),null==(r=this.Qoi)||r.Nhi(this.LP())}async Zui(){var t;if(void 0!==this.Wui&&void 0!==this.Cci)return this.xci(),this.Ez=this.ux,await this.Lci(this.Wui),this.Gui(),(null==(t=this.Qoi)?void 0:t.uhi)!==Qr.COMPANION&&(this.Oci=!1),super.Zui()}async tci(){return this.zhi(this.eci),void 0===this.Wui?this.i3t():(await this.Lci(this.Wui),super.tci())}async i3t(){var t,i,e,s;if(this.eci){var n;if(null==(t=this.Bci)||t._S(),this.Bci=void 0,this.Qui(),(null==(i=this.Qoi)?void 0:i.uhi)!==Qr.COMPANION&&(this.wci=!0,this.Pri=!1,this.kci=this.LP(),this.Tci=this.DP(),this.xui.coi(this.Qst.nt),this.Qst.wn(Do.AM,this.Fci),this.Qst.wn(Do.AM,this.Pd),this.Qst.wn(Do.TM,this.MV),await this.Qst.Ta(this.Ac,(new at).Yg)),null==(e=this.Eci)||e.mr(this.Fui),this.Eci=new e5(this.Qst),this.Eci.gr(this.Fui,this.Uui),this.h3t(this.Eci),(null==(s=this.Qoi)?void 0:s.uhi)!==Qr.COMPANION)this.ux=null!=(n=this.Ez)?n:1,this.Qst.Gx();return this.Oci=!0,this.Pci(),super.i3t()}}async xpt(){var t;this.Eci=void 0,this.WA=void 0,this.kci=0,this.Cci=void 0,this.Ez=void 0,this.Tci=void 0,this.Oci=!0,this.wci=!1,this.Sci=!0,this.Rci=!0,this.Nci.Zg(),this.Nci=new at,null==(t=this.Bci)||t._S(),this.Bci=void 0,this.Qst.mn(Do.AM,this.Fci),await super.xpt()}$x(t){if(void 0!==this.Eci)switch(t.type){case d.uo:return!0;case d.jw:return!this.Rci||(this.Rci=!1,this.So(new hl(this.Noi(t.currentTime))),!0);case Do.TM:return!this.Sci||(this.Sci=!1,this.So(new ce(this.Noi(t.currentTime))),!0);case Do.SM:return this.wci||(this.Sci=!0,this.So(new ux(this.Noi(t.currentTime)))),!0;case d.Zw:return this.wci&&!this.Ici||(this.Ici=!1,this.So(new Es(this.Noi(t.currentTime)))),!0;case d.$w:return this.wci&&!this.Ici||this.So(new F(this.Noi(t.currentTime))),!0;case d.Bw:return!this.Oci||(this.So(new At(this.Noi(t.currentTime))),!0);case d._y:return this.So(new Si(this.Noi(t.currentTime),t.currentProgramDateTime)),!0;case d.Qw:return this.So(new H(this.Noi(t.currentTime))),!0;case d.Kw:return this.So(new aa(this.Noi(t.currentTime),t.playbackRate)),!0;case d.gy:return this.Pri?(this.So(new Ze(this.Noi(t.currentTime),t.volume)),!0):(this.Pri=!0,!0);case d.Cw:return this.So(new G(this.Noi(t.currentTime),t.readyState)),!0;case Do.wM:return this.So(new lo(this.Noi(t.currentTime),t.readyState)),!0;case Do.yM:return this.So(new qt(this.Noi(t.currentTime),t.readyState)),!0;case Do.AM:return this.So(new ot(this.Noi(t.currentTime),t.readyState)),!0;case Do.bM:return this.So(new ut(this.Noi(t.currentTime),t.readyState)),!0;case Do.wI:return this.So(new ou(this.Noi(t.currentTime),t.readyState)),!0;case d.Dw:return this.So(new eG(this.Noi(t.currentTime),t.initDataType,t.initData)),!0}return super.$x(t)}constructor(t){super(t),this.Ac=void 0,this.WA=void 0,this.Cci=void 0,this.Ez=void 0,this.Eci=void 0,this.kci=0,this.Ici=!1,this.Tci=void 0,this.cPt=void 0,this.Dci=void 0,this.Nci=new at,this.Bci=void 0,this.Rci=!0,this.Oci=!0,this.Pri=!0,this.xXt=t=>{this.WA=t.duration},this.MV=()=>{this.Qst.mn(Do.TM,this.MV),this.wci=!1},this.Fci=()=>{this.Qst.mn(Do.AM,this.Fci),this.Tci&&(this.Qst.CP=this.Tci,this.Tci=void 0),this.Qst.LP()>0&&(this.kci-=this.Qst.LP())},this.cPt=Rc.Ng,this.Dci=new R4(zd.SP)}};r(),r();var l6=class extends n6{hui(){if(void 0===this.Uci){const t=function(){const t=h.createElement("div");return fi(t,"theo-ads-sgai-ad-player-two"),t}();this.Uci=f6(this.Vci,t,this.oa.Cd)}return this.oa===this.Hci?this.Uci:this.Hci}async Yhi(t,i,e,s){let n;n=this.oa.nu()?this.hui():this.oa,await n.Ta(t,s),this._ui(n,i,e)}async gui(t){t?await this.hui().Xx():await this.oa.Xx()}async Wci(){q4(this.oa,this.hui()),this.h3t(this.hui()),this.oa.xe.style.display="",this.hui().xe.style.display="none",await this.hui().Xx()}async hr(){await this.oa.Xx(),await this.hui().Xx()}constructor(t,i){const e=function(){const t=h.createElement("div");return fi(t,"theo-ads-sgai-ad-player-one"),t}(),s=f6(t,e,i);e.style.display="block",super(s),this.Vci=void 0,this.Hci=void 0,this.Uci=void 0,this.Vci=t,this.Hci=s}};function f6(t,i,e){const s=t.children[t.children.length-1];t.insertBefore(i,s),i2(i);const n=new I2(new FF(i,e,new EC),Qh.Ng);return n.mx=q.OL,n.cO=!1,n}var v6=class extends n6{get Sri(){return this.qci}get Eri(){return this.zci}get pri(){return this.Gci}get bri(){return this.qzt}get kri(){return this.Xci}hui(){return this.J4t.hui()}Yhi(t,i,e,s){return this.J4t.Yhi(t,i,e,s)}jci(t,i,e,s){var n,r;this.qci=t,s?this.Qci=0:this.Qci+=e,this.zci=i,null==(r=this.zci)||r.setSeconds((null==(n=this.zci)?void 0:n.getSeconds())+this.Qci)}Rri(){var t;if(void 0!==this.Kci)return;this.qzt=void 0,this.Xci=void 0;const i=this.Yci;this.Yci=void 0,null==(t=this.Jci)||t.Zg(),m6(this.Qst)&&(this.Zci=new at,this.Kci=$e(this.$ci(i,this.Zci.Yg),this.Zci).catch(yf))}Cri(){var t;this.qzt=this.qci+this.oa.LP(),this.Eri&&(this.Xci=new Date(this.Eri.getTime()+1e3*this.oa.LP()));const i=this.Kci;this.Kci=void 0,null==(t=this.Zci)||t.Zg(),this.Jci=new at,this.Yci=$e(this.tdi(i,this.Jci.Yg),this.Jci).catch(yf)}Aa(){return this.Qst.mq}idi(){this.edi||(this.edi={source:this.Qst.nu(),duration:this.Qst.Nd(),currentTime:this.Qst.LP(),preload:this.Qst.mx,autoplay:this.Qst.cO,playbackRate:this.Qst.ux})}async sdi(t){this.Qst.mx=q.OL,this.Qst.cO=!1,this.J4t.$P=!0;const i=this.J4t.nu();await this.Qst.Ta(i,t),this.Qst.OP(this.J4t.LP()),this.Qst.wn(d.uo,this.LV),this.Qst.wn(d.jw,this.OV)}async ndi(t){this.edi&&(this.Qst.mx=this.edi.preload,this.Qst.cO=this.edi.autoplay,this.Qst.ux=this.edi.playbackRate,await this.Qst.Ta(this.edi.source,t),this.edi=void 0)}async $ci(t,i){await(null==t?void 0:t.catch(Ct)),this.idi(),await this.Qst.Xx(),await this.sdi(i),this.h3t(this.Qst),this.Qst.Gx()}async tdi(t,i){await(null==t?void 0:t.catch(Ct)),this.rdi=this.J4t.LP(),this.Gci=this.rdi+this.Sri,await this.Qst.Xx(),this.Qst.mn(d.uo,this.LV),this.Qst.mn(d.jw,this.OV),await this.ndi(i),this.h3t(this.J4t),this.Qst.wn(Do.bM,this.hdi),this.Qst.Gx()}nu(){return this.edi?this.edi.source:super.nu()}Nd(){return this.edi?this.edi.duration:super.Nd()}odi(){return super.Nd()}Tx(){const t=super.Tx();return ve.jn(t).Ny(this.Sri)._s()}RP(){const t=super.RP();return ve.jn(t).Ny(this.Sri)._s()}Xx(){return this.J4t.Xx()}async Wci(){await this.J4t.Wci(),this.h3t(this.J4t)}async gui(t){await this.J4t.gui(t)}async hr(){var t,i;null==(t=this.Zci)||t.Zg(),this.Zci=void 0,this.Kci=void 0,null==(i=this.Jci)||i.Zg(),this.Jci=void 0,this.Yci=void 0,this.edi=void 0,this.qci=0,this.zci=void 0,this.Gci=0,this.qzt=void 0,this.Xci=void 0,this.rdi=0,this.Qci=0,this.Qst.mn(Do.bM,this.hdi),this.Qst.mn(d.uo,this.LV),this.Qst.mn(d.jw,this.OV),await this.J4t.hr()}async kn(){await this.hr(),await super.kn()}constructor(t,i,e){const s=new l6(i,e);super(s),this.Qst=void 0,this.J4t=void 0,this.Kci=void 0,this.Zci=void 0,this.Jci=void 0,this.Yci=void 0,this.edi=void 0,this.qci=0,this.zci=void 0,this.Gci=0,this.qzt=void 0,this.Xci=void 0,this.rdi=0,this.Qci=0,this.hdi=()=>{if(this.Qst.mn(Do.bM,this.hdi),this.zci){const t=this.zci;t.setSeconds(this.zci.getSeconds()+this.rdi),this.Qst.CP=t,this.zci=void 0}this.Gci-=this.Qst.LP(),this.qzt=void 0,this.Xci=void 0},this.LV=()=>{this.J4t.Gx()},this.OV=()=>{this.J4t.zx()},this.Qst=t,this.J4t=s}};r();var _6=class extends Oc{Ta(t,i){var e;return void 0!==Jr(null!=(e=null==t?void 0:t.ads)?e:[],r2)?Promise.reject(new Ga(Vo.CONFIGURATION_ERROR,"THEOads must be enabled in the player configuration.")):super.Ta(t,i)}},g6=1/60,p6=class extends a6{adi(){this.Qst.zst.wn("presentationmodechange",this.udi)}cdi(){this.Qst.zst.mn("presentationmodechange",this.udi)}ddi(){if(this.ldi&&!j4(this.ldi)&&this.J4t&&this.eci)return function(t){return t instanceof t5}(this.ldi)?(this.Jui(this.eci,"Cannot play L-shape content ad breaks in this representation"),void this.Kui(()=>this.i3t())):void this.fdi(new Lc(this.Qst,this.J4t),!1,!1)}ix(t){t||this.hx||this.qx(),super.ix(t)}get zst(){return this.Qst.zst}async Ta(t,i){await super.Ta(t,i),this.Rui&&(this.vdi=this.Rui.backdropDoubleBox,this.fdi(new G4(this.Qst,this.J4t),!1,!0))}Bui(){this.J4t=new v6(this.Qst,this.Vci,this.oa.Cd)}Dui(){super.Dui(),this.Vci=function(){const t=h.createElement("div");return fi(t,"theo-ads-sgai-ad-player"),t}(),this.Uui.appendChild(this.Vci),this.Kai=t2(this.Vci),this._di()}_di(){Ol(this.Fui),function(t){const i=t.style;i.boxSizing="border-box",i.position="relative",i.alignItems="center",i.border="0 solid transparent",i.borderWidth="0px",i.backgroundColor="transparent",i.backgroundRepeat="no-repeat",i.backgroundAttachment="scroll"}(this.Uui),i2(this.Fui),i2(this.Vci)}Vui(){this.gdi(),super.Vui(),this.Vci&&(os(this.Vci),this.Vci=void 0)}gdi(){e2(this.Ls),e2(this.Fui)}fdi(t,i,e){var s;const n=null!=(s=this.ldi)?s:this,r=null!=t?t:this.Qst;q4(n,r),void 0!==this.ldi&&(this.ldi.mr(this.Uui,this.Fui,this.Vci),this.ldi.kn()),null==t||t.gr(this.Uui,this.Fui,this.Vci,n,i),this.ldi=t,e?this.tO(r):this.h3t(r)}E3t(){return this.J4t}qx(){var t;super.qx(),null==(t=this.J4t)||t.qx()}OP(t,i){this.pdi=!0,super.OP(t,i)}Noi(t){var i,e;return t+(null!=(e=null==(i=this.J4t)?void 0:i.pri)?e:0)}Gui(){var t;super.Gui(),null==(t=this.J4t)||t.wn(d._y,this.mdi),this.Qst.wn(d.qw,this.wdi)}Qui(){var t;super.Qui(),null==(t=this.J4t)||t.mn(d._y,this.mdi),this.Qst.mn(d.qw,this.wdi)}ydi(){this.cci(this.LP()),this.Adi()}Adi(){var t;if(this.mci()||j4(this.ldi)||(null==(t=this.ldi)?void 0:t.yri()))return;const i=_.min(this.J4t.Nd(),this.eci.ct)-this.J4t.LP(),e=this.bdi(i);if(void 0===e)return;if(this.Qst.LP()>e-.75)return;const s=ve.jn(this.J4t.RP()),n=this.J4t.Tx();if(0===n.length)return;const r=_.min(n.end(n.length-1),this.eci.Bri);s.CM().Cr(r)&&!this.Qst.kx&&(this.Qst.hx&&(this.Qst.Gx(),this.Qst.$P=!0),this.Qst.OP(e,{gOt:!0}))}bdi(t){var i;const e=this.Qst.Tx(),s=null==(i=this.eci)?void 0:i.Bri;if(0===e.length||void 0===s)return;const n=e.start(0),r=e.end(e.length-1);let h=s-t;return(h<n||r<h)&&(h=r),uh(h,this.Qst.LP(),g6)?void 0:h}async hai(t,i,e){var s,n;await this.Mui(t.uhi,t.dhi,t.lhi),await(null==(s=this.Qoi)?void 0:s.hai(t,i,e)),await(null==(n=this.Qoi)?void 0:n.Vhi(t,e).catch(()=>{this.Iui.So(new rh(t,"Could not load the backdrop.").Ca)}))}Mci(t,i){if(m6(this.Qst))return new Lc(this.Qst,this.J4t);const e=i.$ri,s=i.ohi,n=i.ahi;switch(t){case Ws.DOUBLE:return e||i.er({backdropUri:this.vdi}),new Z4(this.Qst,this.J4t,e,s,n);case Ws.LSHAPE_AD:return i.$ri||i.er({backdropUri:this.Nui}),new i5(this.Qst,this.J4t,e,s,n);case Ws.LSHAPE_CONTENT:return i.$ri||i.er({backdropUri:this.Nui}),new t5(this.Qst,this.J4t,e,s,n);case Ws.SINGLE:default:return new X4(this.Qst,this.J4t)}}_ui(t){var i,e,s,n;const r=t.Zri,h=this.Mci(r,t);var o;Qt.X_&&Qt.Q_>=16&&Qt.Q_<18&&(null==(i=this.Qoi)?void 0:i.uhi)!==Qr.COMPANION&&(null==(o=this.J4t)||o.OP(this.J4t.LP()));this.fdi(h,this.Sci,!1),Qt.zv&&!h.yri()&&(null==(e=this.Qoi)?void 0:e.uhi)!==Qr.COMPANION&&(e2(this.Fui),oa(this.Fui)),this.Iui.So(new r5(t).Ca),this.Sdi=(null==(s=this.Qoi)?void 0:s.uhi)===Qr.COMPANION,null==(n=this.Qoi)||n.Nhi(this.LP())}pci(t,i){let e=!1;if(this.mci()){var s,n;if(!(null==(s=this.Qoi)?void 0:s.Dhi()))return!1;const t=null==(n=this.J4t)?void 0:n.RP();if(t&&t.length>0){let i=t.end(t.length-1);i-=this.J4t.Sri;e=_.min(this.J4t.Nd(),this.eci.ct)-5<i}}return e||super.pci(t,i)}Tdi(){var t;m6(this.oa)&&(null==(t=this.Qoi)?void 0:t.uhi)!==Qr.COMPANION&&(this.wci=!0,this.oa.wn(Do.TM,this.kdi))}async Zui(){var t,i,e,s;const n=this.Wui;if(void 0!==n){var r,h,o;if(null==(t=this.J4t)?void 0:t.qP())return this.Jui(n,"Could not load the ad break: "+(null==(h=this.J4t)||null==(r=h.qP())?void 0:r.message)),this.Edi();if(this.zui(),this.Tdi(),(null==(i=this.Qoi)?void 0:i.uhi)!==Qr.COMPANION)this.Pdi=this.Qst.CP,null==(o=this.J4t)||o.jci(this.LP(),this.Pdi,0,!0);return null==(e=this.Qoi)||e.Bhi(!1),this.oa.kx&&this.So(new Es(this.LP())),this._ui(n),!Qt.X_||this.oa.hx||(null==(s=this.ldi)?void 0:s.yri())||(this.Qst.$P=!0,this.Qst.Gx()),this.Gui(),super.Zui()}}async tci(){var t,i,e,s;this.zhi(this.eci);const n=this.Wui;var r,h,o,a;if((null==(t=this.J4t)?void 0:t.hui().qP())&&(null==(i=this.Qoi)?void 0:i.uhi)!==Qr.COMPANION)return this.Jui(n,"Could not load the next ad break: "+(null==(h=this.J4t)||null==(r=h.hui().qP())?void 0:r.message)),this.i3t();(this.Tdi(),(null==(e=this.Qoi)?void 0:e.uhi)!==Qr.COMPANION)&&(null==(a=this.J4t)||a.jci(this.LP(),this.Pdi,null==(o=this.J4t)?void 0:o.odi(),!1),await this.Wci());return this._ui(n),(null==(s=this.Qoi)?void 0:s.uhi)!==Qr.COMPANION&&this.oa.Gx(),super.tci()}async i3t(){var t;if(void 0===this.eci)return;this.Qui(),function(t){return t instanceof Lc}(this.ldi)&&(this.xui.coi(this.Qst.nt),this.Qst.wn(Do.AM,this.Pd));const i=null==(t=this.ldi)?void 0:t.yri();if(this.fdi(new G4(this.Qst,this.J4t),!0,!1),!i){this.pdi=!1;const t=this.bdi(0);t&&this.Qst.LP()<t+.75&&this.Qst.OP(t,{gOt:!0})}return m6(this.oa)&&(this.wci=!0,this.oa.wn(Do.TM,this.kdi)),await this.Edi(),this.Oui(),super.i3t()}async Edi(){var t;await(null==(t=this.J4t)?void 0:t.Xx()),this.Wui&&this.sci&&this.Wci()}async Wci(){var t;this.J4t&&(await this.J4t.Wci(),null==(t=this.Qoi)||t.Bhi(!0))}async xpt(){var t;this.Sci=!0,this.pdi=!0,this.Sdi=!0,this.fdi(void 0,!1,!0),await(null==(t=this.J4t)?void 0:t.kn()),this.Pdi=void 0,this.J4t=void 0,this.Kai=void 0,this.oa.mn(Do.TM,this.kdi),await super.xpt()}async kn(){var t;this.cdi(),await(null==(t=this.J4t)?void 0:t.kn()),await super.kn()}$x(t){if(void 0!==this.ldi)switch(t.type){case d.uo:if(!this.Sdi)return this.Sdi=!0,!0;this.Sci=!0;break;case d.jw:if(this.UP&&void 0!==this.eci)return!0;break;case Do.TM:if(!this.Sci||this.wci)return!0;this.Sci=!1;break;case Do.SM:if(this.wci)return!0;this.Sci=!0;break;case d.$w:if(!this.pdi||this.wci)return!0;break;case d.Zw:if(!this.pdi||this.wci)return this.pdi=!0,!0;break;case d.Bw:if(void 0!==this.eci)return!0}return super.$x(t)}constructor(t){super(t),this.Vci=void 0,this.J4t=void 0,this.ldi=void 0,this.vdi=void 0,this.Sdi=!0,this.pdi=!0,this.Pdi=void 0,this.udi=t=>{switch(t.presentationMode){case"native-picture-in-picture":this.ddi();break;case"fullscreen":a3(this.Cd)&&this.ddi();break}},this.mdi=t=>{this.ydi()},this.wdi=t=>{this.ydi()},this.xdi=()=>{const t=this.eci;void 0!==t?(!t.Bri||this.LP()>=t.Bri)&&(this.Qst.mn(d._y,this.xdi),this.Kui(()=>this.i3t())):this.Qst.mn(d._y,this.xdi)},this.kdi=()=>{this.oa.mn(Do.TM,this.kdi),this.wci=!1,this.Sci=!1},this.adi()}};function m6(t){const i=t.zst.Wo()===tc.FULLSCREEN&&a3(t.Cd);return t.mq.XL||i}Pu(t=>t.Cd.ads.theoads?Qt.w_||Qt.S_||Qt.D_?new d6(t):new p6(t):new _6(t),HF.ont),r();Qh.Ng.zz(new class{get P3t(){return mt.ont}qz(t){return r2(t)}x3t(t,i,e){}M6(t,i,e,s){}sj(t){const i={integration:ru.THEOADS,adTagParameters:Lu(t.adTagParameters)?t.adTagParameters:{},useId3:Boolean(t.useId3)};return Z(t.networkCode)&&(i.networkCode=Hi(t.networkCode)),Z(t.customAssetKey)&&(i.customAssetKey=Hi(t.customAssetKey)),Z(t.backdropDoubleBox)&&(i.backdropDoubleBox=Hi(t.backdropDoubleBox)),Z(t.backdropLShape)&&(i.backdropLShape=Hi(t.backdropLShape)),Z(t.overrideLayout)&&(i.overrideLayout=function(t){switch(t){case"single":case"l-shape":case"double":case"single-if-mobile":return t;default:return}}(t.overrideLayout)),Z(t.retrievePodIdURI)&&(i.retrievePodIdURI=Hi(t.retrievePodIdURI)),Z(t.sseEndpoint)&&(i.sseEndpoint=Hi(t.sseEndpoint)),Z(t.streamActivityMonitorId)&&(i.streamActivityMonitorId=Hi(t.streamActivityMonitorId)),ho(t.initializationDelay)&&(i.initializationDelay=co(t.initializationDelay)),Z(t.daiAssetKey)&&(i.daiAssetKey=Hi(t.daiAssetKey)),i}}),r(),r(),r(),r(),r();var w6=class extends Ne{get Ca(){return this.hu||(this.hu=function(t){return{get casting(){return t.bJ},get state(){return t.Ylt},start(){t.Qx()},stop(){t.Kx()},addEventListener(i,e){const s=$a(i,Hi);t.wn(s,e)},removeEventListener(i,e){const s=$a(i,Hi);t.mn(s,e)}}}(this)),this.hu}constructor(...t){super(...t),this.hu=void 0}},y6=class extends w6{get bJ(){return this.Ylt===Yr.CONNECTED}get Ylt(){return this.Ra}Idi(){this.Rdi(),this.fpt.wn(d.do,this.Cdi),this.Ua(Yr.AVAILABLE)}Rdi(){this.oa&&this.oa.mn(d.yw,this.handleAirplayChangedEvent),this.Ddi?this.oa=this.CY:this.oa=this.Bdi,this.oa.wn(d.yw,this.handleAirplayChangedEvent)}get Ddi(){return this.CY.jx()}async Ndi(){if(this.oa){if(this.Ddi){if(!this.oa.hx){const t=Er(800,this.Mdi.Yg),i=this.oa.ww(d.jw,this.Mdi.Yg);await Promise.race([i,t]).catch(Ct)}this.oa.Gx()}else{this.Ldi=this.CY.MP,this.Odi=this.CY.CP,this.Bdi.wn(d._y,this.handleAirplayPlayerTimeUpdate),this.Fdi=this.CY.BI,this.CY.BI=this.Bdi,this.Fdi.zx(),this.Fdi.we(),this.Bdi.be(),this.Bdi.$P=this.Fdi.$P,this.Bdi.ux=this.Fdi.ux,this.Bdi.Mx=this.Fdi.Mx;const t=this.Bdi.ww(d.Zw);this.Bdi.MP=this.Fdi.MP,await t,this.Bdi.Gx(),this.Bdi.$P=this.Fdi.$P,this.Bdi.ux=this.Fdi.ux,this.Bdi.Mx=this.Fdi.Mx}this.Ua(Yr.CONNECTED)}}Udi(){if(this.Fdi){this.Bdi.mn(d._y,this.handleAirplayPlayerTimeUpdate),this.Fdi.$P=this.Bdi.$P,this.Fdi.ux=this.Bdi.ux,this.Fdi.Mx=this.Bdi.Mx;Qt.X_&&!Qt.ru&&this.CY.ct===1/0?this.Odi?this.Fdi.CP=this.Odi:this.Fdi.MP=1/0:this.Fdi.MP=this.Ldi,this.Odi=void 0,this.Ldi=void 0,this.Fdi.be(),this.Bdi.we(),this.Bdi.hx||this.Fdi.Gx(),this.CY.BI=this.Fdi,this.Bdi.hr(),this.Fdi=void 0}else this.oa&&(this.oa.MP=this.oa.MP+1e-4);this.Ua(Yr.AVAILABLE)}preloadPlayer(t){if(ii(t),this.oa.Ax<mh.Qn){const i=this.oa.ww(Do.bM,t);return this.oa.mx=q.VU,i}return Promise.resolve()}Ua(t){t!==this.Ra&&(this.Ra=t,this.So(new K1(this.Ra)))}Qx(){let t;this.fpt.qx(),this.Mdi.Zg(),this.Mdi=new at,t=this.Ddi?this.Vdi(this.Mdi.Yg):this.Hdi(this.Mdi.Yg),Wr($e(t,this.Mdi))}async Vdi(t){await this.preloadPlayer(t),this.CY.Qx()}async Hdi(t){try{await this.Bdi.hr();const i=this.CY.nu();if(void 0===i)throw new m("Not possible to start Airplay without a source");await this.Bdi.Ta(i,t);const e=this.Bdi.ww(Do.TM,t);this.Bdi.Gx(),await Sf(e,3e3),this.Bdi.zx(),ii(t),this.Bdi.Qx()}catch(t){if(D(t))return;0}}Kx(){this.oa.Kx()}kn(){var t;this.Vo(),this.fpt.mn(d.do,this.Cdi),this.Mdi.Zg(),this.CY.uO(this.Bdi),null==(t=this.Bdi)||t.kn()}constructor(t,i,e){super(),this.fpt=void 0,this.oa=void 0,this.CY=void 0,this.Ra=Yr.UNAVAILABLE,this.Mdi=new at,this.Bdi=void 0,this.Ldi=void 0,this.Odi=void 0,this.Fdi=void 0,this.Cdi=()=>{var t;const i=null==(t=this.CY.nu())?void 0:t.sources.filter(lk);(null==i?void 0:i.some(KI))?this.Ua(Yr.AVAILABLE):this.Ua(Yr.UNAVAILABLE)},this.handleAirplayChangedEvent=()=>{this.oa&&this.oa.KP?this.Ndi():this.Ylt===Yr.CONNECTED&&this.Udi()},this.handleAirplayPlayerTimeUpdate=t=>{this.Ldi=t.currentTime,this.Odi=this.CY.CP},this.fpt=t,this.CY=i,this.Bdi=e,this.Bdi.we(),i.aO(e),this.Idi()}};r();var A6=class extends w6{get bJ(){return!1}get Ylt(){return Yr.UNAVAILABLE}Qx(){}Kx(){}};r();var b6=class extends _o{Jx(){this.Wdi.Jx()}tI(t){throw new m("Can't add a track while using AirPlay.")}get ht(){return this.Wdi.ht}get IP(){return this.Wdi.IP}get bt(){return this.fz}get MP(){return this.Wdi.MP}set MP(t){this.OP(t)}OP(t,i){this.Wdi.OP(t,i)}get CP(){return this.Wdi.CP}get ct(){return this.Wdi.ct}get xe(){return this.Ls}get UP(){return this.Wdi.UP}get lt(){return this.Wdi.lt}get WP(){return this.Wdi.WP}get zP(){return this.Wdi.zP}get jP(){return this.Wdi.jP}get KP(){return this.Wdi.KP}get Vx(){return this.Wdi.Vx}get Fx(){return this.Wdi.Fx}get JP(){return this.Wdi.JP}get $P(){return this.Wdi.$P}set $P(t){this.Wdi.$P=t}get sx(){return this.Wdi.sx}get hx(){return this.Wdi.hx}get ux(){return this.Wdi.ux}set ux(t){this.Wdi.ux=t}get _x(){return this.Wdi._x}get mx(){return this.Wdi.mx}set mx(t){this.Wdi.mx=t}get Ax(){return this.Wdi.Ax}get Sx(){return this.Wdi.Sx}get kx(){return this.Wdi.kx}jx(){return this.Wdi.jx()}Qx(){this.Wdi.Qx()}Kx(){this.Wdi.Kx()}get nt(){return this.Wdi.nt}get Rx(){return this.Wdi.Rx}get Bx(){return this.Wdi.Bx}get rt(){return this.Wdi.rt}get Mx(){return this.Wdi.Mx}set Mx(t){this.Wdi.Mx=t}Gx(){Wr(this.Wdi.Gx())}zx(){this.Wdi.zx()}async Xx(){}nu(){return this.Ac}async Ta(t,i){let e;if(ii(i),this.Ac=t,ok(t.sources))e=ml({src:""});else{const i=t.sources.filter(lk);for(const t of i)if(KI(t)){e=t;break}}if(!e)throw new m("Unsupported source.");await this.Wdi.Ta(e,t,i),this.Az(e)}Px(t,i,e){return Promise.resolve()}xx(){return Promise.resolve()}Az(t){this.fz!==t&&(this.fz=t,this.So(new bk(t)))}Wx(){return this.Wdi.Wx()}xP(){return[]}qx(){this.qdi.xz()}gr(t){yk(this,t)}mr(){}Zx(t){return!1}Yx(){this.Wdi.Yx()}async hr(){this.fz=void 0,this.Ac=void 0,await this.Wdi.hr()}be(){this.Wdi.be()}we(){this.Wdi.we()}Hx(){return this.Wdi.Hx()}Aa(){return this.Wdi.Aa()}async kn(){this.Vo(),this.qdi.kn(),await this.Wdi.kn(),this.YL.kn(),this.$L.kn(),this.Gl.kn()}constructor(t,i,e,s,n,r,h){super(),this.Ls=void 0,this.qdi=void 0,this.Wdi=void 0,this.fz=void 0,this.Ac=void 0,this.YL=new He,this.$L=new He,this.Gl=new sl,this.Ls=t,this.qdi=new EF(r,h,e,1,[Ci.Bk]),this.qdi.ust(t),this.Wdi=new QI(t,this.qdi,i,e,s,n),this.Wdi.lw(this.Rs),this.YL.BI=this.Wdi.ht,this.$L.BI=this.Wdi.rt,this.Gl.BI=this.Wdi.nt}},S6=class extends Oc{async kn(){this.zdi.kn(),await super.kn()}constructor(t){super(t),this.zdi=void 0;const i=new b6(this.Pa.xe,this.SP,this.Cd,this.Dst,this.Fx,this.Ost,this.Ql);this.zdi=new y6(this,this.Pa,i),this.VX.PJ(this.zdi),this.wn(d.xw,()=>{this.zdi.Rdi()})}};Pu(t=>zd.Zs.vp?new S6(t):(t.VX.PJ(new A6),t),HF.ant),r(),r();var T6="VPAID";function k6(t){return"spotx"===t.integration}Qh.Ng.zz(new class t{get P3t(){return this.Gdi.P3t}qz(t){return k6(t)}x3t(i,e,s){return s.ads||(s.ads=ck({})),s.ads.vpaidMode=s.ads.vpaidMode||t.Xdi(),this.Gdi.x3t(i,e,s)}M6(i,e,s,n){!function(t){if(!k6(t))throw new m("Unknown ad integration: "+t.integration)}(i);const r=t.jdi(i,s.xe);this.Gdi.M6(r,e,s,n)}sj(t){const i=Ua(t);if(!S(i.id))return i.queryParameters||(i.queryParameters={}),i.custom&&(i.queryParameters.custom?Ye('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(i.queryParameters.custom=i.custom,delete i.custom)),i.app&&(i.queryParameters.app?Ye('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(i.queryParameters.app=i.app,delete i.app)),i.device&&(i.queryParameters.device?Ye('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(i.queryParameters.device=i.device,delete i.device)),i.user&&(i.queryParameters.user?Ye('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(i.queryParameters.user=i.user,delete i.user)),i.ipAddress&&(i.queryParameters.ip_addr?Ye('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(i.queryParameters.ip_addr=i.ipAddress,delete i.ipAddress)),i.maximumAdDuration&&(i.queryParameters.VMaxd?Ye('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(i.queryParameters.VMaxd=i.maximumAdDuration,delete i.maximumAdDuration)),i}static jdi(i,e){return{integration:ru.SPOTX,sources:{src:t.Qdi(i,s.location.href,e.offsetWidth,e.offsetHeight,Qt.Tg)}}}static Qdi(i,e,s,n,r){if(i.sources)return i.sources;let h=n,o=s;r&&0===o&&(o=320,h=180);const a={custom_skin:1,player_width:o,player_height:h};i.cacheBuster&&(a.cb=_.random()),t.Kdi(e)&&(a.content_page_url=e);const u=Mo({},a,i.queryParameters);return u[T6]||u.VPI||(u[T6]="js"),"https://search.spotxchange.com/vast/2.0/"+i.id+"?"+t.Ydi(u)}static Kdi(t){return Vh(t,"http://")||Vh(t,"https://")}static Ydi(t){return W0(t)}static Xdi(){return Qt.N_?jT.ENABLED:jT.INSECURE}constructor(){this.Gdi=new l3}}),r(),r(),r(),r();var E6=_.PI/180,P6=180/_.PI,x6=class{qy(t,i){return this.x=t,this.y=i,this}Ift(t){return this.x=t.x,this.y=t.y,this}Jdi(t){return this.qy(t[0],t[1])}Zdi(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}$di(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}constructor(t,i){this.x=void 0,this.y=void 0,this.x=t||0,this.y=i||0}},Sr=class{qy(t,i,e){return this.x=t,this.y=i,this.z=e,this}Ift(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}Jdi(t){return this.qy(t[0],t[1],t[2])}Zdi(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}V(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}tli(){const t=this.V();if(0!==t){const i=1/t;this.ili(i)}else this.x=0,this.y=0,this.z=0;return this}ili(t){this.x*=t,this.y*=t,this.z*=t}eli(t){const i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*s-h*e,u=o*e+h*i-n*s,c=o*s+n*e-r*i,d=-n*i-r*e-h*s;return this.x=a*o+d*-n+u*-h-c*-r,this.y=u*o+d*-r+c*-n-a*-h,this.z=c*o+d*-h+a*-r-u*-n,this}sli(t){return this.x*t.x+this.y*t.y+this.z*t.z}nli(t,i){const e=t.x,s=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=s*o-n*h,this.y=n*r-e*o,this.z=e*h-s*r,this}constructor(t,i,e){this.x=void 0,this.y=void 0,this.z=void 0,this.x=t||0,this.y=i||0,this.z=e||0}},Ma=class{qy(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this}Ift(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}Jdi(t){return this.qy(t[0],t[1],t[2],t[3])}Zdi(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}sli(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}VF(t){return this.rli(this,t)}rli(t,i){const e=t.x,s=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=e*u+r*h+s*a-n*o,this.y=s*u+r*o+n*h-e*a,this.z=n*u+r*a+e*o-s*h,this.w=r*u-e*h-s*o-n*a,this}hli(){return this.x*=-1,this.y*=-1,this.z*=-1,this.tli(),this}oli(){const t=this.x,i=this.y,e=this.z,s=this.w,n=t*i+e*s;let r,h,o;if(n>.499)r=2*_.atan2(t,s),h=_.PI/2,o=0;else if(n<-.499)r=-2*_.atan2(t,s),h=-_.PI/2,o=0;else{const a=t*t,u=i*i,c=e*e;r=_.atan2(2*i*s-2*t*e,1-2*u-2*c),h=_.asin(2*n),o=_.atan2(2*t*s-2*i*e,1-2*a-2*c)}return new I6(r,o,h)}tli(){let t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,i,e,s){this.x=void 0,this.y=void 0,this.z=void 0,this.w=void 0,this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1}},I6=class{qy(t,i,e){return this.ali=t,this.uli=i,this.cli=e,this}Ift(t){return this.qy(t.ali,t.uli,t.cli)}lO(t){return this.ali+=t.ali,this.uli+=t.uli,this.cli+=t.cli,this}lF(t){return this.ali-=t.ali,this.uli-=t.uli,this.cli-=t.cli,this}dli(){const t=this.ali,i=this.cli,e=this.uli,s=_.cos(t/2),n=_.cos(i/2),r=_.cos(e/2),h=_.sin(t/2),o=_.sin(i/2),a=_.sin(e/2),u=s*n,c=h*o;return new Ma(u*a+c*r,h*n*r+s*o*a,s*o*r-h*n*a,u*r-c*a)}constructor(t,i,e){this.ali=void 0,this.uli=void 0,this.cli=void 0,this.ali=t||0,this.uli=i||0,this.cli=e||0}};r();var R6=["lli","Eot","fli","error"];r();var C6=function(t){return t.Os="unavailable",t.vli="available",t.Ya="presenting",t}({});r();var D6=class{jU(){this.We||(this.We=!0,this.Ls.addEventListener("mousedown",this._li),this.Ls.addEventListener("touchstart",this.gli),s.addEventListener("mousemove",this.cr),s.addEventListener("touchmove",this.mli),s.addEventListener("mouseup",this.wli),s.addEventListener("touchend",this.yli),this.Ali(s))}QU(){this.We&&(this.We=!1,this.Ls.removeEventListener("mousedown",this._li),this.Ls.removeEventListener("touchstart",this.gli),s.removeEventListener("mousemove",this.cr),s.removeEventListener("touchmove",this.mli),s.removeEventListener("mouseup",this.wli),s.removeEventListener("touchend",this.yli),this.bli(s))}Ali(t){if(function(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}(t));else if(Vl(t))try{t.parent.addEventListener("mouseup",this.wli),this.Ali(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.Sli)}}bli(t){if(t.document.documentElement.removeEventListener("mouseleave",this.Sli),Vl(t))try{t.parent.removeEventListener("mouseup",this.wli),this.bli(t.parent)}catch(t){}}Tli(){this.kli=!1}Eli(){const t=this.xli.Pli;t.yaw+=2*_.PI*this.Ili.x*.4/this.Ls.clientWidth,t.pitch+=2*_.PI*this.Ili.y*.5/this.Ls.clientHeight,t.pitch=ur(t.pitch,-_.PI/2,_.PI/2),this.xli.Pli=t}Rli(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Ls}kn(){this.QU()}constructor(t,i){this.xli=void 0,this.Ls=void 0,this.We=!1,this.Cli=new x6,this.Dli=new x6,this.Ili=new x6,this.kli=!1,this._li=t=>{this.Cli.qy(t.clientX,t.clientY),this.kli=!0,t.preventDefault(),t.stopPropagation()},this.gli=t=>{t.touches&&1===t.touches.length&&(this.Cli.qy(t.touches[0].pageX,t.touches[0].pageY),this.kli=!0,t.preventDefault())},this.cr=t=>{if(this.kli||this.Rli()){if(this.Rli()){const i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.Dli.qy(this.Cli.x-i,this.Cli.y-e)}else this.Dli.qy(t.clientX,t.clientY);this.Ili.$di(this.Dli,this.Cli),this.Cli.Ift(this.Dli),this.Eli()}},this.mli=t=>{this.kli&&(this.Dli.qy(t.touches[0].pageX,t.touches[0].pageY),this.Ili.$di(this.Dli,this.Cli),this.Cli.Ift(this.Dli),this.Eli())},this.wli=()=>{this.Tli()},this.yli=()=>{this.Tli()},this.Sli=()=>{this.Tli()},this.xli=t,this.Ls=i}};r();var B6=class extends Oi{xa(){return new N6}constructor(){super("fli")}},N6=class extends wp{constructor(){super("stereochange")}};r();var M6=class{Bli(t){t.clearColor(...this.iZ),t.clear(t.COLOR_BUFFER_BIT)}Nli(t,i){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.Mli.forEach(e=>{e.Nli(t,i)})}Lli(t){this.Mli.push(t)}Oli(){this.Mli=[]}constructor(){this.iZ=[0,0,0,1],this.Mli=[]}};r(),r(),r();var L6=class{Fli(t,i,e){const s=t.createBuffer();return null===s?(Ye("Failed to create buffer."),null):(t.bindBuffer(i,s),t.bufferData(i,e,t.STATIC_DRAW),s)}constructor(t,i,e,s,n){this.Uli=void 0,this.$y=void 0,this.Vli=void 0,this.Vp=void 0,this.Hli=void 0,this.Wli=void 0,this.uc=void 0,this.Uli=t,this.$y=this.Fli(t,i,e),this.Vli=s,this.Vp=n,this.Hli=!1,this.Wli=0,this.uc=0}},O6=class extends L6{jU(t){if(null===this.$y)return void Ye("Attempted to enable buffer that failed to initialize.");if(null===t)return void Ye("Attempted to enable attribute without location.");const i=this.Uli;i.bindBuffer(i.ARRAY_BUFFER,this.$y),i.vertexAttribPointer(t,this.Vli,this.Vp,this.Hli,this.Wli,this.uc),i.enableVertexAttribArray(t)}QU(t){t&&this.Uli.disableVertexAttribArray(t)}constructor(t,i,e){super(t,t.ARRAY_BUFFER,i,e,t.FLOAT)}};var F6=class extends L6{qli(){const t=this.Uli;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.$y),t.drawElements(t.TRIANGLES,this.zli,this.Vp,this.uc)}constructor(t,i){super(t,t.ELEMENT_ARRAY_BUFFER,i,1,t.UNSIGNED_SHORT),this.zli=void 0,this.zli=i.length}};r();var U6=function(t){return t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor",t}({}),Ea=function(t){return t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture",t}({}),V6=function(t){return t.Normal="vNormal",t.Color="vColor",t.UV="vUV",t}({}),H6=class{Gli(t,i,e){const s=this.Xli(t,t.VERTEX_SHADER,i),n=this.Xli(t,t.FRAGMENT_SHADER,e);if(null===s||null===n)return Ye("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(Ye("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(Ye("Failed to initialize shader program"),null))}Xli(t,i,e){const s=t.createShader(i);if(null===s)return Ye("failed to create shader."),null;if(t.shaderSource(s,e),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(s);return Ye("Failed to compile shader with error: "+i),t.deleteShader(s),null}return s}jli(){return this.Qli}Kli(t){const i=this.Qli;if(null===i)return Ye("Attempted to retrieve attribute location when shader program was not initialized"),null;const e=this.Uli.getAttribLocation(i,t);return-1===e?null:e}Yli(t){const i=this.Qli;if(null===i)return Ye("Attempted to retrieve uniform location when shader program was not initialized"),null;const e=this.Uli.getUniformLocation(i,t);return null===e&&Pv("Attempted to retrieve nonexistent uniform: "+t),e}constructor(t,i,e){this.Qli=void 0,this.Uli=void 0,this.Uli=t,this.Qli=this.Gli(this.Uli,i,e)}},W6=class{Jli(){const t=this.Zli.length,i=_.max(...this.$li);return i>=t?(Pv("Created geometry where largest index ("+i+") is larger than/equal to attribute array size ("+t+")"),!1):(i<t-1&&Ye("Created geometry where largest index ("+i+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.tfi||this.tfi.length===t||(Pv("Created geometry where position ("+t+") and uv ("+this.tfi.length+") buffers have different length."),!1))}ifi(t,i){if(!this.Jli())throw new m("Failed to validate buffers for WebGLGeometry.");const e=function(t,i){const e=[];return i.forEach(t=>{e.push(t.x,t.y,t.z)}),new O6(t,new Float32Array(e),3)}(t,this.Zli),s=function(t,i){return new F6(t,new Uint16Array(i))}(t,this.$li),n=function(t,i){const e=[];return i.forEach(t=>{e.push(t.x,t.y)}),new O6(t,new Float32Array(e),2)}(t,this.tfi);return new q6(e,s,n,i)}constructor(t,i,e){this.Zli=void 0,this.$li=void 0,this.tfi=void 0,this.Zli=t,this.$li=i,this.tfi=e}},q6=class{efi(){this.Zli.jU(this.sfi),null!==this.nfi&&this.tfi.jU(this.nfi)}rfi(){this.Zli.QU(this.sfi),null!==this.nfi&&this.tfi.QU(this.nfi)}Nli(){this.$li.qli()}constructor(t,i,e,s){this.Zli=void 0,this.sfi=void 0,this.tfi=void 0,this.nfi=void 0,this.$li=void 0,this.Zli=t;const n=s.Kli(U6.VertexPos);if(null===n)throw new m("Failed to get position attribute location.");this.sfi=n,this.tfi=e,this.nfi=s.Kli(U6.VertexUV),this.$li=i}},z6=class extends W6{constructor(t=1,i=32,e=16,s=0,n=2*_.PI,r=0,h=_.PI){let o=0;const a=_.min(r+h,_.PI),u=[],c=[],d=[],l=[];for(let u=0;u<=e;u++){const f=[],v=u/e;let g=0;0===u&&0===r?g=.5/i:u===e&&a===_.PI&&(g=-.5/i);for(let e=0;e<=i;e++){const a=e/i,u=-t*_.cos(s+a*n)*_.sin(r+v*h),l=t*_.cos(r+v*h),p=t*_.sin(s+a*n)*_.sin(r+v*h);c.push(new Sr(u,l,p)),d.push(new x6(a+g,1-v)),f.push(o++)}l.push(f)}for(let t=0;t<e;t++)for(let s=0;s<i;s++){const i=l[t][s+1],n=l[t][s],h=l[t+1][s],o=l[t+1][s+1];(0!==t||r>0)&&u.push(i,n,o),(t!==e-1||a<_.PI)&&u.push(n,h,o)}super(c,u,d)}};r(),r();var G6=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],X6=class{hfi(){const t=this.Uli;t.activeTexture(this.ofi),t.bindTexture(t.TEXTURE_2D,this.afi)}gr(){const t=this.Uli;t.activeTexture(this.ofi),t.bindTexture(t.TEXTURE_2D,this.afi),t.uniform1i(this.ufi,0)}cfi(t){const i=this.Uli;i.bindTexture(i.TEXTURE_2D,this.afi),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,this.i2,this.dfi,this.lfi,this.ffi,t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}vfi(t){const i=this.Uli;i.bindTexture(i.TEXTURE_2D,this.afi),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),t.Gst.DQ(i,i.TEXTURE_2D,this.i2,this.dfi,this.lfi,this.ffi),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,i){if(this.Uli=void 0,this.afi=void 0,this.ufi=void 0,this.i2=void 0,this.dfi=void 0,this.lfi=void 0,this.ffi=void 0,this.ofi=void 0,this.Uli=t,this.afi=t.createTexture(),null===this.afi)throw new m("Failed to create texture");const e=i.Yli(Ea.Texture);if(null===e)throw new m("Failed to get texture location.");this.ufi=e,t.bindTexture(t.TEXTURE_2D,this.afi),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.ofi=t.TEXTURE0,this.i2=0,this.dfi=t.RGBA,this.lfi=t.RGBA,this.ffi=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.i2,this.dfi,2,2,0,this.lfi,this.ffi,new j(G6))}},j6="\n    attribute vec4 "+U6.VertexPos+";\n    attribute vec2 "+U6.VertexUV+";\n\n    uniform mat4 "+Ea.ModelViewMat+";\n    uniform mat4 "+Ea.ProjectionMat+";\n    \n    varying mediump vec2 "+V6.UV+";\n    \n    void main() {\n      gl_Position = "+Ea.ProjectionMat+" * "+Ea.ModelViewMat+" * "+U6.VertexPos+";\n      "+V6.UV+" = "+U6.VertexUV+";\n    }\n",Q6="\n    varying mediump vec2 "+V6.UV+";\n    \n    uniform sampler2D "+Ea.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+Ea.Texture+", "+V6.UV+");\n    }\n",K6=class{jli(){return this.Qli}jU(){this.Uli.useProgram(this.Qli.jli()),this.afi.gr()}_fi(t){this.afi.cfi(t)}gfi(t){this.afi.vfi(t)}constructor(t){this.Uli=void 0,this.Qli=void 0,this.afi=void 0,this.Uli=t,this.Qli=new H6(t,j6,Q6),this.afi=new X6(t,this.Qli)}};r(),r();var Y6=sn(yd()),J6=sn(Ad()),Z6=(sn(bd()),sn(Sd())),$6=(sn(Td()),sn(kd())),t8=sn(Ed()),i8=sn(Pd()),e8=sn(xd()),s8=sn(Id()),n8=class{Nli(t,i){if(this.pfi(i.mfi)){this.wfi.efi(),this.yfi.jU();const e=this.Afi,s=i.bfi,n=(0,t8.default)(s,s,e);t.uniformMatrix4fv(this.Sfi,!1,n);const r=i.Tfi;t.uniformMatrix4fv(this.kfi,!1,r),this.wfi.Nli(),this.wfi.rfi()}}pfi(t){return"none"===this.mfi||"right"!==t&&"left"===this.mfi||"right"===t&&"right"===this.mfi}get Afi(){const t=(0,Y6.default)(),i=this.mo;return(0,s8.default)(t,t,i.Zdi()),(0,e8.default)(t,t,this.Efi.x,new Float32Array([1,0,0])),(0,e8.default)(t,t,this.Efi.y,new Float32Array([0,1,0])),(0,e8.default)(t,t,this.Efi.z,new Float32Array([0,0,1])),t}constructor(t,i,e,s){this.wfi=void 0,this.yfi=void 0,this.Sfi=void 0,this.kfi=void 0,this.mo=new Sr,this.Efi=new Sr,this.mfi="none",this.yfi=e;const n=e.jli();this.wfi=i.ifi(t,n),s&&(this.mfi=s);const r=n.Yli(Ea.ModelViewMat);if(null===r)throw new m("Failed to get model view matrix location.");this.Sfi=r;const h=n.Yli(Ea.ProjectionMat);if(null===h)throw new m("Failed to get projection matrix location.");this.kfi=h}};r();var r8=class{Pfi(){const t=(0,Y6.default)();return(0,i8.default)(t,this.xfi,this.Ifi,this.Rfi,this.Cfi)}Dfi(){this.Bfi=this.Pfi()}get Tfi(){return new Float32Array(this.Bfi)}set Tfi(t){this.Bfi=t}Nfi(){const t=(0,Y6.default)(),i=(0,Z6.default)((0,Y6.default)(),this.Mfi.Zdi()),e=(0,J6.default)((0,Y6.default)(),this.Lfi.Zdi());return(0,t8.default)(t,i,e),(0,$6.default)(t,t),t}Ofi(){this.Ffi=this.Nfi()}get bfi(){return new Float32Array(this.Ffi)}Ufi(){this.Ofi(),this.Dfi()}hr(){this.Mfi=new Sr,this.Efi=new Ma,this.Ufi()}Vfi(t){const i=this.Lfi.oli();i.lO(t),this.Efi=i.dli()}Hfi(t){this.Efi=t.dli()}get Wfi(){return this.xfi}set Wfi(t){this.xfi=t,this.Dfi()}get qfi(){return this.Ifi}set qfi(t){this.Ifi=t,this.Dfi()}get mo(){return(new Sr).Ift(this.Mfi)}set mo(t){this.Mfi=t,this.Ofi()}get Efi(){return(new Ma).Ift(this.Lfi)}set Efi(t){this.Lfi=t,this.Ofi()}constructor(t){this.xfi=72*_.PI/180,this.Ifi=1.77,this.Rfi=.1,this.Cfi=100,this.mfi="none",this.Mfi=void 0,this.Lfi=void 0,this.Bfi=void 0,this.Ffi=void 0,this.Mfi=new Sr,this.Lfi=new Ma,this.Bfi=this.Pfi(),this.Ffi=this.Nfi(),t&&(this.mfi=t)}};r();var h8=class extends Oi{xa(){return new o8}constructor(){super("lli")}},o8=class extends wp{constructor(){super("directionchange")}},a8=1e-4,u8=class extends Ne{zfi(){od.xr?(od.xr.addEventListener("devicechange",this.Gfi),this.Gfi()):this.ABt("Your browser does not support WebXR",Vo.VR_PLATFORM_UNSUPPORTED)}Xfi(){this.oa.Ma.wn(Gi.pa,this.bn),this.oa.wn(Rh.yn,this.bn),this.oa.wn(d.do,this.fo),this.oa.wn(d.Zw,this.jG)}jfi(){var t;this.Qfi||(this.Qfi=h.createElement("canvas"),this.Qfi.className="theoplayer-vr",this.Qfi.style.zIndex="2",this.Qfi.style.background="black",this.Qfi.style.display="none",this.oa.xe.appendChild(this.Qfi),oa(this.Qfi));const i=null!=(t=this.Qfi.getContext("webgl2"))?t:this.Qfi.getContext("webgl");i?(this.Uli=i,this.Kfi=new D6(this,this.Qfi)):this.ABt("Your browser does not support WebGL",Vo.VR_PLATFORM_UNSUPPORTED)}async Yfi(){if(!od.xr)return this.Jfi=!1,void(this.Zfi=!1);await Promise.all([od.xr.isSessionSupported("inline").then(t=>{this.Jfi=t}).catch(t=>{this.Jfi=!1,this.ABt("exception when calling xr.isSessionSupported for inline session: "+t,Vo.VR_PRESENTATION_ERROR)}),od.xr.isSessionSupported("immersive-vr").then(t=>{this.Zfi=t}).catch(t=>{this.Zfi=!1,this.ABt("exception when calling xr.isSessionSupported for immersive-vr session: "+t,Vo.VR_PRESENTATION_ERROR)})])}$fi(){this.tvi&&(this.ivi(this.evi,this.nvi),this.rvi())}ivi(t,i){const e=this.Uli;if(!e||t===qR.NONE)return;let s,n;this.hvi.Oli(),t===qR.PM360?(s=2*_.PI,n=-_.PI/2):(s=_.PI,n=-_.PI);const r=new z6(16,60,40,0,s),h=[],o=[];for(let t=0;t<r.tfi.length;t++){const e=r.tfi[t];switch(i){case Vu.NONE:h.push(e),o.push(e);break;case Vu.VERTICAL:h.push(new x6(e.x,.5*e.y)),o.push(new x6(e.x,.5*e.y+.5));break;case Vu.HORIZONTAL:h.push(new x6(.5*e.x,e.y)),o.push(new x6(.5*e.x+.5,e.y))}}r.Zli.forEach(t=>{t.x*=-1});const a=new W6(r.Zli,r.$li,h),u=new W6(r.Zli,r.$li,o);this.ovi=new K6(e);const c=new n8(e,a,this.ovi,"left");c.Efi.y=n,this.hvi.Lli(c);const d=new n8(e,u,this.ovi,"right");d.Efi.y=n,this.hvi.Lli(d)}rvi(){this.Uli&&(this.Qfi.style.display="block",this.avi(),this.oa.mn(d.uo,this.uvi),this.Jfi&&(this.oa.hx?this.oa.wn(d.uo,this.uvi):this.uvi()))}cvi(){this.fvi(),this.oa.mn(d.uo,this.uvi),this.Qfi&&(this.Qfi.style.display="none")}vvi(){this._vi(),this.gvi()}async pvi(){if(!this.mvi&&this.Jfi)try{const t=await Nc(od.xr.requestSession("inline"),this.rV.Yg);let i;i=Qt.Ks?Qt.u_?"viewer":"local":"viewer";const e=await t.requestReferenceSpace(i);t.addEventListener("end",this._vi),this.wvi=e,this.mvi=t,this.Kfi.jU(),this.yvi(),await t.updateRenderState({baseLayer:new XRWebGLLayer(t,this.Uli),inlineVerticalFieldOfView:this.xfi*E6})}catch(t){this._vi(),this.ABt(t,Vo.VR_PRESENTATION_ERROR)}}_vi(){this.mvi&&(this.fvi(),this.Kfi.QU(),this.mvi.removeEventListener("end",this._vi),this.mvi.end().catch(Ct),this.mvi=null,this.avi())}async Avi(){if(!this.bvi&&this.Zfi){this.fvi();try{const t=await Nc(od.xr.requestSession("immersive-vr"),this.rV.Yg),i=await t.requestReferenceSpace("local");t.addEventListener("end",this.gvi),this.Svi=i,this.bvi=t,await this.Tvi(),this.yvi()}catch(t){this.gvi(),this.ABt(t,Vo.VR_PRESENTATION_ERROR)}}}async Tvi(){const t=this.Uli,i=this.bvi;this.Qfi&&t&&i&&!this.kvi&&(this.Qfi.addEventListener("webglcontextlost",t=>{t.preventDefault()}),this.Qfi.addEventListener("webglcontextrestored",()=>{this.ivi(this.evi,this.nvi)}),this.kvi=!0,await t.makeXRCompatible(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}))}avi(){if(!this.bvi&&this.Uli){const t=this.Uli,i=this.Qfi.clientWidth,e=this.Qfi.clientHeight;if(0===i||0===e)return;const s=zd.Zs.fp;this.Qfi.width=i*s,this.Qfi.height=e*s,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}yvi(){null===this.Evi&&(this.Pvi(),this.xvi?this.Evi=this.xvi.requestAnimationFrame(this.Ivi):this.Rvi())}fvi(){null!==this.Evi&&(this.Rvi(),this.xvi&&this.xvi.cancelAnimationFrame(this.Evi),this.Evi=null)}Pvi(){if(null!==this.Cvi)return;const t=this.oa.Wx();if(void 0===t||!(t instanceof HTMLVideoElement))return void 0;if("function"!=typeof t.requestVideoFrameCallback)return;const i=()=>{this.ovi.gfi(this.oa),this.Cvi=t.requestVideoFrameCallback(i)};this.Dvi=t,this.Cvi=t.requestVideoFrameCallback(i)}Rvi(){var t,i;null!==this.Cvi&&(null==(i=this.Dvi)||null==(t=i.cancelVideoFrameCallback)||t.call(i,this.Cvi),this.Dvi=null,this.Cvi=null)}Bvi(){return!!this.Nvi||(Qt.ru?this.Mvi&&this.Lvi:this.Mvi)}Ovi(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then(t=>{this.Lvi="granted"===t})}Fvi(){return(!this.hx()||Boolean(this.Uvi))&&this.Vvi()}hx(){return this.oa.hx}Vvi(){return this.oa.Ax>=2}get Hvi(){return this.Wvi}set Hvi(t){const i=this.Ylt;this.Wvi=t,this.Ylt!==i&&this.So(new Tr)}get tvi(){return this.evi!==qR.NONE}get evi(){return this.qvi}set evi(t){const i=this.Ylt;this.qvi=t,this.Ylt!==i&&this.So(new Tr)}get Zfi(){return this.zvi}set Zfi(t){const i=this.zvi;this.zvi=t,this.zvi!==i&&this.So(new Tr)}get Gvi(){return this.Zfi}get xvi(){return this.bvi||this.mvi}get bvi(){return this.Nvi}set bvi(t){const i=this.Ylt;this.Nvi=t,this.Ylt!==i&&this.So(new Tr)}get Xvi(){return this.Svi||this.wvi}get jvi(){const t=this.Qvi.oli();return{yaw:t.ali*P6,pitch:t.uli*P6,roll:t.cli*P6}}set jvi(t){const i=c8(t&&t.pitch||0)*E6,e=c8(t&&t.roll||0)*E6,s=c8(t&&t.yaw||0)*E6,n=new I6(s,i,e),r=this.Qvi.oli(),h=this.Kvi.oli();this.Qvi=n.dli(),this.Kvi=n.lF(r).lO(h).dli()}get Pli(){const t=this.Kvi.oli();return{yaw:t.ali,pitch:t.uli,roll:t.cli}}set Pli(t){const i=d8(t&&t.pitch||0),e=d8(t&&t.roll||0),s=d8(t&&t.yaw||0),n=new I6(s,i,e);this.Kvi=n.dli()}get Ylt(){return this.Hvi?this.bvi?C6.Ya:C6.vli:C6.Os}get Yvi(){return null!==this.bvi}set Yvi(t){const i=this.Yvi;t&&this.Zfi?this.Avi():this.gvi(),this.Yvi!==i&&this.So(new B6)}get Jvi(){return this.Mvi}set Jvi(t){null===this.Nvi&&(this.Mvi=t,t&&Qt.ru&&this.Ovi())}get Zvi(){return this.xfi}set Zvi(t){t&&t>=0&&t<=180&&(this.xfi=t,null!==this.mvi&&this.mvi.updateRenderState({inlineVerticalFieldOfView:this.xfi*E6}))}ABt(t,i){this.So(new Pi(new Ga(i,t)))}$vi(){const t=this.oa.nu();return t&&t.vr}kn(){this.rV.Zg(),this.vvi(),this.Vo(),this.Qfi&&(os(this.Qfi),this.Qfi=void 0),this.Uli=void 0,this.Kfi&&(this.Kfi.kn(),this.Kfi=void 0),this.oa=void 0}constructor(t){super(),this.oa=void 0,this.Ca=void 0,this.rV=new at,this.Jfi=!1,this.zvi=!1,this.Qvi=new Ma,this.t_i=new Ma,this.Kvi=new Ma,this.xfi=74,this.Mvi=!1,this.YS=void 0,this.nvi=Vu.NONE,this.Wvi=!1,this.qvi=qR.NONE,this.Qfi=void 0,this.ovi=void 0,this.Uli=void 0,this.hvi=new M6,this.Kfi=void 0,this.mvi=null,this.Nvi=null,this.wvi=null,this.Svi=null,this.kvi=!1,this.Evi=null,this.Dvi=null,this.Cvi=null,this.Uvi=0,this.Lvi=!1,this.Gfi=()=>{const t=this.Jfi;this.Yfi().then(()=>{this.Jfi?t||this.mvi||this.Nvi||this.$fi():this.ABt("Inline session not available. Panorama functionality will not work.",Vo.VR_PRESENTATION_ERROR)})},this.fo=()=>{var t;this.cvi(),this.vvi(),null==(t=od.xr)||t.removeEventListener("devicechange",this.Gfi);const i=this.$vi();this.YS=i,this.Hvi=it(i),this.nvi=(null==i?void 0:i.stereoMode)||Vu.NONE,this.evi=(null==i?void 0:i.panoramaMode)||qR.NONE,i&&(this.jfi(),this.$fi(),this.zfi())},this.uvi=()=>{this.pvi()},this.gvi=()=>{this.bvi&&(this.fvi(),this.bvi.removeEventListener("end",this.gvi),this.bvi.end().catch(Ct),this.bvi=null,this.Svi=null,this.kvi=!1,this.mvi?this.yvi():this.pvi())},this.bn=()=>{this.avi()},this.Ivi=(t,i)=>{if(!this.Uli)return;const e=this.Uli,s=this.xvi;if(null===this.Cvi&&this.Fvi()&&(this.ovi.gfi(this.oa),this.Uvi>0&&(this.Uvi-=1)),null===s||void 0===i)return void 0;this.Evi=s.requestAnimationFrame(this.Ivi);const n=s.renderState.baseLayer,r=i.getViewerPose(this.Xvi);if(void 0===n||void 0===r)return void 0;e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer);let h=new I6,o=0;for(const t of r.views){const i=new r8(t.eye);if(i.Tfi=t.projectionMatrix,this.Bvi()){let e;if(Qt.Ks&&Qt.u_&&null===this.Nvi){if(e=t.transform.inverse.orientation,0===e.x&&0===e.y&&0===e.z&&1===e.w)return}else e=t.transform.orientation;i.Efi=new Ma(e.x,e.y,e.z,e.w)}this.mvi&&i.Vfi(this.Kvi.oli()),h=h.lO(i.Efi.oli()),o+=1;const s=n.getViewport(t);s&&e.viewport(s.x,s.y,s.width,s.height),this.hvi.Nli(e,i)}const a=new I6(h.ali/o,h.uli/o,h.cli);this.Qvi=a.dli(),function(t,i){const e=t.sli(i);return 1-e*e<a8}(this.Qvi,this.t_i)||(this.t_i.Ift(this.Qvi),this.So(new h8))},this.jG=()=>{this.Uvi=5},this.oa=t,this.Ca=function(t){let i;const e={get stereo(){return t.Yvi},set stereo(i){t.Yvi=i},get useDeviceMotionControls(){return t.Jvi},set useDeviceMotionControls(i){t.Jvi=i},get direction(){return t.jvi},set direction(i){t.jvi=i},get verticalFOV(){return t.Zvi},set verticalFOV(i){t.Zvi=i},get canPresentVR(){return t.Gvi},get state(){return t.Ylt},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new QD(t,R6,e),e}(this),this.Xfi()}};function c8(t){return Kl(t+180,360)-180}function d8(t){return Kl(t+_.PI,2*_.PI)-_.PI}VF(function(t){return class extends t{xa(){return po(super.xa(),{vr:this.xli.Ca})}kn(){this.xli.kn(),super.kn()}constructor(t,i){super(t,i),this.xli=void 0,this.xli=new u8(this)}}},zo.lu),r(),r();var l8=class extends _o{get Ca(){return this.hu||(this.hu=function(t){let i;const e={get status(){return t.hk},get tasks(){return t.Fei},get network(){return t.oX.Ca},createTask:(i,e)=>t.i_i(i,e),addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new ws(t,e),e}(this)),this.hu}get hk(){return this.e_i.hk}get Fei(){return this.e_i.Fei.Ca}get oX(){return this.Ust}i_i(t,i,e){let s,n;if(void 0===e&&(e="persistent"),!t)throw new m("Unexpected - The source description is undefined");if(s=Cn(t),n=T4(i),qo(s))throw new m("Invalid source description");return this.e_i.Bei(s,n).Ca}constructor(t,i){super(),this.e_i=void 0,this.Ust=void 0,this.hu=void 0,this.e_i=t,this.Ust=i,this.e_i.wn("Eot",this.Rs)}};var f8=function(){const t=new BD(zd.SP,!1),i=Rc.Ng,e=new C4(t),s=new S4(i,e),n=new MD(t),r=new O3(i.fPt,s,"persistent");return new l8(r,n)}().Ca;function v8(t,i){if("function"==typeof t.getAll){return eh(void 0===i?t.getAll():t.getAll(i))}return function(t){const i=new pa,e=[];return t.onsuccess=()=>{const s=t.result;s&&s.value?(e.push(s.value),s.continue()):i.Xy(e)},t.onerror=()=>{i.jy(t.error)},i.Qy}(void 0===i?t.openCursor():t.openCursor(i))}function eh(t){return new Promise((i,e)=>{t.onsuccess=()=>{i(t.result)},t.onerror=()=>{e(t.error)}})}r(),r(),r(),r(),r(),r();var _8=class{Zg(){if(this.ro)try{this.uPt.abort(),this.ro=!1}catch(t){}}constructor(t){this.uPt=void 0,this.Qy=void 0,this.ro=void 0,this.uPt=t,this.ro=!0,this.Qy=new Promise((t,i)=>{this.uPt.oncomplete=()=>{this.ro=!1,t()},this.uPt.onerror=()=>{this.ro&&(this.ro=!1,i(this.uPt.error||new m("Transaction error")))},this.uPt.onabort=()=>{this.ro=!1,i(new m("Transaction aborted"))}})}};async function g8(t,i,e){const s=new _8(t);try{const[t]=await Promise.all([i(e),s.Qy]);return t}catch(t){if(!s.ro)throw new V3("IDBTransaction committed prematurely",t);throw t}finally{s.Zg()}}var p8=class{get l(){return this.pE.l}ZEt(t){return Promise.resolve("persistent"===t)}zSt(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(Aa(i));return eh(this.s_i(cu.gPt).put(t))}async $Et(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(Aa(i));for(const e of t)await this.zSt(e,i)}async Hy(t){return Boolean(await this.Wy(t))}Wy(t){return eh(this.s_i(cu._Pt).get(t))}tPt(t,i){return eh(this.s_i(cu._Pt).index(i).get(t))}async jEt(t){const i=[];for(const e of t){const t=await this.Wy(e);t&&i.push(t)}return i}iPt(){return v8(this.s_i(cu._Pt))}ePt(t){return v8(this.s_i(cu._Pt),t)}sPt(t,i){return v8(this.s_i(cu._Pt).index(i),t)}_S(t){return eh(this.s_i(cu.gPt).delete(t))}async nPt(t){for(const i of t)await this._S(i)}rPt(){return eh(this.s_i(cu.gPt).clear())}s_i(t){if(!this.n_i)throw new m("Lock was released");if(!function(t,i){return t===cu._Pt&&i===cu._Pt||i===cu.gPt}(t,this.n_i.mode))throw new m("Incompatible transaction mode: "+this.n_i.mode+", expected "+t);return this.n_i.objectStore(this.l)}r_i(){this.pE.h_i(this),this.n_i=void 0}constructor(t,i){this.pE=void 0,this.n_i=void 0,this.pE=t,this.n_i=i}};var m8=class{ZEt(t){return Promise.resolve("persistent"===t)}zSt(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(Aa(i)):this.uPt(cu.gPt,i=>i.zSt(t))}$Et(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(Aa(i)):this.uPt(cu.gPt,i=>i.$Et(t))}Hy(t){return this.uPt(cu._Pt,i=>i.Hy(t))}Wy(t){return this.uPt(cu._Pt,i=>i.Wy(t))}tPt(t,i){return this.uPt(cu._Pt,e=>e.tPt(t,i))}jEt(t){return this.uPt(cu._Pt,i=>i.jEt(t))}iPt(){return this.uPt(cu._Pt,t=>t.iPt())}ePt(t){return this.uPt(cu._Pt,i=>i.ePt(t))}sPt(t,i){return this.uPt(cu._Pt,e=>e.sPt(t,i))}_S(t){return this.uPt(cu.gPt,i=>i._S(t))}nPt(t){return this.uPt(cu.gPt,i=>i.nPt(t))}rPt(){return this.uPt(cu.gPt,t=>t.rPt())}QPt(t){return this.o_i(),this.LPt=new p8(this,t),this.LPt}o_i(){if(void 0!==this.LPt)throw new m("Already locked")}h_i(t){if(this.LPt!==t)throw new m("Incorrect lock");this.LPt=void 0}Zo(t){return this.ta.Zo(t)}uPt(t,i){return this.Zo(()=>this.a_i(t,i))}async a_i(t,i){this.o_i();const e=this.u_i.transaction(this.l,t),s=this.QPt(e);try{return await g8(e,i,s)}finally{s.r_i()}}c_i(t){this.o_i();const i=this.u_i.transaction(this.l,t);return this.QPt(i)}static d_i(t,i){let e;const s=new Promise(t=>{e=t}),n=t.reduce((t,i)=>t.then(()=>{let t;const e=new Promise(i=>{t=i});return i.Zo(()=>(t(),s)).catch(Ct),e}),Promise.resolve());return e(n.then(i)),s}constructor(t,i){this.u_i=void 0,this.l=void 0,this.LPt=void 0,this.ta=new te,this.u_i=t,this.l=i}};r(),r(),r(),r(),r();var w8={bD:17,l_i:async t=>{const{transaction:i,database:e}=t,s=i.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)e.deleteObjectStore(s[t]);e.createObjectStore(S8,{keyPath:"id"}),e.createObjectStore(T8,{keyPath:"key"}),e.createObjectStore(k8,{keyPath:"key"});e.createObjectStore(E8,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");e.createObjectStore(P8,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},y8=class{async f_i(t){for(const i of this.v_i)this.__i<i.bD&&await i.l_i(t)}constructor(t){this.__i=void 0,this.__i=t}},A8=class extends y8{get v_i(){return[w8]}},b8=new class{g_i(t){this.p_i=t}Ret(t){return this.p_i(t)}constructor(){this.p_i=t=>new A8(t)}},S8="cachingTask",T8="licences",k8="manifest",E8="segment",P8="segmentMetadata";async function x8(){!function(){if("undefined"==typeof indexedDB)throw new m("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",18);return t.addEventListener("upgradeneeded",I8),await eh(t)}async function I8(t){const i=t.oldVersion<=18?t.oldVersion:-1,e=t.target,s=e.result,n=e.transaction,r=b8.Ret(i),h={database:s,transaction:n};await g8(n,t=>r.f_i(t),h)}var R8=class{static get Ng(){return this.lAt||(this.lAt=x8()),this.lAt}};R8.lAt=void 0,r();var C8=class{uPt(t){return t(this)}r_i(){this.dPt.r_i(),this.ect.r_i(),this.lPt.r_i(),this.fPt.r_i(),this.vPt.r_i()}constructor(t,i){this.dPt=void 0,this.ect=void 0,this.lPt=void 0,this.fPt=void 0,this.vPt=void 0,this.dPt=t.dPt.QPt(i),this.ect=t.ect.QPt(i),this.lPt=t.lPt.QPt(i),this.fPt=t.fPt.QPt(i),this.vPt=t.vPt.QPt(i)}};Rc.Ba(class t{static async Ret(){const i=await R8.Ng;return new t(i)}uPt(t){const i=this.allCollections;return m8.d_i(i,()=>this.a_i(i,t))}async a_i(t,i){const e=t.map(t=>t.l),s=this.u_i.transaction(e,cu.gPt),n=new C8(this,s);try{return await g8(s,i,n)}finally{n.r_i()}}get allCollections(){return[this.ect,this.dPt,this.lPt,this.fPt,this.vPt]}constructor(t){this.u_i=void 0,this.dPt=void 0,this.ect=void 0,this.lPt=void 0,this.fPt=void 0,this.vPt=void 0,this.u_i=t,this.dPt=new m8(t,P8),this.ect=new m8(t,E8),this.lPt=new m8(t,k8),this.fPt=new m8(t,S8),this.vPt=new m8(t,T8)}}.Ret),r(),r(),r();var D8=class{m_i(t){const i=this.CY.xP(),e=t.createGain();for(const s of i){t.createMediaElementSource(s).connect(e)}return e}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){const t=this;return{createAudioSourceNode:i=>t.m_i(i)}}constructor(t){this.CY=void 0,this.hu=void 0,this.CY=t}};VF(function(t){return class extends t{xa(){const t=this.w_i.Ca;return po(super.xa(),{get audio(){return t}})}constructor(t,i){super(t,i),this.w_i=void 0,this.w_i=new D8(this.Pa)}}},zo.lu),r(),r();VF(function(t){return class i extends t{Ta(t){const e=i.y_i(this.Cd.analytics),s=i.y_i(t?t.analytics:void 0);e||s?this.A_i(Mo({},e,s)):this.b_i&&this.b_i.disable(),super.Ta(t)}A_i(t){if(this.b_i)this.b_i.enable(),this.b_i.setOptions(t);else{const i=s.youbora;if(!i)throw new m("Youbora JavaScript library not loaded.");if(!i.adapters.TheoPlayer2)throw new m("TheoPlayer2 adapter not available on Youbora JavasScript library");const e=new i.Plugin(t);e.setAdapter(new i.adapters.TheoPlayer2(this.Ca)),this.Jc&&i.adapters.TheoPlayer2.NativeAdsAdapter&&e.setAdsAdapter(new i.adapters.TheoPlayer2.NativeAdsAdapter(this.Ca)),this.b_i=e}}static y_i(t){if(t){const i=t.filter(t=>"youbora"===t.integration);if(0===i.length)return;if(i.length>1)throw new m("Only one youbora analytics configuration expected");const e=i[0],{integration:s}=e;return QS(e,["integration"])}}kn(){this.b_i&&this.b_i.disable(),super.kn()}constructor(t,i){super(t,i),this.b_i=void 0}}},zo.hnt),r(),r(),r();var B8=1,N8=0,M8=1e3,L8=class t extends Jb{S_i(){const t=this.ct===1/0,i=t?B8:N8,e=t?-1:this.ct,s=De(this.oa.rt.II,this.T_i);this.k_i.setPresentationInformation(new this.E_i(i,e,s))}T_i(t){const i=t.KI.II,e=[];for(let t=0;t<i.length;t++){const s=i[t];s.Ti&&s.Mi&&e.push({trackIdx:t,bitrate:s.kW,width:s.Ti,height:s.Mi,codecIdentifier:s.frt})}return e}P_i(){return this.oa.LP()*M8}get ct(){return this.oa.Nd()*M8}get x_i(){return this.I_i}get R_i(){return this.C_i}set R_i(t){this.C_i=t,t&&this.k_i.reportPlayerState(t)}set D_i(t){this.B_i=t}N_i(){return v(()=>{this.M_i(),this.L_i()},t.O_i)}xNt(){this.oa.Jc&&(this.oa.Jc.wn("Bnt",this.yui),this.oa.Jc.wn("Nnt",this.Tui),this.oa.Jc.wn("H3t",this.jui),this.oa.Jc.wn("T4t",this.F_i)),this.oa.wn(d.Bw,this.U_i),this.oa.wn(Mc.ma,this.e8),this.oa.wn(d.jw,this.V_i),this.oa.wn(d.uo,this.uvi),this.oa.wn(Do.TM,this.GG),this.oa.wn(d.Jw,this.YQ),this.oa.wn(d.Zw,this.jG),this.oa.wn(Do.SM,this.qG),this.oa.wn(d.oy,this.H_i)}INt(){this.oa.Jc&&(this.oa.Jc.mn("Bnt",this.yui),this.oa.Jc.mn("Nnt",this.Tui),this.oa.Jc.mn("H3t",this.jui),this.oa.Jc.mn("T4t",this.F_i)),this.oa.mn(d.Bw,this.U_i),this.oa.mn(Mc.ma,this.e8),this.oa.mn(d.jw,this.V_i),this.oa.mn(d.uo,this.uvi),this.oa.mn(Do.TM,this.GG),this.oa.mn(d.Jw,this.YQ),this.oa.mn(d.Zw,this.jG),this.oa.mn(Do.SM,this.qG),this.oa.mn(d.oy,this.H_i)}kn(){p(this.W_i),this.INt()}constructor(t,i,e,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.oa=void 0,this.YS=void 0,this.k_i=void 0,this.q_i=void 0,this.z_i=void 0,this.E_i=void 0,this.G_i=void 0,this.I_i=void 0,this.B_i=void 0,this.C_i=void 0,this.X_i=void 0,this.W_i=void 0,this.yui=void 0,this.Tui=void 0,this.jui=void 0,this.F_i=void 0,this.H_i=void 0,this.U_i=void 0,this.e8=void 0,this.V_i=void 0,this.uvi=void 0,this.GG=void 0,this.YQ=void 0,this.jG=void 0,this.qG=void 0,this.L_i=void 0,this.M_i=void 0,this.oa=t,this.YS=i,this.k_i=e,this.q_i=s,this.z_i=n,this.E_i=r,this.G_i=!0,this.I_i=!1,this.B_i=void 0,this.C_i=void 0,this.X_i=void 0,this.yui=t=>{const i=t.Int;i.O0t();var e;e=i.wnt().duration;const s="linear"===i.wnt().type;i.F0t(),i.N0t();s&&(this.I_i=!0),this.D_i=this.z_i.AD_IMPRESSION,this.D_i=this.z_i.AD_STARTED},this.Tui=t=>{this.I_i=!1,this.D_i=this.z_i.AD_COMPLETED},this.jui=t=>{t.QJt===Ic.ADBLOCK?this.D_i=this.z_i.AD_BLOCKED:this.D_i=this.z_i.AD_ERROR},this.F_i=()=>{this.D_i=this.z_i.AD_SKIPPED},this.H_i=t=>{var i,e,s,n;t.qk===Ci.Bk&&(this.X_i&&t.BX!==this.X_i&&this.k_i.reportABRSwitch(this.X_i,t.BX),this.X_i=t.BX,this.k_i.reportChunkRequest(new MMChunkInformation(t.$D,t.BX,t.VN,t.uut.Yu,void 0,void 0,null!=(s=null==(i=t.uut.Sat)?void 0:i[0])?s:0,null!=(n=null==(e=t.uut.Sat)?void 0:e[1])?n:-1)))},this.U_i=t=>{this.R_i=this.q_i.STOPPED,this.So(t)},this.e8=t=>{this.R_i=this.q_i.ERROR,this.k_i.reportError(t.error,this.P_i())},this.V_i=()=>{this.x_i?this.D_i=this.z_i.AD_PAUSED:this.R_i=this.q_i.PAUSED},this.uvi=()=>{this.x_i&&(this.D_i=this.z_i.AD_PLAY)},this.GG=()=>{this.x_i?(this.B_i===this.z_i.AD_PAUSED&&(this.D_i=this.z_i.AD_RESUMED),this.D_i=this.z_i.AD_PLAYING):(this.G_i&&(this.G_i=!1,this.S_i(),this.R_i=this.q_i.STARTED),this.R_i!==this.q_i.PAUSED&&this.R_i!==this.q_i.BUFFERING||(this.R_i=this.q_i.RESUMED))},this.YQ=()=>{this.k_i.reportPresentationSize(this.oa.Bx,this.oa.Rx)},this.jG=t=>{this.x_i||this.R_i!==this.q_i.PAUSED||this.k_i.reportPlayerSeekCompleted(t.currentTime*M8)},this.qG=()=>{this.x_i||(this.R_i=this.q_i.BUFFERING)},this.L_i=()=>{this.k_i.reportDownloadRate(_.floor(HI.Ng.fW()))},this.M_i=()=>{this.x_i||this.k_i.reportPlaybackPosition(this.P_i())},this.R_i=this.q_i.INITIALIZED,this.xNt(),this.W_i=this.N_i()}};L8.O_i=2e3,VF(function(t){return class extends t{kn(){super.kn(),this.j_i()}constructor(t,i){super(t,i),this.Q_i=void 0,this.K_i=void 0,this.Y_i=()=>{this.K_i=void 0,this.j_i();const t=super.nu();t&&(this.K_i=function(t,i){const e=function(t,i){if(t&&t.analytics)for(const i of t.analytics)if("smartsight"===i.integration)return i;if(i&&i.analytics)for(const t of i.analytics)if("smartsight"===t.integration)return t;return}(t,i);if(!e)return;return e}(t,this.Cd)),this.J_i()},this.J_i=()=>{if(!this.Q_i&&this.K_i&&this.bt&&this.bt.src&&!this.hx){const t=MMSmartStreaming.getInstance();!function(t,i,e){t.registerMMSmartStreaming(e.playerName,e.customerID,e.subscriberID,e.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","10.0.0"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",i,e.metaURL,e.assetID)}(t,this.bt.src,this.K_i),this.Q_i=new L8(this,this.K_i,t),this.Q_i.wn("ended",this.j_i)}},this.j_i=()=>{this.Q_i&&(this.Q_i.kn(),this.Q_i=void 0)},this.wn(d.do,this.Y_i),this.wn(d.xw,this.J_i),this.wn(d.uo,this.J_i)}}},zo.hnt),r(),r();var O8=String.fromCharCode(95);var F8=class t{get Ca(){return this.hu||(this.hu=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(i){t.sendEvent=i}}}(this)),this.hu}get id(){return this.hS}get adsManager(){return this.ari}get ids(){return this.Z_i}get adContainer(){return this.Q1t}get sendEvent(){return this.$_i}set sendEvent(t){for(const t of this.tgi)this.ari.removeEventListener(t.type,t.listener);this.tgi=[],this.$_i=t,this.igi()}get imaSDK(){return!0}egi(){for(const t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.ari.addEventListener(i,this.sgi),this.tgi.push({type:i,listener:this.sgi})}}ngi(){Yo(this.tgi);for(const t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.ari.removeEventListener(i,this.sgi)}}rgi(t){this.Zf.push({type:t.type,adVolume:this.adsManager.getVolume()})}igi(){null==this.$_i||this.$_i.call(this,this.Zf),this.Zf=[]}static hgi(i){return t.ogi[i]||i}constructor(i,e,s,n){this.hu=void 0,this.hS=void 0,this.ari=void 0,this.Z_i=void 0,this.Q1t=void 0,this.tgi=void 0,this.$_i=void 0,this.Zf=void 0,this.sgi=i=>{this.rgi({type:t.hgi(i.type)})},this.hS=i,this.ari=e,this.Z_i=s,this.Q1t=n,this.tgi=[],this.Zf=[]}};F8.ogi={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var U8=class{agi(t,i){this.ugi=h.createElement("script"),this.ugi.id=t.id,this.ugi.type="text/javascript",t.adContainer.appendChild(this.ugi),this.ugi.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t.id,this.cgi=t.id,s[this.cgi]=t.Ca}dgi(){this.ugi&&os(this.ugi),this.cgi&&(s[this.cgi]=void 0)}constructor(){this.ugi=void 0,this.cgi=void 0}};VF(function(t){return class i extends t{Ta(t){var e,s,n;this.lgi(),null==(e=this.fgi)||e.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.vgi),null==(s=this.fgi)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.lgi),null==(n=this.fgi)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this._gi),this.fgi=void 0,this.Q1t=void 0,super.Ta(t);const r=t&&t.analytics;this.ggi=i.pgi(r);this.Jc&&this.ggi&&d3()&&this.mgi()}kn(){var t,i,e;this.lgi(),null==(t=this.fgi)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.vgi),null==(i=this.fgi)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.lgi),null==(e=this.fgi)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this._gi),this.fgi=void 0,this.Q1t=void 0,this.Jc&&this.Jc.mn("xti",this.Iti),super.kn()}mgi(){this.Jc&&this.Jc.wn("xti",this.Iti)}wgi(t,i,e){const s=O8+"moatApi"+_.floor(1e8*_.random());this.ygi=new F8(s,t,i,e),this.ygi.egi(),this.Agi.agi(this.ygi,this.ggi.partnerCode)}static pgi(t){if(t){const i=t.filter(t=>"moat"===t.integration);if(0===i.length)return;if(i.length>1)throw new m("Only one Moat analytics configuration expected");return i[0]}}constructor(t,i){super(t,i),this.Agi=void 0,this.ggi=void 0,this.ygi=void 0,this.fgi=void 0,this.Q1t=void 0,this._gi=()=>{this.wgi(this.fgi,{partnerCode:this.ggi.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.Q1t)},this.Iti=t=>{this.fgi=t.hri,this.Q1t=t.fii,this.lgi(),this.fgi.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.vgi),this.fgi.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.lgi),this.fgi.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this._gi)},this.vgi=t=>{const i=t.getAd().getAdPodInfo();i.getAdPosition()<i.getTotalAds()&&(this.lgi(),this._gi())},this.lgi=()=>{this.ygi&&(this.ygi.ngi(),this.ygi=void 0),this.Agi.dgi()},this.Agi=new U8}}},zo.hnt),r(),r(),r(),r();var V8="theo-dai-clickthrough",H8="urn:google:dai:2018",W8=class{get Ca(){const t=this,i=this.bgi;return{contentTimeForStreamTime:i=>t.cai?t.cai.lai(i):i,streamTimeForContentTime:i=>t.cai?t.cai.fai(i):i,replaceAdTagParameters(i){t.cai&&t.cai.replaceAdTagParameters(i)},get snapback(){return t.Sgi},set snapback(i){t.Sgi=i},get sourceTransformer(){return i.Tgi},set sourceTransformer(t){i.Tgi=t}}}OP(t){this.m7.Zg(),this.m7=new at;Wr($e(this.gri(t,this.m7.Yg),this.m7))}async gri(t,i){if(ii(i),!this.kgi||!this.cai)return this.oa.Egi(t);if(this.kgi.ynt&&!this.Pgi)return;const e=this.oa.LP();if(this.Sgi){const s=this.cai.Rai(t,e);if(s){this.oa.Egi(s),await this.cai.ww(nn.AD_BREAK_ENDED,i);if(this.cai.Iai(t).PO>t)return}}this.oa.Egi(t)}Tx(){const t=this.kgi&&this.kgi.ynt;if(t){const i=ve.jn(this.oa.xgi()),e=t._Ot,s=e+t.p0t,n=new ve([e,s]);return i.Mn(n)._s()}return this.oa.xgi()}async Xnt(t,i){if(!t)return this.oa.Igi(t,i);let e=t;try{this.oa.nt.wn(Vt.eI,this.Rgi),e=await this.bgi.Cgi(t,i),this.kgi&&this.cai&&(this.Dgi=!0)}catch(t){if(sa(t),t.code===Bk.LICENSE_INVALID)return;const i=new Ga(Vo.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.JW=P(i),this.ZW=i,this.oa.So(new Pi(i)),i}await this.oa.Igi(e,i)}hr(){if(this.Dgi){if(this.oa.nt.mn(Vt.eI,this.Rgi),this.aui){this.aui.mn(Te.hI,this.Bgi);for(const t of this.aui.L.II)t.mn(Me.zL,this.Ngi);this.aui=void 0}this.JW=void 0,this.ZW=void 0,this.m7.Zg(),this.kgi&&this.kgi.hr(),this.cai&&this.cai.hr(),this.Dgi=!1}}get lt(){return this.JW||this.oa.Mgi()}get WP(){return this.ZW||this.oa.Lgi()}kn(){this.hr(),this.oa.Ogi(),this.cai&&this.cai.kn()}constructor(t,i,e,s,n){this.oa=void 0,this.bgi=void 0,this.cai=void 0,this.kgi=void 0,this.Pgi=void 0,this.aui=void 0,this.JW=void 0,this.ZW=void 0,this.m7=new at,this.Dgi=!1,this.Sgi=!0,this.Rgi=t=>{const i=t.Ht;i.Lt===Ao.VU&&(i.Km===nh.ID3||i.Km===nh.EVENT_STREAM&&i.ZI===H8)&&(i.Xk=xh.JI,this.aui=i,i.wn(Te.hI,this.Bgi))},this.Bgi=t=>{t.TO.wn(Me.zL,this.Ngi)},this.Ngi=t=>{var i,e;if(this.cai)if((null==(i=this.aui)?void 0:i.Km)===nh.ID3){const i=t.TO.U;"TXXX"===i.id&&this.cai.Pai({TXXX:i.text})}else if((null==(e=this.aui)?void 0:e.Km)===nh.EVENT_STREAM){const i=t.TO.U;this.cai.xai(H8,i,t.XF)}},this.oa=t,this.cai=i,this.kgi=e,this.bgi=s,this.Pgi=n,e&&i&&this.oa.Jc&&this.oa.Jc.Ent(e.N9t)}};r(),r();var q8=class extends Le{get Fgi(){return this.Ugi}get MZt(){return mt.so}constructor(t,i,e,s=!0){super(e),this.Ugi=void 0,this.Ugi=s,this.J3t=t,this.Z3t=i}},z8=class extends $2{Vgi(){const t=[nn.STARTED,nn.FIRST_QUARTILE,nn.MIDPOINT,nn.THIRD_QUARTILE,nn.COMPLETE];this.cai.wn(t,this.Hgi),this.cai.wn(nn.AD_BREAK_ENDED,this.kai),this.cai.wn(nn.AD_PROGRESS,this.gai),this.cai.wn(nn.CUEPOINTS_CHANGED,this.mai)}get G3t(){return this.L9t}get M3t(){return this.s5t}Wgi(t){let i=t.V7t._Ot,e=this.G0t||this.findAdBreakWithPredicate(i,t=>!t._x);if(!e){const s=t.V7t.p0t;i=this.oa.LP(),e=new q8(s,s,i,!1),e.t4t(),this.X0t.push(e)}return e}qgi(t){switch(t){case nn.STARTED:this.L9t=!0;break;case nn.AD_BREAK_ENDED:this.L9t=!1}}zgi(t,i,e){if(i)switch(t){case nn.STARTED:case nn.FIRST_QUARTILE:case nn.MIDPOINT:case nn.THIRD_QUARTILE:case nn.COMPLETE:this.M3t.So(new aU(this.G0t))}if(e)switch(t){case nn.STARTED:case nn.FIRST_QUARTILE:case nn.MIDPOINT:case nn.THIRD_QUARTILE:case nn.COMPLETE:this.M3t.So(new dc(this.M0t,this.M0t.v9t))}switch(t){case nn.COMPLETE:this.M3t.So(new bc(this.M0t,this.B9t.v9t));break;case nn.AD_BREAK_ENDED:this.M3t.So(new Fa(this.ynt))}switch(t){case nn.FIRST_QUARTILE:this.M3t.So(new _s(this.M0t,this.B9t.v9t));break;case nn.MIDPOINT:this.M3t.So(new ks(this.M0t,this.B9t.v9t));break;case nn.THIRD_QUARTILE:this.M3t.So(new oe(this.M0t,this.B9t.v9t))}}Ggi(t){const i=t.Int,e=this.Wgi(i),s=function(t,i){if(t.Jc.length)return!1;for(let e=0;e<i;e++){const i=new Q2(t,bi.hZt);t.e4t(i)}return!0}(e,i.V7t.e7t),n=function(t,i){const e=i.V7t.i7t-1;return t.Jc[e]}(e,i),r=function(t,i){return t.d4t!==v2.READY&&(t.A9t(i),!0)}(n,i);this.M0t=n,this.G0t=e,e.t4t(),this.zgi(t.type,s,r)}Xgi(t){for(const i of this.X0t)if(sr(t,i._Ot))return i}findAdBreakWithPredicate(t,i){for(const e of this.X0t)if(sr(e._Ot,t)&&i(e))return e}get jgi(){const t=this.findAdBreakWithPredicate(0,t=>t.Fgi);let i=0;return t&&(i=t.p0t),i}Qgi(t,i){let e;for(const s of this.X0t)s._Ot>=t&&s._Ot<=i&&!s._x&&(!e||s._Ot>=e._Ot)&&(e=s);return e}rD(){}knt(t){}hr(){this.M0t&&(this.M3t.So(new bc(this.M0t,this.M0t.v9t)),this.M0t=void 0),this.G0t&&(this.M3t.So(new Fa(this.G0t)),this.G0t=void 0),this.L9t=!1,Yo(this.X0t)}kn(){this.hr(),this.M3t.kn()}Snt(t){}constructor(t,i){super(new Sc,mt.so),this.cai=void 0,this.oa=void 0,this.gai=void 0,this.mai=void 0,this.Hgi=void 0,this.kai=void 0,this.cai=t,this.oa=i,this.gai=t=>{const i=this.G0t;if(!i||!this.M0t)return;const e=t.uai.Dai;this.M0t.v9t=e.MP,function(t,i){const e=i.i7t,s=i.t7t,n=i.MP,r=$l(t.Jc.slice(0,e-1),t=>{var i;return null!=(i=t.ct)?i:0});t.m0t=s-n-r}(i,e)},this.mai=t=>{const i=t.uai.Bai;if(i)for(const t of i)if(!this.Xgi(t.EO)){const i=t.PO-t.EO,e=new q8(i,i,t.EO,!0);this.X0t.push(e)}},this.Hgi=t=>{this.qgi(t.type),this.Ggi(t)},this.kai=t=>{this.L9t=!1,this.M0t=void 0;const i=this.ynt;i&&(i.m0t=0,this.zgi(t.type,!1,!1),this.G0t=void 0)},this.Vgi()}};function G8(t){if(t.sources)if(ul(t.sources)){for(const i of t.sources)if(tk(i))return!0}else if(Lu(t.sources))return tk(t.sources);return!1}r();var X8=class{async Cgi(t,i){const e=[],s=[];for(const i of t.sources)if(tk(i)){if(!this.cai)continue;e.push(i)}else s.push(i);if(0===e.length)return t;let n,r;for(;void 0===n&&0!==e.length;){const{Mc:h}=await eR.Ng.cz(e,t),o=h;ii(i);try{n=await this.Kgi(o,i),s.push(n)}catch(t){sa(t),r=t,oi(e,o)}}if(0!==t.sources.length&&0===s.length)throw new m("Fatal: unable to play DAI streams.");return r&&Ye(r.message),Mo({},t,{sources:s})}async Kgi(t,i){if(!this.cai)throw new m("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=this.cai.ww(nn.LOADED,i),s=this.cai.ww(nn.ERROR,i),n=t.type===Ba.cR?"dash":"hls";this.cai.AHt(Mo({},t.ssai,{format:n}));const r=await Promise.race([e,s]);if(r.type===nn.LOADED){const i=t.type===Ba.cR?Ba.cR:Ba.lR;return ml(Mo({},t,{src:this.Tgi?await this.Tgi(r.uai.Yu||""):r.uai.Yu,type:i}))}throw m(r.uai.Nai)}constructor(t){this.cai=void 0,this.Tgi=void 0,this.cai=t,this.Tgi=t=>t}};VF(function(t){return i=>class extends i{xa(){const t=super.xa(),i=t.ads;if(i){const t=this.Ygi.Ca;po(i,{get dai(){return t}})}return t}get Kl(){return this.Jgi}Egi(t){super.OP(t)}OP(t,i){this.Ygi.OP(t)}xgi(){return super.Tx()}Tx(){return this.Ygi.Tx()}Ta(t){return this.Ygi.hr(),super.Ta(t)}async Igi(t,i){return super.Xnt(t,i)}async Xnt(t,i){return this.Ygi.Xnt(t,i)}Mgi(){return super.HP()}Lgi(){return super.qP()}HP(){return this.Ygi.lt}qP(){return this.Ygi.WP}Ogi(){super.kn()}kn(){this.Ygi.kn(),this.Y1t&&(os(this.Y1t),this.Y1t.removeEventListener("keydown",this.Zgi),this.Y1t.removeEventListener("click",this.Zgi),this.Y1t=void 0),this.$gi&&(os(this.$gi),this.$gi=void 0)}constructor(i,e){super(i,e),this.Ygi=void 0,this.Jgi=!1,this.Y1t=void 0,this.$gi=void 0,this.Zgi=t=>{13===t.which&&this.Y1t.click(),this.zx()};const s=this.Wx(),n=e.ads.googleIma.useAdUiElementForSsai;var r;const o=null!=(r=e.ads.googleIma.allowSeekingForGoogleDai)&&r;let a,u;try{var c;n?(this.$gi=h.createElement("div"),oa(this.$gi),this.$gi.className="theo-dai-ad-ui"):(this.Y1t=h.createElement("button"),this.Y1t.className=V8),a=t(s,this.Y1t,this.$gi),u=new z8(a,this);const i=null!=(c=this.Y1t)?c:this.$gi;i&&this.xe.appendChild(i),this.Jgi=!0}catch(t){this.Y1t=void 0,this.$gi=void 0}const d=new X8(a);this.Ygi=new W8(this,a,u,d,o),this.Y1t&&(this.Y1t.addEventListener("keydown",this.Zgi),this.Y1t.addEventListener("click",this.Zgi))}}}(function(t,i,e){if(!(s.google&&s.google.ima&&Lu(s.google.ima.dai)))throw new m("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const n=$5(),r=new google.ima.dai.api.StreamManager(t,e),h=$5();return new Q5(r,i,h&&h!==n?h:void 0)}),zo.rnt),r(),r(),r();var j8=class{get tpi(){return void 0===this.ipi?0:(performance.now()-this.ipi)/1e3}epi(t){this.spi=t,this.rpi.npi(t),this.oa.wn(d.uo,this.uvi),this.oa.wn(d.Bw,this.U_i),this.oa.wn(d._y,this.qui),this.oa.wn(Mc.ma,this.e8),this.oa.wn(Do.SM,this.hpi),this.oa.wn([Do.wM,Do.yM,Do.TM],this.opi),this.oa.wn(d.Rw,this.upi),s.addEventListener("beforeunload",this.hNt)}cpi(){this.oa.mn(d.uo,this.uvi),this.oa.mn(d.Bw,this.U_i),this.oa.mn(d._y,this.qui),this.oa.mn(Mc.ma,this.e8),this.oa.mn(Do.SM,this.hpi),this.oa.mn([Do.wM,Do.yM,Do.TM],this.opi),this.oa.mn(d.Rw,this.upi),s.removeEventListener("beforeunload",this.hNt),this.lpi||(this.rpi.fpi(this.vpi),this.rpi._pi()),this.gpi&&this.ppi(),this.spi=void 0,this.mpi=!1,this.lpi=!1,this.vpi=-1/0,Yo(this.wpi)}ypi(){this.mpi&&this.rpi.Api(),this.ipi=performance.now(),this.bpi=v(this.Spi,6e4)}ppi(){this.rpi.Tpi(this.tpi),this.gpi=!1,this.ipi=void 0,this.bpi&&(p(this.bpi),this.bpi=void 0)}kpi(){if(S(this.oa.Nd()))return;const t=10*function(t,i){return _.floor(t/i)}(this.oa.LP()/this.oa.Nd()*100,10);pi(this.wpi,t)||(this.wpi.push(t),this.rpi.Epi(t))}constructor(t,i){this.oa=void 0,this.rpi=void 0,this.spi=void 0,this.mpi=void 0,this.lpi=void 0,this.wpi=void 0,this.vpi=void 0,this.Ppi=void 0,this.gpi=void 0,this.bpi=void 0,this.ipi=void 0,this.uvi=void 0,this.U_i=void 0,this.qui=void 0,this.hpi=void 0,this.opi=void 0,this.e8=void 0,this.upi=void 0,this.hNt=void 0,this.Spi=void 0,this.oa=t,this.rpi=i,this.mpi=!1,this.lpi=!1,this.wpi=[],this.vpi=-1/0,this.gpi=!1,this.uvi=()=>{this.mpi||(this.rpi.xpi(),this.gpi&&this.rpi.Api(),this.mpi=!0)},this.U_i=()=>{this.rpi.Ipi(),this.lpi=!0},this.qui=()=>{this.vpi<this.oa.LP()&&(this.vpi=this.oa.LP()),this.kpi()},this.hpi=()=>{this.mpi&&(this.Ppi=performance.now(),this.rpi.Rpi(this.oa.LP()))},this.opi=()=>{this.Ppi&&(this.rpi.Cpi((performance.now()-this.Ppi)/1e3),this.Ppi=void 0)},this.e8=()=>{this.vpi<this.oa.LP()&&(this.vpi=this.oa.LP()),this.rpi.urt(this.oa.HP().message)},this.upi=()=>{const t=this.oa.Nd()===1/0;t&&!this.gpi&&(this.gpi=t,this.ypi())},this.hNt=()=>{this.rpi.fpi(this.vpi),this.rpi.Dpi()},this.Spi=()=>{void 0!==this.ipi&&this.rpi.Bpi(this.tpi)}}};r();var Q8=class{npi(t){this.Npi(["setDocumentTitle",t.itemTitle]),this.Npi(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.Npi(["trackPageView"])}xpi(){this.Mpi("item first play","viewing","1")}_pi(){this.Mpi("item skipped","skipped","1")}Epi(t){this.Mpi("item progress","percent",""+t)}Dpi(){this.Mpi("item abandoned","window closed","1")}fpi(t){this.Mpi("item time","watched",""+t)}Ipi(){this.Mpi("item finished","ended","1")}Rpi(t){this.Mpi("buffering started","timestamp",""+t)}Cpi(t){this.Mpi("buffering ended","duration",""+t)}urt(t){this.Mpi("error","message",""+t)}Api(){this.Mpi("livestream first play","viewing","1")}Bpi(t){this.Mpi("livestream progress","duration",""+t)}Tpi(t){this.Mpi("livestream time","watched",""+t)}Mpi(t,i,e){this.Npi(["trackEvent","Video",t,i,e])}Npi(t){const i="undefined"!=typeof _paq?_paq:void 0;i?i.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}};r();var K8=class{get Lpi(){if(!this.Opi)return;const t=this.oa.LP()/this.Opi;return _.floor(4*t)+1}get Fpi(){return void 0!==this.Opi}epi(){this.qc.wn("Bnt",this.yui),this.qc.wn("Nnt",this.Tui),this.qc.wn("T4t",this.F_i),this.qc.wn("H3t",this.jui),this.oa.wn(d._y,this.qui),s.addEventListener("beforeunload",this.hNt)}cpi(){this.qc.mn("Bnt",this.yui),this.qc.mn("Nnt",this.Tui),this.qc.mn("T4t",this.F_i),this.qc.mn("H3t",this.jui),this.oa.mn(d._y,this.qui),Yo(this.Upi),s.removeEventListener("beforeunload",this.hNt),this.Opi=void 0}constructor(t,i,e){this.oa=void 0,this.qc=void 0,this.rpi=void 0,this.Opi=void 0,this.Upi=void 0,this.yui=void 0,this.Tui=void 0,this.F_i=void 0,this.jui=void 0,this.qui=void 0,this.hNt=void 0,this.oa=t,this.qc=i,this.rpi=e,this.Upi=[],this.yui=()=>{this.Opi=this.oa.Nd(),this.rpi.Vpi(this.Opi)},this.Tui=()=>{this.Opi&&(this.rpi.Hpi(this.Opi),Yo(this.Upi),this.Opi=void 0)},this.F_i=t=>{if(!this.Opi)return;const i=this.Opi-this.Opi*t.b4t;this.rpi.Wpi(i),this.Opi=void 0},this.jui=()=>{this.Opi=this.oa.Nd(),this.rpi.qpi()},this.qui=()=>{const t=this.Lpi;if(this.Fpi&&t&&!pi(this.Upi,t)){switch(t){case 1:this.rpi.zpi();break;case 2:this.rpi.Gpi();break;case 3:this.rpi.Xpi();break;case 4:this.rpi.jpi()}this.Upi.push(t)}},this.hNt=()=>{this.rpi.Qpi()}}};r();var Y8=class{Vpi(t){this.rpi.Mpi("ad start","duration",""+t)}Hpi(t){this.rpi.Mpi("ad finished","duration",""+t)}Wpi(t){this.rpi.Mpi("ad skipped","remaining time",""+t)}qpi(){this.rpi.Mpi("ad blocker","detected","1")}zpi(){this.rpi.Mpi("ad progress","firstQuartile","")}Gpi(){this.rpi.Mpi("ad progress","secondQuartile","")}Xpi(){this.rpi.Mpi("ad progress","thirdQuartile","")}jpi(){this.rpi.Mpi("ad progress","fourthQuartile","")}Qpi(){this.rpi.Mpi("ad abandoned","window closed","1")}constructor(t){this.rpi=void 0,this.rpi=t}};function J8(t){return t&&"streamone"===t.integration}VF(function(t){return class extends t{kn(){this.mn(d.do,this.fo),this.Kpi&&(this.Ypi&&this.Ypi.cpi(),this.Jpi&&this.Jpi.cpi(),this.Kpi=!1),super.kn()}constructor(t,i){super(t,i),this.Ypi=void 0,this.Jpi=void 0,this.Kpi=!1,this.fo=()=>{this.Kpi&&(this.Ypi.cpi(),this.Jpi&&this.Jpi.cpi());const t=this.nu();if(this.Kpi=!1,!t)return;const i=function(t){if(t.analytics)for(const i of t.analytics)if(J8(i))return i}(t);i&&(this.Kpi=!0,this.Ypi.epi(i),this.Jpi&&this.Jpi.epi())};const e=new Q8;if(this.Ypi=new j8(this,e),this.Jc){const t=new Y8(e);this.Jpi=new K8(this,this.Jc,t)}this.wn(d.do,this.fo)}}},zo.hnt),r(),r(),r(),r(),r(),r();var Z8=class extends NU{async z2(t,i,e){const s=await $8(t);await super.z2(s,i,e),this.Zpi(s,i)}async H2(t,i,e){const s=await $8(t);await super.H2(s,i,e),this.Zpi(s,i)}Zpi(t,i){const e=this.tmi.$pi;if(void 0===e)return;const s=i.i2;let n;if(this.imi!==s&&(this.imi=s,e.setLevelSwitching(s),e.setContainerFormat(2)),function(t){return La.call(t,"xet")}(i)){const t=i.xet,r=i.xet+i.ct;n=i.bU,e.newPts(t,r,"video",s)}else 0;e.appendBuffer(t.ck,"video",s,n)}async _S(t,i,e){var s;await super._S(t,i,e),null==(s=this.tmi.$pi)||s.flushBuffer(t,i)}constructor(t,i){super(t),this.tmi=void 0,this.imi=void 0,this.tmi=i,this.imi=void 0}};async function $8(t){switch(t.Km){case Po.vZ:return t;case Po.BT:{const i=await bn(t.ck);return{Km:Po.vZ,ck:new j(i)}}case Po._Z:throw new m("Opaque initialization segments are not supported on web.")}}var t7=class extends Wo{mrt(t){return t.B3===Ci.Bk?new Z8(t,this.tmi):new NU(t)}constructor(t,i){super(t),this.tmi=void 0,this.tmi=i,this.grt(t)}},i7=class extends(Sl($u)){get $pi(){return this.emi}smi(){this.emi=new LCEVCdec.LCEVCdec(this.$W,this.nmi,{})}be(){super.be(),this.rmi()}we(){super.we(),this.nmi.style.display="none"}hr(){return this.nmi.style.display="none",void 0!==this.emi&&(this.emi.close(),this.smi()),super.hr()}zg(){return this.hmi=!0,void 0!==this.emi&&(this.emi.close(),this.emi=void 0),os(this.nmi),super.zg()}qq(t){this.So(new eu(new Nk(Bk.ABORTED,t)))}rmi(){this.TL.$W.style.display="none",this.nmi.style.display="block"}Xrt(t){return new t7(t,this)}Grt(t){return new Jo(t)}constructor(t){super(t),this.nmi=void 0,this.emi=void 0,this.hmi=!1,this.omi=t=>{this.hmi||(t||this.qq("LCEVC SDK failed to initialize."),this.smi())},this.ami=()=>{this.hmi||this.qq("LCEVC SDK failed to initialize.")},this.nmi=h.createElement("canvas"),oa(this.nmi),this.nmi.style.display="none";const i=t.$W;var e;i.parentElement.insertBefore(this.nmi,null!=(e=i.nextSibling)?e:null),LCEVCdec.ready.then(this.omi,this.ami)}},e7=class extends RU{Gq(t){return t===Ci.Bk?(this.umi=new i7(super.Gq(t)),this.umi):super.Gq(t)}async Pq(t){if(t instanceof i7){this.umi=void 0;const i=t;await i.zg(),await super.Pq(i.Nrt)}else await super.Pq(t)}get cmi(){return this.umi}constructor(...t){super(...t),this.umi=void 0}},s7=class extends hX{async kn(){for(const t of this.$L.II)t.mn(Te.TI,this.dmi);this.rt.mn(Vt.eI,this.lmi),this.rt.mn(Vt.nI,this.fmi),await super.kn(),await this.TL.zg(),await this.xq.Pq(this.TL)}constructor(t,i,e,s,n,r,h){const o=new e7(n),a=new Ss(o);super(t,i,e,s,a.Gq(r),h),this.xq=void 0,this.vmi=void 0,this.lmi=t=>{t.Ht.wn(Te.TI,this.dmi)},this.fmi=t=>{t.Ht.mn(Te.TI,this.dmi)},this.dmi=t=>{var i;const e=null==(i=this.vmi.cmi)?void 0:i.$pi,s=t.kot.jI;null==e||e.setCurrentLevel(s)},this.xq=a,this.vmi=o,this.$L.wn(Vt.eI,this.lmi),this.$L.wn(Vt.nI,this.fmi)}};cs(new class extends EU{PR(t,i,e,s,n,r,h){let o=i;return DX.LS()&&(o=new DX(o)),new s7(e,s,n,r,o,Ci.Bk,t)}async Xq(t){if(!t.lcevc)return!1;if(!await super.Xq(t))return!1;if(void 0===s.LCEVCdec)throw new Ga(Vo.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}Qq(){return!1}constructor(...t){super(...t),this.Kq=V._W}}),r();var n7=class extends y${async kn(){const t=this.rt;for(const i of t.II)i.mn(Te.TI,this.dmi);t.mn(Vt.eI,this.lmi),t.mn(Vt.nI,this.fmi),await super.kn(),await this.xq.Pq(this.TL)}constructor(t,i,e,s,n){const r=new e7(t),h=new Ss(r);super(h.Gq(Ci.Bk),i,e,s,n),this.xq=void 0,this.vmi=void 0,this.lmi=t=>{t.Ht.wn(Te.TI,this.dmi)},this.fmi=t=>{t.Ht.mn(Te.TI,this.dmi)},this.dmi=t=>{var i;const e=null==(i=this.vmi.cmi)?void 0:i.$pi,s=t.kot.UMt.jI;null==e||e.setCurrentLevel(s)},this.xq=h,this.vmi=r;const o=this.rt;o.wn(Vt.eI,this.lmi),o.wn(Vt.nI,this.fmi)}};cs(new class extends b${PR(t,i,e,s,n,r,h){return new n7(i,e,n,r,s)}Xq(t,i){if(!t.lcevc)return!1;if(!super.Xq(t,i))return!1;if(void 0===s.LCEVCdec)throw new Ga(Vo.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}Qq(){return!1}constructor(...t){super(...t),this.Kq=V.wW}}),r(),r(),r(),r();var r7=function(t){return t._mi="hr",t.gmi="pmi",t}({}),h7="freewheel-nonlinear-ad",o7=[d.Rw,d._y,d.gy,d.jw,Do.TM,d.uo],a7=class t extends C2{qx(){this.xq.xz()}mmi(){this.wmi.wn("Dnt",this.ymi),this.wmi.wn(["Bnt","Nnt"],this.Ami),this.wmi.wn("Cnt",this.Sni)}bmi(){this.wmi.mn("Dnt",this.ymi),this.wmi.mn(["Bnt","Nnt"],this.Ami),this.wmi.mn("Cnt",this.Sni)}Smi(){this.M3t.au(this.wmi.Tmi)}kmi(){this.wmi.Emi.wn(o7,this.Rs)}Pmi(){this.wmi.Emi.mn(o7,this.Rs)}get B3t(){return this}static get C3t(){return mt.H0t}get C3t(){return t.C3t}get ynt(){var t;return null!=(t=this.wmi.Tmi.ynt)?t:null}get mnt(){const t=this.wmi.Tmi.B9t;return t?[t]:[]}knt(t){}LP(){return this.wmi.Emi.MP}OP(t,i){}Nd(){return this.wmi.Emi.ct}VP(){return this.wmi.Emi.UP}HP(){return this.JW}qP(){return this.ZW}Cx(){return 0}Nx(){return 0}Lx(){return this.wmi.Emi.Mx}Ox(t){this.wmi.Emi.Mx=t}tx(){return this.wmi.Emi.$P}ix(t){this.wmi.Emi.$P=t}bx(){return this.wmi.Emi.Ax}get Ant(){return this.wmi.Tmi.Ant}get bnt(){return this.wmi.Tmi.bnt}Tx(){return this.wmi.Emi.Sx}ox(){return this.wmi.Emi.hx}F3t(t){if(this.G3t||this.wmi.F3t(t),this.wmi.xmi){if(t.type===d.jw&&this.oa.UP)return!0;if(t.type===d.Bw)return this.wmi.Rmi.Imi(),!0}return!1}we(){this.wmi.we()}zx(){this.hx||this.wmi.Emi.zx()}async Cmi(){if(!this.wmi.Dmi)try{await this.wmi.C6t()}catch(t){this.Bmi(t,Ic.GENERAL)}}async Nmi(){if(this.wmi.Emi.Dhi)return this.wmi.Emi.Gx(),!1;if(this.wmi.Mmi)try{await this.wmi.Rmi.Lmi()}catch(t){this.Bmi(t,Ic.PLAYBACK)}return!0}get Omi(){return it(this.HP())}Bmi(t,i){t.name!==r7._mi&&this.M3t.So(new Pa(i,"Ads could not be loaded."))}async Gx(){if(this.hx&&this.So(new Tc(this.MP)),await this.Cmi(),this.Omi)return;const t=await this.Nmi();!this.Omi&&t&&this.Sni()}K9t(t,i,e){i===iu.pnt&&this.wmi.K9t(t)}be(){this.wmi.be()}rD(){this.wmi.Emi.rD()}Snt(t){}Wx(){return this.Yit}xP(){return this.xq.Bz.map(t=>t.$W)}K3t(t){}async kn(){await this.Xx(),this.wmi.kn(),await this.xq.Pq(this.TL),this.bmi(),this.Pmi(),this.M3t.CK(this.wmi.Tmi)}async Xx(){this.wmi.hr(),this.G3t&&(this.oa.be(),this.i3t(),this.we())}constructor(t,i,e,s,n){super(t,i),this.wmi=void 0,this.JW=void 0,this.ZW=void 0,this.Yit=void 0,this.xq=void 0,this.TL=void 0,this.Ami=t=>{const i=t.Int,e="Bnt"===t.type;if(i.l4t===bi.a4t){const t=this.oa.xe.classList;e?t.add(h7):t.remove(h7)}e?this.be():this.we()},this.ymi=()=>{this.n5t(),this.oa.zx(),this.oa.we()},this.Sni=()=>{this.wmi.Dmi&&(this.oa.UP||this.oa.Gx(),this.we(),this.oa.be(),this.i3t())},this.wmi=s,this.xq=e,this.TL=n,this.Yit=n.$W,this.Yit.controls=!1,this.mmi(),this.Smi(),this.kmi()}};r(),r(),r();var u7=class extends Le{get Fmi(){return this.Umi}get Vmi(){return this.Jc[this.Hmi]}set Wmi(t){this.Hmi=t}get Wmi(){return this.Hmi}get l4t(){return this.f4t}get MZt(){return mt.H0t}constructor(t,i,e,s){super(e),this.Umi=void 0,this.Hmi=void 0,this.f4t=void 0,this.Umi=s,this.Hmi=0,this.f4t=d7(s),this.J3t=t,this.Z3t=i}};r();var c7=class extends Ps{get qmi(){return this.zmi}set qmi(t){this.zmi!==t&&(this.zmi=t)}get Mi(){return this.od.Fmi.getHeight()}get Ti(){return this.od.Fmi.getWidth()}get AYt(){return this.qmi.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get MZt(){return mt.H0t}xa(){return _a(this)}constructor(t,i,e){super(t,i),this.zmi=void 0,this.zmi=e}};function d7(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?bi.a4t:bi.hZt}var l7=class t extends _o{async Gmi(t,i){this.Xmi=t,this.jmi=i,this.Qmi(t),await i,this.Kmi()}get Ymi(){return this.Jmi}get Zmi(){return this.$mi}get iwi(){return this.ewi}get ynt(){return this.G0t}get B9t(){return this.M0t}get Ant(){const t=[];if(this.G0t){const i=this.G0t.Wmi;i>=0&&t.push(...this.G0t.Jc.slice(i+1))}for(const i of this.swi)t.push(...i.Jc);return t}get bnt(){return this.swi}Kmi(){this.nwi()}Qmi(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.rwi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.hwi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.owi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.awi),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.uwi)}cwi(){this.Xmi&&(this.Xmi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.rwi),this.Xmi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.hwi),this.Xmi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.owi),this.Xmi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.awi),this.Xmi.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.uwi))}nwi(){this.Jmi=this.dwi(this.lwi),this.$mi=this.dwi(this.fwi).concat(this.dwi(this.vwi)),this.ewi=this.dwi(this._wi),this.swi=this.Jmi.concat(this.$mi).concat(this.ewi)}dwi(t){if(!this.Xmi)return[];const i=this.Xmi.getSlotsByTimePositionClass(t);return this.gwi(i)}pwi(t){if(!this.G0t)return void 0;const i=t.getSlot().getAdInstances().indexOf(t);-1!==i&&(this.G0t.Wmi=i);const e=this.G0t.Vmi;return e&&(e.qmi=t),e}mwi(t){return Jr(this.swi,i=>i.Fmi===t)}gwi(i){return i.map(i=>{const e=i.getTotalDuration(),s=t.wwi(i);return new u7(e,e,s,i)})}static ywi(t,i){const e=t.getAdInstances(),s=[];for(const t of e){const e=d7(t.getSlot()),n=new c7(i,e,t),r=[];n.u4t(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),i.e4t(n),s.push(n)}return s}t2t(){const t=this.B9t;t&&this.So(new da(t,this.Awi()))}bwi(){const t=this.B9t;t&&(this.So(new bc(t,t.qmi.getPlayheadTime())),this.M0t=void 0)}Swi(t){const i=this.ynt;i&&(i.m0t=function(t,i,e){void 0===e&&(e=0);let s=0;const n=t.Jc.length;for(let r=i;r<n;r++){const n=t.Jc[r],h=n.ct;if(n){let t=h;r===i&&(t=ur(h-e,0,h)),s+=t}}return s}(i,i.Wmi,t))}static wwi(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}Awi(){const t=this.B9t;if(!t)return 0;const i=t.qmi;return i.getPlayheadTime()/i.getDuration()}kwi(t){oi(this.swi,t),oi(this.Jmi,t),oi(this.$mi,t),oi(this.ewi,t)}hr(){this.cwi(),this.Jmi.length=0,this.$mi.length=0,this.ewi.length=0,this.swi.length=0,this.M0t=void 0,this.G0t=void 0,this.Xmi=void 0,this.jmi=void 0}kn(){this.hr(),this.Vo()}constructor(i,e){super(),this.Ls=void 0,this._T=void 0,this.lwi=void 0,this.fwi=void 0,this._wi=void 0,this.vwi=void 0,this.Jmi=void 0,this.$mi=void 0,this.ewi=void 0,this.swi=void 0,this.G0t=void 0,this.M0t=void 0,this.Xmi=void 0,this.jmi=void 0,this.rwi=void 0,this.hwi=void 0,this.owi=void 0,this.awi=void 0,this.Ewi=void 0,this.uwi=void 0,this.Ls=i,this._T=e,this.lwi=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.fwi=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this._wi=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.vwi=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.Jmi=[],this.$mi=[],this.ewi=[],this.swi=[],this.rwi=i=>{const e=i.slot,s=this.mwi(e);s&&(t.ywi(e,s),this.G0t=s,s.t4t(),this.kwi(s),s.l4t===bi.hZt&&this.So(new aU(s)))},this.hwi=()=>{const t=this.ynt;t&&t.l4t===bi.hZt&&(this.So(new Fa(t)),this._T.src=""),this.G0t=void 0},this.owi=t=>{const i=this.pwi(t.adInstance);i&&(this.So(new dc(i,i.qmi.getPlayheadTime())),this.M0t=i),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Ls.style.cursor="pointer",this.Ls.addEventListener("click",this.Ewi))},this.awi=()=>{this.Ls.style.cursor="",this.Ls.removeEventListener("click",this.Ewi)},this.Ewi=()=>{this.B9t&&this.B9t.qmi.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.uwi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.bwi();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.t2t(),this.bwi()}}}};r();var f7=class t extends _o{Pwi(){if(this.npt){this.npt.setAdVolume(v7(this.$P,this.Mx))}}xwi(t){this.npt=t,this.Qmi(t)}Qmi(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.Iwi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Rwi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Cwi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.Dwi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.Bwi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Nwi)}Mwi(){const t=this.npt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.Iwi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Rwi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Cwi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.Dwi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.Bwi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Nwi))}Gx(){this.uyt.ynt&&(this.uyt.ynt.Fmi.resume(),this.hx=!1)}zx(){this.uyt.ynt&&(this.uyt.ynt.Fmi.pause(),this.hx=!0)}get MP(){const t=this.uyt.B9t;return t&&(this.MP=t.qmi.getPlayheadTime()),this.bz}set MP(t){this.bz=t}get ct(){return this.WA}get Dhi(){return!!this.uyt&&void 0!==this.uyt.ynt}get hx(){return this.kz}set hx(t){this.kz=t}get Mx(){return this.ib}set Mx(t){this.npt&&this.npt.setAdVolume(t),this.ib=t}get $P(){return this.npt&&(this.Lwi=0===this.npt.getAdVolume()),this.Lwi}set $P(t){this.npt&&this.npt.setAdVolume(v7(t,this.Mx)),this.Lwi=t}get Sx(){return this.N4}get UP(){return this.Z4}set UP(t){this.Z4=t}get Ax(){return this.t5}static Owi(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}Fwi(i){const e=t.Owi(i);this.npt&&e&&this.npt.setVideoState(e)}rD(){const t=this.uyt.B9t;t&&t.qmi.skip()}hr(){if(this.Mwi(),this.npt){this.Fwi("stop"),this.npt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.npt.getTemporalSlots();for(const i of t)i.stop();this.npt.dispose(),this.npt=void 0}this.WA=NaN,this.UP=!1,this.t5=mh.VL,this.MP=0,this.Uwi=0,this.hx=!0,void 0!==this.Vwi&&(p(this.Vwi),this.Vwi=void 0)}kn(){this.hr(),this.Vo(),this.uyt.mn("Dnt",this.Ed),this.sc.mn(Rh.yn,this.Rwi),this.Q1t.removeEventListener("click",this.Hwi)}constructor(t,i,e,s){super(),this.oa=void 0,this.sc=void 0,this.uyt=void 0,this.Q1t=void 0,this.N4=void 0,this.npt=void 0,this.kz=void 0,this.ib=void 0,this.WA=void 0,this.Lwi=void 0,this.Z4=void 0,this.t5=void 0,this.bz=void 0,this.Vwi=void 0,this.Uwi=void 0,this.Iwi=void 0,this.Cwi=void 0,this.Hwi=void 0,this.vm=void 0,this.Dwi=void 0,this.Bwi=void 0,this.Nwi=void 0,this.Ed=void 0,this.Rwi=void 0,this.oa=t,this.sc=i,this.uyt=e,this.Q1t=s,this.N4=ve.iL()._s(),this.kz=!0,this.WA=NaN,this.Lwi=!1,this.Z4=!1,this.t5=mh.VL,this.bz=0,this.Uwi=0,this.Iwi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const i=t.qmi,e=i.getPlayheadTime(),s=i.getDuration();return e>=s||sr(s,e)})(this.uyt.B9t)||(this.hx=!0,this.So(new hl(this.MP)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.hx=!1,this.So(new ce(this.MP));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.npt){const t=this.npt.getAdVolume();0===t?this.Lwi=!0:this.ib=t,this.So(new Ze(this.MP,this.Mx))}}},this.Cwi=()=>{this.UP=!1;const t=this.hx;if(this.hx=!1,t&&(this.So(new Tc(this.MP)),this.So(new ce(this.MP))),this.t5=mh.WL,this.MP=0,!this.uyt.B9t)return;const i=this.uyt.B9t.qmi;this.WA=i.getDuration(),this.So(new Rs(this.WA)),this.Vwi=v(()=>{if(!this.Dhi)return void this.vm();this.uyt.Swi(this.MP);const t=i.getPlayheadTime();uh(t,this.Uwi,.001)||this.So(new Si(t,void 0)),this.Uwi=t},250),this.npt&&this.npt.setAdVolume(v7(this.$P,this.Mx))},this.Hwi=()=>{const t=this.uyt.B9t;t&&(t.l4t===bi.a4t?this.oa.zx():this.hx||this.zx())},this.vm=()=>{p(this.Vwi),this.Vwi=void 0},this.Dwi=()=>{this.vm(),this.UP=!0},this.Bwi=()=>{this.Fwi("pause")},this.Nwi=()=>{this.Fwi("playing")},this.Ed=t=>{t.od.l4t===bi.hZt&&(this.hx=!1)},this.Rwi=()=>{this.npt&&this.npt.resize(this.sc.Eu,this.sc.Iu)},this.ib=t.Mx,e.wn("Dnt",this.Ed),this.sc.wn(Rh.yn,this.Rwi),this.Q1t.addEventListener("click",this.Hwi)}};function v7(t,i){return t?0:i}r(),r();var _7=class extends R{get name(){return r7.gmi}constructor(){super("A FreeWheel Ad Error occurred")}};r();var g7=class extends R{get name(){return r7._mi}constructor(){super("A FreeWheel Reset Error Occurred")}},p7=0;function m7(){return"cue-"+ ++p7}var w7=class{Wwi(t,i,e){t.setNetwork(i.networkId),t.setServer(i.adServerUrl);const s=this.npt;if(s.setProfile(i.profile),i.assetId&&i.assetDuration&&s.setVideoAsset(i.assetId,i.assetDuration),i.siteSectionId&&s.setSiteSection(i.siteSectionId),s.registerVideoDisplayBase(e),i.cuePoints&&i.cuePoints.length)for(const t of i.cuePoints)s.addTemporalSlot(m7(),t.adUnit,t.timeOffset);const n=i.customData;if(Lu(n)){const t=w.keys(n);for(const i of t){const t=n[i];s.addKeyValue(i,t)}}}async qwi(){this.npt.submitRequest(),await this.zwi.Qy}hr(){this.npt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Gwi),this.zwi.jy(new g7)}constructor(t,i,e,s){this.npt=void 0,this.zwi=void 0,this.Gwi=void 0,this.npt=i,this.Gwi=t=>{this.npt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Gwi),t.success?this.zwi.Xy(void 0):this.zwi.jy(new _7)},this.Wwi(t,e,s),i.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Gwi),this.zwi=new pa}};r(),r();var y7=class{Xwi(){this.Xmi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.hwi),this.Xmi.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.hwi)}get jwi(){return this.Jg.Qy}WHt(){this.Xwi(),this.Jg.jy(new g7)}constructor(t){this.Xmi=void 0,this.Jg=void 0,this.hwi=void 0,this.P7t=void 0,this.Xmi=t,this.hwi=t=>{this.Xwi(),this.Jg.Xy(void 0)},this.P7t=t=>{this.Xwi(),this.Jg.jy(new _7)},this.Jg=new pa,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.hwi),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.P7t)}},A7=class{aO(t){this.Xmi=t}Lmi(){return this.Qwi(this.Kwi.Ymi)}Imi(){this.Qwi(this.Kwi.iwi)}async Qwi(t){if(this.Xmi)for(;t.length>0;){this.Ywi=new y7(this.Xmi);const i=this.Ywi.jwi,e=this.Kwi.ynt;e&&e.l4t===bi.a4t&&e.Fmi.stop();t.shift().Fmi.play();try{await i}finally{this.Ywi=void 0}}}hr(){this.Ywi&&(this.Ywi.WHt(),this.Ywi=void 0),this.NNt=0}kn(){this.oa.mn(d._y,this.Jwi)}constructor(t,i){this.oa=void 0,this.Kwi=void 0,this.NNt=void 0,this.Ywi=void 0,this.Xmi=void 0,this.Jwi=void 0,this.oa=t,this.Kwi=i,this.NNt=0,this.Jwi=()=>{const t=this.oa.LP();for(const i of this.Kwi.Zmi){const e=new ve([this.NNt,t],[!0,!0]),s=i.Fmi.getTimePosition();if(e.Cr(s))switch(i.Fmi.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.Qwi([i]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:i.Fmi.play(),i.Fmi.setVisible(!0)}}this.NNt=t},t.wn(d._y,this.Jwi)}},b7=0,S7=class t extends Sc{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++b7}get xmi(){return 0!==this.Tmi.iwi.length}get Mmi(){return 0!==this.Tmi.Ymi.length}async C6t(){if(!this.LZt)throw new m("Invalid state");const t=this.Zwi,i=t.newContext();i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),i.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const e=new w7(t,i,this.LZt,this.$wi),s=this.Tmi.Gmi(i,e.qwi());this.tyi.aO(i),this.Emi.xwi(i),this.iyi=e;try{await s}finally{this.Emi.Pwi(),this.eyi=!0}}get Emi(){return this.A7t}get Tmi(){return this.syi}get Dmi(){return this.eyi}static nyi(t,i,e){const s=h.createElement("div");return s.id=e,s.className="theo-freewheel",i.classList.add("theo-freewheel-video"),s.appendChild(i),t.appendChild(s),s}get Rmi(){return this.tyi}F3t(t){this.Emi.Fwi(t.type)}be(){this.Q1t.style.display="block",this._T.style.display="block"}we(){this.Q1t.style.display="none",this._T.style.display="none"}K9t(t){this.LZt=t}hr(){this.eyi=!1,this.LZt=void 0,this.Tmi.hr(),this.tyi.hr(),this.iyi&&(this.iyi.hr(),this.iyi=void 0),this.Emi.hr(),this._T.src=""}kn(){this.hr(),this.A7t.kn(),this.tyi.kn(),this.Tmi.kn(),this.Q1t.remove(),os(this.Q1t)}constructor(i,e,n){super(),this.oa=void 0,this._T=void 0,this.Zwi=void 0,this.$wi=void 0,this.syi=void 0,this.Q1t=void 0,this.A7t=void 0,this.iyi=void 0,this.tyi=void 0,this.LZt=void 0,this.eyi=void 0,this.oa=i,this._T=e,this.eyi=!1,this.$wi=t.createUniqueDisplayBaseId(),this.Q1t=t.nyi(i.xe,e,this.$wi),this.Zwi=new s.tv.freewheel.SDK.AdManager,this.syi=new l7(this.Q1t,this._T),this.tyi=new A7(this.oa,this.Tmi),this.au(this.Tmi),this.A7t=new f7(i,n,this.Tmi,this.Q1t)}};function T7(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function k7(t,i,e){if(void 0!==i&&S(i)||i<0||i===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return e}return Ac(i)}Qh.Ng.zz(new class{get P3t(){return mt.H0t}qz(t){return t.integration===ru.FREEWHEEL}x3t(t,i,e){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new EF(t.Wu,t.Ql,e,1,[Ci.Bk]);n.ust(t.xe);const r=n.Gq(Ci.Bk),h=new S7(t,r.$W,t.Wu);return new a7(t,i,n,h,r)}sj(t){const i=Ua(t);ul(i.cuePoints)||(i.cuePoints=[]);const e=[],s=t.assetDuration||0;for(const t of i.cuePoints){const i=k7(t.adUnit,t.timeOffset,s),n=T7(t.adUnit);!S(i)&&Z(n)?(t.adUnit=n,t.timeOffset=i,e.push(t)):zd.um("Invalid adUnit/timeOffset combination. Cue was removed.")}return i.cuePoints=e,i}M6(t,i,e,s){e.K9t(t,i,s)}}),r(),r(),r(),r(),r();var E7=self.theoplayerDeviceMetadata;function ja(t){return t.navigator&&t.navigator.userAgent||""}r(),r(),r(),r();var P7={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function Vn(t,i){const e=P7[i];return!!e&&Boolean(ja(t).match(e))}function x7(t){return Vn(t,"Android")}function I7(t){return Vn(t,"Windows Phone")}function R7(t){return Vn(t,"iOS")&&!I7(t)}function C7(t){return Vn(t,"Ubuntu")}var D7=/Windows (NT|Phone) ([0-9.]+)/i,B7=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,N7={"Windows 10":D7,"Windows 8.1":D7,"Windows 8":D7,"Windows 7":D7,"Windows Vista":D7,"Windows Server 2003":D7,"Windows XP":D7,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":B7,"Mac OS":B7,"Chrome OS":void 0};function M7(t,i){const e=N7[i];return e?ja(t).match(e):null}function L7(t){return t.split(/[_.]/).map(t=>x(t,10))}function O7(t){if(function(t){return Boolean(ja(t).match(/Windows/i))}(t)){if(function(t){return Vn(t,"Windows 10")}(t))return"Windows 10";if(I7(t))return"Windows Phone";if(function(t){return Vn(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return Vn(t,"Windows 8")}(t))return"Windows 8";if(function(t){return Vn(t,"Windows 7")}(t))return"Windows 7";if(function(t){return Vn(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return Vn(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return Vn(t,"Windows XP")}(t))return"Windows XP"}else{if(x7(t))return"Android";if(R7(t))return"iOS";if(function(t){return Vn(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return Vn(t,"Mac OS")}(t))return"Mac OS";if(C7(t))return"Ubuntu";if(function(t){return Vn(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return Vn(t,"Linux")&&!C7(t)}(t))return"Linux"}}function F7(t,i){const e=function(t){const i=M7(t,"Windows 10");return i&&i.length>2?L7(i[2]):void 0}(t),s=function(t){const i=M7(t,"Mac OS X");return i&&i.length>2?L7(i[2]):void 0}(t),n=function(t){const i=M7(t,"Android");return i&&i.length>1?L7(i[1]):void 0}(t),r=function(t){const i=M7(t,"iOS");return i&&i.length>3?L7(i[3]):void 0}(t),h=function(t){const i=M7(t,"Chrome OS");return i&&i.length>0?L7(i[0]):void 0}(t);return e?e.length>i?e[i]:void 0:s?s.length>i?s[i]:void 0:n?n.length>i?n[i]:void 0:r?r.length>i?r[i]:void 0:h&&h.length>i?h[i]:void 0}function U7(t){const i=function(t){return F7(t,0)}(t),e=function(t){return F7(t,1)}(t),s=function(t){return F7(t,2)}(t);if(void 0!==i)return void 0===e?""+i:void 0===s?i+"."+e:i+"."+e+"."+s}var V7={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function H7(t,i){const e=V7[i];return!!e&&Boolean(ja(t).match(e))}function W7(t){return Boolean(ja(t).match(/Mobi/i))}function q7(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||z7(t)}function z7(t){return H7(t,"Chrome iOS")}function G7(t){return H7(t,"Firefox")&&!j7(t)}function X7(t){return H7(t,"Firefox Mobile")&&!j7(t)&&W7(t)}function j7(t){return H7(t,"Seamonkey")}function Q7(t){return H7(t,"Firefox iOS")&&!j7(t)}function K7(t){return H7(t,"Safari")&&!H7(t,"Chrome")&&!Qt.Wv}function Y7(t){return Boolean(n9(t))}function J7(t){return H7(t,"Edge")}function Z7(t){return H7(t,"Edge Chromium")}function $7(t){return H7(t,"IE")}function t9(t){return H7(t,"Vivaldi")}var i9=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,e9={Chrome:i9,"Chrome Mobile":i9,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:i9,HeadlessChrome:i9,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function s9(t,i){const e=e9[i];return e?ja(t).match(e):null}function n9(t){return s9(t,"Opera")}function r9(t){const i=function(t){return s9(t,"Firefox")}(t);return i?C(i[1]):0}function h9(t){const i=function(t){return s9(t,"Firefox iOS")}(t);return i?C(i[1].split(".")[0]):0}function o9(t){const i=function(t){return s9(t,"Safari")}(t);return i?C(i[2].split(".")[0]):0}function a9(t){const i=function(t){return s9(t,"Edge")}(t);return i?C(i[1]):0}function u9(t){const i=function(t){return s9(t,"Edge Chromium")}(t);return i?C(i[1]):0}function c9(t){const i=function(t){return s9(t,"IE")}(t);return i?C(i[2]):0}function d9(t){const i=function(t){return s9(t,"Vivaldi")}(t);return i?C(i[1]):0}function l9(t){if(x7(t))return q7(t)?"Chrome Mobile":G7(t)||X7(t)?"Firefox Mobile":J7(t)?"Edge Mobile":Y7(t)?"Opera Mobile":"Android Browser";if(R7(t)){if(q7(t)||z7(t))return"Chrome iOS";if(G7(t)||Q7(t))return"Firefox iOS";if(J7(t))return"Edge Mobile";if(K7(t)||function(t){return K7(t)&&W7(t)}(t))return"Safari Mobile";if(Y7(t))return"Opera Mobile"}return function(t){return H7(t,"Chromium")}(t)?"Chromium":function(t){return H7(t,"HeadlessChrome")}(t)?"HeadlessChrome":q7(t)?"Chrome":G7(t)?"Firefox":K7(t)?"Safari":J7(t)?"Edge":Z7(t)?"Edge Chromium":$7(t)?"IE":Y7(t)?"Opera":t9(t)?"Vivaldi":void 0}function f9(t){return t9(t)?d9(t):z7(t)?Number(function(t){const i=e9["Chrome iOS"];return i&&i.exec(ja(t))||[]}(t)[1]):q7(t)?Number(function(t){const i=e9.Chrome;return i&&i.exec(ja(t))||[]}(t)[1]):G7(t)||X7(t)?r9(t):Q7(t)?h9(t):K7(t)?o9(t):J7(t)?a9(t):Z7(t)?u9(t):$7(t)?c9(t):Y7(t)?function(t){const i=n9(t);return i&&i[0].indexOf("Opera")>-1?C(i[5]):i?C(i[2].split(".")[0]):0}(t):void 0}var v9=function(t){return t.ryi="pc",t.hyi="console",t.oyi="settop",t.ayi="mobile",t.uyi="tablet",t.cyi="smarttv",t.dyi="searchbot",t}({});function _9(t){const i=ja(t);return i.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":i.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(i)?"tablet":/Mobi/.test(i)?"mobile":i.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":i.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(l9(t))}(t)?"pc":void 0}var g9=class{ej(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){const t=DA.Wy("deviceId");if(t)return t;const i=UR();return DA.qy("deviceId",i),i}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"10.0.0"),this.lyi(t),this.fyi(),this.vyi(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const i=t.connectionType;i?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i):(this._yi(),od.connection&&od.connection.addEventListener&&od.connection.addEventListener("change",this._yi))}lyi(t){this.gyi(t);const i=t.deviceManufacturer||E7&&E7.manufacturer;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,i);const e=t.deviceModel||E7&&E7.model;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,e)}gyi(t){const i=t.deviceType||function(){const t=_9(self);switch(t){case v9.hyi:return"game-console";case v9.cyi:return"tv";case v9.oyi:return"media-streamer";default:return t}}();i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,i)}fyi(){const t=l9(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const i=f9(self);void 0!==i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,i.toString())}vyi(t){const i=t.deviceOs||O7(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,i);const e=t.deviceOsVersion||U7(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,e.toString())}kn(){od.connection&&od.connection.removeEventListener&&od.connection.removeEventListener("change",this._yi)}constructor(t,i){this.empClient=void 0,this.agama=void 0,this._yi=void 0,this.empClient=t,this.agama=i,this._yi=()=>{const t=zd.bP;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const i=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(zd.AP);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i)}}}};VF(function(t){return i=>class extends i{OP(t,i){this.pyi&&this.pyi.QG(),super.OP(t)}kn(){this.pyi&&this.pyi.kn(),super.kn()}constructor(i,e){super(i,e),this.OG=new t,this.pyi=void 0,this.pyi=new HR(this,this.OG,e)}}}(class extends IR{qx(t){this.myi=t,this.wyi&&(this.OG=function(t,i){const e=function(t,i){switch(i){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(i,t.logLevel);i.setLogLevel(e);const s=new i.EMPClient(t.config);return function(t,i){return t.setExternalConfig(i.config),t}(s,t)}(t,this.wyi),this.OG&&(this.yyi=new g9(this.OG,this.wyi),this.ko=!0))}ij(){return this.wyi||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),Boolean(this.wyi)}$X(){return this.ko}DX(t,i){if(this.OG&&this.wyi)switch(t){case Ka.eG:this.OG.setMeasurement(this.wyi.Measurement.BUFFER_LENGTH,i);break;case Ka.sG:this.OG.setMeasurement(this.wyi.Measurement.BYTES_RECEIVED,i);break;case Ka.rG:this.OG.setMeasurement(this.wyi.Measurement.SEGMENT_PROFILE_BITRATE,i);break;case Ka.hG:this.OG.setMeasurement(this.wyi.Measurement.VIDEO_PROFILE_BITRATE,i);break;case Ka.nG:this.OG.setMeasurement(this.wyi.Measurement.SEGMENT_READ_BITRATE,i);break;case Ka.Jz:this.OG.setMeasurement(this.wyi.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,i);break;case Ka.Zz:this.OG.setMeasurement(this.wyi.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,i);break;case Ka.$z:this.OG.setMeasurement(this.wyi.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,i);break;case Ka.tG:this.OG.setMeasurement(this.wyi.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,i);break;case Ka.iG:this.OG.setMeasurement(this.wyi.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,i);break;case Ka.aG:this.OG.setMeasurement(this.wyi.Measurement.PLAYBACK_POSITION,i);break;case Ka.uG:this.OG.setMeasurement(this.wyi.Measurement.NUMBER_OF_FRAMES_DECODED,i);break;case Ka.oG:this.OG.setMeasurement(this.wyi.Measurement.NUMBER_OF_FRAMES_DROPPED,i)}}fX(t,i){if(this.OG&&this.wyi)switch(t){case yi.vG:this.OG.setSessionMetadata(this.wyi.SessionMetadata.ASSET_DURATION,i);break;case yi.fG:this.OG.setSessionMetadata(this.wyi.SessionMetadata.MANIFEST_URI,i);break;case yi._G:this.OG.setSessionMetadata(this.wyi.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,i);break;case yi.mG:this.OG.setSessionMetadata(this.wyi.SessionMetadata.SERVICE_NAME,i);break;case yi.gG:this.OG.setSessionMetadata(this.wyi.SessionMetadata.CDN,i);break;case yi.pG:this.OG.setSessionMetadata(this.wyi.SessionMetadata.CONTENT_TITLE,i);break;case yi.wG:this.OG.setSessionMetadata(this.wyi.SessionMetadata.CONTENT_TYPE,i);break;case yi.yG:this.OG.setSessionMetadata(this.wyi.SessionMetadata.CONTENT_DESCRIPTION,i)}}ej(){this.yyi&&this.myi&&this.yyi.ej(this.myi)}tj(t,i){this.wyi&&this.OG&&(this.FX(),function(t,i,e,s){const n=VR(t,e,s);i.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.wyi,this.OG,t,i),this.Ayi=!0)}kn(){this.yyi&&this.yyi.kn(),this.byi(ER.AG),this.OG=void 0}$G(t){this.Syi(t)}eX(t,i){this.OG&&this.OG.event(t.code,i)}FX(){this.OG&&this.Ayi&&(this.OG.exitSession(),this.Ayi=!1)}byi(t){if(this.OG&&this.wyi&&(this.FX(),t===ER.AG))this.OG.shutdown(this.wyi.ShutdownType.NORMAL_SHUTDOWN)}tX(t,i,e){this.Syi(t,i,e)}Syi(t,i,e){if(this.OG&&this.wyi)switch(t){case Un.TM:this.Tyi(this.wyi.ViewState.PLAYING,i,e);break;case Un.Qz:this.Tyi(this.wyi.ViewState.FAILED,i,e);break;case Un.Kz:this.Tyi(this.wyi.ViewState.INITIAL_BUFFERING,i,e);break;case Un.Gz:this.Tyi(this.wyi.ViewState.PAUSED,i,e);break;case Un.Xz:this.Tyi(this.wyi.ViewState.SEEK,i,e);break;case Un.jz:this.Tyi(this.wyi.ViewState.STALLED,i,e);break;case Un.Yz:this.Tyi(this.wyi.ViewState.NO_ACCESS,i,e)}}Tyi(t,i,e){if(this.OG)if(i){const s=function(t){return t||""}(e);this.OG.viewStateExtended(t,i.code,s)}else this.OG.viewStateChanged(t)}constructor(){super(),this.wyi=void 0,this.OG=void 0,this.ko=!1,this.Ayi=!1,this.myi=void 0,this.yyi=void 0,this.wyi=s.Agama}}),zo.hnt),r(),r(),r(),r(),r();var p9=function(t){return t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last",t}({});r();var m9=function(t){return t.VOD="vod",t.LIVE="live",t}({}),w9=class{get Ca(){return this.kyi.Ca}get lt(){return this.JW}get WP(){return this.ZW}Eyi(t){this.JW=P(t),this.ZW=t,this.oa.So(new Pi(t))}Ta(t){this.Pyi.resetSource(),this.xyi.Gy(),this.Iyi=!1,this.oa.Ryi(t)}async Xnt(t,i){if(this.Cyi.hr(),this.Iyi=!1,!t||!function(t){return t.sources.some(t=>t.integration===GT.UPLYNK)}(t))return await this.oa.Dyi(t,i);try{this.Byi=await this.Nyi.Cgi(t),await this.oa.Dyi(this.Byi,i)}catch(t){this.Eyi(new Ga(Vo.MANIFEST_LOAD_ERROR,t.message,t))}}kn(){this.m7.Zg(),this.Myi.Zg(),this.oa.mn(d.xw,this.Lyi),this.oa.mn(d.uo,this.uvi),this.oa.mn(d._y,this.qui),this.oa.mn(d.Bw,this.U_i),this.oa.mn(Do.AM,this.Pd);for(const t of this.Pyi.A0t.ec)t.mn("Oyi",this.Fyi),t.mn("Dnt",this.wui),t.mn("Cnt",this.kui);this.Pyi.A0t.mn("xnt",this.Uyi),this.Pyi.A0t.mn("Pnt",this.Vyi),this.Pyi.destroy(),this.Y1t&&(this.Y1t.zg(),this.Y1t=void 0),this.Iyi=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const i=await this.Hyi.RSt(t.integrationData.source.prefix,t.integrationData.source.id,this.Myi.Yg,t.integrationData.preplayResponse.sid);this.kyi.Wyi(i),this.xyi.qyi(i,this.Pyi.A0t.ec)}catch(t){0}}zyi(t){this.Pyi.Gyi(t),this.Pyi.mnt.forEach(i=>i.Xyi(t)),this.Pyi.jyi(this.oa.Tx()),this.K1t()}OP(t){if(this.Pyi.ynt)return;this.m7.Zg(),this.m7=new at;Wr($e(this.gri(t,this.m7.Yg),this.m7))}async gri(t,i){if(ii(i),t<this.oa.LP())return void this.Qyi(t);let e=[];switch(this.Pyi.Kyi){case p9.PLAY_ALL:e=this.Pyi.Yyi(this.oa.LP(),t),await this.Jyi(t,e,i);break;case p9.PLAY_LAST:const s=this.Pyi.Yyi(this.oa.LP(),t).pop();e=s?[s]:[],await this.Jyi(t,e,i);break;case p9.PLAY_NONE:this.Zyi(t)}}Qyi(t){const i=Jr(this.Pyi.A0t.ec,i=>i.Sat.Cr(t));i?this.oa.$yi(i.EO):this.oa.$yi(t)}Zyi(t){const i=this.Pyi.Yyi(this.oa.LP(),t).pop();i&&i.Sat.Cr(t)?this.oa.$yi(i.PO):this.oa.$yi(t)}async Jyi(t,i,e){for(const t of i)await this.tAi(t,e);const s=af(i,-1);s&&s.Sat.Cr(t)?this.oa.LP()<t&&this.oa.$yi(s.PO):this.oa.$yi(t)}async tAi(t,i){t.mn("Oyi",this.Fyi);const e=Promise.race([t.ww("Cnt",i),t.ww("Oyi",i)]);this.zyi(this.oa.LP()),t.ro||this.oa.$yi(t.EO),await e,t.wn("Oyi",this.Fyi)}K1t(){const t=Jr(this.Pyi.mnt,t=>t.iAi.length>0);if(t){const i=t.iAi[0];this.Y1t||(this.Y1t=new C1(this.oa.xe),this.Y1t.wn("clickstart",this.eAi)),this.Y1t.u1t=i}else this.Y1t&&(this.Y1t.zg(),this.Y1t=void 0)}constructor(t,i,e,s,n,r,h){this.oa=void 0,this.Cyi=void 0,this.Nyi=void 0,this.Pyi=void 0,this.kyi=void 0,this.Hyi=void 0,this.xyi=void 0,this.Byi=void 0,this.JW=void 0,this.ZW=void 0,this.m7=void 0,this.Myi=void 0,this.sAi=void 0,this.Iyi=void 0,this.Y1t=void 0,this.Lyi=void 0,this.uvi=void 0,this.qui=void 0,this.U_i=void 0,this.Pd=void 0,this.Fyi=void 0,this.wui=void 0,this.kui=void 0,this.Uyi=void 0,this.Vyi=void 0,this.eAi=void 0,this.oa=t,this.Cyi=i,this.Nyi=e,this.Pyi=s,this.kyi=n,this.Hyi=r,this.xyi=h,this.JW=void 0,this.ZW=void 0,this.m7=new at,this.Myi=new at,this.sAi=void 0,this.Iyi=!1,this.Y1t=void 0,this.Lyi=t=>{const i=t.currentSource;if(!i||!i.integrationData)return;const{preplayResponse:e,source:s}=i.integrationData;this.kyi.nAi(e),e&&e.type===m9.VOD&&e.ads&&this.Pyi.qyi(e.ads),this.Cyi.rAi=i.integrationData,s.assetInfo&&Wr(this.fetchAssetInfo(i))},this.uvi=()=>{this.Iyi=!0},this.qui=()=>{this.Iyi&&this.zyi(this.oa.LP())},this.U_i=()=>{this.Iyi&&(this.zyi(1/0),this.Iyi=!1)},this.Pd=()=>{Wr(this.Cyi.Tn())},this.Fyi=t=>{this.m7.Zg(),this.m7=new at;Wr($e(this.gri(t.od.PO,this.m7.Yg),this.m7))},this.wui=()=>{1!==this.oa.ux&&(this.sAi=this.oa.ux,this.oa.ux=1)},this.kui=()=>{void 0!==this.sAi&&(this.oa.ux=this.sAi,this.sAi=void 0)},this.Uyi=t=>{t.od.wn("Oyi",this.Fyi),t.od.wn("Dnt",this.wui),t.od.wn("Cnt",this.kui)},this.Vyi=t=>{t.od.mn("Oyi",this.Fyi),t.od.mn("Dnt",this.wui),t.od.mn("Cnt",this.kui)},this.eAi=()=>{this.oa.zx()},this.oa.wn(d.xw,this.Lyi),this.oa.wn(d.uo,this.uvi),this.oa.wn(d._y,this.qui),this.oa.wn(d.Bw,this.U_i),this.oa.wn(Do.AM,this.Pd),this.Pyi.A0t.wn("xnt",this.Uyi),this.Pyi.A0t.wn("Pnt",this.Vyi)}};r(),r();var y9=$h({breaksIndex:xt,adsIndex:xt,startTime:xt,endTime:xt}),A9=$h({index:xt,timeOffset:xt}),b9=$h({duration:xt,apiFramework:Fs(hi,oI),creative:hi,mimeType:hi,width:xt,height:xt,companions:ln(function(t){return new pI(t)}(()=>b9)),extensions:Fs(Zh,ln(Ns)),fw_parameters:Fs(Zh,gI(hi)),events:gI(ln(hi))}),S9=$h({type:lI(["linear","nonlinear"]),position:lI(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:xt,duration:xt,ads:ln(b9),events:gI(ln(hi))}),T9=$h({breaks:ln(S9),breakOffsets:Fs(Zh,ln(A9)),placeholderOffsets:Fs(Zh,ln(y9))}),k9=$h({required:Fs(Zh,hI),fairplayCertificateURL:Fs(Zh,hi),widevineLicenseURL:Fs(Zh,hi),playreadyLicenseURL:Fs(Zh,hi)}),E9={type:lI(cI(m9)),playURL:hi,prefix:hi,sid:hi,drm:Fs(Zh,k9)},P9=$h(Mo({},E9,{type:lI([m9.VOD]),ads:T9,interstitialURL:Fs(hi,oI,Zh)})),x9=Fs(P9,$h(Mo({},E9,{type:lI([m9.LIVE])})));r();var I9=hi,R9=$h({userId:hi,externalId:Fs(hi,ln(hi))}),C9=class{async RSt(t){try{return this.hAi(t)}catch(t){throw t}}async hAi(t){const i=await async function(t){const i=t.prefix,e=D9[t.assetType],s=function(t){if(ln(I9).qH(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(I9.qH(t))return t;if(R9.qH(t)&&ul(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(R9.qH(t))return"ext/"+t.userId+"/"+t.externalId;throw new g("Invalid asset id")}(t.id),n=await async function(t){if(t&&await zd.wm())return{rmt:"fps",manifest:"m3u8"};if(t&&await zd.Am())return{rmt:"wv",manifest:"mpd"};if(t&&await zd.ym())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),r=function(t,i){const e=B9(t,i);return e?{"ad.cping":"1","ad.pingf":String(e)}:{}}(t.assetType,t.ping);let h={};ul(t.preplayParameters)?t.preplayParameters.forEach(t=>{h[t[0]]=t[1]}):h=t.preplayParameters;const o=i+"/preplay/"+e+s+".json";return Gc(o,Mo({v:"2"},h,n,r,h))}(t),e=this.nV.lk({Uk:X.GET,Yu:i,dk:M.DT}),s=await e,n=Mo({},await s.ck(),{type:t.assetType===XR.ASSET?m9.VOD:m9.LIVE});return x9.qH(n)||x9.GH(n,"PreplayResponse"),n}constructor(t){this.nV=void 0,this.nV=t}},D9={[XR.ASSET]:"",[XR.CHANNEL]:"channel/",[XR.EVENT]:"event/"};function B9(t,i){const e=t!==XR.ASSET;return(!e&&i.adImpressions?1:0)+(!e&&i.freeWheelVideoViews?2:0)+(e&&i.linearAdData?4:0)}r(),r();var N9=$h({ad_id:hi,apiFramework:Fs(oI,hi),companions:ln(Ns),creative:hi,duration:xt,mimeType:hi,height:xt,width:xt,extensions:Fs(Zh,ln(Ns)),fw_parameters:Fs(Zh,gI(hi))}),M9=$h({breakId:hi,ads:ln(N9),type:lI(["linear","nonlinear"]),position:lI(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:xt,duration:xt,height:Fs(Zh,xt),width:Fs(Zh,xt),events:gI(ln(hi))}),L9=$h({breaks:ln(M9)}),O9=$h({next_time:xt,ads:Fs(Zh,L9),extensions:Fs(Zh,ln(Ns)),error:Fs(Zh,hi),currentBreakEnd:Fs(Zh,xt)}),F9=function(t){return t.MSt="start",t.Xz="seek",t}({}),U9=class{async RSt(t,i){try{return this.hAi(t,i)}catch(t){throw t}}async hAi(t,i){const e=function(t){const i={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(i.ft=String(t.seekTime));t.event&&(i.ev=t.event);return Gc(t.zonePrefix+"/session/ping/"+t.sessionId+".json",Mo({},i))}(t),s=this.nV.lk({Uk:X.GET,Yu:e,dk:M.DT,Yg:i}),n=await s,r=await n.ck();return O9.qH(r)||O9.GH(r,"PingResponse"),r}constructor(t){this.nV=void 0,this.nV=t}};r(),r();var V9=class extends Oi{get oE(){return this.aE}xa(){return new H9(this.aE)}constructor(t){super("oAi"),this.aE=void 0,this.aE=t}},H9=class extends wp{constructor(t){super("pingresponse"),this.response=void 0,this.response=t}};r();var W9=class extends Oi{get lt(){return this.JW}xa(){return new q9(this.JW)}constructor(t){super("aAi"),this.JW=void 0,this.JW=t}},q9=class extends wp{constructor(t){super("pingerror"),this.error=void 0,this.error=t}},z9=class extends Ne{set rAi(t){this.uAi=t}get cAi(){return this.dAi}async Tn(){const t=this.uAi;if(!t)return;0!==B9(t.source.assetType,t.source.ping)&&(this.dAi=this.oa.Tx().start(0),await this.lAi(F9.MSt),this.oa.wn("timeupdate",this.fAi),this.oa.wn("seeking",this.vAi))}async lAi(t,i){const e=this.uAi.preplayResponse,s={};if(S(this.dAi))return void 0;if(it(this._Ai)&&sr(this._Ai,this.oa.LP()-this.dAi))return;void 0!==i&&(s.seekTime=i),void 0!==t&&(s.event=t);let n,r=this.oa.LP()-this.dAi;t===F9.MSt?r=0:t!==F9.Xz&&this.gAi&&(r=_.min(r,this.gAi)),this._Ai=r;try{var h;const t=await this.pAi.RSt(Mo({zonePrefix:e.prefix,sessionId:e.sid,currentTime:r,hasFreeWheelVideoViews:null==(h=this.uAi)?void 0:h.source.ping.freeWheelVideoViews},s),this.nT.Yg);this.So(new V9(t)),this.gAi=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){D(t)||(n=t.message)}finally{n&&this.So(new W9(n))}}hr(){this.gAi=void 0,this.uAi=void 0,this.dAi=NaN,this.mAi=!1,this.wAi=NaN,this._Ai=void 0,this.oa.mn("seeking",this.vAi),this.oa.mn("timeupdate",this.fAi),this.yAi()}yAi(){this.nT.Zg(),this.nT=new at}kn(){this.hr()}constructor(t,i){super(),this.pAi=void 0,this.oa=void 0,this.uAi=void 0,this.dAi=void 0,this.gAi=void 0,this.mAi=void 0,this.wAi=void 0,this.nT=void 0,this._Ai=void 0,this.fAi=void 0,this.vAi=void 0,this.pAi=t,this.oa=i,this.dAi=NaN,this.gAi=void 0,this.mAi=!1,this.wAi=NaN,this.nT=new at,this._Ai=void 0,this.fAi=async()=>{const t=this.oa.LP();if(this.wAi=t,this.mAi||qd(this.gAi)||S(this.dAi))return;this.dAi+this.gAi<=t&&(this.mAi=!0,await this.lAi(),this.mAi=!1)},this.vAi=()=>{if(this.oa.LP()===this.dAi)return;this.mAi&&this.yAi(),this.wAi=this.oa.LP();const t=this.wAi-(this.dAi||0);S(t)?Wr(this.lAi(F9.Xz,0)):Wr(this.lAi(F9.Xz,t))}}};r();var G9=class{async Cgi(t){const i=[];for(const e of t.sources)if(Qi(e))try{const s=j9({source:e,preplayResponse:await this.AAi.RSt(e)},t,this.VJ);s.src&&(s.src=Gc(s.src,e.playbackUrlParameters)),i.push(s)}catch(t){0}else i.push(e);if(0!==t.sources.length&&0===i.length)throw new m("Fatal: unable to play UplynkSources.");return Mo({},t,{sources:i})}constructor(t,i){this.AAi=void 0,this.VJ=void 0,this.AAi=t,this.VJ=i}};function X9(t){return!!t.sources&&(ul(t.sources)?t.sources.some(Qi):Qi(t.sources))}function j9(t,i,e){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=ml({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},i,e);return r.integrationData=t,r}r(),r(),r();var Q9=class extends Oi{xa(){return new K9(this.od.Ca)}constructor(t,i){super("Dnt"),this.od=void 0,this.XF=void 0,this.od=t,this.XF=i}},K9=class extends wp{constructor(t){super("adbreakbegin"),this.adBreak=void 0,this.adBreak=t}};r();var Y9=class extends Oi{xa(){return new J9(this.od.Ca)}constructor(t,i){super("Cnt"),this.od=void 0,this.XF=void 0,this.od=t,this.XF=i}},J9=class extends wp{constructor(t){super("adbreakend"),this.adBreak=void 0,this.adBreak=t}};r();var Z9=class extends Oi{xa(){return new $9(this.od.Ca)}constructor(t){super("Oyi"),this.od=void 0,this.od=t}},$9=class extends wp{constructor(t){super("adbreakskip"),this.adBreak=void 0,this.adBreak=t}};r(),r();var ttt=class extends Oi{xa(){return new itt(this.od.Ca)}constructor(t){super("k4t"),this.od=void 0,this.od=t}},itt=class extends wp{constructor(t){super("updateadbreak"),this.adBreak=void 0,this.adBreak=t}},ett=class extends _o{get Ca(){return this.hu||(this.hu=function(t){let i;const e={get startTime(){return t.EO},get endTime(){return t.PO},get duration(){return t.ct},get ads(){return t.Jc.Ca},get skipOffset(){return t.JYt},set skipOffset(i){t.JYt=i},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new ws(t,e),e}(this)),this.hu}get EO(){return this.OO}get PO(){return this.WA?this.OO+this.WA:void 0}bAi(t){this.WA=t-this.EO;for(const i of this.Jc.ec)i.EO>t&&this.Jc._S(i);this.So(new ttt(this))}get ct(){return this.WA}get Sat(){const t=this.PO;return it(t)?new ve([this.EO,t]):ve.iL()}get Jc(){return this.qc}get SAi(){return this.TAi}get ro(){return this.ho}get JYt(){return this.gpi?-1:this.ZYt}set JYt(t){this.gpi||(this.ZYt=t)}Qut(t){return t>=this.EO&&(qd(this.ct)||t<=this.EO+this.ct)}kAi(t){return-1!==this.JYt&&(!!it(this.PO)&&t-this.EO>=this.JYt)}rD(){this.qc.ec.forEach(t=>t.rD()),this.So(new Z9(this))}EAi(t){const i=it(this.PO)&&t>=this.PO,e=this.EO<=t&&!i&&!this.ro,s=this.ro&&this.PO&&t>=this.PO;e&&(this.ho=!0,this.So(new Q9(this,this.EO))),this.qc.ec.forEach(i=>i.EAi(t)),s&&(this.TAi=!0,this.ho=!1,this.So(new Y9(this,this.PO)))}constructor(t,i,e,s,n){super(),this.OO=void 0,this.WA=void 0,this.qc=void 0,this.gpi=void 0,this.hu=void 0,this.ho=void 0,this.ZYt=void 0,this.TAi=void 0,this.OO=t,this.WA=i,this.qc=e,this.gpi=s,this.ho=!1,this.TAi=!1,this.ZYt=n}};r(),r();var stt=class extends Oi{xa(){return new ntt(this.Int.Ca)}constructor(t,i){super("Bnt"),this.Int=void 0,this.XF=void 0,this.Int=t,this.XF=i}},ntt=class extends wp{constructor(t){super("adbegin"),this.ad=void 0,this.ad=t}};r();var rtt=class extends Oi{xa(){return new htt(this.Int.Ca)}constructor(t,i){super("Nnt"),this.Int=void 0,this.XF=void 0,this.Int=t,this.XF=i}},htt=class extends wp{constructor(t){super("adend"),this.ad=void 0,this.ad=t}};r(),r();var ott=class extends Oi{xa(){return new att(this.Int.Ca)}constructor(t){super("PAi"),this.Int=void 0,this.Int=t}},att=class extends wp{constructor(t){super("removead"),this.ad=void 0,this.ad=t}},utt=class extends C3{bei(t){}Eei(t){this.So(new ott(t))}constructor(){super()}};r();var ctt=class extends Oi{xa(){return new dtt(this.Int.Ca)}constructor(t){super("P4t"),this.Int=void 0,this.Int=t}},dtt=class extends wp{constructor(t){super("adfirstquartile"),this.ad=void 0,this.ad=t}},ltt=class extends Oi{xa(){return new ftt(this.Int.Ca)}constructor(t){super("x4t"),this.Int=void 0,this.Int=t}},ftt=class extends wp{constructor(t){super("admidpoint"),this.ad=void 0,this.ad=t}},vtt=class extends Oi{xa(){return new _tt(this.Int.Ca)}constructor(t){super("I4t"),this.Int=void 0,this.Int=t}},_tt=class extends wp{constructor(t){super("adthirdquartile"),this.ad=void 0,this.ad=t}},gtt=class extends Oi{xa(){return new ptt(this.Int.Ca)}constructor(t){super("xAi"),this.Int=void 0,this.Int=t}},ptt=class extends wp{constructor(t){super("adcomplete"),this.ad=void 0,this.ad=t}};r();var mtt=class t extends _o{static IAi(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map(e=>t.IAi(i,e)),e.extensions,e.fw_parameters,e.events,void 0)}static RAi(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map(e=>t.RAi(i,e)),e.extensions,e.fw_parameters,void 0,e.ad_id)}get Ca(){return this.hu||(this.hu=function(t){let i;const e={get apiFramework(){return t.cYt},get companions(){return t.tYt.Ca},get creative(){return t.CAi},get duration(){return t.ct},get endTime(){return t.PO},get events(){return t.aQ},get extensions(){return t.nJt},get freeWheelParameters(){return t.DAi},get height(){return t.Mi},get mimeType(){return t.oQ},get startTime(){return t.EO},get width(){return t.Ti},addEventListener(t,e){i.wn(t,e)},removeEventListener(t,e){i.mn(t,e)}};return i=new ws(t,e),e}(this)),this.hu}get EO(){return this.OO}get PO(){return this.OO+this.WA}get ct(){return this.WA}get cYt(){return this.dYt}get CAi(){return this.BAi}get oQ(){return this.SQ}get Ti(){return this.sb}get Mi(){return this.hb}get aQ(){return this.Zf}get tYt(){return this.iYt}get nJt(){return this.rJt}get DAi(){return this.NAi}get ro(){return this.ho}get iAi(){var t;return null!=(t=this.Zf.clickthroughs)?t:[]}EAi(t){const i=this.EO<=t&&t<this.PO,e=i&&!this.ro,s=!i&&this.ro;e&&(this.MAi=!1,this.LAi=!1,this.OAi=!1,this.FAi=!1,this.ho=!0,this.So(new stt(this,this.EO))),s&&(this.ho=!1,this.So(new rtt(this,this.PO)))}Xyi(t){const i=(t-this.EO)/this.ct;!this.MAi&&i>=.25&&(this.MAi=!0,this.So(new ctt(this))),!this.LAi&&i>=.5&&(this.LAi=!0,this.So(new ltt(this))),!this.OAi&&i>=.75&&(this.OAi=!0,this.So(new vtt(this))),!this.FAi&&i>=.9999&&(this.FAi=!0,this.So(new gtt(this)))}rD(){this.MAi=!0,this.LAi=!0,this.OAi=!0,this.FAi=!0}kn(){this.mn("Bnt",this.UAi),this.mn("Nnt",this.VAi)}constructor(t,i,e,s,n,r,h,o,a=[],u={},c={},d){super(),this.OO=void 0,this.WA=void 0,this.dYt=void 0,this.BAi=void 0,this.SQ=void 0,this.sb=void 0,this.hb=void 0,this.rJt=void 0,this.NAi=void 0,this.Zf=void 0,this.VYt=void 0,this.iYt=void 0,this.hu=void 0,this.ho=void 0,this.MAi=void 0,this.LAi=void 0,this.OAi=void 0,this.FAi=void 0,this.UAi=void 0,this.VAi=void 0,this.OO=t,this.WA=i,this.dYt=e,this.BAi=s,this.SQ=n,this.sb=r,this.hb=h,this.rJt=a,this.NAi=u,this.Zf=c,this.VYt=d,this.iYt=new utt,this.ho=!1,this.MAi=!1,this.LAi=!1,this.OAi=!1,this.FAi=!1,this.UAi=()=>this.Xyi(this.OO),this.VAi=()=>this.Xyi(this.PO),this.iYt.Sei(o),this.wn("Bnt",this.UAi),this.wn("Nnt",this.VAi)}};r(),r();var wtt=class extends Oi{xa(){return new ytt(this.od.Ca)}constructor(t){super("xnt"),this.od=void 0,this.od=t}},ytt=class extends wp{constructor(t){super("addadbreak"),this.adBreak=void 0,this.adBreak=t}};r();var Att=class extends Oi{xa(){return new btt(this.od.Ca)}constructor(t){super("Pnt"),this.od=void 0,this.od=t}},btt=class extends wp{constructor(t){super("removeadbreak"),this.adBreak=void 0,this.adBreak=t}},Stt=class extends C3{bei(t){this.So(new wtt(t))}Eei(t){this.So(new Att(t))}constructor(){super()}},Ttt=class{get Ca(){return this.hu||(this.hu=function(t){return{get adBreaks(){return t.A0t.Ca},get currentAdBreak(){if(t.ynt)return t.ynt.Ca},get currentAds(){return t.ynt?t.ynt.Jc.Ca:(new utt).Ca},skip(){t.rD()}}}(this)),this.hu}get A0t(){return this.X0t}get ynt(){return Jr(this.X0t.ec,t=>t.ro)}get mnt(){return this.ynt?this.ynt.Jc.ec.filter(t=>t.ro):[]}get HAi(){if(0===this.A0t.V||0===this.oa.Tx().length)return;const t=this.oa.Tx().end(this.oa.Tx().length-1);return Jr(this.A0t.ec,i=>i.Qut(t))}get Kyi(){return this.WAi}jyi(t){if(0===t.length)return;const i=ve.jn(t);for(const t of this.X0t.ec.slice())it(t.PO)&&i.Tn(0)>t.PO&&this.X0t._S(t)}qyi(t){const i=!function(t){return it(t.breakOffsets)}(t),e=i?this.Cyi.cAi:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+e;const n=new utt;let r=0;for(const e of s.ads){const s=i?mtt.RAi(t,e):mtt.IAi(t,e);n.lO(s),t+=s.ct,r+=s.ct}const h=s.timeOffset+e,o=i?void 0:s.duration,a=new ett(h,o,n,i,this.qAi);i&&this.zAi.push({zKt:a,Zxt:h+r}),this.X0t.lO(a)}}GAi(t){const i=this.HAi;i&&i.bAi(t+this.Cyi.cAi)}Gyi(t){this.XAi=t,this.X0t.ec.forEach(i=>i.EAi(t))}rD(){const t=this.XAi,i=this.ynt;t&&i&&i.kAi(t)&&i.rD()}skipAd(t){this.rD()}Yyi(t,i){const e=[];for(const s of this.A0t.ec)!s.SAi&&s.EO>=t&&s.EO<i&&e.push(s);return e}destroy(){this.oa.mn("timeupdate",this.jAi),this.Cyi.mn("oAi",this.QAi)}resetSource(){var t;for(const t of this.A0t.ec){for(const i of t.Jc.ec)i.Vo();t.Vo()}this.A0t.Gy(),null==(t=this.KAi)||t.removeAllAds(),this.XAi=void 0,this.zAi=[]}YAi(t){return Jr(this.KAi.ads,i=>i.creativeId===t.CAi)}constructor(t,i,e,s){var n;this.oa=void 0,this.Cyi=void 0,this.X0t=void 0,this.qAi=void 0,this.WAi=void 0,this.hu=void 0,this.XAi=void 0,this.zAi=[],this.KAi=void 0,this.JAi=t=>(this.KAi=t,this),this.QAi=t=>{t.oE.ads&&this.qyi(t.oE.ads),t.oE.currentBreakEnd&&this.GAi(t.oE.currentBreakEnd)},this.jAi=t=>{if(0===this.zAi.length||0===this.oa.Tx().length)return;const i=this.oa.Tx().end(this.oa.Tx().length-1);for(const t of this.zAi.slice())it(t.zKt.ct)?oi(this.zAi,t):t.Zxt<i&&(t.zKt.bAi(t.Zxt),oi(this.zAi,t))},this.jd=t=>{var i;const e=null==(i=this.KAi)?void 0:i.createAdBreak({timeOffset:t.od.EO,maxDuration:t.od.ct,customData:t.od});t.od.wn("Oyi",this.ZAi);for(const i of t.od.Jc.ec){var s,n;const r={type:"linear",timeOffset:i.EO,duration:i.ct,creativeId:i.CAi,skipOffset:t.od.JYt,clickThrough:null==(s=i.iAi)?void 0:s[0],customData:i};null==(n=this.KAi)||n.createAd(r,e),i.wn("Bnt",this.o9t),i.wn("Nnt",this.$Ai),i.wn("P4t",this.tbi),i.wn("x4t",this.ibi),i.wn("I4t",this.ebi),i.wn("xAi",this.bwi)}},this.ZAi=t=>{for(const s of t.od.Jc.ec){const t=this.YAi(s);var i,e;if(t)null==(i=this.KAi)||i.beginAd(t),null==(e=this.KAi)||e.skipAd(t)}},this.Td=t=>{for(const i of t.od.Jc.ec)i.Vo();t.od.Vo()},this.o9t=t=>{const i=this.YAi(t.Int);var e;i&&(null==(e=this.KAi)||e.beginAd(i))},this.$Ai=t=>{const i=this.YAi(t.Int);var e;i&&(null==(e=this.KAi)||e.endAd(i))},this.tbi=t=>{const i=this.YAi(t.Int);var e;i&&(null==(e=this.KAi)||e.updateAdProgress(i,.25))},this.ibi=t=>{const i=this.YAi(t.Int);var e;i&&(null==(e=this.KAi)||e.updateAdProgress(i,.5))},this.ebi=t=>{const i=this.YAi(t.Int);var e;i&&(null==(e=this.KAi)||e.updateAdProgress(i,.75))},this.bwi=t=>{const i=this.YAi(t.Int);var e;i&&(null==(e=this.KAi)||e.updateAdProgress(i,1))},this.oa=t,this.Cyi=i,this.X0t=new Stt,this.X0t.wn("xnt",this.jd),this.X0t.wn("Pnt",this.Td),this.qAi=e,this.WAi=s,t.wn("timeupdate",this.jAi),this.Cyi.wn("oAi",this.QAi),null==(n=this.oa.Jc)||n.Tnt(ru.UPLYNK,this.JAi)}};r(),r(),r();var ktt=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED",t}({}),Ett=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED",t}({}),Ptt=class t{static sbi(i,e,s){const n=new Vp(i.rating_flags);return new t(e,s,i.duration,Boolean(i.audio_only),i.boundary_details,Boolean(i.error),i.tv_rating,i.max_slice,i.thumb_prefix,i.slice_dur,i.movie_rating,i.owner,i.meta,i.rates,i.thumbs,i.poster_url,i.default_poster_url,i.desc,n.Oy(1),n.Oy(2),n.Oy(4),n.Oy(8),i.external_id,Boolean(i.is_ad),i.asset)}get Ca(){return this.hu||(this.hu=function(t){return{startTime:t.EO,endTime:t.PO,duration:t.ct,audioOnly:t.nbi,boundaryDetails:t.rbi,error:t.lt,tvRating:t.hbi,maxSlice:t.obi,thumbPrefix:t.abi,sliceDuration:t.ubi,movieRating:t.cbi,ownerId:t.dbi,metadata:t.DU,rates:t.lbi,thumbnailResolutions:t.fbi,posterUrl:t.vbi,defaultPosterUrl:t._bi,description:t.dB,hasAdultLanguage:t.gbi,hasSexualSituations:t.pbi,hasViolence:t.mbi,hasDrugSituations:t.wbi,externalId:t.ybi,isAd:t.Abi,assetId:t.bbi}}(this)),this.hu}constructor(t,i,e,s,n,r,h,o,a,u,c,d,l,f,v,_,g,p,m,w,y,A,b,S,T){this.EO=void 0,this.PO=void 0,this.ct=void 0,this.nbi=void 0,this.rbi=void 0,this.lt=void 0,this.hbi=void 0,this.obi=void 0,this.abi=void 0,this.ubi=void 0,this.cbi=void 0,this.dbi=void 0,this.DU=void 0,this.lbi=void 0,this.fbi=void 0,this.vbi=void 0,this._bi=void 0,this.dB=void 0,this.gbi=void 0,this.pbi=void 0,this.mbi=void 0,this.wbi=void 0,this.ybi=void 0,this.Abi=void 0,this.bbi=void 0,this.hu=void 0,this.EO=t,this.PO=i,this.ct=e,this.nbi=s,this.rbi=n,this.lt=r,this.hbi=h,this.obi=o,this.abi=a,this.ubi=u,this.cbi=c,this.dbi=d,this.DU=l,this.lbi=f,this.fbi=v,this.vbi=_,this._bi=g,this.dB=p,this.gbi=m,this.pbi=w,this.mbi=y,this.wbi=A,this.ybi=b,this.Abi=S,this.bbi=T}};var xtt=$h({duration:xt,offset:xt}),Itt=$h({c3:xtt}),Rtt=$h({c7:xtt}),Ctt=$h({halftime:xtt}),Dtt=lI(cI(Ett)),Btt=lI(cI(ktt)),Ntt=$h({width:Fs(Zh,xt),prefix:hi,bw:xt,bh:xt,height:Fs(Zh,xt)}),Mtt=$h({audio_only:xt,boundary_details:Fs(Zh,ln(Fs(Itt,Rtt,Ctt))),error:xt,tv_rating:Dtt,max_slice:xt,thumb_prefix:hi,slice_dur:xt,movie_rating:Btt,owner:hi,meta:Ns,rates:ln(xt),thumbs:ln(Ntt),poster_url:hi,duration:xt,default_poster_url:hi,desc:hi,rating_flags:xt,external_id:hi,is_ad:xt,asset:hi}),Ltt=class{async RSt(t,i,e,s){const n=function(t,i,e){if(I9.qH(i))return[Ott(t,i,e)];if(ln(I9).qH(i))return i.map(i=>Ott(t,i,e));if(R9.qH(i)){return(ul(i.externalId)?i.externalId:[i.externalId]).map(s=>Ott(t,"ext/"+i.userId+"/"+s,e))}throw new g("Invalid asset id")}(t,i,s),r=n.map(t=>$i(()=>this.hAi(t),e));return(await Promise.all(r)).filter(it)}async hAi(t){const i=this.nV.lk({Uk:X.GET,Yu:t,dk:M.DT}),e=await i,s=await e.ck();return Mtt.qH(s)||Mtt.GH(s,"AssetInfoResponse"),s}constructor(t){this.nV=void 0,this.nV=t}};function Ott(t,i,e){return e?t+"/player/assetinfo/"+i+".json?pbs="+e:t+"/player/assetinfo/"+i+".json"}r(),r();var Ftt=class extends Oi{xa(){return new Utt(this.pd.Ca)}constructor(t){super("Sbi"),this.pd=void 0,this.pd=t}},Utt=class extends wp{constructor(t){super("removeasset"),this.asset=void 0,this.asset=t}};r();var Vtt=class extends Oi{xa(){return new Htt(this.pd.Ca)}constructor(t){super("Tbi"),this.pd=void 0,this.pd=t}},Htt=class extends wp{constructor(t){super("addasset"),this.asset=void 0,this.asset=t}},Wtt=class extends C3{qyi(t,i){let e,s=0;for(const n of t){e=s+n.duration;for(const t of i)s<=t.EO&&t.EO<e&&(e+=t.ct||0);this.lO(Ptt.sbi(n,s,e)),s=e}}bei(t){this.So(new Vtt(t))}Eei(t){this.So(new Ftt(t))}constructor(){super()}};r(),r();var qtt=class extends Oi{xa(){return new ztt(this.oE)}constructor(t){super("kbi"),this.oE=void 0,this.oE=t}},ztt=class extends wp{constructor(t){super("preplayresponse"),this.response=void 0,this.response=t}};r();var Gtt=class extends Oi{xa(){return new Xtt(this.oE)}constructor(t){super("Ebi"),this.oE=void 0,this.oE=t}},Xtt=class extends wp{constructor(t){super("assetinforesponse"),this.response=void 0,this.response=t}},jtt=class extends _o{nAi(t){t&&this.So(new qtt(Ua(t)))}Wyi(t){t.forEach(t=>this.So(new Gtt(t)))}get Ca(){return this.hu||(this.hu=this.xa()),this.hu}xa(){let t;const i=this,e={get ads(){return i.Pyi.Ca},get assets(){return i.xyi.Ca},addEventListener(i,e){t.wn(i,e)},removeEventListener(i,e){t.mn(i,e)}};return t=new ws(i,e),e}constructor(t,i,e){super(),this.hu=void 0,this.Pyi=void 0,this.xyi=void 0,this.Cyi=void 0,this.Pyi=t,this.xyi=i,this.Cyi=e,e.wn("oAi",this.Rs),e.wn("aAi",this.Rs)}},Qtt=class{Pbi(t,i){const e=new C9(t.SP),s=new U9(t.SP),n=function(t){if(t.uplynk&&it(t.uplynk.defaultSkipOffset))return function(t){return ho(t)?t:-1}(t.uplynk.defaultSkipOffset);return-1}(i),r=function(t){var i,e;const s=null!=(e=null==(i=t.uplynk)?void 0:i.onSeekOverAd)?e:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(s)}(i),h=new z9(s,t),o=new G9(e,i),a=new Ttt(t,h,n,r),u=new Ltt(t.SP),c=new Wtt,d=new jtt(a,c,h);return new w9(t,h,o,a,d,u,c)}};VF(function(t){return class extends t{Ryi(t){super.Ta(t)}Dyi(t,i){return super.Xnt(t,i)}$yi(t){super.OP(t)}HP(){var t;return null!=(t=this.xbi.lt)?t:super.HP()}qP(){var t;return null!=(t=this.xbi.WP)?t:super.qP()}OP(t,i){this.xbi.OP(t)}Ta(t){this.xbi.Ta(t)}Xnt(t,i){return this.xbi.Xnt(t,i)}xa(){const t=this.xbi.Ca;return po(super.xa(),{get uplynk(){return t}})}kn(){this.xbi.kn(),super.kn()}constructor(t,i){super(t,i),this.xbi=void 0,this.xbi=(new Qtt).Pbi(this,i)}}},zo.rnt),r(),r(),r(),r();var bu=function(t){return t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error",t}({});r();var Ktt=class extends Ps{xa(){return _a(this)}get MZt(){return mt.W0t}get EO(){return this.OO}get NKt(){return this.mYt}constructor(t,i,e,s){super(t,i),this.mYt=void 0,this.OO=void 0,this.mYt=s,this.OO=e}};r();var Ytt=class extends Le{get SOt(){return this.Ibi}get MZt(){return mt.W0t}constructor(t,i,e){if(super(i),this.Ibi=void 0,this.J3t=t,this.Z3t=t,e){const t=new Date(e);Zf(t)&&(this.Ibi=t)}}},Jtt=class{OI(){this.oa.wn(Do.TM,this.IL),this.oa.wn(d.jw,this.oNt),this.oa.wn(d.uo,this.IXt),this.oa.wn(d.$w,this.Je),this.oa.wn(d.Bw,this.Eh),this.oa.wn(d._y,this.bd),this.oa.wn(d.gy,this.R2t),this.oa.wn(Ku.MODE_CHANGE,this.Rbi)}MI(){this.oa.mn(Do.TM,this.IL),this.oa.mn(d.jw,this.oNt),this.oa.mn(d.uo,this.IXt),this.oa.mn(d.$w,this.Je),this.oa.mn(d.Bw,this.Eh),this.oa.mn(d._y,this.bd),this.oa.mn(d.gy,this.R2t),this.oa.mn(Ku.MODE_CHANGE,this.Rbi)}get Cbi(){return this.Dbi}get mnt(){const t=this.Cbi;if(!t)return[];const i=[],e=this.Bbi();for(const s of t.Jc)e>=s.EO&&this.NNt<=s.EO+s.ct&&i.push(s);return i}Bbi(){return this.oa.LP()-this.Nbi}Mbi(){if(this.Lbi)return;if(this.oa.Nd()!==1/0)return void(0===this.Obi.length&&(this.Lbi=this.Fbi()));const t=()=>{var t;null==(t=this.Ubi)||t.zg(),this.Ubi=void 0,this.Lbi=void 0};this.Ubi=new at,this.Lbi=this.Vbi(this.Ubi.Yg).catch(this.e8).then(t,t)}async Hbi(){const t=_.min(1e3*2**this.Wbi,3e4);try{var i;await Er(t,null==(i=this.Ubi)?void 0:i.Yg),this.Wbi++}catch(t){if(D(t))return void(this.Wbi=0)}this.Mbi()}async Vbi(t){for(;ii(t),!this.oa.hx;){const i=zd.Mg()-this.qbi;if(i>1e4)await this.Fbi(t),this.qbi=zd.Mg(),this.Wbi=0;else{const e=1e4-i;await Er(e,t)}}}zbi(t){const i=t.SOt;if(i&&this.oa.CP&&0===this.Nbi&&!this.Gbi&&0!==_.floor(this.oa.Tx().start(0))){const e=(this.oa.CP.getTime()-i.getTime())/1e3,s=this.oa.LP()-t._Ot;this.Nbi=s-e}}async Fbi(t){try{const i=await this.oa.SP.lk({Yu:this.Xbi}),e=await i.FT(t);if(0===e.avails.length)return void(0!==this.Obi.length&&(this.Obi=[]));if(e.avails.length===this.Obi.length&&e.avails[0].startTimeInSeconds===this.Obi[0]._Ot)return void this.zbi(this.Obi[0]);const s=[];for(const t of e.avails){const i=new Ytt(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const e of t.ads){const t=new Ktt(i,bi.hZt,e.startTimeInSeconds,e.trackingEvents);t.u4t(e.adId,e.width,e.height,e.durationInSeconds,[],e.skipoffset),i.e4t(t)}s.push(i),this.zbi(i)}this.Obi=xe(s,(t,i)=>t._Ot-i._Ot)}catch(t){throw sa(t),new m("Failed to poll MediaTailor tracking events")}}jbi(){var t;null==(t=this.Ubi)||t.Zg(),this.Ubi=void 0,this.Lbi=void 0,this.qbi=-1/0}Qbi(){if(0===this.Obi.length)return;const t=this.Obi[this.Obi.length-1],i=this.Bbi();if(t._Ot+t.p0t<this.NNt){var e;this.Dbi&&(null==(e=this.oa.Jc)||e.So(new Fa(this.Dbi)),this.Dbi=void 0)}else{for(const t of this.Obi){const e=t._Ot;if(!(e+t.p0t<this.NNt)&&(e<=i&&e+t.p0t>this.NNt)){var s;if(this.Cbi===t)return;return this.Dbi=t,void(null==(s=this.oa.Jc)||s.So(new aU(this.Dbi)))}}var n;if(this.Dbi)null==(n=this.oa.Jc)||n.So(new Fa(this.Dbi)),this.Dbi=void 0}}Kbi(){const t=this.mnt;if(0===t.length)return;let i=[];for(const e of t){const t=e.NKt.filter(t=>pi(this.Ybi,t.eventType));i=i.concat(t)}for(const t of i)this.Jbi(t.startTimeInSeconds)&&(t.eventType===bu.COMPLETE&&this.Zbi(bu.ENGAGED_VIEW),this.$bi(t))}tSi(t,i){return i.NKt.filter(i=>Ih(i.eventType,t))[0]}Zbi(t){const i=this.mnt;if(0===i.length)return;const e=this.tSi(t,i[0]);e&&this.$bi(e)}$bi(t){this.zgi(t.eventType);for(const i of t.beaconUrls){const t={Uk:X.GET,Yu:i,zT:"",dk:M.DT};0,Wr(this.iSi(t))}}zgi(t){let i;const e=this.mnt;switch(t){case bu.START:i=new dc(e[e.length-1],this.oa.LP());break;case bu.COMPLETE:i=new bc(e[0],this.oa.LP());break;case bu.FIRST_QUARTILE:i=new _s(e[0],this.oa.LP());break;case bu.MID_POINT:i=new ks(e[0],this.oa.LP());break;case bu.THIRD_QUARTILE:i=new oe(e[0],this.oa.LP())}var s;void 0!==i&&(null==(s=this.oa.Jc)||s.So(i))}async iSi(t){const i=await this.oa.SP.lk(t);i.hk}Jbi(t){const i=this.Bbi();return t>=this.NNt&&t<i}kn(){this.MI(),this.jbi(),this.NNt=-1}constructor(t,i,e){this.oa=void 0,this.Xbi=void 0,this.qbi=-1/0,this.Dbi=void 0,this.Nbi=0,this.Obi=[],this.Gbi=void 0,this.Lwi=!1,this.mK=!1,this.NNt=-1,this.Ubi=void 0,this.Lbi=void 0,this.Wbi=0,this.IL=()=>{this.Mbi()},this.IXt=()=>{this.Zbi(bu.RESUME)},this.oNt=()=>{this.jbi(),this.Zbi(bu.PAUSE)},this.Je=()=>{this.jbi(),this.NNt=-1},this.Eh=()=>{this.jbi()},this.bd=()=>{-1===this.NNt&&(this.NNt=this.Bbi()),this.Qbi(),this.Kbi(),this.NNt=this.Bbi()},this.R2t=()=>{if(this.Lwi!==this.oa.$P){this.Lwi=this.oa.$P;const t=this.Lwi?bu.MUTE:bu.UNMUTE;this.Zbi(t)}},this.Rbi=()=>{if(this.mK!==this.oa.ds()){this.mK=this.oa.ds();const t=this.mK?bu.FULL_SCREEN:bu.EXIT_FULL_SCREEN;this.Zbi(t)}},this.e8=t=>{D(t)||(this.Zbi(bu.ERROR),Wr(this.Hbi()))},this.Ybi=[bu.START,bu.FIRST_QUARTILE,bu.MID_POINT,bu.THIRD_QUARTILE,bu.COMPLETE,bu.IMPRESSION,bu.CREATIVE_VIEW],this.oa=t,this.Xbi=i,this.Gbi=e,this.OI()}};VF(function(t){return class extends t{Ta(t){return this.eSi&&(this.eSi.kn(),this.eSi=void 0,this.pEt()),super.Ta(t)}async Xnt(t,i){if(!t||!function(t){return t.sources.some(t=>t.integration===GT.MEDIATAILOR)}(t))return super.Xnt(t,i);try{const e=await this.sSi(t,i);this.nSi=new x2(this),await super.Xnt(e,i)}catch(t){this.qq(new Ga(Vo.MANIFEST_LOAD_ERROR,t.message,t))}}vx(t){var i;(null==(i=this.nSi)?void 0:i.inAdBreak)||super.vx(t)}OP(t,i){var e;(null==(e=this.eSi)?void 0:e.Cbi)||super.OP(t,i)}HP(){var t;return null!=(t=this.JW)?t:super.HP()}qP(){var t;return null!=(t=this.ZW)?t:super.qP()}qq(t){this.JW=P(t),this.ZW=t,this.So(new Pi(t))}pEt(){this.JW=void 0,this.ZW=void 0}async sSi(t,i){const e=[];for(const s of t.sources){if(!ek(s)){e.push(s);continue}const t=s;if(!t.src){e.push(s);continue}const n=await this.rSi(t,i);ii(i);const r=Mo({},t,{integration:void 0,src:n});e.push(r)}const s=Ua(t);return s.sources=e,s}async rSi(t,i){const e=t.src||"",s=e.match(/.+?(?=\/v1\/)/);if(!s)throw new m("Could not find MediaTailor session initialization url");const n=s[0],r=Ho(e,"?ads."),h=r?{Yu:e,dk:M.DT}:{Yu:e,Uk:X.POST,zT:JSON.stringify({adsParams:t.adsParams}),dk:M.DT},o=await $i(()=>this.hSi(h,i),i);let a;try{if(a=n+o.manifestUrl,!r){const t=n+o.trackingUrl,i=function(t){return!!t&&/\bmpd\b/i.test(t)}(a);this.eSi=new Jtt(this,t,i)}}catch(t){throw new m("Something went wrong parsing the MediaTailor session initialization response")}return a}async hSi(t,i){try{const e=await this.SP.lk(t);return await e.FT(i)}catch(t){throw sa(t),new m("Failed to initialize MediaTailor session manifest")}}kn(){var t;this.eSi&&(this.eSi.kn(),this.eSi=void 0),this.pEt(),null==(t=this.nSi)||t.destroy(),this.nSi=void 0,super.kn()}constructor(t,i){super(t,i),this.eSi=void 0,this.JW=void 0,this.ZW=void 0,this.nSi=void 0}}},zo.hnt),r(),r(),r(),r(),r();var Da=function(t){return t[t.oSi=0]="oSi",t[t.TM=1]="TM",t[t.Gz=2]="Gz",t[t.aSi=3]="aSi",t[t.uSi=4]="uSi",t[t.cSi=5]="cSi",t[t.ma=6]="ma",t}({});r();var Ztt=class extends Ne{get XI(){}get Rt(){return this.We}set Rt(t){this.wO(t)}get Ca(){var t;return null!=(t=this.hu)?t:this.hu=fo(this)}get o(){return String(this.vu.componentTag)||"hbbtvaudiotrack"}get Lt(){return this.b5}get Th(){return this.pO}get bs(){return""}get Xk(){return this.Rt?"enabled":"disabled"}set Xk(t){this.wO("enabled"===t)}get KI(){return this.dO}get YI(){}set YI(t){}get jI(){return this.gO}wO(t){this.We=t,t?this.sMt.dSi(this.vu):this.sMt.lSi(this.vu)}constructor(t,i,e,s,n=!1){super(),this.gO=ki(),this.dO=new Uk,this.vu=void 0,this.pO=void 0,this.b5=void 0,this.hu=void 0,this.sMt=void 0,this.We=void 0,this.vu=t,this.pO=i,this.b5=e,this.We=n,this.sMt=s}};r(),r(),r();var $tt=function(t){return t.qm="urn:dvb:casystemid:19219",t.zm="urn:dvb:casystemid:19156",t}({}),tit=function(t){return t.qm="application/vnd.ms-playready.initiator+xml",t.zm="application/widevine+xml",t}({});function iit(t,i,e){switch(t){case"urn:dvb:casystemid:19219":return function(t){return'<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><LicenseServerUriOverride><LA_URL>'+(null!=t?t:"")+"</LA_URL></LicenseServerUriOverride></PlayReadyInitiator>"}(i);case"urn:dvb:casystemid:19156":if(!e)throw new m("Content URL is needed for Widevine license request");return function(t,i){return'<?xml version="1.0" encoding="utf-8"?><WidevineCredentialsInfo xmlns="http://www.smarttv-alliance.org/DRM/widevine/2012/protocols/"><ContentURL>'+n0(null!=i?i:"")+"</ContentURL><DeviceID></DeviceID><StreamID></StreamID><ClientIP></ClientIP><DRMServerURL>"+n0(null!=t?t:"")+"</DRMServerURL><DRMAckServerURL></DRMAckServerURL><DRMHeartBeatURL></DRMHeartBeatURL><DRMHeartBeatPeriod></DRMHeartBeatPeriod><UserData></UserData><Portal></Portal><StoreFront></StoreFront><BandwidthCheckURL></BandwidthCheckURL><BandwidthCheckInterval></BandwidthCheckInterval></WidevineCredentialsInfo>"}(i,e);default:throw new m("DRM key system is not supported")}}var eit=class extends PL{fSi(t){this.vSi(),this.Tu=t}async _Si(t){if(!t.aq.length)return void this.vSi();if(!this.Tu)throw new m("The OIPF DRM agent has to be attached to the DOM");let i;this.gSi||(this.gSi=h.createElement("object"),this.gSi.type="application/oipfDrmAgent",this.Tu.appendChild(this.gSi),this.gSi.onDRMMessageResult=this.pSi,this.gSi.onDRMRightsError=this.mSi,this.wSi=h.createElement("object"),this.wSi.type="application/oipfCapabilities",this.Tu.appendChild(this.wSi));for(const e of t.aq){let s,n,r;if(e.kS===Zg)s=$tt.qm,n=tit.qm,r=iit($tt.qm,e.NW);else{if(e.kS!==xi)continue;s=$tt.zm,n=tit.zm,r=iit($tt.zm,e.NW,t.iR)}try{return await this._et(n,r,s),void this.So(new un)}catch(t){i=t}}i&&this.So(new wL(i))}zg(){return this.ySi=void 0,this.Tu=void 0,super.zg()}_et(t,i,e){var s,n;return this.ySi=new pa,this.ASi=null==(n=this.gSi)||null==(s=n.sendDRMMessage)?void 0:s.call(n,t,i,e),this.ASi||null==this.ySi.jy||this.ySi.jy.call(this.ySi,new fs(Vo.CONTENT_PROTECTION_INTERNAL_ERROR,"No DRM message returned by OIPF DRM agent")),this.ySi.Qy}bSi(t){switch(t){case 5:return Vo.CONTENT_PROTECTION_NOT_SUPPORTED;case 2:case 1:case 3:case 4:case 6:return Vo.CONTENT_PROTECTION_INTERNAL_ERROR;default:return Vo.CONTENT_PROTECTION_ERROR}}SSi(t){switch(t){case 2:return"The DRM agent was unable to complete the request";case 3:return"The specified MIME type is unknown for the specified DRM system";case 4:return"User consent is needed for that action";case 5:return"The specified DRM System is unknown";case 6:return"The license message has the wrong format";default:return"Unspecified error occurred"}}TSi(t){return 0===t?Vo.CONTENT_PROTECTION_LICENSE_ERROR:1===t?Vo.CONTENT_PROTECTION_LICENSE_INVALID:Vo.CONTENT_PROTECTION_ERROR}kSi(t){switch(t){case 0:return"No license, consumption of the content is blocked";case 1:return"Invalid license, consumption of the content is blocked";case 2:return"Valid license, consumption of the content is unblocked";default:return"Unknown error occurred"}}vSi(){this.gSi&&(os(this.gSi),this.gSi=void 0),this.wSi&&(os(this.wSi),this.wSi=void 0)}async b8(t,i,e){}constructor(...t){super(...t),this.gSi=void 0,this.wSi=void 0,this.Tu=void 0,this.ASi=void 0,this.ySi=void 0,this.pSi=(t,i,e)=>{var s,n,r,h;if(0===e)return void(null==(h=this.ySi)||null==(r=h.Xy)||r.call(h,t));const o=this.bSi(e),a=this.SSi(e),u=new fs(o,a);null==(n=this.ySi)||null==(s=n.jy)||s.call(n,u)},this.mSi=(t,i,e,s)=>{const n=this.TSi(t),r=this.kSi(t),h=new fs(n,r);this.So(new wL(h))}}};r();var sit=class{get Sx(){return ve.tL(0,this.TL.ct)}get mx(){return q.lz}set mx(t){}get Cd(){return this.YS}TZ(t){return!1}EZ(t){return Xr.resolve(void 0)}async _Si(t){await this.PZ._Si(this.YS)}zg(){return Xr.resolve(void 0)}constructor(t,i,e){this.YS=void 0,this.TL=void 0,this.PZ=void 0,this.YS=t,this.TL=i,this.PZ=e}},nit=class extends Ne{get IP(){return ve.iL()}get CP(){}get nq(){}get Wu(){return this.sc}get Sx(){var t,i;return null!=(i=null==(t=this.iq)?void 0:t.Sx)?i:ve.iL()}get kx(){return this.Sz}get a5(){return!1}get KP(){return!1}get CL(){return Mo({},wB)}get lt(){return this.JW}get n5(){return!1}get Ma(){return this.ha}get R9(){return!0}get Y4(){return!1}get Vx(){return!0}set Vx(t){}get Ql(){return this.Dz}get nt(){return this.B7}get i7(){return this.yz}get mq(){return this.ea}B9(t){this.PZ.fSi(t),this.eet.B9(t)}QZ(t){for(const i of t)if(i.Km===Zr.mV)return i}async Un(t){if(this.iq)throw new m("Already loaded a media source");if(t.Km===Zr.mV)return this.iq=new sit(t,this,this.PZ),await this.iq._Si(t),this.iq;throw new m("Unsupported media source configuration for HbbTV")}async ESi(t){await this.PSi()}async Gx(){await this.PSi()}KW(t){}async hr(){this.iq=void 0,this.xSi=void 0}async C8(){throw new g("Not supported")}async zg(){await this.hr(),this.Gl.kn(),this.B7.kn(),this.eet.kn(),this.net.kn(),this.PZ.mn(Du,this.Rs),await this.PZ.zg()}be(){this.yz=!0,this.eet.be()}we(){this.yz=!1,this.eet.we()}vq(){return!1}gq(t,i,e,s,n){throw new m("Adding native sideloaded text tracks is not supported on HbbTV")}x9(){}I9(){}D9(){}ZP(){return{iO:0,eO:0,sO:0}}Yx(){}wq(t){throw new m("Adding custom text tracks is not supported on HbbTV")}Wx(){}tI(t,i,e,s,n,r,h,o,a){const u=new gM(t,i,e,s,n,r,h,a,o);return this.Gl.tt(u),this.N7.tt(u),u}Aq(){for(const t of this.Gl.II.slice())t.kn();this.Gl.hr()}iV(t){this.Gl.it(t),this.N7.it(t)}ISi(){const t=h.getElementsByTagName("object");for(let i=0;i<t.length;i++){const e=t.item(i);if("video/broadcast"===e.type){const t=e;return t.onPlayStateChange=this.RSi,0===t.playState&&(null==t.bindToCurrentChannel||t.bindToCurrentChannel.call(t)),t}}}PSi(){var t,i;if(!this.CSi||3===this.CSi.playState||0===this.CSi.playState)return Promise.resolve("");if(null==(t=this.xSi)?void 0:t.Qy)return null==(i=this.xSi)?void 0:i.Qy;this.xSi=new pa;try{null==this.CSi.stop||this.CSi.stop.call(this.CSi)}catch(t){zd.dm("Unable to stop broadcast for HbbTV",t),this.xSi.jy(new m("Unable to stop broadcast for HbbTV"))}return this.xSi.Qy}constructor(t,i){super(),this.sc=void 0,this.Dz=void 0,this.PZ=void 0,this.ha=void 0,this.ea=void 0,this.CSi=void 0,this.Gl=void 0,this.B7=void 0,this.N7=void 0,this.eet=void 0,this.net=void 0,this.iq=void 0,this.Sz=void 0,this.JW=void 0,this.EV=void 0,this.yz=void 0,this.xSi=void 0,this.RSi=void 0,this.sc=t,this.Dz=i,this.ha=new ls,this.ea=new aR,this.Gl=new cc,this.iq=void 0,this.Sz=!1,this.JW=void 0,this.EV=mh.VL,this.yz=!0,this.xSi=void 0,this.RSi=()=>{var t,i,e,s;(null==(t=this.CSi)?void 0:t.playState)&&((null==(i=this.xSi)?void 0:i.Qy)||2!==this.CSi.playState||this.PSi().catch(Ct),3===this.CSi.playState&&(null==(s=this.xSi)||null==(e=s.Xy)||e.call(s,String(this.CSi.playState)),this.xSi=void 0))},this.PZ=new eit(this),this.PZ.wn(Du,this.Rs),this.B7=new Yu([this.Gl]),this.N7=new hu(this),this.eet=new XL,this.net=new vF(this.eet.xe,this.Wu,this.nt,this.Ql,this.Ma,this.mq),this.CSi=this.ISi(),this.PSi().catch(Ct)}},rit=class extends nit{get $W(){}get ht(){return this.YL}get rt(){return this.$L}get ux(){return this.Ez}set ux(t){this.Ez=t,this.hx||this.DSi.play(t)}get $P(){return this.DSi.muted}set $P(t){this.DSi.muted=t}get Mx(){var t,i;return(null!=(i=null!=(t=this.DSi.volume)?t:null==this.DSi.getVolume?void 0:this.DSi.getVolume.call(this.DSi))?i:100)/100}set Mx(t){null==this.DSi.setVolume||this.DSi.setVolume.call(this.DSi,100*t)}get MP(){return this.DSi.playPosition?this.DSi.playPosition/1e3:0}get ct(){return!this.DSi.playTime||this.DSi.playTime<0?1/0:this.DSi.playTime/1e3}get UP(){return this.DSi.playState===Da.cSi}get Mi(){return this.DSi.offsetHeight*zd.Zs.fp}get Ti(){return this.DSi.offsetWidth*zd.Zs.fp}get hx(){return this.DSi.playState===Da.Gz}get _x(){return ve.iL()}get Ax(){return this.t5}get Rx(){return 0}get Bx(){return 0}B9(t){super.B9(t),t.appendChild(this.DSi)}async Un(t){if(t.Km===Zr.mV){const i=await super.Un(t);return await this.ESi(t),this.DSi.onPlayStateChange=this.BSi,i}throw new m("Unsupported media source configuration for HbbTV")}async ESi(t){this.DSi.type=_u(t.iR),this.DSi.data=t.iR,await super.ESi(t)}async Gx(){await super.Gx(),this.DSi.play(this.Ez),this.So(new Tc(this.MP))}zx(){this.DSi.play(0),this.So(new hl(this.MP))}My(t,i,e){this.DSi.seek(1e3*t),this.Sz=!0,this.So(new F(this.MP))}async hr(){void 0!==this.iq&&this.DSi.stop(),this.NSi&&(zd.vm(this.NSi),this.NSi=void 0),await super.hr(),Yd(this.DSi),this.DSi.data&&this.DSi.removeAttribute("data"),this.YL.hr(),this.$L.hr()}async zg(){await super.zg(),os(this.DSi)}be(){super.be(),this.DSi.style.display="block"}we(){super.we(),this.DSi.style.display="none"}dSi(t){const i=this.MSi(t);if(!i)throw new m("Selected track does not exist on HbbTV");null==this.DSi.selectComponent||this.DSi.selectComponent.call(this.DSi,i)}lSi(t){const i=this.MSi(t);if(!i)throw new m("Selected track does not exist on HbbTV");null==this.DSi.unselectComponent||this.DSi.unselectComponent.call(this.DSi,i)}MSi(t){var i;const e=null!=(i=null==this.DSi.getComponents?void 0:this.DSi.getComponents.call(this.DSi,t.type))?i:this.LSi();return this.OSi(e,t)}FSi(t){var i;const e=null!=(i=null==this.DSi.getCurrentActiveComponents?void 0:this.DSi.getCurrentActiveComponents.call(this.DSi,1))?i:this.LSi();this.YL.hr();for(let i=0;i<t.length;i++){const s=t.item(i);this.YL.tt(new Ztt(s,s.language,this.YL.V?mn.qCt:mn.zCt,this,this.USi(e,s)))}}VSi(t){var i;const e=null!=(i=null==this.DSi.getCurrentActiveComponents?void 0:this.DSi.getCurrentActiveComponents.call(this.DSi,0))?i:this.LSi();this.$L.hr();for(let i=0;i<t.length;i++){const s=t.item(i);this.$L.tt(new Ztt(s,String(s.aspectRatio),this.$L.V?Ca.qCt:Ca.zCt,this,this.USi(e,s)))}}LSi(){return{length:0,item:t=>{}}}USi(t,i){return void 0!==this.OSi(t,i)}OSi(t,i){for(let e=0;e<t.length;e++){const s=t.item(e);if(this.HSi(s,i))return s}}HSi(t,i){return t.pid===i.pid&&t.componentTag===i.componentTag&&t.type===i.type&&t.encoding===i.encoding&&t.encrypted===i.encrypted}WSi(t){switch(t){case 0:return Bk.SRC_NOT_SUPPORTED;case 1:case 5:case 6:return Bk.NETWORK;default:return Bk.DECODE}}constructor(t,i,e){super(i,e),this.DSi=void 0,this.Ez=void 0,this.qSi=void 0,this.zSi=void 0,this.YL=void 0,this.$L=void 0,this.t5=void 0,this.GSi=void 0,this.NSi=void 0,this.BSi=void 0,this.XSi=void 0,this.DSi=t,this.Ez=1,this.YL=new rs,this.$L=new rs,this.t5=mh.VL,this.GSi=void 0,this.NSi=void 0,this.BSi=()=>{if(!this.DSi.playState)return;this.EV=this.t5,this.qSi=this.zSi,this.zSi=this.DSi.playState;const t=this.ct;switch(t!==this.GSi&&(this.So(new Rs(t)),this.GSi=t),this.NSi&&this.zSi!==Da.TM&&(zd.vm(this.NSi),this.NSi=void 0),this.zSi){case Da.aSi:this.t5=mh.VL;break;case Da.uSi:if(this.qSi===Da.aSi){var i;const t=null!=(i=null==this.DSi.getComponents?void 0:this.DSi.getComponents.call(this.DSi,1))?i:this.LSi();var e;const s=null!=(e=null==this.DSi.getComponents?void 0:this.DSi.getComponents.call(this.DSi,0))?e:this.LSi();if(0===t.length&&0===s.length)break;this.FSi(t),this.VSi(s)}this.t5=mh.Qn;break;case Da.TM:this.Sz&&(this.Sz=!1,this.So(new Es(this.MP))),this.So(new ce(this.MP)),this.t5=mh.WL,this.NSi=zd.fm(this.XSi,250);break;case Da.ma:this.t5=mh.VL,this.So(new eu(new Nk(this.WSi(this.DSi.error))));break;case Da.cSi:this.So(new At(this.MP));case Da.Gz:case Da.oSi:}this.t5!==this.EV&&this.So(new ou(this.MP,this.t5))},this.XSi=()=>{this.So(new Si(this.MP,void 0))}}};r();var hit=class extends nit{get $W(){return this._T}get ht(){return this.YL}get rt(){return this.$L}get ux(){return this._T.playbackRate}set ux(t){this._T.playbackRate=t}get $P(){return this._T.muted}set $P(t){this._T.muted=t}get Mx(){return this._T.volume}set Mx(t){this._T.volume=t}get MP(){return this._T.currentTime}get ct(){return this._T.duration}get UP(){return this._T.ended}get Mi(){return this._T.offsetHeight*zd.Zs.fp}get Ti(){return this._T.offsetWidth*zd.Zs.fp}get hx(){return this._T.paused}get _x(){return ve.jn(this._T.played)}get Ax(){return this.Q8.Ax}get Rx(){return this._T.videoHeight}get Bx(){return this._T.videoWidth}B9(t){super.B9(t),t.appendChild(this._T)}async Un(t){if(t.Km===Zr.mV){const i=await super.Un(t);return await this.ESi(t),i}throw new m("Unsupported media source configuration for HbbTV")}async ESi(t){switch(t.cq){case Xh.aR:case Xh.uR:this._T.setAttribute("crossorigin",t.cq);break;case Xh.Lk:default:this._T.removeAttribute("crossorigin")}void 0!==t.mx?this._T.preload=t.mx:this._T.preload=q.TW,void 0!==t.dq?this._T.title=t.dq:Fl(this._T);const i=this.ux;this._T.src=t.iR,this.ux=i,await super.ESi(t)}async Gx(){await super.Gx(),await this._T.play()}zx(){this._T.pause()}My(t,i,e){i&&this._T.fastSeek?this._T.fastSeek(t):this._T.currentTime=t,this.Sz=!0,this.So(new F(this.MP))}async hr(){await super.hr(),Yd(this._T),this._T.src&&this._T.removeAttribute("src"),this.YL.hr(),this.$L.hr()}async zg(){await super.zg(),this.d7.zg(),this.Q8.zg(),this.o9(),this.Tq(),os(this._T)}be(){super.be(),this._T.style.display="block",this._T.style.height="100%",this._T.style.width="100%"}we(){super.we(),this._T.style.display="none"}n9(){this.$W.addEventListener("play",this.LV),this.$W.addEventListener("pause",this.OV),this.$W.addEventListener("timeupdate",this.Nc),this.$W.addEventListener("progress",this.jSi),this.$W.addEventListener("loadstart",this.As),this.$W.addEventListener("ended",this.Ec),this.$W.addEventListener("ratechange",this.QSi),this.$W.addEventListener("volumechange",this.DXt),this.$W.addEventListener("durationchange",this.xXt),this.$W.addEventListener("loadedmetadata",this.KSi),this.$W.addEventListener("emptied",this.YSi),this.$W.addEventListener("seeked",this.JSi),this.$W.addEventListener("seeking",this.ZSi),this.$W.addEventListener("error",this.$Si),vp()&&this.$W.addEventListener("encrypted",this.D8)}o9(){this.$W.removeEventListener("play",this.LV),this.$W.removeEventListener("pause",this.OV),this.$W.removeEventListener("timeupdate",this.Nc),this.$W.removeEventListener("progress",this.jSi),this.$W.removeEventListener("loadstart",this.As),this.$W.removeEventListener("ended",this.Ec),this.$W.removeEventListener("ratechange",this.QSi),this.$W.removeEventListener("volumechange",this.DXt),this.$W.removeEventListener("durationchange",this.xXt),this.$W.removeEventListener("loadedmetadata",this.KSi),this.$W.removeEventListener("emptied",this.YSi),this.$W.removeEventListener("seeked",this.JSi),this.$W.removeEventListener("seeking",this.ZSi),this.$W.removeEventListener("error",this.$Si),this.$W.removeEventListener("encrypted",this.D8)}qq(t){this.JW=t,this.So(new eu(this.JW))}Lq(){const t=this._T.audioTracks,i=this._T.videoTracks;t&&(t.addEventListener("addtrack",this.tTi),t.addEventListener("removetrack",this.iTi),t.addEventListener("change",this.eTi)),i&&(i.addEventListener("addtrack",this.sTi),i.addEventListener("removetrack",this.nTi),i.addEventListener("change",this.rTi))}Tq(){const t=this._T.audioTracks,i=this._T.videoTracks;t&&(t.removeEventListener("addtrack",this.tTi),t.removeEventListener("removetrack",this.iTi),t.removeEventListener("change",this.eTi)),i&&(i.removeEventListener("addtrack",this.sTi),i.removeEventListener("removetrack",this.nTi),i.removeEventListener("change",this.rTi))}dh(t){for(let i=0;i<t.V;i++){t.CI(i).yO()}}constructor(t,i,e){super(i,e),this._T=void 0,this.YL=void 0,this.$L=void 0,this.Q8=void 0,this.d7=void 0,this.hTi=void 0,this.LV=void 0,this.OV=void 0,this.Nc=void 0,this.jSi=void 0,this.As=void 0,this.Ec=void 0,this.QSi=void 0,this.DXt=void 0,this.xXt=void 0,this.KSi=void 0,this.YSi=void 0,this.JSi=void 0,this.ZSi=void 0,this.FV=void 0,this.MV=void 0,this.$Si=void 0,this.D8=void 0,this.sTi=void 0,this.nTi=void 0,this.rTi=void 0,this.tTi=void 0,this.iTi=void 0,this.eTi=void 0,this._T=t,this.YL=new rs,this.$L=new rs,this.hTi=void 0,this.LV=()=>{this.So(new Tc(this.MP))},this.OV=()=>{this.So(new hl(this.MP))},this.Nc=()=>{const t=this.MP,i=this.kx,e=void 0!==this.hTi,s=e&&this.hTi!==t;(i||!e||s)&&(this.So(new Si(t,void 0)),this.hTi=t)},this.jSi=()=>{this.So(new H(this.MP))},this.As=()=>{this.So(new Pt)},this.Ec=()=>{this.So(new At(this.MP))},this.QSi=()=>{this.So(new aa(this.MP,this.ux))},this.DXt=()=>{this.So(new Ze(this.MP,this.Mx))},this.xXt=()=>{this.So(new Rs(this.ct))},this.KSi=()=>{},this.YSi=()=>{},this.JSi=()=>{this.Sz&&(this.Sz=!1),this.So(new Es(this.MP))},this.ZSi=()=>{this.So(new F(this.MP))},this.FV=t=>{this.EV!==t.readyState&&(this.EV=t.readyState,this.So(t))},this.MV=()=>{this.So(new ce(this.MP))},this.$Si=()=>{if(null!==this._T.error){const i=this._T.error;var t;this.qq(new Nk(null!=(t=i.code)?t:Bk.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.D8=t=>{this.So(new Tp(t.initDataType,t.initData||new ArrayBuffer(0)))},this.sTi=t=>{const i=this._T.videoTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];JI(this.$L,e)||this.$L.tt(new Yk(e))}},this.nTi=t=>{const i=[],e=this._T.videoTracks;if(e){for(const t of this.$L.II)ZI(e,t.mO)||i.push(t);for(const t of i)this.$L.it(t)}},this.rTi=t=>{this.dh(this.$L)},this.tTi=t=>{const i=this._T.audioTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];JI(this.YL,e)||this.YL.tt(new Qk(e))}},this.iTi=t=>{const i=[],e=this._T.audioTracks;if(e){for(const t of this.YL.II)ZI(e,t.mO)||i.push(t);for(const t of i)this.YL.it(t)}},this.eTi=t=>{this.dh(this.YL)},this.Q8=new IL(this),this.Q8.wn(Do.wI,this.FV),this.Q8.N8(new YN(this)),this.d7=new iM(this),this.d7.wn(Do.TM,this.MV),this.n9(),this.Lq()}},oit=[d.uo,d.jw,Do.TM,d.$w,d.Zw,d.Bw,d.Rw,d.Pw,d.Ew,d._y,d.Qw,d.Ww,d.Kw,d.gy,d.Jw,d.Lw,d.Nw],ait=class extends Ne{get ht(){return this.TL.ht}get IP(){return this.TL.IP._s()}get BL(){}get CP(){return this.TL.CP}set CP(t){t&&this.TL.KW(t)}get bt(){return this.Ac}get MP(){return this.TL.MP}set MP(t){this.TL.My(t)}get hq(){return this.oq}get ct(){return this.TL.ct}get UP(){return this.TL.UP}get WP(){return this.ZW}get lt(){return this.JW}get zP(){}get jP(){}get KP(){return!1}get Vx(){return this.TL.Vx}set Vx(t){this.TL.Vx=t}get Fx(){return this.Cz}get JP(){return Mo({},{iO:0,eO:0,sO:0,nO:0,rO:0,hO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.TL.ZP())}get $P(){return this.TL.$P}set $P(t){this.TL.$P=t}get sx(){return!0}get hx(){return this.TL.hx}get ux(){return this.TL.ux}set ux(t){this.TL.ux=t}get _x(){return this.TL._x._s()}get mx(){return this.tq}set mx(t){this.tq=t,this.iq&&(this.iq.mx=t)}get Ax(){return this.TL.Ax}get Sx(){return this.TL.Sx._s()}get kx(){return this.TL.kx}get nq(){return this.TL.nq}get nt(){return this.Gl}get Rx(){return this.TL.Rx}get rt(){return this.TL.rt}get Bx(){return this.TL.Bx}get Mx(){return this.TL.Mx}set Mx(t){this.TL.Mx=t}tI(t){return this.TL.wq(t)}jx(){return!1}Hx(){return this.TL.Ma}Wx(){}we(){this.TL.we()}Yx(){this.TL.Yx()}zx(){this.TL.zx()}async Gx(){await this.TL.Gx()}Jx(){throw new m("Recreate media source is not supported on HbbTV")}OP(t,i){this.TL.My(t)}async Ta(t,i,e){var s;ii(e),this.Ac=t;const n={Km:Zr.mV,iR:t.src,qT:t.type,aq:this.uq(t),mx:this.tq,cq:t.crossOrigin,dq:null==(s=i.metadata)?void 0:s.title};this.iq=await this.TL.Un(n),i.textTracks&&this.fq(i.textTracks),Ds(this.nt)}Px(t,i,e,s){return Promise.resolve()}xx(){return Promise.resolve()}be(){this.TL.be()}Qx(){}Kx(){}Aa(){return this.TL.mq}async hr(){this.Ac=void 0,this.JW=void 0,this.ZW=void 0,this.iq=void 0,await this.pq.hr(),this.TL.Aq(),await this.TL.hr()}async kn(){await this.hr(),this.bq.kn(),this.kq.zg(),this.TL.mn(oit,this.Rs),this.TL.mn(Mc.ma,this.Dq),await this.TL.zg(),this.gn.kn(),this.Gl.kn(),await this.pq.kn()}qq(t,i){this.JW||(this.JW=i,this.ZW=t,this.So(new Pi(t)))}fq(t){for(const i of t)void 0!==i.src&&this.pq.eV(i)}uq(t){if(!t.contentProtection)return[];const i=[];return t.contentProtection.widevine&&i.push({kS:xi,NW:t.contentProtection.widevine.licenseAcquisitionURL,Mq:[]}),t.contentProtection.playready&&i.push({kS:Zg,NW:t.contentProtection.playready.licenseAcquisitionURL,Mq:[]}),this.oTi(i,t.contentProtection.preferredKeySystems)}oTi(t,i){if(void 0===i||0===i.length)return t;const e=t=>{const e=i.indexOf(t.kS.$m);return e>=0?e:i.length};return xe(t,(t,i)=>e(t)-e(i))}constructor(t,i,e,s){super(),this.gn=void 0,this.TL=void 0,this.iq=void 0,this.Gl=void 0,this.oq=new To,this.Cz=void 0,this.kq=void 0,this.bq=void 0,this.pq=void 0,this.Ac=void 0,this.JW=void 0,this.ZW=void 0,this.tq=q.lz,this.Dq=t=>{const i=t.lt,e=i.code,s=new Ga(Fk(e),"Something went wrong during HbbTV playback.",i),n=P(s);this.qq(s,n)},this.gn=new Oe(t),this.gn._n(),this.TL=Pf()?new hit(h.createElement(Ci.Bk),this.gn,s):new rit(h.createElement("object"),this.gn,s),this.TL.B9(t),this.TL.wn(oit,this.Rs),this.TL.wn(Mc.ma,this.Dq),this.kq=new dx(this,this.TL),this.bq=new bs(this.kq,!0),this.bq.wn(K,this.Rs),this.pq=new Kh(this.TL,i),this.Gl=new Yu([this.TL.nt,this.pq.Z]),this.Cz=e}};cs(new class{PR(t,i,e,s,n,r,h,o){return new ait(t,e,r,h)}Xq(t,i){var e;return!(!Qt.k_||t.type!==Ba.fR&&!ZT(t.type)&&!$T(t.type))&&!(Pf()&&!(null==(e=t.contentProtection)?void 0:e.useOipfDrmAgent)&&(!t.contentProtection||vp()))}async jq(t){return!!await kT(t,!0)}Qq(){return!1}constructor(){this.Kq=V.vW}});export{Io as a,f as b,r as c,Qt as d,it as e,ul as f,Lu as g,Z as h,os as i,Zd as j,Il as k,fi as l,Rl as m,Dl as n,oa as o,Fl as p,Ul as q,zd as r,Ct as s,ph as t,mu as u,xe as v,ur as w,Qc as x,gu as y,Jr as z,oi as A,pi as B,Yo as C,ii as D,Wr as E,fv as F,vv as G,Sg as H,Mo as I,Ho as J,dp as K,Ne as L,wp as M,d as N,Vo as O,Je as P,oS as Q,po as R,_t as S,aS as T,Zn as U,co as V,Lk as W,Zu as X,rn as Y,xh as Z,Ao as _,HP as $,qP as aa,mh as ba,ux as ca,zo as da,VF as ea,zF as fa,ve as ga,sk as ha,G as ia,Rs as ja,tc as ka,mk as la,Ak as ma,Gi as na,Yr as oa,QR as pa,Is as qa,Rh as ra,$C as sa,hD as ta,Oe as ua,cD as va,Tt as wa,lD as xa,Ku as ya,gD as za,pD as Aa,yD as Ba,Pt as Ca,sO as Da,nO as Ea,rO as Fa,oO as Ga,aO as Ha,uO as Ia,MO as Ja,LO as Ka,OO as La,FO as Ma,Xu as Na,MF as Oa,LF as Pa,jF as Qa,_U as Ra,gU as Sa,pU as Ta,mU as Ua,bU as Va,SU as Wa,TU as Xa,EH as Ya,PH as Za,mt as _a,N1 as $a,z1 as ab,u2 as bb,C6 as cb,f8 as db,V8 as eb,G8 as fb,X9 as gb};
//# sourceMappingURL=THEOplayer.common.esm.js.map