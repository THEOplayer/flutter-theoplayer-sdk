/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 9.0.0
 Created: 2025-04-03T12:55:51.582Z
 */
var Ao,f,Nt,El,At,Rl,Il,Pl,y,Dl,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,Nl=a.location,Ll=a.navigator,u=a.setTimeout,v=a.clearTimeout,p=a.setInterval,m=a.clearInterval,g=a.Error,b=a.TypeError,w=(a.SyntaxError,a.Object),_=a.Math,x=a.parseInt,C=a.parseFloat,S=a.isNaN,j=a.Uint8Array,Bl=a.Worker,Ol=(a.WorkerGlobalScope,a.XMLHttpRequest),Fl=w.create,Vl=w.defineProperty,Wl=w.getOwnPropertyDescriptor,Ul=w.getOwnPropertyNames,Gl=w.getPrototypeOf,Hl=w.prototype.hasOwnProperty,cr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Zl=(t,e,i)=>(i=null!=t?Fl(Gl(t)):{},((t,e,i,s)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let n of Ul(e))Hl.call(t,n)||n===i||Vl(t,n,{get:()=>e[n],enumerable:!(s=Wl(e,n))||s.enumerable});return t})(!e&&t&&t.__esModule?i:Vl(i,"default",{value:t,enumerable:!0}),t)),r=(y=()=>{"use strict";if("function"==typeof Symbol&&Symbol.iterator)Ao=Symbol,f=null!=(Rl=Symbol.for)?Rl:Symbol,Nt=Symbol.iterator,El=null!=(Il=Symbol.dispose)?Il:f("Symbol.dispose"),At=null!=(Pl=Symbol.asyncDispose)?Pl:f("Symbol.asyncDispose");else{let t=0;Ao=function(e){return"ul"+e+"_"+ ++t},Nt=(f=function(t){return"ul"+t})("Symbol.iterator"),El=f("Symbol.dispose"),At=f("Symbol.asyncDispose"),Ao.for=f,Ao.iterator=Nt,Ao.dispose=El,Ao.asyncDispose=At}},()=>(y&&(Dl=y(y=0)),Dl)),Xl=cr(((t,e)=>{r(),function(i,s){"object"==typeof t&&void 0!==e?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((i=i||self).WebStreamsPolyfill={})}(t,(function(t){"use strict";var e="function"==typeof Ao&&"symbol"==typeof Nt?Ao:function(t){return"Symbol("+t+")"};function i(){}var s=Number.isNaN||function(t){return t!=t},n=i;function r(t){return"object"==typeof t&&null!==t||"function"==typeof t}function o(t){return t.slice()}function h(t,e,i,s,n){new j(t).set(new j(i,s,n),e)}function a(t){return!1!==function(t){if("number"!=typeof t)return!1;if(s(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function u(t,e,i){if("function"!=typeof t)throw new b("Argument is not a function");return Function.prototype.apply.call(t,e,i)}function c(t,e,i,s){var n=t[e];if(void 0!==n){if("function"!=typeof n)throw new b(n+" is not a method");switch(i){case 0:return function(){return d(n,t,s)};case 1:return function(e){var i=[e].concat(s);return d(n,t,i)}}}return function(){return T(void 0)}}function l(t,e,i){var s=t[e];if(void 0!==s)return u(s,t,i)}function d(t,e,i){try{return T(u(t,e,i))}catch(t){return k(t)}}function f(t){if(t=Number(t),s(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function v(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new b("size property of a queuing strategy must be a function");return function(e){return t(e)}}var m=Promise,p=Promise.prototype.then,y=Promise.resolve.bind(m),A=Promise.reject.bind(m);function S(t){return new m(t)}function T(t){return y(t)}function k(t){return A(t)}function E(t,e,i){return p.call(t,e,i)}function x(t,e,i){E(E(t,e,i),void 0,n)}function R(t,e){x(t,e)}function I(t,e){x(t,void 0,e)}function C(t,e,i){return E(t,e,i)}function P(t){E(t,void 0,n)}var D=function(){function t(){this.hd=0,this.Td=0,this.Ed={Rd:[],Id:void 0},this.Pd=this.Ed,this.hd=0,this.Td=0}return w.defineProperty(t.prototype,"length",{get:function(){return this.Td},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var e=this.Pd,i=e;16383===e.Rd.length&&(i={Rd:[],Id:void 0}),e.Rd.push(t),i!==e&&(this.Pd=i,e.Id=i),++this.Td},t.prototype.shift=function(){var t=this.Ed,e=t,i=this.hd,s=i+1,n=t.Rd,r=n[i];return 16384===s&&(e=t.Id,s=0),--this.Td,this.hd=s,t!==e&&(this.Ed=e),n[i]=void 0,r},t.prototype.forEach=function(t){for(var e=this.hd,i=this.Ed,s=i.Rd;!(e===s.length&&void 0===i.Id||e===s.length&&(e=0,0===(s=(i=i.Id).Rd).length));)t(s[e]),++e},t.prototype.peek=function(){var t=this.Ed,e=this.hd;return t.Rd[e]},t}();function N(t,e,i){var s=null;!0===i&&(s=w.prototype);var n=w.create(s);return n.value=t,n.done=e,n}function M(t,e){t.Dd=!0,t.Nd=e,e.Md=t,"readable"===e.Ea?F(t):"closed"===e.Ea?function(t){F(t),U(t)}(t):V(t,e.Ld)}function L(t,e){return qe(t.Nd,e)}function B(t){"readable"===t.Nd.Ea?W(t,new b("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,e){V(t,e)}(t,new b("Reader was released and can no longer be used to monitor the stream's closedness")),t.Nd.Md=void 0,t.Nd=void 0}function O(t){return new b("Cannot "+t+" a stream using a released reader")}function F(t){t.Bd=S((function(e,i){t.Od=e,t.Fd=i}))}function V(t,e){F(t),W(t,e)}function W(t,e){P(t.Bd),t.Fd(e),t.Od=void 0,t.Fd=void 0}function U(t){t.Od(void 0),t.Od=void 0,t.Fd=void 0}var G=e("[[CancelSteps]]"),H=e("[[PullSteps]]");function Z(t,e){void 0===e&&(e=!1);var i=new J(t);return i.Dd=e,i}function X(t){return S((function(e,i){var s={Vd:e,Wd:i};t.Md.Ud.push(s)}))}function z(t,e,i){var s=t.Md;s.Ud.shift().Vd(N(e,i,s.Dd))}function q(t){return t.Md.Ud.length}function Y(t){var e=t.Md;return void 0!==e&&!!$(e)}var K,Q,J=function(){function t(t){if(!1===Xe(t))throw new b("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===ze(t))throw new b("This stream has already been locked for exclusive reading by another reader");M(this,t),this.Ud=new D}return w.defineProperty(t.prototype,"closed",{get:function(){return $(this)?this.Bd:k(et("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return $(this)?void 0===this.Nd?k(O("cancel")):L(this,t):k(et("cancel"))},t.prototype.read=function(){return $(this)?void 0===this.Nd?k(O("read from")):tt(this):k(et("read"))},t.prototype.releaseLock=function(){if(!$(this))throw et("releaseLock");if(void 0!==this.Nd){if(this.Ud.length>0)throw new b("Tried to release a reader lock when that reader has pending read() calls un-settled");B(this)}},t}();function $(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Ud")}function tt(t){var e=t.Nd;return e.Gd=!0,"closed"===e.Ea?T(N(void 0,!0,t.Dd)):"errored"===e.Ea?k(e.Ld):e.Hd[H]()}function et(t){return new b("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof e.asyncIterator&&((K={})[e.asyncIterator]=function(){return this},Q=K,w.defineProperty(Q,e.asyncIterator,{enumerable:!1}));var it={next:function(){if(!1===st(this))return k(nt("next"));var t=this.Zd;return void 0===t.Nd?k(O("iterate")):C(tt(t),(function(e){var i=e.done;return i&&B(t),N(e.value,i,!0)}))},return:function(t){if(!1===st(this))return k(nt("next"));var e=this.Zd;if(void 0===e.Nd)return k(O("finish iterating"));if(e.Ud.length>0)return k(new b("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.Xd){var i=L(e,t);return B(e),C(i,(function(){return N(t,!0,!0)}))}return B(e),T(N(t,!0,!0))}};function st(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Zd")}function nt(t){return new b("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function rt(t){var e=t.zd.shift();return t.qd-=e.size,t.qd<0&&(t.qd=0),e.value}function ot(t,e,i){if(!a(i=Number(i)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.zd.push({value:e,size:i}),t.qd+=i}function ht(t){t.zd=new D,t.qd=0}void 0!==Q&&w.setPrototypeOf(it,Q),w.defineProperty(it,"next",{enumerable:!1}),w.defineProperty(it,"return",{enumerable:!1});var at=e("[[AbortSteps]]"),ut=e("[[ErrorSteps]]"),ct=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),dt(this);var i=e.size,s=e.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=v(i);void 0===s&&(s=1),function(t,e,i,s){var n=w.create(Ct.prototype);function r(){return l(e,"start",[n])}var o=c(e,"write",1,[n]),h=c(e,"close",0,[]),a=c(e,"abort",1,[]);Pt(t,n,r,o,h,a,i,s)}(this,t,s=f(s),n)}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===ft(this))throw Vt("locked");return _t(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===ft(this)?k(Vt("abort")):!0===_t(this)?k(new b("Cannot abort a stream that already has a writer")):vt(this,t)},t.prototype.close=function(){return!1===ft(this)?k(Vt("close")):!0===_t(this)?k(new b("Cannot close a stream that already has a writer")):!0===yt(this)?k(new b("Cannot close an already-closing stream")):mt(this)},t.prototype.getWriter=function(){if(!1===ft(this))throw Vt("getWriter");return lt(this)},t}();function lt(t){return new St(t)}function dt(t){t.Ea="writable",t.Ld=void 0,t.Yd=void 0,t.Kd=void 0,t.jd=new D,t.Qd=void 0,t.Jd=void 0,t.$d=void 0,t.tf=void 0,t.ef=!1}function ft(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Kd")}function _t(t){return void 0!==t.Yd}function vt(t,e){var i=t.Ea;if("closed"===i||"errored"===i)return T(void 0);if(void 0!==t.tf)return t.tf.nf;var s=!1;"erroring"===i&&(s=!0,e=void 0);var n=S((function(i,n){t.tf={nf:void 0,Vd:i,Wd:n,rf:e,hf:s}}));return t.tf.nf=n,!1===s&&pt(t,e),n}function mt(t){var e=t.Ea;if("closed"===e||"errored"===e)return k(new b("The stream (in "+e+" state) is not in the writable state and cannot be closed"));var i=S((function(e,i){var s={Vd:e,Wd:i};t.Jd=s})),s=t.Yd;return void 0!==s&&!0===t.ef&&"writable"===e&&jt(s),function(t){ot(t,"close",0),Lt(t)}(t.Kd),i}function gt(t,e){"writable"!==t.Ea?wt(t):pt(t,e)}function pt(t,e){var i=t.Kd;t.Ea="erroring",t.Ld=e;var s=t.Yd;void 0!==s&&xt(s,e),!1===function(t){if(void 0===t.Qd&&void 0===t.$d)return!1;return!0}(t)&&!0===i.uf&&wt(t)}function wt(t){t.Ea="errored",t.Kd[ut]();var e=t.Ld;if(t.jd.forEach((function(t){t.Wd(e)})),t.jd=new D,void 0!==t.tf){var i=t.tf;if(t.tf=void 0,!0===i.hf)return i.Wd(e),void bt(t);x(t.Kd[at](i.rf),(function(){i.Vd(),bt(t)}),(function(e){i.Wd(e),bt(t)}))}else bt(t)}function yt(t){return void 0!==t.Jd||void 0!==t.$d}function bt(t){void 0!==t.Jd&&(t.Jd.Wd(t.Ld),t.Jd=void 0);var e=t.Yd;void 0!==e&&Zt(e,t.Ld)}function At(t,e){var i=t.Yd;void 0!==i&&e!==t.ef&&(!0===e?function(t){zt(t)}(i):jt(i)),t.ef=e}var St=function(){function t(t){if(!1===ft(t))throw new b("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===_t(t))throw new b("This stream has already been locked for exclusive writing by another writer");this.cf=t,t.Yd=this;var e=t.Ea;if("writable"===e)!1===yt(t)&&!0===t.ef?zt(this):Yt(this),Gt(this);else if("erroring"===e)qt(this,t.Ld),Gt(this);else if("closed"===e)Yt(this),function(t){Gt(t),Xt(t)}(this);else{var i=t.Ld;qt(this,i),Ht(this,i)}}return w.defineProperty(t.prototype,"closed",{get:function(){return!1===Tt(this)?k(Wt("closed")):this.Bd},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Tt(this))throw Wt("desiredSize");if(void 0===this.cf)throw Ut("desiredSize");return function(t){var e=t.cf,i=e.Ea;if("errored"===i||"erroring"===i)return null;if("closed"===i)return 0;return Mt(e.Kd)}(this)},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"ready",{get:function(){return!1===Tt(this)?k(Wt("ready")):this.lf},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===Tt(this)?k(Wt("abort")):void 0===this.cf?k(Ut("abort")):function(t,e){var i=t.cf;return vt(i,e)}(this,t)},t.prototype.close=function(){if(!1===Tt(this))return k(Wt("close"));var t=this.cf;return void 0===t?k(Ut("close")):!0===yt(t)?k(new b("Cannot close an already-closing stream")):kt(this)},t.prototype.releaseLock=function(){if(!1===Tt(this))throw Wt("releaseLock");void 0!==this.cf&&Rt(this)},t.prototype.write=function(t){return!1===Tt(this)?k(Wt("write")):void 0===this.cf?k(Ut("write to")):It(this,t)},t}();function Tt(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"cf")}function kt(t){return mt(t.cf)}function Et(t,e){"pending"===t.df?Zt(t,e):function(t,e){Ht(t,e)}(t,e)}function xt(t,e){"pending"===t._f?Kt(t,e):function(t,e){qt(t,e)}(t,e)}function Rt(t){var e=t.cf,i=new b("Writer was released and can no longer be used to monitor the stream's closedness");xt(t,i),Et(t,i),e.Yd=void 0,t.cf=void 0}function It(t,e){var i=t.cf,s=i.Kd,n=function(t,e){try{return t.vf(e)}catch(e){return Bt(t,e),1}}(s,e);if(i!==t.cf)return k(Ut("write to"));var r=i.Ea;if("errored"===r)return k(i.Ld);if(!0===yt(i)||"closed"===r)return k(new b("The stream is closing or closed and cannot be written to"));if("erroring"===r)return k(i.Ld);var o=function(t){return S((function(e,i){var s={Vd:e,Wd:i};t.jd.push(s)}))}(i);return function(t,e,i){var s={chunk:e};try{ot(t,s,i)}catch(e){return void Bt(t,e)}var n=t.mf;if(!1===yt(n)&&"writable"===n.Ea){At(n,Ot(t))}Lt(t)}(s,e,n),o}var Ct=function(){function t(){throw new b("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!r(t))return!1;if(!w.prototype.hasOwnProperty.call(t,"mf"))return!1;return!0}(this))throw new b("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.mf.Ea&&Ft(this,t)},t.prototype[at]=function(t){var e=this.gf(t);return Dt(this),e},t.prototype[ut]=function(){ht(this)},t}();function Pt(t,e,i,s,n,r,o,h){e.mf=t,t.Kd=e,e.zd=void 0,e.qd=void 0,ht(e),e.uf=!1,e.vf=h,e.pf=o,e.wf=s,e.yf=n,e.gf=r;var a=Ot(e);At(t,a),x(T(i()),(function(){e.uf=!0,Lt(e)}),(function(i){e.uf=!0,gt(t,i)}))}function Dt(t){t.wf=void 0,t.yf=void 0,t.gf=void 0,t.vf=void 0}function Mt(t){return t.pf-t.qd}function Lt(t){var e=t.mf;if(!1!==t.uf&&void 0===e.Qd)if("erroring"!==e.Ea){if(0!==t.zd.length){var i=function(t){return t.zd.peek().value}(t);"close"===i?function(t){var e=t.mf;(function(t){t.$d=t.Jd,t.Jd=void 0})(e),rt(t);var i=t.yf();Dt(t),x(i,(function(){!function(t){t.$d.Vd(void 0),t.$d=void 0,"erroring"===t.Ea&&(t.Ld=void 0,void 0!==t.tf&&(t.tf.Vd(),t.tf=void 0)),t.Ea="closed";var e=t.Yd;void 0!==e&&Xt(e)}(e)}),(function(t){!function(t,e){t.$d.Wd(e),t.$d=void 0,void 0!==t.tf&&(t.tf.Wd(e),t.tf=void 0),gt(t,e)}(e,t)}))}(t):function(t,e){var i=t.mf;!function(t){t.Qd=t.jd.shift()}(i);var s=t.wf(e);x(s,(function(){!function(t){t.Qd.Vd(void 0),t.Qd=void 0}(i);var e=i.Ea;if(rt(t),!1===yt(i)&&"writable"===e){var s=Ot(t);At(i,s)}Lt(t)}),(function(e){"writable"===i.Ea&&Dt(t),function(t,e){t.Qd.Wd(e),t.Qd=void 0,gt(t,e)}(i,e)}))}(t,i.chunk)}}else wt(e)}function Bt(t,e){"writable"===t.mf.Ea&&Ft(t,e)}function Ot(t){return Mt(t)<=0}function Ft(t,e){var i=t.mf;Dt(t),pt(i,e)}function Vt(t){return new b("WritableStream.prototype."+t+" can only be used on a WritableStream")}function Wt(t){return new b("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function Ut(t){return new b("Cannot "+t+" a stream using a released writer")}function Gt(t){t.Bd=S((function(e,i){t.Od=e,t.Fd=i,t.df="pending"}))}function Ht(t,e){Gt(t),Zt(t,e)}function Zt(t,e){P(t.Bd),t.Fd(e),t.Od=void 0,t.Fd=void 0,t.df="rejected"}function Xt(t){t.Od(void 0),t.Od=void 0,t.Fd=void 0,t.df="resolved"}function zt(t){t.lf=S((function(e,i){t.bf=e,t.Af=i})),t._f="pending"}function qt(t,e){zt(t),Kt(t,e)}function Yt(t){zt(t),jt(t)}function Kt(t,e){P(t.lf),t.Af(e),t.bf=void 0,t.Af=void 0,t._f="rejected"}function jt(t){t.bf(void 0),t.bf=void 0,t.Af=void 0,t._f="fulfilled"}function Qt(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var Jt="undefined"!=typeof DOMException?DOMException:void 0;var $t,te=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(Jt)?Jt:(($t=function(t,e){this.message=t||"",this.name=e||"Error",g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}).prototype=w.create(g.prototype),w.defineProperty($t.prototype,"constructor",{value:$t,writable:!0,configurable:!0}),$t);function ee(t,e,s,n,r,o){var h=Z(t),a=lt(e);t.Gd=!0;var u=!1,c=T(void 0);return S((function(l,d){var f,_,v,m;if(void 0!==o){if(f=function(){var i=new te("Aborted","AbortError"),s=[];!1===n&&s.push((function(){return"writable"===e.Ea?vt(e,i):T(void 0)})),!1===r&&s.push((function(){return"readable"===t.Ea?qe(t,i):T(void 0)})),y((function(){return Promise.all(s.map((function(t){return t()})))}),!0,i)},!0===o.aborted)return void f();o.addEventListener("abort",f)}if(w(t,h.Bd,(function(t){!1===n?y((function(){return vt(e,t)}),!0,t):A(!0,t)})),w(e,a.Bd,(function(e){!1===r?y((function(){return qe(t,e)}),!0,e):A(!0,e)})),_=t,v=h.Bd,m=function(){!1===s?y((function(){return function(t){var e=t.cf,i=e.Ea;return!0===yt(e)||"closed"===i?T(void 0):"errored"===i?k(e.Ld):kt(t)}(a)})):A()},"closed"===_.Ea?m():R(v,m),!0===yt(e)||"closed"===e.Ea){var g=new b("the destination writable stream closed before all data could be piped to it");!1===r?y((function(){return qe(t,g)}),!0,g):A(!0,g)}function p(){var t=c;return E(c,(function(){return t!==c?p():void 0}))}function w(t,e,i){"errored"===t.Ea?i(t.Ld):I(e,i)}function y(t,i,s){function n(){x(t(),(function(){return C(i,s)}),(function(t){return C(!0,t)}))}!0!==u&&(u=!0,"writable"===e.Ea&&!1===yt(e)?R(p(),n):n())}function A(t,i){!0!==u&&(u=!0,"writable"===e.Ea&&!1===yt(e)?R(p(),(function(){return C(t,i)})):C(t,i))}function C(t,e){Rt(a),B(h),void 0!==o&&o.removeEventListener("abort",f),t?d(e):l(void 0)}P(S((function(t,e){!function s(n){n?t():E(!0===u?T(!0):E(a.lf,(function(){return E(tt(h),(function(t){return!0===t.done||(c=E(It(a,t.value),void 0,i),!1)}))})),s,e)}(!1)})))}))}var ie=function(){function t(){throw new b}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===se(this))throw fe("desiredSize");return ce(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===se(this))throw fe("close");if(!1===le(this))throw new b("The stream is not in a state that permits close");he(this)},t.prototype.enqueue=function(t){if(!1===se(this))throw fe("enqueue");if(!1===le(this))throw new b("The stream is not in a state that permits enqueue");return ae(this,t)},t.prototype.error=function(t){if(!1===se(this))throw fe("error");ue(this,t)},t.prototype[G]=function(t){ht(this);var e=this.Sf(t);return oe(this),e},t.prototype[H]=function(){var t=this.Tf;if(this.zd.length>0){var e=rt(this);return!0===this.kf&&0===this.zd.length?(oe(this),Ye(t)):ne(this),T(N(e,!1,t.Md.Dd))}var i=X(t);return ne(this),i},t}();function se(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Tf")}function ne(t){!1!==re(t)&&(!0!==t.Ef?(t.Ef=!0,x(t.xf(),(function(){t.Ef=!1,!0===t.Rf&&(t.Rf=!1,ne(t))}),(function(e){ue(t,e)}))):t.Rf=!0)}function re(t){var e=t.Tf;return!1!==le(t)&&(!1!==t.uf&&(!0===ze(e)&&q(e)>0||ce(t)>0))}function oe(t){t.xf=void 0,t.Sf=void 0,t.vf=void 0}function he(t){var e=t.Tf;t.kf=!0,0===t.zd.length&&(oe(t),Ye(e))}function ae(t,e){var i=t.Tf;if(!0===ze(i)&&q(i)>0)z(i,e,!1);else{var s=void 0;try{s=t.vf(e)}catch(e){throw ue(t,e),e}try{ot(t,e,s)}catch(e){throw ue(t,e),e}}ne(t)}function ue(t,e){var i=t.Tf;"readable"===i.Ea&&(ht(t),oe(t),Ke(i,e))}function ce(t){var e=t.Tf.Ea;return"errored"===e?null:"closed"===e?0:t.pf-t.qd}function le(t){var e=t.Tf.Ea;return!1===t.kf&&"readable"===e}function de(t,e,i,s,n,r,o){e.Tf=t,e.zd=void 0,e.qd=void 0,ht(e),e.uf=!1,e.kf=!1,e.Rf=!1,e.Ef=!1,e.vf=o,e.pf=r,e.xf=s,e.Sf=n,t.Hd=e,x(T(i()),(function(){e.uf=!0,ne(e)}),(function(t){ue(e,t)}))}function fe(t){return new b("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var _e=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&_.floor(t)===t},ve=function(){function t(){throw new b("ReadableStreamBYOBRequest cannot be used directly")}return w.defineProperty(t.prototype,"view",{get:function(){if(!1===pe(this))throw Me("view");return this.If},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===pe(this))throw Me("respond");if(void 0===this.Cf)throw new b("This BYOB request has been invalidated");this.If.buffer,function(t,e){if(e=Number(e),!1===a(e))throw new RangeError("bytesWritten must be a finite");Re(t,e)}(this.Cf,t)},t.prototype.respondWithNewView=function(t){if(!1===pe(this))throw Me("respond");if(void 0===this.Cf)throw new b("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new b("You can only respond with array buffer views");t.buffer,function(t,e){var i=t.Pf.peek();if(i.byteOffset+i.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.byteLength!==e.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");i.buffer=e.buffer,Re(t,e.byteLength)}(this.Cf,t)},t}(),me=function(){function t(){throw new b("ReadableByteStreamController constructor cannot be used directly")}return w.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===ge(this))throw Le("byobRequest");if(void 0===this.Df&&this.Pf.length>0){var t=this.Pf.peek(),e=new j(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),i=w.create(ve.prototype);!function(t,e,i){t.Cf=e,t.If=i}(i,this,e),this.Df=i}return this.Df},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===ge(this))throw Le("desiredSize");return De(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===ge(this))throw Le("close");if(!0===this.kf)throw new b("The stream has already been closed; do not close it again!");var t=this.Nf.Ea;if("readable"!==t)throw new b("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var e=t.Nf;if(t.qd>0)return void(t.kf=!0);if(t.Pf.length>0){if(t.Pf.peek().bytesFilled>0){var i=new b("Insufficient bytes to fill elements in the given buffer");throw Pe(t,i),i}}Ce(t),Ye(e)}(this)},t.prototype.enqueue=function(t){if(!1===ge(this))throw Le("enqueue");if(!0===this.kf)throw new b("stream is closed or draining");var e=this.Nf.Ea;if("readable"!==e)throw new b("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new b("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,e){var i=t.Nf,s=e.buffer,n=e.byteOffset,r=e.byteLength,o=s;if(!0===Y(i)){if(0===q(i))Ae(t,o,n,r);else z(i,new j(o,n,r),!1)}else!0===Fe(i)?(Ae(t,o,n,r),xe(t)):Ae(t,o,n,r);we(t)}(this,t)},t.prototype.error=function(t){if(!1===ge(this))throw Le("error");Pe(this,t)},t.prototype[G]=function(t){this.Pf.length>0&&(this.Pf.peek().bytesFilled=0);ht(this);var e=this.Sf(t);return Ce(this),e},t.prototype[H]=function(){var t=this.Nf;if(this.qd>0){var e=this.zd.shift();this.qd-=e.byteLength,ke(this);var i=void 0;try{i=new j(e.buffer,e.byteOffset,e.byteLength)}catch(t){return k(t)}return T(N(i,!1,t.Md.Dd))}var s=this.Mf;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return k(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:j,readerType:"default"};this.Pf.push(r)}var o=X(t);return we(this),o},t}();function ge(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Nf")}function pe(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Cf")}function we(t){var e=function(t){var e=t.Nf;if("readable"!==e.Ea)return!1;if(!0===t.kf)return!1;if(!1===t.uf)return!1;if(!0===Y(e)&&q(e)>0)return!0;if(!0===Fe(e)&&Oe(e)>0)return!0;var i=De(t);if(i>0)return!0;return!1}(t);!1!==e&&(!0!==t.Ef?(t.Ef=!0,x(t.xf(),(function(){t.Ef=!1,!0===t.Rf&&(t.Rf=!1,we(t))}),(function(e){Pe(t,e)}))):t.Rf=!0)}function ye(t,e){var i=!1;"closed"===t.Ea&&(i=!0);var s=be(e);"default"===e.readerType?z(t,s,i):function(t,e,i){var s=t.Md,n=s.Lf.shift();n.Vd(N(e,i,s.Dd))}(t,s,i)}function be(t){var e=t.bytesFilled,i=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,e/i)}function Ae(t,e,i,s){t.zd.push({buffer:e,byteOffset:i,byteLength:s}),t.qd+=s}function Se(t,e){var i=e.elementSize,s=e.bytesFilled-e.bytesFilled%i,n=_.min(t.qd,e.byteLength-e.bytesFilled),r=e.bytesFilled+n,o=r-r%i,a=n,u=!1;o>s&&(a=o-e.bytesFilled,u=!0);for(var c=t.zd;a>0;){var l=c.peek(),d=_.min(a,l.byteLength),f=e.byteOffset+e.bytesFilled;h(e.buffer,f,l.buffer,l.byteOffset,d),l.byteLength===d?c.shift():(l.byteOffset+=d,l.byteLength-=d),t.qd-=d,Te(t,d,e),a-=d}return u}function Te(t,e,i){Ee(t),i.bytesFilled+=e}function ke(t){0===t.qd&&!0===t.kf?(Ce(t),Ye(t.Nf)):we(t)}function Ee(t){void 0!==t.Df&&(t.Df.Cf=void 0,t.Df.If=void 0,t.Df=void 0)}function xe(t){for(;t.Pf.length>0;){if(0===t.qd)return;var e=t.Pf.peek();!0===Se(t,e)&&(Ie(t),ye(t.Nf,e))}}function Re(t,e){var i=t.Pf.peek();if("closed"===t.Nf.Ea){if(0!==e)throw new b("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,e){e.buffer=e.buffer;var i=t.Nf;if(!0===Fe(i))for(;Oe(i)>0;)ye(i,Ie(t))}(t,i)}else!function(t,e,i){if(i.bytesFilled+e>i.byteLength)throw new RangeError("bytesWritten out of range");if(Te(t,e,i),!(i.bytesFilled<i.elementSize)){Ie(t);var s=i.bytesFilled%i.elementSize;if(s>0){var n=i.byteOffset+i.bytesFilled,r=i.buffer.slice(n-s,n);Ae(t,r,0,r.byteLength)}i.buffer=i.buffer,i.bytesFilled-=s,ye(t.Nf,i),xe(t)}}(t,e,i);we(t)}function Ie(t){var e=t.Pf.shift();return Ee(t),e}function Ce(t){t.xf=void 0,t.Sf=void 0}function Pe(t,e){var i=t.Nf;"readable"===i.Ea&&(!function(t){Ee(t),t.Pf=new D}(t),ht(t),Ce(t),Ke(i,e))}function De(t){var e=t.Nf.Ea;return"errored"===e?null:"closed"===e?0:t.pf-t.qd}function Ne(t,e,i){var s=w.create(me.prototype);var n=c(e,"pull",0,[s]),r=c(e,"cancel",1,[]),o=e.autoAllocateChunkSize;if(void 0!==o&&(o=Number(o),!1===_e(o)||o<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,e,i,s,n,r,o){e.Nf=t,e.Rf=!1,e.Ef=!1,e.Df=void 0,e.zd=e.qd=void 0,ht(e),e.kf=!1,e.uf=!1,e.pf=f(r),e.xf=s,e.Sf=n,e.Mf=o,e.Pf=new D,t.Hd=e,x(T(i()),(function(){e.uf=!0,we(e)}),(function(t){Pe(e,t)}))}(t,s,(function(){return l(e,"start",[s])}),n,r,i,o)}function Me(t){return new b("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Le(t){return new b("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function Be(t){return S((function(e,i){var s={Vd:e,Wd:i};t.Md.Lf.push(s)}))}function Oe(t){return t.Md.Lf.length}function Fe(t){var e=t.Md;return void 0!==e&&!!We(e)}var Ve=function(){function t(t){if(!Xe(t))throw new b("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===ge(t.Hd))throw new b("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(ze(t))throw new b("This stream has already been locked for exclusive reading by another reader");M(this,t),this.Lf=new D}return w.defineProperty(t.prototype,"closed",{get:function(){return We(this)?this.Bd:k(Ue("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return We(this)?void 0===this.Nd?k(O("cancel")):L(this,t):k(Ue("cancel"))},t.prototype.read=function(t){return We(this)?void 0===this.Nd?k(O("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?k(new b("view must have non-zero byteLength")):function(t,e){var i=t.Nd;if(i.Gd=!0,"errored"===i.Ea)return k(i.Ld);return function(t,e){var i=t.Nf,s=1;e.constructor!==DataView&&(s=e.constructor.BYTES_PER_ELEMENT);var n=e.constructor,r={buffer:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.Pf.length>0)return t.Pf.push(r),Be(i);if("closed"===i.Ea)return T(N(new n(r.buffer,r.byteOffset,0),!0,i.Md.Dd));if(t.qd>0){if(!0===Se(t,r)){var o=be(r);return ke(t),T(N(o,!1,i.Md.Dd))}if(!0===t.kf){var h=new b("Insufficient bytes to fill elements in the given buffer");return Pe(t,h),k(h)}}t.Pf.push(r);var a=Be(i);return we(t),a}(i.Hd,e)}(this,t)):k(new b("view must be an array buffer view")):k(Ue("read"))},t.prototype.releaseLock=function(){if(!We(this))throw Ue("releaseLock");if(void 0!==this.Nd){if(this.Lf.length>0)throw new b("Tried to release a reader lock when that reader has pending read() calls un-settled");B(this)}},t}();function We(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Lf")}function Ue(t){return new b("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var Ge=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),Ze(this);var i=e.size,s=e.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==i)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),Ne(this,t,s=f(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=v(i);void 0===s&&(s=1),function(t,e,i,s){var n=w.create(ie.prototype),r=c(e,"pull",0,[n]),o=c(e,"cancel",1,[]);de(t,n,(function(){return l(e,"start",[n])}),r,o,i,s)}(this,t,s=f(s),r)}}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===Xe(this))throw je("locked");return ze(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Xe(this)?k(je("cancel")):!0===ze(this)?k(new b("Cannot cancel a stream that already has a reader")):qe(this,t)},t.prototype.getReader=function(t){var e=(void 0===t?{}:t).mode;if(!1===Xe(this))throw je("getReader");if(void 0===e)return Z(this,!0);if("byob"===(e=String(e)))return function(t,e){void 0===e&&(e=!1);var i=new Ve(t);return i.Dd=e,i}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,e){var i=t.writable,s=t.readable,n=void 0===e?{}:e,r=n.preventClose,o=n.preventAbort,h=n.preventCancel,a=n.signal;if(!1===Xe(this))throw je("pipeThrough");if(!1===ft(i))throw new b("writable argument to pipeThrough must be a WritableStream");if(!1===Xe(s))throw new b("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),o=Boolean(o),h=Boolean(h),void 0!==a&&!Qt(a))throw new b("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===ze(this))throw new b("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===_t(i))throw new b("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return P(ee(this,i,r,o,h,a)),s},t.prototype.pipeTo=function(t,e){var i=void 0===e?{}:e,s=i.preventClose,n=i.preventAbort,r=i.preventCancel,o=i.signal;return!1===Xe(this)?k(je("pipeTo")):!1===ft(t)?k(new b("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===o||Qt(o)?!0===ze(this)?k(new b("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===_t(t)?k(new b("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ee(this,t,s,n,r,o):k(new b("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Xe(this))throw je("tee");var t=function(t,e){var i,s,n,r,h,a=Z(t),u=!1,c=!1,l=!1,d=S((function(t){h=t}));function f(){return!0===u||(u=!0,P(C(tt(a),(function(t){if(u=!1,!0===t.done)return!1===c&&he(n.Hd),void(!1===l&&he(r.Hd));var e=t.value,i=e,s=e;!1===c&&ae(n.Hd,i),!1===l&&ae(r.Hd,s)})))),T(void 0)}function _(){}return n=He(_,f,(function(e){if(c=!0,i=e,!0===l){var n=o([i,s]),r=qe(t,n);h(r)}return d})),r=He(_,f,(function(e){if(l=!0,s=e,!0===c){var n=o([i,s]),r=qe(t,n);h(r)}return d})),I(a.Bd,(function(t){ue(n.Hd,t),ue(r.Hd,t)})),[n,r]}(this);return o(t)},t.prototype.getIterator=function(t){var e=(void 0===t?{}:t).preventCancel,i=void 0!==e&&e;if(!1===Xe(this))throw je("getIterator");return function(t,e){void 0===e&&(e=!1);var i=Z(t),s=w.create(it);return s.Zd=i,s.Xd=Boolean(e),s}(this,i)},t}();function He(t,e,i,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=w.create(Ge.prototype);return Ze(r),de(r,w.create(ie.prototype),t,e,i,s,n),r}function Ze(t){t.Ea="readable",t.Md=void 0,t.Ld=void 0,t.Gd=!1}function Xe(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Hd")}function ze(t){return void 0!==t.Md}function qe(t,e){return t.Gd=!0,"closed"===t.Ea?T(void 0):"errored"===t.Ea?k(t.Ld):(Ye(t),C(t.Hd[G](e),i))}function Ye(t){t.Ea="closed";var e=t.Md;void 0!==e&&($(e)&&(e.Ud.forEach((function(t){t.Vd(N(void 0,!0,e.Dd))})),e.Ud=new D),U(e))}function Ke(t,e){t.Ea="errored",t.Ld=e;var i=t.Md;void 0!==i&&($(i)?(i.Ud.forEach((function(t){t.Wd(e)})),i.Ud=new D):(i.Lf.forEach((function(t){t.Wd(e)})),i.Lf=new D),W(i,e))}function je(t){return new b("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof e.asyncIterator&&w.defineProperty(Ge.prototype,e.asyncIterator,{value:Ge.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var Qe=function(){function t(t){var e=t.highWaterMark;this.highWaterMark=e}return t.prototype.size=function(t){return t.byteLength},t}(),Je=function(){function t(t){var e=t.highWaterMark;this.highWaterMark=e}return t.prototype.size=function(){return 1},t}(),$e=function(){function t(t,e,i){void 0===t&&(t={}),void 0===e&&(e={}),void 0===i&&(i={});var s=e.size,n=e.highWaterMark,r=i.size,o=i.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var h=v(s);if(void 0===n&&(n=1),n=f(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=v(r);void 0===o&&(o=0),o=f(o),function(t,e,i,s,n,r){function o(){return e}function h(e){return function(t,e){var i=t.Bf;if(!0===t.ef){return C(t.Of,(function(){var s=t.Ff;if("erroring"===s.Ea)throw s.Ld;return ai(i,e)}))}return ai(i,e)}(t,e)}function a(e){return function(t,e){return ei(t,e),T(void 0)}(t,e)}function u(){return function(t){var e=t.Vf,i=t.Bf,s=i.Wf();return oi(i),C(s,(function(){if("errored"===e.Ea)throw e.Ld;var t=e.Hd;!0===le(t)&&he(t)}),(function(i){throw ei(t,i),e.Ld}))}(t)}function c(){return function(t){return si(t,!1),t.Of}(t)}function l(e){return ii(t,e),T(void 0)}t.Ff=function(t,e,i,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var o=w.create(ct.prototype);return dt(o),Pt(o,w.create(Ct.prototype),t,e,i,s,n,r),o}(o,h,u,a,i,s),t.Vf=He(o,c,l,n,r),t.ef=void 0,t.Of=void 0,t.Uf=void 0,si(t,!0),t.Bf=void 0}(this,S((function(t){a=t})),n,h,o,u),function(t,e){var i=w.create(ni.prototype),s=function(t){try{return hi(i,t),T(void 0)}catch(t){return k(t)}},n=e.transform;if(void 0!==n){if("function"!=typeof n)throw new b("transform is not a method");s=function(t){return d(n,e,[t,i])}}var r=c(e,"flush",0,[i]);!function(t,e,i,s){e.Gf=t,t.Bf=e,e.Hf=i,e.Wf=s}(t,i,s,r)}(this,t);var _=l(t,"start",[this.Bf]);a(_)}return w.defineProperty(t.prototype,"readable",{get:function(){if(!1===ti(this))throw ci("readable");return this.Vf},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"writable",{get:function(){if(!1===ti(this))throw ci("writable");return this.Ff},enumerable:!0,configurable:!0}),t}();function ti(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Bf")}function ei(t,e){ue(t.Vf.Hd,e),ii(t,e)}function ii(t,e){oi(t.Bf),Bt(t.Ff.Kd,e),!0===t.ef&&si(t,!1)}function si(t,e){void 0!==t.Of&&t.Uf(),t.Of=S((function(e){t.Uf=e})),t.ef=e}var ni=function(){function t(){throw new b("TransformStreamDefaultController instances cannot be created directly")}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===ri(this))throw ui("desiredSize");return ce(this.Gf.Vf.Hd)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===ri(this))throw ui("enqueue");hi(this,t)},t.prototype.error=function(t){if(!1===ri(this))throw ui("error");!function(t,e){ei(t.Gf,e)}(this,t)},t.prototype.terminate=function(){if(!1===ri(this))throw ui("terminate");!function(t){var e=t.Gf,i=e.Vf.Hd;!0===le(i)&&he(i);var s=new b("TransformStream terminated");ii(e,s)}(this)},t}();function ri(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Gf")}function oi(t){t.Hf=void 0,t.Wf=void 0}function hi(t,e){var i=t.Gf,s=i.Vf.Hd;if(!1===le(s))throw new b("Readable side is not in a state that permits enqueue");try{ae(s,e)}catch(t){throw ii(i,t),i.Vf.Ld}var n=function(t){return!0!==re(t)}(s);n!==i.ef&&si(i,!0)}function ai(t,e){return C(t.Hf(e),void 0,(function(e){throw ei(t.Gf,e),e}))}function ui(t){return new b("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function ci(t){return new b("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=Qe,t.CountQueuingStrategy=Je,t.ReadableStream=Ge,t.TransformStream=$e,t.WritableStream=ct,w.defineProperty(t,"__esModule",{value:!0})}))})),zl=cr((t=>{"use strict";function e(){const t=Xl();return e=function(){return t},t}r(),w.defineProperty(t,"__esModule",{value:!0}),function(t,e){for(var i in e)w.defineProperty(t,i,{enumerable:!0,get:e[i]})}(t,{ByteLengthQueuingStrategy:function(){return e().ByteLengthQueuingStrategy},CountQueuingStrategy:function(){return e().CountQueuingStrategy},ReadableStream:function(){return e().ReadableStream},TransformStream:function(){return e().TransformStream},WritableStream:function(){return e().WritableStream}})})),ql=cr(((t,e)=>{r(),function(i,s){"object"==typeof t&&typeof e<"u"?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((i=typeof globalThis<"u"?globalThis:i||self).millicast={})}(t,(function(t){"use strict";var e,i=w.defineProperty,n=w.defineProperties,r=w.getOwnPropertyDescriptors,o=w.getOwnPropertySymbols,a=w.prototype.hasOwnProperty,c=w.prototype.propertyIsEnumerable,l=(t,e,s)=>e in t?i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,d=(t,e)=>{for(var i in e||(e={}))a.call(e,i)&&l(t,i,e[i]);if(o)for(var i of o(e))c.call(e,i)&&l(t,i,e[i]);return t},v=(t,e)=>n(t,r(e)),y=(t,e)=>{var i={};for(var s in t)a.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&o)for(var s of o(t))e.indexOf(s)<0&&c.call(t,s)&&(i[s]=t[s]);return i},A=typeof globalThis<"u"?globalThis:typeof s<"u"?s:typeof global<"u"?global:typeof self<"u"?self:{};function T(t){return t&&t.__esModule&&w.prototype.hasOwnProperty.call(t,"default")?t.default:t}var k,E={exports:{}};k=E,function(t){var e,i={VERSION:"1.6.1"},s={},n=function(t,e){return function(){return e.apply(t,arguments)}},r=function(){var t,e,i=arguments,s=i[0];for(e=1;e<i.length;e++)for(t in i[e])!(t in s)&&i[e].hasOwnProperty(t)&&(s[t]=i[e][t]);return s},o=function(t,e){return{value:t,name:e}};i.TRACE=o(1,"TRACE"),i.DEBUG=o(2,"DEBUG"),i.INFO=o(3,"INFO"),i.TIME=o(4,"TIME"),i.WARN=o(5,"WARN"),i.ERROR=o(8,"ERROR"),i.OFF=o(99,"OFF");var h=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};h.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},trace:function(){this.invoke(i.TRACE,arguments)},debug:function(){this.invoke(i.DEBUG,arguments)},info:function(){this.invoke(i.INFO,arguments)},warn:function(){this.invoke(i.WARN,arguments)},error:function(){this.invoke(i.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(i.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(i.TIME,[t,"end"])},invoke:function(t,i){e&&this.enabledFor(t)&&e(i,r({level:t},this.context))}};var a,u=new h({filterLevel:i.OFF});(a=i).enabledFor=n(u,u.enabledFor),a.trace=n(u,u.trace),a.debug=n(u,u.debug),a.time=n(u,u.time),a.timeEnd=n(u,u.timeEnd),a.info=n(u,u.info),a.warn=n(u,u.warn),a.error=n(u,u.error),a.log=a.info,i.setHandler=function(t){e=t},i.setLevel=function(t){for(var e in u.setLevel(t),s)s.hasOwnProperty(e)&&s[e].setLevel(t)},i.getLevel=function(){return u.getLevel()},i.get=function(t){return s[t]||(s[t]=new h(r({name:t},u.context)))},i.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,e){e.name&&t.unshift("["+e.name+"]")};var e={},s=function(t,e){Function.prototype.apply.call(t,console,e)};return typeof console>"u"?function(){}:function(n,r){n=Array.prototype.slice.call(n);var o,h=console.log;r.level===i.TIME?(o=(r.name?"["+r.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(o):e[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):s(h,[o+": "+((new Date).getTime()-e[o])+"ms"])):(r.level===i.WARN&&console.warn?h=console.warn:r.level===i.ERROR&&console.error?h=console.error:r.level===i.INFO&&console.info?h=console.info:r.level===i.DEBUG&&console.debug?h=console.debug:r.level===i.TRACE&&console.trace&&(h=console.trace),t.formatter(n,r),s(h,n))}},i.useDefaults=function(t){i.setLevel(t&&t.defaultLevel||i.DEBUG),i.setHandler(i.createDefaultHandler(t))},i.setDefaults=i.useDefaults,k.exports?k.exports=i:(i.Zf=t.Logger,i.noConflict=function(){return t.Logger=i.Zf,i},t.Logger=i)}(A);const R=T(E.exports),I="0.3.2",P=(null==(e=null==s?void 0:s.navigator)?void 0:e.userAgent)||"No user agent available";let D="",N="",M="",L="",B="",O="",F="",V=0;const W=[];const U=t=>{D=""===D?t:D},G=t=>{N=""===N?t:N},H=t=>{M=""===M?t:M},Z=t=>{L=""===L?t:L},X=t=>{B=""===B?t:B},z=t=>{V=0===V?t:V},q=t=>{O=t},Y=t=>{F=""===F?t:F},K=t=>{60===W.length&&W.shift(),W.push(t)},Q=(t,e)=>{let i;void 0===t&&(t=60),void 0===e&&(e="JSON"),i=!Number.isInteger(t)||t>60||t<=0?60:t;const s={client:"@millicast/millicast-sdk",version:I,timestamp:(new Date).toISOString(),userAgent:P,clusterId:F,accountId:D,streamName:N,subscriberId:M,connection:O,stats:W.slice(-i),connectionDurationMs:(new Date).getTime()-V};return""!==B?s.feedId=B:""!==L&&(s.streamViewId=L),"CMCD"===e?function(t){function e(t,e){return{ts:_.round(e.timestamp)||"",ot:"audio"===t?"a":"v",bl:e.jitterBufferDelay||0,br:_.round(e.bitrateBitsPerSecond||0),pld:e.packetsLostDeltaPerSecond||0,j:e.jitter||0,mtp:e.packetRate||0,mid:e.mid||"",mimeType:e.mimeType||""}}return t.stats=t.stats.reduce(((t,i)=>{const s=0!==i.audio.inbounds.length?i.audio.inbounds.map((t=>e("audio",t))):i.audio.outbounds.map((t=>e("audio",t))),n=0!==i.video.inbounds.length?i.video.inbounds.map((t=>e("video",t))):i.video.outbounds.map((t=>e("video",t)));return t.concat([...s,...n])}),[]),t}(s):s};R.useDefaults({defaultLevel:R.TRACE});const J=["TRACE","DEBUG","INFO","WARN","ERROR"],tt=(t,e)=>{t.unshift("[".concat(e.name||"Global","] ").concat((new Date).toISOString()," - ").concat(e.level.name," -"))},et=(t,e)=>e?t.value>=ot[e].value:t.value>=rt.value,it=R.createDefaultHandler({formatter:tt});R.setHandler(((t,e)=>{((t,e)=>{t=(t=Array.prototype.slice.call(t)).map((t=>"object"==typeof t?JSON.stringify(t):t)),tt(t,e),0!==st?(nt.push(t.join(" ")),nt.length>=st&&(nt=nt.slice(-st))):nt=[]})(t,e),et(e.level,e.name)&&it(t,e);for(const{handler:i,level:s}of ht)e.level.value>=s.value&&i(t,e)}));let st=1e4,nt=[],rt=R.OFF;const ot={},ht=[],at=v(d({},R),{enabledFor:et,getHistory:()=>nt,getHistoryMaxSize:()=>st,setHistoryMaxSize:t=>{st=t},setLevel:t=>{rt=t;for(const e in ot)ot[e]=t},getLevel:()=>rt,get:t=>{ot[t]||(ot[t]=rt);const e=R.get(t);return e.setLevel=e=>{ot[t]=e},e.getLevel=()=>ot[t],e},setHandler:(t,e)=>{ht.push({handler:t,level:e})},diagnose:t=>{let e;void 0===t&&(t={});const i={statsCount:60,historySize:1e3,minLogLevel:"TRACE",statsFormat:"JSON"};"number"==typeof t?(i.statsCount=t,e=i):e=d(d({},i),t);const{statsCount:s,historySize:n,minLogLevel:r,statsFormat:o}=e,h=Q(s,o),a=at.getHistory();if(!Number.isInteger(n)||n<=0)throw new g("Invalid Argument Exception : historySize must be a positive integer.");if(!J.includes(r.toUpperCase()))throw new g('Invalid Argument Exception : the minLogLevel parameter only excepts "trace", "debug", "info", "warn", and "error" as arguments.');if(J.includes(r.toUpperCase())){const t=J.slice(J.indexOf(r.toUpperCase())),e=a.filter((e=>t.some((t=>e.includes(t)))));h.history=e.slice(-n)}return h},JSON:"JSON",CMCD:"CMCD",VERSION:I});var ut,ct={exports:{}},lt="object"==typeof Reflect?Reflect:null,dt=lt&&"function"==typeof lt.apply?lt.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};ut=lt&&"function"==typeof lt.ownKeys?lt.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var ft=Number.isNaN||function(t){return t!=t};function _t(){_t.init.call(this)}ct.exports=_t,ct.exports.once=function(t,e){return new Promise((function(i,s){function n(i){t.removeListener(e,r),s(i)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}Tt(t,e,r,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&Tt(t,"error",e,i)}(t,n,{once:!0})}))},_t.EventEmitter=_t,_t.prototype.Xf=void 0,_t.prototype.zf=0,_t.prototype.qf=void 0;var vt=10;function mt(t){if("function"!=typeof t)throw new b('The "listener" argument must be of type Function. Received type '+typeof t)}function gt(t){return void 0===t.qf?_t.defaultMaxListeners:t.qf}function pt(t,e,i,s){var n,r,o;if(mt(i),void 0===(r=t.Xf)?(r=t.Xf=w.create(null),t.zf=0):(void 0!==r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t.Xf),o=r[e]),void 0===o)o=r[e]=i,++t.zf;else if("function"==typeof o?o=r[e]=s?[i,o]:[o,i]:s?o.unshift(i):o.push(i),(n=gt(t))>0&&o.length>n&&!o.warned){o.warned=!0;var h=new g("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=o.length,function(t){console&&console.warn&&console.warn(t)}(h)}return t}function wt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function yt(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=wt.bind(s);return n.listener=i,s.wrapFn=n,n}function bt(t,e,i){var s=t.Xf;if(void 0===s)return[];var n=s[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):St(n,n.length)}function At(t){var e=this.Xf;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function St(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function Tt(t,e,i,s){if("function"==typeof t.on)s.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new b('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(r){s.once&&t.removeEventListener(e,n),i(r)}))}}w.defineProperty(_t,"defaultMaxListeners",{enumerable:!0,get:function(){return vt},set:function(t){if("number"!=typeof t||t<0||ft(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");vt=t}}),_t.init=function(){(void 0===this.Xf||this.Xf===w.getPrototypeOf(this).Xf)&&(this.Xf=w.create(null),this.zf=0),this.qf=this.qf||void 0},_t.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||ft(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.qf=t,this},_t.prototype.getMaxListeners=function(){return gt(this)},_t.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var s="error"===t,n=this.Xf;if(void 0!==n)s=s&&void 0===n.error;else if(!s)return!1;if(s){var r;if(e.length>0&&(r=e[0]),r instanceof g)throw r;var o=new g("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var h=n[t];if(void 0===h)return!1;if("function"==typeof h)dt(h,this,e);else{var a=h.length,u=St(h,a);for(i=0;i<a;++i)dt(u[i],this,e)}return!0},_t.prototype.addListener=function(t,e){return pt(this,t,e,!1)},_t.prototype.on=_t.prototype.addListener,_t.prototype.prependListener=function(t,e){return pt(this,t,e,!0)},_t.prototype.once=function(t,e){return mt(e),this.on(t,yt(this,t,e)),this},_t.prototype.prependOnceListener=function(t,e){return mt(e),this.prependListener(t,yt(this,t,e)),this},_t.prototype.removeListener=function(t,e){var i,s,n,r,o;if(mt(e),void 0===(s=this.Xf))return this;if(void 0===(i=s[t]))return this;if(i===e||i.listener===e)0==--this.zf?this.Xf=w.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){o=i[r].listener,n=r;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(s[t]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||e)}return this},_t.prototype.off=_t.prototype.removeListener,_t.prototype.removeAllListeners=function(t){var e,i,s;if(void 0===(i=this.Xf))return this;if(void 0===i.removeListener)return 0===arguments.length?(this.Xf=w.create(null),this.zf=0):void 0!==i[t]&&(0==--this.zf?this.Xf=w.create(null):delete i[t]),this;if(0===arguments.length){var n,r=w.keys(i);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Xf=w.create(null),this.zf=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},_t.prototype.listeners=function(t){return bt(this,t,!0)},_t.prototype.rawListeners=function(t){return bt(this,t,!1)},_t.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):At.call(t,e)},_t.prototype.listenerCount=At,_t.prototype.eventNames=function(){return this.zf>0?ut(this.Xf):[]};var kt=ct.exports;const Et=T(kt);var xt={exports:{}};xt.exports=It,xt.exports.filter=function(t,e){var i=new Rt;return It(t,i,e),i};var Rt=kt.EventEmitter;function It(t,e,i){Array.isArray(i)||(i=[i]);var s=[];return i.forEach((function(i){var n=function(){var t=[].slice.call(arguments);t.unshift(i),e.emit.apply(e,t)};s.push(n),t.on(i,n)})),function(){i.forEach((function(e,i){t.removeListener(e,s[i])}))}}const Ct=T(xt.exports);var Pt={exports:{}};!function(t,e){var i;self,i=()=>{return t={7:t=>{var e,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};e=i&&"function"==typeof i.ownKeys?i.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,e){return new Promise((function(i,s){function n(i){t.removeListener(e,r),s(i)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}var o,h;v(t,e,r,{once:!0}),"error"!==e&&(h=n,"function"==typeof(o=t).on&&v(o,"error",h,{once:!0}))}))},r.EventEmitter=r,r.prototype.Xf=void 0,r.prototype.zf=0,r.prototype.qf=void 0;var o=10;function h(t){if("function"!=typeof t)throw new b('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t.qf?r.defaultMaxListeners:t.qf}function u(t,e,i,s){var n,r,o,u;if(h(i),void 0===(r=t.Xf)?(r=t.Xf=w.create(null),t.zf=0):(void 0!==r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t.Xf),o=r[e]),void 0===o)o=r[e]=i,++t.zf;else if("function"==typeof o?o=r[e]=s?[i,o]:[o,i]:s?o.unshift(i):o.push(i),(n=a(t))>0&&o.length>n&&!o.warned){o.warned=!0;var c=new g("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=o.length,u=c,console&&console.warn&&console.warn(u)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=c.bind(s);return n.listener=i,s.wrapFn=n,n}function d(t,e,i){var s=t.Xf;if(void 0===s)return[];var n=s[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):_(n,n.length)}function f(t){var e=this.Xf;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function _(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function v(t,e,i,s){if("function"==typeof t.on)s.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new b('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(r){s.once&&t.removeEventListener(e,n),i(r)}))}}w.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),r.init=function(){void 0!==this.Xf&&this.Xf!==w.getPrototypeOf(this).Xf||(this.Xf=w.create(null),this.zf=0),this.qf=this.qf||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.qf=t,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this.Xf;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof g)throw o;var h=new g("Unhandled error."+(o?" ("+o.message+")":""));throw h.context=o,h}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)s(a,this,e);else{var u=a.length,c=_(a,u);for(i=0;i<u;++i)s(c[i],this,e)}return!0},r.prototype.addListener=function(t,e){return u(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return u(this,t,e,!0)},r.prototype.once=function(t,e){return h(e),this.on(t,l(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,l(this,t,e)),this},r.prototype.removeListener=function(t,e){var i,s,n,r,o;if(h(e),void 0===(s=this.Xf))return this;if(void 0===(i=s[t]))return this;if(i===e||i.listener===e)0==--this.zf?this.Xf=w.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){o=i[r].listener,n=r;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(s[t]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||e)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var e,i,s;if(void 0===(i=this.Xf))return this;if(void 0===i.removeListener)return 0===arguments.length?(this.Xf=w.create(null),this.zf=0):void 0!==i[t]&&(0==--this.zf?this.Xf=w.create(null):delete i[t]),this;if(0===arguments.length){var n,r=w.keys(i);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Xf=w.create(null),this.zf=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},r.prototype.listenerCount=f,r.prototype.eventNames=function(){return this.zf>0?e(this.Xf):[]}},586:function(t,e,i){var s,n;!function(r){var o,h={VERSION:"1.6.1"},a={},u=function(t,e){return function(){return e.apply(t,arguments)}},c=function(){var t,e,i=arguments,s=i[0];for(e=1;e<i.length;e++)for(t in i[e])!(t in s)&&i[e].hasOwnProperty(t)&&(s[t]=i[e][t]);return s},l=function(t,e){return{value:t,name:e}};h.TRACE=l(1,"TRACE"),h.DEBUG=l(2,"DEBUG"),h.INFO=l(3,"INFO"),h.TIME=l(4,"TIME"),h.WARN=l(5,"WARN"),h.ERROR=l(8,"ERROR"),h.OFF=l(99,"OFF");var d=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};d.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},trace:function(){this.invoke(h.TRACE,arguments)},debug:function(){this.invoke(h.DEBUG,arguments)},info:function(){this.invoke(h.INFO,arguments)},warn:function(){this.invoke(h.WARN,arguments)},error:function(){this.invoke(h.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"end"])},invoke:function(t,e){o&&this.enabledFor(t)&&o(e,c({level:t},this.context))}};var f,_=new d({filterLevel:h.OFF});(f=h).enabledFor=u(_,_.enabledFor),f.trace=u(_,_.trace),f.debug=u(_,_.debug),f.time=u(_,_.time),f.timeEnd=u(_,_.timeEnd),f.info=u(_,_.info),f.warn=u(_,_.warn),f.error=u(_,_.error),f.log=f.info,h.setHandler=function(t){o=t},h.setLevel=function(t){for(var e in _.setLevel(t),a)a.hasOwnProperty(e)&&a[e].setLevel(t)},h.getLevel=function(){return _.getLevel()},h.get=function(t){return a[t]||(a[t]=new d(c({name:t},_.context)))},h.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,e){e.name&&t.unshift("["+e.name+"]")};var e={},i=function(t,e){Function.prototype.apply.call(t,console,e)};return typeof console>"u"?function(){}:function(s,n){s=Array.prototype.slice.call(s);var r,o=console.log;n.level===h.TIME?(r=(n.name?"["+n.name+"] ":"")+s[0],"start"===s[1]?console.time?console.time(r):e[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):i(o,[r+": "+((new Date).getTime()-e[r])+"ms"])):(n.level===h.WARN&&console.warn?o=console.warn:n.level===h.ERROR&&console.error?o=console.error:n.level===h.INFO&&console.info?o=console.info:n.level===h.DEBUG&&console.debug?o=console.debug:n.level===h.TRACE&&console.trace&&(o=console.trace),t.formatter(s,n),i(o,s))}},h.useDefaults=function(t){h.setLevel(t&&t.defaultLevel||h.DEBUG),h.setHandler(h.createDefaultHandler(t))},h.setDefaults=h.useDefaults,void 0===(n="function"==typeof(s=h)?s.call(e,i,e,t):s)||(t.exports=n)}()},156:function(t,e,i){var s=this&&this.Yf||(w.create?function(t,e,i,s){void 0===s&&(s=i);var n=w.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),w.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),n=this&&this.Kf||function(t,e){for(var i in t)"default"===i||w.prototype.hasOwnProperty.call(e,i)||s(e,t,i)},r=this&&this.jf||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var o=i(586);w.defineProperty(e,"Logger",{enumerable:!0,get:function(){return r(o).default}}),n(i(284),e),n(i(280),e),n(i(738),e),n(i(767),e)},738:(t,e)=>{var i,s;w.defineProperty(e,"__esModule",{value:!0}),e.QualityLimitationReason=void 0,(s=i||(e.QualityLimitationReason=i={}))[s.none=0]="none",s[s.cpu=1]="cpu",s[s.bandwidth=2]="bandwidth",s[s.other=3]="other"},280:(t,e)=>{w.defineProperty(e,"__esModule",{value:!0})},767:(t,e)=>{w.defineProperty(e,"__esModule",{value:!0})},185:(t,e)=>{w.defineProperty(e,"__esModule",{value:!0}),e.calculatePacketsLostRatio=e.calculateRate=e.getMediaKind=void 0,e.getMediaKind=t=>{let e=t.kind||t.mediaType;return["audio","video"].includes(e)||"inbound-rtp"!==t.type||(e=t.id.toLocaleLowerCase().includes("video")?"video":"audio"),e},e.calculateRate=(t,e,i,s)=>i&&s?(e-s)/((t-i)/1e3):0,e.calculatePacketsLostRatio=(t,e,i,s)=>0==e?0:(t-(null!=i?i:0))/(e-(null!=s?s:0))},284:function(t,e,i){var s,n,r,o,h,a,u,c,l,d,f,_,v,g,y,A,S=this&&this.Qf||function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},T=this&&this.Jf||function(t,e,i,s,n){if("m"===s)throw new b("Private method is not writable");if("a"===s&&!n)throw new b("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new b("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},k=this&&this.$f||function(t,e,i,s){if("a"===i&&!s)throw new b("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new b("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},E=this&&this.jf||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(e,"__esModule",{value:!0}),e.WebRTCStats=void 0;const x=i(7),R=E(i(586)),I=i(738),C=i(185);class P extends x.EventEmitter{constructor(t){super(),s.add(this),n.set(this,void 0),r.set(this,void 0),o.set(this,void 0),h.set(this,null),a.set(this,void 0),u.set(this,null),this.start=()=>{k(this,a,"f").info("WebRTC statistics collection is starting..."),T(this,u,null,"f"),T(this,h,p(k(this,c,"f"),k(this,r,"f")),"f")},this.stop=()=>{k(this,h,"f")&&(m(k(this,h,"f")),T(this,h,null,"f"),k(this,a,"f").info("WebRTC statistics collection has stopped."))},c.set(this,(()=>S(this,void 0,void 0,(function*(){let t,e;try{k(this,a,"f").trace("Requesting WebRTC statistics..."),t=yield k(this,n,"f").call(this),e=(new Date).toISOString()}catch(t){return k(this,a,"f").error("Problem collecting the WebRTC statistics.",t),void this.emit("error","Problem collecting the WebRTC statistics - ".concat(t))}const i=Array.from(t.values()),r={timestamp:e,input:{audio:[],video:[]},output:{audio:[],video:[]}};k(this,o,"f")&&(r.rawStats=t);for(let e=0;e<w.keys(i).length;e++){const n=i[e];switch(n.type){case"outbound-rtp":const e=n,i=(0,C.getMediaKind)(e);"audio"===i?yield k(this,s,"m",f).call(this,t,e,r):"video"===i&&(yield k(this,s,"m",_).call(this,t,e,r));break;case"inbound-rtp":const o=n;let h=(0,C.getMediaKind)(o);"audio"===h?yield k(this,s,"m",g).call(this,t,o,r):"video"===h&&(yield k(this,s,"m",y).call(this,t,o,r));break;case"candidate-pair":const a=n;a.nominated&&k(this,s,"m",A).call(this,a,r)}}T(this,u,r,"f"),this.emit("stats",r)})))),T(this,a,R.default.get("WebRTCStats"),"f"),T(this,n,t.getStats,"f"),T(this,r,t.getStatsInterval||1e3,"f"),T(this,o,!!t.includeRawStats,"f")}}e.WebRTCStats=P,n=new WeakMap,r=new WeakMap,o=new WeakMap,h=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,s=new WeakSet,l=function(t,e){if(e){const i=t.get(e);if(i)return{mimeType:i.mimeType}}return{}},d=function(t,e,i){return S(this,void 0,void 0,(function*(){var n,r,o,h;const a=(0,C.calculateRate)(e.timestamp,e.bytesSent,null==i?void 0:i.timestamp,null==i?void 0:i.totalBytesSent),u=(0,C.calculateRate)(e.timestamp,e.packetsSent,null==i?void 0:i.timestamp,null==i?void 0:i.totalPacketsSent),c=k(this,s,"m",l).call(this,t,e.codecId);return w.assign({id:e.id,timestamp:e.timestamp,mid:e.mid,totalBytesSent:e.bytesSent,bytesSentDelta:e.bytesSent-(null!==(n=null==i?void 0:i.totalBytesSent)&&void 0!==n?n:0),totalPacketsSent:e.packetsSent,packetsSentDelta:e.packetsSent-(null!==(r=null==i?void 0:i.totalPacketsSent)&&void 0!==r?r:0),bitrate:a,packetRate:u,targetBitrate:e.targetBitrate,retransmittedPacketsSent:e.retransmittedPacketsSent,retransmittedPacketsSentDelta:e.retransmittedPacketsSent-(null!==(o=null==i?void 0:i.retransmittedPacketsSent)&&void 0!==o?o:0),retransmittedBytesSent:e.retransmittedBytesSent,retransmittedBytesSentDelta:e.retransmittedBytesSent-(null!==(h=null==i?void 0:i.retransmittedBytesSent)&&void 0!==h?h:0)},c)}))},f=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.output.audio.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",d).call(this,t,e,r),h=w.assign({},o);i.output.audio.push(h)}))},_=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.output.video.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",d).call(this,t,e,r);let h=I.QualityLimitationReason.none;e.qualityLimitationReason&&(h=e.qualityLimitationReason);const a=w.assign(w.assign({},o),{frameWidth:e.frameWidth,frameHeight:e.frameHeight,framesPerSecond:e.framesPerSecond,framesSent:e.framesSent,qualityLimitationReason:h,qualityLimitationDurations:e.qualityLimitationDurations});i.output.video.push(a)}))},v=function(t,e,i){return S(this,void 0,void 0,(function*(){var n,r;const o=(0,C.calculateRate)(e.timestamp,e.bytesReceived,null==i?void 0:i.timestamp,null==i?void 0:i.totalBytesReceived),h=(0,C.calculateRate)(e.timestamp,e.packetsReceived,null==i?void 0:i.timestamp,null==i?void 0:i.totalPacketsReceived),a=(0,C.calculatePacketsLostRatio)(e.packetsReceived,e.packetsLost,null==i?void 0:i.totalPacketsReceived,null==i?void 0:i.totalPacketsLost),u=(null!==(n=e.packetsLost)&&void 0!==n?n:0)-(null!==(r=null==i?void 0:i.totalPacketsLost)&&void 0!==r?r:0),c=k(this,s,"m",l).call(this,t,e.codecId);return w.assign({id:e.id,timestamp:e.timestamp,mid:e.mid,trackIdentifier:e.trackIdentifier,jitter:e.jitter,jitterBufferDelay:e.jitterBufferDelay,jitterBufferEmittedCount:e.jitterBufferEmittedCount,totalBytesReceived:e.bytesReceived,totalPacketsReceived:e.packetsReceived,totalPacketsLost:e.packetsLost,bitrate:o,packetRate:h,packetLossRatio:a,packetLossDelta:u},c)}))},g=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.input.audio.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",v).call(this,t,e,r);i.input.audio.push(o)}))},y=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.input.video.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",v).call(this,t,e,r),h=w.assign(w.assign({},o),{keyFramesDecoded:e.keyFramesDecoded,frameHeight:e.frameHeight,frameWidth:e.frameWidth,framesDecoded:e.framesDecoded,framesDropped:e.framesDropped,framesPerSecond:e.framesPerSecond,framesReceived:e.framesReceived});i.input.video.push(h)}))},A=function(t,e){e.totalRoundTripTime=t.totalRoundTripTime,e.currentRoundTripTime=t.currentRoundTripTime,e.responsesReceived=t.responsesReceived,e.availableOutgoingBitrate=t.availableOutgoingBitrate,e.availableIncomingBitrate=t.availableIncomingBitrate}}},e={},function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}(156);var t,e},t.exports=i()}(Pt);var Dt=Pt.exports;const Mt=at.get("PeerConnectionStats"),Lt="stats";class Bt extends Et{init(t){if(this.initialized)return void Mt.warn("PeerConnectionStats.init() has already been called. Automatic initialization occurs when the PeerConnectionStats object is constructed.");Mt.info("Initializing peer connection stats");const e=this.peer;try{this.collection=new Dt.WebRTCStats({getStatsInterval:t,getStats:()=>e.getStats(),includeRawStats:!0}),this.collection.on("stats",(t=>{const e=(t=>{const e=t,{input:i,output:s,rawStats:n}=e,r=y(e,["input","output","rawStats"]);return v(d({},r),{audio:{inbounds:t.input.audio.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=y(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.audio.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=y(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},video:{inbounds:t.input.video.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=y(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.video.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=y(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},raw:t.rawStats})})(t);K(e),this.emit(Lt,e)})),this.collection.start(),this.initialized=!0}catch(t){Mt.error(t)}}parseStats(t){return Mt.warn("The parseStats method is deprecated and will be removed in future releases."),null}stop(){Mt.info("Stopping peer connection stats"),this.collection.stop()}constructor(t,e={statsIntervalMs:1e3,autoInitStats:!0}){super(),this.peer=t,this.collection=null,this.initialized=!1,e.autoInitStats&&this.init(e.statsIntervalMs)}}var Ot={},Ft={},Vt={},Wt={exports:{}},Ut=Wt.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return null!=t.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return null!=t.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return null!=t.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=null!=t.raddr?" raddr %s rport %d":"%v%v",e+=null!=t.tcptype?" tcptype %s":"%v",null!=t.generation&&(e+=" generation %d"),e+=null!=t["network-id"]?" network-id %d":"%v",e+=null!=t["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return null!=t.attribute&&(e+=" %s",null!=t.value&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return null!=t.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(null!=t.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=null!=t.id?"id=%s %s":"%v%s",e+=null!=t.mediaClockValue?"=%s":"",e+=null!=t.rateNumerator?" rate=%s":"",e+=null!=t.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};w.keys(Ut).forEach((function(t){Ut[t].forEach((function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")}))}));var Gt=Wt.exports;!function(t){var e=function(t){return String(Number(t))===t?Number(t):t},i=function(t,i,s){var n=t.name&&t.names;t.push&&!i[t.push]?i[t.push]=[]:n&&!i[t.name]&&(i[t.name]={});var r=t.push?{}:n?i[t.name]:i;(function(t,i,s,n){if(n&&!s)i[n]=e(t[1]);else for(var r=0;r<s.length;r+=1)null!=t[r+1]&&(i[s[r]]=e(t[r+1]))})(s.match(t.reg),r,t.names,t.name),t.push&&i[t.push].push(r)},s=Gt,n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(t){var e={},r=[],o=e;return t.split(/(\r\n|\r|\n)/).filter(n).forEach((function(t){var e=t[0],n=t.slice(2);"m"===e&&(r.push({rtp:[],fmtp:[]}),o=r[r.length-1]);for(var h=0;h<(s[e]||[]).length;h+=1){var a=s[e][h];if(a.reg.test(n))return i(a,o,n)}})),e.media=r,e};var r=function(t,i){var s=i.split(/=(.+)/,2);return 2===s.length?t[s[0]]=e(s[1]):1===s.length&&i.length>1&&(t[s[0]]=void 0),t};t.parseParams=function(t){return t.split(/;\s?/).reduce(r,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(t){return t.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(t){for(var i=[],s=t.split(" ").map(e),n=0;n<s.length;n+=3)i.push({component:s[n],ip:s[n+1],port:s[n+2]});return i},t.parseImageAttributes=function(t){return t.split(" ").map((function(t){return t.substring(1,t.length-1).split(",").reduce(r,{})}))},t.parseSimulcastStreamList=function(t){return t.split(";").map((function(t){return t.split(",").map((function(t){var i,s=!1;return"~"!==t[0]?i=e(t):(i=e(t.substring(1,t.length)),s=!0),{scid:i,paused:s}}))}))}}(Vt);var Ht=Gt,Zt=/%[sdv%]/g,Xt=function(t){var e=1,i=arguments,s=i.length;return t.replace(Zt,(function(t){if(e>=s)return t;var n=i[e];switch(e+=1,t){case"%%":return"%";case"%s":return String(n);case"%d":return Number(n);case"%v":return""}}))},zt=function(t,e,i){var s=[t+"="+(e.format instanceof Function?e.format(e.push?i:i[e.name]):e.format)];if(e.names)for(var n=0;n<e.names.length;n+=1){var r=e.names[n];e.name?s.push(i[e.name][r]):s.push(i[e.names[n]])}else s.push(i[e.name]);return Xt.apply(null,s)},qt=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Yt=["i","c","b","a"],Kt=Vt,jt=function(t,e){e=e||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach((function(t){null==t.payloads&&(t.payloads="")}));var i=e.outerOrder||qt,s=e.innerOrder||Yt,n=[];return i.forEach((function(e){Ht[e].forEach((function(i){i.name in t&&null!=t[i.name]?n.push(zt(e,i,t)):i.push in t&&null!=t[i.push]&&t[i.push].forEach((function(t){n.push(zt(e,i,t))}))}))})),t.media.forEach((function(t){n.push(zt("m",Ht.m[0],t)),s.forEach((function(e){Ht[e].forEach((function(i){i.name in t&&null!=t[i.name]?n.push(zt(e,i,t)):i.push in t&&null!=t[i.push]&&t[i.push].forEach((function(t){n.push(zt(e,i,t))}))}))}))})),n.join("\r\n")+"\r\n"};Ft.write=jt,Ft.parse=Kt.parse,Ft.parseParams=Kt.parseParams,Ft.parseFmtpConfig=Kt.parseFmtpConfig,Ft.parsePayloads=Kt.parsePayloads,Ft.parseRemoteCandidates=Kt.parseRemoteCandidates,Ft.parseImageAttributes=Kt.parseImageAttributes,Ft.parseSimulcastStreamList=Kt.parseSimulcastStreamList;let Qt=class t{equals(t){return t.foundation===this.foundation&&t.componentId===this.componentId&&t.transport===this.transport&&t.priority===this.priority&&t.address===this.address&&t.port===this.port&&t.type===this.type&&t.relAddr===this.relAddr&&t.relPort===this.relPort}clone(){return new t(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.relAddr,this.relPort)}plain(){const t={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type};return this.relAddr&&(t.relAddr=this.relAddr),this.relPort&&(t.relPort=this.relPort),t}getFoundation(){return this.foundation}getComponentId(){return this.componentId}getTransport(){return this.transport}getPriority(){return this.priority}getAddress(){return this.address}getPort(){return this.port}getType(){return this.type}getRelAddr(){return this.relAddr}getRelPort(){return this.relPort}constructor(t,e,i,s,n,r,o,h,a){this.foundation=t,this.componentId=e,this.transport=i,this.priority=s,this.address=n,this.port=r,this.type=o,this.relAddr=h,this.relPort=a}};Qt.expand=function(t){return"CandidateInfo"===t.constructor.name?t:new Qt(t.foundation,t.componentId,t.transport,t.priority,t.address,t.port,t.type,t.relAddr,t.relPort)},Qt.clone=function(t){return"CandidateInfo"===t.constructor.name?t.clone():Qt.expand(t)};var Jt=Qt;let $t=class t{clone(){return new t(this.id,this.params)}plain(){return this.params.length?{id:this.id,params:this.params}:{id:this.id}}getId(){return this.id}getParams(){return this.params}constructor(t,e){this.id=t,this.params=e||[]}};$t.expand=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t:new $t(t.id,t.params)},$t.clone=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t.clone():$t.expand(t)};var te=$t;const ee=te;let ie=class t{clone(){const e=new t(this.codec,this.type,this.params);this.hasRTX()&&e.setRTX(this.getRTX());for(const t of this.rtcpfbs)e.addRTCPFeedback(t.clone());return this.hasChannels()&&e.setChannels(this.getChannels()),e}plain(){const t={codec:this.codec,type:this.type};this.rtx&&(t.rtx=this.rtx),this.channels&&(t.channels=this.channels),w.keys(this.params).length&&(t.params=this.params);for(const e of this.rtcpfbs)t.rtcpfbs||(t.rtcpfbs=[]),t.rtcpfbs.push(e.plain());return t}setRTX(t){this.rtx=t}getType(){return this.type}setType(t){this.type=t}getCodec(){return this.codec}getParams(){return this.params}addParams(t){for(const e in t)this.params[e]=t[e]}addParam(t,e){this.params[t]=e}hasParam(t){return w.hasOwnProperty.call(this.params,t)}getParam(t,e){if(void 0===e&&(e=void 0),this.hasParam(t))return this.params[t];if(void 0===e)throw new g("param ".concat(t," not found and no default value provided"));return""+e}hasRTX(){return this.rtx}getRTX(){return this.rtx}hasChannels(){return this.channels}getChannels(){return this.channels}setChannels(t){this.channels=t}addRTCPFeedback(t){this.rtcpfbs.add(t)}getRTCPFeedbacks(){return this.rtcpfbs}constructor(t,e,i){this.codec=t,this.type=e,this.params={},this.rtcpfbs=new Set,i&&this.addParams(i)}};ie.expand=function(t){if("CodecInfo"===t.constructor.name)return t;const e=new ie(t.codec,t.type,t.params);t.rtx&&e.setRTX(t.rtx),t.channels&&e.setChannels(t.channels);for(const i of t.rtcpfbs||[]){const t=ee.expand(i);e.addRTCPFeedback(t)}return e},ie.clone=function(t){return"CodecInfo"===t.constructor.name?t.clone():ie.expand(t)},ie.MapFromNames=function(t,e,i){var s;const n=new Map;let r=96;for(const o of t){let t;const h=o.split(";"),a=h.shift().toLowerCase().trim();t="pcmu"===a?0:"pcma"===a?8:++r;const u=new ie(a,t);"opus"===a?u.setChannels(2):"multiopus"===a&&u.setChannels(6),e&&"ulpfec"!==a&&"flexfec-03"!==a&&"red"!==a&&u.setRTX(++r);for(const t of i||[])u.addRTCPFeedback(new ee(t.id,t.params));for(const t of h){let e=t.split("=");u.addParam(e[0].trim(),null===(s=e[1])||void 0===s?void 0:s.trim())}n.set(t,u)}return n};var se=ie;var ne=function t(){var e=this;if(!(this instanceof t))return new(Function.prototype.bind.apply(t,[null].concat(Array.prototype.slice.call(arguments))));Array.from(arguments).forEach((function(t){e[t]=f("t_"+t)}))};const re=ne("ACTIVE","PASSIVE","ACTPASS","INACTIVE");re.byValue=function(t){switch(t){case re.ACTIVE:case re.PASSIVE:case re.ACTPASS:case re.INACTIVE:return t}return re[t.toUpperCase()]},re.toString=function(t){switch(t){case re.ACTIVE:return"active";case re.PASSIVE:return"passive";case re.ACTPASS:return"actpass";case re.INACTIVE:return"inactive"}},re.reverse=function(t,e){switch(t){case re.ACTIVE:return re.PASSIVE;case re.PASSIVE:return re.ACTIVE;case re.ACTPASS:return e?re.ACTIVE:re.PASSIVE;case re.INACTIVE:return re.INACTIVE}};var oe=re;const he=oe;let ae=class t{clone(){return new t(this.setup,this.hash,this.fingerprint)}plain(){return{setup:he.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}}getFingerprint(){return this.fingerprint}getHash(){return this.hash}getSetup(){return this.setup}setSetup(t){this.setup=t}constructor(t,e,i){this.setup=t,this.hash=e,this.fingerprint=i}};ae.expand=function(t){return"DTLSInfo"===t.constructor.name?t:new ae(t.setup?he.byValue(t.setup):he.ACTPASS,t.hash,t.fingerprint)},ae.clone=function(t){return"DTLSInfo"===t.constructor.name?t.clone():ae.expand(t)};var ue=ae;let ce=class t{clone(){return new t(this.tag,this.suite,this.keyParams,this.sessionParams)}plain(){return{tag:this.tag,suite:this.suite,keyParams:this.keyParams,sessionParams:this.sessionParams}}getSessionParams(){return this.sessionParams}getKeyParams(){return this.keyParams}getSuite(){return this.suite}getTag(){return this.tag}constructor(t,e,i,s){this.tag=t,this.suite=e,this.keyParams=i,this.sessionParams=s}};ce.expand=function(t){return"CryptoInfo"===t.constructor.name?t:new ce(t.tag,t.suite,t.keyParams,t.sessionParams)},ce.clone=function(t){return"CryptoInfo"===t.constructor.name?t.clone():ce.expand(t)};for(var le=ce,de={exports:{}},fe={exports:{}},_e={},ve={byteLength:function(t){var e=be(t),i=e[0],s=e[1];return 3*(i+s)/4-s},toByteArray:function(t){var e,i,s=be(t),n=s[0],r=s[1],o=new pe(function(t,e,i){return 3*(e+i)/4-i}(0,n,r)),h=0,a=r>0?n-4:n;for(i=0;i<a;i+=4)e=ge[t.charCodeAt(i)]<<18|ge[t.charCodeAt(i+1)]<<12|ge[t.charCodeAt(i+2)]<<6|ge[t.charCodeAt(i+3)],o[h++]=e>>16&255,o[h++]=e>>8&255,o[h++]=255&e;return 2===r&&(e=ge[t.charCodeAt(i)]<<2|ge[t.charCodeAt(i+1)]>>4,o[h++]=255&e),1===r&&(e=ge[t.charCodeAt(i)]<<10|ge[t.charCodeAt(i+1)]<<4|ge[t.charCodeAt(i+2)]>>2,o[h++]=e>>8&255,o[h++]=255&e),o},fromByteArray:function(t){for(var e,i=t.length,s=i%3,n=[],r=16383,o=0,h=i-s;o<h;o+=r)n.push(Se(t,o,o+r>h?h:o+r));return 1===s?(e=t[i-1],n.push(me[e>>2]+me[e<<4&63]+"==")):2===s&&(e=(t[i-2]<<8)+t[i-1],n.push(me[e>>10]+me[e>>4&63]+me[e<<2&63]+"=")),n.join("")}},me=[],ge=[],pe=typeof j<"u"?j:Array,we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ye=0;ye<64;++ye)me[ye]=we[ye],ge[we.charCodeAt(ye)]=ye;function be(t){var e=t.length;if(e%4>0)throw new g("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function Ae(t){return me[t>>18&63]+me[t>>12&63]+me[t>>6&63]+me[63&t]}function Se(t,e,i){for(var s,n=[],r=e;r<i;r+=3)s=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),n.push(Ae(s));return n.join("")}ge[45]=62,ge[95]=63;var Te={read:function(t,e,i,s,n){var r,o,h=8*n-s-1,a=(1<<h)-1,u=a>>1,c=-7,l=i?n-1:0,d=i?-1:1,f=t[e+l];for(l+=d,r=f&(1<<-c)-1,f>>=-c,c+=h;c>0;r=256*r+t[e+l],l+=d,c-=8);for(o=r&(1<<-c)-1,r>>=-c,c+=s;c>0;o=256*o+t[e+l],l+=d,c-=8);if(0===r)r=1-u;else{if(r===a)return o?NaN:1/0*(f?-1:1);o+=_.pow(2,s),r-=u}return(f?-1:1)*o*_.pow(2,r-s)},write:function(t,e,i,s,n,r){var o,h,a,u=8*r-n-1,c=(1<<u)-1,l=c>>1,d=23===n?_.pow(2,-24)-_.pow(2,-77):0,f=s?0:r-1,v=s?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=_.abs(e),S(e)||e===1/0?(h=S(e)?1:0,o=c):(o=_.floor(_.log(e)/_.LN2),e*(a=_.pow(2,-o))<1&&(o--,a*=2),(e+=o+l>=1?d/a:d*_.pow(2,1-l))*a>=2&&(o++,a/=2),o+l>=c?(h=0,o=c):o+l>=1?(h=(e*a-1)*_.pow(2,n),o+=l):(h=e*_.pow(2,l-1)*_.pow(2,n),o=0));n>=8;t[i+f]=255&h,f+=v,h/=256,n-=8);for(o=o<<n|h,u+=n;u>0;t[i+f]=255&o,f+=v,o/=256,u-=8);t[i+f-v]|=128*m}};(function(t){const e=ve,i=Te,s="function"==typeof Ao&&"function"==typeof f?f("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},t.INSPECT_MAX_BYTES=50;const n=2147483647;function r(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new j(t);return w.setPrototypeOf(e,o.prototype),e}function o(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new b('The "string" argument must be of type string. Received type number');return u(t)}return h(t,e,i)}function h(t,e,i){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!o.isEncoding(e))throw new b("Unknown encoding: "+e);const i=0|v(t,e);let s=r(i);const n=s.write(t,e);return n!==i&&(s=s.slice(0,n)),s}(t,e);if(ArrayBuffer.isView(t))return function(t){if(tt(t,j)){const e=new j(t);return l(e.buffer,e.byteOffset,e.byteLength)}return c(t)}(t);if(null==t)throw new b("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(tt(t,ArrayBuffer)||t&&tt(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(tt(t,SharedArrayBuffer)||t&&tt(t.buffer,SharedArrayBuffer)))return l(t,e,i);if("number"==typeof t)throw new b('The "value" argument must not be of type number. Received type number');const s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return o.from(s,e,i);const n=function(t){if(o.isBuffer(t)){const e=0|d(t.length),i=r(e);return 0===i.length||t.copy(i,0,0,e),i}if(void 0!==t.length)return"number"!=typeof t.length||et(t.length)?r(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}(t);if(n)return n;if(typeof Ao<"u"&&null!=Ao.toPrimitive&&"function"==typeof t[Ao.toPrimitive])return o.from(t[Ao.toPrimitive]("string"),e,i);throw new b("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new b('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),r(t<0?0:0|d(t))}function c(t){const e=t.length<0?0:0|d(t.length),i=r(e);for(let s=0;s<e;s+=1)i[s]=255&t[s];return i}function l(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===e&&void 0===i?new j(t):void 0===i?new j(t,e):new j(t,e,i),w.setPrototypeOf(s,o.prototype),s}function d(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function v(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||tt(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new b('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===i)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return Q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return J(t).length;default:if(n)return s?-1:Q(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,i){let s=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0)||(i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,i);case"utf8":case"utf-8":return C(this,e,i);case"ascii":return D(this,e,i);case"latin1":case"binary":return N(this,e,i);case"base64":return I(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,i);default:if(s)throw new b("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function p(t,e,i){const s=t[e];t[e]=t[i],t[i]=s}function y(t,e,i,s,n){if(0===t.length)return-1;if("string"==typeof i?(s=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),et(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=o.from(e,s)),o.isBuffer(e))return 0===e.length?-1:A(t,e,i,s,n);if("number"==typeof e)return e&=255,"function"==typeof j.prototype.indexOf?n?j.prototype.indexOf.call(t,e,i):j.prototype.lastIndexOf.call(t,e,i):A(t,[e],i,s,n);throw new b("val must be string, number or Buffer")}function A(t,e,i,s,n){let r,o=1,h=t.length,a=e.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||e.length<2)return-1;o=2,h/=2,a/=2,i/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n){let s=-1;for(r=i;r<h;r++)if(u(t,r)===u(e,-1===s?0:r-s)){if(-1===s&&(s=r),r-s+1===a)return s*o}else-1!==s&&(r-=r-s),s=-1}else for(i+a>h&&(i=h-a),r=i;r>=0;r--){let i=!0;for(let s=0;s<a;s++)if(u(t,r+s)!==u(e,s)){i=!1;break}if(i)return r}return-1}function S(t,e,i,s){i=Number(i)||0;const n=t.length-i;s?(s=Number(s))>n&&(s=n):s=n;const r=e.length;let o;for(s>r/2&&(s=r/2),o=0;o<s;++o){const s=x(e.substr(2*o,2),16);if(et(s))return o;t[i+o]=s}return o}function T(t,e,i,s){return $(Q(e,t.length-i),t,i,s)}function k(t,e,i,s){return $(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,s)}function E(t,e,i,s){return $(J(e),t,i,s)}function R(t,e,i,s){return $(function(t,e){let i,s,n;const r=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),s=i>>8,n=i%256,r.push(n),r.push(s);return r}(e,t.length-i),t,i,s)}function I(t,i,s){return 0===i&&s===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(i,s))}function C(t,e,i){i=_.min(t.length,i);const s=[];let n=e;for(;n<i;){const e=t[n];let r=null,o=e>239?4:e>223?3:e>191?2:1;if(n+o<=i){let i,s,h,a;switch(o){case 1:e<128&&(r=e);break;case 2:i=t[n+1],128==(192&i)&&(a=(31&e)<<6|63&i,a>127&&(r=a));break;case 3:i=t[n+1],s=t[n+2],128==(192&i)&&128==(192&s)&&(a=(15&e)<<12|(63&i)<<6|63&s,a>2047&&(a<55296||a>57343)&&(r=a));break;case 4:i=t[n+1],s=t[n+2],h=t[n+3],128==(192&i)&&128==(192&s)&&128==(192&h)&&(a=(15&e)<<18|(63&i)<<12|(63&s)<<6|63&h,a>65535&&a<1114112&&(r=a))}}null===r?(r=65533,o=1):r>65535&&(r-=65536,s.push(r>>>10&1023|55296),r=56320|1023&r),s.push(r),n+=o}return function(t){const e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);let i="",s=0;for(;s<e;)i+=String.fromCharCode.apply(String,t.slice(s,s+=P));return i}(s)}t.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{const t=new j(1),e={foo:function(){return 42}};return w.setPrototypeOf(e,j.prototype),w.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),w.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),w.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,e,i){return h(t,e,i)},w.setPrototypeOf(o.prototype,j.prototype),w.setPrototypeOf(o,j),o.alloc=function(t,e,i){return function(t,e,i){return a(t),t<=0?r(t):void 0!==e?"string"==typeof i?r(t).fill(e,i):r(t).fill(e):r(t)}(t,e,i)},o.allocUnsafe=function(t){return u(t)},o.allocUnsafeSlow=function(t){return u(t)},o.isBuffer=function(t){return null!=t&&!0===t.e_&&t!==o.prototype},o.compare=function(t,e){if(tt(t,j)&&(t=o.from(t,t.offset,t.byteLength)),tt(e,j)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new b('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,s=e.length;for(let n=0,r=_.min(i,s);n<r;++n)if(t[n]!==e[n]){i=t[n],s=e[n];break}return i<s?-1:s<i?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new b('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const s=o.allocUnsafe(e);let n=0;for(i=0;i<t.length;++i){let e=t[i];if(tt(e,j))n+e.length>s.length?(o.isBuffer(e)||(e=o.from(e)),e.copy(s,n)):j.prototype.set.call(s,e,n);else{if(!o.isBuffer(e))throw new b('"list" argument must be an Array of Buffers');e.copy(s,n)}n+=e.length}return s},o.byteLength=v,o.prototype.e_=!0,o.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)p(this,e,e+1);return this},o.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},o.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},o.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?C(this,0,t):m.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new b("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){let e="";const i=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(t,e,i,s,n){if(tt(t,j)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new b('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),e<0||i>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&e>=i)return 0;if(s>=n)return-1;if(e>=i)return 1;if(this===t)return 0;let r=(n>>>=0)-(s>>>=0),h=(i>>>=0)-(e>>>=0);const a=_.min(r,h),u=this.slice(s,n),c=t.slice(e,i);for(let t=0;t<a;++t)if(u[t]!==c[t]){r=u[t],h=c[t];break}return r<h?-1:h<r?1:0},o.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},o.prototype.indexOf=function(t,e,i){return y(this,t,e,i,!0)},o.prototype.lastIndexOf=function(t,e,i){return y(this,t,e,i,!1)},o.prototype.write=function(t,e,i,s){if(void 0===e)s="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)s=e,i=this.length,e=0;else{if(!isFinite(e))throw new g("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===s&&(s="utf8")):(s=i,i=void 0)}const n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let r=!1;for(;;)switch(s){case"hex":return S(this,t,e,i);case"utf8":case"utf-8":return T(this,t,e,i);case"ascii":case"latin1":case"binary":return k(this,t,e,i);case"base64":return E(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,e,i);default:if(r)throw new b("Unknown encoding: "+s);s=(""+s).toLowerCase(),r=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.i_||this,0)}};const P=4096;function D(t,e,i){let s="";i=_.min(t.length,i);for(let n=e;n<i;++n)s+=String.fromCharCode(127&t[n]);return s}function N(t,e,i){let s="";i=_.min(t.length,i);for(let n=e;n<i;++n)s+=String.fromCharCode(t[n]);return s}function M(t,e,i){const s=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>s)&&(i=s);let n="";for(let s=e;s<i;++s)n+=it[t[s]];return n}function L(t,e,i){const s=t.slice(e,i);let n="";for(let t=0;t<s.length-1;t+=2)n+=String.fromCharCode(s[t]+256*s[t+1]);return n}function B(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,i,s,n,r){if(!o.isBuffer(t))throw new b('"buffer" argument must be a Buffer instance');if(e>n||e<r)throw new RangeError('"value" argument is out of bounds');if(i+s>t.length)throw new RangeError("Index out of range")}function F(t,e,i,s,n){z(e,s,n,t,i,7);let r=Number(e&BigInt(4294967295));t[i++]=r,r>>=8,t[i++]=r,r>>=8,t[i++]=r,r>>=8,t[i++]=r;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,i}function V(t,e,i,s,n){z(e,s,n,t,i,7);let r=Number(e&BigInt(4294967295));t[i+7]=r,r>>=8,t[i+6]=r,r>>=8,t[i+5]=r,r>>=8,t[i+4]=r;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=o,o>>=8,t[i+2]=o,o>>=8,t[i+1]=o,o>>=8,t[i]=o,i+8}function W(t,e,i,s,n,r){if(i+s>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function U(t,e,s,n,r){return e=+e,s>>>=0,r||W(t,0,s,4),i.write(t,e,s,n,23,4),s+4}function G(t,e,s,n,r){return e=+e,s>>>=0,r||W(t,0,s,8),i.write(t,e,s,n,52,8),s+8}o.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const s=this.subarray(t,e);return w.setPrototypeOf(s,o.prototype),s},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=this[t],n=1,r=0;for(;++r<e&&(n*=256);)s+=this[t+r]*n;return s},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=this[t+--e],n=1;for(;e>0&&(n*=256);)s+=this[t+--e]*n;return s},o.prototype.readUint8=o.prototype.readUInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readBigUInt64LE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(s)+(BigInt(n)<<BigInt(32))})),o.prototype.readBigUInt64BE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=e*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(s)<<BigInt(32))+BigInt(n)})),o.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=this[t],n=1,r=0;for(;++r<e&&(n*=256);)s+=this[t+r]*n;return n*=128,s>=n&&(s-=_.pow(2,8*e)),s},o.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=e,n=1,r=this[t+--s];for(;s>0&&(n*=256);)r+=this[t+--s]*n;return n*=128,r>=n&&(r-=_.pow(2,8*e)),r},o.prototype.readInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||B(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt16BE=function(t,e){t>>>=0,e||B(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readBigInt64LE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(s)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),o.prototype.readBigInt64BE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(s)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)})),o.prototype.readFloatLE=function(t,e){return t>>>=0,e||B(t,4,this.length),i.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||B(t,4,this.length),i.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||B(t,8,this.length),i.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||B(t,8,this.length),i.read(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,e,i,s){if(t=+t,e>>>=0,i>>>=0,!s){O(this,t,e,i,_.pow(2,8*i)-1,0)}let n=1,r=0;for(this[e]=255&t;++r<i&&(n*=256);)this[e+r]=t/n&255;return e+i},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,e,i,s){if(t=+t,e>>>=0,i>>>=0,!s){O(this,t,e,i,_.pow(2,8*i)-1,0)}let n=i-1,r=1;for(this[e+n]=255&t;--n>=0&&(r*=256);)this[e+n]=t/r&255;return e+i},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeBigUInt64LE=st((function(t,e){return void 0===e&&(e=0),F(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=st((function(t,e){return void 0===e&&(e=0),V(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(t,e,i,s){if(t=+t,e>>>=0,!s){const s=_.pow(2,8*i-1);O(this,t,e,i,s-1,-s)}let n=0,r=1,o=0;for(this[e]=255&t;++n<i&&(r*=256);)t<0&&0===o&&0!==this[e+n-1]&&(o=1),this[e+n]=(t/r>>0)-o&255;return e+i},o.prototype.writeIntBE=function(t,e,i,s){if(t=+t,e>>>=0,!s){const s=_.pow(2,8*i-1);O(this,t,e,i,s-1,-s)}let n=i-1,r=1,o=0;for(this[e+n]=255&t;--n>=0&&(r*=256);)t<0&&0===o&&0!==this[e+n+1]&&(o=1),this[e+n]=(t/r>>0)-o&255;return e+i},o.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeBigInt64LE=st((function(t,e){return void 0===e&&(e=0),F(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=st((function(t,e){return void 0===e&&(e=0),V(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(t,e,i){return U(this,t,e,!0,i)},o.prototype.writeFloatBE=function(t,e,i){return U(this,t,e,!1,i)},o.prototype.writeDoubleLE=function(t,e,i){return G(this,t,e,!0,i)},o.prototype.writeDoubleBE=function(t,e,i){return G(this,t,e,!1,i)},o.prototype.copy=function(t,e,i,s){if(!o.isBuffer(t))throw new b("argument should be a Buffer");if(i||(i=0),!s&&0!==s&&(s=this.length),e>=t.length&&(e=t.length),e||(e=0),s>0&&s<i&&(s=i),s===i||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-i&&(s=t.length-e+i);const n=s-i;return this===t&&"function"==typeof j.prototype.copyWithin?this.copyWithin(e,i,s):j.prototype.set.call(t,this.subarray(i,s),e),n},o.prototype.fill=function(t,e,i,s){if("string"==typeof t){if("string"==typeof e?(s=e,e=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),void 0!==s&&"string"!=typeof s)throw new b("encoding must be a string");if("string"==typeof s&&!o.isEncoding(s))throw new b("Unknown encoding: "+s);if(1===t.length){const e=t.charCodeAt(0);("utf8"===s&&e<128||"latin1"===s)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{const r=o.isBuffer(t)?t:o.from(t,s),h=r.length;if(0===h)throw new b('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=r[n%h]}return this};const H={};function Z(t,e,i){H[t]=class extends i{get code(){return t}set code(t){w.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}constructor(){super(),w.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(t,"]"),this.stack,delete this.name}}}function X(t){let e="",i=t.length;const s="-"===t[0]?1:0;for(;i>=s+4;i-=3)e="_".concat(t.slice(i-3,i)).concat(e);return"".concat(t.slice(0,i)).concat(e)}function z(t,e,i,s,n,r){if(t>i||t<e){const i="bigint"==typeof e?"n":"";let s;throw s=0===e||e===BigInt(0)?">= 0".concat(i," and < 2").concat(i," ** ").concat(8*(r+1)).concat(i):">= -(2".concat(i," ** ").concat(8*(r+1)-1).concat(i,") and < 2 ** ")+"".concat(8*(r+1)-1).concat(i),new H.ERR_OUT_OF_RANGE("value",s,t)}!function(t,e,i){q(e,"offset"),(void 0===t[e]||void 0===t[e+i])&&Y(e,t.length-(i+1))}(s,n,r)}function q(t,e){if("number"!=typeof t)throw new H.ERR_INVALID_ARG_TYPE(e,"number",t)}function Y(t,e,i){throw _.floor(t)!==t?(q(t,i),new H.ERR_OUT_OF_RANGE("offset","an integer",t)):e<0?new H.ERR_BUFFER_OUT_OF_BOUNDS:new H.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(e),t)}Z("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),Z("ERR_INVALID_ARG_TYPE",(function(t,e){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(typeof e)}),b),Z("ERR_OUT_OF_RANGE",(function(t,e,i){let s='The value of "'.concat(t,'" is out of range.'),n=i;return Number.isInteger(i)&&_.abs(i)>2**32?n=X(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=X(n)),n+="n"),s+=" It must be ".concat(e,". Received ").concat(n),s}),RangeError);const K=/[^+/0-9A-Za-z-_]/g;function Q(t,e){let i;e=e||1/0;const s=t.length;let n=null;const r=[];for(let o=0;o<s;++o){if(i=t.charCodeAt(o),i>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(o+1===s){(e-=3)>-1&&r.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&r.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&r.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;r.push(i)}else if(i<2048){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new g("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function J(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,i,s){let n;for(n=0;n<s&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function tt(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function et(t){return t!=t}const it=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const s=16*i;for(let n=0;n<16;++n)e[s+n]=t[i]+t[n]}return e}();function st(t){return typeof BigInt>"u"?nt:t}function nt(){throw new g("BigInt not supported")}})(_e),function(t,e){var i=_e,s=i.Buffer;function n(t,e){for(var i in t)e[i]=t[i]}function r(t,e,i){return s(t,e,i)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=i:(n(i,e),e.Buffer=r),r.prototype=w.create(s.prototype),n(s,r),r.from=function(t,e,i){if("number"==typeof t)throw new b("Argument must not be a number");return s(t,e,i)},r.alloc=function(t,e,i){if("number"!=typeof t)throw new b("Argument must be a number");var n=s(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},r.allocUnsafe=function(t){if("number"!=typeof t)throw new b("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new b("Argument must be a number");return i.SlowBuffer(t)}}(fe,fe.exports);var ke=65536;var Ee=fe.exports.Buffer,xe=A.crypto||A.msCrypto;xe&&xe.getRandomValues?de.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var i=Ee.allocUnsafe(t);if(t>0)if(t>ke)for(var s=0;s<t;s+=ke)xe.getRandomValues(i.slice(s,s+ke));else xe.getRandomValues(i);return"function"==typeof e?process.nextTick((function(){e(null,i)})):i}:de.exports=function(){throw new g("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")};const Re=de.exports;let Ie=class t{clone(){const e=new t(this.ufrag,this.pwd);return e.setLite(this.lite),e.setEndOfCandidates(this.endOfCandidates),e}plain(){const t={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(t.lite=this.lite),this.endOfCandidates&&(t.endOfCandidates=this.endOfCandidates),t}getUfrag(){return this.ufrag}getPwd(){return this.pwd}isLite(){return this.lite}setLite(t){this.lite=t}isEndOfCandidates(){return this.endOfCandidates}setEndOfCandidates(t){this.endOfCandidates=t}constructor(t,e){this.ufrag=t,this.pwd=e,this.lite=!1,this.endOfCandidates=!1}};Ie.generate=function(t){const e=new Ie,i=Re(8),s=Re(24);return e.ufrag=i.toString("hex"),e.pwd=s.toString("hex"),e.lite=t,e},Ie.expand=function(t){if("ICEInfo"===t.constructor.name)return t;const e=new Ie(t.ufrag,t.pwd);return e.setLite(t.lite),e.setEndOfCandidates(t.endOfCandidates),e},Ie.clone=function(t){return"ICEInfo"===t.constructor.name?t.clone():Ie.expand(t)};var Ce=Ie;const Pe=ne("SEND","RECV");Pe.byValue=function(t){return Pe[t.toUpperCase()]},Pe.toString=function(t){switch(t){case Pe.SEND:return"send";case Pe.RECV:return"recv"}},Pe.reverse=function(t){switch(t){case Pe.SEND:return Pe.RECV;case Pe.RECV:return Pe.SEND}};var De=Pe;const Ne=De;let Me=class t{clone(){var e=new t(this.id,this.direction);return e.setFormats(this.formats),e.setParams(this.params),e}plain(){var t={id:this.id,direction:Ne.toString(this.direction)};for(var[e,i]of(this.formats&&(t.formats=this.formats),this.params.entries()))t.params||(t.params={}),t.params[e]=i;return t}getId(){return this.id}getDirection(){return this.direction}setDirection(t){this.direction=t}getFormats(){return this.formats}setFormats(t){this.formats=[];for(let e=0;e<t.length;++e)this.formats.push(x(t[e]))}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,e){this.params.set(t,e)}constructor(t,e){this.id=t,this.direction=e,this.formats=[],this.params=new Map}};Me.expand=function(t){if("RIDInfo"===t.constructor.name)return t;const e=new Me(t.id,Ne.byValue(t.direction));for(const[i,s]of w.entries(t.params||{}))e.addParam(i,s);return t.formats&&e.setFormats(t.formats),e},Me.clone=function(t){return"RIDInfo"===t.constructor.name?t.clone():Me.expand(t)};var Le=Me;let Be=class t{clone(){return new t(this.id,this.paused)}plain(){return{id:this.id,paused:this.paused}}isPaused(){return this.paused}getId(){return this.id}constructor(t,e){this.paused=e,this.id=t}};Be.expand=function(t){return"SimulcastStreamInfo"===t.constructor.name?t:new Be(t.id,t.paused)},Be.clone=function(t){return"SimulcastStreamInfo"===t.constructor.name?t.clone():Be.expand(t)};var Oe=Be;const Fe=Oe,Ve=De;let We=class t{clone(){const e=new t;for(const t of this.send)e.addSimulcastAlternativeStreams(Ve.SEND,t.map((t=>t.clone())));for(const t of this.recv)e.addSimulcastAlternativeStreams(Ve.RECV,t.map((t=>t.clone())));return e}plain(){const t={send:[],recv:[]};for(const e of this.send)t.send.push(e.map((t=>t.plain())));for(const e of this.recv)t.recv.push(e.map((t=>t.plain())));return t}addSimulcastAlternativeStreams(t,e){return t===Ve.SEND?this.send.push(e):this.recv.push(e)}addSimulcastStream(t,e){return t===Ve.SEND?this.send.push([e]):this.recv.push([e])}getSimulcastStreams(t){return t===Ve.SEND?this.send:this.recv}constructor(){this.send=[],this.recv=[]}};We.expand=function(t){if("SimulcastInfo"===t.constructor.name)return t;const e=new We;for(const i of t.send||[])e.addSimulcastAlternativeStreams(Ve.SEND,i.map(Fe.expand));for(const i of t.recv||[])e.addSimulcastAlternativeStreams(Ve.RECV,i.map(Fe.expand));return e},We.clone=function(t){return"SimulcastInfo"===t.constructor.name?t.clone():We.expand(t)};var Ue=We;const Ge=ne("SENDRECV","SENDONLY","RECVONLY","INACTIVE");Ge.byValue=function(t){return Ge[t.toUpperCase()]},Ge.toString=function(t){switch(t){case Ge.SENDRECV:return"sendrecv";case Ge.SENDONLY:return"sendonly";case Ge.RECVONLY:return"recvonly";case Ge.INACTIVE:return"inactive"}},Ge.reverse=function(t){switch(t){case Ge.SENDRECV:return Ge.SENDRECV;case Ge.SENDONLY:return Ge.RECVONLY;case Ge.RECVONLY:return Ge.SENDONLY;case Ge.INACTIVE:return Ge.INACTIVE}};var He=Ge;let Ze=class t{clone(){return new t(this.port,this.maxMessageSize)}plain(){return{port:this.port,maxMessageSize:this.maxMessageSize}}getPort(){return this.port}getMaxMessageSize(){return this.maxMessageSize}constructor(t,e){this.port=t,this.maxMessageSize=e}};Ze.expand=function(t){return"DataChannelInfo"===t.constructor.name?t:new Ze(t.port,t.maxMessageSize)},Ze.clone=function(t){return"DataChannelInfo"===t.constructor.name?t.clone():Ze.expand(t)};var Xe=Ze;const ze=se,qe=Le,Ye=Ue,Ke=He,je=De,Qe=Xe;let Je=class t{clone(){const e=new t(this.id,this.type);e.setDirection(this.direction),e.setBitrate(this.bitrate);for(const t of this.codecs.values())e.addCodec(t.clone());for(const[t,i]of this.extensions.entries())e.addExtension(t,i);for(const t of this.rids.values())e.addRID(t.clone());return this.simulcast&&e.setSimulcast(this.simulcast.clone()),this.control&&e.setControl(this.control),this.dataChannel&&e.setDataChannel(this.dataChannel.clone()),e}plain(){const t={id:this.id,type:this.type,direction:Ke.toString(this.direction),codecs:[]};this.dataChannel&&(t.dataChannel=this.dataChannel.plain()),this.bitrate&&(t.bitrate=this.bitrate);for(const e of this.codecs.values())t.codecs.push(e.plain());for(const[e,i]of this.extensions.entries())t.extensions||(t.extensions={}),t.extensions[e]=i;for(const e of this.rids.values())t.rids||(t.rids=[]),t.rids.push(e.plain());return this.simulcast&&(t.simulcast=this.simulcast.plain()),this.control&&(t.control=this.control),t}getType(){return this.type}getId(){return this.id}setId(t){this.id=t}addExtension(t,e){this.extensions.set(t,e)}addRID(t){this.rids.set(t.getId(),t)}addCodec(t){this.codecs.set(t.getType(),t)}setCodecs(t){this.codecs=t}getCodecForType(t){return this.codecs.get(t)}getCodec(t){for(const e of this.codecs.values())if(e.getCodec().toLowerCase()===t.toLowerCase())return e;return null}hasCodec(t){return null!==this.getCodec(t)}getCodecs(){return this.codecs}hasRTX(){for(const t of this.codecs.values())if(t.hasRTX())return!0;return!1}getExtensions(){return this.extensions}getRIDs(){return this.rids}getRID(t){return this.rids.get(t)}getBitrate(){return this.bitrate}setBitrate(t){this.bitrate=t}getDirection(){return this.direction}setDirection(t){this.direction=t}hasControl(){return!!this.control}getControl(){return this.control}setControl(t){this.control=t}hasDataChannel(){return!!this.dataChannel}getDataChannel(){return this.dataChannel}setDataChannel(t){this.dataChannel=t}answer(e){const i=new t(this.id,this.type);if(e){i.setDirection(Ke.reverse(this.direction));const{codecs:t,dataChannel:s}=e;if(t){let s;s=Array.isArray(t)?ze.MapFromNames(t,e.rtx,e.rtcpfbs):t;for(let t of this.codecs.values())for(let e of s.values()){if(e.getCodec().toLowerCase()!==t.getCodec().toLowerCase()||"h264"===e.getCodec()&&e.hasParam("packetization-mode")&&e.getParam("packetization-mode")!=t.getParam("packetization-mode","0")||"h264"===e.getCodec()&&e.hasParam("profile-level-id")&&t.hasParam("profile-level-id")&&e.getParam("profile-level-id")!=t.getParam("profile-level-id")||"multiopus"===e.getCodec()&&e.hasParam("num_streams")&&t.hasParam("num_streams")&&e.getParam("num_streams")!=t.getParam("num_streams"))continue;const s=e.clone();s.setType(t.getType()),s.hasRTX()&&s.setRTX(t.getRTX()),t.hasChannels()&&s.setChannels(t.getChannels()),s.addParams(t.getParams()),i.addCodec(s);break}}const n=new Set(e.extensions);for(let[t,e]of this.extensions)n.has(e)&&i.addExtension(t,e);if(e.simulcast&&this.simulcast){const t=new Ye,e=this.simulcast.getSimulcastStreams(je.SEND);if(e)for(const i of e){const e=i.map((t=>t.clone()));t.addSimulcastAlternativeStreams(je.RECV,e)}const s=this.simulcast.getSimulcastStreams(je.RECV);if(s)for(const e of s){const i=e.map((t=>t.clone()));t.addSimulcastAlternativeStreams(je.SEND,i)}for(const t of this.rids.values()){const e=t.clone();e.setDirection(je.reverse(t.getDirection())),i.addRID(e)}i.setSimulcast(t)}if(s&&this.dataChannel){const t=new Qe(this.dataChannel.getPort(),s.maxMessageSize?s.maxMessageSize:this.dataChannel.getMaxMessageSize());i.setDataChannel(t)}}else i.setDirection(Ke.INACTIVE);return i}getSimulcast(){return this.simulcast}setSimulcast(t){this.simulcast=t}constructor(t,e){this.id=t,this.type=e,this.direction=Ke.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.bitrate=0,this.control=null,this.dataChannel=null}};function $e(t){const e=t.toString();if(!/^\d+$/.test(e))throw new g("invalid integer ".concat(e));return x(e)}Je.create=function(t,e,i){!i&&"string"!=typeof e&&(i=e,e=t);const s=new Je(t,e);if(i){const{codecs:t}=i;t&&(Array.isArray(t)?s.setCodecs(ze.MapFromNames(t,i.rtx,i.rtcpfbs)):s.setCodecs(t))}else s.setDirection(Ke.INACTIVE);return s},Je.expand=function(t){if("MediaInfo"===t.constructor.name)return t;const e=new Je(t.id,t.type);if(t.direction&&e.setDirection(Ke.byValue(t.direction)),e.setBitrate(t.bitrate),t.dataChannel){const i=Qe.expand(t.dataChannel);i&&e.setDataChannel(i)}for(const[i,s]of w.entries(t.extensions))e.addExtension($e(i),s);for(const i of t.codecs){const t=ze.expand(i);t&&e.addCodec(t)}for(const i of t.rids||[]){const t=qe.expand(i);e.addRID(t)}return t.simulcast&&e.setSimulcast(Ye.expand(t.simulcast)),t.control&&e.setControl(t.control),e},Je.clone=function(t){return"MediaInfo"===t.constructor.name?t.clone():Je.expand(t)};var ti=Je;let ei=class t{clone(){return new t(this.semantics,this.ssrcs)}plain(){const t={semantics:this.semantics,ssrcs:[]};for(let e=0;e<this.ssrcs.length;++e)t.ssrcs.push(this.ssrcs[e]);return t}getSemantics(){return this.semantics}getSSRCs(){return this.ssrcs}constructor(t,e){this.semantics=t,this.ssrcs=[];for(let t=0;t<e.length;++t)this.ssrcs.push(x(e[t]))}};ei.expand=function(t){return"SourceGroupInfo"===t.constructor.name?t:new ei(t.semantics,t.ssrcs)},ei.clone=function(t){return"SourceGroupInfo"===t.constructor.name?t.clone():ei.expand(t)};var ii=ei;let si=class t{clone(){const e=new t(this.ssrc);return e.setCName(this.cname),e.setStreamId(this.streamId),e.setTrackId(this.trackId),e}plain(){const t={ssrc:this.ssrc};return this.cname&&(t.cname=this.cname),this.streamId&&(t.streamId=this.streamId),this.trackId&&(t.trackId=this.trackId),t}getCName(){return this.cname}setCName(t){this.cname=t}getStreamId(){return this.streamId}setStreamId(t){this.streamId=t}getTrackId(){return this.trackId}setTrackId(t){this.trackId=t}getSSRC(){return this.ssrc}constructor(t){this.ssrc=t}};si.expand=function(t){if("SourceInfo"===t.constructor.name)return t;const e=new si(t.ssrc);return e.setCName(t.cname),e.setStreamId(t.streamId),e.setTrackId(t.trackId),e},si.clone=function(t){return"SourceInfo"===t.constructor.name?t.clone():si.expand(t)};var ni=si;const ri=se;let oi=class t{clone(){var e=new t(this.id,this.paused);for(let t of this.codecs.values())e.addCodec(t.clone());return e.setParams(this.params),e}plain(){var t={id:this.id,paused:this.paused,codecs:{},params:{}};for(var[e,i]of this.codecs.entries())t.codecs[e]=i.plain();for(var[e,s]of this.params.entries())t.params[e]=s;return t}getId(){return this.id}getCodecs(){return this.codecs}addCodec(t){this.codecs.set(t.getType(),t)}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,e){this.params.set(t,e)}isPaused(){return this.paused}constructor(t,e=!1){this.id=t,this.paused=e,this.codecs=new Map,this.params=new Map}};oi.expand=function(t){if("TrackEncodingInfo"===t.constructor.name)return t;const e=new oi(t.id,t.paused);for(const i of w.values(t.codecs||{}))e.addCodec(ri.expand(i));for(const[i,s]of w.entries(t.params||{}))e.addParam(i,s);return e},oi.clone=function(t){return"TrackEncodingInfo"===t.constructor.name?t.clone():oi.expand(t)};var hi=oi;const ai=ii,ui=hi;let ci=class t{clone(){const e=new t(this.media,this.id);this.mediaId&&e.setMediaId(this.mediaId);for(let t=0;t<this.ssrcs.length;++t)e.addSSRC(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)e.addSourceGroup(this.groups[t].clone());for(let t=0;t<this.encodings.length;++t){const i=[];for(let e=0;e<this.encodings[t].length;++e)i.push(this.encodings[t][e].clone());e.addAlternativeEncodings(i)}return e}plain(){const t={media:this.media,id:this.id,ssrcs:[]};this.mediaId&&(t.mediaId=this.mediaId);for(let e=0;e<this.ssrcs.length;++e)t.ssrcs.push(this.ssrcs[e]);for(let e=0;e<this.groups.length;++e)t.groups||(t.groups=[]),t.groups.push(this.groups[e].plain());for(let e=0;e<this.encodings.length;++e){const i=[];for(let t=0;t<this.encodings[e].length;++t)i.push(this.encodings[e][t].plain());i.length&&(t.encodings||(t.encodings=[]),t.encodings.push(i))}return t}getMedia(){return this.media}setMediaId(t){this.mediaId=t}getMediaId(){return this.mediaId}getId(){return this.id}addSSRC(t){this.ssrcs.push(t)}getSSRCs(){return this.ssrcs}addSourceGroup(t){this.groups.push(t)}getSourceGroup(t){for(const e of this.groups)if(e.getSemantics().toLowerCase()===t.toLowerCase())return e;return null}getSourceGroups(){return this.groups}getSourceGroupsForMediaSSRC(t){return this.groups.filter((e=>e.getSSRCs()[0]===t))}hasSourceGroup(t){for(const e of this.groups)if(e.getSemantics().toLowerCase()===t.toLowerCase())return!0;return!1}getEncodings(){return this.encodings}addEncoding(t){this.encodings.push([t])}addAlternativeEncodings(t){this.encodings.push(t)}setEncodings(t){this.encodings=t}getEncodingSources(){const t=[];if(this.encodings.length)for(const e of this.encodings)for(const i of e){const e={id:i.getId(),rid:i.getId()},s=i.getParams(),n=null==s?void 0:s.get("ssrc");if(void 0!==n){e.media=x(n);for(const t of this.getSourceGroupsForMediaSSRC(e.media))switch(t.getSemantics()){case"FID":e.rtx=t.getSSRCs()[1];break;case"FEC-FR":e.fec=t.getSSRCs()[1]}}t.push(e)}else if(this.hasSourceGroup("SIM")){const e=this.getSourceGroup("SIM").getSSRCs();this.getSourceGroups();for(const i of e){const e={id:String(i),media:i};for(const t of this.getSourceGroupsForMediaSSRC(e.media))switch(t.getSemantics()){case"FID":e.rtx=t.getSSRCs()[1];break;case"FEC-FR":e.fec=t.getSSRCs()[1]}t.push(e)}}else{const e={id:""};if(this.ssrcs.length){e.media=this.ssrcs[0];for(const t of this.getSourceGroupsForMediaSSRC(e.media))switch(t.getSemantics()){case"FID":e.rtx=t.getSSRCs()[1];break;case"FEC-FR":e.fec=t.getSSRCs()[1]}}t.push(e)}return t}constructor(t,e){this.media=t,this.id=e,this.ssrcs=[],this.groups=[],this.encodings=[]}};ci.expand=function(t){var e,i;if("TrackInfo"===t.constructor.name)return t;const s=new ci(t.media,t.id);if(t.mediaId&&s.setMediaId(t.mediaId),Array.isArray(t.ssrcs))for(const e of t.ssrcs)s.addSSRC(e);else if(void 0!==(null===(e=t.ssrcs)||void 0===e?void 0:e.media)){const e=t.ssrcs.media;if(s.addSSRC(e),void 0!==t.ssrcs.rtx){const i=t.ssrcs.rtx;s.addSSRC(i),s.addSourceGroup(new ai("FID",[e,i]))}if(void 0!==t.ssrcs.fec){const i=t.ssrcs.fec;s.addSSRC(i),s.addSourceGroup(new ai("FEC-FR",[e,i]))}}if(t.rid){const e=new ui(t.rid);void 0!==(null===(i=t.ssrcs)||void 0===i?void 0:i.media)&&e.addParam("ssrc",t.ssrcs.media),s.addAlternativeEncodings([e])}for(const e of t.groups||[])s.addSourceGroup(ai.expand(e));for(const e of t.encodings||[]){const t=[];for(const i of e)t.push(ui.expand(i));s.addAlternativeEncodings(t)}return s},ci.clone=function(t){return"TrackInfo"===t.constructor.name?t.clone():ci.expand(t)};var li=ci;const di=li;let fi=class t{clone(){const e=new t(this.id);for(const t of this.tracks.values())e.addTrack(t.clone());return e}plain(){const t={id:this.id,tracks:[]};for(const e of this.tracks.values())t.tracks.push(e.plain());return t}getId(){return this.id}addTrack(t){this.tracks.set(t.getId(),t)}removeTrack(t){return this.tracks.delete(t.getId())}removeTrackById(t){return this.tracks.delete(t)}getFirstTrack(t){for(let e of this.tracks.values())if(e.getMedia().toLowerCase()===t.toLowerCase())return e;return null}getTracks(){return this.tracks}removeAllTracks(){this.tracks.clear()}getTrack(t){return this.tracks.get(t)}constructor(t){this.id=t,this.tracks=new Map}};fi.expand=function(t){if("StreamInfo"===t.constructor.name)return t;const e=new fi(t.id);for(const i of t.tracks||[]){const t=di.expand(i);t&&e.addTrack(t)}return e},fi.clone=function(t){return"StreamInfo"===t.constructor.name?t.clone():fi.expand(t)};var _i=fi;const vi=Ft,mi=function(t){const e=new Intl.Collator(t,{sensitivity:"base"});return(t,i)=>0==e.compare(t,i)}("en-US"),gi=Jt,pi=se,wi=te,yi=ue,bi=le,Ai=Ce,Si=ti,Ti=oe,ki=He,Ei=De,xi=ii,Ri=ni,Ii=_i,Ci=li,Pi=hi,Di=Ue,Ni=Oe,Mi=Le,Li=Xe;let Bi=class t{clone(){const e=new t(this.version);for(const t of this.medias)e.addMedia(t.clone());for(const t of this.streams.values())e.addStream(t.clone());for(const t of this.candidates)e.addCandidate(t.clone());return e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.crypto&&e.setCrypto(this.crypto.clone()),e.setExtmapAllowMixed(this.extmapAllowMixed),e}plain(){const t={version:this.version,streams:[],medias:[],candidates:[]};for(const e of this.medias)t.medias.push(e.plain());for(const e of this.streams.values())t.streams.push(e.plain());for(const e of this.candidates)t.candidates.push(e.plain());return this.ice&&(t.ice=this.ice.plain()),this.dtls&&(t.dtls=this.dtls.plain()),this.crypto&&(t.crypto=this.crypto.plain()),this.extmapAllowMixed||(t.extmapAllowMixedNotSupported=!this.extmapAllowMixed),t}unify(){const e=new t(this.version);for(const t of this.medias)e.addMedia(t.clone());const i={audio:e.getMediasByType("audio"),video:e.getMediasByType("video")};for(const t of this.streams.values()){const s=t.clone();for(const t of s.getTracks().values()){let s=i[t.getMedia()].pop();s||(s=this.getMedia(t.getMedia()).clone(),s.setId(t.getId()),e.addMedia(s)),t.setMediaId(s.getId())}e.addStream(s)}for(const t of this.candidates)e.addCandidate(t.clone());return this.ice&&e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.crypto&&e.setCrypto(this.crypto.clone()),e}setVersion(t){this.version=t}addMedia(t){this.medias.push(t)}getMedia(t){for(let e in this.medias){let i=this.medias[e];if(mi(i.getType(),t))return i}return null}getMediasByType(t){let e=[];for(let i in this.medias){let s=this.medias[i];mi(s.getType(),t)&&e.push(s)}return e}getMediaById(t){for(const e of this.medias)if(mi(e.getId(),t))return e;return null}replaceMedia(t){for(let e in this.medias)if(this.medias[e].getId()==t.getId())return this.medias[e]=t,!0;return!1}getMedias(){return this.medias}getVersion(){return this.version}getDTLS(){return this.dtls}setDTLS(t){this.dtls=t}hasCrypto(){return!!this.crypto}getCrypto(){return this.crypto}setCrypto(t){this.crypto=t}hasICE(){return!!this.ice}getICE(){return this.ice}setICE(t){this.ice=t}addCandidate(t){for(const e of this.candidates)if(e.equals(t))return;this.candidates.push(t)}addCandidates(t){for(const e of t)this.addCandidate(e)}getCandidates(){return this.candidates}getStream(t){return this.streams.get(t)}getStreams(){return this.streams}getFirstStream(){for(const t of this.streams.values())return t;return null}addStream(t){this.streams.set(t.getId(),t)}removeStream(t){return this.streams.delete(t.getId())}removeAllStreams(){this.streams.clear()}getTracksByMediaType(t){let e=[];for(const i of this.streams.values())for(const[s,n]of i.getTracks())mi(n.getMedia(),t)&&e.push(n);return e}getTrackByMediaId(t){for(const e of this.streams.values())for(const[i,s]of e.getTracks())if(s.getMediaId()==t)return s;return null}getStreamByMediaId(t){for(const e of this.streams.values())for(const[i,s]of e.getTracks())if(s.getMediaId()==t)return e;return null}getExtmapAllowMixed(){return this.extmapAllowMixed}setExtmapAllowMixed(t){this.extmapAllowMixed=t}answer(e){const i=new t;e.ice&&(e.ice instanceof Ai?i.setICE(e.ice.clone()):i.setICE(Ai.expand(e.ice))),e.dtls&&(e.dtls instanceof yi?i.setDTLS(e.dtls):i.setDTLS(yi.expand(e.dtls))),e.crypto&&(e.crypto instanceof bi?i.setCrypto(e.crypto):i.setCrypto(bi.expand(e.crypto)));for(let t=0;e.candidates&&t<e.candidates.length;++t)e.candidates[t]instanceof gi?i.addCandidate(e.candidates[t].clone()):i.addCandidate(gi.expand(e.candidates[t]));for(const t of this.medias){const s=e&&e.capabilities&&e.capabilities[t.getType()];i.addMedia(t.answer(s))}return i.setExtmapAllowMixed(this.extmapAllowMixed),i}toString(){let t={version:0,media:[]};t.version=0,t.origin={username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},t.name="semantic-sdp",t.connection={version:4,ip:"0.0.0.0"},t.timing={start:0,stop:0},this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),t.msidSemantic={semantic:"WMS",token:"*"},t.groups=[],this.extmapAllowMixed&&(t.extmapAllowMixed="extmap-allow-mixed");const e=[];for(const i of this.medias){let s={type:i.getType(),port:9,protocol:"",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};s.direction=ki.toString(i.getDirection()),this.extmapAllowMixed&&(s.extmapAllowMixed="extmap-allow-mixed"),s.mid=i.getId(),e.push(i.getId()),i.hasControl()&&(s.control=i.getControl()),i.getBitrate()>0&&(s.bandwidth.push({type:"AS",limit:i.getBitrate()}),s.bandwidth.push({type:"TIAS",limit:1e3*i.getBitrate()}));let n=this.getCandidates();for(const t of n)s.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});if(this.getICE()&&(s.iceUfrag=this.getICE().getUfrag(),s.icePwd=this.getICE().getPwd()),mi("audio",i.getType())||mi("video",i.getType())){s.rtcpMux="rtcp-mux",s.rtcpRsize="rtcp-rsize",this.getDTLS()?(s.protocol="UDP/TLS/RTP/SAVPF",s.fingerprint={type:this.getDTLS().getHash(),hash:this.getDTLS().getFingerprint()},s.setup=Ti.toString(this.getDTLS().getSetup())):this.getCrypto()?(s.protocol="RTP/SAVPF",s.crypto=[{id:this.getCrypto().getTag(),suite:this.getCrypto().getSuite(),config:this.getCrypto().getKeyParams()}]):s.protocol="RTP/AVP";for(const t of i.getCodecs().values()){mi("video",i.getType())?s.rtp.push({payload:t.getType(),codec:t.getCodec().toUpperCase(),rate:9e4}):mi("opus",t.getCodec())||mi("multiopus",t.getCodec())?s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:48e3,encoding:t.getChannels()}):s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:8e3});for(const e of t.getRTCPFeedbacks())s.rtcpFb.push({payload:t.getType(),type:e.getId(),subtype:e.getParams().join(" ")});t.hasRTX()&&(s.rtp.push({payload:t.getRTX(),codec:"rtx",rate:9e4}),s.fmtp.push({payload:t.getRTX(),config:"apt="+t.getType()}));const e=t.getParams();if(w.keys(e).length){const i={payload:t.getType(),config:""};for(const t in e)i.config.length&&(i.config+=";"),w.hasOwnProperty.call(e,t)?i.config+=t+"="+e[t]:i.config+=t;s.fmtp.push(i)}}const t=[];for(const e of s.rtp)t.push(e.payload);s.payloads=t.join(" ");for(let[t,e]of i.getExtensions().entries())s.ext.push({value:t,uri:e});for(let t of i.getRIDs().values()){let e={id:t.getId(),direction:Ei.toString(t.getDirection()),params:""};t.getFormats().length&&(e.params="pt="+t.getFormats().join(","));for(let[i,s]of t.getParams().entries())e.params+=(e.params.length?";":"")+i+"="+s;s.rids.push(e)}const e=i.getSimulcast();if(e){let t=1;s.simulcast={};const i=e.getSimulcastStreams(Ei.SEND),n=e.getSimulcastStreams(Ei.RECV);if(i&&i.length){let e="";for(const t of i){let i="";for(const e of t)i+=(i.length?",":"")+(e.isPaused()?"~":"")+e.getId();e+=(e.length?";":"")+i}s.simulcast["dir"+t]="send",s.simulcast["list"+t]=e,t++}if(n&&n.length){let e="";for(const t of n){let i="";for(const e of t)i+=(i.length?",":"")+(e.isPaused()?"~":"")+e.getId();e+=(e.length?";":"")+i}s.simulcast["dir"+t]="recv",s.simulcast["list"+t]=e,t++}}}else if(i.hasDataChannel()){s.protocol="UDP/DTLS/SCTP",s.payloads="webrtc-datachannel";const t=i.getDataChannel();s.sctpPort=t.getPort(),s.maxMessageSize=t.getMaxMessageSize()}t.media.push(s)}for(let e of this.streams.values())for(let i of e.getTracks().values())for(let s in t.media){let n=t.media[s];if(i.getMediaId()){if(i.getMediaId()==n.mid){let t=i.getSourceGroups();for(let e in t){let i=t[e];n.ssrcGroups.push({semantics:i.getSemantics(),ssrcs:i.getSSRCs().join(" ")})}let s=i.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:e.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:e.getId()+" "+i.getId()});n.msid=e.getId()+" "+i.getId();break}}else if(mi(n.type,i.getMedia())){let t=i.getSourceGroups();for(let e in t){let i=t[e];n.ssrcGroups.push({semantics:i.getSemantics(),ssrcs:i.getSSRCs().join(" ")})}let s=i.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:e.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:e.getId()+" "+i.getId()});break}}const i={type:"BUNDLE",mids:e.join(" ")};return t.groups.push(i),vi.write(t)}toIceFragmentString(){let t={version:0,media:[],candidates:[]};this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),this.getICE()&&(t.iceUfrag=this.getICE().getUfrag(),t.icePwd=this.getICE().getPwd());for(const e of this.getCandidates())t.candidates.push({foundation:e.getFoundation(),component:e.getComponentId(),transport:e.getTransport(),priority:e.getPriority(),ip:e.getAddress(),port:e.getPort(),type:e.getType(),raddr:e.getRelAddr(),rport:e.getRelPort()});return vi.write(t).slice(10)}constructor(t){this.version=t||1,this.streams=new Map,this.medias=new Array,this.candidates=new Array,this.ice=null,this.dtls=null,this.crypto=null,this.extmapAllowMixed=!0}};Bi.create=function(t){var e;const i=new Bi;if(t.streams)for(const e of t.streams)i.addStream(Ii.expand(e));t.ice&&(t.ice instanceof Ai?i.setICE(t.ice.clone()):i.setICE(Ai.expand(t.ice))),t.dtls&&(t.dtls instanceof yi?i.setDTLS(t.dtls):i.setDTLS(yi.expand(t.dtls))),t.crypto&&(t.crypto instanceof bi?i.setCrypto(t.crypto):i.setCrypto(bi.expand(t.crypto)));for(const e of t.candidates||[])e instanceof gi?i.addCandidate(e.clone()):i.addCandidate(gi.expand(e));let s=96,n=1,r=0;for(const[o,h]of w.entries(t.capabilities||{}))if(t.unified&&null!==(e=t.streams)&&void 0!==e&&e.length)for(const t of i.getTracksByMediaType(o)){const e=Si.create(t.getMediaId(),o,h);for(const[t,i]of e.getCodecs())i.getType()>=96&&i.setType(s++),i.getRTX()&&i.setRTX(s++);if(h.extensions)for(let t of h.extensions)15===n&&n++,e.addExtension(n++,t);i.addMedia(e)}else{const e=Si.create(t.unified?String(r++):o,o,h);for(const[t,i]of e.getCodecs())i.getType()>=96&&i.setType(s++),i.getRTX()&&i.setRTX(s++);if(h.extensions)for(let t of h.extensions)15===n&&n++,e.addExtension(n++,t);i.addMedia(e)}return i},Bi.expand=function(t){if("SDPInfo"===t.constructor.name)return t;const e=new Bi(t.version);for(const i of t.medias||[]){const t=Si.expand(i);t&&e.addMedia(t)}for(const i of t.streams||[]){const t=Ii.expand(i);t&&e.addStream(t)}for(const i of t.candidates||[]){const t=gi.expand(i);t&&e.addCandidate(t)}return t.ice&&e.setICE(Ai.expand(t.ice)),t.dtls&&e.setDTLS(yi.expand(t.dtls)),t.crypto&&e.setCrypto(bi.expand(t.crypto)),t.extmapAllowMixedNotSupported&&(this.extmapAllowMixed=!t.extmapAllowMixedNotSupported),e},Bi.clone=function(t){return"SDPInfo"===t.constructor.name?t.clone():Bi.expand(t)},Bi.process=function(t){return Bi.parse(t)},Bi.parse=function(t){const e=vi.parse(t),i=new Bi;if(i.setVersion(e.version),e.iceUfrag&&e.icePwd){const t=String(e.iceUfrag),s=String(e.icePwd),n=new Ai(t,s);n.setLite("ice-lite"==e.icelite),n.setEndOfCandidates("end-of-candidates"==e.endOfCandidates),i.setICE(n)}for(let t in e.media){const s=e.media[t],n=s.type,r=s.mid?s.mid.toString():t,o=new Si(r,n);if(s.iceUfrag&&s.icePwd){const t=String(s.iceUfrag),n=String(s.icePwd),r=new Ai(t,n);r.setLite("ice-lite"==e.icelite),r.setEndOfCandidates("end-of-candidates"==s.endOfCandidates),i.setICE(r)}for(let t=0;s.candidates&&t<s.candidates.length;++t){const e=s.candidates[t],n=new gi(e.foundation,e.component,e.transport,e.priority,e.ip,e.port,e.type,e.raddr,e.rport);i.addCandidate(n)}const h=s.fingerprint||e.fingerprint;if(h){const t=h.type,e=h.hash;let n=Ti.ACTPASS;s.setup&&(n=Ti.byValue(s.setup)),i.setDTLS(new yi(n,t,e))}if(s.crypto){const t=s.crypto[0];i.setCrypto(new bi(t.id,t.suite,t.config,t.sessionConfig))}let a=ki.SENDRECV;s.direction&&(a=ki.byValue(s.direction),o.setDirection(a)),s.control&&o.setControl(s.control),i.setExtmapAllowMixed("extmap-allow-mixed"==s.extmapAllowMixed||"extmap-allow-mixed"==e.extmapAllowMixed);const u=new Map;for(let t in s.rtp){const e=s.rtp[t],i=e.payload,n=e.codec;if("RED"===n.toUpperCase()||"ULPFEC"===n.toUpperCase())continue;let r={};for(let t in s.fmtp){const e=s.fmtp[t];if(e.payload===i){const t=e.config.split(";");for(let e in t){const i=t[e].split("="),s=i[0].trim(),n=i.splice(1).join("=").trim();r[s]=n}}}if("RTX"===n.toUpperCase())u.set(x(r.apt),i);else{const t=new pi(n,i,r);e.encoding>1&&t.setChannels(e.encoding),o.addCodec(t)}}for(let t of u.entries()){const e=o.getCodecForType(t[0]);e&&e.setRTX(t[1])}for(let t=0;s.rtcpFb&&t<s.rtcpFb.length;++t){const e=o.getCodecForType(s.rtcpFb[t].payload);if(e){const i=s.rtcpFb[t].type,n=s.rtcpFb[t].subtype?s.rtcpFb[t].subtype.split(" "):null;e.addRTCPFeedback(new wi(i,n))}}const c=s.ext;for(let t in c){const e=c[t];o.addExtension(e.value,e.uri)}const l=s.rids;for(let t in l){const e=l[t],i=new Mi(e.id,Ei.byValue(e.direction));let s=[];const n=new Map;if(e.params){const t=vi.parseParams(e.params);for(let e in t)"pt"===e?s=t[e].split(","):n.set(e,t[e]);i.setFormats(s),i.setParams(n)}o.addRID(i)}const d=[];if(s.simulcast){const t=new Di;if(s.simulcast.dir1){const e=Ei.byValue(s.simulcast.dir1),i=vi.parseSimulcastStreamList(s.simulcast.list1);for(let s=0;s<i.length;++s){const n=[];for(let t=0;t<i[s].length;++t)n.push(new Ni(i[s][t].scid,i[s][t].paused));t.addSimulcastAlternativeStreams(e,n)}}if(s.simulcast.dir2){const e=Ei.byValue(s.simulcast.dir2),i=vi.parseSimulcastStreamList(s.simulcast.list2);for(let s=0;s<i.length;++s){const n=[];for(let t=0;t<i[s].length;++t)n.push(new Ni(i[s][t].scid,i[s][t].paused));t.addSimulcastAlternativeStreams(e,n)}}for(let e of t.getSimulcastStreams(Ei.SEND)){const t=[];for(let i=0;i<e.length;i++){const s=new Pi(e[i].getId(),e[i].isPaused()),n=o.getRID(s.getId());if(n){const e=n.getFormats();for(let t=0;e&&t<e.length;++t){const i=o.getCodecForType(e[t]);i&&s.addCodec(i)}s.setParams(n.getParams()),t.push(s)}}t.length&&d.push(t)}o.setSimulcast(t)}const f=new Map;if(s.ssrcs)for(let t in s.ssrcs){let e=s.ssrcs[t],o=e.id,h=e.attribute,a=e.value,u=f.get(o);if(u||(u=new Ri(o),f.set(u.getSSRC(),u)),mi("cname",h))u.setCName(a);else if(mi("msid",h)){let t=a.split(" "),e=t[0],s=t[1];u.setStreamId(e),u.setTrackId(s);let h=i.getStream(e);h||(h=new Ii(e),i.addStream(h));let c=h.getTrack(s);c||(c=new Ci(n,s),c.setMediaId(r),c.setEncodings(d),h.addTrack(c)),c.addSSRC(o)}}if(s.msid){let t=s.msid.split(" "),e=t[0],o=t[1],h=i.getStream(e);h||(h=new Ii(e),i.addStream(h));let a=h.getTrack(o);a||(a=new Ci(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a));for(let[t,i]of f.entries())i.getStreamId()||(i.setStreamId(e),i.setTrackId(o),a.addSSRC(t))}for(let[t,e]of f.entries())if(!e.getStreamId()){let s=e.getCName(),o=r;e.setStreamId(s),e.setTrackId(o);let h=i.getStream(s);h||(h=new Ii(s),i.addStream(h));let a=h.getTrack(o);a||(a=new Ci(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a)),a.addSSRC(t)}if(s.ssrcGroups)for(let t in s.ssrcGroups){let e=s.ssrcGroups[t],n=e.ssrcs.split(" "),r=new xi(e.semantics,n),o=f.get(x(n[0]));o&&i.getStream(o.getStreamId()).getTrack(o.getTrackId()).addSourceGroup(r)}if("application"==s.type&&"webrtc-datachannel"==s.payloads){const t=new Li(s.sctpPort,s.maxMessageSize);o.setDataChannel(t)}i.addMedia(o)}return i};var Oi=Bi;w.defineProperty(Ot,"__esModule",{value:!0});var Fi=Ot.SDPInfo=Oi;Ot.CandidateInfo=Jt,Ot.CodecInfo=se,Ot.DTLSInfo=ue,Ot.CryptoInfo=le,Ot.ICEInfo=Ce;var Vi=Ot.MediaInfo=ti;Ot.Setup=oe,Ot.SourceGroupInfo=ii,Ot.SourceInfo=ni,Ot.StreamInfo=_i,Ot.TrackInfo=li,Ot.RTCPFeedbackInfo=te,Ot.TrackEncodingInfo=hi,Ot.RIDInfo=Le,Ot.SimulcastInfo=Ue,Ot.SimulcastStreamInfo=Oe,Ot.DataChannelInfo=Xe;var Wi=Ot.Direction=He,Ui={exports:{}};!function(t,e){!function(i,s){var n="function",r="undefined",o="object",h="string",a="major",u="model",c="name",l="type",d="vendor",f="version",_="architecture",v="console",m="mobile",g="tablet",p="smarttv",w="wearable",y="embedded",b="Amazon",A="Apple",S="ASUS",T="BlackBerry",k="Browser",E="Chrome",x="Firefox",R="Google",I="Huawei",C="LG",P="Microsoft",D="Motorola",N="Opera",M="Samsung",L="Sharp",B="Sony",O="Xiaomi",F="Zebra",V="Facebook",W="Chromium OS",U="Mac OS",G=" Browser",H=function(t){for(var e={},i=0;i<t.length;i++)e[t[i].toUpperCase()]=t[i];return e},Z=function(t,e){return typeof t===h&&-1!==X(e).indexOf(X(t))},X=function(t){return t.toLowerCase()},z=function(t,e){if(typeof t===h)return t=t.replace(/^\s\s*/,""),typeof e===r?t:t.substring(0,500)},q=function(t,e){for(var i,r,h,a,u,c,l=0;l<e.length&&!u;){var d=e[l],f=e[l+1];for(i=r=0;i<d.length&&!u&&d[i];)if(u=d[i++].exec(t))for(h=0;h<f.length;h++)c=u[++r],typeof(a=f[h])===o&&a.length>0?2===a.length?typeof a[1]==n?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==n||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):s:this[a[0]]=c?a[1].call(this,c,a[2]):s:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):s):this[a]=c||s;l+=2}},Y=function(t,e){for(var i in e)if(typeof e[i]===o&&e[i].length>0){for(var n=0;n<e[i].length;n++)if(Z(e[i][n],t))return"?"===i?s:i}else if(Z(e[i],t))return"?"===i?s:i;return e.hasOwnProperty("*")?e["*"]:t},K={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},j={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,f],[/opios[\/ ]+([\w\.]+)/i],[f,[c,N+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[c,N+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[c,N]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[c,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[c,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[c,"UC"+k]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[c,"Smart Lenovo "+k]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+k],f],[/\bfocus\/([\w\.]+)/i],[f,[c,x+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[c,N+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[c,N+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI "+k]],[/fxios\/([-\w\.]+)/i],[f,[c,x]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360"+G]],[/\b(qq)\/([\w\.]+)/i],[[c,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1"+G],f],[/samsungbrowser\/([\w\.]+)/i],[f,[c,M+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[c,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,V],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[c,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,E+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[c,"Android "+k]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[f,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],f],[/(wolvic)\/([\w\.]+)/i],[c,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[c,x+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[c,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,X]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,"",X]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,X]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[d,M],[l,g]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[d,M],[l,m]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[d,A],[l,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[d,A],[l,g]],[/(macintosh);/i],[u,[d,A]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[d,L],[l,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[d,I],[l,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[d,I],[l,m]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[d,O],[l,m]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[d,O],[l,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[d,"OPPO"],[l,m]],[/\b(opd2\d{3}a?) bui/i],[u,[d,"OPPO"],[l,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[d,"Vivo"],[l,m]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[d,"Realme"],[l,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[d,D],[l,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[d,D],[l,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[d,C],[l,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[d,C],[l,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[d,"Lenovo"],[l,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[d,"Nokia"],[l,m]],[/(pixel c)\b/i],[u,[d,R],[l,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[d,R],[l,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,B],[l,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[d,B],[l,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[d,"OnePlus"],[l,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[d,b],[l,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[d,b],[l,m]],[/(playbook);[-\w\),; ]+(rim)/i],[u,d,[l,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[d,T],[l,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[d,S],[l,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[d,S],[l,m]],[/(nexus 9)/i],[u,[d,"HTC"],[l,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[u,/_/g," "],[l,m]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[d,"TCL"],[l,g]],[/(itel) ((\w+))/i],[[d,X],u,[l,Y,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[d,"Acer"],[l,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[d,"Meizu"],[l,m]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[d,"Ulefone"],[l,m]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[d,"Nothing"],[l,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,u,[l,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,u,[l,g]],[/(surface duo)/i],[u,[d,P],[l,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[d,"Fairphone"],[l,m]],[/(u304aa)/i],[u,[d,"AT&T"],[l,m]],[/\bsie-(\w*)/i],[u,[d,"Siemens"],[l,m]],[/\b(rct\w+) b/i],[u,[d,"RCA"],[l,g]],[/\b(venue[\d ]{2,7}) b/i],[u,[d,"Dell"],[l,g]],[/\b(q(?:mv|ta)\w+) b/i],[u,[d,"Verizon"],[l,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[d,"Barnes & Noble"],[l,g]],[/\b(tm\d{3}\w+) b/i],[u,[d,"NuVision"],[l,g]],[/\b(k88) b/i],[u,[d,"ZTE"],[l,g]],[/\b(nx\d{3}j) b/i],[u,[d,"ZTE"],[l,m]],[/\b(gen\d{3}) b.+49h/i],[u,[d,"Swiss"],[l,m]],[/\b(zur\d{3}) b/i],[u,[d,"Swiss"],[l,g]],[/\b((zeki)?tb.*\b) b/i],[u,[d,"Zeki"],[l,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],u,[l,g]],[/\b(ns-?\w{0,9}) b/i],[u,[d,"Insignia"],[l,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[d,"NextBook"],[l,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],u,[l,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],u,[l,m]],[/\b(ph-1) /i],[u,[d,"Essential"],[l,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[d,"Envizen"],[l,g]],[/\b(trio[-\w\. ]+) b/i],[u,[d,"MachSpeed"],[l,g]],[/\btu_(1491) b/i],[u,[d,"Rotor"],[l,g]],[/(shield[\w ]+) b/i],[u,[d,"Nvidia"],[l,g]],[/(sprint) (\w+)/i],[d,u,[l,m]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,P],[l,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[d,F],[l,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[d,F],[l,m]],[/smart-tv.+(samsung)/i],[d,[l,p]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,M],[l,p]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,C],[l,p]],[/(apple) ?tv/i],[d,[u,A+" TV"],[l,p]],[/crkey/i],[[u,E+"cast"],[d,R],[l,p]],[/droid.+aft(\w+)( bui|\))/i],[u,[d,b],[l,p]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[d,L],[l,p]],[/(bravia[\w ]+)( bui|\))/i],[u,[d,B],[l,p]],[/(mitv-\w{5}) bui/i],[u,[d,O],[l,p]],[/Hbbtv.*(technisat) (.*);/i],[d,u,[l,p]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,z],[u,z],[l,p]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,p]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,u,[l,v]],[/droid.+; (shield) bui/i],[u,[d,"Nvidia"],[l,v]],[/(playstation [345portablevi]+)/i],[u,[d,B],[l,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[d,P],[l,v]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[d,M],[l,w]],[/((pebble))app/i],[d,u,[l,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[d,A],[l,w]],[/droid.+; (glass) \d/i],[u,[d,R],[l,w]],[/droid.+; (wt63?0{2,3})\)/i],[u,[d,F],[l,w]],[/(quest( \d| pro)?)/i],[u,[d,V],[l,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[l,y]],[/(aeobc)\b/i],[u,[d,b],[l,y]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[l,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[l,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,m]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[f,Y,K]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,Y,K],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,U],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,f],[/\(bb(10);/i],[f,[c,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[c,x+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[c,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,W],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,f],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,f]]},Q=function(t,e){if(typeof t===o&&(e=t,t=s),!(this instanceof Q))return new Q(t,e).getResult();var v=typeof i!==r&&i.navigator?i.navigator:s,p=t||(v&&v.userAgent?v.userAgent:""),w=v&&v.userAgentData?v.userAgentData:s,y=e?function(t,e){var i={};for(var s in t)e[s]&&e[s].length%2==0?i[s]=e[s].concat(t[s]):i[s]=t[s];return i}(j,e):j,b=v&&v.userAgent==p;return this.getBrowser=function(){var t={};return t[c]=s,t[f]=s,q.call(t,p,y.browser),t[a]=function(t){return typeof t===h?t.replace(/[^\d\.]/g,"").split(".")[0]:s}(t[f]),b&&v&&v.brave&&typeof v.brave.isBrave==n&&(t[c]="Brave"),t},this.getCPU=function(){var t={};return t[_]=s,q.call(t,p,y.cpu),t},this.getDevice=function(){var t={};return t[d]=s,t[u]=s,t[l]=s,q.call(t,p,y.device),b&&!t[l]&&w&&w.mobile&&(t[l]=m),b&&"Macintosh"==t[u]&&v&&typeof v.standalone!==r&&v.maxTouchPoints&&v.maxTouchPoints>2&&(t[u]="iPad",t[l]=g),t},this.getEngine=function(){var t={};return t[c]=s,t[f]=s,q.call(t,p,y.engine),t},this.getOS=function(){var t={};return t[c]=s,t[f]=s,q.call(t,p,y.os),b&&!t[c]&&w&&w.platform&&"Unknown"!=w.platform&&(t[c]=w.platform.replace(/chrome os/i,W).replace(/macos/i,U)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return p},this.setUA=function(t){return p=typeof t===h&&t.length>500?z(t,500):t,this},this.setUA(p),this};Q.VERSION="0.7.39",Q.BROWSER=H([c,f,a]),Q.CPU=H([_]),Q.DEVICE=H([u,d,l,v,m,p,g,w,y]),Q.ENGINE=Q.OS=H([c,f]),t.exports&&(e=t.exports=Q),e.UAParser=Q;var J=typeof i!==r&&(i.jQuery||i.Zepto);if(J&&!J.ua){var $=new Q;J.ua=$.getResult(),J.ua.get=function(){return $.getUA()},J.ua.set=function(t){$.setUA(t);var e=$.getResult();for(var i in e)J.ua[i]=e[i]}}}("object"==typeof s?s:A)}(Ui,Ui.exports);const Gi=T(Ui.exports),Hi=["iOS"];class Zi extends Gi{isChromium(){return this.getUA().match(/Chrome/i)}isChrome(){const t=this.getBrowser();if(!t.name)return!1;const e=this.getOS();let i=!0;return i=!new RegExp(Hi.join("|"),"i").test(e.name),t.name.match(/Chrome/i)&&i}isFirefox(){const t=this.getBrowser();return!!t.name&&t.name.match(/Firefox/i)}isOpera(){const t=this.getBrowser();return!!t.name&&t.name.match(/Opera/i)}isSafari(){const t=this.getBrowser();return!!t.name&&t.name.match(/Safari/i)}constructor(){super(s.navigator.userAgent)}}const Xi=at.get("SdpParser"),zi=Array.from({length:31},((t,e)=>e+35)),qi=Array.from({length:32},((t,e)=>e+96)),Yi=Array.from({length:14},((t,e)=>e+1)),Ki=Array.from({length:240},((t,e)=>e+16)),ji={setSimulcast(t,e){if(Xi.info("Setting simulcast. Codec: ",e),!(new Zi).isChromium())return Xi.warn("Your browser does not appear to support Simulcast. For a better experience, use a Chromium based browser."),t;if("h264"!==e&&"vp8"!==e)return Xi.warn("Your selected codec ".concat(e," does not appear to support Simulcast.  To broadcast using simulcast, please use H.264 or VP8.")),t;if(!/m=video/.test(t))return Xi.warn("There is no available video for simulcast to be enabled."),t;try{const e=new RegExp("m=video.*?a=ssrc:(\\d*) cname:(.+?)\\r\\n","s"),i=new RegExp("m=video.*?a=ssrc:(\\d*) msid:(.+?)\\r\\n","s"),s=e.exec(t),n=s[1],r=s[2],o=i.exec(t)[2],h=2,a=[n];for(let e=0;e<h;++e){const i=100+2*e,s=i+1;a.push(i),t+="a=ssrc-group:FID "+i+" "+s+"\r\na=ssrc:"+i+" cname:"+r+"\r\na=ssrc:"+i+" msid:"+o+"\r\na=ssrc:"+s+" cname:"+r+"\r\na=ssrc:"+s+" msid:"+o+"\r\n"}return t+="a=ssrc-group:SIM "+a.join(" ")+"\r\n",Xi.info("Simulcast setted"),Xi.debug("Simulcast SDP: ",t),t}catch(t){throw Xi.error("Error setting SDP for simulcast: ",t),t}},setStereo:t=>(Xi.info("Replacing SDP response for support stereo"),t=t.replace(/useinbandfec=1/g,"useinbandfec=1; stereo=1"),Xi.info("Replaced SDP response for support stereo"),Xi.debug("New SDP value: ",t),t),setDTX:t=>(Xi.info("Replacing SDP response for support dtx"),t=t.replace("useinbandfec=1","useinbandfec=1; usedtx=1"),Xi.info("Replaced SDP response for support dtx"),Xi.debug("New SDP value: ",t),t),setAbsoluteCaptureTime(t){const e="a=extmap:"+ji.getAvailableHeaderExtensionIdRange(t)[0]+" http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,i,s)=>i+e+s)),Xi.info("Replaced SDP response for setting absolute capture time"),Xi.debug("New SDP value: ",t),t},setDependencyDescriptor(t){const e="a=extmap:"+ji.getAvailableHeaderExtensionIdRange(t)[0]+" https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,i,s)=>i+e+s)),Xi.info("Replaced SDP response for setting depency descriptor"),Xi.debug("New SDP value: ",t),t},setVideoBitrate(t,e){if(e<1)Xi.info("Remove bitrate restrictions"),t=t.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"");else{const i=Fi.parse(t),s=i.getMedia("video");Xi.info("Setting video bitrate"),s.setBitrate(e),t=i.toString()}return t},removeSdpLine:(t,e)=>(Xi.debug("SDP before trimming: ",t),t=t.split("\n").filter((t=>t.trim()!==e)).join("\n"),Xi.debug("SDP trimmed result: ",t),t),adaptCodecName(t,e,i){if(!t)return t;const s=new RegExp("".concat(e),"i");return t.replace(s,i)},setMultiopus(t,e){if(!(new Zi).isFirefox()&&(!e||Qi(e)))if(t.includes("multiopus/48000/6"))Xi.info("Multiopus already setted");else{Xi.info("Setting multiopus");const e=/m=audio 9 UDP\/TLS\/RTP\/SAVPF (.*)\r\n/.exec(t)[0],i=ji.getAvailablePayloadTypeRange(t)[0],s=e.replace("\r\n"," ")+i+"\r\na=rtpmap:"+i+" multiopus/48000/6\r\na=fmtp:"+i+" channel_mapping=0,4,1,2,3,5;coupled_streams=2;minptime=10;num_streams=4;useinbandfec=1\r\n";t=t.replace(e,s),Xi.info("Multiopus offer created"),Xi.debug("SDP parsed for multioups: ",t)}return t},getAvailablePayloadTypeRange(t){const e=t.matchAll(/m=(?:.*) (?:.*) UDP\/TLS\/RTP\/SAVPF (.*)\r\n/gm);let i=qi.concat(zi);for(const t of e){const e=t[1].split(" ").map((t=>x(t)));i=i.filter((t=>!e.includes(t)))}return i},getAvailableHeaderExtensionIdRange(t){const e=t.matchAll(/a=extmap:(\d+)(?:.*)\r\n/gm);let i=Yi.concat(Ki);for(const t of e){const e=t[1].split(" ").map((t=>x(t)));i=i.filter((t=>!e.includes(t)))}return i},renegotiate(t,e){const i=Fi.parse(t),s=Fi.parse(e);for(const t of i.getMedias()){let e=s.getMediaById(t.getId());if(!e){e=new Vi(t.getId(),t.getType()),e.setDirection(Wi.reverse(t.getDirection()));const i=s.getMedia(t.getType());if(i){e.setCodecs(i.getCodecs());for(const[t,s]of i.getExtensions())e.addExtension(t,s)}s.addMedia(e)}}return s.toString()},updateMissingVideoExtensions(t,e){var i;const s=Fi.parse(t),n=null==(i=Fi.parse(e).getMediasByType("video")[0])?void 0:i.getExtensions();if(n||n.length){for(const e of s.getMediasByType("video")){const i=e.getExtensions();n.forEach(((s,n)=>{if(!i.get(n)){const i=e.getId(),r="a=extmap:"+n+" "+s+"\r\n",o=new RegExp("(a=mid:"+i+"\r\n(?:.*\r\n)*?)","g");t=t.replace(o,((t,e,i)=>e+r))}}))}return t}},getCodecPayloadType(t){const e=t.matchAll(/a=rtpmap:(\d+) (\w+)\/\d+/g),i={};for(const t of e)i[t[1]]=t[2];return i}},Qi=t=>t.getAudioTracks().some((t=>t.getSettings().channelCount>2)),Ji={VP8:"vp8",VP9:"vp9",H264:"h264",AV1:"av1",H265:"h265"},$i={OPUS:"opus",MULTIOPUS:"multiopus"},ts=at.get("PeerConnection"),es="Publisher",is="Viewer",ss={track:"track",connectionStateChange:"connectionStateChange"},ns={stereo:!1,mediaStream:null,codec:"h264",simulcast:!1,scalabilityMode:null,disableAudio:!1,disableVideo:!1,setSDPToPeer:!0};class rs extends Et{async createRTCPeer(t,e){void 0===t&&(t={autoInitStats:!0,statsIntervalMs:1e3}),void 0===e&&(e=is),ts.info("Creating new RTCPeerConnection"),ts.debug("RTC configuration provided by user: ",t),this.peer=as(this,t),this.mode=e,t.autoInitStats&&this.initStats(t)}getRTCPeer(){return ts.info("Getting RTC Peer"),this.peer}async closeRTCPeer(){var t;ts.info("Closing RTCPeerConnection"),null==(t=this.peer)||t.close(),this.peer=null,this.stopStats(),this.emit(ss.connectionStateChange,"closed")}async setRTCRemoteSDP(t){ts.info("Setting RTC Remote SDP");const e={type:"answer",sdp:t};try{await this.peer.setRemoteDescription(e),ts.info("RTC Remote SDP was set successfully."),ts.debug("RTC Remote SDP new value: ",t)}catch(t){throw ts.error("Error while setting RTC Remote SDP: ",t),t}}async getRTCLocalSDP(t){void 0===t&&(t=ns),ts.info("Getting RTC Local SDP"),t=d(d({},ns),t),ts.debug("Options: ",t);const e=hs(t.mediaStream);e?ls(this.peer,e,t):ds(this.peer,t),ts.info("Creating peer offer");const i=await this.peer.createOffer();return ts.info("Peer offer created"),ts.debug("Peer offer response: ",i.sdp),this.sessionDescription=i,t.disableAudio||(t.stereo&&(this.sessionDescription.sdp=ji.setStereo(this.sessionDescription.sdp)),t.dtx&&(this.sessionDescription.sdp=ji.setDTX(this.sessionDescription.sdp)),this.sessionDescription.sdp=ji.setMultiopus(this.sessionDescription.sdp,e)),!t.disableVideo&&t.simulcast&&(this.sessionDescription.sdp=ji.setSimulcast(this.sessionDescription.sdp,t.codec)),t.absCaptureTime&&(this.sessionDescription.sdp=ji.setAbsoluteCaptureTime(this.sessionDescription.sdp)),t.dependencyDescriptor&&(this.sessionDescription.sdp=ji.setDependencyDescriptor(this.sessionDescription.sdp)),t.setSDPToPeer&&(await this.peer.setLocalDescription(this.sessionDescription),ts.info("Peer local description set")),this.sessionDescription.sdp}async addRemoteTrack(t,e){return new Promise(((i,s)=>{try{const s=this.peer.addTransceiver(t,{direction:"recvonly",streams:e});this.transceiverMap.set(s,i)}catch(t){s(t)}}))}updateBandwidthRestriction(t,e){if(this.mode===is)throw ts.error("Viewer attempting to update bitrate, this is not allowed"),new g("It is not possible for a viewer to update the bitrate.");return ts.info("Updating bandwidth restriction, bitrate value: ",e),ts.debug("SDP value: ",t),ji.setVideoBitrate(t,e)}async updateBitrate(t){if(void 0===t&&(t=0),this.mode===is)throw ts.error("Viewer attempting to update bitrate, this is not allowed"),new g("It is not possible for a viewer to update the bitrate.");if(!this.peer)throw ts.error("Cannot update bitrate. No peer found."),new g("Cannot update bitrate. No peer found.");ts.info("Updating bitrate to value: ",t),this.sessionDescription=await this.peer.createOffer(),await this.peer.setLocalDescription(this.sessionDescription);const e=this.updateBandwidthRestriction(this.peer.remoteDescription.sdp,t);await this.setRTCRemoteSDP(e),ts.info("Bitrate restrictions updated: ","".concat(t>0?t:"unlimited"," kbps"))}getRTCPeerStatus(){if(ts.info("Getting RTC peer status"),!this.peer)return null;const t=fs(this.peer);return ts.info("RTC peer status getted, value: ",t),t}replaceTrack(t){if(!this.peer)return void ts.error("Could not change track if there is not an active connection.");const e=this.peer.getSenders().find((e=>e.track.kind===t.kind));e?e.replaceTrack(t):ts.error("There is no ".concat(t.kind," track in active broadcast."))}static getCapabilities(t){const e=new Zi,i=RTCRtpSender.getCapabilities(t);if(i){const s={};let n=new RegExp("^video/(".concat(w.values(Ji).join("|"),")x?$"),"i");"audio"===t&&(n=new RegExp("^audio/(".concat(w.values($i).join("|"),")$"),"i"),e.isChrome()&&(s.multiopus={mimeType:"audio/multiopus",channels:6}));for(const t of i.codecs){const e=t.mimeType.match(n);if(e){const i=e[1].toLowerCase();if(s[i]=v(d({},s[i]),{mimeType:t.mimeType}),t.scalabilityModes){let e=s[i].scalabilityModes||[];e=[...e,...t.scalabilityModes],s[i].scalabilityModes=[...new Set(e)]}t.channels&&(s[i].channels=t.channels)}}i.codecs=w.keys(s).map((t=>d({codec:t},s[t])))}return i}getTracks(){var t,e;return null==(e=null==(t=this.peer)?void 0:t.getSenders())?void 0:e.map((t=>t.track))}initStats(t){this.peerConnectionStats?ts.warn("PeerConnection.initStats() has already been called. Automatic initialization occurs via View.connect(), Publish.connect() or this.createRTCPeer(). See options"):this.peer?(this.peerConnectionStats=new Bt(this.peer,t),Ct(this.peerConnectionStats,this,[Lt])):ts.warn("Cannot init peer stats: RTCPeerConnection not initialized")}stopStats(){var t;null==(t=this.peerConnectionStats)||t.stop(),this.peerConnectionStats=null}constructor(){super(),this.mode=null,this.sessionDescription=null,this.peer=null,this.peerConnectionStats=null,this.transceiverMap=new Map}}const os=t=>(null==t?void 0:t.getAudioTracks().length)<=1&&(null==t?void 0:t.getVideoTracks().length)<=1,hs=t=>{if(!t)return null;if(t instanceof MediaStream&&os(t))return t;if(!(t instanceof MediaStream)){ts.info("Creating MediaStream to add received tracks.");const e=new MediaStream;for(const i of t)e.addTrack(i);if(os(e))return e}throw ts.error("MediaStream must have 1 audio track and 1 video track, or at least one of them."),new g("MediaStream must have 1 audio track and 1 video track, or at least one of them.")},as=(t,e)=>{const i=new RTCPeerConnection(e);return cs(t,i),i};async function us(t){return new Promise((e=>u(e,t)))}const cs=(t,e)=>{e.ontrack=async e=>{ts.info("New track from peer."),ts.debug("Track event value: ",e);const i=t.transceiverMap.get(e.transceiver);if(i){for(;!e.transceiver.mid;)await us(100);i(e.transceiver),t.transceiverMap.delete(e.transceiver)}u((()=>{t.emit(ss.track,e)}),0)},e.connectionState?e.onconnectionstatechange=i=>{ts.info("Peer connection state change: ",e.connectionState),t.emit(ss.connectionStateChange,e.connectionState)}:e.oniceconnectionstatechange=i=>{ts.info("Peer ICE connection state change: ",e.iceConnectionState),t.emit(ss.connectionStateChange,e.iceConnectionState)},e.onnegotiationneeded=async t=>{if(!e.remoteDescription)return;ts.info("Peer onnegotiationneeded, updating local description");const i=await e.createOffer();ts.info("Peer onnegotiationneeded, got local offer",i.sdp),i.sdp=ji.updateMissingVideoExtensions(i.sdp,e.remoteDescription.sdp),await e.setLocalDescription(i);const s=ji.renegotiate(i.sdp,e.remoteDescription.sdp);ts.info("Peer onnegotiationneeded, updating remote description",s),await e.setRemoteDescription({type:"answer",sdp:s}),ts.info("Peer onnegotiationneeded, renegotiation done")}},ls=(t,e,i)=>{ts.info("Adding mediaStream tracks to RTCPeerConnection");for(const s of e.getTracks()){const n={streams:[e]};"audio"===s.kind&&(n.direction=i.disableAudio?"inactive":"sendonly"),"video"===s.kind&&(n.direction=i.disableVideo?"inactive":"sendonly",i.scalabilityMode&&(new Zi).isChrome()?(ts.debug("Video track with scalability mode: ".concat(i.scalabilityMode,".")),n.sendEncodings=[{scalabilityMode:i.scalabilityMode}]):i.scalabilityMode&&ts.warn("SVC is only supported in Google Chrome")),t.addTransceiver(s,n),ts.info("Track '".concat(s.label,"' added: "),"id: ".concat(s.id),"kind: ".concat(s.kind))}},ds=(t,e)=>{const i=new Zi;if(!e.disableVideo){const e=t.addTransceiver("video",{direction:"recvonly"});i.isOpera()&&e.setCodecPreferences(RTCRtpReceiver.getCapabilities("video").codecs.filter((t=>"video/H264"!==t.mimeType||t.sdpFmtpLine.includes("profile-level-id=4"))))}e.disableAudio||t.addTransceiver("audio",{direction:"recvonly"});for(let i=0;i<e.multiplexedAudioTracks;i++)t.addTransceiver("audio",{direction:"recvonly"})},fs=t=>{var e;const i=null!=(e=t.connectionState)?e:t.iceConnectionState;switch(i){case"checking":return"connecting";case"completed":return"connected";default:return i}};var _s={};w.defineProperty(_s,"__esModule",{value:!0}),_s.TypedEmitter=kt.EventEmitter;const{TypedEmitter:vs}=_s;class ms extends vs{cmd(t,e){return this.tm.cmd(t,e,this.namespace)}event(t,e){return this.tm.event(t,e,this.namespace)}close(){return this.tm.namespaces.delete(this.namespace)}constructor(t,e){super(),this.namespace=t,this.tm=e}}const gs=T(class extends vs{s_(t){this.transport.send(JSON.stringify(t))}cmd(t,e,i){return void 0===i&&(i=void 0),new Promise(((s,n)=>{if(!t||0===t.length)throw new g("Bad command name");const r={type:"cmd",transId:this.maxId++,name:t,data:e};i&&(r.namespace=i),this.transactions.set(r.transId,v(d({},r),{resolve:s,reject:n}));try{this.s_(r)}catch(t){throw this.transactions.delete(r.transId),t}}))}event(t,e,i){if(void 0===i&&(i=void 0),!t||0===t.length)throw new g("Bad event name");const s={type:"event",name:t,data:e};i&&(s.namespace=i),this.s_(s)}namespace(t){let e=this.namespaces.get(t);return e||(e=new ms(t,this),this.namespaces.set(t,e),e)}close(){for(const t of this.namespaces.values())t.close();this.transport.removeListener?this.transport.removeListener("message",this.listener):this.transport.removeEventListener("message",this.listener)}constructor(t){super(),this.maxId=0,this.namespaces=new Map,this.transactions=new Map,this.transport=t,this.listener=t=>{let e;try{e=JSON.parse(t.utf8Data||t.data||t)}catch(t){return}switch(e.type){case"cmd":const{transId:t}=e,s={name:e.name,data:e.data,namespace:e.namespace,accept:e=>{this.s_({type:"response",transId:t,data:e})},reject:e=>{this.s_({type:"error",transId:t,data:e})}};if(s.namespace){const t=this.namespaces.get(s.namespace);t?t.emit("cmd",s):this.emit("cmd",s)}else this.emit("cmd",s);break;case"response":{const t=this.transactions.get(e.transId);if(!t)return;this.transactions.delete(e.transId),t.resolve(e.data);break}case"error":{const t=this.transactions.get(e.transId);if(!t)return;this.transactions.delete(e.transId),t.reject(e.data);break}case"event":const n={name:e.name,data:e.data,namespace:e.namespace};if(n.namespace){var i=this.namespaces.get(n.namespace);i?i.emit("event",n):this.emit("event",n)}else this.emit("event",n)}},this.transport.addListener?this.transport.addListener("message",this.listener):this.transport.addEventListener("message",this.listener)}}),ps=at.get("Signaling"),ws="wsConnectionSuccess",ys="wsConnectionError",bs="wsConnectionClose",As="broadcastEvent";class Ss extends Et{async connect(){var t;return ps.info("Connecting to Signaling Server"),this.transactionManager&&(null==(t=this.webSocket)?void 0:t.readyState)===WebSocket.OPEN?(ps.info("Connected to server: ",this.webSocket.url),ps.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(ws,{ws:this.webSocket,tm:this.transactionManager}),this.webSocket):new Promise(((t,e)=>{this.webSocket=new WebSocket(this.wsUrl),this.transactionManager=new gs(this.webSocket),this.webSocket.onopen=()=>{ps.info("WebSocket opened"),this.transactionManager.on("event",(t=>{this.emit(As,t)})),ps.info("Connected to server: ",this.webSocket.url),ps.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(ws,{ws:this.webSocket,tm:this.transactionManager}),t(this.webSocket)},this.webSocket.onerror=()=>{ps.error("WebSocket not connected: ",this.webSocket.url),this.emit(ys,this.webSocket.url),e(this.webSocket.url)},this.webSocket.onclose=()=>{this.webSocket=null,this.transactionManager=null,ps.info("Connection closed with Signaling Server."),this.emit(bs)}}))}close(){var t;ps.info("Closing connection with Signaling Server."),null==(t=this.webSocket)||t.close()}async subscribe(t,e,i,s){var n,r,o,h;void 0===i&&(i=null),void 0===s&&(s=null),ps.info("Starting subscription to streamName: ",this.streamName),ps.debug("Subcription local description: ",t);const a=Ts(e,i,s),u={sdp:t=ji.adaptCodecName(t,"AV1X",Ji.AV1),streamId:this.streamName,pinnedSourceId:a.pinnedSourceId,excludedSourceIds:a.excludedSourceIds,events:["active","inactive","layers","viewercount","vad","updated","migrate","stopped"]};a.vad&&(u.vad=!0),Array.isArray(a.events)&&(u.events=a.events),a.forcePlayoutDelay&&(u.forcePlayoutDelay=a.forcePlayoutDelay),a.layer&&(u.layer=a.layer);try{if(a.disableVideo&&a.disableAudio)throw new g("Not attempting to connect as video and audio are disabled");await this.connect(),ps.info("Sending view command");const t=await this.transactionManager.cmd("view",u),e=null==(h=null==(o=null==(r=null==(n=RTCRtpReceiver.getCapabilities)?void 0:n.call(RTCRtpReceiver,"video"))?void 0:r.codecs)?void 0:o.find)?void 0:h.call(o,(t=>"video/AV1X"===t.mimeType));return t.sdp=e?ji.adaptCodecName(t.sdp,Ji.AV1,"AV1X"):t.sdp,ps.info("Command sent, subscriberId: ",t.subscriberId),ps.debug("Command result: ",t),this.serverId=t.subscriberId,this.clusterId=t.clusterId,this.streamViewId=t.streamViewId,G(this.streamName),H(this.serverId),Z(t.streamViewId),Y(this.clusterId),t.sdp}catch(t){throw ps.error("Error sending view command, error: ",t),t}}async publish(t,e,i,s){var n,r,o,h,a,u,c,l;void 0===i&&(i=null),void 0===s&&(s=null);const d=ks(e,i,s);ps.info("Starting publishing to streamName: ".concat(this.streamName,", codec: ").concat(d.codec)),ps.debug("Publishing local description: ",t);const f=null!=(h=null==(o=null==(r=null==(n=rs.getCapabilities)?void 0:n.call(rs,"video"))?void 0:r.codecs)?void 0:o.map((t=>t.codec)))?h:[],_=w.values(Ji);if(-1===_.indexOf(d.codec))throw ps.error("Invalid codec ".concat(d.codec,". Possible values are: "),_),new g("Invalid codec ".concat(d.codec,". Possible values are: ").concat(_));if(f.length>0&&-1===f.indexOf(d.codec))throw ps.error("Unsupported codec ".concat(d.codec,". Possible values are: "),f),new g("Unsupported codec ".concat(d.codec,". Possible values are: ").concat(f));d.codec===Ji.AV1&&(t=ji.adaptCodecName(t,"AV1X",Ji.AV1));const v={name:this.streamName,sdp:t,codec:d.codec,sourceId:d.sourceId};if(d.priority){if(!(Number.isInteger(d.priority)&&d.priority>=-2147483648&&d.priority<=2147483647))throw new g("Invalid value for priority option. It should be a decimal integer between the range [-2^31, +2^31 - 1]");v.priority=d.priority}null!==d.record&&(v.record=d.record),Array.isArray(d.events)&&(v.events=d.events);try{if(d.disableVideo&&d.disableAudio)throw new g("Not attempting to connect as video and audio are disabled");await this.connect(),ps.info("Sending publish command");const t=await this.transactionManager.cmd("publish",v);if(d.codec===Ji.AV1){const e=null==(l=null==(c=null==(u=null==(a=RTCRtpSender.getCapabilities)?void 0:a.call(RTCRtpSender,"video"))?void 0:u.codecs)?void 0:c.find)?void 0:l.call(c,(t=>"video/AV1X"===t.mimeType));t.sdp=e?ji.adaptCodecName(t.sdp,Ji.AV1,"AV1X"):t.sdp}return ps.info("Command sent, publisherId: ",t.publisherId),ps.debug("Command result: ",t),this.serverId=t.publisherId,this.clusterId=t.clusterId,G(this.streamName),H(this.serverId),X(t.feedId),Y(this.clusterId),t.sdp}catch(t){throw ps.error("Error sending publish command, error: ",t),t}}async cmd(t,e){return ps.info("Sending cmd: ".concat(t)),this.transactionManager.cmd(t,e)}constructor(t={streamName:null,url:"ws://localhost:8080/"}){super(),this.streamName=t.streamName,this.wsUrl=t.url,this.webSocket=null,this.transactionManager=null,this.serverId=null,this.clusterId=null,this.streamViewId=null}}const Ts=(t,e,i)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={vad:t,pinnedSourceId:e,excludedSourceIds:i}),s},ks=(t,e,i)=>{let s="object"==typeof t?t:{};if(0===w.keys(s).length){s={codec:null!=t?t:Ji.H264,record:e,sourceId:i}}return s};class Es extends g{constructor(t,e){super(t),this.name="FetchError",this.status=e}}const xs=at.get("Director"),Rs="WebRtc";let Is="",Cs="https://director.millicast.com";const Ps={setEndpoint:t=>{Cs=t.replace(/\/$/,"")},getEndpoint:()=>Cs,setLiveDomain:t=>{Is=t.replace(/\/$/,"")},getLiveDomain:()=>Is,getPublisher:async(t,e,i)=>{void 0===e&&(e=null),void 0===i&&(i=Rs);const s=Ds(t,e,i);xs.info("Getting publisher connection path for stream name: ",s.streamName);const n={streamName:s.streamName,streamType:s.streamType},r={"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},o="".concat(Ps.getEndpoint(),"/api/director/publish");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let e=await t.json();if("fail"===e.status)throw new Es(e.data.message,t.status);return e=Ms(e),xs.debug("Getting publisher response: ",e),U(e.data.streamAccountId),e.data}catch(t){throw xs.error("Error while getting publisher connection path. ",t),t}},getSubscriber:async(t,e,i)=>{void 0===e&&(e=null),void 0===i&&(i=null);const s=Ns(t,e,i);U(s.streamAccountId),xs.info("Getting subscriber connection data for stream name: ".concat(s.streamName," and account id: ").concat(s.streamAccountId));const n={streamAccountId:s.streamAccountId,streamName:s.streamName};let r={"Content-Type":"application/json"};s.subscriberToken&&(r=v(d({},r),{Authorization:"Bearer ".concat(s.subscriberToken)}));const o="".concat(Ps.getEndpoint(),"/api/director/subscribe");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let e=await t.json();if("fail"===e.status)throw new Es(e.data.message,t.status);return e=Ms(e),xs.debug("Getting subscriber response: ",e),s.subscriberToken&&(e.data.subscriberToken=s.subscriberToken),e.data}catch(t){throw xs.error("Error while getting subscriber connection path. ",t),t}}},Ds=(t,e,i)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={token:t,streamName:e,streamType:i}),s},Ns=(t,e,i)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={streamName:t,streamAccountId:e,subscriberToken:i}),s},Ms=t=>{if(Ps.getLiveDomain()){const e=/\/\/(.*?)\//,i=t.data.urls.map((t=>{const i=e.exec(t);return t.replace(i[1],Ps.getLiveDomain())}));t.data.urls=i}if(t.data.drmObject){const e=t.data.drmObject.playReadyUrl;e&&(t.data.drmObject.playReadyUrl="".concat(Ps.getEndpoint()).concat(e));const i=t.data.drmObject.widevineUrl;i&&(t.data.drmObject.widevineUrl="".concat(Ps.getEndpoint()).concat(i));const s=t.data.drmObject.fairPlayUrl;s&&(t.data.drmObject.fairPlayUrl="".concat(Ps.getEndpoint()).concat(s));const n=t.data.drmObject.fairPlayCertUrl;n&&(t.data.drmObject.fairPlayCertUrl="".concat(Ps.getEndpoint()).concat(n))}return t};function Ls(t){this.message=t}Ls.prototype=new g,Ls.prototype.name="InvalidCharacterError";var Bs=typeof s<"u"&&s.atob&&s.atob.bind(s)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Ls("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,s,n=0,r=0,o="";s=e.charAt(r++);~s&&(i=n%4?64*i+s:s,n++%4)?o+=String.fromCharCode(255&i>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return o};function Os(t){this.message=t}function Fs(t,e){if("string"!=typeof t)throw new Os("Invalid token specified");var i=!0===(e=e||{}).header?0:1;try{return JSON.parse(function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Bs(e).replace(/(.)/g,(function(t,e){var i=e.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}catch(t){return Bs(e)}}(t.split(".")[i]))}catch(t){throw new Os("Invalid token specified: "+t.message)}}Os.prototype=new g,Os.prototype.name="InvalidTokenError";var Vs={exports:{}};!function(t,e){!function(i){if(null!=e&&"number"!=typeof e.nodeType)t.exports=i();else{var s=i(),n=typeof self<"u"?self:$.global;"function"!=typeof n.btoa&&(n.btoa=s.btoa),"function"!=typeof n.atob&&(n.atob=s.atob)}}((function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function e(t){this.message=t}return e.prototype=new g,e.prototype.name="InvalidCharacterError",{btoa:function(i){for(var s,n,r,o,h=String(i),a=0,u="";a<h.length;){if(s=h.charCodeAt(a++),n=h.charCodeAt(a++),r=h.charCodeAt(a++),s>255||n>255||r>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u+=t.charAt((o=s<<16|n<<8|r)>>18&63)+t.charAt(o>>12&63)+t.charAt(o>>6&63)+t.charAt(63&o)}switch(h.length%3){case 0:return u;case 1:return u.slice(0,-2)+"==";case 2:return u.slice(0,-1)+"="}},atob:function(i){var s=String(i).replace(/[=]+$/,"");if(s.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,h=0,a="";r=s.charAt(h++);~r&&(n=o%4?64*n+r:r,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)r=t.indexOf(r);return a}}}))}(Vs,Vs.exports);var Ws=Vs.exports,Us={exports:{}};!function(t,e){var i;self,i=()=>{return t={7629:(t,e,i)=>{const s=i(375),n=i(8571),r=i(9474),o=i(1687),h=i(8652),a=i(8160),u=i(3292),c=i(6354),l=i(8901),d=i(9708),f=i(6914),_=i(2294),v=i(6133),m=i(1152),p=i(8863),y=i(2036),b={Base:class{n_(){this.r_=new _.Ids,this.o_=null,this.h_=new v.Manager,this.a_=null,this.u_=null,this.c_=null,this.l_={},this.d_=[],this.f_=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return s("function"==typeof d.describe,"Manifest functionality disabled"),d.describe(this)}allow(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"allow"),this.__(e,"u_")}alter(t){s(t&&"object"==typeof t&&!Array.isArray(t),"Invalid targets argument"),s(!this.v_(),"Cannot set alterations inside a ruleset");const e=this.clone();e.$_terms.alterations=e.$_terms.alterations||[];for(const i in t){const n=t[i];s("function"==typeof n,"Alteration adjuster for",i,"must be a function"),e.$_terms.alterations.push({target:i,adjuster:n})}return e.$_temp.ruleset=!1,e}artifact(t){return s(void 0!==t,"Artifact cannot be undefined"),s(!this.a_,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",t)}cast(t){return s(!1===t||"string"==typeof t,"Invalid to value"),s(!1===t||this.m_.cast[t],"Type",this.type,"does not support casting to",t),this.$_setFlag("cast",!1===t?void 0:t)}default(t,e){return this.g_("default",t,e)}description(t){return s(t&&"string"==typeof t,"Description must be a non-empty string"),this.$_setFlag("description",t)}empty(t){const e=this.clone();return void 0!==t&&(t=e.$_compile(t,{override:!1})),e.$_setFlag("empty",t,{clone:!1})}error(t){return s(t,"Missing error"),s(t instanceof g||"function"==typeof t,"Must provide a valid Error object or a function"),this.$_setFlag("error",t)}example(t,e){return void 0===e&&(e={}),s(void 0!==t,"Missing example"),a.assertOptions(e,["override"]),this.p_("examples",t,{single:!0,override:e.override})}external(t,e){return"object"==typeof t&&(s(!e,"Cannot combine options with description"),e=t.description,t=t.method),s("function"==typeof t,"Method must be a function"),s(void 0===e||e&&"string"==typeof e,"Description must be a non-empty string"),this.p_("externals",{method:t,description:e},{single:!0})}failover(t,e){return this.g_("failover",t,e)}forbidden(){return this.presence("forbidden")}id(t){return t?(s("string"==typeof t,"id must be a non-empty string"),s(/^[^\.]+$/.test(t),"id cannot contain period character"),this.$_setFlag("id",t)):this.$_setFlag("id",void 0)}invalid(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.__(e,"c_")}label(t){return s(t&&"string"==typeof t,"Label name must be a non-empty string"),this.$_setFlag("label",t)}meta(t){return s(void 0!==t,"Meta cannot be undefined"),this.p_("metas",t,{single:!0})}note(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s(e.length,"Missing notes");for(const t of e)s(t&&"string"==typeof t,"Notes must be non-empty strings");return this.p_("notes",e)}only(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"Invalid mode:",t),this.$_setFlag("only",t)}optional(){return this.presence("optional")}prefs(t){s(t,"Missing preferences"),s(void 0===t.context,"Cannot override context"),s(void 0===t.externals,"Cannot override externals"),s(void 0===t.warnings,"Cannot override warnings"),s(void 0===t.debug,"Cannot override debug"),a.checkPreferences(t);const e=this.clone();return e.o_=a.preferences(e.o_,t),e}presence(t){return s(["optional","required","forbidden"].includes(t),"Unknown presence mode",t),this.$_setFlag("presence",t)}raw(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"raw":void 0)}result(t){return s(["raw","strip"].includes(t),"Unknown result mode",t),this.$_setFlag("result",t)}required(){return this.presence("required")}strict(t){const e=this.clone(),i=void 0!==t&&!t;return e.o_=a.preferences(e.o_,{convert:i}),e}strip(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"strip":void 0)}tag(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s(e.length,"Missing tags");for(const t of e)s(t&&"string"==typeof t,"Tags must be non-empty strings");return this.p_("tags",e)}unit(t){return s(t&&"string"==typeof t,"Unit name must be a non-empty string"),this.$_setFlag("unit",t)}valid(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];a.verifyFlat(e,"valid");const s=this.allow(...e);return s.$_setFlag("only",!!s.u_,{clone:!1}),s}when(t,e){const i=this.clone();i.$_terms.whens||(i.$_terms.whens=[]);const n=u.when(i,t,e);if(!["any","link"].includes(i.type)){const t=n.is?[n]:n.switch;for(const e of t)s(!e.then||"any"===e.then.type||e.then.type===i.type,"Cannot combine",i.type,"with",e.then&&e.then.type),s(!e.otherwise||"any"===e.otherwise.type||e.otherwise.type===i.type,"Cannot combine",i.type,"with",e.otherwise&&e.otherwise.type)}return i.$_terms.whens.push(n),i.$_mutateRebuild()}cache(t){s(!this.v_(),"Cannot set caching inside a ruleset"),s(!this.a_,"Cannot override schema cache"),s(void 0===this.l_.artifact,"Cannot cache a rule with an artifact");const e=this.clone();return e.a_=t||h.provider.provision(),e.$_temp.ruleset=!1,e}clone(){const t=w.create(w.getPrototypeOf(this));return this.w_(t)}concat(t){s(a.isSchema(t),"Invalid schema object"),s("any"===this.type||"any"===t.type||t.type===this.type,"Cannot merge type",this.type,"with another type:",t.type),s(!this.v_(),"Cannot concatenate onto a schema with open ruleset"),s(!t.v_(),"Cannot concatenate a schema with open ruleset");let e=this.clone();if("any"===this.type&&"any"!==t.type){const i=t.clone();for(const t of w.keys(e))"type"!==t&&(i[t]=e[t]);e=i}e.r_.concat(t.r_),e.h_.register(t,v.toSibling),e.o_=e.o_?a.preferences(e.o_,t.o_):t.o_,e.u_=y.merge(e.u_,t.u_,t.c_),e.c_=y.merge(e.c_,t.c_,t.u_);for(const i of t.f_.keys())e.f_.has(i)&&(e.d_=e.d_.filter((t=>t.keep||t.name!==i)),e.f_.delete(i));for(const i of t.d_)t.m_.rules[i.method].multi||e.f_.set(i.name,i),e.d_.push(i);if(e.l_.empty&&t.l_.empty){e.l_.empty=e.l_.empty.concat(t.l_.empty);const i=w.assign({},t.l_);delete i.empty,o(e.l_,i)}else if(t.l_.empty){e.l_.empty=t.l_.empty;const i=w.assign({},t.l_);delete i.empty,o(e.l_,i)}else o(e.l_,t.l_);for(const i in t.$_terms){const s=t.$_terms[i];s?e.$_terms[i]?e.$_terms[i]=e.$_terms[i].concat(s):e.$_terms[i]=s.slice():e.$_terms[i]||(e.$_terms[i]=s)}return this.$_root.y_&&this.$_root.y_.b_(e,[this,t]),e.$_mutateRebuild()}extend(t){return s(!t.base,"Cannot extend type with another base"),l.type(this,t)}extract(t){return t=Array.isArray(t)?t:t.split("."),this.r_.reach(t)}fork(t,e){s(!this.v_(),"Cannot fork inside a ruleset");let i=this;for(let s of[].concat(t))s=Array.isArray(s)?s:s.split("."),i=i.r_.fork(s,e,i);return i.$_temp.ruleset=!1,i}rule(t){const e=this.m_;a.assertOptions(t,w.keys(e.modifiers)),s(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const i=null===this.$_temp.ruleset?this.d_.length-1:this.$_temp.ruleset;s(i>=0&&i<this.d_.length,"Cannot apply rules to empty ruleset");const r=this.clone();for(let o=i;o<r.d_.length;++o){const i=r.d_[o],h=n(i);for(const n in t)e.modifiers[n](h,t[n]),s(h.name===i.name,"Cannot change rule name");r.d_[o]=h,r.f_.get(h.name)===i&&r.f_.set(h.name,h)}return r.$_temp.ruleset=!1,r.$_mutateRebuild()}get ruleset(){s(!this.v_(),"Cannot start a new ruleset without closing the previous one");const t=this.clone();return t.$_temp.ruleset=t.d_.length,t}get $(){return this.ruleset}tailor(t){t=[].concat(t),s(!this.v_(),"Cannot tailor inside a ruleset");let e=this;if(this.$_terms.alterations)for(const{target:i,adjuster:n}of this.$_terms.alterations)t.includes(i)&&(e=n(e),s(a.isSchema(e),"Alteration adjuster for",i,"failed to return a schema object"));return e=e.$_modify({each:e=>e.tailor(t),ref:!1}),e.$_temp.ruleset=!1,e.$_mutateRebuild()}tracer(){return m.location?m.location(this):this}validate(t,e){return p.entry(t,this,e)}validateAsync(t,e){return p.entryAsync(t,this,e)}$_addRule(t){"string"==typeof t&&(t={name:t}),s(t&&"object"==typeof t,"Invalid options"),s(t.name&&"string"==typeof t.name,"Invalid rule name");for(const e in t)s("_"!==e[0],"Cannot set private rule properties");const e=w.assign({},t);e.Vd=[],e.method=e.method||e.name;const i=this.m_.rules[e.method],n=e.args;s(i,"Unknown rule",e.method);const r=this.clone();if(n){s(1===w.keys(n).length||w.keys(n).length===this.m_.rules[e.name].args.length,"Invalid rule definition for",this.type,e.name);for(const t in n){let o=n[t];if(i.argsByName){const h=i.argsByName.get(t);if(h.ref&&a.isResolvable(o))e.Vd.push(t),r.$_mutateRegister(o);else if(h.normalize&&(o=h.normalize(o),n[t]=o),h.assert){const e=a.validateArg(o,t,h);s(!e,e,"or reference")}}void 0!==o?n[t]=o:delete n[t]}}return i.multi||(r.A_(e.name,{clone:!1}),r.f_.set(e.name,e)),!1===r.$_temp.ruleset&&(r.$_temp.ruleset=null),i.priority?r.d_.unshift(e):r.d_.push(e),r}$_compile(t,e){return u.schema(this.$_root,t,e)}$_createError(t,e,i,s,n,r){void 0===r&&(r={});const o=!1!==r.flags?this.l_:{},h=r.messages?f.merge(this.m_.messages,r.messages):this.m_.messages;return new c.Report(t,e,i,o,h,s,n)}$_getFlag(t){return this.l_[t]}$_getRule(t){return this.f_.get(t)}$_mapLabels(t){return t=Array.isArray(t)?t:t.split("."),this.r_.labels(t)}$_match(t,e,i,s){(i=w.assign({},i)).abortEarly=!0,i.S_=!1,e.snapshot();const n=!p.validate(t,this,e,i,s).errors;return e.restore(),n}$_modify(t){return a.assertOptions(t,["each","once","ref","schema"]),_.schema(this,t)||this}$_mutateRebuild(){return s(!this.v_(),"Cannot add this rule inside a ruleset"),this.h_.reset(),this.r_.reset(),this.$_modify({each:(t,e)=>{let{source:i,name:s,path:n,key:r}=e;const o=this.m_[i][s]&&this.m_[i][s].register;!1!==o&&this.$_mutateRegister(t,{family:o,key:r})}}),this.m_.rebuild&&this.m_.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(t,e){let{family:i,key:s}=void 0===e?{}:e;this.h_.register(t,i),this.r_.register(t,{key:s})}$_property(t){return this.m_.properties[t]}$_reach(t){return this.r_.reach(t)}$_rootReferences(){return this.h_.roots()}$_setFlag(t,e,i){void 0===i&&(i={}),s("_"===t[0]||!this.v_(),"Cannot set flag inside a ruleset");const n=this.m_.flags[t]||{};if(r(e,n.default)&&(e=void 0),r(e,this.l_[t]))return this;const o=!1!==i.clone?this.clone():this;return void 0!==e?(o.l_[t]=e,o.$_mutateRegister(e)):delete o.l_[t],"_"!==t[0]&&(o.$_temp.ruleset=!1),o}$_parent(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return this[t][a.symbols.parent].call(this,...i)}$_validate(t,e,i){return p.validate(t,this,e,i)}w_(t){t.type=this.type,t.$_root=this.$_root,t.$_temp=w.assign({},this.$_temp),t.$_temp.whens={},t.r_=this.r_.clone(),t.o_=this.o_,t.u_=this.u_&&this.u_.clone(),t.c_=this.c_&&this.c_.clone(),t.d_=this.d_.slice(),t.f_=n(this.f_,{shallow:!0}),t.h_=this.h_.clone(),t.l_=w.assign({},this.l_),t.a_=null,t.$_terms={};for(const e in this.$_terms)t.$_terms[e]=this.$_terms[e]?this.$_terms[e].slice():null;t.$_super={};for(const e in this.$_super)t.$_super[e]=this.T_[e].bind(t);return t}k_(){const t=this.clone();t.n_();const e=t.m_.terms;for(const i in e){const s=e[i];t.$_terms[i]=s.init}return t.$_mutateRebuild()}g_(t,e,i){return void 0===i&&(i={}),a.assertOptions(i,"literal"),s(void 0!==e,"Missing",t,"value"),s("function"==typeof e||!i.literal,"Only function value supports literal option"),"function"==typeof e&&i.literal&&(e={[a.symbols.literal]:!0,literal:e}),this.$_setFlag(t,e)}E_(t,e,i){if(!this.$_terms.whens)return{schema:this};const s=[],n=[];for(let r=0;r<this.$_terms.whens.length;++r){const o=this.$_terms.whens[r];if(o.concat){s.push(o.concat),n.push("".concat(r,".concat"));continue}const h=o.ref?o.ref.resolve(t,e,i):t,a=o.is?[o]:o.switch,u=n.length;for(let u=0;u<a.length;++u){const{is:c,then:l,otherwise:d}=a[u],f="".concat(r).concat(o.switch?"."+u:"");if(c.$_match(h,e.nest(c,"".concat(f,".is")),i)){if(l){const r=e.localize([...e.path,"".concat(f,".then")],e.ancestors,e.schemas),{schema:o,id:h}=l.E_(t,r,i);s.push(o),n.push("".concat(f,".then").concat(h?"(".concat(h,")"):""));break}}else if(d){const r=e.localize([...e.path,"".concat(f,".otherwise")],e.ancestors,e.schemas),{schema:o,id:h}=d.E_(t,r,i);s.push(o),n.push("".concat(f,".otherwise").concat(h?"(".concat(h,")"):""));break}}if(o.break&&n.length>u)break}const r=n.join(", ");if(e.mainstay.tracer.debug(e,"rule","when",r),!r)return{schema:this};if(!e.mainstay.tracer.active&&this.$_temp.whens[r])return{schema:this.$_temp.whens[r],id:r};let o=this;this.m_.generate&&(o=this.m_.generate(this,t,e,i));for(const t of s)o=o.concat(t);return this.$_root.y_&&this.$_root.y_.b_(o,[this,...s]),this.$_temp.whens[r]=o,{schema:o,id:r}}p_(t,e,i){void 0===i&&(i={}),s(!this.v_(),"Cannot set ".concat(t," inside a ruleset"));const n=this.clone();return n.$_terms[t]&&!i.override||(n.$_terms[t]=[]),i.single?n.$_terms[t].push(e):n.$_terms[t].push(...e),n.$_temp.ruleset=!1,n}v_(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}A_(t,e){if(void 0===e&&(e={}),!this.f_.has(t))return this;const i=!1!==e.clone?this.clone():this;i.f_.delete(t);const s=[];for(let e=0;e<i.d_.length;++e){const n=i.d_[e];n.name!==t||n.keep?s.push(n):i.v_()&&e<i.$_temp.ruleset&&--i.$_temp.ruleset}return i.d_=s,i}__(t,e){a.verifyFlat(t,e.slice(1,-1));const i=this.clone(),n=t[0]===a.symbols.override;if(n&&(t=t.slice(1)),!i[e]&&t.length?i[e]=new y:n&&(i[e]=t.length?new y:null,i.$_mutateRebuild()),!i[e])return i;n&&i[e].override();for(const n of t){s(void 0!==n,"Cannot call allow/valid/invalid with undefined"),s(n!==a.symbols.override,"Override must be the first value");const t="c_"===e?"u_":"c_";i[t]&&(i[t].remove(n),i[t].length||(s("u_"===e||!i.l_.only,"Setting invalid value",n,"leaves schema rejecting all values due to previous valid rule"),i[t]=null)),i[e].add(n,i.h_)}return i}constructor(t){this.type=t,this.$_root=null,this.m_={},this.n_()}}};b.Base.prototype[a.symbols.any]={version:a.version,compile:u.compile,root:"$_root"},b.Base.prototype.isImmutable=!0,b.Base.prototype.deny=b.Base.prototype.invalid,b.Base.prototype.disallow=b.Base.prototype.invalid,b.Base.prototype.equal=b.Base.prototype.valid,b.Base.prototype.exist=b.Base.prototype.required,b.Base.prototype.not=b.Base.prototype.invalid,b.Base.prototype.options=b.Base.prototype.prefs,b.Base.prototype.preferences=b.Base.prototype.prefs,t.exports=new b.Base},8652:(t,e,i)=>{const s=i(375),n=i(8571),r=i(8160),o={max:1e3,supported:new Set(["undefined","boolean","number","string"])};e.provider={provision:t=>new o.Cache(t)},o.Cache=class{get length(){return this.x_.size}set(t,e){if(null!==t&&!o.supported.has(typeof t))return;let i=this.x_.get(t);if(i)return i.value=e,void this.R_.first(i);i=this.R_.unshift({key:t,value:e}),this.x_.set(t,i),this.I_()}get(t){const e=this.x_.get(t);if(e)return this.R_.first(e),n(e.value)}I_(){if(this.x_.size>this.C_){const t=this.R_.pop();this.x_.delete(t.key)}}constructor(t={}){r.assertOptions(t,["max"]),s(void 0===t.max||t.max&&t.max>0&&isFinite(t.max),"Invalid max cache size"),this.C_=t.max||o.max,this.x_=new Map,this.R_=new o.List}},o.List=class{unshift(t){return t.next=null,t.prev=this.head,this.head&&(this.head.next=t),this.head=t,this.tail||(this.tail=t),t}first(t){t!==this.head&&(this.P_(t),this.unshift(t))}pop(){return this.P_(this.tail)}P_(t){const{next:e,prev:i}=t;return e.prev=i,i&&(i.next=e),t===this.tail&&(this.tail=e),t.prev=null,t.next=null,t}constructor(){this.tail=null,this.head=null}}},8160:(t,e,i)=>{const s=i(375),n=i(7916),r=i(5934);let o,h;const a={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};e.version=r.version,e.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},e.symbols={any:f("@hapi/joi/schema"),arraySingle:Ao("arraySingle"),deepDefault:Ao("deepDefault"),errors:Ao("errors"),literal:Ao("literal"),override:Ao("override"),parent:Ao("parent"),prefs:Ao("prefs"),ref:Ao("ref"),template:Ao("template"),values:Ao("values")},e.assertOptions=function(t,e,i){void 0===i&&(i="Options"),s(t&&"object"==typeof t&&!Array.isArray(t),"Options must be of type object");const n=w.keys(t).filter((t=>!e.includes(t)));s(0===n.length,"".concat(i," contain unknown keys: ").concat(n))},e.checkPreferences=function(t){h=h||i(3378);const e=h.preferences.validate(t);if(e.error)throw new n([e.error.details[0].message])},e.compare=function(t,e,i){switch(i){case"=":return t===e;case">":return t>e;case"<":return t<e;case">=":return t>=e;case"<=":return t<=e}},e.default=function(t,e){return void 0===t?e:t},e.isIsoDate=function(t){return a.isoDate.test(t)},e.isNumber=function(t){return"number"==typeof t&&!S(t)},e.isResolvable=function(t){return!!t&&(t[e.symbols.ref]||t[e.symbols.template])},e.isSchema=function(t,i){void 0===i&&(i={});const n=t&&t[e.symbols.any];return!!n&&(s(i.legacy||n.version===e.version,"Cannot mix different versions of joi schemas"),!0)},e.isValues=function(t){return t[e.symbols.values]},e.limit=function(t){return Number.isSafeInteger(t)&&t>=0},e.preferences=function(t,s){o=o||i(6914),t=t||{},s=s||{};const n=w.assign({},t,s);return s.errors&&t.errors&&(n.errors=w.assign({},t.errors,s.errors),n.errors.wrap=w.assign({},t.errors.wrap,s.errors.wrap)),s.messages&&(n.messages=o.compile(s.messages,t.messages)),delete n[e.symbols.prefs],n},e.tryWithPath=function(t,e,i){void 0===i&&(i={});try{return t()}catch(t){throw void 0!==t.path?t.path=e+"."+t.path:t.path=e,i.append&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},e.validateArg=function(t,i,s){let{assert:n,message:r}=s;if(e.isSchema(n)){const e=n.validate(t);return e.error?e.error.message:void 0}if(!n(t))return i?"".concat(i," ").concat(r):r},e.verifyFlat=function(t,e){for(const i of t)s(!Array.isArray(i),"Method no longer accepts array arguments:",e)}},3292:(t,e,i)=>{const s=i(375),n=i(8160),r=i(6133),o={};e.schema=function(t,e,i){void 0===i&&(i={}),n.assertOptions(i,["appendPath","override"]);try{return o.schema(t,e,i)}catch(t){throw i.appendPath&&void 0!==t.path&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},o.schema=function(t,e,i){s(void 0!==e,"Invalid undefined schema"),Array.isArray(e)&&(s(e.length,"Invalid empty array schema"),1===e.length&&(e=e[0]));const r=function(e){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return!1!==i.override?e.valid(t.override,...n):e.valid(...n)};if(o.simple(e))return r(t,e);if("function"==typeof e)return t.custom(e);if(s("object"==typeof e,"Invalid schema content:",typeof e),n.isResolvable(e))return r(t,e);if(n.isSchema(e))return e;if(Array.isArray(e)){for(const i of e)if(!o.simple(i))return t.alternatives().try(...e);return r(t,...e)}return e instanceof RegExp?t.string().regex(e):e instanceof Date?r(t.date(),e):(s(w.getPrototypeOf(e)===w.getPrototypeOf({}),"Schema can only contain plain objects"),t.object().keys(e))},e.ref=function(t,e){return r.isRef(t)?t:r.create(t,e)},e.compile=function(t,i,r){void 0===r&&(r={}),n.assertOptions(r,["legacy"]);const h=i&&i[n.symbols.any];if(h)return s(r.legacy||h.version===n.version,"Cannot mix different versions of joi schemas:",h.version,n.version),i;if("object"!=typeof i||!r.legacy)return e.schema(t,i,{appendPath:!0});const a=o.walk(i);return a?a.compile(a.root,i):e.schema(t,i,{appendPath:!0})},o.walk=function(t){if("object"!=typeof t)return null;if(Array.isArray(t)){for(const e of t){const t=o.walk(e);if(t)return t}return null}const e=t[n.symbols.any];if(e)return{root:t[e.root],compile:e.compile};s(w.getPrototypeOf(t)===w.getPrototypeOf({}),"Schema can only contain plain objects");for(const e in t){const i=o.walk(t[e]);if(i)return i}return null},o.simple=function(t){return null===t||["boolean","string","number"].includes(typeof t)},e.when=function(t,i,h){if(void 0===h&&(s(i&&"object"==typeof i,"Missing options"),h=i,i=r.create(".")),Array.isArray(h)&&(h={switch:h}),n.assertOptions(h,["is","not","then","otherwise","switch","break"]),n.isSchema(i))return s(void 0===h.is,'"is" can not be used with a schema condition'),s(void 0===h.not,'"not" can not be used with a schema condition'),s(void 0===h.switch,'"switch" can not be used with a schema condition'),o.condition(t,{is:i,then:h.then,otherwise:h.otherwise,break:h.break});if(s(r.isRef(i)||"string"==typeof i,"Invalid condition:",i),s(void 0===h.not||void 0===h.is,'Cannot combine "is" with "not"'),void 0===h.switch){let a=h;void 0!==h.not&&(a={is:h.not,then:h.otherwise,otherwise:h.then,break:h.break});let u=void 0!==a.is?t.$_compile(a.is):t.$_root.invalid(null,!1,0,"").required();return s(void 0!==a.then||void 0!==a.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),s(void 0===a.break||void 0===a.then||void 0===a.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===h.is||r.isRef(h.is)||n.isSchema(h.is)||(u=u.required()),o.condition(t,{ref:e.ref(i),is:u,then:a.then,otherwise:a.otherwise,break:a.break})}s(Array.isArray(h.switch),'"switch" must be an array'),s(void 0===h.is,'Cannot combine "switch" with "is"'),s(void 0===h.not,'Cannot combine "switch" with "not"'),s(void 0===h.then,'Cannot combine "switch" with "then"');const a={ref:e.ref(i),switch:[],break:h.break};for(let e=0;e<h.switch.length;++e){const i=h.switch[e],o=e===h.switch.length-1;n.assertOptions(i,o?["is","then","otherwise"]:["is","then"]),s(void 0!==i.is,'Switch statement missing "is"'),s(void 0!==i.then,'Switch statement missing "then"');const u={is:t.$_compile(i.is),then:t.$_compile(i.then)};if(r.isRef(i.is)||n.isSchema(i.is)||(u.is=u.is.required()),o){s(void 0===h.otherwise||void 0===i.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const e=void 0!==h.otherwise?h.otherwise:i.otherwise;void 0!==e&&(s(void 0===a.break,"Cannot specify both otherwise and break"),u.otherwise=t.$_compile(e))}a.switch.push(u)}return a},o.condition=function(t,e){for(const i of["then","otherwise"])void 0===e[i]?delete e[i]:e[i]=t.$_compile(e[i]);return e}},6354:(t,e,i)=>{const s=i(5688),n=i(8160),r=i(3328);e.Report=class{D_(t){if(this.template=t,!this.flags.label&&0===this.path.length){const t=this.N_(this.template,"root");t&&(this.local.label=t)}}toString(){if(this.message)return this.message;const t=this.code;if(!this.prefs.errors.render)return this.code;const e=this.N_(this.template)||this.N_(this.prefs.messages)||this.N_(this.messages);return void 0===e?'Error code "'.concat(t,'" is not defined, your custom type is missing the correct messages definition'):(this.message=e.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}N_(t,i){return e.template(this.value,t,i||this.code,this.state,this.prefs)}constructor(t,i,s,n,r,o,h){if(this.code=t,this.flags=n,this.messages=r,this.path=o.path,this.prefs=h,this.state=o,this.value=i,this.message=null,this.template=null,this.local=s||{},this.local.label=e.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const t=this.path[this.path.length-1];"object"!=typeof t&&(this.local.key=t)}}},e.path=function(t){let e="";for(const i of t)"object"!=typeof i&&("string"==typeof i?(e&&(e+="."),e+=i):e+="[".concat(i,"]"));return e},e.template=function(t,e,i,s,o){if(!e)return;if(r.isTemplate(e))return"root"!==i?e:null;let h=o.errors.language;if(n.isResolvable(h)&&(h=h.resolve(t,s,o)),h&&e[h]){if(void 0!==e[h][i])return e[h][i];if(void 0!==e[h]["*"])return e[h]["*"]}return e[i]?e[i]:e["*"]},e.label=function(t,i,s,n){if(!s.errors.label)return"";if(t.label)return t.label;let r=i.path;return"key"===s.errors.label&&i.path.length>1&&(r=i.path.slice(-1)),e.path(r)||e.template(null,s.messages,"root",i,s)||n&&e.template(null,n,"root",i,s)||"value"},e.process=function(t,i,s){if(!t)return null;const{override:n,message:r,details:o}=e.details(t);if(n)return n;if(s.errors.stack)return new e.ValidationError(r,o,i);const h=g.stackTraceLimit;g.stackTraceLimit=0;const a=new e.ValidationError(r,o,i);return g.stackTraceLimit=h,a},e.details=function(t,e){void 0===e&&(e={});let i=[];const s=[];for(const n of t){if(n instanceof g){if(!1!==e.override)return{override:n};const t=n.toString();i.push(t),s.push({message:t,type:"override",context:{error:n}});continue}const t=n.toString();i.push(t),s.push({message:t,path:n.path.filter((t=>"object"!=typeof t)),type:n.code,context:n.local})}return i.length>1&&(i=[...new Set(i)]),{message:i.join(". "),details:s}},e.ValidationError=class extends g{static isError(t){return t instanceof e.ValidationError}constructor(t,e,i){super(t),this.M_=i,this.details=e}},e.ValidationError.prototype.isJoi=!0,e.ValidationError.prototype.name="ValidationError",e.ValidationError.prototype.annotate=s.error},8901:(t,e,i)=>{const s=i(375),n=i(8571),r=i(8160),o=i(6914),h={};e.type=function(t,e){const i=w.getPrototypeOf(t),a=n(i),u=t.w_(w.create(a)),c=w.assign({},e);delete c.base,a.m_=c;const l=i.m_||{};c.messages=o.merge(l.messages,c.messages),c.properties=w.assign({},l.properties,c.properties),u.type=c.type,c.flags=w.assign({},l.flags,c.flags);const d=w.assign({},l.terms);if(c.terms)for(const t in c.terms){const e=c.terms[t];s(void 0===u.$_terms[t],"Invalid term override for",c.type,t),u.$_terms[t]=e.init,d[t]=e}c.terms=d,c.args||(c.args=l.args),c.prepare=h.prepare(c.prepare,l.prepare),c.coerce&&("function"==typeof c.coerce&&(c.coerce={method:c.coerce}),c.coerce.from&&!Array.isArray(c.coerce.from)&&(c.coerce={method:c.coerce.method,from:[].concat(c.coerce.from)})),c.coerce=h.coerce(c.coerce,l.coerce),c.validate=h.validate(c.validate,l.validate);const f=w.assign({},l.rules);if(c.rules)for(const t in c.rules){const e=c.rules[t];s("object"==typeof e,"Invalid rule definition for",c.type,t);let i=e.method;if(void 0===i&&(i=function(){return this.$_addRule(t)}),i&&(s(!a[t],"Rule conflict in",c.type,t),a[t]=i),s(!f[t],"Rule conflict in",c.type,t),f[t]=e,e.alias){const t=[].concat(e.alias);for(const i of t)a[i]=e.method}e.args&&(e.argsByName=new Map,e.args=e.args.map((t=>("string"==typeof t&&(t={name:t}),s(!e.argsByName.has(t.name),"Duplicated argument name",t.name),r.isSchema(t.assert)&&(t.assert=t.assert.strict().label(t.name)),e.argsByName.set(t.name,t),t))))}c.rules=f;const _=w.assign({},l.modifiers);if(c.modifiers)for(const t in c.modifiers){s(!a[t],"Rule conflict in",c.type,t);const e=c.modifiers[t];s("function"==typeof e,"Invalid modifier definition for",c.type,t);const i=function(e){return this.rule({[t]:e})};a[t]=i,_[t]=e}if(c.modifiers=_,c.overrides){a.T_=i,u.$_super={};for(const t in c.overrides)s(i[t],"Cannot override missing",t),c.overrides[t][r.symbols.parent]=i[t],u.$_super[t]=i[t].bind(u);w.assign(a,c.overrides)}c.cast=w.assign({},l.cast,c.cast);const v=w.assign({},l.manifest,c.manifest);return v.build=h.build(c.manifest&&c.manifest.build,l.manifest&&l.manifest.build),c.manifest=v,c.rebuild=h.rebuild(c.rebuild,l.rebuild),u},h.build=function(t,e){return t&&e?function(i,s){return e(t(i,s),s)}:t||e},h.coerce=function(t,e){return t&&e?{from:t.from&&e.from?[...new Set([...t.from,...e.from])]:null,method(i,s){let n;if((!e.from||e.from.includes(typeof i))&&(n=e.method(i,s),n)){if(n.errors||void 0===n.value)return n;i=n.value}if(!t.from||t.from.includes(typeof i)){const e=t.method(i,s);if(e)return e}return n}}:t||e},h.prepare=function(t,e){return t&&e?function(i,s){const n=t(i,s);if(n){if(n.errors||void 0===n.value)return n;i=n.value}return e(i,s)||n}:t||e},h.rebuild=function(t,e){return t&&e?function(i){e(i),t(i)}:t||e},h.validate=function(t,e){return t&&e?function(i,s){const n=e(i,s);if(n){if(n.errors&&(!Array.isArray(n.errors)||n.errors.length))return n;i=n.value}return t(i,s)||n}:t||e}},5107:(t,e,i)=>{const s=i(375),n=i(8571),r=i(8652),o=i(8160),h=i(3292),a=i(6354),u=i(8901),c=i(9708),l=i(6133),d=i(3328),f=i(1152);let _;const v={types:{alternatives:i(4946),any:i(8068),array:i(546),boolean:i(4937),date:i(7500),function:i(390),link:i(8785),number:i(3832),object:i(8966),string:i(7417),symbol:i(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const t={L_:new Set(w.keys(v.types))};for(const e of t.L_)t[e]=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return s(!i.length||["alternatives","link","object"].includes(e),"The",e,"type does not allow arguments"),v.generate(this,v.types[e],i)};for(const e of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])t[e]=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this.any()[e](...i)};w.assign(t,v.methods);for(const e in v.aliases){const i=v.aliases[e];t[e]=t[i]}return t.x=t.expression,f.setup&&f.setup(t),t}};v.methods={ValidationError:a.ValidationError,version:o.version,cache:r.provider,assert(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];v.assert(t,e,!0,s)},attempt:function(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];return v.assert(t,e,!1,s)},build(t){return s("function"==typeof c.build,"Manifest functionality disabled"),c.build(this,t)},checkPreferences(t){o.checkPreferences(t)},compile(t,e){return h.compile(this,t,e)},defaults(t){s("function"==typeof t,"modifier must be a function");const e=w.assign({},this);for(const i of e.L_){const n=t(e[i]());s(o.isSchema(n),"modifier must return a valid schema object"),e[i]=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return v.generate(this,n,e)}}return e},expression:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new d(...e)},extend(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];o.verifyFlat(e,"extend"),_=_||i(3378),s(e.length,"You need to provide at least one extension"),this.assert(e,_.extensions);const r=w.assign({},this);r.L_=new Set(r.L_);for(let t of e){"function"==typeof t&&(t=t(r)),this.assert(t,_.extension);const e=v.expandExtension(t,r);for(const t of e){s(void 0===r[t.type]||r.L_.has(t.type),"Cannot override name",t.type);const e=t.base||this.any(),i=u.type(e,t);r.L_.add(t.type),r[t.type]=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return v.generate(this,i,e)}}}return r},isError:a.ValidationError.isError,isExpression:d.isTemplate,isRef:l.isRef,isSchema:o.isSchema,in:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return l.in(...e)},override:o.symbols.override,ref:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return l.create(...e)},types(){const t={};for(const e of this.L_)t[e]=this[e]();for(const e in v.aliases)t[e]=this[e]();return t}},v.assert=function(t,e,i,s){const r=s[0]instanceof g||"string"==typeof s[0]?s[0]:null,h=null!==r?s[1]:s[0],u=e.validate(t,o.preferences({errors:{stack:!0}},h||{}));let c=u.error;if(!c)return u.value;if(r instanceof g)throw r;const l=i&&"function"==typeof c.annotate?c.annotate():c.message;throw c instanceof a.ValidationError==0&&(c=n(c)),c.message=r?"".concat(r," ").concat(l):l,c},v.generate=function(t,e,i){return s(t,"Must be invoked on a Joi instance."),e.$_root=t,e.m_.args&&i.length?e.m_.args(e,...i):e},v.expandExtension=function(t,e){if("string"==typeof t.type)return[t];const i=[];for(const s of e.L_)if(t.type.test(s)){const n=w.assign({},t);n.type=s,n.base=e[s](),i.push(n)}return i},t.exports=v.root()},6914:(t,e,i)=>{const s=i(375),n=i(8571),r=i(3328);e.compile=function(t,e){if("string"==typeof t)return s(!e,"Cannot set single message string"),new r(t);if(r.isTemplate(t))return s(!e,"Cannot set single message template"),t;s("object"==typeof t&&!Array.isArray(t),"Invalid message options"),e=e?n(e):{};for(let i in t){const n=t[i];if("root"===i||r.isTemplate(n)){e[i]=n;continue}if("string"==typeof n){e[i]=new r(n);continue}s("object"==typeof n&&!Array.isArray(n),"Invalid message for",i);const o=i;for(i in e[o]=e[o]||{},n){const t=n[i];"root"===i||r.isTemplate(t)?e[o][i]=t:(s("string"==typeof t,"Invalid message for",i,"in",o),e[o][i]=new r(t))}}return e},e.decompile=function(t){const e={};for(let i in t){const s=t[i];if("root"===i){e.root=s;continue}if(r.isTemplate(s)){e[i]=s.describe({compact:!0});continue}const n=i;for(i in e[n]={},s){const t=s[i];"root"!==i?e[n][i]=t.describe({compact:!0}):e[n].root=t}}return e},e.merge=function(t,i){if(!t)return e.compile(i);if(!i)return t;if("string"==typeof i)return new r(i);if(r.isTemplate(i))return i;const o=n(t);for(let t in i){const e=i[t];if("root"===t||r.isTemplate(e)){o[t]=e;continue}if("string"==typeof e){o[t]=new r(e);continue}s("object"==typeof e&&!Array.isArray(e),"Invalid message for",t);const n=t;for(t in o[n]=o[n]||{},e){const i=e[t];"root"===t||r.isTemplate(i)?o[n][t]=i:(s("string"==typeof i,"Invalid message for",t,"in",n),o[n][t]=new r(i))}}return o}},2294:(t,e,i)=>{const s=i(375),n=i(8160),r=i(6133),o={};e.Ids=o.Ids=class{clone(){const t=new o.Ids;return t.B_=new Map(this.B_),t.O_=new Map(this.O_),t.F_=this.F_,t}concat(t){t.F_&&(this.F_=!0);for(const[e,i]of t.B_.entries())s(!this.O_.has(e),"Schema id conflicts with existing key:",e),this.B_.set(e,i);for(const[e,i]of t.O_.entries())s(!this.B_.has(e),"Schema key conflicts with existing id:",e),this.O_.set(e,i)}fork(t,e,i){const r=this.V_(t);r.push({schema:i});const h=r.shift();let a={id:h.id,schema:e(h.schema)};s(n.isSchema(a.schema),"adjuster function failed to return a joi schema type");for(const t of r)a={id:t.id,schema:o.fork(t.schema,a.id,a.schema)};return a.schema}labels(t,e){void 0===e&&(e=[]);const i=t[0],s=this.W_(i);if(!s)return[...e,...t].join(".");const n=t.slice(1);return e=[...e,s.schema.l_.label||i],n.length?s.schema.r_.labels(n,e):e.join(".")}reach(t,e){void 0===e&&(e=[]);const i=t[0],n=this.W_(i);s(n,"Schema does not contain path",[...e,...t].join("."));const r=t.slice(1);return r.length?n.schema.r_.reach(r,[...e,i]):n.schema}register(t,e){let{key:i}=void 0===e?{}:e;if(!t||!n.isSchema(t))return;(t.$_property("schemaChain")||t.r_.F_)&&(this.F_=!0);const r=t.l_.id;if(r){const e=this.B_.get(r);s(!e||e.schema===t,"Cannot add different schemas with the same id:",r),s(!this.O_.has(r),"Schema id conflicts with existing key:",r),this.B_.set(r,{schema:t,id:r})}i&&(s(!this.O_.has(i),"Schema already contains key:",i),s(!this.B_.has(i),"Schema key conflicts with existing id:",i),this.O_.set(i,{schema:t,id:i}))}reset(){this.B_=new Map,this.O_=new Map,this.F_=!1}V_(t,e,i){void 0===e&&(e=[]),void 0===i&&(i=[]);const n=t[0],r=this.W_(n);s(r,"Schema does not contain path",[...e,...t].join(".")),i=[r,...i];const o=t.slice(1);return o.length?r.schema.r_.V_(o,[...e,n],i):i}W_(t){return this.B_.get(t)||this.O_.get(t)}constructor(){this.B_=new Map,this.O_=new Map,this.F_=!1}},o.fork=function(t,i,s){const n=e.schema(t,{each:(t,e)=>{let{key:n}=e;if(i===(t.l_.id||n))return s},ref:!1});return n?n.$_mutateRebuild():t},e.schema=function(t,e){let i;for(const s in t.l_){if("_"===s[0])continue;const n=o.scan(t.l_[s],{source:"flags",name:s},e);void 0!==n&&(i=i||t.clone(),i.l_[s]=n)}for(let s=0;s<t.d_.length;++s){const n=t.d_[s],r=o.scan(n.args,{source:"rules",name:n.name},e);if(void 0!==r){i=i||t.clone();const e=w.assign({},n);e.args=r,i.d_[s]=e,i.f_.get(n.name)===n&&i.f_.set(n.name,e)}}for(const s in t.$_terms){if("_"===s[0])continue;const n=o.scan(t.$_terms[s],{source:"terms",name:s},e);void 0!==n&&(i=i||t.clone(),i.$_terms[s]=n)}return i},o.scan=function(t,e,i,s,h){const a=s||[];if(null===t||"object"!=typeof t)return;let u;if(Array.isArray(t)){for(let s=0;s<t.length;++s){const n="terms"===e.source&&"keys"===e.name&&t[s].key,r=o.scan(t[s],e,i,[s,...a],n);void 0!==r&&(u=u||t.slice(),u[s]=r)}return u}if(!1!==i.schema&&n.isSchema(t)||!1!==i.ref&&r.isRef(t)){const s=i.each(t,v(d({},e),{path:a,key:h}));return s===t?void 0:s}for(const s in t){if("_"===s[0])continue;const n=o.scan(t[s],e,i,[s,...a],h);void 0!==n&&(u=u||w.assign({},t),u[s]=n)}return u}},6133:(t,e,i)=>{const s=i(375),n=i(8571),r=i(9621),o=i(8160);let h;const a={symbol:Ao("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};e.create=function(t,e){void 0===e&&(e={}),s("string"==typeof t,"Invalid reference key:",t),o.assertOptions(e,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),s(!e.prefix||"object"==typeof e.prefix,"options.prefix must be of type object");const i=w.assign({},a.defaults,e);delete i.prefix;const n=i.separator,r=a.context(t,n,e.prefix);if(i.type=r.type,t=r.key,"value"===i.type)if(r.root&&(s(!n||t[0]!==n,"Cannot specify relative path with root prefix"),i.ancestor="root",t||(t=null)),n&&n===t)t=null,i.ancestor=0;else if(void 0!==i.ancestor)s(!n||!t||t[0]!==n,"Cannot combine prefix with ancestor option");else{const[e,s]=a.ancestor(t,n);s&&""===(t=t.slice(s))&&(t=null),i.ancestor=e}return i.path=n?null===t?[]:t.split(n):[t],new a.Ref(i)},e.in=function(t,i){return void 0===i&&(i={}),e.create(t,v(d({},i),{in:!0}))},e.isRef=function(t){return!!t&&!!t[o.symbols.ref]},a.Ref=class{resolve(t,e,i,n,r){return void 0===r&&(r={}),s(!this.in||r.in,"Invalid in() reference usage"),"global"===this.type?this.Vd(i.context,e,r):"local"===this.type?this.Vd(n,e,r):this.ancestor?"root"===this.ancestor?this.Vd(e.ancestors[e.ancestors.length-1],e,r):(s(this.ancestor<=e.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this.Vd(e.ancestors[this.ancestor-1],e,r)):this.Vd(t,e,r)}Vd(t,e,i){let s;if("value"===this.type&&e.mainstay.shadow&&!1!==i.shadow&&(s=e.mainstay.shadow.get(this.absolute(e))),void 0===s&&(s=r(t,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(s=this.adjust(s)),this.map){const t=this.map.get(s);void 0!==t&&(s=t)}return e.mainstay&&e.mainstay.tracer.resolve(e,this,s),s}toString(){return this.display}absolute(t){return[...t.path.slice(0,-this.ancestor),...this.path]}clone(){return new a.Ref(this)}describe(){const t={path:this.path};"value"!==this.type&&(t.type=this.type),"."!==this.separator&&(t.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(t.ancestor=this.ancestor),this.map&&(t.map=[...this.map]);for(const e of["adjust","iterables","render"])null!==this[e]&&void 0!==this[e]&&(t[e]=this[e]);return!1!==this.in&&(t.in=!0),{ref:t}}updateDisplay(){const t=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display="ref:".concat(this.type,":").concat(t));if(!this.separator)return void(this.display="ref:".concat(t));if(!this.ancestor)return void(this.display="ref:".concat(this.separator).concat(t));if("root"===this.ancestor)return void(this.display="ref:root:".concat(t));if(1===this.ancestor)return void(this.display="ref:".concat(t||".."));const e=new Array(this.ancestor+1).fill(this.separator).join("");this.display="ref:".concat(e).concat(t||"")}constructor(t){s("object"==typeof t,"Invalid reference construction"),o.assertOptions(t,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),s([!1,void 0].includes(t.separator)||"string"==typeof t.separator&&1===t.separator.length,"Invalid separator"),s(!t.adjust||"function"==typeof t.adjust,"options.adjust must be a function"),s(!t.map||Array.isArray(t.map),"options.map must be an array"),s(!t.map||!t.adjust,"Cannot set both map and adjust options"),w.assign(this,a.defaults,t),s("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}},a.Ref.prototype[o.symbols.ref]=!0,e.build=function(t){return"value"===(t=w.assign({},a.defaults,t)).type&&void 0===t.ancestor&&(t.ancestor=1),new a.Ref(t)},a.context=function(t,e,i){if(void 0===i&&(i={}),t=t.trim(),i){const s=void 0===i.global?"$":i.global;if(s!==e&&t.startsWith(s))return{key:t.slice(s.length),type:"global"};const n=void 0===i.local?"#":i.local;if(n!==e&&t.startsWith(n))return{key:t.slice(n.length),type:"local"};const r=void 0===i.root?"/":i.root;if(r!==e&&t.startsWith(r))return{key:t.slice(r.length),type:"value",root:!0}}return{key:t,type:"value"}},a.ancestor=function(t,e){if(!e)return[1,0];if(t[0]!==e)return[1,0];if(t[1]!==e)return[0,1];let i=2;for(;t[i]===e;)++i;return[i-1,i]},e.toSibling=0,e.toParent=1,e.Manager=class{register(t,s){if(t)if(s=void 0===s?e.toParent:s,Array.isArray(t))for(const e of t)this.register(e,s);else if(o.isSchema(t))for(const e of t.h_.refs)e.ancestor-s>=0&&this.refs.push({ancestor:e.ancestor-s,root:e.root});else e.isRef(t)&&"value"===t.type&&t.ancestor-s>=0&&this.refs.push({ancestor:t.ancestor-s,root:t.root}),h=h||i(3328),h.isTemplate(t)&&this.register(t.refs(),s)}get length(){return this.refs.length}clone(){const t=new e.Manager;return t.refs=n(this.refs),t}reset(){this.refs=[]}roots(){return this.refs.filter((t=>!t.ancestor)).map((t=>t.root))}constructor(){this.refs=[]}}},3378:(t,e,i)=>{const s=i(5107),n={};n.wrap=s.string().min(1).max(2).allow(!1),e.preferences=s.object({allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),context:s.object(),convert:s.boolean(),dateFormat:s.valid("date","iso","string","time","utc"),debug:s.boolean(),errors:{escapeHtml:s.boolean(),label:s.valid("path","key",!1),language:[s.string(),s.object().ref()],render:s.boolean(),stack:s.boolean(),wrap:{label:n.wrap,array:n.wrap,string:n.wrap}},externals:s.boolean(),messages:s.object(),noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:s.valid("required","optional","forbidden"),skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()}).strict(),n.nameRx=/^[a-zA-Z0-9]\w*$/,n.rule=s.object({alias:s.array().items(s.string().pattern(n.nameRx)).single(),args:s.array().items(s.string(),s.object({name:s.string().pattern(n.nameRx).required(),ref:s.boolean(),assert:s.alternatives([s.function(),s.object().schema()]).conditional("ref",{is:!0,then:s.required()}),normalize:s.function(),message:s.string().when("assert",{is:s.function(),then:s.required()})})),convert:s.boolean(),manifest:s.boolean(),method:s.function().allow(!1),multi:s.boolean(),validate:s.function()}),e.extension=s.object({type:s.alternatives([s.string(),s.object().regex()]).required(),args:s.function(),cast:s.object().pattern(n.nameRx,s.object({from:s.function().maxArity(1).required(),to:s.function().minArity(1).maxArity(2).required()})),base:s.object().schema().when("type",{is:s.object().regex(),then:s.forbidden()}),coerce:[s.function().maxArity(3),s.object({method:s.function().maxArity(3).required(),from:s.array().items(s.string()).single()})],flags:s.object().pattern(n.nameRx,s.object({setter:s.string(),default:s.any()})),manifest:{build:s.function().arity(2)},messages:[s.object(),s.string()],modifiers:s.object().pattern(n.nameRx,s.function().minArity(1).maxArity(2)),overrides:s.object().pattern(n.nameRx,s.function()),prepare:s.function().maxArity(3),rebuild:s.function().arity(1),rules:s.object().pattern(n.nameRx,n.rule),terms:s.object().pattern(n.nameRx,s.object({init:s.array().allow(null).required(),manifest:s.object().pattern(/.+/,[s.valid("schema","single"),s.object({mapped:s.object({from:s.string().required(),to:s.string().required()}).required()})])})),validate:s.function().maxArity(3)}).strict(),e.extensions=s.array().items(s.object(),s.function().arity(1)).strict(),n.desc={buffer:s.object({buffer:s.string()}),func:s.object({function:s.function().required(),options:{literal:!0}}),override:s.object({override:!0}),ref:s.object({ref:s.object({type:s.valid("value","global","local"),path:s.array().required(),separator:s.string().length(1).allow(!1),ancestor:s.number().min(0).integer().allow("root"),map:s.array().items(s.array().length(2)).min(1),adjust:s.function(),iterables:s.boolean(),in:s.boolean(),render:s.boolean()}).required()}),regex:s.object({regex:s.string().min(3)}),special:s.object({special:s.valid("deep").required()}),template:s.object({template:s.string().required(),options:s.object()}),value:s.object({value:s.alternatives([s.object(),s.array()]).required()})},n.desc.entity=s.alternatives([s.array().items(s.link("...")),s.boolean(),s.function(),s.number(),s.string(),n.desc.buffer,n.desc.func,n.desc.ref,n.desc.regex,n.desc.special,n.desc.template,n.desc.value,s.link("/")]),n.desc.values=s.array().items(null,s.boolean(),s.function(),s.number().allow(1/0,-1/0),s.string().allow(""),s.symbol(),n.desc.buffer,n.desc.func,n.desc.override,n.desc.ref,n.desc.regex,n.desc.template,n.desc.value),n.desc.messages=s.object().pattern(/.+/,[s.string(),n.desc.template,s.object().pattern(/.+/,[s.string(),n.desc.template])]),e.description=s.object({type:s.string().required(),flags:s.object({cast:s.string(),default:s.any(),description:s.string(),empty:s.link("/"),failover:n.desc.entity,id:s.string(),label:s.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:s.boolean(),unit:s.string()}).unknown(),preferences:{allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),convert:s.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:s.boolean(),label:["path","key"],language:[s.string(),n.desc.ref],wrap:{label:n.wrap,array:n.wrap}},externals:s.boolean(),messages:n.desc.messages,noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:["required","optional","forbidden"],skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()},allow:n.desc.values,invalid:n.desc.values,rules:s.array().min(1).items({name:s.string().required(),args:s.object().min(1),keep:s.boolean(),message:[s.string(),n.desc.messages],warn:s.boolean()}),keys:s.object().pattern(/.*/,s.link("/")),link:n.desc.ref}).pattern(/^[a-z]\w*$/,s.any())},493:(t,e,i)=>{const s=i(8571),n=i(9621),r=i(8160),o={value:Ao("value")};t.exports=o.State=class{localize(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);const s=new o.State(t,e,this);return i&&s.schemas&&(s.schemas=[o.schemas(i),...s.schemas]),s}nest(t,e){const i=new o.State(this.path,this.ancestors,this);return i.schemas=i.schemas&&[o.schemas(t),...i.schemas],i.debug=e,i}shadow(t,e){this.mainstay.shadow=this.mainstay.shadow||new o.Shadow,this.mainstay.shadow.set(this.path,t,e)}snapshot(){this.mainstay.shadow&&(this.U_=s(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.U_),this.U_=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.U_),this.U_=void 0),this.mainstay.commit()}constructor(t,e,i){this.path=t,this.ancestors=e,this.mainstay=i.mainstay,this.schemas=i.schemas,this.debug=null}},o.schemas=function(t){return r.isSchema(t)?{schema:t}:t},o.Shadow=class{set(t,e,i){if(!t.length||"strip"===i&&"number"==typeof t[t.length-1])return;this.__=this.__||new Map;let s=this.__;for(let e=0;e<t.length;++e){const i=t[e];let n=s.get(i);n||(n=new Map,s.set(i,n)),s=n}s[o.value]=e}get(t){const e=this.node(t);if(e)return e[o.value]}node(t){if(this.__)return n(this.__,t,{iterables:!0})}override(t,e){if(!this.__)return;const i=t.slice(0,-1),s=t[t.length-1],r=n(this.__,i,{iterables:!0});e?r.set(s,e):r&&r.delete(s)}constructor(){this.__=null}}},3328:(t,e,i)=>{const s=i(375),n=i(8571),r=i(5277),o=i(1447),h=i(8160),a=i(6354),u=i(6133),c={symbol:Ao("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join("\x01"),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};t.exports=c.Template=class{G_(){if(!this.source.includes("{"))return;const t=c.encode(this.source),e=c.split(t);let i=!1;const s=[],n=e.shift();n&&s.push(n);for(const t of e){const e="{"!==t[0],n=e?"}":"}}",r=t.indexOf(n);if(-1===r||"{"===t[1]){s.push("{".concat(c.decode(t)));continue}let o=t.slice(e?0:1,r);const h=":"===o[0];h&&(o=o.slice(1));const a=this.H_(c.decode(o),{raw:e,wrapped:h});s.push(a),"string"!=typeof a&&(i=!0);const u=t.slice(r+n.length);u&&s.push(c.decode(u))}i?this.N_=s:this.rendered=s.join("")}static date(t,e){return c.dateFormat[e.dateFormat].call(t)}describe(t){if(void 0===t&&(t={}),!this.Z_&&t.compact)return this.source;const e={template:this.source};return this.Z_&&(e.options=this.Z_),this.X_&&(e.functions=this.X_),e}static build(t){return new c.Template(t.template,t.options||t.functions?v(d({},t.options),{functions:t.functions}):void 0)}isDynamic(){return!!this.N_}static isTemplate(t){return!!t&&!!t[h.symbols.template]}refs(){if(!this.N_)return;const t=[];for(const e of this.N_)"string"!=typeof e&&t.push(...e.refs);return t}resolve(t,e,i,s){return this.N_&&1===this.N_.length?this.z_(this.N_[0],t,e,i,s,{}):this.render(t,e,i,s)}z_(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return t.ref?t.ref.resolve(...i):t.formula.evaluate(i)}render(t,e,i,s,n){if(void 0===n&&(n={}),!this.isDynamic())return this.rendered;const o=[];for(const h of this.N_)if("string"==typeof h)o.push(h);else{const a=this.z_(h,t,e,i,s,n),u=c.stringify(a,t,e,i,s,n);if(void 0!==u){const t=h.raw||!1===(n.errors&&n.errors.escapeHtml)?u:r(u);o.push(c.wrap(t,h.wrapped&&i.errors.wrap.label))}}return o.join("")}H_(t,e){let{raw:i,wrapped:s}=e;const n=[],r=t=>{const e=u.create(t,this.Z_);return n.push(e),t=>{const i=e.resolve(...t);return void 0!==i?i:null}};try{const e=this.X_?d(d({},c.functions),this.X_):c.functions;var h=new o.Parser(t,{reference:r,functions:e,constants:c.constants})}catch(e){throw e.message='Invalid template variable "'.concat(t,'" fails due to: ').concat(e.message),e}if(h.single){if("reference"===h.single.type){const t=n[0];return{ref:t,raw:i,refs:n,wrapped:s||"local"===t.type&&"label"===t.key}}return c.stringify(h.single.value)}return{formula:h,raw:i,refs:n}}toString(){return this.source}constructor(t,e){if(s("string"==typeof t,"Template source must be a string"),s(!t.includes("\0")&&!t.includes("\x01"),"Template source cannot contain reserved control characters"),this.source=t,this.rendered=t,this.N_=null,e){const t=e,{functions:i}=t,r=y(t,["functions"]);this.Z_=w.keys(r).length?n(r):void 0,this.X_=i,this.X_&&(s(w.keys(this.X_).every((t=>"string"==typeof t)),"Functions keys must be strings"),s(w.values(this.X_).every((t=>"function"==typeof t)),"Functions values must be functions"))}else this.Z_=void 0,this.X_=void 0;this.G_()}},c.Template.prototype[h.symbols.template]=!0,c.Template.prototype.isImmutable=!0,c.encode=function(t){return t.replace(/\\(\{+)/g,((t,e)=>c.opens.slice(0,e.length))).replace(/\\(\}+)/g,((t,e)=>c.closes.slice(0,e.length)))},c.decode=function(t){return t.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},c.split=function(t){const e=[];let i="";for(let s=0;s<t.length;++s){const n=t[s];if("{"===n){let n="";for(;s+1<t.length&&"{"===t[s+1];)n+="{",++s;e.push(i),i=n}else i+=n}return e.push(i),e},c.wrap=function(t,e){return e?1===e.length?"".concat(e).concat(t).concat(e):"".concat(e[0]).concat(t).concat(e[1]):t},c.stringify=function(t,e,i,s,n,r){void 0===r&&(r={});const o=typeof t,h=s&&s.errors&&s.errors.wrap||{};let a=!1;if(u.isRef(t)&&t.render&&(a=t.in,t=t.resolve(e,i,s,n,d({in:t.in},r))),null===t)return"null";if("string"===o)return c.wrap(t,r.arrayItems&&h.string);if("number"===o||"function"===o||"symbol"===o)return t.toString();if("object"!==o)return JSON.stringify(t);if(t instanceof Date)return c.Template.date(t,s);if(t instanceof Map){const e=[];for(const[i,s]of t.entries())e.push("".concat(i.toString()," -> ").concat(s.toString()));t=e}if(!Array.isArray(t))return t.toString();const l=[];for(const o of t)l.push(c.stringify(o,e,i,s,n,d({arrayItems:!0},r)));return c.wrap(l.join(", "),!a&&h.array)},c.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},c.functions={if:(t,e,i)=>t?e:i,length:t=>"string"==typeof t?t.length:t&&"object"==typeof t?Array.isArray(t)?t.length:w.keys(t).length:null,msg(t){const[e,i,s,n,r]=this,o=r.messages;if(!o)return"";const h=a.template(e,o[0],t,i,s)||a.template(e,o[1],t,i,s);return h?h.render(e,i,s,n,r):""},number:t=>"number"==typeof t?t:"string"==typeof t?C(t):"boolean"==typeof t?t?1:0:t instanceof Date?t.getTime():null}},4946:(t,e,i)=>{const s=i(375),n=i(1687),r=i(8068),o=i(8160),h=i(3292),a=i(6354),u=i(6133),c={};t.exports=r.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:u.toSibling}},args:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return 1===i.length&&Array.isArray(i[0])?t.try(...i[0]):t.try(...i)},validate(t,e){const{schema:i,error:s,state:r,prefs:o}=e;if(i.l_.match){const e=[],h=[];for(let s=0;s<i.$_terms.matches.length;++s){const n=i.$_terms.matches[s],a=r.nest(n.schema,"match.".concat(s));a.snapshot();const u=n.schema.$_validate(t,a,o);u.errors?(h.push(u.errors),a.restore()):(e.push(u.value),a.commit())}if(0===e.length)return{errors:s("alternatives.any",{details:h.map((t=>a.details(t,{override:!1})))})};if("one"===i.l_.match)return 1===e.length?{value:e[0]}:{errors:s("alternatives.one")};if(e.length!==i.$_terms.matches.length)return{errors:s("alternatives.all",{details:h.map((t=>a.details(t,{override:!1})))})};const u=t=>t.$_terms.matches.some((t=>"object"===t.schema.type||"alternatives"===t.schema.type&&u(t.schema)));return u(i)?{value:e.reduce(((t,e)=>n(t,e,{mergeArrays:!1})))}:{value:e[e.length-1]}}const h=[];for(let e=0;e<i.$_terms.matches.length;++e){const s=i.$_terms.matches[e];if(s.schema){const i=r.nest(s.schema,"match.".concat(e));i.snapshot();const n=s.schema.$_validate(t,i,o);if(!n.errors)return i.commit(),n;i.restore(),h.push({schema:s.schema,reports:n.errors});continue}const n=s.ref?s.ref.resolve(t,r,o):t,a=s.is?[s]:s.switch;for(let i=0;i<a.length;++i){const h=a[i],{is:u,then:c,otherwise:l}=h,d="match.".concat(e).concat(s.switch?"."+i:"");if(u.$_match(n,r.nest(u,"".concat(d,".is")),o)){if(c)return c.$_validate(t,r.nest(c,"".concat(d,".then")),o)}else if(l)return l.$_validate(t,r.nest(l,"".concat(d,".otherwise")),o)}}return c.errors(h,e)},rules:{conditional:{method(t,e){s(!this.l_.q_,"Unreachable condition"),s(!this.l_.match,"Cannot combine match mode",this.l_.match,"with conditional rule"),s(void 0===e.break,"Cannot use break option with alternatives conditional");const i=this.clone(),n=h.when(i,t,e),r=n.is?[n]:n.switch;for(const t of r)if(t.then&&t.otherwise){i.$_setFlag("q_",!0,{clone:!1});break}return i.$_terms.matches.push(n),i.$_mutateRebuild()}},match:{method(t){if(s(["any","one","all"].includes(t),"Invalid alternatives match mode",t),"any"!==t)for(const e of this.$_terms.matches)s(e.schema,"Cannot combine match mode",t,"with conditional rules");return this.$_setFlag("match",t)}},try:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s(e.length,"Missing alternative schemas"),o.verifyFlat(e,"try"),s(!this.l_.q_,"Unreachable condition");const n=this.clone();for(const t of e)n.$_terms.matches.push({schema:n.$_compile(t)});return n.$_mutateRebuild()}}},overrides:{label(t){return this.$_parent("label",t).$_modify({each:(e,i)=>"is"!==i.path[0]&&"string"!=typeof e.l_.label?e.label(t):void 0,ref:!1})}},rebuild(t){t.$_modify({each:e=>{o.isSchema(e)&&"array"===e.type&&t.$_setFlag("Y_",!0,{clone:!1})}})},manifest:{build(t,e){if(e.matches)for(const i of e.matches){const{schema:e,ref:s,is:n,not:r,then:o,otherwise:h}=i;t=e?t.try(e):s?t.conditional(s,{is:n,then:o,not:r,otherwise:h,switch:i.switch}):t.conditional(n,{then:o,otherwise:h})}return t}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),c.errors=function(t,e){let{error:i,state:s}=e;if(!t.length)return{errors:i("alternatives.any")};if(1===t.length)return{errors:t[0].reports};const n=new Set,r=[];for(const{reports:e,schema:o}of t){if(e.length>1)return c.unmatched(t,i);const h=e[0];if(h instanceof a.Report==0)return c.unmatched(t,i);if(h.state.path.length!==s.path.length){r.push({type:o.type,report:h});continue}if("any.only"===h.code){for(const t of h.local.valids)n.add(t);continue}const[u,l]=h.code.split(".");"base"!==l?r.push({type:o.type,report:h}):"object.base"===h.code?n.add(h.local.type):n.add(u)}return r.length?1===r.length?{errors:r[0].report}:c.unmatched(t,i):{errors:i("alternatives.types",{types:[...n]})}},c.unmatched=function(t,e){const i=[];for(const e of t)i.push(...e.reports);return{errors:e("alternatives.match",a.details(i,{override:!1}))}}},8068:(t,e,i)=>{const s=i(375),n=i(7629),r=i(8160),o=i(6914);t.exports=n.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(t,e){return s("function"==typeof t,"Method must be a function"),s(void 0===e||e&&"string"==typeof e,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:t,description:e}})},validate(t,e,i){let{method:s}=i;try{return s(t,e)}catch(t){return e.error("any.custom",{error:t})}},args:["method","description"],multi:!0},messages:{method(t){return this.prefs({messages:t})}},shared:{method(t){s(r.isSchema(t)&&t.l_.id,"Schema must be a schema with an id");const e=this.clone();return e.$_terms.shared=e.$_terms.shared||[],e.$_terms.shared.push(t),e.$_mutateRegister(t),e}},warning:{method(t,e){return s(t&&"string"==typeof t,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:t,local:e},warn:!0})},validate:(t,e,i)=>{let{code:s,local:n}=i;return e.error(s,n)},args:["code","local"],multi:!0}},modifiers:{keep(t,e){void 0===e&&(e=!0),t.keep=e},message(t,e){t.message=o.compile(e)},warn(t,e){void 0===e&&(e=!0),t.warn=e}},manifest:{build(t,e){for(const i in e){const s=e[i];if(["examples","externals","metas","notes","tags"].includes(i))for(const e of s)t=t[i.slice(0,-1)](e);else if("alterations"!==i)if("whens"!==i){if("shared"===i)for(const e of s)t=t.shared(e)}else for(const e of s){const{ref:i,is:s,not:n,then:r,otherwise:o,concat:h}=e;t=h?t.concat(h):i?t.when(i,{is:s,not:n,then:r,otherwise:o,switch:e.switch,break:e.break}):t.when(s,{then:r,otherwise:o,break:e.break})}else{const e={};for(const{target:t,adjuster:i}of s)e[t]=i;t=t.alter(e)}}return t}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(t,e,i)=>{const s=i(375),n=i(9474),r=i(9621),o=i(8068),h=i(8160),a=i(3292),u={};t.exports=o.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},K_:{init:[]},j_:{init:[]},Q_:{init:[]}},coerce:{from:"object",method(t,e){let{schema:i,state:s,prefs:n}=e;if(!Array.isArray(t))return;const r=i.$_getRule("sort");return r?u.sort(i,t,r.args.options,s,n):void 0}},validate(t,e){let{schema:i,error:s}=e;if(!Array.isArray(t)){if(i.l_.single){const e=[t];return e[h.symbols.arraySingle]=!0,{value:e}}return{errors:s("array.base")}}if(i.$_getRule("items")||i.$_terms.externals)return{value:t.slice()}},rules:{has:{method(t){t=this.$_compile(t,{appendPath:!0});const e=this.$_addRule({name:"has",args:{schema:t}});return e.$_mutateRegister(t),e},validate(t,e,i){let{state:s,prefs:n,error:r}=e,{schema:o}=i;const h=[t,...s.ancestors];for(let e=0;e<t.length;++e){const i=s.localize([...s.path,e],h,o);if(o.$_match(t[e],i,n))return t}const a=o.l_.label;return a?r("array.hasKnown",{patternLabel:a}):r("array.hasUnknown",null)},multi:!0},items:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];h.verifyFlat(e,"items");const s=this.$_addRule("items");for(let t=0;t<e.length;++t){const i=h.tryWithPath((()=>this.$_compile(e[t])),t,{append:!0});s.$_terms.items.push(i)}return s.$_mutateRebuild()},validate(t,e){let{schema:i,error:s,state:n,prefs:r,errorsArray:o}=e;const a=i.$_terms.Q_.slice(),c=i.$_terms.ordered.slice(),l=[...i.$_terms.j_,...a],d=!t[h.symbols.arraySingle];delete t[h.symbols.arraySingle];const f=o();let _=t.length;for(let e=0;e<_;++e){const o=t[e];let h=!1,v=!1;const m=d?e:new Number(e),g=[...n.path,m];if(!i.l_.sparse&&void 0===o){if(f.push(s("array.sparse",{key:m,path:g,pos:e,value:void 0},n.localize(g))),r.abortEarly)return f;c.shift();continue}const p=[t,...n.ancestors];for(const t of i.$_terms.K_)if(t.$_match(o,n.localize(g,p,t),r,{presence:"ignore"})){if(f.push(s("array.excludes",{pos:e,value:o},n.localize(g))),r.abortEarly)return f;h=!0,c.shift();break}if(h)continue;if(i.$_terms.ordered.length){if(c.length){const h=c.shift(),a=h.$_validate(o,n.localize(g,p,h),r);if(a.errors){if(f.push(...a.errors),r.abortEarly)return f}else if("strip"===h.l_.result)u.fastSplice(t,e),--e,--_;else{if(!i.l_.sparse&&void 0===a.value){if(f.push(s("array.sparse",{key:m,path:g,pos:e,value:void 0},n.localize(g))),r.abortEarly)return f;continue}t[e]=a.value}continue}if(!i.$_terms.items.length){if(f.push(s("array.orderedLength",{pos:e,limit:i.$_terms.ordered.length})),r.abortEarly)return f;break}}const w=[];let y=a.length;for(let h=0;h<y;++h){const c=n.localize(g,p,a[h]);c.snapshot();const l=a[h].$_validate(o,c,r);if(w[h]=l,!l.errors){if(c.commit(),t[e]=l.value,v=!0,u.fastSplice(a,h),--h,--y,!i.l_.sparse&&void 0===l.value&&(f.push(s("array.sparse",{key:m,path:g,pos:e,value:void 0},n.localize(g))),r.abortEarly))return f;break}c.restore()}if(v)continue;const b=r.stripUnknown&&!!r.stripUnknown.arrays||!1;y=l.length;for(const c of l){let l;const d=a.indexOf(c);if(-1!==d)l=w[d];else{const a=n.localize(g,p,c);if(a.snapshot(),l=c.$_validate(o,a,r),!l.errors){a.commit(),"strip"===c.l_.result?(u.fastSplice(t,e),--e,--_):i.l_.sparse||void 0!==l.value?t[e]=l.value:(f.push(s("array.sparse",{key:m,path:g,pos:e,value:void 0},n.localize(g))),h=!0),v=!0;break}a.restore()}if(1===y){if(b){u.fastSplice(t,e),--e,--_,v=!0;break}if(f.push(...l.errors),r.abortEarly)return f;h=!0;break}}if(!h&&(i.$_terms.j_.length||i.$_terms.Q_.length)&&!v){if(b){u.fastSplice(t,e),--e,--_;continue}if(f.push(s("array.includes",{pos:e,value:o},n.localize(g))),r.abortEarly)return f}}return a.length&&u.fillMissedErrors(i,f,a,t,n,r),c.length&&(u.fillOrderedErrors(i,f,c,t,n,r),f.length||u.fillDefault(c,t,n,r)),f.length?f:t},priority:!0,manifest:!1},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,e,i,s)=>{let{limit:n}=i,{name:r,operator:o,args:a}=s;return h.compare(t.length,n,o)?t:e.error("array."+r,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},ordered:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];h.verifyFlat(e,"ordered");const s=this.$_addRule("items");for(let t=0;t<e.length;++t){const i=h.tryWithPath((()=>this.$_compile(e[t])),t,{append:!0});u.validateSingle(i,s),s.$_mutateRegister(i),s.$_terms.ordered.push(i)}return s.$_mutateRebuild()}},single:{method(t){const e=void 0===t||!!t;return s(!e||!this.l_.Y_,"Cannot specify single rule when array has array items"),this.$_setFlag("single",e)}},sort:{method(t){void 0===t&&(t={}),h.assertOptions(t,["by","order"]);const e={order:t.order||"ascending"};return t.by&&(e.by=a.ref(t.by,{ancestor:0}),s(!e.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:e}})},validate(t,e,i){let{error:s,state:n,prefs:r,schema:o}=e,{options:h}=i;const{value:a,errors:c}=u.sort(o,t,h,n,r);if(c)return c;for(let e=0;e<t.length;++e)if(t[e]!==a[e])return s("array.sort",{order:h.order,by:h.by?h.by.key:"value"});return t},convert:!0},sparse:{method(t){const e=void 0===t||!!t;return this.l_.sparse===e?this:(e?this.clone():this.$_addRule("items")).$_setFlag("sparse",e,{clone:!1})}},unique:{method(t,e){void 0===e&&(e={}),s(!t||"function"==typeof t||"string"==typeof t,"comparator must be a function or a string"),h.assertOptions(e,["ignoreUndefined","separator"]);const i={name:"unique",args:{options:e,comparator:t}};if(t)if("string"==typeof t){const s=h.default(e.separator,".");i.path=s?t.split(s):[t]}else i.comparator=t;return this.$_addRule(i)},validate(t,e,i,o){let{state:h,error:a,schema:u}=e,{comparator:c,options:l}=i,{comparator:d,path:f}=o;const _={string:w.create(null),number:w.create(null),undefined:w.create(null),boolean:w.create(null),bigint:w.create(null),object:new Map,function:new Map,custom:new Map},v=d||n,m=l.ignoreUndefined;for(let e=0;e<t.length;++e){const i=f?r(t[e],f):t[e],n=d?_.custom:_[typeof i];if(s(n,"Failed to find unique map container for type",typeof i),n instanceof Map){const s=n.entries();let r;for(;!(r=s.next()).done;)if(v(r.value[0],i)){const i=h.localize([...h.path,e],[t,...h.ancestors]),s={pos:e,value:t[e],dupePos:r.value[1],dupeValue:t[r.value[1]]};return f&&(s.path=c),a("array.unique",s,i)}n.set(i,e)}else{if((!m||void 0!==i)&&void 0!==n[i]){const s={pos:e,value:t[e],dupePos:n[i],dupeValue:t[n[i]]};return f&&(s.path=c),a("array.unique",s,h.localize([...h.path,e],[t,...h.ancestors]))}n[i]=e}}return t},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(t,e)=>new Set(t)}},rebuild(t){t.$_terms.j_=[],t.$_terms.K_=[],t.$_terms.Q_=[];for(const e of t.$_terms.items)u.validateSingle(e,t),"required"===e.l_.presence?t.$_terms.Q_.push(e):"forbidden"===e.l_.presence?t.$_terms.K_.push(e):t.$_terms.j_.push(e);for(const e of t.$_terms.ordered)u.validateSingle(e,t)},manifest:{build:(t,e)=>(e.items&&(t=t.items(...e.items)),e.ordered&&(t=t.ordered(...e.ordered)),t)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),u.fillMissedErrors=function(t,e,i,s,n,r){const o=[];let h=0;for(const t of i){const e=t.l_.label;e?o.push(e):++h}o.length?h?e.push(t.$_createError("array.includesRequiredBoth",s,{knownMisses:o,unknownMisses:h},n,r)):e.push(t.$_createError("array.includesRequiredKnowns",s,{knownMisses:o},n,r)):e.push(t.$_createError("array.includesRequiredUnknowns",s,{unknownMisses:h},n,r))},u.fillOrderedErrors=function(t,e,i,s,n,r){const o=[];for(const t of i)"required"===t.l_.presence&&o.push(t);o.length&&u.fillMissedErrors(t,e,o,s,n,r)},u.fillDefault=function(t,e,i,s){const n=[];let r=!0;for(let o=t.length-1;o>=0;--o){const h=t[o],a=[e,...i.ancestors],u=h.$_validate(void 0,i.localize(i.path,a,h),s).value;if(r){if(void 0===u)continue;r=!1}n.unshift(u)}n.length&&e.push(...n)},u.fastSplice=function(t,e){let i=e;for(;i<t.length;)t[i++]=t[i];--t.length},u.validateSingle=function(t,e){("array"===t.type||t.l_.Y_)&&(s(!e.l_.single,"Cannot specify array item with single rule enabled"),e.$_setFlag("Y_",!0,{clone:!1}))},u.sort=function(t,e,i,s,n){const r="ascending"===i.order?1:-1,o=-1*r,h=r,a=(a,c)=>{let l=u.compare(a,c,o,h);if(null!==l||(i.by&&(a=i.by.resolve(a,s,n),c=i.by.resolve(c,s,n)),l=u.compare(a,c,o,h),null!==l))return l;const d=typeof a;if(d!==typeof c)throw t.$_createError("array.sort.mismatching",e,null,s,n);if("number"!==d&&"string"!==d)throw t.$_createError("array.sort.unsupported",e,{type:d},s,n);return"number"===d?(a-c)*r:a<c?o:h};try{return{value:e.slice().sort(a)}}catch(t){return{errors:t}}},u.compare=function(t,e,i,s){return t===e?0:void 0===t?1:void 0===e?-1:null===t?s:null===e?i:null}},4937:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o=i(2036),h={isBool:function(t){return"boolean"==typeof t}};t.exports=n.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(t,e){let{schema:i}=e;if("boolean"!=typeof t){if("string"==typeof t){const e=i.l_.sensitive?t:t.toLowerCase();t="true"===e||"false"!==e&&t}return"boolean"!=typeof t&&(t=i.$_terms.truthy&&i.$_terms.truthy.has(t,null,null,!i.l_.sensitive)||(!i.$_terms.falsy||!i.$_terms.falsy.has(t,null,null,!i.l_.sensitive))&&t),{value:t}}},validate(t,e){let{error:i}=e;if("boolean"!=typeof t)return{value:t,errors:i("boolean.base")}},rules:{truthy:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];r.verifyFlat(e,"truthy");const n=this.clone();n.$_terms.truthy=n.$_terms.truthy||new o;for(let t=0;t<e.length;++t){const i=e[t];s(void 0!==i,"Cannot call truthy with undefined"),n.$_terms.truthy.add(i)}return n}},falsy:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];r.verifyFlat(e,"falsy");const n=this.clone();n.$_terms.falsy=n.$_terms.falsy||new o;for(let t=0;t<e.length;++t){const i=e[t];s(void 0!==i,"Cannot call falsy with undefined"),n.$_terms.falsy.add(i)}return n}},sensitive:{method(t){return void 0===t&&(t=!0),this.$_setFlag("sensitive",t)}}},cast:{number:{from:h.isBool,to:(t,e)=>t?1:0},string:{from:h.isBool,to:(t,e)=>t?"true":"false"}},manifest:{build:(t,e)=>(e.truthy&&(t=t.truthy(...e.truthy)),e.falsy&&(t=t.falsy(...e.falsy)),t)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o=i(3328),h={isDate:function(t){return t instanceof Date}};t.exports=n.extend({type:"date",coerce:{from:["number","string"],method:(t,e)=>{let{schema:i}=e;return{value:h.parse(t,i.l_.format)||t}}},validate(t,e){let{schema:i,error:s,prefs:n}=e;if(t instanceof Date&&!S(t.getTime()))return;const r=i.l_.format;return n.convert&&r&&"string"==typeof t?{value:t,errors:s("date.format",{format:r})}:{value:t,errors:s("date.base")}},rules:{compare:{method:!1,validate(t,e,i,s){let{date:n}=i,{name:o,operator:h,args:a}=s;const u="now"===n?Date.now():n.getTime();return r.compare(t.getTime(),u,h)?t:e.error("date."+o,{limit:a.date,value:t})},args:[{name:"date",ref:!0,normalize:t=>"now"===t?t:h.parse(t),assert:t=>null!==t,message:"must have a valid date format"}]},format:{method(t){return s(["iso","javascript","unix"].includes(t),"Unknown date format",t),this.$_setFlag("format",t)}},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{date:t},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{date:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{date:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{date:t},operator:">="})}},timestamp:{method(t){return void 0===t&&(t="javascript"),s(["javascript","unix"].includes(t),'"type" must be one of "javascript, unix"'),this.format(t)}}},cast:{number:{from:h.isDate,to:(t,e)=>t.getTime()},string:{from:h.isDate,to:(t,e)=>{let{prefs:i}=e;return o.date(t,i)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),h.parse=function(t,e){if(t instanceof Date)return t;if("string"!=typeof t&&(S(t)||!isFinite(t))||/^\s*$/.test(t))return null;if("iso"===e)return r.isIsoDate(t)?h.date(t.toString()):null;const i=t;if("string"==typeof t&&/^[+-]?\d+(\.\d+)?$/.test(t)&&(t=C(t)),e){if("javascript"===e)return h.date(1*t);if("unix"===e)return h.date(1e3*t);if("string"==typeof i)return null}return h.date(t)},h.date=function(t){const e=new Date(t);return S(e.getTime())?null:e}},390:(t,e,i)=>{const s=i(375),n=i(7824);t.exports=n.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:t}})},validate:(t,e,i)=>{let{n:s}=i;return t.length===s?t:e.error("function.arity",{n:s})}},class:{method(){return this.$_addRule("class")},validate:(t,e)=>/^\s*class\s/.test(t.toString())?t:e.error("function.class",{value:t})},minArity:{method(t){return s(Number.isSafeInteger(t)&&t>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:t}})},validate:(t,e,i)=>{let{n:s}=i;return t.length>=s?t:e.error("function.minArity",{n:s})}},maxArity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:t}})},validate:(t,e,i)=>{let{n:s}=i;return t.length<=s?t:e.error("function.maxArity",{n:s})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(t,e,i)=>{const s=i(978),n=i(375),r=i(8571),o=i(3652),h=i(8068),a=i(8160),u=i(3292),c=i(6354),l=i(6133),f=i(3328),_={renameDefaults:{alias:!1,multiple:!1,override:!1}};t.exports=h.extend({type:"J_",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(t,e)=>t.keys(e),validate(t,e){let{schema:i,error:s,state:n,prefs:r}=e;if(!t||typeof t!==i.$_property("typeof")||Array.isArray(t))return{value:t,errors:s("object.base",{type:i.$_property("typeof")})};if(!(i.$_terms.renames||i.$_terms.dependencies||i.$_terms.keys||i.$_terms.patterns||i.$_terms.externals))return;t=_.clone(t,r);const o=[];if(i.$_terms.renames&&!_.rename(i,t,n,r,o))return{value:t,errors:o};if(!i.$_terms.keys&&!i.$_terms.patterns&&!i.$_terms.dependencies)return{value:t,errors:o};const h=new Set(w.keys(t));if(i.$_terms.keys){const e=[t,...n.ancestors];for(const s of i.$_terms.keys){const i=s.key,a=t[i];h.delete(i);const u=n.localize([...n.path,i],e,s),c=s.schema.$_validate(a,u,r);if(c.errors){if(r.abortEarly)return{value:t,errors:c.errors};void 0!==c.value&&(t[i]=c.value),o.push(...c.errors)}else"strip"===s.schema.l_.result||void 0===c.value&&void 0!==a?delete t[i]:void 0!==c.value&&(t[i]=c.value)}}if(h.size||i.l_.rv){const e=_.unknown(i,t,h,o,n,r);if(e)return e}if(i.$_terms.dependencies)for(const e of i.$_terms.dependencies){if(null!==e.key&&!1===_.isPresent(e.options)(e.key.resolve(t,n,r,null,{shadow:!1})))continue;const s=_.dependencies[e.rel](i,e,t,n,r);if(s){const e=i.$_createError(s.code,t,s.context,n,r);if(r.abortEarly)return{value:t,errors:e};o.push(e)}}return{value:t,errors:o}},rules:{and:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"and"),_.dependency(this,"and",null,e)}},append:{method(t){return null==t||0===w.keys(t).length?this:this.keys(t)}},assert:{method(t,e,i){f.isTemplate(t)||(t=u.ref(t)),n(void 0===i||"string"==typeof i,"Message must be a string"),e=this.$_compile(e,{appendPath:!0});const s=this.$_addRule({name:"assert",args:{subject:t,schema:e,message:i}});return s.$_mutateRegister(t),s.$_mutateRegister(e),s},validate(t,e,i){let{error:s,prefs:n,state:r}=e,{subject:o,schema:h,message:a}=i;const u=o.resolve(t,r,n),c=l.isRef(o)?o.absolute(r):[];return h.$_match(u,r.localize(c,[t,...r.ancestors],h),n)?t:s("object.assert",{subject:o,message:a})},args:["subject","schema","message"],multi:!0},instance:{method(t,e){return n("function"==typeof t,"constructor must be a function"),e=e||t.name,this.$_addRule({name:"instance",args:{constructor:t,name:e}})},validate:(t,e,i)=>{let{constructor:s,name:n}=i;return t instanceof s?t:e.error("object.instance",{type:n,value:t})},args:["constructor","name"]},keys:{method(t){n(void 0===t||"object"==typeof t,"Object schema must be a valid object"),n(!a.isSchema(t),"Object schema cannot be a joi schema");const e=this.clone();if(t)if(w.keys(t).length){e.$_terms.keys=e.$_terms.keys?e.$_terms.keys.filter((e=>!t.hasOwnProperty(e.key))):new _.Keys;for(const i in t)a.tryWithPath((()=>e.$_terms.keys.push({key:i,schema:this.$_compile(t[i])})),i)}else e.$_terms.keys=new _.Keys;else e.$_terms.keys=null;return e.$_mutateRebuild()}},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,e,i,s)=>{let{limit:n}=i,{name:r,operator:o,args:h}=s;return a.compare(w.keys(t).length,n,o)?t:e.error("object."+r,{limit:h.limit,value:t})},args:[{name:"limit",ref:!0,assert:a.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},nand:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"nand"),_.dependency(this,"nand",null,e)}},or:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"or"),_.dependency(this,"or",null,e)}},oxor:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return _.dependency(this,"oxor",null,e)}},pattern:{method(t,e,i){void 0===i&&(i={});const s=t instanceof RegExp;s||(t=this.$_compile(t,{appendPath:!0})),n(void 0!==e,"Invalid rule"),a.assertOptions(i,["fallthrough","matches"]),s&&n(!t.flags.includes("g")&&!t.flags.includes("y"),"pattern should not use global or sticky mode"),e=this.$_compile(e,{appendPath:!0});const r=this.clone();r.$_terms.patterns=r.$_terms.patterns||[];const o={[s?"regex":"schema"]:t,rule:e};return i.matches&&(o.matches=this.$_compile(i.matches),"array"!==o.matches.type&&(o.matches=o.matches.$_root.array().items(o.matches)),r.$_mutateRegister(o.matches),r.$_setFlag("rv",!0,{clone:!1})),i.fallthrough&&(o.fallthrough=!0),r.$_terms.patterns.push(o),r.$_mutateRegister(e),r}},ref:{method(){return this.$_addRule("ref")},validate:(t,e)=>l.isRef(t)?t:e.error("object.refType",{value:t})},regex:{method(){return this.$_addRule("regex")},validate:(t,e)=>t instanceof RegExp?t:e.error("object.regex",{value:t})},rename:{method(t,e,i){void 0===i&&(i={}),n("string"==typeof t||t instanceof RegExp,"Rename missing the from argument"),n("string"==typeof e||e instanceof f,"Invalid rename to argument"),n(e!==t,"Cannot rename key to same name:",t),a.assertOptions(i,["alias","ignoreUndefined","override","multiple"]);const r=this.clone();r.$_terms.renames=r.$_terms.renames||[];for(const e of r.$_terms.renames)n(e.from!==t,"Cannot rename the same key multiple times");return e instanceof f&&r.$_mutateRegister(e),r.$_terms.renames.push({from:t,to:e,options:s(_.renameDefaults,i)}),r}},schema:{method(t){return void 0===t&&(t="any"),this.$_addRule({name:"schema",args:{type:t}})},validate:(t,e,i)=>{let{type:s}=i;return!a.isSchema(t)||"any"!==s&&t.type!==s?e.error("object.schema",{type:s}):t}},unknown:{method(t){return this.$_setFlag("unknown",!1!==t)}},with:{method(t,e,i){return void 0===i&&(i={}),_.dependency(this,"with",t,e,i)}},without:{method(t,e,i){return void 0===i&&(i={}),_.dependency(this,"without",t,e,i)}},xor:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"xor"),_.dependency(this,"xor",null,e)}}},overrides:{default(t,e){return void 0===t&&(t=a.symbols.deepDefault),this.$_parent("default",t,e)}},rebuild(t){if(t.$_terms.keys){const e=new o.Sorter;for(const i of t.$_terms.keys)a.tryWithPath((()=>e.add(i,{after:i.schema.$_rootReferences(),group:i.key})),i.key);t.$_terms.keys=new _.Keys(...e.nodes)}},manifest:{build(t,e){if(e.keys&&(t=t.keys(e.keys)),e.dependencies)for(const{rel:i,key:s=null,peers:n,options:r}of e.dependencies)t=_.dependency(t,i,s,n,r);if(e.patterns)for(const{regex:i,schema:s,rule:n,fallthrough:r,matches:o}of e.patterns)t=t.pattern(i||s,n,{fallthrough:r,matches:o});if(e.renames)for(const{from:i,to:s,options:n}of e.renames)t=t.rename(i,s,n);return t}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),_.clone=function(t,e){if("object"==typeof t){if(e.nonEnumerables)return r(t,{shallow:!0});const i=w.create(w.getPrototypeOf(t));return w.assign(i,t),i}const i=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return t.apply(this,i)};return i.prototype=r(t.prototype),w.defineProperty(i,"name",{value:t.name,writable:!1}),w.defineProperty(i,"length",{value:t.length,writable:!1}),w.assign(i,t),i},_.dependency=function(t,e,i,s,r){n(null===i||"string"==typeof i,e,"key must be a strings"),r||(r=s.length>1&&"object"==typeof s[s.length-1]?s.pop():{}),a.assertOptions(r,["separator","isPresent"]),s=[].concat(s);const o=a.default(r.separator,"."),h=[];for(const t of s)n("string"==typeof t,e,"peers must be strings"),h.push(u.ref(t,{separator:o,ancestor:0,prefix:!1}));null!==i&&(i=u.ref(i,{separator:o,ancestor:0,prefix:!1}));const c=t.clone();return c.$_terms.dependencies=c.$_terms.dependencies||[],c.$_terms.dependencies.push(new _.Dependency(e,i,h,s,r)),c},_.dependencies={and(t,e,i,s,n){const r=[],o=[],h=e.peers.length,a=_.isPresent(e.options);for(const t of e.peers)!1===a(t.resolve(i,s,n,null,{shadow:!1}))?r.push(t.key):o.push(t.key);if(r.length!==h&&o.length!==h)return{code:"object.and",context:{present:o,presentWithLabels:_.keysToLabels(t,o),missing:r,missingWithLabels:_.keysToLabels(t,r)}}},nand(t,e,i,s,n){const r=[],o=_.isPresent(e.options);for(const t of e.peers)o(t.resolve(i,s,n,null,{shadow:!1}))&&r.push(t.key);if(r.length!==e.peers.length)return;const h=e.paths[0],a=e.paths.slice(1);return{code:"object.nand",context:{main:h,mainWithLabel:_.keysToLabels(t,h),peers:a,peersWithLabels:_.keysToLabels(t,a)}}},or(t,e,i,s,n){const r=_.isPresent(e.options);for(const t of e.peers)if(r(t.resolve(i,s,n,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:e.paths,peersWithLabels:_.keysToLabels(t,e.paths)}}},oxor(t,e,i,s,n){const r=[],o=_.isPresent(e.options);for(const t of e.peers)o(t.resolve(i,s,n,null,{shadow:!1}))&&r.push(t.key);if(!r.length||1===r.length)return;const h={peers:e.paths,peersWithLabels:_.keysToLabels(t,e.paths)};return h.present=r,h.presentWithLabels=_.keysToLabels(t,r),{code:"object.oxor",context:h}},with(t,e,i,s,n){const r=_.isPresent(e.options);for(const o of e.peers)if(!1===r(o.resolve(i,s,n,null,{shadow:!1})))return{code:"object.with",context:{main:e.key.key,mainWithLabel:_.keysToLabels(t,e.key.key),peer:o.key,peerWithLabel:_.keysToLabels(t,o.key)}}},without(t,e,i,s,n){const r=_.isPresent(e.options);for(const o of e.peers)if(r(o.resolve(i,s,n,null,{shadow:!1})))return{code:"object.without",context:{main:e.key.key,mainWithLabel:_.keysToLabels(t,e.key.key),peer:o.key,peerWithLabel:_.keysToLabels(t,o.key)}}},xor(t,e,i,s,n){const r=[],o=_.isPresent(e.options);for(const t of e.peers)o(t.resolve(i,s,n,null,{shadow:!1}))&&r.push(t.key);if(1===r.length)return;const h={peers:e.paths,peersWithLabels:_.keysToLabels(t,e.paths)};return 0===r.length?{code:"object.missing",context:h}:(h.present=r,h.presentWithLabels=_.keysToLabels(t,r),{code:"object.xor",context:h})}},_.keysToLabels=function(t,e){return Array.isArray(e)?e.map((e=>t.$_mapLabels(e))):t.$_mapLabels(e)},_.isPresent=function(t){return"function"==typeof t.isPresent?t.isPresent:t=>void 0!==t},_.rename=function(t,e,i,s,n){const r={};for(const o of t.$_terms.renames){const h=[],a="string"!=typeof o.from;if(a)for(const t in e){if(void 0===e[t]&&o.options.ignoreUndefined||t===o.to)continue;const i=o.from.exec(t);i&&h.push({from:t,to:o.to,match:i})}else!w.prototype.hasOwnProperty.call(e,o.from)||void 0===e[o.from]&&o.options.ignoreUndefined||h.push(o);for(const u of h){const h=u.from;let c=u.to;if(c instanceof f&&(c=c.render(e,i,s,u.match)),h!==c){if(!o.options.multiple&&r[c]&&(n.push(t.$_createError("object.rename.multiple",e,{from:h,to:c,pattern:a},i,s)),s.abortEarly)||w.prototype.hasOwnProperty.call(e,c)&&!o.options.override&&!r[c]&&(n.push(t.$_createError("object.rename.override",e,{from:h,to:c,pattern:a},i,s)),s.abortEarly))return!1;void 0===e[h]?delete e[c]:e[c]=e[h],r[c]=!0,o.options.alias||delete e[h]}}}return!0},_.unknown=function(t,e,i,s,n,r){if(t.$_terms.patterns){let o=!1;const h=t.$_terms.patterns.map((t=>{if(t.matches)return o=!0,[]})),a=[e,...n.ancestors];for(const o of i){const u=e[o],c=[...n.path,o];for(let l=0;l<t.$_terms.patterns.length;++l){const d=t.$_terms.patterns[l];if(d.regex){const t=d.regex.test(o);if(n.mainstay.tracer.debug(n,"rule","pattern.".concat(l),t?"pass":"error"),!t)continue}else if(!d.schema.$_match(o,n.nest(d.schema,"pattern.".concat(l)),r))continue;i.delete(o);const f=n.localize(c,a,{schema:d.rule,key:o}),_=d.rule.$_validate(u,f,r);if(_.errors){if(r.abortEarly)return{value:e,errors:_.errors};s.push(..._.errors)}if(d.matches&&h[l].push(o),e[o]=_.value,!d.fallthrough)break}}if(o)for(let i=0;i<h.length;++i){const o=h[i];if(!o)continue;const u=t.$_terms.patterns[i].matches,l=n.localize(n.path,a,u),d=u.$_validate(o,l,r);if(d.errors){const i=c.details(d.errors,{override:!1});i.matches=o;const h=t.$_createError("object.pattern.match",e,i,n,r);if(r.abortEarly)return{value:e,errors:h};s.push(h)}}}if(i.size&&(t.$_terms.keys||t.$_terms.patterns)){if(r.stripUnknown&&void 0===t.l_.unknown||r.skipFunctions){const t=!(!r.stripUnknown||!0!==r.stripUnknown&&!r.stripUnknown.objects);for(const s of i)t?(delete e[s],i.delete(s)):"function"==typeof e[s]&&i.delete(s)}if(!a.default(t.l_.unknown,r.allowUnknown))for(const o of i){const i=n.localize([...n.path,o],[]),h=t.$_createError("object.unknown",e[o],{child:o},i,r,{flags:!1});if(r.abortEarly)return{value:e,errors:h};s.push(h)}}},_.Dependency=class{describe(){const t={rel:this.rel,peers:this.paths};return null!==this.key&&(t.key=this.key.key),"."!==this.peers[0].separator&&(t.options=v(d({},t.options),{separator:this.peers[0].separator})),this.options.isPresent&&(t.options=v(d({},t.options),{isPresent:this.options.isPresent})),t}constructor(t,e,i,s,n){this.rel=t,this.key=e,this.peers=i,this.paths=s,this.options=n}},_.Keys=class extends Array{concat(t){const e=this.slice(),i=new Map;for(let t=0;t<e.length;++t)i.set(e[t].key,t);for(const s of t){const t=s.key,n=i.get(t);void 0!==n?e[n]={key:t,schema:e[n].schema.concat(s.schema)}:e.push(s)}return e}}},8785:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o=i(3292),h=i(6354),a={};t.exports=n.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(t,e)=>t.ref(e),validate(t,e){let{schema:i,state:n,prefs:r}=e;s(i.$_terms.link,"Uninitialized link schema");const o=a.generate(i,t,n,r),h=i.$_terms.link[0].ref;return o.$_validate(t,n.nest(o,"link:".concat(h.display,":").concat(o.type)),r)},generate:(t,e,i,s)=>a.generate(t,e,i,s),rules:{ref:{method(t){s(!this.$_terms.link,"Cannot reinitialize schema"),t=o.ref(t),s("value"===t.type||"local"===t.type,"Invalid reference type:",t.type),s("local"===t.type||"root"===t.ancestor||t.ancestor>0,"Link cannot reference itself");const e=this.clone();return e.$_terms.link=[{ref:t}],e}},relative:{method(t){return void 0===t&&(t=!0),this.$_setFlag("relative",t)}}},overrides:{concat(t){s(this.$_terms.link,"Uninitialized link schema"),s(r.isSchema(t),"Invalid schema object"),s("link"!==t.type,"Cannot merge type link with another link");const e=this.clone();return e.$_terms.whens||(e.$_terms.whens=[]),e.$_terms.whens.push({concat:t}),e.$_mutateRebuild()}},manifest:{build:(t,e)=>(s(e.link,"Invalid link description missing link"),t.ref(e.link))}}),a.generate=function(t,e,i,s){let n=i.mainstay.links.get(t);if(n)return n.E_(e,i,s).schema;const r=t.$_terms.link[0].ref,{perspective:o,path:h}=a.perspective(r,i);a.assert(o,"which is outside of schema boundaries",r,t,i,s);try{n=h.length?o.$_reach(h):o}catch(e){a.assert(!1,"to non-existing schema",r,t,i,s)}return a.assert("link"!==n.type,"which is another link",r,t,i,s),t.l_.relative||i.mainstay.links.set(t,n),n.E_(e,i,s).schema},a.perspective=function(t,e){if("local"===t.type){for(const{schema:i,key:s}of e.schemas){if((i.l_.id||s)===t.path[0])return{perspective:i,path:t.path.slice(1)};if(i.$_terms.shared)for(const e of i.$_terms.shared)if(e.l_.id===t.path[0])return{perspective:e,path:t.path.slice(1)}}return{perspective:null,path:null}}return"root"===t.ancestor?{perspective:e.schemas[e.schemas.length-1].schema,path:t.path}:{perspective:e.schemas[t.ancestor]&&e.schemas[t.ancestor].schema,path:t.path}},a.assert=function(t,e,i,n,r,o){t||s(!1,'"'.concat(h.label(n.l_,r,o),'" contains link reference "').concat(i.display,'" ').concat(e))}},3832:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(t){const e=t.toString(),i=e.indexOf("."),s=e.indexOf("e");return(i<0?0:(s<0?e.length:s)-i-1)+(s<0?0:_.max(0,-x(e.slice(s+1))))}};t.exports=n.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(t,e){let{schema:i,error:s}=e;if(!t.match(o.numberRx))return;t=t.trim();const n={value:C(t)};if(0===n.value&&(n.value=0),!i.l_.unsafe)if(t.match(/e/i)){if(o.extractSignificantDigits(t)!==o.extractSignificantDigits(String(n.value)))return n.errors=s("number.unsafe"),n}else{const e=n.value.toString();if(e.match(/e/i))return n;if(e!==o.normalizeDecimal(t))return n.errors=s("number.unsafe"),n}return n}},validate(t,e){let{schema:i,error:s,prefs:n}=e;if(t===1/0||t===-1/0)return{value:t,errors:s("number.infinity")};if(!r.isNumber(t))return{value:t,errors:s("number.base")};const o={value:t};if(n.convert){const t=i.$_getRule("precision");if(t){const e=_.pow(10,t.args.limit);o.value=_.round(o.value*e)/e}}return 0===o.value&&(o.value=0),!i.l_.unsafe&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&(o.errors=s("number.unsafe")),o},rules:{compare:{method:!1,validate:(t,e,i,s)=>{let{limit:n}=i,{name:o,operator:h,args:a}=s;return r.compare(t,n,h)?t:e.error("number."+o,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:r.isNumber,message:"must be a number"}]},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{limit:t},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(t,e)=>_.trunc(t)-t==0?t:e.error("number.integer")},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{limit:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{limit:t},operator:">="})}},multiple:{method(t){const e="number"==typeof t?o.decimalPlaces(t):null,i=_.pow(10,e);return this.$_addRule({name:"multiple",args:{base:t,baseDecimalPlace:e,pfactor:i}})},validate:(t,e,i,s)=>{let{base:n,baseDecimalPlace:r,pfactor:h}=i;return o.decimalPlaces(t)>r?e.error("number.multiple",{multiple:s.args.base,value:t}):_.round(h*t)%_.round(h*n)==0?t:e.error("number.multiple",{multiple:s.args.base,value:t})},args:[{name:"base",ref:!0,assert:t=>"number"==typeof t&&isFinite(t)&&t>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(t,e)=>Number.isSafeInteger(t)&&t>=0&&t<=65535?t:e.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(t){return s(Number.isSafeInteger(t),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:t}})},validate(t,e,i){let{limit:s}=i;const n=t.toString().match(o.precisionRx);return _.max((n[1]?n[1].length:0)-(n[2]?x(n[2],10):0),0)<=s?t:e.error("number.precision",{limit:s,value:t})},convert:!0},sign:{method(t){return s(["negative","positive"].includes(t),"Invalid sign",t),this.$_addRule({name:"sign",args:{sign:t}})},validate:(t,e,i)=>{let{sign:s}=i;return"negative"===s&&t<0||"positive"===s&&t>0?t:e.error("number.".concat(s))}},unsafe:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("unsafe",t)}}},cast:{string:{from:t=>"number"==typeof t,to:(t,e)=>t.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),o.extractSignificantDigits=function(t){return t.replace(o.exponentialPartRegex,"").replace(o.dotRegex,"").replace(o.trailingZerosRegex,"").replace(o.leadingSignAndZerosRegex,"")},o.normalizeDecimal=function(t){return(t=t.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&t.endsWith("0")&&(t=t.replace(/0+$/,"")),"-0"===t?"0":t}},8966:(t,e,i)=>{const s=i(7824);t.exports=s.extend({type:"object",cast:{map:{from:t=>t&&"object"==typeof t,to:(t,e)=>new Map(w.entries(t))}}})},7417:(t,e,i)=>{const s=i(375),n=i(5380),r=i(1745),o=i(9959),h=i(6064),a=i(9926),u=i(5752),c=i(8068),l=i(8160),f={tlds:a instanceof Set&&{tlds:{allow:a,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:o.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};t.exports=c.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(t,e){let{schema:i,state:s,prefs:n}=e;const r=i.$_getRule("normalize");r&&(t=t.normalize(r.args.form));const o=i.$_getRule("case");o&&(t="upper"===o.args.direction?t.toLocaleUpperCase():t.toLocaleLowerCase());const h=i.$_getRule("trim");if(h&&h.args.enabled&&(t=t.trim()),i.$_terms.replacements)for(const e of i.$_terms.replacements)t=t.replace(e.pattern,e.replacement);const a=i.$_getRule("hex");if(a&&a.args.options.byteAligned&&t.length%2!=0&&(t="0".concat(t)),i.$_getRule("isoDate")){const e=f.isoDate(t);e&&(t=e)}if(i.l_.truncate){const e=i.$_getRule("max");if(e){let r=e.args.limit;if(l.isResolvable(r)&&(r=r.resolve(t,s,n),!l.limit(r)))return{value:t,errors:i.$_createError("any.ref",r,{ref:e.args.limit,arg:"limit",reason:"must be a positive integer"},s,n)};t=t.slice(0,r)}}return{value:t}}},validate(t,e){let{schema:i,error:s}=e;if("string"!=typeof t)return{value:t,errors:s("string.base")};if(""===t){const e=i.$_getRule("min");return e&&0===e.args.limit?void 0:{value:t,errors:s("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(t,e)=>/^[a-zA-Z0-9]+$/.test(t)?t:e.error("string.alphanum")},base64:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["paddingRequired","urlSafe"]),t=d({urlSafe:!1,paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),s("boolean"==typeof t.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:t}})},validate:(t,e,i)=>{let{options:s}=i;return f.base64Regex[s.paddingRequired][s.urlSafe].test(t)?t:e.error("string.base64")}},case:{method(t){return s(["lower","upper"].includes(t),"Invalid case:",t),this.$_addRule({name:"case",args:{direction:t}})},validate:(t,e,i)=>{let{direction:s}=i;return"lower"===s&&t===t.toLocaleLowerCase()||"upper"===s&&t===t.toLocaleUpperCase()?t:e.error("string.".concat(s,"case"))},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(t,e){let i=t.length,s=0,n=1;for(;i--;){const e=t.charAt(i)*n;s+=e-9*(e>9),n^=3}return s>0&&s%10==0?t:e.error("string.creditCard")}},dataUri:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["paddingRequired"]),t=d({paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:t}})},validate(t,e,i){let{options:s}=i;const n=t.match(f.dataUriRegex);return!n||n[2]&&"base64"===n[2]&&!f.base64Regex[s.paddingRequired].false.test(n[3])?e.error("string.dataUri"):t}},domain:{method(t){t&&l.assertOptions(t,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const e=f.addressOptions(t);return this.$_addRule({name:"domain",args:{options:t},address:e})},validate:(t,e,i,s)=>{let{address:r}=s;return n.isValid(t,r)?t:e.error("string.domain")}},email:{method(t){void 0===t&&(t={}),l.assertOptions(t,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),s(void 0===t.multiple||"boolean"==typeof t.multiple,"multiple option must be an boolean");const e=f.addressOptions(t),i=new RegExp("\\s*[".concat(t.separator?h(t.separator):",","]\\s*"));return this.$_addRule({name:"email",args:{options:t},regex:i,address:e})},validate(t,e,i,s){let{options:n}=i,{regex:o,address:h}=s;const a=n.multiple?t.split(o):[t],u=[];for(const t of a)r.isValid(t,h)||u.push(t);return u.length?e.error("string.email",{value:t,invalids:u}):t}},guid:{alias:"uuid",method(t){void 0===t&&(t={}),l.assertOptions(t,["version","separator"]);let e="";if(t.version){const i=[].concat(t.version);s(i.length>=1,"version must have at least 1 valid version specified");const n=new Set;for(let t=0;t<i.length;++t){const r=i[t];s("string"==typeof r,"version at position "+t+" must be a string");const o=f.guidVersions[r.toLowerCase()];s(o,"version at position "+t+" must be one of "+w.keys(f.guidVersions).join(", ")),s(!n.has(o),"version at position "+t+" must not be a duplicate"),e+=o,n.add(o)}}s(f.guidSeparators.has(t.separator),'separator must be one of true, false, "-", or ":"');const i=void 0===t.separator?"[:-]?":!0===t.separator?"[:-]":!1===t.separator?"[]?":"\\".concat(t.separator),n=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}(".concat(i,")[0-9A-F]{4}\\2?[").concat(e||"0-9A-F","][0-9A-F]{3}\\2?[").concat(e?"89AB":"0-9A-F","][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$"),"i");return this.$_addRule({name:"guid",args:{options:t},regex:n})},validate(t,e,i,s){let{regex:n}=s;const r=n.exec(t);return r?f.guidBrackets[r[1]]!==r[r.length-1]?e.error("string.guid"):t:e.error("string.guid")}},hex:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["byteAligned","prefix"]),t=d({byteAligned:!1,prefix:!1},t),s("boolean"==typeof t.byteAligned,"byteAligned must be boolean"),s("boolean"==typeof t.prefix||"optional"===t.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:t}})},validate:(t,e,i)=>{let{options:s}=i;return("optional"===s.prefix?f.hexRegex.withOptionalPrefix:!0===s.prefix?f.hexRegex.withPrefix:f.hexRegex.withoutPrefix).test(t)?s.byteAligned&&t.length%2!=0?e.error("string.hexAlign"):t:e.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(t,e)=>n.isValid(t,{minDomainSegments:1})||f.ipRegex.test(t)?t:e.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(t){void 0===t&&(t={}),l.assertOptions(t,["cidr","version"]);const{cidr:e,versions:i,regex:s}=o.regex(t),n=t.version?i:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:e,version:n}},regex:s})},validate:(t,e,i,s)=>{let{options:n}=i,{regex:r}=s;return r.test(t)?t:n.version?e.error("string.ipVersion",{value:t,cidr:n.cidr,version:n.version}):e.error("string.ip",{value:t,cidr:n.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate:(t,e)=>{let{error:i}=e;return f.isoDate(t)?t:i("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(t,e)=>f.isoDurationRegex.test(t)?t:e.error("string.isoDuration")},length:{method(t,e){return f.length(this,"length",t,"=",e)},validate(t,e,i,s){let{limit:n,encoding:r}=i,{name:o,operator:h,args:a}=s;const u=!r&&t.length;return l.compare(u,n,h)?t:e.error("string."+o,{limit:a.limit,value:t,encoding:r})},args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(t,e){return f.length(this,"max",t,"<=",e)},args:["limit","encoding"]},min:{method(t,e){return f.length(this,"min",t,">=",e)},args:["limit","encoding"]},normalize:{method(t){return void 0===t&&(t="NFC"),s(f.normalizationForms.includes(t),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:t}})},validate:(t,e,i)=>{let{error:s}=e,{form:n}=i;return t===t.normalize(n)?t:s("string.normalize",{value:t,form:n})},convert:!0},pattern:{alias:"regex",method(t,e){void 0===e&&(e={}),s(t instanceof RegExp,"regex must be a RegExp"),s(!t.flags.includes("g")&&!t.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof e&&(e={name:e}),l.assertOptions(e,["invert","name"]);const i=["string.pattern",e.invert?".invert":"",e.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:t,options:e},errorCode:i})},validate:(t,e,i,s)=>{let{regex:n,options:r}=i,{errorCode:o}=s;return n.test(t)^r.invert?t:e.error(o,{name:r.name,regex:n,value:t})},args:["regex","options"],multi:!0},replace:{method(t,e){"string"==typeof t&&(t=new RegExp(h(t),"g")),s(t instanceof RegExp,"pattern must be a RegExp"),s("string"==typeof e,"replacement must be a String");const i=this.clone();return i.$_terms.replacements||(i.$_terms.replacements=[]),i.$_terms.replacements.push({pattern:t,replacement:e}),i}},token:{method(){return this.$_addRule("token")},validate:(t,e)=>/^\w+$/.test(t)?t:e.error("string.token")},trim:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:t}})},validate:(t,e,i)=>{let{enabled:s}=i;return s&&t!==t.trim()?e.error("string.trim"):t},convert:!0},truncate:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("truncate",t)}},uppercase:{method(){return this.case("upper")}},uri:{method(t){void 0===t&&(t={}),l.assertOptions(t,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),t.domain&&l.assertOptions(t.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:e,scheme:i}=u.regex(t),s=t.domain?f.addressOptions(t.domain):null;return this.$_addRule({name:"uri",args:{options:t},regex:e,domain:s,scheme:i})},validate(t,e,i,s){let{options:r}=i,{regex:o,domain:h,scheme:a}=s;if(["http:/","https:/"].includes(t))return e.error("string.uri");let u=o.exec(t);if(!u&&e.prefs.convert&&r.encodeUri){const e=encodeURI(t);u=o.exec(e),u&&(t=e)}if(u){const i=u[1]||u[2];return!h||r.allowRelative&&!i||n.isValid(i,h)?t:e.error("string.domain",{value:i})}return r.relativeOnly?e.error("string.uriRelativeOnly"):r.scheme?e.error("string.uriCustomScheme",{scheme:a,value:t}):e.error("string.uri")}}},manifest:{build(t,e){if(e.replacements)for(const{pattern:i,replacement:s}of e.replacements)t=t.replace(i,s);return t}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(t){if(!t)return f.tlds||t;if(s(void 0===t.minDomainSegments||Number.isSafeInteger(t.minDomainSegments)&&t.minDomainSegments>0,"minDomainSegments must be a positive integer"),s(void 0===t.maxDomainSegments||Number.isSafeInteger(t.maxDomainSegments)&&t.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===t.tlds)return t;if(!0===t.tlds||void 0===t.tlds)return s(f.tlds,"Built-in TLD list disabled"),w.assign({},t,f.tlds);s("object"==typeof t.tlds,"tlds must be true, false, or an object");const e=t.tlds.deny;if(e)return Array.isArray(e)&&(t=w.assign({},t,{tlds:{deny:new Set(e)}})),s(t.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),s(!t.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(t.tlds.deny,"tlds.deny"),t;const i=t.tlds.allow;return i?!0===i?(s(f.tlds,"Built-in TLD list disabled"),w.assign({},t,f.tlds)):(Array.isArray(i)&&(t=w.assign({},t,{tlds:{allow:new Set(i)}})),s(t.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(t.tlds.allow,"tlds.allow"),t):t},f.validateTlds=function(t,e){for(const i of t)s(n.isValid(i,{minDomainSegments:1,maxDomainSegments:1}),"".concat(e," must contain valid top level domain names"))},f.isoDate=function(t){if(!l.isIsoDate(t))return null;/.*T.*[+-]\d\d$/.test(t)&&(t+="00");const e=new Date(t);return S(e.getTime())?null:e.toISOString()},f.length=function(t,e,i,n,r){return s(!r||!1,"Invalid encoding:",r),t.$_addRule({name:e,method:"length",args:{limit:i,encoding:r},operator:n})}},8826:(t,e,i)=>{const s=i(375),n=i(8068),r={};r.Map=class extends Map{slice(){return new r.Map(this)}},t.exports=n.extend({type:"symbol",terms:{map:{init:new r.Map}},coerce:{method(t,e){let{schema:i,error:s}=e;const n=i.$_terms.map.get(t);return n&&(t=n),i.l_.only&&"symbol"!=typeof t?{value:t,errors:s("symbol.map",{map:i.$_terms.map})}:{value:t}}},validate(t,e){let{error:i}=e;if("symbol"!=typeof t)return{value:t,errors:i("symbol.base")}},rules:{map:{method(t){t&&!t[Nt]&&"object"==typeof t&&(t=w.entries(t)),s(t&&t[Nt],"Iterable must be an iterable or object");const e=this.clone(),i=[];for(const n of t){s(n&&n[Nt],"Entry must be an iterable");const[t,r]=n;s("object"!=typeof t&&"function"!=typeof t&&"symbol"!=typeof t,"Key must not be of type object, function, or Symbol"),s("symbol"==typeof r,"Value must be a Symbol"),e.$_terms.map.set(t,r),i.push(r)}return e.valid(...i)}}},manifest:{build:(t,e)=>(e.map&&(t=t.map(e.map)),t)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(t,e,i)=>{const s=i(375),n=i(8571),r=i(738),o=i(9621),h=i(8160),a=i(6354),u=i(493),c={result:Ao("result")};e.entry=function(t,e,i){let n=h.defaults;i&&(s(void 0===i.warnings,"Cannot override warnings preference in synchronous validation"),s(void 0===i.artifacts,"Cannot override artifacts preference in synchronous validation"),n=h.preferences(h.defaults,i));const r=c.entry(t,e,n);s(!r.mainstay.externals.length,"Schema with external rules must use validateAsync()");const o={value:r.value};return r.error&&(o.error=r.error),r.mainstay.warnings.length&&(o.warning=a.details(r.mainstay.warnings)),r.mainstay.debug&&(o.debug=r.mainstay.debug),r.mainstay.artifacts&&(o.artifacts=r.mainstay.artifacts),o},e.entryAsync=async function(t,e,i){let s=h.defaults;i&&(s=h.preferences(h.defaults,i));const n=c.entry(t,e,s),r=n.mainstay;if(n.error)throw r.debug&&(n.error.debug=r.debug),n.error;if(r.externals.length){let e=n.value;const u=[];for(const n of r.externals){const l=n.state.path,d="link"===n.schema.type?r.links.get(n.schema):null;let f,_,v=e;const m=l.length?[e]:[],g=l.length?o(t,l):t;if(l.length){f=l[l.length-1];let t=e;for(const e of l.slice(0,-1))t=t[e],m.unshift(t);_=m[0],v=_[f]}try{const t=(t,e)=>(d||n.schema).$_createError(t,v,e,n.state,s),o=await n.method(v,{schema:n.schema,linked:d,state:n.state,prefs:i,original:g,error:t,errorsArray:c.errorsArray,warn:(t,e)=>r.warnings.push((d||n.schema).$_createError(t,v,e,n.state,s)),message:(t,e)=>(d||n.schema).$_createError("external",v,e,n.state,s,{messages:t})});if(void 0===o||o===v)continue;if(o instanceof a.Report){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(o),s.abortEarly)break;continue}if(Array.isArray(o)&&o[h.symbols.errors]){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(...o),s.abortEarly)break;continue}_?(r.tracer.value(n.state,"rule",v,o,"external"),_[f]=o):(r.tracer.value(n.state,"rule",e,o,"external"),e=o)}catch(t){throw s.errors.label&&(t.message+=" (".concat(n.label,")")),t}}if(n.value=e,u.length)throw n.error=a.process(u,t,s),r.debug&&(n.error.debug=r.debug),n.error}if(!s.warnings&&!s.debug&&!s.artifacts)return n.value;const u={value:n.value};return r.warnings.length&&(u.warning=a.details(r.warnings)),r.debug&&(u.debug=r.debug),r.artifacts&&(u.artifacts=r.artifacts),u},c.Mainstay=class{snapshot(){this.ov.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const t=this.ov.pop();this.externals=t.externals,this.warnings=t.warnings}commit(){this.ov.pop()}constructor(t,e,i){this.externals=[],this.warnings=[],this.tracer=t,this.debug=e,this.links=i,this.shadow=null,this.artifacts=null,this.ov=[]}},c.entry=function(t,i,s){const{tracer:n,cleanup:r}=c.tracer(i,s),o=s.debug?[]:null,h=i.r_.F_?new Map:null,l=new c.Mainstay(n,o,h),d=i.r_.F_?[{schema:i}]:null,f=new u([],[],{mainstay:l,schemas:d}),_=e.validate(t,i,f,s);r&&i.$_root.untrace();const v=a.process(_.errors,t,s);return{value:_.value,error:v,mainstay:l}},c.tracer=function(t,e){return t.$_root.y_?{tracer:t.$_root.y_.hv(t)}:e.debug?(s(t.$_root.trace,"Debug mode not supported"),{tracer:t.$_root.trace().hv(t),cleanup:!0}):{tracer:c.ignore}},e.validate=function(t,e,i,s,n){if(void 0===n&&(n={}),e.$_terms.whens&&(e=e.E_(t,i,s).schema),e.o_&&(s=c.prefs(e,s)),e.a_&&s.cache){const s=e.a_.get(t);if(i.mainstay.tracer.debug(i,"validate","cached",!!s),s)return s}const r=(n,r,o)=>e.$_createError(n,t,r,o||i,s),o={original:t,prefs:s,schema:e,state:i,error:r,errorsArray:c.errorsArray,warn:(t,e,s)=>i.mainstay.warnings.push(r(t,e,s)),message:(n,r)=>e.$_createError("custom",t,r,i,s,{messages:n})};i.mainstay.tracer.entry(e,i);const a=e.m_;if(a.prepare&&void 0!==t&&s.convert){const e=a.prepare(t,o);if(e){if(i.mainstay.tracer.value(i,"prepare",t,e.value),e.errors)return c.finalize(e.value,[].concat(e.errors),o);t=e.value}}if(a.coerce&&void 0!==t&&s.convert&&(!a.coerce.from||a.coerce.from.includes(typeof t))){const e=a.coerce.method(t,o);if(e){if(i.mainstay.tracer.value(i,"coerced",t,e.value),e.errors)return c.finalize(e.value,[].concat(e.errors),o);t=e.value}}const u=e.l_.empty;u&&u.$_match(c.trim(t,e),i.nest(u),h.defaults)&&(i.mainstay.tracer.value(i,"empty",t,void 0),t=void 0);const l=n.presence||e.l_.presence||(e.l_.q_?null:s.presence);if(void 0===t){if("forbidden"===l)return c.finalize(t,null,o);if("required"===l)return c.finalize(t,[e.$_createError("any.required",t,null,i,s)],o);if("optional"===l){if(e.l_.default!==h.symbols.deepDefault)return c.finalize(t,null,o);i.mainstay.tracer.value(i,"default",t,{}),t={}}}else if("forbidden"===l)return c.finalize(t,[e.$_createError("any.unknown",t,null,i,s)],o);const d=[];if(e.u_){const n=e.u_.get(t,i,s,e.l_.insensitive);if(n)return s.convert&&(i.mainstay.tracer.value(i,"valids",t,n.value),t=n.value),i.mainstay.tracer.filter(e,i,"valid",n),c.finalize(t,null,o);if(e.l_.only){const n=e.$_createError("any.only",t,{valids:e.u_.values({display:!0})},i,s);if(s.abortEarly)return c.finalize(t,[n],o);d.push(n)}}if(e.c_){const n=e.c_.get(t,i,s,e.l_.insensitive);if(n){i.mainstay.tracer.filter(e,i,"invalid",n);const r=e.$_createError("any.invalid",t,{invalids:e.c_.values({display:!0})},i,s);if(s.abortEarly)return c.finalize(t,[r],o);d.push(r)}}if(a.validate){const e=a.validate(t,o);if(e&&(i.mainstay.tracer.value(i,"base",t,e.value),t=e.value,e.errors)){if(!Array.isArray(e.errors))return d.push(e.errors),c.finalize(t,d,o);if(e.errors.length)return d.push(...e.errors),c.finalize(t,d,o)}}return e.d_.length?c.rules(t,d,o):c.finalize(t,d,o)},c.rules=function(t,e,i){const{schema:s,state:n,prefs:r}=i;for(const o of s.d_){const a=s.m_.rules[o.method];if(a.convert&&r.convert){n.mainstay.tracer.log(s,n,"rule",o.name,"full");continue}let u,l=o.args;if(o.Vd.length){l=w.assign({},l);for(const e of o.Vd){const i=a.argsByName.get(e),o=l[e].resolve(t,n,r),c=i.normalize?i.normalize(o):o,d=h.validateArg(c,null,i);if(d){u=s.$_createError("any.ref",o,{arg:e,ref:l[e],reason:d},n,r);break}l[e]=c}}u=u||a.validate(t,i,l,o);const d=c.rule(u,o);if(d.errors){if(n.mainstay.tracer.log(s,n,"rule",o.name,"error"),o.warn){n.mainstay.warnings.push(...d.errors);continue}if(r.abortEarly)return c.finalize(t,d.errors,i);e.push(...d.errors)}else n.mainstay.tracer.log(s,n,"rule",o.name,"pass"),n.mainstay.tracer.value(n,"rule",t,d.value,o.name),t=d.value}return c.finalize(t,e,i)},c.rule=function(t,e){return t instanceof a.Report?(c.error(t,e),{errors:[t],value:null}):Array.isArray(t)&&t[h.symbols.errors]?(t.forEach((t=>c.error(t,e))),{errors:t,value:null}):{errors:null,value:t}},c.error=function(t,e){return e.message&&t.D_(e.message),t},c.finalize=function(t,e,i){e=e||[];const{schema:n,state:r,prefs:o}=i;if(e.length){const s=c.default("failover",void 0,e,i);void 0!==s&&(r.mainstay.tracer.value(r,"failover",t,s),t=s,e=[])}if(e.length&&n.l_.error)if("function"==typeof n.l_.error){e=n.l_.error(e),Array.isArray(e)||(e=[e]);for(const t of e)s(t instanceof g||t instanceof a.Report,"error() must return an Error object")}else e=[n.l_.error];if(void 0===t){const s=c.default("default",t,e,i);r.mainstay.tracer.value(r,"default",t,s),t=s}if(n.l_.cast&&void 0!==t){const e=n.m_.cast[n.l_.cast];if(e.from(t)){const s=e.to(t,i);r.mainstay.tracer.value(r,"cast",t,s,n.l_.cast),t=s}}if(n.$_terms.externals&&o.externals&&!1!==o.S_)for(const{method:t}of n.$_terms.externals)r.mainstay.externals.push({method:t,schema:n,state:r,label:a.label(n.l_,r,o)});const h={value:t,errors:e.length?e:null};return n.l_.result&&(h.value="strip"===n.l_.result?void 0:i.original,r.mainstay.tracer.value(r,n.l_.result,t,h.value),r.shadow(t,n.l_.result)),n.a_&&!1!==o.cache&&!n.h_.length&&n.a_.set(i.original,h),void 0===t||h.errors||void 0===n.l_.artifact||(r.mainstay.artifacts=r.mainstay.artifacts||new Map,r.mainstay.artifacts.has(n.l_.artifact)||r.mainstay.artifacts.set(n.l_.artifact,[]),r.mainstay.artifacts.get(n.l_.artifact).push(r.path)),h},c.prefs=function(t,e){const i=e===h.defaults;return i&&t.o_[h.symbols.prefs]?t.o_[h.symbols.prefs]:(e=h.preferences(e,t.o_),i&&(t.o_[h.symbols.prefs]=e),e)},c.default=function(t,e,i,s){const{schema:r,state:o,prefs:a}=s,u=r.l_[t];if(a.noDefaults||void 0===u)return e;if(o.mainstay.tracer.log(r,o,"rule",t,"full"),!u)return u;if("function"==typeof u){const e=u.length?[n(o.ancestors[0]),s]:[];try{return u(...e)}catch(e){return void i.push(r.$_createError("any.".concat(t),null,{error:e},o,a))}}return"object"!=typeof u?u:u[h.symbols.literal]?u.literal:h.isResolvable(u)?u.resolve(e,o,a):n(u)},c.trim=function(t,e){if("string"!=typeof t)return t;const i=e.$_getRule("trim");return i&&i.args.enabled?t.trim():t},c.ignore={active:!1,debug:r,entry:r,filter:r,log:r,resolve:r,value:r},c.errorsArray=function(){const t=[];return t[h.symbols.errors]=!0,t}},2036:(t,e,i)=>{const s=i(375),n=i(9474),r=i(8160),o={};t.exports=o.Values=class{get length(){return this.__.size+this.h_.size}add(t,e){r.isResolvable(t)?this.h_.has(t)||(this.h_.add(t),e&&e.register(t)):this.has(t,null,null,!1)||(this.__.add(t),"string"==typeof t&&this.uv.set(t.toLowerCase(),t))}static merge(t,e,i){if(t=t||new o.Values,e){if(e.fv)return e.clone();for(const i of[...e.__,...e.h_])t.add(i)}if(i)for(const e of[...i.__,...i.h_])t.remove(e);return t.length?t:null}remove(t){r.isResolvable(t)?this.h_.delete(t):(this.__.delete(t),"string"==typeof t&&this.uv.delete(t.toLowerCase()))}has(t,e,i,s){return!!this.get(t,e,i,s)}get(t,e,i,s){if(!this.length)return!1;if(this.__.has(t))return{value:t};if("string"==typeof t&&t&&s){const e=this.uv.get(t.toLowerCase());if(e)return{value:e}}if(!this.h_.size&&"object"!=typeof t)return!1;if("object"==typeof t)for(const e of this.__)if(n(e,t))return{value:e};if(e)for(const r of this.h_){const o=r.resolve(t,e,i,null,{in:!0});if(void 0===o)continue;const h=r.in&&"object"==typeof o?Array.isArray(o)?o:w.keys(o):[o];for(const e of h)if(typeof e==typeof t)if(s&&t&&"string"==typeof t){if(e.toLowerCase()===t.toLowerCase())return{value:e,ref:r}}else if(n(e,t))return{value:e,ref:r}}return!1}override(){this.fv=!0}values(t){if(t&&t.display){const t=[];for(const e of[...this.__,...this.h_])void 0!==e&&t.push(e);return t}return Array.from([...this.__,...this.h_])}clone(){const t=new o.Values(this.__,this.h_);return t.fv=this.fv,t}concat(t){s(!t.fv,"Cannot concat override set of values");const e=new o.Values([...this.__,...t.__],[...this.h_,...t.h_]);return e.fv=this.fv,e}describe(){const t=[];this.fv&&t.push({override:!0});for(const e of this.__.values())t.push(e&&"object"==typeof e?{value:e}:e);for(const e of this.h_.values())t.push(e.describe());return t}constructor(t,e){this.__=new Set(t),this.h_=new Set(e),this.uv=o.lowercases(t),this.fv=!1}},o.Values.prototype[r.symbols.values]=!0,o.Values.prototype.slice=o.Values.prototype.clone,o.lowercases=function(t){const e=new Map;if(t)for(const i of t)"string"==typeof i&&e.set(i.toLowerCase(),i);return e}},978:(t,e,i)=>{const s=i(375),n=i(8571),r=i(1687),o=i(9621),h={};t.exports=function(t,e,i){if(void 0===i&&(i={}),s(t&&"object"==typeof t,"Invalid defaults value: must be an object"),s(!e||!0===e||"object"==typeof e,"Invalid source value: must be true, falsy or an object"),s("object"==typeof i,"Invalid options: must be an object"),!e)return null;if(i.shallow)return h.applyToDefaultsWithShallow(t,e,i);const o=n(t);if(!0===e)return o;const a=void 0!==i.nullOverride&&i.nullOverride;return r(o,e,{nullOverride:a,mergeArrays:!1})},h.applyToDefaultsWithShallow=function(t,e,i){const a=i.shallow;s(Array.isArray(a),"Invalid keys");const u=new Map,c=!0===e?null:new Set;for(let i of a){i=Array.isArray(i)?i:i.split(".");const s=o(t,i);s&&"object"==typeof s?u.set(s,c&&o(e,i)||s):c&&c.add(i)}const l=n(t,{},u);if(!c)return l;for(const t of c)h.reachCopy(l,e,t);const d=void 0!==i.nullOverride&&i.nullOverride;return r(l,e,{nullOverride:d,mergeArrays:!1})},h.reachCopy=function(t,e,i){for(const t of i){if(!(t in e))return;const i=e[t];if("object"!=typeof i||null===i)return;e=i}const s=e;let n=t;for(let t=0;t<i.length-1;++t){const e=i[t];"object"!=typeof n[e]&&(n[e]={}),n=n[e]}n[i[i.length-1]]=s}},375:(t,e,i)=>{const s=i(7916);t.exports=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];if(!t)throw 1===i.length&&i[0]instanceof g?i[0]:new s(i)}},8571:(t,e,i)=>{const s=i(9621),n=i(4277),r=i(7043),o={needsProtoHack:new Set([n.set,n.map,n.weakSet,n.weakMap])};t.exports=o.clone=function(t,e,i){if(void 0===e&&(e={}),void 0===i&&(i=null),"object"!=typeof t||null===t)return t;let s=o.clone,h=i;if(e.shallow){if(!0!==e.shallow)return o.cloneWithShallow(t,e);s=t=>t}else if(h){const e=h.get(t);if(e)return e}else h=new Map;const a=n.getInternalProto(t);if(a===n.buffer)return!1;if(a===n.date)return new Date(t.getTime());if(a===n.regex)return new RegExp(t);const u=o.base(t,a,e);if(u===t)return t;if(h&&h.set(t,u),a===n.set)for(const i of t)u.add(s(i,e,h));else if(a===n.map)for(const[i,n]of t)u.set(i,s(n,e,h));const c=r.keys(t,e);for(const i of c){if("__proto__"===i)continue;if(a===n.array&&"length"===i){u.length=t.length;continue}const r=w.getOwnPropertyDescriptor(t,i);r?r.get||r.set?w.defineProperty(u,i,r):r.enumerable?u[i]=s(t[i],e,h):w.defineProperty(u,i,{enumerable:!1,writable:!0,configurable:!0,value:s(t[i],e,h)}):w.defineProperty(u,i,{enumerable:!0,writable:!0,configurable:!0,value:s(t[i],e,h)})}return u},o.cloneWithShallow=function(t,e){const i=e.shallow;(e=w.assign({},e)).shallow=!1;const n=new Map;for(const e of i){const i=s(t,e);"object"!=typeof i&&"function"!=typeof i||n.set(i,i)}return o.clone(t,e,n)},o.base=function(t,e,i){if(!1===i.prototype)return o.needsProtoHack.has(e)?new e.constructor:e===n.array?[]:{};const s=w.getPrototypeOf(t);if(s&&s.isImmutable)return t;if(e===n.array){const t=[];return s!==e&&w.setPrototypeOf(t,s),t}if(o.needsProtoHack.has(e)){const t=new s.constructor;return s!==e&&w.setPrototypeOf(t,s),t}return w.create(s)}},9474:(t,e,i)=>{const s=i(4277),n={mismatched:null};t.exports=function(t,e,i){return i=w.assign({prototype:!0},i),!!n.isDeepEqual(t,e,i,[])},n.isDeepEqual=function(t,e,i,r){if(t===e)return 0!==t||1/t==1/e;const o=typeof t;if(o!==typeof e||null===t||null===e)return!1;if("function"===o){if(!i.deepFunction||t.toString()!==e.toString())return!1}else if("object"!==o)return t!=t&&e!=e;const h=n.getSharedType(t,e,!!i.prototype);switch(h){case s.buffer:return!1;case s.promise:return t===e;case s.regex:return t.toString()===e.toString();case n.mismatched:return!1}for(let i=r.length-1;i>=0;--i)if(r[i].isSame(t,e))return!0;r.push(new n.SeenEntry(t,e));try{return!!n.isDeepEqualObj(h,t,e,i,r)}finally{r.pop()}},n.getSharedType=function(t,e,i){if(i)return w.getPrototypeOf(t)!==w.getPrototypeOf(e)?n.mismatched:s.getInternalProto(t);const r=s.getInternalProto(t);return r!==s.getInternalProto(e)?n.mismatched:r},n.valueOf=function(t){const e=t.valueOf;if(void 0===e)return t;try{return e.call(t)}catch(t){return t}},n.hasOwnEnumerableProperty=function(t,e){return w.prototype.propertyIsEnumerable.call(t,e)},n.isSetSimpleEqual=function(t,e){for(const i of Set.prototype.values.call(t))if(!Set.prototype.has.call(e,i))return!1;return!0},n.isDeepEqualObj=function(t,e,i,r,o){const{isDeepEqual:h,valueOf:a,hasOwnEnumerableProperty:u}=n,{keys:c,getOwnPropertySymbols:l}=w;if(t===s.array){if(!r.part){if(e.length!==i.length)return!1;for(let t=0;t<e.length;++t)if(!h(e[t],i[t],r,o))return!1;return!0}for(const t of e)for(const e of i)if(h(t,e,r,o))return!0}else if(t===s.set){if(e.size!==i.size)return!1;if(!n.isSetSimpleEqual(e,i)){const t=new Set(Set.prototype.values.call(i));for(const i of Set.prototype.values.call(e)){if(t.delete(i))continue;let e=!1;for(const s of t)if(h(i,s,r,o)){t.delete(s),e=!0;break}if(!e)return!1}}}else if(t===s.map){if(e.size!==i.size)return!1;for(const[t,s]of Map.prototype.entries.call(e))if(void 0===s&&!Map.prototype.has.call(i,t)||!h(s,Map.prototype.get.call(i,t),r,o))return!1}else if(t===s.error&&(e.name!==i.name||e.message!==i.message))return!1;const d=a(e),f=a(i);if((e!==d||i!==f)&&!h(d,f,r,o))return!1;const _=c(e);if(!r.part&&_.length!==c(i).length&&!r.skip)return!1;let v=0;for(const t of _)if(r.skip&&r.skip.includes(t))void 0===i[t]&&++v;else if(!u(i,t)||!h(e[t],i[t],r,o))return!1;if(!r.part&&_.length-v!==c(i).length)return!1;if(!1!==r.symbols){const t=l(e),s=new Set(l(i));for(const n of t){if(!r.skip||!r.skip.includes(n))if(u(e,n)){if(!u(i,n)||!h(e[n],i[n],r,o))return!1}else if(u(i,n))return!1;s.delete(n)}for(const t of s)if(u(i,t))return!1}return!0},n.SeenEntry=class{isSame(t,e){return this.obj===t&&this.ref===e}constructor(t,e){this.obj=t,this.ref=e}}},7916:(t,e,i)=>{const s=i(8761);t.exports=class extends g{constructor(t){super(t.filter((t=>""!==t)).map((t=>"string"==typeof t?t:t instanceof g?t.message:s(t))).join(" ")||"Unknown error"),"function"==typeof g.captureStackTrace&&g.captureStackTrace(this,e.assert)}}},5277:t=>{const e={};t.exports=function(t){if(!t)return"";let i="";for(let s=0;s<t.length;++s){const n=t.charCodeAt(s);e.isSafe(n)?i+=t[s]:i+=e.escapeHtmlChar(n)}return i},e.escapeHtmlChar=function(t){return e.namedHtml.get(t)||(t>=256?"&#"+t+";":"&#x".concat(t.toString(16).padStart(2,"0"),";"))},e.isSafe=function(t){return e.safeCharCodes.has(t)},e.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),e.safeCharCodes=function(){const t=new Set;for(let e=32;e<123;++e)(e>=97||e>=65&&e<=90||e>=48&&e<=57||32===e||46===e||44===e||45===e||58===e||95===e)&&t.add(e);return t}()},6064:t=>{t.exports=function(t){return t.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:t=>{t.exports=function(){}},1687:(t,e,i)=>{const s=i(375),n=i(8571),r=i(7043),o={};t.exports=o.merge=function(t,e,i){if(s(t&&"object"==typeof t,"Invalid target value: must be an object"),s(null==e||"object"==typeof e,"Invalid source value: must be null, undefined, or an object"),!e)return t;if(i=w.assign({nullOverride:!0,mergeArrays:!0},i),Array.isArray(e)){s(Array.isArray(t),"Cannot merge array onto an object"),i.mergeArrays||(t.length=0);for(let s=0;s<e.length;++s)t.push(n(e[s],{symbols:i.symbols}));return t}const h=r.keys(e,i);for(let s=0;s<h.length;++s){const r=h[s];if("__proto__"===r||!w.prototype.propertyIsEnumerable.call(e,r))continue;const a=e[r];if(a&&"object"==typeof a){if(t[r]===a)continue;!t[r]||"object"!=typeof t[r]||Array.isArray(t[r])!==Array.isArray(a)||a instanceof Date||a instanceof RegExp?t[r]=n(a,{symbols:i.symbols}):o.merge(t[r],a,i)}else(null!=a||i.nullOverride)&&(t[r]=a)}return t}},9621:(t,e,i)=>{const s=i(375),n={};t.exports=function(t,e,i){if(!1===e||null==e)return t;"string"==typeof(i=i||{})&&(i={separator:i});const r=Array.isArray(e);s(!r||!i.separator,"Separator option is not valid for array-based chain");const o=r?e:e.split(i.separator||".");let h=t;for(let t=0;t<o.length;++t){let r=o[t];const a=i.iterables&&n.iterables(h);if(Array.isArray(h)||"set"===a){const t=Number(r);Number.isInteger(t)&&(r=t<0?h.length+t:t)}if(!h||"function"==typeof h&&!1===i.functions||!a&&void 0===h[r]){s(!i.strict||t+1===o.length,"Missing segment",r,"in reach path ",e),s("object"==typeof h||!0===i.functions||"function"!=typeof h,"Invalid segment",r,"in reach path ",e),h=i.default;break}h=a?"set"===a?[...h][r]:h.get(r):h[r]}return h},n.iterables=function(t){return t instanceof Set?"set":t instanceof Map?"map":void 0}},8761:t=>{t.exports=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];try{return JSON.stringify(...e)}catch(t){return"[Cannot display object: "+t.message+"]"}}},4277:(t,e)=>{const i={};e=t.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:g.prototype,generic:w.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},i.typeMap=new Map([["[object Error]",e.error],["[object Map]",e.map],["[object Promise]",e.promise],["[object Set]",e.set],["[object WeakMap]",e.weakMap],["[object WeakSet]",e.weakSet]]),e.getInternalProto=function(t){if(Array.isArray(t))return e.array;if(t instanceof Date)return e.date;if(t instanceof RegExp)return e.regex;if(t instanceof g)return e.error;const s=w.prototype.toString.call(t);return i.typeMap.get(s)||e.generic}},7043:(t,e)=>{e.keys=function(t,e){return void 0===e&&(e={}),!1!==e.symbols?Reflect.ownKeys(t):w.getOwnPropertyNames(t)}},3652:(t,e,i)=>{const s=i(375),n={};e.Sorter=class{add(t,e){const i=[].concat((e=e||{}).before||[]),n=[].concat(e.after||[]),r=e.group||"?",o=e.sort||0;s(!i.includes(r),"Item cannot come before itself: ".concat(r)),s(!i.includes("?"),"Item cannot come before unassociated items"),s(!n.includes(r),"Item cannot come after itself: ".concat(r)),s(!n.includes("?"),"Item cannot come after unassociated items"),Array.isArray(t)||(t=[t]);for(const e of t){const t={seq:this.Qu.length,sort:o,before:i,after:n,group:r,node:e};this.Qu.push(t)}if(!e.manual){const t=this._v();s(t,"item","?"!==r?"added into group ".concat(r):"","created a dependencies error")}return this.nodes}merge(t){Array.isArray(t)||(t=[t]);for(const e of t)if(e)for(const t of e.Qu)this.Qu.push(w.assign({},t));this.Qu.sort(n.mergeSort);for(let t=0;t<this.Qu.length;++t)this.Qu[t].seq=t;const e=this._v();return s(e,"merge created a dependencies error"),this.nodes}sort(){const t=this._v();return s(t,"sort created a dependencies error"),this.nodes}_v(){const t={},e=w.create(null),i=w.create(null);for(const s of this.Qu){const n=s.seq,r=s.group;i[r]=i[r]||[],i[r].push(n),t[n]=s.before;for(const t of s.after)e[t]=e[t]||[],e[t].push(n)}for(const e in t){const s=[];for(const n in t[e]){const r=t[e][n];i[r]=i[r]||[],s.push(...i[r])}t[e]=s}for(const s in e)if(i[s])for(const n of i[s])t[n].push(...e[s]);const s={};for(const e in t){const i=t[e];for(const t of i)s[t]=s[t]||[],s[t].push(e)}const n={},r=[];for(let t=0;t<this.Qu.length;++t){let e=t;if(s[t]){e=null;for(let t=0;t<this.Qu.length;++t){if(!0===n[t])continue;s[t]||(s[t]=[]);const i=s[t].length;let r=0;for(let e=0;e<i;++e)n[s[t][e]]&&++r;if(r===i){e=t;break}}}null!==e&&(n[e]=!0,r.push(e))}if(r.length!==this.Qu.length)return!1;const o={};for(const t of this.Qu)o[t.seq]=t;this.Qu=[],this.nodes=[];for(const t of r){const e=o[t];this.nodes.push(e.node),this.Qu.push(e)}return!0}constructor(){this.Qu=[],this.nodes=[]}},n.mergeSort=(t,e)=>t.sort===e.sort?0:t.sort<e.sort?-1:1},5380:(t,e,i)=>{const s=i(443),n=i(2178),r={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:s.URL||URL};e.analyze=function(t,e){if(void 0===e&&(e={}),!t)return n.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof t)throw new g("Invalid input: domain must be a string");if(t.length>256)return n.code("DOMAIN_TOO_LONG");if(r.nonAsciiRx.test(t)){if(!1===e.allowUnicode)return n.code("DOMAIN_INVALID_UNICODE_CHARS");t=t.normalize("NFC")}if(r.domainControlRx.test(t))return n.code("DOMAIN_INVALID_CHARS");t=r.punycode(t),e.allowFullyQualified&&"."===t[t.length-1]&&(t=t.slice(0,-1));const i=e.minDomainSegments||r.minDomainSegments,s=t.split(".");if(s.length<i)return n.code("DOMAIN_SEGMENTS_COUNT");if(e.maxDomainSegments&&s.length>e.maxDomainSegments)return n.code("DOMAIN_SEGMENTS_COUNT_MAX");const o=e.tlds;if(o){const t=s[s.length-1].toLowerCase();if(o.deny&&o.deny.has(t)||o.allow&&!o.allow.has(t))return n.code("DOMAIN_FORBIDDEN_TLDS")}for(let t=0;t<s.length;++t){const e=s[t];if(!e.length)return n.code("DOMAIN_EMPTY_SEGMENT");if(e.length>63)return n.code("DOMAIN_LONG_SEGMENT");if(t<s.length-1){if(!r.domainSegmentRx.test(e))return n.code("DOMAIN_INVALID_CHARS")}else if(!r.tldSegmentRx.test(e))return n.code("DOMAIN_INVALID_TLDS_CHARS")}return null},e.isValid=function(t,i){return!e.analyze(t,i)},r.punycode=function(t){t.includes("%")&&(t=t.replace(/%/g,"%25"));try{return new r.URL("http://".concat(t)).host}catch(e){return t}}},1745:(t,e,i)=>{const s=i(9848),n=i(5380),r=i(2178),o={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(s.TextEncoder||TextEncoder)};e.analyze=function(t,e){return o.email(t,e)},e.isValid=function(t,e){return!o.email(t,e)},o.email=function(t,e){if(void 0===e&&(e={}),"string"!=typeof t)throw new g("Invalid input: email must be a string");if(!t)return r.code("EMPTY_STRING");const i=!o.nonAsciiRx.test(t);if(!i){if(!1===e.allowUnicode)return r.code("FORBIDDEN_UNICODE");t=t.normalize("NFC")}const s=t.split("@");if(2!==s.length)return s.length>2?r.code("MULTIPLE_AT_CHAR"):r.code("MISSING_AT_CHAR");const[h,a]=s;if(!h)return r.code("EMPTY_LOCAL");if(!e.ignoreLength){if(t.length>254)return r.code("ADDRESS_TOO_LONG");if(o.encoder.encode(h).length>64)return r.code("LOCAL_TOO_LONG")}return o.local(h,i)||n.analyze(a,e)},o.local=function(t,e){const i=t.split(".");for(const t of i){if(!t.length)return r.code("EMPTY_LOCAL_SEGMENT");if(e){if(!o.atextRx.test(t))return r.code("INVALID_LOCAL_CHARS")}else for(const e of t){if(o.atextRx.test(e))continue;const t=o.binary(e);if(!o.atomRx.test(t))return r.code("INVALID_LOCAL_CHARS")}}},o.binary=function(t){return Array.from(o.encoder.encode(t)).map((t=>String.fromCharCode(t))).join("")},o.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,o.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(t,e)=>{e.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},e.code=function(t){return{code:t,error:e.codes[t]}}},9959:(t,e,i)=>{const s=i(375),n=i(5752);e.regex=function(t){void 0===t&&(t={}),s(void 0===t.cidr||"string"==typeof t.cidr,"options.cidr must be a string");const e=t.cidr?t.cidr.toLowerCase():"optional";s(["required","optional","forbidden"].includes(e),"options.cidr must be one of required, optional, forbidden"),s(void 0===t.version||"string"==typeof t.version||Array.isArray(t.version),"options.version must be a string or an array of string");let i=t.version||["ipv4","ipv6","ipvfuture"];Array.isArray(i)||(i=[i]),s(i.length>=1,"options.version must have at least 1 version specified");for(let t=0;t<i.length;++t)s("string"==typeof i[t],"options.version must only contain strings"),i[t]=i[t].toLowerCase(),s(["ipv4","ipv6","ipvfuture"].includes(i[t]),"options.version contains unknown version "+i[t]+" - must be one of ipv4, ipv6, ipvfuture");i=Array.from(new Set(i));const r="(?:".concat(i.map((t=>{if("forbidden"===e)return n.ip[t];const i="\\/".concat("ipv4"===t?n.ip.v4Cidr:n.ip.v6Cidr);return"required"===e?"".concat(n.ip[t]).concat(i):"".concat(n.ip[t],"(?:").concat(i,")?")})).join("|"),")"),o=new RegExp("^".concat(r,"$"));return{cidr:e,versions:i,regex:o,raw:r}}},5752:(t,e,i)=>{const s=i(375),n=i(6064),r={generate:function(){const t={},e="\\dA-Fa-f",i="["+e+"]",s="\\w-\\.~",n="!\\$&'\\(\\)\\*\\+,;=",r="%"+e,o=s+r+n+":@",h="["+o+"]",a="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";t.ipv4address="(?:"+a+"\\.){3}"+a;const u=i+"{1,4}",c="(?:"+u+":"+u+"|"+t.ipv4address+")",l="(?:"+u+":){6}"+c,d="::(?:"+u+":){5}"+c,f="(?:"+u+")?::(?:"+u+":){4}"+c,_="(?:(?:"+u+":){0,1}"+u+")?::(?:"+u+":){3}"+c,v="(?:(?:"+u+":){0,2}"+u+")?::(?:"+u+":){2}"+c,m="(?:(?:"+u+":){0,3}"+u+")?::"+u+":"+c,g="(?:(?:"+u+":){0,4}"+u+")?::"+c,p="(?:(?:"+u+":){0,5}"+u+")?::"+u,w="(?:(?:"+u+":){0,6}"+u+")?::";t.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",t.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",t.ipv6address="(?:"+l+"|"+d+"|"+f+"|"+_+"|"+v+"|"+m+"|"+g+"|"+p+"|"+w+")",t.ipvFuture="v"+i+"+\\.["+s+n+":]+",t.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",t.schemeRegex=new RegExp(t.scheme);const y="["+s+r+n+":]*",b="["+s+r+n+"]{1,255}",A="(?:\\[(?:"+t.ipv6address+"|"+t.ipvFuture+")\\]|"+t.ipv4address+"|"+b+")",S="(?:"+y+"@)?"+A+"(?::\\d*)?",T="(?:"+y+"@)?("+A+")(?::\\d*)?",k=h+"*",E=h+"+",x="(?:\\/"+k+")*",R="\\/(?:"+E+x+")?",I=E+x,C="["+s+r+n+"@]+"+x,P="(?:\\/\\/\\/"+k+x+")";return t.hierPart="(?:(?:\\/\\/"+S+x+")|"+R+"|"+I+"|"+P+")",t.hierPartCapture="(?:(?:\\/\\/"+T+x+")|"+R+"|"+I+")",t.relativeRef="(?:(?:\\/\\/"+S+x+")|"+R+"|"+C+"|)",t.relativeRefCapture="(?:(?:\\/\\/"+T+x+")|"+R+"|"+C+"|)",t.query="["+o+"\\/\\?]*(?=#|$)",t.queryWithSquareBrackets="["+o+"\\[\\]\\/\\?]*(?=#|$)",t.fragment="["+o+"\\/\\?]*",t}};r.rfc3986=r.generate(),e.ip={v4Cidr:r.rfc3986.ipv4Cidr,v6Cidr:r.rfc3986.ipv6Cidr,ipv4:r.rfc3986.ipv4address,ipv6:r.rfc3986.ipv6address,ipvfuture:r.rfc3986.ipvFuture},r.createRegex=function(t){const e=r.rfc3986,i="(?:\\?"+(t.allowQuerySquareBrackets?e.queryWithSquareBrackets:e.query)+")?(?:#"+e.fragment+")?",o=t.domain?e.relativeRefCapture:e.relativeRef;if(t.relativeOnly)return r.wrap(o+i);let h="";if(t.scheme){s(t.scheme instanceof RegExp||"string"==typeof t.scheme||Array.isArray(t.scheme),"scheme must be a RegExp, String, or Array");const i=[].concat(t.scheme);s(i.length>=1,"scheme must have at least 1 scheme specified");const r=[];for(let t=0;t<i.length;++t){const o=i[t];s(o instanceof RegExp||"string"==typeof o,"scheme at position "+t+" must be a RegExp or String"),o instanceof RegExp?r.push(o.source.toString()):(s(e.schemeRegex.test(o),"scheme at position "+t+" must be a valid scheme"),r.push(n(o)))}h=r.join("|")}const a="(?:"+(h?"(?:"+h+")":e.scheme)+":"+(t.domain?e.hierPartCapture:e.hierPart)+")",u=t.allowRelative?"(?:"+a+"|"+o+")":a;return r.wrap(u+i,h)},r.wrap=function(t,e){return{raw:t="(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])".concat(t),regex:new RegExp("^".concat(t,"$")),scheme:e}},r.uriRegex=r.createRegex({}),e.regex=function(t){return void 0===t&&(t={}),t.scheme||t.allowRelative||t.relativeOnly||t.allowQuerySquareBrackets||t.domain?r.createRegex(t):r.uriRegex}},1447:(t,e)=>{const i={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Ao("formula"),settings:Ao("settings")};e.Parser=class{G_(t){let s=[],n="",r=0,o=!1;const h=t=>{if(r)throw new g("Formula missing closing parenthesis");const h=s.length?s[s.length-1]:null;if(o||n||t){if(h&&"reference"===h.type&&")"===t)return h.type="function",h.value=this.vv(n,h.value),void(n="");if(")"===t){const t=new e.Parser(n,this.settings);s.push({type:"segment",value:t})}else if(o){if("]"===o)return s.push({type:"reference",value:n}),void(n="");s.push({type:"literal",value:n})}else if(i.operatorCharacters.includes(n))h&&"operator"===h.type&&i.operators.includes(h.value+n)?h.value+=n:s.push({type:"operator",value:n});else if(n.match(i.numberRx))s.push({type:"constant",value:C(n)});else if(void 0!==this.settings.constants[n])s.push({type:"constant",value:this.settings.constants[n]});else{if(!n.match(i.tokenRx))throw new g("Formula contains invalid token: ".concat(n));s.push({type:"reference",value:n})}n=""}};for(const e of t)o?e===o?(h(),o=!1):n+=e:r?"("===e?(n+=e,++r):")"===e?(--r,r?n+=e:h(e)):n+=e:e in i.literals?o=i.literals[e]:"("===e?(h(),++r):i.operatorCharacters.includes(e)?(h(),n=e,h()):" "!==e?n+=e:h();h(),s=s.map(((t,e)=>"operator"!==t.type||"-"!==t.value||e&&"operator"!==s[e-1].type?t:{type:"operator",value:"n"}));let a=!1;for(const t of s){if("operator"===t.type){if(i.operatorsPrefix.includes(t.value))continue;if(!a)throw new g("Formula contains an operator in invalid position");if(!i.operators.includes(t.value))throw new g("Formula contains an unknown operator ".concat(t.value))}else if(a)throw new g("Formula missing expected operator");a=!a}if(!a)throw new g("Formula contains invalid trailing operator");1===s.length&&["reference","literal","constant"].includes(s[0].type)&&(this.single={type:"reference"===s[0].type?"reference":"value",value:s[0].value}),this.mv=s.map((t=>{if("operator"===t.type)return i.operatorsPrefix.includes(t.value)?t:t.value;if("reference"!==t.type)return t.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(t.value))throw new g("Formula contains invalid reference ".concat(t.value));return this.settings.reference?this.settings.reference(t.value):i.reference(t.value)}))}vv(t,s){const n=this.settings.functions[s];if("function"!=typeof n)throw new g("Formula contains unknown function ".concat(s));let r=[];if(t){let e="",n=0,o=!1;const h=()=>{if(!e)throw new g("Formula contains function ".concat(s," with invalid arguments ").concat(t));r.push(e),e=""};for(let s=0;s<t.length;++s){const r=t[s];o?(e+=r,r===o&&(o=!1)):r in i.literals&&!n?(e+=r,o=i.literals[r]):","!==r||n?(e+=r,"("===r?++n:")"===r&&--n):h()}h()}return r=r.map((t=>new e.Parser(t,this.settings))),function(t){const e=[];for(const i of r)e.push(i.evaluate(t));return n.call(t,...e)}}evaluate(t){const e=this.mv.slice();for(let s=e.length-2;s>=0;--s){const n=e[s];if(n&&"operator"===n.type){const r=e[s+1];e.splice(s+1,1);const o=i.evaluate(r,t);e[s]=i.single(n.value,o)}}return i.operatorsOrder.forEach((s=>{for(let n=1;n<e.length-1;)if(s.includes(e[n])){const s=e[n],r=i.evaluate(e[n-1],t),o=i.evaluate(e[n+1],t);e.splice(n,2);const h=i.calculate(s,r,o);e[n-1]=0===h?0:h}else n+=2})),i.evaluate(e[0],t)}constructor(t,e={}){if(!e[i.settings]&&e.constants)for(const t in e.constants){const i=e.constants[t];if(null!==i&&!["boolean","number","string"].includes(typeof i))throw new g("Formula constant ".concat(t," contains invalid ").concat(typeof i," value type"))}this.settings=e[i.settings]?e:w.assign({[i.settings]:!0,constants:{},functions:{}},e),this.single=null,this.mv=null,this.G_(t)}},e.Parser.prototype[i.symbol]=!0,i.reference=function(t){return function(e){return e&&void 0!==e[t]?e[t]:null}},i.evaluate=function(t,e){return null===t?null:"function"==typeof t?t(e):t[i.symbol]?t.evaluate(e):t},i.single=function(t,e){if("!"===t)return!e;const i=-e;return 0===i?0:i},i.calculate=function(t,e,s){if("??"===t)return i.exists(e)?e:s;if("string"==typeof e||"string"==typeof s){if("+"===t)return(e=i.exists(e)?e:"")+(i.exists(s)?s:"")}else switch(t){case"^":return _.pow(e,s);case"*":return e*s;case"/":return e/s;case"%":return e%s;case"+":return e+s;case"-":return e-s}switch(t){case"<":return e<s;case"<=":return e<=s;case">":return e>s;case">=":return e>=s;case"==":return e===s;case"!=":return e!==s;case"&&":return e&&s;case"||":return e||s}return null},i.exists=function(t){return null!=t}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:t=>{t.exports=JSON.parse('{"version":"17.13.3"}')}},e={},function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,i),r.exports}(5107);var t,e},t.exports=i()}(Us);const Gs=T(Us.exports);let Hs;class Zs extends Et{getRTCPeerConnection(){return this.webRTCPeer?this.webRTCPeer.getRTCPeer():null}stop(){var t;Hs.info("Stopping"),this.webRTCPeer.closeRTCPeer(),null==(t=this.signaling)||t.close(),this.signaling=null,this.stopReconnection=!0,this.webRTCPeer=new rs}isActive(){const t=this.webRTCPeer.getRTCPeerStatus();return Hs.info("Broadcast status: ",t||"not_established"),"connected"===t}setReconnect(){this.signaling.on("migrate",(()=>this.replaceConnection())),this.autoReconnect&&(this.signaling.on(ys,(()=>{(this.firstReconnection||!this.alreadyDisconnected)&&(this.firstReconnection=!1,this.reconnect({error:new g("Signaling error: wsConnectionError")}))})),this.webRTCPeer.on(ss.connectionStateChange,(t=>{q(t),"connected"===t&&z(new Date),("failed"===t||"disconnected"===t&&this.alreadyDisconnected)&&this.firstReconnection?(this.firstReconnection=!1,this.reconnect({error:new g("Connection state change: RTCPeerConnectionState disconnected")})):"disconnected"===t?(this.alreadyDisconnected=!0,u((()=>this.reconnect({error:new g("Connection state change: RTCPeerConnectionState disconnected")})),1500)):this.alreadyDisconnected=!1})))}async reconnect(t){try{Hs.info("Attempting to reconnect..."),!this.isActive()&&!this.stopReconnection&&!this.isReconnecting&&(this.stop(),this.emit("reconnect",{timeout:Xs(this.reconnectionInterval),error:null!=t&&t.error?null==t?void 0:t.error:new g("Attempting to reconnect")}),this.isReconnecting=!0,await this.connect(this.options),this.alreadyDisconnected=!1,this.reconnectionInterval=1e3,this.firstReconnection=!0,this.isReconnecting=!1)}catch(t){this.isReconnecting=!1,this.reconnectionInterval=Xs(this.reconnectionInterval),Hs.error("Reconnection failed, retrying in ".concat(this.reconnectionInterval,"ms. "),t),u((()=>this.reconnect({error:t})),this.reconnectionInterval)}}constructor(t,e,i,s){if(super(),Hs=i,!e)throw Hs.error("Token generator is required to construct this module."),new g("Token generator is required to construct this module.");this.webRTCPeer=new rs,this.signaling=null,this.autoReconnect=s,this.reconnectionInterval=1e3,this.alreadyDisconnected=!1,this.firstReconnection=!0,this.stopReconnection=!1,this.isReconnecting=!1,this.tokenGenerator=e,this.options=null}}const Xs=t=>t<32e3?2*t:t,zs=s.RTCRtpSender&&!!RTCRtpSender.prototype.createEncodedStreams&&s.RTCRtpReceiver&&!!RTCRtpReceiver.prototype.createEncodedStreams,qs="RTCRtpScriptTransform"in s,Ys="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBGPXR5cGVvZiBnbG9iYWxUaGlzPCJ1Ij9nbG9iYWxUaGlzOnR5cGVvZiB3aW5kb3c8InUiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsPCJ1Ij9nbG9iYWw6dHlwZW9mIHNlbGY8InUiP3NlbGY6e307ZnVuY3Rpb24gVyhuKXtyZXR1cm4gbiYmbi5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwiZGVmYXVsdCIpP24uZGVmYXVsdDpufXZhciBCPXtleHBvcnRzOnt9fTsvKiEKICoganMtbG9nZ2VyIC0gaHR0cDovL2dpdGh1Yi5jb20vam9ubnlyZWV2ZXMvanMtbG9nZ2VyCiAqIEpvbm55IFJlZXZlcywgaHR0cDovL2pvbm55cmVldmVzLmNvLnVrLwogKiBqcy1sb2dnZXIgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqLyhmdW5jdGlvbihuKXsoZnVuY3Rpb24odCl7dmFyIGU9e307ZS5WRVJTSU9OPSIxLjYuMSI7dmFyIHMscj17fSxvPWZ1bmN0aW9uKGksdSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHUuYXBwbHkoaSxhcmd1bWVudHMpfX0sYT1mdW5jdGlvbigpe3ZhciBpPWFyZ3VtZW50cyx1PWlbMF0saCxjO2ZvcihjPTE7YzxpLmxlbmd0aDtjKyspZm9yKGggaW4gaVtjXSkhKGggaW4gdSkmJmlbY10uaGFzT3duUHJvcGVydHkoaCkmJih1W2hdPWlbY11baF0pO3JldHVybiB1fSxkPWZ1bmN0aW9uKGksdSl7cmV0dXJue3ZhbHVlOmksbmFtZTp1fX07ZS5UUkFDRT1kKDEsIlRSQUNFIiksZS5ERUJVRz1kKDIsIkRFQlVHIiksZS5JTkZPPWQoMywiSU5GTyIpLGUuVElNRT1kKDQsIlRJTUUiKSxlLldBUk49ZCg1LCJXQVJOIiksZS5FUlJPUj1kKDgsIkVSUk9SIiksZS5PRkY9ZCg5OSwiT0ZGIik7dmFyIGw9ZnVuY3Rpb24oaSl7dGhpcy5jb250ZXh0PWksdGhpcy5zZXRMZXZlbChpLmZpbHRlckxldmVsKSx0aGlzLmxvZz10aGlzLmluZm99O2wucHJvdG90eXBlPXtzZXRMZXZlbDpmdW5jdGlvbihpKXtpJiYidmFsdWUiaW4gaSYmKHRoaXMuY29udGV4dC5maWx0ZXJMZXZlbD1pKX0sZ2V0TGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0LmZpbHRlckxldmVsfSxlbmFibGVkRm9yOmZ1bmN0aW9uKGkpe3ZhciB1PXRoaXMuY29udGV4dC5maWx0ZXJMZXZlbDtyZXR1cm4gaS52YWx1ZT49dS52YWx1ZX0sdHJhY2U6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLlRSQUNFLGFyZ3VtZW50cyl9LGRlYnVnOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5ERUJVRyxhcmd1bWVudHMpfSxpbmZvOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5JTkZPLGFyZ3VtZW50cyl9LHdhcm46ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLldBUk4sYXJndW1lbnRzKX0sZXJyb3I6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLkVSUk9SLGFyZ3VtZW50cyl9LHRpbWU6ZnVuY3Rpb24oaSl7dHlwZW9mIGk9PSJzdHJpbmciJiZpLmxlbmd0aD4wJiZ0aGlzLmludm9rZShlLlRJTUUsW2ksInN0YXJ0Il0pfSx0aW1lRW5kOmZ1bmN0aW9uKGkpe3R5cGVvZiBpPT0ic3RyaW5nIiYmaS5sZW5ndGg+MCYmdGhpcy5pbnZva2UoZS5USU1FLFtpLCJlbmQiXSl9LGludm9rZTpmdW5jdGlvbihpLHUpe3MmJnRoaXMuZW5hYmxlZEZvcihpKSYmcyh1LGEoe2xldmVsOml9LHRoaXMuY29udGV4dCkpfX07dmFyIGY9bmV3IGwoe2ZpbHRlckxldmVsOmUuT0ZGfSk7KGZ1bmN0aW9uKCl7dmFyIGk9ZTtpLmVuYWJsZWRGb3I9byhmLGYuZW5hYmxlZEZvciksaS50cmFjZT1vKGYsZi50cmFjZSksaS5kZWJ1Zz1vKGYsZi5kZWJ1ZyksaS50aW1lPW8oZixmLnRpbWUpLGkudGltZUVuZD1vKGYsZi50aW1lRW5kKSxpLmluZm89byhmLGYuaW5mbyksaS53YXJuPW8oZixmLndhcm4pLGkuZXJyb3I9byhmLGYuZXJyb3IpLGkubG9nPWkuaW5mb30pKCksZS5zZXRIYW5kbGVyPWZ1bmN0aW9uKGkpe3M9aX0sZS5zZXRMZXZlbD1mdW5jdGlvbihpKXtmLnNldExldmVsKGkpO2Zvcih2YXIgdSBpbiByKXIuaGFzT3duUHJvcGVydHkodSkmJnJbdV0uc2V0TGV2ZWwoaSl9LGUuZ2V0TGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gZi5nZXRMZXZlbCgpfSxlLmdldD1mdW5jdGlvbihpKXtyZXR1cm4gcltpXXx8KHJbaV09bmV3IGwoYSh7bmFtZTppfSxmLmNvbnRleHQpKSl9LGUuY3JlYXRlRGVmYXVsdEhhbmRsZXI9ZnVuY3Rpb24oaSl7aT1pfHx7fSxpLmZvcm1hdHRlcj1pLmZvcm1hdHRlcnx8ZnVuY3Rpb24ocCxfKXtfLm5hbWUmJnAudW5zaGlmdCgiWyIrXy5uYW1lKyJdIil9O3ZhciB1PXt9LGg9ZnVuY3Rpb24oYyxwKXtGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjLGNvbnNvbGUscCl9O3JldHVybiB0eXBlb2YgY29uc29sZT4idSI/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKGMscCl7Yz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjKTt2YXIgXz1jb25zb2xlLmxvZyxnO3AubGV2ZWw9PT1lLlRJTUU/KGc9KHAubmFtZT8iWyIrcC5uYW1lKyJdICI6IiIpK2NbMF0sY1sxXT09PSJzdGFydCI/Y29uc29sZS50aW1lP2NvbnNvbGUudGltZShnKTp1W2ddPW5ldyBEYXRlKCkuZ2V0VGltZSgpOmNvbnNvbGUudGltZUVuZD9jb25zb2xlLnRpbWVFbmQoZyk6aChfLFtnKyI6ICIrKG5ldyBEYXRlKCkuZ2V0VGltZSgpLXVbZ10pKyJtcyJdKSk6KHAubGV2ZWw9PT1lLldBUk4mJmNvbnNvbGUud2Fybj9fPWNvbnNvbGUud2FybjpwLmxldmVsPT09ZS5FUlJPUiYmY29uc29sZS5lcnJvcj9fPWNvbnNvbGUuZXJyb3I6cC5sZXZlbD09PWUuSU5GTyYmY29uc29sZS5pbmZvP189Y29uc29sZS5pbmZvOnAubGV2ZWw9PT1lLkRFQlVHJiZjb25zb2xlLmRlYnVnP189Y29uc29sZS5kZWJ1ZzpwLmxldmVsPT09ZS5UUkFDRSYmY29uc29sZS50cmFjZSYmKF89Y29uc29sZS50cmFjZSksaS5mb3JtYXR0ZXIoYyxwKSxoKF8sYykpfX0sZS51c2VEZWZhdWx0cz1mdW5jdGlvbihpKXtlLnNldExldmVsKGkmJmkuZGVmYXVsdExldmVsfHxlLkRFQlVHKSxlLnNldEhhbmRsZXIoZS5jcmVhdGVEZWZhdWx0SGFuZGxlcihpKSl9LGUuc2V0RGVmYXVsdHM9ZS51c2VEZWZhdWx0cyxuLmV4cG9ydHM/bi5leHBvcnRzPWU6KGUuX3ByZXZMb2dnZXI9dC5Mb2dnZXIsZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuTG9nZ2VyPWUuX3ByZXZMb2dnZXIsZX0sdC5Mb2dnZXI9ZSl9KShGKX0pKEIpO3ZhciB6PUIuZXhwb3J0cyxEPVcoeik7Y2xhc3Mgd3tjb25zdHJ1Y3Rvcih0KXt0aGlzLmRhdGE9dCx0aGlzLmJpdE9mZnNldD0wfXJlYWRCaXRzKHQpe2lmKHRoaXMuYml0T2Zmc2V0K3Q+dGhpcy5kYXRhLmxlbmd0aCo4KXRocm93IG5ldyBFcnJvcigiQXR0ZW1wdGVkIHRvIHJlYWQgcGFzdCB0aGUgZW5kIG9mIHRoZSBiaXRzdHJlYW0iKTtsZXQgZT0wO2ZvcihsZXQgcz0wO3M8dDtzKyspe2NvbnN0IHI9TWF0aC5mbG9vcih0aGlzLmJpdE9mZnNldC84KSxvPTctdGhpcy5iaXRPZmZzZXQlOCxhPXRoaXMuZGF0YVtyXT4+byYxO2V8PWE8PHQtMS1zLHRoaXMuYml0T2Zmc2V0Kyt9cmV0dXJuIGV9c2tpcCh0KXt0aGlzLmJpdE9mZnNldCs9dH1yZWFkRXhwR29sb21iVW5zaWduZWQoKXtsZXQgdD0tMTtmb3IobGV0IGU9MDtlPT09MDt0KyspZT10aGlzLnJlYWRCaXRzKDEpO3JldHVybigxPDx0KS0xK3RoaXMucmVhZEJpdHModCl9cmVhZEV4cEdvbG9tYlNpZ25lZCgpe2NvbnN0IHQ9dGhpcy5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtyZXR1cm4gdCUyPT09MD8tKHQvMik6KHQrMSkvMn19Y29uc3QgbT17U0xJQ0VfTk9OX0lEUjoxLFNMSUNFX1BBUlRJVElPTl9BOjIsU0xJQ0VfSURSOjUsU0VJX0gyNjQ6NixTRUlfSDI2NV9QUkVGSVg6MzksU0VJX0gyNjVfU1VGRklYOjQwLFNQU19IMjY0OjcsU1BTX0gyNjU6MzMsUFBTX0gyNjQ6OCxQUFNfSDI2NTozNH0sUj17UElDX1RJTUlORzoxLFVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6NX0sRT17TEVHQUNZOjEsTkVXOjIsVElNRUNPREU6MyxPVEhFUjo0fSxqPSI2ZTljZmQyYS01OTA3LTQ5ZmYtYjM2My04OTc4YTZlODM0MGUiLHE9IjlhMjFmM2JlLTMxZjAtNGI3OC1iMGJlLWM3ZjdkYmI5NzI1MCIsTD0iZDQwZTM4ZWEtZDQxOS00YzYyLTk0ZWQtMjBhYzM3YjRlNGZhIjtjbGFzcyBWe2NvbnN0cnVjdG9yKHQ9IkgyNjQiKXt0aGlzLnNwcz1uZXcgTWFwLHRoaXMucHBzPW5ldyBNYXAsdGhpcy5hY3RpdmVTUFM9bnVsbCx0aGlzLmNvZGVjPXR9Y29sbGVjdFBQUyh0KXt0aGlzLmNvZGVjPT09IkgyNjQiP3RoaXMuY29sbGVjdEgyNjRQUFModCk6dGhpcy5jb2xsZWN0SDI2NVBQUyh0KX1jb2xsZWN0U1BTKHQpe3RoaXMuY29kZWM9PT0iSDI2NCI/dGhpcy5jb2xsZWN0SDI2NFNQUyh0KTp0aGlzLmNvbGxlY3RIMjY1U1BTKHQpfWNvbGxlY3RIMjY0U1BTKHQpe2NvbnN0IGU9bmV3IHcodCkscz1lLnJlYWRCaXRzKDgpLHI9WzEwMCwxMTAsMTIyLDI0NCw0NCw4Myw4NiwxMTgsMTI4LDEzOCwxMzksMTM0LDEzNV07ZS5za2lwKDgpLGUuc2tpcCg4KTtjb25zdCBvPWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7aWYobz4zMXx8bzwwKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzZXFfcGFyYW1ldGVyX3NldF9pZCIpO2lmKHIuaW5jbHVkZXMocykpe2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtpZihsPT09MyYmZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnNraXAoMSksZS5yZWFkQml0cygxKSl7Y29uc3QgaT1sIT09Mz84OjEyO2ZvcihsZXQgdT0wO3U8aTt1KyspaWYoZS5yZWFkQml0cygxKSl7Y29uc3QgaD11PDY/MTY6NjQ7bGV0IGM9OCxwPTg7Zm9yKGxldCBfPTA7XzxoO18rKyl7aWYocCE9PTApe2NvbnN0IGc9ZS5yZWFkRXhwR29sb21iU2lnbmVkKCk7cD0oYytnKzI1NiklMjU2fWM9cD09PTA/YzpwfX19fWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3QgYT1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKGE9PT0wKWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7ZWxzZSBpZihhPT09MSl7ZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpO2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtmb3IobGV0IGY9MDtmPGw7ZisrKWUucmVhZEV4cEdvbG9tYlNpZ25lZCgpfWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRCaXRzKDEpPT09MCYmZS5za2lwKDEpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSk7bGV0IGQ7aWYoZS5yZWFkQml0cygxKSl7bGV0IGY9ZnVuY3Rpb24oYyl7Y29uc3QgcD1jLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2Muc2tpcCg0KSxjLnNraXAoNCk7Zm9yKGxldCB4PTA7eDw9cDt4KyspYy5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxjLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGMuc2tpcCgxKTtjLnNraXAoNSk7Y29uc3QgXz1jLnJlYWRCaXRzKDUpLGc9Yy5yZWFkQml0cyg1KSxBPWMucmVhZEJpdHMoNSk7cmV0dXJue2NwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6XyxkcGJfb3V0cHV0X2RlbGF5X2xlbmd0aF9taW51czE6Zyx0aW1lX29mZnNldF9sZW5ndGg6QX19O2UucmVhZEJpdHMoMSkmJmUucmVhZEJpdHMoOCk9PT0yNTUmJihlLnNraXAoMTYpLGUuc2tpcCgxNikpLGUucmVhZEJpdHMoMSkmJmUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5za2lwKDMpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiZlLnNraXAoMjQpKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpKTtjb25zdCBsPWUucmVhZEJpdHMoMSk/e251bV91bml0c19pbl90aWNrOmUucmVhZEJpdHMoMzIpLHRpbWVfc2NhbGU6ZS5yZWFkQml0cygzMiksZml4ZWRfZnJhbWVfcmF0ZV9mbGFnOmUucmVhZEJpdHMoMSl9OnZvaWQgMCxpPWUucmVhZEJpdHMoMSk/ZihlKTp2b2lkIDAsdT1lLnJlYWRCaXRzKDEpP2YoZSk6dm9pZCAwOyhpfHx1KSYmZS5za2lwKDEpO2NvbnN0IGg9ZS5yZWFkQml0cygxKTtkPXt0aW1pbmdfaW5mbzpsLG5hbF9ocmRfcGFyYW1ldGVyczppLHZjbF9ocmRfcGFyYW1ldGVyczp1LHBpY19zdHJ1Y3RfcHJlc2VudF9mbGFnOmh9fXRoaXMuc3BzLnNldChvLHt2dWlfcGFyYW1ldGVyczpkfSl9Y29sbGVjdEgyNjVTUFModCl7fWNvbGxlY3RIMjY0UFBTKHQpe2NvbnN0IGU9bmV3IHcodCkscz1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKHM+MjU1fHxzPDApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBpY19wYXJhbWV0ZXJfc2V0X2lkIik7Y29uc3Qgcj1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO3RoaXMucHBzLnNldChzLHtzZXFfcGFyYW1ldGVyX3NldF9pZDpyfSl9Y29sbGVjdEgyNjVQUFModCl7fWZpbmRBY3RpdmVTUFModCl7Y29uc3QgZT1uZXcgdyh0KTtlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3Qgcz1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLHI9dGhpcy5wcHMuZ2V0KHMpO2lmKHIpe2NvbnN0IG89dGhpcy5zcHMuZ2V0KHIuc2VxX3BhcmFtZXRlcl9zZXRfaWQpO2lmKG8pe3RoaXMuYWN0aXZlU1BTPW87cmV0dXJufX10aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIHRoZSBhY3RpdmUgU1BTIil9fWNvbnN0IFM9bmV3IFY7ZnVuY3Rpb24gRyhuLHQpe2Zvcig7dDxuLmJ5dGVMZW5ndGgtNDspe2lmKG5bdF09PT0wJiZuW3QrMV09PT0wJiYoblt0KzJdPT09MXx8blt0KzJdPT09MCYmblt0KzNdPT09MSkpcmV0dXJuIHQ7dCs9MX1yZXR1cm4tMX1mdW5jdGlvbiBVKG4pe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkobi5ieXRlTGVuZ3RoKTtsZXQgZT0wLHM9MDtmb3IobGV0IHI9MjtyPG4uYnl0ZUxlbmd0aDtyKyspbltyXT09PTMmJm5bci0xXT09PTAmJm5bci0yXT09PTAmJih0LnNldChuLnN1YmFycmF5KHMsciksZSksZSs9ci1zLHM9cisxKTtyZXR1cm4gczxuLmJ5dGVMZW5ndGgmJnQuc2V0KG4uc3ViYXJyYXkocyksZSksdH1mdW5jdGlvbiBZKG4sdCl7bGV0IGU9MDtjb25zdCBzPXQ9PT0iSDI2NCI/MToyLHI9W107Zm9yKDtlPG4uYnl0ZUxlbmd0aC00Oyl7Y29uc3Qgbz1HKG4sZSk7aWYobz49ZSl7Y29uc3QgYT1uW28rMl09PT0xPzM6NCxkPUcobixvK2Ercyk7aWYoZD5vKXIucHVzaChuLnN1YmFycmF5KG8sZCkpLGU9ZDtlbHNle3IucHVzaChuLnN1YmFycmF5KG8pKTticmVha319ZWxzZSBicmVha31yZXR1cm4gcn1mdW5jdGlvbiBYKG4sdCl7bGV0IGU9ITA7cmV0dXJuIFkobix0KS5maWx0ZXIocz0+e2NvbnN0IHI9c1syXT09PTE/Mzo0LG89dD09PSJIMjY0Ij8xOjIsYT1zW3JdLGQ9dD09PSJIMjY0Ij9hJjMxOmE+PjEmNjM7aWYoZSlzd2l0Y2goZCl7Y2FzZSBtLlBQU19IMjY0OmNhc2UgbS5QUFNfSDI2NTpTLmNvbGxlY3RQUFMoVShzLnN1YmFycmF5KHIrbykpKTticmVhaztjYXNlIG0uU1BTX0gyNjQ6Y2FzZSBtLlNQU19IMjY1OlMuY29sbGVjdFNQUyhVKHMuc3ViYXJyYXkocitvKSkpO2JyZWFrO2Nhc2UgbS5TTElDRV9JRFI6Y2FzZSBtLlNMSUNFX05PTl9JRFI6Y2FzZSBtLlNMSUNFX1BBUlRJVElPTl9BOnRyeXtTLmZpbmRBY3RpdmVTUFMoVShzLnN1YmFycmF5KHIrbykpKSxlPSExfWNhdGNoKGwpe2NvbnNvbGUuaW5mbygiRmFpbGVkIHRvIGZpbmQgYWN0aXZlIFNQUy4gV2lsbCBub3QgYmUgYWJsZSB0byBleHRyYWN0IFBJQyB0aW1pbmcgbWV0YWRhdGEiKX1icmVha31yZXR1cm5bbS5TRUlfSDI2NCxtLlNFSV9IMjY1X1BSRUZJWCxtLlNFSV9IMjY1X1NVRkZJWF0uaW5jbHVkZXMoZCl9KX1mdW5jdGlvbiAkKG4pe2xldCB0PTAsZT0wO2Zvcig7bltlXT09PTI1NTspdCs9MjU1LGUrKzt0Kz1uW2VdLGUrKztsZXQgcz0wO2Zvcig7bltlXT09PTI1NTspcys9MjU1LGUrKztyZXR1cm4gcys9bltlXSxlKysse3R5cGU6dCxjb250ZW50Om4uc3ViYXJyYXkoZSxlK3MpfX1mdW5jdGlvbiBKKG4pe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkoVChxKSksZT1uZXcgVWludDhBcnJheShUKGopKSxzPW5ldyBVaW50OEFycmF5KFQoTCkpO3JldHVybiB0LmV2ZXJ5KChyLG8pPT5yPT09bltvXSk/RS5USU1FQ09ERTplLmV2ZXJ5KChyLG8pPT5yPT09bltvXSk/RS5MRUdBQ1k6cy5ldmVyeSgocixvKT0+cj09PW5bb10pP0UuTkVXOkUuT1RIRVJ9ZnVuY3Rpb24gSyhuLHQpe2xldCBlPTA7bi51dWlkPXQuc3ViYXJyYXkoZSxlKzE2KSxlKz0xNjtjb25zdCBzPUoobi51dWlkKSxyPXQuc3ViYXJyYXkoZSk7c3dpdGNoKHMpe2Nhc2UgRS5MRUdBQ1k6Y2FzZSBFLk9USEVSOm4udW5yZWdpc3RlcmVkPXI7YnJlYWs7Y2FzZSBFLlRJTUVDT0RFOm4udGltZWNvZGU9TyhyKTticmVhaztjYXNlIEUuTkVXOntsZXQgbz0wO2NvbnN0IGE9QyhEYXRlLm5vdygpKS5sZW5ndGgsZD1yLnN1YmFycmF5KG8sYSk7bys9YTtjb25zdCBsPXIuc3ViYXJyYXkobyk7bi50aW1lY29kZT1PKGQpLG4udW5yZWdpc3RlcmVkPWw7YnJlYWt9fX1mdW5jdGlvbiBPKG4pe2NvbnN0IHQ9bi5yZWR1Y2UoKG8sYSk9PihvPDxCaWdJbnQoOCkpK0JpZ0ludChhKSxCaWdJbnQoMCkpLGU9TnVtYmVyKHQpLHM9bmV3IERhdGUoZSk7cmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzLnRvSVNPU3RyaW5nKCkpfWZ1bmN0aW9uIFoobix0KXt2YXIgZixpLHUsaCxjO2lmKCFTLmFjdGl2ZVNQUyl7Y29uc29sZS53YXJuKCJDYW5ub3QgZmluZCB0aGUgYWN0aXZlIFNQUyIpO3JldHVybn1jb25zdCBlPShmPVMuYWN0aXZlU1BTLnZ1aV9wYXJhbWV0ZXJzLm5hbF9ocmRfcGFyYW1ldGVycykhPW51bGw/ZjpTLmFjdGl2ZVNQUy52dWlfcGFyYW1ldGVycy52Y2xfaHJkX3BhcmFtZXRlcnMscz17Y3BiX2RwYl9kZWxheXNfcHJlc2VudF9mbGFnOmU/MTowLGNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6KGk9ZT09bnVsbD92b2lkIDA6ZS5jcGJfcmVtb3ZhbF9kZWxheV9sZW5ndGhfbWludXMxKSE9bnVsbD9pOjIzLGRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMToodT1lPT1udWxsP3ZvaWQgMDplLmRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMSkhPW51bGw/dToyMyx0aW1lX29mZnNldF9sZW5ndGg6ZT8oaD1lLnRpbWVfb2Zmc2V0X2xlbmd0aCkhPW51bGw/aDoyNDp2b2lkIDAscGljX3N0cnVjdF9wcmVzZW50X2ZsYWc6KGM9Uy5hY3RpdmVTUFMudnVpX3BhcmFtZXRlcnMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpIT1udWxsP2M6MH07aWYoIXMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpe2NvbnNvbGUud2FybigicGljX3N0cnVjdF9wcmVzZW50X2ZsYWcgaXMgbm90IHByZXNlbnQiKTtyZXR1cm59Y29uc3Qgcj1uZXcgdyh0KTtzLmNwYl9kcGJfZGVsYXlzX3ByZXNlbnRfZmxhZyYmKHIuc2tpcChzLmNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czErMSksci5za2lwKHMuZHBiX291dHB1dF9kZWxheV9sZW5ndGhfbWludXMxKzEpKTtjb25zdCBvPVsxLDEsMSwyLDIsMywzLDIsM10sYT1yLnJlYWRCaXRzKDQpO2lmKGE+PW8ubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwaWNfc3RydWN0Iik7Y29uc3QgZD1vW2FdLGw9W107Zm9yKGxldCBwPTA7cDxkO3ArKylpZihyLnJlYWRCaXRzKDEpKXtjb25zdCBnPXt9O3Iuc2tpcCgyKSxyLnNraXAoMSksci5za2lwKDUpO2NvbnN0IEE9ci5yZWFkQml0cygxKTtpZihyLnNraXAoMiksZy5uX2ZyYW1lcz1yLnJlYWRCaXRzKDgpLEE/KGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcubWludXRlc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcuaG91cnNfdmFsdWU9ci5yZWFkQml0cyg1KSk6ci5yZWFkQml0cygxKSYmKGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLHIucmVhZEJpdHMoMSkmJihnLm1pbnV0ZXNfdmFsdWU9ci5yZWFkQml0cyg2KSxyLnJlYWRCaXRzKDEpJiYoZy5ob3Vyc192YWx1ZT1yLnJlYWRCaXRzKDUpKSkpLHMudGltZV9vZmZzZXRfbGVuZ3RoKXRyeXtnLnRpbWVfb2Zmc2V0PXIucmVhZEJpdHMocy50aW1lX29mZnNldF9sZW5ndGgpfWNhdGNoKHgpe2NvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byByZWFkIHRpbWVfb2Zmc2V0Iix4KSxnLnRpbWVfb2Zmc2V0PTB9ZWxzZSBnLnRpbWVfb2Zmc2V0PTA7bC5wdXNoKGcpfW4uc2VpUGljVGltaW5nVGltZUNvZGVBcnJheT1sfWZ1bmN0aW9uIFEobix0KXtpZih0IT09IkgyNjQiJiZ0IT09IkgyNjUiKXRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgY29kZWMgIi5jb25jYXQodCkpO2NvbnN0IGU9e307cmV0dXJuIFMuY29kZWM9dCxYKG5ldyBVaW50OEFycmF5KG4uZGF0YSksdCkuZm9yRWFjaChzPT57Y29uc3Qgcj1zWzJdPT09MT8zOjQsbz10PT09IkgyNjQiPzE6MixhPVUocy5zdWJhcnJheShyK28pKSxkPSQoYSk7c3dpdGNoKGQudHlwZSl7Y2FzZSBSLlBJQ19USU1JTkc6WihlLGQuY29udGVudCk7YnJlYWs7Y2FzZSBSLlVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6SyhlLGQuY29udGVudCk7YnJlYWt9fSksZX1mdW5jdGlvbiBlZShuKXtyZXR1cm4vXlswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezEyfSQvLnRlc3Qobil9ZnVuY3Rpb24gVChuKXtyZXR1cm4gbi5yZXBsYWNlKC8tL2csIiIpLm1hdGNoKC8uezEsMn0vZykubWFwKHQ9PnBhcnNlSW50KHQsMTYpKX1mdW5jdGlvbiB0ZShuLHQsZSl7Y29uc3Qgcz1uZXcgVWludDhBcnJheShUKG4pKSxyPUMoZSksbz1uZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoSlNPTi5zdHJpbmdpZnkodCkpLGE9bmV3IFVpbnQ4QXJyYXkocy5sZW5ndGgrci5sZW5ndGgrby5sZW5ndGgpO3JldHVybiBhLnNldChzKSxhLnNldChyLHMubGVuZ3RoKSxhLnNldChvLHIubGVuZ3RoK3MubGVuZ3RoKSxhfWZ1bmN0aW9uIG5lKG4pe2NvbnN0IHQ9W10sZT1NYXRoLmZsb29yKG4uYnl0ZUxlbmd0aC8yNTUpLHM9bi5ieXRlTGVuZ3RoJTI1NTtmb3IobGV0IHI9MDtyPGU7cisrKXQucHVzaCgyNTUpO3JldHVybiB0LnB1c2gocyksbmV3IFVpbnQ4QXJyYXkoWzUsLi4udF0pfWZ1bmN0aW9uIHJlKG4pe2NvbnN0IHQ9W107Zm9yKGxldCBlPTA7ZTxuLmJ5dGVMZW5ndGg7ZSsrKWUrMjxuLmJ5dGVMZW5ndGgmJlswLDEsMiwzXS5pbmNsdWRlcyhuW2UrMl0pJiZuW2VdPT09MCYmbltlKzFdPT09MD8odC5wdXNoKG5bZV0pLHQucHVzaChuW2UrMV0pLGUrPTIsdC5wdXNoKDMpKTp0LnB1c2gobltlXSk7cmV0dXJuIHQucHVzaCgxMjgpLG5ldyBVaW50OEFycmF5KHQpfWZ1bmN0aW9uIEMobil7Y29uc3QgdD1bXTtpZighaXNOYU4obikpe2NvbnN0IGU9QmlnSW50KG4pO2ZvcihsZXQgcz0wO3M8TWF0aC5jZWlsKE1hdGguZmxvb3IoTWF0aC5sb2cyKG5ldyBOdW1iZXIobikpKzEpLzgpO3MrKyl0LnVuc2hpZnQobmV3IE51bWJlcihlPj5CaWdJbnQoOCpzKSZCaWdJbnQoMjU1KSkpfXJldHVybiBuZXcgVWludDhBcnJheSh0KX1mdW5jdGlvbiBzZSh7dXVpZDpuLHBheWxvYWQ6dCx0aW1lY29kZTplfSl7Y29uc3Qgcz1bMCwwLDAsMV0scj1bMTAyXSxvPXRlKG4sdCxlKSxhPW5lKG8pLGQ9cmUobyksbD1uZXcgVWludDhBcnJheShzLmxlbmd0aCtyLmxlbmd0aCthLmxlbmd0aCtkLmxlbmd0aCk7cmV0dXJuIGwuc2V0KHMpLGwuc2V0KHIscy5sZW5ndGgpLGwuc2V0KGEscy5sZW5ndGgrci5sZW5ndGgpLGwuc2V0KGQscy5sZW5ndGgrci5sZW5ndGgrYS5sZW5ndGgpLGx9ZnVuY3Rpb24gaWUoe3V1aWQ6bixwYXlsb2FkOnQsdGltZWNvZGU6ZX0scyl7aWYobj09PSIifHx0PT09IiIpdGhyb3cgbmV3IEVycm9yKCJ1dWlkIGFuZCBwYXlsb2FkIGNhbm5vdCBiZSBlbXB0eSIpO2VlKG4pfHwoY29uc29sZS53YXJuKCJJbnZhbGlkIFVVSUQuIFVzaW5nIGRlZmF1bHQgVVVJRC4iKSxuPUwsZT1EYXRlLm5vdygpKTtjb25zdCByPXNlKHt1dWlkOm4scGF5bG9hZDp0LHRpbWVjb2RlOmV9KSxvPW5ldyBEYXRhVmlldyhzLmRhdGEpLGE9bmV3IEFycmF5QnVmZmVyKHMuZGF0YS5ieXRlTGVuZ3RoK3IuYnl0ZUxlbmd0aCksZD1uZXcgRGF0YVZpZXcoYSk7Zm9yKGxldCBsPTA7bDxzLmRhdGEuYnl0ZUxlbmd0aDtsKyspZC5zZXRVaW50OChsLG8uZ2V0VWludDgobCkpO2ZvcihsZXQgbD0wO2w8ci5ieXRlTGVuZ3RoO2wrKylkLnNldFVpbnQ4KHMuZGF0YS5ieXRlTGVuZ3RoK2wscltsXSk7cy5kYXRhPWF9RC5nZXQoIlRyYW5zZm9ybVdvcmtlciIpLnNldExldmVsKEQuREVCVUcpO2NvbnN0IG9lPTJlMyxiPVtdO2xldCB5PSIiLFA9e307Y29uc3Qgdj17fTtsZXQgST1bXTtmdW5jdGlvbiBIKG4pe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybSh0LGUpe3ZhciBzLHI7aWYodCBpbnN0YW5jZW9mIFJUQ0VuY29kZWRWaWRlb0ZyYW1lKXtjb25zdCBvPSgocz1QW3QuZ2V0TWV0YWRhdGEoKS5wYXlsb2FkVHlwZV0pPT1udWxsP3ZvaWQgMDpzLnRvVXBwZXJDYXNlKCkpfHwoeT09bnVsbD92b2lkIDA6eS50b1VwcGVyQ2FzZSgpKTtpZihvPT09IkgyNjQiKXtjb25zdCBhPVEodCxvKTsoYS50aW1lY29kZXx8YS51bnJlZ2lzdGVyZWR8fCgocj1hLnNlaVBpY1RpbWluZ1RpbWVDb2RlQXJyYXkpPT1udWxsP3ZvaWQgMDpyLmxlbmd0aCk+MCkmJnNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJtZXRhZGF0YSIsbWlkOm4sbWV0YWRhdGE6YX0pfXNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJjb21wbGV0ZSIsZnJhbWU6e3R5cGU6dC50eXBlLHRpbWVzdGFtcDp0LnRpbWVzdGFtcCxkYXRhOnQuZGF0YX19KX1lLmVucXVldWUodCl9fSl9ZnVuY3Rpb24gTSgpe09iamVjdC5rZXlzKHYpLnNvcnQoKS5qb2luKCk9PT1JLnNvcnQoKS5qb2luKCkmJihiLnNoaWZ0KCksST1bXSl9ZnVuY3Rpb24gYWUobil7Y29uc3QgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTt2W25dPXQsT2JqZWN0LmtleXModikuZmlsdGVyKHM9PnQtdltzXT5vZSkuZm9yRWFjaChzPT57ZGVsZXRlIHZbc10sZGVsZXRlIElbc119KSxNKCl9ZnVuY3Rpb24gTigpe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybShuLHQpe2lmKG4gaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3Qgcz1uLmdldE1ldGFkYXRhKCkuc3luY2hyb25pemF0aW9uU291cmNlO2lmKGFlKHMpLCFJLmluY2x1ZGVzKHMpJiZiLmxlbmd0aCl0cnl7aWYoIS8oaDI2WzRdKS8udGVzdCh5KSl0aHJvdyBuZXcgRXJyb3IoIlNlbmRpbmcgbWV0YWRhdGEgaXMgbm90IHN1cHBvcnRlZCB3aXRoIGFueSBvdGhlciBjb2RlYyBvdGhlciB0aGFuIEguMjY0Iik7YlswXS51dWlkPT09TCYmKGJbMF0udGltZWNvZGU9RGF0ZS5ub3coKSksaWUoYlswXSxuKSxJLnB1c2gocyl9Y2F0Y2gocil7Y29uc29sZS5lcnJvcihyKX1maW5hbGx5e00oKX19dC5lbnF1ZXVlKG4pfX0pfWZ1bmN0aW9uIGsoe3JlYWRhYmxlOm4sd3JpdGFibGU6dH0sZSl7bi5waXBlVGhyb3VnaChlKS5waXBlVG8odCl9YWRkRXZlbnRMaXN0ZW5lcigicnRjdHJhbnNmb3JtIixuPT57bGV0IHQ7aWYobi50cmFuc2Zvcm1lci5vcHRpb25zLm5hbWU9PT0ic2VuZGVyVHJhbnNmb3JtIil5PW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlYyx0PU4oKTtlbHNlIGlmKG4udHJhbnNmb3JtZXIub3B0aW9ucy5uYW1lPT09InJlY2VpdmVyVHJhbnNmb3JtIilQPW4udHJhbnNmb3JtZXIub3B0aW9ucy5wYXlsb2FkVHlwZUNvZGVjfHx7fSx5PW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlY3x8IiIsdD1IKG4udHJhbnNmb3JtZXIub3B0aW9ucy5taWQpO2Vsc2UgcmV0dXJuO2sobi50cmFuc2Zvcm1lcix0KX0pLGFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG49Pntjb25zdHthY3Rpb246dH09bi5kYXRhO3N3aXRjaCh0KXtjYXNlImluc2VydGFibGUtc3RyZWFtcy1zZW5kZXIiOnk9bi5kYXRhLmNvZGVjLGsobi5kYXRhLE4oKSk7YnJlYWs7Y2FzZSJpbnNlcnRhYmxlLXN0cmVhbXMtcmVjZWl2ZXIiOlA9bi5kYXRhLnBheWxvYWRUeXBlQ29kZWN8fHt9LHk9bi5kYXRhLmNvZGVjfHwiIixrKG4uZGF0YSxIKG4uZGF0YS5taWQpKTticmVhaztjYXNlIm1ldGFkYXRhLXNlaS11c2VyLWRhdGEtdW5yZWdpc3RlcmVkIjpiLnB1c2goe3V1aWQ6bi5kYXRhLnV1aWQscGF5bG9hZDpuLmRhdGEucGF5bG9hZH0pO2JyZWFrfX0pfSkoKTsK",Ks=typeof self<"u"&&self.Blob&&new Blob([(t=>j.from(atob(t),(t=>t.charCodeAt(0))))(Ys)],{type:"text/javascript;charset=utf-8"});function js(t){let e;try{if(e=Ks&&(self.URL||self.webkitURL).createObjectURL(Ks),!e)throw"";const i=new Bl(e,{name:null==t?void 0:t.name});return i.addEventListener("error",(()=>{(self.URL||self.webkitURL).revokeObjectURL(e)})),i}catch(e){return new Bl("data:text/javascript;base64,"+Ys,{name:null==t?void 0:t.name})}finally{e&&(self.URL||self.webkitURL).revokeObjectURL(e)}}const Qs=at.get("Publish"),Js={mediaStream:null,bandwidth:0,metadata:!1,disableVideo:!1,disableAudio:!1,codec:Ji.H264,simulcast:!1,scalabilityMode:null,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};function $s(t){if(!t)return new j;const e=t.length,i=new j(e/2);for(let s=0;s<e;s+=2)i[s/2]=x(t.substr(s,2),16);return i}function tn(t,e,i){if(w.prototype.hasOwnProperty.call(t,i)&&w.prototype.hasOwnProperty.call(e,i)){const s=t[i];t[i]=e[i],e[i]=s}else console.error('One or both objects do not have the property "'.concat(i,'"'))}function en(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))}const sn=nn;function nn(t,e){const i=_n();return(nn=function(t,e){return i[t-=257]})(t,e)}var rn;!function(){const t=nn,e=_n();for(;;)try{if(x(t(266))/1*(-x(t(261))/2)+x(t(258))/3*(-x(t(264))/4)+-x(t(267))/5*(x(t(274))/6)+x(t(260))/7*(x(t(268))/8)+x(t(270))/9+-x(t(277))/10+x(t(263))/11==303379)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const on=Ll&&Ll[sn(276)]||"",hn=Ll&&Ll.vendor||"",an=!(null==s||!s[sn(273)]),un=on[sn(278)](sn(257)),cn=!un&&hn[sn(278)](sn(259)),ln=!un&&!cn&&on.includes(sn(272)),dn=!un&&!cn&&!ln&&on[sn(278)](sn(275)),fn=(null===(rn=null==Ll?void 0:Ll[sn(262)])||void 0===rn?void 0:rn[sn(271)])||(null==Ll?void 0:Ll[sn(271)])||"";function _n(){const t=["2403660vsbxKa","includes","Firefox","653511krAkNS","Apple","63eEorAu","2iQvmqu","userAgentData","13393182jRLBxS","4fTXBZP","Win32","74923SyWRbn","1345hVdNEb","21688LwGppn","Windows","132498ZoOcLo","platform","Edg","RTCRtpScriptTransform","9372dNMWWf","Chrome","userAgent"];return(_n=function(){return t})()}const vn={supportsRtpScriptTransform:an,isFirefox:un,isSafari:cn,isEdge:ln,isChrome:dn,platform:fn,isWindows:fn===sn(269)||fn===sn(265)},mn=gn;function gn(t,e){const i=bn();return(gn=function(t,e){return i[t-=185]})(t,e)}!function(){const t=gn,e=bn();for(;;)try{if(-x(t(380))/1+-x(t(354))/2+-x(t(464))/3*(x(t(486))/4)+-x(t(253))/5+x(t(377))/6+x(t(321))/7*(-x(t(285))/8)+-x(t(444))/9*(-x(t(279))/10)==657542)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const pn=vn[mn(496)];function wn(t,e){const i=mn;let s=new j((0|t.byteLength)+(0|e[i(442)]));return s[i(311)](t,0),s[i(311)](e,0|t.byteLength),s}const yn=(t,e,i,s)=>{const n=mn,r=s[n(203)]||1;e*=r,i*=r;const o=(u=t)instanceof ArrayBuffer?u:u[mn(492)],h=(t[n(447)]||0)+t[n(442)],a=(t[n(447)]||0)+e;var u;let c=_[n(389)](0,_[n(487)](a,h)),l=_[n(487)](c+_[n(389)](i,0),h);return c/=r,l/=r,new s(o,c,l-c)};function bn(){const t=["[MSE] source buffer error","ManagedMediaSource","BYTES_PER_ELEMENT","types","ready","valid","Num frames in chunk: ","readBits","getTrackID","mvhd","parsePPS","encrypted","dependsOn","payload","len","moov","VMHD","mse","volume","h264","setUint16","tfdt","nextDts","avc1.","audioSampleAuxInfo","message","endMSE","width","hdlr","warn","traf","readBoolean","shift","mseReady","revokeObjectURL","smhd","dts","indexOf","<PROTECTINFO>","webkitsourceclose","onMSEClose","[H264Parser] IDR without SPS/PPS, not suitable for recovery",'VALUE="',"createObjectURL","</KID>","mdhd","SMHD","getFramePayload","tkhd","flush","clRtcDrmDebugLog","getBits","2598770DahMdb","dbgQueue","dispatch","DINF","http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader","isReady","sps","nalus","endOfStream","toString","UNKNOWN","Opus","minf","onError","stco","STSC","buffered","</KIDS>","initSegment","dinf","org.w3.clearkey","mp4track","keyFrame","units","mseEnded","videoSampleAuxInfo","41695210Plpuuo","splice","ended","bitLength","seq","url","8YyaFaO","com.apple.fps","[MSE] error: ","bitsAvailable","</WRMHEADER>","trex","setData","buffer error","slice","length","readUByte","mp4a","Unsupported DRM type ","mdia","fromCharCode",'<WRMHEADER xmlns="',"index","string","both","NDR","dOps","cenc","getPayload","bind","PPS","sourceBuffer","set","Checking codec","releaseBuffer","tenc","trak","flags",'/mp4; codecs="',"[H264Parser] Both IDR and non-IDR VCL NALUs found in the same frame","clRtcDrmCreateMediaDump","STSD","6352549TgZLxu","initBrowser","IDR","trun"," - ","start","mediaSource","startsWith","stype","readSPS","addEventListener","schi","encv","createElement","getVideoFrames","onReady","href","sourceopen","setUint32","vmhd","FTYP","schm","getData","toISOString","remuxer","track","skipScalingList","STSZ","getSize","addSourceBuffer","[MSE] buffer error:","appendBufferError","off","2392886zJoPkf","destroy","sdtp","audiosamplerate",": NRI: ","reportDiscontinuity","extractNALUs","No A/V data","pps","senc","saio","concat","config","ftyp","parseNAL","esds","error","feed","Browser does not support codec","4.3.0.0","skipUEG","mp4","end","2232924PKvVOf","updating","options","227868XbMqAn","prototype","createBuffer","info","MediaSource","timestamp","mvex","isfmb","opus","max","stsz","POSITIVE_INFINITY","saiz","timescale","call","encryption","height","jmuxer","bufferControllers","open","patchSampleAuxinfo","queue","stsd","onBufferError","frameCounter","ntype","remux","getPayloadSize","isSupported","</LA_URL>","waitingForIdr","box","idr"," samples - expected 1","tracks","stbl","getNri",'<KID ALGID="AESCTR" ',"download","readUInt","join","com.microsoft.playready.recommendation",'" version="',"remuxController","Received ","frma","resetTrack","disableRemotePlayback","</DATA>","mfhd","pssh","charCodeAt","drm","mediaDuration","video","readyToDecode","from","SPS","skipLZ","data","keySystem","[MSE] sourceclose","byteLength","STTS","9mESMVl","Buffered range ","samples","byteOffset","parseHeader","codec","node","audio","Failure: Browser doesn't support MSE/MMS","subarray","replaceAll","downloadToFile","onBuffer","skipBits","mdat","isKeyframe","moof","mode","push","STCO","9ffcUcC","listener","isReset","map","enca","type","<LA_URL>","parseSPS","getElementById","no video element were found to render, provide a valid video element","sinf","doAppend","HDLR_TYPES","videoElement","stts","keyId","trackTypes","TYPES","remove","size","AUD","src","1376748eVkTXq","min","tfhd","initialized","offAll","appendBuffer","buffer","nri","skipEG","isvcl","isSafari","isTypeSupported","readyState","abort","apply","reduce","assign","calculateExpectedSizeFromSai","duration","generatePlayReadyHeader","readUEG","onMSEOpen","sampleAuxInfo","SEI","irrecoverableError","channelCount","saiIvSize","stsc"];return(bn=function(){return t})()}function An(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1/0),yn(t,e,i,j)}function Sn(t){const e=mn,i=Array[e(436)](t)[e(467)]((t=>t[e(431)](0)));return new j(i)}s[mn(455)]=(t,e,i)=>{void 0===i&&(i="application/octet-stream");const s=mn,n=h[s(334)]("a"),r=new Blob([t],{type:i});n[s(337)]=URL[s(244)](r),n[s(418)]=e,n.click(),URL[s(235)](n[s(337)])};class Tn{static get[mn(304)](){return 1}static get[mn(323)](){return 5}static get[mn(196)](){return 6}static get SPS(){return 7}static get PPS(){return 8}static get[mn(484)](){return 9}static get[mn(481)](){const t=mn;return{[Tn[t(323)]]:t(323),[Tn.SEI]:t(196),[Tn.SPS]:t(437),[Tn[t(309)]]:t(309),[Tn[t(304)]]:t(304),[Tn[t(484)]]:t(484)}}static type(t){const e=mn;return t[e(405)]in Tn[e(481)]?Tn[e(481)][t[e(405)]]:e(263)}toString(){const t=mn;return Tn[t(469)](this)+t(358)+this[t(416)]()}getNri(){return this[mn(493)]}[mn(469)](){return this[mn(405)]}[mn(459)](){const t=mn;return this[t(405)]===Tn[t(323)]}[mn(307)](){return this[mn(214)]}[mn(407)](){const t=mn;return this[t(214)][t(442)]}getSize(){return 4+this[mn(407)]()}[mn(343)](){const t=mn,e=new j(this.getSize());return new DataView(e.buffer)[t(339)](0,this.getSize()-4),e[t(311)](this[t(307)](),4),e}constructor(t){const e=mn;this.payload=t,this[e(493)]=(96&this.payload[0])>>5,this[e(405)]=31&this[e(214)][0],this[e(495)]=1==this.ntype||5==this[e(405)],this[e(329)]="",this[e(387)]=!1}}class kn{[mn(291)](t){const e=mn;this.data=t,this[e(301)]=0,this[e(282)]=8*t[e(442)]}get[mn(288)](){const t=mn;return this[t(282)]-this[t(301)]}skipBits(t){if(this[mn(288)]<t)return!1;this.index+=t}[mn(208)](t,e){return void 0===e&&(e=!0),this.getBits(t,this.index,e)}[mn(252)](t,e,i){void 0===i&&(i=!0);const s=mn;if(this.bitsAvailable<t)return 0;const n=e%8,r=this[s(439)][e/8|0]&255>>>n,o=8-n;if(o>=t)return i&&(this.index+=t),r>>o-t;{i&&(this.index+=o);const n=t-o;return r<<n|this[s(252)](n,e+o,i)}}[mn(438)](){const t=mn;let e;for(e=0;e<this.bitLength-this[t(301)];++e)if(0!==this.getBits(1,this[t(301)]+e,!1))return this.index+=e,e;return e}[mn(374)](){const t=mn;this[t(457)](1+this[t(438)]())}[mn(494)](){const t=mn;this[t(457)](1+this[t(438)]())}readUEG(){const t=mn,e=this[t(438)]();return this[t(208)](e+1)-1}readEG(){const t=this[mn(193)]();return 1&t?1+t>>>1:-1*(t>>>1)}readBoolean(){return 1===this[mn(208)](1)}[mn(295)](t){return void 0===t&&(t=1),this[mn(208)](8*t)}readUShort(){return this[mn(208)](16)}[mn(419)](){return this[mn(208)](32)}constructor(t){const e=mn;this[e(439)]=t,this[e(301)]=0,this.bitLength=8*t[e(442)]}}class En{static[mn(360)](t,e){const i=mn;let s=[],n=!1,r=!1,o=!1,h=!1,a=0,u=0,c=0,l=[];for(;a<=t.byteLength;){if(a<t.byteLength){const e=t[a++];0!==e?(1===e&&u>1&&(c=u>2?4:3,l.push(a)),u=0):++u}else c=0,l.push(a++);if(l.length>1){const i=l.shift(),d=l[0]-c;if(i<d){let c=!1;const l=31&t[i];if(l===Tn.NDR?r=!0:l===Tn.IDR?n=!0:l===Tn.SPS?(c=o,o=!0):l===Tn.PPS&&(c=h,h=!0),!c)if(!e||l!==Tn.NDR&&l!==Tn.IDR)s.push(t.subarray(i,d));else{const e=new j(d-i);let n=0;for(a=i,u=0;a<d;){let i=t[a++];u>1&&3===i&&(u=0,i=t[a++]),0!==i?u=0:++u,e[n++]=i}s.push(e.subarray(0,n))}}}}let d=!0,f=!1;return r||n?r&&n&&(console[i(230)](i(318)),d=!1):(console[i(230)]("[H264Parser] No VCL NALUs found"),d=!1),n&&(o&&h?f=!0:console[i(230)](i(242))),{valid:d,idr:f,nalus:s}}static skipScalingList(t,e){let i,s=8,n=8;for(let r=0;r<e;r++)0!==n&&(i=t.readEG(),n=(s+i+256)%256),s=0===n?s:n}static[mn(330)](t){const e=mn;let i,s,n,r,o,h,a=new kn(t),u=0,c=0,l=0,d=0,f=1;if(a[e(295)](),i=a.readUByte(),a[e(208)](5),a[e(457)](3),a.readUByte(),a[e(374)](),100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i){var v=a[e(193)]();if(3===v&&a[e(457)](1),a.skipUEG(),a[e(374)](),a[e(457)](1),a[e(232)]()){h=3!==v?8:12;for(let t=0;t<h;++t)a[e(232)]()&&(t<6?En[e(347)](a,16):En[e(347)](a,64))}}a[e(374)]();var m=a.readUEG();if(0===m)a[e(193)]();else if(1===m){a.skipBits(1),a[e(494)](),a[e(494)](),s=a[e(193)]();for(let t=0;t<s;++t)a.skipEG()}if(a.skipUEG(),a[e(457)](1),n=a[e(193)](),r=a.readUEG(),o=a[e(208)](1),0===o&&a[e(457)](1),a[e(457)](1),a[e(232)]()&&(u=a[e(193)](),c=a[e(193)](),l=a[e(193)](),d=a.readUEG()),a.readBoolean()){if(a[e(232)]()){let t;switch(a[e(295)]()){case 1:t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[a[e(295)]()<<8|a.readUByte(),a[e(295)]()<<8|a[e(295)]()]}t&&t[0]>0&&t[1]>0&&(f=t[0]/t[1])}a.readBoolean()&&a[e(457)](1),a[e(232)]()&&(a.skipBits(4),a[e(232)]()&&a[e(457)](24)),a.readBoolean()&&(a.skipUEG(),a[e(374)]()),a.readBoolean()&&(a[e(419)](),a[e(419)](),a.readBoolean())}return{width:_.ceil((16*(n+1)-2*u-2*c)*f),height:(2-o)*(r+1)*16-(o?2:4)*(l+d)}}static[mn(448)](t){const e=mn;let i=new kn(t[e(307)]());i.readUByte(),t.isfmb=0===i[e(193)](),t.stype=i[e(193)]()}[mn(471)](t){const e=mn;var i=En[e(330)](new j(t));this[e(346)][e(228)]=i[e(228)],this[e(346)][e(396)]=i[e(396)],this[e(346)].sps=[new j(t)],this[e(346)][e(449)]=e(224);let s=new DataView(t.buffer,t[e(447)]+1,4);for(let t=0;t<3;++t){var n=s.getUint8(t)[e(262)](16);n.length<2&&(n="0"+n),this.track[e(449)]+=n}}[mn(211)](t){this[mn(346)].pps=[new j(t)]}[mn(368)](t){const e=mn;if(!t)return!1;let i=!1;switch(t.type()){case Tn[e(323)]:case Tn[e(304)]:i=!0;break;case Tn[e(309)]:!this[e(346)][e(362)]&&(this.parsePPS(t[e(307)]()),!this[e(345)][e(435)]&&this[e(346)][e(362)]&&this[e(346)][e(259)]&&(this[e(345)][e(435)]=!0)),i=!0;break;case Tn[e(437)]:!this[e(346)][e(259)]&&(this[e(471)](t[e(307)]()),!this[e(345)][e(435)]&&this[e(346)][e(362)]&&this.track.sps&&(this[e(345)][e(435)]=!0)),i=!0;break;case Tn[e(484)]:break;case Tn[e(196)]:i=!0}return i}constructor(t){const e=mn;this.remuxer=t,this[e(346)]=t[e(274)]}}class xn{on(t,e){const i=mn;return!this[i(465)][t]&&(this[i(465)][t]=[]),this[i(465)][t][i(462)](e),!0}[mn(353)](t,e){const i=mn;if(this[i(465)][t]){var s=this.listener[t][i(238)](e);return s>-1&&this[i(465)][t][i(280)](s,1),!0}return!1}[mn(490)](){this[mn(465)]={}}[mn(255)](t,e){const i=mn;return!!this.listener[t]&&(this[i(465)][t][i(467)]((t=>{t[i(187)](null,[e])})),!0)}constructor(t){const e=mn;this[e(465)]={},this[e(469)]=""|t}}class Rn{static[mn(411)](t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const n=mn;let r,o=8,h=i.length,a=h;for(;h--;)i[h]&&(o+=i[h].byteLength);for(r=new j(o),r[0]=o>>>24,r[1]=o>>>16&255,r[2]=o>>>8&255,r[3]=255&o,r[n(311)](t,4),h=0,o=8;h<a;++h)i[h]&&(r[n(311)](i[h],o),o+=i[h][n(442)]);return r}hdlr(t){const e=mn;return Rn[e(411)](Rn[e(204)][e(229)],Rn[e(476)][t])}mdat(t){const e=mn;return Rn.box(Rn.types[e(458)],t)}[mn(246)](t,e){const i=mn;return Rn.box(Rn[i(204)][i(246)],new j([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,0,0,0,0,85,196,0,0]))}[mn(298)](t){const e=mn;return Rn[e(411)](Rn[e(204)][e(298)],this[e(246)](t[e(393)],t.duration),this[e(229)](t[e(469)]),this[e(265)](t))}[mn(429)](t){const e=mn;return Rn[e(411)](Rn.types[e(429)],new j([0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[mn(265)](t){const e=mn;return t[e(469)]===e(451)?Rn[e(411)](Rn[e(204)][e(265)],Rn.box(Rn[e(204)][e(236)],Rn[e(247)]),Rn.DINF,this[e(415)](t)):Rn[e(411)](Rn[e(204)][e(265)],Rn[e(256)],this[e(415)](t),Rn[e(411)](Rn[e(204)][e(340)],Rn[e(217)]))}[mn(460)](t,e,i){const s=mn;return Rn[s(411)](Rn[s(204)][s(460)],this[s(429)](t),this.traf(i,e))}moov(t,e,i){const s=mn;let n=t[s(294)],r=[];for(;n--;)r[n]=this[s(315)](t[n]);return Rn[s(411)][s(187)](null,[Rn[s(204)].moov,this[s(210)](i,e),this[s(430)](t)].concat(r)[s(365)](this[s(386)](t)))}mvex(t){const e=mn;let i=t[e(294)],s=[];for(;i--;)s[i]=this[e(290)](t[i]);return Rn.box[e(187)](null,[Rn[e(204)].mvex].concat(s))}[mn(210)](t,e){const i=mn;let s=new j([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Rn[i(411)](Rn[i(204)].mvhd,s)}[mn(356)](t){const e=mn;let i=t[e(446)]||[],s=new j(4+i.length);for(let t=0;t<i.length;t++){const n=i[t][e(316)];s[t+4]=n[e(213)]<<4|n.isDependedOn<<2|n.hasRedundancy}return Rn.box(Rn.types.sdtp,s)}[mn(415)](t){const e=mn;return Rn[e(411)](Rn.types[e(415)],this[e(402)](t),Rn.box(Rn.types[e(478)],Rn[e(443)]),Rn.box(Rn.types[e(200)],Rn[e(268)]),Rn[e(411)](Rn[e(204)][e(390)],Rn[e(348)]),Rn[e(411)](Rn[e(204)][e(267)],Rn[e(463)]))}[mn(333)](t){const e=mn;let i,s,n,r=[],o=[];for(i=0;i<t[e(259)][e(294)];i++)s=t[e(259)][i],n=s[e(442)],r.push(n>>>8&255),r[e(462)](255&n),r=r[e(365)](Array[e(381)].slice.call(s));for(i=0;i<t.pps.length;i++)s=t.pps[i],n=s[e(442)],o.push(n>>>8&255),o[e(462)](255&n),o=o[e(365)](Array[e(381)][e(293)][e(394)](s));const h=Rn[e(411)](Rn[e(204)].avcC,new j([1,r[3],r[4],r[5],255,224|t[e(259)][e(294)]][e(365)](r)[e(365)]([t[e(362)].length]).concat(o))),a=t[e(228)],u=t[e(396)],c=Rn[e(411)](Rn[e(204)][e(474)],Rn[e(411)](Rn.types[e(425)],new j([97,118,99,49])),Rn[e(411)](Rn[e(204)][e(342)],new j([0,0,0,0,...Sn(this[e(432)][e(366)].video[e(395)]),0,1,0,0])),Rn[e(411)](Rn[e(204)].schi,this[e(314)]("video")));return Rn[e(411)](Rn[e(204)][e(333)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,255&a,u>>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),h,c)}[mn(369)](t){const e=mn;let i=t.config[e(442)],s=new j(26+i+3);return s[e(311)]([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5,i]),s[e(311)](t[e(366)],26),s[e(311)]([6,1,2],26+i),s}[mn(296)](t){const e=mn,i=t.audiosamplerate;return Rn[e(411)](Rn[e(204)][e(296)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[e(198)],0,16,0,0,0,0,i>>>8&255,255&i,0,0]),Rn[e(411)](Rn[e(204)][e(369)],this.esds(t)))}dOps(t){const e=mn,i=t[e(357)];return new j([0,t[e(198)],1,56,0,0,i>>>8&255,255&i,0,0,0])}[mn(264)](t){const e=mn,i=t[e(357)];return Rn[e(411)](Rn[e(204)].Opus,new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[e(198)],0,16,0,0,0,0,i>>>8&255,255&i,0,0]),Rn[e(411)](Rn.types[e(305)],this[e(305)](t)))}[mn(468)](t){const e=mn,i=Rn[e(411)](Rn[e(204)].dOps,this[e(305)](t)),s=Rn[e(411)](Rn[e(204)].sinf,Rn[e(411)](Rn[e(204)].frma,new j([79,112,117,115])),Rn[e(411)](Rn[e(204)][e(342)],new j([0,0,0,0,...Sn(this.drm[e(366)].audio[e(395)]),0,1,0,0])),Rn[e(411)](Rn[e(204)][e(332)],this[e(314)](e(451)))),n=t[e(357)];return Rn[e(411)](Rn[e(204)][e(468)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[e(198)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),i,s)}[mn(402)](t){const e=mn;return t[e(469)]===e(451)?Rn.box(Rn[e(204)][e(402)],Rn[e(320)],t[e(212)]?this[e(468)](t):this[e(264)](t)):Rn.box(Rn[e(204)][e(402)],Rn[e(320)],this.encv(t))}[mn(249)](t){const e=mn,i=t.id,s=t[e(191)],n=t.width,r=t[e(396)],o=t[e(219)];return Rn[e(411)](Rn[e(204)][e(249)],new j([0,0,0,7,0,0,0,0,0,0,0,0,i>>>24,i>>>16&255,i>>>8&255,255&i,0,0,0,0,s>>>24,s>>>16&255,s>>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,255&o,o%1*10&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,r>>>8&255,255&r,0,0]))}[mn(231)](t,e){var i;const s=mn,n=t.id,r=t[s(446)][0][s(483)],o=t[s(446)][0][s(191)],h=t[s(446)][0].flags,a=Rn[s(411)](Rn[s(204)][s(488)],new j([0,2,0,58,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,1,o>>>24,n>>>16&255,o>>>8&255,255&o,r>>>24,r>>>16&255,r>>>8&255,255&r,0,h.isNonSync,0,0])),u=Rn[s(411)](Rn[s(204)][s(222)],new j([0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e]));if(t[s(212)]){let e,n;if(t[s(469)]===s(434)?(e=!0,n=this[s(199)][s(434)]+(null==(i=t[s(446)][0].sampleAuxInfo)?void 0:i.byteLength)):(e=!1,n=this[s(199)][s(451)]),n>0){const i=this[s(392)](n),r=this[s(363)](t[s(446)],e),o=i.length+20+r.length+a[s(294)]+u[s(294)]+8+16+8+8,h=this[s(324)](t,o);return Rn[s(411)](Rn[s(204)][s(231)],a,u,h,i,this[s(364)](o-r[s(294)]+h[s(294)]+8),r)}{const e=this[s(363)](null,!1),i=e[s(294)]+a[s(294)]+u.length+8+16+8+8,n=this[s(324)](t,i);return Rn[s(411)](Rn[s(204)][s(231)],a,u,n,e)}}return Rn.box(Rn.types.traf,a,u,this[s(324)](t,a[s(294)]+u[s(294)]+8+16+8+8))}[mn(315)](t){const e=mn;return t[e(191)]=t[e(191)]||4294967295,Rn.box(Rn[e(204)][e(315)],this[e(249)](t),this[e(298)](t))}trex(t){const e=mn,i=t.id;return Rn[e(411)](Rn[e(204)][e(290)],new j([0,0,0,0,i>>>24,i>>>16&255,i>>>8&255,255&i,0,0,0,1,0,0,0,16,0,0,0,0,0,0,0,0]))}trun(t,e){const i=mn;let s=(t.samples||[]).length,n=new j(12);return e+=20,n[i(311)]([0,0,0,1,s>>>24,s>>>16&255,s>>>8&255,255&s,e>>>24,e>>>16&255,e>>>8&255,255&e],0),Rn.box(Rn.types[i(324)],n)}[mn(192)](t,e){const i=mn,s=i(373),n=i(257),r=function(t){const e=function(t){const e=mn;let i="";for(let s=0;s<t.length;s+=16e3){const n=t[e(453)](s,s+16e3);i+=String[e(299)][e(187)](null,n)}return i}(An(t));return btoa(e)}(function(t){const e=mn,i=[];return i[e(462)](t[3]),i[e(462)](t[2]),i[e(462)](t[1]),i[e(462)](t[0]),i.push(t[5]),i.push(t[4]),i.push(t[7]),i.push(t[6]),(t=An(t))[e(311)](i,0),t}(t));return An(function(t,e){const i=mn,s=new j(2*t.length),n=new DataView(s[i(492)]);for(let e=0;e<t[i(294)];++e){const s=t[i(431)](e);n[i(221)](2*e,s,true)}return s[i(492)]}([i(300)+n+i(422)+s+'">',"<DATA>",i(239),"<KIDS>",i(417),i(243)+r+'"',">",i(245),i(270),"</PROTECTINFO>",e?i(470)+e+i(409):"",i(428),i(289)][i(420)]("")))}[mn(430)](t){const e=mn;if(this[e(432)][e(440)][e(328)]("com.widevine"))return Rn[e(411)](Rn[e(204)][e(430)],new j([0,0,0,0,237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237,0,0,0,18,18,16,...this[e(432)][e(366)][t[0][e(469)]][e(479)]]));if(this[e(432)].keySystem===e(421)){const i=this[e(192)](this[e(432)][e(366)][t[0].type][e(479)],this.drm.licenseUrl),s=i[e(442)];return Rn[e(411)](Rn[e(204)][e(430)],new j([0,0,0,0,154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149,s>>>24,s>>>16&255,s>>>8&255,255&s,...i]))}return this[e(432)][e(440)]===e(273)?Rn[e(411)](Rn[e(204)][e(430)],new j([1,0,0,0,16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75,0,0,0,1,...this.drm.config[t[0][e(469)]][e(479)],0,0,0,0])):this[e(432)][e(440)]===e(286)?null:void console[e(370)](e(297)+this[e(432)].keySystem)}[mn(314)](t){const e=mn;let i,s,n=this[e(432)][e(366)][t];return"cbcs"===n.encryption?(i=new j([16,...n.iv]),s=25):(i=new j([]),s=0),Rn[e(411)](Rn[e(204)].tenc,new j([1,0,0,0,0,s,1,this[e(199)][t],...n[e(479)],...i]))}[mn(392)](t){return Rn[mn(411)](Rn.types.saiz,new j([0,0,0,0,t,0,0,0,1]))}[mn(364)](t){const e=mn;return Rn[e(411)](Rn[e(204)][e(364)],new j([0,0,0,0,0,0,0,1,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[mn(363)](t,e){const i=mn;let s=null;return t&&(1!==t[i(294)]&&console[i(370)](i(424)+t[i(294)]+i(413)),s=t[0][i(195)]),s&&s[i(442)]?Rn[i(411)](Rn[i(204)][i(363)],new j([0,0,0,e?2:0,0,0,0,1,...s])):Rn[i(411)](Rn[i(204)][i(363)],new j([0,0,0,0,0,0,0,1]))}[mn(271)](t,e,i){const s=mn,n=this[s(216)](t,e,i);let r=new j(Rn[s(341)][s(442)]+n.byteLength);return r.set(Rn[s(341)]),r[s(311)](n,Rn[s(341)].byteLength),r}constructor(t){var e,i;const s=mn;this[s(432)]=t,this[s(199)]={video:(null==(e=t[s(366)][s(434)])?void 0:e.encryption)===s(306)?16:0,audio:(null==(i=t[s(366)][s(451)])?void 0:i.encryption)===s(306)?16:0},Rn.types={avc1:[],encv:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],Opus:[],dOps:[],enca:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pssh:[],sinf:[],frma:[],schm:[],schi:[],tenc:[],saiz:[],saio:[],senc:[]};for(let t in Rn[s(204)])Rn[s(204)][t]=[t[s(431)](0),t[s(431)](1),t.charCodeAt(2),t[s(431)](3)];const n=new j([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new j([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Rn[s(476)]={video:n,audio:r};const o=new j([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),h=new j([0,0,0,0,0,0,0,0]);Rn[s(443)]=Rn[s(268)]=Rn[s(463)]=h,Rn[s(348)]=new j([0,0,0,0,0,0,0,0,0,0,0,0]),Rn[s(217)]=new j([0,0,0,1,0,0,0,0,0,0,0,0]),Rn.SMHD=new j([0,0,0,0,0,0,0,0]),Rn[s(320)]=new j([0,0,0,0,0,0,0,1]);const a=new j([105,115,111,109]),u=new j([97,118,99,49]),c=new j([0,0,0,1]);Rn[s(341)]=Rn[s(411)](Rn[s(204)][s(367)],a,c,a,u),Rn.DINF=Rn[s(411)](Rn[s(204)][s(272)],Rn[s(411)](Rn[s(204)].dref,o))}}let In=1;class Cn{static[mn(209)](){return In++}[mn(250)](){const t=mn;this[t(274)][t(215)]=0,this.mp4track[t(446)]=[]}[mn(258)](){const t=mn;return!(!this.readyToDecode||!this[t(446)][t(294)])}constructor(){this[mn(283)]=1}}class Pn extends Cn{resetTrack(){const t=mn;this[t(283)]=1,this[t(223)]=0,this[t(237)]=0}[mn(406)](t,e,i){const s=mn;if(t.length>0)for(let n=0;n<t[s(294)];n++){let r=t[n],o=r[s(276)],h=o[s(442)];this.samples.push({units:o,size:h,duration:r.duration,sampleAuxInfo:e,timestamp:i}),this[s(274)][s(215)]+=h}}[mn(248)](){const t=mn;if(!this[t(446)])return null;let e,i=this[t(274)][t(446)];for(;this.samples[t(294)];){let s=this[t(446)][t(233)](),n=(1e3*s[t(385)]|0)-this.nextDts|0;n<5&&(n=5),this.dts=this.nextDts,this[t(223)]+=n,e={size:s.size,duration:n,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1},sampleAuxInfo:s[t(195)]};let r=new j(s.size);return r[t(311)](s.units,0),i.push(e),new j(r.buffer,0,s[t(483)])}return null}constructor(t){const e=mn;super(),this[e(435)]=!0,this[e(223)]=0,this[e(237)]=0,this[e(274)]={id:Cn[e(209)](),type:"audio",channelCount:2,audiosamplerate:48e3,len:0,fragmented:!0,timescale:t,duration:t,samples:[],codec:e(388),encrypted:!0},this[e(446)]=[]}}class Dn extends Cn{[mn(426)](){const t=mn;this[t(283)]=1,this.readyToDecode=!1,this[t(274)].sps="",this[t(274)][t(362)]="",this[t(223)]=0,this[t(237)]=0}[mn(406)](t,e,i){const s=mn;for(let n of t){let t=[],r=0;for(let e of n[s(276)])this.h264[s(368)](e)&&(t[s(462)](e),r+=e.getSize());t[s(294)]>0&&this[s(435)]&&(this[s(274)][s(215)]+=r,this[s(446)][s(462)]({units:t,size:r,keyFrame:n.keyFrame,duration:n[s(191)],sampleAuxInfo:e,timestamp:i}))}}[mn(248)](){const t=mn;if(!this[t(258)]()||!this.samples)return null;let e,i=this[t(274)][t(446)],n=this.samples[t(233)](),r=n[t(276)],o=(1e3*n.timestamp|0)-this[t(223)]|0;o<5&&(o=5),s[t(251)]&&o>5e3&&console[t(383)]("timestamp gap: "+(o/1e3|0)+" s"),this[t(237)]=this[t(223)],this.nextDts+=o,e={size:n[t(483)],duration:o,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:n[t(275)]?0:1,dependsOn:n.keyFrame?2:1},sampleAuxInfo:n[t(195)]};let h=0;for(const e of r)h+=e[t(349)]();let a=0,u=new j(h);for(const e of r)u[t(311)](e[t(343)](),a),a+=e[t(349)]();return i[t(462)](e),new j(u[t(492)],0,h)}constructor(t,e){const i=mn;super(),this[i(435)]=!1,this.nextDts=0,this[i(237)]=0,this[i(477)]=e,this.mp4track={id:Cn[i(209)](),type:i(434),len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:t,duration:t,samples:[],encrypted:!0},this[i(446)]=[],this[i(220)]=new En(this)}}class Nn extends xn{addTrack(t){const e=mn;(t===e(434)||"both"===t)&&(this[e(414)][e(434)]=new Dn(this[e(393)],this.videoElement),this[e(480)][e(462)](e(434))),(t===e(451)||t===e(303))&&(this[e(414)][e(451)]=new Pn(this.timescale),this[e(480)][e(462)](e(451)))}reset(){const t=mn;for(let e of this[t(480)])this[t(414)][e][t(426)]();this[t(489)]=!1}[mn(355)](){const t=mn;this[t(414)]={},this[t(490)]()}[mn(250)](){const t=mn;if(this[t(489)])for(let e of this[t(480)]){let i=this[t(414)][e];for(;;){let s=i.getFramePayload();if(!s||!s[t(442)])break;let n={type:e,payload:wn(this[t(375)][t(460)](i[t(283)]++,i[t(237)],i[t(274)]),this[t(375)][t(458)](s)),dts:i[t(237)]};this[t(255)](t(492),n),i[t(250)]()}}else this[t(258)]()&&(this[t(255)](t(205)),this[t(271)](),this[t(489)]=!0,this[t(250)]())}initSegment(){const t=mn;for(let e of this[t(480)]){let i=this[t(414)][e],s={type:e,payload:this[t(375)][t(271)]([i[t(274)]],this[t(433)],this[t(393)])};this.dispatch(t(492),s)}}isReady(){const t=mn;for(let e of this.trackTypes)if(!this[t(414)][e][t(435)]||!this[t(414)][e].samples[t(294)])return!1;return!0}[mn(406)](t){const e=mn;for(let i of this[e(480)]){let s=t[i];s.length>0&&this[e(414)][i][e(406)](s,i===e(451)?t[e(225)]:t.videoSampleAuxInfo,t[e(385)])}this.flush()}constructor(t,e){const i=mn;super(i(345)),this.initialized=!1,this.trackTypes=[],this[i(414)]={},this[i(393)]=1e3,this.mediaDuration=0,this[i(477)]=t,this[i(375)]=e}}class Mn extends xn{[mn(355)](){const t=mn;this[t(401)]=null,this[t(254)]=null;try{this.sourceBuffer&&(this[t(310)][t(186)](),this[t(218)].removeSourceBuffer(this[t(310)]),this[t(310)]=null)}catch(t){}this.offAll()}[mn(475)](){const t=mn;if(this.queue[t(294)]&&this[t(310)]&&!this[t(310)].updating){if(this[t(310)].buffered[t(294)]>1){for(let e=0;e<this[t(310)].buffered[t(294)];++e){const i=e<this[t(310)].buffered[t(294)]-1;s[t(251)]&&console[t(383)](t(445)+e+(i?" (remove)":"")+": "+this[t(310)][t(269)][t(326)](e)+t(325)+this[t(310)][t(269)][t(376)](e)),i&&this.sourceBuffer[t(482)](this[t(310)][t(269)].start(e),this[t(310)].buffered[t(376)](e))}if(this.sourceBuffer[t(378)])return}try{this[t(310)][t(491)](this[t(401)]),this.queue=new j}catch(e){this[t(255)](t(370),{type:this[t(469)],name:t(352),error:e})}}}[mn(371)](t){const e=mn;if(this[e(254)]&&(this.dbgQueue=wn(this[e(254)],t),100==++this[e(404)])){const t=(new Date)[e(344)]().substring(0,19)[e(454)](":","-"),i=this.type+"-"+t+".mp4";s.downloadToFile(this[e(254)],i),this[e(254)]=null}this[e(197)]||(this[e(401)]=wn(this[e(401)],t)),this.doAppend()}constructor(t,e,i){const n=mn;super(n(492)),this[n(469)]=e,this.queue=new j,s[n(319)]&&(this[n(254)]=new j,this[n(404)]=0),this.sourceBuffer=t,this[n(218)]=i,this[n(197)]=!1,this[n(310)].addEventListener(n(370),(t=>{const e=n;console.warn(e(201),t,this.type),this[e(197)]=!0,this[e(255)](e(370),{type:this[e(469)],name:"buffer",error:e(292)})}))}}class Ln extends xn{static isSupported(t){const e=mn;return s[e(202)]?s.ManagedMediaSource[e(497)](t):!!s[e(384)]&&s.MediaSource[e(497)](t)}[mn(322)](){const t=mn;typeof this.options.node===t(302)&&""==this.options[t(450)]&&console[t(370)](t(473)),this[t(234)]=!1,this.setupMSE()}setupMSE(){const t=mn;if(!s[t(202)]&&!s[t(384)])throw t(452);s.ManagedMediaSource?(this.node[t(427)]=!0,this[t(327)]=new ManagedMediaSource):this[t(327)]=new MediaSource,this[t(284)]=URL[t(244)](this[t(327)]),this.node[t(485)]=this[t(284)],this[t(277)]=!1,this[t(327)][t(331)](t(338),this.onMSEOpen[t(308)](this)),this.mediaSource.addEventListener("sourceclose",this[t(241)][t(308)](this)),this[t(327)][t(331)]("webkitsourceopen",this[t(194)][t(308)](this)),this.mediaSource[t(331)](t(240),this[t(241)].bind(this)),this[t(327)][t(331)]("error",(function(e){const i=t;console[i(370)](i(287),e[i(226)])}))}[mn(227)](){const t=mn;if(!this[t(277)])try{this.mseEnded=!0,this[t(327)][t(185)]===t(399)&&this[t(327)][t(261)]()}catch(e){console[t(370)]("mediasource is not available to end: ",e)}}[mn(359)](){this[mn(410)]=!0}[mn(371)](t){const e=mn;let i={video:[],audio:[]};if(this[e(197)]||this[e(277)]||!t||!this[e(423)])return-1;if(t[e(434)]){i.timestamp=t.timestamp;const s=this[e(190)](t.videoSampleAuxInfo,this.mp4[e(199)][e(434)]),n=s!=t[e(434)][e(442)];let r=En[e(360)](t[e(434)],n);if(!r[e(206)]||r[e(260)].length<1)return 0;if(this.waitingForIdr){if(!r[e(412)])return 0;this[e(410)]=!1}if(!pn&&t[e(278)]){const i=r[e(260)][e(188)](((t,i)=>t+4+i[e(442)]),0);i!==s&&this[e(400)](t[e(278)],this.mp4[e(199)][e(434)],i-s)}i[e(434)]=this[e(335)](r[e(260)]),i[e(278)]=t[e(278)]}return t[e(451)]&&(i[e(385)]=t[e(385)],i[e(451)]=[{units:t.audio}],i.audioSampleAuxInfo=t[e(225)]),t[e(434)]||t[e(451)]?(this[e(423)][e(406)](i),0):(console.error(e(361)),0)}[mn(335)](t){const e=mn;let i=[],s=[],n=!1,r=!1;for(let o of t){let t=new Tn(o);t.type()!==Tn.IDR&&t[e(469)]()!==Tn.NDR||En[e(448)](t),i[e(294)]&&r&&(t[e(387)]||!t[e(495)])&&(s[e(462)]({units:i,keyFrame:n}),i=[],n=!1,r=!1),i[e(462)](t),n=n||t[e(459)](),r=r||t[e(495)]}if(i[e(294)])if(r)s[e(462)]({units:i,keyFrame:n});else{let t=s[e(294)]-1;t>=0&&(s[t].units=s[t][e(276)].concat(i))}return 1!==s[e(294)]&&console[e(230)](e(207)+s[e(294)]),s}[mn(190)](t,e){const i=mn;if(!t)return 0;const s=(t[0]<<8)+t[1],n=e+2+4;let r=0,o=2;for(;0<s&&o+n<=t[i(442)];){o+=e;const i=(t[o]<<8)+t[o+1],s=(t[o+2]<<24)+(t[o+3]<<16)+(t[o+4]<<8)+t[o+5];o+=6,r+=i+s}return r}patchSampleAuxinfo(t,e,i){const s=mn;let n=2;if(0<(t[0]<<8)+t[1]&&n+(e+2+4)<=t[s(442)]){n+=e;let s=(t[n]<<8)+t[n+1];s+=i,s>=0&&(t[n]=s>>>8&255,t[n+1]=255&s)}return 0}[mn(382)](){const t=mn;if(this[t(234)]&&this[t(423)]&&this[t(423)].isReady()&&!this.bufferControllers){this.bufferControllers={};for(let e in this[t(423)][t(414)]){let i=this[t(423)][t(414)][e];const n="".concat(e,t(317))[t(365)](i[t(274)][t(449)],'"');if(s.clRtcDrmDebugLog&&console[t(383)](t(312),n),!Ln[t(408)](n))return console[t(370)](t(372)),!1;let r=this[t(327)][t(350)](n);this[t(398)][e]=new Mn(r,e,this[t(327)]),this.bufferControllers[e].on(t(370),this[t(403)][t(308)](this))}}}[mn(313)](){const t=mn;for(let e in this[t(398)])this[t(398)][e].doAppend()}onBuffer(t){const e=mn;this[e(234)]&&this[e(398)]&&this[e(398)][t.type]&&this[e(398)][t[e(469)]][e(371)](t[e(214)])}[mn(194)](){const t=mn;s[t(251)]&&console.info("[MSE] sourceopen"),this[t(327)][t(185)]!==t(281)&&(this.mediaSource.duration=Number[t(391)],this[t(234)]=!0,"function"==typeof this[t(379)][t(336)]&&this[t(379)].onReady[t(394)](null,this[t(466)]),URL[t(235)](this.url),this[t(382)]())}[mn(241)](){const t=mn;s.clRtcDrmDebugLog&&console[t(383)](t(441)),this.mseReady=!1,this[t(227)]()}[mn(403)](t){const e=mn;console.warn(e(351),t),this.irrecoverableError=!0,this[e(227)](),"function"==typeof this[e(379)][e(266)]&&this[e(379)][e(266)][e(394)](null,t)}constructor(t){const e=mn;super(e(397)),this[e(197)]=!1,this[e(410)]=!0,this[e(466)]=!1,this[e(234)]=!1,this.mseEnded=!1,this[e(379)]=w[e(189)]({},{node:"",mode:"video",debug:!1,onReady:function(){},onError:function(t){}},t),this[e(450)]=typeof this.options[e(450)]===e(302)?h[e(472)](this.options.node):this[e(379)].node,this[e(432)]=t.drm,this.mp4=new Rn(this.drm),this[e(423)]=new Nn(this.node,this[e(375)]),this[e(423)].addTrack(this[e(379)][e(461)]),this[e(423)].on(e(492),this[e(456)].bind(this)),this[e(423)].on(e(205),this[e(382)][e(308)](this)),this.initBrowser()}}function Bn(t,e){const i=On();return(Bn=function(t,e){return i[t-=222]})(t,e)}function On(){const t=["pv","1634635aeNfVS","4rWkceo","1051qHPzyB","314juHkBI","7752096GfpyFE","1023208nKrJjX","2137269uUqtNM","303058KNxeBb","1097196nHglzA"];return(On=function(){return t})()}!function(){const t=Bn,e=On();for(;;)try{if(x(t(228))/1*(-x(t(229))/2)+-x(t(222))/3*(x(t(227))/4)+x(t(226))/5+x(t(224))/6+x(t(223))/7+-x(t(231))/8+x(t(230))/9==409100)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const Fn=Vn;function Vn(t,e){const i=Hn();return(Vn=function(t,e){return i[t-=460]})(t,e)}!function(){const t=Vn,e=Hn();for(;;)try{if(-x(t(471))/1*(-x(t(474))/2)+x(t(479))/3+x(t(473))/4*(x(t(461))/5)+x(t(487))/6+-x(t(467))/7+-x(t(482))/8+-x(t(464))/9==139726)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const Wn="CrsCCAMSEKDc0WAwLAQT1SB2ogyBJEwYv4Tx7gUijgIwggEKAoIBAQC8Xc/GTRwZDtlnBThq8"+Fn(462)+"wyoYOE+M/t1oIbccwlTQ7o+BpV1X6TB7fxFyx1jsBtRsBWphU65w121zqmSiwzZzJ4xsXVQCJ"+Fn(460)+Fn(476)+Fn(480)+Fn(484)+Fn(485)+"7hyskG5ZLAyJMzTvgnV3D8/I5Y6mCFBPb/+/Ri+9bEvquPF3Ff9ip3yEHu9mcQeEYCeGe9zR/27eI5MATX39gYtCnn7dDXVxo4/rCYK0A4VemC3HRai2X3pSGcsKY7+6we7h4IycjqtuGtYg8A"+Fn(475)+"RL9KsD0v7ysBQVdUXEbJotcFz71tI5qc3jwr6GjYIPA3VzusD17PN6AGQniMwxJV12z/EgnUo"+Fn(477),Un=j[Fn(478)](s[Fn(470)](Wn),(t=>t.charCodeAt(0)));class Gn{[Fn(469)](){return this[Fn(488)]}[Fn(483)](){const t=Fn;switch(this[t(488)]){case t(489):return"https://lic.staging.drmtoday.com";case t(465):return t(481);default:return t(466)}}certificate(){return Un}constructor(t){this[Fn(488)]=t}}function Hn(){const t=["development","https://lic.drmtoday.com","462553oMrSQp","Staging","toString","atob","20047HjYCpd","Development","52chMPdC","6mbMcSk","baigovcoURAZcr1d/G0rpREjLdVLG0Gjqk63Gx688W5gh3TKemsK3R1jV0dOfj3e6uV/kTpsN","+vwmV2/NJWxKqHBKdL9JqvOnNiQUF0hDI7Wf8Wb63RYSXKE27Ky31hKgx1wuq7TTWkA+kHnJT","pcFB13osydpD2AaDsgWo5RWJcNf+fzCgtUQx/0Au9+xVm5LQBdv8Ja4f2oiHN3dw","from","146355HhTpSB","UrTEfQxfPR4dJTquE+IDLAi5yeVVxzbAgMBAAE6DGNhc3RsYWJzLmNvbUABEoADMmGXpXg/0q","https://lic.test.drmtoday.com","501688OkVRMl","baseUrl","xUuwokpsqVIHZrJfu62ar+BF8UVUKdK5oYQoiTZd9OzK3kr29kqGGk3lSgM0/p499p/FUL8oH","HzgsJ7Hajdsyzn0Vs3+VysAgaJAkXZ+k+N6Ka0WBiZlCtcunVJDiHQbz1sF9GvcePUUi2fM/h","Production","1063410zFUyaf","name","staging","pQnNI61gzHO42XZOMuxytMm0F6puNHTTqhyY3Z290YqvSDdOB+UY5QJuXJgjhvOUD9+oaLlvT","93365ZJpndd","V382D1oJAM0F/YgCQtNDLz7vTWJ+QskNGi5Dd2qzO4s48Cnx5BLvL4H0xCRSw2Ed6ekHSdrRU","production","2343546YgIYCY"];return(Hn=function(){return t})()}function Zn(t,e){const i=Xn();return(Zn=function(t,e){return i[t-=325]})(t,e)}function Xn(){const t=["1052499bnJBHn","cenc","4222tSxFth","Unsupported SampleAuxInfo version","12980Tusgux","3160ZwXFcU","40030ewyARR","16lkTHRT","1199124lbwxEr","data","105TSrukA","getUint8","12bBEpge","SampleAuxInfo corrupted (postfix not found)","getUint16","error","85265ZYYyUv","buffer","3616548TKdsLX","subarray","byteLength","SampleAuxInfo corrupted"];return(Xn=function(){return t})()}function zn(t,e){const i=jn();return(zn=function(t,e){return i[t-=295]})(t,e)}Gn[Fn(468)]=new Gn(Fn(489)),Gn[Fn(486)]=new Gn(Fn(463)),Gn[Fn(472)]=new Gn(Fn(465)),function(){const t=Zn,e=Xn();for(;;)try{if(x(t(328))/1+-x(t(332))/2*(-x(t(336))/3)+-x(t(338))/4*(-x(t(342))/5)+-x(t(344))/6+-x(t(326))/7*(x(t(333))/8)+x(t(334))/9+x(t(331))/10*(x(t(330))/11)==358550)break;e.push(e.shift())}catch(t){e.push(e.shift())}}(),function(){const t=zn,e=jn();for(;;)try{if(x(t(305))/1*(-x(t(297))/2)+-x(t(295))/3+x(t(310))/4*(x(t(309))/5)+-x(t(304))/6*(x(t(296))/7)+x(t(307))/8*(-x(t(298))/9)+-x(t(301))/10*(x(t(302))/11)+-x(t(300))/12*(-x(t(308))/13)==178039)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const qn=[];let Yn=null,Kn=0;function jn(){const t=["31476hbBsvr","850RxzAPl","4180KczaCN","push","156MUFuvQ","96571jvhWaB","buffer","26232BkewNd","4303YGAqiP","5yhGpFn","1137036pzCnTd","1035942NcoZLh","94073eTaQjy","2bXtEms","414snfiTE","slice"];return(jn=function(){return t})()}const Qn=ir;function Jn(){const t=["Data does not seem to be UTF-16 encoded!","No init data available!","getElementsByTagName","min","14BFNrBA","keystatuseschange","catch","childNodes","internal-error","Failed to reuse previous EME session: ","output-downscaled","expired","bind","5576688EKOFOG","has","length","License acquisition failed with error ","arrayBuffer","apply","CDM error generating license request: ","<Challenge","No PR challenge data!","then","license","createSession","warn","[PR] License fetched:","text/xml","clRtcDrmDebugLog","push","encode","max","json"," is not ","replace","target","rtcdrmerror","update","fromCharCode","subarray","2993694njpqat","4002692oINhTV","Content-Type","1347492MkzfDC","Data has an incorrect length, must be even.","addEventListener","buffer","onFetch","generateRequest","initData","dispatchEvent","atob","No clear key test key provided!","Challenge","New lic will be requested","oct","BYTES_PER_ELEMENT","sessionId","usable for decryption (status: ","[WV] License fetched:","Key ","5MtuOVr","byteLength","744563CKOUzg","load","floor","error","decode","indexOf","info","isSafari","edef8ba979d64acea3c827dcd51d21ed","mediaKeys","Previous lic will be reused","charCodeAt","licenseUrl","status","Failed to update the session: ","log","keyStatuses","temporary","9a04f07998404286ab92e65be0885f95","output-restricted","nodeValue","btoa","message","EME createSession() failed - no DRM available","5977680uUTwUr","getUint16","[PR] Challenge node not found","A128KW","3974463jrELhf","Failed to update the session","stringify","[EME]","delete","No media keys for media element!","set","2nMQfRz"];return(Jn=function(){return t})()}!function(){const t=ir,e=Jn();for(;;)try{if(-x(t(419))/1*(x(t(454))/2)+x(t(495))/3+x(t(496))/4*(-x(t(417))/5)+-x(t(498))/6*(-x(t(459))/7)+x(t(468))/8+-x(t(447))/9+x(t(443))/10==555073)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();let $n={licenseUrl:"",onFetch:void 0};const tr={},er=(t,e,i)=>(void 0===e&&(e=0),void 0===i&&(i=1/0),((t,e,i)=>{const s=ir,n=j[s(511)];e*=n,i*=n;const r=(a=t)instanceof ArrayBuffer?a:a[ir(501)],o=t[s(418)],h=e;var a;let u=_[s(486)](0,_[s(458)](h,o)),c=_[s(458)](u+_[s(486)](i,0),o);return u/=n,c/=n,new j(r,u,c-u)})(t,e,i));function ir(t,e){const i=Jn();return(ir=function(t,e){return i[t-=417]})(t,e)}const sr=t=>{const e=ir;let i="";for(const s of t){let t=s.toString(16);1==t[e(470)]&&(t="0"+t),i+=t}return i};let nr=null;const rr=t=>{const e=ir;return s[e(440)](String[e(493)][e(473)](null,t))[e(489)](/\+/g,"-")[e(489)](/\//g,"_")[e(489)](/=*$/,"")},or=(t,e)=>{const i=ir,s=(t=>{const e=ir,i=JSON.parse((new TextDecoder)[e(423)](t));if(console[e(434)]("CK license request:",i),null===nr)throw new g(e(507));const s=[];for(const t of i.kids){const i={kty:e(510),alg:e(446),kid:t,k:rr(nr)};s[e(484)](i)}return(new TextEncoder)[e(485)](JSON[e(449)]({keys:s}))})(e.message);e[i(490)][i(492)](s)[i(461)]((function(t){const e=i;console[e(422)](e(448),t)}))},hr=t=>{const e=ir,i=s[e(506)](t[e(489)](/-/g,"+")[e(489)](/_/g,"/")),n=new j(i[e(470)]);for(let t=0;t<i.length;++t)n[t]=i[e(430)](t);return n},ar=function(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];return en(void 0,[t,e,...s],void 0,(function*(t,e,i){void 0===i&&(i=!1);const s=ir,n=new Headers(tr);i&&n.append(s(497),s(482));const r={method:"POST",headers:n,body:e},o=yield $n[s(502)]?$n[s(502)](t,r):fetch(t,r);if(!o.ok)throw new g(s(471)+o[s(432)]);return o}))},ur=(t,e)=>{const i=ir;ar($n[i(431)],e[i(441)])[i(477)]((t=>t[i(487)]()))[i(477)]((t=>{const n=i;s[n(483)]&&console.info(n(514),t.license);const r=hr(t[n(478)])[n(501)];e[n(490)][n(492)](r)[n(461)]((t=>{console[n(422)]("Failed to update the session",t)}))}))[i(461)]((e=>{const s=i;t.dispatchEvent(new CustomEvent(s(491),{detail:{message:""+e}})),console[s(422)](e)}))},cr=(t,e)=>{const i=ir,n=((t,e)=>{const i=ir,s=new DOMParser;try{const t=function(t,e,i){void 0===i&&(i=!1);const s=ir;if(!t)return"";let n=t;if(!i&&n.byteLength%2!=0)throw console[s(422)](s(499)),new g(s(455));const r=er(n);let o;if((255===r[0]&&254===r[1]||254===r[0]&&255===r[1])&&(n=r[s(494)](2)),n instanceof ArrayBuffer)o=n;else{const t=new j(n[s(418)]);t[s(453)](er(n)),o=t[s(501)]}const h=_[s(421)](n.byteLength/2),a=new Uint16Array(h),u=new DataView(o);for(let t=0;t<h;t++)a[t]=u[s(444)](2*t,e);return function(t){const e=ir;let i="";for(let s=0;s<t[e(470)];s+=16e3){const n=t[e(494)](s,s+16e3);i+=String[e(493)].apply(null,n)}return i}(a)}(e,!0);if(t[i(424)](i(475))>-1){const e=s.parseFromString(t,i(482))[i(457)](i(508))[0][i(462)][0][i(439)];if(null===e)throw new g("No PR challenge data!");return hr(e)}console[i(480)](i(445))}catch(e){t.dispatchEvent(new CustomEvent(i(491),{detail:{message:""+e}})),console.error(e)}return null})(t,e.message);if(null===n)return t[i(505)](new CustomEvent("rtcdrmerror",{detail:{message:"No PR challenge data!"}})),void console.error(i(476));ar($n[i(431)],n[i(501)],!0)[i(477)]((t=>t[i(472)]()))[i(477)]((n=>{const r=i;s[r(483)]&&console[r(425)](r(481),n),e[r(490)].update(n)[r(461)]((function(e){const i=r;t[i(505)](new CustomEvent(i(491),{detail:{message:i(433)+e}})),console[i(422)](i(448),e)}))}))[i(461)]((e=>{const s=i;t.dispatchEvent(new CustomEvent("rtcdrmerror",{detail:{message:""+e}})),console[s(422)](e)}))},lr=(t,e)=>{const i=ir;ar($n[i(431)],e[i(441)])[i(477)]((t=>{const e=i,n=t.text();return s[e(483)]&&console.info("[FPS] License fetched:",t,n),n}))[i(477)]((t=>{const s=i;e[s(490)][s(492)](hr(t))}))[i(461)]((e=>{const s=i;t.dispatchEvent(new CustomEvent(s(491),{detail:{message:""+e}})),console[s(422)](e)}))},dr=(t,e)=>{tr[t]=e},fr=vn[Qn(426)];let _r=!fr;const vr=new Map;function mr(t){return en(this,void 0,void 0,(function*(){const e=ir;if(null===t[e(504)])throw new g(e(456));const i=t[e(490)];if(null===i)throw new g("No media element available!");const n=i[e(428)];if(null===n)throw new g(e(452));const r=sr(new j(t[e(504)])),o=r+i.id;let h=null;vr[e(469)](o)&&(h=vr.get(o),null!=h&&h.close(),vr[e(451)](o)),s[e(483)]&&console[e(425)](e(450),e(h?429:509));let a=null;try{a=n[e(479)](_r?"persistent-license":"temporary")}catch(t){console[e(434)]("EME createSession(persistent) failed:",t)}if(!a&&_r){_r=!1;try{a=n[e(479)](e(436))}catch(t){console[e(422)]("EME createSession(temporary) failed:",t)}}if(a)if(a[e(500)](e(460),(t=>{const s=e;t[s(490)][s(435)].forEach(((t,e)=>{const n=s;(t===n(466)||t===n(438)||t===n(465)||t===n(463))&&i[n(505)](new CustomEvent(n(491),{detail:{message:n(515)+sr(new j(e))+n(488)+(n(513)+t+")"),keyId:e}}))}))})),fr?a.addEventListener(e(441),lr[e(467)](null,i),!1):-1!==r[e(424)](e(427))?a.addEventListener(e(441),ur[e(467)](null,i),!1):-1!==r[e(424)](e(437))?a[e(500)](e(441),cr[e(467)](null,i),!1):a.addEventListener("message",or[e(467)](null,i),!1),h)try{(yield a[e(420)](h[e(512)]))?vr[e(453)](o,a):i.dispatchEvent(new CustomEvent(e(491),{detail:{message:"Failed to load previous EME session"}}))}catch(t){i[e(505)](new CustomEvent(e(491),{detail:{message:e(464)+t}}))}else a[e(503)](t.initDataType,t[e(504)]).then((()=>{_r&&vr[e(453)](o,a)}))[e(461)]((t=>{const s=e;i[s(505)](new CustomEvent(s(491),{detail:{message:s(474)+t}}))}));else i[e(505)](new CustomEvent(e(491),{detail:{message:e(442)}}))}))}const gr=Vr;function pr(){const t=[" too close to seek, ","fpsCertificateUrl","9880640TWxZrg","H264","ignoreAudio","Unable to create Worker!","createMediaKeys(",", restart required: ","/license-proxy-headerauth/drmtoday/RightsManager.asmx","6236Nwzlef","worker","serverCertificateUrl","serverCertificate","seq",",255]).buffer,idrFrames.push(new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,","ClearKey","No valid DRM config found, call rtcDrmConfigure first.","sessionId","toISOString","indexOf","robustness","isInteger","info","includes","Development","slice","16niaptx"," frame","video/mp4","isArray","Android","end","PlayReady","streamType","1772WtcYWF","]: ","Frame gap: ","nextKeyFrameAllowedTime","use rtcDrmFeedFrame to push frames manually","Error recovery attempted","merchant","FairPlay","requestMediaKeySystemAccess(","pipeThrough","/license-server-fairplay/","isChrome","type","MSE (re)init","const DUMMY_IDR_FRAME_SLICE_HDR0=new Uint8Array([32,0,203]),DUMMY_IDR_FRAME_SLICE_HDR1=new Uint8Array([16,0,50]);","DRM config env value must be one of: ","length","GOP is getting too long, requesting a new key frame","Worker","let brokenFrame=null,idrFrames=[];function initializeDummyFrames(){brokenFrame=new Uint8Array([0,0,0,1,65,154,255","srcObject","RTCRtpScriptTransform","),idrFrames.push(idrFrames[0].slice());let $=new Uint8Array(idrFrames[1]);$.set([16,0,50],27)}let idrPicIdToggle=","now"," to ","join","setServerCertificate","audioCapabilities","lastKeyFrameTime","prevSeqNum"," seeking from ",".experiment","clRtcDrmDebugLog","Server certificate fetch failed with error ","isFirefox","org.w3.clearkey","x-dt-custom-data","jitterBufferTarget","playbackRate","enabled","keyFrameNeeded","createEncodedStreams","wvCertificateUrl","key","sai","Discarding corrupted video frame (too small)",'gle^=1]}function audioTransformFunction($,e){postMessage({streamType:"audio",frame:{timestamp:$.timestamp,data:$.',"H264 is the only supported video codec.","com.microsoft.playready.recommendation"," will be used","DRM config iv must be an instance of 16-byte long Uint8Array.","encryption","0;function generateDummyFrame($){return(brokenFrame||initializeDummyFrames(),$)?brokenFrame:idrFrames[idrPicIdTog","toString","message","status","bytesSinceKey","currentTime","supportsRtpScriptTransform","1585647fRskxG","audioElement","track","sinf","createObjectURL","enqueue","Invalid videoElement, it must be an instance of HTMLVideoElement.","7302558TqFWae","pipeTo","SampleAuxInfo extraction failed (video)","isEdge","keys","not-allowed","rtcdrmerror","btoa","?audioTransformFunction:videoTransformFunction});e.pipeThrough(a).pipeTo(x)}self.RTCTransformEvent&&(self.onrtctr",", a1d1f1 is recommended).","reportDiscontinuity","onFetch","keyId","sessionTypes","). Edge only supports PlayReady, Widevine and ClearKey.","audioEncrypted","audioStartTimestamp","frame","videoStartTimestamp","184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32]).buffer","Duplicate/reordered frame, prev seq: ","ClearKey is not supported by Safari.","bind",") not found in [","DRM config robustness can only be one of: ","persistent-license","postMessage","receiver","get","both","jmuxer","Production","Blob","timestamp","cenc","emeConfig","clear","cbcs-1-9","5iKPdqC","isWindows","PlayReady license acquisition might fail without output protection enabled (sessionId is ","). Chrome only supports Widevine and ClearKey.","mediaBufferMs should be an integer.","size","certificate","prLicenseUrl","fpsLicenseUrl","/license-proxy-widevine/cenc/","4572770OAoUlm","BYTES_PER_ELEMENT","then","SW_SECURE_CRYPTO","ansform=$=>{let e=$.transformer;handleTransform(e.options.operation,e.readable,e.writable)}),onmessage=$=>{keyFra","splice","Safari doesn't support 'cenc'/AES-CTR, use 'cbcs' instead if possible.","videoElement","rtcDrmConfigure did not specify audioElement, audio will be dropped",'audio/mp4; codecs="opus"',"object","Invalid audioElement, it must be an instance of HTMLMediaElement.","keyFrameNeededPosted","debugCreateMediaDump","next","play","6591266VeIbXo","userId","jitterBufferDelayHint",'ame(keyFrameNeeded),e.enqueue($)}function handleTransform($,e,x){let a=new TransformStream({transform:"audio"===$',"dispatchEvent","reduce"," bytes, playback at ","offset","arrayBuffer","waitingForIdr","Widevine","DRM config mediaBufferMs should be an integer.","hwSecurity","authToken","audio"," bytes)","push","licenseUrl","Default transform mode enabled, ","RTCRtpScriptTransform/TransformStream will not be created, ","GET","baseUrl","video","trim","7377TdQrIK","3000","playoutDelayHint","catch","fpsCertificate","POSITIVE_INFINITY","/license-server-fairplay/cert/","DRM config:","streams","mediaBufferMs","log","codec","onmessage","Target video element (","Applying pre-configured certificate (","webkitURL","Discarding corrupted video frame (no Annex B startcode)"," requesting a new key frame (latency ","PlayReady might not support '","No target media element!","URL","set","warn","data","config","isSafari","forEach","setMediaKeys","buffered"," - ","keySystem",'data}}),e.enqueue($)}let keyFrameNeeded=!1;function videoTransformFunction($,e){postMessage({streamType:"video",f',"paused","wvCertificate","a1d1f1","2000","keyFrameRequestInterval","Several DRM configs detected, rtcDrmOnTrack have to be called with target DRM config.","error","238HZxcdH","HW_SECURE_ALL","Invalid DRM type (","buffer","x-dt-auth-token","clRtcDrmCreateMediaDump",'rame:{type:$.type,timestamp:$.timestamp,data:$.data}}),"key"===$.type&&(keyFrameNeeded=!1),$.data=generateDummyFr',"addEventListener",") failed","keyFrameLogCntr","feed","byteLength","kind","purchase","environment","videoCapabilities","requestMediaKeySystemAccess","temporary","). It has to be a string containing a JWT.","value",".. ","string"];return(pr=function(){return t})()}!function(){const t=Vr,e=pr();for(;;)try{if(x(t(543))/1*(x(t(512))/2)+x(t(473))/3*(x(t(568))/4)+-x(t(672))/5*(-x(t(634))/6)+-x(t(536))/7+x(t(560))/8*(x(t(627))/9)+-x(t(682))/10+-x(t(449))/11==932877)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const wr=vn[gr(626)],yr=vn[gr(602)],br=vn[gr(498)],Ar=vn[gr(637)],Sr=vn[gr(579)],Tr=vn.platform,kr=vn[gr(673)],Er=Ar||Sr&&Tr===gr(564),xr=1e6*(yr?82:br?220:120),Rr=yr?5e3:2e3,Ir=yr?1.5:.5;function Cr(t){const e=gr;return typeof t!==e(692)||null===t||t instanceof Element||t instanceof Gn?t:function(t){const e=gr;return!!((null==t?void 0:t[e(515)])instanceof ArrayBuffer&&null!=t&&t[e(683)])}(t)?t[e(559)]():Array[e(563)](t)?t[e(454)](((t,e,i)=>(t[i]=Cr(e),t)),[]):t instanceof w?w[e(638)](t)[e(454)](((e,i)=>(e[i]=Cr(t[i]),e)),{}):t}class Pr{constructor(t){const e=gr;this[e(545)]="",this.licenseUrl="",this[e(503)]="",this[e(669)]=[],this[e(497)]=Cr(t),this[e(664)]=null,this[e(521)]=0,this[e(571)]=Date.now(),this.videoStartTimestamp=0,this.audioStartTimestamp=0,this.prevSeqNum=-1,this[e(596)]=0,this[e(624)]=0,this.keyFrameNeeded=!0,this.keyFrameNeededPosted=!1,this.keyFrameRequestInterval=Rr,this.worker=null}}const Dr=new Map,Nr=new j([60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60]),Mr=new j([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]),Lr=new j([213,251,214,184,46,217,62,78,249,138,228,9,49,238,51,183]);function Br(t){const e=gr;let i=!1;if((t[e(497)].video&&"clear"!==t[e(497)].video[e(619)]&&"HW"===t.config[e(471)][e(554)]||t[e(497)][e(463)]&&t[e(497)][e(463)].encryption!==e(670)&&"HW"===t[e(497)][e(463)][e(554)])&&(i=!0),t.hwSecurity=i,function(t,e){const i=gr;void 0!==e&&(t[i(497)][i(482)]=e),(void 0===t[i(497)][i(482)]||t[i(497)].mediaBufferMs<0)&&(t.config[i(482)]=100,yr?t[i(497)][i(482)]=350:!br&&kr&&(t[i(497)][i(580)]===i(566)||t[i(461)])&&(t[i(497)][i(482)]=1400))}(t,t[e(497)][e(482)]),void 0===t.config.authToken){void 0===t.config[e(450)]&&(t[e(497)][e(450)]=e(525)),void 0===t[e(497)][e(551)]&&(t.config[e(551)]=e(507));const i=s[e(641)](JSON.stringify({userId:t.config[e(450)],sessionId:t[e(497)][e(551)],merchant:t.config[e(574)]}));dr(e(604),i)}else dr(e(516),t.config[e(462)]);for(const i of[t[e(497)].audio,t[e(497)][e(471)]])i&&i[e(619)]!==e(670)&&(i[e(646)]||(i[e(646)]=Mr),i.iv||(i.iv=Lr));t[e(546)]=void 0,t[e(545)]="",t[e(466)]="";const n=t.config[e(526)][e(470)]();var r;if(t[e(497)][e(580)]===e(549)?(t.keySystem=e(603),nr=Nr):t.config.type===e(459)?(t[e(503)]="com.widevine.alpha",kr&&i&&(t[e(503)]+=e(599)),t.config.wvCertificate?t[e(546)]=t[e(497)][e(506)]:t[e(497)][e(610)]?t[e(545)]=t[e(497)][e(610)]:t[e(546)]=t.config[e(526)][e(678)](),t.config.wvLicenseUrl?t[e(466)]=t[e(497)].wvLicenseUrl:t[e(466)]=n+e(681)):t[e(497)][e(580)]===e(566)?(t[e(503)]=e(616),t[e(497)][e(679)]?t.licenseUrl=t[e(497)][e(679)]:t[e(466)]=n+e(542)):t[e(497)].type===e(575)&&(t.keySystem="com.apple.fps",t.config[e(477)]?t[e(546)]=t[e(497)][e(477)]:t[e(497)][e(535)]?t.serverCertificateUrl=t.config[e(535)]:t[e(545)]=n+e(479)+t[e(497)].merchant,t[e(497)][e(680)]?t[e(466)]=t.config.fpsLicenseUrl:t.licenseUrl=n+e(578)),r={licenseUrl:t[e(466)],onFetch:t.config[e(645)]},$n=r,t[e(669)]=[],t.config[e(580)]!==e(575)){t[e(669)][e(465)]({initDataTypes:[e(668)],sessionTypes:["persistent-license",e(529)]});for(const i of[t[e(497)][e(471)],t[e(497)][e(463)]])if(i&&i.encryption!==e(670)){const s=i==t[e(497)][e(471)]?e(471):e(463);let n;t[e(497)][e(580)]===e(459)?n="HW"===i[e(554)]?e(513):e(685):"PlayReady"===t[e(497)][e(580)]&&(n="HW"===i.robustness?e(474):e(508)),s===e(471)?t[e(669)][0][e(527)]=[{contentType:'video/mp4; codecs="avc1.640032"',encryptionScheme:"cenc"===i[e(619)]?e(668):"cbcs-1-9",robustness:n||void 0}]:t[e(669)][0][e(595)]=[{contentType:e(691),encryptionScheme:i[e(619)]===e(668)?"cenc":e(671),robustness:n||void 0}]}}else t[e(669)]=[{initDataTypes:[e(630)],videoCapabilities:[{contentType:e(562),robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:e(639),sessionTypes:["temporary"]}];s[e(600)]&&console.info(e(480),t)}function Or(t){const e=gr;s[e(600)]&&console[e(556)](e(581));let i=t[e(497)].videoElement;(!t[e(497)][e(471)]||t.config[e(471)][e(619)]===e(670))&&(i=t.config.audioElement),t[e(664)]=null;const n=!t.ignoreAudio&&t[e(497)][e(463)]&&"clear"!==t[e(497)].audio[e(619)],r=t[e(497)][e(471)]&&t.config.video[e(619)]!==e(670);t[e(624)]=0,t[e(608)]=!0,t.keyFrameNeededPosted=!1,t[e(509)]=Rr,t[e(652)]=0,t[e(650)]=0,t[e(597)]=-1,t[e(596)]=0,t.jmuxer=new Ln({node:i,mode:n?e(r?663:463):"video",fps:60,drm:t}),br&&t[e(497)].videoElement&&t[e(497)][e(689)][e(448)]()[e(684)]((()=>{}))[e(476)]((()=>{}))}function Fr(t,e,i){const n=gr;if(t[n(497)][n(471)]&&"clear"===t.config[n(471)][n(619)])return null==i||i[n(632)](e),!1;const r=Date[n(591)]();if(e.type===n(611)){const i=s[n(600)];++t[n(521)]<(i?Number[n(478)]:5)&&(console[n(556)]((new Date)[n(552)]().slice(11,-1)+" "+e[n(580)]+", "+(e[n(496)].byteLength+n(455)+t[n(497)][n(689)][n(625)])),i&&1===t[n(521)]&&function(t,e,i){void 0===e&&(e=64),void 0===i&&(i=64);const s=gr,n=new j(t[s(496)]);let r="",o=0;for(let t=0;t<e&&t<n[s(584)];++t)r+=(n[t]<16?"0":"")+n[t].toString(16)+" ";if(o<n[s(584)])for(o<n[s(584)]-i&&(r+=s(532),o=n[s(584)]-i);o<n[s(584)];o++)r+=(n[o]<16?"0":"")+n[o][s(621)](16)+" ";console.info("["+((t[s(580)]||s(463))+s(561))+s(569)+r[s(472)]())}(e,128,8)),t[n(608)]=!1,t[n(624)]=0,t[n(571)]=r+t[n(509)]}return t[n(624)]+=e.data[n(523)],!t[n(608)]&&t[n(624)]>xr&&(console[n(556)](n(585)),t[n(608)]=!0),t.jmuxer&&(function(t,e){const i=gr;0===t[i(652)]&&(t[i(652)]=e[i(667)],t[i(509)]=Rr,t[i(571)]=Date[i(591)]()+2e3);let n=null,r=!1;if(e.data[i(523)]<=4)console[i(495)](i(613)),r=!0;else{const s=new j(e[i(496)],0,4);0!=s[0]||0!=s[1]||0!=s[2]||1!=s[3]?(console[i(495)](i(489)),r=!0):(n=function(t,e){const i=Zn,s=new DataView(t[i(335)]),n=t.data[i(346)]-2,r=s[i(340)](n);if(r<n){let t=n-r;if(69!==s[i(337)](n-1))return console[i(341)](i(339)),null;if(s.getUint8(t++)>>>4!=1)return console[i(341)](i(329)),null;const o=new j(r-2);let h=0,a=0;for(;t<n-1;){let e=s.getUint8(t++);a>1&&3===e&&(a=0,e=s.getUint8(t++)),0!==e?a=0:++a,o[h++]=e}const u=new DataView(o[i(343)]),c=e===i(327)?16:0,l=c+2+6*u.getUint16(c);return l+2>h?(console.error(i(325)),null):{sai:o[i(345)](0,l),offset:n-r,seq:u.getUint16(l)}}return null}(e,t[i(497)][i(471)][i(619)]),!n&&(console.warn(i(636)),r=!0))}if(n)if(-1===t[i(597)]){if(e[i(580)]!==i(611))return 0;t[i(597)]=n[i(547)]}else{let o=n.seq-t[i(597)];if(o<-32767&&(o+=65536),o<=0)return s[i(600)]&&console[i(495)](i(654)+t[i(597)]+", curr: "+n[i(547)]),0;o>1&&(r=e[i(580)]!==i(611),console[i(495)](i(570)+t[i(597)]+i(502)+n[i(547)]+i(541)+r)),t.prevSeqNum=n[i(547)]}let o=0;r&&!t[i(664)][i(458)]&&(o=-1,t[i(664)][i(644)]());const h=(e[i(667)]-t[i(652)])/9e4;return n&&t[i(664)][i(522)]({video:new j(e.data,0,n[i(456)]),videoSampleAuxInfo:n[i(612)],timestamp:h})<0&&(o=-1,console[i(495)](i(573)),Or(t)),o>=0&&"key"===e[i(580)]&&(t[i(596)]=h,console[i(483)]((new Date)[i(552)]()[i(559)](11,-1)+" kf at "+h+", playback at "+t[i(497)].videoElement[i(625)])),o}(t,e)<0?t[n(608)]=!0:function(t){const e=gr,i=t.config[e(689)];if(!i||i[e(501)][e(584)]<1||i[e(505)]||i[e(625)]<Ir)return;const n=t[e(497)].mediaBufferMs;if(void 0===n||n<0)throw new g("targetLatency not set!");const r=i[e(501)][e(565)](i[e(501)][e(584)]-1),o=1e3*(r-i[e(625)])|0;if(!t[e(649)]&&function(t,e,i){const s=gr;let n;n=e<3*i>>>2?.875:e<=i?1:e<7*i>>>2?1.125:e<9*i>>>2?1.25:e<11*i>>>2?1.375:1.5,n!==t.playbackRate&&(t[s(606)]=n)}(i,o,n),!(o<n+50||o<5*n>>>2))if(t.lastKeyFrameTime>i[e(625)]+.1){const o=1e3*(r-t[e(596)])|0;o>40&&o>n-100?(s[e(600)]&&console.info((new Date).toISOString().slice(11,-1)+e(598)+(i[e(625)]+e(592)+t[e(596)]+" (")+(t.lastKeyFrameTime-i[e(625)])+")"),i[e(625)]=t[e(596)]):console[e(483)]((new Date)[e(552)]().slice(11,-1)+e(534)+o)}else!t[e(608)]&&Date[e(591)]()>t[e(571)]&&o>n+100&&o>3*n>>>1&&(s[e(600)]&&console[e(556)]((new Date).toISOString()[e(559)](11,-1)+e(490)+o+" ms)"),t[e(608)]=!0,t[e(509)]<16e3&&(t[e(509)]<<=1))}(t)),i?(!t[n(608)]||!Er)&&(e[n(496)]=function(t){return!Yn&&function(){const t=zn;Yn=new j([0,0,0,1,65,154,255,255]).buffer,qn[t(303)](new j([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32])[t(306)]),qn[t(303)](qn[0][t(299)](0)),new j(qn[1]).set([16,0,50],27)}(),t?Yn:(Kn^=1,qn[Kn])}(t[n(608)]),i[n(632)](e)):t[n(608)]!=t[n(445)]&&(t.worker&&t[n(544)][n(660)](t[n(608)]),t[n(445)]=t[n(608)]),t[n(608)]}function Vr(t,e){const i=pr();return(Vr=function(t,e){return i[t-=445]})(t,e)}function Wr(t,e,i){const s=gr;return t[s(497)][s(463)]&&t[s(497)].audio[s(619)]!==s(670)?e[s(496)][s(523)]>0&&function(t,e){const i=gr;var s;if(!t.jmuxer||t[i(538)])return 0;0===t[i(650)]&&(t[i(650)]=e[i(667)]);const n=(e[i(667)]-t.audioStartTimestamp)/48e3;if("cbcs"===(null===(s=t.config[i(463)])||void 0===s?void 0:s[i(619)]))return t[i(664)][i(522)]({audio:new j(e[i(496)]),timestamp:n});const r=function(t){const e=Zn,i=new DataView(t.data),s=t.data[e(346)]-2,n=i.getUint16(s);if(n<s){let t=s-n;if(69!==i[e(337)](s-1))return console[e(341)](e(339)),null;if(i[e(337)](t++)>>>4!=1)return console[e(341)](e(329)),null;const r=new j(n-2);let o=0;for(;t<s-1;){const s=i[e(337)](t++);if(r[o++]=s,o>=16)break}return{sai:r,offset:s-n}}return null}(e);r?t[i(664)][i(522)]({audio:new j(e[i(496)],0,r[i(456)]),audioSampleAuxInfo:r[i(612)],timestamp:n}):console[i(511)]("SampleAuxInfo extraction failed (audio)")}(t,e):i&&i[s(632)](e),!1}function Ur(t){const e=gr;if(!t||typeof t!==e(692))throw new b("Invalid config argument type, DRM config must be an object.");if(!(t[e(689)]instanceof HTMLVideoElement))throw new b(e(633));if(t[e(628)]&&!(t.audioElement instanceof HTMLMediaElement))throw new b(e(693));if(void 0!==t[e(482)]&&!Number[e(555)](t[e(482)]))throw new b(e(460));let i=!1,n=!1,r=!1;const o=["cbcs",e(668),e(670)],h=["SW","HW"];for(const s of[t[e(471)],t[e(463)]])if(s){if(!o[e(557)](s[e(619)]))throw new RangeError("DRM config encryption value must be one of: "+o[e(593)](", "));if(br&&"cenc"===s.encryption)throw new RangeError(e(688));if(s[e(619)]!==e(670)){if(n=!0,s.keyId){if(!(s[e(646)]instanceof j)||16!==s.keyId[e(584)])throw new b("DRM config keyId must be an instance of 16-byte long Uint8Array.");r=!0}else if(br)throw new ReferenceError(e(655));if(s.iv&&(!(s.iv instanceof j)||16!==s.iv.length))throw new b(e(618));if(s[e(554)]&&!h[e(557)](s.robustness))throw new RangeError(e(658)+h[e(593)](", "));if(s===t[e(471)]&&s[e(484)]!==e(537))throw new RangeError(e(615));br&&s===t.audio&&"opus"===s.codec&&(i=!0,console.warn("Safari does not support Opus, audio will not be rendered.")),"PlayReady"===t[e(580)]&&(s[e(619)]!==e(668)&&console[e(495)](e(491)+s[e(619)]+"', it's safer to use 'cbcs' instead."),void 0===t.sessionId||t.sessionId[e(557)]("f1")||console.warn(e(674)+t.sessionId+e(643)))}}if(n){const i=[Gn[e(558)],Gn.Staging,Gn[e(665)]];if(!i.includes(t[e(526)]))throw new RangeError(e(583)+i.join(", "));if(t[e(462)]&&typeof t[e(462)]!==e(533))throw new b("Invalid authToken type ("+typeof t[e(462)]+e(530));if(t.type)if(br){if(t[e(580)]!==e(575))throw new RangeError(e(514)+t[e(580)]+"). Safari only supports FairPlay.")}else if(Sr){if(t.type!==e(459)&&"ClearKey"!==t[e(580)])throw new RangeError("Invalid DRM type ("+t.type+e(675))}else if(Ar&&t[e(580)]!==e(566)&&"Widevine"!==t[e(580)]&&"ClearKey"!==t[e(580)])throw new RangeError(e(514)+t.type+e(648))}void 0!==t.debugLog&&(s[e(600)]=t.debugLog),void 0!==t[e(446)]&&(s[e(517)]=t[e(446)]);let a=Dr.get(t[e(689)]);!a&&(a=new Pr(t),Dr[e(494)](t[e(689)],a)),a.enabled=n,a[e(538)]=i,a[e(649)]=!i&&a[e(497)][e(463)]&&a[e(497)].audio.encryption!==e(670),n&&(a[e(497)].type||(a[e(497)][e(580)]=e(br?575:459)),r||a[e(497)][e(580)]===e(549)||(a[e(497)][e(580)]=e(549)),Br(a),function(t){en(this,void 0,void 0,(function*(){const e=Vr;var i,n;let r=t[e(497)][e(689)];if((!t[e(497)][e(471)]||t[e(497)][e(471)].encryption===e(670))&&(r=t[e(497)][e(628)]),!r)throw new g(e(492));r.src="",r[e(588)]=null,yield r.setMediaKeys(null);let o=null;try{o=yield Ll[e(528)](t[e(503)],t.emeConfig)}catch(t){}if(!o&&t[e(669)][0]){const s=null===(i=t[e(669)][0][e(647)])||void 0===i?void 0:i[e(553)](e(659));if(void 0!==s&&s>=0){null===(n=t.emeConfig[0].sessionTypes)||void 0===n||n[e(687)](s,1);try{o=yield Ll[e(528)](t[e(503)],t[e(669)])}catch(t){}}}if(!o){const i=e(576)+t[e(503)]+e(520);return r.dispatchEvent(new CustomEvent(e(640),{detail:{message:i}})),void console[e(511)](i)}let h=null;try{h=yield o.createMediaKeys()}catch(t){}if(!h){const i=e(540)+t[e(503)]+e(520);return r[e(453)](new CustomEvent("rtcdrmerror",{detail:{message:i}})),void console[e(511)](i)}if(t.serverCertificate)s.clRtcDrmDebugLog&&console[e(556)](e(487)+t[e(546)][e(523)]+e(464)),yield h[e(594)](t[e(546)]);else if(t.serverCertificateUrl){const i={method:e(469)},n=t.serverCertificateUrl;try{const o=yield t[e(497)].onFetch?t.config[e(645)](n,i):fetch(n,i);if(!o.ok){const t=e(601)+o[e(623)];return void r[e(453)](new CustomEvent(e(640),{detail:{message:t}}))}const a=yield o[e(457)]();s.clRtcDrmDebugLog&&console[e(556)]("Fetched certificate from "+n+", "+a[e(523)]+" bytes"),yield h[e(594)](a)}catch(t){const i=t.name+": "+t[e(622)];return console.error(i),void r[e(453)](new CustomEvent(e(640),{detail:{message:i}}))}}yield r[e(500)](h),r[e(519)]("encrypted",mr),Or(t)}))}(a)),a[e(497)][e(689)][e(519)](e(448),(function(){const t=e;a[t(497)][t(689)][t(625)]>.5&&(a[t(571)]=Date.now())}))}const Gr=gr(582)+gr(587)+gr(548)+gr(653)+gr(590)+gr(620)+gr(614)+gr(504)+gr(518)+gr(452)+gr(642)+gr(686)+"meNeeded=$.data};";function Hr(t){const e=gr;if(0===Dr[e(677)])throw new b(e(550));let i;if(t&&t[e(689)])i=t[e(689)];else{if(1!==Dr.size)throw new b(e(510));i=Dr[e(638)]()[e(447)]()[e(531)]}const s=Dr[e(662)](i);if(!s){let t="";throw Dr[e(499)](((e,i)=>{t+=i.id+", "})),t=t.slice(0,-2),new b(e(486)+i.id+e(657)+t+"]")}return s}function Zr(t,e){const i=gr;if(t&&t[i(497)][i(689)]){const s=t[i(497)][i(689)];if(s[i(501)].length>0){const t=s.buffered[i(565)](s[i(501)][i(584)]-1)-s[i(625)];e.playoutDelayHint=e.jitterBufferDelayHint=e.jitterBufferTarget=t}u(Zr,1e3,t,e)}}const Xr=at.get("View");Xr.setLevel(at.DEBUG);const zr={metadata:!1,enableDRM:!1,disableVideo:!1,disableAudio:!1,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};t.Director=Ps,t.Logger=at,t.PeerConnection=rs,t.Publish=class extends Zs{async connect(t){void 0===t&&(t=Js);const e=Gs.object({sourceId:Gs.string(),stereo:Gs.boolean(),dtx:Gs.boolean(),absCaptureTime:Gs.boolean(),dependencyDescriptor:Gs.boolean(),mediaStream:Gs.alternatives().try(Gs.array().items(Gs.object()),Gs.object()),bandwidth:Gs.number(),metadata:Gs.boolean(),disableVideo:Gs.boolean(),disableAudio:Gs.boolean(),codec:Gs.string().valid(...w.values(Ji)),simulcast:Gs.boolean(),scalabilityMode:Gs.string(),peerConfig:Gs.object(),record:Gs.boolean(),events:Gs.array().items(Gs.string().valid("active","inactive","viewercount")),priority:Gs.number()}),{error:i,value:s}=e.validate(t);i&&Qs.warn(i,s),this.options=v(d(d({},Js),t),{peerConfig:d(d({},Js.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.options.metadata=this.options.metadata&&this.options.codec===Ji.H264&&!this.options.disableVideo,await this.initConnection({migrate:!1})}async reconnect(t){var e,i;this.options.mediaStream=null!=(i=null==(e=this.webRTCPeer)?void 0:e.getTracks())?i:this.options.mediaStream,super.reconnect(t)}async replaceConnection(){var t,e;Qs.info("Migrating current connection"),this.options.mediaStream=null!=(e=null==(t=this.webRTCPeer)?void 0:t.getTracks())?e:this.options.mediaStream,await this.initConnection({migrate:!0})}async record(){var t;this.recordingAvailable?(this.options.record=!0,await(null==(t=this.signaling)?void 0:t.cmd("record")),Qs.info("Broadcaster start recording")):Qs.error("Record not available")}async unrecord(){var t;this.recordingAvailable?(this.options.record=!1,await(null==(t=this.signaling)?void 0:t.cmd("unrecord")),Qs.info("Broadcaster stop recording")):Qs.error("Unrecord not available")}stop(){var t;super.stop(),null==(t=this.worker)||t.terminate(),this.worker=null}async initConnection(t){var e,i;let s,n;if(Qs.debug("Broadcast option values: ",this.options),this.stopReconnection=!1,!this.options.mediaStream)throw Qs.error("Error while broadcasting. MediaStream required"),new g("MediaStream required");if(!t.migrate&&this.isActive())throw Qs.warn("Broadcast currently working"),new g("Broadcast currently working");try{n=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==n?void 0:n.iceServers,this.options.peerConfig.encodedInsertableStreams=this.options.metadata}catch(t){throw Qs.error("Error generating token."),t instanceof Es&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!n)throw Qs.error("Error while broadcasting. Publisher data required"),new g("Publisher data required");const r=Fs(n.jwt);if(this.streamName=r.millicast.streamName,this.recordingAvailable=r[Ws.atob("bWlsbGljYXN0")].record,this.options.record&&!this.recordingAvailable)throw Qs.error("Error while broadcasting. Record option detected but recording is not available"),new g("Record option detected but recording is not available");const o=new Ss({streamName:this.streamName,url:"".concat(n.urls[0],"?token=").concat(n.jwt)}),h=t.migrate?new rs:this.webRTCPeer;await h.createRTCPeer(this.options.peerConfig,es),null==(e=this.stopReemitingWebRTCPeerInstanceEvents)||e.call(this),null==(i=this.stopReemitingSignalingInstanceEvents)||i.call(this),this.stopReemitingWebRTCPeerInstanceEvents=Ct(h,this,[ss.connectionStateChange]),this.stopReemitingSignalingInstanceEvents=Ct(o,this,[As]);const a=h.getRTCLocalSDP(this.options),u=o.connect();s=await Promise.all([a,u]);const c=s[0];this.options.metadata&&(this.worker||(this.worker=new js),this.getRTCPeerConnection().getSenders().forEach((t=>{if(qs)t.transform=new RTCRtpScriptTransform(this.worker,{name:"senderTransform",codec:this.options.codec});else if(zs){const{readable:e,writable:i}=t.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-sender",codec:this.options.codec,readable:e,writable:i},[e,i])}})));let l=this.signaling;this.signaling=o;const d=this.signaling.publish(c,this.options),f=h.peer.setLocalDescription(h.sessionDescription);s=await Promise.all([d,f]);let _=s[0];!this.options.disableVideo&&this.options.bandwidth>0&&(_=h.updateBandwidthRestriction(_,this.options.bandwidth)),await h.setRTCRemoteSDP(_),Qs.info("Broadcasting to streamName: ",this.streamName);let v=this.webRTCPeer;this.webRTCPeer=h,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ss.connectionStateChange,(t=>{var e,i;["connected","disconnected","failed","closed"].includes(t)&&(null==(e=null==l?void 0:l.close)||e.call(l),null==(i=null==v?void 0:v.closeRTCPeer)||i.call(v),l=v=null)}))}sendMetadata(t,e){var i;if(void 0===e&&(e="d40e38ea-d419-4c62-94ed-20ac37b4e4fa"),null!=(i=this.options)&&i.metadata&&this.worker)this.worker.postMessage({action:"metadata-sei-user-data-unregistered",uuid:e,payload:t});else{let t="Could not send metadata due to:";this.options?this.options.metadata?this.worker||(t+="\n- Stream not being published."):(t+="\n- Metadata option is not enabled.",this.options.codec!==Ji.H264&&(t+="\n- Incompatible codec. Only H264 available."),this.options.disableVideo&&(t+="\n- Video disabled.")):t+="\n- Stream not being published.",Qs.warn(t)}}constructor(t,e,i=!0){t&&Qs.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,e,Qs,i)}},t.Signaling=Ss,t.View=class extends Zs{async connect(t){void 0===t&&(t=zr),this.options=v(d(d({},zr),t),{peerConfig:d(d({},zr.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.eventQueue.length=0,await this.initConnection({migrate:!1})}async select(t){void 0===t&&(t={}),Xr.debug("Viewer select layer values: ",t),await this.signaling.cmd("select",{layer:t}),Xr.info("Connected to streamName: ",this.streamName)}async addRemoteTrack(t,e){Xr.info("Viewer adding remote track",t);const i=await this.webRTCPeer.addRemoteTrack(t,e);for(const t of e)t.addTrack(i.receiver.track);return i}async project(t,e){for(const t of e){if(!t.trackId&&!t.media)throw Xr.error("Error in projection mapping, trackId or mediaId must be set"),new g("Error in projection mapping, trackId or mediaId must be set");const e=this.webRTCPeer.getRTCPeer();if(t.mediaId&&!e.getTransceivers().find((e=>e.mid===t.mediaId.toString())))throw Xr.error("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers")),new g("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers"))}Xr.debug("Viewer project source: layer mappings: ",t,e),await this.signaling.cmd("project",{sourceId:t,mapping:e}),Xr.info("Projection done")}async unproject(t){Xr.debug("Viewer unproject mediaIds: ",t),await this.signaling.cmd("unproject",{mediaIds:t}),Xr.info("Unprojection done")}async replaceConnection(){Xr.info("Migrating current connection"),await this.initConnection({migrate:!0})}stop(){var t,e;super.stop(),null==(t=this.drmOptionsMap)||t.clear(),this.DRMProfile=null,null==(e=this.worker)||e.terminate(),this.worker=null,this.payloadTypeCodec={},this.tracksMidValues={},this.eventQueue.length=0}async initConnection(t){var e;let i,s;if(Xr.debug("Viewer connect options values: ",this.options),this.stopReconnection=!1,!t.migrate&&this.isActive())throw Xr.warn("Viewer currently subscribed"),new g("Viewer currently subscribed");try{s=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==s?void 0:s.iceServers,this.options.peerConfig.encodedInsertableStreams=zs&&(this.options.enableDRM||this.options.metadata)}catch(t){throw Xr.error("Error generating token."),t instanceof Es&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!s)throw Xr.error("Error while subscribing. Subscriber data required"),new g("Subscriber data required");const n=Fs(s.jwt);this.streamName=n.millicast.streamName;const r=new Ss({streamName:this.streamName,url:"".concat(s.urls[0],"?token=").concat(s.jwt)});s.subscriberToken&&(this.subscriberToken=s.subscriberToken);const o=t.migrate?new rs:this.webRTCPeer;await o.createRTCPeer(this.options.peerConfig),null==(e=this.stopReemitingWebRTCPeerInstanceEvents)||e.call(this),this.stopReemitingWebRTCPeerInstanceEvents=Ct(o,this,w.values(ss).filter((t=>t!==ss.track))),this.options.metadata&&(this.worker||(this.worker=new js),this.worker.onmessage=t=>{if("metadata"===t.data.event){const e=new TextDecoder,i=t.data.metadata;if(i.mid=t.data.mid,i.track=this.tracksMidValues[t.data.mid],i.uuid){const t=i.uuid;i.uuid=t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),""),i.uuid=i.uuid.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}if(i.timecode&&(i.timecode=new Date(e.decode(i.timecode))),i.unregistered){const t=e.decode(i.unregistered);try{const e=JSON.parse(t);i.unregistered=e}catch(t){Xr.info("The content could not be converted to JSON, returning raw bytes instead")}}this.emit("metadata",i),this.emit("onMetadata",i)}}),o.on(ss.track,(t=>{this.isMainStreamActive?this.onTrackEvent(t):this.eventQueue.push(t)})),r.on(As,(async t=>{if(this.isMainStreamActive||"active"!==t.name)"inactive"===t.name&&this.isMainStreamActive&&this.mainSourceId===t.data.sourceId&&(this.isMainStreamActive=!1),this.emit(As,t);else{if(this.mainSourceId=t.data.sourceId,!this.DRMProfile&&t.data.encryption){const t=await this.tokenGenerator();t.drmObject&&(this.DRMProfile=t.drmObject)}for(this.emit(As,t),this.isMainStreamActive=!0;this.eventQueue.length>0;)this.onTrackEvent(this.eventQueue.shift())}}));const h=o.getRTCLocalSDP(v(d({},this.options),{stereo:!0})),a=r.connect();i=await Promise.all([h,a]);const c=i[0];let l=this.signaling;this.signaling=r;const f=this.signaling.subscribe(c,v(d({},this.options),{vad:this.options.multiplexedAudioTracks>0})),_=o.peer.setLocalDescription(o.sessionDescription);i=await Promise.all([f,_]);const m=i[0];this.payloadTypeCodec=ji.getCodecPayloadType(m),await o.setRTCRemoteSDP(m),Xr.info("Connected to streamName: ",this.streamName);let p=this.webRTCPeer;this.webRTCPeer=o,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ss.connectionStateChange,(t=>{var e,i;"connected"===t?u((()=>{var t,e;null==(t=null==l?void 0:l.close)||t.call(l),null==(e=null==p?void 0:p.closeRTCPeer)||e.call(p),l=p=null,Xr.info("Current connection migrated")}),1e3):["disconnected","failed","closed"].includes(t)&&(null==(e=null==l?void 0:l.close)||e.call(l),null==(i=null==p?void 0:p.closeRTCPeer)||i.call(p),l=p=null)}))}onTrackEvent(t){var e,i,n;if(this.tracksMidValues[null==(e=t.transceiver)?void 0:e.mid]=t.track,this.isDRMOn){const e=t.transceiver.mid,i=this.getDRMConfiguration(e);try{!function(t,e){const i=gr;var n,r;const o=t[i(629)][i(524)];"video"===o&&(t[i(661)][i(475)]=t[i(661)][i(451)]=t[i(661)][i(605)]=0);const h=Hr(e),a=h[i(497)].videoElement,u=h[i(497)][i(628)];if(h[i(607)]){if(h[i(497)].customTransform)s.clRtcDrmDebugLog&&console[i(556)](i(468)+i(572));else if(s[i(600)]&&console[i(556)](i(467)+(i(wr?589:609)+i(617))),wr){if(h[i(544)]=function(t){const e=gr,i=s[e(493)]||s[e(488)],n=s[e(666)],r=s[e(586)];if(!(i&&n&&r&&t))return null;const o=new n([t]);return new r(i[e(631)](o))}(Gr),null==h[i(544)])throw new g(i(539));h[i(544)][i(485)]=t=>{const e=i;t[e(496)][e(567)]===e(471)?Fr(h,t[e(496)].frame,null):Wr(h,t[e(496)][e(651)],null)},t[i(661)].transform=new RTCRtpScriptTransform(h.worker,{operation:o})}else{const e=o===i(471)?Fr:Wr,s={drm:h,transform:(t,i)=>{e(h,t,i)}},n=t.receiver.createEncodedStreams(),r=new TransformStream({transform:s.transform[i(656)](s)}),{readable:a,writable:u}=n;a[i(577)](r)[i(635)](u)}if("audio"===o&&(null===(n=h[i(497)][i(463)])||void 0===n?void 0:n.encryption)===i(670)){if(!u)return void console.warn(i(690));u[i(588)]!==t[i(481)][0]&&(u[i(588)]=t[i(481)][0]),h[i(497)].videoElement&&(t[i(661)][i(475)]=t[i(661)].jitterBufferDelayHint=t[i(661)][i(605)]=h[i(497)][i(482)],Zr(h,t[i(661)]))}else"video"===o&&"clear"===(null===(r=h.config[i(471)])||void 0===r?void 0:r[i(619)])&&a[i(588)]!==t[i(481)][0]&&(a.srcObject=t.streams[0])}else a[i(588)]!==t[i(481)][0]&&(a.srcObject=t[i(481)][0])}(t,i)}catch(t){Xr.error("Failed to apply DRM on media Id:",e,"error is: ",t),this.emit("error",new g("Failed to apply DRM on media Id: "+e+" error is: "+t))}this.worker||(this.worker=new js),this.worker.addEventListener("message",(t=>{"complete"===t.data.event&&function(t,e,i){const s=gr,n=Hr(i);t[s(580)]?Fr(n,t,e):Wr(n,t,e)}(t.data.frame,null,i)}))}if(this.options.metadata)if(qs)t.receiver.transform=new RTCRtpScriptTransform(this.worker,{name:"receiverTransform",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(i=t.transceiver)?void 0:i.mid});else if(zs){const{readable:e,writable:i}=t.receiver.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-receiver",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(n=t.transceiver)?void 0:n.mid,readable:e,writable:i},[e,i])}this.emit(ss.track,t)}getDRMConfiguration(t){return this.drmOptionsMap?this.drmOptionsMap.get(t):null}async onRtcDrmFetch(t,e){return e.headers||(e.headers=new Headers),e.headers.get("x-dt-custom-data")&&e.headers.delete("x-dt-custom-data"),this.subscriberToken?e.headers.append("Authorization","Bearer ".concat(this.subscriberToken)):Xr.warn("onRtcDrmFetch: no subscriberToken"),fetch(t,e)}configureDRM(t){if(!t)throw new g("Required DRM options is not provided");this.drmOptionsMap||(this.drmOptionsMap=new Map);const e={merchant:"dolby",environment:Gn.Production,customTransform:this.options.metadata,videoElement:t.videoElement,audioElement:t.audioElement,video:{codec:"H264",encryption:"cbcs",keyId:$s(t.videoEncryptionParams.keyId),iv:$s(t.videoEncryptionParams.iv)},audio:{codec:"opus",encryption:"clear"},onFetch:this.onRtcDrmFetch.bind(this)};t.mediaBufferMs&&(e.mediaBufferMs=t.mediaBufferMs),this.DRMProfile&&(this.DRMProfile.playReadyUrl&&(e.prLicenseUrl=this.DRMProfile.playReadyUrl),this.DRMProfile.widevineUrl&&(e.wvLicenseUrl=this.DRMProfile.widevineUrl),this.DRMProfile.fairPlayUrl&&(e.fpsLicenseUrl=this.DRMProfile.fairPlayUrl),this.DRMProfile.fairPlayCertUrl&&(e.fpsCertificateUrl=this.DRMProfile.fairPlayCertUrl));try{Ur(e),this.drmOptionsMap.set(t.videoMid,e),t.audioMid&&this.drmOptionsMap.set(t.audioMid,e),e.videoElement.addEventListener("rtcdrmerror",(t=>{Xr.error("DRM error: ",t.detail.message,"in video element:",e.videoElement.id),this.emit("error",new g(t.detail.message))}))}catch(e){Xr.error("Failed to configure DRM with options:",t,"error is:",e)}}removeDRMConfiguration(t){var e;null==(e=this.drmOptionsMap)||e.delete(t)}get isDRMOn(){return!!this.drmOptionsMap&&this.drmOptionsMap.size>0}exchangeDRMConfiguration(t,e){const i=this.getDRMConfiguration(t),s=this.getDRMConfiguration(e);if(null===i)throw new g("No DRM configuration found for "+t);if(null===s)throw new g("No DRM configuration found for "+e);tn(i.video,s.video,"keyId"),tn(i.video,s.video,"iv");try{Ur(i)}catch(t){Xr.error("Failed to configure DRM with options:",i,"error is:",t)}try{Ur(s)}catch(t){Xr.error("Failed to configure DRM with options:",s,"error is:",t)}}constructor(t,e,i=null,s=!0){t&&Xr.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,e,Xr,s),this.payloadTypeCodec={},this.tracksMidValues={},this.drmOptionsMap=null,this.eventQueue=[],this.isMainStreamActive=!1,i&&(this.on(ss.track,(t=>{i.srcObject=t.streams[0]})),Xr.warn("The mediaElement property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, do this in either the `track` or the `active` broadcast event."))}},w.defineProperty(t,Ao.toStringTag,{value:"Module"})}))})),Yl=cr((t=>{"use strict";function e(){const t=ql();return e=function(){return t},t}r(),w.defineProperty(t,"__esModule",{value:!0}),function(t,e){for(var i in e)w.defineProperty(t,i,{enumerable:!0,get:e[i]})}(t,{Director:function(){return e().Director},View:function(){return e().View}})})),Kl=cr(((t,e)=>{r(),e.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Ql=cr(((t,e)=>{r(),e.exports=function(t,e){var i=e[0],s=e[1],n=e[2],r=e[3],o=i+i,h=s+s,a=n+n,u=i*o,c=s*o,l=s*h,d=n*o,f=n*h,_=n*a,v=r*o,m=r*h,g=r*a;return t[0]=1-l-_,t[1]=c+g,t[2]=d-m,t[3]=0,t[4]=c-g,t[5]=1-u-_,t[6]=f+v,t[7]=0,t[8]=d+m,t[9]=f-v,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Jl=cr(((t,e)=>{r(),e.exports=function(t,e,i){var s,n,r,o=i[0],h=i[1],a=i[2],u=_.sqrt(o*o+h*h+a*a);if(_.abs(u)<1e-6)return null;return o*=u=1/u,h*=u,a*=u,s=_.sin(e),n=_.cos(e),r=1-n,t[0]=o*o*r+n,t[1]=h*o*r+a*s,t[2]=a*o*r-h*s,t[3]=0,t[4]=o*h*r-a*s,t[5]=h*h*r+n,t[6]=a*h*r+o*s,t[7]=0,t[8]=o*a*r+h*s,t[9]=h*a*r-o*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),$l=cr(((t,e)=>{r(),e.exports=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}})),td=cr(((t,e)=>{r(),e.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),ed=cr(((t,e)=>{r(),e.exports=function(t,e){var i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],h=e[5],a=e[6],u=e[7],c=e[8],l=e[9],d=e[10],f=e[11],_=e[12],v=e[13],m=e[14],g=e[15],p=i*h-s*o,w=i*a-n*o,y=i*u-r*o,b=s*a-n*h,A=s*u-r*h,S=n*u-r*a,T=c*v-l*_,k=c*m-d*_,E=c*g-f*_,x=l*m-d*v,R=l*g-f*v,I=d*g-f*m,C=p*I-w*R+y*x+b*E-A*k+S*T;if(!C)return null;return C=1/C,t[0]=(h*I-a*R+u*x)*C,t[1]=(n*R-s*I-r*x)*C,t[2]=(v*S-m*A+g*b)*C,t[3]=(d*A-l*S-f*b)*C,t[4]=(a*E-o*I-u*k)*C,t[5]=(i*I-n*E+r*k)*C,t[6]=(m*y-_*S-g*w)*C,t[7]=(c*S-d*y+f*w)*C,t[8]=(o*R-h*E+u*T)*C,t[9]=(s*E-i*R-r*T)*C,t[10]=(_*A-v*y+g*p)*C,t[11]=(l*y-c*A-f*p)*C,t[12]=(h*k-o*x-a*T)*C,t[13]=(i*x-s*k+n*T)*C,t[14]=(v*w-_*b-m*p)*C,t[15]=(c*b-l*w+d*p)*C,t}})),id=cr(((t,e)=>{r(),e.exports=function(t,e,i){var s=e[0],n=e[1],r=e[2],o=e[3],h=e[4],a=e[5],u=e[6],c=e[7],l=e[8],d=e[9],f=e[10],_=e[11],v=e[12],m=e[13],g=e[14],p=e[15],w=i[0],y=i[1],b=i[2],A=i[3];return t[0]=w*s+y*h+b*l+A*v,t[1]=w*n+y*a+b*d+A*m,t[2]=w*r+y*u+b*f+A*g,t[3]=w*o+y*c+b*_+A*p,w=i[4],y=i[5],b=i[6],A=i[7],t[4]=w*s+y*h+b*l+A*v,t[5]=w*n+y*a+b*d+A*m,t[6]=w*r+y*u+b*f+A*g,t[7]=w*o+y*c+b*_+A*p,w=i[8],y=i[9],b=i[10],A=i[11],t[8]=w*s+y*h+b*l+A*v,t[9]=w*n+y*a+b*d+A*m,t[10]=w*r+y*u+b*f+A*g,t[11]=w*o+y*c+b*_+A*p,w=i[12],y=i[13],b=i[14],A=i[15],t[12]=w*s+y*h+b*l+A*v,t[13]=w*n+y*a+b*d+A*m,t[14]=w*r+y*u+b*f+A*g,t[15]=w*o+y*c+b*_+A*p,t}})),sd=cr(((t,e)=>{r(),e.exports=function(t,e,i,s,n){var r=1/_.tan(e/2),o=1/(s-n);return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*o,t[15]=0,t}})),nd=cr(((t,e)=>{r(),e.exports=function(t,e,i,s){var n,r,o,h,a,u,c,l,d,f,v,m,g,p,w,y,b,A,S,T,k,E,x,R,I=s[0],C=s[1],P=s[2],D=_.sqrt(I*I+C*C+P*P);if(_.abs(D)<1e-6)return null;I*=D=1/D,C*=D,P*=D,n=_.sin(i),r=_.cos(i),o=1-r,h=e[0],a=e[1],u=e[2],c=e[3],l=e[4],d=e[5],f=e[6],v=e[7],m=e[8],g=e[9],p=e[10],w=e[11],y=I*I*o+r,b=C*I*o+P*n,A=P*I*o-C*n,S=I*C*o-P*n,T=C*C*o+r,k=P*C*o+I*n,E=I*P*o+C*n,x=C*P*o-I*n,R=P*P*o+r,t[0]=h*y+l*b+m*A,t[1]=a*y+d*b+g*A,t[2]=u*y+f*b+p*A,t[3]=c*y+v*b+w*A,t[4]=h*S+l*T+m*k,t[5]=a*S+d*T+g*k,t[6]=u*S+f*T+p*k,t[7]=c*S+v*T+w*k,t[8]=h*E+l*x+m*R,t[9]=a*E+d*x+g*R,t[10]=u*E+f*x+p*R,t[11]=c*E+v*x+w*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}})),rd=cr(((t,e)=>{r(),e.exports=function(t,e,i){var s,n,r,o,h,a,u,c,l,d,f,_,v=i[0],m=i[1],g=i[2];e===t?(t[12]=e[0]*v+e[4]*m+e[8]*g+e[12],t[13]=e[1]*v+e[5]*m+e[9]*g+e[13],t[14]=e[2]*v+e[6]*m+e[10]*g+e[14],t[15]=e[3]*v+e[7]*m+e[11]*g+e[15]):(s=e[0],n=e[1],r=e[2],o=e[3],h=e[4],a=e[5],u=e[6],c=e[7],l=e[8],d=e[9],f=e[10],_=e[11],t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=h,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*v+h*m+l*g+e[12],t[13]=n*v+a*m+d*g+e[13],t[14]=r*v+u*m+f*g+e[14],t[15]=o*v+c*m+_*g+e[15]);return t}}));r();var Ja=function(t){return t[t.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",t[t.LICENSE_ERROR=2e3]="LICENSE_ERROR",t[t.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",t[t.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",t[t.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",t[t.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",t[t.SOURCE_INVALID=3e3]="SOURCE_INVALID",t[t.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",t[t.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",t[t.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",t[t.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",t[t.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",t[t.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",t[t.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",t[t.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",t[t.MEDIA_ABORTED=5004]="MEDIA_ABORTED",t[t.NETWORK_ERROR=6e3]="NETWORK_ERROR",t[t.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",t[t.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",t[t.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",t[t.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",t[t.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",t[t.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",t[t.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",t[t.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",t[t.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",t[t.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",t[t.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",t[t.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",t[t.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",t[t.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",t[t.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",t[t.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",t[t.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",t[t.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",t[t.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",t[t.AD_ERROR=1e4]="AD_ERROR",t[t.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",t[t.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",t[t.PICTURE_IN_PICTURE_ERROR=11001]="PICTURE_IN_PICTURE_ERROR",t[t.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",t[t.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",t[t.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",t[t.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",t[t.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",t[t.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",t}({}),Ye=function(t){return t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE",t}({});!function(t){t.fromCode=function(e){const i=_.floor(e/1e3);if(i in t)return i;throw new b("Invalid error code: "+e)}}(Ye||(Ye={})),r(),r(),r(),r(),r(),r(),r(),r();var Jt=function(t){return t.yv="web",t.bv="android",t.Av="android-tv",t.Sv="ios",t.Tv="tvos",t.Ev="chromecast",t.xv="theoliveweb",t}({});var R=Ll?Ll.userAgent:"",od=R.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),hd=R.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),ad=R.match(/Android ([0-9\.]+)/i),ud=R.match(/Windows NT ([0-9\.]+)/i),cd=R.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),ld=R.match(/Firefox\/([0-9\.]+)/i),dd=R.match(/OPR\/(\d+\.\d+)/i),fd=R.match(/Tizen ([0-9\.]+)/i),_d=R.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),vd=R.match(/HbbTV\/([0-9.]+)/i),md=class{get Je(){return this.Rv}get Iv(){return this.Cv}get Pv(){return this.Dv}get Nv(){return this.Mv}get Lv(){return this.Bv}get Ov(){return this.Fv}get Vv(){return this.Wv}get Uv(){return this.Gv}get Hv(){return this.Zv}get Xv(){return this.zv}get qv(){return this.Yv}get Ka(){return this.Kv}get Qv(){return this.Jv}get $v(){return this.im||this.nm}get nd(){return this.hm}get Qs(){return this.um}get lm(){return this.dm}get fm(){return this._m}get vm(){var t;return null!=(t=this.gm)?t:this.pm}get wm(){return this.ym}get Am(){var t;return(null==(t=s.chrome)?void 0:t.webview)&&this.Sm>0}get Tm(){return this.Sm}get Em(){return this.xm}get Rm(){return this.Im}get Cm(){return this.Pm}get Dm(){return this.Nm}get Mm(){return this.Lm}get Bm(){return this.Om}get Fm(){return this.Vm}get Wm(){return this.Um}get Gm(){return this.Hm}get Zm(){return this.Xm}get zm(){return this.qm}get Ym(){return this.Km}get jm(){return this.Qm}get Jm(){return this.$m}get eg(){return this.rg}get og(){return this.hg}get ag(){return this.cg}get dg(){return this.fg}get _g(){return!(!this.Cm&&!this.Em)&&this.vm<=56}get vg(){return this.gg}get pg(){return this.wg}get yg(){return this.Ag}get Sg(){return this.Tg}get Eg(){return this.xg}get Rg(){return this.Ig}get Cg(){return this.Pg}get Dg(){return this.Ng}get IS_IOS_CHROME(){return this.Mg}constructor(){this.Rv=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||Ll&&Ll.msMaxTouchPoints),this.Cv=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(R)||/(macintosh|mac(?=_powerpc)\s)/i.test(R),this.Dv=/Windows NT/i.test(R),this.Mv=ud?C(ud[1]):0,this.Bv=/Android/i.test(R),this.Fv=ad?C(ad[1]):0,this.Wv=/windows phone (8|8\.1)/i.test(R),this.Gv=/iPhone/i.test(R),this.Zv=/iPad/i.test(R),this.zv=this.Cv&&this.Rv&&!this.Zv,this.Yv=/iPod/i.test(R),this.hm=/Mobile Safari/i.test(R),this.im=/EOS\d*STB/i.test(R),this.nm=/APP\d*STB/i.test(R),this.Kv=(this.Gv||this.Zv||this.zv||this.Yv)&&!this.Wv,this.Jv=_d?C(_d[2]):0,this.um=this.Wv||this.Kv||this.Bv||this.hm,this.dm=/CriOS/i.test(R),this._m=Boolean(self.chrome&&/google/i.test(Ll.vendor))||this.dm,this.ym=this._m&&/Edg\//i.test(Ll.userAgent),this.Sm=hd?x(hd[1],10):0,this.Mg=Boolean(/CriOS/i.test(R)),this.Ng=Boolean(self.chrome||/Chrome/i.test(R)||this.Mg),this.pm=od?x(od[1],10):0,this.xm=/SMART-TV.*Tizen/i.test(R),this.Im=fd?C(fd[1]):0,this.gm=this.Im>0?function(t){return t>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0}(this.Im):void 0,this.Pm=/webos|web0s/i.test(R),this.Nm=/HbbTV/i.test(R),this.Lm=!!vd&&function(t){if(!t)return!1;let e=t.split(".").map(Number);return 3===e.length&&1===e[0]&&2===e[1]}(vd[1]),this.Om=/VIZIO/i.test(R),this.Vm=/Edge\/\d+/i.test(R),this.Um=/Trident/i.test(R),this.Hm=this.Um&&!self.ActiveXObject&&"ActiveXObject"in self,this.Xm=/Vivaldi/i.test(R),this.qm=/Firefox/i.test(R)&&!/Seamonkey/i.test(R),this.Km=ld?C(ld[1]):0,this.Qm=/Safari/i.test(R)&&!/Chrome/i.test(R)&&!this.Wv&&!this.xm,this.$m=cd?C(cd[2]):0,this.rg=Boolean(dd),this.hg=dd?C(dd[1]):0,this.cg=/CrKey/.test(R),this.fg=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(R),this.gg=/PlayStation 4/i.test(R),this.wg="web"===Jt.Av,this.Ag="web"===Jt.bv,this.Tg=this.Ag||this.wg,this.xg="web"===Jt.Sv,this.Ig="web"===Jt.Tv,this.Pg="web"===Jt.Ev}};md.Lg=new md;var Z=md.Lg;r();var Ba={}.hasOwnProperty,gd={}.toString;function ne(t){return null!=t}function pd(t){return void 0===t}var As,rl=Array.isArray||function(t){return"[object Array]"===gd.call(t)};function dc(t){return V(t)&&Ba.call(t,"length")&&Ad(t.length)}function V(t){return"object"==typeof t&&null!==t}function wd(t){return V(t)&&t.constructor&&t.constructor===w}function Kt(t){return"string"==typeof t}function yd(t){return"boolean"==typeof t}function bt(t){return ne(t)&&"function"==typeof t.then}function bd(t){return"[object Date]"===gd.call(t)}function Ad(t){return"number"==typeof t}function Sd(t){return"function"==typeof t}function ur(t){return Sd(t)||V(t)}function ft(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ch(t){let e;for(;ne(e=t.firstChild);)t.removeChild(e)}function Td(t,e){t.insertBefore(e,t.firstChild)}function kd(t){const e=t.className;return"string"==typeof e?e:e&&"string"==typeof e.baseVal?e.baseVal:""}function Ed(t,e){const i=t.className;"string"==typeof i?t.className=e:i&&"string"==typeof i.baseVal&&(i.baseVal=e)}function xd(t,e){return void 0!==t.classList?t.classList.contains(e):void 0!==t.className&&-1!==(" "+kd(t)+" ").indexOf(" "+e+" ")}function Rd(t,e){if(void 0!==t.classList)t.classList.add(e);else if(void 0!==t.className){const i=kd(t);-1===(" "+i+" ").indexOf(" "+e+" ")&&Ed(t,(i+" "+e).trim())}}function Id(t,e){if(void 0!==t.classList)t.classList.remove(e);else if(void 0!==t.className){let i=" "+kd(t)+" ";const s=" "+e+" ";for(;-1!==i.indexOf(s);)i=i.replace(s," ");Ed(t,i.trim())}}function Cd(t,e,i){void 0===i&&(i=!xd(t,e)),i?Rd(t,e):Id(t,e)}function Pd(t){t.stopPropagation()}function Dd(t,e){Z.Em&&Z.Rm<3?function(t,e){let i=e;switch(e){case"flex":i="-webkit-flex";break;case"inline-flex":i="-webkit-inline-flex"}t.display=i}(t,e):function(t,e){if(t.display=e,t.display!==e){let i=e;switch(e){case"flex":i="-ms-flexbox";break;case"inline-flex":i="-ms-inline-flexbox"}t.display=i}}(t,e)}function Nd(t,e){const i=e.style;if(i)for(const e of w.keys(t)){const s=t[e];void 0!==s&&(i[e]=s)}}function ya(t){const e=t.style;e.position="absolute",e.left="0",e.right="0",e.top="0",e.bottom="0",e.width="100%",e.height="100%"}function Md(t){const e=t.style;e.position="",e.left="",e.right="",e.top="",e.bottom="",e.width="",e.height=""}function Ld(t){t.removeAttribute("title")}function Bd(t){t.addEventListener("mouseover",(t=>{Ld(t.target)}))}function Od(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}r(),r();var Bt=()=>{},Fd=t=>t;function Jr(t,e){let i=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=As.Bg();o-i>=e&&(t.apply(this,n),i=o)}}function Vd(t,e){let i=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=this;0!==i&&As.Og(i),i=As.Fg((()=>{i=0,t.apply(o,n)}),e)}}function gl(t){let e;return()=>(void 0!==t&&(e=t(),t=void 0),e)}function Rr(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function Wd(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function Ud(){return void 0!==h?h.createElement("video"):void 0}var Gd=gl(Ud),Hd=gl((()=>"undefined"!=typeof HTMLVideoElement&&Gd()instanceof HTMLVideoElement));r(),r(),r();var Zd=null;try{Zd=new WebAssembly.Instance(new WebAssembly.Module(new j([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(y){}function fc(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function ii(t){return!0===(t&&t.Vg)}function Xd(t){var e=_.clz32(t&-t);return t?31-e:e}fc.prototype.Vg,w.defineProperty(fc.prototype,"Vg",{value:!0}),fc.isLong=ii;var zd={},qd={};function Yd(t,e){var i,s,n;return e?(n=0<=(t>>>=0)&&t<256)&&(s=qd[t])?s:(i=bo(t,0,!0),n&&(qd[t]=i),i):(n=-128<=(t|=0)&&t<128)&&(s=zd[t])?s:(i=bo(t,t<0?-1:0,!1),n&&(zd[t]=i),i)}function Kd(t,e){if(S(t))return e?hh:Ua;if(e){if(t<0)return hh;if(t>=$d)return hf}else{if(t<=-tf)return af;if(t+1>=tf)return of}return t<0?Kd(-t,e).neg():bo(t%Jd|0,t/Jd|0,e)}function bo(t,e,i){return new fc(t,e,i)}fc.fromInt=Yd,fc.fromNumber=Kd,fc.fromBits=bo;var jd=_.pow;function Qd(t,e,i){if(0===t.length)throw g("empty string");if("number"==typeof e?(i=e,e=!1):e=!!e,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e?hh:Ua;if((i=i||10)<2||36<i)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw g("interior hyphen");if(0===s)return Qd(t.substring(1),e,i).neg();for(var n=Kd(jd(i,8)),r=Ua,o=0;o<t.length;o+=8){var h=_.min(8,t.length-o),a=x(t.substring(o,o+h),i);if(h<8){var u=Kd(jd(i,h));r=r.mul(u).add(Kd(a))}else r=(r=r.mul(n)).add(Kd(a))}return r.unsigned=e,r}function La(t,e){return"number"==typeof t?Kd(t,e):"string"==typeof t?Qd(t,e):bo(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}fc.fromString=Qd,fc.fromValue=La;var Jd=4294967296,$d=Jd*Jd,tf=$d/2,ef=Yd(1<<24),Ua=Yd(0);fc.ZERO=Ua;var hh=Yd(0,!0);fc.UZERO=hh;var sf=Yd(1);fc.ONE=sf;var nf=Yd(1,!0);fc.UONE=nf;var rf=Yd(-1);fc.NEG_ONE=rf;var of=bo(-1,2147483647,!1);fc.MAX_VALUE=of;var hf=bo(-1,-1,!0);fc.MAX_UNSIGNED_VALUE=hf;var af=bo(0,-2147483648,!1);fc.MIN_VALUE=af;var Oi=fc.prototype;Oi.toInt=function(){return this.unsigned?this.low>>>0:this.low},Oi.toNumber=function(){return this.unsigned?(this.high>>>0)*Jd+(this.low>>>0):this.high*Jd+(this.low>>>0)},Oi.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(af)){var e=Kd(t),i=this.div(e),s=i.mul(e).sub(this);return i.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=Kd(jd(t,6),this.unsigned),r=this,o="";;){var h=r.div(n),a=(r.sub(h.mul(n)).toInt()>>>0).toString(t);if((r=h).isZero())return a+o;for(;a.length<6;)a="0"+a;o=""+a+o}},Oi.getHighBits=function(){return this.high},Oi.getHighBitsUnsigned=function(){return this.high>>>0},Oi.getLowBits=function(){return this.low},Oi.getLowBitsUnsigned=function(){return this.low>>>0},Oi.getNumBitsAbs=function(){if(this.isNegative())return this.eq(af)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},Oi.isZero=function(){return 0===this.high&&0===this.low},Oi.eqz=Oi.isZero,Oi.isNegative=function(){return!this.unsigned&&this.high<0},Oi.isPositive=function(){return this.unsigned||this.high>=0},Oi.isOdd=function(){return 1==(1&this.low)},Oi.isEven=function(){return 0==(1&this.low)},Oi.equals=function(t){return ii(t)||(t=La(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},Oi.eq=Oi.equals,Oi.notEquals=function(t){return!this.eq(t)},Oi.neq=Oi.notEquals,Oi.ne=Oi.notEquals,Oi.lessThan=function(t){return this.comp(t)<0},Oi.lt=Oi.lessThan,Oi.lessThanOrEqual=function(t){return this.comp(t)<=0},Oi.lte=Oi.lessThanOrEqual,Oi.le=Oi.lessThanOrEqual,Oi.greaterThan=function(t){return this.comp(t)>0},Oi.gt=Oi.greaterThan,Oi.greaterThanOrEqual=function(t){return this.comp(t)>=0},Oi.gte=Oi.greaterThanOrEqual,Oi.ge=Oi.greaterThanOrEqual,Oi.compare=function(t){if(ii(t)||(t=La(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Oi.comp=Oi.compare,Oi.negate=function(){return!this.unsigned&&this.eq(af)?af:this.not().add(sf)},Oi.neg=Oi.negate,Oi.add=function(t){ii(t)||(t=La(t));var e=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+h)>>>16,a+=(u+=i+o)>>>16,a+=e+r,bo((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},Oi.subtract=function(t){return ii(t)||(t=La(t)),this.add(t.neg())},Oi.sub=Oi.subtract,Oi.multiply=function(t){if(this.isZero())return this;if(ii(t)||(t=La(t)),Zd)return bo(Zd.mul(this.low,this.high,t.low,t.high),Zd.get_high(),this.unsigned);if(t.isZero())return this.unsigned?hh:Ua;if(this.eq(af))return t.isOdd()?af:Ua;if(t.eq(af))return this.isOdd()?af:Ua;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(ef)&&t.lt(ef))return Kd(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*h)>>>16,u+=(c+=i*a)>>>16,c&=65535,u+=(c+=s*h)>>>16,c&=65535,u+=(c+=n*o)>>>16,u+=e*a+i*h+s*o+n*r,bo((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},Oi.mul=Oi.multiply,Oi.divide=function(t){if(ii(t)||(t=La(t)),t.isZero())throw g("division by zero");var e,i,s;if(Zd)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?bo((this.unsigned?Zd.div_u:Zd.div_s)(this.low,this.high,t.low,t.high),Zd.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?hh:Ua;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return hh;if(t.gt(this.shru(1)))return nf;s=hh}else{if(this.eq(af))return t.eq(sf)||t.eq(rf)?af:t.eq(af)?sf:(e=this.shr(1).div(t).shl(1)).eq(Ua)?t.isNegative()?sf:rf:(i=this.sub(t.mul(e)),s=e.add(i.div(t)));if(t.eq(af))return this.unsigned?hh:Ua;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=Ua}for(i=this;i.gte(t);){e=_.max(1,_.floor(i.toNumber()/t.toNumber()));for(var n=_.ceil(_.log(e)/_.LN2),r=n<=48?1:jd(2,n-48),o=Kd(e),h=o.mul(t);h.isNegative()||h.gt(i);)h=(o=Kd(e-=r,this.unsigned)).mul(t);o.isZero()&&(o=sf),s=s.add(o),i=i.sub(h)}return s},Oi.div=Oi.divide,Oi.modulo=function(t){return ii(t)||(t=La(t)),Zd?bo((this.unsigned?Zd.rem_u:Zd.rem_s)(this.low,this.high,t.low,t.high),Zd.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},Oi.mod=Oi.modulo,Oi.rem=Oi.modulo,Oi.not=function(){return bo(~this.low,~this.high,this.unsigned)},Oi.countLeadingZeros=function(){return this.high?_.clz32(this.high):_.clz32(this.low)+32},Oi.clz=Oi.countLeadingZeros,Oi.countTrailingZeros=function(){return this.low?Xd(this.low):Xd(this.high)+32},Oi.ctz=Oi.countTrailingZeros,Oi.and=function(t){return ii(t)||(t=La(t)),bo(this.low&t.low,this.high&t.high,this.unsigned)},Oi.or=function(t){return ii(t)||(t=La(t)),bo(this.low|t.low,this.high|t.high,this.unsigned)},Oi.xor=function(t){return ii(t)||(t=La(t)),bo(this.low^t.low,this.high^t.high,this.unsigned)},Oi.shiftLeft=function(t){return ii(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?bo(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):bo(0,this.low<<t-32,this.unsigned)},Oi.shl=Oi.shiftLeft,Oi.shiftRight=function(t){return ii(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?bo(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):bo(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Oi.shr=Oi.shiftRight,Oi.shiftRightUnsigned=function(t){return ii(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?bo(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):bo(32===t?this.high:this.high>>>t-32,0,this.unsigned)},Oi.shru=Oi.shiftRightUnsigned,Oi.shr_u=Oi.shiftRightUnsigned,Oi.rotateLeft=function(t){var e;return ii(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?bo(this.high,this.low,this.unsigned):t<32?(e=32-t,bo(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(e=32-(t-=32),bo(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},Oi.rotl=Oi.rotateLeft,Oi.rotateRight=function(t){var e;return ii(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?bo(this.high,this.low,this.unsigned):t<32?(e=32-t,bo(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(e=32-(t-=32),bo(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},Oi.rotr=Oi.rotateRight,Oi.toSigned=function(){return this.unsigned?bo(this.low,this.high,!1):this},Oi.toUnsigned=function(){return this.unsigned?this:bo(this.low,this.high,!0)},Oi.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Oi.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},Oi.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},fc.fromBytes=function(t,e,i){return i?fc.fromBytesLE(t,e):fc.fromBytesBE(t,e)},fc.fromBytesLE=function(t,e){return new fc(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},fc.fromBytesBE=function(t,e){return new fc(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};var fo=fc;function uf(t,e){return t.lessThan(e)?t:e}r();var Lu=9007199254740991,cf=2**-52;function Zs(t,e,i){return _.min(_.max(t,e),i)}function Cs(t,e,i){return t===e||_.abs(t-e)<=i}function mh(t,e){if(t===e)return!0;const i=_.abs(t-e);if(i<cf)return!0;return i<_.max(_.abs(t),_.abs(e))*cf}function lf(t,e){return t%e+(t<0?e:0)}function df(t){return t!=t}function ff(t,e){return t===e||df(t)&&df(e)}function _f(t,e){let i=t,s=e;for(;0!==s;){const t=i%s;i=s,s=t}return i<0?-i:i}function vf(t,e){return t.reduce(((t,i)=>t+e(i)),0)}function mf(t){return!S(t.getTime())}function Fa(){return Date.now()||(new Date).getTime()}function gf(t){return t/1e3}function Na(t){return 1e3*t}var ji=1/6,pf=fo.fromNumber(Lu);function to(t,e){if(0===e)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(pf))return t.toNumber()/e;const i=t.divide(e),s=t.subtract(i.multiply(e));return i.toNumber()+s.toNumber()/e}var wf=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!Ll||!Ll.msMaxTouchPoints),yf=Gd(),bf=!(!yf||!yf.webkitShowPlaybackTargetPicker),Af=class{get Wg(){return void 0===this.Ug&&(this.Ug=this.Gg()),this.Ug}Gg(){return 0}get Hg(){return!Z.dg}get Zg(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get Xg(){return s.devicePixelRatio||1}get zg(){return bf}get qg(){return!1}get Yg(){return!0}get Kg(){return!(!Z.jm&&!Z.Ka)||!!Z.Bm}get jg(){return Z.Bm}get Qg(){return!Z.Ka}get Jg(){return!0}get $g(){return!0}get tp(){return!1}get ep(){}get sp(){return!0}get np(){return!1}get rp(){return Z.Bm}get op(){return!1}hp(t,e){return!0}ap(t){return t>=2*ji}constructor(){this.Ug=void 0,this.cp=!1,this.Je=wf,this.Qs=!1,this.lp=!0}},Sf=class extends Af{constructor(){super()}};r();var Tf=class extends Sf{get ep(){if(Z.Iv)return 4096}hp(t,e){if(t&&t.dp&&e&&e.dp){let i=kf(t.dp,"mp4a.40.2")&&kf(e.dp,"mp4a.40.5"),s=kf(t.dp,"mp4a.40.5")&&kf(e.dp,"mp4a.40.2"),n=kf(t.dp,"mp4a.40.2")&&kf(e.dp,"mp4a.40.34"),r=kf(t.dp,"mp4a.40.34")&&kf(e.dp,"mp4a.40.2"),o=kf(t.dp,"mp4a.40.5")&&kf(e.dp,"mp4a.40.34"),h=kf(t.dp,"mp4a.40.34")&&kf(e.dp,"mp4a.40.5");return!(i||s||n||r||o||h)}return!0}};function kf(t,e){return t.indexOf(e)>-1}r();var Ef=class extends Sf{ap(t){return t>=2}};r();var xf=class extends Sf{get op(){return Z.Jm<17}constructor(){super(),this.cp=Z.Jm>=11,this.lp=Z.jm&&!(Z.Ka&&Z.Jm<10)}};r();var Rf,If=class extends Sf{get sp(){return!Z.Pv||(Z.wm?92!==Z.Tm:Z.vm>=100)}};r(),r(),r(),r(),r();var Cf=function(){const t=Ud();if(!t)return!1;const e=t.muted;return t.muted=!e,t.muted!==e}(),Pf=function(){if(Z.Xv)return!1;const t=Ud();if(!t)return!1;const e=t.volume;return t.volume=e/2+.1,e!==t.volume}();var Df=class extends Af{Gg(){return this.fp.Wg}get ep(){return this.fp.ep}get sp(){return this.fp.sp}hp(t,e){return this.fp.hp(t,e)}ap(t){return this.fp.ap(t)}get op(){return this.fp.op}constructor(t){super(),this.fp=t,this.cp=this.fp.cp,this.Je=this.fp.Je,this.lp=Cf&&this.fp.lp}},Nf=class extends Df{get tp(){return Z.Ka}constructor(t){super(t),this.cp=!0,this.Qs=!0}};r();var Mf=class{_p(){return new this.vp}mp(t){return this.vp.isTypeSupported(t)}constructor(t){this.vp=Lf(t)}};function Lf(t){return t&&ur(s.ManagedMediaSource)?s.ManagedMediaSource:ur(s.MediaSource)?s.MediaSource:void 0}var Bf=class extends Nf{get tp(){return!0}Gg(){return Lf(!0)?super.Gg():1}};r();var Of=class extends Df{get qg(){return Z.Rm<3}get Yg(){return Z.Rm>=3}get Zg(){return s.tizen&&!this.gp&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const e=t.resolutionWidth,i=t.resolutionHeight;1===e&&1===i||(this.gp={width:e,height:i})})),this.gp}get np(){return Z.Rm<3}hp(t,e){return super.hp(t,e)}};r();var Ff=class extends Df{get Zg(){return s.webOS&&!this.gp&&s.webOS.deviceInfo((t=>{this.gp={width:t.screenWidth,height:t.screenHeight}})),this.gp}get Jg(){return!1}};r();var Vf=class extends Df{get tp(){return!0}};!function(t){Rf=t}(function(){const t=function(){if(Z.zm)return new Tf;if(Z.Fm||Z.Wm)return new Ef;if(Z.jm)return new xf;if(Z.fm)return new If;return new Sf}();return Z.Ka?new Bf(t):Z.Qs?new Nf(t):Z.Em?new Of(t):Z.Cm?new Ff(t):Z.Iv?new Vf(t):new Df(t)}()),r(),r(),r();var Wf=!(Z.Wm&&!Z.Gm),Yn=self.console;function Uf(t){if(V(t))try{return JSON.stringify(t)}catch(t){}return t}function Gf(t){return t.map(Uf).join(" ")}function Hf(t){const e=Yn&&Yn[t];return e?e.bind&&Wf?e.bind(Yn):function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];Yn[t](Gf(i))}:void 0}var Zf=Hf("log")||Bt,lt=Hf("warn")||Zf.bind(void 0,"WARNING:"),Ur=Hf("error")||Zf.bind(void 0,"ERROR:"),Xf=(()=>{const t=Yn&&Yn.assert;return t?t.bind&&Wf?t.bind(Yn):function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];Yn.assert(t,Gf(i))}:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];t||Ur("Assertion failed:",...i)}})();function zf(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}function qf(t,e){var i=function(t,e){var i=t.length;if(i<=1)return t;for(var s=new Array(i),n=1;n<i;n*=2){Yf(t,e,n,s);var r=t;t=s,s=r}return t}(t,e);return i!==t&&Yf(i,null,t.length,t),t}function Yf(t,e,i,s){var n,r,o,h,a,u=t.length,c=0,l=2*i;for(n=0;n<u;n+=l)for(o=(r=n+i)+i,r>u&&(r=u),o>u&&(o=u),h=n,a=r;;)if(h<r&&a<o)e(t[h],t[a])<=0?s[c++]=t[h++]:s[c++]=t[a++];else if(h<r)s[c++]=t[h++];else{if(!(a<o))break;s[c++]=t[a++]}}r();var Kf=/[a-zA-Z]/,jf=/[0-9]/,Qf=/[0-9a-fA-F]/,Jf=/^0x/i,$f=/^[0-9]+$/,t_=/^[0-9a-fA-F]+$/,e_=/^[0-7]+$/,i_=w.prototype.toString,s_=Array.isArray||function(t){return"[object Array]"===i_.call(t)},n_=void 0!==Ao&&"symbol"==typeof Nt;function r_(t){return s_(t)?t:Array.from(t)}function o_(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function h_(t){return t>=65&&t<=90}function a_(t){return h_(t)||function(t){return t>=97&&t<=122}(t)}function u_(t){return t>=48&&t<=57}function c_(t){return u_(t)||a_(t)}function l_(t){return u_(t)||t>=65&&t<=70||t>=97&&t<=102}function d_(t){return h_(t)?t+32:t}function f_(t){return u_(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function __(t,e){return void 0===e&&(e=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(e?87:55):-1}var v_=_.min,m_=String.fromCharCode,g_=16384;function p_(t){for(var e=t.length,i=[],s=0;s<e;s+=g_){var n=v_(s+g_,e);i.push(m_.apply(null,t.slice(s,n)))}return i.join("")}var w_=2147483647,y_=/[^\0-\x7E]/,b_=/[\x2E\u3002\uFF0E\uFF61]/g,A_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S_=_.floor,T_=String.fromCharCode;function k_(t){throw new RangeError(A_[t])}function E_(t){for(var e=[],i=0,s=t.length;i<s;){var n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){var r=t.charCodeAt(i++);56320==(64512&r)?e.push(((1023&n)<<10)+(1023&r)+65536):(e.push(n),i--)}else e.push(n)}return e}var x_,R_,dr,I_=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},C_=function(t,e,i){var s=0;for(t=i?S_(t/700):t>>1,t+=S_(t/e);t>455;s+=36)t=S_(t/35);return S_(s+36*t/(t+38))},P_=function(t){return function(t,e){var i=t.split("@"),s="";i.length>1&&(s=i[0]+"@",t=i[1]);var n=function(t,e){for(var i=[],s=t.length;s--;)i[s]=e(t[s]);return i}((t=t.replace(b_,".")).split("."),e).join(".");return s+n}(t,(function(t){return y_.test(t)?"xn--"+function(t){for(var e=[],i=(t=E_(t)).length,s=128,n=0,r=72,o=0,h=t;o<h.length;o++){var a=h[o];a<128&&e.push(T_(a))}var u=e.length,c=u;for(u&&e.push("-");c<i;){for(var l=w_,d=0,f=t;d<f.length;d++){var _=f[d];_>=s&&_<l&&(l=_)}var v=c+1;l-s>S_((w_-n)/v)&&k_("overflow"),n+=(l-s)*v,s=l;for(var m=0,g=t;m<g.length;m++){var p=g[m];if(p<s&&++n>w_&&k_("overflow"),p==s){for(var w=n,y=36;;y+=36){var b=y<=r?1:y>=r+26?26:y-r;if(w<b)break;var A=w-b,S=36-b;e.push(T_(I_(b+A%S,0))),w=S_(A/S)}e.push(T_(I_(w,0))),r=C_(n,v,c==u),n=0,++c}}++n,++s}return e.join("")}(t):t}))};function Xs(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];s>65535&&(s-=65536,e.push(s>>>10&1023|55296),s=56320|1023&s),e.push(s)}return p_(e)}function D_(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function N_(t,e){return t>>e&63|128}function M_(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(D_(t),e.push(t>>12&15|224),e.push(N_(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(N_(t,12)),e.push(N_(t,6))),e.push(63&t|128)):e.push(t)}function L_(t){for(var e=[],i=0;i<t.length;i++){M_(t[i],e)}return e}function B_(){if(dr>=R_)throw new g("Invalid byte index");var t=255&x_[dr];if(dr++,128==(192&t))return 63&t;throw new g("Invalid continuation byte")}function O_(){var t,e;if(dr>R_)throw new g("Invalid byte index");if(dr===R_)return!1;if(t=255&x_[dr],dr++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|B_())>=128)return e;throw new g("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|B_()<<6|B_())>=2048)return D_(e),e;throw new g("Invalid continuation byte")}if(240==(248&t)&&(e=(7&t)<<18|B_()<<12|B_()<<6|B_())>=65536&&e<=1114111)return e;throw new g("Invalid UTF-8 detected")}function F_(t){return[37,__(t>>4),__(15&t)]}function V_(t){return function(t){return t>=0&&t<=31}(t)||t>126}function W_(t){return V_(t)||32===t||34===t||60===t||62===t||96===t}function U_(t){return W_(t)||35===t||63===t||123===t||125===t}function G_(t){return U_(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function H_(t){return t<33||t>126||34===t||35===t||60===t||62===t}function Z_(t){return H_(t)||39===t}function X_(t,e){if(!e(t))return[t];for(var i=L_([t]),s=[],n=0;n<i.length;n++){var r=i[n];s.push.apply(s,F_(r))}return s}function z_(t,e){for(var i=[],s=0,n=E_(t);s<n.length;s++){var r=n[s];i.push.apply(i,X_(r,e))}return Xs(i)}function q_(t){return function(t){for(var e=[],i=t.length,s=0;s<i;s++){var n=t[s];if(37===n&&s+2<i&&l_(t[s+1])&&l_(t[s+2])){var r=f_(t[s+1])<<4|f_(t[s+2]);e.push(r),s+=2}else e.push(n)}return e}(L_(t))}function Y_(t){return Xs(function(t){x_=t.slice(),R_=x_.length,dr=0;for(var e,i=[];!1!==(e=O_());)i.push(e);return i}(q_(E_(t))))}function K_(t){var e=t.length,i=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<e&&":"===t[r]){if(!(r+1<e&&":"===t[r+1]))throw new b;r+=2,n=s+=1}for(;r<e;){if(8===s)throw new b("Too many groups");if(":"!==t[r]){for(var o=0,h=0;h<4&&r<e&&Qf.test(t[r]);)o=o<<4|x(t[r],16),r+=1,h+=1;if("."===t[r]){if(0===h)throw new b;if(r-=h,s>6)throw new b;for(var a=0;r<e;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new b;r+=1}if(!jf.test(t[r]))throw new b;for(;r<e&&jf.test(t[r]);){var c=x(t[r],10);if(null===u)u=c;else{if(0===u)throw new b;if((u=10*u+c)>255)throw new b}r+=1}i[s]=i[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new b;break}if(":"===t[r]){if((r+=1)===e)throw new b}else if(r<e)throw new b;i[s]=o,s+=1}else{if(null!==n)throw new b("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)o_(i,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new b;return i}function j_(t){var e=10,i=$f;return Jf.test(t)?(t=t.slice(2),e=16,i=t_):t.length>=2&&"0"===t[0]&&(t=t.slice(1),e=8,i=e_),""===t?0:i.test(t)?x(t,e):void 0}var Q_={pp:4},J_=/[\0\t\n\r #%/:?@\[\\\]]/,$_=/[\0\t\n\r #/:?@\[\\\]]/;function ev(t,e){if("["===t[0]){if("]"!==t[t.length-1])throw new b("Invalid IPv6 address");return{pp:2,wp:K_(t.slice(1,-1))}}if(!e)return function(t){if($_.test(t))throw new b("Invalid code point in opaque host");var e=z_(t,V_);return""===e?Q_:{pp:3,yp:e}}(t);var i=function(t){var e=function(t){return P_(t.toLowerCase())}(t);return e}(Y_(t));if(J_.test(i))throw new b("Invalid code point in host");var s=function(t){var e=t.split(".");if(""===e[e.length-1]&&e.pop(),!(e.length>4)){for(var i=[],s=0;s<e.length;s++){var n=e[s];if(""===n)return;var r=j_(n);if(void 0===r)return;i.push(r)}for(var o=0;o<i.length-1;o++)if(i[o]>255)throw new b;if(i[i.length-1]>=_.pow(256,5-i.length))throw new b;for(var h=i.pop(),a=0;a<i.length;a++)h+=i[a]*_.pow(256,3-a);return h}}(i);return void 0!==s?{pp:1,wp:s}:""===i?Q_:{pp:0,bp:i}}function iv(t){switch(t.pp){case 0:return t.bp;case 1:return function(t){for(var e=[],i=t,s=1;s<=4;s++)e.push(""+(255&i)),4!==s&&e.push("."),i>>>=8;return e.reverse().join("")}(t.wp);case 2:return"["+function(t){for(var e="",i=function(t){for(var e=0,i=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>i&&(e=s,i=n),n=0);return n>i&&(e=s,i=n),i>1?e:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}i!==n?(e+=t[n].toString(16),7!==n&&(e+=":")):(e+=0===n?"::":":",s=!0)}return e}(t.wp)+"]";case 3:return t.yp;case 4:return""}}var sv=/\+/g;function nv(t){return 42===t||45===t||46===t||95===t||c_(t)}function rv(t){for(var e=t.split("&"),i=[],s=0;s<e.length;s++){var n=e[s];if(""!==n){var r=n.indexOf("="),o=void 0,h=void 0;-1!==r?(o=n.slice(0,r),h=n.slice(r+1)):(o=n,h=""),o=o.replace(sv," "),h=h.replace(sv," ");var a=Y_(o),u=Y_(h);i.push([a,u])}}return i}function ov(t){for(var e="",i=0;i<t.length;i++){var s=t[i];i>0&&(e+="&"),e+=hv(L_(E_(s[0])))+"="+hv(L_(E_(s[1])))}return e}function hv(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];32===s?e.push(43):nv(s)?e.push(s):e.push.apply(e,F_(s))}return p_(e)}var av=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function uv(t){var e=""+t,i=av.exec(e);return i?function(t,e){for(var i=t.length,s=[],n=e;n<i;n++){var r=t.charCodeAt(n);if(lv(r))if(dv(r)||n===i-1)s.push(cv);else{var o=t.charCodeAt(n+1);dv(o)?(s.push(r,o),n++):s.push(cv)}else s.push(r)}return t.slice(0,e)+p_(s)}(e,i.index):e}var cv=65533,lv=function(t){return 55296==(63488&t)},dv=function(t){return 0!=(1024&t)};function fv(t,e){var i=t[0],s=e[0];return i===s?0:i<s?-1:1}function _v(t){t.R_.length=0}function vv(t,e){!function(t,e){for(var i=0;i<e.length;i++)t[i]=e[i];t.length=e.length}(t.R_,rv(e))}function mv(t){if(t.Yu){var e=ov(t.R_);""===e&&(e=null),t.Yu.Yu.Ap=e}}var uu=function(){function t(t){if(void 0===t&&(t=void 0),this.Yu=null,null==t)this.R_=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof uu&&!!s_(t.R_)&&(!n_||t[Nt]===gv)}(t))this.R_=t.R_.slice();else if(function(t){return null!=t&&(!!s_(t)||!!n_&&"function"==typeof t[Nt])}(t)){this.R_=[];for(var e=0,i=r_(t);e<i.length;e++){var s=r_(i[e]);if(2!==s.length)throw new b("Invalid name-value pair");this.R_.push([uv(s[0]),uv(s[1])])}}else for(var n in this.R_=[],t)w.prototype.hasOwnProperty.call(t,n)&&this.R_.push([uv(n),uv(t[n])]);else(t=uv(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.R_=rv(t)}var e=t.prototype;return e.append=function(t,e){t=uv(t),e=uv(e),this.R_.push([t,e]),mv(this)},e.delete=function(t){t=uv(t);for(var e=this.R_,i=0;i<e.length;){e[i][0]===t?e.splice(i,1):i++}mv(this)},e.get=function(t){t=uv(t);for(var e=this.R_,i=0;i<e.length;i++){var s=e[i];if(s[0]===t)return s[1]}return null},e.getAll=function(t){t=uv(t);for(var e=this.R_,i=[],s=0;s<e.length;s++){var n=e[s];n[0]===t&&i.push(n[1])}return i},e.has=function(t){t=uv(t);for(var e=this.R_,i=0;i<e.length;i++){if(e[i][0]===t)return!0}return!1},e.set=function(t,e){t=uv(t),e=uv(e);for(var i=this.R_,s=!1,n=0;n<i.length;){var r=i[n];r[0]===t?s?i.splice(n,1):(r[1]=e,s=!0,n++):n++}s||i.push([t,e]),mv(this)},e.sort=function(){qf(this.R_,fv),mv(this)},e.toString=function(){return ov(this.R_)},e.entries=function(){return new bv(this.R_,pv)},e.keys=function(){return new bv(this.R_,wv)},e.values=function(){return new bv(this.R_,yv)},e.forEach=function(t){var e=this;this.R_.forEach((function(i){return t(i[1],i[0],e)}))},t}(),gv=uu.prototype.entries;n_&&(uu.prototype[Nt]=gv);var pv=function(t){return[t[0],t[1]]},wv=function(t){return t[0]},yv=function(t){return t[1]},bv=function(){function t(t,e){this.Sp=0,this.R_=t,this.Tp=e}return t.prototype.next=function(){return this.Sp<this.R_.length?{done:!1,value:this.Tp(this.R_[this.Sp++])}:{done:!0,value:void 0}},t}(),Av="null";var Gr=w.create(null);Gr.ftp=21,Gr.file=0,Gr.gopher=70,Gr.http=80,Gr.https=443,Gr.ws=80,Gr.wss=443;var Sv=/^(?:\.|%2e)$/i,Tv=/^(?:\.|%2e){2}$/i;function kv(t){return Sv.test(t)}function Ev(t){return Tv.test(t)}function xv(t){return void 0!==Gr[t]}function Ci(t){return xv(t.kp)}function Rv(t){return""!==t.Ep||""!==t.xp}function Iv(t){var e=t.length;if(!(e>=2))return!1;if(!Pv(t.slice(0,2)))return!1;if(2!==e){var i=t[2];if(47!==i&&92!==i&&63!==i&&35!==i)return!1}return!0}function Cv(t){return 2===t.length&&Kf.test(t[0])&&(":"===t[1]||"|"===t[1])}function Pv(t){return 2===t.length&&Cv(p_(t))}function Dv(t){return Cv(t)&&":"===t[1]}function Nv(t){var e=t.Rp;0!==e.length&&("file"===t.kp&&1===e.length&&Dv(e[0])||e.pop())}function Mv(t){return null===t.Ip||Q_===t.Ip||t.Cp||"file"===t.kp}var qs=-1,Lv=/\t|\n|\r/g,Bv=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function Ov(t,e,i,s){void 0===i&&(i=null),void 0===s&&(s=null),i||(i=new Vv,t=t.replace(Bv,""));var n=null!==s?s:0;e=e||null;for(var r=[],o=!1,h=!1,a=!1,u=E_(t=t.replace(Lv,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:qs;switch(n){case 0:if(!a_(d)){if(null===s){r.length=0,n=2;continue}throw new b("Invalid scheme")}r.push(d_(d)),n=1;break;case 1:if(c_(d)||43===d||45===d||46===d)r.push(d_(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new b("Invalid scheme")}var f=Xs(r);if(null!==s){if(xv(i.kp)&&!xv(f))return;if(!xv(i.kp)&&xv(f))return;if((Rv(i)||null!==i.Pp)&&"file"===f)return;if("file"===i.kp&&(i.Ip===Q_||null===i.Ip))return}if(i.kp=f,null!==s)return void(Ci(i)&&i.Pp===Gr[i.kp]&&(i.Pp=null));r.length=0,"file"===i.kp?n=13:Ci(i)&&e&&e.kp===i.kp?n=3:Ci(i)?n=7:47===u[l+1]?(n=4,l+=1):(i.Cp=!0,i.Rp.push(""),n=18)}break;case 2:if(!e||e.Cp&&35!==d)throw new b("Invalid scheme");e.Cp&&35===d?(i.kp=e.kp,i.Rp=e.Rp.slice(),i.Ap=e.Ap,i.Dp="",i.Cp=!0,n=20):"file"!==e.kp?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:i.kp=e.kp,qs===d?(i.Ep=e.Ep,i.xp=e.xp,i.Ip=e.Ip,i.Pp=e.Pp,i.Rp=e.Rp.slice(),i.Ap=e.Ap):47===d?n=6:63===d?(i.Ep=e.Ep,i.xp=e.xp,i.Ip=e.Ip,i.Pp=e.Pp,i.Rp=e.Rp.slice(),i.Ap="",n=19):35===d?(i.Ep=e.Ep,i.xp=e.xp,i.Ip=e.Ip,i.Pp=e.Pp,i.Rp=e.Rp.slice(),i.Ap=e.Ap,i.Dp="",n=20):92===d&&Ci(i)?n=6:(i.Ep=e.Ep,i.xp=e.xp,i.Ip=e.Ip,i.Pp=e.Pp,i.Rp=e.Rp.slice(),i.Rp.pop(),n=17,l-=1);break;case 6:!Ci(i)||47!==d&&92!==d?47===d?n=9:(i.Ep=e.Ep,i.xp=e.xp,i.Ip=e.Ip,i.Pp=e.Pp,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){o&&r.unshift(37,52,48),o=!0;for(var _=0;_<r.length;_++){var v=r[_];if(58!==v||a){var m=Xs(X_(v,G_));a?i.xp+=m:i.Ep+=m}else a=!0}r.length=0}else if(qs===d||47===d||63===d||35===d||Ci(i)&&92===d){if(o&&0===r.length)throw new b("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===i.kp)l-=1,n=15;else if(58!==d||h)if(qs===d||47===d||63===d||35===d||Ci(i)&&92===d){if(l-=1,Ci(i)&&0===r.length)throw new b("Invalid host");if(null!==s&&0===r.length&&(Rv(i)||null!==i.Pp))return;var g=ev(Xs(r),Ci(i));if(i.Ip=g,r.length=0,n=16,null!==s)return}else 91===d?h=!0:93===d&&(h=!1),r.push(d);else{if(0===r.length)throw new b("Invalid host");var p=ev(Xs(r),Ci(i));if(i.Ip=p,r.length=0,n=12,11===s)return}break;case 12:if(u_(d))r.push(d);else{if(!(qs===d||47===d||63===d||35===d||Ci(i)&&92===d||null!==s))throw new b("Invalid port");if(0!==r.length){var w=x(Xs(r),10);if(w>65535)throw new b("Invalid port");i.Pp=w===Gr[i.kp]?null:w,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:i.kp="file",47===d||92===d?n=14:e&&"file"===e.kp?qs===d?(i.Ip=e.Ip,i.Rp=e.Rp.slice(),i.Ap=e.Ap):63===d?(i.Ip=e.Ip,i.Rp=e.Rp.slice(),i.Ap="",n=19):35===d?(i.Ip=e.Ip,i.Rp=e.Rp.slice(),i.Ap=e.Ap,i.Dp="",n=20):(Iv(u.slice(l))||(i.Ip=e.Ip,i.Rp=e.Rp.slice(),Nv(i)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(e&&"file"===e.kp&&!Iv(u.slice(l))&&(Dv(e.Rp[0])?i.Rp.push(e.Rp[0]):i.Ip=e.Ip),n=17,l-=1);break;case 15:if(qs===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&Pv(r))n=17;else if(0===r.length){if(i.Ip=Q_,null!==s)return;n=16}else{var y=ev(Xs(r),Ci(i));if(0===y.pp&&"localhost"===y.bp&&(y=Q_),i.Ip=y,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:Ci(i)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(i.Ap="",n=19):null===s&&35===d?(i.Dp="",n=20):qs!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(qs===d||47===d||Ci(i)&&92===d||null===s&&(63===d||35===d)){var A=Xs(r);if(Ev(A)?(Nv(i),47===d||Ci(i)&&92===d||i.Rp.push("")):!kv(A)||47===d||Ci(i)&&92===d?kv(A)||("file"===i.kp&&0===i.Rp.length&&Pv(r)&&(Q_!==i.Ip&&null!==i.Ip&&(i.Ip=Q_),r[1]=58,A=Xs(r)),i.Rp.push(A)):i.Rp.push(""),r.length=0,"file"===i.kp&&(qs===d||63===d||35===d))for(;i.Rp.length>1&&""===i.Rp[0];)i.Rp.shift();63===d?(i.Ap="",n=19):35===d&&(i.Dp="",n=20)}else r.push.apply(r,X_(d,U_));break;case 18:63===d?(i.Ap="",n=19):35===d?(i.Dp="",n=20):qs!==d&&(i.Rp[0]+=Xs(X_(d,V_)));break;case 19:null===s&&35===d?(i.Dp="",n=20):qs!==d&&(i.Ap+=Xs(X_(d,Ci(i)?Z_:H_)));break;case 20:qs===d||0===d||(i.Dp+=Xs(X_(d,W_)))}l++}return i}function Fv(t,e,i,s){try{Ov(t,e,i,s)}catch(t){}}var Vv=function(){this.kp="",this.Ep="",this.xp="",this.Ip=null,this.Pp=null,this.Rp=[],this.Ap=null,this.Dp=null,this.Cp=!1};function Wv(t){switch(t.kp){case"blob":var e;try{e=Ov(t.Rp[0],null)}catch(t){return Av}return Wv(e);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,e,i){return t+"://"+iv(e)+(null===i?"":":"+i)}(t.kp,t.Ip,t.Pp);default:return Av}}var Uv=function(){function t(t,e){var i,s=null;if(null!=e)if(function(t){return null!=t&&t instanceof Uv&&"object"==typeof t.Yu}(e))s=e.Yu;else try{s=Ov(String(e),null)}catch(t){throw new b("Invalid base URL: "+t.message)}try{i=Ov(String(t),s)}catch(t){throw new b("Invalid URL: "+t.message)}var n=i.Ap;this.Yu=i,this.Ap=function(t){var e=new uu;return null!==t&&vv(e,t),e}(n),this.Ap.Yu=this}var e=t.prototype;return e.toString=function(){return this.href},e.toJSON=function(){return this.href},function(t,e,i){e&&zf(t.prototype,e),i&&zf(t,i)}(t,[{key:"href",get:function(){return function(t,e){void 0===e&&(e=!1);var i=t.kp+":";if(null!==t.Ip?(i+="//",Rv(t)&&(i+=t.Ep,""!==t.xp&&(i+=":"+t.xp),i+="@"),i+=iv(t.Ip),null!==t.Pp&&(i+=":"+t.Pp)):null===t.Ip&&"file"===t.kp&&(i+="//"),t.Cp)i+=t.Rp[0];else for(var s=0,n=t.Rp;s<n.length;s++)i+="/"+n[s];return null!==t.Ap&&(i+="?"+t.Ap),e||null===t.Dp||(i+="#"+t.Dp),i}(this.Yu)},set:function(t){var e;try{e=Ov(String(t),null)}catch(t){throw new b("Invalid URL: "+t.message)}this.Yu=e,_v(this.Ap);var i=this.Yu.Ap;null!==i&&vv(this.Ap,i)}},{key:"origin",get:function(){return Wv(this.Yu)}},{key:"protocol",get:function(){return this.Yu.kp+":"},set:function(t){Fv(t+":",null,this.Yu,0)}},{key:"username",get:function(){return this.Yu.Ep},set:function(t){Mv(this.Yu)||(this.Yu.Ep=z_(t,G_))}},{key:"password",get:function(){return this.Yu.xp},set:function(t){Mv(this.Yu)||(this.Yu.xp=z_(t,G_))}},{key:"host",get:function(){var t=this.Yu,e=t.Ip;if(null===e)return"";var i=t.Pp,s=iv(e);return null!==i&&(s+=":"+i),s},set:function(t){this.Yu.Cp||Fv(t,null,this.Yu,10)}},{key:"hostname",get:function(){var t=this.Yu.Ip;return null===t?"":iv(t)},set:function(t){this.Yu.Cp||Fv(t,null,this.Yu,11)}},{key:"port",get:function(){var t=this.Yu.Pp;return null===t?"":""+t},set:function(t){Mv(this.Yu)||(""===t?this.Yu.Pp=null:Fv(t,null,this.Yu,12))}},{key:"pathname",get:function(){var t=this.Yu.Rp;return this.Yu.Cp?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.Yu.Cp||(this.Yu.Rp.length=0,Fv(t,null,this.Yu,16))}},{key:"search",get:function(){var t=this.Yu.Ap;return null===t||""===t?"":"?"+t},set:function(t){t=uv(t);var e=this.Yu;if(""===t)return e.Ap=null,void _v(this.Ap);"?"===t[0]&&(t=t.slice(1)),e.Ap="",Fv(t,null,e,19),vv(this.Ap,t)}},{key:"searchParams",get:function(){return this.Ap}},{key:"hash",get:function(){var t=this.Yu.Dp;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.Yu.Dp="",Fv(t,null,this.Yu,20)):this.Yu.Dp=null}}]),t}();function Gv(t){return t.document&&t.document.baseURI||t.location.href||""}function Hv(){let t=s,e=t.location.href;for(;t!==s.top;){t=t.parent;try{e=t.location.href}catch(t){}}return e}r();var Zv=class{Np(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Zf(...e)}Mp(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];lt(...e)}Lp(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Ur(...e)}Bp(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];Xf(t,...i)}Fg(t,e){return u(t,e)}Op(t,e){return p(t,e)}Og(t){v(t)}Fp(t){m(t)}Vp(){return this.Wp.Vp()}Up(){return this.Wp.Up()}Gp(){return this.Wp.Gp()}Hp(){return this.Wp.Hp()}Zp(){return this.Wp.Zp()}Xp(t,e){return this.Wp.Xp(t,e)}zp(t){return this.Wp.zp(t)}get qp(){return this.Yp}Ah(t,e){let i;return void 0===e&&(e=Gv(s)),i="object"!=typeof e||e instanceof Uv?e:e.href,new Uv(t,i)}Kp(t,e){if(void 0===e&&(e=Gv(s)),this.jp){const i=Kt(e)?e:e.toString();return new self.URL(t,i).href}return this.Ah(t,e).href}get Ys(){return this.Qp}get Jp(){return{$p:Ll&&Ll.userAgent.match(/Android /i)?"Android":"other",ew:Boolean(Ll&&Ll.userAgent.match(/Android 8.0.0/i))}}get iw(){return self&&self.location&&"https:"===self.location.protocol}get nw(){return"languages"in Ll?Ll.languages.slice():[Ll.language]}constructor(){this.Yp=new Xv,this.Qp=Rf,this.jp=zv(),self.performance&&self.performance.now?this.Bg=()=>self.performance.now():this.Bg=Fa}},Xv=class{get ow(){return Ll.oscpu}get Ys(){return Ll.platform}get hw(){return Ll.vendor}get aw(){return Ll.vendorSub}};function zv(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}function la(){return la=w.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)w.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},la.apply(this,arguments)}function qv(){const t=w.create(null);return t.uw=void 0,delete t.uw,t}function _u(){return new Qv}function $h(){return new Jv}function Yv(t){const e=_u();for(const i in t)Ba.call(t,i)&&e.set(i,t[i]);return e}function Kv(t){const e=[];return t.forEach((t=>e.push(t))),e}r(),r(),r();var jv="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,Qv=jv||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,e){this.index=0,this.data=t,this.selector=e,this.keys=w.keys(t)}}return class{get(t){return this.data[t]}set(t,e){return this.has(t)||this.size++,this.data[t]=e,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=qv(),this.size=0}keys(){return new t(this.data,((t,e)=>e))}values(){return new t(this.data,((t,e)=>t[e]))}entries(){return new t(this.data,((t,e)=>[e,t[e]]))}forEach(t){for(const e in this.data)t(this.data[e],e)}constructor(){this.data=qv(),this.size=0}}}();var Jv=jv||function(){class t{next(){const t=this.cw.next();return t.done?t:{value:this.lw(t.value),done:!1}}constructor(t,e){this.cw=t,this.lw=e}}return class{get size(){return this.x_.size}get(t){return this.x_.get(""+t)}set(t,e){return this.x_.set(""+t,e),this}has(t){return this.x_.has(""+t)}delete(t){return this.x_.delete(""+t)}clear(){this.x_.clear()}keys(){return new t(this.x_.keys(),(t=>Number(t)))}values(){return this.x_.values()}entries(){return new t(this.x_.entries(),(t=>{let[e,i]=t;return[Number(e),i]}))}forEach(t){this.x_.forEach(((e,i)=>{t(e,Number(i))}))}constructor(){this.x_=_u()}}}();r(),r();var $v=function(t){return t.dw="9a04f079-9840-4286-ab92-e65be0885f95",t.fw="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t._w="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.mw="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",t}({}),tm="urn:mpeg:dash:mp4protection:2011",em="cenc",im="sinf",sm="skd",nm="9a04f079-9840-4286-ab92-e65be0885f95",rm="urn:uuid:"+nm,Ga="com.microsoft.playready",om="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",hm="urn:uuid:"+om,am="com.widevine.alpha",um="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",cm="urn:uuid:"+um,lm="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Ve="urn:uuid:"+lm,dm="com.apple.fps.1_0",fm="com.apple.streamingkeydelivery",_m="identity";r();var Ne=function(t){return t.dw="playready",t.fw="widevine",t.mw="fairplay",t._w="clearkey",t.gw="aes128",t}({}),vm={pw:Ne.dw,ww:Ga,yw:"cenc",Aw:nm,Sw:rm,Tw:"PlayReady"},rn={pw:Ne.fw,ww:am,yw:"cenc",Aw:om,Sw:hm,Tw:"Widevine"},mm={pw:Ne.mw,ww:dm,yw:"skd",Aw:lm,Sw:Ve,Tw:"FairPlay"},gm={pw:Ne.mw,ww:"com.apple.fps",yw:"sinf",Aw:lm,Sw:Ve,Tw:"FairPlay"},pm={pw:Ne._w,ww:"org.w3.clearkey",yw:"cenc",Aw:um,Sw:cm,Tw:"ClearKey"},wm=[vm,rn,mm,pm],ym=[vm,rn,gm,pm];function bm(t){return wm.filter((e=>e.Sw===t.toLowerCase()))}r();var Am="function"==typeof String.prototype.replaceAll?(t,e,i)=>t.replaceAll(e,i):(t,e,i)=>t.split(e).join(i);function Dh(t,e){return ne(t)&&-1!==t.indexOf(e)}var Cl="function"==typeof String.prototype.startsWith?(t,e)=>ne(t)&&t.startsWith(e):(t,e)=>ne(t)&&t.substr(0,e.length)===e,Sm="function"==typeof String.prototype.endsWith?(t,e)=>ne(t)&&t.endsWith(e):(t,e)=>ne(t)&&t.substr(t.length-e.length,e.length)===e;function ch(t,e){return t.length===e.length&&t.toUpperCase()===e.toUpperCase()}var Tm="function"==typeof String.prototype.repeat?(t,e)=>t.repeat(e):(t,e)=>{let i=0|e;if(0===t.length||0===i)return"";let s=t,n="";for(;1==(1&i)&&(n+=s),i>>>=1,0!==i;)s+=s;return n},Uo="function"==typeof String.prototype.padStart?(t,e,i)=>(void 0===i&&(i=" "),t.padStart(e,i)):(t,e,i)=>{void 0===i&&(i=" ");let s=i;const n=(0|e)-t.length;return n<=0?t:(n>s.length&&(s+=Tm(s,n/s.length)),s.slice(0,n)+t)},km=(String.prototype.padEnd,16384),Em="function"==typeof String.fromCodePoint?t=>t.length<=km?String.fromCodePoint(...t):Rm(t,String.fromCodePoint):t=>{const e=[];for(let i of t)i>65535&&(i-=65536,e.push(i>>>10&1023|55296),i=56320|1023&i),e.push(i);return xm(e)};function xm(t){return t.length<=km?String.fromCharCode(...t):Rm(t,String.fromCharCode)}function Rm(t,e){const i=[];for(let s=0;s<t.length;s+=km)i.push(e(...t.slice(s,s+km)));return i.join("")}function Im(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}var Cm=Z.fm&&Z.vm>=42||Z.zm&&Z.Ym>=38||Z.Fm||Z.Gm||Z.eg&&Z.og>=29;function Pm(t,e){return Dh(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[la({contentType:t},e?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[la({contentType:t},e?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function lr(){return void 0!==Ll&&"function"==typeof Ll.requestMediaKeySystemAccess}function Dm(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var Nm=class{Zp(){return this.zp(rn)}Up(){return this.zp(pm)}Hp(){return this.zp(vm)}Gp(){return this.zp(mm)}zp(t){const e=t.Sw,i=this.Ew.get(e);if(i)return i;const s=this.Xp(t,'video/mp4; codecs="avc1.42000a"');return this.Ew.set(e,s),s}async Xp(t,e){try{return await this.Rw.xw(t.ww,[Pm(e,!0)]),!0}catch(i){try{return await this.Rw.xw(t.ww,[Pm(e,!1)]),!0}catch(t){return!1}}}Vp(){return this.Iw||(this.Iw=this.Cw()),this.Iw}async Cw(){return"https:"!==s.location.protocol&&(!!Cm&&!await this.Up())}constructor(t){this.Ew=_u(),this.Iw=void 0,this.Rw=t}};function Bi(t,e){return Lm(t.slice(),e)}function Mm(t,e){const i=Lm(t,e);return i!==t&&Bm(i,void 0,t.length,t),t}function Lm(t,e){let i=t;const s=i.length;if(s<=1)return i;let n=new Array(s);for(let t=1;t<s;t*=2){Bm(i,e,t,n);const s=i;i=n,n=s}return i}function Bm(t,e,i,s){const n=t.length;let r=0;const o=2*i;let h,a,u,c,l;for(a=0;a<n;a+=o)for(u=a+i,h=u+i,u>n&&(u=n),h>n&&(h=n),c=a,l=u;;)if(c<u&&l<h)e&&e(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<h))break;s[r++]=t[l++]}}r(),r(),r(),r(),r(),r(),r(),r(),r();var Qc=function(t){return t[t.Zr=0]="Zr",t[t.Pw=1]="Pw",t[t.Dw=-1]="Dw",t}({}),Om=(t,e)=>(0|t)-(0|e),su=(t,e)=>t===e?0:t<e?-1:t>e?1:S(t)?S(e)?0:1:-1;function Fm(t,e,i){return Cs(t,e,i)?0:su(t,e)}var Vm=(t,e)=>mh(t,e)?0:su(t,e);var Wm="function"==typeof Array.prototype.find?(t,e)=>t.find(e):(t,e)=>{const i=Lr(t,e);return-1===i?void 0:t[i]},Ti=Wm,Um="function"==typeof Array.prototype.findLast?(t,e)=>t.findLast(e):(t,e)=>{const i=Hm(t,e);return-1===i?void 0:t[i]},Gm=Um,Lr="function"==typeof Array.prototype.findIndex?(t,e)=>t.findIndex(e):(t,e)=>{for(let i=0;i<t.length;i+=1){if(e(t[i],i,t))return i}return-1},Hm="function"==typeof Array.prototype.findLastIndex?(t,e)=>t.findLastIndex(e):(t,e)=>{for(let i=t.length-1;i>=0;i-=1){if(e(t[i],i,t))return i}return-1};function we(t,e){const i=t.indexOf(e);return-1!==i&&(Ko(t,i),!0)}function Ko(t,e){0===e?t.shift():t.splice(e,1)}function Zm(t,e){const i=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===e){n++,i.length-=1;break}i[s++]=t[n++]}for(;n<t.length;)i[s++]=t[n++];return i}function qt(t,e){return-1!==t.indexOf(e)}function Xm(t,e,i){if(t===e)return!0;if(t.length!==e.length)return!1;for(let s=0;s<t.length;s+=1)if(!i(t[s],e[s]))return!1;return!0}function Pn(t){t.length=0}function zm(t,e){if(t.length!==e.length)return!1;for(const i of t)if(!qt(e,i))return!1;return!0}Array.prototype.flat;var Ke="function"==typeof Array.prototype.flatMap?(t,e)=>t.flatMap(e):(t,e)=>{const i=[];for(let s=0;s<t.length;s++)i.push(...e(t[s],s));return i};function Gs(t,e){return Ym(t,((t,i)=>su(e(t),e(i))))}function qm(t,e){return Km(t,((t,i)=>su(e(t),e(i))))}function Ym(t,e){if(0!==t.length)return t.reduce(((t,i)=>e(t,i)<=0?t:i))}function Km(t,e){return Ym(t,((t,i)=>e(i,t)))}function jm(t){return t.filter(((e,i)=>t.indexOf(e)===i))}function Qm(t,e){return Promise.all(t.map(e)).then((e=>t.filter(((t,i)=>e[i]))))}function Jm(t,e,i){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!i(t[s],e[s]))return!1;return!0}function rs(t,e,i){if(null!=e){if("object"!=typeof e&&"function"!=typeof e)throw new b("Object expected.");var s,n;if(i){if(!At)throw new b("Symbol.asyncDispose is not defined.");s=e[At]}if(void 0===s){if(!El)throw new b("Symbol.dispose is not defined.");s=e[El],i&&(n=s)}if("function"!=typeof s)throw new b("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(t){return Promise.reject(t)}}),t.stack.push({value:e,dispose:s,async:i})}else i&&t.stack.push({async:!0});return e}r(),r(),r();var $m="function"==typeof SuppressedError?SuppressedError:function(t,e,i){var s=new g(i);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function ae(t){function e(e){t.error=t.hasError?new $m(e,t.error,"An error was suppressed during disposal."):e,t.hasError=!0}var i,s=0;return function n(){for(;i=t.stack.pop();)try{if(!i.async&&1===s)return s=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var r=i.dispose.call(i.value);if(i.async)return s|=2,Promise.resolve(r).then(n,(function(t){return e(t),n()}))}else s|=1}catch(t){e(t)}if(1===s)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}r(),r();var tg=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];g.apply(this,e)};(tg.prototype=w.create(g.prototype)).constructor=tg;var pt=class extends tg{get name(){return"BaseError"}constructor(t,e){super(),this.message=t||"Unknown error",this.cause=e,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}},$=class extends pt{get name(){return"AbortError"}constructor(t,e){super(t||"Aborted",e)}};function Se(t){return t instanceof g&&"AbortError"===t.name}function ot(t){if(t&&t.Nw)throw new $}function Zr(t){if(Se(t))throw t}function Pu(t){if(!Se(t))throw t}function hu(t,e){return e?new Promise(((i,s)=>{if(e.Nw)return t.catch(Bt),s(new $);const n=()=>{e.Mw(n),s(new $)};e.Lw(n),t.then((t=>{e.Mw(n),i(t)}),(t=>{e.Mw(n),s(t)}))})):t}async function go(t,e){const i={stack:[],error:void 0,hasError:!1};try{rs(i,e,!1);return await t}catch(t){i.error=t,i.hasError=!0}finally{ae(i)}}async function eg(t,e){const i={stack:[],error:void 0,hasError:!1};try{rs(i,e,!1);return await t(e.Bw)}catch(t){i.error=t,i.hasError=!0}finally{ae(i)}}r(),r();var ig=class{Ow(){if(!this.Nw&&!this.Fw){this.Nw=!0;for(const t of this.Vw.slice())t();this.Ww()}}Ww(){if(!this.Fw){this.Fw=!0;for(const t of this.Uw.slice())t();Pn(this.Vw),Pn(this.Uw)}}Lw(t){this.Fw||this.Vw.push(t)}Mw(t){this.Fw||we(this.Vw,t)}Gw(t){this.Fw||this.Uw.push(t)}Hw(t){this.Fw||we(this.Uw,t)}constructor(){this.Nw=!1,this.Fw=!1,this.Vw=[],this.Uw=[]}},$t=class t{get Bw(){return this.Zw}Xw(){this.Zw.Ow()}Ww(){this.Zw.Ww()}zw(t){const e=this.Zw;if(e.Nw)return;if(t.Nw)return void e.Ow();if(e.Fw||t.Fw)return;const i=()=>{s(),e.Ow()},s=()=>{t.Mw(i),t.Hw(s),e.Mw(i),e.Hw(s)};t.Lw(i),t.Gw(s),e.Lw(i),e.Gw(s)}qw(){const e=new t,i=new t,s=e.Bw,n=i.Bw,r=this.Zw,o=()=>{s.Nw&&n.Fw||n.Nw&&s.Fw?r.Ow():s.Fw&&n.Fw&&r.Ww()};s.Lw(o),n.Lw(o),s.Gw(o),n.Gw(o),e.zw(r),i.zw(r);return r.Gw((()=>{s.Mw(o),n.Mw(o),s.Hw(o),n.Hw(o)})),[e,i]}static Yw(e){const i=new t;for(const t of e)void 0!==t&&i.zw(t);return i}[El](){this.Xw()}constructor(){this.Zw=new ig}},sg=Promise.resolve(),di="function"==typeof queueMicrotask?queueMicrotask:t=>{sg.then(t)};function oh(t){t.then(Bt,Bt)}async function Us(t){try{return await Promise.all(t)}catch(e){throw await Promise.all(t.map((t=>t.catch(Bt)))),e}}function on(t,e){return new Promise(((i,s)=>{if(void 0!==e&&e.Nw)return void s(new $);const n=As.Fg((()=>{void 0!==e&&e.Mw(r),i()}),t),r=()=>{As.Og(n),s(new $)};void 0!==e&&e.Lw(r)}))}async function ng(t,e){const i={stack:[],error:void 0,hasError:!1};try{const s=rs(i,new $t,!1);return await Promise.race([t,on(e,s.Bw).then((()=>{throw new g("Timeout")}))])}catch(t){i.error=t,i.hasError=!0}finally{ae(i)}}function rg(t,e,i){if("function"==typeof i)i.call(t,e);else for(const s of i)s.call(t,e)}var Bo=class{yn(t,e){if("function"==typeof e)if("string"==typeof t)this.Kw(t,e);else for(const i of t)this.Kw(i,e)}Kw(t,e){const i=this.jw[t];void 0===i?this.jw[t]=e:"function"==typeof i?this.jw[t]=[i,e]:0===this.Qw?i.push(e):this.jw[t]=i.concat(e)}Jw(t){if("function"!=typeof t)return;const e=this.$w;void 0===e?this.$w=t:"function"==typeof e?this.$w=[e,t]:0===this.Qw?e.push(t):this.$w=e.concat(t)}Bo(){this.jw=qv(),this.$w=void 0}yo(t){this.Qw++;const e=this.jw[t.type],i=this.$w;void 0!==e&&rg(this.ey,t,e),void 0!==i&&rg(this.ey,t,i),this.Qw--}fn(t,e){if("function"==typeof e)if("string"==typeof t)this.iy(t,e);else for(const i of t)this.iy(i,e)}iy(t,e){const i=this.jw[t];void 0!==i&&("function"==typeof i?i===e&&(this.jw[t]=void 0):0===this.Qw?we(i,e):this.jw[t]=Zm(i,e))}sy(t){if("string"==typeof t)this.jw[t]=void 0;else for(const e of t)this.jw[e]=void 0}oy(t){const e=this.$w;void 0!==e&&("function"==typeof e?e===t&&(this.$w=void 0):0===this.Qw?we(e,t):this.$w=Zm(e,t))}uy(t,e){return new Promise(((i,s)=>{if(e&&e.Nw)return s(new $);const n=t=>{o(),i(t)},r=()=>{o(),s(new $)},o=()=>{this.fn(t,n),e&&e.Mw(r)};this.yn(t,n),e&&e.Lw(r)}))}constructor(t){this.jw=qv(),this.$w=void 0,this.Qw=0,this.Ds=t=>{this.yo(t)},this.ey=null!=t?t:this}},og=class extends Bo{yo(t){di((()=>{super.yo(t)}))}},Je=class extends Bo{Jw(t){super.Jw(t)}oy(t){super.oy(t)}};r(),r();var pe=class{constructor(t,e=new Date){this.type=t,this.date=e}};r();var Mi=function(t){return t.ly="_y",t.vy="gy",t.py="contentprotectionerror",t.wy="contentprotectionsuccess",t.yy="currentsourcechange",t.Ay="destroy",t.Sy="durationchange",t.Ty="emptied",t.Ey="encrypted",t.xy="ended",t.Ry="Iy",t.Cy="Py",t.Dy="Ny",t.My="Ly",t.By="loadstart",t.Oy="manifestupdate",t.Fy="nosupportedrepresentationfound",t.Vy="offline",t.Wy="online",t.Uy="pause",t.so="play",t.Gy="progress",t.Hy="ratechange",t.Zy="representationchange",t.Xy="resize",t.zy="seeked",t.qy="seeking",t.Yy="segmentnotfound",t.Ky="jy",t.Qy="Jy",t.ro="sourcechange",t.$y="timeupdate",t.eb="volumechange",t.ib="sb",t.ob="hb",t.ub="metricschange",t}({}),hg=["cenc"],ag=["cbcs","cbcs-1-9"],ie=class extends pe{constructor(t){super(Mi.ob),this.fb=t}},Sh=class extends pe{constructor(t,e,i,s){super("_b"),this.vb=t,this.mb=e,this._b=i,this.gb=s}},ug=class extends pe{constructor(){super("lt")}},rh=function(t){return t.Ey="pb",t.wb="yb",t}({}),cg=class extends pe{constructor(t,e){super("pb"),this.yw=t,this.bb=e}},lg=class extends pe{constructor(){super("yb")}};r(),r(),r();var uh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),dg=16383,fg=/[\t\n\f\r ]/g;function bh(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:_g()}function _g(){throw new g("Invalid base64 input")}function Da(t){let e=t;fg.test(e)&&(e=e.replace(fg,""));let i=e.length;i%4==0&&i>=1&&"="===e[i-1]&&(i>=2&&"="===e[i-2]?i-=2:i-=1,e=e.substr(0,i));const s=i%4;if(1===s)return _g();const n=0===s?0:4-s,r=new j(function(t,e){return 3*(t+e)/4-e}(i,n)),o=n>0?i-4:i;let h,a=0,u=0;for(;a<o;a+=4)h=bh(e.charCodeAt(a))<<18|bh(e.charCodeAt(a+1))<<12|bh(e.charCodeAt(a+2))<<6|bh(e.charCodeAt(a+3)),r[u++]=h>>16&255,r[u++]=h>>8&255,r[u++]=255&h;return 2===n?(h=bh(e.charCodeAt(a))<<2|bh(e.charCodeAt(a+1))>>4,r[u++]=255&h):1===n&&(h=bh(e.charCodeAt(a))<<10|bh(e.charCodeAt(a+1))<<4|bh(e.charCodeAt(a+2))>>2,r[u++]=h>>8&255,r[u++]=255&h),r}function vg(t,e,i){return uh[t>>2]+uh[(3&t)<<4|e>>4]+uh[(15&e)<<2|i>>6]+uh[63&i]}function mg(t,e,i){const s=[];for(let n=e;n<i;n+=3)s.push(vg(t[n],t[n+1],t[n+2]));return s.join("")}function ea(t){const e=t.length,i=e%3,s=[],n=e-i;for(let e=0;e<n;e+=dg)s.push(mg(t,e,_.min(n,e+dg)));if(1===i){const i=t[e-1];s.push(uh[i>>2]+uh[(3&i)<<4]+"==")}else if(2===i){const i=t[e-2],n=t[e-1];s.push(uh[i>>2]+uh[(3&i)<<4|n>>4]+uh[(15&n)<<2]+"=")}return s.join("")}function gg(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}function Oa(t,e){const i=e.tc,s=t.getUint8(i>>3),n=1<<7-(7&i);return e.Ab(1),(s&n)===n?1:0}function Co(t,e,i){let s=0;for(let n=0;n<i;n++)s=2*s+Oa(t,e);return s}r(),r();var pg=class t{get tc(){return this.ic}Ab(t){this.ic+=t}Sb(t){this.ic=t}Tb(){return new t(this.tc)}constructor(t=0){this.ic=t}};var wg=_.clz32||function(t){let e=32,i=t>>16;return i&&(e-=16,t=i),i=t>>8,i&&(e-=8,t=i),i=t>>4,i&&(e-=4,t=i),i=t>>2,i&&(e-=2,t=i),i=t>>1,i?e-2:e-t};function yg(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function bg(t,e){return t>>e&63|128}function Ag(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(yg(t),e.push(t>>12&15|224),e.push(bg(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(bg(t,12)),e.push(bg(t,6))),e.push(63&t|128)):e.push(t)}function Sg(t,e){if(e.tc>=t.length)throw new g("Invalid byte index");const i=255&t[e.tc];if(e.Ab(1),128==(192&i))return 63&i;throw new g("Invalid continuation byte")}function Tg(t,e){const i=e.tc;if(i>t.length)throw new g("Invalid byte index");if(i===t.length)return!1;const s=255&t[i];if(e.Ab(1),0==(128&s))return s;if(192==(224&s)){const i=(31&s)<<6|Sg(t,e);if(i>=128)return i;throw new g("Invalid continuation byte")}if(224==(240&s)){const i=(15&s)<<12|Sg(t,e)<<6|Sg(t,e);if(i>=2048)return yg(i),i;throw new g("Invalid continuation byte")}if(240==(248&s)){const i=(7&s)<<18|Sg(t,e)<<12|Sg(t,e)<<6|Sg(t,e);if(i>=65536&&i<=1114111)return i}throw new g("Invalid UTF-8 detected")}r(),r();var kg=65279;var Eg=[128,64,32,16,8,4,2,1],xg=class{kb(t){return Rg(this.Eb,t)}constructor(t){this.Eb=t}};function Rg(t,e){return(t&e)===e}function sl(t,e){return Rg(t,Eg[e])}function hc(t,e){const i=t.getUint8(e.tc);return e.Ab(1),i}function Ig(t,e,i){t.setUint8(e.tc,i),e.Ab(1)}function E(t,e,i){const s=ei(Th(t),e.tc,e.tc+i);return e.Ab(s.byteLength),s}function Cg(t,e,i){Th(t).set(Th(i),e.tc),e.Ab(i.byteLength)}function Pg(t,e,i){return e.tc+i<=t.byteLength}function Dg(t,e,i,s){return void 0===s&&(s=!1),s?function(t,e,i){let s=0,n=1;for(let r=0;r<i;r++)s+=hc(t,e)*n,n*=256;return s}(t,e,i):function(t,e,i){let s=0;for(let n=0;n<i;n++)s=256*s+hc(t,e);return s}(t,e,i)}function Ng(t,e){const i=t.getUint8(e.tc);return e.Ab(1),i}function Ni(t,e,i){void 0===i&&(i=!1);const s=t.getUint16(e.tc,i);return e.Ab(2),s}function Mg(t,e,i,s){void 0===s&&(s=!1),t.setUint16(e.tc,i,s),e.Ab(2)}function os(t,e,i){void 0===i&&(i=!1);const s=t.getUint32(e.tc,i);return e.Ab(4),s}function Lg(t,e,i,s){void 0===s&&(s=!1),t.setUint32(e.tc,i,s),e.Ab(4)}function Qr(t,e,i){void 0===i&&(i=!1);const s=os(t,e,i),n=os(t,e,i),r=i?n:s,o=i?s:n;return fo.fromBits(o,r,!0)}function Bg(t,e,i,s){void 0===s&&(s=!1);const n=i.getHighBitsUnsigned(),r=i.getLowBitsUnsigned(),o=s?n:r;Lg(t,e,s?r:n,s),Lg(t,e,o,s)}function Og(t,e){return io(t,e)}function Sc(t,e,i){return xm($g(E(t,e,i)))}function Fg(t,e){const i=hc(t,e);let s;return 0==(128&i)?s=i:192==(224&i)?s=64*(31&i)+(63&hc(t,e)):224==(240&i)?s=4096*(15&i)+64*(63&hc(t,e))+(63&hc(t,e)):240==(248&i)&&(s=262144*(7&i)+4096*(63&hc(t,e))+64*(63&hc(t,e))+(63&hc(t,e))),s}function io(t,e){return Vg(t,e,!0)}function Vg(t,e,i){const s=[];for(;e.tc<t.byteLength;){const n=hc(t,e);if(i&&!n)break;s.push(n)}return xm(s)}function Wg(t,e,i){const s=i.length;for(let n=0;n<s;n+=1){Ig(t,e,i.charCodeAt(n))}}function Ug(t,e){if(!(e.tc+2<=t.byteLength))return;const i=t.getUint8(e.tc),s=t.getUint8(e.tc+1);return(254!==i||255!==s)&&(255===i&&254===s||void 0)}function Gg(t,e){const i=Ug(t,e);return void 0!==i&&e.Ab(2),mr(t,e,!0===i)}function mr(t,e,i){return void 0===i&&(i=!1),Hg(t,e,i,!0)}function Hg(t,e,i,s){const n=[];for(;e.tc+2<=t.byteLength;){const r=Ni(t,e,i);if(s&&!r)break;n.push(r)}return xm(n)}function Zg(t,e,i,s){void 0===s&&(s=!1);const n=i.length;for(let r=0;r<n;r+=1){Mg(t,e,i.charCodeAt(r),s)}}function ah(t){return Vg(na(t),new Ui,!1)}function gr(t){const e=new j(t.length);return Wg(na(e),new Ui,t),e}function Xg(t,e){return void 0===e&&(e=!1),Hg(na(t),new Ui,e,!1)}function zg(t,e){void 0===e&&(e=!1);const i=new j(2*t.length);return Zg(na(i),new Ui,t,e),i}function qg(t,e){return e.tc+3<=t.byteLength&&(239===t.getUint8(e.tc)&&187===t.getUint8(e.tc+1)&&191===t.getUint8(e.tc+2))}function Yg(t,e){return function(t,e,i){const s=[],n=qg(t,e);n&&e.Ab(3);for(;e.tc<t.byteLength;){const n=Fg(t,e);if(void 0===n)break;if(i&&0===n)break;s.push(n)}return Em(s)}(t,e,!0)}function Kg(t){return function(t){return Em(t)}(function(t,e){const i=[],s=new Ui;let n;if(!e){if(n=Tg(t,s),!1===n)return i;n===kg||i.push(n)}for(;!1!==(n=Tg(t,s));)i.push(n);return i}(Th(t)))}function jg(t){return new j(function(t){const e=[];for(const i of t)Ag(i,e);return e}(function(t){const e=[];let i=0;const s=t.length;for(;i<s;){const n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){const s=t.charCodeAt(i++);56320==(64512&s)?e.push(((1023&n)<<10)+(1023&s)+65536):(e.push(n),i--)}else e.push(n)}return e}(t)))}function Qg(t,e){if(qg(t,e))return Yg(t,e);if(void 0!==Ug(t,e))return Gg(t,e);if(e.tc+4<=t.byteLength){if(0===t.getUint8(e.tc)&&0===t.getUint8(e.tc+2))return mr(t,e,!1);if(0===t.getUint8(e.tc+1)&&0===t.getUint8(e.tc+3))return mr(t,e,!0)}return Yg(t,e)}function ei(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new j(t.buffer,t.byteOffset+e,i-e)}function pu(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+e,i-e)}function na(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Th(t){return new j(t.buffer,t.byteOffset,t.byteLength)}function Jg(t){return t instanceof ArrayBuffer||or(t)}function zo(t){return t instanceof ArrayBuffer?new j(t):Th(t)}function Rc(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),t.slice?t.slice(e,i):_c(ei(t,e,i))}function _c(t){if(t.slice)return t.slice(0);{const e=new j(t.byteLength);return e.set(t,0),e}}function $g(t){return[].slice.call(t)}var Ui=class t{get tc(){return this.ic}Ab(t){this.ic+=t}Sb(t){this.ic=t}Tb(){return new t(this.tc)}xb(){return new pg(this.tc<<3)}constructor(t=0){this.ic=t}};function tp(t){let e=t.toLowerCase(),i=0,s=0;Cl(e,"0x")&&(e=e.substring(2));const n=new j(_.ceil(e.length/2));for(1==(1&e.length)&&(i=1,n[s++]=x(e[0],16));i<e.length;i+=2)n[s++]=x(e.substr(i,2),16);return n}function ep(t){return.001*t}var ip=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],or=ArrayBuffer.isView||(t=>t&&qt(ip,gd.call(t)));function Ah(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;return _e(new j(t),new j(e))}function _e(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;for(let i=0;i<t.length;i+=1)if(t[i]!==e[i])return!1;return!0}function sp(t,e){return t===e||_e(zo(t),zo(e))}function ju(t){const e=t.reduce(((t,e)=>t+e.byteLength),0);return np(t,e)}function np(t,e){const i=new j(e);let s=0;for(const e of t)i.set(e,s),s+=e.byteLength;return i}function rp(t,e,i){const s=new j(t.byteLength+e.byteLength),n=ei(t,0,i),r=ei(t,i);return s.set(n),s.set(e,i),s.set(r,i+e.byteLength),s}function op(t){return Da(t).buffer}function hp(t){return ea(new j(t))}function vr(t){return ea(gr(t))}var ap=new j([0]).buffer,up=class{get Rb(){return this.Qu.length}Ib(t){for(const e of this.Qu)if(sp(e[0],t))return!0;return!1}Cb(t){for(const e of this.Qu)if(sp(e[0],t))return e[1]}Pb(t,e){for(const i of this.Qu)if(sp(i[0],t))return void(i[1]=e);this.Qu.push([t,e])}Db(t,e){this.Qu.forEach((e=>t(e[1],e[0])),e)}Nb(){Pn(this.Qu)}constructor(){this.Qu=[]}};r();var as=class{Mb(t){this.Vd&&(this.Vd(t),this.Ww())}Lb(t){this.Wd&&(this.Wd(t),this.Ww())}Xw(){this.Bb.catch(Bt),this.Lb(new $)}zw(t){t.then((t=>this.Mb(t)),(t=>this.Lb(t)))}Ww(){this.Vd=void 0,this.Wd=void 0}constructor(){this.Bb=new Promise(((t,e)=>{this.Vd=t,this.Wd=e}))}};function cp(){return new j([8,4]).buffer}function lp(t,e){return t===Ga?function(t){if(t.byteLength<2*dp.length)return t;const e=new DataView(t,0,2*dp.length),i=Xg(e,!0);if(i===dp)return t;return function(t){const e='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',i='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+e+hp(t)+i;return zg(s,!0).buffer}(t)}(e):e}r();var dp="<PlayReady";r(),r();var Qs=class extends pt{constructor(t,e,i,s){super(t,s),this.Ob=e,this.Fb=i}};r(),r(),r(),r(),r();var fp=function(t,e){return(fp=w.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)w.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function ki(t,e){if("function"!=typeof e&&null!==e)throw new b("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}fp(t,e),t.prototype=null===e?w.create(e):(i.prototype=e.prototype,new i)}function _p(t,e,i){return t.indexOf?t.indexOf(e,i):Array.prototype.indexOf.call(t,e,i)}r(),r(),r(),r(),r(),r(),r();!function(){function t(t,e){this.Vb=t,this.Wb=e}t.prototype.get=function(t){var e=this.Vb.get(t);if(0===this.Wb||void 0===e)return e;var i=this.Vb.get(t+1)||0,s=e&(1<<8-this.Wb)-1,n=i>>8-this.Wb;return(s<<this.Wb)+n},t.prototype.getBit=function(t){if(!(t<0)){var e=this.Vb.get(_.floor((t+this.Wb)/8));if(void 0!==e)return(e&1<<7-this.Wb-t%8)>0?1:0}},w.defineProperty(t.prototype,"bitLength",{get:function(){return this.Vb.bitLength-this.Wb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"length",{get:function(){return this.Vb.length},enumerable:!1,configurable:!0})}();r(),r();_.pow(2,-52);function vp(t,e,i){return _.min(_.max(t,e),i)}function mp(t,e){return t>>8-e}function gp(t,e){return t&(1<<e)-1}var pp=function(){function t(t){this.Ub=t,this.Gb=0,this.Hb=0}return w.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.Gb+this.Hb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"done",{get:function(){return this.Gb===this.Ub.length&&0===this.Hb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"location",{get:function(){return{byte:this.Gb,bit:this.Hb}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var e=new t(this.Ub);return e.seek(this.Gb,this.Hb),e},t.prototype.canReadBits=function(t){return 8*this.Gb+t+this.Hb<=8*this.Ub.length},t.prototype.canReadBytes=function(t){return 0===this.Hb?this.Gb+t<=this.Ub.length:this.Gb+t<this.Ub.length},t.prototype.incBit=function(){this.Hb++,this.Hb>7&&(this.Gb++,this.Hb=0)},t.prototype.seek=function(t,e){this.Gb=t,this.Hb=e},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new g("Cannot read past end of buffer.");return this.Ub.get(this.Gb)>>7-this.Hb&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new g("Cannot read past end of buffer.");if(0===this.Hb)return this.Ub.get(this.Gb++);var t=gp(this.Ub.get(this.Gb),8-this.Hb),e=mp(this.Ub.get(this.Gb+1),this.Hb);return this.Gb++,t<<this.Hb|e},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");for(var e=[],i=0;i<t;i++)e.push(this.readBit());return e},t.prototype.readUInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var e=0;if(0===this.Hb&&t%8==0)for(var i=t-8;i>=0;i-=8)e|=this.readByte()<<i;else for(i=t-1;i>=0;i--)e|=this.readBit()<<i;return e},t.prototype.readInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var e=this.readUInt(t);return 0===(e&1<<t-1)?e:e-_.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var e=1<<t;return e+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new g("Skipping over the buffer edge is not allowed.");var e=this.Hb+t;this.Gb+=e>>3,this.Hb=7&e},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new g("Cannot read past end of buffer.");for(var e=[],i=0;i<t;i++)e.push(this.readByte());return String.fromCharCode.apply(String,e)},t}();r(),r(),r();var wp=function(t,e){return t===e?0:t<e?-1:t>e?1:S(t)?S(e)?0:1:-1},L=function(){function t(){this.Zb=[],this.Xb=[],this.zb=0}return t.from=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var s=new t,n=0,r=e;n<r.length;n++){var o=r[n];s.pushRange(o)}return s},t.prototype.pushRange=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=t.length),i<0)throw new g("The buffer length must be positive.");if(0!==i){if(0===this.Xb.length)this.Xb.push(0);else{var s=this.Xb[this.Xb.length-1]+this.Zb[this.Zb.length-1].length;this.Xb.push(s)}this.Zb.push(t.subarray(e,e+i)),this.zb+=i}},t.prototype.concat=function(e){var i=new t;return i.pushRange(this.join()),i.pushRange(e.join()),i},t.prototype.copy=function(t,e,i,s){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=this.length),e<0||i<0||s<0)throw new RangeError;return this.slice(i,s).copyInternal(t,e)},t.prototype.copyInternal=function(t,e){for(var i=0,s=e,n=0,r=this.Zb;n<r.length;n++){var o=r[n];t.set(o,s),i+=o.length,s+=o.length}return i},t.prototype.clear=function(){this.Zb=[],this.Xb=[],this.zb=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var e=this.findContainingBufferIndex(t),i=t-this.Xb[e];return this.Zb[e][i]}},w.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.Zb.length<1)return-1;if(this.Zb.length>1){var e=this.join();this.clear(),this.pushRange(e)}var i=this.Zb[0];return"number"==typeof t?_p(i,t):"undefined"!=typeof Buffer?Buffer.from(i.buffer,i.byteOffset,i.byteLength).indexOf(t):function(t,e){if(0===e.length)return 0;for(var i=e[0],s=e.length,n=t.length-s,r=0;r<=n&&!((r=_p(t,i,r))<0||r>n);r++){for(var o=r+1,h=r+s,a=1;o<h&&t[o]===e[a];o++,a++);if(o===h)return r}return-1}(i,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,e,i){if(0!==t.length){var s=0,n=t.length-1;if(1!==i(t[s],e)){if(1===i(e,t[n]))return n;for(;s!==n;){var r=_.ceil((s+n)/2);i(t[r],e)<=0?s=r:n=r-1}return s}}}(this.Xb,t,wp)},t.prototype.join=function(){if(1===this.Zb.length)return this.Zb[0];var t=new j(this.length);return this.copyInternal(t,0),t},w.defineProperty(t.prototype,"length",{get:function(){return this.zb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,e){if(e<=0||e>4)throw new g("Expected byteLength to be between 0 and 4 but was "+e);if(t<0||t>this.length-e)throw new g("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-e)+")");if(1===e)return this.get(t);for(var i=0,s=0;s<e;s++)i+=this.get(t+s)*_.pow(2,8*(e-s-1));return i},t.prototype.slice=function(e,i){void 0===i&&(i=this.length);var s=vp(e,0,this.length),n=vp(i,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,o=this.findContainingBufferIndex(s),h=this.Zb[o],a=s,u=a-this.Xb[o];a+h.length-u<n;)r.pushRange(h,u,h.length-u),o+=1,u=(a+=h.length-u)-this.Xb[o],h=this.Zb[o];var c=n-a;return r.pushRange(h,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var e=this.length-1,i=this.Zb.length-1,s=this.Zb[i],n=s.length-1;e>=0&&i>=0;){if(0!==s[n])break;if(0===n){if(0===i)return new t;i-=1,n=(s=this.Zb[i]).length-1}else n-=1;e-=1}return this.slice(0,e+1)},t}(),yp=function(){function t(e){this.qb=e||t.BUFFER_CHUNK_SIZE,this.Yb=!1,this.Kb=new L,this.Ub=new j(this.qb),this.jb=0,this.Qb=0,this.Hb=7}return t.prototype.closeByte=function(){this.Ub[this.jb++]=this.Qb,this.jb>=this.qb&&this.closeBuffer(),this.Qb=0,this.Hb=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.jb&&(this.Kb.pushRange(this.Ub,0,this.jb),t&&(this.Ub=new j(this.qb)),this.jb=0)},w.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.Hb},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.Yb)throw new g("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.Yb=!0,this.Kb},t.prototype.writeBit=function(t){if(this.Yb)throw new g("Cannot write to a closed BitWriter.");this.Qb|=t<<this.Hb,0===this.Hb?this.closeByte():this.Hb--},t.prototype.writeByte=function(t){if(this.Yb)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.Qb=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var e=this.Hb;this.Qb|=mp(t,e+1),this.closeByte(),this.Qb=gp(t,8-e)<<e+1,this.Hb=e},t.prototype.writeBits=function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.Yb)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.jb+t.length<=this.qb?(this.Ub.set(t,this.jb),this.jb+=t.length,this.jb===this.qb&&this.closeBuffer()):(this.closeBuffer(),this.Kb.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var e=this.Hb;this.Qb|=mp(t[0],e+1),this.closeByte();for(var i=1;i<t.length;i++){var s=gp(t[i-1],8-e),n=mp(t[i],e+1);this.Qb=s<<e+1|n,this.closeByte()}this.Qb=gp(t[t.length-1],8-e)<<e+1,this.Hb=e}},t.prototype.writeUInt=function(t,e){if(t<0)throw new g("Received a negative number.");if(e>32)throw new g("The max bitlength that can be provided is 32.");if(t>=_.pow(2,e))throw new g("Uint "+t+" cannot be represented in "+e+" bit(s).");if(this.isWritingStartBit&&e%8==0)for(var i=e-8;i>=0;i-=8)this.writeByte(t>>i&255);else for(i=e-1;i>=0;i--)this.writeBool((t&1<<i)>0)},t.prototype.writeInt=function(t,e){if(e>32)throw new g("The max bitlength that can be provided is 32.");if(_.abs(t)>=_.pow(2,e-1))throw new g("Signed integer "+t+" cannot be represented in "+e+" bit(s).");t<0?this.writeUInt(t+_.pow(2,e),e):this.writeUInt(t,e)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new g("Received a negative number.");for(var e=_.floor(_.log2(t+1))+1,i=0;i<e-1;i++)this.writeBit(0);this.writeUInt(t+1,e)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var e=function(t){for(var e=new j(t.length),i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(t),i=0;i<e.length;i++)this.writeByte(e[i])},t.BUFFER_CHUNK_SIZE=1024,t}();r();var bp=function(){function t(t){this.rb=new L,this.Yd=t}return t.prototype.closeWriter=function(){void 0!==this.Yd&&(this.rb=this.rb.concat(this.Yd.close()),this.Yd=void 0)},w.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.Yd&&(this.Yd=new yp),this.Yd},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),Hh=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new g("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(e){var i=this.getSize(),s=i>=t.LARGE_SIZE/8,n=16===this.boxType.length;e.writeUInt(s?1:i,32),e.writeString(n?"uuid":this.boxType),s&&(e.writeUInt(_.floor(i/t.LARGE_SIZE),32),e.writeUInt(i%t.LARGE_SIZE,32)),n&&e.writeString(this.boxType)},t.prototype.getSize=function(){var e=8+(this.boxType.length>4?16:0),i=this.getBoxContentSize()+e;return i>=t.LARGE_SIZE/8&&(i+=8),i},t.prototype.serialize=function(){var t=new bp;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=_.pow(2,32),t}();function Ii(t,e){return t instanceof fo?64===e:t<_.pow(2,e)}function Wi(t,e){return _.round(t*_.pow(2,e))}function fh(t,e){for(var i=0;i<e.length;i++)t.writeByte(e[i])}function rt(t,e){return t/_.pow(2,e)}r();var B=function(t){function e(e,i,s){var n=t.call(this,e)||this;if(n.version=i,!Ii(i,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return ki(e,t),w.defineProperty(e.prototype,"flags",{get:function(){return this.l_},set:function(t){this.l_=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},e.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},e}(Hh);r(),r();var Ap=function(t){function e(e,i){var s=t.call(this,e)||this;return s.data=i,s}return ki(e,t),e.prototype.getBoxContentSize=function(){return this.data.length},e.prototype.serializeBoxContent=function(t){t.concat(L.from(this.data))},e}(Hh);r(),r();var Sp=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();r();var Tp=16384;function kp(t){var e=t.length;if(e<=Tp)return String.fromCharCode.apply(String,t);for(var i=[],s=0;s<e;s+=Tp)i.push(String.fromCharCode.apply(String,t.slice(s,s+Tp)));return i.join("")}var Ep=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,e){return(t&e)===e}(this.raw,t)},t}();function dh(t,e){var i=t.getUint8(e.offset);return e.shift(1),i}function xp(t,e,i){var s=Np(Bp(t),e.offset,e.offset+i);return e.shift(s.byteLength),s}function Rp(t,e,i){return e.offset+i<=t.byteLength}function sh(t,e,i){void 0===i&&(i=!1);var s=t.getUint32(e.offset,i);return e.shift(4),s}function Ip(t,e,i){void 0===i&&(i=!1);var s=sh(t,e,i),n=sh(t,e,i),r=i?n:s,o=i?s:n;return fo.fromBits(o,r,!0)}function Cp(t,e,i){return kp(function(t){return[].slice.call(t)}(xp(t,e,i)))}function Pp(t,e){var i,s=dh(t,e);return 0==(128&s)?i=s:192==(224&s)?i=64*(31&s)+(63&dh(t,e)):224==(240&s)?i=4096*(15&s)+64*(63&dh(t,e))+(63&dh(t,e)):240==(248&s)&&(i=262144*(7&s)+4096*(63&dh(t,e))+64*(63&dh(t,e))+(63&dh(t,e))),i}function Dp(t,e){return function(t,e,i){var s=[],n=function(t,e){return e.offset+3<=t.byteLength&&239===t.getUint8(e.offset)&&187===t.getUint8(e.offset+1)&&191===t.getUint8(e.offset+2)}(t,e);n&&e.shift(3);for(;e.offset<t.byteLength;){var r=Pp(t,e);if(void 0===r)break;if(i&&0===r)break;s.push(r)}return function(t){for(var e=[],i=0,s=t;i<s.length;i++){var n=s[i];n>65535&&(n-=65536,e.push(n>>>10&1023|55296),n=56320|1023&n),e.push(n)}return kp(e)}(s)}(t,e,!0)}function Np(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new j(t.buffer,t.byteOffset+e,i-e)}function Mp(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+e,i-e)}function Lp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Bp(t){return new j(t.buffer,t.byteOffset,t.byteLength)}var Op=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new Sp(this.offset<<3)},t}();r();var Fp=function(){function t(t,e){this.data=t,this.cursor=e}return t.prototype.nextUint8=function(){return dh(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getUint16(e.offset,i);return e.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getInt16(e.offset,i);return e.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return sh(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getInt32(e.offset,i);return e.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,e,i){void 0===i&&(i=!1);var s=sh(t,e,i),n=sh(t,e,i),r=i?n:s,o=i?s:n;return fo.fromBits(o,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return Ip(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return xp(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,e,i){for(var s=[],n=0;n<i;n++)s.push(sh(t,e));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return Cp(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return Dp(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function T(t,e){return t.type===e}var Vp=8;function li(t){var e=function(t,e){var i=[];for(;e.offset<t.byteLength;){var s=Wp(t,e);if(!s.complete)return{complete:!1,boxes:i};i.push(s.box)}return{complete:!0,boxes:i}}(t.data,t.cursor);if(!e.complete)throw new g("Data incomplete");return e.boxes}function Wp(t,e){var i=e.offset,s=function(t,e){var i=e.offset;if(!Rp(t,e,Vp)){return{complete:!1,neededOffset:r=e.offset+Vp}}var s=sh(t,e),n=Cp(t,e,4);if(1===s){if(!Rp(t,e,8)){var r=e.offset+8;return e.seek(i),{complete:!1,neededOffset:r}}s=Ip(t,e).toNumber()}if("uuid"===n){if(!Rp(t,e,16)){r=e.offset+16;return e.seek(i),{complete:!1,neededOffset:r}}n=Cp(t,e,16)}var o=e.offset,h={type:n,size:s,headerSize:o-i};return{complete:!0,header:h}}(t,e);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-i);var o=i+r;if(o>t.byteLength){var h=o;return e.seek(i),{complete:!1,neededOffset:h}}var a={type:n.type,offset:i,data:new Fp(Mp(t,i,o),new Op(n.headerSize))};return e.seek(o),{complete:!0,box:a}}function Up(t){return{version:t>>24,flags:new Ep(16777215&t)}}function Gp(t,e){var i,s,n,r;return 1===e?(i=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(i=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:i,modification:s,scale:n,duration:r}}function Hp(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function Zp(t){var e=t.nextUint32Array(9);return{a:rt(e[0],16),b:rt(e[1],16),u:rt(e[2],30),c:rt(e[3],16),d:rt(e[4],16),v:rt(e[5],30),x:rt(e[6],16),y:rt(e[7],16),w:rt(e[8],30)}}function ui(t){return new Ap(t.type,Np(Bp(t.data.data),t.data.cursor.offset))}var Xp=function(t){function e(e,i,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=i,r.handlerType=e,r}return ki(e,t),w.defineProperty(e.prototype,"handlerType",{get:function(){return this.Jb},set:function(t){this.Jb=t},enumerable:!1,configurable:!0}),e.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(i=null===(e=this.name)||void 0===e?void 0:e.length)&&void 0!==i?i:0)+1},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeString(this.handlerType),this.serializeReserved(e),this.name&&e.writer.writeString(this.name),e.writer.writeByte(0)},e}(B);function zp(t){var e=t.data,i=Up(e.nextUint32()),s=i.version,n=i.flags;e.skip(4);var r=e.nextChars(4);e.skip(12);var o=e.nextUTF8String();return new Xp(r,o,s,n.raw)}!function(t){function e(){return t.call(this,"mdir")||this}ki(e,t),e.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(Xp);r(),r(),r();var br=function(){function t(t,e){void 0===e&&(e=!1),this.fixed28BitMode=e,this.tag=t}return t.prototype.encodeSize=function(t){for(var e=[];t>0;)e.length>0&&(e[e.length-1]+=128),e.push(t%128),t>>=7;if(this.fixed28BitMode)for(;e.length<4;)e.push(128);return e.reverse()},w.defineProperty(t.prototype,"tag",{get:function(){return this.$b},set:function(t){if(!Ii(t,8))throw new g("Provided tag does not fit in 8 bits.");this.$b=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var e=0,i=this.encodeSize(this.getDescriptorSize());e<i.length;e++){var s=i[e];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}();r();!function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h={});var a=t.call(this,4,h.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=o,a.objectTypeIndication=e,a.streamType=i,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}ki(e,t),w.defineProperty(e.prototype,"objectTypeIndication",{get:function(){return this.tA},set:function(t){if(!Ii(t,8))throw new g("Provided objectTypeIndication does not fit in 8 bits.");this.tA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"streamType",{get:function(){return this.eA},set:function(t){if(!Ii(t,6))throw new g("Provided streamType does not fit in 6 bits.");this.eA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"bufferSizeDb",{get:function(){return this.iA},set:function(t){if(!Ii(t,24))throw new g("Provided bufferSizeDb does not fit in 24 bits.");this.iA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"maxBitrate",{get:function(){return this.sA},set:function(t){if(!Ii(t,32))throw new g("Provided maxBitrate does not fit in 32 bits.");this.sA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"avgBitrate",{get:function(){return this.nA},set:function(t){if(!Ii(t,32))throw new g("Provided avgBitrate does not fit in 32 bits.");this.nA=t},enumerable:!1,configurable:!0}),e.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,e){return t+e.getSize()}),0)},e.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var e=0,i=this.decoderSpecificInfo;e<i.length;e++){i[e].serialize(t)}}}(br);r();!function(t){function e(e,i){void 0===i&&(i={});var s=t.call(this,5,i.fixed28BitMode)||this;return s.data=e,s}ki(e,t),e.prototype.getDescriptorSize=function(){return this.data.length},e.prototype.serializeDescriptorContent=function(t){t.concat(L.from(this.data))}}(br);r(),r();var qp=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this,6,e)||this;return i.predefined=2,i}return ki(e,t),e.prototype.getDescriptorSize=function(){return 1},e.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},e}(br);!function(t){function e(e,i,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=e,r.streamPriority=i,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new qp(n.fixed28BitMode),r}ki(e,t),w.defineProperty(e.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"esId",{get:function(){return this.rA},set:function(t){if(!Ii(t,16))throw new g("Provided esId does not fit in 16 bits.");this.rA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"streamPriority",{get:function(){return this.oA},set:function(t){if(!Ii(t,5))throw new g("Provided streamPriority does not fit in 5 bits.");this.oA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"dependsOnEsId",{get:function(){return this.hA},set:function(t){if(t&&!Ii(t,16))throw new g("Provided dependsOnEsId does not fit in 16 bits.");this.hA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"ocrEsId",{get:function(){return this.aA},set:function(t){if(t&&!Ii(t,16))throw new g("Provided ocrEsId does not fit in 16 bits.");this.aA=t},enumerable:!1,configurable:!0}),e.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},e.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(br);r(),r(),r(),r(),r();var Yp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxes=[],e}return ki(e,t),e.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,e){return t+e.getSize()}),0)},e.prototype.serialize=function(){for(var e=t.prototype.serialize.call(this),i=0,s=this.boxes;i<s.length;i++){var n=s[i];e=e.concat(n.serialize())}return e},e}(Hh),Cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ki(e,t),e.prototype.serializeBoxContent=function(t){},e.prototype.getBoxContentSize=function(){return 0},e}(Yp),Kp=function(t){function e(e,i){var s=t.call(this,e)||this;return s.dataReferenceIndex=i,s}return ki(e,t),w.defineProperty(e.prototype,"dataReferenceIndex",{get:function(){return this.uA},set:function(t){if(!Ii(t,16))throw new g("Provided dataReferenceIndex does not fit in 16 bits.");this.uA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 8},e.prototype.serializeBoxContent=function(t){for(var e=0;e<6;e++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},e}(Cu),jp=function(t){function e(e,i,s,n){var r,o,h=this;return(h=t.call(this,e,i)||this).extra=n,h.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,h.sampleSize=null!==(o=s.sampleSize)&&void 0!==o?o:16,h.sampleRate=s.sampleRate,h}return ki(e,t),w.defineProperty(e.prototype,"channelCount",{get:function(){return this.cA},set:function(t){if(!Ii(t,16))throw new g("Provided channelCount does not fit in 16 bits.");this.cA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleSize",{get:function(){return this.lA},set:function(t){if(!Ii(t,16))throw new g("Provided sampleSize does not fit in 16 bits.");this.lA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleRate",{get:function(){return this.dA},set:function(t){if(!Ii(Wi(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.dA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(i=null===(e=this.extra)||void 0===e?void 0:e.length)&&void 0!==i?i:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.channelCount,16),e.writer.writeUInt(this.sampleSize,16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,16),e.writer.writeUInt(Wi(this.sampleRate,16),32),this.extra&&fh(e.writer,this.extra)},e}(Kp);r();!function(t){function e(e){var i=t.call(this,"stco",0,0)||this;return i.entries=e,i}ki(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.fA},set:function(t){if(!Ii(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ii(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.fA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(B);r();!function(t){function e(e){var i=t.call(this,"clap")||this;return i.cleanApertureWidthN=e.cleanApertureWidthN,i.cleanApertureWidthD=e.cleanApertureWidthD,i.cleanApertureHeightN=e.cleanApertureHeightN,i.cleanApertureHeightD=e.cleanApertureHeightD,i.horizOffN=e.horizOffN,i.horizOffD=e.horizOffD,i.vertOffN=e.vertOffN,i.vertOffD=e.vertOffD,i}ki(e,t),w.defineProperty(e.prototype,"cleanApertureWidthN",{get:function(){return this._A},set:function(t){if(!Ii(t,32))throw new g("Provided cleanApertureWidthN does not fit in 32 bits.");this._A=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"cleanApertureWidthD",{get:function(){return this.vA},set:function(t){if(!Ii(t,32))throw new g("Provided cleanApertureWidthD does not fit in 32 bits.");this.vA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"cleanApertureHeightN",{get:function(){return this.mA},set:function(t){if(!Ii(t,32))throw new g("Provided cleanApertureHeightN does not fit in 32 bits.");this.mA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"cleanApertureHeightD",{get:function(){return this.gA},set:function(t){if(!Ii(t,32))throw new g("Provided cleanApertureHeightD does not fit in 32 bits.");this.gA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"horizOffN",{get:function(){return this.pA},set:function(t){if(!Ii(t,32))throw new g("Provided horizOffN does not fit in 32 bits.");this.pA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"horizOffD",{get:function(){return this.wA},set:function(t){if(!Ii(t,32))throw new g("Provided horizOffD does not fit in 32 bits.");this.wA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"vertOffN",{get:function(){return this.yA},set:function(t){if(!Ii(t,32))throw new g("Provided vertOffN does not fit in 32 bits.");this.yA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"vertOffD",{get:function(){return this.bA},set:function(t){if(!Ii(t,32))throw new g("Provided vertOffD does not fit in 32 bits.");this.bA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 32},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(Hh);r();!function(t){function e(e,i){var s=t.call(this,"ctts",e,0)||this;return s.entries=i,s}ki(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.fA},set:function(t){if(!Ii(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ii(t.sampleCount,32)||!Ii(t.sampleOffset,32)})))throw new g("Not all entries can be represented in 64 bits.");this.fA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.sampleCount,32),0===this.version?e.writer.writeUInt(n.sampleOffset,32):1===this.version&&e.writer.writeInt(n.sampleOffset,32)}}}(B);r();!function(t){function e(e){var i=t.call(this,"url ",0,void 0===e?1:0)||this;return i.location=e,i}ki(e,t),w.defineProperty(e.prototype,"location",{get:function(){return this.AA},set:function(t){this.flags=void 0===t?1:0,this.AA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this);return this.location?e+this.location.length+1:e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.location&&(e.writer.writeString(this.location),e.writer.writeByte(0))}}(B);r();!function(t){function e(e,i,s){var n=t.call(this,"urn ",0,s)||this;return n.name=e,n.location=i,n}ki(e,t),w.defineProperty(e.prototype,"location",{get:function(){return this.AA},set:function(t){if(1&this.flags)throw new g("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.AA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?e+this.location.length+1:e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.name),e.writer.writeByte(0),this.location&&(e.writer.writeString(this.location),e.writer.writeByte(0))}}(B);r();!function(t){function e(){return t.call(this,"dinf")||this}ki(e,t)}(Cu);r(),r();var yr=function(t){function e(e,i,s){var n=t.call(this,e)||this;if(n.version=i,!Ii(i,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return ki(e,t),w.defineProperty(e.prototype,"flags",{get:function(){return this.l_},set:function(t){this.l_=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},e.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},e}(Yp);!function(t){function e(){return t.call(this,"dref",0,0)||this}ki(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.boxes.length,32)}}(yr);r(),r();var Qp=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"elst",i,s)||this;return n.entries=e,n}return ki(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"entries",{get:function(){return this.fA},set:function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];if(!Ii(s.segmentDuration,this.bitSize))throw new g("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!Ii(s.mediaTime,this.bitSize))throw new g("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!Ii(s.mediaRateInteger,16))throw new g("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!Ii(s.mediaRateFraction,16))throw new g("Provided mediaRateFraction does not fit in 16 bits.")}this.fA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(e)},e}(B),Jp=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return ki(e,t),e.prototype.serializeElstBoxContent=function(t){for(var e,i=0,s=this.entries;i<s.length;i++){var n=s[i];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(e=n.mediaRateFraction)&&void 0!==e?e:0,16)}},e}(Qp),$p=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return ki(e,t),e.prototype.serializeElstBoxContent=function(t){for(var e,i=0,s=this.entries;i<s.length;i++){var n=s[i];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(e=n.mediaRateFraction)&&void 0!==e?e:0,16)}},e}(Qp);function tw(t){for(var e=t.data,i=Up(e.nextUint32()),s=i.version,n=i.flags,r=e.nextUint32(),o=[],h=0;h<r;h++){var a=void 0,u=void 0;0===s?(a=e.nextUint32(),u=e.nextInt32()):(a=e.nextUint64(),u=e.nextInt64());var c=e.nextInt16(),l=e.nextInt16();o.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new Jp(o,n.raw):new $p(o,n.raw)}var ew=function(t){function e(){return t.call(this,"edts")||this}return ki(e,t),e}(Cu);function iw(t){for(var e=new ew,i=0,s=li(t.data);i<s.length;i++){var n=s[i];T(n,"elst")?e.boxes.push(tw(n)):e.boxes.push(ui(n))}return e}r(),r();var sw=function(t){function e(e,i,s,n){var r=t.call(this,e)||this;return r.majorBrand=i,r.minorVersion=s,r.compatibleBrands=n,r}return ki(e,t),w.defineProperty(e.prototype,"majorBrand",{get:function(){return this.SA},set:function(t){if(4!==t.length)throw new g("the provided major brand does not conform to the 4 character requirement");this.SA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"minorVersion",{get:function(){return this.TA},set:function(t){if(!Ii(t,32))throw new g("the provided minor version does not fit in 32 bits.");this.TA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"compatibleBrands",{get:function(){return this.kA},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new g("Some of the compatible brands do not conform to the 4 character requirement");this.kA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},e.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var e=0,i=this.compatibleBrands;e<i.length;e++){var s=i[e];t.writer.writeString(s)}},e}(Hh),nw=function(t){function e(e,i,s){return t.call(this,"ftyp",e,i,s)||this}return ki(e,t),e}(sw);function rw(t){for(var e=t.data,i=e.nextChars(4),s=e.nextUint32(),n=[];e.cursor.offset<e.data.byteLength;)n.push(e.nextChars(4));return new nw(i,s,n)}r();var ow=function(t){function e(e,i){void 0===i&&(i="free");var s=t.call(this,i)||this;return s.data=e,s}return ki(e,t),e.prototype.getBoxContentSize=function(){var t,e;return null!==(e=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0},e.prototype.serializeBoxContent=function(t){this.data&&t.concat(L.from(this.data))},e}(Hh);r(),r();var hw=function(t){function e(e,i,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=e.creation,r.modificationTime=e.modification,r.timescale=e.scale,r.duration=e.duration,r.language=i,r}return ki(e,t),w.defineProperty(e.prototype,"creationTime",{get:function(){return this.EA},set:function(t){if(!Ii(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.EA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"modificationTime",{get:function(){return this.xA},set:function(t){if(!Ii(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.xA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"timescale",{get:function(){return this.RA},set:function(t){if(!Ii(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.RA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"duration",{get:function(){return this.IA},set:function(t){if(!Ii(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.IA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"language",{get:function(){return this.CA},set:function(t){if(!lw(t))throw new g("Expected an ISO-639-2/T language code");this.CA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeMdiaContent(e),e.writer.writeBit(0);for(var i=0,s=this.language;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.charCodeAt(0)-96,5)}e.writer.writeUInt(0,16)},e}(B),aw=function(t){function e(e,i,s){return void 0===s&&(s=0),t.call(this,e,i,0,s)||this}return ki(e,t),e.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},e}(hw),uw=function(t){function e(e,i,s){return void 0===s&&(s=0),t.call(this,e,i,1,s)||this}return ki(e,t),e.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(hw);function cw(t){var e=t.data,i=Up(e.nextUint32()),s=i.version,n=i.flags,r=Gp(e,s),o=new pp(L.from(e.nextUint8Array(2)));o.skipBits(1);for(var h=[],a=0;a<3;a++)h.push(o.readUInt(5));var u=h.map((function(t){return String.fromCharCode(t+96)})).join("");return lw(u)||(u="und"),e.skip(2),0===s?new aw(r,u,n.raw):new uw(r,u,n.raw)}function lw(t){return/^[a-z]{3}$/.test(t)}var dw=function(t){function e(){return t.call(this,"mdia")||this}return ki(e,t),e}(Cu);function fw(t){for(var e=new dw,i=0,s=li(t.data);i<s.length;i++){var n=s[i];T(n,"mdhd")?e.boxes.push(cw(n)):T(n,"hdlr")?e.boxes.push(zp(n)):e.boxes.push(ui(n))}return e}r();var _w=function(t){function e(){var e=t.call(this,"mdat")||this;return e.data=new L,e}return ki(e,t),e.prototype.getBoxContentSize=function(){return this.data.length},e.prototype.serializeBoxContent=function(t){t.concat(this.data)},e}(Hh);function vw(t){var e=t.data,i=e.nextUint8Array(e.data.byteLength-e.cursor.offset),s=new _w;return s.data.pushRange(i),s}r();!function(t){function e(){return t.call(this,"minf")||this}ki(e,t)}(Cu);r();var mw;!function(t){function e(e){var i=t.call(this,"meta",0,0)||this;return i.handler=e,i}ki(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.handler.serialize())}}(yr);r(),r(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(mw||(mw={})),r();var gw,pw,ww={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function yw(t,e){e.writer.writeUInt(Wi(t.a,16),32),e.writer.writeUInt(Wi(t.b,16),32),e.writer.writeUInt(Wi(0,30),32),e.writer.writeUInt(Wi(t.c,16),32),e.writer.writeUInt(Wi(t.d,16),32),e.writer.writeUInt(Wi(0,30),32),e.writer.writeUInt(Wi(t.x,16),32),e.writer.writeUInt(Wi(t.y,16),32),e.writer.writeUInt(Wi(1,30),32)}function bw(t,e){var i,s,n,r;e.writer.writeUInt(null!==(i=t.isLeading)&&void 0!==i?i:gw.UNKNOWN,2),e.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:pw.UNKNOWN,2),e.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:pw.UNKNOWN,2),e.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:pw.UNKNOWN,2)}function Aw(t,e){var i,s,n;e.writer.writeUInt(0,4),bw(t,e),e.writer.writeUInt(null!==(i=t.samplePaddingValue)&&void 0!==i?i:0,3),e.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),e.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}r(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(gw||(gw={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(pw||(pw={})),r(),r();var Sw=function(){};r(),r(),r();var Tw=function(t){function e(e,i,s){var n=t.call(this,"pssh",e,0)||this;return n.systemId=i,n.data=s,n}return ki(e,t),w.defineProperty(e.prototype,"systemId",{get:function(){return this.PA},set:function(t){if(16!==t.length)throw new g("Provided systemId length is not 16.");this.PA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"data",{get:function(){return this.yp},set:function(t){if(!Ii(t.length,32))throw new g("Provided data length does not fit in 32 bits.");this.yp=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},e.prototype.serializeVersionBoxContent=function(t){},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(L.from(this.systemId)),this.serializeVersionBoxContent(e),e.writer.writeUInt(this.data.length,32),e.concat(L.from(this.data))},e}(B),kw=function(t){function e(e,i){return t.call(this,0,e,i)||this}return ki(e,t),e}(Tw),Ew=function(t){function e(e,i,s){var n=t.call(this,1,e,i)||this;return n.kIds=s,n}return ki(e,t),w.defineProperty(e.prototype,"kIds",{get:function(){return this.DA},set:function(t){if(!Ii(t.length,32))throw new g("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new g("Not all provided key ids are 16 bytes long.");this.DA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var e=0,i=this.kIds;e<i.length;e++){var s=i[e];t.concat(L.from(s))}},e}(Tw);function xw(t){var e=t.data.nextUint8();t.data.skip(3);var i=t.data.nextUint8Array(16),s=[];if(1===e)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var o=t.data.nextUint32(),h=t.data.nextUint8Array(o);return 1===e?new Ew(i,h,s):new kw(i,h)}r(),r();var Rw=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"mehd",i,s)||this;return n.fragmentDuration=e,n}return ki(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"fragmentDuration",{get:function(){return this.NA},set:function(t){if(!Ii(t,this.bitSize))throw new g("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.NA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},e}(B),Iw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return ki(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.fragmentDuration,32)},e}(Rw),Cw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return ki(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),e.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},e}(Rw);function Pw(t){var e=t.data,i=Up(e.nextUint32()),s=i.version,n=i.flags;return 0===s?new Iw(e.nextUint32(),n.raw):new Cw(e.nextUint64(),n.raw)}r();var Dw=function(t){function e(e,i,s,n){void 0===i&&(i={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,o,h,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=e,a.defaultSampleDescriptionIndex=null!==(r=null==i?void 0:i.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(o=i.sampleDuration)&&void 0!==o?o:0,a.defaultSampleSize=null!==(h=i.sampleSize)&&void 0!==h?h:0,a.defaultSampleFlags=i.sampleFlags,a}return ki(e,t),w.defineProperty(e.prototype,"trackId",{get:function(){return this.MA},set:function(t){if(!Ii(t,32))throw new g("Provided track id does not fit in 32 bits.");this.MA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.LA},set:function(t){if(!Ii(t,32))throw new g("Provided default sample description index does not fit in 32 bits.");this.LA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleDuration",{get:function(){return this.BA},set:function(t){if(!Ii(t,32))throw new g("Provided default sample duration does not fit in 32 bits.");this.BA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.OA},set:function(t){if(!Ii(t,32))throw new g("Provided default sample size does not fit in 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleFlags",{get:function(){return this.FA},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!Ii(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Ii(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.FA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},e.prototype.serializeBoxContent=function(e){var i;t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32),e.writer.writeUInt(this.defaultSampleDescriptionIndex,32),e.writer.writeUInt(this.defaultSampleDuration,32),e.writer.writeUInt(this.defaultSampleSize,32),Aw(null!==(i=this.defaultSampleFlags)&&void 0!==i?i:{},e)},e}(B);function Nw(t){var e=t.data,i=Up(e.nextUint32()),s=i.version,n=i.flags,r=e.nextUint32(),o=e.nextUint32(),h=e.nextUint32(),a=e.nextUint32(),u=Hp(new pp(L.from(e.nextUint8Array(4))));return new Dw(r,{sampleDescriptionIndex:o,sampleDuration:h,sampleSize:a,sampleFlags:u},s,n.raw)}var vc=function(t){function e(){return t.call(this,"mvex")||this}return ki(e,t),e}(Cu);function Mw(t){for(var e=new vc,i=0,s=li(t.data);i<s.length;i++){var n=s[i];T(n,"mehd")?e.boxes.push(Pw(n)):T(n,"trex")?e.boxes.push(Nw(n)):e.boxes.push(ui(n))}return e}r();var Lw=function(t){function e(i,s,n,r,o){void 0===o&&(o=0);var h,a,u,c=this;return(c=t.call(this,"mvhd",r,o)||this).creationTime=i.creation,c.modificationTime=i.modification,c.timescale=i.scale,c.duration=i.duration,c.rate=null!==(h=n.rate)&&void 0!==h?h:e.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:e.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:ww,c.VA=s,c}return ki(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"creationTime",{get:function(){return this.EA},set:function(t){if(!Ii(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.EA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"modificationTime",{get:function(){return this.xA},set:function(t){if(!Ii(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.xA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"timescale",{get:function(){return this.RA},set:function(t){if(!Ii(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.RA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"duration",{get:function(){return this.IA},set:function(t){if(!Ii(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.IA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"rate",{get:function(){return this.WA},set:function(t){if(!Ii(Wi(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.WA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"volume",{get:function(){return this.UA},set:function(t){if(!Ii(Wi(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.UA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"matrix",{get:function(){return this.GA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.GA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"nextTrackId",{get:function(){return this.VA},set:function(t){if(0===t)throw new g("NextTrackId cannot be 0.");if(!Ii(t,32))throw new g("NextTrackId cannot exceed 32 bits.");this.VA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeMvhdContent(e),e.writer.writeUInt(Wi(this.rate,16),32),e.writer.writeUInt(Wi(this.volume,8),16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),yw(this.matrix,e);for(var i=0;i<6;i++)e.writer.writeUInt(0,32);e.writer.writeUInt(this.nextTrackId,32)},e.DEFAULT_RATE=1,e.DEFAULT_VOLUME=1,e}(B),Bw=function(t){function e(e,i,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,e,i,s,0,n)||this}return ki(e,t),e.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},e}(Lw),Ow=function(t){function e(e,i,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,e,i,s,1,n)||this}return ki(e,t),e.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(Lw);function Fw(t){var e=t.data,i=Up(e.nextUint32()),s=i.version,n=i.flags,r=Gp(e,s),o=rt(e.nextUint32(),16),h=rt(e.nextUint16(),8);e.skip(2),e.skip(8);var a=Zp(e);e.skip(24);var u=e.nextUint32();return 0===s?new Bw(r,u,{rate:o,volume:h,matrix:a},n.raw):new Ow(r,u,{rate:o,volume:h,matrix:a},n.raw)}r(),r();var Vw=function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h={});var a,u,c,l=this;return l=t.call(this,"tkhd",e,function(t){var e,i,s,n;return{trackEnabled:null===(e=null==t?void 0:t.trackEnabled)||void 0===e||e,trackInMovie:null===(i=null==t?void 0:t.trackInMovie)||void 0===i||i,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(h))||this,l.creationTime=i.creation,l.modificationTime=i.modification,l.trackId=s,l.duration=i.duration,l.volume=n,l.width=r,l.height=o,l.layer=null!==(a=h.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=h.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=h.matrix)&&void 0!==c?c:ww,l}return ki(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"creationTime",{get:function(){return this.EA},set:function(t){if(!Ii(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.EA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"modificationTime",{get:function(){return this.xA},set:function(t){if(!Ii(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.xA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"trackId",{get:function(){return this.MA},set:function(t){if(0===t)throw new g("trackId cannot be 0.");if(!Ii(t,32))throw new g("trackId cannot exceed 32 bits.");this.MA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"duration",{get:function(){return this.IA},set:function(t){if(!Ii(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.IA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"volume",{get:function(){return this.UA},set:function(t){if(!Ii(Wi(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.UA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"width",{get:function(){return this.HA},set:function(t){if(!Ii(Wi(t,16),32))throw new g("Provided width does not fit in 32 bits (fixed 16.16).");this.HA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"height",{get:function(){return this.ZA},set:function(t){if(!Ii(Wi(t,16),32))throw new g("Provided height does not fit in 32 bits (fixed 16.16).");this.ZA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"layer",{get:function(){return this.XA},set:function(t){if(!Ii(t,16))throw new g("Provided layer does not fit in 16 bits.");this.XA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"alternateGroup",{get:function(){return this.zA},set:function(t){if(!Ii(t,16))throw new g("Provided alternateGroup does not fit in 16 bits.");this.zA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"matrix",{get:function(){return this.GA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.GA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},e.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeTkhdContent(e),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.layer,16),e.writer.writeUInt(this.alternateGroup,16),e.writer.writeUInt(Wi(this.volume,8),16),e.writer.writeUInt(0,16),yw(this.matrix,e),e.writer.writeUInt(Wi(this.width,16),32),e.writer.writeUInt(Wi(this.height,16),32)},e}(B),Ww=function(t){function e(e,i,s,n,r,o){return t.call(this,0,e,i,s,n,r,o)||this}return ki(e,t),e.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},e}(Vw),Uw=function(t){function e(e,i,s,n,r,o){return t.call(this,1,e,i,s,n,r,o)||this}return ki(e,t),e.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(Vw);function Gw(t){var e,i,s,n,r=t.data,o=Up(r.nextUint32()),h=o.version,a=o.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===h?(e=r.nextUint32(),i=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(e=r.nextUint64(),i=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),_=r.nextInt16(),v=rt(r.nextInt16(),8);r.skip(2);var m=Zp(r),g=rt(r.nextUint32(),16),p=rt(r.nextUint32(),16);return 0===h?new Ww({creation:e,modification:i,duration:n},s,v,g,p,{layer:f,matrix:m,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new Uw({creation:e,modification:i,duration:n},s,v,g,p,{layer:f,matrix:m,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var Hw=function(t){function e(){return t.call(this,"trak")||this}return ki(e,t),e}(Cu);function Zw(t){for(var e=new Hw,i=0,s=li(t.data);i<s.length;i++){var n=s[i];T(n,"tkhd")?e.boxes.push(Gw(n)):T(n,"mdia")?e.boxes.push(fw(n)):T(n,"edts")?e.boxes.push(iw(n)):e.boxes.push(ui(n))}return e}var Xw=function(t){function e(){return t.call(this,"moov")||this}return ki(e,t),e}(Cu);function zw(t){for(var e=new Xw,i=0,s=li(t.data);i<s.length;i++){var n=s[i];T(n,"mvhd")?e.boxes.push(Fw(n)):T(n,"trak")?e.boxes.push(Zw(n)):T(n,"mvex")?e.boxes.push(Mw(n)):T(n,"pssh")?e.boxes.push(xw(n)):e.boxes.push(ui(n))}return e}r(),r(),r();var qw=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",i,s)||this;return n.baseMediaDecodeTime=e,n}return ki(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"baseMediaDecodeTime",{get:function(){return this.qA},set:function(t){if(!Ii(t,this.bitSize))throw new g("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.qA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},e}(B),Yw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return ki(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.baseMediaDecodeTime,32)},e}(qw),pc=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return ki(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),e.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},e}(qw);function Kw(t){var e=t.data,i=Up(e.nextUint32()),s=i.version,n=i.flags;return 0===s?new Yw(e.nextUint32(),n.raw):new pc(e.nextUint64(),n.raw)}r();var jw=function(t){function e(e,i){void 0===i&&(i=0);var s=t.call(this,"tfhd",i,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(e))||this;return s.trackId=e.trackId,s.baseDataOffset=e.baseDataOffset,s.sampleDescriptionIndex=e.sampleDescriptionIndex,s.defaultSampleDuration=e.defaultSampleDuration,s.defaultSampleSize=e.defaultSampleSize,s.defaultSampleFlags=e.defaultSampleFlags,s}return ki(e,t),w.defineProperty(e.prototype,"trackId",{get:function(){return this.MA},set:function(t){if(!Ii(t,32))throw new g("Provided track id does not fit in 32 bits.");this.MA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"baseDataOffset",{get:function(){return this.YA},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is not set.");if(t&&!Ii(t,64))throw new g("Provided baseDataOffset does not fit in 32 bits.");this.YA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleDescriptionIndex",{get:function(){return this.KA},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is not set.");if(t&&!Ii(t,32))throw new g("Provided sampleDescriptionIndex does not fit in 32 bits.");this.KA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleDuration",{get:function(){return this.BA},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is not set.");if(t&&!Ii(t,32))throw new g("Provided defaultSampleDuration does not fit in 32 bits.");this.BA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.OA},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is not set.");if(t&&!Ii(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleFlags",{get:function(){return this.FA},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!Ii(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Ii(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.FA=t},enumerable:!1,configurable:!0}),e.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(e+=8),this.flags.sampleDescriptionIndexPresent&&(e+=4),this.flags.defaultSampleDurationPresent&&(e+=4),this.flags.defaultSampleSizePresent&&(e+=4),this.flags.defaultSampleFlagsPresent&&(e+=4),e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(e.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),e.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&e.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&e.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&e.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Aw(this.defaultSampleFlags,e)},e}(B);function Qw(t){var e=t.data,i=e.nextUint8(),s=new pp(L.from(e.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var o=Boolean(s.readBit()),h=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=e.nextUint32(),d=c?e.nextUint64():void 0,f=u?e.nextUint32():void 0,_=a?e.nextUint32():void 0,v=h?e.nextUint32():void 0,m=o?Hp(new pp(L.from(e.nextUint8Array(4)))):void 0;return new jw({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:_,defaultSampleSize:v,defaultSampleFlags:m},i)}r();var Jw=function(t){function e(e,i,s){var n=t.call(this,"trun",e,function(t){var e,i,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(e=t.sampleDurationPresent)&&void 0!==e&&e,sampleSizePresent:null!==(i=t.sampleSizePresent)&&void 0!==i&&i,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(i))||this;return n.dataOffset=i.dataOffset,n.samples=s,n.firstSampleFlags=i.firstSampleFlags,n}return ki(e,t),w.defineProperty(e.prototype,"dataOffset",{get:function(){return this.jA},set:function(t){if(t&&!Ii(t,32))throw new g("Provided data offset does not fit in 32 bits.");this.jA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"firstSampleFlags",{get:function(){return this.QA},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!Ii(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Ii(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.QA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"samples",{get:function(){return this.JA},set:function(t){var e,i;if(!Ii(t.length,32))throw new g("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new g("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new g("The sample duration present flag is not set.");if(r.duration&&!Ii(r.duration,32))throw new g("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new g("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new g("The sample size present flag is not set.");if(r.size&&!Ii(r.size,32))throw new g("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is not set.");if((null===(e=r.flags)||void 0===e?void 0:e.samplePaddingValue)&&!Ii(r.flags.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null===(i=r.flags)||void 0===i?void 0:i.sampleDegradationPriority)&&!Ii(r.flags.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!Ii(r.compositionTimeOffset,32))throw new g("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.JA=t},enumerable:!1,configurable:!0}),e.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(e+=4),this.flags.firstSampleFlagsPresent&&(e+=4),this.flags.sampleDurationPresent&&(e+=4*this.samples.length),this.flags.sampleSizePresent&&(e+=4*this.samples.length),this.flags.sampleFlagsPresent&&(e+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(e+=4*this.samples.length),e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&e.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Aw(this.firstSampleFlags,e);for(var i=0,s=this.samples;i<s.length;i++){var n=s[i];this.flags.sampleDurationPresent&&e.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&e.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&Aw(n.flags,e),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?e.writer.writeUInt(n.compositionTimeOffset,32):e.writer.writeInt(n.compositionTimeOffset,32))}},e}(B);function $w(t){var e=t.data,i=e.nextUint8(),s=new pp(L.from(e.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),o=Boolean(s.readBit()),h=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=e.nextUint32(),l={sampleDurationPresent:h,sampleSizePresent:o,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=e.nextInt32()),a&&(l.firstSampleFlags=Hp(new pp(L.from(e.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var _={};h&&(_.duration=e.nextUint32()),o&&(_.size=e.nextUint32()),r&&(_.flags=Hp(new pp(L.from(e.nextUint8Array(4))))),n&&(_.compositionTimeOffset=0===i?e.nextUint32():e.nextInt32()),d.push(_)}return new Jw(i,l,d)}var Ph=function(t){function e(){return t.call(this,"traf")||this}return ki(e,t),e}(Cu);function ty(t){for(var e=new Ph,i=0,s=li(t.data);i<s.length;i++){var n=s[i];T(n,"tfhd")?e.boxes.push(Qw(n)):T(n,"tfdt")?e.boxes.push(Kw(n)):T(n,"trun")?e.boxes.push($w(n)):e.boxes.push(ui(n))}return e}var ey=function(t){function e(){return t.call(this,"moof")||this}return ki(e,t),e}(Cu);function iy(t){for(var e=new ey,i=0,s=li(t.data);i<s.length;i++){var n=s[i];T(n,"traf")?e.boxes.push(ty(n)):T(n,"pssh")?e.boxes.push(xw(n)):e.boxes.push(ui(n))}return e}r();!function(t){function e(e){var i=t.call(this,"mfhd",0,0)||this;return i.sequenceNumber=e,i}ki(e,t),w.defineProperty(e.prototype,"sequenceNumber",{get:function(){return this.$A},set:function(t){if(!Ii(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.$A=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.sequenceNumber,32)}}(B);r();var sy=function(t){function e(e){var i=t.call(this,"frma")||this;return i.codingName=e,i}return ki(e,t),w.defineProperty(e.prototype,"codingName",{get:function(){return this.tS},set:function(t){if(4!==t.length)throw new g("Provided coding name was not 4 characters long.");this.tS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},e}(Hh);r();!function(t){function e(e,i){var s=t.call(this,"pasp")||this;return s.hSpacing=e,s.vSpacing=i,s}ki(e,t),w.defineProperty(e.prototype,"hSpacing",{get:function(){return this.eS},set:function(t){if(!Ii(t,32))throw new g("Provided hSpacing does not fit in 32 bits.");this.eS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"vSpacing",{get:function(){return this.iS},set:function(t){if(!Ii(t,32))throw new g("Provided vSpacing does not fit in 32 bits.");this.iS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 8},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(Hh);r();!function(t){function e(e,i,s){var n=t.call(this,e)||this;return n.sample=i,n.sinf=s,n}ki(e,t),e.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},e.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(Cu);r();!function(t){function e(e,i,s){var n=t.call(this,"sinf")||this;return n.schm=i,n.schi=s,n.frma=new sy(e),n}ki(e,t),e.prototype.getBoxContentSize=function(){var t,e,i,s;return this.frma.getSize()+(null!==(e=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==e?e:0)+(null!==(s=null===(i=this.schi)||void 0===i?void 0:i.getSize())&&void 0!==s?s:0)},e.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(Hh);r();var ny=function(t){function e(e,i,s){var n=t.call(this,"saio",e,void 0===s?0:1)||this;return n.entries=i,n.explicitAuxInfoType=s,n}return ki(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"entries",{get:function(){return this.fA},set:function(t){var e=this;if(!Ii(t.length,32))throw new g("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!Ii(t,e.bitSize)})))throw new g("Not all provided entries fit in ".concat(this.bitSize," bits."));this.fA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"explicitAuxInfoType",{get:function(){return this.sS},set:function(t){if(void 0===t)this.flags=0;else{if(!Ii(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!Ii(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.sS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),void 0!==this.explicitAuxInfoType&&(e.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),e.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),e.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(e)},e}(B);(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ki(e,t),e.prototype.serializeSaioContent=function(t){for(var e=0,i=this.entries;e<i.length;e++){var s=i[e];t.writer.writeUInt(s,32)}}})(ny),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ki(e,t),e.prototype.serializeSaioContent=function(t){for(var e=0,i=this.entries;e<i.length;e++){var s=i[e];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(ny);r();!function(t){function e(e,i,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=e,n.sampleInfoSizes=i,n.explicitAuxInfoType=s,n}ki(e,t),w.defineProperty(e.prototype,"defaultSampleInfoSize",{get:function(){return this.nS},set:function(t){if(!Ii(t,8))throw new g("Provided defaultSampleInfoSize does not fit in a single byte.");this.nS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleInfoSizes",{get:function(){return this.rS},set:function(t){if(!Ii(t.length,32))throw new g("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!Ii(t,8)})))throw new g("Not all provided sampleInfoSizes fit in a byte.");this.rS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"explicitAuxInfoType",{get:function(){return this.sS},set:function(t){if(void 0===t)this.flags=0;else{if(!Ii(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!Ii(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.sS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},e.prototype.serializeBoxContent=function(e){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new g("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,e),void 0!==this.explicitAuxInfoType&&(e.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),e.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),e.writer.writeByte(this.defaultSampleInfoSize),e.writer.writeUInt(this.sampleInfoSizes.length,32);for(var i=0,s=this.sampleInfoSizes;i<s.length;i++){var n=s[i];e.writer.writeByte(n)}}}(B);r();!function(t){function e(e){var i=t.call(this,"sdtp",0,0)||this;return i.samples=e,i}ki(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e);for(var i=0,s=this.samples;i<s.length;i++){bw(s[i],e)}}}(B);r();!function(t){function e(e){return t.call(this,"stsd",e,0)||this}ki(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.boxes.length,32)}}(yr);r();var ry=function(t){function e(e,i,s){var n=t.call(this,"sgpd",e,0)||this;return n.entries=s,n.groupingType=i,n}return ki(e,t),w.defineProperty(e.prototype,"groupingType",{get:function(){return this.oS},set:function(t){if(4!==t.length)throw new g("The provided groupingType does not equal 4 characters.");this.oS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.groupingType),this.serializeVersionBoxContent(e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];this.serializeEntryBoxContent(e,n)}},e.prototype.serializeEntryBoxContent=function(t,e){e.serializeBoxContent(t)},e}(B);(function(t){function e(e,i){return t.call(this,0,e,i)||this}ki(e,t),e.prototype.serializeVersionBoxContent=function(t){}})(ry),function(t){function e(e,i,s){var n=t.call(this,1,e,s)||this;return n.defaultLength=i,n}ki(e,t),w.defineProperty(e.prototype,"defaultLength",{get:function(){return this.hS},set:function(t){if(!Ii(t,32))throw new g("The provided defaultLength does not fit in 32 bits.");this.hS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},e.prototype.serializeEntryBoxContent=function(t,e){0===this.defaultLength&&t.writer.writeUInt(e.getBoxContentSize(),32),e.serializeBoxContent(t)}}(ry),function(t){function e(e,i,s,n){void 0===n&&(n=0);var r=this;if(e<2)throw new g("This constructor is only meant for versions 2 and up.");return(r=t.call(this,e,i,s)||this).defaultSampleDescriptionIndex=n,r}ki(e,t),w.defineProperty(e.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.LA},set:function(t){if(!Ii(t,32))throw new g("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.LA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(ry);r();(function(t){function e(e){void 0===e&&(e=[]);var i=t.call(this,"stsz",0,0)||this;return i.sampleSizes=e,i}ki(e,t),w.defineProperty(e.prototype,"sampleSizes",{get:function(){return this.aS},set:function(t){if(!Ii(t.length,32))throw new g("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!Ii(t,32)})))throw new g("Not all sampleSizes can be represented in 32 bits.");this.aS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeUInt(this.sampleSizes.length,32);for(var i=0,s=this.sampleSizes;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}})(B),function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=e,s.samples=i,s}ki(e,t),w.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.OA},set:function(t){if(!Ii(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"samples",{get:function(){return this.JA},set:function(t){if(!Ii(t,32))throw new g("Number of allowed samples cannot fit in 32 bits.");this.JA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.defaultSampleSize,32),e.writer.writeUInt(this.samples,32)}}(B);r();!function(t){function e(){return t.call(this,"stbl")||this}ki(e,t)}(Cu);r();!function(t){function e(e){var i=t.call(this,"stsc",0,0)||this;return i.entries=e,i}ki(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.fA},set:function(t){if(!Ii(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ii(t.firstChunk,32)||!Ii(t.sampleDescriptionIndex,32)||!Ii(t.samplesPerChunk,32)})))throw new g("Not all entries can be represented in 96 bits.");this.fA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.firstChunk,32),e.writer.writeUInt(n.samplesPerChunk,32),e.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(B);r();!function(t){function e(){return t.call(this,"schi")||this}ki(e,t)}(Cu);r();!function(t){function e(e,i,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=e,n.schemeVersion=i,n.schemeUri=s,n}ki(e,t),w.defineProperty(e.prototype,"schemeType",{get:function(){return this.uS},set:function(t){if(4!==t.length)throw new g("The provided schemeType does not have a length of 4.");this.uS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"schemeVersion",{get:function(){return this.cS},set:function(t){if(!Ii(t,32))throw new g("The provided schemeVersion does not fit in 23 bits.");this.cS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"schemeUri",{get:function(){return this.lS},set:function(t){if(t&&4!==t.length)throw new g("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.lS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.schemeType),e.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(e.writer.writeString(this.schemeUri),e.writer.writeByte(0))}}(B);r();var oy=function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h=0);var a=t.call(this,"sidx",e,h)||this;return a.referenceId=i,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=o,a}return ki(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"referenceId",{get:function(){return this.dS},set:function(t){if(!Ii(t,32))throw new g("Provided referenceId does not fit in 32 bits.");this.dS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"timescale",{get:function(){return this.RA},set:function(t){if(!Ii(t,32))throw new g("Provided timescale does not fit in 32 bits.");this.RA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"earliestPresentationTime",{get:function(){return this.fS},set:function(t){if(!Ii(t,this.bitSize))throw new g("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.fS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"firstOffset",{get:function(){return this._S},set:function(t){if(!Ii(t,this.bitSize))throw new g("Provided timescale does not fit in ".concat(this.bitSize," bits."));this._S=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"references",{get:function(){return this.vS},set:function(t){if(!Ii(t.length,16))throw new g("The number of provided reference items does not fit in 16 bits.");for(var e=0,i=t;e<i.length;e++){var s=i[e];if(!Ii(s.referencedSize,31))throw new g("Provided referenced size does not fit in 31 bits.");if(!Ii(s.subsegmentDuration,32))throw new g("Provided subsegment duration does not fit in 31 bits.");if(!Ii(s.sapType,3))throw new g("Provided SAP type does not fit in 3 bits.");if(!Ii(s.sapDeltaTime,28))throw new g("Provided SAP delta time does not fit in 28 bits.")}this.vS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.referenceId,32),e.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(e),e.writer.writeUInt(0,16),e.writer.writeUInt(this.references.length,16);for(var i=0,s=this.references;i<s.length;i++){var n=s[i];e.writer.writeBit(n.referenceType),e.writer.writeUInt(n.referencedSize,31),e.writer.writeUInt(n.subsegmentDuration,32),e.writer.writeBool(n.startsWithSap),e.writer.writeUInt(n.sapType,3),e.writer.writeUInt(n.sapDeltaTime,28)}},e}(B),hy=function(t){function e(e,i,s,n,r,o){return void 0===o&&(o=0),t.call(this,0,e,i,s,n,r,o)||this}return ki(e,t),e.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},e}(oy),ay=function(t){function e(e,i,s,n,r,o){return void 0===o&&(o=0),t.call(this,1,e,i,s,n,r,o)||this}return ki(e,t),e.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},e}(oy);r();var uy=function(t){function e(e,i,s){return t.call(this,"styp",e,i,s)||this}return ki(e,t),e}(sw);function cy(t){for(var e=t.data,i=e.nextChars(4),s=e.nextUint32(),n=[];e.cursor.offset<e.data.byteLength;)n.push(e.nextChars(4));return new uy(i,s,n)}r();!function(t){function e(e){void 0===e&&(e=0);var i=t.call(this,"smhd",0,0)||this;return i.balance=e,i}ki(e,t),w.defineProperty(e.prototype,"balance",{get:function(){return this.mS},set:function(t){if(t<-1||t>1)throw new g("Provided balance does not fit in the allowed range [-1, 1].");if(!Ii(Wi(t,8),16))throw new g("Provided balance does not fit in 16 bits (fixed 8.8).");this.mS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(Wi(this.balance,8),16),e.writer.writeUInt(0,16)}}(B);r();!function(t){function e(e){var i=t.call(this,"stss",0,0)||this;return i.entries=e,i}ki(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.fA},set:function(t){if(!Ii(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ii(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.fA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(B);r();!function(t){function e(e){var i=t.call(this,"stts",0,0)||this;return i.entries=e,i}ki(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.fA},set:function(t){if(!Ii(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ii(t.sampleCount,32)||!Ii(t.sampleDelta,32)})))throw new g("Not all entries can be represented in 64 bits.");this.fA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.sampleCount,32),e.writer.writeUInt(n.sampleDelta,32)}}}(B);r();!function(t){function e(e){var i=t.call(this,"trep",0,0)||this;return i.trackId=e,i}ki(e,t),w.defineProperty(e.prototype,"trackId",{get:function(){return this.MA},set:function(t){if(!Ii(t,32))throw new g("The provided trackId does not fit in 32 bits.");this.MA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32)}}(yr);r();!function(t){function e(){return t.call(this,"udta")||this}ki(e,t)}(Cu);r();var ly={red:0,green:0,blue:0};!function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=ly);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=e,s.opColor=i,s}ki(e,t),w.defineProperty(e.prototype,"opColor",{get:function(){return this.gS},set:function(t){if(!Ii(t.red,16)||!Ii(t.green,16)||!Ii(t.blue,16))throw new g("Not all colors could be represented in 16 bits.");this.gS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.graphicsMode,16),e.writer.writeUInt(this.opColor.red,16),e.writer.writeUInt(this.opColor.green,16),e.writer.writeUInt(this.opColor.blue,16)}}(B);r();var dy=function(t){function e(e,i,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o,h,a,u,c,l=this;return(l=t.call(this,e,i)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(o=s.horizontal)&&void 0!==o?o:72,l.verticalResolution=null!==(h=s.vertical)&&void 0!==h?h:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return ki(e,t),w.defineProperty(e.prototype,"width",{get:function(){return this.HA},set:function(t){if(!Ii(t,16))throw new g("Provided width does not fit in 16 bits.");this.HA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"height",{get:function(){return this.ZA},set:function(t){if(!Ii(t,16))throw new g("Provided height does not fit in 16 bits.");this.ZA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"horizontalResolution",{get:function(){return this.pS},set:function(t){if(!Ii(Wi(t,16),32))throw new g("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.pS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"verticalResolution",{get:function(){return this.wS},set:function(t){if(!Ii(Wi(t,16),32))throw new g("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.wS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"compressorName",{get:function(){return this.yS},set:function(t){if(t.length>31)throw new g("The provided compressorName should at most be 31 characters long.");this.yS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"frameCount",{get:function(){return this.bS},set:function(t){if(!Ii(t,16))throw new g("Provided frameCount does not fit in 16 bits.");this.bS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"depth",{get:function(){return this.SS},set:function(t){if(!Ii(t,16))throw new g("Provided depth does not fit in 16 bits.");this.SS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e,i,s,n,r,o;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(i=null===(e=this.clap)||void 0===e?void 0:e.getSize())&&void 0!==i?i:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(o=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==o?o:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.width,16),e.writer.writeUInt(this.height,16),e.writer.writeUInt(Wi(this.horizontalResolution,16),32),e.writer.writeUInt(Wi(this.verticalResolution,16),32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.frameCount,16),e.writer.writeByte(this.compressorName.length),e.writer.writeString(this.compressorName);for(var i=0;i<31-this.compressorName.length;i++)e.writer.writeByte(0);e.writer.writeUInt(this.depth,16),e.writer.writeInt(-1,16),this.clap&&e.concat(this.clap.serialize()),this.pasp&&e.concat(this.pasp.serialize()),this.extra&&fh(e.writer,this.extra)},e}(Kp);r(),r();!function(t){function e(e){var i=t.call(this,"esds",0,0)||this;return i.esDescriptor=e,i}ki(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof j?this.esDescriptor.length:this.esDescriptor.getSize())},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor instanceof j?e.concat(L.from(this.esDescriptor)):this.esDescriptor.serialize(e)}}(B);r();!function(t){function e(e,i,s){var n=t.call(this,"mp4a",e,s)||this;return n.esd=i,n}ki(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.esd.serialize())}}(jp);r();!function(t){function e(e,i,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",e,i,n)||this;return r.esDescriptor=s,r}ki(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor.serialize(e)}}(dy);r();!function(t){function e(e,i){var s=t.call(this,"mp4s",e)||this;return s.esDescriptor=i,s}ki(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor.serialize(e)}}(Kp);r(),r();!function(t){function e(e){var i=t.call(this,"avcC")||this;return i.decoderConfig=e,i}ki(e,t),e.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},e.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(Hh);r();!function(){function t(t,e,i,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=i,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=e,this.spsSets=s,this.ppsSets=n}w.defineProperty(t.prototype,"version",{get:function(){return this.TS},set:function(t){if(!Ii(t,8))throw new g("Provided version does not fit in 8 bits.");this.TS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileIndication",{get:function(){return this.kS},set:function(t){if(!Ii(t,8))throw new g("Provided profileIndication does not fit in 8 bits.");this.kS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.ES},set:function(t){if(!Ii(t,8))throw new g("Provided profileCompatibility does not fit in 8 bits.");this.ES=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"levelIndication",{get:function(){return this.xS},set:function(t){if(!Ii(t,8))throw new g("Provided levelIndication does not fit in 8 bits.");this.xS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"spsSets",{get:function(){return this.RS},set:function(t){if(!Ii(t.length,5))throw new g("Provided number of spsSets exceeds the max (32)");this.RS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"ppsSets",{get:function(){return this.IS},set:function(t){if(!Ii(t.length,8))throw new g("Provided number of ppsSets exceeds the max (256)");this.IS=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,e){return t+e.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,e){return t+e.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var e=0,i=this.spsSets;e<i.length;e++){var s=i[e];t.writer.writeUInt(s.length,16),t.concat(L.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var o=r[n];t.writer.writeUInt(o.length,16),t.concat(L.from(o))}}}();r();!function(t){function e(e,i,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o=t.call(this,"avc1",e,i,n)||this;return o.configurationBox=s,o.bitrateBox=r,o}ki(e,t),e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(i=null===(e=this.bitrateBox)||void 0===e?void 0:e.getSize())&&void 0!==i?i:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.configurationBox.serialize()),this.bitrateBox&&e.concat(this.bitrateBox.serialize())}}(dy);r();!function(t){function e(e,i,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=e,n.max=i,n.avg=s,n}ki(e,t),w.defineProperty(e.prototype,"bufferSizeDb",{get:function(){return this.iA},set:function(t){if(!Ii(t,32))throw new g("Provided bufferSizeDb does not fit in 32 bits.");this.iA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"max",{get:function(){return this.C_},set:function(t){if(!Ii(t,32))throw new g("Provided max does not fit in 32 bits.");this.C_=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"avg",{get:function(){return this.CS},set:function(t){if(!Ii(t,32))throw new g("Provided avg does not fit in 32 bits.");this.CS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 12},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(Hh);r(),r(),r();var fy=function(t){function e(e,i){var s,n,r,o,h=this;if(h=t.call(this,"tenc",e,0)||this,i.perSampleIvSize>0&&(null!==(n=null===(s=i.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new g("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return h.kId=i.kId,h.isProtected=null!==(r=i.isProtected)&&void 0!==r?r:1,i.perSampleIvSize>0?h.perSampleIvSize=i.perSampleIvSize:h.constantIv=null!==(o=i.constantIv)&&void 0!==o?o:new j(0),h}return ki(e,t),w.defineProperty(e.prototype,"isProtected",{get:function(){return this.PS},set:function(t){if(!Ii(t,8))throw new g("Provided isProtected does not fit in 1 byte.");this.PS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"perSampleIvSize",{get:function(){return this.DS},set:function(t){if(![8,16].includes(t))throw new g("Provided perSampleIvSize does not match any allowed value [8, 16].");this.DS=t,this.NS=new j(0)},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"kId",{get:function(){return this.MS},set:function(t){if(16!==t.length)throw new g("Provided kId length is not 16.");this.MS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"constantIv",{get:function(){return this.NS},set:function(t){if(![8,16].includes(t.length))throw new g("Provided constant IV length does not match any allowed value [8, 16].");this.NS=t,this.DS=0},enumerable:!1,configurable:!0}),e.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeOwnContent(e)},e.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),fh(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),fh(t.writer,this.constantIv))},e}(B),_y=(function(t){function e(e){return t.call(this,0,e)||this}ki(e,t)}(fy),function(t){function e(e){var i=t.call(this,1,e)||this;return i.cryptByteBlocks=e.cryptByteBlock,i.skipByteBlocks=e.skipByteBlock,i}return ki(e,t),w.defineProperty(e.prototype,"cryptByteBlocks",{get:function(){return this.LS},set:function(t){if(!Ii(t,4))throw new g("Provided cryptByteBlocks does not fit in 4 bits.");this.LS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"skipByteBlocks",{get:function(){return this.FS},set:function(t){if(!Ii(t,4))throw new g("Provided skipByteBlocks does not fit in 4 bits.");this.FS=t},enumerable:!1,configurable:!0}),e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},e}(fy));!function(t){function e(e){var i=t.call(this)||this;return i.tencBox=new _y(e),i}ki(e,t),e.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},e.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(Sw);function vy(t){return void 0!==t.iv}function my(t){return void 0!==t.subsamples}r();!function(t){function e(e){var i=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return i.samples=e,i}ki(e,t),w.defineProperty(e.prototype,"samples",{get:function(){return this.JA},set:function(t){var e;if(!Ii(t.length,32))throw new g("The number of samples provided does not fit in 32 bits.");for(var i=0,s=t;i<s.length;i++){var n=s[i];if(vy(n)&&![8,16].includes(n.iv.length))throw new g("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===e&&(e=my(n)),!0===e&&!my(n)||!1===e&&my(n))throw new g("Mix of samples with and without subsamples detected.");if(my(n)){if(!Ii(n.subsamples.length,16))throw new g("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];if(!Ii(h.clearData,16))throw new g("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!Ii(h.protectedData,23))throw new g("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=e&&e,this.JA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){for(var e=0,i=0,s=this.samples;i<s.length;i++){var n=s[i];vy(n)&&(e+=n.iv.length),my(n)&&(e+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.samples.length,32);for(var i=0,s=this.samples;i<s.length;i++){var n=s[i];if(vy(n)&&fh(e.writer,n.iv),my(n)){e.writer.writeUInt(n.subsamples.length,16);for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];e.writer.writeUInt(h.clearData,16),e.writer.writeUInt(h.protectedData,32)}}}},e.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(B);r(),r();!function(t){function e(e,i,s,n,r){var o=t.call(this,"emsg",0,0)||this;return o.schemeIdUri=e,o.value=i,o.data=r,o.id=s,o.timescale=n.timescale,o.presentationTimeDelta=n.presentationTimeDelta,o.eventDuration=n.eventDuration,o}ki(e,t),w.defineProperty(e.prototype,"timescale",{get:function(){return this.RA},set:function(t){if(!Ii(t,32))throw new g("The provided timescale does not fit in 32 bits.");this.RA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"presentationTimeDelta",{get:function(){return this.VS},set:function(t){if(!Ii(t,32))throw new g("The provided presentationTimeDelta does not fit in 32 bits.");this.VS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"eventDuration",{get:function(){return this.WS},set:function(t){if(!Ii(t,32))throw new g("The provided eventDuration does not fit in 32 bits.");this.WS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"id",{get:function(){return this.US},set:function(t){if(!Ii(t,32))throw new g("The provided id does not fit in 32 bits.");this.US=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.schemeIdUri),e.writer.writeByte(0),e.writer.writeString(this.value),e.writer.writeByte(0),e.writer.writeUInt(this.timescale,32),e.writer.writeUInt(this.presentationTimeDelta,32),e.writer.writeUInt(this.eventDuration,32),e.writer.writeUInt(this.id,32),e.concat(L.from(this.data))}}(B);r(),r(),r();var gy=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new bp,e=0,i=this.boxes;e<i.length;e++){var s=i[e];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function py(t,e){return function(i){var s=function(t,e){for(var i=t.data,s=t.cursor;s.offset<i.byteLength;){var n=Wp(i,s);if(!n.complete)return;if(T(n.box,e))return n.box}}(new Fp(Lp(i),new Op),t);if(!s)throw new g("".concat(t," box not found"));return e(s)}}var wy=py("moov",zw),yy=py("sidx",(function(t){var e,i,s=t.data,n=Up(s.nextUint32()),r=n.version,o=n.flags,h=s.nextUint32(),a=s.nextUint32();0===r?(e=s.nextUint32(),i=s.nextUint32()):(e=s.nextUint64(),i=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new pp(L.from(s.nextUint8Array(12))),f=d.readBit(),_=d.readUInt(31),v=d.readUInt(32),m=Boolean(d.readBit()),g=d.readUInt(3),p=d.readUInt(28);c.push({referenceType:f,referencedSize:_,subsegmentDuration:v,startsWithSap:m,sapType:g,sapDeltaTime:p})}return 0===r?new hy(h,a,e,i,c,o.raw):new ay(h,a,e,i,c,o.raw)})),by=py("moof",iy),Ay=py("pssh",xw);function Sy(t){return function(t){for(var e=new gy,i=0,s=li(t);i<s.length;i++){var n=s[i];T(n,"ftyp")?e.boxes.push(rw(n)):T(n,"styp")?e.boxes.push(cy(n)):T(n,"moov")?e.boxes.push(zw(n)):T(n,"moof")?e.boxes.push(iy(n)):T(n,"mdat")?e.boxes.push(vw(n)):e.boxes.push(ui(n))}return e}(new Fp(Lp(t),new Op))}var Ty=class extends Bo{get GS(){return this.Bd}get HS(){return this.ZS.expiration}get fb(){return this.XS}get zS(){return this.ZS.sessionId}Ws(){if(this.qS)return this.Bd;const t=[];return t.push(Promise.resolve(this.ZS.close())),t.push(on(1e3)),this.YS.zw(Promise.race(t).catch(ky)),this.qS=!0,this.Bd}KS(t,e,i){if(Z.$v){const t=Ay(zo(e));if(1===t.version){e=new kw(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.ZS.generateRequest(t,e)).catch(ky)}$n(t){return Promise.resolve(this.ZS.load(t)).catch(ky)}jS(){return Promise.resolve(this.ZS.remove()).catch(ky)}Yn(t){return Promise.resolve(this.ZS.update(t)).catch(ky)}QS(){this.XS.Nb(),this.ZS.keyStatuses.forEach(((t,e)=>{this.JS(e,t)})),this.yo(new ie(this.XS))}JS(t,e){if("string"==typeof t){const i=t;t=e,e=i}const i=zo(t);if(this.$S===Ga&&16===i.byteLength&&(Z.wm||Z.vg)){let t=na(i),e=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,e,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.$S===Ga&&"status-pending"===e&&(e="usable"),this.XS.Pb(i,e)}constructor(t,e){super(),this.ZS=t,this.$S=e,this.qS=!1,this.tT=()=>{this.QS()},this.eT=t=>{this.yo(new Sh(this,t.messageType,lp(this.$S,t.message)))},this.iT=()=>{this.qS=!0,this.XS.Rb>0&&(this.XS.Nb(),this.yo(new ie(this.XS))),this.ZS.removeEventListener("keystatuseschange",this.tT),this.ZS.removeEventListener("message",this.eT)},this.ZS.addEventListener("keystatuseschange",this.tT),this.ZS.addEventListener("message",this.eT),this.XS=new up;const i=[];this.ZS.closed&&i.push(Promise.resolve(this.ZS.closed)),this.YS=new as,i.push(this.YS.Bb),this.Bd=Promise.race(i).then(this.iT,this.iT),this.QS()}};function ky(t){let e;if(t.message){const i=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);i&&(e=0|x(i[1],16))}throw new Qs(t.message,void 0,e,t)}var Ey=class{async sT(t){return new Ty(this.nT.createSession(t),this.rT)}oT(t){return Promise.resolve(this.nT.setServerCertificate(t))}bn(t){return Promise.resolve(t.setMediaKeys(this.nT))}hT(t){return Promise.resolve(t.setMediaKeys(null))}tr(){return Promise.resolve()}constructor(t,e,i){this.nT=t,this.rT=e,this.md=i}},xy=class{get rT(){return this.aT.keySystem}async uT(){const t=await this.aT.createMediaKeys();return new Ey(t,this.$S,this.cT)}lT(){return this.cT}constructor(t,e,i){this.aT=t,this.$S=e,this.cT=i}};r(),r();var Ry={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function Wh(t){return Dh(t,Ry.APPLICATION_MP4)||Dh(t,Ry.VIDEO_MP4)||Dh(t,Ry.AUDIO_MP4)}function Iy(t){return Dh(t,Ry.VIDEO_WEBM)||Dh(t,Ry.AUDIO_WEBM)}var Cy=class{dT(t){for(const[e,i]of this.fT)if(e.toLowerCase()===t.toLowerCase())return i}constructor(t,e){this.pw=t,this.fT=e}};function Py(t){const e=t.trim(),i=e.indexOf(";");if(i<0)return new Cy(e,[]);const s=e.substr(0,i).trim(),n=e.substr(i+1).trim(),r=[];let o=0,h=!1;for(let t=0;t<n.length;t++){const e=n[t];if(h||";"!==e)'"'===e&&(h=!h);else{const e=Dy(n.substr(o,t));e&&r.push(e),o=t+1}}if(o!==n.length){const t=Dy(n.substr(o));t&&r.push(t)}return new Cy(s,r)}function Dy(t){const e=t.indexOf("=");if(e<0)return;const i=t.substr(0,e).trim();let s=t.substr(e+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[i,s]}function Ny(t){const e=t.trim(),i=e.indexOf(";");return i<0?e:e.substr(0,i).trim()}function My(t){let e=t;const i=e.match(/^avc1\.(\d+)\.(\d+)$/);if(i){const t=Number(i[1]),s=Number(i[2]);e="avc1."+Uo((t<<16|s).toString(16),6,"0")}return e}function Ly(t,e,i,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,_T:s._T};let o=!1;if(s.audioCapabilities){const h=s.audioCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.audioCapabilities=h.filter((s=>By(t,e,i,s))),o=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const h=s.videoCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.videoCapabilities=h.filter((s=>By(t,e,i,s))),o=!0,r.videoCapabilities.length&&(n=!0))}return o||(n=t(i,"video/mp4")),n?r:void 0}function By(t,e,i,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!qt(e,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(i,Ny(s.contentType))}function Oy(t){if(t.videoCapabilities)for(const e of t.videoCapabilities)if(e.contentType)return e.contentType;if(t.audioCapabilities)for(const e of t.audioCapabilities)if(e.contentType)return e.contentType}function Fy(t){const e=[];for(const i of t)i.encryptionScheme&&e.push({contentType:i.contentType,robustness:i.robustness});return t.concat(e)}function Vy(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(Wy))||!(!t.videoCapabilities||!t.videoCapabilities.some(Wy))}function Wy(t){return!t.robustness}function Uy(t,e){const i=[];for(const s of t)s.robustness?i.push(s):i.push(la({},s,{robustness:e}));return i}var Gy=class{async xw(t,e){e=e.filter((t=>!t._T));for(const t of e)t.audioCapabilities&&(t.audioCapabilities=Fy(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=Fy(t.videoCapabilities));if(t===am&&e.some(Vy)){const i=e.map((t=>function(t,e){return la({},t,{videoCapabilities:t.videoCapabilities?Uy(t.videoCapabilities,e):void 0,audioCapabilities:t.audioCapabilities?Uy(t.audioCapabilities,e):void 0})}(t,"SW_SECURE_CRYPTO")));try{const e=await Ll.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new xy(e,t,s)}catch(t){}}const i=await Ll.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new xy(i,t,s)}static vT(){return lr()}};r(),r(),r(),r();var Hy=class extends Bo{get zS(){return this.mT&&this.mT.sessionId||""}get HS(){return NaN}get GS(){return this.gT.Bb}get fb(){return this.pT}async KS(t,e,i){this.wT(),this.yT=new as,this.sT(zo(e),i),await this.yT.Bb}sT(t,e){if(!t)throw new b("Expected initData to be defined but was "+t+".");const i=e&&e.playready&&e.playready.bT;let s;return s=e?this.AT.createSession(this.ST,t,i):this.AT.createSession(this.ST,t),s.addEventListener("mskeyclose",this.iT),s.addEventListener("mskeymessage",this.TT),s.addEventListener("mskeyerror",this.Ss),s.addEventListener("mskeyadded",this.kT),this.mT=s,this.ET("status-pending"),s}async $n(t){return this.wT(),!0}async Yn(t){if(this.xT=new as,this.wT(),!this.mT)return Promise.resolve();const e=zo(t);if(0===e.byteLength)throw new b("Cannot call update with an empty response.");this.mT.update(e),await this.xT.Bb}Ws(){return!this.qS&&this.mT&&(this.qS=!0,this.mT.close()),this.gT.Bb}async jS(){this.wT()}wT(){if(this.qS)throw new b("Already closing or closed.")}ET(t){this.pT.Nb(),this.pT.Pb(ap,t),this.yo(new ie(this.pT))}constructor(t,e){super(),this.AT=t,this.ST=e,this.qS=!1,this.xT=void 0,this.yT=void 0,this.mT=void 0,this.iT=()=>{this.qS=!0,this.gT.Mb(void 0),this.mT&&(this.mT.removeEventListener("mskeyclose",this.iT),this.mT.removeEventListener("mskeymessage",this.TT),this.mT.removeEventListener("mskeyerror",this.Ss),this.mT.removeEventListener("mskeyadded",this.kT))},this.TT=t=>{this.yT&&(this.yT.Mb(void 0),this.yT=void 0),this.yo(new Sh(this,"license-request",_c(t.message).buffer,t.destinationURL||void 0))},this.Ss=()=>{const t=this.mT&&this.mT.error;if(!t)return;const e=new Qs("Unknown CDM error",t.code,t.systemCode);if(this.yT)this.yT.Lb(e),this.yT=void 0;else if(this.xT)this.xT.Lb(e),this.xT=void 0;else switch(e.Ob){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.ET("output-not-allowed");break;default:this.ET("internal-error")}},this.kT=()=>{this.yT&&(this.ET("usable"),this.yT.Mb(void 0),this.yT=void 0),this.xT&&(this.ET("usable"),this.xT.Mb(void 0),this.xT=void 0)},this.gT=new as,this.pT=new up}},Zy=class{async sT(t){return new Hy(this.AT,this.ST)}oT(t){return Promise.resolve(!1)}bn(t){const e=()=>{t.msSetMediaKeys(this.AT),t.removeEventListener("loadedmetadata",e)};return t.readyState>=1?t.msSetMediaKeys(this.AT):t.addEventListener("loadedmetadata",e),Promise.resolve()}hT(t){return Promise.resolve()}tr(){return Promise.resolve()}constructor(t,e,i){this.AT=t,this.rT=e,this.md=i;const s=Oy(i)||"video/mp4";this.ST=Ny(s)}},Xy=class{get rT(){return this.$S}lT(){return this.IT}uT(){const t=new s.MSMediaKeys(this.$S);return Promise.resolve(new Zy(t,this.$S,this.IT))}constructor(t,e){this.$S=t,this.IT=e}},zy=class{xw(t,e){try{return Promise.resolve(function(t,e){if(!qy())throw new b("Unsupported key system "+t);for(let i of e){let e=Ly(Yy,hg,t,i);if(e)return new Xy(t,e)}throw new b("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static vT(){return qy()}};function qy(){return void 0!==s.MSMediaKeys&&"function"==typeof s.MSMediaKeys.isTypeSupported}function Yy(t,e){return s.MSMediaKeys.isTypeSupported(t,e)}r(),r(),r(),r();var Ky=class extends Bo{get zS(){return this.CT?this.CT.sessionId:""}get HS(){return NaN}get GS(){return this.gT.Bb}get fb(){return this.pT}KS(t,e,i){const s=i&&i.fairplay&&i.fairplay.PT;if(!s)throw new b("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,e,i){const s=Kg(t),n=2*s.length,r=2*e.length;let o=new ArrayBuffer(4+n+4+r+4+i.byteLength),h=new DataView(o),a=new Ui;return Lg(h,a,n,!0),Zg(h,a,s,!0),Lg(h,a,r,!0),Zg(h,a,e,!0),Lg(h,a,i.byteLength,!0),Cg(h,a,i),new j(o)}(zo(e),s,this.DT);return this.CT=this.NT.createSession(this.ST,n),this.CT.addEventListener("webkitkeymessage",this.TT,!1),this.CT.addEventListener("webkitkeyadded",this.kT,!1),this.CT.addEventListener("webkitkeyerror",this.Ss,!1),this.ET("status-pending"),this.MT.Mb(this.CT),this.MT=new as,Promise.resolve()}$n(t){return Promise.resolve(!0)}async Yn(t){const e=zo(t);if(0===e.byteLength)throw new b("Cannot call update with an empty response.");this.LT=new as;(this.CT||await this.MT.Bb).update(e),await this.LT.Bb}Ws(){var t;const e=this.CT;return e&&(e.removeEventListener("webkitkeymessage",this.TT,!1),e.removeEventListener("webkitkeyadded",this.kT,!1),e.removeEventListener("webkitkeyerror",this.Ss,!1),e.close()),this.MT.Xw(),null==(t=this.LT)||t.Xw(),this.gT.Mb(void 0),this.gT.Bb}jS(){return Promise.resolve(void 0)}ET(t){this.pT.Nb(),this.pT.Pb(ap,t),this.yo(new ie(this.pT))}constructor(t,e,i){super(),this.NT=t,this.ST=e,this.DT=i,this.gT=new as,this.LT=void 0,this.pT=new up,this.CT=void 0,this.MT=new as,this.Ss=()=>{const t=this.CT&&this.CT.error;if(!t)return;const e=new Qs("Unknown CDM error",t.code,t.systemCode);this.LT?(this.LT.Lb(e),this.LT=void 0):e.Ob===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.ET("output-not-allowed"):this.ET("internal-error"),this.yo(new ug)},this.TT=t=>{this.yo(new Sh(this,"license-request",_c(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.kT=()=>{this.LT&&(this.LT.Mb(void 0),this.LT=void 0),this.ET("usable")}}};r();var A=class extends pt{get name(){return"THEOplayerError"}get category(){return Ye.fromCode(this.code)}constructor(t,e,i){super(e,i),this.code=t}};function jy(t,e){return t instanceof A?t:t instanceof g?new A(e,t.message,t):new A(e,String(t))}var Qy=class{getInternalMediaKeys(){return this.NT}async sT(t){if(!this.DT)throw new A(Ja.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new Ky(this.NT,this.ST,this.DT)}oT(t){return this.DT=zo(t),Promise.resolve(!0)}bn(t){return t.webkitSetMediaKeys(this.NT),Promise.resolve()}hT(t){return t.webkitSetMediaKeys(null),Promise.resolve()}tr(){return Promise.resolve()}constructor(t,e,i){this.NT=t,this.rT=e,this.md=i,this.DT=void 0;const s=Oy(i)||"video/mp4";this.ST=Ny(s)}},Jy=class{get rT(){return this.$S}lT(){return this.IT}uT(){const t=new s.WebKitMediaKeys(this.$S);return Promise.resolve(new Qy(t,this.$S,this.IT))}constructor(t,e){this.$S=t,this.IT=e}},$y=class{xw(t,e){try{return Promise.resolve(function(t,e){if(t!==dm)throw new b(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!tb())throw new b("Unsupported key system "+t);for(let i of e){let e=Ly(eb,ag,t,i);if(e)return new Jy(t,e)}throw new b("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static vT(){return tb()}};function tb(){return void 0!==s.WebKitMediaKeys&&"function"==typeof s.WebKitMediaKeys.isTypeSupported}function eb(t,e){return s.WebKitMediaKeys.isTypeSupported(t,e)}r();var ib=class{async xw(t,e){for(let i of this.BT)try{return await i.xw(t,e)}catch(t){}throw new b("Unsupported key system configuration for "+t)}constructor(t){this.BT=t}};r(),r(),r(),r(),r();var Eu=class{Wo(t,e){return new Promise((i=>{const s=$t.Yw([this.OT.Bw,e]),n=()=>{s.Ww()};this.FT.push((()=>{const e=sb(t,s.Bw);return i(e),e.then(n,n)})),this.VT||(this.VT=this.WT())}))}Xw(){return this.UT(!0)}gn(){return this.GT=void 0,this.UT(!1)}UT(t){const e=this.VT;return this.OT.Xw(),t&&(this.OT=new $t),Promise.resolve(e)}constructor(t){this.FT=[],this.VT=void 0,this.OT=new $t,this.WT=()=>{if(0===this.FT.length)return this.GT?sb(this.GT,this.OT.Bw).then(this.HT,this.HT):this.HT();return this.FT.shift()().then(this.WT)},this.HT=()=>{if(0!==this.FT.length)return this.WT();this.VT=void 0},this.GT=t}};function sb(t,e){return new Promise((i=>i(t(e))))}var nb=new Eu,rb=class extends Bo{ZT(){this.LT&&(this.ET("usable"),this.LT.Mb(void 0),this.LT=void 0)}XT(t){const e=new Qs("Unknown CDM error",t.errorCode,t.systemCode);this.LT?(this.LT.Lb(e),this.LT=void 0):this.yT?(this.yT.Lb(e),this.yT=void 0):e.Ob===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.ET("output-restricted"):1===e.Fb?this.ET("expired"):this.ET("internal-error")}zT(t){0!==t.message.byteLength?(this.yT&&(this.yT.Mb(void 0),this.yT=void 0),this.yo(new Sh(this,"license-request",lp(this.$S,_c(t.message).buffer),t.defaultURL||void 0))):this.yT&&(this.yT.Lb("Empty key message"),this.yT=void 0)}qT(t){this.YT||(this.YT=t,this.KT.Mb(t))}get fb(){return this.jT}get zS(){return this.QT}set zS(t){this.QT=t}get GS(){return this.gT.Bb}get HS(){return NaN}async Ws(){this.throwIfClosed(),this.LT&&(this.LT.Lb(void 0),this.LT=void 0),this.Yb=!0,this.gT.Mb(void 0)}async KS(t,e){this.throwIfClosed(),this.yT=new as,this.JT=zo(e);(this.YT||await this.KT.Bb).webkitGenerateKeyRequest(this.$S,this.JT),await this.yT.Bb}async $n(t){return this.throwIfClosed(),!1}async jS(){this.throwIfClosed()}async Yn(t){if(this.throwIfClosed(),this.LT=new as,Z.Cm||Z.Em)return nb.Wo((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.LT)return;(this.YT||await this.KT.Bb).webkitAddKey(this.$S,zo(t),this.JT,this.zS),await this.LT.Bb,Z.Em&&await on(500)}throwIfClosed(){if(this.Yb)throw new b("Already closing or closed.")}ET(t){this.jT.Nb(),this.jT.Pb(ap,t),this.yo(new ie(this.jT))}async $T(){const t=this.YT||await this.KT.Bb;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.$S,this.QT)}catch(t){}finally{await on(500)}}constructor(t){super(),this.$S=t,this.yT=void 0,this.LT=void 0,this.Yb=!1,this.JT=void 0,this.YT=void 0,this.gT=new as,this.QT="",this.KT=new as,this.jT=new up}},ob=class{bn(t){return this.YT=t,this.YT.addEventListener("webkitkeyadded",this.kT),this.YT.addEventListener("webkitkeyerror",this.ek),this.YT.addEventListener("webkitkeymessage",this.nk),this.rk.forEach(((e,i)=>e.qT(t))),this.hk.forEach((e=>e.qT(t))),Promise.resolve()}hT(t){return t.removeEventListener("webkitkeyadded",this.kT),t.removeEventListener("webkitkeyerror",this.ek),t.removeEventListener("webkitkeymessage",this.nk),this.YT=void 0,Promise.resolve()}async tr(){let t=this.rk.entries(),e=t.next();for(;!e.done;)await e.value[1].$T(),e=t.next();this.rk.clear()}async sT(t,e,i){const s=new rb(this.rT);return this.YT&&s.qT(this.YT),this.hk.push(s),s}oT(t){return Promise.resolve(!1)}ck(t){if(!t)return;let e=this.rk.get(t);return e||(e=this.hk.shift(),e?(e.zS=t,this.rk.set(t,e),e):void 0)}constructor(t,e){this.rT=t,this.md=e,this.YT=void 0,this.rk=_u(),this.hk=[],this.kT=t=>{const e=this.ck(t.sessionId);e&&e.ZT()},this.ek=t=>{const e=this.ck(t.sessionId);e&&e.XT(t)},this.nk=t=>{const e=this.ck(t.sessionId);e&&e.zT(t)}}},hb=class{uT(){return Promise.resolve(new ob(this.rT,this.lk))}lT(){return this.lk}constructor(t,e){this.rT=t,this.lk=e}},ab=class{xw(t,e){try{return Promise.resolve(function(t,e){if(!ab.vT())throw new b("Unsupported key system "+t);for(let i of e){let e=Ly(ub,hg,t,i);if(e)return new hb(t,e)}throw new b("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static vT(){return Dm()}};function ub(t,e){const i=Gd();return!(!i||!i.canPlayType||""===i.canPlayType(e,t))}r();var cb,lb=class{xw(t,e){return t===am||t===Ga?Promise.resolve(void 0):Promise.reject(new g("DRM configuration not supported"))}};function db(){return cb||(cb=function(){const t=[];$y.vT()&&t.push(new $y);Gy.vT()&&t.push(new Gy);zy.vT()&&t.push(new zy);ab.vT()&&t.push(new ab);Z.Dm&&t.push(new lb);return new ib(t)}()),cb}r(),r();var fb=class{Nb(t){this.dk.delete(t)}fk(){this.dk.clear()}Cb(t){return this.dk.get(t)}Pb(t,e){this.dk.set(t,e)}constructor(){this.dk=_u()}},_b=class t{static _k(){return t.Lg||(t.Lg=vb.vT()?new vb:new fb),t.Lg}static Nb(e){t._k().Nb(e)}static fk(){t._k().fk()}static Cb(e){return t._k().Cb(e)}static Pb(e,i){t._k().Pb(e,i)}};_b.Lg=void 0;var vb=class extends _b{static vT(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}Nb(t){self.sessionStorage.removeItem(t)}fk(){self.sessionStorage.clear()}Cb(t){var e;return null!=(e=self.sessionStorage.getItem(t))?e:void 0}Pb(t,e){self.sessionStorage.setItem(t,e)}};r(),r();var mb=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(e,i)=>new t(e,i)}(t)}catch(t){}const e=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(e)return function(t){return(e,i)=>{const s=new t;if(e)for(const t of e)s.append(t);return s.getBlob(i&&i.type||"")}}(e)})();function gb(t,e,i){const s=mb([e],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,e){let i=t;const s=i.indexOf("?");if(s>=0&&(i=i.substr(0,s)),i=i.substr(i.lastIndexOf("/")+1),e){let t=i.indexOf(".");t<0&&(t=i.length),i=i.substr(0,t)+e+i.substr(t)}return i}(t,i),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}r();var pb="default";r(),r(),r(),r();var $r=function(t){return t.vk="arraybuffer",t.gk="json",t.pk="stream",t.wk="text",t}({});r();var aa=class t{append(t,e){let i=t,s=e;i=wb(i),s=yb(s);const n=i.toLowerCase();if(this.x_.hasOwnProperty(n)){const t=this.x_[n],e=t[1];t[1]=e?e+", "+s:s}else this.x_[n]=[i,s]}delete(t){const e=wb(t).toLowerCase();delete this.x_[e]}get(t){const e=wb(t).toLowerCase();return this.x_.hasOwnProperty(e)?this.x_[e][1]:null}has(t){const e=wb(t).toLowerCase();return this.x_.hasOwnProperty(e)}set(t,e){let i=t;i=wb(i);const s=i.toLowerCase();this.x_[s]=[i,yb(e)]}forEach(t,e){for(const i in this.x_)this.x_.hasOwnProperty(i)&&t.call(e,this.x_[i][1],i,this)}asList(){const t=[];for(const e in this.x_)if(this.x_.hasOwnProperty(e)){const[i,s]=this.x_[e];t.push([i,s])}return t}yk(){const t={};return this.forEach(((e,i)=>{t[i]=e})),t}bk(t){t.forEach(((t,e)=>{this.append(e,t)}))}Ak(t){t.forEach(((t,e)=>{this.set(e,t)}))}constructor(e){this.x_={},e instanceof t?e.asList().forEach((t=>{let[e,i]=t;this.append(e,i)})):Array.isArray(e)?e.forEach((t=>{let[e,i]=t;this.append(e,i)})):e&&w.getOwnPropertyNames(e).forEach((t=>{this.append(t,e[t])}))}};function wb(t){let e=t;if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new b("Invalid character in header field name");return e}function yb(t){let e=t;return"string"!=typeof e&&(e=String(e)),e}r(),r(),r();var Mh=Zl(zl());r();var bb=class extends pt{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}},tu=a,Ab=ur(tu.ReadableStream)&&ur(tu.WritableStream)&&ur(tu.TransformStream)&&Sd(tu.ReadableStream.prototype.pipeThrough)&&!Rf.op,ph=Ab?tu.ReadableStream:Mh.ReadableStream,Ho=(Ab?tu.WritableStream:Mh.WritableStream,Ab?tu.TransformStream:Mh.TransformStream),Sb=(Ab&&tu.ByteLengthQueuingStrategy?tu.ByteLengthQueuingStrategy:Mh.ByteLengthQueuingStrategy,Ab&&tu.CountQueuingStrategy?tu.CountQueuingStrategy:Mh.CountQueuingStrategy);function Tb(t){return function(t){return new ph({start(e){for(const i of t)e.enqueue(i);e.close()}})}([t])}function kb(t){return Tb(function(t){return new j(t)}(t))}function He(t,e){return function(t,e){let i=e;const s=t.getReader(),n=new as,r=()=>{o();const t=new $;s.cancel(t).catch(Bt),n.Lb(t)},o=()=>{i&&(i.Mw(r),i=void 0)};i&&(i.Nw?r():i.Lw(r));const h=[],a=t=>t.done?(o(),Promise.resolve(h)):(h.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{o(),n.Mb(t)}),(t=>{o(),n.Lb(t)})),n.Bb}(t,e).then((t=>ju(t).buffer))}function Eb(t,e){let i=e;const{readable:s,writable:n}=new Ho,r=n.getWriter(),o=()=>{i&&i.Xw()};return r.closed.then(o,o),t.then((t=>(i=void 0,r.releaseLock(),t.pipeTo(n).catch(Bt))),(t=>(i=void 0,r.releaseLock(),n.abort(t).catch(Bt)))),s}function xb(t){const{readable:e,writable:i}=new Ho;return t.pipeTo(i,{preventCancel:!0}).catch((e=>{let i;i=rl(e)?e[0]===e[1]||Se(e[0])&&Se(e[1])?e[0]:new bb(e):e,t.cancel(i).catch(Bt)})),e.tee()}function Rb(t){return Kg(new j(t))}function Ib(t){return jg(t).buffer}r();var Cb="content-type",Pb="text/plain;charset=UTF-8",xc=class{Sk(t){return this.Tk(t).then(JSON.parse)}Ek(t,e){switch(t){case $r.vk:return this.xk(e);case $r.gk:return this.Sk(e);case $r.pk:return this.Rk();case $r.wk:return this.Tk(e);default:throw new b}}};function Db(t,e,i){if(t instanceof xc)return t;if(t instanceof ph)return function(t,e){return new Mb({pw:0,Rk:t,Ik:Nb(e)})}(t,i);const s=Nb(i),n=Promise.resolve(t).then((t=>function(t,e){if(t){if("string"==typeof t)return{pw:$r.wk,Ck:t,Ik:e||Pb};if(t instanceof ArrayBuffer||or(t))return{pw:$r.vk,Ck:Ub(t),Ik:e};if(wd(t)||rl(t))return{pw:$r.gk,Ck:t,Ik:e};throw new b("Unsupported BodyInit type")}return{pw:$r.wk,Ck:null,Ik:e}}(t,s)));return new Mb({pw:1,Bb:n,Pk:e})}function Nb(t){return(t.get(Cb)||"").toLowerCase()}var Mb=class t extends xc{get Dk(){return this.Nk}get Mk(){return 0===this.Lk.pw}Bk(){return this.Ok.Bb}Tk(t){return this.Fk(Lb,t)}Sk(t){return this.Fk(Ob,t)}xk(t){return this.Fk(Vb,t)}Rk(){return this.Vk(function(t){return 0===t.pw?t.Rk:Eb(t.Bb.then(Wb).then(kb),t.Pk)}(this.Lk))}Fk(t,e){if(this.Nk)return Promise.reject(new b("Already used"));this.Nk=!0;const i=t(this.Lk,e);return this.Ok.zw(i.then(Bt)),i}Vk(t){if(this.Nk)throw new b("Already used");if(t.locked)throw new b("Body stream is locked");this.Nk=!0;const e=new Ho,i=Promise.resolve(t.pipeTo(e.writable));return this.Ok.zw(i),e.readable}Wk(t){this.Lk=t,1===t.pw&&t.Bb.catch(Bt)}Uk(){if(this.Nk)throw new b("Already used");const e=function(t){if(0===t.pw){const[e,i]=t.Rk.tee();return[{pw:t.pw,Rk:e,Ik:t.Ik},{pw:t.pw,Rk:i,Ik:t.Ik}]}{const[e,i]=t.Pk.qw();return[{pw:t.pw,Bb:t.Bb,Pk:e},{pw:t.pw,Bb:t.Bb,Pk:i}]}}(this.Lk),i=e[0],s=e[1];return this.Wk(i),new t(s)}constructor(t){super(),this.Nk=!1,this.Ok=new as,this.Ok.Bb.catch(Bt),this.Wk(t)}};function Lb(t,e){return 0===t.pw?He(t.Rk,e).then(Rb):(e&&t.Pk.zw(e),go(t.Bb.then(Bb),t.Pk))}function Bb(t){switch(t.pw){case $r.wk:return Promise.resolve(t.Ck||"");case $r.vk:return Promise.resolve(t.Ck).then(Rb);case $r.gk:return Promise.resolve(t.Ck).then(JSON.stringify)}}function Ob(t,e){return 0===t.pw?Lb(t,e).then(JSON.parse):(e&&t.Pk.zw(e),go(t.Bb.then(Fb),t.Pk))}function Fb(t){return t.pw===$r.gk?Promise.resolve(t.Ck):Bb(t).then(JSON.parse)}function Vb(t,e){return 0===t.pw?He(t.Rk,e):(e&&t.Pk.zw(e),go(t.Bb.then(Wb),t.Pk))}function Wb(t){switch(t.pw){case $r.vk:return Promise.resolve(t.Ck);case $r.wk:case $r.gk:return Bb(t).then(Ib)}}function Ub(t){return t instanceof ArrayBuffer?t:_c(Th(t)).buffer}var Gb=class extends xc{get Dk(){return this.Gk.Dk}get Mk(){return this.Gk.Mk}Bk(){return this.Gk.Bk()}Tk(t){return this.Gk.Tk(t)}Sk(t){return this.Gk.Sk(t)}xk(t){return this.Gk.xk(t)}Rk(t){return this.Gk.Rk(t)}Uk(){return this.Gk.Uk()}constructor(t){super(),this.Gk=t}};function wh(t){return t.Hk>=200&&t.Hk<=299||304===t.Hk}var Hb=class t extends Gb{Zk(t){return this.Ek(this.Xk,t)}Tb(){return new t({Zk:this.Uk(),zk:this.zk},this)}constructor(t,e){let i,s,n,r,o;e?(i=e.qk,s=e.Xk,n=e.Hk,r=e.Yk,o=e.Kk):(i=[],s=$r.wk,n=200,r="OK",o=!1);const h=t.zk,a=new aa(t.qk||i),u=t.Xk||s,c=t.jk||(e&&e.zk===h?e.jk:h.qu),l=e?e.Gk:null;super(Db(void 0!==t.Zk?t.Zk:l,t.Pk||new $t,a)),this.qk=a,this.zk=h,this.jk=c,this.Xk=u,this.Hk=void 0!==t.Hk?t.Hk:n,this.Yk=void 0!==t.Yk?String(t.Yk):r,this.Kk=t.Kk||o}};r();var So=function(t){return t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT",t}({}),Wr=function(t){return t.Qk="",t.Jk="manifest",t.$k="segment",t.tE="preload-hint",t.eE="content-protection",t}({}),De=function(t){return t.Qk="",t.iE="initialization-segment",t.sE="fairplay-license",t.nE="fairplay-certificate",t.rE="widevine-license",t.oE="widevine-certificate",t.hE="playready-license",t.aE="clearkey-license",t.uE="aes128-key",t}({}),xa=function(t){return t.Qk="",t.cE="audio",t.lE="video",t.wk="text",t.dE="image",t}({}),Zb=function(t){return t.fE="same-origin",t._E="no-cors",t.vE="cors",t.mE="navigate",t}({}),Fe=class{constructor(t,e){const i=t.qu;let s,n,r,o,h,a,u,c,l,d,f,_,v,m,g;var p,w,y;e?(s=e.Ck,n=e.qk,r=e.gE,o=e.Xk,h=e.pE,a=e.wE,u=e.Bw,c=e.pw,l=e.yE,d=e.bE,f=e.AE,_=e.SE,v=e.TE,m=e.kE,g=e.EE):(s=null,n={},r="GET",o=$r.wk,h=0,a=0,c="",l="",d="",f=!1,v=void 0,m=!1,g=void 0),this.qu=i,this.Ck=t.Ck||s,this.qk=new aa(t.qk||n),this.gE=t.gE||r,this.Xk=t.Xk||o,this.pE=void 0!==t.pE?Number(t.pE)||0:h,this.wE=void 0!==t.wE?Number(t.wE)||0:a,this.Bw=t.Bw||u||(new $t).Bw,this.pw=t.pw||c,this.yE=t.yE||l,this.bE=t.bE||d,this.AE=void 0!==t.AE?Boolean(t.AE):f,this.SE=t.SE||_,this.TE=null!=(p=t.TE)?p:v,this.kE=null!=(w=t.kE)?w:m,this.EE=null!=(y=t.EE)?y:g}},Xb=class{zk(t){const e=function(t){return new Hb({Zk:null,qk:{},zk:t,jk:t.qu,Xk:t.Xk,Hk:0,Yk:Mi.Vy})}(new Fe(t));return Promise.resolve(e)}xE(t){}gn(){}};var vh=class t{static get RE(){return t.CE||(t.CE=new t(new Xb)),t.CE}zk(t){const e=this.PE(t);return this.DE.zk(e)}xE(t){return this.DE.xE(this.NE(t))}PE(e){let i=new Fe(e);if(!this.LE){const e=t.BE(i.qu);i=new Fe({qu:e},i)}return i}NE(e){let i=e.qu;return this.LE||(i=t.BE(i)),{qu:i,Ck:e.Ck}}static BE(t){return As.iw&&Cl(t,"http://")?t.replace(":","s:"):t}gn(){this.DE.gn()}constructor(t,e=!0){this.DE=t,this.LE=e}};function wc(t,e){const i=As.Ah(t);return zb(i,e),i.toString()}function zb(t,e){for(const i of w.keys(e))t.searchParams.set(i,e[i])}function Zi(t,e){let i=As.Kp(t);return e&&!Sm(i,"/")&&(i+="/"),i}vh.CE=void 0,r(),r(),r();var qb=/cache:(.+)?(?=&|$)/,Yb="http://webcache.googleusercontent.com/search?q=cache:";function Kb(t){if(!Cl(t,Yb))return"";const e=As.Ah(t).search.match(qb);return e&&e.length>1?e[1]:""}function jb(t){return As.Ah(".",t)}r(),r();var Cc=function(t){return t.OE="HttpOpenError",t.FE="HttpResponseError",t.VE="HttpTimeoutError",t}({}),Qb=class extends pt{get zk(){return this.WE}constructor(t,e,i){super(e,i),this.WE=t}};var Jb=class extends Qb{get name(){return Cc.OE}constructor(t,e){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.qu),e)}};r();var Tn=class extends Qb{get name(){return Cc.FE}get UE(){return this.GE}constructor(t,e,i){super(t.zk,null!=i?i:function(t){return"Error while loading "+t.zk.qu+", status code "+t.Hk}(t),e),this.GE=t}};r();var $b=class extends Qb{get name(){return Cc.VE}constructor(t,e){super(t,function(t){return"Request for "+t.qu+" timed out after "+t.pE+" seconds."}(t),e)}};r();var tA=self.fetch,eA=self.Request,iA=self.Response,sA=self.Headers,nA=self.ReadableStream,rA=self.AbortSignal,oA=self.AbortController,hA=gl((()=>{try{return Sd(tA)&&ur(eA)&&ur(iA)&&ur(sA)&&"forEach"in sA.prototype&&zv()}catch(t){return!1}})),aA=["http:","https:"];var uA=gl((()=>{try{return hA()&&ur(rA)&&ur(oA)&&"signal"in eA.prototype}catch(t){return!1}})),cA=gl((()=>{try{return hA()&&ur(nA)&&"body"in iA.prototype&&!Z.$v}catch(t){return!1}}));function so(t){return t instanceof Qb}function lA(t){return t instanceof Tn}function dA(t,e){const i=t.qk.has("content-length")?Number(t.qk.get("content-length")):void 0;let s;return s=t.Mk?function(t,e,i){return t.pipeThrough(new Ho(new fA(e,i)))}(t.Rk(),e,i):async function(t,e,i){await Promise.resolve(),e(0,i);const s=await t,n=s.byteLength;return e(n,null!=i?i:n),s}(t.xk(),e,i),new Hb({Zk:s,zk:t.zk},t)}r(),r();var fA=class{transform(t,e){this.HE+=t.byteLength,this.ZE(this.HE,this.XE),e.enqueue(t)}flush(t){var e;this.ZE(this.HE,null!=(e=this.XE)?e:this.HE)}constructor(t,e){this.ZE=t,this.XE=e,this.HE=0}};var _A=class{async zE(){const t=this.WE;let e,i;t.pE&&(this.qE=u((()=>{this.YE=!0,this.OT.Xw()}),t.pE),this.OT.Bw.Gw((()=>{v(this.qE)})));try{e=tA(t.qu,{method:t.gE,headers:t.qk.yk(),body:t.Ck,credentials:t.AE?"include":"same-origin",signal:gA(this.OT.Bw),mode:t.TE,keepalive:t.EE})}catch(e){throw new Jb(t,e)}try{i=await e}catch(t){const e=this.KE(t);throw Se(e)&&this.OT.Xw(),e}const s=i.url||t.qu,n=0===i.status&&"file:"===function(t){return As.Ah(t).protocol}(s)?200:i.status,r=new vA(this,i,this.OT);let o=new Hb({Zk:r,zk:t,Xk:t.Xk,qk:pA(i.headers),Hk:n,Yk:i.statusText,jk:s});if(!wh(o))throw new Tn(o);return t.SE&&(o=dA(o,t.SE)),o}KE(t){return so(t)?t:Se(t)?this.YE?new $b(this.WE):new $(t.message,t):this.GE?new Tn(this.GE,t):new Jb(this.WE,t)}constructor(t){this.OT=new $t,this.GE=void 0,this.qE=0,this.YE=!1,this.WE=t,this.OT.zw(t.Bw),this.UE=this.zE()}},vA=class t extends xc{get Dk(){return this.jE.bodyUsed}get Mk(){return ne(this.jE.body)}Bk(){return this.Ok.Bb}Tk(t){return this.Fk(this.jE.text(),t)}xk(t){return this.Fk(this.jE.arrayBuffer(),t)}Rk(){const t=this.jE.body;return t?this.Vk(t):Eb(this.xk().then(kb),this.OT)}Uk(){const e=this.jE.clone(),[i,s]=this.OT.qw();return this.OT=i,new t(this.QE,e,s)}Fk(t,e){e&&this.OT.zw(e);let i=hu(Promise.resolve(t),this.OT.Bw).catch((t=>{throw this.QE.KE(t)}));return i=go(i,this.OT),this.Ok.zw(i.then(Bt)),i}Vk(t){return new ph(new wA(t,(t=>this.QE.KE(t)),this.OT,this.Ok),{highWaterMark:0})}constructor(t,e,i){super(),this.Ok=new as,this.QE=t,this.jE=e,this.OT=i,this.Ok.Bb.catch(Bt)}},mA="abort";function gA(t){if(!uA())return;const e=new oA;if(t.Nw)e.abort();else if(!t.Fw){const i=()=>{s(),e.abort()},s=()=>{e.signal.removeEventListener(mA,i),t.Mw(i),t.Hw(s)};e.signal.addEventListener(mA,i),t.Lw(i),t.Gw(s)}return e.signal}function pA(t){if(function(t){return V(t)&&"function"==typeof t.forEach}(t)){const e=new aa;return t.forEach(((t,i)=>{Array.isArray(t)&&2===t.length?e.append(t[0],t[1]):e.append(i,t)})),e}return new aa(t)}var wA=class{start(t){this.Md=this.JE.getReader()}async pull(t){let e;try{e=await hu(this.Md.read(),this.OT.Bw)}catch(e){const i=this.$E(e);return this.Ok.Lb(i),this.OT.Xw(),this.Md.cancel(i).catch(Bt),void t.error(i)}e.done?(this.Ok.Mb(),this.OT.Xw(),t.close()):t.enqueue(e.value)}cancel(t){return this.OT.Xw(),this.Ok.Lb(t),this.Md.cancel(t)}constructor(t,e,i,s){this.JE=t,this.$E=e,this.OT=i,this.Ok=s}};r();var yA=class{get UE(){return this.tx.Bb}zE(){const t=this.ix,e=this.WE;if(e.Bw.Nw)return this.sx();t.onreadystatechange=()=>this.nx(),t.onprogress=t=>this.ZE(t),t.onload=()=>this.ox(),t.onloadend=()=>this.hx(),t.onerror=()=>this.ux(),t.ontimeout=()=>this.lx(),t.onabort=()=>this.sx(),t.open(e.gE,e.qu,!0),t.withCredentials=Boolean(e.AE),"responseType"in t&&e.Xk&&(e.Xk===$r.wk?t.responseType="text":t.responseType="arraybuffer"),e.qk.forEach(((e,i)=>{t.setRequestHeader(i,e)})),e.pE&&(t.timeout=e.pE),this.OT.Bw.Lw(this._x);const i=e.Ck;i?t.send(i):t.send()}nx(){const t=this.ix;void 0!==t&&t.readyState>=2&&!this.vx&&(this.vx=!0,this.mx())}mx(){var t;const e=this.ix,i=function(t){const e=new aa,i=t.replace(/\r?\n[\t ]+/g," ");return i.split(/\r?\n/).forEach((t=>{const i=t.split(":"),s=i.shift().trim();if(s){const t=i.join(":").trim();e.append(s,t)}})),e}(e.getAllResponseHeaders()||""),s=this.WE;var n;this.gx=new as,this.GE=new Hb({zk:s,Xk:s.Xk,Zk:this.gx.Bb,Hk:e.status,Yk:e.statusText,qk:i,jk:null!=(n=e.responseURL)?n:i.get("X-Request-URL")}),null==(t=this.tx)||t.Mb(this.GE)}ox(){var t;const e=this.ix;if(void 0===e)return;let i=e.response;if(!ne(i)){const t=this.WE.Xk;i=t===$r.wk?e.responseText:t===$r.vk?new ArrayBuffer(0):{}}null==(t=this.gx)||t.Mb(i)}hx(){this.gn()}ZE(t){void 0!==this.ix&&(null==this.WE.SE||this.WE.SE.call(this.WE,t.loaded,t.lengthComputable?t.total:void 0))}ux(){const t=new g("Network request failed");this.GE?this.Ss(new Tn(this.GE,t)):this.Ss(new Jb(this.WE,t))}lx(){this.Ss(new $b(this.WE))}sx(){this.Ss(new $),this.gn()}Ss(t){var e,i;null==(e=null!=(i=this.gx)?i:this.tx)||e.Lb(t)}gn(){this.ix=void 0,this.GE=void 0,this.tx=void 0,this.gx=void 0,this.OT.Ww()}constructor(t){this.OT=new $t,this.GE=void 0,this.tx=new as,this.vx=!1,this._x=()=>{var t;this.sx(),null==(t=this.ix)||t.abort()},this.WE=t,this.OT.zw(t.Bw),this.ix=new Ol,this.zE()}};function bA(t,e,i){return new Promise(((s,n)=>{if(i&&i.Nw)return n(new $);const r=t=>{h(),s(t)},o=()=>{h(),n(new $)},h=()=>{t.removeEventListener(e,r),i&&i.Mw(o)};t.addEventListener(e,r),i&&i.Lw(o)}))}r();var AA=class{zk(t){return function(t){if(!hA()||!function(t){try{return aA.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.qu))return!1;if(!cA()&&t.SE)return!1;if(!t.kE&&t.gE!==So.POST){if(Z.Cm&&Z.vm<=68)return!1;if(Z.Em)return!1}return!0}(t)?new _A(t).UE:new yA(t).UE}xE(t){const e=s.navigator;if(e&&e.sendBeacon)e.sendBeacon(t.qu,mb([t.Ck],{type:t.Ik}));else{const e=t.Ik?{"Content-type":t.Ik}:void 0;this.zk(new Fe({gE:So.POST,qu:t.qu,Ck:t.Ck,qk:e,TE:Zb._E})).then((t=>{oh(t.xk())}),Bt)}}gn(){}};r(),r();var Ha=function(t){return t[t.wx=1]="wx",t[t.yx=2]="yx",t[t.wk=3]="wk",t[t.bx=4]="bx",t[t.Ax=9]="Ax",t}({});function Rh(t){return 1===t.Sx}function SA(t){return 3===t.Sx}r();var TA=class extends pt{constructor(t){super("Invalid XML",t)}},kA=class{Tx(t){const e=new DOMParser;let i;try{i=e.parseFromString(t,"text/xml")}catch(t){throw new TA(t)}if(!i||i.getElementsByTagName("parsererror").length>0)throw new TA;return new DA(i)}},EA=class t{get Sx(){return Ha.yx}get kx(){var t;return null!=(t=this.Ex.localName)?t:LA(this.Ex.nodeName)}get l(){return this.Ex.nodeName}get xx(){var t;return null!=(t=this.Ex.namespaceURI)?t:void 0}get Rx(){var t;return null!=(t=this.Ex.prefix)?t:void 0}get Ix(){return this.Ex.nodeValue}Cx(t){return this.Ex.isEqualNode(t.Ex)}Px(e){return new t(this.Ex.cloneNode(e))}constructor(t){this.Ex=t}},xA=class{get Dx(){return void 0===this.Nx&&(this.Nx=function(t){const e=[];for(let i=0;i<t.length;i++){const s=MA(t.item(i));s&&e.push(s)}return e}(this.Mx.childNodes)),this.Nx}get m(){return this.Dx.filter(NA)}Lx(t){return this.Dx.filter((e=>NA(e)&&e.Bx===t))}Ox(t,e){return this.Dx.filter((i=>NA(i)&&i.kx===e&&i.xx===t))}get Fx(){return this.Mx}Vx(t){this.Mx.appendChild(t.Fx),this.Nx&&this.Nx.push(t)}Cx(t){return this.Mx.isEqualNode(t.Fx)}constructor(t){this.Nx=void 0,this.Mx=t}},RA=class t extends xA{get Sx(){return Ha.wx}get kx(){var t;return null!=(t=this.Mx.localName)?t:LA(this.Mx.nodeName)}get xx(){var t;return null!=(t=this.Mx.namespaceURI)?t:void 0}get Rx(){var t;return null!=(t=this.Mx.prefix)?t:void 0}get Bx(){return this.Mx.nodeName}get Wx(){return function(t){const e=[];for(let i=0;i<t.length;i++)e.push(new EA(t.item(i)));return e}(this.Mx.attributes)}get Ux(){return this.Mx.textContent}Gx(t){if(this.Mx.hasAttribute(t))return this.Mx.getAttribute(t)}Hx(t,e){if(this.Mx.hasAttributeNS(t,e))return this.Mx.getAttributeNS(t,e)}Zx(t){this.Mx.removeAttribute(t)}Xx(t,e){this.Mx.removeAttributeNS(t,e)}zx(t,e){this.Mx.setAttribute(t,e)}qx(t,e,i){this.Mx.setAttributeNS(t,e,i)}Px(e){return new t(this.Mx.cloneNode(e))}constructor(t){super(t)}},IA=class{get Zk(){return this.Mx.nodeValue}get Fx(){return this.Mx}Cx(t){return this.Zk===t.Zk}constructor(t){this.Mx=t}},CA=class t extends IA{get Sx(){return Ha.wk}Px(e){return new t(this.Mx.cloneNode(e))}constructor(t){super(t)}},PA=class t extends IA{get Sx(){return Ha.bx}Px(e){return new t(this.Mx.cloneNode(e))}constructor(t){super(t)}},DA=class t extends xA{get Sx(){return Ha.Ax}get Yx(){return new RA(this.Mx.documentElement)}Px(e){return new t(this.Mx.cloneNode(e))}constructor(t){super(t)}};function NA(t){return Rh(t)}function MA(t){switch(t.nodeType){case Ha.wx:return new RA(t);case Ha.wk:return new CA(t);case Ha.bx:return new PA(t)}}function LA(t){const e=t.indexOf(":");return e<0?t:t.substr(e+1)}!function(t){As=t}(new class extends Zv{get Wp(){return this.Kx||(this.Kx=new Nm(db())),this.Kx}get jx(){return this.Qx}get Jx(){return this.$x}get tR(){return this.eR}get iR(){return!1}get sR(){return _b._k()}get nR(){return{rR:gb}}get oR(){return Ll.connection&&Ll.connection.effectiveType||pb}get hR(){return Ll.connection&&Ll.connection.type||"unknown"}get aR(){return this.uR||(this.uR=new vh(new AA)),this.uR}Tx(t){return this.cR.Tx(t)}constructor(...t){super(...t),this.Kx=void 0,this.Qx=cA(),this.$x=Z._g||Z.$v,this.eR=(Z._g||Z.Cm&&Z.vm<=68||Z.$v)&&!(Z.Em&&Z.Rm<3),this.uR=void 0,this.cR=new kA}}),r(),r(),r(),r(),r(),r();var BA=class extends Je{},Fc=class extends Je{get ht(){return this.lR()}lR(){return this.dR.ht}fR(){return this.dR.fR()}get _R(){return this.vR()}vR(){return this.dR._R}get mR(){return this.gR()}set mR(t){this.pR(t)}gR(){return this.dR.mR}pR(t){this.dR.mR=t}get bt(){return this.wR()}wR(){return this.dR.bt}get yR(){return this.bR()}set yR(t){this.AR(t)}bR(){return this.dR.yR}AR(t,e){this.dR.AR(t,e)}get ct(){return this._d()}_d(){return this.dR.ct}get we(){return this.SR()}SR(){return this.dR.we}get kR(){return this.ER()}ER(){return this.dR.kR}get lt(){return this.xR()}get RR(){return this.IR()}xR(){return this.dR.lt}IR(){return this.dR.RR}get PR(){return this.DR()}DR(){return this.dR.PR}get NR(){return this.MR()}MR(){return this.dR.NR}get LR(){return this.OR()}OR(){return this.dR.LR}get FR(){return this.WR()}set FR(t){this.UR(t)}WR(){return this.dR.FR}UR(t){this.dR.FR=t}get GR(){return this.HR()}HR(){return this.dR.GR}get ZR(){return this.XR()}XR(){return this.dR.ZR}get zR(){return this.qR()}set zR(t){this.YR(t)}qR(){return this.dR.zR}YR(t){this.dR.zR=t}get KR(){return this.jR()}jR(){return this.dR.KR}get QR(){return this.JR()}set QR(t){this.$R(t)}JR(){return this.dR.QR}$R(t){this.dR.QR=t}get tI(){return this.eI()}eI(){return this.dR.tI}get iI(){return this.sI()}sI(){return this.dR.iI}get nI(){return this.rI()}rI(){return this.dR.nI}Ya(){return this.dR.Ya()}ka(t,e){return this.dR.ka(t,e)}get nt(){return this.oI()}oI(){return this.dR.nt}get hI(){return this.aI()}aI(){return this.dR.hI}get rt(){return this.uI()}uI(){return this.dR.rt}get cI(){return this.lI()}lI(){return this.dR.cI}get dI(){return this.fI()}set dI(t){this._I(t)}get vI(){return this.mI()}mI(){return this.dR.vI}fI(){return this.dR.dI}_I(t){this.dR.dI=t}get gI(){return this.dR.gI}set gI(t){this.dR.gI=t}pI(){return this.dR.pI()}_a(){return this.dR._a()}wI(){return this.dR.wI()}ur(t){this.dR.ur(t)}ar(){this.dR.ar()}be(){this.dR.be()}yI(){this.dR.yI()}bI(){this.dR.bI()}AI(){this.dR.AI()}ge(){this.dR.ge()}SI(){return this.dR.SI()}TI(){return this.dR.TI()}kI(){this.dR.kI()}EI(){this.dR.EI()}tr(){return this.dR.tr()}xI(){this.dR.xI()}RI(){this.dR.RI()}II(t){return this.dR.II(t)}CI(t){return!1}async gn(){this.Bo(),await this.dR.gn()}DI(t){return this.dR.DI(t)}constructor(t){super(),this.NI=t=>{this.CI(t)||this.yo(t)},this.dR=t,t.Jw(this.NI)}};r(),r(),r();var Ce=function(t){return t.MI="LI",t.BI="OI",t}({});r(),r(),r(),r();var $s=class extends pe{get ga(){return this.Za||(this.Za=this.ma()),this.Za}constructor(t,e){super(t,e),this.Za=void 0}};function OA(t){return Boolean(t&&t.ga)}var er=class extends $s{constructor(t){super(t)}},nr=class extends pe{constructor(t){super(t)}},FA=class extends er{ma(){return new VA(this.Ht.ga)}constructor(t){super(Ce.MI),this.Ht=t}},VA=class extends nr{constructor(t){super("addtrack"),this.track=t}};r();var WA=class extends er{ma(){return new UA(this.Ht.ga)}constructor(t){super(Ce.BI),this.Ht=t}},UA=class extends nr{constructor(t){super("removetrack"),this.track=t}};r();var Eo=function(t){return t.FI="VI",t.WI="UI",t.GI="HI",t.ZI="XI",t.zI="qI",t.YI="KI",t.aa="jI",t.QI="JI",t.$I="tC",t.eC="Yn",t.iC="sC",t.nC="rC",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality",t}({}),Zh=class extends Bo{get oC(){return this.hC}get ga(){return this.Za||(this.Za=this.ma()),this.Za}get V(){return this.hC.length}aC(t){return this.hC[t]}tt(t){return!(!t||qt(this.hC,t))&&(this.hC.push(t),this.Za&&this.Za.push(t.ga),t.yn(Eo.aa,this.Ds),this.yo(new FA(t)),!0)}it(t){if(!t)return!1;const e=this.hC.indexOf(t);return!(e<0)&&(Ko(this.hC,e),this.Za&&Ko(this.Za,e),t.fn(Eo.aa,this.Ds),this.yo(new WA(t)),!0)}uC(t){return qt(this.hC,t)}tr(){const t=this.hC;for(let e=t.length-1;e>=0;e-=1)this.it(t[e])}gn(){this.tr(),this.Bo()}constructor(){super(),this.hC=[],this.Za=void 0}};r();var Bc=class extends er{ma(){return new GA(this.Ht.ga)}constructor(t){super(Eo.aa),this.Ht=t}},GA=class extends nr{constructor(t){super("change"),this.track=t}},HA=class extends Zh{get cC(){return this.lC}set cC(t){const e=this.lC;if(t!==e){if(e){this.dC(e);for(const i of e.oC)t&&t.uC(i)||this.it(i)}if(this.lC=t,t){const e=[];for(const i of t.oC)this.tt(i),this.fC(i)&&e.push(i);this._C(t);for(const t of e)t.yo(new Bc(t))}}}_C(t){t.yn(Ce.MI,this.vC),t.yn(Ce.BI,this.mC)}dC(t){t.fn(Ce.MI,this.vC),t.fn(Ce.BI,this.mC)}gn(t){!t&&this.lC&&this.lC.gn(),super.gn()}constructor(){super(),this.lC=void 0,this.vC=t=>{const e=t.Ht;this.tt(e)},this.mC=t=>{const e=t.Ht;this.it(e)}}};r(),r(),r();var ZA=w.freeze||Fd;function XA(t,e,i){w.defineProperty(t,e,{writable:!1,enumerable:!0,value:i})}function zA(t){return ZA(t)}function nh(t,e){for(const i of w.getOwnPropertyNames(e))w.defineProperty(t,i,w.getOwnPropertyDescriptor(e,i));return t}function eu(t){if(wd(t)){const e={};for(const i in t)Ba.call(t,i)&&(e[i]=eu(t[i]));return e}if(rl(t)){const e=new Array(t.length);for(let i=0;i<e.length;i++)i in t&&(e[i]=eu(t[i]));return e}return t}function Pi(t,e){return t===e||!(!t||!e)&&(!(!V(t)||!V(e))&&(dc(t)?!!dc(e)&&function(t,e){const i=t.length,s=e.length;if(i!==s)return!1;for(let s=0;s<i;s+=1)if(!Pi(t[s],e[s]))return!1;return!0}(t,e):!dc(e)&&function(t,e){const i=w.keys(t),s=w.keys(e);if(!i||!s||i.length!==s.length)return!1;for(const s of i)if(!Ba.call(e,s)||!Pi(t[s],e[s]))return!1;return!0}(t,e)))}function qA(t,e){if(!V(t))return!1;for(const i of e)if(!(i in t))return!1;return!0}function YA(t,e){return t.constructor===e.constructor}function KA(t){const e={};for(const i of w.keys(t)){const s=t[i];null!=s&&(e[i]=s)}return e}function jA(t){const e={};for(const i of w.keys(t)){const s=t[i];if(dc(s)){const t=[];for(let e=0;e<s.length;e+=1){const i=s[e];if(null!=i){const e=V(i)?jA(i):i;t.push(e)}}e[i]=t}else null!=s&&(e[i]=V(s)?jA(s):s)}return e}function Fh(t){let e=t;if("string"==typeof e){if(e=e.toLowerCase(),"true"===e)return!0;if("false"===e)return!1}return Boolean(e)}function pi(t){return ne(t)?Fh(t):void 0}function eo(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function QA(t){const e=eo(t);if(S(e))throw new g("Expected a valid number.");return e}function xe(t){return"string"==typeof t?t:""}function JA(t,e){if(!dc(t))return[];const i=0|t.length,s=new Array(i);for(let n=0;n<i;n++)s[n]=e(t[n]);return s}function $A(t,e){let i;return i=dc(t)?JA(t,e):e(t),i}r();var tS=[Ce.MI,Ce.BI,Eo.aa];function eS(t){let e;const i=t.oC.map((t=>t.ga));return i.item=e=>{const i=0|e,s=t.aC(i);return s&&s.ga||void 0},i.addEventListener=(t,i)=>{e.yn(t,i)},i.removeEventListener=(t,i)=>{e.fn(t,i)},e=new og(i),t.yn(tS,(t=>e.yo(t.ga))),i}r();var ln=function(t){return t[t.gC=0]="gC",t[t.pC=1]="pC",t[t.wC=2]="wC",t[t.yC=3]="yC",t[t.bC=4]="bC",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.AC=7]="AC",t}({});function iS(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function sS(){}function bi(t){const e=[Eo.eC,Eo.aa,Eo.iC,Eo.nC,Eo.QUALITY_UNAVAILABLE];let i;const s={get activeQuality(){return t.SC&&t.SC.ga},get enabled(){return t.Rt},set enabled(e){t.Rt=Fh(e)},get id(){return t.o},get uid(){return t.TC},get kind(){return t.Lt},get label(){return t.kh},set label(e){t.kh=xe(e)},get accessibility(){var e,i;return null!=(i=null==(e=t.kC)?void 0:e.map(iS))?i:[]},get language(){return t.gs},get qualities(){return t.EC.ga},set targetQuality(e){let i;i=e?function(t,e){const i=[];for(const s of t.EC.oC)for(const t of e)s.ga===t&&i.push(s);return i}(t,rl(e)?e:[e]):[],i.length>0?t.xC=i:t.xC=void 0},get targetQuality(){if(t.xC)return 1===t.xC.length?t.xC[0].ga:t.xC.map((t=>t.ga))},addEventListener(t,e){const s=$A(t,xe);i.yn(s,e)},removeEventListener(t,e){const s=$A(t,xe);i.fn(s,e)}};return i=new og(s),t.yn(e,(t=>i.yo(t.ga))),w.defineProperty(s,"constructor",{value:sS}),s}function nS(){}function rS(t){const e=eS(t);return w.defineProperty(e,"constructor",{value:nS}),e}var Xh=class extends HA{ma(){return rS(this)}fC(t){return t.Rt}};r(),r(),r();var yh=function(t){return t.Ch="disabled",t.RC="hidden",t.Jn="showing",t}({});function fu(t){if("string"==typeof t){const e=t.toLowerCase();switch(e){case"disabled":case"hidden":case"showing":return e}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}r();var sn=function(t){return t.ua="error",t}({});function oS(){}function Jh(t){const e=[Eo.aa,Eo.eC,Eo.FI,Eo.WI,Eo.ZI,Eo.zI,Eo.GI,Eo.YI,Eo.QI,Eo.$I],i=[sn.ua];let s;const n={get kind(){return t.Lt},get label(){return t.kh},set label(e){t.kh=xe(e)},get language(){return t.gs},get id(){return t.o},get uid(){return t.TC},get inBandMetadataTrackDispatchType(){return t.IC},get mode(){return t.TE},set mode(e){e!==yh.Jn&&e!==yh.RC&&e!==yh.Ch||t.DC(e)},get forced(){return Boolean(t.NC)},get accessibility(){var e,i;return null!=(i=null==(e=t.kC)?void 0:e.map(iS))?i:[]},get type(){return t.pw},get readyState(){return t.tI},get cues(){return t.TE===yh.Ch?null:t.L.ga},get activeCues(){return t.TE===yh.Ch?null:t.q.ga},get src(){return t.MC||""},addEventListener(t,e){const i=$A(t,xe);s.yn(i,e)},removeEventListener(t,e){const i=$A(t,xe);s.fn(i,e)}};return s=new og(t),t.yn(e,(t=>s.yo(t.ga))),t.yn(i,(t=>s.yo(t))),w.defineProperty(n,"constructor",{value:oS}),n}function hS(){}function aS(t){const e=eS(t);return w.defineProperty(e,"constructor",{value:hS}),e}var ut=class extends HA{ma(){return aS(this)}fC(t){return t.TE===yh.Jn}};r(),r();var uS=class extends Bo{get LC(){}get BC(){return!1}get OC(){}get ga(){var t;return null!=(t=this.Za)?t:this.Za=cS(this)}FC(){}};function cS(t){return{goLive:()=>t.FC(),get isLive(){return t.BC},get latencies(){return t.LC},get manifest(){return t.OC},addEventListener(e,i){t.yn(dS(e),i)},removeEventListener(e,i){t.fn(dS(e),i)}}}var lS=["golive","latencyrecoveryseek"];function dS(t){const e=$A(t,xe);return(Kt(e)?[e]:e).filter((t=>qt(lS,t)))}var Dc=class extends Bo{set cC(t){const e=this.lC;t!==e&&(e&&this.dC(e),t&&this._C(t),this.lC=t)}get cC(){return this.lC}get ga(){return this.Za||(this.Za=cS(this)),this.Za}_C(t){t.yn(lS,this.Ds)}dC(t){t.fn(lS,this.Ds)}FC(){var t;null==(t=this.lC)||t.FC()}get LC(){var t;return null==(t=this.lC)?void 0:t.LC}get BC(){return!!this.lC&&this.lC.BC}get OC(){var t;return null==(t=this.lC)?void 0:t.OC}gn(){this.Bo(),this.lC&&this.dC(this.lC),this.lC=void 0}constructor(){super(),this.lC=void 0,this.Za=void 0,this.lC=void 0}};r(),r();var fS="8E80B9CE",_S=function(t){return t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled",t}({});function vS(t){return{appID:t&&t.appID?xe(t.appID):fS}}r(),r();var _h=function(t){return t._E="",t.VC="anonymous",t.WC="use-credentials",t}({}),nl=function(t){return t.GC="application/dash+xml",t.HC="application/vnd.apple.mpegurl",t.ZC="application/x-mpegurl",t.XC="video/mp4",t.zC="application/vnd.theoplayer.hesp+json",t.qC="application/vnd.theo.hesp+json",t.YC="millicast",t.KC="theolive",t}({});function mS(t){if(null!==t)return t}function gS(t){const e={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:mS(t.streamActivityMonitorID),adTagParameters:V(t.adTagParameters)?t.adTagParameters:{},authToken:mS(t.authToken),omidAccessModeRules:mS(t.omidAccessModeRules)};if("vod"===(null==t?void 0:t.availabilityType)||function(t){const e=t;return Boolean(e.videoID&&e.contentSourceID)}(t)){const i=t.videoID,s=t.contentSourceID;return i?s?la({},e,{availabilityType:"vod",videoID:i,contentSourceID:s}):void As.Mp("A VOD DAI configuration was provided without valid contentSourceID which is required."):void As.Mp("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const e=t;return Boolean(e.assetKey)}(t)){const i=t.assetKey;return i?la({},e,{availabilityType:"live",assetKey:i}):void As.Mp("A Live DAI configuration was provided without valid assetKey which is required.")}As.Mp("A DAI configuration was provided without a valid availabilityType which is required.")}function pS(t){return"google-dai"===t.integration?gS(t):la({},t,{integration:String(t.integration)})}r(),r(),r(),r(),r(),r();var bc,xh="titanium",wS="conax",yS="ezdrm",bS="irdeto",AS="vudrm",SS="verimatrix",mo="keyos",TS="drmtoday",kS="expressplay",ES="azure",xS="xstream",RS="vimond",IS="axinom",CS="uplynk",PS="comcast",DS="custom";function NS(t,e){if(null==t)return{};var i,s,n={},r=w.keys(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||(n[i]=t[i]);return n}function MS(t){return ne(t.token&&t.deviceId)}function LS(t){var e;const i=null==(e=t.fairplay)?void 0:e.headers;return void 0!==i&&ne(i.PreAuthorization)}function BS(t){const e=t;return MS(e)&&""!==e.token&&""!==e.deviceId&&!LS(e)}r(),r(),r(),r(),r(),function(t){t.jC=!1,t.QC=!1,t.JC=!1,t.$C=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.tP=!1,t.eP=!1,t.LOG_LCEVC_DETAILS=!1}(bc||(bc={})),r();var ir=class extends A{get name(){return"ContentProtectionError"}constructor(t,e,i,s,n,r,o,h){super(t,e,i),this.url=s,this.status=n,this.statusText=r,this.response=o,this.systemCode=h}};r();var OS=class{get iP(){return this.sP}get rT(){return this.$S}nP(t){return function(t){const e=t.onCertificateRequest;if(void 0!==e&&"function"!=typeof e)throw new b("ContentProtectionIntegration.onCertificateRequest is not a function.");const i=t.onCertificateResponse;if(void 0!==i&&"function"!=typeof i)throw new b("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new b("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new b("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new b("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.rP.build(t))}constructor(t,e,i){this.sP=t,this.$S=e,this.rP=i}};r();var FS=function(t){return t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED",t}({}),VS=class{registerContentProtectionIntegration(t,e,i){switch(this.oP(t,e,i)){case FS.FAILED:throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+e+".");case FS.OVERRIDDEN:{const i=aT(e);As.Mp("Warning: Overwriting an earlier registered integration for "+t+" and "+i+".");break}case FS.SUCCEEDED:aT(e);0;break}}oP(t,e,i){const s=aT(e);if(!s)return FS.FAILED;let n=FS.SUCCEEDED;for(const e of this.hP.slice())e.iP===t&&e.rT===s&&(n=FS.OVERRIDDEN,we(this.hP,e));return this.hP.push(new OS(t,s,i)),n}aP(t,e){return void 0!==this.uP(t,e)}cP(t,e,i){const s=this.uP(t,e);if(!s)throw g("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+e);return s.nP(i)}uP(t,e){for(const i of this.hP)if(i.iP===t&&(!e||i.rT===e))return i}constructor(){this.hP=[]}};VS.lP=new VS,r(),r();var Mt=function(t){return t.dP="moov",t.fP="mvhd",t._P="trak",t.vP="tkhd",t.mP="mdia",t.gP="mdhd",t.pP="hdlr",t.wP="minf",t.yP="stbl",t.bP="stsd",t.AP="stsc",t.SP="mvex",t.TP="trex",t.kP="avc1",t.EP="avcC",t.xP="hev1",t.RP="hvc1",t.IP="hvcC",t.CP="vp09",t.PP="vpcC",t.DP="av01",t.NP="av1C",t.MP="dvcC",t.LP="dvvC",t.BP="dvwC",t.OP="dec3",t.FP="dvav",t.VP="dva1",t.WP="dvhe",t.UP="dvh1",t.GP="ec-3",t.HP="colr",t.ZP="pasp",t.zP="mp4a",t.qP="esds",t.YP="fLaC",t.KP="dfLa",t.jP="wvtt",t.QP="vttC",t.JP="vlab",t.$P="enca",t.tD="encv",t.eD="moof",t.iD="mfhd",t.sD="traf",t.nD="tfhd",t.rD="trun",t.oD="tfdt",t.hD="senc",t.aD="mdat",t.uD="pssh",t.cD="emsg",t.lD="sidx",t.dD="styp",t.fD="ftyp",t._D="sinf",t.vD="frma",t}({}),WS=function(t){return t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof",t}({}),Kh=function(t){return t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",t}({}),jh=function(t){return t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT",t}({});r();var US=class t{mD(){return hc(this.Zk,this.gD)}pD(){return Ni(this.Zk,this.gD)}wD(){return function(t,e,i){void 0===i&&(i=!1);const s=t.getInt16(e.tc,i);return e.Ab(2),s}(this.Zk,this.gD)}yD(){return os(this.Zk,this.gD)}bD(){return function(t,e,i){void 0===i&&(i=!1);const s=t.getInt32(e.tc,i);return e.Ab(4),s}(this.Zk,this.gD)}SD(){return Qr(this.Zk,this.gD)}TD(t){return E(this.Zk,this.gD,t)}kD(t){return function(t,e,i){const s=[];for(let n=0;n<i;n++)s.push(os(t,e));return s}(this.Zk,this.gD,t)}ED(t){return Sc(this.Zk,this.gD,t)}xD(){return Yg(this.Zk,this.gD)}RD(t){this.gD.Ab(t)}Tb(){return new t(this.Zk,this.gD.Tb())}constructor(t,e){this.Zk=t,this.gD=e}};r(),r();function GS(t,e){return t.pw===e}function dn(t,e){for(const i of t)if(GS(i,e))return i}var HS=class extends pt{get name(){return"DataIncompleteError"}constructor(t,e){super(),this.CD=t,this.PD=e}},St=class t{static DD(e){const i=e.Zk,s=e.gD,n=t.ND(i,s,!1);if(!n.MD)throw new HS(s.tc,n.m);return n.m}static ND(e,i,s){const n=[];for(;i.tc<e.byteLength;){const r=t.LD(e,i,s);if(!r.MD)return{MD:!1,m:n};n.push(r.BD)}return{MD:!0,m:n}}static OD(e,i){const s=t.LD(e,i,!1);if(!s.MD)throw new HS(i.tc);return s.BD}static FD(e,i){const s=e.Zk,n=e.gD;for(;n.tc<s.byteLength;){const e=t.LD(s,n,!1);if(!e.MD)return;if(e.BD.pw===i)return e.BD}}static LD(e,i,s){const n=i.tc,r=t.VD(e,i);if(!r.MD)return r;const o=r.WD;let h=o.Rb;if(0===h){if(s)return i.Sb(n),{MD:!1,UD:1/0};h=e.byteLength-n}const a=n+h;if(a>e.byteLength){const t=a;return i.Sb(n),{MD:!1,UD:t}}const u={pw:o.pw,tc:n,Zk:new US(pu(e,n,a),new Ui(o.GD))};return i.Sb(a),{MD:!0,BD:u}}static VD(t,e){const i=e.tc;if(!Pg(t,e,8)){return{MD:!1,UD:e.tc+8}}let s=os(t,e),n=Sc(t,e,4);if(1===s){if(!Pg(t,e,8)){const t=e.tc+8;return e.Sb(i),{MD:!1,UD:t}}s=Qr(t,e).toNumber()}if("uuid"===n){if(!Pg(t,e,16)){const t=e.tc+16;return e.Sb(i),{MD:!1,UD:t}}n=Sc(t,e,16)}return{MD:!0,WD:{pw:n,Rb:s,GD:e.tc-i}}}static HD(t,e,i){const s=t.Zk,n=t.gD;let r=ei(Th(s),n.tc,s.byteLength);return i&&(r=_c(r)),n.Ab(r.byteLength),{pw:e,Zk:r}}static ZD(e,i,s){const n=e.yD(),{version:r,flags:o}=XS(n);return{pw:i,XD:r,zD:o,Zk:t.HD(e,i,s).Zk}}};function Ra(t,e){const i=wi(t,e);if(!i)throw new g("Missing "+e+" atom");return i}function wi(t,e){for(const i of t)if(i.pw===e)return i.Zk}function ZS(t,e){const i=[];for(const s of t)s.pw===e&&i.push(s.Zk);return i}function XS(t){return{version:t>>24,flags:new xg(16777215&t)}}var jo=class t{static qD(e){const i=[],s=St.DD(new US(e,new Ui));for(const e of s){const s=t.YD(e);s&&i.push(s)}return i}static KD(t){return St.ND(t,new Ui,!1).m.some(this.jD)}static QD(e){return ZS(St.DD(new US(e,new Ui)),Mt.uD).map(t.JD)}static $D(e){return ZS(St.DD(e.Zk),Mt.uD).map(t.JD)}static jD(t){return t.pw===Mt.fD||t.pw===Mt.dD||t.pw===Mt.dP||t.pw===Mt.eD||t.pw===Mt.aD||t.pw===Mt.lD||t.pw===Mt.cD}static YD(e){switch(e.pw){case Mt.dP:return t.tN(e.Zk);case Mt.eD:return t.eN(e.Zk,e.tc);case Mt.aD:return t.iN(e.Zk);case Mt.lD:return t.sN(e.Zk);case Mt.cD:return t.nN(e.Zk)}}static tN(e){const i=St.DD(e),s=Ra(i,Mt.fP),n=ZS(i,Mt._P),r=wi(i,Mt.SP),o=t.rN(s),h=n.map(t.oN),a=r?t.hN(r):void 0;return{pw:Mt.dP,WD:o,Z:h,aN:a}}static rN(t){const e=t.yD(),{version:i,flags:s}=XS(e),n=1===i?t.SD():t.yD(),r=1===i?t.SD():t.yD(),o=t.yD(),h=1===i?t.SD():t.yD(),a=t.yD(),u=t.pD()>>8;t.RD(2),t.RD(8);const c=t.kD(9);t.RD(24);const l=t.yD();return{pw:Mt.fP,XD:i,zD:s,uN:n,cN:r,lN:o,ct:h,dN:a,dI:u,fN:c,_N:l}}static oN(e){const i=St.DD(e),s=Ra(i,Mt.vP),n=Ra(i,Mt.mP),r=t.vN(s),o=t.mN(n);return{pw:Mt._P,WD:r,gN:o}}static vN(t){const e=t.yD(),{version:i,flags:s}=XS(e),n=1===i?t.SD():t.yD(),r=1===i?t.SD():t.yD(),o=t.yD();t.RD(4);const h=1===i?t.SD():t.yD();t.RD(8);const a=t.wD(),u=t.wD(),c=t.wD()/256;t.RD(2);const l=t.kD(9),d=t.yD()/65536,f=t.yD()/65536;return{pw:Mt.vP,pN:s.kb(1),wN:s.kb(2),yN:s.kb(4),uN:n,cN:r,bN:o,ct:h,AN:a,SN:u,dI:c,fN:l,ji:d,Ti:f}}static mN(e){const i=St.DD(e),s=Ra(i,Mt.gP),n=Ra(i,Mt.pP),r=Ra(i,Mt.wP),o=t.TN(s),h=t.kN(n),a=t.EN(r);return{pw:Mt.mP,WD:o,xN:h,RN:a}}static TN(t){const e=t.yD(),{version:i,flags:s}=XS(e),n=1===i?t.SD():t.yD(),r=1===i?t.SD():t.yD(),o=t.yD(),h=1===i?t.SD():t.yD();t.pD();return t.RD(2),{pw:Mt.gP,XD:i,zD:s,uN:n,cN:r,lN:o,ct:h}}static kN(t){const e=t.yD(),{version:i,flags:s}=XS(e);t.RD(4);const n=t.ED(4);t.RD(12);const r=t.xD();return{pw:Mt.pP,XD:i,zD:s,CN:n,l:r}}static EN(e){const i=Ra(St.DD(e),Mt.yP),s=t.PN(i);return{pw:Mt.wP,DN:s}}static PN(e){const i=Ra(St.DD(e),Mt.bP),s=t.NN(i);return{pw:Mt.yP,MN:s}}static NN(e){const i=e.yD(),{version:s,flags:n}=XS(i),r=(e.yD(),[]),o=St.DD(e);for(const e of o){const i=t.LN(e.Zk,e.pw);i&&r.push(i)}return{pw:Mt.bP,XD:s,zD:n,BN:r}}static LN(e,i){let s=t.ON(e,i);return s||(s=t.FN(e,i),s||(i===Mt.jP?t.VN(e):void 0))}static ON(e,i){return i===Mt.zP?t.WN(e):i===Mt.YP||i===Mt.YP.toLowerCase()||i===Mt.YP.toUpperCase()?t.UN(e):i===Mt.$P?t.GN(e):i===Mt.GP?t.HN(e):void 0}static FN(e,i){return i===Mt.kP?t.ZN(e):i===Mt.xP||i===Mt.RP?t.XN(e,i):i===Mt.CP?t.zN(e,i):i===Mt.DP?t.qN(e,i):i===Mt.tD?t.YN(e):i===Mt.FP||i===Mt.VP||i===Mt.WP||i===Mt.UP?t.KN(e,i):void 0}static jN(t,e){t.RD(6);return{pw:e,QN:t.pD()}}static JN(e,i){const s=t.jN(e,i);e.RD(8);const n=e.pD(),r=e.pD();e.RD(2),e.RD(2);return la({},s,{$N:n,tM:r,eM:e.yD()>>>16})}static iM(e,i){const s=t.jN(e,i);e.RD(2),e.RD(2),e.RD(12);const n=e.pD(),r=e.pD(),o=e.yD(),h=e.yD();e.RD(4);const a=e.pD();e.RD(32);const u=e.pD();return e.RD(2),la({},s,{ji:n,Ti:r,sM:o,nM:h,rM:a,oM:u})}static WN(e){const i=t.JN(e,Mt.zP),s=Ra(St.DD(e),Mt.qP);return la({},i,{hM:t.aM(s)})}static UN(e){const i=t.JN(e,Mt.YP),s=Ra(St.DD(e),Mt.KP);return la({},i,{uM:t.cM(s)})}static VN(e){const i=t.jN(e,Mt.jP),s=St.DD(e),n=Ra(s,Mt.QP),r=t.lM(n),o=wi(s,Mt.JP);return la({},i,{dM:r,fM:o?t._M(o):void 0})}static lM(t){return{pw:Mt.QP,md:t.xD()}}static _M(t){return{pw:Mt.JP,kh:t.xD()}}static aM(t){return St.ZD(t,Mt.qP,!0)}static cM(t){return St.ZD(t,Mt.KP,!0)}static ZN(e){const i=t.iM(e,Mt.kP),s=St.DD(e),n=Ra(s,Mt.EP),r=wi(s,Mt.ZP);return la({},i,{vM:t.mM(n),gM:r?t.pM(r):void 0})}static XN(e,i){const s=t.iM(e,i),n=Ra(St.DD(e),Mt.IP);return la({},s,{wM:t.yM(n)})}static zN(e,i){const s=t.iM(e,i),n=Ra(St.DD(e),Mt.PP);return la({},s,{bM:t.AM(n)})}static qN(e,i){const s=t.iM(e,i),n=St.DD(e),r=Ra(n,Mt.NP),o=t.SM(r),h=wi(n,Mt.HP);return la({},s,{TM:o,kM:h?t.EM(h):void 0})}static YN(e){const i=e.Tb(),s=t.iM(e,Mt.tD),n=Ra(St.DD(e),Mt._D),r=t.xM(n);return la({},s,{RM:t.FN(i,r.CM.IM),PM:r})}static KN(e,i){const s=t.iM(e,i),n=St.DD(e);return la({},s,{DM:t.NM(n)})}static HN(e){const i=t.JN(e,Mt.GP),s=Ra(St.DD(e),Mt.OP);return la({},i,{MM:t.LM(s)})}static GN(e){const i=e.Tb(),s=t.JN(e,Mt.$P),n=Ra(St.DD(e),Mt._D),r=t.xM(n);return la({},s,{RM:t.ON(i,r.CM.IM),PM:r})}static xM(e){const i=Ra(St.DD(e),Mt.vD),s=t.BM(i);return{pw:Mt._D,CM:s}}static BM(t){const e=t.ED(4);return{pw:Mt.vD,IM:e}}static mM(t){return St.HD(t,Mt.EP,!0)}static yM(t){return St.HD(t,Mt.IP,!0)}static NM(t){const e=wi(t,Mt.MP);if(void 0!==e)return St.HD(e,Mt.MP,!0);const i=wi(t,Mt.LP);if(void 0!==i)return St.HD(i,Mt.LP,!0);const s=wi(t,Mt.BP);if(void 0!==s)return St.HD(s,Mt.BP,!0);throw g("Error parsing Dolby Vision configuration box.")}static LM(t){return St.HD(t,Mt.OP,!0)}static AM(t){return St.HD(t,Mt.PP,!0)}static SM(t){return St.HD(t,Mt.NP,!0)}static EM(t){const e=t.ED(4);switch(e){case"nclx":return{OM:WS.ON_SCREEN_COLOURS,FM:t.pD(),VM:t.pD(),WM:t.pD(),UM:0!=(128&t.mD())};case"rICC":return{OM:WS.RESTRICTED_ICC_PROFILE};case"prof":return{OM:WS.UNRESTRICED_ICC_PROFILE};default:throw g("Could not parse ColourInformationBox: unknown type '"+e+"'.")}}static pM(t){const e=t.yD(),i=t.yD();return{pw:Mt.ZP,GM:e,HM:i}}static hN(e){const i=ZS(St.DD(e),Mt.TP).map(t.ZM);return{pw:Mt.SP,Z:i}}static ZM(t){const e=t.yD(),{version:i,flags:s}=XS(e),n=t.yD(),r=t.yD(),o=t.yD(),h=t.yD(),a=t.yD();return{pw:Mt.TP,XD:i,zD:s,bN:n,XM:r,zM:o,qM:h,YM:a}}static eN(e,i){const s=St.DD(e),n=Ra(s,Mt.iD),r=ZS(s,Mt.sD),o=t.KM(n),h=r.map(t.jM);return{pw:Mt.eD,QM:i,WD:o,Z:h}}static KM(t){const e=t.yD(),{version:i,flags:s}=XS(e),n=t.yD();return{pw:Mt.iD,XD:i,zD:s,JM:n}}static jM(e){const i=St.DD(e),s=Ra(i,Mt.nD),n=ZS(i,Mt.rD),r=wi(i,Mt.oD),o=t.$M(s),h=n.map((e=>t.tL(e,o))),a=r?t.eL(r):void 0;return{pw:Mt.sD,WD:o,iL:h,sL:a}}static $M(t){const e=t.yD(),{version:i,flags:s}=XS(e),n=t.yD(),r=s.kb(Kh.BASE_DATA_OFFSET_PRESENT)?t.SD():void 0,o=s.kb(Kh.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.yD():void 0,h=s.kb(Kh.DEFAULT_SAMPLE_DURATION_PRESENT)?t.yD():void 0,a=s.kb(Kh.DEFAULT_SAMPLE_SIZE_PRESENT)?t.yD():void 0,u=s.kb(Kh.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.yD():void 0;return{pw:Mt.nD,XD:i,zD:s,bN:n,nL:r,rL:o,zM:h,qM:a,YM:u}}static tL(e,i){const s=e.yD(),{version:n,flags:r}=XS(s),o=e.yD(),h=r.kb(jh.DATA_OFFSET_PRESENT)?e.bD():void 0,a=r.kb(jh.FIRST_SAMPLE_FLAGS_PRESENT)?e.yD():void 0,u=[];for(let s=0;s<o;s++){const o=t.oL(e,r,n,i);0===s&&void 0!==a&&(o.zD=a),u.push(o)}return{pw:Mt.rD,XD:n,zD:r,hL:o,QM:h,aL:a,uL:u}}static oL(t,e,i,s){return{ct:e.kb(jh.SAMPLE_DURATION_PRESENT)?t.yD():s.zM,Rb:e.kb(jh.SAMPLE_SIZE_PRESENT)?t.yD():s.qM,zD:e.kb(jh.SAMPLE_FLAGS_PRESENT)?t.yD():s.YM,cL:e.kb(jh.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===i?t.yD():t.bD():void 0}}static nN(t){const e=t.Zk,i=t.gD,s=os(e,i),{version:n,flags:r}=XS(s);if(1===n){const t=os(e,i),s=Qr(e,i),o=os(e,i),h=os(e,i),a=Og(e,i),u=Og(e,i),c=Rc(Th(e),i.tc,e.byteLength);return i.Ab(c.byteLength),{pw:Mt.cD,XD:n,zD:r,lL:a,Ix:u,lN:t,dL:s,fL:o,o:h,_L:c}}{const t=Og(e,i),s=Og(e,i),o=os(e,i),h=os(e,i),a=os(e,i),u=os(e,i),c=Rc(Th(e),i.tc,e.byteLength);return i.Ab(c.byteLength),{pw:Mt.cD,zD:r,XD:n,lL:t,Ix:s,lN:o,vL:h,fL:a,o:u,_L:c}}}static iN(t){return St.HD(t,Mt.aD,!1)}static JD(e){const i=e.Zk,s=e.gD,n=_c(Th(i)).buffer,r=os(i,s),{version:o,flags:h}=XS(r),a=t.mL(i,s),u=[];if(o>0){const t=os(i,s);for(let e=0;e<t;e++){const t=E(i,s,16);u.push(t)}}const c=os(i,s),l=new j(n,s.tc,c);return s.Ab(i.byteLength),{pw:Mt.uD,XD:o,zD:h,gL:a,pL:u,wL:c,Zk:l,yL:n}}static mL(t,e){let i="";for(let s=0;s<4;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<6;s++){const s=hc(t,e).toString(16);i+=1===s.length?"0"+s:s}return i.toLowerCase()}static sN(t){const e=t.Zk,i=t.gD,s=os(e,i),{version:n,flags:r}=XS(s),o=os(e,i),h=os(e,i);let a,u;0===n?(a=fo.fromBits(os(e,i),0,!0),u=fo.fromBits(os(e,i),0,!0)):(a=Qr(e,i),u=Qr(e,i)),i.Ab(2);const c=Ni(e,i),l=[];for(let t=0;t<c;t+=1){const t=os(e,i),s=t>>31&1,n=2147483647&t,r=os(e,i),o=os(e,i),h=o>>31&1,a=o>>28&7,u=268435455&o;l.push({bL:s,AL:n,ct:r,SL:h,TL:a,kL:u})}return{pw:Mt.lD,XD:n,zD:r,EL:o,lN:h,xL:a,RL:u,IL:c,CL:l}}static eL(t){const e=t.Zk,i=t.gD,s=os(e,i),{version:n,flags:r}=XS(s);let o;return o=0===n?fo.fromBits(os(e,i),0,!0):Qr(e,i),{pw:Mt.oD,XD:n,zD:r,sL:o}}},zS={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function qS(t){if(!t)return!0;const e=t.licenseAcquisitionURL,i=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,o=t.queryParameters;return!(e||i||s||n||r||o)}function YS(t){return t&&void 0!==t.licenseAcquisitionURL}var KS=YS,jS=YS;function QS(t){if(!t)return!0;if(eT(t))return!1;const e=t.fairplay,i=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return qS(e)&&qS(i)&&qS(s)&&void 0===n&&qS(r)}function JS(t){const e=BS(t),i=function(t){var e;const i=t;return LS(i)&&""!==(null==(e=i.fairplay)?void 0:e.headers.PreAuthorization)&&!MS(i)}(t);return(!e||!i)&&(e||i)}function $S(t){return t.integration===bS}function tT(t){const e=t;if(!e)return!1;if(QS(e))return!1;const i=e.fairplay,s=e.playready,n=e.widevine,r=e.clearkey;if(eT(t))return!0;if(i&&!function(t){const e=t;return e&&(void 0!==e.certificateURL||void 0!==e.certificate)}(i))return!1;if(s&&!KS(s))return!1;if(n&&!jS(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(e.integration){if(VS.lP.aP(e.integration))return!0;switch(e.integration){case xh:if(!function(t){const e=t,i=e.integration===xh;return i&&(iT(t)||sT(t))}(t))return!1;break;case AS:if(!nT(t))return!1;break;case SS:if(!function(t){const e=t;return e.integration===SS}(t))return!1;break;case bS:if(!$S(t))return!1;break;case wS:if(!JS(t))return!1;break;case yS:if(!function(t){const e=t;return e.integration===yS}(t))return!1;break;case mo:if(!eT(t))return!1;break;case TS:if(!function(t){const e=t;return e.integration===TS&&(void 0!==e.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(e))}(t))return!1;break;case kS:if(!function(t){const e=t;return e.integration===kS}(t))return!1;break;case xS:if(!rT(t))return!1;break;case RS:if(!function(t){return t.integration===RS}(t))return!1;break;case IS:if(!oT(t))return!1;break;case ES:if(!function(t){const e=t;return e.integration===ES&&void 0!==e.token}(t))return!1;break;case CS:if(!function(t){const e=t;return e.integration===CS}(t))return!1;break;case PS:if(!function(t){const e=t;return e&&ne(e.releasePid)&&ne(e.accountId)&&ne(e.token)}(t))return!1;break;case DS:return!0;default:return!1}}return!0}function eT(t){return t.integration===mo}function iT(t){return void 0!==t.authToken}function sT(t){const e=t;return void 0!==e.accountName&&void 0!==e.customerName&&void 0!==e.portalId}function nT(t){const e=t;return e.integration===AS&&void 0!==e.token}function rT(t){const e=t;return e&&e.integration===xS&&Kt(e.ticketAcquisitionURL)&&Kt(e.streamId)}function oT(t){const e=t;return e.integration===IS&&void 0!==e.token}function hT(t,e){const i=e[t];var s;const n=null!=(s=null==i?void 0:i.licenseAcquisitionURL)?s:zS[t];var r;const o=null!=(r=null==i?void 0:i.customdata)?r:e.customdata,h=o?{customData:o}:{};var a;const u=la({},null!=(a=null==i?void 0:i.headers)?a:{},h),c=null!=i?i:{},{customdata:l}=c;return la({},NS(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function aT(t){switch(t.toLowerCase()){case"widevine":case hm:return hm;case"playready":case rm:return rm;case"fairplay":case Ve:return Ve}}function uT(t,e){switch(t){case em:return function(t){const e={},i=jo.QD(new DataView(t));for(const t of i)e[t.gL]=t.yL;return e}(e);case im:case sm:return function(t){return{[lm]:t}}(e);default:throw new A(Ja.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}async function cT(t,e){return void 0===e&&(e=!1),!(!t.widevine||!await As.Zp())||(!(!t.playready||!await As.Hp())||(!(!t.clearkey||!await As.Up())||!(e||!t.fairplay||!await As.Gp())))}function al(t,e,i){const s=function(t,e,i){var s;const{useCredentials:n,crossOrigin:r}=function(t,e){let i=_h._E;return t.useCredentials?i=_h.WC:t.crossOrigin&&(i=LT(t.crossOrigin)),i===_h._E&&e&&e.vr&&e.vr[360]&&(i=_h.VC),{useCredentials:i===_h.WC,crossOrigin:i}}(t,e);let o=t.liveOffset;ne(o)||(o=i&&ne(i.liveOffset)?i.liveOffset:void 0);let h=t.timeServer;ne(h)||(h=e&&ne(e.timeServer)?e.timeServer:void 0);let a=t.hlsDateRange;ne(a)||(a=i&&ne(i.hlsDateRange)?Boolean(i.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),l=Boolean(t.lowLatency),d=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),_=ne(t.dash)?dT(t.dash):void 0,v=ne(t.hls)?fT(t.hls):void 0,m=gT(mT(t.abr),null==i?void 0:i.abr),g=pi(t.lcevc),p=ne(t.ignoreEmbeddedTextTrackTypes)?qT(t.ignoreEmbeddedTextTrackTypes):[];var w;const y=CT(null!=(w=t.seamlessSwitchStrategy)?w:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch),b=RT(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:o,timeServer:h,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:l,useNativePlayback:d,useManagedMediaSource:f,dash:_,hls:v,abr:m,lcevc:g,ignoreEmbeddedTextTrackTypes:p,seamlessSwitchStrategy:y,latencyConfiguration:b}}(t,e,i),n=mS(t.src);let r=t.type;r||(r=t.src?Tu(t.src):void 0);const o=function(t,e){let i;i=ne(t.contentProtection)?t.contentProtection:ne(t.drm)?t.drm:ne(e)&&ne(e.contentProtection)?e.contentProtection:ne(e)&&ne(e.drm)?e.drm:void 0;return lT(i)}(t,e);return la({},s,{src:n,type:r,contentProtection:o,ssai:ne(t.ssai)?pS(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function lT(t){return tT(t)&&t.integration&&t.integration===mo?function(t){const e=hT(Ne.fw,t),i=hT(Ne.dw,t),s=t[Ne.mw]&&hT(Ne.mw,t);return la({integration:"keyos",widevine:e,playready:i},s?{fairplay:s}:{})}(t):t}function dT(t){return{useSeamlessPeriodSwitch:CT(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:pi(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?eo(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:pi(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:pi(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:pi(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards),segmentRelativeVttTiming:pi(null==t?void 0:t.segmentRelativeVttTiming),forceRecreateMediaSourceOnAudioSwitch:pi(null==t?void 0:t.forceRecreateMediaSourceOnAudioSwitch)}}function fT(t){return{discontinuityAlignment:_T(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:Fh(null==t?void 0:t.delaySubtitlePreload)}}function _T(t){if(!t||!Kt(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}r(),r(),r(),r();var Io=function(t){return t.cE="audio",t.lE="video",t.wk="text",t.dE="image",t.Qk="unknown",t}({});function vT(t){return"audio"===t||"video"===t}function mT(t){if(!ne(t))return;return pT(JA(null==t?void 0:t.preferredAudioCodecs,xe),JA(null==t?void 0:t.preferredVideoCodecs,xe),pi(null==t?void 0:t.restrictToPlayerSize))}function gT(t,e){if(!ne(t)&&!ne(e))return;var i;return pT(wT(null==t?void 0:t.preferredAudioCodecs,null==e?void 0:e.preferredAudioCodecs),wT(null==t?void 0:t.preferredVideoCodecs,null==e?void 0:e.preferredVideoCodecs),null!=(i=null==t?void 0:t.restrictToPlayerSize)?i:null==e?void 0:e.restrictToPlayerSize)}function pT(t,e,i){if(0!==t.length||0!==e.length||void 0!==i)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===e.length?void 0:e,restrictToPlayerSize:i}}function wT(t,e){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=e?e:[]}function yT(t,e){if(void 0!==e)switch(t){case Io.lE:return e.preferredVideoCodecs;case Io.cE:return e.preferredAudioCodecs;default:return}}r(),r(),r();var Xc=!1;r();var Zc=function(t){return t.PL="canplay",t.DL="canplaythrough",t.NL="loadeddata",t.ML="loadedmetadata",t.QI="readystatechange",t.LL="waiting",t.BL="playing",t}({}),no=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function bT(t,e,i){return i?t<=e:t<e}r();var ee=class t{get OL(){return this.FL.slice()}Cn(t){return this.FL[2*t]}jn(t){return this.FL[2*t+1]}VL(t){return this.WL[2*t]}UL(t){return this.WL[2*t+1]}ks(){const t=this;return{get length(){return t.V},start(e){const i=0|e;return t.GL(i),t.Cn(i)},end(e){const i=0|e;return t.GL(i),t.jn(i)}}}HL(){const e=new Array(2*this.V),i=new Array(2*this.V);for(let t=0;t<this.V;t++)e[2*t]=this.Cn(t),e[2*t+1]=this.jn(t),i[2*t]=!0,i[2*t+1]=!0;return new t(e,i)}GL(t){if(t<0)throw new g("The index provided ("+t+") must be non-negative");if(t>=this.V)throw new g("The index provided ("+t+") is greater than the maximum bound ("+this.V+")")}ZL(t){if(0===this.V)return 0;if(this.gr(t))return t;if(t<=this.Cn(0))return this.Cn(0);if(t>=this.jn(this.V-1))return this.jn(this.V-1);{let e=0,i=1/0;for(let s=0;s<this.V;s++){const n=this.Cn(s),r=_.abs(n-t);r<i&&(e=n,i=r);const o=this.jn(s),h=_.abs(o-t);h<i&&(e=o,i=h)}return e}}Sn(e){let i=0,s=0;const n=[],r=[];for(;i<this.V&&s<e.V;){const t=this.Cn(i),o=this.jn(i),h=this.VL(i),a=this.UL(i),u=e.Cn(s),c=e.jn(s),l=e.VL(s),d=e.UL(s),f=_.max(t,u),v=_.min(o,c);let m,g;m=t===u?h&&l:f===t?h:l,g=o===c?a&&d:v===o?a:d,(f<v||m&&g&&f===v)&&(n.push(f,v),r.push(m,g)),o===c?(i+=1,s+=1):o<c?i+=1:s+=1}return new t(n,r)}XL(){const e=this.zL(),i=e.V;if(0===i)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=e.Cn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!e.VL(0)));for(let t=0;t<i-1;t++)s.push(e.jn(t),e.Cn(t+1)),n.push(!e.UL(t),!e.VL(t+1));const o=e.jn(i-1);return o!==1/0&&(s.push(o,1/0),n.push(!e.UL(i-1),!1)),new t(s,n)}qL(e){let i=0,s=0;const n=this.V,r=e.V,o=new Array(2*(n+r)),h=new Array(2*(n+r));let a=0;for(;i<n&&s<r;){const t=this.Cn(i),n=this.jn(i),r=e.Cn(s),u=e.jn(s);t<r||t===r&&n<u?(o[a]=t,o[a+1]=n,h[a]=this.VL(i),h[a+1]=this.UL(i),i++):(o[a]=r,o[a+1]=u,h[a]=e.VL(s),h[a+1]=e.UL(s),s++),a+=2}for(;i<n;)o[a]=this.Cn(i),o[a+1]=this.jn(i),h[a]=this.VL(i),h[a+1]=this.UL(i),i++,a+=2;for(;s<r;)o[a]=e.Cn(s),o[a+1]=e.jn(s),h[a]=e.VL(s),h[a+1]=e.UL(s),s++,a+=2;return new t(o,h)}YL(e){void 0===e&&(e=0);const i=this.V;if(i<2)return this;const s=[],n=[];let r=this.Cn(0),o=this.jn(0),h=this.VL(0),a=this.UL(0);for(let t=1;t<i;t++){const i=this.Cn(t),u=this.jn(t);let c=this.VL(t),l=this.UL(t);r<i&&o>u||(r===i&&(c=h||c,h=c),o===u&&(l=a||l,a=l),bT(i,o+e,a||c)?(o=u,a=l):(s.push(r,o),n.push(h,a),r=i,o=u,h=c,a=l))}return s.push(r,o),n.push(h,a),new t(s,n).zL()}zL(){const e=[],i=[];for(let t=0;t<this.V;t++){const s=this.Cn(t),n=this.jn(t),r=this.VL(t),o=this.UL(t);s===n?(r||o)&&(e.push(s,n),i.push(!0,!0)):(e.push(s,n),i.push(r,o))}return new t(e,i)}KL(t){if(0===this.V)return t;if(0===t.V)return this;return this.qL(t).YL()}jL(t){const e=this.zL(),i=t.zL(),s=e.XL(),n=i.XL(),r=s.Sn(i),o=n.Sn(e);return r.KL(o)}Ab(e){if(0===this.V||0===e)return this;const i=[],s=[];for(let t=0;t<this.V;t++){const n=this.Cn(t)+e,r=this.jn(t)+e;i.push(n,r),s.push(this.VL(t),this.UL(t))}return new t(i,s)}QL(t){return 0===this.V||0===t.V?this:this.zL().Sn(t.zL().XL())}gr(t,e){return this.JL(t,e)>=0}$L(t,e,i,s,n){return this.tB(t,e,i,s,n)>=0}eB(t,e,i,s,n){return this.iB(t,e,i,s,n)>=0}sB(t){if(t.V!==this.V)return!1;for(let e=0;e<this.V;e++)if(this.Cn(e)!==t.Cn(e)||this.jn(e)!==t.jn(e)||this.VL(e)!==t.VL(e)||this.UL(e)!==t.UL(e))return!1;return!0}nB(e){const i=[],s=[];for(let t=0;t<this.V;t++){const n=this.Cn(t),r=this.jn(t),o=this.VL(t),h=this.UL(t);e(n,r,o,h)&&(i.push(n,r),s.push(o,h))}return new t(i,s)}iB(t,e,i,s,n){void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,o=e+n;for(let t=0;t<this.V;t+=1)if(bT(this.Cn(t),o,!s||this.VL(t))&&bT(r,this.jn(t),!i||this.UL(t)))return t;return-1}tB(t,e,i,s,n){void 0===i&&(i=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,o=e-n;for(let t=0;t<this.V;t+=1)if(bT(this.Cn(t),r,!i||this.VL(t))&&bT(o,this.jn(t),!s||this.UL(t)))return t;return-1}JL(t,e){return this.tB(t,t,!0,!0,e)}rB(t,e){void 0===e&&(e=0);const i=t+e;for(let t=this.V-1;t>=0;t-=1)if(bT(this.Cn(t),i,this.VL(t)))return t;return-1}oB(t,e){void 0===e&&(e=0);const i=t-e;for(let t=0;t<this.V;t+=1)if(bT(i,this.jn(t),this.UL(t)))return t;return-1}hB(t,e){void 0===e&&(e=0);const i=t+e;for(let t=0;t<this.V;t+=1)if(this.Cn(t)>i)return t;return-1}aB(e){return this.GL(e),new t([this.Cn(e),this.jn(e)],[this.VL(e),this.UL(e)])}uB(t,e){const i=this.JL(t,e);return i<0?void 0:this.aB(i)}get cB(){let t=0;for(let e=0;e<this.V;e++){t+=this.jn(e)-this.Cn(e)}return t}static xn(e){const i=[];for(let t=0;t<e.length;t++)i.push(e.start(t),e.end(t));return new t(i)}static lB(e){return new t([e,e],[!0,!0])}static dB(e,i){return e<=i?new t([e,i]):t.fB()}static fB(){return AT}constructor(t,e){this.V=t.length>>1,this.FL=t,this.WL=e||function(t){const e=new Array(2*t);for(let i=0,s=0;i<t;i+=1,s+=2)e[s]=!0,e[s+1]=!1;return e}(this.V)}},AT=new ee([]),Pt=.92,gt=1.08,ST=.25,TT=class extends Bo{get _B(){return this.He&&this.Kh}get vB(){return this.mB}get Rt(){return this.He}set Rt(t){this.He=t,t?this.Cn():this.SI()}gB(t){this.pB.push(t),this.wB()}yB(t){we(this.pB,t),this.wB()}wB(){this.mB=this.bB(),this.Kh&&this.AB()}bB(){const t=this.SB,e=function(t,e){const i=e-t.targetOffset;return{minimumOffset:t.minimumOffset+i,targetOffset:t.targetOffset+i,maximumOffset:t.maximumOffset+i,forceSeekOffset:t.forceSeekOffset+i,minimumPlaybackRate:t.minimumPlaybackRate,maximumPlaybackRate:t.maximumPlaybackRate,leniency:t.leniency}}(this.TB,this.kB),i=[e,...this.pB],s=i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.minimumOffset)?i:0)}),t),n=i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.targetOffset)?i:0)}),s+ST),r=i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.maximumOffset)?i:0)}),n+ST);return{minimumOffset:s,targetOffset:n,maximumOffset:r,forceSeekOffset:i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.forceSeekOffset)?i:0)}),r+ST),minimumPlaybackRate:i.reduce(((t,e)=>{var i;return _.min(t,null!=(i=e.minimumPlaybackRate)?i:Pt)}),Pt),maximumPlaybackRate:i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=e.maximumPlaybackRate)?i:gt)}),gt)}}EB(){var t;const e=null==(t=ee.xn(this.ta._R).uB(this.ta.yR))?void 0:t.jn(0),i=void 0!==e?e-this.ta.yR:0;this.xB=_.min(this.xB,i),this.RB+=1}IB(){if(this.RB<10)return;const t=.25-this.xB,e=Zs(this.kB+t,this.kB-.1,this.kB+.1);this.kB=Zs(e,this.CB,this.PB),this.xB=1/0,this.RB=0}DB(){this.NB(),this.qE=As.Fg((()=>this.AB()),500)}NB(){void 0!==this.qE&&(As.Og(this.qE),this.qE=void 0)}Cn(){this.He&&this.MB&&(this.Kh||this.LB.yn(Mi.$y,this.AB),this.BB=As.Op((()=>this.EB()),1e3),this.OB=As.Op((()=>this.IB()),6e4),this.DB(),this.Kh=!0)}SI(){this.Kh&&(this.NB(),this.BB&&As.Fp(this.BB),this.OB&&As.Fp(this.OB),this.LB.fn(Mi.$y,this.AB),this.FB(1),this.Kh=!1)}Ww(){this.SI(),this.ta.fn(Zc.LL,this.VB),this.ta.fn(Zc.BL,this.WB),this.Bo()}FB(t){this.LB.GB.UB||this.ta.zR!==t&&(this.ta.zR=t)}get HB(){return this.ta.ZB}constructor(t,e,i){var s;super(),this.Kh=!1,this.He=!1,this.pB=[],this.MB=!1,this.SB=0,this.qE=void 0,this.RB=0,this.xB=1/0,this.VB=()=>{const t=this.LB._R,e=this.LB.yR,i=t.uB(e);i&&(this.SB=Zs(i.jn(0)-e,this.SB,.5),this.wB())},this.WB=()=>{this.MB=!0,this.ta.fn(Zc.BL,this.WB),this.He&&this.Cn()},this.AB=()=>{this.NB(),this.DB();const t=this.HB;if(!t)return;const e=this.XB();if(t>this.mB.forceSeekOffset)return this.yo(new pe("latencyrecoveryseek")),void this.FC();const{minimumOffset:i,targetOffset:s,maximumOffset:n}=this.mB,r=this.LB.zR;if(e>n&&this.zB()){const t=this.mB.maximumPlaybackRate;Xc,this.FB(t)}else if(e<i&&!As.Ys.Kg){const t=this.mB.minimumPlaybackRate;Xc,this.FB(t)}else if(r>1&&e<s){const t=1;Xc,this.FB(t)}else if(r<1&&e>s){const t=1;Xc,this.FB(t)}},this.ta=t,this.LB=e,this.TB=i,this.CB=i.targetOffset,this.PB=i.targetOffset+(null!=(s=i.leniency)?s:0),this.kB=i.targetOffset,this.mB=this.bB(),this.ta.yn(Zc.LL,this.VB),this.ta.yn(Zc.BL,this.WB)}},kT=.66,ET=1.5,xT=3;function RT(t){if(!ne(t))return;const e=As.Ys.jg?10:0,i=t.targetOffset;var s;var n;var r;var o;var h;var a;return{minimumOffset:null!=(s=t.minimumOffset)?s:i*kT,targetOffset:i,maximumOffset:null!=(n=t.maximumOffset)?n:i*ET,forceSeekOffset:_.max(null!=(r=t.forceSeekOffset)?r:i*xT,e),minimumPlaybackRate:null!=(o=t.minimumPlaybackRate)?o:Pt,maximumPlaybackRate:null!=(h=t.maximumPlaybackRate)?h:gt,leniency:null!=(a=t.leniency)?a:void 0}}var Pc=function(t){return t.qB="auto",t.YB="always",t.KB="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only",t}({}),IT=function(t){return t.UPLYNK="uplynk",t.MEDIATAILOR="mediatailor",t}({});function CT(t){if(!t||!Kt(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}r(),r();var jn=function(t){return t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled",t}({});r();var PT=!1;r();var DT=function(t){return t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll",t}({});r();var Vr=function(t){return t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange",t.MILLICAST="millicast",t}({});function NT(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":case"millicast":return!0;default:return!1}}function MT(t){return!!t&&Dh(t,"mpd")}function Tu(t){let e=nl.XC;return MT(t)&&(e=nl.GC),function(t){return!!t&&Dh(t,"m3u8")}(t)&&(e=nl.HC),e}function LT(t){switch(t){case _h.VC:case _h.WC:return t;default:return _h._E}}function BT(t){if(!t)return!1;const e=t.toLowerCase();return Cl(e,nl.GC)}function qh(t){if(!t)return!1;const e=t.toLowerCase();return Cl(e,nl.HC)||Cl(e,nl.ZC)}function Gc(t){return V(t)&&V(t.ssai)&&"google-dai"===t.ssai.integration}function zc(t){return V(t)&&("verizon-media"===t.integration||"uplynk"===t.integration)}function OT(t){return V(t)&&("theolive"===t.type||"theolive"===t.integration)}function FT(t){return V(t)&&"mediatailor"===t.integration}function Vc(t){return V(t)&&"millicast"===t.type}function VT(t){if(t.sources)if(rl(t.sources)){for(const e of t.sources)if(Vc(e))return!0}else if(V(t.sources))return Vc(t.sources);return!1}function WT(t){if(Kt(t))return!t;if(zc(t))return!t.id;if(Gc(t)){const e=t.ssai,i="live"===e.availabilityType&&e.assetKey,s="vod"===e.availabilityType&&e.contentSourceID&&e.videoID;return Boolean(i&&s)}return Vc(t)?!t.src||!t.streamAccountId:!t.src}function Cn(t){return Boolean(V(t)&&Kt(t.src))}function UT(t){return t.type===nl.zC||t.type===nl.qC}function qc(t){return Kt(t)||Cn(t)||Gc(t)||zc(t)||Vc(t)}function Bn(t){if(t){if(qc(t))return WT(t);for(const e of t)if(!WT(e))return!1;return!0}return!0}function GT(){return{crossOrigin:_h._E,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:Pc.qB,latencyConfiguration:void 0}}function HT(){return la({},GT(),{src:void 0,type:nl.XC,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function ZT(t){const e={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:jn.ENABLED,googleIma:{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0},theoads:PT};return void 0===t||(void 0!==t.preload&&(e.preload=function(t){return"none"===t?DT.NONE:DT.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(e.showCountdown=Fh(t.showCountdown)),void 0!==t.vpaidMode&&(e.vpaidMode=function(t){switch(t){case"insecure":return jn.INSECURE;case"disabled":return jn.DISABLED;default:return jn.ENABLED}}(t.vpaidMode)),rl(t.allowedMimeTypes)&&(e.allowedMimeTypes=t.allowedMimeTypes.filter(Kt)),void 0!==t.googleIma&&(e.googleIma=function(t){return void 0===t?{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0}:{useNativeIma:Fh(t.useNativeIma),useAdUiElementForSsai:Fh(t.useAdUiElementForSsai),bitrate:null!=(e=t.bitrate)?e:-1,language:ne(t.language)?xe(t.language):void 0,uiElements:t.uiElements};var e}(t.googleIma)),void 0!==t.theoads?e.theoads=Fh(t.theoads):e.theoads=PT),e}function XT(t){if(!dc(t))return[];const e=[];for(const i of t)V(i)&&e.push(i);return e}function zT(t){return Kt(t.src)||Vc(t)}function qT(t){return rl(t)?t.filter(NT):[]}r(),r();var gs=function(t){return t[t.jB=0]="jB",t[t.Xn=1]="Xn",t[t.QB=2]="QB",t[t.JB=3]="JB",t[t.$B=4]="$B",t}({}),Ks=class extends pe{constructor(t,e=gs.jB){super(Mi.Ty),this.currentTime=t,this.readyState=e}};r();var vl=class extends pe{constructor(t){super(Mi.Uy),this.currentTime=t}};r();var Xt=class extends pe{constructor(t){super(Mi.so),this.currentTime=t}};r();var YT=class extends pe{constructor(t,e=gs.Xn){super(Zc.ML),this.currentTime=t,this.readyState=e}};r();var re=class extends pe{constructor(t){super(Mi.Sy),this.duration=t}};r();var Nu=class extends pe{constructor(t,e){super(Mi.Hy),this.currentTime=t,this.playbackRate=e}};r();var I=class extends pe{constructor(t,e){super(Mi.$y),this.currentTime=t,this.currentProgramDateTime=e}};r();var Fs=class extends pe{constructor(t){super(Mi.xy),this.currentTime=t}};r();var KT=class extends pe{constructor(t,e=gs.QB){super(Zc.NL),this.currentTime=t,this.readyState=e}};r();var _t=class extends pe{constructor(t){super(Mi.qy),this.currentTime=t}};r();var ga=class extends pe{constructor(t){super(Mi.zy),this.currentTime=t}};r();var eh=class extends pe{constructor(t,e){super(Mi.eb),this.currentTime=t,this.volume=e}};r();var ro=class extends pe{constructor(t,e=gs.JB){super(Zc.PL),this.currentTime=t,this.readyState=e}};r();var jT=class extends pe{constructor(t,e=gs.$B){super(Zc.DL),this.currentTime=t,this.readyState=e}};r();var au=class extends pe{constructor(t,e){super(Zc.QI),this.currentTime=t,this.readyState=e}};r();var Wa=class extends $s{get error(){return this.errorObject.message}ma(){return this}constructor(t){super(sn.ua),this.errorObject=t}};async function Si(t,e,i,s,n){void 0===i&&(i=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(e)}catch(t){if(Zr(t),r<i){const t=_.min(s*2**r,n);r++,await on(t,e);continue}throw t}}r();var QT={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};r();var Bu=function(t){return t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture",t.NATIVE_PICTURE_IN_PICTURE="native-picture-in-picture",t}({}),JT=function(t){return t.NONE="none",t.ALL="all",t.CONTENT="content",t}({});function $T(t){switch(t){case"all":case"content":return t;default:return"none"}}function tk(t){var e;const i=eu(t||{});return i.libraryLocation&&(i.libraryLocation=Zi(i.libraryLocation,!0)),i.isEmbeddable=Boolean(i.isEmbeddable),i.cast=function(t){const e=vS(t?t.chromecast:void 0),i=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:e,strategy:i}}(i.cast),i.ads=ZT(i.ads),i.analytics=XT(i.analytics),i.mutedAutoplay=$T(i.mutedAutoplay),i.allowNativeFullscreen=Boolean(i.allowNativeFullscreen),i.allowMixedContent=Boolean(i.allowMixedContent),i.persistVolume=Boolean(i.persistVolume),i.liveOffset=function(t){return Number(t)||void 0}(i.liveOffset),i.hlsDateRange=function(t){return Boolean(t)}(i.hlsDateRange),i.retainPlaybackRateOnSourceChange=Boolean(i.retainPlaybackRateOnSourceChange),i.license=function(t){return Kt(t)?t:void 0}(i.license),i.licenseUrl=function(t){if(!t)return;try{return Zi(t)}catch(t){return void As.Mp("Invalid 'licenseUrl', falling back to default URL")}}(i.licenseUrl),i.abr=mT(i.abr),i.retryConfiguration=function(t){const e=la({},QT);return void 0!==t&&(void 0!==t.maxRetries&&(e.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(e.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(e.maximumBackoff=Number(t.maximumBackoff))),e}(i.retryConfiguration),i.hideDeprecationWarnings=Boolean(i.hideDeprecationWarnings),i.theoLive=function(t){if(!t)return t;return la({},t,{externalSessionId:t.externalSessionId?xe(t.externalSessionId):void 0,fallbackEnabled:pi(t.fallbackEnabled)})}(i.theoLive),null!=(e=i).uplynk||(e.uplynk=i.verizonMedia),i}function ek(t){return{bt:t.bt,yR:t.yR,ct:t.ct,kR:t.kR,lt:t.lt,RR:t.RR,FR:t.FR,ZR:t.ZR,zR:t.zR,tI:t.tI,nI:t.nI,hI:t.hI,cI:t.cI,dI:t.dI}}function ik(t,e){const i=e.dI,s=e.FR;t.dI=i,t.FR=s}function Kc(t,e,i){if(e===i)return;const s=e.bt!==i.bt,n=e.yR,r=e.ct,o=e.FR,h=e.ZR,a=e.zR,u=e.tI,c=e.nI,l=(e.cI,e.hI,e.dI),d=i.yR,f=i.ct,_=i.kR,v=i.RR,m=i.FR,g=i.ZR,p=i.zR,w=i.tI,y=i.nI,b=(i.cI,i.hI,i.dI);(s||u>gs.jB&&w===gs.jB)&&t.yo(new Ks(d,w)),g&&!h?t.yo(new vl(d)):!g&&h&&t.yo(new Xt(d)),w>=gs.Xn&&(s||u<gs.Xn)&&t.yo(new YT(d,w)),f===r||S(f)&&S(r)||t.yo(new re(f)),p!==a&&t.yo(new Nu(d,p)),d!==n&&t.yo(new I(d,void 0)),_&&t.yo(new Fs(d)),w>=gs.QB&&(s||u<gs.QB)&&t.yo(new KT(d,w)),y&&!c?t.yo(new _t(d)):!y&&c&&t.yo(new ga(d)),b===l&&m===o||t.yo(new eh(d,b)),w>=gs.JB&&(s||u<gs.JB)&&t.yo(new ro(d,w)),w>=gs.$B&&(s||u<gs.$B)&&t.yo(new jT(d,w)),w!==u&&t.yo(new au(d,w)),v&&t.yo(new Wa(v))}function sk(t){switch(t){case Bu.INLINE:case Bu.FULLSCREEN:case Bu.PICTURE_IN_PICTURE:case Bu.NATIVE_PICTURE_IN_PICTURE:return t;default:return}}r();var nk=class extends pe{constructor(t){super(Mi.yy),this.currentSource=t}};r();var Li=class extends pe{constructor(){super(Mi.Ry)}};r();var rk=class extends pe{constructor(){super(Mi.Cy)}};r(),r(),r();var Me=function(t){return t.tO="enterpictureinpicture",t.eO="exitpictureinpicture",t.ua="pictureinpictureerror",t}({}),ok=class extends pe{constructor(){super(Me.tO)}};r();var hk=class extends pe{constructor(){super(Me.eO)}},Oh=class extends Bo{get cC(){return this.lC}set cC(t){if(t===this.lC)return;this.dC(this.lC);const e=this.lC.iO;this.lC=t,this._C(t),!e&&this.lC.iO?this.yo(new ok):e&&!this.lC.iO&&this.yo(new hk)}_C(t){t.yn(Me.tO,this.Ds),t.yn(Me.eO,this.Ds),t.yn(Me.ua,this.Ds)}dC(t){t.fn(Me.tO,this.Ds),t.fn(Me.eO,this.Ds),t.fn(Me.ua,this.Ds)}get sO(){return this.lC.sO}get iO(){return this.lC.iO}co(){return this.lC.co()}bo(){return this.lC.bo()}gn(t){this.Bo(),this.dC(this.lC),t||this.lC.gn()}constructor(t){super(),this.lC=t,this._C(this.lC)}},ak=class extends Fc{_a(){return this.nO}lR(){return this.rO}get PR(){return this.DR()}DR(){return this.oO}oI(){return this.Ul}uI(){return this.hO}aO(t){const e=this.dR;if(e===t)return;e.oy(this.NI);const i=ek(this),s=this.wR(),n=this.pI(),r=this.wI();this.dR=t,this.rO.cC=t.ht,this.hO.cC=t.rt,this.Ul.cC=t.nt,this.nO.cC=t._a(),this.oO.cC=t.PR,void 0!==i&&Kc(this,i,this);const o=this.wR();o!==s&&this.yo(new nk(o)),this.pI()!==n&&this.yo(new Li),this.wI()!==r&&this.yo(new rk),t.Jw(this.NI)}async gn(){await super.gn(),this.nO.gn(),this.rO.gn(),this.hO.gn(),this.Ul.gn(),this.oO.gn()}constructor(t){super(t),this.rO=new Xh,this.hO=new Xh,this.Ul=new ut,this.oO=new Dc,this.nO=new Oh(t._a()),this.rO.cC=t.ht,this.hO.cC=t.rt,this.Ul.cC=t.nt,this.oO.cC=t.PR}};r();var uk=class extends ak{OR(){return function(t){let e=0,i=0,s=0,n=0,r=0,o=0,h=0;for(const a of t)e+=a.uO,i+=a.cO,s+=a.lO,n+=a.dO,r+=a.fO,o+=a._O.amountOfBufferedAudioSegments,h+=a._O.amountOfBufferedVideoSegments;return{uO:e,cO:i,lO:s,dO:n,fO:r,_O:{amountOfBufferedAudioSegments:o,amountOfBufferedVideoSegments:h}}}(this.vO.map((t=>t.LR)))}SI(){return Us(this.vO.map((t=>t.SI()))).then(Bt)}tr(){return Us(this.vO.map((t=>t.tr()))).then(Bt)}yI(){if(!this.do){for(const t of this.vO)t.yI();this.do=!0}}fR(){const t=[];for(const e of this.vO)t.push(...e.fR());return t}II(t){let e=!1;for(const i of this.vO)e=i.II(t)||e;return e}yo(t){this.II(t)||super.yo(t)}get cC(){return this.dR}set cC(t){this.aO(t)}mO(t){this.vO.push(t)}gO(t){we(this.vO,t)}aO(t){if(t===this.dR)return;const e=this.dR;e.ar(),super.aO(t),t.ur(e)}xI(){for(const t of this.vO)t.xI()}async gn(){this.Bo(),this.dR.ar();for(const t of this.vO)this.dR!==t&&await t.gn();await super.gn()}constructor(t){super(t),this.vO=[],this.do=!1,this.pO=!1,this.mO(t)}};r();var ck=function(t){return t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR",t}({}),lk=class extends tg{get name(){return"MediaError"}constructor(t,e,i,s){super(e),this.code=t,this.message=null!=e?e:"Unknown error",this.cause=i,this.systemCode=s,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}};function dk(t){XA(t,"MEDIA_ERR_ABORTED",1),XA(t,"MEDIA_ERR_NETWORK",2),XA(t,"MEDIA_ERR_DECODE",3),XA(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),XA(t,"MEDIA_ERR_ENCRYPTED",5)}function Te(t){var e,i;return function(t){return t.category===Ye.CONTENT_PROTECTION}(t)?new lk(5,t.message,null==(e=t.cause)?void 0:e.message,t.systemCode):new lk(fk(t.code),t.message,null==(i=t.cause)?void 0:i.message)}function fk(t){if(t===Ja.MEDIA_ABORTED)return 1;if(t===Ja.MANIFEST_LOAD_ERROR||t===Ja.MEDIA_LOAD_ERROR||t===Ja.SUBTITLE_LOAD_ERROR)return 2;if(t===Ja.MEDIA_DECODE_ERROR)return 3;if(t===Ja.MEDIA_NOT_SUPPORTED)return 4;const e=Ye.fromCode(t);return e===Ye.NETWORK?2:e===Ye.SOURCE?4:e===Ye.LICENSE?6:e===Ye.CONTENT_PROTECTION?5:e===Ye.AD?7:3}function _k(t){return new A(vk(t.code),t.message,t)}function vk(t){switch(t){case 1:return Ja.MEDIA_ABORTED;case 2:return Ja.NETWORK_ERROR;case 3:return Ja.MEDIA_DECODE_ERROR;case 4:return Ja.SOURCE_NOT_SUPPORTED;case 5:return Ja.CONTENT_PROTECTION_ERROR;case 6:return Ja.LICENSE_ERROR;case 7:return Ja.AD_ERROR}}dk(lk),dk(lk.prototype),r(),r(),r(),r(),r();var Nn=class extends Zh{tt(t){return super.tt(t)}ma(){return rS(this)}};r(),r(),r(),r();var Oc=class{get oC(){return this.wO}get V(){return this.wO.length}get ga(){return this.Za||(this.Za=function(t){const e=t.oC.map((t=>t.ga));return e.item=e=>{const i=0|e,s=t.aC(i);return s&&s.ga||void 0},e}(this)),this.Za}yO(t){this.wO.push(t),this.Za&&this.Za.push(t.ga)}jS(t){we(this.wO,t),this.Za&&we(this.Za,t.ga)}aC(t){return this.wO[t]}bO(t){return rl(t)?function(t,e){for(const i of e)if(!qt(t,i))return!1;return!0}(this.wO,t):qt(this.wO,t)}tr(){Pn(this.wO),this.Za&&Pn(this.Za)}constructor(){this.wO=[],this.Za=void 0}};r();var Qu=class extends er{ma(){return new mk(this.Ht.ga)}constructor(t){super(Eo.eC),this.Ht=t}},mk=class extends nr{constructor(t){super("update"),this.track=t}};r();var gk=0;function ai(){return gk++}var pk=0;var wk=0;function yk(){return wk++}var bk=0;function Ak(){return bk++}var Sk=0;var Tk=class extends Bo{get SC(){}get Rt(){return this.He}set Rt(t){this.He!==t&&(this.He=t,this.AO=t,this.yo(new Bc(this)))}get AO(){return this.SO.enabled}set AO(t){this.SO.enabled=t}get ga(){return this.Za||(this.Za=bi(this)),this.Za}get o(){return this.US}get TC(){return this.TO}get Lt(){return this.SO.kind}get kh(){return this.kO}set kh(t){t!==this.kO&&(this.kO=t,this.yo(new Qu(this)))}get gs(){return this.SO.language}get TE(){return this.Rt?"enabled":"disabled"}get EO(){return this.SO}get EC(){return this.wO}get xC(){}set xC(t){}xO(t){this.Rt=t}RO(){this.Rt=this.AO}constructor(t){super(),this.pw=Io.cE,this.He=!1,this.Za=void 0,this.SO=t,this.TO=ai(),this.US=Sk+++"",this.kO=t.label,this.wO=new Oc,this.RO()}};r();var kk=0;var Ek=class extends Bo{get SC(){}get Rt(){return this.He}set Rt(t){this.He!==t&&(this.He=t,this.AO=t,this.yo(new Bc(this)))}get AO(){return!!this.SO.selected}set AO(t){this.SO.selected=t}get ga(){return this.Za||(this.Za=bi(this)),this.Za}get o(){return this.US}get TC(){return this.TO}get Lt(){return"main"}get kh(){return this.kO}set kh(t){t!==this.kO&&(this.kO=t,this.yo(new Qu(this)))}get gs(){return this.SO.language}get TE(){return this.Rt?"enabled":"disabled"}get EO(){return this.SO}get EC(){return this.wO}get xC(){}set xC(t){}RO(){this.Rt=this.AO}xO(t){this.Rt=t}constructor(t){super(),this.pw=Io.lE,this.He=!1,this.Za=void 0,this.SO=t,this.TO=ai(),this.US=kk+++"",this.wO=new Oc,this.kO=t.label,this.RO()}};r();var xk=class extends pe{constructor(t){super(Mi.ly),this.NR=t}};r(),r();var nc=function(t){return t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR",t}({});r(),r();var Rk=function(t){return t.IO="cue",t.CO="region",t.PO="stylesheet",t}({});r(),r();var Ik={"line-left":"start",center:"middle","line-right":"end"},Ck={start:"line-left",middle:"center",end:"line-right"};function Pk(t,e){if("auto"===t)switch(e){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function Dk(t,e){if("auto"===t)switch(e){case"left":return 0;case"right":return 100;default:return 50}return function(t,e){const i="number"==typeof t?t:C(t);return S(i)?e:i}(t,50)}r(),r(),r();var gi=function(t){return t.tO="co",t.eO="bo",t.eC="Yn",t}({}),ll=class extends er{constructor(t,e){super(t),this.DO=e}},Yc=class extends nr{constructor(t,e){super(t),this.cue=e}};function Ht(t){const e=[gi.tO,gi.eO,gi.eC];let i;const s={get MO(){return t},get track(){return t.Ht.ga},get id(){return t.o},get uid(){return t.TC},get startTime(){return t.LO},set startTime(e){t.LO=e},get endTime(){return t.BO},set endTime(e){t.BO=e},get content(){return t.U},addEventListener(t,e){const s=$A(t,xe);i.yn(s,e)},removeEventListener(t,e){const s=$A(t,xe);i.fn(s,e)}};return i=new og(s),t.yn(e,(t=>i.yo(t.ga))),s}function Nk(){}function Mk(t){return nh(Ht(t),{get align(){return t.OO},get line(){return t.FO},get lineAlign(){return t.VO},get position(){return t.uo},get positionAlign(){return t.WO},get region(){return t.UO?t.UO.ga:null},get size(){return t.Rb},get snapToLines(){return t.GO},get text(){return t.U},get vertical(){return t.Pt}})}r(),r();var yl=class extends ll{ma(){return new Lk(this.DO.ga)}constructor(t){super(gi.eC,t)}},Lk=class extends Yc{constructor(t){super("update",t)}};r();var bl=class extends er{ma(){return new Bk(this.DO.ga)}constructor(t){super(Eo.GI),this.DO=t}},Bk=class extends nr{constructor(t){super("updatecue"),this.cue=t}},Ok=.02;function Fk(t,e){return Cs(t.HO,e.HO,Ok)&&Cs(t.ZO,e.ZO,Ok)&&t.o===e.o}var Le=class extends Bo{get LO(){return this.XO}set LO(t){var e,i;this.XO!==t&&(this.XO=t,null==(e=this.zO)||e.qO(this),this.yo(new yl(this)),null==(i=this.zO)||i.yo(new bl(this)))}get BO(){return this.YO}set BO(t){var e,i;this.YO!==t&&(this.YO=t,null==(e=this.zO)||e.qO(this),this.yo(new yl(this)),null==(i=this.zO)||i.yo(new bl(this)))}get o(){return this.US}get TC(){return this.TO}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return Ht(this)}get Yh(){return this.Kh}set Yh(t){this.Kh=t}get Ht(){return this.zO}set Ht(t){this.zO=t}get U(){return this.KO}set U(t){var e;this.KO!==t&&(this.KO=t,this.yo(new yl(this)),null==(e=this.zO)||e.yo(new bl(this)))}get jO(){return this.QO}set jO(t){this.QO=t}JO(t){return this===t||YA(this,t)&&Fk(this,t)&&this.$O(t)}$O(t){return Pi(this.U,t.U)}tF(t,e){this.XO=t,this.YO=e,this.HO=t,this.ZO=e}gn(){this.Bo()}constructor(t,e,i,s,n){super(),this.Za=void 0,this.zO=void 0,this.Kh=!1,this.eF=-1,this.TO=Ak(),this.XO=t,this.YO=e,this.HO=t,this.ZO=e,this.KO=i,this.QO=Boolean(s),this.US=null!=n?n:""}};function Vk(t,e){return t.U===e.U&&t.FO===e.FO&&t.VO===e.VO&&t.uo===e.uo&&t.WO===e.WO&&t.UO===e.UO&&t.GO===e.GO&&t.Rb===e.Rb&&t.OO===e.OO&&t.Pt===e.Pt}var Vi=class extends Le{get ga(){return this.Za||(this.Za=Mk(this)),this.Za}get pw(){return Rk.IO}$O(t){return Vk(this,t)}constructor(t,e,i,s,n){super(t,e,i,s,n),this.FO="auto",this.VO="start",this.uo="auto",this.WO="auto",this.UO=void 0,this.GO=!0,this.Rb=100,this.OO="center",this.Pt=""}};function Wk(t){const e=t.FO,i=Ad(e);return i&&!t.GO&&(e<0||e>100)?100:i?Number(e):t.GO?-1:100}function Uk(t){return Dk(t.uo,t.OO)}function Gk(t){return Pk(t.WO,t.OO)}function Hk(t){const e=Gk(t),i=Uk(t);let s;switch(e){case"line-left":s=100-i;break;case"line-right":s=i;break;case"center":s=i<=50?2*i:2*(100-i)}return _.min(t.Rb,s)}function Zk(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.iF},get regionAnchorX(){return t.sF},get regionAnchorY(){return t.nF},get scrollValue(){return t.rF},get viewportAnchorX(){return t.oF},get viewportAnchorY(){return t.hF},get width(){return t.ji}}}r(),r();var Xk=class{get ga(){return this.Za||(this.Za=Zk(this)),this.Za}get pw(){return Rk.CO}constructor(t,e,i,s,n,r,o,h){this.o=t,this.ji=e,this.iF=i,this.sF=s,this.nF=n,this.oF=r,this.hF=o,this.rF=h}};r(),r();var wo=1e6,zk=class{aF(t){return this.uF()*t}cF(t){return this.lF(t)>0}dF(t){return this.lF(t)>=0}fF(t,e){return this.vF(t)._F(e)}JO(t){return 0===this.lF(t)}mF(t){return this.lF(t)<0}_F(t){return this.lF(t)<=0}gF(){return this.pF()?this.wF():this}yF(t){return this.yO(t.wF())}vF(t){return this.yF(t).gF()}};function qk(t,e){return t.bF()?e.bF()?Qc.Zr:Qc.Pw:e.bF()?Qc.Dw:t.AF()?e.AF()&&t.pF()===e.pF()?Qc.Zr:t.pF()?Qc.Dw:Qc.Pw:e.pF()?Qc.Pw:Qc.Dw}r(),r();var Yk=4294967296,Kk=Yk*Yk,jk=Kk*Kk,Qk=jk/2,en=class t{static SF(e,i,s){return s?new t(e.toUnsigned(),i.toUnsigned()):new t(e.toSigned(),i.toSigned())}static TF(e){return e.unsigned?new t(e,fo.UZERO):new t(e,e.isNegative()?fo.NEG_ONE:fo.ZERO)}static kF(e,i){if(S(e))return i?t.EF:t.xF;if(i){if(e<0)return t.EF;if(e>=jk)return t.RF}else{if(e<=-Qk)return t.IF;if(e+1>=Qk)return t.CF}return e<0?t.kF(-e,i).wF():t.SF(fo.fromNumber(e%Kk),fo.fromNumber(e/Kk),i)}PF(){return this.DF.unsigned}NF(){return this.MF.isZero()&&this.DF.isZero()}pF(){return this.DF.isNegative()}LF(){return this.PF()?t.SF(this.MF,this.DF,!1):this}BF(){return this.PF()?this:t.SF(this.MF,this.DF,!0)}OF(){return this.MF}uF(){return this.pF()?-this.wF().uF():this.DF.toNumber()*Kk+this.MF.toUnsigned().toNumber()}FF(){return this.MF.toInt()}JO(t){return(this.PF()===t.PF()||this.DF.getHighBits()>>>31!=1||t.DF.getHighBits()>>>31!=1)&&(this.DF.toUnsigned().eq(t.DF.toUnsigned())&&this.MF.toUnsigned().eq(t.MF.toUnsigned()))}lF(t){if(this.JO(t))return Qc.Zr;const e=this.pF(),i=t.pF();if(e&&!i)return Qc.Dw;if(!e&&i)return Qc.Pw;if(!this.PF())return this.yF(t).pF()?Qc.Dw:Qc.Pw;const s=this.BF(),n=t.BF(),r=n.DF.comp(s.DF);return r>0||0===r&&n.MF.gt(s.MF)?Qc.Dw:Qc.Pw}mF(t){return this.lF(t)<0}_F(t){return this.lF(t)<=0}VF(t){return this.lF(t)>0}WF(t){return this.lF(t)>=0}UF(){return new t(this.MF.not(),this.DF.not())}GF(e){return new t(this.MF.and(e.MF),this.DF.and(e.DF))}HF(e){return new t(this.MF.or(e.MF),this.DF.or(e.DF))}ZF(e){const i=127&e;return 0===i?this:i<64?t.SF(this.MF.shl(i),this.DF.shl(i).or(this.MF.shru(64-i)),this.PF()):t.SF(fo.ZERO,this.MF.shl(i-64),this.PF())}XF(e){const i=127&e;return 0===i?this:i<64?t.SF(this.MF.shru(i).or(this.DF.shl(64-i)),this.DF.shr(i),this.PF()):t.SF(this.DF.shr(i-64),this.DF.isNegative()?fo.NEG_ONE:fo.ZERO,this.PF())}zF(e){const i=127&e;return 0===i?this:i<64?t.SF(this.MF.shru(i).or(this.DF.shl(64-i)),this.DF.shru(i),this.PF()):64===i?t.SF(this.DF,fo.ZERO,this.PF()):t.SF(this.DF.shru(i-64),fo.ZERO,this.PF())}yO(e){const i=this.DF.high>>>16,s=65535&this.DF.high,n=this.DF.low>>>16,r=65535&this.DF.low,o=this.MF.high>>>16,h=65535&this.MF.high,a=this.MF.low>>>16,u=65535&this.MF.low,c=e.DF.high>>>16,l=65535&e.DF.high,d=e.DF.low>>>16,f=65535&e.DF.low,_=e.MF.high>>>16,v=65535&e.MF.high,m=e.MF.low>>>16;let g=0,p=0,w=0,y=0,b=0,A=0,S=0,T=0;T+=u+(65535&e.MF.low),S+=T>>>16,T&=65535,S+=a+m,A+=S>>>16,S&=65535,A+=h+v,b+=A>>>16,A&=65535,b+=o+_,y+=b>>>16,b&=65535,y+=r+f,w+=y>>>16,y&=65535,w+=n+d,p+=w>>>16,w&=65535,p+=s+l,g+=p>>>16,p&=65535,g+=i+c,g&=65535;const k=this.PF(),E=fo.fromBits(w<<16|y,g<<16|p,k),x=fo.fromBits(S<<16|T,b<<16|A,k);return t.SF(x,E,k)}yF(t){return this.yO(t.wF())}wF(){return this.UF().yO(t.qF)}YF(e){if(this.NF()||e.NF())return this.PF()?t.EF:t.xF;if(this.pF())return e.pF()?this.wF().YF(e.wF()):this.wF().YF(e).wF();if(e.pF())return this.YF(e.wF()).wF();if(this.DF.isZero()&&0===this.MF.high&&e.DF.isZero()&&0===e.MF.high)return t.TF(this.MF.multiply(e.MF));const i=fo.fromBits(4294967295,0,!0),s=this.MF.and(i),n=this.MF.shru(32),r=this.DF.and(i),o=this.DF.shru(32),h=e.MF.and(i),a=e.MF.shru(32),u=e.DF.and(i),c=e.DF.shru(32);let l=fo.UZERO,d=fo.UZERO,f=fo.UZERO,_=fo.UZERO;l=l.add(s.mul(h)),d=d.add(l.shru(32)),l=l.and(i),d=d.add(n.mul(h)),f=f.add(d.shru(32)),d=d.and(i),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(i),f=f.add(r.mul(h)),_=_.add(f.shru(32)),f=f.and(i),f=f.add(n.mul(a)),_=_.add(f.shru(32)),f=f.and(i),f=f.add(s.mul(u)),_=_.add(f.shru(32)),f=f.and(i),_=_.add(o.mul(h)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(i);const v=fo.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),m=fo.fromBits(f.getLowBitsUnsigned(),_.getLowBitsUnsigned(),!0);return t.SF(v,m,this.PF())}KF(e){let i,s,n=e;if(n.NF())throw new RangeError("division by zero");if(this.NF())return this.PF()?[t.EF,t.EF]:[t.xF,t.xF];if(this.PF()){if(n.PF()||(n=n.BF()),n.VF(this))return[t.EF,this];if(n.VF(this.zF(1)))return s=t.jF,i=this.yF(n),[s,i];s=t.EF}else{if(this.JO(t.IF)){if(n.JO(t.qF)||n.JO(t.QF))return[t.IF,t.xF];if(n.JO(t.IF))return[t.qF,t.xF];{const e=this.XF(1).JF(n).ZF(1);return e.JO(t.xF)?s=n.pF()?t.qF:t.QF:(i=this.yF(n.YF(e)),s=e.yO(i.JF(n))),i=this.yF(n.YF(s)),[s,i]}}if(n.JO(t.IF))return this.PF()?[t.EF,this]:[t.xF,this];if(this.pF())return n.pF()?this.wF().KF(n.wF()):([s,i]=this.wF().KF(n),[s.wF(),i.wF()]);if(n.pF())return[s,i]=this.KF(n.wF()),[s.wF(),i.wF()];s=t.xF}for(i=this;i.WF(n);){let e=_.max(1,_.floor(i.uF()/n.uF()));const r=_.ceil(_.log(e)/_.LN2),o=r<=48?1:2**(r-48);let h=t.kF(e),a=h.YF(n);for(;a.pF()||a.VF(i);)e-=o,h=t.kF(e,this.PF()),a=h.YF(n);h.NF()&&(h=t.qF),s=s.yO(h),i=i.yF(a)}return[s,i]}JF(t){return this.KF(t)[0]}tV(t){return this.KF(t)[1]}toString(e){const i=e||10;if(i<2||i>36)throw new RangeError("radix");if(this.NF())return"0";if(this.pF()){if(this.JO(t.IF)){const e=t.kF(i),s=this.JF(e),n=s.YF(e).yF(this);return s.toString(i)+n.FF().toString(i)}return"-"+this.wF().toString(i)}const s=t.kF(i**6,this.PF());let n=this,r="";for(;;){const t=n.JF(s);let e=(n.yF(t.YF(s)).FF()>>>0).toString(i);if(n=t,n.NF())return e+r;for(;e.length<6;)e="0"+e;r=String(e)+r}}constructor(t,e){this.MF=t,this.DF=e}};en.xF=en.TF(fo.ZERO),en.EF=en.TF(fo.UZERO),en.qF=en.TF(fo.ONE),en.jF=en.TF(fo.UONE),en.QF=en.TF(fo.NEG_ONE),en.CF=en.SF(fo.NEG_ONE,fo.MAX_VALUE,!1),en.RF=en.SF(fo.MAX_UNSIGNED_VALUE,fo.MAX_UNSIGNED_VALUE,!0),en.IF=en.SF(fo.ZERO,fo.MIN_VALUE,!1),r();var Fn=class t{get AF(){return!isFinite(this.eV)}get sd(){return this.eV/this.lN}static iV(e){return new t(_.ceil(e.eV),e.lN)}static sV(e){return new t(_.floor(e.eV),e.lN)}static nV(t,e){return t.dF(e)?t:e}static rV(t,e){return t._F(e)?t:e}yO(e){return this.lN>=e.lN?new t(this.eV+e.oV(this.lN).eV,this.lN):new t(this.oV(e.lN).eV+e.eV,e.lN)}cF(t){return t.mF(this)}dF(t){return t._F(this)}vF(e){if(this.lN>=e.lN){const i=_.abs(this.eV-e.oV(this.lN).eV),s=this.lN;return new t(i,s)}return e.vF(this)}fF(t,e){return this.vF(t)._F(e)}lF(t){return function(t,e){return t.lN>=e.lN?Vm(t.eV,e.oV(t.lN).eV):Vm(t.oV(e.lN).eV,e.eV)}(this,t)}JO(t){return 0===this.lF(t)}mF(t){return this.lF(t)<0}_F(t){return this.lF(t)<=0}oV(e){return new t(this.eV*(e/this.lN),e)}yF(e){return this.lN>=e.lN?new t(this.eV-e.oV(this.lN).eV,this.lN):new t(this.oV(e.lN).eV-e.eV,e.lN)}hV(e){return new t(this.eV*e,this.lN)}constructor(t,e=1){this.eV=t,this.lN=e}};Fn.ed=new Fn(1/6,1),Fn.xF=new Fn(0),Fn.aV=new Fn(1/0),Fn.uV=1e6;var Q=class t extends zk{static cV(e,i){return void 0===i&&(i=wo),t.kF(e*i,i)}static kF(e,i){return S(e)?t.lV:e===1/0?t.dV:e===-1/0?t.fV:new t(fo.fromNumber(e),i)}static TF(e,i){return new t(e,i)}static _V(e){return t.cV(e.sd,wo)}static vV(e){return new t(fo.fromNumber(e.getTime()),1e3)}static nV(t,e){return t.dF(e)?t:e}static rV(t,e){return t._F(e)?t:e}static mV(e,i,s){return t.nV(i,t.rV(s,e))}pF(){return this.Ix.isNegative()}NF(){return 0!==this.lN&&this.Ix.isZero()}AF(){return 0===this.lN&&!this.Ix.isZero()}bF(){return 0===this.lN&&this.Ix.isZero()}uF(){if(0===this.lN)return this.Ix.isZero()?NaN:this.Ix.isNegative()?-1/0:1/0;const t=this.Ix.divide(this.lN),e=this.Ix.subtract(t.multiply(this.lN));return t.toNumber()+e.toNumber()/this.lN}OF(){if(0===this.lN)throw new g("Failed to convert timestamp");return this.Ix}gV(){return new Date(0===this.lN?NaN:this.oV(1e3).Ix.toNumber())}pV(){return new Fn(0===this.lN?this.uF():this.Ix.toNumber(),this.lN)}oV(e,i){void 0===i&&(i=nt.wV);const s=this.lN;if(s===e)return this;if(0===s)return this;const n=_f(s,e),r=function(t,e,i){const[s,n]=t.KF(e);if(n.NF())return s;if(i===nt.wV)return n.pF()?s.yF(en.qF):s;if(i===nt.yV)return n.pF()?s:s.yO(en.qF);{const t=n.YF(en.kF(2));return t.pF()?t.wF().mF(e)?s:s.yF(en.qF):t.mF(e)?s:s.yO(en.qF)}}(en.TF(this.Ix).YF(en.kF(e/n)),en.kF(s/n),i);return new t(r.OF(),e)}lF(t){if(this===t)return Qc.Zr;if(0===this.lN||0===t.lN)return qk(this,t);if(this.NF())return t.NF()?Qc.Zr:t.pF()?Qc.Pw:Qc.Dw;if(t.NF())return this.pF()?Qc.Dw:Qc.Pw;const e=_.min(this.lN,t.lN),i=this.oV(e,nt.bV).Ix,s=t.oV(e,nt.bV).Ix;return i.compare(s)}wF(){return 0===this.lN?function(t){0;return t.bF()?t:t.pF()?Q.dV:Q.fV}(this):new t(this.Ix.negate(),this.lN)}yO(e){if(0===this.lN||0===e.lN)return function(t,e){0;if(t.bF()||e.bF())return Q.lV;if(t.AF()&&e.AF())return t.pF()===e.pF()?t:Q.lV;return t.AF()?t:e}(this,e);if(this.NF())return e;if(e.NF())return this;const i=_.max(this.lN,e.lN),s=this.oV(i,nt.bV),n=e.oV(i,nt.bV);return new t(s.Ix.add(n.Ix),i)}YF(e){if(this.bF()||S(e))return t.lV;if(this.AF()||!isFinite(e)){if(this.NF()||0===e)return t.lV;{const i=this.pF()?t.fV:t.dV;return e<0?i.wF():i}}return this.NF()?this:new t(0===e?fo.ZERO:this.Ix.multiply(e),this.lN)}JF(e){if(this.bF()||S(e))return t.lV;if(this.AF())return isFinite(e)?0===e?1/e<0?this.wF():this:e<0?this.wF():this:t.lV;if(!isFinite(e))return new t(fo.ZERO,this.lN);if(this.NF())return 0===e?t.lV:new t(fo.ZERO,this.lN);if(0===e){const i=this.pF()?t.fV:t.dV;return 1/e<0?i.wF():i}return new t(this.Ix.divide(e),this.lN)}AV(){return[this.Ix.low,this.Ix.high,this.lN]}constructor(t,e){super(),this.Ix=t.toSigned(),this.lN=e>>>0}};Q.xF=new Q(fo.ZERO,wo),Q.lV=new Q(fo.ZERO,0),Q.dV=new Q(fo.ONE,0),Q.fV=new Q(fo.NEG_ONE,0),r();var Jk=class t extends zk{static cV(e,i){return void 0===i&&(i=wo),t.kF(e*i,i)}static kF(e,i){return S(e)?t.lV:e===1/0?t.dV:e===-1/0?t.fV:new t(BigInt(_.floor(e)),i)}static TF(e,i){return new t(BigInt(e.high)<<BigInt(32)|BigInt(e.low>>>0),i)}static _V(e){return t.cV(e.sd,wo)}static vV(e){return t.kF(e.getTime(),1e3)}static get xF(){return t.SV||(t.SV=new t(BigInt(0),wo)),t.SV}static get lV(){return t.TV||(t.TV=new t(BigInt(0),0)),t.TV}static get dV(){return t.kV||(t.kV=new t(BigInt(1),0)),t.kV}static get fV(){return t.EV||(t.EV=new t(BigInt(-1),0)),t.EV}static nV(t,e){return t.dF(e)?t:e}static rV(t,e){return t._F(e)?t:e}static mV(e,i,s){return t.nV(i,t.rV(s,e))}pF(){return this.Ix<BigInt(0)}NF(){return 0!==this.lN&&this.Ix===BigInt(0)}AF(){return 0===this.lN&&this.Ix!==BigInt(0)}bF(){return 0===this.lN&&this.Ix===BigInt(0)}uF(){if(0===this.lN)return this.Ix===BigInt(0)?NaN:this.Ix<BigInt(0)?-1/0:1/0;const t=this.Ix/BigInt(this.lN),e=this.Ix-t*BigInt(this.lN);return Number(t)+Number(e)/this.lN}OF(){if(0===this.lN)throw new g("Failed to convert timestamp");return this.xV()}xV(){const t=this.Ix&BigInt(4294967295),e=this.Ix>>BigInt(32)&BigInt(4294967295);return fo.fromBits(Number(t),Number(e))}gV(){return new Date(0===this.lN?NaN:Number(this.oV(1e3).Ix))}pV(){return new Fn(0===this.lN?this.uF():Number(this.Ix),this.lN)}oV(e,i){void 0===i&&(i=nt.wV);const s=this.lN;if(s===e)return this;if(0===s)return this;const n=_f(s,e),r=function(t,e,i){const s=t/e,n=t-s*e;if(n===BigInt(0))return s;if(i===nt.wV)return n<BigInt(0)?s-BigInt(1):s;if(i===nt.yV)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<e?s:s-BigInt(1):t<e?s:s+BigInt(1)}}(this.Ix*BigInt(e/n),BigInt(s/n),i);return new t(r,e)}lF(t){if(this===t)return Qc.Zr;if(0===this.lN||0===t.lN)return qk(this,t);if(this.NF())return t.NF()?Qc.Zr:t.pF()?Qc.Pw:Qc.Dw;if(t.NF())return this.pF()?Qc.Dw:Qc.Pw;const e=_.min(this.lN,t.lN),i=this.oV(e,nt.bV).Ix,s=t.oV(e,nt.bV).Ix;return i>s?Qc.Pw:i<s?Qc.Dw:Qc.Zr}wF(){return 0===this.lN?function(t){0;return t.bF()?t:t.pF()?Jk.dV:Jk.fV}(this):new t(-this.Ix,this.lN)}yO(e){if(0===this.lN||0===e.lN)return function(t,e){0;if(t.bF()||e.bF())return Jk.lV;if(t.AF()&&e.AF())return t.pF()===e.pF()?t:Jk.lV;return t.AF()?t:e}(this,e);if(this.NF())return e;if(e.NF())return this;const i=_.max(this.lN,e.lN),s=this.oV(i,nt.bV),n=e.oV(i,nt.bV);return new t(s.Ix+n.Ix,i)}YF(e){if(this.bF()||S(e))return t.lV;if(this.AF()||!isFinite(e)){if(this.NF()||0===e)return t.lV;{const i=this.pF()?t.fV:t.dV;return e<0?i.wF():i}}return this.NF()?this:new t(0===e?BigInt(0):this.Ix*BigInt(e),this.lN)}JF(e){if(this.bF()||S(e))return t.lV;if(this.AF())return isFinite(e)?0===e?1/e<0?this.wF():this:e<0?this.wF():this:t.lV;if(!isFinite(e))return new t(BigInt(0),this.lN);if(this.NF())return 0===e?t.lV:new t(BigInt(0),this.lN);if(0===e){const i=this.pF()?t.fV:t.dV;return 1/e<0?i.wF():i}return new t(this.Ix/BigInt(e),this.lN)}AV(){const t=this.xV();return[t.low,t.high,this.lN]}constructor(t,e){super(),this.Ix=BigInt.asIntN(64,t),this.lN=e>>>0}};Jk.SV=void 0,Jk.TV=void 0,Jk.kV=void 0,Jk.EV=void 0;var nt=function(t){return t[t.wV=0]="wV",t[t.yV=1]="yV",t[t.bV=2]="bV",t}({}),Uh=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?Jk:Q;function $k(t,e){return t.lF(e)}function tE(t,e){return void 0!==t?void 0!==e?Uh.rV(t,e):t:e}r();var eE=9e4,iE=gl((()=>Uh.kF(8589934592,eE))),sE=gl((()=>iE().JF(2)));r();var nE={RV:0,CV:1/0,PV:0},rE=6,oE=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],hE=[" ","\t","\n","\f","\r"],aE=/^\d*$/,uE=/.*[0-9]+.*/,cE=/^[\d.-]+$/,lE=/(^\.|\.$)/,dE=/(\D\.|\.\D)/;function fE(t,e,i){void 0===e&&(e=nE),void 0===i&&(i=!0);return _E(Qg(na(t),new Ui),e,i)}function _E(t,e,i){void 0===e&&(e=nE),void 0===i&&(i=!0);const s={L:[],DV:[],NV:[]},n=vE(t),r=new Ui;if(EE(n),ml(n,(t=>"\n"!==t),r),r.tc>=n.length)return s;if(r.Ab(1),"\n"!==n.charAt(r.tc)){yE(mE(n,r,false,!0,s,e,i),s)}else r.Ab(1);for(ml(n,(t=>"\n"===t),r);r.tc<n.length;){yE(mE(n,r,false,!1,s,e,i),s),ml(n,(t=>"\n"===t),r)}return s}function vE(t){const e=Am(t,"\0"," "),i=Am(e,"\r\n","\n");return Am(i,"\r","\n")}function ml(t,e,i){const s=i.tc;for(;i.tc<t.length&&e(t.charAt(i.tc));)i.Ab(1);return t.substring(s,i.tc)}function mE(t,e,i,s,n,r,o){let h,a=0,u=e.tc,c="",l=!1,d=!1,f=null,_=null,v=null;for(;!l;)if(h=ml(t,(t=>"\n"!==t),e),a++,e.tc>=t.length?l=!0:e.Ab(1),Dh(h,"--\x3e")){if(s||1!==a&&(2!==a||d)){e.Sb(u);break}d=!0,u=e.tc,f=new Vi(0,0,"",!1,c);try{bE(h,n.DV,f,r,o),c=""}catch(t){As.Mp(t),f=null}}else{if(""===h)break;s&&Cl(h,"X-TIMESTAMP-MAP")&&(n.MV=gE(h)),s||2!==a||i||(ch("STYLE",c.replace(/ /g,""))?(_={pw:Rk.PO},c=""):ch("REGION",c.replace(/ /g,""))&&(v=new Xk("",100,3,0,100,0,100,""),c="")),c&&(c+="\n"),c+=h,u=e.tc}if(f)return f.U=c,f;if(_);else if(v)return function(t,e){const i=t.split(/\s/),s=":";for(const t of i)if(0!==t.length&&Dh(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const i=t.indexOf(s),n=t.substring(0,i),r=t.substring(i+1,t.length);switch(n.toUpperCase()){case"ID":FE(r,e);break;case"WIDTH":UE(r,e);break;case"LINES":WE(r,e);break;case"REGIONANCHOR":{const t=OE(r);t&&(e.sF=t[0],e.nF=t[1]);break}case"VIEWPORTANCHOR":{const t=OE(r);t&&(e.oF=t[0],e.hF=t[1]);break}case"SCROLL":VE(r,e)}}}(c,v),v;return null}function gE(t){const e=t.split("=")[1].trim().split(","),i=wE(e[0].trim(),"MPEGTS")?e[0]:e[1],s=wE(e[0].trim(),"LOCAL")?e[0]:e[1];var n;return{LV:pE(Number(i.split(/:(.*)/)[1].trim())||0),lh:Uh.cV(null!=(n=TE(s.split(/:(.*)/)[1].trim(),new Ui))?n:0)}}function pE(t){return Uh.kF(t,eE)}function wE(t,e){return Cl(t,e)}function yE(t,e){t&&function(t){return"cue"===t.pw}(t)?e.L.push(t):t&&function(t){return"region"===t.pw}(t)?e.DV.push(t):t&&function(t){return"stylesheet"===t.pw}(t)&&e.NV.push(t)}function bE(t,e,i,s,n){const r=new Ui;RE(t,r);const o=AE(TE(t,r),s,n);if(RE(t,r),"--\x3e"!==t.substring(r.tc,r.tc+3))throw g("Something went wrong with parsing a WebVTT Cue");r.Ab(3),RE(t,r);const h=AE(TE(t,r),s,n);i.tF(o,h);!function(t,e,i){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&Dh(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),o=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":NE(o,e,i);break;case"VERTICAL":LE(o,e);break;case"D":BE(o,e);break;case"LINE":case"L":PE(o,e);break;case"POSITION":case"T":DE(o,e);break;case"SIZE":case"S":ME(o,e);break;case"ALIGN":case"A":CE(o,e)}}}(t.substring(r.tc,t.length),i,e)}function AE(t,e,i){return i?t+e.RV:t}function SE(t){return/^[0-9]$/.test(t)}function TE(t,e){const i=Am(t,",",".");let s,n,r,o=!1;if(e.tc>=i.length||!SE(i.charAt(e.tc)))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const h=ml(i,SE,e),a=x(h,10);if((h.length>2||a>59)&&(o=!0),e.tc>=i.length||":"!==i.charAt(e.tc))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");e.Ab(1);const u=ml(i,SE,e);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const c=x(u,10);if(o||e.tc<i.length&&":"===i.charAt(e.tc)){if(e.tc>=i.length||":"!==i.charAt(e.tc))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");e.Ab(1);const t=ml(i,SE,e);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=x(t,10)}else s=0,n=a,r=c;if(e.tc>=i.length||"."!==i.charAt(e.tc))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");e.Ab(1);const l=ml(i,SE,e),d=x(l,10);if(c>59||r>59)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function kE(t){return EE(vE(t))}function EE(t){if(t.length<rE)return!1;for(const e of oE)if(Cl(t,e))return!0;return!1}function xE(t){return qt(hE,t)}function RE(t,e){for(;e.tc<t.length&&xE(t.charAt(e.tc));)e.Ab(1)}function IE(t){const e=t.lastIndexOf("%");if(e>-1){const i=C(t.substring(0,e));if(!S(i)&&i>=0&&i<=100)return i}return null}function CE(t,e){const i=t.toLowerCase();switch(i){case"start":case"center":case"end":case"left":case"right":e.OO=i;break;case"middle":e.OO="center"}}function PE(t,e){let i,s;const n=t.indexOf(",");if(n>=0?(i=t.substring(0,n),s=t.substring(n+1,t.length)):(i=t,s=""),!uE.test(i))return;let r,o;if(Sm(i,"%")){const t=IE(i);if(null===t)return;r=t,o=!1}else{if(!cE.test(i)||i.lastIndexOf("-")>0)return;const t=i.indexOf(".");if(t>=0&&(t!==i.lastIndexOf(".")||!dE.test(i)||lE.test(i)))return;if(r=C(i),S(r))return;o=!0}switch(e.FO=r,e.GO=o,s=s.toLowerCase(),s){case"start":case"center":case"end":e.VO=s;break;case"middle":e.VO="center"}}function DE(t,e){let i,s;const n=t.indexOf(",");n>=0?(i=t.substring(0,n),s=t.substring(n+1,t.length)):(i=t,s="");const r=IE(i);if(null!==r)switch(e.uo=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":e.WO=s;break;case"start":e.WO="line-left";break;case"middle":e.WO="center";break;case"end":e.WO="line-right"}}function NE(t,e,i){const s=Gm(i,(e=>e.o===t));void 0!==s&&(e.UO=s)}function ME(t,e){const i=IE(t);null!==i&&(e.Rb=i)}function LE(t,e){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":e.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":e.Pt="lr";break;default:e.Pt=""}}function BE(t,e){"VERTICAL"===t.toUpperCase()?e.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(e.Pt="lr")}function OE(t){if(t.indexOf(",")>=0){const e=IE(t.substring(0,t.indexOf(","))),i=IE(t.substring(t.indexOf(",")+1,t.length));return[Zs(e||0,0,100),Zs(i||100,0,100)]}return null}function FE(t,e){e.o=t}function VE(t,e){"up"===t.toLowerCase()&&(e.rF="up")}function WE(t,e){aE.test(t)&&(e.iF=x(t))}function UE(t,e){const i=IE(t);null!==i&&(e.ji=i)}function GE(t){return t&&"Fx"in t?t.Fx:t}r(),r(),r();var HE=class extends Le{get BV(){return this.OV}get FV(){return this.VV}get DV(){return this.WV}get GV(){return this.HV}get ga(){return this.Za||(this.Za=function(t){return nh(Ht(t),{get extent(){return t.BV},get styles(){return t.FV},get regions(){return t.DV},get metadata(){return GE(t.GV)},get content(){return GE(t.U)}})}(this)),this.Za}$O(t){return!!Pi(this.BV,t.BV)&&(!!Pi(this.FV,t.FV)&&(!!Pi(this.DV,t.DV)&&(this.GV&&t.GV?!!this.GV.Cx(t.GV)&&(this.U&&t.U?this.U.Cx(t.U):this.U===t.U):this.GV===t.GV)))}constructor(t,e,i,s,n,r,o,h){super(t,e,i,s),this.OV=n,this.VV=r,this.WV=o,this.HV=h||void 0}};r();var ZE=class{get ZV(){return this.If.Px(!0)}get LO(){return this.XV}get BO(){return this.zV}constructor(t,e,i){this.XV=t,this.zV=e,Rh(i)?this.If=function(t,e,i){for(const t of["begin","end","dur"])i.Zx(t);return i}(0,0,i):this.If=i}};r();var XE="http://www.w3.org/XML/1998/namespace";function zE(t,e,i,s){let n=t.Ox(i,e);return 0===n.length&&(n=t.Lx(s+":"+e)),n}function qE(t){const e={};for(const i of t.Wx)e[i.kx]=i.Ix;return e}var YE=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,KE=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,jE="http://www.w3.org/ns/ttml";function QE(t,e,i,s){void 0===i&&(i=nE),void 0===s&&(s=Ry.APPLICATION_TTML_XML);let n=[];const r=na(t);return s===Ry.APPLICATION_MP4?n=function(t,e,i){const s=jo.qD(t),n=dn(s,Mt.aD);if(!n)return[];return tx(na(n.Zk),e,i)}(r,e,i):s===Ry.APPLICATION_TTML_XML&&(n=tx(r,e,i)),n}function JE(t,e,i){return void 0===i&&(i=nE),ex(t,e,i)}function $E(t,e){const i=ax(e.ZV),s={};for(const e of i)s[e]=t[e];return s}function tx(t,e,i){return ex(Qg(t,new Ui),e,i)}function ex(t,e,i){const s=[];let n;try{n=As.Tx(t)}catch(t){return s}const r=n.Yx;if("tt"!==r.kx)return s;const o=r.Ox(jE,"head")[0],h=r.Ox(jE,"body")[0];if(!h||!o)return s;const a=sx(r.Gx("tts:extent")),u=a?{width:a[0],height:a[1]}:void 0,c=function(t){const e={},i=t.Ox(jE,"styling")[0],s=i&&i.Ox(jE,"style")||[];for(const t of s){e[t.Hx(XE,"id")]=qE(t)}return e}(o),l=function(t){const e={},i=t.Ox(jE,"layout")[0],s=i&&i.Ox(jE,"region")||[];for(const t of s){const i=t.Hx(XE,"id");if(!i)continue;e[i]=qE(t);const s=hx(t);for(const t in s)Ba.call(s,t)&&(e[i][t]=s[t])}return e}(o),d=a?function(t,e){const i=eu(t);for(const t of w.keys(i)){const s=sx(i[t].extent);if(s){const n=ix(s[0],e[0]),r=ix(s[1],e[1]);i[t].extent=n+" "+r}const n=sx(i[t].origin);if(n){const s=ix(n[0],e[0]),r=ix(n[1],e[1]);i[t].origin=s+" "+r}}return i}(l,a):l,f=o.Ox(jE,"metadata")[0],_=nx(h,i.RV,i.CV,i.PV);for(const t of _){const e=$E(d,t);s.push(new HE(t.LO,t.BO,t.ZV,!1,u,c,e,f))}return s}function ix(t,e){return t/e*100+"%"}function sx(t){if(!t)return;const e=t.split(" ",2);if(2!==e.length)return;const[i,s]=e;if(!Sm(i,"px")||!Sm(s,"px"))return;return[Number(i.slice(0,-2)),Number(s.slice(0,-2))]}function nx(t,e,i,s){let n,r=e,o=i,h=[];const a=[];if(Rh(t)){var u,c;r=null!=(u=ox(t.Gx("begin"),s))?u:r,n=ox(t.Gx("dur"),0),o=null!=(c=ox(t.Gx("end"),s))?c:void 0!==n?r+n:o;const e=t.Dx;for(let i=0;i<e.length;i++)("body"===t.kx||"div"===t.kx)&&e[i].Sx>1||(h=h.concat(nx(e[i],r,o,s)))}const l=function(t,e,i){const s=[];s.push(t,e);for(const t of i)s.push(t.LO,t.BO);s.sort(su);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(Ko(s,t+1),t--,n=s.length);return s}(r,o,h);for(let e=0;e<l.length-1;e++){const i=rx(l[e],l[e+1],h);if(i.length<=0&&ux(t)){const i=t.Px(!1);a.push(new ZE(l[e],l[e+1],i))}else if(i.length>0){const s=t.Px(!1);i.forEach((t=>s.Vx(t.ZV))),a.push(new ZE(l[e],l[e+1],s))}}return a}function rx(t,e,i){const s=[];for(let n=0;n<i.length;n++){const r=i[n].LO,o=i[n].BO;(r>=t&&o<=e||r<e&&o>=e||r<t&&o>t)&&s.push(i[n])}return s}function ox(t,e){if(t){if(YE.test(t)){const i=YE.exec(t);if(!i)return;const s=Number(i[1])||0,n=Number(i[2])||0,r=Number(i[3])||0,o=i[6];return 3600*s+60*n+r+(o?Number(o)*.1**o.length:0)+e}if(KE.test(t)){const i=KE.exec(t);if(!i)return;const s=Number(i[1]);let n;switch(i[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+e}}}function hx(t){const e={},i=t.Lx("style")||[];for(const t of i){const i=qE(t);for(const t in i)Ba.call(i,t)&&(e[t]=i[t])}return e}function ax(t){let e,i=[];if(Rh(t)){e=t.Gx("region"),e&&i.push(e);const s=t.Dx;for(let t=0;t<s.length;t++)i=i.concat(ax(s[t]))}return i}function ux(t){if(Rh(t)){const e=t.kx.toUpperCase(),i=Boolean(t.Gx("smpte:backgroundImage"));return"BR"===e||i}return t.Sx===Ha.wk}function cx(t){const e=function(t){try{return As.Tx(t).Yx}catch(t){}}(t);return"tt"===(null==e?void 0:e.kx)}r(),r();var ha=class extends Zh{tt(t){return super.tt(t)}it(t){const e=super.it(t);return e&&(t.TE=yh.Ch),e}ma(){return aS(this)}};r(),r();var Hi=function(t){return t.qV="subtitles",t.YV="captions",t.KV="descriptions",t.Fn="chapters",t.jV="metadata",t.QV="thumbnails",t}({}),lx=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function dx(t){return"string"==typeof t&&qt(lx,t)}function fx(t,e){return!(!dx(t)||!dx(e))&&(t===e||"subtitles"===t&&"captions"===e||"captions"===t&&"subtitles"===e)}r();var _x=class extends A{constructor(t,e,i,s,n){super(t,e,n),this.url=i,this.status=s}};function vx(t){return t===Hi.qV||t===Hi.YV}function mx(t){return t.some(gx)}function gx(t){return Dh(t,"stpp")}function px(t){return t.some(wx)}function wx(t){return Dh(t,"vtt")||Dh(t,"wvtt")}function yx(t,e){return Wh(t)&&px(e)}function bx(t,e){return t===Hi.QV||t===Hi.jV&&e===Hi.QV}function Ax(t,e,i,s){for(const n of t.L.oC){if(n.LO>i)break;e<=n.BO&&!qt(s,n)&&s.push(n)}}function Sx(t,e){return Om(t.TC,e.TC)}function Tx(t,e,i,s){const n=function(t){switch(t){case Vr.WEBVTT:return"WebVTT";case Vr.SRT:return"SRT";case Vr.TTML:return"TTML";default:return""}}(t);return new _x(Ja.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",e,i,s)}function ho(t,e){const i=[];for(const s of t.L.oC)if(s.BO<=e)i.push(s);else if(s.LO>=e)break;for(const e of i)t.JV(e)}function kx(t,e){if(t.V>0){const i=t.Cn(0),s=_.max(0,i-10);for(const t of e)t.$V(s)}}var Ex=class extends Bo{tt(t){t.yn(Eo.aa,this.tW),this.Z.tt(t),this.eW(t)}it(t){t.fn(Eo.aa,this.tW),t.TE=yh.Ch,this.Z.it(t)}iW(t){}sW(t){}eW(t){t.TE!==yh.Ch?this.iW(t):this.sW(t)}nW(){for(const t of this.Z.oC)t.fn(Eo.aa,this.tW),t.gn()}$V(t){if(t>0)for(const e of this.Z.oC)ho(e,t)}tr(){return this.nW(),this.Z.tr(),Promise.resolve()}async gn(){this.Bo(),await this.tr(),this.Z.gn()}constructor(...t){super(...t),this.Z=new ha,this.tW=t=>{const e=t.Ht;this.eW(e)}}};r();var xx=class extends $s{get error(){return this.errorObject.message}ma(){return this}constructor(t){super(sn.ua),this.errorObject=t}},Rx=class extends Ex{rW(t){if(!t.src)return;const e=t.kind||Hi.qV,i=this.oW.DI(e,t.id,t.label,t.srclang,t.default);return i.MC=Zi(t.src),this.tt(i),i}async hW(t,e){t.tI=nc.LOADING;const i=new Fe({qu:t.MC,Xk:$r.wk,gE:So.GET,Bw:e});let s,n;try{const t=await this.aW.zk(i);n=t.Hk,s=await t.Tk()}catch(e){return Zr(e),t.tI=nc.ERROR,void t.yo(new xx(function(t,e){let i=e,s=0;if(so(t)&&t.name===Cc.OE)i=t.zk.qu;else if(lA(t)){const e=t.UE;if(i=e.jk,s=e.Hk,0===s)return new _x(Ja.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",i,s,t)}return new _x(Ja.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",i,s,t)}(e,t.MC)))}try{const e=function(t){return kE(t)?Vr.WEBVTT:cx(t)?Vr.TTML:Vr.SRT}(s);t.pw=e;let i=[];if(e===Vr.WEBVTT||e===Vr.SRT){i=_E(s).L}else e===Vr.TTML&&(i=JE(s,t));for(const e of i)t.uW(e)}catch(e){return Zr(e),t.tI=nc.ERROR,void t.yo(new xx(Tx(t.pw,t.MC,n,e)))}t.tI=nc.LOADED}iW(t){qt(this.Z.oC,t)&&t.tI===nc.NONE&&this.hW(t,this.cW.Bw).catch(Pu)}$n(){}async tr(){this.cW.Xw(),this.cW=new $t;for(const t of this.Z.oC)this.oW.lW(t);await super.tr()}constructor(t,e){super(),this.cW=new $t,this.oW=t,this.aW=e}};function Ix(t,e){for(const i of t)if(i.Lt===e&&i.dW)return i}function Cx(t,e){Px(Ix(t.oC,e))}function Px(t){void 0!==t&&(t.TE=yh.Jn)}function Dx(t,e){const i=Ix(t.oC,e)||function(t,e){for(const i of t)if(i.Lt===e)return i}(t.oC,e);Px(i)}function Nx(t){for(const e of lx)e===Hi.Fn?Dx(t,e):Cx(t,e)}r(),r();var P=class extends pe{constructor(){super(Mi.Xy)}};r(),r();var zr=function(t){return t[t.fW=0]="fW",t[t._W=1]="_W",t}({});r(),r();var Za=class extends pe{constructor(t){super(Zc.LL),this.currentTime=t}};r();var ce=class extends pe{constructor(t){super(Zc.BL),this.currentTime=t}},Mx=[Zc.QI,Zc.BL,Mi.so,Mi.Uy],q=class extends Bo{vW(t){!this.mW&&t>=gs.Xn&&(this.mW=!0,this.yo(new YT(this.gW.yR,t)))}pW(t){!this.wW&&t>=gs.QB&&(this.wW=!0,this.yo(new KT(this.gW.yR,t)))}yW(t){this.bW||(t>=gs.JB&&this.AW<gs.JB&&!this.gW.ZR||this.TW&&t>=gs.JB)&&this.yo(new ce(this.gW.yR))}kW(t){!this.EW(t)||this.gW.kR||this.gW.lt||this.yo(new Za(this.gW.yR))}xW(t){this.AW<=gs.QB&&t>=gs.JB&&this.yo(new ro(this.gW.yR,t))}maybeDispatchCanPlayThroughEvent(t){t===gs.$B&&this.yo(new jT(this.gW.yR,t))}EW(t){const e=!this.gW.ZR&&t<=gs.QB,i=!this.RW&&this.AW<=gs.QB;return e&&!i}get TW(){return!this.gW.ZR&&this.RW}tr(){this.AW=gs.jB,this.RW=!0,this.wW=!1,this.mW=!1}gn(){this.Bo(),this.bW&&this.gW.fn(Zc.BL,this.IW),this.gW.fn(Mi.so,this.PW),this.gW.fn(Mi.Uy,this.DW),this.gW.fn(Zc.QI,this.NW)}constructor(t,e=!1){super(),this.gW=t,this.bW=e,this.AW=gs.jB,this.RW=!0,this.wW=!1,this.mW=!1,this.NW=t=>{const e=this.gW.tI;e!==this.AW&&this.yo(new au(t.currentTime,e)),e===gs.jB&&(this.wW=!1,this.mW=!1),this.vW(e),this.pW(e),this.xW(e),this.maybeDispatchCanPlayThroughEvent(e),this.yW(e),this.kW(e),this.AW=e},this.PW=()=>{this.kW(this.AW),this.yW(this.AW),this.RW=this.gW.ZR},this.DW=()=>{this.RW=this.gW.ZR},this.IW=t=>{this.yo(new ce(t.currentTime))},this.gW.yn(Zc.QI,this.NW),this.gW.yn(Mi.so,this.PW),this.gW.yn(Mi.Uy,this.DW),this.bW&&this.gW.yn(Zc.BL,this.IW)}},Lx=class extends Bo{get yR(){return this.gW.yR}get kR(){return this.gW.kR}get lt(){return this.gW.lt}get ZR(){return this.gW.ZR}get tI(){return this.gW.tI}Ww(){this.Bo(),this.gW.fn(Mx,this.Ds)}constructor(t){super(),this.gW=t,this.gW.yn(Mx,this.Ds)}};r(),r(),r(),r();var Xo=class{MW(){return this.LW}BW(t){this.LW=t}get aR(){return this.aW}get OW(){return!1}get FW(){const t=this.VW.certificate;if(t)return Kt(t)?Da(t):zo(t)}WW(){return this.VW.licenseAcquisitionURL||this.MW()}get UW(){return!1}GW(t){return Promise.resolve()}ZW(t,e){return Promise.resolve(void 0)}get AE(){return Boolean(this.VW.useCredentials)}async XW(t,e,i,s){const n=this.zW(t,e,i,s);if(""===n.qu)throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.aR.zk(n);return await t.Ek(e)}catch(t){return Zr(t),void await this.qW(t,n.qu,s)}}zW(t,e,i,s){const n=this.YW().yk(),r=this.AE,o={qu:this.KW(),Xk:e,qk:n,Ck:t,AE:r,gE:So.POST,pE:0,Bw:s,pw:Wr.eE,yE:i};return new Fe(o)}jW(t,e){return Promise.resolve(t)}QW(t,e,i,s){return Promise.resolve(t)}YW(){return new aa(this.VW.headers||{})}async qW(t,e,i){throw new ir(Ja.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}KW(t,e){let i=e;const s=this.VW.queryParameters;if(!i){const t=this.WW();if(!t)return"";i=t}if(s||t){const e=As.Ah(i);t&&zb(e,t),s&&zb(e,s),i=e.href}return i}JW(t,e){return Bx(t)}$W(t){return new j(t)}async tU(t,e,i){const s=await this.JW(t,i),n=await this.XW(s,this.eU,e,i);return this.$W(n)}gn(){}constructor(t,e,i,s,n){this.LW=void 0,this.rT=t,this.iU=e,this.sU=i,this.aW=s,this.eU=n,this.VW=this.nU(e)}};function Bx(t){return Promise.resolve(_c(t).buffer)}var Ox=class extends Xo{nU(t){return t.widevine||{}}async rU(t,e){return this.FW?this.FW:this.oU(new j(t),e)}oU(t,e){return super.tU(t,De.rE,e)}constructor(t,e,i,s){super(rn,t,e,i,s)}};r();var Fx=function(t){return t.fw="Widevine",t.hU="PlayreadyV2",t.aU="PlayreadyV3",t.dw="PlayreadyV2",t.mw="Fairplay",t}({}),Vx={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function Wx(t,e){var i,s,n,r;const o=Vx[e],h=t.accountName;return{CustomerName:t.customerName,AccountName:h,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(i=As.qp)?void 0:i.Ys,OSVersion:null==(s=As.qp)?void 0:s.ow,DRMProvider:o.DRMProvider,DRMVersion:o.DRMVersion,DRMType:o.DRMType,DeviceVendor:null==(n=As.qp)?void 0:n.hw,DeviceModel:null==(r=As.qp)?void 0:r.aw}}}function Ux(t,e){if(!t.accountName)throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, accountName is not set.");if(!t.customerName)throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, customerName is not set.");if(!t.portalId)throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, portalId is not set.");throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration.")}function Gx(t,e,i){let s;if(iT(t))s={AuthToken:t.authToken,Payload:e};else{if(!sT(t))throw Ux(t,i);s={LatensRegistration:Wx(t,i),Payload:e}}return vr(JSON.stringify(s))}async function Hx(t,e,i){const s=t.UE;if(!s)throw new ir(Ja.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,e);const n=s;let r,o;try{r=await n.Sk(i),o=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){o=""}throw new ir(Ja.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.zk.qu,n.Hk,n.Yk,o)}r();var Zx=class extends Ox{static uU(){return As.Ys.Jg?"required":"optional"}qW(t,e,i){return Hx(t,e,i)}GW(t){return this.cU?hu(this.cU.Bb,t):(this.cU=new as,Promise.resolve())}async JW(t,e){const i=this.iU;if(!i)throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return Gx(i,ea(t),Fx.fw)}$W(t){let e;if(!t.license)throw new ir(Ja.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return e=Da(t.license),e}lU(t){return Promise.resolve(new j(t))}async rU(t,e){this.dU();const i=await this.JW(t,e),s=await this.XW(i,$r.vk,De.oE,e);return await this.lU(s)}async oU(t,e){const i=await super.oU(t,e);return this.dU(),i}dU(){this.cU||(this.cU=new as),this.cU.Mb()}gn(){this.cU&&this.cU.Xw(),super.gn()}constructor(t,e,i){super(t,e,i,$r.gk),this.cU=void 0}};r();var Xx=class extends Ox{get fU(){if(nT(this.iU))return this.iU.token}async JW(t,e){const i=await Bx(t),s=this.sU,n=$g(new j(i)),r=this.fU;if(void 0===r)throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,e,i){super(t,e,i,$r.vk),this.BW("https://widevine-proxy.drm.technology/proxy")}};function zx(t,e){let i=e||{};return t.ticket&&t.sessionId&&(i=la({},i,{SessionId:t.sessionId,Ticket:t.ticket})),la({},i,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}r(),r();var qx=class extends Ox{KW(t,e){let i=t;return $S(this.iU)&&(i=zx(this.iU,i)),super.KW(i,e)}constructor(t,e,i){super(t,e,i,$r.vk),this.BW("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}};r(),r();var Yx="Conax-Custom-Data";function Kx(t,e,i){const s=t&&JS(t)&&t;if(s&&!i.has(Yx)){const t=BS(s)?s.token:void 0,n=BS(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:e+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});i.set(Yx,r)}return i}var jx=class extends Ox{YW(){const t=super.YW();return Kx(this.iU,"Widevine",t)}constructor(t,e,i){super(t,e,i,$r.vk),this.BW("https://connect.conax.com:8094/license")}};function Qx(t){const e=ah(new j(t));return Da(JSON.parse(e).license)}function Jx(t){return"string"==typeof t.token?t.token:vr(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function $x(t,e,i){let s;return s=i.token?"x-dt-auth-token":"dt-custom-data",t.set(s,e),t}r(),r();var tR=class extends Ox{get fU(){return Jx(this.iU)}$W(t){return Qx(t)}YW(){return $x(super.YW(),this.fU,this.iU)}constructor(t,e,i){super(t,e,i,$r.vk),this.BW("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}};r();var eR=class extends Ox{YW(){const t=super.YW(),e=this.iU.token;return t.set("Authorization","Bearer "+e),t}constructor(t,e,i){super(t,e,i,$r.vk)}};async function iR(t,e,i,s){if(!rT(t))throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new aa;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const o=t.streamId;let h;h=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:e,licenseType:h,streamId:o},u={qu:t.ticketAcquisitionURL,Xk:$r.gk,qk:n,gE:So.POST,Ck:JSON.stringify(a),Bw:s},c=await i.zk(u);return await c.Sk()}r(),r();var sR=class extends Ox{YW(){const t=super.YW();return t.set("Content-Type","application/json"),t}async JW(t,e){const i=hp(t.buffer),s=this.iU,n=await iR(s,"widevine_modular",this.aR,e);this.BW(n.licenseServerUrl);const r=gr(JSON.stringify({payload:i,ticket:n.ticket}));return super.JW(r,e)}$W(t){return Da(t.license)}constructor(t,e,i){super(t,e,i,$r.gk)}};r();var nR=class extends Ox{YW(){if(!oT(this.iU))throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.YW();return t.set("X-AxDRM-Message",this.iU.token),t}constructor(t,e,i){super(t,e,i,$r.vk)}};function rR(t){const e=new j(2*t.length);for(let i=0;i<t.length;i+=1)e[2*i]=t.charCodeAt(i),e[2*i+1]=0;return e}r();var vu=class extends Xo{nU(t){return t.playready||{}}YW(){const t=new aa(this._U);return t.Ak(super.YW()),t}vU(t){return t.length>=1&&t[0].Dx.length>0}ZW(t){const e=this.iU.playready.customData;if(e){const t=rR(e),i=rR('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+ea(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{bT:i}})}return super.ZW(t)}async JW(t,e){const i=await Bx(t);return this.mU(i)}async mU(t){var e,i;let s=null;const n=mr(new DataView(t),new Ui,!0);let r;try{r=As.Tx(n)}catch(t){return s}const o=null==(e=r.Lx("PlayReadyKeyMessage")[0])?void 0:e.Lx("LicenseAcquisition")[0];var h;const a=null!=(h=null==o?void 0:o.Lx("Challenge"))?h:[];this.vU(a)&&(s=op(a[0].Ux));const u=new aa;var c;const l=null!=(c=null==o||null==(i=o.Lx("HttpHeaders")[0])?void 0:i.Lx("HttpHeader"))?c:[];for(const t of l){const e=t.Lx("name")[0].Ux,i=t.Lx("value")[0].Ux;u.append(e,i)}return this._U=u,s}rU(t,e){return Promise.resolve(t)}oU(t,e){return super.tU(t,De.hE,e)}constructor(t,e,i){super(vm,t,e,i,$r.vk),this._U=void 0}};r(),r();var oR=class t{static gU(t){return"3"===t.version?Fx.aU:Fx.hU}pU(){const t={};if(this.TS===Fx.aU){const e={LatensRegistration:Wx(this.wU,Fx.aU)};t["X-TITANIUM-DRM-CDATA"]=vr(JSON.stringify(e))}return t}get yU(){return this.TS}get _T(){return this.TS===Fx.hU}constructor(e){this.wU=e,this.TS=t.gU(e)}};var hR=class extends vu{ZW(t){const e=this.iU;if(!this.iU)throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(sT(e)){const t={};return t.playready={bT:aR(e,this.bU.yU)},Promise.resolve(t)}return Promise.reject(Ux(e,Fx.dw))}YW(){const t=new aa(this.bU.pU());return t.Ak(super.YW()),t}async qW(t,e,i){const s=t.UE;if(!s)throw new ir(Ja.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e);let n,r;try{const t=await s.xk(i),e=ah(new j(t)),h=As.Tx(e);if(h){const t=function(t,e){return function(t,e){const i=t.m.slice(),s=[];for(;i.length>0;){const t=i.shift();e(t)?s.push(t):i.push(...t.m)}return s}(t,(t=>t.Bx===e))}(h,"CustomData");var o;if(t.length>0)n=JSON.parse(t[0].Ux),r=null==(o=n.DrmErr)?void 0:o.desc}}catch(t){}throw new ir(Ja.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e,s.Hk,s.Yk,r)}vU(t){if(1!==t.length)throw new ir(Ja.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,e,i){super(t,e,i),this.bU=new oR(this.iU)}};function aR(t,e){const i=Wx(t,e),s=i.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+vr('<LatensRegistration formatversion="'+s+'"><AccountName>'+i.AccountName+"</AccountName><CustomerName>"+i.CustomerName+"</CustomerName><PortalID>"+i.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+i.DeviceInfo.DeviceType+"</DeviceType><OSType>"+i.DeviceInfo.OSType+"</OSType><OSVersion>"+i.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+i.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+i.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+i.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+i.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+i.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=zg(n,!0);return zg('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+ea(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}r();var uR=class extends vu{get fU(){if(nT(this.iU))return this.iU.token}vU(t){if(1!==t.length)throw new ir(Ja.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}KW(t,e){const i=la({},t||{},{token:this.fU});return super.KW(i,e)}constructor(t,e,i){super(t,e,i),this.BW("https://playready-license.drm.technology/rightsmanager.asmx")}};r();var cR=class extends vu{KW(t,e){let i=t;return $S(this.iU)&&(i=zx(this.iU,i)),super.KW(i,e)}constructor(t,e,i){super(t,e,i),this.BW("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}};r();var lR=class extends vu{YW(){const t=super.YW();return Kx(this.iU,"PlayReady",t)}constructor(t,e,i){super(t,e,i),this.BW("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}};r();var dR=class extends vu{get fU(){return Jx(this.iU)}$W(t){const e=function(t){const e=ah(new j(t));return Cl(e,"<?xml")?0:1}(t);return 1===e?Qx(t):super.$W(new j(t))}YW(){return $x(super.YW(),this.fU,this.iU)}constructor(t,e,i){super(t,e,i),this.BW("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};r();var fR=class extends vu{YW(){const t=super.YW();return this.AU&&t.set("Ticket",this.AU),t.set("Content-Type","text/xml"),t}async JW(t,e){const i=this.iU,s=await iR(i,"playready",this.aR,e);return this.BW(s.licenseServerUrl),this.AU=s.ticket,super.JW(t,e)}constructor(t,e,i){super(t,e,i)}};r();var _R=class extends vu{YW(){if(!oT(this.iU))throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.YW();return t.set("X-AxDRM-Message",this.iU.token),t}};r(),r();var cu=function(t){return t.gk="application/json",t.SU="application/x-www-form-urlencoded",t.TU="application/octet-stream",t.wk="text/plain;charset=UTF-8",t}({}),hs=class extends Xo{get UW(){return!0}kU(){return this.VW.certificateURL||this.EU}xU(t){this.EU=t}JW(t){return Promise.resolve(this.RU(t,this.IU))}RU(t,e){return"spc="+encodeURIComponent(ea(t))+"&assetId="+encodeURIComponent(e)}get CU(){return cu.SU}nU(t){return t.fairplay||{}}PU(t){const e=t.indexOf("?");if(e>=0)return Promise.resolve(t.substr(e+1));{const e=t.split("skd://").pop();if(e){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e))return Promise.resolve(e)}const i=t.split("/");return Promise.resolve(i[i.length-1])}}async ZW(t){var e;const i=null!=(e=this.DU)?e:Kg(new j(t)),s=await this.PU(i);this.IU=s;const n={};return n.fairplay={PT:s},n}YW(){const t=super.YW();return t.set("Content-Type",this.CU),t}async rU(t,e){return this.FW?this.FW:await this.NU(e)}oU(t,e){return super.tU(t,De.sE,e)}MU(t){const e=this.kU(),i=this.YW(),s={qu:e,Xk:$r.vk,qk:i,gE:So.GET,AE:!1,Ck:null,pE:0,Bw:t,pw:Wr.eE,yE:De.nE};return new Fe(s)}async NU(t){const e=this.MU(t),i=await this.aR.zk(e),s=await i.xk();return new j(s)}$W(t){let e;if("string"==typeof t){let i=t.trim();"<ckc>"===i.substr(0,5)&&"</ckc>"===i.substr(-6)&&(i=i.slice(5,-6)),e=Da(i)}else e=new j(t);return e}KW(t,e){let i=super.KW(t,e);return Cl(i,"skd:")&&(i=i.substr(4)),i}constructor(t,e,i,s,n){super(t.rT,e,i,s,n),this.IU="",this.EU=void 0,this.DU=t.LU}};r();var vR=class extends hs{get CU(){return cu.TU}PU(t){let e=t.split("://",1);return"skd"!==e[0].slice(-3).toLowerCase()?Promise.resolve(""):(e=t.split(";",2),e.length>1?Promise.resolve(e[1]):Promise.resolve(super.PU(t)))}async JW(t){return t}$W(t){return new j(t)}KW(t,e){const i=t||{};return i.p1=Fa(),super.KW(i,e)}constructor(t,e,i,s){super(t,e,i,s,$r.vk)}};r();var mR=class extends hs{get CU(){return cu.gk}get fU(){if(!nT(this.iU))throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.iU.token}RU(t,e){const i={token:this.fU,contentId:e,payload:ea(t)};return JSON.stringify(i)}$W(t){return new j(t)}YW(){const t=super.YW();return t.set("x-vudrm-token",this.fU),t}constructor(t,e,i,s){super(t,e,i,s,$r.vk),this.BW("https://fairplay-license.drm.technology/license"),this.xU("https://fairplay-license.drm.technology/certificate")}};r();var gR="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",pR="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",wR=class extends hs{$W(t){const e=function(t){let e;try{e=JSON.parse(t).ckc}catch(t){throw new ir(Ja.CONTENT_PROTECTION_LICENSE_INVALID,gR)}if(!e)throw new ir(Ja.CONTENT_PROTECTION_LICENSE_ERROR,pR);return e}(ah(new DataView(t)));return super.$W(e)}constructor(t,e,i,s){super(t,e,i,s,$r.vk)}};r();var yR=class extends hs{get CU(){return cu.gk}async JW(t){const e=this.iU;if(!e)throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return Gx(e,ea(t),Fx.mw)}$W(t){try{let e;if(Kt(t)){const i=t.trim();e=JSON.parse(i)}else e=t;if(e.license){const t=op(e.license);return new j(t)}throw new ir(Ja.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new ir(Ja.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}qW(t,e,i){return Hx(t,e,i)}constructor(t,e,i,s){super(t,e,i,s,$r.gk)}};r();var bR=class extends hs{kU(){const t=super.kU();if(!t)return t;const e=As.Ah(t),i=this.iU;return $S(i)&&zb(e,{accountId:i.accountId,applicationId:i.applicationId||""}),e.href}PU(t){return $S(this.iU)?Promise.resolve(this.iU.contentId):super.PU(t)}async JW(t){return t}$W(t){return new j(t)}get CU(){return cu.TU}KW(t,e){let i=t;return $S(this.iU)&&(i=function(t,e){return la({},zx(t,e),{KeyId:t.keyId})}(this.iU,i)),super.KW(i,e)}constructor(t,e,i,s){super(t,e,i,s,$r.vk),this.BW("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.xU("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}};r();var AR=class extends hs{YW(){const t=super.YW();return Kx(this.iU,"FairPlay",t)}async NU(t){const e={qu:this.kU(),Xk:$r.vk,qk:{},gE:So.GET,AE:!1,Ck:null,pE:0,Bw:t,pw:Wr.eE,yE:De.nE},i=await this.aR.zk(e),s=await i.xk();return new j(s)}async JW(t){return t}PU(t){const e=t.indexOf("?");if(0===t.indexOf("skd://")){let i;return i=e>=0?t.substring(6,e):t.substring(6),Promise.resolve(function(t){return ah(Da(t))}(i))}return Promise.resolve("unknown")}$W(t){try{const e=JSON.parse(t);return new j(op(e.CkcMessage))}catch(t){throw new g("CFLRW-66")}}constructor(t,e,i,s){if(super(t,e,i,s,$r.wk),!JS(e))throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.BW("https://connect.conax.com:8097/license")}};r();var SR=class extends hs{PU(t){return Cl(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new ir(Ja.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}RU(t,e){return"spc="+ea(t)+"&assetId="+e}constructor(t,e,i,s){super(t,e,i,s,$r.wk),this.BW(zS[Ne.mw])}};r();var TR=class extends hs{get fU(){return Jx(this.iU)}RU(t,e){const i="spc="+encodeURIComponent(ea(t))+"&"+encodeURI(e);return"persistent"===this.VW.licenseType?i+"&offline=true":i}YW(){return $x(super.YW(),this.fU,this.iU)}constructor(t,e,i,s){super(t,e,i,s,$r.wk),this.BW("https://lic.drmtoday.com/license-server-fairplay/")}};r();var kR=class extends hs{PU(t){let e=t;return Cl(e,"skd:")&&(e="http:"+e.substring(4)),Cl(e,"http:")||Cl(e,"https:")?Promise.resolve(As.Ah(e).hostname):Promise.reject(new g("Could not parse ExpressPlay FairPlay content ID."))}async JW(t){return t}$W(t){return new j(t)}get CU(){return cu.TU}constructor(t,e,i,s){super(t,e,i,s,$r.vk)}};r();var ER=class extends hs{YW(){const t=super.YW(),e=this.iU.token;return t.set("Authorization","Bearer "+e),t}constructor(t,e,i,s){super(t,e,i,s,$r.wk)}};r();var xR=class extends hs{async NU(t){const e=this.kU(),i=this.YW(),s={qu:e,Xk:$r.gk,qk:i,gE:So.POST,Bw:t,pw:Wr.eE,yE:De.nE},n=await this.aR.zk(s),r=await n.Sk();return new j(Da(r.certificate))}get CU(){return cu.gk}async oU(t,e,i){void 0===i&&(i=$r.wk);const s=ea(t),n=this.iU,r=await iR(n,"fairplay",this.aR,e),o=gr(JSON.stringify({spc:s,ticket:r.ticket})),h={qu:this.WW(),Xk:$r.gk,qk:this.YW(),gE:So.POST,Ck:o,pE:0,Bw:e,pw:Wr.eE,yE:De.sE},a=await this.aR.zk(h);return Da((await a.Sk()).licence)}constructor(t,e,i,s){if(super(t,e,i,s,$r.gk),!rT(e))throw new g("Invalid Xstream DRM configuration")}};r();var RR=class extends hs{RU(t,e){return ea(t)}$W(t){if(0===t.length)throw new ir(Ja.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.$W(t)}YW(){const t=super.YW();return t.set("Content-Type","text/plain"),t}constructor(t,e,i,s){super(t,e,i,s,$r.wk)}};r();var IR=class extends hs{get CU(){return cu.gk}RU(t,e){return t}$W(t){return new j(t)}YW(){if(!oT(this.iU))throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.YW();return t.set("X-AxDRM-Message",this.iU.token),t}constructor(t,e,i,s){super(t,e,i,s,$r.vk)}};r();var CR=class extends hs{get CU(){return cu.wk}RU(t,e){const i={spc:ea(t)};return JSON.stringify(i)}PU(t){const e=As.Ah(t);return this.BU=t,e.searchParams.has("b")?Promise.resolve(e.searchParams.get("b")):Promise.reject(new ir(Ja.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}KW(t,e){let i=this.WW();return!i&&this.BU&&(i=this.BU),i&&(i=i.replace("skd://","https://")),super.KW(t,e||i)}$W(t){try{let e;if(e=Kt(t)?JSON.parse(t.trim()):t,e.ckc)return Da(e.ckc)}catch(t){throw new ir(Ja.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new ir(Ja.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,e,i,s){super(t,e,i,s,$r.gk),this.BU=void 0}};r(),r(),r();var PR=class{OU(t){return this.FU(t)}VU(t,e){throw new b(e+" must be "+this.WU+". (Received: "+t+")")}constructor(t,e){this.FU=t,this.WU=e}},hi=(new PR((function(t){return!0}),"any"),new PR(Ad,"a number")),dl=new PR(Kt,"a string"),DR=new PR(yd,"a boolean"),Bh=(new PR(bd,"a date"),new PR(pd,"undefined")),NR=new PR(V,"an object"),MR=new PR((function(t){return null===t}),"null");new PR((function(t){return null==t}),"null or undefined");function LR(t,e){throw new b(e+" has an incorrect type")}var BR=class{OU(t){if(!V(t))return!1;for(const e of w.keys(this.kp)){if(!this.kp[e].OU(t[e]))return!1}return!0}VU(t,e){if(!V(t))throw new b(e+" must be an object.");for(const i of w.keys(this.kp)){const s=this.kp[i];if(!s.OU(t[i]))return s.VU(t[i],e+"."+String(i))}throw new b}constructor(t){this.kp=t}};function qe(t){return new BR(t)}function OR(t){return w.keys(t).map((e=>t[e]))}var FR=class{OU(t){return qt(this.__,t)}VU(t,e){return LR(0,e)}constructor(t){this.__=t}};function VR(t){return new FR(t)}var WR=class{OU(t){return this.UU.some((e=>e.OU(t)))}VU(t,e){return LR(0,e)}constructor(t){this.UU=t}};function Js(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new WR(e)}var UR=class{OU(t){return rl(t)&&t.every((t=>this.GU.OU(t)))}VU(t,e){if(!rl(t))throw new b(e+" must be an array.");for(let i=0;i<t.length;i++){const s=t[i];this.GU.OU(s)||this.GU.VU(s,e+"["+i+"]")}return LR(0,e)}constructor(t){this.GU=t}};function cc(t){return new UR(t)}var GR=class{OU(t){return V(t)&&w.keys(t).every((e=>this.GU.OU(t[e])))}VU(t,e){if(!V(t))throw new b(e+" must be an object.");for(const i of w.keys(t))if(!this.GU.OU(t[i]))return this.GU.VU(t[i],e+"."+i);return LR(0,e)}constructor(t){this.GU=t}};function HR(t){return new GR(t)}var ZR=class{OU(t){return this.GU().OU(t)}VU(t,e){return this.GU().VU(t,e)}constructor(t){this.GU=gl(t)}};var XR=qe({responseCode:hi,isException:DR,description:dl,title:dl,correlationId:dl});async function zR(t,e,i,s,n){const r=function(t,e,i,s){const n={token:e.token,account:e.accountId,form:"json"},r=decodeURIComponent(wc(i,n)),o=new aa({});o.append("Content-Type","application/json");const h=ea(t),a={getFairplayLicense:{releasePid:e.releasePid,spcMessage:h}};return{qu:r,Xk:$r.wk,qk:o,gE:So.POST,Ck:JSON.stringify(a),Bw:s,pw:Wr.eE,yE:De.sE}}(t,e,i,n);return await async function(t,e){const i=await e.zk(t),s=await i.Sk();if(XR.OU(s))throw new ir(Ja.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.qu,s.responseCode);return Da(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var qR=class extends hs{PU(t){const e=t.replace("FairPlay",this.HU.releasePid);return super.PU(e)}async oU(t,e){return await zR(t,this.HU,this.WW(),this.aR,e)}constructor(t,e,i,s){super(t,e,i,s,$r.vk),this.HU=e}};r();var YR=class extends Xo{nU(t){return t.clearkey||{}}async XW(t,e,i,s){const n=this.VW;if(this.WW())return super.XW(t,this.eU,i,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let e=t;return e||(e={}),{kty:"oct",kid:e.id,k:e.value}}))};return jg(JSON.stringify(t)).buffer}throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}rU(t,e){return Promise.resolve(new j(0))}async oU(t,e){const i=await super.tU(t,De.aE,e),s=JSON.parse(Kg(i));if(s.keys)for(const t of s.keys)t.k&&(t.k=gg(t.k)),t.kid&&(t.kid=gg(t.kid));return jg(JSON.stringify(s))}constructor(t,e,i){super(pm,t,e,i,$r.vk)}};r();var KR=class extends Ox{};r(),r();var jR={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function QR(t,e,i){const s=nI(e),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(e);const r=await hu(Promise.resolve(n.call(t,s)),i);return Jg(r)?zo(r):sI(la({},jR,r))}async function JR(t,e,i,s,n){const r=t.onCertificateResponse,o=iI(e,i,s);if(!r||"function"!=typeof r)return Promise.resolve(e);return zo(await hu(Promise.resolve(r.call(t,o)),n))}async function $R(t,e,i,s){const n=await async function(t,e,i,s){const n=null==t?void 0:t.onLicenseRequest,r=eI(e,i);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const o=await hu(Promise.resolve(n.call(t,r)),s);if(Jg(o))return zo(o).buffer;return la({fairplaySkdUrl:void 0},jR,o)}(t,e,i,s);return n instanceof ArrayBuffer?n:sI(n)}async function tI(t,e,i,s,n,r){const o=eI(i,n),h=await async function(t,e,i,s,n){const r=null==t?void 0:t.onLicenseResponse,o=iI(e,i,s);if(!r||"function"!=typeof r)return Promise.resolve(e);0;const h=await hu(Promise.resolve(r.call(t,o)),n);return zo(h)}(t,new j(e),o,s,r);return zo(h)}function eI(t,e){return la({},nI(t),{fairplaySkdUrl:e})}function iI(t,e,i){return{url:i.jk,status:i.Hk,statusText:i.Yk,headers:i.qk.yk(),body:t,request:e}}function sI(t){return new Fe({qu:t.url,gE:t.method,qk:t.headers,Ck:t.body,AE:t.useCredentials,pw:Wr.eE})}function nI(t){var e;return{url:t.qu,body:null!=(e=rI(t.Ck))?e:null,headers:t.qk.yk(),method:t.gE,useCredentials:t.AE}}function rI(t){if(t)return"string"==typeof t?jg(t):t instanceof ArrayBuffer?new j(t):or(t)?Th(t):void 0}var oI=class extends vu{rU(t,e){return Promise.resolve(t)}async oU(t,e){const i=await this.mU(_c(t).buffer),s=this.zW(i,$r.vk,De.hE,e),n=await $R(this.ZU,s,void 0,e);if(n instanceof ArrayBuffer)return new j(n);if(""===n.qu)throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.aR.zk(n),i=await t.xk(e);return await tI(this.ZU,i,s,t,void 0,e)}catch(t){throw Zr(t),new ir(Ja.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,e,i,s){super(t,e,i),this.ZU=s}};r();var hI=class extends KR{async rU(t,e){if(this.FW)return this.FW;const i=this.zW(t,$r.vk,De.oE,e),s=await QR(this.ZU,i,e);if(s instanceof j)return s;if(""===s.qu)throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.aR.zk(s),r=await n.xk(e)}catch(t){throw Zr(t),new ir(Ja.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const o=eI(i,void 0);return await JR(this.ZU,new j(r),o,n,e)}async oU(t,e){const i=this.zW(t,$r.vk,De.rE,e),s=await $R(this.ZU,i,void 0,e);if(s instanceof ArrayBuffer)return new j(s);if(""===s.qu)throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.aR.zk(s),n=await t.xk(e);return await tI(this.ZU,n,i,t,void 0,e)}catch(t){throw Zr(t),new ir(Ja.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,e,i,s){super(t,e,i,$r.vk),this.ZU=s}};r();var aI=class extends hs{async rU(t,e){if(this.FW)return this.FW;const i=this.MU(e),s=await QR(this.ZU,i,e);if(or(s))return s;try{const t=await this.aR.zk(s),n=await t.xk(),r=eI(i,void 0);return await JR(this.ZU,new j(n),r,t,e)}catch(t){throw Zr(t),new ir(Ja.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async oU(t,e){const i=this.zW(t,$r.vk,De.sE,e),s=await $R(this.ZU,i,this.XU,e);if(s instanceof ArrayBuffer)return new j(s);if(""===s.qu)throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.aR.zk(s),n=await t.xk(e);return await tI(this.ZU,n,i,t,this.XU,e)}catch(t){throw Zr(t),new ir(Ja.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}PU(t){var e;return this.XU=t,(null==(e=this.ZU)?void 0:e.extractFairplayContentId)?Promise.resolve(this.ZU.extractFairplayContentId(t)):super.PU(t)}constructor(t,e,i,s,n){super(t,e,i,s,$r.vk),this.ZU=n}},uI=class{zU(t,e,i,s){switch(t.rT.pw){case Ne.fw:return this.qU(e,i,s);case Ne.dw:return this.YU(e,i,s);case Ne.mw:return this.KU(t,e,i,s);case Ne._w:default:return this.jU(e,i,s)}}qU(t,e,i){const s=function(t){return t.integration===DS&&Kt(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&VS.lP.aP(s,hm)){const n=VS.lP.cP(s,hm,t);return new hI(t,e,i,n)}switch(s){case xh:return new Zx(t,e,i);case AS:return new Xx(t,e,i);case bS:return new qx(t,e,i);case wS:return new jx(t,e,i);case TS:return new tR(t,e,i);case ES:return new eR(t,e,i);case xS:return new sR(t,e,i);case IS:return new nR(t,e,i);default:return new KR(t,e,i,$r.vk)}}YU(t,e,i){const s=t.integration;if(s&&VS.lP.aP(s,rm)){const n=VS.lP.cP(s,rm,t);return new oI(t,e,i,n)}switch(s){case xh:return new hR(t,e,i);case AS:return new uR(t,e,i);case bS:return new cR(t,e,i);case wS:return new lR(t,e,i);case TS:return new dR(t,e,i);case xS:return new fR(t,e,i);case IS:return new _R(t,e,i);default:return new vu(t,e,i)}}KU(t,e,i,s){const n=e.integration;if(n&&VS.lP.aP(n,Ve)){const r=VS.lP.cP(n,Ve,e);return new aI(t,e,i,s,r)}switch(n){case yS:return new vR(t,e,i,s);case AS:return new mR(t,e,i,s);case SS:return new wR(t,e,i,s);case xh:return new yR(t,e,i,s);case bS:return new bR(t,e,i,s);case wS:return new AR(t,e,i,s);case mo:return new SR(t,e,i,s);case TS:return new TR(t,e,i,s);case kS:return new kR(t,e,i,s);case ES:return new ER(t,e,i,s);case xS:return new xR(t,e,i,s);case RS:return new RR(t,e,i,s);case IS:return new IR(t,e,i,s);case CS:return new CR(t,e,i,s);case PS:return new qR(t,e,i,s);default:return new hs(t,e,i,s,$r.wk)}}jU(t,e,i){return new YR(t,e,i)}QU(t){return t.pw===Ne.dw||t.pw===Ne.fw||t.pw===Ne.mw||t.pw===Ne._w}_T(t,e){var i;if(t.pw!==Ne.dw)return!1;if(ne(null==(i=e.playready)?void 0:i.customData))return!0;const s=e.integration;return(!s||!VS.lP.aP(s,Ve))&&(s===xh&&new oR(e)._T)}uU(t,e){if(t.pw!==Ne.fw)return;const i=e.integration;return i&&VS.lP.aP(i,Ve)?void 0:i===xh?Zx.uU():void 0}};r(),r(),r();var cI="theoplayer-stored-network-info-v2",lI=25e5,kl=class{JU(t){var e;const i=null==(e=As.sR)?void 0:e.Cb(t);if(void 0===i)return;const s=JSON.parse(i);if(void 0!==s&&void 0!==s[this.$U]){if(!this.tG(s))return s[this.$U].availableBandwidth;var n;null==(n=As.sR)||n.Pb(t,JSON.stringify({}))}}eG(){const t=this.JU(cI);if(void 0!==t)return t;const e=this.JU("theoplayer-stored-network-info");return e?8*e:void 0}tG(t){const e=t[this.$U].storedTimestamp;return!!e&&Fa()-e>36e5}iG(t){this.sG=t,this.nG()}rG(){var t;return null!=this.sG||(this.sG=null!=(t=this.eG())?t:lI),this.sG}constructor(){this.$U=pb,this.sG=void 0,this.nG=Jr((()=>{var t;const e={[this.$U]:{availableBandwidth:this.sG,storedTimestamp:Fa()}};null==(t=As.sR)||t.Pb(cI,JSON.stringify(e))}),1e4)}};kl.Lg=new kl,r();var ti=function(t){return t[t.oG=0]="oG",t[t.hG=1]="hG",t[t.aG=2]="aG",t[t.uG=3]="uG",t[t.cG=4]="cG",t[t.lG=5]="lG",t[t.HC=6]="HC",t[t.dG=7]="dG",t[t.fG=8]="fG",t[t.qC=9]="qC",t[t._G=10]="_G",t[t.YC=11]="YC",t[t.vG=12]="vG",t}({});r();var Qh=class{get mG(){return 0}get gG(){return 0}pG(t){}};r(),r();var dI=class extends pe{constructor(t){super("contentProtectionsTracked"),this.wG=t}},Gh=class extends Bo{yG(t){this.wU=t}uU(t){const e=this.wU;if(void 0!==e)return this.bG.uU(t,e)}_T(t){const e=this.wU;return void 0!==e&&this.bG._T(t,e)}AG(t){const e={rT:t.rT,SG:t.SG||[],TG:t.TG,LU:t.LU},i=this.bG.zU(e,this.wU||{},t.sU,this.aW);return e.TG&&i.BW(e.TG),new fI(i)}kG(t){if(!t)return;Ti(t,(t=>void 0!==t.sU))&&this.yo(new dI(t))}constructor(t,e=new uI){super(),this.wU=void 0,this.aW=t,this.bG=e}},fI=class{GW(t){return this.EG.GW(t)}ZW(t,e,i){return this.EG.ZW(e,i)}UW(){return this.EG.UW||void 0!==this.EG.FW}rU(t,e){return this.EG.rU(t,e)}oU(t,e,i){return e&&this.EG.BW(e),this.EG.oU(t,i)}Ww(){this.EG.gn()}constructor(t){this.EG=t}};r();var Wu=class extends Zh{xG(t){this.IG.push(t);for(const e of t.oC)this.tt(e);this.CG(t)}DG(t){we(this.IG,t),this.NG(t);for(const e of t.oC)this.MG(e)||this.it(e)}MG(t){for(const e of this.IG)if(e.uC(t))return!0;return!1}CG(t){t.yn(Ce.MI,this.BG),t.yn(Ce.BI,this.OG)}NG(t){t.fn(Ce.MI,this.BG),t.fn(Ce.BI,this.OG)}gn(){for(;this.IG.length>0;)this.DG(this.IG[0]);super.gn()}ma(){return aS(this)}constructor(t){super(),this.IG=[],this.BG=t=>{this.tt(t.Ht)},this.OG=t=>{const e=t.Ht;this.MG(e)||this.it(e)};for(const e of t)this.xG(e)}};r(),r();var _I,vI={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},mI=class{get ga(){return null!=this.Za||(this.Za=function(t){return{get enabled(){return t.Rt},set enabled(e){t.Rt=Fh(e)},get monitoringLivePlayback(){return t.FG},get currentLatency(){return t.ZB},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.md)}}}(this)),this.Za}get Rt(){var t,e;return null!=(e=this.He)?e:Boolean(null==(t=this.VG)?void 0:t.Rt)}set Rt(t){this.He=t,this.VG&&(this.VG.Rt=t)}get FG(){var t,e;return null!=(e=null==(t=this.VG)?void 0:t._B)&&e}get ZB(){var t;return null==(t=this.VG)?void 0:t.HB}get md(){return this.VG?this.VG.vB:vI}Sa(t){this.VG=t,void 0!==this.He&&(this.VG.Rt=this.He)}tr(){this.VG=void 0,this.He=void 0}};var gI=!(!s||!s.TextTrack),pI=class extends Je{get ZB(){}get WG(){const t=this.LB._R,e=this.yR;return t.gr(e,.01)}get ht(){return this.rO}get _R(){return this.LB._R.ks()}get mR(){return this.LB.mR}set mR(t){t&&this.LB.UG(t)}get bt(){return this.wc}get yR(){return void 0!==this.GG?this.GG:this.LB.yR}set yR(t){this.AR(t)}AR(t,e){this.NR&&(this.GG=t),this.LB.Sb(t)}get ct(){return this.LB.ct}get kR(){return this.LB.kR}get lt(){return this.HG}get RR(){return this.ZG}get PR(){}get NR(){return this.LB.NR}get LR(){return la({},{uO:0,cO:0,lO:0,dO:0,fO:0,_O:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.LB.OR())}get FR(){return this.LB.FR}set FR(t){this.LB.FR=t}get GR(){return!0}get ZR(){return this.LB.ZR}get zR(){return this.LB.zR}set zR(t){this.LB.zR=t}get KR(){return this.LB.XG.played}get QR(){return this.zG}set QR(t){this.zG=t,this.qG&&(this.qG.QR=t)}get tI(){return this.LB.tI}get iI(){return this.LB.iI.ks()}get nI(){return this.LB.nI}get YG(){return this.LB.YG}get nt(){return this.Ul}get rt(){return this.hO}get hI(){return this.LB.hI}get cI(){return this.LB.cI}get dI(){return this.LB.dI}set dI(t){this.LB.dI=t}get vI(){return this.KG}get gI(){return this.LB.gI}set gI(t){this.LB.gI=t}get jG(){return this.QG}be(){this.LB.be()}ge(){this.LB.ge()}async ka(t,e,i){ot(i),this.wc=t;const s={pw:zr.fW,MC:t.src,Ik:t.type,JG:this.$G(t),QR:this.zG,tH:t.crossOrigin,eH:e.metadata&&e.metadata.title};this.iH.yG(t.contentProtection),this.qG=await this.LB.$n(s),ot(i),e.textTracks&&this.sH(e.textTracks),Nx(this.nt)}sH(t){for(const i of t)if(this.LB.nH()&&Z.Ka&&gI&&!bx(i.kind,i.label)&&this.rH(i)){var e;const t=null!=(e=i.kind)?e:Hi.qV;this.LB.oH(i.src,t,i.label,i.srclang,i.default)}else{if(void 0===i.src)continue;this.hH.rW(i)}}rH(t){return!t.format||"webvtt"===t.format}async AI(){try{await this.LB.AI()}catch(t){}for(;!this.WG;)await this.LB.uy(Mi.Gy)}bI(){this.LB.bI()}TI(){return void 0!==this.LB.XG.webkitShowPlaybackTargetPicker}kI(){this.LB.XG.webkitShowPlaybackTargetPicker&&this.LB.XG.webkitShowPlaybackTargetPicker()}EI(){this.LB.XG.webkitShowPlaybackTargetPicker&&this.LB.XG.webkitShowPlaybackTargetPicker()}wI(){return this.LB.XG}pI(){return this.LB.wa}_a(){return this.LB.aH}DI(t){return this.LB.uH(t)}async tr(){this.wc=void 0,this.HG=void 0,this.ZG=void 0,this.qG=void 0,await this.hH.tr(),this.LB.cH(),await this.LB.tr(),this.lH.tr(),this.QR=this.zG,this.ht.tr(),this.rt.tr(),this.GG=void 0}async gn(){await this.tr(),this.Bo(),this.dH(),this.fH(),this.lH.gn(),this.LB._H=void 0,await this.mH.vH(this.LB),this.rO.gn(),this.hO.gn(),this.Ul.gn(),await this.hH.gn()}gH(){this.LB.yn(Mi.so,this.Ds),this.LB.yn(Mi.Uy,this.Ds),this.LB.yn(Mi.$y,this.xc),this.LB.yn(Mi.Gy,this.Ds),this.LB.yn(Mi.By,this.Ds),this.LB.yn(Mi.qy,this.Ds),this.LB.yn(Mi.zy,this.pH),this.LB.yn(Mi.xy,this.Ds),this.LB.yn(Mi.Hy,this.Ds),this.LB.yn(Mi.eb,this.Ds),this.LB.yn(Mi.Sy,this.Ds),this.LB.yn(Mi.Xy,this.wH),this.LB.yn(Zc.BL,this.WB),this.LB.yn(sn.ua,this.yH),this.LB.yn(Mi.wy,this.Ds),this.LB.yn(Mi.py,this.bH),this.LB.XG.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.AH)}dH(){this.LB.fn(Mi.so,this.Ds),this.LB.fn(Mi.Uy,this.Ds),this.LB.fn(Mi.$y,this.xc),this.LB.fn(Mi.Gy,this.Ds),this.LB.fn(Mi.By,this.Ds),this.LB.fn(Mi.qy,this.Ds),this.LB.fn(Mi.zy,this.pH),this.LB.fn(Mi.xy,this.Ds),this.LB.fn(Mi.Hy,this.Ds),this.LB.fn(Mi.eb,this.Ds),this.LB.fn(Mi.Sy,this.Ds),this.LB.fn(Mi.Xy,this.wH),this.LB.fn(Zc.BL,this.WB),this.LB.fn(sn.ua,this.yH),this.LB.fn(Mi.wy,this.Ds),this.LB.fn(Mi.py,this.bH),this.LB.XG.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.AH)}$G(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{rT:mm,SH:[{initDataTypes:[mm.yw],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}TH(){const t=this.LB.XG.audioTracks,e=this.LB.XG.videoTracks;t&&(t.addEventListener("addtrack",this.kH),t.addEventListener("removetrack",this.EH),t.addEventListener("change",this.xH)),e&&(e.addEventListener("addtrack",this.RH),e.addEventListener("removetrack",this.IH),e.addEventListener("change",this.CH))}fH(){const t=this.LB.XG.audioTracks,e=this.LB.XG.videoTracks;t&&(t.removeEventListener("addtrack",this.kH),t.removeEventListener("removetrack",this.EH),t.removeEventListener("change",this.xH)),e&&(e.removeEventListener("addtrack",this.RH),e.removeEventListener("removetrack",this.IH),e.removeEventListener("change",this.CH))}nh(t){for(let e=0;e<t.V;e++){t.aC(e).RO()}}xI(){this.LB.xI()}RI(){}PH(t,e){this.HG||(this.HG=e,this.ZG=t,this.yo(new Wa(t)))}constructor(t,e,i,s,n,r,o=new uI,h=db()){super(),this.qG=void 0,this.wc=void 0,this.HG=void 0,this.ZG=void 0,this.QG=new Qh,this.KG=new mI,this.yH=t=>{const e=t.lt,i=e.code,s=new A(vk(i),"Something went wrong during native playback.",e),n=new lk(i,s.message,e.message);this.PH(s,n)},this.xc=()=>{this.yo(new I(this.yR,this.mR))},this.pH=t=>{this.ZR||(this.GG=void 0),this.yo(t)},this.WB=t=>{this.GG=void 0},this.AH=()=>{this.yo(new xk(this.NR))},this.wH=()=>{this.cI>0&&this.hI>0&&this.yo(new P)},this.kH=t=>{const e=this.LB.XG.audioTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];bI(this.rO,i)||this.rO.tt(new Tk(i))}},this.EH=t=>{const e=[],i=this.LB.XG.audioTracks;if(i){for(const t of this.rO.oC)AI(i,t.EO)||e.push(t);for(const t of e)this.rO.it(t)}},this.xH=()=>{this.nh(this.rO)},this.RH=t=>{const e=this.LB.XG.videoTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];bI(this.hO,i)||this.hO.tt(new Ek(i))}},this.IH=t=>{const e=[],i=this.LB.XG.videoTracks;if(i){for(const t of this.hO.oC)AI(i,t.EO)||e.push(t);for(const t of e)this.hO.it(t)}},this.CH=()=>{this.nh(this.hO)},this.bH=t=>{this.yo(t),this.PH(t.errorObject,Te(t.errorObject))},this.mH=e,this.aW=i,this.Rw=h,this.LB=this.mH.DH(Io.lE),this.zG=this.LB.XG.preload,this.lH=new q(this.LB,!0),this.lH.yn(no,this.Ds),this.iH=new Gh(i,o),this.LB._H=this.iH,this.gH(),this.rO=new Nn,this.hO=new Nn,this.TH(),this.hH=new Rx(this.LB,this.aW),this.Ul=new Wu([this.LB.nt]),this.ge()}};function wI(t){var e,i;if(!(null==(e=(_I||(_I=s&&s.document&&s.document.createElement("video")),i=_I).canPlayType)?void 0:e.call(i,t.type)))return!1;if(t.useNativePlayback)return!0;const n=Z.Ka||Z.Eg;return!t.useManagedMediaSource||!n}var yI=class{nP(t,e,i,s,n,r,o){return new pI(t,e,i,s,n,r)}NH(t,e){return wI(t)}MH(t){return cT(t)}LH(){return!1}constructor(){this.BH=ti.vG}};function bI(t,e){for(const i of t.oC)if(i.EO===e)return i}function AI(t,e){for(let i=0;i<t.length;i++)if(t[i]===e)return!0;return!1}var SI=class{static OH(){return this.Lg}FH(t){this.VH.push(t)}get BH(){return this.WH.BH}nP(t,e,i,s,n,r,o){let h=this.WH.nP(t,e,i,s,n,r,o);for(const t of this.VH)h=t(h,i,s);return h}NH(t,e){return this.WH.NH(t,e)}MH(t){return this.WH.MH(t)}LH(){return!1}constructor(){this.WH=new yI,this.VH=[]}};function TI(t,e){return Om(t.BH,e.BH)}SI.Lg=new SI,r(),r();var kI=class{UH(t){this.GH.push(t),this.GH.sort(TI)}async HH(t,e){for(const i of this.GH){const s=i.NH(t,e);if(bt(s)?await s:Boolean(s))return i}}constructor(){this.GH=[]}};function O(t){RI.Lg.UH(t)}r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r();var EI,xI,_o,RI=class extends kI{ZH(t){this.XH=t}zH(){return this.XH}async qH(t,e){const i=this.XH;let s=!1;for(const n of t){const t=await this.HH(n,e);if(t){if(QS(n.contentProtection)||await t.MH(n.contentProtection))return{kc:n,t:t};n.contentProtection&&(s=!0)}const r=i.NH(n,e);if(bt(r)?await r:Boolean(r)){if(QS(n.contentProtection)||await i.MH(n.contentProtection))return{kc:n,t:i};n.contentProtection&&(s=!0)}}if(s)throw await As.Vp()?new A(Ja.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported."):new A(Ja.CONTENT_PROTECTION_NOT_SUPPORTED,"The DRM configuration is not supported by this platform.");return{kc:t[0],t:i}}constructor(...t){super(...t),this.XH=SI.OH()}};RI.Lg=new RI,r(),r();var II=class{gn(){ft(this.Vs)}constructor(t){this.Vs=s&&s.document&&s.document.createElement("div"),ya(this.Vs),t.appendChild(this.Vs)}};r(),r();var hl=function(t){return t.vG="",t.YH="none",t.jV="metadata",t.qB="auto",t}({});var CI=[sn.ua,Mi.Ty,Mi.Ey,Mi.ub,Mi.ly,Mi.Ry,Mi.Cy,Mi.Vy,Mi.Wy,Mi.Ky,Mi.Qy,Zc.PL,Zc.DL,Zc.NL,Zc.ML,Zc.QI,Zc.LL,Zc.BL,Mi.py,Mi.wy,Mi.Sy,Mi.xy,Mi.By,Mi.Oy,Mi.so,Mi.Gy,Mi.Uy,Mi.Hy,Mi.Xy,Mi.qy,Mi.zy,Mi.$y,Mi.eb,Mi.Zy,Mi.Fy,Mi.Yy],PI=class extends Je{get ht(){return this.rO}get _R(){return this.ta._R}get lt(){return this.ta.lt}get RR(){return this.ta.RR}get mR(){return this.ta.mR}set mR(t){this.ta.mR=t}get bt(){return this.KH}get yR(){return this.ta.yR}set yR(t){this.ta.yR=t}get ct(){return this.ta.ct}get kR(){return this.ta.kR}get PR(){return this.oO}get NR(){return this.ta.NR}get LR(){return this.ta.LR}get FR(){return this.ta.FR}set FR(t){this.ta.FR=t}get GR(){return this.ta.GR}get ZR(){return this.ta.ZR}get zR(){return this.ta.zR}set zR(t){this.ta.zR=t}get KR(){return this.ta.KR}get QR(){return this.zG}set QR(t){this.zG=t,this.ta&&(this.ta.QR=this.zG)}get tI(){return this.ta.tI}get iI(){return this.ta.iI}get nI(){return this.ta.nI}get nt(){return this.Ul}get hI(){return this.ta.hI}get rt(){return this.hO}get cI(){return this.ta.cI}get dI(){return this.ta.dI}set dI(t){this.ta.dI=t}get vI(){return this.ta.vI}get jG(){return this.ta.jG}bI(){this.ta.bI()}AI(){const t=this.ta.AI();bt(t)&&oh(t)}SI(){return this.ka(void 0)}yI(){}jH(){this.nO.cC=this.ta._a(),this.rO.cC=this.ta.ht,this.hO.cC=this.ta.rt,this.Ul.cC=this.ta.nt,this.oO.cC=this.ta.PR,this.ta.yn(CI,this.Ds)}QH(){this.ta.fn(CI,this.Ds),this.rO.cC=void 0,this.hO.cC=void 0,this.Ul.cC=void 0,this.oO.cC=void 0}Ya(){return this.JH}async ka(t,e){if(ot(e),this.JH=t,!t)return;const i=t.sources.filter(zT);if(Bn(i))return;const s=await this.$H.qH(i,t);ot(e);const n=s.kc,r=s.t,o=this.pI(),h=ek(this);(this.tZ!==r||this.lt)&&(this.QH(),await this.ta.gn(),ot(e),this.tZ=r,this.ta=this.eZ(r,n),function(t,e){t.FR!==e.FR&&(t.FR=e.FR);t.dI!==e.dI&&(t.dI=e.dI);t.zR!==e.zR&&(t.zR=e.zR)}(this.ta,h),Kc(this,h,this),this.jH()),this.ta.QR=this.QR,this.iZ?this.ta.ge():this.ta.be(),await this.ta.ka(n,t,e),ot(e),this.sZ(n),this.pI()!==o&&this.yo(new Li)}sZ(t){this.KH!==t&&(this.KH=t,this.yo(new nk(t)))}TI(){return this.ta.TI()}kI(){this.ta.kI()}EI(){this.ta.EI()}pI(){return this.ta.pI()}_a(){return this.nO}xI(){this.ta.xI()}RI(){this.ta.RI()}DI(t){return this.ta.DI(t)}async tr(){this.JH=void 0,this.sZ(void 0),await this.ta.tr()}async gn(){this.Bo(),await this.tr(),await this.ta.gn(),this.rO.gn(),this.hO.gn(),this.Ul.gn(),this.nO.gn(),this.oO.gn()}ge(){this.iZ=!0,this.ta.ge()}be(){this.iZ=!1,this.ta.be()}constructor(t,e){super(),this.tZ=void 0,this.KH=void 0,this.zG=hl.YH,this.JH=void 0,this.iZ=!0,this.rO=new Xh,this.hO=new Xh,this.Ul=new ut,this.oO=new Dc,this.$H=t,this.ta=e,this.ta.QR=this.QR,this.nO=new Oh(e._a()),this.jH()}};r(),r(),r(),r();var ys=function(t){return t.aa="fullscreenchange",t.fa="fullscreensupportchange",t.ua="fullscreenerror",t}({});r();var DI=class extends pe{constructor(){super(ys.ua)}},N=(ys.aa,ys.fa,ys.ua,class extends Bo{get cs(){return!1}get ea(){return!1}co(){this.yo(new DI)}bo(){}gn(){this.Bo()}});r(),r();var ma=class extends pe{constructor(){super(Me.ua)}},NI=class extends Bo{get sO(){return!1}get iO(){return!1}async co(){this.yo(new ma)}async bo(){this.yo(new ma)}gn(){this.Bo()}},MI=class extends Bo{get mR(){}set mR(t){}get bt(){}get yR(){return this.nZ}set yR(t){this.AR(t)}AR(t,e){this.nZ!==t&&(this.nZ=t,this.rZ=!0,this.yo(new _t(this.yR)))}get LR(){return{uO:0,cO:0,lO:0,dO:0,fO:0,_O:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get FR(){return this.oZ}set FR(t){this.oZ!==t&&(this.oZ=t,this.yo(new eh(this.yR,this.dI)))}get ZR(){return this.hZ}get zR(){return this.aZ}set zR(t){this.aZ!==t&&(this.aZ=t,this.yo(new Nu(this.yR,this.zR)))}get nI(){return this.rZ}get dI(){return this.UA}set dI(t){this.UA!==t&&(this.UA=t,this.yo(new eh(this.yR,this.dI)))}get gI(){return!1}set gI(t){}get jG(){return this.QG}get ZB(){}ge(){}be(){}AI(){this.hZ&&(this.hZ=!1,this.yo(new Xt(this.yR)),this.yo(new Za(this.yR)))}bI(){this.hZ||(this.hZ=!0,this.yo(new I(this.yR,this.mR)),this.yo(new vl(this.yR)))}ka(t,e){return Promise.resolve()}TI(){return!1}kI(){}EI(){}pI(){return this.Zo}_a(){return this.Qo}DI(t){throw new g("Adding a CustomTextTrack is not supported without setting a source.")}xI(){}RI(){}async tr(){this.nZ=0,this.rZ=!1,this.bI(),this.yo(new Ks(this.nZ))}async gn(){this.Bo(),this.ht.gn(),this.nt.gn(),this.rt.gn()}constructor(...t){super(...t),this.nZ=0,this.oZ=!1,this.hZ=!0,this.aZ=1,this.rZ=!1,this.UA=1,this.ht=new Nn,this._R=ee.fB().ks(),this.ct=NaN,this.kR=!1,this.lt=void 0,this.RR=void 0,this.PR=void 0,this.NR=!1,this.GR=!0,this.KR=ee.fB().ks(),this.QR=hl.YH,this.tI=gs.jB,this.iI=ee.fB().ks(),this.YG=void 0,this.nt=new ha,this.hI=0,this.rt=new Nn,this.cI=0,this.vI=new mI,this.QG=new Qh,this.Zo=new N,this.Qo=new NI}},LI=class extends MI{set uZ(t){this.mH=t,this.LB=t.DH(Io.lE)}wI(){var t;return null==(t=this.LB)?void 0:t.XG}async gn(){await super.gn(),this.LB&&(await this.mH.vH(this.LB),this.LB=void 0)}constructor(...t){super(...t),this.mH=void 0,this.LB=void 0}},BI=class extends PI{get we(){return this.ku}get gI(){return this.ta.gI}set gI(t){this.ta.gI=t}yI(){super.yI(),this.lZ.cZ()}ur(t){ik(this,t)}ar(){}II(t){return!1}async ka(t,e){const i=this.pI(),s=this.wI();await super.ka(t,e),this.pI()!==i&&this.yo(new Li),this.wI()!==s&&this.yo(new rk)}AR(t,e){this.ta.AR(t,e)}eZ(t,e){return t.nP(this.ku,this.lZ,this.aW,this.IT,this.dZ,this.fZ,this._Z,e)}wI(){return this.ta.wI()}fR(){return this.lZ.vZ.map((t=>t.XG))}async gn(){await super.gn(),this.lZ.gn(),this.mZ.gn()}constructor(t,e,i,s,n,r,o){const h=new LI;super(RI.Lg,h),this.ku=t,this.IT=e,this.aW=i,this.dZ=s,this.fZ=n,this._Z=o,this.lZ=new EI(r,this._Z),this.lZ.gZ(this.ku),h.uZ=this.lZ,this.mZ=new II(this.ku)}};r(),r();var OI=class extends Je{get ht(){return this.pZ}get _R(){return ee.fB().ks()}get mR(){return new Date(NaN)}set mR(t){}get bt(){}get yR(){return 0}set yR(t){}AR(t,e){}get ct(){return 0}get we(){return this.ku}get kR(){return!0}get lt(){return this.wZ}get RR(){return this.yZ}get PR(){}get LR(){return{uO:0,cO:0,lO:0,dO:0,fO:0,_O:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get FR(){return!1}set FR(t){}get GR(){return!0}get ZR(){return!0}get zR(){return 0}set zR(t){}get KR(){return ee.fB().ks()}get QR(){return hl.YH}set QR(t){}get tI(){return gs.jB}get iI(){return ee.fB().ks()}get nI(){return!1}get nt(){return this.bZ}get hI(){return 0}get rt(){return this.pZ}get cI(){return 0}get dI(){return 1}set dI(t){}get vI(){return this.KG}get gI(){return!1}set gI(t){}II(t){return!0}be(){}AI(){throw this.yo(new Wa(this.yZ)),this.wZ}bI(){}Ya(){}async ka(t,e){throw ot(e),this.yo(new Wa(this.yZ)),this.wZ}ge(){}SI(){return Promise.resolve()}wI(){}pI(){return this.Zo}_a(){return this.Qo}fR(){return[]}yI(){}ur(t){}ar(){}get NR(){return!1}TI(){return!1}kI(){}EI(){}xI(){}RI(){}DI(t){}tr(){return Promise.resolve()}gn(){return this.Bo(),this.pZ.gn(),this.bZ.gn(),Promise.resolve()}constructor(t,e,i){super(),this.Zo=new N,this.Qo=new NI,this.KG=new mI,this.ku=t,this.wZ=e,this.pZ=new Nn,this.bZ=new ha,this.yZ=i}};function FI(t){if(t&&V(t))return la({},t,{integration:VI(t.integration),fairplay:XI(t.fairplay),widevine:WI(t.widevine),playready:UI(t.playready),clearkey:zI(t.clearkey),aes128:qI(t.aes128),integrationParameters:YI(t.integrationParameters),preferredKeySystems:KI(t.preferredKeySystems),useOipfDrmAgent:Fh(t.useOipfDrmAgent)})}function VI(t){if(Kt(t))return t}function WI(t){if(t&&V(t))return{persistentState:GI(t.persistentState),distinctiveIdentifier:GI(t.distinctiveIdentifier),audioRobustness:HI(t.audioRobustness),videoRobustness:HI(t.videoRobustness),licenseAcquisitionURL:Kt(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:ZI(t.licenseType),headers:t.headers,useCredentials:!!yd(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:Kt(t.certificate)||Jg(t.certificate)?t.certificate:void 0}}function UI(t){if(!t)return;const e=WI(t);if(!e)return;return la({},e,{customData:Kt(t.customData)?t.customData:void 0})}function GI(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function HI(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function ZI(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function XI(t){if(!t)return;const e=WI(t);if(!e)return;return la({},e,{certificateURL:Kt(t.certificateURL)?t.certificateURL:void 0})}function zI(t){if(!t)return;const e=WI(t);if(!e)return;const i=rl(t.keys)?t.keys.map((t=>function(t){if(!t||!V(t))return;const e=t.id,i=t.value;if(!Kt(e)||!Kt(i))return;return{id:e,value:i}}(t))).filter(ne):void 0;return la({},e,{keys:i})}function qI(t){if(V(t))return{useCredentials:yd(t.useCredentials)?t.useCredentials:void 0}}function YI(t){if(V(t))return t}function KI(t){return t&&rl(t)?t.map((t=>aT(t))).filter(ne):[hm,rm,Ve]}r(),r(),r(),r();var jI={bt:void 0,yR:0,ct:NaN,kR:!1,lt:void 0,RR:void 0,FR:!1,ZR:!0,zR:1,tI:gs.jB,nI:!1,hI:0,cI:0,dI:1};r();var gu=function(t){return t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads",t.UPLYNK="uplynk",t}({}),Ih=class{get AZ(){return this.SZ}TZ(t){const e=this.SZ.filter((e=>e.kZ(t)));if(e.length>1)0;else if(0===e.length)throw g("Unknown ad integration: "+t.integration);return e[0]||null}EZ(t){this.SZ.push(t)}constructor(){this.SZ=[]}};Ih.Lg=new Ih,r(),r(),r(),r();var Ae=function(t){return t.BL="PLAYING",t.xZ="PAUSED",t.RZ="SEEK",t.IZ="STALLED",t.CZ="FAILED",t.PZ="INITIAL_BUFFERING",t.DZ="NO_ACCESS",t}({}),ra=function(t){return t.NZ="HTTP_REQUEST_STATUS_CODE_1XX",t.MZ="HTTP_REQUEST_STATUS_CODE_2XX",t.LZ="HTTP_REQUEST_STATUS_CODE_3XX",t.BZ="HTTP_REQUEST_STATUS_CODE_4XX",t.OZ="HTTP_REQUEST_STATUS_CODE_5XX",t.FZ="BUFFER_LENGTH",t.VZ="BYTES_RECEIVED",t.WZ="SEGMENT_READ_BITRATE",t.UZ="SEGMENT_PROFILE_BITRATE",t.GZ="VIDEO_PROFILE_BITRATE",t.HZ="NUMBER_OF_FRAMES_DROPPED",t.ZZ="PLAYBACK_POSITION",t.XZ="NUMBER_OF_FRAMES_DECODED",t.zZ="PLAYBACK_DELTA_TO_ORIGIN",t.qZ="STREAM_DELTA_TO_ORIGIN",t.YZ="ORIGIN_TIMESTAMP",t}({}),QI=function(t){return t.KZ="MANIFEST_URI",t.jZ="ASSET_DURATION",t.QZ="NUMBER_OF_CONTENT_PROFILES",t.JZ="CDN",t.$Z="CONTENT_TITLE",t.tX="SERVICE_NAME",t.eX="CONTENT_TYPE",t.iX="CONTENT_DESCRIPTION",t}({}),JI=function(t){return t.sX="shutdown_normal_shutdown",t}({}),$I=function(t){return t.nX="session/",t.rX="content/",t.oX="internalError/",t.hX="drmError/",t.aX="caError/",t.uX="networkError/",t}({}),tC=class{get code(){return this.category+this.statusCode}constructor(t,e){this.category=t,this.statusCode=e}},eC=class extends Bo{};r(),r(),r();var iC=function(t){return t.PAUSE="cX",t.RESUME="lX",t}({}),sC=class extends pe{constructor(){super("dX")}},Qi=class extends Bo{fX(){this._X=!0}vX(){}gn(){this._X=!1,this.mX.fn(iC.PAUSE,this.gX),this.mX.fn(iC.RESUME,this.pX)}wX(){return isFinite(this.ta._d())}constructor(t,e){super(),this.ta=t,this.mX=e,this._X=!1,this.gX=()=>{this.vX(),this._X=!1},this.pX=()=>{this._X=!0},this.mX.yn(iC.PAUSE,this.gX),this.mX.yn(iC.RESUME,this.pX)}},nC=class extends Qi{fX(){super.fX(),this.yX()}gn(){this.bX(),super.gn()}yX(){this.ta.yn(Zc.LL,this.AX),this.ta.yn(Mi.Uy,this.SX),this.ta.yn(Zc.BL,this.TX),this.ta.yn(Mi.qy,this.kX),this.ta.yn(Mi.zy,this.EX)}bX(){this.ta.fn(Zc.LL,this.AX),this.ta.fn(Mi.Uy,this.SX),this.ta.fn(Zc.BL,this.TX),this.ta.fn(Mi.qy,this.kX),this.ta.fn(Mi.zy,this.EX)}xX(){this.RX=!0}IX(){const t=this.ta.xR(),e=new tC($I.oX,String(t.code));this.CX(Ae.CZ,e,t.message)}PX(t){this._X&&(this.mX.DX(t),this.yo(new sC))}CX(t,e,i){this.mX.NX(t,e,i),this.yo(new sC)}MX(t,e){this.mX.LX(t,e)}constructor(...t){super(...t),this.RX=!1,this.BX=!1,this.OX=!1,this.AX=()=>{this.BX&&!this.OX&&this.PX(Ae.IZ)},this.TX=()=>{this.ta.ZR||(this.BX||this.MX(new tC($I.rX,"firstFrameDisplayed"),"now"),this.BX=!0,this.PX(Ae.BL))},this.SX=()=>{this.ta.ZR&&(this.BX=!0,this.PX(Ae.xZ))},this.kX=()=>{this.RX&&(this.OX=!0,this.RX=!1,this.PX(Ae.RZ))},this.EX=()=>{this.OX=!1,this.ta.ZR&&this.PX(Ae.xZ)}}};r();var rC=class extends Qi{fX(){super.fX(),this.FX(),this.yX()}gn(){this.bX(),super.gn()}yX(){this.ta.rt.yn(Eo.aa,this.FX),this.ta.WX.VX(this.UX),this.ta.yn(Mi.Sy,this.GX)}bX(){this.ta.rt.fn(Eo.aa,this.FX),this.ta.WX.HX(this.UX),this.ta.fn(Mi.Sy,this.GX)}ZX(t){t.serviceName&&this.XX(QI.tX,t.serviceName),t.cdn&&this.XX(QI.JZ,t.cdn),t.contentTitle&&this.XX(QI.$Z,t.contentTitle),t.contentType&&this.XX(QI.eX,t.contentType),t.contentDescription&&this.XX(QI.iX,t.contentDescription)}XX(t,e){this._X&&this.mX.zX(t,e)}constructor(...t){super(...t),this.GX=()=>{this.wX()&&this.XX(QI.jZ,_.round(this.ta._d()))},this.UX=t=>{"manifest"===t.request.type&&this.XX(QI.KZ,t.url)},this.FX=()=>{const t=Ti(this.ta.rt.oC,(t=>t.Rt));t&&this.XX(QI.QZ,t.EC.V)}}};r();var oC=class extends Qi{fX(){super.fX(),this.qX=this.ta.LR.uO,this.YX=this.ta.LR.lO,this.yX(),this.KX.push(p(this.jX,1e3))}vX(){super.vX(),this.QX()}gn(){this.QX(),this.bX(),this.KX.forEach(m),Pn(this.KX),super.gn()}yX(){this.ta.WX.VX(this.JX),this.ta.yn(Mi.Qy,this.$X)}bX(){this.ta.WX.HX(this.JX),this.ta.fn(Mi.Qy,this.$X)}tz(){this.QX()}ez(t){this.iz+=t,this.nz(ra.VZ,this.iz)}rz(t,e){const i=this.oz.get(e)||0;this.nz(t,i)}cz(){const t=this.ta.LR.uO-this.qX;this.nz(ra.HZ,t)}lz(){const t=this.ta.LR.lO-this.YX;this.nz(ra.XZ,t)}fz(){const t=kl.Lg.rG();this.nz(ra.WZ,ep(t))}_z(t){this.nz(ra.UZ,ep(t)),this.nz(ra.GZ,ep(t))}QX(){if(!this.wX())return;const t=_.round(Na(this.ta.bR()));this.nz(ra.ZZ,t)}vz(){const t=ee.xn(this.ta.vR()),e=this.ta.bR(),i=t.uB(e),s=i?Na(i.jn(0)-e):0;this.nz(ra.FZ,s)}nz(t,e){this._X&&this.mX.mz(t,e)}constructor(...t){super(...t),this.oz=_u(),this.iz=0,this.qX=0,this.YX=0,this.KX=[],this.jX=()=>{this.cz(),this.lz(),this.vz()},this.$X=t=>{t.bE===Io.lE&&(this.ez(t.fO),this.fz(),this._z(t.gz),this.QX())},this.JX=t=>{const e=t.status.toString()[0],i=this.oz.get(e)||0;this.oz.set(e,i+1),this.rz(ra.NZ,"1"),this.rz(ra.MZ,"2"),this.rz(ra.LZ,"3"),this.rz(ra.BZ,"4"),this.rz(ra.OZ,"5")}}};r();function hC(t){return t&&t.integration===fC}function aC(t){if(!Kt(t.asset))throw new b("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!Kt(t)&&("live"===t||"vod"===t)}(t.streamType))throw new b("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!Kt(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new b("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!Kt(t.cdn))throw new b("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!Kt(t.contentTitle))throw new b("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!Kt(t.contentType))throw new b("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!Kt(t.contentDescription))throw new b("Agama source configuration: expected 'contentDescription' to be a string");return t}function uC(t){if(!Kt(t.config))throw new b("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!Kt(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new b("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!Kt(t.application))throw new b("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!Kt(t.applicationVersion))throw new b("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!Kt(t.userAccountID))throw new b("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!Kt(t.deviceID))throw new b("Agama player configuration: expected 'deviceID' to be a string");return t}function cC(){let t="00000000-0000-0000-0000-000000000000",e=s.navigator,i=s.screen,n=""+e.mimeTypes.length;n+=e.userAgent.replace(/\D+/g,""),n+=e.plugins.length,n+=i.height||"",n+=i.width||"",n+=i.pixelDepth||"",n+=_.floor(1e3*_.random());let r=function(t){let e,i,s=0;if(0===t.length)return"0";for(e=0;e<t.length;e++)i=t.charCodeAt(e),s=(s<<5)-s+i,s|=0;return _.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function lC(t,e,i){const s=e,n=function(t,e){return qh(e)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,e){let i=t.DsPlaylistType.VOD;"live"===e&&(i=t.DsPlaylistType.LIVE);return i}(t,i.streamType);return{asset:i.asset,playlistType:r,protocol:n,uri:s.src}}r();var Tr=function(t){return t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected",t}({}),dC=class{pz(){this.ta.fn(sn.ua,this.wz),this.yz(),this.bz(),this.mX.Az()}Sz(){this.ta.Tz.ga.chromecast&&this.ta.Tz.ga.chromecast.addEventListener("statechange",this.kz)}bz(){this.ta.Tz.ga.chromecast&&this.ta.Tz.ga.chromecast.removeEventListener("statechange",this.kz)}Ez(){return void 0!==this.ta.Tz.ga.chromecast&&this.ta.Tz.ga.chromecast.state===Tr.CONNECTED}gn(){this.ta.fn(Mi.ro,this.ho),this.ta.fn(Mi.so,this.xz),this.ta.fn(Mi.xy,this.Rz),this.pz(),this.mX.gn()}Iz(){this.Cz||(this.Cz=new nC(this.ta,this.mX)),this.Pz||(this.Pz=new oC(this.ta,this.mX)),this.Dz||(this.Dz=new rC(this.ta,this.mX))}fX(){this.Cz&&(this.Cz.fX(),this.Cz.yn("dX",this.Nz)),this.Pz&&this.Pz.fX(),this.Dz&&this.Dz.fX()}yz(){this.Cz&&(this.Cz.fn("dX",this.Nz),this.Cz.gn(),this.Cz=void 0),this.Pz&&(this.Pz.gn(),this.Pz=void 0),this.Dz&&(this.Dz.gn(),this.Dz=void 0)}ZX(t){this.Dz&&this.Dz.ZX(t)}Mz(){this.Cz&&this.Cz.IX()}xX(){this.Cz&&this.Cz.xX()}constructor(t,e,i){this.ta=t,this.mX=e,this.ho=()=>{this.Lz(),this.Rz()},this.Lz=()=>{const t=this.ta.Ya(),e=t&&t.analytics;this.Bz=function(t){void 0===t&&(t=[]);for(let e of t)if(hC(e))return aC(e)}(e)},this.Rz=()=>{this.pz(),this.ta.fn(Mi.so,this.xz),!this.Ez()&&this.mX.Oz()&&this.ta.bt&&this.Bz&&(this.Iz(),this.ta.ZR||this.ta.kR?this.ta.yn(Mi.so,this.xz):this.xz())},this.xz=()=>{this.ta.bt&&this.Bz&&(this.mX.Fz(this.ta.bt,this.Bz),this.fX(),this.ZX(this.Bz),this.Sz(),this.ta.yn(sn.ua,this.wz),this.ta.fn(Mi.so,this.xz))},this.kz=()=>{this.Ez()&&this.pz()},this.wz=()=>{this.Mz(),this.pz()},this.Nz=()=>{this.Pz&&this.Pz.tz()};const s=function(t){void 0===t&&(t=[]);for(const e of t)if(hC(e))return uC(e)}(i.analytics);s&&this.mX.Vz()&&(this.mX.yI(s),this.mX.Oz()?(this.mX.Wz(),this.ta.yn(Mi.ro,this.ho),this.ta.yn(Mi.xy,this.Rz)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},fC="agama";r(),r();var bu=function(t){return t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t}({});r();var _C=function(t){return t.NONE="",t.PM360="360",t.PM180="180",t}({});function vC(t){switch(t){case"":return bu.NONE;case"horizontal":return bu.HORIZONTAL;case"vertical":return bu.VERTICAL;default:throw new b}}function mC(t,e){if(e)return _C.PM360;if(null==t)return _C.NONE;switch(t){case"":return _C.NONE;case"360":return _C.PM360;case"180":return _C.PM180;default:throw new b("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}r();var Hn=function(t){return t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event",t}({});r();var gC="https://content.uplynk.com";function pC(t){if(!t)return!0;const e=!function(t){return qc(t)||dc(t)&&qc(t[0])}(t.sources)||Bn(t.sources),i=!t.ads||wC(t.ads),s=""!==t.poster&&!t.poster;return e&&i&&s}function wC(t){return!t||rl(t)&&0===t.length}function yC(t){if(t&&t.sources)return bC(t.sources)}function bC(t){return Kt(t)?Tu(t):Cn(t)?t.type||t.src&&Tu(t.src):dc(t)&&t.length>0?bC(t[0]):void 0}function AC(t){if(t&&t.sources)return SC(t.sources)}function SC(t){return Kt(t)?t:Cn(t)?t.src:dc(t)&&t.length>0?SC(t[0]):void 0}function TC(t,e,i){return zc(t)?function(t,e,i){let s=la({},GT(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:IT.UPLYNK,id:"",prefix:gC,preplayParameters:{},playbackUrlParameters:{},assetType:Hn.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(Kt(t))return t;if(dc(t)&&Kt(t[0]))return t;if(function(t){return V(t)&&Kt(t.userId)&&(dc(t.externalId)||Kt(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return Hn.CHANNEL;case"event":return Hn.EVENT;default:return Hn.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=Fh(t.contentProtected));t.assetInfo?s.assetInfo=Fh(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=xe(t.prefix)||gC);return s.ping=function(t,e){let i=!1,s=!1,n=!1;e?(i=!!yd(e.adImpressions)&&e.adImpressions,s=!!yd(e.freeWheelVideoViews)&&e.freeWheelVideoViews,n=yd(e.linearAdData)?e.linearAdData:t!==Hn.ASSET):t!==Hn.ASSET&&(n=!0);return{adImpressions:i,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=EC(s,t),s=RC(s,e,i),s=xC(s,t,i),s}(t,e,i):FT(t)?function(t,e,i){var s;return la({},kC(t,e,i),{integration:IT.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,e,i):OT(t)?function(t,e,i){return la({},kC(t,e,i),{type:"theolive"})}(t,e,i):Vc(t)?function(t,e,i){return la({},kC(t,e,i),{type:nl.YC,src:t.src,streamAccountId:t.streamAccountId,subscriberToken:t.subscriberToken,connectOptions:PC(t.connectOptions),apiUrl:t.apiUrl})}(t,e,i):kC(t,e,i)}function kC(t,e,i){let s=HT();const n=e&&(e.contentProtection||e.drm);if(Kt(t)){if(s.src=t,s.type=Tu(t),n){const t=FI(n);s.contentProtection=lT(t)}}else if(Cn(t)||Gc(t)||Vc(t)){s.src=t.src,s.type=t.type||Tu(t.src),s.isAdvertisement=t.isAdvertisement;const e=UT(t)?t.hesp:void 0;void 0!==e&&(s.hesp=e);FT(t)&&(s.integration=t.integration);const i=FI(t.contentProtection||t.drm||n);s.contentProtection=lT(i),t.ssai&&(s.ssai=pS(t.ssai)),s=EC(s,t)}return s=RC(s,e,i),s=xC(s,t,i),s}function EC(t,e){var i,s;e.useCredentials?t.crossOrigin=_h.WC:e.crossOrigin&&(t.crossOrigin=LT(e.crossOrigin)),Kt(e.timeServer)&&(t.timeServer=e.timeServer),e.liveOffset&&(t.liveOffset=e.liveOffset),e.hlsDateRange&&(t.hlsDateRange=e.hlsDateRange),e.lowLatency&&(t.lowLatency=Fh(e.lowLatency)),e.useNativePlayback&&(t.useNativePlayback=Fh(e.useNativePlayback)),e.useManagedMediaSource&&(t.useManagedMediaSource=Fh(e.useManagedMediaSource)),e.dash&&(t.dash=dT(e.dash)),e.hls&&(t.hls=fT(e.hls)),e.lcevc&&(t.lcevc=Fh(e.lcevc)),e.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=qT(e.ignoreEmbeddedTextTrackTypes)),e.latencyConfiguration&&(t.latencyConfiguration=RT(e.latencyConfiguration)),t.seamlessSwitchStrategy=CT(null!=(s=e.seamlessSwitchStrategy)?s:null==(i=e.dash)?void 0:i.useSeamlessPeriodSwitch);const n=pi(e.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=pi(e.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function xC(t,e,i){return t.abr=gT(Kt(e)?void 0:mT(e.abr),null==i?void 0:i.abr),t}function RC(t,e,i){var s;const n=e&&e.timeServer;return i&&i.liveOffset&&!ne(t.liveOffset)&&(t.liveOffset=i.liveOffset),i&&i.hlsDateRange&&!ne(t.hlsDateRange)&&(t.hlsDateRange=i.hlsDateRange),t.crossOrigin===_h._E&&(null==e||null==(s=e.vr)?void 0:s[360])&&(t.crossOrigin=_h.VC),t.useCredentials=t.crossOrigin===_h.WC,Kt(n)&&!t.timeServer&&(t.timeServer=n),t}function IC(t){const e={src:""};if(t&&t.src){if(e.src=xe(t.src),"default"in t&&(e.default=Fh(t.default)),e.kind=function(t){const e=String(t||"").toLowerCase();return dx(e)?e:e?"metadata":"subtitles"}(t.kind),NT(t.format)&&(e.format=t.format),"srclang"in t){const i=t.srclang;"string"==typeof i&&""!==i&&(e.srclang=i)}if("label"in t){const i=t.label;"string"==typeof i&&""!==i&&(e.label=i)}}return e}function CC(t,e){if(V(t))try{return e.TZ(t).Uz(t)}catch(t){return}}function PC(t){if(null==t)return t;if(!V(t))throw new g("connectOptions must be an object");return t}function DC(t,e,i){if(void 0===i&&(i=Ih.Lg),pC(t))return{sources:[HT()]};const s=eu(t);if(s.sources=function(t,e,i){if(qc(t))return[TC(t,e,i)];if(dc(t)&&qc(t[0])){const s=[];for(const n of t)s.push(TC(n,e,i));return s}return[HT()]}(s.sources,s,e),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,e){if(!dc(t))return[];const i=[];for(let s of t)s=CC(s,e),s&&i.push(s);return i}(s.ads,i);0===t.length?delete s.ads:s.ads=t}const n=!Bn(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!dc(t))return[];const e=[];for(let i of t)i=IC(i),""!==i.src&&e.push(i);return e}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=xe(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const e=t||{};return e.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(e.stereoMode),{panoramaMode:mC(e.panoramaMode,Boolean(e[360])),stereoMode:e.stereoMode?vC(e.stereoMode):bu.NONE,nativeVR:Boolean(e.nativeVR)}}(s.vr));if("analytics"in s||(null==e?void 0:e.analytics)){const t=XT(s.analytics),i=e&&e.analytics||[];s.analytics=function(t,e){const i=eu(t);for(const s of e){const e=!t.some((t=>t.integration===s.integration));e&&s.integration!==fC&&i.push(s)}return i}(t,i)}return"mutedAutoplay"in s&&(s.mutedAutoplay=$T(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=eo(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}r(),r(),r();var Mo=function(){function t(t){this.Gz=t}return t.prototype.Zz=function(t){var e,i,s,n,r,o,h,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.Gz.charAt(64);for(e=0;e<t.length;e+=4)i=(h=this.Gz.indexOf(t.charAt(e))<<18|this.Gz.indexOf(t.charAt(e+1))<<12|(r=this.Gz.indexOf(t.charAt(e+2)))<<6|(o=this.Gz.indexOf(t.charAt(e+3))))>>>16&255,s=h>>>8&255,n=255&h,a[e/4]=String.fromCharCode(i,s,n),64===o&&(a[e/4]=String.fromCharCode(i,s)),64===r&&(a[e/4]=String.fromCharCode(i));return a.join("")},t.prototype.Xz=function(t,e){var i,s,n,r,o,h,a,u=[],c="";if((h=t.length%3)>0)for(;h++<3;)c+=this.Gz.charAt(64),t+="\0";for(h=0;h<t.length;h+=3)s=(i=t.charCodeAt(h)<<16|t.charCodeAt(h+1)<<8|t.charCodeAt(h+2))>>18&63,n=i>>12&63,r=i>>6&63,o=63&i,u[h/3]=this.Gz.charAt(s)+this.Gz.charAt(n)+this.Gz.charAt(r)+this.Gz.charAt(o);return a=(a=u.join("")).slice(0,a.length-c.length),e||(a+=c),a},t.lh=new t(function(){var t,e,i,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(e=r[t],i=0;i<e.length;i+=1)s=e.charAt(i),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.zz=new t(function(t){return t.Zz("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.lh)),t}();function NC(t){return"string"==typeof t}function MC(t){return"number"==typeof t}r(),r(),r();var LC={}.toString;var de,BC=Array.isArray||function(t){return"[object Array]"===LC.call(t)};function OC(t,e){return BC(t)&&t.every(e)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(de||(de={}));var FC,VC=w.keys(de).map((function(t){return de[t]}));function WC(t){return-1!==VC.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads",t.MILLICAST="millicast"}(FC||(FC={}));var UC,GC=w.keys(FC).map((function(t){return FC[t]}));function HC(t){return-1!==GC.indexOf(t)}function ZC(t){try{var e=Mo.zz.Zz(t),i=JSON.parse(e);if(!function(t,e){var i,s=function(t){return"object"==typeof t&&null!==t}(t),n=NC(t.key),r=NC(t.customer_id),o=MC(t.generation_date),h=MC(t.expiration_date),a=OC(t.domains_page,NC),u=OC(t.domains_source,NC),c=OC(t.sdks,e?WC:NC),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?i=OC(t.features,e?HC:NC):(i=!0,t.features=[]);if(!(s&&n&&r&&o&&h&&a&&u&&c&&l&&i))return!1;return!0}(i,!1))throw new g("The provided license could not be decoded correctly.");return i}catch(t){throw new g("The provided license could not be decoded correctly.")}}function XC(){return UC||(UC={qu:s.location.href,qz:s.parent&&s.parent!==s,Yz:qC()}),UC}var zC=["http:","https:","ftp:","ws:","wss:"];function qC(){var t,e;try{var i;if(null==(i=s)?void 0:i.top)return s.top.location.href}catch(t){}return null==(e=s)||null==(t=e.document)?void 0:t.referrer}var Ri=function(t){return t[t.Kz=0]="Kz",t[t.jz=1]="jz",t[t.Qz=2]="Qz",t}({}),YC=class{constructor(t,e,i,s,n=[],r="",o=Date.now(),h=[],a=!0){this.Jz=t,this.$z=e,this.tq=i,this.iq=s,this.nq=n,this.rq=r,this.oq=o,this.hq=h,this.aq=a}},KC=function(t){return t.jz="expired",t.uq="invaliddomain",t.cq="invalidsource",t.lq="invalidfeature",t.ua="error",t}({}),jC=class t{dq(t,e){let i=[];qc(t.sources)?i=[t.sources]:dc(t.sources)&&(i=t.sources),this.fq(t,i,e),this._q(i,e)}fq(t,e,i){if(pC(t)||0===i.tq.length||iP(i.tq))return;if(!e.every((t=>this.vq(t,i)))){const t="invalidsource",e=oP.mq(t);throw new A(JC(t),e)}}_q(t,e){for(const i of t)Cn(i)&&UT(i)&&!i.bypassLicense&&this.gq([FC.HESP],e)}pq(e){return this.wq(e.hq)&&this.yq(e)?t.bq(e.iq)?0:1:2}gq(t,e){for(const i of t)if(!qt(e.nq,i)){const t="invalidfeature",e=oP.Aq(t,i);throw new A(JC(t),e)}}wq(t){return 0===t.length||t.some((t=>this.Sq(t)))}Sq(t){return"web"===function(t){switch(t){case de.ANDROID:return Jt.bv;case de.ANDROIDTV:case de.FIRETV:return Jt.Av;case de.IOS:return Jt.Sv;case de.TVOS:return Jt.Tv;case de.CHROMECAST:case de.CHROMECASTCAF:return Jt.Ev;case de.THEOLIVEWEB:return Jt.xv;default:return Jt.yv}}(t)}static bq(t){const e=Number(new Date);return!!t&&e<=t}yq(t){return!(this.Tq&&0!==t.$z.length&&!iP(t.$z))||!!(this.Tq&&this.kq(t.$z)&&this.Eq(t.$z))}kq(t){return sP(this.AA.qu,t)}Eq(t){if(!this.AA.qz)return!0;if(this.xq)return!0;const e=this.Rq();return!!e&&sP(e,t)}Rq(){if(!this.AA.qz)return;const t=Nl.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.AA.Yz?this.AA.Yz:void 0}vq(e,i){return!!t.Iq(e,i.tq)}static Iq(t,e){return sP(this.Cq(t),e)}static Cq(t){return Kt(t)?t:Cn(t)&&t.src||""}constructor(t,e,i){this.xq=t,this.Pq=e,this.AA=i,this.Tq=rP(this.AA)}},QC=class{pq(t){return 0}dq(t,e){}gq(t,e){}};function JC(t){switch(t){case"invaliddomain":return Ja.LICENSE_INVALID_DOMAIN;case"invalidsource":return Ja.LICENSE_INVALID_SOURCE;case"expired":return Ja.LICENSE_EXPIRED;case"invalidfeature":return Ja.LICENSE_INVALID_FEATURE;case"error":return Ja.LICENSE_ERROR}}var $C="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",tP=gl((()=>{const t="\\.",e="(\\*|"+$C+")";return new RegExp("ip-range\\("+e+t+e+t+e+t+e+"\\)")}));function eP(t,e){let i=t,s=e;if(!i)return!1;if(s=s.trim(),"*"===s)return!0;if(i=i.replace(/\.+$/,""),s===i)return!0;if(Cl(s,"ip-range(")){const t="\\.",e=s.match(tP()),n=t=>"*"===t?"("+$C+")":t;if(null!==e&&5===e.length){const s=new RegExp("^"+e[1]+t+n(e[2])+t+n(e[3])+t+n(e[4])+"$");return null!==i.match(s)}}return s="."+s,-1!==i.indexOf(s,i.length-s.length)}function iP(t){return t.some((t=>"*"===t))}function sP(t,e){const i=As.Ah(t);if(!nP(i))return!0;for(const s of e){if(eP(i.hostname,s))return!0;if(eP(Kb(t),s))return!0}return!1}function nP(t){return-1!==zC.indexOf(t.protocol)}function rP(t){const e=As.Ah(t.qu);return nP(e)&&!function(t){return eP(t.hostname,"localhost")}(e)&&!function(t){return eP(t.hostname,"theoplayer.doubleclick.net")}(e)}var oP=class{static Aq(t,e){return"The requested feature '"+e+"' is not available with the license for this player."}static mq(t){return"invaliddomain"===t?this.Dq:"invalidsource"===t?this.Nq:"expired"===t?this.Mq:"invalidfeature"===t?this.Lq:this.Bq}};oP.Bq="The license for this player is invalid.",oP.Mq="The usage license for this video player has expired.",oP.Dq="The current domain is incompatible with the license for this player.",oP.Nq="The provided video source is incompatible with the license for this player.",oP.Lq="The requested feature is not available with the license for this player.",r(),r();var kh=function(t){return t[t.Oq=1]="Oq",t[t.Fq=4]="Fq",t[t.Vq=5]="Vq",t[t.Wq=9]="Wq",t}({});function hP(t){const e=[t.JM,t.Uq,t.Gq];switch(t.Uq){case 1:e.push(t.MC);break;case 4:e.push(t.yR),e.push(t.lt);break;case 5:e.push(t.lt);break;case 9:e.push(t.pw)}return e}r();var Tt=new Array(256);for(let t=0;t<256;t+=1)Tt[t]=(t<16?"0":"")+t.toString(16);function aP(){const t=Fa(),e=(4294967296*_.random()|0)+t&3029421624,i=(4294967296*_.random()|0)+t&3595553209,s=(4294967296*_.random()|0)+t&1130486254,n=(4294967296*_.random()|0)+t&1284287105;return Tt[255&e]+Tt[e>>>8&255]+Tt[e>>>16&255]+Tt[e>>>24&255]+"-"+Tt[255&i]+Tt[i>>>8&255]+"-"+Tt[i>>>16&15|64]+Tt[i>>>24&255]+"-"+Tt[63&s|128]+Tt[s>>>8&255]+"-"+Tt[s>>>16&255]+Tt[s>>>24&255]+Tt[255&n]+Tt[n>>>8&255]+Tt[n>>>16&255]+Tt[n>>>24&255]}function uP(t){return tp(t.replace(/-/g,""))}function cP(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*_.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function lP(){return As.Bg()}r(),r(),r();var dP,fP="theoplayer-session-id";function _P(){if(!dP){const t=_b.Cb(fP);t?dP=t:(dP=aP(),_b.Pb(fP,dP))}return dP}r(),r();var vP=/[^\x00-\x7E]/g;function mP(t){return"\\u"+Uo(t.charCodeAt(0).toString(16),4,"0")}var gP="https://license.theoplayer.com";function pP(t){const e=function(t){const e=[];return function(t,e,i){return JSON.stringify(t,e,i).replace(vP,mP)}(t,((t,i)=>{if(V(i)){if(-1!==e.indexOf(i))return null;e.push(i)}return i}))}(function(t){return[t.Hq,t.zS,t.Jz,t.XD,t.Zq,t.Xq,t.zq.map(hP)]}(t));return Mo.zz.Xz(e)}var wP=class{get zq(){return this.Xf}qq(){return Boolean(this.Zq)}get Zq(){return this.Yq}async Kq(t){if(!(await this.Qq.jq()).aq)return;const e={Uq:kh.Oq,Gq:Fa(),MC:t};await this.MX(e)}async Jq(t){if(!(await this.Qq.jq()).aq)return;const e={Uq:kh.Wq,Gq:Fa(),pw:t};await this.MX(e)}async $q(t,e){const i={Uq:kh.Fq,Gq:Fa(),yR:e,lt:t};await this.MX(i)}async tY(t){const e={Uq:kh.Vq,Gq:Fa(),lt:t};await this.MX(e)}async MX(t){const e=await this.Qq.jq();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.eY.Xz(e.Jz)&&t.Uq!==kh.Vq||(t.Uq===kh.Oq?this.iY():this.qq()||this.iY(),t.JM=this.$A++,this.Xf.push(t),!function(t){return t===kh.Oq||t===kh.Vq}(t.Uq)?this.Xf.length>this.sY&&await this.nY():await this.rY())}async rY(t){for(void 0===t&&(t=!1);this.Xf.length>0;)await this.nY(t)}async oY(t){const e=await this.Qq.jq();return{Hq:Fa(),zS:_P(),Jz:this.eY.Xz(e.Jz)||"dev",XD:this.TS,Zq:this.Yq,Xq:this.hY,zq:t}}async nY(t){void 0===t&&(t=!1);const e=this.Xf.splice(0,this.aY),i=await this.oY(e);t?this.xE(i):this.uY(i),this.cY=lP()}async uY(t){const e=pP(t),i=new Fe({qu:gP,Ck:e,AE:!1,Xk:$r.wk,qk:{"Content-Type":cu.SU},pE:4e3,gE:So.POST});try{const t=await this.aW.zk(i);await t.xk()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+e}}xE(t){const e=pP(t);this.aW.xE({qu:gP,Ck:e,Ik:cu.SU})}iY(){this.qq()&&this.rY(),this.Yq=aP(),this.$A=0}gn(){_o.lY(this.dY),m(this.fY),this.rY()}constructor(t,e,i,s=Mo.lh,n=0,r=1){this.TS=t,this.aW=e,this.Qq=i,this.eY=s,this.sY=n,this.aY=r,this.Xf=[],this.Yq=null,this.cY=0,this.hY="unknown",this.$A=0,this._Y=()=>{lP()-this.cY>6e4&&this.rY()},this.dY=()=>{this.rY(!0)},_o.vY(this.dY),this.fY=p(this._Y,6e4)}};r(),r(),r();var yP=0;var bP=v,st=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,ao=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;st&&ao||(st=function(t){const e=lP(),i=_.max(0,16-(e-yP)),s=u((()=>t(e+i)),i);return yP=e+i,s},ao=bP),st=st.bind(self),ao=ao.bind(self);var AP=Z.Wm||Z.Ka&&Z.Jm<13;function SP(t,e,i){const s=t.getImageData(e,i,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var TP=class{get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{drawImage(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return t.mY(e,...s)},texImage2D:(e,i,s,n,r,o)=>t.gY(e,i,s,n,r,o),requestVideoFrameCallback:e=>t.pY(e),cancelVideoFrameCallback:e=>t.wY(e)}}(this)}mY(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const n=this.yY;return void 0!==n&&(t.drawImage(n,...i),!0)}gY(t,e,i,s,n,r){let o=this.yY;return void 0!==o&&(AP&&(o=this.bY(o)),t.texImage2D(e,i,s,n,r,o),!0)}pY(t){const e=this.AY++,i=this.SY(t,e);return this.TY.set(e,{kY:t,EY:i}),e}wY(t){const e=this.TY.get(t);void 0!==e&&(this.TY.delete(t),e.EY())}SY(t,e){const i=this.yY;if(void 0===i)return Bt;if(i instanceof HTMLVideoElement&&i.requestVideoFrameCallback){const s=i.requestVideoFrameCallback(((i,s)=>{this.TY.delete(e),t(i,s)}));return()=>i.cancelVideoFrameCallback(s)}{let i;const s=n=>{this.xY()?(this.TY.delete(e),this.RY=!1,t(n,void 0)):i=st(s)};return i=st(s),()=>ao(i)}}xY(){return(!this.t.ZR||this.RY)&&!this.t.nI&&this.t.tI>=gs.QB}bY(t){let e=this.IY;void 0===e&&(e=h.createElement("canvas"),this.IY=e);const i=e.getContext("2d"),s=this.t,n=s.cI,r=s.hI,o=e.width,a=e.height;i.clearRect(0,0,e.width,e.height),o===n&&a===r||(e.width=n,e.height=r),i.drawImage(t,0,0,n,r);let u=!1;return n>0&&SP(i,n-1,0)&&(e.width=o,u=!0),r>0&&SP(i,0,r-1)&&(e.height=a,u=!0),u&&i.drawImage(t,0,0,n,r),e}gn(){this.TY.forEach((t=>t.EY())),this.TY.clear(),this.t.fn(Mi.Cy,this.CY),this.t.fn(Mi.zy,this.PY),this.yY=void 0,this.IY=void 0}constructor(t){this.yY=void 0,this.Za=void 0,this.IY=void 0,this.TY=$h(),this.AY=1,this.RY=!0,this.PY=()=>{this.RY=!0},this.CY=()=>{this.yY=this.t.wI(),this.TY.forEach(((t,e)=>{t.EY(),t.EY=this.SY(t.kY,e)}))},this.t=t,this.t.yn(Mi.Cy,this.CY),this.t.yn(Mi.zy,this.PY),this.CY()}};r(),r(),r();var Ya=function(t){return t.pn="dimensionchange",t}({}),kP=class extends pe{constructor(t,e){super(Ya.pn),this.width=t,this.height=e}};r(),r();var EP,xP=class{constructor(t,e){this.we=t,this.kY=e}},RP=class extends xP{get Tu(){return this.DY}get Su(){return this.NY}gn(){this.MY.disconnect()}constructor(t,e){super(t,e),this.DY=0,this.NY=0,this.LY=t=>{if(t.length>0){const e=t[t.length-1].contentRect;this.NY=e.width,this.DY=e.height,this.kY(this.NY,this.DY)}},this.MY=new s.ResizeObserver(this.LY),this.MY.observe(this.we)}};r(),r();var IP=["Webkit","Moz","O","ms"],CP=(()=>{let t=!1;try{if(void 0!==s&&"function"==typeof s.addEventListener){const e=w.defineProperty({},"passive",{get(){t=!0}});s.addEventListener("testPassiveEventSupport",Bt,e),s.removeEventListener("testPassiveEventSupport",Bt,e)}}catch(t){}return t})(),PP=_u();function DP(t){return PP.has(t)||PP.set(t,function(t){const e=(EP||(EP=s&&s.document&&s.document.createElement("span")),EP);if(!e||!e.style)return t;if(void 0!==e.style[t])return t;const i=t.charAt(0).toUpperCase()+t.slice(1);for(const t of IP){const s=t+i;if(void 0!==e.style[s])return s}return t}(t)),PP.get(t)}function NP(t){const e=t.style;e.position="absolute",e.left="0",e.right="0",e.bottom="0",e.top="0",e.overflow="scroll",e.zIndex="-1",e.visibility="hidden"}function MP(t){const e=t.style;e.position="absolute",e.left="0",e.top="0",e[DP("transition")]="0s"}var LP=class extends xP{gn(){ao(this.BY),this.BY=0,this.OY.removeEventListener("scroll",this.FY),this.VY.removeEventListener("scroll",this.FY),ft(this.WY),s&&s.removeEventListener("resize",this.UY)}get Tu(){return this.we.getBoundingClientRect().height||this.DY||0}get Su(){return this.we.getBoundingClientRect().width||this.NY||0}constructor(t,e,i){super(t,e),this.BY=0,this.NY=NaN,this.DY=NaN,this.GY=void 0,this.tr=()=>{const t=1e5;this.HY.style.width=t+"px",this.HY.style.height=t+"px",this.OY.scrollLeft=t,this.OY.scrollTop=t,this.VY.scrollLeft=t,this.VY.scrollTop=t,0===this.VY.scrollTop&&st(this.tr)},this.ZY=()=>{const t=this.Su,e=this.Tu;this.kY(t,e),this.NY=t,this.DY=e,this.tr(),this.BY=0},this.FY=()=>{if(this.BY)return;const t=this.Su,e=this.Tu;t===this.NY&&e===this.DY||(this.BY=st(this.ZY))},this.UY=()=>{this.GY||(this.GY=u(this.XY,66))},this.XY=()=>{this.GY=void 0,this.zY()},this.zY=()=>{this.FY()};const n=function(t,e){return s.getComputedStyle(t,void 0).getPropertyValue(e)||t.style[e]}(t,"position");i||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.WY=r,this.OY=h.createElement("div"),this.HY=h.createElement("div"),this.VY=h.createElement("div"),this.qY=h.createElement("div"),NP(this.OY),NP(this.VY),MP(this.HY),function(t){MP(t),t.style.width="200%",t.style.height="200%"}(this.qY),r.appendChild(this.OY),r.appendChild(this.VY),this.OY.appendChild(this.HY),this.VY.appendChild(this.qY),t.appendChild(r),this.OY.addEventListener("scroll",this.FY),this.VY.addEventListener("scroll",this.FY),s&&s.addEventListener("resize",this.UY),this.FY()}},BP=class extends Bo{bn(t){this.MY||("function"==typeof s.ResizeObserver?this.MY=new RP(this.we,this.LY):this.MY=new LP(this.we,this.LY,t))}gn(){this.Bo(),this.MY&&(this.MY.gn(),this.MY=void 0)}get Tu(){return this.MY?this.MY.Tu:0}get Su(){return this.MY?this.MY.Su:0}constructor(t){super(),this.MY=void 0,this.LY=(t,e)=>{this.yo(new kP(t,e))},this.we=t}};r(),r();var OP=class extends pe{constructor(){super(ys.aa)}};r();var oo=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let e of t)if(e[1]in h)return{YY:e[0],Jo:e[1],KY:e[2],jY:e[3],Qe:e[4],QY:e[5]}}();r();var FP=class extends pe{constructor(){super(ys.fa)}},VP=class t extends Bo{static na(t){return Boolean(oo&&h[oo.jY]&&oo.YY in t)}co(){const t=this.we[oo.YY]();t&&t.then?t.then(this.JY,this.$Y):(h.removeEventListener(oo.QY,this.$Y),h.addEventListener(oo.QY,this.$Y))}bo(){const t=h[oo.Jo]();t&&t.then?t.then(this.JY,this.$Y):(h.removeEventListener(oo.QY,this.$Y),h.addEventListener(oo.QY,this.$Y))}tK(){const t=this.cs,e=this.we===h[oo.KY];this.cs=e,t!==e&&this.yo(new OP)}eK(){this.yo(new DI)}gn(){this.Bo(),h.removeEventListener(oo.Qe,this.JY),h.removeEventListener(oo.QY,this.$Y)}constructor(e){super(),this.cs=!1,this.JY=()=>this.tK(),this.$Y=()=>this.eK(),this.we=e,this.ea=t.na(e),h.addEventListener(oo.Qe,this.JY),this.tK()}},WP=class t extends Bo{static na(t){return Z.Ka&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}co(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("fullscreen")?Z.Ka?requestAnimationFrame((()=>this.we.webkitSetPresentationMode("fullscreen"))):this.we.webkitSetPresentationMode("fullscreen"):this.we.webkitEnterFullscreen()}bo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("inline")?this.we.webkitSetPresentationMode("inline"):this.we.webkitExitFullscreen()}tK(){const t=this.cs;let e;e=this.we.webkitPresentationMode?"fullscreen"===this.we.webkitPresentationMode:Boolean(this.we.webkitDisplayingFullscreen),this.cs=e,t!==e&&this.yo(new OP)}gn(){this.Bo(),this.we.removeEventListener("webkitbeginfullscreen",this.JY),this.we.removeEventListener("webkitendfullscreen",this.JY),this.we.removeEventListener("webkitpresentationmodechanged",this.JY)}constructor(e){super(),this.cs=!1,this.JY=()=>this.tK(),this.we=e,this.ea=t.na(e),this.we.addEventListener("webkitbeginfullscreen",this.JY),this.we.addEventListener("webkitendfullscreen",this.JY),this.we.addEventListener("webkitpresentationmodechanged",this.JY),this.tK()}},UP=class extends Bo{get ea(){return!!this.iK&&this.iK.ea}get cs(){return this.sK}co(){this.iK?this.iK.co():this.yo(new DI)}bo(){for(const t of this.nK)t.cs&&t.bo()}rK(t){this.iK=t}oK(t){this.nK.push(t),t.yn(ys.aa,this.tK),t.yn(ys.ua,this.Ds),this.tK()}hK(t){we(this.nK,t),t.fn(ys.aa,this.tK),t.fn(ys.ua,this.Ds)}aK(){for(const t of this.nK)if(t.cs)return!0;return!1}tr(){this.iK=void 0,this.sK=!1;const t=this.nK.slice();for(const e of t)this.hK(e),e.gn();this.tK()}gn(){this.Bo(),this.tr()}constructor(...t){super(...t),this.nK=[],this.iK=void 0,this.sK=!1,this.tK=()=>{const t=this.sK,e=this.aK();t!==e&&(this.sK=e,this.yo(new OP))}}},GP=class extends Bo{get ea(){return!!this.uK&&this.cK.ea}get cs(){return this.cK.cs}co(){this.uK&&this.cK.co()}bo(){this.cK.bo()}lK(){this.cK.yn([ys.aa,ys.fa],this.tK),this.cK.yn(ys.ua,this.Ds)}dK(){this.cK.fn([ys.aa,ys.fa],this.tK),this.cK.fn(ys.ua,this.Ds)}Yn(){const t=this.cK,e=this.t.pI();if(t===e)return;this.ca=!0;const i=this.cs,s=this.ea;i&&this.bo(),this.dK(),this.cK=e,this.lK(),i&&!this.cs&&this.ea?this.co():this.bo(),this.ca=!1,s!==this.ea&&this.yo(new FP),i!==this.cs&&this.yo(new OP)}gn(){this.Bo(),this.dK(),this.t.fn(Mi.Ry,this.fK)}constructor(t,e){super(),this.ca=!1,this.fK=()=>this.Yn(),this.tK=t=>{this.ca||this.yo(t)},this.t=t,this.uK=e,this.cK=new N,this.lK(),this.t.yn(Mi.Ry,this.fK),this.Yn()}};r(),r(),r();var HP=function(t){return t.MODE_CHANGE="presentationmodechange",t.ERROR="error",t}({}),ZP=class extends pe{constructor(t){super(HP.MODE_CHANGE),this.presentationMode=t}};r(),r();var XP=class extends Bo{iu(t){for(const e of this.Xf)t.yn(e,this._K);this.vK.push(t)}mK(t){for(const e of this.Xf)t.fn(e,this._K);this.vK.push(t)}gn(){this.Bo();for(const t of this.vK)this.mK(t);Pn(this.vK)}constructor(t,e=!1,i){super(i),this.vK=[],this.gK=t=>{di((()=>{this.Ds(t)}))},this.Xf=t,this._K=e?this.gK:this.Ds}},Xu=class extends Je{iu(t){t.Jw(this.pK),this.vK.push(t)}mK(t){t.oy(this.pK),we(this.vK,t)}gn(){this.Bo();for(const t of this.vK)t.oy(this.pK);Pn(this.vK)}constructor(t,e=!1){super(t),this.vK=[],this.gK=t=>{di((()=>{this.Ds(t)}))},this.pK=e?this.gK:this.Ds}};r();var zP=class extends $s{get error(){return this.errorObject.message}ma(){return this}constructor(t){super(HP.ERROR),this.errorObject=t}};r();var qP=class extends A{constructor(t,e,i){super(t,e,i)}},YP=class extends Je{get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return function(t){let e,i={get currentMode(){return t.Uo()},requestMode(e){const i=sk(e);i&&t.Lo(i)},supportsMode(e){const i=sk(e);return!!i&&t.Vo(i)},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new Xu(i,!0),e.iu(t),i}(this)}Lo(t){this.qo!==t&&(this.qo=t,this.Ko=!0,this.zo(t))}Uo(){return this.qo}Vo(t){switch(t){case Bu.NATIVE_PICTURE_IN_PICTURE:return this.Qo.sO;case Bu.FULLSCREEN:return this.Zo.ea;case Bu.INLINE:return!0}return!1}zo(t){switch(this.Go.Xw(),t){case Bu.FULLSCREEN:oh(this.Go.Wo((t=>this.wK(t))));break;case Bu.NATIVE_PICTURE_IN_PICTURE:oh(this.Go.Wo((t=>this.yK(t))));break;case Bu.INLINE:oh(this.Go.Wo((t=>this.bK(t))))}}async wK(t){ot(t),await this.Qo.bo().catch(Bt),ot(t);try{await this.AK(),this.yo(new ZP(this.qo))}catch(e){const i=new qP(Ja.FULLSCREEN_ERROR,"Failed to enter fullscreen.");throw this.yo(new zP(i)),ot(t),this.Lo(Bu.INLINE),i}finally{this.Ko=!1}}async yK(t){ot(t),await this.Jo().catch(Bt),ot(t);try{await this.Qo.co(),this.yo(new ZP(this.qo))}catch(e){const i=new qP(Ja.PICTURE_IN_PICTURE_ERROR,"Failed to enter native picture-in-picture.");throw this.yo(new zP(i)),ot(t),this.Lo(Bu.INLINE),i}finally{this.Ko=!1}}async bK(t){ot(t),await this.Jo().catch(Bt),ot(t),await this.Qo.bo().catch(Bt),this.yo(new ZP(this.qo)),this.Ko=!1}async AK(){if(this.Zo.cs)return;const t=this.Zo.uy([ys.aa,ys.ua]);if(this.Zo.co(),await t,!this.Zo.cs)throw new g("Failed to enter fullscreen.")}async Jo(){if(!this.Zo.cs)return;const t=this.Zo.uy([ys.aa,ys.ua]);if(this.Zo.bo(),await t,this.Zo.cs)throw new g("Failed to exit fullscreen.")}wi(){this.Ko||(this.qo!==Bu.FULLSCREEN||this.Zo.cs?this.qo!==Bu.FULLSCREEN&&this.Zo.cs&&this.Lo(Bu.FULLSCREEN):this.Lo(Bu.INLINE))}gn(){this.Zo.fn(ys.aa,this.tK),this.Zo.fn(ys.ua,this.eK),this.Qo.fn(Me.tO,this.SK),this.Qo.fn(Me.eO,this.SK),this.Qo.fn(Me.ua,this.TK),this.Bo()}constructor(t,e){super(),this.qo=Bu.INLINE,this.Ko=!1,this.Go=new Eu,this.Za=void 0,this.tK=()=>{this.wi()},this.eK=()=>{this.Ko||(this.yo(new Wa(new A(Ja.FULLSCREEN_ERROR,"Failed to enter fullscreen."))),this.wi())},this.SK=()=>{this.Ko||(this.qo!==Bu.NATIVE_PICTURE_IN_PICTURE||this.Qo.iO?this.qo!==Bu.NATIVE_PICTURE_IN_PICTURE&&this.Qo.iO&&this.Lo(Bu.NATIVE_PICTURE_IN_PICTURE):this.Lo(Bu.INLINE))},this.TK=()=>{this.Ko||(this.yo(new zP(new qP(Ja.PICTURE_IN_PICTURE_ERROR,"Unexpected native picture-in-picture error."))),this.SK())},this.Zo=t,this.Qo=e,this.Zo.yn(ys.aa,this.tK),this.Zo.yn(ys.ua,this.eK),this.Qo.yn(Me.tO,this.SK),this.Qo.yn(Me.eO,this.SK),this.Qo.yn(Me.ua,this.TK)}};function KP(t){let e;return{get url(){return t.qu},get method(){return t.gE},get headers(){return e||(e=t.qk.yk()),e},get body(){return t.Ck},get useCredentials(){return t.AE},get type(){return t.pw},get subType(){return t.yE},get mediaType(){return t.bE},get responseType(){return t.Xk}}}function jP(t){switch(t.toLowerCase()){case"arraybuffer":return $r.vk;case"json":return $r.gk;case"stream":return $r.pk;default:return $r.wk}}function QP(t){switch(t.toUpperCase()){case"POST":return So.POST;case"PUT":return So.PUT;case"DELETE":return So.DELETE;case"HEAD":return So.HEAD;case"OPTIONS":return So.OPTIONS;default:return So.GET}}function JP(t){switch(t.toLowerCase()){case"manifest":return Wr.Jk;case"segment":return Wr.$k;case"preload-hint":return Wr.tE;case"content-protection":return Wr.eE;default:return Wr.Qk}}function $P(t){switch(t.toLowerCase()){case"initialization-segment":return De.iE;case"fairplay-license":return De.sE;case"fairplay-certificate":return De.nE;case"widevine-license":return De.rE;case"widevine-certificate":return De.oE;case"playready-license":return De.hE;case"clearkey-license":return De.aE;case"aes128-key":return De.uE;default:return De.Qk}}function tD(t){switch(t.toLowerCase()){case"audio":return xa.cE;case"video":return xa.lE;case"text":return xa.wk;case"image":return xa.dE;default:return xa.Qk}}r(),r(),r(),r();var eD=class{get kK(){return this.EK.Bb}get ga(){return this.Za||(this.Za=this.xK()),this.Za}get RK(){return this.IK}get CK(){return!this.IK}get PK(){return this.DK>0}get UE(){return this.GE}MD(){this.IK=!0,this.EK.Mb(null)}NK(){this.EK.Lb(new bb(this.MK))}LK(t){if(!this.CK)throw new b("Cannot respond more than once");if(!V(t))throw new b("Expected valid response");this.GE=this.BK(t),this.MD()}FK(){try{const t=this.VK(this.ga);t?this.WK(t):this.PK||this.RK||this.MD()}catch(t){this.MK.push(t),this.NK()}}WK(t){if(this.RK)throw new g("Request has been redirected or a response already exists");if(bt(t))this.UK(t);else{if("function"!=typeof t)throw new b("Expected promise or function");{const e=new as,i=t=>{t?e.Lb(t):e.Mb(void 0)};try{const s=t(i);bt(s)&&e.zw(s)}catch(t){e.Lb(t)}this.UK(e.Bb)}}}async UK(t){try{this.DK++,await t,this.DK--,this.PK||this.RK||(this.MK.length?this.NK():this.MD())}catch(t){this.DK--,this.MK.push(t),this.PK||this.RK||this.NK()}}constructor(t,e){this.GK=t,this.VK=e,this.EK=new as,this.MK=[],this.Za=void 0,this.IK=!1,this.GE=void 0,this.DK=0}},iD=class t extends eD{get Ck(){return this.HK}get qk(){return this.GK.qk}get zk(){return this.GK.zk}get UE(){return this.GE}get Hk(){return this.GK.Hk}get Yk(){return this.GK.Yk}get qu(){return this.GK.jk}static ZK(t,e,i){const s=void 0===t.body?i:t.body;return new Hb({Zk:s,zk:e.zk,Xk:e.zk.Xk,qk:t.headers,Hk:t.status,Yk:t.statusText,jk:t.url,Kk:!0},e)}xK(){return function(t){let e;const i=KP(t.zk);return{get closed(){return!t.CK},get request(){return i},get url(){return t.qu},get status(){return t.Hk},get statusText(){return t.Yk},get headers(){return e||(e=t.qk.yk()),e},get body(){return t.Ck},respondWith:e=>t.LK(e),waitUntil:e=>t.WK(e)}}(this)}BK(e){return t.ZK(e,this.GK,this.HK)}constructor(t,e,i){super(t,e),this.HK=i,this.FK()}};r();var sD=class extends eD{get Ck(){return this.GK.Ck}get CK(){return this.XK&&!this.IK}get qk(){return this.GK.qk}get gE(){return this.GK.gE}get zK(){return this.qK}get UE(){return this.GE}get Xk(){return this.GK.Xk}get pE(){return this.GK.pE}get wE(){return this.GK.wE}get Bw(){return this.GK.Bw}get pw(){return this.GK.pw}get yE(){return this.GK.yE}get bE(){return this.GK.bE}get qu(){return this.GK.qu}get AE(){return this.GK.AE}get kE(){return this.GK.kE}get SE(){return this.GK.SE}get TE(){return this.GK.TE}get EE(){return this.GK.EE}xK(){return function(t){let e;return{get url(){return t.qu},get method(){return t.gE},get headers(){return e||(e=t.qk.yk()),e},get body(){return t.Ck},get closed(){return!t.CK},get useCredentials(){return t.AE},get type(){return t.pw},get subType(){return t.yE},get mediaType(){return t.bE},get responseType(){return t.Xk},redirect:e=>t.YK(e),respondWith:e=>t.LK(e),waitUntil:e=>t.WK(e)}}(this)}BK(t){const e=this.GK.Ck,i=new Hb({Zk:e,qk:{},zk:this.GK,jk:this.GK.qu,Xk:this.GK.Xk,Hk:200,Yk:"OK"});return iD.ZK(t,i,e)}YK(t){if(!this.CK)throw new b("Cannot redirect, already redirected or has a response");let e;e=Kt(t)?{url:t}:t,this.qK=function(t,e){return new Fe({qu:void 0===t.url?e.qu:t.url,gE:void 0!==t.method?QP(t.method):void 0,qk:t.headers,Ck:t.body,AE:t.useCredentials,pw:void 0!==t.type?JP(t.type):void 0,yE:void 0!==t.subType?$P(t.subType):void 0,bE:void 0!==t.mediaType?tD(t.mediaType):void 0,Xk:void 0!==t.responseType?jP(t.responseType):void 0},e)}(e,this.GK),this.MD()}constructor(t,e,i){super(t,e),this.qK=void 0,this.XK=i,this.FK()}};var nD=class extends vh{KK(t){this.jK.KK(t)}QK(t){this.jK.QK(t)}JK(t){this.jK.JK(t)}VX(t){this.jK.VX(t)}HX(t){this.jK.HX(t)}constructor(t,e=!0){const i=new rD(t);super(i,e),this.jK=i}},rD=class{async zk(t){let e;try{e=await this.$K(t,t.Bw)}catch(e){if(e instanceof Qb)return await this.tj(e,t.Bw);throw e}if(e=await this.ej(e,t.Bw),wh(e))return e;throw new Tn(e)}xE(t){return this.DE.xE(t)}async $K(t,e){ot(e);let i,s=t;for(const t of this.ij.slice()){ot(e);const n=new sD(s,t,!i);if(!n.RK)try{await n.kK}catch(t){0;continue}n.zK&&!i?s=n.zK:n.UE&&!i&&(i=n.UE)}return i||this.DE.zk(s)}async tj(t,e){let i;if(t instanceof Tn)i=t.UE;else{const e=t.zk;i=new Hb({Zk:null,zk:e,Xk:e.Xk,Hk:0,Yk:""})}const s=await this.ej(i,e);if(s===i)throw t;if(wh(s))return s;throw new Tn(s)}async ej(t,e){let i=t;for(const t of this.sj.slice()){ot(e);const s=await Promise.resolve(i.Tb().Zk(e)),n=new iD(i,t,s);if(!n.RK)try{await n.kK}catch(t){0;continue}i=n.UE||i}return i}KK(t){this.ij.unshift(t)}QK(t){this.ij.push(t)}JK(t){we(this.ij,t)}VX(t){this.sj.unshift(t)}HX(t){we(this.sj,t)}gn(){this.DE.gn(),Pn(this.ij),Pn(this.sj)}constructor(t){this.ij=[],this.sj=[],this.DE=t}};r();var oD=class{get ga(){return this.Za||(this.Za=function(t){return{addRequestInterceptor(e){t.KK(e)},removeRequestInterceptor(e){t.JK(e)},addResponseInterceptor(e){t.VX(e)},removeResponseInterceptor(e){t.HX(e)}}}(this)),this.Za}KK(t){this.aW.KK(t)}JK(t){this.aW.JK(t)}VX(t){this.aW.VX(t)}HX(t){this.aW.HX(t)}constructor(t){this.aW=t}},hD=class extends Bo{get ga(){return this.Za||(this.Za=function(t){return{get online(){return t.GR},get estimator(){return function(t){return{get bandwidth(){return t.mG},get roundTripTime(){return t.gG}}}(t.nj)},setEstimator(e){t.rj(function(t){if(!t)return;return{get mG(){return QA(t.bandwidth)},get gG(){return QA(t.roundTripTime)},pG:e=>function(t){if(!t)return;return{hj(e){t.markRequestStart(e)},aj(e){t.markResponseStart(e)},uj(e,i){t.markResponseData(e,i)},cj(e){t.markResponseEnd(e)}}}(t.createMeasurer(KP(e)))}}(e))},addRequestInterceptor(e){t.KK(e)},removeRequestInterceptor(e){t.JK(e)},addResponseInterceptor(e){t.VX(e)},removeResponseInterceptor(e){t.HX(e)},addEventListener(e,i){t.yn(e,i)},removeEventListener(e,i){t.fn(e,i)}}}(this)),this.Za}get GR(){return this.lj.GR}get nj(){return this.dZ.nj}rj(t){this.dZ.rj(t)}KK(t){this.aW.KK(t)}JK(t){this.aW.JK(t)}VX(t){this.aW.VX(t)}HX(t){this.aW.HX(t)}gn(){this.Bo(),this.lj.fn(Mi.Wy,this.dj),this.lj.fn(Mi.Vy,this._j)}constructor(t,e,i){super(e),this.lj=t,this.aW=e,this.dZ=i,this.dj=t=>{this.yo(t)},this._j=t=>{this.yo(t)},this.lj.yn(Mi.Wy,this.dj),this.lj.yn(Mi.Vy,this._j)}};r(),r(),r();var wt=function(t){return t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth",t}({});r();function aD(t,e,i,s,n,r){const o=[];let h=t-_.max(r,1),a=t+n;if(e&&i){const t=Zs(i,1,5),s=e-t;h=_.min(h,s);const n=e+i+t;a=_.max(a,n)}0!==h&&s.eB(0,h)&&o.push([0,h]);return s.eB(a,1/0)&&o.push([a,1/0]),o}function uD(t){return t instanceof g&&"QuotaExceededError"===t.name}r();var cD={type:wt.BANDWIDTH};function lD(t){const e=eu(cD);return Kt(t)?e.type=dD(t):V(t)&&function(t){switch(t){case wt.PERFORMANCE:case wt.QUALITY:case wt.BANDWIDTH:return!0;default:return!1}}(t.type)&&(e.type=dD(t.type)),V(t)&&V(t.metadata)&&(e.metadata=function(t){const e={},i=eo(t.bitrate);return S(i)||(e.bitrate=i),e}(t.metadata)),e}function dD(t){switch(t){case"bandwidth":return wt.BANDWIDTH;case"performance":return wt.PERFORMANCE;case"quality":return wt.QUALITY}}r();var fD=class extends pe{constructor(t){super("vj"),this.mj=t}};r();var _D=class extends pe{constructor(t){super("gj"),this.pj=t}};r();var vD=class extends pe{constructor(t){super("wj"),this.yj=t}},mD=class extends Bo{bj(t){this.Aj=t}get Sj(){switch(this.Tj.type){case wt.PERFORMANCE:return 0;case wt.QUALITY:return 1/0;case wt.BANDWIDTH:return this.Tj.metadata&&void 0!==this.Tj.metadata.bitrate?this.Tj.metadata.bitrate:kl.Lg.rG();default:return kl.Lg.rG()}}get ga(){return this.Za}get pj(){return this.Tj}set pj(t){this.Tj=t,this.yo(new _D(t))}get mj(){return this.Ej}set mj(t){this.Ej=t,this.yo(new fD(t))}get xj(){return _.min(this.Ej,this.Rj)}get yj(){return this.Ij}set yj(t){this.Ij=t,this.yo(new vD(t))}get Cj(){return this.Rj}get nj(){var t;return null!=(t=this.Pj)?t:this.Aj.jG}rj(t){this.Pj=t}Dj(t){let e=_.min(t,.8*this.Rj);if(e=_.max(10,e),this.Rj===e)return!1;const i=this.xj;this.Rj=e;const s=this.xj;return s!==i&&this.yo(new fD(s)),!0}get Nj(){return this.Mj}set Nj(t){this.Mj=t}constructor(...t){super(...t),this.Za=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.pj)},set strategy(e){t.pj=lD(e)},get targetBuffer(){return t.mj},set targetBuffer(e){const i=eo(e);S(i)||(t.mj=i)},get bufferLookbackWindow(){return t.yj},set bufferLookbackWindow(e){const i=eo(e);S(i)||(t.yj=i<=0?30:i)},get maxBufferLength(){return t.Cj},get clearBufferWhenSettingTargetQuality(){return t.Nj},set clearBufferWhenSettingTargetQuality(e){t.Nj=Fh(e)}}}(this),this.Tj=cD,this.Ej=20,this.Ij=30,this.Rj=1/0,this.Mj=!1,this.Pj=void 0}};r(),r();var gD=class extends $s{ma(){return new pD}constructor(){super("jI")}},pD=class extends pe{constructor(){super("change")}};r(),r();var wD=class extends Bo{gn(){this.Bo();for(const t of this.Xf)this.Lj.fn(t,this.Bj)}constructor(t,e,i){super(i),this.Bj=t=>{OA(t)&&di((()=>{this.yo(t.ga)}))},this.Lj=t,this.Xf=e;for(const t of this.Xf)this.Lj.yn(t,this.Bj)}},ht=class extends Je{gn(){this.Bo(),this.Lj.oy(this.Bj)}constructor(t,e){super(e),this.Bj=t=>{OA(t)&&di((()=>{this.yo(t.ga)}))},this.Lj=t,this.Lj.Jw(this.Bj)}};var yD=class extends Je{get LO(){return this.XO}set LO(t){if(this.BO<=t)throw new g("Start time of a clip should be smaller than the end time.");this.XO!==t&&(this.XO=t,this.yo(new gD))}get BO(){return this.YO}set BO(t){if(t<=this.LO)throw new g("End time of a clip should be larger than the start time.");this.YO!==t&&(this.YO=t,this.yo(new gD))}get ga(){return this.Za||(this.Za=function(t){let e,i={get startTime(){return t.LO},set startTime(e){t.LO=e},get endTime(){return t.BO},set endTime(e){t.BO=e},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new ht(t,i),i}(this)),this.Za}tr(){0===this.XO&&this.YO===1/0||(this.XO=0,this.YO=1/0,this.yo(new gD))}Oj(){return new ee([this.LO,this.BO],[!0,!0])}constructor(...t){super(...t),this.XO=0,this.YO=1/0}};r();var bD=class t extends Fc{AR(t,e){const i=this.Fj.Oj().ZL(t);super.AR(i,e),this.Vj()}ER(){return super.ER()||this.Wj}get Uj(){return this.sI().length?this.sI():this.Fj.Oj().ks()}sI(){return ee.xn(super.sI()).Sn(this.Fj.Oj()).ks()}AI(){this.ER()?this.AR(this.Uj.start(0)):this.Gj(),super.AI(),this.Vj()}async ka(t,e){ot(e),this.Wj=!1,this.Fj.tr(),await super.ka(t,e)}gn(){return this.Fj.fn("jI",this.Hj),this.dR.fn(Mi.$y,this.xc),this.Zj(),super.gn()}CI(t){switch(t.type){case Mi.qy:return this.yo(t),this.Xj(),!0;case Mi.zy:case Mi.Ty:return this.yo(t),this.zj(),!0;case Mi.xy:if(this.qj)return!0}return super.CI(t)}get qj(){return this.Fj.BO<this.ct}Zj(){this.Yj&&(ao(this.Yj),this.Yj=void 0)}Vj(){const e=this.yR,i=this.qj&&e>=this.Fj.BO-t.ed;this.Wj&&!i?(this.Wj=!1,this.ZR&&this.AI()):this.Wj||!i||this.nI||this.Kj||(this.Wj=!0,this.yo(new Fs(e)),this.bI())}Gj(){if(this.ct===1/0)return;const e=this.Uj,i=ee.xn(e).ZL(this.yR);Cs(this.yR,i,t.ed)||this.AR(i)}constructor(e,i){super(e),this.Wj=!1,this.Yj=void 0,this.Kj=!1,this.Hj=()=>{this.Gj(),this.Vj()},this.xc=()=>{this.Zj(),this.Vj();this.qj&&this.yR>=this.Fj.BO-t.jj&&!this.kR&&(this.Yj=st(this.xc))},this.Xj=()=>{this.Kj=!0},this.zj=()=>{this.Kj&&(this.Kj=!1,this.Vj())},this.Fj=i,this.Fj.yn("jI",this.Hj),this.dR.yn(Mi.$y,this.xc)}};bD.jj=1,bD.ed=.001,r();var AD=class{get Qj(){return this.Jj}set Qj(t){this.Jj=t}constructor(){this.Jj=!1}};r();var SD=class extends Fc{ER(){return!this.Jj.Qj&&super.ER()}bI(){this.$j=!0,super.bI()}AI(){this.$j=!1,super.AI()}CI(t){if(this.Jj.Qj)switch(t.type){case Mi.xy:return this.yR=0,this.$j||(this.nI?this.tQ=!0:this.AI()),!0;case Mi.zy:this.tQ&&(this.tQ=!1,this.AI());break;case Mi.Uy:if(this.tQ||super.ER())return!0}return super.CI(t)}constructor(t,e){super(t),this.tQ=!1,this.$j=!1,this.Jj=e}};r(),r();var TD=class{get ga(){return this.Za}get cO(){return this.ta.LR.cO}get dO(){return this.ta.LR.dO}get uO(){return this.ta.LR.uO}get eQ(){throw new g("Not implemented")}get iQ(){throw new g("Not implemented")}get fO(){return this.ta.LR.fO}get lO(){return this.ta.LR.lO}get _O(){return this.ta.LR._O}constructor(t){this.ta=t,this.Za=function(t){return{get currentBandwidthEstimate(){return t.dO},get corruptedVideoFrames(){return t.cO},get droppedVideoFrames(){return t.uO},get totalVideoFrames(){return t.lO},get totalBytesLoaded(){return t.fO},get bufferedSegments(){return t._O}}}(this)}};function kD(t){if(!t||!Rr(t))return{uO:0,cO:0,lO:0,dO:0,fO:0,_O:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const e=t.getVideoPlaybackQuality();return{uO:e.droppedVideoFrames,cO:e.corruptedVideoFrames||0,lO:e.totalVideoFrames}}return{uO:t.webkitDroppedFrameCount||0,cO:0,lO:t.webkitDecodedFrameCount||0}}r(),r();var ED=class extends $s{ma(){return new xD}constructor(){super("sQ")}},xD=class extends pe{constructor(){super("castingchange")}};r();var RD=class extends Bo{get nQ(){var t,e;return(null==(t=this.rQ)?void 0:t.nQ)||(null==(e=this.oQ)?void 0:e.nQ)||!1}get hQ(){return this.rQ}get aQ(){return this.oQ}uQ(t){this.rQ=t,this.cQ(t)}lQ(t){this.oQ=t,this.cQ(t)}cQ(t){t.yn("statechange",this.dQ)}fQ(t){t.fn("statechange",this.dQ)}get ga(){return this.Za||(this.Za=function(t){let e;const i={get casting(){return t.nQ},get airplay(){var e;return null==(e=t.hQ)?void 0:e.ga},get chromecast(){var e;return null==(e=t.aQ)?void 0:e.ga},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new wD(t,["sQ"],i),i}(this)),this.Za}gn(){this.Bo(),this.rQ&&(this.fQ(this.rQ),this.rQ=void 0),this.oQ&&(this.fQ(this.oQ),this.oQ=void 0)}constructor(...t){super(...t),this.rQ=void 0,this.oQ=void 0,this._Q=!1,this.Za=void 0,this.dQ=()=>{const t=this._Q,e=this.nQ;t!==e&&(this._Q=e,this.yo(new ED))}}};r(),r();var lu=class{static async vQ(t,e){try{const i=new Fe({qu:t,Xk:$r.wk,gE:So.GET}),s=await e.zk(i);return(await s.Zk()).trim()}catch(t){return void Se(t)}}static mQ(t){try{const e=ZC(t);return new YC(e.key,e.domains_page,e.domains_source,e.expiration_date,e.features,e.customer_id,e.generation_date,e.sdks,e.send_impression)}catch(t){throw new A(Ja.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static gQ(t){void 0===t&&(t=Mo.lh),As.Mp("The baked-in license is used. Please update the configuration with your license.");const e=t.Zz("F2b-iL'[FL[S"),i=JSON.parse('["F$(:_L50F|aY"]').map((e=>t.Zz(e))),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((e=>t.Zz(e))),n=Number(new Date(Number(t.Zz('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map((e=>t.Zz(e)));return new YC(e,i,s,n,r)}static convertLicenseToDummyLicense(t){return new YC(t.Jz,t.$z,t.tq,864e13,t.nq,t.rq,Date.now(),t.hq,t.aq)}};r();var ba=class t{static _k(){return t.Lg||(t.Lg=ID.vT()?new ID:new fb),t.Lg}static Nb(e){t._k().Nb(e)}static fk(){t._k().fk()}static Cb(e){return t._k().Cb(e)}static Pb(e,i){t._k().Pb(e,i)}static pQ(e){const i=t.Cb(e);if(void 0!==i)return C(i)}static wQ(e){return"true"===t.Cb(e)}};ba.Lg=void 0;var ID=class extends ba{static vT(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}Nb(t){self.localStorage.removeItem(t)}fk(){self.localStorage.clear()}Cb(t){var e;return null!=(e=self.localStorage.getItem(t))?e:void 0}Pb(t,e){self.localStorage.setItem(t,e)}},CD="https://validate.theoplayer.com/1/",PD=72e5,DD=_.floor(14399999*_.random()-PD),ND="THEOplayer.license",MD=class{async yQ(){const t=await this.bQ(this.AQ.license,this.AQ.licenseUrl);this.Qq.SQ(t)}async bQ(t,e){let i,s=e;t?i=lu.mQ(t):s||(i=lu.gQ()),s||(s=CD+i.Jz);const n=this.TQ();let r;if(i&&(r=this.kQ.pq(i),r===Ri.Kz)){if(this.EQ(i.iq)&&this.EQ(null==n?void 0:n.iq)){const t=await this.xQ(s);if(t)return t}return i}if(n){if(this.kQ.pq(n)===Ri.Kz){if(this.EQ(null==n?void 0:n.iq)){const t=await this.xQ(s);if(t)return t}return n}ba.Nb(ND)}const o=await lu.vQ(s,this.aW);let h;if(o){h=lu.mQ(o);if(this.kQ.pq(h)===Ri.Kz)return ba.Pb(ND,o),h;ba.Nb(ND)}else if(!this.Tq&&i&&r===Ri.jz&&s===CD+i.Jz)return lu.convertLicenseToDummyLicense(i);if(!i&&!h)throw new A(Ja.LICENSE_ERROR,"The given license is invalid!");this.RQ(null!=i?i:h,new A(Ja.LICENSE_ERROR,"The given license is invalid!"))}async dq(t){let e=await this.Qq.jq();if(this.EQ(e.iq)){var i;const t=null!=(i=this.AQ.licenseUrl)?i:CD+e.Jz,s=await this.xQ(t);s&&(this.Qq.SQ(s),e=s)}try{const i=this.kQ.pq(e);if(i===Ri.Qz){const t=KC.uq;throw new A(JC(t),oP.mq(t))}if(i===Ri.jz){const t=KC.jz;throw new A(JC(t),oP.mq(t))}this.kQ.dq(t,e)}catch(t){this.IQ(t)}}async gq(t){const e=await this.Qq.jq();try{this.kQ.gq(t,e)}catch(t){this.IQ(t)}}async xQ(t){try{const e=await lu.vQ(t,this.aW);if(void 0===e)return;const i=lu.mQ(e);return this.kQ.pq(i)===Ri.Kz?(ba.Pb(ND,e),i):void 0}catch(t){return}}EQ(t){return!t||Number(new Date)+2592e5+DD>=t}TQ(){const t=ba.Cb(ND);if(t)return lu.mQ(t)}RQ(t,e){this.Qq.SQ(t),this.IQ(e)}IQ(t){throw Ur(t.message),this.CQ.tY(t.message),t}constructor(t,e,i,s,n,r){this.aW=t,this.kQ=e,this.CQ=i,this.Qq=s,this.AQ=n,this.AA=r,this.Tq=rP(r)}};r();var LD=class{SQ(t){this.DQ=t,this.NQ.Mb()}get MQ(){return this.DQ}async jq(){return this.DQ?Promise.resolve(this.DQ):(await this.NQ.Bb,this.DQ)}constructor(){this.NQ=new as}};r(),r();var BD=class extends $s{ma(){return new OD}constructor(){super("jI")}},OD=class extends pe{constructor(){super("change")}};function FD(t){let e;const i={get fontFamily(){return t.LQ},set fontFamily(e){t.LQ=e},get fontColor(){return t.BQ},set fontColor(e){t.BQ=e},get fontSize(){return t.OQ},set fontSize(e){t.OQ=e},get backgroundColor(){return t.FQ},set backgroundColor(e){t.FQ=e},get windowColor(){return t.VQ},set windowColor(e){t.VQ=e},get edgeStyle(){return t.WQ},set edgeStyle(e){t.WQ=e},get marginTop(){return t.UQ},set marginTop(e){t.UQ=e},get marginBottom(){return t.GQ},set marginBottom(e){t.GQ=e},get marginLeft(){return t.HQ},set marginLeft(e){t.HQ=e},get marginRight(){return t.ZQ},set marginRight(e){t.ZQ=e},addEventListener(t,i){const s=$A(t,xe);e.yn(s,i)},removeEventListener(t,i){const s=$A(t,xe);e.fn(s,i)}};return e=new og(i),t.yn(["jI"],(t=>e.yo(t.ga))),i}r();var VD={LQ:void 0,BQ:void 0,OQ:void 0,FQ:void 0,VQ:void 0,WQ:void 0,UQ:void 0,GQ:void 0,HQ:void 0,ZQ:void 0},WD="THEOplayer.textTrackStyle.",UD=class t extends Bo{get XQ(){return this.zQ}get LQ(){return this.zQ.LQ}set LQ(t){this.Yn({LQ:t})}get BQ(){return this.zQ.BQ}set BQ(t){this.Yn({BQ:t})}get OQ(){return this.zQ.OQ}set OQ(t){this.Yn({OQ:t})}get FQ(){return this.zQ.FQ}set FQ(t){this.Yn({FQ:t})}get VQ(){return this.zQ.VQ}set VQ(t){this.Yn({VQ:t})}get WQ(){return this.zQ.WQ}set WQ(t){this.Yn({WQ:t})}get UQ(){return this.zQ.UQ}set UQ(t){this.Yn({UQ:t})}get GQ(){return this.zQ.GQ}set GQ(t){this.Yn({GQ:t})}get ZQ(){return this.zQ.ZQ}set ZQ(t){this.Yn({ZQ:t})}get HQ(){return this.zQ.HQ}set HQ(t){this.Yn({HQ:t})}get ga(){return this.Za||(this.Za=FD(this)),this.Za}Yn(e){this.zQ=la({},this.zQ,e),t.qQ(this.zQ),this.yo(new BD)}static YQ(){let t=la({},VD);return t.LQ=ba.Cb(WD+"fontFamily")||t.LQ,t.BQ=ba.Cb(WD+"fontColor")||t.BQ,t.OQ=ba.Cb(WD+"fontSize")||t.OQ,t.FQ=ba.Cb(WD+"backgroundColor")||t.FQ,t.VQ=ba.Cb(WD+"windowColor")||t.VQ,t.WQ=ba.Cb(WD+"edgeStyle")||t.WQ,t}static qQ(t){ba.Pb(WD+"fontFamily",t.LQ||""),ba.Pb(WD+"fontColor",t.BQ||""),ba.Pb(WD+"fontSize",t.OQ||""),ba.Pb(WD+"backgroundColor",t.FQ||""),ba.Pb(WD+"windowColor",t.VQ||""),ba.Pb(WD+"edgeStyle",t.WQ||"")}constructor(){super(),this.Za=void 0,this.zQ=t.YQ()}};function GD(t,e){var i,s;t.style.marginLeft=(null!=(i=e.HQ)?i:0)+"px",t.style.marginRight=(null!=(s=e.ZQ)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}r(),r(),r(),r();var HD=[Mi.so,Mi.Uy,Zc.BL,Mi.$y,Mi.Gy,Mi.By,Mi.qy,Mi.zy,Mi.xy,Mi.Hy,Mi.eb,Mi.Sy,Zc.QI,Mi.Xy,sn.ua,rh.Ey,rh.wb,Mi.wy,Mi.py,Mi.ib,Mi.ob,Mi.Dy,Mi.My,Mi.Cy,Mi.Ry],ZD={UB:!1};function XD(t){return t.md.pw===zr._W}r();var ss=function(t){return t.KQ="jQ",t}({}),Oo=["jQ"],Ut=function(t){return t[t.QQ=0]="QQ",t[t.pk=1]="pk",t[t.JQ=2]="JQ",t}({});r(),r();var zD=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"],To=function(t){return t.$Q="tJ",t.eJ="iJ",t.sJ="nJ",t}({}),qD=class extends Bo{get md(){return this.IT}get XG(){return this.YT}async rJ(t,e){const i=await this.Rw.xw(t.ww,e),s=await i.uT();return await this.oJ(s),s}hJ(t){const e=this.nT;return e?0!==t.JG.length&&t.JG.some((t=>t.rT.ww===e.rT)):0!==this.IT.JG.length?t.JG.some((t=>this.IT.JG.some((e=>t.rT===e.rT)))):0===t.JG.length||!this.aJ}uJ(t){return this.cJ.uJ(t),this.IT=t,Promise.resolve()}lJ(t){this.cJ.lJ(t)}async Ww(){this.Bo(),this.YT.removeEventListener("loadedmetadata",this.dJ);for(const t of zD)this.YT.removeEventListener(t,this.fJ);await this.Go.gn(),this._J(),await this.cJ.tr(),await this.vJ(void 0)}mJ(t){t!==this.gJ&&(this.gJ=t,t?this.pJ.Mb(void 0):this.pJ=new as)}oJ(t){return this.Go.Wo((()=>this.vJ(t)))}async vJ(t){if(t&&!this.YT.src&&!this.YT.srcObject)throw new ir(Ja.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.YT.src||this.YT.srcObject))throw new ir(Ja.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.gJ&&await this.pJ.Bb;const e=this.nT;e&&(await e.hT(this.YT),this.nT=void 0),t&&(await t.bn(this.YT),this.nT=t)}ka(t){return this.Go.Wo((()=>this.wJ(t)))}wJ(t){this.mJ(!1);const e=this.LB.zR;if(Kt(t))this.YT.src=t;else if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&Z.Ka&&Z.Jm>=17}(this.YT))try{this.YT.srcObject=t}catch(e){this.YT.src=URL.createObjectURL(t)}else this.YT.src=URL.createObjectURL(t);else YD(t)&&(this.YT.srcObject=t);this.LB.zR=e}yJ(t){return this.Go.Wo((()=>this.bJ(t)))}bJ(t){this.wJ(t),this.YT.load()}_J(){this.mJ(!1),Wd(this.YT)}async AJ(){this.nT&&await this.nT.tr()}constructor(t,e,i,s){super(),this.gJ=!1,this.pJ=new as,this.aJ=!1,this.Go=new Eu,this.nT=void 0,this.dJ=()=>{this.aJ=!0},this.fJ=()=>{this.mJ(!0)},this.IT=t,this.LB=e,this.YT=e.XG,this.cJ=i,this.Rw=s,this.YT.addEventListener("loadedmetadata",this.dJ);for(const t of zD)this.YT.addEventListener(t,this.fJ)}};function YD(t){return"undefined"!=typeof MediaStream&&t instanceof MediaStream}var KD=class extends qD{get _R(){return ee.xn(this.YT.buffered)}get ct(){return this.YT.duration}get SJ(){const t=this.ct;if(!isFinite(t))return!1;const e=this._R;if(0===e.V)return!1;return t-e.jn(e.V-1)<ji}get QR(){return this.YT.preload}set QR(t){this.YT.preload=t}get iI(){return ee.xn(this.YT.seekable)}get TJ(){return this._R}get kJ(){if(Rr(this.YT)&&(this.YT.videoWidth>0||this.YT.videoHeight>0))return this._R}async bj(){const t=this.md;switch(t.tH){case _h.VC:case _h.WC:this.YT.setAttribute("crossorigin",t.tH);break;case _h._E:default:this.YT.removeAttribute("crossorigin")}void 0!==t.QR?this.YT.preload=t.QR:this.YT.preload=hl.vG,void 0!==t.eH?this.YT.title=t.eH:Ld(this.YT),t.EJ?await this.yJ(t.EJ):await this.ka(t.MC),this.cJ.$n(this,t)}hJ(t){return!1}uJ(t){return Promise.resolve(void 0)}xJ(t){return!1}RJ(){return!YD(this.IT.EJ)}async Ww(){Ld(this.YT),await super.Ww()}static IJ(t,e){return!!e.canPlayType&&Boolean(e.canPlayType(t.Ik))}};r();var K=class extends pe{constructor(t){super(Mi.Gy),this.currentTime=t}};r();var $i=class extends pe{constructor(){super(Mi.By)}};r(),r();var jD=function(t){return t.CJ="PJ",t}({}),QD=class extends pe{constructor(t){super("PJ"),this.DJ=t}},JD=class extends Bo{get NJ(){return this.MJ}LJ(t,e){const i=new ee([t,e]);this.MJ=this.MJ.KL(i),this.yo(new QD(i))}BJ(t,e){this.MJ=this.MJ.QL(new ee([t,e]))}tr(){this.MJ=ee.fB()}gn(){this.Bo()}constructor(...t){super(...t),this.MJ=ee.fB()}};function $D(t,e){return void 0===e&&(e=new Sb({highWaterMark:1/0})),new ph(new tN(t,e),{highWaterMark:0})}r(),r(),r();var tN=class{start(t){this.NQ=t,this.OJ()&&this.FJ()}pull(){this.zd.length>0?this.VJ():this.WJ=!0,this.OJ()&&this.FJ()}cancel(t){return Pn(this.zd),this.qd=0,this.WJ=!1,this.Md.cancel(t)}VJ(){if(0===this.zd.length)return;const t=this.zd;this.zd=[],this.qd=0,this.WJ=!1,this.NQ.enqueue(t)}OJ(){if(this.WJ)return!0;return this.UJ-this.qd>0}FJ(){if(this.GJ)return;const t=this.Md.read().then(this.HJ).catch(this.ux);this.GJ=t;const e=()=>{this.GJ===t&&(this.GJ=void 0)};t.then(e,e)}constructor(t,{size:e=(()=>1),highWaterMark:i=1}){this.zd=[],this.qd=0,this.NQ=void 0,this.WJ=!1,this.GJ=void 0,this.HJ=t=>t.done?(this.VJ(),void this.NQ.close()):(this.zd.push(t.value),this.qd+=this.ZJ(t.value),this.WJ&&this.VJ(),this.OJ()?this.Md.read().then(this.HJ):void 0),this.ux=t=>{this.VJ(),this.NQ.error(t)},this.Md=t.getReader(),this.ZJ=e,this.UJ=i}};r(),r(),r(),r();var eN=class{XJ(t){this.zJ.push(t),this.Rb+=t.byteLength}qJ(t){if(this.Rb<=t)return this.YJ();const e=this.zJ;let i=0,s=0;for(;s<e.length&&i+e[s].byteLength<=t;)i+=e[s].byteLength,s++;const n=e.slice(0,s);if(s<e.length&&i<t){const r=t-i;0,n.push(ei(e[s],0,r)),i+=r}return{zJ:n,Rb:i}}KJ(t){const e=this.qJ(t);return 1===e.zJ.length?e.zJ[0]:np(e.zJ,e.Rb)}YJ(){return{zJ:this.zJ,Rb:this.Rb}}jJ(t){if(this.Rb<=t)return this.QJ();const e=this.zJ;let i=0,s=0;for(;s<e.length&&i+e[s].byteLength<=t;)i+=e[s].byteLength,s++;const n=e.splice(0,s);if(e.length>0&&i<t){const s=t-i;0,n.push(ei(e[0],0,s)),e[0]=ei(e[0],s),i+=s}return this.Rb-=i,{zJ:n,Rb:i}}JJ(t){const e=this.jJ(t);return 1===e.zJ.length?e.zJ[0]:np(e.zJ,e.Rb)}QJ(){const t=this.YJ();return this.zJ=[],this.Rb=0,t}$J(){const t=1===this.zJ.length?this.zJ[0]:np(this.zJ,this.Rb);return this.zJ=[],this.Rb=0,t}constructor(){this.zJ=[],this.Rb=0}},vo=class{t$(t,e){}e$(){}i$(t){this.zd.XJ(t),this.s$(!1)}n$(){this.s$(!0)}r$(){return 0!==this.Ea||0!==this.zd.Rb}s$(t){for(;0!==this.zd.Rb;){if(!t&&this.o$>this.zd.Rb)return;switch(this.Ea){case 0:this.h$(t);break;case 1:this.a$(t);break;case 2:this.u$(t)}}}c$(){this.Ea=0,this.o$=8}h$(t){const e=na(this.zd.KJ(this.o$)),i=new Ui,s=St.VD(e,i);if(!s.MD)return this.o$=s.UD,void(t&&this.o$>this.zd.Rb&&this.l$(this.zd.Rb));const n=s.WD.pw;let r=s.WD.Rb;0===r&&(r=1/0),this.t$(n,r),this.d$(n)?this.f$(r):this.l$(r)}f$(t){this.Ea=1,this.o$=t}a$(t){const e=na(this.zd.JJ(this.o$)),i=new Ui,s=St.LD(e,i,!t);if(!s.MD)throw new HS(i.tc);this.e$(),this._$(s.BD),this.c$()}l$(t){this.Ea=2,this.o$=0,this.v$=t}u$(t){const e=this.zd.jJ(this.v$);this.v$-=e.Rb;for(const t of e.zJ)this.m$(t);(0===this.v$||t&&this.v$===1/0)&&(this.e$(),this.c$())}constructor(){this.zd=new eN,this.Ea=0,this.o$=0,this.v$=0,this.c$()}};function iN(t){return t instanceof Xw}function sN(t){return t instanceof Hw}function nN(t){return t instanceof Ww||t instanceof Uw}function rN(t){return t instanceof dw}function oN(t){return t instanceof Xp}function hN(t){return t instanceof vc}function aN(t){return t instanceof Dw}function uN(t){return t instanceof ey}function cN(t){return t instanceof Ph}function lN(t){return t instanceof jw}function dN(t){return t instanceof Jw}function fN(t,e){const i=Ti(t.boxes,lN);if(i&&i.flags.baseDataOffsetPresent)i.baseDataOffset=i.baseDataOffset.add(e);else for(const i of t.boxes)i instanceof Jw&&i.flags.dataOffsetPresent&&(i.dataOffset=i.dataOffset+e)}r();var _N=class extends vo{start(t){this.NQ=t}transform(t){this.i$(t)}flush(){this.n$()}d$(t){return t===Mt.dP||t===Mt.eD||t===Mt.lD}_$(t){const e=this.g$(t);this.NQ.enqueue(e)}m$(t){this.NQ.enqueue(t)}g$(t){const e=Th(t.Zk.Zk);switch(t.pw){case"moov":return this.p$(e);case"sidx":return this.w$(e);case"moof":return this.y$(e)}return e}get b$(){if(void 0===this.A$)throw new g("Expected to have found a movie header timescale.");return this.A$}S$(t){const e=this.T$.get(t);if(void 0===e)throw new g("Expected to have found a media header timescale for track ID "+t+".");return e}p$(t){const e=wy(t);for(let t=0;t<e.boxes.length;t++){const i=e.boxes[t];i instanceof Bw?e.boxes[t]=this.k$(i):i instanceof Ow?e.boxes[t]=this.E$(i):i instanceof Hw&&this.x$(i)}for(const t of e.boxes)t instanceof vc&&this.R$(t);return e.serialize().join()}k$(t){this.A$=t.timescale;const e=Ki(fo.fromNumber(t.duration,!0),this.b$,this.I$);return 0!==e.getHighBits()?this.E$(function(t){return new Ow({creation:fo.fromNumber(t.creationTime,!0),modification:fo.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:fo.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.I$,t.duration=e.toInt(),t)}E$(t){return this.A$=t.timescale,t.timescale=this.I$,t.duration=Ki(t.duration,this.b$,this.I$),t}x$(t){let e;for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof Ww?(e=s.trackId,t.boxes[i]=this.C$(s)):s instanceof Uw?(e=s.trackId,t.boxes[i]=this.P$(s)):s instanceof dw?this.D$(s,e):s instanceof ew&&this.N$(s)}}C$(t){const e=Ki(fo.fromNumber(t.duration,!0),this.b$,this.I$);return 0!==e.getHighBits()?this.P$(function(t){return new Uw({creation:fo.fromNumber(t.creationTime,!0),modification:fo.fromNumber(t.modificationTime,!0),duration:fo.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=e.toInt(),t)}P$(t){return t.duration=Ki(t.duration,this.b$,this.I$),t}D$(t,e){for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof aw?t.boxes[i]=this.M$(s,e):s instanceof uw&&(t.boxes[i]=this.L$(s,e))}}M$(t,e){this.T$.set(e,t.timescale);const i=Ki(fo.fromNumber(t.duration,!0),t.timescale,this.I$);return 0!==i.getHighBits()?this.L$(function(t){return new uw({creation:fo.fromNumber(t.creationTime,!0),modification:fo.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:fo.fromNumber(t.duration,!0)},t.language,t.flags)}(t),e):(t.timescale=this.I$,t.duration=i.toInt(),t)}L$(t,e){return this.T$.set(e,t.timescale),t.timescale=this.I$,t.duration=Ki(t.duration,t.timescale,this.I$),t}N$(t){for(const e of t.boxes)e instanceof Jp?this.B$(e):e instanceof $p&&this.O$(e)}B$(t){for(const e of t.entries)e.mediaTime=mN(e.mediaTime,this.b$,this.I$),e.segmentDuration=mN(e.segmentDuration,this.b$,this.I$)}O$(t){for(const e of t.entries)e.mediaTime=Ki(e.mediaTime,this.b$,this.I$),e.segmentDuration=Ki(e.segmentDuration,this.b$,this.I$)}R$(t){for(let e=0;e<t.boxes.length;e++){const i=t.boxes[e];i instanceof Dw?this.F$(i):i instanceof Iw?t.boxes[e]=this.V$(i):i instanceof Cw&&(t.boxes[e]=this.W$(i))}}F$(t){const e=this.S$(t.trackId);t.defaultSampleDuration=mN(t.defaultSampleDuration,e,this.I$)}V$(t){const e=Ki(fo.fromNumber(t.fragmentDuration,!0),this.b$,this.I$);return 0!==e.getHighBits()?this.W$(function(t){return new Cw(fo.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=e.toInt(),t)}W$(t){return t.fragmentDuration=Ki(t.fragmentDuration,this.b$,this.I$),t}w$(t){let e=yy(t);return e=e instanceof hy?this.U$(e):this.G$(e),e.serialize().join()}U$(t){const e=t.timescale,i=Ki(fo.fromNumber(t.earliestPresentationTime,!0),e,this.I$);if(0!==i.getHighBits())return this.G$(function(t){return new ay(t.referenceId,t.timescale,fo.fromNumber(t.earliestPresentationTime,!0),fo.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.I$,t.earliestPresentationTime=i.toInt();for(const i of t.references)i.subsegmentDuration=mN(i.subsegmentDuration,e,this.I$);return t}G$(t){const e=t.timescale;t.timescale=this.I$,t.earliestPresentationTime=Ki(t.earliestPresentationTime,e,this.I$);for(const i of t.references)i.subsegmentDuration=mN(i.subsegmentDuration,e,this.I$);return t}y$(t){const e=by(t),i=e.getSize();for(const t of e.boxes)t instanceof Ph&&this.H$(t);const s=e.getSize();if(s!==i){const t=s-i;for(const i of e.boxes)i instanceof Ph&&fN(i,t)}return e.serialize().join()}H$(t){let e;for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof jw?(e=this.S$(s.trackId),this.Z$(s,e)):s instanceof Yw?t.boxes[i]=this.X$(s,e):s instanceof pc?t.boxes[i]=this.z$(s,e):s instanceof Jw&&this.q$(s,e)}}Z$(t,e){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=mN(t.defaultSampleDuration,e,this.I$))}X$(t,e){const i=Ki(fo.fromNumber(t.baseMediaDecodeTime,!0),e,this.I$);return 0!==i.getHighBits()?this.z$(function(t){return new pc(fo.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),e):(t.baseMediaDecodeTime=i.toInt(),t)}z$(t,e){return t.baseMediaDecodeTime=Ki(t.baseMediaDecodeTime,e,this.I$),t}q$(t,e){let i=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=mN(s,e,this.I$);n.duration=t-i,i=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=vN(n.compositionTimeOffset,e,this.I$))}}constructor(t){super(),this.T$=$h(),this.I$=t}};function vN(t,e,i){return fo.fromInt(t,!1).multiply(i).divide(e).toNumber()}function mN(t,e,i){return fo.fromInt(t,!0).multiply(i).divide(e).toNumber()}function Ki(t,e,i){return en.TF(t).YF(en.kF(i,!0)).JF(en.kF(e,!0)).OF()}var gN=class{Y$(t){return t.pipeThrough(new Ho(this.K$))}constructor(t){this.K$=new _N(t)}};r(),r();var pN=function(t){return t[t.j$=64]="j$",t[t.Q$=103]="Q$",t[t.J$=107]="J$",t}({});function wN(t,e,i){const s=hc(t,e);if(s!==i)throw new b("Expected descriptor with tag "+i+", but found "+s)}function yN(t,e){wN(t,e,3);const i=bN(t,e),s=e.tc+i,n=Ni(t,e),r=hc(t,e),o=0!=(64&r),h=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=Ni(t,e)),o){c=Sc(t,e,hc(t,e))}h&&(l=Sc(t,e,2));const d=function(t,e){wN(t,e,4);const i=bN(t,e),s=e.tc+i,n=hc(t,e),r=hc(t,e),o=r>>2,h=0!=(2&r),a=Dg(t,e,3),u=os(t,e),c=os(t,e);let l;if(e.tc<s){const i=function(t,e){return t.getUint8(e.tc)}(t,e);5===i&&(l=function(t,e){wN(t,e,5);const i=bN(t,e),s=E(t,e,i);return{t0:5,e0:s}}(t,e))}return e.Sb(s),{t0:4,i0:n,s0:o,n0:h,r0:a,o0:u,h0:c,a0:l}}(t,e);return e.Sb(s),{t0:3,o:n,u0:u,qu:c,c0:a,l0:l,d0:d}}function bN(t,e){let i=0;for(let s=0;s<4;s++){const s=hc(t,e);if(i=i<<7|127&s,!(128&s))break}return i}function AN(t,e){const i=hc(t,e),s=hc(t,e),n=hc(t,e),r=hc(t,e),o=3&hc(t,e),h=31&hc(t,e),a=[];for(let i=0;i<h;i++){const i=Ni(t,e);a.push(E(t,e,i))}const u=hc(t,e),c=[];for(let i=0;i<u;i++){const i=Ni(t,e);c.push(E(t,e,i))}return{f0:i,_0:s,v0:n,m0:r,g0:o,p0:a,w0:c}}function wu(t,e,i){if(i&&e.byte>=i)return;const s=t.Cb(e.byte);return e.byte+=1,s}function SN(t,e){return function(t,e,i){let s=0,n=i;for(;n>0;)n-=1,s=256*s+wu(t,e);return s}(t,e,2)}r(),r(),r(),r(),r(),r();var TN=class t{y0(t){this.b0=this.b0.concat(t.b0),this.A0+=t.V}S0(t,e,i){const s=this.A0,n=i-e;n>0&&(this.b0.push({T0:e,k0:i,E0:n,x0:s,R0:t}),this.A0+=n)}Cb(t){for(const e of this.b0)if(e.x0<=t&&t<e.x0+e.E0)return e.R0[t+e.T0-e.x0]}I0(t,e){let i=e;for(const e of this.b0){const s=e.k0;for(let n=e.T0;n<s;n+=1,i+=1)t[i]=e.R0[n]}return i}get V(){return this.A0}set V(t){const e=this.b0;let i=this.A0-t;if(!(t>=this.A0))if(this.A0=t,0!==t)for(let t=e.length-1;t>=0;t-=1){const s=e[t];if(i<=s.E0)return s.k0-=i,s.E0-=i,void(e.length!==t+1&&(e.length=t+1));i-=s.E0}else e.length=0}get Zk(){const t=new Array(this.A0);let e=0;for(const i of this.b0){const s=i.k0;for(let n=i.T0;n<s;n+=1,e+=1)t[e]=i.R0[n]}return t}C0(){const t=new j(this.A0);let e=0;for(const i of this.b0){const s=i.k0;for(let n=i.T0;n<s;n+=1,e+=1)t[e]=i.R0[n]}return t}Tb(e){const i=new t;for(const t of this.b0)i.S0(t.R0,t.T0,t.k0);return i.GV=e||la({},this.GV),i}constructor(){this.A0=0,this.b0=[],this.GV={}}};r();var kN=[128,64,32,16,8,4,2,1];function Aa(t,e){const i=_.floor(e.bit/8),s=0==(t.Cb(i)&kN[e.bit%8])?0:1;return e.bit+=1,s}function Wo(t,e,i){let s=0,n=i;for(;n>0;)n-=1,s=2*s+Aa(t,e);return s}function EN(t,e){let i=0;for(;0===Aa(t,e)&&i<32;)i+=1;return Wo(t,e,i)+2**i-1}function xN(t,e){const i=EN(t,e);return 1&i?_.floor((i+1)/2):-_.floor(i/2)}function RN(t,e){const i=[],s={byte:1};let n;do{i.push(CN(t,e,s)),n=e.Cb(s.byte)}while(void 0!==n&&128!==n);return i}function IN(t,e){let i,s=0;do{i=wu(t,e),s+=i}while(255===i);return s}function CN(t,e,i){const s=IN(e,i),n=IN(e,i),r=i.byte,o=r+n;return i.byte=o,{P0:t,D0:s,N0:n,M0:r,L0:o,B0:e}}var PN=function(t){return t[t.O0=1]="O0",t[t.F0=2]="F0",t[t.V0=3]="V0",t[t.W0=4]="W0",t[t.U0=5]="U0",t[t.G0=6]="G0",t[t.H0=7]="H0",t[t.Z0=8]="Z0",t[t.X0=9]="X0",t}({}),DN=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function NN(t,e,i){let s=8,n=8;for(let r=0;r<i;r+=1){if(0!==n){n=(s+xN(t,e)+256)%256}s=0===n?s:n}}var MN=class{z0(){const t=this.q0;let e=_.max(0,this.Y0+t.length-2);const i=this.K0,s=i.V;let n=0;for(;e<s;e+=1){const s=i.Cb(e);0===s?n+=1:(3===s&&n>=2&&t.push(e),n=0)}this.Y0=e-t.length}j0(t){const e=this.q0;let i=t;for(const t of e){if(!(t<=i))return i;i+=1}return i}Cb(t){if(!(t>this.K0.V))return t>this.Y0&&this.z0(),this.K0.Cb(this.j0(t))}constructor(t){this.q0=[],this.Y0=0,this.K0=t}};function LN(t){const e=new MN(t);let i,s,n,r,o,h,a=0,u=0,c=0,l=0;const d=e.Cb(1),f={bit:32};if(EN(e,f),100===d||110===d||122===d||144===d){const t=EN(e,f);3===t&&(i=Aa(e,f)),EN(e,f),EN(e,f),Aa(e,f);if(1===Aa(e,f))for(let i=0;i<(3!==t?8:12);i+=1){1===Aa(e,f)&&NN(e,f,i<6?16:64)}}const v=EN(e,f),m=EN(e,f);if(0===m)EN(e,f);else if(1===m){Aa(e,f),xN(e,f),xN(e,f);const t=EN(e,f);for(let i=0;i<t;i+=1)xN(e,f)}EN(e,f),Aa(e,f);const g=EN(e,f),p=EN(e,f),w=Aa(e,f);0===w&&Aa(e,f),Aa(e,f);1===Aa(e,f)&&(a=EN(e,f),u=EN(e,f),c=EN(e,f),l=EN(e,f));if(1===Aa(e,f)){if(1===Aa(e,f)){const t=Wo(e,f,8);if(255===t)s=Wo(e,f,16),n=Wo(e,f,16);else{const e=DN[t];e&&(s=e[0],n=e[1])}}1===Aa(e,f)&&Aa(e,f);if(1===Aa(e,f)){Wo(e,f,3),Aa(e,f);1===Aa(e,f)&&(Wo(e,f,8),Wo(e,f,8),Wo(e,f,8))}1===Aa(e,f)&&(EN(e,f),EN(e,f)),r=Aa(e,f),1===r&&(o=Wo(e,f,32),h=Wo(e,f,32),Aa(e,f))}return{width:_.floor(16*(g+1)-2*a-2*u),height:_.floor((2-w)*(p+1)*16-2*c-2*l),GM:s,HM:n,Q0:r?h/(2*o):void 0,J0:i,$0:v}}function BN(t){const e=dn(jo.qD(t),Mt.dP);if(!e)return;const i=e.WD.lN,s=[];for(const t of e.Z){const e=t.WD.bN,i=t.gN.WD.lN;let h,a,u;for(const e of t.gN.RN.DN.MN.BN){const t=ON(e);var n,r,o;if(t)h=null!=(n=t.t1)?n:h,a=null!=(r=t.e1)?r:a,u=null!=(o=t.i1)?o:u}s.push({bN:e,lN:i,t1:h,e1:a,i1:u})}return{lN:i,Z:s}}function ON(t){let e,i,s;if(t.pw===Mt.kP){var n;const i=AN(na(t.vM.Zk),new Ui);e=function(t){return"avc1."+FN(t._0,2)+FN(t.v0,2)+FN(t.m0,2)}(i),s=null==(n=function(t){if(0===t.p0.length)return;const e=t.p0[0],i=new TN;return i.S0(e,0,e.byteLength),LN(i)}(i))?void 0:n.Q0}else if(t.pw===Mt.xP||t.pw===Mt.RP){const i=function(t,e){const i=e.xb(),s=Co(t,i,8),n=Co(t,i,2),r=Co(t,i,1),o=Co(t,i,5),h=Co(t,i,32),a=[];for(let e=0;e<6;e++)a.push(Co(t,i,8));const u=Co(t,i,8);i.Ab(4);const c=Co(t,i,12);i.Ab(6);const l=Co(t,i,2);i.Ab(6);const d=Co(t,i,2);i.Ab(5);const f=Co(t,i,3);i.Ab(5);const _=Co(t,i,3),v=Co(t,i,16),m=Co(t,i,2),g=Co(t,i,3),p=Co(t,i,1),w=Co(t,i,2),y=Co(t,i,8),b=[];for(let e=0;e<y;e++){const e=Co(t,i,1);i.Ab(1);const s=Co(t,i,6),n=Co(t,i,16),r=[];for(let e=0;e<n;e++){const e=Co(t,i,16),s=E(t,new Ui(i.tc>>3),e);i.Ab(8*e),r.push({s1:e,n1:s})}b.push({o1:e,h1:s,a1:n,u1:r})}return{f0:s,c1:n,l1:r,d1:o,_1:a,v1:u,m1:c,g1:l,w1:h,b1:d,A1:f,S1:_,T1:v,E1:g,R1:p,I1:m,g0:w,C1:y,P1:b}}(na(t.wM.Zk),new Ui);e=function(t,e){let i=t.toString()+".";switch(e.c1){case 0:break;case 1:i+="A";break;case 2:i+="B";break;case 3:i+="C";break;default:return}switch(i+=e.d1.toString()+".",i+=function(t){let e=t;return e=e>>>1&1431655765|(1431655765&e)<<1,e=e>>>2&858993459|(858993459&e)<<2,e=e>>>4&252645135|(252645135&e)<<4,e=e>>>8&16711935|(16711935&e)<<8,e=e>>>16|e<<16,e}(e.w1).toString(16)+".",e.l1){case 0:i+="L";break;case 1:i+="H";break;default:return}i+=e.v1.toString();const s=e._1.reduce(((t,e)=>0===t?e:e+1),0);for(let t=0;t<s;t++)i+="."+e._1[t].toString(16).toUpperCase();return i}(t.pw,i)}else if(t.pw===Mt.FP||t.pw===Mt.VP||t.pw===Mt.WP||t.pw===Mt.UP){const i=function(t,e){const i=e.xb(),s=Co(t,i,8),n=Co(t,i,8),r=Co(t,i,7),o=Co(t,i,6),h=Boolean(Co(t,i,1)),a=Boolean(Co(t,i,1)),u=Boolean(Co(t,i,1)),c=Co(t,i,4);return Co(t,i,28),Co(t,i,32),Co(t,i,32),Co(t,i,32),Co(t,i,32),{D1:s,N1:n,M1:r,L1:o,B1:h,O1:a,F1:u,V1:c}}(na(t.DM.Zk),new Ui);e=function(t,e){const i=t.toString(),s=Uo(e.M1.toString(),2,"0"),n=Uo(e.L1.toString(),2,"0");return i+"."+s+"."+n}(t.pw,i)}else if(t.pw===Mt.CP){const i=function(t,e){const i=e.xb(),s=Co(t,i,8);i.Ab(24);const n=Co(t,i,8),r=Co(t,i,8),o=Co(t,i,4),h=Co(t,i,3),a=Oa(t,i),u=Co(t,i,8),c=Co(t,i,8),l=Co(t,i,8),d=Co(t,i,16),f=new Array(8);for(let e=0;e<d;e++)f[e]=Co(t,i,8);return{f0:s,M1:n,L1:r,W1:o,U1:h,G1:a,FM:u,VM:c,WM:l,H1:d,Z1:f}}(na(t.bM.Zk),new Ui);e=function(t,e){let i=t.toString()+".";return i+="0"+e.M1+".",i+=Uo(""+e.L1,2,"0")+".",i+=Uo(""+e.W1,2,"0")+".",i+=Uo(""+e.U1,2,"0")+".",i+=Uo(""+e.FM,2,"0")+".",i+=Uo(""+e.VM,2,"0")+".",i+=Uo(""+e.WM,2,"0")+".",i+="0"+e.G1,i}(t.pw,i)}else if(t.pw===Mt.DP){const i=function(t,e){const i=e.xb();i.Ab(1);const s=Co(t,i,7),n=Co(t,i,3),r=Co(t,i,5),o=Oa(t,i),h=Oa(t,i),a=Oa(t,i),u=Oa(t,i),c=Oa(t,i),l=Oa(t,i),d=Co(t,i,2);i.Ab(3);const f=Oa(t,i);let _;return f?_=Co(t,i,4):i.Ab(4),{XD:s,X1:n,z1:r,q1:o,Y1:h,K1:a,j1:u,Q1:c,J1:l,t2:d,e2:f,i2:_}}(na(t.TM.Zk),new Ui);e=function(t,e,i){let s=t.toString()+".";if(s+=e.X1+".",s+=""+Uo(""+e.z1,2,"0"),s+=(0===e.q1?"M":"H")+".",s+=(1===e.K1?12:10)+".",s+=(1===e.X1?0:e.j1)+".",s+=""+e.Q1+e.J1+(1===e.Q1&&1===e.J1?e.t2:"0"),i&&i.OM===WS.ON_SCREEN_COLOURS){const t=i;s+="."+Uo(""+t.FM,2,"0")+"."+Uo(""+t.VM,2,"0")+"."+Uo(""+t.WM,2,"0")+"."+(t.UM?1:0)}return s}(t.pw,i,t.kM)}else if(t.pw===Mt.zP){i=function(t){const e=t.d0;switch(e.i0){case pN.j$:return function(t){var e;if(!(null==(e=t.a0)?void 0:e.e0))return"mp4a.40";const i=function(t,e){let i=Co(t,e,5);31===i&&(i=32+Co(t,e,6));const s=Co(t,e,4);let n;return 15===s&&(n=Co(t,e,24)),{s2:i,n2:s,o2:n,h2:Co(t,e,4)}}(na(t.a0.e0),new pg);return"mp4a.40."+i.s2}(e);case pN.Q$:return"mp4a.40.2";case pN.J$:return"mp4a.40.34"}}(yN(na(t.hM.Zk),new Ui))}else if(t.pw===Mt.YP)i="fLaC";else{if(t.pw!==Mt.GP)return(t.pw===Mt.tD||t.pw===Mt.$P)&&t.RM?ON(t.RM):void 0;i="ec-3"}return{t1:e,e1:i,i1:s}}function FN(t,e){const i=t.toString(16);return Uo(i,e,"0")}function VN(t,e){const i=jo.qD(na(t)),s=function(t,e){let i;for(const n of t.Z){var s;const t=null==(s=n.sL)?void 0:s.sL;if(t){const s=n.WD.bN,r=Ti(e.Z,(t=>t.bN===s)),o=Uh.TF(t,r.lN);i&&!o.mF(i)||(i=o)}}return i}(dn(i,Mt.eD),e),n=dn(i,Mt.aD);return{LO:s.uF(),a2:n.Zk}}r(),r();var WN=Z.jm,UN=class extends Bo{get mj(){return this.Ej}set mj(t){this.Ej=t}get yj(){return this.Ij}set yj(t){this.Ij=t}get ca(){return this.u2||this.c2.updating}l2(t,e,i){switch(t.pw){case Ut.QQ:case Ut.pk:return this.d2((i=>this.f2(t,e,i)),i);case Ut.JQ:throw new g("Opaque segments are not supported on web.")}}_2(t,e){switch(t.pw){case Ut.QQ:return this.d2((e=>this.m2(t,e)),e);case Ut.pk:throw new g("Streaming initialization segments are not supported on web.");case Ut.JQ:throw new g("Opaque initialization segments are not supported on web.")}}async m2(t,e){this.g2?this.w2=BN(na(t.Zk)):(await this.b2(t,void 0,e),WN&&(this.A2=!1,this.S2=t))}async f2(t,e,i){WN&&this.A2&&this.S2&&await this.m2(this.S2,i);try{if(ot(i),this.g2&&this.w2){const n=await async function(t,e){switch(t.pw){case Ut.QQ:return t;case Ut.pk:{const i=await He(t.Zk,e);return ot(e),{pw:Ut.QQ,Zk:new j(i)}}case Ut.JQ:throw new g("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,i),r=VN(n.Zk,this.w2);var s;t={pw:Ut.QQ,Zk:r.a2},e=la({},e,{PV:r.LO+(null!=(s=e.PV)?s:0)})}await this.b2(t,e,i),this.yo(new pe(ss.KQ))}finally{t.pw===Ut.pk&&t.Zk.cancel(new $).catch(Bt)}}async b2(t,e,i){switch(ot(i),e&&await this.T2(e),t.pw){case Ut.QQ:if(this.E2){const e=this.E2.Y$(Tb(t.Zk));return await this.R2(e,i)}return await this.I2(t.Zk);case Ut.pk:if(this.E2){const e=this.E2.Y$(t.Zk);return await this.R2(e,i)}return await this.R2(t.Zk,i)}}async R2(t,e){const i=this.C2._R,s=$D(t).getReader();let n=!1;try{for(;;){const t=await hu(s.read(),e);if(t.done){n=!1;break}ot(e);const i=ju(t.value);n=!0,await this.I2(i)}}catch(t){if(s.cancel(t).catch(Bt),n){await this.P2();const t=this.C2._R.Sn(i.XL());for(let e=0;e<t.V;e++)await this.D2(t.Cn(e),t.jn(e))}throw t}}N2(t,e){return this.d2((()=>this.M2(t,e)))}async M2(t,e){this.c2.appendWindowStart===t&&this.c2.appendWindowEnd===e||(await this.P2(),this.c2.appendWindowStart=0,this.c2.appendWindowEnd=e,this.c2.appendWindowStart=t)}async T2(t){if(this.c2.timestampOffset!==t.PV)try{this.c2.timestampOffset=t.PV}catch(e){await this.P2(),this.c2.timestampOffset=t.PV}}async I2(t){this.c2.appendBuffer(t),this.L2=!0,await this.B2()}O2(t,e,i){return this.d2((i=>this.D2(t,e,i)),i)}async D2(t,e,i){ot(i),this.c2.remove(t,e),await this.B2()}B2(){const t=this.C2._R;return new Promise(((e,i)=>{let s,n=!1,r=()=>{n=!0},o=()=>{n=!1,s="error"},h=()=>{n=!1,s="aborted"},a=()=>{n=!1,s="sourceclose",u()},u=()=>{c(),n&&!s?(t.sB(this.C2._R)||this.yo(new pe(ss.KQ)),e()):i(new g(s))},c=()=>{this.c2.removeEventListener("update",r),this.c2.removeEventListener("error",o),this.c2.removeEventListener("abort",h),this.c2.removeEventListener("updateend",u),this.F2.fn(To.eJ,a)};this.c2.addEventListener("update",r),this.c2.addEventListener("error",o),this.c2.addEventListener("abort",h),this.c2.addEventListener("updateend",u),Z.Em&&Z.Rm<3&&this.F2.yn(To.eJ,a)}))}V2(){return this.d2((()=>this.P2()))}async P2(){if(this.F2.tI===rM.OE){WN&&(this.A2=!0),this.c2.updating&&(this.u2=!0);try{this.c2.abort()}catch(t){0,this.u2=!1}this.ca&&await this.B2().catch(Bt)}}W2(){return"function"==typeof this.c2.changeType&&!Z.Am}uJ(t){if(this.U2(),this.F2.tI===rM.G2)return;var e;this.H2=t;const i=null!=(e=this.F2.Z2(t.Ik))?e:t.Ik;this.g2=GN(t.Ik,this.X2),this.W2()&&!ch(this.X2,i)&&(this.X2=i,this.c2.changeType(this.X2))}z2(){this.F2.tI!==rM.xy||this.q2||this.ca||(this.c2.timestampOffset=this.c2.timestampOffset,this.F2.Y2())}async d2(t,e){this.U2();const i=new $t;i.zw(this.K2.Bw),e&&i.zw(e);try{this.q2=t(i.Bw),await this.q2,this.F2.Y2(),this.ca&&await this.B2()}finally{this.q2=void 0,i.Ww()}}U2(){if(this.q2)throw new g("Internal error")}async Ww(){this.Bo(),this.K2.Xw(),this.q2&&(await this.q2.catch(Bt),this.q2=void 0),this.c2.removeEventListener("updateend",this.j2),this.c2.removeEventListener("bufferedchange",this.Q2)}constructor(t,e,i,s,n){var r;if(super(),this.Ej=20,this.Ij=30,this.u2=!1,this.L2=!1,this.q2=void 0,this.K2=new $t,this.A2=!1,this.S2=void 0,this.g2=!1,this.w2=void 0,this.j2=()=>{this.u2=!1},this.Q2=t=>{t.removedRanges&&this.yo(new pe(ss.KQ))},this.F2=e,this.C2=t,this.c2=i,this.c2.addEventListener("updateend",this.j2),this.c2.addEventListener("bufferedchange",this.Q2),this.H2=s,this.X2=n,this.g2=GN(s.Ik,n),null==(r=e.md)?void 0:r.np){var o;const t=null!=(o=e.md.J2)?o:1e5;this.E2=new gN(t)}}};function GN(t,e){return Cl(t,"audio/mp4")&&Cl(e,"audio/mpeg")}r();var HN=class{get _R(){if(this.t3.tI===rM.G2)return ee.fB();let t=ee.xn(this.c2.buffered).Sn(new ee([0,1/0]));const e=this.e3;return void 0!==e&&t.V>0&&t.jn(t.V-1)===e&&(t=t.KL(ee.lB(e))),t}SJ(){return!!this.e3&&this._R.HL().gr(this.e3)}i3(){const t=this._R;this.e3=t.V>0?t.jn(t.V-1):0,this.t3.s3()}z2(){this.e3=void 0}constructor(t,e){this.e3=void 0,this.t3=e,this.c2=t}};function ZN(t){const e=t.dT("codecs");return e?e.split(",").map((t=>t.trim())):[]}function XN(t,e){return!("opus"===t)&&!("opus"===e)||t===e}function zN(t,e){const i=qN(t)||YN(t),s=qN(e)||YN(e);return!i&&!s||t.split(".")[0]===e.split(".")[0]}function qN(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function YN(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function Dn(t,e){if(t===e)return!0;const i=t.split("."),s=e.split("."),n=i[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,e]=i,[,n,r]=s;if(t!==n)return!1;if(Number(e)!==Number(r))return!1}return!0}function KN(t,e,i,s,n,r,o){const h=new HN(n,t),a=new UN(h,t,n,i,r);return new jN(t,e,i,s,h,a,o)}r();var jN=class extends Bo{get _R(){return this.C2._R}get md(){return this.IT}get Ik(){return this.ST}get n3(){return this.r3}get o3(){return this.h3.NJ}get mj(){return this.a3.mj}set mj(t){this.a3.mj=t}get yj(){return this.a3.yj}set yj(t){this.a3.yj=t}get ca(){return this.a3.ca}SJ(){return this.C2.SJ()}i3(){this.C2.i3()}z2(){this.C2.z2(),this.a3.z2()}u3(t,e){this.h3.LJ(t,e)}l3(t,e){this.h3.BJ(t,e)}d3(){return this.a3.V2()}l2(t,e,i){return this.a3.l2(t,e,i)}_2(t,e,i){return this.a3._2(t,i)}N2(t,e){return Z.Em&&Z.Rm<3?this.a3.N2(t,1/0):this.a3.N2(t,e)}async jS(t,e,i){this.l3(t,e);const s=this._R;await this.a3.O2(t,e,i);const n=0!==s.V&&0===this._R.V;(Z.ag||Z.Cm)&&n&&this.LB.Sb(this.LB.yR)}hJ(t){const e=t.Ik;if(this.ST===e)return!0;const i=this.f3.get(e);if(void 0!==i)return i;const s=this._3(t);return this.f3.set(e,s),s}_3(t){const e=this.F2.Z2(t.Ik);if(void 0===e)return!1;const i=Py(this.ST),s=Py(e),n=ZN(i),r=ZN(s);if(this.a3.W2()){if(!function(t,e){return Jm(t,e,zN)}(n,r))return!1;if(Z.dg&&!function(t,e){return Jm(t,e,XN)}(n,r))return!1}else{if(i.pw!==s.pw)return!1;if(!function(t,e){return Jm(t,e,Dn)}(n,r))return!1}return!0}async uJ(t){const e=t.Ik;this.ST!==e&&(this.f3.clear(),this.a3.uJ(t),this.ST=e),this.IT=t,this.F2.v3()}async Ww(){this.f3.clear(),this.Bo(),this.h3.gn();try{this.a3.fn(ss.KQ,this.Ds),await this.a3.Ww()}catch(t){}}constructor(t,e,i,s,n,r,o){super(),this.f3=_u(),this.F2=t,this.IT=i,this.ST=i.Ik,this.r3=s,this.LB=e,this.C2=n,this.a3=r,this.h3=o,this.a3.yn(ss.KQ,this.Ds)}};r();var ko=class{m3(){let t=this.Cn,e=this.jn;if(this.g3||this.w3){const i=.001*(As.Bg()-this.y3);this.g3&&(t+=i),this.w3&&(e+=i)}return ee.dB(t,e)}constructor(t,e,i=!1,s=!1){this.Cn=t,this.jn=e,this.g3=i,this.w3=s,this.y3=As.Bg()}};r(),r();var QN=.5,JN=[Mi.so,Mi.Uy,Mi.qy,Mi.zy,Mi.Dy,Mi.My,Mi.xy,Mi.Hy,Zc.QI,sn.ua],$N=class{b3(t){this.A3.push(t),t.yn(jD.CJ,this.S3)}get NJ(){return this.A3.reduce(((t,e)=>t.KL(e.NJ)),ee.fB())}gn(){this.T3(),this.E3.fn(Zc.QI,this.x3),this.LB.fn(Mi.Gy,this.x3),this.LB.fn(JN,this.R3),this.A3.forEach((t=>t.fn(jD.CJ,this.S3))),this.I3(),this.C3=!0}xJ(t){if(this.LB.kR)return!1;if(0!==this.P3)return!1;const e=this.C2._R,i=e.JL(t);if(i>=0&&t+QN<e.jn(i))return!1;const s=i>=0?i+1:e.hB(t);if(s<0||s>=e.V)return!1;const n=e.Cn(s);if(ee.dB(t,n).QL(this.NJ).cB>1)return!1;if(0===t&&!this.LB.nI)return this.D3(t,n,2e3),!0;if(As.Jx)return this.D3(t,n,250),!0;return!(_.abs(n-t)<=.001)&&(this.N3(n),!0)}D3(t,e,i){this.I3(),this.M3=t,this.LB.yn(Mi.qy,this.L3),this.P3=As.Fg((()=>{this.M3===this.LB.yR&&this.N3(e),this.I3()}),i)}I3(){0!==this.P3&&(this.LB.fn(Mi.qy,this.L3),As.Og(this.P3),this.P3=0)}N3(t){this.LB.Sb(t,!1,!0)}B3(){0!==this.O3&&(As.Og(this.O3),this.O3=0),this.LB.fn(Mi.$y,this.Kl)}F3(){this.C3||0===this.V3&&(this.B3(),this.V3=As.Op(this.W3,250))}T3(){0!==this.V3&&(As.Fp(this.V3),this.V3=0),this.B3(),this.LB.nI||(this.U3=0)}G3(){return!this.LB.ZR&&!this.LB.nI&&0!==this.LB.zR&&!this.LB.kR&&!this.LB.lt&&(this.H3()||this.E3.tI>=gs.JB)}H3(){const t=this.LB.yR,e=this.C2._R,i=e.JL(t);return-1!==i&&e.jn(i)>t+QN}Z3(t,e){const i=e.JL(t);return i>-1?e.jn(i):t}constructor(t,e,i,s){this.C2=t,this.E3=e,this.LB=i,this.C3=!1,this.A3=[],this.P3=0,this.O3=0,this.X3=0,this.M3=0,this.U3=0,this.V3=0,this.z3=1,this.S3=t=>{const e=this.LB.yR,i=t.DJ.gr(e),s=t.DJ.gr(e,QN)&&this.LB.tI<=gs.QB;(i||s)&&this.xJ(e)},this.x3=Vd((t=>{if(this.C3)return;if(this.E3.tI<=gs.QB){const t=this.LB.yR;this.xJ(t)||this.W3()}else this.I3()}),100),this.Kl=Vd((t=>{this.F3()}),100),this.L3=t=>{t.currentTime!==this.M3&&this.I3()},this.R3=()=>{this.G3()?0===this.V3&&(this.LB.yn(Mi.$y,this.Kl),this.O3=As.Fg((()=>{this.F3()}),3500)):this.T3()},this.W3=()=>{const t=this.X3,e=this.U3,i=this.LB.yR,s=As.Bg(),n=this.C2._R;if(t!==i)return this.X3=i,this.U3=s,this.z3=1,void(this.q3=As.tR?2e3:1e3);if(this.G3()&&0!==n.V&&e>0&&s>e+this.q3){let t;const e=this.NJ.HL().QL(n),s=e.oB(i);if(-1!==s){const n=e.Cn(s);if(n-i<1){const i=e.jn(s);0,t=i}}var r;if(!t)t=null==(r=this.Y3)?void 0:r.determineStallJumpTarget(),t||(t=i+.01*this.z3,n.gr(t)||(t=this.Z3(i,n)));0,this.X3=t,this.z3++,this.q3=_.min(2*this.q3,1e4),this.N3(t)}},this.E3.yn(Zc.QI,this.x3),this.LB.yn(Mi.Gy,this.x3),this.LB.yn(JN,this.R3),this.Y3=s,this.q3=As.tR?2e3:1e3}};function tM(t){const e=[];if(t.K3&&e.push(t.K3._R),t.j3&&e.push(t.j3._R),0===e.length)return ee.fB();let i=0;for(const t of e)t.V>0&&(i=_.max(i,t.jn(t.V-1)));const s=t.SJ;let n=new ee([0,i],[!0,s]);for(let t of e)s&&t.V>0&&(t=t.KL(new ee([t.jn(t.V-1),i],[!0,!0]))),n=n.Sn(t);return n}function eM(t,e,i){const s=t._R;let n,r=s.JL(e);if(r>=0){if(!(r+1<s.V))return Promise.resolve();n=s.Cn(r+1)}else{if(r=s.hB(e),!(r>=0))return Promise.resolve();n=s.Cn(r)}return t.jS(n,1/0,i)}function iM(t,e,i){if(!t.gr(e)){const s=t.JL(e,i);if(s>=0){const i=t.Cn(s);if(e<i)return i}}return e}r();var sM=Z.Fm||Z.Wm,nM=Z.zm||Z.jm||Z.Ka,rM=function(t){return t.G2="closed",t.OE="open",t.xy="ended",t}({}),oM=class extends qD{get K3(){return this.Q3}get j3(){return this.J3}get ct(){if(this.t4)return this.t4;const t=this.qG.duration;return t===Lu?1/0:t}e4(t){if(S(t)||t<0)throw new g("Invalid duration");this.i4()?this.s4(t):this.t4=t}s4(t){const e=t===1/0;if(e&&this.qG.setLiveSeekableRange){const t=2**39;this.qG.setLiveSeekableRange(0,t)}this.qG.duration=e?nM?1/0:Lu:t,this.t4=void 0}get _R(){return sM?tM(this):function(t,e){let i=e;return i.V>0&&t.SJ&&(i=i.KL(ee.lB(i.jn(i.V-1)))),i}(this,ee.xn(this.YT.buffered))}get TJ(){var t;return null==(t=this.Q3)?void 0:t._R}get kJ(){var t;return null==(t=this.J3)?void 0:t._R}get iI(){return this.n4.m3().Sn(new ee([0,this.ct],[!0,!0]))}r4(t,e,i,s){this.n4=new ko(t,e,!!i,!!s)}get SJ(){return(!this.Q3||this.Q3.SJ())&&(!this.J3||this.J3.SJ())}get tI(){return this.qG.readyState}async bj(){const t=this.IT,e=Ti(t.o4,(t=>Cl(t.Ik,"audio"))),i=Ti(t.o4,(t=>Cl(t.Ik,"video")));if(this.YT.disableRemotePlayback=!0,await this.h4(),e){const t=new JD;var s;this.a4.b3(t);const i=null!=(s=this.Z2(e.Ik))?s:e.Ik;this.u4=this.qG.addSourceBuffer(i),this.Q3=KN(this,this.LB,e,Io.cE,this.u4,i,t),this.Q3.yn(ss.KQ,this.Q2)}if(i){const t=new JD;var n;this.a4.b3(t);const e=null!=(n=this.Z2(i.Ik))?n:i.Ik;this.c4=this.qG.addSourceBuffer(e),this.J3=KN(this,this.LB,i,Io.lE,this.c4,e,t),this.J3.yn(ss.KQ,this.Q2)}this.cJ.$n(this,t)}async h4(){await super.yJ(this.qG),"open"!==this.tI&&await bA(this.qG,"sourceopen")}i4(){if("open"!==this.tI)return!1;const t=this.Q3&&this.Q3.ca,e=this.J3&&this.J3.ca;return!(t||e)}i3(){this.l4=!0,this.Q3&&this.Q3.i3(),this.J3&&this.J3.i3(),this.l4=!1,this.d4()}z2(){this.Q3&&this.Q3.z2(),this.J3&&this.J3.z2()}hJ(t){const e=Ti(t.o4,(t=>Cl(t.Ik,"audio"))),i=Ti(t.o4,(t=>Cl(t.Ik,"video")));if(this.Q3){if(!e)return!1;if(!this.Q3.hJ(e))return!1}else if(e)return!1;if(this.J3){if(!i)return!1;if(!this.J3.hJ(i))return!1}else if(i)return!1;return!!super.hJ(t)}async uJ(t){const e=Ti(t.o4,(t=>Cl(t.Ik,"audio"))),i=Ti(t.o4,(t=>Cl(t.Ik,"video"))),s=[];this.Q3&&s.push(this.Q3.uJ(e)),this.J3&&s.push(this.J3.uJ(i)),await Promise.all(s),await super.uJ(t)}lJ(t){super.lJ(t)}async Ww(){if(this.qG.removeEventListener("sourceclose",this.f4),Z.Cm&&await this.AJ(),this.Q3){if(await this.Q3.Ww(),this.Q3=void 0,Dm()&&(Z.Cm||Z.Em))try{this.qG.removeSourceBuffer(this.u4)}catch(t){}this.u4=void 0}if(this.J3){if(await this.J3.Ww(),this.J3=void 0,Dm()&&(Z.Cm||Z.Em))try{this.qG.removeSourceBuffer(this.c4)}catch(t){}this.c4=void 0}this.YT.src&&URL.revokeObjectURL(this.YT.src),this.YT.disableRemotePlayback=!1,this.LB.fn([Mi.qy,Mi.Dy],this._4),this.a4.gn(),Z.Em&&await this.AJ(),await super.Ww()}v3(){const t=this.IT,e=t.o4.map((t=>Cl(t.Ik,"audio")&&this.Q3?this.Q3.md:Cl(t.Ik,"video")&&this.J3?this.J3.md:t));this.IT=la({},t,{o4:e})}s3(){this.l4||this.d4()}get v4(){if(!this.SJ)return!1;const t=this._R;return 0!==t.V&&t.Cn(t.V-1)<=this.LB.yR}d4(){this.v4&&this.i4()&&(this.qG.endOfStream(),this.t4=void 0,this.yo(new pe(To.$Q)),this.LB.Q2())}Y2(){this.i4()&&(this.SJ?this.d4():void 0!==this.t4&&this.s4(this.t4))}xJ(t){return this.a4.xJ(t)}RJ(){return!0}Z2(t){return hM(this.m4,t)}static IJ(t){const e=Lf(t.g4);if(void 0===e)return!1;if("function"!=typeof e.isTypeSupported)return!1;const i=new Mf(t.g4);for(const e of t.o4)if(void 0===hM(i,e.Ik))return!1;return!0}constructor(t,e,i,s,n,r=new Mf(t.g4),o){super(t,e,s,n),this.Q3=void 0,this.u4=void 0,this.J3=void 0,this.c4=void 0,this.n4=new ko(0,1/0),this.t4=void 0,this.l4=!1,this.f4=()=>{this.yo(new pe(To.eJ))},this.w4=()=>{this.yo(new pe(To.sJ))},this._4=()=>{this.d4()},this.Q2=()=>{this.LB.Q2()},this.m4=r,this.qG=this.m4._p(),this.qG.addEventListener("sourceclose",this.f4),this.qG.addEventListener("sourceopen",this.w4),this.LB.yn([Mi.qy,Mi.Dy],this._4),this.a4=new $N(this,i,this.LB,o)}};function hM(t,e){const i=Py(e),s=ZN(i),n="audio/mp4"===i.pw,r=n&&1===s.length&&"mp4a.40.34"===s[0];if(t.mp(e)&&(!r||!Z.jm))return e;if(r){const e=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const i of e)if(t.mp(i))return i}if(n&&1===s.length&&"flac"===s[0].toLowerCase()){const i=["flac","fLaC","FLAC"];for(const s of i){const i='audio/mp4; codecs="'+s+'"';if(t.mp(e))return i}}}r(),r();var aM=class extends pe{constructor(t){super(Mi.Dy),this.currentTime=t}},uM=[Mi.eb,Mi.Hy,Mi.qy,Mi.Dy,Mi.so,Mi.Uy],cM=class extends Bo{get yR(){return this.nZ}get y4(){return this.b4}get A4(){return this.S4}get ct(){return this.IA}get kR(){return this.T4}get ZR(){return this.hZ}get tI(){return this.E4}get nI(){return this.rZ}get FR(){return this.oZ}set FR(t){this.FR!==t&&(this.oZ=t,this.yo(new eh(this.yR,this.dI)))}get zR(){return this.aZ}set zR(t){this.zR!==t&&(this.aZ=t,this.yo(new Nu(this.yR,this.zR)))}get dI(){return this.UA}set dI(t){this.dI!==t&&(this.UA=t,this.yo(new eh(this.yR,this.dI)))}Sb(t,e,i){this.nZ!==t&&(this.nZ=t,this.b4=e,i&&!this.rZ?(this.S4=!0,this.yo(new aM(this.yR))):(this.S4=!1,this.rZ=!0,this.yo(new _t(this.yR))))}bI(){this.hZ||(this.hZ=!0,this.yo(new vl(this.yR)))}AI(){this.hZ&&(this.hZ=!1,this.yo(new Xt(this.yR)))}Ww(){this.Bo()}constructor(t,e,i,s,n,r,o,h,a,u,c){super(),this.nZ=t,this.IA=e,this.T4=i,this.hZ=s,this.rZ=n,this.oZ=r,this.aZ=o,this.UA=h,this.E4=a,this.b4=u,this.S4=c}};function lM(t){return new cM(t.yR,t.ct,t.kR,t.ZR,t.nI,t.FR,t.zR,t.dI,t.tI,!1,t.A4)}function dM(t,e){e.ct===t.ct||S(e.ct)&&S(t.ct)||t.yo(new re(t.ct)),t.FR=e.FR,t.dI=e.dI,t.zR=e.zR,e.ZR?t.bI():t.AI().catch(Bt),e.yR!==t.yR||e.tI>gs.jB&&t.tI===gs.jB?t.Sb(e.yR,e.y4,e.A4):!e.nI&&t.nI?t.yo(new _t(t.yR)):e.nI&&!t.nI&&t.tI>=gs.QB&&t.yo(new ga(t.yR)),!e.kR&&t.kR&&t.yo(new Fs(t.yR))}r(),r();var fM=class extends Bo{get tI(){return this.eI()}x4(t){this.AW!==t&&(this.AW=t,this.yo(new au(this.LB.yR,t)))}R4(){this.x4(this.eI())}tr(){this.x4(gs.jB)}Ww(){this.Bo()}constructor(t){super(),this.AW=gs.jB,this.I4=()=>{this.R4()},this.LB=t}};r();var _M=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],Ka=class extends fM{eI(){let t=this.LB.XG.readyState;return t>gs.QB&&this.LB.C4?gs.QB:(this.LB.XG.seeking&&t>gs.Xn&&(t=gs.Xn),t)}Ww(){for(const t of _M)this.LB.XG.removeEventListener(t,this.I4);super.Ww()}constructor(t){super(t);for(const t of _M)this.LB.XG.addEventListener(t,this.I4)}};r();var vM=class extends fM{eI(){if(this.LB.XG.readyState===gs.jB)return gs.jB;const t=this.P4(),e=t?t.jn-t.Cn:0;if(!t)return gs.Xn;const i=this.LB.zR;return this.D4()||e>=3*i?gs.$B:e>=3?gs.JB:gs.QB}P4(){const t=this.LB.yR,e=this.LB._R.YL(.04),i=e.JL(t);if(!(i<0))return{Cn:t,jn:e.jn(i)}}D4(){if(this.LB.kR)return!0;const t=this.LB.ct,e=this.P4();return!!e&&t-e.jn<=.16666666666666666}Ww(){this.LB.fn([Mi.qy,Mi.Dy],this.I4);for(const t of _M)this.LB.XG.removeEventListener(t,this.I4);super.Ww()}constructor(t){super(t),this.LB.yn([Mi.qy,Mi.Dy],this.I4);for(const t of _M)this.LB.XG.addEventListener(t,this.I4)}};r(),r();var mM=[Zc.QI,Mi.so,Mi.Uy,Mi.qy,Mi.zy,Mi.Dy,Mi.My,Mi.xy,sn.ua],gM=class extends Bo{N4(){return(!this.gW.A4||!this.gW.M4)&&this.gW.tI<gs.JB}L4(){return!this.gW.nI&&!(this.gW.ZR||this.gW.kR||this.gW.lt||this.N4())}Yn(){const t=this.B4;this.B4=this.L4(),!t&&this.B4&&this.yo(new ce(this.gW.yR))}tr(){this.B4=!1}Ww(){this.Bo(),this.gW.fn(mM,this.fK)}constructor(t){super(),this.B4=!1,this.fK=()=>{this.Yn()},this.gW=t,this.gW.yn(mM,this.fK)}},pM=class extends gM{L4(){return this.O4&&super.L4()}Yn(){this.O4&&(this.YT.paused||this.YT.ended||this.YT.error)&&(this.O4=!1),super.Yn()}tr(){super.tr(),this.O4=!1}Ww(){this.YT.removeEventListener(Zc.BL,this.IW),super.Ww()}constructor(t){super(t),this.O4=!1,this.IW=()=>{this.O4=!0,this.Yn()},this.YT=t.XG,this.YT.addEventListener(Zc.BL,this.IW)}};r();var wM=class extends pe{constructor(t){super(sn.ua),this.lt=t}};function yM(t,e){return t.LO<=e&&t.BO>e}function be(t,e){return function(t,e){return Fm(t.LO,e.LO,Ok)}(t,e)||function(t,e){return Fm(t.BO,e.BO,Ok)}(t,e)}function bM(t,e){return function(t,e){return Fm(t.HO,e.HO,Ok)}(t,e)||function(t,e){return Fm(t.ZO,e.ZO,Ok)}(t,e)}function AM(t,e,i){let s=function(t,e,i,s,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=t.length);let h=r,a=o-1;for(;h<=a;){const o=h+(a-h>>1),u=s(i(t[o]),e);if(u<0)h=o+1;else if(u>0)a=o-1;else{if(!(n&&o>r&&0===s(i(t[o-1]),e)))return o;a=o-1}}return~h}(t,e,Fd,i,!0);if(s<0)return s;for(;s<t.length&&i(e,t[s])===Qc.Zr;s++)if(t[s].JO(e))return s;return-(s+1)}function SM(t,e,i){const s=AM(t,e,i);return s>=0?s:-(s+1)}function TM(t){const e=t.Ht;if(!e)return-1;if(t instanceof Le)return e.F4(t);const i=e.L;if(!i)return-1;const s=AM(i.oC,t,be);return s>=0?s:-1}function kM(t,e){const i=function(t,e,i){const s=t.length,n=e.length;let r=0,o=0;const h=[],a=[];for(;r<s&&o<n;){const s=t[r],n=e[o];s===n?(r++,o++):i(n,s)<=0?(h.push(n),o++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;o<n;)h.push(e[o]),o++;return{V4:h,W4:a}}(t,e,be);return function(t,e){const i=e.length;for(let s=0;s<i;s++)t[s]=e[s];t.length=i}(t,e),i}r(),r(),r(),r();var EM=class{get oC(){return this.U4}get V(){return this.U4.length}get ga(){if(this.Za){const t=this.U4;this.Za.length=t.length;for(let e=0;e<t.length;e++)this.Za[e]=t[e].ga}else this.Za=this.ma();return this.Za}ma(){return function(t){const e=[];for(let i=0;i<t.V;i++)e[i]=t.Cb(i).ga;return e.item=e=>{const i=0|e,s=t.Cb(i);return s&&s.ga||void 0},w.defineProperty(e,"constructor",{value:Nk}),e}(this)}bO(t){const e=this.U4;for(let i=e.length-1;i>=0;i-=1){const s=e[i];if(t.JO(s))return!0}return!1}Cb(t){return this.U4[t]}constructor(t){this.Za=void 0,this.U4=t}};r();var xM=class extends er{ma(){return new RM(this.Ht.ga,this.tI)}constructor(t,e){super(Eo.QI),this.Ht=t,this.tI=e}},RM=class extends nr{constructor(t,e){super("readystatechange"),this.track=t,this.readyState=e}};r();var IM=class extends er{ma(){return new CM(this.Ht.ga)}constructor(t){super(Eo.$I),this.Ht=t}},CM=class extends nr{constructor(t){super("typechange"),this.track=t}};r();var Ms=class extends er{ma(){return new PM(this.DO.ga)}constructor(t){super(Eo.FI),this.DO=t}},PM=class extends nr{constructor(t){super("addcue"),this.cue=t}};r();var DM=class extends er{ma(){return new NM(this.DO.ga)}constructor(t){super(Eo.WI),this.DO=t}},NM=class extends nr{constructor(t){super("removecue"),this.cue=t}},po=class extends Bo{get q(){return this.G4}get L(){return this.H4}Z4(t){return Ti(this.H4.oC,(e=>e.o===t))}get dW(){return this.g_}set dW(t){this.g_=t}get NC(){return this.X4}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return Jh(this)}get o(){return this.US}get TC(){return this.TO}get IC(){return this.z4}set IC(t){this.z4=t}get Lt(){return this.q4}get kh(){return this.kO}set kh(t){t!==this.kO&&(this.kO=t,this.yo(new Qu(this)))}get gs(){return this.CA}get kC(){return this.Y4}get TE(){return this.qo}set TE(t){this.K4(t)}K4(t){const e=fu(t);e!==this.TE&&(this.qo=e,e===yh.Ch&&(this.j4.forEach((t=>{t.Yh=!1})),Pn(this.j4),this.Q4=0),this.yo(new Bc(this)))}get tI(){return this.E4}set tI(t){this.E4!==t&&(this.E4=t,this.yo(new xM(this,this.E4)))}get MC(){return this.J4}set MC(t){this.J4=t}get pw(){return this.pp}set pw(t){this.pp!==t&&(this.pp=t,this.yo(new IM(this)))}uW(t){if(!t||t.Ht)return;const e=AM(this.t5,t,bM);if(e>=0)return;t.Ht=this;const i=-(e+1);this.t5.splice(i,0,t);const s=SM(this.L.oC,t,be);this.e5(t,s),this.yo(new Ms(t))}e5(t,e){this.U4.splice(e,0,t),this.i5(e),t.eF=e,e<this.Q4&&(this.Q4=e)}JV(t){if(!t||t.Ht!==this)return;const e=this.F4(t);if(e<0)return;t.Yh=!1;const i=this.j4,s=AM(i,t,be);s>=0&&Ko(i,s);const n=AM(this.t5,t,bM);n>=0&&Ko(this.t5,n),this.s5(t,e),this.yo(new DM(t))}s5(t,e){Ko(this.U4,e),this.i5(e),t.eF=-1,this.Q4>e&&--this.Q4}qO(t){if(!t||t.Ht!==this)return;const e=this.F4(t);if(e<0)return;this.s5(t,e);const i=SM(this.L.oC,t,be);this.e5(t,i);const s=Lr(this.j4,(e=>e===t));if(s>=0){Ko(this.j4,s);const e=SM(this.j4,t,be);this.j4.splice(e,0,t)}}n5(t,e){const i=this.j4,s=this.U4;let n=this.Q4,r=!1,o=1/0;e&&(n=0);for(let e=i.length-1;e>=0;e--){const s=i[e];yM(s,t)?s.BO<o&&(o=s.BO):(r=!0,Ko(i,e))}for(;n<s.length&&s[n].LO<=t;){const e=s[n];yM(e,t)&&(qt(i,e)||(r=!0,i.push(e)),e.BO<o&&(o=e.BO)),n++}return n<s.length&&s[n].LO<o&&(o=s[n].LO),r&&Mm(i,be),this.Q4=n,o}F4(t){return(-1===t.eF||t.eF>=this.r5)&&this.o5(),t.eF}o5(){const t=this.U4;for(let e=this.r5;e<t.length;e++)t[e].eF=e;this.r5=t.length}i5(t){t<this.r5&&(this.r5=_.max(t,0))}DC(t){this.NC||(this.TE=t)}gn(){this.Bo();const t=this.U4.slice();for(const e of t)e.gn();Pn(this.U4),Pn(this.t5),Pn(this.j4)}constructor(t,e,i,s,n,r,o,h,a){super(),this.TO=ai(),this.g_=!1,this.qo=yh.Ch,this.E4=nc.NONE,this.J4=void 0,this.U4=[],this.t5=[],this.j4=[],this.r5=0,this.Q4=0,this.US=e||"",this.z4=h||"",this.q4=t,this.CA=s||"",this.g_=Boolean(n),this.X4=Boolean(o),this.pp=r||Vr.DEFAULT,this.kO=i||"",this.Y4=a||[],this.H4=new EM(this.U4),this.G4=new EM(this.j4)}};r(),r(),r();var MM=class extends ll{ma(){return new LM(this.DO.ga)}constructor(t,e){super(gi.tO,t),this.eV=e}},LM=class extends Yc{constructor(t){super("enter",t)}};r();var BM=class extends ll{ma(){return new OM(this.DO.ga)}constructor(t,e){super(gi.eO,t),this.eV=e}},OM=class extends Yc{constructor(t){super("exit",t)}};r();var FM=class extends er{ma(){return new VM(this.DO.ga)}constructor(t){super(Eo.ZI),this.DO=t}},VM=class extends nr{constructor(t){super("entercue"),this.cue=t}};r();var WM=class extends er{ma(){return new UM(this.DO.ga)}constructor(t){super(Eo.zI),this.DO=t}},UM=class extends nr{constructor(t){super("exitcue"),this.cue=t}},Ds=class extends Je{get TC(){return this.TO}get LO(){return this.h5.startTime}set LO(t){this.h5.startTime=t}get BO(){return this.h5.endTime}set BO(t){this.h5.endTime=t}get U(){return this.KO}set U(t){this.KO=t}get jO(){return!!this.h5.pauseOnExit}set jO(t){this.h5.pauseOnExit=!!t}get Ht(){return this.zO}set Ht(t){this.zO=t}get o(){return this.h5.id||""}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return Ht(this)}get Yh(){return this.Kh}set Yh(t){this.Yh!==t&&(this.Kh=t,t?(this.yo(new MM(this,this.LO)),this.zO&&this.zO.yo(new FM(this))):(this.yo(new BM(this,this.BO)),this.zO&&this.zO.yo(new WM(this))))}JO(t){return this===t||YA(this,t)&&Fk(this,t)&&this.$O(t)}$O(t){return Pi(this.U,t.U)}gn(){this.Bo(),this.h5.removeEventListener("enter",this.a5),this.h5.removeEventListener("exit",this.u5)}constructor(t){super(),this.KO=void 0,this.zO=void 0,this.Za=void 0,this.Kh=!1,this.a5=()=>{this.Yh=!0},this.u5=()=>{this.Yh=!1},this.TO=Ak(),this.h5=t,this.HO=t.startTime,this.ZO=t.endTime,this.h5.addEventListener("enter",this.a5),this.h5.addEventListener("exit",this.u5)}};r();var GM=class extends er{ma(){return new HM(this.Ht.ga)}constructor(t){super(Eo.YI),this.Ht=t}},HM=class extends nr{constructor(t){super("cuechange"),this.track=t}};function ZM(t){if(!t)return;let e=t.THEOplayerVTTRegion;return e||(e=new XM(t),t.THEOplayerVTTRegion=e),e}r(),r();var XM=class{get c5(){return this.l5}get o(){return this.l5.id||""}get ji(){return+this.l5.width||0}set ji(t){this.l5.width=t||0}get iF(){return+this.l5.lines||0}set iF(t){this.l5.lines=t||0}get sF(){return+this.l5.regionAnchorX||0}set sF(t){this.l5.regionAnchorX=t||0}get nF(){return+this.l5.regionAnchorY||0}set nF(t){this.l5.regionAnchorY=t||0}get oF(){return+this.l5.viewportAnchorX||0}set oF(t){this.l5.viewportAnchorX=t||0}get hF(){return+this.l5.viewportAnchorY||0}set hF(t){this.l5.viewportAnchorY=t||0}get rF(){return this.l5.scroll||""}get ga(){return this.Za||(this.Za=Zk(this)),this.Za}constructor(t){this.Za=void 0,this.l5=t}};var zM=class extends Ds{get U(){return this.h5.text}set U(t){this.h5.text=t}get Pt(){return this.h5.vertical||""}set Pt(t){this.h5.vertical=t||""}get GO(){return this.h5.snapToLines}set GO(t){this.h5.snapToLines=t}get FO(){return this.h5.line}set FO(t){this.h5.line=t}get Rb(){return+this.h5.size}set Rb(t){this.h5.size=Zs(t,0,100)}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return Mk(this)}$O(t){return Vk(this,t)}constructor(t){super(t)}},qM=class extends zM{get UO(){return ZM(this.h5.region)}get VO(){return this.h5.lineAlign||"start"}set VO(t){this.h5.lineAlign=t||"start"}get uo(){return this.h5.position}set uo(t){this.h5.position=t}get WO(){return this.h5.positionAlign||"auto"}set WO(t){this.h5.positionAlign=t||"auto"}get OO(){return this.h5.align||"center"}set OO(t){this.h5.align=t||"center"}constructor(t){super(t)}},YM=class extends zM{get UO(){return ZM(this.c5)}get c5(){return function(t,e){if(void 0===e)return;let i=t&&t.regions;return i&&i.getRegionById(e)||void 0}(this.h5.track,this.h5.regionId)}get VO(){return function(t){return"middle"===t?"center":t}(this.h5.lineAlign||"start")}set VO(t){this.h5.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get uo(){return this.h5.position}set uo(t){this.h5.position=function(t,e){return Dk(t,e)}(t,this.OO)}get WO(){return function(t){return Ck[t]}(this.h5.positionAlign||"middle")}set WO(t){this.h5.positionAlign=function(t,e){return Ik[Pk(t,e)]}(t||"center",this.OO)}get OO(){return function(t){return"middle"===t?"center":t}(this.h5.align||"middle")}set OO(t){this.h5.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function KM(t,e){return t.U===e.U}function jM(t,e){if(0===e.length)return;const i=e.length-1;if(e[i].LO<t.LO)return void QM(e,i,t.LO);const s=e[0];if(s.LO>t.LO)return void(t.BO=s.LO);const n=AM(e,t,be);if(n>=0)return;const r=-(n+1),o=r-1;if(o>=0){e[o].LO<t.LO&&QM(e,o,t.LO)}if(r<e.length){const i=e[r];t.BO=i.LO}}function QM(t,e,i){const s=t[e].LO;for(let n=e;n>=0&&t[n].LO===s;n--)t[n].BO=i}function JM(t){return Ht(t)}r(),r(),r(),r();var $M=class extends Ds{get U(){return this.d5}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return JM(this)}$O(t){return KM(this,t)}constructor(t,e){super(t),this.d5=e}};function tL(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function eL(t){switch(t){case 0:return io;case 1:return Gg;case 2:return mr;case 3:return Yg}}function iL(t,e){const i=e.tc,s=t.byteLength,n=Th(t);return e.Ab(s-i),Rc(n,i,s).buffer}function sL(t,e){return{id:t||"",data:e instanceof ArrayBuffer?e:void 0}}function nL(t,e,i){const s=hc(t,e);if(!tL(s))return;const n=eL(s);return{id:i,language:Sc(t,e,3),description:n(t,e),text:n(t,e)}}function rL(t,e,i){const s=hc(t,e);if(!tL(s))return;const n=eL(s);return{id:i,mimeType:io(t,e),fileName:n(t,e),description:n(t,e),data:iL(t,e)}}function oL(t,e,i){const s=hc(t,e);if(!tL(s))return;const n=eL(s),r=[];for(;e.tc<t.byteLength;)r.push({involvement:n(t,e),involvee:n(t,e)});return{id:i,entries:r}}function hL(t,e,i){const s=hc(t,e);if(!tL(s))return;const n=eL(s),r=Sc(t,e,3),o=hc(t,e),h=hc(t,e),a=n(t,e);let u=!1;const c=[];for(;e.tc<t.byteLength;){let i;if(1===s){let s=Ug(t,e);void 0===s?s=u:u=s,i=mr(t,e,s)}else i=n(t,e);if(!i||e.tc+4>t.byteLength)break;c.push({text:i,timestamp:os(t,e)})}return{id:i,language:r,format:o,contentType:h,description:a,entries:c}}function aL(t,e,i){return{id:i,ownerIdentifier:io(t,e),identifier:iL(t,e)}}function uL(t,e,i){const s=hc(t,e);if(!tL(s))return;const n=eL(s);return{id:i,language:Sc(t,e,3),description:n(t,e),text:n(t,e)}}function cL(t,e,i){const s=hc(t,e);if(!tL(s))return;return{id:i,text:eL(s)(t,e)}}function lL(t,e,i){return{id:i,url:io(t,e)}}function dL(t,e,i){const s=hc(t,e);if(!tL(s))return;const n=eL(s);return{id:i,description:n(t,e),text:n(t,e)}}function fL(t,e,i){const s=hc(t,e);if(!tL(s))return;return{id:i,description:eL(s)(t,e),url:io(t,e)}}function _L(t,e,i){switch(i){case"COM":return nL(t,e,i);case"GEO":return rL(t,e,i);case"IPL":return oL(t,e,i);case"PIC":return function(t,e,i){const s=hc(t,e);if(!tL(s))return;const n=eL(s),r=Sc(t,e,3),o=hc(t,e),h=n(t,e);let a,u;return"--\x3e"===r?(a=r,u=io(t,e)):(a="image/"+r.toLowerCase(),u=iL(t,e)),{id:i,mimeType:a,pictureType:o,description:h,data:u}}(t,e,i);case"SLT":return hL(t,e,i);case"TXX":return dL(t,e,i);case"UFI":return aL(t,e,i);case"ULT":return uL(t,e,i);case"WXX":return fL(t,e,i);default:if("T"===i.charAt(0))return cL(t,e,i);if("W"===i.charAt(0))return lL(t,e,i)}}function vL(t,e,i){switch(i){case"APIC":return function(t,e,i){const s=hc(t,e);if(!tL(s))return;const n=eL(s),r=io(t,e),o=hc(t,e),h=n(t,e);let a;return a="--\x3e"===r?io(t,e):iL(t,e),{id:i,mimeType:r,pictureType:o,description:h,data:a}}(t,e,i);case"COMM":return nL(t,e,i);case"COMR":return function(t,e,i){const s=hc(t,e);if(!tL(s))return;const n=eL(s),r=io(t,e),o=Sc(t,e,8),h=io(t,e),a=hc(t,e),u=n(t,e),c=n(t,e);let l,d;return e.tc<t.byteLength&&(l=io(t,e)||"image/",d=iL(t,e)),{id:i,price:r,validUntil:o,contactURL:h,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,e,i);case"GEOB":return rL(t,e,i);case"IPLS":return oL(t,e,i);case"PRIV":return function(t,e,i){return{id:i,ownerIdentifier:io(t,e),data:iL(t,e)}}(t,e,i);case"POSS":return function(t,e,i){return{id:i,format:hc(t,e),position:os(t,e)}}(t,e,i);case"SYLT":return hL(t,e,i);case"TXXX":return dL(t,e,i);case"UFID":return aL(t,e,i);case"USER":return function(t,e,i){const s=hc(t,e);if(!tL(s))return;const n=eL(s);return{id:i,language:Sc(t,e,3),text:n(t,e)}}(t,e,i);case"USLT":return uL(t,e,i);case"WXXX":return fL(t,e,i);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return cL(t,e,i);default:{const s=i.charAt(0);if("T"===s)return cL(t,e,i);if("W"===s)return lL(t,e,i)}}}r(),r();var mL=10;function gL(t,e){return(127&hc(t,e))<<21|(127&hc(t,e))<<14|(127&hc(t,e))<<7|127&hc(t,e)}function pL(t,e){switch(t){case 4:return{f5:sl(e,0),_5:sl(e,1),v5:sl(e,2),m5:sl(e,3)};case 3:return{f5:sl(e,0),_5:sl(e,1),v5:sl(e,2)};case 2:return{f5:sl(e,0),g5:sl(e,1)}}}function wL(t,e,i){switch(i.XD){case 3:i.zD._5&&function(t,e){const i=e.tc,s=os(t,e)+4,n=32768&Ni(t,e);e.Sb(i+s),n&&os(t,e)}(t,e);break;case 4:i.zD._5&&function(t,e){const i=e.tc,s=gL(t,e);e.Sb(i+s)}(t,e)}}function yL(t,e){if(t.byteLength-e.tc<mL)return null;if(73!==hc(t,e)||68!==hc(t,e)||51!==hc(t,e))return null;const i=hc(t,e),s=hc(t,e);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(i))return null;const n=hc(t,e),r=gL(t,e);return{XD:i,p5:s,zD:pL(i,n),w5:r}}function bL(t,e,i){switch(i){case 2:return function(t,e){if(e.tc+6>t.byteLength)return;return{o:Sc(t,e,3),Rb:Dg(t,e,3)}}(t,e);case 3:return function(t,e){if(e.tc+10>t.byteLength)return;const i=Sc(t,e,4),s=os(t,e);hc(t,e);const n=hc(t,e);return{o:i,Rb:s,zD:{g5:sl(n,0),y5:sl(n,1),groupingIdentity:sl(n,2)}}}(t,e);case 4:return function(t,e){if(e.tc+10>t.byteLength)return;const i=Sc(t,e,4),s=gL(t,e);hc(t,e);const n=hc(t,e);return{o:i,Rb:s,zD:{groupingIdentity:sl(n,1),g5:sl(n,4),y5:sl(n,5),f5:sl(n,6),b5:sl(n,7)}}}(t,e)}}function AL(t){const e=Th(t),i=new j(e.byteLength);let s=0;for(let t=0;t<e.byteLength;t++){const n=e[t];255===n&&t++,i[s]=n,s++}return na(Rc(i,0,s))}function SL(t,e){const i=e||new Ui,s=yL(t,i);if(!s)return null;const n=function(t,e,i){const s=[],n=e.tc;let r=pu(t,n,n+i.w5);const o=new Ui;switch(e.Ab(i.w5),i.XD){case 2:case 3:i.zD.f5&&(r=AL(r))}wL(t,e,i);for(;o.tc<r.byteLength;){const t=TL(r,o,i);if(void 0===t)break;s.push(t)}return s}(t,i,s);return{WD:s,A5:n}}function TL(t,e,i){const s=bL(t,e,i.XD);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.Rb)return;const n=e.tc;let r,o,h=pu(t,n,n+s.Rb);switch(e.Ab(s.Rb),i.XD){case 2:{const t=s;o=h,r=_L(o,new Ui,t.o);break}case 3:{const t=s,e=new Ui;!function(t,e,i){const s=i.zD;let n,r,o;s.g5&&(n=os(t,e)),s.y5&&(r=hc(t,e)),s.groupingIdentity&&(o=hc(t,e))}(h,e,t);o=pu(h,e.tc,h.byteLength),r=vL(o,new Ui,t.o);break}case 4:{const t=s,e=new Ui;t.zD.f5&&(h=AL(h)),function(t,e,i){const s=i.zD;let n,r,o,h;s.groupingIdentity&&(n=hc(t,e)),s.g5&&(r=os(t,e)),s.y5&&(o=hc(t,e)),s.b5&&(h=gL(t,e))}(h,e,t);o=pu(h,e.tc,h.byteLength),r=vL(o,new Ui,t.o);break}}if(!r){const t=_c(Th(o));r=sL(s.o,t.buffer)}return r}r();function kL(t){return ne(t)&&"org.id3"===t.type&&ne(t.value)}function EL(t){return function(t,e,i){return cL(t,e,i)}(new DataView(t.data),new Ui,t.key)}function xL(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return EL(t);default:let e=t.key.charAt(0);if("T"===e)return function(t){return{id:t.key,text:t.data}}(t);if("W"===e)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return sL(t.key,t.data)}(t)}r(),r();var RL=class extends Bo{get q(){return this.G4}get dW(){return this.S5?this.S5.default:void 0}get L(){return this.H4}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return Jh(this)}get o(){return this.SO.id||this.S5&&this.S5.id||""}get TC(){return this.TO}get IC(){return this.SO.inBandMetadataTrackDispatchType||""}get Lt(){return this.SO.kind||Hi.qV}get kh(){return this.kO}set kh(t){t!==this.kO&&(this.kO=t,void 0!==this.S5&&(this.S5.label=t),this.yo(new Qu(this)))}get gs(){return this.SO.language||""}get TE(){return this.qo}set TE(t){let e=this.TE;this.qo=fu(t),this.T5();let i=this.TE;e!==i&&this.yo(new Bc(this)),i!==yh.Ch&&this.k5(nc.LOADING)}get E5(){return fu(this.SO.mode)}set E5(t){this.SO.mode=t}get EO(){return this.SO}get tI(){return this.E4}get x5(){return this.S5?+this.S5.readyState||nc.NONE:nc.LOADED}get MC(){return this.J4}get pw(){return this.pp}set pw(t){this.pp!==t&&(this.pp=t,this.yo(new IM(this)))}get R5(){return this.I5}set R5(t){this.I5=t,t&&(this.C5=!0,u((()=>{this.C5=!1}),50)),this.T5()}uW(t){t.Ht!==this&&(t.Ht=this,this.SO.addCue(t.h5),this.P5())}JV(t){t.Ht===this&&(t.Ht=void 0,this.SO.removeCue(t.h5),this.P5())}Z4(t){var e;const i=null==(e=this.SO.cues)?void 0:e.getCueById(t);if(!i)return;const s=IL(i);return s&&dc(s)?s[0]:s}$V(t){this.D5>=t||(this.D5=t,ho(this,t))}T5(){let t=this.TE;this.R5||t!==yh.Jn?this.E5=t:this.E5=yh.RC}N5(){let t=this.TE,e=this.E5;t!==e&&(this.R5||t!==yh.Jn||e!==yh.RC)&&("metadata"===this.Lt&&e===yh.Ch?this.TE=t:this.C5&&e===yh.Ch&&t===yh.Jn?this.E5=t:this.TE=e)}R4(t){this.E4!==t&&(this.E4=t,this.yo(new xM(this,t)))}k5(t){let e=_.max(this.E4,this.x5,t);this.R4(e)}M5(t){let e=IL(t);if(e)return e;if(e=this.L5(t),dc(e))for(let t of e)t.Ht=this;else e.Ht=this;return e}L5(t){const e=this.B5(t);return t.THEOplayerTextTrackCue=e,e}B5(t){return t.endTime<this.D5?[]:kL(t)?(this.pw=Vr.ID3,function(t){let e;try{e=xL(t.value)}catch(t){e=sL("")}return new $M(t,e)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.pw=Vr.ID3,function(t){let e=[];try{let i=SL(new DataView(t.data));if(i)for(let s of i.A5)e.push(new $M(t,s))}catch(t){}return e}(t)):function(t){return"text"in t}(t)?(this.pw=Vr.WEBVTT,function(t){return"regionId"in t}(t)?new YM(t):new qM(t)):new Ds(t)}O5(t){let e=[];if(!t)return e;let i=t.length;for(let n=0;n<i;n++){var s;let i=this.M5(null!=(s=t[n])?s:t.item(n));if(dc(i))for(let t of i)e.push(t);else e.push(i)}return e}F5(){let t=this.O5(this.SO.cues),e=kM(this.U4,t);for(let t of e.W4)t.fn(gi.eO,this.P5),t.fn(gi.tO,this.P5),this.yo(new DM(t));for(let t of e.V4)t.yn(gi.tO,this.P5),t.yn(gi.eO,this.P5),this.yo(new Ms(t))}n5(){let t=this.O5(this.SO.activeCues),e=kM(this.j4,t);for(let t of e.W4)t.Yh=!1;for(let t of e.V4)t.Yh=!0;(e.V4.length||e.W4.length)&&this.yo(new GM(this))}DC(t){this.TE=t}gn(){this.Bo();const t=this.U4.slice();for(let e of t)e.gn();Pn(this.U4),Pn(this.j4),this.SO.removeEventListener("cuechange",this.V5),this.SO.removeEventListener("cuechange",this.P5),this.S5&&(this.S5.removeEventListener("load",this.W5),this.S5.removeEventListener("error",this.U5),ft(this.S5))}constructor(t,e,i=!0){super(),this.U4=[],this.j4=[],this.qo=yh.Ch,this.E4=nc.NONE,this.J4=void 0,this.pp=Vr.DEFAULT,this.C5=!1,this.D5=0,this.V5=()=>{this.T5(),this.SO.removeEventListener("cuechange",this.V5)},this.P5=()=>{this.TE!==yh.Ch&&(this.F5(),this.n5(),this.U4.length&&this.k5(nc.LOADING))},this.W5=()=>{this.k5(nc.LOADED)},this.U5=()=>{this.k5(nc.ERROR)},this.SO=t,this.I5=i,this.SO.addEventListener("cuechange",this.V5),this.SO.addEventListener("cuechange",this.P5),this.S5=e,this.S5&&(this.J4=Zi(this.S5.src),this.S5.addEventListener("load",this.W5),this.S5.addEventListener("error",this.U5)),this.TO=ai(),this.kO=t.label||"",this.H4=new EM(this.U4),this.G4=new EM(this.j4),this.TE=this.E5,di((()=>{this.P5(),this.k5(nc.NONE)}))}};function IL(t){return null==t?void 0:t.THEOplayerTextTrackCue}r(),r();function CL(t,e){return su(t.eV,e.eV)||function(t,e){return t.Ht===e.Ht?Om(TM(t),TM(e)):Sx(t.Ht,e.Ht)}(t.DO,e.DO)||function(t,e){return t===e?Qc.Zr:t===gi.tO?Qc.Dw:Qc.Pw}(t.type,e.type)}var PL=class{tr(){Pn(this.G5);for(const t of this.Ul.slice())this.it(t);this.H5(),this.Z5=0,this.An=0,Pn(this.X5),this.z5=!1,this.q5=!1,this.Y5=0}tt(t){qt(this.Ul,t)||(this.Ul.push(t),t.yn(Eo.aa,this.K5),t.TE!==yh.Ch&&this.j5())}it(t){we(this.Ul,t)&&(t.fn(Eo.aa,this.K5),t.TE!==yh.Ch&&this.j5())}j5(){const t=this.X5,e=this.Ul.filter((t=>t.TE!==yh.Ch));this.X5=e;for(const i of t)qt(e,i)||this.Q5(i);for(const i of e)qt(t,i)||this.J5(i);this.Y5=0}J5(t){if(t.yn(Eo.FI,this.t6),t.yn(Eo.WI,this.e6),t.yn(Eo.GI,this.i6),t.L.V>0){for(const e of t.L.oC)this.s6.push(e);this.n6()}}Q5(t){if(t.fn(Eo.FI,this.t6),t.fn(Eo.WI,this.e6),t.fn(Eo.GI,this.i6),t.L.V>0){for(const e of t.L.oC)we(this.G5,e),we(this.s6,e);this.n6()}}r6(){this.ta.nI||this.ta.ZR?this.H5():this.n6()}n6(){this.z5&&0!==this.X5.length&&(this.Y5-this.ta.yR>.25*this.ta.zR||this.Z5||(this.Z5=this.h6.o6(this.a6)))}H5(){this.Z5&&(this.h6.u6(this.Z5),this.Z5=0)}c6(t){0!==this.Y5&&(t.Yh!==yM(t,this.ta.yR)?this.Y5=0:this.An<t.LO&&t.LO<this.Y5?this.Y5=t.LO:this.An<t.BO&&t.BO<this.Y5&&(this.Y5=t.BO))}l6(){if(!this.z5)return;if(0===this.X5.length)return;if(this.ta.nI)return;const t=this.X5,e=this.An,i=this.ta.yR,s=i-e<-.1;let n=this.q5||s;n&&i>e&&i-e<.1&&(n=!1),this.q5=!1;const r=[];let o=1/0;for(const e of t){const t=e.n5(i,n);t<o&&(o=t);for(const t of e.q.oC)r.push(t)}const h=this.G5.slice();if(n);else for(const s of t)Ax(s,e-ji,i,h);for(let t=h.length-1;t>=0;t--)qt(r,h[t])&&Ko(h,t);const a=[];if(!n)for(let t=h.length-1;t>=0;t--){const s=h[t];s.LO>e&&s.BO<=i&&(a.push(s),Ko(h,t))}for(const t of this.s6)t.LO!==t.BO&&we(a,t);Pn(this.s6);const u=[],c=[];for(const t of a)t.Yh||u.push(new MM(t,t.LO)),u.push(new BM(t,_.max(t.LO,t.BO))),t.Yh=!1;for(const t of h)t.Yh&&(u.push(new BM(t,_.max(t.LO,t.BO))),t.Yh=!1);for(const t of r)t.Yh||(u.push(new MM(t,t.LO)),t.Yh=!0);u.sort(CL);for(const t of u){const e=t.DO;e.yo(t);const i=e.Ht;i&&(t.type===gi.tO?i.yo(new FM(e)):i.yo(new WM(e)),qt(c,i)||c.push(i))}c.sort(Sx);for(const t of c)t.yo(new GM(t));this.An=i,this.G5=r,this.Y5=o}gn(){this.tr(),this.ta.fn(Mi.$y,this.d6),this.ta.fn(Mi.so,this.f6),this.ta.fn(Zc.BL,this.d6),this.ta.fn(Mi.Uy,this.d6),this.ta.fn(Mi.qy,this._6),this.ta.fn(Mi.zy,this.d6)}constructor(t,e){this.Ul=[],this.Z5=0,this.An=0,this.G5=[],this.s6=[],this.X5=[],this.z5=!1,this.q5=!1,this.Y5=0,this.a6=()=>{this.Z5=0,this.l6(),this.r6()},this.d6=()=>{this.l6(),this.r6()},this.f6=()=>{this.z5=!0,this.d6()},this._6=()=>{this.q5=!0,this.Y5=0,this.H5()},this.K5=()=>{this.j5(),this.l6(),this.r6()},this.t6=t=>{const e=t.DO;qt(this.s6,e)||this.s6.push(e),this.c6(e),this.n6()},this.e6=t=>{const e=t.DO;we(this.G5,e),we(this.s6,e),this.c6(e),this.n6()},this.i6=t=>{this.c6(t.DO),this.n6()},this.h6=e,this.ta=t,t.yn(Mi.$y,this.d6),t.yn(Mi.so,this.f6),t.yn(Zc.BL,this.d6),t.yn(Mi.Uy,this.d6),t.yn(Mi.qy,this._6),t.yn(Mi.zy,this.d6),this.n6()}};r();var DL=class{o6(t){return st(t)}u6(t){ao(t)}},NL=new DL,iu=class extends PL{constructor(t,e=NL){super(t,e)}};r(),r();var ML=class extends Le{get ga(){return this.Za||(this.Za=JM(this)),this.Za}$O(t){return KM(this,t)}constructor(t,e,i){super(t,1/0,e,!1,i)}};r(),r();var LL=class extends po{constructor(t,e,i=Vr.DEFAULT){super(Hi.jV,"",e||"","",!1,i,!1,t)}},BL=class extends LL{uW(t){jM(t,this.U4),super.uW(t)}ma(){return Jh(this)}constructor(t,e){super(t,e),this.pw=Vr.ID3}},OL=class extends BL{get o(){return this.SO.id||""}get IC(){return this.SO.inBandMetadataTrackDispatchType||""}get gs(){return this.SO.language||""}K4(t){super.K4(t),this.E5=this.TE}get E5(){return fu(this.SO.mode)}set E5(t){this.SO.mode=t}get EO(){return this.SO}uW(t){super.uW(t),t.h5.track!==this.SO&&this.SO.addCue(t.h5)}JV(t){super.JV(t),t.h5.track===this.SO&&this.SO.removeCue(t.h5)}$V(t){this.D5>=t||(this.D5=t,ho(this,t))}k5(t){this.tI=_.max(this.tI,t)}F5(){let t=this.SO.cues;if(!t)return;const e=t.length,i=[],s=[];for(let o=0;o<e;o++){var n;const e=null!=(n=t[o])?n:t.item(o);if(kL(e)&&e.endTime>=this.D5){var r;const t=null!=(r=null==e?void 0:e.THEOplayerTextTrackCue)?r:new FL(e);i.push(t)}else s.push(e)}Mm(i,be);let o=kM(this.L.oC.slice(),i);for(const t of s)this.SO.removeCue(t);for(let t of o.W4)t.gn(),this.JV(t);for(let t of o.V4)this.uW(t)}gn(){this.SO.removeEventListener("cuechange",this.P5),super.gn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.D5=0,this.P5=()=>{this.TE!==yh.Ch&&(this.F5(),this.k5(nc.LOADED))},this.SO=t,this.SO.addEventListener("cuechange",this.P5),this.TE=this.E5,di((()=>{this.P5()}))}},FL=class extends ML{gn(){super.gn(),this.h5.THEOplayerTextTrackCue=void 0}constructor(t){super(t.startTime,xL(t.value),t.id),this.h5=t,this.h5.THEOplayerTextTrackCue=this}};function VL(t){return"TXXX"===t.id||"TXX"===t.id}r(),r();var WL=class extends Ex{v6(){this.m6.yn(Ce.MI,this.BG),this.m6.yn(Ce.BI,this.OG)}g6(){this.m6.fn(Ce.MI,this.BG),this.m6.fn(Ce.BI,this.OG)}p6(t){const e=t.L.oC[0];if(!UL(e))return;const i=function(t){const e=t.match(GL);if(!e)return;return{Ht:e[1],gs:e[2]}}(e.U.description),s=i.Ht,n=i.gs;if(this.w6(s,n))return;const r=this.oW.DI(Hi.qV,t.o,s,n,!1,Vr.TTML);this.tt(r),this.y6.set(t.TC,r);for(let e of t.L.oC)UL(e)&&this.b6(e);t.yn(Eo.FI,this.A6)}w6(t,e){return this.Z.oC.some((i=>i.kh===t&&i.gs===e))}b6(t){if(!t.Ht)return;const e=this.y6.get(t.Ht.TC),i=JE(t.U.text,e,{RV:0,CV:1/0,PV:t.LO});for(let t of i)e.uW(t)}async tr(){for(let t of this.m6.oC)t.fn(Eo.FI,this.A6);for(let t of this.Z.oC)this.oW.lW(t);this.y6.clear(),await super.tr()}async gn(){this.g6(),await super.gn()}constructor(t,e){super(),this.oW=t,this.m6=e,this.y6=$h(),this.BG=async t=>{const e=t.Ht;if(e.pw||await e.uy(Eo.$I),e.pw===Vr.ID3){for(;0===e.L.V;)await e.uy(Eo.FI);this.p6(e)}},this.OG=t=>{const e=t.Ht;if(e.pw!==Vr.ID3||!this.y6.has(e.TC))return;const i=this.y6.get(e.TC);this.it(i),this.oW.lW(i),e.fn(Eo.FI,this.A6)},this.A6=t=>{UL(t.DO)&&this.b6(t.DO)},this.v6()}};function UL(t){return function(t){return VL(t)&&GL.test(t.description)}(t.U)}var GL=/^Track:(.+),Lang:(.+)$/;r(),r();var Fu=[Mi.wy,Mi.py,Mi.ib,Mi.ob];r();var In=class extends pe{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(Mi.py),this.errorObject=t}};r(),r(),r();var Es=class extends pe{constructor(t){super(Mi.wy),this.S6=t}};r();var HL=class extends pe{constructor(t){super("sb"),this.S6=t}},ZL=new Eu,XL=class extends pe{constructor(t){super("Ws"),this.session=t}},zL=class extends Bo{get T6(){return this.k6}KS(){return this.E6=!0,ZL.Wo((t=>this.x6(t)),this.OT.Bw)}async x6(t){try{ot(t),await this.R6.GW(t);const e=await this.R6.ZW(this.I6.yw,this.I6.bb,t);await this.C6.KS(this.I6.yw,this.I6.bb,e)}catch(t){Zr(t);const e=t instanceof Qs?t.Fb:void 0,i=new ir(Ja.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,e);throw this.Ss(i),i}}async jW(t,e){let i;try{i=function(t){return Ah(t,cp())}(t)?await this.R6.rU(new j(t),this.OT.Bw):await this.R6.oU(new j(t),e,this.OT.Bw)}catch(t){if(Se(t))return;throw t}if(this.OT.Bw.Nw)return;const s=this.P6,n=new as;this.P6=n;try{await this.C6.Yn(i),await on(100)}catch(t){const e=t instanceof Qs?t.Fb:void 0;throw new ir(Ja.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,e)}finally{void 0!==s&&await s.Bb,n.Mb(),this.P6===n&&(this.P6=void 0)}}Ss(t){const e=t instanceof ir?t:new ir(Ja.CONTENT_PROTECTION_ERROR,t.message,t);this.yo(new In(e)),this.Ws()}D6(){this.C6.fn("_b",this.eT),this.C6.fn(Mi.ob,this.N6),this.C6.fn("lt",this.M6),this.L6=!1,this.k6=!1,this.OT.Xw(),this.yo(new XL(this))}async Ws(){let t;this.Bo();do{t=this.P6,void 0!==t&&await t.Bb}while(this.P6!==t);this.D6(),await this.C6.Ws().catch(Bt)}constructor(t,e,i){super(),this.C6=t,this.R6=e,this.I6=i,this.E6=!1,this.L6=!1,this.OT=new $t,this.k6=!1,this.eT=t=>{if(!this.OT.Bw.Nw)switch(t.mb){case"license-request":case"license-renewal":this.jW(t._b,t.gb).catch((t=>this.Ss(t)));break;default:this.Ss(new ir(Ja.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.mb))}},this.N6=t=>{this.C6.fb.Db(((t,e)=>{switch(t){case"usable":As.Fg((()=>{this.L6=!0,this.yo(new Es(e))}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.yo(new HL(e))}})),this.k6=!0,this.yo(t)},this.M6=t=>{this.Ss(new ir(Ja.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.yn("_b",this.eT),t.yn(Mi.ob,this.N6),t.yn("lt",this.M6),t.GS.then((()=>this.D6()),(t=>this.Ss(t)))}},qL=class extends Bo{get rT(){return this.$S}get B6(){return this.O6.every((t=>t.T6))}UW(){return this.F6.UW()}V6(t){return this.W6||(this.W6=this.U6(t)),this.W6}async U6(t){ot(t);const e=await this.F6.rU(new j(cp()),t);if(ot(t),!this.nT)throw new g("Invalid MediaKeys when setting ServerCertificate");await this.nT.oT(e.buffer)}async G6(t){if(!this.nT)throw new g("Invalid MediaKeys when creating KeySession");try{this.H6.push(t);const e=await this.nT.sT("temporary"),i=new zL(e,this.F6,t);return this.O6.push(i),i.yn(Fu,this.Z6),i.yn("Ws",this.X6),i}finally{we(this.H6,t)}}z6(t){if(t.q6)return!1;for(const e of this.O6)if(YL(e.I6,t))return!0;for(const e of this.H6)if(YL(e,t))return!0;return!1}async gn(){this.nT=void 0,this.Bo();const t=this.O6.slice();Pn(this.O6),await Promise.all(t.map((t=>t.Ws()))),this.Y6=void 0,this.F6.Ww()}constructor(t,e,i){super(),this.O6=[],this.W6=void 0,this.H6=[],this.Z6=t=>{if(t.type===Mi.ob)return null!=this.Y6||(this.Y6=new up),t.fb.Db(((t,e)=>{this.Y6.Pb(e,t)})),void(this.B6&&this.yo(new ie(this.Y6)));this.Ds(t)},this.X6=t=>{t.session.fn(Fu,this.Ds),t.session.fn("Ws",this.X6),we(this.O6,t.session),this.Y6=void 0},this.$S=t,this.nT=e,this.F6=i}};function YL(t,e){return!t.q6&&t.yw===e.yw&&Ah(t.bb,e.bb)}var KL=class extends Bo{get K6(){var t;return null==(t=this.$S)?void 0:t.rT}get _H(){return this.F6}set _H(t){this.F6=t}$n(t,e){this.qG=t,this.uJ(e)}uJ(t){this.IT=t,this.j6(this.OT.Bw).catch(Pu)}lJ(t){this.Q6(t,this.OT.Bw).catch(Pu)}async Q6(t,e){var i,s;ot(e);var n;if(null==(i=this.IT)?void 0:i.JG)for(const i of null!=(n=null==(s=this.IT)?void 0:s.JG)?n:[]){var r;const s=Ti(t,(t=>t.J6===i.rT.Sw));if(void 0!==(null==s?void 0:s.t9)&&!(null==(r=i.SG)?void 0:r.some((t=>Ah(s.t9,t)))))try{return void await this.e9(i.rT.yw,s.t9,e)}catch(t){Zr(t)}}}async j6(t){if(!As.Ys.Yg||!await this.i9(t))return this.IT&&this.IT.s9?await this.n9(t):void 0}async i9(t){var e,i;if(!(null==(e=this.IT)?void 0:e.JG))return!1;let s=!1;var n;for(const e of null!=(n=null==(i=this.IT)?void 0:i.JG)?n:[]){var r;for(const i of null!=(r=e.SG)?r:[])try{await this.e9(e.rT.yw,i,t),s=!0}catch(t){Zr(t)}if(s)return!0}return!1}async e9(t,e,i){if(ot(i),!e.byteLength)return;if(!this.IT||!this.IT.JG.length)throw new ir(Ja.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==em&&t!==sm&&t!==im)return void 0;const s=uT(t,e),n=this.IT.JG;let r;for(const e of n){ot(i);const n=s[e.rT.Aw];if(n&&e.rT.yw===t)try{const t=await this.r9(e,i);t.UW()&&await t.V6();const s=this.LB.NR,r={yw:e.rT.yw,bb:n,q6:s};if(this.o9(t,r)){const e=await t.G6(r);await e.KS()}return}catch(t){Zr(t),r=t}}throw await As.Vp()?new ir(Ja.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new ir(Ja.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async n9(t){var e;const i=null==(e=this.IT)?void 0:e.JG;if(i)for(const e of i){ot(t);try{const i=await this.r9(e,t);return void(i.UW()&&await i.V6())}catch(t){Zr(t)}}}o9(t,e){return As.Ys.qg||this.LB.GB.UB||!t.z6(e)}r9(t,e){return this.Go.Wo((e=>this.h9(t,e)),e)}async h9(t,e){if(ot(e),!this.IT||!this.F6||!this.qG)throw new g("Not initialized");if(this.$S){if(this.$S.rT!==t.rT)throw new g("Internal key system error");return this.$S}const i=this.F6,s=la({},t,{SH:t.SH.map((e=>{var s;return la({},e,{persistentState:null!=(s=e.persistentState)?s:i.uU(t.rT),_T:e._T||i._T(t.rT)})}))}),n=await this.qG.rJ(s.rT,s.SH),r=i.AG(s),o=new qL(s.rT,n,r);return o.yn(Fu,this.Ds),this.$S=o,o}Ss(t){if(Se(t))return;const e=t instanceof ir?t:new ir(Ja.CONTENT_PROTECTION_ERROR,t.message,t);this.yo(new In(e))}async tr(){this.qG=void 0,this.IT=void 0,this.OT.Xw(),this.OT=new $t,await this.a9()}async a9(){await this.Go.Xw();const t=this.$S;t&&(t.fn(Mi.ib,this.Ds),this.$S=void 0,await t.gn())}async Ww(){this.Bo(),this.LB.fn(rh.Ey,this.u9),await this.tr(),await this.Go.gn()}constructor(t){super(),this.OT=new $t,this.Go=new Eu,this.IT=void 0,this.F6=void 0,this.qG=void 0,this.$S=void 0,this.u9=t=>{this.e9(t.yw,t.bb,this.OT.Bw).catch((t=>this.Ss(t)))},this.LB=t,this.LB.yn(rh.Ey,this.u9)}};r();var jL=class extends pe{constructor(t){super(Mi.My),this.currentTime=t}};r();var QL=class extends Bo{get tI(){return void 0!==this.c9?this.c9.tI:gs.jB}R4(){var t;null==(t=this.c9)||t.R4()}tr(){var t;null==(t=this.c9)||t.tr()}Ww(){this.Bo(),void 0!==this.c9&&(this.c9.Ww(),this.c9=void 0)}l9(t){if(this.c9===t)return;const e=this.tI;void 0!==this.c9&&this.c9.Ww(),this.c9=t,void 0!==t&&(t.yn(Zc.QI,this.Ds),t.R4());const i=this.tI;e!==i&&this.yo(new au(this.d9.yR,i))}constructor(t){super(),this.d9=t}};r();var JL=class extends po{get ga(){var t;return null!=(t=this.Za)?t:this.Za=$L(this)}f9(t,e,i){const s=new Vi(t,e,i,!1);return this.uW(s),s}_9(t){this.JV(t)}constructor(t,e,i){super(t,e,"",i,void 0,Vr.WEBVTT)}};function $L(t){return nh(Jh(t),{get type(){return t.pw},addCue:(e,i,s)=>t.f9(e,i,s).ga,removeCue(e){t._9(e.MO)}})}r();var tB=class extends RL{get ga(){var t;return null!=(t=this.Za)?t:this.Za=$L(this)}f9(t,e,i){const n=this.L5(new s.VTTCue(t,e,i));return this.HE?this.uW(n):this.v9.push(n),n}_9(t){we(this.v9,t),this.JV(t)}gn(){var t;super.gn(),null==(t=this.S5)||t.removeEventListener("load",this.m9),Pn(this.v9)}constructor(t,e){var i;super(t,e),this.HE=!1,this.v9=[],this.m9=()=>{var t;null==(t=this.S5)||t.removeEventListener("load",this.m9),this.HE=!0;for(const t of this.v9)this.uW(t);Pn(this.v9)},null==(i=this.S5)||i.addEventListener("load",this.m9),this.pw=Vr.WEBVTT}},eB=Z.Fm||Z.Wm,iB=Z.Dg,sB=Z.jm,nB=Z.jm&&Z.Ka,rB=class extends Bo{get C4(){return this.g9}get _R(){return this.qG?this.qG._R:ee.fB()}get mR(){const t=this.YG;if(!t||S(t.getTime()))return;const e=1e3*this.yR;return new Date(t.getTime()+e)}get YG(){if(this.XG.getStartDate)return this.rZ&&this.p9||(this.p9=this.XG.getStartDate()),this.p9}get yR(){return this.w9?this.w9.yR:void 0!==this.y9?this.y9:this.YT.currentTime}get Uu(){return this.Xu}get ct(){return this.w9?this.w9.ct:this.qG?this.qG.ct:this.YT.duration}get kR(){return this.nI?this.b9():this.w9?this.w9.kR:this.YT.ended||this.A9}b9(){return void 0!==this.y9&&this.ct===this.y9}get lt(){return this.HG}get XG(){return this.YT}get ZR(){return this.S9?this.T9:this.w9?this.w9.ZR:this.YT.paused}get KR(){return this.Fo.KL(ee.xn(this.YT.played))}get Ti(){return this.YT.offsetHeight*As.Ys.Xg}get ji(){return this.YT.offsetWidth*As.Ys.Xg}get wa(){return this.Zo}get aH(){return this.Qo}get tI(){return this.k9.tI}get iI(){return this.qG?this.qG.iI:ee.fB()}get nI(){return this.w9?this.w9.nI:this.rZ||this.YT.seeking&&!this.S4}get A4(){return this.w9?this.w9.A4:this.S4}get M4(){return 0!==this.E9}get FR(){return this.w9?this.w9.FR:this.YT.muted}set FR(t){this.w9?this.w9.FR=t:(this.YT.muted=t,this.x9())}get zR(){return this.w9?this.w9.zR:void 0!==this.R9?this.R9:this.YT.playbackRate}set zR(t){this.w9?this.w9.zR=t:this.ZR||this.g9?(this.R9=t,this.I9()):(this.R9=void 0,this.YT.playbackRate=t,this.I9())}I9(){const t=this.zR;this.C9!==t&&(this.C9=t,this.yo(new Nu(this.yR,t)))}get P9(){return this.iZ}get dI(){return this.w9?this.w9.dI:this.YT.volume}set dI(t){this.w9?this.w9.dI=t:(this.YT.volume=t,this.x9())}x9(){const t=this.dI,e=this.FR;this.D9===t&&this.N9===e||(this.D9=t,this.N9=e,this.yo(new eh(this.yR,this.dI)))}OR(){return kD(this.YT)}AI(){this.M9||(this.M9=!0);const t=this.L9();return this.B9(),t}B9(){this.S9?this.T9&&(this.T9=!1,this.yo(new Xt(this.yR))):this.O9()}O9(){if(this.w9)this.w9.AI();else{Z.jm&&!Z.Ka&&this.YT.preload===hl.YH&&(this.YT.preload=hl.jV);const t=this.zR,e=this.YT.play();t!==this.XG.playbackRate&&(this.zR=t),this.A9=!1,bt(e)?e.then(this.F9,this.V9):this.W9.L4()&&this.U9()}}bI(){this.S9?this.T9||(this.T9=!0,this.yo(new vl(this.yR))):this.G9()}G9(){this.w9?this.w9.bI():(this.YT.pause(),this.W9.Yn()),this.H9(new $)}L9(){const t=new as;return this.Z9.push(t),t.Bb}X9(){for(const t of this.Z9)t.Mb(void 0);Pn(this.Z9)}H9(t){for(const e of this.Z9)e.Lb(t);Pn(this.Z9)}U9(){this.S9||this.w9||this.X9()}z9(t){this.S9||this.w9||this.H9(t)}Sb(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.w9?this.w9.Sb(t,e,i):(this.q9.Xw(),this.q9=new $t,this.Y9=go(this.K9(t,e,i,this.Y9,this.q9.Bw),this.q9).catch(Bt))}UG(t){const e=this.YG;if(!e||S(e.getTime()))return;const i=(t.getTime()-e.getTime())/1e3;this.Sb(i)}async K9(t,e,i,s,n){try{if(this.y9=t,this.j9=t,this.Q9=As.Bg(),i&&!this.rZ?this.S4=!0:(this.rZ=!0,this.S4=!1),this.A9&&!this.b9()&&(this.A9=!1),this.S4?this.yo(new aM(this.yR)):this.yo(new _t(t)),await s.catch(Bt),ot(n),this.qG&&!this.qG.RJ())return void this.J9();for(this.t8&&this.e8(),this.k9.tI===gs.jB&&await this.k9.uy(Zc.QI,n);0===this.YT.seekable.length||nB&&!this.M9;){const t={stack:[],error:void 0,hasError:!1};try{const e=rs(t,$t.Yw([n]),!1);await Promise.race([bA(this.YT,"timeupdate",e.Bw),on(100,e.Bw)]),ot(n)}catch(e){t.error=e,t.hasError=!0}finally{ae(t)}}let o=iM(this._R,t,.05),h=this.iI,a=!0,u=!1;for(;;){const t={stack:[],error:void 0,hasError:!1};try{var r;if(h=this.iI,h.V>0&&!h.gr(o)&&(o=h.ZL(o),a=!0),e&&!this.YT.fastSeek){const t=this._R;if(!t.gr(o)){const e=iM(t,o,1);e!==o&&(o=e,a=!0)}}if(sB){const t=this.i8();void 0!==t&&o>t&&(o=t,a=!0)}if(!u){const t=this.s8();void 0!==t&&o>t&&(u=!0,await this.n8(t,!1,n),await bA(this.YT,"seeked",n),ot(n),a=!0)}if(a){a=!1,await this.n8(o,e,n),ot(n);let t=this.yR;h=this.iI,o=h.ZL(o);let i=1;for(;_.abs(o-t)>=ji;)h=this.iI,o=hB(o,h,i),await this.n8(o,e,n),ot(n),t=this.yR,i++}if(!(this.YT.seeking||this.k9.tI<gs.QB))break;const i=rs(t,$t.Yw([n]),!1);await Promise.race([bA(this.YT,"seeked",i.Bw),this.uy([Mi.Gy,Mi.Sy],i.Bw),this.k9.uy(Zc.QI,i.Bw),null==(r=this.qG)?void 0:r.uy(To.$Q,i.Bw)].filter(ne)),ot(n)}catch(e){t.error=e,t.hasError=!0}finally{ae(t)}}this.J9()}catch(t){if(Se(t))return;0}}async n8(t,e,i){ot(i);let s=this.iI;if(t=s.ZL(t),this.t8){let e=!0;for(;e||this.k9.tI<gs.JB;){const n={stack:[],error:void 0,hasError:!1};try{if(s=this.iI,s.gr(t)||(t=s.ZL(t),e=!0),e){e=!1,this.y9=t,this.r8(this.yR);continue}const r=rs(n,$t.Yw([i]),!1);await Promise.race([this.uy(Mi.Sy,r.Bw),this.k9.uy(Zc.QI,r.Bw)])}catch(t){n.error=t,n.hasError=!0}finally{ae(n)}}ot(i)}const n=bA(this.YT,"seeking",i);e&&this.YT.fastSeek?this.YT.fastSeek(t):this.YT.currentTime=t,this.y9=void 0,this.r8(this.yR),this.YT.seeking&&await n}i8(){if(!this.qG||!this.qG.SJ)return;const t=this.qG.TJ,e=this.qG.kJ,i=t&&e?t.Sn(e):t||e;if(!i||0===i.V)return;const s=i.Cn(i.V-1),n=i.jn(i.V-1);return _.max(s,n-.001)}s8(){if(!this.qG||!this.qG.SJ)return;const t=this.qG.kJ;if(!t||0===t.V)return;const e=t.Cn(t.V-1);let i=t.jn(t.V-1)-.02;return i-=.001,_.max(e,i)}r8(t){this.j9!==t&&(this.j9=t,this.S4?this.yo(new aM(t)):this.yo(new _t(t)))}J9(){const t=this.S4;this.rZ=!1,this.S4=!1,this.Q9=0,this.j9=NaN,this.t8&&this.o8(),t?(this.yo(new jL(this.yR)),this.h8()):(this.yo(new ga(this.yR)),this.a8=!0),this.Vj()}e8(){this.S9||(this.T9=this.ZR,this.S9=!0,this.G9())}o8(){this.S9&&(this.S9=!1,this.T9||this.B9())}IJ(t){for(const e of t){if(e.pw===zr.fW&&KD.IJ(e,this.YT))return e;if(e.pw===zr._W&&oM.IJ(e))return e}}be(){this.iZ=!1,Rr(this.YT)&&(this.YT.style.display="none")}ge(){this.iZ=!0,Rr(this.YT)&&(this.YT.style.display="block")}get nt(){return this.u8}get Ll(){return this._Z}DI(t,e,i,s,n,r,o,h,a){const u=new po(t,e,i,s,n,r,o,a,h);return this.Ul.tt(u),this.c8.tt(u),u}uH(t){const{Lt:e,kh:i,gs:n}=t;if("function"==typeof this.YT.addTextTrack&&"function"==typeof s.VTTCue){const{track:t,trackElement:s}=this.l8("data:text/vtt,WEBVTT%0A%0A",e,i,n);let r=new tB(t,s);return this.d8.tt(r),this.f8.push(r),r}const r=new JL(e,i,n);return this.Ul.tt(r),this.c8.tt(r),r}nH(){return!0}oH(t,e,i,s,n){const{track:r,trackElement:o}=this.l8(t,e,i,s,n),h=new RL(r,o);return this.d8.tt(h),this.f8.push(h),h}l8(t,e,i,s,n){const r=h.createElement("track");r.src=Zi(t),r.kind=e,r.label=null!=i?i:"",s&&(r.srclang=s),r.default=!!n,r.id=aP(),this.YT.appendChild(r);return{track:this.YT.textTracks.getTrackById(r.id),trackElement:r}}lW(t){this.Ul.it(t),this.c8.it(t)}cH(){for(const t of this.Ul.oC.slice())t.gn();this.Ul.tr();for(const t of this.f8.slice())this.d8.it(t),t.gn();Pn(this.f8)}TH(){let t=this.YT.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this._8),t.addEventListener("removetrack",this.v8),t.addEventListener("change",this.m8))}fH(){let t=this.YT.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this._8),t.removeEventListener("removetrack",this.v8),t.removeEventListener("change",this.m8))}g8(t){t.mode=yh.RC;const e=new OL(t);this.d8.tt(e),this.c8.tt(e)}p8(t,e){const i=()=>{uB(t)&&(t.removeEventListener("cuechange",i),this.d8.tt(new RL(t,e)))};t.addEventListener("cuechange",i),t.mode=yh.RC}w8(t){let e=this.YT.getElementsByTagName("track");for(let i=0;i<e.length;i++){let s=e[i]||e.item(i);if(s.track===t)return s}}y8(){if(0===this.d8.V)return;const t=this.iI;if(0===t.V)return;const e=t.Cn(0);if(this.b8!==e){for(const t of this.d8.oC)t.$V(e);this.b8=e}}$n(t){return this.A8.Wo((async e=>{if(ot(e),this.qG)throw new g("Already loaded a media source");let i;if(t.pw===zr.fW)i=new KD(t,this,this.cJ,this.Rw),this.t8=!1,this.k9.l9(this.S8());else{if(t.pw!==zr._W)throw new g("Unsupported configuration");{this.t8=eB;const e=this.S8();i=new oM(t,this,e,this.cJ,this.Rw,void 0,this.Y3),this.k9.l9(e),iB&&(this.yn(Mi.$y,this.T8),this.k9.yn(Zc.QI,this.k8))}}return this.qG=i,await i.bj(),i}))}S8(){return this.t8?new vM(this):new Ka(this)}E8(){if(this.g9)return;const t=this.zR;this.g9=!0,this.zR=t,this.YT.playbackRate=0,this.k9&&this.k9.R4()}x8(){if(!this.g9)return;const t=this.zR;this.g9=!1,this.zR=t,this.I8()}I8(){this.YT.currentTime=this.YT.currentTime,this.k9&&this.k9.R4()}async tr(){this.rZ=!1,this.S4=!1,this.a8=!1,As.Og(this.E9),this.E9=0,this.Fo=ee.fB(),this.q9.Xw(),this.y9=void 0,this.j9=NaN,this.p9=void 0,this.t8=!1,this.S9=!1,this.HG=void 0,this.A9=!1,this.C8=void 0,this.b8=0,this.P8=!1,this.M9=!1,this.D8&&(this.N8(),this.D8=!1),this.H9(new $),this.k9.l9(new Ka(this)),this.W9.tr(),this.d8.tr(),this.x8(),iB&&(ao(this.M8),this.M8=0,this.fn(Mi.$y,this.T8)),await this.A8.Xw(),await this.A8.Wo((async()=>{this.qG&&(await this.qG.Ww(),this.qG=void 0,Z.Em&&Z.Rm<3&&this.L8())}))}L8(){this.B8();const t=this.YT,e=t.parentElement,i=t.tagName.toLowerCase();this.YT=zO(i),this.retainMediaElementState(t),qO(t),null==e||e.replaceChild(this.YT,t),this.N8(),this.k9.l9(this.S8()),this.W9.fn(Zc.BL,this.O8),this.W9.Ww(),this.W9=new pM(this),this.W9.yn(Zc.BL,this.O8),this.iZ?this.ge():this.be(),this.yo(new Li),this.yo(new rk)}retainMediaElementState(t){this.XG.muted=t.muted,this.XG.volume=t.volume}async Ww(){this.D8=!1,this.B8(),this.fH(),await this.tr(),await this.A8.gn(),this.W9.Ww(),this.k9.Ww(),await this.cJ.Ww(),this.cH(),this.Ul.gn(),this.d8.gn(),await this.F8.gn(),this.V8.gn(),this.u8.gn(),this.Bo()}N8(){this.XG.addEventListener("play",this.W8),this.XG.addEventListener("pause",this.U8),this.XG.addEventListener("timeupdate",this.G8),this.XG.addEventListener("progress",this.H8),this.XG.addEventListener("loadstart",this.Z8),this.XG.addEventListener("ended",this.X8),this.XG.addEventListener("ratechange",this.z8),this.XG.addEventListener("volumechange",this.q8),this.XG.addEventListener("durationchange",this.Y8),this.XG.addEventListener("resize",this.K8),this.XG.addEventListener("loadedmetadata",this.K8),this.XG.addEventListener("error",this.j8),this.XG.addEventListener("emptied",this.Q8),this.XG.addEventListener("seeked",this.J8),this.XG.addEventListener("seeking",this.t7),lr()?(this.YT.addEventListener("encrypted",this.e7),this.YT.addEventListener("waitingforkey",this.i7)):void 0!==s.WebKitMediaKeys&&"function"==typeof s.WebKitMediaKeys.isTypeSupported?this.YT.addEventListener("webkitneedkey",this.s7):Dm()?this.YT.addEventListener("webkitneedkey",this.n7):void 0!==s.MSMediaKeys&&"function"==typeof s.MSMediaKeys.isTypeSupported&&this.YT.addEventListener("msneedkey",this.r7)}B8(){this.XG.removeEventListener("play",this.W8),this.XG.removeEventListener("pause",this.U8),this.XG.removeEventListener("timeupdate",this.G8),this.XG.removeEventListener("progress",this.H8),this.XG.removeEventListener("loadstart",this.Z8),this.XG.removeEventListener("ended",this.X8),this.XG.removeEventListener("ratechange",this.z8),this.XG.removeEventListener("volumechange",this.q8),this.XG.removeEventListener("durationchange",this.Y8),this.XG.removeEventListener("resize",this.K8),this.XG.removeEventListener("loadedmetadata",this.K8),this.XG.removeEventListener("error",this.j8),this.XG.removeEventListener("encrypted",this.e7),this.XG.removeEventListener("waitingforkey",this.i7),this.XG.removeEventListener("webkitneedkey",this.s7),this.XG.removeEventListener("webkitneedkey",this.n7),this.XG.removeEventListener("msneedkey",this.r7),this.XG.removeEventListener("emptied",this.Q8),this.XG.removeEventListener("seeked",this.J8),this.XG.removeEventListener("seeking",this.t7)}o7(){this.w9||(this.Fo=this.KR,this.w9=lM(this),this.B8(),this.w9.yn(uM,this.Ds))}h7(){if(!this.w9)return;const t=this.w9;this.w9=void 0,this.k9.R4(),dM(this,t),t.Ww(),this.N8()}h8(){const t=this.yR;this.yo(new I(t,void 0)),this.C8=t}Vj(){this.A9||!this.kR||this.nI||(this.A9=!0,this.yo(new Fs(this.yR)))}PH(t){this.HG=t,this.H9(this.HG),this.yo(new wM(this.HG))}get NR(){return!!this.YT.webkitCurrentPlaybackTargetIsWireless}get a7(){return this.u7}get GB(){return la({},ZD)}l7(){this.u7||(KO(this.YT,As.Ys),this.u7=!0)}d7(t){t.appendChild(this.YT)}Q2(){iB&&this.T8(),this.k9.R4()}get _H(){return this.cJ._H}set _H(t){this.cJ._H=t}get f7(){return this.Y3}set f7(t){this.Y3=t}get K6(){return this.cJ.K6}xI(){this.cJ.a9().catch(Bt),this.d8.tr()}get gI(){return this.P8}set gI(t){this.P8=t,this.D8&&!this.P8&&(this.D8=!1,this.N8())}constructor(t,e,i,s){super(),this.HG=void 0,this.iZ=!0,this.qG=void 0,this.A8=new Eu,this.w9=void 0,this.Zo=new N,this.Qo=new NI,this.f8=[],this.y9=void 0,this.Q9=0,this.j9=NaN,this.p9=void 0,this.a8=!1,this.C8=void 0,this.b8=0,this.rZ=!1,this.S4=!1,this._7=gs.jB,this.E9=0,this.Y9=Promise.resolve(),this.q9=new $t,this.Z9=[],this.Fo=ee.fB(),this.R9=void 0,this.C9=1,this.N9=!1,this.D9=1,this.A9=!1,this.P8=!1,this.D8=!1,this.t8=!1,this.S9=!1,this.T9=!1,this.g9=!1,this.u7=!1,this.M8=0,this.M9=!1,this._8=t=>{const e=t.track,i=this.w8(e);if(!aB(this.d8,e)){if(Z.jm){if(e.kind===Hi.jV)return void this.g8(e);if(e.kind===Hi.YV&&""===e.label&&""===e.language&&!uB(e))return void this.p8(e,i)}this.d8.tt(new RL(e,i))}},this.v8=t=>{const e=aB(this.d8,t.track);e&&this.d8.it(e)},this.m8=()=>{for(let t=0;t<this.d8.V;t++){let e=this.d8.aC(t);e instanceof RL&&e.N5()}},this.T8=()=>{if(void 0===this.qG||!XD(this.qG))return;if(this.ZR)return;const t=this.qG,e=t.K3,i=t.j3;if(!e||!i)return;if(t.SJ)return void this.x8();if(t.tI===rM.G2)return;const s=e._R,n=i._R;if(0===s.V&&0===n.V)return void this.x8();const r=this.yR;if(r<s.Cn(0)||r<n.Cn(0))return void this.x8();if(s.gr(r)!==n.gr(r)){if(t.xJ(r))return;this.E8()}else if(this.x8(),!this.M8&&this.W9.L4()){s.jL(n).eB(r,r+.5)&&(this.M8=st(this.v7))}},this.v7=()=>{this.M8=0,this.T8()},this.k8=()=>{if(this.nI||this.A4)return;if(this.k9.tI>=gs.JB)return;if(void 0===this.qG||!XD(this.qG))return;const t=this.qG,e=t.K3,i=t.j3;if(!e||!i)return;const s=this.yR,n=e._R,r=i._R;if(!n.gr(s)||!r.gr(s))return;n.jL(r).eB(s-5,s)&&(this.g9?this.x8():this.I8())},this.W8=()=>{this.yo(new Xt(this.yR))},this.U8=()=>{this.z9(new $),this.yo(new vl(this.yR))},this.O8=()=>{this.U9(),this.yo(new ce(this.yR))},this.z8=()=>{this.I9()},this.Y8=()=>{this.yo(new re(this.ct))},this.H8=()=>{this.yo(new K(this.yR))},this.Z8=()=>{this.yo(new $i)},this.J8=()=>{this.rZ||this.S4||this.a8?this.a8=!1:this.yo(new ga(this.yR))},this.t7=()=>{this.r8(this.yR),this.a8=!1},this.G8=()=>{const t=this.yR,e=this.nI,i=this.k9.tI<gs.JB&&!this.kR,s=void 0!==this.C8,n=s&&this.C8!==t;this.y8(),(e||!s||n&&!i)&&this.h8()},this.X8=()=>{this.Vj()},this.j8=()=>{if(null!==this.YT.error){const e=this.YT.error;var t;this.PH(new lk(null!=(t=e.code)?t:ck.DECODE,e.message||"Error decoding media",void 0,e.msExtendedCode))}},this.Q8=()=>{this.P8&&(this.B8(),this.D8=!0)},this.m7=t=>{if(As.Og(this.E9),this.E9=0,t.readyState<=gs.QB)if(this.rZ||this.S4){const e=As.Bg()-this.Q9;if(e<250)return void(this.E9=As.Fg((()=>this.m7(t)),250-e))}else if(void 0!==this.qG&&this.qG.xJ(this.yR))return void(this.E9=As.Fg((()=>this.m7(t)),250));this._7!==t.readyState&&(this._7=t.readyState,this.yo(t))},this.q8=()=>{this.x9()},this.K8=()=>{this.cI>0&&this.hI>0&&this.yo(new P)},this.e7=t=>{this.yo(new cg(t.initDataType,t.initData||new ArrayBuffer(0)))},this.i7=()=>{this.yo(new lg)},this.r7=t=>{const e=t.initData,i=e?_c(e).buffer:new ArrayBuffer(0);this.yo(new cg(em,i))},this.s7=t=>{if(t.initData){const e=function(t){try{const e=na(t),i=new Ui,s=E(e,i,os(e,i,!0));return gr(Xg(s,!0))}catch(t){return}}(t.initData);if(!e)return;this.yo(new cg(sm,e))}else this.yo(new cg(sm,new ArrayBuffer(0)))},this.n7=t=>{const e=t.initData,i=e?_c(e).buffer:new ArrayBuffer(0);this.yo(new cg(em,i))},this.F9=()=>{this.U9()},this.V9=t=>{this.z9(t)},this.g7=t=>{this.yo(t),t.type===Mi.py&&this.PH(Te(t.errorObject))},this.YT=t,this.Rw=e,this.Xu=i,this._Z=s,this.k9=new QL(this),this.k9.yn(Zc.QI,this.m7),this.k9.l9(new Ka(this)),this.W9=new pM(this),this.W9.yn(Zc.BL,this.O8),this.cJ=new KL(this),this.cJ.yn(Fu,this.g7),this.Ul=new ha,this.d8=new ha,this.V8=new Wu([this.Ul,this.d8]),this.F8=new WL(this,this.V8),this.u8=new Wu([this.V8,this.F8.Z]),this.c8=new iu(this),this.N8(),this.TH()}};var oB=.01;function hB(t,e,i){if(void 0===i&&(i=0),!e.V)return 0;let s=e.ZL(t);const n=oB*i;return s===e.Cn(0)?s+=n:s===e.jn(e.V-1)&&(s-=n),s}function aB(t,e){for(let i of t.oC)if(i.EO===e)return i}function uB(t){return!!t.cues&&t.cues.length>0}r();var cB={LQ:void 0,BQ:void 0,OQ:void 0,FQ:void 0,VQ:void 0,WQ:void 0,UQ:void 0,GQ:void 0,HQ:void 0,ZQ:void 0},lB=class extends Bo{get ga(){return this.Za||(this.Za=FD(this)),this.Za}get LQ(){}get BQ(){}get OQ(){}get FQ(){}get VQ(){}get WQ(){}get p7(){}get UQ(){}get GQ(){}get HQ(){}get ZQ(){}constructor(...t){super(...t),this.Za=void 0}},dB=class extends rB{wI(){}get hI(){return 0}get cI(){return 0}constructor(t,e,i){super(t,e,i,new lB)}};r(),r();var fB=class{get we(){return this.w7}be(){this.w7.style.display="none"}ge(){this.w7.style.display="block"}d7(t){t.appendChild(this.w7)}gn(){ft(this.w7)}constructor(t=5){let e=s.document.createElement("div");e.className="theoplayer-texttracks",e.style.position="absolute",e.style.display="none",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.width="100%",e.style.height="100%",e.style.lineHeight="1.3em",e.style.zIndex=""+t,this.w7=e,this.ge()}};function _B(t,e){return la({},e,KA(function(t){return{LQ:t.LQ,BQ:t.BQ,OQ:t.OQ,FQ:t.FQ,VQ:t.VQ,WQ:t.WQ,UQ:t.UQ,GQ:t.GQ,HQ:t.HQ,ZQ:t.ZQ}}(t)))}function vB(t){return t.OQ&&Sm(t.OQ,"%")?Number(t.OQ.replace("%",""))/100:t.OQ&&Sm(t.OQ,"em")?Number(t.OQ.replace("em","")):1}r(),r(),r(),r(),r();var mB=class t{get y7(){return this.b7+this.ji}set y7(t){this.b7=t-this.ji}get A7(){return this.S7+this.Ti}set A7(t){this.S7=t-this.Ti}T7(t){return this.b7<t.y7&&this.y7>t.b7&&this.S7<t.A7&&this.A7>t.S7}bO(t){return this.b7<=t.b7&&t.y7<=this.y7&&this.S7<=t.S7&&t.A7<=this.A7}Tb(){return new t(this.b7,this.S7,this.ji,this.Ti)}k7(e){const i=this.b7+e,s=this.S7+e,n=_.max(0,this.ji-2*e),r=_.max(0,this.Ti-2*e);return new t(i,s,n,r)}E7(e){const i=_.min(this.b7,e.b7),s=_.max(this.y7,e.y7),n=_.min(this.S7,e.S7),r=_.max(this.A7,e.A7);return new t(i,n,s-i,r-n)}constructor(t,e,i,s){this.b7=t,this.S7=e,this.ji=i,this.Ti=s}},se=class{x7(t){const e=this.R7(t);if(!e)return!1;for(const t of e)ft(t);return this.I7(t),!0}get Ht(){return this.zO}get XG(){return this.YT}get Uu(){return this.Xu}get C7(){return this.P7}get D7(){return this.N7}bj(){this.M7(),this.zO.L.oC.forEach((t=>this.uW(t))),this.Uu.yn(Ya.pn,this.L7),this.re(this.Uu.Su,this.Uu.Tu)}B7(t){this.N7=t,this.P7=_B(this.N7,this.O7),this.P7.LQ&&(this.XG.style.fontFamily=this.P7.LQ),this.re(this.Uu.Su,this.Uu.Tu),this.F7(!0)}V7(){return this.P7}W7(t){return this.U7.has(t.TC)}M7(){this.zO.yn(Eo.FI,this.G7),this.zO.yn(Eo.WI,this.H7),this.zO.yn(Eo.aa,this.Z7)}X7(){this.zO.fn(Eo.FI,this.G7),this.zO.fn(Eo.WI,this.H7),this.zO.fn(Eo.aa,this.Z7)}z7(t){t.yn(gi.tO,this.q7),t.yn(gi.eO,this.Y7),t.yn(gi.eC,this.K7)}j7(t){t.fn(gi.tO,this.q7),t.fn(gi.eO,this.Y7),t.fn(gi.eC,this.K7)}uW(t){this.z7(t),t.Yh&&this.Q7(t)}JV(t){this.j7(t),this.J7(t)}ttt(){this.zO.TE===yh.Jn?this.ett():this.itt()}ett(){if(!this.stt)return;this.stt=!1;const t=this.Uu.Su,e=this.Uu.Tu;this.re(t,e),this.F7(!1)}itt(){this.stt||(this.stt=!0,this.F7(!0))}Q7(t){this.stt||t.Yh&&!this.W7(t)&&this.F7(!1)}J7(t){this.W7(t)&&this.F7(!0)}ntt(t){(t.Yh||this.W7(t))&&this.F7(!0)}F7(t){const e=this.ott,i=this.stt?[]:this.zO.q.oC.slice();this.htt(i,e,t),this.ott=i}R7(t){return this.U7.get(t.TC)}att(t,e){this.U7.set(t.TC,e)}I7(t){this.U7.delete(t.TC)}utt(t){const e=[],i=this.P7;if(void 0!==i.UQ){const s=t.Tb();s.Ti=i.UQ,e.push(s)}if(void 0!==i.GQ){const s=t.Tb();s.Ti=i.GQ,s.A7=t.A7,e.push(s)}return e}ctt(){return this.ott.slice()}gn(){ft(this.XG),this.U7.clear(),this.X7(),this.zO.L.oC.forEach((t=>this.j7(t))),this.Uu.fn(Ya.pn,this.L7)}constructor(t,e,i,s,n){this.U7=$h(),this.stt=!0,this.N7=la({},cB),this.ott=[],this.G7=t=>this.uW(t.DO),this.H7=t=>this.JV(t.DO),this.Z7=()=>this.ttt(),this.q7=t=>this.Q7(t.DO),this.Y7=t=>this.J7(t.DO),this.K7=t=>this.ntt(t.DO),this.L7=t=>this.re(t.width,t.height),this.zO=t,this.O7=this.P7=n,this.YT=this.ltt(i),this.Xu=s,e.appendChild(this.YT)}};function gB(t,e,i,s,n){let r=t.Tb(),o=r,h=1,a=!1;const u=C(getComputedStyle(e).lineHeight)/4;if(!S(u)&&u>0){for(let e=0;e<i.length&&!a;e++){for(;!yB(t,s,i[e],.01)&&(!s.bO(t)||pB(t,n));)wB(t,i[e],u);if(s.bO(t)){o=t.Tb(),a=!0;break}let c=bB(t,s);h>c&&(o=t.Tb(),h=c),t=r.Tb()}s.bO(t)||(o=r.Tb())}e.style.left=(o.b7-s.b7)/s.ji*100+"%",e.style.top=(o.S7-s.S7)/s.Ti*100+"%"}function pB(t,e){return e.some((e=>t.T7(e)))}function nu(t){return new mB(t.left,t.top,t.width,t.height)}var yi=function(t){return t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y",t}({});function wB(t,e,i){switch(e){case 0:t.b7+=i;break;case 1:t.b7-=i;break;case 2:t.S7+=i;break;case 3:t.S7-=i}}function yB(t,e,i,s){switch(i){case 0:return t.y7>e.y7+s;case 1:return t.b7<e.b7-s;case 2:return t.A7>e.A7+s;case 3:return t.S7<e.S7-s}}function bB(t,e){return _.max(0,_.min(t.y7,e.y7)-_.max(t.b7,e.b7))*_.max(0,_.min(t.A7,e.A7)-_.max(t.S7,e.S7))/(t.ji*t.Ti)}r();var AB=function(t){return t.Gc='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Xc='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.Jc='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Qc='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif',t}({});function SB(t,e){return t?{dtt:t.dtt,ftt:t.ftt,_tt:t._tt,El:e}:null}function TB(t){const e=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return e?{dtt:x(e[1],16),ftt:x(e[2],16),_tt:x(e[3],16)}:null}function kB(t){return("0"+t.toString(16)).slice(-2)}function EB(t){return"#"+kB(t.dtt)+kB(t.ftt)+kB(t._tt)}function xB(t){const e=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return e?{dtt:x(e[1],10),ftt:x(e[2],10),_tt:x(e[3],10),El:C(e[4])}:null}function RB(t,e){return function(t){return t?"rgba("+t.dtt+", "+t.ftt+", "+t._tt+", "+t.El+")":void 0}(SB(TB(t),e/100))}var D=function(t){return t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent",t}({});function IB(t){return CB[t||"none"]}var CB={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},PB="monospace, sans-serif",DB="Arial, Helvetica, sans-serif",NB='"Times New Roman", Times, serif',MB=Yv({monospace:"monospace",sansSerif:DB,serif:NB,monospaceSansSerif:PB,monospaceSerif:"monospace, serif",proportionalSansSerif:DB,proportionalSerif:NB,default:PB}),LB=16,BB="1.3em",OB=class extends se{ltt(t){let e=h.createElement("div");e.className="theoplayer-ttml-texttrack-"+t;const i=e.style;return i.position="absolute",Dd(i,"flex"),i.flexDirection=i.webkitFlexDirection="column",i.overflow="hidden",i.pointerEvents="none",i.top="0",i.left="0",i.width="100%",i.height="100%",i.fontSize=LB+"px",i.lineHeight=BB,e}re(t,e){const i=_.min(t/640,e/360),s=LB*i*vB(this.C7);this.XG.style.fontSize=s+"px"}htt(t,e,i){for(const t of e)!i&&t.Yh||this.x7(t);let s=[];const n=nu(this.XG.getBoundingClientRect());s.push(...this.utt(n));for(const e of t){const t=this.mtt(e,s,n);for(const e of t)s.push(e.k7(.1))}}mtt(t,e,i){let s=this.R7(t);s||(s=this.gtt(t),this.att(t,s));for(const t of s)this.XG.appendChild(t);const n=[],r=[yi.POS_Y,yi.NEG_Y,yi.POS_X,yi.NEG_X];for(const t of s){gB(jB(t),t,r,i,e),n.push(jB(t))}return n}gtt(t){let e=[];const i=t.FV,s=t.DV,n=t.GV,r=t.U,o=t.BV,a=o?_.min(640/o.width,360/o.height):1,u=this.C7;if(0===w.keys(s).length){const t=h.createElement("div");YB(t),FB(r,i,n,t,t,a,u),VB(t,"body",u),t.firstChild&&e.push(t)}else for(let t of w.keys(s)){let o=h.createElement("div");o.id=t,YB(o),GB(o,"region",s[t],i,a),FB(r,i,n,o,o,a,u),VB(o,"body",u),o.firstChild&&e.push(o)}return e}B7(t){return GD(this.XG,t),super.B7(t)}constructor(t,e,i,s){super(t,e,i,s,cB)}};function FB(t,e,i,s,n,r,o){if(Rh(t)&&function(t){const e=t.kx.toUpperCase();return"SPAN"===e||"P"===e||"BR"===e||"DIV"===e||"BODY"===e}(t)){let a=WB(t);if(!a||(null==n?void 0:n.id)===a){let a;if("BODY"===t.kx.toUpperCase())a=n;else{if(a=function(t){let e;switch(t.kx.toUpperCase()){case"BR":e=h.createElement("br");break;case"SPAN":e=h.createElement("span"),KB(e),UB(e,t);break;case"P":e=h.createElement("p"),function(t){KB(t);const e=t.style;e.textAlign="inherit",e.padding="0",e.margin="0"}(e),UB(e,t);break;case"DIV":e=h.createElement("div"),UB(e,t)}return e}(t),!a)return;s.appendChild(a)}!function(t,e,i,s,n){let r=e.Gx("style");XB(t,e.kx,r,i,s,n),function(t,e,i,s){for(const n of e.Wx)zB(t,e.kx,n.kx,n.Ix,i,s)}(t,e,s,n)}(a,t,e,n,r),function(t,e,i){let s=null==e?void 0:e.Gx("smpte:backgroundImage");if(s){s=s.replace("#","");let n=i&&HB(i,(t=>t.Wx.some((t=>"id"===t.kx&&t.Ix===s))));n&&ZB(t,n,e,!0)}!function(t,e){const i=e.m[0];if(!i||"metadata"!==i.kx.toLowerCase())return;const s=i.m[0];ZB(t,s,e)}(t,e)}(a,t,i),VB(a,t.kx,o);for(const s of t.Dx)FB(s,e,i,a,n,r,o)}}else if(SA(t)){const e=h.createTextNode(t.Zk);if("SPAN"!==s.nodeName.toUpperCase()){const t=h.createElement("span");KB(t),VB(t,"span",o),t.appendChild(e),s.appendChild(t)}else s.appendChild(e)}}function VB(t,e,i){const s=t.style;switch(i.LQ&&(s.fontFamily=i.LQ),i.BQ&&(s.color=i.BQ),e.toLowerCase()){case"span":i.FQ&&(s.background=i.FQ);break;case"p":case"div":i.VQ&&(s.backgroundColor=i.VQ);break;case"body":i.WQ&&(s.textShadow=IB(i.WQ))}}function WB(t){const e=t.Gx("region");if("p"===t.kx.toLowerCase())return e;const i=[];for(const e of t.m)i.push(WB(e));return jm(i),0===i.length?e:1===i.length?null!=(s=i[0])?s:e:void 0;var s}function UB(t,e){let i=e.Hx(XE,"id");i&&(t.id=i)}function GB(t,e,i,s,n){XB(t,e,i.style,s,t,n);for(const s of w.keys(i))zB(t,e,s,i[s],t,n)}function HB(t,e){if(e(t))return t;for(let i of t.m){const t=HB(i,e);if(t)return t}return null}function ZB(t,e,i,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const e=t&&t.Dx.length>0?t.Dx[0]:null;return e&&SA(e)?"data:image/png;base64,"+e.Zk:""}(e),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,e){const i=t.style;Dd(i,"flex"),i.flexDirection=i.webkitFlexDirection="column";let s=e.Gx("smpte:backgroundImageVertical"),n="center";if(s)switch(s.toLowerCase()){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end";break;case"inherit":n="inherit"}i.justifyContent=i.webkitJustifyContent=n;let r=e.Gx("smpte:backgroundImageHorizontal"),o="center";if(r)switch(r.toLowerCase()){case"left":o="flex-start";break;case"center":o="center";break;case"right":o="flex-end";break;case"inherit":o="inherit"}i.alignItems=i.webkitAlignItems=o}(t,i),t.appendChild(n)}function XB(t,e,i,s,n,r){if(i)for(const o of i.split(" "))if(s[o])for(const i of w.keys(s[o]))"style"===i.toLowerCase()?XB(t,e,s[o][i],s,n,r):zB(t,e,i,s[o][i],n,r)}function zB(t,e,i,s,n,r){const o=t.style;switch(i){case"backgroundColor":o.backgroundColor=s;break;case"color":o.color=s;break;case"direction":o.direction=s;break;case"display":"none"===s&&(o.display="none");break;case"fontFamily":var h;o.fontFamily=null!=(h=MB.get(s))?h:s;break;case"fontSize":{let t=s;if(Sm(t,"px")){const e=Number(t.slice(0,-2));t=e*r/LB+"em"}else Sm(t,"c")&&(t=t.replace("c","em"));o.fontSize=t,o.lineHeight&&"inherit"!==o.lineHeight||(o.lineHeight=BB);break}case"fontStyle":o.fontStyle=s;break;case"fontWeight":o.fontWeight=s;break;case"lineHeight":{let t=s;if(Sm(t,"px")){const e=Number(t.slice(0,-2));t=e*r+"px"}o.lineHeight=t;break}case"opacity":o.opacity=s;break;case"overflow":o.overflow=s;break;case"padding":o.padding=s;break;case"textAlign":o.textAlign=s;break;case"textDecoration":switch(s){case"lineThrough":o.textDecoration="line-through";break;case"underline":case"overline":o.textDecoration=s;break;case"noUnderline":case"noLineThrough":case"noOverline":o.textDecoration="none"}break;case"unicodeBidi":switch(s){case"bidiOverride":o.unicodeBidi="bidi-override";break;case"normal":case"embed":case"isolate":o.unicodeBidi=s}break;case"visibility":o.visibility=s;break;case"zIndex":o.zIndex=s;break;case"displayAlign":{let t;switch(s.toLowerCase()){case"before":t="flex-start";break;case"center":t="center";break;case"after":t="flex-end";break;case"justify":t="space-between";break;default:return}o.justifyContent=o.webkitJustifyContent=t;break}case"extent":{const i=qB(e.toLowerCase())?n:t;let r,o,h=s.split(" ",2);2===h.length?(r=h[0],o=h[1]):r=o="100%",i&&(i.style.height=o,i.style.width=r);break}case"origin":{const i=qB(e.toLowerCase())?n:t,[r,o]=s.split(" ",2);i&&(r||o)&&(r&&(i.style.left=r),o&&(i.style.top=o));break}case"showBackground":case"textOutline":break;case"wrapOption":switch(s){case"wrap":o.whiteSpace="normal";break;case"noWrap":o.whiteSpace="nowrap"}break;case"writingMode":{let t,e,i,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",e="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",i="upright";break;case"tblr":t="vertical-lr",i="upright";break;case"rl":t="horizontal-tb",e="rtl";break;default:return}o.writingMode=t,o.setProperty("-webkit-writing-mode",t),e&&(o.direction=e),i&&(o.textOrientation=i,o.setProperty("-webkit-text-orientation",i)),n&&(o.unicodeBidi=n);break}case"linePadding":if(Sm(s,"c")){let t=s.replace("c","em");o.paddingLeft=o.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?o.textAlign="":o.textAlign=s}}function qB(t){return"div"===t||"p"===t||"span"===t}function YB(t){const e=t.style;Dd(e,"flex"),e.flexDirection=e.webkitFlexDirection="column",e.top="auto",e.left="5%",e.width="90%",e.height="100%",e.maxHeight="100%",e.maxWidth="100%",e.overflow="visible",e.position="absolute",e.fontFamily=DB,e.color=D.WHITE,e.background=D.TRANSPARENT,e.textShadow=IB("uniform"),e.textAlign="start",e.writingMode="horizontal-tb",e.setProperty("-webkit-writing-mode","horizontal-tb"),e.padding="0",e.margin="0",e.fontSize="inherit",e.lineHeight="inherit"}function KB(t){const e=t.style;e.fontFamily="inherit",e.color="inherit",e.fontSize="inherit",e.lineHeight="inherit",e.textShadow="inherit"}function jB(t){let e=nu(t.getBoundingClientRect());if("visible"===getComputedStyle(t).overflow&&t.scrollHeight>t.clientHeight){const i=t.children;for(let t=0;t<i.length;t++){const s=i[t];e=e.E7(nu(s.getBoundingClientRect()))}}return e}r(),r();var QB=void 0;function JB(t){return QB||(QB=s.document.createElement("textarea")),QB.innerHTML=t,QB.value}function $B(t,e){let i="Data",s="",n=[],r=t.charAt(e.tc),o="",h={pw:"starttag",Bx:"",ptt:[]};for(;e.tc<t.length+1;){switch(r=e.tc<t.length?t.charAt(e.tc):"EOF",i){case"Data":switch(r){case"&":let n=t.substring(e.tc).match(/&#?[0-9a-zA-Z]+;/);n?(s+=JB(n[0]),e.Ab(n[0].length-1)):s+="&";break;case"<":if(s)return{pw:"string",U:s};i="Tag";break;case"EOF":return{pw:"string",U:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":i="StartTagAnnotation";break;case".":i="StartTagClass";break;case"/":i="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,i="TimestampTag";break;case">":return e.Ab(1),h;case"EOF":return h;default:s=r,i="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":i="StartTagAnnotation";break;case"\n":o=r,i="StartTagAnnotation";break;case".":i="StartTagClass";break;case">":return e.Ab(1),{pw:"starttag",Bx:s,ptt:[]};case"EOF":return{pw:"starttag",Bx:s,ptt:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(o),o="",i="StartTagAnnotation";break;case"\n":n.push(o),o=r,i="StartTagAnnotation";break;case".":n.push(o),o="";break;case">":return e.Ab(1),n.push(o),{pw:"starttag",Bx:s,ptt:n};case"EOF":return n.push(o),{pw:"starttag",Bx:s,ptt:n};default:o+=r}break;case"StartTagAnnotation":switch(r){case"&":i="CharRefInAnnotation";break;case">":e.Ab(1);let t=o.trim();return t=t.replace(/\s/," "),{pw:"starttag",Bx:s,ptt:n,wtt:t};default:o+=r}break;case"CharRefInAnnotation":let a="";for(let i=e.tc;">"===t.charAt(i);i++)a+=t.charAt(i);o+=a||"&",i="StartTagAnnotation";break;case"EndTag":switch(r){case">":return e.Ab(1),{pw:"endtag",Bx:s};case"EOF":return{pw:"endtag",Bx:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return e.Ab(1),{pw:"timestamp",ytt:s};case"EOF":return{pw:"timestamp",ytt:s};default:s+=r}}e.Ab(1)}return h}var tO=function(t){return t.btt="string",t.Att="starttag",t.Stt="endtag",t.Ttt="timestamp",t}({});function eO(t){let e;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};const i=h.documentElement,n=h.body,r=i.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=e.left+o-r,u=i.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,l=e.top+c-u;return{left:_.round(a),top:_.round(l)}}function iO(t,e,i,s){if(void 0===s&&(s=0),!t||!e)return;t.style.left="0px";let n=t.getClientRects(),r=e.getClientRects();if(0===n.length||0===r.length)return;let o=n[0],h=r[0],a=o.width/2+o.left;sO(t,h.width/2+h.left-a,i,s)}function sO(t,e,i,s){void 0===s&&(s=0),rO(t,e,"left","right",i,s)}function nO(t,e,i,s){void 0===s&&(s=0),rO(t,e,"top","bottom",i,s)}function rO(t,e,i,s,n,r){void 0===r&&(r=0);const o=t.getClientRects();if(n&&o.length>0){const t=o[0];e=Zs(e,n[i]+r-t[i],n[s]-r-t[s])}t.style[i]=e+"px"}function ku(t,e){void 0===t.textContent?t.innerText=e:t.textContent=e}r();var oO={BQ:D.WHITE,LQ:"sans-serif",OQ:"100%",FQ:"rgba(0,0,0,0.8)",VQ:D.TRANSPARENT,WQ:"none",UQ:void 0,GQ:void 0,HQ:void 0,ZQ:void 0},hO="theoplayer-webvtt-region-",aO="theoplayer-webvtt-styling-",uO="theoplayer-webvtt-default-style",cO=5.23,lO=1.14,dO=class extends se{ltt(t){let e=h.createElement("div");e.className="theoplayer-webvtt-texttrack-"+t,ya(e),e.style.overflow="hidden",e.style.pointerEvents="none";const i=this.C7.LQ;return i&&(e.style.fontFamily=i),e.style.whiteSpace="pre-line",function(){if(h.getElementById(uO))return;const t=[];for(const[e,i]of bO)t.push("."+aO+e+" { color: "+i+" !important; }"),t.push("."+aO+"ktt"+e+" { background-color: "+i+" !important; }"),t.push("video::cue(."+e+") { color: "+i+"; }"),t.push("Ett"+e+") { background-color: "+i+"; }");const e=h.createElement("style");e.id=uO,e.innerHTML=t.join("\n"),h.body.appendChild(e)}(),e}bj(){this.XG.appendChild(this.xtt),super.bj()}re(t,e){const i=_.min(t/100,e/100),s=vB(this.C7);this.Rtt.forEach((t=>{let{UO:e,Itt:n}=t;this.Ctt(n,i,s,e)})),this.Ctt(this.xtt,i,s)}B7(t){GD(this.XG,t),super.B7(t)}htt(t,e,i){const s=this.XG,n=this.Uu.Tu/100;let r=[];for(const e of t)void 0!==e.UO&&(qt(r,e.UO)||r.push(e.UO));this.Rtt.forEach(((t,e)=>{let{UO:s,Itt:n}=t;!i&&qt(r,s)||(ft(n),this.Rtt.delete(e))}));for(const t of e)!i&&t.Yh||this.x7(t);let o=[];const h=nu(this.xtt.getBoundingClientRect());o.push(...this.utt(h));for(const t of r){let e;this.Rtt.has(t.o)?e=this.Rtt.get(t.o).Itt:(e=wO(t,n),s.appendChild(e),this.Rtt.set(t.o,{UO:t,Itt:e})),o.push(nu(e.getBoundingClientRect()))}t.sort(AO);for(const e of t){const t=this.mtt(e,o,h);void 0!==t&&o.push(t.k7(.1))}}mtt(t,e,i){var s;let n;t.UO?(n=this.Rtt.get(t.UO.o).Itt,"up"===t.UO.rF&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.xtt;let r=null==(s=this.R7(t))?void 0:s[0];if(r||(r=this.Ptt(t),this.att(t,[r])),n.appendChild(r),t.UO||(fO(r,t),t.GO?function(t,e,i,s){const n=yO(t),r=n?i.Ti:i.ji;let o=C(getComputedStyle(e).lineHeight);if(0===o||S(o))return;let h=nu(e.getBoundingClientRect()),a=_.round(Wk(t));"rl"===t.Pt&&(a=-(a+1));let u=o*a;"rl"===t.Pt&&(u=u-h.ji+o);a<0&&(u+=r,o=-o);n?h.S7+=u:h.b7+=u;const c=h.Tb();let l=!1;for(;!i.bO(h)||pB(h,s);)if(n)if(o<0&&h.S7<i.S7||o>0&&h.A7>i.A7){if(h.S7=c.S7,l)break;o=-o,l=!0}else h.S7+=o;else if(o<0&&h.b7<i.b7||o>0&&h.y7>i.y7){if(h.b7=c.b7,l)break;o=-o,l=!0}else h.b7+=o;n?e.style.top=(h.S7-i.S7)/i.Ti*100+"%":e.style.left=(h.b7-i.b7)/i.ji*100+"%"}(t,r,i,e):function(t,e,i,s){let n,r=nu(e.getBoundingClientRect());if(0===r.ji||0===r.Ti)return;yO(t)?"center"===t.VO?r.S7-=r.Ti/2:"end"===t.VO&&(r.S7-=r.Ti):"center"===t.VO?r.b7-=r.ji/2:"end"===t.VO&&(r.b7-=r.ji);n=""===t.Pt?[yi.POS_Y,yi.NEG_Y,yi.POS_X,yi.NEG_X]:"lr"===t.Pt?[yi.POS_X,yi.NEG_X,yi.POS_Y,yi.NEG_Y]:[yi.NEG_X,yi.POS_X,yi.POS_Y,yi.NEG_Y];gB(r,e,n,i,s)}(t,r,i,e)),!t.UO)return nu(r.getBoundingClientRect())}Ptt(t){let e=new Ui,i=t.U,s=this.Dtt(t),n={Ntt:void 0,we:s},r=n,o="",a="",u=[n],c=[],l=[];for(;e.tc<i.length;){let t=$B(i,e);if(t.pw===tO.btt){const e=h.createElement("span");ku(e,t.U),_O(e,u),""!==o&&(e.lang=o),this.Mtt(e,a),r.we.appendChild(e)}else if(t.pw===tO.Att){const e=t.Bx.toLowerCase();switch(e){case"i":case"b":case"u":case"ruby":{let i=h.createElement(e);r.we.appendChild(i),r={Ntt:t,we:i},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.Ntt)?void 0:d.Bx.toLowerCase())){let e=h.createElement("rt");r.we.appendChild(e),r={Ntt:t,we:e},u.push(r)}break;case"c":case"v":r={Ntt:t,we:r.we},u.push(r);break;case"font":{var f;const e=null==(f=t.wtt)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);e&&(a=e[1],l.push(a),r={Ntt:t,we:r.we},u.push(r));break}case"lang":var _;o=null!=(_=t.wtt)?_:"",c.push(o)}}else if(t.pw===tO.Stt){var v;const e=t.Bx.toLowerCase(),i=null==(v=r.Ntt)?void 0:v.Bx.toLowerCase();i===e?(u.pop(),r=u[u.length-1],"font"===e&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===i&&"ruby"===e?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===e&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.pw===tO.Ttt){let e=t.ytt,i=new Ui;try{TE(e,i)}catch(t){Ur("ERROR collecting timestamp",t)}}}return s}Mtt(t,e){const i=this.C7,s=this.D7;i.FQ&&(t.style.background=i.FQ);const n=s.BQ||e||i.BQ;n&&(t.style.color=n)}Ctt(t,e,i,s){if(s){let n=vO(s,e);t.style.height=n*i+"px",t.style.left=mO(s)+"%",t.style.top=gO(s,e)+"px"}t.style.fontSize=cO*e*i+"px"}Dtt(t){const e=h.createElement("div");e.style.position="absolute",e.style.margin="0",e.style.padding="0",e.style.unicodeBidi="plaintext",e.style.wordWrap="break-word",e.style.overflowWrap="break-word",e.style.width="auto",e.style.textAlign=t.OO,function(t,e){"rl"===e.Pt?t.style.writingMode="vertical-rl":"lr"===e.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(e,t),function(t,e){let i=Hk(e);yO(e)?(t.style.width=i+"%",t.style.height="auto"):(t.style.height=i+"%",t.style.width="auto")}(e,t),fO(e,t);const i=this.C7.VQ;i&&(e.style.background=i);const s=this.C7.BQ;return s&&(e.style.color=s),e.style.textShadow=IB(this.C7.WQ),e}constructor(t,e,i,s){super(t,e,i,s,oO),this.Rtt=_u(),this.xtt=pO(3)}};function fO(t,e){let i,s,n=Gk(e),r=Uk(e),o=Hk(e);if(yO(e)){switch(n){case"line-left":i=r;break;case"center":i=r-o/2;break;case"line-right":i=r-o}s=e.GO?0:Wk(e)}else{switch(n){case"line-left":s=r;break;case"center":s=r-o/2;break;case"line-right":s=r-o}i=e.GO?0:Wk(e)}t.style.left=i+"%",t.style.top=s+"%"}function _O(t,e){for(const i of e)if(i.Ntt){for(const e of i.Ntt.ptt)Rd(t,aO+e);"v"===i.Ntt.Bx.toLowerCase()&&i.Ntt.wtt&&Rd(t,"theoplayer-webvtt-voice-"+i.Ntt.wtt)}}function vO(t,e){return t.iF*(cO*e)*lO}function mO(t){return t.oF-t.sF*t.ji/100}function gO(t,e){let i=t.hF,s=t.nF*vO(t,e)/100;return _.max(0,i-s)}function pO(t){let e=h.createElement("div");return e.className=hO+"default",ya(e),e.style.wordWrap="break-word",e.style.writingMode="horizontal-tb",e.style.pointerEvents="none",e.style.width="auto",e.style.height="auto",e.style.maxHeight="100%",e.style.minHeight="0px",e.style.padding="0",e.style.boxSizing="border-box",e.style.fontSize=cO*t+"px",e.style.lineHeight=lO+"em",e}function wO(t,e){let i=pO(e);i.className=hO+t.o;let s=t.ji,n=vO(t,e);return i.style.width=s+"%",i.style.height=n+"px",i.style.left=mO(t)+"%",i.style.right="",i.style.top=gO(t,e)+"px",i.style.bottom="",i.style.boxSizing="border-box",i}function yO(t){return""===t.Pt}var bO=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function AO(t,e){const i=Wk(t),s=Wk(e),n=SO(i,t.GO),r=SO(s,e.GO);return n&&r?i-s||be(e,t)||e.TC-t.TC:be(t,e)||t.TC-e.TC}function SO(t,e){return e?t<0?t>-8:t>8:t>50}r(),r(),r();var TO=function(t){return t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics",t}({}),kO={BQ:D.WHITE,LQ:AB.Jc,OQ:"100%",FQ:D.BLACK,VQ:"transparent",WQ:"none",Ltt:"regular",UQ:void 0,GQ:void 0,HQ:void 0,ZQ:void 0},EO=[{Btt:D.WHITE,Ltt:"regular",Ott:0},{Btt:D.WHITE,Ltt:"underline",Ott:0},{Btt:D.GREEN,Ltt:"regular",Ott:0},{Btt:D.GREEN,Ltt:"underline",Ott:0},{Btt:D.BLUE,Ltt:"regular",Ott:0},{Btt:D.BLUE,Ltt:"underline",Ott:0},{Btt:D.CYAN,Ltt:"regular",Ott:0},{Btt:D.CYAN,Ltt:"underline",Ott:0},{Btt:D.RED,Ltt:"regular",Ott:0},{Btt:D.RED,Ltt:"underline",Ott:0},{Btt:D.YELLOW,Ltt:"regular",Ott:0},{Btt:D.YELLOW,Ltt:"underline",Ott:0},{Btt:D.MAGENTA,Ltt:"regular",Ott:0},{Btt:D.MAGENTA,Ltt:"underline",Ott:0},{Btt:D.WHITE,Ltt:"italics",Ott:0},{Btt:D.WHITE,Ltt:"underline-italics",Ott:0},{Btt:D.WHITE,Ltt:"regular",Ott:0},{Btt:D.WHITE,Ltt:"underline",Ott:0},{Btt:D.WHITE,Ltt:"regular",Ott:4},{Btt:D.WHITE,Ltt:"underline",Ott:4},{Btt:D.WHITE,Ltt:"regular",Ott:8},{Btt:D.WHITE,Ltt:"underline",Ott:8},{Btt:D.WHITE,Ltt:"regular",Ott:12},{Btt:D.WHITE,Ltt:"underline",Ott:12},{Btt:D.WHITE,Ltt:"regular",Ott:16},{Btt:D.WHITE,Ltt:"underline",Ott:16},{Btt:D.WHITE,Ltt:"regular",Ott:20},{Btt:D.WHITE,Ltt:"underline",Ott:20},{Btt:D.WHITE,Ltt:"regular",Ott:24},{Btt:D.WHITE,Ltt:"underline",Ott:24},{Btt:D.WHITE,Ltt:"regular",Ott:28},{Btt:D.WHITE,Ltt:"underline",Ott:28}],xO=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function RO(t,e){return $k(t.Ftt,e.Ftt)||Om(t.JM,e.JM)}r();var Ft=32,IO=/CC([1-4])=(.*)/;function CO(t){if(!t)return[];const e=[],i=t.trim().split(";");if(i.every((t=>t.match(IO))))for(const t of i){const[,i,s]=t.match(IO);e.push({Vtt:Number(i),Wtt:s})}else for(let t=0;t<i.length;t++)e.push({Vtt:t+1,Wtt:i[t]});return e}var PO=class t{get Utt(){return this.Htt.Gtt}get Ztt(){return this.Htt.Xtt}get ztt(){return this.Htt.Xtt.Ott-this.Htt.Gtt.Ott+1}get qtt(){return this.Htt.Xtt.Ytt-this.Htt.Gtt.Ytt+1}pr(){return this.Ktt=this.jtt(),this.Qtt(),this.Jtt(),this.Ktt}jtt(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.ztt/Ft*this.tet.$tt*100+"%",t.style.height=1.2*this.qtt+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.tet.eet?"calc(1em - 1ch)":"";const e=this.P7.LQ;e&&(t.style.fontFamily=e);const i=this.P7.VQ;return i&&(t.style.backgroundColor=i),t}Qtt(){if(!this.Ktt)return;let t=this.Utt.Ytt/15*100,e=this.Utt.Ott/Ft*100,i=(Ft-this.Ztt.Ott-1)/Ft*100,s=(15-this.Ztt.Ytt-1)/15*100;this.tet.iet||(e=i=1,this.Ktt.style.width="98%"),s<t?this.Ktt.style.bottom=s*this.tet.$tt+"%":this.Ktt.style.top=t*this.tet.$tt+"%",i<e?this.Ktt.style.right=i+"%":this.Ktt.style.left=e+"%"}Jtt(){const t=this.Htt.net.sort(DO);for(let e=0;e<t.length;e++)this.ret(t[e-1],t[e]),this.oet(t[e]);this.ret(t[t.length-1],void 0)}oet(e){var i;const s=_B(this.P7,e.het),n=t.aet(s);ku(n,e.uet),null==(i=this.Ktt)||i.appendChild(n)}static aet(t){const e=h.createElement("span");e.style.display="inline-block",t.Ltt!==TO.FONT_ITALICS&&t.Ltt!==TO.FONT_UNDERLINE_ITALICS||(e.style.fontStyle="italic"),t.Ltt!==TO.FONT_UNDERLINE&&t.Ltt!==TO.FONT_UNDERLINE_ITALICS||(e.style.textDecoration="underline");const i=t.BQ;i&&(e.style.color=i);const s=t.FQ;return s&&(e.style.backgroundColor=s),e.style.textShadow=IB(t.WQ),e.style.height="1.2em",e}ret(t,e){let i=t?t.Xtt.Ytt:this.Htt.Gtt.Ytt;const s=e?e.Gtt.Ytt:this.Htt.Xtt.Ytt;let n=t?t.Xtt.Ott:this.Htt.Gtt.Ott;const r=e?e.Gtt.Ott:this.Htt.Xtt.Ott;i<s&&(!e||t&&t.Gtt.Ytt!==e.Gtt.Ytt?this.cet():this.let(this.Htt.Xtt.Ott-n),n=this.Htt.Gtt.Ott),n<r&&(e?this.let(r-n):this.cet())}cet(){var t;const e=h.createElement("br");null==(t=this.Ktt)||t.appendChild(e)}let(t){var e;if(t<=0)return;const i=h.createElement("span");i.style.display="inline-block",ku(i,Tm(" ",t)),null==(e=this.Ktt)||e.appendChild(i)}constructor(t,e,i){this.Htt=t,this.tet=e,this.P7=i}};function DO(t,e){return function(t,e){if(t.Ytt!==e.Ytt)return t.Ytt-e.Ytt;return t.Ott-e.Ott}(t.Gtt,e.Gtt)}var NO=class extends se{ltt(t){let e=h.createElement("div");return e.className="theoplayer-cea608-texttrack-"+t,e.style.position="absolute",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.top="10%",e.style.bottom="10%",this.C7.LQ&&(e.style.fontFamily=this.C7.LQ),e}re(t,e){this.vl()}vl(){let t=vB(this.C7);this.det=function(t){return{$tt:t/100,eet:t<=100,iet:t<=150}}(100*t);const e=this.fet/Ft;this._et=e*t,this.XG.style.fontSize=this._et+"px"}get fet(){let t=this.XG.offsetWidth;return this.det&&this.det.iet||(t*=.8),t}htt(t,e,i){for(const t of e)!i&&t.Yh||this.x7(t);for(const e of t)this.mtt(e)}mtt(t){this.det&&this.det.iet?this.vet(80):this.vet(100),this.vl();let e=this.R7(t);e||(e=this.gtt(t),this.att(t,e));for(const t of e)this.XG.appendChild(t)}gtt(t){return t.U.map((t=>new PO(t,this.det,this.C7).pr()))}vet(t){const e=(100-t)/2;this.XG.style.left=e+"%",this.XG.style.width=t+"%"}constructor(t,e,i,s){super(t,e,i,s,kO)}},MO=class t{met(t){for(let e of this.pet)if(e.Ht===t)return e}static wet(t){switch(t.pw){case Vr.TTML:case Vr.SRT:case Vr.WEBVTT:case Vr.CEA608:return!0}return!1}yet(t){switch(t.pw){case Vr.TTML:return new OB(t,this.bet,t.kh,this.Xu);case Vr.SRT:case Vr.WEBVTT:return new dO(t,this.bet,t.kh,this.Xu);case Vr.CEA608:return new NO(t,this.bet,t.kh,this.Xu)}}Aet(t){let e=this.met(t);e||(e=this.yet(t),e&&(e.bj(),e.B7(this._Z),this.pet.push(e),t.TE===yh.Jn&&e.ett()))}Tet(t){let e=this.pet;for(let i=e.length-1;i>=0;i-=1){let s=e[i];s.Ht===t&&(s.gn(),Ko(e,i))}}ket(e){vx(e.Lt)&&t.wet(e)&&(e.tI===nc.ERROR?this.Tet(e):this.Aet(e))}get R5(){return this.Eet.cs||this.Qo.iO}tr(){for(let t of this.pet)t.Ht.fn(Eo.QI,this.xet),t.Ht.fn(Eo.$I,this.xet),t.gn();Pn(this.pet)}gn(){this.tr();for(let t of this.pet)t.gn();this.Ul.fn(Ce.MI,this.Ret),this.Ul.fn(Ce.BI,this.Iet),this.Ul.fn(Eo.aa,this.xet),this.Eet.fn(ys.aa,this.Cet),this.Qo.fn([Me.tO,Me.eO],this.Cet),this._Z.fn("jI",this.Pet)}constructor(t,e,i,s,n,r){this.pet=[],this.Ret=t=>{let e=t.Ht;e.yn(Eo.QI,this.xet),e.yn(Eo.$I,this.xet),e instanceof RL&&(e.R5=this.R5),this.ket(e)},this.xet=t=>{let e=t.Ht;this.ket(e)},this.Iet=t=>{let e=t.Ht;e.fn(Eo.QI,this.xet),e.fn(Eo.$I,this.xet),this.Tet(e)},this.Cet=()=>{let t=this.R5;for(let e of this.Ul.oC)e instanceof RL&&(e.R5=t)},this.Pet=()=>{for(let t of this.pet)t.B7(this._Z)},this.bet=t,this.Xu=e,this.Ul=i,this.Eet=n,this.Qo=r,this._Z=s,this.Ul.yn(Ce.MI,this.Ret),this.Ul.yn(Ce.BI,this.Iet),this.Ul.yn(Eo.aa,this.xet),this.Eet.yn(ys.aa,this.Cet),this.Qo.yn([Me.tO,Me.eO],this.Cet),this._Z.yn("jI",this.Pet),this.Cet()}};r();var LO=class extends Bo{get sO(){var t;return null!=(t=this.Det.ownerDocument.pictureInPictureEnabled)&&t}get iO(){return this.Net}async co(){if(this.sO){if(!this.iO){const t=this.uy([Me.tO,Me.ua]);await this.Det.requestPictureInPicture(),await t,this.Net||this.yo(new ma)}}else this.yo(new ma)}async bo(){if(this.sO){if(this.Net){const t=this.uy([Me.eO,Me.ua]);await this.Det.ownerDocument.exitPictureInPicture(),await t,this.Net&&this.yo(new ma)}}else this.yo(new ma)}gn(){this.Bo(),this.Det.removeEventListener("enterpictureinpicture",this.Met),this.Det.removeEventListener("leavepictureinpicture",this.Let)}constructor(t){super(),this.Net=!1,this.Met=()=>{this.Net=!0,this.yo(new ok)},this.Let=()=>{this.Net=!1,this.yo(new hk)},this.Det=t,this.Det.addEventListener("enterpictureinpicture",this.Met),this.Det.addEventListener("leavepictureinpicture",this.Let)}};function BO(t){const e=new UP,i=function(t){const e=[];return VP.na(t)&&e.push(new VP(t)),WP.na(t)&&e.push(new WP(t)),e}(t);if(i.length>0){for(const t of i)e.oK(t);e.rK(i[0])}return e}var OO=class extends rB{get XG(){return this.YT}get hI(){return this.YT.videoHeight}get cI(){return this.YT.videoWidth}get wa(){return this.Bet}get aH(){return this.Oet}wI(){return this.YT}async Ww(){this.Oet.gn(),this.Bet.gn(),this.Fet.gn(),this.Vet.gn(),await super.Ww()}be(){super.be(),this.Fet.be()}ge(){super.ge(),this.Fet.ge()}d7(t){super.d7(t),this.Fet.d7(t)}constructor(t,e,i,s){super(t,e,i,s),this.Bet=BO(t),this.Oet=new LO(t),this.Fet=new fB,this.Vet=new MO(this.Fet.we,this.Uu,this.nt,this.Ll,this.wa,this.aH)}};r(),r();r(),r();var FO=function(t){return t.Wet="HELLO",t.Uet="HI_THERE",t.Get="INITIALIZE",t.Het="APPEND_INIT",t.Zet="APPEND_DATA",t.Xet="ACK",t.zet="REMOVE",t.qet="DESTROY_SESSION",t}({}),VO=class{Yet(t){return this.Go.Wo((async t=>{ot(t);const e=new MessageChannel,i=e.port1,s=e.port2;Ll.serviceWorker.controller||await bA(Ll.serviceWorker,"install",t),"activated"!==Ll.serviceWorker.controller.state&&await bA(Ll.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};Ll.serviceWorker.controller.postMessage(n,[s]),i.start(),this.Pp=i;try{const e=await bA(i,"message",t),s=e.data;if("HI_THERE"!==s.kind)throw new g("Could not set up message channel");this.QT=s.sessionId}catch(t){throw Se(t)&&this.Ket(),t}}),t)}jet(t,e){return this.Pp,this.Go.Wo((async()=>{if(!this.Pp)throw new g("MessageSession not set up yet or already closed.");e||(e=[]),this.Pp.postMessage(t,e);const i=await bA(this.Pp,"message");return i.data}))}Qet(){return this.Go.Wo((()=>this.Ket()))}Ket(){if(!Ll.serviceWorker.controller)return;if("activated"!==Ll.serviceWorker.controller.state)return;if(!this.Pp)return;const t={kind:"DESTROY_SESSION"};this.Pp.postMessage(t),this.Pp.close(),this.Pp=void 0}constructor(){this.Go=new Eu}};r();var WO=class{get Jet(){return this.$et}tit(t,e){const i=t-e;this.$et=i>this.Jet?this.$et:i}eit(t){this.$et=t}constructor(){this.$et=1/0}};r(),r(),r();var Yi=function(t){return t.cE="audio",t.lE="video",t.jV="metadata",t}({}),UO=class extends Bo{get _R(){return void 0===this.iit||void 0===this.sit?ee.fB():new ee([this.iit,this.sit])}get md(){return{Ik:this.hY}}get n3(){return Cl(this.hY,"audio")?Io.cE:Cl(this.hY,"video")?Io.lE:Io.Qk}get Xq(){return this.hY}get o3(){return ee.fB()}get mj(){return 30}set mj(t){}get yj(){return 30}set yj(t){}u3(t,e){}l3(t,e){}SJ(){return this.nit}get ca(){return this.rit}get oit(){return this.iit}get BO(){return this.sit}async d3(){}async N2(t,e){}async l2(t,e,i){if(t.pw!==Ut.QQ)throw new g("Streaming or opaque segments are not supported yet.");const s=t.Zk,n=async()=>{const t=s.buffer,i={kind:FO.Zet,mediaType:GO(this.hY),segment:s,startPts:e.hit,totalDuration:e.ct};if(await this.ait.jet(i,[t]),void 0===this.iit){const t=e.hit+e.PV;this.iit=t,this.sit=t}this.sit=this.sit+e.ct,this.yo(new pe(ss.KQ))};return this.Go.Wo((async t=>{ot(t);try{this.rit=!0,await n()}finally{this.rit=!1}}),i)}async _2(t,e,i){if(t.pw!==Ut.QQ)throw new g("Streaming or opaque initialization segments are not supported yet.");const s=t.Zk,n=async()=>{const t={kind:FO.Het,mediaType:GO(this.hY),segment:s};await this.ait.jet(t,[])};return this.Go.Wo((async t=>{ot(t);try{this.rit=!0,await n()}finally{this.rit=!1}}),i)}i3(){this.nit=!0}z2(){this.nit=!1}async jS(t,e,i){const s=async()=>{const t={kind:FO.zet,mediaType:GO(this.hY),endTime:e};await this.ait.jet(t),this.iit=void 0,this.sit=void 0,this.yo(new pe(ss.KQ))};return this.Go.Wo((async t=>{ot(t);try{this.rit=!0,await s()}finally{this.rit=!1}}),i)}hJ(t){return this.hY===t.Ik}uJ(t){return this.hY=t.Ik,Promise.resolve()}async Ww(){this.Bo(),await this.Go.gn()}constructor(t,e){super(),this.hY=t,this.ait=e,this.iit=void 0,this.sit=void 0,this.Go=new Eu,this.rit=!1,this.nit=!1}};function GO(t){return t.match(/video/)?Yi.lE:Yi.cE}var HO=class t{static uit(e,i,s,n){const r=[];for(let t=0;t<e.o4.length;t++){const s=e.o4[t].Ik;r.push(new UO(s,i))}return new t(e,r,s,n)}cit(){}get dit(){return[this.Q3,this.J3].filter(ne)}get K3(){return this.Q3}get _R(){return tM(this)}get md(){return this.IT}get ct(){return 0}get SJ(){var t,e,i;const s=null==(i=null==(t=this.Q3)?void 0:t.SJ())||i;var n;const r=null==(n=null==(e=this.J3)?void 0:e.SJ())||n;return s&&r}get iI(){return new ee([0,1/0])}get j3(){return this.J3}async Ww(){await Promise.all([this.Q3,this.J3].filter(ne).map((t=>t.Ww())))}e4(t){}r4(t,e,i,s){}i3(){var t,e;null==(t=this.Q3)||t.i3(),null==(e=this.J3)||e.i3()}z2(){var t,e;null==(t=this.Q3)||t.z2(),null==(e=this.J3)||e.z2()}hJ(t){return!0}uJ(t){return this.IT=t,Promise.resolve()}lJ(t){}async rJ(t,e){const i=await this.Rw.xw(t.ww,e),s=await i.uT();return await this.oJ(s),s}async oJ(t){if(t&&!this.YT.src)throw new ir(Ja.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.YT.src)throw new ir(Ja.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const e=this.nT;e&&(await e.hT(this.YT),this.nT=void 0),t&&(await t.bn(this.YT),this.nT=t)}constructor(t,e,i,s){this.nT=void 0,this.IT=t,this.J3=Ti(e,(t=>Boolean(t.Xq.match(/video/)))),this.Q3=Ti(e,(t=>Boolean(t.Xq.match(/audio/)))),this.Rw=i,this.YT=s,this.cit()}},ZO=class extends Bo{fit(){this.Det.addEventListener("timeupdate",this._it),this.Det.addEventListener("ended",this.vit),this.Det.addEventListener("timeupdate",this.mit),this.Det.addEventListener("ratechange",this.git),this.Det.addEventListener("volumechange",this.pit),this.Det.addEventListener("durationchange",this.wit),this.Det.addEventListener("playing",this.yit),this.Det.addEventListener("seeking",this.Ait),this.Det.addEventListener("play",this.Sit),this.Det.addEventListener("pause",this.Tit),this.Det.addEventListener("encrypted",this.e7)}kit(){this.Det.removeEventListener("timeupdate",this._it),this.Det.removeEventListener("ended",this.vit),this.Det.removeEventListener("timeupdate",this.mit),this.Det.removeEventListener("ratechange",this.git),this.Det.removeEventListener("volumechange",this.pit),this.Det.removeEventListener("durationchange",this.wit),this.Det.removeEventListener("playing",this.yit),this.Det.removeEventListener("seeking",this.Ait),this.Det.removeEventListener("play",this.Sit),this.Det.removeEventListener("pause",this.Tit)}Eit(){this.k9.yn(Zc.QI,this.Ds)}xit(){this.k9.fn(Zc.QI,this.Ds)}get XG(){return this.Det}get C4(){return!1}get yR(){return this.Det.currentTime+this.Rit.Jet}get ZR(){return this.Det.paused}get dI(){return this.Det.volume}set dI(t){this.Det.volume=t}get zR(){return this.Det.playbackRate}set zR(t){this.Det.playbackRate=t}get Iit(){return this.Det.defaultPlaybackRate}get _R(){var t,e;return null!=(e=null==(t=this.qG)?void 0:t._R)?e:ee.fB()}get Cit(){return ee.xn(this.Det.buffered)}get KR(){const t=this.Pit;return this.Fo.KL(t.Ab(this.Rit.Jet))}get Pit(){return ee.xn(this.Det.played)}get nI(){return this.rZ}get A4(){return!1}get M4(){return!1}get ct(){return this.Det.duration}get FR(){return this.Det.muted}set FR(t){this.Det.muted=t}get het(){return this.Det.style}get GB(){return la({},ZD,{UB:!0})}Sb(t,e,i){this.q9.Xw(),this.q9=new $t,this.Y9=go(this.K9(t,this.Y9,this.q9.Bw),this.q9).catch(Bt)}async K9(t,e,i){var s;this.Fo=this.KR;const n=null==(s=this.qG)?void 0:s.dit;if(!n)return;const r=_.max(...n.map((t=>t.oit?t.oit:1/0)));this.rZ=!0,this.yo(new _t(t)),await e.catch(Bt),ot(i);try{for(this.Dit||this.Nit(),this.Det.load(),this.Mit||(this.Lit=!1,await hu(this.Det.play(),i));this.tI<gs.QB;)await this.k9.uy(Zc.QI,i);this.Bit.Mb(),this.Dit=!1,this.rZ=!1,this.yo(new ga(this.yR))}catch(t){throw this.Bit.Lb(t),t}finally{this.Oit(),this.Rit.eit(r)}}bI(){this.Mit=!0,this.Det.pause()}async AI(){this.Mit&&(this.Det.src||this.l7(),await this.Bit.Bb,await this.Det.play())}async Ww(){this.ait&&this.ait.Qet().catch(Bt),this.q9.Xw(),this.kit(),this.xit(),this.k9.Ww(),this.Bo(),this.Ul.gn(),this.Fet.gn(),this.Vet.gn()}async tr(){this.ait&&this.ait.Qet().catch(Bt),this.q9.Xw(),this.Det.removeAttribute("src"),this.Det.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.Det.removeAttribute("x-airplay-deny"),this.Det.disableRemotePlayback=!1,this.Det.load(),this.k9.tr(),this.Fo=ee.fB()}l7(){this.a7||(KO(this.Det,As.Ys),this.u7=!0)}get tI(){return this.k9.tI}Nit(){const t=this.Det.getClientRects();let e;if(!(t.length>0))return;e=t[0];const i=e.width,s=this.Det.videoWidth/this.Det.videoHeight,n=e.height;let r,o;i/n>s?(r=n*s,o=n):(o=i/s,r=i),this.Det.style.width=r+"px",this.Det.style.height=o+"px",this.Det.style.marginLeft=(i-r)/2+"px",this.Det.style.marginTop=(n-o)/2+"px",this.Det.style.backgroundColor="black"}Oit(){this.Det.style.width="100%",this.Det.style.height="100%",this.Det.style.marginLeft="",this.Det.style.marginTop="",this.Det.style.backgroundColor=""}get hI(){return this.Det.videoHeight}get cI(){return this.Det.videoWidth}get kR(){return this.Det.ended}get Ti(){return this.Det.offsetHeight*As.Ys.Xg}get ji(){return this.Det.offsetWidth*As.Ys.Xg}get NR(){return!1}get a7(){return this.u7}get mR(){}get Uu(){return this.Fit}get lt(){}get wa(){return this.Bet}get aH(){return this.Qo}get iI(){return this.qG?this.qG.iI:ee.fB()}get YG(){}get nt(){return this.Ul}get Ll(){return this._Z}get gI(){return!1}set gI(t){}oH(t,e,i,s,n){}DI(t,e,i,s,n,r,o,h,a){const u=new po(t,e,i,s,n,r,o,a,h);return this.Ul.tt(u),this.c8.tt(u),u}uH(t){throw g("Not supported.")}IJ(t){}OR(){return kD(this.Det)}get P9(){return"block"===this.Det.style.display}ge(){this.Det.style.display="block",this.Fet.ge()}be(){this.Det.style.display="none",this.Fet.be()}o7(){}async $n(t){if(t.pw===zr.fW)throw new g("Not yet implemented");await this.ait.Yet();const e=Ti(t.JG,(t=>t.rT.pw===Ne.mw)),i={kind:FO.Get,mediaBufferConfigs:t.o4.map((t=>t.Ik)),fairPlaySdkUri:null==e?void 0:e.LU};return await this.ait.jet(i),this.qG=HO.uit(t,this.ait,this.Rw,this.Det),this.cJ.$n(this.qG,t),this.Det.setAttribute("x-webkit-airplay","deny"),this.Det.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.Det.disableRemotePlayback=!0,this.Det.preload="none",this.Det.src="https://theo.proxy/"+this.ait.QT+"/master.m3u8",this.qG}h7(){}lW(t){this.Ul.it(t),this.c8.it(t)}cH(){for(const t of this.Ul.oC.slice())t.gn();this.Ul.tr()}UG(t){}nH(){return!1}d7(t){t.appendChild(this.Det),this.Fet.d7(t)}wI(){return this.Det}get _H(){return this.cJ._H}set _H(t){this.cJ._H=t}get f7(){}set f7(t){}get K6(){}xI(){}constructor(t,e,i,s){super(),this.Dit=!0,this.ait=new VO,this.Rit=new WO,this.Mit=!0,this.Bit=new as,this.rZ=!1,this.Y9=Promise.resolve(),this.q9=new $t,this.Lit=!0,this.Fo=ee.fB(),this.u7=!1,this._it=()=>{this.ZR||this.Cit.V<=0||this._R.V<=0||this.Rit.tit(this._R.jn(this._R.V-1),this.Cit.jn(this.Cit.V-1))},this.vit=()=>{this.yo(new Fs(this.yR))},this.mit=()=>{this.yo(new I(this.yR,this.mR))},this.git=()=>{this.yo(new Nu(this.yR,this.zR))},this.pit=()=>{this.yo(new eh(this.yR,this.dI))},this.wit=()=>{this.yo(new re(this.ct))},this.yit=()=>{this.yo(new ce(this.yR))},this.Ait=()=>{this.Sb(this.yR)},this.Sit=async()=>{this.Lit&&this.yo(new Xt(this.yR)),this.Mit=!1,this.Lit=!0},this.Tit=()=>{this.Mit=!0,this.yo(new vl(this.yR))},this.e7=t=>{const e=t.initDataType;var i;const s=null!=(i=t.initData)?i:new ArrayBuffer(0);this.yo(new cg(e,s))},this.Det=t,this.k9=new Ka(this),this.Fit=i,this._Z=s,this.Det.playsInline=!0,this.Det.style.width="100%",this.Det.style.height="100%",this.fit(),this.Eit(),this.Bet=BO(this.Det),this.Qo=new LO(this.Det),this.cJ=new KL(this),this.Rw=e,this.Ul=new ha,this.c8=new iu(this),this.Fet=new fB,this.Vet=new MO(this.Fet.we,this.Uu,this.nt,this.Ll,this.wa,this.aH)}},XO=[Io.cE,Io.lE];function zO(t){const e=h.createElement(t);return Rr(e)&&e.addEventListener("contextmenu",jO),YO(e),e}function qO(t){YO(t),t.removeEventListener("contextmenu",jO)}function YO(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),Ch(t),Wd(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=hl.qB,t.controls=!1,t.style.display="none",Rr(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function KO(t,e){if(e.lp){const e=t.muted;t.muted=!0,t.muted=!1,t.muted=e}else if(t.paused){const e=t.play();bt(e)&&oh(e),t.pause()}}function jO(t){t.preventDefault()}r(),r();var QO=class{zk(t){return this.aW.zk(t)}xE(t){this.aW.xE(t)}gn(){this.aW.gn()}constructor(t){this.aW=t}},JO=class extends QO{zk(t){const e=new Fe(t),i=this.dZ.nj.pG(e);return i?this.Vit(e,i):this.aW.zk(e)}async Vit(t,e){e.hj(As.Bg()/1e3);const i=await this.aW.zk(t);let s;e.aj(As.Bg()/1e3),s=i.Mk?i.Rk().pipeThrough(new Ho(new $O(e))):i.xk().then((t=>{const i=As.Bg()/1e3;return e.uj(i,new j(t)),e.cj(i),t}));const n={Zk:s,zk:i.zk};return new Hb(n,i)}constructor(t,e){super(t),this.dZ=e}},$O=class{start(t){this.NQ=t}transform(t){this.Wit.uj(As.Bg()/1e3,t),this.NQ.enqueue(t)}flush(){this.Wit.cj(As.Bg()/1e3)}constructor(t){this.Wit=t}};function tF(t){return{get ratio(){return t.$o},get thresholds(){return t.Uit.slice()}}}function eF(t){const e=[],i=_.floor(1/t);if(S(i))return[];for(let s=0;s<=i;s++){const i=Zs(s*t,0,1);e.push(i)}return e}r(),r(),r();var iF=class{get $o(){return this.Git}get Uit(){return this.Hit}Zit(t){return e=>{const i=e[e.length-1];this.Git=i.intersectionRatio,t(i.intersectionRatio)}}get ga(){return this.Za||(this.Za=tF(this)),this.Za}SI(){this.Xit.disconnect()}constructor(t,e,i){this.Git=1,this.Za=void 0,this.Hit=eF(e);const n=this.Zit(i);this.Xit=new s.IntersectionObserver(n,{root:null,threshold:this.Hit}),this.Xit.observe(t)}},sF=class{get $o(){return this.Git}get Uit(){return this.Hit}get ga(){return this.Za||(this.Za=tF(this)),this.Za}zit(t){this.Git=t;const e=this.Hit;let i=0;if(t>0)for(;i<e.length&&e[i]<=t;)++i;this.qit!==i&&(this.qit=i,this.Yit(t))}constructor(t,e){this.Git=1,this.qit=-1,this.Za=void 0,this.Hit=eF(t),this.Yit=e}},nF=class extends sF{Kit(){const t=this.lo.getBoundingClientRect();return Zs(_.max(0,_.min(s.innerWidth,t.right)-_.max(0,t.left))*_.max(0,_.min(s.innerHeight,t.bottom)-_.max(0,t.top))/(t.width*t.height),0,1)}SI(){s.removeEventListener("scroll",this.jit)}constructor(t,e,i){super(e,i),this.jit=Jr((()=>this.zit(this.Kit())),50),this.lo=t,s.addEventListener("scroll",this.jit,!!CP&&{passive:!0}),di((()=>this.zit(this.Kit())))}},rF=.1,oF=class{get Qit(){return this.Jit}get Do(){return this.$it}set Do(t){if(S(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.$it=t}get ga(){return this.Za||(this.Za=function(t){return{get ratio(){return t.Qit},get visible(){return t.Qit>t.Do},get visibleThreshold(){return t.Do},set visibleThreshold(e){e=eo(e),t.Do=e},addObserver:(e,i)=>(e=eo(e),t.Ao(e,i).ga),removeObserver(e){let i=t.tst(e);i&&t.No(i)}}}(this)),this.Za}ist(t){return e=>{this.Jit=e,null==t||t(this.Jit)}}Ao(t,e){if(S(t))throw new b("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let i;return i="function"==typeof s.IntersectionObserver?new iF(this.lo,t,this.ist(e)):new nF(this.lo,t,this.ist(e)),this.sst.push(i),i}No(t){t.SI(),we(this.sst,t)}tst(t){for(const e of this.sst)if(e.ga===t)return e}gn(){for(const t of this.sst)t.SI();Pn(this.sst)}constructor(t){this.Jit=1,this.$it=0,this.sst=[],this.Za=void 0,this.lo=t,this.Ao(.1,this.ist())}};r();var hF=class extends pe{constructor(){super(Mi.Ay)}},aF=class extends Je{get nst(){return this.dZ}get pO(){return this.rst}set pO(t){this.rst=t,this.xa.pO=t}get ost(){return this.hst}get ht(){return this.xa.ht}get Tz(){return this.ast}get Uu(){return this.ust}get PR(){return this.xa.PR}get LR(){return this.cst}get WX(){return this.lst}get nt(){return this.xa.nt}get Ll(){return this._Z}get rt(){return this.xa.rt}get _R(){return this.vR()}vR(){return this.xa._R}get dst(){return this.Fj}get Qj(){return this.Jj}get yR(){return this.bR()}set yR(t){this.AR(t)}bR(){return this.xa.yR}AR(t,e){this.xa.AR(t,e)}fst(){return this.bR()}get mR(){return this.xa.mR}set mR(t){this.xa.mR=t}get bt(){return this.xa.bt}get ct(){return this._d()}_d(){return this.xa.ct}get we(){return this.xa.we}get kR(){return this.xa.kR}get lt(){return this.xR()}xR(){return this.xa.lt}get RR(){return this.IR()}IR(){return this.xa.RR}get wa(){return this.xa.pI()}get aH(){return this.xa._a()}get gI(){return this.xa.gI}set gI(t){this.xa.gI=t}get FR(){return this.xa.FR}set FR(t){const e=Boolean(t);this.UR(e)}UR(t){this.xa.FR=t,t||this.ZR||this.yI()}get ZR(){return this.xa.ZR}get zR(){return this.qR()}set zR(t){this.YR(t)}qR(){return this.xa.zR}YR(t){this.xa.zR=t}get KR(){return this.jR()}jR(){return this.xa.KR}get QR(){return this.xa.QR}set QR(t){this.xa.QR=t}get tI(){return this.xa.tI}get iI(){return this.sI()}sI(){return this.xa.iI}get nI(){return this.xa.nI}get TC(){return this.TO}get hI(){return this.xa.hI}get cI(){return this.xa.cI}get dI(){return this.xa.dI}set dI(t){const e=Zs(Number(t),0,1)||0;this._I(e)}get vI(){return this.fZ}_I(t){this.xa.dI=t}Sa(){Kc(this,jI,this)}AI(){this.xa.AI()}bI(){this.xa.bI()}Ya(){return this.JH}async ka(t,e){if(this.JH=t,t){this._st.dq(t).catch(this.vst);const i=function(t){t.sources;const e=t.sources.filter((t=>pd(t.integration)));0;return t.sources=e,t}(t);await this.xa.ka(i,e)}}yI(){if(this.do)return;this.xa.yI(),this.hst.yI();const t=this.we.getElementsByTagName("video");for(let e=0;e<t.length;e++){const i=t[e];"Advertisement"===i.title&&KO(i,As.Ys)}this.do=!0}cs(){return this.mst.Uo()===Bu.FULLSCREEN}ge(){this.xa.ge()}be(){this.xa.be()}wI(){return this.xa.wI()}xI(){this.xa.xI()}RI(){this.xa.RI()}DI(t){return this.xa.DI(t)}async SI(){this.JH=void 0,await this.xa.SI(),await this.xa.tr()}async gn(){this.yo(new hF),this.Bo(),this.ast.gn(),this.aR.gn(),this.lst.gn(),this.gst.gn(),this.pst.gn(),this.mst.gn(),this.ust.gn(),this.wst.gn(),this.hst.gn(),this.lZ.gn(),await this.xa.gn()}constructor(t,e,i){super(),this.rst=!1,this.do=!1,this.JH=void 0,this.yst=!1,this.Ca=void 0,this.vst=t=>{if(this.yst)return;this.yst=!0;const e=this.bst,i=Te(t);this.xa.cC=new OI(this.we,i,t),oh(e.gn())},this.Ast=t=>{t.type!==Mi.Wy&&t.type!==Mi.Vy&&this.yo(t)};const s=eo(e.uid);S(s)?this.TO=pk++:this.TO=s,this.md=e;const n=As.aR,r=new LD;this.wst=new wP("9.0.0",n,r),this.dZ=new mD,this.fZ=new mI;const o=new JO(n,this.dZ);this.aR=new nD(o,e.allowMixedContent),this.kQ=null!=i?i:new jC(e.isEmbeddable,"9.0.0",XC()),this._st=new MD(n,this.kQ,this.wst,r,e,XC()),this._st.yQ().catch(this.vst),this.ust=new BP(t),this.ust.yn(Ya.pn,this.Ds),this._Z=new UD,this.Fj=new yD,this.Jj=new AD;const h=new BI(t,e,this.aR,this.dZ,this.fZ,this.ust,this._Z);this.dZ.bj(h);let a=h;a=new bD(a,this.dst),a=new SD(a,this.Qj),this.bst=a,this.xa=new uk(this.bst),this.xa.Jw(this.Ast),this.cst=new TD(this.xa),this.lst=new hD(this.xa,this.aR,this.dZ),this.gst=new TP(this),this.pst=new GP(this.xa,e.allowNativeFullscreen),this.mst=new YP(this.pst,this.xa._a()),this.ust.bn(),this.To=new oF(t),this.lZ=new EI(this.ust,this._Z,1,[Io.lE]),this.hst=new xI(this.lZ),this.ast=new RD}};r(),r();var sc=class extends Je{get nst(){return this.Sst()}Sst(){return this.ta.nst}get Vc(){return this.Tst()}Tst(){return this.ta.Vc}get wst(){return this.ta.wst}get ost(){return this.kst()}kst(){return this.ta.ost}get pO(){return this.ta.pO}set pO(t){this.ta.pO=t}get gst(){return this.ta.gst}get Tz(){return this.ta.Tz}get dst(){return this.ta.dst}get md(){return this.ta.md}get Uu(){return this.ta.Uu}get wa(){return this.pI()}pI(){return this.ta.wa}get aH(){return this._a()}_a(){return this.ta.aH}get aR(){return this.ta.aR}get vI(){return this.ta.vI}get _st(){return this.ta._st}get Qj(){return this.ta.Qj}get WX(){return this.ta.WX}get mst(){return this.ta.mst}get ust(){return this.ta.ust}get xa(){return this.ta.xa}get Ll(){return this.ta.Ll}get Est(){return this.xst()}xst(){return this.ta.Est}get Rst(){return this.Ist()}Ist(){return this.ta.Rst}get TC(){return this.ta.TC}get To(){return this.ta.To}get ht(){return this.lR()}lR(){return this.ta.ht}vR(){return this.ta.vR()}get mR(){return this.gR()}set mR(t){this.pR(t)}gR(){return this.ta.mR}pR(t){this.ta.mR=t}get bt(){return this.wR()}wR(){return this.ta.bt}bR(){return this.ta.bR()}AR(t,e){this.ta.AR(t,e)}fst(){return this.ta.fst()}_d(){return this.ta._d()}get we(){return this.SR()}SR(){return this.ta.we}get kR(){return this.ER()}ER(){return this.ta.kR}xR(){return this.ta.xR()}IR(){return this.ta.IR()}get PR(){return this.DR()}DR(){return this.ta.PR}get gI(){return this.ta.gI}set gI(t){this.ta.gI=t}get LR(){return this.OR()}OR(){return this.ta.LR}get FR(){return this.WR()}set FR(t){this.UR(t)}WR(){return this.ta.FR}UR(t){this.ta.UR(t)}get ZR(){return this.XR()}XR(){return this.ta.ZR}get zR(){return this.qR()}set zR(t){this.YR(t)}qR(){return this.ta.zR}YR(t){this.ta.zR=t}jR(){return this.ta.jR()}get QR(){return this.JR()}set QR(t){this.$R(t)}JR(){return this.ta.QR}$R(t){this.ta.QR=t}get tI(){return this.eI()}eI(){return this.ta.tI}get Ca(){return this.ta.Ca}set Ca(t){this.ta.Ca=t}sI(){return this.ta.sI()}get nI(){return this.rI()}rI(){return this.ta.nI}get nt(){return this.oI()}oI(){return this.ta.nt}get hI(){return this.aI()}aI(){return this.ta.hI}get rt(){return this.uI()}uI(){return this.ta.rt}get cI(){return this.lI()}lI(){return this.ta.cI}get dI(){return this.fI()}set dI(t){this._I(t)}fI(){return this.ta.dI}_I(t){this.ta._I(t)}yI(){this.ta.yI()}bI(){this.ta.bI()}AI(){this.ta.AI()}ge(){this.ta.ge()}be(){this.ta.be()}cs(){return this.ta.cs()}wI(){return this.ta.wI()}xI(){this.ta.xI()}RI(){this.ta.RI()}DI(t){return this.ta.DI(t)}Sa(){this.ta.Sa()}Ya(){return this.ta.Ya()}ka(t,e){return this.ta.ka(t,e)}SI(){return this.ta.SI()}CI(t){return!1}jH(){this.Cst&&this.ta.Jw(this.NI)}QH(){this.Cst&&this.ta.oy(this.NI)}async gn(t){this.Bo(),t||await this.ta.gn(),this.QH()}constructor(t,e){super(),this.NI=t=>{this.CI(t)||this.yo(t)},this.ta=t,this.Cst=!e,this.jH()}},co=function(t){return t[t.nu=0]="nu",t[t.Pst=1]="Pst",t[t.YC=2]="YC",t[t.Dst=3]="Dst",t[t.Nst=4]="Nst",t[t.Mst=5]="Mst",t}({}),uF=[0,1,2,3,4,5],cF={};function Nh(t,e){(cF[e]||(cF[e]=[])).push(t)}var lF={};function dF(t,e){(lF[e]||(lF[e]=[])).push(t)}var fF=[];function _F(t){for(const e of fF)e(t)}r();var vF=self.CustomEvent;var mF=function(){try{const t=new vF("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,e){return new CustomEvent(t,e)}:function(t,e){const i=h.createEvent("CustomEvent");return i.initCustomEvent(t,(null==e?void 0:e.bubbles)||!1,(null==e?void 0:e.cancelable)||!1,null==e?void 0:e.detail),i};r();var gF=new class{get V(){return this.vO.length}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){const e=[];for(let i=0;i<t.V;i++)e[i]=t.aC(i).ga;return e.getPlayerByUID=e=>{const i=t.Lst(e);return i&&i.ga},e}(this)}aC(t){return this.vO[t]}XJ(t){this.vO.push(t),this.ga.push(t.ga)}jS(t){const e=this.vO.indexOf(t);e<0||(Ko(this.vO,e),this.Za&&Ko(this.Za,e))}Lst(t){for(const e of this.vO)if(e.TC===t)return e}constructor(){this.vO=[],this.Za=void 0}};function pF(t){let e,i;const s=e=>{i=e;const s=DC(e,t.md);t.ka(s)};let n={get abr(){return t.nst.ga},get ads(){var e;return null==(e=t.Vc)?void 0:e.ga},get audioTracks(){return t.ht.ga},get autoplay(){return t.pO},set autoplay(e){t.pO=Boolean(e)},get buffered(){return t.vR()},get canvas(){return t.gst.ga},get cast(){var e;return null==(e=t.Tz)?void 0:e.ga},get clip(){return t.dst.ga},get currentProgramDateTime(){var e;return null!=(e=t.mR)?e:null},set currentProgramDateTime(e){t.mR=null!=e?e:void 0},get currentTime(){return t.bR()},set currentTime(e){t.AR(Number(e))},get duration(){return t._d()},get element(){return t.we},get ended(){return t.kR},get error(){return t.xR()},get errorObject(){return t.IR()},get loop(){return t.Qj.Qj},set loop(e){t.Qj.Qj=Boolean(e)},get metrics(){return t.LR.ga},get muted(){return t.FR},set muted(e){t.UR(e)},get network(){return t.WX.ga},get paused(){return t.ZR},get playbackRate(){return t.zR},set playbackRate(e){const i=Number(e);if(i<0)throw new RangeError("playbackRate must be a positive number");t.zR=i},get played(){return t.jR()},get poster(){return t.mi},set poster(e){t.mi=xe(e)},get preload(){return t.QR},set preload(e){t.QR=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(e)},get presentation(){return t.mst.ga},get readyState(){return t.tI},get seekable(){return t.sI()},get seeking(){return t.nI},get source(){return i},set source(t){s(t)},get src(){return AC(t.Ya())},set src(t){s({sources:t})},get textTracks(){return t.nt.ga},get textTrackStyle(){return t.Ll.ga},get theoLive(){return t.Est},get uid(){return t.TC},get videoHeight(){return t.hI},get videoTracks(){return t.rt.ga},get videoWidth(){return t.cI},get visibility(){return t.To.ga},get volume(){return t.dI},set volume(e){t._I(Number(e))},get latency(){return t.vI.ga},get theoads(){return t.Rst},destroy(){t.gn(),t=null,i=void 0},play(){t.Bst()},pause(){t.bI()},stop(){i=void 0,t.SI()},prepareWithUserAction(){t.yI()},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)},setSource(t){s(t)},addTextTrack:e=>t.DI(function(t){return{Lt:xe(t.kind),kh:xe(t.label),gs:xe(t.language),pw:xe(t.type)}}(e)).ga};return e=new Xu(n,!0),e.iu(t),e.yn("destroy",(()=>{e.gn()})),n}r(),r(),r(),r();var wF=class extends pe{constructor(t){super(Mi.ro),this.source=t}};r();var yF=class extends Je{get mR(){}set mR(t){}get yR(){return this.bR()}set yR(t){this.AR(t)}bR(){return this.nZ}fst(){return this.bR()}AR(t,e){this.rZ&&this.nZ===t||(this.nZ=t,this.rZ=!0,this.yo(new _t(this.nZ)))}get ZR(){return this.hZ}get zR(){return this.aZ}set zR(t){this.aZ!==t&&(this.aZ=t,this.yo(new Nu(this.nZ,this.zR)))}get tI(){return gs.jB}get nI(){return this.rZ}AI(){this.hZ&&(this.hZ=!1,this.yo(new Xt(this.nZ)),this.yo(new Za(this.nZ)))}bI(){this.hZ||(this.hZ=!0,this.yo(new I(this.nZ,this.mR)),this.yo(new vl(this.nZ)))}tr(){this.nZ=0,this.rZ=!1,this.aZ=1,this.bI()}gn(){this.Bo()}be(){}ge(){}constructor(){super(),this.nZ=0,this.hZ=!0,this.rZ=!1,this.aZ=1}};r();var bF={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},AF={visibility:"hidden"},SF={visibility:"visible"},TF=class{get qu(){return void 0!==this.Ost?this.Ost:void 0!==this.Fst?this.Fst:void 0}set Vst(t){this.Fst=t,this.Yn()}Yn(){const t=this.ta.ZR,e=this.Wst;this.qu?this.Vs.style.backgroundImage='url("'+Im(this.qu)+'")':this.Vs.style.backgroundImage="",t&&this.qu&&!e?this.ge():this.be()}ge(){Nd(AF,this.ta.we),Nd(SF,this.Vs)}be(){Nd(AF,this.Vs),Nd(SF,this.ta.we)}jH(){this.ta.yn(Mi.ro,this.Ust),this.ta.yn(Mi.so,this.PW)}gn(){this.ta.fn(Mi.ro,this.Ust),this.ta.fn(Mi.so,this.PW),ft(this.Vs)}constructor(t){this.Wst=!1,this.Ust=t=>{var e;this.Wst=!this.ta.ZR,this.Ost=null==(e=t.source)?void 0:e.poster,this.Yn()},this.PW=()=>{this.Wst=!0,this.be()},this.ta=t,this.jH(),this.Vs=function(){let t=s&&s.document&&s.document.createElement("div");return t.className="theoplayer-poster",Nd(bF,t),t}(),t.we.appendChild(this.Vs)}};r(),r(),r(),r();var Sa=function(t){return t[t.Gst=0]="Gst",t[t.Hst=1]="Hst",t}({});function Ee(t){let e;const i={get playing(){return t.$c},get currentAds(){return t.Zst.map((t=>t.Xst()))},get currentAdBreak(){var e,i;return null!=(i=null==(e=t.zst)?void 0:e.Xst())?i:null},get scheduledAds(){return t.qst.map((t=>t.Xst()))},get scheduledAdBreaks(){return t.Yst.map((t=>t.Xst()))},skip(){t.RD()},schedule(e){let i=CC(e,Ih.Lg);i?t.o6(i,Sa.Gst,!1):console.error("Invalid ad description")},registerServerSideIntegration(e,i){t.Kst(e,i)},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new ht(t,i),i}var kF=class extends Je{get $c(){return!!this.Dc&&this.Dc.$c}get Zst(){return this.Dc?this.Dc.Zst:[]}get zst(){return this.Dc?this.Dc.zst:null}get qst(){return this.Dc?this.Dc.qst:[]}get Yst(){return this.Dc?this.Dc.Yst:[]}o6(t,e,i){var s;null==(s=this.Dc)||s.o6(t,e,i)}jst(t){var e;null==(e=this.Dc)||e.jst(t)}RD(){var t;null==(t=this.Dc)||t.RD()}Qst(t){var e;null==(e=this.Dc)||e.Qst(t)}Kst(t,e){var i;null==(i=this.Dc)||i.Kst(t,e)}get ga(){var t;return null!=(t=this.Za)?t:this.Za=Ee(this)}async gn(t){this.Bo(),void 0!==this.Dc&&(this.Dc.oy(this.Ds),t||await this.Dc.gn(),this.Dc=void 0)}constructor(t){var e;super(),this.Za=void 0,this.Dc=t,null==(e=this.Dc)||e.Jw(this.Ds)}};r(),r();var es=class extends $s{constructor(t,e){super(t),this.Yl=e}},cs=class extends pe{get ad(){return this.adBreak}constructor(t,e){super(t),this.adBreak=e}},Mu=class extends es{ma(){return new EF(this.Yl.Xst())}constructor(t){super("Jst",t)}},EF=class extends cs{constructor(t){super("removeadbreak",t)}};r();var xF=class extends es{ma(){return new RF(this.Yl.Xst())}constructor(t){super("$st",t)}},RF=class extends cs{constructor(t){super("addadbreak",t)}};r(),r();var $a=class extends $s{constructor(t,e){super(t),this.tnt=e}},IF=class extends pe{constructor(t,e){super(t),this.ad=e}},Ru=class extends $a{ma(){return new CF(this.tnt.Xst())}constructor(t){super("ent",t)}},CF=class extends IF{constructor(t){super("addad",t)}};r();var Lh=class extends es{ma(){return new PF(this.Yl.Xst())}constructor(t){super("int",t)}},PF=class extends cs{constructor(t){super("adbreakend",t)}};r();var Va=class extends es{ma(){return new DF(this.Yl.Xst())}constructor(t){super("snt",t)}},DF=class extends cs{constructor(t){super("adbreakbegin",t)}};r();var cn=class extends $a{ma(){return new NF(this.tnt.Xst(),this.currentTime)}constructor(t,e){super("nnt",t),this.currentTime=e}},NF=class extends IF{constructor(t,e){super("adbegin",t),this.currentTime=e}};r();var xn=class extends $a{ma(){return new MF(this.tnt.Xst(),this.currentTime)}constructor(t,e){super("rnt",t),this.currentTime=e}},MF=class extends IF{constructor(t,e){super("adend",t),this.currentTime=e}};r();var Ys=class extends $s{ma(){return new LF}constructor(){super("ont")}},LF=class extends pe{constructor(){super("adadded")}},BF=class extends kF{get cC(){return this.Dc}set cC(t){const e=this.Dc;if(e===t)return;const i=this.Zst,s=this.zst,n=this.qst,r=this.Yst;null==e||e.oy(this.Ds),this.Dc=t,null==t||t.Jw(this.Ds);const o=this.Zst,h=this.zst,a=this.qst,u=this.Yst,c=[];let l=!1;for(const t of r)qt(u,t)||c.push(new Mu(t));for(const t of u)qt(r,t)||c.push(new xF(t));for(const t of a)qt(n,t)||(c.push(new Ru(t)),l=!0);l&&c.push(new Ys),s!==h&&(s&&c.push(new Lh(s)),h&&c.push(new Va(h)));for(const t of i)qt(o,t)||c.push(new xn(t,this.ta.bR()));for(const t of o)qt(i,t)||c.push(new cn(t,this.ta.bR()));for(const t of c)this.yo(t)}constructor(t){super(void 0),this.ta=t}};r(),r();var OF=class extends Je{get ga(){var t;return null!=(t=this.Za)?t:this.Za=Ee(this)}Qst(t){}Kst(t,e){}o6(t,e,i){}RD(){}jst(t){}gn(){return this.Bo(),Promise.resolve()}constructor(...t){super(...t),this.$c=!1,this.zst=null,this.Zst=[],this.Yst=[],this.qst=[],this.Za=void 0}},Ue=class extends OF{o6(t,e,i){this.hnt.push({ant:t,unt:e,cnt:i})}RD(){}Qst(t){}Kst(t,e){this.lnt.push({iP:t,dnt:e})}jst(t){const e=this.lnt.slice(),i=this.hnt.slice();this.tr();for(const i of e)t.Kst(i.iP,i.dnt);for(const e of i)t.o6(e.ant,e.unt,e.cnt)}fnt(){const t=this.hnt.map((t=>t.ant));return this.tr(),t}tr(){Pn(this.lnt),Pn(this.hnt)}async gn(){this.tr(),await super.gn()}constructor(...t){super(...t),this.lnt=[],this.hnt=[]}};r();var FF,VF=class extends pe{constructor(t){super("tizen2retry"),this.originalErrorEvent=t}};function WF(){if(!FF){let t=aF;t=function(t){return class extends sc{constructor(e,i){let s=new t(e,i);for(const t of uF)if(lF[t])for(const e of lF[t])s=e(s);super(s)}}}(t);let e=function(t){return class extends Je{get wst(){return this._nt.wst}get Vc(){return this.Dc}get gst(){return this._nt.gst}get md(){return this._nt.md}get aR(){return this._nt.aR}get wa(){return this._nt.wa}get aH(){return this._nt.aH}get mst(){return this._nt.mst}get ust(){return this._nt.ust}get xa(){return this._nt.xa}get nst(){return this._nt.nst}get pO(){return this._nt.pO}set pO(t){this._nt.pO=t,this.vnt()}get ost(){return this._nt.ost}get ht(){return this._nt.ht}get Tz(){return this._nt.Tz}get Uu(){return this._nt.ust}get ga(){return this.Za||(this.Za=this.ma()),this.Za}get PR(){return this._nt.PR}get gI(){return this._nt.gI}set gI(t){this._nt.gI=t}get LR(){return this._nt.LR}get WX(){return this._nt.WX}get nt(){return this._nt.nt}get Ll(){return this._nt.Ll}get rt(){return this._nt.rt}get dst(){return this._nt.dst}get Qj(){return this._nt.Qj}get mR(){return this.ta.mR}set mR(t){this.ta.mR=t}get bt(){return this._nt.bt}get we(){return this._nt.we}get kR(){return this._nt.kR}get FR(){return this._nt.FR}set FR(t){this.UR(t)}get ZR(){return this.ta.ZR}get mi(){return this.mnt.qu||""}set mi(t){this.mnt.Vst=t}get zR(){return this.qR()}set zR(t){this.YR(t)}qR(){return this._nt.zR}YR(t){this.ta.zR=t}get QR(){return this._nt.QR}set QR(t){this._nt.QR=t}get tI(){return this.ta.tI}get Ca(){return this._nt.Ca}set Ca(t){this._nt.Ca=t}get nI(){return this.ta.nI}get Est(){return this._nt.Est}get Rst(){return this._nt.Rst}get TC(){return this._nt.TC}get hI(){return this._nt.hI}get cI(){return this._nt.cI}get dI(){return this._nt.dI}set dI(t){this._I(t)}get vI(){return this._nt.vI}get _st(){return this._nt._st}get To(){return this._nt.To}async Wo(t,e){return this.Go.Wo(t,e).catch(Pu)}async gnt(t,e){ot(e),this._nt.Jw(this.pnt);try{await this._nt.ka(t,e)}finally{this._nt.oy(this.pnt)}}async vnt(){const t=await this.wnt();this.ynt(t)}async wnt(){const t=this.Ya();return t&&!pC(t)&&this.pO&&this.ZR?this.ost.bnt(this.FR):"none"}ynt(t){var e;const i=(null==(e=this.Ya())?void 0:e.mutedAutoplay)||this.md.mutedAutoplay;switch(t){case"all":this.Bst();break;case"muted":(this.FR||i===JT.ALL)&&(this.FR=!0,this.AI())}}ka(t){pC(this.JH)||this.yo(new Ks(0,gs.jB)),this.tr(),this.JH=t,oh(this.Wo((async e=>{ot(e);try{await this.gnt(t,e)}catch(t){return Zr(t),this.JH=void 0,void this.PH(jy(t,Ja.SOURCE_NOT_SUPPORTED))}finally{this.Ant(this._nt)}const i=await this.wnt();this.yo(new wF(this.Ya())),this.ynt(i)})))}AR(t,e){this.ta.AR(t,e)}xR(){var t;return null!=(t=this.wZ)?t:this._nt.xR()}IR(){var t;return null!=(t=this.HG)?t:this._nt.IR()}PH(t){void 0===this.IR()&&(this.HG=t,this.wZ=Te(t),this.yo(new Wa(t)))}AI(){this.ta.AI()}Bst(){this.FR||this.yI(),this.AI()}yI(){this._nt.yI()}bI(){this.ta.bI()}SI(){this.ka(void 0)}ge(){this.iZ=!0,this.ta.ge()}be(){this.iZ=!1,this.ta.be()}Sa(){this._nt.Sa()}_I(t){this._nt._I(t)}UR(t){this._nt.UR(t)}ja(t){this.Snt=t,t.XJ(this)}cs(){return this._nt.cs()}Ya(){return this.JH}wI(){return this._nt.wI()}bR(){return this.ta.bR()}fst(){return this.ta.fst()}_d(){return this._nt._d()}vR(){return this._nt.vR()}jR(){return this._nt.jR()}sI(){return this._nt.sI()}xI(){this._nt.xI()}RI(){this._nt.RI()}DI(t){return this._nt.DI(t)}tr(){this.JH=void 0,this.HG=void 0,this.wZ=void 0,this.Tnt=!0,Pn(this.knt),this.Ent.tr(),this.Ant(this.Ent),this.Go.Xw(),oh(this.Go.Wo((async t=>{ot(t),await this._nt.SI()})))}gn(){this.yo(new hF),this.mnt.gn(),this.QH(),this.tr(),oh(this.Wo((async()=>{await this._nt.gn(),this.Snt&&(this.Snt.jS(this),this.Snt=void 0),this.Go.gn()}))),this.Bo()}Ant(t){if(this.ta===t)return;const e=this.ta.ZR,i=this.ta.bR(),s=this.ta.zR,n=this.ta.tI,r=this.ta.nI;this.xnt=e,this._7=n,this.QH(),t.Jw(this.Rnt),t===this._nt?(void 0!==this.Dc&&(this.Dc.cC=t.Vc,this.Int.jst(this.Dc)),(r||t.bR()!==i)&&t.AR(i),t.zR!==s&&(t.zR=s),e?t.bI():t.AI()):(void 0!==this.Dc&&(this.Dc.cC=this.Int,this.Int.tr()),this.md.retainPlaybackRateOnSourceChange?t.zR=s:1!==s&&this.yo(new Nu(this.bR(),1))),t.oy(this.Rnt),this.ta=t,this.jH();for(const t of this.knt)this.yo(t);Pn(this.knt),this.iZ?t.ge():t.be()}jH(){this.ta.Jw(this.II)}QH(){this.ta.oy(this.II)}ma(){return pF(this)}constructor(e,i){super(),this.xnt=!0,this._7=gs.jB,this.Tnt=!1,this.JH=void 0,this.HG=void 0,this.wZ=void 0,this.pnt=t=>{t.type!==Mi.Hy&&this.knt.push(t)},this.Rnt=t=>{(t.type!==Mi.so||this.ta.ZR)&&(t.type===Mi.Uy&&this.ta.ZR||t.type===Mi.qy&&this.ta.nI&&this.ta.bR()===t.currentTime||t.type===Mi.Hy&&this.ta.zR===t.playbackRate||this.yo(t))},this.II=t=>{if(this.Tnt){if(t.type===Zc.LL)return;t.type!==Zc.PL&&t.type!==Zc.BL||(this.Tnt=!1)}if(t.type===Mi.so){if(!this.xnt)return;this.xnt=!1}else if(t.type===Mi.Uy){if(this.xnt)return;this.xnt=!0}else if(t.type===Zc.QI){if(this._7===t.readyState)return;this._7=t.readyState}else if(t.type===Mi.Ay)return;this.yo(t)},this._nt=new t(e,i),this.Ent=new yF,this.ta=this._nt,this.mnt=new TF(this),this._nt.Vc&&(this.Dc=new BF(this),this.Dc.cC=this._nt.Vc,this.Int=new Ue),this.Go=new Eu,this.knt=[],this.iZ=!0,this.jH()}}}(t);Z.Em&&Z.Rm<3&&(e=function(t){return class extends t{ka(t){this.Cnt=0,super.ka(t)}yo(t){if(t.type===sn.ua&&this.Cnt<3)return this.Cnt++,super.yo(new VF(t)),void super.ka(this.Ya());super.yo(t)}constructor(...t){super(...t),this.Cnt=0}}}(e)),e=function(t){let e=t;for(const t of uF)if(cF[t])for(const i of cF[t])e=i(e);return e}(e),FF=e}return FF}function UF(t,e){const i=tk(e),s=new(WF())(t,i);s.Ca=s;let n=s.ga;return s.Sa(),s.ja(gF),w.defineProperty(n,"constructor",{value:UF}),n=zA(n),_F(s),n}di((()=>{self.dispatchEvent&&self.dispatchEvent(mF("theoplayerready"))})),r();var GF={base64:new class{encode(t){return ea(t)}decode(t){return Da(t)}}};r();var HF=JSON.parse('["hbbtv","dash","hesp","millicast","hls","chromecast","ads","theoads","airplay","spotx","vr","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","uplynk","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');r(),r(),r();var ZF=class{get yR(){const t=this.ta.currentTime;return isFinite(t)?t:"now"}get Pnt(){return this.ta.src||""}tr(){}constructor(t,e){this.Dnt=!1,this.Nnt=t=>{this.Mnt.$q(t.error,this.yR)},this.Lnt=()=>{this.Mnt.Kq(this.Pnt),this.ta.removeEventListener("playing",this.Lnt),this.Dnt=!1},this.js=()=>{var t,e,i,s;this.Dnt||(this.ta.addEventListener("playing",this.Lnt),this.Dnt=!0),null==(t=this.ta.ads)||t.removeEventListener("adbegin",this.Bnt),null==(e=this.ta.theoads)||e.removeEventListener("interstitialbegin",this.Ont);var n,r;(null==(s=this.ta.source)||null==(i=s.ads)?void 0:i.some((t=>"theoads"===t.integration)))&&(null==(n=this.ta.ads)||n.addEventListener("adbegin",this.Bnt),null==(r=this.ta.theoads)||r.addEventListener("interstitialbegin",this.Ont))},this.Bnt=t=>{"theoads"!==t.ad.integration||t.ad.isSlate||this.Mnt.Jq("ad")},this.Ont=t=>{const e=t.interstitial;(function(t){return"adbreak"===t.type})(e)||this.Mnt.Jq(function(t){switch(t){case"adbreak":default:return"ad";case"overlay":return"overlay"}}(e.type))},this.Mnt=e,this.ta=t,this.ta.addEventListener("error",this.Nnt),this.ta.addEventListener("sourcechange",this.js),this.js()}};!function(t){fF.push(t)}((function(t){new ZF(t.ga,t.wst)})),r();var XF="theoplayer-stored-volume",zF="theoplayer-stored-mutedstate";Nh((function(t){return class extends t{UR(t){this.md.persistVolume&&ba.Pb(zF,""+Boolean(t)),super.UR(t)}_I(t){this.md.persistVolume&&ba.Pb(XF,""+Number(t)),super._I(t)}constructor(t,e){if(super(t,e),e.persistVolume){let t=ba.pQ(XF);(void 0===t||S(t))&&(t=1);const e=ba.wQ(zF)||!1;this.dI=t,this.FR=e}}}}),co.nu);var qF="9.0.0",YF=gF.ga,KF=VS.lP.registerContentProtectionIntegration.bind(VS.lP);r(),r(),r(),r();var jF={vY(t){s.addEventListener("beforeunload",t)},lY(t){s.removeEventListener("beforeunload",t)}},QF={Fnt:class{get vZ(){const t=[];for(const e of this.Vnt){const i=this.Wnt.get(e);if(i){const e=i.map((t=>t.Unt));t.push(...e)}}return this.Gnt&&t.push(this.Gnt),t}gZ(t){for(const e of this.vZ)e.d7(t)}DH(t){const e=Ti(this.Wnt.get(t),(t=>t.Hnt));if(e)return e.Hnt=!1,e.Unt}Znt(t){if(!this.Gnt){var e;const t=null==(e=this.Wnt.get(Io.lE))?void 0:e[0].Unt.XG;if(!t)throw new g("Error creating iOS Safari MediaController");this.Gnt=new ZO(t,this.Rw,this.Xu,this._Z),t.parentElement&&this.Gnt.d7(t.parentElement)}return this.Gnt}async vH(t){const e=t.XG,i=e.tagName.toLowerCase();await t.tr(),YO(e);const s=Ti(this.Wnt.get(i)||[],(e=>t===e.Unt));s&&(s.Hnt=!0)}cZ(){for(const t of this.vZ)t.l7()}gn(){for(const t of this.vZ){const e=t.XG;t.Ww(),qO(e),ft(e)}this.Wnt.clear(),this.Gnt=void 0}Xnt(){for(const t of this.Vnt){const e=[];this.Wnt.set(t,e);for(let i=0;i<this.znt;i++){const i=zO(t),s=t===Io.cE?new dB(i,this.Rw,this.Xu):new OO(i,this.Rw,this.Xu,this._Z);e.push({Unt:s,Hnt:!0})}}}constructor(t,e,i=2,s=XO,n=db()){this.znt=i,this.Vnt=[...s],this.Rw=n,this.Xu=t,this._Z=e,this.Wnt=_u(),this.Xnt()}},qnt:class t{bnt(t){return this.Ynt.Wo((()=>this.Knt(t)))}yI(){this.lZ.cZ()}async Knt(e){const i=this.lZ.DH(Io.lE),s=i.XG,n=await t.jnt(s,e);return await this.lZ.vH(i),n}static async jnt(e,i){return Z.Cm||Z.Em?"all":(e.src||(e.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.Qnt(),!i&&await t.Jnt(e,!1)?"all":await t.Jnt(e,!0)?"muted":"none")}static async Jnt(t,e){t.muted=e;const i=t.play();try{if(!bt(i))return!Z.Qs;const t=on(250);return await Promise.race([i,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static Qnt(){return new Promise((t=>{if("function"==typeof MessageChannel){const e=new MessageChannel;e.port1.onmessage=()=>t(),e.port2.postMessage("")}else u(t,0)}))}gn(){this.Ynt.gn()}constructor(t){this.lZ=t,this.Ynt=new Eu}},$nt:jF};r();(function(t){EI=t.Fnt,xI=t.qnt,_o=t.$nt})(Z.Dm&&Z.Mm?la({},QF,{qnt:class{bnt(t){return Promise.resolve("all")}yI(){}gn(){}}}):QF),r(),r(),r(),r();var JF=class{async NH(t){return BT(t.type)}async MH(t){return!!await cT(t,!0)}},$F=class extends JF{async NH(t){return!!Lf(t.useManagedMediaSource)&&super.NH(t)}};function tV(t){return Zi(t)}function eV(t,e){const i=Zi(t);return e?""+i+e:""+i}r(),r();var iV=class{async trt(t){return(await this.irt.ert(t.map(tV))).shift()}nrt(t,e){const i=eV(t,e);return this.rrt.Ib(i)}async ort(t,e){var i;const s=eV(t,e);return null==(i=await this.hrt.Cb(s))?void 0:i.data}TQ(t){return this.art.Cb(t)}constructor(t,e,i,s){this.irt=t,this.rrt=e,this.hrt=i,this.art=s}};r(),r(),r();var Re=class{urt(t){return Promise.resolve(!1)}crt(t){return Promise.reject(sV)}lrt(t){return Promise.reject(sV)}Ib(t){return Promise.resolve(!1)}Cb(t){return Promise.resolve(void 0)}drt(t,e){return Promise.resolve(void 0)}ert(t){return Promise.resolve([])}frt(){return Promise.resolve([])}_rt(t){return Promise.resolve([])}vrt(t,e){return Promise.resolve([])}jS(t){return Promise.reject(sV)}mrt(t){return Promise.reject(sV)}grt(){return Promise.reject(sV)}},sV="Storage disabled",nV="Storage disabled";r(),r(),r();var rV=class{get prt(){return this.Zw.Bb}async urt(t){return(this.wrt||await this.prt).urt(t)}async crt(t,e){return(this.wrt||await this.prt).crt(t,e)}async lrt(t,e){return(this.wrt||await this.prt).lrt(t,e)}async Ib(t){return(this.wrt||await this.prt).Ib(t)}async Cb(t){return(this.wrt||await this.prt).Cb(t)}async drt(t,e){return(this.wrt||await this.prt).drt(t,e)}async ert(t){return(this.wrt||await this.prt).ert(t)}async frt(){return(this.wrt||await this.prt).frt()}async _rt(t){return(this.wrt||await this.prt)._rt(t)}async vrt(t,e){return(this.wrt||await this.prt).vrt(t,e)}async jS(t){return(this.wrt||await this.prt).jS(t)}async mrt(t){return(this.wrt||await this.prt).mrt(t)}async grt(){return(this.wrt||await this.prt).grt()}constructor(t){this.Zw=new as,this.wrt=void 0,this.Zw.zw(t),this.Zw.Bb.then((t=>{this.wrt=t}))}},oV=class{get yrt(){return this.Zw.Bb}async brt(t){const e=this.Art||await this.yrt;return await e.brt(t)}constructor(t){this.Zw=new as,this.Art=void 0,this.Zw.zw(t);const e=this.Zw.Bb;e.then((t=>{this.Art=t})),this.Srt=new rV(e.then((t=>t.Srt))),this.Trt=new rV(e.then((t=>t.Trt))),this.krt=new rV(e.then((t=>t.krt))),this.Ert=new rV(e.then((t=>t.Ert))),this.xrt=new rV(e.then((t=>t.xrt)))}};function hV(t){return new g("This storage cannot handle persistency type "+t)}r(),r(),r();var Su=function(t){return t.Rrt="readonly",t.Irt="readwrite",t}({}),aV=class{urt(t){return Promise.resolve("temporary"===t)}crt(t,e){return void 0===e&&(e="temporary"),"temporary"!==e?Promise.reject(hV(e)):(this.Crt(t.key),this.fA.push(t),Promise.resolve())}lrt(t,e){if(void 0===e&&(e="temporary"),"temporary"!==e)return Promise.reject(hV(e));for(const e of t)this.Crt(e.key);for(const e of t)this.fA.push(e);return Promise.resolve()}Ib(t){return Promise.resolve(Boolean(this.Prt(t)))}Cb(t){return Promise.resolve(this.Prt(t))}drt(t,e){return Promise.resolve(this.Drt(t,e))}ert(t){const e=t?t.map((t=>this.Prt(t))):this.fA;return Promise.resolve(e.filter(ne))}frt(){return Promise.resolve([...this.fA])}_rt(t){return this.vrt(t,"key")}vrt(t,e){const i=this.fA.filter((i=>i[e]===t));return Promise.resolve(i)}jS(t){return this.Crt(t),Promise.resolve()}mrt(t){for(const e of t)this.Crt(e);return Promise.resolve()}grt(){return Pn(this.fA),Promise.resolve()}Prt(t){return this.Drt(t,"key")}Drt(t,e){for(const i of this.fA)if(i[e]===t)return i}Crt(t){const e=this.Prt(t);e&&we(this.fA,e)}constructor(){this.fA=[]}},uV=class t{static uit(){return Promise.resolve(new t)}brt(t){return t(this)}constructor(){this.Trt=new aV,this.Srt=new aV,this.krt=new aV,this.Ert=new aV,this.xrt=new aV}};r(),r();var cV=class{async urt(t){for(let e of this.Nrt)if(await e.urt(t))return!0;return!1}async crt(t,e){void 0===e&&(e="persistent");for(let i of this.Nrt)if(await i.urt(e))return i.crt(t);throw hV(e)}async lrt(t,e){void 0===e&&(e="persistent");for(let i of this.Nrt)if(await i.urt(e))return i.lrt(t);throw hV(e)}async Ib(t){for(let e of this.Nrt)if(await e.Ib(t))return!0;return!1}async Cb(t){for(let e of this.Nrt){const i=await e.Cb(t);if(i)return i}}async drt(t,e){for(let i of this.Nrt){const s=await i.drt(t,e);if(s)return s}}async ert(t){const e=[];for(let i of this.Nrt)e.push(...await i.ert(t));return e}async frt(){const t=[];for(let e of this.Nrt)t.push(...await e.frt());return t}async _rt(t){const e=[];for(let i of this.Nrt)e.push(...await i._rt(t));return e}async vrt(t,e){const i=[];for(let s of this.Nrt)i.push(...await s.vrt(t,e));return i}async jS(t){for(let e of this.Nrt)await e.jS(t)}async mrt(t){for(let e of this.Nrt)await e.mrt(t)}async grt(){for(let t of this.Nrt)await t.grt()}constructor(t){this.Nrt=t}};function lV(t){return async()=>{const e=await Promise.all(t.map((t=>t())));return dV.uit(e)}}var dV=class t{static uit(e){return Promise.resolve(new t(e))}get Ert(){return this.Mrt}get xrt(){return this.Lrt}get krt(){return this.Brt}get Trt(){return this.Ort}get Srt(){return this.Frt}brt(e){if(0===this.Vrt.length)return e(this);const i=[];let s=0;const n=r=>(i.push(r),s++,s<this.Vrt.length?this.Vrt[s].brt(n):e(new t(i)));return this.Vrt[s].brt(n)}constructor(t){this.Vrt=t,this.Mrt=new cV(t.map((t=>t.Ert))),this.Lrt=new cV(t.map((t=>t.xrt))),this.Brt=new cV(t.map((t=>t.krt))),this.Ort=new cV(t.map((t=>t.Trt))),this.Frt=new cV(t.map((t=>t.Srt)))}},Qa=class t{static ja(e){t.bG.ja(e)}static get Lg(){return t.Wrt||(t.Wrt=t.bG.uit()),t.Wrt}};function We(t){return void 0!==t.hI}function fV(t){const e=Z.Cm||Z.Em,i=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),s=e&&!i,n=new Mf(!0);return async t=>{const e=t.Ik;if(!n.mp(e)&&!function(t,e){return!!t&&(Wh(t)?mx(e)||px(e):Dh(t,Ry.APPLICATION_TTML_XML)||Dh(t,Ry.TEXT_VTT)||Dh(t,Ry.IMAGE_JPEG))}(t.Xq,t.Urt))return!1;const i=t.Urt.some((t=>"ac-3"===t||"ec-3"===t));if(s&&i)return!1;if(t.wG){const i=t.wG,s=Ke(i,(t=>bm(t.J6))).filter(ne),n=await async function(t,e){for(const i of t)if(await e(i))return!0;return!1}(s,(t=>As.Xp(t,e)));if(!n)return!1}return!0}}Qa.bG=new class{uit(){return new oV(this.Grt())}async Grt(){this.Hrt&&(await Promise.resolve(),this.Hrt=!1);for(const t of this.Zrt)try{return await lV([uV.uit,t])()}catch(t){}return await lV([uV.uit,this.Xrt])()}ja(t){if(!this.Hrt)throw new g("Registration overdue");this.Zrt.push(t)}constructor(t){this.Zrt=[],this.Hrt=!0,this.Xrt=t}}(class t{static uit(){return Promise.resolve(new t)}brt(t){return Promise.reject(nV)}constructor(){this.Trt=new Re,this.Srt=new Re,this.krt=new Re,this.Ert=new Re,this.xrt=new Re}}.uit),Qa.Wrt=void 0,r(),r(),r(),r();var _V=class{get Ti(){return this.zrt.offsetHeight*As.Ys.Xg}get ji(){return this.zrt.offsetWidth*As.Ys.Xg}constructor(t){this.zrt=t}};r();var vV=class{get nt(){return this.Ul}DI(t,e,i,s,n,r,o,h){const a=new po(t,e,i,s,n,r,o,void 0,h);return this.Ul.tt(a),this.c8.tt(a),a}lW(t){this.Ul.it(t),this.c8.it(t),t.gn()}uH(t){const e=new JL(t.Lt,t.kh,t.gs);return this.Ul.tt(e),this.c8.tt(e),e}tr(){for(const t of this.Ul.oC.slice())t.gn();this.Ul.tr(),this.c8.tr()}gn(){this.tr(),this.Ul.gn(),this.c8.gn()}constructor(t,e){this.Ul=new ha,this.c8=new PL(t,e)}};r(),r();var mV=class{DH(t){return this.bG.DH(t)}Znt(t){return this.bG.Znt(t)}vH(t){return this.bG.vH(t)}constructor(t){this.bG=t}};r(),r(),r();var gV=class extends Bo{get qrt(){return this.LB}get _R(){return this.vR()}vR(){return this.LB._R}get mR(){return this.gR()}gR(){return this.LB.mR}get yR(){return this.bR()}bR(){return this.LB.yR}get Uu(){return this.LB.Uu}get ct(){return this._d()}_d(){return this.LB.ct}get YG(){return this.Yrt()}Yrt(){return this.LB.YG}get kR(){return this.Krt()}Krt(){return this.LB.kR}get lt(){return this.LB.lt}get Ti(){return this.LB.Ti}get ji(){return this.LB.ji}get wa(){return this.pI()}pI(){return this.LB.wa}get aH(){return this._a()}_a(){return this.LB.aH}get FR(){return this.LB.FR}set FR(t){this.LB.FR=t}get ZR(){return this.jrt()}jrt(){return this.LB.ZR}get zR(){return this.LB.zR}set zR(t){this.LB.zR=t}get KR(){return this.jR()}jR(){return this.LB.KR}get tI(){return this.eI()}eI(){return this.LB.tI}get iI(){return this.sI()}sI(){return this.LB.iI}get nI(){return this.rI()}rI(){return this.LB.nI}get A4(){return this.Qrt()}Qrt(){return this.LB.A4}get M4(){return this.Jrt()}Jrt(){return this.LB.M4}get nt(){return this.oI()}oI(){return this.$rt}get Ll(){return this.V7()}V7(){return this.LB.Ll}get P9(){return this.LB.P9}get dI(){return this.LB.dI}set dI(t){this.LB.dI=t}get a7(){return this.LB.a7}get NR(){return this.LB.NR}get GB(){return this.LB.GB}get _H(){return this.tot()}set _H(t){this.eot(t)}tot(){return this.LB._H}eot(t){this.LB._H=t}get f7(){return this.LB.f7}set f7(t){this.iot(t)}iot(t){this.LB.f7=t}get K6(){return this.rot()}rot(){return this.LB.K6}OR(){return this.LB.OR()}AI(){return this.LB.AI()}bI(){this.LB.bI()}Sb(t,e,i){this.LB.Sb(t,e,i)}UG(t){this.LB.UG(t)}ge(){this.LB.ge()}be(){this.LB.be()}DI(t,e,i,s,n,r,o,h){return this.LB.DI(t,e,i,s,n,r,o,h)}uH(t){return this.LB.uH(t)}nH(){return this.LB.nH()}oH(t,e,i,s,n){return this.LB.oH(t,e,i,s,n)}lW(t){this.LB.lW(t)}cH(){this.LB.cH()}IJ(t){return this.LB.IJ(t)}async $n(t){const e=await this.LB.$n(t);let i;return i=t.pw===zr.fW?this.oot(e):this.hot(e),this.qG=i,i}async tr(){this.qG&&(await this.qG.Ww(),this.qG=void 0),await this.LB.tr()}o7(){this.LB.o7()}h7(){this.LB.h7()}async Ww(){this.Bo(),this.LB.fn(HD,this.aot),this.$rt.cC=void 0,this.$rt.gn(),this.qG&&(await this.qG.Ww(),this.qG=void 0)}l7(){this.LB.l7()}uot(t){this.LB.fn(HD,this.aot),this.LB=t,this.$rt.cC=t.nt,this.LB.yn(HD,this.aot)}II(t){this.yo(t)}constructor(t){super(),this.qG=void 0,this.$rt=new ut,this.aot=t=>this.II(t),this.LB=t,this.$rt.cC=t.nt,this.LB.yn(HD,this.aot)}},pV=class extends gV{get XG(){return this.LB.XG}get C4(){return this.LB.C4}get gI(){return this.LB.gI}set gI(t){this.LB.gI=t}d7(t){this.LB.d7(t)}xI(){this.LB.xI()}constructor(t){super(t)}};r(),r(),r();var wV=class{get md(){return this.lT()}lT(){return this.qG.md}get iI(){return this.sI()}sI(){return this.qG.iI}hJ(t){return this.qG.hJ(t)}uJ(t){return this.qG.uJ(t)}Ww(){return Promise.resolve()}constructor(t){this.qG=t}},yV=class extends wV{get K3(){return this.Q3}get j3(){return this.J3}get _R(){return this.vR()}vR(){return this.qG._R}get ct(){return this._d()}_d(){return this.qG.ct}get SJ(){return this.cot()}cot(){return this.qG.SJ}e4(t){this.qG.e4(t)}r4(t,e,i,s){this.qG.r4(t,e,i,s)}i3(){this.qG.i3()}z2(){this.qG.z2()}Ww(){return this.Q3&&(this.Q3.Ww(),this.Q3=void 0),this.J3&&(this.J3.Ww(),this.J3=void 0),super.Ww()}lot(t){this.qG=t,this.Q3?t.K3?this.Q3.dot(t.K3):(this.Q3.Ww(),this.Q3=void 0):t.K3&&(this.Q3=this.fot(t.K3),this.Q3.yn(Oo,this._ot)),this.J3?t.j3?this.J3.dot(t.j3):(this.J3.Ww(),this.J3=void 0):t.j3&&(this.J3=this.fot(t.j3),this.J3.yn(Oo,this._ot))}lJ(t){this.qG.lJ(t)}vot(t){}constructor(t){super(t),this.Q3=void 0,this.J3=void 0,this._ot=t=>this.vot(t)}};r(),r(),r();var bV=class extends Bo{get yj(){return this.Ij}set yj(t){this.Ij=t}get _R(){return ee.fB()}get md(){return this.IT}get n3(){return Io.Qk}get o3(){return ee.fB()}get mot(){return!1}get mj(){return this.Ej}set mj(t){this.Ej=t}l2(t,e,i){return Promise.reject(new g("Invalid media buffer"))}d3(){return Promise.reject(new g("Invalid media buffer"))}_2(t,e,i){return Promise.reject(new g("Invalid media buffer"))}SJ(){return!1}i3(){}u3(t,e){}l3(t,e){}jS(t,e,i){return Promise.resolve()}N2(t,e){return Promise.reject(new g("Invalid media buffer"))}xO(t,e){return Promise.reject(new g("Invalid media buffer"))}hJ(t){return!1}uJ(t){return Promise.reject(new g("Invalid media buffer"))}Ww(){this.Bo()}constructor(t){super(),this.Ej=0,this.Ij=0,this.IT=t}},AV=class extends Bo{get yj(){return this.got()}set yj(t){this.pot(t)}got(){return this.wot.yj}pot(t){this.wot.yj=t}get _R(){return this.vR()}vR(){return this.wot._R}get md(){return this.lT()}lT(){return this.wot.md}get n3(){return this.wot.n3}get o3(){return this.yot()}yot(){return this.wot.o3}get mj(){return this.bot()}set mj(t){this.Aot(t)}bot(){return this.wot.mj}Aot(t){this.wot.mj=t}l2(t,e,i){return this.wot.l2(t,e,i)}d3(){return this.wot.d3()}_2(t,e,i){return this.wot._2(t,e,i)}SJ(){return this.wot.SJ()}i3(){this.wot.i3()}u3(t,e){this.wot.u3(t,e)}l3(t,e){this.wot.l3(t,e)}jS(t,e,i){return this.wot.jS(t,e,i)}N2(t,e){return this.wot.N2(t,e)}hJ(t){return this.wot.hJ(t)}uJ(t){return this.wot.uJ(t)}II(t){this.yo(t)}Ww(){this.Bo(),this.dot(new bV(this.md))}dot(t){this.wot.fn(Oo,this.Sot),this.wot=t,this.wot.yn(Oo,this.Sot)}constructor(t){super(),this.Sot=t=>this.II(t),this.wot=t,this.wot.yn(Oo,this.Sot)}},SV=class extends AV{get Unt(){return this.LB}set Unt(t){this.LB=t}async l2(t,e,i){return ot(i),await this.Tot(this.LB.yR,null==e?void 0:e.hit,null==e?void 0:e.ct),ot(i),t.pw===Ut.pk?await this.kot(t,e,i):await this.Eot(t,e,i)}async kot(t,e,i){let s=t;for(;;){const[t,n]=xb(s.Zk);s={pw:Ut.pk,Zk:t};try{return await this.xot(s,e,i),void n.cancel(new $).catch(Bt)}catch(t){if(uD(t)){if(await this.Tot(this.LB.yR,e.hit,e.ct,i)){s={pw:Ut.pk,Zk:n};continue}}throw n.cancel(t).catch(Bt),t}}}async Eot(t,e,i){for(;;)try{return ot(i),await this.xot(t,e,i)}catch(t){if(uD(t)){if(await this.Tot(this.LB.yR,e.hit,e.ct,i))continue}throw t}}async Tot(t,e,i,s){const n=aD(t,e,i,this._R,this.mj,this.yj);for(const[t,e]of n)await this.Rot(t,e,s);return n.length>0}xot(t,e,i){return super.l2(t,e,i)}Rot(t,e,i){return super.jS(t,e,i)}constructor(t){super(t),this.LB=void 0}},TV=class extends yV{get Unt(){return this.LB}set Unt(t){this.LB=t,this.Q3&&(this.Q3.Unt=t),this.J3&&(this.J3.Unt=t)}fot(t){const e=new SV(t);return e.Unt=this.LB,e}constructor(t){super(t),this.LB=void 0,this.lot(t)}};r();var Qn=class extends wV{get QR(){return this.qG.QR}set QR(t){this.qG.QR=t}};r();var Xa=class extends gV{get XG(){return this.LB.XG}get C4(){return this.LB.C4}get cI(){return this.LB.cI}get hI(){return this.LB.hI}get gI(){return this.LB.gI}set gI(t){this.LB.gI=t}d7(t){this.LB.d7(t)}xI(){this.LB.xI()}wI(){return this.LB.wI()}constructor(t){super(t)}},kV=class extends pV{get qrt(){return this.LB}hot(t){const e=new TV(t);return e.Unt=this,e}oot(t){return new Qn(t)}},EV=class extends Xa{get qrt(){return this.LB}hot(t){const e=new TV(t);return e.Unt=this,e}oot(t){return new Qn(t)}},ct=class extends mV{DH(t){return t===Io.lE?new EV(super.DH(t)):t===Io.cE?new kV(super.DH(t)):void 0}async vH(t){const e=t;await e.Ww(),await super.vH(e.qrt)}};r();var xV=class{Iot(){this.ta.RI()}gn(){s.removeEventListener("pageshow",this.Cot)}constructor(t){this.Cot=t=>{t.persisted&&this.Iot()},this.ta=t,s.addEventListener("pageshow",this.Cot)}};r(),r(),r(),r(),r();var RV=class{Pot(t,e,i){return Promise.resolve()}Dot(t,e,i,s){let n=[];if(s){const r={RV:e.LO,CV:e.BO,PV:i.Not.PV};s.pw===Vr.TTML?n=QE(t,s,r,i.Xq):s.pw===Vr.WEBVTT&&(n=fE(t,r,this.Mot).L)}return n}tr(){}constructor(t){this.Mot=t}};r(),r(),r();var il=function(t){return t.QP="vttc",t.Lot="vsid",t.Bot="iden",t.Oot="ctim",t.Fot="sttg",t.Vot="payl",t.Wot="vtte",t.Uot="vtta",t}({}),Ge=class t{static Got(e){return Boolean(t.Hot[e])}static qD(e){const i=[],s=St.DD(new US(e,new Ui));for(const e of s)t.Got(e.pw)&&i.push(t.Hot[e.pw](e.Zk));return i}static Zot(e){const i=St.DD(e),s=wi(i,il.Lot),n=wi(i,il.Bot),r=wi(i,il.Oot),o=wi(i,il.Fot),h=wi(i,il.Vot);return{pw:il.QP,Xot:s?t.zot(s):void 0,qot:n?t.Yot(n):void 0,Kot:r?t.jot(r):void 0,Qot:o?t.Jot(o):void 0,$ot:h?t.tht(h):void 0}}static zot(t){return{pw:il.Lot,eht:t.bD()}}static Yot(t){return{pw:il.Bot,qot:t.xD()}}static jot(t){return{pw:il.Oot,iht:t.xD()}}static Jot(t){return{pw:il.Fot,sht:t.xD()}}static tht(t){return{pw:il.Vot,nht:t.xD()}}static rht(t){return{pw:il.Wot}}static oht(t){return{pw:il.Uot,hht:t.xD()}}};Ge.Hot={[il.QP]:Ge.Zot,[il.Wot]:Ge.rht,[il.Uot]:Ge.oht};var IV=class{Pot(t,e,i){const s=new DataView(t.aht),n=jo.qD(s),r=Ti(n,(t=>t.pw===Mt.dP));return r&&(this.uht=r.Z[0].gN.WD.lN),Promise.resolve()}Dot(t,e,i){if(S(this.uht))return[];const s=na(t),n=jo.qD(s),r=dn(n,Mt.eD),o=dn(n,Mt.aD);if(!r||0===r.Z.length||!o)return[];const h=function(t,e,i){const s=t.Z[0],n=s.sL?s.sL.sL.toNumber()/i:e.LO,r=[];for(const t of s.iL)r.push(...t.uL);return{cht:n,uL:r}}(r,e,this.uht),a=i.Not.PV;return function(t,e,i,s){const n=Ge.qD(na(e.Zk)),r=t.uL,o=t.cht+s,h=[];let a=0;for(let t=0;t<r.length;t++){const e=r[t],s=n[t];var u;const c=(null!=(u=e.ct)?u:0)/i;let l;s.pw===il.QP&&(l=CV(s,a,c,o)),l&&h.push(l),a+=c}return h}(h,o,this.uht,a)}tr(){this.uht=NaN}constructor(){this.uht=NaN}};function CV(t,e,i,s){if(!t.$ot)return void 0;const n=t.Kot?function(t){return TE(t.iht,new Ui(0))}(t.Kot):e,r=s+n,o=r+i,h=t.$ot.nht;return new Vi(r,o,h,!1)}r(),r();var tc=function(t){return t[t.CZ=0]="CZ",t[t.dht=1]="dht",t[t.fht=10]="fht",t[t._ht=11]="_ht",t[t.vht=12]="vht",t[t.mht=13]="mht",t[t.ght=14]="ght",t[t.pht=15]="pht",t[t.wht=20]="wht",t[t.yht=21]="yht",t[t.bht=22]="bht",t[t.Aht=23]="Aht",t[t.Sht=24]="Sht",t[t.Tht=30]="Tht",t[t.kht=31]="kht",t[t.Eht=32]="Eht",t[t.xht=33]="xht",t[t.Rht=34]="Rht",t[t.Iht=35]="Iht",t[t.Cht=40]="Cht",t[t.Pht=41]="Pht",t[t.Dht=42]="Dht",t[t.Nht=43]="Nht",t[t.Mht=44]="Mht",t[t.Lht=50]="Lht",t[t.Bht=51]="Bht",t[t.Oht=52]="Oht",t[t.Fht=60]="Fht",t[t.Vht=61]="Vht",t[t.Wht=62]="Wht",t[t.Uht=63]="Uht",t[t.Ght=70]="Ght",t[t.Hht=71]="Hht",t[t.Zht=72]="Zht",t[t.Xht=73]="Xht",t[t.zht=74]="zht",t[t.qht=75]="qht",t[t.Yht=76]="Yht",t[t.Kht=77]="Kht",t[t.jht=90]="jht",t[t.Qht=91]="Qht",t}({});function PV(t,e){const i=e.nB(((e,i)=>t.eB(e,i,!1,!1)));return t.KL(i)}function DV(t,e){const i=e.Sn(t.XL()).nB(((e,i)=>t.gr(i)));return t.KL(i)}r(),r(),r(),r();var ge=function(t){return t.Jht="$ht",t.eat="iat",t}({});r();var Uu=class extends pt{constructor(t,e,i){super("sat"),this.Cn=t,this.jn=e,this.nat=i}},NV=class extends pe{constructor(){super("rat")}},MV=[Mi.Ky,Mi.Qy,Mi.Yy,Mi.vy],LV=class extends Bo{get oat(){var t,e;return(null==(t=this.uat.aat)?void 0:t.nat)||(null==(e=this.uat.dat)?void 0:e.nat)}get fat(){return this._at}set vat(t){this.uat.vat=t}get vat(){return this.uat.vat}get Hk(){return this.mat}gat(t){this.mat!==t&&(this.mat=t,this.yo(new NV))}get pat(){return this._at.Ht.pat}get lt(){return this.HG}async Cn(t){if(!this.wat&&!this.yat)return;const e=this.uy("rat");this.wat?(this.bat.Xw(),this.bat=new $t,go(this.Aat(this.bat.Bw),this.bat)):(this.Sat.Mb(void 0),this.Sat=new as),await e}get wat(){return"Tat"===this.mat}get yat(){return"Eat"===this.mat}get xat(){return"Rat"===this.mat}get Iat(){return"Cat"===this.mat}async SI(t){if(this.xat||this.yat)for(0,this.bat.Xw();!this.wat&&!this.Iat;)await this.uy("rat")}async tr(t){this.Iat?(this.HG=void 0,this.gat("Tat")):await this.SI(t),this.uat.tr(),this._at.tr()}PH(t){this.HG=t,this.gat("Cat"),this.yo(new Wa(t))}Pat(){this.d9.yn(Mi.$y,this.ld),this.d9.yn([Mi.qy,Mi.Dy],this.We),this.uat.yn(MV,this.Ds),this.Dat.yn(ge.Jht,this.ld)}Nat(){this.d9.fn(Mi.$y,this.ld),this.d9.fn([Mi.qy,Mi.Dy],this.We),this.uat.fn(MV,this.Ds),this.Dat.fn(ge.Jht,this.ld)}async Mat(t){this.Nat(),this.Lat.Xw(),await this.SI(null!=t?t:tc.Nht),this.uat.tr()}async Bat(t){this.Pat(),await this.Cn(null!=t?t:tc.pht)}Oat(t,e,i){if(this.wat)for(const s of t._at.Fat())s.Vat<=i&&e<=s.Wat&&this.Dat.Uat.some((t=>t.o===s.Gat))&&this._at.Hat(s)}async gn(){this.Bo(),this.Nat(),this.Lat.Xw(),await this.SI(tc.Mht),this.uat.gn()}async Aat(t){for(;;)try{ot(t),this.gat("Rat"),await this.uat.Zat(t),ot(t),this.gat("Eat"),await hu(this.Sat.Bb,t)}catch(t){if(Se(t))this.gat("Tat");else{const e=t instanceof A?t:new A(Ja.MEDIA_LOAD_ERROR,t.message,t);this.PH(e)}break}}async Xat(t){ot(t),await this.SI(tc.Dht),this.uat.tr(),ot(t),await this.Cn(tc.mht)}constructor(t,e,i,s,n){super(),this.zat=t,this.Dat=e,this._at=i,this.uat=s,this.d9=n,this.mat="Tat",this.HG=void 0,this.Sat=new as,this.Lat=new $t,this.bat=new $t,this.We=t=>{if(this.wat||this.Iat)return;if(!As.iR&&this.uat.qat(t.currentTime))return;this.Lat.Xw(),this.Lat=new $t;go(this.Xat(this.Lat.Bw),this.Lat).catch(Pu)},this.ld=Jr((()=>{if(this.yat){try{this.uat.Yat();if(this.uat.Kat())return}catch(t){if(!(t instanceof Uu))throw t}this.Cn(tc.ght)}}),250),this.Pat()}};r(),r();var BV=class t{jat(t,e){return this.Qat(t,!1,e)}Jat(t,e){return this.Qat(t,!0,e)}async Qat(e,i,s){ot(s.Bw);const n=await this.$at(e,i,s);return n.Mk?t.tut(n):this.eut(n)}eut(t){return t}static tut(t){return t}$at(t,e,i){var s;const n=new Fe({qu:t.qu,Xk:$r.vk,qk:t.iut?{Range:"bytes="+t.iut[0]+"-"+(null!=(s=t.iut[1])?s:"")}:void 0,AE:t.AE,gE:So.GET,pw:Wr.$k,yE:e?De.iE:De.Qk,bE:this.sut,pE:i.nut,wE:i.wE,Bw:i.Bw,kE:i.kE});return this.aW.zk(n)}constructor(t,e){this.aW=t,this.sut=e}};r(),r();var OV=class{rut(t,e){const i=this.out**t,s=e*(1-i)+i*this.tit;S(s)||(this.tit=s,this.hut+=t)}aut(){const t=1-this.out**this.hut;return this.tit/t}constructor(t){this.tit=0,this.hut=0,this.out=_.exp(_.log(.5)/t)}},FV=class{rut(t,e){const i=8e3*e/t,s=t/1e3;this.uut+=e,this.cut.rut(s,i),this.lut.rut(s,i)}aut(){return this.fut()?_.min(this.cut.aut(),this.lut.aut()):this._ut}fut(){return this.uut>=this.vut}constructor(t=2,e=5,i=128e3){this.uut=0,this._ut=lI,this.cut=new OV(t),this.lut=new OV(e),this.vut=i}},VV=class{get mut(){return this.gut.aut()}get fut(){return this.gut.fut()}wut(t){const e=t.yut,i=this.but?t.Aut-t.Sut:t.Aut-t.Tut,s=t.kut;!s&&e<this.Eut||(s?this.gut.rut(2*i,e):this.gut.rut(i,e))}constructor(t,e){this.but=e,e&&vT(t)?t===Io.lE?(this.Eut=5e3,this.gut=new FV(.05,1,0)):(this.Eut=0,this.gut=new FV(.005,.1,0)):(this.Eut=16e3,this.gut=new FV)}};r(),r(),r();var WV=class{transform(t,e){this.Yd.write(t).catch(Bt),e.enqueue(t)}flush(){this.Yd.close().catch(Bt)}constructor(t){this.Yd=t}},Oe=class{xut(){return new UV(kb(this.aht),this.Rut,this.Iut)}constructor(t,e,i){this.aht=t,this.Rut=e,this.Iut=i}},UV=class t{get Rk(){return this.Cut}xk(t){return He(this.Cut,t)}Tb(){const[e,i]=xb(this.Cut);return this.Cut=e,new t(i,this.Rut,this.Iut)}Put(){const[e,i]=function(t){const e=new Ho,i=e.writable.getWriter(),s=new Ho(new WV(i));return t.pipeTo(s.writable).catch((t=>{i.abort(t).catch(Bt)})),[s.readable,e.readable]}(this.Cut);return this.Cut=e,new t(i,this.Rut,this.Iut)}Dut(t){return this.xk(t).then((t=>new Oe(t,this.Rut,this.Iut)))}constructor(t,e,i){this.Cut=t,this.Rut=e,this.Iut=i}};r();var GV=class extends pt{constructor(t,e,i){super(e,i),this.Nut=t}},HV="Cache lookup failed.",ZV=class extends Bo{async Mut(t,e){ot(e);const i=await this.Lut.ort(t.qu.qu,t.qu.iut);if(ot(e),!i)throw new GV(t,HV);const s=new Oe(i.buffer,i.byteLength,i.reference);return{Nut:t.Nut,But:{pw:Ut.QQ,Zk:s},nat:t.nat,qu:t.qu}}async Out(t,e){ot(e);const i=await this.Lut.ort(t.qu,t.iut);if(ot(e),!i)throw new GV(t,HV);const s=new Oe(i.buffer,i.byteLength,i.reference);return{pw:Ut.QQ,Zk:s}}gn(){this.Bo()}constructor(t){super(),this.Lut=t}};r();var XV=["jy","Jy"],zV=class extends Bo{async Mut(t,e){let i;for(const s of this.Fut)try{return await s.Mut(t,e)}catch(t){Zr(t),i=t}throw i}async Out(t,e){let i;for(const s of this.Fut)try{return await s.Out(t,e)}catch(t){Zr(t),i=t}throw i}gn(){for(const t of this.Fut)t.fn(XV,this.Ds),t.gn()}constructor(t){super(),this.Fut=t;for(const t of this.Fut)t.yn(XV,this.Ds)}};function zn(t){return Ad(t.Vut)}function qV(t){return zn(t)?t.Vut:t.Wut}r(),r(),r(),r();var YV=class extends pe{constructor(t,e,i,s,n,r){super(t),this.Uut=e,this.gz=i,this.JM=s,this.bN=n,this.bE=r}},KV=class extends YV{constructor(t,e,i,s,n){super(Mi.Ky,t,e,i,s,n)}};r(),r();var jV=class{constructor(t,e){this.Gut=t,this.Hut=e}},QV=class extends jV{get yut(){return this.Zut}start(){}transform(t,e){this.Zut+=t.byteLength,e.enqueue(t)}flush(){this.Xut(!1)}Xw(){this.Xut(!0)}Xut(t){this.Gut(this.Hut,As.Bg(),this.yut,t)}constructor(...t){super(...t),this.Zut=0}},JV=class extends jV{get yut(){return this.Zut}start(){this.Hut=As.Bg()}transform(t,e){this.Zut+=t.byteLength,this.zut||this.qut(t)&&this.Xut(!1),e.enqueue(t)}flush(){}Xw(){this.Xut(!0)}qut(t){const e=this.Yut(t),i=this.Kut(e);return Boolean(Ti(i,$V))}Yut(t){return this.jut&&void 0!==this.Qut?(this.jut=ju([this.jut,t]),new US(na(this.jut),new Ui(this.Qut))):(this.jut=t,new US(na(t),new Ui))}Kut(t){const e=St.ND(t.Zk,t.gD,!0);return e.MD?(this.jut=void 0,this.Qut=void 0):this.Qut=t.gD.tc,e.m}Xut(t){this.zut||(this.Gut(this.Hut,As.Bg(),this.yut,t),this.zut=!0)}constructor(...t){super(...t),this.Zut=0,this.zut=!1}};function $V(t){return t.pw===Mt.aD}var tW=class{Jut(t){const e=t.Kk?this.$ut:As.Bg(),i=this.tct(e),s=new Ho(i),n=t.Rk().pipeTo(s.writable).then((()=>({LR:{yut:i.yut}})),(t=>{throw i.Xw(),t}));return this.ect.zw(n),s.readable}ict(t){const e=t.Kk?this.$ut:As.Bg(),i=t.xk(),s=i.then((t=>{const i=As.Bg();return this.wut(e,i,t.byteLength,!1),{LR:{yut:t.byteLength}}}),(t=>{const i=As.Bg();throw this.wut(e,i,0,!0),t}));return this.ect.zw(s),i}get sct(){return this.ect.Bb}constructor(t){this.nct=t,this.ect=new as,this.wut=(t,e,i,s)=>{const n={Tut:this.$ut,Sut:t,Aut:e,yut:i,kut:s};this.nct.wut(n),this.nct.fut&&kl.Lg.iG(this.nct.mut)},this.ect.Bb.catch(Bt),this.$ut=As.Bg()}},eW=class extends tW{tct(t){return new QV(this.wut,t)}},iW=class extends tW{tct(t){return new JV(this.wut,t)}};r();var sW=class extends YV{constructor(t,e,i,s,n,r,o){super(Mi.Qy,t,e,i,s,n),this.rct=r,this.fO=o}};r();var an=class extends pt{constructor(t,e,i){super("Error downloading segment "+qV(e),t),this.hct=e.LO,this.act=e.BO,this.uct=i}},nW=class extends Bo{cct(){return this.but?new iW(this.nct):new eW(this.nct)}async Mut(t,e){ot(e);const i=t.nat,s=t.qu,n=t.Nut,r=qV(n),o=i.nat?i.nat.TC:-1,h=function(t){const e=t.nat;let i;i=e===function(t){return t.Uat.reduce(((t,e)=>t.mG<e.mG?t:e))}(e.lct)?Na(5*t.Nut.ct):Na(1.2*t.Nut.ct);return Zs(i,1e3,18e3)}(t);this.yo(new KV(s,i.mG,r,o,i.pw));try{const t=this.cct(),a=await this.dct.jat(s,{kE:this.but,nut:h,Bw:e}),u=await this.fct(a,a.Mk,e,t);return oh(this._ct(t.sct,i,s,r,o,a)),{But:u,nat:i,Nut:n,qu:s}}catch(t){throw Zr(t),new an(t,n,i)}}async Out(t,e){ot(e);const i=await this.dct.Jat(t,{kE:false,nut:1e4,Bw:e});return await this.fct(i,false,e)}async fct(t,e,i,s){if(e){const e=s?s.Jut(t):t.Rk();return{pw:Ut.pk,Zk:new UV(e)}}{const e=s?await s.ict(t):await t.xk(i);return{pw:Ut.QQ,Zk:new Oe(e)}}}async _ct(t,e,i,s,n,r){try{const o=await t;this.yo(new sW(i,e.mG,s,n,e.pw,r.Hk,o.LR.yut))}catch(t){}}gn(){this.Bo()}constructor(t,e,i){super(),this.dct=t,this.nct=e,this.but=i}};r();var rW=.001,oW=class{get _R(){return this.vct._R}get mct(){return this.vct.mct}get NJ(){return this.vct.NJ}get gct(){if(this.E3.tI<gs.Xn)return!1;if(this.vct.jn<=this.pct&&this.vct.wct())return!0;const t=this.vct.WG;if(!t||0===t.V)return!1;const e=ee.dB(this.d9.yR,1/0);return t.Sn(e).QL(this.vct.NJ).cB>=this.dZ.xj}get pct(){const t=this.vct.WG;let e;if(t&&t.V>0)e=t.jn(0);else{e=this.d9.yR;const t=this.vct.NJ,i=t.JL(e);i>=0&&(e=t.jn(i))}const i=this.vct.iI.Cn(0);if(i>e){if(this.vct.Cn<=e&&this.vct.jn>=e&&i>e+rW)throw new Uu(e,i);e=i}return e=this.vct.yct.ZL(e),e}constructor(t,e,i,s){this.vct=t,this.d9=e,this.E3=i,this.dZ=s}};r();var hW=class{get bct(){if(0===this.x_.size)return this.Act;let t=ee.dB(0,1/0);return t=t.Sn(this.Act),this.x_.forEach((e=>{t=t.Sn(e)})),t}Sct(t){return this.x_.get(t.o)}Tct(){let t=this.Act;return this.x_.forEach((e=>{t=t.KL(e)})),t}kct(t){if(this.Act.gr(t))return!0;let e=!1;return this.x_.forEach((i=>{e=e||i.gr(t)})),e}Ect(t,e){const i=this.x_.get(e.o);return!!i&&i.gr(t)}$L(t,e){if(this.Act.$L(t,e))return!0;let i=!1;return this.x_.forEach((s=>{i=i||s.$L(t,e)})),i}xct(t,e){const i=this.x_.get(e),s=i?i.KL(t):t;this.x_.set(e,s),this.Act=this.Act.KL(t)}Rct(t){this.x_.forEach(((e,i)=>{this.x_.set(i,e.KL(t))})),this.Act=this.Act.KL(t)}Ict(t){this.x_.forEach(((e,i)=>{this.x_.set(i,e.Sn(t))})),this.Act=this.Act.Sn(t)}tr(){this.x_.forEach(((t,e)=>{this.x_.set(e,ee.fB())})),this.Act=ee.fB()}constructor(){this.x_=_u(),this.Act=ee.fB()}},aW=class{get Cct(){return this.Pct}get NJ(){return this.MJ}Dct(t){for(const e of this.Srt){if(e.Vat>t)break;if(e.Wat>t)return e}}Nct(t){for(const e of this.Srt){if(e.Mct>t)break;if(e.Lct>=t)return e}}Bct(t,e){const i=[];for(const s of this.Srt){if(s.Vat>t)break;s.Wat>=e&&i.push(s)}return i}Fat(){return this.Srt}Hat(t){const e=ee.dB(t.Mct,t.Lct),i=e.XL();this.Pct.Ict(i),this.Pct.xct(e,t.Gat),this.Oct(i);const s=Lr(this.Srt,(e=>t.Vat<=e.Vat));if(s<0)this.Srt.push(t);else{this.Srt[s].Wat<=t.Wat?this.Srt.splice(s,1,t):this.Srt.splice(s,0,t)}}LJ(t,e){this.MJ.xct(t,e)}Fct(t){this.MJ.Rct(t)}Ict(t){this.Pct.Ict(t),this.MJ.Ict(t);const e=this.Pct.Tct();this.Oct(e)}Oct(t){this.Srt=this.Srt.filter((e=>t.eB(e.Mct,e.Lct))).map((e=>e.Vct&&!t.$L(e.Mct,e.Lct)?function(t,e){return{Gat:t.Gat,Vat:t.Vat,Wat:t.Wat,Mct:t.Mct,Lct:t.Lct,Vct:e}}(e,!1):e))}tr(){this.Pct.tr(),this.MJ.tr(),this.Srt=[]}gn(){this.tr()}constructor(t){this.Srt=[],this.Ht=t,this.Pct=new hW,this.MJ=new hW}};r(),r();var uW=class{get vat(){return this.Wct}set vat(t){this.Wct=t}get pat(){return this._at.Ht.pat}async Uct(t,e,i){let s;ot(i);const n=this._at.Nct(t);s=n&&Cs(n.Lct,t,1e-5)?n.Wat:t;const r=this.Gct(s),o=function(t){return cW.bind(void 0,t)}(s);let h=await this.Tp.Hct(o,r,e,i);for(ot(i);h&&this.Zct(h.Nut);){const t=_W(h.Nut),s=h.nat;h=await this.Tp.Hct(t,[s],e,i),ot(i)}if(!h)return void 0;if(!this.Xct(h.Nut))return h;const a=this.zct(h.Nut);if(t<a.Cn)return await this.findFirstNonAppendedSegmentBeforeSegment(h,e,i,a);if(t>=a.jn)return await this.findFirstNonAppendedSegmentAfterSegment(h,e,i);if(!h.nat.qct(h.Nut))throw new g("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,e,i){let s=t;do{const n=_W(s.Nut),r=t.nat;s=await this.Tp.Hct(n,[r],e,i),ot(i)}while(s&&this.Xct(s.Nut));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,e,i,s){let n=t;do{const s=fW(n.Nut),r=t.nat;n=await this.Tp.Hct(s,[r],e,i),ot(i)}while(n&&this.Xct(n.Nut));if(!n){0;const e=t.nat.Yct.Cn;throw new Uu(e,s.Cn,t.nat)}return n}Kct(t){return this._at.Cct.kct(t)}jct(t){return this._at.Bct(t.LO,t.BO)}Xct(t){const e=this.jct(t);return e.length>0&&function(t,e){return function(t){let e=ee.fB();for(const i of t)e=e.KL(ee.dB(i.Vat,i.Wat));return e}(t).$L(e.LO,e.BO)}(e,t)&&e.every(vW)}Zct(t){return this._at.NJ.$L(t.LO,t.BO)}zct(t){const e=this.jct(t);return{Cn:e[0].Mct,jn:e[e.length-1].Lct}}Gct(t){const e=this.Qct(t);if(0===e.length){const t=this.Wct?this.Wct:this._at.Ht.Uat;return[t[t.length-1]]}const i=e.filter((t=>{var e;return(null==(e=t.nat)?void 0:e.Hnt)&&!t.Jct}));return i.length>0?i:[e[e.length-1]]}Qct(t){return(this.Wct?this.Wct:this._at.Ht.Uat).filter((e=>!this._at.NJ.Ect(t,e)))}constructor(t,e,i){this.zat=t,this._at=e,this.Tp=i}};async function cW(t,e,i,s){const n=e.Not.$ct(t);if(n){if(e.tlt(n)){return(await e.ilt(n,i,s)).elt(t)}return n}}async function lW(t,e,i,s){if(zn(t)){if(0===t.Vut)return;const n=e.Not.slt(t);if(!n)return;return(await e.ilt(n,i,s)).nlt(t.Vut-1)}return e.Not.rlt(t)}async function dW(t,e,i,s){if(zn(t)){const n=e.Not.slt(t);if(!n)return;const r=await e.ilt(n,i,s);if(t.Vut+1===r.V)return;return r.nlt(t.Vut+1)}return e.Not.olt(t)}function fW(t){return lW.bind(void 0,t)}function _W(t){return dW.bind(void 0,t)}function vW(t){return t.Vct}r();var mW=class{async Hct(t,e,i,s){ot(s);const n=this.hlt(e,i);if(!n)return;const r=await t(n,this.ult,s);if(!r)return;const o=n.clt(r);return{nat:n,Nut:r,qu:o}}hlt(t,e){if(0===t.length)return;const i=this.dlt.llt(t,this.flt?e:void 0,this.vct,this.dZ.Sj);return this.flt||(this.flt=!0),i}constructor(t,e,i,s){this.dlt=t,this.vct=e,this.dZ=i,this.ult=s,this.flt=!1}};r();var gW=class{async Hct(t,e,i,s){ot(s);const n=this.dlt._lt(e,i,this.vct);if(!n.length)return;let r;for(const e of n)try{ot(s);const i=await t(e,this.ult,s);if(i){const t=e.clt(i);if(await this.Lut.nrt(t.qu,t.iut))return{Nut:i,nat:e,qu:t}}}catch(t){Zr(t),r=t}if(r)throw r}constructor(t,e,i,s){this.dlt=t,this.vct=e,this.Lut=i,this.ult=s}};function pW(t){return void 0!==t.zR}function wW(t,e){const i=t.ji&&e.ji,s=t.Ti&&e.Ti;if(i||s){if(i&&s)return t.ji*t.Ti-e.ji*e.Ti;if(i)return t.ji-e.ji;if(s)return t.Ti-e.Ti;return(t.ji||1)*(t.Ti||1)-(e.ji||1)*(e.Ti||1)}return 0}function yW(t,e){return wW(t,e)||function(t,e){return t.mG-e.mG}(t,e)}r(),r();var Yh=class t{llt(e,i,s,n){let r=t.sortByQuality(e);if(void 0!==this.vlt&&void 0===i&&e.length>1){const e=t.glt(r,this.vlt);e&&(r=e)}const o=this._lt(r,i,s,n);return o.length?o[o.length-1]:r[0]}_lt(e,i,s,n){var r;const o=t.sortByQuality(e),h={mut:void 0===n||this.plt.fut?this.plt.mut:n,zR:pW(s)&&s.zR?s.zR:1,wlt:s.ji,ylt:s.Ti,blt:null==(r=this.Alt)?void 0:r.restrictToPlayerSize};let a=o;for(const t of this.d_)a=t(a,i,h,this.Qp,this.Slt);return a}static Tlt(e){return t.sortByQuality(e)[0]}static klt(e,i){var s;return i?t.Tlt(null!=(s=t.glt(e,i))?s:e):t.Tlt(e)}static glt(t,e){for(const i of e){const e=t.filter((t=>Dn(t.dp,i)));if(e.length>0)return e}}static sortByQuality(t){const e=[...t];return e.sort(yW),e}constructor(t,e,i,s,n,r){this.d_=t,this.plt=e,this.Qp=i,this.Alt=s,this.vlt=n,this.Slt=r}};r();var bW=(t,e,i,s,n)=>t.filter((t=>n.hJ(t)&&s.hp(e,t)));r();var AW=(t,e,i)=>t.filter((t=>function(t,e,i){const s=i.mut;if(s<=0)return!1;return.8*s>t.mG*i.zR}(t,0,i)));r();var SW=(t,e,i,s,n)=>{const r=i.blt;if(void 0===r&&!s.Qs)return t;if(!1===r)return t;if(t.length>0&&t[0].pw!==Io.lE)return t;for(let e=t.length-1;e>=0;e--){const s=t[e];if(s.Ti===i.ylt&&s.ji===i.wlt)return t.slice(0,e+1);if(s.Ti<i.ylt||s.ji<i.wlt)return t.slice(0,e+2)}return[]};r();var TW=class{async Hct(t,e,i,s){let n;for(const r of this.Elt)try{const n=await r.Hct(t,e,i,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.Elt=t}};r(),r();var kW=class{async xlt(t,e,i,s){let n;for(const r of this.Rlt)try{return await r.xlt(t,e,i,s)}catch(t){Zr(t),n=t}throw n}constructor(t){this.Rlt=t}};r();var EW=class{async xlt(t,e,i,s){var n;const r=await this.aW.zk({qu:t,Xk:$r.vk,qk:e?{Range:"bytes="+e[0]+"-"+(null!=(n=e[1])?n:"")}:void 0,AE:i,gE:So.GET,pw:Wr.Qk,Bw:s});return await r.xk()}constructor(t){this.aW=t}};r();var xW=class{async xlt(t,e,i,s){const n=await this.Lut.ort(t,e);if(n)return n.buffer;if(e){const i=await this.Lut.ort(t);if(i)return Rc(new j(i.buffer),e[0],e[1])}throw new GV({qu:t,iut:e,AE:!1})}constructor(t){this.Lut=t}};r();var RW=1.05,IW=(t,e,i,s)=>{if(!1===i.blt)return t;if(s.Hg)return t;const n=s.Zg;var r;const o=(null!=(r=null==n?void 0:n.width)?r:i.wlt)*RW;var h;const a=(null!=(h=null==n?void 0:n.height)?h:i.ylt)*RW;for(let e=t.length-1;e>=0;e--){const i=t[e];if(i.Ti<=a&&i.ji<=o)return t.slice(0,e+1)}return[]},CW=class{static uit(t,e,i,s,n,r,o,h,a,u){const c=function(t,e){return new kW([new xW(e),new EW(t)])}(r,o),l=new Yh([bW],n,As.Ys,h,a,u),d=new gW(l,e,o,c),f=new Yh([AW,bW,SW,IW],n,As.Ys,h,a,u),_=new mW(f,e,s,c),v=new TW([d,_]);return new uW(t,i,v)}};r(),r();var PW=class extends pe{constructor(t,e,i,s,n,r=0){super(Mi.Yy),this.segmentStartTime=t,this.error=e,this.trackType=i,this.track=s,this.quality=n,this.retryCount=r}};r();var DW=class extends pe{constructor(t,e){super(Mi.vy),this.track=t,this.segments=e}},NW=class extends pt{constructor(t,e){super(e),this.Ilt=t}},MW=[Mi.Ky,Mi.Qy],LW=class extends Bo{get aat(){return this.Clt}get dat(){return this.Plt}set vat(t){this.Dlt.vat=t}get vat(){return this.Dlt.vat}get pat(){return this._at.Ht.pat}Nlt(t){return!this.S2||!t||!Ah(this.S2.aht,t.aht)}qat(t){if(!this.Clt)return!1;const e=this.Clt.Nut,i=ee.dB(e.LO,e.BO),s=this.Mlt.mct,n=s.JL(t);return n<0?i.gr(t,rW):i.eB(t,s.jn(n),!0,!0,rW)}async Zat(t){const e=this._at.Ht.Uat;for(;;){let n;try{var i;ot(t),this.Yat();if(this.Kat())break;n=this.Llt();const r=await this.Hct(n,t);if(void 0===r)break;if(this.Clt=r,!BW(this.Clt)){await this.Blt(this.Clt,t);continue}var s;if(this.Plt&&!Dn(this.Plt.nat.Ik,this.Clt.nat.Ik)&&await this.Slt.uJ(this.Clt.nat),this.Clt.nat.wG&&(!this.dat||(null==(i=this.Plt)?void 0:i.nat)!==this.Clt.nat))null==(s=this.iH)||s.kG(this.Clt.nat.wG);await this.Olt(n,this.Clt.Nut,t),this.S2=await this.Flt(this.Clt.nat,t);const o=await this.Mut(this.Clt,t),h=this.Mlt._R,a=this.Plt;this.Plt=await this.Vlt(o,t);const u=this.Mlt._R;this.Wlt(a,this.Clt,h,u,n),e.forEach((t=>t.Jct=!1)),this.Ult=0,this.Glt=0}catch(i){if(i instanceof Uu){this.u3(i.Cn,i.jn,i.nat);continue}if(i instanceof NW){let s=500;if(e.every((t=>t.Jct))){if(2===this.Ult){const t=this.Mlt._R;if(this.Hlt(this.Clt),this.Wlt(this.Plt,this.Clt,t,t,n),e.forEach((t=>t.Jct=!1)),this.Glt+=1,this.Ult=0,this.Glt===this.Zlt.maxRetries)throw new A(Ja.MEDIA_LOAD_ERROR,"The segments could not be loaded.",i);continue}this.Ult++;const t=this.Zlt.minimumBackoff*2**(this.Ult-1);s=_.min(t,this.Zlt.maximumBackoff)}await on(s,t);continue}throw this.Xlt=ee.fB(),i}finally{this.Clt=void 0}}}Wlt(t,e,i,s,n){const r=s.QL(i),o=e.nat,h=o.zlt(e.Nut),a=o.qct(e.Nut);let u=e.Nut.LO,c=e.Nut.BO;h&&(u=_.min(u,_.max(0,o.Yct.Cn-.05))),a&&(c=_.max(c,o.Yct.jn));const l=ee.dB(u,c).QL(s);if(0===r.V)return void this.qlt(i,l,u,n);if(h||this.Xlt.V>0){const t=l.Sn(ee.dB(u,r.Cn(0)));this.Ylt(t)}const d=r.XL().Sn(ee.dB(r.Cn(0),r.jn(r.V-1)));if(this.Ylt(d),a){const t=l.Sn(ee.dB(r.jn(r.V-1),c));this.Ylt(t)}if(this.Xlt.V>0){const t=this.Xlt.QL(r);this.Ylt(t),this.Xlt=ee.fB()}const f=o.Not,v=zn(e.Nut)?void 0:f.rlt(e.Nut);var m;const g=null!=(m=null==t?void 0:t.Nut)?m:this.Klt(v)?v:void 0;if(g){const t=this._at.Bct(g.LO,g.BO);if(t.length>0){const e=ee.dB(t[t.length-1].Lct,r.Cn(0));this.Ylt(e)}}const p=zn(e.Nut)?void 0:f.olt(e.Nut);if(p&&this.Klt(p)){const t=this._at.Bct(p.LO,p.BO);if(t.length>0){const e=ee.dB(r.jn(r.V-1),t[0].Mct);this.Ylt(e)}}}qlt(t,e,i,s){let n=e;0===this.Xlt.V&&(this.Xlt=ee.dB(t.jn(t.V-1),i)),0===n.V&&void 0!==s&&(n=ee.lB(s)),this.Xlt=this.Xlt.KL(n),this._at.Fct(this.Xlt)}Klt(t){return!!t&&this._at.Bct(t.LO,t.BO).length>0}Ylt(t){const e=t.QL(this.Mlt._R);for(let t=0;t<e.V;t++)e.Cn(t)!==e.jn(t)&&this.jlt.LJ(e.Cn(t),e.jn(t))}Qlt(t,e){throw new NW(t,e)}Yat(){if(this.Xlt.V>0)return;var t;const e=this.Mlt.mct.KL(null!=(t=this.Mlt.NJ.HL().uB(this.Mlt.pct))?t:ee.fB());this._at.Ict(e),this.Jlt&&!this.$lt(this.Jlt)&&(this.Jlt=void 0),this.yo(new DW(this._at.Ht.pat,this._at.Fat()))}Kat(){return this.Plt&&this.Plt.nat.qct(this.Plt.Nut)?(this.jlt.i3(),!0):(this.Jlt&&this.Jlt.nat.qct(this.Jlt.Nut)&&this.$lt(this.Jlt)&&this.jlt.i3(),!!this.Mlt.gct)}$lt(t){return this._at.Cct.$L(t.tdt,t.edt)}idt(t,e,i){(!this.Jlt||this.Jlt.Nut.BO<t.Nut.BO)&&(this.Jlt=la({},t,{tdt:e,edt:i}))}Llt(){const t=this.Mlt.pct;return t}async Hct(t,e){ot(e);const i=this.Plt?this.Plt.nat:void 0,s=await this.Dlt.Uct(t,i,e);if(s)return s}async Blt(t,e){const i={stack:[],error:void 0,hasError:!1};try{const s=t.nat,n=s.Not,r=zn(t.Nut)?n.slt(t.Nut):t.Nut,o=s.ndt.sdt(),h=n.rdt(r);if(h&&h.getTime()<=o.getTime())return this.Qlt(tc.bht,"Segment is not available.");const a=n.odt(r).getTime()-o.getTime();0;const u=rs(i,$t.Yw([e]),!1);await Promise.race([on(a,u.Bw),s.uy(ge.Jht,u.Bw)])}catch(t){i.error=t,i.hasError=!0}finally{ae(i)}}async Flt(t,e,i){void 0===i&&(i=0),ot(e);const s=t.hdt;if(!s)return this.S2;try{if(!t.adt){const i=await this.udt.Out(s,e);t.adt=i.Zk}}catch(s){if(Zr(s),so(s)){if(2===i)return t.Jct=!0,this.Qlt(tc.Iht,"Could not fetch the initializer.");const s=_.min(this.Zlt.minimumBackoff*2**i,this.Zlt.maximumBackoff);return await on(s,e),this.Flt(t,e,i+1)}throw new A(Ja.MEDIA_LOAD_ERROR,s.message,s)}ot(e);try{this.Nlt(t.adt)&&await this.jlt.Pot(t.adt,t,e)}catch(t){if(Zr(t),so(t))return this.Qlt(tc.Iht,"Could not append the initializer.");throw new A(Ja.MEDIA_DECODE_ERROR,t.message,t)}return t.adt}async Mut(t,e,i){void 0===i&&(i=0);try{return ot(e),await this.udt.Mut(t,e)}catch(s){if(Zr(s),s instanceof an){if(function(t){return t instanceof $b}(s.cause))return this.cdt(new an(s,t.Nut,t.nat),i),this.Qlt(tc.bht,"Could not append the segment.");if(2===i)return t.nat.Jct=!0,this.cdt(s,i),this.Qlt(tc.bht,"Could not fetch the segment.");const n=_.min(this.Zlt.minimumBackoff*2**i,this.Zlt.maximumBackoff);return await on(n,e),await this.Mut(t,e,i+1)}throw new A(Ja.MEDIA_LOAD_ERROR,s.message,s)}}async Olt(t,e,i){const s=this._at.Bct(e.LO,e.BO),n=this.Mlt.mct.uB(t);let r=ee.fB();for(const t of s){ot(i);const e=t.Mct,s=t.Lct,o=n&&n.eB(e,s)?_.max(e,n.jn(0)):e,h=s;o<h&&(r=r.KL(ee.dB(o,h)))}for(let t=0;t<r.V;t++)await this.jlt.ldt(r.Cn(t),r.jn(t),i);this.Yat()}async Vlt(t,e){try{ot(e);const i=await this.jlt.ddt(t.But,t.Nut,t.nat,e);return this.fdt(t,i.tdt,i.edt),this.idt(t,i.tdt,i.edt),t}catch(e){if(Zr(e),so(e))return this.cdt(new an(e,t.Nut,t.nat),0),this.Qlt(tc.bht,"Could not append the segment.");if(uD(e)&&this.jlt.Dj())return this.Qlt(tc.Sht,"Buffer is full. Could not reduce the buffer.");throw new A(Ja.MEDIA_DECODE_ERROR,e.message,e)}}fdt(t,e,i){const s=t.nat,n=t.Nut;this.Hat(n,s,e,i)}Hat(t,e,i,s){this._at.Hat({Gat:e.o,Vat:t.LO,Wat:t.BO,Mct:i,Lct:s,Vct:!0}),this.jlt.BJ(i,s)}u3(t,e,i){const s=ee.dB(t,e);i?this._at.LJ(s,i.o):this._at.Fct(s),this.jlt.LJ(t,e)}Hlt(t){const e=ee.dB(t.Nut.LO,t.Nut.BO);t.nat?this._at.LJ(e,t.nat.o):this._at.Fct(e)}cdt(t,e){const i=t.hct,s=this._at.Ht.pat,n=this._at.Ht.ga,r=t.uct.nat&&t.uct.nat.ga,o=new PW(i,t.message,s,n,r,e);this.yo(o)}tr(){this.S2=void 0,this.Plt=void 0}gn(){this.tr(),this.Jlt=void 0,this.udt.fn(MW,this.Ds),this.udt.gn()}constructor(t,e,i,s,n,r,o,h,a){super(),this.zat=t,this._at=e,this.Mlt=i,this.Dlt=s,this.udt=n,this.jlt=r,this.Slt=o,this.Zlt=h,this.iH=a,this.Clt=void 0,this.S2=void 0,this.Plt=void 0,this.Jlt=void 0,this.Ult=0,this.Glt=0,this.Xlt=ee.fB(),this.udt.yn(MW,this.Ds)}};function BW(t){const e=t.nat,i=e.Not,s=zn(t.Nut)?i.slt(t.Nut):t.Nut;return i._dt(s,e.ndt.sdt())}var OW=0,FW=class{uit(t){const e=OW++,i=this.vct.n3,s=new aW(t),n=this.vdt&&vT(i),r=new VV(i,n),o=new oW(this.vct,this.d9,this.E3,this.dZ),h=CW.uit(e,this.vct,s,this.dZ,r,this.aW,this.Lut,this.Alt,this.vlt,this.Slt),a=function(t){switch(t){case Io.cE:return xa.cE;case Io.lE:return xa.lE;case Io.wk:return xa.wk;case Io.dE:return xa.dE;default:return xa.Qk}}(i),u=function(t,e,i,s){const n=new ZV(s),r=new nW(t,e,i);return new zV([n,r])}(new BV(this.aW,a),r,n,this.Lut),c=new LW(e,s,o,h,u,this.vct,this.Slt,this.Zlt,this.iH);return new LV(e,t.lct,s,c,this.d9)}mdt(t,e){const i={pat:Io.wk,lct:e,Uat:e.Uat,ga:t.ga};return this.uit(i)}constructor(t,e,i,s,n,r,o,h,a,u,c,l){this.vct=t,this.d9=e,this.E3=i,this.aW=s,this.dZ=n,this.vdt=r,this.Lut=o,this.Alt=h,this.vlt=a,this.Slt=u,this.Zlt=c,this.iH=l}};r();var VW=class{hJ(t){return this.wot.hJ(t)}uJ(t){return this.wot.uJ(t)}constructor(t){this.wot=t}},WW=class{hJ(t){return!0}uJ(t){return Promise.resolve(void 0)}};r(),r();var UW=class extends $s{ma(){return new GW(this.EC.map((t=>t.ga)))}constructor(t,e){super(Eo.nC),this.EC=t||[],this.Ht=e}},GW=class extends pe{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}};r();var HW=class extends er{ma(){return new ZW(this.quality.ga)}constructor(t){super(Eo.QUALITY_UNAVAILABLE),this.quality=t}},ZW=class extends nr{constructor(t){super("qualityunavailable"),this.quality=t}};r();var XW=class extends pe{constructor(){super(Eo.NO_QUALITY)}};function zW(t){return{mG:t.mG,dp:t.Urt,Ti:qW(t)?t.Ti:0,pw:qW(t)?Io.lE:Io.cE,ji:qW(t)?t.ji:0}}function qW(t){const e=t;return void 0!==e.Ti&&void 0!==e.ji}r();var YW=0,KW=class extends Bo{get kC(){return this.Dat.gdt.map(jW).filter(ne)}pdt(t){for(const e of t)e.yn("update",this.wdt),this.wO.yO(e)}ydt(t){if(!this.wO.bO(t))return;t.sW();const e=this.bdt();if(this.Adt&&qt(this.Adt,t)){const t=this.Adt.filter((t=>t.Hnt));0===t.length&&e.length>0?this.xC=e:this.xC=t}else this.xC=e;this.yo(new HW(t))}Sdt(t){if(!this.wO.bO(t))return;const e=this.bdt();t.iW(),this.Adt&&!function(t,e){return Xm(t,e,((t,e)=>t===e))}(this.Adt,e)||(this.xC=this.bdt())}bdt(){return this.wO.oC.filter((t=>t.Hnt))}get SC(){return this.Tdt}kdt(t){this.Tdt=t.nat,this.yo(t)}get lct(){return this.Dat}get Rt(){return this.He}set Rt(t){this.xO(t)}get ga(){return this.Za||(this.Za=bi(this)),this.Za}get Edt(){return this.xdt}set Edt(t){this.xdt=t}get o(){return this.US}get TC(){return this.TO}get Lt(){return this.q4}get gs(){return this.CA}get kh(){return this.kO}set kh(t){t!==this.kO&&(this.kO=t,this.yo(new Qu(this)))}get TE(){return this.Rt?"enabled":"disabled"}get xC(){return this.Adt}set xC(t){let e;if(t){const i=this.SC?zW(this.SC):void 0;e=t.filter((t=>t.Hnt&&As.Ys.hp(i,zW(t))))}else e=this.bdt();0!==e.length?(this.Adt=t&&this.wO.bO(t)?t:void 0,this.Rdt=this.Idt(this.Adt),this.yo(new UW(t,this))):this.yo(new XW)}get Cdt(){return this.Rdt}Idt(t){if(!t||0===t.length)return;const e=[];for(const i of this.Uat)for(const s of t)s===i.nat&&s.Hnt&&e.push(i);return e}get EC(){return this.wO}get Uat(){return this.Pdt}Ddt(t){this.Ndt.push(t),this.Pdt.push(...t.Uat);const e=t.Uat.map((t=>t.nat));this.pdt(e)}get pat(){return this.Mdt}get Ldt(){return this.Ndt}get Bdt(){return this.Uat.every((t=>t.Bdt))}xO(t){this.He=t,this.xdt&&(t?this.xdt.iW(this):this.xdt.sW(this))}Odt(t){this.He=t,this.Fdt!==t&&(this.Fdt=t,this.yo(new Bc(this)))}gn(){for(const t of this.wO.oC)t.fn("update",this.wdt);this.wO.tr()}constructor(t,e,i="alternative"){super(),this.Tdt=void 0,this.He=!1,this.Za=void 0,this.xdt=void 0,this.US="",this.Fdt=!1,this.wO=new Oc,this.Pdt=[],this.Adt=void 0,this.Rdt=void 0,this.wdt=()=>this.yo(new Qu(this)),this.Ndt=[],this.Dat=t,this.US=String(YW++),this.TO=ai(),this.q4=i,this.CA=t.Wtt,this.kO=t.kh,this.Mdt=t.pw,this.Pdt=t.Uat,this.pdt(e)}};function jW(t){if("urn:mpeg:dash:role:2011"===t.J6)return QW(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.J6){if("1"===t.Ix)return ln.pC;if("2"===t.Ix)return ln.yC}}function QW(t){if(void 0!==(null==t?void 0:t.Ix))switch(t.Ix){case"caption":return ln.gC;case"sign":return ln.wC;case"description":return ln.pC;case"enhanced-audio-intelligibility":return ln.yC;default:return}}var JW=class t extends Ex{get Vdt(){return this.Wdt}set Vdt(t){this.Wdt=t}get Rt(){for(const t of this.Z.oC)if(t.TE!==yh.Ch)return!0;return!1}get WG(){const t=this.d9.yR;return this.mct.uB(t,.01)}get Udt(){return this.Vdt&&this.Gdt[this.Vdt.TC]?this.Gdt[this.Vdt.TC]:ee.fB()}get Hdt(){return this.Vdt&&this.Zdt[this.Vdt.TC]?this.Zdt[this.Vdt.TC]:ee.fB()}get yct(){return new ee([0,1/0])}get _R(){return this.Udt}get NJ(){return this.Xdt?this.Xdt.fat.NJ.bct:ee.fB()}get mct(){return PV(this._R,this.NJ).YL(2*this.zdt)}get Cn(){return this.qdt?this.qdt.Yct.Cn:NaN}get jn(){return this.qdt?this.qdt.Yct.jn:NaN}get kR(){const t=this.jn;return!!t&&this.d9.yR>=t}get zdt(){var t;const e=this.Ydt();if(!e)return.04;var i;return 1/(null!=(i=this.Vdt&&(null==e||null==(t=e.Kdt)?void 0:t.uF()))?i:25)}get Ti(){return this.ZA}get n3(){return Io.wk}get zR(){return this.aZ}set zR(t){this.aZ=t}get KR(){return this.Hdt}get iI(){if(!this.Vdt)return ee.lB(0);const t=this.jdt(this.Vdt),e=null==t?void 0:t.Qdt,i=null==t?void 0:t.Jdt;if(void 0===i||void 0===e)return ee.lB(0);const s=_.max(e,this.d9.yR);return new ee([i,s]).HL()}get ji(){return this.HA}i3(){}wct(){return this.mct.gr(this.jn)}async ddt(t,e,i,s){const n=t.pw===Ut.QQ?t.Zk.aht:await t.Zk.xk(s),r=this.findTrackForRepresentation(i),o=this.Gdt[r.TC],h=e.LO,a=e.BO,u=new ee([h,a]);o||(this.Gdt[r.TC]=ee.fB(),this.Zdt[r.TC]=ee.fB()),this.Tot(s);const c=this.Dot(new j(n),e,i,r);for(const t of c)r.uW(t);return this.Gdt[r.TC]=this.Gdt[r.TC].KL(u),{tdt:h,edt:a}}Tot(t){const e=aD(this.d9.yR,void 0,void 0,this._R,this.dZ.xj,this.dZ.yj);for(const[i,s]of e)oh(this.ldt(i,s,t))}Pot(t,e,i){return this.$dt.Pot(t,e,i)}Dot(t,e,i,s){return this.$dt.Dot(t,e,i,s)}ldt(t,e,i){const s=t,n=e;let r=new ee([t,e]);for(const t of this.Z.oC){const e=[];for(const i of t.L.oC)i.LO>=s&&i.BO<=n?e.push(i):r=r.QL(new ee([i.LO,i.BO]));for(const i of e)t.JV(i);const i=this.Gdt[t.TC];i&&(this.Gdt[t.TC]=i.QL(r))}return Promise.resolve()}LJ(t,e){}BJ(t,e){}Dj(){return!1}iW(t){const e=this.tft(t);if(e&&this.Vdt!==e){this.Vdt=e;for(const t of this.Z.oC)t!==e&&(t.TE=yh.Ch);if(this.$dt.tr(),this.Xdt&&(this.Xdt.gn(),this.Xdt=void 0),this.Vdt){const t=this.jdt(this.Vdt);this.Xdt=new FW(this,this.d9,this.d9,this.aW,this.dZ,!1,this.Lut,void 0,void 0,new WW,QT,void 0).mdt(this.Vdt,t),this.Xdt.yn(sn.ua,this.eft),this.Xdt.Cn(tc._ht)}}}sW(t){if(this.Vdt===t){const e=this.tft(t);e&&this.Vdt===e&&(this.Vdt=void 0),this.Xdt&&(this.Xdt.gn(),this.Xdt=void 0)}}async $n(t){await this.tr(),this.qdt=t,this.ift(t)}sft(t){const e=function(t){const e=t.Uat&&t.Uat.length>0&&t.Uat[0],i=e&&mx(e.Urt),s=mx(t.Urt),n=t.Xq===Ry.APPLICATION_TTML_XML;return i||s||n?Vr.TTML:t.Xq===Ry.TEXT_VTT||yx(t.Xq,t.Urt)?Vr.WEBVTT:Vr.DEFAULT}(t);if(!e)throw new g("Unknown TextTrack type for Representation");const i=t.nft.concat(t.gdt);return this.rft(function(t){return qt(t.filter((t=>"urn:mpeg:dash:role:2011"===t.J6)).map((t=>t.Ix)).filter(ne),"caption")?Hi.YV:Hi.qV}(i),t.kh,t.Wtt,!1,e,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.J6)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.Ix)))}(t.nft),t.gdt.map(QW).filter(ne))}ift(t){for(const e of t.oft){const t=this.sft(e);this.hft.set(t.TC,e),t.tI=nc.LOADED,this.tt(t)}}it(t){this.hft.delete(t.TC),super.it(t)}rft(t,e,i,s,n,r,o,h){var a;const u=r.Uat.reduce(((t,e)=>t||e.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.oW.DI(t,l,e,i,s,n,o,h)}async tr(){await super.tr(),this.Xdt&&(await this.Xdt.tr(tc.Bht),this.Xdt.fn(sn.ua,this.eft),this.Xdt=void 0),this.qdt=void 0,this.Gdt={},this.Zdt={}}aft(){this.Gdt={},this.Zdt={}}findTrackForRepresentation(e){for(const i of this.Z.oC){const s=this.jdt(i);if(s&&t.uft(s)===e)return i}}tft(t){return Ti(this.Z.oC,(e=>t.TC===e.TC))}jdt(t){return this.hft.get(t.TC)}Ydt(){if(!this.Vdt)return;const e=this.jdt(this.Vdt);return e?t.uft(e):void 0}static uft(t){return t.Uat&&t.Uat.length>0?t.Uat[0]:void 0}gn(){for(const t of this.Z.oC)this.oW.lW(t);return super.gn()}constructor(t,e,i,s,n,r){super(),this.ZA=0,this.aZ=1,this.Xdt=void 0,this.Gdt={},this.Zdt={},this.HA=0,this.hft=$h(),this.eft=t=>{0},this.d9=t,this.aW=e,this.dZ=i,this.$dt=s,this.Lut=n,this.oW=r}},$W=class{get nt(){return this.Ul}async hW(t){if(t.pw!==Io.wk)return;const e=function(t,e,i){return mx(e)||t===Ry.APPLICATION_TTML_XML||t===Ry.TEXT_VTT?new RV(i):yx(t,e)?new IV:void 0}(t.Xq,t.Urt,this.Mot);if(e){const i=this.cft(e);return this.lft(i),await i.$n(t),i}}cft(t){return new JW(this.d9,this.aW,this.dZ,t,this.Lut,this.oW)}lft(t){this.dft.push(t),this.Ul.xG(t.Z)}async tr(){for(const t of this.dft.slice())await t.tr();Pn(this.dft),this.Ul.tr()}async gn(){for(const t of this.dft)await t.gn();Pn(this.dft),this.Ul.gn()}constructor(t,e,i,s,n,r){this.dft=[],this.Ul=new Wu([]),this.d9=t,this.aW=e,this.dZ=i,this.Lut=s,this.oW=n,this.Mot=r}};r();var tU=class extends pe{constructor(t){super(Mi.Fy),this.error=t}};r();var gn=function(t){return t.fW="static",t._W="dynamic",t}({});r(),r();var eU=function(t){return t.fft="_ft",t}({}),iU=class extends pe{constructor(){super(eU.fft)}};r(),r();var sU=class extends pe{constructor(t,e){super(Mi.Zy),this.representation=t,this.previousRepresentation=e}};r(),r(),r();var Du=function(t){return t[t.vft=0]="vft",t[t.mft=1]="mft",t[t.gft=2]="gft",t[t.pft=3]="pft",t[t.wft=4]="wft",t[t.yft=5]="yft",t}({}),Au=function(t){return t[t.bft=0]="bft",t[t.Aft=1]="Aft",t[t.Sft=2]="Sft",t[t.Tft=3]="Tft",t}({});function nU(t,e,i){return i===Du.vft?i:e!==Au.bft&&e!==Au.Aft||i!==Du.mft&&i!==Du.gft?t?e===Au.Sft?Du.wft:e===Au.Tft?Du.pft:Du.vft:Du.yft:Du.gft}function rU(t,e,i,s){const n={byte:i};let r=Du.mft;const o=[],h=31&wu(e,n,s);n.byte+=1;for(let i=0;i<h;i+=1){const h=wu(e,n,s),a=4&h,u=3&h;r=nU(Boolean(a),u,r);const c=wu(e,n,s),l=wu(e,n,s);o.push({kft:t,JM:-1,Eft:!i,xft:Boolean(a),pw:u,Rft:r,Ift:c,Cft:l})}return o}function oU(t,e,i){const s=wu(t,e,i);if(!S(s))return String.fromCharCode(s)}function hU(t){const e=t.B0,i={byte:t.M0},s=t.L0,n=wu(e,i,s);if(255===n&&(i.byte+=1),181!==n)return;const r=SN(e,i);if(47!==r&&49!==r)return;if(49===r){const t=function(t,e,i){let s="",n=i;for(;n>0;)n-=1,s+=oU(t,e);return s}(e,i,4);if("GA94"!==t)return}if(3!==wu(e,i,s))return;47===r&&(i.byte+=1);const o=t;return o.Pft=i.byte,o}function aU(t){return 4===t.D0}function uU(t){const e=t.filter(aU).map(hU).filter(ne),i=[];for(const t of e)i.push(...rU(t.P0,t.B0,t.Pft,t.L0));return i}r();var cU="und";function lU(t){if(t===cU)return;const e=t.toLowerCase();for(const t of dU)if(t[1]===e||t[2]===e||t["2T"]===e||t["2B"]===e||t[3]===e)return t}var dU=[{l:"Abkhaz",lh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",lh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",lh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",lh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",lh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",lh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",lh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",lh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",lh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",lh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",lh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",lh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",lh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",lh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",lh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",lh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",lh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",lh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",lh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",lh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",lh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",lh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",lh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",lh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",lh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",lh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",lh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",lh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",lh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",lh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",lh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",lh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",lh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",lh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",lh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",lh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",lh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",lh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",lh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",lh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",lh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",lh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",lh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",lh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",lh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",lh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",lh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",lh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",lh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",lh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",lh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",lh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",lh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",lh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",lh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",lh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",lh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",lh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",lh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",lh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",lh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",lh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",lh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",lh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",lh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",lh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",lh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",lh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",lh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",lh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",lh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",lh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",lh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",lh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",lh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",lh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",lh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",lh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",lh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",lh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",lh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",lh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",lh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",lh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",lh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",lh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",lh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",lh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",lh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",lh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",lh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",lh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",lh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",lh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",lh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",lh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",lh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",lh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",lh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",lh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",lh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",lh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",lh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",lh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",lh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",lh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",lh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",lh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",lh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",lh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",lh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",lh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",lh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",lh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",lh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",lh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",lh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",lh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",lh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",lh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",lh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",lh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",lh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",lh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",lh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",lh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",lh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",lh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",lh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",lh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",lh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",lh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",lh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",lh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",lh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",lh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",lh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",lh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",lh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",lh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",lh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",lh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",lh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",lh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",lh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",lh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",lh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",lh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",lh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",lh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",lh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",lh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",lh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",lh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",lh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",lh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",lh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",lh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",lh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",lh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",lh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",lh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",lh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",lh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",lh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",lh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",lh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",lh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",lh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",lh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",lh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",lh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",lh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",lh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",lh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",lh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",lh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",lh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",lh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",lh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",lh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",lh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",lh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",lh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];r();function fU(t){var e;const i=null!=(e=function(t){const e=t.p0,i=new TN;return i.S0(e,0,e.byteLength),LN(i).Q0}(t))?e:24;return t.Dft/i}function _U(t){return t.pw===Mt.eD}function vU(t,e,i,s,n){const r=function(t,e,i,s){const n=i.Dft,r=fo.fromNumber(t.cL||0),o=s.yO(Uh.TF(r,n));return{Nft:s.uF(),Mft:s,Lft:o,Bft:s}}(t,0,i,s),o=Uh.kF(t.ct||0,i.Dft),h=t.zD||0,a=!(65536&h)&&1!==(h>>24&3);let u;const c=na(n),l=new Ui;for(;l.tc<c.byteLength;){const t=os(c,l);if((31&Dg(c,l,1))===PN.G0){const e=new TN;e.S0(n,l.tc-1,l.tc+t-1);const i=new MN(e),s=RN(r.Lft,i);u=u||[],u.push(...uU(s))}l.Ab(t-1)}return la({},r,{ct:o.uF(),Oft:o,Fft:r.Lft.uF(),Vft:r.Nft,Wft:a,Uft:u,Gft:!1,Hft:!1})}function mU(t){return{bN:t.WD.bN,Dft:t.gN.WD.lN}}function gU(t){return t.pw===Mt.dP}r(),r(),r(),r(),r(),r(),r(),r();var pU=class{JO(t){return this.Ytt===t.Ytt&&this.Ott===t.Ott}constructor(t,e){this.Ytt=t,this.Ott=e}};r();var wU=class{get uet(){return this.Zft}get net(){return[this]}get het(){return this.zQ}get Gtt(){return this.Xft}get Xtt(){return new pU(this.Gtt.Ytt,this.Gtt.Ott+this.uet.length-1)}zft(t){this.Zft+=t}qft(t){for(const e of t)this.zft(e)}constructor(t,e){this.zQ=t,this.Xft=e,this.Zft=""}};function yU(t,e){return t===e||t.uet===e.uet&&t.Gtt.JO(e.Gtt)&&Pi(t.het,e.het)}function bU(t,e){return t===e||t.Gtt.JO(e.Gtt)&&t.Xtt.JO(e.Xtt)&&Xm(t.net,e.net,yU)}var AU=class extends Le{$O(t){return Xm(this.U,t.U,bU)}constructor(t,e,i){super(t,e,i,!1)}};r();var SU=class{Yft(t){return t.AV(this)}Kft(t){return Ke(t,((t,e)=>t.AV(this,e)))}jft(t,e){return new TU(t,e).Qft()}},TU=class{Qft(){if(this.Jft)return[];for(let t=0;t<this.Ytt.length;t++)this.$ft(t);return this.t_t(),this.e_t}i_t(t){this.s_t=new wU(kO,new pU(this.n_t,t))}t_t(){this.s_t&&(this.e_t.push(this.s_t),this.s_t=null)}$ft(t){const e=this.Ytt[t];kU(e)?this.s_t&&this.t_t():(this.s_t||this.i_t(t),this.s_t.zft(e))}get Jft(){return this.Ytt.every(kU)}constructor(t,e){this.Ytt=t,this.n_t=e,this.e_t=[],this.s_t=null}};function kU(t){return null==t}var EU=class{static r_t(t,e,i){if(e>=i)return;const s=Ke(t,((t,e)=>new TU(t.map((t=>t?t.o_t():null)),e).Qft()));return 0!==s.length?new AU(e,i,s):void 0}},xU="black",RU="white";r(),r();var IU=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,e)=>(t[e[0]]=e[1],t)),{}),CU=class{h_t(t){for(let e=0;e<Ft;e++)t&&(this.a_t[e]=t.a_t[e])}JO(t){for(let e=0;e<Ft;e++)if(this.a_t[e]!==t.a_t[e])return!1;return!0}u_t(){for(let t=0;t<Ft;t++)if(null!==this.a_t[t])return!1;return!0}c_t(t){this.l_t!==t&&(this.l_t=t),this.l_t<0?this.l_t=0:this.l_t>Ft&&(this.l_t=31)}d_t(t){const e=this.l_t+t;this.c_t(e)}f_t(){this.d_t(-1),this.a_t[this.l_t]=null}zft(t){t>=144&&this.f_t();const e=function(t){return IU[t]?String.fromCharCode(IU[t]):String.fromCharCode(t)}(t);this.addParsedChar(e)}addParsedChar(t){this.l_t>=Ft||(32===Number(t)?(this.a_t[this.l_t]=this.__t?"</i>":"<i>",this.__t=!this.__t):this.a_t[this.l_t]=t,this.d_t(1))}v_t(t){for(let e=t;e<Ft;e++)this.a_t[e]=null}Nb(){this.v_t(0),this.l_t=0}m_t(){this.v_t(this.l_t)}g_t(t,e){const i=this.a_t;let s=null;for(let n=0;n<Ft;n++){const r=i[n];null===r?s=null:(s||(s={Oh:n,Vh:t,ji:0,Ti:1,a_t:[[]]},e.push(s)),s.a_t[0].push(r),s.ji++)}}AV(t,e){return t.jft(this.a_t,e)}constructor(){this.a_t=[],this.l_t=0;for(let t=0;t<Ft;t++)this.a_t.push(null);this.__t=!1}};var PU=class{p_t(t,e){const i="CC"+(this.w_t<<1|this.y_t+1);if(t>=e)return null;const s=(new SU).Kft(this.b_t.slice(1));return 0===s.length?null:{DO:new AU(t,e,s),Rk:i,A_t:this.w_t<<1|this.y_t+1}}tr(){this.S_t(),this.T_t=1}k_t(){return this.T_t}E_t(t){this.T_t=t}c_t(t){this.b_t[this.T_t].c_t(t)}d_t(t){this.b_t[this.T_t].d_t(t)}x_t(){return this.R_t}I_t(t){this.R_t=t}zft(t,e){if(e<32||e>127)return;let i="";switch(t){case 0:i=void 0!==NU[e]?NU[e]:String.fromCharCode(e);break;case 1:i=MU[e];break;case 2:this.C_t(),i=LU[e];break;case 3:this.C_t(),i=BU[e]}i&&this.b_t[this.T_t].addParsedChar(i)}C_t(){this.b_t[this.T_t].f_t()}P_t(t,e,i){if(t>=e)for(let s=i-1;s>=0;s--)this.b_t[t+s]=this.b_t[e+s];else for(let s=0;s<i;s++)this.b_t[t+s]=this.b_t[e+s]}D_t(t,e){for(let i=0;i<=e;i++)this.b_t[t+i]=new CU}S_t(){this.D_t(0,ec)}N_t(){this.T_t=this.R_t>0?this.R_t:0,this.S_t()}M_t(t){this.L_t=t}B_t(t){this.O_t=t}F_t(t){this.V_t=t}W_t(t){this.U_t=t}constructor(t,e){this.b_t=new Array(ec+1);for(let t=0;t<=ec;t++)this.b_t[t]=new CU;this.T_t=1,this.R_t=0,this.w_t=t,this.y_t=e,this.L_t=!1,this.O_t=!1,this.V_t=RU,this.U_t=xU,this.tr()}},ec=15,DU=function(t){return t[t.G_t=0]="G_t",t[t.H_t=1]="H_t",t[t.Z_t=2]="Z_t",t[t.X_t=3]="X_t",t}({}),NU={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},MU={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},LU={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},BU={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},OU=class{tr(){this.z_t=!0,this.q_t=0,this.pp=0,this.Y_t=this.K_t,this.j_t=void 0,this.K_t.tr(),this.Q_t.tr(),this.J_t.tr()}$_t(t,e){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|e>>5&1]}tvt(t,e){const i=this.$_t(t,e),s=(30&e)>>1;let n=RU,r=!1;s<7?n=WU[s]:7===s&&(r=!0);const o=1==(1&e);if(4===this.pp)return;const h=this.Y_t;if(3===this.pp&&i!==h.k_t()){const t=1+h.k_t()-h.x_t(),e=1+i-h.x_t();h.P_t(e,t,h.x_t()),h.D_t(0,e-1),h.D_t(i+1,ec-i)}h.E_t(i);const a=xO[t<<1&14|e>>5&1]-1;if(a<0)return;const u=function(t,e){const i=e>95?e-96:e-64;return{Btt:EO[i].Btt,Ltt:EO[i].Ltt,Ott:EO[i].Ott,Ytt:t}}(a,e);h.c_t(u.Ott),this.Y_t.M_t(o),this.Y_t.B_t(r),this.Y_t.F_t(n),this.Y_t.W_t(xU)}evt(t,e){this.Y_t.M_t(!1),this.Y_t.B_t(!1),this.Y_t.F_t(RU);const i=this.ivt(t,DU.G_t," ".charCodeAt(0));let s=RU,n=!1;const r=1==(1&e);return s=WU[(14&e)>>1],"white_italics"===s&&(s="white",n=!0),this.Y_t.M_t(r),this.Y_t.B_t(n),this.Y_t.F_t(s),i}ivt(t,e,i){if(this.Y_t.zft(e,i),2===this.pp||3===this.pp){const e=this.svt(this.Y_t,this.q_t,t);return this.q_t=t,e}return null}svt(t,e,i){return this.z_t?null:2===this.pp||3===this.pp?t.p_t(i,i+10):t.p_t(e,i)}nvt(t,e){let i=xU;0==(7&t)&&(i=VU[(14&e)>>1]),this.Y_t.W_t(i)}rvt(t){const e=FU,i=t.ovt,s=t.avt;let n=null;switch(i){case e.RCL:this.uvt();break;case e.BS:this.cvt();break;case e.AOD:case e.AON:case e.DER:break;case e.RU2:n=this.lvt(2,s);break;case e.RU3:n=this.lvt(3,s);break;case e.RU4:n=this.lvt(4,s);break;case e.FON:n=this.dvt(s);break;case e.RDC:this.fvt(s);break;case e.TR:this._vt();break;case e.RTD:this.vvt();break;case e.EDM:n=this.mvt(s);break;case e.CR:n=this.gvt(s);break;case e.ENM:this.pvt();break;case e.EOC:n=this.wvt(s)}return n}gvt(t){const e=this.Y_t;if(3!==this.pp)return null;const i=this.svt(e,this.q_t,t),s=e.k_t()-e.x_t()+1;return e.P_t(s-1,s,e.x_t()),e.D_t(0,s-1),e.D_t(e.k_t(),ec-e.k_t()),this.q_t=t,i}lvt(t,e){this.Y_t=this.K_t;const i=this.Y_t;let s=null;return 3!==this.pp&&4!==this.pp&&(s=this.svt(i,this.q_t,e),this.K_t.N_t(),this.Q_t.N_t(),this.z_t=!1,i.E_t(ec)),this.pp=3,i.I_t(t),s}dvt(t){return this.ivt(t,DU.G_t," ".charCodeAt(0))}mvt(t){const e=this.K_t;let i=null;return 4!==this.pp&&(i=this.svt(e,this.q_t,t)),e.S_t(),this.z_t=!1,i}fvt(t){this.pp=2,this.Y_t=this.K_t,this.Y_t.I_t(0),this.q_t=t}pvt(){this.Q_t.S_t()}wvt(t){let e=null;4!==this.pp&&(e=this.svt(this.K_t,this.q_t,t));const i=this.Q_t;return this.Q_t=this.K_t,this.K_t=i,this.uvt(),this.q_t=t,e}uvt(){this.pp=1,this.Y_t=this.Q_t,this.Y_t.I_t(0)}cvt(){this.Y_t.C_t()}_vt(){this.J_t.tr(),this.z_t=!1,this.vvt()}vvt(){this.Y_t=this.J_t,this.pp=4}yvt(t,e,i){return this.Y_t.zft(DU.G_t,e),this.ivt(t,DU.G_t,i)}bvt(t,e,i){const s=1&e?DU.X_t:DU.Z_t;return this.ivt(t,s,i)}Avt(t){const e=t.Svt,i=t.ovt,s=t.avt;if(this.j_t===(e<<8|i))return this.j_t=void 0,null;if(this.j_t=e<<8|i,this.Tvt(e,i))this.tvt(e,i);else{if(this.kvt(e,i))return this.evt(s,i);if(this.Evt(e,i))this.nvt(e,i);else{if(this.xvt(e,i))return this.ivt(s,DU.H_t,i);if(this.Rvt(e,i))return this.bvt(s,e,i);if(this.Ivt(e,i))return this.rvt(t);this.isTabOffset(e)&&this.Y_t.d_t(i-32)}}return null}isTabOffset(t){return 23===t||31===t}Ivt(t,e){return 20==(246&t)&&32==(240&e)}Tvt(t,e){return 16==(240&t)&&64==(192&e)}kvt(t,e){return 17==(247&t)&&32==(240&e)}Evt(t,e){return 16==(247&t)&&32==(240&e)||23==(247&t)&&45==(255&e)}xvt(t,e){return 17==(247&t)&&48==(240&e)}Rvt(t,e){return 18==(246&t)&&32==(224&e)}static Cvt(t){return 16==(112&t)}constructor(t,e){this.pp=0,this.J_t=new PU(t,e),this.K_t=new PU(t,e),this.Q_t=new PU(t,e),this.Y_t=this.K_t,this.q_t=0,this.j_t=void 0,this.z_t=!1}},FU={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47},VU=["black","green","blue","cyan","red","yellow","magenta","black"],WU=["white","green","blue","cyan","red","yellow","magenta","white_italics"];r(),r(),r();var UU=class{o_t(){return this.Pvt}Dvt(){return this.L_t}Nvt(){return this.O_t}Mvt(){return this.U_t}Lvt(){return this.V_t}constructor(t,e,i,s,n){this.Pvt=t,this.L_t=e,this.O_t=i,this.U_t=s,this.V_t=n}},GU=class{Bvt(t,e,i,s,n,r,o){this.iZ=t,this.Ovt=e,this.Fvt=i,this.Vvt=s,this.Wvt=n,this.Uvt=r,this.Gvt=o}Hvt(){this.Zvt=[];for(let t=0;t<ZU;t++)this.Zvt.push(this.Xvt())}Xvt(){const t=[];for(let e=0;e<HU;e++)t.push(null);return t}zvt(t){this.qvt()&&(this.Zvt[this.T_t][this.Yvt]=new UU(t,this.L_t,this.O_t,this.U_t,this.V_t),this.Yvt++)}Kvt(){this.qvt()&&(this.Yvt<=0&&this.T_t<=0||(this.Yvt<=0?(this.Yvt=this.Gvt-1,this.T_t--):this.Yvt--,this.Zvt[this.T_t][this.Yvt]=null))}qvt(){const t=this.T_t<this.Uvt&&this.T_t>=0,e=this.Yvt<this.Gvt&&this.Yvt>=0;return t&&e}jvt(){return this.iZ}Qvt(t){let e=0;for(let i=t;i<ZU;i++,e++)this.Zvt[e]=this.Zvt[i];for(let i=0;i<t;i++,e++)this.Zvt[e]=this.Xvt()}Jvt(){if(this.T_t+1>=this.Uvt)return this.Qvt(1),void(this.Yvt=0);this.T_t++,this.Yvt=0}$vt(){this.Zvt[this.T_t]=this.Xvt(),this.Yvt=0}p_t(t,e){if(this.XO>=t)return null;const i=EU.r_t(this.Zvt,this.XO,t);return i?(this.tmt(t),{DO:i,Rk:"svc"+e,A_t:e}):null}emt(t,e){this.T_t=t,this.Yvt=e}imt(t){this.U_t=t}smt(t){this.V_t=t}nmt(t){this.L_t=t}omt(t){this.O_t=t}hmt(){this.T_t=0,this.Yvt=0,this.L_t=!1,this.O_t=!1,this.V_t=RU,this.U_t=xU}amt(t){this.umt=t}cmt(){this.iZ=!0}be(){this.iZ=!1}wh(){this.iZ=!this.iZ}tmt(t){this.XO=t}constructor(t){this.lmt=t,this.iZ=!1,this.Wvt=!1,this.Fvt=0,this.Ovt=0,this.Vvt=0,this.Uvt=0,this.Gvt=0,this.umt=2,this.Zvt=[],this.XO=0,this.T_t=0,this.Yvt=0,this.O_t=!1,this.L_t=!1,this.V_t=RU,this.U_t=xU,this.Hvt()}},HU=42,ZU=15,XU=class{dmt(t){const e=t.fmt();let i=e.Ix;const s=e.avt;if(i===jU){i=i<<16|t.fmt().Ix}return i>=0&&i<=31?this._mt(i,s):i>=128&&i<=159?this.vmt(t,i,s):(i>=4096&&i<=4127?this.mmt(t,255&i):i>=4224&&i<=4255?this.gmt(t,255&i):i>=32&&i<=127?this.pmt(i):i>=160&&i<=255?this.wmt(i):i>=4128&&i<=4223?this.ymt(255&i):i>=4256&&i<=4351&&this.bmt(255&i),null)}pmt(t){this.Amt&&(127!==t?this.Amt.zvt(String.fromCharCode(t)):this.Amt.zvt("\u266a"))}wmt(t){this.Amt&&this.Amt.zvt(String.fromCharCode(t))}ymt(t){if(!this.Amt)return;if(void 0===QU[t])return void this.Amt.zvt("_");const e=QU[t];this.Amt.zvt(e)}bmt(t){this.Amt&&(160===t?this.Amt.zvt("[CC]"):this.Amt.zvt("_"))}_mt(t,e){if(!this.Amt)return null;const i=this.Amt;let s=null;switch(t){case zU:i.Kvt();break;case YU:i.jvt()&&(s=i.p_t(e,this.Smt)),i.Jvt();break;case KU:i.jvt()&&(s=i.p_t(e,this.Smt)),i.$vt();break;case qU:i.jvt()&&(s=i.p_t(e,this.Smt)),i.Hvt(),i.emt(0,0)}return s}vmt(t,e,i){if(e>=128&&e<=135){const t=7&e;this.Tmt(t)}else{if(136===e){const e=t.fmt().Ix;return this.kmt(e,i)}if(137===e){const e=t.fmt().Ix;this.Emt(e,i)}else{if(138===e){const e=t.fmt().Ix;return this.xmt(e,i)}if(139===e){const e=t.fmt().Ix;return this.Rmt(e,i)}if(140===e){const e=t.fmt().Ix;return this.Imt(e,i)}if(143===e)return this.tr(i);if(144===e)this.Cmt(t);else if(145===e)this.Pmt(t);else if(146===e)this.emt(t);else if(151===e)this.Dmt(t);else if(e>=152&&e<=159){const s=(15&e)-8;this.Bvt(t,s,i)}}}return null}mmt(t,e){e>=8&&e<=15?t.RD(1):e>=16&&e<=23?t.RD(2):e>=24&&e<=31&&t.RD(3)}gmt(t,e){e>=128&&e<=135?t.RD(4):e>=136&&e<=143&&t.RD(5)}Tmt(t){this.Nmt[t]&&(this.Amt=this.Nmt[t])}*Mmt(t){for(let e=0;e<8;e++){1==(1&t)&&this.Nmt[e]&&(yield e),t>>=1}}kmt(t,e){let i=null;for(const s of this.Mmt(t)){const t=this.Nmt[s];t.jvt()&&(i=t.p_t(e,this.Smt)),t.Hvt()}return i}Emt(t,e){for(const i of this.Mmt(t)){const t=this.Nmt[i];t.jvt()||t.tmt(e),t.cmt()}}xmt(t,e){let i=null;for(const s of this.Mmt(t)){const t=this.Nmt[s];t.jvt()&&(i=t.p_t(e,this.Smt)),t.be()}return i}Rmt(t,e){let i=null;for(const s of this.Mmt(t)){const t=this.Nmt[s];t.jvt()?i=t.p_t(e,this.Smt):t.tmt(e),t.wh()}return i}Imt(t,e){let i=null;for(const s of this.Mmt(t)){const t=this.Nmt[s];t.jvt()&&(i=t.p_t(e,this.Smt)),this.Nmt[s]=void 0}return i}tr(t){const e=this.Imt(255,t);return this.Nb(),e}Nb(){this.Amt=void 0,this.Nmt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}Cmt(t){t.RD(1);const e=t.fmt().Ix;if(!this.Amt)return;const i=(128&e)>0,s=(64&e)>0;this.Amt.omt(i),this.Amt.nmt(s)}Pmt(t){const e=t.fmt().Ix,i=t.fmt().Ix;if(t.RD(1),!this.Amt)return;const s=3&e,n=(12&e)>>2,r=(48&e)>>4,o=3&i,h=(12&i)>>2,a=(48&i)>>4,u=this.Lmt(r,n,s),c=this.Lmt(a,h,o);this.Amt.smt(u),this.Amt.imt(c)}emt(t){const e=t.fmt().Ix,i=t.fmt().Ix;if(!this.Amt)return;const s=15&e,n=63&i;this.Amt.emt(s,n)}Dmt(t){t.RD(1),t.RD(1);const e=t.fmt().Ix;if(t.RD(1),!this.Amt)return;const i=3&e;this.Amt.amt(i)}Bvt(t,e,i){const s=void 0!==this.Nmt[e];if(!s){const t=new GU(e);t.tmt(i),this.Nmt[e]=t}const n=t.fmt().Ix,r=t.fmt().Ix,o=t.fmt().Ix,h=t.fmt().Ix,a=t.fmt().Ix,u=t.fmt().Ix,c=(32&n)>0,l=127&r,d=(128&r)>0,f=o,_=1+(15&h),v=(240&h)>>4,m=1+(63&a);s&&0===(7&u)||this.Nmt[e].hmt(),this.Nmt[e].Bvt(c,l,f,v,d,_,m),this.Amt=this.Nmt[e]}Lmt(t,e,i){const s={0:0,1:0,2:1,3:1};return JU[s[t]<<2|s[e]<<1|s[i]]}constructor(t){this.Smt=t,this.Nmt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.Amt=void 0}},zU=8,qU=12,YU=13,KU=14,jU=16,QU={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},JU=["black","blue","green","cyan","red","magenta","yellow","white"];r();var $U=class{Bmt(t){if(t.pw===Au.Tft){const e=63&t.Ix;return this.Omt=2*e-1,void(this.Fmt=[])}if(this.Fmt&&(this.Omt>0&&(this.Fmt.push(t),this.Omt--),0===this.Omt)){const t=new tG(this.Fmt);this.Vmt.push(t),this.Fmt=null,this.Omt=0}}Wmt(){return this.Vmt}Umt(){this.Vmt=[]}Nb(){this.Vmt=[],this.Fmt=[],this.Omt=0}constructor(){this.Vmt=[],this.Fmt=null,this.Omt=0}},tG=class{Gmt(){return this.Hmt<this.Zmt.length}Xmt(){return this.Hmt}fmt(){if(!this.Gmt())throw new A(Ja.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.Zmt[this.Hmt++]}RD(t){if(this.Hmt+t>this.Zmt.length)throw new A(Ja.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.Hmt+=t}constructor(t){this.Hmt=0,this.Zmt=t}},eG=class{Nb(){this.zmt=0,this.qmt=[],this.Ymt=[],this.Kmt.Nb(),this.tr(),this.jmt.forEach((t=>{t.Nb()}))}tr(){this.Qmt=0,this.Jmt=0,this.$mt.forEach((t=>{t.tr()}))}tgt(t,e){if(t.xft){const i=t.Ift,s=t.Cft,n=t.pw;n===Au.bft||n===Au.Aft?this.qmt.push({avt:e,pw:n,Svt:i,ovt:s,egt:this.qmt.length}):this.igt&&(this.Ymt.push({avt:e,pw:n,Ix:i,egt:this.Ymt.length}),this.Ymt.push({avt:e,pw:Au.Sft,Ix:s,egt:this.Ymt.length}))}}Zz(){const t=[];this.qmt.sort(((t,e)=>t.avt-e.avt||t.egt-e.egt)),this.Ymt.sort(((t,e)=>t.avt-e.avt||t.egt-e.egt));for(const e of this.qmt){const i=this.sgt(e);i&&t.push(i)}for(const t of this.Ymt)this.Kmt.Bmt(t);const e=this.Kmt.Wmt();for(const i of e){const e=this.ngt(i);t.push(...e)}return this.Kmt.Umt(),this.qmt=[],this.Ymt=[],t}sgt(t){const e=t.pw;if(OU.Cvt(t.Svt)){const i=t.Svt>>3&1;0===e?this.Qmt=i:this.Jmt=i}const i="CC"+(e<<1|(e?this.Jmt:this.Qmt)+1),s=this.$mt.get(i);return 255===t.Svt&&255===t.ovt||!t.Svt&&!t.ovt||!this.rgt(t.Svt)||!this.rgt(t.ovt)?(++this.zmt>=45&&this.tr(),null):(this.zmt=0,t.Svt&=127,t.ovt&=127,t.Svt||t.ovt?OU.Cvt(t.Svt)?s.Avt(t):s.yvt(t.avt,t.Svt,t.ovt):null)}ngt(t){const e=[];try{for(;t.Gmt();){const i=t.fmt().Ix;let s=(224&i)>>5;const n=31&i;if(7===s&&0!==n){s=63&t.fmt().Ix}if(0!==s){if(!this.jmt.has(s)){const t=new XU(s);this.jmt.set(s,t)}const i=this.jmt.get(s),r=t.Xmt();for(;t.Xmt()-r<n;){const s=i.dmt(t);s&&e.push(s)}}}}catch(t){if(!(t instanceof A&&t.code===Ja.SUBTITLE_PARSE_ERROR))throw t}return e}rgt(t){let e=0;for(;t;)e^=1&t,t>>=1;return 1===e}constructor(){this.igt=!1,this.qmt=[],this.Ymt=[],this.Kmt=new $U,this.zmt=0,this.$mt=Yv({CC1:new OU(0,0),CC2:new OU(0,1),CC3:new OU(1,0),CC4:new OU(1,1)}),this.Qmt=0,this.Jmt=0,this.jmt=$h(),this.tr()}};r();var iG=class extends pe{constructor(t,e){super("ogt"),this.A_t=t,this.DO=e}},sG=Uh.cV(.1),nG=class extends Bo{hgt(t,e){this.agt.tgt(t,e)}Zz(){const t=this.agt.Zz();for(const e of t)this.yo(new iG(e.A_t,e.DO))}tr(){this.agt.Nb()}gn(){this.Bo(),this.agt.Nb()}constructor(){super(),this.agt=new eG}},rG=class extends nG{ugt(t,e,i,s){const n=this.cgt(t,s);this.lgt(n,e,i),this.Zz()}cgt(t,e){const i=t.slice().sort(RO),s=this.dgt;if(0===s.length)return i;if(0===i.length)return s;let n;const r=s[0].Ftt,o=s[s.length-1].Ftt,h=i[0].Ftt,a=s[0].nat===i[0].nat;if(o.yF(h).gF().mF(Uh.cV(2.5*e))&&a)n=s.concat(i).sort(RO);else if(h.dF(r)){let t=0;for(;t<s.length&&s[t].Ftt.mF(h);)t++;let e=!1,r=!1;for(let n=t,o=0;n<s.length&&o<i.length;n++,o++)oG(s[n],i[o])?e=!0:r=!0;const o=e&&!r,a=e&&r;!e&&r?n=s.concat(i).sort(RO):o?n=s.slice(0,t).concat(i):(n=i,a&&this.tr())}else n=i,this.tr();return n}lgt(t,e,i){for(let s=0;s<t.length;s++){const n=t[s],r=n.Ftt.uF();if(!i&&e-r<sG.uF())return void(this.dgt=t.slice(s));this.hgt(n,r)}this.dgt=[]}constructor(...t){super(...t),this.dgt=[]}};function oG(t,e){return t.Ftt.JO(e.Ftt)&&t.pw===e.pw&&t.Ift===e.Ift&&t.Cft===e.Cft}var wl=class extends Ex{fgt(t){return this._gt.get(t)}vgt(t){let e=this._gt.get(t.Vtt);return e||(e=this.mgt(t),this._gt.set(t.Vtt,e)),e}mgt(t){const e=[ln.gC],i=lU(t.Wtt);let s,n=i?i.l:"";t.ggt&&(n="easy "+n,e.push(ln.bC)),s=t.kh?"CC "+t.kh:n?"CC "+n:"CC"+t.Vtt;const r=this.oW.DI(Hi.YV,s,s,t.Wtt,!1,Vr.CEA608,void 0,e);return this.tt(r),r}Pot(t){const e=jo.qD(na(t));this.pgt=function(t){for(const e of t.Z){const t=mU(e),i=e.gN.RN.DN.MN.BN;let s=Ti(i,(t=>t.pw===Mt.kP));if(!s){const t=i.filter((t=>t.pw===Mt.tD)),e=Ti(t,(t=>{var e;return(null==(e=t.RM)?void 0:e.pw)===Mt.kP}));e&&(s=e.RM)}if(!s)continue;const n=AN(na(s.vM.Zk),new Ui),r=s.gM;return la({},t,{bN:e.WD.bN,vM:$g(s.vM.Zk),ji:s.ji,Ti:s.Ti,HM:r&&r.HM,GM:r&&r.GM,M1:n._0,wgt:n.v0,L1:n.m0,p0:n.p0[0],w0:n.w0[0]})}}(Ti(e,gU))}ddt(t,e,i,s,n,r){var o;if(!this.pgt)return;if(!S(this.ygt)&&Cs(this.ygt,e,1e-5))return;S(this.bgt)||Cs(this.bgt,e,.1)||this.Agt.tr();const h=function(t,e,i,s,n){const r=[],o=e.filter(_U),h=s(i);for(const e of o){const s=Ti(e.Z,(t=>t.WD.bN===i.bN));if(!s)continue;const o=s.WD.zM||0,u=s.WD.qM||0;let c=s.sL?s.sL.sL:fo.ZERO;var a;const l=e.QM+(null!=(a=s.WD.nL)?a:fo.ZERO).toNumber();for(const a of s.iL){let s=l+(a.QM||0);for(const l of a.uL){const a=l.Rb||u,d=new TN;d.S0(t,s,s+a);const f=Uh.TF(c,i.Dft);d.GV=n(l,e,i,f,Rc(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||o||h)}}}return r}(t,jo.qD(na(t)),this.pgt,fU,vU);var a;const u=null!=(a=null==(o=Km(h,(t=>t.GV.ct)))?void 0:o.GV.ct)?a:0,c=function(t){const e=[];for(const i of t)i.GV.Uft&&e.push(...i.GV.Uft),delete i.GV.Uft;for(let t=0;t<e.length;t+=1)e[t].JM=t;return e}(h),l=Uh.cV(s),d=[];for(const t of c)d.push(la({},t,{nat:n,Ftt:t.kft.yO(l)}));this.Agt.ugt(d,i,r,u),this.ygt=e,this.bgt=i}tr(){return this.Agt.tr(),this._gt.forEach((t=>{t.gn(),this.it(t),this.oW.lW(t)})),this._gt.clear(),this.pgt=void 0,this.ygt=NaN,this.bgt=NaN,super.tr()}gn(){return this.Agt.fn("ogt",this.Sgt),this.Agt.gn(),super.gn()}constructor(t){super(),this.pgt=void 0,this.ygt=NaN,this.bgt=NaN,this.Sgt=t=>{const e=this.vgt({Vtt:t.A_t,Wtt:""}),i=t.DO;for(const t of e.L.oC)i.LO<t.LO&&i.BO>t.LO?i.BO=t.LO:i.LO>t.LO&&t.BO>i.LO?t.BO=i.LO:i.LO===t.LO&&(i.BO=t.BO);e.uW(i)},this.oW=t,this._gt=$h(),this.Agt=new rG,this.Agt.yn("ogt",this.Sgt)}};r(),r();var hG=/(.*)=(.*)/,aG=/(.*):(.*)/;function uG(t){if(!t)return[];const e=[],i=t.trim().split(";");for(const t of i){const i=t.match(hG);if(i){const[,t,s]=i;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(aG)){const[,e,i]=t.match(aG);switch(e){case"lang":n=i;break;case"er":r=Boolean(Number(i))}}e.push({Vtt:Number(t),Wtt:n,ggt:r})}}return e}var cG={1:1,2:3,3:2,4:4},lG="urn:scte:dash:cc:cea-608:2015",dG="urn:scte:dash:cc:cea-708:2015";r(),r();var fG=class extends $s{ma(){return new _G(this.nat&&this.nat.ga)}constructor(t,e,i){super(Eo.iC),this.nat=t,this.uct=e,this.Tgt=i}},_G=class extends pe{constructor(t){super("activequalitychanged"),this.quality=t}},vG=[Mi.so,Zc.QI,Mi.$y],mG=class extends Bo{kgt(t){const e=this.Xdt.fat;for(const i of e.Ht.Uat)if(e.Cct.Ect(t,i))return i}gn(){this.Bo(),this.LB.fn(vG,this.Egt)}constructor(t,e){super(),this.Egt=t=>{const e=this.xgt,i=this.kgt(t.currentTime)||this.Xdt.oat;i&&e!==i&&(this.xgt=i,i.nat&&this.yo(new fG(i.nat,null==i?void 0:i.ga,null==e?void 0:e.ga)))},this.LB=t,this.LB.yn(vG,this.Egt),this.Xdt=e}};function gG(t,e,i){const s=new US(na(t),new Ui),n=St.FD(s,Mt.dP);if(!n)return;const r=St.DD(n.Zk),o=Ti(r,(t=>t.pw===Mt._P)),h=Ti(r,(t=>t.pw===Mt.uD));if(!o)return;const a=St.FD(o.Zk,Mt.mP);if(!a)return;const u=St.FD(a.Zk,Mt.wP);if(!u)return;const c=St.FD(u.Zk,Mt.yP);if(!c)return;const l=St.DD(c.Zk),d=Ti(l,(t=>t.pw===Mt.bP));if(!d)return;const f=St.ZD(d.Zk,Mt.bP,!1),_=new US(na(f.Zk),new Ui);_.RD(4);const v=St.DD(_),m=[];for(const t of v){if(t.pw===Mt.$P||t.pw===Mt.tD)return;t.pw===Mt.kP?m.push({Rgt:t,Igt:Mt.tD}):t.pw===Mt.zP&&m.push({Rgt:t,Igt:Mt.$P})}if(!function(t,e){return void 0===t&&void 0!==e&&e.length>0}(h,e)&&0===m.length)return;let g=_c(t);const p=Ti(r,(t=>t.pw===Mt.SP)),w=p?St.FD(p.Zk,Mt.TP):void 0,y=w?function(t){const e=t.Zk.Tb();return e.RD(4),e.RD(4),e.yD()}(w):1,b=Ti(l,(t=>t.pw===Mt.AP));b&&function(t,e,i){const s=rc(na(t),e),n=St.OD(s,new Ui),r=n.Zk;r.RD(4);const o=r.yD();for(let t=0;t<o;t++){r.RD(4),r.RD(4);const t=r.gD.Tb(),e=r.yD();Lg(r.Zk,t,e+i)}}(g,b,m.length),w&&function(t,e,i){const s=rc(na(t),e),n=St.OD(s,new Ui),r=n.Zk;r.RD(4),r.RD(4),Lg(r.Zk,r.gD,i)}(g,w,1),g=function(t,e,i,s){if(i||!s)return t;let n=t;for(const t of s)n=pG(n,e,new j(t));return n}(g,n,h,e);const A=[n,o,a,u,c,d];for(let t=m.length-1;t>=0;t--){const e=m[t];g=wG(g,e.Rgt,d,A,e.Igt,i)}return{Cgt:g,Pgt:{Dgt:m.length,XM:y}}}function pG(t,e,i){const s=rp(t,i,e.Zk.Zk.byteOffset+e.Zk.Zk.byteLength);return yG(rc(na(s),e),i.byteLength),s}function wG(t,e,i,s,n,r){const o=function(t,e,i){0;const s=t.Zk.Zk,n=kG(),r=new j(s.byteLength+n.byteLength),o=na(r);r.set(Th(s),0),yG(o,n.byteLength),Wg(o,new Ui(RG),e),r.set(n,s.byteLength),Wg(o,new Ui(s.byteLength+EG),t.pw),i&&Cg(o,new Ui(s.byteLength+xG),i);return r}(e,n,r),h=rp(t,o,e.Zk.Zk.byteOffset),a=na(h);!function(t,e){const i=St.OD(t,new Ui),s=St.ZD(i.Zk,Mt.bP,!1),n=na(s.Zk),r=n.getUint32(0);n.setUint32(0,r+e)}(rc(a,i),1);for(const t of s)yG(rc(a,t),o.byteLength);return h}function rc(t,e){const i=e.Zk.Zk.byteOffset;return pu(t,i,i+e.Zk.Zk.byteLength)}function yG(t,e){const i=new Ui,s=os(t,i);if(0===s);else if(1===s){i.Ab(4);const s=Qr(t,i.Tb());Bg(t,i,s.add(e))}else i.Sb(0),Lg(t,i,s+e)}r();var bG=class extends vo{start(t){this.NQ=t}transform(t){this.i$(t),this.Ngt()}flush(){this.n$(),this.Ngt()}d$(t){return t===Mt.eD}_$(t){let e=_c(Th(t.Zk.Zk));const i=St.OD(na(e),new Ui);e=AG(e,i,this.Mgt),this.Lgt.push(e)}m$(t){this.Lgt.push(t)}Ngt(){for(const t of function(t){if(t.length<2)return t;const e=[];let{buffer:i,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const o=t[r];i===o.buffer&&s+n===o.byteOffset?n+=o.byteLength:(e.push(new j(i,s,n)),({buffer:i,byteOffset:s,byteLength:n}=o))}return e.push(new j(i,s,n)),e}(this.Lgt))this.NQ.enqueue(t);Pn(this.Lgt)}constructor(t){super(),this.Lgt=[],this.Mgt=t}};function AG(t,e,i){let s=t;const n=St.DD(e.Zk);for(let t=n.length-1;t>=0;t--){const r=n[t];r.pw===Mt.sD&&(s=SG(s,r,e,i))}return s}function SG(t,e,i,s){const n=rc(na(t),e),r=St.OD(n,new Ui),o=St.DD(r.Zk),h=Ti(o,(t=>t.pw===Mt.nD));if(!h)return t;const a=h.Zk,u=a.gD.Tb(),c=a.yD(),{flags:l}=XS(c);a.RD(4),l.kb(Kh.BASE_DATA_OFFSET_PRESENT)&&a.RD(8);const d=a.gD.Tb();if(l.kb(Kh.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const e=os(a.Zk,d);return Lg(a.Zk,a.gD,e+s.Dgt),t}{Lg(a.Zk,u,c|Kh.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new j(4);na(n).setUint32(0,s.XM+s.Dgt);const r=a.Zk.byteOffset+d.tc;for(const t of o.filter((t=>t.pw===Mt.rD)))TG(t,n.byteLength);for(const s of[h,e,i])yG(rc(na(t),s),n.byteLength);return rp(t,n,r)}}function TG(t,e){const i=t.Zk,s=i.yD(),{flags:n}=XS(s);if(i.RD(4),n.kb(jh.DATA_OFFSET_PRESENT)){const t=i.Tb().yD();Lg(i.Zk,i.gD,t+e)}}var kG=gl((()=>new j([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),EG=16,xG=64,RG=4,IG=[sn.ua,Mi.Yy,Mi.Ky,Mi.Qy,Mi.vy],CG=class extends Bo{get Vdt(){return this.Wdt}get o(){return this.US}get n3(){return this.r3}get nt(){return this.Bgt}get Kdt(){return function(t){const e=29.97,i=1024,s=44100;return t===Io.cE?s/i:e}(this.r3)}get zdt(){return 1/this.Kdt}get Rt(){return Boolean(this.Wdt&&this.Wdt.Rt)}get NJ(){const t=this.Xdt?this.Xdt.fat.NJ.bct:ee.fB();return this.Ogt().KL(t)}get _R(){let t=this.Fgt();const e=this.Vgt;return void 0!==e&&t.HL().gr(e)&&(t=t.KL(ee.lB(e))),t}get mct(){return PV(this.Fgt(),this.NJ.KL(this.Wgt)).YL(2*this.zdt)}get Wgt(){const t=this.Vgt;if(t&&isFinite(t)){const e=this.Ugt.jn;if(isFinite(e)&&t<e)return new ee([t,e],[!1,!0])}return ee.fB()}get iI(){const t=this.Wdt;if(!t)return ee.lB(0);const e=t.lct.Qdt,i=t.lct.Jdt;if(void 0===i||void 0===e)return ee.lB(0);const s=i;let n=e>=t.lct.Yct.jn?_.max(e,this.jn):e;return n=_.max(s,n),ee.dB(s,n).HL()}get WG(){return this.mct.uB(this.yR)}get yct(){return this.Ugt.yct}get yR(){return this.LB.yR}get Cn(){return this.Wdt?this.Wdt.lct.Yct.Cn:NaN}get jn(){const t=this.Ggt(),e=this.Vgt;return void 0===t?NaN:void 0!==e?e:t}Ggt(){var t;return null==(t=this.Wdt)?void 0:t.lct.Yct.jn}get Ti(){return this.Ugt.Ti}get ji(){return this.Ugt.ji}get Hgt(){return this.Vgt}xat(){return void 0!==this.Xdt&&this.Xdt.xat}wct(){if(void 0===this.Vgt)return!1;const t=this.Fgt().HL(),e=t.JL(this.Vgt);return!(e<0)&&t.Cn(e)!==this.Vgt}i3(){const t=this.Ugt.yct,e=this.Fgt().Sn(t);this.Vgt=e.V>0?e.jn(e.V-1):0;const i=t.jn(0);isFinite(i)&&this.Vgt<i&&this.LJ(this.Vgt,i),this.Zgt()}async ddt(t,e,i,s){const n=i.Not.PV,r=this.Xgt(t,e,i,n,s),o=this.zgt(t,e,i,n,s),[h]=await Us([o,r]);return h}async Xgt(t,e,i,s,n){if(!Wh(i.Xq))return;let r;if(t.pw===Ut.pk){const e=t.Zk.Put(),i=await e.xk(n);r=new j(i)}else r=new j(t.Zk.aht);const o=[];if(void 0!==this.qgt&&(this.qgt.ddt(r,e.LO,s),o.push(this.qgt)),void 0!==this.Ygt){const t=i.qct(e);this.Ygt.ddt(r,e.LO,e.BO,s,i.nat,t),o.push(this.Ygt)}kx(this._R,o)}async zgt(t,e,i,s,n){var r;let o;if(ot(n),t.pw===Ut.pk){let e=t.Zk.Rk;this.Kgt&&(e=function(t,e){return t.pipeThrough(new Ho(new bG(e)))}(e,this.Kgt)),o={pw:Ut.pk,Zk:e}}else{let e=new j(t.Zk.aht);this.Kgt&&(e=function(t,e){let i=_c(t);const s=new US(na(i),new Ui),n=St.DD(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.pw===Mt.eD&&(i=AG(i,s,e))}return i}(e,this.Kgt)),o={pw:Ut.QQ,Zk:e}}const h={hit:e.LO,ct:e.ct,PV:s,L1:null==(r=i.nat)?void 0:r.TC},a=this.wot._R;await this.jgt(),await this.wot.l2(o,h,n);return function(t,e,i,s){let n,r,o=e.QL(t.HL());o=o.QL(i.QL(e)),!1;0===o.V?(n=s.BO,r=n):(n=o.Cn(0),r=o.jn(0));return{tdt:n,edt:r}}(a,this.wot._R,this.wot.o3,e)}async Pot(t,e,i){var s;ot(i),this.Ygt&&this.Ygt.Pot(new j(t.aht));let n=new j(t.aht);if(this.Qgt(e)){const t=this.Ugt.Jgt;let e,i=[];t&&(i=Ke(t.$gt,(t=>t.SG)),e=t.tpt.sU?uP(t.tpt.sU):void 0);const s=gG(n,i,e);s?(this.Kgt=s.Pgt,n=s.Cgt):this.Kgt=void 0}const r={pw:Ut.QQ,Zk:n};await this.jgt(),await this.wot._2(r,{L1:null==(s=e.nat)?void 0:s.TC},i)}ldt(t,e,i){return this.wot.jS(t,e,i)}LJ(t,e){this.wot.u3(t,e)}BJ(t,e){this.wot.l3(t,e)}Fgt(){return this.wot?this.wot._R:ee.fB()}Ogt(){return this.wot?this.wot.o3:ee.fB()}ept(){return this.wot?this.wot.jS(0,1/0):Promise.resolve()}ipt(){return this.wot&&(this.wot.fn(ss.KQ,this.Ds),this.wot=void 0),Promise.resolve()}async spt(t){var e;const i=Yh.klt(null!=(e=t.Cdt)?e:t.Uat,this.vlt).Xq;this.wot||(this.wot=this.Ugt.npt(i),this.wot.yn(ss.KQ,this.Ds),this.Slt=new VW(this.wot)),await this.jgt()}$n(t,e){const i=$t.Yw([e]);this.cW.Xw(),this.cW=i;const s=this.rpt(t,this.opt,i.Bw);return this.opt=s,s}hpt(t){if(qt(this.upt,Vr.CEA608))return;const e=t.lct.gdt;if(function(t){return t.some((t=>t.J6===lG||t.J6===dG))}(e)){this.Ygt=new wl(this.oW);const t=function(t){const e=[];for(const i of t)if(i.J6===lG){const t=CO(i.Ix);for(const i of t)e.push(i)}else if(i.J6===dG){const t=uG(i.Ix);for(const i of t)if(i.Vtt<=4){const t=cG[i.Vtt];e.push(la({},i,{Vtt:t}))}}return e}(e);for(const e of t)this.Ygt.vgt(e);this.Bgt.xG(this.Ygt.Z)}}async rpt(t,e,i){ot(i),e&&await e.catch(Bt),this.Wdt===t&&this.cpt||(await this.lpt(),ot(i),await this.ept(),ot(i),t&&await this.hW(t))}async lpt(){const t=this.Wdt;this.Wdt=void 0,this.cpt=!1,this.Vgt=void 0,t&&(t.fn(Eo.nC,this.dpt),t.Odt(!1),t.fn(Eo.NO_QUALITY,this.Ds)),this.fpt&&(this.fpt.gn(),this.fpt=void 0),this.Xdt&&(await this.Xdt.gn(),this.Xdt=void 0),this.Ygt&&(this.Bgt.DG(this.Ygt.Z),await this.Ygt.gn())}async hW(t){this.Wdt=t,this.hpt(t),t.yn(Eo.nC,this.dpt),t.yn(Eo.NO_QUALITY,this.Ds),await this.spt(t),this.Xdt=this._pt(t),this.Xdt.yn(IG,this.Ds),this.Xdt.yn("rat",this.Zgt),this.Xdt.vat=t.Cdt,this.fpt=new mG(this.LB,this.Xdt),this.fpt.yn(Eo.iC,this.kdt),t.Odt(!0),this.cpt=!0}_pt(t){return new FW(this,this.LB,this.LB,this.aW,this.dZ,this.vdt,this.Lut,this.Alt,this.vlt,this.Slt,this.Zlt,this.iH).uit(t)}async tr(t){this.cW.Xw(),this.opt&&(await this.opt.catch(Bt),this.opt=void 0),await this.lpt(),t||await this.ept(),await this.ipt()}async vpt(){await this.lpt()}Sdt(t){var e;null==(e=this.Vdt)||e.Sdt(t)}async ydt(t,e){var i,s;await this.Mat(),null==(i=this.Vdt)||i.ydt(e);const n=null==(s=this.Xdt)?void 0:s.fat.Cct.Sct(t);if(n&&n.V>0)for(let t=0;t<n.V;t++){var r;await(null==(r=this.wot)?void 0:r.jS(n.Cn(t),n.jn(t)))}await this.Bat()}mpt(t){const e=t.Ht.Cdt;if(void 0===e)return this.gpt(t);if(e.some((t=>this.Slt.hJ(t))))return this.gpt(t);this.yo(new pe("ppt"))}gpt(t){this.Xdt&&this.Wdt&&this.Wdt===t.Ht&&(this.Xdt.vat=this.Wdt.Cdt)}async Mat(t){this.Xdt&&await this.Xdt.Mat(t)}async Bat(t){this.Xdt&&await this.Xdt.Bat(t)}Dj(){const t=this._R.cB;return this.dZ.Dj(t)}jgt(){const t=this.Ugt.yct,e=_.max(0,t.Cn(0)-.1),i=t.jn(0)+.01;return this.wot.N2(e,i)}Qgt(t){if(!Wh(t.Xq))return!1;if(this.Ugt.K6)return!0;return void 0!==this.Ugt.Jgt}Oat(t){if(!vT(this.r3))return;const e=this.Xdt,i=t.Xdt;void 0!==e&&void 0!==i&&e.Oat(i,this.Cn,this.jn)}async gn(t){this.Bo();try{await this.tr(t),await this.vpt()}catch(t){}}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d){super(),this.Wdt=void 0,this.Xdt=void 0,this.cpt=!1,this.cW=new $t,this.opt=void 0,this.Vgt=void 0,this.wot=void 0,this.Slt=new WW,this.Kgt=void 0,this.Ygt=void 0,this.Bgt=new Wu([]),this.Zgt=()=>{!this.xat()&&this.wct()&&this.Ugt.Zgt()},this.kdt=t=>{this.Wdt.kdt(t),this.yo(new sU(t.uct,t.Tgt))},this.dpt=t=>{this.mpt(t)},this.US=function(){const t=PG;return PG+=1,t}(),this.r3=t,this.aW=s,this.dZ=n,this.Ugt=e,this.LB=i,this.Lut=r,this.oW=o,this.qgt=h,this.Alt=a,this.vlt=a?yT(t,a):void 0,this.Zlt=u,this.upt=c,this.vdt=l,this.iH=d}};var PG=0;var DG=class extends Bo{bj(t,e){return this.wpt(t,e)}async wpt(t,e){for(const e of t)this.ypt(e);await this.$n(e);for(const t of this.Apt.bpt)t.pw===Io.wk&&(t.Uat&&0!==t.Uat.length?await this.Spt.hW(t):this.yo(new tU("No supported representation found in the AdaptationSet with mimetype : "+t.pw)))}get TC(){return this.TO}get ct(){return this.LB.ct}Tpt(t){return new CG(t,this,this.LB,this.aW,this.dZ,this.Lut,this.oW,this.qgt,this.kpt,this.Zlt,this.upt,this.vdt,this.iH)}xat(){return this.dft.some((t=>t.xat()))}wct(){return 0!==this.dft.length&&this.dft.every((t=>t.wct()))}Zgt(){this.Ept()&&this.yo(new iU)}npt(t){if(Cl(t,"audio")){if(this.F2.K3)return this.F2.K3}else if(Cl(t,"video")&&this.F2.j3)return this.F2.j3;throw new g("Cannot allocate source buffer for mime type "+t)}xpt(t){t.yn([sn.ua,Mi.Zy,Mi.Yy,Mi.Ky,Mi.Qy,Mi.vy],this.Ds),t.yn(ss.KQ,this.Rpt),t.yn("ppt",this.Ds)}get Rt(){return this.dft.some((t=>t.Rt))}async Ipt(t){await Promise.all(this.dft.map((e=>e.gn(t)))),Pn(this.dft)}get ht(){return this.rO}get _R(){if(0===this.dft.length)return ee.fB();const t=this.dft.map((t=>t._R));let e=ee.dB(0,1/0);for(const i of t)e=e.Sn(i);if(0===e.V)return e;if(this.wct()){const t=e.Sn(this.yct);if(0===t.V)return e;const i=t.jn(t.V-1);let s=0;for(const t of this.dft)s=_.max(s,t.Hgt);i<=s&&(e=e.KL(new ee([i,s],[!0,!0])))}return e}get K6(){return this.LB.K6}get yR(){return this.LB.yR}get Jgt(){return this.Cpt}get jn(){if(this.Ppt){const t=this.ct;if(!S(t)&&t!==Lu)return t}if(!this.dft.length)return NaN;let t=0;for(const e of this.dft)t=_.max(t,e.jn);return t}get Ppt(){const t=this.Apt.ndt;if(t.pw===gn._W)return!1;const e=t.Dpt;return 0!==e.length&&this.Apt===e[e.length-1]}get iI(){if(!this.dft.length)return ee.fB();let t=new ee([0,1/0]);for(const e of this.dft)t=t.Sn(e.iI);if(t.V>0&&this.Ppt&&isFinite(this.ct)){const e=this.ct,i=t.jn(t.V-1);e>i&&(t=t.KL(ee.dB(i,e).HL()))}return t}get kc(){return this.Apt}get nt(){return this.Ul}get rt(){return this.hO}get ji(){return this.bu.ji}get Ti(){return this.bu.Ti}get WG(){const t=this.yR,e=this._R,i=e.JL(t);if(-1!==i)return{Cn:e.Cn(i),jn:e.jn(i)}}get yct(){const t=this.Apt.Cn,e=this.Ppt?1/0:this.Apt.jn;return ee.dB(t,e)}Ept(){if(this.xat())return!1;if(!this.wct())return!1;const t=this._R;if(0===t.V)return!1;const e=this.yR;if(this.Ppt)return t.Cn(t.V-1)<=e;{const i=t.Sn(this.yct);if(0===i.V)return!0;const s=i.Cn(i.V-1),n=i.jn(i.V-1)+.1;return s<=e&&e<=n}}get Npt(){return this.Mpt}async Mat(t){this.Mpt||(this.Mpt=!0,await Promise.all(this.dft.map((e=>e.Mat(t)))))}async Bat(t){this.Mpt&&(this.Mpt=!1,await Promise.all(this.dft.map((e=>e.Bat(t)))))}async gn(t){this.LB.fn(Mi.ib,this.Lpt),this.LB.fn(Mi.wy,this.Bpt),this.Bo(),this.Apt.fn(ge.eat,this.Ds),this.Opt.Xw(),this.opt&&(await this.opt.catch(Bt),this.opt=void 0),await this.Ipt(t),await this.Spt.gn(),this.rO.gn(),this.hO.gn(),this.Ul.gn(),this.Fpt()}ypt(t){this.Vpt.push(t),t.yn("Wpt",this.Upt);const e=t.pw===Io.cE?this.rO:this.hO;for(const i of t.Z)e.tt(i)}Gpt(t){const e=t.pw===Io.cE?this.rO:this.hO;for(const i of t.Z)e.it(i),i.gn();t.gn(),we(this.Vpt,t)}Fpt(){for(let t=this.Vpt.length-1;t>=0;t--)this.Gpt(this.Vpt[t])}get Hpt(){return this.Vpt.map((t=>t.Vdt)).filter(ne)}get Zpt(){return this.dft.map((t=>t.Vdt)).filter(ne)}$n(t,e){return this.Opt.Xw(),this.Opt=$t.Yw([e]),this.opt=go(this.zE(t,this.opt,this.Opt.Bw),this.Opt).catch(this.Xpt),this.opt}async zE(t,e,i){e&&await e.catch(Bt),ot(i);const s=[],n=this.dft.slice(),r=t.slice();Pn(this.dft);for(const t of n){const e=t.Vdt;e&&qt(r,e)?(this.dft.push(t),s.push(t.$n(e,i)),we(r,e)):(this.Ul.DG(t.nt),await t.gn(),ot(i))}for(const t of r){const e=this.Tpt(t.pat);this.Ul.xG(e.nt),this.dft.push(e),this.xpt(e),s.push(e.$n(t,i))}await Promise.all(s)}async uJ(t,e,i){this.F2!==i&&(this.F2=i,await this.Ipt(!1)),await this.$n(t),this.Cpt=e}async zpt(t){for(const e of this.dft){const i=e.Vdt;if(void 0!==i)for(const s of i.lct.Uat){(s.wG||[]).some((e=>e.sU&&_e(zo(t),uP(e.sU))))&&!s.Bdt&&(s.Bdt=!0,await e.ydt(s,s.nat),this.yo(new In(new ir(Ja.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions"))))}}}async qpt(t){for(const e of this.dft){const i=e.Vdt;if(void 0!==i)for(const s of i.Uat){const i=s.wG,n=s.nat;if(void 0===i||0===i.length||void 0===n)continue;const r=this.Ypt(i,t.fb);n.Hnt!==r&&(r?e.Sdt(n):await e.ydt(s,n))}}}Ypt(t,e){let i=!1;return e.Db(((e,s)=>{t.some((t=>t.sU&&_e(zo(s),uP(t.sU))))&&"usable"===e&&(i=!0)})),i}Oat(t){if(void 0===t)return;const e=t.Apt;if(this.Apt.Kpt===e||this.Apt.jpt===e)for(const e of this.dft){const i=Ti(t.dft,(t=>t.n3===e.n3));void 0!==i&&e.Oat(i)}}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d,f){var _,v;super(),this.rO=new Nn,this.hO=new Nn,this.Vpt=[],this.Opt=new $t,this.Mpt=!0,this.dft=[],this.opt=void 0,this.Rpt=Jr((()=>{this.yo(new K(this.yR))}),350),this.Upt=t=>{const e=t.Qpt.Vdt;if(e)for(const t of this.Vpt){var i;t.Vdt&&t.Vdt!==e&&t.pw===(null==(i=e.Edt)?void 0:i.pw)&&(t.fn("Wpt",this.Upt),t.Vdt.Rt=!1,t.yn("Wpt",this.Upt))}this.Ds(t)},this.Xpt=t=>{Se(t)||this.yo(new Wa(jy(t,Ja.MEDIA_LOAD_ERROR)))},this.Lpt=t=>{const e=t.S6;e&&this.zpt(e).catch(this.Xpt)},this.Jpt=t=>{this.qpt(t).catch(this.Xpt)},this.Bpt=t=>{const e=t.S6;if(e)for(const t of this.Zpt)for(const i of t.lct.Uat){const s=(i.wG||[]).some((t=>t.sU&&_e(zo(e),uP(t.sU))));i.Bdt&&s&&(i.Bdt=!1,i.nat&&t.Sdt(i.nat))}},this.aW=i,this.dZ=s,this.Lut=n,this.LB=t,this.TO=ai(),this.Vpt=[],this.Apt=o,this.Cpt=h,this.iH=f,this.oW=u,this.Spt=new $W(t,i,s,n,u,null==(v=null==r||null==(_=r.dash)?void 0:_.segmentRelativeVttTiming)||v),this.Ul=new Wu([this.Spt.nt]),this.Zlt=l,this.upt=d,this.Apt.yn(ge.eat,this.Ds),this.bu=a,this.F2=e,this.vdt=r.lowLatency,this.qgt=c,this.kpt=r.abr,this.LB.yn(Mi.ib,this.Lpt),this.LB.yn(Mi.wy,this.Bpt)}};r(),r(),r();var NG=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,MG=class t{static qD(e){const i=e.match(NG);if(!i)throw new g("The given value could not be parsed as a valid DateTimeInterval");const s=Number(i[1])||0,n=Number(i[2])||0,r=Number(i[3])||0,o=Number(i[4])||0,h=Number(i[5])||0,a=Number(i[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*o+60*h+a)}get Nft(){return Uh.cV(this.$pt,1e3)}twt(){return this.$pt}ewt(){return 1e3*this.$pt}constructor(t){this.$pt=t}};r();var LG=function(t){return t.iwt="progressive",t.swt="interlaced",t.Qk="unknown",t}({});r();var BG=class{uF(){return this.nwt/this.rwt}constructor(t,e){this.nwt=t,this.rwt=e}},OG=/^(?:true|false)$/i,FG=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function VG(t){if(void 0!==t)return MG.qD(t)}function WG(t){if(void 0===t)return;const e=t.match(FG);if(!e)throw new g("The given value could not be parsed as a valid Date");const[,i,s,n,r,o,h,a,u,c,l,d]=e,f=("-"===i?-1:1)*Number(s),v=Number(n)-1,m=Number(r),p=Number(o);let w=Number(h);const y=Number(a),b=Number("0."+(u||"")),A=_.round(1e3*b);if(c){w-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const T=new Date(Date.UTC(f,v,m,p,w,y,A));if(S(T.getTime()))throw new g("The given value could not be parsed as a valid Date");return T}function UG(t){if(!t)return;const e=/(\d+)-(\d+)/.exec(t);return e?[Ea(e[1]),Ea(e[2])]:void 0}function GG(t){if(void 0!==t){if(!S(Number(t)))try{return fo.fromString(t,!0)}catch(t){}throw new g("The given value could not be parsed as a valid unsigned long")}}function Ea(t){if(void 0===t)return;const e=Number(t);if(!S(e))return e;throw new g("The given value could not be parsed as a valid Number")}function HG(t){if(void 0===t)return;const e=t.split("/"),i=Number(e[0]),s=Number(e[1]||1);if(!S(i)&&!S(s))return new BG(i,s);throw new g("The given value could not be parsed as a valid frame rate")}function $e(t){if(void 0!==t){if(OG.test(t))return"true"===t.toLowerCase();if(!S(x(t)))return Boolean(x(t));throw new g("The given value could not be parsed as a valid Boolean.")}}function ZG(t){return{qu:t.Ux,owt:$e(t.Gx("availabilityTimeComplete")),hwt:Ea(t.Gx("availabilityTimeOffset"))}}function XG(t){return t.map(ZG)}function zG(t){const e=iH(t),i=function(t,e,i,s){let n=t.Hx(i,e);return void 0===n&&(n=t.Gx(s+":"+e)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=zE(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=op(n.Ux)),!s){const e=zE(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==e&&(s=function(t){const e=Da(t.Ux),i=new j([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=e.length,n=12+i.length+4+s,r=new ArrayBuffer(n),o=new j(r),h=new DataView(r),a=new Ui;Lg(h,a,n),Lg(h,a,1886614376),Lg(h,a,0),Cg(h,a,i),Lg(h,a,s),Cg(h,a,e),!1;return o.buffer}(e))}return{sU:i,t9:s,J6:e.J6,Ix:e.Ix}}function qG(t){return{awt:t.Gx("sourceURL"),iut:UG(t.Gx("range"))}}function YG(t,e){const i=t.Gx("d"),s=t.Gx("t"),n=Ea(t.Gx("r"));e.push({ct:i,LO:s,uwt:n})}function KG(t){return{Wut:t.Gx("index"),cwt:UG(t.Gx("indexRange")),gN:t.Gx("media"),lwt:UG(t.Gx("mediaRange"))}}function jG(t){const e=JG(t),i=function(t){const e=t.map(KG);return e.length>0?e:void 0}(t.Lx("SegmentURL"));return la({},e,{dwt:i,fwt:t.Gx("xlink:href"),_wt:t.Gx("xlink:actuate")})}function QG(t){const e=$e(t.Gx("availabilityTimeComplete")),i=Ea(t.Gx("availabilityTimeOffset")),s=UG(t.Gx("indexRange")),n=$e(t.Gx("indexRangeExact")),r=t.Lx("Initialization");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.Bx+" element can not have more than one Initialization element.");const o=1===r.length?qG(r[0]):void 0,h=GG(t.Gx("presentationTimeOffset")),a=t.Lx("RepresentationIndex");if(a.length>1)throw new g("The provided MPEG-DASH document's "+t.Bx+" element can not have more than one RepresentationIndex element.");return{owt:e,hwt:i,cwt:s,vwt:n,mwt:o,gwt:h,pwt:1===a.length?qG(a[0]):void 0,wwt:VG(t.Gx("timeShiftBufferDepth")),lN:Ea(t.Gx("timescale"))}}function JG(t){const e=QG(t),i=t.Lx("BitstreamSwitching"),s=i.length>0?qG(i[0]):void 0,n=Ea(t.Gx("duration")),r=t.Lx("SegmentTimeline");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.Bx+" element can not have more than one SegmentTimeline element.");const o=1===r.length?function(t){const e=[],i=t.Lx("S");for(const t of i)YG(t,e);return e}(r[0]):void 0;return la({},e,{ywt:s,ct:n,Not:o,bwt:Ea(t.Gx("startNumber")),Awt:Ea(t.Gx("endNumber"))})}function $G(t){return{Swt:function(t){if(!t)return;const e=t.split(/\s/);return e.length>1?(e.length=2,e.map(Ea)):1===e.length?e.map(Ea)[0]:void 0}(t.Gx("audioSamplingRate")),Urt:t.Gx("codecs"),Twt:$e(t.Gx("codingDependency")),wG:function(t){if(0!==t.length)return t.map(zG)}(t.Lx("ContentProtection")),kwt:function(t){return t.map(sH)}(t.Lx("EssentialProperty")),Ewt:function(t){return t.map(nH)}(t.Lx("SupplementalProperty")),Kdt:HG(t.Gx("frameRate")),Ti:Ea(t.Gx("height")),xwt:Ea(t.Gx("maxPlayoutRate")),Rwt:Ea(t.Gx("maximumSAPPeriod")),Xq:t.Gx("mimeType"),Iwt:t.Gx("profiles"),Cwt:t.Gx("sar"),Pwt:function(t){switch(t){case LG.iwt:case LG.swt:case LG.Qk:return t;default:return}}(t.Gx("scanType")),Dwt:t.Gx("segmentProfiles"),Nwt:Ea(t.Gx("startWithSAP")),ji:Ea(t.Gx("width"))}}function tH(t){const e=XG(t.Lx("BaseURL")),i=t.Lx("SegmentBase");if(i.length>1)throw new g("The provided MPEG-DASH document's "+t.kx+" element can not have more than one SegmentBase element.");const s=1===i.length?QG(i[0]):void 0,n=function(t){const e=t.map(jG);return e.length>0?e:void 0}(t.Lx("SegmentList")),r=t.Lx("SegmentTemplate");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.kx+" element can not have more than one SegmentTemplate element.");const o=1===r.length?function(t){return la({},JG(t),{Mwt:t.Gx("bitstreamSwitching"),Lwt:t.Gx("index"),Bwt:t.Gx("initialization"),Owt:t.Gx("media")})}(r[0]):void 0;return{Fwt:e,Vwt:s,Wwt:n,Uwt:o}}function eH(t){const e=$G(t),i=tH(t),s=Ea(t.Gx("bandwidth")),n=t.Gx("dependencyId"),r=t.Gx("id"),o=t.Gx("mediaStreamStructureId"),h=Ea(t.Gx("qualityRanking"));if(t.Lx("SegmentBase").length>1)throw new g("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return la({},e,i,{mG:s,Gwt:n,o:r,Hwt:o,Zwt:h})}function iH(t){return{J6:t.Gx("schemeIdUri"),Ix:t.Gx("value")}}function sH(t){return iH(t)}function nH(t){return iH(t)}function rH(t){return iH(t)}function oH(t){return iH(t)}function hH(t){var e;const i=$G(t),s=tH(t),n=function(t){return t.map(oH)}(t.Lx("Accessibility")),r=$e(t.Gx("bitstreamSwitching")),o=t.Gx("contentType"),h=Ea(t.Gx("group")),a=Ea(t.Gx("id")),u=(null==(e=t.Lx("Label")[0])?void 0:e.Ux)||"",c=t.Gx("lang"),l=Ea(t.Gx("maxBandwidth")),d=HG(t.Gx("maxFrameRate")),f=Ea(t.Gx("maxHeight")),_=Ea(t.Gx("maxWidth")),v=Ea(t.Gx("minBandwidth")),m=HG(t.Gx("minFrameRate")),p=Ea(t.Gx("minHeight")),w=Ea(t.Gx("minWidth")),y=t.Gx("par"),b=function(t){return t.map(eH)}(t.Lx("Representation"));if(0===b.length)throw new g("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const A=function(t){return t.map(rH)}(t.Lx("Role")),S=$e(t.Gx("segmentAlignment"))||!1,T=Ea(t.Gx("selectionPriority")),k=T||1,E=$e(t.Gx("subsegmentAlignment"))||!1;let x;try{x=Ea(t.Gx("subsegmentStartsWithSAP"))}catch(t){}return la({},i,s,{gdt:n,ywt:r,Ik:o,Edt:h,o:a,kh:u,gs:c,Xwt:l,zwt:d,qwt:f,Ywt:_,Kwt:v,Qwt:m,Jwt:p,$wt:w,tyt:y,Uat:b,nft:A,eyt:S,BH:k,iyt:E,syt:x,nyt:t.Gx("xlink:actuate")||"onRequest",ryt:t.Gx("xlink:href")})}function aH(t){const e=GG(t.Gx("presentationTime"))||fo.ZERO,i=GG(t.Gx("duration")),s=Ea(t.Gx("id")),n=function(t){const e=t.Wx,i={};for(let t=0;t<e.length;t++)i[e[t].l]=e[t].Ix;return i}(t),r=t.Ux;return{dL:e,ct:i,o:s,Wx:n,Zk:""!==r.trim()?r:t.Gx("messageData")||""}}function uH(t){return{ryt:t.Gx("xlink:href"),nyt:t.Gx("xlink:actuate"),J6:t.Gx("schemeIdUri"),Ix:t.Gx("value"),lN:Ea(t.Gx("timescale")),gwt:GG(t.Gx("presentationTimeOffset")),zq:t.Lx("Event").map(aH)}}function cH(t){const e=tH(t),i=t.Lx("AssetIdentifier");if(i.length>1)throw new g("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===i.length?function(t){return iH(t)}(i[0]):void 0,n=function(t){return t.map(hH)}(t.Lx("AdaptationSet")),r=$e(t.Gx("bitstreamSwitching")),o=VG(t.Gx("duration")),h=function(t){return t.map(uH)}(t.Lx("EventStream")),a=t.Gx("id"),u=VG(t.Gx("start")),c=(t.Lx("Subset"),t.Gx("xlink:href"));return la({},e,{oft:n,oyt:s,ywt:r,ct:o,hyt:h,o:a,Cn:u,nyt:t.Gx("xlink:actuate"),ryt:c})}function lH(t){const e=t.Gx("schemeIdUri");if(!e)return;return{J6:e,Ix:t.Gx("value")}}function dH(t,e){const i=WG(t.Gx("availabilityEndTime")),s=WG(t.Gx("availabilityStartTime")),n=XG(t.Lx("BaseURL")),r=t.Gx("id"),o=function(t){return t.map((t=>""+t.Ux))}(t.Lx("Location")),h=VG(t.Gx("maxSegmentDuration")),a=VG(t.Gx("maxSubsegmentDuration")),u=VG(t.Gx("mediaPresentationDuration")),c=(t.Lx("Metrics"),VG(t.Gx("minBufferTime")));if(!c)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=VG(t.Gx("minimumUpdatePeriod")),d=function(t){return t.map((t=>cH(t)))}(t.Lx("Period"));if(!d.length)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.Gx("profiles");if(!f)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=WG(t.Gx("publishTime")),v=VG(t.Gx("suggestedPresentationDelay")),m=VG(t.Gx("timeShiftBufferDepth")),p=function(t){switch(t){case gn.fW:case gn._W:return t;default:return}}(t.Gx("type")),w=function(t){const e=[];for(const i of t){const t=lH(i);t&&e.push(t)}return e}(t.Lx("UTCTiming")),y=function(t){if(0===t.length)return;const e=t[0],i=e.Lx("Latency");if(0===i.length)return;const s=function(t){const e=t[0],i=Ea(e.Gx("target"));if(void 0===i)return;const s=Ea(e.Gx("min")),n=Ea(e.Gx("max"));return{ayt:i,rV:s,nV:n}}(i);if(void 0===s)return;const n=function(t){if(0===t.length)return;const e=t[0],i=Ea(e.Gx("max")),s=Ea(e.Gx("min"));return{rV:s,nV:i}}(e.Lx("PlaybackRate"));return{uyt:s,zR:n}}(t.Lx("ServiceDescription"));return{cyt:i,lyt:s,Fwt:n,o:r,dyt:o,fyt:e,_yt:h,vyt:a,myt:u,gyt:c,pyt:l,Dpt:d,Iwt:f,wyt:_,yyt:v,wwt:m,pw:p,byt:w,Ayt:y}}var fH=class{Syt(t,e){return function(t,e){if(!t)throw new g("The provided MPEG-DASH document does not contain a valid MPD root element.");return dH(t,e)}(As.Tx(t).Yx,e)}};function _H(t){return{get bandwidth(){return t.mG},get codecs(){return t.Urt},get id(){return t.o},get uid(){return t.TC},get name(){return t.kh},get averageBandwidth(){return t.Tyt},get label(){return t.kh},set label(e){t.kh=xe(e)},get available(){return t.Hnt},get score(){return t.kyt},addEventListener(e,i){t.yn(e,i)},removeEventListener(e,i){t.fn(e,i)}}}function _l(t){return nh(_H(t),{get height(){return t.Ti},get width(){return t.ji},get frameRate(){return t.Kdt},get firstFrame(){return t.Eyt}})}function xl(t){return nh(_H(t),{get audioSamplingRate(){return t.Swt}})}r(),r(),r(),r(),r(),r(),r(),r();var vH=class extends pe{constructor(t){super("update"),this.quality=t}},mH=class extends Bo{get kh(){return this.kO}set kh(t){this.kO!==t&&(this.kO=t,this.yo(new vH(this.ga)))}get Tyt(){}get Hnt(){return this.xyt}get kyt(){}sW(){this.xyt=!1,this.yo(new vH(this.ga))}iW(){this.xyt=!0,this.yo(new vH(this.ga))}constructor(t,e,i,s,n){super(),this.o=t,this.mG=e,this.Urt=i,this.Ryt=n,this.TC=yk(),this.kO=s||"",this.xyt=!0}},gH=class extends mH{get ga(){return this.Za||(this.Za=_l(this)),this.Za}constructor(t,e,i,s,n,r,o,h,a=0){super(t,e,i,s,n),this.Kdt=r,this.ji=o,this.Ti=h,this.Eyt=a,this.Za=void 0}},pH=class extends mH{get ga(){return this.Za||(this.Za=xl(this)),this.Za}constructor(t,e,i,s,n,r){super(t,e,i,s,n),this.Swt=r,this.Za=void 0}};r(),r();var xu=class extends Bo{get Iyt(){const t=this.Cyt();return null==t?void 0:t.Cn}get Pyt(){const t=this.Cyt();return null==t?void 0:t.jn}constructor(...t){super(...t),this.Dyt=t=>{this.yo(t)}}},wH=class extends xu{get lct(){return this.Dat}get Swt(){var t;return null!=(t=this.Nyt.Zk.Swt)?t:this.lct.Swt}get mG(){return this.Nyt.Zk.mG||0}get Urt(){const t=this.Nyt.Zk;return t.Urt?[t.Urt]:this.lct.Urt}get Myt(){const t=this.Nyt.Zk;return t.Urt?[t.Urt]:[]}get dp(){return this.Nyt.Zk.Urt||this.lct.dp}get Twt(){return this.Nyt.Zk.Twt||this.lct.Twt}get wG(){return this.Nyt.Zk.wG||this.lct.wG}get Ik(){return this.Xq+'; codecs="'+this.dp+'"'}get kwt(){const t=this.Nyt.Zk;return t.kwt.length?t.kwt:this.lct.kwt}get ga(){return this.Za||(this.Za=function(t){return{get id(){return t.o},get type(){return t.pw},get bandwidth(){return t.mG},get width(){return t.ji},get height(){return t.Ti},get frameRate(){var e,i;return null!=(i=null==(e=t.Kdt)?void 0:e.uF())?i:NaN},get audioSamplingRate(){return t.Swt}}}(this))}get Kdt(){var t;return null!=(t=this.Nyt.Zk.Kdt)?t:this.lct.Kdt}get Ti(){return this.Nyt.Zk.Ti||this.lct.Ti}get o(){return this.Nyt.Zk.o||""}get adt(){return this.Lyt}set adt(t){this.Lyt=t}get hdt(){const t=this.Nyt.Byt();if(t)return{qu:t.qu,iut:t.iut,AE:this.ndt.AE}}get xwt(){return this.Nyt.Zk.xwt||this.lct.xwt||1}get Rwt(){return this.Nyt.Zk.Rwt||this.lct.Rwt}get ndt(){return this.Yct.ndt}get Xq(){return this.Nyt.Zk.Xq||this.lct.Xq}get Yct(){return this.lct.Yct}get Iwt(){return this.Nyt.Zk.Iwt||this.lct.Iwt}get nat(){return this.Oyt}get Cwt(){return this.Nyt.Zk.Cwt||this.lct.Cwt}get Pwt(){return this.Nyt.Zk.Pwt||this.lct.Pwt}get Fyt(){return this.Nyt.Fyt}get Dwt(){return this.Nyt.Zk.Dwt||this.lct.Dwt}get Not(){return this.Nyt.Not}get Nwt(){return this.Nyt.Zk.Nwt||this.lct.Nwt}get pw(){const t=this.Xq.split("/")[0];return"application"===t||"text"===t||yx(this.Xq,this.Urt)?Io.wk:"video"===t?Io.lE:"audio"===t?Io.cE:"image"===t?Io.dE:Io.Qk}get ji(){return this.Nyt.Zk.ji||this.lct.ji}get Jct(){return this.Vyt}set Jct(t){this.Vyt=t}get Bdt(){return this.Wyt}set Bdt(t){this.Wyt=t}clt(t){const e=zn(t)?this.Nyt.Uyt(t):this.Nyt.clt(t);return{qu:e.qu,iut:e.iut,AE:this.ndt.AE}}Gyt(){return this.Nyt.Gyt()}Cyt(){return this.Nyt.Cyt()}Hyt(){return this.Nyt.Hyt()}tlt(t){return this.Nyt.tlt(t)}ilt(t,e,i){return this.Nyt.ilt(t,this.ndt.AE,e,i)}zlt(t){return zn(t)?this.Not.Zyt(t,this.Nyt):this.Not.zlt(t)}qct(t){return zn(t)?this.Not.Xyt(t,this.Nyt):this.Not.qct(t)}gn(){this.Nyt.fn(ge.Jht,this.Dyt)}constructor(t,e){if(super(),this.Za=void 0,this.Lyt=void 0,this.Vyt=!1,this.Wyt=!1,this.Dat=t,this.Nyt=e,this.Nyt.yn(ge.Jht,this.Dyt),this.pw===Io.lE){var i,s;const t=null!=(s=null==(i=this.Kdt)?void 0:i.uF())?s:NaN;this.Oyt=new gH(this.o,this.mG,this.dp,"","",t,this.ji,this.Ti)}else this.pw===Io.cE?this.Oyt=new pH(this.o,this.mG,this.dp,"","",this.Swt):this.Oyt=void 0}},yH=class extends xu{get gdt(){return this.Nyt.Zk.gdt}get Swt(){var t;return null!=(t=this.Nyt.Zk.Swt)?t:-1}get Urt(){if(this.Nyt.Zk.Urt)return[this.Nyt.Zk.Urt];{const t=[];for(const e of this.Uat)e.Myt.length&&-1===t.indexOf(e.dp)&&t.push(e.dp);return t}}get dp(){return this.Urt.join()}get Twt(){return this.Nyt.Zk.Twt}get wG(){return this.Nyt.Zk.wG}get Ik(){return this.Xq+'; codecs="'+this.dp+'"'}get kwt(){return this.Nyt.kwt}get Ewt(){return this.Nyt.Ewt}get Kdt(){return this.Nyt.Zk.Kdt}get Edt(){return this.Nyt.Zk.Edt}get Ti(){return this.Nyt.Zk.Ti||0}get o(){return this.Nyt.Zk.o}get kh(){return this.Nyt.Zk.kh||""}get xwt(){return this.Nyt.Zk.xwt}get Rwt(){return this.Nyt.Zk.Rwt}get ndt(){return this.Yct.ndt}get Xq(){return this.Nyt.Zk.Xq||this.Pdt[0].Xq}get Yct(){return this.Apt}get Iwt(){return this.Nyt.Zk.Iwt}get Uat(){return this.Pdt}get nft(){return this.Nyt.Zk.nft||[]}get Cwt(){return this.Nyt.Zk.Cwt}get Pwt(){return this.Nyt.Zk.Pwt}get Dwt(){return this.Nyt.Zk.Dwt}get BH(){return this.Nyt.Zk.BH}get Nwt(){return this.Nyt.Zk.Nwt}get pw(){const t=(this.Nyt.Zk.Ik||this.Xq).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||yx(this.Xq,this.Urt)?Io.wk:"video"===t?Io.lE:"audio"===t?Io.cE:"image"===t?Io.dE:Io.Qk}get ji(){return this.Nyt.Zk.ji||0}get Wtt(){return this.Nyt.Zk.gs||""}get Jdt(){return this.Iyt}get Qdt(){const t=this.Jdt,e=this.Pyt;if(void 0===t||void 0===e)return;const i=_.min(e,this.ndt.zyt);return _.max(t,i)}async Yn(t,e){if(0===this.Pdt.length){const i=this.Nyt.Uat.map((i=>this.qyt(i,t,e)));this.Pdt=(await Promise.all(i)).filter(ne)}this.Yyt()}async qyt(t,e,i){const s=new wH(this,t),n=await e(s);if(ot(i),n)return s}Yyt(){if(!this.Pdt.length)throw new g("Detected an AdaptationSet without any supported Representations.")}Cyt(){return this.Nyt.Cyt()}Hyt(){return this.Nyt.Hyt()}gn(){this.Nyt.fn(ge.Jht,this.Dyt);for(const t of this.Pdt)t.gn();Pn(this.Pdt)}constructor(t,e){super(),this.Pdt=[],this.Apt=t,this.Nyt=e,this.Nyt.yn(ge.Jht,this.Dyt)}};function bH(t,e){const i=[];for(const s of e)for(const e of t)i.push(As.Ah(e,s));return i}r(),r(),r(),r(),r(),r(),r();var Sl=class{Kyt(t){const e=t-this.Apt.Cn;if(e<0||e>=this.Apt.ct)return;const i=this.jyt();return void 0!==i&&Cs(i,e,1e-5)?this.Qyt():this.Jyt(e)}$ct(t){const e=t-this.Apt.Cn;if(!(e<0))return this.$yt(_.min(e,this.Apt.ct))}Qyt(){return this.tbt(0)}ebt(){const t=this.Apt.ct;if(isFinite(t))return this.$yt(t)}get ibt(){return this.Apt.nbt.sbt&&void 0!==this.rbt()}Gyt(t){if(this.Apt.nbt.pw===gn._W){if(this.ibt){const e=this.Qyt(),i=this.rbt();if(void 0===e||void 0===i)return;return{obt:t,hbt:e,abt:i}}const e=this.ubt(t);if(!e)return;return{obt:t,hbt:this.cbt(t),abt:e}}{0;const e=this.Qyt();if(e)return{obt:t,hbt:e,abt:this.ebt()}}}Hyt(t,e){if(e){let t=this.rdt(e.hbt);const i=this.olt(e.abt);if(i){const e=this.odt(i);(!t||e.getTime()<t.getTime())&&(t=e)}return t}{const e=this.Qyt();if(e){const i=this.odt(e);if(t.getTime()<i.getTime())return i}const i=this.Apt.nbt.lyt;return t.getTime()<i.getTime()?i:void 0}}ubt(t){const e=(t.getTime()-this.Apt.nbt.lyt.getTime())/1e3-this.Apt.Cn+this.lbt;let i=this.$yt(Zs(e,0,this.Apt.ct));if(!i)return;if(i=this.dbt(i,t),!i)return;let s=this.olt(i);for(;s&&this._dt(s,t);)i=s,s=this.olt(i);return i}cbt(t){let e;const i=this.fbt.wwt;if(i){const s=(t.getTime()-this.Apt.nbt.lyt.getTime())/1e3-this.Apt.Cn-i.twt();e=this.$yt(Zs(s,0,this.Apt.ct)),e||(e=this.Qyt())}else e=this.Qyt();if(!e)return;if(e=this.dbt(e,t),!e)return;let s=this.rlt(e);for(;s&&this._dt(s,t);)e=s,s=this.rlt(e);return e}dbt(t,e){let i=t;for(;i&&this.odt(i).getTime()>e.getTime();)i=this.rlt(i);if(!i)return;const s=this.rdt(i);if(s&&s.getTime()<=e.getTime()){const t=this.rlt(i);for(t&&this._dt(t,e)&&(i=t);i;){if(this.odt(i).getTime()>e.getTime())return;if(this._dt(i,e))break;i=this.olt(i)}if(!i)return}return i}_dt(t,e){if(this.ibt)return!0;if(this.odt(t).getTime()>e.getTime())return!1;const i=this.rdt(t);return!(i&&e.getTime()>=i.getTime())}_bt(t,e){if(this.ibt)return!0;if(this.vbt(t).getTime()>e.getTime())return!1;const i=this.rdt(t);return!(i&&e.getTime()>=i.getTime())}mbt(t,e,i){const s=to(e,this.RA)+this.Apt.Cn;return{Wut:t,gbt:e,LO:s,ct:i,BO:s+i}}vbt(t){return this.Apt.nbt.pw===gn._W?new Date(this.Apt.nbt.lyt.getTime()+1e3*(t.LO+t.ct)):this.Apt.nbt.lyt}odt(t){const e=this.vbt(t);return this.Apt.nbt.pw===gn._W?new Date(e.getTime()-1e3*this.lbt):e}rdt(t){let e=1/0;if(this.Apt.nbt.pw===gn._W){const i=this.fbt.wwt;i&&(e=this.vbt(t).getTime()+1e3*t.ct+i.ewt())}const i=this.Apt.nbt.cyt;return i&&(e=_.min(e,i.getTime())),e===1/0?void 0:new Date(e)}pbt(t,e){return t.Wut+e}get PV(){return this.Apt.Cn-to(this.wbt,this.RA)}get gwt(){return to(this.wbt,this.RA)}tlt(t){return!1}ilt(t,e,i,s,n){const r=this.ybt(t);if(!r)return Promise.reject(new g("Invalid segment"));const o=this.bbt(r.Wut,e);return o?Promise.resolve(o):hu(this.Abt(r.Wut,e,i,s),n)}bbt(t,e){}Abt(t,e,i,s){return Promise.reject(new g("Not supported"))}rlt(t){const e=this.ybt(t);if(e)return this.tbt(e.Wut-1)}olt(t){const e=this.ybt(t);if(e)return this.tbt(e.Wut+1)}ybt(t){const e=this.tbt(t.Wut);if(e&&e.LO===t.LO)return e;const i=this.Kyt(t.LO);return i&&i.LO===t.LO?i:void 0}Sbt(t,e){const i=this.slt(t);if(!i||!this.tlt(i.Wut))return;const s=this.bbt(i.Wut,e);return s?s.Sbt(t):void 0}slt(t){return this.tbt(t.Tbt)}zlt(t){const e=this.ybt(t);return!!e&&0===e.Wut}Zyt(t,e){const i=this.Sbt(t,e);return!!i&&0===i.Vut}qct(t){const e=this.ybt(t);if(!e)return!1;const i=this.ebt();return!!i&&e.Wut===i.Wut}Xyt(t,e){const i=this.Sbt(t,e);if(!i)return!1;const s=this.ebt();if(!s||i.Tbt!==s.Wut)return!1;const n=this.bbt(i.Tbt,e);return i.Vut+1===n.V}Ww(){}constructor(t,e){this.Apt=t,this.fbt=e,this.RA=e.lN,this.lbt=e.hwt,this.wbt=e.gwt}},AH=class extends Sl{tbt(t){if(t<0)return;const e=this.kbt.multiply(t),i=to(e,this.RA),s=this.Apt.ct;if(i>=s)return;const n=this.Ebt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.mbt(t,e,s-i)}return isFinite(s)&&i+this.xbt>s?this.mbt(t,e,s-i):this.mbt(t,e,this.xbt)}jyt(){return 0}Jyt(t){const e=_.floor(t/this.xbt),i=this.Ebt();return void 0!==i&&e>=i?this.tbt(i):this.tbt(e)}$yt(t){if(t>=this.Apt.ct){const t=_.ceil(this.Apt.ct/this.xbt)-1,e=this.Ebt();return void 0!==e&&t>=e?this.tbt(e):this.tbt(t)}return this.Jyt(t)}Ebt(){const t=this.fbt.Awt;var e;if(void 0!==t)return t-(null!=(e=this.fbt.bwt)?e:1);const i=this.fbt.Rbt;return void 0!==i&&i>0?i-1:void 0}rbt(){if(isFinite(this.Apt.ct))return this.ebt()}Ibt(t,e){return this.kbt.multiply(t.Wut+(e-1))}Yn(){}constructor(t,e){super(e,t);const i=t.Cbt,s=t.ct;if(void 0===i||void 0===s)throw new g("MultipleSegmentBase does not have a segment duration specified.");this.kbt=i,this.xbt=s}};function SH(t,e,i){const s=e.length;if(0===s)return-1;let n=0,r=s-1,o=t.Pbt(e[n]),h=t.Dbt(e[r]);for(;n<=r&&t.Nbt(o,i)<=0&&t.Nbt(i,h)<0;){const a=n+_.floor(t.Mbt(i,o,h)*(r-n)),u=e[a],c=t.Pbt(u),l=a+1<s?t.Pbt(e[a+1]):t.Dbt(u);if(t.Nbt(l,i)<=0)n=a+1,o=l;else{if(!(t.Nbt(i,c)<0))return a;r=a-1,h=c}}return-1}function TH(t,e){return SH(kH.Lg,t,e)}r(),r(),r();var kH=class t{static get Lg(){return null!=this.Wrt||(this.Wrt=new t),this.Wrt}Pbt(t){return t.LO}Dbt(t){return t.BO}Nbt(t,e){return t.compare(e)}Mbt(t,e,i){return t.subtract(e).toNumber()/i.subtract(e).toNumber()}},EH=.01,xH=class extends Sl{tbt(t){if(!(t<0))return t<this.Lbt.length?this.Lbt[t].Nut:this.Bbt(t-this.Lbt.length)}jyt(){if(this.Lbt.length>0)return to(this.Lbt[0].LO,this.RA)}Jyt(t){if(this.Obt&&to(this.Obt.LO,this.RA)<=t){const e=to(this.Obt.LO,this.RA),i=to(this.Obt.ct,this.RA),s=_.floor((t-e)/i);return this.Bbt(s)}if(this.Lbt.length>0&&Cs(t,to(this.Lbt[0].LO,this.RA),1e-5))return this.Lbt[0].Nut;const e=TH(this.Lbt,fo.fromNumber(t*this.RA));return e<0?void 0:this.Lbt[e].Nut}$yt(t){if(!this.Obt&&this.Lbt.length>0){const e=this.Lbt[this.Lbt.length-1];if(function(t,e,i){return Fm(t,e,i)>=0}(t,to(e.BO,this.RA),1e-5))return e.Nut}const e=this.jyt();return e&&t<e?this.Lbt[0].Nut:this.Jyt(t)}rbt(){return isFinite(this.Apt.ct)?this.ebt():this.tbt(this.Lbt.length-1)}Ibt(t){return this.Fbt(t)}Bbt(t){if(!this.Obt)return;const e=this.Obt.LO,i=this.Obt.ct,s=e.add(i.multiply(t)),n=to(s,this.RA),r=this.Apt.ct;if(n>=r)return;const o=this.Lbt.length+t,h=_.min(to(i,this.RA),n+r);return this.mbt(o,s,h)}Fbt(t){return t.gbt.add(this.wbt)}Yn(){const t=this.fbt.Zk.Not;if(!t)throw new g("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.Vbt(t)}Vbt(t){const e=this.wbt;this.Wbt(t,e);const i=this.Ubt(t);this.Gbt(t,e,i.Hbt,i.Tbt)}Wbt(t,e){const i=this.Lbt;if(0===t.length)Pn(i);else{const s=t[0];let n=0;const r=to(s.LO?fo.fromString(s.LO,!1).subtract(e):fo.ZERO,this.RA);for(;n<i.length&&to(i[n].LO,this.RA)<r-EH;)n++;n>0&&i.splice(0,n)}}Ubt(t){const e=this.Lbt,i=this.ygt;let s=0,n=0;for(;s<t.length&&n<e.length;){const r=t[s].uwt||0;if(r<0)break;const o=n+r;if(o>=e.length)break;if(e[o].LO.greaterThanOrEqual(i))break;if(e[n].Nut.Wut===n)n=o+1;else for(;n<=o;)e[n].Nut.Wut=n,n++;0,s++}return{Hbt:s,Tbt:n}}Gbt(t,e,i,s){const n=this.Lbt;let r,o=i,h=s;for(;o<t.length;){const i=t[o],s=fo.fromString(i.ct,!1),a=i.uwt||0;let u;if(i.LO){if(u=fo.fromString(i.LO,!1).subtract(e),h>0){const t=n[h-1];t.BO.greaterThan(u)&&(t.ct=u.subtract(t.LO),t.BO=t.LO.add(t.ct))}}else u=h>0?n[h-1].BO:fo.ZERO;if(a<0){if(o+1===t.length){r={LO:u,ct:s};break}const i=fo.fromString(t[o+1].LO,!1).subtract(e);for(;u.lessThan(i);){const t=u.add(s);this.Zbt(n,h,u,s,t),u=t,h++}}else{const t=h+a;for(;h<=t;){const t=u.add(s);this.Zbt(n,h,u,s,t),u=t,h++}}o++}h<n.length&&n.splice(h),n.length>0&&(this.ygt=n[n.length-1].LO),this.Obt=r}Zbt(t,e,i,s,n){if(e<t.length){const r=t[e];0,r.ct.equals(s)?r.Nut.Wut=e:t[e]={LO:i,ct:s,BO:n,Nut:this.mbt(e,i,to(s,this.RA))}}else t.push({LO:i,ct:s,BO:n,Nut:this.mbt(e,i,to(s,this.RA))})}constructor(t,e){super(e,t),this.Lbt=[],this.Obt=void 0,this.ygt=fo.ZERO,this.Yn()}};r();var RH=class{get Zk(){return this.yp}get hwt(){return this.yp&&void 0!==this.yp.hwt?this.yp.hwt:this.Xbt?this.Xbt.hwt:0}get gwt(){return this.yp&&void 0!==this.yp.gwt?this.yp.gwt:this.Xbt?this.Xbt.gwt:fo.ZERO}get wwt(){return this.yp&&void 0!==this.yp.wwt?this.yp.wwt:this.Xbt?this.Xbt.wwt:this.Yct.nbt.wwt}get lN(){return this.yp&&void 0!==this.yp.lN?this.yp.lN:this.Xbt&&this.Xbt.lN?this.Xbt.lN:1}get cwt(){return this.yp&&void 0!==this.yp.cwt?this.yp.cwt:this.Xbt?this.Xbt.cwt:void 0}get mwt(){return this.yp&&void 0!==this.yp.mwt?this.yp.mwt:this.Xbt?this.Xbt.mwt:void 0}get Not(){return this.zbt||(this.zbt=this.qbt()),this.zbt}qbt(){if(this.Ybt=this.Kbt(),this.Ybt)return this.Ybt;if(this.Xbt)return this.Xbt.Not;throw new g("Missing media segment information.")}Byt(t){const e=this.mwt;if(e){return{qu:(void 0!==e.awt?As.Ah(e.awt,t.Fwt[0]):t.Fwt[0]).href,iut:e.iut}}const i=this.cwt;if(i)return{qu:t.Fwt[0].href,iut:[0,i[0]-1]}}Yn(t){this.yp=t,this.Ybt&&this.Ybt.Yn()}Ww(){this.Ybt&&(this.Ybt.Ww(),this.Ybt=void 0)}constructor(t,e,i){this.zbt=void 0,this.Ybt=void 0,this.Yct=t,this.Xbt=e,this.yp=i}},IH=class extends RH{get ct(){return void 0!==this.yp.ct?this.yp.ct/this.lN:this.Xbt&&CH(this.Xbt)?this.Xbt.ct:void 0}get Cbt(){return void 0!==this.yp.ct?fo.fromNumber(this.yp.ct):this.Xbt&&CH(this.Xbt)?this.Xbt.Cbt:void 0}get bwt(){return void 0!==this.yp.bwt?this.yp.bwt:this.Xbt&&CH(this.Xbt)?this.Xbt.bwt:void 0}get Awt(){return void 0!==this.yp.Awt?this.yp.Awt:this.Xbt&&CH(this.Xbt)?this.Xbt.Awt:void 0}Kbt(){return void 0!==this.yp.Not?new xH(this,this.Yct):void 0!==this.yp.ct?new AH(this,this.Yct):void 0}};function CH(t){return t instanceof IH}r();var PH=class{Mb(t){return this.jbt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((e,i,s,n)=>{if("$$"===e)return"$";const r=t[i];if(void 0===r)return e;if(void 0===s)return r.toString();let o=function(t,e){switch(e){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===o?e:(o=Uo(o,Number(s),"0"),o)}))}constructor(t){this.jbt=t}};var DH=class t extends IH{get Bwt(){return this.Qbt?this.Qbt:this.Xbt&&this.Xbt instanceof t?this.Xbt.Bwt:void 0}get Owt(){return this.Jbt?this.Jbt:this.Xbt&&this.Xbt instanceof t?this.Xbt.Owt:void 0}Byt(t){const e=this.Bwt;if(!e)return super.Byt(t);const i=e.Mb({Bandwidth:t.Zk.mG,RepresentationID:t.Zk.o});return{qu:As.Kp(i,t.Fwt[0])}}clt(t,e){var i;const s=null!=(i=e.Fyt.bwt)?i:1,n=this.Owt.Mb({Bandwidth:e.Zk.mG,Number:e.Not.pbt(t,s),RepresentationID:e.Zk.o,Time:e.Not.Ibt(t,s)});return{qu:As.Kp(n,e.Fwt[0])}}Uyt(t,e){}get Rbt(){}constructor(t,e,i){super(t,e,i),this.Qbt=i.Bwt?new PH(i.Bwt):void 0,this.Jbt=i.Owt?new PH(i.Owt):void 0}};r();var NH=class t extends IH{clt(t,e){const i=this.dwt[t.Wut],s=e.Fwt[0];let n;return n=i.gN?As.Ah(i.gN,s):s,{qu:n.href,iut:i.lwt}}Uyt(t,e){}get dwt(){return void 0!==this.yp.dwt?this.yp.dwt:this.Xbt&&this.Xbt instanceof t?this.Xbt.dwt:void 0}get Rbt(){var t;return null==(t=this.dwt)?void 0:t.length}};r(),r(),r(),r();var MH=class{Sbt(t){const e=this.nlt(t.Vut);if(e&&e.LO===t.LO)return e;const i=this.$bt(t.LO);return i&&i.LO===t.LO?i:void 0}},LH=class extends MH{get V(){return this.tAt.length}nlt(t){if(t>=0&&t<this.V)return this.eAt(this.tAt[t])}$bt(t){const e=this.iAt(t);if(this.tAt.length>0){const t=this.tAt[0];if(e<=to(t.LO,this.lN))return this.eAt(t)}const i=TH(this.tAt,fo.fromNumber(e*this.lN));if(!(i<0))return this.eAt(this.tAt[i])}elt(t){const e=this.iAt(t);if(this.tAt.length>0){const t=this.tAt[this.tAt.length-1];if(e>=to(t.BO,this.lN))return this.eAt(t)}return this.$bt(t)}eAt(t){const e=to(t.LO,this.lN)-this.gwt,i=e+this.sAt,s=to(t.ct,this.lN);return{Tbt:this.Tbt,Vut:t.Wut,LO:i,gbt:fo.fromNumber(e*this.lN),ct:s,BO:i+s,nAt:[t.rAt,t.oAt]}}iAt(t){return t-this.sAt+this.gwt}constructor(t,e,i,s,n){super(),this.Tbt=t,this.lN=e,this.sAt=i,this.gwt=s,this.tAt=n}};r(),r(),r();var BH=class t{Gmt(){return this.gD.tc<this.Zk.byteLength}hAt(){const e=this.aAt(),i=this.uAt(),s=this.gD.tc,n=this.Zk.byteLength;let r;r=t.cAt(i)?n-s:t.lAt(i);const o=s+r<=n?r:n-s,h=E(this.Zk,this.gD,o);return new FH(e,na(h))}aAt(){const t=this.uAt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let e=0;for(let i=0;i<t.length;i++)e=256*e+t[i];return e}uAt(){const t=hc(this.Zk,this.gD.Tb());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const e=8-(31-wg(t));return As.Bp(e<=8&&e>=1,"Incorrect log2 value"),E(this.Zk,this.gD,e)}static lAt(t){if(8===t.length&&224&t[1])throw new b("EBML variable sized integer is too large");let e=0;for(let i=0;i<t.length;i++){const s=t[i];if(0===i){e=s&(1<<8-t.length)-1}else e=256*e+s}return e}static cAt(t){for(const e of OH)if(_e(t,new j(e)))return!0;return!1}constructor(t){this.Zk=t,this.gD=new Ui}},OH=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],FH=class{dAt(){return this.fAt.byteOffset}_At(){return new BH(this.fAt)}vAt(){const t=this.fAt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.fAt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let e=0;for(let i=0;i<t;i++){e=256*e+this.fAt.getUint8(i)}return e}pQ(){if(4===this.fAt.byteLength)return this.fAt.getFloat32(0);if(8===this.fAt.byteLength)return this.fAt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,e){this.id=t,this.fAt=e}};function VH(t,e){const i=function(t){const e=new BH(na(t)),i=e.hAt();if(i.id!==UH)throw new b("Missing WebM EBML header");const s=e.hAt();if(s.id!==GH)throw new b("Missing WebM SegmentElement");const n=s.dAt(),r=function(t){const e=t._At();let i;for(;e.Gmt();){const t=e.hAt();if(t.id===HH){i=t;break}}if(!i)throw new b("Missing WebM InfoElement");return function(t){const e=t._At();let i,s=1e6;for(;e.Gmt();){const t=e.hAt();t.id===ZH?s=t.vAt():t.id===XH&&(i=t.pQ())}if(void 0===i)throw new b("Missing Duration in WebM InfoElement");const n=s/1e9,r=i*n;return{timecodeScale:n,duration:r}}(i)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(e),s=new BH(na(t)).hAt();if(s.id!==zH)throw new b("Missing WebM CuesElement");const n=function(t,e,i,s){const n=[],r=t._At();let o,h;for(;r.Gmt();){const t=r.hAt();if(t.id!==qH)continue;const i=WH(t);if(!i)continue;const s=i.unscaledTime,a=e+i.relativeOffset;void 0!==o&&n.push({Wut:n.length,LO:o,ct:s.subtract(o),BO:s,rAt:h,oAt:a-1}),o=s,h=a}if(void 0!==o){0;const t=fo.fromNumber(s/i);n.push({Wut:n.length,LO:o,ct:t.subtract(o),BO:t,rAt:h,oAt:void 0})}return n}(s,i.segmentOffset,i.timecodeScale,i.duration);return{lN:_.round(1/i.timecodeScale),mAt:n}}function WH(t){const e=t._At(),i=e.hAt();if(i.id!==YH)throw new b("Missing CueTime in WebM CuePointElement");const s=fo.fromNumber(i.vAt()),n=e.hAt();if(n.id!==KH)throw new b("Missing CueTrackPositions in WebM CuePointElement");const r=n._At();let o=0;for(;r.Gmt();){const t=r.hAt();if(t.id===jH){o=t.vAt();break}}return{unscaledTime:s,relativeOffset:o}}var UH=440786851,GH=408125543,HH=357149030,ZH=2807729,XH=17545,zH=475249515,qH=187,YH=179,KH=183,jH=241,QH=class extends Sl{tbt(t){if(0===t)return this.gAt}jyt(){return 0}Jyt(t){return this.gAt}$yt(t){return this.Jyt(t)}rbt(){return this.gAt}Ibt(t,e){return fo.ZERO}Gyt(t){const e=this.pAt(t);return e&&{obt:t,hbt:e,abt:e}}pAt(t){const e=this.gAt;return this._dt(e,t)?e:void 0}ubt(t){return this.pAt(t)}cbt(t){return this.pAt(t)}Yn(){}tlt(t){return 0===t&&void 0!==this.wAt}bbt(t,e){const i=e.Fwt[0].href;return this.yAt.get(i)}Abt(t,e,i,s){const n=e.Fwt[0].href;let r=this.bAt.get(n);if(void 0===r){const o=e.Xq,h=this.AAt.Bw;if(Wh(o))r=this.SAt(t,n,i,s,h);else{if(!Iy(o))throw new A(Ja.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+o);r=this.TAt(t,n,e,i,s,h)}this.bAt.set(n,r)}return r}async SAt(t,e,i,s,n){const r=this.wAt,o=await s.xlt(e,r,i,n),h=this.kAt(t,o);return this.yAt.set(e,h),h}kAt(t,e){const i=this.wAt,s=St.OD(new DataView(e),new Ui);if(s.pw!==Mt.lD)throw new g("Invalid segment index");const n=jo.sN(s.Zk),r=function(t,e){const i=[];let s=t.xL,n=e+t.RL.toNumber(),r=0;for(const e of t.CL){const t=e.AL,o=fo.fromNumber(e.ct),h=s.add(o);0===e.bL&&i.push({Wut:r++,LO:s,ct:o,BO:h,rAt:n,oAt:n+t-1}),n+=t,s=h}return i}(n,i[1]+1);return new LH(t,n.lN,this.Apt.Cn,to(this.wbt,this.RA),r)}async TAt(t,e,i,s,n,r){const o=i.Byt(),h=this.wAt,a=n.xlt(o.qu,o.iut,s,r),u=n.xlt(e,h,s,r),[c,l]=await Promise.all([a,u]),d=this.EAt(t,l,c);return this.yAt.set(e,d),d}EAt(t,e,i){const s=VH(new j(e),new j(i));return new LH(t,s.lN,this.Apt.Cn,to(this.wbt,this.RA),s.mAt)}Ww(){super.Ww(),this.AAt.Xw()}constructor(t,e){super(e,t),this.yAt=_u(),this.bAt=_u(),this.AAt=new $t,this.wAt=t.cwt,this.gAt=this.mbt(0,fo.ZERO,this.Apt.ct)}},JH=class extends RH{get bwt(){}clt(t,e){return{qu:e.Fwt[0].href}}Uyt(t,e){return{qu:e.Fwt[0].href,iut:t.nAt}}Kbt(){return new QH(this,this.Yct)}};r();var $H=class extends pe{constructor(){super(ge.Jht)}};r();var Tl=class extends Bo{get Zk(){return this.yp}get Fwt(){return this.xAt}RAt(){var t,e;return null!=(e=this.fbt)?e:null==(t=this.QE)?void 0:t.RAt()}IAt(t){const e=this.Yct,i=this.QE&&this.QE.RAt();this.yp.Uwt?this.fbt=new DH(e,i,this.yp.Uwt):this.yp.Wwt?this.fbt=new NH(e,i,this.yp.Wwt[0]):this.yp.Vwt?this.fbt=new JH(e,i,this.yp.Vwt):t&&!i&&(this.fbt=new JH(e,i,void 0))}CAt(t,e){this.yp=t,this.xAt=t.Fwt&&t.Fwt.length>0?bH(t.Fwt.map((t=>t.qu)),e):e.slice(),this.fbt&&(t.Uwt?this.fbt.Yn(t.Uwt):t.Wwt?this.fbt.Yn(t.Wwt[0]):t.Vwt&&this.fbt.Yn(t.Vwt))}Cyt(){var t;return null==(t=this.PAt)?void 0:t.DAt}Hyt(){var t;return null==(t=this.PAt)?void 0:t.NAt}MAt(t){const e=this.LAt,i=this.Yct.ct,s=this.PAt,n=this.BAt(t);s&&Cs(i,e,1e-5)&&sZ(s,n)||(this.LAt=i,this.PAt=n,this.yo(new $H))}Ww(){this.Bo(),this.fbt&&(this.fbt.Ww(),this.fbt=void 0)}constructor(t,e,i){super(),this.fbt=void 0,this.LAt=1/0,this.PAt=void 0,this.QE=e,this.CAt(t,i)}};function tZ(t){let e,i;for(const i of t){const t=i.Cyt();if(t){e=t.Cn;break}}if(void 0!==e){for(let e=t.length-1;e>=0;e--){const s=t[e].Cyt();if(s){i=s.jn;break}}return void 0!==i?{Cn:e,jn:i}:void 0}}function eZ(t){if(0===t.length)return;let e=0,i=1/0;for(const s of t){const t=s.Cyt();if(!t)return;if(e=_.max(e,t.Cn),i=_.min(i,t.jn),e>=i)return}return{Cn:e,jn:i}}function iZ(t){let e;for(const i of t){const t=i.Hyt();t&&(!e||t.getTime()<e.getTime())&&(e=t)}return e}function sZ(t,e){return function(t,e){return t&&e?t.getTime()===e.getTime():t===e}(t.NAt,e.NAt)&&function(t,e){return t&&e?Cs(t.Cn,e.Cn,1e-5)&&Cs(t.jn,e.jn,1e-5):t===e}(t.DAt,e.DAt)}var nZ=class extends xu{get oft(){return this.OAt}get Urt(){return this.oft.reduce(((t,e)=>{for(const i of e.Urt)qt(t,i)||t.push(i);return t}),[])}get dp(){return this.Urt.length>0?this.Urt[0]:""}get pw(){return this.OAt[0].pw}get o(){return this.US}get ndt(){return this.Apt.ndt}get Xq(){return this.OAt[0].Xq}get Yct(){return this.Apt}get Uat(){return Ke(this.oft,(t=>t.Uat))}Cyt(){return eZ(this.OAt)}Hyt(){let t;for(const e of this.OAt){const i=e.Hyt();i&&(!t||i.getTime()<t.getTime())&&(t=i)}return t}gn(){this.Bo();for(const t of this.OAt)t.fn(ge.Jht,this.Dyt)}constructor(t,e,i){super(),this.Apt=t,this.US=e,this.OAt=i.slice();for(const t of i)t.yn(ge.Jht,this.Dyt)}};r();var rZ=class extends pe{constructor(){super(ge.eat)}};function oZ(t){const e=[];for(const i of t){let t;const s=i.Edt;void 0===s||(t=Ti(e,(t=>t.o===s))),t||(t={o:s,oft:[]},e.push(t)),t.oft.push(i)}return e}r();var hZ=class extends xu{get oft(){return this.OAt}get bpt(){return this.FAt}get oyt(){return this.Nyt.Zk.oyt}get ct(){return this.Nyt.ct}get jn(){return this.Cn+this.ct}get hyt(){return this.Nyt.Zk.hyt||[]}get o(){return this.Nyt.o}get iat(){return this.VAt}get ndt(){return this.WAt}get jpt(){return this.WAt.UAt(this)}get Yct(){return this}get Kpt(){return this.WAt.GAt(this)}get HAt(){return this.ZAt(1/0,_.min)}get XAt(){return this.ZAt(0,_.max)}ZAt(t,e){if(0===this.FAt.length)return;let i=t;for(const t of this.FAt)if(vT(t.pw)){const s=t.Pyt;if(void 0===s)return;i=e(i,s)}return i}get Cn(){return this.Nyt.Cn}get AE(){return this.ndt.AE}zAt(){this.VAt||(this.VAt=!0,this.yo(new rZ),this.gn())}async Yn(t,e){0===this.OAt.length?(await this.qAt(this.Nyt.oft,t,e),this.YAt(this.OAt),ot(e)):await this.KAt(t,e)}async qAt(t,e,i){for(const s of t){const t=new yH(this,s);try{await t.Yn(e,i),this.OAt.push(t)}catch(t){Zr(t)}}}YAt(t){const e=oZ(t);for(const t of e){const e=new nZ(this,t.o,t.oft);this.FAt.push(e)}}async KAt(t,e){for(const i of this.OAt)await i.Yn(t,e)}Cyt(){return this.Nyt.Cyt()}Hyt(){return this.Nyt.Hyt()}gn(){this.Bo(),this.Nyt.fn(ge.Jht,this.Dyt);for(const t of this.FAt)t.gn();for(const t of this.OAt)t.gn();Pn(this.OAt),Pn(this.FAt)}constructor(t,e){super(),this.OAt=[],this.FAt=[],this.VAt=!1,this.WAt=t,this.Nyt=e,this.Nyt.yn(ge.Jht,this.Dyt)}};r();var Ml=class extends pe{constructor(){super(Mi.Oy)}};r(),r();var aZ=function(t){return t.jAt="QAt",t}({}),uZ=class extends pe{constructor(){super(aZ.jAt)}};r(),r(),r(),r();var cZ=class extends Tl{get lct(){return this.Dat}get Yct(){return this.Dat.Yct}get nbt(){return this.Dat.nbt}get Xq(){return this.yp.Xq||this.Dat.Xq}get Fyt(){return this.RAt()}get Not(){return this.Fyt.Not}tlt(t){const e=this.Xq;return!(!Wh(e)&&!Iy(e))&&this.Not.tlt(t.Wut)}ilt(t,e,i,s){return this.Not.ilt(t,this,e,i,s)}Byt(){return this.Fyt.Byt(this)}clt(t){return this.Fyt.clt(t,this)}Uyt(t){return this.Fyt.Uyt(t,this)}Gyt(){return this.JAt}BAt(t){const e=this.Not,i=e.Gyt(t),s=i&&function(t,e){const{hbt:i,abt:s,obt:n}=t,r=i.LO;let o;const h=e.vbt(s);if(h.getTime()<=n.getTime())o=s.BO;else{const t=(h.getTime()-n.getTime())/1e3,e=_.max(s.ct-t,0);o=s.LO+e}return{Cn:r,jn:o}}(i,e),n=this.Not.Hyt(t,i);return this.JAt=i,{obt:t,DAt:s,NAt:n}}Yn(t){this.CAt(t,this.Dat.Fwt)}constructor(t,e){super(t,e,e.Fwt),this.JAt=void 0,this.Dat=e,this.IAt(!0)}},lZ=class extends Tl{get Uat(){return this.Pdt}get Yct(){return this.Apt}get nbt(){return this.Apt.nbt}get Edt(){return this.yp.Edt}get Xq(){var t;return this.yp.Xq||(null==(t=this.Pdt[0])?void 0:t.Zk.Xq)||""}get kwt(){return this.Zk.kwt}get Ewt(){return this.Zk.Ewt}Yn(t){this.CAt(t,this.Apt.Fwt);const e=t.Uat||[];if(this.Pdt.length!==e.length)throw new g("Expected "+this.Pdt.length+' representations in adaptation set "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.Pdt[t].Yn(e[t])}MAt(t){for(const e of this.Pdt)e.MAt(t);super.MAt(t)}BAt(t){return{obt:t,DAt:eZ(this.Pdt),NAt:iZ(this.Pdt)}}Ww(){for(const t of this.Pdt)t.Ww();super.Ww()}constructor(t,e){super(t,e,e.Fwt),this.Apt=e,this.IAt(!1),this.Pdt=t.Uat.map((t=>new cZ(t,this)))}},dZ=class extends Tl{get oft(){return this.OAt}get bpt(){return this.FAt}get Yct(){return this}get nbt(){return this.$At}get o(){return this.yp.o}get Cn(){return this.XV}get ct(){return this.IA}Yn(t,e){this.CAt(t,this.$At.Fwt),this.IA=e;const i=t.oft||[];if(this.OAt.length!==i.length)throw new g("Expected "+this.OAt.length+' adaptation sets in period "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.OAt[t].Yn(i[t])}MAt(t){for(const e of this.OAt)e.MAt(t);super.MAt(t)}BAt(t){return{obt:t,DAt:eZ(this.OAt),NAt:iZ(this.OAt)}}Ww(){for(const t of this.OAt)t.Ww();super.Ww()}constructor(t,e,i,s){super(e,void 0,t.Fwt),this.FAt=[],this.$At=t,this.XV=i,this.IA=s,this.IAt(!1),this.OAt=(e.oft||[]).map((t=>new lZ(t,this))),this.FAt=oZ(this.OAt)}};r();var fZ=class{get tSt(){return this.eSt.uyt.rV}get iSt(){return this.eSt.uyt.nV}get sSt(){return this.eSt.uyt.ayt}get nSt(){var t;return null==(t=this.eSt.zR)?void 0:t.rV}get rSt(){var t;return null==(t=this.eSt.zR)?void 0:t.rV}constructor(t){this.eSt=t}},_Z=new Date("2000-01-01"),vZ=class extends Bo{get Zk(){return this.yp}get pw(){return this.yp.pw||gn.fW}get lyt(){return this.oSt||this.yp.lyt||this.wyt}get cyt(){return this.yp.cyt}get sbt(){var t,e;return null!=(e=null==(t=this.hSt)?void 0:t.ignoreAvailabilityWindow)&&e}get myt(){return this.aSt}get Fwt(){return this.xAt}get dyt(){return this.uSt}get Dpt(){return this.cSt}get wyt(){return this.yp.wyt||this.An}get wwt(){return this.yp.wwt}get lSt(){return this.dSt}get fSt(){return this.An}get Ayt(){return this.eSt}Cyt(){var t;return null==(t=this.PAt)?void 0:t.DAt}Hyt(){var t;return null==(t=this.PAt)?void 0:t.NAt}Yn(t,e,i,s){var n;const r=void 0!==this.yp&&this.yp.pw===gn._W;this.yp=t,this.dSt=null!=s?s:i,this.An=i;const o=[jb(e)];this.xAt=t.Fwt&&t.Fwt.length>0?bH(t.Fwt.map((t=>t.qu)),o):o,this.uSt=t.dyt&&t.dyt.length>0?bH(t.dyt,this.xAt):[];const h=this.uSt.map((t=>t.href)),a=e.href;qt(h,a)||(this.uSt.push(e),h.push(a));const u=this._St.href;qt(h,u)||(this.uSt.push(this._St),h.push(u)),this.aSt=null==(n=t.myt)?void 0:n.twt(),t.Ayt&&(this.eSt=new fZ(t.Ayt));const c=t.pw===gn._W,l=function(t,e,i){const s=[];for(let i=0;i<t.length;i++){const n=t[i];let r;if(n.Cn)r=n.Cn.twt();else if(i>0&&t[i-1].ct){r=s[i-1]+t[i-1].ct.twt()}else{if(0!==i||e)break;r=0}s.push(r)}const n=[];for(let e=0;e<s.length-1;e++)n.push({Zk:t[e],Cn:s[e],ct:s[e+1]-s[e]});if(s.length>0){const r=s.length-1,o=t[r],h=s[r];let a=1/0;e||(a=o.ct?o.ct.twt():i-h),n.push({Zk:o,Cn:h,ct:a})}return n}(t.Dpt,c,this.aSt);this.vSt(l,r,c),this.MAt(i)}vSt(t,e,i){const s=this.cSt;if(0===t.length)return void Pn(s);const n=t[0].Zk.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const o=s.splice(0,r);for(const t of o)t.Ww();if(e&&!i&&s.length>0&&t.length>0){var h;const e=null!=(h=mZ(s[0].Zk))?h:Uh.xF;var a;const i=null!=(a=mZ(t[0].Zk))?a:Uh.xF;if(i.cF(e)){const n=i.yF(e);void 0!==this.aSt&&(this.aSt+=n.uF());for(let e=0;e<t.length;e++){const i=t[e];if(e<s.length){const t=s[e];i.Cn=t.Cn,bZ(i.Zk,t.Zk)}e===t.length-1&&(i.ct+=n.uF())}}}for(let e=0;e<t.length;e++){const i=t[e];if(e<s.length){const t=s[e];0,t.Yn(i.Zk,i.ct)}else s.push(new dZ(this,i.Zk,i.Cn,i.ct))}}MAt(t){for(const e of this.cSt)e.MAt(t);const e=this.PAt,i=this.BAt(t);e&&sZ(e,i)||(this.PAt=i,this.yo(new $H))}BAt(t){return{obt:t,DAt:tZ(this.cSt),NAt:iZ(this.cSt)}}rbt(){if(0===this.cSt.length)return;const t=this.cSt[this.cSt.length-1];if(isFinite(t.ct))return;if(0===t.oft.length)return;const e=t.oft[0];if(0===e.Uat.length)return;const i=e.Uat[0].Not,s=i.rbt();return s?{Nut:s,cyt:i.rdt(s)}:void 0}Ww(){this.Bo();for(const t of this.cSt)t.Ww()}constructor(t,e,i,s,n){if(super(),this.PAt=void 0,this.aSt=void 0,this.oSt=void 0,this.cSt=[],this._St=e,this.hSt=n,this.Yn(t,i,s),t.pw===gn._W){const t=this.rbt();t&&t.cyt&&t.cyt.getTime()<_Z.getTime()&&(this.oSt=new Date(this.wyt.getTime()-1e3*(t.Nut.LO+t.Nut.ct)),this.MAt(s))}}};function mZ(t){let e=wZ(t);var i,s;for(const s of null!=(i=t.oft)?i:[])e=tE(e,gZ(s));for(const i of null!=(s=t.hyt)?s:[])e=tE(e,yZ(i));return e}function gZ(t){let e=wZ(t);for(const i of t.Uat)e=tE(e,pZ(i));return e}function pZ(t){return wZ(t)}function wZ(t){let e;if(void 0!==t.Uwt&&(e=tE(e,yZ(t.Uwt))),void 0!==t.Vwt&&(e=tE(e,yZ(t.Vwt))),void 0!==t.Wwt)for(const i of t.Wwt)e=tE(e,yZ(i));return e}function yZ(t){var e,i;return Uh.TF(null!=(e=t.gwt)?e:fo.ZERO,null!=(i=t.lN)?i:1)}function bZ(t,e){if(TZ(t,e),t.Cn=e.Cn,void 0!==t.oft&&void 0!==e.oft&&t.oft.length===e.oft.length)for(let i=0;i<t.oft.length;i++)AZ(t.oft[i],e.oft[i]);if(void 0!==t.hyt&&void 0!==e.hyt&&t.hyt.length===e.hyt.length)for(let i=0;i<t.hyt.length;i++)kZ(t.hyt[i],e.hyt[i])}function AZ(t,e){if(TZ(t,e),void 0!==t.Uat&&void 0!==e.Uat&&t.Uat.length===e.Uat.length)for(let i=0;i<t.Uat.length;i++)SZ(t.Uat[i],e.Uat[i])}function SZ(t,e){TZ(t,e)}function TZ(t,e){if(void 0!==t.Uwt&&void 0!==e.Uwt&&kZ(t.Uwt,e.Uwt),void 0!==t.Vwt&&void 0!==e.Vwt&&kZ(t.Vwt,e.Vwt),void 0!==t.Wwt&&void 0!==e.Wwt&&t.Wwt.length===e.Wwt.length)for(let i=0;i<t.Wwt.length;i++)kZ(t.Wwt[i],e.Wwt[i])}function kZ(t,e){t.lN=e.lN,t.gwt=e.gwt}r();var EZ=class{async bj(t){await this.mSt(t,this.aW,this.gSt,this.pSt).catch(Pu)}sdt(){return new Date(Fa()+this.wSt)}async mSt(t,e,i,s){let n;if(s&&(n=await this.ySt(e,s,i)),void 0===n){ot(i);for(const s of t)if(n=await this.bSt(e,s,i),void 0!==n)break}this.wSt=void 0===n?0:n-Fa()}async bSt(t,e,i){switch(e.J6){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=e.Ix;if(s)return await this.ySt(t,s,i);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=e.Ix;if(t){const e=new Date(t).getTime();if(!S(e))return e}break}default:return}}async ySt(t,e,i){try{const s=await t.zk({qu:e,gE:So.GET,Xk:$r.wk,Bw:i}),n=await s.Tk(),r=new Date(n).getTime();if(!S(r))return r}catch(t){Zr(t)}}constructor(t,e,i){this.aW=t,this.gSt=e,this.pSt=i,this.wSt=0}},xZ=class extends Bo{get cyt(){return this.Nyt&&this.Nyt.cyt}get lyt(){return this.Nyt&&this.Nyt.lyt}get sbt(){return this.Nyt&&this.Nyt.sbt}get o(){return this.Nyt&&this.Nyt.Zk.o}get lSt(){var t;return null==(t=this.Nyt)?void 0:t.lSt}get ASt(){var t;return null==(t=this.Nyt)?void 0:t.fSt}get dyt(){return this.Nyt?this.Nyt.dyt.map((t=>t.href)):[this.SSt]}get SSt(){return this.TSt.href}get _yt(){return this.Nyt&&this.Nyt.Zk._yt}get vyt(){return this.Nyt&&this.Nyt.Zk.vyt}get myt(){return this.Nyt&&this.Nyt.Zk.myt}get gyt(){return this.Nyt&&this.Nyt.Zk.gyt}get pyt(){var t,e;const i=(null==(e=this.Nyt)||null==(t=e.Zk.pyt)?void 0:t.ewt())||0;return _.max(i,IZ)}get GR(){return this.kSt}ESt(t){const e=this.GR;this.kSt=t,e!==this.GR&&this.yo(new uZ)}get Dpt(){return this.cSt}get xSt(){return this.pw===gn._W?this.zyt:this.RSt}get ISt(){const t=this.xSt;if(void 0!==t)for(const e of this.Dpt)if(e.Cn<=t&&e.jn>t)return e}get Iwt(){return this.Nyt&&this.Nyt.Zk.Iwt}get wyt(){return this.Nyt&&this.Nyt.wyt}get HAt(){for(let t=this.cSt.length-1;t>=0;t-=1){const e=this.cSt[t].HAt;if(e)return e}}get zyt(){const t=this.HAt;if(void 0===t)return;const e=t-this.CSt;return _.max(e,this.RSt)}get RSt(){for(const t of this.cSt){const e=t.Iyt;if(void 0!==e)return e}}get AE(){return Boolean(this.PSt.AE)}get CSt(){var t,e;if(this.PSt.DSt&&this.pw===gn._W)return this.PSt.DSt;const i=null==(e=this.Nyt)||null==(t=e.Zk.yyt)?void 0:t.twt();return void 0!==i?i:this.pw===gn._W?1.5*this.gyt.twt():0}get wwt(){return this.Nyt&&this.Nyt.wwt}get pw(){return this.Nyt?this.Nyt.pw:void 0}get Ayt(){var t;return null==(t=this.Nyt)?void 0:t.Ayt}async Yn(t,e,i){const s=[],n=[],r=t.fyt?As.Ah(t.fyt,this.TSt):this.TSt;void 0===this.Nyt?(await this.NSt.bj(t.byt),this.Nyt=new vZ(t,this.TSt,r,this.sdt(),this.hSt),this.Nyt.yn(ge.Jht,this.Ds)):this.Nyt.Yn(t,r,this.sdt(),e);const o=this.Nyt.Dpt;let h;if(0===o.length)h=this.cSt.slice(),Pn(this.cSt);else{const t=o[0].o;let e=0;for(;e<this.cSt.length&&this.cSt[e].o!==t;)e++;h=this.cSt.splice(0,e);for(let t=0;t<o.length;t++){const e=o[t];let r;t<this.cSt.length?r=this.cSt[t]:(r=new hZ(this,e),s.push(r)),n.push(r.Yn(this.MSt,i))}}await Promise.all(n),this.cSt.push(...s);for(const t of h)t.zAt();this.yo(new Ml)}sdt(){return this.NSt.sdt()}GAt(t){const e=this.cSt.indexOf(t);if(e>0)return this.cSt[e-1]}UAt(t){const e=this.cSt.indexOf(t);if(e>=0&&e+1<this.cSt.length)return this.cSt[e+1]}Cyt(){return this.Nyt?this.Nyt.Cyt():void 0}Hyt(){return this.Nyt&&this.Nyt.Hyt()}MAt(t){this.Nyt&&this.Nyt.MAt(t)}gn(){this.Bo(),this.LSt=void 0,this.ESt(!1);for(const t of this.cSt)t.gn();Pn(this.cSt),this.Nyt&&this.Nyt.Ww()}constructor(t,e,i,s,n){super(),this.Nyt=void 0,this.kSt=!0,this.cSt=[],this.LSt=void 0,this.PSt=t,this.TSt=t.MC,this.MSt=e,this.aW=i,this.BSt=s,this.NSt=new EZ(this.aW,this.BSt,this.PSt.OSt),this.hSt=n}},RZ=class{get ndt(){return this.WAt}constructor(t,e,i,s,n){this.WAt=new xZ(t,e,i,s,n)}},IZ=1e3,CZ=class{get Tr(){return this.Nyt}get W(){return this.FSt||(this.FSt=this.zE(this.VSt.Bw),oh(this.FSt)),this.FSt}async zE(t){this.Nyt.ndt.yo(new $i);try{await this.WSt(t),this.Nyt.ndt.ESt(!0)}catch(t){throw Zr(t),this.FSt=void 0,this.Nyt.ndt.ESt(!1),new g("The provided MPEG-DASH document could not be loaded - "+t.message)}this.USt=this.GSt(this.VSt.Bw)}async GSt(t){try{for(;this.Nyt.ndt.pw===gn._W;)await hu(this.HSt,t)}catch(t){}}get HSt(){return this.Nyt.ndt.ASt&&this.Nyt.ndt.pw===gn._W?this.ZSt(this.VSt.Bw):this.W}async XSt(t){ot(t);const e=this.zSt();if(e>0){const i=_.min(e,2147483647);await on(i,t)}try{await this.WSt(t),this.Nyt.ndt.ESt(!0)}catch(t){throw new g("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.qSt=void 0}}zSt(){const t=this.Nyt.ndt.sdt().getTime()-this.Nyt.ndt.lSt.getTime();return this.Nyt.ndt.pyt-t}YSt(t){const e=this.Nyt.ndt.Hyt();if(e){const i=e.getTime()-t.getTime();if(i>0)return i}this.Nyt.ndt.MAt(t);const i=this.Nyt.ndt.Hyt();return i?i.getTime()-t.getTime():NaN}async ZSt(t){const e={stack:[],error:void 0,hasError:!1};try{null!=this.qSt||(this.qSt=this.XSt(t));const i=rs(e,$t.Yw([t]),!1),s=[this.qSt,this.KSt(i.Bw)].filter(ne);await Promise.race(s).catch(Pu)}catch(t){e.error=t,e.hasError=!0}finally{ae(e)}}KSt(t){const e=this.Nyt.ndt.sdt(),i=this.YSt(e);if(!S(i)&&!this.Tr.ndt.sbt)return this.jSt(i,t)}async jSt(t,e){await on(t,e);const i=this.Nyt.ndt.sdt();this.Nyt.ndt.MAt(i)}async QSt(t,e){const i=await this.$St.JSt(t,{},e);return(new fH).Syt(i.tTt,i.jk)}gn(){return this.VSt.Xw(),this.USt=void 0,this.FSt=void 0,this.qSt=void 0,this.Nyt.ndt.gn(),Promise.resolve()}constructor(t,e,i,s,n){this.VSt=new $t,this.WSt=async t=>{try{const e=this.Nyt.ndt.sdt(),i=await this.QSt(this.Nyt.ndt.dyt,t);await this.Nyt.ndt.Yn(i,e,t)}catch(t){throw so(t)&&this.Nyt.ndt.ESt(!1),t}},this.$St=s,this.Nyt=new RZ(t,e,i,this.VSt.Bw,n)}};r(),r();var PZ=class extends pe{constructor(t,e){super("Wpt"),this.Qpt=t,this.Vdt=e}},DZ=class extends Bo{get Vdt(){return this.Wdt}get pw(){return this.pp}get Z(){return this.hC.slice()}iW(t){t&&this.Wdt!==t&&this.eTt(t)}sW(t){this.Wdt===t&&this.eTt(void 0)}eTt(t){this.Wdt=t,this.yo(new PZ(this,this.Wdt))}gn(){this.Bo();for(const t of this.hC)t.Edt=void 0;Pn(this.hC)}constructor(t,e){super(),this.Wdt=void 0,this.pp=t,this.hC=e;for(const t of this.hC)t.Edt=this}};r(),r(),r();var NZ=class extends pe{constructor(t,e,i){super(Mi.Ey),this.currentTime=t,this.initDataType=e,this.initData=i}};function mc(t,e,i,s,n){let r=[],o=[];for(const t of e)t.pw===Io.cE?r=r.concat(t.Z):t.pw===Io.lE&&(o=o.concat(t.Z));return[MZ(t,r,i,s,null==n?void 0:n.preferredAudioCodecs),LZ(t,o,i,s,null==n?void 0:n.preferredVideoCodecs)].filter(ne)}function MZ(t,e,i,s,n){const r=Ti(s||[],(t=>t.pat===Io.cE&&t.Rt)),o=[OZ(r,i,t),FZ(r),VZ(r),WZ(r,n),UZ(),t=>{const e=t.filter((t=>"main"===t.Lt));return e.length>0?e:t}];return BZ(e,o)}function LZ(t,e,i,s,n){const r=Ti(s||[],(t=>t.pat===Io.lE&&t.Rt)),o=[OZ(r,i,t),WZ(r,n),UZ(),t=>{const e=t.filter((t=>"main"===t.Lt));return e.length>0?e:t}];return BZ(e,o)}function BZ(t,e){if(0===t.length)return;let i=t;for(const t of e){if(1===i.length)return i[0];i=t(i)}return i[0]}function OZ(t,e,i){return s=>{const n=t?t.lct.o:void 0;if(!ne(n))return s;const r=null==e?void 0:e.oyt,o=i.oyt,h=r&&o&&r.Ix===o.Ix,a=Ti(s,(t=>t.lct.o===n));return h&&a?[a]:s}}function FZ(t){return e=>{const i=t?t.gs:"",s=e.some((t=>""!==t.gs))?e.filter((t=>""!==t.gs)):e;if(""===i)return s;const n=s.filter((t=>t.gs===i));return n.length>0?n:s}}function VZ(t){return e=>{const i=t?t.Lt:"";if(""===i)return e;const s=e.filter((t=>t.Lt===i));return s.length>0?s:e}}function WZ(t,e){return t=>{if(e&&e.length>0)for(const i of e){const e=t.filter((t=>t.EC.oC.some((t=>Dn(t.Urt,i)))));if(e.length>0)return e}return t}}function UZ(){return t=>{let e=[],i=-1/0;for(const s of t){const t=s.lct.BH;t>i?(i=t,e=[s]):t===i&&e.push(s)}return e}}r(),r();var ac=function(t){return t.iTt="api",t.sTt="start",t}({});r();var GZ={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},HZ=class{nTt(t,e,i){const s=this.Zlt.maxRetries===1/0?GZ:this.Zlt;return Si((()=>this.rTt(t,e,i)),i,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async rTt(t,e,i){let s;for(const n of t)try{const t=new Fe({qu:n,Xk:$r.wk,qk:e,AE:this.oTt,gE:So.GET,pw:Wr.Jk,yE:De.Qk,Bw:i,pE:15e3,wE:5e3}),s=await this.aW.zk(t),r=await s.Tk(i);return{tTt:r,hTt:n,jk:s.jk}}catch(t){s=t}throw s}constructor(t,e,i=GZ){this.aW=t,this.oTt=e,this.Zlt=i}};r();var ZZ=class{async JSt(t,e,i){let s;for(const n of this.aTt)try{return await n.JSt(t,e,i)}catch(t){Zr(t),s=t}throw s}constructor(t){this.aTt=t}},XZ=class{async JSt(t,e,i){const s=await this.Lut.trt(t);if(s)return{tTt:s.data,hTt:s.locationURL,jk:s.responseURL};throw new g("Manifest fetch from cache unsuccesful")}constructor(t){this.Lut=t}},zZ=class{async JSt(t,e,i){return await this.uTt.nTt(t,e,i)}constructor(t){this.uTt=t}};function qZ(t,e){return new ZZ([new XZ(e),new zZ(t)])}var YZ=class{async JSt(t,e,i){const s=await this.$St.JSt(t,e,i);return await this.cTt(s),s}async cTt(t){await this.a_.crt({key:tV(t.hTt),locationURL:Zi(t.hTt),responseURL:Zi(t.jk),data:t.tTt,references:[this.lTt.o]})}constructor(t,e,i){this.$St=t,this.a_=e,this.lTt=i}};r();var dt=class extends pe{constructor(){super(Mi.Wy)}};r();var fn=class extends pe{constructor(){super(Mi.Vy)}};r(),r();var KZ=class extends Ex{dTt(t){return t.tI=nc.LOADED,this.tt(t),t}fTt(t){for(const e of this.Z.oC)if(e.IC===t)return e}constructor(){super()}};function jZ(t,e){return""===e?t:t+" "+e}r(),r(),r();var QZ=class extends Le{get ga(){return this.Za||(this.Za=function(t){return nh(Ht(t),{get attributes(){return t.Wx},get eventID(){var e;return""+(null!=(e=t._Tt)?e:"")}})}(this)),this.Za}$O(t){return this.U===t.U}constructor(t,e,i,s,n){super(t,e,i,!1,null==n?void 0:n.toString()),this.Wx=s,this._Tt=n}},JZ=class extends KZ{vTt(t){const e=this.oW.DI(Hi.jV,"","","",void 0,Vr.EVENT_STREAM);return e.IC=t,this.dTt(e),e}mTt(t,e,i){const s=t.J6;var n;const r=null!=(n=t.Ix)?n:"";var o;const h=null!=(o=t.lN)?o:1;var a;const u=null!=(a=t.gwt)?a:fo.ZERO,c=jZ(s,r);let l=this.fTt(c);l||(l=this.vTt(c));for(const s of t.zq)if(!$Z(s,l)){const t=tX(s,h,u,e);t.BO>i&&l.uW(t)}}async $n(t){await this.tr(),this.$At=t,this.$At.yn(Mi.Oy,this.gTt),this.gTt()}async tr(){this.$At&&(this.$At.fn(Mi.Oy,this.gTt),this.$At=void 0);for(const t of this.Z.oC)this.oW.lW(t);await super.tr()}constructor(t){super(),this.$At=void 0,this.gTt=()=>{var t,e;const i=null!=(e=null==(t=this.$At.Cyt())?void 0:t.Cn)?e:0;if(i>0)for(const t of this.Z.oC)ho(t,i);for(const t of this.$At.Dpt)if(t.jn>i)for(const e of t.hyt)this.mTt(e,t,i)},this.oW=t}};function $Z(t,e){const i=t.o;if(void 0!==i){if(Ti(e.L.oC,(e=>e._Tt===i&&e.U===t.Zk)))return!0}return!1}function tX(t,e,i,s){const n=t.o,r=t.dL.toSigned().subtract(i),o=t.ct,h=t.Zk,a=t.Wx,u=r.toNumber()/e+s.Cn,c=o?o.toNumber()/e:void 0,l=void 0!==c?u+c:s.XAt;return new QZ(u,l,h,a,n)}function eX(t,e,i,s,n){const r=[],o=Ti(i,(t=>t.J6===tm));if(void 0===o)return;const h=o.Ix?function(t){const e=t.split(":",1)[0];switch(e){case"cbcs":case"cenc":return e;default:return}}(o.Ix.toLowerCase()):"cenc";if(void 0!==h){for(const t of i)if(t.J6!==tm)for(const e of bm(t.J6)){const i=n&&t.t9?[t.t9]:[];r.push({rT:e,SG:i,TG:void 0,LU:void 0})}if(r.length)return{iU:t,tpt:{pTt:h,sU:o.sU},$gt:r,wTt:e===Io.cE?s.slice():[],yTt:e===Io.lE?s.slice():[],s9:!1}}}function iX(t,e){if(!t)return e;if(!e)return t;const i=[],s=_u();var n;return sX(i,s,t.$gt),sX(i,s,e.$gt),{iU:t.iU,tpt:{pTt:t.tpt.pTt,sU:null!=(n=t.tpt.sU)?n:e.tpt.sU},$gt:i,wTt:nX(t.wTt,e.wTt,qt),yTt:nX(t.yTt,e.yTt,qt),s9:t.s9||e.s9||!1}}function sX(t,e,i){for(const s of i){const i=s.rT.Sw;let n;e.has(i)?(n=e.get(i),n.SG=nX(n.SG,s.SG,rX)):(n=la({},s),t.push(n),e.set(i,n))}}function nX(t,e,i){const s=t.slice();for(const t of e)i(s,t)||s.push(t);return s}function rX(t,e){for(const i of t)if(Ah(i,e))return!0;return!1}function oX(t,e,i){let s;const n=t.wG;if(n){const r=t.Xq,o=[];for(const e of t.Urt)o.push(r+'; codecs="'+e+'"');s=eX(e||{},t.pw,n,o,i)}for(const n of t.Uat)s=iX(s,hX(n,e,i));return s}function hX(t,e,i){return eX(e||{},t.pw,t.wG||[],[t.Ik],i)}function aX(t){return t?t.$gt.map((e=>{const i=uX(t.iU,e.rT),s=t.tpt.pTt;return{rT:e.rT,SG:e.SG,LU:e.LU,SH:[{initDataTypes:[e.rT.yw],audioCapabilities:cX(t.wTt,s,null==i?void 0:i.audioRobustness),videoCapabilities:cX(t.yTt,s,null==i?void 0:i.videoRobustness),persistentState:null==i?void 0:i.persistentState,distinctiveIdentifier:null==i?void 0:i.distinctiveIdentifier}]}})):[]}function uX(t,e){switch(e.pw){case Ne.fw:return t.widevine;case Ne.dw:return t.playready;case Ne.mw:return t.fairplay;case Ne._w:return t.clearkey}}function cX(t,e,i){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:e,robustness:i})))}function lX(t,e){const i=t=>{const i=e.indexOf(t.rT.Sw);return i>=0?i:e.length};return Bi(t,((t,e)=>i(t)-i(e)))}r(),r();var dX=class extends KZ{vTt(t){const e=this.oW.DI(Hi.jV,t.o,"thumbnails","",!1,Vr.DEFAULT);return e.TE=yh.Jn,this.dTt(e),e}async $n(t){await this.tr(),this.$At=t,this.$At.yn(Mi.Oy,this.Yn),this.Yn()}bTt(t){this.ATt(t),this.STt()}STt(){const t=[];for(const e of this.Z.oC)this.TTt(e)||t.push(e);for(const e of t)this.it(e)}ATt(t){const e=[];for(const i of this.Pdt)-1===t.indexOf(i)&&e.push(i);for(const t of e)we(this.Pdt,t)}async tr(){this.$At&&(this.$At.fn(Mi.Oy,this.Yn),this.$At=void 0);for(const t of this.Pdt)t.fn(ge.Jht,this.kTt);this.Pdt.length=0;for(const t of this.Z.oC)this.oW.lW(t);await super.tr()}gn(){return this.kTt=void 0,super.gn()}ETt(){var t,e;const i=null!=(e=null==(t=this.$At.Cyt())?void 0:t.Cn)?e:0;if(i>0)for(const t of this.Z.oC)ho(t,i)}xTt(t){return this.Z.oC.some((e=>e.o===t.o))}RTt(t){return Ti(this.Z.oC,(e=>e.o===t.o))}TTt(t){return this.Pdt.some((e=>t.o===e.o))}constructor(t){super(),this.Pdt=[],this.Yn=()=>{const t=[];for(const e of this.$At.Dpt)for(const i of e.oft)if(i.pw===Io.dE&&i.Uat.length>0){const e=i.Uat[0];t.push(e),this.xTt(e)||this.vTt(e),-1===this.Pdt.indexOf(e)&&(this.Pdt.push(e),e.yn(ge.Jht,this.kTt)),this.ITt(e)}this.bTt(t)},this.ITt=t=>{const e=this.RTt(t);e&&t&&e.TE!==yh.Ch&&(this.ETt(),function(t,e){const i=t.Not,s=t.Gyt();if(!s)return;const n=s.hbt,r=s.abt,o=t.ji,h=t.Ti,[a,u]=function(t){for(const e of t)if(ch(e.J6,_X)||ch(e.J6,vX)){const t=e.Ix.match(fX);if(t){const[,e,i]=t;return[Number(e),Number(i)]}}return[1,1]}(t.kwt);let c=n;for(;c&&c.Wut<=r.Wut;){const s=t.Fyt.ct||c.ct,n=mX(e,c,t.clt(c).qu,o,h,a,u,s);for(const t of n)e.uW(t);c=i.olt(c)}}(t,e))},this.oW=t;const e=this;this.kTt=function(){e.ITt(this)}}},fX=/^(\d+)x(\d+)$/,_X="http://dashif.org/guidelines/thumbnail_tile",vX="http://dashif.org/thumbnail_tile";function mX(t,e,i,s,n,r,o,h){const a=[],u=e.LO,c=r*o,l=s/r,d=n/o,f=_.round(l),v=_.round(d),m=h/c;if(1===c){const e=u+m;return gX(t,u,e,i)?a:[new Le(u,e,i,!1)]}for(let s=0;s<o;s++)for(let n=0;n<r;n++){const o=u+(s*r+n)*m,h=o+m,c=i+"#xywh="+_.round(n*l)+","+_.round(s*d)+","+f+","+v;if(gX(t,o,h,c)||a.push(new Le(o,h,c,!1)),h>=e.BO)return a}return a}function gX(t,e,i,s){return t.L.oC.some((t=>t.LO===e&&t.BO===i&&t.U===s))}r(),r(),r(),r();var pX=class extends Le{get lL(){return this.CTt}get Ix(){return this.PTt}get DTt(){return this.NTt}get ga(){return this.Za||(this.Za=function(t){return nh(Ht(t),{get schemeIDURI(){return t.lL},get value(){return t.Ix},get emsgID(){return t.DTt}})}(this)),this.Za}$O(t){return _e(this.U,t.U)}constructor(t,e,i,s,n,r){super(t,e,r,!1),this.CTt=i,this.PTt=s,this.NTt=n}},wX=class t extends KZ{ddt(e,i,s){const n=jo.qD(na(e));if(!n)return;const r=function(t,e){const i=[];for(const s of t)GS(s,e)&&i.push(s);return i}(n,Mt.cD);if(r.length){const e=t.MTt(n,i,s);this.LTt(r,e,s)}}LTt(t,e,i){for(const s of t){let t;t=1===s.XD?s.dL.toNumber()/s.lN+i:e+s.vL/s.lN;const n=t+s.fL/s.lN;"https://aomedia.org/emsg/ID3"===s.lL||"https://developer.apple.com/streaming/emsg-id3"===s.lL?this.BTt(s,t):this.OTt(s,t,n)}}OTt(t,e,i){const s=jZ(t.lL,t.Ix);let n=this.fTt(s);n||(n=this.FTt(s),this.dTt(n)),n.uW(new pX(e,i,t.lL,t.Ix,t.o,t._L))}BTt(t,e){const i=SL(na(t._L));if(!i)return;const s=jZ(t.lL,t.Ix);let n=this.fTt(s);n||(n=this.VTt(s),this.dTt(n));for(const t of i.A5){const i=new ML(e,t);jM(i,n.L.oC),n.uW(i)}}static MTt(t,e,i){const s=dn(t,Mt.lD);return s?to(s.xL,s.lN)+i:e}FTt(t){const e=this.oW.DI(Hi.jV,"","","",void 0,Vr.EMSG);return e.IC=t,e.TE=yh.RC,e}VTt(t){const e=this.oW.DI(Hi.jV,"","","",void 0,Vr.ID3);return e.IC=t,e.TE=yh.RC,e}async tr(){for(const t of this.Z.oC)this.oW.lW(t);await super.tr()}constructor(t){super(),this.oW=t}},yX=class extends wX{async $n(t){await this.tr(),this.$At=t,this.$At.yn(Mi.Oy,this.gTt),this.gTt()}async tr(){this.$At&&(this.$At.fn(Mi.Oy,this.gTt),this.$At=void 0),await super.tr()}constructor(...t){super(...t),this.gTt=()=>{var t,e;const i=null!=(e=null==(t=this.$At.Cyt())?void 0:t.Cn)?e:0;this.$V(i)}}};r(),r();var bX=class{nrt(t,e){return this.WTt?this.Lut.nrt(t,e):Promise.resolve(!1)}ort(t,e){return this.WTt?this.Lut.ort(t,e):Promise.resolve(void 0)}async trt(t){const e=await this.Lut.trt(t);return this.WTt=void 0!==e,e}TQ(t){return this.Lut.TQ(t)}constructor(t){this.WTt=!1,this.Lut=t}};r();var AX=class extends TT{XB(){var t;return null!=(t=this.HB)?t:0}FC(){this.ta.yR=1/0}zB(){return!0}constructor(t,e,i){super(t,e,i)}},SX=[Mi.Gy,Mi.Zy,Mi.Yy,Mi.Fy,Mi.Ky],TX=[Mi.Hy,Mi.eb,Mi.Cy,Mi.Ry],kX=class t extends Bo{UTt(t){return!!this.qG&&this.qG.hJ(t)}async _p(t){this.qG=await this.LB.$n(t),this.GTt(),this.HTt(),this.qG.e4(this.ct)}ZTt(t){return this.qG.uJ(t)}XTt(t){return this.qG.lJ(t)}async zTt(){this.qTt=this.YTt,this.qG&&(await this.LB.tr(),this.qG=void 0)}i3(){this.qG.i3()}z2(){const t=this.ct;this.qG.ct<t&&this.qG.e4(t),this.qG.z2()}async KTt(t){const e=this.qG,i=[];e.K3&&i.push(eM(e.K3,t)),e.j3&&i.push(eM(e.j3,t)),await Promise.all(i)}jTt(t,e,i,s,n,r){const o=this.LB,h=this.qG;return new DG(o,h,t,e,i,s,n,r,this.QTt,o,this.qgt,this.Zlt,this.upt,this.iH)}JTt(t,e,i){return t.uJ(e,i,this.qG)}async $Tt(t,e,i,s){const n=this.jTt(this.aW,this.dZ,this.Lut,this.wc,t,s);return n.yn(ge.eat,this.tkt),n.yn(Mi.Fy,this.Ds),await n.bj(e,i),n}ekt(t){void 0===t&&(t=!1),this.ikt.Xw(),this.q9.Xw(),this.skt.Xw(),this.skt=new $t,this.nkt=go(this.rkt(this.okt,this.Y9,this.nkt,t,this.skt.Bw),this.skt).catch(this.Xpt)}async rkt(t,e,i,s,n){await Promise.all([t,e,i]),ot(n),await hu(this.hkt.Bb,n);const r=this.akt;await r.Mat(),this.z2(),ot(n);const o=r.kc,h=r.Zpt,a=r.Hpt;let u=this.ukt(o,a,o,h,!1),c=this.ckt(a,u);!s&&this.UTt(c)?await this.lkt(a,u,c):(u=this.ukt(o,a,o,h,!0),c=this.ckt(a,u),await this.dkt(a,u,c,n)),ot(n),this.nI?this.Sb(this.yR):this.fkt(),this._kt()}async lkt(t,e,i){const s=this.akt;await this.ZTt(i),this.vkt=i,await this.JTt(s,t,e),await s.Bat(tc._ht)}async dkt(t,e,i,s){const n=this.akt;this.e8(),this.mkt();const r=this.gkt;await this.zTt(),await this._p(i),this.vkt=i,await this.JTt(n,t,e);try{const t=this.pkt(r,!1,!0,s);oh(t),await n.Bat(tc._ht),await t}finally{this.o8(),this.wkt()}}get ht(){return this.rO}get WG(){const t=this.gkt,e=this.ykt,i=e.JL(t);if(-1!==i)return{Cn:e.Cn(i),jn:e.jn(i)}}get ykt(){var t,e,i;const s=null!=(i=null==(t=this.akt)?void 0:t._R)?i:ee.fB();var n;const r=null!=(n=null==(e=this.bkt)?void 0:e._R)?n:ee.fB();return s.KL(r)}get _R(){return this.ykt.ks()}get mR(){var t;const e=null==(t=this.Nyt)?void 0:t.ndt,i=null==e?void 0:e.lyt;if(!e||!i)return;const s=i.getTime(),n=1e3*this.yR;return new Date(n+s)}set mR(t){var e;const i=null==(e=this.Nyt)?void 0:e.ndt,s=null==i?void 0:i.lyt;if(!t||!i||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Sb(r-n)}get bt(){return this.wc}get gkt(){return void 0!==this.y9?this.y9:void 0!==this.Akt?this.Akt:this.LB.yR}get yR(){return this.gkt}set yR(t){this.AR(t)}AR(t,e){this.Sb(t,t===1/0)}get ct(){let t=NaN;return this.akt&&this.akt.Ppt?t=this.akt.jn:this.Nyt&&void 0!==this.Nyt.ndt.pw&&(t=this.Nyt.ndt.myt?this.Nyt.ndt.myt.twt():1/0),t}get jn(){return this.ct}get kR(){return this.nI?this.b9():!(!this.akt||!this.akt.Ppt)&&this.LB.kR}b9(){return!!this.nI&&(!(!this.akt||!this.akt.Ppt)&&this.gkt===this.akt.jn)}get lt(){return this.HG}get RR(){return this.ZG}get PR(){}Skt(){var t;const e=this.Tkt;if(0===e.V)return!0;var i;const s=null!=(i=null==(t=this.WG)?void 0:t.jn)?i:this.gkt,n=e.Cn(0);return s>=n||Cs(s,n,.001)}kkt(){var t;if(!this.Nyt)return!1;if(this.Nyt.ndt.pw!==gn._W)return!1;const e=null==(t=this.akt)?void 0:t.kc;if(e&&e.iat)return!0;const i=[];for(const t of this.Nyt.ndt.Dpt){const e=t.Iyt,s=t.XAt;void 0!==e&&void 0!==s&&i.push(e,s)}const s=new ee(i).YL();return function(t,e,i){if(!e.V||!i.V)return ee.fB();const s=e.Cn(0),n=e.jn(e.V-1),r=t.Sn(i).XL().Sn(t).KL(e);return ee.dB(r.Cn(0),r.jn(r.V-1)).jL(r).nB(((t,e)=>t<s&&e<=n&&e-t>ji))}(this.ykt,this.Tkt,s).V>0}get LR(){return la({},this.YTt,{dO:kl.Lg.rG(),fO:this.Ekt,_O:{amountOfBufferedAudioSegments:this.xkt,amountOfBufferedVideoSegments:this.Rkt}})}get YTt(){return function(t,e){return{uO:t.uO+e.uO,cO:t.cO+e.cO,lO:t.lO+e.lO}}(this.qTt,this.LB.OR())}get FR(){return this.LB.FR}set FR(t){this.LB.FR=t}get ZR(){return this.S9?this.Ikt:this.akt&&this.akt.Ppt?this.Ckt:this.Ikt}get zR(){return this.LB.zR}set zR(t){this.LB.zR=t}get KR(){let t=this.Fo;return this.akt&&(t=t.KL(this.Pkt)),t.YL(.1).ks()}get Pkt(){return this.LB.KR}Dkt(t){this.Fo=this.Fo.KL(t)}get QR(){return this.zG}set QR(t){this.zG=t,this.Nkt()}get tI(){let t=this.LB.tI;return this.Mkt&&(t=_.max(gs.Xn,t)),t}get Tkt(){return this.Lkt(!1)}get Bkt(){return this.Lkt(!0)}get iI(){return this.Tkt.ks()}get nI(){return this.rZ||this.Okt}get Okt(){return this.LB.nI}get A4(){return this.LB.A4}get YG(){}get Fkt(){var t,e;return null!=(e=null==(t=this.Nyt)?void 0:t.ndt.pw)?e:gn.fW}get nt(){return this.Ul}get rt(){return this.hO}get hI(){var t;return this.Vkt||(null==(t=this.Wkt())?void 0:t.Ti)||0}get cI(){var t;return this.Ukt||(null==(t=this.Wkt())?void 0:t.ji)||0}get dI(){return this.LB.dI}set dI(t){this.LB.dI=Zs(t,0,1)}get vI(){return this.KG}get gI(){return!1}set gI(t){}get jG(){return this.QG}Gkt(t){t.yn(SX,this.Ds),t.yn(Mi.Qy,this.Hkt),t.yn(Mi.vy,this.Zkt),t.yn(sn.ua,this.Xkt),t.yn(Mi.py,this.zkt),t.yn(Mi.Zy,this.qkt),t.yn("Wpt",this.Ykt),t.yn("ppt",this.Ykt)}Kkt(t){t.fn(SX,this.Ds),t.fn(Mi.Qy,this.Hkt),t.fn(Mi.vy,this.Zkt),t.fn(sn.ua,this.Xkt),t.fn(Mi.py,this.zkt),t.fn(Mi.Zy,this.qkt),t.fn("Wpt",this.Ykt),t.fn("ppt",this.Ykt)}jkt(t){t.yn(Mi.Gy,this.Ds)}Qkt(t){t.fn(Mi.Gy,this.Ds)}Wkt(){if(!this.akt)return;const t=Ti(this.akt.Hpt,(t=>t.pat===Io.lE));return t?t.SC:void 0}Lkt(t){var e;const i=null==(e=this.Nyt)?void 0:e.ndt;if(!i)return ee.fB();const s=i.RSt;let n=t?i.HAt:i.zyt;if(void 0===s||void 0===n)return ee.fB();if(!t){const t=this.Pkt;t.V>0&&t.jn(t.V-1)>n&&(n=_.min(t.jn(t.V-1),i.HAt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),ee.dB(s,n).HL()}async $n(t,e){let i,s;ot(e);const n=this.Nyt.ndt;try{i=n.ISt,s=n.xSt}catch(t){throw new g("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!i)throw new g("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new g("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.Jkt(t.textTracks),this.e8();const r=this.ift(i),o=mc(i,r,void 0,void 0,this.kpt),h=this.ukt(i,o,i,o,!0);o.forEach((t=>t.Rt=!0));const a=this.ckt(o,h);await this._p(a),this.vkt=a,ot(e);const u=await this.$Tt(i,r,o,h);ot(e),this.$kt(u),this.o8(),ot(e),await u.Bat(),ot(e),!this.tEt&&s>0&&this.Sb(s,!0,ac.sTt),this.rZ||(this.fkt(),this.eEt())}fkt(){this.ikt.Xw(),this.ikt=new $t,this.okt=go(this.iEt(this.okt,this.nkt,this.ikt.Bw),this.ikt).catch(this.Xpt)}sEt(){this.ikt.Xw()}async iEt(t,e,i){for(await Promise.all([t,e]),ot(i);;){var s;const t=null==(s=this.akt)?void 0:s.kc;if(!t){0;break}if(!await this.nEt(t,i)){0;break}}}async nEt(t,e){var i;ot(e);const s=this.akt;for(0;this.Nyt.ndt.pw===gn._W&&void 0===(null==(i=this.UAt(t))?void 0:i.Iyt);)await hu(this.rEt.HSt,e),await this.oEt();for(ot(e),await this.oEt(),ot(e);!s.Ept();)await s.uy(eU.fft,e),await this.oEt();ot(e),await this.oEt(),ot(e);const n=this.UAt(t);return n?(this.hEt(n)?await this.aEt(n,e):await this.uEt(n,e),!0):(this.i3(),!1)}hEt(t){var e,i,s,n,r;const o=null!=(r=null==(e=this.wc)?void 0:e.seamlessSwitchStrategy)?r:Pc.qB;if(o===Pc.YB)return!0;if(o===Pc.KB)return!1;const h=this.akt,a=null==h?void 0:h.kc,u=null==h?void 0:h.Hpt,c=mc(t,this.ift(t),a,u,this.kpt),l=this.ukt(t,c,a,u,!1);if(o===Pc.CLEAR_ONLY&&((null==(i=this.akt)?void 0:i.Jgt)||l)||o===Pc.SAME_DRM_ONLY&&!((null==(s=this.akt)?void 0:s.Jgt)&&l||!(null==(n=this.akt)?void 0:n.Jgt)&&!l))return!1;const d=this.ckt(c,l);return this.UTt(d)}cEt(){return!0}lEt(t){const e=this.dEt();for(const i of e)i!==t&&(i.TE=yh.Ch)}_kt(){if(void 0!==this.fEt){if(this.fEt.NC){const t=Ti(this.ht.oC,(t=>t.Rt));void 0!==t&&this.fEt.gs===t.gs||(this.fEt.TE=yh.Ch)}}else this._Et()}_Et(){if(this.dEt().length)return;const t=Ti(this.ht.oC,(t=>t.Rt));if(void 0===t)return;const e=this.nt.oC.filter((t=>t.NC));for(const i of e)if(i.gs===t.gs)return i.TE=yh.Jn,void(this.fEt=i)}dEt(){return this.nt.oC.filter((t=>t.TE===yh.Jn&&(t.Lt===Hi.YV||t.Lt===Hi.qV)))}vEt(t){if(t&&this.fEt){const e=function(t,e){if(""===t.gs)return;return e.filter((e=>e.gs===t.gs))[0]}(this.fEt,t.nt.oC);e&&(e.TE=yh.Jn)}}async aEt(t,e){var i,s;const n=this.akt;let r=this.bkt;const o=this.vkt;try{ot(e);const i=n.kc,s=n.Hpt,o=this.ift(t),h=mc(t,o,i,s,this.kpt),a=this.ukt(t,h,i,s,!1);h.forEach((t=>t.Rt=!0));const u=this.ckt(h,a);for(0,await n.Mat(),this.z2(),ot(e),r&&r.kc===t?(this.UTt(u)&&await this.ZTt(u),this.vkt=u):(r&&await r.gn(!0),this.UTt(u)&&await this.ZTt(u),this.vkt=u,r=await this.$Tt(t,o,h,a),this.bkt=r,this.jkt(r),this.mEt.cC=r.nt,r.Oat(n)),await r.Bat(),ot(e);this.gkt<t.Cn;)await this.LB.uy(Mi.$y,e);ot(e),this.$kt(r)}catch(t){throw Se(t)&&(r&&await r.Mat(),o&&this.vkt!==o&&(this.UTt(o)&&await this.ZTt(o),this.vkt=o)),t}(null==(s=this.wc)||null==(i=s.dash)?void 0:i.forceSeekToSynchronize)&&await this.gEt(t,e)}async gEt(t,e){const i=Date.now()/1e3;if(void 0===this.pEt)this.pEt=i;else if(i-this.pEt>900){this.pEt=i,this.mkt();const s=_.max(this.gkt,t.Cn);try{await this.pkt(s,!1,!0,e)}finally{this.wkt()}}}async uEt(t,e){for(ot(e),await this.akt.Mat(),this.z2(),await this.KTt(t.Cn),ot(e),this.i3();!this.LB.kR&&this.gkt<t.Cn;)await this.LB.uy([Mi.$y,Mi.xy],e);ot(e);const i=this.akt.kc,s=this.akt.Hpt,n=this.ift(t),r=mc(t,n,i,s,this.kpt),o=this.ukt(t,r,i,s,!0);r.forEach((t=>t.Rt=!0));const h=this.ckt(r,o);this.akt&&(this.wEt.fn(Eo.aa,this.yEt),await this.akt.gn(),this.wEt.yn(Eo.aa,this.yEt),this.akt=void 0),this.bkt&&(await this.bkt.gn(),this.bkt=void 0),this.mkt(),this.e8();const a=_.max(this.gkt,t.Cn);await this.zTt(),await this._p(h),this.vkt=h;const u=await this.$Tt(t,n,r,o);this.$kt(u);try{const t={stack:[],error:void 0,hasError:!1};try{const i=this.pkt(a,!1,!0,e);oh(i),await u.Bat();const s=rs(t,$t.Yw([e]),!1);await Promise.race([i,u.uy([eU.fft],s.Bw)])}catch(e){t.error=e,t.hasError=!0}finally{ae(t)}}finally{this.o8(),this.wkt()}}async oEt(){const t=this.bkt;t&&t.kc.iat&&(await t.gn(!0),this.bkt=void 0)}static bEt(t,e){const i=[],s=[];let n=!e.some((t=>t.nft.some((t=>"main"===t.Ix))));for(const t of e){if(-1!==i.indexOf(t))continue;const r=xX(t.gdt.concat(t.nft),n);n=!1;const o=t.Uat.map((t=>t.nat)),h=new KW(t,o,r),a=RX(t,e);for(const t of a)h.Ddt(t),i.push(t);s.push(h)}return new DZ(t,s)}ift(e){const i=[],s=[];for(const t of e.bpt)vT(t.pw)&&(0===t.Uat.length?this.yo(new tU("No supported representation found in the AdaptationSet with mimetype : "+t.pw)):t.pw===Io.cE?i.push(...t.oft):s.push(...t.oft));const n=[];return i.length>0&&n.push(t.bEt(Io.cE,i)),s.length>0&&n.push(t.bEt(Io.lE,s)),n}ckt(t,e){var i,s,n,r,o,h,a,u;const c=t.map((t=>{var e;return Yh.klt(null!=(e=t.Cdt)?e:t.Uat,yT(t.pat,this.kpt))})).map((t=>({Ik:t.Ik}))),l=null==(s=this.wc)||null==(i=s.dash)?void 0:i.desiredTimescale;var d;const f=(null==(n=this.wc)?void 0:n.seamlessSwitchStrategy)!==Pc.KB&&(null==(r=this.wc)?void 0:r.seamlessSwitchStrategy)!==Pc.CLEAR_ONLY&&(null==(o=this.wc)?void 0:o.seamlessSwitchStrategy)!==Pc.SAME_DRM_ONLY&&(null!=(d=null==(a=this.wc)||null==(h=a.dash)?void 0:h.needsTimescaleShifting)?d:As.Ys.np),_=null==(u=this.wc)?void 0:u.useManagedMediaSource;return{pw:zr._W,o4:c,JG:aX(e),s9:null==e?void 0:e.s9,np:f,J2:l,g4:_}}static AEt(t,e){if(!t.length)return;let i;for(const s of t){const t=0===s.Ldt.length;i=iX(i,oX(s.lct,e,t))}return(null==e?void 0:e.preferredKeySystems)&&i&&(i.$gt=lX(i.$gt,e.preferredKeySystems)),i}ukt(e,i,s,n,r){var o,h;const a=this.wc.contentProtection;let u=t.AEt(i,a);if(void 0!==u)return u;var c;const l=null!=(c=null==(o=this.wc)?void 0:o.seamlessSwitchStrategy)?c:Pc.qB;if(l===Pc.KB||l===Pc.CLEAR_ONLY||l===Pc.SAME_DRM_ONLY)return;const d=null==(h=this.akt)?void 0:h.Jgt;if(!r&&void 0!==d){const t=!d.s9;if(l===Pc.qB&&t&&!this.cEt())return;return d}const f=!r&&l===Pc.qB;return u=this.SEt(e,a,s,n,f),void 0!==u?(u.s9=!0,u):void 0}SEt(e,i,s,n,r){let o=e,h=!1;for(;;){if(o=h?this.GAt(o):this.UAt(o),void 0===o){if(h)return;h=!0,o=e;continue}const a=mc(o,this.ift(o),s,n,this.kpt),u=t.AEt(a,i);if(r){const t=this.ckt(a,u);if(!this.UTt(t))return}if(void 0!==u)return u}}Jkt(t){for(const e of t)e.src&&this.hH.rW(e);Nx(this.hH.Z)}bI(){var t;const e=this.ZR;this.Ikt=!0,e||(this.S9||(this.TEt(new $),this.kEt()),(null==(t=this.VG)?void 0:t._B)&&this.VG.SI(),this.EEt())}AI(){this.xEt||(this.xEt=new as),this.REt();const t=this.xEt.Bb;return oh(t),t}REt(){if(this.Ikt=!1,this.M9=!0,this.IEt=!1,this.Nkt(),this.kR){const t=this.Tkt;t.V>0&&this.Sb(t.Cn(0))}this.S9||this.B9().then(this.CEt,this.TEt),this.tkt(),this.EEt()}get Ckt(){return this.LB.ZR}B9(){return this.LB.AI()}kEt(){this.LB.bI()}e8(){this.S9||(this.Ikt=this.ZR,this.S9=!0,this.kEt())}o8(){this.S9&&(this.S9=!1,this.Ikt||this.B9().then(this.CEt,this.TEt),this.tkt(),this.EEt())}EEt(){const t=this.RW,e=this.ZR;t!==e&&(this.RW=e,e?this.yo(new vl(this.yR)):this.yo(new Xt(this.yR)))}Sb(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=ac.iTt),this.tEt=!0,this.ikt.Xw(),this.q9.Xw(),this.rZ=!0,this.y9=t,this.IEt=this.IEt&&this.b9(),this.Dkt(this.Pkt),this.PEt(new _t(this.yR)),this.q9=new $t,this.Y9=go(this.K9(t,this.okt,this.Y9,this.nkt,this.q9.Bw,e,i),this.q9).catch(this.Xpt),this.Y9}DEt(){this.q9.Xw()}async K9(t,e,i,s,n,r,o,h){var a;void 0===r&&(r=!1),void 0===o&&(o=ac.iTt),void 0===h&&(h=!1),null==(a=this.VG)||a.SI();try{var u,c;0,await Promise.all([e,i,s]),ot(n),await hu(this.hkt.Bb,n);const a=this.Tkt.ZL(t);this.y9=a;const l=h||(null==(c=this.wc)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.yR,d=this.NEt(a),f=this.akt;if(l||!f||!f.iI.gr(a)&&o!==ac.sTt&&f.kc!==d){if(d){let t=this.bkt;if(this.e8(),f&&await f.Mat(),t&&t.kc===d&&!l){const e=this.ckt(t.Zpt,t.Jgt);this.z2(),this.UTt(e)&&await this.ZTt(e),this.vkt=e}else{t&&await t.gn(!0);const e=this.ift(d),i=null==f?void 0:f.kc,s=null==f?void 0:f.Hpt,n=mc(d,e,i,s,this.kpt);let r=this.ukt(d,n,i,s,!1);n.forEach((t=>t.Rt=!0));let o=this.ckt(n,r);this.hEt(d)&&!l?(this.z2(),this.UTt(o)&&await this.ZTt(o)):(r=this.ukt(d,n,i,s,!0),o=this.ckt(n,r),f&&(this.wEt.fn(Eo.aa,this.yEt),await f.gn(),this.wEt.yn(Eo.aa,this.yEt),this.akt=void 0),await this.zTt(),await this._p(o)),this.vkt=o,t=await this.$Tt(d,e,n,r),this.bkt=t,this.mEt.cC=t.nt,this.jkt(t),t.Oat(this.akt)}await t.Bat(tc.mht),this.$kt(t)}}else{0;const t=this.bkt;if(t&&!t.Npt){await t.Mat(),this.z2();const e=this.ckt(f.Zpt,f.Jgt);this.UTt(e)&&await this.ZTt(e),this.vkt=e}}0;const _=this.pkt(a,r,!1,n);oh(_),this.y9=void 0,await this.akt.Bat(tc.mht),ot(n),this.fkt(),await _,ot(n),this.o8(),this.rZ=!1,this.MEt(new ga(this.yR)),this.eEt()}catch(t){if(Se(t))return void 0;0}}eEt(){if(this.ZR||this.nI||void 0===this.ZB)return;const t=this.yR;var e,i;this.yR+this.ZB-this.vI.md.maximumOffset<t?null==(e=this.VG)||e.Cn():null==(i=this.VG)||i.SI()}async pkt(t,e,i,s){let n,r,o=!0,h=t;for(;;){const a={stack:[],error:void 0,hasError:!1};try{const u=this.Bkt;if(u.V>0){const e=u.ZL(t);h!==e&&(u.gr(h)&&this.Nyt.ndt.pw===gn._W||(h=e,o=!0))}if(o)o=!1,null==r||r.Xw(),r=new $t,r.zw(s),n=go(this.LEt(h,e,i,r.Bw),r),oh(n);else if(!this.Okt&&!this.A4)break;const c=rs(a,$t.Yw([s]),!1);await Promise.race([n,this.uy([Mi.Yy,Mi.Sy],c.Bw),this.Nyt.ndt.uy(ge.Jht,c.Bw)])}catch(t){a.error=t,a.hasError=!0}finally{ae(a)}}}async LEt(t,e,i,s){for(this.LB.Sb(t,e,i);this.Okt||this.A4;)await this.LB.uy([Mi.zy,Mi.My],s)}mkt(){void 0===this.Akt&&(this.Akt=this.gkt,this.LB.fn(Mi.qy,this.PEt),this.LB.fn(Mi.zy,this.MEt))}wkt(){if(void 0===this.Akt)return;const t=this.gkt;this.Akt=void 0,this.LB.yn(Mi.qy,this.PEt),this.LB.yn(Mi.zy,this.MEt),this.gkt!==t&&this.xc()}BEt(t){this.Fo=this.Fo.KL(t)}NEt(t){const e=this.Nyt.ndt,i=e.Dpt.filter((t=>t.ct>=.2));if(0===i.length)return;const s=i[0];if(t<=s.Cn)return s;for(const e of i)if(e.jn>t)return e;return e.pw!==gn._W?i[i.length-1]:void 0}GAt(t){let e=t.Kpt;for(;e&&e.ct<.2;)e=e.Kpt;return e}UAt(t){let e=t.jpt;for(;e&&e.ct<.2;)e=e.jpt;return e}async ka(t,e,i){const s={stack:[],error:void 0,hasError:!1};try{var n;if(this.iH.yG(t.contentProtection),this.OEt(),this.wc&&!Bn(this.wc)&&await this.tr(),!t||Bn(t))return;const o=rs(s,$t.Yw([i]),!1);this.cW=$t.Yw([o.Bw]),this.wc=t,this.FEt=e,this.kpt=t.abr,this.upt=t.ignoreEmbeddedTextTrackTypes;const h=qZ(new HZ(this.aW,Boolean(this.wc.useCredentials),this.Zlt),this.Lut);var r;if(this.ESt(!0),this.rEt=new CZ({MC:As.Ah(this.wc.src),DSt:null!=(r=null==(n=this.wc.latencyConfiguration)?void 0:n.targetOffset)?r:this.wc.liveOffset,OSt:this.wc.timeServer,AE:this.wc.useCredentials},this.VEt(this.kpt),this.aW,h,this.wc.dash),this.Nyt=this.rEt.Tr,this.Nyt.ndt.yn(Mi.By,this.WEt),this.Nyt.ndt.yn(Mi.Oy,this.UEt),this.Nyt.ndt.yn(aZ.jAt,this.GEt),this.Nyt.ndt.yn(ge.Jht,this.tkt),await this.HEt.$n(this.Nyt.ndt),await this.ZEt.$n(this.Nyt.ndt),qt(this.upt,Vr.EMSG)||(this.qgt=new yX(this.oW),this.Ul.xG(this.qgt.Z),await this.qgt.$n(this.Nyt.ndt)),t.latencyConfiguration){const e=t.latencyConfiguration;this.VG=new AX(this,this.LB,e),this.VG.Rt=!0,this.KG.Sa(this.VG)}this.Nkt(),o.Ww()}catch(t){s.error=t,s.hasError=!0}finally{ae(s)}}async XEt(){const t=this.Nyt.ndt.GR;var e,i;(this.ESt(t),t)?this.Ykt():(await Promise.all([null==(e=this.akt)?void 0:e.Mat(tc.Pht),null==(i=this.bkt)?void 0:i.Mat(tc.Pht)].filter(ne)),this.sEt(),this.DEt(),this.skt.Xw())}get GR(){return this.kSt}ESt(t){this.kSt!==t&&(this.kSt=t,this.yo(t?new dt:new fn))}Nkt(){this.Nyt&&(this.zEt=this.qEt(this.zEt,this.cW.Bw).catch(this.Xpt))}async qEt(t,e){t&&(await t,ot(e));try{this.QR===hl.qB||this.M9?await this.YEt(e):this.QR===hl.jV&&await this.KEt(e)}catch(t){throw Zr(t),this.PH(new A(Ja.MANIFEST_LOAD_ERROR,t.message,t)),t}}async YEt(t){await this.KEt(t),this.jEt||(this.jEt=!0,this.hkt.zw(this.$n(this.FEt,t)));try{await this.hkt.Bb}catch(t){Zr(t),this.PH(new A(Ja.MEDIA_DECODE_ERROR,t.message,t))}}async KEt(t){await hu(this.rEt.W,t);const e=this.Nyt.ndt;if(void 0===this.VG&&e.pw===gn._W){const t=e.Ayt,i=(null==t?void 0:t.sSt)?(null==t?void 0:t.sSt)/1e3:e.CSt,s={minimumOffset:(null==t?void 0:t.tSt)?(null==t?void 0:t.tSt)/1e3:.5*i,maximumOffset:(null==t?void 0:t.iSt)?(null==t?void 0:t.iSt)/1e3:1.5*i,targetOffset:i,forceSeekOffset:2.5*i,minimumPlaybackRate:Pt,maximumPlaybackRate:gt};this.VG=new AX(this,this.LB,s),this.KG.Sa(this.VG)}}$kt(e){const i=this.akt;e!==i&&(this.akt&&this.Kkt(this.akt),this.bkt&&this.Qkt(this.bkt),i&&this.Dkt(this.Pkt),this.akt=e,this.bkt=i,this.Gkt(this.akt),this.bkt&&this.jkt(this.bkt),this.rO.cC=e.ht,this.hO.cC=e.rt,this.vEt(e),this.wEt.fn(Eo.aa,this.yEt),t.QEt(this.wEt),this.wEt.yn(Eo.aa,this.yEt),this.wEt.cC=e.nt,this.mEt.cC=void 0,this._Et())}static QEt(t){for(const e of t.oC)e.TE=yh.Ch}ge(){this.LB.ge()}be(){this.LB.be()}PH(t){this.HG||(oh(this.tr()),this.HG=Te(t),this.ZG=t,this.yo(new Wa(t)))}OEt(){this.HG=void 0,this.ZG=void 0}GTt(){const t=this.qG;t&&(t.j3&&(t.j3.mj=this.dZ.xj),t.K3&&(t.K3.mj=this.dZ.xj))}HTt(){const t=this.qG;t&&(t.j3&&(t.j3.yj=this.dZ.yj),t.K3&&(t.K3.yj=this.dZ.yj))}determineStallJumpTarget(){if(this.akt)return this.akt.Ept()&&this.yR>this.akt.jn-QN&&!this.akt.Ppt?this.akt.jn:void 0}async tr(){if(this.JEt)return this.JEt;try{this.JEt=this.$Et(),await this.JEt}finally{this.JEt=void 0}}async $Et(){this.zR=1,this.cW.Xw(),this.DEt(),this.sEt(),this.skt.Xw(),this.hkt.Xw(),this.tEt=!1,this.bI(),this.M9=!1,this.IEt=!1,this.rO.cC=void 0,this.hO.cC=void 0,this.wEt.cC=void 0,this.mEt.cC=void 0,this.zEt&&(await this.zEt.catch(Bt),this.zEt=void 0),await Promise.all([this.okt,this.Y9,this.nkt,this.hkt.Bb.catch(Bt)]),this.akt&&(await this.akt.gn(!0),this.akt=void 0),this.bkt&&(this.Qkt(this.bkt),await this.bkt.gn(!0),this.bkt=void 0),await this.zTt(),this.vkt=void 0,this.fEt=void 0,this.lH.tr(),await this.HEt.tr(),await this.ZEt.tr(),void 0!==this.qgt&&(this.Ul.DG(this.qgt.Z),await this.qgt.gn(),this.qgt=void 0),this.oW.tr(),this.Nyt&&(this.Nyt.ndt.fn(Mi.By,this.WEt),this.Nyt.ndt.fn(Mi.Oy,this.UEt),this.Nyt.ndt.fn(aZ.jAt,this.GEt),await this.rEt.gn(),this.Nyt=void 0),this.Mkt=!1,this.txt=NaN,this.ixt=0,this.sxt=0,this.Akt=void 0,this.S9=!1,this.Fo=ee.fB(),this.RW=!0,this.y9=void 0,this.nxt=!1,this.rZ=!1,this.jEt=!1,this.hkt=new as,this.Ekt=0,this.xkt=0,this.Rkt=0,this.wc=void 0,this.FEt=void 0,this.upt=[],this.pEt=void 0,this.KG.tr(),this.VG=void 0,this.qTt={uO:0,cO:0,lO:0},await this.hH.tr(),this.LB.cH(),this.rxt.tr()}async gn(){this.Bo(),this.OEt(),await this.tr(),this.Bo(),this.rO.gn(),this.hO.gn(),this.wEt.gn(),this.mEt.gn(),this.Ul.gn(),this.lH.gn(),this.oxt.Ww(),await this.HEt.gn(),await this.ZEt.gn(),this.oW.gn(),this.rxt.gn(),this.LB.fn(Mi.Sy,this.Y8),this.LB.fn(rh.Ey,this.u9),this.LB.fn(Mi.xy,this.hxt),this.LB.fn(Mi.qy,this.PEt),this.LB.fn(Mi.zy,this.MEt),this.LB.fn(Mi.Xy,this.qkt),this.LB.fn(Mi.$y,this.xc),this.LB.fn([Mi.so,Mi.Uy],this.axt),this.LB.fn(TX,this.Ds),await this.hH.gn(),this.Ul.gn(),this.dZ.fn("vj",this.uxt),this.dZ.fn("wj",this.cxt),this.LB.fn(sn.ua,this.lxt),this.LB.fn([Mi.wy,Mi.py],this.Ds),this.LB.fn(Mi.ob,this.Jpt),this.LB._H=void 0,this.iH.fn("contentProtectionsTracked",this.dxt),this.LB.f7=void 0}pI(){return this.LB.wa}_a(){return this.LB.aH}get NR(){return!1}TI(){return!1}kI(){}EI(){}xI(){}RI(){this.ekt(!0)}get ZB(){var t;const e=null==(t=this.Nyt)?void 0:t.ndt;if(e&&e.pw===gn._W&&e.lyt)return e.sdt().getTime()/1e3-e.lyt.getTime()/1e3-this.yR}DI(t){const e=this.LB.uH(t);return this.rxt.tt(e),e}constructor(t,e,i,s,n,r,o){super(),this.akt=void 0,this.bkt=void 0,this.M9=!1,this.txt=NaN,this.HG=void 0,this.ZG=void 0,this.S9=!1,this.Akt=void 0,this.y9=void 0,this.nxt=!1,this.ixt=0,this.sxt=0,this.Mkt=!1,this.cW=new $t,this.hkt=new as,this.jEt=!1,this.Nyt=void 0,this.rEt=void 0,this.kSt=!0,this.Ikt=!0,this.xEt=void 0,this.Fo=ee.fB(),this.zG=hl.YH,this.zEt=void 0,this.RW=!0,this.wc=void 0,this.FEt=void 0,this.kpt=void 0,this.upt=[],this.rZ=!1,this.ikt=new $t,this.okt=Promise.resolve(),this.q9=new $t,this.Y9=Promise.resolve(),this.tEt=!1,this.IEt=!1,this.skt=new $t,this.nkt=Promise.resolve(),this.vkt=void 0,this.qgt=void 0,this.Ekt=0,this.xkt=0,this.Rkt=0,this.QG=new Qh,this.pEt=void 0,this.qTt={uO:0,cO:0,lO:0},this.qG=void 0,this.VG=void 0,this.Ykt=t=>{var e,i,s;let n;"Wpt"===(null==t?void 0:t.type)&&(n=t.Vdt),n&&(null==(e=n.Edt)?void 0:e.pw)===Io.cE&&(null==(s=this.bt)||null==(i=s.dash)?void 0:i.forceRecreateMediaSourceOnAudioSwitch)?this.ekt(!0):this.ekt()},this.Jpt=t=>{var e;null==(e=this.akt)||e.Jpt(t)},this.xc=()=>{this.yo(new I(this.yR,this.mR))},this.u9=t=>{this.yo(new NZ(this.yR,t.yw,t.bb))},this.Hkt=t=>{this.Ekt+=t.fO,this.yo(t)},this.Zkt=t=>{const e=t.segments.filter((t=>t.Vct));t.track===Io.cE?this.xkt=e.length:t.track===Io.lE&&(this.Rkt=e.length)},this.Y8=()=>{const t=this.ct;S(t)||t===this.txt||(this.txt=t,this.yo(new re(this.txt)))},this.axt=()=>{this.tkt(),this.EEt()},this.hxt=t=>{this.IEt||!this.kR||this.nI||(this.IEt=!0,this.yo(null!=t?t:new Fs(this.yR)))},this.UEt=t=>{this.Ds(t),this.Mkt||(this.Mkt=!0,this.oxt.fxt())},this.WEt=()=>{this.Nyt.ndt.fn(Mi.By,this.WEt),this.yo(new $i)},this.zkt=t=>{var e;if(t.errorObject.code===Ja.CONTENT_PROTECTION_OUTPUT_RESTRICTED&&(null==(e=this.akt)?void 0:e.Zpt.every((t=>!t.Bdt))))return;this.PH(t.errorObject),this.yo(t)},this.Xkt=t=>{this.PH(t.errorObject)},this.Xpt=t=>{Se(t)||this.PH(new A(Ja.MEDIA_DECODE_ERROR,t.message,t))},this.tkt=()=>{if(!this.ZR)if(this.Skt())if(this.kkt()){const t=this.Nyt.ndt.xSt;this.Sb(t,!0)}else;else{const t=this.Nyt.ndt.xSt;this.Sb(t,!0)}},this.PEt=t=>{this.nxt=this.nI,this.yo(t)},this.MEt=t=>{const e=this.nxt,i=this.nI;this.nxt=i,e&&!i&&this.yo(t),this.hxt()},this.qkt=()=>{const t=this.cI,e=this.hI;this.ixt===t&&this.sxt===e||(this.ixt=t,this.sxt=e,this.yo(new P))},this.yEt=t=>{const e=t.Ht;e.TE===yh.Jn?(this.lEt(e),this.fEt=e):e===this.fEt&&e.TE===yh.Ch&&(this.fEt=void 0,this._Et())},this.CEt=()=>{this.S9||this.xEt&&(this.xEt.Mb(),this.xEt=void 0)},this.TEt=t=>{this.S9||this.xEt&&(this.xEt.Lb(t),this.xEt=void 0)},this.GEt=()=>{this.XEt().catch(this.Xpt)},this.lxt=t=>{this.PH(_k(t.lt))},this.uxt=()=>{this.GTt()},this.cxt=()=>{this.HTt()},this.dxt=t=>{this.XTt(t.wG)},this.aW=t,this.Lut=new bX(n),this.LB=r,this.QTt=o,this.dZ=i,this.dZ.yn("vj",this.uxt),this.dZ.yn("wj",this.cxt),this.KG=s,this.Zlt=e.retryConfiguration,this.rO=new Xh,this.hO=new Xh,this.iH=new Gh(t),this.iH.yn("contentProtectionsTracked",this.dxt),this.LB.yn(Mi.Sy,this.Y8),this.LB.yn(rh.Ey,this.u9),this.LB.yn(Mi.xy,this.hxt),this.LB.yn(Mi.qy,this.PEt),this.LB.yn(Mi.zy,this.MEt),this.LB.yn(Mi.Xy,this.qkt),this.LB.yn(Mi.$y,this.xc),this.LB.yn([Mi.so,Mi.Uy],this.axt),this.LB.yn(TX,this.Ds),this.LB.yn(sn.ua,this.lxt),this.LB._H=this.iH,this.LB.f7=this,this.LB.yn([Mi.wy,Mi.py],this.Ds),this.LB.yn(Mi.ob,this.Jpt),this.oxt=new EX(this,this.LB),this.lH=new q(this.oxt,!0),this.lH.yn(Zc.LL,this.tkt),this.lH.yn(no,this.Ds),this.wEt=new ut,this.wEt.yn(Eo.aa,this.yEt),this.mEt=new ut,this.oW=this._xt(),this.HEt=new JZ(this.oW),this.ZEt=new dX(this.oW),this.hH=new Rx(this.LB,this.aW),this.rxt=new ha,this.Ul=new Wu([this.wEt,this.HEt.Z,this.ZEt.Z,this.hH.Z,this.rxt])}},EX=class extends Lx{get tI(){return this.ta.tI}fxt(){this.yo(new au(this.yR,this.tI))}constructor(t,e){super(e),this.ta=t}};function xX(t,e){const i=t.filter((t=>"urn:mpeg:dash:role:2011"===t.J6)).map((t=>t.Ix)).filter(ne);return e||qt(i,"main")?qt(i,"caption")?"captions":qt(i,"subtitle")?"subtitles":qt(i,"dub")?"translation":"main":qt(i,"sign")?"sign":qt(i,"description")?"descriptions":qt(i,"commentary")?"commentary":"alternative"}function RX(t,e){var i;const s=Ti([...t.kwt,...t.Ewt],(t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.J6));var n;const r=null!=(n=null==s||null==(i=s.Ix)?void 0:i.split(","))?n:[],o=[];for(const t of r){const i=Number(t),s=Ti(e,(t=>t.o===i));s&&o.push(s)}return o}var un=class extends kX{wI(){if(We(this.LB))return this.LB.wI()}get Vkt(){return We(this.LB)?this.LB.hI:0}get Ukt(){return We(this.LB)?this.LB.cI:0}async gn(){var t;await super.gn(),null==(t=this.vxt)||t.gn()}hEt(t){var e,i;return((null!=(i=null==(e=this.wc)?void 0:e.seamlessSwitchStrategy)?i:Pc.qB)!==Pc.qB||!Z.pg)&&super.hEt(t)}cEt(){return!(Z.Em&&Z.Rm<3)&&super.cEt()}_xt(){return new vV(this,new DL)}VEt(t){return fV(t)}constructor(t,e,i,s,n,r,o){super(t,e,i,s,n,r,new _V(o)),this.zrt=o,Z.jm&&(this.vxt=new xV(this))}},IX=class extends un{async gn(){await super.gn(),await this.mH.vH(this.LB)}constructor(t,e,i,s,n,r,o,h){const a=new ct(r);super(t,e,i,s,n,a.DH(o),h),this.mH=a}};r(),r(),r(),r(),r();var CX=class extends AV{get mxt(){return this.QE.mxt}vR(){return super.vR().Ab(this.mxt)}yot(){return super.yot().Ab(this.mxt)}l2(t,e,i){const s=this.mxt;return super.l2(t,{hit:e.hit-s,ct:e.ct,PV:e.PV-s},i)}N2(t,e){const i=this.mxt;return super.N2(_.max(0,t-i),_.max(0,e-i))}jS(t,e,i){const s=this.mxt;return super.jS(_.max(0,t-s),_.max(0,e-s),i)}u3(t,e){const i=this.mxt;super.u3(_.max(0,t-i),_.max(0,e-i))}l3(t,e){const i=this.mxt;super.l3(_.max(0,t-i),_.max(0,e-i))}constructor(t,e){super(e),this.QE=t}},PX=class extends yV{get mxt(){return this.QE.mxt}_d(){return super._d()+this.mxt}e4(t){super.e4(t-this.mxt)}sI(){return super.sI().Ab(this.mxt)}r4(t,e,i,s){const n=this.mxt;super.r4(t-n,e-n,i,s)}fot(t){return new CX(this,t)}constructor(t,e){super(e),this.lot(e),this.QE=t}},DX=class extends Xa{get qrt(){return this.LB}get mxt(){return this.gxt}set mxt(t){this.gxt=t}vR(){return super.vR().Ab(this.gxt)}gR(){return NX(super.gR(),this.gxt)}bR(){return super.bR()+this.gxt}_d(){return super._d()+this.gxt}jR(){return super.jR().Ab(this.gxt)}sI(){return super.sI().Ab(this.gxt)}Sb(t,e,i){const s=_.max(0,t-this.gxt);super.Sb(s,e,i)}UG(t){super.UG(NX(t,-this.gxt))}oI(){return this.Ul}DI(t,e,i,s,n,r,o,h){return this.oW.DI(t,e,i,s,n,r,o,h)}uH(t){return this.oW.uH(t)}lW(t){this.oW.lW(t)}cH(){this.oW.tr(),super.cH()}nH(){return!1}oH(t,e,i,s,n){throw new g("Not supported")}Ww(){return this.Vet.gn(),this.Fet.gn(),this.oW.gn(),this.Ul.gn(),super.Ww()}hot(t){return new PX(this,t)}oot(t){return new Qn(t)}II(t){let e;switch(t.type){case Mi.so:e=new Xt(t.currentTime+this.gxt);break;case Mi.Uy:e=new vl(t.currentTime+this.gxt);break;case Zc.BL:e=new ce(t.currentTime+this.gxt);break;case Mi.$y:e=new I(t.currentTime+this.gxt,NX(t.currentProgramDateTime,this.gxt));break;case Mi.Gy:e=new K(t.currentTime+this.gxt);break;case Mi.qy:e=new _t(t.currentTime+this.gxt);break;case Mi.zy:e=new ga(t.currentTime+this.gxt);break;case Mi.Dy:e=new aM(t.currentTime+this.gxt);break;case Mi.My:e=new jL(t.currentTime+this.gxt);break;case Mi.xy:e=new Fs(t.currentTime+this.gxt);break;case Mi.Hy:e=new Nu(t.currentTime+this.gxt,t.playbackRate);break;case Mi.eb:e=new eh(t.currentTime+this.gxt,t.volume);break;case Mi.Sy:e=new re(t.duration+this.gxt);break;case Zc.QI:e=new au(t.currentTime+this.gxt,t.readyState);break;default:e=t}super.II(e)}be(){super.be(),this.Fet.be()}ge(){super.ge(),this.Fet.ge()}constructor(t){super(t),this.gxt=0,this.oW=new vV(this,new DL),this.Ul=new Wu([this.oW.nt,super.oI()]),this.Fet=new fB,this.Fet.d7(this.XG.parentElement),this.Vet=new MO(this.Fet.we,this.Uu,this.Ul,this.Ll,this.wa,this.aH)}};function NX(t,e){return t?new Date(t.getTime()+1e3*e):void 0}var MX=class extends mV{DH(t){if(t===Io.lE)return new DX(super.DH(t))}async vH(t){const e=t;await e.Ww(),await super.vH(e.qrt)}},LX=class extends un{async _p(t){await super._p(t),void 0===this.pxt&&(this.pxt=this.wxt(),this.LB.mxt=this.pxt)}wxt(){if(this.ct===1/0){const t=this.Tkt;if(t.V>0)return _.max(0,t.Cn(0)-300)}return 0}K9(t,e,i,s,n,r,o,h){return void 0===r&&(r=!1),void 0===o&&(o=ac.iTt),void 0===h&&(h=!1),h||(h=this.ct===1/0&&Z.Em&&Z.Rm<3&&t<=this.yR),super.K9(t,e,i,s,n,r,o,h)}async tr(){await super.tr(),this.pxt=void 0,this.LB.mxt=0}async gn(){await super.gn(),await this.LB.Ww(),await this.mH.vH(this.LB)}static vT(t){var e;return(!t||"google-dai"!==(null==t||null==(e=t.ssai)?void 0:e.integration))&&(Z.Em&&Z.Rm<4)}constructor(t,e,i,s,n,r,o,h){const a=new MX(new ct(r));super(t,e,i,s,n,a.DH(o),h),this.mH=a,this.pxt=void 0}};r(),r(),r(),r(),r();var BX=class extends gV{get qrt(){return this.LB}get hI(){return this.LB.hI}get cI(){return this.LB.cI}constructor(t){super(t)}};r(),r(),r();var OX=class extends AV{got(){return this.yxt?this.Ij:super.got()}pot(t){this.yxt?this.Ij=t:super.pot(t)}vR(){return this.yxt?this.bxt:super.vR()}lT(){return this.yxt?this.IT:super.lT()}yot(){return this.yxt?this.Axt:super.yot()}bot(){return this.yxt?this.Ej:super.bot()}Aot(t){this.yxt?this.Ej=t:super.Aot(t)}l2(t,e,i){return this.d2((i=>this.Sxt(t,e,i)),i)}Sxt(t,e,i){return super.l2(t,e,i)}d3(){return this.d2((()=>this.Txt()))}Txt(){return super.d3()}_2(t,e,i){return this.d2((i=>this.kxt(t,e,i)),i)}kxt(t,e,i){return super._2(t,e,i)}SJ(){return this.yxt?this.nit:super.SJ()}i3(){this.yxt?this.Ext=!0:super.i3()}u3(t,e){this.yxt?(this.Axt=this.Axt.KL(new ee([t,e])),this.xxt.push({pw:"xct",LO:t,BO:e})):this.Rxt(t,e)}Rxt(t,e){super.u3(t,e)}N2(t,e){return this.d2((()=>this.Ixt(t,e)))}Ixt(t,e){return super.N2(t,e)}l3(t,e){this.yxt?(this.Axt=this.Axt.QL(new ee([t,e])),this.xxt.push({pw:"jS",LO:t,BO:e})):this.Cxt(t,e)}Cxt(t,e){super.l3(t,e)}jS(t,e,i){return this.d2((i=>this.Pxt(t,e,i)),i)}Pxt(t,e,i){return super.jS(t,e,i)}uJ(t){return this.d2((()=>this.Dxt(t)))}Dxt(t){return super.uJ(t)}async d2(t,e){this.U2(),this.yxt&&(await hu(this.yxt.Bb,e),this.U2()),ot(e);try{this.q2=t(e),await this.q2}finally{this.q2=void 0}}U2(){if(this.q2)throw new g("Internal error")}async Nxt(){if(this.yxt)throw new b("Already locked");this.yxt=new as,this.Mxt(),this.q2&&(await this.q2.catch(Bt),this.Mxt())}Lxt(){var t;null==(t=this.yxt)||t.Mb(),this.yxt=void 0,this.Bxt()}Mxt(){this.IT=super.lT(),this.Ij=super.got(),this.Ej=super.bot(),this.bxt=super.vR(),this.Axt=super.yot(),this.nit=super.SJ(),this.Ext=!1}Bxt(){this.U2(),super.pot(this.Ij),super.Aot(this.Ej);const t=this.xxt.slice();Pn(this.xxt);for(const e of t)"xct"===e.pw?this.Rxt(e.LO,e.BO):this.Cxt(e.LO,e.BO);this.Ext&&super.i3(),this.bxt.sB(super.vR())||this.yo(new pe(ss.KQ))}Ww(){var t;null==(t=this.yxt)||t.Xw(),this.yxt=void 0,super.Ww()}constructor(t){super(t),this.q2=void 0,this.yxt=void 0,this.Ij=0,this.bxt=ee.fB(),this.Axt=ee.fB(),this.xxt=[],this.nit=!1,this.Ext=!1,this.Ej=0,this.IT=t.md}},FX=class extends OX{vR(){var t,e;return super.vR().KL(null!=(e=null==(t=this.Oxt)?void 0:t._R)?e:ee.fB())}yot(){var t,e;return super.yot().KL(null!=(e=null==(t=this.Oxt)?void 0:t.o3)?e:ee.fB())}pot(t){super.pot(t),this.Oxt&&(this.Oxt.yj=t)}Aot(t){super.Aot(t),this.Oxt&&(this.Oxt.mj=t)}Rxt(t,e){super.Rxt(t,e),this.Oxt&&this.Oxt.u3(t,e)}Cxt(t,e){super.Cxt(t,e),this.Oxt&&this.Oxt.l3(t,e)}async Pxt(t,e,i){ot(i);const s=[];s.push(super.Pxt(t,e,i)),this.Oxt&&s.push(this.Oxt.jS(t,e,i)),await Promise.all(s)}hJ(t){return!!super.hJ(t)||this.QE.Fxt(t)}Dxt(t){return super.hJ(t)?super.Dxt(t):this.QE.Vxt(t)}Wxt(t){var e,i;null==(e=this.Oxt)||e.fn(Oo,this.Sot),this.Oxt=t,null==(i=this.Oxt)||i.yn(Oo,this.Sot)}constructor(t,e){super(e),this.Oxt=void 0,this.QE=t}},VX=class extends yV{hJ(t){const e=void 0!==this.Q3,i=void 0!==this.J3,s=t.o4.some((t=>Cl(t.Ik,"audio"))),n=t.o4.some((t=>Cl(t.Ik,"video")));return e===s&&i===n&&(!!super.hJ(t)||(!(!this.Uxt||!this.Uxt.hJ(t))||this.QE.Gxt(t)))}async uJ(t){return super.hJ(t)?await super.uJ(t):this.Uxt&&this.Uxt.hJ(t)?(this.Hxt(),await this.uJ(t)):(await this.QE.Zxt(t),await this.uJ(t))}Fxt(t){return this.hJ(this.Xxt(t))}Vxt(t){return this.uJ(this.Xxt(t))}Xxt(t){const e=this.md,i=e.o4.map((e=>Cl(t.Ik,"audio")&&Cl(e.Ik,"audio")||Cl(t.Ik,"video")&&Cl(e.Ik,"video")?t:e));return la({},e,{o4:i})}r4(t,e,i,s){super.r4(t,e,i,s),this.Uxt&&this.Uxt.r4(t,e,i,s)}zxt(){return!this.qxt&&this.Yxt}_d(){return void 0!==this.Kxt?this.Kxt:this.zxt()?this.IA:super._d()}e4(t){this.IA=t,this.Kxt=void 0,this.zxt()||super.e4(t)}cot(){return!this.zxt()&&super.cot()}i3(){this.Kxt=_.max(WX(this.qG.K3),WX(this.qG.j3)),this.zxt()||super.i3()}z2(){this.Kxt=void 0,this.zxt()||super.z2()}fot(t){return new FX(this,t)}jxt(){this.qxt=!this.qxt}Hxt(){const t=this.qG,e=this.Uxt;e&&(this.qxt=!this.qxt,this.lot(e),this.Qxt(t),this.zxt()&&this.Jxt())}Qxt(t){var e,i;this.Uxt=t,null==(e=this.Q3)||e.Wxt(null==t?void 0:t.K3),null==(i=this.J3)||i.Wxt(null==t?void 0:t.j3)}$xt(t){const e=this.qG,i=this.Uxt;if(!i)return;const s=this.qxt,n=s?e:i,r=(s?i:e)._R.uB(t);if(!r)return;const o=DV(n._R,this.yot()).uB(r.jn(0),ji);return!o||r.jn(0)+ji>=o.jn(0)?void 0:_.max(r.jn(0),o.Cn(0))}tRt(t,e){if(this.Yxt)return Promise.resolve();const i=this.qxt?this.Uxt:this.qG;return i?(this.Yxt=!0,this.eRt((e=>{if(ot(e),this.Yxt)return async function(t,e,i){ot(i);const s=[];t.K3&&s.push(eM(t.K3,e,i));t.j3&&s.push(eM(t.j3,e,i));await Promise.all(s),t.i3()}(i,t,e)}),e)):Promise.resolve()}Jxt(){if(!this.Yxt)return;const t=this.qxt?this.Uxt:this.qG;if(!t)return;var e;this.Yxt=!1;const i=null!=(e=this.Kxt)?e:this.IA;t.ct<i&&t.e4(i),t.z2()}iRt(t){var e;const i=null!=(e=this.Kxt)?e:this.IA;t.e4(i),this.qxt?this.lot(t):this.Qxt(t)}yot(){var t,e,i;const s=null!=(i=null==(t=this.Q3)?void 0:t.o3)?i:ee.fB();var n;const r=null!=(n=null==(e=this.J3)?void 0:e.o3)?n:ee.fB();return s.KL(r)}async eRt(t,e){const i=[];this.Q3&&i.push(this.Q3.Nxt()),this.J3&&i.push(this.J3.Nxt());try{await Promise.all(i),await t(e)}finally{this.Q3&&this.Q3.Lxt(),this.J3&&this.J3.Lxt()}}vot(t){t.type===ss.KQ&&this.QE.Q2(),super.vot(t)}constructor(t,e){super(e),this.Uxt=void 0,this.IA=NaN,this.qxt=!1,this.Yxt=!1,this.Kxt=void 0,this.lot(e),this.QE=t}};function WX(t){if(!t)return 0;const e=t._R;return e.V>0?e.jn(e.V-1):0}function Ou(t){return t.md.pw===zr._W}r();var UX=class extends BX{get sRt(){return this.nRt}vR(){return super.vR().KL(this.nRt._R)}_d(){if(!this.rRt){const t=this.qG;if(t&&Ou(t))return t.ct}return super._d()}Krt(){return!!super.Krt()&&!(!this.rRt&&!this.SJ())}jrt(){return!!super.jrt()&&!(!this.rRt&&super.Krt()&&!this.SJ())}SJ(){const t=this.qG;return!(!t||!Ou(t))&&t.SJ}jR(){return this.Fo.KL(this.LB.KR)}sI(){return super.sI().KL(this.nRt.iI)}eI(){return super.eI()}Yrt(){var t;return null!=(t=super.Yrt())?t:this.nRt.YG}AI(){return this.hZ=!1,super.AI()}bI(){this.hZ=!0,super.bI()}o7(){this.rRt=!0,super.o7(),this.nRt.o7()}h7(){this.rRt=!1,super.h7(),this.nRt.o7()}bR(){var t;return null!=(t=this.y9)?t:super.bR()}rI(){return void 0!==this.y9||super.rI()}Sb(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.oRt.Xw(),this.q9.Xw(),this.q9=new $t,this.hRt=go(this.K9(t,e,i,this.hRt,this.q9.Bw),this.q9).catch(Bt)}async K9(t,e,i,s,n){this.y9=t,this.j9=t,this.yo(new _t(t)),s&&await s.catch(Bt),ot(n),this.qG&&Ou(this.qG)&&this.qG.Jxt(),this.y9=void 0,super.Sb(t,e,i),this.nRt.Sb(t,e,i),this.aRt()}UG(t){const e=this.YG;if(!e||S(e.getTime()))return;const i=(t.getTime()-e.getTime())/1e3;this.Sb(i)}l7(){super.l7(),this.nRt.l7()}get hI(){return this.uRt.hI}get cI(){return this.uRt.cI}be(){this.iZ&&(this.iZ=!1,this.uRt.be())}ge(){this.iZ||(this.iZ=!0,this.uRt.ge())}async cRt(){var t;this.y9=void 0,this.j9=NaN,this.Fo=ee.fB(),null==(t=this.lRt)||t.Xw(),this.oRt.Xw(),this.q9.Xw(),this.hRt&&(await this.hRt.catch(Bt),this.hRt=void 0)}eot(t){super.eot(t),this.nRt._H=t}iot(t){super.iot(t),this.nRt.f7=t}oI(){return this.Ul}DI(t,e,i,s,n,r,o,h){return this.oW.DI(t,e,i,s,n,r,o,h)}uH(t){return this.oW.uH(t)}oH(t,e,i,s,n){throw new g("Not implemented yet")}nH(){return!1}lW(t){this.oW.lW(t)}cH(){this.oW.tr(),super.cH()}async $n(t){const e=await super.$n(t);return Ou(e)&&this.aRt(),e}async tr(){await this.cRt(),await super.tr(),await this.nRt.tr()}async Ww(){await this.cRt(),this.oW.gn(),this.Ul.gn(),await super.Ww()}hot(t){return new VX(this,t)}oot(t){return new Qn(t)}aRt(){this.oRt.Xw(),this.oRt=new $t,this.hRt=go(this.dRt(this.hRt,this.oRt.Bw),this.oRt).catch(Bt)}async dRt(t,e){if(t&&await t.catch(Bt),this.qG&&Ou(this.qG))for(;;){let t;for(ot(e),this.fRt()&&this.jxt(),this.qG.Jxt(),ot(e);;){const i={stack:[],error:void 0,hasError:!1};try{if(ot(e),this.fRt())break;if(t=this.qG.$xt(this.bR()),void 0!==t){0,this._Rt(),await this.qG.tRt(t,e),ot(e),this.nRt.Sb(t);break}const s=rs(i,$t.Yw([e]),!1);await Promise.race([this.uy(Mi.$y,s.Bw),this.vRt(s.Bw)])}catch(t){i.error=t,i.hasError=!0}finally{ae(i)}}for(ot(e);!this.fRt();)await this.LB.uy([Mi.$y,Mi.xy,Zc.QI],e)}}fRt(){const t=this.qG;if(void 0===t||!Ou(t))return!1;const e=this.bR(),i=this.LB._R;if(!this.LB.kR&&i.gr(e))return!1;return!!DV(this.nRt._R,t.yot()).eB(e,e+ji)}jxt(){if(this.mRt)return;this.mRt=!0,this.Fo=this.jR();const t=lM(this),e=this.rI(),i=this.eI(),s=this.LB,n=this.nRt,r=this.qG;r.Jxt(),r.jxt(),dM(n,t),this.uot(n),this.nRt=s,s.bI(),s.FR=!0,this.mRt=!1;const o=this.rI();e!==o&&(o?this.yo(new _t(this.yR)):this.yo(new ga(this.yR)));const h=this.eI();i!==h&&this.yo(new au(this.yR,h)),o||this._Rt()}_Rt(){const t=this.LB,e=this.uRt;if(e===t)return;const i=this.cI,s=this.hI;this.uRt=t,this.iZ&&(e.be(),t.ge());const n=this.cI,r=this.hI;n>0&&r>0&&(i!==n||s!==r)&&this.yo(new P)}Gxt(t){return void 0!==this.nRt.IJ([t])}async Zxt(t){this._Rt();const e=this.qG,i=this.nRt;await i.tr();const s=await i.$n(t);e.iRt(s)}vRt(t){return this.lRt=new as,hu(this.lRt.Bb,t)}Q2(){var t;null==(t=this.lRt)||t.Mb()}II(t){t.type===Mi.qy&&this.j9===t.currentTime||(t.type===Mi.zy&&(this.j9=NaN,this._Rt()),t.type!==Zc.QI&&t.type!==Mi.Uy&&t.type!==Mi.xy||this.mRt||!this.fRt()?(t.type!==Mi.xy||this.kR)&&super.II(t):this.aRt())}constructor(t,e,i){super(t),this.rRt=!1,this.y9=void 0,this.j9=NaN,this.Fo=ee.fB(),this.hZ=!0,this.mRt=!1,this.iZ=!0,this.lRt=void 0,this.hRt=void 0,this.oRt=new $t,this.q9=new $t,this.nRt=e,this.uRt=t,this.LB.ge(),this.nRt.be(),this.oW=new vV(this,i),this.Ul=new Wu([this.oW.nt,super.oI()])}},GX=class extends UX{get qrt(){return this.LB}get sRt(){return this.nRt}be(){super.be(),this.Fet.be()}ge(){super.ge(),this.Fet.ge()}get XG(){return this.LB.XG}get C4(){return this.LB.C4}get gI(){return this.LB.gI}set gI(t){this.LB.gI=t}d7(t){this.LB.d7(t),this.nRt.d7(t)}xI(){this.LB.xI(),this.nRt.xI()}wI(){return this.LB.wI()}_a(){return this.nO}uot(t){const e=this.pI(),i=this.wI();super.uot(t),this.nO.cC=t.aH,this.pI()!==e&&this.yo(new Li),this.wI()!==i&&this.yo(new rk)}Ww(){return this.nO.gn(),this.Vet.gn(),this.Fet.gn(),super.Ww()}constructor(t,e){super(t,e,new DL),this.nO=new Oh(t.aH),this.Fet=new fB,this.Fet.d7(t.XG.parentElement),this.Vet=new MO(this.Fet.we,this.Uu,this.nt,this.Ll,this.wa,this.aH)}},HX=class extends mV{DH(t){if(t===Io.lE){const e=super.DH(t),i=super.DH(t);return new GX(e,i)}return super.DH(t)}async vH(t){t instanceof GX?(await t.Ww(),await super.vH(t.qrt),await super.vH(t.sRt)):await super.vH(t)}},ZX=class extends un{async gn(){await super.gn(),await this.mH.vH(this.LB)}static vT(t){var e;return!Z.Qs&&!Z.dg&&!(t&&"google-dai"===(null==(e=t.ssai)?void 0:e.integration))}constructor(t,e,i,s,n,r,o,h){const a=new ct(new HX(r));super(t,e,i,s,n,a.DH(o),h),this.mH=a}};r(),r(),r();var XX=class extends yV{fot(t){return new OX(t)}lT(){return this.gRt?this.IT:super.lT()}vR(){return this.gRt?this.bxt:super.vR()}_d(){return this.gRt?this.IA:super._d()}e4(t){this.gRt?(this.IA=t,this.pRt=!0):super.e4(t)}sI(){return this.gRt?this.wRt?this.wRt.m3():this.n4:super.sI()}r4(t,e,i,s){this.gRt?this.wRt=new ko(t,e,i,s):super.r4(t,e,i,s)}cot(){return this.gRt?this.nit&&!1!==this.Ext:super.cot()}i3(){this.gRt?this.Ext=!0:super.i3()}z2(){this.gRt?this.Ext=!1:super.z2()}hJ(t){return!this.gRt&&super.hJ(t)}uJ(t){return this.gRt?Promise.reject(new b("Not supported")):super.uJ(t)}async Nxt(){if(this.gRt)throw new b("Already locked");this.gRt=!0,this.Mxt();const t=[];this.Q3&&t.push(this.Q3.Nxt()),this.J3&&t.push(this.J3.Nxt()),await Promise.all(t)}Lxt(){this.gRt=!1,this.Q3&&this.Q3.Lxt(),this.J3&&this.J3.Lxt(),this.Bxt()}Mxt(){this.IT=super.lT(),this.bxt=super.vR(),this.IA=super._d(),this.n4=super.sI(),this.pRt=!1,this.Ext=void 0,this.wRt=void 0}Bxt(){if(this.pRt&&(super.e4(this.IA),this.pRt=!1),void 0!==this.wRt){const t=this.wRt;super.r4(t.Cn,t.jn,t.g3,t.w3),this.wRt=void 0}void 0!==this.Ext&&(this.Ext?super.i3():super.z2(),this.Ext=void 0)}constructor(t){super(t),this.gRt=!1,this.bxt=ee.fB(),this.IA=0,this.pRt=!1,this.nit=!1,this.Ext=void 0,this.n4=ee.fB(),this.wRt=void 0,this.lot(t),this.IT=t.md}},zX=class extends Xa{get qrt(){return this.LB}AI(){return void 0!==this.qG&&Ou(this.qG)&&this.kR&&this.Sb(0),super.AI()}Sb(t,e,i){void 0!==this.qG&&Ou(this.qG)&&this.kR&&t<this.ct&&this.yRt(),super.Sb(t,e,i)}o7(){this.bRt=!0,super.o7()}h7(){this.bRt=!1,this.ARt()||super.h7()}ARt(){return this.bRt||this.SRt}TRt(){this.SRt||(this.SRt=!0,super.o7())}kRt(){this.SRt&&(this.SRt=!1,this.ARt()||super.h7())}$n(t){this.ERt.Xw();const e=this.zE(t,this.xRt);return this.RRt=e,e}async zE(t,e){return e&&await e.catch(Bt),this.kRt(),await super.$n(t)}hot(t){return new XX(t)}oot(t){return new Qn(t)}tr(){this.ERt.Xw();const t=this.$Et(this.xRt);return this.RRt=t,t}async $Et(t){return t&&await t.catch(Bt),this.kRt(),await super.tr()}yRt(){this.TRt(),this.ERt.Xw(),this.ERt=new $t,this.xRt=go(this.IRt(this.RRt,this.xRt,this.ERt.Bw),this.ERt).catch(Pu)}async IRt(t,e,i){t&&await t.catch(Bt),e&&await e.catch(Bt),ot(i);const s=this.qG;if(!s||!Ou(s))return;const n=s.md;await s.Nxt(),await this.LB.tr();const r=await this.LB.$n(n);r.e4(s.ct),s.lot(r),s.Lxt(),this.kRt()}async Ww(){this.ERt.Xw(),this.xRt&&(await this.xRt.catch(Bt),this.xRt=void 0),this.ARt()&&super.h7(),await super.Ww()}constructor(...t){super(...t),this.bRt=!1,this.SRt=!1,this.RRt=void 0,this.xRt=void 0,this.ERt=new $t}},qX=class extends mV{DH(t){if(t===Io.lE)return new zX(super.DH(t))}async vH(t){const e=t;await e.Ww(),await super.vH(e.qrt)}static vT(){return Z._g}};O(new class extends $F{nP(t,e,i,s,n,r,o,h){const a=new iV(Qa.Lg.krt,Qa.Lg.Trt,Qa.Lg.Srt,Qa.Lg.xrt);let u;u=LX.vT(h)?LX:ZX.vT(h)?ZX:IX;let c=e;return qX.vT()&&(c=new qX(c)),new u(i,s,n,r,a,c,Io.lE,t)}LH(){return!0}constructor(...t){super(...t),this.BH=ti.cG}}),r(),r(),Nh((function(t){return class extends t{ma(){const t=this.PR.ga;return nh(super.ma(),{get hesp(){return t}})}}}),co.nu),r(),r(),r(),r(),r();var YX=0;function KX(t,e){if(void 0===e&&(e=!0),!t)return;let i=t;return"/"===i.charAt(0)&&(i=i.substring(1)),e&&"/"!==i.charAt(i.length-1)&&(i+="/"),i}function jX(t){var e,i,s;return la({},t,{baseUrl:KX(t.baseUrl),id:null!=(e=t.id)?e:String(YX++),timeBounds:la({},t.timeBounds,{scale:null!=(i=t.timeBounds.timescale)?i:1e3}),currentTime:t.currentTime?{value:t.currentTime.timestamp,scale:null!=(s=t.currentTime.timescale)?s:1e3}:void 0,audio:t.audio.map(iz),video:t.video.map(nz),metadata:t.metadata.map(oz),events:t.events.map(lz)})}var QX=0;function JX(t){const e=KX(t.initPattern,!1),i=KX(t.contPattern,!1);var s;return la({},t,{id:null!=(s=t.id)?s:String(QX++),continuationPattern:i?Am(i,"${segmentId}","{segmentId}"):void 0,initializationPattern:e?Am(e,"${initId}","{initId}"):void 0})}function $X(t){var e;const i=KX(t.initPattern,!1),s=KX(t.contPattern,!1);return la({},t,{continuationPattern:s?Am(s,"${segmentId}","{segmentId}"):void 0,initializationPattern:i?Am(i,"${initId}","{initId}"):void 0,segmentDuration:t.segmentDuration?{value:t.segmentDuration.duration,scale:t.segmentDuration.timescale}:void 0,segments:t.segments.map(tz),activeSegment:null==(e=Ti(t.segments,(t=>t.active)))?void 0:e.id})}function tz(t){var e;return la({},t,{timeBounds:la({},t.timeBounds,{endTime:void 0!==t.timeBounds.duration?t.timeBounds.startTime+t.timeBounds.duration:void 0,scale:null!=(e=t.timeBounds.timescale)?e:1e3})})}function ez(t){return t&&"-"===t.charAt(0)}function iz(t){let e;try{var i;e=x(null!=(i=t.channels)?i:"2")}catch(t){e=2}return ez(t.contPattern)||ez(t.initPattern)?function(t,e){const i=t.initPattern,s=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,la({},JX(t),{baseUrl:KX(t.baseUrl),language:"eng",channels:e,sampleRate:t.samplerate,tracks:t.tracks.map((t=>{var e,n;return t.initPattern=null!=(e=t.initPattern)?e:i,t.contPattern=null!=(n=t.contPattern)?n:s,sz(t)}))})}(t,e):la({},JX(t),{baseUrl:KX(t.baseUrl),language:"eng",channels:e,sampleRate:t.samplerate,tracks:t.tracks.map(sz)})}function sz(t){let e;try{var i;e=x(null!=(i=t.channels)?i:"2")}catch(t){e=2}return ez(t.contPattern)||ez(t.initPattern)?function(t,e){return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,la({},$X(t),{baseUrl:"./",channels:e,sampleRate:t.samplerate})}(t,e):la({},$X(t),{baseUrl:KX(t.baseUrl),channels:e,sampleRate:t.samplerate})}function nz(t){return ez(t.contPattern)||ez(t.initPattern)?function(t){const e=t.initPattern,i=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,la({},JX(t),{baseUrl:KX(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map((t=>(t.initPattern=e,t.contPattern=i,rz(t))))})}(t):la({},JX(t),{baseUrl:KX(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(rz)})}function rz(t){var e,i;return ez(t.contPattern)||ez(t.initPattern)?function(t){var e,i;return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,la({},$X(t),{baseUrl:"./",frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:la({},t.resolution,{sarWidth:null==(e=t.resolution.sar)?void 0:e.width,sarHeight:null==(i=t.resolution.sar)?void 0:i.height})})}(t):la({},$X(t),{baseUrl:KX(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:la({},t.resolution,{sarWidth:null==(e=t.resolution.sar)?void 0:e.width,sarHeight:null==(i=t.resolution.sar)?void 0:i.height})})}function oz(t){var e;return la({},t,{id:null!=(e=t.id)?e:String(QX++),schemeId:"",tracks:t.tracks.map(hz)})}function hz(t){return la({},t,{segments:t.segments.map(uz)})}var az=0;function uz(t){return{id:az++,timeBounds:la({},t.timeBounds,{scale:t.timeBounds.timescale})}}var cz=0;function lz(t){var e,i;return la({},t,{id:null!=(e=t.id)?e:String(cz++),timeBounds:la({},t.timestamp,{scale:null!=(i=t.timestamp.timescale)?i:1e3})})}var dz=class{async CRt(t,e){const i={qu:t,Bw:e},s=await this.aR.zk(i);let n=await s.Sk(e);return function(t){const e=t;if(Kt(e.manifestVersion)&&Dh(e.manifestVersion,"alpha"))return!0;let i,s;for(const t of e.presentations){for(const e of[...t.video,...t.audio])if(e.tracks.length>0){i=e.tracks[0],s=e;break}if(ne(i))break}return(Kt(null==s?void 0:s.initPattern)||Kt(null==i?void 0:i.initPattern))&&!Kt(null==i?void 0:i.initializationPattern)&&!Kt(null==s?void 0:s.initializationPattern)}(n)&&(n=function(t){return la({},t,{availabilityDuration:{value:t.dvrDuration?t.dvrDuration.duration/t.dvrDuration.timescale:0},manifestVersion:"1.0.0",presentations:t.presentations.map(jX),contentBaseUrl:t.contentBaseUrl||"./"})}(n)),n}constructor(t){this.aR=t}};r();var fz=class extends Bo{get ga(){return this.Za||(this.Za=cS(this)),this.Za}FC(){return this.PRt.FC()}get LC(){return this.PRt.LC}get BC(){return this.PRt.BC}get OC(){return this.PRt.OC}yn(t,e){this.PRt.yn(t,e)}fn(t,e){this.PRt.fn(t,e)}constructor(t){super(),this.PRt=t}};r(),r(),r();var wr=class{get tit(){const t=1-this.DRt**this.NRt;return this.MRt/t}rut(t,e){const i=this.DRt**t,s=e*(1-i)+i*this.MRt;S(s)||(this.MRt=s,this.NRt+=t)}uJ(t){const e=_.exp(_.log(.5)/t);if(e===this.DRt)return;if(0===this.NRt)return void(this.DRt=e);const i=this.tit,s=1-e**this.NRt;this.MRt=i*s,this.DRt=e}constructor(t){this.MRt=0,this.NRt=0,this.DRt=_.exp(_.log(.5)/t)}},Ze=class t{get tit(){return this.fut()?_.max(this.LRt.tit,this.BRt.tit):this.ORt}rut(t){const e=As.Bg(),i=t;this.FRt&&void 0!==this.VRt&&e-this.VRt>=this.WRt&&this.tr(),this.URt+=1,this.LRt.rut(1,i),this.BRt.rut(1,i),this.GRt.push(i),this.GRt.length>this.HRt&&this.GRt.shift(),this.VRt=e}fut(){return void 0!==this.VRt&&As.Bg()-this.VRt<=this.WRt}tr(){this.LRt=new wr(this.ZRt),this.BRt=new wr(this.XRt),this.URt=0,this.GRt=[],this.VRt=void 0}constructor(e=t.zRt,i=t.qRt,s=t._ut,n=!1){this.URt=0,this.GRt=[],this.VRt=void 0,this.WRt=6e4,this.HRt=10,this.ZRt=e,this.XRt=i,this.ORt=s,this.FRt=n,this.LRt=new wr(e),this.BRt=new wr(i)}};Ze.zRt=2,Ze.qRt=5,Ze._ut=.1,r();var _z=class{hj(t){for(const e of this.YRt)e.hj(t)}aj(t){for(const e of this.YRt)e.aj(t)}uj(t,e){for(const i of this.YRt)i.uj(t,e)}cj(t){for(const e of this.YRt)e.cj(t)}constructor(t){this.YRt=t}};r();var vz=class{hj(t){this.KRt=t}aj(t){this.jRt.rut(t-this.KRt)}uj(t){}cj(t){}constructor(t){this.KRt=0,this.jRt=t}};r();var mz=class{aj(t){this.QRt=t}uj(t,e){this.gut.rut(t-this.QRt,e.byteLength),this.QRt=t}cj(t){}hj(t){}constructor(t){this.QRt=0,this.gut=t}};r();var gz=class{hj(t){}uj(t,e){const i=e.byteLength,s=this.JRt;this.JRt=i;const n=t-this.An;this.An=t,this.$Rt.i$(e);const r=!this.$Rt.tIt(),o=i>=this.eIt;s!==As.Ys.ep&&r&&o&&this.gut.rut(n,i)}aj(t){this.An=t}cj(t){}constructor(t,e=0){this.$Rt=new pz,this.An=0,this.JRt=0,this.gut=t,this.eIt=e}},pz=class extends vo{tIt(){return this.iIt}i$(t){this.iIt=!1,super.i$(t)}t$(t,e){this.sIt&&this.sIt!==Mt.aD||(this.iIt=!0),super.t$(t,e),this.sIt=t}d$(t){return!1}_$(t){}m$(t){}constructor(...t){super(...t),this.sIt=void 0,this.iIt=!1}};r();var wz=function(t){return t.nIt="sample",t}({}),yz=class extends Bo{iG(){if(!this.fut())return;const t=As.Bg();t-this.rIt>1e3&&(this.rIt=t,kl.Lg.iG(this.tit))}constructor(...t){super(...t),this.rIt=0}};r();var bz=class extends yz{get tit(){return this.fut()?this.MRt:this.oIt}fut(){return this.JA.length>=3}rut(t,e){if(0===t)return;const i={mG:8*e/t,hIt:e};if(this.JA.push(i),this.aIt+=i.hIt,this.JA.length>30){const t=this.JA.shift();this.aIt-=t.hIt}const s=this.JA.slice().sort(((t,e)=>t.mG-e.mG));let n=0;for(let t=0;t<s.length;t++){const e=s[t];if(n+=e.hIt/this.aIt,this.MRt=e.mG,n>=.5)break}this.iG(),this.yo(new pe(wz.nIt))}constructor(t){super(),this.JA=[],this.aIt=0,this.oIt=t,this.MRt=t}};r();var Ct=class t extends yz{rut(t,e){const i=8*e/t;this.LRt.rut(t,i),this.BRt.rut(t,i),this.uIt+=e,this.iG(),this.yo(new pe(wz.nIt))}get tit(){return this.fut()?_.min(this.LRt.tit,this.BRt.tit):this.ORt}fut(){return this.uIt>=this.cIt}constructor(e=t.zRt,i=t.qRt,s=t.lIt,n=t._ut){super(),this.uIt=0,this.cIt=s,this.LRt=new wr(e),this.BRt=new wr(i),this.ORt=n}};Ct.lIt=128e3,Ct._ut=lI,Ct.zRt=.5,Ct.qRt=5;var Az=class{dIt(t){var e;null==(e=this.gut)||e.fn(wz.nIt,this.fIt),this.gut=new bz(t),this.gut.yn(wz.nIt,this.fIt)}_It(t){this.vIt.push(t)}mIt(t){we(this.vIt,t)}get mG(){var t,e;return null!=(e=null==(t=this.gut)?void 0:t.tit)?e:this.gIt}get gG(){return this.pIt.tit}pG(t){if("segment"!==t.pw)return;if("video"!==t.bE)return;const e=[new vz(this.pIt)];return this.gut&&("stream"===t.Xk&&"initialization-segment"!==t.yE?e.push(new gz(this.gut,1e3)):e.push(new mz(this.gut))),new _z(e)}constructor(t,e){this.vIt=[],this.fIt=()=>{for(const t of this.vIt)t()},this.gIt=t>0?t:Ct._ut,this.pIt=new Ze(Ze.zRt,Ze.qRt,e>0?e:Ze._ut),this.dIt(this.gIt)}};r();var Sz=class{wIt(t,e){const i=e-t;(!this.yIt||i<this.yIt)&&(this.yIt=i)}bIt(t,e){this.AIt=e-t}SIt(t,e){this.TIt=e-t}kIt(t,e){this.EIt=e-t}get xIt(){const t=Gs([this.TIt,this.EIt].filter(ne),Fd);return void 0!==t?As.Bg()/1e3+t:void 0!==this.AIt?As.Bg()/1e3+this.AIt:void 0!==this.yIt?As.Bg()/1e3+this.yIt:void 0}RIt(t){const e=this.xIt;if(void 0!==e)return e-t}tr(){this.yIt=void 0,this.AIt=void 0,this.EIt=void 0,this.TIt=void 0}};r();var Tz=.25,kz=400,Ez={minimumOffset:.2,targetOffset:.45,maximumOffset:.7,forceSeekOffset:3,minimumPlaybackRate:Pt,maximumPlaybackRate:gt},xz={minimumOffset:.4,targetOffset:.65,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:Pt,maximumPlaybackRate:gt},Rz={minimumOffset:.4,targetOffset:.7,maximumOffset:.9,forceSeekOffset:3,minimumPlaybackRate:Pt,maximumPlaybackRate:gt},Iz={minimumOffset:.2,targetOffset:.45,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:Pt,maximumPlaybackRate:gt},Cz={minimumOffset:.5,targetOffset:1.125,maximumOffset:1.75,forceSeekOffset:2.55,minimumPlaybackRate:Pt,maximumPlaybackRate:gt};function Pz(t){if(As.Jp.ew){const e=(kz+250)/1e3,i=_.max(e,t.minimumOffset),s=_.max(i+Tz,t.targetOffset),n=_.max(s+Tz,t.maximumOffset);return{minimumOffset:i,targetOffset:s,maximumOffset:n,forceSeekOffset:_.max(n+Tz,t.forceSeekOffset),minimumPlaybackRate:Pt,maximumPlaybackRate:gt}}return t}function Dz(){let t;return t=As.Ys.Kg?Iz:As.Ys.tp?xz:As.Ys.$g?"Android"===As.Jp.$p?Rz:Ez:Cz,As.Jp.ew?Pz(t):t}r(),r(),r();var Nz=class{IIt(t){for(const e of this.bxt)e[1]=e[1].Sn(t)}CIt(t,e){let i=!0;for(const s of this.bxt){let n=s[1];n=n.QL(e),t===s[0]&&(n=n.KL(e),i=!1),s[1]=n.YL(1e-5)}i&&this.bxt.push([t,e])}PIt(t){for(const e of this.bxt)e[1]=e[1].QL(t)}DIt(t){for(let e=0;e<this.bxt.length;e++)if(this.bxt[e][1].gr(t))return this.bxt[e][0]}constructor(){this.bxt=[]}},Mz=class extends Bo{get _R(){let t=ee.fB();for(const[,e]of this.NIt){const i=e.hit+e.PV,s=i+e.ct;t=t.KL(ee.dB(i,s))}return this.wot._R.KL(t)}DIt(t){return this.MIt.DIt(t)}get LIt(){return void 0!==this.BIt}get OIt(){return this.BIt?this.BIt.Bb:Promise.resolve()}async appendStream(t,e,i){if(this.LIt)throw new g("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=rs(s,$t.Yw([i,this.K2.Bw]),!1).Bw;this.MIt.IIt(this._R),this.BIt=new as;const r=$D(t).getReader();for(;;){const t=await hu(r.read(),n);if(t.done)break;const i=t.value,s={pw:Ut.QQ,Zk:ju(i.map((t=>t.Nut)))},o={ct:vf(i,(t=>t.ct)),hit:i[0].avt,PV:-e.nat.FIt};await this.f2(s,o,n);const h=o.hit+o.PV,a=h+o.ct;this.MIt.CIt(e.nat,ee.dB(h,a))}}catch(t){s.error=t,s.hasError=!0}finally{ae(s)}}finally{e.VIt();const t=this.BIt;this.BIt=void 0,null==t||t.Mb()}}async l2(t,e,i,s){if(this.LIt)throw new g("Concurrent appends are not supported.");try{const n={stack:[],error:void 0,hasError:!1};try{const r=rs(n,$t.Yw([s,this.K2.Bw]),!1).Bw;this.BIt=new as,await this.f2(t,e,r);const o=e.hit+e.PV,h=o+e.ct;this.MIt.IIt(this._R),this.MIt.CIt(i,ee.dB(o,h))}catch(t){n.error=t,n.hasError=!0}finally{ae(n)}}finally{const t=this.BIt;this.BIt=void 0,null==t||t.Mb()}}async f2(t,e,i){this.wot.n3===Io.lE&&this.WIt.ddt(t.Zk,e.hit,e.hit+e.ct,e.PV,this.Oyt,!1);const s=this.LB.GB.UB,n=this.wot._R.gr(this.LB.yR);if(s||n)return await this.UIt(i),await this.wot.l2(t,e,i);this.NIt.push([t,e]);const r=this.NIt[0][1].hit;return this.NIt[this.NIt.length-1][1].hit-r>=.4?await this.UIt(i):void 0}async _2(t,e){if(this.LIt)throw new g("Concurrent appends are not supported.");try{const i={stack:[],error:void 0,hasError:!1};try{const s=rs(i,$t.Yw([e,this.K2.Bw]),!1).Bw;this.BIt=new as,await this.UIt(s),await this.wot._2(t,{},s),this.wot.n3===Io.lE&&this.WIt.Pot(t.Zk)}catch(t){i.error=t,i.hasError=!0}finally{ae(i)}}finally{const t=this.BIt;this.BIt=void 0,null==t||t.Mb()}}async jS(t,e,i){if(this.LIt)throw new g("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=rs(s,$t.Yw([i,this.K2.Bw]),!1).Bw;this.BIt=new as,await this.UIt(n),await this.wot.jS(t,e,n),this.MIt.PIt(ee.dB(t,e))}catch(t){s.error=t,s.hasError=!0}finally{ae(s)}}finally{const t=this.BIt;this.BIt=void 0,null==t||t.Mb()}}async rY(t){if(this.LIt)throw new g("Concurrent appends are not supported.");try{const e={stack:[],error:void 0,hasError:!1};try{const i=rs(e,$t.Yw([t,this.K2.Bw]),!1).Bw;this.BIt=new as,await this.UIt(i)}catch(t){e.error=t,e.hasError=!0}finally{ae(e)}}finally{const t=this.BIt;this.BIt=void 0,null==t||t.Mb()}}async UIt(t){for(const[e,i]of this.NIt)await this.wot.l2(e,i,t);Pn(this.NIt)}async Ww(){for(this.K2.Ww();this.LIt;)await this.OIt}constructor(t,e,i,s){super(),this.NIt=[],this.BIt=void 0,this.K2=new $t,this.LB=e,this.wot=t,this.Oyt=i,this.WIt=s,this.MIt=new Nz,this.wot.yn(ss.KQ,this.Ds)}};r(),r();var Lz=class{async GIt(t,e){if(this.HIt>=this.ZIt.maxRetries)throw t;const i=this.XIt(this.HIt++);await on(i,e)}XIt(t){let e=0;return 0!==t&&(e+=_.min(this.ZIt.maximumBackoff,this.ZIt.minimumBackoff*(2**t-1))),e}constructor(t){this.HIt=0,this.ZIt=t}};r(),r();var Bz=function(t){return t.zIt="emsgdata",t}({}),Oz=class extends pe{constructor(t,e){super("emsgdata"),this.value=t,this.data=e}};r();var Fz=class{start(t){this.NQ=t}qIt(t){this.NQ.enqueue(t)}};r(),r();var vn=function(t){return t.YIt="initdata",t.MANIFEST_UPDATE="manifestupdate",t.KIt="timestamps:v1",t}({});var Vz="urn:theo:hesp:2020";function Wz(t){if(t.lL!==Vz)return;const e=t.Ix;if(e===vn.YIt){return function(t){if(!t||!V(t))return;const e=t;return!Ad(e.index)||!Ad(e.offset)||e.index<0&&e.offset<0?void 0:{pw:"initdata",index:e.index,offset:e.offset}}(JSON.parse(Yg(na(t._L),new Ui)))}if(e===vn.MANIFEST_UPDATE){return function(t){if(!t||!V(t))return;const e=t;return!ne(e.url)||Kt(e.url)?{pw:"manifestupdate",url:e.url}:void 0}(JSON.parse(Yg(na(t._L),new Ui)))}if(e===vn.KIt){const e=na(t._L),i=new Ui,s=Qr(e,i).toNumber()/t.lN,n=Qr(e,i).toNumber()/1e3,r=os(e,i)/1e3;let o;return i.tc+8<=e.byteLength&&(o={hours:os(e,i),minutes:Ng(e,i),seconds:Ng(e,i),frames:Ni(e,i)}),{pw:vn.KIt,jIt:s,QIt:n,JIt:r,$It:o}}}var Uz=class extends Fz{transform(t){if(t.pw===Mt.cD)try{const e=Wz(jo.nN(t.Zk));e&&this.tCt.yo(new Oz(e.pw,e))}catch(t){false}this.qIt(t)}Ww(){this.tCt.Bo()}constructor(...t){super(...t),this.tCt=new Bo}};r();var Gz=class{start(t){this.p_=new Hz(t)}transform(t){this.p_.i$(t)}flush(){this.p_.n$()}},Hz=class extends vo{d$(t){return!0}_$(t){this.NQ.enqueue(t)}m$(t){}constructor(t){super(),this.NQ=t}};r(),r();var Zz=fo.fromNumber(Lu);var Xz=class extends Bo{async zk(t){for(;;)try{return await this.aW.zk(t)}catch(e){if(Se(e))throw e;await this.eCt.GIt(e,t.Bw)}}constructor(t,e){super(),this.aW=t,this.eCt=e}};function zz(t,e,i,s,n,r,o,h){const a=new aa;return n&&a.Ak(function(t,e){return void 0===e&&(e=Zz),new aa({Range:"bytes="+t.toString()+"-"+e.toString()})}(n.start,n.end)),{qu:t,qk:a,AE:!1,Bw:h,pw:Wr.$k,yE:i,bE:s,pE:r,wE:o,Xk:e,kE:e===$r.pk}}r(),r();var qz=function(t){return t[t.INITIALIZER=0]="INITIALIZER",t[t.FRAMES=1]="FRAMES",t}({}),Yz=class extends Fz{transform(t){this.iCt.push(t),t.pw===Mt.aD&&this.sCt(this.iCt.splice(0),qz.FRAMES)}sCt(t,e){const i={lN:this.RA,Xq:this.hY},s=ju(t.map((t=>Th(t.Zk.Zk)))),n=Ti(t,Kz),r=jo.qD(n.Zk.Zk)[0],o={bE:this.sut,bb:i,Nut:s,pw:e,ct:this._d(r)/this.RA,avt:to(this.nCt(r),this.RA)};this.qIt(o)}_d(t){const e=t.Z[0];if(!e||0===e.iL.length)return 0;var i;const s=null!=(i=e.WD.zM)?i:0;return e.iL[0].uL.reduce(((t,e)=>{var i;return t+(null!=(i=e.ct)?i:s)}),0)}nCt(t){var e,i;return null!=(i=null==(e=t.Z[0].sL)?void 0:e.sL)?i:fo.UZERO}constructor(t,e){super(),this.iCt=[],this.hY=t,this.sut=this.hY.match(/video/)?Yi.lE:Yi.cE,this.RA=e}};function Kz(t){return t.pw===Mt.eD}r();var jz=class extends Bo{get nat(){return this.rCt}olt(t){return t+1}get oCt(){return!1}get hCt(){return this.aCt}get LIt(){return void 0!==this.BIt}get OIt(){return this.BIt?this.BIt.Bb:Promise.resolve()}Sb(t){this.aCt=t,this.uCt=void 0,this.cCt=void 0}lCt(){return void 0!==this.uCt}async dCt(){if(this.LIt)throw new g("Concurrent downloads are not supported.");try{this.BIt=new as;let t;if("now"===this.aCt)t=As.Kp(this.rCt.fCt("now"),this.rCt._Ct);else{const e=this.aCt,i=0===e?1:this.rCt.vCt(e);t=As.Kp(this.rCt.fCt(i),this.rCt._Ct)}const e=zz(t,$r.vk,De.iE,this.sut,void 0,3e3,1e3,this.mCt.Bw),i=await this.gCt.zk(e),s=await i.xk(this.mCt.Bw),n=new j(s),{pCt:r,gN:o}=function(t){const e=St.DD(new US(na(t),new Ui)),i=Ti(e,(t=>t.pw===Mt.dD||t.pw===Mt.eD));if(void 0===i)return{pCt:t,gN:void 0};const s=ei(t,0,i.tc),n=ei(t,i.tc);return{pCt:s,gN:0===n.byteLength?void 0:n}}(n),h=jo.qD(na(n));this.RA=function(t){const e=Ti(t,(t=>t.pw===Mt.dP));return e.Z[0].gN.WD.lN}(h);const a=function(t){const e=t.filter((t=>t.pw===Mt.cD)),i=e.map((t=>Wz(t))),s=Ti(i,(t=>(null==t?void 0:t.pw)===vn.YIt));if(!s)throw new g("No init data in init response");return s}(h);let u;if(this.uCt=a.index,this.cCt=a.offset,o){u=function(t,e,i){var s;const n=Ti(t,(t=>t.pw===Mt.eD));var r;const o=to(null!=(r=null==(s=n.Z[0].sL)?void 0:s.sL)?r:fo.UZERO,i),h=n.Z[0];var a;const u=null!=(a=h.WD.zM)?a:0,c=h.iL[0],l=c.uL.reduce(((t,e)=>{var i;return t+(null!=(i=e.ct)?i:u)}),0)/i;return{hit:o,ct:l,PV:e}}(jo.qD(na(n)),-this.nat.FIt,this.RA)}return{initialization:r,data:o,metadata:u}}finally{const t=this.BIt;this.BIt=void 0,null==t||t.Mb()}}wCt(){if(this.LIt)throw new g("Concurrent downloads are not supported.");this.BIt=new as;const t=void 0!==this.cCt?fo.fromNumber(this.cCt):void 0;return Eb(this.yCt(this.uCt,t,this.mCt.Bw)).pipeThrough(new Ho(new Yz(this.nat.Xq,this.RA))).pipeThrough(new Ho(new Qz(this.mCt.Bw)))}async yCt(t,e,i){const s=this.bCt(t,e,i);return(await this.gCt.zk(s)).Rk().pipeThrough(new Ho(new Gz)).pipeThrough(new Ho(this.ACt))}bCt(t,e,i){const s=this.rCt.SCt(t),n=void 0!==e?{start:e,end:void 0}:void 0;return zz(As.Kp(s,this.rCt._Ct),$r.pk,De.Qk,this.sut,n,25e3,1e3,i)}VIt(){void 0!==this.uCt&&(this.uCt=this.olt(this.uCt)),this.cCt=void 0;const t=this.BIt;this.BIt=void 0,null==t||t.Mb()}cancelDownload(){var t;this.mCt.Xw(),this.mCt=new $t,this.BIt=null!=(t=this.BIt)?t:new as,this.uCt=void 0,this.cCt=void 0;const e=this.BIt;this.BIt=void 0,null==e||e.Mb()}async Ww(){this.Bo(),this.ACt.Ww(),this.mCt.Xw(),await this.OIt,this.uCt=void 0,this.cCt=void 0}constructor(t,e,i){super(),this.aCt="now",this.mCt=new $t,this.BIt=void 0,this.rCt=t,this.eCt=new Lz(i),this.ACt=new Uz,this.ACt.tCt.yn(Bz.zIt,this.Ds),this.aW=e,this.sut=function(t){switch(t){case Yi.cE:return xa.cE;case Yi.lE:return xa.lE;default:return xa.Qk}}(t.pw),this.gCt=new Xz(this.aW,this.eCt)}};var Qz=class{start(t){this.NQ=t,this.Zw.Lw(this.TCt)}flush(){this.Zw.Mw(this.TCt)}constructor(t){this.TCt=()=>{this.NQ.error(new $)},this.Zw=t}};function xr(t){var e;return t.value/(null!=(e=t.scale)?e:1)}r(),r(),r(),r(),r();var Jz="{initId}",$z=/{initId(?::0(?:\d+)d)?}/,tq=/{segmentId(?::0(?:\d+)d)?}/,eq=class{get o(){return this.US}get mG(){return this.sG}get Tyt(){return this.kCt}get Srt(){return this.Lbt}get ECt(){return this.xCt}get RCt(){return this.ICt}get _Ct(){return As.Kp(this.CCt,this.PCt._Ct)}get Urt(){return this.DCt}get kh(){return this.kO}get NCt(){return this.MCt}get LCt(){return this.BCt}get FIt(){return this.OCt}get FCt(){return this.xbt}Yn(t){this.xCt=t.activeSegment,this.ICt=t.activeSequenceNumber,this.Lbt=t.segments}constructor(t,e,i){var s,n,r,o;this.Lbt=[],this.zO=t,this.VCt=i,this.US=t.id,this.sG=t.bandwidth,this.kCt=t.averageBandwidth,this.CCt=null!=(s=t.baseUrl)?s:"",this.DCt=null!=(n=t.codecs)?n:e.codecs,this.MCt=null!=(r=t.continuationPattern)?r:e.continuationPattern,this.BCt=null!=(o=t.initializationPattern)?o:e.initializationPattern,this.kO=t.label,this.OCt=t.mediaTimeOffset?xr(t.mediaTimeOffset):0,this.xbt=t.segmentDuration?xr(t.segmentDuration):0,this.Yn(t)}},iq=class extends eq{get pw(){return Yi.cE}get PCt(){return this.VCt}get WCt(){return this.UCt}get Kdt(){return this.GCt}get eM(){return this.dA}get Xq(){return'audio/mp4; codecs="'+this.Urt+'"'}constructor(t,e,i){var s,n,r,o;super(t,e,i),this.UCt=null!=(s=t.channels)?s:1,this.GCt=null!=(r=null!=(n=t.frameRate)?n:e.frameRate)?r:1024,this.dA=null!=(o=t.sampleRate)?o:e.sampleRate}},sq=class extends eq{get pw(){return Yi.lE}get PCt(){return this.VCt}get HCt(){return this.gp}get Kdt(){return this.GCt}get Xq(){return'video/mp4; codecs="'+this.Urt+'"'}constructor(t,e,i){var s;super(t,e,i),this.gp=t.resolution,this.GCt=xr(null!=(s=t.frameRate)?s:e.frameRate)}};function nq(t,e){const i=String(e);if(t===Jz||"now"===e)return i;const s=x(t.substring(9,t.lastIndexOf("d")));return Uo(i,s,"0")}function rq(t,e){const i=String(e);if(t===Jz)return i;const s=x(t.substring(12,t.lastIndexOf("d")));return Uo(i,s,"0")}var oq=class{get mst(){return this.ZCt}get o(){return this.US}get XCt(){return this.zCt}get _Ct(){return As.Kp(this.CCt,this.mst._Ct)}get kh(){return this.kO}get FIt(){return this.OCt}get qCt(){return this.YCt}Yn(t){for(const e of this.hC){const i=Ti(t.tracks,(t=>e.o===t.id));i&&e.Yn(i)}}constructor(t,e,i){var s;this.VCt=t,this.hC=i,this.ZCt=e,this.US=t.id,this.zCt=t.alignId,this.CCt=null!=(s=t.baseUrl)?s:"",this.kO=t.label,this.OCt=t.mediaTimeOffset?xr(t.mediaTimeOffset):0,this.YCt=t.protection,this.Yn(t)}},hq=class extends oq{get PCt(){return this.VCt}get Z(){return this.hC}get gs(){return this.CA}get WCt(){return this.UCt}Yn(t){var e,i;super.Yn(t),this.CA=t.language,this.UCt=null!=(e=t.channels)?e:1,this.hY=null!=(i=t.mimeType)?i:"audio/mp4"}constructor(t,e){const i=[];super(t,e,i);for(const e of t.tracks)i.push(new iq(e,t,this))}},aq=class extends oq{get PCt(){return this.VCt}get Z(){return this.hC}Yn(t){var e;super.Yn(t),this.hY=null!=(e=t.mimeType)?e:"video/mp4"}constructor(t,e){const i=[];super(t,e,i);for(const e of t.tracks)i.push(new sq(e,t,this))}},uq=class{get o(){return this.US}get _Ct(){return As.Kp(this.CCt,this.jCt.KCt)}get QCt(){return this.JCt}get yR(){return this.nZ}get zq(){return this.Xf}get $Ct(){return this.tPt}get ePt(){return this.iPt}Yn(t){var e;this.JCt=t.timeBounds,this.Xf=null!=(e=t.events)?e:[],this.nZ=t.currentTime?xr(t.currentTime):void 0}constructor(t,e){var i,s,n;this.tPt=[],this.iPt=[],this.jCt=t,this.US=e.id,this.CCt=null!=(i=e.baseUrl)?i:"";for(const t of null!=(s=e.audio)?s:[])this.tPt.push(new hq(t,this));for(const t of null!=(n=e.video)?n:[])this.iPt.push(new aq(t,this));this.Yn(e)}},cq=class{get OC(){return this.jCt}get sPt(){return this.nPt}get rPt(){return this.oPt}get hPt(){return this.aPt}get uPt(){return this.cPt}get lPt(){return this.dPt}get s0(){return this.eA}get fPt(){return this._Pt}get KCt(){var t;return As.Kp(null!=(t=this.vPt)?t:"",this.mPt)}get gPt(){return this.pPt}Yn(t){var e;this.nPt=xr(t.availabilityDuration),this.oPt=t.creationDate,this.aPt=t.fallbackPollRate,this.cPt=t.manifestVersion,this.eA=t.streamType,this._Pt=t.activePresentation,this.vPt=t.contentBaseUrl,this.pPt=null==(e=t.timeSource)?void 0:e.url,this.jCt=t;for(const e of t.presentations){const t=Ti(this.dPt,(t=>t.o===e.id));t?t.Yn(e):this.dPt.push(new uq(this,e))}this.dPt=this.dPt.filter((e=>t.presentations.some((t=>t.id===e.o))))}constructor(t,e){this.dPt=[],this.mPt=t,this.jCt=e,this.Yn(e)}};r(),r();var lq=0,dq=class extends Bo{get Hnt(){return!0}get Tyt(){return this.wPt.Tyt}get mG(){return this.wPt.mG}get Urt(){return this.wPt.Urt}get o(){return this.wPt.o}get kh(){var t;return null!=(t=this.wPt.kh)?t:""}get TC(){return this.TO}get Ryt(){return this.wPt._Ct}get kyt(){}get Xq(){return this.wPt.Xq}get FIt(){return this.wPt.FIt}get _Ct(){return this.wPt._Ct}get pw(){return this.wPt.pw}vCt(t){const e=(t-this.wPt.PCt.mst.yR)*this.framesPerSecond();return _.round(this.wPt.RCt+e)}yPt(t){return t+1}fCt(t){var e;let i,s=this.wPt.LCt;for(;i=null==(e=s.match($z))?void 0:e.pop();)s=s.split(i).join(nq(i,t));return s+("now"===t?"?uuid="+cP():"")}SCt(t){var e;let i,s=this.wPt.NCt;for(;i=null==(e=s.match(tq))?void 0:e.pop();)s=s.split(i).join(rq(i,t));return s}sW(){}iW(){}constructor(t){super(),this.TO=lq++,this.wPt=t}},fq=class extends dq{get bPt(){return this.wPt}get Swt(){return this.wPt.eM}get Ht(){return this.zO}framesPerSecond(){return this.wPt.eM/this.wPt.Kdt}get ga(){return this.Za||(this.Za=xl(this)),this.Za}constructor(t,e){super(t),this.Za=void 0,this.zO=e}},_q=class extends dq{get bPt(){return this.wPt}get Eyt(){return 0}get Kdt(){return this.wPt.Kdt}get Ti(){return this.wPt.HCt.height}get ji(){return this.wPt.HCt.width}get HCt(){return this.wPt.HCt}get Ht(){return this.zO}framesPerSecond(){return this.wPt.Kdt}get ga(){return this.Za||(this.Za=_l(this)),this.Za}constructor(t,e){super(t),this.Za=void 0,this.zO=e}};r();var Sr=function(t){return t.APt="alternative",t.SPt="main",t.TPt="commentary",t.kPt="",t.KV="descriptions",t.EPt="main-desc",t.xPt="translation",t}({}),vq=function(t){return t.APt="alternative",t.SPt="main",t.TPt="commentary",t.kPt="",t.YV="captions",t.wC="sign",t.qV="subtitles",t}({}),mq=0,gq=class extends Bo{get SC(){return this.RPt()}get Rt(){return this.He}set Rt(t){this.Rt!==t&&(this.He=t,t&&this.IPt(),this.PPt.CPt(),this.yo(new Bc(this)))}get ga(){return this.Za||(this.Za=bi(this)),this.Za}get Edt(){return this.DPt}get o(){return this.VCt.o}get TC(){return this.TO}get kh(){var t;return null!=(t=this.VCt.kh)?t:""}get TE(){return this.Rt?"enabled":"disabled"}set TE(t){"enabled"===t?this.Rt=!0:"disabled"===t&&(this.Rt=!1)}get EC(){return this.wO}get xC(){return this.Wct}set xC(t){this.Wct=t,this.PPt.CPt(),this.yo(new UW(t,this))}xO(t){this.Rt=t}NPt(t){for(const e of this.wO.oC)e===t&&this.yo(new fG(e))}constructor(t,e,i){super(),this.wO=new Oc,this.TO=mq++,this.He=!1,this.Wct=void 0,this.VCt=e,this.PPt=i,this.DPt=new DZ(t,[]);for(const t of e.Z)this.wO.yO(this.createQuality(t))}},pq=class extends gq{get pw(){return Yi.cE}get Lt(){return Sr.SPt}get gs(){return this.VCt.gs}get PCt(){return this.VCt}IPt(){this.PPt.MPt(this)}RPt(){const t=this.PPt.LPt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new fq(t,this)}constructor(t,e){super(Io.cE,t,e)}},wq=class extends gq{get pw(){return Yi.lE}get Lt(){return vq.SPt}get gs(){return""}get PCt(){return this.VCt}IPt(){this.PPt.BPt(this)}RPt(){const t=this.PPt.OPt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new _q(t,this)}constructor(t,e){super(Io.lE,t,e)}};function yq(t,e,i,s){if(!t)return;const n=function(t,e,i){const s=[];for(const t of e){var n;const e=null!=(n=t.mimeType)?n:"audio/mp4";var r;const i=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(e+'; codecs="'+i+'"')}return bq(t,e,s,[],i)}(t,e?[e]:[],!s),r=function(t,e,i){const s=[];for(const t of e){var n;const e=null!=(n=t.mimeType)?n:"video/mp4";var r;const i=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(e+'; codecs="'+i+'"')}return bq(t,e,[],s,i)}(t,i?[i]:[],!s),o=iX(n,r);return t.preferredKeySystems&&(null==o?void 0:o.$gt)&&(o.$gt=lX(o.$gt,t.preferredKeySystems)),o}function bq(t,e,i,s,n){const r=e.map((t=>t.protection)).filter(ne);if(!r.length)return;const o=r[0].type,h=Ke(r,(t=>t.systems)),a=Ke(h,(t=>function(t,e){void 0===e&&(e=!0);const i=[],s=e?function(t){return ym.filter((e=>e.Aw===t.toLowerCase()))}(t.schemeId):function(t){return wm.filter((e=>e.Aw===t.toLowerCase()))}(t.schemeId);for(const e of s)i.push({LU:Aq(t)?t.uri:void 0,rT:e,TG:void 0,SG:t.pssh?[Da(t.pssh).buffer]:[]});return i}(t,n)));return{iU:t,tpt:{pTt:o},$gt:a,wTt:i,yTt:s}}function Aq(t){return t.schemeId===$v.mw&&void 0!==t.keyFormat&&void 0!==t.keyFormatVersions}r(),r(),r();var Sq;function Tq(t){const e=t.yR,i=t._R.uB(e);return i?i.jn(0)-e:0}Sq="Android"===As.Jp.$p?200:300;var kq=As.Ys.tp?1:.5,Eq=class{Cn(){1!==this.Ea&&(this.Ea=1,this.FPt=As.Op((()=>{this.VPt()}),Sq),this.WPt._It(this.UPt),this.LB.ZR?this.GPt.yn(Zc.BL,this.HPt):this.HPt())}SI(){0!==this.Ea&&(this.Ea=0,void 0!==this.FPt&&As.Fp(this.FPt),this.WPt.mIt(this.UPt),this.GPt.fn(Zc.LL,this.ZPt),this.GPt.fn(Zc.BL,this.HPt),this.XPt=void 0,this.yB())}get zPt(){return xq(this.qPt.LPt,this.qPt.OPt)}async VPt(){await this.YPt,this.YPt=this.KPt(),await this.YPt}jPt(t,e){const i=this.QPt(t,e),s=this.WPt.mG;for(const t of i){if(t.JPt<=s)return t}return i[i.length-1]}async KPt(){var t,e;const i=null==(t=this.qPt.LPt)?void 0:t.Ht,s=null==(e=this.qPt.OPt)?void 0:e.Ht,n=this.QPt(i,s);if(0===n.length)return void 0;const r=this.maybeSwitchToTargetQuality(n);if(r)return void await this.$Pt(r);const o=this.maybeGetUpSwitch(n);o&&await this.$Pt(o)}maybeSwitchToTargetQuality(t){const e=this.zPt;if(t.some((t=>Rq(t,e))))return;const i=this.WPt.mG;for(const e of t){if(e.JPt<=i)return e}return t[t.length-1]}maybeGetUpSwitch(t){var e,i;const s=this.WPt.mG;var n;var r;const o=(null!=(n=null==(e=this.qPt.LPt)?void 0:e.mG)?n:0)+(null!=(r=null==(i=this.qPt.OPt)?void 0:i.mG)?r:0);let h;for(const e of t){if(e.JPt<s&&e.JPt>o){h={tDt:e,Nft:As.Bg()};break}}if(!this.XPt||!Rq(this.XPt.tDt,null==h?void 0:h.tDt))return void(this.XPt=h);const a=As.Bg()-this.XPt.Nft,u=this.XPt.tDt.JPt,c=this.eDt.length>=3&&this.eDt.every((t=>t>u));if(a>1e3&&c){if(this.LB.GB.UB||As.Ys.Kg){const t=2*this.WPt.gG;if(!(Tq(this.LB)>t))return}else{const t=_.max(2*this.WPt.gG+kq,this.VG.vB.minimumOffset);if(!(Tq(this.LB)>t))return void(this.iDt&&this.iDt.minimumOffset===t||(this.yB(),this.iDt={minimumOffset:t},this.VG.gB(this.iDt)))}return this.XPt.tDt}}async $Pt(t,e){void 0===e&&(e=!1),this.XPt=void 0,this.yB();const i=this.zPt;if(i.sDt===t.sDt&&i.nDt===t.nDt)return;const s=t.sDt,n=t.nDt;i.nDt&&n&&i.nDt.mG>n.mG&&e&&(this.WPt.dIt(t.JPt),this.eDt=[]),await this.qPt.rDt(n,s)}yB(){this.iDt&&(this.VG.yB(this.iDt),this.iDt=void 0)}QPt(t,e){let i=[],s=[];var n;t&&(i=(null==(n=t.xC)?void 0:n.length)?t.xC:t.EC.oC);if(e){var r;const t=(null==(r=e.xC)?void 0:r.length)?e.xC:e.EC.oC,i=t.slice().sort(((t,e)=>t.mG-e.mG)),n=this.oDt(i);0===n.length&&t.length>0&&n.push(Gs(t,(t=>t.mG))),s=n}const o=[],h=i.length>0?i:[void 0],a=s.length>0?s:[void 0];for(const t of h)for(const e of a)o.push(xq(t,e));return function(t){return t.sort(((t,e)=>e.JPt-t.JPt))}(o)}oDt(t){for(let e=0;e<t.length;e++){const i=t[e].HCt;if(i.height>=this.LB.Ti&&i.width>=this.LB.ji)return t.slice(0,e+1)}return t.slice()}Ww(){this.XPt=void 0,this.GPt.tr(),this.yB()}constructor(t,e,i,s,n){this.LB=t,this.VG=e,this.qPt=i,this.hDt=s,this.WPt=n,this.Ea=0,this.YPt=Promise.resolve(),this.eDt=[],this.iDt=void 0,this.ZPt=()=>{var t,e;if(this.hDt.nI)return;const i=null==(t=this.qPt.LPt)?void 0:t.Ht,s=null==(e=this.qPt.OPt)?void 0:e.Ht,n=Gs(this.QPt(i,s),(t=>t.JPt));n&&(oh(this.$Pt(n,!0)),this.LB.GB.UB&&this.hDt.FC())},this.HPt=()=>{this.GPt.yn(Zc.LL,this.ZPt),this.GPt.fn(Zc.BL,this.HPt)},this.UPt=()=>{if(this.eDt.unshift(this.WPt.mG),this.eDt=this.eDt.slice(0,3),this.XPt){const t=this.XPt.tDt.JPt;this.WPt.mG<t&&(this.XPt=void 0,this.yB())}},this.GPt=new q(this.LB)}};function xq(t,e){var i;var s;return{sDt:t,nDt:e,JPt:(null!=(i=null==t?void 0:t.mG)?i:0)+(null!=(s=null==e?void 0:e.mG)?s:0)}}function Rq(t,e){var i,s,n,r;return void 0===t||void 0===e?t===e:(null==(i=t.sDt)?void 0:i.o)===(null==(s=e.sDt)?void 0:s.o)&&(null==(n=t.nDt)?void 0:n.o)===(null==(r=e.nDt)?void 0:r.o)&&t.JPt===e.JPt}r();var Iq=class t{static async create(e,i,s){const n=await Cq(e,i,s);return new t(n,e,i)}get obt(){return(this.aDt.serverTimeMs+(As.Bg()-this.aDt.localTimeMs))/1e3}get uDt(){return(this.aDt.localTimeMs-this.aDt.serverTimeMs)/1e3}async dRt(t,e,i){for(;!i.Nw;){await on(6e5,i);try{this.aDt=await Cq(t,e,i)}catch(t){Zr(t)}}}Ww(){this.OT.Xw()}constructor(t,e,i){this.OT=new $t,this.aDt=t,this.dRt(e,i,this.OT.Bw).catch(Bt)}};async function Cq(t,e,i){let[s,n,r]=await Pq(t,e,i);return n>20&&([s,n,r]=await Pq(t,e,i)),{localTimeMs:s,serverTimeMs:r-n/2}}async function Pq(t,e,i){const s=As.Bg(),n=await e.zk({gE:So.GET,qu:t,Bw:i}),r=As.Bg()-s,o=await n.Tk(i);return[s,r,1e3*Number(o)]}var Dq=class extends pe{constructor(){super("seek")}},Nq=function(t){return t.RZ="seek",t}({}),Mq=[Mi.so,Zc.QI,Mi.$y],Lq=class extends Bo{get OC(){return this.jCt}get _R(){return this.cDt&&this.lDt?this.cDt._R.Sn(this.lDt._R):this.cDt?this.cDt._R:this.lDt?this.lDt._R:ee.fB()}get LPt(){return this.dDt}get OPt(){return this.fDt}get ht(){return this.rO}get rt(){return this.hO}get _Dt(){return this.vDt.Bb}get W(){return this.mDt.Bb}get iI(){return this.jCt?function(t,e,i){var s;const n=null==(s=t.lPt[0])?void 0:s.yR,r=t.sPt;if(void 0===n||void 0===r)return i>0&&i<Lu?new ee([0,i],[!0,!0]):ee.fB();let o=e.xIt;if(!o){const e=WG(t.rPt).getTime()/1e3;o=n+(Date.now()/1e3-e)}return new ee([o-r,o],[!0,!0])}(this.jCt,this.gDt,this.LB.ct):ee.fB()}async pDt(){this.cDt&&await this.cDt.jS(0,1/0),this.lDt&&await this.lDt.jS(0,1/0)}$n(){if(!this.wc.src)throw new A(Ja.SOURCE_INVALID,"No src property found in given source.");this.opt||(this.opt=this.zE(this.cW.Bw).catch(this.M6))}async zE(t){this.yo(new $i);const e=this.wc.src,i=await this.wDt.CRt(e,t);this.jCt=new cq(e,i),this.jCt.gPt&&(this.yDt=await Iq.create(this.jCt.gPt,this.aW,t)),this.bDt();const s=this.jCt.lPt[this.jCt.lPt.length-1];this.createTracksForPresentation(s),this.vDt.Mb(),this.CPt()}MPt(t){for(const e of this.rO.oC)e.xO(e===t)}BPt(t){for(const e of this.hO.oC)e.xO(e===t)}CPt(){const t=Ti(this.rO.oC,(t=>t.Rt)),e=Ti(this.hO.oC,(t=>t.Rt)),i=this.dZ.jPt(t,e);oh(this.rDt(i.nDt,i.sDt))}bDt(){if(!this.jCt||"live"!==this.jCt.s0||!this.yDt)return;const t=this.jCt.lPt.filter((t=>t.o===this.jCt.fPt))[0].yR,e=this.yDt.uDt+new Date(this.jCt.rPt).getTime()/1e3;this.gDt.bIt(e,t)}createTracksForPresentation(t){var e,i,s,n;for(const e of null!=(s=t.$Ct)?s:[])this.rO.tt(new pq(e,this));for(const e of null!=(n=t.ePt)?n:[])this.hO.tt(new wq(e,this));null==(e=this.rO.aC(0))||e.xO(!0),null==(i=this.hO.aC(0))||i.xO(!0)}get LC(){return Gs([this.ADt,this.SDt].filter(ne),(t=>t.theolive))}get TDt(){const t=this.gDt.xIt;if(void 0!==t)return t}Cn(){this.kDt=!0,this.EDt()}SI(){var t;this.kDt=!1,this.xDt().catch(this.M6),"live"===(null==(t=this.OC)?void 0:t.s0)&&(this.RDt(),this.IDt())}RDt(){this.CDt&&this.CDt.cancelDownload()}IDt(){this.PDt&&this.PDt.cancelDownload()}FC(t){this.q9.Xw(),this.q9=new $t,this.Y9=eg((e=>this.DDt(t,this.Y9,e)),this.q9).catch(this.M6)}async DDt(t,e,i){if(e&&await e,await hu(this.W,i),"live"!==this.jCt.s0)throw new g("The current video source does not support Live playback.");if(ot(i),await this.xDt(),ot(i),this.CDt&&(this.CDt.lCt()||this.CDt.hCt!==(null!=t?t:"now"))){var s;if(this.RDt(),this.cDt){for(;this.cDt.LIt;)await hu(this.cDt.OIt,i);await this.cDt.jS(0,1/0)}null==(s=this.CDt)||s.Sb(null!=t?t:"now")}if(this.PDt&&(this.PDt.lCt()||this.PDt.hCt!==(null!=t?t:"now"))){var n;if(this.IDt(),this.lDt){for(;this.lDt.LIt;)await hu(this.lDt.OIt,i);await this.lDt.jS(0,1/0)}null==(n=this.PDt)||n.Sb(null!=t?t:"now")}this.yo(new Dq),ot(i),this.Y9=void 0,this.EDt()}Sb(t){this.q9.Xw(),this.q9=new $t,this.Y9=eg((e=>this.K9(t,this.Y9,e)),this.q9).catch(this.M6)}async K9(t,e,i){var s,n;e&&await e,await hu(this.W,i),ot(i),await this.xDt(),ot(i),this.CDt&&(this.CDt.lCt()||this.CDt.hCt!==t)&&this.RDt(),this.PDt&&(this.PDt.lCt()||this.PDt.hCt!==t)&&this.IDt(),this.yo(new Dq),ot(i),null==(s=this.CDt)||s.Sb(t),null==(n=this.PDt)||n.Sb(t),this.Y9=void 0,this.EDt()}rDt(t,e){var i,s;return(null==(i=this.CDt)?void 0:i.nat)===e&&(null==(s=this.PDt)?void 0:s.nat)===t?Promise.resolve():(this.NDt.Xw(),this.NDt=new $t,this.MDt=eg((i=>this.LDt(t,e,this.MDt,i)),this.NDt).catch(this.M6),this.MDt)}async LDt(t,e,i,s){i&&await i,await hu(this.vDt.Bb,s),ot(s),await this.xDt(),ot(s),await this.BDt(t,e),await this.ODt(t,e),ot(s),this.MDt=void 0,this.EDt()}async BDt(t,e){var i,s,n;const r=null!=(n=this.TDt)?n:"now";if((null==(i=this.CDt)?void 0:i.nat)!==e){var o;const t=this.CDt&&!this.CDt.lCt(),i=null==(o=this.CDt)?void 0:o.hCt;if(this.CDt&&(await this.CDt.Ww(),this.CDt=void 0),this.cDt&&await this.cDt.OIt,e){var h,a;const s=null!=(a=null==(h=this.cDt)?void 0:h._R)?a:ee.fB(),n=t?i:s.jn(s.V-1);this.CDt=new jz(e,this.aW,this.Zlt),this.CDt.yn(Bz.zIt,(t=>this.FDt(Io.cE,t))),this.CDt.Sb(null!=n?n:r)}}if((null==(s=this.PDt)?void 0:s.nat)!==t){var u;const e=this.PDt&&!this.PDt.lCt(),i=null==(u=this.PDt)?void 0:u.hCt;if(this.PDt&&(await this.PDt.Ww(),this.PDt=void 0),this.lDt&&await this.lDt.OIt,t){var c,l;const s=null!=(l=null==(c=this.lDt)?void 0:c._R)?l:ee.fB(),n=e?i:s.jn(s.V-1);this.PDt=new jz(t,this.aW,this.Zlt),this.PDt.yn(Bz.zIt,(t=>this.FDt(Io.lE,t))),this.PDt.Sb(null!=n?n:r)}}}async ODt(t,e){const i=function(t,e,i,s,n){const r=yq(t,null==e?void 0:e.Ht.PCt.PCt,null==i?void 0:i.Ht.PCt.PCt,s),o=aX(r),h=[];e&&h.push({Ik:e.Xq});i&&h.push({Ik:i.Xq});return{pw:zr._W,o4:h,JG:o,g4:n&&!s}}(this.wc.contentProtection,e,t,this.LB.GB.UB,this.wc.useManagedMediaSource);if(this.qG&&this.qG.hJ(i)){var s,n;const t=!(null==(s=this.CDt)?void 0:s.lCt());if(this.cDt&&t){for(;this.cDt.LIt;)await this.cDt.OIt;await this.cDt.rY()}const e=!(null==(n=this.PDt)?void 0:n.lCt());if(this.lDt&&e){for(var r,o;null==(r=this.lDt)?void 0:r.LIt;)await this.lDt.OIt;await(null==(o=this.lDt)?void 0:o.rY())}await this.qG.uJ(i)}else{this.RDt(),this.IDt(),this.cDt&&(await this.cDt.Ww(),this.cDt=void 0),this.lDt&&(await this.lDt.Ww(),this.lDt=void 0),this.LB.o7();try{await this.LB.tr(),this.qG=await this.LB.$n(i),this.mDt.Mb(),this.qG.K3&&this.CDt&&(this.qG.K3.yn(ss.KQ,this.Ds),this.cDt=new Mz(this.qG.K3,this.LB,e,this.VDt)),this.qG.j3&&this.PDt&&(this.qG.j3.yn(ss.KQ,this.Ds),this.lDt=new Mz(this.qG.j3,this.LB,t,this.VDt)),"live"===this.jCt.s0&&this.qG.e4(1/0)}finally{this.LB.h7()}}}EDt(){!this.kDt||this.Y9||this.MDt||this.WDt||this.UDt||(this.dZ.Cn(),this.GDt=new $t,this.PDt&&this.lDt&&(this.WDt=this.HDt(this.PDt,this.lDt,this.GDt.Bw).catch(this.M6)),this.CDt&&this.cDt&&(this.UDt=this.HDt(this.CDt,this.cDt,this.GDt.Bw).catch(this.M6)))}async xDt(){this.dZ.SI(),this.GDt&&(this.GDt.Xw(),this.GDt=void 0),this.WDt&&(await this.WDt,this.WDt=void 0),this.UDt&&(await this.UDt,this.UDt=void 0)}async HDt(t,e,i){for(await this.W;t.LIt;)await hu(t.OIt,i);for(;e.LIt;)await hu(e.OIt,i);if(!t.lCt()){const i=As.Bg()/1e3,s="now"===t.hCt,{initialization:n,data:r,metadata:o}=await t.dCt(),h={pw:Ut.QQ,Zk:n},a=r?{pw:Ut.QQ,Zk:r}:void 0,u=e._R;!As.Ys.Qg&&!this.LB.GB.UB&&o&&u.jn(u.V-1)>o.hit&&await e.jS(o.hit,1/0),await e._2(h),a&&await e.l2(a,o,t.nat);const c=e._R.QL(u);s&&c.V>0&&this.gDt.wIt(i,c.jn(c.V-1))}for(;!t.oCt;){ot(i);const s=t.wCt();await hu(e.appendStream(s,t),i)}}async Ww(){this.cW.Xw(),this.opt&&await this.opt.catch(Bt),this.Y9&&(this.q9.Xw(),this.RDt(),this.IDt(),await this.Y9.catch(Bt)),this.MDt&&(this.NDt.Xw(),this.RDt(),this.IDt(),await this.MDt.catch(Bt)),await this.xDt(),this.CDt&&await this.CDt.Ww(),this.PDt&&await this.PDt.Ww(),this.CDt=void 0,this.PDt=void 0,this.mDt.Xw(),this.vDt.Xw(),this.qG&&(await this.LB.tr(),this.qG=void 0),this.cDt=void 0,this.lDt=void 0,this.LB.fn(Zc.BL,this.WB),this.LB.fn(Mq,this.updateActiveQualities),this.rO.tr(),this.dDt=void 0,this.hO.tr(),this.fDt=void 0,this.jCt=void 0,this.yDt&&(this.yDt.Ww(),this.yDt=void 0),this.kDt=!1}constructor(t,e,i,s,n,r,o,h,a,u){super(),this.kDt=!1,this.ZDt=!1,this.rO=new Nn,this.hO=new Nn,this.XDt=void 0,this.dDt=void 0,this.fDt=void 0,this.vDt=new as,this.qG=void 0,this.opt=void 0,this.mDt=new as,this.cW=new $t,this.MDt=void 0,this.NDt=new $t,this.Y9=void 0,this.q9=new $t,this.CDt=void 0,this.cDt=void 0,this.UDt=void 0,this.PDt=void 0,this.lDt=void 0,this.WDt=void 0,this.GDt=void 0,this.WB=()=>{this.ZDt=!0},this.updateActiveQualities=()=>{var t,e;const i=this.LB.yR,s=null==(t=this.cDt)?void 0:t.DIt(i),n=null==(e=this.lDt)?void 0:e.DIt(i);if(this.dDt!==s&&(this.dDt=s,s))for(const t of this.rO.oC)t.NPt(s);if(this.fDt!==n&&(this.fDt=n,n))for(const t of this.hO.oC)t.NPt(n)},this.FDt=(t,e)=>{const i=e.data;if(i.pw===vn.KIt){const{QIt:e,JIt:n,jIt:r,$It:o}=i;if(this.yDt){const i=this.yDt.obt,s=this.LB.yR;if(this.ZDt&&0!==s){const o={theolive:i-e+r-s,engine:n,distribution:i-(e+n),player:r-s};t===Io.cE?(this.SDt=o,this.gDt.kIt(this.yDt.uDt+e,r)):(this.ADt=o,this.gDt.SIt(this.yDt.uDt+e,r))}}var s;if(o)null!=this.XDt||(this.XDt=this.LB.DI(Hi.jV,"timecode","timecode",void 0,!1,Vr.DEFAULT,!1,void 0)),this.XDt.uW(new Le(r,r,o,!1,void 0)),ho(this.XDt,null!=(s=this.LB._R.Cn(0))?s:-1)}this.yo(e)},this.M6=t=>{Se(t)||(this.SI(),this.yo(new Wa(new A(Ja.MEDIA_LOAD_ERROR,t.message))))},this.wc=t,this.wDt=e,this.LB=i,this.aW=n,this.gDt=r,this.dZ=new Eq(i,o,this,a,s),this.Zlt=h,this.VDt=u,this.LB.yn(Zc.BL,this.WB),this.LB.yn(Mq,this.updateActiveQualities)}};r();var Bq=class extends TT{XB(){const t=this.LB._R;return 0===t.V?0:t.jn(t.V-1)-this.LB.yR}FC(){this.ta.FC()}bB(){return Pz(super.bB())}zB(){return!As.Ys.Kg}constructor(t,e,i){super(t,e,i)}},Oq=[Mi.Xy,Mi.$y,Mi.xy,Mi.Hy,Mi.eb,Mi.Sy,Mi.Cy,Mi.Ry],Fq=class extends Bo{_C(){this.LB.yn(Oq,this.Ds),this.LB.yn(Zc.BL,this.TX),this.LB.yn([Mi.so,Mi.Uy],this.zDt),this.LB.yn(sn.ua,this.qDt),this.LB.yn(Mi.$y,this.ld),this.lH.yn(no,this.Ds)}dC(){this.LB.fn(Oq,this.Ds),this.LB.fn(Zc.BL,this.TX),this.LB.fn([Mi.so,Mi.Uy],this.zDt),this.LB.fn(sn.ua,this.qDt),this.LB.fn(Mi.$y,this.ld),this.lH.fn(no,this.Ds)}get ht(){return this.rO}get rt(){return this.hO}get OC(){var t,e;return null==(e=this.qPt)||null==(t=e.OC)?void 0:t.OC}get dI(){return this.LB.dI}set dI(t){this.LB.dI=t}get gI(){return!1}set gI(t){}get jG(){return this.QG}TI(){return!1}pI(){return this.LB.wa}_a(){return this.LB.aH}DI(t){return this.LB.uH(t)}be(){this.LB.be()}ge(){return this.LB.ge()}xI(){}RI(){}kI(){}EI(){}get FR(){return this.LB.FR}set FR(t){this.LB.FR=t}get yR(){var t;return null!=(t=this.YDt)?t:this.LB.yR}set yR(t){this.AR(t)}AR(t,e){this.q9.Xw(),this.q9=new $t,this.Y9=eg((e=>this.K9(t,e,this.Y9)),this.q9)}get mR(){const t=this.KDt();if(t)return new Date(t.getTime()+1e3*this.yR)}set mR(t){const e=this.KDt();t&&e&&(this.yR=e.getTime()-t.getTime())}KDt(){const t=this.OC;if(!t)return;const e=new Date(t.creationDate).getTime();let i=NaN;for(const e of t.presentations)e.currentTime&&(i=e.currentTime.value/(e.currentTime.scale||1)*1e3);return S(i)?void 0:new Date(e-i)}get bt(){return this.wc}get zR(){return this.LB.zR}set zR(t){this.LB.zR=t}get ct(){const t=this.LB.ct;return t===Lu?1/0:t}get kR(){return!1}get RR(){return this.ZG}get lt(){return this.HG}get PR(){return this.jDt}get NR(){return!1}get LR(){return la({},{uO:0,cO:0,lO:0,dO:0,fO:0,_O:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.LB.OR())}get GR(){return!0}get nI(){return this.rZ}get YG(){}get nt(){return this.Ul}get hI(){return this.LB.hI}get cI(){return this.LB.cI}get _R(){return this.ykt.ks()}get ykt(){return this.qPt?this.qPt._R:ee.fB()}get KR(){return this.LB.KR.ks()}get iI(){var t,e;return null!=(e=null==(t=this.qPt)?void 0:t.iI.ks())?e:ee.fB().ks()}get ZR(){return this.Mit}get BC(){return!0}get vI(){return this.fZ}get TDt(){var t;return null==(t=this.qPt)?void 0:t.TDt}get ZB(){if(this.ZR)return;if(!this.ZDt)return;const t=this.yR,e=this.gDt.RIt(t);if(void 0===e)return;const i=this.ykt;let s=0;if(i.V>0){const e=i.jn(i.V-1);s=_.max(e-t,0)}return _.max(e,s)}get LC(){var t;return null==(t=this.qPt)?void 0:t.LC}get tI(){return this.LB.tI}get QR(){return this.QDt}set QR(t){this.QDt=t,this.JDt()}async JDt(){this.QDt!==hl.YH&&this.qPt&&(this.qPt.$n(),this.QDt!==hl.qB&&this.QDt!==hl.vG||(await this.qPt._Dt,"vod"===this.qPt.OC.s0&&this.qPt.Cn()))}async ka(t,e,i){if(ot(i),await this.tr(),ot(i),!UT(t))return this.ZG=new A(Ja.SOURCE_INVALID,"HESP source incorrectly configured"),this.HG=Te(this.ZG),this.$Dt(this.ZG),Promise.resolve();const s=t;this.wc=s;const n=new dz(this.aW);this.tNt=this.eNt(t),this.VG=new Bq(this,this.LB,this.tNt),this.VG.Rt=!0,this.VG.yn("latencyrecoveryseek",this.Ds),this.vI.Sa(this.VG),this.qPt=new Lq(s,n,this.LB,this.QG,this.aW,this.gDt,this.VG,this.Zlt,this,this.VDt),this.qPt.yn(Mi.By,this.Ds),this.qPt.yn(sn.ua,this.iNt),this.rO.cC=this.qPt.ht,this.hO.cC=this.qPt.rt,this.iH.yG(t.contentProtection),oh(this.JDt())}eNt(t){return t.latencyConfiguration?t.latencyConfiguration:Dz()}async AI(){var t;if(!this.qPt)return;this.Mit=!1,this.qPt.$n(),await this.qPt.W,this.yo(new Xt(this.yR));const e=this.qPt.uy(Nq.RZ);this.FC(),await e,this.qPt.Cn(),await this.LB.AI(),null==(t=this.VG)||t.Cn()}bI(){var t;this.qPt&&(this.Mit=!0,this.yo(new vl(this.yR)),this.qPt.SI(),null==(t=this.VG)||t.SI(),this.LB.bI())}FC(){if(this.JEt)throw new g("Cannot seek while resetting");this.q9.Xw(),this.q9=new $t,this.Y9=eg((t=>this.DDt(this.Y9,t)),this.q9)}sNt(){var t;null==(t=this.qPt)||t.SI()}$Dt(t){this.yo(new Wa(t)),this.sNt()}async K9(t,e,i){var s;if(this.JEt)throw new g("Cannot seek while resetting");let n=t;if(this.nNt(n),this.iI.length>0&&(n=ee.xn(this.iI).ZL(n),this.nNt(n)),this.qPt){i&&(await i.catch(Bt),ot(e)),(null==(s=this.VG)?void 0:s._B)&&this.VG.SI();try{const t=this.LB.uy(Mi.zy,e);this.LB.Sb(n),this.qPt.Sb(n),await t}catch(t){throw Zr(t),this.qPt.SI(),this.rNt(),t}this.oNt()}}async DDt(t,e){this.yo(new pe("golive"));const i=this.TDt;if(this.nNt(i),this.qPt){t&&(await t.catch(Bt),ot(e));try{let t,s=this.VG.vB.targetOffset;if(await this.qPt._Dt,i&&s>=1){if(!this.VG.zB()){s-=_.min(1,.5*s)}t=i-s}else t=this.TDt?this.TDt-.2:void 0;for(this.qPt.FC(t);this.ykt.V>0;)await this.qPt.uy(ss.KQ,e);const n=this.ykt;for(;0===this.ykt.QL(n).V;)await this.qPt.uy(ss.KQ,e);t=this.ykt.Cn(this.ykt.V-1),t=this.hNt(t),this.nNt(t);const r=this.LB.uy(Mi.zy,e);this.LB.Sb(t,!0),await r}catch(t){var s;if(Se(t))throw null==(s=this.VG)||s.Cn(),t;throw this.qPt.SI(),await this.qPt.pDt(),this.rNt(),t}this.oNt()}}nNt(t){this.rZ=!0,this.YDt=t,this.yo(new _t(this.yR))}oNt(){this.rZ&&(this.YDt=void 0,this.rZ=!1,this.yo(new ga(this.yR)))}rNt(){this.YDt=void 0,this.rZ=!1}hNt(t){return t}async $Et(t,e,i){var s;ot(i),t&&await t.catch(Bt),e&&await e.catch(Bt),await this.VDt.tr(),null==(s=this.VG)||s.SI(),this.qPt&&(await this.qPt.Ww(),this.qPt=void 0),ot(i),await this.LB.tr(),ot(i),this.LB.cH(),this.hO.tr(),this.rO.tr(),this.rNt(),this.lH.tr(),this.gDt.tr(),this.ZG=void 0,this.HG=void 0,this.Mit=!0,this.ZDt=!1,this.wc=void 0,this.JEt=void 0,this.tNt=void 0}tr(){return this.q9.Xw(),this.q9=new $t,this.aNt.Xw(),this.aNt=new $t,this.JEt=this.$Et(this.Y9,this.JEt,this.aNt.Bw),this.JEt}async gn(){var t,e;this.dC(),this.lH.gn(),this.wc&&await this.tr(),this.Bo(),this.LB._H=void 0,null==(t=this.VG)||t.fn("latencyrecoveryseek",this.Ds),null==(e=this.VG)||e.Ww(),await this.VDt.gn(),this.Ul.gn(),this.rO.gn(),this.hO.gn()}constructor(t,e,i,s,n){super(),this.qPt=void 0,this.rZ=!1,this.q9=new $t,this.Y9=void 0,this.JEt=void 0,this.aNt=new $t,this.Mit=!0,this.ZDt=!1,this.rO=new Xh,this.hO=new Xh,this.ZG=void 0,this.HG=void 0,this.QDt=hl.YH,this.ld=()=>{const t=this._R;t.length>0&&this.VDt.$V(t.start(0))},this.zDt=()=>{this.LB.ZR!==this.Mit&&(this.LB.ZR?this.bI():this.AI().catch(Bt))},this.TX=()=>{this.ZDt=!0},this.iNt=t=>{this.ZG=t.errorObject,this.HG=Te(this.ZG),this.$Dt(this.ZG)},this.qDt=t=>{this.ZG=_k(t.lt),this.HG=t.lt,this.$Dt(this.ZG)},this.LB=t,this.lH=new q(this.LB,!0),this.aW=e,this.QG=new Az(i.Sj,i.nj.gG),this.iH=new Gh(e),this.LB._H=this.iH,this.VDt=new wl(this.LB),this.Ul=new Wu([this.LB.nt,this.VDt.Z]),this.gDt=new Sz,this.jDt=new fz(this),this.fZ=s,this.Zlt=n.retryConfiguration,this._C()}},Vq=class extends Fq{yo(t){if(this.uNt){if(t.type===Mi.zy)return void this.cNt();if(t.type===Zc.LL||t.type===Mi.qy||t.type===Zc.BL)return void this.lNt.push(t)}super.yo(t)}cNt(){this.uNt=!1,void 0!==this.dNt&&As.Og(this.dNt);const t=Ti(this.lNt,(t=>t.type===Zc.BL));t&&super.yo(t),Pn(this.lNt)}wI(){if(We(this.LB))return this.LB.wI()}async tr(){this.fNt=!1,this.cNt(),await super.tr()}async gn(){h.removeEventListener("visibilitychange",this._Nt),this.cNt(),await super.gn(),await this.LB.Ww(),await this.mH.vH(this.vNt)}hNt(t){return Z.jm&&Z.Jm>=15&&Z.Xv?t+.25:t}constructor(t,e,i,s,n,r){super(t,e,i,s,r),this.fNt=!1,this.uNt=!1,this.lNt=[],this.dNt=void 0,this._Nt=()=>{const t=this.FR||0===this.dI;"hidden"===h.visibilityState&&!this.ZR&&t?(this.bI(),this.fNt=!0):"visible"===h.visibilityState&&this.fNt&&(this.uNt=!0,this.dNt=As.Fg((()=>{for(const t of this.lNt)super.yo(t);this.dNt=void 0,this.uNt=!1}),2e3),oh(this.AI()),this.fNt=!1)},this.mH=n,this.vNt=t,Z.Dg&&h.addEventListener("visibilitychange",this._Nt)}};r();var Wq=class{get BH(){return ti.qC}async NH(t,e){return function(t){if(!t)return!1;const e=t.toLowerCase();return Cl(e,nl.zC)||Cl(e,nl.qC)}(t.type)}async MH(t){return cT(t)}};O(new class extends Wq{nP(t,e,i,s,n,r,o){const h=new ct(e),a=h.DH(Io.lE);return new Vq(a,i,n,r,h,s)}NH(t,e){return As.jx&&Ab?Z.IS_IOS_CHROME||Z.Em&&Z.Rm<6?Promise.resolve(!1):Lf(t.useManagedMediaSource)?super.NH(t,e):Promise.resolve(!1):Promise.resolve(!1)}LH(){return!1}}),r(),r();var Uq=class extends Fq{wI(){if(We(this.LB))return this.LB.wI()}async gn(){await super.gn(),await this.mH.vH(this.LB)}constructor(t,e,i,s,n,r){super(t,e,i,s,r),this.mH=n}};Z.jm&&Z.Ka&&O(new class extends Wq{get BH(){return ti._G}async NH(t,e){var i,s;if(Z.IS_IOS_CHROME)return!1;const n=await super.NH(t,e);var r;if(null==(r=null==(s=Gd())||null==(i=s.canPlayType)?void 0:i.call(s,nl.HC))||!r||!n||!("serviceWorker"in Ll))return!1;try{const t=Ll.serviceWorker.ready;return await ng(t,1e3),!0}catch(t){return!1}}async MH(t){return!!t.fairplay&&await super.MH(t)}nP(t,e,i,s,n,r,o){if(t instanceof HTMLDivElement){const t=e.Znt(Io.lE);return new Uq(t,i,n,r,e,s)}throw new A(Ja.CONFIGURATION_ERROR,"Container Div element expected.")}LH(){return!1}}),r(),r(),r(),r();var Gq="theo_live_user_id",Hq=class{incrementSequenceNumber(){this.$A+=1}get sequenceNumber(){return this.$A}constructor(t){this.externalId=t,this.id=cP(),this.userId=Zq(),this.$A=0}};function Zq(){try{const t=localStorage.getItem(Gq);if(t)return t;const e=cP();return localStorage.setItem(Gq,e),e}catch(t){return cP()}}r();var Xq=class{fgt(t){const e=this.mNt.get(t.id);if(e)return e;const i=new zq(t,this.aW,this.gNt);return this.mNt.set(t.id,i),i}constructor(t,e){this.aW=t,this.mNt=new Map,this.gNt=e}},zq=class{get pNt(){return Fa()-this.wNt>36e5}Yn(){this.yNt=!1,this.wNt=Fa(),this.bNt=this.JSt(),this.bNt.catch((()=>this.yNt=!0))}async JSt(){const{id:t,discovery:e}=this.US;if(Sm(e.pathname,"manifest.json"))return function(t){return{id:{id:t.id,discovery:As.Ah("dev://")},name:"demo",mode:"demo",status:"playing",source:{src:t.id,type:"theo.live"},customization:{autoplay:!0}}}(this.US);const i=await this.ANt(this.US,this.SNt);if(!i)throw new Yq(t);const{mode:s,status:n,fallback:r,metadata:o}=i;if("locked"===s)throw new Kq(t);if("deleted"===n)throw new jq(t);return{id:this.US,name:o.name,mode:s,status:n,source:Qq(i),fallback:r?await this.TNt(r,e,this.SNt):void 0,insights:null==o?void 0:o.insights,enhancedLogging:null==o?void 0:o.enhancedLogging,customization:null==o?void 0:o.customization,sseEndpoint:i.sseEndpoint}}async TNt(t,e,i){if("theo.live"!==t.type)return{src:t.src,type:t.type};const s={id:t.src,discovery:e},n=await this.ANt(s,i);return n?Qq(n):void 0}async ANt(t,e){let{id:i,discovery:s}=t;try{const t=await this.aW.zk({qu:As.Ah(i,s.toString()).toString(),qk:e});return await t.Sk()}catch(t){return}}get Vtt(){return(this.yNt||this.pNt)&&this.Yn(),this.bNt}constructor(t,e,i){this.US=t,this.aW=e,this.SNt=new aa,i.discoveryHeader&&this.SNt.append("x-theolive-discovery",i.discoveryHeader),this.Yn()}};var qq=class extends A{constructor(t,e,i){super(t,"Could not load channel with id "+e+": "+i),this.channelId=e,this.reason=i}},Yq=class extends qq{constructor(t){super(Ja.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel could not be found")}},Kq=class extends qq{constructor(t){super(Ja.THEO_LIVE_CHANNEL_NOT_FOUND,t,"This account has been locked")}},jq=class extends qq{constructor(t){super(Ja.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel got deleted")}};function Qq(t){var e;return{src:t.hespSrc,type:"theo.live",hlsSrc:t.hlsSrc,targetLatency:null==(e=t.metadata.customization)?void 0:e.targetLatency,contentProtection:t.drmConfig?Jq(t.drmConfig):void 0}}function Jq(t){const{integration:e,widevine:i,playready:s,fairplay:n}=t;return la({integration:e},i&&{widevine:{licenseAcquisitionURL:i.licenseUrl}},s&&{playready:{licenseAcquisitionURL:s.licenseUrl}},n&&{fairplay:{licenseAcquisitionURL:n.licenseUrl,certificateURL:n.certificateUrl}})}function $q(t,e){return{id:t,discovery:As.Ah(t,e)}}r(),r();var Cr=function(t){return t.STARTING="s",t.PLAYING="p",t.SEEKING="k",t.REBUFFERING="r",t.PAUSED="a",t.ENDED="e",t.QUIT="q",t}({}),pn=function(t){return t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.OTHER="o",t}({});function Xe(t){return 100*_.round(t/100)}function tY(t){const e=t.bR(),i=t.vR();for(let t=0;t<i.length;t++)if(i.start(t)<=e&&e<=i.end(t))return 1e3*(i.end(t)-e);return 0}function eY(t){return Ti(t.oC,(t=>t.Rt))}function iY(t){return t.EC.aC(0)}function sY(t){return t.EC.aC(t.EC.V-1)}r(),r();var bs=class t{static starting(e,i,s){return new t(Cr.STARTING,e,i,s)}static playing(e){return new t(Cr.PLAYING,e)}static seeking(e,i){return new t(Cr.SEEKING,e,i)}static rebuffering(e,i){return new t(Cr.REBUFFERING,e,i)}static paused(e){return new t(Cr.PAUSED,e)}static ended(e){return new t(Cr.ENDED,e)}static quit(e){return new t(Cr.QUIT,e)}get ct(){return Date.now()-this.kNt}ENt(){const t=this.ta.WX.nj.mG,e=this.ta.vI.ZB,i=tY(this.ta);t>0&&void 0!==i&&void 0!==e&&(this.xNt+=1,this.RNt=this.INt(this.RNt,i),this.CNt=this.INt(this.CNt,1e3*this.ta.vI.md.targetOffset),this.KG=this.INt(this.KG,1e3*e),this.PNt=this.INt(this.PNt,t/1e3))}INt(t,e){return t+(e-t)/this.xNt}nP(){const t={sta:this.pp,ts:this.kNt,"theo-vt":this.DNt,"theo-at":this.NNt,"theo-d":this.ct,"theo-r":this.rf};return this.xNt>0?la({},t,{bl:Xe(this.RNt),tbl:Xe(this.CNt),ltc:Xe(this.KG),mtp:Xe(this.PNt),"theo-w":this.xNt}):t}MNt(){return new t(this.pp,this.ta,this.rf)}constructor(t,e,i,s){var n,r,o,h;this.kNt=Date.now(),this.RNt=0,this.CNt=0,this.KG=0,this.PNt=0,this.xNt=0,this.pp=t,this.ta=e,this.DNt=null==(r=eY(this.ta.rt))||null==(n=r.SC)?void 0:n.o,this.NNt=null==(h=eY(this.ta.ht))||null==(o=h.SC)?void 0:o.o,this.rf=i,this.HG=s}},nY=class{LNt(){var t;const e=this.ta.vI.ZB,i=tY(this.ta),s=this.ta.WX.nj.mG;return rY({bl:i?Xe(i):void 0,tbl:Xe(1e3*this.ta.vI.md.targetOffset),ltc:e?Xe(e):void 0,mtp:s?Xe(s/1e3):void 0,sta:null==(t=this.BNt)?void 0:t.pp,su:!this.ZDt||void 0,"theo-sq":this.ONt.sequenceNumber})}FNt(t){var e,i;const s=function(t,e){switch(e){case pn.VIDEO:return eY(t.rt);case pn.AUDIO:return eY(t.ht)}}(this.ta,t);return rY({br:(null==s||null==(e=s.SC)?void 0:e.mG)?Xe((null==s||null==(i=s.SC)?void 0:i.mG)/1e3):void 0,ot:t,tb:s?Xe(sY(s).mG/1e3):void 0,lb:s?Xe(iY(s).mG/1e3):void 0})}VNt(){return rY({"theo-cw":this.ta.we.clientWidth,"theo-ch":this.ta.we.clientHeight})}WNt(){var t;return rY({sf:"e",sid:this.ONt.id,st:"l",v:2,"theo-eid":null==(t=this.ONt.externalId)?void 0:t.substring(0,128),"theo-cn":this.UNt.name.substring(0,128),"theo-v":"9.0.0","theo-t":"web","theo-u":this.ONt.userId})}GNt(){const t={"CMCD-States":btoa(JSON.stringify(this.HNt))};return this.HNt=[],t}ZNt(t){this.BNt&&this.HNt.push(this.BNt.nP()),this.BNt=t}destroy(){this.XNt(),s.removeEventListener("beforeunload",this.XNt),this.ta.fn(Zc.BL,this.WB),this.ta.fn(Zc.LL,this.VB),this.ta.fn(Mi.Uy,this.zNt),this.ta.PR.fn("latencyrecoveryseek",this.qNt),this.ta.PR.fn("golive",this.YNt),this.ta.rt.fn(Ce.MI,this.BG),this.ta.ht.fn(Ce.MI,this.BG),this.ta.rt.oC.forEach((t=>t.fn(Eo.iC,this.Jr))),this.ta.ht.oC.forEach((t=>t.fn(Eo.iC,this.Jr))),this.ta.Est.removeEventListener("intenttofallback",this.KNt),this.ta.Est.removeEventListener("publicationloadstart",this.jNt),this.ta.Est.removeEventListener("publicationoffline",this.QNt),this.ta.WX.JK(this.JNt),As.Fp(this.$Nt)}constructor(t,e,i){this.HNt=[],this.ZDt=!1,this.OX=!1,this.KNt=()=>{var t;this.ZNt(bs.starting(this.ta,"fallback",null==(t=this.ta.IR())?void 0:t.message))},this.jNt=()=>{this.ZNt(bs.starting(this.ta,"loadChannel"))},this.QNt=()=>{this.ZNt(bs.ended(this.ta))},this.BG=t=>{t.Ht.yn(Eo.iC,this.Jr)},this.Jr=()=>{var t,e,i,s;const n=null==(e=eY(this.ta.rt))||null==(t=e.SC)?void 0:t.o,r=null==(s=eY(this.ta.ht))||null==(i=s.SC)?void 0:i.o;n&&r&&(this.BNt&&this.BNt.pp===Cr.PLAYING&&this.BNt.DNt===n&&this.BNt.NNt===r||this.ZNt(bs.playing(this.ta)))},this.WB=()=>{this.ZDt=!0,this.OX=!1,this.ZNt(bs.playing(this.ta))},this.qNt=()=>{this.ZDt&&!this.OX&&(this.OX=!0,this.ZNt(bs.seeking(this.ta,"latencyRecovery")))},this.YNt=()=>{this.ZDt&&!this.OX&&(this.OX=!0,this.ZNt(bs.seeking(this.ta,"goLive")))},this.VB=()=>{this.ta.nI||this.ZNt(bs.rebuffering(this.ta,"visible"===h.visibilityState?void 0:"invisible"))},this.zNt=()=>{this.ZNt(bs.paused(this.ta))},this.JNt=t=>{const e=As.Ah(t.url),i=function(t){const{pathname:e}=t;if(Sm(e,"manifest.json"))return pn.MANIFEST;if(Dh(e,"/video/"))return pn.VIDEO;if(Dh(e,"/audio/"))return pn.AUDIO;return pn.OTHER}(e);if("o"===i)return;this.ONt.incrementSequenceNumber();let s=la({},t.headers,{"CMCD-Request":this.LNt(),"CMCD-Object":this.FNt(i),"CMCD-Status":this.VNt(),"CMCD-Session":this.WNt()});i===pn.VIDEO&&Sm(e.pathname,".hspc")&&this.BNt&&(this.ZNt(this.BNt.MNt()),s=la({},s,this.GNt())),t.redirect(la({},t,{headers:s}))},this.XNt=()=>{this.BNt&&(this.HNt.push(this.BNt.nP()),this.BNt=void 0),this.HNt.push(bs.quit(this.ta).nP()),oh(this.ta.aR.zk({qu:this.tMt,qk:this.GNt(),EE:!0}))},this.ta=t,this.UNt=e,this.ONt=i,this.tMt=As.Ah("bye",e.source.src).href,s.addEventListener("beforeunload",this.XNt),this.ta.yn(Zc.BL,this.WB),this.ta.yn(Zc.LL,this.VB),this.ta.yn(Mi.Uy,this.zNt),this.ta.PR.yn("latencyrecoveryseek",this.qNt),this.ta.PR.yn("golive",this.YNt),this.ta.WX.KK(this.JNt),this.ta.rt.yn(Ce.MI,this.BG),this.ta.ht.yn(Ce.MI,this.BG),this.ta.Est.addEventListener("intenttofallback",this.KNt),this.ta.Est.addEventListener("publicationloadstart",this.jNt),this.ta.Est.addEventListener("publicationoffline",this.QNt),this.BNt=bs.starting(this.ta,"loadchannel"),this.$Nt=As.Op((()=>{var t;null==(t=this.BNt)||t.ENt()}),1e3)}};function rY(t){return w.keys(t).map((e=>function(t,e){switch(typeof e){case"boolean":return e?t:t+"=false";case"number":return t+"="+e;case"string":return t+'="'+e+'"';default:return}}(e,t[e]))).filter(Boolean).sort().join(",")}r();var oY=class extends pe{constructor(t){super("publicationloadstart"),this.publicationId=t}},hY=class extends pe{constructor(t){super("publicationoffline"),this.publicationId=t}},aY=class extends pe{constructor(t,e){super("publicationloaded"),this.publicationId=t,this.channelName=e}},uY=class extends pe{constructor(){super("intenttofallback")}},cY=class extends pe{constructor(){super("enterbadnetworkmode")}},lY=class extends pe{constructor(){super("exitbadnetworkmode")}},dY=class extends Bo{get ga(){return this.Za||(this.Za=function(t){return{addEventListener(e,i){t.yn(e,i)},removeEventListener(e,i){t.fn(e,i)},get badNetworkMode(){return t.eMt},set badNetworkMode(e){t.eMt=e},preloadPublications:async e=>(await t.iMt(e)).map((t=>({name:t.name})))}}(this)),this.Za}get eMt(){return this.ta.eMt}set eMt(t){this.ta.eMt=t}iMt(t){return this.ta.iMt(t)}constructor(t){super(),this.ta=t}};var fY=["https://theo-insights-prod-5cb0.ew.r.appspot.com/"],_Y=8e5,vY=class extends sc{sMt(){this.ta.PR.yn("latencyrecoveryseek",this.qNt),this.ta.rt.yn(Ce.MI,this.BG)}nMt(){this.ta.PR.fn("latencyrecoveryseek",this.qNt),this.ta.rt.fn(Ce.MI,this.BG)}CI(t){return this.kDt?t.type===Zc.BL?(void 0!==this.rMt?(As.Og(this.rMt),this.rMt=void 0,this.ZDt||this.yo(new ce(this.bR()))):this.yo(new ce(this.bR())),this.ZDt=!0,!0):t.type===Zc.LL?(this.rMt||(this.rMt=As.Fg((()=>{this.yo(new Za(this.bR())),this.rMt=void 0}),100)),!0):"error"===t.type?(oh(this.oMt()),!0):super.CI(t):super.CI(t)}xst(){return this.hMt.ga}get eMt(){return this.aMt}set eMt(t){this.kDt&&(t?this.uMt():this.cMt())}uMt(){if(this.aMt)return;if(this.aMt=!0,this.hMt.yo(new cY),0===this.ta.rt.V)return;const t=this.rt.aC(0),e=Ym(t.EC.oC,(t=>t.mG));var i;(null!=(i=e.Tyt)?i:e.mG)<_Y?(t.xC=[e],Promise.resolve().then((()=>t.xC=t.EC.oC.slice()))):this.cMt()}cMt(){if(!this.aMt)return;if(this.aMt=!1,this.hMt.yo(new lY),0===this.ta.rt.V)return;const t=this.ta.rt.aC(0);var e;const i=mY(null!=(e=t.xC)?e:t.EC.oC);t.xC=i.length>0?i:mY(t.EC.oC)}iMt(t){return Promise.all(t.map((async t=>{const e=this.lMt.fgt($q(t,this.dMt.discoveryUrl));return await hu(e.Vtt,this.OT.Bw)})))}addSseEndpointToSource(t){var e;if(t&&(null==(e=this.wc)?void 0:e.ads))for(const e of this.wc.ads){var i;if("theoads"===e.integration)null!=(i=e).sseEndpoint||(i.sseEndpoint=t)}}async ka(t,e){var i;this.kDt=!1;for(const s of null!=(i=null==t?void 0:t.sources)?i:[]){if(zT(s)&&s.type===nl.KC){if(void 0===s.src)continue;this.sMt(),this.kDt=!0,this.hMt.yo(new oY(s.src));const i=$q(s.src,this.dMt.discoveryUrl),n=this.hMt.uy("publicationloaded");try{this.wc=t,this.KH=s,this.fMt=this.lMt.fgt(i);const n=await this.fMt.Vtt;this.addSseEndpointToSource(n.sseEndpoint);const{enhancedLogging:r}=n;(null==r?void 0:r.enabled)&&_.random()<=r.percentage&&this.ta.WX.KK(this._Mt),this.dMt.analyticsEnabled&&"theo.live"===n.source.type&&(this.vMt=new nY(this,n,this.ONt)),await hu(this.mMt(this.ta.pO),e)}catch(t){throw this.a9(),this.dispatchErrorEvent(t),t}return void await hu(n,e).catch(Zr)}if("web"===Jt.xv&&(null==t?void 0:t.contentProtection)&&(!zT(s)||s.type!==nl.qC)){const t=new A(Ja.CONFIGURATION_ERROR,"Content protection is not supported for this source type");throw this.dispatchErrorEvent(t),t}}return await super.ka(t,e)}async mMt(t){if(this.a9(),!this.fMt)return;const{source:e}=await this.fMt.Vtt,i=await this.gMt(e);if("live"===i)if("primary"===this.pMt)try{await this.wMt(t)}catch(e){await this.yMt(t)}else await this.yMt(t);else if("offline"===i)await this.QNt();else try{await this.wMt(t)}catch(t){await this.QNt()}}async gMt(t){try{const e=await this.ta.aR.zk({qu:t.src});return e.Hk>=200&&e.Hk<300?"live":404===e.Hk||503===e.Hk?"offline":"error"}catch(t){return"error"}}async yMt(t){if(!this.fMt)return;const e=await this.fMt.Vtt;this.pMt="primary",this.wJ(e.source,t)}async QNt(){if(!this.fMt)return;const t=await this.fMt.Vtt;this.hMt.yo(new hY(t.id.id)),this.bMt=As.Fg((()=>this.mMt(this.ta.pO)),15e3)}wJ(t,e){var i,s,n;const r=this.fMt.US.id;var o;const h=DC({sources:[{type:gY(t.type),src:t.src,contentProtection:t.contentProtection,useManagedMediaSource:!0,latencyConfiguration:null!=(o=null==(i=this.KH)?void 0:i.latencyConfiguration)?o:pY(t.targetLatency)},t.hlsSrc?{type:"application/x-mpegurl",src:t.hlsSrc}:void 0].filter(ne),ads:this.ZDt?[]:null==(s=this.wc)?void 0:s.ads,blockContentIfAdError:null==(n=this.wc)?void 0:n.blockContentIfAdError,streamType:"live"});h.sources[0].bypassLicense=!0,this.ta.ka(h,(new $t).Bw).then((()=>{e&&this.ta.AI()})).catch(this.dispatchErrorEvent),this.fMt.Vtt.then((t=>{this.hMt.yo(new aY(r,t.name))}))}async wMt(t){if(this.hMt.yo(new uY),!await this.AMt())throw new g("fallback not live");await this.SMt(t)}async SMt(t){var e;const i=await(null==(e=this.fMt)?void 0:e.Vtt);(null==i?void 0:i.fallback)&&(this.pMt="fallback",this.wJ(i.fallback,t))}async AMt(){var t,e;const i=await(null==(t=this.fMt)?void 0:t.Vtt);if(!(null==(e=this.dMt)?void 0:e.fallbackEnabled)||!(null==i?void 0:i.fallback))return!1;const s=await this.ta.aR.zk({qu:i.fallback.src});return s.Hk>=200&&s.Hk<300}dispatchErrorEvent(t){if(t instanceof A)return this.yo(new Wa(t));this.yo(new Wa(new A(Ja.THEO_LIVE_UNKNOWN_ERROR,t.message,t)))}async a9(){await this.ta.SI(),void 0!==this.bMt&&(As.Og(this.bMt),this.bMt=void 0)}SI(){var t;return this.OT.Xw(),this.OT=new $t,this.nMt(),void 0!==this.rMt&&(As.Og(this.rMt),this.rMt=void 0),this.kDt=!1,this.ZDt=!1,null==(t=this.vMt)||t.destroy(),this.vMt=void 0,this.wc=void 0,this.KH=void 0,this.fMt=void 0,this.pMt=void 0,this.TMt=[],this.ta.WX.JK(this._Mt),this.aMt&&this.cMt(),super.SI()}async gn(t){var e;this.OT.Xw(),void 0!==this.rMt&&(As.Og(this.rMt),this.rMt=void 0),this.Bo(),this.nMt(),null==(e=this.vMt)||e.destroy(),this.ta.PR.fn("latencyrecoveryseek",this.qNt),await super.gn(t)}constructor(t,e){var i,s;super(t,e),this.kDt=!1,this.OT=new $t,this.rMt=void 0,this.ZDt=!1,this.TMt=[],this.aMt=!1,this.BG=t=>{const e=t.Ht;var i;e.yn(Eo.iC,this.Jr);const s=mY(null!=(i=e.xC)?i:e.EC.oC);e.xC=s.length>0?s:mY(e.EC.oC)},this.Jr=t=>{const e=t.nat;var i;(!e||(null!=(i=e.Tyt)?i:e.mG)>=_Y)&&this.cMt()},this.qNt=async()=>{this.uMt(),this.TMt.push(As.Bg()),this.TMt=this.TMt.filter((t=>As.Bg()-t<=3e5)),this.TMt.length>=3&&(this.TMt=[],await this.mMt(!0))},this.oMt=async()=>{if(this.fMt){if("demo"===(await this.fMt.Vtt).mode){this.fMt.Yn();if("playing"!==(await this.fMt.Vtt).status)return void this.yo(new Wa(new A(Ja.THEO_LIVE_END_OF_DEMO,"This demo channel has been stopped automatically after 5 minutes")))}await this.mMt(!0)}},this._Mt=t=>{if("manifest"===t.type||"segment"===t.type||""===t.type){const e=As.Ah(t.url);e.searchParams.append("enhancedLogging","true"),t.redirect({url:e.toString()})}},this.hMt=new dY(this);const n=t.md.theoLive;var r,o,h,a;this.dMt={sessionId:null!=(r=null==n?void 0:n.sessionId)?r:cP(),userId:null!=(o=null==n?void 0:n.userId)?o:Zq(),externalSessionId:null==n?void 0:n.externalSessionId,analyticsEnabled:!1!==(null==n?void 0:n.analyticsEnabled),fallbackEnabled:!1!==(null==n?void 0:n.fallbackEnabled),discoveryUrl:null!=(h=null==n?void 0:n.discoveryUrl)?h:"https://discovery.theo.live/channels/",analyticsUrls:null!=(a=null==n?void 0:n.analyticsUrls)?a:fY},this.ONt=new Hq(null==(i=this.dMt)?void 0:i.externalSessionId),this.lMt=new Xq(t.aR,{discoveryHeader:null==(s=this.dMt)?void 0:s.discoveryHeader}),this.ta.PR.yn("latencyrecoveryseek",this.qNt)}};function mY(t){return t.filter((t=>{var e;return(null!=(e=t.Tyt)?e:t.mG)>=_Y}))}function gY(t){switch(t){case"theo.live":return"application/vnd.theo.hesp+json";case"hls":return"application/x-mpegurl";case"dash":return"application/dash+xml";default:throw new g("Unknown source type: "+t)}}function pY(t){return void 0===t?Dz():{minimumOffset:t-ST,targetOffset:t,maximumOffset:t+ST,forceSeekOffset:t+2.5,minimumPlaybackRate:Pt,maximumPlaybackRate:gt}}dF((t=>new vY(t)),co.nu),r(),r(),r();var wY=Zl(Yl());r(),r(),r();var yY=class extends Bo{get AN(){return this.kMt}Yn(t,e){this.XA=t,this.kMt=e,this.Za&&this.yo(new vH(this.Za))}get ga(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}get o(){return this.XA.id}get TC(){return this.TO}get mG(){return this.XA.bitrate}get Tyt(){}get Urt(){return""}get kh(){return""}get Ryt(){return""}get Hnt(){return!0}get kyt(){}iW(){throw new g("Method not implemented.")}sW(){throw new g("Method not implemented.")}gn(){this.Bo()}constructor(t,e){super(),this.TO=yk(),this.Za=void 0,this.XA=t,this.kMt=e}},bY=class extends yY{ma(){return _l(this)}get Kdt(){return 0}get ji(){return this.XA.targetWidth}get Ti(){return this.XA.targetHeight}get Eyt(){return 0}constructor(t,e){super(t,e)}};r();var AY=class extends Bo{get Rt(){return!0}set Rt(t){}get ga(){var t;return null!=(t=this.Za)?t:this.Za=bi(this)}xO(t){this.Rt=t}get Edt(){}get Lt(){return this.q4}get o(){return this.US||"millitrack"}get TC(){return this.TO}get kh(){return""}get gs(){return""}get TE(){return this.Rt?"enabled":"disabled"}set TE(t){this.xO("enabled"===t)}get SC(){}get EC(){return this.wO}get xC(){return this.EMt}set xC(t){if(this.EMt=t,this.Rt){const e=1===(null==t?void 0:t.length)?t[0].AN:void 0;this.xMt(e)}this.yo(new UW(this.wO.oC.slice(),this)),((null==t?void 0:t.length)||this.wO.V)&&this.yo(new fG((null==t?void 0:t[0])||this.wO.aC(0)))}get kC(){}gn(){this.Bo();for(const t of this.wO.oC)t.gn();this.wO.tr()}constructor(t,e){super(),this.TO=ai(),this.wO=new Oc,this.US=t,this.q4=e}},SY=class extends AY{Yn(t){for(const e of t.active){const i=Ti(t.layers,(t=>t.encodingId===e.id)),s=Ti(this.wO.oC,(t=>t.o===e.id));s?s.Yn(e,i):this.wO.yO(new bY(e,i))}this.yo(new Qu(this))}get pw(){return Io.lE}xMt(t){var e;null==(e=this.RMt)||e.IMt(t)}gn(){this.RMt=void 0,super.gn()}constructor(t,e,i){super(t,e),this.RMt=i}};r();var TY=class{Yn(t){this.CMt=t}get mG(){var t,e,i,s,n;var r;return(null!=(n=null==(e=this.CMt)||null==(t=e.video.inbounds)?void 0:t.reduce(((t,e)=>t+e.bitrateBitsPerSecond),0))?n:0)+(null!=(r=null==(s=this.CMt)||null==(i=s.audio.inbounds)?void 0:i.reduce(((t,e)=>t+e.bitrateBitsPerSecond),0))?r:0)}get gG(){var t,e;return null!=(e=null==(t=this.CMt)?void 0:t.currentRoundTripTime)?e:0}pG(t){}};r(),r();var kY=class extends yY{ma(){return xl(this)}get Swt(){return this.PMt}constructor(t,e){super(t,e),this.PMt=0}},EY=class extends AY{Yn(t){for(const e of t.active){const i=Ti(t.layers,(t=>t.encodingId===e.id)),s=Ti(this.wO.oC,(t=>t.o===e.id));s?s.Yn(e,i):this.wO.yO(new kY(e,i))}this.yo(new Qu(this))}get pw(){return Io.cE}xMt(t){var e;null==(e=this.RMt)||e.DMt(t)}gn(){this.RMt=void 0,super.gn()}constructor(t,e,i){super(t,e),this.RMt=i}};r();var xY=class extends Le{ma(){return function(t){return nh(Ht(t),{get mid(){return t.GV.mid},get uuid(){return t.GV.uuid},get timecode(){return t.GV.timecode},get unregistered(){return t.GV.unregistered}})}(this)}constructor(t,e){super(t,t,void 0,!1),this.GV=e}};r();var RY=[Mi.so,Mi.Uy,Zc.BL,Mi.$y,Mi.Gy,Mi.By,Mi.qy,Mi.zy,Mi.xy,Mi.Hy,Mi.eb,Mi.Sy,Mi.Xy,Mi.wy,Mi.py,Mi.Cy,Mi.Ry],IY=["active","inactive","stopped","vad","layers","migrate","viewercount"],CY=class extends Bo{IMt(t){var e;null==(e=this.If)||e.select(t).catch(this.Xpt)}DMt(t){var e;null==(e=this.If)||e.select(t).catch(this.Xpt)}get gI(){return!1}wI(){return this.LB.wI()}get ht(){return this.rO}get _R(){return this.LB._R.ks()}get mR(){return this.LB.mR}set mR(t){}get bt(){return this.wc}get yR(){return this.LB.yR}set yR(t){this.AR(t)}AR(t,e){}get ct(){return this.LB.ct}get kR(){return this.LB.kR}get lt(){return this.HG}get RR(){return this.ZG}get PR(){}get NR(){return this.LB.NR}get LR(){var t,e;const i=this.NMt,s=null==i||null==(t=i.video.inbounds)?void 0:t[0],n=null==i||null==(e=i.audio.inbounds)?void 0:e[0];var r,o,h,a;return{dO:this.dZ.nj.mG,uO:null!=(r=null==s?void 0:s.framesDropped)?r:0,cO:0,lO:null!=(o=null==s?void 0:s.framesReceived)?o:0,fO:(null!=(h=null==s?void 0:s.totalBytesReceived)?h:0)+(null!=(a=null==n?void 0:n.totalBytesReceived)?a:0),_O:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get FR(){return this.LB.FR}set FR(t){this.LB.FR=t}get GR(){var t,e;return null!=(e=null==(t=this.If)?void 0:t.isActive())&&e}get ZR(){return this.LB.ZR}get zR(){return 1}set zR(t){}get KR(){return this.LB.KR.ks()}get QR(){return hl.YH}set QR(t){}get tI(){return this.LB.tI}get iI(){return this.LB.iI.ks()}get nI(){return this.LB.nI}get YG(){return this.LB.YG}get nt(){return this.LB.nt}get hI(){return this.LB.hI}get rt(){return this.hO}get cI(){return this.LB.cI}get dI(){return this.LB.dI}set dI(t){this.LB.dI=t}get vI(){return this.fZ}get jG(){return this.QG}get ZB(){return this.fZ.ZB}ge(){this.LB.ge()}be(){this.LB.be()}async AI(){this.$n(),await this.LB.AI()}bI(){this.LB.bI()}async tr(){var t;this.wc=void 0,this.OT.Xw(),null==(t=this.If)||t.stop(),this.If=void 0,this.opt&&(await this.opt.catch(Bt),this.opt=void 0),this.MMt=void 0,await this.LB.tr(),this.LMt=void 0,this.BMt=0,this.LB.cH();for(const t of this.hO.oC)t.gn();this.rO.tr(),this.hO.tr()}async gn(){this.Bo(),await this.tr(),this.rO.gn(),this.hO.gn(),this.lH.gn(),this.LB.fn(RY,this.Ds),this.LB.fn(sn.ua,this.Ss),await this.lZ.vH(this.LB)}async ka(t,e,i){ot(i),this.OEt();const s=t;this.wc=s,this.OT=new $t,s.apiUrl&&wY.Director.setEndpoint(s.apiUrl);this.If=new wY.View(void 0,(()=>wY.Director.getSubscriber({streamName:s.src,streamAccountId:s.streamAccountId,subscriberToken:s.subscriberToken})),void 0,!0),this.OMt=la({},s.connectOptions,{events:IY}),this.FMt()}$n(){if(void 0!==this.opt)return;const t=this.If;void 0!==t&&(this.opt=this.zE(t,this.OMt,this.OT.Bw).catch(this.Xpt))}async zE(t,e,i){ot(i);try{await hu(t.connect(e),i),t.webRTCPeer.initStats({autoInitStats:!0,statsIntervalMs:1e3})}catch(e){Zr(e),function(t){return V(t)&&"FetchError"===t.name}(e)&&400===e.status&&(As.Mp("[THEOplayer] Millicast connect error, reconnecting.",e),await hu(t.reconnect(),i)),this.PH(new A(Ja.NETWORK_ERROR,e.message,e))}}async VMt(t,e){ot(e);try{this.LB.o7(),this.MMt=t,await this.LB.tr(),await this.LB.$n({pw:zr.fW,MC:"",EJ:t,Ik:nl.YC,JG:[]})}finally{this.LB.h7()}}FMt(){var t;const e=this.If;e.on("track",(t=>this.WMt(t))),e.on("broadcastEvent",(t=>this.UMt(t))),e.webRTCPeer.on("stats",(t=>{this.NMt=t,this.QG.Yn(t)})),(null==(t=this.OMt)?void 0:t.metadata)&&e.on("metadata",(t=>this.GMt(t)))}WMt(t){const e=this.rO.V>0,i=this.hO.V>0,s=e&&!i;if(i&&t.track.kind===Io.lE||s&&t.track.kind===Io.cE){const e=t.streams[0];if(s){const t=e.getVideoTracks().slice();for(const i of t)e.removeTrack(i)}this.VMt(e,this.OT.Bw).catch(this.Xpt)}}UMt(t){switch(t.name){case"active":{this.yo(new dt);const e=t.data;for(const t of e.tracks)t.media===Io.lE?this.hO.tt(new SY(t.trackId,this.hO.V?vq.APt:vq.SPt,this)):t.media===Io.cE&&this.rO.tt(new EY(t.trackId,this.rO.V?Sr.APt:Sr.SPt,this));break}case"inactive":this.yo(new fn),this.hO.tr(),this.rO.tr();break;case"stopped":this.yo(new fn);break;case"viewercount":default:break;case"layers":{const e=t.data;if(0===this.hO.V){const t=new SY("",vq.SPt,this);t.Yn(e.medias[0]),this.hO.tt(t)}else{const t=Ti(this.hO.oC,(t=>t.Lt===vq.SPt));null==t||t.Yn(e.medias[0])}break}}}GMt(t){let e=this.LMt;void 0===e&&(e=this.LB.DI(Hi.jV,void 0,void 0,void 0,void 0,Vr.MILLICAST),e.TE=yh.RC,this.LMt=e);const i=this.yR,s=_.max(0,i-10);this.BMt<s&&(ho(e,s),this.BMt=s);const n=new xY(i+.001,t);e.uW(n)}PH(t){this.HG||(oh(this.tr()),this.HG=Te(t),this.ZG=t,this.yo(new Wa(t)))}OEt(){this.HG=void 0,this.ZG=void 0}TI(){return!1}kI(){}EI(){}xI(){this.LB.xI()}RI(){const t=this.MMt;void 0!==t&&this.VMt(t,this.OT.Bw).catch(this.Xpt)}pI(){return this.LB.wa}_a(){return this.LB.aH}DI(t){return this.LB.uH(t)}constructor(t,e,i){super(),this.lZ=t,this.dZ=e,this.fZ=i,this.OT=new $t,this.opt=void 0,this.MMt=void 0,this.hO=new Nn,this.rO=new Nn,this.BMt=0,this.QG=new TY,this.Ss=t=>{this.PH(_k(t.lt))},this.Xpt=t=>{Se(t)||this.PH(new A(Ja.MEDIA_DECODE_ERROR,t.message,t))},this.LB=this.lZ.DH(Io.lE),this.lH=new q(this.LB,!0),this.LB.yn(RY,this.Ds),this.LB.yn(sn.ua,this.Ss),this.lH.yn(no,this.Ds)}};O(new class{get BH(){return ti.YC}nP(t,e,i,s,n,r,o,h){return new CY(e,n,r)}NH(t,e){return t.type===nl.YC}async MH(t){let e=await cT(t);return e&&(e=Boolean(t.widevine||t.fairplay)),e&&!1}LH(){return!1}}),r(),r(),r(),r();var zt=function(t){return t.HMt="currentbufferingrenditionchange",t.ZMt="XMt",t.zMt="qMt",t.YMt="KMt",t}({});r(),r();var PY=class{constructor(t,e){var i,s;this.Urt=void 0,this.TC=yk(),this.jMt=e,this.pw=t.pw,this.QMt=t.QMt,this.JMt=t.JMt,this.$Mt=t.$Mt,this.l=t.l,this.gs=t.gs,this.tLt=t.tLt,this.eLt=t.eLt,this.iLt=void 0===t.Ryt,this.sLt=null!=(s=null==(i=t.sLt)?void 0:i.split(","))?s:[]}};function et(t,e){return t.pw===e.pw&&(t.l===e.l||!(!t.QMt||!e.QMt))}function DY(t,e){return void 0!==t&&void 0!==e&&NY(t,e)}function NY(t,e){return t.jMt===e.jMt}function MY(t,e){return NY(t,e)&&t.tLt===e.tLt}function LY(t,e){for(const i of t)if(MY(i,e))return!0;return!1}var BY=class extends Bo{get kC(){return this.nLt}get Rt(){const t=this.rLt();if(!t)return!1;for(const e of this.EC.oC)if(e.oLt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var e;let t=null==(e=this.EC.aC(0))?void 0:e.oLt;const i=this.ta.hLt;for(const e of this.EC.oC)if(e.aLt===i){t=e.oLt;break}this.uLt(t)}else this.uLt(void 0)}get SC(){if(!this.Rt)return;const t=this.ta.cLt;for(const e of this.EC.oC)if(LY(t,e.oLt))return e}get ga(){return this.Za||(this.Za=bi(this)),this.Za}get o(){return this.TO.toString()}get TC(){return this.TO}get kh(){return this.kO}set kh(t){t!==this.kO&&(this.kO=t,this.yo(new Qu(this)))}get gs(){return this.CA}get TE(){return this.Rt?"enabled":"disabled"}get xC(){return this.Wct}set xC(t){let e=[];if(t){e=t.filter((t=>{const e=this.SC?zW(this.SC):void 0;return As.Ys.hp(e,zW(t))})).filter((e=>this.EC.bO(t)&&e.Hnt))}else e=this.EC.oC.filter((t=>t.Hnt));if(0!==e.length){if(!(t===this.Wct||this.Wct&&zm(this.Wct,e))){if(this.Wct=t?e:void 0,this.ta.lLt(e.map((t=>t.aLt))),1===e.length){const t=e[0].aLt,i=this.pp===Io.lE,s=this.dZ.Nj;oh(this.ta.dLt(t,{fLt:!0,_Lt:s&&i,vLt:s&&!i}))}this.yo(new UW(e,this))}}else this.yo(new XW)}xO(t){this.Rt=t}gn(){this.Bo(),this.ta.fn(zt.HMt,this.mLt),this.ta.fn(zt.ZMt,this.gLt);for(const t of this.EC.oC)t.gn();this.EC.tr()}constructor(t,e,i,s,n){var r;super(),this.pp=t,this.ta=e,this.dZ=i,this.fh=s,this.EC=n,this.Wct=void 0,this.pLt=void 0,this.wLt=()=>this.yo(new Qu(this)),this.mLt=()=>{const t=this.SC;t&&this.pLt!==t&&(this.pLt=t,this.yo(new fG(t)))},this.gLt=()=>{const t=this.Rt;this.yLt!==t&&(this.yLt=t,this.fh.yo(new Bc(this)),this.yo(new Bc(this)))},this.pLt=this.SC,this.yLt=this.Rt;const o=n.aC(0);var h,a;this.kO=null!=(h=null==o?void 0:o.oLt.l)?h:"",this.CA=null!=(a=null==o?void 0:o.oLt.gs)?a:"",this.nLt=null==o||null==(r=o.oLt)?void 0:r.sLt.map(GY).filter(ne),this.TO=ai(),this.ta.yn(zt.HMt,this.mLt),this.ta.yn(zt.ZMt,this.gLt);for(let t=0;t<this.EC.V;t++){this.EC.aC(t).yn("update",this.wLt)}}},OY=class extends BY{get Lt(){return Sr.SPt}rLt(){return this.ta.bLt}uLt(t){oh(this.ta.ALt(t))}constructor(t,e,i,s){super(Io.cE,t,e,i,s)}},FY=class extends BY{get Lt(){return vq.SPt}rLt(){return this.ta.SLt}uLt(t){oh(this.ta.TLt(t))}constructor(t,e,i,s){super(Io.lE,t,e,i,s)}},VY=class extends Bo{get o(){return String(this.aLt.o)}get TC(){return this.aLt.o}get mG(){return this.aLt.mG}get Tyt(){return this.aLt.Tyt}get kh(){var t;return null!=(t=this.kO)?t:this.oLt.l}set kh(t){this.kh!==t&&(this.kO=t,this.yo(new vH(this.ga)))}get Ryt(){return this.oLt.jMt.kLt()}get kyt(){return this.aLt.kyt}sW(){}iW(){}gn(){this.Bo()}constructor(t,e){super(),this.aLt=t,this.oLt=e,this.kO="",this.Hnt=!0}},WY=class extends VY{get Swt(){return 0}get Urt(){var t;return(null==(t=this.aLt.Urt)?void 0:t.$Ct)||""}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return xl(this)}constructor(t,e){super(t,e),this.Za=void 0}},UY=class extends VY{get Urt(){var t;return(null==(t=this.aLt.Urt)?void 0:t.ePt)||""}get Eyt(){return this.ELt}set Eyt(t){this.ELt!==t&&(this.ELt=t,this.yo(new vH(this.ga)))}get Kdt(){var t,e;return null!=(e=null!=(t=this.GCt)?t:this.aLt.Kdt)?e:0}set Kdt(t){this.Kdt!==t&&(this.GCt=t,this.yo(new vH(this.ga)))}get Ti(){var t,e;return null!=(e=null==(t=this.aLt.HCt)?void 0:t.Ti)?e:0}get ji(){var t,e;return null!=(e=null==(t=this.aLt.HCt)?void 0:t.ji)?e:0}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){return _l(this)}constructor(t,e){super(t,e),this.Za=void 0,this.ELt=0,this.GCt=void 0}};function GY(t){return"public.accessibility.describes-video"===t?ln.AC:"public.accessibility.transcribes-spoken-dialog"===t?ln.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?ln.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?ln.bC:void 0}r(),r();var xt=new class{xLt(t){if(!this.Rt())return!1;const e=[];return!(e.length>0)||e.some((e=>e.toLowerCase()===t.toLowerCase()))}RLt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.xLt(t)&&As.Np("DEBUG "+t+" -",...i)}RN(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.xLt(t)&&As.Np("INFO "+t+" -",...i)}ILt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.xLt(t)&&As.Mp("WARNING "+t+" -",...i)}lt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.xLt(t)&&As.Lp("ERROR "+t+" -",...i)}CLt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.xLt(t)&&As.Lp("FATAL "+t+" -",...i)}constructor(){this.Rt=()=>!1}},Tc="HLSPlaylistParser",oc="Discontinuity",$u="Buffering",HY=class{ift(){var t;const e=null==(t=this.ta.Tr)?void 0:t.PLt;if(!e||0===e.length)return void xt.ILt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var i;const s=null!=(i=Ti(e,(t=>0!==t.DLt.length&&0!==t.NLt.length)))?i:e[0],n=e.filter((t=>t!==s));for(const t of s.DLt){const e=new Oc,i=[];e.yO(new WY(s,t)),i.push(t);for(const s of n)for(const n of s.DLt)if(et(n,t)&&!LY(i,n)){e.yO(new WY(s,n)),i.push(n);break}this.MLt.tt(new OY(this.ta,this.dZ,this.MLt,e))}for(const t of s.NLt){const e=new Oc,i=[];e.yO(new UY(s,t)),i.push(t);for(const s of n)for(const n of s.NLt)if(et(n,t)&&!LY(i,n)){e.yO(new UY(s,n)),i.push(n);break}this.LLt.tt(new FY(this.ta,this.dZ,this.LLt,e))}}BLt(){this.OLt(this.MLt),this.OLt(this.LLt)}OLt(t){const e=[];for(const i of t.oC){const t=[];for(const e of i.EC.oC)qt(e.aLt.FLt,e.oLt)||t.push(e);for(const e of t)i.EC.jS(e),e.gn();0===i.EC.V&&e.push(i)}for(const i of e)t.it(i),i.gn()}VLt(t,e){const i=this.WLt(t);void 0!==i&&(i.Kdt=e)}ULt(t,e){const i=this.WLt(t);void 0!==i&&(i.Eyt=e)}WLt(t){for(const e of this.LLt.oC){const i=Ti(e.EC.oC,(e=>e.oLt===t));if(void 0!==i)return i}}constructor(t,e,i,s){this.ta=t,this.dZ=e,this.MLt=i,this.LLt=s}};r();var ZY=class{get mG(){return this.gut.tit}get gG(){return this.pIt.tit}pG(t){if("segment"!==t.pw&&"preload-hint"!==t.pw)return;const e=[new vz(this.pIt)];return"stream"!==t.Xk||!function(t){return"segment"===t.pw&&"initialization-segment"!==t.yE}(t)&&"preload-hint"!==t.pw?e.push(new mz(this.gut)):e.push(new gz(this.gut,1e3)),new _z(e)}dIt(t){this.gut=new Ct(Ct.zRt,Ct.qRt,1,t)}constructor(t){const e=t.mG>0?t.mG:Ct._ut,i=t.gG>0?t.gG:Ze._ut;this.gut=new Ct(Ct.zRt,Ct.qRt,1,e),this.pIt=new Ze(Ze.zRt,Ze.qRt,i)}};r();var XY=class extends pe{constructor(t){super(zt.YMt),this.lt=t}};r();var zY=class{IJ(t,e){const i={pw:zr._W,JG:[],o4:t.map((t=>({Ik:t}))),g4:e};return Promise.resolve(void 0!==this.Unt.IJ([i]))}constructor(t){this.Unt=t}};r(),r();var qY=(t,e,i,s,n)=>t.filter((t=>!!qt(s,t)||1.1*t.mG<=i.mG)),YY=(t,e,i,s,n)=>t.filter((t=>{if(qt(s,t))return!0;let r=1/0;for(const e of t.FLt){var o,h;r=_.min(r,null!=(h=null!=(o=e.jMt.GLt)?o:e.jMt.HLt)?h:1/0)}r===1/0&&(r=1);const a=2*i.gG+t.mG*r/i.mG;return t.mG<=e.mG||n.ZLt>a})),KY=(t,e,i,s,n)=>Bi(t,((t,e)=>e.mG-t.mG)),jY=(t,e,i,s,n)=>t.every((t=>t.kyt&&!S(t.kyt)))?Bi(t,((t,e)=>e.kyt-t.kyt)):t,QY=(t,e,i,s,n)=>0===s.length?t:Bi(t,((t,e)=>{const i=qt(s,t)?1:0;return(qt(s,e)?1:0)-i})),JY=(t,e,i,s,n,r)=>t.filter((t=>!t.Urt||!e.Urt||!(void 0!==e.Urt.ePt&&void 0!==t.Urt.ePt&&!Dn(e.Urt.ePt,t.Urt.ePt)&&!r.XLt({Ik:'video/mp4; codecs="'+t.Urt.ePt+'"'}))&&!(void 0!==e.Urt.$Ct&&void 0!==t.Urt.$Ct&&!Dn(e.Urt.$Ct,t.Urt.$Ct)&&!r.zLt({Ik:'audio/mp4; codecs="'+t.Urt.$Ct+'"'})))),$Y=(t,e,i,s,n)=>{if(!1===n.blt)return t;if(As.Ys.Hg)return t;const r=As.Ys.Zg;var o;const h=(null!=(o=null==r?void 0:r.width)?o:n.ji)*RW;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Ti)*RW;for(let e=0;e<t.length;e++){const i=t[e];if(void 0===i.HCt)return t;const s=i.HCt.Ti,n=i.HCt.ji;if(s<=u&&n<=h)return t.slice(e,t.length)}return[]},tK=(t,e,i,s,n)=>function(t,e){const i=e.blt;if(void 0===i&&!As.Ys.Qs)return t;if(!1===i)return t;for(let i=0;i<t.length;i++){const s=t[i];if(void 0===s.HCt)return t;const n=s.HCt.Ti,r=s.HCt.ji;if(n===e.Ti&&r===e.ji)return t.slice(i,t.length);if(n<e.Ti||r<e.ji)return t.slice(0===i?i:i-1,t.length)}return[]}(t,n);var eK="AbrEvaluator",iK=class{get qLt(){return this.dZ.nj}YLt(t){this.d_=t}async KLt(t,e,i,s,n){return(await this.jLt(t,e,i,s,n))[0]}async jLt(t,e,i,s,n){if(0===t.length)throw new g("AbrEvaluator - Unable to select optimal variant stream from an empty list.");xt.RLt(eK,"Performing optimal variant stream selection.");const r=this.qLt;let o=t;for(const t of this.d_){const h=t(o,e,r,i,s,n);o=rl(h)?h:await h}if(0===o.length){xt.ILt(eK,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[Gs(t,(t=>t.mG))]}return o}constructor(t){this.dZ=t,this.d_=[JY,qY,YY,KY,$Y,tK,jY,QY]}};function sK(t,e){return[t,void 0!==e?t+e-1:Lu]}function nK(t){return Boolean(t.gN)}function vt(t){return Boolean(t.Srt)}r(),r(),r(),r(),r();var el=function(t){return t[t.cE=0]="cE",t[t.lE=1]="lE",t[t.qV=2]="qV",t[t.QLt=3]="QLt",t}({}),rK=function(t){return t[t.JLt=0]="JLt",t[t.$Lt=1]="$Lt",t}({}),Rt=function(t){return t[t.YH=0]="YH",t[t.tBt=1]="tBt",t[t.eBt=2]="eBt",t}({}),oK=function(t){return t[t.Qk=0]="Qk",t[t.iBt=1]="iBt",t[t.sBt=2]="sBt",t}({});function Qe(t){return t?t.nAt?t.Ix+"@"+t.nAt.Cn+"-"+(null!=(e=t.nAt.V)?e:""):""+t.Ix:"";var e}function hK(t,e){if(e===t)return!0;if(e.Ix!==t.Ix)return!1;if(!t.nAt)return!0;if(e.nAt){const i=sK(t.nAt.Cn,t.nAt.V),s=sK(e.nAt.Cn,e.nAt.V);if(i[0]<=s[0])return void 0===i[1]||void 0!==s[1]&&i[1]>=s[1]}return!1}function aK(t,e){return t===e||t.Ix===e.Ix&&(t.nAt&&e.nAt?t.nAt.Cn===e.nAt.Cn&&t.nAt.V===e.nAt.V:t.nAt===e.nAt)}function uK(t){const e=!!t.nBt||void 0;return{o:t.o,rBt:t.rBt,YG:t.YG,oBt:t.oBt,ct:t.ct,hBt:t.hBt,nBt:e,aBt:t.uBt,cBt:t.lBt,dBt:t.dBt,fBt:t.fBt}}function cK(t,e){var i,s,n;return{$Ct:null!=(i=e.$Ct)?i:null==t?void 0:t.$Ct,ePt:null!=(s=e.ePt)?s:null==t?void 0:t.ePt,_Bt:null!=(n=e._Bt)?n:null==t?void 0:t._Bt}}async function lK(t,e,i,s,n){const r=e.filter((t=>Dh(t,"audio"))),o=e.filter((t=>Dh(t,"video"))),h=[],a=i.map((t=>async function(t,e,i){if(!t.Ryt)return;if(!t.vBt)return;if(t.gE!==Rt.eBt)return;const s=dK(t.vBt);if(!s)return;if(s.Sw===Ve)return{rT:s,SG:[],TG:void 0,LU:t.Ryt};if(s.Sw===cm&&t.vBt===_m)return{rT:s,SG:[],TG:t.Ryt,LU:void 0};{xt.RN("HLSDrmUtils","Fetching key uri "+t.Ryt+".");const n=await e.zk({qu:t.Ryt,AE:i});return{rT:s,SG:[await n.xk()],TG:void 0,LU:void 0}}}(t,s,n)));var u;const c=function(t,e){if(0===e.length)return t;const i=t=>{const i=e.indexOf(t.rT.Sw);return i>=0?i:e.length};return Bi(t,((t,e)=>i(t)-i(e)))}((await Promise.all(a)).filter(ne),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const e of c){const i=uX(null!=t?t:{},e.rT),s="cbcs";h.push({rT:e.rT,SG:e.SG,TG:e.TG,LU:e.LU,SH:[{initDataTypes:[e.rT.yw],audioCapabilities:cX(r,s,null==i?void 0:i.audioRobustness),videoCapabilities:cX(o,s,null==i?void 0:i.videoRobustness),persistentState:null==i?void 0:i.persistentState,distinctiveIdentifier:null==i?void 0:i.distinctiveIdentifier}]})}return h}function dK(t){return t===hm?rn:t===Ga?vm:t===fm?gm:t===_m?pm:void 0}function fK(t){if("#"!==t[0])throw new g("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function _K(t){return"#"!==t[0]?t:t.split(":",1)[0]}function vK(t){const e=t.indexOf(":");if(-1===e||t.length<e+1)throw new g("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(e+1)}function mK(t){const e=du(vK(t));if(void 0===e)throw new g("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return e}function gK(t){const e={},i=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=i.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?e[n]=r:xt.ILt(Tc,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=i.exec(t)}return e}function pK(t,e){const i=gK(t);let s,n;try{s=i.URI?As.Kp(i.URI,e):void 0,n=function(t){switch(t){case"AUDIO":return el.cE;case"VIDEO":return el.lE;case"SUBTITLES":return el.qV;case"CLOSED-CAPTIONS":return el.QLt}throw new g("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(i.TYPE)}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=i["GROUP-ID"],o=i.LANGUAGE,h=i["ASSOC-LANGUAGE"],a=i.NAME,u="YES"===i.DEFAULT;let c="YES"===i.AUTOSELECT;const l="YES"===i.FORCED,d=i["INSTREAM-ID"],f=i.CHARACTERISTICS,_=i.CHANNELS;if(r||xt.ILt(Tc,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),o||xt.ILt(Tc,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||xt.ILt(Tc,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===el.QLt?(s&&xt.ILt(Tc,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),d?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(d)||xt.ILt(Tc,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):xt.ILt(Tc,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):d&&xt.ILt(Tc,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,i.AUTOSELECT&&xt.ILt(Tc,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),i.FORCED&&n!==el.qV&&xt.ILt(Tc,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{mBt:h,WCt:_,sLt:f,tLt:r,JMt:c,QMt:u,$Mt:l,eLt:d,gs:o,l:a,pw:n,Ryt:s}}function wK(t,e,i){const s=gK(t);let n,r,o;try{n=As.Kp(i,e),o=function(t){if(void 0===t)return;const e=t.split("x"),i=Number(e[0]),s=Number(e[1]);if(S(i)||S(s))throw new g("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{ji:i,Ti:s}}(s.RESOLUTION),r=function(t){if(!t)return;let e,i,s;const n=t.split(",");for(const t of n){const n=t.trim();Cl(n,"mp4a")?e="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?e=n:Cl(n,"avc")||Cl(n,"hvc1")||Cl(n,"hev1")||Cl(n,"dvh")||Cl(n,"vp09")||Cl(n,"av01")?i=n:s=s?s+","+n:n}return{$Ct:e,ePt:i,_Bt:s}}(s.CODECS)}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const h=du(s.BANDWIDTH),a=du(s["AVERAGE-BANDWIDTH"]),u=du(s.SCORE),c=du(s["FRAME-RATE"]),l=s["HDCP-LEVEL"],d=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");d.push(...t.map((t=>{const e=t.split(":");return{keysystem:e[0],label:e[1]}})))}const f=s["VIDEO-RANGE"],_=s.AUDIO,v=s.VIDEO,m=s.SUBTITLES,p=s["CLOSED-CAPTIONS"];if(void 0===h?xt.ILt(Tc,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>h&&xt.ILt(Tc,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||xt.RN(Tc,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.ePt&&void 0===o&&xt.RN(Tc,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||qt(["TYPE-0","TYPE-1","NONE"],l)||xt.ILt(Tc,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||qt(["SDR","PQ","HLG"],f)||xt.ILt(Tc,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===h)throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{gBt:d,pBt:_,Tyt:a,mG:h,wBt:p,Urt:r,Kdt:c,yBt:l,HCt:o,kyt:u,bBt:m,Ryt:n,ABt:v,SBt:f}}function yK(t,e){const i=gK(t);if(!i.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return wK(t,e,i.URI)}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function du(t){const e=Number(t);return S(e)?void 0:e}function bK(t,e){const i=gK(t);let s,n;try{s=function(t){switch(t){case"NONE":return Rt.YH;case"AES-128":return Rt.tBt;case"SAMPLE-AES":return Rt.eBt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new g("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(i.METHOD),n=i.URI?IK(i.URI,e):void 0}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=i.KEYFORMAT,o=i.IV,h=i.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==Rt.YH){if(c=r||_m,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(dK(c)!==rn)throw new g("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=Rt.eBt}else a=s;u=n,l=o?tp(o):void 0,d=h?h.split("/").map((t=>Number(t))):[1]}else a=Rt.YH,(n||r||h||o)&&xt.ILt(Tc,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{gE:a,Ryt:u,TBt:l,vBt:c,kBt:d}}function AK(t){const e=vK(t);if(!e)return[void 0,""];const[i,s]=e.split(",");return[du(i),s]}function SK(t,e){const i=t.split("@"),s=du(i[0]),n=i.length>1?du(i[1]):e;if(void 0===s||void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Cn:n,V:s}}function TK(t){if(void 0!==t)return SK(t,void 0)}function kK(t,e){return SK(vK(t),e)}function EK(t,e){const i=gK(t);try{const t=IK(i.URI,e);return{Ix:t,nAt:TK(i.BYTERANGE)}}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function xK(t){const e=vK(t);if(!e)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const i=new Date(e);if(!mf(i))throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return i}function RK(t){const e=gK(t),i=e["START-DATE"],s=e["END-DATE"],n=du(e["PLANNED-DURATION"]);let r,o,h,a=du(e.DURATION);void 0!==e["SCTE35-CMD"]&&(r=tp(e["SCTE35-CMD"]).buffer),e["SCTE35-IN"]&&(o=tp(e["SCTE35-IN"]).buffer),e["SCTE35-OUT"]&&(h=tp(e["SCTE35-OUT"]).buffer);const u="YES"===e["END-ON-NEXT"],c=function(t){const e={};for(const i of w.keys(t)){const s=t[i];void 0!==s&&Cl(i,"X-")&&(e[i]=s)}return e}(e),l=e.ID,d=e.CLASS;let f,_;if(void 0===i)xt.ILt(Tc,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+i+".");else if(f=new Date(i),_=void 0!==s?new Date(s):void 0,mf(f)||xt.ILt(Tc,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const e=new Date(f.getTime()+1e3*a);_?_.getTime()!==e.getTime()&&(xt.ILt(Tc,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),_=e):_=e}else _&&(a=(f.getTime()-_.getTime())/1e3);if(u&&(e.CLASS||xt.ILt(Tc,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),e.DURATION&&xt.ILt(Tc,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),_&&xt.ILt(Tc,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&xt.ILt(Tc,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new g("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,rBt:d,YG:f,oBt:_,ct:a,hBt:n,lBt:r,fBt:o,dBt:h,nBt:u,uBt:c}}function IK(t,e){if(void 0===t)throw new g("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return As.Kp(t,e)}function CK(t,e){const i=gK(t),s=du(i.DURATION),n=IK(i.URI,e),r=TK(i.BYTERANGE),o="YES"===i.INDEPENDENT,h="YES"===i.GAP;if(void 0===s)throw new g("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,Ryt:{Ix:n,nAt:r},EBt:o,xBt:h}}function PK(t){const e=gK(t);return{RBt:"YES"===e["CAN-BLOCK-RELOAD"],IBt:du(e["CAN-SKIP-UNTIL"]),CBt:"YES"===e["CAN-SKIP-DATERANGES"],PBt:du(e["HOLD-BACK"]),DBt:du(e["PART-HOLD-BACK"])}}function DK(t,e){const i=gK(t);if(void 0===i.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=IK(i.URI,e),n=du(i["LAST-MSN"]),r=du(i["LAST-PART"]);if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{Ryt:s,NBt:n,MBt:r}}function NK(t,e){var i;const s=gK(t),n=du(s["SKIPPED-SEGMENTS"]),r=null==(i=s["RECENTLY-REMOVED-DATERANGES"])?void 0:i.split("\t");if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{LBt:n,BBt:r,OBt:e}}function MK(t){const e=du(gK(t)["PART-TARGET"]);if(void 0===e)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return e}function LK(t){switch(vK(t)){case"VOD":return oK.iBt;case"EVENT":return oK.sBt;default:return xt.ILt(Tc,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),oK.Qk}}function BK(t,e){const i=gK(t);let s,n;try{s=function(t){if(void 0===t)throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return rK.JLt;if("PART"===t)return rK.$Lt;throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(i.TYPE),n=IK(i.URI,e)}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=du(i["BYTERANGE-START"]),o=du(i["BYTERANGE-LENGTH"]);let h;return void 0===r&&void 0===o||(h={Cn:r||0,V:o}),{pw:s,Ryt:{Ix:n,nAt:h}}}r(),r(),r();var OK=class t{FBt(){const t=this.VBt[this.WBt];return this.WBt+=1,t}UBt(){return this.VBt[this.WBt]}Tb(){const e=new t("");return e.WBt=0,e.VBt=this.VBt.slice(this.WBt),e}static GBt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(e){this.WBt=0,this.VBt=t.GBt(e)}};function FK(t,e,i){const s=t.Ryt;let n=t.XD,r=t.HBt,o=t.Cn;switch(i){case"#EXT-X-VERSION":n=function(t){const e=mK(t);return S(e)?(xt.ILt(Tc,"Playlist version is NaN: "+t+"."),1):e}(e);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":o=function(t){const e=gK(t),i=du(e["TIME-OFFSET"]);if(void 0===i)throw new g("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{ZBt:i,XBt:"YES"===e.PRECISE}}(e);break;case"#EXT-X-DEFINE":xt.ILt(Tc,"Ignoring unsupported #EXT-X-DEFINE: "+e+".");break;default:xt.RN(Tc,"Ignoring unrecognized line or comment: "+e+".")}return{Ryt:s,XD:n,HBt:r,Cn:o}}function VK(t,e){return t.map((t=>t.gE===Rt.YH||t.TBt?t:la({},t,{TBt:WK(e)})))}function WK(t){const e=new DataView(new ArrayBuffer(16)),i=new Ui;return i.Ab(8),Bg(e,i,fo.fromNumber(t)),new j(e.buffer)}function UK(t,e,i){xt.RN(Tc,"Parsing M3U8 playlist at "+t+".");const s=new OK(i);if("#EXTM3U"!==s.FBt())throw new g("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(i)?function(t,e){let i;try{i=As.Kp(t)}catch(e){throw xt.ILt(Tc,"The master playlist has no valid base URI: "+t+"."),new g("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={Ryt:i,HBt:void 0,Cn:void 0,XD:void 0};const n=[],r=[],o=[],h=[];for(;;){const t=e.FBt();if(!t)break;try{const a=fK(t);switch(a){case"#EXT-X-MEDIA":{const e=pK(t,i);n.push(e);break}case"#EXT-X-STREAM-INF":{const s=wK(t,i,e.FBt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const e=yK(t,i);o.push(e);break}case"#EXT-X-SESSION-DATA":xt.ILt(Tc,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const e=bK(t,i);h.push(e);break}default:s=FK(s,t,a)}}catch(e){xt.ILt(Tc,"Ignoring unparsable line: "+t,e)}}let a=s.XD;var u;const c=null!=(u=s.HBt)&&u,l=s.Cn;return void 0===a&&(xt.ILt(Tc,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some((t=>void 0!==t.kyt))||o.some((t=>void 0!==t.kyt)))&&(r.some((t=>void 0===t.kyt))||o.some((t=>void 0===t.kyt)))&&xt.ILt(Tc,"If one master playlist variant stream has a SCORE, all variants should have it."),{Ryt:i,XD:a,HBt:c,Cn:l,zBt:o,qBt:h,gN:n,YBt:r}}(t,s):function(t,e,i){let s={Ryt:t,HBt:void 0,Cn:void 0,XD:void 0};const n=[];let r,o,h,a,u=!1,c=!1;const l=[],d=_u();let f,_,v,m,p,w,y,b,A,S=[],T=[],k=!1,E=!1;const x=[],R=[];let I,C,P,D,N,M=0,L=!1,B=oK.Qk,O=!1,F=0;try{N=As.Kp(t)}catch(e){throw xt.ILt(Tc,"The media playlist has no valid base URI: "+t+".",e),new g("HLSPlaylistParser - Could not parse HLS media playlist.")}const V=i.Tb();for(;void 0===C||void 0===P;){const t=V.FBt();if(!t)break;try{switch(_K(t)){case"#EXT-X-MEDIA-SEQUENCE":C=mK(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":P=mK(t)}}catch(e){xt.ILt(Tc,"Ignoring unparsable line: "+t,e)}}void 0===C&&(xt.RN(Tc,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),C=0),void 0===P&&(xt.RN(Tc,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),P=0);let W=C,U=P;for(;;){const t=i.FBt();if(!t)break;let e=!1;try{const i=_K(t);switch(i){case"#EXTINF":e=!0,[f,_]=AK(t);break;case"#EXT-X-BYTERANGE":e=!0,v=kK(t,M),v&&(M=v.Cn+v.V);break;case"#EXT-X-DISCONTINUITY":e=!0,k=!0,U++;break;case"#EXT-X-KEY":{var G;e=!0;const i=bK(t,N);if(i.gE===Rt.YH){d.clear(),A=void 0;break}var H;const s=null!=(H=null==(G=i.vBt)?void 0:G.toString())?H:"identity";d.set(s,i),i.gE===Rt.tBt&&(A=i);break}case"#EXT-X-MAP":e=!0,p=EK(t,N),w=A;break;case"#EXT-X-PROGRAM-DATE-TIME":e=!0,y=xK(t);break;case"#EXT-X-GAP":e=!0,E=!0;break;case"#EXT-X-BITRATE":e=!0,b=mK(t);break;case"#EXT-X-TARGETDURATION":r=mK(t);break;case"#EXT-X-DATERANGE":{const e=RK(t);n.push(e);break}case"#EXT-X-PART":{e=!0;const i=CK(t,N);T.push(i);break}case"#EXT-X-PRELOAD-HINT":{const e=BK(t,N);x.push(e);break}case"#EXT-X-SKIP":{l.length>0&&xt.ILt(Tc,"#EXT-X-SKIP must appear before any #EXTINF tags."),e=!0;const i=NK(t,W);F=i.LBt,D=i.BBt,W+=i.LBt;break}case"#EXT-X-SERVER-CONTROL":{const e=PK(t);u=e.RBt,o=e.IBt,c=e.CBt,h=e.PBt,a=e.DBt;break}case"#EXT-X-RENDITION-REPORT":{const e=DK(t,N);R.push(e);break}case"#EXT-X-PART-INF":I=MK(t);break;case"#EXT-X-MEDIA-SEQUENCE":e&&xt.ILt(Tc,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":e&&xt.ILt(Tc,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":L=!0;break;case"#EXT-X-PLAYLIST-TYPE":B=LK(t);break;case"#EXT-X-I-FRAMES-ONLY":O=!0;break;default:if(Cl(i,"#"))s=FK(s,t,i);else{m=As.Kp(t,N);const e=p?{Ryt:p,KBt:w}:void 0,i={qBt:VK(Kv(d),W),GV:S,jBt:T,ct:f,eH:_,QBt:k,Ryt:{nAt:v,Ix:m},JBt:e,$Bt:y,xBt:E,tOt:b,OBt:W,eOt:U};l.push(i),W++,S=[],T=[],f=void 0,_=void 0,k=!1,v=void 0,m=void 0,y=void 0,E=!1,b=void 0}}}catch(e){xt.ILt(Tc,"Ignoring unparsable line: "+t,e)}}if(T.length){const t=p?{Ryt:p,KBt:A}:void 0,e={qBt:VK(Kv(d),W),GV:S,jBt:T,ct:f,eH:_,QBt:k,Ryt:void 0,JBt:t,$Bt:y,xBt:E,tOt:b,OBt:W,eOt:U};l.push(e)}let Z=s.XD;var X;const z=null!=(X=s.HBt)&&X,q=s.Cn;void 0===Z&&(xt.ILt(Tc,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),Z=2),void 0===r&&xt.ILt(Tc,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const Y=l.length,K=Y>0;K||xt.ILt(Tc,"The HLS media playlist contains no segments.");const j=K&&l[Y-1].jBt.length>0;return j&&void 0===I&&xt.ILt(Tc,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),j&&void 0===a&&xt.ILt(Tc,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{RBt:u,IBt:o,CBt:c,iOt:n,eOt:P,sOt:L,HBt:z,PBt:h,nOt:O,OBt:C,LBt:F,DBt:a,GLt:I,rOt:B,oOt:x,BBt:D,hOt:R,aOt:r,Srt:l,Cn:q,Ryt:N,uOt:e,XD:Z}}(t,e,s)}r(),r();var GK=class{get Ryt(){return this.jMt.Ryt}get Urt(){return this.DCt}set Urt(t){this.DCt=t?ZK(t):void 0,this.cOt=function(t,e){return!(void 0!==(null==t?void 0:t.$Ct)&&void 0===(null==e?void 0:e.$Ct)||void 0!==(null==t?void 0:t.ePt)&&void 0===(null==e?void 0:e.ePt))}(this.lOt,this.DCt)}get dOt(){return this.cOt}get FLt(){return this.fOt}get DLt(){return this.fOt.filter((t=>t.pw===el.cE))}get NLt(){return this.fOt.filter((t=>t.pw===el.lE))}get _Ot(){return this.fOt.filter((t=>t.pw===el.qV))}get vOt(){return this.fOt.filter((t=>t.pw===el.QLt))}mOt(t){for(const e of this.fOt){const i=e.jMt.mOt(t);if(void 0!==i)return i}}gOt(t){for(const e of this.fOt){const i=e.jMt.gOt(t);if(void 0!==i)return i}}pOt(t){we(this.fOt,t)}constructor(t,e,i){var s,n,r,o;this.o=HK++,this.kyt=void 0,this.HCt=void 0,this.Tyt=void 0,this.cOt=!1,this.fOt=[],this.jMt=e,this.mG=t.mG,this.Tyt=t.Tyt,this.kyt=t.kyt,this.lOt=t.Urt?ZK(t.Urt):void 0,this.DCt=this.lOt,this.HCt=t.HCt,this.Kdt=t.Kdt,this.pBt=null!=(s=t.pBt)?s:"wOt"+this.o,this.ABt=null!=(n=t.ABt)?n:"yOt"+this.o,this.bBt=null!=(r=t.bBt)?r:"bOt"+this.o,this.wBt=null!=(o=t.wBt)?o:"AOt"+this.o,this.fOt=i}},HK=0;function ZK(t){return la({},t,{ePt:t.ePt?My(t.ePt):void 0})}r(),r(),r();var XK=class{get LO(){var t;return this.XO+(null!=(t=this.SOt)?t:0)}get TOt(){return this.kOt}get EOt(){return this.xOt}get qBt(){return this.ROt.qBt}IOt(t,e,i){this.XO=t,this.kOt=e,this.xOt=i}constructor(t,e,i,s,n,r){this.hit=void 0,this.ROt=t,this.COt=e,this.XO=i,this.kOt=s,this.xOt=n,this.ct=r.ct,this.Ryt=r.Ryt,this.EBt=r.EBt,this.xBt=r.xBt}},zK=class{get LO(){var t;return this.XO+(null!=(t=this.POt)?t:0)}get DOt(){return this.XO}get ct(){return this.IA}get Ryt(){return this.NOt}get TOt(){return this.kOt}get EOt(){return this.xOt}get jBt(){return this.mv}get MOt(){return this.LOt}get BO(){var t;return this.LO+(null!=(t=this.IA)?t:this.LOt)}set SOt(t){this.POt=t;for(const e of this.mv)e.SOt=t}get SOt(){return this.POt}BOt(t){return this.mv[t]}OOt(t){for(let e=0;e<this.mv.length;e++){const i=this.mv[e],s=i.LO,n=s+i.ct;if(s<=t&&t<=n)return t===n&&e+1<this.mv.length?this.mv[e+1]:i}}FOt(t){for(let e=this.mv.length-1;e>=0;e--){const i=this.mv[e];if(i.LO<=t)return i}}VOt(t){let e=this.FOt(t);for(;e&&!e.EBt&&e.COt>0;)e=this.BOt(e.COt-1);return e}IOt(t,e,i){const s=t.jBt.length!==this.mv.length||i!==this.xOt;this.kOt=e,this.xOt=i,this.IA=t.ct,null!=this.$Bt||(this.$Bt=t.$Bt),void 0===this.NOt&&(this.NOt=t.Ryt),s&&this.WOt(t.jBt)}WOt(t){this.mv.length>t.length&&(this.mv.length=t.length);let e=0;for(let i=0;i<t.length;i++){const s=t[i],n=this.kOt&&0===i,r=this.xOt&&i===t.length-1,o=this.XO+e;if(i<this.mv.length)this.mv[i].IOt(o,n,r);else{const t=new XK(this,i,o,n,r,s);t.SOt=this.POt,this.mv.push(t)}e+=s.ct}this.LOt=e}UOt(){Pn(this.mv),this.LOt=0}constructor(t,e,i,s,n){this.hit=void 0,this.mv=[],this.LOt=0,this.XO=t,this.JBt=n.JBt,this.kOt=i,this.xOt=s,this.IA=n.ct,this.$Bt=n.$Bt,this.NOt=n.Ryt,this.xBt=n.xBt,this.OBt=n.OBt,this.QBt=n.QBt,this.eOt=e,this.qBt=n.qBt,this.WOt(n.jBt)}};r();var qK=function(t){return t.GOt="YES",t.HOt="v2",t}({});r();var YK=class extends pt{};r(),r(),r();var KK=class extends Le{get ga(){return this.Za||(this.Za=function(t){return nh(Ht(t),{get content(){return t.U},get class(){return t.rBt},get startDate(){return t.YG},get endDate(){return t.oBt},get duration(){return t.ct},get plannedDuration(){return t.hBt},get endOnNext(){return t.nBt},get scte35Cmd(){return t.cBt},get scte35Out(){return t.dBt},get scte35In(){return t.fBt},get customAttributes(){return t.aBt}})}(this)),this.Za}get rBt(){return this.ZOt}get YG(){return this.XOt}get oBt(){return this.zOt}get ct(){return this.IA}get hBt(){return this.qOt}get nBt(){return this.YOt}get cBt(){return this.KOt}get dBt(){return this.jOt}get fBt(){return this.QOt}get aBt(){return this.JOt}Yn(t){let e=!1;var i;(void 0===this.ZOt&&void 0!==t.rBt&&(e=!0,this.ZOt=t.rBt),void 0===this.zOt&&void 0!==t.oBt&&(e=!0,this.zOt=t.oBt),void 0===this.IA&&void 0!==t.ct&&(e=!0,this.IA=t.ct),void 0===this.qOt&&void 0!==t.hBt&&(e=!0,this.qOt=t.hBt),!this.YOt&&t.nBt&&(e=!0,this.YOt=t.nBt),e=this.updateCustomAttributes(t,e),void 0===this.KOt&&void 0!==t.cBt&&(e=!0,this.KOt=t.cBt),void 0===this.jOt&&void 0!==t.dBt&&(e=!0,this.jOt=t.dBt),void 0===this.QOt&&void 0!==t.fBt&&(e=!0,this.QOt=t.fBt),this.$Ot(),this.tFt(),this.eFt(),e)&&(this.yo(new yl(this)),null==(i=this.zO)||i.yo(new bl(this)))}updateCustomAttributes(t,e){let i=e;if(t.aBt)for(const e of w.keys(t.aBt))void 0===this.JOt[e]&&(i=!0,this.JOt[e]=t.aBt[e]);return i}$Ot(){this.IA&&!this.zOt&&(this.zOt=new Date(this.XOt.getTime()+Na(this.IA)))}tFt(){this.zOt&&!this.IA&&(this.IA=gf(this.zOt.getTime()-this.XOt.getTime()))}eFt(){this.YO===1/0&&(this.zOt||this.IA)&&(this.YO=jK(this.XO,this.IA,this.XOt,this.zOt))}constructor(t,e){super(e,jK(e,t.ct,t.YG,t.oBt),void 0,!1,t.o),this.ZOt=t.rBt,this.XOt=t.YG,this.zOt=t.oBt,this.IA=t.ct,this.qOt=t.hBt,this.YOt=Boolean(t.nBt),this.JOt=t.aBt||{},this.KOt=t.cBt,this.jOt=t.dBt,this.QOt=t.fBt,this.$Ot(),this.tFt()}};function jK(t,e,i,s){return ne(e)?t+e:s?t+(gf(s.getTime())-gf(i.getTime())):1/0}var QK=class extends LL{Yn(t,e){JK(this,$K(t),e)}uW(t){tj(this.L.oC,t),super.uW(t)}constructor(){super(void 0,void 0,Vr.DATE_RANGE)}};function JK(t,e,i){const s=t.L.oC;for(let i=s.length-1;i>=0;i--){const n=s[i],r=Ti(e,(t=>t.o===n.o));r?n.Yn(r):t.JV(n)}for(const s of e){const e=s.YG;if(void 0!==e&&!t.Z4(s.o)){const n=i(e),r=new KK(s,n);tj(t.L.oC,r),t.uW(r)}}}function $K(t){const e=_u(),i=[];for(const s of t)if(e.has(s.o)){const t=e.get(s.o),i=la({},t,KA(s),{aBt:la({},t.aBt,s.aBt)});e.set(s.o,i)}else e.set(s.o,s),i.push(s.o);return i.map((t=>e.get(t)))}function tj(t,e){const i=Gm(t,(t=>t.rBt===e.rBt));i&&i.nBt&&i.Yn({o:i.o,oBt:e.YG})}var ej=String.fromCharCode(95),ij=ej+"HLS_msn",sj=ej+"HLS_part",nj=ej+"HLS_skip",rj="HLSMediaPlaylist",oj=class{get sOt(){if(0===this.Lbt.length)return!1;return this.Lbt[this.Lbt.length-1].EOt}get ct(){return this.IA}get iI(){return this.n4}get iFt(){return this.sFt}get HLt(){return this.nFt}get GLt(){return this.rFt}get PBt(){return this.sOt?0:this.oFt?this.oFt:this.nFt?3*this.nFt:void 0}get DBt(){var t;return null!=(t=this.hFt)?t:this.rFt?3*this.rFt:void 0}get RBt(){return this.aFt}get IBt(){return this.uFt}get CBt(){return this.cFt}get rOt(){return this.lFt}get dFt(){return void 0!==this.GLt}get fFt(){if(this.sOt)return!0;const t=As.Bg()/1e3,e=this._Ft,i=this.vFt;return void 0!==e&&t-e<i}get _Ft(){return this.mFt}get gFt(){if(this.pFt)return As.Bg()/1e3-this.pFt}get SOt(){return this.POt}get vFt(){var t;return null!=(t=this.nFt)?t:void 0===this.mFt?5:1}get Srt(){return this.Lbt}get iOt(){return this.wFt}get yFt(){return this.bFt}set yFt(t){this.bFt=t}get Cn(){return this.XV}get AFt(){return this.SFt}kLt(t){if(!t)return this.Ryt;const e=As.Ah(this.Ryt);return void 0!==t.OBt&&e.searchParams.append(ij,String(t.OBt)),void 0!==t.TFt&&e.searchParams.append(sj,String(t.TFt)),void 0!==t.RD&&e.searchParams.append(nj,t.RD),e.href}Qat(t){const e=this.Lbt;if(0===e.length)return;const i=t-e[0].OBt;return i<0||i>=e.length?void 0:e[i]}kFt(t){if(0===this.Lbt.length)return;const e=SH(hj.Lg,this.Lbt,t);if(!(e<0)){const i=this.Lbt[e];return t===i.BO&&e+1<this.Lbt.length?this.Lbt[e+1]:i}{const e=this.Lbt[this.Lbt.length-1];if(t===e.BO)return e}}EFt(t){if(0===this.Lbt.length)return;const e=this.Lbt[0];if(t<e.BO)return e;const i=this.Lbt[this.Lbt.length-1];return t>=i.LO?i:this.kFt(t)}mOt(t){const e=this.EFt(t);if(void 0===e)return;for(let i=e.OBt-this.Lbt[0].OBt;i>=0;i--){const e=this.Lbt[i];if(void 0!==e.$Bt)return new Date(e.$Bt.getTime()+1e3*(t-e.LO))}}gOt(t){let e;for(const i of this.Lbt)if(aj(i))if(void 0===e)e=i;else{if(!(i.$Bt.getTime()<=t.getTime()))break;e=i}if(void 0!==e)return e.LO+(t.getTime()-e.$Bt.getTime())/1e3}xFt(t){switch(t){case rK.JLt:return this.RFt;case rK.$Lt:return this.IFt;default:return}}IOt(t){var e;void 0===this.nFt&&(this.nFt=null!=(e=t.aOt)?e:this.CFt(t));void 0===this.oFt&&void 0!==t.PBt&&(this.oFt=t.PBt),void 0===this.rFt&&void 0!==t.GLt&&(this.rFt=t.GLt),void 0===this.hFt&&void 0!==t.DBt&&(this.hFt=t.DBt),this.aFt=t.RBt,this.uFt=t.IBt,this.cFt=t.CBt,this.lFt=t.rOt,this.Vbt(t),this.PFt(t);const i=Ti(t.oOt,(t=>t.pw===rK.JLt)),s=Ti(t.oOt,(t=>t.pw===rK.$Lt));this.RFt=i?{Ryt:i.Ryt,pw:i.pw,eOt:t.eOt}:void 0,this.IFt=s?{Ryt:s.Ryt,pw:s.pw,eOt:t.eOt}:void 0,this.mFt=As.Bg()/1e3;const n=this.n4.jn(this.n4.V-1);this.DFt();const r=this.n4.jn(this.n4.V-1);(!this.pFt||r-n>0)&&(this.pFt=this.mFt),null!=this.XV||(this.XV=t.Cn)}DFt(){this.sFt=this.NFt(),this.n4=this.MFt(this.sFt),this.IA=this.LFt()}NFt(){const t=this.Srt;if(0===t.length)return ee.fB();const e=t[0].LO,i=t[t.length-1].BO;return new ee([e,i])}MFt(t){if(0===t.V||this.sOt)return t;const e=t.Cn(0),i=t.jn(0)-this.DSt;return i<e?ee.lB(e):new ee([e,i])}get DSt(){return this.sOt?0:null!=(i=null!=(e=null!=(t=this.BFt)?t:this.DBt)?e:this.PBt)?i:0;var t,e,i}LFt(){return 0===this.Lbt.length?0:this.sOt?vf(this.Lbt,(t=>{var e;return null!=(e=t.ct)?e:t.MOt})):1/0}CFt(t){let e;for(const i of t.Srt)if(void 0!==i.ct){const t=_.max(1,_.round(i.ct));(void 0===e||e<t)&&(e=t)}if(void 0===e)throw new g("HLSModel - Could not determine required segment target duration.");return e}Vbt(t){if(0===t.Srt.length)return Pn(this.Lbt),void this.OFt();const e=this.FFt(t);if(!e)return;let i,s,n;e.VFt>0&&this.Lbt.splice(0,e.VFt);const r=t.LBt;if(r>0){if(r>this.Lbt.length)throw new YK("New playlist skips over missing segments.");const e=this.Lbt[r-1];if(void 0===e.ct)throw new YK("New playlist skips over an incomplete segment.");i=e.DOt+e.ct,n=e.eOt-t.eOt,s=r;for(let t=0;t<r;t++)this.Lbt[t].UOt()}else i=e.WFt,n=0,s=0;for(let e=0;e<t.Srt.length;e++,s++){const r=t.Srt[e],o=0===e,h=t.sOt&&e===t.Srt.length-1,a=r.ct,u=r.eOt+n;if(s<this.Lbt.length){const t=this.Lbt[s];0,t.IOt(r,o,h)}else{let t=r;if(this.Lbt.length>0&&void 0===t.JBt){t=la({},t,{JBt:this.Lbt[this.Lbt.length-1].JBt})}const e=new zK(i,u,o,h,t);e.SOt=this.POt,this.Lbt.push(e)}void 0!==a&&(i+=a)}}FFt(t){if(0===this.Lbt.length)return{VFt:0,WFt:0};const e=this.Lbt[0].OBt,i=this.Lbt[this.Lbt.length-1].OBt,s=t.Srt[0].OBt-t.LBt,n=t.Srt[t.Srt.length-1].OBt;let r=0,o=0;if(s<e){const i=this.Srt[0].$Bt,n=t.Srt[0].$Bt;if(!(i&&n&&i<n))return void xt.ILt(rj,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+e+")");r=this.Lbt.length,this.OFt()}else{if(n<i)return void xt.ILt(rj,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+i+")");if(i<s){var h;o=null!=(h=function(t,e){const i=Gm(t,(t=>void 0!==t.$Bt));if(void 0===i)return;const s=function(t){let e=0;for(const s of t){if(s.QBt)return;if(s.$Bt)return[s,e];var i;e+=null!=(i=s.ct)?i:0}return}(e.Srt);if(void 0===s)return;const[n,r]=s;if(i.eOt!==n.eOt)return;const o=(n.$Bt.getTime()-i.$Bt.getTime())/1e3;return i.DOt+o-r}(this.Lbt,t))?h:function(t,e,i){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:_.max(i,s.MOt),o=i*(e-s.OBt-1);return s.DOt+r+o}(this.Lbt,s,this.nFt),xt.RLt(rj,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+i+"), resetting playlist and restarting at "+o+"s"),r=this.Lbt.length,this.OFt()}else{0;const t=Lr(this.Lbt,(t=>t.OBt===s));0,o=this.Lbt[t].DOt,t>0&&(r=t)}}return{VFt:r,WFt:o}}PFt(t){let e=t.iOt.map(uK);if(t.CBt&&t.uOt.RD===qK.HOt&&(e=this.wFt.concat(e)),this.wFt=$K(e),t.BBt)for(const e of t.BBt){const t=Lr(this.wFt,(t=>t.o===e));t>=0&&Ko(this.wFt,t)}}UFt(t,e){if(this.POt!==t){this.POt=t;for(const t of this.Lbt)t.SOt=this.POt;this.DFt()}this.SFt=e}OFt(){this.POt=void 0,this.SFt=void 0}constructor(t,e,i){this.mFt=void 0,this.pFt=void 0,this.RFt=void 0,this.IFt=void 0,this.nFt=void 0,this.rFt=void 0,this.oFt=void 0,this.hFt=void 0,this.Lbt=[],this.wFt=[],this.aFt=!1,this.uFt=void 0,this.cFt=!1,this.lFt=oK.Qk,this.n4=ee.fB(),this.sFt=ee.fB(),this.IA=void 0,this.bFt=-1/0,this.SFt=void 0,this.Ryt=t,this.XV=e,this.BFt=i}},hj=class t{static get Lg(){return null!=this.Wrt||(this.Wrt=new t),this.Wrt}Pbt(t){return t.LO}Dbt(t){return t.BO}Nbt(t,e){return su(t,e)}Mbt(t,e,i){return(t-e)/(i-e)}};function aj(t){return void 0!==t.$Bt}function zu(t){return void 0!==t.jBt}function uj(t){return zu(t)?t.TOt:0===t.COt&&t.ROt.TOt}function cj(t,e){return zu(t)?zu(e)?t.OBt+1===e.OBt:0===e.COt&&cj(t,e.ROt):t.COt===t.ROt.jBt.length-1?cj(t.ROt,e):!zu(e)&&t.ROt===e.ROt&&t.COt+1===e.COt}r(),r(),r();var lj=class extends pt{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var dj=class{GFt(t){const e=this.HFt.get(t);return void 0!==e&&fj(e)}ZFt(t){if(this.XFt()>t)return Promise.reject(new lj);const e=[];for(const s of this.zFt){var i;if(s<t)null==(i=this.HFt.get(s))||i.qFt.Lb(new lj),this.HFt.delete(s);else e.push(s)}return this.zFt=e,-1===this.zFt.indexOf(t)&&this.zFt.push(t),this.YFt(t).qFt.Bb}KFt(t){const e=this.HFt.get(t);if(!e||!fj(e))throw new g("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return e}jFt(t){return this.KFt(t).PV}QFt(t,e){const i=zu(e)?e:e.ROt,s=this.KFt(i.eOt);let n=t.yO(s.PV);if(s.JFt){const t=Uh.cV(e.LO).yF(n);if(t.gF().cF(sE())){const e=_.round(t.uF()/iE().uF());n=n.yO(iE().YF(e))}}return n}$Ft(t,e){return this.QFt(t,e).yF(t)}tVt(t,e,i,s,n,r){this.eVt<t&&(this.eVt=t);const o=this.YFt(t);void 0===o.PV&&(o.iVt.some((t=>t.pat===e))||(o.iVt.push({pat:e,sVt:i,nVt:s.oV(i.lN),rVt:n,JFt:r}),this.oVt(o,t)))}oVt(t,e){if(t.PV||!this.hVt(t))return;const i=function(t){return Km(t,_j)}(t.iVt);t.PV=i.nVt.yF(i.sVt),t.JFt=t.iVt.some((t=>t.JFt)),t.qFt.Mb(),Pn(t.iVt),we(this.zFt,e)}hVt(t){return this.aVt.length>0&&this.aVt.every((e=>t.iVt.some((t=>t.pat===e))))}YFt(t){if(this.HFt.has(t))return this.HFt.get(t);{const e={PV:void 0,JFt:!1,qFt:new as,iVt:[]};return this.HFt.set(t,e),e}}uVt(t){this.aVt=t,this.HFt.forEach(((t,e)=>this.oVt(t,e)))}cVt(){this.eVt=-1}XFt(){return this.eVt}Ww(){this.HFt.forEach((t=>t.qFt.Xw())),this.HFt.clear()}constructor(){this.aVt=[],this.HFt=$h(),this.zFt=[],this.eVt=-1}};function fj(t){return void 0!==t.PV}function _j(t,e){return-function(t,e){if(t.JFt||e.JFt)return function(t,e){let i=t.yF(e);return t.AF()||e.AF()||(i.dF(sE())?i=i.yF(iE()):i.mF(sE().wF())&&(i=i.yO(iE()))),i}(t.sVt,e.sVt).lF(Uh.xF);return t.sVt.lF(e.sVt)}(t,e)||function(t,e){return t.rVt===e.rVt?Qc.Zr:t.rVt?Qc.Pw:Qc.Dw}(t,e)||function(t,e){return t.nVt.lF(e.nVt)}(t,e)}var vj=class{get lVt(){return this.dVt}get PLt(){return this.fVt}get CL(){return this._Vt}IOt(t,e){if(vt(t))if(0===this.fVt.length)this.vVt(t);else{if(!e)return void xt.ILt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");e.jMt.IOt(t)}else{if(0!==this.fVt.length)return void xt.ILt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.mVt(t)}}vVt(t){const e=this.gVt(t.Ryt);e.IOt(t);const i=this.pVt(el.cE,e),s=this.pVt(el.lE,e),n=new GK({Ryt:e.Ryt,mG:0,Tyt:0,kyt:NaN,Urt:void 0,HCt:void 0,Kdt:0,gBt:[],yBt:void 0,SBt:void 0,pBt:void 0,ABt:void 0,bBt:void 0,wBt:void 0},e,[i,s]);this.fVt.push(n)}mVt(t){this.dVt.push(...t.qBt);const e=this.wVt(t);for(const i of t.YBt){const s=e.filter((t=>gj(t,i)));this.yVt(i,s);const n=new GK(i,this.gVt(i.Ryt,t.Cn),s);this.fVt.push(n)}}gVt(t,e){let i=this.bVt.get(t);return void 0===i&&(i=new oj(t,e,this.BFt),this.bVt.set(t,i)),i}wVt(t){const e=[];for(const i of t.gN)if(void 0===i.Ryt){for(const s of t.YBt)if(mj(i.pw,i.tLt,s)){const t=new PY(i,this.gVt(s.Ryt));e.push(t)}}else{const t=new PY(i,this.gVt(i.Ryt));e.push(t)}return e}pVt(t,e){return new PY({pw:t,Ryt:void 0,tLt:"",gs:void 0,mBt:void 0,l:"",QMt:!0,JMt:!1,$Mt:!1,sLt:void 0,eLt:void 0,WCt:void 0},e)}yVt(t,e){const i=e.filter((t=>t.pw===el.cE)),s=e.filter((t=>t.pw===el.lE)),n=t.Urt&&(t.Urt.ePt||t.Urt.$Ct);if((!n||t.Urt.ePt)&&0===s.length){const i=this.pVt(el.lE,this.gVt(t.Ryt));e.push(i)}if((!n||t.Urt.$Ct)&&0===i.length){const i=this.pVt(el.cE,this.gVt(t.Ryt));e.push(i)}t.Urt&&t.Urt._Bt}AVt(t){for(const e of this.fVt)for(const i of e.FLt)if(i===t)return i}SVt(t){for(const e of this.fVt)if(e===t)return e}TVt(t){for(const e of this.fVt)if(qt(e.FLt,t))return e}Ww(){Pn(this.fVt),Pn(this.dVt),this.bVt.clear(),this._Vt.Ww()}constructor(t,e){this.fVt=[],this.dVt=[],this.bVt=_u(),this._Vt=new dj,this.kVt=t,this.BFt=e}};function mj(t,e,i){switch(t){case el.cE:return i.pBt===e;case el.lE:return i.ABt===e;case el.qV:return i.bBt===e;case el.QLt:return i.wBt===e}return!1}function gj(t,e){return mj(t.pw,t.tLt,e)&&(!t.iLt||t.jMt.Ryt===e.Ryt)}r();var pj=class extends pe{constructor(t){super(yj.EVt),this.oLt=t}};r();var wj=class extends pe{constructor(t){super(yj.xVt),this.oLt=t}},it="HlsModelUpdater",yj=function(t){return t.EVt="RVt",t.xVt="IVt",t}({}),bj=class extends Bo{get CVt(){return this.PVt}get DVt(){return this.NVt}get Tr(){return this.Nyt}get MVt(){return this.LVt}async BVt(t){const e=this.Nyt.kVt;if(!e)throw new g("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.yo(new $i);const i=await this.OVt(e,{},2,!0,t),s=i.jMt;if(!nK(s)&&!vt(s))throw new g("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");nK(s)||xt.RN(it,"Detected media playlist only HLS stream."),this.FVt(s),i.VVt&&(this.NVt=!0,await this.WVt(t)),this.PVt=!0}async UVt(t,e,i,s){const n=this.Nyt.AVt(t);if(!n)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={OBt:e,TFt:i,RD:kj(n)},o=Na(_.max(1,3*t.jMt.vFt));try{await this.GVt(n,r,s,o)}catch(t){throw Zr(t),this.HVt(n),t}}ZVt(t,e){const i=this.Nyt.AVt(t);if(!i)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={OBt:void 0,TFt:void 0,RD:kj(i)},n=Na(_.max(1,3*t.jMt.vFt));return this.GVt(i,s,e,n)}XVt(t,e){return this.zVt.has(t.TC)||this.zVt.set(t.TC,new as),hu(this.zVt.get(t.TC).Bb,e)}HVt(t){this.yo(new wj(t))}async GVt(t,e,i,s){const n=t.jMt.kLt(e);let r;try{r=(await this.OVt(n,e,0,this.NVt,i,s)).jMt}catch(e){throw Zr(e),t.jMt.yFt=As.Bg(),e}if(!vt(r))throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.qVt&&t!==this.qVt&&!this.qVt.jMt.fFt)try{await this.ZVt(this.qVt,i)}catch(e){Zr(e),this.qVt=t,this.YVt()}try{this.FVt(r,t)}catch(n){if(n instanceof YK&&void 0!==e.RD){const n=la({},e,{RD:void 0});return this.GVt(t,n,i,s)}throw n}this.KVt(t),this.qVt=t}async OVt(t,e,i,s,n,r){if(xt.RN(it,"Loading HLS playlist at "+t+"."),s){const e=await this.jVt(t,n);if(void 0!==e)return{jMt:e,VVt:!0}}return{jMt:await this.QVt(t,e,i,n,r),VVt:!1}}async jVt(t,e){try{const i=await this.Lut.trt([t]);if(ot(e),void 0!==i)return UK(i.responseURL,{},i.data)}catch(t){Zr(t)}}async QVt(t,e,i,s,n){const r={qu:t,Xk:$r.wk,AE:this.oTt,gE:So.GET,pw:Wr.Jk,Bw:s,pE:n},o=await Si((()=>this.JVt(r)),s,i);return UK(o.jk,e,o.Zk)}async JVt(t){const e=await this.aW.zk(t);return{Zk:await e.Tk(),jk:e.jk}}async WVt(t){ot(t);const e=[];for(const i of this.Nyt.PLt)for(const s of i.FLt)e.push(this.$Vt(s,t));await Promise.all(e)}async $Vt(t,e){try{const i=await this.Lut.trt([t.jMt.Ryt]);ot(e),void 0===i||t.jMt.fFt||await this.ZVt(t,e)}catch(t){Zr(t)}}YVt(){for(const t of this.Nyt.PLt)for(const e of t.FLt)e!==this.qVt&&void 0!==e.jMt.SOt&&(e.jMt.fFt?this.KVt(e):e.jMt.OFt())}KVt(t){if(0!==t.jMt.Srt.length){if(!this.qVt)return this.qVt=t,void this.qVt.jMt.UFt(0,void 0);if(this.tWt(this.qVt),!this.tWt(t)&&void 0===t.jMt.SOt){const e=this.eWt(t,this.qVt);xt.RLt(it,"Assuming global timeline offset of "+e+"s for rendition "+t.jMt.Ryt+"."),t.jMt.UFt(e,void 0)}}}eWt(t,e){if(Aj(t)){const i=t.jMt.Srt[0],s=e.jMt.Srt[0];return xt.RLt(it,"Synchronizing by start of VOD: "+s.LO+" vs "+i.LO),s.LO-i.DOt}const i=function(t,e){let i=t.length-1,s=e.length-1;for(;i>=0&&s>=0;){const n=t[i],r=e[s];if(n.eOt>r.eOt)i--;else if(n.eOt<r.eOt)s--;else if(n.QBt){if(r.QBt)return{segment:n,referenceSegment:r};s--}else i--}return}(t.jMt.Srt,e.jMt.Srt);if(void 0!==i){const{segment:t,referenceSegment:e}=i;return xt.RLt(it,"Synchronizing by start of discontinuity #"+e.eOt+": "+e.LO+" vs "+t.LO),e.LO-t.DOt}const s=Tj(t.jMt.Srt);if(void 0!==s){const t=Tj(e.jMt.Srt);if(void 0!==t){xt.RLt(it,"Synchronizing by PDT:",t.$Bt.toISOString()+" vs "+s.$Bt.getTime());return t.LO-s.DOt-(t.$Bt.getTime()-s.$Bt.getTime())/1e3}}const n=Sj(e),r=Sj(t);var o;const h=null!=(o=t.jMt.SOt)?o:0;return xt.RLt(it,"Synchronizing by last segment:",n+" vs "+r),n-r+h}tWt(t){const e=this.Nyt.AVt(t);if(!e)return!1;if(Aj(e))return!1;const i=function(t,e){return Gm(t,(t=>void 0!==t.hit&&e.GFt(t.eOt)))}(e.jMt.Srt,this.Nyt.CL);if(void 0===i)return!1;if(e.jMt.AFt===i.eOt)return!0;const s=this.Nyt.CL.QFt(i.hit,i).uF()-i.DOt;return xt.RLt(it,"Synchronize by media timestamp: "+s+"s for rendition "+t.jMt.Ryt+"."),e.jMt.UFt(s,i.eOt),(void 0===this.qVt||void 0===this.qVt.jMt.AFt||this.qVt.jMt.AFt<i.eOt)&&(this.qVt=e),!0}FVt(t,e){var i;(this.Nyt.IOt(t,e),vt(t)&&e)&&(this.LVt=e,this.yo(new pj(e)),null==(i=this.zVt.get(e.TC))||i.Mb(),this.zVt.delete(e.TC));this.yo(new Ml)}iWt(t,e){for(const i of this.Nyt.PLt){const s=Ti(i.NLt,(t=>t.jMt===e));void 0!==s&&void 0!==t.ePt&&(s.Urt=cK(s.Urt,t));const n=Ti(i.DLt,(t=>t.jMt===e));void 0!==n&&void 0!==t.$Ct&&(n.Urt=cK(n.Urt,t)),i.dOt||void 0===s&&void 0===n||(i.Urt=cK(i.Urt,t))}}sWt(t,e){for(const i of this.Nyt.PLt){const s=Ti(i.NLt,(t=>t.jMt===e));void 0!==s&&void 0===t.ePt&&i.pOt(s);const n=Ti(i.DLt,(t=>t.jMt===e));void 0!==n&&void 0===t.$Ct&&i.pOt(n)}}Ww(){this.Bo(),this.Nyt.Ww(),this.zVt.forEach((t=>t.Xw())),this.zVt.clear()}constructor(t,e,i,s,n){super(),this.aW=t,this.Lut=e,this.oTt=i,this.PVt=!1,this.NVt=!1,this.qVt=void 0,this.LVt=void 0,this.zVt=$h(),this.Nyt=new vj(s,n)}};function Aj(t){return t.jMt.sOt||t.jMt.rOt===oK.sBt}function Sj(t){const e=t.jMt.Srt;return e[e.length-1].BO}function Tj(t){return Gm(t,(t=>void 0!==t.$Bt))}function kj(t){if(void 0!==t.jMt.IBt&&!t.jMt.sOt&&!(void 0===t.jMt._Ft||As.Bg()/1e3-t.jMt._Ft>=t.jMt.IBt/2))return t.jMt.CBt?qK.HOt:qK.GOt}var Ej=class{get nt(){return this.Bgt}PFt(t){if(0===t.jMt.iOt.length)return;this.nWt||(this.nWt=this.LB.DI(Hi.jV,void 0,void 0,void 0,void 0,Vr.DATE_RANGE),this.Bgt.tt(this.nWt));JK(this.nWt,t.jMt.iOt,(e=>{var i;return null!=(i=t.jMt.gOt(e))?i:NaN}))}constructor(t,e){this.rWt=t=>{this.PFt(t.oLt)},this.rEt=t,this.LB=e,this.Bgt=new ha,this.rEt.yn(yj.EVt,this.rWt)}};r();var xj=class extends pe{constructor(){super(zt.HMt)}};r(),r(),r();var Rj=class{get oWt(){return this.S2}get _R(){return PV(this.wot._R,this.wot.o3)}get Srt(){return this.Lbt}get Hgt(){return this.Vgt}hWt(t){var e;return null==(e=this.aWt(t))?void 0:e.oLt}uWt(t){this.S2=t,this.cWt()}ddt(t,e,i,s,n,r){this.Lbt.push({oLt:t,Nut:e,lWt:ee.dB(n,r),dWt:ee.dB(i,s)}),this.cWt()}aWt(t){return Ti(this.Lbt,(e=>e.dWt.gr(t)))}Qat(t){return Ti(this.Lbt,(e=>e.Nut===t))}rlt(t,e){return Ti(this.Lbt,(i=>i.oLt===t&&cj(i.Nut,e)))}i3(){const t=this._R;t.V>0&&(this.Vgt=t.jn(t.V-1))}cWt(){const t=this.wot._R;this.Lbt=this.Lbt.filter((e=>0!==t.Sn(e.dWt).V))}constructor(t){this.wot=t,this.Lbt=[],this.S2=void 0,this.Vgt=void 0}},Ij=class{get pw(){return this.pp}get fWt(){return vT(this.pp)}get _Wt(){return this._at}get vWt(){return this.mWt}get LIt(){return void 0!==this.gWt}pWt(){if(this.LIt)throw new g("Cannot perform new operation while BufferAppender is still busy")}dot(t){this.wot!==t&&(this.pWt(),this.wot=t,this._at=new Rj(t))}wWt(){return this.gWt?this.gWt.Bb:Promise.resolve()}yWt(t){const e=this._at.Hgt;return void 0!==e&&this.bWt(t,e)}bWt(t,e){var i;const s=_.min(t,e);var n;return null!=(n=null==(i=this._at._R.HL().QL(this.vWt).uB(s))?void 0:i.gr(e))&&n}AWt(t){return this._at.hWt(t)}Xw(){this.OT.Xw(),this.OT=new $t}_2(t){this.pWt(),this.gWt=new as;const e=e=>{this.TWt.SWt(t),this.kWt(e)};this.m2(t,this.OT.Bw).then(e,e)}async m2(t,e){xt.RLt($u,"Appending initializer",Qe(t.EWt.Ryt)),await this.wot._2(t,e),xt.RLt($u,"Appended initializer",Qe(t.EWt.Ryt)),this._at.uWt(t)}Vlt(t){this.pWt(),this.gWt=new as;const e=e=>{this.TWt.SWt(t),this.kWt(e)};this.xWt(t,this.OT.Bw).then(e,e)}async xWt(t,e){const i=t.oLt;if(void 0===i.jMt.HLt)throw new g("MediaBufferWrapper - Cannot append HLSAsset to "+this.pp+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this._at._R.OL,n=this.wot._R;xt.RLt($u,"Appending",Qe(t.EWt.Ryt)),await this.wot.l2(t,e),xt.RLt($u,"Appended",Qe(t.EWt.Ryt),s,this._at._R.OL);const r=t.LO,o=r+t.ct,h=t.EWt,a=h.LO;var u;const c=h.LO+(null!=(u=h.ct)?u:0);this._at.ddt(i,h,r,o,a,c);const l=this.wot._R.QL(n),d=this._at.rlt(i,h);if(this.pw===Io.lE)if(d)if(this.RWt(d))if(0===l.V){if(void 0===this._at.Qat(h)){const t=this.wot.o3.Sn(new ee([r,o]));this.mWt=this.mWt.KL(t)}}else{const t=l.Cn(0),e=new ee([t,o]);if(this.mWt=this.mWt.QL(e),t>r){const e=this.wot.o3.Sn(new ee([r,t]));this.mWt=this.mWt.KL(e)}}else{const t=l.V>0&&l.Cn(0)<r?l.Cn(0):r;this.mWt=this.mWt.QL(new ee([t,o]))}else if(0===l.V){const t=this.wot.o3.Sn(new ee([r,o]));this.mWt=this.mWt.KL(t)}else{var f;if(t.EWt.TOt)return;const e=l.Cn(0),i=null==(f=n.uB(r))?void 0:f.jn(0),s=i&&i>r?i:r;if(e>s){const t=this.wot.o3.Sn(new ee([s,l.Cn(0)]));this.mWt=this.mWt.KL(t)}}t.EWt.EOt&&this._at.i3()}RWt(t){const e=t.dWt,i=e.Cn(0),s=e.jn(e.V-1),n=e.VL(0),r=e.UL(e.V-1);return this.mWt.$L(i,s,n,r)}constructor(t,e,i,s,n){this.gWt=void 0,this.OT=new $t,this.mWt=ee.fB(),this.kWt=t=>{this.gWt&&(t?uD(t)&&this.fWt?this.IWt.Dj(this.wot._R.cB)?this.gWt.Mb():this.gWt.Lb(t):Se(t)?this.gWt.Mb():this.gWt.Lb(t):this.gWt.Mb(),this.gWt=void 0)},this.pp=t,this.TWt=i,this.wot=e,this._at=s,this.IWt=n}};r(),r();var Cj=class{async CWt(t,e,i,s){const n=await this.PWt(e,s);return await this.DWt.CWt(t,n,i)}async PWt(t,e){var i;if((null==(i=this.NWt)?void 0:i.qu)!==t){xt.RLt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const i=await this.aW.zk({qu:t,Xk:$r.vk,gE:So.GET,Bw:e,pw:Wr.eE,yE:De.uE,AE:this.oTt}),s=await i.xk(),n=new j(s);this.NWt={qu:t,Zk:n}}return this.NWt.Zk}constructor(t,e,i){this.DWt=t,this.aW=e,this.oTt=i,this.NWt=void 0}};r();var Pj=class{async zk(t,e,i,s,n){const r=await this.MWt(t,e,i,$r.vk,s,n),o=await r.xk(n);return{httpStatusCode:r.Hk,response:new j(o)}}async LWt(t,e,i,s,n){return(await this.MWt(t,e,i,$r.pk,s,n)).Rk(n)}async MWt(t,e,i,s,n,r){let o;t.nAt&&(o=sK(t.nAt.Cn,t.nAt.V),0===o[0]&&o[1]===Lu&&(o=void 0));const h=o?{Range:"bytes="+o[0]+"-"+o[1]}:void 0,a=new Fe({qu:t.Ix,Xk:s,qk:h,AE:this.oTt,gE:So.GET,pw:e,yE:i,bE:this.sut,kE:s===$r.pk,SE:n,Bw:r});try{const e=await this.Lut.ort(t.Ix,o);if(ot(r),void 0!==e)return null==n||n(e.buffer.byteLength,e.buffer.byteLength),new Hb({zk:a,Xk:a.Xk,Zk:e.buffer})}catch(t){Zr(t)}return await Si((()=>hu(this.aW.zk(a),a.Bw)),r,this.Cnt)}constructor(t,e,i,s,n=2){this.aW=t,this.Lut=e,this.sut=i,this.oTt=s,this.Cnt=n}};r();var Dj=class{BWt(){return this.OWt.jMt.RBt}async FWt(t,e,i){if(!this.BWt())throw new g("Could not perform blocking playlist update.");const s=this.VWt,n={OBt:t,TFt:e};return void 0!==s&&function(t,e,i){if(t.OBt===e.OBt){if(t.TFt===e.TFt)return!0;if(0===t.TFt&&void 0===e.TFt)return!0}if(t.OBt===e.OBt+1&&0===t.TFt&&void 0!==e.TFt){const t=i.Qat(e.OBt);if(t&&t.Ryt&&e.TFt>=t.jBt.length)return!0}return!1}(s,n,this.OWt.jMt)||(await this.WWt(),this.UWt(n)),this.rEt.XVt(this.OWt,i)}GWt(t){return this.UWt(),this.rEt.XVt(this.OWt,t)}UWt(t){if(!this.HWt&&!this.ZWt){const e=()=>{this.HWt=void 0};this.HWt=this.XWt(t,this.zWt.Bw).then(e,e)}}async WWt(){this.HWt&&(this.zWt.Xw(),this.zWt=new $t,await this.HWt.catch(Bt),this.HWt=void 0)}async XWt(t,e){let i=t;for(;;){if(ot(e),this.OWt.jMt.sOt&&this.OWt.jMt.fFt)return;null!=i||(i=this.qWt()),this.VWt=i;try{if(i)await this.rEt.UVt(this.OWt,i.OBt,i.TFt,e);else{const t=As.Bg()-this.An,i=1e3*this.OWt.jMt.vFt;t<i&&await on(i-t,e),await this.rEt.ZVt(this.OWt,e)}}catch(t){throw this.VWt=void 0,Zr(t),this.rEt.HVt(this.OWt),t}i=void 0,this.An=As.Bg()}}qWt(){const t=this.OWt.jMt;if(!t.RBt||t.sOt||0===t.Srt.length)return;const e=t.Srt[t.Srt.length-1];return e.Ryt?{OBt:e.OBt+1,TFt:t.dFt?0:void 0}:{OBt:e.OBt,TFt:e.jBt.length}}Ww(){this.ZWt=!0,oh(this.WWt())}constructor(t,e){this.HWt=void 0,this.zWt=new $t,this.An=-1/0,this.VWt=void 0,this.ZWt=!1,this.rEt=t,this.OWt=e,this.UWt()}};r();var Nj=function(t){return t[t.JLt=0]="JLt",t[t.$Lt=1]="$Lt",t[t.$k=2]="$k",t[t.tE=3]="tE",t}({});r(),r();var at="AssetExtractor",Mj=class{YWt(t,e,i){let s=e;for(const e of this.KWt){if(s>=t)return!0;if(s<e.Cn)return!1;if(s<e.jn){if(i<=e.jn)return!0;s=e.jn}}return s>=t}jWt(t,e){const i=[];for(let s=0;s<this.KWt.length;s+=1){const n=this.KWt[s],r=t-n.Cn,o=n.Zk.length,h=_.min(o,_.max(r,0)),a=_.max(0,e+r),u=Rc(n.Zk,h,a);u.length&&(s=this.QWt(s,n,t,h,a),i.push(u))}return i}JWt(t,e){this.KWt.push({Cn:t,jn:t+e.length,Zk:e})}QWt(t,e,i,s,n){let r=t;this.KWt.splice(r,1),r-=1,e.Cn<i&&(r+=1,this.KWt.splice(r,0,{Cn:e.Cn,jn:i,Zk:Rc(e.Zk,0,s)}));const o=i+n-s;return o<e.jn&&(r+=1,this.KWt.splice(r,0,{Cn:o,jn:e.jn,Zk:Rc(e.Zk,n)})),r}constructor(){this.KWt=[]}},Lj=class{get $Wt(){return this.tUt}async eUt(){const t=await this.Md.read();if(t.done)throw this.tUt=1/0,new g("No more data can be read from the given stream.");return this.tUt+=t.value.length,t.value}async iUt(t){await this.Md.cancel(t)}constructor(t,e){this.tUt=e,this.Md=t.getReader()}},Bj=class{sUt(){this.nUt.Mb(),this.nUt=new as}rUt(t){const{rAt:e,oAt:i}=Fj(this.NOt.nAt),s=this.oUt.jWt(e,i-e);xt.RLt(at,"Collected "+s.length+" chunks.");for(const e of s)t.enqueue(e)}async readAndSliceOutAssetBytes(t){await this.hUt.Bb;const{rAt:e,oAt:i}=Fj(this.NOt.nAt);try{for(;;){const s=this.Md.$Wt,n=await this.Md.eUt(),r=n.length;xt.RLt(at,"Read "+r+" at "+s+" for extraction of "+Qe(this.NOt));const o=_.min(s+r,e)-s;if(!(o>0)){if(s+r<=i)return xt.RLt(at,"Extracting the read data range for extraction of "+Qe(this.NOt)),t.enqueue(n),this.sUt(),oh(this.readAndSliceOutAssetBytes(t));{const e=i-s,o=Rc(n,0,e),h=Rc(n,e);return o.length>0&&(xt.RLt(at,"Extracting "+o.length+" bytes for extraction of "+Qe(this.NOt)),t.enqueue(o)),xt.RLt(at,"Of the read "+r+" bytes, the last "+h.length+" will be stored locally for extraction of "+Qe(this.NOt)),this.oUt.JWt(s+e,h),xt.RLt(at,"Extraction of "+Qe(this.NOt)+" completed as the entire request has been fulfilled."),this.aUt(t),void(this.uUt&&(xt.RLt(at,"Aborting stream upstream as no more bytes are needed from "+Qe(this.NOt)+"."),await this.Md.iUt("AssetExtraction - AbortOnEnd")))}}{const e=Rc(n,0,o),i=Rc(n,o);if(xt.RLt(at,"Of the read "+r+" bytes, the first "+o+" will be stored locally for extraction of "+Qe(this.NOt)),this.oUt.JWt(s,e),i.length>0)return xt.RLt(at,"Extracting "+i.length+" bytes for extraction of "+Qe(this.NOt)),t.enqueue(i),this.sUt(),oh(this.readAndSliceOutAssetBytes(t))}}}catch(e){xt.RLt(at,"Extraction of "+Qe(this.NOt)+" completed as the entire source stream has been read."),this.aUt(t)}}aUt(t){t.close(),this.sUt(),this.cUt.Mb()}start(t){xt.RLt(at,"Preparing to push all collected data to controller for extraction of "+Qe(this.NOt)),this.rUt(t),xt.RLt(at,"Collected data pushed to controller for extraction of "+Qe(this.NOt));const{oAt:e}=Fj(this.NOt.nAt);this.Md.$Wt>=e?(xt.RLt(at,"Extraction of "+Qe(this.NOt)+" completed as the entire request has been fulfilled."),this.aUt(t)):(xt.RLt(at,"Continuing read from original stream for extraction of "+Qe(this.NOt)),oh(this.readAndSliceOutAssetBytes(t)))}get lUt(){return this.cUt.Bb}pull(){return this.hUt.Mb(),this.hUt=new as,this.nUt.Bb}constructor(t,e,i,s){this.cUt=new as,this.NOt=t,this.Md=e,this.oUt=i,this.uUt=s,this.hUt=new as,this.nUt=new as}},Oj=class{bO(t){if(!hK(this.NOt,t))return!1;const{rAt:e,oAt:i}=Fj(t.nAt);return this.oUt.YWt(this.dUt.$Wt,e,i)}async tgt(t,e){void 0===e&&(e=!1);const i=this.dUt,s=this.oUt;if(xt.RN(at,"Extracting data from "+Qe(t)+" out of "+Qe(this.NOt)),this.fUt&&(xt.RLt(at,"Awaiting previous extraction before extracting "+Qe(t)+" out of "+Qe(this.NOt)),await this.fUt),!this.bO(t))throw new g("The extractor does not contain the data requested");const n=new Bj(t,i,s,e);return this.fUt=n.lUt,new ph(n)}constructor(t,e){this.NOt=e;const{rAt:i}=Fj(this.NOt.nAt);this.dUt=new Lj(t,i),this.oUt=new Mj}};function Fj(t){if(t){const e=t.Cn;return{rAt:e,oAt:void 0!==t.V?e+t.V:Lu}}return{rAt:0,oAt:Lu}}var Vj=class{async $n(){const t=await this._Ut.LWt(this.NOt,Wr.tE,De.Qk,void 0,this.OT.Bw);return new Oj(t,this.NOt)}bO(t){return hK(this.NOt,t)}async tgt(t,e){void 0===e&&(e=!1);const i=await this.opt;return await hu(i.tgt(t,e),this.OT.Bw)}Xw(){this.opt.catch(Bt),this.OT.Xw()}constructor(t,e){this.NOt=t,this._Ut=e,this.OT=new $t,this.opt=this.$n()}};r();var Wj=class extends pe{constructor(t){super(yt.vUt),this.bE=t}};r();var Uj=class extends pe{constructor(t,e,i,s,n,r,o){super(yt.mUt),this.uri=t,this.gUt=e,this.bE=i,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.pUt=r,this.httpStatusCode=o}};function Gj(t,e,i){const s=zu(i)?i:i.ROt;if(e.GFt(s.eOt)){if(void 0!==i.hit)return e.QFt(i.hit,i).uF();if(i!==s&&void 0!==s.hit){const t=e.QFt(s.hit,s).uF();return i.LO+(t-s.LO)}}const n=t.jMt.Qat(s.OBt-1);if(void 0!==n&&e.GFt(n.eOt)){if(n.jBt.length>0){const t=n.BOt(n.jBt.length-1);if(void 0!==t.hit){const s=e.QFt(t.hit,t).uF();return i.LO+(s-t.LO)}}if(void 0!==n.hit){const t=e.QFt(n.hit,n).uF();return i.LO+(t-n.LO)}}const r=t.jMt.Qat(s.OBt+1);if(void 0!==r&&e.GFt(r.eOt)){if(r.jBt.length>0){const t=r.BOt(0);if(void 0!==t.hit){const s=e.QFt(t.hit,t).uF();return i.LO+(s-t.LO)}}if(void 0!==r.hit){const t=e.QFt(r.hit,r).uF();return i.LO+(t-r.LO)}}return i.LO}function Hj(t){return void 0!==t.hit}function Zj(t,e,i,s){for(let n=e;n<t.length;n++){const e=t[n];if(e.eOt!==i)break;if(Hj(e)){if(s(e,n))break}}}function Xj(t,e,i,s){for(let n=e;n>=0;n--){const e=t[n];if(e.eOt!==i)break;if(Hj(e)){if(s(e,n))break}}}r();var zj="HlsPlaylistDownloader",yt=function(t){return t.vUt="segmentdownloadprogress",t.mUt="segmentdownloaded",t}({}),qj=class extends Bo{wUt(t){this.yUt.Ww(),this.yUt=new Dj(this.rEt,t),this.LIt?this.bUt=t:(this.OWt=t,this.AUt=0,this.SUt=void 0,this.TUt=void 0)}get LIt(){return void 0!==this.kUt}wWt(){return this.kUt?this.kUt.Bb:Promise.resolve()}EUt(){return this.TWt.EUt()}xUt(t){this.TWt.xUt(t)}Xw(){var t,e,i;this.RUt.Xw(),this.RUt=new $t,null==(t=this.IUt)||t.Xw(),this.IUt=void 0,null==(e=this.CUt)||e.Xw(),null==(i=this.PUt)||i.Xw(),this.CUt=void 0,this.PUt=void 0,this.AUt=0,this.SUt=void 0,this.TUt=void 0}Ww(){this.yUt.Ww()}get oLt(){var t;return null!=(t=this.bUt)?t:this.OWt}get oCt(){if(!this.OWt.jMt.sOt||void 0===this.SUt)return!1;const t=this.OWt.jMt.Qat(this.SUt);if(!t.EOt)return!1;if(void 0!==this.TUt){if(!t.BOt(this.TUt).EOt)return!1}return!0}DUt(t){const e=this.OWt.jMt.kFt(t);if(!e)return!1;if(void 0!==this.SUt){const i=e.OBt===this.SUt;return void 0!==this.TUt?e.OOt(t)===e.BOt(this.TUt)&&i:i}return!1}NUt(t){let e;if(void 0===this.SUt||t<this.AUt-1e-6)e=this.MUt(t);else if(e=this.LUt(this.SUt,this.TUt),void 0!==e){const[i,s]=e,n=Gj(this.OWt,this.rEt.Tr.CL,null!=s?s:i),r=3*this.OWt.jMt.HLt;_.abs(n-t)>=r&&(e=this.MUt(t))}else if(this.OWt.jMt.sOt){if(this.OWt.jMt.Qat(this.SUt).EOt&&(e=this.MUt(t),void 0!==e&&e[0].OBt===this.SUt))return}if(e){this.AUt=t;const[i,s]=e;return 0===(null==s?void 0:s.COt)&&void 0!==i.ct?[i,void 0]:[i,s]}}MUt(t){let e,i;const s=this.OWt.jMt.Srt;if(0===s.length)return;const n=this.rEt.Tr.CL,r=Uh.cV(t),o=function(t,e,i){const s=t.jMt.Srt;if(0===s.length)return;const n=t.jMt.EFt(i.uF());if(!e.GFt(n.eOt))return;const r=n.OBt-s[0].OBt,o=n.eOt;let h,a,u,c=0;if(Xj(s,r,o,((t,e)=>(h=t,c=e,!0))),void 0===h&&(Zj(s,r+1,o,((t,e)=>(h=t,c=e,!0))),void 0===h))return;return e.QFt(h.hit,h)._F(i)?(a=h,Zj(s,c+1,o,(t=>e.QFt(t.hit,t).cF(i)?(u=t,!0):(a=t,!1)))):(u=h,Xj(s,c-1,o,(t=>e.QFt(t.hit,t)._F(i)?(a=t,!0):(u=t,!1)))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.OWt,n,r);let h;if(void 0!==o){const[t,e]=o,i=n.QFt(t.hit,t),s=n.QFt(e.hit,e),a=r.yF(i).uF()/s.yF(i).uF()*(e.LO-t.LO);h=t.LO+a}else h=t;const a=s[s.length-1];return a.BO<=h?(e=a,i=a.VOt(h)):s[0].LO>h?(e=s[0],i=e.BOt(0)):(e=this.OWt.jMt.kFt(h),i=null==e?void 0:e.VOt(h)),e?[e,i]:void 0}LUt(t,e){let i,s;if(i=this.OWt.jMt.Qat(t),i&&void 0!==e){if(0===i.jBt.length)return[i,void 0];s=i.BOt(e+1)}return void 0!==i&&void 0!==s||(i=this.OWt.jMt.Qat(t+1),s=null==i?void 0:i.BOt(0)),i?[i,s]:void 0}pWt(){if(this.LIt)throw new g("Cannot perform new operation while PlaylistDownloader is still busy")}BUt(t){this.pWt(),this.kUt=new as,this.OUt(t,this.RUt.Bw).then(this.FUt,this.FUt)}VUt(){this.yUt.UWt()}async OUt(t,e){if(this.OWt.jMt.sOt)return;let i=this.NUt(t);for(!i&&this.yUt.BWt()&&void 0!==this.SUt&&(await this.yUt.FWt(void 0===this.TUt?this.SUt+1:this.SUt,void 0!==this.TUt?this.TUt+1:void 0,e),i=this.NUt(t)),!i&&this.yUt.BWt()&&void 0!==this.SUt&&(await this.yUt.FWt(this.SUt+1,0,e),i=this.NUt(t));!i;){xt.RN(zj,"No next segment / part available, need to update playlist before continuing."),await this.yUt.GWt(e);const s=this.oLt.jMt.Srt;s[0].LO>t&&(this.TUt=void 0,this.SUt=void 0);s[s.length-1].OBt<this.SUt&&(this.TUt=void 0,this.SUt=void 0),i=this.NUt(t)}}WUt(){return this.TWt.UUt()}GUt(){this.pWt();try{const t=this.OWt.jMt.xFt(rK.JLt);t&&this.HUt(t);const e=this.OWt.jMt.xFt(rK.$Lt);e&&this.ZUt(e)}catch(t){throw Zr(t),this.OWt.jMt.yFt=As.Bg(),this.rEt.HVt(this.OWt),t}}HUt(t){this.PUt&&!this.PUt.bO(t.Ryt)&&(this.PUt.Xw(),this.PUt=void 0),this.PUt||(this.PUt=new Vj(t.Ryt,this._Ut))}ZUt(t){this.CUt&&!this.CUt.bO(t.Ryt)&&(this.CUt.Xw(),this.CUt=void 0),this.CUt||(this.CUt=new Vj(t.Ryt,this._Ut))}jat(t,e,i){this.pWt(),xt.RN(zj,"Starting download of segment "+Qe(t.Ryt)+" and part "+(null==e?void 0:e.COt)),this.kUt=new as,this.XUt(t,e,i,this.RUt.Bw).catch((t=>{throw Zr(t),this.OWt.jMt.yFt=As.Bg(),this.rEt.HVt(this.OWt),t})).then(this.FUt,this.FUt)}async XUt(t,e,i,s){let n;if(t.JBt){var r,o;if(!i||!aK(i.EWt.Ryt,null==(r=t.JBt)?void 0:r.Ryt)||t.eOt!==i.eOt){var h;null==(h=this.IUt)||h.Xw(),this.IUt=new as;const e=this.zUt(t.JBt,t,s).then((()=>{this.IUt=void 0}));this.IUt.zw(e)}n=null==(o=this.IUt)?void 0:o.Bb}await this.qUt(t,e,n,s)}async zUt(t,e,i){const s=await this.YUt(t,e,i),n=s.JBt.Zk.Zk.byteLength;this.TWt.KUt(s),this.yo(new Uj(s.JBt.EWt.Ryt,s.pw,this.pp,e.OBt,s.oLt.TC,n,s.JBt.rct)),xt.RLt($u,"Download initializer complete",Qe(t.Ryt))}async qUt(t,e,i,s){const n=await this.jUt(t,e,s),r=n.Nut.Zk.Zk.byteLength;var o;i&&await hu(i,s),this.TWt.KUt(n),this.yo(new Uj(n.Nut.EWt.Ryt,n.pw,this.pp,t.OBt,n.oLt.TC,r,n.Nut.rct)),xt.RLt($u,"Download complete",Qe(null!=(o=null==e?void 0:e.Ryt)?o:t.Ryt))}async jUt(t,e,i){let s;if(e){if(this.CUt)if(this.CUt.bO(e.Ryt)){const t=await this.CUt.tgt(e.Ryt),n=await He(t,i),r=new j(n);s=Kj(e,await this.CWt(r,e.qBt,i),200)}else this.CUt.Xw(),this.CUt=void 0;s||(xt.RLt($u,"Start download",Qe(e.Ryt)),s=await this.QUt(e,i))}else xt.RLt($u,"Start download",Qe(t.Ryt)),s=await this.$at(t,i);return this.SUt=t.OBt,this.TUt=null==e?void 0:e.COt,{pw:"Nut",Nut:s,oLt:this.OWt,eOt:t.eOt}}async YUt(t,e,i){let s;if(this.PUt){var n;if(this.PUt.bO(t.Ryt)){const n=await hu(this.PUt.tgt(t.Ryt),i),r=await He(n,i),o=new j(r);s=Yj(t,e,await this.CWt(o,t.KBt?[t.KBt]:[],i),200)}xt.RN(zj,"MAP is required for segment, downloading MAP data."),null==(n=this.PUt)||n.Xw(),this.PUt=void 0}return s||(xt.RLt($u,"Start download",Qe(t.Ryt)),s=await this.JUt(t,e,i)),{pw:"JBt",JBt:s,oLt:this.OWt,LO:e.LO,eOt:e.eOt,qBt:e.qBt}}async JUt(t,e,i){const{response:s,httpStatusCode:n}=await this._Ut.zk(t.Ryt,Wr.$k,De.iE,void 0,i),r=t.KBt?[t.KBt]:[];return Yj(t,e,await this.CWt(s,r,i),n)}async $at(t,e){if(!t.Ryt)throw new g("Internal error: attempted to download an incomplete segment");let i,s;try{this.$Ut(t);const n=await this._Ut.zk(t.Ryt,Wr.$k,De.Qk,this.tGt,e);i=n.response,s=n.httpStatusCode}finally{this.eGt()}return function(t,e,i){return{Zk:{Zk:e,pw:Ut.QQ},pw:Nj.$k,rct:i,EWt:t,eOt:t.eOt}}(t,await this.CWt(i,t.qBt,e),s)}async QUt(t,e){let i,s;try{this.$Ut(t);const n=await this._Ut.zk(t.Ryt,Wr.$k,De.Qk,this.tGt,e);i=n.response,s=n.httpStatusCode}finally{this.eGt()}return Kj(t,await this.CWt(i,t.qBt,e),s)}async CWt(t,e,i){const s=Ti(e,(t=>t.gE===Rt.tBt));return s?s.Ryt&&s.TBt?await this.iGt.CWt(t,s.Ryt,s.TBt,i):(xt.lt(zj,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}$Ut(t){var e,i,s;this.sGt=t,this.nGt=0,this.rGt=As.Bg(),this.oGt=0,this.hGt=null!=(s=null==(i=t.Ryt)||null==(e=i.nAt)?void 0:e.V)?s:0}eGt(){this.sGt=void 0,this.nGt=0,this.rGt=0,this.oGt=0,this.hGt=0}aGt(){if(void 0!==this.sGt)return{Nut:this.sGt,uGt:this.oGt,cGt:this.hGt,lGt:As.Bg()-this.rGt}}dGt(t){return void 0!==this.sGt&&(0!==this.nGt&&(!(this.hGt>0&&this.oGt>=this.hGt)&&!(t-this.nGt<500)))}constructor(t,e,i,s,n,r,o,h){super(),this.bUt=void 0,this.kUt=void 0,this.sGt=void 0,this.nGt=0,this.rGt=0,this.oGt=0,this.hGt=0,this.RUt=new $t,this.IUt=void 0,this.AUt=0,this.SUt=void 0,this.TUt=void 0,this.PUt=void 0,this.CUt=void 0,this.FUt=t=>{this.bUt&&(this.OWt=this.bUt,this.bUt=void 0,this.AUt=0,this.SUt=void 0,this.TUt=void 0),this.kUt&&(t&&!Se(t)?this.kUt.Lb(t):this.kUt.Mb(),this.kUt=void 0)},this.tGt=(t,e)=>{this.oGt=t,t>0&&0===this.nGt&&(this.nGt=As.Bg()),void 0!==e&&(this.hGt=e),this.yo(new Wj(this.pp))},this.pp=t,this.rEt=i,this.TWt=s,this.OWt=e,this.yUt=new Dj(i,e),this.iGt=new Cj(o,n,h),this._Ut=new Pj(n,r,function(t){switch(t){case el.lE:return xa.lE;case el.cE:return xa.cE;case el.qV:case el.QLt:return xa.wk;default:return xa.Qk}}(e.pw),h)}};function Yj(t,e,i,s){return{Zk:{Zk:i,pw:Ut.QQ},pw:Nj.JLt,rct:s,EWt:t,eOt:e.eOt}}function Kj(t,e,i){return{Zk:{Zk:e,pw:Ut.QQ},rct:i,pw:Nj.$Lt,EWt:t,eOt:t.ROt.eOt}}r();var jj=class{get oWt(){return this.fGt}get _Gt(){const t=[];for(const i of this.vGt)if("Nut"===i.pw){const s=i.Nut.EWt,n=Gj(i.oLt,this._Vt,s);var e;t.push({Nut:s,oLt:i.oLt,LO:n,BO:n+(null!=(e=s.ct)?e:0)})}return t}get mGt(){const t=[];return this.gGt.forEach((e=>{for(const i of e.pGt)"Nut"===i.pw&&t.push({Nut:i.EWt,oLt:i.oLt,LO:i.LO,BO:i.LO+i.ct})})),t}KUt(t){"JBt"===t.pw&&(this.fGt=t.JBt),this.vGt.push(t),this.wGt&&(this.wGt.Mb(),this.wGt=void 0)}EUt(){return this.vGt[0]}xUt(t){we(this.vGt,t)}UUt(){return null!=this.wGt||(this.wGt=new as),this.wGt.Bb}yGt(t){this.bGt(t.pat).yGt(t)}AGt(t){return this.bGt(t).AGt()}SWt(t){this.bGt(t.pat).SWt(t)}SGt(t){var e;null==(e=this.gGt.get(t))||e.Ww()}TGt(t){return this.bGt(t).TGt()}bGt(t){if(this.gGt.has(t))return this.gGt.get(t);{const e=new Qj;return this.gGt.set(t,e),e}}Nb(){this.kGt(),this.EGt()}kGt(){this.fGt=void 0,Pn(this.vGt)}EGt(){this.gGt.forEach((t=>t.Nb()))}Ww(){this.gGt.forEach((t=>t.Ww())),this.gGt.clear(),this.Nb(),this.wGt&&(this.wGt.Xw(),this.wGt=void 0)}constructor(t){this.vGt=[],this.gGt=_u(),this.wGt=void 0,this.fGt=void 0,this._Vt=t}},Qj=class{get pGt(){return this.xGt}yGt(t){this.xGt.push(t),this.RGt&&(this.RGt.Mb(),this.RGt=void 0)}AGt(){return this.xGt[0]}SWt(t){we(this.xGt,t)}TGt(){return null!=this.RGt||(this.RGt=new as),this.RGt.Bb}Nb(){Pn(this.xGt)}Ww(){this.Nb(),this.RGt&&(this.RGt.Xw(),this.RGt=void 0)}constructor(){this.xGt=[],this.RGt=void 0}};r();var Jj=1e-6,$j=class{get _R(){return this.bxt}get o3(){return this.Axt}async _2(t,e){const i=t.Zk.Zk;if(this.IGt(i),this.CGt.pw===Vr.TTML){this._Vt.GFt(t.eOt)||await hu(this._Vt.ZFt(t.eOt),e);const s=this.PGt(i,t.eOt);for(const t of s)this.CGt.uW(t)}}async l2(t,e){if(void 0===t.Zk)return;const i=t.LO,s=i+t.ct;this.bxt=this.bxt.KL(ee.dB(i,s)).YL(Jj),this.u3(t.DGt,t.NGt),this.l3(i,s),this._Vt.GFt(t.eOt)||await hu(this._Vt.ZFt(t.eOt),e),this.f2(t.Zk.Zk,t.eOt,t.EWt)}f2(t,e,i){let s;this.IGt(t),s=this.CGt.pw===Vr.WEBVTT?this.MGt(t,i):this.PGt(t,e);for(const t of s)this.CGt.uW(t)}MGt(t,e){const i=fE(t),s=i.L;var n;const r=null!=(n=i.MV)?n:{LV:Uh.xF,lh:Uh.xF};for(const t of s){const i=Uh.cV(t.LO).yF(r.lh).yO(r.LV),s=this._Vt.QFt(i,e).uF(),n=s+(t.BO-t.LO);t.tF(s,n)}return s}PGt(t,e){const i=this._Vt.jFt(e).uF();return QE(t,this.CGt,{RV:0,CV:1/0,PV:i},Ry.APPLICATION_MP4)}IGt(t){this.CGt.pw===Vr.DEFAULT&&(this.CGt.pw=this.LGt(t)?Vr.WEBVTT:Vr.TTML)}LGt(t){return kE(Qg(pu(na(t),0,_.min(t.byteLength,16)),new Ui))}u3(t,e){this.Axt=this.Axt.KL(ee.dB(t,e)).YL(Jj)}l3(t,e){this.Axt=this.Axt.QL(ee.dB(t,e))}constructor(t,e){this.bxt=ee.fB(),this.Axt=ee.fB(),this.CGt=t,this._Vt=e}};r(),r(),r();var tQ=class extends pe{constructor(t,e){super(jt.BGt),this.oLt=t,this.Urt=e}};r();var eQ=class extends pe{constructor(t){super(jt.OGt),this.oLt=t}};r();var iQ=class extends pe{constructor(t,e){super(jt.FGt),this.oLt=t,this.Kdt=e}};r();var sQ=class extends pe{constructor(t,e){super(jt.VGt),this.oLt=t,this.WGt=e}},jt=function(t){return t.BGt="UGt",t.FGt="GGt",t.VGt="HGt",t.OGt="ZGt",t}({}),nQ=class extends Bo{get XGt(){return this.zGt}qGt(t){for(const e of this.zGt)qt(t,e)||this.TWt.SGt(e);this.zGt=t}get LIt(){return void 0!==this.YGt}wWt(){var t,e;return null!=(e=null==(t=this.YGt)?void 0:t.Bb)?e:Promise.resolve()}pWt(){if(this.LIt)throw new g("Cannot perform new operation while transmuxer is still busy")}KGt(t,e){}jGt(t){this.pWt(),this.YGt=new as;const e=e=>{this.QGt(t,e)};this.JGt(t,this.OT.Bw).then(e,e)}$Gt(t){this.pWt(),this.YGt=new as;const e=e=>{this.QGt(t,e)};this.tHt(t,this.OT.Bw).then(e,e)}QGt(t,e){this.YGt&&(!e||Se(e)||function(t){return t instanceof lj}(e)?(Se(e)||this.TWt.xUt(t),this.YGt.Mb(),this.YGt=void 0):this.YGt.Lb(e))}eHt(t,e){this.yo(new tQ(t,e))}iHt(t,e){this.yo(new iQ(t,e))}sHt(t,e,i){uj(e)&&this.yo(new sQ(t,i))}nHt(t){this.yo(new eQ(t))}yGt(t){qt(this.zGt,t.pat)&&this.TWt.yGt(t)}rHt(t){return this.TWt.AGt(t)}SWt(t){this.TWt.SWt(t)}oHt(t){return this.TWt.TGt(t)}Xw(){this.OT.Xw(),this.OT=new $t}constructor(t,e,i){super(),this.YGt=void 0,this.OT=new $t,this.TWt=t,this._Vt=e,this.zGt=i}};function rQ(t,e){return uj(t)?0:_.min(t.LO,e)}function oQ(t,e){var i;return _.max(t.LO,e)+(null!=(i=t.ct)?i:0)}var hQ=class extends nQ{JGt(t,e){ot(e);const i={pw:"pCt",Zk:t.JBt.Zk,pat:this.XGt[0],eOt:t.eOt,hHt:{Urt:"",qBt:t.qBt},LO:t.LO,oLt:t.oLt,EWt:t.JBt.EWt};return this.yGt(i),Promise.resolve()}async tHt(t,e){ot(e);const i=t.Nut.EWt;let s;void 0!==i.hit?(this._Vt.GFt(t.eOt)||await hu(this._Vt.ZFt(t.eOt),e),s=this._Vt.QFt(i.hit,i).uF()):s=i.LO;const n=rQ(i,s),r=oQ(i,n);var o;const h={pw:"Nut",Zk:t.Nut.Zk,pat:this.XGt[0],DGt:n,NGt:r,LO:s,ct:null!=(o=i.ct)?o:0,PV:0,eOt:t.eOt,oLt:t.oLt,EWt:t.Nut.EWt};this.yGt(h)}constructor(t,e,i){super(t,e,[i])}};function aQ(t,e){let i=ee.fB();for(const s of t){let n=s.LO;if(s.oLt.jMt.sOt&&uj(s.Nut))n=0;else{const i=t=>s.oLt===t.oLt&&cj(t.Nut,s.Nut),r=Ti(t,i);if(void 0!==r)n=_.min(n,r.BO);else{const t=Ti(e,i);void 0!==t&&(n=_.min(n,t.dWt.jn(0)))}}i=i.KL(ee.dB(n,s.BO))}return i}r();var uQ=.001,cQ=class{get aHt(){return this.uHt}get oLt(){return this.cHt.oLt}wUt(t){this.cHt.wUt(t)}get LIt(){return this.cHt.LIt||this.lHt.LIt||this.uHt.some((t=>t.LIt))}dHt(t){const e=t.slice();for(let t=this.uHt.length-1;t>=0;t--){const i=this.uHt[t];if(!i.fWt)throw new g("Invalid state");const s=Lr(e,(t=>t.pw===i.pw));s>=0?(i.dot(e[s]),Ko(e,s)):Ko(this.uHt,t)}for(const t of e){const e=new Rj(t);this.uHt.push(new Ij(t.pw,t,this.fHt,e,this))}e.length>0&&this.fHt.Nb();const i=t.map((t=>t.pw));this.lHt.qGt(i)}Dj(t){var e;const i=(null==(e=this.dZ)?void 0:e.Dj(t))||!1;return i&&(this.Xw(),this.fHt.Nb()),i}_Ht(t){for(const t of this.uHt)if(t.pw!==Io.wk||t.LIt)throw new g("Invalid state");const e=new Rj(t),i=new Ij(Io.wk,t,this.fHt,e,this);this.uHt=[i]}get oWt(){const t=this.fHt.oWt;if(t)return t;if(this.uHt.length>0){const t=this.uHt[0]._Wt.oWt;if(t&&this.uHt.every((e=>e._Wt.oWt===t)))return t}}Yat(){for(const t of this.uHt)t._Wt.cWt()}get vHt(){if(0===this.uHt.length)return ee.fB();const t=aQ(this.fHt._Gt.concat(this.fHt.mGt),Ke(this.uHt,(t=>t._Wt.Srt))).HL();let e=new ee([0,1/0]);for(const t of this.uHt)e=e.Sn(t._Wt._R);for(const t of this.uHt)e=e.QL(t.vWt);return e=e.KL(t),e.YL(uQ)}get mHt(){if(0===this.uHt.length)return ee.fB();const t=aQ(this.fHt.mGt,Ke(this.uHt,(t=>t._Wt.Srt))).HL();let e=new ee([0,1/0]);for(const t of this.uHt)e=e.Sn(t._Wt._R);return e=e.KL(t),e}Llt(t){const e=this.vHt.uB(t,uQ);return e?e.jn(e.V-1):t}DUt(t){return!!this.vHt.uB(t,uQ)||this.cHt.DUt(t)}gHt(t){return this.mHt.gr(t,uQ)}pHt(t,e,i){for(const t of this.uHt){const i=t._Wt,s=i.Hgt;if(void 0!==s&&e>=s&&!i._R.HL().gr(s))return!0}return e-t<i}Xw(){this.wHt(),this.yHt()}wHt(){this.cHt.Xw()}yHt(){this.lHt.Xw(),this.aHt.forEach((t=>t.Xw()))}Ww(){this.Xw(),this.cHt.Ww()}constructor(t,e,i,s){this.cHt=t,this.fHt=e,this.lHt=i,this.dZ=s,this.uHt=[]}};r();var lQ=class extends pe{constructor(){super(zt.zMt)}};r();var dQ=class extends pe{constructor(){super(zt.ZMt)}};r(),r();var fQ="LazyMediaBuffer",_Q=class extends Bo{get Ik(){return this.ST}get n3(){return this.pp}get md(){if(!this.wot)throw new A(Ja.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.wot.md}get mj(){return this.Ej}set mj(t){this.Ej=t,this.wot&&(this.wot.mj=t)}SJ(){return this.wot?this.wot.SJ():this.bHt}get _R(){return this.wot?this.wot._R:ee.fB()}get o3(){return this.wot?this.wot.o3:this.h3.NJ}get yj(){return this.Ij}set yj(t){this.Ij=t,this.wot&&(this.wot.yj=t)}u3(t,e){xt.RLt(fQ,"Marking gap from "+t+" to "+e+"."),this.h3.LJ(t,e),this.wot&&this.wot.u3(t,e)}l3(t,e){xt.RLt(fQ,"Removing gap from "+t+" to "+e+"."),this.h3.BJ(t,e),this.wot&&this.wot.l3(t,e)}AHt(t){this.wot=t,this.wot.yj=this.Ij,this.wot.mj=this.Ej;const e=this.h3.NJ;for(let t=0;t<e.V;t++)this.wot.u3(e.Cn(t),e.jn(t));var i;this.bHt&&(xt.RLt(fQ,"End of stream"),null==(i=this.wot)||i.i3());this.wot.yn(ss.KQ,this.Ds),this.SHt.Mb(t)}THt(t){return hu(this.SHt.Bb,t)}async l2(t,e,i){const s=await this.THt(i);await s.l2(t,e,i)}async d3(){const t=await this.THt();await t.d3()}async _2(t,e,i){const s=await this.THt(i);await s._2(t,e,i)}async jS(t,e,i){const s=await this.THt(i);await s.jS(t,e,i)}async N2(t,e){const i=await this.THt();await i.N2(t,e)}i3(){this.bHt=!0,this.wot&&this.wot.i3()}hJ(t){return!!this.wot&&this.wot.hJ(t)}async uJ(t){const e=await this.THt();await e.uJ(t)}async gn(){var t;this.Bo(),null==(t=this.wot)||t.fn(ss.KQ,this.Ds)}constructor(t,e){super(),this.pp=t,this.kHt=e,this.ST=void 0,this.wot=void 0,this.SHt=new as,this.Ej=20,this.bHt=!1,this.Ij=30,this.h3=new JD}},vQ="LazyMediaSource",mQ=class{get md(){return{pw:zr._W,o4:[],JG:[]}}get K3(){return this.EHt}get j3(){return this.xHt}get _R(){return this.qG?this.qG._R:ee.fB()}get ct(){return this.qG?this.qG.ct:this.IA}get SJ(){return!!this.qG&&this.qG.SJ}get iI(){return this.qG?this.qG.iI:new ee([0,1/0])}e4(t){this.IA=t,this.qG&&this.qG.e4(t)}i3(){this.nit=!0,this.qG&&this.qG.i3()}z2(){this.nit=!1,this.qG&&this.qG.z2()}r4(t,e,i,s){this.RHt=t,this.IHt=e,this.CHt=Boolean(i),this.PHt=Boolean(s),this.qG&&this.qG.r4(t,e,i,s)}hJ(t){return!this.qG||this.qG.hJ(t)}async uJ(t){if(!this.hJ(t))throw new g("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.qG)await this.qG.uJ(t);else{var e,i;this.LB.o7();const s=await this.LB.$n(t);S(this.IA)||s.e4(this.IA),this.nit&&s.i3(),s.r4(this.RHt,this.IHt,this.CHt,this.PHt),xt.RLt(vQ,"The MediaSource has been loaded."),this.DHt=!0,this.qG=s,null==(e=this.EHt)||e.AHt(this.qG.K3),null==(i=this.xHt)||i.AHt(this.qG.j3),this.NHt.Mb(s),this.LB.h7()}}lJ(t){this.qG.lJ(t)}async Ww(){this.qG&&await this.qG.Ww()}constructor(t,e,i){this.LB=t,this.EHt=void 0,this.xHt=void 0,this.NHt=new as,this.qG=void 0,this.DHt=!1,this.IA=NaN,this.nit=!1,this.RHt=0,this.IHt=1/0,this.CHt=!1,this.PHt=!1,e&&(xt.RLt(vQ,"Created lazy media buffer for audio."),this.EHt=new _Q(Io.cE,this)),i&&(xt.RLt(vQ,"Created lazy media buffer for video."),this.xHt=new _Q(Io.lE,this))}};function gQ(t,e){return void 0===e&&(e=!1),function(i,s){void 0===s&&(s="*");let n=wQ(i,"tag");const r=wQ(null==s?"*":s,"range"),o=[];let h,a,u,c=-1;for(;++c<r.length;)if(h=r[c].toLowerCase(),e||"*"!==h){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),h)){if(!e)return n[a];o.push(n[a])}else u.push(n[a]);n=u}return e?o:void 0}}r();gQ(((t,e)=>"*"===e||t===e||Dh(t,e+"-")),!0),gQ(((t,e)=>{const i=t.split("-"),s=e.split("-");let n=0,r=0;if("*"!==s[r]&&i[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!i[n])return!1;if(i[n]!==s[r]){if(1===i[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var pQ=gQ(((t,e)=>{let i,s=e;for(;;){if("*"===s||t===s)return!0;if(i=s.lastIndexOf("-"),i<0)return!1;"-"===s.charAt(i-2)&&(i-=2),s=s.slice(0,i)}}));function wQ(t,e){const i=t&&"string"==typeof t?[t]:t;if(!i||"object"!=typeof i||!("length"in i))throw new g("Invalid "+e+" `"+i+"`, expected non-empty string");return i}r(),r();var yQ=16384,bQ=71,AQ=188,SQ=2,TQ=3,kQ=function(t){return t[t.Qk=0]="Qk",t[t.XC=1]="XC",t[t.MHt=2]="MHt",t[t.LHt=3]="LHt",t}({});function EQ(t){return xQ(t)?1:function(t){return function(t){if(t.length<SQ*AQ)return-1;const e=t.length<TQ*AQ?SQ:TQ,i=_.min(1e3,t.length-e*AQ);for(let s=0;s<=i;s++){let i=!0;for(let n=0;n<e;n++)if(t[s+n*AQ]!==bQ){i=!1;break}if(i)return s}return-1}(t)>=0}(t)?2:function(t){return null!==yL(na(t),new Ui)}(t)?3:0}function xQ(t){const e=ei(t,0,_.min(t.length,yQ));return jo.KD(na(e))}var uc=class{get pw(){return this.pp}get _R(){return this.wot._R}get o3(){return this.wot.o3}BHt(t){return this.wot===t}async _2(t,e){if(this.wot.md.Ik!==t.hHt.Urt){const i={Ik:t.hHt.Urt};this.wot.hJ(i)&&(await this.wot.uJ(i),ot(e))}await this.wot._2(t.Zk,{L1:t.oLt.TC},e),void 0!==this.VDt&&this.pp===Io.lE&&xQ(t.Zk.Zk)&&this.VDt.Pot(t.Zk.Zk)}async l2(t,e){ot(e),xt.RN("HlsMediaBuffer","Got media data, appending to "+this.pp+" MediaBuffer: "+Qe(t.EWt.Ryt));const i=t.DGt,s=t.NGt,n={hit:t.LO,ct:t.ct,PV:t.PV,L1:t.oLt.TC};void 0!==t.Zk&&(await this.wot.l2(t.Zk,n,e),this.OHt(t.Zk,t)),this.FHt(i,s)}OHt(t,e){var i;if(!xQ(t.Zk))return;const s=e.LO,n=s+e.ct,r=e.PV;if(null==(i=this.qgt)||i.ddt(t.Zk,s,r),void 0!==this.VDt&&this.pp===Io.lE){const i=e.EWt.EOt;this.VDt.ddt(t.Zk,s,n,r,e.oLt,i)}const o=[];void 0!==this.qgt&&o.push(this.qgt),void 0!==this.VDt&&o.push(this.VDt),kx(this._R,o)}FHt(t,e){const i=this.wot._R,s=new ee([t,e]).QL(i);for(let t=0;t<s.V;t++)this.wot.u3(s.Cn(t),s.jn(t));for(let t=0;t<i.V;t++)this.wot.l3(i.Cn(t),i.jn(t))}u3(t,e){this.wot.u3(t,e)}l3(t,e){this.wot.l3(t,e)}constructor(t,e,i,s){this.pp=t,this.wot=e,this.qgt=i,this.VDt=s}};function RQ(t){if(t.pw!==el.QLt||void 0===t.eLt)return;const e=t.eLt.match(/^CC([1-4])$/);if(e)return Number(e[1]);const i=t.eLt.match(/^SERVICE([\d+])$/);return i?Number(i[1]):void 0}r(),r(),r();var IQ=class{XLt(t){var e,i,s;return null==(s=null==(i=this.qG)||null==(e=i.j3)?void 0:e.hJ(t))||s}zLt(t){var e,i,s;return null==(s=null==(i=this.qG)||null==(e=i.K3)?void 0:e.hJ(t))||s}constructor(t){this.qG=t}},Ia="LLHLSPlayer",CQ=[Zc.DL,Zc.NL,Zc.ML,Zc.QI],PQ=[Mi.Hy,Mi.wy,Mi.Cy,Mi.Ry],DQ=2e3,NQ=class extends Bo{get ZB(){var t;const e=[this.VHt,this.WHt].filter(ne);if(0===e.length||this.ct!==1/0)return;const i=null==(t=this.mR)?void 0:t.getTime();if(i){return(Date.now()-i)/1e3}let s;for(const t of e){const e=t.jMt.iI;if(0===e.V)continue;const i=e.jn(e.V-1)+t.jMt.DSt,n=t.jMt.gFt,r=i+(null!=n?n:0)-this.yR;(!s||s<r)&&(s=r)}return s}UHt(){if(void 0===this.GHt)return!1;const t=As.Bg();if(!this.GHt.cHt.dGt(t))return!1;const e=this.GHt.cHt.aGt();if(void 0===e||void 0===e.Nut.ct)return!1;const i=this.yR,s=this.zR,n=this.GHt.vHt.uB(i);if((void 0!==n?n.jn(0)-i:0)>=2*e.Nut.ct*s)return!1;if(e.uGt>0&&0===e.cGt)return e.lGt>1e3*e.Nut.ct*.8;return 8*e.cGt/this.dZ.nj.mG>=1.8*e.Nut.ct}async HHt(){var t;const e=await this.KLt();if(void 0===e)return;const i=null==(t=this.GHt)?void 0:t.cHt.aGt();if(void 0===i)return;const s=this.ZHt;if(i.cGt>0){if(_.max(0,i.cGt-i.uGt)<=i.cGt*(e.mG/s.mG))return}const n=e.mG<s.mG;await this.dLt(e,{fLt:n})}XHt(t){return Gs(t,(t=>t.mG))}async zHt(){let t=await this.qHt();if(0===t.length)return;const e=await this.YHt(t);e.length>0&&(t=e);const i=this.XHt(t);void 0!==i&&(await this.dLt(i,{fLt:!0}),this.QG.dIt(i.mG))}get KHt(){const t=[this.WHt,this.VHt].filter(ne);for(const e of t){if(!e.jMt.sOt)return!1;const t=e.jMt.Srt,i=t[t.length-1];if(i&&i.eOt!==this.jHt)return!1}return!0}get hLt(){return this.ZHt}get bLt(){return this.WHt}get SLt(){return this.VHt}get QHt(){return this.JHt}get ht(){return this.rO}get _R(){return this.LB._R.ks()}get cLt(){const t=[];if(this.ZHt){const e=this.LB.yR;for(const i of this.$Ht)for(const s of i.aHt){const i=s.AWt(e);i&&!qt(t,i)&&t.push(i)}}return t}get mR(){if(this.ZHt){const t=this.LB.yR;return this.ZHt.mOt(t)}}set mR(t){if(!t||!this.ZHt)return;const e=this.ZHt.gOt(t);void 0!==e&&this.AR(e,{tZt:!1,eZt:!0})}get bt(){return this.iZt}get yR(){var t;return null!=(t=this.sZt)?t:this.LB.yR}set yR(t){this.AR(t)}AR(t,e){var i,s,n,r;xt.RN(Ia,"Seeking to "+t+" s.");const o={tZt:null!=(s=null==e?void 0:e.tZt)?s:t===1/0,eZt:null==(n=null==e?void 0:e.eZt)||n,XBt:null!=(r=null==e?void 0:e.XBt)&&r};this.sZt=t,this.nZt=o,this.rZt=!0,this.tEt=!0,null==(i=this.VG)||i.SI(),this.yo(new _t(t)),this.q9.Xw(),this.oZt&&(As.Og(this.hZt),o.eZt?this.hZt=As.Fg((()=>this.aZt(t,o)),50):this.aZt(t,o))}aZt(t,e){As.Og(this.hZt);const i=[this.opt,this.uZt,this.Y9].filter(ne);this.q9=new $t,this.q9.zw(this.cW.Bw),this.Y9=go(this.K9(i,t,e,this.q9.Bw),this.q9).catch(this.cZt)}get ct(){var t,e,i,s,n,r,o;if(!this.KHt)return null!=(o=null!=(r=null!=(n=null==(t=this.WHt)?void 0:t.jMt.ct)?n:null==(e=this.VHt)?void 0:e.jMt.ct)?r:null==(s=this.rEt)||null==(i=s.MVt)?void 0:i.jMt.ct)?o:[this.WHt,this.VHt].filter(ne).every((t=>function(t){if(void 0===t)return!1;return t.jMt.Srt.length>0&&!t.jMt.sOt}(t)))?1/0:NaN;const h=this.LB.ct;if(S(h)){var a,u;const t=null==(u=this.rEt)||null==(a=u.MVt)?void 0:a.jMt.ct;if(void 0!==t)return t}return h}get kR(){if(!this.KHt)return!1;if(this.nI&&this.oZt){var t,e;const i=this.yR,s=null==(t=this.WHt)?void 0:t.jMt.ct,n=null==(e=this.VHt)?void 0:e.jMt.ct;return!(void 0!==s&&i<s)&&!(void 0!==n&&i<n)}return this.LB.kR}get lt(){return this.HG}get RR(){return this.ZG}get PR(){}get NR(){return!1}get LR(){return la({},{uO:0,cO:0,lO:0,dO:0,fO:0,_O:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.LB.OR(),{fO:this.Ekt,dO:this.dZ.nj.mG})}get Tr(){var t;return null==(t=this.rEt)?void 0:t.Tr}get FR(){return this.LB.FR}set FR(t){this.LB.FR=t}get GR(){return this.kSt}set GR(t){this.kSt!==t&&(this.kSt=t,this.yo(t?new dt:new fn))}get ZR(){return this.LB.ZR}get zR(){return this.LB.zR}set zR(t){xt.RN(Ia,"Setting playback rate to "+t+"."),this.LB.zR=t}get KR(){return this.Pkt.ks()}get Pkt(){return this.LB.KR}get QR(){return this.zG}set QR(t){this.zG!==t&&(this.zG=t,this.lZt())}get tI(){let t=this.LB.tI;return this.Mkt&&(t=_.max(gs.Xn,t)),t}get iI(){return this.Tkt.ks()}get Tkt(){let t=this.n4;const e=[this.WHt,this.VHt].filter(ne);if(t.V>0&&e.some((t=>!t.jMt.sOt))){const i=this.Pkt,s=t.jn(t.V-1);if(i.V>0&&i.jn(i.V-1)>s){let n=i.jn(i.V-1);const r=BQ(e);r.V>0&&(n=_.min(n,r.jn(r.V-1))),t=t.KL(new ee([s,n]))}}return t}DFt(){let t=function(t){if(0===t.length)return ee.fB();let e=new ee([0,1/0]),i=0;for(const s of t){const t=s.jMt.iI;t.V>0&&(e=e.Sn(t),i=_.max(i,t.Cn(0)))}if(e.V>0)return e;return ee.lB(i)}([this.WHt,this.VHt].filter(ne));0!==t.V&&(this.qG&&this.KHt&&this.qG.ct!==1/0&&(t=new ee([t.Cn(0),this.qG.ct])),this.n4=t,this.dZt&&this.qgt.$V(t.Cn(0)),this.fZt&&this.VDt.$V(t.Cn(0)))}get nI(){var t;return null!=(t=this.rZt)?t:this.LB.nI}get YG(){}get nt(){return this.Ul}get rt(){return this.hO}get hI(){var t,e;return this.LB.hI||(null==(e=this.ZHt)||null==(t=e.HCt)?void 0:t.Ti)||0}get cI(){var t,e;return this.LB.cI||(null==(e=this.ZHt)||null==(t=e.HCt)?void 0:t.ji)||0}get dI(){return this.LB.dI}set dI(t){xt.RN(Ia,"Setting volume to "+t+"."),this.LB.dI=t}get vI(){return this.fZ}get gI(){return!1}set gI(t){}get jG(){return this.QG}TI(){return!1}pI(){return this.LB.wa}_a(){return this.LB.aH}DI(t){return this.LB.uH(t)}be(){xt.RN(Ia,"Hiding the player."),this.LB.be()}bI(){var t;xt.RN(Ia,"Pausing the player."),this.LB.bI(),(null==(t=this.VG)?void 0:t._B)&&this.VG.SI()}async AI(){this.M9=!0;const t=this.LB.AI();if(this.kR){const t=this.Tkt;t.V>0&&this.AR(t.Cn(0),{eZt:!1})}this.oZt||await this.lZt(),this.tkt(),await t,this.eEt()}tkt(){var t;if(!this.Skt())if(null==(t=this.hLt)?void 0:t.jMt.sOt){var e;let t=!0,i=0;const s=null==(e=this.ZHt)?void 0:e.jMt.Cn;if(!this.tEt&&s&&(t=!s.XBt,i=s.ZBt,i<0)){const t=this.hLt.jMt.iFt;i+=t.jn(t.V-1)}this.aZt(i,{tZt:t})}else this.aZt(1/0,{tZt:!0});this._Zt()&&this.aZt(1/0,{tZt:!0})}Skt(){var t;const e=this.Tkt;if(0===e.V)return!0;const i=null==(t=this.vZt)?void 0:t.JL(this.yR);return(i&&i>0?this.vZt.jn(i):this.yR)>=e.Cn(0)}get vZt(){var t,e;const i=null==(t=this.mZt)?void 0:t.vHt,s=null==(e=this.GHt)?void 0:e.vHt;return i?s?s.Sn(i):i:s}_Zt(){return GQ(this.yR,this.WHt)||GQ(this.yR,this.VHt)}OEt(){this.HG=void 0,this.ZG=void 0}PH(t){this.HG||(oh(this.tr()),this.HG=Te(t),this.ZG=t,this.yo(new Wa(t)))}ge(){xt.RN(Ia,"Showing the player."),this.LB.ge()}kI(){throw new g("Not implemented")}EI(){throw new g("Not implemented")}xI(){}RI(){this.oZt&&oh(this.gZt(this.WHt,this.VHt,this.JHt,{RI:!0}))}async ka(t,e,i){const s={stack:[],error:void 0,hasError:!1};try{var n;if(xt.RN(Ia,"Setting the player source to "+t.src+"."),this.OEt(),this.iZt&&!Bn(this.iZt)&&(await this.tr(),ot(i)),!t.src||Bn(t))return;const o=rs(s,$t.Yw([i]),!1);var r;this.cW=$t.Yw([o.Bw]),this.iH.yG(t.contentProtection),this.iZt=t,this.pZt=t.seamlessSwitchStrategy,this.fZt=!qt(t.ignoreEmbeddedTextTrackTypes,Vr.CEA608),this.dZt=!qt(t.ignoreEmbeddedTextTrackTypes,Vr.EMSG),this.yn(zt.YMt,this.handleBufferingErrorEvent);const h=null!=(r=null==(n=t.latencyConfiguration)?void 0:n.targetOffset)?r:t.liveOffset;if(this.rEt=new bj(this.aW,this.Lut,t.useCredentials,As.Kp(t.src),h),this.rEt.yn(yj.EVt,this.rWt),this.rEt.yn(yj.xVt,this.wZt),this.rEt.yn(Mi.By,this.Ds),this.rEt.yn(Mi.Oy,this.Ds),t.hlsDateRange&&(this.yZt=new Ej(this.rEt,this.LB),this.Ul.xG(this.yZt.nt)),null!=this.bZt||(this.bZt=this.AZt.uit()),e.textTracks&&this.sH(e.textTracks),t.latencyConfiguration){const e=t.latencyConfiguration;this.VG=new AX(this,this.LB,e),this.VG.Rt=!0,this.vI.Sa(this.VG)}Nx(this.Ul),this.lZt(),o.Ww()}catch(t){s.error=t,s.hasError=!0}finally{ae(s)}}lZt(){return this.opt=this.SZt(this.opt,this.cW.Bw).catch(this.Xpt),this.opt}async SZt(t,e){if(t&&(await t,ot(e)),!this.rEt)return;const i=this.zG;i===hl.qB||this.M9?await this.zE(e):i===hl.jV&&await this.TZt(e)}async TZt(t){if(void 0===this.rEt||this.Mkt)return;if(!this.rEt.CVt){try{await this.rEt.BVt(t)}catch(t){throw Zr(t),this.GR=!1,new A(Ja.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.kZt.ift()}const e=await this.EZt();this.xZt(e);const i=this.RZt(e.DLt),s=this.IZt(e.NLt),n=this.CZt(e._Ot);if(!n){const t=OQ(e.vOt);t&&(xt.RN(Ia,"Detected initial closed caption rendition."),this.PZt(e,t))}await this.gZt(i,s,n,{DZt:!0}),this.Mkt=!0,this.oxt.fxt(),this.NZt()}NZt(){const t=[this.WHt,this.VHt].filter(ne);if(t.some((t=>t.jMt.sOt)))return;if(this.VG)return;const e=_.max(...t.map((t=>{var e;return null!=(e=t.jMt.DSt)?e:0}))),i={minimumOffset:.66*e,maximumOffset:2*e,targetOffset:1*e,forceSeekOffset:3*e,minimumPlaybackRate:Pt,maximumPlaybackRate:gt};this.VG=new AX(this,this.LB,i),this.fZ.Sa(this.VG)}async EZt(){if(this.MZt=this.rEt.Tr.PLt,!this.MZt.length)throw new A(Ja.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.LZt(this.MZt);if(0===t.length)throw new A(Ja.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const e=await this.YHt(t);return e.length>0&&(t=e),xt.RN(Ia,"Selecting initial active variant stream."),function(t,e,i,s){void 0===s&&(s=QT.maximumBackoff);const n=function(t,e){if(void 0===e)return t;const i=e.preferredVideoCodecs,s=e.preferredAudioCodecs;if(void 0!==i){let e;for(const n of i){const i=t.filter((t=>t.Urt&&t.Urt.ePt&&Dn(t.Urt.ePt,n)));if(0===i.length)continue;if(void 0===s)return i;void 0===e&&(e=i);const r=FQ(i,s);if(void 0!==r)return r}if(void 0!==e)return e}if(void 0!==s){const e=FQ(t,s);if(void 0!==e)return e}return t}(t,e),r=WQ(n,s);switch(i.pj.type){case wt.BANDWIDTH:{const t=i.Sj,e=r.filter((e=>e.mG<=t));if(e.length>0)return qm(e,(t=>t.mG))}case wt.PERFORMANCE:return Gs(r,(t=>t.mG));case wt.QUALITY:return qm(r,(t=>t.mG))}}(t,this.iZt.abr,this.dZ,this.Zlt.maximumBackoff)}RZt(t){if(this.BZt){const t=this.OZt(this.BZt);if(t)return t}return VQ(t)}IZt(t){if(this.FZt){const t=this.OZt(this.FZt);if(t)return t}return VQ(t)}CZt(t){for(const t of this.Ul.oC)t.TE===yh.Jn&&(this.VZt=this.WZt(t));if(this.VZt){const t=this.OZt(this.VZt);if(t)return t}return OQ(t)}WZt(t){return Ti(this.ZHt._Ot,(e=>t===this.UZt.get(e.TC)))}async zE(t){this.oZt||(await this.TZt(t),ot(t),this.oZt=!0,await this.gZt(this.WHt,this.VHt,this.JHt,{DZt:!0}))}sH(t){for(const e of t)e.src&&this.hH.rW(e)}PZt(t,e){if(!this.fZt)return;const i=function(t){const e=[];for(const i of t){const t=RQ(i);void 0!==t&&e.push({Vtt:t,Wtt:i.gs||"",kh:i.l})}return e}(t.vOt);for(const t of i)this.VDt.vgt(t);if(void 0!==e){const t=RQ(e);this.VDt.fgt(t).TE=yh.Jn}}get $Ht(){return[this.mZt,this.GHt,this.GZt].filter(ne)}lLt(t){for(const e of t)if(!this.HZt(e))throw new g("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.MZt=t}HZt(t){const e=this.Tr;return!!e&&qt(e.PLt,t)}OZt(t){if(t&&this.ZHt)return Ti(this.ZHt.FLt,(e=>e===t))}xZt(t){var e;if(xt.RN(Ia,"Setting active variant stream."),this.ZHt===t)return;const i=(null==(e=this.ZHt)?void 0:e.bBt)!==(null==t?void 0:t.bBt);if(this.ZHt&&i)for(const t of this.ZHt._Ot)this.lW(t);if(this.ZHt=t,this.yo(new lQ),this.qkt(),t&&i)for(const e of t._Ot)this.ZZt(e)}ZZt(t){const e=this.LB.DI(Hi.qV,void 0,t.l,t.gs,t.QMt,void 0,void 0,t.sLt.map(GY).filter(ne));e.yn(Eo.aa,this.onTextTrackChange),this.UZt.set(t.TC,e),this.XZt.tt(e)}lW(t){const e=this.UZt.get(t.TC);e&&(e.fn(Eo.aa,this.onTextTrackChange),this.XZt.it(e),this.UZt.delete(t.TC),this.LB.lW(e))}async qHt(){var t;const e=null!=(t=this.MZt)?t:this.Tr.PLt;if(0===e.length&&!this.MZt)return xt.RN(Ia,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===e.length&&!this.MZt)return xt.RN(Ia,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const i=await this.LZt(e);if(0===i.length)return xt.ILt(Ia,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=WQ(i,this.Zlt.maximumBackoff);return 0===s.length?(this.zZt||(xt.ILt(Ia,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.qZt++,await this.YZt(i)),[]):s}async KZt(){const t=await this.KLt();if(void 0===t)return;const e=!!this.ZHt&&t.mG<this.ZHt.mG;await this.dLt(t,{fLt:e})}async KLt(){var t,e;const i=await this.qHt();if(0===i.length)return;const s=Tq(this.LB),n=await this.YHt(i),r={ji:this.LB.ji,Ti:this.LB.Ti,ZLt:s,blt:null==(e=this.iZt)||null==(t=e.abr)?void 0:t.restrictToPlayerSize},o=await this.jZt.KLt(i,this.ZHt,n,r,new IQ(this.qG));return!!this.ZHt&&o.mG<this.ZHt.mG||this.QZt(o,s)?o:void 0}QZt(t,e){var i;if(t===this.hLt)return!1;const s=this.hLt&&UQ(this.hLt,this.Zlt.maximumBackoff),n=UQ(t,this.Zlt.maximumBackoff);if(!s&&n)return!0;(!this.XPt||this.XPt.aLt.mG>t.mG)&&(this.XPt={aLt:t,Nft:As.Bg()});const r=As.Bg()-this.XPt.Nft;var o;const h=null!=(o=null==(i=this.SLt)?void 0:i.jMt.HLt)?o:1/0;return e>=_.max(h-1,5)||r>1e3}async YZt(t){this.zZt=!0;let e=!1;for(const i of t)try{const t=this.VHt?Ti(i.NLt,(t=>et(t,this.VHt))):void 0;if(void 0===t)continue;await this.ZVt(t),t.jMt.yFt=-1/0,e=!0}catch(t){}if(e)this.qZt=0,await this.JZt();else{if(this.qZt>=this.Zlt.maxRetries)return void this.PH(new A(Ja.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=_.min(this.Zlt.minimumBackoff*2**(this.qZt-1),this.Zlt.maximumBackoff);await on(t)}this.zZt=!1,await this.KZt()}async LZt(t){let e=await Qm(t,(async t=>{var e,i,s;const n=[(null==(e=t.Urt)?void 0:e.$Ct)?'audio/mp4; codecs="'+t.Urt.$Ct+'"':void 0,(null==(i=t.Urt)?void 0:i.ePt)?'video/mp4; codecs="'+t.Urt.ePt+'"':void 0].filter(ne);return 0===n.length||await this.$Zt.IJ(n,null==(s=this.iZt)?void 0:s.useManagedMediaSource)}));return e.some((t=>{var e;return null==(e=t.Urt)?void 0:e.ePt}))&&(e=e.filter((t=>!t.Urt||t.Urt.ePt||0!==t.NLt.length))),e.some((t=>{var e;return null==(e=t.Urt)?void 0:e.$Ct}))&&(e=e.filter((t=>!t.Urt||t.Urt.$Ct||0!==t.DLt.length))),e}YHt(t){return this.rEt.DVt?Qm(t,(t=>async function(t,e){for(const i of t)if(!await e(i))return!1;return!0}([VQ(t.DLt),VQ(t.NLt),OQ(t._Ot),OQ(t.vOt)].filter(ne),(t=>this.tXt(t))))):Promise.resolve([])}async tXt(t){if(0===t.jMt.Srt.length)return!1;const e=t.jMt.Srt[0];if(!e.Ryt)return!1;const i=e.Ryt,s=i.nAt?sK(i.nAt.Cn,i.nAt.V):void 0;try{return await this.Lut.nrt(i.Ix,s)}catch(t){return!1}}async dLt(t,e){if(!this.oZt)throw new g("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.HZt(t))throw new g("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.ZHt)return void xt.RN(Ia,"Trying to set the already active variant stream, ignoring.");const i=this.WHt?Ti(t.DLt,(t=>et(t,this.WHt))):void 0,s=this.VHt?Ti(t.NLt,(t=>et(t,this.VHt))):void 0,n=this.JHt?Ti(t._Ot,(t=>et(t,this.JHt))):void 0;this.xZt(t),this.XPt=void 0,await this.gZt(i,s,n,e)}async ALt(t){if(!this.ZHt)return void(this.BZt=t);const e=this.OZt(t);if(t&&!e)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");this.bLt!==e&&(xt.RN(Ia,"Switching audio rendition"),await this.gZt(e,this.VHt,this.JHt,{vLt:!0}))}async TLt(t){if(!this.ZHt)return void(this.FZt=t);const e=this.OZt(t);if(t&&!e)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");this.SLt!==e&&(xt.RN(Ia,"Switching video rendition"),await this.gZt(this.WHt,e,this.JHt,{_Lt:!0}))}async eXt(t){if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active subtitle rendition to undefined.");if(!this.Mkt)return void(this.VZt=t);const e=this.OZt(t);if(!e)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");xt.RN(Ia,"Switching subtitle rendition"),await this.gZt(this.WHt,this.VHt,e)}async iXt(t,e){if(this.zZt)return;const i=0===this.rt.V;t.pw===el.lE||t.pw===el.cE&&i?this.MZt&&this.MZt.length<=1?(t.pw===el.lE&&this.VHt!==t?await this.gZt(this.WHt,t,this.JHt):t.pw===el.cE&&i&&this.WHt!==t&&await this.gZt(t,this.VHt,this.JHt),await this.sXt(t,e)):await this.KZt():await this.sXt(t,e)}async ZVt(t,e){try{await this.rEt.ZVt(t,e)}catch(i){throw Zr(i),(so(i)||lA(i))&&await this.iXt(t,e),i}}async sXt(t,e){if(!qt(this.nXt,t)){this.nXt.push(t);try{const i=t.pw===el.qV||t.pw===el.QLt?1/0:this.Zlt.maxRetries;await Si((()=>this.retryOfflineRenditionsCallback(t,e)),e,i,this.Zlt.minimumBackoff,this.Zlt.maximumBackoff)}catch(t){this.PH(new A(Ja.MEDIA_LOAD_ERROR,t.message,t))}finally{we(this.nXt,t),t.jMt.yFt===-1/0&&await this.JZt()}}}gZt(t,e,i,s){void 0===s&&(s={});const n={fLt:s.fLt||!1,vLt:s.vLt||!1,_Lt:s._Lt||!1,RI:s.RI||!1,DZt:s.DZt||!1};return n.DZt||n.RI||this.WHt!==t||this.VHt!==e||this.JHt!==i?void 0===t&&void 0===e?Promise.reject(new g("Trying to buffer no media renditions.")):(this.WHt=t,this.VHt=e,this.JHt=i,this.DFt(),this.yo(new dQ),this.q9.Xw(),this.q9=new $t,this.q9.zw(this.cW.Bw),this.rXt.Xw(),this.rXt=new $t,this.rXt.zw(this.cW.Bw),this.uZt=go(this.oXt([this.uZt,this.Y9].filter(ne),t,e,i,n,this.rXt.Bw),this.rXt).catch(this.cZt),this.uZt):Promise.resolve()}async hXt(t,e,i,s){var n,r;const o=[];if(o.push(this.aXt(e,s)),DY(t,e)||o.push(this.aXt(t,s)),null==(r=this.iZt)||null==(n=r.hls)?void 0:n.delaySubtitlePreload)return Promise.all(o).then((()=>this.aXt(i,s)));const h=this.aXt(i,s);return Promise.all([...o,h])}async aXt(t,e){if(t)try{await this.rEt.ZVt(t,e)}catch(i){Zr(i),(so(i)||lA(i))&&await this.uXt(t,e)}}async uXt(t,e){if(this.zZt)return;const i=0===this.rt.V;if(t.pw===el.lE||t.pw===el.cE&&i)if(this.MZt&&this.MZt.length<=1)await this.sXt(t,e);else{const t=await this.EZt();this.xZt(t);const e=this.RZt(t.DLt),i=this.IZt(t.NLt),s=this.CZt(t._Ot);await this.gZt(e,i,s)}else await this.sXt(t,e)}async oXt(t,e,i,s,n,r){var o;if(!this.oZt)return void await this.hXt(e,i,s,r);await Promise.all(t.map((t=>t.catch(Bt)))),this.cXt(),await this.lXt(r),await this.dXt();const h=[];n.vLt&&this.qG&&this.qG.K3&&h.push(this.qG.K3.jS(0,1/0)),n._Lt&&this.qG&&this.qG.j3&&h.push(this.qG.j3.jS(0,1/0)),await Promise.all(h),ot(r);const a=await this.fXt(e,i,n.RI,r);this._Xt(e,i,n.fLt||a),this.vXt(s,n.fLt),ot(r);const u=[i,DY(e,i)?void 0:e,s].filter(ne);try{await Promise.all(u.filter((t=>!t.jMt.fFt)).map((t=>{var e;return null==(e=this.rEt)?void 0:e.XVt(t,r)})))}catch(t){Zr(t)}if(ot(r),this.s4(),this.DFt(),void 0!==this.sZt)this.aZt(this.sZt,this.nZt);else if(!this.tEt&&(null==(o=this.ZHt)?void 0:o.jMt.Cn)){const t=this.ZHt.jMt,e=t.Cn;let i=e.ZBt;if(e.ZBt<0){const e=t.iFt;i+=e.jn(e.V-1)}this.aZt(i,{tZt:!e.XBt})}else!this.tEt&&u.every((t=>!t.jMt.sOt))?this.aZt(1/0,{tZt:!0}):this.$Ht.length>0&&this.mXt()}async fXt(t,e,i,s){var n,r;const o=void 0!==t&&t!==e,h=void 0!==e,a=await this.gXt(t,e,this.ZHt);if(ot(s),!i&&this.qG&&!a)return!1;const u=void 0!==(null==(n=this.qG)?void 0:n.K3),c=void 0!==(null==(r=this.qG)?void 0:r.j3);if(!i&&!(o!==u||h!==c)&&a&&this.qG&&this.qG.hJ(a))return await this.lXt(s),await this.qG.uJ(a),!0;for(const t of this.$Ht)t.aHt.forEach((t=>t.Xw()));this.LB.o7();try{this.qG&&await this.LB.tr(),this.qG=await this.pXt(a,o,h)}finally{this.LB.h7()}return!0}async gXt(t,e,i){var s,n;const r=i.Urt,o=[];if(void 0!==t){var h,a;const e=null!=(a=null==(h=t.Urt)?void 0:h.$Ct)?a:null==r?void 0:r.$Ct;if(!e)return;{const t='audio/mp4; codecs="'+e+'"';xt.RN(Ia,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),o.push(t)}}if(void 0!==e){var u,c;const t=null!=(c=null==(u=e.Urt)?void 0:u.ePt)?c:null==r?void 0:r.ePt;if(!t)return;{const e='video/mp4; codecs="'+t+'"';xt.RN(Ia,"Configuring MediaSource for initial video rendition with codec: "+e+"."),o.push(e)}}if(0===o.length)return void xt.ILt(Ia,"No codecs found on the active variant stream.");var l;const d=null!=(l=null==e||null==(s=e.jMt.Srt[0])?void 0:s.qBt)?l:[];var f;const _=null!=(f=null==t||null==(n=t.jMt.Srt[0])?void 0:n.qBt)?f:[],v=this.rEt.Tr,m=await lK(this.iZt.contentProtection,o,v.lVt.concat(_).concat(d),this.aW,this.iZt.useCredentials);return{pw:zr._W,o4:o.map((t=>({Ik:t}))),JG:m,g4:this.iZt.useManagedMediaSource}}async pXt(t,e,i){let s;return s=t?await this.LB.$n(t):new mQ(this.LB,e,i),this.qG=s,this.s4(),this.GTt(),this.HTt(),s}s4(){const t=this.qG;if(t&&S(t.ct)){var e,i,s;const n=null!=(s=null==(e=this.WHt)?void 0:e.jMt.ct)?s:null==(i=this.VHt)?void 0:i.jMt.ct;void 0!==n&&n>0&&t.e4(n)}this.DFt()}GTt(){const t=this.qG;t&&(t.j3&&(t.j3.mj=this.dZ.xj),t.K3&&(t.K3.mj=this.dZ.xj))}HTt(){const t=this.qG;t&&(t.j3&&(t.j3.yj=this.dZ.yj),t.K3&&(t.K3.yj=this.dZ.yj))}_Xt(t,e,i){if(!this.qG)throw new g("Invalid state");this.qG.K3?this.Q3&&this.Q3.BHt(this.qG.K3)||(this.Q3=new uc(Io.cE,this.qG.K3,this.dZt?this.qgt:void 0,this.fZt?this.VDt:void 0)):this.Q3=void 0,this.qG.j3?this.J3&&this.J3.BHt(this.qG.j3)||(this.J3=new uc(Io.lE,this.qG.j3,this.dZt?this.qgt:void 0,this.fZt?this.VDt:void 0)):this.J3=void 0;const s=DY(t,e);if(this.J3&&e){const t=s&&this.Q3?[this.J3,this.Q3]:[this.J3];this.GHt?this.GHt.oLt!==e&&(i&&(this.GHt.Xw(),this.GHt.fHt.Nb()),this.GHt.wUt(e)):(this.GHt=function(t,e,i,s,n,r,o,h,a,u){const c=s.Tr.CL,l=new jj(c),d=new qj(Io.lE,t,s,l,n,r,o,u),f=e.map((t=>t.pw)),_=h.vTt(l,s.Tr.CL,f),v=new cQ(d,l,_,a);return v.dHt(e),v}(e,t,this.LB,this.rEt,this.aW,this.Lut,this.DWt,this.bZt,this.dZ,this.iZt.useCredentials),this.GHt.cHt.yn(yt.vUt,this.wXt),this.GHt.cHt.yn(yt.mUt,this.yXt),this.GHt.lHt.yn(jt.BGt,this.bXt),this.GHt.lHt.yn(jt.FGt,this.AXt),this.GHt.lHt.yn(jt.VGt,this.SXt),this.GHt.lHt.yn(jt.OGt,this.TXt)),this.GHt.dHt(t)}else{var n;null==(n=this.GHt)||n.Ww(),this.GHt=void 0}var r;this.Q3&&t&&!s?(this.mZt?this.mZt.oLt!==t&&(i&&(this.mZt.Xw(),this.mZt.fHt.Nb()),this.mZt.wUt(t)):(this.mZt=function(t,e,i,s,n,r,o,h,a,u){const c=s.Tr.CL,l=new jj(c),d=new qj(Io.cE,t,s,l,n,r,o,u),f=h.vTt(l,s.Tr.CL,[e.pw]),_=new cQ(d,l,f,a);return _.dHt([e]),_}(t,this.Q3,this.LB,this.rEt,this.aW,this.Lut,this.DWt,this.bZt,this.dZ,this.iZt.useCredentials),this.mZt.cHt.yn(yt.mUt,this.yXt),this.mZt.lHt.yn(jt.BGt,this.bXt),this.mZt.lHt.yn(jt.OGt,this.TXt)),this.mZt.dHt([this.Q3])):(null==(r=this.mZt)||r.Ww(),this.mZt=void 0);this.kXt()}vXt(t,e){if(this.GZt){this.GZt.cHt.oLt===t?e&&(this.GZt.Xw(),this.GZt.fHt.Nb()):(this.GZt.Ww(),this.GZt=void 0)}if(!this.GZt&&t){const e=this.UZt.get(t.TC);e.TE=yh.Jn,this.GZt=function(t,e,i,s,n,r,o){const h=i.Tr.CL,a=new $j(e,h),u=new jj(h),c=new qj(Io.wk,t,i,u,s,n,r,o),l=new hQ(u,h,Io.wk),d=new cQ(c,u,l);return d._Ht(a),d}(t,e,this.rEt,this.aW,this.Lut,this.DWt,this.iZt.useCredentials)}}kXt(){const t=[this.Q3,this.J3].filter(ne).map((t=>t.pw));this.rEt.Tr.CL.uVt(t)}async K9(t,e,i,s){let n;if(await Promise.all(t.map((t=>t.catch(Bt)))),ot(s),await this.dXt(),ot(s),this.sZt=void 0,this.rZt=void 0,this.tEt=!0,i.XBt){n=BQ([this.WHt,this.VHt].filter(ne))}else n=this.Tkt;const r=n.ZL(e),o=this.LB.uy(Mi.zy,s);this.LB.Sb(r,i.tZt),this.oZt&&this.$Ht.length>0&&(this.rEt.Tr.CL.cVt(),this.EXt(this.LB.yR),this.mXt()),await o,this.eEt()}eEt(){const t=this.ZB;if(this.ZR||this.nI||void 0===t)return;const e=this.yR;var i,s;t+this.yR-this.vI.md.maximumOffset<e?null==(i=this.VG)||i.Cn():null==(s=this.VG)||s.SI()}EXt(t){for(const e of this.$Ht)e.DUt(t)||(e.wHt(),e.fHt.kGt()),e.gHt(t)||(e.yHt(),e.fHt.EGt())}cXt(){for(const t of this.$Ht)t.Xw()}dXt(){return Promise.all([this.xDt(),this.xXt(),this.RXt()])}mXt(){this.EDt(),this.IXt(),this.CXt()}async JZt(){this.oZt&&this.$Ht.length>0&&(this.$Ht.forEach((t=>t.wHt())),await this.xDt(),this.EDt(),this.$Ht.forEach((t=>t.cHt.VUt())))}EDt(){if(this.PXt)return;const t=()=>{this.PXt=void 0};this.DXt=new $t,this.DXt.zw(this.cW.Bw),this.PXt=go(this.HDt(this.DXt.Bw),this.DXt).catch(this.cZt).then(t,t)}async xDt(){var t;null==(t=this.DXt)||t.Xw();const e=this.PXt;this.PXt=void 0,e&&await e}async HDt(t){ot(t);const e=this.$Ht;for(;;){const i={stack:[],error:void 0,hasError:!1};try{const s=[],n=this.LB.yR;for(const t of e){const e=t.cHt,i=t.Llt(n);if(e.LIt)s.push(e.wWt());else if(t.pHt(n,i,this.dZ.xj)){const n=e.NUt(i);if(void 0===n){if(e.oLt.jMt.sOt)continue;const t=e.oLt.jMt.Srt;t.length&&t[0].LO>i&&(this.yR=1/0),e.GUt(),e.BUt(i)}else{const[i,s]=n;e.jat(i,s,t.oWt),t.lHt.KGt(i,s)}s.push(e.wWt())}}const r=rs(i,$t.Yw([t]),!1);if(0===s.length){e.every((t=>t.cHt.oCt))||s.push(this.LB.uy(Mi.$y,r.Bw));for(const t of e)s.push(t.lHt.uy(jt.OGt,r.Bw))}await hu(Promise.race(s),r.Bw)}catch(t){i.error=t,i.hasError=!0}finally{ae(i)}}}IXt(){if(this.NXt)return;const t=()=>{this.NXt=void 0};this.MXt=new $t,this.MXt.zw(this.cW.Bw),this.NXt=go(this.LXt(this.MXt.Bw),this.MXt).catch(this.cZt).then(t,t)}async xXt(){var t;null==(t=this.MXt)||t.Xw();const e=this.NXt;this.NXt=void 0,e&&await e}async LXt(t){ot(t);const e=this.$Ht;for(;;){const i=[];for(const t of e){const e=t.cHt,s=t.lHt;if(s.LIt)i.push(s.wWt());else{const t=e.EUt();t?"Nut"===t.pw?(s.$Gt(t),i.push(s.wWt())):"JBt"===t.pw&&(s.jGt(t),i.push(s.wWt())):i.push(e.WUt())}}if(0===i.length)break;await hu(Promise.race(i),t)}}CXt(){if(this.BXt)return;this.OXt=new $t,this.OXt.zw(this.cW.Bw);const t=()=>{this.BXt=void 0};this.BXt=go(this.FXt(this.OXt.Bw),this.OXt).catch(this.cZt).then(t,t)}async RXt(){var t;null==(t=this.OXt)||t.Xw();const e=this.BXt;this.BXt=void 0,e&&await e}async FXt(t){for(;;){const e=this.$Ht;e.forEach((t=>t.Yat()));const i=this.LB.yR,s=[],n=[];for(const t of e){const e=t.lHt;for(const r of t.aHt){const t=r.fWt?s:n;if(r.LIt)t.push(r.wWt());else if(!r.yWt(i)){const i=e.rHt(r.pw);i?"Nut"===i.pw&&i.eOt===this.jHt?(r.Vlt(i),t.push(r.wWt())):"pCt"===i.pw&&i.eOt===this.jHt&&(r._2(i),t.push(r.wWt())):n.push(e.oHt(r.pw))}}}if(0===s.length){if(await this.VXt(e,i,t))continue}if(0===s.length&&0===n.length){e.every((t=>t.aHt.length>0&&t.aHt.every((t=>t.yWt(i)))))&&this.qG.i3();break}await hu(Promise.race([...s,...n]),t)}}async VXt(t,e,i){const s=[],n=[];for(const i of t){const t=i.Llt(e);for(const r of i.aHt){if(!r.fWt)continue;const o=i.lHt.rHt(r.pw);if(void 0!==o){if(o.eOt===this.jHt)return!1;s.push(o)}else{if(i.LIt||i.pHt(e,t,this.dZ.xj)||!r.bWt(e,t))return!1;{const t=r._Wt.oWt;void 0!==t&&n.push(t)}}}}if(0===s.length)return!1;const r=qm(s,(t=>t.eOt)).eOt;if(s.every((t=>"pCt"===t.pw&&t.eOt===r))){const t=Gs(s,(t=>t.LO)).LO,e=[...s,...n],r=await this.WXt(e);this.UXt(r)?(xt.RLt(oc,"Seamless switch from",this.qG.md,"to",r),await this.qG.uJ(r),xt.RLt(oc,"Seamless switch complete.")):await this.GXt(t,r,i),this.jHt=s[0].eOt}else for(const e of t)for(const t of e.aHt){let i=e.lHt.rHt(t.pw);for(;void 0!==i&&("pCt"!==i.pw||i.eOt!==r);)xt.RLt(oc,"Removing append for other discontinuity, expecting "+r,i),e.lHt.SWt(i),i=e.lHt.rHt(t.pw)}return!0}UXt(t){return this.pZt===Pc.YB||this.pZt!==Pc.KB&&this.qG.hJ(t)}async WXt(t){const e=t.map((t=>t.hHt.Urt)),i=e.map((t=>({Ik:t}))),s=Ke(t,(t=>t.hHt.qBt));s.push(...this.rEt.Tr.lVt);let n=await lK(this.iZt.contentProtection,e,s,this.aW,this.iZt.useCredentials);return 0===n.length&&this.qG&&this.qG.md.JG.length>0&&(n=this.qG.md.JG),{pw:zr._W,o4:i,JG:n,g4:this.iZt.useManagedMediaSource}}async GXt(t,e,i){var s;const n=this.qG,r=n.ct,o=this._R.length>0&&this.yR<t;if(o)try{for(xt.RLt(oc,"Marking end of stream and waiting for ended to switch discontinuity."),n.i3();!this.LB.kR&&this.LB.yR<t;)await this.LB.uy([Mi.$y,Mi.xy],i)}catch(t){throw n.z2(),n.e4(r),t}xt.RLt(oc,"Perform hard switch from",null==(s=this.qG)?void 0:s.md,"to",e);try{this.LB.o7(),this.yR<t&&this.LB.Sb(t,!0,!0),this.J3=void 0,this.Q3=void 0,this.kXt(),await this.LB.tr(),this.qG=await this.LB.$n(e),this.s4(),this.GTt(),this.HTt(),this.qG.j3&&(this.J3=new uc(Io.lE,this.qG.j3,this.dZt?this.qgt:void 0,this.fZt?this.VDt:void 0),this.J3.u3(t-1,t)),this.qG.K3&&(this.Q3=new uc(Io.cE,this.qG.K3,this.dZt?this.qgt:void 0,this.fZt?this.VDt:void 0),this.Q3.u3(t-1,t)),this.kXt()}finally{o&&oh(this.LB.AI()),this.LB.h7()}if(this.GHt){const t=void 0!==this.Q3&&void 0===this.mZt?[this.J3,this.Q3]:[this.J3];this.GHt.dHt(t)}this.mZt&&this.mZt.dHt([this.Q3]),xt.RLt(oc,"Hard switch complete.")}lXt(t){return hu(Us(Ke(this.$Ht,(t=>t.aHt.map((t=>t.wWt()))))),t)}qkt(){const t=this.cI,e=this.hI;this.ixt===t&&this.sxt===e||(this.ixt=t,this.sxt=e,this.yo(new P))}async gn(){xt.RN(Ia,"Unloading the player."),this.HXt(),this.OEt(),await this.tr(),this.LB._H=void 0,this.XZt.gn(),await this.hH.gn(),await this.qgt.gn(),await this.VDt.gn(),this.rO.gn(),this.hO.gn(),this.Ul.gn(),this.ZXt.gn(),this.oxt.Ww(),this.DWt.Ww(),this.bZt&&(this.bZt.Ww(),this.bZt=void 0)}async tr(){xt.RN(Ia,"Resetting the player."),this.fn(zt.YMt,this.handleBufferingErrorEvent),this.jHt=-1,this.cW.Xw(),this.q9.Xw(),this.q9=new $t,this.q9.zw(this.cW.Bw),this.rXt.Xw(),this.rXt=new $t,this.rXt.zw(this.cW.Bw);const t=[this.opt,this.Y9,this.uZt].filter(ne);await Promise.all(t.map((t=>t.catch(Bt)))),this.opt=void 0,this.Y9=void 0,this.uZt=void 0,this.WHt=void 0,this.VHt=void 0,this.JHt=void 0,this.MZt=void 0,this.BZt=void 0,this.FZt=void 0,this.VZt=void 0,this.BZt=void 0,this.FZt=void 0,this.VZt=void 0,this.VG=void 0,this.fZ.tr(),this.nXt=[],this.xZt(void 0),this.cXt(),await this.dXt(),this.mZt&&(this.mZt.Ww(),this.mZt=void 0),this.GHt&&(this.GHt.Ww(),this.GHt=void 0),this.GZt&&(this.GZt.Ww(),this.GZt=void 0),this.Q3=void 0,this.J3=void 0,this.qG=void 0,this.rEt&&(this.rEt.Ww(),this.rEt=void 0),this.yZt&&(this.Ul.DG(this.yZt.nt),this.yZt=void 0),await this.hH.tr(),await this.qgt.tr(),await this.VDt.tr(),this.LB.cH(),await this.LB.tr(),this.iZt=void 0,this.oZt=!1,this.n4=ee.fB(),this.sZt=void 0,this.txt=void 0,this.ixt=0,this.sxt=0,this.rZt=void 0,this.tEt=!1,this.M9=!1,As.Og(this.hZt),this.Mkt=!1,this.XXt=!1,this.Ekt=0,this.pZt=Pc.qB,this.ZXt.tr(),this.zXt(),this.yo(new Ks(this.yR,this.tI))}zXt(){for(const t of this.rO.oC)t.gn();for(const t of this.hO.oC)t.gn();for(const t of this.Ul.oC)t.gn();this.rO.tr(),this.hO.tr(),this.Ul.tr(),this.UZt.clear()}qXt(){this.ZXt.yn(CQ,this.Ds),this.ZXt.yn(Zc.BL,this.WB),this.ZXt.yn(Zc.LL,this.YXt),this.ZXt.yn(Zc.PL,this.KXt),this.dZ.yn("vj",this.uxt),this.dZ.yn("wj",this.cxt),this.LB.yn(PQ,this.Ds),this.LB.yn(sn.ua,this.lxt),this.LB.yn(Mi.py,this.handleContentProtectionErrorEvent),this.LB.yn(Mi.Sy,this.jXt),this.LB.yn(Mi.xy,this.Sh),this.LB.yn(Mi.Uy,this.zNt),this.LB.yn(Mi.so,this.QXt),this.LB.yn(Mi.Gy,this.JXt),this.LB.yn(Zc.QI,this.NW),this.LB.yn(Mi.$y,this.d6),this.LB.yn(Mi.qy,this.We),this.LB.yn(Mi.zy,this.pH),this.LB.yn(Mi.Xy,this.$Xt),this.LB.yn(Mi.eb,this.tzt)}HXt(){this.ZXt.fn(CQ,this.Ds),this.ZXt.fn(Zc.BL,this.WB),this.ZXt.fn(Zc.LL,this.YXt),this.ZXt.fn(Zc.PL,this.KXt),this.dZ.fn("vj",this.uxt),this.dZ.fn("wj",this.cxt),this.LB.fn(PQ,this.Ds),this.LB.fn(sn.ua,this.lxt),this.LB.fn(Mi.py,this.handleContentProtectionErrorEvent),this.LB.fn(Mi.Sy,this.jXt),this.LB.fn(Mi.xy,this.Sh),this.LB.fn(Mi.Uy,this.zNt),this.LB.fn(Mi.so,this.QXt),this.LB.fn(Mi.Gy,this.JXt),this.LB.fn(Zc.QI,this.NW),this.LB.fn(Mi.$y,this.d6),this.LB.fn(Mi.qy,this.We),this.LB.fn(Mi.zy,this.pH),this.LB.fn(Mi.Xy,this.$Xt),this.LB.fn(Mi.eb,this.tzt)}constructor(t,e,i,s,n,r,o,h){super(),this.dZ=i,this.fZ=s,this.DWt=n,this.AZt=r,this.UZt=$h(),this.fZt=!0,this.dZt=!0,this.oZt=!1,this.iZt=void 0,this.qG=void 0,this.opt=void 0,this.cW=new $t,this.rEt=void 0,this.BZt=void 0,this.FZt=void 0,this.VZt=void 0,this.ZHt=void 0,this.WHt=void 0,this.VHt=void 0,this.JHt=void 0,this.MZt=void 0,this.nXt=[],this.Q3=void 0,this.J3=void 0,this.mZt=void 0,this.GHt=void 0,this.GZt=void 0,this.bZt=void 0,this.rXt=new $t,this.uZt=void 0,this.q9=new $t,this.Y9=void 0,this.jHt=-1,this.DXt=void 0,this.MXt=void 0,this.OXt=void 0,this.PXt=void 0,this.NXt=void 0,this.BXt=void 0,this.kSt=!0,this.qZt=0,this.zZt=!1,this.zG=hl.YH,this.HG=void 0,this.ZG=void 0,this.n4=ee.fB(),this.ezt=[],this.sZt=void 0,this.nZt=void 0,this.tEt=!1,this.M9=!1,this.txt=void 0,this.ixt=0,this.sxt=0,this.rZt=void 0,this.hZt=0,this.Mkt=!1,this.XXt=!1,this.pZt=Pc.qB,this.XPt=void 0,this.izt=void 0,this.Ekt=0,this.handleContentProtectionErrorEvent=t=>{this.HG=Te(t.errorObject),this.ZG=t.errorObject,this.Ds(t)},this.handleBufferingErrorEvent=t=>{this.PH(new A(Ja.MEDIA_LOAD_ERROR,t.lt.message,t.lt))},this.lxt=t=>{this.PH(_k(t.lt))},this.jXt=()=>{this.DFt();const t=this.ct;t!==this.txt&&(this.txt=t,this.yo(new re(this.txt)))},this.Sh=()=>{this.kR&&this.yo(new Fs(this.yR))},this.zNt=()=>{this.yo(new vl(this.yR))},this.QXt=()=>{this.tkt(),this.yo(new Xt(this.yR))},this.WB=()=>{void 0!==this.izt&&(As.Og(this.izt),this.izt=void 0),this.yo(new ce(this.yR))},this.JXt=()=>{this.yo(new K(this.yR))},this.NW=()=>{this.yo(new au(this.yR,this.tI))},this.d6=()=>{const t=this.cLt;zm(this.ezt,t)||(this.yo(new xj),this.ezt=t),this.yo(new I(this.yR,this.mR))},this.wXt=Jr((t=>{t.bE===Io.lE&&this.UHt()&&oh(this.HHt())}),200),this.yXt=t=>{var e;this.Ekt+=t.pUt;const i=this.rt.V>0?t.bE===Io.lE:t.bE===Io.cE;"Nut"===t.gUt&&i&&oh(this.KZt()),this.yo(new sW(function(t){if(t){if(void 0!==t.nAt){var e,i;const s=t.nAt.Cn+(null!=(i=t.nAt.V)?i:0);return{qu:t.Ix,iut:[null==(e=t.nAt)?void 0:e.Cn,s],AE:!0}}return{qu:t.Ix.toString()||"",AE:!0}}return{qu:"",AE:!0}}(t.uri),(null==(e=this.hLt)?void 0:e.mG)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.bE,t.httpStatusCode,t.pUt))},this.We=()=>{this.yo(new _t(this.yR))},this.pH=()=>{this.yo(new ga(this.yR))},this.$Xt=()=>{this.qkt()},this.tzt=()=>{this.yo(new eh(this.yR,this.dI))},this.YXt=()=>{this.LB.nI?this.yo(new Za(this.yR)):(null!=this.izt||(this.izt=As.Fg((()=>{this.XXt&&(this.XPt=void 0,oh(this.zHt()))}),2500)),this.tkt(),this.yo(new Za(this.yR)))},this.KXt=()=>{this.XXt=!0,this.yo(new ro(this.yR,this.tI))},this.cZt=t=>{Se(t)||so(t)||lA(t)||(this.cXt(),oh(this.dXt()),this.yo(new XY(t)))},this.rWt=()=>{this.DFt()},this.wZt=t=>{oh(this.iXt(t.oLt,this.cW.Bw))},this.Xpt=t=>{if(Se(t))return;const e=t instanceof A?t:new A(Ja.MEDIA_DECODE_ERROR,t.message,t);this.PH(e)},this.onTextTrackChange=t=>{if(!this.ZHt)return;const e=t.Ht,i=this.WZt(e);i&&(e.TE===yh.RC||e.TE===yh.Jn?(oh(this.eXt(i)),this.UZt.forEach((t=>{t!==e&&(t.TE=yh.Ch)}))):this.JHt&&this.JHt===i&&oh(this.gZt(this.WHt,this.VHt,void 0)))},this.retryOfflineRenditionsCallback=async(t,e)=>{this.QHt!==t&&this.bLt!==t&&this.SLt!==t||(await this.rEt.ZVt(t,e),t.jMt.yFt=-1/0)},this.uxt=()=>{this.GTt()},this.cxt=()=>{this.HTt()},this.bXt=t=>{const e=this.ZHt,i=null==e?void 0:e.dOt;if(this.rEt.iWt(t.Urt,t.oLt.jMt),!i&&(this.rEt.sWt(t.Urt,t.oLt.jMt),this.kZt.BLt(),e)){const t=void 0!==this.WHt&&!qt(e.DLt,this.WHt),i=void 0!==this.VHt&&!qt(e.NLt,this.VHt);(t||i)&&this.gZt(t?void 0:this.WHt,i?void 0:this.VHt,this.JHt).catch(Bt)}},this.AXt=t=>{this.kZt.VLt(t.oLt,t.Kdt)},this.SXt=t=>{this.kZt.ULt(t.oLt,t.WGt.uF())},this.TXt=t=>{this.rEt.tWt(t.oLt)},this.Lut=new bX(o),this.LB=t,this.aW=e,this.QG=new ZY(this.dZ.nj),this.$Zt=new zY(this.LB),this.jZt=new iK(this.dZ),this.Zlt=h.retryConfiguration,this.rO=new Nn,this.hO=new Nn,this.kZt=new HY(this,this.dZ,this.rO,this.hO),this.XZt=new ha,this.hH=new Rx(this.LB,this.aW),this.qgt=new wX(this.LB),this.VDt=new wl(this.LB),this.Ul=new Wu([this.XZt,this.hH.Z,this.qgt.Z,this.VDt.Z,this.LB.nt]),this.iH=new Gh(this.aW),this.LB._H=this.iH,this.oxt=new LQ(this,this.LB),this.ZXt=new q(this.oxt,!0),this.qXt()}},MQ=class{async NH(t,e){return!!qh(t.type)&&!t.useNativePlayback}async MH(t){return!!t.aes128||await cT(t,!0)}},LQ=class extends Lx{get tI(){return this.ta.tI}fxt(){this.yo(new au(this.yR,this.tI))}constructor(t,e){super(e),this.ta=t}};function BQ(t){return t.reduce(((t,e)=>t.Sn(e.jMt.iFt)),new ee([0,1/0]))}function OQ(t){const e=Ti(t,(t=>t.QMt)),i=t.filter((t=>t.JMt)),s=As.nw,n=i.map((t=>t.gs)).filter(ne),r=pQ(n,s);return r?Ti(i,(t=>t.gs===r)):e}function FQ(t,e){for(const i of e){const e=t.filter((t=>t.Urt&&t.Urt.$Ct&&Dn(t.Urt.$Ct,i)));if(0!==e.length)return e}}function VQ(t){var e;return null!=(e=OQ(t))?e:t[0]}function WQ(t,e){return t.filter((t=>UQ(t,e)))}function UQ(t,e){const i=e+DQ,s=0===t.NLt.length||t.NLt.some((t=>t.jMt.yFt<As.Bg()-i)),n=0===t.DLt.length||t.DLt.some((t=>t.jMt.yFt<As.Bg()-i));return s&&n}function GQ(t,e){if(!e||e.jMt.sOt)return!1;const i=e.jMt.Srt;return 0!==i.length&&i[0].LO>t}r(),r();var HQ=class{async CWt(t,e,i){try{const s=await crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:i},s,t);return new j(n)}catch(t){throw new A(Ja.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}Ww(){}static vT(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}};r(),r(),r(),r();var ZQ=class extends pe{constructor(t,e){super(t),this.data=e}},XQ=["message","messageerror","error"];r();var zQ=class extends pe{constructor(t){super(sn.ua),this.error=t}},qQ=class extends Bo{get szt(){return this.nzt.Bw.Nw}rzt(t,e){this.szt||(void 0!==this.ozt?this.ozt.rzt(t,e):this.hzt.push({_b:t,azt:e}))}uzt(){this.szt||(this.nzt.Xw(),Pn(this.hzt),void 0!==this.ozt&&this.ozt.uzt())}constructor(t){super(),this.ozt=void 0,this.hzt=[],this.czt=t=>{if(this.szt)t.uzt();else{this.ozt=t,this.ozt.yn(XQ,this.Ds);for(const e of this.hzt)t.rzt(e._b,e.azt);Pn(this.hzt)}},this.lzt=t=>{if(this.szt)return;const e=t instanceof g?t:new g("Could not create Worker.");this.yo(new zQ(e)),this.uzt()},this.nzt=new $t,t(this.nzt.Bw).then(this.czt,this.lzt)}};r(),r();var YQ=class extends Bo{rzt(t,e){e?this.ozt.postMessage(t,e):this.ozt.postMessage(t)}uzt(){this.Bo(),this.ozt.removeEventListener("message",this.dzt),this.ozt.removeEventListener("messageerror",this.fzt),this.ozt.removeEventListener("error",this.j8),this.ozt.terminate()}constructor(t,e){super(),this.dzt=t=>{this.yo(new ZQ("message",t.data))},this.fzt=t=>{this.yo(new ZQ("messageerror",t.data))},this.j8=t=>{null==t.preventDefault||t.preventDefault.call(t);const e=t.error instanceof g?t.error:new g(t.message);this.yo(new zQ(e)),this.uzt()},this.ozt=new Bl(t,e),this.ozt.addEventListener("message",this.dzt),this.ozt.addEventListener("messageerror",this.fzt),this.ozt.addEventListener("error",this.j8)}};r();var KQ=0,jQ=class extends Bo{rzt(t,e){e?this._zt.contentWindow.postMessage({type:"message",data:t},"*",e):this._zt.contentWindow.postMessage({type:"message",data:t},"*")}uzt(){var t;this._zt.removeEventListener("load",this.vzt),self.removeEventListener("message",this.mzt),null==(t=this._zt.contentWindow)||t.postMessage({type:"terminate"},"*"),ft(this._zt)}constructor(t,e){super(),this.vzt=()=>{this._zt.removeEventListener("load",this.vzt),this._zt.contentWindow.postMessage({type:"initialize",id:this.US,script:this.gzt},"*")},this.mzt=t=>{t.origin===this.pzt&&t.data.id===this.US&&("initialized"===t.data.type||("error"===t.data.type?(this.yo(new zQ(new g(t.data.data.message))),this.uzt()):this.yo(new ZQ("message",t.data.data))))},this.US=KQ++,this.gzt=t;const i=As.Ah("iframe.html",e);this._zt=function(t){const e=h.createElement("iframe");return e.width="0",e.height="0",e.style.display="none",e.role="",e.src=t,h.body.appendChild(e),e}(i.href),this.pzt=i.origin,this._zt.addEventListener("load",this.vzt),self.addEventListener("message",this.mzt)}};function QQ(t,e,i){const s=As.Kp(t,e);return new qQ((t=>async function(t,e,i,s){let n;try{return n=new YQ(t,i),await $Q(n,s),n}catch(t){null==n||n.uzt(),Zr(t)}if(JQ&&mb){let e;try{const i=await As.aR.zk({qu:t,gE:So.GET,Xk:$r.wk,Bw:s});e=await i.Tk(s)}catch(t){Zr(t)}if(e){let t;try{const r=mb([e],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new YQ(t,i),await $Q(n,s),n}catch(t){null==n||n.uzt(),Zr(t),JQ=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new jQ(t,e),await $Q(n,s),n}catch(t){throw null==n||n.uzt(),t}}(s,e,i,t)))}var JQ=!0;async function $Q(t,e){const i=await t.uy(["message","error"],e);if("error"===i.type)throw function(t){return new A(Ja.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(i.error);if(!function(t){return wd(t)&&"9.0.0"===t.wzt}(i.data))throw new A(Ja.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (9.0.0).");return i}r();var tJ=function(t){return t.yzt="CWt",t.bzt="iUt",t}({}),eJ=function(t){return t.Azt="Szt",t.Tzt="kzt",t}({}),iJ=class{Ezt(){const t=QQ(this.xzt,this.Rzt,{name:"THEOplayer decrypt worker"});return t.yn("message",this.Izt),t.yn("error",this.Czt),t}CWt(t,e,i){const s=""+ ++this.Pzt,n={Dzt:tJ.yzt,Nzt:s,Mzt:t,Lzt:e,Bzt:i},r=new as;return this.Ozt.set(s,r),null!=this.ozt||(this.ozt=this.Ezt()),this.ozt.rzt(n),r.Bb}Ww(t){void 0===t&&(t=new $),this.Ozt.forEach((e=>e.Lb(t))),this.Ozt.clear(),this.ozt&&(this.ozt.uzt(),this.ozt=void 0)}constructor(t){this.ozt=void 0,this.Pzt=0,this.Ozt=_u(),this.Izt=t=>{const e=t.data,i=e.Fzt,s=this.Ozt.get(i);if(s)if(this.Ozt.delete(i),e.Vzt===eJ.Azt)s.Mb(e.Wzt);else if(e.Vzt===eJ.Tzt){const t=e.Uzt,i=e.Gzt?new g(e.Gzt):void 0,n=new A(Ja.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",i);s.Lb(n)}},this.Czt=t=>{const e=new A(Ja.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.Ww(e)},this.Rzt=t;try{this.xzt=As.Kp("theoplayer.d.js",t)}catch(t){throw new A(Ja.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function sJ(t){return HQ.vT()?new HQ:new iJ(t)}function nJ(t){const e=Ti(t.boxes,rN);if(!e)return;const i=Ti(e.boxes,oN);return i?i.handlerType:void 0}function rJ(t){const e=new gy;return e.boxes.push(...t.boxes),e}function oJ(t){const e=new vc;return e.boxes.push(...t.boxes),e}r(),r(),r(),r();var hJ=8;function aJ(t,e){const i=function(t){const e=new Xw;return e.boxes.push(...t.boxes),e}(t),s=cJ(e);for(let t=0;t<i.boxes.length;t++){const n=i.boxes[t];if(n===e)i.boxes[t]=new ow(new j(e.getSize()-hJ));else if(hN(n)){const e=n,r=Lr(e.boxes,(t=>t instanceof Dw&&t.trackId===s));if(r>=0){const s=e.boxes[r],n=oJ(e);n.boxes[r]=new ow(new j(s.getSize()-hJ)),i.boxes[t]=n}}}return i}function uJ(t,e){const i=function(t){const e=new ey;return e.boxes.push(...t.boxes),e}(t);for(let t=0;t<i.boxes.length;t++){const s=i.boxes[t];if(cN(s)){const n=Ti(s.boxes,lN);n&&n.trackId===e&&(i.boxes[t]=new ow(new j(s.getSize()-hJ)))}}return i}function cJ(t){return Ti(t.boxes,nN).trackId}function lJ(t,e,i,s){const n=Ti(t.boxes,lN),r=i.oV(e).OF();let o=fo.ZERO;for(const e of t.boxes){if(e instanceof pc){o=uf(e.baseMediaDecodeTime,r),e.baseMediaDecodeTime=e.baseMediaDecodeTime.subtract(o);break}if(e instanceof Yw){o=uf(fo.fromNumber(e.baseMediaDecodeTime),r),e.baseMediaDecodeTime-=o.toNumber();break}}if(o.isZero())return;const h=Ti(t.boxes,dN);if(void 0!==h&&h.samples.length>0){const t=h.samples;if(!h.flags.sampleDurationPresent){h.flags.sampleDurationPresent=!0;const e=null!=s?s:n.defaultSampleDuration;for(const i of t)i.duration=e}t[0].duration+=o.toNumber(),h.samples=t}}r();var dJ="Mp4Transmuxer",fJ=class extends nQ{JGt(t,e){ot(e);const i=t.oLt,s=BN(na(t.JBt.Zk.Zk));if(!s)throw new g("Mp4Transmuxer - Unable to parse "+i.pw+" MP4 initializer.");this.w2=s;const n=function(t){let e,i;for(const s of t.Z)e||(e=s.e1),i||(i=s.t1);if(e||i)return{$Ct:e,ePt:i,_Bt:void 0};return}(s);n&&this.eHt(i,n);const r=function(t){for(const e of t.Z)if(void 0!==e.i1)return e.i1;return}(s);void 0!==r&&this.iHt(i,r);const o=function(t){var e;const i=Sy(t),s=Ti(i.boxes,iN),n=s.boxes.filter(sN),r=Ti(n,(t=>nJ(t)===mw.AUDIO)),o=Ti(n,(t=>nJ(t)===mw.VIDEO)),h={$Ct:{bN:r?cJ(r):void 0},ePt:{bN:o?cJ(o):void 0}},a=null==(e=Ti(s.boxes,hN))?void 0:e.boxes.filter(aN);var u,c;const l=a?{$Ct:null!=(u=Ti(a,(t=>t.trackId===h.$Ct.bN)))?u:void 0,ePt:null!=(c=Ti(a,(t=>t.trackId===h.ePt.bN)))?c:void 0}:void 0;var d,f;if(l&&(h.$Ct.zM=null==(d=l.$Ct)?void 0:d.defaultSampleDuration,h.ePt.zM=null==(f=l.ePt)?void 0:f.defaultSampleDuration),!r||!o)return{$Ct:r?t:void 0,ePt:o?t:void 0,GV:h};const _=rJ(i),v=rJ(i),m=i.boxes.indexOf(s);_.boxes[m]=aJ(s,o),v.boxes[m]=aJ(s,r);const g=_.serialize().join(),p=v.serialize().join();return{$Ct:g,ePt:p,GV:h}}(t.JBt.Zk.Zk);if(this.Hzt=o.GV,o.ePt){const e=Ti(s.Z,(t=>t.bN===o.GV.ePt.bN)),i={pw:"pCt",Zk:{pw:Ut.QQ,Zk:o.ePt},pat:Io.lE,eOt:t.eOt,hHt:{Urt:'video/mp4; codecs="'+e.t1+'"',qBt:t.qBt},LO:t.LO,oLt:t.oLt,EWt:t.JBt.EWt};this.yGt(i)}if(o.$Ct){const e=Ti(s.Z,(t=>t.bN===o.GV.$Ct.bN)),i={pw:"pCt",Zk:{pw:Ut.QQ,Zk:o.$Ct},pat:Io.cE,eOt:t.eOt,hHt:{Urt:'audio/mp4; codecs="'+e.e1+'"',qBt:t.qBt},LO:t.LO,oLt:t.oLt,EWt:t.JBt.EWt};this.yGt(i)}return Promise.resolve()}async tHt(t,e){ot(e);const i=t.Nut.EWt;xt.RN(dJ,"Transmuxing fMP4: "+Qe(i.Ryt));const s=t.Nut.Zk,n=_J(s.Zk,this.w2),r=Ym(n.map((t=>t.oit)),$k);if(void 0!==r&&(i.hit=r,this.nHt(t.oLt)),!this._Vt.GFt(t.eOt)){const s=Uh.cV(i.LO);if(n.length>0){const e=Ym(n.map((t=>t.Zzt)),$k);for(const n of this.XGt)this._Vt.tVt(t.eOt,n,e,s,vJ(i),!1);this.nHt(t.oLt)}this._Vt.GFt(t.eOt)||await hu(this._Vt.ZFt(t.eOt),e)}const o=this._Vt.jFt(t.eOt),h=i.hit?this._Vt.QFt(i.hit,i).uF():i.LO,a=rQ(i,h);var u;const c={DGt:a,NGt:oQ(i,a),LO:h,ct:null!=(u=i.ct)?u:0,PV:o.uF(),eOt:t.eOt,oLt:t.oLt,EWt:t.Nut.EWt},l=function(t,e){if(void 0===e.$Ct.bN)return{$Ct:void 0,ePt:t};if(void 0===e.ePt.bN)return{$Ct:t,ePt:void 0};const i=Sy(t),s=rJ(i),n=rJ(i);for(let t=0;t<i.boxes.length;t++){const r=i.boxes[t];uN(r)&&(s.boxes[t]=uJ(r,e.ePt.bN),n.boxes[t]=uJ(r,e.$Ct.bN))}const r=s.serialize().join(),o=n.serialize().join();return{$Ct:r,ePt:o}}(s.Zk,this.Hzt);if(l.ePt){var d;const e=this.Hzt.ePt.bN,s=Ti(this.w2.Z,(t=>t.bN===e)),o=Ti(n,(t=>t.bN===e)),h=this.Xzt(l.ePt,s,o,null==(d=this.Hzt)?void 0:d.ePt.zM,i);this.zzt=s,this.sHt(t.oLt,i,o.oit.yF(r));const a=la({pw:"Nut",Zk:{pw:Ut.QQ,Zk:h},pat:Io.lE},c);this.yGt(a)}if(l.$Ct){const t=la({pw:"Nut",Zk:{pw:Ut.QQ,Zk:l.$Ct},pat:Io.cE},c);this.yGt(t)}this.qzt=i,this.Yzt=n}Xzt(t,e,i,s,n){if(!vJ(n))return t;if(!this.qzt||!this.zzt||!this.Yzt)return t;const r=this.zzt.bN,o=Ti(this.Yzt,(t=>t.bN===r)),h=this._Vt.QFt(o.Kzt,this.qzt),a=this._Vt.QFt(i.oit,n).yF(h).oV(e.lN);if(a._F(Uh.xF))return t;if(a.cF(Uh.cV(.5)))return t;const u=zu(n)?n:n.ROt;return xt.RLt(dJ,"Stretching first video frame of segment #"+u.OBt+" to fill gap of "+a.uF()+"s"),function(t,e,i,s){const n=Sy(t),r=Ti(n.boxes,uN);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof Ph&&lJ(t,e,i,s);const n=r.getSize();if(n!==t){const e=n-t;for(const t of r.boxes)t instanceof Ph&&fN(t,e)}}return n.serialize().join()}(t,e.lN,a,s)}constructor(...t){super(...t),this.w2=void 0,this.Hzt=void 0,this.qzt=void 0,this.Yzt=void 0,this.zzt=void 0}};function _J(t,e){const i=dn(jo.qD(na(t)),Mt.eD);if(!i)throw new g("Mp4Transmuxer - Unable to parse segment or part.");return function(t,e){const i=[];for(const n of t.Z){if(!n.sL||0===n.iL.length||0===n.iL[0].uL.length)continue;const t=n.WD.bN,r=Ti(e.Z,(e=>e.bN===t));let o=0,h=1/0,a=0;const u=n.WD.zM||0;for(const t of n.iL)for(const e of t.uL){const t=e.cL||0,i=o+t;var s;o+=null!=(s=e.ct)?s:u;const n=o+t;i<h&&(h=i),n>a&&(a=n)}const c=Uh.TF(n.sL.sL,r.lN);i.push({bN:t,Zzt:c,oit:c.yO(Uh.kF(h,r.lN)),jzt:c.yO(Uh.kF(o,r.lN)),Kzt:c.yO(Uh.kF(a,r.lN))})}return i}(i,e)}function vJ(t){return zu(t)?t.QBt:0===t.COt&&t.ROt.QBt}var mJ="MpegtsTransmuxer",gJ=class extends fJ{JGt(t,e){return super.JGt(t,e)}KGt(t,e){if(super.KGt(t,e),this.QE.Qzt())return;var i;const s=null!=(i=null==e?void 0:e.Ryt)?i:t.Ryt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.Ix)&&this.QE.Jzt()}$zt(t){let e;return t.oLt===this.tqt&&this.eqt.has(t.eOt)?e=this.eqt.get(t.eOt):(e=EQ(t.Nut.Zk.Zk),this.tqt=t.oLt,this.eqt.set(t.eOt,e)),e}async tHt(t,e){ot(e);const i=this.$zt(t),s=t.Nut;if(i!==kQ.MHt&&i!==kQ.LHt)return super.tHt(t,e);if(s.EWt.qBt.some(wJ))throw new A(Ja.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.QE.Jzt();let r;i===kQ.MHt?(xt.RN(mJ,"Transmuxing MPEG-TS: "+Qe(s.EWt.Ryt)),r=await n.iqt({data:s.Zk.Zk,metadata:this.sqt})):(xt.RN(mJ,"Transmuxing raw audio: "+Qe(s.EWt.Ryt)),r=await n.nqt({data:s.Zk.Zk,metadata:this.sqt})),ot(e),this.eHt(t.oLt,{$Ct:r.metadata.audio_codec,ePt:r.metadata.video_codec,_Bt:void 0}),r.metadata.video_frame_rate&&this.iHt(t.oLt,r.metadata.video_frame_rate);const o=yJ(r.metadata.first_decode_timestamp),h=yJ(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?yJ(r.metadata.first_video_presentation_timestamp):void 0;if(s.EWt.hit=h,this.nHt(t.oLt),void 0!==a&&this.sHt(t.oLt,s.EWt,function(t,e){let i=t.yF(e);return i.mF(Uh.xF)&&(i=i.yO(iE())),i}(a,h)),!this._Vt.GFt(t.eOt)){const i=Uh.cV(s.EWt.LO);for(const e of this.XGt)this._Vt.tVt(t.eOt,e,o,i,vJ(s.EWt),!0);this.nHt(t.oLt),this._Vt.GFt(t.eOt)||await hu(this._Vt.ZFt(t.eOt),e)}const u=this._Vt.$Ft(o,s.EWt);this.sqt=r.metadata;const c=this._Vt.QFt(h,s.EWt).uF(),l=rQ(s.EWt,c);var d;const f={DGt:l,NGt:oQ(s.EWt,l),LO:c,ct:null!=(d=s.EWt.ct)?d:0,PV:u.uF(),eOt:t.eOt,oLt:t.oLt,EWt:s.EWt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.XGt){const e=la({pw:"Nut",Zk:void 0,pat:t},f);this.yGt(e)}return}const _=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.rqt||this.oqt!==t.eOt||!_e(this.rqt,r.data.audio_init))){const e=this._Vt.QFt(s.EWt.hit,s.EWt).uF(),i={pw:"pCt",Zk:{pw:Ut.QQ,Zk:r.data.audio_init},pat:Io.cE,eOt:t.eOt,hHt:{Urt:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',qBt:s.EWt.qBt},LO:e,oLt:t.oLt,EWt:s.EWt};this.rqt=r.data.audio_init,this.oqt=t.eOt,this.yGt(i)}const e=la({pw:"Nut",Zk:{pw:Ut.QQ,Zk:r.data.audio_media},pat:Io.cE},f);this.yGt(e)}else if(t.Nut.EWt.EOt&&qt(this.XGt,Io.cE)){const t=la({pw:"Nut",Zk:void 0,pat:Io.cE},f);this.yGt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.hqt||this.aqt!==t.eOt||!_e(this.hqt,r.data.video_init))){const e=this._Vt.QFt(s.EWt.hit,s.EWt).uF(),i={pw:"pCt",Zk:{pw:Ut.QQ,Zk:r.data.video_init},pat:Io.lE,eOt:t.eOt,hHt:{Urt:'video/mp4; codecs="'+r.metadata.video_codec+'"',qBt:s.EWt.qBt},LO:e,oLt:t.oLt,EWt:s.EWt};this.hqt=r.data.video_init,this.aqt=t.eOt,this.uqt=BN(na(r.data.video_init)),this.yGt(i)}const e=this.uqt.Z[0],i=_J(r.data.video_media,this.uqt)[0],n=this.Xzt(r.data.video_media,e,i,void 0,s.EWt);this.zzt=e;const o=la({pw:"Nut",Zk:{pw:Ut.QQ,Zk:n},pat:Io.lE},f);this.yGt(o),_.push(i)}else if(t.Nut.EWt.EOt&&qt(this.XGt,Io.lE)){const t=la({pw:"Nut",Zk:void 0,pat:Io.lE},f);this.yGt(t)}this.qzt=s.EWt,this.Yzt=_}Xw(){this.rqt=void 0,this.hqt=void 0,this.oqt=-1,this.aqt=-1,super.Xw()}constructor(t,e,i,s){super(e,i,s),this.sqt=void 0,this.rqt=void 0,this.hqt=void 0,this.uqt=void 0,this.oqt=-1,this.aqt=-1,this.tqt=void 0,this.eqt=$h(),this.QE=t}},pJ=class{vTt(t,e,i){return new gJ(this,t,e,i)}};function wJ(t){return t.gE===Rt.eBt}function yJ(t){return Uh.TF(fo.fromBits(t.low,t.high),t.base)}r(),r();var bJ=function(t){return t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4",t}({}),AJ=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=Z.vm;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(Da("AGFzbQEAAAA="))}catch(t){return!1}}();return AJ=()=>t,t};var SJ=class{iqt(t){return this.cqt(bJ.MPEGTS_TO_FMP4,t)}nqt(t){return this.cqt(bJ.RAW_AUDIO_TO_FMP4,t)}Ezt(){const t=QQ(this.xzt,this.Rzt,{name:"THEOplayer transmux worker"});return t.yn("message",this.Izt),t.yn("error",this.Czt),t}cqt(t,e){const i=++this.Pzt,s={type:t,id:i,input:e},n=new as;return this.Ozt.set(i,n),this.ozt.rzt(s),n.Bb}Ww(t){void 0===t&&(t=new $),this.Ozt.forEach((e=>e.Lb(t))),this.Ozt.clear(),this.ozt.uzt()}constructor(t){this.Pzt=0,this.Ozt=$h(),this.Izt=t=>{const e=t.data;if(void 0!==e.requestId){const t=this.Ozt.get(e.requestId);if(!t)return;this.Ozt.delete(e.requestId),e.success?t.Mb(e.output):t.Lb(new A(e.errorCode,e.error))}else e.success||this.Ww(new A(e.errorCode,e.error))},this.Czt=t=>{const e=new A(Ja.MEDIA_DECODE_ERROR,t.error.message,t.error);this.Ww(e)},this.Rzt=t;const e=AJ()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.xzt=As.Kp(e,t)}catch(t){throw new A(Ja.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.ozt=this.Ezt()}},TJ=class extends pJ{Qzt(){return void 0!==this.ozt}Jzt(){var t;return null!=(t=this.ozt)?t:this.ozt=new SJ(this.lqt)}Ww(){this.ozt&&(this.ozt.Ww(),this.ozt=void 0)}constructor(t){super(),this.lqt=t,this.ozt=void 0}},kJ=class{uit(){return new TJ(this.lqt)}constructor(t){this.lqt=t}},EJ=class extends NQ{wI(){return this.LB.wI()}get gI(){return this.LB.gI}set gI(t){this.LB.gI=t}async gn(){var t;await super.gn(),null==(t=this.vxt)||t.gn()}constructor(t,e,i,s,n,r,o,h){super(t,e,i,s,n,r,o,h),Z.jm&&(this.vxt=new xV(this))}},xJ=class extends EJ{async gn(){await super.gn(),await this.mH.vH(this.LB)}constructor(t,e,i,s,n,r,o,h){const a=new ct(t);super(a.DH(Io.lE),e,i,s,n,r,o,h),this.mH=a}},RJ=class extends MQ{async NH(t,e){return!!Lf(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(Z.Ka||Z.Eg))&&super.NH(t,e))}async MH(t){return!(t.clearkey&&!t.fairplay&&Z.jm)&&super.MH(t)}};O(new class extends RJ{nP(t,e,i,s,n,r,o){return new xJ(e,i,n,r,sJ(s.libraryLocation),new kJ(s.libraryLocation),new iV(Qa.Lg.krt,Qa.Lg.Trt,Qa.Lg.Srt,Qa.Lg.xrt),s)}LH(){return!0}constructor(...t){super(...t),this.BH=ti.HC}}),xt.Rt=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)},r(),r(),r(),r();var IJ=class{nrt(t,e){return Promise.resolve(!1)}ort(t,e){return Promise.resolve(void 0)}trt(t){return Promise.resolve(void 0)}TQ(t){return Promise.resolve(void 0)}},CJ=class extends Bo{dqt(){var t;return null==(t=this.fqt)?void 0:t.jMt}Cn(){oh(Si((()=>this._qt(this.OT.Bw)),this.OT.Bw))}async _qt(t){await this.rEt.BVt(t),this.vqt&&(this.mqt(this.vqt.ji,this.vqt.Ti),this.vqt=void 0),this.E6=!0}gqt(t,e){this.E6?this.mqt(t,e):this.vqt={ji:t,Ti:e}}mqt(t,e){const i=this.pqt(t,e),s=null==i?void 0:i.NLt[0];s!==this.fqt&&(this.wqt(),void 0!==s&&(this.fqt=s,this.yqt=new Dj(this.rEt,s),this.yqt.UWt()))}wqt(){this.fqt=void 0,this.yqt&&(this.yqt.Ww(),this.yqt=void 0)}pqt(t,e){const i=Ti(this.rEt.Tr.PLt,(i=>void 0!==i.HCt&&i.HCt.ji===t&&i.HCt.Ti===e));return null!=i?i:this.rEt.Tr.PLt[0]}gn(){this.Bo(),this.OT.Xw(),this.OT.Ww(),this.wqt(),this.rEt.Ww()}constructor(t,e,i){super(),this.fqt=void 0,this.yqt=void 0,this.vqt=void 0,this.OT=new $t,this.bqt=()=>{this.yo(new Ml)},this.wc=t,this.rEt=new bj(i,new IJ,t.useCredentials,t.src,t.liveOffset),this.rEt.yn(Mi.Oy,this.Ds),this.E6=!1}};r();var PJ=class extends Je{get ht(){return this.c9.ht}get _R(){return this.c9._R}get mR(){return this.c9.mR}set mR(t){this.c9.mR=t}get bt(){return this.c9.bt}get yR(){return this.c9.yR}set yR(t){this.c9.yR=t}AR(t,e){this.yR=t}get ct(){return this.c9.ct}get kR(){return this.c9.kR}get RR(){return this.c9.RR}get PR(){return this.c9.PR}get lt(){return this.c9.lt}get NR(){return this.c9.NR}get LR(){return this.c9.LR}get FR(){return this.c9.FR}set FR(t){this.c9.FR=t}get GR(){return this.c9.GR}get ZR(){return this.c9.ZR}get zR(){return this.c9.zR}set zR(t){this.c9.zR=t}get KR(){return this.c9.KR}get QR(){return this.c9.QR}set QR(t){this.c9.QR=t}get tI(){return this.c9.tI}get iI(){return this.c9.iI}get nI(){return this.c9.nI}get YG(){return this.c9.YG}get nt(){return this.c9.nt}get hI(){return this.c9.hI}get rt(){return this.c9.rt}get cI(){return this.c9.cI}get dI(){return this.c9.dI}set dI(t){this.c9.dI=t}get vI(){return this.c9.vI}get gI(){return this.c9.gI}set gI(t){this.c9.gI=t}get jG(){return this.c9.jG}get ZB(){}TI(){return this.c9.TI()}pI(){return this.c9.pI()}_a(){return this.c9._a()}DI(t){return this.c9.DI(t)}wI(){return this.c9.wI()}be(){return this.c9.be()}xI(){return this.c9.xI()}RI(){return this.c9.RI()}bI(){return this.c9.bI()}AI(){return this.c9.AI()}tr(){return this.c9.tr()}ka(t,e,i){return this.c9.ka(t,e,i)}ge(){return this.c9.ge()}kI(){return this.c9.kI()}EI(){return this.c9.EI()}gn(){this.Bo();for(const t of CI)this.c9.fn(t,this.Ds);return this.c9.gn()}constructor(t){super(),this.c9=t;for(const t of CI)this.c9.yn(t,this.Ds)}},DJ=class extends PJ{async ka(t,e,i){await super.ka(t,e,i),t.hlsDateRange&&this.Syt(t,e)}Syt(t,e){this.Aqt=new CJ(t,e,this.Sqt),this.Aqt.yn(Mi.Oy,this.handleManifestUpdate),this.Aqt.Cn()}tr(){return this.nWt&&(this.nt.it(this.nWt),this.c8.it(this.nWt),this.nWt.gn(),this.nWt=void 0,this.Tqt=!1),this.Aqt&&(this.Aqt.gn(),this.Aqt=void 0),this.c8.tr(),super.tr()}gn(){return this.fn(Mi.Xy,this.$Xt),this.Aqt&&(this.Aqt.gn(),this.Aqt=void 0),this.c8.gn(),super.gn()}constructor(t,e,i){super(t),this.Aqt=void 0,this.Tqt=!1,this.nWt=void 0,this.handleManifestUpdate=()=>{const t=this.Aqt.dqt();if(t){const e=this.YG;if(e){const i=e.getTime();let s=this.nWt;s||(s=new QK,this.nWt=s),s.Yn(t.iOt,(t=>(t.getTime()-i)/1e3)),!this.Tqt&&s.L.V>0&&(this.nt.tt(s),this.c8.tt(s),this.Tqt=!0)}}},this.$Xt=()=>{this.Aqt&&this.Aqt.gqt(this.cI,this.hI)},this.Sqt=e,this.c8=new iu(this),this.yn(Mi.Xy,this.$Xt)}};!function(t){SI.OH().FH(t)}((function(t,e,i){return new DJ(t,e,i)})),r(),r(),r(),r();var Ji=class extends pt{get name(){return"CastError"}constructor(t,e=""){super("An error occurred while casting."),this.errorCode=t,this.description=e}};async function NJ(t){BJ()||await async function(t){if(null==t?void 0:t.Nw)return Promise.reject(new $);const{Bb:e,Mb:i,Lb:n}=function(){let t,e;return{Bb:new Promise(((i,s)=>{t=i,e=s})),Mb:t,Lb:e}}(),r=s.__onGCastApiAvailable,o=()=>{s.__onGCastApiAvailable=r,n(new $)};return s.__onGCastApiAvailable=(e,h)=>{e?i():n(new g(h)),null==t||t.Mw(o),s.__onGCastApiAvailable=r,r&&r(e,h)},null==t||t.Lw(o),e}(t),LJ()||await on(100,t),LJ()||(As.Mp('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await MJ())}var MJ=gl((()=>function(t){return new Promise(((e,i)=>{const s=h.createElement("script");s.onload=()=>e(),s.onerror=t=>i((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch((()=>{throw new Ji("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))));function LJ(){return Boolean("undefined"!=typeof cast&&cast.framework)}function BJ(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function OJ(t,e,i,s){if(ne(e))for(const i of w.keys(e)){if("type"===i||"images"===i)continue;const s=e[i];ne(s)&&(t[i]=s)}!function(t,e,i,s){if(!ne(i)&&!ne(null==e?void 0:e.images))return;t.images=[],i&&t.images.push(new s.Image(i));if(null==e?void 0:e.images)if(Kt(e.images))t.images.push(new s.Image(e.images));else if(rl(e.images))for(const i of e.images){let e;var n,r;if(Kt(i))e=new s.Image(i);else e=new s.Image(i.src),e.height=null!=(n=i.height)?n:null,e.width=null!=(r=i.width)?r:null;t.images.push(e)}}(t,e,i,s)}function FJ(t,e,i){return void 0===i&&(i=chrome),function(t,e,i){switch(null==t?void 0:t.type){case"movie":{const s=new i.MovieMediaMetadata;return OJ(s,t,e,i),s}case"audio":{const s=new i.MusicTrackMediaMetadata;return OJ(s,t,e,i),!ne(s.artist)&&ne(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new i.TvShowMediaMetadata;return OJ(s,t,e,i),!ne(s.title)&&ne(t.episodeTitle)&&(s.title=t.episodeTitle),!ne(s.season)&&ne(t.seasonNumber)&&(s.season=t.seasonNumber),!ne(s.episode)&&ne(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new i.GenericMediaMetadata;return OJ(s,t,e,i),s}}}(t,e,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(i))}function VJ(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function WJ(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return Ti(t.items,(e=>e.itemId===t.currentItemId))}r(),r(),r(),r(),r();var UJ="urn:x-cast:com.theoplayer.cast";r(),r();var GJ=function(t){return t.kqt="theoplayer_receiver_info",t.Eqt="theoplayer_trackpropertychange",t.xqt="theoplayer_propertychange",t}({});r();var HJ=function(t){return t.SKIP_AD="SKIP_AD",t}({});r();function Nr(t){h.createElement("img").src=t}r(),r(),r();var ZJ=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function XJ(t){if(!Kt(t))return;const e=t.match(ZJ);return e?3600*x(e[1],10)+60*x(e[2],10)+Number(e[3])+(Number(e[4])||0)/1e3:void 0}function zJ(t){if(void 0===t)return;const e=t.match(/^([1-9]?\d|100)%$/);return e?x(e[1])/100:void 0}function kt(t,e){return"vmap"===t.type||!ne(t.type)&&!ne(e)}function qJ(t,e){return"vast"===t.type||!ne(t.type)&&ne(e)}r(),r(),r();var YJ=class{},KJ=class extends YJ{get Rqt(){return this.Dc}Iqt(){return null!=this.Cqt||(this.Cqt=Ke(this.Dc,(t=>t.Iqt()))),this.Cqt}constructor(t){super(),this.Dc=t.sort(((t,e)=>t.JM-e.JM))}};r(),r();var jJ=class extends YJ{get o(){return this.Pqt}get JM(){return this.Dqt}get Nqt(){return this.Mqt}constructor(t,e){super(),this.Pqt=t,this.Dqt=e,this.Mqt=!1}},QJ=class extends jJ{get Lqt(){return this.Bqt}get Oqt(){return this.Fqt}get Vqt(){return this.Wqt}get Uqt(){return this.Gqt}get lt(){return this.HG}Iqt(){if(void 0===this.Hqt){let t,e,i,s=[];for(const n of this.Bqt)n.Zqt&&(t=n.Zqt),n.Xqt&&(e=n.Xqt),n.zqt&&(i=n.zqt),s=s.concat(n.universalAdIds);this.Hqt={Uqt:this.Uqt,Zqt:t,qqt:e,zqt:i,lt:this.lt,Yqt:s}}return[this.Hqt]}constructor(t,e,i,s,n,r,o){super(t,e),this.Fqt=i,this.Wqt=s,this.Gqt=n,this.Bqt=r,this.HG=o}};r(),r();var JJ=class{get Kqt(){return this.jqt}get Qqt(){return this.Jqt}constructor(t,e){this.jqt=t,this.Jqt=e}},$J=class{get $qt(){return this.tYt}get eYt(){return this.iYt}get sYt(){return this.nYt}get rYt(){return this.oYt}get Yl(){return this.hYt}set Yl(t){this.hYt=t}get aYt(){return this.uYt}get cYt(){return this.lYt}dYt(){this.lYt=!0}get Oqt(){return this.Fqt}constructor(t,e,i,s,n,r){this.tYt=t,this.iYt=e,this.nYt=i,this.oYt=s,this.lYt=!1,this.uYt=n,this.Fqt=r}};r();var t$=function(t){return t.fYt="all",t._Yt="any",t.YH="none",t}({});var e$=class{get vYt(){return this.mYt}get gYt(){return this.pYt}constructor(t,e){this.mYt=t,this.pYt=e}},i$=class{get o(){return this.US}get ji(){return this.HA}get Ti(){return this.ZA}get wYt(){return this.yYt}get bYt(){return this.AYt}get SYt(){return this.TYt}get kYt(){return this.EYt}get xYt(){return this.RYt}get IYt(){return this.CYt}get PYt(){return this.DYt}get $qt(){return this.tYt}get eYt(){return this.iYt}get sYt(){return this.nYt}get NYt(){return this.MYt}get Qqt(){return this.LYt}get BYt(){return this.OYt}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d,f,_,v){this.HA=t,this.ZA=e,this.US=i,this.yYt=s,this.AYt=n,this.TYt=r,this.EYt=o,this.RYt=h,this.CYt=a,this.DYt=u,this.tYt=c,this.iYt=l,this.nYt=d,this.MYt=f,this.LYt=_,this.OYt=v}};r();var s$=class{get id(){return this.US}get uri(){return this.NOt}constructor(t,e){this.US=t,this.NOt=e}},Ar=class{get FYt(){return this.VYt}get WYt(){return this.UYt}get GYt(){return this.HYt}get ZYt(){return this.XYt}constructor(t,e,i,s){this.VYt=t,this.UYt=e,this.HYt=i,this.XYt=s}},n$=class extends jJ{get Uqt(){return this.Gqt}get zYt(){return this.qYt}get YYt(){return this.KYt}get Lqt(){return this.Bqt}get jYt(){return this.QYt}get JYt(){return this.$Yt}get lt(){return this.HG}Iqt(){return void 0===this.qYt?[]:(null!=this.Cqt||(this.Cqt=this.qYt.Iqt().map((t=>this.tKt(t)))),this.Cqt)}tKt(t){let e,i,s;for(const t of this.Lqt)t.Zqt&&(e=t.Zqt),t.Xqt&&(i=t.Xqt),t.zqt&&(s=t.zqt);const n=t.Uqt.concat(this.Uqt);let r=t.Zqt;if(e&&t.Zqt){const i=new Ar(t.Zqt.eKt.FYt,t.Zqt.eKt.WYt,t.Zqt.eKt.GYt.concat(e.eKt.GYt),t.Zqt.eKt.ZYt.concat(e.eKt.ZYt));r=t.Zqt,r.eKt=i,r.Qqt=r.Qqt.concat(e.Qqt)}let o=t.qqt;if(i&&i.Kqt){var h,a;const s=[];for(const t of i.Kqt)s.concat(t.rYt.GYt);const n=[];var u,c;for(const i of null!=(u=null==(h=t.qqt)?void 0:h.Kqt)?u:[]){var l,d,f;const r=new Ar(i.rYt.FYt,i.rYt.WYt,i.rYt.GYt.concat(s),(null!=(d=null==(l=t.Zqt)?void 0:l.eKt.ZYt)?d:[]).concat(null!=(f=null==e?void 0:e.eKt.ZYt)?f:[]));n.push(new $J(i.$qt,i.eYt,i.sYt,r,i.aYt,i.Oqt))}o=new JJ(n,(null!=(c=null==(a=t.qqt)?void 0:a.Qqt)?c:[]).concat(i.Qqt))}let _=t.zqt;if(_){var v;let e=_.vYt;var m,g;s&&s.vYt&&(e=s.vYt),_=new e$(e,(null!=(m=null==(v=t.zqt)?void 0:v.gYt)?m:[]).concat(null!=(g=null==s?void 0:s.gYt)?g:[]))}let p=t.lt;return this.lt&&(p=this.lt),{Uqt:n,Zqt:r,qqt:o,zqt:_,lt:p,Yqt:t.Yqt}}constructor(t,e,i,s,n,r,o,h,a){super(t,e),this.Gqt=i,this.qYt=s,this.KYt=n,this.Bqt=r,this.QYt=o,this.$Yt=h,this.HG=a}};r();var r$=class{get o(){return this.US}get iKt(){return this.sKt}get nKt(){return this.rKt}get xYt(){return this.RYt}get Zqt(){return this.oKt}get Xqt(){return this.hKt}get zqt(){return this.aKt}get universalAdIds(){return this.uKt}constructor(t,e,i,s,n,r,o,h){this.US=t,this.sKt=e,this.rKt=i,this.RYt=s,this.oKt=n,this.hKt=r,this.aKt=o,this.uKt=h}};r();var o$=class{get ct(){return this.cKt}get lKt(){return this.dKt}get Qqt(){return this.Jqt}set Qqt(t){this.Jqt=t}set eKt(t){this.fKt=t}get eKt(){return this.fKt}get _Kt(){return this.vKt}set _Kt(t){this.vKt=t}get mKt(){return this.lYt}get Yl(){return this.hYt}set Yl(t){this.hYt=t}get aYt(){return this.uYt}get Oqt(){return this.Fqt}dYt(){this.lYt=!0}get gKt(){return this.pKt}set gKt(t){this.pKt=t}get wKt(){return this.yKt}constructor(t,e,i,s,n,r,o,h){this.cKt=t,this.dKt=e,this.Jqt=i,this.fKt=s,this.vKt=n,this.lYt=!1,this.uYt=r,this.Fqt=o,this.yKt=h}};function H(t,e){return a$(t)&&t.getAttribute(e)||void 0}function yc(t,e){return h$(t,e,void 0,!1)}function h$(t,e,i,s){return e===(t.localName?t.localName:t.nodeName)&&(s&&i?i===t.namespaceURI:!i||!t.namespaceURI||i===t.namespaceURI)}function ds(t,e){const i=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);a$(n)&&yc(n,e)&&i.push(n)}return i}function a$(t){return t&&1===t.nodeType}function u$(t,e){const i=(new DOMParser).parseFromString(t,e);if(!i||i.getElementsByTagName("parsererror").length>0)throw new g('Invalid document for MIME type "'+e+'"');return i}function c$(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function l$(t){return"data:application/xml,"+encodeURIComponent(t)}r(),r();var lc=function(t){return t.bKt="mute",t.AKt="unmute",t.Uy="pause",t.SKt="resume",t.TKt="rewind",t.kKt="skip",t.EKt="playerExpand",t.xKt="playerCollapse",t.RKt="fullscreen",t.IKt="exitFullscreen",t.CKt="expand",t.COLLAPSE="collapse",t.sTt="start",t.PKt="firstQuartile",t.DKt="thirdQuartile",t.NKt="midpoint",t.MKt="complete",t.LKt="acceptInvitationLinear",t.BKt="acceptInvitation",t.OKt="timeSpentViewing",t.FKt="otherAdInteraction",t.Gy="progress",t.VKt="creativeView",t.WKt="adExpand",t.UKt="adCollapse",t.GKt="minimize",t.HKt="close",t.ZKt="closeLinear",t.XKt="overlayViewDuration",t.zKt="breakStart",t.qKt="breakEnd",t.ua="error",t}({});function d$(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}var f$=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function _$(t){return void 0!==t&&-1!==f$.indexOf(t)}var v$=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function m$(t){return void 0!==t&&-1!==v$.indexOf(t)}var g$=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function p$(t){return void 0!==t&&-1!==g$.indexOf(t)}function w$(t,e){if(void 0===t||""===t||void 0===e)return;let i=t.match(/^(\d+):(\d+):(\d+)$/);return i?C(i[1]||"0")+60*C(i[2]||"0")+C(i[3]||"0"):(i=t.match(/^(100|[1-9]\d|\d)%$/),i?C(i[1]||"0")*e/100:void 0)}var y$=class{get LX(){return this.YKt}get tc(){return this.KKt}get eventURL(){return this.jKt}constructor(t,e,i){this.YKt=t,this.KKt=e,this.jKt=i}};r();var b$=class{get QKt(){return this.JKt}constructor(t){this.JKt=t}},A$=class extends b${get FYt(){return this.VYt}get BYt(){return this.OYt}get $Kt(){return this.tjt}constructor(t,e,i,s){super(t),this.tjt=e,this.VYt=i,this.OYt=s}},S$=class extends b${constructor(t){super(t)}},T$=class extends b${constructor(t){super(t)}};r();var k$={ejt:{Ob:100,_b:"XML parsing error."},ijt:{Ob:303,_b:"Empty or invalid VAST error."},sjt:{Ob:400,_b:"General linear error"},njt:{Ob:403,_b:"Unsupported MIME-type or missing mediafiles error"},rjt:{Ob:500,_b:"General nonlinear error"},uX:{Ob:900,_b:"Network error"}},E$=class{get ojt(){return this.hjt}ajt(t){if(!this.ojt)return;const e=this.ojt.replace(/\[ERRORCODE]/,""+t.Ob);Nr(e)}constructor(t){this.hjt=t}};r();var uo=class extends pt{get ujt(){return this.cjt}get ljt(){var t;return null!=(t=this.djt)?t:900}constructor(t,e,i,s){super(i||e&&x$[e]||t,s),this.cjt=t,this.djt=e,this.fjt=i}},$c=function(t){return t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general",t}({}),Hs=function(t){return t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED",t}({}),x$={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function R$(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case nl.HC:case nl.ZC:case nl.GC:return!0;default:return!1}}function I$(t){const e=Gd();return!!(R$(t)||t&&e&&(null==e?void 0:e.canPlayType)&&e.canPlayType(t))||(Po("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function C$(t,e){for(const i of e){new E$(i).ajt(t)}}function Po(t){0}r(),r();var P$=class{get _jt(){return this.vjt}get mjt(){return this.gjt}constructor(t,e){this.vjt=t,this.gjt=e}},D$=class t{async pjt(e,i){if(kt(e.sources,e.timeOffset)){const s=await t.wjt(e.sources.src,i),n=s&&s.documentElement;if(!n)throw new uo($c.NETWORK,Hs.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(yc(n,"VMAP"))return await this.yjt(n,e,i);if(yc(n,"VAST")){const t=await this.bjt(n,i,!1);if(t){const i=new O$("",!0,!0,t);return[new L$("start",i,N$.Ajt,"",[],!1,!0,e)]}return[]}throw new uo($c.GENERAL,Hs.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(qJ(e.sources,e.timeOffset))return[new B$(String(e.timeOffset),e,i)];throw new uo($c.GENERAL,Hs.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async Sjt(e,i,s,n){let r;void 0===n&&(n=[]);try{r=await t.wjt(e,i)}catch(t){throw C$(t instanceof uo&&t.ljt===Hs.VAST_MALFORMED_RESPONSE?k$.ijt:k$.uX,n),t}const o=r&&r.documentElement;if(o&&yc(o,"VAST"))return await this.bjt(o,i,s,n);o&&yc(o,"VMAP")&&lt("Received VMAP ad when expecting VAST. Please set the type of your ad source in the configuration, or make sure to not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included.")}async Tjt(t,e,i,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new uo($c.GENERAL,Hs.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.Sjt(t.sources.src,s,!1),o=new O$("",!0,!0,r),h=new L$(e,o,N$.Ajt,"",[],!1,!0,t);return h.kjt=i,h}static async requestSuccessOnly(t,e){let i;try{i=await e.zk(t)}catch(t){throw new uo($c.NETWORK,Hs.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!wh(i))throw new uo($c.NETWORK,Hs.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return i}static async wjt(t,e){const i=new Fe({qu:t,Xk:$r.wk,gE:So.GET}),s=await this.requestSuccessOnly(i,e);try{return function(t){return u$(t,"text/xml")}(await s.Zk())}catch(t){throw new uo($c.NETWORK,Hs.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async bjt(t,e,i,s){void 0===s&&(s=[]);const n=[],r=[],o=[];if(!t||!yc(t,"VAST")){if(C$(k$.ijt,s),i)throw new uo($c.PARSING,Hs.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new uo($c.PARSING,Hs.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}if(0!==ds(t,"Ad").length){for(const i of ds(t,"Ad"))try{const t=await this.Ejt(i,e,s);0===t.JM?n.push(t):r.push(t)}catch(t){o.push(t)}if(0===n.length&&0===r.length&&o.length>0)throw o[0];if(1===n.length&&0===r.length)return n[0];if(0===n.length&&0!==r.length)return new KJ(r);if(n.length>0||r.length>0)return new KJ(r.concat(n))}if(0!==ds(t,"Error").length)for(const e of ds(t,"Error")){Po(k$.ijt._b);const t=e.textContent;t&&s.push(t.trim())}if(C$(k$.ijt,s),i)throw new uo($c.PARSING,Hs.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new uo($c.PARSING,Hs.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}async yjt(t,e,i){const s=[],n=ds(t,"AdBreak");for(const t of n)try{const n=await this.xjt(t,e,i);n&&s.push(n)}catch(t){As.Np(t)}return s}async Ejt(e,i,s){const n=H(e,"id")||"";let r=Ea(H(e,"sequence"));r||(r=0);const o=ds(e,"InLine"),h=ds(e,"Wrapper");if(0!==h.length)return await this.Rjt(h[0],n,r,i,s);if(0!==o.length)return t.Ijt(o[0],n,r,s);throw new uo($c.PARSING,Hs.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static Ijt(e,i,s,n){const r=ds(e,"Error")[0];let o;r&&r.textContent&&(o=r.textContent,n.push(o));const h=ds(e,"AdSystem")[0];let a,u="";h&&(u=h.textContent||u);const c=ds(e,"AdTitle")[0];c&&(a=c.textContent||void 0);const l=[];for(const t of ds(e,"Impression"))t.textContent&&l.push(t.textContent);const d=t.Cjt(ds(e,"Creatives")[0],u,n);return new QJ(i,s,u,a,l,d,new E$(o))}async Rjt(e,i,s,n,r){const o=ds(e,"Error")[0];let h="";o&&o.textContent&&(h=o.textContent,r.push(h));const a=ds(e,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of ds(e,"Impression"))t.textContent&&c.push(t.textContent);const l=ds(e,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.Sjt(d,n,!0,r),_=ds(e,"Creatives")[0];let v=[];_&&(v=t.Pjt(_,u,r));let m=$e(H(e,"followAdditionalWrappers"));m||(m=!0);let g=$e(H(e,"allowMultipleAds"));g||(g=!0);let p=$e(H(e,"fallbackOnNoAd"));return p||(p=!1),new n$(i,s,c,f,m,v,g,p,new E$(h))}static Pjt(e,i,s){const n=[];for(const r of ds(e,"Creative")){let e=H(r,"id");e||(e="");let o=Ea(H(r,"sequence"));o||(o=0);let h=H(r,"adId");h||(h="");const a=ds(r,"Linear")[0];let u;a&&(u=t.Djt(a,"wrapper",e,i,s));const c=ds(r,"NonLinearAds")[0];let l,d;if(c)try{d=t.Njt(c,e,i),l=d}catch(t){}const f=ds(r,"CompanionAds")[0];let _;f&&(_=t.Mjt(f)),n.push(new r$(e,h,o,"",u,l,_,[]))}return n}static Cjt(e,i,s){const n=[];for(const r of ds(e,"Creative")){let e=H(r,"id");e||(e="");let o=Ea(H(r,"sequence"));o||(o=0);let h=H(r,"adId");h||(h="");let a=H(r,"apiFramework");a||(a="");const u=ds(r,"Linear")[0];let c;if(u)try{c=t.Djt(u,"inline",e,i,s)}catch(t){}if(0===(null==c?void 0:c.ct))throw new uo($c.PARSING,Hs.VAST_UNEXPECTED_DURATION_ERROR,"The VAST response had a duration of 0 seconds, so skipping the ad(s).");const l=ds(r,"NonLinearAds")[0];let d,f;if(l)try{f=t.Njt(l,e,i),d=f}catch(t){}const _=ds(r,"CompanionAds")[0];let v;_&&(v=t.Mjt(_));const m=ds(r,"UniversalAdId"),g=t.parseUniversalAdIds(m);n.push(new r$(e,h,o,a,c,d,v,g))}return n}static Djt(e,i,s,n,r){const o=ds(e,"Duration")[0];let h=0;if(o)h=XJ(o.textContent)||0;else if(!o&&"inline"===i)throw new uo($c.PARSING,Hs.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=H(e,"skipoffset");let u=-1;if(a){let t=XJ(a);if(void 0===t&&a.indexOf("%")>-1){const e=_.abs(Number(a.replace(/(?![0-9])./g,"")))/100;S(e)||(t=h*e)}void 0!==t&&(u=t)}const c=ds(e,"MediaFiles")[0];let l=[],d=[];if(c&&(l=function(t,e){const i=[];for(const s of ds(t,"MediaFile")){const t=H(s,"delivery"),n=H(s,"type");if(!n){Po();continue}if(!e(n))continue;let r=Ea(H(s,"width")),o=Ea(H(s,"height"));r||(Po(),r=0),o||(Po(),o=0);const h={delivery:t,type:n,width:r,height:o,contentURL:""+s.textContent};i.push(h)}return i}(c,I$),d=function(t){const e=ds(t,"ClosedCaptionFiles");if(0===e.length)return[];const i=e[0],s=[];for(const t of ds(i,"ClosedCaptionFile")){const e=H(t,"type");e||Po();const i=H(t,"language");i||Po();const n={type:null!=e?e:"",language:null!=i?i:"",contentURL:(""+t.textContent).trim()};s.push(n)}return s}(c)),"inline"===i&&(!c||0===l.length))throw C$(k$.njt,r),new uo($c.PARSING,Hs.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const f=ds(e,"TrackingEvents")[0];let v=[];f&&(v=t.Ljt(f,_$,"linear"));const m=ds(e,"VideoClicks")[0],g=t.Bjt(m);return new o$(h,l,v,g,u,s,n,d)}static Bjt(e){if(!e)return new Ar("","",[],[]);const i=ds(e,"ClickThrough")[0];let s,n="";i&&(s=i.textContent||void 0,n=H(i,"id")||"");const r=t.Ojt(ds(e,"ClickTracking")),o=t.Ojt(ds(e,"CustomClick"));return new Ar(s,n,r,o)}static Ojt(t){const e=[];for(const i of t){const t=i.textContent;if(!t)continue;const s=H(i,"id")||"";e.push(new s$(s,t))}return e}static Ljt(t,e,i){const s=[];for(const n of ds(t,"Tracking")){const r=H(n,"event");if(!e(r)){Po();continue}let o="";"linear"===i&&(o=H(t,"offset")||"0");const h=n.textContent;h&&s.push(new y$(r,o,h))}return s}static Njt(e,i,s){const n=[];for(const r of ds(e,"NonLinear")){const e=ds(r,"NonLinearClickThrough")[0];let o;e&&(o=e.textContent||void 0);const h=t.Ojt(ds(r,"NonLinearClickTracking")),a=ds(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=H(a,"creativeType"),e=a.textContent||"",i=ds(a.parentNode,"NonLinearClickThrough")[0];let s="";i&&(s=i.textContent||""),u=new A$(e,t,s,"")}const c=t.Fjt(r),l=t.parseHtmlResource(r);if(!u&&!c&&!l){Po();continue}const d=new Ar(o,"",h,[]);n.push(new $J(u,c,l,d,i,s))}if(0===n.length)throw new uo($c.PARSING,Hs.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=ds(e,"TrackingEvents")[0];let o=[];return r&&(o=t.Ljt(r,m$,"nonlinear")),new JJ(n,o)}static parseUniversalAdIds(t){const e=[];for(const r of t){var i;const t=null!=(i=H(r,"idRegistry"))?i:"";var s,n;const o=null!=(n=null!=(s=H(r,"idValue"))?s:r.textContent)?n:"";e.push(new P$(t,o))}return e}static Mjt(e){let i=H(e,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(i)||(i=t$.YH);const s=[];for(const i of ds(e,"Companion")){let e=Ea(H(i,"width")),n=Ea(H(i,"height")),r=H(i,"id"),o=Ea(H(i,"assetWidth")),h=Ea(H(i,"assetHeight")),a=Ea(H(i,"expandedWidth")),u=Ea(H(i,"rxpandedHeight")),c=H(i,"apiFramework"),l=H(i,"adSlotId"),d=Ea(H(i,"pxratio"));const f=ds(i,"AltText")[0];let _=f?f.textContent:"";e||(Po(),e=0),n||(Po(),n=0),r||(r=""),o||(o=0),h||(h=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),_||(_="");const v=t.Vjt(i),m=t.Fjt(i),g=t.parseHtmlResource(i),p=ds(i,"TrackingEvents")[0];let w=[];p&&(w=t.Ljt(p,p$,"companion"));const y=ds(i,"CompanionClickThrough")[0];let b;y&&(b=y.textContent||void 0);const A=t.Ojt(ds(i,"CompanionClickTracking"));(v||m||g)&&s.push(new i$(e,n,r,o,h,a,u,c,l,d,v,m,g,new Ar(b,"",A,[]),w,_))}return new e$(i,s)}static Vjt(t){const e=ds(t,"StaticResource")[0];let i;if(e&&e.parentNode){let t=H(e,"creativeType");t||(t="");const s=e.textContent,n=ds(e.parentNode,"AltText")[0],r=ds(e.parentNode,"CompanionClickThrough")[0];let o,h="";n&&(h=n.textContent||""),r&&(o=r.textContent||void 0),s&&(i=new A$(s,t,o,h))}return i}static Fjt(t){const e=ds(t,"IFrameResource")[0];let i;if(e){const t=e.textContent||"";i=new S$(t)}return i}static parseHtmlResource(t){const e=ds(t,"HTMLResource")[0];let i;if(e){const t=e.textContent||"";i=new T$(t)}return i}async xjt(e,i,s){const n=H(e,"timeOffset")||"0",r=H(e,"breakType")||N$.Qk;let o=H(e,"breakId"),h=$e(H(e,"repeatAfter"));if(void 0===o&&(o=""),void 0===h&&(h=!1),!(void 0!==M$.Wjt(n)))throw new uo($c.PARSING,Hs.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=ds(e,"AdSource")[0],u=ds(e,"TrackingEvents")[0];let c=[];u&&(c=t.Ljt(u,d$,"vmap"));let l=H(a,"id");l||(l="");let d=$e(H(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=$e(H(a,"followRedirects"));f||(f=!0);const _=ds(a,"AdTagURI")[0];let v="";const m=ds(a,"VASTAdData")[0];if(!_||!_.textContent){if(m){if(m.firstElementChild&&h$(m.firstElementChild,"VAST")){const t=await this.bjt(m.firstElementChild,s,!1);if(t){const e=new O$(l,d,f,t);return new L$(n,e,r,o,c,h,!1,i)}return}throw new uo($c.PARSING,Hs.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new uo($c.PARSING,Hs.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{v=_.textContent;const t=eu(i);return t.sources.src=v,new B$(n,t,s)}catch(t){return}}},N$=function(t){return t.Qk="",t.Ajt="linear",t.Ujt="nonlinear",t.Gjt="display",t}({}),M$=class{static Hjt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static Zjt(t){}static Xjt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static zjt(t){const e=t.split(":");let i=0;return i+=3600*Number(e[0]),i+=60*Number(e[1]),i+=Number(e[2]),i}static qjt(t){if(t<=0)return"00:00:00.000";const e=_.floor(t),i=t-e;return this.Yjt(e/3600,2)+":"+this.Yjt(e/60%60,2)+":"+this.Yjt(e%60,2)+"."+this.Yjt(1e3*i,3)}static Yjt(t,e){return("00"+_.floor(t)).slice(-e)}static Kjt(t,e){const i=this.Wjt(t);if(0===i)switch(t){case"start":return 0;case"end":return-1}else{if(2===i)return zJ(t)*e;if(1===i)return XJ(t);if(3===i)return this.Xjt(t);if(4===i){const e=Number(t);if(!S(e)&&e>=-1)return e}}}static Wjt(t){return"start"===t||"end"===t?0:void 0!==XJ(t.toString())?1:void 0!==zJ(t.toString())?2:void 0!==this.Zjt(t.toString())?3:S(Number(t))?void 0:4}},L$=class{get jjt(){return this.Qjt.integration}get Jjt(){return this.$jt}get ZBt(){return this.tQt}get _Kt(){return this.vKt}set _Kt(t){this.vKt=t}get Qqt(){return this.LYt}get eQt(){return this.iQt}get sQt(){return this.nQt}get ant(){return this.Qjt}get rQt(){return this.kjt.sd}get W(){return!0}$n(){return Promise.resolve()}get kjt(){return this.oQt}set kjt(t){this.oQt=t}constructor(t,e,i,s,n,r,o,h){this.vKt=-1,this.$jt=e,this.tQt=t,this.hQt=i,this.iQt=s,this.nQt=r,this.LYt=n,this.aQt=o,this.Qjt=h}},B$=class{get jjt(){return this.hYt.jjt}get Jjt(){return this.hYt.Jjt}get ZBt(){return this.hYt.ZBt}get _Kt(){return this.hYt._Kt}set _Kt(t){this.hYt._Kt=t}get Qqt(){return this.hYt.Qqt}get eQt(){return this.hYt.eQt}get sQt(){return this.hYt.sQt}get ant(){return this.hYt.ant}get rQt(){return this.hYt.rQt}get W(){return this.HE}$n(){var t;return null!=(t=this.uQt)?t:this.uQt=this.zE()}async zE(){const t=new D$;this.hYt=await t.Tjt(this.ant,this.ZBt,this.kjt,this.aW),this.HE=!0}get kjt(){return this.hYt.kjt}set kjt(t){this.hYt.kjt=t}constructor(t,e,i){this.HE=!1,this.aW=i,this.hYt=new L$(t,void 0,"","",[],!1,!1,e)}},O$=class{get o(){return this.US}get jYt(){return this.cQt}get lQt(){return this.dQt}get Rqt(){return this.fQt}constructor(t,e,i,s){this.US=t,this.cQt=e,this.fQt=s,this.dQt=i}};function F$(t,e){let i;if(t.vastAdsRequest&&(i=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return l$(t.adsResponse);return}(t.vastAdsRequest)),!i){const e=function(t){const e=t.contentUrl||t.contentId;if(!e)return;const i=t.contentType||"video/mp4",s=MT(i)||qh(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+M$.qjt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+M$.qjt(t.whenSkippable)+'"':"",o='<MediaFile delivery="'+s+'" type="'+i+'">'+c$(e)+"</MediaFile>",h=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+c$(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+o+"</MediaFiles>"+h+"</Linear>",u=t.title?"<AdTitle>"+c$(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);e&&(i=l$(e))}const s=t.customData;if(i){const n={integration:null==s?void 0:s.integration,sources:{src:i,type:"vast"},timeOffset:e};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}var V$=function(t){return t._Qt="error",t.vQt="sourceupdate",t}({}),W$=class extends pe{constructor(t){super("error"),this.lt=t}},U$=class extends pe{constructor(t,e){super("sourceupdate"),this.bt=t,this.kc=e}},G$=class extends Bo{get gN(){return this.mQt}gQt(t){this.pQt.gQt(t)}wQt(t){this.pQt.wQt(t)}yQt(t){this.pQt.yQt(t)}bQt(t){this.pQt.bQt(t)}AQt(t){this.mQt.addUpdateListener(t)}SQt(t){this.mQt.removeUpdateListener(t)}TQt(){const t=new as,e=new chrome.cast.media.GetStatusRequest;return this.mQt.getStatus(e,(()=>{t.Mb({bt:this.wR(),kc:this.Ya()})}),(e=>t.Lb(e))),t.Bb}wR(){var t;return null==(t=this.mQt.customData)?void 0:t.currentSource}Ya(){var t;let e;if(null==(t=this.ONt.kQt())?void 0:t.version){var i;e=null==(i=this.mQt.customData)?void 0:i.sourceDescription}else{var s;const t=null==(s=WJ(this.mQt))?void 0:s.customData;(function(t){return V(t)&&t.theoplayer_version>=1&&ne(t.streamStart)&&ne(t.isLive)&&ne(t.sourceDescription)})(t)&&(e=t.sourceDescription),e||(e=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:H$(t)}}(this.mQt.media))}return e}bI(){const t=new chrome.cast.media.PauseRequest;this.mQt.pause(t,Bt,this.EQt)}SI(){const t=new chrome.cast.media.StopRequest;this.mQt.stop(t,Bt,this.EQt)}AI(){const t=new chrome.cast.media.PlayRequest;this.mQt.play(t,Bt,this.EQt)}Sb(t,e){const i=new chrome.cast.media.SeekRequest;return i.currentTime=t,i.resumeState=e?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,e)=>{this.mQt.seek(i,t,(t=>{var i;e(new Ji(VJ(t.code),null!=(i=t.description)?i:void 0))}))}))}YR(t){this.pQt.jet(UJ,function(t){return{type:GJ.xqt,properties:{playbackRate:t}}}(t)).catch(this.xQt)}RQt(t){const e=new chrome.cast.media.EditTracksInfoRequest(t);this.mQt.editTracksInfo(e,Bt,this.EQt)}IQt(){return this.mQt.getEstimatedTime()}CQt(){return this.mQt.getEstimatedBreakClipTime()}PQt(){return this.mQt.getEstimatedBreakTime()}DQt(){this.pQt.jet("urn:x-cast:com.google.cast.media",{type:HJ.SKIP_AD,requestId:this.NQt++,mediaSessionId:this.mQt.mediaSessionId}).catch(this.xQt)}gn(){this.Bo()}constructor(t,e,i){super(e),this.NQt=0,this.xQt=t=>{this.yo(new W$(t))},this.EQt=t=>{var e;const i=new Ji(VJ(t.code),null!=(e=t.description)?e:void 0);this.xQt(i)},this.ONt=t,this.pQt=e,this.mQt=i}};function H$(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?Ke(t.breaks,(e=>function(t,e){const i=[];if(t.isWatched)return i;for(const s of t.breakClipIds){const n=Ti(e,(t=>t.id===s));if(n){const e=F$(n,t.position);e&&i.push(e)}}return i}(e,t.breakClips))):[]}r();var Z$=class{MQt(t,e){this.ONt.addMessageListener(t,e)}LQt(t,e){this.ONt.removeMessageListener(t,e)}jet(t,e){return new Promise(((i,s)=>{this.ONt.sendMessage(t,e,i,(t=>{var e;s(new Ji(VJ(t.code),null!=(e=t.description)?e:void 0))}))}))}gn(){}constructor(t){this.ONt=t}};function X$(t){return"vmap"===t||"adrule"===t}function z$(t){if(t)return Kt(t)&&""!==t?{src:xe(t),type:void 0}:function(t){return V(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:xe(t.src),type:q$(t.type)}:void 0}function q$(t){if(Kt(t)){const e=t.toLowerCase();switch(e){case"vast":case"vmap":case"adrule":return e;default:return void lt("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||lt("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function jc(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return ZJ.test(t)}(t))return M$.zjt(t);if(Y$(t))return t}return Number(t)>=0?Number(t):void 0}}function Y$(t){return new RegExp(/^\d{1,2}%$/).test(t)}function K$(t){const e=[],i=(t,s)=>{if(rl(s))for(let e=0,n=s.length;e<n;e++){const n=V(s[e])&&s[e]?String(e):"";i(t+"["+encodeURIComponent(n)+"]",s[e])}else if(V(s))for(const e of w.keys(s))i(t+"["+encodeURIComponent(e)+"]",s[e]);else((t,i)=>{e.push(t+"="+encodeURIComponent(null!=i?i:""))})(t,String(s))};for(const e of w.keys(t))i(encodeURIComponent(e),t[e]);return e.join("&")}r(),r(),r();var j$=function(t){return t.kqt="receiver_info",t.sBt="event",t.BQt="propertychange",t.Eqt="trackevent",t}({}),Q$=class{OQt(t){let e;try{e=JSON.parse(t)}catch(t){0}return e}gQt(t){this.FQt.push(t)}wQt(t){we(this.FQt,t)}yQt(t){this.VQt.push(t)}bQt(t){we(this.VQt,t)}WQt(t){this.UQt=t}jet(t,e){return this.GQt.jet(t,e)}gn(){this.GQt.LQt(UJ,this.HQt),Pn(this.VQt),Pn(this.FQt),this.UQt=void 0}constructor(t){this.FQt=[],this.VQt=[],this.HQt=(t,e)=>{const i=this.OQt(e);if(i)if(i.type===j$.BQt)for(const t of this.FQt)for(const e of w.keys(i.properties))t(e,i.properties[e]);else if(i.type===j$.sBt)for(const t of this.VQt)t(i.event);else i.type===j$.Eqt&&this.UQt&&i.event.trackState&&this.UQt(i.event.trackId,i.event.trackState.targetQualityIds)},this.GQt=t,this.GQt.MQt(UJ,this.HQt)}};r(),r();var Ju=function(t){return t.ZQt="medialoadedchange",t.eb="volumechange",t._Qt="casterror",t.XQt="playererror",t.zQt="targetqualitychanged",t.qQt="receiverinfochanged",t}({}),J$=class extends pe{constructor(){super("medialoadedchange")}},$$=class extends pe{constructor(t,e){super("volumechange"),this.dI=t,this.FR=e}},t0=class extends pe{constructor(t){super("casterror"),this.lt=t}},e0=class extends pe{constructor(t){super("playererror"),this.lt=t}},i0=class extends pe{constructor(t,e){super("targetqualitychanged"),this.bN=t,this.YQt=e}},s0=class extends pe{constructor(){super("receiverinfochanged")}},n0=class extends Bo{KQt(t,e,i){this.pQt.jet(UJ,function(t,e,i){return{type:GJ.Eqt,trackID:t,trackType:e,properties:{targetQuality:i}}}(t,e,i)).catch(this.xQt)}jQt(){this.GQt.MQt(UJ,this.QQt),this.pQt.jet(UJ,{type:GJ.kqt}).catch(Bt)}kQt(){return this.JQt}$Qt(){return this.ONt.getSessionObj()}tJt(t){!this.eJt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.eJt=new G$(this,this.pQt,t),this.iJt(),this.yo(new J$),this.eJt.AQt(this.sJt))}nJt(){return this.eJt}async rJt(t){const e=function(t){const e=function(t,e,i,s){const[n,r]=function(t){for(const i of t.sources)if(Cn(i)){const t=i.src;if(t){var e;const s=null!=(e=i.type)?e:Tu(t);if(r0(s))return[t,s]}}var i,s;return[null!=(i=AC(t))?i:"",null!=(s=yC(t))?s:""]}(t),o=new chrome.cast.media.MediaInfo(n,r);return o.metadata=FJ(t.metadata,t.poster),o.streamType=s,function(t,e,i){const s=[],n=[];let r,o=0,h=0;for(const t of e){const e=z$(t.sources);if(e)if(kt(e,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=e.src;else if(qJ(e,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=M$.Kjt(r,i))?u:0,d=void 0!==c?M$.Kjt(c,i):void 0,f=new chrome.cast.media.BreakClip("bc"+h++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=e.src,f.whenSkippable=d,f.customData={integration:t.integration};let _=Ti(n,(t=>t.position===l));void 0===_&&(_=new chrome.cast.media.Break("b"+o++,[],l),n.push(_)),_.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(o,e,i),o}(t.oJt,t.Vc,t.ct,t.s0),i=new chrome.cast.media.LoadRequest(e);return i.autoplay=!0,i.currentTime=t.yR,i.customData=t.hJt,i}(t);let i;try{i=await this.ONt.loadMedia(e)}catch(t){i=t}if(i)throw new Ji(VJ(i))}UR(t){this.$Qt().setReceiverMuted(t,Bt,this.aJt)}_I(t){this.$Qt().setReceiverVolumeLevel(t,Bt,this.aJt)}uJt(){return this.$Qt().receiver.friendlyName}gn(){this.Bo(),this.ONt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.cJt),this.$Qt().removeUpdateListener(this.iJt),this.GQt.LQt(UJ,this.QQt),this.pQt.gn(),this.GQt.gn()}constructor(t){super(),this.JQt=void 0,this.xQt=t=>{this.yo(new t0(t))},this.lJt=(t,e)=>{"error"===t&&this.yo(new e0(e))},this.dJt=(t,e)=>{this.yo(new i0(t,e))},this.QQt=(t,e)=>{const i=JSON.parse(e);i.type===j$.kqt&&(this.JQt=i.info,this.yo(new s0))},this.iJt=()=>{const t=this.$Qt(),{level:e,muted:i}=t.receiver.volume;this.yo(new $$(null!=e?e:void 0,null!=i?i:void 0))},this.cJt=()=>this.tJt(this.ONt.getMediaSession()),this.sJt=t=>{var e;t||(null==(e=this.eJt)||e.SQt(this.sJt),this.eJt=void 0,this.yo(new J$))},this.aJt=t=>{var e;const i=new Ji(VJ(t.code),null!=(e=t.description)?e:void 0);this.xQt(i)},this.ONt=t,this.ONt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.cJt),this.GQt=new Z$(t.getSessionObj()),this.pQt=new Q$(this.GQt),this.pQt.gQt(this.lJt),this.pQt.WQt(this.dJt),this.$Qt().addUpdateListener(this.iJt),this.iJt(),this.jQt();const e=this.ONt.getMediaSession();e&&this.tJt(e)}};function r0(t){switch(t){case nl.HC:case nl.GC:case nl.ZC:case nl.XC:return!0}return!1}var o0=function(t){return t.fJt="statechange",t}({}),h0=class extends pe{constructor(t){super("statechange"),this.Rft=t}};r(),r(),r(),r();var a0=class extends Bo{Tst(){return this.Dc}vR(){return ee.fB()}bR(){return this.nZ+this._Jt}fst(){return this.bR()}gR(){}_d(){return this.IA}ER(){return this.T4}xR(){}XR(){return this.hZ}vJt(){}qR(){return this.aZ}YR(t){this.aZ!==t&&(this.aZ=t,this.yo(new Nu(this.ta.yR,t)))}eI(){return gs.jB}jR(){return ee.fB()}sI(){return ee.fB()}rI(){return!1}lR(){return this.rO}uI(){return this.hO}oI(){return this.Ul}RQt(t){}lI(){return this.mJt}aI(){return this.gJt}AI(){this.hZ=!1}bI(){this.hZ=!0}Sb(t){this.nZ=t-this._Jt}pJt(){return this._Jt}wJt(t){this._Jt=t}jst(t){this.Dc.jst(t)}SI(){}gn(){this.Bo(),this.rO.gn(),this.hO.gn(),this.Ul.gn(),this.Dc.gn()}constructor(t,e,i,s,n,r,o,h,a){super(),this.ta=t,this._Jt=0,this.rO=new Nn,this.hO=new Nn,this.Ul=new ha,this.Dc=new Ue,this._Jt=e,this.nZ=i-e,this.IA=s,this.T4=n,this.hZ=r,this.aZ=o,this.mJt=h,this.gJt=a}};r(),r(),r(),r();var Vo=function(t){return t.yJt="ccmodechangerequest",t.bJt="cctargetqualitychangerequest",t.AJt="cctrackchangerequest",t}({}),u0=class extends pe{constructor(t,e,i){super(Vo.yJt),this.track=t,this.trackId=e,this.mode=i}};r();var c0=function(t){return t.wk="TEXT",t.cE="AUDIO",t.lE="VIDEO",t}({}),l0=function(t){return t.qV="SUBTITLES",t.YV="CAPTIONS",t.KV="DESCRIPTIONS",t.Fn="CHAPTERS",t.jV="METADATA",t}({});function d0(t){return"AUDIO"===t.type}function f0(t){return"VIDEO"===t.type}function _0(t){return"TEXT"===t.type}var v0=class extends Bo{get ga(){return this.Za||(this.Za=Jh(this)),this.Za}get kh(){return this.kO}set kh(t){t!==this.kO&&(this.kO=t,this.yo(new Qu(this)))}get q(){return this.G4}get L(){return this.H4}get TE(){return this.qo}set TE(t){const e=fu(t);this.qo!==e&&(this.qo=e,this.SJt!==e&&this.yo(new u0(this,this.TC,e)),this.yo(new Bc(this)))}get TJt(){return this.SJt}set TJt(t){const e=fu(t),i=this.qo!==e;this.qo=e,this.SJt=e,i&&this.yo(new Bc(this))}Z4(t){return Ti(this.H4.oC,(e=>e.o===t))}DC(t){this.TE=t}kJt(t){}gn(){}tr(){}constructor(t){super(),this.Za=void 0;const e=t.customData;this.TC=Number(t.trackId)||0,this.o=""+(e&&e.id||this.TC),this.kO=e&&e.label||t.name||"",this.gs=e&&e.language||t.language||"",this.IC=e&&e.inBandMetadataTrackDispatchType||"",this.Lt=e&&e.kind||function(t){switch(t){case l0.qV:return Hi.qV;case l0.YV:return Hi.YV;case l0.KV:return Hi.KV;case l0.Fn:return Hi.Fn;case l0.jV:return Hi.jV}return}(t.subtype)||"subtitles",this.tI=nc.NONE,this.pw=e&&void 0!==e.type?function(t){return NT(t)?t:Vr.DEFAULT}(e.type):Vr.WEBVTT,this.U4=[],this.H4=new EM(this.U4),this.j4=[],this.G4=new EM(this.j4),this.qo=fu(e&&e.mode||yh.Ch),this.SJt=this.qo}};r(),r();var m0=class extends pe{constructor(t,e){super(Vo.AJt),this.trackId=t,this.enabled=e}};r();var g0=class extends pe{constructor(t,e){super(Vo.bJt),this.track=t,this.targetQuality=e}};r();var p0=function(t){return t.cE="audio",t.lE="video",t.wk="text",t}({}),w0=class extends Bo{get SC(){return this.Tdt}get xC(){return this.Adt}set xC(t){this.EJt(t),this.yo(new g0(this,t))}get EC(){return this.wO}get kh(){return this.kO}set kh(t){t!==this.kO&&(this.kO=t,this.yo(new Qu(this)))}get Rt(){return this.He}set Rt(t){this.He!==t&&(this.He=t,this.xJt!==t&&this.yo(new m0(this.TC,t)),this.yo(new Bc(this)))}get RJt(){return this.xJt}set RJt(t){const e=this.He!==t;this.He=t,this.xJt=t,e&&this.yo(new Bc(this))}get ga(){return this.Za||(this.Za=bi(this)),this.Za}get TE(){return this.Rt?"enabled":"disabled"}xO(t){this.Rt=t}kJt(t){if(t.targetQualityIds){const e=[];for(const i of this.wO.oC)t.targetQualityIds.indexOf(i.o)>-1&&e.push(i);const i=e.length?e:void 0;this.EJt(i)}}EJt(t){(function(t,e){return!t&&e||t&&!e||t&&e&&!zm(t,e)})(this.Adt,t)&&(this.Adt=t&&this.wO.bO(t)?t:void 0,this.yo(new UW(this.Adt,this)))}unload(){for(const t of this.wO.oC)t.fn("update",this.wLt);this.wO.tr()}constructor(t){super(),this.Tdt=void 0,this.wO=new Oc,this.Adt=void 0,this.Za=void 0,this.wLt=()=>this.yo(new Qu(this));const e=t.customData;if(this.TC=Number(t.trackId)||0,this.o=""+(e&&e.id||this.TC),this.kO=e&&e.label||t.name||"",this.gs=e&&e.language||t.language||"",this.Lt=e&&e.kind||"main",this.He=e&&e.enabled,this.xJt=this.He,d0(t)){this.n3=p0.cE;const e=t.customData&&t.customData.qualities;if(e)for(const t of e){const e=new pH(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);e.yn("update",this.wLt),this.wO.yO(e)}}else{this.n3=p0.lE;const e=t.customData&&t.customData.qualities;if(e)for(const t of e){const e=new gH(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);e.yn("update",this.wLt),this.wO.yO(e)}}}};r();var y0=function(t){return t.IJt="legacy",t.CJt="caf",t}({});r(),r(),r(),r();var b0=class{Pc(){if(this.PJt>=this.Dc.length)return;const t=this.Dc[this.PJt];return this.PJt+=1,t}lt(){return this.Pc()}constructor(t){this.PJt=0,this.Dc=t}};function A0(t){var e,i,s;return null!=(s=null==(i=t.Jjt)||null==(e=i.Rqt)?void 0:e.Iqt())?s:[]}var S0=class{},T0=class{Xst(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get ads(){return t.Vc.map((t=>t.Xst()))},get integration(){return t.jjt},get maxDuration(){return t.DJt},get maxRemainingDuration(){return t.NJt},get timeOffset(){return t.ZBt},get customData(){return t.hJt}}}(this)}constructor(){this.Za=void 0}},k0=class{get MJt(){return this.LJt}get t(){return this.ta}constructor(t,e){this.LJt=t,this.ta=e}},E0=class extends T0{get kjt(){return this.oQt}get Vc(){const t=[];for(const s of this.oQt.BJt)for(const n of A0(s)){var e,i;const r=null!=(i=null==(e=n.zqt)?void 0:e.gYt)?i:[];if(n.Zqt&&t.push(this.OJt(n.Zqt,r,n.Yqt,s.ant)),n.qqt)for(const e of n.qqt.Kqt)t.push(this.FJt(e,r,n.qqt,n.Yqt,s.ant))}return t}OJt(t,e,i,s){const n=Ti(this.VJt,(e=>e.Zqt===t));if(void 0!==n)return n;const r=new C0(t,e,this,this.WJt,i,s);return this.VJt.push(r),r}FJt(t,e,i,s,n){const r=Ti(this.UJt,(e=>e.qqt===t));if(void 0!==r)return r;const o=new I0(t,e,i,this,this.WJt,s,n);return this.UJt.push(o),o}get jjt(){return gu.CSAI}get ZBt(){const t=this.oQt.sd;return t>=0?t:this.WJt.t._d()}get NJt(){let t=0;for(const e of this.oQt.BJt)for(const i of A0(e))i.Zqt&&!i.Zqt.mKt&&(t+=i.Zqt.ct);return this.WJt&&this.WJt.MJt&&(t+=this.WJt.MJt.ct-this.WJt.MJt.yR),t}get DJt(){let t=0;for(const e of this.oQt.BJt)for(const i of A0(e))i.Zqt&&(t+=i.Zqt.ct);return t}get hJt(){}constructor(t,e){super(),this.VJt=[],this.UJt=[],this.oQt=t,this.WJt=e}},x0={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},R0=class extends S0{get Yl(){return this.hYt}get ant(){return this.Qjt}get Yqt(){return this.uKt}GJt(){return this.HJt}ZJt(){this.HJt=!0}XJt(t){return la({},x0,{resourceURI:t.QKt||""})}zJt(t){return la({},x0,{contentHTML:t.QKt.trim(),type:"HTMLResource"})}qJt(t){var e,i;return la({},x0,{clickThrough:(null==(e=t.FYt)?void 0:e.trim())||"",resourceURI:(null==(i=t.QKt)?void 0:i.trim())||"",altText:t.BYt||"",type:"StaticResource"})}YJt(t,e,i){if(!t||!e)return;const s="<img "+(i?"title='"+i+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(e)+"' target='_blank' rel='noopener'>"+s+"</a>"}zqt(t){return t?t.map((t=>{let e;const i={adSlotId:t.IYt||"",height:t.Ti||0,width:t.ji||0};if(t.$qt){var s;const i=this.qJt(t.$qt),n=i.clickThrough||(null==(s=t.NYt)?void 0:s.FYt);e=la({},i,{contentHTML:this.YJt(i.resourceURI,n,i.altText)||""})}else if(t.sYt)e=this.zJt(t.sYt);else{if(!t.eYt)return;e=this.XJt(t.eYt)}return nh(e,i)})).filter((t=>void 0!==t)):[]}KJt(){return this.jJt.Oqt}constructor(t,e,i,s,n,r){super(),this.HJt=!1,this.jJt=t,this.pYt=e,this.hYt=i,this.WJt=s,this.uKt=n,this.Qjt=r}},I0=class extends R0{get qqt(){return this.jJt}get Xqt(){return this.QJt}ma(){const t=this.hYt,e={companions:this.zqt(this.pYt),type:"nonlinear",id:this.jJt.aYt,skipOffset:this._Kt,integration:this.Qjt.integration,adSystem:this.jJt.Oqt,get adBreak(){return t.Xst()},creativeId:this.jJt.aYt,universalAdIds:this.uKt.map((t=>({adIdRegistry:t._jt,adIdValue:t.mjt})))};return this.jJt.eYt?nh(this.XJt(this.jJt.eYt),e):this.jJt.sYt?nh(this.zJt(this.jJt.sYt),e):this.jJt.$qt?nh(this.qJt(this.jJt.$qt),e):e}Xst(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}JJt(){var t,e;return null!=(e=null==(t=this.jJt.$qt)?void 0:t.QKt)?e:""}$Jt(){var t,e,i;return null!=(i=null==(e=this.jJt)||null==(t=e.$qt)?void 0:t.$Kt)?i:""}get _Kt(){const t=this.jJt.Yl;return t&&t.ant&&void 0!==t.ant.skipOffset?M$.Kjt(t.ant.skipOffset,this.WJt.MJt.ct):(null==(e=this.jJt.Yl)?void 0:e._Kt)||-1;var e}constructor(t,e,i,s,n,r,o){super(t,e,s,n,r,o),this.QJt=i}},C0=class extends R0{get Zqt(){return this.jJt}ma(){var t;const e=this.hYt,i=this.jJt;return{companions:this.zqt(this.pYt),duration:i.ct,id:i.aYt,mediaFiles:i.lKt,get mediaUrl(){return i.gKt},skipOffset:this._Kt,type:"linear",integration:this.Qjt.integration,adSystem:i.Oqt,width:void 0,height:void 0,get adBreak(){return e.Xst()},clickThrough:null==(t=i.eKt)?void 0:t.FYt,creativeId:i.aYt,universalAdIds:this.uKt.map((t=>({adIdRegistry:t._jt,adIdValue:t.mjt}))),closedCaptionFiles:i.wKt}}Xst(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}JJt(){return this.jJt.lKt.length>0?this.jJt.lKt[0].contentURL:""}$Jt(){return this.jJt.lKt.length>0?this.jJt.lKt[0].type:""}get _Kt(){const t=this.jJt.Yl;return t&&t.ant&&void 0!==t.ant.skipOffset?M$.Kjt(t.ant.skipOffset,this.WJt.MJt.ct):this.jJt._Kt||-1}constructor(t,e,i,s,n,r){super(t,e,i,s,n,r)}};function P0(t){return t instanceof C0}r();var z=function(t){return t.t$t="csai",t.e$t="google-ima",t.Xh="google-dai",t.i$t="freewheel",t.s$t="mediatailor",t.Ev="chromecast",t.Dst="theoads",t}({});r();var bn=class extends $a{ma(){return new D0(this.tnt.Xst())}constructor(t){super("n$t",t)}},D0=class extends IF{constructor(t){super("updatead",t)}};r();var N0=class extends $a{ma(){return new M0(this.tnt.Xst())}constructor(t){super("r$t",t)}},M0=class extends IF{constructor(t){super("adloaded",t)}},L0=class extends Je{get $c(){return void 0!==this.o$t}get Zst(){return this.jJt?[this.jJt]:[]}get zst(){var t;return null!=(t=this.o$t)?t:null}get qst(){return Ke(this.h$t,(t=>{const e=t.Vc;if(t===this.o$t&&void 0!==this.jJt){const t=e.indexOf(this.jJt);if(t>=0)return e.slice(t+1)}return t.a$t()?[]:e}))}get Yst(){return this.h$t.filter((t=>t===this.o$t||!t.a$t()))}get ga(){var t;return null!=(t=this.Za)?t:this.Za=Ee(this)}o6(t,e,i){throw new b("Scheduling ads while casting is not supported.")}RD(){this.mQt.DQt()}Qst(t){var e;null==(e=this.u$t)||e.Qst(t)}Kst(t,e){var i;null==(i=this.u$t)||i.Kst(t,e)}c$t(t){return Ti(this.h$t,(e=>e.o===t))}l$t(t,e,i,s){const n=this.h$t,r=[];let o=!1;for(const n of t){let t=this.c$t(n.id);void 0===t&&(t=new B0(n),s.push(new xF(t))),!ne(t.d$t)&&ne(i)&&(t.d$t=this.f$t(t._$t,i));const h=t.Vc;t.Yn(n,e,i,s);const a=t.Vc;for(const t of a)qt(h,t)||(s.push(new Ru(t)),o=!0);r.push(t)}this.h$t=r,o&&s.push(new Ys);for(const t of n)qt(r,t)||s.push(new Mu(t))}v$t(t,e){const i=this.o$t,s=this.jJt;let n,r;if(t){var o;const{breakId:e,breakClipId:i}=t;n=e?this.c$t(e):void 0,r=i?null==(o=this.o$t)?void 0:o.m$t(i):void 0}if(this.o$t=n,this.jJt=r,n!==i&&(void 0!==i&&(i.g$t=void 0,e.push(new Lh(i))),void 0!==n&&(n.g$t=this.mQt,e.push(new Va(n)))),r!==s){const t=this.ta.bR();void 0!==s&&e.push(new xn(s,t)),void 0!==r&&e.push(new cn(r,t))}}f$t(t,e){if(!e||!e.breaks)return;const i=Ti(e.breaks,(e=>e.id===t.id));return i}jst(t){const e=[];for(const t of this.h$t){let i=t.Vc;if(t===this.o$t&&void 0!==this.jJt){const t=i.indexOf(this.jJt);t>=0&&(i=i.slice(t))}else if(t.a$t())continue;for(const t of i){const i=t.p$t();i&&e.push(i)}}for(const i of e)t.o6(i,Sa.Gst,!1)}gn(){return this.Bo(),this.mQt.SQt(this.Yr),void 0!==this.o$t&&(this.o$t.g$t=void 0,this.o$t=void 0),this.jJt=void 0,Pn(this.h$t),Promise.resolve(void 0)}constructor(t,e,i){super(),this.h$t=[],this.o$t=void 0,this.jJt=void 0,this.Za=void 0,this.Yr=t=>{var e;if(!t)return;const i=this.mQt.gN,{breakStatus:s}=i,{breakClips:n,breaks:r}=i.media,o=null==(e=WJ(i))?void 0:e.media,h=[];r&&n&&this.l$t(r,n,o,h),this.v$t(s,h);for(const t of h)this.yo(t)},this.ta=t,this.mQt=e,this.u$t=i,this.mQt.AQt(this.Yr)}},B0=class extends T0{get _$t(){return this.w$t}get o(){return this.w$t.id}get Vc(){return this.Dc}get jjt(){return z.Ev}get DJt(){let t=this.w$t.duration;return void 0===t&&this.Dc.length>0&&(t=vf(this.Dc,(t=>t.ct)),S(t)&&(t=void 0)),t}get NJt(){const t=this.DJt;if(void 0!==t&&void 0!==this.g$t){const e=this.g$t.PQt();if(void 0!==e)return _.max(0,t-e)}return t}get ZBt(){return this.w$t.position}get hJt(){}a$t(){return this.w$t.isWatched}m$t(t){return Ti(this.Dc,(e=>e.o===t))}Yn(t,e,i,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const o=t.breakClipIds[r],h=Ti(e,(t=>t.id===o));if(void 0===h)continue;const a=r<this.Dc.length?this.Dc[r]:new O0(h,this);!ne(a.y$t)&&ne(i)&&(a.y$t=this.b$t(i,o,r)),a.Yn(h,s),n.push(a)}this.w$t=t,this.Dc=n}b$t(t,e,i){if(!t||!t.breakClips)return;let s=Ti(t.breakClips,(t=>t.id===e));if(!s){var n;const e=null==(n=this.d$t)?void 0:n.breakClipIds[i];e&&(s=Ti(t.breakClips,(t=>t.id===e)))}return s}constructor(t){super(),this.d$t=void 0,this.Dc=[],this.g$t=void 0,this.w$t=t}},O0=class{get A$t(){return this.S$t}get o(){return this.S$t.id}get gYt(){return[]}get ct(){var t;return null!=(t=this.S$t.duration)?t:NaN}get lKt(){const t=this.JJt();return t?[{contentURL:t,delivery:"progressive",type:this.$Jt(),width:0,height:0}]:[]}get gKt(){return this.JJt()}get _Kt(){const{whenSkippable:t}=this.S$t;return void 0===t?void 0:t<0?-1:t}get FYt(){return this.S$t.clickThroughUrl}get aYt(){}get Yqt(){return[]}get hJt(){}KJt(){return""}$Jt(){var t;return null!=(t=this.S$t.contentType)?t:""}JJt(){var t,e;return null!=(e=null!=(t=this.S$t.contentUrl)?t:this.S$t.contentId)?e:""}Yn(t,e){const i=this.o,s=this.ct,n=this.S$t.contentUrl;this.S$t=t;const r=this.o,o=this.ct,h=this.S$t.contentUrl;i===r&&(s===o||S(s)&&S(o))&&n===h||e.push(new bn(this)),S(s)&&!S(o)&&e.push(new N0(this))}p$t(){let t;return this.y$t&&(t=F$(this.y$t,this.Yl.ZBt)),t||(t=F$(this.S$t,this.Yl.ZBt)),t}Xst(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}ma(){const t=this;return{get companions(){return t.gYt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.lKt},get mediaUrl(){return t.gKt},get closedCaptionFiles(){return[]},get skipOffset(){return t._Kt},type:"linear",integration:z.Ev,get adSystem(){return t.KJt()},width:void 0,height:void 0,get adBreak(){return t.Yl.Xst()},get resourceURI(){return t.JJt()},get clickThrough(){return t.FYt},get creativeId(){return t.aYt},get customData(){return t.hJt},get isSlate(){return!1},get universalAdIds(){return t.Yqt.map((t=>({adIdRegistry:t._jt,adIdValue:t.mjt})))}}}constructor(t,e){this.Za=void 0,this.S$t=t,this.Yl=e}};r();var mt=class extends Bo{get T$t(){return this.k$t}set T$t(t){this.k$t!==t&&(this.k$t=t,this.Vs.href=null!=t?t:"",t?this.iW():this.sW())}iW(){if(this.He)return;this.He=!0,this.Vs.style.display="",this.E$t||(this.QE.style.cursor="pointer");const t=this.E$t?this.Vs:this.QE;As.Ys.Je?(t.addEventListener("touchstart",this.x$t),t.addEventListener("touchend",this.R$t)):(t.addEventListener("mousedown",this.x$t),t.addEventListener("click",this.R$t))}sW(){if(!this.He)return;this.He=!1,this.Vs.style.display="none",this.E$t||(this.QE.style.cursor="");const t=this.E$t?this.Vs:this.QE;As.Ys.Je?(t.removeEventListener("touchstart",this.x$t),t.removeEventListener("touchend",this.R$t)):(t.removeEventListener("mousedown",this.x$t),t.removeEventListener("click",this.R$t))}Ww(){this.Bo(),this.sW(),this.QE.removeChild(this.Vs)}constructor(t,e=As.Ys.Je){super(),this.He=!1,this.x$t=t=>{t.stopPropagation(),this.yo(new pe("clickstart"))},this.R$t=t=>{t.stopPropagation(),this.yo(new pe("click"))},this.QE=t,this.E$t=e,this.Vs=h.createElement("a"),this.Vs.style.position="absolute",this.Vs.style.zIndex="11",this.Vs.target="Vu",this.E$t?(ku(this.Vs,"learn more"),this.Vs.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Vs.setAttribute("rel","noopener")):ya(this.Vs),this.QE.appendChild(this.Vs),this.sW()}};r(),r();var F0=[1200,992,768,576],V0={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},W0=class{I$t(t){let e=U0(t);e!==this.C$t&&(Rd(this.Vs,e),Id(this.Vs,this.C$t),this.C$t=e)}gn(){this.Xu.fn(Ya.pn,this.mn)}constructor(t,e){this.Vs=t,this.Xu=e,this.mn=t=>{this.I$t(t.width)},this.C$t=U0(e.Su),Rd(this.Vs,this.C$t),e.yn(Ya.pn,this.mn)}};function U0(t){for(let e of F0)if(t>e)return V0[e];return"theo-size-xs"}var G0=class extends Bo{get we(){return this.Vs}get TE(){return this.qo}get Tk(){return this.Zl.textContent||""}set Tk(t){ku(this.Zl,t)}P$t(t){"countdown"!==this.qo&&(this.qo="countdown",this.D$t(),this.we.classList.remove("theoplayer-ad-skip-button"),this.we.classList.add("theoplayer-ad-skip-countdown")),this.Tk="You can skip in "+_.round(t)+" seconds"}N$t(){"skip"!==this.qo&&(this.qo="skip",this.Tk="Skip Ad",this.M$t(),this.we.classList.remove("theoplayer-ad-skip-countdown"),this.we.classList.add("theoplayer-ad-skip-button"))}M$t(){this.we.addEventListener("mouseup",this.L$t),this.we.addEventListener("touchend",this.L$t)}D$t(){this.we.removeEventListener("mouseup",this.L$t),this.we.removeEventListener("touchend",this.L$t)}gn(){this.Bo(),this.D$t(),this.Gu.gn(),ft(this.Vs),ft(this.Zl),this.B$t&&ft(this.B$t)}constructor(t,e){super(),this.L$t=()=>{this.yo(new pe("RD"))},this.Vs=h.createElement("div"),this.we.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.we.style.position="absolute",this.Zl=h.createElement("span"),this.we.appendChild(this.Zl),e&&(this.B$t=h.createElement("div"),this.B$t.className="theoplayer-ad-skip-poster",this.B$t.style.backgroundImage='url("'+Im(e)+'")',this.we.appendChild(this.B$t)),this.qo="countdown",this.Gu=new W0(this.we,t)}},H0=class extends Bo{O$t(){const t=this.mQt.gN.activeTrackIds;if(t){if(this.F$t()){const e=this.hO.oC.map((t=>t.o)),i=this.rO.oC.map((t=>t.o));qt(e.concat(i),"0")&&t.push(0)}Y0(t,this.rO),Y0(t,this.hO),function(t,e){const i=!1;for(const i of e.oC)i.TJt=qt(t,i.TC)?yh.Jn:yh.Ch}(t,this.Ul)}}V$t(){var t;const e=null==(t=this.mQt.gN.media)?void 0:t.tracks;if(!e)return;const i=e.filter(d0),s=e.filter(f0),n=e.filter(_0);if(this.F$t()&&0===s.length&&0!==this.lI()){const t=this.W$t();s.push(t)}if(this.F$t()&&0===i.length){const t=this.U$t();i.push(t)}z0(this.rO,i.map((t=>t.trackId))),z0(this.hO,s.map((t=>t.trackId))),z0(this.Ul,n.map((t=>t.trackId))),q0(i,this.rO),q0(s,this.hO),function(t,e){let i=!1;for(const s of t){let t=X0(e,s.trackId);t||(t=new v0(s),e.tt(t),i=!0)}}(n,this.Ul)}G$t(){this.hZ||(this.H$t=p(this.ld,250))}Z$t(){m(this.H$t)}X$t(){this.Z$t(),this.G$t()}z$t(){var t;const e=this.mQt.gN,i=e.media;var s;const n=null!=(s=null==i?void 0:i.duration)?s:NaN,r=(null==i?void 0:i.streamType)===chrome.cast.media.StreamType.LIVE||n<0,o=r?1/0:n;this.IA=o,this.q$t();const h=e.getEstimatedLiveSeekableRange(),a=null==(t=e.customData)?void 0:t.buffers;if(ne(h)){const{start:t,end:e,isMovingWindow:i=r,isLiveDone:s=!1}=h;this.DFt(t,e,i,s)}else if(ne(a)){const[t,e]=a.seekable;this.DFt(t,e,r,!1)}else r?this.DFt(void 0,void 0,!0,!1):this.DFt(0,o,!1,!1)}Y$t(){const t=this.mQt.gN,e=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||Z0(t);this.K$t=e,this.hZ!==e&&(this.hZ=e,this.hZ?this.yo(new vl(this.bR())):this.yo(new Xt(this.bR())))}th(){const{playbackRate:t}=this.mQt.gN;this.j$t!==t&&(this.j$t=void 0,this.aZ!==t&&(this.aZ=t,this.yo(new Nu(this.bR(),t))))}Q$t(){const{playerState:t}=this.mQt.gN;let e;switch(t){case chrome.cast.media.PlayerState.IDLE:e=gs.jB;break;case chrome.cast.media.PlayerState.BUFFERING:e=gs.Xn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:e=gs.JB}this.R4(e),this.J$t()}DFt(t,e,i,s){ne(t)&&ne(e)?this.n4=new ko(t,e,i,i&&!s):this.n4=void 0}$$t(t,e){this.gJt=null!=e?e:this.gJt,this.mJt=null!=t?t:this.mJt,this.yo(new P)}We(t){this.t0t!==t?(this.rZ=!0,this.yo(new _t(this.bR()))):this.t0t=void 0}pH(){if(!this.rZ)return;this.rZ=!1;const t=this.bR();this.yo(new I(t,this.gR())),this.yo(new ga(t))}Sh(){this.T4=!0,this.ER()&&this.yo(new Fs(this.bR()))}q$t(){const t=this.txt,e=this._d();t===e||S(t)&&S(e)||(this.txt=e,this.yo(new re(e)))}e0t(){const t=this.bR();this.rZ||this.i0t===t||(this.i0t=t,this.yo(new I(t,this.gR())))}vJt(){this.hZ&&(this.hZ=!1,this.yo(new Xt(this.bR())),this.R4(gs.jB))}Tst(){return this.Dc}vR(){return this.bxt.Ab(this._Jt)}bR(){if(this.Dc.$c){const t=this.mQt.CQt();if(void 0!==t)return t}return this.fst()}fst(){return void 0!==this.s0t?this._Jt+this.s0t:this.T4?this._d():this._Jt+this.mQt.IQt()}gR(){if(this.n0t)return new Date(this.fst()+this.n0t)}_d(){if(this.Dc.$c){var t;const e=null==(t=this.Dc.Zst[0])?void 0:t.ct;if(void 0!==e&&!S(e))return e}return this._Jt+this.IA}xR(){return this.HG}ER(){return!this.Dc.$c&&this.T4}XR(){return this.hZ}qR(){return this.aZ}YR(t){this.aZ!==t&&(this.j$t=this.aZ,this.aZ=t,this.yo(new Nu(this.bR(),t)),this.mQt.YR(t))}eI(){return this.E4}jR(){return this.Dc.$c?ee.dB(0,this.bR()):this.Fo.Ab(this._Jt)}sI(){var t,e;if(this.Dc.$c)return ee.fB();let i=null!=(e=null==(t=this.n4)?void 0:t.m3().Ab(this._Jt))?e:ee.fB();if(i.V>0){const t=i.jn(i.V-1);i=i.KL(ee.dB(t,this.bR()))}return i}rI(){return this.rZ}lR(){return this.rO}uI(){return this.hO}oI(){return this.Ul}W$t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.aI(),id:"0",name:"",width:this.lI()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:c0.lE}}U$t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:c0.cE}}F$t(){var t,e;return!(void 0!==(null==(t=this.ONt.kQt())?void 0:t.version))||(null==(e=this.ONt.kQt())?void 0:e.sdkType)===y0.CJt}RQt(t){this.F$t()&&we(t,0),this.mQt.RQt(t)}lI(){return this.mJt}aI(){return this.gJt}AI(){this.hZ&&(this.hZ=!1,this.K$t=!1,this.yo(new Xt(this.bR()))),this.mQt.AI()}bI(){this.hZ||(this.hZ=!0,this.K$t=!0,this.yo(new vl(this.bR()))),this.mQt.bI()}Sb(t){if(this.Dc.$c)return;let e=_.max(0,t-this._Jt);e=_.round(1e6*e)/1e6;const i=this.s0t;this.s0t=e,this.K$t=this.XR(),this.t0t=e,this.rZ=!0,this.yo(new _t(this.bR())),void 0===i&&(this.F$t()?this.r0t(e):this.K9(e))}K9(t){this.mQt.Sb(t,this.K$t).then(this.o0t(t)).catch(this.xQt)}o0t(t){return()=>{void 0!==this.s0t&&(this.s0t===t?this.s0t=void 0:this.K9(this.s0t))}}R4(t){this.E4!==t&&(this.E4=t,this.yo(new au(this.bR(),t))),void 0===this.s0t&&this.rZ&&t>=gs.QB&&this.pH(),this.J$t()}J$t(){if(this.hZ)return void(this.h0t=!1);const t=this.E4>=gs.JB;this.h0t!==t&&(this.h0t=t,t?this.yo(new ce(this.bR())):this.yo(new Za(this.bR())))}a0t(){this.u0t||(this.u0t=h.createElement("div"),this.ta.we.appendChild(this.u0t),this.u0t.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.u0t.style.zIndex="10",ya(this.u0t)),this.u0t.style.display=this.Dc.$c?"":"none"}c0t(){var t;const e=null==(t=this.Dc.Zst[0])?void 0:t.FYt;e&&!this.l0t?(this.l0t=new mt(this.u0t,!0),this.l0t.T$t=e,this.l0t.yn("clickstart",this.d0t)):this.l0t&&(this.l0t.T$t=e)}f0t(){var t;const e=null==(t=this.Dc.Zst[0])?void 0:t._Kt;if(void 0===e||e<0)return void(this._0t&&(this._0t.gn(),this._0t=void 0));if(!this._0t){var i;const t=null==(i=this.ta.Ca)?void 0:i.mi;this._0t=new G0(this.ta.Uu,t),this.u0t.appendChild(this._0t.we),this._0t.yn("RD",this.v0t)}const s=this.mQt.CQt();void 0!==s&&(s<e?this._0t.P$t(e-s):this._0t.N$t())}pJt(){return this._Jt}wJt(t){this._Jt=t}jst(t){}SI(){this.mQt.SI()}gn(){this.Bo(),this.Dc.gn(),this.l0t&&(this.l0t.Ww(),this.l0t=void 0),this._0t&&(this._0t.gn(),this._0t=void 0),this.u0t&&(ft(this.u0t),this.u0t=void 0),this.mQt.bQt(this.x3),this.mQt.wQt(this.m0t),this.mQt.SQt(this.sJt),this.mQt.fn(V$._Qt,this.g0t),this.mQt.gn()}constructor(t,e,i,s,n){super(),this.bxt=ee.fB(),this.n0t=void 0,this.T4=!1,this.HG=void 0,this.j$t=void 0,this.E4=gs.jB,this.h0t=!1,this.Fo=ee.fB(),this.n4=void 0,this.rZ=!1,this.rO=new Nn,this.hO=new Nn,this.Ul=new ha,this.txt=NaN,this.s0t=void 0,this.K$t=!1,this.i0t=NaN,this.t0t=void 0,this.H$t=0,this.m0t=(t,e)=>{switch(t){case"buffered":this.bxt=new ee(e),this.yo(new K(this.bR()));break;case"currentProgramDateTime":this.n0t=new Date(e).getTime()-this.bR();break;case"played":this.Fo=new ee(e);break;case"seekable":this.z$t();break;case"videoHeight":this.$$t(void 0,e);break;case"videoWidth":this.$$t(e,void 0)}},this.x3=t=>{switch(t.type){case Mi.qy:this.We(t.currentTime);break;case Mi.zy:this.pH();break;case Mi.Zy:this.yo(new sU(t.representation,t.previousRepresentation));break;case Mi.Yy:this.yo(new PW(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case Mi.Ey:this.yo(new NZ(t.currentTime,t.initDataType,t.initData));break;case Mi.py:this.yo(new In(new ir(Ja.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case Mi.wy:this.yo(new Es)}},this.sJt=t=>{this.z$t(),this.Y$t(),this.th(),this.Q$t(),this.e0t(),this.X$t(),this.V$t(),this.O$t(),this.a0t(),this.c0t(),this.f0t(),t||Z0(this.mQt.gN)&&this.Sh()},this.ld=()=>{this.e0t(),this.f0t()},this.g0t=t=>{this.yo(t)},this.r0t=Vd((t=>this.K9(t)),50),this.xQt=t=>{this.s0t=void 0,this.yo(new W$(t))},this.d0t=()=>{this.bI()},this.v0t=()=>{this.Dc.RD()},this.ta=t,this.ONt=i,this.mQt=s,this.Dc=new L0(t,s,e.Vc),this._Jt=n.pJt(),this.IA=n._d()-this._Jt,this.hZ=n.XR(),this.aZ=n.qR(),this.mJt=n.lI(),this.gJt=n.aI(),this.mQt.yQt(this.x3),this.mQt.gQt(this.m0t),this.mQt.AQt(this.sJt),this.mQt.yn(V$._Qt,this.g0t),this.mQt.TQt().then((t=>{this.yo(new U$(t.bt,t.kc))}),this.xQt)}};function Z0(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function X0(t,e){for(const i of t.oC)if(i.TC===e)return i}function z0(t,e){let i=!1;for(let s=0;s<t.V;s++){const n=t.aC(s);-1===e.indexOf(n.TC)&&(t.it(n),s--,i=!0)}return i}function q0(t,e){let i=!1;for(const s of t){let t=X0(e,s.trackId);t||(t=new w0(s),e.tt(t),i=!0)}return i}function Y0(t,e){for(const i of e.oC)i.RJt=qt(t,i.TC);return!1}r();var K0=class{bnt(t){return Promise.resolve("all")}yI(){}gn(){}};r();function j0(t,e,i){if(S(t))return i;if(t===1/0){if("live"===i||"dvr"===i)return i;if(e&&e.length>0){if(e.end(e.length-1)-e.start(0)>60)return"dvr"}return"live"}return"vod"}var Q0=[Mi.xy,Mi.Sy,Mi.Hy,Mi.Xy,Mi.Uy,Mi.so,Mi.Gy,Mi.$y,Mi.qy,Mi.zy,Zc.LL,Zc.BL,Mi.Zy,Mi.Yy,Mi.Ey,Mi.py,Mi.wy],J0=class extends sc{sZ(t){if(!t)return;Pi(this.KH&&jA(this.KH),t&&jA(t))||(this.KH=t,this.yo(new nk(t)))}p0t(t){if(!t)return;const e=DC(t,this.ta.md);Pi(this.wc&&jA(this.wc),e&&jA(e))||(this.Ea.wJt(0),this.wc=e,this.yo(new wF(e)),this.Ea.vJt())}w0t(t){for(const e of this.rt.oC)if(e.TC===t)return e;for(const e of this.ht.oC)if(e.TC===t)return e}get Rft(){return this.Ea}set Rft(t){const e=this.Ea;e&&(e.fn(V$._Qt,this.g0t),e.fn(V$.vQt,this.y0t),e.fn(Q0,this.Ds),e.fn(Zc.QI,this.NW),t.wJt(e.pJt()),e.jst(t.Tst())),this.Ea=t,this.rO.cC=t.lR(),this.hO.cC=t.uI(),this.Ul.cC=t.oI(),this.Dc.cC=t.Tst(),e&&e.gn(),t.yn(V$._Qt,this.g0t),t.yn(V$.vQt,this.y0t),t.yn(Q0,this.Ds),t.yn(Zc.QI,this.NW)}get Yh(){return this.Kh}get Vc(){return this.Tst()}Tst(){return this.Dc}kst(){return this.hst}lR(){return this.rO}vR(){return this.Ea.vR().ks()}get b0t(){return this.A0t||this.wc}set b0t(t){this.A0t=t}async $n(t,e){var i;t&&await this.rJt(t,null!=(i=t.ads)?i:[],t.streamType,NaN,0,null!=e?e:0)}async S0t(t){var e;const i=null!=(e=this.A0t)?e:this.wc;if(!i)return;var s;const n=this.A0t?null!=(s=this.A0t.ads)?s:[]:this.fnt(),r=this.ta._d(),o=this.ta.sI(),h=j0(r,o,i.streamType),a=o.length>0?o.start(0):0,u=null!=t?t:this.fst();await this.rJt(i,n,h,r,a,u)}fnt(){const t=new Ue;return this.Dc.jst(t),t.fnt()}gR(){return this.Ea.gR()}wR(){return this.KH}get yR(){return this.bR()}set yR(t){this.AR(t)}bR(){return this.Ea.bR()}fst(){return this.Ea.fst()}AR(t,e){this.T0t||(this.ONt.nJt()||this.T0t||!this.wc?this.Ea.Sb(t):this.$n(this.wc,t))}_d(){return this.Ea._d()}ER(){return this.Ea.ER()}xR(){return this.HG}IR(){return this.ZG}DR(){return this.oO}OR(){return this.ta.LR}WR(){return this.oZ}UR(t){this.oZ=t,this.yo(new eh(this.yR,this.dI)),this.ONt.UR(t)}XR(){return this.Ea.XR()}qR(){return this.Ea.qR()}YR(t){this.Ea.YR(t)}jR(){return this.Ea.jR().ks()}JR(){return hl.qB}$R(t){}eI(){return this.Ea.eI()}sI(){return this.Ea.sI().ks()}rI(){return this.Ea.rI()}Ya(){return this.wc}async ka(t){this.wc=t,await this.$n(t),this.A0t=void 0,this.Ea.vJt()}oI(){return this.Ul}aI(){return this.Ea.aI()}lI(){return this.Ea.lI()}uI(){return this.hO}fI(){return this.UA}_I(t){this.UA=t,this.yo(new eh(this.yR,this.dI)),this.ONt._I(t)}get gI(){return!1}set gI(t){}wI(){}pI(){return this.Zo}yI(){}AI(){this.ONt.nJt()||this.T0t||!this.wc?this.Ea.AI():this.$n(this.wc)}bI(){this.Ea.bI()}ur(){this.Kh=!0}ar(){this.KH=void 0,this.Kh=!1}ge(){}be(){}async rJt(t,e,i,s,n,r){this.T0t=!0,this.k0t(),this.Ea.wJt(n);const o="live"===i||"dvr"===i,h=function(t,e,i){return{theoplayer_version:1,streamStart:t,isLive:e,sourceDescription:i}}(n,o,t),a={oJt:t,Vc:e,yR:_.max(0,r-n),ct:s,s0:o?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,hJt:h};try{await this.ONt.rJt(a)}catch(t){this.E0t(t)}finally{this.T0t=!1}}x0t(){this.R0t(this.rO),this.R0t(this.hO),this.I0t(this.Ul)}R0t(t){for(const e of t.oC)this.C0t(e);t.yn(Ce.MI,(t=>{this.C0t(t.Ht),this.P0t()}))}I0t(t){for(const e of t.oC)this.D0t(e);t.yn(Ce.MI,(t=>{this.D0t(t.Ht),this.P0t()}))}C0t(t){t.yn(Vo.bJt,this.dpt),t.yn(Vo.AJt,this.N0t),t.yn(Vo.AJt,this.O$t)}D0t(t){t.yn(Vo.yJt,this.M0t),t.yn(Vo.yJt,this.O$t)}L0t(){const t=[];for(const e of this.rt.oC)e.Rt&&t.push(e.TC);for(const e of this.ht.oC)e.Rt&&t.push(e.TC);for(const e of this.nt.oC)e.TE===yh.Jn&&t.push(e.TC);this.Ea.RQt(t)}B0t(t,e,i){this.O0t=t,this.F0t=e,this.V0t=i}W0t(t){var e,i;if(!t)return!1;return(null!=(i=null==(e=this.ONt.kQt())?void 0:e.version)?i:-1)>=2?t.map((t=>t.o)):[t[0].o]}U0t(t){this.G0t=t}xI(){}RI(){}DI(t){throw new g("Can't add a track while casting.")}async SI(){this.Ea.SI(),this.k0t()}k0t(){this.AW=gs.jB,this.mW=!1,this.wW=!1,this.HG=void 0,this.ZG=void 0}async gn(){this.k0t(),this.Bo(),this.Rft=this.H0t(),this.ONt.fn(Ju._Qt,this.g0t),this.ONt.fn(Ju.XQt,this.oMt),this.ONt.fn(Ju.eb,this.Z0t),this.ONt.fn(Ju.ZQt,this.X0t),this.ONt.fn(Ju.zQt,this.z0t),this.ONt.gn()}H0t(){return new a0(this,this.Ea.pJt(),this.Ea.bR(),this.Ea._d(),this.Ea.ER(),this.Ea.XR(),this.Ea.qR(),this.Ea.lI(),this.Ea.aI())}constructor(t,e){super(t,!0),this.Kh=!1,this.G0t=Bt,this.AW=gs.jB,this.mW=!1,this.wW=!1,this.T0t=!1,this.A0t=void 0,this.HG=void 0,this.ZG=void 0,this.rO=new Xh,this.hO=new Xh,this.Ul=new ut,this.Zo=new N,this.oO=new uS,this.hst=new K0,this.O0t=void 0,this.F0t=void 0,this.V0t=void 0,this.Z0t=t=>{var e,i;(ne(t.dI)&&!Cs(t.dI,this.UA,1e-5)||ne(t.FR)&&t.FR!==this.oZ)&&(this.UA=null!=(e=t.dI)?e:this.UA,this.oZ=null!=(i=t.FR)?i:this.oZ,this.yo(new eh(this.yR,this.UA)))},this.X0t=()=>{const t=this.ONt.nJt();this.Rft=t?new H0(this,this.ta,this.ONt,t,this.Ea):this.H0t()},this.y0t=t=>{this.sZ(t.bt),this.p0t(t.kc)},this.z0t=t=>{const e=this.w0t(t.bN);if(!e)return void 0;const i={targetQualityIds:t.YQt};e.kJt(i)},this.g0t=t=>{this.E0t(t.lt)},this.E0t=t=>{this.G0t&&this.G0t(t)},this.oMt=t=>{this.HG=t.lt,this.ZG=_k(this.HG),this.yo(new Wa(this.ZG))},this.N0t=t=>{if(!t.enabled)return;const e=this.rt.oC.some((e=>e.TC===t.trackId))?this.rt:this.ht;for(const i of e.oC)i.Rt&&i.TC!==t.trackId&&(i.Rt=!1)},this.M0t=t=>{if(t.mode===yh.Jn)for(const e of this.nt.oC)e.TE===yh.Jn&&e.TC!==t.trackId&&fx(e.Lt,t.track.Lt)&&(e.TE=yh.Ch)},this.O$t=Vd((()=>{this.L0t()}),50),this.P0t=()=>{const t=[];var e;const i=null!=(e=Ti(this.ht.oC,(t=>a1(t,this.O0t))))?e:Ti(this.ht.oC,(t=>t.Rt));var s;i&&t.push(i.TC);const n=null!=(s=Ti(this.nt.oC,(t=>a1(t,this.F0t))))?s:Ti(this.nt.oC,(t=>t.TE===yh.Jn));var r;n&&t.push(n.TC);const o=null!=(r=Ti(this.rt.oC,(t=>a1(t,this.V0t))))?r:Ti(this.rt.oC,(t=>t.Rt));o&&t.push(o.TC),0!==t.length&&this.Ea.RQt(t)},this.dpt=t=>{const e=this.W0t(t.targetQuality),i=t.track;this.ONt.KQt(i.TC,i.n3,e)},this.NW=t=>{this.yo(t);const e=t.readyState;!this.mW&&this.AW===gs.jB&&e>=gs.Xn&&(this.mW=!0,this.yo(new YT(t.currentTime))),!this.wW&&this.AW<=gs.Xn&&e>=gs.QB&&(this.wW=!0,this.yo(new KT(t.currentTime))),this.AW<=gs.QB&&e>=gs.JB&&this.yo(new ro(t.currentTime)),this.AW<=gs.JB&&e===gs.$B&&this.yo(new jT(t.currentTime)),this.AW=e},this.UA=this.ta.dI,this.oZ=this.ta.FR,this.ONt=e,this.ONt.yn(Ju._Qt,this.g0t),this.ONt.yn(Ju.XQt,this.oMt),this.ONt.yn(Ju.eb,this.Z0t),this.ONt.yn(Ju.ZQt,this.X0t),this.ONt.yn(Ju.zQt,this.z0t),this.Dc=new BF(this),this.KH=this.ta.bt,this.wc=this.ta.Ya(),this.Rft=new a0(this,0,this.ta.fst(),this.ta._d(),this.ta.kR,this.ta.ZR,this.ta.zR,this.ta.cI,this.ta.hI),this.x0t()}};r();var $0=class extends $s{ma(){return new t1(this.lt)}constructor(t){super("error"),this.lt=t}},t1=class extends pe{constructor(t){super("error"),this.error=t}};r();var e1=class extends pe{constructor(t){super("statechange"),this.state=t}};function i1(t,e){let i;return{get casting(){return t.nQ},get error(){return t.lt},get receiverName(){return t.q0t},get state(){return t.Rft},start(){t.Cn()},stop(){t.SI()},join(){t.Y0t()},leave(){t.K0t()},set connectionCallback(t){null==e||e.j0t(t)},get connectionCallback(){return null==e?void 0:e.Q0t()},get source(){return i||t.kc},set source(e){i=e,t.kc=e},addEventListener(e,i){const s=$A(e,xe);t.yn(s,i)},removeEventListener(e,i){const s=$A(e,xe);t.fn(s,i)}}}r();var s1=class extends Je{get nQ(){return this.Rft===Tr.CONNECTING||this.Rft===Tr.CONNECTED}get lt(){return this.HG}get ga(){return this.Za||(this.Za=i1(this,this.J0t)),this.Za}get q0t(){var t;return null==(t=this.J0t.$0t())?void 0:t.uJt()}get kc(){return this.ta?this.ta.b0t:this.A0t}set kc(t){this.A0t=t?DC(t,this.t1t.md):void 0,this.ta&&(this.ta.b0t=this.A0t,this.A0t&&this.ta.$n(this.A0t))}get Rft(){return this.Ea}set Rft(t){let e=t;this.e1t||e!==Tr.CONNECTING&&e!==Tr.CONNECTED||(e=Tr.AVAILABLE),this.Ea!==e&&(this.Ea=e,this.yo(new e1(this.Rft)))}async i1t(){if(!this.s1t)throw new g("Chromecast must be initialized before starting a session");await this.s1t,this.J0t.$0t()||await this.J0t.n1t()}async Cn(){this.e1t=!0;try{if(this.Rft=Tr.CONNECTING,await this.i1t(),await this.r1t(),this.ta){const t=this.t1t.Ya(),e=this.J0t.o1t(t);this.ta.b0t=e?DC(e,this.t1t.md):this.A0t,this.ta.S0t()}this.Rft=Tr.CONNECTED,await this.t1t.SI()}catch(t){this.h1t(!1).catch(Bt),this.Rft=Tr.AVAILABLE,Se(t)||this.M6(t)}}async Y0t(){this.e1t=!0;try{if(this.Rft=Tr.CONNECTING,await this.i1t(),await this.r1t(),this.ta){const t=this.t1t.Ya(),e=this.J0t.a1t(t);e&&(this.ta.b0t=DC(e,this.t1t.md))}this.Rft=Tr.CONNECTED,await this.t1t.SI()}catch(t){await this.h1t(!0).catch(Bt),this.Rft=Tr.AVAILABLE,Se(t)||this.M6(t)}}async u1t(){this.J0t.$0t()&&await this.Cn()}async r1t(){null!=this.ta||(this.ta=this.c1t()),this.HG=void 0,this.t1t.bI(),await this.lj.l1t(this.ta)}c1t(){const t=new J0(this.t1t,this.J0t.$0t());return t.U0t(this.M6),t}d1t(){this.ta&&(this.ta.gn(),this.ta=void 0)}async h1t(t){if(this.e1t=!1,!this.ta)return;const e=this.ta.Yh,i=this.ta.Ya(),s=this.ta.fst();try{if(e){let e;e=t?this.J0t.f1t(i):this.J0t._1t(i),null!=e||(e=i),await this.lj.v1t(e,e===i),this.t1t.AR(s),this.t1t.AI()}}finally{this.d1t()}}K0t(){this.nQ&&(this.J0t.m1t(!1),this.h1t(!0).catch(this.M6))}SI(){this.nQ&&(this.J0t.m1t(!0),this.h1t(!1).catch(this.M6))}gn(){this.cW.Xw(),this.J0t.fn(o0.fJt,this.g1t),this.Bo(),this.d1t()}constructor(t,e,i,s){super(),this.HG=void 0,this.Za=void 0,this.ta=void 0,this.Ea=Tr.UNAVAILABLE,this.e1t=!1,this.cW=new $t,this.p1t=()=>{this.J0t.yn(o0.fJt,this.g1t),this.Rft=this.J0t.w1t()},this.g1t=t=>{const e=t.Rft;this.Rft=e,e!==Tr.UNAVAILABLE&&e!==Tr.AVAILABLE||this.h1t(!1).catch(this.M6)},this.A0t=void 0,this.M6=t=>{Se(t)||t instanceof Ji&&(this.HG=t,this.yo(new $0(t).ga))},this.lj=t,this.t1t=e,this.J0t=s,this.IT=i.chromecast,this.s1t=go(this.J0t.bj(this.IT,this.cW.Bw),this.cW),this.s1t.then(this.p1t).catch(this.M6)}};r();var n1=class extends Je{get nQ(){return!1}get lt(){}get q0t(){}get kc(){}set kc(t){}get Rft(){return Tr.UNAVAILABLE}get ga(){return this.Za||(this.Za=i1(this)),this.Za}Y0t(){As.Mp("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}K0t(){As.Mp("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Cn(){As.Mp("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}SI(){As.Mp("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}u1t(){return Promise.resolve()}gn(){}};function r1(t){return{bt:t.bt,yR:t.bR(),ct:t._d(),kR:t.kR,lt:t.xR(),RR:t.IR(),FR:t.FR,ZR:t.ZR,zR:t.zR,tI:t.tI,nI:t.nI,hI:t.hI,cI:t.cI,dI:t.dI}}r(),r();var o1=class extends sc{Tst(){return this.Dc}lR(){return this.rO}get PR(){return this.DR()}DR(){return this.oO}_a(){return this.nO}oI(){return this.Ul}uI(){return this.hO}switchContexts(t){this.ta=t,this.rO.cC=t.ht,this.hO.cC=t.rt,this.Ul.cC=t.nt,this.nO.cC=t.aH,this.oO.cC=t.PR,this.Dc.cC=t.Vc}y1t(t){this.ta!==t&&(this.QH(),this.switchContexts(t),this.jH())}aO(t){if(this.ta===t)return;let e;this.QH(),this.Cst&&(e=r1(this));const i=this.wR(),s=this.pI(),n=this.wI();if(this.switchContexts(t),void 0!==e){Kc(this,e,r1(this))}const r=this.wR();r!==i&&this.yo(new nk(r)),this.pI()!==s&&this.yo(new Li),this.wI()!==n&&this.yo(new rk),this.jH()}async gn(t){await super.gn(t),this.nO.gn(t),this.rO.gn(t),this.hO.gn(t),this.Ul.gn(t),this.oO.gn(),await this.Dc.gn(t)}constructor(t,e){super(t,e),this.rO=new Xh,this.hO=new Xh,this.Ul=new ut,this.oO=new Dc,this.nO=new Oh(t.aH),this.rO.cC=t.ht,this.hO.cC=t.rt,this.Ul.cC=t.nt,this.oO.cC=t.PR,this.Dc=new BF(this),this.Dc.cC=t.Vc}},h1=class extends o1{Ya(){const t=super.Ya();return!t&&this.b1t.nQ&&this.b1t.kc?this.b1t.kc:t}ka(t,e){return this.Go.Wo((e=>(this.A1t=new $t,this.A1t.zw(e),go(super.ka(t,this.A1t.Bw),this.A1t))),e)}AI(){super.AI(),this.md.cast.strategy!==_S.AUTO||this.b1t.nQ||this.b1t.u1t()}l1t(t){return this.Go.Wo((e=>this.S1t(t,e)))}v1t(t,e){return void 0===t&&(t=void 0),void 0===e&&(e=!1),this.Go.Wo((i=>this.T1t(t,e,i)))}S1t(t,e){ot(e),this.k1t.Vc&&this.k1t.Vc.jst(t.Vc),this.E1t(),this.x1t=Ti(this.k1t.ht.oC,(t=>t.Rt)),this.fEt=Ti(this.k1t.nt.oC,(t=>"showing"===t.TE)),this.R1t=Ti(this.k1t.rt.oC,(t=>t.Rt)),this.I1t=t,this.I1t.B0t(this.x1t,this.fEt,this.R1t),this.aO(t),this.I1t.ur()}async T1t(t,e,i){ot(i);const s=this.I1t;if(void 0!==s)try{if(t){await this.k1t.SI(),ot(i);const s=DC(t,this.k1t.md);e&&(s.ads=void 0),this.A1t=new $t,this.A1t.zw(i),await go(this.k1t.ka(s,this.A1t.Bw),this.A1t)}e&&this.k1t.Vc&&s.Vc.jst(this.k1t.Vc)}catch(t){Pu(t)}finally{s.ar(),this.aO(this.k1t),this.x1t=Ti(this.I1t.ht.oC,(t=>t.Rt)),this.fEt=Ti(this.I1t.nt.oC,(t=>"showing"===t.TE)),this.R1t=Ti(this.I1t.rt.oC,(t=>t.Rt)),this.k1t.ht.yn(Ce.MI,this.C1t),this.k1t.nt.yn(Ce.MI,this.P1t),this.k1t.rt.yn(Ce.MI,this.D1t),this.k1t.yn(Zc.ML,this.E1t),this.I1t===s&&(this.I1t=void 0)}}SI(){var t;return this.x1t=void 0,this.fEt=void 0,this.R1t=void 0,this.E1t(),null==(t=this.A1t)||t.Xw(),this.Go.Wo((()=>super.SI()))}async gn(){var t;null==(t=this.A1t)||t.Xw(),this.b1t.gn(),await this.v1t(),await this.Go.gn(),await super.gn()}constructor(t,e){super(t),this.Go=new Eu,this.x1t=void 0,this.fEt=void 0,this.R1t=void 0,this.C1t=t=>{const e=t.Ht;a1(this.x1t,e)&&(e.Rt=!0)},this.P1t=t=>{const e=t.Ht;a1(this.fEt,e)&&(e.TE=yh.Jn)},this.D1t=t=>{const e=t.Ht;a1(this.R1t,e)&&(e.Rt=!0)},this.E1t=()=>{this.k1t.ht.fn(Ce.MI,this.C1t),this.k1t.nt.fn(Ce.MI,this.P1t),this.k1t.rt.fn(Ce.MI,this.D1t)},this.k1t=t,this.md.cast.strategy!==_S.DISABLED?this.b1t=new s1(this,t,this.md.cast,e):this.b1t=new n1,this.Tz.lQ(this.b1t)}};function a1(t,e){return void 0!==t&&void 0!==e&&(t.gs===e.gs&&e.kh===t.kh)}r();var u1=new class extends Bo{j0t(t){this.N1t=t}Q0t(){return this.N1t}$0t(){return this.M1t}w1t(){switch(this.L1t.getCastState()){case cast.framework.CastState.CONNECTED:return Tr.CONNECTED;case cast.framework.CastState.CONNECTING:return Tr.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return Tr.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return Tr.UNAVAILABLE}}async bj(t,e){await NJ(e),this.L1t=cast.framework.CastContext.getInstance(),this.L1t.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.dQ),this.L1t.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async n1t(){try{const t=await this.L1t.requestSession();if(t)throw t}catch(t){throw new Ji(VJ(t))}}o1t(t){var e;return null==(e=this.N1t)?void 0:e.onStart(t)}_1t(t){var e;return null==(e=this.N1t)?void 0:e.onStop(t)}a1t(t){var e;return null==(e=this.N1t)?void 0:e.onJoin(t)}f1t(t){var e;return null==(e=this.N1t)?void 0:e.onLeave(t)}m1t(t){this.L1t.endCurrentSession(t)}constructor(...t){super(...t),this.M1t=void 0,this.N1t=void 0,this.dQ=()=>{const t=this.w1t();this.M1t=t===Tr.CONNECTED?new n0(this.L1t.getCurrentSession()):void 0,this.yo(new h0(t))}}},c1=new class{get ga(){return this.Za||(this.Za=function(t){return{initialize(e){const i=t.bj(vS(e));return i.catch(Bt),i},startSession(){const e=t.n1t();return e.catch(Bt),e},endSession(){t.B1t()}}}(this)),this.Za}async bj(t){this.s1t||(this.s1t=this.O1t(t)),await this.s1t}async O1t(t){await this.J0t.bj(t)}async n1t(){if(!this.s1t)throw new g("Chromecast must be initialized before starting a session");await this.s1t,this.J0t.$0t()||await this.J0t.n1t()}F1t(){this.J0t.m1t(!1)}B1t(){this.J0t.m1t(!0)}constructor(t){this.s1t=void 0,this.Za=void 0,this.J0t=t}}(u1),l1={get chromecast(){return c1.ga}};dF((t=>new h1(t,u1)),co.Nst),r(),r(),r(),r(),r(),r(),r();var d1=class{V1t(t,e,i,s){t.AZ.forEach((t=>{if(!this.W1t(t.U1t)){const n=t.G1t(e,i,s);n&&this.H1t(n)}}))}W1t(t){return this.Z1t.get(t)}H1t(t){this.Z1t.set(t.X1t,t),this.z1t.set(t.X1t,t.q1t),this.Y1t.iu(t.K1t)}Qst(t){this.z1t.has(t.X1t)||(this.z1t.set(t.X1t,t),this.Y1t.iu(t.K1t))}j1t(t){return this.z1t.forEach(t)}Q1t(t){return this.Z1t.forEach(t)}J1t(t){let e=!1;return this.Z1t.forEach((i=>{e=i.J1t(t)||e})),e}async gn(){const t=[];this.Z1t.forEach((e=>t.push(e.gn()))),this.z1t.forEach((e=>t.push(e.gn()))),await Promise.all(t),this.Z1t.clear(),this.z1t.clear()}constructor(t){this.Y1t=t,this.Z1t=_u(),this.z1t=_u()}};r();var zh=class t extends $s{ma(){return new f1(this.ujt,this._b,this.Ob,this.kc)}static $1t(e){return new t($c.GENERAL,e._b,e.ljt)}static t2t(e,i){return new t(e.ujt,e.message,e.ljt,i)}constructor(t,e,i,s){super("e2t"),this.ujt=t,this._b=e,this.Ob=i,this.kc=s}},f1=class extends pe{constructor(t,e,i,s){super("aderror"),this.problemType=t,this.message=e,this.errorCode=i,this.source=s}},_1=class extends Xu{get i2t(){return this.s2t}get $c(){let t=!1;return this.n2t((e=>{t=t||e.r2t})),t}get Zst(){const t=[];return this.n2t((e=>{const i=e.Zst;i.length&&t.push(...i)})),t}get zst(){let t=null;return this.n2t((e=>{null!=t||(t=e.zst)})),t}get qst(){const t=[];return this.n2t((e=>{t.push(...e.qst)})),t}get Yst(){const t=[];return this.n2t((e=>{t.push(...e.Yst)})),t}jst(t){this.n2t((e=>{e.jst(t)}))}get ga(){var t;return null!=(t=this.Za)?t:this.Za=Ee(this)}o6(t,e,i){try{this.o2t=i;const s=Ih.Lg.TZ(t);if(s.U1t===z.Dst)return;const n=this.s2t.W1t(s.U1t);if(!n)throw new uo($c.ADBLOCK,void 0,"Ads could not be loaded.");e!==Sa.Hst&&this.M9||this.a2t.h2t(n),s.o6(t,e,n,this.o2t)}catch(e){0,this.yo(zh.t2t(e,t.sources))}}RD(){this.n2t((t=>{t.RD()}))}Qst(t){this.s2t.Qst(t)}Kst(t,e){return this.a2t.Kst(t,e)}u2t(t){this.s2t.Q1t((e=>{e.u2t(t)}))}J1t(t){return this.s2t.J1t(t)}n2t(t){return this.s2t.j1t(t)}yI(){this.s2t.Q1t((t=>t.yI()))}async tr(){this.M9=!1;const t=[];this.s2t.Q1t((e=>t.push(e.SI()))),await Promise.all(t)}async gn(){this.Bo(),await this.s2t.gn(),this.a2t.fn(Mi.so,this.Sit),this.fn("e2t",this.c2t)}constructor(t){super(),this.o2t=!1,this.M9=!1,this.Za=void 0,this.c2t=t=>{if(!this.o2t)return;const e=new lk(ck.ADVERTISEMENT_ERROR,t._b),i=new A(Ja.AD_BLOCKER_DETECTED,t._b+" Turn off your AdBlocker and try again.",e);this.a2t.PH(i)},this.Sit=()=>{this.M9=!0},this.a2t=t,this.s2t=new d1(this),this.yn("e2t",this.c2t),t.yn(Mi.so,this.Sit)}};r(),r(),r();var ts=class extends T0{get Vc(){return this.Dc}get DJt(){return this.l2t}set DJt(t){this.l2t=t}get NJt(){return this.d2t}set NJt(t){this.d2t=t}set ZBt(t){this.tQt=t}get ZBt(){return this.tQt}get hJt(){return this.f2t}_2t(){this.v2t=!0}m2t(t){this.Dc.push(t),this.v2t=!1}g2t(t){we(this.Dc,t)}get KR(){return this.v2t}constructor(t){super(),this.tQt=t,this.Dc=[],this.l2t=-1,this.d2t=-1,this.f2t=void 0,this.v2t=!1}},v1=class extends ts{get jjt(){return this.p2t}get qst(){return this.w2t}Yn(t){void 0!==t.maxDuration&&(this.l2t=t.maxDuration),void 0!==t.customData&&(this.f2t=t.customData)}y2t(t){const e=this.Dc.indexOf(t);return e>=0&&e<this.Dc.length-1}m2t(t){super.m2t(t),this.w2t.push(t)}b2t(t){we(this.w2t,t)}g2t(t){super.g2t(t),we(this.w2t,t)}constructor(t,e){super(e.timeOffset),this.w2t=[],this.p2t=t,this.Yn(e)}};r(),r();var Ns=function(t){return t.Ajt="linear",t.A2t="nonlinear",t.Qk="unknown",t}({}),m1=function(t){return t.NONE="none",t.READY="ready",t}({}),ls=class extends S0{S2t(t,e,i,s,n,r){this.US=t,this.HA=e,this.ZA=i,this.IA=s,this.pYt=n,this.vKt=r,this.T2t="ready"}get k2t(){return this.T2t}get gYt(){return this.pYt}get ct(){return this.IA}Xst(){var t;return null!=(t=this.Za)?t:this.Za=this.ma()}get Ti(){return this.ZA}get o(){return this.US}get _Kt(){return this.vKt}get ji(){return this.HA}get E2t(){return this.x2t}get FYt(){return this.VYt}get aYt(){return this.uYt}get Yqt(){return this.uKt}get hJt(){return this.f2t}get R2t(){return this.I2t}KJt(){}$Jt(){return""}JJt(){return this.C2t}constructor(t,e){super(),this.x2t=e,this.US=void 0,this.vKt=void 0,this.HA=void 0,this.ZA=void 0,this.IA=void 0,this.uKt=[],this.pYt=[],this.T2t="none",this.f2t=void 0,this.I2t=!1,this.Yl=t}};function qo(t){return{get adSystem(){return t.KJt()},get readyState(){return t.k2t},get adBreak(){return t.Yl.Xst()},get duration(){return t.ct},get companions(){return t.gYt.map((t=>t.ga))},get resourceURI(){return t.JJt()},get clickThrough(){return t.FYt},get width(){return t.ji},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t.E2t)},get height(){return t.Ti},get id(){return t.o},get skipOffset(){return t._Kt},get integration(){return t.jjt},get creativeId(){return t.aYt},get universalAdIds(){return t.Yqt},get customData(){return t.hJt},get isSlate(){return t.R2t}}}r();var g1=class{get IYt(){return this.CYt}get BYt(){return this.OYt}get P2t(){return this.D2t}get FYt(){return this.VYt}get Ti(){return this.ZA}get QKt(){return this.C2t}get ji(){return this.HA}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get adSlotId(){return t.IYt},get altText(){return t.BYt},get contentHTML(){return t.P2t},get clickThrough(){return t.FYt},get height(){return t.Ti},get resourceURI(){return t.QKt},get width(){return t.ji}}}(this)}N2t(t){if(t.FYt&&t.QKt)return;const e=function(t){try{return u$(t,"text/html")}catch(t){return}}(t.P2t);e&&(this.VYt=p1(e,"a","href"),this.C2t=p1(e,"img","src"))}constructor(t){var e;this.Za=void 0,this.VYt=void 0,this.C2t=void 0,this.CYt=t.IYt,this.HA=t.ji,this.ZA=t.Ti,this.D2t=t.P2t,this.VYt=t.FYt,this.C2t=t.QKt,this.OYt=null!=(e=t.BYt)?e:"",this.N2t(t)}};function p1(t,e,i){const s=t.querySelector(e);return s&&s.getAttribute(i)||""}var w1=class extends ls{get jjt(){return this.p2t}get M2t(){return this.L2t}set M2t(t){this.L2t=t}ma(){return qo(this)}Yn(t){t.id&&(this.US=t.id),void 0!==t.skipOffset&&(this.vKt=t.skipOffset),void 0!==t.width&&(this.HA=t.width),void 0!==t.height&&(this.ZA=t.height),void 0!==t.duration&&(this.IA=t.duration),void 0!==t.readyState&&(this.T2t=function(t){return"ready"===t?m1.READY:m1.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.C2t=t.resourceURI),void 0!==t.clickThrough&&(this.VYt=t.clickThrough),void 0!==t.companions&&(this.pYt=[...t.companions].map(y1)),void 0!==t.creativeId&&(this.uYt=t.creativeId),void 0!==t.universalAdIds&&(this.uKt=t.universalAdIds),void 0!==t.customData&&(this.f2t=t.customData)}constructor(t,e,i){super(i,function(t){return"linear"===t?Ns.Ajt:"nonlinear"===t?Ns.A2t:Ns.Qk}(e.type)),this.L2t=0,this.p2t=t,this.Yn(e)}};function y1(t){const e={IYt:t.adSlotId,BYt:t.altText,P2t:t.contentHTML,Ik:void 0,FYt:t.clickThrough,Ti:t.height,QKt:t.resourceURI,ji:t.width};return new g1(e)}r();var Lo=class extends $a{ma(){return new b1(this.tnt.Xst(),this.B2t)}get B2t(){return this.O2t}constructor(t,e){super("F2t",t),this.O2t=e}},b1=class extends IF{constructor(t,e){super("adskip",t),this.playedPercentage=e}};r();var A1=class extends es{ma(){return new S1(this.Yl.Xst())}constructor(t){super("V2t",t)}},S1=class extends cs{constructor(t){super("updateadbreak",t)}};r();var T1=class extends es{ma(){return new k1(this.Yl.Xst())}constructor(t){super("W2t",t)}},k1=class extends cs{constructor(t){super("adbreakchange",t)}};r();var Bs=class extends $a{ma(){return new E1(this.tnt.Xst(),this.currentTime)}constructor(t,e){super("U2t",t),this.currentTime=e}},E1=class extends IF{constructor(t,e){super("adfirstquartile",t),this.currentTime=e}};r();var ws=class extends $a{ma(){return new x1(this.tnt.Xst(),this.currentTime)}constructor(t,e){super("G2t",t),this.currentTime=e}},x1=class extends IF{constructor(t,e){super("admidpoint",t),this.currentTime=e}};r();var Ss=class extends $a{ma(){return new R1(this.tnt.Xst(),this.currentTime)}constructor(t,e){super("H2t",t),this.currentTime=e}},R1=class extends IF{constructor(t,e){super("adthirdquartile",t),this.ad=t,this.currentTime=e}},I1=class{get Vc(){return this.Dc}get BJt(){return this.h$t}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get integration(){return t.jjt},get ads(){return t.Vc.map((t=>t.Xst()))},get adBreaks(){return t.BJt.map((t=>t.Xst()))},createAd:(e,i)=>t.Z2t(e,i?t.X2t(i):void 0).Xst(),updateAd(e,i){t.z2t(t.q2t(e),i)},updateAdProgress(e,i){const s=Zs(Number(i),0,1);t.Y2t(t.q2t(e),s)},beginAd(e){t.b2t(t.q2t(e))},endAd(e){t.K2t(t.q2t(e))},skipAd(e){t.DQt(t.q2t(e))},removeAd(e){t.g2t(t.q2t(e))},createAdBreak:e=>t.j2t(e).Xst(),updateAdBreak(e,i){t.Q2t(t.X2t(e),i)},removeAdBreak(e){t.J2t(t.X2t(e))},removeAllAds(){t.$2t()},error(e){t.t3t(e)},fatalError(e,i){const s=i?Number(i):void 0;t.e3t(e,s)}}}(this)}get xN(){return this.F6}set xN(t){this.F6=t}get r2t(){return this.i3t.some((t=>t.E2t===Ns.Ajt))}get X1t(){return this.jjt}get Zst(){return this.i3t}get zst(){var t;return null!=(t=this.o$t)?t:null}get qst(){return Ke(this.h$t,(t=>t.qst))}get Yst(){return this.h$t.filter((t=>!t.KR))}RD(){var t;if(0===this.i3t.length)return;const e=this.i3t[0];(null==(t=this.F6)?void 0:t.skipAd)?this.F6.skipAd(e.Xst()):this.DQt(e)}jst(t){}Z2t(t,e){var i;const s=null!=e?e:this.s3t({timeOffset:null!=(i=t.timeOffset)?i:0}),n=new w1(this.jjt,t,s);return s.m2t(n),this.Dc.push(n),this.K1t.yo(new Ru(n)),n}z2t(t,e){t.Yn(e),this.K1t.yo(new bn(t))}Y2t(t,e){if(!qt(this.i3t,t))throw new g("Cannot update ad progress on a non-started ad");const i=t.M2t,s=_.max(i,e);t.M2t=s;const n=this.a2t.bR();i<.25&&s>=.25&&this.K1t.yo(new Bs(t,n)),i<.5&&s>=.5&&this.K1t.yo(new ws(t,n)),i<.75&&s>=.75&&this.K1t.yo(new Ss(t,n))}b2t(t){qt(this.i3t,t)||(this.i3t.push(t),t.Yl.b2t(t),this.n3t(t.Yl),this.K1t.yo(new cn(t,this.a2t.bR())))}DQt(t){if(!qt(this.i3t,t))return;const e=t.Yl.y2t(t);this.K1t.yo(new Lo(t,t.M2t)),this.r3t(t,e)}K2t(t){if(!qt(this.i3t,t))return;const e=t.Yl.y2t(t);this.K1t.yo(new xn(t,this.a2t.bR())),this.r3t(t,e)}g2t(t){if(!qt(this.Dc,t))return;const e=t.Yl.y2t(t);we(this.Dc,t),t.Yl.g2t(t),this.K1t.yo(new T1(t.Yl)),this.r3t(t,e)}j2t(t){const e=new v1(this.jjt,t);return this.h$t.push(e),this.K1t.yo(new xF(e)),e}Q2t(t,e){t.Yn(e),this.K1t.yo(new A1(t))}J2t(t){if(qt(this.h$t,t)){for(const e of t.Vc.slice())this.g2t(e);we(this.h$t,t),this.K1t.yo(new Mu(t))}}$2t(){for(const t of this.h$t.slice())this.J2t(t)}t3t(t){this.K1t.yo(new zh($c.GENERAL,t.message))}e3t(t,e){const i=new A(null!=e?e:Ja.AD_ERROR,t.message,t);this.a2t.PH(i)}o3t(t){return Ti(this.h$t,(e=>e.ZBt===t))}s3t(t){var e;return null!=(e=this.o3t(t.timeOffset))?e:this.j2t(t)}r3t(t,e){we(this.i3t,t);const i=t.Yl;0!==this.i3t.length||this.o$t!==i||e||(i._2t(),this.n3t(void 0))}n3t(t){this.o$t!==t&&(void 0!==this.o$t&&this.K1t.yo(new Lh(this.o$t)),this.o$t=t,void 0!==t&&this.K1t.yo(new Va(t)))}q2t(t){const e=Ti(this.Dc,(e=>e.Xst()===t));if(void 0===e)throw new g('Invalid ad for integration "'+this.jjt+'"');return e}X2t(t){const e=Ti(this.h$t,(e=>e.Xst()===t));if(void 0===e)throw new g('Invalid ad break for integration "'+this.jjt+'"');return e}async ka(t,e){var i;if(ot(e),null==(i=this.F6)?void 0:i.setSource){let e=await Promise.resolve(this.F6.setSource(t));return pC(e)&&(e=t),DC(e,this.a2t.md)}return t}async h3t(){var t;(null==(t=this.F6)?void 0:t.resetSource)?await Promise.resolve(this.F6.resetSource()):this.$2t()}async gn(){var t;(null==(t=this.F6)?void 0:t.destroy)&&await Promise.resolve(this.F6.destroy()).catch(Bt),this.$2t(),this.n3t(void 0),this.F6=void 0,this.K1t.gn()}constructor(t,e){this.K1t=new Xu,this.Dc=[],this.h$t=[],this.i3t=[],this.jjt=t,this.a2t=e}};r();var C1=class{destroy(){this.removeAdListeners()}get player(){return this.ta}set player(t){this.ta&&this.removeAdListeners(),this.ta=t,this.addAdListeners()}get inAdBreak(){return this.a3t}addAdListeners(){var t,e;null==(t=this.ta.Vc)||t.yn("snt",this.xd),null==(e=this.ta.Vc)||e.yn("int",this.Cd)}removeAdListeners(){var t,e;null==(t=this.ta.Vc)||t.fn("snt",this.xd),null==(e=this.ta.Vc)||e.fn("int",this.Cd)}constructor(t){this.R9=void 0,this.a3t=!1,this.xd=t=>{1!==this.ta.zR&&(this.R9=this.ta.zR,this.ta.zR=1),this.a3t=!0},this.Cd=t=>{this.a3t=!1,void 0!==this.R9&&(this.ta.zR=this.R9,this.R9=void 0)},this.ta=t,this.addAdListeners()}},P1=class extends o1{Tst(){return this.u3t}get c3t(){return this.l3t}yI(){this.k1t.yI(),this.u3t.yI()}AI(){void 0===this.HG?(void 0!==this.d3t&&this.f3t(this.d3t),super.AI()):this.yo(new Wa(this.HG))}async ka(t,e){ot(e);let i=t;if(i)for(const t of this._3t)i=await t.ka(i,e);if(await super.ka(i,e),ot(e),null==i?void 0:i.ads){const t=Boolean(i.blockContentIfAdError);this.u3t.u2t(i.playAdsAfterTime);for(const e of i.ads)this.u3t.o6(e,Sa.Hst,t)}}async SI(){this.HG=void 0,this.wZ=void 0,await this.u3t.tr(),this.v1t(),await super.SI();for(const t of this._3t)await t.h3t()}f3t(t){this.v3t=this.ta.zR;const e=this.ta.dI,i=this.ta.FR;t._I(e),t.UR(i),this.l3t=t,this.d3t=void 0,this.aO(t)}h2t(t){void 0===this.l3t&&(this.d3t=t)}v1t(){this.d3t=void 0,void 0!==this.l3t&&(this.k1t.zR=this.v3t,this.k1t.dI=this.dI,this.k1t.FR=this.FR,this.aO(this.k1t),this.l3t=void 0)}xR(){var t;return null!=(t=this.wZ)?t:super.xR()}IR(){var t;return null!=(t=this.HG)?t:super.IR()}PH(t){void 0===this.IR()&&(this.HG=t,this.wZ=Te(t),this.yo(new Wa(t)))}CI(t){return void 0===this.l3t&&this.u3t.J1t(t)}Kst(t,e){try{const i=new I1(t,this);i.xN=e(i.ga),this.u3t.Qst(i),this._3t.push(i),t!==gu.UPLYNK&&(this.m3t=new C1(this))}catch(e){this.u3t.yo(new zh($c.GENERAL,'Error while constructing ad integration "'+t+'": '+e+'"'))}}YR(t){var e;(null==(e=this.m3t)?void 0:e.inAdBreak)||super.YR(t)}async gn(){var t;for(const t of this._3t)await t.gn().catch(Bt);await this.u3t.gn(),this.v1t(),null==(t=this.m3t)||t.destroy(),this.m3t=void 0,await super.gn()}constructor(t,e){super(t),this._3t=[],this.HG=void 0,this.wZ=void 0,this.v3t=1,this.k1t=t,this.u3t=new _1(this),this.u3t.i2t.V1t(e,t,this,t.md)}};dF((t=>new P1(t,Ih.Lg)),co.Pst),r(),r(),r();var D1=0!==Z.Jm?Z.Jm:Z.Qv,N1=Z.Ka&&D1<12,Et=class extends sc{get yR(){return this.bR()}set yR(t){this.AR(t)}fst(){return this.ta.fst()}get ct(){return this._d()}get PR(){return this.oO}get iI(){return this.sI()}get vI(){return this.KG}get K1t(){return this.g3t}get ht(){return this.rO}get r2t(){return this.a2t.c3t===this}vR(){return ee.fB().ks()}gR(){}pR(t){}qR(){return 1}YR(t){}jR(){return new ee([0,this.yR]).ks()}rI(){return!1}oI(){return this.Ul}uI(){return this.hO}cs(){return this.pI().cs}pI(){return this.Zo}Sa(){}async gn(){this.Bo(),this.rO.gn(),this.hO.gn(),this.Ul.gn(),this.g3t.gn(),this.ta.fn(Mi.yy,this.Ds)}p3t(){N1&&this.w3t(),this.r2t||this.a2t.f3t(this)}v1t(){this.r2t&&(N1&&this.y3t(),Z.Eg&&this.we.querySelectorAll("video[src]").forEach((t=>{t.src=""})),As.Ys.rp&&this.ta.RI(),this.a2t.v1t())}w3t(){this.b3t||(s.addEventListener("blur",this.A3t),s.addEventListener("focus",this.S3t),this.b3t=!0)}y3t(){s.removeEventListener("blur",this.A3t),s.removeEventListener("focus",this.S3t),this.b3t=!1}T3t(){requestAnimationFrame((()=>this.ta.be()))}constructor(t,e){super(t,!0),this.a2t=e,this.b3t=!1,this.hO=new Nn,this.rO=new Nn,this.Ul=new ha,this.oO=new uS,this.g3t=new Xu,this.Zo=new N,this.KG=new mI,this.A3t=()=>{this.ta.ge()},this.S3t=()=>{this.T3t()},this.ta.yn(Mi.yy,this.Ds)}};r(),r();var M1=0,L1="theoplayer-wrapper",B1=class t{get k3t(){return this.E3t}get x3t(){return this.R3t}get I3t(){return 1===this.R3t.length&&X$(this.R3t[0].sources.type)}get C3t(){return this.P3t}D3t(t){const e=this.N3t===t.timeOffset;return!this.M3t&&e}get L3t(){return this.B3t}get O3t(){return Y$(this.F3t)&&!this.M3t}get N3t(){return this.F3t}get sd(){return this.V3t}W3t(){if(S(this.V3t)){let t=this.N3t;if(void 0===t)return void(this.V3t=0);if("string"==typeof t&&Y$(t)){const e=this.ta._d();S(e)||e===1/0||(t=zJ(t)*e)}S(t)||(this.V3t=t)}}get U3t(){return this.G3t}set U3t(t){this.G3t=t}get H3t(){return this.Z3t}set H3t(t){this.Z3t=t,this.X3t=!1}get z3t(){return this.q3t}Y3t(t){this.q3t.push(t)}K3t(){if(!this.M3t){let t,e,i=this.E3t===Sa.Hst&&void 0===this.j3t&&1===this.R3t.length;const s=this.R3t[0];if(!i&&1===this.R3t.length){const t=As.Ah(s.sources.src).searchParams.get("output");t&&t.toLowerCase().indexOf("vmap")>-1&&(i=!0,void 0!==this.j3t&&lt("Do not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included."))}if(X$(s.sources.type)||i)t=s.sources.src;else{if(S(this.ta._d())&&"end"===this.Q3t())return;e=this.J3t()}let n=this.ta._d();(S(n)||n===1/0)&&(n=-3),this.M3t={$3t:this.ta.we.offsetWidth,t4t:this.ta.we.offsetHeight,e4t:this.ta.we.offsetWidth,i4t:this.ta.we.offsetHeight,s4t:this.rst,n4t:this.oZ,r4t:t,o4t:e,h4t:s.omidAccessModeRules,a4t:n}}return this.M3t}J3t(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.R3t.map(((t,e)=>this.u4t(t.sources,e))).join("\n")+"</vmap:VMAP>"}u4t(t,e){const i=this.Q3t(),s=t.src;return'<vmap:AdBreak timeOffset="'+i+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.TC+"-"+e+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+L1+"-"+this.TC+"-"+e+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}Q3t(){if(0===this.N3t)return"start";if(this.N3t===1/0)return"end";const t=this.N3t;if("string"==typeof t&&Y$(t)){const e=zJ(t)*this.ta._d();return M$.qjt(e)}return M$.qjt(this.N3t||0)}c4t(t){this.R3t.push(t)}l4t(t){const e=L1+"-"+this.TC+"-";for(const i of t)if(Cl(i,e)){const t=Number(i.slice(e.length));if(!S(t)&&t>=0&&t<this.R3t.length)return t}return-1}static d4t(t){if(void 0!==t)return-1===t?1/0:t}f4t(){this.B3t=!0}get pO(){return this.rst}set pO(t){this.rst=t}get FR(){return this.oZ}set FR(t){this.oZ=t}constructor(e,i,s,n){this.E3t=i,this.ta=s,this.P3t=n,this.V3t=NaN,this.G3t=!1,this.Z3t=!1,this.B3t=!1,this.q3t=[],this.rst=!1,this.oZ=!1,this.R3t=[],this.TC=++M1,this.j3t=e.timeOffset,this.F3t=t.d4t(this.j3t),this.W3t(),this.R3t.push(e)}};r();var O1=class{get _4t(){return this.v4t._4t}get m4t(){return this.v4t.m4t}get qst(){return this.v4t.qst}get t(){return this.v4t.t}u2t(t){this.g4t=t}p4t(t){return!(this._4t&&!this._4t.L3t&&"nonlinear"!==this.m4t.E2t)||this._4t.sd>t.sd&&this._4t.sd!==t.sd}w4t(t){if(t.length)return t.sort(((t,e)=>t.sd-e.sd))[0]}y4t(){if(this.qst.length)return this.w4t(this.b4t(this.t.bR()))}A4t(){if(!(void 0!==this.g4t&&this.g4t>=0))return this.qst.filter((t=>!t.U3t&&0===t.sd&&t!==this._4t))[0]}b4t(t){if(!this.S4t&&(this.S4t=!this.qst.some((t=>S(t.sd))),!this.S4t))return[];const e=this.qst.filter((e=>!e.U3t&&(e.I3t||!S(e.sd)&&t<=e.sd)));return void 0===this.g4t?e:e.filter((t=>t.I3t||void 0===t.N3t||t.sd>this.g4t))}constructor(t){this.S4t=!1,this.v4t=t,this.g4t=void 0}},F1=function(t){return t[t.T4t=0]="T4t",t[t.k4t=1]="k4t",t[t.E4t=2]="E4t",t}({}),V1=class{yI(){this.do=!0,this.x4t&&this.R4t()}I4t(t,e){this.C4t(t,e);const i=Ti(this.qst,(e=>e.D3t(t)));if(i)i.c4t(t);else{var s;const i=new B1(t,e,this.ta,null==(s=t.replaceContent)||s);this.w2t.push(i),2===this.P4t&&this.D4t.j2t(i.sd,i,i.N3t),this.N4t(e,i)}}get m4t(){return this.M4t}get qst(){return this.w2t}get t(){return this.ta}get DZt(){return Boolean(this.opt)}get P4t(){return this.L4t}B4t(){if(we(this.qst,this._4t),this._4t){for(const t of this._4t.z3t)this.D4t.O4t();this._4t=void 0}}F4t(){for(const t of this.w2t)for(const e of t.z3t)this.D4t.V4t(e,!0);Pn(this.w2t)}async W4t(t){this.B4t(),this.U4t=!0,this._4t=t,this.G4t=t.sd,this.opt=this.H4t(t),await this.opt,this.opt=void 0}async H4t(t){this.Z4t(t);const e=t.K3t();if(!e)return this.U4t=!1,void(this._4t=void 0);const i=this.M4t.X4t(e);t.U3t=!0;try{await i,t.k3t===Sa.Gst&&this.M4t.z4t()}catch(t){0,this._4t=void 0,await this.R4t()}}Z4t(t){this.do?t.pO=!0:t.pO=this.a2t.pO,t.FR=this.a2t.FR}q4t(){var t;return null!=(t=this.Y4t.A4t())?t:this.Y4t.y4t()}async R4t(){if(this._4t&&!this._4t.L3t)return this.opt;const t=this.q4t();t&&await this.W4t(t)}get _4t(){return this.K4t}set _4t(t){this.K4t=t}get U4t(){return this.j4t}set U4t(t){this.j4t=t}tr(){this.B4t(),Pn(this.w2t),this.G4t=0,this._4t=void 0,this.opt=void 0,this.U4t=!1}H3t(){this.U4t=!1,this._4t&&(this._4t.H3t=!0)}async N4t(t,e){t===Sa.Gst&&this.do&&this.Y4t.p4t(e)&&!this.DZt&&"linear"!==this.M4t.E2t&&(!this._4t||this._4t&&this._4t.U3t)&&(await Promise.resolve(),await this.W4t(e))}f4t(){this._4t&&this._4t.f4t()}get Q4t(){if(this.DZt||this.U4t)return!1;if(this._4t&&!this._4t.L3t)return!1;return!!this.w2t.filter((t=>this._4t!==t)).length&&Boolean(this.q4t())}async J4t(){if(!this.Q4t)return void 0;const t=this.q4t();t&&await this.W4t(t)}C4t(t,e){const i=t.sources.type,s=e===Sa.Hst&&void 0===t.timeOffset,n=X$(i)||s?1:2;n!==this.L4t&&(this.L4t=n,this.F4t(),this.M4t.MJt&&!this.DZt&&"linear"!==this.M4t.E2t&&(this.M4t.MJt.Ww(),this._4t=void 0,this.opt=void 0),this.G4t=0,this.x4t=!0)}u2t(t){this.Y4t.u2t(t)}gn(){this.ta.fn(Mi.Sy,this.GX)}constructor(t,e,i,s,n){this.L4t=0,this.opt=void 0,this.j4t=!1,this.GX=()=>{const t=this.w2t.filter((t=>t.O3t));for(const e of t){e.W3t();const t=e.N3t;this.D4t.$4t(t,e.sd)}this.do&&this.Q4t&&this.R4t()},this.w2t=[],this.M4t=t,this.do=!1,this.x4t=!1,this.ta=e,this.a2t=i,this._4t=void 0,this.G4t=0,this.Y4t=new O1(this),this.hst=s,this.D4t=n,this.ta.yn(Mi.Sy,this.GX)}};r(),r();var Ts=function(t){return t.t5t="contentResumeRequested",t.e5t="contentPauseRequested",t.i5t="click",t.Sy="durationChange",t.s5t="expandedChanged",t.n5t="start",t.r5t="impression",t.xZ="pause",t.o5t="resume",t.h5t="adProgress",t.a5t="adBuffering",t.u5t="firstQuartile",t.NKt="midpoint",t.c5t="thirdQuartile",t.MKt="complete",t.l5t="userClose",t.d5t="linearChanged",t.f5t="loaded",t._5t="adCanPlay",t.v5t="adMetadata",t.m5t="adBreakReady",t.g5t="interaction",t.p5t="allAdsCompleted",t.w5t="skip",t.y5t="skippableStateChanged",t.b5t="log",t.A5t="viewableImpression",t.S5t="volumeChange",t.T5t="mute",t}({});r();var W1=function(t){return t.k5t="adError",t}({});r();var U1=function(t){return t[t.E5t=-1]="E5t",t[t.x5t=-1]="x5t",t[t.R5t=-1]="R5t",t[t.I5t=101]="I5t",t[t.C5t=102]="C5t",t[t.P5t=200]="P5t",t[t.D5t=201]="D5t",t[t.N5t=202]="N5t",t[t.M5t=300]="M5t",t[t.L5t=301]="L5t",t[t.B5t=302]="B5t",t[t.O5t=303]="O5t",t[t.F5t=400]="F5t",t[t.V5t=402]="V5t",t[t.W5t=403]="W5t",t[t.U5t=405]="U5t",t[t.G5t=500]="G5t",t[t.H5t=501]="H5t",t[t.Z5t=-1]="Z5t",t[t.X5t=503]="X5t",t[t.z5t=602]="z5t",t[t.q5t=900]="q5t",t[t.Y5t=901]="Y5t",t[t.K5t=1005]="K5t",t[t.j5t=1007]="j5t",t[t.Q5t=1009]="Q5t",t[t.J5t=1010]="J5t",t[t.$5t=1011]="$5t",t[t.t6t=1012]="t6t",t[t.e6t=1013]="e6t",t[t.i6t=1020]="i6t",t[t.s6t=1021]="s6t",t[t.n6t=1101]="n6t",t[t.r6t=1204]="r6t",t[t.o6t=1205]="o6t",t[t.h6t=1300]="h6t",t[t.a6t=-1]="a6t",t[t.u6t=-1]="u6t",t[t.c6t=-1]="c6t",t[t.l6t=-1]="l6t",t}({}),G1=function(t){return t.d6t="adLoadError",t.f6t="adPlayError",t}({});function H1(t,e){if(t===Ts.h5t){const t=e;return{_6t:t.adBreakDuration,v6t:t.adPosition,yR:t.currentTime,ct:t.duration,m6t:t.totalAds}}return e}function Z1(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return G1.d6t;case google.ima.AdError.Type.AD_PLAY:return G1.f6t}}function X1(t){return V(t)&&Sd(t.getVastErrorCode)}function z1(t){const e=t.getInnerError(),i=e&&X1(e)?z1(e):void 0;return{_b:t.getMessage(),ljt:t.getErrorCode(),g6t:t.getVastErrorCode(),pw:Z1(t.getType()),p6t:i}}function q1(t){if(ne(t))return t}r(),r();var Y1=class extends Bo{w6t(t){this.M4t.yo(t)}y6t(t){this.LJt=t,this.LJt.yn(W1.k5t,this.b6t),this.LJt.yn(Ts.e5t,this.A6t),this.LJt.yn(Ts.t5t,this.S6t),this.LJt.yn(Ts.p5t,this.T6t),this.LJt.yn(Ts.n5t,this.k6t),this.LJt.yn(Ts.MKt,this.E6t),this.LJt.yn(Ts.w5t,this.x6t),this.LJt.yn(Ts.l5t,this.R6t),this.LJt.yn(Ts.i5t,this.I6t),this.LJt.yn(Ts._5t,this.C6t),this.LJt.yn(Ts.xZ,(()=>{this.M4t.ZR||(this.M4t.P6t(!0),this.M4t.yo(new vl(this.M4t.yR))),this.D6t(!0)})),this.LJt.yn(Ts.o5t,(()=>{this.M4t.ZR&&(this.M4t.P6t(!1),this.M4t.yo(new Xt(this.M4t.yR)))})),this.LJt.yn(Ts.T5t,(()=>{const e=t.fI();e>=0&&this.N6t(e)})),this.LJt.yn(Ts.S5t,(()=>{const e=t.fI();e>=0&&this.N6t(e)})),this.LJt.yn(Ts.v5t,(t=>{this.L6t.M6t(t.type)})),this.LJt.yn(Ts.Sy,(t=>{t.tnt&&this.B6t(t.tnt.ct)})),this.LJt.yn(Ts.b5t,(async t=>{const e=t.O6t.adError,i=X1(e)?z1(e):void 0;i&&(this.F6t(i)?await this.V6t(t):this.W6t(i)?await this.U6t(i):this.G6t(i)&&this.H6t(i))})),this.LJt.yn(Ts.f5t,(t=>{if(t.tnt&&(this.M4t.H3t(),this.L6t.Z6t(t.tnt),this.X6t=0,t.tnt.z6t)){var e;const t=this.M4t.tI,i=gs.jB;this.M4t.x4(i);const s=this.M4t.yR,n=this.M4t.tI;n!==t&&this.w6t(new Ks(s,n)),null==(e=this.LJt)||e._I(this.M4t.q6t()),this.w6t(new YT(s,i))}})),this.LJt.yn([Ts.a5t,Ts.r5t,Ts.u5t,Ts.NKt,Ts.c5t],(t=>{t.tnt&&this.L6t.Y6t(t.tnt,t.type,this.M4t.yR)})),this.LJt.yn(Ts.u5t,this.K6t),this.LJt.yn(Ts.h5t,this.j6t)}async switchToPlayerIfNoNextAd(){if(this.LJt){const t=this.LJt.Q6t();t&&this.J6t(t)||(this.M4t.Q4t()?await this.M4t.J4t():(this.M4t.$6t(),this.ta.ZR&&!this.ta.kR&&this.ta.AI()))}else if(this.M4t.Q4t())await this.M4t.J4t();else{const t=this.M4t.ZR;this.M4t.$6t(),t||this.ta.AI()}}J6t(t){const e=t.t9t,i=null==e?void 0:e.m6t;return(null==e?void 0:e.v6t)!==i}Fp(){this.M4t.Mc&&(m(this.M4t.Mc),this.M4t.Mc=null)}G6t(t){return t.pw===G1.d6t}W6t(t){return t.pw===G1.f6t}F6t(t){return t.ljt===U1.Q5t}async U6t(t){var e;this.H6t(t);const i=[U1.F5t,U1.Y5t,U1.s6t,U1.o6t];var s;this.M4t.cnt||qt(i,t.ljt)||qt(i,null==(e=t.p6t)?void 0:e.ljt)||(this.M4t.e9t.U4t=!1,null==(s=this.M4t.e9t._4t)||s.f4t(),await this.switchToPlayerIfNoNextAd())}H6t(t){this.M4t.t3t(t)}async i9t(){this.L6t.O4t(),this.M4t.f4t(),"nonlinear"===this.M4t.E2t&&(this.L6t.s9t(-1,!1),this.M4t.n9t(void 0)),"nonlinear"!==this.M4t.E2t&&"none"!==this.M4t.E2t||this.M4t.Q4t()&&await this.M4t.J4t(),this.M4t.r9t(),this.M4t.r2t?this.M4t.v1t():this.o9t()&&this.ta.yo(new Fs(this.ta.bR()))}o9t(){return this.M4t.h9t&&!this.M4t.a9t&&this.ta.kR}setCountdownTimer(){this.Fp(),this.M4t.Mc=p((()=>this.D6t()),250)}async V6t(t){void 0!==t.tnt&&(this.M4t.e9t.U4t=!1,this.M4t.f4t(),this.M4t.Q4t()?await this.M4t.J4t():this.M4t.P6t(!0))}B6t(t){this.M4t.ct!==t&&t>=0&&(this.M4t.e4(t),this.w6t(new re(this.M4t.ct)))}N6t(t){this.M4t.q6t()!==t&&(0===t?this.M4t.u9t(t,!0,!1):this.M4t.u9t(t,!1,!1))}async c9t(){this.M4t.l9t&&void 0!==this.ta.xR()&&(this.d9t=new $t,await go(this.ta.ka(this.ta.Ya(),this.d9t.Bw),this.d9t),this.f9t&&this.ta.AR(this.f9t),this.f9t=void 0)}D6t(t){if(this.LJt){const t=this.LJt._9t();t>this.M4t.ct&&this.B6t(_.round(t))}const e=this.M4t.yR;(t||!this.M4t.ZR&&e!==this.M4t.v9t)&&(this.M4t.yo(new I(e,void 0)),this.M4t.v9t=e)}tr(){this.d9t&&(this.d9t.Xw(),this.d9t=void 0),this.m9t=!1,this.X6t=0}gn(){this.tr(),this.Bo()}constructor(t,e,i){super(),this.M4t=t,this.ta=e,this.L6t=i,this.m9t=!1,this.d9t=void 0,this.f9t=void 0,this.X6t=0,this.K6t=t=>{if(!t.tnt||!t.tnt.t9t)return;const e=t.tnt.t9t;this.L6t.Q2t(e.ZBt,e.m6t,e.DJt)},this.j6t=t=>{var e,i,s;if(this.X6t>=5)return;this.X6t++;const n=t.O6t;if(!function(t){return V(t)&&void 0!==t._6t&&void 0!==t.m6t}(n))return;const r=null==(s=this.LJt)||null==(i=s.Q6t())||null==(e=i.t9t)?void 0:e.ZBt;void 0!==r&&this.L6t.Q2t(r,n.m6t,n._6t)},this.b6t=async t=>{t.O6t.g9t&&await this.U6t(t.O6t.g9t)},this.T6t=async()=>{this.m9t=!0,this.M4t.f4t(),await this.S6t()},this.k6t=t=>{if(!t.tnt)return;const e=t.tnt;this.M4t.n9t(e),this.M4t.ge(),this.M4t.p9t(),this.M4t.w9t=!0,this.L6t.y9t(e);const i=e.ct;if(this.B6t(i),e.z6t){const t=this.M4t.yR,e=this.M4t.tI;this.M4t.x4(gs.JB),this.w6t(new KT(t,e)),this.w6t(new ro(t,e)),this.w6t(new jT(t,e)),this.M4t.ZR||this.w6t(new ce(this.M4t.yR)),this.setCountdownTimer(),this.D6t(!0)}else this.M4t.v1t(),this.ta.ge(),this.M4t.ZR||this.ta.AI()},this.E6t=t=>{var e;if(!t.tnt)return;const i=t.tnt;if(this.Fp(),this.L6t.s9t(this.M4t.ct,i.z6t),this.M4t.tI!==gs.jB){const t=gs.jB;this.M4t.x4(t);const e=this.M4t.yR;this.w6t(new Ks(e,t))}this.B6t(NaN),this.M4t.w9t=!1,null==(e=this.LJt)||e._I(this.M4t.q6t())},this.x6t=t=>{t.tnt&&(this.E6t(t),this.L6t.x6t(t.tnt,this.M4t.yR,this.M4t.ct))},this.R6t=t=>{t.tnt&&(this.L6t.s9t(-1,t.tnt.z6t),this.M4t.f4t(),!t.tnt.z6t&&this.M4t.Q4t()&&this.M4t.J4t())},this.I6t=t=>{t.tnt&&(t.tnt.z6t?this.M4t.bI():this.ta.bI())},this.C6t=()=>{var t;(this.M4t.w9t=!0,this.M4t.b9t)&&(null==(t=this.LJt)||t.bI(),this.M4t.b9t=!1)},this.A6t=t=>{var e;if(!t.tnt)return;this.M4t.l9t&&(this.f9t=this.ta.bR(),this.ta.xI(),this.ta.gI=!0),this.M4t.A9t=!0;const i=t.tnt;this.L6t.xd(i);const s=i.ct;this.M4t.n9t(i),this.B6t(s),this.M4t.P6t(!1),this.M4t.ge(),this.M4t.p3t(),this.M4t.l9t||this.ta.be(),this.ta.bI(),this.M4t.S9t(i);0===(null==(e=i.t9t)?void 0:e.ZBt)||this.M4t.yo(new Za(this.M4t.yR))},this.S6t=async t=>{const e=null==t?void 0:t.tnt;this.M4t.A9t=!1,"linear"===this.M4t.E2t&&this.L6t.Cd(),e&&e.ct>=0&&this.B6t(e.ct),this.ta._d()===1/0&&this.M4t.T9t(),this.M4t.w9t=!1,this.m9t&&await this.i9t(),this.M4t.P6t(!0);try{await this.c9t()}catch(t){return void(Se(t)||this.yo(new zQ(t)))}if(this.M4t.v1t(),this.M4t.be(),this.ta.kR||this.ta.AI(),e&&this.M4t.n9t(e),this.M4t.h9t){if(this.M4t.l9t){var i;const t=this.ta.wI(),e=null==(i=this.ta.bt)?void 0:i.src;t&&e&&(t.src=e)}this.M4t.a9t=!0}this.ta.gI=!1,this.M4t.Q4t()&&await this.M4t.J4t()}}};r(),r();var K1=class extends ts{get jjt(){return z.e$t}constructor(t,e,i){super(t),this.k9t=e,this.E9t=i}};r(),r(),r();var j1=class extends ls{set x9t(t){this.R9t=t}get x9t(){return this.R9t}get jjt(){return z.Xh}KJt(){var t;return null==(t=this.I9t)?void 0:t.Oqt}get C9t(){var t;return null==(t=this.I9t)?void 0:t.xYt}get aYt(){var t;return null==(t=this.I9t)?void 0:t.aYt}get MN(){var t;return null==(t=this.I9t)?void 0:t.MN}get eH(){var t;return null==(t=this.I9t)?void 0:t.eH}get P9t(){var t,e;return null!=(e=null==(t=this.I9t)?void 0:t.P9t)?e:[]}get D9t(){var t,e;return null!=(e=null==(t=this.I9t)?void 0:t.D9t)?e:[]}get N9t(){var t,e;return null!=(e=null==(t=this.I9t)?void 0:t.N9t)?e:[]}ma(){return function(t,e){return nh(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get description(){return e.MN},get apiFramework(){return e.C9t},get creativeId(){return e.aYt},get title(){return e.eH},get wrapperAdIds(){return e.P9t},get wrapperAdSystems(){return e.D9t},get wrapperCreativeIds(){return e.N9t}})}(qo(this),this)}M9t(t){this.I9t=t;const e=Q1(t);this.S2t(t.iKt,t.L9t,t.B9t,t.ct,e,-1)}constructor(t,e){super(t,e),this.R9t=0,this.I9t=void 0}};function Q1(t){return t.zqt.map((t=>new g1(t)))}var J1=class extends ls{ma(){return function(t,e){return nh(t,{get adSystem(){return e.KJt()},get apiFramework(){return e.C9t},get bitrate(){return e.O9t},get contentType(){return e.Ik},get creativeId(){return e.aYt},get description(){return e.MN},get mediaUrl(){return e.gKt},get title(){return e.eH},get traffickingParameters(){return e.F9t},get traffickingParametersString(){return e.V9t},get wrapperAdIds(){return e.P9t},get wrapperAdSystems(){return e.D9t},get wrapperCreativeIds(){return e.N9t},get universalAdIds(){return e.Yqt}})}(qo(this),this)}M9t(t){this.I9t=t,this.S2t(t.iKt,t.L9t,t.B9t,t.ct,Q1(t),t.W9t),this.x2t=t.z6t?Ns.Ajt:Ns.A2t}get jjt(){return z.e$t}KJt(){return this.I9t?kc(this.I9t.Oqt):void 0}get C9t(){return this.I9t?kc(this.I9t.xYt):void 0}get O9t(){return this.I9t?this.I9t.U9t:0}get Ik(){return this.I9t?kc(this.I9t.Ik):void 0}get aYt(){return this.I9t?kc(this.I9t.aYt):void 0}get G9t(){return this.I9t?kc(this.I9t.G9t):void 0}get MN(){var t;return null==(t=this.I9t)?void 0:t.MN}get gKt(){var t;const e=null==(t=this.I9t)?void 0:t.gKt;return ne(e)?e:this.pKt}set gKt(t){this.pKt=t}get eH(){var t;return null==(t=this.I9t)?void 0:t.eH}get F9t(){return this.I9t?kc(this.I9t.F9t):void 0}get V9t(){return this.I9t?kc(this.I9t.V9t):void 0}get P9t(){var t,e;return null!=(e=null==(t=this.I9t)?void 0:t.P9t)?e:[]}get D9t(){var t,e;return null!=(e=null==(t=this.I9t)?void 0:t.D9t)?e:[]}get N9t(){var t,e;return null!=(e=null==(t=this.I9t)?void 0:t.N9t)?e:[]}get Yqt(){var t,e;return null!=(e=null==(t=this.I9t)?void 0:t.Yqt.map((t=>({adIdRegistry:t.H9t,adIdValue:t.Z9t}))))?e:[]}constructor(t){super(t,Ns.Qk),this.I9t=void 0,this.pKt=void 0}};function kc(t){return null===t?void 0:t}r(),r();var $1=class{get K1t(){return this.L6t.K1t}get X1t(){return this.X9t}get r2t(){return this.L6t.r2t}get zst(){var t;return null!=(t=this.L6t.zst)?t:null}get Zst(){const t=this.L6t.z9t;return t?[t]:[]}get qst(){return this.L6t.qst}get Yst(){return this.L6t.Yst}jst(t){this.L6t.jst(t)}RD(){this.L6t.RD()}gn(){return Promise.resolve()}constructor(t,e){this.L6t=t,this.X9t=e}},t2=class{get q9t(){return this.Y9t}get K1t(){return this.g3t}get r2t(){return this.K9t}get z9t(){return this.jJt}get zst(){return this.o$t}get qst(){return Ke(this.h$t,(t=>{if(t.KR)return[];const e=t.Vc;if(t===this.o$t&&void 0!==this.jJt){const t=e.indexOf(this.jJt);if(t>=0)return e.slice(t+1)}return e}))}get Yst(){return this.h$t.filter((t=>!t.KR))}constructor(t,e){this.g3t=t,this.h$t=[],this.K9t=!1,this.Y9t=new $1(this,e)}};r();var e2=class extends $a{ma(){return new i2(this.tnt.Xst())}constructor(t){super("j9t",t)}},i2=class extends IF{constructor(t){super("adimpression",t)}};r();var s2=class extends $s{ma(){return new n2(this.tnt.Xst())}constructor(t){super("Q9t"),this.tnt=t}},n2=class extends pe{constructor(t){super("adbuffering"),this.ad=t}};r();var r2=class extends $s{ma(){return new o2}constructor(){super("J9t")}},o2=class extends pe{constructor(){super("admetadata")}},h2=class t extends t2{$9t(t,e){for(let i=0;i<t;i++){const t=new J1(e);e.m2t(t),this.K1t.yo(new Ru(t))}}j2t(t,e,i){let s=t;s===1/0&&(s=-1);const n=new K1(s,i,e);this.h$t.push(n),e.Y3t(n),this.K1t.yo(new xF(n))}$4t(t,e){for(const i of this.h$t)S(i.ZBt)&&i.k9t===t&&(i.ZBt=e,this.K1t.yo(new A1(i)))}V4t(t,e){void 0===e&&(e=!1),e&&we(this.h$t,t),this.K1t.yo(new Mu(t))}O4t(){if(this.zst){this.V4t(this.zst,!0);const t=Boolean(this.jJt&&this.jJt.E2t===Ns.Ajt);this.t8t(void 0,t)}}z2t(t,e){const i=e.t9t;if(!i)return;const s=i.v6t-1,n=t.Vc[s];return n.M9t(e),this.K1t.yo(new bn(n)),n.Yl.DJt=i.DJt,n}get r2t(){return this.e8t.r2t}i8t(t){if(!qt(this.s8t,t)){if(t){if(this.jJt===t)return;this.jJt=t;for(const e of this.n8t)this.M6t(e,t,this.e8t.yR)}else{if(!this.jJt)return;const t=new xn(this.jJt,this.jJt.Yl.ZBt);this.s8t.push(this.jJt),this.jJt=void 0,this.g3t.yo(t)}Pn(this.n8t)}}t8t(t,e){if(t){var i;if((null==(i=this.zst)?void 0:i.ZBt)===t.ZBt)return;this.o$t=t,e&&this.K1t.yo(new Va(this.o$t))}else{if(!this.o$t)return;const t=new Lh(this.o$t);this.o$t=void 0,Pn(this.s8t),e&&this.g3t.yo(t)}}r8t(t){return this.h$t.filter((e=>Cs(e.ZBt,t,.01)))[0]}static o8t(t,e){if(e.t9t)return t.Vc[e.t9t.v6t-1]}xd(t){if(!t.t9t)return;const e=t.t9t,i=this.r8t(e.ZBt);i&&(Pn(this.n8t),this.t8t(i,t.z6t))}Cd(){this.zst&&this.K1t.yo(new Lh(this.zst)),Pn(this.n8t),this.O4t()}y9t(e){if(!this.o$t&&e.t9t){const t=this.r8t(e.t9t.ZBt);this.t8t(t,e.z6t)}if(this.o$t){const i=t.o8t(this.o$t,e);if(!i)return;this.z2t(this.o$t,e);const s=e.gKt;ne(s)&&!ne(i.gKt)&&(i.gKt=s,this.K1t.yo(new bn(i))),this.i8t(i),this.K1t.yo(new cn(this.jJt,i.Yl.ZBt))}else 0}s9t(t,e){if(this.i8t(void 0),!e&&this.zst){const t=this.zst;this.t8t(void 0,!1),this.V4t(t)}}Z6t(t){const e=t.t9t;if(!e)return;const i=this.r8t(e.ZBt);if(!i)return;this.Q2t(e.ZBt,e.m6t,e.DJt);const s=this.z2t(i,t);s&&this.K1t.yo(new N0(s))}Q2t(t,e,i){const s=this.r8t(t);if(!s)return;const n=s.Vc.length;if(e>n){const t=e-n;this.$9t(t,s),s.DJt=i,this.K1t.yo(new A1(s))}}x6t(e,i,s){if(!this.o$t)return;const n=t.o8t(this.o$t,e);if(n){const t=i/s;this.K1t.yo(new Lo(n,t))}}Y6t(e,i,s){if(!this.o$t)return;let n=this.jJt;if(!n){const s=t.o8t(this.o$t,e);if(!s||qt(this.s8t,s))return void this.n8t.push(i);n=s,this.z2t(this.o$t,e),this.i8t(n)}this.M6t(i,n,s)}M6t(t,e,i){t===Ts.v5t?this.K1t.yo(new r2):t===Ts.r5t&&e?this.K1t.yo(new e2(e)):t===Ts.a5t&&e?this.K1t.yo(new s2(e)):t===Ts.u5t&&e&&i?this.K1t.yo(new Bs(e,i)):t===Ts.NKt&&e&&i?this.K1t.yo(new ws(e,i)):t===Ts.c5t&&e&&i&&this.K1t.yo(new Ss(e,i))}RD(){this.e8t.RD()}jst(t){this.e8t.jst(t)}tr(){const t=Boolean(this.jJt&&this.jJt.E2t===Ns.Ajt);this.i8t(void 0),this.t8t(void 0,t);for(const t of this.h$t)this.V4t(t);Pn(this.h$t),Pn(this.n8t),Pn(this.s8t)}gn(){this.tr()}constructor(t,e){super(t,z.e$t),this.e8t=e,this.n8t=[],this.s8t=[]}};function a2(t){const e=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const e=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case jn.ENABLED:return e.ENABLED;case jn.INSECURE:return e.INSECURE;case jn.DISABLED:default:return e.DISABLED}}(t.ads.vpaidMode)),e.setPlayerVersion("9.0.0"),e.setPlayerType("THEOplayer"),e.setAutoPlayAdBreaks(!0),e.setDisableCustomPlaybackForIOS10Plus(!u2(t));const i=function(t){var e,i,s;const n=null==(i=t.ads)||null==(e=i.googleIma)?void 0:e.language;if(void 0!==n)return n;const r=null==(s=t.ui)?void 0:s.language;if(Kt(r))return r;return}(t);i&&e.setLocale(i)}function u2(t){return Z.Ka&&t.allowNativeFullscreen}r();var c2=class t extends Et{get q1t(){return this.D4t.q9t}get h8t(){return this.D4t}get e9t(){return this.v4t}get l9t(){return u2(this.AQ)}a8t(t,e,i){e===Sa.Hst&&void 0!==i&&(this.o2t=i),this.v4t.I4t(t,e)}static get X1t(){return z.e$t}get X1t(){return t.X1t}get u8t(){return this.AQ.ads.preload===DT.MIDROLL_AND_POSTROLL}jst(t){const e=this.c8t();for(const i of e)kt(i.sources,i.timeOffset)||t.o6(i,Sa.Gst,!1)}c8t(){const t=[],{Zst:e,qst:i}=this.q1t,s=[];for(const n of e.concat(i)){const e=n.Yl.E9t;if(qt(s,e.TC))continue;const i=e.l4t(n.P9t);i>=0?t.push(...e.x3t.slice(i)):t.push(...e.x3t),s.push(e.TC)}for(const e of this.v4t.qst)e.U3t||t.push(...e.x3t);return jm(t)}set E2t(t){this.x2t=t}get E2t(){return this.x2t}get MJt(){return this.LJt}set MJt(t){this.LJt=t,this.l8t=!1}bR(){if(!this.MJt)return 0;const t=this.MJt._9t();return S(this.ct)||t<0?0:this.ct-t}AR(t,e){}_d(){return this.IA||NaN}e4(t){this.IA=t}WR(){return this.ta.FR}UR(t){this.u9t(this.dI,t,!0)}XR(){return this.hZ}P6t(t){this.hZ=t}get w9t(){return this.d8t}set w9t(t){this.d8t=t}get cnt(){return this.o2t}get h9t(){return this.f8t}get b9t(){return this._8t}set b9t(t){this._8t=t}get a9t(){return this.v8t}set a9t(t){this.v8t=t}aI(){var t,e,i;return null!=(i=null==(e=this.MJt)||null==(t=e.Q6t())?void 0:t.B9t)?i:0}lI(){var t,e,i;return null!=(i=null==(e=this.MJt)||null==(t=e.Q6t())?void 0:t.L9t)?i:0}fR(){return[]}u2t(t){this.g4t=t,this.v4t.u2t(t)}z4t(){!this.l8t&&this.MJt&&(this.MJt.Cn(),this.l8t=!0)}n9t(t){this.E2t=t?t.z6t?"linear":"nonlinear":"none"}sI(){return ee.fB().ks()}fI(){return this.ta.dI}_I(t){this.u9t(t,this.FR,!0)}q6t(){return this.ta.FR?0:this.ta.dI}u9t(t,e,i){const s=this.ta.dI!==t||this.ta.FR!==e;s&&(this.ta.dI=t,this.ta.FR=e),this.MJt&&i&&this.MJt._I(this.q6t()),s&&this.yo(new eh(this.yR,this.dI))}ER(){return!1}xR(){if(this.m8t&&this.o2t)return this.m8t}IR(){if(this.g8t&&this.o2t)return this.g8t}eI(){return this.E4}x4(t){this.E4=t,this.yo(new au(this.yR,t))}get A9t(){return this.p8t}set A9t(t){this.p8t=t}yI(){this.ta.fn(Mi.so,this.w8t),this.do||(this.do=!0,this.v4t.yI(),this.p9t())}async AI(){if(this.y8t)return;this.b8t.Xw(),this.b8t=new $t;const t=this.ZR;this.P6t(!1),this.yo(new Xt(this.yR)),this.A8t()||(this.l9t||this.ta.be(),this.yo(new Za(this.yR))),this.w9t||(this.b9t=!1);const e=Boolean(this.MJt);this.y8t=this.v4t.R4t();try{await this.y8t}finally{this.y8t=void 0}try{ot(this.b8t.Bw)}catch(t){return}if(this.do||this.w8t(),!this.m8t||!this.o2t)if(this.MJt){if(t)if(e)try{ot(this.b8t.Bw),this.MJt.S8t(),this.yo(new ce(this.yR))}catch(t){return}else this.z4t()}else this.o2t||(this.v1t(),this.a2t.AI())}bI(){var t;this.ZR||(this.P6t(!0),this.yo(new vl(this.yR))),this.b8t.Xw(),this.w9t?null==(t=this.MJt)||t.bI():this.b9t=!0}RD(){var t;null==(t=this.MJt)||t.RD()}r9t(){this.MJt&&(this.k8t.T8t(),this.MJt.SI(),this.MJt.Ww(),this.MJt=void 0,this.E2t="none",this.l8t=!1)}async SI(){var t;this.v9t=0,this.v4t.tr(),this.b8t.Xw(),this.P6t(!0),this.f8t=!1,this.v8t=!1,this.w9t=!1,this.D4t.tr(),this.r9t(),this.$6t(),null==(t=this.E8t)||t.tr(),this.b9t=!1,this.k8t.Ww()}ge(){this.x8t.ge(),this.l9t&&this.ta.ge()}be(){this.x8t.be()}R8t(){return Boolean(this.MJt)&&qt(this.MJt.I8t(),-1)&&!this.f8t}H3t(){this.v4t.H3t()}Q4t(){return this.v4t.Q4t}f4t(){this.v4t.f4t()}J4t(){return this.v4t.J4t()}J1t(t){if(this.R8t()){if(t.type===Mi.Uy&&this.ta.kR)return!0;if(t.type===Mi.xy)return this.f8t=!0,this.k8t.T8t(),!0}return!1}A8t(){return Boolean(this.MJt&&this.MJt.Q6t())}async X4t(t){try{this.r9t();const e=this.C8t();this.x8t.bj(),this.MJt=await this.k8t.X4t(t,this.E8t,e),this.P8t(this.MJt)}catch(t){this.D8t.U6t(t)}}P8t(t){if(t._I(this.q6t()),this.v4t.P4t===F1.k4t){const e=t.I8t();if(e.length)for(const t of e)this.D4t.j2t(t,this.v4t._4t);else this.D4t.j2t(this.v4t._4t.sd,this.v4t._4t)}this.D8t.tr(),this.D8t.y6t(t)}wI(){if(this.LJt&&this.l9t&&this.A8t())return this.ta.wI()}pI(){return this.l9t&&this.r2t?this.ta.wa:super.pI()}C8t(){const t=!!(this.v4t.P4t===F1.k4t)&&this.u8t;let e,i;void 0!==this.AQ.ads.googleIma.uiElements?e=this.AQ.ads.googleIma.uiElements:this.AQ.ads.showCountdown||(e=[]),void 0!==this.AQ.ads.allowedMimeTypes&&(i=this.AQ.ads.allowedMimeTypes);return{N8t:i,M8t:e,L8t:t,O9t:this.AQ.ads.googleIma.bitrate,B8t:void 0,O8t:this.g4t}}p9t(){if(this.LJt){const t=this.C8t();this.LJt.F8t(t)}}t3t(t){this.m8t=new lk(ck.ADVERTISEMENT_ERROR,t._b),this.g8t=new A(Ja.AD_ERROR,"There was a problem playing ads.",this.m8t),this.K1t.yo(zh.$1t(t))}$6t(){this.r2t&&(this.ta.ge(),this.v1t(),this.be())}T9t(){var t;if(this.ta.bR()===1/0||0===this.ta.sI().length)return;(null==(t=this.v4t._4t)?void 0:t.C3t)&&-1!==this.V8t&&(this.ta.AR(this.ta.bR()+this.V8t),this.V8t=-1)}S9t(t){var e,i;this.V8t=null!=(i=null==(e=t.t9t)?void 0:e.DJt)?i:-1}v1t(){super.v1t(),this.ta.ge(),this.l9t&&!this.ta.kR&&this.ta.AI()}T3t(){this.l9t||super.T3t()}async gn(){this.D8t.fn(sn.ua,this.W8t),await super.gn(),this.r9t(),this.k8t.fn("U8t",this.G8t),this.k8t.Ww(),this.x8t.Ww(),this.v4t.gn(),this.D8t.gn()}constructor(t,e,i,s,n,r,o){super(t,e),this.do=!1,this.o2t=!1,this.m8t=void 0,this.g8t=void 0,this.V8t=-1,this.x2t="none",this.p8t=!1,this.l8t=!1,this.b8t=new $t,this.d8t=!1,this._8t=!1,this.G8t=t=>{this.K1t.yo(t)},this.W8t=t=>{this.m8t=new lk(ck.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.g8t=_k(this.m8t)},this.v9t=NaN,this.w8t=()=>{this.do||this.yI()},this.AQ=i,this.hZ=!0,this.IA=NaN,this.E4=gs.jB,this.f8t=!1,this.v8t=!1,this.D4t=new h2(this.K1t,this),this.D8t=new Y1(this,this.ta,this.D4t),this.D8t.yn(sn.ua,this.W8t),this.ta.yn(Mi.so,this.w8t),this.v4t=new V1(this,this.ta,this.a2t,s,this.D4t),this.E8t=o,this.k8t=r,this.x8t=n,this.be(),this.k8t.yn("U8t",this.G8t)}};r();var l2=class{registerWebImaAdPlayerConstructor(t){this.H8t=t}createAdPlayer(t,e,i){return d2()&&this.H8t?this.H8t(t,e,i):void 0}};function d2(){if(Boolean(s.google&&s.google.ima)){return!(1===w.keys(s.google.ima).length&&s.google.ima.dai)}return!1}l2.Lg=new l2;var f2=class{get U1t(){return c2.X1t}kZ(t){return t&&t.integration===gu.GOOGLE_IMA}G1t(t,e,i){return l2.Lg.createAdPlayer(t,e,i)}o6(t,e,i,s){i.a8t(t,e,s)}Uz(t){const e=z$(t.sources);if(!e)return;const i={integration:gu.GOOGLE_IMA,sources:e,omidAccessModeRules:q1(t.omidAccessModeRules)},s=jc(t.timeOffset);return void 0!==s&&(i.timeOffset=s),i}};Ih.Lg.EZ(new f2),r(),r(),r(),r();var _2=class extends $s{ma(){return new v2}constructor(){super("r$t")}},v2=class extends pe{constructor(){super("adloaded")}},Ic=-1,m2=class{get BJt(){return this.h$t}get Z8t(){return this.X8t}get Wut(){return this.Sp}get z8t(){return this.F3t}get q8t(){return this.Y8t}get sd(){if(S(this.K8t)){const t=M$.Kjt(this.F3t,this.WJt.t._d());void 0===t||S(t)||(this.K8t=t)}return this.K8t}j8t(){return this.Sp<this.h$t.length}Pc(){let t;return this.Sp<this.h$t.length&&(t=this.h$t[this.Sp],this.Sp++),t}Q8t(t){t.kjt=this,this.h$t.push(t)}async J8t(t){let e=!1;for(const i of this.h$t)try{await i.$n(),e=!0}catch(e){0,we(this.h$t,i);const s=i.ant.sources,n="string"==typeof s?s:s.src;t.yo(zh.t2t(e,n))}return this.Y8t=!0,e}ZJt(){this.HJt=!0}GJt(){return this.HJt}$8t(){return this.h$t.some((t=>A0(t).some((t=>t.Zqt))))}constructor(t,e){this.h$t=[],this.HJt=!1,this.F3t=t,this.Sp=0,this.WJt=e,this.K8t=NaN,this.Y8t=!1,this.X8t=new E0(this,this.WJt)}},g2=class t extends Je{get t7t(){let t=0;for(const e of this.e7t)e.GJt()||(t+=1);return t}i7t(){this.n7t.s7t()}Cn(){this.Co(),this.r7t.yn("rnt",this.n7t.o7t)}jn(){this.Eo(),this.r7t.fn("rnt",this.n7t.o7t),this.X3=this.XO,this.n7t.tr();for(const t of this.e7t)t.ZJt();Pn(this.e7t)}Co(){this.h7t||(this.ta.yn(Mi.$y,this.a7t),this.h7t=!0)}Eo(){this.h7t&&(this.ta.fn(Mi.$y,this.a7t),this.h7t=!1)}get qst(){return this.e7t}u7t(){return this.c7t(new I(Ic,void 0))}l7t(t){return this.d7t(t,0,0).length>0}f7t(t,e){let i,s=0;for(const n of this.e7t){if(n.GJt())continue;const r=n.sd;r>=t&&r<=e&&r>=s&&!S(r)&&(i=n,s=i.sd)}return i}_7t(t){return this.c7t(new I(t,void 0))}v7t(){if(!this.m7t&&void 0!==this.g4t){this.m7t=!this.e7t.some((t=>S(t.sd)));for(const t of this.e7t)t.sd!==Ic&&t.sd<=this.g4t&&!t.GJt()&&t.ZJt()}}g7t(t){for(const e of t)e.ZJt();this.l3t.p7t(t),0===this.t7t&&this.Eo()}d7t(t,e,i){return this.e7t.filter((s=>{if(s.GJt())return!1;const n=s.sd;return this.w7t(n,t)||this.y7t(n,t,e,i)}))}w7t(t,e){switch(e){case 0:return 0===t;case Ic:return t===Ic;default:return!1}}y7t(t,e,i,s){if(t<0)return!1;const n=t-e;return-1!==n&&n<=i&&n>=-s}b7t(e){if(e&&e.length>0){for(const i of e){const e=t.d4t(i.ZBt);let s=this.Xmt(i);-1===s&&(this.m7t=void 0===this.g4t,this.e7t.push(new m2(e,this.A7t)),s=this.e7t.length-1);this.e7t[s].Q8t(i)}this.Co()}}static d4t(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}Xmt(e){const i=t.d4t(e.ZBt);return Lr(this.e7t,(e=>i===t.d4t(e.z8t)))}S7t(t){we(this.e7t,t)}u2t(t){this.g4t=t,this.m7t=void 0===t}constructor(t,e,i,s){super(),this.m7t=!1,this.a7t=t=>oh(this.c7t(t)),this.c7t=async t=>{this.v7t();const e=t.currentTime,i=t.currentTime!==Ic?this.f7t(this.X3,t.currentTime):this.d7t(t.currentTime,0,0)[0];let s,n;const r=this.ta._d()-10;if(n=this.l7t(Ic)&&_.ceil(e)===_.ceil(r)?this.d7t(Ic,10,0).filter((t=>!t.q8t)):this.d7t(e,10,0).filter((t=>!t.q8t)),n.length){const t=(await Promise.all(n.map((t=>t.J8t(this.r7t))))).some((t=>!0===t));t&&this.yo(new _2),(!t||!this.n7t.T7t||n[0].sd<this.n7t.T7t.sd)&&(s=n[0])}i&&(i!==this.n7t.T7t&&(s=i),this.g7t([i])),s&&(this.n7t.o7t(),this.n7t.T7t=s,await this.n7t.s7t()),S(this.ta._d())||(this.X3=t.currentTime)},this.ta=t,this.l3t=e,this.A7t=new k0(this.l3t,this.ta),this.g4t=void 0,this.m7t=!1,t._d()!==1/0?this.XO=0:this.XO=t.bR(),this.X3=this.XO,this.e7t=[],this.r7t=i,this.n7t=s,this.h7t=!1}};r(),r();var p2=class extends Je{get k7t(){return this.u0t}get K1t(){return this.g3t}E7t(){this.x7t(),this.R7t(),this.HG=void 0}I7t(t){this.C7t=this.C7t.concat(t)}P7t(t){this.D7t=this.D7t.concat(t)}R7t(){this.C7t=[]}x7t(){this.D7t=[]}N7t(t){for(const e of this.C7t)e.LX===t&&Nr(e.eventURL)}ge(){this.k7t.style.display=""}be(){this.k7t.style.display="none"}gn(){this.Bo(),this.g3t.Bo(),ft(this.u0t)}constructor(t,e){super(),this.D7t=[],this.C7t=[],this.HG=void 0,this.g3t=new Je,this.M7t=t=>{t.stopPropagation(),this.L7t()},this.L7t=()=>{for(const t of this.D7t)for(const e of t.GYt)Nr(e.uri)},this.u0t=h.createElement("div"),this.u0t.style.display="none",this.B7t=t,this.O7t=e}};function w2(t,e){let i=e;if(!function(t){return"ui"in t}(t))return i;const s=t.ui.language;let n;if(Kt(s)){const e=t.ui.languages;if(!e)return i;n=e[s]}else n=s;return n&&n[e]&&(i=n[e]),i}r(),r();var y2={[nl.GC]:1,[nl.HC]:2,[nl.ZC]:2};function b2(t,e){const i=e?e.map((t=>t.toLowerCase())):e;return Bi(t.filter((t=>{const e=t.type.toLowerCase();return!!rl(i)&&-1!==i.indexOf(e)&&R$(e)})),((t,e)=>y2[t.type]-y2[e.type])).map(A2)}function A2(t){return al({src:t.contentURL,type:t.type,isAdvertisement:!0})}function S2(t,e){return wW(T2(t),T2(e))}function T2(t){return{Ti:t.height,ji:t.width}}function k2(t,e,i,s){const n=function(t,e,i,s){let n,r=1/0;const o=t.filter((t=>!R$(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(o.length){for(const t of o){const s=(_.abs(t.width/e-1)+_.abs(t.height/i-1))/2;s<r&&(r=s,n=t)}return n||o.sort(S2)[0]}}(t.lKt,e.width,e.height,i),r=b2(t.lKt,i);if(n){const t=A2(n);t&&r.push(t)}var o;r.length>0&&(t.gKt=null==(o=r[0].src)?void 0:o.trim());return DC({sources:r},s)}var E2=class extends p2{get F7t(){return this.V7t}get yR(){return this.W7t.yR}get ct(){let t=this.W7t.ct;return S(t)&&this.oKt&&(t=this.oKt.ct||0),t}get kR(){return this.W7t.kR}get FR(){return this.W7t.FR}set FR(t){this.W7t.FR=t,t?this.N7t(lc.bKt):this.N7t(lc.AKt)}get ZR(){return this.W7t.ZR}get tI(){return this.W7t.tI}get dI(){return this.W7t.dI}set dI(t){this.W7t.dI=t}get hI(){return this.W7t.hI}get cI(){return this.W7t.cI}get U7t(){return this.G7t}AI(){this.W7t.ZR&&(this.W7t.AI(),this.yo(new Xt(this.yR)),this.V7t&&this.N7t(lc.SKt),this.V7t=!0)}bI(){this.W7t.ZR||(this.W7t.bI(),this.yo(new vl(this.yR)),this.N7t(lc.Uy))}async SI(){var t;null==(t=this.OT)||t.Xw(),this.OT=void 0,this.be(),this.V7t=!1,this.H7t=!0,this.Z7t(),this.X7t(),await this.z7t()}q7t(t){void 0===t&&(t=!0),this.V7t=!1,t&&this.N7t(lc.MKt),this.be(),this.O7t()}Y7t(){var t;const e=null==(t=this.l3t.Ca)?void 0:t.mi,i=new G0(this.Xu,e);return this.k7t.appendChild(i.we),i.yn("RD",this.K7t),i}j7t(){this.oKt&&this.oKt.eKt.FYt&&(this.l0t=new mt(this.k7t),this.l0t.T$t=this.oKt.eKt.FYt,this.l0t.yn("clickstart",this.Q7t),this.l0t.yn("click",this.L7t))}J7t(t,e){for(const i of this.C7t)if(i.LX===lc.Gy){const s=w$(i.tc,e);void 0!==s&&this.X3<s&&s<=t&&Nr(i.eventURL)}}async $7t(){if(!this.oKt||!this.tte)return;const t=k2(this.oKt,this.tte,this.IT.ads.allowedMimeTypes,this.IT);if(!t.sources.length)return await this.W7t.tr(),this.B7t(""),void this.oKt.dYt();this.OT=new $t,this.H7t=!0,await go(this.W7t.ka(t,this.OT.Bw),this.OT),this.W7t.ge(),this.oKt.dYt(),this.j7t()}async ete(t,e,i){this.G7t=t,this.oKt=t.Zqt,this.W7t.yn(Mi.$y,this.ite),this.W7t.yn(Mi.Sy,this.ste),this.W7t.yn(Mi.eb,this.nte),this.W7t.yn(no,this.Ds),this.oKt.Qqt&&0!==this.oKt.Qqt.length&&this.I7t(this.oKt.Qqt),this.oKt.eKt&&this.P7t(this.oKt.eKt),this.HG=e,this.tte=i,0!==this.oKt.lKt.length&&(this.W7t.yn(sn.ua,this.rte),await this.$7t(),this.W7t.yn(Mi.xy,this.ote),this.W7t.yn(Mi.$y,this.hte),this.W7t.yn(Zc.BL,this.ate),this.W7t.yn(Mi.Xy,this.Ds))}DQt(){this.F7t&&this.ute&&this.K7t()}get ute(){return this.oKt&&-1!==this.oKt._Kt&&this.W7t.yR>=this.oKt._Kt}cte(){this.N7t(lc.sTt),this.G7t&&this.K1t.yo(new cn(this.G7t,this.yR))}async z7t(){this.W7t.fn(sn.ua,this.rte),this.W7t.fn(Mi.xy,this.ote),this.W7t.fn(Mi.$y,this.hte),this.W7t.fn(Zc.BL,this.Ds),this.W7t.fn(Zc.BL,this.ate),this.W7t.fn(Mi.Xy,this.Ds),this.W7t.fn(Mi.$y,this.ite),this.W7t.fn(Mi.Sy,this.ste),this.W7t.fn(Mi.eb,this.nte),this.W7t.fn(no,this.Ds),this.G7t&&(this.G7t.ZJt(),this.K1t.yo(new xn(this.G7t,this.yR))),this.dte(),this.E7t(),this.Z7t(),this.X7t(),this.G7t=void 0,this.oKt=void 0,this.tte=void 0,await this.W7t.tr(),this.W7t.be(),this.k7t.style.cursor="",this.fte=0,this.X3=-1,this._te&&(this.vte.z7t(),this._te=!1)}dte(){this.l0t&&(this.l0t.Ww(),this.l0t=void 0)}X7t(){this.mte&&(ft(this.mte),this.mte=void 0)}Z7t(){this._0t&&(this._0t.gn(),this._0t=void 0)}pte(){this._te=!0}wte(){var t;this.mte||(this.mte=h.createElement("div"),this.mte.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.k7t.appendChild(this.mte));const e=null==(t=this.G7t)?void 0:t.Yl;if(!e)return;const i=e.Vc.filter(P0);let s=w2(this.IT,"The content will play in")+" "+_.round(e.NJt)+" "+w2(this.IT,"seconds");if(i.length>1){const t=i.filter((t=>t.GJt())).length;s+=". "+w2(this.IT,"Ad")+" "+(t+1)+"/"+i.length}ku(this.mte,s)}constructor(t,e,i,s,n,r,o){super(t,e),this.vte=i,this.IT=s,this.l3t=n,this.Xu=r,this.W7t=o,this.V7t=!1,this.fte=0,this.X3=-1,this.OT=new $t,this.H7t=!0,this.ote=()=>{this.q7t()},this.ate=()=>{this.OT=void 0,this.V7t||(this.cte(),this.V7t=!0),this.H7t&&(this.H7t=!1,this.l3t.i7t()),this.k7t.style.display="block",this.W7t.fn(Zc.BL,this.ate),this.V7t=!0},this.hte=()=>{const t=this.yR,e=this.ct,i=t/e;(0===this.fte&&i>=.25?(this.N7t(lc.PKt),this.fte=1):1===this.fte&&i>=.5?(this.N7t(lc.NKt),this.fte=2):2===this.fte&&i>=.75&&(this.N7t(lc.DKt),this.fte=3),this.J7t(t,e),this.wte(),this.X3=t,this.oKt)&&(-1!==this.oKt._Kt&&this.oKt._Kt<this.oKt.ct&&(null!=this._0t||(this._0t=this.Y7t()),this.yR<this.oKt._Kt?this._0t.P$t(this.oKt._Kt-this.yR):this._0t.N$t()))},this.rte=()=>{var t,e;this.OT=void 0,this.W7t.fn(sn.ua,this.rte),this.H7t=!0,null==(t=this.HG)||t.ajt(k$.sjt),this.V7t=!1,this.W7t.be();const i=(null==(e=this.W7t.bt)?void 0:e.src)||"";this.B7t(i)},this.ite=()=>{this.Ds(new I(this.yR,void 0))},this.ste=()=>{this.Ds(new re(this.ct))},this.nte=()=>{this.Ds(new eh(this.yR,this.dI))},this.Q7t=()=>{this.l3t.bI()},this.K7t=()=>{this.G7t&&(this.N7t(lc.kKt),this.K1t.yo(new Lo(this.G7t,this.yR/this.ct)),this.q7t(!1))},this.k7t.className="theoplayer-ad-linear",this.k7t.style.zIndex="10",ya(this.k7t),this.W7t.be(),this._te=!1}};r(),r();var x2=class t extends Bo{get we(){return this.Vs}M$t(){this.we.addEventListener("mouseup",this.L$t),this.we.addEventListener("touchend",this.L$t),this.we.addEventListener("mousedown",this.yte)}D$t(){this.we.removeEventListener("mouseup",this.L$t),this.we.removeEventListener("touchend",this.L$t),this.we.removeEventListener("mousedown",this.yte)}static cr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}gn(){this.D$t(),ft(this.Vs)}constructor(){super(),this.L$t=t=>{this.yo(new pe("RD")),this.yte(t)},this.yte=t=>{t.stopPropagation()},this.Vs=t.cr(),this.M$t()}},R2=class extends p2{get bte(){return this.Ate}get Ste(){return this.lu}E7t(){super.E7t(),this.k7t&&Ch(this.k7t)}async ete(t,e,i){this.QJt&&this.z7t(),this.Ate=t,this.QJt=t.Xqt,0!==this.QJt.Qqt.length&&this.I7t(this.QJt.Qqt),this.HG=e,0!==this.QJt.Kqt.length&&(this.P7t(this.QJt.Kqt[0].rYt),this.k7t.addEventListener("error",this.Tte),this.k7t.addEventListener("load",this.kte),await this.$7t(),this.Ete())}DQt(){var t;if(void 0!==this.xte)return;const e=null==(t=this.QJt)?void 0:t.Kqt[0];e&&e.Yl&&-1!==e.Yl._Kt&&(this.N7t(lc.kKt),this.K1t.yo(new Lo(this.Ate,0)),this.Rte())}cte(){void 0!==this.Ate&&this.K1t.yo(new cn(this.Ate,this.l3t.yR))}SI(){this.z7t(),this.Ate=void 0,this.QJt=void 0}z7t(){this.Ite(),void 0!==this.Ate&&(this.Ate.ZJt(),this.K1t.yo(new xn(this.Ate,this.l3t.yR))),this.E7t(),this.Cte(),void 0!==this.xte&&(v(this.xte),this.xte=void 0)}Ite(){this.k7t.removeEventListener("load",this.kte),this.k7t.removeEventListener("error",this.Tte)}async $7t(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const e=this.QJt.Kqt[0],i=h.createElement("a");if(e.rYt.FYt&&(i.href=e.rYt.FYt,i.target="Vu",i.setAttribute("rel","noopener")),e.eYt){const t=e.eYt,s=h.createElement("iframe");s.src=t.QKt,i.appendChild(s)}else if(e.$qt){const t=e.$qt,s=h.createElement("img");s.src=t.QKt,i.appendChild(s)}else if(e.sYt){const t=e.sYt,s=h.createElement("iframe");s.src=t.QKt,i.appendChild(s)}e.dYt(),i.addEventListener("mousedown",this.M7t),i.addEventListener("touchend",this.M7t),this.k7t.firstChild&&(Ch(this.k7t),this.z7t()),t.appendChild(i),this.k7t.appendChild(t),this.ge()}Ete(){var t;if(!this.QJt)return;const e=null==(t=this.QJt.Kqt[0].Yl)?void 0:t._Kt;void 0!==e&&-1!==e&&(this.xte=s.setTimeout(this.Pte,1e3*e))}Cte(){this.lu&&(this.lu.fn("RD",this.Dte),this.lu.gn()),this.lu=void 0}get Nte(){return this.l3t.Mte()}constructor(t,e,i){super(t,e),this.kte=()=>{this.Ite(),this.N7t(lc.VKt),this.O7t()},this.Tte=t=>{var e,i;this.Ite(),null==(e=this.HG)||e.ajt(k$.rjt);const s=null==(i=this.QJt)?void 0:i.Kqt[0];var n,r;const o=null!=(r=null!=(n=null==s?void 0:s.eYt)?n:null==s?void 0:s.$qt)?r:null==s?void 0:s.sYt;var h;this.B7t(null!=(h=null==o?void 0:o.QKt)?h:"")},this.Rte=()=>{this.be(),Ch(this.k7t),this.O7t(),this.Ate=void 0,this.QJt=void 0},this.Pte=()=>{this.lu||(this.xte=void 0,this.lu=new x2,this.k7t.children[0].appendChild(this.lu.we),this.lu.yn("RD",this.Dte))},this.Dte=()=>{this.N7t(lc.kKt),this.DQt()},this.k7t.className="theoplayer-ad-nonlinear",this.k7t.style.position="absolute",this.k7t.style.width="100%",this.k7t.style.bottom="3em",this.k7t.style.zIndex="10",this.k7t.style.textAlign="center",this.l3t=i}};r();var I2=class{static async Lte(t,e,i){let s=[],n=t.shift();for(;n;){try{const t=await(new D$).pjt(n,e);s=s.concat(t)}catch(t){0;const e=zh.t2t(t,n.sources.src);i.yo(e)}n=t.shift()}return s}};r(),r(),r();var C2=class extends $s{ma(){return new P2}constructor(){super("rat")}},P2=class extends pe{constructor(){super("statechange")}};r();var Gt=function(t){return t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted",t}({});r(),r();var D2=class{get Ju(){return this.Qu}get V(){return this.Qu.length}get ga(){return this.Za||(this.Za=this.ma()),this.Za}aC(t){return this.Qu[t]}yO(t){this.Qu.push(t),this.Za&&this.Za.push(t.ga),this.Bte(t)}Ote(t){for(const e of t)this.yO(e)}Fte(t,e){e>=0&&e<=this.Qu.length&&(this.Qu.splice(e,0,t),this.Za&&this.Za.splice(e,0,t.ga),this.Bte(t))}bO(t){return qt(this.Qu,t)}jS(t){this.Vte(this.Qu.indexOf(t))}Vte(t){if(!(t>=0&&t<this.Qu.length))return;const e=this.Qu[t];Ko(this.Qu,t),this.Za&&Ko(this.Za,t),this.Wte(e)}Nb(){const t=this.Qu.slice();Pn(this.Qu),this.Za&&Pn(this.Za);for(const e of t)this.Wte(e)}constructor(){this.Qu=[],this.Za=void 0}},N2=class extends D2{ma(){return function(t){const e=function(t){const e=t.Ju.map((t=>t.ga));return e.item=e=>{const i=0|e,s=t.aC(i);return s&&s.ga||void 0},e}(t),i=new ht(t,e);return e.addEventListener=(t,e)=>{i.yn(t,e)},e.removeEventListener=(t,e)=>{i.fn(t,e)},e}(this)}yn(t,e){this.Ute.yn(t,e)}Jw(t){this.Ute.Jw(t)}Bo(){this.Ute.Bo()}yo(t){this.Ute.yo(t)}fn(t,e){this.Ute.fn(t,e)}sy(t){this.Ute.sy(t)}oy(t){this.Ute.oy(t)}uy(t,e){return this.Ute.uy(t,e)}constructor(...t){super(...t),this.Ute=new Je,this.Ds=t=>{this.yo(t)}}};r();var M2=class extends pe{constructor(t){super("addtask"),this.task=t}},L2=class extends $s{ma(){return new M2(this.Gte.ga)}constructor(t){super("Hte"),this.Gte=t}};r();var B2=class extends pe{constructor(t){super("removetask"),this.task=t}},O2=class extends $s{ma(){return new B2(this.task.ga)}constructor(t){super("Zte"),this.task=t}},F2=class extends N2{Bte(t){this.yo(new L2(t))}Wte(t){this.yo(new O2(t))}constructor(){super()}},V2=class extends Bo{async yI(){await this.Xte(),this.gat("initialised")}async Xte(){try{await this.zte()}catch(t){0}}async zte(){const t=await this.a_.frt();for(const e of t){const t=this.Yte.qte(e.id,e.sourceDescription,e.parameters,this.Kte);this.jte(t),this.FT.yO(t),await t.Qte}}get Hk(){return this.mat}gat(t){this.mat=t,this.yo(new C2)}get Jte(){return this.FT}qte(t,e,i){void 0===i&&(i="persistent");const s=this.Yte.$te(t,e,i);return this.eee(s,i),this.FT.yO(s),this.jte(s),s}async eee(t,e){try{await this.iee(t,e)}catch(t){throw g("Unable to persist task - "+t)}}async iee(t,e){await this.a_.crt({key:t.o,id:t.o,sourceDescription:t.kc,parameters:t.fT},e)}jte(t){t.yn("rat",(()=>{t.Hk===Gt.EVICTED&&this.FT.jS(t)}))}constructor(t,e,i){super(),this.mat="uninitialised",this.FT=new F2,this.Yte=e,this.Kte=i,this.a_=t,this.yI()}};r(),r(),r(),r();var W2=class{get cB(){return this.see}get nee(){return this.ree}get oee(){return this.hee.cB}get aee(){let t=0,e=0;return this.wO.forEach((i=>{t+=i.timeRanges.cB,e+=i.totalQualityDurationToCache})),0===e?0:_.min(1,t/e)}get hee(){return this.uee}JO(t){return!!Pi(this.wO,t.wO)&&(!!ff(this.ree,t.ree)&&(!!ff(this.cB,t.cB)&&(!!ff(this.oee,t.oee)&&this.hee.sB(t.hee))))}constructor(t,e,i){if(this.ree=t,this.wO=e,this.see=i,0===this.wO.size)this.uee=ee.fB();else{let t=new ee([-1/0,1/0]);this.wO.forEach((e=>{t=t.Sn(e.timeRanges)})),this.uee=t}}};W2.QUALITY_TIME_RANGES_NULL_OBJECT=_u(),W2.CACHE_PROGRESSION_NULL_OBJECT=new W2(0,W2.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),W2.cee=W2.CACHE_PROGRESSION_NULL_OBJECT,r(),r(),r(),r();var U2=class extends pe{constructor(){super("progress")}},G2=class extends $s{ma(){return new U2}constructor(){super("M2t")}};r(),r();var H2=class extends pt{get name(){return"lee"}constructor(t,e){super(t,e)}};r(),r(),r();var Z2=function(t){return t[t.GC=0]="GC",t[t.HC=1]="HC",t}({});async function X2(t,e,i){const s=[];for(const n of t.bpt)s.push(z2(n,e,i));return{dee:await Promise.all(s)}}async function z2(t,e,i){const s=[];for(const n of t.oft)q2(n)||s.push(j2(n,e,i));return{Z:await Promise.all(s),pw:t.pw}}function q2(t){return t.Uat.every(K2)}var Y2=1;function K2(t){return t.xwt!==Y2&&Boolean(t.xwt)}async function j2(t,e,i){const s=[];for(const e of t.Uat)K2(e)||s.push(Q2(e,i));const n=await Promise.all(s),r=t.Urt[0],o=t.wG,h=o?function(t,e){const i=[],s=function(t){return t?Dh(t,"avc")?Ry.VIDEO_H264:Dh(t,"hev")||Dh(t,"hvc")||Dh(t,"hvt")||Dh(t,"lhv")||Dh(t,"lhe")||Dh(t,"lht")?Ry.VIDEO_H265:Dh(t,"mp4")?Ry.VIDEO_MP4:Dh(t,"mpeg2")?Ry.VIDEO_MPEG2:Dh(t,"mpeg")?Ry.VIDEO_MPEG:Ry.VIDEO_UNKNOWN:Ry.VIDEO_UNKNOWN}(t);for(const t of e){const e=t.J6.split(":").pop(),n=t.t9;i.push({mimeType:s,uuid:e,data:n})}const n=Z2.GC,r=em;return{type:n,schemeType:r,schemeDatas:i}}(r,o):void 0,a=oX(t,e,!0);return{EC:n,gs:t.Wtt,pw:t.pw,JG:h,Jgt:a}}async function Q2(t,e){const i={stack:[],error:void 0,hasError:!1};try{const r=rs(i,new $t,!1),o=await async function(t,e,i){const s=[],n=t.Not;t.hdt&&s.push({LO:0,ct:0,fee:t.hdt});const r=n.Qyt();let o=r;for(;o;){if(t.tlt(o)){const n=await t.ilt(o,e,i);for(let e=0;e<n.V;e++)s.push(J2(n.nlt(e),t))}else s.push(J2(o,t));o=n.olt(o)}const h=n.ebt(),a=h.BO-r.LO;return{ct:a,Srt:s}}(t,e,r.Bw),h={o:$2(t),CL:o,mG:t.mG,dp:t.dp,Ti:t.Ti,pw:t.pw,ji:t.ji};switch(t.pw){case Io.wk:break;case Io.lE:var s,n;h.Kdt=null!=(n=null==(s=t.Kdt)?void 0:s.uF())?n:NaN;break;case Io.cE:h.audioSamplingRate=t.Swt}return h}catch(t){i.error=t,i.hasError=!0}finally{ae(i)}}function J2(t,e){return{LO:t.LO,ct:t.ct,fee:e.clt(t)}}function $2(t){return t.Yct.Cn+"-"+(""+t.o)}function t3(t,e){const i=function(t){const e=function(t){const e=_u();for(const i of t){let t=e.get(i.tLt);t||(t={pw:i.pw,gN:[]},e.set(i.tLt,t)),t.gN.push(i)}return e}(t),i=$h();return e.forEach((t=>{for(const e of t.gN){let s=i.get(t.pw);s||(s=_u(),i.set(t.pw,s));let n=s.get(e.l);n||(n=[],s.set(e.l,n)),n.push(e)}})),i}(t);return function(t,e){const i=$h();return t.forEach(((t,s)=>{const n=_u();t.forEach(((t,i)=>{const r=[];for(const i of t){const t=e3(i,s,e);r.push(t)}n.set(i,r)})),i.set(s,n)})),i}(i,e)}function e3(t,e,i){const s=t.tLt,n={oLt:t,PLt:[]};for(const t of i)mj(e,s,t)&&n.PLt.push(t);return n}async function i3(t,e){const i=await e.JSt([t],{});return UK(i.jk,{},i.tTt)}async function s3(t,e){return nK(t)?async function(t,e){const i=t3(t.gN,t.YBt),s=await async function(t,e){const i=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await o3(n,s,e);i.push(r)}return i}(i,e),n=await async function(t,e){const i=[];for(const h of t){var s,n;const t=await c3(h.Ryt,e);var r,o;t.mG=h.mG,t.dp=h.Urt?r3(h.Urt):"",t.Ti=null!=(r=null==(s=h.HCt)?void 0:s.Ti)?r:0,t.ji=null!=(o=null==(n=h.HCt)?void 0:n.ji)?o:0,i.push(t)}return{pw:Io.Qk,Z:[{gs:cU,pw:Io.Qk,EC:i}]}}(t.YBt,e);return s.push(n),{ct:n3(s),_ee:[t.Ryt],Dpt:[{dee:s}]}}(t,e):function(t){const e=l3(t);return{ct:e.ct,_ee:[t.Ryt],Dpt:[{dee:[{pw:Io.Qk,Z:[{pw:Io.Qk,gs:cU,EC:[{o:t.Ryt,CL:e,mG:0,dp:"",Ti:0,pw:Io.Qk,ji:0}]}]}]}]}}(t)}function n3(t){let e=-1/0;for(const i of t)for(const t of i.Z)e=_.max(e,...t.EC.map((t=>t.CL.ct)));return e}function r3(t){return[t.$Ct,t.ePt,t._Bt].filter(ne).join(",")}async function o3(t,e,i){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,e]=t.value,n=await h3(e,i);s.push(n)}return{pw:a3(e),Z:s}}async function h3(t,e){const i=[],s=t[0].oLt;for(const s of t){const t=await u3(s,e);i.push(t)}return{gs:s.gs||cU,pw:a3(s.pw),EC:i}}function a3(t){switch(t){case el.cE:return Io.cE;case el.lE:return Io.lE;case el.qV:case el.QLt:return Io.wk;default:return Io.Qk}}function u3(t,e){const i=function(t){const e=t.oLt.Ryt,i=t.PLt.map((t=>t.Ryt));return e||(i.length?i[0]:void 0)}(t);return c3(i,e)}async function c3(t,e){let i={ct:0,Srt:[]};if(t){const s=await i3(t,e);vt(s)&&(i=l3(s))}return{o:t||"default",vee:t,CL:i,mG:0,dp:"",Ti:0,pw:Io.Qk,ji:0}}function l3(t){const e=[];let i,s=0;for(const n of t.Srt){const t=s;!n.JBt||void 0!==i&&aK(n.JBt.Ryt,i)||(e.push(d3(n.JBt,t)),i=n.JBt.Ryt),e.push(f3(n,t)),s+=n.ct}return{ct:s,Srt:e}}function d3(t,e){return{LO:e,ct:0,fee:_3(t.Ryt)}}function f3(t,e){return{LO:e,ct:t.ct,fee:_3(t.Ryt)}}function _3(t){return{qu:t.Ix,iut:t.nAt?[t.nAt.Cn,t.nAt.Cn+t.nAt.V]:void 0,AE:!1}}r(),r();var v3=class{async mee(t){if(!t.src)throw new g("Invalid typed source");const e=t.type;if(qh(e))return await this.gee(t);if(BT(e))return await this.pee(t);throw new g("Unexpected source type")}async gee(t){try{const e=await i3(t.src,this.$St);return await s3(e,this.$St)}catch(t){throw new g("Unable to fetch HLS manifest")}}async pee(t){try{const e=new CZ({MC:As.Ah(t.src),DSt:t.liveOffset,OSt:t.timeServer,AE:t.useCredentials},this.wee,vh.RE,this.$St,t.dash);return await e.W,await async function(t,e,i){const s=[];for(const n of t.Dpt)s.push(X2(n,e,i));const n=await Promise.all(s);return{ct:t.myt.twt(),_ee:[t.SSt],Dpt:n}}(e.Tr.ndt,t.contentProtection,this.ult)}catch(t){throw new g("Unable to fetch DASH manifest")}}constructor(t,e,i){this.$St=t,this.ult=e,this.wee=i}};r();var m3=class{yee(){const t=new as;return this.bee.push(t),this.Aee(),t.Bb}async See(t,e){try{await t}finally{this.Tee-=1,this.Aee(),0===this.bee.length&&0===this.Tee&&e.Mb(!0)}}Aee(){if(this.bee.length>0&&this.Tee<this.kee){this.bee.shift().Mb(),this.Tee+=1}}constructor(t){this.bee=[],this.Tee=0,this.kee=t}};var g3=class extends Bo{get Qte(){return this.yI()}async yI(){const t=new v3(this.$St,this.ult,this.wee);this.jCt=await t.mee(this.Eee);const e=function(t,e){if(Kt(t)){if(Dh(t,"%"))return C(t)/100*e;throw new g("Unexpected - Invalid string supplied as amount to cache.")}return e<t?e:t}(this.lTt.fT.amount,this.jCt.ct);let i;this.see=e;const s=tV(this.jCt._ee[0]),n=(await this.Art.Trt.vrt(s,"manifestURL")).filter((t=>qt(t.references,this.lTt.o))),r=[],o=this.lTt.fT.bandwidth;for(const t of this.jCt.Dpt)for(const e of t.dee)for(const t of w3(e,this.lTt.fT.preferredTrackSelection))for(const e of b3(t.EC,o))r.push(e);this.xee=_.ceil(r.map((t=>t.mG*function(t,e){let i=0;for(const s of t.CL.Srt.map((t=>t.ct)))if(i+=s,i>=e)return i;return i}(t,e)/8)).reduce(((t,e)=>t+e),0));const h=_u();if(n&&0!==n.length){const t=n.reduce(((t,e)=>t+e.byteSize),0);for(const t of n){const e=t.qualityId,i=new ee(t.startsAndEnds);if(h.has(e))h.get(e).timeRanges=h.get(e).timeRanges.KL(i).YL(5e-4);else{const t=Ti(r,(t=>t.o===e));var a;const s=_.min(this.see,null!=(a=null==t?void 0:t.CL.ct)?a:1/0);h.set(e,{timeRanges:i,totalQualityDurationToCache:s})}}i=new W2(t,h,this.see)}else{for(const t of r)h.set(t.o,{timeRanges:ee.fB(),totalQualityDurationToCache:_.min(t.CL.ct,this.see)});i=new W2(0,h,this.see)}this.Ree=i}get Iee(){return this.xee}get Ree(){return this.Cee}set Ree(t){this.Cee.JO(t)||(this.Cee=t,t.JO(W2.cee)||this.yo(new G2))}async pi(t){await this.do,await this.Pee(this.jCt,t)}async Pee(t,e){if(!t._ee)throw new g("Unexpected - manifest is missing locations");await this.Dee();const i=[];for(const s of t.Dpt)i.push(this.Nee(s,t._ee[0],e));return Us(i)}async Dee(){const t=await this.Mee.frt();for(const e of t){const t=await this.Art.krt.Cb(e.key);if(t)await p3(t,this.lTt.o,this.Art.krt,this.Kte);else try{await this.Art.krt.crt(e,this.Kte)}catch(t){throw new H2("Unable to store manifest with url: "+e.locationURL,t)}}await this.Mee.grt()}Nee(t,e,i){const s=[];for(const n of t.dee){const t=w3(n,this.lTt.fT.preferredTrackSelection);for(const n of t)s.push(this.Lee(n,e,i))}return Us(s)}async Lee(t,e,i){const s=this.lTt.fT.bandwidth,n=b3(t.EC,s);t.pw===Io.lE&&t.Jgt&&t.Jgt.iU.widevine&&"persistent"===t.Jgt.iU.widevine.licenseType&&(await this.Bee(t.Jgt),ot(i));const r=[];for(const t of n)r.push(this.Oee(t,e,i));return Us(r)}async Oee(t,e,i){ot(i);const s=t.CL.Srt[0].LO+this.see,n=[];let r=!1;for(const o of t.CL.Srt){if(o.LO>=s||this.stopIfFailed(r))break;await this.Fee(i),await this.Vee.yee(),n.push(this.Vee.See(this.Wee(o,t,e),this.Uee).catch((t=>(r=!0,Promise.reject(t)))))}return Us(n)}async Fee(t){if(null==t?void 0:t.Nw)throw await this.Uee.Bb,new $}async Gee(){return await this.do.catch(Bt),this.jCt}Bee(t){return Promise.resolve()}Hee(){return As.Mp("License renewal unsupported in this SDK."),Promise.resolve()}async Wee(t,e,i){const s=this.Art.Trt,n=eV(t.fee.qu,t.fee.iut),r=await s.Cb(n);if(r)await p3(r,this.lTt.o,s,this.Kte),this.Zee(r,!1);else try{const s=await this.Xee(t.fee),{segmentMetadataEntry:n,segmentEntry:r}=this.zee(t,e,i,s);await this.Art.brt((async t=>{await t.Trt.crt(n,this.Kte),await t.Srt.crt(r,this.Kte)})),this.Zee(n,!0)}catch(e){throw new H2("Unable to store segment with url: "+t.fee.qu,e)}}async Xee(t){const e=await this.dct.jat(t,{nut:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,wE:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.fct(e)}async fct(t){return{buffer:await t.xk()}}zee(t,e,i,s){const n=eV(t.fee.qu,t.fee.iut),r=t.LO,o=t.ct,h=this.qee(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:tV(i),qualityId:e.o,byteSize:h,startsAndEnds:new ee([r,r+o]).OL,references:[this.lTt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:tV(i),data:s,references:[this.lTt.o]}}}qee(t){return t.buffer.byteLength}Zee(t,e){const i=t.qualityId,s=this.Cee,n=s.wO;n.get(i).timeRanges=n.get(i).timeRanges.KL(new ee(t.startsAndEnds)).YL(5e-4),this.Ree=new W2(e?s.nee+t.byteSize:s.nee,n,this.see)}stopIfFailed(t){return!1}constructor(t,e,i,s,n,r,o,h){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.Uee=new as,this.Cee=W2.cee,this.lTt=t,this.Art=e,this.$St=i,this.Mee=s,this.dct=n,this.ult=r,this.wee=h,this.Kte=o,this.xee=-1;const a=this.lTt.kc.sources[0];this.Eee=a,this.do=this.yI(),this.Vee=new m3(this.lTt.fT.parallelTasksThreshold)}};async function p3(t,e,i,s){qt(t.references,e)||(t.references.push(e),await i.crt(t,s))}function w3(t,e){switch(t.pw){case Io.cE:return y3(t.Z,e.audioTrackSelection);case Io.wk:return y3(t.Z,e.textTrackSelection);default:return y3(t.Z,[])}}function y3(t,e){if(0===e.length)return t.length?[t[0]]:[];const i=[];for(const s of t)e.indexOf(s.gs)>-1&&i.push(s);return i}function b3(t,e){if(!t.length)return[];const i=[...t].sort(yW),s=i.filter((t=>t.mG<=e));return s.length>0?[s.pop()]:[i.shift()]}var A3=class{async Yee(){await this.Art.brt((async t=>{await this.Kee(t),await this.jee(t),await this.Qee(t),await this.Jee(t)}))}async Kee(t){const e=t.Ert,i=this.lTt.o;await e.jS(i)}async jee(t){const e=t.Trt,i=t.Srt,s=this.lTt.kc.sources[0];if(!Cn(s))return;const n=tV(s.src),r=(await e.vrt(n,"manifestURL")).filter((t=>qt(t.references,this.lTt.o)));for(const t of r)we(t.references,this.lTt.o),0===t.references.length?(await e.jS(t.key),await i.jS(t.key)):await e.crt(t)}async Qee(t){const e=t.krt,i=this.$ee(),s=(await e.ert(i)).filter((t=>qt(t.references,this.lTt.o)));for(const t of s)we(t.references,this.lTt.o),0===t.references.length?await e.jS(t.key):await e.crt(t)}$ee(){if(!this.jCt)return[];const t=this.lTt.kc.sources[0];if(!Cn(t))return[];const e=tV(t.src),i=function(t){if(!t)return[];const e=[];for(const i of t.Dpt)for(const t of i.dee)for(const i of t.Z)for(const t of i.EC)t.vee&&e.push(t.vee);return function(t){return t.reduce(((t,e)=>(t.indexOf(e)<0&&t.push(e),t)),[])}(e)}(this.jCt).map((t=>({src:t}))).map((t=>tV(t.src)));return[e,...i]}async Jee(t){const e=t.xrt,i=(await e.frt()).filter((t=>qt(t.references,this.lTt.o)));for(const t of i)we(t.references,this.lTt.o),0===t.references.length?(await e.jS(t.key),this.tie(t)):await e.crt(t)}tie(t){}constructor(t,e,i){this.lTt=t,this.Art=e,this.jCt=i}},S3=new class{uit(t,e,i){return new A3(t,e,i)}};r(),r();var T3=class{get ga(){return this.Za||(this.Za=function(t){return{renew(e){t.eie(e)}}}(this)),this.Za}eie(t){this.iie(t)}async iie(t){try{await this.sie.Hee(t)}catch(t){0,this.QE.gat(Gt.ERROR)}}constructor(t,e){this.QE=t,this.sie=e}},k3=class extends Je{get Qte(){return this.sie.Qte}get ga(){return this.Za||(this.Za=function(t){let e,i={get id(){return t.o},get status(){return t.Hk},get source(){return t.kc},get parameters(){return t.fT},get duration(){return t.ct},get cached(){return t.nie.ks()},get secondsCached(){return t.rie},get percentageCached(){return t.oie},get bytes(){return t.hie},get bytesCached(){return t.aie},get license(){return t.jq.ga},start(){t.Cn()},pause(){t.bI()},remove(){t.jS()},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new wD(t,["M2t","rat"],i),i}(this)),this.Za}get o(){return this.US}get jq(){return this.uie}get Hk(){return this.mat}gat(t){this.mat!==t&&(this.mat=t,this.yo(new C2))}get kc(){return this.wc}get fT(){return this.cie}get ct(){return this.sie.Ree.cB}get nie(){return this.sie.Ree.hee}get rie(){return this.sie.Ree.oee}get oie(){return this.sie.Ree.aee}get hie(){return this.sie.Iee}get aie(){return this.sie.Ree.nee}Cn(){this.mat===Gt.EVICTED||this.mat===Gt.DONE||this.lie()}async lie(){try{this.gat(Gt.LOADING);const t=new $t;this.die=t,await this.sie.pi(t.Bw),this.gat(Gt.DONE)}catch(t){Se(t)?this.gat(Gt.IDLE):this.gat(Gt.ERROR)}finally{this.die.Ww()}}bI(){this.die.Xw()}jS(){this.Hk===Gt.LOADING?(this.yn("rat",this.evictOnLoading),this.bI()):this.fie()}async fie(){try{const t=await this.sie.Gee();await S3.uit(this,this.Art,t).Yee(),this.sie.Ree=W2.cee,this.gat(Gt.EVICTED)}catch(t){0,this.gat(Gt.ERROR)}}constructor(t,e,i,s,n,r){super(),this.die=new $t,this.evictOnLoading=()=>{this.fn("rat",this.evictOnLoading),this.fie()},this.US=t,this.wc=e,this.cie=i,this.Art=s,this.sie=n.uit(this,this.Art,r),this.uie=new T3(this,this.sie),this.mat=1===this.sie.Ree.aee?Gt.DONE:Gt.IDLE,this.sie.yn("M2t",(t=>{this.Ds(t),1===this.oie&&this.gat(Gt.DONE)}));const o=new Date,h=this.cie.expirationDate.getTime()-o.getTime();(function(t){return t<2147483647})(h)&&u((()=>this.fie()),h)}};var E3=class{$te(t,e,i){const s=aP();return this.qte(s,t,e,i)}qte(t,e,i,s){return new k3(t,e,i,this.Art,this._ie,s)}constructor(t,e){this.Art=t,this._ie=e}};r();var x3=30,R3=5;function I3(t){if(!t)throw new g("Unexpected - The cache parameters are undefined");const e=function(t){if(Kt(t)&&!Dh(t,"%"))return x(t);return t}(t.amount);!function(t){if(function(t){return Kt(t)&&Dh(t,"%")}(t)){const e=C(t);if(S(e)||e<0||e>100)throw new g("The amount as percentage must be between 0 and 100 percent.")}if(!Kt(t)&&S(t))throw new g("The amount must be a number or a string")}(e);const i=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+x3),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||bd(t)&&t>new Date}(t))throw new g("Invalid expiration date for the cache parameters")}(i);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(S(t)||t<0)throw new g("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return R3;if(S(t))throw new g("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:e,expirationDate:i,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var C3=class{set T7t(t){this.mie=t,this.gie=0,this.pie=0,this.wie=void 0}get T7t(){return this.mie}q4t(){if(!this.mie)return;const t=this.mie.BJt;for(;this.gie<t.length;){const e=t[this.gie];for(void 0===this.wie&&(this.wie=A0(e),this.pie=0);this.pie<this.wie.length;){const t=this.wie[this.pie];if(this.pie++,void 0!==t.Zqt)return t.Zqt}this.gie++,this.wie=void 0}}tr(){for(this.T7t=void 0,this.OT.Xw(),this.OT=new $t;this.yie.length;)this.o7t()}bie(t){return new V2(this.Art.Ert,t,"temporary")}async SZt(t){const e=b2(t.lKt,this.AQ.ads.allowedMimeTypes);if(!e.length)return;const i=await RI.Lg.qH(e,DC({sources:e}));if(!i.t.LH())return;this.sie||(this.sie=new this._ie(this.aW));const s=this.Art,n=new E3(s,this.sie),r=this.bie(n).qte(DC({sources:i.kc}),I3({amount:10,bandwidth:kl.Lg.rG()||this.dZ.Sj}),"temporary");this.yie.push(r);const o=this.sie.uit(r,s,"temporary");this.OT.Xw(),this.OT=new $t,go(o.pi(this.OT.Bw),this.OT).then(Bt),this.Aie(o,t)}constructor(t,e,i,s){this.yie=[],this.gie=0,this.pie=0,this.s7t=async()=>{const t=this.q4t();t&&await this.SZt(t)},this.o7t=()=>{const t=this.yie.shift();null==t||t.jS()},this.Aie=async(t,e)=>{let i=!1;for(;!i;)await t.uy("M2t"),i=1===t.Ree.aee;e.ct<5&&this.s7t()},this.AQ=t,this.aW=e,this.OT=new $t,this._ie=i,this.dZ=s,this.Art=new uV}};r(),r();var P3={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new ee([0,0]).OL,references:[]},D3={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},N3=class t extends xW{async xlt(t,e,i,s){try{return await super.xlt(t,e,i,s)}catch(t){Zr(t)}const n=await this.Sie.xlt(t,e,i,s);return await this.Tie(t,e,n),n}async Tie(e,i,s){if(void 0===this.kie)return;const n=this.Art.Trt,r=eV(e,i),o=await n.Cb(r);if(o)await p3(o,this.kie,n,this.Kte);else try{const e={buffer:s},{segmentMetadataEntry:i,segmentEntry:n}=t.zee(r,e,this.kie);await this.Art.brt((async t=>{await t.Trt.crt(i,this.Kte),await t.Srt.crt(n,this.Kte)}))}catch(t){throw new H2("Unable to store segment with url: "+e,t)}}static zee(t,e,i){return{segmentMetadataEntry:la({},P3,{key:t,segmentURLsegmentByteRange:t,references:[i]}),segmentEntry:la({},D3,{key:t,segmentURLsegmentByteRange:t,data:e,references:[i]})}}constructor(t,e,i,s,n){super(t),this.Sie=new EW(e),this.Art=i,this.kie=s,this.Kte=n}};var M3=class{uit(t,e,i){void 0===i&&(i="persistent");const s=t.kc.sources[0];if(OT(s))throw new g("Caching THEOlive sources is not supported");const n=Boolean(s.useCredentials),r=new BV(this.aW,xa.Qk),o=new HZ(this.aW,n),h=new iV(e.krt,e.Trt,e.Srt,e.xrt),a=function(t,e,i,s,n){return new N3(e,t,i,s,n)}(this.aW,h,e,t.o,i),u=new aV,c=new YZ(qZ(o,h),u,t);return this.Eie(t,e,c,u,r,a,i)}constructor(t){this.aW=t}},L3=class extends M3{Eie(t,e,i,s,n,r,o){return new g3(t,e,i,s,n,r,o,fV())}},B3=L3,O3=class t extends Et{get q1t(){return this}static get X1t(){return z.t$t}get X1t(){return t.X1t}a8t(t,e,i){e===Sa.Gst&&this.M9?oh(this.X4t([t])):this.xie.push(t)}bR(){return this.Rie.F7t?this.Rie.yR:this.fst()}AR(t,e){}_d(){return this.Rie.ct}ER(){return this.Rie.kR}xR(){}IR(){}WR(){return this.Rie.FR}UR(t){this.FR!==t&&(this.Rie.FR=t,this.yo(new eh(this.yR,this.dI)))}XR(){return this.Rie.ZR}eI(){return this.Rie.tI}sI(){return ee.fB().ks()}aI(){return this.Rie.hI}lI(){return this.Rie.cI}fI(){return this.Rie.dI}_I(t){this.dI!==t&&(this.Rie.dI=t,this.yo(new eh(this.yR,this.dI)))}async AI(){if(this.Iie)return;this.yo(new Xt(this.yR)),this.Cie(),this.xie.length&&(this.Iie=this.X4t(this.xie),await this.Iie,this.Iie=void 0),await this.Pie._7t(this.ta.bR());const t=this.Die;4!==t&&1!==t&&5!==t||(!this.o$t&&this.Nie.length?this.Mie():this.o$t?(this.Lie=!0,this.Rie.AI()):(this.v1t(),this.ta.AI()),this.Die=3)}bI(){3===this.Die&&(this.Rie.bI(),this.Die=4)}i7t(){this.Pie.i7t()}Cn(){this.Die=1,this.Pie.Cn()}async SI(){this.Pie&&(this.Pie.jn(),this.Bie(!1),this.vte.SI(),this.Die=5,this.o$t&&(this.Pie.S7t(this.o$t.kjt),this.o$t=void 0)),this.M9=!1,this.Lie=!1,Pn(this.Nie),this.r2t&&(this.v1t(),this.ta.ge()),Pn(this.xie),await this.Rie.SI(),await this.W7t.tr()}RD(){this.Rie.DQt(),this.vte.DQt()}yI(){this.W7t.yI(),this.Cie()}J1t(t){return!(t.type!==Mi.xy||!this.Pie||!this.Pie.l7t(-1))&&(this.Pie.u7t().then(Bt),!0)}ge(){void 0!==this.Rie.U7t&&(this.W7t.ge(),this.Rie.ge()),void 0!==this.vte.bte&&this.vte.ge()}be(){this.W7t.be(),this.Rie.be(),this.vte.be()}async X4t(t){const e=await I2.Lte(t,this.aW,this.K1t);if(!e.length){const t="Ads could not be loaded.";return this.K1t.yo(zh.t2t(new uo($c.ADBLOCK,Hs.FILE_NOT_FOUND),t)),void(this.M9&&!this.o$t&&0===this.Nie.length&&this.Oie())}this.Pie.b7t(e),this.K1t.yo(new Ys),this.r2t||this.ta.ZR||this.Pie._7t(this.ta.bR()),0!==this.Die&&5!==this.Die||this.Cn()}p7t(t){this.Nie.push(...t);for(const e of t)this.M9&&!this.r2t&&this.Mie()}async Mie(){if(2!==this.Die&&!this.Fie){0,this.Fie=!0,this.Die=2;const t=this.o$t;this.Vie(),this.o$t?(await this.o$t.kjt.J8t(this.K1t),this.Wie()||(this.Fie=!1),this.K1t.yo(new T1(this.Uie(this.o$t))),await this.Gie()):((null==t?void 0:t.kjt.$8t())&&this.K1t.yo(new Lh(this.Uie(t))),this.Fie=!1,this.Die=1,this.Oie())}}Oie(){this.v1t(),this.ta.ge(),this.ta.kR?this.ta.yo(new Fs(this.ta.bR())):this.ta.AI()}Vie(){let t;if(this.o$t&&this.Wie())t=this.o$t.kjt;else{if(0===this.Nie.length)return;t=this.Nie.shift()}if(!t)return;const e=t.Pc();e?this.o$t=e:(this.o$t&&(this.Pie.S7t(this.o$t.kjt),this.o$t=void 0),this.o$t=void 0)}async Gie(){const t=this.o$t?function(t){var e,i;const s=null==(i=t.Jjt)||null==(e=i.Rqt)?void 0:e.Iqt();return void 0===s?void 0:new b0(s)}(this.o$t):void 0;if(t){if(!this.o$t)return;this.Hie=t,this.Zie(this.o$t.Qqt),this.Xie(lc.zKt);const e=this.Hie.Pc();this.o$t.kjt.$8t()&&(this.vte.z7t(),1===this.o$t.kjt.Wut&&this.K1t.yo(new Va(this.Uie(this.o$t)))),await this.ete(e)}else this.Die=1,this.Fie=!1,this.o$t=void 0,this.Mie()}async ete(t){if(t){var e;let s=ne(t.Zqt),n=ne(t.qqt);var i;const r=null!=(i=null==(e=t.zqt)?void 0:e.gYt)?i:[],o=r.length>0,h=this.o$t,a=this.Uie(h);if(t.Zqt){if(t.Zqt.Yl=h,void 0!==h.ant.skipOffset){const e=M$.Kjt(h.ant.skipOffset,t.Zqt.ct);void 0!==e&&e<t.Zqt.ct&&(t.Zqt._Kt=e)}const e=a.OJt(t.Zqt,r,t.Yqt,h.ant);this.vte.z7t(),this.p3t(),await this.Rie.ete(e,t.lt,{width:this.ta.we.offsetWidth,height:this.ta.we.offsetHeight}),s=!0}if(t.qqt){const e=t.qqt.Kqt[0];if(e.Yl=h,void 0!==h.ant.skipOffset){const t=M$.Kjt(h.ant.skipOffset,this.ta._d());t&&(e.Yl._Kt=t)}const i=s?[]:r,o=a.FJt(e,i,t.qqt,t.Yqt,h.ant);s&&this.Rie.pte(),await this.vte.ete(o,t.lt,{width:this.ta.we.offsetWidth,height:this.ta.we.offsetHeight}),n=!0}if(s){this.Die=3,this.Rie.ge();const t=0===a.ZBt;this.Lie=t,this.W7t.bI(),this.Rie.AI(),this.ta.bI(),this.ta.be(),this.p3t(),this.Rie.cte()}n&&(this.Die=3,this.vte.ge(),this.vte.cte()),(s||n||o)&&this.zie(t.Uqt),s||n||await this.qie(),!s&&n&&(this.Wie()||this.Nie.length>0?this.Mie():(this.Oie(),this.o$t=h))}else null===t?await this.qie():this.Bie(!0)}qie(){const t=this.Hie;return this.ete(t&&t.Pc())}Bie(t){this.Xie(lc.qKt),this.Yie(),this.Die=1;const e=void 0!==this.o$t&&this.o$t.kjt.j8t();if(this.Fie=!1,e)t&&(this.Die=1,this.Mie());else{if(!this.r2t)return;this.ta.ge(),!this.ta.kR&&t&&this.ta.AI(),this.v1t()}}v1t(){this.Kie(),super.v1t()}Kie(){if(this.ta.kR&&(this.Die=5),this.o$t){const t=this.o$t.kjt;t.$8t()&&this.K1t.yo(new Lh(this.Uie(this.o$t))),this.Pie.S7t(t),this.o$t=void 0}}Zie(t){this.jie=this.jie.concat(t)}Yie(){this.jie=[]}Qie(t){this.ta.we.appendChild(t)}Xie(t){for(const e of this.jie)e.LX===t&&Nr(e.eventURL)}zie(t){this.Rie.N7t(lc.VKt);for(const e of t)Nr(e)}get zst(){return this.o$t?this.Uie(this.o$t):null}get Zst(){return this.o$t?[this.Rie.U7t,this.vte.bte].filter(ne):[]}get qst(){const t=this.Nie.concat(this.Pie.qst.filter((t=>!t.GJt())));return Ke(t,(t=>t.Z8t.Vc.filter((t=>!t.GJt()))))}get Yst(){return this.Pie.qst.map((t=>t.Z8t))}jst(t){const e=this.c8t();for(const i of e)kt(i.sources,i.timeOffset)||t.o6(i,Sa.Gst,!1)}c8t(){const t=[];for(const e of this.Zst.concat(this.qst))t.push(e.ant);const e=this.Nie.concat(this.Pie.qst.filter((t=>!t.GJt())));for(const i of e)for(const e of i.BJt)e.W||t.push(e.ant);return t.push(...this.xie),jm(t)}Wie(){return!!this.o$t&&A0(this.o$t).some((t=>t.Zqt))}Uie(t){return t.kjt.Z8t}Mte(){return this.Jie}wI(){return this.W7t.wI()}fR(){return this.W7t.fR()}u2t(t){this.Pie.u2t(t)}async gn(){await super.gn(),this.ta.fn(Mi.so,this.Cie),this.K1t.mK(this.Rie.K1t),this.K1t.mK(this.vte.K1t),this.K1t.mK(this.Pie),this.Rie.gn(),this.vte.gn(),await this.W7t.gn()}constructor(t,e,i,s,n,r){super(t,e),this.Nie=[],this.Die=0,this.jie=[],this.Fie=!1,this.M9=!1,this.Lie=!0,this.xie=[],this.$ie=t=>{t.type===Mi.so&&this.Lie?this.Lie=!1:this.yo(t)},this.Cie=()=>{this.M9=!0},this.tse=async()=>(this.Die=1,await this.Rie.z7t(),this.ete(this.Hie.Pc())),this.ese=async t=>{const e=new uo($c.PLAYBACK,Hs.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.K1t.yo(zh.t2t(e,t)),await this.Rie.z7t(),this.ete(this.Hie.Pc())},this.ise=()=>(this.vte.z7t(),this.ete(this.Hie.Pc())),this.sse=t=>{const e=new uo($c.PLAYBACK,Hs.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.K1t.yo(zh.t2t(e,t)),this.vte.z7t(),this.ete(this.Hie.Pc())},this.aW=r,this.W7t=i,this.vte=new R2(this.sse,this.ise,this),this.Rie=new E2(this.ese,this.tse,this.vte,s,this,t.Uu,i),this.Qie(this.vte.k7t),this.Qie(this.Rie.k7t);const o=new C3(s,r,L3,n);this.Pie=new g2(this.ta,this,this.K1t,o),this.Rie.Jw(this.$ie),this.vte.Jw(this.Ds),this.K1t.iu(this.Rie.K1t),this.K1t.iu(this.vte.K1t),this.K1t.iu(this.Pie),this.Jie=new k0(this,this.ta),this.Uu.yn(Ya.pn,this.Ds),this.ta.yn(Mi.so,this.Cie)}};Ih.Lg.EZ(new class{get U1t(){return O3.X1t}kZ(t){return t&&("string"!=typeof t.integration||t.integration===gu.DEFAULT||t.integration===gu.CSAI||t.integration===gu.THEO)}G1t(t,e,i){const s=new BI(t.we,i,t.aR,t.nst,t.vI,t.ust,t.Ll);return new O3(t,e,s,i,t.nst,t.aR)}o6(t,e,i,s){i.a8t(t,e,s)}Uz(t){const e=z$(t.sources);if(!e)return;const i={integration:gu.CSAI,sources:e};"vast"===i.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===i.sources.type&&void 0!==t.timeOffset&&lt("Do not set timeOffset for VMAP ad sources. VMAP ads have their own offsets included.");const s=jc(t.timeOffset);void 0!==s&&(i.timeOffset=s);const n=jc(t.skipOffset);return void 0!==n&&(i.skipOffset=n),i}}),r(),r();var F3=class{bj(){var t;this.E6||(null==(t=this.x8t)||t.initialize(),this.E6=!0)}get k7t(){return this.u0t}get nse(){return this.rse.offsetHeight}get ose(){return this.rse.offsetWidth}get hse(){return this.x8t}ase(t){"linear"===t?this.u0t.style.marginTop="0px":"nonlinear"===t&&(this.u0t.style.marginTop="-45px")}ge(){this.u0t.style.opacity="1",this.u0t.style.pointerEvents=""}be(){this.u0t.style.opacity="0",this.u0t.style.pointerEvents="none"}Ww(){var t;null==(t=this.x8t)||t.destroy(),this.x8t=void 0}constructor(t,e){this.x8t=void 0,this.E6=!1,this.Det=t;const i=h.createElement("div");i.className="theoplayer-ima-wrapper",ya(i),i.style.zIndex="10",Z.Qs&&function(t,e){t.addEventListener(e,Pd)}(i,"mousedown"),e.appendChild(i);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.rse=s,i.appendChild(s),this.u0t=i,this.x8t=new google.ima.AdDisplayContainer(this.rse,this.Det)}};r(),r(),r();var V3=class{get iKt(){return this.use.getAdId()}get t9t(){const t=this.use.getAdPodInfo();if(void 0!==t)try{return{v6t:t.getAdPosition(),DJt:t.getMaxDuration(),cse:t.getPodIndex(),ZBt:t.getTimeOffset(),m6t:t.getTotalAds(),lse:t.getIsBumper()}}catch(t){return}}get Oqt(){return this.use.getAdSystem()}get dse(){return this.use.getAdvertiserName()}get xYt(){var t;return null!=(t=this.use.getApiFramework())?t:void 0}get zqt(){return this.pYt.map((t=>({IYt:t.getAdSlotId(),Ik:t.getContentType(),P2t:t.getContent(),Ti:t.getHeight(),ji:t.getWidth()})))}get Ik(){var t;return null!=(t=this.use.getContentType())?t:void 0}get aYt(){return this.use.getCreativeId()}get G9t(){return this.use.getCreativeAdId()}get fse(){return this.use.getDealId()}get MN(){return this.use.getDescription()}get ct(){return this.use.getDuration()}get ji(){return this.use.getWidth()}get Ti(){return this.use.getHeight()}get gKt(){var t;return null!=(t=this.use.getMediaUrl())?t:void 0}get _se(){return this.use.getMinSuggestedDuration()}get W9t(){return this.use.getSkipTimeOffset()}get vse(){return this.use.getSurveyUrl()}get eH(){return this.use.getTitle()}get F9t(){return this.use.getTraffickingParameters()}get V9t(){return this.use.getTraffickingParametersString()}get Yqt(){return this.use.getUniversalAdIds().map((t=>({H9t:t.getAdIdRegistry(),Z9t:t.getAdIdValue()})))}get M8t(){return this.use.getUiElements()}get U9t(){return this.use.getVastMediaBitrate()}get B9t(){return this.use.getVastMediaHeight()}get L9t(){return this.use.getVastMediaWidth()}get P9t(){return this.use.getWrapperAdIds()}get D9t(){return this.use.getWrapperAdSystems()}get N9t(){return this.use.getWrapperCreativeIds()}get z6t(){return this.use.isLinear()}constructor(t){this.use=t;const e=new google.ima.CompanionAdSelectionSettings;e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,e.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,e.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.pYt=t.getCompanionAds(0,0,e)}};function W3(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var U3=class extends Bo{_I(t){var e;null==(e=this.LJt)||e.setVolume(t)}fI(){return this.LJt.getVolume()}_9t(){return this.LJt.getRemainingTime()}Ww(){Pn(this.Dc),this.Xu.fn(Ya.pn,this.gse),this.LJt.removeEventListener(google.ima.AdEvent.Type.LOADED,this.pse),this.LJt.removeEventListener(W3(),this.forwardAdEventListener),this.LJt.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.LJt.destroy()}Cn(){this.LJt.start()}S8t(){this.LJt.resume()}bI(){this.LJt.pause()}RD(){this.LJt.skip()}SI(){this.LJt.stop()}Q6t(){const t=this.LJt.getCurrentAd();if(t)return this.wse(t)}I8t(){return this.LJt.getCuePoints()}wse(t){let e=Ti(this.Dc,(e=>e.use===t));return e||(e=new V3(t),this.Dc.push(e)),e}F8t(t){this.LJt.updateAdsRenderingSettings(X3(t))}constructor(t,e,i){super(),this.Dc=[],this.pse=t=>{t.getAd().isLinear()?this.x8t.ase("linear"):this.x8t.ase("nonlinear")},this.gse=()=>{this.LJt.resize(this.x8t.ose,this.x8t.nse,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const e=t.getAd(),i=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:Ts.t5t,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:Ts.e5t,[google.ima.AdEvent.Type.CLICK]:Ts.i5t,[google.ima.AdEvent.Type.DURATION_CHANGE]:Ts.Sy,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:Ts.s5t,[google.ima.AdEvent.Type.STARTED]:Ts.n5t,[google.ima.AdEvent.Type.IMPRESSION]:Ts.r5t,[google.ima.AdEvent.Type.PAUSED]:Ts.xZ,[google.ima.AdEvent.Type.RESUMED]:Ts.o5t,[google.ima.AdEvent.Type.AD_PROGRESS]:Ts.h5t,[google.ima.AdEvent.Type.AD_BUFFERING]:Ts.a5t,[google.ima.AdEvent.Type.FIRST_QUARTILE]:Ts.u5t,[google.ima.AdEvent.Type.MIDPOINT]:Ts.NKt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:Ts.c5t,[google.ima.AdEvent.Type.COMPLETE]:Ts.MKt,[google.ima.AdEvent.Type.USER_CLOSE]:Ts.l5t,[google.ima.AdEvent.Type.LINEAR_CHANGED]:Ts.d5t,[google.ima.AdEvent.Type.LOADED]:Ts.f5t,[google.ima.AdEvent.Type.AD_CAN_PLAY]:Ts._5t,[google.ima.AdEvent.Type.AD_METADATA]:Ts.v5t,[google.ima.AdEvent.Type.AD_BREAK_READY]:Ts.m5t,[google.ima.AdEvent.Type.INTERACTION]:Ts.g5t,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:Ts.p5t,[google.ima.AdEvent.Type.SKIPPED]:Ts.w5t,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:Ts.y5t,[google.ima.AdEvent.Type.LOG]:Ts.b5t,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:Ts.A5t,[google.ima.AdEvent.Type.VOLUME_CHANGED]:Ts.S5t,[google.ima.AdEvent.Type.VOLUME_MUTED]:Ts.T5t}[t]}(t.type),s={type:i,date:new Date,tnt:e?this.wse(e):void 0,O6t:H1(i,t.getAdData())};this.yo(s)},this.forwardAdErrorEventListener=t=>{this.yo({date:new Date,tnt:void 0,type:W1.k5t,O6t:{g9t:z1(t.getError())}})},this.LJt=t,this.x8t=e,this.Xu=i,this.Xu.yn(Ya.pn,this.gse),this.LJt.init(this.x8t.ose,this.x8t.nse,google.ima.ViewMode.NORMAL),this.LJt.addEventListener(google.ima.AdEvent.Type.LOADED,this.pse),this.LJt.addEventListener(W3(),this.forwardAdEventListener),this.LJt.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}};r();var G3=class extends $s{get yse(){return this.bse}get k7t(){return this.u0t}ma(){return new H3(this.bse)}constructor(t,e){super("U8t"),this.bse=t,this.u0t=e}},H3=class extends pe{get adsManager(){return this.bse}constructor(t){super("adsmanagerloaded"),this.bse=t}},Z3=class extends Bo{T8t(){var t;null==(t=this.k8t)||t.contentComplete()}async X4t(t,e,i){if(this.Ase)throw new g("Only one ImaAdsRequest can be made at a time.");if(!this.Sse.hse)throw new g("AdDisplayContainer is not initialized.");this.k8t=new google.ima.AdsLoader(this.Sse.hse),this.k8t.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.k8t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.Ase=new as,this.Tse=e,this.kse=i;const s=new google.ima.AdsRequest;return t.r4t?s.adTagUrl=t.r4t:t.o4t&&(s.adsResponse=t.o4t),s.linearAdSlotWidth=t.$3t,s.linearAdSlotHeight=t.t4t,s.nonLinearAdSlotWidth=t.e4t,s.nonLinearAdSlotHeight=t.i4t,s.contentDuration=t.a4t,s.setAdWillAutoPlay(t.s4t),s.setAdWillPlayMuted(t.n4t),t.h4t&&(s.omidAccessModeRules=t.h4t),this.k8t.requestAds(s),this.Ase.Bb}Ww(){var t;void 0!==this.k8t&&(this.k8t.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.k8t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.k8t.destroy(),this.k8t=void 0),null==(t=this.Ase)||t.Lb("AdsLoader destroyed"),this.Ase=void 0}constructor(t,e){super(),this.onAdsManagerLoadedListener=t=>{if(this.Tse&&this.kse&&this.Ase){var e;const i=X3(this.kse),s=this.Tse,n=t.getAdsManager({get currentTime(){return s.yR},get duration(){return s.ct}},i),r=new U3(n,this.Sse,this.Xu);this.yo(new G3(n,this.Sse.k7t)),null==(e=this.Ase)||e.Mb(r),this.Ase=void 0}},this.onAdsManagerErrorListener=t=>{var e;const i={_b:t.getError().getMessage(),g6t:t.getError().getVastErrorCode(),ljt:t.getError().getErrorCode(),pw:Z1(t.getError().getType()),p6t:void 0};null==(e=this.Ase)||e.Lb(i),this.Ase=void 0},this.Xu=e,this.Sse=t}};function X3(t){const e=new google.ima.AdsRenderingSettings;return e.enablePreloading=t.L8t,t.M8t&&(e.uiElements=t.M8t),e.mimeTypes=t.N8t,void 0!==t.O8t&&(e.playAdsAfterTime=t.O8t),void 0!==t.B8t&&(e.loadVideoTimeout=t.B8t),void 0!==t.O9t&&(e.bitrate=t.O9t),void 0!==t.O8t&&(e.playAdsAfterTime=t.O8t),e.restoreCustomPlaybackStateOnAdBreakComplete=!0,e}r();var z3=class extends Bo{get yR(){return this.ta.nI?this.Ese:this.ta.bR()}get ct(){return this.ta._d()}get FR(){return this.ta.FR}get dI(){return this.ta.dI}tr(){this.Ese=0}constructor(t){super(),this.ta=t,this.Ese=this.ta.bR(),this.ta.yn(Mi.$y,(()=>{this.ta.nI||(this.Ese=this.ta.bR()),this.yo(new I(this.yR,void 0))}))}};l2.Lg.registerWebImaAdPlayerConstructor((function(t,e,i){a2(i);const s=u2(i)?t.wI():void 0,n=new F3(s,t.we),r=new Z3(n,t.Uu),o=new z3(t);return new c2(t,e,i,t.ost,n,r,o)})),r(),r(),r();var q3=class extends sc{get xse(){return this.ta===this.bst?this.l3t:this.bst}ur(t,e,i,s,n){this.ta===this.l3t&&this.l3t.Rse(),(n||!s.ZR||s.kR)&&this.ta.AI()}AR(t,e){}pR(t){}Ise(t,e){const i=t-this.l3t.Cse;return super.AR(i,e)}Pse(t){return super.pR(t)}wR(){return this.bst.bt}Ya(){return this.bst.Ya()}_d(){return this.bst._d()}sI(){const t=ee.xn(this.bst.sI()).Ab(this.l3t.Cse);if(this.Dse())return t.ks();const e=ee.xn(this.l3t.sI());let i=e;return J4(this.bst)||(i=t.KL(e)),i=i.Sn(ee.dB(0,this.bR())),i.ks()}bR(){return this.Nse(super.bR())}Nse(t){return this.ta===this.l3t?this.l3t.Mse+t:this.l3t.Cse+t}gR(){return this.Lse(super.bR())}Lse(t){return this.ta===this.l3t&&this.Bse?new Date(this.Bse.getTime()+1e3*t):this.bst.mR}vR(){const t=ee.xn(this.bst.vR()).Ab(this.l3t.Cse);if(this.Dse())return t.ks();const e=ee.xn(this.l3t.vR());if(t.jn(t.V-1)<e.Cn(0))return e.ks();return t.KL(e).ks()}CI(t){switch(t.type){case Mi.$y:return this.yo(new I(this.Nse(t.currentTime),t.currentProgramDateTime)),!0;case Mi.Gy:return this.yo(new K(this.Nse(t.currentTime))),!0;case Mi.so:return this.yo(new Xt(this.Nse(t.currentTime))),!0;case Mi.Uy:return this.yo(new vl(this.Nse(t.currentTime))),!0;case Mi.xy:return this.yo(new Fs(this.Nse(t.currentTime))),!0;case Mi.qy:return this.yo(new _t(this.Nse(t.currentTime))),!0;case Mi.zy:return this.yo(new ga(this.Nse(t.currentTime))),!0;case Mi.Hy:return this.yo(new Nu(this.Nse(t.currentTime),t.playbackRate)),!0;case Mi.eb:return this.Ose?(this.yo(new eh(this.Nse(t.currentTime),t.volume)),!0):(this.Ose=!0,!0);case Mi.Ty:return this.yo(new Ks(this.Nse(t.currentTime),t.readyState)),!0;case Zc.PL:return this.yo(new ro(this.Nse(t.currentTime),t.readyState)),!0;case Zc.DL:return this.yo(new jT(this.Nse(t.currentTime),t.readyState)),!0;case Zc.NL:return this.yo(new KT(this.Nse(t.currentTime),t.readyState)),!0;case Zc.ML:return this.yo(new YT(this.Nse(t.currentTime),t.readyState)),!0;case Zc.QI:return this.yo(new au(this.Nse(t.currentTime),t.readyState)),!0;case Zc.LL:return this.yo(new Za(this.Nse(t.currentTime))),!0;case Zc.BL:return this.yo(new ce(this.Nse(t.currentTime))),!0;case Mi.Ey:return this.yo(new NZ(this.Nse(t.currentTime),t.initDataType,t.initData)),!0}return super.CI(t)}async gn(){await super.gn(!0)}constructor(t,e,i){super(i),this.Ose=!0,this.bst=t,this.l3t=e,this.Bse=t.mR}};function Y3(t,e){e.FR=t.FR,e.dI=t.dI,e.zR=t.zR}r();var K3=class extends q3{ur(t,e,i,s,n){super.ur(t,e,i,s,n),this.xse.bI();this.Fse(e,i).style.flex="1"}ar(t,e,i){this.Fse(e,i).style.flex="0"}constructor(t,e,i){super(t,e,i)}},j3=class extends K3{Dse(){return!0}Fse(t,e){return t}Vse(t,e){return e}AR(t,e){return super.Ise(t,e)}pR(t){return super.Pse(t)}constructor(t,e){super(t,e,t)}},Q3=class extends q3{Dse(){return!1}ur(t,e,i,s,n){super.ur(t,e,i,s,n),this.Ose=!1,this.ta.Wse(),e.style.flex="1"}ar(t,e,i){this.ta.Use(),e.style.flex="0"}_d(){return this.ta._d()}constructor(t,e){super(t,e,e)}},J3=class extends K3{Dse(){return!1}Fse(t,e){return e}Vse(t,e){return t}ur(t,e,i,s,n){super.ur(t,e,i,s,n);for(const t of[e,i])t.style.transition=""}ar(t,e,i){super.ar(t,e,i)}constructor(t,e){super(t,e,e)}};r(),r();var $3=class extends $s{ma(){return new t4(this.interstitial.Xst())}constructor(t){super("Gse"),this.interstitial=t}},t4=class extends pe{constructor(t){super("interstitialupdate"),this.interstitial=t}},Ls=function(t){return t.SINGLE="SINGLE",t.DOUBLE="DOUBLE",t.LSHAPE_AD="LSHAPE_AD",t.LSHAPE_CONTENT="LSHAPE_CONTENT",t}({}),e4=class extends Bo{get Hse(){var t,e;const i=null!=(e=null!=(t=this.Zse)?t:this.IA)?e:this.qOt;return void 0!==i?this.LO+i:this.YO?this.YO:void 0}get ct(){const t=this.Hse;return void 0===t?void 0:t-this.LO}get M2t(){var t;return null!=(t=this.L2t)?t:0}Xse(t){if(!this.ct)return;const e=(t-(this.LO+this.zse))/this.ct;e<this.M2t||(this.L2t=_.min(e,1),1===this.L2t&&(this.KR=!0))}Yn(t){var e,i,s,n;this.IA=null!=(e=t.ct)?e:this.IA,this.YO=null!=(i=t.BO)?i:this.YO,this.Zse=null!=(s=t.qse)?s:this.Zse,this.zse=null!=(n=t.Yse)?n:this.zse,this.Kse(),this.yo(new $3(this))}Kse(){void 0===this.IA&&void 0!==this.YO?this.IA=this.YO-this.LO:void 0===this.YO&&void 0!==this.IA&&(this.YO=this.LO+this.IA)}constructor(t){super(),this.zse=0,this.KR=!1,this.o=t.o,this.LO=t.LO,this.YO=t.BO,this.qOt=t.hBt,this.IA=t.ct,this.Zse=t.qse,this.avt=t.avt,this.jse=t.jse,this.Kse()}};r();var i4=class extends q3{Dse(){return!0}ur(t,e,i,s,n){super.ur(t,e,i,s,n),Y3(this.ta,this.xse),this.xse.FR=!0,t.style.backgroundImage="url('"+this.Qse+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center",this.Jse=this.bst.nt.oC.filter((t=>t.TE===yh.Jn));for(const t of this.Jse)t.TE=yh.Ch;for(const t of[e,i])t.style.flex="1",t.style.borderWidth="20px",t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}ar(t,e,i){for(const t of[e,i])t.style.flex="0",t.style.borderWidth="0px";var s;for(const t of null!=(s=this.Jse)?s:[])t.TE=yh.Jn;this.Jse=void 0}xR(){return this.bst.xR()||this.l3t.xR()}IR(){return this.bst.IR()||this.l3t.IR()}eI(){return _.min(this.bst.tI,this.l3t.tI)}AI(){this.bst.AI(),this.l3t.AI()}bI(){this.bst.bI(),this.l3t.bI()}constructor(t,e,i){super(t,e,e),this.Jse=void 0,this.Qse=i}};r();var s4=class extends q3{ur(t,e,i,s,n){super.ur(t,e,i,s,n);this.Vse(e,i).style.visibility="hidden",this.xse.bI(),t.style.backgroundImage="url('"+this.Qse+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center";const r=this.Fse(e,i);r.style.flex="1",r.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        ";for(const t of[e,i])t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}ar(t,e,i){const s=this.Fse(e,i);s.style.flex="0",s.style.transform="";this.Vse(e,i).style.visibility=""}constructor(t,e,i,s){super(t,e,i),this.Qse=s}},n4=class extends s4{Dse(){return!0}Fse(t,e){return t}Vse(t,e){return e}constructor(t,e,i){super(t,e,t,i)}},r4=class extends s4{Dse(){return!1}Fse(t,e){return e}Vse(t,e){return t}constructor(t,e,i){super(t,e,e,i)}};function o4(t){const e=h.createElement("div"),i=h.createElement("div");return function(t,e){let i;for(;ne(i=t.firstChild);)e.appendChild(i)}(t,e),Rd(t,"theo-ads-sgai-container"),Rd(e,"theo-ads-sgai-content-player"),Rd(i,"theo-ads-sgai-ad-player"),t.appendChild(e),t.appendChild(i),{contentElement:e,adElement:i}}function h4(t){const e=t.style;e.position="relative",e.backgroundColor="transparent",e.backgroundRepeat="no-repeat",e.backgroundAttachment="scroll",e.border="0 solid transparent",e.borderWidth="0px",e.flex="0"}function a4(t){const e=t.style;e.display="",e.backgroundColor="",e.backgroundRepeat="",e.backgroundAttachment="",e.border="",e.borderWidth="",e.flex="",e.transform="",e.transition="",e.backgroundImage="",e.backgroundSize="",e.backgroundPosition="",e.alignItems="",e.position=""}function u4(t){return!Cl(t.Ryt,"theo-ads://dai.break")}r(),r(),r(),r();var c4=class extends sc{},l4=class extends c4{ur(t,e){t.style.flex="1"}ar(t){t.style.flex="0"}constructor(t){super(t)}};r();var d4=class extends c4{ur(t,e){e.style.backgroundImage="url('"+this.Qse+"')",e.style.backgroundSize="contain",e.style.backgroundPosition="center",t.style.flex="1",t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", "),t.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        "}ar(t){t.style.flex="0",t.style.transform=""}constructor(t,e){super(t),this.Qse=e}};r();var f4=class extends $s{ma(){return new _4(this.interstitial.Xst())}constructor(t){super("$se"),this.interstitial=t}},_4=class extends pe{constructor(t){super("interstitialbegin"),this.interstitial=t}};function v4(t){return{get id(){return t.o},get duration(){return t.ct},get startTime(){return t.LO},get type(){return"adbreak"},get layout(){return function(t){switch(t){case Ls.SINGLE:return"single";case Ls.DOUBLE:return"double";case Ls.LSHAPE_CONTENT:case Ls.LSHAPE_AD:return"l-shape"}}(t.tne)},get ads(){return t.Vc.map((t=>t.Xst()))},get backdropUri(){return t.ene}}}r(),r(),r(),r();var m4=function(t){return t.image="image",t}({}),g4=function(t){return t.png="png",t.svg="svg",t}({}),p4=class extends e4{get pw(){return"overlay"}get FYt(){return this.ine}get sne(){return this.nne}Yn(t){var e,i;this.nne=null!=(e=t.imageUrl)?e:this.nne,this.ine=null!=(i=t.clickThrough)?i:this.ine,super.Yn(t)}Xst(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get type(){return"overlay"},get id(){return t.o},get duration(){return t.ct},get startTime(){return t.LO},get clickThrough(){return t.FYt},get imageUrl(){return t.sne},get position(){return function(t){return{get top(){return t.S7},get bottom(){return t.A7},get left(){return t.b7},get right(){return t.y7}}}(t.uo)},get size(){return function(t){return{get width(){return t.ji},get height(){return t.Ti}}}(t.Rb)}}}(this)}constructor(t){super(t),this.rne=t.pw,this.uo=t.uo,this.Rb=t.Rb,this.hne=t.hne,this.ane=t.ane,this.QKt=t.QKt,this.ine=t.une}};r();var w4=class extends e4{get pw(){return"adbreak"}get Vc(){return this.Dc}Yn(t){var e;t.ad&&this.Dc.push(t.ad),this.ene=null!=(e=t.backdropUri)?e:this.ene,super.Yn(t)}Xst(){var t;return null!=(t=this.Za)?t:this.Za=v4(this)}constructor(t){super(t),this.Dc=[],this.Ryt=t.Ryt,this.tne=t.tne||Ls.SINGLE,this.cne=t.cne,this.lne=t.lne,this.ene=t.dne}},y4="com.theoplayer.theoads.interstitial",b4="com.theoplayer.theoads.overlay",A4=class{get fne(){return this._ne}vne(t){this.mne=new EventSource(t),this.mne.addEventListener("adbreak",this.gne),this.mne.addEventListener("streaminfo",this.pne)}wne(t){if(!qt(this.yne,t)){this.yne.push(t);for(const e of t.oC)this.bne(e);t.yn(Ce.MI,this.qn),t.yn(Ce.BI,this.zn)}}Ane(t){if(qt(this.yne,t)){we(this.yne,t),t.fn(Ce.MI,this.qn),t.fn(Ce.BI,this.zn);for(const e of t.oC)this.Sne(e)}}bne(t){!this.Tne&&function(t){return t.Lt===Hi.jV&&t.pw===Vr.DATE_RANGE}(t)&&this.kne!==t?this.Ene(t):this.Tne&&function(t){return t.Lt===Hi.jV&&t.pw===Vr.ID3}(t)&&this.xne!==t&&this.Rne(t)}Sne(t){this.kne===t?this.Ene(void 0):this.xne===t&&this.Rne(void 0)}Ene(t){const e=this.kne;if(void 0!==e){if(e.L)for(const t of e.L.oC)this.Ine(t);e.fn(Eo.FI,this.Cne),e.fn(Eo.GI,this.Pne),e.fn(Eo.ZI,this.Dne),e.fn(Eo.WI,this.Nne),e.TE=yh.RC}if(this.kne=t,void 0!==t){if(t.L)for(const e of t.L.oC)this.Mne(e);t.yn(Eo.FI,this.Cne),t.yn(Eo.GI,this.Pne),t.yn(Eo.ZI,this.Dne),t.yn(Eo.WI,this.Nne),t.TE=yh.RC}}Rne(t){const e=this.xne;if(void 0!==e){if(e.L)for(const t of e.L.oC)this.Ine(t);e.fn(Eo.FI,this.Lne),e.fn(Eo.ZI,this.Dne),e.fn(Eo.WI,this.Nne),e.TE=yh.RC}if(this.xne=t,void 0!==t){if(t.L)for(const e of t.L.oC)this.Bne(e);t.yn(Eo.FI,this.Lne),t.yn(Eo.ZI,this.Dne),t.yn(Eo.WI,this.Nne),t.TE=yh.RC}}One(t){try{var e,i;const s=JSON.parse(t.data),n=s.networkCode,r=null==(e=s.assetKeys)?void 0:e[0];this.RMt.Fne(n,r),null==(i=this.mne)||i.removeEventListener("streaminfo",this.pne)}catch(t){As.Lp("Error parsing the Server sent stream info",t)}}Vne(t){const e=this.RMt.mR;if(void 0!==e)try{const n=JSON.parse(t.data);var i;const r=null!=(i=n.podDuration)?i:n.adBreakDuration;if(void 0===r)return void As.Lp("Tried to schedule an ad break without knowing the duration");const o=(Date.parse(n.startDate)-e.getTime())/1e3;if(o<=-r)return;const h="theo-ads://dai.break/?d="+r,a=this.RMt.bR()+o,u=n.networkCode,c=n.assetKey,l=n.podId?x(n.podId):void 0;var s;const d=new w4({o:t.id,LO:a,Ryt:null!=(s=n.assetURI)?s:h,tne:this.Wne||Ls[n.layout],cne:u,lne:c,hBt:r,jse:l,dne:n.backdropURI,avt:n.startPTS});this.Une(d,void 0)}catch(t){As.Lp("Error parsing the Server sent event",t)}else As.Lp("Tried to schedule an ad break without knowing the Program Date Time of the player")}Mne(t){if((t.rBt===y4||t.rBt===b4)&&t.aBt["X-ASSET-URI"])switch(t.rBt){case b4:try{var e;const i=atob(t.aBt["X-COM-THEOPLAYER-THEOADS-OVERLAY-PROPERTIES"]),s=JSON.parse(i),n=m4[s.type],r=this.RMt.Gne(t.LO),o=new p4({o:t.o,pw:n||m4.image,LO:r,BO:isFinite(t.BO)?t.BO:void 0,ct:t.ct,hBt:t.hBt,uo:T4(s.position),Rb:k4(s.size),hne:s.opacity,ane:S4(s.gamProperties),QKt:null==(e=s.resourceURI)?void 0:e.map((t=>function(t){const e=g4[t.type];let i=t.default;Z.Qs&&t.phone?i=t.phone:Z.dg&&t.tv&&(i=t.tv);return{pw:e,Ryt:i}}(t))),une:s.clickThroughURI});this.Une(o,t)}catch(t){As.Lp(t)}break;case y4:{const e=t.aBt["X-RESUME-OFFSET"],n=this.Hne||t.aBt["X-ASSET-URI"],r=As.Ah(n);var i;const o=null!=(i=r.searchParams.get("n"))?i:void 0;var s;const h=null!=(s=r.searchParams.get("k"))?s:void 0,a=this.RMt.Gne(t.LO);let u;(function(t){return Cl(t,"theo-ads://dai.break")})(n)&&(u=function(t){const e=t.split("?")[1],i={},s=new URLSearchParams(e);return i.d=Number(s.get("d"))||void 0,i.k=s.get("k")||void 0,i.n=s.get("n")||void 0,i.p=Number(s.get("p"))||void 0,i}(n));const c=new w4({o:t.o,LO:a,Ryt:n,tne:this.Wne||Ls[t.aBt["X-COM-THEOPLAYER-THEOADS-LAYOUT"]]||Ls.SINGLE,cne:o,lne:h,dne:t.aBt["X-COM-THEOPLAYER-THEOADS-BACKDROP"],BO:isFinite(t.BO)?t.BO:void 0,ct:t.ct,hBt:t.hBt,jse:null==u?void 0:u.p,qse:void 0!==e?Number(e):void 0});this.Une(c,t),this.Zne=c}}}Bne(t){const e=t.U;if(!function(t){return"GEO"===t.id||"GEOB"===t.id}(e)||!function(t){return"Anvatos"===t.description&&"application/json"===t.mimeType}(e))return;const i=Yg(new DataView(e.data),new Ui),s=new uu(i),n=s.get("type");if("cue"===n){let e=Number(s.get("duration"))/1e3||void 0;const i=new uu(s.get("payload")),n=Number(i.get("dur"))||void 0,r=Number(i.get("s_bd"))||void 0;if(void 0!==n?e=n:void 0!==r&&(e=r/10),!e)return void 0;const o="theo-ads://dai.break/?d="+e,h=Number(s.get("pts"))||void 0,a=this.RMt.Gne(t.LO),u=new w4({o:this.Hne||t.o,LO:a,Ryt:o,tne:this.Wne||Ls.SINGLE,hBt:e,avt:h});this.Une(u,t)}else if("cue_end"===n){const e=this.Zne;e&&e.Yn({ct:t.LO-e.LO})}}Xne(t){this.zne.get(t.TC)&&this.RMt.qne(t.LO)}Yne(t){for(const e of this._ne)if(t.o===e.o&&t.pw===e.pw)return!0;return!1}Une(t,e){this.Yne(t)||(this._ne.push(t),e&&this.zne.set(e.TC,t),this.RMt.Une(t))}Kne(t){const e=this.zne.get(t.TC);if(void 0===e)return;const i=t.aBt["X-RESUME-OFFSET"];e.Yn({ct:t.ct,BO:isFinite(t.BO)?t.BO:void 0,qse:void 0!==i?Number(i):void 0})}Ine(t){this.jne(t)}jne(t){void 0!==this.zne.get(t.TC)&&this.zne.delete(t.TC)}Qne(t){we(this._ne,t)}tr(){var t,e,i;this.Zne=void 0,this.Ene(void 0),this.Rne(void 0);for(const t of this.yne.slice())this.Ane(t);Pn(this.yne),Pn(this._ne),this.zne.clear(),null==(t=this.mne)||t.removeEventListener("adbreak",this.gne),null==(e=this.mne)||e.removeEventListener("streaminfo",this.pne),null==(i=this.mne)||i.close(),this.mne=void 0}gn(){this.tr()}constructor(t){this.Tne=!1,this._ne=[],this.zne=$h(),this.yne=[],this.qn=t=>{this.bne(t.Ht)},this.zn=t=>{this.Sne(t.Ht)},this.Cne=t=>{this.Mne(t.DO)},this.Lne=t=>{this.Bne(t.DO)},this.Dne=t=>{this.Xne(t.DO)},this.Nne=t=>{this.Ine(t.DO)},this.Pne=t=>{this.Kne(t.DO)},this.gne=t=>{this.Vne(t)},this.pne=t=>{this.One(t)},this.RMt=t}};function S4(t){if(!t)return;let e=t.sz.default;return Z.Qs&&t.sz.phone?e=t.sz.phone:Z.dg&&t.sz.tv&&(e=t.sz.tv),{Jne:t.iu,$ne:e}}function T4(t){let e,i,s,n;return t.top&&t.top>=0&&t.top<=100?e=t.top:t.bottom&&t.bottom>=0&&t.bottom<=100?i=t.bottom:e=10,t.left&&t.left>=0&&t.left<=100?s=t.left:t.right&&t.right>=0&&t.right<=100?n=t.right:s=10,{S7:e,A7:i,b7:s,y7:n}}function k4(t){let e,i;return e=t.width&&t.width>=0&&t.width<=100?t.width:10,i=t.height&&t.height>=0&&t.height<=100?t.height:10,{ji:e,Ti:i}}r();var E4=class extends Bo{get tre(){return this.ta.tre.map((t=>t.Xst()))}get ere(){return this.ta.ere.map((t=>t.Xst()))}ire(t){this.ta.sre(t)}get ga(){var t;return null!=(t=this.Za)?t:this.Za=function(t){return{get currentInterstitials(){return t.tre},get scheduledInterstitials(){return t.ere},replaceAdTagParameters(e){t.ire(e)},addEventListener(e,i){t.yn(e,i)},removeEventListener(e,i){t.fn(e,i)}}}(this)}constructor(t){super(),this.ta=t}};r(),r();var Go=Promise;r();var x4=class extends ts{nre(t){this.Dc.push(t)}get KR(){return this.rre.KR}get jjt(){return z.Dst}get DJt(){var t;return null!=(t=this.rre.ct)?t:-1}get ZBt(){return this.rre.LO}get hJt(){}get ore(){return this.rre}constructor(t){var e;super(t.LO),this.rre=t,this.NJt=null!=(e=this.rre.ct)?e:-1}},R4=function(t){return t[t.GOOGLE=0]="GOOGLE",t[t.DEFAULT=1]="DEFAULT",t}({}),I4=class extends Bo{get BJt(){return this.h$t}get hre(){return this.are}get zst(){return this.o$t}get z9t(){return this.jJt}ure(){this.lre()}Une(t){const e=new x4(t);this.h$t.push(e)}Qne(t){const e=this.o3t(t);we(this.h$t,e)}o3t(t){return Ti(this.h$t,(e=>e.ore===t))}dre(){this.l3t.yn(Mi.By,this._re),this.l3t.yn(Zc.DL,this.vre),this.l3t.yn(Mi.xy,this.mre),this.l3t.yn(Mi.$y,this.d6)}lre(){this.l3t.fn(Mi.By,this._re),this.l3t.fn(Zc.DL,this.vre),this.l3t.fn(Mi.xy,this.mre),this.l3t.fn(Mi.$y,this.d6)}ld(t){var e;null==(e=this.are)||e.Xse(this.Nse(t.currentTime))}async wre(t,e,i,s){const n={stack:[],error:void 0,hasError:!1};try{var r;this.dre(),null==(r=this.cW)||r.Xw();const o=rs(n,$t.Yw([e]),!1);this.cW=o;const h=o.Bw;return ot(h),await this.l3t.ka(DC(t),h),Z.Ka&&Z.jm&&(this.l3t.AI(),this.l3t.bI()),i&&this.l3t.AR(i),s&&this.l3t.AI(),await Go.race([this.uy("aderror",h).then(Go.reject),this.uy("adloaded",h).then((()=>Go.resolve()))])}catch(t){n.error=t,n.hasError=!0}finally{ae(n)}}Cd(t){this.are&&(this.are.Xse(t),this.are.KR=!0,this.Qne(this.are),this.are=void 0),this.jJt&&(this.g3t.yo(new xn(this.jJt,t)),this.jJt=void 0),this.o$t&&(this.g3t.yo(new Lh(this.o$t)),this.o$t=void 0),this.lre()}Nse(t){var e,i;return(null!=(i=null==(e=this.are)?void 0:e.LO)?i:0)+t}async tr(){var t;null==(t=this.cW)||t.Xw(),this.cW=void 0,this.lre(),this.h$t=[],this.jJt=void 0,this.o$t=void 0,this.are=void 0}async gn(){await this.tr(),await this.yre.gn()}constructor(t,e,i){super(),this.g3t=new Xu,this.h$t=[],this.d6=t=>{this.ld(t)},this.mre=()=>{this.lre()},this._re=()=>{this.yo(new pe("adloading"))},this.vre=()=>{this.yo(new pe("adloaded"))},this.l3t=t,this.yre=e,this.h$t=i,this.yre.Are(this),this.g3t=e.K1t}};r();var C4=class{Are(t){this.Sre=t}get K1t(){return this.g3t}get r2t(){var t;return void 0!==(null==(t=this.Sre)?void 0:t.zst)}get X1t(){return z.Dst}get Zst(){var t;return(null==(t=this.Sre)?void 0:t.z9t)?[this.Sre.z9t]:[]}get zst(){var t,e;return null!=(e=null==(t=this.Sre)?void 0:t.zst)?e:null}get qst(){return this.Sre?Ke(this.Sre.BJt,(t=>{var e;const i=t.Vc;if(t===(null==(e=this.Sre)?void 0:e.zst)&&void 0!==this.Sre.z9t){const t=i.indexOf(this.Sre.z9t);if(t>=0)return i.slice(t+1)}return t.KR?[]:i})):[]}get Yst(){return this.Sre?this.Sre.BJt.filter((t=>{var e;return t===(null==(e=this.Sre)?void 0:e.zst)||!t.KR})):[]}RD(){}jst(t){}gn(){return this.Sre=void 0,Promise.resolve(void 0)}constructor(){this.g3t=new Xu}};r();var P4=class{get tre(){return this.Tre}get kre(){return this.Ere}get xre(){return this.Rre}set xre(t){this.Rre=t}async Ire(t){this.Tre.push(t),this.Ere.style.display="";const e=h.createElement("div");e.className="theoplayer-theoads-overlay",e.style.display="",this.Cre.set(t.o,e);const i=h.createElement("a"),s=await this.Pre(t);if(s.clickThroughURI&&(this.Ere.style.zIndex="11",i.href=s.clickThroughURI,i.target="Vu",i.setAttribute("rel","noopener"),i.addEventListener("mousedown",this.M7t),i.addEventListener("touchend",this.M7t)),t.rne===m4.image&&(i.style.backgroundImage="url("+s.resourceURI+")",i.style.backgroundSize="contain",i.style.backgroundPosition="center",i.style.backgroundRepeat="no-repeat",s.impressionURI)){const t=h.createElement("img");t.src=s.impressionURI,t.style.display="none",i.appendChild(t)}ya(i),e.appendChild(i),e.style.cssText=this.Dre(t),this.Ere.appendChild(e)}Nre(t){const e=this.Cre.get(t.o);e&&(this.Ere.contains(e)&&this.Ere.removeChild(e),this.Cre.delete(t.o),0===this.Cre.size&&(this.Ere.style.display="none"),we(this.Tre,t))}Mre(){this.Cre.forEach(((t,e)=>{this.Ere.contains(t)&&this.Ere.removeChild(t)})),this.Cre.clear(),this.Tre=[]}Dre(t){const e=t.uo;let i=0,s=1;if(this.Ere.clientWidth>0&&this.Ere.clientHeight>0){const t=this.ta.cI/this.ta.hI,e=this.kre.clientWidth,n=this.kre.clientHeight,r=e/t,o=(n-r)/2;i=0===n?0:_.floor(o/n*100),s=0===n?1:_.floor(100*(1-(n-r)/n))/100}let n="position:absolute;zIndex:10;";if(e.b7&&(n+="left:"+e.b7+"%;"),e.y7&&(n+="right:"+e.y7+"%;"),e.S7){n+="top:"+(e.S7*s+i)+"%;"}if(e.A7){n+="bottom:"+(e.A7*s+i)+"%;"}const r=t.Rb;return r.ji&&(n+="width:"+r.ji+"%;"),r.Ti&&(n+="height:"+r.Ti*s+"%;"),t.hne&&t.hne>0&&t.hne<=100&&(n+="opacity:"+t.hne/100+";"),n}async Lre(t){if(!t)return;const e=this.Bre(t);return e?await this.Ore(e,this.aW):void 0}async Pre(t){const e={resourceURI:""},i=await this.Lre(t.ane);if(i)e.resourceURI=i.image,e.impressionURI=i.impression;else if(t.QKt){const i=Ti(t.QKt,(t=>t.pw===g4.svg));i&&(e.resourceURI=i.Ryt);const s=Ti(t.QKt,(t=>t.pw===g4.png));s&&(e.resourceURI=s.Ryt)}var s;return e.clickThroughURI=null!=(s=null==i?void 0:i.clickThrough)?s:t.FYt,t.Yn({imageUrl:e.resourceURI,clickThrough:e.clickThroughURI}),e}Bre(t){const e=new uu(this.Rre);return e.set("iu",t.Jne),e.set("sz",t.$ne),e.set("c",String(this.Fre)),"https://securepubads.g.doubleclick.net/gampad/adx?"+e.toString()}async Ore(t,e){const i=new Fe({qu:t,Xk:$r.gk,gE:So.GET});try{const t=await e.zk(i);return await t.Zk()}catch(t){throw new uo($c.NETWORK,Hs.UNKNOWN_AD_RESPONSE,"The ad source could not be loaded.",t)}}tr(){this.Mre(),this.Ere.style.display="none"}constructor(t,e,i){this.Tre=[],this.Cre=_u(),this.Fre=(new Date).getTime(),this.Vre=()=>{this.Tre.forEach((t=>{this.Cre.get(t.o).style.cssText=this.Dre(t)}))},this.M7t=t=>{t.stopPropagation()},this.ta=t,this.ta.yn(Ya.pn,this.Vre);const s=h.createElement("div");s.style.display="none",s.className="theoads-image-overlays-container",e.appendChild(s),ya(s),this.Ere=s,this.Wre=i,this.aW=As.aR}};r();function D4(t){return t&&t.integration===gu.THEOADS}Ih.Lg.EZ(new class{get U1t(){return z.Dst}kZ(t){return D4(t)}G1t(t,e,i){}o6(t,e,i,s){}Uz(t){const e={integration:gu.THEOADS,adTagParameters:V(t.adTagParameters)?t.adTagParameters:{},useId3:Boolean(t.useId3)};return Kt(t.networkCode)&&(e.networkCode=xe(t.networkCode)),Kt(t.customAssetKey)&&(e.customAssetKey=xe(t.customAssetKey)),Kt(t.backdropDoubleBox)&&(e.backdropDoubleBox=xe(t.backdropDoubleBox)),Kt(t.backdropLShape)&&(e.backdropLShape=xe(t.backdropLShape)),Kt(t.overrideLayout)&&(e.overrideLayout=function(t){switch(t){case"single":case"l-shape":case"double":case"single-if-mobile":return t;default:return}}(t.overrideLayout)),Kt(t.overrideAdSrc)&&(e.overrideAdSrc=xe(t.overrideAdSrc)),Kt(t.retrievePodIdURI)&&(e.retrievePodIdURI=xe(t.retrievePodIdURI)),Kt(t.sseEndpoint)&&(e.sseEndpoint=xe(t.sseEndpoint)),Kt(t.streamActivityMonitorId)&&(e.streamActivityMonitorId=xe(t.streamActivityMonitorId)),e}}),r();var N4=class extends pe{constructor(t){super("addinterstitial"),this.interstitial=t}};r();var M4=class extends $s{ma(){return new L4(this.interstitial.Xst())}constructor(t){super("Ure"),this.interstitial=t}},L4=class extends pe{constructor(t){super("interstitialend"),this.interstitial=t}};r();var B4=class extends $s{ma(){return new O4(this.interstitial.Xst(),this._b)}constructor(t,e){super("Gre"),this.interstitial=t,this._b=e}},O4=class extends pe{constructor(t,e){super("interstitialerror"),this.interstitial=t,this.message=e}};r(),r(),r();var Dt=class extends ls{ma(){return qo(this)}get jjt(){return z.Dst}constructor(t){super(t,function(t){return t===Ls.LSHAPE_CONTENT?Ns.A2t:Ns.Ajt}(t.ore.tne)),t.nre(this)}};var F4=class extends Dt{constructor(t,e){super(t),this.IA=_.min(e,this.Yl.DJt)}},V4=class extends I4{get Hre(){return R4.DEFAULT}Zre(t,e,i,s){return Go.resolve()}uJ(t,e,i,s){return Go.resolve()}sre(t){}Xre(t,e,i,s){let n;if(void 0===s&&(s=!1),this.are=t,t.LO<e){const i=_.min(t.ct,t.Hse-e);n=t.ct-i,t.Yn({ct:i,Yse:n})}return this.wre({sources:{src:t.Ryt}},i,n,s)}async zre(t,e,i){return this.are=t,t.Ryt}dre(){super.dre(),this.l3t.yn(Zc.BL,this.qre),this.l3t.yn(Mi.xy,this.X8),this.l3t.yn(sn.ua,this.Czt)}lre(){this.l3t.fn(Zc.BL,this.qre),this.l3t.fn(Mi.xy,this.X8),this.l3t.fn(sn.ua,this.Czt),super.lre()}ld(t){var e;const i=this.Nse(t.currentTime),s=this.are.M2t;this.are.Xse(i);const n=this.are.M2t;s<.25&&n>=.25?this.g3t.yo(new Bs(this.jJt,i)):s<.5&&n>.5?this.g3t.yo(new ws(this.jJt,i)):s<.75&&n>=.75?this.g3t.yo(new Ss(this.jJt,i)):(null==(e=this.are)?void 0:e.KR)&&this.Cd(i)}Cd(t){super.Cd(t),this.M9=!1}async tr(){await super.tr(),this.M9=!1}constructor(...t){super(...t),this.M9=!1,this.Czt=()=>{this.yo(new zh($c.GENERAL))},this.qre=t=>{!this.M9&&this.are&&(this.M9=!0,this.o$t=this.o3t(this.are),this.jJt=new F4(this.o$t,this.l3t._d()),this.are.Yn({ad:this.z9t}),this.g3t.yo(new Va(this.o$t)),this.g3t.yo(new cn(this.jJt,this.Nse(t.currentTime))))},this.X8=t=>{this.Cd(this.Nse(t.currentTime))}}};r(),r();var W4=class extends Dt{KJt(){return this.Yre.getAdSystem()}JJt(){return this.Yl.ore.Ryt}get o(){return this.Yre.getAdId()}get ct(){return this.Yre.getDuration()}get FYt(){var t,e;return null==(e=this.Yre)||null==(t=e.ad)?void 0:t.clickThroughUrl}get aYt(){return this.Yre.getCreativeId()}get _Kt(){return this.Yre.getSkipTimeOffset()}constructor(t,e){super(t),this.Yre=e}};r();var U4=class extends Dt{constructor(t){super(t),this.I2t=!0,this.IA=t.NJt}},G4="theoads_slot",H4="urn:google:dai:2018",Z4=class extends I4{get Hre(){return R4.GOOGLE}async Zre(t,e,i,s){t&&e&&(t!==this.Kre||e!==this.jre)?await this.uJ(t,e,i,s):i!==this.Rre&&this.sre(i)}async uJ(t,e,i,n){if(void 0===this.Qre){var r,o;if(void 0===(null==(o=s.google)||null==(r=o.ima)?void 0:r.dai))throw new g("IMA DAI SDK missing for THEOads");this.Qre=new google.ima.dai.api.StreamManager(this.l3t.we.querySelector("video"),this.Jre)}this.Kre=t,this.jre=e,this.Rre=i;const h=this.Qre;this.$re(),h.reset();const a=new google.ima.dai.api.PodStreamRequest;a.networkCode=this.Kre,a.customAssetKey=this.jre,a.adTagParameters=this.Rre,this.toe&&(a.streamActivityMonitorId=this.toe),a.format="hls";const u=this.eoe([google.ima.dai.api.StreamEvent.Type.STREAM_INITIALIZED,google.ima.dai.api.StreamEvent.Type.ERROR]).then((t=>{if(t.type===google.ima.dai.api.StreamEvent.Type.ERROR)throw new g("DAI stream request failed");this.ioe=t.getStreamData(),this.soe()}));this.Qre.requestStream(a),await hu(u,n)}eoe(t,e){return new Go(((i,s)=>{var n;if(e&&e.Nw)return s(new $);const r=t=>{h(),i(t)},o=()=>{h(),s(new $)},h=()=>{var i;null==(i=this.Qre)||i.removeEventListener(t,r),e&&e.Mw(o)};null==(n=this.Qre)||n.addEventListener(t,r),e&&e.Lw(o)}))}sre(t){var e;this.Rre=t,null==(e=this.Qre)||e.replaceAdTagParameters(t)}async noe(t){var e,i;return(null==(e=this.are)?void 0:e.jse)&&!S(this.are.jse)?this.are.jse:this.roe&&(null==(i=this.are)?void 0:i.avt)?await Si((()=>this.ooe()),t,4,500,5e3):void 0}async ooe(){const t=this.roe+"/"+this.Kre+"/"+this.jre+"/"+this.are.avt+".json",e=new Fe({qu:t,Xk:$r.gk,gE:So.GET,pE:1e3});let i;try{i=await this.l3t.aR.zk(e)}catch(t){throw new uo($c.NETWORK,Hs.UNKNOWN_AD_RESPONSE,"The ad's PodId could not be loaded.")}if(!wh(i))throw new uo($c.NETWORK,Hs.UNKNOWN_ERROR,"Something went wrong while requesting JSON from server.");const s=await i.Zk();if(s)return s.podid}async Xre(t,e,i,s){void 0===s&&(s=!1);const n=await this.zre(t,e,i);return this.wre({sources:{src:n}},i,void 0,s)}async zre(t,e,i){this.are=t;const s=t.cne,n=t.lne,r=this.Rre;r.cust_params=function(t,e){const i=new uu(t);return i.set(G4,function(t){switch(t){case Ls.DOUBLE:return"double";case Ls.SINGLE:return"single";case Ls.LSHAPE_AD:case Ls.LSHAPE_CONTENT:return"l-shape"}}(e)),i.toString()}(r.cust_params,t.tne),await this.Zre(s,n,r,i);const o=As.Ah(t.Ryt),h=Number(o.searchParams.get("d")),a=_.floor(1e3*_.min(h,t.Hse-e)),u=await this.noe(i);if(!u)throw new g("Something went wrong with retrieving the PodID from the server.");return this.ioe.getStandalonePodManifestUrl((()=>u),a)}dre(){this.l3t.yn(Mi.xy,this.hoe),this.l3t.nt.yn(Ce.MI,this.qn),super.dre()}lre(){super.lre(),this.l3t.fn(Mi.xy,this.hoe),this.l3t.nt.fn(Ce.MI,this.qn)}soe(){var t;null==(t=this.Qre)||t.addEventListener([google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.RESUMED],this.aoe)}$re(){var t;null==(t=this.Qre)||t.removeEventListener([google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.RESUMED],this.aoe)}Cd(t){super.Cd(t),this.uoe=void 0}async tr(){var t;await super.tr(),this.$re(),null==(t=this.Qre)||t.reset(),this.Qre=void 0,this.ioe=void 0,this.toe=void 0,this.jre=void 0,this.Kre=void 0}async gn(){var t;await super.gn(),null==(t=this.coe)||t.gn()}constructor(t,e,i,s,n,r,o){super(t,e,s),this.hoe=()=>{this.Cd(this.Nse(this.l3t.bR()))},this.qn=t=>{const e=t.Ht;if(e.Lt===Hi.jV&&!(e.pw!==Vr.ID3&&e.pw!==Vr.EVENT_STREAM||e.pw===Vr.EVENT_STREAM&&e.IC!==H4)){if(e.yn(Eo.FI,this.loe),e.yn(Eo.WI,this.Nne),e.L)for(const t of e.L.oC)this.loe(new Ms(t));e.TE=yh.RC,this.coe=e}},this.loe=t=>{t.DO.yn(gi.tO,this.doe)},this.Nne=t=>{t.DO.fn(gi.tO,this.doe)},this.doe=t=>{var e,i;if(this.ioe)if((null==(e=this.coe)?void 0:e.pw)===Vr.ID3){const e=t.DO.U;var s;if(VL(e))if(this.uoe!==e.text)this.uoe=e.text,null==(s=this.Qre)||s.processMetadata("ID3",e.text,t.DO.LO)}else if((null==(i=this.coe)?void 0:i.pw)===Vr.EVENT_STREAM){var n;const e=t.DO.U;null==(n=this.Qre)||n.processMetadata(H4,e,t.DO.LO)}},this.aoe=t=>{switch(this.o$t&&(this.o$t.NJt=this.l3t._d()-this.l3t.bR()),t.type){case google.ima.dai.api.StreamEvent.Type.ERROR:this.g3t.yo(new zh($c.GENERAL));break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED:this.o$t=this.o3t(this.are),this.g3t.yo(new Va(this.o$t)),this.foe=As.Fg(this._oe,250);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:As.Og(this.foe);break;case google.ima.dai.api.StreamEvent.Type.STARTED:{var e;const i=t.getAd();this.jJt=new W4(this.o$t,i),null==(e=this.are)||e.Yn({ad:this.jJt}),this.g3t.yo(new cn(this.jJt,this.Nse(this.l3t.bR())));break}case google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE:this.g3t.yo(new Bs(this.jJt,this.Nse(this.l3t.bR())));break;case google.ima.dai.api.StreamEvent.Type.MIDPOINT:this.g3t.yo(new ws(this.jJt,this.Nse(this.l3t.bR())));break;case google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE:this.g3t.yo(new Ss(this.jJt,this.Nse(this.l3t.bR())));break;case google.ima.dai.api.StreamEvent.Type.COMPLETE:this.g3t.yo(new xn(this.jJt,this.Nse(this.l3t.bR()))),this.jJt=void 0;break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:if(!this.o$t)break;this.o$t.NJt>1&&this._oe()}},this._oe=()=>{var t;this.jJt=new U4(this.o$t),null==(t=this.are)||t.Yn({ad:this.jJt}),this.g3t.yo(new cn(this.jJt,this.Nse(this.l3t.bR())))},this.Jre=i,this.Rre=null!=n?n:{},this.toe=r,this.roe=o}};var X4=class extends o1{get tre(){var t;return[null==(t=this.Sre)?void 0:t.hre,...this.voe.tre].filter(ne)}get ere(){return this.moe?this.goe.fne:[]}Tst(){return this.bst.Vc}Ist(){return this.poe.ga}get xre(){var t,e,i;return null!=(i=null!=(e=this.Rre)?e:null==(t=this.woe)?void 0:t.adTagParameters)?i:{}}SR(){return this.Vs}Sst(){return this.bst.nst}xR(){var t;return null!=(t=this.wZ)?t:super.xR()}IR(){var t;return null!=(t=this.HG)?t:super.IR()}yI(){this.bst.yI()}Gne(t){return t}async ka(t,e){if(await super.ka(t,e),void 0===t||void 0===t.ads)return;const i=Ti(t.ads,D4);if(void 0===i)return;this.yoe(),this.woe=i,this.boe=i.backdropLShape,this.goe.Wne=function(t){switch(t){case"single":return Ls.SINGLE;case"l-shape":return Ls.LSHAPE_AD;case"double":return Ls.DOUBLE;case"single-if-mobile":return Z.Qs?Ls.SINGLE:void 0;default:return}}(i.overrideLayout),this.goe.Hne=i.overrideAdSrc,this.goe.Tne=i.useId3,this.goe.wne(this.ta.nt),this.voe.xre=i.adTagParameters,this.bst.yn(Zc.NL,this.wd),this.bst.yn(Zc.ML,this.Aoe),this.Soe();const s=void 0===i.networkCode||void 0===i.customAssetKey;await this.Toe(s)}async Toe(t){var e,i,s;const n=this.W1t(),r=this.koe();var o;const h=null!=(o=null==(e=this.Sre)?void 0:e.BJt)?o:[];var a;t&&(null==(i=this.Sre)?void 0:i.Hre)!==R4.DEFAULT&&(await(null==(a=this.Sre)?void 0:a.tr()),this.Sre=new V4(n,this.Wre,h));if(!t&&(null==(s=this.Sre)?void 0:s.Hre)!==R4.GOOGLE){var u,c,l,d,f,_,v,m,g;await(null==(u=this.Sre)?void 0:u.tr()),this.Sre=new Z4(n,this.Wre,r,h,this.xre,null==(c=this.woe)?void 0:c.streamActivityMonitorId,null==(l=this.woe)?void 0:l.retrievePodIdURI);const t=null!=(g=null==(d=this.Eoe)?void 0:d.cne)?g:null==(f=this.woe)?void 0:f.networkCode;var p;const e=null!=(p=null==(_=this.Eoe)?void 0:_.lne)?p:null==(v=this.woe)?void 0:v.customAssetKey;await(null==(m=this.Sre)?void 0:m.Zre(t,e,this.xre))}}async Fne(t,e){var i,s;this.Eoe||void 0===t||void 0===e||((null==(i=this.Sre)?void 0:i.Hre)!==R4.GOOGLE&&await this.Toe(!1),await(null==(s=this.Sre)?void 0:s.Zre(t,e,this.xre)))}PH(t){void 0===this.IR()&&(this.HG=t,this.wZ=Te(t),this.yo(new Wa(t)))}Soe(){this.bst.yn(Mi.$y,this.xoe),this.bst.yn(Mi.qy,this.kX),this.bst.yn(Mi.Gy,this.SE)}Roe(){this.bst.fn(Mi.$y,this.xoe),this.bst.fn(Mi.qy,this.kX),this.bst.fn(Mi.Gy,this.SE)}Ioe(){this.Wre.K1t.yn("int",this.Coe)}Poe(){this.Wre.K1t.fn("int",this.Coe)}v1t(){this.Doe()}async Noe(){this.Doe()}Doe(){const t=this.ta.hI,e=this.ta.cI;t===this.Moe&&e===this.Loe||(this.Moe=t,this.Loe=e,this.yo(new P))}Une(t){if(this.moe){var e;if(z4(t))null==(e=this.Sre)||e.Une(t),this.qne(this.bst.bR());t.yn("Gse",this.Boe),this.poe.yo(new N4(t.Xst()))}}Qne(t){var e;(this.goe.Qne(t),z4(t))?null==(e=this.Sre)||e.Qne(t):q4(t)&&(this.voe.Nre(t),this.Ooe.delete(t.o));this.moe&&(t.fn("Gse",this.Boe),this.poe.yo(new M4(t).ga))}qne(t){this.Foe(t),this.Voe()}Foe(t){this.Woe(t),this.Uoe(t),this.Goe(t)}Woe(t){let e;const i=[];for(const s of this.goe.fne.filter(z4)){if(s.KR){i.push(s);continue}const n=s.Hse;void 0!==n&&t>=n?(s.KR=!0,i.push(s)):void 0!==e&&e.LO<s.LO||(e=s)}for(const t of i)this.Qne(t);this.Eoe!==e&&(this.Eoe=e,this.Hoe())}Hoe(){var t,e;null==(t=this.Sre)||t.ure(),null==(e=this.Zoe)||e.Xw(),this.Xoe=void 0,this.zoe=void 0}Uoe(t){if(void 0===this.Eoe||void 0!==this.Xoe||this.qoe)return;let e=!1;const i=ee.xn(this.bst.vR()).uB(t);if(void 0!==i&&(e=i.jn(0)>=this.Eoe.LO),z4(this.Eoe)){const i=this.Eoe,s=i.Hse,n=t>=i.LO&&(void 0===s||t<s);(e||n)&&(this.Zoe=new $t,this.Xoe=go(this.Xre(i,t,this.Zoe.Bw),this.Zoe).catch((t=>{Se(t)||(this.poe.yo(new B4(i,"Could not load the ad break.").ga),i.KR=!0,this.Eoe=void 0)})))}}Goe(t){if(void 0===this.Eoe||void 0!==this.zoe||this.qoe)return;const e=this.Eoe.Hse;var i;t>=this.Eoe.LO&&(void 0===e||t<e)&&(this.zoe=null==(i=this.Xoe)?void 0:i.then((()=>this.Noe())))}sre(t){var e,i,s;this.Rre=t,null==(i=this.Sre)||i.sre(null!=(s=null!=t?t:null==(e=this.woe)?void 0:e.adTagParameters)?s:{}),this.voe.xre=t}Voe(){const t=this.bR(),e=[];this.Ooe.forEach((i=>{t>=i.LO&&(void 0===i.Hse||t<i.Hse)||e.push(i)})),e.forEach((t=>this.Qne(t)));for(const e of this.goe.fne.filter(q4)){const i=e.Hse;if(void 0!==i&&t>=i)continue;const s=e.LO,n=e.LO+e.ct;t>=s&&t<=n&&!this.Ooe.has(e.o)&&(this.voe.Ire(e).catch((t=>{this.poe.yo(new B4(e,"Could not load the overlay.").ga)})),this.poe.yo(new f4(e).ga),this.Ooe.set(e.o,e))}}async SI(){var t,e;this.HG=void 0,this.wZ=void 0,this.moe=!1,this.woe=void 0,this.Yoe=!0,this.Koe=NaN,this.Loe=NaN,this.Moe=NaN,this.Eoe=void 0,null==(t=this.Zoe)||t.Xw(),this.Xoe=void 0,this.zoe=void 0,await(null==(e=this.Sre)?void 0:e.tr()),this.Sre=void 0,this.goe.tr(),this.voe.tr(),this.Ooe.clear(),this.bst.fn(Zc.NL,this.wd),this.bst.fn(Zc.ML,this.Aoe),this.Roe(),this.Poe(),this.Hoe(),await super.SI()}async gn(){var t;await this.SI().catch(Bt),this.goe.gn(),await(null==(t=this.Sre)?void 0:t.gn()),await super.gn()}CI(t){switch(t.type){case Mi.By:case Mi.yy:case Zc.ML:return!this.Yoe;case Zc.NL:return!this.Yoe||(this.Yoe=!1,!1);case Mi.Sy:{const t=this._d();return t!==this.Koe&&(this.Koe=t,this.yo(new re(t))),!0}case Mi.Xy:return this.Doe(),!0}return super.CI(t)}constructor(t){var e;super(t),this.HG=void 0,this.wZ=void 0,this.Ooe=_u(),this.Yoe=!0,this.Koe=NaN,this.Loe=NaN,this.Moe=NaN,this.moe=!1,this.qoe=!1,this.yoe=async()=>{try{await this._st.gq([FC.THEOADS])}catch(t){await this.SI().catch(Bt),this.PH(jy(t,Ja.LICENSE_INVALID_FEATURE))}},this.Aoe=()=>{var t;this.bst.fn(Zc.ML,this.Aoe),(null==(t=this.woe)?void 0:t.sseEndpoint)&&this.goe.vne(this.woe.sseEndpoint)},this.wd=()=>{this.qne(this.bR()),this.moe=!0,this.bst.fn(Zc.NL,this.wd),this.goe.fne.forEach((t=>this.Une(t)))},this.xoe=()=>{this.Foe(this.bR()),this.Voe()},this.kX=()=>{this.Foe(this.bR()),this.Voe()},this.SE=()=>{this.Uoe(this.bR())},this.Coe=()=>{this.v1t()},this.Boe=t=>{this.poe.yo(t.ga)},this.bst=t,this.Vs=t.we;const{contentElement:i,adElement:s}=o4(this.Vs);this.joe=i,this.Qoe=s,ya(this.joe),ya(this.Qoe),this.poe=new E4(this),this.Wre=new C4,null==(e=this.bst.Vc)||e.Qst(this.Wre),this.goe=new A4(this),this.voe=new P4(this,i,this.Wre)}};function z4(t){return"adbreak"===t.pw}function q4(t){return"overlay"===t.pw}var Y4=class extends X4{_d(){var t;return null!=(t=this.IA)?t:super._d()}Ya(){var t;return null!=(t=this.wc)?t:super.Ya()}async ka(t,e){await super.ka(t,e),this.woe&&(this.wc=t,this.Joe=new l4(this.bst),this.Joe.ur(this.bst.we,this.bst.we.parentElement),this.aO(this.Joe))}Soe(){super.Soe(),this.bst.yn(Mi.Sy,this.jXt),this.bst.yn(Zc.BL,this.IW)}Roe(){super.Roe(),this.bst.fn(Mi.Sy,this.jXt),this.bst.fn(Zc.BL,this.IW)}W1t(){return this.bst}koe(){return this.joe}AR(t,e){this.$oe=!0,super.AR(t,e)}Ioe(){super.Ioe(),this.bst.yn(Mi.xy,this.Coe)}Poe(){super.Poe(),this.bst.fn(Mi.xy,this.Coe)}AI(){super.AI(),this.yo(new Xt(this.bR())),this.the=!0,this.ehe=!1}bI(){this.ehe=!0,super.bI()}async Xre(t,e,i){var s;const n=u4(t);await this.Toe(n),this.ihe=await(null==(s=this.Sre)?void 0:s.zre(t,e,i))}async Noe(){var t,e,i;if(void 0===this.Eoe||void 0===this.ihe)return;this.Roe(),null==(t=this.Zoe)||t.Xw(),this.Zoe=new $t;const s=u4(this.Eoe);return await this.Toe(s),this.XOt=this.bst.mR,null==(e=this.Joe)||e.ar(this.bst.we),this.she=!0,this.bst.yn(Zc.BL,this.IW),this.poe.yo(new f4(this.Eoe).ga),await(null==(i=this.Sre)?void 0:i.wre({sources:{src:this.ihe}},this.Zoe.Bw,void 0,!0)),this.Joe=this.nhe(this.Eoe.tne,this.boe),this.y1t(this.Joe),this.Joe.ur(this.we,this.bst.we.parentElement),this.Ioe(),this.qoe=!0,this.rhe=!1,super.Noe()}nhe(t,e){switch(t){case Ls.LSHAPE_AD:return new d4(this.bst,e);case Ls.SINGLE:default:return new l4(this.bst)}}async v1t(){var t;this.Eoe&&(this.Poe(),this.she=!0,this.bst.yn(Zc.BL,this.IW),await this.bst.ka(this.wc,(new $t).Bw),null==(t=this.Joe)||t.ar(this.bst.we),this.Joe=new l4(this.bst),this.Joe.ur(this.bst.we,this.bst.we.parentElement),this.y1t(this.Joe),this.bst.AI(),this.rhe=!0,this.bst.mR=new Date(Number(this.XOt)+1e3*this.Eoe.ct),this.Eoe=void 0,this.XOt=void 0,this.qoe=!1,this.Soe(),super.v1t())}async SI(){this.Joe=void 0,this.IA=void 0,this.rhe=!0,this.she=!1,this.the=!0,this.ehe=!0,await super.SI()}CI(t){if(void 0!==this.Joe)switch(t.type){case Mi.so:return!0;case Mi.Uy:if(!this.ehe)return!0;this.ehe=!1;break;case Zc.BL:if(!this.the)return!0;this.the=!1;break;case Zc.LL:if(this.she)return!0;this.the=!0;break;case Mi.zy:if(this.she&&!this.$oe)return!0;this.$oe=!1;break;case Mi.qy:if(this.she&&!this.$oe)return!0;break;case Mi.xy:if(!this.rhe)return!0}return super.CI(t)}constructor(...t){super(...t),this.she=!0,this.$oe=!1,this.the=!0,this.ehe=!0,this.rhe=!0,this.jXt=t=>{this.IA=t.duration},this.IW=()=>{this.bst.fn(Zc.BL,this.IW),this.she=!1}}};r();var K4=class extends o1{get Mse(){return this.ohe}get Cse(){return this.hhe}Rse(){this.ohe=this.bst.bR()+this.hhe}Wse(){var t;if(void 0!==this.ahe)return;const e=this.uhe;this.uhe=void 0,null==(t=this.dhe)||t.Xw(),J4(this.bst)&&(this.fhe=new $t,this.ahe=go(this._he(e,this.fhe.Bw),this.fhe).catch(Pu))}Use(){var t;const e=this.ahe;this.ahe=void 0,null==(t=this.fhe)||t.Xw(),this.dhe=new $t,this.uhe=go(this.vhe(e,this.dhe.Bw),this.dhe).catch(Pu)}_a(){return this.bst.aH}mhe(){this.ghe={source:this.bst.Ya(),duration:this.bst._d(),currentTime:this.bst.bR(),preload:this.bst.QR,autoplay:this.bst.pO}}async phe(t){this.bst.QR=hl.qB,this.bst.pO=!1,this.l3t.FR=!0;const e=this.l3t.Ya();await this.bst.ka(e,t),this.bst.AR(this.l3t.bR())}async whe(t){this.ghe&&(this.bst.QR=this.ghe.preload,this.bst.pO=this.ghe.autoplay,await this.bst.ka(this.ghe.source,t),this.ghe=void 0)}async _he(t,e){await(null==t?void 0:t.catch(Bt)),this.mhe(),this.yhe=this.bst.mR,await this.bst.SI(),await this.phe(e),this.y1t(this.bst),this.bst.AI()}async vhe(t,e){await(null==t?void 0:t.catch(Bt)),this.bhe=this.l3t.bR(),this.hhe=this.bhe+this.Mse,await this.bst.SI(),await this.whe(e),this.y1t(this.l3t),this.bst.yn(Zc.ML,this.Ahe),this.bst.AI()}Ya(){return this.ghe?this.ghe.source:super.Ya()}_d(){return this.ghe?this.ghe.duration:super._d()}sI(){const t=super.sI();return ee.xn(t).Ab(this.Mse).ks()}vR(){const t=super.vR();return ee.xn(t).Ab(this.Mse).ks()}tr(){this.hhe=0,this.ohe=0,this.bhe=0,this.yhe=void 0}async gn(){await super.gn(),this.tr(),this.bst.fn(Zc.ML,this.Ahe)}constructor(t,e){super(e),this.ohe=0,this.hhe=0,this.bhe=0,this.Ahe=()=>{if(this.bst.fn(Zc.ML,this.Ahe),this.yhe){const t=this.yhe;t.setSeconds(this.yhe.getSeconds()+this.bhe),this.bst.mR=t,this.yhe=void 0}this.hhe-=this.bst.bR()},this.bst=t,this.l3t=e}};r();var j4=class extends sc{ka(t,e){var i;return void 0!==Ti(null!=(i=null==t?void 0:t.ads)?i:[],D4)?Promise.reject(new A(Ja.CONFIGURATION_ERROR,"THEOads must be enabled in the player configuration.")):super.ka(t,e)}},Q4=class extends X4{She(){this.bst.mst.yn("presentationmodechange",this.khe)}Ehe(){this.bst.mst.fn("presentationmodechange",this.khe)}get mst(){return this.bst.mst}async ka(t,e){await super.ka(t,e),this.woe&&(this.xhe=this.woe.backdropDoubleBox,this.Rhe(),this.Ihe(new j3(this.bst,this.l3t),!1,!0))}Ihe(t,e,i){var s;void 0!==this.Che&&(this.Che.ar(this.we,this.joe,this.Qoe),this.Che.gn());const n=null!=(s=this.Che)?s:this,r=null!=t?t:this.bst;Y3(n,r),null==t||t.ur(this.we,this.joe,this.Qoe,n,e),this.Che=t,i?this.aO(r):this.y1t(r)}Rhe(){this.Phe||(this.Phe=!0,Md(this.joe),Md(this.Qoe),h4(this.Vs),h4(this.joe),h4(this.Qoe),function(t){const e=t.style;e.display="flex",e.alignItems="center"}(this.Vs))}Dhe(){this.Phe&&(this.Phe=!1,a4(this.Vs),a4(this.joe),a4(this.Qoe),ya(this.joe),ya(this.Qoe))}W1t(){return this.l3t}koe(){return this.Jre}yI(){super.yI(),this.l3t.yI()}AR(t,e){this.Nhe=!0,super.AR(t,e)}Gne(t){return t+this.l3t.Cse}Ioe(){super.Ioe(),this.l3t.yn(Mi.Gy,this.Mhe),this.l3t.yn(Mi.xy,this.Coe),this.bst.yn(Mi.Oy,this.Lhe)}Poe(){super.Poe(),this.l3t.fn(Mi.Gy,this.Mhe),this.l3t.fn(Mi.xy,this.Coe),this.bst.fn(Mi.Oy,this.Lhe)}Bhe(){var t,e;const i=null==(t=this.Eoe)?void 0:t.Hse;if(void 0===i||(null==(e=this.Che)?void 0:e.Dse())||Cs(this.bst.bR(),i,.001))return;const s=ee.xn(this.l3t.vR()),n=this.l3t.sI(),r=_.min(n.end(n.length-1),this.Eoe.ct);s.HL().gr(r)&&this.bst.AR(i,{XBt:!0})}async Xre(t,e,i){var s;const n=u4(t);await this.Toe(n),await(null==(s=this.Sre)?void 0:s.Xre(t,e,i))}async Noe(){const t=this.Eoe;if(void 0===t)return;const e=t.tne,i=this.nhe(e,t);return this.Roe(),Z.jm&&Z.Jm>=16&&Z.Jm<18&&this.l3t.AR(this.l3t.bR()),Z.Uv&&!i.Dse()&&(a4(this.joe),ya(this.joe)),this.Ihe(i,this.the,!1),this.poe.yo(new f4(t).ga),this.Ioe(),this.qoe=!0,this.Ohe=!1,this.zoe=void 0,super.Noe()}nhe(t,e){if(J4(this.bst))return new Q3(this.bst,this.l3t);switch(t){case Ls.DOUBLE:return e.ene||e.Yn({backdropUri:this.xhe}),new i4(this.bst,this.l3t,e.ene);case Ls.LSHAPE_AD:return e.ene||e.Yn({backdropUri:this.boe}),new r4(this.bst,this.l3t,e.ene);case Ls.LSHAPE_CONTENT:return e.ene||e.Yn({backdropUri:this.boe}),new n4(this.bst,this.l3t,e.ene);case Ls.SINGLE:default:return new J3(this.bst,this.l3t)}}v1t(){var t;if(void 0===this.Eoe)return;this.Poe();const e=null==(t=this.Che)?void 0:t.Dse();Z.Uv&&(Md(this.joe),h4(this.joe)),this.Ihe(new j3(this.bst,this.l3t),!0,!1),e||(this.Nhe=!1,this.bst.AR(this.Eoe.Hse,{XBt:!0})),this.l3t.SI(),this.Soe(),this.qoe=!1,this.Ohe=!1,this.Eoe=void 0,super.v1t()}async SI(){this.the=!0,this.Nhe=!0,this.Ohe=!0,this.qoe=!1,this.Ihe(void 0,!1,!0),await this.l3t.SI(),this.Dhe(),await super.SI()}async gn(){this.Ehe(),await this.l3t.gn(),await super.gn()}CI(t){if(void 0!==this.Che)switch(t.type){case Mi.so:if(!this.Ohe)return this.Ohe=!0,!0;this.the=!0;break;case Mi.Uy:if(this.kR&&this.qoe)return!0;break;case Zc.BL:if(!this.the)return!0;this.the=!1;break;case Zc.LL:this.the=!0;break;case Mi.qy:if(!this.Nhe)return!0;break;case Mi.zy:if(!this.Nhe)return this.Nhe=!0,!0}return super.CI(t)}constructor(t){super(t),this.Ohe=!0,this.the=!0,this.Nhe=!0,this.Phe=!1,this.khe=t=>{if(this.Che&&!function(t){return t instanceof Q3}(this.Che)&&this.qoe)switch(t.presentationMode){case"native-picture-in-picture":this.Ihe(new Q3(this.bst,this.l3t),!1,!1);break;case"fullscreen":u2(this.md)&&this.Ihe(new Q3(this.bst,this.l3t),!1,!1);break}},this.Mhe=t=>{J4(this.bst)||this.Bhe()},this.Lhe=t=>{J4(this.bst)||this.Bhe()};const e=new P1(new aF(this.Qoe,t.md,new QC),Ih.Lg);e.QR=hl.qB,e.pO=!1,this.l3t=new K4(this.bst,e),this.Jre=function(t){const e=h.createElement("div");return Rd(e,"theo-ads-sgai-ima-container"),function(t){t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%"}(e),t.appendChild(e),e}(this.Qoe),this.She()}};function J4(t){const e=t.mst.Uo()===Bu.FULLSCREEN&&u2(t.md);return t.aH.iO||e}dF((t=>t.md.ads.theoads?Z.Em||Z.Cm?new Y4(t):new Q4(t):new j4(t)),co.Dst),r(),r(),r(),r(),r();var $4=class extends Bo{get ga(){return this.Za||(this.Za=function(t){return{get casting(){return t.nQ},get state(){return t.Rft},start(){t.kI()},stop(){t.EI()},addEventListener(e,i){const s=$A(e,xe);t.yn(s,i)},removeEventListener(e,i){const s=$A(e,xe);t.fn(s,i)}}}(this)),this.Za}constructor(...t){super(...t),this.Za=void 0}},t5=class extends $4{get nQ(){return this.Rft===Tr.CONNECTED}get Rft(){return this.Ea}Fhe(){this.Vhe(),this.Ugt.yn(Mi.ro,this.Whe),this.Na(Tr.AVAILABLE)}Vhe(){this.ta&&this.ta.fn(Mi.ly,this.handleAirplayChangedEvent),this.Uhe?this.ta=this.lj:this.ta=this.Ghe,this.ta.yn(Mi.ly,this.handleAirplayChangedEvent)}get Uhe(){return this.lj.TI()}async Hhe(){if(this.ta){if(this.Uhe){if(!this.ta.ZR){const t=new Promise((t=>u(t,800))),e=this.ta.uy(Mi.Uy,this.Zhe.Bw);await Promise.race([e,t])}this.ta.AI()}else{this.Xhe=this.lj.yR,this.zhe=this.lj.mR,this.Ghe.yn(Mi.$y,this.handleAirplayPlayerTimeUpdate),this.qhe=this.lj.cC,this.lj.cC=this.Ghe,this.qhe.bI(),this.qhe.be(),this.Ghe.ge(),this.Ghe.FR=this.qhe.FR,this.Ghe.zR=this.qhe.zR,this.Ghe.dI=this.qhe.dI;const t=this.Ghe.uy(Mi.zy);this.Ghe.yR=this.qhe.yR,await t,this.Ghe.AI(),this.Ghe.FR=this.qhe.FR,this.Ghe.zR=this.qhe.zR,this.Ghe.dI=this.qhe.dI}this.Na(Tr.CONNECTED)}}Yhe(){if(this.qhe){this.Ghe.fn(Mi.$y,this.handleAirplayPlayerTimeUpdate),this.qhe.FR=this.Ghe.FR,this.qhe.zR=this.Ghe.zR,this.qhe.dI=this.Ghe.dI;Z.jm&&!Z.Ka&&this.lj.ct===1/0?this.zhe?this.qhe.mR=this.zhe:this.qhe.yR=1/0:this.qhe.yR=this.Xhe,this.zhe=void 0,this.Xhe=void 0,this.qhe.ge(),this.Ghe.be(),this.Ghe.ZR||this.qhe.AI(),this.lj.cC=this.qhe,this.Ghe.tr(),this.qhe=void 0}else this.ta&&(this.ta.yR=this.ta.yR+1e-4);this.Na(Tr.AVAILABLE)}preloadPlayer(t){if(ot(t),this.ta.tI<gs.Xn){const e=this.ta.uy(Zc.ML,t);return this.ta.QR=hl.jV,e}return Promise.resolve()}Na(t){t!==this.Ea&&(this.Ea=t,this.yo(new e1(this.Ea)))}kI(){let t;this.Ugt.yI(),this.Zhe.Xw(),this.Zhe=new $t,t=this.Uhe?this.Khe(this.Zhe.Bw):this.jhe(this.Zhe.Bw),oh(go(t,this.Zhe))}async Khe(t){await this.preloadPlayer(t),this.lj.kI()}async jhe(t){try{await this.Ghe.tr();const e=this.lj.Ya();if(void 0===e)throw new g("Not possible to start Airplay without a source");await this.Ghe.ka(e,t);const i=this.Ghe.uy(Zc.BL,t);this.Ghe.AI(),await ng(i,3e3),this.Ghe.bI(),ot(t),this.Ghe.kI()}catch(t){if(Se(t))return;0}}EI(){this.ta.EI()}gn(){var t;this.Bo(),this.Ugt.fn(Mi.ro,this.Whe),this.Zhe.Xw(),this.lj.gO(this.Ghe),null==(t=this.Ghe)||t.gn()}constructor(t,e,i){super(),this.Ea=Tr.UNAVAILABLE,this.Zhe=new $t,this.Whe=()=>{var t;const e=null==(t=this.lj.Ya())?void 0:t.sources.filter(zT);(null==e?void 0:e.some(wI))?this.Na(Tr.AVAILABLE):this.Na(Tr.UNAVAILABLE)},this.handleAirplayChangedEvent=()=>{this.ta&&this.ta.NR?this.Hhe():this.Rft===Tr.CONNECTED&&this.Yhe()},this.handleAirplayPlayerTimeUpdate=t=>{this.Xhe=t.currentTime,this.zhe=this.lj.mR},this.Ugt=t,this.lj=e,this.Ghe=i,this.Ghe.be(),e.mO(i),this.Fhe()}};r();var e5=class extends $4{get nQ(){return!1}get Rft(){return Tr.UNAVAILABLE}kI(){}EI(){}};r();var i5=class extends Je{RI(){this.Qhe.RI()}DI(t){throw new g("Can't add a track while using AirPlay.")}get ht(){return this.Qhe.ht}get _R(){return this.Qhe._R}get bt(){return this.KH}get yR(){return this.Qhe.yR}set yR(t){this.AR(t)}AR(t,e){this.Qhe.AR(t,e)}get mR(){return this.Qhe.mR}get ct(){return this.Qhe.ct}get we(){return this.Vs}get kR(){return this.Qhe.kR}get lt(){return this.Qhe.lt}get RR(){return this.Qhe.RR}get PR(){return this.Qhe.PR}get NR(){return this.Qhe.NR}get gI(){return this.Qhe.gI}get vI(){return this.Qhe.vI}get LR(){return this.Qhe.LR}get FR(){return this.Qhe.FR}set FR(t){this.Qhe.FR=t}get GR(){return this.Qhe.GR}get ZR(){return this.Qhe.ZR}get zR(){return this.Qhe.zR}set zR(t){this.Qhe.zR=t}get KR(){return this.Qhe.KR}get QR(){return this.Qhe.QR}set QR(t){this.Qhe.QR=t}get tI(){return this.Qhe.tI}get iI(){return this.Qhe.iI}get nI(){return this.Qhe.nI}TI(){return this.Qhe.TI()}kI(){this.Qhe.kI()}EI(){this.Qhe.EI()}get nt(){return this.Qhe.nt}get hI(){return this.Qhe.hI}get cI(){return this.Qhe.cI}get rt(){return this.Qhe.rt}get dI(){return this.Qhe.dI}set dI(t){this.Qhe.dI=t}AI(){oh(this.Qhe.AI())}bI(){this.Qhe.bI()}async SI(){}Ya(){return this.wc}async ka(t,e){let i;if(ot(e),this.wc=t,Bn(t.sources))i=al({src:""});else{const e=t.sources.filter(zT);for(const t of e)if(wI(t)){i=t;break}}if(!i)throw new g("Unsupported source.");await this.Qhe.ka(i,t,e),this.sZ(i)}sZ(t){this.KH!==t&&(this.KH=t,this.yo(new nk(t)))}wI(){return this.Qhe.wI()}fR(){return[]}yI(){this.Jhe.cZ()}ur(t){ik(this,t)}ar(){}II(t){return!1}xI(){this.Qhe.xI()}async tr(){this.KH=void 0,this.wc=void 0,await this.Qhe.tr()}ge(){this.Qhe.ge()}be(){this.Qhe.be()}pI(){return this.Qhe.pI()}_a(){return this.Qhe._a()}async gn(){this.Bo(),this.Jhe.gn(),await this.Qhe.gn(),this.rO.gn(),this.hO.gn(),this.Ul.gn()}constructor(t,e,i,s,n,r,o){super(),this.KH=void 0,this.wc=void 0,this.rO=new Xh,this.hO=new Xh,this.Ul=new ut,this.Vs=t,this.Jhe=new EI(r,o,1,[Io.lE]),this.Jhe.gZ(t),this.Qhe=new pI(t,this.Jhe,e,i,s,n),this.Qhe.Jw(this.Ds),this.rO.cC=this.Qhe.ht,this.hO.cC=this.Qhe.rt,this.Ul.cC=this.Qhe.nt}},s5=class extends sc{async gn(){this.$he.gn(),await super.gn()}constructor(t){super(t);const e=new i5(this.xa.we,this.aR,this.md,this.nst,this.vI,this.ust,this.Ll);this.$he=new t5(this,this.xa,e),this.Tz.uQ(this.$he),this.yn(Mi.yy,(()=>{this.$he.Vhe()}))}};dF((t=>As.Ys.zg?new s5(t):(t.Tz.uQ(new e5),t)),co.Nst),r(),r();var n5="VPAID";function r5(t){return"spotx"===t.integration}Ih.Lg.EZ(new class t{get U1t(){return this.tae.U1t}kZ(t){return r5(t)}G1t(e,i,s){return s.ads||(s.ads=ZT({})),s.ads.vpaidMode=s.ads.vpaidMode||t.eae(),this.tae.G1t(e,i,s)}o6(e,i,s,n){!function(t){if(!r5(t))throw new g("Unknown ad integration: "+t.integration)}(e);const r=t.iae(e,s.we);this.tae.o6(r,i,s,n)}Uz(t){const e=eu(t);if(!S(e.id))return e.queryParameters||(e.queryParameters={}),e.custom&&(e.queryParameters.custom?lt('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(e.queryParameters.custom=e.custom,delete e.custom)),e.app&&(e.queryParameters.app?lt('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(e.queryParameters.app=e.app,delete e.app)),e.device&&(e.queryParameters.device?lt('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(e.queryParameters.device=e.device,delete e.device)),e.user&&(e.queryParameters.user?lt('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(e.queryParameters.user=e.user,delete e.user)),e.ipAddress&&(e.queryParameters.ip_addr?lt('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(e.queryParameters.ip_addr=e.ipAddress,delete e.ipAddress)),e.maximumAdDuration&&(e.queryParameters.VMaxd?lt('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(e.queryParameters.VMaxd=e.maximumAdDuration,delete e.maximumAdDuration)),e}static iae(e,i){return{integration:gu.SPOTX,sources:{src:t.sae(e,s.location.href,i.offsetWidth,i.offsetHeight,Z.Eg)}}}static sae(e,i,s,n,r){if(e.sources)return e.sources;let o=n,h=s;r&&0===h&&(h=320,o=180);const a={custom_skin:1,player_width:h,player_height:o};e.cacheBuster&&(a.cb=_.random()),t.nae(i)&&(a.content_page_url=i);const u=la({},a,e.queryParameters);return u[n5]||u.VPI||(u[n5]="js"),"https://search.spotxchange.com/vast/2.0/"+e.id+"?"+t.rae(u)}static nae(t){return Cl(t,"http://")||Cl(t,"https://")}static rae(t){return K$(t)}static eae(){return Z.Fm?jn.ENABLED:jn.INSECURE}constructor(){this.tae=new f2}}),r(),r(),r(),r();var o5=_.PI/180,h5=180/_.PI,a5=class{Pb(t,e){return this.x=t,this.y=e,this}h_t(t){return this.x=t.x,this.y=t.y,this}oae(t){return this.Pb(t[0],t[1])}hae(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}aae(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}constructor(t,e){this.x=t||0,this.y=e||0}},Gu=class{Pb(t,e,i){return this.x=t,this.y=e,this.z=i,this}h_t(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}oae(t){return this.Pb(t[0],t[1],t[2])}hae(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}V(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}uae(){const t=this.V();if(0!==t){const e=1/t;this.cae(e)}else this.x=0,this.y=0,this.z=0;return this}cae(t){this.x*=t,this.y*=t,this.z*=t}lae(t){const e=this.x,i=this.y,s=this.z,n=t.x,r=t.y,o=t.z,h=t.w,a=h*e+r*s-o*i,u=h*i+o*e-n*s,c=h*s+n*i-r*e,l=-n*e-r*i-o*s;return this.x=a*h+l*-n+u*-o-c*-r,this.y=u*h+l*-r+c*-n-a*-o,this.z=c*h+l*-o+a*-r-u*-n,this}dae(t){return this.x*t.x+this.y*t.y+this.z*t.z}fae(t,e){const i=t.x,s=t.y,n=t.z,r=e.x,o=e.y,h=e.z;return this.x=s*h-n*o,this.y=n*r-i*h,this.z=i*o-s*r,this}constructor(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}},Yo=class{Pb(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this}h_t(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}oae(t){return this.Pb(t[0],t[1],t[2],t[3])}hae(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}dae(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}YF(t){return this._ae(this,t)}_ae(t,e){const i=t.x,s=t.y,n=t.z,r=t.w,o=e.x,h=e.y,a=e.z,u=e.w;return this.x=i*u+r*o+s*a-n*h,this.y=s*u+r*h+n*o-i*a,this.z=n*u+r*a+i*h-s*o,this.w=r*u-i*o-s*h-n*a,this}vae(){return this.x*=-1,this.y*=-1,this.z*=-1,this.uae(),this}mae(){const t=this.x,e=this.y,i=this.z,s=this.w,n=t*e+i*s;let r,o,h;if(n>.499)r=2*_.atan2(t,s),o=_.PI/2,h=0;else if(n<-.499)r=-2*_.atan2(t,s),o=-_.PI/2,h=0;else{const a=t*t,u=e*e,c=i*i;r=_.atan2(2*e*s-2*t*i,1-2*u-2*c),o=_.asin(2*n),h=_.atan2(2*t*s-2*e*i,1-2*a-2*c)}return new u5(r,h,o)}uae(){let t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,e,i,s){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==s?s:1}},u5=class{Pb(t,e,i){return this.gae=t,this.pae=e,this.wae=i,this}h_t(t){return this.Pb(t.gae,t.pae,t.wae)}yO(t){return this.gae+=t.gae,this.pae+=t.pae,this.wae+=t.wae,this}yF(t){return this.gae-=t.gae,this.pae-=t.pae,this.wae-=t.wae,this}yae(){const t=this.gae,e=this.wae,i=this.pae,s=_.cos(t/2),n=_.cos(e/2),r=_.cos(i/2),o=_.sin(t/2),h=_.sin(e/2),a=_.sin(i/2),u=s*n,c=o*h;return new Yo(u*a+c*r,o*n*r+s*h*a,s*h*r-o*n*a,u*r-c*a)}constructor(t,e,i){this.gae=t||0,this.pae=e||0,this.wae=i||0}};r();var c5=["bae","rat","Aae","error"];r();var l5=function(t){return t.Rs="unavailable",t.Sae="available",t.qa="presenting",t}({});r();var d5=class{iW(){this.He||(this.He=!0,this.Vs.addEventListener("mousedown",this.Tae),this.Vs.addEventListener("touchstart",this.kae),s.addEventListener("mousemove",this.er),s.addEventListener("touchmove",this.Eae),s.addEventListener("mouseup",this.xae),s.addEventListener("touchend",this.Rae),this.Iae(s))}sW(){this.He&&(this.He=!1,this.Vs.removeEventListener("mousedown",this.Tae),this.Vs.removeEventListener("touchstart",this.kae),s.removeEventListener("mousemove",this.er),s.removeEventListener("touchmove",this.Eae),s.removeEventListener("mouseup",this.xae),s.removeEventListener("touchend",this.Rae),this.Cae(s))}Iae(t){if(function(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}(t));else if(Od(t))try{t.parent.addEventListener("mouseup",this.xae),this.Iae(t.parent)}catch(e){t.document.documentElement.addEventListener("mouseleave",this.Pae)}}Cae(t){if(t.document.documentElement.removeEventListener("mouseleave",this.Pae),Od(t))try{t.parent.removeEventListener("mouseup",this.xae),this.Cae(t.parent)}catch(t){}}Dae(){this.Nae=!1}Mae(){const t=this.Bae.Lae;t.yaw+=2*_.PI*this.Oae.x*.4/this.Vs.clientWidth,t.pitch+=2*_.PI*this.Oae.y*.5/this.Vs.clientHeight,t.pitch=Zs(t.pitch,-_.PI/2,_.PI/2),this.Bae.Lae=t}Fae(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Vs}gn(){this.sW()}constructor(t,e){this.He=!1,this.Vae=new a5,this.Wae=new a5,this.Oae=new a5,this.Nae=!1,this.Tae=t=>{this.Vae.Pb(t.clientX,t.clientY),this.Nae=!0,t.preventDefault(),t.stopPropagation()},this.kae=t=>{t.touches&&1===t.touches.length&&(this.Vae.Pb(t.touches[0].pageX,t.touches[0].pageY),this.Nae=!0,t.preventDefault())},this.er=t=>{if(this.Nae||this.Fae()){if(this.Fae()){const e=t.movementX||t.mozMovementX||0,i=t.movementY||t.mozMovementY||0;this.Wae.Pb(this.Vae.x-e,this.Vae.y-i)}else this.Wae.Pb(t.clientX,t.clientY);this.Oae.aae(this.Wae,this.Vae),this.Vae.h_t(this.Wae),this.Mae()}},this.Eae=t=>{this.Nae&&(this.Wae.Pb(t.touches[0].pageX,t.touches[0].pageY),this.Oae.aae(this.Wae,this.Vae),this.Vae.h_t(this.Wae),this.Mae())},this.xae=()=>{this.Dae()},this.Rae=()=>{this.Dae()},this.Pae=()=>{this.Dae()},this.Bae=t,this.Vs=e}};r();var f5=class extends $s{ma(){return new _5}constructor(){super("Aae")}},_5=class extends pe{constructor(){super("stereochange")}};r();var v5=class{Uae(t){t.clearColor(...this.FQ),t.clear(t.COLOR_BUFFER_BIT)}Gae(t,e){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.Hae.forEach((i=>{i.Gae(t,e)}))}Zae(t){this.Hae.push(t)}Xae(){this.Hae=[]}constructor(){this.FQ=[0,0,0,1],this.Hae=[]}};r(),r(),r();var m5=class{zae(t,e,i){const s=t.createBuffer();return null===s?(lt("Failed to create buffer."),null):(t.bindBuffer(e,s),t.bufferData(e,i,t.STATIC_DRAW),s)}constructor(t,e,i,s,n){this.qae=t,this.Ub=this.zae(t,e,i),this.Yae=s,this.pp=n,this.Kae=!1,this.jae=0,this.ic=0}},g5=class extends m5{iW(t){if(null===this.Ub)return void lt("Attempted to enable buffer that failed to initialize.");if(null===t)return void lt("Attempted to enable attribute without location.");const e=this.qae;e.bindBuffer(e.ARRAY_BUFFER,this.Ub),e.vertexAttribPointer(t,this.Yae,this.pp,this.Kae,this.jae,this.ic),e.enableVertexAttribArray(t)}sW(t){t&&this.qae.disableVertexAttribArray(t)}constructor(t,e,i){super(t,t.ARRAY_BUFFER,e,i,t.FLOAT)}};var p5=class extends m5{Qae(){const t=this.qae;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.Ub),t.drawElements(t.TRIANGLES,this.Jae,this.pp,this.ic)}constructor(t,e){super(t,t.ELEMENT_ARRAY_BUFFER,e,1,t.UNSIGNED_SHORT),this.Jae=e.length}};r();var w5=function(t){return t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor",t}({}),Zo=function(t){return t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture",t}({}),y5=function(t){return t.Normal="vNormal",t.Color="vColor",t.UV="vUV",t}({}),b5=class{$ae(t,e,i){const s=this.tue(t,t.VERTEX_SHADER,e),n=this.tue(t,t.FRAGMENT_SHADER,i);if(null===s||null===n)return lt("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(lt("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(lt("Failed to initialize shader program"),null))}tue(t,e,i){const s=t.createShader(e);if(null===s)return lt("failed to create shader."),null;if(t.shaderSource(s,i),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(s);return lt("Failed to compile shader with error: "+e),t.deleteShader(s),null}return s}eue(){return this.iue}sue(t){const e=this.iue;if(null===e)return lt("Attempted to retrieve attribute location when shader program was not initialized"),null;const i=this.qae.getAttribLocation(e,t);return-1===i?null:i}nue(t){const e=this.iue;if(null===e)return lt("Attempted to retrieve uniform location when shader program was not initialized"),null;const i=this.qae.getUniformLocation(e,t);return null===i&&Ur("Attempted to retrieve nonexistent uniform: "+t),i}constructor(t,e,i){this.qae=t,this.iue=this.$ae(this.qae,e,i)}},A5=class{rue(){const t=this.oue.length,e=_.max(...this.hue);return e>=t?(Ur("Created geometry where largest index ("+e+") is larger than/equal to attribute array size ("+t+")"),!1):(e<t-1&&lt("Created geometry where largest index ("+e+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.aue||this.aue.length===t||(Ur("Created geometry where position ("+t+") and uv ("+this.aue.length+") buffers have different length."),!1))}uue(t,e){if(!this.rue())throw new g("Failed to validate buffers for WebGLGeometry.");const i=function(t,e){const i=[];return e.forEach((t=>{i.push(t.x,t.y,t.z)})),new g5(t,new Float32Array(i),3)}(t,this.oue),s=function(t,e){return new p5(t,new Uint16Array(e))}(t,this.hue),n=function(t,e){const i=[];return e.forEach((t=>{i.push(t.x,t.y)})),new g5(t,new Float32Array(i),2)}(t,this.aue);return new S5(i,s,n,e)}constructor(t,e,i){this.oue=t,this.hue=e,this.aue=i}},S5=class{lue(){this.oue.iW(this.due),null!==this.fue&&this.aue.iW(this.fue)}_ue(){this.oue.sW(this.due),null!==this.fue&&this.aue.sW(this.fue)}Gae(){this.hue.Qae()}constructor(t,e,i,s){this.oue=t;const n=s.sue(w5.VertexPos);if(null===n)throw new g("Failed to get position attribute location.");this.due=n,this.aue=i,this.fue=s.sue(w5.VertexUV),this.hue=e}},T5=class extends A5{constructor(t=1,e=32,i=16,s=0,n=2*_.PI,r=0,o=_.PI){let h=0;const a=_.min(r+o,_.PI),u=[],c=[],l=[],d=[];for(let u=0;u<=i;u++){const f=[],v=u/i;let m=0;0===u&&0===r?m=.5/e:u===i&&a===_.PI&&(m=-.5/e);for(let i=0;i<=e;i++){const a=i/e,u=-t*_.cos(s+a*n)*_.sin(r+v*o),d=t*_.cos(r+v*o),g=t*_.sin(s+a*n)*_.sin(r+v*o);c.push(new Gu(u,d,g)),l.push(new a5(a+m,1-v)),f.push(h++)}d.push(f)}for(let t=0;t<i;t++)for(let s=0;s<e;s++){const e=d[t][s+1],n=d[t][s],o=d[t+1][s],h=d[t+1][s+1];(0!==t||r>0)&&u.push(e,n,h),(t!==i-1||a<_.PI)&&u.push(n,o,h)}super(c,u,l)}};r(),r();var k5=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],E5=class{vue(){const t=this.qae;t.activeTexture(this.mue),t.bindTexture(t.TEXTURE_2D,this.gue)}ur(){const t=this.qae;t.activeTexture(this.mue),t.bindTexture(t.TEXTURE_2D,this.gue),t.uniform1i(this.pue,0)}wue(t){const e=this.qae;e.bindTexture(e.TEXTURE_2D,this.gue),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,this.L1,this.yue,this.bue,this.Aue,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1)}Sue(t){const e=this.qae;e.bindTexture(e.TEXTURE_2D,this.gue),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),t.gst.gY(e,e.TEXTURE_2D,this.L1,this.yue,this.bue,this.Aue),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,e){if(this.qae=t,this.gue=t.createTexture(),null===this.gue)throw new g("Failed to create texture");const i=e.nue(Zo.Texture);if(null===i)throw new g("Failed to get texture location.");this.pue=i,t.bindTexture(t.TEXTURE_2D,this.gue),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.mue=t.TEXTURE0,this.L1=0,this.yue=t.RGBA,this.bue=t.RGBA,this.Aue=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.L1,this.yue,2,2,0,this.bue,this.Aue,new j(k5))}},x5="\n    attribute vec4 "+w5.VertexPos+";\n    attribute vec2 "+w5.VertexUV+";\n\n    uniform mat4 "+Zo.ModelViewMat+";\n    uniform mat4 "+Zo.ProjectionMat+";\n    \n    varying mediump vec2 "+y5.UV+";\n    \n    void main() {\n      gl_Position = "+Zo.ProjectionMat+" * "+Zo.ModelViewMat+" * "+w5.VertexPos+";\n      "+y5.UV+" = "+w5.VertexUV+";\n    }\n",R5="\n    varying mediump vec2 "+y5.UV+";\n    \n    uniform sampler2D "+Zo.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+Zo.Texture+", "+y5.UV+");\n    }\n",I5=class{eue(){return this.iue}iW(){this.qae.useProgram(this.iue.eue()),this.gue.ur()}Tue(t){this.gue.wue(t)}kue(t){this.gue.Sue(t)}constructor(t){this.qae=t,this.iue=new b5(t,x5,R5),this.gue=new E5(t,this.iue)}};r(),r();var C5=Zl(Kl()),P5=Zl(Ql()),D5=(Zl(Jl()),Zl($l())),N5=(Zl(td()),Zl(ed())),M5=Zl(id()),L5=Zl(sd()),B5=Zl(nd()),O5=Zl(rd()),F5=class{Gae(t,e){if(this.Eue(e.xue)){this.Rue.lue(),this.Iue.iW();const i=this.Cue,s=e.Pue,n=(0,M5.default)(s,s,i);t.uniformMatrix4fv(this.Due,!1,n);const r=e.Nue;t.uniformMatrix4fv(this.Mue,!1,r),this.Rue.Gae(),this.Rue._ue()}}Eue(t){return"none"===this.xue||"right"!==t&&"left"===this.xue||"right"===t&&"right"===this.xue}get Cue(){const t=(0,C5.default)(),e=this.uo;return(0,O5.default)(t,t,e.hae()),(0,B5.default)(t,t,this.Lue.x,new Float32Array([1,0,0])),(0,B5.default)(t,t,this.Lue.y,new Float32Array([0,1,0])),(0,B5.default)(t,t,this.Lue.z,new Float32Array([0,0,1])),t}constructor(t,e,i,s){this.uo=new Gu,this.Lue=new Gu,this.xue="none",this.Iue=i;const n=i.eue();this.Rue=e.uue(t,n),s&&(this.xue=s);const r=n.nue(Zo.ModelViewMat);if(null===r)throw new g("Failed to get model view matrix location.");this.Due=r;const o=n.nue(Zo.ProjectionMat);if(null===o)throw new g("Failed to get projection matrix location.");this.Mue=o}};r();var V5=class{Bue(){const t=(0,C5.default)();return(0,L5.default)(t,this.Oue,this.Fue,this.Vue,this.Wue)}Uue(){this.Gue=this.Bue()}get Nue(){return new Float32Array(this.Gue)}set Nue(t){this.Gue=t}Hue(){const t=(0,C5.default)(),e=(0,D5.default)((0,C5.default)(),this.Zue.hae()),i=(0,P5.default)((0,C5.default)(),this.Xue.hae());return(0,M5.default)(t,e,i),(0,N5.default)(t,t),t}zue(){this.Yue=this.Hue()}get Pue(){return new Float32Array(this.Yue)}Kue(){this.zue(),this.Uue()}tr(){this.Zue=new Gu,this.Lue=new Yo,this.Kue()}jue(t){const e=this.Xue.mae();e.yO(t),this.Lue=e.yae()}Que(t){this.Lue=t.yae()}get Jue(){return this.Oue}set Jue(t){this.Oue=t,this.Uue()}get $ue(){return this.Fue}set $ue(t){this.Fue=t,this.Uue()}get uo(){return(new Gu).h_t(this.Zue)}set uo(t){this.Zue=t,this.zue()}get Lue(){return(new Yo).h_t(this.Xue)}set Lue(t){this.Xue=t,this.zue()}constructor(t){this.Oue=72*_.PI/180,this.Fue=1.77,this.Vue=.1,this.Wue=100,this.xue="none",this.Zue=new Gu,this.Xue=new Yo,this.Gue=this.Bue(),this.Yue=this.Hue(),t&&(this.xue=t)}};r();var W5=class extends $s{ma(){return new U5}constructor(){super("bae")}},U5=class extends pe{constructor(){super("directionchange")}},G5=1e-4,H5=class extends Bo{fo(){this.tce(),this.qae?Ll.xr?(Ll.xr.addEventListener("devicechange",this.ece),this.sce().then((()=>{this.nce?(this.rce(),this.oce()):this.$Dt("XR: Inline session not available. Panorama functionality will not work.",Ja.VR_PRESENTATION_ERROR)}))):this.$Dt("Your browser does not support WebXR",Ja.VR_PLATFORM_UNSUPPORTED):this.$Dt("Your browser does not support webGL",Ja.VR_PLATFORM_UNSUPPORTED)}oce(){this.ta.wa.yn(ys.aa,this.mn),this.ta.yn(Ya.pn,this.mn),this.ta.yn(Mi.ro,this.ho),this.ta.yn(Mi.zy,this.EX)}tce(){this.hce=h.createElement("canvas"),this.hce.className="theoplayer-vr",this.hce.style.zIndex="2",this.hce.style.background="black",this.hce.style.display="none",this.ta.we.appendChild(this.hce),ya(this.hce);let t=this.hce.getContext("webgl2");t||(t=this.hce.getContext("webgl")),t&&(this.qae=t,this.ace=new d5(this,this.hce))}async sce(){Ll.xr?await Promise.all([Ll.xr.isSessionSupported("inline").then((t=>{this.nce=t})).catch((t=>{this.nce=!1,this.$Dt("exception when calling xr.isSessionSupported for inline session: "+t,Ja.VR_PRESENTATION_ERROR)})),Ll.xr.isSessionSupported("immersive-vr").then((t=>{this.uce=t})).catch((t=>{this.uce=!1,this.$Dt("exception when calling xr.isSessionSupported for immersive-vr session: "+t,Ja.VR_PRESENTATION_ERROR)}))]):(this.nce=!1,this.uce=!1)}rce(){const t=this.cce();this.IT=t,this.lce=Boolean(t),this.lce&&(this.dce=(null==t?void 0:t.stereoMode)||bu.NONE,this.fce=(null==t?void 0:t.panoramaMode)||_C.NONE,this._ce&&(this.vce(this.fce,this.dce),this.mce()))}vce(t,e){if(!this.qae||t===_C.NONE)return;const i=this.qae;let s,n;this.gce.Xae(),t===_C.PM360?(s=2*_.PI,n=-_.PI/2):(s=_.PI,n=-_.PI);const r=new T5(16,60,40,0,s),o=[],h=[];for(let t=0;t<r.aue.length;t++){const i=r.aue[t];switch(e){case bu.NONE:o.push(i),h.push(i);break;case bu.VERTICAL:o.push(new a5(i.x,.5*i.y)),h.push(new a5(i.x,.5*i.y+.5));break;case bu.HORIZONTAL:o.push(new a5(.5*i.x,i.y)),h.push(new a5(.5*i.x+.5,i.y))}}r.oue.forEach((t=>{t.x*=-1}));const a=new A5(r.oue,r.hue,o),u=new A5(r.oue,r.hue,h);this.pce=new I5(i);const c=new F5(i,a,this.pce,"left");c.Lue.y=n,this.gce.Zae(c);const l=new F5(i,u,this.pce,"right");l.Lue.y=n,this.gce.Zae(l)}mce(){this.hce.style.display="block",this.wce(),this.nce&&this.ta.yn(Mi.so,this.yce)}bce(){this.Ace(),this.ta.fn(Mi.so,this.yce),this.hce.style.display="none"}Sce(){this.Tce(),this.kce()}async Ece(){if(!this.xce&&this.nce)try{const t=await hu(Ll.xr.requestSession("inline"),this.cW.Bw);let e;e=Z.Qs?Z.fm?"viewer":"local":"viewer";const i=await t.requestReferenceSpace(e);t.addEventListener("end",this.Tce),this.Rce=i,this.xce=t,this.ace.iW(),this.Ice(),await t.updateRenderState({baseLayer:new XRWebGLLayer(t,this.qae),inlineVerticalFieldOfView:this.Oue*o5})}catch(t){this.Tce(),this.$Dt(t,Ja.VR_PRESENTATION_ERROR)}}Tce(){this.xce&&(this.Ace(),this.ace.sW(),this.xce.removeEventListener("end",this.kce),this.xce.end(),this.xce=null,this.wce())}async Cce(){if(!this.Pce&&this.uce){this.Ace();try{const t=await hu(Ll.xr.requestSession("immersive-vr"),this.cW.Bw),e=await t.requestReferenceSpace("local");t.addEventListener("end",this.kce),this.Dce=e,this.Pce=t,await this.Nce(),this.Ice()}catch(t){this.kce(),this.$Dt(t,Ja.VR_PRESENTATION_ERROR)}}}async Nce(){const t=this.qae,e=this.Pce;this.hce&&t&&e&&!this.Mce&&(this.hce.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),this.hce.addEventListener("webglcontextrestored",(()=>{this.vce(this.fce,this.dce)})),this.Mce=!0,await t.makeXRCompatible(),await e.updateRenderState({baseLayer:new XRWebGLLayer(e,t)}))}wce(){if(!this.Pce&&this.qae){const t=this.qae,e=this.hce.clientWidth,i=this.hce.clientHeight;if(0===e||0===i)return;const s=As.Ys.Xg;this.hce.width=e*s,this.hce.height=i*s,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}Ice(){null===this.Lce&&(this.Bce(),this.Oce?this.Lce=this.Oce.requestAnimationFrame(this.Fce):(this.Vce(),lt("XR: Attempted to start animation loop without inline or immersive session.")))}Ace(){null!==this.Lce&&(this.Vce(),this.Oce?this.Oce.cancelAnimationFrame(this.Lce):lt("XR: Attempted to stop animation loop by cancelAnimationFrame even though there is no session running."),this.Lce=null)}Bce(){if(null!==this.Wce)return;const t=this.ta.wI();if(void 0===t||!(t instanceof HTMLVideoElement))return void lt("No video source.");if("function"!=typeof t.requestVideoFrameCallback)return;const e=()=>{this.pce.kue(this.ta),this.Wce=t.requestVideoFrameCallback(e)};this.Uce=t,this.Wce=t.requestVideoFrameCallback(e)}Vce(){var t,e;null!==this.Wce&&(null==(e=this.Uce)||null==(t=e.cancelVideoFrameCallback)||t.call(e,this.Wce),this.Uce=null,this.Wce=null)}Gce(){return!!this.Hce||(Z.Ka?this.Zce&&this.Xce:this.Zce)}zce(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.Xce="granted"===t}))}qce(){return(!this.ZR()||Boolean(this.Yce))&&this.Kce()}ZR(){return this.ta.ZR}Kce(){return this.ta.tI>=2}get lce(){return this.jce}set lce(t){const e=this.Rft;this.jce=t,this.Rft!==e&&this.yo(new C2)}get _ce(){return this.fce!==_C.NONE}get fce(){return this.Qce}set fce(t){const e=this.Rft;this.Qce=t,this.Rft!==e&&this.yo(new C2)}get uce(){return this.Jce}set uce(t){const e=this.Rft;this.Jce=t,this.Rft!==e&&this.yo(new C2)}get $ce(){return this.uce}get Oce(){return this.Pce||this.xce}get Pce(){return this.Hce}set Pce(t){const e=this.Rft;this.Hce=t,this.Rft!==e&&this.yo(new C2)}get tle(){return this.Dce||this.Rce}get ele(){const t=this.sle.mae();return{yaw:t.gae*h5,pitch:t.pae*h5,roll:t.wae*h5}}set ele(t){const e=Z5(t&&t.pitch||0)*o5,i=Z5(t&&t.roll||0)*o5,s=Z5(t&&t.yaw||0)*o5,n=new u5(s,e,i),r=this.sle.mae(),o=this.nle.mae();this.sle=n.yae(),this.nle=n.yF(r).yO(o).yae()}get Lae(){const t=this.nle.mae();return{yaw:t.gae,pitch:t.pae,roll:t.wae}}set Lae(t){const e=X5(t&&t.pitch||0),i=X5(t&&t.roll||0),s=X5(t&&t.yaw||0),n=new u5(s,e,i);this.nle=n.yae()}get Rft(){return this.lce?this.Pce?l5.qa:l5.Sae:l5.Rs}get rle(){return null!==this.Pce}set rle(t){const e=this.rle;t&&this.uce?this.Cce():this.kce(),this.rle!==e&&this.yo(new f5)}get ole(){return this.Zce}set ole(t){null===this.Hce&&(this.Zce=t,t&&Z.Ka&&this.zce())}get hle(){return this.Oue}set hle(t){t&&t>=0&&t<=180&&(this.Oue=t,null!==this.xce&&this.xce.updateRenderState({inlineVerticalFieldOfView:this.Oue*o5}))}$Dt(t,e){Ur(t),this.yo(new Wa(new A(e,t)))}cce(){const t=this.ta.Ya();return t&&t.vr}gn(){this.cW.Xw(),this.Sce(),this.Bo(),this.ta=void 0,this.qae=void 0}constructor(t){super(),this.cW=new $t,this.nce=!1,this.Jce=!1,this.sle=new Yo,this.ale=new Yo,this.nle=new Yo,this.Oue=74,this.Zce=!1,this.IT=void 0,this.dce=bu.NONE,this.jce=!1,this.Qce=_C.NONE,this.gce=new v5,this.xce=null,this.Hce=null,this.Rce=null,this.Dce=null,this.Mce=!1,this.Lce=null,this.Uce=null,this.Wce=null,this.Yce=0,this.Xce=!1,this.ece=()=>{this.sce()},this.ho=()=>{this.bce(),this.Sce(),this.rce()},this.yce=()=>{this.Ece()},this.kce=()=>{this.Pce&&(Zf("Ending immersive session"),this.Ace(),this.Pce.removeEventListener("end",this.kce),this.Pce.end(),this.Pce=null,this.Dce=null,this.Mce=!1,this.xce?this.Ice():this.Ece())},this.mn=()=>{this.wce()},this.Fce=(t,e)=>{if(!this.qae)return;const i=this.qae,s=this.Oce;if(null===this.Wce&&this.qce()&&(this.pce.kue(this.ta),this.Yce>0&&(this.Yce-=1)),null===s||void 0===e)return void lt("Attempted to run webXR animation loop without session or xrFrame.");this.Lce=s.requestAnimationFrame(this.Fce);const n=s.renderState.baseLayer,r=e.getViewerPose(this.tle);if(void 0===n||void 0===r)return void lt("Attempted to run webXR animation loop without glLayer or viewerPose.");i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer);let o=new u5,h=0;for(const t of r.views){const e=new V5(t.eye);if(e.Nue=t.projectionMatrix,this.Gce()){let i;if(Z.Qs&&Z.fm&&null===this.Hce){if(i=t.transform.inverse.orientation,0===i.x&&0===i.y&&0===i.z&&1===i.w)return}else i=t.transform.orientation;e.Lue=new Yo(i.x,i.y,i.z,i.w)}this.xce&&e.jue(this.nle.mae()),o=o.yO(e.Lue.mae()),h+=1;const s=n.getViewport(t);s&&i.viewport(s.x,s.y,s.width,s.height),this.gce.Gae(i,e)}const a=new u5(o.gae/h,o.pae/h,o.wae);this.sle=a.yae(),function(t,e){const i=t.dae(e);return 1-i*i<G5}(this.sle,this.ale)||(this.ale.h_t(this.sle),this.yo(new W5))},this.EX=()=>{this.Yce=5},this.ta=t,this.ga=function(t){let e,i={get stereo(){return t.rle},set stereo(e){t.rle=e},get useDeviceMotionControls(){return t.ole},set useDeviceMotionControls(e){t.ole=e},get direction(){return t.ele},set direction(e){t.ele=e},get verticalFOV(){return t.hle},set verticalFOV(e){t.hle=e},get canPresentVR(){return t.$ce},get state(){return t.Rft},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new wD(t,c5,i),i}(this),this.fo()}};function Z5(t){return lf(t+180,360)-180}function X5(t){return lf(t+_.PI,2*_.PI)-_.PI}Nh((function(t){return class extends t{ma(){return nh(super.ma(),{vr:this.Bae.ga})}gn(){this.Bae.gn(),super.gn()}constructor(t,e){super(t,e),this.Bae=new H5(this)}}}),co.nu),r(),r();var z5=class extends Je{get ga(){return this.Za||(this.Za=function(t){let e,i={get status(){return t.Hk},get tasks(){return t.Jte},get network(){return t.WX.ga},createTask:(e,i)=>t.ule(e,i),addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new ht(t,i),i}(this)),this.Za}get Hk(){return this.cle.Hk}get Jte(){return this.cle.Jte.ga}get WX(){return this.lst}ule(t,e,i){let s,n;if(void 0===i&&(i="persistent"),!t)throw new g("Unexpected - The source description is undefined");if(s=DC(t),n=I3(e),pC(s))throw new g("Invalid source description");return this.cle.qte(s,n).ga}constructor(t,e){super(),this.cle=t,this.lst=e,this.cle.yn("rat",this.Ds)}};var q5=function(){const t=new nD(As.aR,!1),e=Qa.Lg,i=new B3(t),s=new E3(e,i),n=new oD(t),r=new V2(e.Ert,s,"persistent");return new z5(r,n)}().ga;function Y5(t,e){if("function"==typeof t.getAll){return kn(void 0===e?t.getAll():t.getAll(e))}return function(t){let e=new as,i=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(i.push(s.value),s.continue()):e.Mb(i),Bt()},t.onerror=()=>{e.Lb(t.error),Bt()},e.Bb}(void 0===e?t.openCursor():t.openCursor(e))}function kn(t){return new Promise(((e,i)=>{t.onsuccess=()=>{e(t.result),Bt()},t.onerror=()=>{i(t.error),Bt()}}))}r(),r(),r(),r(),r(),r();var K5=class{Xw(){if(this.Yh)try{this.brt.abort(),this.Yh=!1}catch(t){}}constructor(t){this.brt=t,this.Yh=!0,this.Bb=new Promise(((t,e)=>{this.brt.oncomplete=()=>{this.Yh=!1,t(),Bt()},this.brt.onerror=()=>{this.Yh&&(this.Yh=!1,e(this.brt.error||new g("Transaction error")),Bt())},this.brt.onabort=()=>{this.Yh=!1,e(new g("Transaction aborted")),Bt()}}))}};async function j5(t,e,i){const s=new K5(t);try{const[t]=await Promise.all([e(i),s.Bb]);return t}catch(t){if(!s.Yh)throw new H2("IDBTransaction committed prematurely",t);throw t}finally{s.Xw()}}var Q5=class{get l(){return this.QE.l}urt(t){return Promise.resolve("persistent"===t)}crt(t,e){if(void 0===e&&(e="persistent"),"persistent"!==e)return Promise.reject(hV(e));return kn(this.lle(Su.Irt).put(t))}async lrt(t,e){if(void 0===e&&(e="persistent"),"persistent"!==e)return Promise.reject(hV(e));for(const i of t)await this.crt(i,e)}async Ib(t){return Boolean(await this.Cb(t))}Cb(t){return kn(this.lle(Su.Rrt).get(t))}drt(t,e){return kn(this.lle(Su.Rrt).index(e).get(t))}async ert(t){const e=[];for(let i of t){const t=await this.Cb(i);t&&e.push(t)}return e}frt(){return Y5(this.lle(Su.Rrt))}_rt(t){return Y5(this.lle(Su.Rrt),t)}vrt(t,e){return Y5(this.lle(Su.Rrt).index(e),t)}jS(t){return kn(this.lle(Su.Irt).delete(t))}async mrt(t){for(const e of t)await this.jS(e)}grt(){return kn(this.lle(Su.Irt).clear())}lle(t){if(!this.dle)throw new g("Lock was released");if(!function(t,e){return t===Su.Rrt&&e===Su.Rrt||e===Su.Irt}(t,this.dle.mode))throw new g("Incompatible transaction mode: "+this.dle.mode+", expected "+t);return this.dle.objectStore(this.l)}fle(){this.QE._le(this),this.dle=void 0}constructor(t,e){this.QE=t,this.dle=e}};var J5=class{urt(t){return Promise.resolve("persistent"===t)}crt(t,e){return void 0===e&&(e="persistent"),"persistent"!==e?Promise.reject(hV(e)):this.brt(Su.Irt,(e=>e.crt(t)))}lrt(t,e){return void 0===e&&(e="persistent"),"persistent"!==e?Promise.reject(hV(e)):this.brt(Su.Irt,(e=>e.lrt(t)))}Ib(t){return this.brt(Su.Rrt,(e=>e.Ib(t)))}Cb(t){return this.brt(Su.Rrt,(e=>e.Cb(t)))}drt(t,e){return this.brt(Su.Rrt,(i=>i.drt(t,e)))}ert(t){return this.brt(Su.Rrt,(e=>e.ert(t)))}frt(){return this.brt(Su.Rrt,(t=>t.frt()))}_rt(t){return this.brt(Su.Rrt,(e=>e._rt(t)))}vrt(t,e){return this.brt(Su.Rrt,(i=>i.vrt(t,e)))}jS(t){return this.brt(Su.Irt,(e=>e.jS(t)))}mrt(t){return this.brt(Su.Irt,(e=>e.mrt(t)))}grt(){return this.brt(Su.Irt,(t=>t.grt()))}Nxt(t){return this.vle(),this.yxt=new Q5(this,t),this.yxt}vle(){if(void 0!==this.yxt)throw new g("Already locked")}_le(t){if(this.yxt!==t)throw new g("Incorrect lock");this.yxt=void 0}Wo(t){return this.Go.Wo(t)}brt(t,e){return this.Wo((()=>this.mle(t,e)))}async mle(t,e){this.vle();const i=this.ple.transaction(this.l,t),s=this.Nxt(i);try{return await j5(i,e,s)}finally{s.fle()}}wle(t){this.vle();const e=this.ple.transaction(this.l,t);return this.Nxt(e)}static yle(t,e){let i;const s=new Promise((t=>{i=t})),n=t.reduce(((t,e)=>t.then((()=>{let t;const i=new Promise((e=>{t=e}));return e.Wo((()=>(t(),s))).catch(Bt),i}))),Promise.resolve());return i(n.then(e)),s}constructor(t,e){this.yxt=void 0,this.Go=new Eu,this.ple=t,this.l=e}};r(),r(),r(),r(),r();var $5={XD:17,ble:async t=>{const{transaction:e,database:i}=t,s=e.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)i.deleteObjectStore(s[t]);i.createObjectStore(n6,{keyPath:"id"}),i.createObjectStore(r6,{keyPath:"key"}),i.createObjectStore(o6,{keyPath:"key"});i.createObjectStore(h6,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");i.createObjectStore(a6,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},t6=class{async Ale(t){for(const e of this.Sle)this.Tle<e.XD&&await e.ble(t)}constructor(t){this.Tle=t}},e6=class extends t6{get Sle(){return[$5]}},i6=new class{kle(t){this.Ele=t}uit(t){return this.Ele(t)}constructor(){this.Ele=t=>new e6(t)}},s6=18,n6="cachingTask",r6="licences",o6="manifest",h6="segment",a6="segmentMetadata";async function u6(){!function(){if("undefined"==typeof indexedDB)throw new g("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",s6);return t.addEventListener("upgradeneeded",c6),await kn(t)}async function c6(t){const e=t.oldVersion<=s6?t.oldVersion:-1,i=t.target,s=i.result,n=i.transaction,r=i6.uit(e),o={database:s,transaction:n};await j5(n,(t=>r.Ale(t)),o)}var l6=class{static get Lg(){return this.Wrt||(this.Wrt=u6()),this.Wrt}};l6.Wrt=void 0,r();var d6=class{brt(t){return t(this)}fle(){this.Trt.fle(),this.Srt.fle(),this.krt.fle(),this.Ert.fle(),this.xrt.fle()}constructor(t,e){this.Trt=t.Trt.Nxt(e),this.Srt=t.Srt.Nxt(e),this.krt=t.krt.Nxt(e),this.Ert=t.Ert.Nxt(e),this.xrt=t.xrt.Nxt(e)}};Qa.ja(class t{static async uit(){const e=await l6.Lg;return new t(e)}brt(t){const e=this.allCollections;return J5.yle(e,(()=>this.mle(e,t)))}async mle(t,e){const i=t.map((t=>t.l)),s=this.ple.transaction(i,Su.Irt),n=new d6(this,s);try{return await j5(s,e,n)}finally{n.fle()}}get allCollections(){return[this.Srt,this.Trt,this.krt,this.Ert,this.xrt]}constructor(t){this.ple=t,this.Trt=new J5(t,a6),this.Srt=new J5(t,h6),this.krt=new J5(t,o6),this.Ert=new J5(t,n6),this.xrt=new J5(t,r6)}}.uit),r(),r(),r();var f6=class{xle(t){const e=this.lj.fR(),i=t.createGain();for(const s of e){t.createMediaElementSource(s).connect(i)}return i}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){const t=this;return{createAudioSourceNode:e=>t.xle(e)}}constructor(t){this.Za=void 0,this.lj=t}};Nh((function(t){return class extends t{ma(){const t=this.Rle.ga;return nh(super.ma(),{get audio(){return t}})}constructor(t,e){super(t,e),this.Rle=new f6(this.xa)}}}),co.nu),r(),r();Nh((function(t){return class e extends t{ka(t){const i=e.Ile(this.md.analytics),s=e.Ile(t?t.analytics:void 0);i||s?this.Cle(la({},i,s)):this.Ple&&this.Ple.disable(),super.ka(t)}Cle(t){if(this.Ple)this.Ple.enable(),this.Ple.setOptions(t);else{const e=s.youbora;if(!e)throw new g("Youbora JavaScript library not loaded.");if(!e.adapters.TheoPlayer2)throw new g("TheoPlayer2 adapter not available on Youbora JavasScript library");const i=new e.Plugin(t);i.setAdapter(new e.adapters.TheoPlayer2(this.ga)),this.Vc&&e.adapters.TheoPlayer2.NativeAdsAdapter&&i.setAdsAdapter(new e.adapters.TheoPlayer2.NativeAdsAdapter(this.ga)),this.Ple=i}}static Ile(t){if(t){const e=t.filter((t=>"youbora"===t.integration));if(0===e.length)return;if(e.length>1)throw new g("Only one youbora analytics configuration expected");const i=e[0],{integration:s}=i;return NS(i,["integration"])}}gn(){this.Ple&&this.Ple.disable(),super.gn()}constructor(t,e){super(t,e)}}}),co.Mst),r(),r(),r();var _6=1,v6=0,m6=1e3,g6=class t extends BA{Dle(){const t=this.ct===1/0,e=t?_6:v6,i=t?-1:this.ct,s=Ke(this.ta.rt.oC,this.Nle);this.Mle.setPresentationInformation(new this.Lle(e,i,s))}Nle(t){const e=t.EC.oC,i=[];for(let t=0;t<e.length;t++){const s=e[t];s.ji&&s.Ti&&i.push({trackIdx:t,bitrate:s.mG,width:s.ji,height:s.Ti,codecIdentifier:s.Urt})}return i}Ble(){return this.ta.bR()*m6}get ct(){return this.ta._d()*m6}get Ole(){return this.Fle}get Vle(){return this.Wle}set Vle(t){this.Wle=t,t&&this.Mle.reportPlayerState(t)}set Ule(t){this.Gle=t}Hle(){return p((()=>{this.Zle(),this.Xle()}),t.zle)}sMt(){this.ta.Vc&&(this.ta.Vc.yn("nnt",this.qle),this.ta.Vc.yn("rnt",this.Yle),this.ta.Vc.yn("e2t",this.Kle),this.ta.Vc.yn("F2t",this.jle)),this.ta.yn(Mi.xy,this.hoe),this.ta.yn(sn.ua,this.M6),this.ta.yn(Mi.Uy,this.Qle),this.ta.yn(Mi.so,this.yce),this.ta.yn(Zc.BL,this.TX),this.ta.yn(Mi.Xy,this.LY),this.ta.yn(Mi.zy,this.EX),this.ta.yn(Zc.LL,this.AX),this.ta.yn(Mi.Ky,this.Jle)}nMt(){this.ta.Vc&&(this.ta.Vc.fn("nnt",this.qle),this.ta.Vc.fn("rnt",this.Yle),this.ta.Vc.fn("e2t",this.Kle),this.ta.Vc.fn("F2t",this.jle)),this.ta.fn(Mi.xy,this.hoe),this.ta.fn(sn.ua,this.M6),this.ta.fn(Mi.Uy,this.Qle),this.ta.fn(Mi.so,this.yce),this.ta.fn(Zc.BL,this.TX),this.ta.fn(Mi.Xy,this.LY),this.ta.fn(Mi.zy,this.EX),this.ta.fn(Zc.LL,this.AX),this.ta.fn(Mi.Ky,this.Jle)}gn(){m(this.$le),this.nMt()}constructor(t,e,i,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.ta=t,this.IT=e,this.Mle=i,this.tde=s,this.ede=n,this.Lle=r,this.ide=!0,this.Fle=!1,this.Gle=void 0,this.Wle=void 0,this.sde=void 0,this.qle=t=>{const e=t.tnt;e.JJt();var i;i=e.Xst().duration;const s="linear"===e.Xst().type;e.$Jt(),e.KJt();s&&(this.Fle=!0),this.Ule=this.ede.AD_IMPRESSION,this.Ule=this.ede.AD_STARTED},this.Yle=t=>{this.Fle=!1,this.Ule=this.ede.AD_COMPLETED},this.Kle=t=>{t.ujt===$c.ADBLOCK?this.Ule=this.ede.AD_BLOCKED:this.Ule=this.ede.AD_ERROR},this.jle=()=>{this.Ule=this.ede.AD_SKIPPED},this.Jle=t=>{var e,i,s,n;t.bE===Io.lE&&(this.sde&&t.gz!==this.sde&&this.Mle.reportABRSwitch(this.sde,t.gz),this.sde=t.gz,this.Mle.reportChunkRequest(new MMChunkInformation(t.bN,t.gz,t.JM,t.Uut.qu,void 0,void 0,null!=(s=null==(e=t.Uut.iut)?void 0:e[0])?s:0,null!=(n=null==(i=t.Uut.iut)?void 0:i[1])?n:-1)))},this.hoe=t=>{this.Vle=this.tde.STOPPED,this.yo(t)},this.M6=t=>{this.Vle=this.tde.ERROR,this.Mle.reportError(t.error,this.Ble())},this.Qle=()=>{this.Ole?this.Ule=this.ede.AD_PAUSED:this.Vle=this.tde.PAUSED},this.yce=()=>{this.Ole&&(this.Ule=this.ede.AD_PLAY)},this.TX=()=>{this.Ole?(this.Gle===this.ede.AD_PAUSED&&(this.Ule=this.ede.AD_RESUMED),this.Ule=this.ede.AD_PLAYING):(this.ide&&(this.ide=!1,this.Dle(),this.Vle=this.tde.STARTED),this.Vle!==this.tde.PAUSED&&this.Vle!==this.tde.BUFFERING||(this.Vle=this.tde.RESUMED))},this.LY=()=>{this.Mle.reportPresentationSize(this.ta.cI,this.ta.hI)},this.EX=t=>{this.Ole||this.Vle!==this.tde.PAUSED||this.Mle.reportPlayerSeekCompleted(t.currentTime*m6)},this.AX=()=>{this.Ole||(this.Vle=this.tde.BUFFERING)},this.Xle=()=>{this.Mle.reportDownloadRate(_.floor(kl.Lg.rG()))},this.Zle=()=>{this.Ole||this.Mle.reportPlaybackPosition(this.Ble())},this.Vle=this.tde.INITIALIZED,this.sMt(),this.$le=this.Hle()}};g6.zle=2e3,Nh((function(t){return class extends t{gn(){super.gn(),this.rde()}constructor(t,e){super(t,e),this.ode=void 0,this.hde=void 0,this.ade=()=>{this.hde=void 0,this.rde();const t=super.Ya();t&&(this.hde=function(t,e){const i=function(t,e){if(t&&t.analytics)for(const e of t.analytics)if("smartsight"===e.integration)return e;if(e&&e.analytics)for(const t of e.analytics)if("smartsight"===t.integration)return t;return}(t,e);if(!i)return;return i}(t,this.md)),this.ude()},this.ude=()=>{if(!this.ode&&this.hde&&this.bt&&this.bt.src&&!this.ZR){const t=MMSmartStreaming.getInstance();!function(t,e,i){t.registerMMSmartStreaming(i.playerName,i.customerID,i.subscriberID,i.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","9.0.0"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",e,i.metaURL,i.assetID)}(t,this.bt.src,this.hde),this.ode=new g6(this,this.hde,t),this.ode.yn("ended",this.rde)}},this.rde=()=>{this.ode&&(this.ode.gn(),this.ode=void 0)},this.yn(Mi.ro,this.ade),this.yn(Mi.yy,this.ude),this.yn(Mi.so,this.ude)}}}),co.Mst),r(),r();var p6=String.fromCharCode(95);var w6=class t{get ga(){return this.Za||(this.Za=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(e){t.sendEvent=e}}}(this)),this.Za}get id(){return this.US}get adsManager(){return this.bse}get ids(){return this.r_}get adContainer(){return this.u0t}get sendEvent(){return this.cde}set sendEvent(t){for(let t of this.lde)this.bse.removeEventListener(t.type,t.listener);this.lde=[],this.cde=t,this.dde()}get imaSDK(){return!0}fde(){for(let t in google.ima.AdEvent.Type){const e=google.ima.AdEvent.Type[t];this.bse.addEventListener(e,this._de),this.lde.push({type:e,listener:this._de})}}vde(){Pn(this.lde);for(let t in google.ima.AdEvent.Type){const e=google.ima.AdEvent.Type[t];this.bse.removeEventListener(e,this._de)}}mde(t){this.Xf.push({type:t.type,adVolume:this.adsManager.getVolume()})}dde(){null==this.cde||this.cde.call(this,this.Xf),this.Xf=[]}static gde(e){return t.pde[e]||e}constructor(e,i,s,n){this._de=e=>{this.mde({type:t.gde(e.type)})},this.US=e,this.bse=i,this.r_=s,this.u0t=n,this.lde=[],this.Xf=[]}};w6.pde={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var y6=class{wde(t,e){this.yde=h.createElement("script"),this.yde.id=t.id,this.yde.type="text/javascript",t.adContainer.appendChild(this.yde),this.yde.src="https://z.moatads.com/"+e+"/moatvideo.js#"+t.id,this.bde=t.id,s[this.bde]=t.ga}Ade(){this.yde&&ft(this.yde),this.bde&&(s[this.bde]=void 0)}constructor(){this.yde=void 0,this.bde=void 0}};Nh((function(t){return class e extends t{ka(t){var i,s,n;this.Sde(),null==(i=this.Tde)||i.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.kde),null==(s=this.Tde)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Sde),null==(n=this.Tde)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Ede),this.Tde=void 0,this.u0t=void 0,super.ka(t);const r=t&&t.analytics;this.xde=e.Rde(r);this.Vc&&this.xde&&d2()&&this.Ide()}gn(){var t,e,i;this.Sde(),null==(t=this.Tde)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.kde),null==(e=this.Tde)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Sde),null==(i=this.Tde)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Ede),this.Tde=void 0,this.u0t=void 0,this.Vc&&this.Vc.fn("U8t",this.G8t),super.gn()}Ide(){this.Vc&&this.Vc.yn("U8t",this.G8t)}Cde(t,e,i){const s=p6+"moatApi"+_.floor(1e8*_.random());this.Pde=new w6(s,t,e,i),this.Pde.fde(),this.Dde.wde(this.Pde,this.xde.partnerCode)}static Rde(t){if(t){const e=t.filter((t=>"moat"===t.integration));if(0===e.length)return;if(e.length>1)throw new g("Only one Moat analytics configuration expected");return e[0]}}constructor(t,e){super(t,e),this.xde=void 0,this.Pde=void 0,this.Tde=void 0,this.u0t=void 0,this.Ede=()=>{this.Cde(this.Tde,{partnerCode:this.xde.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.u0t)},this.G8t=t=>{this.Tde=t.yse,this.u0t=t.k7t,this.Sde(),this.Tde.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.kde),this.Tde.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Sde),this.Tde.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Ede)},this.kde=t=>{const e=t.getAd().getAdPodInfo();e.getAdPosition()<e.getTotalAds()&&(this.Sde(),this.Ede())},this.Sde=()=>{this.Pde&&(this.Pde.vde(),this.Pde=void 0),this.Dde.Ade()},this.Dde=new y6}}}),co.Mst),r(),r(),r();var b6=class extends pe{constructor(t,e,i){super(t,new Date),this.Nde=e,this.tnt=i}},Ws=function(t){return t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete",t}({}),A6=class extends b6{constructor(t,e){super("DAILoaded",t,e)}},S6=class extends b6{constructor(t,e){super("DAIAdBreakStarted",t,e)}},T6=class extends b6{constructor(t,e){super("DAIAdBreakEnded",t,e)}},k6=class extends b6{constructor(t,e){super("DAIAdProgress",t,e)}},E6=class extends b6{constructor(t,e){super("DAICuePointsChanged",t,e)}},x6=class extends b6{constructor(t,e){super("DAIClick",t,e)}},R6=class extends b6{constructor(t,e){super("DAIError",t,e)}},I6=class extends b6{constructor(t,e){super("DAIStarted",t,e)}},C6=class extends b6{constructor(t,e){super("DAIFirstQuartile",t,e)}},P6=class extends b6{constructor(t,e){super("DAIMidpoint",t,e)}},D6=class extends b6{constructor(t,e){super("DAIStreamInitialized",t,e)}},N6=class extends b6{constructor(t,e){super("DAIThirdQuartile",t,e)}},M6=class extends b6{constructor(t,e){super("DAIComplete",t,e)}};var L6=class extends Bo{replaceAdTagParameters(t){return this.Qre.replaceAdTagParameters(null!=t?t:null)}Mde(t){return this.Qre.contentTimeForStreamTime(t)}Lde(t){return this.Qre.streamTimeForContentTime(t)}LWt(t,e){const i=function(t){return"vod"===t.availabilityType?new s.google.ima.dai.api.VODStreamRequest(la({},B6(t),{contentSourceId:t.contentSourceID,videoId:t.videoID})):new s.google.ima.dai.api.LiveStreamRequest(la({},B6(t),{assetKey:t.assetKey}))}(t);this.Qre.requestStream(i)}tr(){this.Bde(!1),this.Qre.reset()}gn(){this.Bo();const t=google.ima.dai.api.StreamEvent.Type;this.Qre.removeEventListener(t.AD_BREAK_STARTED,this.Ode),this.Qre.removeEventListener(t.AD_PROGRESS,this.Fde),this.Qre.removeEventListener(t.CLICK,this.L$t),this.Qre.removeEventListener(t.COMPLETE,this.Vde),this.Qre.removeEventListener(t.CUEPOINTS_CHANGED,this.Wde),this.Qre.removeEventListener(t.ERROR,this.Ss),this.Qre.removeEventListener(t.FIRST_QUARTILE,this.Ude),this.Qre.removeEventListener(t.LOADED,this.Gde),this.Qre.removeEventListener(t.MIDPOINT,this.Hde),this.Qre.removeEventListener(t.STARTED,this.Zde),this.Qre.removeEventListener(t.STREAM_INITIALIZED,this.Xde),this.Qre.removeEventListener(t.THIRD_QUARTILE,this.zde),this.Qre.removeEventListener(t.AD_BREAK_ENDED,this.qde),this.tr(),this.Yde&&ft(this.Yde)}Kde(t){this.Qre.onTimedMetadata(t)}jde(t,e,i){this.Qre.processMetadata(t,e,i)}Qde(t){const e=this.Qre.previousCuePointForStreamTime(t);if(e)return{BO:e.end,LO:e.start,KR:e.played}}Jde(t,e){const i=this.Qde(t);if(!i)return;const s=t>e&&i.BO>e,n=i.BO>t&&i.LO<=t;return i.KR||!s&&!n?void 0:i.LO}Bde(t){this.l0t&&(this.l0t.style.display=t?"block":"none")}constructor(t,e,i){super(),this.Qre=t,this.l0t=e,this.Yde=i,this.Ode=t=>{this.Bde(!0);const e=O6(t),i=V6(t);this.yo(new S6(e,i))},this.qde=t=>{this.Bde(!1);const e=O6(t),i=V6(t);this.yo(new T6(e,i))},this.Fde=t=>{const e=O6(t),i=V6(t);this.yo(new k6(e,i))},this.L$t=t=>{const e=O6(t),i=V6(t);this.yo(new x6(e,i))},this.Vde=t=>{const e=O6(t),i=V6(t);this.yo(new M6(e,i))},this.Wde=t=>{const e=O6(t),i=V6(t);this.yo(new E6(e,i))},this.Ss=t=>{const e=O6(t),i=V6(t);this.yo(new R6(e,i))},this.Ude=t=>{const e=O6(t),i=V6(t);this.yo(new C6(e,i))},this.Gde=t=>{const e=O6(t),i=V6(t);this.yo(new A6(e,i))},this.Hde=t=>{const e=O6(t),i=V6(t);this.yo(new P6(e,i))},this.Zde=t=>{const e=O6(t),i=V6(t);this.yo(new I6(e,i))},this.Xde=t=>{const e=O6(t),i=V6(t);this.yo(new D6(e,i))},this.zde=t=>{const e=O6(t),i=V6(t);this.yo(new N6(e,i))},this.l0t&&(this.l0t.style.display="none",this.Qre.setClickElement(this.l0t));const s=google.ima.dai.api.StreamEvent.Type;this.Qre.addEventListener(s.AD_BREAK_STARTED,this.Ode),this.Qre.addEventListener(s.AD_PROGRESS,this.Fde),this.Qre.addEventListener(s.CLICK,this.L$t),this.Qre.addEventListener(s.COMPLETE,this.Vde),this.Qre.addEventListener(s.CUEPOINTS_CHANGED,this.Wde),this.Qre.addEventListener(s.ERROR,this.Ss),this.Qre.addEventListener(s.FIRST_QUARTILE,this.Ude),this.Qre.addEventListener(s.LOADED,this.Gde),this.Qre.addEventListener(s.MIDPOINT,this.Hde),this.Qre.addEventListener(s.STARTED,this.Zde),this.Qre.addEventListener(s.STREAM_INITIALIZED,this.Xde),this.Qre.addEventListener(s.THIRD_QUARTILE,this.zde),this.Qre.addEventListener(s.AD_BREAK_ENDED,this.qde)}};function B6(t){const e=google.ima.dai.api.StreamRequest.StreamFormat;var i;return{apiKey:t.apiKey,authToken:t.authToken,format:"dash"===t.format?e.DASH:e.HLS,networkCode:t.networkCode,streamActivityMonitorId:t.streamActivityMonitorID,adTagParameters:t.adTagParameters,omidAccessModeRules:null!=(i=q1(t.omidAccessModeRules))?i:{}}}function O6(t){const e=t.getStreamData(),i=e.adProgressData;let s;i&&(s={_6t:i.adBreakDuration,$de:i.duration,v6t:i.adPosition,yR:i.currentTime,ct:i.duration,m6t:i.totalAds});return{tfe:s,efe:(e.cuepoints||[]).map((t=>({LO:t.start,BO:t.end,KR:t.played}))),ife:e.errorMessage||void 0,sfe:e.manifestFormat||void 0,nfe:e.streamId||void 0,rfe:(e.subtitles||[]).map((t=>({ofe:t.webvtt,hfe:t.ttml,gs:t.language}))),qu:e.url}}function F6(t){return{IYt:t.getAdSlotId(),P2t:t.getContent(),Ik:t.getContentType(),Ti:t.getHeight(),ji:t.getWidth()}}function V6(t){const e=t.getAd();if(!e)return;const i=e.getAdPodInfo(),s=e.getCompanionAds().map(F6);return{iKt:e.getAdId(),t9t:{v6t:i.getAdPosition(),DJt:i.getMaxDuration(),cse:i.getPodIndex(),ZBt:i.getTimeOffset(),m6t:i.getTotalAds()},Oqt:e.getAdSystem(),dse:e.getAdvertiserName(),xYt:e.getApiFramework(),zqt:s,aYt:e.getCreativeId(),G9t:e.getCreativeAdId(),fse:e.getDealId(),MN:e.getDescription(),ct:e.getDuration(),eH:e.getTitle(),afe:e.getUniversalAdIdRegistry(),ufe:e.getUniversalAdIdValue(),B9t:e.getVastMediaHeight(),L9t:e.getVastMediaWidth(),P9t:e.getWrapperAdIds(),D9t:e.getWrapperAdSystems(),N9t:e.getWrapperCreativeIds()}}function W6(){const t=h.body.lastElementChild;if(t instanceof HTMLIFrameElement&&"Advertisement"===t.title)return t}r(),r(),r();var U6="theo-dai-clickthrough",G6="urn:google:dai:2018",H6=class{get ga(){const t=this,e=this.cfe;return{contentTimeForStreamTime:e=>t.Qre?t.Qre.Mde(e):e,streamTimeForContentTime:e=>t.Qre?t.Qre.Lde(e):e,replaceAdTagParameters(e){t.Qre&&t.Qre.replaceAdTagParameters(e)},get snapback(){return t.lfe},set snapback(e){t.lfe=e},get sourceTransformer(){return e.dfe},set sourceTransformer(t){e.dfe=t}}}AR(t){this.q9.Xw(),this.q9=new $t;oh(go(this.Ise(t,this.q9.Bw),this.q9))}async Ise(t,e){if(ot(e),!this.ffe||!this.Qre)return this.ta._fe(t);if(this.ffe.zst)return;const i=this.ta.bR();if(this.lfe){const s=this.Qre.Jde(t,i);if(s){this.ta._fe(s),await this.Qre.uy(Ws.AD_BREAK_ENDED,e);if(this.Qre.Qde(t).BO>t)return}}this.ta._fe(t)}sI(){const t=this.ffe&&this.ffe.zst;if(t){const e=ee.xn(this.ta.vfe()),i=t.ZBt,s=i+t.DJt,n=new ee([i,s]);return e.Sn(n).ks()}return this.ta.vfe()}async gnt(t,e){if(!t)return this.ta.mfe(t,e);let i=t;try{this.ta.nt.yn(Ce.MI,this.gfe),i=await this.cfe.pfe(t,e),this.ffe&&this.Qre&&(this.wfe=!0)}catch(t){if(Zr(t),t.code===ck.LICENSE_INVALID)return;const e=new A(Ja.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.HG=Te(e),this.ZG=e,this.ta.yo(new Wa(e)),e}await this.ta.mfe(i,e)}tr(){if(this.wfe){if(this.ta.nt.fn(Ce.MI,this.gfe),this.coe){this.coe.fn(Eo.FI,this.yfe);for(const t of this.coe.L.oC)t.fn(gi.tO,this.bfe);this.coe=void 0}this.HG=void 0,this.ZG=void 0,this.q9.Xw(),this.ffe&&this.ffe.tr(),this.Qre&&this.Qre.tr(),this.wfe=!1}}get lt(){return this.HG||this.ta.Afe()}get RR(){return this.ZG||this.ta.Sfe()}gn(){this.tr(),this.ta.Tfe(),this.Qre&&this.Qre.gn()}constructor(t,e,i,s){this.coe=void 0,this.HG=void 0,this.ZG=void 0,this.q9=new $t,this.wfe=!1,this.lfe=!0,this.gfe=t=>{const e=t.Ht;e.Lt===Hi.jV&&(e.pw===Vr.ID3||e.pw===Vr.EVENT_STREAM&&e.IC===G6)&&(e.TE=yh.RC,this.coe=e,e.yn(Eo.FI,this.yfe))},this.yfe=t=>{t.DO.yn(gi.tO,this.bfe)},this.bfe=t=>{var e,i;if(this.Qre)if((null==(e=this.coe)?void 0:e.pw)===Vr.ID3){const e=t.DO.U;"TXXX"===e.id&&this.Qre.Kde({TXXX:e.text})}else if((null==(i=this.coe)?void 0:i.pw)===Vr.EVENT_STREAM){const e=t.DO.U;this.Qre.jde(G6,e,t.eV)}},this.ta=t,this.Qre=e,this.ffe=i,this.cfe=s,i&&e&&this.ta.Vc&&this.ta.Vc.Qst(i.q9t)}};r(),r();var Z6=class extends ts{get kfe(){return this.Efe}get jjt(){return z.Xh}constructor(t,e,i,s=!0){super(i),this.Efe=s,this.l2t=t,this.d2t=e}},X6=class extends t2{xfe(){const t=[Ws.STARTED,Ws.FIRST_QUARTILE,Ws.MIDPOINT,Ws.THIRD_QUARTILE,Ws.COMPLETE];this.Qre.yn(t,this.Rfe),this.Qre.yn(Ws.AD_BREAK_ENDED,this.qde),this.Qre.yn(Ws.AD_PROGRESS,this.Fde),this.Qre.yn(Ws.CUEPOINTS_CHANGED,this.Wde)}get r2t(){return this.K9t}get K1t(){return this.g3t}Ife(t){let e=t.t9t.ZBt,i=this.o$t||this.findAdBreakWithPredicate(e,(t=>!t.KR));if(!i){const s=t.t9t.DJt;e=this.ta.bR(),i=new Z6(s,s,e,!1),i._2t(),this.h$t.push(i)}return i}Cfe(t){switch(t){case Ws.STARTED:this.K9t=!0;break;case Ws.AD_BREAK_ENDED:this.K9t=!1}}Pfe(t,e,i){if(e)switch(t){case Ws.STARTED:case Ws.FIRST_QUARTILE:case Ws.MIDPOINT:case Ws.THIRD_QUARTILE:case Ws.COMPLETE:this.K1t.yo(new Va(this.o$t))}if(i)switch(t){case Ws.STARTED:case Ws.FIRST_QUARTILE:case Ws.MIDPOINT:case Ws.THIRD_QUARTILE:case Ws.COMPLETE:this.K1t.yo(new cn(this.jJt,this.jJt.x9t))}switch(t){case Ws.COMPLETE:this.K1t.yo(new xn(this.jJt,this.z9t.x9t));break;case Ws.AD_BREAK_ENDED:this.K1t.yo(new Lh(this.zst))}switch(t){case Ws.FIRST_QUARTILE:this.K1t.yo(new Bs(this.jJt,this.z9t.x9t));break;case Ws.MIDPOINT:this.K1t.yo(new ws(this.jJt,this.z9t.x9t));break;case Ws.THIRD_QUARTILE:this.K1t.yo(new Ss(this.jJt,this.z9t.x9t))}}Dfe(t){const e=t.tnt,i=this.Ife(e),s=function(t,e){if(t.Vc.length)return!1;for(let i=0;i<e;i++){const e=new j1(t,Ns.Ajt);t.m2t(e)}return!0}(i,e.t9t.m6t),n=function(t,e){const i=e.t9t.v6t-1;return t.Vc[i]}(i,e),r=function(t,e){return t.k2t!==m1.READY&&(t.M9t(e),!0)}(n,e);this.jJt=n,this.o$t=i,i._2t(),this.Pfe(t.type,s,r)}Nfe(t){for(const e of this.h$t)if(mh(t,e.ZBt))return e}findAdBreakWithPredicate(t,e){for(const i of this.h$t)if(mh(i.ZBt,t)&&e(i))return i}get Mfe(){const t=this.findAdBreakWithPredicate(0,(t=>t.kfe));let e=0;return t&&(e=t.DJt),e}Lfe(t,e){let i;for(const s of this.h$t)s.ZBt>=t&&s.ZBt<=e&&!s.KR&&(!i||s.ZBt>=i.ZBt)&&(i=s);return i}RD(){}jst(t){}tr(){this.jJt&&(this.K1t.yo(new xn(this.jJt,this.jJt.x9t)),this.jJt=void 0),this.o$t&&(this.K1t.yo(new Lh(this.o$t)),this.o$t=void 0),this.K9t=!1,Pn(this.h$t)}gn(){this.tr(),this.K1t.gn()}constructor(t,e){super(new Xu,z.Xh),this.Qre=t,this.ta=e,this.Fde=t=>{const e=this.o$t;if(!e||!this.jJt)return;const i=t.Nde.tfe;this.jJt.x9t=i.yR,function(t,e){const i=e.v6t,s=e._6t,n=e.yR,r=vf(t.Vc.slice(0,i-1),(t=>{var e;return null!=(e=t.ct)?e:0}));t.NJt=s-n-r}(e,i)},this.Wde=t=>{const e=t.Nde.efe;if(e)for(const t of e)if(!this.Nfe(t.LO)){const e=t.BO-t.LO,i=new Z6(e,e,t.LO,!0);this.h$t.push(i)}},this.Rfe=t=>{this.Cfe(t.type),this.Dfe(t)},this.qde=t=>{this.K9t=!1,this.jJt=void 0;const e=this.zst;e&&(e.NJt=0,this.Pfe(t.type,!1,!1),this.o$t=void 0)},this.xfe()}};function z6(t){if(t.sources)if(rl(t.sources)){for(const e of t.sources)if(Gc(e))return!0}else if(V(t.sources))return Gc(t.sources);return!1}r();var q6=class{async pfe(t,e){const i=[],s=[];for(const e of t.sources)if(Gc(e)){if(!this.Qre)continue;i.push(e)}else s.push(e);if(0===i.length)return t;let n,r;for(;void 0===n&&0!==i.length;){const{kc:o}=await RI.Lg.qH(i,t),h=o;ot(e);try{n=await this.Bfe(h,e),s.push(n)}catch(t){Zr(t),r=t,we(i,h)}}if(0!==t.sources.length&&0===s.length)throw new g("Fatal: unable to play DAI streams.");return r&&lt(r.message),la({},t,{sources:s})}async Bfe(t,e){if(!this.Qre)throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const i=this.Qre.uy(Ws.LOADED,e),s=this.Qre.uy(Ws.ERROR,e),n=t.type===nl.GC?"dash":"hls";this.Qre.LWt(la({},t.ssai,{format:n}));const r=await Promise.race([i,s]);if(r.type===Ws.LOADED){const e=t.type===nl.GC?nl.GC:nl.ZC;return al(la({},t,{src:this.dfe?await this.dfe(r.Nde.qu||""):r.Nde.qu,type:e}))}throw g(r.Nde.ife)}constructor(t){this.Qre=t,this.dfe=t=>t}};Nh(function(t){return e=>class extends e{ma(){const t=super.ma(),e=t.ads;if(e){const t=this.Ofe.ga;nh(e,{get dai(){return t}})}return t}get ql(){return this.Ffe}_fe(t){super.AR(t)}AR(t,e){this.Ofe.AR(t)}vfe(){return super.sI()}sI(){return this.Ofe.sI()}ka(t){return this.Ofe.tr(),super.ka(t)}async mfe(t,e){return super.gnt(t,e)}async gnt(t,e){return this.Ofe.gnt(t,e)}Afe(){return super.xR()}Sfe(){return super.IR()}xR(){return this.Ofe.lt}IR(){return this.Ofe.RR}Tfe(){super.gn()}gn(){this.Ofe.gn(),this.l0t&&(ft(this.l0t),this.l0t.removeEventListener("keydown",this.Vfe),this.l0t.removeEventListener("click",this.Vfe),this.l0t=void 0),this.Wfe&&(ft(this.Wfe),this.Wfe=void 0)}constructor(e,i){super(e,i),this.Ffe=!1,this.Vfe=t=>{13===t.which&&this.l0t.click(),this.bI()};const s=this.wI(),n=i.ads.googleIma.useAdUiElementForSsai;let r,o;try{var a;n?(this.Wfe=h.createElement("div"),ya(this.Wfe),this.Wfe.className="theo-dai-ad-ui"):(this.l0t=h.createElement("button"),this.l0t.className=U6),r=t(s,this.l0t,this.Wfe),o=new X6(r,this);const e=null!=(a=this.l0t)?a:this.Wfe;e&&this.we.appendChild(e),this.Ffe=!0}catch(t){this.l0t=void 0,this.Wfe=void 0}const u=new q6(r);this.Ofe=new H6(this,r,o,u),this.l0t&&(this.l0t.addEventListener("keydown",this.Vfe),this.l0t.addEventListener("click",this.Vfe))}}}((function(t,e,i){if(!(s.google&&s.google.ima&&V(s.google.ima.dai)))throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const n=W6(),r=new google.ima.dai.api.StreamManager(t,i),o=W6();return new L6(r,e,o&&o!==n?o:void 0)})),co.Pst),r(),r(),r();var Y6=class{get Ufe(){return void 0===this.Gfe?0:(performance.now()-this.Gfe)/1e3}Hfe(t){this.Zfe=t,this.zfe.Xfe(t),this.ta.yn(Mi.so,this.yce),this.ta.yn(Mi.xy,this.hoe),this.ta.yn(Mi.$y,this.xoe),this.ta.yn(sn.ua,this.M6),this.ta.yn(Zc.LL,this.qfe),this.ta.yn([Zc.PL,Zc.DL,Zc.BL],this.Yfe),this.ta.yn(Mi.Sy,this.Kfe),_o.vY(this.XNt)}jfe(){this.ta.fn(Mi.so,this.yce),this.ta.fn(Mi.xy,this.hoe),this.ta.fn(Mi.$y,this.xoe),this.ta.fn(sn.ua,this.M6),this.ta.fn(Zc.LL,this.qfe),this.ta.fn([Zc.PL,Zc.DL,Zc.BL],this.Yfe),this.ta.fn(Mi.Sy,this.Kfe),_o.lY(this.XNt),this.Qfe||(this.zfe.Jfe(this.$fe),this.zfe.t_e()),this.e_e&&this.i_e(),this.Zfe=void 0,this.s_e=!1,this.Qfe=!1,this.$fe=-1/0,Pn(this.n_e)}r_e(){this.s_e&&this.zfe.o_e(),this.Gfe=performance.now(),this.h_e=p(this.a_e,6e4)}i_e(){this.zfe.u_e(this.Ufe),this.e_e=!1,this.Gfe=void 0,this.h_e&&(m(this.h_e),this.h_e=void 0)}c_e(){if(S(this.ta._d()))return;const t=10*function(t,e){return _.floor(t/e)}(this.ta.bR()/this.ta._d()*100,10);qt(this.n_e,t)||(this.n_e.push(t),this.zfe.l_e(t))}constructor(t,e){this.ta=t,this.zfe=e,this.s_e=!1,this.Qfe=!1,this.n_e=[],this.$fe=-1/0,this.e_e=!1,this.yce=()=>{this.s_e||(this.zfe.d_e(),this.e_e&&this.zfe.o_e(),this.s_e=!0)},this.hoe=()=>{this.zfe.f_e(),this.Qfe=!0},this.xoe=()=>{this.$fe<this.ta.bR()&&(this.$fe=this.ta.bR()),this.c_e()},this.qfe=()=>{this.s_e&&(this.__e=performance.now(),this.zfe.v_e(this.ta.bR()))},this.Yfe=()=>{this.__e&&(this.zfe.m_e((performance.now()-this.__e)/1e3),this.__e=void 0)},this.M6=()=>{this.$fe<this.ta.bR()&&(this.$fe=this.ta.bR()),this.zfe.Nnt(this.ta.xR().message)},this.Kfe=()=>{const t=this.ta._d()===1/0;t&&!this.e_e&&(this.e_e=t,this.r_e())},this.XNt=()=>{this.zfe.Jfe(this.$fe),this.zfe.g_e()},this.a_e=()=>{void 0!==this.Gfe&&this.zfe.p_e(this.Ufe)}}};r();var K6=class{Xfe(t){this.w_e(["setDocumentTitle",t.itemTitle]),this.w_e(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.w_e(["trackPageView"])}d_e(){this.y_e("item first play","viewing","1")}t_e(){this.y_e("item skipped","skipped","1")}l_e(t){this.y_e("item progress","percent",""+t)}g_e(){this.y_e("item abandoned","window closed","1")}Jfe(t){this.y_e("item time","watched",""+t)}f_e(){this.y_e("item finished","ended","1")}v_e(t){this.y_e("buffering started","timestamp",""+t)}m_e(t){this.y_e("buffering ended","duration",""+t)}Nnt(t){this.y_e("error","message",""+t)}o_e(){this.y_e("livestream first play","viewing","1")}p_e(t){this.y_e("livestream progress","duration",""+t)}u_e(t){this.y_e("livestream time","watched",""+t)}y_e(t,e,i){this.w_e(["trackEvent","Video",t,e,i])}w_e(t){const e="undefined"!=typeof _paq?_paq:void 0;e?e.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}};r();var j6=class{get b_e(){if(!this.A_e)return;const t=this.ta.bR()/this.A_e;return _.floor(4*t)+1}get S_e(){return void 0!==this.A_e}Hfe(){this.Dc.yn("nnt",this.qle),this.Dc.yn("rnt",this.Yle),this.Dc.yn("F2t",this.jle),this.Dc.yn("e2t",this.Kle),this.ta.yn(Mi.$y,this.xoe),_o.vY(this.XNt)}jfe(){this.Dc.fn("nnt",this.qle),this.Dc.fn("rnt",this.Yle),this.Dc.fn("F2t",this.jle),this.Dc.fn("e2t",this.Kle),this.ta.fn(Mi.$y,this.xoe),Pn(this.T_e),_o.lY(this.XNt),this.A_e=void 0}constructor(t,e,i){this.ta=t,this.Dc=e,this.zfe=i,this.T_e=[],this.qle=()=>{this.A_e=this.ta._d(),this.zfe.k_e(this.A_e)},this.Yle=()=>{this.A_e&&(this.zfe.E_e(this.A_e),Pn(this.T_e),this.A_e=void 0)},this.jle=t=>{if(!this.A_e)return;const e=this.A_e-this.A_e*t.B2t;this.zfe.x_e(e),this.A_e=void 0},this.Kle=()=>{this.A_e=this.ta._d(),this.zfe.R_e()},this.xoe=()=>{const t=this.b_e;if(this.S_e&&t&&!qt(this.T_e,t)){switch(t){case 1:this.zfe.I_e();break;case 2:this.zfe.C_e();break;case 3:this.zfe.P_e();break;case 4:this.zfe.D_e()}this.T_e.push(t)}},this.XNt=()=>{this.zfe.N_e()}}};r();var Q6=class{k_e(t){this.zfe.y_e("ad start","duration",""+t)}E_e(t){this.zfe.y_e("ad finished","duration",""+t)}x_e(t){this.zfe.y_e("ad skipped","remaining time",""+t)}R_e(){this.zfe.y_e("ad blocker","detected","1")}I_e(){this.zfe.y_e("ad progress","firstQuartile","")}C_e(){this.zfe.y_e("ad progress","secondQuartile","")}P_e(){this.zfe.y_e("ad progress","thirdQuartile","")}D_e(){this.zfe.y_e("ad progress","fourthQuartile","")}N_e(){this.zfe.y_e("ad abandoned","window closed","1")}constructor(t){this.zfe=t}};function J6(t){return t&&"streamone"===t.integration}Nh((function(t){return class extends t{gn(){this.fn(Mi.ro,this.ho),this.M_e&&(this.L_e&&this.L_e.jfe(),this.B_e&&this.B_e.jfe(),this.M_e=!1),super.gn()}constructor(t,e){super(t,e),this.M_e=!1,this.ho=()=>{this.M_e&&(this.L_e.jfe(),this.B_e&&this.B_e.jfe());const t=this.Ya();if(this.M_e=!1,!t)return;const e=function(t){if(t.analytics)for(let e of t.analytics)if(J6(e))return e}(t);e&&(this.M_e=!0,this.L_e.Hfe(e),this.B_e&&this.B_e.Hfe())};const i=new K6;if(this.L_e=new Y6(this,i),this.Vc){const t=new Q6(i);this.B_e=new j6(this,this.Vc,t)}this.yn(Mi.ro,this.ho)}}}),co.Mst),r(),r(),r(),r(),r(),r();var $6=class extends AV{async _2(t,e,i){const s=await t9(t);await super._2(s,e,i),this.O_e(s,e)}async l2(t,e,i){const s=await t9(t);await super.l2(s,e,i),this.O_e(s,e)}O_e(t,e){const i=this.V_e.F_e;if(void 0===i)return;const s=e.L1;let n;if(this.W_e!==s&&(this.W_e=s,i.setLevelSwitching(s),i.setContainerFormat(2)),function(t){return Ba.call(t,"hit")}(e)){const t=e.hit,r=e.hit+e.ct;n=e.PV,i.newPts(t,r,"video",s)}else 0;i.appendBuffer(t.Zk,"video",s,n)}async jS(t,e,i){var s;await super.jS(t,e,i),null==(s=this.V_e.F_e)||s.flushBuffer(t,e)}constructor(t,e){super(t),this.V_e=e,this.W_e=void 0}};async function t9(t){switch(t.pw){case Ut.QQ:return t;case Ut.pk:{const e=await He(t.Zk);return{pw:Ut.QQ,Zk:new j(e)}}case Ut.JQ:throw new g("Opaque initialization segments are not supported on web.")}}var e9=class extends yV{fot(t){return t.n3===Io.lE?new $6(t,this.V_e):new AV(t)}constructor(t,e){super(t),this.V_e=e,this.lot(t)}},i9=class extends Xa{get F_e(){return this.U_e}G_e(){this.U_e=new LCEVCdec.LCEVCdec(this.LB.XG,this.H_e,{})}ge(){super.ge(),this.Z_e()}be(){super.be(),this.H_e.style.display="none"}tr(){return this.H_e.style.display="none",void 0!==this.U_e&&(this.U_e.close(),this.G_e()),super.tr()}Ww(){return this.X_e=!0,void 0!==this.U_e&&(this.U_e.close(),this.U_e=void 0),this.ku.removeChild(this.H_e),super.Ww()}PH(t){this.yo(new wM(new lk(ck.ABORTED,t)))}Z_e(){this.LB.XG.style.display="none",this.H_e.style.display="block"}get qrt(){return this.LB}hot(t){return new e9(t,this)}oot(t){return new Qn(t)}constructor(t,e){super(t),this.X_e=!1,this.z_e=t=>{this.X_e||(t||this.PH("LCEVC SDK failed to initialize."),this.G_e())},this.q_e=()=>{this.X_e||this.PH("LCEVC SDK failed to initialize.")},this.ku=e,this.H_e=h.createElement("canvas"),this.H_e.style.width="100%",this.H_e.style.height="100%",this.H_e.style.position="absolute",this.H_e.style.transform="translate(0%, -100%)",this.H_e.style.display="none",this.ku.appendChild(this.H_e),LCEVCdec.ready.then(this.z_e,this.q_e)}},s9=class extends mV{DH(t){if(t===Io.lE)return this.Y_e=new i9(super.DH(t),this.ku),this.Y_e}async vH(t){this.Y_e=void 0;const e=t;await e.Ww(),await super.vH(e.qrt)}get K_e(){return this.Y_e}constructor(t,e){super(t),this.ku=e}},n9=class extends un{async gn(){for(const t of this.hO.oC)t.fn(Eo.iC,this.j_e);this.rt.fn(Ce.MI,this.Q_e),this.rt.fn(Ce.BI,this.J_e),await super.gn(),await this.LB.Ww(),await this.mH.vH(this.LB)}constructor(t,e,i,s,n,r,o,h){const a=new s9(r,h),u=new ct(a);super(t,e,i,s,n,u.DH(o),h),this.Q_e=t=>{t.Ht.yn(Eo.iC,this.j_e)},this.J_e=t=>{t.Ht.fn(Eo.iC,this.j_e)},this.j_e=t=>{var e;const i=null==(e=this.$_e.K_e)?void 0:e.F_e,s=t.nat.TC;null==i||i.setCurrentLevel(s)},this.mH=u,this.$_e=a,this.hO.yn(Ce.MI,this.Q_e),this.hO.yn(Ce.BI,this.J_e)}};O(new class extends $F{nP(t,e,i,s,n,r,o){const h=new iV(Qa.Lg.krt,Qa.Lg.Trt,Qa.Lg.Srt,Qa.Lg.xrt);let a=e;return qX.vT()&&(a=new qX(a)),new n9(i,s,n,r,h,a,Io.lE,t)}async NH(t){if(!t.lcevc)return!1;if(!await super.NH(t))return!1;if(void 0===s.LCEVCdec)throw new A(Ja.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}LH(){return!1}constructor(...t){super(...t),this.BH=ti.hG}}),r();var r9=class extends EJ{async gn(){for(const t of this.hO.oC)t.fn(Eo.iC,this.j_e);this.rt.fn(Ce.MI,this.Q_e),this.rt.fn(Ce.BI,this.J_e),await super.gn(),await this.mH.vH(this.LB)}constructor(t,e,i,s,n,r,o,h,a){const u=new s9(e,t),c=new ct(u);super(c.DH(Io.lE),i,s,n,r,o,h,a),this.Q_e=t=>{t.Ht.yn(Eo.iC,this.j_e)},this.J_e=t=>{t.Ht.fn(Eo.iC,this.j_e)},this.j_e=t=>{var e;const i=null==(e=this.$_e.K_e)?void 0:e.F_e,s=t.nat.oLt.TC;null==i||i.setCurrentLevel(s)},this.mH=c,this.$_e=u,this.hO.yn(Ce.MI,this.Q_e),this.hO.yn(Ce.BI,this.J_e)}};O(new class extends RJ{nP(t,e,i,s,n,r,o){return new r9(t,e,i,n,r,sJ(s.libraryLocation),new kJ(s.libraryLocation),new iV(Qa.Lg.krt,Qa.Lg.Trt,Qa.Lg.Srt,Qa.Lg.xrt),s)}async NH(t,e){if(!t.lcevc)return!1;if(!await super.NH(t,e))return!1;if(void 0===s.LCEVCdec)throw new A(Ja.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}LH(){return!1}constructor(...t){super(...t),this.BH=ti.lG}}),r(),r(),r(),r();var o9=function(t){return t.tve="tr",t.eve="ive",t}({}),h9="freewheel-nonlinear-ad",a9=[Mi.Sy,Mi.$y,Mi.eb,Mi.Uy,Zc.BL,Mi.so],u9=class t extends Et{yI(){this.mH.cZ()}sve(){this.nve.yn("snt",this.rve),this.nve.yn(["nnt","rnt"],this.ove),this.nve.yn("int",this.Oie)}hve(){this.nve.fn("snt",this.rve),this.nve.fn(["nnt","rnt"],this.ove),this.nve.fn("int",this.Oie)}uve(){this.K1t.iu(this.nve.cve)}lve(){this.nve.dve.yn(a9,this.Ds)}fve(){this.nve.dve.fn(a9,this.Ds)}get q1t(){return this}static get X1t(){return z.i$t}get X1t(){return t.X1t}get zst(){var t;return null!=(t=this.nve.cve.zst)?t:null}get Zst(){const t=this.nve.cve.z9t;return t?[t]:[]}jst(t){}bR(){return this.nve.dve.yR}AR(t,e){}_d(){return this.nve.dve.ct}ER(){return this.nve.dve.kR}xR(){return this.HG}IR(){return this.ZG}aI(){return 0}lI(){return 0}fI(){return this.nve.dve.dI}_I(t){this.nve.dve.dI=t}WR(){return this.nve.dve.FR}UR(t){this.nve.dve.FR=t}eI(){return this.nve.dve.tI}get qst(){return this.nve.cve.qst}get Yst(){return this.nve.cve.Yst}sI(){return this.nve.dve.iI}XR(){return this.nve.dve.ZR}J1t(t){if(this.r2t||this.nve.J1t(t),this.nve._ve){if(t.type===Mi.Uy&&this.ta.kR)return!0;if(t.type===Mi.xy)return this.nve.mve.vve(),!0}return!1}be(){this.nve.be()}bI(){this.ZR||this.nve.dve.bI()}async gve(){if(!this.nve.pve)try{await this.nve.X4t()}catch(t){this.wve(t,$c.GENERAL)}}async yve(){if(this.nve.dve.bve)return this.nve.dve.AI(),!1;if(this.nve.Ave)try{await this.nve.mve.Sve()}catch(t){this.wve(t,$c.PLAYBACK)}return!0}get Tve(){return ne(this.xR())}wve(t,e){t.name!==o9.tve&&this.K1t.yo(new zh(e,"Ads could not be loaded."))}async AI(){if(this.ZR&&this.yo(new Xt(this.yR)),await this.gve(),this.Tve)return;const t=await this.yve();!this.Tve&&t&&this.Oie()}a8t(t,e,i){e===Sa.Hst&&this.nve.a8t(t)}ge(){this.nve.ge()}RD(){this.nve.dve.RD()}wI(){return this.Det}fR(){return this.mH.vZ.map((t=>t.XG))}u2t(t){}async gn(){await this.SI(),this.nve.gn(),await this.mH.vH(this.LB),this.hve(),this.fve(),this.K1t.mK(this.nve.cve)}async SI(){this.nve.tr(),this.r2t&&(this.ta.ge(),this.v1t(),this.be())}constructor(t,e,i,s,n){super(t,e),this.HG=void 0,this.ZG=void 0,this.ove=t=>{const e=t.tnt,i="nnt"===t.type;if(e.E2t===Ns.A2t){const t=this.ta.we.classList;i?t.add(h9):t.remove(h9)}i?this.ge():this.be()},this.rve=()=>{this.p3t(),this.ta.bI(),this.ta.be()},this.Oie=()=>{this.nve.pve&&(this.ta.kR||this.ta.AI(),this.be(),this.ta.ge(),this.v1t())},this.nve=s,this.mH=i,this.LB=n,this.Det=n.XG,this.Det.controls=!1,this.sve(),this.uve(),this.lve()}};r(),r(),r();var c9=class extends ts{get kve(){return this.Eve}get xve(){return this.Vc[this.Rve]}set Ive(t){this.Rve=t}get Ive(){return this.Rve}get E2t(){return this.x2t}get jjt(){return z.i$t}constructor(t,e,i,s){super(i),this.Eve=s,this.Rve=0,this.x2t=d9(s),this.l2t=t,this.d2t=e}};r();var l9=class extends ls{get Cve(){return this.Pve}set Cve(t){this.Pve!==t&&(this.Pve=t)}get Ti(){return this.Yl.kve.getHeight()}get ji(){return this.Yl.kve.getWidth()}get FYt(){return this.Cve.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get jjt(){return z.i$t}ma(){return qo(this)}constructor(t,e,i){super(t,e),this.Pve=i}};function d9(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?Ns.A2t:Ns.Ajt}var f9=class t extends Je{async Dve(t,e){this.Nve=t,this.Mve=e,this.Lve(t),await e,this.Bve()}get Ove(){return this.Fve}get Vve(){return this.Wve}get Uve(){return this.Gve}get zst(){return this.o$t}get z9t(){return this.jJt}get qst(){const t=[];if(this.o$t){const e=this.o$t.Ive;e>=0&&t.push(...this.o$t.Vc.slice(e+1))}for(const e of this.Hve)t.push(...e.Vc);return t}get Yst(){return this.Hve}Bve(){this.Zve()}Lve(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Xve),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.zve),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.qve),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Yve),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.Kve)}jve(){this.Nve&&(this.Nve.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Xve),this.Nve.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.zve),this.Nve.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.qve),this.Nve.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.Yve),this.Nve.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.Kve))}Zve(){this.Fve=this.Qve(this.Jve),this.Wve=this.Qve(this.$ve).concat(this.Qve(this.tme)),this.Gve=this.Qve(this.eme),this.Hve=this.Fve.concat(this.Wve).concat(this.Gve)}Qve(t){if(!this.Nve)return[];const e=this.Nve.getSlotsByTimePositionClass(t);return this.ime(e)}nme(t){if(!this.o$t)return void 0;const e=t.getSlot().getAdInstances().indexOf(t);-1!==e&&(this.o$t.Ive=e);const i=this.o$t.xve;return i&&(i.Cve=t),i}rme(t){return Ti(this.Hve,(e=>e.kve===t))}ime(e){return e.map((e=>{const i=e.getTotalDuration(),s=t.ome(e);return new c9(i,i,s,e)}))}static hme(t,e){const i=t.getAdInstances(),s=[];for(const t of i){const i=d9(t.getSlot()),n=new l9(e,i,t),r=[];n.S2t(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),e.m2t(n),s.push(n)}return s}v0t(){const t=this.z9t;t&&this.yo(new Lo(t,this.ame()))}ume(){const t=this.z9t;t&&(this.yo(new xn(t,t.Cve.getPlayheadTime())),this.jJt=void 0)}cme(t){const e=this.zst;e&&(e.NJt=function(t,e,i){void 0===i&&(i=0);let s=0;const n=t.Vc.length;for(let r=e;r<n;r++){const n=t.Vc[r],o=n.ct;if(n){let t=o;r===e&&(t=Zs(o-i,0,o)),s+=t}}return s}(e,e.Ive,t))}static ome(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}ame(){const t=this.z9t;if(!t)return 0;const e=t.Cve;return e.getPlayheadTime()/e.getDuration()}lme(t){we(this.Hve,t),we(this.Fve,t),we(this.Wve,t),we(this.Gve,t)}tr(){this.jve(),this.Fve.length=0,this.Wve.length=0,this.Gve.length=0,this.Hve.length=0,this.jJt=void 0,this.o$t=void 0,this.Nve=void 0,this.Mve=void 0}gn(){this.tr(),this.Bo()}constructor(e,i){super(),this.Vs=e,this.YT=i,this.Jve=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.$ve=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.eme=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.tme=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.Fve=[],this.Wve=[],this.Gve=[],this.Hve=[],this.Xve=e=>{const i=e.slot,s=this.rme(i);s&&(t.hme(i,s),this.o$t=s,s._2t(),this.lme(s),s.E2t===Ns.Ajt&&this.yo(new Va(s)))},this.zve=()=>{const t=this.zst;t&&t.E2t===Ns.Ajt&&(this.yo(new Lh(t)),this.YT.src=""),this.o$t=void 0},this.qve=t=>{const e=this.nme(t.adInstance);e&&(this.yo(new cn(e,e.Cve.getPlayheadTime())),this.jJt=e),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Vs.style.cursor="pointer",this.Vs.addEventListener("click",this.dme))},this.Yve=()=>{this.Vs.style.cursor="",this.Vs.removeEventListener("click",this.dme)},this.dme=()=>{this.z9t&&this.z9t.Cve.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.Kve=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.ume();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.v0t(),this.ume()}}}};r();var _9=class t extends Je{fme(){if(this.Mgt){this.Mgt.setAdVolume(v9(this.FR,this.dI))}}_me(t){this.Mgt=t,this.Lve(t)}Lve(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.vme),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.mme),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.gme),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.pme),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.wme),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.yme)}bme(){const t=this.Mgt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.vme),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.mme),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.gme),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.pme),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.wme),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.yme))}AI(){this.Nyt.zst&&(this.Nyt.zst.kve.resume(),this.ZR=!1)}bI(){this.Nyt.zst&&(this.Nyt.zst.kve.pause(),this.ZR=!0)}get yR(){const t=this.Nyt.z9t;return t&&(this.yR=t.Cve.getPlayheadTime()),this.nZ}set yR(t){this.nZ=t}get ct(){return this.IA}get bve(){return!!this.Nyt&&void 0!==this.Nyt.zst}get ZR(){return this.hZ}set ZR(t){this.hZ=t}get dI(){return this.UA}set dI(t){this.Mgt&&this.Mgt.setAdVolume(t),this.UA=t}get FR(){return this.Mgt&&(this.Ame=0===this.Mgt.getAdVolume()),this.Ame}set FR(t){this.Mgt&&this.Mgt.setAdVolume(v9(t,this.dI)),this.Ame=t}get iI(){return this.n4}get kR(){return this.T4}set kR(t){this.T4=t}get tI(){return this.E4}static Sme(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}Tme(e){const i=t.Sme(e);this.Mgt&&i&&this.Mgt.setVideoState(i)}RD(){const t=this.Nyt.z9t;t&&t.Cve.skip()}tr(){if(this.bme(),this.Mgt){this.Tme("stop"),this.Mgt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.Mgt.getTemporalSlots();for(const e of t)e.stop();this.Mgt.dispose(),this.Mgt=void 0}this.IA=NaN,this.kR=!1,this.E4=gs.jB,this.yR=0,this.kme=0,this.ZR=!0,void 0!==this.Eme&&(m(this.Eme),this.Eme=void 0)}gn(){this.tr(),this.Bo(),this.Nyt.fn("snt",this.xd),this.Xu.fn(Ya.pn,this.mme),this.u0t.removeEventListener("click",this.xme)}constructor(t,e,i,s){super(),this.ta=t,this.Xu=e,this.Nyt=i,this.u0t=s,this.n4=ee.fB().ks(),this.hZ=!0,this.IA=NaN,this.Ame=!1,this.T4=!1,this.E4=gs.jB,this.nZ=0,this.kme=0,this.vme=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const e=t.Cve,i=e.getPlayheadTime(),s=e.getDuration();return i>=s||mh(s,i)})(this.Nyt.z9t)||(this.ZR=!0,this.yo(new vl(this.yR)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.ZR=!1,this.yo(new ce(this.yR));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.Mgt){const t=this.Mgt.getAdVolume();0===t?this.Ame=!0:this.UA=t,this.yo(new eh(this.yR,this.dI))}}},this.gme=()=>{this.kR=!1;const t=this.ZR;if(this.ZR=!1,t&&(this.yo(new Xt(this.yR)),this.yo(new ce(this.yR))),this.E4=gs.JB,this.yR=0,!this.Nyt.z9t)return;const e=this.Nyt.z9t.Cve;this.IA=e.getDuration(),this.yo(new re(this.IA)),this.Eme=p((()=>{if(!this.bve)return void this.Fp();this.Nyt.cme(this.yR);const t=e.getPlayheadTime();Cs(t,this.kme,.001)||this.yo(new I(t,void 0)),this.kme=t}),250),this.Mgt&&this.Mgt.setAdVolume(v9(this.FR,this.dI))},this.xme=()=>{const t=this.Nyt.z9t;t&&(t.E2t===Ns.A2t?this.ta.bI():this.ZR||this.bI())},this.Fp=()=>{m(this.Eme),this.Eme=void 0},this.pme=()=>{this.Fp(),this.kR=!0},this.wme=()=>{this.Tme("pause")},this.yme=()=>{this.Tme("playing")},this.xd=t=>{t.Yl.E2t===Ns.Ajt&&(this.ZR=!1)},this.mme=()=>{this.Mgt&&this.Mgt.resize(this.Xu.Su,this.Xu.Tu)},this.UA=t.dI,i.yn("snt",this.xd),this.Xu.yn(Ya.pn,this.mme),this.u0t.addEventListener("click",this.xme)}};function v9(t,e){return t?0:e}r(),r();var m9=class extends pt{get name(){return o9.eve}constructor(){super("A FreeWheel Ad Error occurred")}};r();var g9=class extends pt{get name(){return o9.tve}constructor(){super("A FreeWheel Reset Error Occurred")}},p9=0;var w9=class{Rme(t,e,i){t.setNetwork(e.networkId),t.setServer(e.adServerUrl);const s=this.Mgt;if(s.setProfile(e.profile),e.assetId&&e.assetDuration&&s.setVideoAsset(e.assetId,e.assetDuration),e.siteSectionId&&s.setSiteSection(e.siteSectionId),s.registerVideoDisplayBase(i),e.cuePoints&&e.cuePoints.length)for(const t of e.cuePoints)s.addTemporalSlot("cue-"+ ++p9,t.adUnit,t.timeOffset);const n=e.customData;if(V(n)){const t=w.keys(n);for(const e of t){const t=n[e];s.addKeyValue(e,t)}}}async Ime(){this.Mgt.submitRequest(),await this.Cme.Bb}tr(){this.Mgt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Pme),this.Cme.Lb(new g9)}constructor(t,e,i,s){this.Mgt=e,this.Pme=t=>{this.Mgt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Pme),t.success?this.Cme.Mb(void 0):this.Cme.Lb(new m9)},this.Rme(t,i,s),e.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Pme),this.Cme=new as}};r(),r();var y9=class{Dme(){this.Nve.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.zve),this.Nve.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.zve)}get Nme(){return this.Zw.Bb}iUt(){this.Dme(),this.Zw.Lb(new g9)}constructor(t){this.Nve=t,this.zve=t=>{this.Dme(),this.Zw.Mb(void 0)},this.U6t=t=>{this.Dme(),this.Zw.Lb(new m9)},this.Zw=new as,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.zve),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.U6t)}},b9=class{mO(t){this.Nve=t}Sve(){return this.Mme(this.Lme.Ove)}vve(){this.Mme(this.Lme.Uve)}async Mme(t){if(this.Nve)for(;t.length>0;){this.Bme=new y9(this.Nve);const e=this.Bme.Nme,i=this.Lme.zst;i&&i.E2t===Ns.A2t&&i.kve.stop();t.shift().kve.play();try{await e}finally{this.Bme=void 0}}}tr(){this.Bme&&(this.Bme.iUt(),this.Bme=void 0),this.Ome=0}gn(){this.ta.fn(Mi.$y,this.Fme)}constructor(t,e){this.ta=t,this.Lme=e,this.Ome=0,this.Fme=()=>{const t=this.ta.bR();for(const e of this.Lme.Vve){const i=new ee([this.Ome,t],[!0,!0]),s=e.kve.getTimePosition();if(i.gr(s))switch(e.kve.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.Mme([e]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:e.kve.play(),e.kve.setVisible(!0)}}this.Ome=t},t.yn(Mi.$y,this.Fme)}},A9=0,S9=class t extends Xu{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++A9}get _ve(){return 0!==this.cve.Uve.length}get Ave(){return 0!==this.cve.Ove.length}async X4t(){if(!this.Qjt)throw new g("Invalid state");const t=this.Vme,e=t.newContext();e.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),e.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const i=new w9(t,e,this.Qjt,this.Wme),s=this.cve.Dve(e,i.Ime());this.Ume.mO(e),this.dve._me(e),this.Gme=i;try{await s}finally{this.dve.fme(),this.Hme=!0}}get dve(){return this.L6t}get cve(){return this.Zme}get pve(){return this.Hme}static Xme(t,e,i){const s=h.createElement("div");return s.id=i,s.className="theo-freewheel",e.classList.add("theo-freewheel-video"),s.appendChild(e),t.appendChild(s),s}get mve(){return this.Ume}J1t(t){this.dve.Tme(t.type)}ge(){this.u0t.style.display="block",this.YT.style.display="block"}be(){this.u0t.style.display="none",this.YT.style.display="none"}a8t(t){this.Qjt=t}tr(){this.Hme=!1,this.Qjt=void 0,this.cve.tr(),this.Ume.tr(),this.Gme&&(this.Gme.tr(),this.Gme=void 0),this.dve.tr(),this.YT.src=""}gn(){this.tr(),this.L6t.gn(),this.Ume.gn(),this.cve.gn(),this.u0t.remove(),this.ta.we.removeChild(this.u0t)}constructor(e,i,n){super(),this.ta=e,this.YT=i,this.Hme=!1,this.Wme=t.createUniqueDisplayBaseId(),this.u0t=t.Xme(e.we,i,this.Wme),this.Vme=new s.tv.freewheel.SDK.AdManager,this.Zme=new f9(this.u0t,this.YT),this.Ume=new b9(this.ta,this.cve),this.iu(this.cve),this.L6t=new _9(e,n,this.cve,this.u0t)}};function T9(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function k9(t,e,i){if(void 0!==e&&S(e)||e<0||e===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return i}return jc(e)}Ih.Lg.EZ(new class{get U1t(){return z.i$t}kZ(t){return t.integration===gu.FREEWHEEL}G1t(t,e,i){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new EI(t.Uu,t.Ll,1,[Io.lE]);n.gZ(t.we);const r=n.DH(Io.lE),o=new S9(t,r.XG,t.Uu);return new u9(t,e,n,o,r)}Uz(t){const e=eu(t);rl(e.cuePoints)||(e.cuePoints=[]);const i=[],s=t.assetDuration||0;for(const t of e.cuePoints){const e=k9(t.adUnit,t.timeOffset,s),n=T9(t.adUnit);!S(e)&&Kt(n)?(t.adUnit=n,t.timeOffset=e,i.push(t)):As.Mp("Invalid adUnit/timeOffset combination. Cue was removed.")}return e.cuePoints=i,e}o6(t,e,i,s){i.a8t(t,e,s)}}),r(),r(),r(),r(),r();var E9=self.theoplayerDeviceMetadata;function ia(t){return t.navigator&&t.navigator.userAgent||""}r(),r(),r(),r();var x9={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function tn(t,e){const i=x9[e];return!!i&&Boolean(ia(t).match(i))}function R9(t){return tn(t,"Android")}function I9(t){return tn(t,"Windows Phone")}function C9(t){return tn(t,"iOS")&&!I9(t)}function P9(t){return tn(t,"Ubuntu")}var Nc=/Windows (NT|Phone) ([0-9.]+)/i,D9=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,N9={"Windows 10":Nc,"Windows 8.1":Nc,"Windows 8":Nc,"Windows 7":Nc,"Windows Vista":Nc,"Windows Server 2003":Nc,"Windows XP":Nc,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":D9,"Mac OS":D9,"Chrome OS":void 0};function M9(t,e){const i=N9[e];return i?ia(t).match(i):null}function L9(t){return t.split(/[_.]/).map((t=>x(t,10)))}function B9(t){if(function(t){return Boolean(ia(t).match(/Windows/i))}(t)){if(function(t){return tn(t,"Windows 10")}(t))return"Windows 10";if(I9(t))return"Windows Phone";if(function(t){return tn(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return tn(t,"Windows 8")}(t))return"Windows 8";if(function(t){return tn(t,"Windows 7")}(t))return"Windows 7";if(function(t){return tn(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return tn(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return tn(t,"Windows XP")}(t))return"Windows XP"}else{if(R9(t))return"Android";if(C9(t))return"iOS";if(function(t){return tn(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return tn(t,"Mac OS")}(t))return"Mac OS";if(P9(t))return"Ubuntu";if(function(t){return tn(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return tn(t,"Linux")&&!P9(t)}(t))return"Linux"}}function O9(t,e){const i=function(t){const e=M9(t,"Windows 10");return e&&e.length>2?L9(e[2]):void 0}(t),s=function(t){const e=M9(t,"Mac OS X");return e&&e.length>2?L9(e[2]):void 0}(t),n=function(t){const e=M9(t,"Android");return e&&e.length>1?L9(e[1]):void 0}(t),r=function(t){const e=M9(t,"iOS");return e&&e.length>3?L9(e[3]):void 0}(t),o=function(t){const e=M9(t,"Chrome OS");return e&&e.length>0?L9(e[0]):void 0}(t);return i?i.length>e?i[e]:void 0:s?s.length>e?s[e]:void 0:n?n.length>e?n[e]:void 0:r?r.length>e?r[e]:void 0:o&&o.length>e?o[e]:void 0}function F9(t){const e=function(t){return O9(t,0)}(t),i=function(t){return O9(t,1)}(t),s=function(t){return O9(t,2)}(t);if(void 0!==e)return void 0===i?""+e:void 0===s?e+"."+i:e+"."+i+"."+s}var V9={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function W9(t,e){const i=V9[e];return!!i&&Boolean(ia(t).match(i))}function U9(t){return Boolean(ia(t).match(/Mobi/i))}function G9(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||H9(t)}function H9(t){return W9(t,"Chrome iOS")}function Z9(t){return W9(t,"Firefox")&&!z9(t)}function X9(t){return W9(t,"Firefox Mobile")&&!z9(t)&&U9(t)}function z9(t){return W9(t,"Seamonkey")}function q9(t){return W9(t,"Firefox iOS")&&!z9(t)}function Y9(t){return W9(t,"Safari")&&!W9(t,"Chrome")&&!Z.Vv}function K9(t){return Boolean(s8(t))}function j9(t){return W9(t,"Edge")}function Q9(t){return W9(t,"Edge Chromium")}function J9(t){return W9(t,"IE")}function $9(t){return W9(t,"Vivaldi")}var t8=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,e8={Chrome:t8,"Chrome Mobile":t8,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:t8,HeadlessChrome:t8,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function i8(t,e){const i=e8[e];return i?ia(t).match(i):null}function s8(t){return i8(t,"Opera")}function n8(t){const e=function(t){return i8(t,"Firefox")}(t);return e?C(e[1]):0}function r8(t){const e=function(t){return i8(t,"Firefox iOS")}(t);return e?C(e[1].split(".")[0]):0}function o8(t){const e=function(t){return i8(t,"Safari")}(t);return e?C(e[2].split(".")[0]):0}function h8(t){const e=function(t){return i8(t,"Edge")}(t);return e?C(e[1]):0}function a8(t){const e=function(t){return i8(t,"Edge Chromium")}(t);return e?C(e[1]):0}function u8(t){const e=function(t){return i8(t,"IE")}(t);return e?C(e[2]):0}function c8(t){const e=function(t){return i8(t,"Vivaldi")}(t);return e?C(e[1]):0}function l8(t){if(R9(t))return G9(t)?"Chrome Mobile":Z9(t)||X9(t)?"Firefox Mobile":j9(t)?"Edge Mobile":K9(t)?"Opera Mobile":"Android Browser";if(C9(t)){if(G9(t)||H9(t))return"Chrome iOS";if(Z9(t)||q9(t))return"Firefox iOS";if(j9(t))return"Edge Mobile";if(Y9(t)||function(t){return Y9(t)&&U9(t)}(t))return"Safari Mobile";if(K9(t))return"Opera Mobile"}return function(t){return W9(t,"Chromium")}(t)?"Chromium":function(t){return W9(t,"HeadlessChrome")}(t)?"HeadlessChrome":G9(t)?"Chrome":Z9(t)?"Firefox":Y9(t)?"Safari":j9(t)?"Edge":Q9(t)?"Edge Chromium":J9(t)?"IE":K9(t)?"Opera":$9(t)?"Vivaldi":void 0}function d8(t){return $9(t)?c8(t):H9(t)?Number(function(t){const e=e8["Chrome iOS"];return e&&e.exec(ia(t))||[]}(t)[1]):G9(t)?Number(function(t){const e=e8.Chrome;return e&&e.exec(ia(t))||[]}(t)[1]):Z9(t)||X9(t)?n8(t):q9(t)?r8(t):Y9(t)?o8(t):j9(t)?h8(t):Q9(t)?a8(t):J9(t)?u8(t):K9(t)?function(t){const e=s8(t);return e&&e[0].indexOf("Opera")>-1?C(e[5]):e?C(e[2].split(".")[0]):0}(t):void 0}var f8=function(t){return t.zme="pc",t.qme="console",t.Yme="settop",t.Kme="mobile",t.jme="tablet",t.Qme="smarttv",t.Jme="searchbot",t}({});function _8(t){const e=ia(t);return e.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":e.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(e)?"tablet":/Mobi/.test(e)?"mobile":e.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":e.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(l8(t))}(t)?"pc":void 0}var v8=class{Wz(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){let t=_b.Cb("deviceId");if(t)return t;let e=cC();return _b.Pb("deviceId",e),e}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"9.0.0"),this.$me(t),this.tge(),this.ege(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const e=t.connectionType;e?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,e):(this.ige(),Ll.connection&&Ll.connection.addEventListener&&Ll.connection.addEventListener("change",this.ige))}$me(t){this.sge(t);const e=t.deviceManufacturer||E9&&E9.manufacturer;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,e);const i=t.deviceModel||E9&&E9.model;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,i)}sge(t){const e=t.deviceType||function(){const t=_8(self);switch(t){case f8.qme:return"game-console";case f8.Qme:return"tv";case f8.Yme:return"media-streamer";default:return t}}();e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,e)}tge(){const t=l8(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const e=d8(self);void 0!==e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,e.toString())}ege(t){const e=t.deviceOs||B9(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,e);const i=t.deviceOsVersion||F9(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,i.toString())}gn(){Ll.connection&&Ll.connection.removeEventListener&&Ll.connection.removeEventListener("change",this.ige)}constructor(t,e){this.empClient=t,this.agama=e,this.ige=()=>{const t=As.hR;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const e=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(As.oR);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,e)}}}};Nh(function(t){return e=>class extends e{AR(t,e){this.nge&&this.nge.xX(),super.AR(t)}gn(){this.nge&&this.nge.gn(),super.gn()}constructor(e,i){super(e,i),this.mX=new t,this.nge=new dC(this,this.mX,i)}}}(class extends eC{yI(t){this.rge=t,this.oge&&(this.mX=function(t,e){const i=function(t,e){switch(e){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(e,t.logLevel);e.setLogLevel(i);const s=new e.EMPClient(t.config);return function(t,e){return t.setExternalConfig(e.config),t}(s,t)}(t,this.oge),this.mX&&(this.hge=new v8(this.mX,this.oge),this.do=!0))}Vz(){return this.oge||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),!!this.oge}Oz(){return this.do}mz(t,e){if(this.mX&&this.oge)switch(t){case ra.FZ:this.mX.setMeasurement(this.oge.Measurement.BUFFER_LENGTH,e);break;case ra.VZ:this.mX.setMeasurement(this.oge.Measurement.BYTES_RECEIVED,e);break;case ra.UZ:this.mX.setMeasurement(this.oge.Measurement.SEGMENT_PROFILE_BITRATE,e);break;case ra.GZ:this.mX.setMeasurement(this.oge.Measurement.VIDEO_PROFILE_BITRATE,e);break;case ra.WZ:this.mX.setMeasurement(this.oge.Measurement.SEGMENT_READ_BITRATE,e);break;case ra.NZ:this.mX.setMeasurement(this.oge.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,e);break;case ra.MZ:this.mX.setMeasurement(this.oge.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,e);break;case ra.LZ:this.mX.setMeasurement(this.oge.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,e);break;case ra.BZ:this.mX.setMeasurement(this.oge.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,e);break;case ra.OZ:this.mX.setMeasurement(this.oge.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,e);break;case ra.ZZ:this.mX.setMeasurement(this.oge.Measurement.PLAYBACK_POSITION,e);break;case ra.XZ:this.mX.setMeasurement(this.oge.Measurement.NUMBER_OF_FRAMES_DECODED,e);break;case ra.HZ:this.mX.setMeasurement(this.oge.Measurement.NUMBER_OF_FRAMES_DROPPED,e)}}zX(t,e){if(this.mX&&this.oge)switch(t){case QI.jZ:this.mX.setSessionMetadata(this.oge.SessionMetadata.ASSET_DURATION,e);break;case QI.KZ:this.mX.setSessionMetadata(this.oge.SessionMetadata.MANIFEST_URI,e);break;case QI.QZ:this.mX.setSessionMetadata(this.oge.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,e);break;case QI.tX:this.mX.setSessionMetadata(this.oge.SessionMetadata.SERVICE_NAME,e);break;case QI.JZ:this.mX.setSessionMetadata(this.oge.SessionMetadata.CDN,e);break;case QI.$Z:this.mX.setSessionMetadata(this.oge.SessionMetadata.CONTENT_TITLE,e);break;case QI.eX:this.mX.setSessionMetadata(this.oge.SessionMetadata.CONTENT_TYPE,e);break;case QI.iX:this.mX.setSessionMetadata(this.oge.SessionMetadata.CONTENT_DESCRIPTION,e)}}Wz(){this.hge&&this.rge&&this.hge.Wz(this.rge)}Fz(t,e){this.oge&&this.mX&&(this.Az(),function(t,e,i,s){const n=lC(t,i,s);e.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.oge,this.mX,t,e),this.age=!0)}gn(){this.hge&&this.hge.gn(),this.uge(JI.sX),this.mX=void 0}DX(t){this.cge(t)}LX(t,e){this.mX&&this.mX.event(t.code,e)}Az(){this.mX&&this.age&&(this.mX.exitSession(),this.age=!1)}uge(t){if(this.mX&&this.oge&&(this.Az(),t===JI.sX))this.mX.shutdown(this.oge.ShutdownType.NORMAL_SHUTDOWN)}NX(t,e,i){this.cge(t,e,i)}cge(t,e,i){if(this.mX&&this.oge)switch(t){case Ae.BL:this.lge(this.oge.ViewState.PLAYING,e,i);break;case Ae.CZ:this.lge(this.oge.ViewState.FAILED,e,i);break;case Ae.PZ:this.lge(this.oge.ViewState.INITIAL_BUFFERING,e,i);break;case Ae.xZ:this.lge(this.oge.ViewState.PAUSED,e,i);break;case Ae.RZ:this.lge(this.oge.ViewState.SEEK,e,i);break;case Ae.IZ:this.lge(this.oge.ViewState.STALLED,e,i);break;case Ae.DZ:this.lge(this.oge.ViewState.NO_ACCESS,e,i)}}lge(t,e,i){if(this.mX)if(e){const s=function(t){return t||""}(i);this.mX.viewStateExtended(t,e.code,s)}else this.mX.viewStateChanged(t)}constructor(){super(),this.do=!1,this.age=!1,this.oge=s.Agama}}),co.Mst),r(),r(),r(),r(),r();var m8=function(t){return t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last",t}({});r();var _n=function(t){return t.VOD="vod",t.LIVE="live",t}({}),g8=class{get ga(){return this.dge.ga}get lt(){return this.HG}get RR(){return this.ZG}fge(t){this.HG=Te(t),this.ZG=t,this.ta.yo(new Wa(t))}ka(t){this._ge.resetSource(),this.vge.Nb(),this.mge=!1,this.ta.gge(t)}async gnt(t,e){if(this.pge.tr(),this.mge=!1,!t||!function(t){return t.sources.some((t=>t.integration===IT.UPLYNK))}(t))return await this.ta.wge(t,e);try{this.yge=await this.bge.pfe(t),await this.ta.wge(this.yge,e)}catch(t){this.fge(new A(Ja.MANIFEST_LOAD_ERROR,t.message,t))}}gn(){this.q9.Xw(),this.Age.Xw(),this.ta.fn(Mi.yy,this.Sge),this.ta.fn(Mi.so,this.yce),this.ta.fn(Mi.$y,this.xoe),this.ta.fn(Mi.xy,this.hoe),this.ta.fn(Zc.NL,this.wd);for(const t of this._ge.BJt.Ju)t.fn("Tge",this.kge),t.fn("snt",this.Ege),t.fn("int",this.xge);this._ge.BJt.fn("$st",this.Rge),this._ge.BJt.fn("Jst",this.Ige),this._ge.destroy(),this.l0t&&(this.l0t.Ww(),this.l0t=void 0),this.mge=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const e=await this.Cge.JSt(t.integrationData.source.prefix,t.integrationData.source.id,this.Age.Bw,t.integrationData.preplayResponse.sid);this.dge.Pge(e),this.vge.Dge(e,this._ge.BJt.Ju)}catch(t){0}}Nge(t){this._ge.Mge(t),this._ge.Zst.forEach((e=>e.Lge(t))),this._ge.Bge(this.ta.sI()),this.c0t()}AR(t){if(this._ge.zst)return;this.q9.Xw(),this.q9=new $t;oh(go(this.Ise(t,this.q9.Bw),this.q9))}async Ise(t,e){if(ot(e),t<this.ta.bR())return void this.Oge(t);let i=[];switch(this._ge.Fge){case m8.PLAY_ALL:i=this._ge.Vge(this.ta.bR(),t),await this.Wge(t,i,e);break;case m8.PLAY_LAST:const s=this._ge.Vge(this.ta.bR(),t).pop();i=s?[s]:[],await this.Wge(t,i,e);break;case m8.PLAY_NONE:this.Uge(t)}}Oge(t){const e=Ti(this._ge.BJt.Ju,(e=>e.iut.gr(t)));e?this.ta.Gge(e.LO):this.ta.Gge(t)}Uge(t){const e=this._ge.Vge(this.ta.bR(),t).pop();e&&e.iut.gr(t)?this.ta.Gge(e.BO):this.ta.Gge(t)}async Wge(t,e,i){for(const t of e)await this.Hge(t,i);const s=e[e.length-1];s&&s.iut.gr(t)?this.ta.bR()<t&&this.ta.Gge(s.BO):this.ta.Gge(t)}async Hge(t,e){t.fn("Tge",this.kge);const i=Promise.race([t.uy("int",e),t.uy("Tge",e)]);this.Nge(this.ta.bR()),t.Yh||this.ta.Gge(t.LO),await i,t.yn("Tge",this.kge)}c0t(){const t=Ti(this._ge.Zst,(t=>t.Zge.length>0));if(t){const e=t.Zge[0];this.l0t||(this.l0t=new mt(this.ta.we),this.l0t.yn("clickstart",this.Xge)),this.l0t.T$t=e}else this.l0t&&(this.l0t.Ww(),this.l0t=void 0)}constructor(t,e,i,s,n,r,o){this.ta=t,this.pge=e,this.bge=i,this._ge=s,this.dge=n,this.Cge=r,this.vge=o,this.HG=void 0,this.ZG=void 0,this.q9=new $t,this.Age=new $t,this.zge=void 0,this.mge=!1,this.l0t=void 0,this.Sge=t=>{const e=t.currentSource;if(!e||!e.integrationData)return;const{preplayResponse:i,source:s}=e.integrationData;this.dge.qge(i),i&&i.type===_n.VOD&&i.ads&&this._ge.Dge(i.ads),this.pge.Yge=e.integrationData,s.assetInfo&&oh(this.fetchAssetInfo(e))},this.yce=()=>{this.mge=!0},this.xoe=()=>{this.mge&&this.Nge(this.ta.bR())},this.hoe=()=>{this.mge&&(this.Nge(1/0),this.mge=!1)},this.wd=()=>{oh(this.pge.Cn())},this.kge=t=>{this.q9.Xw(),this.q9=new $t;oh(go(this.Ise(t.Yl.BO,this.q9.Bw),this.q9))},this.Ege=()=>{1!==this.ta.zR&&(this.zge=this.ta.zR,this.ta.zR=1)},this.xge=()=>{void 0!==this.zge&&(this.ta.zR=this.zge,this.zge=void 0)},this.Rge=t=>{t.Yl.yn("Tge",this.kge),t.Yl.yn("snt",this.Ege),t.Yl.yn("int",this.xge)},this.Ige=t=>{t.Yl.fn("Tge",this.kge),t.Yl.fn("snt",this.Ege),t.Yl.fn("int",this.xge)},this.Xge=()=>{this.ta.bI()},this.ta.yn(Mi.yy,this.Sge),this.ta.yn(Mi.so,this.yce),this.ta.yn(Mi.$y,this.xoe),this.ta.yn(Mi.xy,this.hoe),this.ta.yn(Zc.NL,this.wd),this._ge.BJt.yn("$st",this.Rge),this._ge.BJt.yn("Jst",this.Ige)}};r(),r();var p8=qe({breaksIndex:hi,adsIndex:hi,startTime:hi,endTime:hi}),w8=qe({index:hi,timeOffset:hi}),y8=qe({duration:hi,apiFramework:Js(dl,MR),creative:dl,mimeType:dl,width:hi,height:hi,companions:cc(function(t){return new ZR(t)}((()=>y8))),extensions:Js(Bh,cc(NR)),fw_parameters:Js(Bh,HR(dl)),events:HR(cc(dl))}),b8=qe({type:VR(["linear","nonlinear"]),position:VR(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:hi,duration:hi,ads:cc(y8),events:HR(cc(dl))}),A8=qe({breaks:cc(b8),breakOffsets:Js(Bh,cc(w8)),placeholderOffsets:Js(Bh,cc(p8))}),S8=qe({required:Js(Bh,DR),fairplayCertificateURL:Js(Bh,dl),widevineLicenseURL:Js(Bh,dl),playreadyLicenseURL:Js(Bh,dl)}),T8={type:VR(OR(_n)),playURL:dl,prefix:dl,sid:dl,drm:Js(Bh,S8)},k8=qe(la({},T8,{type:VR([_n.VOD]),ads:A8,interstitialURL:Js(dl,MR,Bh)})),E8=Js(k8,qe(la({},T8,{type:VR([_n.LIVE])})));r();var x8=dl,R8=qe({userId:dl,externalId:Js(dl,cc(dl))}),I8=class{async JSt(t){try{return this.Kge(t)}catch(t){throw t}}async Kge(t){const e=await async function(t){const e=t.prefix,i=C8[t.assetType],s=function(t){if(cc(x8).OU(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(x8.OU(t))return t;if(R8.OU(t)&&rl(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(R8.OU(t))return"ext/"+t.userId+"/"+t.externalId;throw new b("Invalid asset id")}(t.id),n=await async function(t){if(t&&await As.Gp())return{rmt:"fps",manifest:"m3u8"};if(t&&await As.Zp())return{rmt:"wv",manifest:"mpd"};if(t&&await As.Hp())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),r=function(t,e){const i=P8(t,e);return i?{"ad.cping":"1","ad.pingf":String(i)}:{}}(t.assetType,t.ping);let o={};rl(t.preplayParameters)?t.preplayParameters.forEach((t=>{o[t[0]]=t[1]})):o=t.preplayParameters;const h=e+"/preplay/"+i+s+".json";return wc(h,la({v:"2"},o,n,r,o))}(t),i=this.aW.zk({gE:So.GET,qu:e,Xk:$r.gk}),s=await i,n=la({},await s.Zk(),{type:t.assetType===Hn.ASSET?_n.VOD:_n.LIVE});return E8.OU(n)||E8.VU(n,"PreplayResponse"),n}constructor(t){this.aW=t}},C8={[Hn.ASSET]:"",[Hn.CHANNEL]:"channel/",[Hn.EVENT]:"event/"};function P8(t,e){const i=t!==Hn.ASSET;return(!i&&e.adImpressions?1:0)+(!i&&e.freeWheelVideoViews?2:0)+(i&&e.linearAdData?4:0)}r(),r();var D8=qe({ad_id:dl,apiFramework:Js(MR,dl),companions:cc(NR),creative:dl,duration:hi,mimeType:dl,height:hi,width:hi,extensions:Js(Bh,cc(NR)),fw_parameters:Js(Bh,HR(dl))}),N8=qe({breakId:dl,ads:cc(D8),type:VR(["linear","nonlinear"]),position:VR(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:hi,duration:hi,height:Js(Bh,hi),width:Js(Bh,hi),events:HR(cc(dl))}),M8=qe({breaks:cc(N8)}),L8=qe({next_time:hi,ads:Js(Bh,M8),extensions:Js(Bh,cc(NR)),error:Js(Bh,dl),currentBreakEnd:Js(Bh,hi)}),B8=function(t){return t.sTt="start",t.RZ="seek",t}({}),O8=class{async JSt(t,e){try{return this.Kge(t,e)}catch(t){throw t}}async Kge(t,e){const i=function(t){const e={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(e.ft=String(t.seekTime));t.event&&(e.ev=t.event);return wc(t.zonePrefix+"/session/ping/"+t.sessionId+".json",la({},e))}(t),s=this.aW.zk({gE:So.GET,qu:i,Xk:$r.gk,Bw:e}),n=await s,r=await n.Zk();return L8.OU(r)||L8.VU(r,"PingResponse"),r}constructor(t){this.aW=t}};r(),r();var F8=class extends $s{get UE(){return this.GE}ma(){return new V8(this.GE)}constructor(t){super("jge"),this.GE=t}},V8=class extends pe{constructor(t){super("pingresponse"),this.response=t}};r();var W8=class extends $s{get lt(){return this.HG}ma(){return new U8(this.HG)}constructor(t){super("Qge"),this.HG=t}},U8=class extends pe{constructor(t){super("pingerror"),this.error=t}},G8=class extends Bo{set Yge(t){this.Jge=t}get $ge(){return this.tpe}async Cn(){const t=this.Jge;if(!t)return;0!==P8(t.source.assetType,t.source.ping)&&(this.tpe=this.ta.sI().start(0),await this.epe(B8.sTt),this.ta.yn("timeupdate",this.ipe),this.ta.yn("seeking",this.spe))}async epe(t,e){const i=this.Jge.preplayResponse,s={};if(S(this.tpe))return void 0;if(ne(this.npe)&&mh(this.npe,this.ta.bR()-this.tpe))return;void 0!==e&&(s.seekTime=e),void 0!==t&&(s.event=t);let n,r=this.ta.bR()-this.tpe;t===B8.sTt?r=0:t!==B8.RZ&&this.rpe&&(r=_.min(r,this.rpe)),this.npe=r;try{var o;const t=await this.ope.JSt(la({zonePrefix:i.prefix,sessionId:i.sid,currentTime:r,hasFreeWheelVideoViews:null==(o=this.Jge)?void 0:o.source.ping.freeWheelVideoViews},s),this.OT.Bw);this.yo(new F8(t)),this.rpe=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){Se(t)||(n=t.message)}finally{n&&this.yo(new W8(n))}}tr(){this.rpe=void 0,this.Jge=void 0,this.tpe=NaN,this.hpe=!1,this.ape=NaN,this.npe=void 0,this.ta.fn("seeking",this.spe),this.ta.fn("timeupdate",this.ipe),this.upe()}upe(){this.OT.Xw(),this.OT=new $t}gn(){this.tr()}constructor(t,e){super(),this.ope=t,this.ta=e,this.tpe=NaN,this.rpe=void 0,this.hpe=!1,this.ape=NaN,this.OT=new $t,this.npe=void 0,this.ipe=async()=>{const t=this.ta.bR();if(this.ape=t,this.hpe||pd(this.rpe)||S(this.tpe))return;this.tpe+this.rpe<=t&&(this.hpe=!0,await this.epe(),this.hpe=!1)},this.spe=()=>{if(this.ta.bR()===this.tpe)return;this.hpe&&this.upe(),this.ape=this.ta.bR();const t=this.ape-(this.tpe||0);S(t)?oh(this.epe(B8.RZ,0)):oh(this.epe(B8.RZ,t))}}};r();var H8=class{async pfe(t){const e=[];for(const i of t.sources)if(zc(i))try{const s=X8({source:i,preplayResponse:await this.cpe.JSt(i)},t,this.AQ);s.src&&(s.src=wc(s.src,i.playbackUrlParameters)),e.push(s)}catch(t){0}else e.push(i);if(0!==t.sources.length&&0===e.length)throw new g("Fatal: unable to play UplynkSources.");return la({},t,{sources:e})}constructor(t,e){this.cpe=t,this.AQ=e}};function Z8(t){return!!t.sources&&(rl(t.sources)?t.sources.some(zc):zc(t.sources))}function X8(t,e,i){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=al({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},e,i);return r.integrationData=t,r}r(),r(),r();var z8=class extends $s{ma(){return new q8(this.Yl.ga)}constructor(t,e){super("snt"),this.Yl=t,this.eV=e}},q8=class extends pe{constructor(t){super("adbreakbegin"),this.adBreak=t}};r();var Y8=class extends $s{ma(){return new K8(this.Yl.ga)}constructor(t,e){super("int"),this.Yl=t,this.eV=e}},K8=class extends pe{constructor(t){super("adbreakend"),this.adBreak=t}};r();var j8=class extends $s{ma(){return new Q8(this.Yl.ga)}constructor(t){super("Tge"),this.Yl=t}},Q8=class extends pe{constructor(t){super("adbreakskip"),this.adBreak=t}};r(),r();var J8=class extends $s{ma(){return new $8(this.Yl.ga)}constructor(t){super("V2t"),this.Yl=t}},$8=class extends pe{constructor(t){super("updateadbreak"),this.adBreak=t}},t7=class extends Je{get ga(){return this.Za||(this.Za=function(t){let e;const i={get startTime(){return t.LO},get endTime(){return t.BO},get duration(){return t.ct},get ads(){return t.Vc.ga},get skipOffset(){return t._Kt},set skipOffset(e){t._Kt=e},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new ht(t,i),i}(this)),this.Za}get LO(){return this.XO}get BO(){return this.IA?this.XO+this.IA:void 0}lpe(t){this.IA=t-this.LO;for(const e of this.Vc.Ju)e.LO>t&&this.Vc.jS(e);this.yo(new J8(this))}get ct(){return this.IA}get iut(){const t=this.BO;return ne(t)?new ee([this.LO,t]):ee.fB()}get Vc(){return this.Dc}get dpe(){return this.fpe}get Yh(){return this.Kh}get _Kt(){return this.e_e?-1:this.vKt}set _Kt(t){this.e_e||(this.vKt=t)}kct(t){return t>=this.LO&&(pd(this.ct)||t<=this.LO+this.ct)}_pe(t){return-1!==this._Kt&&(!!ne(this.BO)&&t-this.LO>=this._Kt)}RD(){this.Dc.Ju.forEach((t=>t.RD())),this.yo(new j8(this))}vpe(t){const e=ne(this.BO)&&t>=this.BO,i=this.LO<=t&&!e&&!this.Yh,s=this.Yh&&this.BO&&t>=this.BO;i&&(this.Kh=!0,this.yo(new z8(this,this.LO))),this.Dc.Ju.forEach((e=>e.vpe(t))),s&&(this.fpe=!0,this.Kh=!1,this.yo(new Y8(this,this.BO)))}constructor(t,e,i,s,n){super(),this.XO=t,this.IA=e,this.Dc=i,this.e_e=s,this.Kh=!1,this.fpe=!1,this.vKt=n}};r(),r();var e7=class extends $s{ma(){return new i7(this.tnt.ga)}constructor(t,e){super("nnt"),this.tnt=t,this.eV=e}},i7=class extends pe{constructor(t){super("adbegin"),this.ad=t}};r();var s7=class extends $s{ma(){return new n7(this.tnt.ga)}constructor(t,e){super("rnt"),this.tnt=t,this.eV=e}},n7=class extends pe{constructor(t){super("adend"),this.ad=t}};r(),r();var r7=class extends $s{ma(){return new o7(this.tnt.ga)}constructor(t){super("mpe"),this.tnt=t}},o7=class extends pe{constructor(t){super("removead"),this.ad=t}},Uc=class extends N2{Bte(t){}Wte(t){this.yo(new r7(t))}constructor(){super()}};r();var h7=class extends $s{ma(){return new a7(this.tnt.ga)}constructor(t){super("U2t"),this.tnt=t}},a7=class extends pe{constructor(t){super("adfirstquartile"),this.ad=t}},u7=class extends $s{ma(){return new c7(this.tnt.ga)}constructor(t){super("G2t"),this.tnt=t}},c7=class extends pe{constructor(t){super("admidpoint"),this.ad=t}},l7=class extends $s{ma(){return new d7(this.tnt.ga)}constructor(t){super("H2t"),this.tnt=t}},d7=class extends pe{constructor(t){super("adthirdquartile"),this.ad=t}},f7=class extends $s{ma(){return new _7(this.tnt.ga)}constructor(t){super("gpe"),this.tnt=t}},_7=class extends pe{constructor(t){super("adcomplete"),this.ad=t}};r();var v7=class t extends Je{static ppe(e,i){return new t(e,i.duration,i.apiFramework||"",i.creative,i.mimeType,i.width,i.height,i.companions.map((i=>t.ppe(e,i))),i.extensions,i.fw_parameters,i.events,void 0)}static wpe(e,i){return new t(e,i.duration,i.apiFramework||"",i.creative,i.mimeType,i.width,i.height,i.companions.map((i=>t.wpe(e,i))),i.extensions,i.fw_parameters,void 0,i.ad_id)}get ga(){return this.Za||(this.Za=function(t){let e;const i={get apiFramework(){return t.xYt},get companions(){return t.gYt.ga},get creative(){return t.ype},get duration(){return t.ct},get endTime(){return t.BO},get events(){return t.zq},get extensions(){return t.bpe},get freeWheelParameters(){return t.Ape},get height(){return t.Ti},get mimeType(){return t.Xq},get startTime(){return t.LO},get width(){return t.ji},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new ht(t,i),i}(this)),this.Za}get LO(){return this.XO}get BO(){return this.XO+this.IA}get ct(){return this.IA}get xYt(){return this.RYt}get ype(){return this.Spe}get Xq(){return this.hY}get ji(){return this.HA}get Ti(){return this.ZA}get zq(){return this.Xf}get gYt(){return this.pYt}get bpe(){return this.Tpe}get Ape(){return this.kpe}get Yh(){return this.Kh}get Zge(){var t;return null!=(t=this.Xf.clickthroughs)?t:[]}vpe(t){const e=this.LO<=t&&t<this.BO,i=e&&!this.Yh,s=!e&&this.Yh;i&&(this.Epe=!1,this.xpe=!1,this.Rpe=!1,this.Ipe=!1,this.Kh=!0,this.yo(new e7(this,this.LO))),s&&(this.Kh=!1,this.yo(new s7(this,this.BO)))}Lge(t){const e=(t-this.LO)/this.ct;!this.Epe&&e>=.25&&(this.Epe=!0,this.yo(new h7(this))),!this.xpe&&e>=.5&&(this.xpe=!0,this.yo(new u7(this))),!this.Rpe&&e>=.75&&(this.Rpe=!0,this.yo(new l7(this))),!this.Ipe&&e>=.9999&&(this.Ipe=!0,this.yo(new f7(this)))}RD(){this.Epe=!0,this.xpe=!0,this.Rpe=!0,this.Ipe=!0}gn(){this.fn("nnt",this.Cpe),this.fn("rnt",this.Ppe)}constructor(t,e,i,s,n,r,o,h,a=[],u={},c={},l){super(),this.XO=t,this.IA=e,this.RYt=i,this.Spe=s,this.hY=n,this.HA=r,this.ZA=o,this.Tpe=a,this.kpe=u,this.Xf=c,this.sKt=l,this.pYt=new Uc,this.Kh=!1,this.Epe=!1,this.xpe=!1,this.Rpe=!1,this.Ipe=!1,this.Cpe=()=>this.Lge(this.XO),this.Ppe=()=>this.Lge(this.BO),this.pYt.Ote(h),this.yn("nnt",this.Cpe),this.yn("rnt",this.Ppe)}};r(),r();var m7=class extends $s{ma(){return new g7(this.Yl.ga)}constructor(t){super("$st"),this.Yl=t}},g7=class extends pe{constructor(t){super("addadbreak"),this.adBreak=t}};r();var p7=class extends $s{ma(){return new w7(this.Yl.ga)}constructor(t){super("Jst"),this.Yl=t}},w7=class extends pe{constructor(t){super("removeadbreak"),this.adBreak=t}},y7=class extends N2{Bte(t){this.yo(new m7(t))}Wte(t){this.yo(new p7(t))}constructor(){super()}},b7=class{get ga(){return this.Za||(this.Za=function(t){return{get adBreaks(){return t.BJt.ga},get currentAdBreak(){if(t.zst)return t.zst.ga},get currentAds(){return t.zst?t.zst.Vc.ga:(new Uc).ga},skip(){t.RD()}}}(this)),this.Za}get BJt(){return this.h$t}get zst(){return Ti(this.h$t.Ju,(t=>t.Yh))}get Zst(){return this.zst?this.zst.Vc.Ju.filter((t=>t.Yh)):[]}get Dpe(){if(0===this.BJt.V||0===this.ta.sI().length)return;const t=this.ta.sI().end(this.ta.sI().length-1);return Ti(this.BJt.Ju,(e=>e.kct(t)))}get Fge(){return this.Npe}Bge(t){if(0===t.length)return;const e=ee.xn(t);for(const t of this.h$t.Ju.slice())ne(t.BO)&&e.Cn(0)>t.BO&&this.h$t.jS(t)}Dge(t){const e=!function(t){return ne(t.breakOffsets)}(t),i=e?this.pge.$ge:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+i;const n=new Uc;let r=0;for(const i of s.ads){const s=e?v7.wpe(t,i):v7.ppe(t,i);n.yO(s),t+=s.ct,r+=s.ct}const o=s.timeOffset+i,h=e?void 0:s.duration,a=new t7(o,h,n,e,this.Mpe);e&&this.Lpe.push({hYt:a,MRt:o+r}),this.h$t.yO(a)}}Bpe(t){const e=this.Dpe;e&&e.lpe(t+this.pge.$ge)}Mge(t){this.Ope=t,this.h$t.Ju.forEach((e=>e.vpe(t)))}RD(){const t=this.Ope,e=this.zst;t&&e&&e._pe(t)&&e.RD()}skipAd(t){this.RD()}Vge(t,e){let i=[];for(const s of this.BJt.Ju)!s.dpe&&s.LO>=t&&s.LO<e&&i.push(s);return i}destroy(){this.ta.fn("timeupdate",this.Fpe),this.pge.fn("jge",this.Vpe)}resetSource(){var t;for(const t of this.BJt.Ju){for(const e of t.Vc.Ju)e.Bo();t.Bo()}this.BJt.Nb(),null==(t=this.Wpe)||t.removeAllAds(),this.Ope=void 0,this.Lpe=[]}Upe(t){return Ti(this.Wpe.ads,(e=>e.creativeId===t.ype))}constructor(t,e,i,s){var n;this.Lpe=[],this.Wpe=void 0,this.Gpe=t=>(this.Wpe=t,this),this.Vpe=t=>{t.UE.ads&&this.Dge(t.UE.ads),t.UE.currentBreakEnd&&this.Bpe(t.UE.currentBreakEnd)},this.Fpe=t=>{if(0===this.Lpe.length||0===this.ta.sI().length)return;const e=this.ta.sI().end(this.ta.sI().length-1);for(const t of this.Lpe.slice())ne(t.hYt.ct)?we(this.Lpe,t):t.MRt<e&&(t.hYt.lpe(t.MRt),we(this.Lpe,t))},this.yd=t=>{var e;const i=null==(e=this.Wpe)?void 0:e.createAdBreak({timeOffset:t.Yl.LO,maxDuration:t.Yl.ct,customData:t.Yl});t.Yl.yn("Tge",this.Hpe);for(const e of t.Yl.Vc.Ju){var s,n;const r={type:"linear",timeOffset:e.LO,duration:e.ct,creativeId:e.ype,skipOffset:t.Yl._Kt,clickThrough:null==(s=e.Zge)?void 0:s[0],customData:e};null==(n=this.Wpe)||n.createAd(r,i),e.yn("nnt",this.y9t),e.yn("rnt",this.Zpe),e.yn("U2t",this.Xpe),e.yn("G2t",this.zpe),e.yn("H2t",this.qpe),e.yn("gpe",this.ume)}},this.Hpe=t=>{for(const s of t.Yl.Vc.Ju){const t=this.Upe(s);var e,i;if(t)null==(e=this.Wpe)||e.beginAd(t),null==(i=this.Wpe)||i.skipAd(t)}},this.bd=t=>{for(const e of t.Yl.Vc.Ju)e.Bo();t.Yl.Bo()},this.y9t=t=>{const e=this.Upe(t.tnt);var i;e&&(null==(i=this.Wpe)||i.beginAd(e))},this.Zpe=t=>{const e=this.Upe(t.tnt);var i;e&&(null==(i=this.Wpe)||i.endAd(e))},this.Xpe=t=>{const e=this.Upe(t.tnt);var i;e&&(null==(i=this.Wpe)||i.updateAdProgress(e,.25))},this.zpe=t=>{const e=this.Upe(t.tnt);var i;e&&(null==(i=this.Wpe)||i.updateAdProgress(e,.5))},this.qpe=t=>{const e=this.Upe(t.tnt);var i;e&&(null==(i=this.Wpe)||i.updateAdProgress(e,.75))},this.ume=t=>{const e=this.Upe(t.tnt);var i;e&&(null==(i=this.Wpe)||i.updateAdProgress(e,1))},this.ta=t,this.pge=e,this.h$t=new y7,this.h$t.yn("$st",this.yd),this.h$t.yn("Jst",this.bd),this.Mpe=i,this.Npe=s,t.yn("timeupdate",this.Fpe),this.pge.yn("jge",this.Vpe),null==(n=this.ta.Vc)||n.Kst(gu.UPLYNK,this.Gpe)}};r(),r(),r();var A7=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED",t}({}),S7=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED",t}({}),T7=class t{static Ype(e,i,s){const n=new xg(e.rating_flags);return new t(i,s,e.duration,Boolean(e.audio_only),e.boundary_details,Boolean(e.error),e.tv_rating,e.max_slice,e.thumb_prefix,e.slice_dur,e.movie_rating,e.owner,e.meta,e.rates,e.thumbs,e.poster_url,e.default_poster_url,e.desc,n.kb(1),n.kb(2),n.kb(4),n.kb(8),e.external_id,Boolean(e.is_ad),e.asset)}get ga(){return this.Za||(this.Za=function(t){return{startTime:t.LO,endTime:t.BO,duration:t.ct,audioOnly:t.Kpe,boundaryDetails:t.jpe,error:t.lt,tvRating:t.Qpe,maxSlice:t.Jpe,thumbPrefix:t.$pe,sliceDuration:t.twe,movieRating:t.iwe,ownerId:t.nwe,metadata:t.GV,rates:t.rwe,thumbnailResolutions:t.owe,posterUrl:t.hwe,defaultPosterUrl:t.awe,description:t.MN,hasAdultLanguage:t.uwe,hasSexualSituations:t.cwe,hasViolence:t.lwe,hasDrugSituations:t.dwe,externalId:t.fwe,isAd:t._we,assetId:t.vwe}}(this)),this.Za}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d,f,_,v,m,g,p,w,y,b,A,S,T){this.LO=t,this.BO=e,this.ct=i,this.Kpe=s,this.jpe=n,this.lt=r,this.Qpe=o,this.Jpe=h,this.$pe=a,this.twe=u,this.iwe=c,this.nwe=l,this.GV=d,this.rwe=f,this.owe=_,this.hwe=v,this.awe=m,this.MN=g,this.uwe=p,this.cwe=w,this.lwe=y,this.dwe=b,this.fwe=A,this._we=S,this.vwe=T}};var k7=qe({duration:hi,offset:hi}),E7=qe({c3:k7}),x7=qe({c7:k7}),R7=qe({halftime:k7}),I7=VR(OR(S7)),C7=VR(OR(A7)),P7=qe({width:Js(Bh,hi),prefix:dl,bw:hi,bh:hi,height:Js(Bh,hi)}),D7=qe({audio_only:hi,boundary_details:Js(Bh,cc(Js(E7,x7,R7))),error:hi,tv_rating:I7,max_slice:hi,thumb_prefix:dl,slice_dur:hi,movie_rating:C7,owner:dl,meta:NR,rates:cc(hi),thumbs:cc(P7),poster_url:dl,duration:hi,default_poster_url:dl,desc:dl,rating_flags:hi,external_id:dl,is_ad:hi,asset:dl}),N7=class{async JSt(t,e,i,s){const n=function(t,e,i){if(x8.OU(e))return[M7(t,e,i)];if(cc(x8).OU(e))return e.map((e=>M7(t,e,i)));if(R8.OU(e)){return(rl(e.externalId)?e.externalId:[e.externalId]).map((s=>M7(t,"ext/"+e.userId+"/"+s,i)))}throw new b("Invalid asset id")}(t,e,s),r=n.map((t=>Si((()=>this.Kge(t)),i)));return(await Promise.all(r)).filter(ne)}async Kge(t){const e=this.aW.zk({gE:So.GET,qu:t,Xk:$r.gk}),i=await e,s=await i.Zk();return D7.OU(s)||D7.VU(s,"AssetInfoResponse"),s}constructor(t){this.aW=t}};function M7(t,e,i){return i?t+"/player/assetinfo/"+e+".json?pbs="+i:t+"/player/assetinfo/"+e+".json"}r(),r();var L7=class extends $s{ma(){return new B7(this.rd.ga)}constructor(t){super("mwe"),this.rd=t}},B7=class extends pe{constructor(t){super("removeasset"),this.asset=t}};r();var O7=class extends $s{ma(){return new F7(this.rd.ga)}constructor(t){super("gwe"),this.rd=t}},F7=class extends pe{constructor(t){super("addasset"),this.asset=t}},V7=class extends N2{Dge(t,e){let i,s=0;for(const n of t){i=s+n.duration;for(const t of e)s<=t.LO&&t.LO<i&&(i+=t.ct||0);this.yO(T7.Ype(n,s,i)),s=i}}Bte(t){this.yo(new O7(t))}Wte(t){this.yo(new L7(t))}constructor(){super()}};r(),r();var W7=class extends $s{ma(){return new U7(this.UE)}constructor(t){super("pwe"),this.UE=t}},U7=class extends pe{constructor(t){super("preplayresponse"),this.response=t}};r();var G7=class extends $s{ma(){return new H7(this.UE)}constructor(t){super("wwe"),this.UE=t}},H7=class extends pe{constructor(t){super("assetinforesponse"),this.response=t}},Z7=class extends Je{qge(t){t&&this.yo(new W7(eu(t)))}Pge(t){t.forEach((t=>this.yo(new G7(t))))}get ga(){return this.Za||(this.Za=this.ma()),this.Za}ma(){let t;const e=this,i={get ads(){return e._ge.ga},get assets(){return e.vge.ga},addEventListener(e,i){t.yn(e,i)},removeEventListener(e,i){t.fn(e,i)}};return t=new ht(e,i),i}constructor(t,e,i){super(),this._ge=t,this.vge=e,this.pge=i,i.yn("jge",this.Ds),i.yn("Qge",this.Ds)}},X7=class{ywe(t,e){const i=new I8(t.aR),s=new O8(t.aR),n=function(t){if(t.uplynk&&ne(t.uplynk.defaultSkipOffset))return function(t){return Ad(t)?t:-1}(t.uplynk.defaultSkipOffset);return-1}(e),r=function(t){var e,i;const s=null!=(i=null==(e=t.uplynk)?void 0:e.onSeekOverAd)?i:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(s)}(e),o=new G8(s,t),h=new H8(i,e),a=new b7(t,o,n,r),u=new N7(t.aR),c=new V7,l=new Z7(a,c,o);return new g8(t,o,h,a,l,u,c)}};Nh((function(t){return class extends t{gge(t){super.ka(t)}wge(t,e){return super.gnt(t,e)}Gge(t){super.AR(t)}xR(){var t;return null!=(t=this.bwe.lt)?t:super.xR()}IR(){var t;return null!=(t=this.bwe.RR)?t:super.IR()}AR(t,e){this.bwe.AR(t)}ka(t){this.bwe.ka(t)}gnt(t,e){return this.bwe.gnt(t,e)}ma(){const t=this.bwe.ga;return nh(super.ma(),{get uplynk(){return t}})}gn(){this.bwe.gn(),super.gn()}constructor(t,e){super(t,e),this.bwe=(new X7).ywe(this,e)}}}),co.Pst),r(),r(),r(),r();var qa=function(t){return t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error",t}({});r();var z7=class extends ls{ma(){return qo(this)}get jjt(){return z.s$t}get LO(){return this.XO}get Qqt(){return this.LYt}constructor(t,e,i,s){super(t,e),this.LYt=s,this.XO=i}};r();var q7=class extends ts{get $Bt(){return this.Awe}get jjt(){return z.s$t}constructor(t,e,i){if(super(e),this.l2t=t,this.d2t=t,i){const t=new Date(i);mf(t)&&(this.Awe=t)}}},Y7=class{_C(){this.ta.yn(Zc.BL,this.WB),this.ta.yn(Mi.Uy,this.zNt),this.ta.yn(Mi.so,this.QXt),this.ta.yn(Mi.qy,this.We),this.ta.yn(Mi.xy,this.Sh),this.ta.yn(Mi.$y,this.ld),this.ta.yn(Mi.eb,this.Z0t),this.ta.yn(HP.MODE_CHANGE,this.Swe)}dC(){this.ta.fn(Zc.BL,this.WB),this.ta.fn(Mi.Uy,this.zNt),this.ta.fn(Mi.so,this.QXt),this.ta.fn(Mi.qy,this.We),this.ta.fn(Mi.xy,this.Sh),this.ta.fn(Mi.$y,this.ld),this.ta.fn(Mi.eb,this.Z0t),this.ta.fn(HP.MODE_CHANGE,this.Swe)}get Twe(){return this.kwe}get Zst(){const t=this.Twe;if(!t)return[];const e=[],i=this.xwe();for(const s of t.Vc)i>=s.LO&&this.Ome<=s.LO+s.ct&&e.push(s);return e}xwe(){return this.ta.bR()-this.Rwe}Iwe(){if(this.Cwe)return;if(this.ta._d()!==1/0)return void(0===this.Pwe.length&&(this.Cwe=this.Dwe()));const t=()=>{var t;null==(t=this.Nwe)||t.Ww(),this.Nwe=void 0,this.Cwe=void 0};this.Nwe=new $t,this.Cwe=this.Mwe(this.Nwe.Bw).catch(this.M6).then(t,t)}async Lwe(){const t=_.min(1e3*2**this.Bwe,3e4);try{var e;await on(t,null==(e=this.Nwe)?void 0:e.Bw),this.Bwe++}catch(t){if(Se(t))return void(this.Bwe=0)}this.Iwe()}async Mwe(t){for(;ot(t),!this.ta.ZR;){const e=As.Bg()-this.Owe;if(e>1e4)await this.Dwe(t),this.Owe=As.Bg(),this.Bwe=0;else{const i=1e4-e;await on(i,t)}}}Fwe(t){const e=t.$Bt;if(e&&this.ta.mR&&0===this.Rwe&&!this.Vwe&&0!==_.floor(this.ta.sI().start(0))){const i=(this.ta.mR.getTime()-e.getTime())/1e3,s=this.ta.bR()-t.ZBt;this.Rwe=s-i}}async Dwe(t){try{const e=await this.ta.aR.zk({qu:this.Wwe}),i=await e.Sk(t);if(0===i.avails.length)return void(0!==this.Pwe.length&&(this.Pwe=[]));if(i.avails.length===this.Pwe.length&&i.avails[0].startTimeInSeconds===this.Pwe[0].ZBt)return void this.Fwe(this.Pwe[0]);const s=[];for(const t of i.avails){const e=new q7(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const i of t.ads){const t=new z7(e,Ns.Ajt,i.startTimeInSeconds,i.trackingEvents);t.S2t(i.adId,i.width,i.height,i.durationInSeconds,[],i.skipoffset),e.m2t(t)}s.push(e),this.Fwe(e)}this.Pwe=Bi(s,((t,e)=>t.ZBt-e.ZBt))}catch(t){throw Zr(t),new g("Failed to poll MediaTailor tracking events")}}Uwe(){var t;null==(t=this.Nwe)||t.Xw(),this.Nwe=void 0,this.Cwe=void 0,this.Owe=-1/0}Gwe(){if(0===this.Pwe.length)return;const t=this.Pwe[this.Pwe.length-1],e=this.xwe();if(t.ZBt+t.DJt<this.Ome){var i;this.kwe&&(null==(i=this.ta.Vc)||i.yo(new Lh(this.kwe)),this.kwe=void 0)}else{for(const t of this.Pwe){const i=t.ZBt;if(!(i+t.DJt<this.Ome)&&(i<=e&&i+t.DJt>this.Ome)){var s;if(this.Twe===t)return;return this.kwe=t,void(null==(s=this.ta.Vc)||s.yo(new Va(this.kwe)))}}var n;if(this.kwe)null==(n=this.ta.Vc)||n.yo(new Lh(this.kwe)),this.kwe=void 0}}Hwe(){const t=this.Zst;if(0===t.length)return;let e=[];for(const i of t){const t=i.Qqt.filter((t=>qt(this.Zwe,t.eventType)));e=e.concat(t)}for(const t of e)this.Xwe(t.startTimeInSeconds)&&(t.eventType===qa.COMPLETE&&this.zwe(qa.ENGAGED_VIEW),this.qwe(t))}Ywe(t,e){return e.Qqt.filter((e=>ch(e.eventType,t)))[0]}zwe(t){const e=this.Zst;if(0===e.length)return;const i=this.Ywe(t,e[0]);i&&this.qwe(i)}qwe(t){this.Pfe(t.eventType);for(const e of t.beaconUrls){const t={gE:So.GET,qu:e,Ck:"",Xk:$r.gk};0,oh(this.Kwe(t))}}Pfe(t){let e;const i=this.Zst;switch(t){case qa.START:e=new cn(i[i.length-1],this.ta.bR());break;case qa.COMPLETE:e=new xn(i[0],this.ta.bR());break;case qa.FIRST_QUARTILE:e=new Bs(i[0],this.ta.bR());break;case qa.MID_POINT:e=new ws(i[0],this.ta.bR());break;case qa.THIRD_QUARTILE:e=new Ss(i[0],this.ta.bR())}var s;void 0!==e&&(null==(s=this.ta.Vc)||s.yo(e))}async Kwe(t){const e=await this.ta.aR.zk(t);e.Hk}Xwe(t){const e=this.xwe();return t>=this.Ome&&t<e}gn(){this.dC(),this.Uwe(),this.Ome=-1}constructor(t,e,i){this.Owe=-1/0,this.kwe=void 0,this.Rwe=0,this.Pwe=[],this.Ame=!1,this.sK=!1,this.Ome=-1,this.Nwe=void 0,this.Cwe=void 0,this.Bwe=0,this.WB=()=>{this.Iwe()},this.QXt=()=>{this.zwe(qa.RESUME)},this.zNt=()=>{this.Uwe(),this.zwe(qa.PAUSE)},this.We=()=>{this.Uwe(),this.Ome=-1},this.Sh=()=>{this.Uwe()},this.ld=()=>{-1===this.Ome&&(this.Ome=this.xwe()),this.Gwe(),this.Hwe(),this.Ome=this.xwe()},this.Z0t=()=>{if(this.Ame!==this.ta.FR){this.Ame=this.ta.FR;const t=this.Ame?qa.MUTE:qa.UNMUTE;this.zwe(t)}},this.Swe=()=>{if(this.sK!==this.ta.cs()){this.sK=this.ta.cs();const t=this.sK?qa.FULL_SCREEN:qa.EXIT_FULL_SCREEN;this.zwe(t)}},this.M6=t=>{Se(t)||(this.zwe(qa.ERROR),oh(this.Lwe()))},this.Zwe=[qa.START,qa.FIRST_QUARTILE,qa.MID_POINT,qa.THIRD_QUARTILE,qa.COMPLETE,qa.IMPRESSION,qa.CREATIVE_VIEW],this.ta=t,this.Wwe=e,this.Vwe=i,this._C()}};Nh((function(t){return class extends t{ka(t){return this.jwe&&(this.jwe.gn(),this.jwe=void 0,this.OEt()),super.ka(t)}async gnt(t,e){if(!t||!function(t){return t.sources.some((t=>t.integration===IT.MEDIATAILOR))}(t))return super.gnt(t,e);try{const i=await this.Qwe(t,e);this.Jwe=new C1(this),await super.gnt(i,e)}catch(t){this.PH(new A(Ja.MANIFEST_LOAD_ERROR,t.message,t))}}YR(t){var e;(null==(e=this.Jwe)?void 0:e.inAdBreak)||super.YR(t)}AR(t,e){var i;(null==(i=this.jwe)?void 0:i.Twe)||super.AR(t,e)}xR(){var t;return null!=(t=this.HG)?t:super.xR()}IR(){var t;return null!=(t=this.ZG)?t:super.IR()}PH(t){this.HG=Te(t),this.ZG=t,this.yo(new Wa(t))}OEt(){this.HG=void 0,this.ZG=void 0}async Qwe(t,e){let i=[];for(const s of t.sources){if(!FT(s)){i.push(s);continue}const t=s;if(!t.src){i.push(s);continue}const n=await this.$we(t,e);ot(e);const r=la({},t,{integration:void 0,src:n});i.push(r)}const s=eu(t);return s.sources=i,s}async $we(t,e){const i=t.src||"",s=i.match(/.+?(?=\/v1\/)/);if(!s)throw new g("Could not find MediaTailor session initialization url");const n=s[0],r=Dh(i,"?ads."),o=r?{qu:i,Xk:$r.gk}:{qu:i,gE:So.POST,Ck:JSON.stringify({adParams:t.adParams}),Xk:$r.gk},h=await Si((()=>this.tye(o,e)),e);let a;try{if(a=n+h.manifestUrl,!r){const t=n+h.trackingUrl,e=MT(a);this.jwe=new Y7(this,t,e)}}catch(t){throw new g("Something went wrong parsing the MediaTailor session initialization response")}return a}async tye(t,e){try{const i=await this.aR.zk(t);return await i.Sk(e)}catch(t){throw Zr(t),new g("Failed to initialize MediaTailor session manifest")}}gn(){var t;this.jwe&&(this.jwe.gn(),this.jwe=void 0),this.OEt(),null==(t=this.Jwe)||t.destroy(),this.Jwe=void 0,super.gn()}constructor(t,e){super(t,e),this.jwe=void 0,this.HG=void 0,this.ZG=void 0,this.Jwe=void 0}}}),co.Mst),r(),r(),r(),r(),r();var Ta=function(t){return t[t.iye=0]="iye",t[t.BL=1]="BL",t[t.xZ=2]="xZ",t[t.sye=3]="sye",t[t.nye=4]="nye",t[t.rye=5]="rye",t[t.ua=6]="ua",t}({});r();var K7=class extends Bo{get SC(){}get Rt(){return this.He}set Rt(t){this.xO(t)}get ga(){var t;return null!=(t=this.Za)?t:this.Za=bi(this)}get o(){return String(this.ou.componentTag)||"hbbtvaudiotrack"}get Lt(){return this.q4}get kh(){return this.kO}get gs(){return""}get TE(){return this.Rt?"enabled":"disabled"}set TE(t){this.xO("enabled"===t)}get EC(){return this.wO}get xC(){}set xC(t){}get TC(){return this.TO}xO(t){this.He=t,t?this.RMt.oye(this.ou):this.RMt.aye(this.ou)}constructor(t,e,i,s,n=!1){super(),this.TO=ai(),this.wO=new Oc,this.ou=t,this.kO=e,this.q4=i,this.He=n,this.RMt=s}};r(),r(),r();var j7=function(t){return t.dw="urn:dvb:casystemid:19219",t.fw="urn:dvb:casystemid:19156",t}({}),Q7=function(t){return t.dw="application/vnd.ms-playready.initiator+xml",t.fw="application/widevine+xml",t}({});function J7(t,e,i){switch(t){case"urn:dvb:casystemid:19219":return function(t){return'<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><LicenseServerUriOverride><LA_URL>'+(null!=t?t:"")+"</LA_URL></LicenseServerUriOverride></PlayReadyInitiator>"}(e);case"urn:dvb:casystemid:19156":if(!i)throw new g("Content URL is needed for Widevine license request");return function(t,e){return'<?xml version="1.0" encoding="utf-8"?><WidevineCredentialsInfo xmlns="http://www.smarttv-alliance.org/DRM/widevine/2012/protocols/"><ContentURL>'+c$(null!=e?e:"")+"</ContentURL><DeviceID></DeviceID><StreamID></StreamID><ClientIP></ClientIP><DRMServerURL>"+c$(null!=t?t:"")+"</DRMServerURL><DRMAckServerURL></DRMAckServerURL><DRMHeartBeatURL></DRMHeartBeatURL><DRMHeartBeatPeriod></DRMHeartBeatPeriod><UserData></UserData><Portal></Portal><StoreFront></StoreFront><BandwidthCheckURL></BandwidthCheckURL><BandwidthCheckInterval></BandwidthCheckInterval></WidevineCredentialsInfo>"}(e,i);default:throw new g("DRM key system is not supported")}}var $7=class extends KL{uye(t){this.cye(),this.ku=t}async lye(t){if(!t.JG.length)return void this.cye();if(!this.ku)throw new g("The OIPF DRM agent has to be attached to the DOM");let e;this.dye||(this.dye=h.createElement("object"),this.dye.type="application/oipfDrmAgent",this.ku.appendChild(this.dye),this.dye.onDRMMessageResult=this.fye,this.dye.onDRMRightsError=this._ye,this.vye=h.createElement("object"),this.vye.type="application/oipfCapabilities",this.ku.appendChild(this.vye));for(const i of t.JG){let s,n,r;if(i.rT===vm)s=j7.dw,n=Q7.dw,r=J7(j7.dw,i.TG);else{if(i.rT!==rn)continue;s=j7.fw,n=Q7.fw,r=J7(j7.fw,i.TG,t.MC)}try{return await this.jet(n,r,s),void this.yo(new Es)}catch(t){e=t}}e&&this.yo(new In(e))}Ww(){return this.mye=void 0,this.ku=void 0,super.Ww()}jet(t,e,i){var s,n;return this.mye=new as,this.gye=null==(n=this.dye)||null==(s=n.sendDRMMessage)?void 0:s.call(n,t,e,i),this.gye||null==this.mye.Lb||this.mye.Lb.call(this.mye,new ir(Ja.CONTENT_PROTECTION_INTERNAL_ERROR,"No DRM message returned by OIPF DRM agent")),this.mye.Bb}pye(t){switch(t){case 5:return Ja.CONTENT_PROTECTION_NOT_SUPPORTED;case 2:case 1:case 3:case 4:case 6:return Ja.CONTENT_PROTECTION_INTERNAL_ERROR;default:return Ja.CONTENT_PROTECTION_ERROR}}wye(t){switch(t){case 2:return"The DRM agent was unable to complete the request";case 3:return"The specified MIME type is unknown for the specified DRM system";case 4:return"User consent is needed for that action";case 5:return"The specified DRM System is unknown";case 6:return"The license message has the wrong format";default:return"Unspecified error occurred"}}yye(t){return 0===t?Ja.CONTENT_PROTECTION_LICENSE_ERROR:1===t?Ja.CONTENT_PROTECTION_LICENSE_INVALID:Ja.CONTENT_PROTECTION_ERROR}Aye(t){switch(t){case 0:return"No license, consumption of the content is blocked";case 1:return"Invalid license, consumption of the content is blocked";case 2:return"Valid license, consumption of the content is unblocked";default:return"Unknown error occurred"}}cye(){this.dye&&(ft(this.dye),this.dye=void 0),this.vye&&(ft(this.vye),this.vye=void 0)}async e9(t,e,i){}constructor(...t){super(...t),this.dye=void 0,this.vye=void 0,this.ku=void 0,this.gye=void 0,this.mye=void 0,this.fye=(t,e,i)=>{var s,n,r,o;if(0===i)return void(null==(o=this.mye)||null==(r=o.Mb)||r.call(o,t));const h=this.pye(i),a=this.wye(i),u=new ir(h,a);null==(n=this.mye)||null==(s=n.Lb)||s.call(n,u)},this._ye=(t,e,i,s)=>{const n=this.yye(t),r=this.Aye(t),o=new ir(n,r);this.yo(new In(o))}}};r();var ttt=class{get iI(){return ee.dB(0,this.LB.ct)}get QR(){return hl.YH}set QR(t){}get md(){return this.IT}hJ(t){return!1}uJ(t){return Go.resolve(void 0)}async lye(t){await this.cJ.lye(this.IT)}Ww(){return Go.resolve(void 0)}constructor(t,e,i){this.IT=t,this.LB=e,this.cJ=i}},ett=class extends Bo{get _R(){return ee.fB()}get mR(){}get YG(){}get Uu(){return this.Xu}get iI(){var t,e;return null!=(e=null==(t=this.qG)?void 0:t.iI)?e:ee.fB()}get nI(){return this.rZ}get M4(){return!1}get NR(){return!1}get GB(){return la({},ZD)}get lt(){return this.HG}get C4(){return!1}get wa(){return this.Zo}get a7(){return!0}get A4(){return!1}get gI(){return!0}set gI(t){}get Ll(){return this._Z}get nt(){return this.u8}get P9(){return this.iZ}get aH(){return this.Qo}d7(t){this.cJ.uye(t),this.Fet.d7(t)}IJ(t){for(const e of t)if(e.pw===zr.fW)return e}async $n(t){if(this.qG)throw new g("Already loaded a media source");if(t.pw===zr.fW)return this.qG=new ttt(t,this,this.cJ),await this.qG.lye(t),this.qG;throw new g("Unsupported media source configuration for HbbTV")}async Sye(t){await this.Tye()}async AI(){await this.Tye()}UG(t){}async tr(){this.qG=void 0,this.kye=void 0}async Ww(){await this.tr(),this.Ul.gn(),this.u8.gn(),this.Fet.gn(),this.Vet.gn(),this.cJ.fn(Fu,this.Ds),await this.cJ.Ww()}ge(){this.iZ=!0,this.Fet.ge()}be(){this.iZ=!1,this.Fet.be()}nH(){return!1}oH(t,e,i,s,n){throw new g("Adding native sideloaded text tracks is not supported on HbbTV")}o7(){}h7(){}l7(){}OR(){return{uO:0,cO:0,lO:0}}xI(){}uH(t){throw new g("Adding custom text tracks is not supported on HbbTV")}wI(){}DI(t,e,i,s,n,r,o,h,a){const u=new po(t,e,i,s,n,r,o,a,h);return this.Ul.tt(u),this.c8.tt(u),u}cH(){for(const t of this.Ul.oC.slice())t.gn();this.Ul.tr()}lW(t){this.Ul.it(t),this.c8.it(t)}Eye(){const t=h.getElementsByTagName("object");for(let e=0;e<t.length;e++){const i=t.item(e);if("video/broadcast"===i.type){const t=i;return t.onPlayStateChange=this.xye,0===t.playState&&(null==t.bindToCurrentChannel||t.bindToCurrentChannel.call(t)),t}}}Tye(){var t,e;if(!this.Rye||3===this.Rye.playState||0===this.Rye.playState)return Promise.resolve("");if(null==(t=this.kye)?void 0:t.Bb)return null==(e=this.kye)?void 0:e.Bb;this.kye=new as;try{null==this.Rye.stop||this.Rye.stop.call(this.Rye)}catch(t){As.Lp("Unable to stop broadcast for HbbTV",t),this.kye.Lb(new g("Unable to stop broadcast for HbbTV"))}return this.kye.Bb}constructor(t,e){super(),this.Xu=t,this._Z=e,this.Zo=new N,this.Qo=new NI,this.Ul=new ha,this.qG=void 0,this.rZ=!1,this.HG=void 0,this.AW=gs.jB,this.iZ=!0,this.kye=void 0,this.xye=()=>{var t,e,i,s;(null==(t=this.Rye)?void 0:t.playState)&&((null==(e=this.kye)?void 0:e.Bb)||2!==this.Rye.playState||this.Tye().catch(Bt),3===this.Rye.playState&&(null==(s=this.kye)||null==(i=s.Mb)||i.call(s,String(this.Rye.playState)),this.kye=void 0))},this.cJ=new $7(this),this.cJ.yn(Fu,this.Ds),this.u8=new Wu([this.Ul]),this.c8=new iu(this),this.Fet=new fB,this.Vet=new MO(this.Fet.we,this.Uu,this.nt,this.Ll,this.wa,this.aH),this.Rye=this.Eye(),this.Tye().catch(Bt)}},itt=class extends ett{get XG(){}get ht(){return this.rO}get rt(){return this.hO}get zR(){return this.aZ}set zR(t){this.aZ=t,this.ZR||this.Iye.play(t)}get FR(){return this.Iye.muted}set FR(t){this.Iye.muted=t}get dI(){var t,e;return(null!=(e=null!=(t=this.Iye.volume)?t:null==this.Iye.getVolume?void 0:this.Iye.getVolume.call(this.Iye))?e:100)/100}set dI(t){null==this.Iye.setVolume||this.Iye.setVolume.call(this.Iye,100*t)}get yR(){return this.Iye.playPosition?this.Iye.playPosition/1e3:0}get ct(){return!this.Iye.playTime||this.Iye.playTime<0?1/0:this.Iye.playTime/1e3}get kR(){return this.Iye.playState===Ta.rye}get Ti(){return this.Iye.offsetHeight*As.Ys.Xg}get ji(){return this.Iye.offsetWidth*As.Ys.Xg}get ZR(){return this.Iye.playState===Ta.xZ}get KR(){return ee.fB()}get tI(){return this.E4}get hI(){return 0}get cI(){return 0}d7(t){super.d7(t),t.appendChild(this.Iye)}async $n(t){if(t.pw===zr.fW){const e=await super.$n(t);return await this.Sye(t),this.Iye.onPlayStateChange=this.Cye,e}throw new g("Unsupported media source configuration for HbbTV")}async Sye(t){this.Iye.type=Tu(t.MC),this.Iye.data=t.MC,await super.Sye(t)}async AI(){await super.AI(),this.Iye.play(this.aZ),this.yo(new Xt(this.yR))}bI(){this.Iye.play(0),this.yo(new vl(this.yR))}Sb(t,e,i){this.Iye.seek(1e3*t),this.rZ=!0,this.yo(new _t(this.yR))}async tr(){void 0!==this.qG&&this.Iye.stop(),this.Pye&&(As.Fp(this.Pye),this.Pye=void 0),await super.tr(),Ch(this.Iye),this.Iye.data&&this.Iye.removeAttribute("data"),this.rO.tr(),this.hO.tr()}async Ww(){await super.Ww(),ft(this.Iye)}ge(){super.ge(),this.Iye.style.display="block"}be(){super.be(),this.Iye.style.display="none"}oye(t){const e=this.Dye(t);if(!e)throw new g("Selected track does not exist on HbbTV");null==this.Iye.selectComponent||this.Iye.selectComponent.call(this.Iye,e)}aye(t){const e=this.Dye(t);if(!e)throw new g("Selected track does not exist on HbbTV");null==this.Iye.unselectComponent||this.Iye.unselectComponent.call(this.Iye,e)}Dye(t){var e;const i=null!=(e=null==this.Iye.getComponents?void 0:this.Iye.getComponents.call(this.Iye,t.type))?e:this.Nye();return this.Mye(i,t)}Lye(t){var e;const i=null!=(e=null==this.Iye.getCurrentActiveComponents?void 0:this.Iye.getCurrentActiveComponents.call(this.Iye,1))?e:this.Nye();this.rO.tr();for(let e=0;e<t.length;e++){const s=t.item(e);this.rO.tt(new K7(s,s.language,this.rO.V?Sr.APt:Sr.SPt,this,this.Bye(i,s)))}}Oye(t){var e;const i=null!=(e=null==this.Iye.getCurrentActiveComponents?void 0:this.Iye.getCurrentActiveComponents.call(this.Iye,0))?e:this.Nye();this.hO.tr();for(let e=0;e<t.length;e++){const s=t.item(e);this.hO.tt(new K7(s,String(s.aspectRatio),this.hO.V?vq.APt:vq.SPt,this,this.Bye(i,s)))}}Nye(){return{length:0,item:t=>{}}}Bye(t,e){return void 0!==this.Mye(t,e)}Mye(t,e){for(let i=0;i<t.length;i++){const s=t.item(i);if(this.Fye(s,e))return s}}Fye(t,e){return t.pid===e.pid&&t.componentTag===e.componentTag&&t.type===e.type&&t.encoding===e.encoding&&t.encrypted===e.encrypted}Vye(t){switch(t){case 0:return ck.SRC_NOT_SUPPORTED;case 1:case 5:case 6:return ck.NETWORK;default:return ck.DECODE}}constructor(t,e,i){super(e,i),this.Iye=t,this.aZ=1,this.rO=new Nn,this.hO=new Nn,this.E4=gs.jB,this.Wye=void 0,this.Pye=void 0,this.Cye=()=>{if(!this.Iye.playState)return;this.AW=this.E4,this.Uye=this.Gye,this.Gye=this.Iye.playState;const t=this.ct;switch(t!==this.Wye&&(this.yo(new re(t)),this.Wye=t),this.Pye&&this.Gye!==Ta.BL&&(As.Fp(this.Pye),this.Pye=void 0),this.Gye){case Ta.sye:this.E4=gs.jB;break;case Ta.nye:if(this.Uye===Ta.sye){var e;const t=null!=(e=null==this.Iye.getComponents?void 0:this.Iye.getComponents.call(this.Iye,1))?e:this.Nye();var i;const s=null!=(i=null==this.Iye.getComponents?void 0:this.Iye.getComponents.call(this.Iye,0))?i:this.Nye();if(0===t.length&&0===s.length)break;this.Lye(t),this.Oye(s)}this.E4=gs.Xn;break;case Ta.BL:this.rZ&&(this.rZ=!1,this.yo(new ga(this.yR))),this.yo(new ce(this.yR)),this.E4=gs.JB,this.Pye=As.Op(this.Hye,250);break;case Ta.ua:this.E4=gs.jB,this.yo(new wM(new lk(this.Vye(this.Iye.error))));break;case Ta.rye:this.yo(new Fs(this.yR));case Ta.xZ:case Ta.iye:}this.E4!==this.AW&&this.yo(new au(this.yR,this.E4))},this.Hye=()=>{this.yo(new I(this.yR,void 0))}}};r();var stt=class extends ett{get XG(){return this.YT}get ht(){return this.rO}get rt(){return this.hO}get zR(){return this.YT.playbackRate}set zR(t){this.YT.playbackRate=t}get FR(){return this.YT.muted}set FR(t){this.YT.muted=t}get dI(){return this.YT.volume}set dI(t){this.YT.volume=t}get yR(){return this.YT.currentTime}get ct(){return this.YT.duration}get kR(){return this.YT.ended}get Ti(){return this.YT.offsetHeight*As.Ys.Xg}get ji(){return this.YT.offsetWidth*As.Ys.Xg}get ZR(){return this.YT.paused}get KR(){return ee.xn(this.YT.played)}get tI(){return this.k9.tI}get hI(){return this.YT.videoHeight}get cI(){return this.YT.videoWidth}d7(t){super.d7(t),t.appendChild(this.YT)}async $n(t){if(t.pw===zr.fW){const e=await super.$n(t);return await this.Sye(t),e}throw new g("Unsupported media source configuration for HbbTV")}async Sye(t){switch(t.tH){case _h.VC:case _h.WC:this.YT.setAttribute("crossorigin",t.tH);break;case _h._E:default:this.YT.removeAttribute("crossorigin")}void 0!==t.QR?this.YT.preload=t.QR:this.YT.preload=hl.vG,void 0!==t.eH?this.YT.title=t.eH:Ld(this.YT);const e=this.zR;this.YT.src=t.MC,this.zR=e,await super.Sye(t)}async AI(){await super.AI(),await this.YT.play()}bI(){this.YT.pause()}Sb(t,e,i){e&&this.YT.fastSeek?this.YT.fastSeek(t):this.YT.currentTime=t,this.rZ=!0,this.yo(new _t(this.yR))}async tr(){await super.tr(),Ch(this.YT),this.YT.src&&this.YT.removeAttribute("src"),this.rO.tr(),this.hO.tr()}async Ww(){await super.Ww(),this.W9.Ww(),this.k9.Ww(),this.B8(),this.fH(),ft(this.YT)}ge(){super.ge(),this.YT.style.display="block",this.YT.style.height="100%",this.YT.style.width="100%"}be(){super.be(),this.YT.style.display="none"}N8(){this.XG.addEventListener("play",this.PW),this.XG.addEventListener("pause",this.DW),this.XG.addEventListener("timeupdate",this.xc),this.XG.addEventListener("progress",this.Zye),this.XG.addEventListener("loadstart",this.Ts),this.XG.addEventListener("ended",this.Cc),this.XG.addEventListener("ratechange",this.Xye),this.XG.addEventListener("volumechange",this.tzt),this.XG.addEventListener("durationchange",this.jXt),this.XG.addEventListener("loadedmetadata",this.zye),this.XG.addEventListener("emptied",this.qye),this.XG.addEventListener("seeked",this.Yye),this.XG.addEventListener("seeking",this.Kye),this.XG.addEventListener("error",this.jye),lr()&&this.XG.addEventListener("encrypted",this.u9)}B8(){this.XG.removeEventListener("play",this.PW),this.XG.removeEventListener("pause",this.DW),this.XG.removeEventListener("timeupdate",this.xc),this.XG.removeEventListener("progress",this.Zye),this.XG.removeEventListener("loadstart",this.Ts),this.XG.removeEventListener("ended",this.Cc),this.XG.removeEventListener("ratechange",this.Xye),this.XG.removeEventListener("volumechange",this.tzt),this.XG.removeEventListener("durationchange",this.jXt),this.XG.removeEventListener("loadedmetadata",this.zye),this.XG.removeEventListener("emptied",this.qye),this.XG.removeEventListener("seeked",this.Yye),this.XG.removeEventListener("seeking",this.Kye),this.XG.removeEventListener("error",this.jye),this.XG.removeEventListener("encrypted",this.u9)}PH(t){this.HG=t,this.yo(new wM(this.HG))}TH(){const t=this.YT.audioTracks,e=this.YT.videoTracks;t&&(t.addEventListener("addtrack",this.Qye),t.addEventListener("removetrack",this.Jye),t.addEventListener("change",this.$ye)),e&&(e.addEventListener("addtrack",this.tbe),e.addEventListener("removetrack",this.ebe),e.addEventListener("change",this.ibe))}fH(){const t=this.YT.audioTracks,e=this.YT.videoTracks;t&&(t.removeEventListener("addtrack",this.Qye),t.removeEventListener("removetrack",this.Jye),t.removeEventListener("change",this.$ye)),e&&(e.removeEventListener("addtrack",this.tbe),e.removeEventListener("removetrack",this.ebe),e.removeEventListener("change",this.ibe))}nh(t){for(let e=0;e<t.V;e++){t.aC(e).RO()}}constructor(t,e,i){super(e,i),this.YT=t,this.rO=new Nn,this.hO=new Nn,this.sbe=void 0,this.PW=()=>{this.yo(new Xt(this.yR))},this.DW=()=>{this.yo(new vl(this.yR))},this.xc=()=>{const t=this.yR,e=this.nI,i=void 0!==this.sbe,s=i&&this.sbe!==t;(e||!i||s)&&(this.yo(new I(t,void 0)),this.sbe=t)},this.Zye=()=>{this.yo(new K(this.yR))},this.Ts=()=>{this.yo(new $i)},this.Cc=()=>{this.yo(new Fs(this.yR))},this.Xye=()=>{this.yo(new Nu(this.yR,this.zR))},this.tzt=()=>{this.yo(new eh(this.yR,this.dI))},this.jXt=()=>{this.yo(new re(this.ct))},this.zye=()=>{},this.qye=()=>{},this.Yye=()=>{this.rZ&&(this.rZ=!1),this.yo(new ga(this.yR))},this.Kye=()=>{this.yo(new _t(this.yR))},this.NW=t=>{this.AW!==t.readyState&&(this.AW=t.readyState,this.yo(t))},this.IW=()=>{this.yo(new ce(this.yR))},this.jye=()=>{if(null!==this.YT.error){const e=this.YT.error;var t;this.PH(new lk(null!=(t=e.code)?t:ck.DECODE,e.message||"Error decoding media",void 0,e.msExtendedCode))}},this.u9=t=>{this.yo(new cg(t.initDataType,t.initData||new ArrayBuffer(0)))},this.tbe=t=>{const e=this.YT.videoTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];bI(this.hO,i)||this.hO.tt(new Ek(i))}},this.ebe=t=>{const e=[],i=this.YT.videoTracks;if(i){for(const t of this.hO.oC)AI(i,t.EO)||e.push(t);for(const t of e)this.hO.it(t)}},this.ibe=t=>{this.nh(this.hO)},this.Qye=t=>{const e=this.YT.audioTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];bI(this.rO,i)||this.rO.tt(new Tk(i))}},this.Jye=t=>{const e=[],i=this.YT.audioTracks;if(i){for(const t of this.rO.oC)AI(i,t.EO)||e.push(t);for(const t of e)this.rO.it(t)}},this.$ye=t=>{this.nh(this.rO)},this.k9=new QL(this),this.k9.yn(Zc.QI,this.NW),this.k9.l9(new Ka(this)),this.W9=new pM(this),this.W9.yn(Zc.BL,this.IW),this.N8(),this.TH()}},ntt=[Mi.so,Mi.Uy,Zc.BL,Mi.qy,Mi.zy,Mi.xy,Mi.Sy,Mi.wy,Mi.py,Mi.$y,Mi.Gy,Mi.By,Mi.Hy,Mi.eb,Mi.Xy,Mi.Cy,Mi.Ry],rtt=class extends Bo{get ht(){return this.LB.ht}get _R(){return this.LB._R.ks()}get ZB(){}get mR(){return this.LB.mR}set mR(t){t&&this.LB.UG(t)}get bt(){return this.wc}get yR(){return this.LB.yR}set yR(t){this.LB.Sb(t)}get jG(){return this.QG}get ct(){return this.LB.ct}get kR(){return this.LB.kR}get RR(){return this.ZG}get lt(){return this.HG}get PR(){}get NR(){return!1}get gI(){return this.LB.gI}set gI(t){this.LB.gI=t}get vI(){return this.fZ}get LR(){return la({},{uO:0,cO:0,lO:0,dO:0,fO:0,_O:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.LB.OR())}get FR(){return this.LB.FR}set FR(t){this.LB.FR=t}get GR(){return!0}get ZR(){return this.LB.ZR}get zR(){return this.LB.zR}set zR(t){this.LB.zR=t}get KR(){return this.LB.KR.ks()}get QR(){return this.zG}set QR(t){this.zG=t,this.qG&&(this.qG.QR=t)}get tI(){return this.LB.tI}get iI(){return this.LB.iI.ks()}get nI(){return this.LB.nI}get YG(){return this.LB.YG}get nt(){return this.Ul}get hI(){return this.LB.hI}get rt(){return this.LB.rt}get cI(){return this.LB.cI}get dI(){return this.LB.dI}set dI(t){this.LB.dI=t}DI(t){return this.LB.uH(t)}TI(){return!1}pI(){return this.LB.wa}wI(){}be(){this.LB.be()}xI(){this.LB.xI()}bI(){this.LB.bI()}async AI(){await this.LB.AI()}RI(){throw new g("Recreate media source is not supported on HbbTV")}AR(t,e){this.LB.Sb(t)}async ka(t,e,i){var s;ot(i),this.wc=t;const n={pw:zr.fW,MC:t.src,Ik:t.type,JG:this.$G(t),QR:this.zG,tH:t.crossOrigin,eH:null==(s=e.metadata)?void 0:s.title};this.qG=await this.LB.$n(n),e.textTracks&&this.sH(e.textTracks),Nx(this.nt)}ge(){this.LB.ge()}kI(){}EI(){}_a(){return this.LB.aH}async tr(){this.wc=void 0,this.HG=void 0,this.ZG=void 0,this.qG=void 0,await this.hH.tr(),this.LB.cH(),await this.LB.tr()}async gn(){await this.tr(),this.lH.gn(),this.LB.fn(ntt,this.Ds),this.LB.fn(sn.ua,this.yH),await this.LB.Ww(),this.vn.gn(),this.Ul.gn(),await this.hH.gn()}PH(t,e){this.HG||(this.HG=e,this.ZG=t,this.yo(new Wa(t)))}sH(t){for(const e of t)void 0!==e.src&&this.hH.rW(e)}$G(t){if(!t.contentProtection)return[];const e=[];return t.contentProtection.widevine&&e.push({rT:rn,TG:t.contentProtection.widevine.licenseAcquisitionURL,SH:[]}),t.contentProtection.playready&&e.push({rT:vm,TG:t.contentProtection.playready.licenseAcquisitionURL,SH:[]}),this.nbe(e,t.contentProtection.preferredKeySystems)}nbe(t,e){if(void 0===e||0===e.length)return t;const i=t=>{const i=e.indexOf(t.rT.Sw);return i>=0?i:e.length};return Bi(t,((t,e)=>i(t)-i(e)))}constructor(t,e,i,s){super(),this.qG=void 0,this.QG=new Qh,this.wc=void 0,this.HG=void 0,this.ZG=void 0,this.zG=hl.YH,this.yH=t=>{const e=t.lt,i=e.code,s=new A(vk(i),"Something went wrong during HbbTV playback.",e),n=Te(s);this.PH(s,n)},this.vn=new BP(t),this.vn.bn(),this.LB=Hd()?new stt(h.createElement(Io.lE),this.vn,s):new itt(h.createElement("object"),this.vn,s),this.LB.d7(t),this.LB.yn(ntt,this.Ds),this.LB.yn(sn.ua,this.yH),this.lH=new q(this.LB,!0),this.lH.yn(no,this.Ds),this.hH=new Rx(this.LB,e),this.Ul=new Wu([this.LB.nt,this.hH.Z]),this.fZ=i}};O(new class{nP(t,e,i,s,n,r,o,h){return new rtt(t,i,r,o)}NH(t,e){var i;return!(!Z.Dm||t.type!==nl.XC&&!BT(t.type)&&!qh(t.type))&&!(Hd()&&!(null==(i=t.contentProtection)?void 0:i.useOipfDrmAgent)&&(!t.contentProtection||lr()))}async MH(t){return!!await cT(t,!0)}LH(){return!1}constructor(){this.BH=ti.oG}});export{Ao as a,Nt as b,r as c,Z as d,ne as e,rl as f,V as g,Kt as h,ft as i,Td as j,xd as k,Rd as l,Id as m,Cd as n,ya as o,Ld as p,Bd as q,As as r,Bt as s,Jr as t,Zs as u,Cf as v,Pf as w,Hv as x,la as y,Dh as z,Im as A,Bi as B,Qc as C,su as D,Ti as E,we as F,qt as G,Pn as H,ot as I,oh as J,Bo as K,pe as L,Mi as M,Ja as N,Ye as O,zA as P,nh as Q,Pi as R,qA as S,Fh as T,eo as U,fk as V,nc as W,Fn as X,yh as Y,Hi as Z,fx as _,vx as $,gs as aa,Za as ba,co as ca,Nh as da,_F as ea,ee as fa,VT as ga,Ks as ha,re as ia,Bu as ja,tk as ka,sk as la,ys as ma,Tr as na,wC as oa,st as pa,Ya as qa,kP as ra,DP as sa,BP as ta,OP as ua,oo as va,VP as wa,HP as xa,ZP as ya,XP as za,YP as Aa,$i as Ba,AB as Ca,SB as Da,TB as Ea,EB as Fa,xB as Ga,RB as Ha,eO as Ia,iO as Ja,sO as Ka,nO as La,ku as Ma,rF as Na,oF as Oa,gF as Pa,WF as Qa,UF as Ra,GF as Sa,HF as Ta,qF as Ua,YF as Va,KF as Wa,cU as Xa,lU as Ya,z as Za,W0 as _a,j0 as $a,l1 as ab,l5 as bb,q5 as cb,U6 as db,z6 as eb,Z8 as fb};