/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 9.2.0
 Created: 2025-04-24T12:23:58.424Z
 */
var Po,f,Et,El,Mt,Rl,Il,Dl,y,Nl,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,Ll=a.location,Bl=a.navigator,u=a.setTimeout,v=a.clearTimeout,p=a.setInterval,m=a.clearInterval,g=a.Error,b=a.TypeError,w=(a.SyntaxError,a.Object),_=a.Math,x=a.parseInt,C=a.parseFloat,S=a.isNaN,j=a.Uint8Array,Ol=a.Worker,Fl=(a.WorkerGlobalScope,a.XMLHttpRequest),Vl=w.create,Wl=w.defineProperty,Ul=w.getOwnPropertyDescriptor,Gl=w.getOwnPropertyNames,Hl=w.getPrototypeOf,Zl=w.prototype.hasOwnProperty,lr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Xl=(t,e,i)=>(i=null!=t?Vl(Hl(t)):{},((t,e,i,s)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let n of Gl(e))Zl.call(t,n)||n===i||Wl(t,n,{get:()=>e[n],enumerable:!(s=Ul(e,n))||s.enumerable});return t})(!e&&t&&t.__esModule?i:Wl(i,"default",{value:t,enumerable:!0}),t)),r=(y=()=>{"use strict";if("function"==typeof Symbol&&Symbol.iterator)Po=Symbol,f=null!=(Rl=Symbol.for)?Rl:Symbol,Et=Symbol.iterator,El=null!=(Il=Symbol.dispose)?Il:f("Symbol.dispose"),Mt=null!=(Dl=Symbol.asyncDispose)?Dl:f("Symbol.asyncDispose");else{let t=0;Po=function(e){return"ul"+e+"_"+ ++t},Et=(f=function(t){return"ul"+t})("Symbol.iterator"),El=f("Symbol.dispose"),Mt=f("Symbol.asyncDispose"),Po.for=f,Po.iterator=Et,Po.dispose=El,Po.asyncDispose=Mt}},()=>(y&&(Nl=y(y=0)),Nl)),zl=lr(((t,e)=>{r(),function(i,s){"object"==typeof t&&void 0!==e?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((i=i||self).WebStreamsPolyfill={})}(t,(function(t){"use strict";var e="function"==typeof Po&&"symbol"==typeof Et?Po:function(t){return"Symbol("+t+")"};function i(){}var s=Number.isNaN||function(t){return t!=t},n=i;function r(t){return"object"==typeof t&&null!==t||"function"==typeof t}function o(t){return t.slice()}function h(t,e,i,s,n){new j(t).set(new j(i,s,n),e)}function a(t){return!1!==function(t){if("number"!=typeof t)return!1;if(s(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function u(t,e,i){if("function"!=typeof t)throw new b("Argument is not a function");return Function.prototype.apply.call(t,e,i)}function c(t,e,i,s){var n=t[e];if(void 0!==n){if("function"!=typeof n)throw new b(n+" is not a method");switch(i){case 0:return function(){return d(n,t,s)};case 1:return function(e){var i=[e].concat(s);return d(n,t,i)}}}return function(){return T(void 0)}}function l(t,e,i){var s=t[e];if(void 0!==s)return u(s,t,i)}function d(t,e,i){try{return T(u(t,e,i))}catch(t){return k(t)}}function f(t){if(t=Number(t),s(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function v(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new b("size property of a queuing strategy must be a function");return function(e){return t(e)}}var m=Promise,p=Promise.prototype.then,y=Promise.resolve.bind(m),A=Promise.reject.bind(m);function S(t){return new m(t)}function T(t){return y(t)}function k(t){return A(t)}function E(t,e,i){return p.call(t,e,i)}function x(t,e,i){E(E(t,e,i),void 0,n)}function R(t,e){x(t,e)}function I(t,e){x(t,void 0,e)}function C(t,e,i){return E(t,e,i)}function P(t){E(t,void 0,n)}var D=function(){function t(){this.hd=0,this.Ed=0,this.Rd={Id:[],Pd:void 0},this.Dd=this.Rd,this.hd=0,this.Ed=0}return w.defineProperty(t.prototype,"length",{get:function(){return this.Ed},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var e=this.Dd,i=e;16383===e.Id.length&&(i={Id:[],Pd:void 0}),e.Id.push(t),i!==e&&(this.Dd=i,e.Pd=i),++this.Ed},t.prototype.shift=function(){var t=this.Rd,e=t,i=this.hd,s=i+1,n=t.Id,r=n[i];return 16384===s&&(e=t.Pd,s=0),--this.Ed,this.hd=s,t!==e&&(this.Rd=e),n[i]=void 0,r},t.prototype.forEach=function(t){for(var e=this.hd,i=this.Rd,s=i.Id;!(e===s.length&&void 0===i.Pd||e===s.length&&(e=0,0===(s=(i=i.Pd).Id).length));)t(s[e]),++e},t.prototype.peek=function(){var t=this.Rd,e=this.hd;return t.Id[e]},t}();function N(t,e,i){var s=null;!0===i&&(s=w.prototype);var n=w.create(s);return n.value=t,n.done=e,n}function M(t,e){t.Nd=!0,t.Ld=e,e.Bd=t,"readable"===e.Ba?F(t):"closed"===e.Ba?function(t){F(t),U(t)}(t):V(t,e.Od)}function L(t,e){return qe(t.Ld,e)}function B(t){"readable"===t.Ld.Ba?W(t,new b("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,e){V(t,e)}(t,new b("Reader was released and can no longer be used to monitor the stream's closedness")),t.Ld.Bd=void 0,t.Ld=void 0}function O(t){return new b("Cannot "+t+" a stream using a released reader")}function F(t){t.Fd=S((function(e,i){t.Vd=e,t.Wd=i}))}function V(t,e){F(t),W(t,e)}function W(t,e){P(t.Fd),t.Wd(e),t.Vd=void 0,t.Wd=void 0}function U(t){t.Vd(void 0),t.Vd=void 0,t.Wd=void 0}var G=e("[[CancelSteps]]"),H=e("[[PullSteps]]");function Z(t,e){void 0===e&&(e=!1);var i=new J(t);return i.Nd=e,i}function X(t){return S((function(e,i){var s={Ud:e,Gd:i};t.Bd.Hd.push(s)}))}function z(t,e,i){var s=t.Bd;s.Hd.shift().Ud(N(e,i,s.Nd))}function q(t){return t.Bd.Hd.length}function Y(t){var e=t.Bd;return void 0!==e&&!!$(e)}var K,Q,J=function(){function t(t){if(!1===Xe(t))throw new b("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===ze(t))throw new b("This stream has already been locked for exclusive reading by another reader");M(this,t),this.Hd=new D}return w.defineProperty(t.prototype,"closed",{get:function(){return $(this)?this.Fd:k(et("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return $(this)?void 0===this.Ld?k(O("cancel")):L(this,t):k(et("cancel"))},t.prototype.read=function(){return $(this)?void 0===this.Ld?k(O("read from")):tt(this):k(et("read"))},t.prototype.releaseLock=function(){if(!$(this))throw et("releaseLock");if(void 0!==this.Ld){if(this.Hd.length>0)throw new b("Tried to release a reader lock when that reader has pending read() calls un-settled");B(this)}},t}();function $(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Hd")}function tt(t){var e=t.Ld;return e.Zd=!0,"closed"===e.Ba?T(N(void 0,!0,t.Nd)):"errored"===e.Ba?k(e.Od):e.Xd[H]()}function et(t){return new b("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof e.asyncIterator&&((K={})[e.asyncIterator]=function(){return this},Q=K,w.defineProperty(Q,e.asyncIterator,{enumerable:!1}));var it={next:function(){if(!1===st(this))return k(nt("next"));var t=this.zd;return void 0===t.Ld?k(O("iterate")):C(tt(t),(function(e){var i=e.done;return i&&B(t),N(e.value,i,!0)}))},return:function(t){if(!1===st(this))return k(nt("next"));var e=this.zd;if(void 0===e.Ld)return k(O("finish iterating"));if(e.Hd.length>0)return k(new b("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.qd){var i=L(e,t);return B(e),C(i,(function(){return N(t,!0,!0)}))}return B(e),T(N(t,!0,!0))}};function st(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"zd")}function nt(t){return new b("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function rt(t){var e=t.Yd.shift();return t.Kd-=e.size,t.Kd<0&&(t.Kd=0),e.value}function ot(t,e,i){if(!a(i=Number(i)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.Yd.push({value:e,size:i}),t.Kd+=i}function ht(t){t.Yd=new D,t.Kd=0}void 0!==Q&&w.setPrototypeOf(it,Q),w.defineProperty(it,"next",{enumerable:!1}),w.defineProperty(it,"return",{enumerable:!1});var at=e("[[AbortSteps]]"),ut=e("[[ErrorSteps]]"),ct=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),dt(this);var i=e.size,s=e.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=v(i);void 0===s&&(s=1),function(t,e,i,s){var n=w.create(Pt.prototype);function r(){return l(e,"start",[n])}var o=c(e,"write",1,[n]),h=c(e,"close",0,[]),a=c(e,"abort",1,[]);Dt(t,n,r,o,h,a,i,s)}(this,t,s=f(s),n)}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===ft(this))throw Vt("locked");return _t(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===ft(this)?k(Vt("abort")):!0===_t(this)?k(new b("Cannot abort a stream that already has a writer")):vt(this,t)},t.prototype.close=function(){return!1===ft(this)?k(Vt("close")):!0===_t(this)?k(new b("Cannot close a stream that already has a writer")):!0===yt(this)?k(new b("Cannot close an already-closing stream")):mt(this)},t.prototype.getWriter=function(){if(!1===ft(this))throw Vt("getWriter");return lt(this)},t}();function lt(t){return new St(t)}function dt(t){t.Ba="writable",t.Od=void 0,t.Qd=void 0,t.Jd=void 0,t.$d=new D,t.tf=void 0,t.ef=void 0,t.nf=void 0,t.rf=void 0,t.hf=!1}function ft(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Jd")}function _t(t){return void 0!==t.Qd}function vt(t,e){var i=t.Ba;if("closed"===i||"errored"===i)return T(void 0);if(void 0!==t.rf)return t.rf.uf;var s=!1;"erroring"===i&&(s=!0,e=void 0);var n=S((function(i,n){t.rf={uf:void 0,Ud:i,Gd:n,cf:e,lf:s}}));return t.rf.uf=n,!1===s&&pt(t,e),n}function mt(t){var e=t.Ba;if("closed"===e||"errored"===e)return k(new b("The stream (in "+e+" state) is not in the writable state and cannot be closed"));var i=S((function(e,i){var s={Ud:e,Gd:i};t.ef=s})),s=t.Qd;return void 0!==s&&!0===t.hf&&"writable"===e&&jt(s),function(t){ot(t,"close",0),Lt(t)}(t.Jd),i}function gt(t,e){"writable"!==t.Ba?wt(t):pt(t,e)}function pt(t,e){var i=t.Jd;t.Ba="erroring",t.Od=e;var s=t.Qd;void 0!==s&&Rt(s,e),!1===function(t){if(void 0===t.tf&&void 0===t.nf)return!1;return!0}(t)&&!0===i.df&&wt(t)}function wt(t){t.Ba="errored",t.Jd[ut]();var e=t.Od;if(t.$d.forEach((function(t){t.Gd(e)})),t.$d=new D,void 0!==t.rf){var i=t.rf;if(t.rf=void 0,!0===i.lf)return i.Gd(e),void bt(t);x(t.Jd[at](i.cf),(function(){i.Ud(),bt(t)}),(function(e){i.Gd(e),bt(t)}))}else bt(t)}function yt(t){return void 0!==t.ef||void 0!==t.nf}function bt(t){void 0!==t.ef&&(t.ef.Gd(t.Od),t.ef=void 0);var e=t.Qd;void 0!==e&&Zt(e,t.Od)}function At(t,e){var i=t.Qd;void 0!==i&&e!==t.hf&&(!0===e?function(t){zt(t)}(i):jt(i)),t.hf=e}var St=function(){function t(t){if(!1===ft(t))throw new b("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===_t(t))throw new b("This stream has already been locked for exclusive writing by another writer");this._f=t,t.Qd=this;var e=t.Ba;if("writable"===e)!1===yt(t)&&!0===t.hf?zt(this):Yt(this),Gt(this);else if("erroring"===e)qt(this,t.Od),Gt(this);else if("closed"===e)Yt(this),function(t){Gt(t),Xt(t)}(this);else{var i=t.Od;qt(this,i),Ht(this,i)}}return w.defineProperty(t.prototype,"closed",{get:function(){return!1===Tt(this)?k(Wt("closed")):this.Fd},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Tt(this))throw Wt("desiredSize");if(void 0===this._f)throw Ut("desiredSize");return function(t){var e=t._f,i=e.Ba;if("errored"===i||"erroring"===i)return null;if("closed"===i)return 0;return Mt(e.Jd)}(this)},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"ready",{get:function(){return!1===Tt(this)?k(Wt("ready")):this.vf},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===Tt(this)?k(Wt("abort")):void 0===this._f?k(Ut("abort")):function(t,e){var i=t._f;return vt(i,e)}(this,t)},t.prototype.close=function(){if(!1===Tt(this))return k(Wt("close"));var t=this._f;return void 0===t?k(Ut("close")):!0===yt(t)?k(new b("Cannot close an already-closing stream")):kt(this)},t.prototype.releaseLock=function(){if(!1===Tt(this))throw Wt("releaseLock");void 0!==this._f&&It(this)},t.prototype.write=function(t){return!1===Tt(this)?k(Wt("write")):void 0===this._f?k(Ut("write to")):Ct(this,t)},t}();function Tt(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"_f")}function kt(t){return mt(t._f)}function xt(t,e){"pending"===t.mf?Zt(t,e):function(t,e){Ht(t,e)}(t,e)}function Rt(t,e){"pending"===t.gf?Kt(t,e):function(t,e){qt(t,e)}(t,e)}function It(t){var e=t._f,i=new b("Writer was released and can no longer be used to monitor the stream's closedness");Rt(t,i),xt(t,i),e.Qd=void 0,t._f=void 0}function Ct(t,e){var i=t._f,s=i.Jd,n=function(t,e){try{return t.pf(e)}catch(e){return Bt(t,e),1}}(s,e);if(i!==t._f)return k(Ut("write to"));var r=i.Ba;if("errored"===r)return k(i.Od);if(!0===yt(i)||"closed"===r)return k(new b("The stream is closing or closed and cannot be written to"));if("erroring"===r)return k(i.Od);var o=function(t){return S((function(e,i){var s={Ud:e,Gd:i};t.$d.push(s)}))}(i);return function(t,e,i){var s={chunk:e};try{ot(t,s,i)}catch(e){return void Bt(t,e)}var n=t.wf;if(!1===yt(n)&&"writable"===n.Ba){At(n,Ot(t))}Lt(t)}(s,e,n),o}var Pt=function(){function t(){throw new b("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!r(t))return!1;if(!w.prototype.hasOwnProperty.call(t,"wf"))return!1;return!0}(this))throw new b("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.wf.Ba&&Ft(this,t)},t.prototype[at]=function(t){var e=this.yf(t);return Nt(this),e},t.prototype[ut]=function(){ht(this)},t}();function Dt(t,e,i,s,n,r,o,h){e.wf=t,t.Jd=e,e.Yd=void 0,e.Kd=void 0,ht(e),e.df=!1,e.pf=h,e.bf=o,e.Af=s,e.Sf=n,e.yf=r;var a=Ot(e);At(t,a),x(T(i()),(function(){e.df=!0,Lt(e)}),(function(i){e.df=!0,gt(t,i)}))}function Nt(t){t.Af=void 0,t.Sf=void 0,t.yf=void 0,t.pf=void 0}function Mt(t){return t.bf-t.Kd}function Lt(t){var e=t.wf;if(!1!==t.df&&void 0===e.tf)if("erroring"!==e.Ba){if(0!==t.Yd.length){var i=function(t){return t.Yd.peek().value}(t);"close"===i?function(t){var e=t.wf;(function(t){t.nf=t.ef,t.ef=void 0})(e),rt(t);var i=t.Sf();Nt(t),x(i,(function(){!function(t){t.nf.Ud(void 0),t.nf=void 0,"erroring"===t.Ba&&(t.Od=void 0,void 0!==t.rf&&(t.rf.Ud(),t.rf=void 0)),t.Ba="closed";var e=t.Qd;void 0!==e&&Xt(e)}(e)}),(function(t){!function(t,e){t.nf.Gd(e),t.nf=void 0,void 0!==t.rf&&(t.rf.Gd(e),t.rf=void 0),gt(t,e)}(e,t)}))}(t):function(t,e){var i=t.wf;!function(t){t.tf=t.$d.shift()}(i);var s=t.Af(e);x(s,(function(){!function(t){t.tf.Ud(void 0),t.tf=void 0}(i);var e=i.Ba;if(rt(t),!1===yt(i)&&"writable"===e){var s=Ot(t);At(i,s)}Lt(t)}),(function(e){"writable"===i.Ba&&Nt(t),function(t,e){t.tf.Gd(e),t.tf=void 0,gt(t,e)}(i,e)}))}(t,i.chunk)}}else wt(e)}function Bt(t,e){"writable"===t.wf.Ba&&Ft(t,e)}function Ot(t){return Mt(t)<=0}function Ft(t,e){var i=t.wf;Nt(t),pt(i,e)}function Vt(t){return new b("WritableStream.prototype."+t+" can only be used on a WritableStream")}function Wt(t){return new b("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function Ut(t){return new b("Cannot "+t+" a stream using a released writer")}function Gt(t){t.Fd=S((function(e,i){t.Vd=e,t.Wd=i,t.mf="pending"}))}function Ht(t,e){Gt(t),Zt(t,e)}function Zt(t,e){P(t.Fd),t.Wd(e),t.Vd=void 0,t.Wd=void 0,t.mf="rejected"}function Xt(t){t.Vd(void 0),t.Vd=void 0,t.Wd=void 0,t.mf="resolved"}function zt(t){t.vf=S((function(e,i){t.Tf=e,t.kf=i})),t.gf="pending"}function qt(t,e){zt(t),Kt(t,e)}function Yt(t){zt(t),jt(t)}function Kt(t,e){P(t.vf),t.kf(e),t.Tf=void 0,t.kf=void 0,t.gf="rejected"}function jt(t){t.Tf(void 0),t.Tf=void 0,t.kf=void 0,t.gf="fulfilled"}function Qt(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var Jt="undefined"!=typeof DOMException?DOMException:void 0;var $t,te=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(Jt)?Jt:(($t=function(t,e){this.message=t||"",this.name=e||"Error",g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}).prototype=w.create(g.prototype),w.defineProperty($t.prototype,"constructor",{value:$t,writable:!0,configurable:!0}),$t);function ee(t,e,s,n,r,o){var h=Z(t),a=lt(e);t.Zd=!0;var u=!1,c=T(void 0);return S((function(l,d){var f,_,v,m;if(void 0!==o){if(f=function(){var i=new te("Aborted","AbortError"),s=[];!1===n&&s.push((function(){return"writable"===e.Ba?vt(e,i):T(void 0)})),!1===r&&s.push((function(){return"readable"===t.Ba?qe(t,i):T(void 0)})),y((function(){return Promise.all(s.map((function(t){return t()})))}),!0,i)},!0===o.aborted)return void f();o.addEventListener("abort",f)}if(w(t,h.Fd,(function(t){!1===n?y((function(){return vt(e,t)}),!0,t):A(!0,t)})),w(e,a.Fd,(function(e){!1===r?y((function(){return qe(t,e)}),!0,e):A(!0,e)})),_=t,v=h.Fd,m=function(){!1===s?y((function(){return function(t){var e=t._f,i=e.Ba;return!0===yt(e)||"closed"===i?T(void 0):"errored"===i?k(e.Od):kt(t)}(a)})):A()},"closed"===_.Ba?m():R(v,m),!0===yt(e)||"closed"===e.Ba){var g=new b("the destination writable stream closed before all data could be piped to it");!1===r?y((function(){return qe(t,g)}),!0,g):A(!0,g)}function p(){var t=c;return E(c,(function(){return t!==c?p():void 0}))}function w(t,e,i){"errored"===t.Ba?i(t.Od):I(e,i)}function y(t,i,s){function n(){x(t(),(function(){return C(i,s)}),(function(t){return C(!0,t)}))}!0!==u&&(u=!0,"writable"===e.Ba&&!1===yt(e)?R(p(),n):n())}function A(t,i){!0!==u&&(u=!0,"writable"===e.Ba&&!1===yt(e)?R(p(),(function(){return C(t,i)})):C(t,i))}function C(t,e){It(a),B(h),void 0!==o&&o.removeEventListener("abort",f),t?d(e):l(void 0)}P(S((function(t,e){!function s(n){n?t():E(!0===u?T(!0):E(a.vf,(function(){return E(tt(h),(function(t){return!0===t.done||(c=E(Ct(a,t.value),void 0,i),!1)}))})),s,e)}(!1)})))}))}var ie=function(){function t(){throw new b}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===se(this))throw fe("desiredSize");return ce(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===se(this))throw fe("close");if(!1===le(this))throw new b("The stream is not in a state that permits close");he(this)},t.prototype.enqueue=function(t){if(!1===se(this))throw fe("enqueue");if(!1===le(this))throw new b("The stream is not in a state that permits enqueue");return ae(this,t)},t.prototype.error=function(t){if(!1===se(this))throw fe("error");ue(this,t)},t.prototype[G]=function(t){ht(this);var e=this.Ef(t);return oe(this),e},t.prototype[H]=function(){var t=this.xf;if(this.Yd.length>0){var e=rt(this);return!0===this.Rf&&0===this.Yd.length?(oe(this),Ye(t)):ne(this),T(N(e,!1,t.Bd.Nd))}var i=X(t);return ne(this),i},t}();function se(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"xf")}function ne(t){!1!==re(t)&&(!0!==t.If?(t.If=!0,x(t.Cf(),(function(){t.If=!1,!0===t.Pf&&(t.Pf=!1,ne(t))}),(function(e){ue(t,e)}))):t.Pf=!0)}function re(t){var e=t.xf;return!1!==le(t)&&(!1!==t.df&&(!0===ze(e)&&q(e)>0||ce(t)>0))}function oe(t){t.Cf=void 0,t.Ef=void 0,t.pf=void 0}function he(t){var e=t.xf;t.Rf=!0,0===t.Yd.length&&(oe(t),Ye(e))}function ae(t,e){var i=t.xf;if(!0===ze(i)&&q(i)>0)z(i,e,!1);else{var s=void 0;try{s=t.pf(e)}catch(e){throw ue(t,e),e}try{ot(t,e,s)}catch(e){throw ue(t,e),e}}ne(t)}function ue(t,e){var i=t.xf;"readable"===i.Ba&&(ht(t),oe(t),Ke(i,e))}function ce(t){var e=t.xf.Ba;return"errored"===e?null:"closed"===e?0:t.bf-t.Kd}function le(t){var e=t.xf.Ba;return!1===t.Rf&&"readable"===e}function de(t,e,i,s,n,r,o){e.xf=t,e.Yd=void 0,e.Kd=void 0,ht(e),e.df=!1,e.Rf=!1,e.Pf=!1,e.If=!1,e.pf=o,e.bf=r,e.Cf=s,e.Ef=n,t.Xd=e,x(T(i()),(function(){e.df=!0,ne(e)}),(function(t){ue(e,t)}))}function fe(t){return new b("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var _e=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&_.floor(t)===t},ve=function(){function t(){throw new b("ReadableStreamBYOBRequest cannot be used directly")}return w.defineProperty(t.prototype,"view",{get:function(){if(!1===pe(this))throw Me("view");return this.Df},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===pe(this))throw Me("respond");if(void 0===this.Nf)throw new b("This BYOB request has been invalidated");this.Df.buffer,function(t,e){if(e=Number(e),!1===a(e))throw new RangeError("bytesWritten must be a finite");Re(t,e)}(this.Nf,t)},t.prototype.respondWithNewView=function(t){if(!1===pe(this))throw Me("respond");if(void 0===this.Nf)throw new b("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new b("You can only respond with array buffer views");t.buffer,function(t,e){var i=t.Mf.peek();if(i.byteOffset+i.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.byteLength!==e.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");i.buffer=e.buffer,Re(t,e.byteLength)}(this.Nf,t)},t}(),me=function(){function t(){throw new b("ReadableByteStreamController constructor cannot be used directly")}return w.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===ge(this))throw Le("byobRequest");if(void 0===this.Lf&&this.Mf.length>0){var t=this.Mf.peek(),e=new j(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),i=w.create(ve.prototype);!function(t,e,i){t.Nf=e,t.Df=i}(i,this,e),this.Lf=i}return this.Lf},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===ge(this))throw Le("desiredSize");return De(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===ge(this))throw Le("close");if(!0===this.Rf)throw new b("The stream has already been closed; do not close it again!");var t=this.Bf.Ba;if("readable"!==t)throw new b("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var e=t.Bf;if(t.Kd>0)return void(t.Rf=!0);if(t.Mf.length>0){if(t.Mf.peek().bytesFilled>0){var i=new b("Insufficient bytes to fill elements in the given buffer");throw Pe(t,i),i}}Ce(t),Ye(e)}(this)},t.prototype.enqueue=function(t){if(!1===ge(this))throw Le("enqueue");if(!0===this.Rf)throw new b("stream is closed or draining");var e=this.Bf.Ba;if("readable"!==e)throw new b("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new b("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,e){var i=t.Bf,s=e.buffer,n=e.byteOffset,r=e.byteLength,o=s;if(!0===Y(i)){if(0===q(i))Ae(t,o,n,r);else z(i,new j(o,n,r),!1)}else!0===Fe(i)?(Ae(t,o,n,r),xe(t)):Ae(t,o,n,r);we(t)}(this,t)},t.prototype.error=function(t){if(!1===ge(this))throw Le("error");Pe(this,t)},t.prototype[G]=function(t){this.Mf.length>0&&(this.Mf.peek().bytesFilled=0);ht(this);var e=this.Ef(t);return Ce(this),e},t.prototype[H]=function(){var t=this.Bf;if(this.Kd>0){var e=this.Yd.shift();this.Kd-=e.byteLength,ke(this);var i=void 0;try{i=new j(e.buffer,e.byteOffset,e.byteLength)}catch(t){return k(t)}return T(N(i,!1,t.Bd.Nd))}var s=this.Of;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return k(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:j,readerType:"default"};this.Mf.push(r)}var o=X(t);return we(this),o},t}();function ge(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Bf")}function pe(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Nf")}function we(t){var e=function(t){var e=t.Bf;if("readable"!==e.Ba)return!1;if(!0===t.Rf)return!1;if(!1===t.df)return!1;if(!0===Y(e)&&q(e)>0)return!0;if(!0===Fe(e)&&Oe(e)>0)return!0;var i=De(t);if(i>0)return!0;return!1}(t);!1!==e&&(!0!==t.If?(t.If=!0,x(t.Cf(),(function(){t.If=!1,!0===t.Pf&&(t.Pf=!1,we(t))}),(function(e){Pe(t,e)}))):t.Pf=!0)}function ye(t,e){var i=!1;"closed"===t.Ba&&(i=!0);var s=be(e);"default"===e.readerType?z(t,s,i):function(t,e,i){var s=t.Bd,n=s.Ff.shift();n.Ud(N(e,i,s.Nd))}(t,s,i)}function be(t){var e=t.bytesFilled,i=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,e/i)}function Ae(t,e,i,s){t.Yd.push({buffer:e,byteOffset:i,byteLength:s}),t.Kd+=s}function Se(t,e){var i=e.elementSize,s=e.bytesFilled-e.bytesFilled%i,n=_.min(t.Kd,e.byteLength-e.bytesFilled),r=e.bytesFilled+n,o=r-r%i,a=n,u=!1;o>s&&(a=o-e.bytesFilled,u=!0);for(var c=t.Yd;a>0;){var l=c.peek(),d=_.min(a,l.byteLength),f=e.byteOffset+e.bytesFilled;h(e.buffer,f,l.buffer,l.byteOffset,d),l.byteLength===d?c.shift():(l.byteOffset+=d,l.byteLength-=d),t.Kd-=d,Te(t,d,e),a-=d}return u}function Te(t,e,i){Ee(t),i.bytesFilled+=e}function ke(t){0===t.Kd&&!0===t.Rf?(Ce(t),Ye(t.Bf)):we(t)}function Ee(t){void 0!==t.Lf&&(t.Lf.Nf=void 0,t.Lf.Df=void 0,t.Lf=void 0)}function xe(t){for(;t.Mf.length>0;){if(0===t.Kd)return;var e=t.Mf.peek();!0===Se(t,e)&&(Ie(t),ye(t.Bf,e))}}function Re(t,e){var i=t.Mf.peek();if("closed"===t.Bf.Ba){if(0!==e)throw new b("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,e){e.buffer=e.buffer;var i=t.Bf;if(!0===Fe(i))for(;Oe(i)>0;)ye(i,Ie(t))}(t,i)}else!function(t,e,i){if(i.bytesFilled+e>i.byteLength)throw new RangeError("bytesWritten out of range");if(Te(t,e,i),!(i.bytesFilled<i.elementSize)){Ie(t);var s=i.bytesFilled%i.elementSize;if(s>0){var n=i.byteOffset+i.bytesFilled,r=i.buffer.slice(n-s,n);Ae(t,r,0,r.byteLength)}i.buffer=i.buffer,i.bytesFilled-=s,ye(t.Bf,i),xe(t)}}(t,e,i);we(t)}function Ie(t){var e=t.Mf.shift();return Ee(t),e}function Ce(t){t.Cf=void 0,t.Ef=void 0}function Pe(t,e){var i=t.Bf;"readable"===i.Ba&&(!function(t){Ee(t),t.Mf=new D}(t),ht(t),Ce(t),Ke(i,e))}function De(t){var e=t.Bf.Ba;return"errored"===e?null:"closed"===e?0:t.bf-t.Kd}function Ne(t,e,i){var s=w.create(me.prototype);var n=c(e,"pull",0,[s]),r=c(e,"cancel",1,[]),o=e.autoAllocateChunkSize;if(void 0!==o&&(o=Number(o),!1===_e(o)||o<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,e,i,s,n,r,o){e.Bf=t,e.Pf=!1,e.If=!1,e.Lf=void 0,e.Yd=e.Kd=void 0,ht(e),e.Rf=!1,e.df=!1,e.bf=f(r),e.Cf=s,e.Ef=n,e.Of=o,e.Mf=new D,t.Xd=e,x(T(i()),(function(){e.df=!0,we(e)}),(function(t){Pe(e,t)}))}(t,s,(function(){return l(e,"start",[s])}),n,r,i,o)}function Me(t){return new b("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Le(t){return new b("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function Be(t){return S((function(e,i){var s={Ud:e,Gd:i};t.Bd.Ff.push(s)}))}function Oe(t){return t.Bd.Ff.length}function Fe(t){var e=t.Bd;return void 0!==e&&!!We(e)}var Ve=function(){function t(t){if(!Xe(t))throw new b("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===ge(t.Xd))throw new b("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(ze(t))throw new b("This stream has already been locked for exclusive reading by another reader");M(this,t),this.Ff=new D}return w.defineProperty(t.prototype,"closed",{get:function(){return We(this)?this.Fd:k(Ue("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return We(this)?void 0===this.Ld?k(O("cancel")):L(this,t):k(Ue("cancel"))},t.prototype.read=function(t){return We(this)?void 0===this.Ld?k(O("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?k(new b("view must have non-zero byteLength")):function(t,e){var i=t.Ld;if(i.Zd=!0,"errored"===i.Ba)return k(i.Od);return function(t,e){var i=t.Bf,s=1;e.constructor!==DataView&&(s=e.constructor.BYTES_PER_ELEMENT);var n=e.constructor,r={buffer:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.Mf.length>0)return t.Mf.push(r),Be(i);if("closed"===i.Ba)return T(N(new n(r.buffer,r.byteOffset,0),!0,i.Bd.Nd));if(t.Kd>0){if(!0===Se(t,r)){var o=be(r);return ke(t),T(N(o,!1,i.Bd.Nd))}if(!0===t.Rf){var h=new b("Insufficient bytes to fill elements in the given buffer");return Pe(t,h),k(h)}}t.Mf.push(r);var a=Be(i);return we(t),a}(i.Xd,e)}(this,t)):k(new b("view must be an array buffer view")):k(Ue("read"))},t.prototype.releaseLock=function(){if(!We(this))throw Ue("releaseLock");if(void 0!==this.Ld){if(this.Ff.length>0)throw new b("Tried to release a reader lock when that reader has pending read() calls un-settled");B(this)}},t}();function We(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Ff")}function Ue(t){return new b("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var Ge=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),Ze(this);var i=e.size,s=e.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==i)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),Ne(this,t,s=f(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=v(i);void 0===s&&(s=1),function(t,e,i,s){var n=w.create(ie.prototype),r=c(e,"pull",0,[n]),o=c(e,"cancel",1,[]);de(t,n,(function(){return l(e,"start",[n])}),r,o,i,s)}(this,t,s=f(s),r)}}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===Xe(this))throw je("locked");return ze(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Xe(this)?k(je("cancel")):!0===ze(this)?k(new b("Cannot cancel a stream that already has a reader")):qe(this,t)},t.prototype.getReader=function(t){var e=(void 0===t?{}:t).mode;if(!1===Xe(this))throw je("getReader");if(void 0===e)return Z(this,!0);if("byob"===(e=String(e)))return function(t,e){void 0===e&&(e=!1);var i=new Ve(t);return i.Nd=e,i}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,e){var i=t.writable,s=t.readable,n=void 0===e?{}:e,r=n.preventClose,o=n.preventAbort,h=n.preventCancel,a=n.signal;if(!1===Xe(this))throw je("pipeThrough");if(!1===ft(i))throw new b("writable argument to pipeThrough must be a WritableStream");if(!1===Xe(s))throw new b("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),o=Boolean(o),h=Boolean(h),void 0!==a&&!Qt(a))throw new b("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===ze(this))throw new b("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===_t(i))throw new b("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return P(ee(this,i,r,o,h,a)),s},t.prototype.pipeTo=function(t,e){var i=void 0===e?{}:e,s=i.preventClose,n=i.preventAbort,r=i.preventCancel,o=i.signal;return!1===Xe(this)?k(je("pipeTo")):!1===ft(t)?k(new b("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===o||Qt(o)?!0===ze(this)?k(new b("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===_t(t)?k(new b("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ee(this,t,s,n,r,o):k(new b("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Xe(this))throw je("tee");var t=function(t,e){var i,s,n,r,h,a=Z(t),u=!1,c=!1,l=!1,d=S((function(t){h=t}));function f(){return!0===u||(u=!0,P(C(tt(a),(function(t){if(u=!1,!0===t.done)return!1===c&&he(n.Xd),void(!1===l&&he(r.Xd));var e=t.value,i=e,s=e;!1===c&&ae(n.Xd,i),!1===l&&ae(r.Xd,s)})))),T(void 0)}function _(){}return n=He(_,f,(function(e){if(c=!0,i=e,!0===l){var n=o([i,s]),r=qe(t,n);h(r)}return d})),r=He(_,f,(function(e){if(l=!0,s=e,!0===c){var n=o([i,s]),r=qe(t,n);h(r)}return d})),I(a.Fd,(function(t){ue(n.Xd,t),ue(r.Xd,t)})),[n,r]}(this);return o(t)},t.prototype.getIterator=function(t){var e=(void 0===t?{}:t).preventCancel,i=void 0!==e&&e;if(!1===Xe(this))throw je("getIterator");return function(t,e){void 0===e&&(e=!1);var i=Z(t),s=w.create(it);return s.zd=i,s.qd=Boolean(e),s}(this,i)},t}();function He(t,e,i,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=w.create(Ge.prototype);return Ze(r),de(r,w.create(ie.prototype),t,e,i,s,n),r}function Ze(t){t.Ba="readable",t.Bd=void 0,t.Od=void 0,t.Zd=!1}function Xe(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Xd")}function ze(t){return void 0!==t.Bd}function qe(t,e){return t.Zd=!0,"closed"===t.Ba?T(void 0):"errored"===t.Ba?k(t.Od):(Ye(t),C(t.Xd[G](e),i))}function Ye(t){t.Ba="closed";var e=t.Bd;void 0!==e&&($(e)&&(e.Hd.forEach((function(t){t.Ud(N(void 0,!0,e.Nd))})),e.Hd=new D),U(e))}function Ke(t,e){t.Ba="errored",t.Od=e;var i=t.Bd;void 0!==i&&($(i)?(i.Hd.forEach((function(t){t.Gd(e)})),i.Hd=new D):(i.Ff.forEach((function(t){t.Gd(e)})),i.Ff=new D),W(i,e))}function je(t){return new b("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof e.asyncIterator&&w.defineProperty(Ge.prototype,e.asyncIterator,{value:Ge.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var Qe=function(){function t(t){var e=t.highWaterMark;this.highWaterMark=e}return t.prototype.size=function(t){return t.byteLength},t}(),Je=function(){function t(t){var e=t.highWaterMark;this.highWaterMark=e}return t.prototype.size=function(){return 1},t}(),$e=function(){function t(t,e,i){void 0===t&&(t={}),void 0===e&&(e={}),void 0===i&&(i={});var s=e.size,n=e.highWaterMark,r=i.size,o=i.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var h=v(s);if(void 0===n&&(n=1),n=f(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=v(r);void 0===o&&(o=0),o=f(o),function(t,e,i,s,n,r){function o(){return e}function h(e){return function(t,e){var i=t.Vf;if(!0===t.hf){return C(t.Wf,(function(){var s=t.Uf;if("erroring"===s.Ba)throw s.Od;return ai(i,e)}))}return ai(i,e)}(t,e)}function a(e){return function(t,e){return ei(t,e),T(void 0)}(t,e)}function u(){return function(t){var e=t.Gf,i=t.Vf,s=i.Hf();return oi(i),C(s,(function(){if("errored"===e.Ba)throw e.Od;var t=e.Xd;!0===le(t)&&he(t)}),(function(i){throw ei(t,i),e.Od}))}(t)}function c(){return function(t){return si(t,!1),t.Wf}(t)}function l(e){return ii(t,e),T(void 0)}t.Uf=function(t,e,i,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var o=w.create(ct.prototype);return dt(o),Dt(o,w.create(Pt.prototype),t,e,i,s,n,r),o}(o,h,u,a,i,s),t.Gf=He(o,c,l,n,r),t.hf=void 0,t.Wf=void 0,t.Zf=void 0,si(t,!0),t.Vf=void 0}(this,S((function(t){a=t})),n,h,o,u),function(t,e){var i=w.create(ni.prototype),s=function(t){try{return hi(i,t),T(void 0)}catch(t){return k(t)}},n=e.transform;if(void 0!==n){if("function"!=typeof n)throw new b("transform is not a method");s=function(t){return d(n,e,[t,i])}}var r=c(e,"flush",0,[i]);!function(t,e,i,s){e.Xf=t,t.Vf=e,e.zf=i,e.Hf=s}(t,i,s,r)}(this,t);var _=l(t,"start",[this.Vf]);a(_)}return w.defineProperty(t.prototype,"readable",{get:function(){if(!1===ti(this))throw ci("readable");return this.Gf},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"writable",{get:function(){if(!1===ti(this))throw ci("writable");return this.Uf},enumerable:!0,configurable:!0}),t}();function ti(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Vf")}function ei(t,e){ue(t.Gf.Xd,e),ii(t,e)}function ii(t,e){oi(t.Vf),Bt(t.Uf.Jd,e),!0===t.hf&&si(t,!1)}function si(t,e){void 0!==t.Wf&&t.Zf(),t.Wf=S((function(e){t.Zf=e})),t.hf=e}var ni=function(){function t(){throw new b("TransformStreamDefaultController instances cannot be created directly")}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===ri(this))throw ui("desiredSize");return ce(this.Xf.Gf.Xd)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===ri(this))throw ui("enqueue");hi(this,t)},t.prototype.error=function(t){if(!1===ri(this))throw ui("error");!function(t,e){ei(t.Xf,e)}(this,t)},t.prototype.terminate=function(){if(!1===ri(this))throw ui("terminate");!function(t){var e=t.Xf,i=e.Gf.Xd;!0===le(i)&&he(i);var s=new b("TransformStream terminated");ii(e,s)}(this)},t}();function ri(t){return!!r(t)&&!!w.prototype.hasOwnProperty.call(t,"Xf")}function oi(t){t.zf=void 0,t.Hf=void 0}function hi(t,e){var i=t.Xf,s=i.Gf.Xd;if(!1===le(s))throw new b("Readable side is not in a state that permits enqueue");try{ae(s,e)}catch(t){throw ii(i,t),i.Gf.Od}var n=function(t){return!0!==re(t)}(s);n!==i.hf&&si(i,!0)}function ai(t,e){return C(t.zf(e),void 0,(function(e){throw ei(t.Xf,e),e}))}function ui(t){return new b("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function ci(t){return new b("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=Qe,t.CountQueuingStrategy=Je,t.ReadableStream=Ge,t.TransformStream=$e,t.WritableStream=ct,w.defineProperty(t,"__esModule",{value:!0})}))})),ql=lr((t=>{"use strict";function e(){const t=zl();return e=function(){return t},t}r(),w.defineProperty(t,"__esModule",{value:!0}),function(t,e){for(var i in e)w.defineProperty(t,i,{enumerable:!0,get:e[i]})}(t,{ByteLengthQueuingStrategy:function(){return e().ByteLengthQueuingStrategy},CountQueuingStrategy:function(){return e().CountQueuingStrategy},ReadableStream:function(){return e().ReadableStream},TransformStream:function(){return e().TransformStream},WritableStream:function(){return e().WritableStream}})})),Yl=lr(((t,e)=>{r(),function(i,s){"object"==typeof t&&typeof e<"u"?s(t):"function"==typeof define&&define.amd?define(["exports"],s):s((i=typeof globalThis<"u"?globalThis:i||self).millicast={})}(t,(function(t){"use strict";var e,i=w.defineProperty,n=w.defineProperties,r=w.getOwnPropertyDescriptors,o=w.getOwnPropertySymbols,a=w.prototype.hasOwnProperty,c=w.prototype.propertyIsEnumerable,l=(t,e,s)=>e in t?i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,d=(t,e)=>{for(var i in e||(e={}))a.call(e,i)&&l(t,i,e[i]);if(o)for(var i of o(e))c.call(e,i)&&l(t,i,e[i]);return t},v=(t,e)=>n(t,r(e)),y=(t,e)=>{var i={};for(var s in t)a.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&o)for(var s of o(t))e.indexOf(s)<0&&c.call(t,s)&&(i[s]=t[s]);return i},A=typeof globalThis<"u"?globalThis:typeof s<"u"?s:typeof global<"u"?global:typeof self<"u"?self:{};function T(t){return t&&t.__esModule&&w.prototype.hasOwnProperty.call(t,"default")?t.default:t}var k,E={exports:{}};k=E,function(t){var e,i={VERSION:"1.6.1"},s={},n=function(t,e){return function(){return e.apply(t,arguments)}},r=function(){var t,e,i=arguments,s=i[0];for(e=1;e<i.length;e++)for(t in i[e])!(t in s)&&i[e].hasOwnProperty(t)&&(s[t]=i[e][t]);return s},o=function(t,e){return{value:t,name:e}};i.TRACE=o(1,"TRACE"),i.DEBUG=o(2,"DEBUG"),i.INFO=o(3,"INFO"),i.TIME=o(4,"TIME"),i.WARN=o(5,"WARN"),i.ERROR=o(8,"ERROR"),i.OFF=o(99,"OFF");var h=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};h.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},trace:function(){this.invoke(i.TRACE,arguments)},debug:function(){this.invoke(i.DEBUG,arguments)},info:function(){this.invoke(i.INFO,arguments)},warn:function(){this.invoke(i.WARN,arguments)},error:function(){this.invoke(i.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(i.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(i.TIME,[t,"end"])},invoke:function(t,i){e&&this.enabledFor(t)&&e(i,r({level:t},this.context))}};var a,u=new h({filterLevel:i.OFF});(a=i).enabledFor=n(u,u.enabledFor),a.trace=n(u,u.trace),a.debug=n(u,u.debug),a.time=n(u,u.time),a.timeEnd=n(u,u.timeEnd),a.info=n(u,u.info),a.warn=n(u,u.warn),a.error=n(u,u.error),a.log=a.info,i.setHandler=function(t){e=t},i.setLevel=function(t){for(var e in u.setLevel(t),s)s.hasOwnProperty(e)&&s[e].setLevel(t)},i.getLevel=function(){return u.getLevel()},i.get=function(t){return s[t]||(s[t]=new h(r({name:t},u.context)))},i.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,e){e.name&&t.unshift("["+e.name+"]")};var e={},s=function(t,e){Function.prototype.apply.call(t,console,e)};return typeof console>"u"?function(){}:function(n,r){n=Array.prototype.slice.call(n);var o,h=console.log;r.level===i.TIME?(o=(r.name?"["+r.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(o):e[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):s(h,[o+": "+((new Date).getTime()-e[o])+"ms"])):(r.level===i.WARN&&console.warn?h=console.warn:r.level===i.ERROR&&console.error?h=console.error:r.level===i.INFO&&console.info?h=console.info:r.level===i.DEBUG&&console.debug?h=console.debug:r.level===i.TRACE&&console.trace&&(h=console.trace),t.formatter(n,r),s(h,n))}},i.useDefaults=function(t){i.setLevel(t&&t.defaultLevel||i.DEBUG),i.setHandler(i.createDefaultHandler(t))},i.setDefaults=i.useDefaults,k.exports?k.exports=i:(i.qf=t.Logger,i.noConflict=function(){return t.Logger=i.qf,i},t.Logger=i)}(A);const R=T(E.exports),I="0.3.2",P=(null==(e=null==s?void 0:s.navigator)?void 0:e.userAgent)||"No user agent available";let D="",N="",M="",L="",B="",O="",F="",V=0;const W=[];const U=t=>{D=""===D?t:D},G=t=>{N=""===N?t:N},H=t=>{M=""===M?t:M},Z=t=>{L=""===L?t:L},X=t=>{B=""===B?t:B},z=t=>{V=0===V?t:V},q=t=>{O=t},Y=t=>{F=""===F?t:F},K=t=>{60===W.length&&W.shift(),W.push(t)},Q=(t,e)=>{let i;void 0===t&&(t=60),void 0===e&&(e="JSON"),i=!Number.isInteger(t)||t>60||t<=0?60:t;const s={client:"@millicast/millicast-sdk",version:I,timestamp:(new Date).toISOString(),userAgent:P,clusterId:F,accountId:D,streamName:N,subscriberId:M,connection:O,stats:W.slice(-i),connectionDurationMs:(new Date).getTime()-V};return""!==B?s.feedId=B:""!==L&&(s.streamViewId=L),"CMCD"===e?function(t){function e(t,e){return{ts:_.round(e.timestamp)||"",ot:"audio"===t?"a":"v",bl:e.jitterBufferDelay||0,br:_.round(e.bitrateBitsPerSecond||0),pld:e.packetsLostDeltaPerSecond||0,j:e.jitter||0,mtp:e.packetRate||0,mid:e.mid||"",mimeType:e.mimeType||""}}return t.stats=t.stats.reduce(((t,i)=>{const s=0!==i.audio.inbounds.length?i.audio.inbounds.map((t=>e("audio",t))):i.audio.outbounds.map((t=>e("audio",t))),n=0!==i.video.inbounds.length?i.video.inbounds.map((t=>e("video",t))):i.video.outbounds.map((t=>e("video",t)));return t.concat([...s,...n])}),[]),t}(s):s};R.useDefaults({defaultLevel:R.TRACE});const J=["TRACE","DEBUG","INFO","WARN","ERROR"],tt=(t,e)=>{t.unshift("[".concat(e.name||"Global","] ").concat((new Date).toISOString()," - ").concat(e.level.name," -"))},et=(t,e)=>e?t.value>=ot[e].value:t.value>=rt.value,it=R.createDefaultHandler({formatter:tt});R.setHandler(((t,e)=>{((t,e)=>{t=(t=Array.prototype.slice.call(t)).map((t=>"object"==typeof t?JSON.stringify(t):t)),tt(t,e),0!==st?(nt.push(t.join(" ")),nt.length>=st&&(nt=nt.slice(-st))):nt=[]})(t,e),et(e.level,e.name)&&it(t,e);for(const{handler:i,level:s}of ht)e.level.value>=s.value&&i(t,e)}));let st=1e4,nt=[],rt=R.OFF;const ot={},ht=[],at=v(d({},R),{enabledFor:et,getHistory:()=>nt,getHistoryMaxSize:()=>st,setHistoryMaxSize:t=>{st=t},setLevel:t=>{rt=t;for(const e in ot)ot[e]=t},getLevel:()=>rt,get:t=>{ot[t]||(ot[t]=rt);const e=R.get(t);return e.setLevel=e=>{ot[t]=e},e.getLevel=()=>ot[t],e},setHandler:(t,e)=>{ht.push({handler:t,level:e})},diagnose:t=>{let e;void 0===t&&(t={});const i={statsCount:60,historySize:1e3,minLogLevel:"TRACE",statsFormat:"JSON"};"number"==typeof t?(i.statsCount=t,e=i):e=d(d({},i),t);const{statsCount:s,historySize:n,minLogLevel:r,statsFormat:o}=e,h=Q(s,o),a=at.getHistory();if(!Number.isInteger(n)||n<=0)throw new g("Invalid Argument Exception : historySize must be a positive integer.");if(!J.includes(r.toUpperCase()))throw new g('Invalid Argument Exception : the minLogLevel parameter only excepts "trace", "debug", "info", "warn", and "error" as arguments.');if(J.includes(r.toUpperCase())){const t=J.slice(J.indexOf(r.toUpperCase())),e=a.filter((e=>t.some((t=>e.includes(t)))));h.history=e.slice(-n)}return h},JSON:"JSON",CMCD:"CMCD",VERSION:I});var ut,ct={exports:{}},lt="object"==typeof Reflect?Reflect:null,dt=lt&&"function"==typeof lt.apply?lt.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};ut=lt&&"function"==typeof lt.ownKeys?lt.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var ft=Number.isNaN||function(t){return t!=t};function _t(){_t.init.call(this)}ct.exports=_t,ct.exports.once=function(t,e){return new Promise((function(i,s){function n(i){t.removeListener(e,r),s(i)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}Tt(t,e,r,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&Tt(t,"error",e,i)}(t,n,{once:!0})}))},_t.EventEmitter=_t,_t.prototype.Yf=void 0,_t.prototype.Kf=0,_t.prototype.jf=void 0;var vt=10;function mt(t){if("function"!=typeof t)throw new b('The "listener" argument must be of type Function. Received type '+typeof t)}function gt(t){return void 0===t.jf?_t.defaultMaxListeners:t.jf}function pt(t,e,i,s){var n,r,o;if(mt(i),void 0===(r=t.Yf)?(r=t.Yf=w.create(null),t.Kf=0):(void 0!==r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t.Yf),o=r[e]),void 0===o)o=r[e]=i,++t.Kf;else if("function"==typeof o?o=r[e]=s?[i,o]:[o,i]:s?o.unshift(i):o.push(i),(n=gt(t))>0&&o.length>n&&!o.warned){o.warned=!0;var h=new g("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=o.length,function(t){console&&console.warn&&console.warn(t)}(h)}return t}function wt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function yt(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=wt.bind(s);return n.listener=i,s.wrapFn=n,n}function bt(t,e,i){var s=t.Yf;if(void 0===s)return[];var n=s[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):St(n,n.length)}function At(t){var e=this.Yf;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function St(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function Tt(t,e,i,s){if("function"==typeof t.on)s.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new b('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(r){s.once&&t.removeEventListener(e,n),i(r)}))}}w.defineProperty(_t,"defaultMaxListeners",{enumerable:!0,get:function(){return vt},set:function(t){if("number"!=typeof t||t<0||ft(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");vt=t}}),_t.init=function(){(void 0===this.Yf||this.Yf===w.getPrototypeOf(this).Yf)&&(this.Yf=w.create(null),this.Kf=0),this.jf=this.jf||void 0},_t.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||ft(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.jf=t,this},_t.prototype.getMaxListeners=function(){return gt(this)},_t.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var s="error"===t,n=this.Yf;if(void 0!==n)s=s&&void 0===n.error;else if(!s)return!1;if(s){var r;if(e.length>0&&(r=e[0]),r instanceof g)throw r;var o=new g("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var h=n[t];if(void 0===h)return!1;if("function"==typeof h)dt(h,this,e);else{var a=h.length,u=St(h,a);for(i=0;i<a;++i)dt(u[i],this,e)}return!0},_t.prototype.addListener=function(t,e){return pt(this,t,e,!1)},_t.prototype.on=_t.prototype.addListener,_t.prototype.prependListener=function(t,e){return pt(this,t,e,!0)},_t.prototype.once=function(t,e){return mt(e),this.on(t,yt(this,t,e)),this},_t.prototype.prependOnceListener=function(t,e){return mt(e),this.prependListener(t,yt(this,t,e)),this},_t.prototype.removeListener=function(t,e){var i,s,n,r,o;if(mt(e),void 0===(s=this.Yf))return this;if(void 0===(i=s[t]))return this;if(i===e||i.listener===e)0==--this.Kf?this.Yf=w.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){o=i[r].listener,n=r;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(s[t]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||e)}return this},_t.prototype.off=_t.prototype.removeListener,_t.prototype.removeAllListeners=function(t){var e,i,s;if(void 0===(i=this.Yf))return this;if(void 0===i.removeListener)return 0===arguments.length?(this.Yf=w.create(null),this.Kf=0):void 0!==i[t]&&(0==--this.Kf?this.Yf=w.create(null):delete i[t]),this;if(0===arguments.length){var n,r=w.keys(i);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Yf=w.create(null),this.Kf=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},_t.prototype.listeners=function(t){return bt(this,t,!0)},_t.prototype.rawListeners=function(t){return bt(this,t,!1)},_t.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):At.call(t,e)},_t.prototype.listenerCount=At,_t.prototype.eventNames=function(){return this.Kf>0?ut(this.Yf):[]};var kt=ct.exports;const xt=T(kt);var Rt={exports:{}};Rt.exports=Ct,Rt.exports.filter=function(t,e){var i=new It;return Ct(t,i,e),i};var It=kt.EventEmitter;function Ct(t,e,i){Array.isArray(i)||(i=[i]);var s=[];return i.forEach((function(i){var n=function(){var t=[].slice.call(arguments);t.unshift(i),e.emit.apply(e,t)};s.push(n),t.on(i,n)})),function(){i.forEach((function(e,i){t.removeListener(e,s[i])}))}}const Pt=T(Rt.exports);var Dt={exports:{}};!function(t,e){var i;self,i=()=>{return t={7:t=>{var e,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};e=i&&"function"==typeof i.ownKeys?i.ownKeys:w.getOwnPropertySymbols?function(t){return w.getOwnPropertyNames(t).concat(w.getOwnPropertySymbols(t))}:function(t){return w.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,e){return new Promise((function(i,s){function n(i){t.removeListener(e,r),s(i)}function r(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}var o,h;v(t,e,r,{once:!0}),"error"!==e&&(h=n,"function"==typeof(o=t).on&&v(o,"error",h,{once:!0}))}))},r.EventEmitter=r,r.prototype.Yf=void 0,r.prototype.Kf=0,r.prototype.jf=void 0;var o=10;function h(t){if("function"!=typeof t)throw new b('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t.jf?r.defaultMaxListeners:t.jf}function u(t,e,i,s){var n,r,o,u;if(h(i),void 0===(r=t.Yf)?(r=t.Yf=w.create(null),t.Kf=0):(void 0!==r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t.Yf),o=r[e]),void 0===o)o=r[e]=i,++t.Kf;else if("function"==typeof o?o=r[e]=s?[i,o]:[o,i]:s?o.unshift(i):o.push(i),(n=a(t))>0&&o.length>n&&!o.warned){o.warned=!0;var c=new g("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=o.length,u=c,console&&console.warn&&console.warn(u)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,i){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=c.bind(s);return n.listener=i,s.wrapFn=n,n}function d(t,e,i){var s=t.Yf;if(void 0===s)return[];var n=s[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):_(n,n.length)}function f(t){var e=this.Yf;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function _(t,e){for(var i=new Array(e),s=0;s<e;++s)i[s]=t[s];return i}function v(t,e,i,s){if("function"==typeof t.on)s.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new b('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(r){s.once&&t.removeEventListener(e,n),i(r)}))}}w.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),r.init=function(){void 0!==this.Yf&&this.Yf!==w.getPrototypeOf(this).Yf||(this.Yf=w.create(null),this.Kf=0),this.jf=this.jf||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.jf=t,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this.Yf;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof g)throw o;var h=new g("Unhandled error."+(o?" ("+o.message+")":""));throw h.context=o,h}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)s(a,this,e);else{var u=a.length,c=_(a,u);for(i=0;i<u;++i)s(c[i],this,e)}return!0},r.prototype.addListener=function(t,e){return u(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return u(this,t,e,!0)},r.prototype.once=function(t,e){return h(e),this.on(t,l(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,l(this,t,e)),this},r.prototype.removeListener=function(t,e){var i,s,n,r,o;if(h(e),void 0===(s=this.Yf))return this;if(void 0===(i=s[t]))return this;if(i===e||i.listener===e)0==--this.Kf?this.Yf=w.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){o=i[r].listener,n=r;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(s[t]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",t,o||e)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var e,i,s;if(void 0===(i=this.Yf))return this;if(void 0===i.removeListener)return 0===arguments.length?(this.Yf=w.create(null),this.Kf=0):void 0!==i[t]&&(0==--this.Kf?this.Yf=w.create(null):delete i[t]),this;if(0===arguments.length){var n,r=w.keys(i);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this.Yf=w.create(null),this.Kf=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},r.prototype.listenerCount=f,r.prototype.eventNames=function(){return this.Kf>0?e(this.Yf):[]}},586:function(t,e,i){var s,n;!function(r){var o,h={VERSION:"1.6.1"},a={},u=function(t,e){return function(){return e.apply(t,arguments)}},c=function(){var t,e,i=arguments,s=i[0];for(e=1;e<i.length;e++)for(t in i[e])!(t in s)&&i[e].hasOwnProperty(t)&&(s[t]=i[e][t]);return s},l=function(t,e){return{value:t,name:e}};h.TRACE=l(1,"TRACE"),h.DEBUG=l(2,"DEBUG"),h.INFO=l(3,"INFO"),h.TIME=l(4,"TIME"),h.WARN=l(5,"WARN"),h.ERROR=l(8,"ERROR"),h.OFF=l(99,"OFF");var d=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};d.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},trace:function(){this.invoke(h.TRACE,arguments)},debug:function(){this.invoke(h.DEBUG,arguments)},info:function(){this.invoke(h.INFO,arguments)},warn:function(){this.invoke(h.WARN,arguments)},error:function(){this.invoke(h.ERROR,arguments)},time:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&t.length>0&&this.invoke(h.TIME,[t,"end"])},invoke:function(t,e){o&&this.enabledFor(t)&&o(e,c({level:t},this.context))}};var f,_=new d({filterLevel:h.OFF});(f=h).enabledFor=u(_,_.enabledFor),f.trace=u(_,_.trace),f.debug=u(_,_.debug),f.time=u(_,_.time),f.timeEnd=u(_,_.timeEnd),f.info=u(_,_.info),f.warn=u(_,_.warn),f.error=u(_,_.error),f.log=f.info,h.setHandler=function(t){o=t},h.setLevel=function(t){for(var e in _.setLevel(t),a)a.hasOwnProperty(e)&&a[e].setLevel(t)},h.getLevel=function(){return _.getLevel()},h.get=function(t){return a[t]||(a[t]=new d(c({name:t},_.context)))},h.createDefaultHandler=function(t){(t=t||{}).formatter=t.formatter||function(t,e){e.name&&t.unshift("["+e.name+"]")};var e={},i=function(t,e){Function.prototype.apply.call(t,console,e)};return typeof console>"u"?function(){}:function(s,n){s=Array.prototype.slice.call(s);var r,o=console.log;n.level===h.TIME?(r=(n.name?"["+n.name+"] ":"")+s[0],"start"===s[1]?console.time?console.time(r):e[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):i(o,[r+": "+((new Date).getTime()-e[r])+"ms"])):(n.level===h.WARN&&console.warn?o=console.warn:n.level===h.ERROR&&console.error?o=console.error:n.level===h.INFO&&console.info?o=console.info:n.level===h.DEBUG&&console.debug?o=console.debug:n.level===h.TRACE&&console.trace&&(o=console.trace),t.formatter(s,n),i(o,s))}},h.useDefaults=function(t){h.setLevel(t&&t.defaultLevel||h.DEBUG),h.setHandler(h.createDefaultHandler(t))},h.setDefaults=h.useDefaults,void 0===(n="function"==typeof(s=h)?s.call(e,i,e,t):s)||(t.exports=n)}()},156:function(t,e,i){var s=this&&this.Qf||(w.create?function(t,e,i,s){void 0===s&&(s=i);var n=w.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),w.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),n=this&&this.Jf||function(t,e){for(var i in t)"default"===i||w.prototype.hasOwnProperty.call(e,i)||s(e,t,i)},r=this&&this.$f||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var o=i(586);w.defineProperty(e,"Logger",{enumerable:!0,get:function(){return r(o).default}}),n(i(284),e),n(i(280),e),n(i(738),e),n(i(767),e)},738:(t,e)=>{var i,s;w.defineProperty(e,"__esModule",{value:!0}),e.QualityLimitationReason=void 0,(s=i||(e.QualityLimitationReason=i={}))[s.none=0]="none",s[s.cpu=1]="cpu",s[s.bandwidth=2]="bandwidth",s[s.other=3]="other"},280:(t,e)=>{w.defineProperty(e,"__esModule",{value:!0})},767:(t,e)=>{w.defineProperty(e,"__esModule",{value:!0})},185:(t,e)=>{w.defineProperty(e,"__esModule",{value:!0}),e.calculatePacketsLostRatio=e.calculateRate=e.getMediaKind=void 0,e.getMediaKind=t=>{let e=t.kind||t.mediaType;return["audio","video"].includes(e)||"inbound-rtp"!==t.type||(e=t.id.toLocaleLowerCase().includes("video")?"video":"audio"),e},e.calculateRate=(t,e,i,s)=>i&&s?(e-s)/((t-i)/1e3):0,e.calculatePacketsLostRatio=(t,e,i,s)=>0==e?0:(t-(null!=i?i:0))/(e-(null!=s?s:0))},284:function(t,e,i){var s,n,r,o,h,a,u,c,l,d,f,_,v,g,y,A,S=this&&this.t_||function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))},T=this&&this.e_||function(t,e,i,s,n){if("m"===s)throw new b("Private method is not writable");if("a"===s&&!n)throw new b("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new b("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},k=this&&this.i_||function(t,e,i,s){if("a"===i&&!s)throw new b("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new b("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},E=this&&this.$f||function(t){return t&&t.__esModule?t:{default:t}};w.defineProperty(e,"__esModule",{value:!0}),e.WebRTCStats=void 0;const x=i(7),R=E(i(586)),I=i(738),C=i(185);class P extends x.EventEmitter{constructor(t){super(),s.add(this),n.set(this,void 0),r.set(this,void 0),o.set(this,void 0),h.set(this,null),a.set(this,void 0),u.set(this,null),this.start=()=>{k(this,a,"f").info("WebRTC statistics collection is starting..."),T(this,u,null,"f"),T(this,h,p(k(this,c,"f"),k(this,r,"f")),"f")},this.stop=()=>{k(this,h,"f")&&(m(k(this,h,"f")),T(this,h,null,"f"),k(this,a,"f").info("WebRTC statistics collection has stopped."))},c.set(this,(()=>S(this,void 0,void 0,(function*(){let t,e;try{k(this,a,"f").trace("Requesting WebRTC statistics..."),t=yield k(this,n,"f").call(this),e=(new Date).toISOString()}catch(t){return k(this,a,"f").error("Problem collecting the WebRTC statistics.",t),void this.emit("error","Problem collecting the WebRTC statistics - ".concat(t))}const i=Array.from(t.values()),r={timestamp:e,input:{audio:[],video:[]},output:{audio:[],video:[]}};k(this,o,"f")&&(r.rawStats=t);for(let e=0;e<w.keys(i).length;e++){const n=i[e];switch(n.type){case"outbound-rtp":const e=n,i=(0,C.getMediaKind)(e);"audio"===i?yield k(this,s,"m",f).call(this,t,e,r):"video"===i&&(yield k(this,s,"m",_).call(this,t,e,r));break;case"inbound-rtp":const o=n;let h=(0,C.getMediaKind)(o);"audio"===h?yield k(this,s,"m",g).call(this,t,o,r):"video"===h&&(yield k(this,s,"m",y).call(this,t,o,r));break;case"candidate-pair":const a=n;a.nominated&&k(this,s,"m",A).call(this,a,r)}}T(this,u,r,"f"),this.emit("stats",r)})))),T(this,a,R.default.get("WebRTCStats"),"f"),T(this,n,t.getStats,"f"),T(this,r,t.getStatsInterval||1e3,"f"),T(this,o,!!t.includeRawStats,"f")}}e.WebRTCStats=P,n=new WeakMap,r=new WeakMap,o=new WeakMap,h=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,s=new WeakSet,l=function(t,e){if(e){const i=t.get(e);if(i)return{mimeType:i.mimeType}}return{}},d=function(t,e,i){return S(this,void 0,void 0,(function*(){var n,r,o,h;const a=(0,C.calculateRate)(e.timestamp,e.bytesSent,null==i?void 0:i.timestamp,null==i?void 0:i.totalBytesSent),u=(0,C.calculateRate)(e.timestamp,e.packetsSent,null==i?void 0:i.timestamp,null==i?void 0:i.totalPacketsSent),c=k(this,s,"m",l).call(this,t,e.codecId);return w.assign({id:e.id,timestamp:e.timestamp,mid:e.mid,totalBytesSent:e.bytesSent,bytesSentDelta:e.bytesSent-(null!==(n=null==i?void 0:i.totalBytesSent)&&void 0!==n?n:0),totalPacketsSent:e.packetsSent,packetsSentDelta:e.packetsSent-(null!==(r=null==i?void 0:i.totalPacketsSent)&&void 0!==r?r:0),bitrate:a,packetRate:u,targetBitrate:e.targetBitrate,retransmittedPacketsSent:e.retransmittedPacketsSent,retransmittedPacketsSentDelta:e.retransmittedPacketsSent-(null!==(o=null==i?void 0:i.retransmittedPacketsSent)&&void 0!==o?o:0),retransmittedBytesSent:e.retransmittedBytesSent,retransmittedBytesSentDelta:e.retransmittedBytesSent-(null!==(h=null==i?void 0:i.retransmittedBytesSent)&&void 0!==h?h:0)},c)}))},f=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.output.audio.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",d).call(this,t,e,r),h=w.assign({},o);i.output.audio.push(h)}))},_=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.output.video.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",d).call(this,t,e,r);let h=I.QualityLimitationReason.none;e.qualityLimitationReason&&(h=e.qualityLimitationReason);const a=w.assign(w.assign({},o),{frameWidth:e.frameWidth,frameHeight:e.frameHeight,framesPerSecond:e.framesPerSecond,framesSent:e.framesSent,qualityLimitationReason:h,qualityLimitationDurations:e.qualityLimitationDurations});i.output.video.push(a)}))},v=function(t,e,i){return S(this,void 0,void 0,(function*(){var n,r;const o=(0,C.calculateRate)(e.timestamp,e.bytesReceived,null==i?void 0:i.timestamp,null==i?void 0:i.totalBytesReceived),h=(0,C.calculateRate)(e.timestamp,e.packetsReceived,null==i?void 0:i.timestamp,null==i?void 0:i.totalPacketsReceived),a=(0,C.calculatePacketsLostRatio)(e.packetsReceived,e.packetsLost,null==i?void 0:i.totalPacketsReceived,null==i?void 0:i.totalPacketsLost),u=(null!==(n=e.packetsLost)&&void 0!==n?n:0)-(null!==(r=null==i?void 0:i.totalPacketsLost)&&void 0!==r?r:0),c=k(this,s,"m",l).call(this,t,e.codecId);return w.assign({id:e.id,timestamp:e.timestamp,mid:e.mid,trackIdentifier:e.trackIdentifier,jitter:e.jitter,jitterBufferDelay:e.jitterBufferDelay,jitterBufferEmittedCount:e.jitterBufferEmittedCount,totalBytesReceived:e.bytesReceived,totalPacketsReceived:e.packetsReceived,totalPacketsLost:e.packetsLost,bitrate:o,packetRate:h,packetLossRatio:a,packetLossDelta:u},c)}))},g=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.input.audio.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",v).call(this,t,e,r);i.input.audio.push(o)}))},y=function(t,e,i){return S(this,void 0,void 0,(function*(){var n;const r=null===(n=k(this,u,"f"))||void 0===n?void 0:n.input.video.find((t=>t.id===e.id));if(r&&e.timestamp-r.timestamp<=0)return;const o=yield k(this,s,"m",v).call(this,t,e,r),h=w.assign(w.assign({},o),{keyFramesDecoded:e.keyFramesDecoded,frameHeight:e.frameHeight,frameWidth:e.frameWidth,framesDecoded:e.framesDecoded,framesDropped:e.framesDropped,framesPerSecond:e.framesPerSecond,framesReceived:e.framesReceived});i.input.video.push(h)}))},A=function(t,e){e.totalRoundTripTime=t.totalRoundTripTime,e.currentRoundTripTime=t.currentRoundTripTime,e.responsesReceived=t.responsesReceived,e.availableOutgoingBitrate=t.availableOutgoingBitrate,e.availableIncomingBitrate=t.availableIncomingBitrate}}},e={},function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}(156);var t,e},t.exports=i()}(Dt);var Nt=Dt.exports;const Mt=at.get("PeerConnectionStats"),Lt="stats";class Bt extends xt{init(t){if(this.initialized)return void Mt.warn("PeerConnectionStats.init() has already been called. Automatic initialization occurs when the PeerConnectionStats object is constructed.");Mt.info("Initializing peer connection stats");const e=this.peer;try{this.collection=new Nt.WebRTCStats({getStatsInterval:t,getStats:()=>e.getStats(),includeRawStats:!0}),this.collection.on("stats",(t=>{const e=(t=>{const e=t,{input:i,output:s,rawStats:n}=e,r=y(e,["input","output","rawStats"]);return v(d({},r),{audio:{inbounds:t.input.audio.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=y(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.audio.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=y(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},video:{inbounds:t.input.video.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=y(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)})),outbounds:t.output.video.map((t=>{var e=t,{packetLossRatio:i,packetLossDelta:s,bitrate:n}=e,r=y(e,["packetLossRatio","packetLossDelta","bitrate"]);return d({packetsLostRatioPerSecond:i,packetsLostDeltaPerSecond:s,bitrateBitsPerSecond:8*n,bitrate:n},r)}))},raw:t.rawStats})})(t);K(e),this.emit(Lt,e)})),this.collection.start(),this.initialized=!0}catch(t){Mt.error(t)}}parseStats(t){return Mt.warn("The parseStats method is deprecated and will be removed in future releases."),null}stop(){Mt.info("Stopping peer connection stats"),this.collection.stop()}constructor(t,e={statsIntervalMs:1e3,autoInitStats:!0}){super(),this.peer=t,this.collection=null,this.initialized=!1,e.autoInitStats&&this.init(e.statsIntervalMs)}}var Ot={},Ft={},Vt={},Wt={exports:{}},Ut=Wt.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return null!=t.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return null!=t.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return null!=t.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=null!=t.raddr?" raddr %s rport %d":"%v%v",e+=null!=t.tcptype?" tcptype %s":"%v",null!=t.generation&&(e+=" generation %d"),e+=null!=t["network-id"]?" network-id %d":"%v",e+=null!=t["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return null!=t.attribute&&(e+=" %s",null!=t.value&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return null!=t.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(null!=t.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=null!=t.id?"id=%s %s":"%v%s",e+=null!=t.mediaClockValue?"=%s":"",e+=null!=t.rateNumerator?" rate=%s":"",e+=null!=t.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};w.keys(Ut).forEach((function(t){Ut[t].forEach((function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")}))}));var Gt=Wt.exports;!function(t){var e=function(t){return String(Number(t))===t?Number(t):t},i=function(t,i,s){var n=t.name&&t.names;t.push&&!i[t.push]?i[t.push]=[]:n&&!i[t.name]&&(i[t.name]={});var r=t.push?{}:n?i[t.name]:i;(function(t,i,s,n){if(n&&!s)i[n]=e(t[1]);else for(var r=0;r<s.length;r+=1)null!=t[r+1]&&(i[s[r]]=e(t[r+1]))})(s.match(t.reg),r,t.names,t.name),t.push&&i[t.push].push(r)},s=Gt,n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(t){var e={},r=[],o=e;return t.split(/(\r\n|\r|\n)/).filter(n).forEach((function(t){var e=t[0],n=t.slice(2);"m"===e&&(r.push({rtp:[],fmtp:[]}),o=r[r.length-1]);for(var h=0;h<(s[e]||[]).length;h+=1){var a=s[e][h];if(a.reg.test(n))return i(a,o,n)}})),e.media=r,e};var r=function(t,i){var s=i.split(/=(.+)/,2);return 2===s.length?t[s[0]]=e(s[1]):1===s.length&&i.length>1&&(t[s[0]]=void 0),t};t.parseParams=function(t){return t.split(/;\s?/).reduce(r,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(t){return t.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(t){for(var i=[],s=t.split(" ").map(e),n=0;n<s.length;n+=3)i.push({component:s[n],ip:s[n+1],port:s[n+2]});return i},t.parseImageAttributes=function(t){return t.split(" ").map((function(t){return t.substring(1,t.length-1).split(",").reduce(r,{})}))},t.parseSimulcastStreamList=function(t){return t.split(";").map((function(t){return t.split(",").map((function(t){var i,s=!1;return"~"!==t[0]?i=e(t):(i=e(t.substring(1,t.length)),s=!0),{scid:i,paused:s}}))}))}}(Vt);var Ht=Gt,Zt=/%[sdv%]/g,Xt=function(t){var e=1,i=arguments,s=i.length;return t.replace(Zt,(function(t){if(e>=s)return t;var n=i[e];switch(e+=1,t){case"%%":return"%";case"%s":return String(n);case"%d":return Number(n);case"%v":return""}}))},zt=function(t,e,i){var s=[t+"="+(e.format instanceof Function?e.format(e.push?i:i[e.name]):e.format)];if(e.names)for(var n=0;n<e.names.length;n+=1){var r=e.names[n];e.name?s.push(i[e.name][r]):s.push(i[e.names[n]])}else s.push(i[e.name]);return Xt.apply(null,s)},qt=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Yt=["i","c","b","a"],Kt=Vt,jt=function(t,e){e=e||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach((function(t){null==t.payloads&&(t.payloads="")}));var i=e.outerOrder||qt,s=e.innerOrder||Yt,n=[];return i.forEach((function(e){Ht[e].forEach((function(i){i.name in t&&null!=t[i.name]?n.push(zt(e,i,t)):i.push in t&&null!=t[i.push]&&t[i.push].forEach((function(t){n.push(zt(e,i,t))}))}))})),t.media.forEach((function(t){n.push(zt("m",Ht.m[0],t)),s.forEach((function(e){Ht[e].forEach((function(i){i.name in t&&null!=t[i.name]?n.push(zt(e,i,t)):i.push in t&&null!=t[i.push]&&t[i.push].forEach((function(t){n.push(zt(e,i,t))}))}))}))})),n.join("\r\n")+"\r\n"};Ft.write=jt,Ft.parse=Kt.parse,Ft.parseParams=Kt.parseParams,Ft.parseFmtpConfig=Kt.parseFmtpConfig,Ft.parsePayloads=Kt.parsePayloads,Ft.parseRemoteCandidates=Kt.parseRemoteCandidates,Ft.parseImageAttributes=Kt.parseImageAttributes,Ft.parseSimulcastStreamList=Kt.parseSimulcastStreamList;let Qt=class t{equals(t){return t.foundation===this.foundation&&t.componentId===this.componentId&&t.transport===this.transport&&t.priority===this.priority&&t.address===this.address&&t.port===this.port&&t.type===this.type&&t.relAddr===this.relAddr&&t.relPort===this.relPort}clone(){return new t(this.foundation,this.componentId,this.transport,this.priority,this.address,this.port,this.type,this.relAddr,this.relPort)}plain(){const t={foundation:this.foundation,componentId:this.componentId,transport:this.transport,priority:this.priority,address:this.address,port:this.port,type:this.type};return this.relAddr&&(t.relAddr=this.relAddr),this.relPort&&(t.relPort=this.relPort),t}getFoundation(){return this.foundation}getComponentId(){return this.componentId}getTransport(){return this.transport}getPriority(){return this.priority}getAddress(){return this.address}getPort(){return this.port}getType(){return this.type}getRelAddr(){return this.relAddr}getRelPort(){return this.relPort}constructor(t,e,i,s,n,r,o,h,a){this.foundation=t,this.componentId=e,this.transport=i,this.priority=s,this.address=n,this.port=r,this.type=o,this.relAddr=h,this.relPort=a}};Qt.expand=function(t){return"CandidateInfo"===t.constructor.name?t:new Qt(t.foundation,t.componentId,t.transport,t.priority,t.address,t.port,t.type,t.relAddr,t.relPort)},Qt.clone=function(t){return"CandidateInfo"===t.constructor.name?t.clone():Qt.expand(t)};var Jt=Qt;let $t=class t{clone(){return new t(this.id,this.params)}plain(){return this.params.length?{id:this.id,params:this.params}:{id:this.id}}getId(){return this.id}getParams(){return this.params}constructor(t,e){this.id=t,this.params=e||[]}};$t.expand=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t:new $t(t.id,t.params)},$t.clone=function(t){return"RTCPFeedbackInfo"===t.constructor.name?t.clone():$t.expand(t)};var te=$t;const ee=te;let ie=class t{clone(){const e=new t(this.codec,this.type,this.params);this.hasRTX()&&e.setRTX(this.getRTX());for(const t of this.rtcpfbs)e.addRTCPFeedback(t.clone());return this.hasChannels()&&e.setChannels(this.getChannels()),e}plain(){const t={codec:this.codec,type:this.type};this.rtx&&(t.rtx=this.rtx),this.channels&&(t.channels=this.channels),w.keys(this.params).length&&(t.params=this.params);for(const e of this.rtcpfbs)t.rtcpfbs||(t.rtcpfbs=[]),t.rtcpfbs.push(e.plain());return t}setRTX(t){this.rtx=t}getType(){return this.type}setType(t){this.type=t}getCodec(){return this.codec}getParams(){return this.params}addParams(t){for(const e in t)this.params[e]=t[e]}addParam(t,e){this.params[t]=e}hasParam(t){return w.hasOwnProperty.call(this.params,t)}getParam(t,e){if(void 0===e&&(e=void 0),this.hasParam(t))return this.params[t];if(void 0===e)throw new g("param ".concat(t," not found and no default value provided"));return""+e}hasRTX(){return this.rtx}getRTX(){return this.rtx}hasChannels(){return this.channels}getChannels(){return this.channels}setChannels(t){this.channels=t}addRTCPFeedback(t){this.rtcpfbs.add(t)}getRTCPFeedbacks(){return this.rtcpfbs}constructor(t,e,i){this.codec=t,this.type=e,this.params={},this.rtcpfbs=new Set,i&&this.addParams(i)}};ie.expand=function(t){if("CodecInfo"===t.constructor.name)return t;const e=new ie(t.codec,t.type,t.params);t.rtx&&e.setRTX(t.rtx),t.channels&&e.setChannels(t.channels);for(const i of t.rtcpfbs||[]){const t=ee.expand(i);e.addRTCPFeedback(t)}return e},ie.clone=function(t){return"CodecInfo"===t.constructor.name?t.clone():ie.expand(t)},ie.MapFromNames=function(t,e,i){var s;const n=new Map;let r=96;for(const o of t){let t;const h=o.split(";"),a=h.shift().toLowerCase().trim();t="pcmu"===a?0:"pcma"===a?8:++r;const u=new ie(a,t);"opus"===a?u.setChannels(2):"multiopus"===a&&u.setChannels(6),e&&"ulpfec"!==a&&"flexfec-03"!==a&&"red"!==a&&u.setRTX(++r);for(const t of i||[])u.addRTCPFeedback(new ee(t.id,t.params));for(const t of h){let e=t.split("=");u.addParam(e[0].trim(),null===(s=e[1])||void 0===s?void 0:s.trim())}n.set(t,u)}return n};var se=ie;var ne=function t(){var e=this;if(!(this instanceof t))return new(Function.prototype.bind.apply(t,[null].concat(Array.prototype.slice.call(arguments))));Array.from(arguments).forEach((function(t){e[t]=f("s_"+t)}))};const re=ne("ACTIVE","PASSIVE","ACTPASS","INACTIVE");re.byValue=function(t){switch(t){case re.ACTIVE:case re.PASSIVE:case re.ACTPASS:case re.INACTIVE:return t}return re[t.toUpperCase()]},re.toString=function(t){switch(t){case re.ACTIVE:return"active";case re.PASSIVE:return"passive";case re.ACTPASS:return"actpass";case re.INACTIVE:return"inactive"}},re.reverse=function(t,e){switch(t){case re.ACTIVE:return re.PASSIVE;case re.PASSIVE:return re.ACTIVE;case re.ACTPASS:return e?re.ACTIVE:re.PASSIVE;case re.INACTIVE:return re.INACTIVE}};var oe=re;const he=oe;let ae=class t{clone(){return new t(this.setup,this.hash,this.fingerprint)}plain(){return{setup:he.toString(this.setup),hash:this.hash,fingerprint:this.fingerprint}}getFingerprint(){return this.fingerprint}getHash(){return this.hash}getSetup(){return this.setup}setSetup(t){this.setup=t}constructor(t,e,i){this.setup=t,this.hash=e,this.fingerprint=i}};ae.expand=function(t){return"DTLSInfo"===t.constructor.name?t:new ae(t.setup?he.byValue(t.setup):he.ACTPASS,t.hash,t.fingerprint)},ae.clone=function(t){return"DTLSInfo"===t.constructor.name?t.clone():ae.expand(t)};var ue=ae;let ce=class t{clone(){return new t(this.tag,this.suite,this.keyParams,this.sessionParams)}plain(){return{tag:this.tag,suite:this.suite,keyParams:this.keyParams,sessionParams:this.sessionParams}}getSessionParams(){return this.sessionParams}getKeyParams(){return this.keyParams}getSuite(){return this.suite}getTag(){return this.tag}constructor(t,e,i,s){this.tag=t,this.suite=e,this.keyParams=i,this.sessionParams=s}};ce.expand=function(t){return"CryptoInfo"===t.constructor.name?t:new ce(t.tag,t.suite,t.keyParams,t.sessionParams)},ce.clone=function(t){return"CryptoInfo"===t.constructor.name?t.clone():ce.expand(t)};for(var le=ce,de={exports:{}},fe={exports:{}},_e={},ve={byteLength:function(t){var e=be(t),i=e[0],s=e[1];return 3*(i+s)/4-s},toByteArray:function(t){var e,i,s=be(t),n=s[0],r=s[1],o=new pe(function(t,e,i){return 3*(e+i)/4-i}(0,n,r)),h=0,a=r>0?n-4:n;for(i=0;i<a;i+=4)e=ge[t.charCodeAt(i)]<<18|ge[t.charCodeAt(i+1)]<<12|ge[t.charCodeAt(i+2)]<<6|ge[t.charCodeAt(i+3)],o[h++]=e>>16&255,o[h++]=e>>8&255,o[h++]=255&e;return 2===r&&(e=ge[t.charCodeAt(i)]<<2|ge[t.charCodeAt(i+1)]>>4,o[h++]=255&e),1===r&&(e=ge[t.charCodeAt(i)]<<10|ge[t.charCodeAt(i+1)]<<4|ge[t.charCodeAt(i+2)]>>2,o[h++]=e>>8&255,o[h++]=255&e),o},fromByteArray:function(t){for(var e,i=t.length,s=i%3,n=[],r=16383,o=0,h=i-s;o<h;o+=r)n.push(Se(t,o,o+r>h?h:o+r));return 1===s?(e=t[i-1],n.push(me[e>>2]+me[e<<4&63]+"==")):2===s&&(e=(t[i-2]<<8)+t[i-1],n.push(me[e>>10]+me[e>>4&63]+me[e<<2&63]+"=")),n.join("")}},me=[],ge=[],pe=typeof j<"u"?j:Array,we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ye=0;ye<64;++ye)me[ye]=we[ye],ge[we.charCodeAt(ye)]=ye;function be(t){var e=t.length;if(e%4>0)throw new g("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function Ae(t){return me[t>>18&63]+me[t>>12&63]+me[t>>6&63]+me[63&t]}function Se(t,e,i){for(var s,n=[],r=e;r<i;r+=3)s=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),n.push(Ae(s));return n.join("")}ge[45]=62,ge[95]=63;var Te={read:function(t,e,i,s,n){var r,o,h=8*n-s-1,a=(1<<h)-1,u=a>>1,c=-7,l=i?n-1:0,d=i?-1:1,f=t[e+l];for(l+=d,r=f&(1<<-c)-1,f>>=-c,c+=h;c>0;r=256*r+t[e+l],l+=d,c-=8);for(o=r&(1<<-c)-1,r>>=-c,c+=s;c>0;o=256*o+t[e+l],l+=d,c-=8);if(0===r)r=1-u;else{if(r===a)return o?NaN:1/0*(f?-1:1);o+=_.pow(2,s),r-=u}return(f?-1:1)*o*_.pow(2,r-s)},write:function(t,e,i,s,n,r){var o,h,a,u=8*r-n-1,c=(1<<u)-1,l=c>>1,d=23===n?_.pow(2,-24)-_.pow(2,-77):0,f=s?0:r-1,v=s?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=_.abs(e),S(e)||e===1/0?(h=S(e)?1:0,o=c):(o=_.floor(_.log(e)/_.LN2),e*(a=_.pow(2,-o))<1&&(o--,a*=2),(e+=o+l>=1?d/a:d*_.pow(2,1-l))*a>=2&&(o++,a/=2),o+l>=c?(h=0,o=c):o+l>=1?(h=(e*a-1)*_.pow(2,n),o+=l):(h=e*_.pow(2,l-1)*_.pow(2,n),o=0));n>=8;t[i+f]=255&h,f+=v,h/=256,n-=8);for(o=o<<n|h,u+=n;u>0;t[i+f]=255&o,f+=v,o/=256,u-=8);t[i+f-v]|=128*m}};(function(t){const e=ve,i=Te,s="function"==typeof Po&&"function"==typeof f?f("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},t.INSPECT_MAX_BYTES=50;const n=2147483647;function r(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new j(t);return w.setPrototypeOf(e,o.prototype),e}function o(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new b('The "string" argument must be of type string. Received type number');return u(t)}return h(t,e,i)}function h(t,e,i){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!o.isEncoding(e))throw new b("Unknown encoding: "+e);const i=0|v(t,e);let s=r(i);const n=s.write(t,e);return n!==i&&(s=s.slice(0,n)),s}(t,e);if(ArrayBuffer.isView(t))return function(t){if(tt(t,j)){const e=new j(t);return l(e.buffer,e.byteOffset,e.byteLength)}return c(t)}(t);if(null==t)throw new b("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(tt(t,ArrayBuffer)||t&&tt(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(tt(t,SharedArrayBuffer)||t&&tt(t.buffer,SharedArrayBuffer)))return l(t,e,i);if("number"==typeof t)throw new b('The "value" argument must not be of type number. Received type number');const s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return o.from(s,e,i);const n=function(t){if(o.isBuffer(t)){const e=0|d(t.length),i=r(e);return 0===i.length||t.copy(i,0,0,e),i}if(void 0!==t.length)return"number"!=typeof t.length||et(t.length)?r(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}(t);if(n)return n;if(typeof Po<"u"&&null!=Po.toPrimitive&&"function"==typeof t[Po.toPrimitive])return o.from(t[Po.toPrimitive]("string"),e,i);throw new b("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new b('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),r(t<0?0:0|d(t))}function c(t){const e=t.length<0?0:0|d(t.length),i=r(e);for(let s=0;s<e;s+=1)i[s]=255&t[s];return i}function l(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===e&&void 0===i?new j(t):void 0===i?new j(t,e):new j(t,e,i),w.setPrototypeOf(s,o.prototype),s}function d(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function v(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||tt(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new b('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===i)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return Q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return J(t).length;default:if(n)return s?-1:Q(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,i){let s=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0)||(i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,i);case"utf8":case"utf-8":return C(this,e,i);case"ascii":return D(this,e,i);case"latin1":case"binary":return N(this,e,i);case"base64":return I(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,i);default:if(s)throw new b("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function p(t,e,i){const s=t[e];t[e]=t[i],t[i]=s}function y(t,e,i,s,n){if(0===t.length)return-1;if("string"==typeof i?(s=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),et(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=o.from(e,s)),o.isBuffer(e))return 0===e.length?-1:A(t,e,i,s,n);if("number"==typeof e)return e&=255,"function"==typeof j.prototype.indexOf?n?j.prototype.indexOf.call(t,e,i):j.prototype.lastIndexOf.call(t,e,i):A(t,[e],i,s,n);throw new b("val must be string, number or Buffer")}function A(t,e,i,s,n){let r,o=1,h=t.length,a=e.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||e.length<2)return-1;o=2,h/=2,a/=2,i/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n){let s=-1;for(r=i;r<h;r++)if(u(t,r)===u(e,-1===s?0:r-s)){if(-1===s&&(s=r),r-s+1===a)return s*o}else-1!==s&&(r-=r-s),s=-1}else for(i+a>h&&(i=h-a),r=i;r>=0;r--){let i=!0;for(let s=0;s<a;s++)if(u(t,r+s)!==u(e,s)){i=!1;break}if(i)return r}return-1}function S(t,e,i,s){i=Number(i)||0;const n=t.length-i;s?(s=Number(s))>n&&(s=n):s=n;const r=e.length;let o;for(s>r/2&&(s=r/2),o=0;o<s;++o){const s=x(e.substr(2*o,2),16);if(et(s))return o;t[i+o]=s}return o}function T(t,e,i,s){return $(Q(e,t.length-i),t,i,s)}function k(t,e,i,s){return $(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,s)}function E(t,e,i,s){return $(J(e),t,i,s)}function R(t,e,i,s){return $(function(t,e){let i,s,n;const r=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),s=i>>8,n=i%256,r.push(n),r.push(s);return r}(e,t.length-i),t,i,s)}function I(t,i,s){return 0===i&&s===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(i,s))}function C(t,e,i){i=_.min(t.length,i);const s=[];let n=e;for(;n<i;){const e=t[n];let r=null,o=e>239?4:e>223?3:e>191?2:1;if(n+o<=i){let i,s,h,a;switch(o){case 1:e<128&&(r=e);break;case 2:i=t[n+1],128==(192&i)&&(a=(31&e)<<6|63&i,a>127&&(r=a));break;case 3:i=t[n+1],s=t[n+2],128==(192&i)&&128==(192&s)&&(a=(15&e)<<12|(63&i)<<6|63&s,a>2047&&(a<55296||a>57343)&&(r=a));break;case 4:i=t[n+1],s=t[n+2],h=t[n+3],128==(192&i)&&128==(192&s)&&128==(192&h)&&(a=(15&e)<<18|(63&i)<<12|(63&s)<<6|63&h,a>65535&&a<1114112&&(r=a))}}null===r?(r=65533,o=1):r>65535&&(r-=65536,s.push(r>>>10&1023|55296),r=56320|1023&r),s.push(r),n+=o}return function(t){const e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);let i="",s=0;for(;s<e;)i+=String.fromCharCode.apply(String,t.slice(s,s+=P));return i}(s)}t.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{const t=new j(1),e={foo:function(){return 42}};return w.setPrototypeOf(e,j.prototype),w.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),w.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),w.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,e,i){return h(t,e,i)},w.setPrototypeOf(o.prototype,j.prototype),w.setPrototypeOf(o,j),o.alloc=function(t,e,i){return function(t,e,i){return a(t),t<=0?r(t):void 0!==e?"string"==typeof i?r(t).fill(e,i):r(t).fill(e):r(t)}(t,e,i)},o.allocUnsafe=function(t){return u(t)},o.allocUnsafeSlow=function(t){return u(t)},o.isBuffer=function(t){return null!=t&&!0===t.n_&&t!==o.prototype},o.compare=function(t,e){if(tt(t,j)&&(t=o.from(t,t.offset,t.byteLength)),tt(e,j)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new b('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,s=e.length;for(let n=0,r=_.min(i,s);n<r;++n)if(t[n]!==e[n]){i=t[n],s=e[n];break}return i<s?-1:s<i?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new b('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const s=o.allocUnsafe(e);let n=0;for(i=0;i<t.length;++i){let e=t[i];if(tt(e,j))n+e.length>s.length?(o.isBuffer(e)||(e=o.from(e)),e.copy(s,n)):j.prototype.set.call(s,e,n);else{if(!o.isBuffer(e))throw new b('"list" argument must be an Array of Buffers');e.copy(s,n)}n+=e.length}return s},o.byteLength=v,o.prototype.n_=!0,o.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)p(this,e,e+1);return this},o.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},o.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},o.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?C(this,0,t):m.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new b("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){let e="";const i=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(t,e,i,s,n){if(tt(t,j)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new b('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),e<0||i>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&e>=i)return 0;if(s>=n)return-1;if(e>=i)return 1;if(this===t)return 0;let r=(n>>>=0)-(s>>>=0),h=(i>>>=0)-(e>>>=0);const a=_.min(r,h),u=this.slice(s,n),c=t.slice(e,i);for(let t=0;t<a;++t)if(u[t]!==c[t]){r=u[t],h=c[t];break}return r<h?-1:h<r?1:0},o.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},o.prototype.indexOf=function(t,e,i){return y(this,t,e,i,!0)},o.prototype.lastIndexOf=function(t,e,i){return y(this,t,e,i,!1)},o.prototype.write=function(t,e,i,s){if(void 0===e)s="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)s=e,i=this.length,e=0;else{if(!isFinite(e))throw new g("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===s&&(s="utf8")):(s=i,i=void 0)}const n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let r=!1;for(;;)switch(s){case"hex":return S(this,t,e,i);case"utf8":case"utf-8":return T(this,t,e,i);case"ascii":case"latin1":case"binary":return k(this,t,e,i);case"base64":return E(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,e,i);default:if(r)throw new b("Unknown encoding: "+s);s=(""+s).toLowerCase(),r=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.r_||this,0)}};const P=4096;function D(t,e,i){let s="";i=_.min(t.length,i);for(let n=e;n<i;++n)s+=String.fromCharCode(127&t[n]);return s}function N(t,e,i){let s="";i=_.min(t.length,i);for(let n=e;n<i;++n)s+=String.fromCharCode(t[n]);return s}function M(t,e,i){const s=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>s)&&(i=s);let n="";for(let s=e;s<i;++s)n+=it[t[s]];return n}function L(t,e,i){const s=t.slice(e,i);let n="";for(let t=0;t<s.length-1;t+=2)n+=String.fromCharCode(s[t]+256*s[t+1]);return n}function B(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,i,s,n,r){if(!o.isBuffer(t))throw new b('"buffer" argument must be a Buffer instance');if(e>n||e<r)throw new RangeError('"value" argument is out of bounds');if(i+s>t.length)throw new RangeError("Index out of range")}function F(t,e,i,s,n){z(e,s,n,t,i,7);let r=Number(e&BigInt(4294967295));t[i++]=r,r>>=8,t[i++]=r,r>>=8,t[i++]=r,r>>=8,t[i++]=r;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,i}function V(t,e,i,s,n){z(e,s,n,t,i,7);let r=Number(e&BigInt(4294967295));t[i+7]=r,r>>=8,t[i+6]=r,r>>=8,t[i+5]=r,r>>=8,t[i+4]=r;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=o,o>>=8,t[i+2]=o,o>>=8,t[i+1]=o,o>>=8,t[i]=o,i+8}function W(t,e,i,s,n,r){if(i+s>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function U(t,e,s,n,r){return e=+e,s>>>=0,r||W(t,0,s,4),i.write(t,e,s,n,23,4),s+4}function G(t,e,s,n,r){return e=+e,s>>>=0,r||W(t,0,s,8),i.write(t,e,s,n,52,8),s+8}o.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const s=this.subarray(t,e);return w.setPrototypeOf(s,o.prototype),s},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=this[t],n=1,r=0;for(;++r<e&&(n*=256);)s+=this[t+r]*n;return s},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=this[t+--e],n=1;for(;e>0&&(n*=256);)s+=this[t+--e]*n;return s},o.prototype.readUint8=o.prototype.readUInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readBigUInt64LE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(s)+(BigInt(n)<<BigInt(32))})),o.prototype.readBigUInt64BE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=e*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(s)<<BigInt(32))+BigInt(n)})),o.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=this[t],n=1,r=0;for(;++r<e&&(n*=256);)s+=this[t+r]*n;return n*=128,s>=n&&(s-=_.pow(2,8*e)),s},o.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let s=e,n=1,r=this[t+--s];for(;s>0&&(n*=256);)r+=this[t+--s]*n;return n*=128,r>=n&&(r-=_.pow(2,8*e)),r},o.prototype.readInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||B(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt16BE=function(t,e){t>>>=0,e||B(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readBigInt64LE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(s)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),o.prototype.readBigInt64BE=st((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&Y(t,this.length-8);const s=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(s)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)})),o.prototype.readFloatLE=function(t,e){return t>>>=0,e||B(t,4,this.length),i.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||B(t,4,this.length),i.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||B(t,8,this.length),i.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||B(t,8,this.length),i.read(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,e,i,s){if(t=+t,e>>>=0,i>>>=0,!s){O(this,t,e,i,_.pow(2,8*i)-1,0)}let n=1,r=0;for(this[e]=255&t;++r<i&&(n*=256);)this[e+r]=t/n&255;return e+i},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,e,i,s){if(t=+t,e>>>=0,i>>>=0,!s){O(this,t,e,i,_.pow(2,8*i)-1,0)}let n=i-1,r=1;for(this[e+n]=255&t;--n>=0&&(r*=256);)this[e+n]=t/r&255;return e+i},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeBigUInt64LE=st((function(t,e){return void 0===e&&(e=0),F(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=st((function(t,e){return void 0===e&&(e=0),V(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(t,e,i,s){if(t=+t,e>>>=0,!s){const s=_.pow(2,8*i-1);O(this,t,e,i,s-1,-s)}let n=0,r=1,o=0;for(this[e]=255&t;++n<i&&(r*=256);)t<0&&0===o&&0!==this[e+n-1]&&(o=1),this[e+n]=(t/r>>0)-o&255;return e+i},o.prototype.writeIntBE=function(t,e,i,s){if(t=+t,e>>>=0,!s){const s=_.pow(2,8*i-1);O(this,t,e,i,s-1,-s)}let n=i-1,r=1,o=0;for(this[e+n]=255&t;--n>=0&&(r*=256);)t<0&&0===o&&0!==this[e+n+1]&&(o=1),this[e+n]=(t/r>>0)-o&255;return e+i},o.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeBigInt64LE=st((function(t,e){return void 0===e&&(e=0),F(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=st((function(t,e){return void 0===e&&(e=0),V(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(t,e,i){return U(this,t,e,!0,i)},o.prototype.writeFloatBE=function(t,e,i){return U(this,t,e,!1,i)},o.prototype.writeDoubleLE=function(t,e,i){return G(this,t,e,!0,i)},o.prototype.writeDoubleBE=function(t,e,i){return G(this,t,e,!1,i)},o.prototype.copy=function(t,e,i,s){if(!o.isBuffer(t))throw new b("argument should be a Buffer");if(i||(i=0),!s&&0!==s&&(s=this.length),e>=t.length&&(e=t.length),e||(e=0),s>0&&s<i&&(s=i),s===i||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-i&&(s=t.length-e+i);const n=s-i;return this===t&&"function"==typeof j.prototype.copyWithin?this.copyWithin(e,i,s):j.prototype.set.call(t,this.subarray(i,s),e),n},o.prototype.fill=function(t,e,i,s){if("string"==typeof t){if("string"==typeof e?(s=e,e=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),void 0!==s&&"string"!=typeof s)throw new b("encoding must be a string");if("string"==typeof s&&!o.isEncoding(s))throw new b("Unknown encoding: "+s);if(1===t.length){const e=t.charCodeAt(0);("utf8"===s&&e<128||"latin1"===s)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{const r=o.isBuffer(t)?t:o.from(t,s),h=r.length;if(0===h)throw new b('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=r[n%h]}return this};const H={};function Z(t,e,i){H[t]=class extends i{get code(){return t}set code(t){w.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}constructor(){super(),w.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(t,"]"),this.stack,delete this.name}}}function X(t){let e="",i=t.length;const s="-"===t[0]?1:0;for(;i>=s+4;i-=3)e="_".concat(t.slice(i-3,i)).concat(e);return"".concat(t.slice(0,i)).concat(e)}function z(t,e,i,s,n,r){if(t>i||t<e){const i="bigint"==typeof e?"n":"";let s;throw s=0===e||e===BigInt(0)?">= 0".concat(i," and < 2").concat(i," ** ").concat(8*(r+1)).concat(i):">= -(2".concat(i," ** ").concat(8*(r+1)-1).concat(i,") and < 2 ** ")+"".concat(8*(r+1)-1).concat(i),new H.ERR_OUT_OF_RANGE("value",s,t)}!function(t,e,i){q(e,"offset"),(void 0===t[e]||void 0===t[e+i])&&Y(e,t.length-(i+1))}(s,n,r)}function q(t,e){if("number"!=typeof t)throw new H.ERR_INVALID_ARG_TYPE(e,"number",t)}function Y(t,e,i){throw _.floor(t)!==t?(q(t,i),new H.ERR_OUT_OF_RANGE("offset","an integer",t)):e<0?new H.ERR_BUFFER_OUT_OF_BOUNDS:new H.ERR_OUT_OF_RANGE("offset",">= 0 and <= ".concat(e),t)}Z("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),Z("ERR_INVALID_ARG_TYPE",(function(t,e){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(typeof e)}),b),Z("ERR_OUT_OF_RANGE",(function(t,e,i){let s='The value of "'.concat(t,'" is out of range.'),n=i;return Number.isInteger(i)&&_.abs(i)>2**32?n=X(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=X(n)),n+="n"),s+=" It must be ".concat(e,". Received ").concat(n),s}),RangeError);const K=/[^+/0-9A-Za-z-_]/g;function Q(t,e){let i;e=e||1/0;const s=t.length;let n=null;const r=[];for(let o=0;o<s;++o){if(i=t.charCodeAt(o),i>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(o+1===s){(e-=3)>-1&&r.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&r.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&r.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;r.push(i)}else if(i<2048){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new g("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function J(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,i,s){let n;for(n=0;n<s&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function tt(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function et(t){return t!=t}const it=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const s=16*i;for(let n=0;n<16;++n)e[s+n]=t[i]+t[n]}return e}();function st(t){return typeof BigInt>"u"?nt:t}function nt(){throw new g("BigInt not supported")}})(_e),function(t,e){var i=_e,s=i.Buffer;function n(t,e){for(var i in t)e[i]=t[i]}function r(t,e,i){return s(t,e,i)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=i:(n(i,e),e.Buffer=r),r.prototype=w.create(s.prototype),n(s,r),r.from=function(t,e,i){if("number"==typeof t)throw new b("Argument must not be a number");return s(t,e,i)},r.alloc=function(t,e,i){if("number"!=typeof t)throw new b("Argument must be a number");var n=s(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},r.allocUnsafe=function(t){if("number"!=typeof t)throw new b("Argument must be a number");return s(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new b("Argument must be a number");return i.SlowBuffer(t)}}(fe,fe.exports);var ke=65536;var Ee=fe.exports.Buffer,xe=A.crypto||A.msCrypto;xe&&xe.getRandomValues?de.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var i=Ee.allocUnsafe(t);if(t>0)if(t>ke)for(var s=0;s<t;s+=ke)xe.getRandomValues(i.slice(s,s+ke));else xe.getRandomValues(i);return"function"==typeof e?process.nextTick((function(){e(null,i)})):i}:de.exports=function(){throw new g("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")};const Re=de.exports;let Ie=class t{clone(){const e=new t(this.ufrag,this.pwd);return e.setLite(this.lite),e.setEndOfCandidates(this.endOfCandidates),e}plain(){const t={ufrag:this.ufrag,pwd:this.pwd};return this.lite&&(t.lite=this.lite),this.endOfCandidates&&(t.endOfCandidates=this.endOfCandidates),t}getUfrag(){return this.ufrag}getPwd(){return this.pwd}isLite(){return this.lite}setLite(t){this.lite=t}isEndOfCandidates(){return this.endOfCandidates}setEndOfCandidates(t){this.endOfCandidates=t}constructor(t,e){this.ufrag=t,this.pwd=e,this.lite=!1,this.endOfCandidates=!1}};Ie.generate=function(t){const e=new Ie,i=Re(8),s=Re(24);return e.ufrag=i.toString("hex"),e.pwd=s.toString("hex"),e.lite=t,e},Ie.expand=function(t){if("ICEInfo"===t.constructor.name)return t;const e=new Ie(t.ufrag,t.pwd);return e.setLite(t.lite),e.setEndOfCandidates(t.endOfCandidates),e},Ie.clone=function(t){return"ICEInfo"===t.constructor.name?t.clone():Ie.expand(t)};var Ce=Ie;const Pe=ne("SEND","RECV");Pe.byValue=function(t){return Pe[t.toUpperCase()]},Pe.toString=function(t){switch(t){case Pe.SEND:return"send";case Pe.RECV:return"recv"}},Pe.reverse=function(t){switch(t){case Pe.SEND:return Pe.RECV;case Pe.RECV:return Pe.SEND}};var De=Pe;const Ne=De;let Me=class t{clone(){var e=new t(this.id,this.direction);return e.setFormats(this.formats),e.setParams(this.params),e}plain(){var t={id:this.id,direction:Ne.toString(this.direction)};for(var[e,i]of(this.formats&&(t.formats=this.formats),this.params.entries()))t.params||(t.params={}),t.params[e]=i;return t}getId(){return this.id}getDirection(){return this.direction}setDirection(t){this.direction=t}getFormats(){return this.formats}setFormats(t){this.formats=[];for(let e=0;e<t.length;++e)this.formats.push(x(t[e]))}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,e){this.params.set(t,e)}constructor(t,e){this.id=t,this.direction=e,this.formats=[],this.params=new Map}};Me.expand=function(t){if("RIDInfo"===t.constructor.name)return t;const e=new Me(t.id,Ne.byValue(t.direction));for(const[i,s]of w.entries(t.params||{}))e.addParam(i,s);return t.formats&&e.setFormats(t.formats),e},Me.clone=function(t){return"RIDInfo"===t.constructor.name?t.clone():Me.expand(t)};var Le=Me;let Be=class t{clone(){return new t(this.id,this.paused)}plain(){return{id:this.id,paused:this.paused}}isPaused(){return this.paused}getId(){return this.id}constructor(t,e){this.paused=e,this.id=t}};Be.expand=function(t){return"SimulcastStreamInfo"===t.constructor.name?t:new Be(t.id,t.paused)},Be.clone=function(t){return"SimulcastStreamInfo"===t.constructor.name?t.clone():Be.expand(t)};var Oe=Be;const Fe=Oe,Ve=De;let We=class t{clone(){const e=new t;for(const t of this.send)e.addSimulcastAlternativeStreams(Ve.SEND,t.map((t=>t.clone())));for(const t of this.recv)e.addSimulcastAlternativeStreams(Ve.RECV,t.map((t=>t.clone())));return e}plain(){const t={send:[],recv:[]};for(const e of this.send)t.send.push(e.map((t=>t.plain())));for(const e of this.recv)t.recv.push(e.map((t=>t.plain())));return t}addSimulcastAlternativeStreams(t,e){return t===Ve.SEND?this.send.push(e):this.recv.push(e)}addSimulcastStream(t,e){return t===Ve.SEND?this.send.push([e]):this.recv.push([e])}getSimulcastStreams(t){return t===Ve.SEND?this.send:this.recv}constructor(){this.send=[],this.recv=[]}};We.expand=function(t){if("SimulcastInfo"===t.constructor.name)return t;const e=new We;for(const i of t.send||[])e.addSimulcastAlternativeStreams(Ve.SEND,i.map(Fe.expand));for(const i of t.recv||[])e.addSimulcastAlternativeStreams(Ve.RECV,i.map(Fe.expand));return e},We.clone=function(t){return"SimulcastInfo"===t.constructor.name?t.clone():We.expand(t)};var Ue=We;const Ge=ne("SENDRECV","SENDONLY","RECVONLY","INACTIVE");Ge.byValue=function(t){return Ge[t.toUpperCase()]},Ge.toString=function(t){switch(t){case Ge.SENDRECV:return"sendrecv";case Ge.SENDONLY:return"sendonly";case Ge.RECVONLY:return"recvonly";case Ge.INACTIVE:return"inactive"}},Ge.reverse=function(t){switch(t){case Ge.SENDRECV:return Ge.SENDRECV;case Ge.SENDONLY:return Ge.RECVONLY;case Ge.RECVONLY:return Ge.SENDONLY;case Ge.INACTIVE:return Ge.INACTIVE}};var He=Ge;let Ze=class t{clone(){return new t(this.port,this.maxMessageSize)}plain(){return{port:this.port,maxMessageSize:this.maxMessageSize}}getPort(){return this.port}getMaxMessageSize(){return this.maxMessageSize}constructor(t,e){this.port=t,this.maxMessageSize=e}};Ze.expand=function(t){return"DataChannelInfo"===t.constructor.name?t:new Ze(t.port,t.maxMessageSize)},Ze.clone=function(t){return"DataChannelInfo"===t.constructor.name?t.clone():Ze.expand(t)};var Xe=Ze;const ze=se,qe=Le,Ye=Ue,Ke=He,je=De,Qe=Xe;let Je=class t{clone(){const e=new t(this.id,this.type);e.setDirection(this.direction),e.setBitrate(this.bitrate);for(const t of this.codecs.values())e.addCodec(t.clone());for(const[t,i]of this.extensions.entries())e.addExtension(t,i);for(const t of this.rids.values())e.addRID(t.clone());return this.simulcast&&e.setSimulcast(this.simulcast.clone()),this.control&&e.setControl(this.control),this.dataChannel&&e.setDataChannel(this.dataChannel.clone()),e}plain(){const t={id:this.id,type:this.type,direction:Ke.toString(this.direction),codecs:[]};this.dataChannel&&(t.dataChannel=this.dataChannel.plain()),this.bitrate&&(t.bitrate=this.bitrate);for(const e of this.codecs.values())t.codecs.push(e.plain());for(const[e,i]of this.extensions.entries())t.extensions||(t.extensions={}),t.extensions[e]=i;for(const e of this.rids.values())t.rids||(t.rids=[]),t.rids.push(e.plain());return this.simulcast&&(t.simulcast=this.simulcast.plain()),this.control&&(t.control=this.control),t}getType(){return this.type}getId(){return this.id}setId(t){this.id=t}addExtension(t,e){this.extensions.set(t,e)}addRID(t){this.rids.set(t.getId(),t)}addCodec(t){this.codecs.set(t.getType(),t)}setCodecs(t){this.codecs=t}getCodecForType(t){return this.codecs.get(t)}getCodec(t){for(const e of this.codecs.values())if(e.getCodec().toLowerCase()===t.toLowerCase())return e;return null}hasCodec(t){return null!==this.getCodec(t)}getCodecs(){return this.codecs}hasRTX(){for(const t of this.codecs.values())if(t.hasRTX())return!0;return!1}getExtensions(){return this.extensions}getRIDs(){return this.rids}getRID(t){return this.rids.get(t)}getBitrate(){return this.bitrate}setBitrate(t){this.bitrate=t}getDirection(){return this.direction}setDirection(t){this.direction=t}hasControl(){return!!this.control}getControl(){return this.control}setControl(t){this.control=t}hasDataChannel(){return!!this.dataChannel}getDataChannel(){return this.dataChannel}setDataChannel(t){this.dataChannel=t}answer(e){const i=new t(this.id,this.type);if(e){i.setDirection(Ke.reverse(this.direction));const{codecs:t,dataChannel:s}=e;if(t){let s;s=Array.isArray(t)?ze.MapFromNames(t,e.rtx,e.rtcpfbs):t;for(let t of this.codecs.values())for(let e of s.values()){if(e.getCodec().toLowerCase()!==t.getCodec().toLowerCase()||"h264"===e.getCodec()&&e.hasParam("packetization-mode")&&e.getParam("packetization-mode")!=t.getParam("packetization-mode","0")||"h264"===e.getCodec()&&e.hasParam("profile-level-id")&&t.hasParam("profile-level-id")&&e.getParam("profile-level-id")!=t.getParam("profile-level-id")||"multiopus"===e.getCodec()&&e.hasParam("num_streams")&&t.hasParam("num_streams")&&e.getParam("num_streams")!=t.getParam("num_streams"))continue;const s=e.clone();s.setType(t.getType()),s.hasRTX()&&s.setRTX(t.getRTX()),t.hasChannels()&&s.setChannels(t.getChannels()),s.addParams(t.getParams()),i.addCodec(s);break}}const n=new Set(e.extensions);for(let[t,e]of this.extensions)n.has(e)&&i.addExtension(t,e);if(e.simulcast&&this.simulcast){const t=new Ye,e=this.simulcast.getSimulcastStreams(je.SEND);if(e)for(const i of e){const e=i.map((t=>t.clone()));t.addSimulcastAlternativeStreams(je.RECV,e)}const s=this.simulcast.getSimulcastStreams(je.RECV);if(s)for(const e of s){const i=e.map((t=>t.clone()));t.addSimulcastAlternativeStreams(je.SEND,i)}for(const t of this.rids.values()){const e=t.clone();e.setDirection(je.reverse(t.getDirection())),i.addRID(e)}i.setSimulcast(t)}if(s&&this.dataChannel){const t=new Qe(this.dataChannel.getPort(),s.maxMessageSize?s.maxMessageSize:this.dataChannel.getMaxMessageSize());i.setDataChannel(t)}}else i.setDirection(Ke.INACTIVE);return i}getSimulcast(){return this.simulcast}setSimulcast(t){this.simulcast=t}constructor(t,e){this.id=t,this.type=e,this.direction=Ke.SENDRECV,this.extensions=new Map,this.codecs=new Map,this.rids=new Map,this.simulcast=null,this.bitrate=0,this.control=null,this.dataChannel=null}};function $e(t){const e=t.toString();if(!/^\d+$/.test(e))throw new g("invalid integer ".concat(e));return x(e)}Je.create=function(t,e,i){!i&&"string"!=typeof e&&(i=e,e=t);const s=new Je(t,e);if(i){const{codecs:t}=i;t&&(Array.isArray(t)?s.setCodecs(ze.MapFromNames(t,i.rtx,i.rtcpfbs)):s.setCodecs(t))}else s.setDirection(Ke.INACTIVE);return s},Je.expand=function(t){if("MediaInfo"===t.constructor.name)return t;const e=new Je(t.id,t.type);if(t.direction&&e.setDirection(Ke.byValue(t.direction)),e.setBitrate(t.bitrate),t.dataChannel){const i=Qe.expand(t.dataChannel);i&&e.setDataChannel(i)}for(const[i,s]of w.entries(t.extensions))e.addExtension($e(i),s);for(const i of t.codecs){const t=ze.expand(i);t&&e.addCodec(t)}for(const i of t.rids||[]){const t=qe.expand(i);e.addRID(t)}return t.simulcast&&e.setSimulcast(Ye.expand(t.simulcast)),t.control&&e.setControl(t.control),e},Je.clone=function(t){return"MediaInfo"===t.constructor.name?t.clone():Je.expand(t)};var ti=Je;let ei=class t{clone(){return new t(this.semantics,this.ssrcs)}plain(){const t={semantics:this.semantics,ssrcs:[]};for(let e=0;e<this.ssrcs.length;++e)t.ssrcs.push(this.ssrcs[e]);return t}getSemantics(){return this.semantics}getSSRCs(){return this.ssrcs}constructor(t,e){this.semantics=t,this.ssrcs=[];for(let t=0;t<e.length;++t)this.ssrcs.push(x(e[t]))}};ei.expand=function(t){return"SourceGroupInfo"===t.constructor.name?t:new ei(t.semantics,t.ssrcs)},ei.clone=function(t){return"SourceGroupInfo"===t.constructor.name?t.clone():ei.expand(t)};var ii=ei;let si=class t{clone(){const e=new t(this.ssrc);return e.setCName(this.cname),e.setStreamId(this.streamId),e.setTrackId(this.trackId),e}plain(){const t={ssrc:this.ssrc};return this.cname&&(t.cname=this.cname),this.streamId&&(t.streamId=this.streamId),this.trackId&&(t.trackId=this.trackId),t}getCName(){return this.cname}setCName(t){this.cname=t}getStreamId(){return this.streamId}setStreamId(t){this.streamId=t}getTrackId(){return this.trackId}setTrackId(t){this.trackId=t}getSSRC(){return this.ssrc}constructor(t){this.ssrc=t}};si.expand=function(t){if("SourceInfo"===t.constructor.name)return t;const e=new si(t.ssrc);return e.setCName(t.cname),e.setStreamId(t.streamId),e.setTrackId(t.trackId),e},si.clone=function(t){return"SourceInfo"===t.constructor.name?t.clone():si.expand(t)};var ni=si;const ri=se;let oi=class t{clone(){var e=new t(this.id,this.paused);for(let t of this.codecs.values())e.addCodec(t.clone());return e.setParams(this.params),e}plain(){var t={id:this.id,paused:this.paused,codecs:{},params:{}};for(var[e,i]of this.codecs.entries())t.codecs[e]=i.plain();for(var[e,s]of this.params.entries())t.params[e]=s;return t}getId(){return this.id}getCodecs(){return this.codecs}addCodec(t){this.codecs.set(t.getType(),t)}getParams(){return this.params}setParams(t){this.params=new Map(t)}addParam(t,e){this.params.set(t,e)}isPaused(){return this.paused}constructor(t,e=!1){this.id=t,this.paused=e,this.codecs=new Map,this.params=new Map}};oi.expand=function(t){if("TrackEncodingInfo"===t.constructor.name)return t;const e=new oi(t.id,t.paused);for(const i of w.values(t.codecs||{}))e.addCodec(ri.expand(i));for(const[i,s]of w.entries(t.params||{}))e.addParam(i,s);return e},oi.clone=function(t){return"TrackEncodingInfo"===t.constructor.name?t.clone():oi.expand(t)};var hi=oi;const ai=ii,ui=hi;let ci=class t{clone(){const e=new t(this.media,this.id);this.mediaId&&e.setMediaId(this.mediaId);for(let t=0;t<this.ssrcs.length;++t)e.addSSRC(this.ssrcs[t]);for(let t=0;t<this.groups.length;++t)e.addSourceGroup(this.groups[t].clone());for(let t=0;t<this.encodings.length;++t){const i=[];for(let e=0;e<this.encodings[t].length;++e)i.push(this.encodings[t][e].clone());e.addAlternativeEncodings(i)}return e}plain(){const t={media:this.media,id:this.id,ssrcs:[]};this.mediaId&&(t.mediaId=this.mediaId);for(let e=0;e<this.ssrcs.length;++e)t.ssrcs.push(this.ssrcs[e]);for(let e=0;e<this.groups.length;++e)t.groups||(t.groups=[]),t.groups.push(this.groups[e].plain());for(let e=0;e<this.encodings.length;++e){const i=[];for(let t=0;t<this.encodings[e].length;++t)i.push(this.encodings[e][t].plain());i.length&&(t.encodings||(t.encodings=[]),t.encodings.push(i))}return t}getMedia(){return this.media}setMediaId(t){this.mediaId=t}getMediaId(){return this.mediaId}getId(){return this.id}addSSRC(t){this.ssrcs.push(t)}getSSRCs(){return this.ssrcs}addSourceGroup(t){this.groups.push(t)}getSourceGroup(t){for(const e of this.groups)if(e.getSemantics().toLowerCase()===t.toLowerCase())return e;return null}getSourceGroups(){return this.groups}getSourceGroupsForMediaSSRC(t){return this.groups.filter((e=>e.getSSRCs()[0]===t))}hasSourceGroup(t){for(const e of this.groups)if(e.getSemantics().toLowerCase()===t.toLowerCase())return!0;return!1}getEncodings(){return this.encodings}addEncoding(t){this.encodings.push([t])}addAlternativeEncodings(t){this.encodings.push(t)}setEncodings(t){this.encodings=t}getEncodingSources(){const t=[];if(this.encodings.length)for(const e of this.encodings)for(const i of e){const e={id:i.getId(),rid:i.getId()},s=i.getParams(),n=null==s?void 0:s.get("ssrc");if(void 0!==n){e.media=x(n);for(const t of this.getSourceGroupsForMediaSSRC(e.media))switch(t.getSemantics()){case"FID":e.rtx=t.getSSRCs()[1];break;case"FEC-FR":e.fec=t.getSSRCs()[1]}}t.push(e)}else if(this.hasSourceGroup("SIM")){const e=this.getSourceGroup("SIM").getSSRCs();this.getSourceGroups();for(const i of e){const e={id:String(i),media:i};for(const t of this.getSourceGroupsForMediaSSRC(e.media))switch(t.getSemantics()){case"FID":e.rtx=t.getSSRCs()[1];break;case"FEC-FR":e.fec=t.getSSRCs()[1]}t.push(e)}}else{const e={id:""};if(this.ssrcs.length){e.media=this.ssrcs[0];for(const t of this.getSourceGroupsForMediaSSRC(e.media))switch(t.getSemantics()){case"FID":e.rtx=t.getSSRCs()[1];break;case"FEC-FR":e.fec=t.getSSRCs()[1]}}t.push(e)}return t}constructor(t,e){this.media=t,this.id=e,this.ssrcs=[],this.groups=[],this.encodings=[]}};ci.expand=function(t){var e,i;if("TrackInfo"===t.constructor.name)return t;const s=new ci(t.media,t.id);if(t.mediaId&&s.setMediaId(t.mediaId),Array.isArray(t.ssrcs))for(const e of t.ssrcs)s.addSSRC(e);else if(void 0!==(null===(e=t.ssrcs)||void 0===e?void 0:e.media)){const e=t.ssrcs.media;if(s.addSSRC(e),void 0!==t.ssrcs.rtx){const i=t.ssrcs.rtx;s.addSSRC(i),s.addSourceGroup(new ai("FID",[e,i]))}if(void 0!==t.ssrcs.fec){const i=t.ssrcs.fec;s.addSSRC(i),s.addSourceGroup(new ai("FEC-FR",[e,i]))}}if(t.rid){const e=new ui(t.rid);void 0!==(null===(i=t.ssrcs)||void 0===i?void 0:i.media)&&e.addParam("ssrc",t.ssrcs.media),s.addAlternativeEncodings([e])}for(const e of t.groups||[])s.addSourceGroup(ai.expand(e));for(const e of t.encodings||[]){const t=[];for(const i of e)t.push(ui.expand(i));s.addAlternativeEncodings(t)}return s},ci.clone=function(t){return"TrackInfo"===t.constructor.name?t.clone():ci.expand(t)};var li=ci;const di=li;let fi=class t{clone(){const e=new t(this.id);for(const t of this.tracks.values())e.addTrack(t.clone());return e}plain(){const t={id:this.id,tracks:[]};for(const e of this.tracks.values())t.tracks.push(e.plain());return t}getId(){return this.id}addTrack(t){this.tracks.set(t.getId(),t)}removeTrack(t){return this.tracks.delete(t.getId())}removeTrackById(t){return this.tracks.delete(t)}getFirstTrack(t){for(let e of this.tracks.values())if(e.getMedia().toLowerCase()===t.toLowerCase())return e;return null}getTracks(){return this.tracks}removeAllTracks(){this.tracks.clear()}getTrack(t){return this.tracks.get(t)}constructor(t){this.id=t,this.tracks=new Map}};fi.expand=function(t){if("StreamInfo"===t.constructor.name)return t;const e=new fi(t.id);for(const i of t.tracks||[]){const t=di.expand(i);t&&e.addTrack(t)}return e},fi.clone=function(t){return"StreamInfo"===t.constructor.name?t.clone():fi.expand(t)};var _i=fi;const vi=Ft,mi=function(t){const e=new Intl.Collator(t,{sensitivity:"base"});return(t,i)=>0==e.compare(t,i)}("en-US"),gi=Jt,pi=se,wi=te,yi=ue,bi=le,Ai=Ce,Si=ti,Ti=oe,ki=He,Ei=De,xi=ii,Ri=ni,Ii=_i,Ci=li,Pi=hi,Di=Ue,Ni=Oe,Mi=Le,Li=Xe;let Bi=class t{clone(){const e=new t(this.version);for(const t of this.medias)e.addMedia(t.clone());for(const t of this.streams.values())e.addStream(t.clone());for(const t of this.candidates)e.addCandidate(t.clone());return e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.crypto&&e.setCrypto(this.crypto.clone()),e.setExtmapAllowMixed(this.extmapAllowMixed),e}plain(){const t={version:this.version,streams:[],medias:[],candidates:[]};for(const e of this.medias)t.medias.push(e.plain());for(const e of this.streams.values())t.streams.push(e.plain());for(const e of this.candidates)t.candidates.push(e.plain());return this.ice&&(t.ice=this.ice.plain()),this.dtls&&(t.dtls=this.dtls.plain()),this.crypto&&(t.crypto=this.crypto.plain()),this.extmapAllowMixed||(t.extmapAllowMixedNotSupported=!this.extmapAllowMixed),t}unify(){const e=new t(this.version);for(const t of this.medias)e.addMedia(t.clone());const i={audio:e.getMediasByType("audio"),video:e.getMediasByType("video")};for(const t of this.streams.values()){const s=t.clone();for(const t of s.getTracks().values()){let s=i[t.getMedia()].pop();s||(s=this.getMedia(t.getMedia()).clone(),s.setId(t.getId()),e.addMedia(s)),t.setMediaId(s.getId())}e.addStream(s)}for(const t of this.candidates)e.addCandidate(t.clone());return this.ice&&e.setICE(this.ice.clone()),this.dtls&&e.setDTLS(this.dtls.clone()),this.crypto&&e.setCrypto(this.crypto.clone()),e}setVersion(t){this.version=t}addMedia(t){this.medias.push(t)}getMedia(t){for(let e in this.medias){let i=this.medias[e];if(mi(i.getType(),t))return i}return null}getMediasByType(t){let e=[];for(let i in this.medias){let s=this.medias[i];mi(s.getType(),t)&&e.push(s)}return e}getMediaById(t){for(const e of this.medias)if(mi(e.getId(),t))return e;return null}replaceMedia(t){for(let e in this.medias)if(this.medias[e].getId()==t.getId())return this.medias[e]=t,!0;return!1}getMedias(){return this.medias}getVersion(){return this.version}getDTLS(){return this.dtls}setDTLS(t){this.dtls=t}hasCrypto(){return!!this.crypto}getCrypto(){return this.crypto}setCrypto(t){this.crypto=t}hasICE(){return!!this.ice}getICE(){return this.ice}setICE(t){this.ice=t}addCandidate(t){for(const e of this.candidates)if(e.equals(t))return;this.candidates.push(t)}addCandidates(t){for(const e of t)this.addCandidate(e)}getCandidates(){return this.candidates}getStream(t){return this.streams.get(t)}getStreams(){return this.streams}getFirstStream(){for(const t of this.streams.values())return t;return null}addStream(t){this.streams.set(t.getId(),t)}removeStream(t){return this.streams.delete(t.getId())}removeAllStreams(){this.streams.clear()}getTracksByMediaType(t){let e=[];for(const i of this.streams.values())for(const[s,n]of i.getTracks())mi(n.getMedia(),t)&&e.push(n);return e}getTrackByMediaId(t){for(const e of this.streams.values())for(const[i,s]of e.getTracks())if(s.getMediaId()==t)return s;return null}getStreamByMediaId(t){for(const e of this.streams.values())for(const[i,s]of e.getTracks())if(s.getMediaId()==t)return e;return null}getExtmapAllowMixed(){return this.extmapAllowMixed}setExtmapAllowMixed(t){this.extmapAllowMixed=t}answer(e){const i=new t;e.ice&&(e.ice instanceof Ai?i.setICE(e.ice.clone()):i.setICE(Ai.expand(e.ice))),e.dtls&&(e.dtls instanceof yi?i.setDTLS(e.dtls):i.setDTLS(yi.expand(e.dtls))),e.crypto&&(e.crypto instanceof bi?i.setCrypto(e.crypto):i.setCrypto(bi.expand(e.crypto)));for(let t=0;e.candidates&&t<e.candidates.length;++t)e.candidates[t]instanceof gi?i.addCandidate(e.candidates[t].clone()):i.addCandidate(gi.expand(e.candidates[t]));for(const t of this.medias){const s=e&&e.capabilities&&e.capabilities[t.getType()];i.addMedia(t.answer(s))}return i.setExtmapAllowMixed(this.extmapAllowMixed),i}toString(){let t={version:0,media:[]};t.version=0,t.origin={username:"-",sessionId:(new Date).getTime(),sessionVersion:this.version,netType:"IN",ipVer:4,address:"127.0.0.1"},t.name="semantic-sdp",t.connection={version:4,ip:"0.0.0.0"},t.timing={start:0,stop:0},this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),t.msidSemantic={semantic:"WMS",token:"*"},t.groups=[],this.extmapAllowMixed&&(t.extmapAllowMixed="extmap-allow-mixed");const e=[];for(const i of this.medias){let s={type:i.getType(),port:9,protocol:"",fmtp:[],rtp:[],rtcpFb:[],ext:[],bandwidth:[],candidates:[],ssrcGroups:[],ssrcs:[],rids:[]};s.direction=ki.toString(i.getDirection()),this.extmapAllowMixed&&(s.extmapAllowMixed="extmap-allow-mixed"),s.mid=i.getId(),e.push(i.getId()),i.hasControl()&&(s.control=i.getControl()),i.getBitrate()>0&&(s.bandwidth.push({type:"AS",limit:i.getBitrate()}),s.bandwidth.push({type:"TIAS",limit:1e3*i.getBitrate()}));let n=this.getCandidates();for(const t of n)s.candidates.push({foundation:t.getFoundation(),component:t.getComponentId(),transport:t.getTransport(),priority:t.getPriority(),ip:t.getAddress(),port:t.getPort(),type:t.getType(),raddr:t.getRelAddr(),rport:t.getRelPort()});if(this.getICE()&&(s.iceUfrag=this.getICE().getUfrag(),s.icePwd=this.getICE().getPwd()),mi("audio",i.getType())||mi("video",i.getType())){s.rtcpMux="rtcp-mux",s.rtcpRsize="rtcp-rsize",this.getDTLS()?(s.protocol="UDP/TLS/RTP/SAVPF",s.fingerprint={type:this.getDTLS().getHash(),hash:this.getDTLS().getFingerprint()},s.setup=Ti.toString(this.getDTLS().getSetup())):this.getCrypto()?(s.protocol="RTP/SAVPF",s.crypto=[{id:this.getCrypto().getTag(),suite:this.getCrypto().getSuite(),config:this.getCrypto().getKeyParams()}]):s.protocol="RTP/AVP";for(const t of i.getCodecs().values()){mi("video",i.getType())?s.rtp.push({payload:t.getType(),codec:t.getCodec().toUpperCase(),rate:9e4}):mi("opus",t.getCodec())||mi("multiopus",t.getCodec())?s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:48e3,encoding:t.getChannels()}):s.rtp.push({payload:t.getType(),codec:t.getCodec(),rate:8e3});for(const e of t.getRTCPFeedbacks())s.rtcpFb.push({payload:t.getType(),type:e.getId(),subtype:e.getParams().join(" ")});t.hasRTX()&&(s.rtp.push({payload:t.getRTX(),codec:"rtx",rate:9e4}),s.fmtp.push({payload:t.getRTX(),config:"apt="+t.getType()}));const e=t.getParams();if(w.keys(e).length){const i={payload:t.getType(),config:""};for(const t in e)i.config.length&&(i.config+=";"),w.hasOwnProperty.call(e,t)?i.config+=t+"="+e[t]:i.config+=t;s.fmtp.push(i)}}const t=[];for(const e of s.rtp)t.push(e.payload);s.payloads=t.join(" ");for(let[t,e]of i.getExtensions().entries())s.ext.push({value:t,uri:e});for(let t of i.getRIDs().values()){let e={id:t.getId(),direction:Ei.toString(t.getDirection()),params:""};t.getFormats().length&&(e.params="pt="+t.getFormats().join(","));for(let[i,s]of t.getParams().entries())e.params+=(e.params.length?";":"")+i+"="+s;s.rids.push(e)}const e=i.getSimulcast();if(e){let t=1;s.simulcast={};const i=e.getSimulcastStreams(Ei.SEND),n=e.getSimulcastStreams(Ei.RECV);if(i&&i.length){let e="";for(const t of i){let i="";for(const e of t)i+=(i.length?",":"")+(e.isPaused()?"~":"")+e.getId();e+=(e.length?";":"")+i}s.simulcast["dir"+t]="send",s.simulcast["list"+t]=e,t++}if(n&&n.length){let e="";for(const t of n){let i="";for(const e of t)i+=(i.length?",":"")+(e.isPaused()?"~":"")+e.getId();e+=(e.length?";":"")+i}s.simulcast["dir"+t]="recv",s.simulcast["list"+t]=e,t++}}}else if(i.hasDataChannel()){s.protocol="UDP/DTLS/SCTP",s.payloads="webrtc-datachannel";const t=i.getDataChannel();s.sctpPort=t.getPort(),s.maxMessageSize=t.getMaxMessageSize()}t.media.push(s)}for(let e of this.streams.values())for(let i of e.getTracks().values())for(let s in t.media){let n=t.media[s];if(i.getMediaId()){if(i.getMediaId()==n.mid){let t=i.getSourceGroups();for(let e in t){let i=t[e];n.ssrcGroups.push({semantics:i.getSemantics(),ssrcs:i.getSSRCs().join(" ")})}let s=i.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:e.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:e.getId()+" "+i.getId()});n.msid=e.getId()+" "+i.getId();break}}else if(mi(n.type,i.getMedia())){let t=i.getSourceGroups();for(let e in t){let i=t[e];n.ssrcGroups.push({semantics:i.getSemantics(),ssrcs:i.getSSRCs().join(" ")})}let s=i.getSSRCs();for(let t in s)n.ssrcs.push({id:s[t],attribute:"cname",value:e.getId()}),n.ssrcs.push({id:s[t],attribute:"msid",value:e.getId()+" "+i.getId()});break}}const i={type:"BUNDLE",mids:e.join(" ")};return t.groups.push(i),vi.write(t)}toIceFragmentString(){let t={version:0,media:[],candidates:[]};this.hasICE()&&this.getICE().isLite()&&(t.icelite="ice-lite"),this.getICE()&&(t.iceUfrag=this.getICE().getUfrag(),t.icePwd=this.getICE().getPwd());for(const e of this.getCandidates())t.candidates.push({foundation:e.getFoundation(),component:e.getComponentId(),transport:e.getTransport(),priority:e.getPriority(),ip:e.getAddress(),port:e.getPort(),type:e.getType(),raddr:e.getRelAddr(),rport:e.getRelPort()});return vi.write(t).slice(10)}constructor(t){this.version=t||1,this.streams=new Map,this.medias=new Array,this.candidates=new Array,this.ice=null,this.dtls=null,this.crypto=null,this.extmapAllowMixed=!0}};Bi.create=function(t){var e;const i=new Bi;if(t.streams)for(const e of t.streams)i.addStream(Ii.expand(e));t.ice&&(t.ice instanceof Ai?i.setICE(t.ice.clone()):i.setICE(Ai.expand(t.ice))),t.dtls&&(t.dtls instanceof yi?i.setDTLS(t.dtls):i.setDTLS(yi.expand(t.dtls))),t.crypto&&(t.crypto instanceof bi?i.setCrypto(t.crypto):i.setCrypto(bi.expand(t.crypto)));for(const e of t.candidates||[])e instanceof gi?i.addCandidate(e.clone()):i.addCandidate(gi.expand(e));let s=96,n=1,r=0;for(const[o,h]of w.entries(t.capabilities||{}))if(t.unified&&null!==(e=t.streams)&&void 0!==e&&e.length)for(const t of i.getTracksByMediaType(o)){const e=Si.create(t.getMediaId(),o,h);for(const[t,i]of e.getCodecs())i.getType()>=96&&i.setType(s++),i.getRTX()&&i.setRTX(s++);if(h.extensions)for(let t of h.extensions)15===n&&n++,e.addExtension(n++,t);i.addMedia(e)}else{const e=Si.create(t.unified?String(r++):o,o,h);for(const[t,i]of e.getCodecs())i.getType()>=96&&i.setType(s++),i.getRTX()&&i.setRTX(s++);if(h.extensions)for(let t of h.extensions)15===n&&n++,e.addExtension(n++,t);i.addMedia(e)}return i},Bi.expand=function(t){if("SDPInfo"===t.constructor.name)return t;const e=new Bi(t.version);for(const i of t.medias||[]){const t=Si.expand(i);t&&e.addMedia(t)}for(const i of t.streams||[]){const t=Ii.expand(i);t&&e.addStream(t)}for(const i of t.candidates||[]){const t=gi.expand(i);t&&e.addCandidate(t)}return t.ice&&e.setICE(Ai.expand(t.ice)),t.dtls&&e.setDTLS(yi.expand(t.dtls)),t.crypto&&e.setCrypto(bi.expand(t.crypto)),t.extmapAllowMixedNotSupported&&(this.extmapAllowMixed=!t.extmapAllowMixedNotSupported),e},Bi.clone=function(t){return"SDPInfo"===t.constructor.name?t.clone():Bi.expand(t)},Bi.process=function(t){return Bi.parse(t)},Bi.parse=function(t){const e=vi.parse(t),i=new Bi;if(i.setVersion(e.version),e.iceUfrag&&e.icePwd){const t=String(e.iceUfrag),s=String(e.icePwd),n=new Ai(t,s);n.setLite("ice-lite"==e.icelite),n.setEndOfCandidates("end-of-candidates"==e.endOfCandidates),i.setICE(n)}for(let t in e.media){const s=e.media[t],n=s.type,r=s.mid?s.mid.toString():t,o=new Si(r,n);if(s.iceUfrag&&s.icePwd){const t=String(s.iceUfrag),n=String(s.icePwd),r=new Ai(t,n);r.setLite("ice-lite"==e.icelite),r.setEndOfCandidates("end-of-candidates"==s.endOfCandidates),i.setICE(r)}for(let t=0;s.candidates&&t<s.candidates.length;++t){const e=s.candidates[t],n=new gi(e.foundation,e.component,e.transport,e.priority,e.ip,e.port,e.type,e.raddr,e.rport);i.addCandidate(n)}const h=s.fingerprint||e.fingerprint;if(h){const t=h.type,e=h.hash;let n=Ti.ACTPASS;s.setup&&(n=Ti.byValue(s.setup)),i.setDTLS(new yi(n,t,e))}if(s.crypto){const t=s.crypto[0];i.setCrypto(new bi(t.id,t.suite,t.config,t.sessionConfig))}let a=ki.SENDRECV;s.direction&&(a=ki.byValue(s.direction),o.setDirection(a)),s.control&&o.setControl(s.control),i.setExtmapAllowMixed("extmap-allow-mixed"==s.extmapAllowMixed||"extmap-allow-mixed"==e.extmapAllowMixed);const u=new Map;for(let t in s.rtp){const e=s.rtp[t],i=e.payload,n=e.codec;if("RED"===n.toUpperCase()||"ULPFEC"===n.toUpperCase())continue;let r={};for(let t in s.fmtp){const e=s.fmtp[t];if(e.payload===i){const t=e.config.split(";");for(let e in t){const i=t[e].split("="),s=i[0].trim(),n=i.splice(1).join("=").trim();r[s]=n}}}if("RTX"===n.toUpperCase())u.set(x(r.apt),i);else{const t=new pi(n,i,r);e.encoding>1&&t.setChannels(e.encoding),o.addCodec(t)}}for(let t of u.entries()){const e=o.getCodecForType(t[0]);e&&e.setRTX(t[1])}for(let t=0;s.rtcpFb&&t<s.rtcpFb.length;++t){const e=o.getCodecForType(s.rtcpFb[t].payload);if(e){const i=s.rtcpFb[t].type,n=s.rtcpFb[t].subtype?s.rtcpFb[t].subtype.split(" "):null;e.addRTCPFeedback(new wi(i,n))}}const c=s.ext;for(let t in c){const e=c[t];o.addExtension(e.value,e.uri)}const l=s.rids;for(let t in l){const e=l[t],i=new Mi(e.id,Ei.byValue(e.direction));let s=[];const n=new Map;if(e.params){const t=vi.parseParams(e.params);for(let e in t)"pt"===e?s=t[e].split(","):n.set(e,t[e]);i.setFormats(s),i.setParams(n)}o.addRID(i)}const d=[];if(s.simulcast){const t=new Di;if(s.simulcast.dir1){const e=Ei.byValue(s.simulcast.dir1),i=vi.parseSimulcastStreamList(s.simulcast.list1);for(let s=0;s<i.length;++s){const n=[];for(let t=0;t<i[s].length;++t)n.push(new Ni(i[s][t].scid,i[s][t].paused));t.addSimulcastAlternativeStreams(e,n)}}if(s.simulcast.dir2){const e=Ei.byValue(s.simulcast.dir2),i=vi.parseSimulcastStreamList(s.simulcast.list2);for(let s=0;s<i.length;++s){const n=[];for(let t=0;t<i[s].length;++t)n.push(new Ni(i[s][t].scid,i[s][t].paused));t.addSimulcastAlternativeStreams(e,n)}}for(let e of t.getSimulcastStreams(Ei.SEND)){const t=[];for(let i=0;i<e.length;i++){const s=new Pi(e[i].getId(),e[i].isPaused()),n=o.getRID(s.getId());if(n){const e=n.getFormats();for(let t=0;e&&t<e.length;++t){const i=o.getCodecForType(e[t]);i&&s.addCodec(i)}s.setParams(n.getParams()),t.push(s)}}t.length&&d.push(t)}o.setSimulcast(t)}const f=new Map;if(s.ssrcs)for(let t in s.ssrcs){let e=s.ssrcs[t],o=e.id,h=e.attribute,a=e.value,u=f.get(o);if(u||(u=new Ri(o),f.set(u.getSSRC(),u)),mi("cname",h))u.setCName(a);else if(mi("msid",h)){let t=a.split(" "),e=t[0],s=t[1];u.setStreamId(e),u.setTrackId(s);let h=i.getStream(e);h||(h=new Ii(e),i.addStream(h));let c=h.getTrack(s);c||(c=new Ci(n,s),c.setMediaId(r),c.setEncodings(d),h.addTrack(c)),c.addSSRC(o)}}if(s.msid){let t=s.msid.split(" "),e=t[0],o=t[1],h=i.getStream(e);h||(h=new Ii(e),i.addStream(h));let a=h.getTrack(o);a||(a=new Ci(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a));for(let[t,i]of f.entries())i.getStreamId()||(i.setStreamId(e),i.setTrackId(o),a.addSSRC(t))}for(let[t,e]of f.entries())if(!e.getStreamId()){let s=e.getCName(),o=r;e.setStreamId(s),e.setTrackId(o);let h=i.getStream(s);h||(h=new Ii(s),i.addStream(h));let a=h.getTrack(o);a||(a=new Ci(n,o),a.setMediaId(r),a.setEncodings(d),h.addTrack(a)),a.addSSRC(t)}if(s.ssrcGroups)for(let t in s.ssrcGroups){let e=s.ssrcGroups[t],n=e.ssrcs.split(" "),r=new xi(e.semantics,n),o=f.get(x(n[0]));o&&i.getStream(o.getStreamId()).getTrack(o.getTrackId()).addSourceGroup(r)}if("application"==s.type&&"webrtc-datachannel"==s.payloads){const t=new Li(s.sctpPort,s.maxMessageSize);o.setDataChannel(t)}i.addMedia(o)}return i};var Oi=Bi;w.defineProperty(Ot,"__esModule",{value:!0});var Fi=Ot.SDPInfo=Oi;Ot.CandidateInfo=Jt,Ot.CodecInfo=se,Ot.DTLSInfo=ue,Ot.CryptoInfo=le,Ot.ICEInfo=Ce;var Vi=Ot.MediaInfo=ti;Ot.Setup=oe,Ot.SourceGroupInfo=ii,Ot.SourceInfo=ni,Ot.StreamInfo=_i,Ot.TrackInfo=li,Ot.RTCPFeedbackInfo=te,Ot.TrackEncodingInfo=hi,Ot.RIDInfo=Le,Ot.SimulcastInfo=Ue,Ot.SimulcastStreamInfo=Oe,Ot.DataChannelInfo=Xe;var Wi=Ot.Direction=He,Ui={exports:{}};!function(t,e){!function(i,s){var n="function",r="undefined",o="object",h="string",a="major",u="model",c="name",l="type",d="vendor",f="version",_="architecture",v="console",m="mobile",g="tablet",p="smarttv",w="wearable",y="embedded",b="Amazon",A="Apple",S="ASUS",T="BlackBerry",k="Browser",E="Chrome",x="Firefox",R="Google",I="Huawei",C="LG",P="Microsoft",D="Motorola",N="Opera",M="Samsung",L="Sharp",B="Sony",O="Xiaomi",F="Zebra",V="Facebook",W="Chromium OS",U="Mac OS",G=" Browser",H=function(t){for(var e={},i=0;i<t.length;i++)e[t[i].toUpperCase()]=t[i];return e},Z=function(t,e){return typeof t===h&&-1!==X(e).indexOf(X(t))},X=function(t){return t.toLowerCase()},z=function(t,e){if(typeof t===h)return t=t.replace(/^\s\s*/,""),typeof e===r?t:t.substring(0,500)},q=function(t,e){for(var i,r,h,a,u,c,l=0;l<e.length&&!u;){var d=e[l],f=e[l+1];for(i=r=0;i<d.length&&!u&&d[i];)if(u=d[i++].exec(t))for(h=0;h<f.length;h++)c=u[++r],typeof(a=f[h])===o&&a.length>0?2===a.length?typeof a[1]==n?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==n||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):s:this[a[0]]=c?a[1].call(this,c,a[2]):s:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):s):this[a]=c||s;l+=2}},Y=function(t,e){for(var i in e)if(typeof e[i]===o&&e[i].length>0){for(var n=0;n<e[i].length;n++)if(Z(e[i][n],t))return"?"===i?s:i}else if(Z(e[i],t))return"?"===i?s:i;return e.hasOwnProperty("*")?e["*"]:t},K={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},j={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,f],[/opios[\/ ]+([\w\.]+)/i],[f,[c,N+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[c,N+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[c,N]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[c,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[c,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[c,"UC"+k]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[c,"Smart Lenovo "+k]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+k],f],[/\bfocus\/([\w\.]+)/i],[f,[c,x+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[c,N+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[c,N+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI "+k]],[/fxios\/([-\w\.]+)/i],[f,[c,x]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360"+G]],[/\b(qq)\/([\w\.]+)/i],[[c,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1"+G],f],[/samsungbrowser\/([\w\.]+)/i],[f,[c,M+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[c,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,V],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[c,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,E+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[c,"Android "+k]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[f,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],f],[/(wolvic)\/([\w\.]+)/i],[c,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[c,x+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[c,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,X]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,"",X]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,X]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[d,M],[l,g]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[d,M],[l,m]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[d,A],[l,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[d,A],[l,g]],[/(macintosh);/i],[u,[d,A]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[d,L],[l,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[d,I],[l,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[d,I],[l,m]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[d,O],[l,m]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[d,O],[l,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[d,"OPPO"],[l,m]],[/\b(opd2\d{3}a?) bui/i],[u,[d,"OPPO"],[l,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[d,"Vivo"],[l,m]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[d,"Realme"],[l,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[d,D],[l,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[d,D],[l,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[d,C],[l,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[d,C],[l,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[d,"Lenovo"],[l,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[d,"Nokia"],[l,m]],[/(pixel c)\b/i],[u,[d,R],[l,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[d,R],[l,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,B],[l,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[d,B],[l,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[d,"OnePlus"],[l,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[d,b],[l,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[d,b],[l,m]],[/(playbook);[-\w\),; ]+(rim)/i],[u,d,[l,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[d,T],[l,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[d,S],[l,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[d,S],[l,m]],[/(nexus 9)/i],[u,[d,"HTC"],[l,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[u,/_/g," "],[l,m]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[d,"TCL"],[l,g]],[/(itel) ((\w+))/i],[[d,X],u,[l,Y,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[d,"Acer"],[l,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[d,"Meizu"],[l,m]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[d,"Ulefone"],[l,m]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[d,"Nothing"],[l,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,u,[l,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,u,[l,g]],[/(surface duo)/i],[u,[d,P],[l,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[d,"Fairphone"],[l,m]],[/(u304aa)/i],[u,[d,"AT&T"],[l,m]],[/\bsie-(\w*)/i],[u,[d,"Siemens"],[l,m]],[/\b(rct\w+) b/i],[u,[d,"RCA"],[l,g]],[/\b(venue[\d ]{2,7}) b/i],[u,[d,"Dell"],[l,g]],[/\b(q(?:mv|ta)\w+) b/i],[u,[d,"Verizon"],[l,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[d,"Barnes & Noble"],[l,g]],[/\b(tm\d{3}\w+) b/i],[u,[d,"NuVision"],[l,g]],[/\b(k88) b/i],[u,[d,"ZTE"],[l,g]],[/\b(nx\d{3}j) b/i],[u,[d,"ZTE"],[l,m]],[/\b(gen\d{3}) b.+49h/i],[u,[d,"Swiss"],[l,m]],[/\b(zur\d{3}) b/i],[u,[d,"Swiss"],[l,g]],[/\b((zeki)?tb.*\b) b/i],[u,[d,"Zeki"],[l,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],u,[l,g]],[/\b(ns-?\w{0,9}) b/i],[u,[d,"Insignia"],[l,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[d,"NextBook"],[l,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],u,[l,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],u,[l,m]],[/\b(ph-1) /i],[u,[d,"Essential"],[l,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[d,"Envizen"],[l,g]],[/\b(trio[-\w\. ]+) b/i],[u,[d,"MachSpeed"],[l,g]],[/\btu_(1491) b/i],[u,[d,"Rotor"],[l,g]],[/(shield[\w ]+) b/i],[u,[d,"Nvidia"],[l,g]],[/(sprint) (\w+)/i],[d,u,[l,m]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,P],[l,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[d,F],[l,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[d,F],[l,m]],[/smart-tv.+(samsung)/i],[d,[l,p]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,M],[l,p]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,C],[l,p]],[/(apple) ?tv/i],[d,[u,A+" TV"],[l,p]],[/crkey/i],[[u,E+"cast"],[d,R],[l,p]],[/droid.+aft(\w+)( bui|\))/i],[u,[d,b],[l,p]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[d,L],[l,p]],[/(bravia[\w ]+)( bui|\))/i],[u,[d,B],[l,p]],[/(mitv-\w{5}) bui/i],[u,[d,O],[l,p]],[/Hbbtv.*(technisat) (.*);/i],[d,u,[l,p]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,z],[u,z],[l,p]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,p]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,u,[l,v]],[/droid.+; (shield) bui/i],[u,[d,"Nvidia"],[l,v]],[/(playstation [345portablevi]+)/i],[u,[d,B],[l,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[d,P],[l,v]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[d,M],[l,w]],[/((pebble))app/i],[d,u,[l,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[d,A],[l,w]],[/droid.+; (glass) \d/i],[u,[d,R],[l,w]],[/droid.+; (wt63?0{2,3})\)/i],[u,[d,F],[l,w]],[/(quest( \d| pro)?)/i],[u,[d,V],[l,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[l,y]],[/(aeobc)\b/i],[u,[d,b],[l,y]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[l,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[l,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,m]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[f,Y,K]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,Y,K],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,U],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,f],[/\(bb(10);/i],[f,[c,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[c,x+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[c,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,W],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,f],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,f]]},Q=function(t,e){if(typeof t===o&&(e=t,t=s),!(this instanceof Q))return new Q(t,e).getResult();var v=typeof i!==r&&i.navigator?i.navigator:s,p=t||(v&&v.userAgent?v.userAgent:""),w=v&&v.userAgentData?v.userAgentData:s,y=e?function(t,e){var i={};for(var s in t)e[s]&&e[s].length%2==0?i[s]=e[s].concat(t[s]):i[s]=t[s];return i}(j,e):j,b=v&&v.userAgent==p;return this.getBrowser=function(){var t={};return t[c]=s,t[f]=s,q.call(t,p,y.browser),t[a]=function(t){return typeof t===h?t.replace(/[^\d\.]/g,"").split(".")[0]:s}(t[f]),b&&v&&v.brave&&typeof v.brave.isBrave==n&&(t[c]="Brave"),t},this.getCPU=function(){var t={};return t[_]=s,q.call(t,p,y.cpu),t},this.getDevice=function(){var t={};return t[d]=s,t[u]=s,t[l]=s,q.call(t,p,y.device),b&&!t[l]&&w&&w.mobile&&(t[l]=m),b&&"Macintosh"==t[u]&&v&&typeof v.standalone!==r&&v.maxTouchPoints&&v.maxTouchPoints>2&&(t[u]="iPad",t[l]=g),t},this.getEngine=function(){var t={};return t[c]=s,t[f]=s,q.call(t,p,y.engine),t},this.getOS=function(){var t={};return t[c]=s,t[f]=s,q.call(t,p,y.os),b&&!t[c]&&w&&w.platform&&"Unknown"!=w.platform&&(t[c]=w.platform.replace(/chrome os/i,W).replace(/macos/i,U)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return p},this.setUA=function(t){return p=typeof t===h&&t.length>500?z(t,500):t,this},this.setUA(p),this};Q.VERSION="0.7.39",Q.BROWSER=H([c,f,a]),Q.CPU=H([_]),Q.DEVICE=H([u,d,l,v,m,p,g,w,y]),Q.ENGINE=Q.OS=H([c,f]),t.exports&&(e=t.exports=Q),e.UAParser=Q;var J=typeof i!==r&&(i.jQuery||i.Zepto);if(J&&!J.ua){var $=new Q;J.ua=$.getResult(),J.ua.get=function(){return $.getUA()},J.ua.set=function(t){$.setUA(t);var e=$.getResult();for(var i in e)J.ua[i]=e[i]}}}("object"==typeof s?s:A)}(Ui,Ui.exports);const Gi=T(Ui.exports),Hi=["iOS"];class Zi extends Gi{isChromium(){return this.getUA().match(/Chrome/i)}isChrome(){const t=this.getBrowser();if(!t.name)return!1;const e=this.getOS();let i=!0;return i=!new RegExp(Hi.join("|"),"i").test(e.name),t.name.match(/Chrome/i)&&i}isFirefox(){const t=this.getBrowser();return!!t.name&&t.name.match(/Firefox/i)}isOpera(){const t=this.getBrowser();return!!t.name&&t.name.match(/Opera/i)}isSafari(){const t=this.getBrowser();return!!t.name&&t.name.match(/Safari/i)}constructor(){super(s.navigator.userAgent)}}const Xi=at.get("SdpParser"),zi=Array.from({length:31},((t,e)=>e+35)),qi=Array.from({length:32},((t,e)=>e+96)),Yi=Array.from({length:14},((t,e)=>e+1)),Ki=Array.from({length:240},((t,e)=>e+16)),ji={setSimulcast(t,e){if(Xi.info("Setting simulcast. Codec: ",e),!(new Zi).isChromium())return Xi.warn("Your browser does not appear to support Simulcast. For a better experience, use a Chromium based browser."),t;if("h264"!==e&&"vp8"!==e)return Xi.warn("Your selected codec ".concat(e," does not appear to support Simulcast.  To broadcast using simulcast, please use H.264 or VP8.")),t;if(!/m=video/.test(t))return Xi.warn("There is no available video for simulcast to be enabled."),t;try{const e=new RegExp("m=video.*?a=ssrc:(\\d*) cname:(.+?)\\r\\n","s"),i=new RegExp("m=video.*?a=ssrc:(\\d*) msid:(.+?)\\r\\n","s"),s=e.exec(t),n=s[1],r=s[2],o=i.exec(t)[2],h=2,a=[n];for(let e=0;e<h;++e){const i=100+2*e,s=i+1;a.push(i),t+="a=ssrc-group:FID "+i+" "+s+"\r\na=ssrc:"+i+" cname:"+r+"\r\na=ssrc:"+i+" msid:"+o+"\r\na=ssrc:"+s+" cname:"+r+"\r\na=ssrc:"+s+" msid:"+o+"\r\n"}return t+="a=ssrc-group:SIM "+a.join(" ")+"\r\n",Xi.info("Simulcast setted"),Xi.debug("Simulcast SDP: ",t),t}catch(t){throw Xi.error("Error setting SDP for simulcast: ",t),t}},setStereo:t=>(Xi.info("Replacing SDP response for support stereo"),t=t.replace(/useinbandfec=1/g,"useinbandfec=1; stereo=1"),Xi.info("Replaced SDP response for support stereo"),Xi.debug("New SDP value: ",t),t),setDTX:t=>(Xi.info("Replacing SDP response for support dtx"),t=t.replace("useinbandfec=1","useinbandfec=1; usedtx=1"),Xi.info("Replaced SDP response for support dtx"),Xi.debug("New SDP value: ",t),t),setAbsoluteCaptureTime(t){const e="a=extmap:"+ji.getAvailableHeaderExtensionIdRange(t)[0]+" http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,i,s)=>i+e+s)),Xi.info("Replaced SDP response for setting absolute capture time"),Xi.debug("New SDP value: ",t),t},setDependencyDescriptor(t){const e="a=extmap:"+ji.getAvailableHeaderExtensionIdRange(t)[0]+" https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\r\n";return t=t.replace(/(m=.*\r\n(?:.*\r\n)*?)(a=extmap.*\r\n)/gm,((t,i,s)=>i+e+s)),Xi.info("Replaced SDP response for setting depency descriptor"),Xi.debug("New SDP value: ",t),t},setVideoBitrate(t,e){if(e<1)Xi.info("Remove bitrate restrictions"),t=t.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"");else{const i=Fi.parse(t),s=i.getMedia("video");Xi.info("Setting video bitrate"),s.setBitrate(e),t=i.toString()}return t},removeSdpLine:(t,e)=>(Xi.debug("SDP before trimming: ",t),t=t.split("\n").filter((t=>t.trim()!==e)).join("\n"),Xi.debug("SDP trimmed result: ",t),t),adaptCodecName(t,e,i){if(!t)return t;const s=new RegExp("".concat(e),"i");return t.replace(s,i)},setMultiopus(t,e){if(!(new Zi).isFirefox()&&(!e||Qi(e)))if(t.includes("multiopus/48000/6"))Xi.info("Multiopus already setted");else{Xi.info("Setting multiopus");const e=/m=audio 9 UDP\/TLS\/RTP\/SAVPF (.*)\r\n/.exec(t)[0],i=ji.getAvailablePayloadTypeRange(t)[0],s=e.replace("\r\n"," ")+i+"\r\na=rtpmap:"+i+" multiopus/48000/6\r\na=fmtp:"+i+" channel_mapping=0,4,1,2,3,5;coupled_streams=2;minptime=10;num_streams=4;useinbandfec=1\r\n";t=t.replace(e,s),Xi.info("Multiopus offer created"),Xi.debug("SDP parsed for multioups: ",t)}return t},getAvailablePayloadTypeRange(t){const e=t.matchAll(/m=(?:.*) (?:.*) UDP\/TLS\/RTP\/SAVPF (.*)\r\n/gm);let i=qi.concat(zi);for(const t of e){const e=t[1].split(" ").map((t=>x(t)));i=i.filter((t=>!e.includes(t)))}return i},getAvailableHeaderExtensionIdRange(t){const e=t.matchAll(/a=extmap:(\d+)(?:.*)\r\n/gm);let i=Yi.concat(Ki);for(const t of e){const e=t[1].split(" ").map((t=>x(t)));i=i.filter((t=>!e.includes(t)))}return i},renegotiate(t,e){const i=Fi.parse(t),s=Fi.parse(e);for(const t of i.getMedias()){let e=s.getMediaById(t.getId());if(!e){e=new Vi(t.getId(),t.getType()),e.setDirection(Wi.reverse(t.getDirection()));const i=s.getMedia(t.getType());if(i){e.setCodecs(i.getCodecs());for(const[t,s]of i.getExtensions())e.addExtension(t,s)}s.addMedia(e)}}return s.toString()},updateMissingVideoExtensions(t,e){var i;const s=Fi.parse(t),n=null==(i=Fi.parse(e).getMediasByType("video")[0])?void 0:i.getExtensions();if(n||n.length){for(const e of s.getMediasByType("video")){const i=e.getExtensions();n.forEach(((s,n)=>{if(!i.get(n)){const i=e.getId(),r="a=extmap:"+n+" "+s+"\r\n",o=new RegExp("(a=mid:"+i+"\r\n(?:.*\r\n)*?)","g");t=t.replace(o,((t,e,i)=>e+r))}}))}return t}},getCodecPayloadType(t){const e=t.matchAll(/a=rtpmap:(\d+) (\w+)\/\d+/g),i={};for(const t of e)i[t[1]]=t[2];return i}},Qi=t=>t.getAudioTracks().some((t=>t.getSettings().channelCount>2)),Ji={VP8:"vp8",VP9:"vp9",H264:"h264",AV1:"av1",H265:"h265"},$i={OPUS:"opus",MULTIOPUS:"multiopus"},ts=at.get("PeerConnection"),es="Publisher",is="Viewer",ss={track:"track",connectionStateChange:"connectionStateChange"},ns={stereo:!1,mediaStream:null,codec:"h264",simulcast:!1,scalabilityMode:null,disableAudio:!1,disableVideo:!1,setSDPToPeer:!0};class rs extends xt{async createRTCPeer(t,e){void 0===t&&(t={autoInitStats:!0,statsIntervalMs:1e3}),void 0===e&&(e=is),ts.info("Creating new RTCPeerConnection"),ts.debug("RTC configuration provided by user: ",t),this.peer=as(this,t),this.mode=e,t.autoInitStats&&this.initStats(t)}getRTCPeer(){return ts.info("Getting RTC Peer"),this.peer}async closeRTCPeer(){var t;ts.info("Closing RTCPeerConnection"),null==(t=this.peer)||t.close(),this.peer=null,this.stopStats(),this.emit(ss.connectionStateChange,"closed")}async setRTCRemoteSDP(t){ts.info("Setting RTC Remote SDP");const e={type:"answer",sdp:t};try{await this.peer.setRemoteDescription(e),ts.info("RTC Remote SDP was set successfully."),ts.debug("RTC Remote SDP new value: ",t)}catch(t){throw ts.error("Error while setting RTC Remote SDP: ",t),t}}async getRTCLocalSDP(t){void 0===t&&(t=ns),ts.info("Getting RTC Local SDP"),t=d(d({},ns),t),ts.debug("Options: ",t);const e=hs(t.mediaStream);e?ls(this.peer,e,t):ds(this.peer,t),ts.info("Creating peer offer");const i=await this.peer.createOffer();return ts.info("Peer offer created"),ts.debug("Peer offer response: ",i.sdp),this.sessionDescription=i,t.disableAudio||(t.stereo&&(this.sessionDescription.sdp=ji.setStereo(this.sessionDescription.sdp)),t.dtx&&(this.sessionDescription.sdp=ji.setDTX(this.sessionDescription.sdp)),this.sessionDescription.sdp=ji.setMultiopus(this.sessionDescription.sdp,e)),!t.disableVideo&&t.simulcast&&(this.sessionDescription.sdp=ji.setSimulcast(this.sessionDescription.sdp,t.codec)),t.absCaptureTime&&(this.sessionDescription.sdp=ji.setAbsoluteCaptureTime(this.sessionDescription.sdp)),t.dependencyDescriptor&&(this.sessionDescription.sdp=ji.setDependencyDescriptor(this.sessionDescription.sdp)),t.setSDPToPeer&&(await this.peer.setLocalDescription(this.sessionDescription),ts.info("Peer local description set")),this.sessionDescription.sdp}async addRemoteTrack(t,e){return new Promise(((i,s)=>{try{const s=this.peer.addTransceiver(t,{direction:"recvonly",streams:e});this.transceiverMap.set(s,i)}catch(t){s(t)}}))}updateBandwidthRestriction(t,e){if(this.mode===is)throw ts.error("Viewer attempting to update bitrate, this is not allowed"),new g("It is not possible for a viewer to update the bitrate.");return ts.info("Updating bandwidth restriction, bitrate value: ",e),ts.debug("SDP value: ",t),ji.setVideoBitrate(t,e)}async updateBitrate(t){if(void 0===t&&(t=0),this.mode===is)throw ts.error("Viewer attempting to update bitrate, this is not allowed"),new g("It is not possible for a viewer to update the bitrate.");if(!this.peer)throw ts.error("Cannot update bitrate. No peer found."),new g("Cannot update bitrate. No peer found.");ts.info("Updating bitrate to value: ",t),this.sessionDescription=await this.peer.createOffer(),await this.peer.setLocalDescription(this.sessionDescription);const e=this.updateBandwidthRestriction(this.peer.remoteDescription.sdp,t);await this.setRTCRemoteSDP(e),ts.info("Bitrate restrictions updated: ","".concat(t>0?t:"unlimited"," kbps"))}getRTCPeerStatus(){if(ts.info("Getting RTC peer status"),!this.peer)return null;const t=fs(this.peer);return ts.info("RTC peer status getted, value: ",t),t}replaceTrack(t){if(!this.peer)return void ts.error("Could not change track if there is not an active connection.");const e=this.peer.getSenders().find((e=>e.track.kind===t.kind));e?e.replaceTrack(t):ts.error("There is no ".concat(t.kind," track in active broadcast."))}static getCapabilities(t){const e=new Zi,i=RTCRtpSender.getCapabilities(t);if(i){const s={};let n=new RegExp("^video/(".concat(w.values(Ji).join("|"),")x?$"),"i");"audio"===t&&(n=new RegExp("^audio/(".concat(w.values($i).join("|"),")$"),"i"),e.isChrome()&&(s.multiopus={mimeType:"audio/multiopus",channels:6}));for(const t of i.codecs){const e=t.mimeType.match(n);if(e){const i=e[1].toLowerCase();if(s[i]=v(d({},s[i]),{mimeType:t.mimeType}),t.scalabilityModes){let e=s[i].scalabilityModes||[];e=[...e,...t.scalabilityModes],s[i].scalabilityModes=[...new Set(e)]}t.channels&&(s[i].channels=t.channels)}}i.codecs=w.keys(s).map((t=>d({codec:t},s[t])))}return i}getTracks(){var t,e;return null==(e=null==(t=this.peer)?void 0:t.getSenders())?void 0:e.map((t=>t.track))}initStats(t){this.peerConnectionStats?ts.warn("PeerConnection.initStats() has already been called. Automatic initialization occurs via View.connect(), Publish.connect() or this.createRTCPeer(). See options"):this.peer?(this.peerConnectionStats=new Bt(this.peer,t),Pt(this.peerConnectionStats,this,[Lt])):ts.warn("Cannot init peer stats: RTCPeerConnection not initialized")}stopStats(){var t;null==(t=this.peerConnectionStats)||t.stop(),this.peerConnectionStats=null}constructor(){super(),this.mode=null,this.sessionDescription=null,this.peer=null,this.peerConnectionStats=null,this.transceiverMap=new Map}}const os=t=>(null==t?void 0:t.getAudioTracks().length)<=1&&(null==t?void 0:t.getVideoTracks().length)<=1,hs=t=>{if(!t)return null;if(t instanceof MediaStream&&os(t))return t;if(!(t instanceof MediaStream)){ts.info("Creating MediaStream to add received tracks.");const e=new MediaStream;for(const i of t)e.addTrack(i);if(os(e))return e}throw ts.error("MediaStream must have 1 audio track and 1 video track, or at least one of them."),new g("MediaStream must have 1 audio track and 1 video track, or at least one of them.")},as=(t,e)=>{const i=new RTCPeerConnection(e);return cs(t,i),i};async function us(t){return new Promise((e=>u(e,t)))}const cs=(t,e)=>{e.ontrack=async e=>{ts.info("New track from peer."),ts.debug("Track event value: ",e);const i=t.transceiverMap.get(e.transceiver);if(i){for(;!e.transceiver.mid;)await us(100);i(e.transceiver),t.transceiverMap.delete(e.transceiver)}u((()=>{t.emit(ss.track,e)}),0)},e.connectionState?e.onconnectionstatechange=i=>{ts.info("Peer connection state change: ",e.connectionState),t.emit(ss.connectionStateChange,e.connectionState)}:e.oniceconnectionstatechange=i=>{ts.info("Peer ICE connection state change: ",e.iceConnectionState),t.emit(ss.connectionStateChange,e.iceConnectionState)},e.onnegotiationneeded=async t=>{if(!e.remoteDescription)return;ts.info("Peer onnegotiationneeded, updating local description");const i=await e.createOffer();ts.info("Peer onnegotiationneeded, got local offer",i.sdp),i.sdp=ji.updateMissingVideoExtensions(i.sdp,e.remoteDescription.sdp),await e.setLocalDescription(i);const s=ji.renegotiate(i.sdp,e.remoteDescription.sdp);ts.info("Peer onnegotiationneeded, updating remote description",s),await e.setRemoteDescription({type:"answer",sdp:s}),ts.info("Peer onnegotiationneeded, renegotiation done")}},ls=(t,e,i)=>{ts.info("Adding mediaStream tracks to RTCPeerConnection");for(const s of e.getTracks()){const n={streams:[e]};"audio"===s.kind&&(n.direction=i.disableAudio?"inactive":"sendonly"),"video"===s.kind&&(n.direction=i.disableVideo?"inactive":"sendonly",i.scalabilityMode&&(new Zi).isChrome()?(ts.debug("Video track with scalability mode: ".concat(i.scalabilityMode,".")),n.sendEncodings=[{scalabilityMode:i.scalabilityMode}]):i.scalabilityMode&&ts.warn("SVC is only supported in Google Chrome")),t.addTransceiver(s,n),ts.info("Track '".concat(s.label,"' added: "),"id: ".concat(s.id),"kind: ".concat(s.kind))}},ds=(t,e)=>{const i=new Zi;if(!e.disableVideo){const e=t.addTransceiver("video",{direction:"recvonly"});i.isOpera()&&e.setCodecPreferences(RTCRtpReceiver.getCapabilities("video").codecs.filter((t=>"video/H264"!==t.mimeType||t.sdpFmtpLine.includes("profile-level-id=4"))))}e.disableAudio||t.addTransceiver("audio",{direction:"recvonly"});for(let i=0;i<e.multiplexedAudioTracks;i++)t.addTransceiver("audio",{direction:"recvonly"})},fs=t=>{var e;const i=null!=(e=t.connectionState)?e:t.iceConnectionState;switch(i){case"checking":return"connecting";case"completed":return"connected";default:return i}};var _s={};w.defineProperty(_s,"__esModule",{value:!0}),_s.TypedEmitter=kt.EventEmitter;const{TypedEmitter:vs}=_s;class ms extends vs{cmd(t,e){return this.tm.cmd(t,e,this.namespace)}event(t,e){return this.tm.event(t,e,this.namespace)}close(){return this.tm.namespaces.delete(this.namespace)}constructor(t,e){super(),this.namespace=t,this.tm=e}}const gs=T(class extends vs{o_(t){this.transport.send(JSON.stringify(t))}cmd(t,e,i){return void 0===i&&(i=void 0),new Promise(((s,n)=>{if(!t||0===t.length)throw new g("Bad command name");const r={type:"cmd",transId:this.maxId++,name:t,data:e};i&&(r.namespace=i),this.transactions.set(r.transId,v(d({},r),{resolve:s,reject:n}));try{this.o_(r)}catch(t){throw this.transactions.delete(r.transId),t}}))}event(t,e,i){if(void 0===i&&(i=void 0),!t||0===t.length)throw new g("Bad event name");const s={type:"event",name:t,data:e};i&&(s.namespace=i),this.o_(s)}namespace(t){let e=this.namespaces.get(t);return e||(e=new ms(t,this),this.namespaces.set(t,e),e)}close(){for(const t of this.namespaces.values())t.close();this.transport.removeListener?this.transport.removeListener("message",this.listener):this.transport.removeEventListener("message",this.listener)}constructor(t){super(),this.maxId=0,this.namespaces=new Map,this.transactions=new Map,this.transport=t,this.listener=t=>{let e;try{e=JSON.parse(t.utf8Data||t.data||t)}catch(t){return}switch(e.type){case"cmd":const{transId:t}=e,s={name:e.name,data:e.data,namespace:e.namespace,accept:e=>{this.o_({type:"response",transId:t,data:e})},reject:e=>{this.o_({type:"error",transId:t,data:e})}};if(s.namespace){const t=this.namespaces.get(s.namespace);t?t.emit("cmd",s):this.emit("cmd",s)}else this.emit("cmd",s);break;case"response":{const t=this.transactions.get(e.transId);if(!t)return;this.transactions.delete(e.transId),t.resolve(e.data);break}case"error":{const t=this.transactions.get(e.transId);if(!t)return;this.transactions.delete(e.transId),t.reject(e.data);break}case"event":const n={name:e.name,data:e.data,namespace:e.namespace};if(n.namespace){var i=this.namespaces.get(n.namespace);i?i.emit("event",n):this.emit("event",n)}else this.emit("event",n)}},this.transport.addListener?this.transport.addListener("message",this.listener):this.transport.addEventListener("message",this.listener)}}),ps=at.get("Signaling"),ws="wsConnectionSuccess",ys="wsConnectionError",bs="wsConnectionClose",As="broadcastEvent";class Ss extends xt{async connect(){var t;return ps.info("Connecting to Signaling Server"),this.transactionManager&&(null==(t=this.webSocket)?void 0:t.readyState)===WebSocket.OPEN?(ps.info("Connected to server: ",this.webSocket.url),ps.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(ws,{ws:this.webSocket,tm:this.transactionManager}),this.webSocket):new Promise(((t,e)=>{this.webSocket=new WebSocket(this.wsUrl),this.transactionManager=new gs(this.webSocket),this.webSocket.onopen=()=>{ps.info("WebSocket opened"),this.transactionManager.on("event",(t=>{this.emit(As,t)})),ps.info("Connected to server: ",this.webSocket.url),ps.debug("WebSocket value: ",{url:this.webSocket.url,protocol:this.webSocket.protocol,readyState:this.webSocket.readyState,binaryType:this.webSocket.binaryType,extensions:this.webSocket.extensions}),this.emit(ws,{ws:this.webSocket,tm:this.transactionManager}),t(this.webSocket)},this.webSocket.onerror=()=>{ps.error("WebSocket not connected: ",this.webSocket.url),this.emit(ys,this.webSocket.url),e(this.webSocket.url)},this.webSocket.onclose=()=>{this.webSocket=null,this.transactionManager=null,ps.info("Connection closed with Signaling Server."),this.emit(bs)}}))}close(){var t;ps.info("Closing connection with Signaling Server."),null==(t=this.webSocket)||t.close()}async subscribe(t,e,i,s){var n,r,o,h;void 0===i&&(i=null),void 0===s&&(s=null),ps.info("Starting subscription to streamName: ",this.streamName),ps.debug("Subcription local description: ",t);const a=Ts(e,i,s),u={sdp:t=ji.adaptCodecName(t,"AV1X",Ji.AV1),streamId:this.streamName,pinnedSourceId:a.pinnedSourceId,excludedSourceIds:a.excludedSourceIds,events:["active","inactive","layers","viewercount","vad","updated","migrate","stopped"]};a.vad&&(u.vad=!0),Array.isArray(a.events)&&(u.events=a.events),a.forcePlayoutDelay&&(u.forcePlayoutDelay=a.forcePlayoutDelay),a.layer&&(u.layer=a.layer);try{if(a.disableVideo&&a.disableAudio)throw new g("Not attempting to connect as video and audio are disabled");await this.connect(),ps.info("Sending view command");const t=await this.transactionManager.cmd("view",u),e=null==(h=null==(o=null==(r=null==(n=RTCRtpReceiver.getCapabilities)?void 0:n.call(RTCRtpReceiver,"video"))?void 0:r.codecs)?void 0:o.find)?void 0:h.call(o,(t=>"video/AV1X"===t.mimeType));return t.sdp=e?ji.adaptCodecName(t.sdp,Ji.AV1,"AV1X"):t.sdp,ps.info("Command sent, subscriberId: ",t.subscriberId),ps.debug("Command result: ",t),this.serverId=t.subscriberId,this.clusterId=t.clusterId,this.streamViewId=t.streamViewId,G(this.streamName),H(this.serverId),Z(t.streamViewId),Y(this.clusterId),t.sdp}catch(t){throw ps.error("Error sending view command, error: ",t),t}}async publish(t,e,i,s){var n,r,o,h,a,u,c,l;void 0===i&&(i=null),void 0===s&&(s=null);const d=ks(e,i,s);ps.info("Starting publishing to streamName: ".concat(this.streamName,", codec: ").concat(d.codec)),ps.debug("Publishing local description: ",t);const f=null!=(h=null==(o=null==(r=null==(n=rs.getCapabilities)?void 0:n.call(rs,"video"))?void 0:r.codecs)?void 0:o.map((t=>t.codec)))?h:[],_=w.values(Ji);if(-1===_.indexOf(d.codec))throw ps.error("Invalid codec ".concat(d.codec,". Possible values are: "),_),new g("Invalid codec ".concat(d.codec,". Possible values are: ").concat(_));if(f.length>0&&-1===f.indexOf(d.codec))throw ps.error("Unsupported codec ".concat(d.codec,". Possible values are: "),f),new g("Unsupported codec ".concat(d.codec,". Possible values are: ").concat(f));d.codec===Ji.AV1&&(t=ji.adaptCodecName(t,"AV1X",Ji.AV1));const v={name:this.streamName,sdp:t,codec:d.codec,sourceId:d.sourceId};if(d.priority){if(!(Number.isInteger(d.priority)&&d.priority>=-2147483648&&d.priority<=2147483647))throw new g("Invalid value for priority option. It should be a decimal integer between the range [-2^31, +2^31 - 1]");v.priority=d.priority}null!==d.record&&(v.record=d.record),Array.isArray(d.events)&&(v.events=d.events);try{if(d.disableVideo&&d.disableAudio)throw new g("Not attempting to connect as video and audio are disabled");await this.connect(),ps.info("Sending publish command");const t=await this.transactionManager.cmd("publish",v);if(d.codec===Ji.AV1){const e=null==(l=null==(c=null==(u=null==(a=RTCRtpSender.getCapabilities)?void 0:a.call(RTCRtpSender,"video"))?void 0:u.codecs)?void 0:c.find)?void 0:l.call(c,(t=>"video/AV1X"===t.mimeType));t.sdp=e?ji.adaptCodecName(t.sdp,Ji.AV1,"AV1X"):t.sdp}return ps.info("Command sent, publisherId: ",t.publisherId),ps.debug("Command result: ",t),this.serverId=t.publisherId,this.clusterId=t.clusterId,G(this.streamName),H(this.serverId),X(t.feedId),Y(this.clusterId),t.sdp}catch(t){throw ps.error("Error sending publish command, error: ",t),t}}async cmd(t,e){return ps.info("Sending cmd: ".concat(t)),this.transactionManager.cmd(t,e)}constructor(t={streamName:null,url:"ws://localhost:8080/"}){super(),this.streamName=t.streamName,this.wsUrl=t.url,this.webSocket=null,this.transactionManager=null,this.serverId=null,this.clusterId=null,this.streamViewId=null}}const Ts=(t,e,i)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={vad:t,pinnedSourceId:e,excludedSourceIds:i}),s},ks=(t,e,i)=>{let s="object"==typeof t?t:{};if(0===w.keys(s).length){s={codec:null!=t?t:Ji.H264,record:e,sourceId:i}}return s};class Es extends g{constructor(t,e){super(t),this.name="FetchError",this.status=e}}const xs=at.get("Director"),Rs="WebRtc";let Is="",Cs="https://director.millicast.com";const Ps={setEndpoint:t=>{Cs=t.replace(/\/$/,"")},getEndpoint:()=>Cs,setLiveDomain:t=>{Is=t.replace(/\/$/,"")},getLiveDomain:()=>Is,getPublisher:async(t,e,i)=>{void 0===e&&(e=null),void 0===i&&(i=Rs);const s=Ds(t,e,i);xs.info("Getting publisher connection path for stream name: ",s.streamName);const n={streamName:s.streamName,streamType:s.streamType},r={"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},o="".concat(Ps.getEndpoint(),"/api/director/publish");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let e=await t.json();if("fail"===e.status)throw new Es(e.data.message,t.status);return e=Ms(e),xs.debug("Getting publisher response: ",e),U(e.data.streamAccountId),e.data}catch(t){throw xs.error("Error while getting publisher connection path. ",t),t}},getSubscriber:async(t,e,i)=>{void 0===e&&(e=null),void 0===i&&(i=null);const s=Ns(t,e,i);U(s.streamAccountId),xs.info("Getting subscriber connection data for stream name: ".concat(s.streamName," and account id: ").concat(s.streamAccountId));const n={streamAccountId:s.streamAccountId,streamName:s.streamName};let r={"Content-Type":"application/json"};s.subscriberToken&&(r=v(d({},r),{Authorization:"Bearer ".concat(s.subscriberToken)}));const o="".concat(Ps.getEndpoint(),"/api/director/subscribe");try{const t=await fetch(o,{method:"POST",headers:r,body:JSON.stringify(n)});let e=await t.json();if("fail"===e.status)throw new Es(e.data.message,t.status);return e=Ms(e),xs.debug("Getting subscriber response: ",e),s.subscriberToken&&(e.data.subscriberToken=s.subscriberToken),e.data}catch(t){throw xs.error("Error while getting subscriber connection path. ",t),t}}},Ds=(t,e,i)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={token:t,streamName:e,streamType:i}),s},Ns=(t,e,i)=>{let s="object"==typeof t?t:{};return 0===w.keys(s).length&&(s={streamName:t,streamAccountId:e,subscriberToken:i}),s},Ms=t=>{if(Ps.getLiveDomain()){const e=/\/\/(.*?)\//,i=t.data.urls.map((t=>{const i=e.exec(t);return t.replace(i[1],Ps.getLiveDomain())}));t.data.urls=i}if(t.data.drmObject){const e=t.data.drmObject.playReadyUrl;e&&(t.data.drmObject.playReadyUrl="".concat(Ps.getEndpoint()).concat(e));const i=t.data.drmObject.widevineUrl;i&&(t.data.drmObject.widevineUrl="".concat(Ps.getEndpoint()).concat(i));const s=t.data.drmObject.fairPlayUrl;s&&(t.data.drmObject.fairPlayUrl="".concat(Ps.getEndpoint()).concat(s));const n=t.data.drmObject.fairPlayCertUrl;n&&(t.data.drmObject.fairPlayCertUrl="".concat(Ps.getEndpoint()).concat(n))}return t};function Ls(t){this.message=t}Ls.prototype=new g,Ls.prototype.name="InvalidCharacterError";var Bs=typeof s<"u"&&s.atob&&s.atob.bind(s)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Ls("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,s,n=0,r=0,o="";s=e.charAt(r++);~s&&(i=n%4?64*i+s:s,n++%4)?o+=String.fromCharCode(255&i>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return o};function Os(t){this.message=t}function Fs(t,e){if("string"!=typeof t)throw new Os("Invalid token specified");var i=!0===(e=e||{}).header?0:1;try{return JSON.parse(function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Bs(e).replace(/(.)/g,(function(t,e){var i=e.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}catch(t){return Bs(e)}}(t.split(".")[i]))}catch(t){throw new Os("Invalid token specified: "+t.message)}}Os.prototype=new g,Os.prototype.name="InvalidTokenError";var Vs={exports:{}};!function(t,e){!function(i){if(null!=e&&"number"!=typeof e.nodeType)t.exports=i();else{var s=i(),n=typeof self<"u"?self:$.global;"function"!=typeof n.btoa&&(n.btoa=s.btoa),"function"!=typeof n.atob&&(n.atob=s.atob)}}((function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function e(t){this.message=t}return e.prototype=new g,e.prototype.name="InvalidCharacterError",{btoa:function(i){for(var s,n,r,o,h=String(i),a=0,u="";a<h.length;){if(s=h.charCodeAt(a++),n=h.charCodeAt(a++),r=h.charCodeAt(a++),s>255||n>255||r>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u+=t.charAt((o=s<<16|n<<8|r)>>18&63)+t.charAt(o>>12&63)+t.charAt(o>>6&63)+t.charAt(63&o)}switch(h.length%3){case 0:return u;case 1:return u.slice(0,-2)+"==";case 2:return u.slice(0,-1)+"="}},atob:function(i){var s=String(i).replace(/[=]+$/,"");if(s.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,h=0,a="";r=s.charAt(h++);~r&&(n=o%4?64*n+r:r,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)r=t.indexOf(r);return a}}}))}(Vs,Vs.exports);var Ws=Vs.exports,Us={exports:{}};!function(t,e){var i;self,i=()=>{return t={7629:(t,e,i)=>{const s=i(375),n=i(8571),r=i(9474),o=i(1687),h=i(8652),a=i(8160),u=i(3292),c=i(6354),l=i(8901),d=i(9708),f=i(6914),_=i(2294),v=i(6133),m=i(1152),p=i(8863),y=i(2036),b={Base:class{h_(){this.a_=new _.Ids,this.u_=null,this.c_=new v.Manager,this.l_=null,this.d_=null,this.f_=null,this.__={},this.v_=[],this.m_=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return s("function"==typeof d.describe,"Manifest functionality disabled"),d.describe(this)}allow(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"allow"),this.g_(e,"d_")}alter(t){s(t&&"object"==typeof t&&!Array.isArray(t),"Invalid targets argument"),s(!this.p_(),"Cannot set alterations inside a ruleset");const e=this.clone();e.$_terms.alterations=e.$_terms.alterations||[];for(const i in t){const n=t[i];s("function"==typeof n,"Alteration adjuster for",i,"must be a function"),e.$_terms.alterations.push({target:i,adjuster:n})}return e.$_temp.ruleset=!1,e}artifact(t){return s(void 0!==t,"Artifact cannot be undefined"),s(!this.l_,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",t)}cast(t){return s(!1===t||"string"==typeof t,"Invalid to value"),s(!1===t||this.w_.cast[t],"Type",this.type,"does not support casting to",t),this.$_setFlag("cast",!1===t?void 0:t)}default(t,e){return this.y_("default",t,e)}description(t){return s(t&&"string"==typeof t,"Description must be a non-empty string"),this.$_setFlag("description",t)}empty(t){const e=this.clone();return void 0!==t&&(t=e.$_compile(t,{override:!1})),e.$_setFlag("empty",t,{clone:!1})}error(t){return s(t,"Missing error"),s(t instanceof g||"function"==typeof t,"Must provide a valid Error object or a function"),this.$_setFlag("error",t)}example(t,e){return void 0===e&&(e={}),s(void 0!==t,"Missing example"),a.assertOptions(e,["override"]),this.b_("examples",t,{single:!0,override:e.override})}external(t,e){return"object"==typeof t&&(s(!e,"Cannot combine options with description"),e=t.description,t=t.method),s("function"==typeof t,"Method must be a function"),s(void 0===e||e&&"string"==typeof e,"Description must be a non-empty string"),this.b_("externals",{method:t,description:e},{single:!0})}failover(t,e){return this.y_("failover",t,e)}forbidden(){return this.presence("forbidden")}id(t){return t?(s("string"==typeof t,"id must be a non-empty string"),s(/^[^\.]+$/.test(t),"id cannot contain period character"),this.$_setFlag("id",t)):this.$_setFlag("id",void 0)}invalid(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.g_(e,"f_")}label(t){return s(t&&"string"==typeof t,"Label name must be a non-empty string"),this.$_setFlag("label",t)}meta(t){return s(void 0!==t,"Meta cannot be undefined"),this.b_("metas",t,{single:!0})}note(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s(e.length,"Missing notes");for(const t of e)s(t&&"string"==typeof t,"Notes must be non-empty strings");return this.b_("notes",e)}only(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"Invalid mode:",t),this.$_setFlag("only",t)}optional(){return this.presence("optional")}prefs(t){s(t,"Missing preferences"),s(void 0===t.context,"Cannot override context"),s(void 0===t.externals,"Cannot override externals"),s(void 0===t.warnings,"Cannot override warnings"),s(void 0===t.debug,"Cannot override debug"),a.checkPreferences(t);const e=this.clone();return e.u_=a.preferences(e.u_,t),e}presence(t){return s(["optional","required","forbidden"].includes(t),"Unknown presence mode",t),this.$_setFlag("presence",t)}raw(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"raw":void 0)}result(t){return s(["raw","strip"].includes(t),"Unknown result mode",t),this.$_setFlag("result",t)}required(){return this.presence("required")}strict(t){const e=this.clone(),i=void 0!==t&&!t;return e.u_=a.preferences(e.u_,{convert:i}),e}strip(t){return void 0===t&&(t=!0),this.$_setFlag("result",t?"strip":void 0)}tag(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s(e.length,"Missing tags");for(const t of e)s(t&&"string"==typeof t,"Tags must be non-empty strings");return this.b_("tags",e)}unit(t){return s(t&&"string"==typeof t,"Unit name must be a non-empty string"),this.$_setFlag("unit",t)}valid(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];a.verifyFlat(e,"valid");const s=this.allow(...e);return s.$_setFlag("only",!!s.d_,{clone:!1}),s}when(t,e){const i=this.clone();i.$_terms.whens||(i.$_terms.whens=[]);const n=u.when(i,t,e);if(!["any","link"].includes(i.type)){const t=n.is?[n]:n.switch;for(const e of t)s(!e.then||"any"===e.then.type||e.then.type===i.type,"Cannot combine",i.type,"with",e.then&&e.then.type),s(!e.otherwise||"any"===e.otherwise.type||e.otherwise.type===i.type,"Cannot combine",i.type,"with",e.otherwise&&e.otherwise.type)}return i.$_terms.whens.push(n),i.$_mutateRebuild()}cache(t){s(!this.p_(),"Cannot set caching inside a ruleset"),s(!this.l_,"Cannot override schema cache"),s(void 0===this.__.artifact,"Cannot cache a rule with an artifact");const e=this.clone();return e.l_=t||h.provider.provision(),e.$_temp.ruleset=!1,e}clone(){const t=w.create(w.getPrototypeOf(this));return this.A_(t)}concat(t){s(a.isSchema(t),"Invalid schema object"),s("any"===this.type||"any"===t.type||t.type===this.type,"Cannot merge type",this.type,"with another type:",t.type),s(!this.p_(),"Cannot concatenate onto a schema with open ruleset"),s(!t.p_(),"Cannot concatenate a schema with open ruleset");let e=this.clone();if("any"===this.type&&"any"!==t.type){const i=t.clone();for(const t of w.keys(e))"type"!==t&&(i[t]=e[t]);e=i}e.a_.concat(t.a_),e.c_.register(t,v.toSibling),e.u_=e.u_?a.preferences(e.u_,t.u_):t.u_,e.d_=y.merge(e.d_,t.d_,t.f_),e.f_=y.merge(e.f_,t.f_,t.d_);for(const i of t.m_.keys())e.m_.has(i)&&(e.v_=e.v_.filter((t=>t.keep||t.name!==i)),e.m_.delete(i));for(const i of t.v_)t.w_.rules[i.method].multi||e.m_.set(i.name,i),e.v_.push(i);if(e.__.empty&&t.__.empty){e.__.empty=e.__.empty.concat(t.__.empty);const i=w.assign({},t.__);delete i.empty,o(e.__,i)}else if(t.__.empty){e.__.empty=t.__.empty;const i=w.assign({},t.__);delete i.empty,o(e.__,i)}else o(e.__,t.__);for(const i in t.$_terms){const s=t.$_terms[i];s?e.$_terms[i]?e.$_terms[i]=e.$_terms[i].concat(s):e.$_terms[i]=s.slice():e.$_terms[i]||(e.$_terms[i]=s)}return this.$_root.S_&&this.$_root.S_.T_(e,[this,t]),e.$_mutateRebuild()}extend(t){return s(!t.base,"Cannot extend type with another base"),l.type(this,t)}extract(t){return t=Array.isArray(t)?t:t.split("."),this.a_.reach(t)}fork(t,e){s(!this.p_(),"Cannot fork inside a ruleset");let i=this;for(let s of[].concat(t))s=Array.isArray(s)?s:s.split("."),i=i.a_.fork(s,e,i);return i.$_temp.ruleset=!1,i}rule(t){const e=this.w_;a.assertOptions(t,w.keys(e.modifiers)),s(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const i=null===this.$_temp.ruleset?this.v_.length-1:this.$_temp.ruleset;s(i>=0&&i<this.v_.length,"Cannot apply rules to empty ruleset");const r=this.clone();for(let o=i;o<r.v_.length;++o){const i=r.v_[o],h=n(i);for(const n in t)e.modifiers[n](h,t[n]),s(h.name===i.name,"Cannot change rule name");r.v_[o]=h,r.m_.get(h.name)===i&&r.m_.set(h.name,h)}return r.$_temp.ruleset=!1,r.$_mutateRebuild()}get ruleset(){s(!this.p_(),"Cannot start a new ruleset without closing the previous one");const t=this.clone();return t.$_temp.ruleset=t.v_.length,t}get $(){return this.ruleset}tailor(t){t=[].concat(t),s(!this.p_(),"Cannot tailor inside a ruleset");let e=this;if(this.$_terms.alterations)for(const{target:i,adjuster:n}of this.$_terms.alterations)t.includes(i)&&(e=n(e),s(a.isSchema(e),"Alteration adjuster for",i,"failed to return a schema object"));return e=e.$_modify({each:e=>e.tailor(t),ref:!1}),e.$_temp.ruleset=!1,e.$_mutateRebuild()}tracer(){return m.location?m.location(this):this}validate(t,e){return p.entry(t,this,e)}validateAsync(t,e){return p.entryAsync(t,this,e)}$_addRule(t){"string"==typeof t&&(t={name:t}),s(t&&"object"==typeof t,"Invalid options"),s(t.name&&"string"==typeof t.name,"Invalid rule name");for(const e in t)s("_"!==e[0],"Cannot set private rule properties");const e=w.assign({},t);e.Ud=[],e.method=e.method||e.name;const i=this.w_.rules[e.method],n=e.args;s(i,"Unknown rule",e.method);const r=this.clone();if(n){s(1===w.keys(n).length||w.keys(n).length===this.w_.rules[e.name].args.length,"Invalid rule definition for",this.type,e.name);for(const t in n){let o=n[t];if(i.argsByName){const h=i.argsByName.get(t);if(h.ref&&a.isResolvable(o))e.Ud.push(t),r.$_mutateRegister(o);else if(h.normalize&&(o=h.normalize(o),n[t]=o),h.assert){const e=a.validateArg(o,t,h);s(!e,e,"or reference")}}void 0!==o?n[t]=o:delete n[t]}}return i.multi||(r.k_(e.name,{clone:!1}),r.m_.set(e.name,e)),!1===r.$_temp.ruleset&&(r.$_temp.ruleset=null),i.priority?r.v_.unshift(e):r.v_.push(e),r}$_compile(t,e){return u.schema(this.$_root,t,e)}$_createError(t,e,i,s,n,r){void 0===r&&(r={});const o=!1!==r.flags?this.__:{},h=r.messages?f.merge(this.w_.messages,r.messages):this.w_.messages;return new c.Report(t,e,i,o,h,s,n)}$_getFlag(t){return this.__[t]}$_getRule(t){return this.m_.get(t)}$_mapLabels(t){return t=Array.isArray(t)?t:t.split("."),this.a_.labels(t)}$_match(t,e,i,s){(i=w.assign({},i)).abortEarly=!0,i.E_=!1,e.snapshot();const n=!p.validate(t,this,e,i,s).errors;return e.restore(),n}$_modify(t){return a.assertOptions(t,["each","once","ref","schema"]),_.schema(this,t)||this}$_mutateRebuild(){return s(!this.p_(),"Cannot add this rule inside a ruleset"),this.c_.reset(),this.a_.reset(),this.$_modify({each:(t,e)=>{let{source:i,name:s,path:n,key:r}=e;const o=this.w_[i][s]&&this.w_[i][s].register;!1!==o&&this.$_mutateRegister(t,{family:o,key:r})}}),this.w_.rebuild&&this.w_.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(t,e){let{family:i,key:s}=void 0===e?{}:e;this.c_.register(t,i),this.a_.register(t,{key:s})}$_property(t){return this.w_.properties[t]}$_reach(t){return this.a_.reach(t)}$_rootReferences(){return this.c_.roots()}$_setFlag(t,e,i){void 0===i&&(i={}),s("_"===t[0]||!this.p_(),"Cannot set flag inside a ruleset");const n=this.w_.flags[t]||{};if(r(e,n.default)&&(e=void 0),r(e,this.__[t]))return this;const o=!1!==i.clone?this.clone():this;return void 0!==e?(o.__[t]=e,o.$_mutateRegister(e)):delete o.__[t],"_"!==t[0]&&(o.$_temp.ruleset=!1),o}$_parent(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return this[t][a.symbols.parent].call(this,...i)}$_validate(t,e,i){return p.validate(t,this,e,i)}A_(t){t.type=this.type,t.$_root=this.$_root,t.$_temp=w.assign({},this.$_temp),t.$_temp.whens={},t.a_=this.a_.clone(),t.u_=this.u_,t.d_=this.d_&&this.d_.clone(),t.f_=this.f_&&this.f_.clone(),t.v_=this.v_.slice(),t.m_=n(this.m_,{shallow:!0}),t.c_=this.c_.clone(),t.__=w.assign({},this.__),t.l_=null,t.$_terms={};for(const e in this.$_terms)t.$_terms[e]=this.$_terms[e]?this.$_terms[e].slice():null;t.$_super={};for(const e in this.$_super)t.$_super[e]=this.x_[e].bind(t);return t}R_(){const t=this.clone();t.h_();const e=t.w_.terms;for(const i in e){const s=e[i];t.$_terms[i]=s.init}return t.$_mutateRebuild()}y_(t,e,i){return void 0===i&&(i={}),a.assertOptions(i,"literal"),s(void 0!==e,"Missing",t,"value"),s("function"==typeof e||!i.literal,"Only function value supports literal option"),"function"==typeof e&&i.literal&&(e={[a.symbols.literal]:!0,literal:e}),this.$_setFlag(t,e)}I_(t,e,i){if(!this.$_terms.whens)return{schema:this};const s=[],n=[];for(let r=0;r<this.$_terms.whens.length;++r){const o=this.$_terms.whens[r];if(o.concat){s.push(o.concat),n.push("".concat(r,".concat"));continue}const h=o.ref?o.ref.resolve(t,e,i):t,a=o.is?[o]:o.switch,u=n.length;for(let u=0;u<a.length;++u){const{is:c,then:l,otherwise:d}=a[u],f="".concat(r).concat(o.switch?"."+u:"");if(c.$_match(h,e.nest(c,"".concat(f,".is")),i)){if(l){const r=e.localize([...e.path,"".concat(f,".then")],e.ancestors,e.schemas),{schema:o,id:h}=l.I_(t,r,i);s.push(o),n.push("".concat(f,".then").concat(h?"(".concat(h,")"):""));break}}else if(d){const r=e.localize([...e.path,"".concat(f,".otherwise")],e.ancestors,e.schemas),{schema:o,id:h}=d.I_(t,r,i);s.push(o),n.push("".concat(f,".otherwise").concat(h?"(".concat(h,")"):""));break}}if(o.break&&n.length>u)break}const r=n.join(", ");if(e.mainstay.tracer.debug(e,"rule","when",r),!r)return{schema:this};if(!e.mainstay.tracer.active&&this.$_temp.whens[r])return{schema:this.$_temp.whens[r],id:r};let o=this;this.w_.generate&&(o=this.w_.generate(this,t,e,i));for(const t of s)o=o.concat(t);return this.$_root.S_&&this.$_root.S_.T_(o,[this,...s]),this.$_temp.whens[r]=o,{schema:o,id:r}}b_(t,e,i){void 0===i&&(i={}),s(!this.p_(),"Cannot set ".concat(t," inside a ruleset"));const n=this.clone();return n.$_terms[t]&&!i.override||(n.$_terms[t]=[]),i.single?n.$_terms[t].push(e):n.$_terms[t].push(...e),n.$_temp.ruleset=!1,n}p_(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}k_(t,e){if(void 0===e&&(e={}),!this.m_.has(t))return this;const i=!1!==e.clone?this.clone():this;i.m_.delete(t);const s=[];for(let e=0;e<i.v_.length;++e){const n=i.v_[e];n.name!==t||n.keep?s.push(n):i.p_()&&e<i.$_temp.ruleset&&--i.$_temp.ruleset}return i.v_=s,i}g_(t,e){a.verifyFlat(t,e.slice(1,-1));const i=this.clone(),n=t[0]===a.symbols.override;if(n&&(t=t.slice(1)),!i[e]&&t.length?i[e]=new y:n&&(i[e]=t.length?new y:null,i.$_mutateRebuild()),!i[e])return i;n&&i[e].override();for(const n of t){s(void 0!==n,"Cannot call allow/valid/invalid with undefined"),s(n!==a.symbols.override,"Override must be the first value");const t="f_"===e?"d_":"f_";i[t]&&(i[t].remove(n),i[t].length||(s("d_"===e||!i.__.only,"Setting invalid value",n,"leaves schema rejecting all values due to previous valid rule"),i[t]=null)),i[e].add(n,i.c_)}return i}constructor(t){this.type=t,this.$_root=null,this.w_={},this.h_()}}};b.Base.prototype[a.symbols.any]={version:a.version,compile:u.compile,root:"$_root"},b.Base.prototype.isImmutable=!0,b.Base.prototype.deny=b.Base.prototype.invalid,b.Base.prototype.disallow=b.Base.prototype.invalid,b.Base.prototype.equal=b.Base.prototype.valid,b.Base.prototype.exist=b.Base.prototype.required,b.Base.prototype.not=b.Base.prototype.invalid,b.Base.prototype.options=b.Base.prototype.prefs,b.Base.prototype.preferences=b.Base.prototype.prefs,t.exports=new b.Base},8652:(t,e,i)=>{const s=i(375),n=i(8571),r=i(8160),o={max:1e3,supported:new Set(["undefined","boolean","number","string"])};e.provider={provision:t=>new o.Cache(t)},o.Cache=class{get length(){return this.C_.size}set(t,e){if(null!==t&&!o.supported.has(typeof t))return;let i=this.C_.get(t);if(i)return i.value=e,void this.P_.first(i);i=this.P_.unshift({key:t,value:e}),this.C_.set(t,i),this.D_()}get(t){const e=this.C_.get(t);if(e)return this.P_.first(e),n(e.value)}D_(){if(this.C_.size>this.N_){const t=this.P_.pop();this.C_.delete(t.key)}}constructor(t={}){r.assertOptions(t,["max"]),s(void 0===t.max||t.max&&t.max>0&&isFinite(t.max),"Invalid max cache size"),this.N_=t.max||o.max,this.C_=new Map,this.P_=new o.List}},o.List=class{unshift(t){return t.next=null,t.prev=this.head,this.head&&(this.head.next=t),this.head=t,this.tail||(this.tail=t),t}first(t){t!==this.head&&(this.M_(t),this.unshift(t))}pop(){return this.M_(this.tail)}M_(t){const{next:e,prev:i}=t;return e.prev=i,i&&(i.next=e),t===this.tail&&(this.tail=e),t.prev=null,t.next=null,t}constructor(){this.tail=null,this.head=null}}},8160:(t,e,i)=>{const s=i(375),n=i(7916),r=i(5934);let o,h;const a={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};e.version=r.version,e.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},e.symbols={any:f("@hapi/joi/schema"),arraySingle:Po("arraySingle"),deepDefault:Po("deepDefault"),errors:Po("errors"),literal:Po("literal"),override:Po("override"),parent:Po("parent"),prefs:Po("prefs"),ref:Po("ref"),template:Po("template"),values:Po("values")},e.assertOptions=function(t,e,i){void 0===i&&(i="Options"),s(t&&"object"==typeof t&&!Array.isArray(t),"Options must be of type object");const n=w.keys(t).filter((t=>!e.includes(t)));s(0===n.length,"".concat(i," contain unknown keys: ").concat(n))},e.checkPreferences=function(t){h=h||i(3378);const e=h.preferences.validate(t);if(e.error)throw new n([e.error.details[0].message])},e.compare=function(t,e,i){switch(i){case"=":return t===e;case">":return t>e;case"<":return t<e;case">=":return t>=e;case"<=":return t<=e}},e.default=function(t,e){return void 0===t?e:t},e.isIsoDate=function(t){return a.isoDate.test(t)},e.isNumber=function(t){return"number"==typeof t&&!S(t)},e.isResolvable=function(t){return!!t&&(t[e.symbols.ref]||t[e.symbols.template])},e.isSchema=function(t,i){void 0===i&&(i={});const n=t&&t[e.symbols.any];return!!n&&(s(i.legacy||n.version===e.version,"Cannot mix different versions of joi schemas"),!0)},e.isValues=function(t){return t[e.symbols.values]},e.limit=function(t){return Number.isSafeInteger(t)&&t>=0},e.preferences=function(t,s){o=o||i(6914),t=t||{},s=s||{};const n=w.assign({},t,s);return s.errors&&t.errors&&(n.errors=w.assign({},t.errors,s.errors),n.errors.wrap=w.assign({},t.errors.wrap,s.errors.wrap)),s.messages&&(n.messages=o.compile(s.messages,t.messages)),delete n[e.symbols.prefs],n},e.tryWithPath=function(t,e,i){void 0===i&&(i={});try{return t()}catch(t){throw void 0!==t.path?t.path=e+"."+t.path:t.path=e,i.append&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},e.validateArg=function(t,i,s){let{assert:n,message:r}=s;if(e.isSchema(n)){const e=n.validate(t);return e.error?e.error.message:void 0}if(!n(t))return i?"".concat(i," ").concat(r):r},e.verifyFlat=function(t,e){for(const i of t)s(!Array.isArray(i),"Method no longer accepts array arguments:",e)}},3292:(t,e,i)=>{const s=i(375),n=i(8160),r=i(6133),o={};e.schema=function(t,e,i){void 0===i&&(i={}),n.assertOptions(i,["appendPath","override"]);try{return o.schema(t,e,i)}catch(t){throw i.appendPath&&void 0!==t.path&&(t.message="".concat(t.message," (").concat(t.path,")")),t}},o.schema=function(t,e,i){s(void 0!==e,"Invalid undefined schema"),Array.isArray(e)&&(s(e.length,"Invalid empty array schema"),1===e.length&&(e=e[0]));const r=function(e){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return!1!==i.override?e.valid(t.override,...n):e.valid(...n)};if(o.simple(e))return r(t,e);if("function"==typeof e)return t.custom(e);if(s("object"==typeof e,"Invalid schema content:",typeof e),n.isResolvable(e))return r(t,e);if(n.isSchema(e))return e;if(Array.isArray(e)){for(const i of e)if(!o.simple(i))return t.alternatives().try(...e);return r(t,...e)}return e instanceof RegExp?t.string().regex(e):e instanceof Date?r(t.date(),e):(s(w.getPrototypeOf(e)===w.getPrototypeOf({}),"Schema can only contain plain objects"),t.object().keys(e))},e.ref=function(t,e){return r.isRef(t)?t:r.create(t,e)},e.compile=function(t,i,r){void 0===r&&(r={}),n.assertOptions(r,["legacy"]);const h=i&&i[n.symbols.any];if(h)return s(r.legacy||h.version===n.version,"Cannot mix different versions of joi schemas:",h.version,n.version),i;if("object"!=typeof i||!r.legacy)return e.schema(t,i,{appendPath:!0});const a=o.walk(i);return a?a.compile(a.root,i):e.schema(t,i,{appendPath:!0})},o.walk=function(t){if("object"!=typeof t)return null;if(Array.isArray(t)){for(const e of t){const t=o.walk(e);if(t)return t}return null}const e=t[n.symbols.any];if(e)return{root:t[e.root],compile:e.compile};s(w.getPrototypeOf(t)===w.getPrototypeOf({}),"Schema can only contain plain objects");for(const e in t){const i=o.walk(t[e]);if(i)return i}return null},o.simple=function(t){return null===t||["boolean","string","number"].includes(typeof t)},e.when=function(t,i,h){if(void 0===h&&(s(i&&"object"==typeof i,"Missing options"),h=i,i=r.create(".")),Array.isArray(h)&&(h={switch:h}),n.assertOptions(h,["is","not","then","otherwise","switch","break"]),n.isSchema(i))return s(void 0===h.is,'"is" can not be used with a schema condition'),s(void 0===h.not,'"not" can not be used with a schema condition'),s(void 0===h.switch,'"switch" can not be used with a schema condition'),o.condition(t,{is:i,then:h.then,otherwise:h.otherwise,break:h.break});if(s(r.isRef(i)||"string"==typeof i,"Invalid condition:",i),s(void 0===h.not||void 0===h.is,'Cannot combine "is" with "not"'),void 0===h.switch){let a=h;void 0!==h.not&&(a={is:h.not,then:h.otherwise,otherwise:h.then,break:h.break});let u=void 0!==a.is?t.$_compile(a.is):t.$_root.invalid(null,!1,0,"").required();return s(void 0!==a.then||void 0!==a.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),s(void 0===a.break||void 0===a.then||void 0===a.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===h.is||r.isRef(h.is)||n.isSchema(h.is)||(u=u.required()),o.condition(t,{ref:e.ref(i),is:u,then:a.then,otherwise:a.otherwise,break:a.break})}s(Array.isArray(h.switch),'"switch" must be an array'),s(void 0===h.is,'Cannot combine "switch" with "is"'),s(void 0===h.not,'Cannot combine "switch" with "not"'),s(void 0===h.then,'Cannot combine "switch" with "then"');const a={ref:e.ref(i),switch:[],break:h.break};for(let e=0;e<h.switch.length;++e){const i=h.switch[e],o=e===h.switch.length-1;n.assertOptions(i,o?["is","then","otherwise"]:["is","then"]),s(void 0!==i.is,'Switch statement missing "is"'),s(void 0!==i.then,'Switch statement missing "then"');const u={is:t.$_compile(i.is),then:t.$_compile(i.then)};if(r.isRef(i.is)||n.isSchema(i.is)||(u.is=u.is.required()),o){s(void 0===h.otherwise||void 0===i.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const e=void 0!==h.otherwise?h.otherwise:i.otherwise;void 0!==e&&(s(void 0===a.break,"Cannot specify both otherwise and break"),u.otherwise=t.$_compile(e))}a.switch.push(u)}return a},o.condition=function(t,e){for(const i of["then","otherwise"])void 0===e[i]?delete e[i]:e[i]=t.$_compile(e[i]);return e}},6354:(t,e,i)=>{const s=i(5688),n=i(8160),r=i(3328);e.Report=class{L_(t){if(this.template=t,!this.flags.label&&0===this.path.length){const t=this.B_(this.template,"root");t&&(this.local.label=t)}}toString(){if(this.message)return this.message;const t=this.code;if(!this.prefs.errors.render)return this.code;const e=this.B_(this.template)||this.B_(this.prefs.messages)||this.B_(this.messages);return void 0===e?'Error code "'.concat(t,'" is not defined, your custom type is missing the correct messages definition'):(this.message=e.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}B_(t,i){return e.template(this.value,t,i||this.code,this.state,this.prefs)}constructor(t,i,s,n,r,o,h){if(this.code=t,this.flags=n,this.messages=r,this.path=o.path,this.prefs=h,this.state=o,this.value=i,this.message=null,this.template=null,this.local=s||{},this.local.label=e.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const t=this.path[this.path.length-1];"object"!=typeof t&&(this.local.key=t)}}},e.path=function(t){let e="";for(const i of t)"object"!=typeof i&&("string"==typeof i?(e&&(e+="."),e+=i):e+="[".concat(i,"]"));return e},e.template=function(t,e,i,s,o){if(!e)return;if(r.isTemplate(e))return"root"!==i?e:null;let h=o.errors.language;if(n.isResolvable(h)&&(h=h.resolve(t,s,o)),h&&e[h]){if(void 0!==e[h][i])return e[h][i];if(void 0!==e[h]["*"])return e[h]["*"]}return e[i]?e[i]:e["*"]},e.label=function(t,i,s,n){if(!s.errors.label)return"";if(t.label)return t.label;let r=i.path;return"key"===s.errors.label&&i.path.length>1&&(r=i.path.slice(-1)),e.path(r)||e.template(null,s.messages,"root",i,s)||n&&e.template(null,n,"root",i,s)||"value"},e.process=function(t,i,s){if(!t)return null;const{override:n,message:r,details:o}=e.details(t);if(n)return n;if(s.errors.stack)return new e.ValidationError(r,o,i);const h=g.stackTraceLimit;g.stackTraceLimit=0;const a=new e.ValidationError(r,o,i);return g.stackTraceLimit=h,a},e.details=function(t,e){void 0===e&&(e={});let i=[];const s=[];for(const n of t){if(n instanceof g){if(!1!==e.override)return{override:n};const t=n.toString();i.push(t),s.push({message:t,type:"override",context:{error:n}});continue}const t=n.toString();i.push(t),s.push({message:t,path:n.path.filter((t=>"object"!=typeof t)),type:n.code,context:n.local})}return i.length>1&&(i=[...new Set(i)]),{message:i.join(". "),details:s}},e.ValidationError=class extends g{static isError(t){return t instanceof e.ValidationError}constructor(t,e,i){super(t),this.O_=i,this.details=e}},e.ValidationError.prototype.isJoi=!0,e.ValidationError.prototype.name="ValidationError",e.ValidationError.prototype.annotate=s.error},8901:(t,e,i)=>{const s=i(375),n=i(8571),r=i(8160),o=i(6914),h={};e.type=function(t,e){const i=w.getPrototypeOf(t),a=n(i),u=t.A_(w.create(a)),c=w.assign({},e);delete c.base,a.w_=c;const l=i.w_||{};c.messages=o.merge(l.messages,c.messages),c.properties=w.assign({},l.properties,c.properties),u.type=c.type,c.flags=w.assign({},l.flags,c.flags);const d=w.assign({},l.terms);if(c.terms)for(const t in c.terms){const e=c.terms[t];s(void 0===u.$_terms[t],"Invalid term override for",c.type,t),u.$_terms[t]=e.init,d[t]=e}c.terms=d,c.args||(c.args=l.args),c.prepare=h.prepare(c.prepare,l.prepare),c.coerce&&("function"==typeof c.coerce&&(c.coerce={method:c.coerce}),c.coerce.from&&!Array.isArray(c.coerce.from)&&(c.coerce={method:c.coerce.method,from:[].concat(c.coerce.from)})),c.coerce=h.coerce(c.coerce,l.coerce),c.validate=h.validate(c.validate,l.validate);const f=w.assign({},l.rules);if(c.rules)for(const t in c.rules){const e=c.rules[t];s("object"==typeof e,"Invalid rule definition for",c.type,t);let i=e.method;if(void 0===i&&(i=function(){return this.$_addRule(t)}),i&&(s(!a[t],"Rule conflict in",c.type,t),a[t]=i),s(!f[t],"Rule conflict in",c.type,t),f[t]=e,e.alias){const t=[].concat(e.alias);for(const i of t)a[i]=e.method}e.args&&(e.argsByName=new Map,e.args=e.args.map((t=>("string"==typeof t&&(t={name:t}),s(!e.argsByName.has(t.name),"Duplicated argument name",t.name),r.isSchema(t.assert)&&(t.assert=t.assert.strict().label(t.name)),e.argsByName.set(t.name,t),t))))}c.rules=f;const _=w.assign({},l.modifiers);if(c.modifiers)for(const t in c.modifiers){s(!a[t],"Rule conflict in",c.type,t);const e=c.modifiers[t];s("function"==typeof e,"Invalid modifier definition for",c.type,t);const i=function(e){return this.rule({[t]:e})};a[t]=i,_[t]=e}if(c.modifiers=_,c.overrides){a.x_=i,u.$_super={};for(const t in c.overrides)s(i[t],"Cannot override missing",t),c.overrides[t][r.symbols.parent]=i[t],u.$_super[t]=i[t].bind(u);w.assign(a,c.overrides)}c.cast=w.assign({},l.cast,c.cast);const v=w.assign({},l.manifest,c.manifest);return v.build=h.build(c.manifest&&c.manifest.build,l.manifest&&l.manifest.build),c.manifest=v,c.rebuild=h.rebuild(c.rebuild,l.rebuild),u},h.build=function(t,e){return t&&e?function(i,s){return e(t(i,s),s)}:t||e},h.coerce=function(t,e){return t&&e?{from:t.from&&e.from?[...new Set([...t.from,...e.from])]:null,method(i,s){let n;if((!e.from||e.from.includes(typeof i))&&(n=e.method(i,s),n)){if(n.errors||void 0===n.value)return n;i=n.value}if(!t.from||t.from.includes(typeof i)){const e=t.method(i,s);if(e)return e}return n}}:t||e},h.prepare=function(t,e){return t&&e?function(i,s){const n=t(i,s);if(n){if(n.errors||void 0===n.value)return n;i=n.value}return e(i,s)||n}:t||e},h.rebuild=function(t,e){return t&&e?function(i){e(i),t(i)}:t||e},h.validate=function(t,e){return t&&e?function(i,s){const n=e(i,s);if(n){if(n.errors&&(!Array.isArray(n.errors)||n.errors.length))return n;i=n.value}return t(i,s)||n}:t||e}},5107:(t,e,i)=>{const s=i(375),n=i(8571),r=i(8652),o=i(8160),h=i(3292),a=i(6354),u=i(8901),c=i(9708),l=i(6133),d=i(3328),f=i(1152);let _;const v={types:{alternatives:i(4946),any:i(8068),array:i(546),boolean:i(4937),date:i(7500),function:i(390),link:i(8785),number:i(3832),object:i(8966),string:i(7417),symbol:i(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const t={F_:new Set(w.keys(v.types))};for(const e of t.F_)t[e]=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return s(!i.length||["alternatives","link","object"].includes(e),"The",e,"type does not allow arguments"),v.generate(this,v.types[e],i)};for(const e of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])t[e]=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return this.any()[e](...i)};w.assign(t,v.methods);for(const e in v.aliases){const i=v.aliases[e];t[e]=t[i]}return t.x=t.expression,f.setup&&f.setup(t),t}};v.methods={ValidationError:a.ValidationError,version:o.version,cache:r.provider,assert(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];v.assert(t,e,!0,s)},attempt:function(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];return v.assert(t,e,!1,s)},build(t){return s("function"==typeof c.build,"Manifest functionality disabled"),c.build(this,t)},checkPreferences(t){o.checkPreferences(t)},compile(t,e){return h.compile(this,t,e)},defaults(t){s("function"==typeof t,"modifier must be a function");const e=w.assign({},this);for(const i of e.F_){const n=t(e[i]());s(o.isSchema(n),"modifier must return a valid schema object"),e[i]=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return v.generate(this,n,e)}}return e},expression:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new d(...e)},extend(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];o.verifyFlat(e,"extend"),_=_||i(3378),s(e.length,"You need to provide at least one extension"),this.assert(e,_.extensions);const r=w.assign({},this);r.F_=new Set(r.F_);for(let t of e){"function"==typeof t&&(t=t(r)),this.assert(t,_.extension);const e=v.expandExtension(t,r);for(const t of e){s(void 0===r[t.type]||r.F_.has(t.type),"Cannot override name",t.type);const e=t.base||this.any(),i=u.type(e,t);r.F_.add(t.type),r[t.type]=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return v.generate(this,i,e)}}}return r},isError:a.ValidationError.isError,isExpression:d.isTemplate,isRef:l.isRef,isSchema:o.isSchema,in:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return l.in(...e)},override:o.symbols.override,ref:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return l.create(...e)},types(){const t={};for(const e of this.F_)t[e]=this[e]();for(const e in v.aliases)t[e]=this[e]();return t}},v.assert=function(t,e,i,s){const r=s[0]instanceof g||"string"==typeof s[0]?s[0]:null,h=null!==r?s[1]:s[0],u=e.validate(t,o.preferences({errors:{stack:!0}},h||{}));let c=u.error;if(!c)return u.value;if(r instanceof g)throw r;const l=i&&"function"==typeof c.annotate?c.annotate():c.message;throw c instanceof a.ValidationError==0&&(c=n(c)),c.message=r?"".concat(r," ").concat(l):l,c},v.generate=function(t,e,i){return s(t,"Must be invoked on a Joi instance."),e.$_root=t,e.w_.args&&i.length?e.w_.args(e,...i):e},v.expandExtension=function(t,e){if("string"==typeof t.type)return[t];const i=[];for(const s of e.F_)if(t.type.test(s)){const n=w.assign({},t);n.type=s,n.base=e[s](),i.push(n)}return i},t.exports=v.root()},6914:(t,e,i)=>{const s=i(375),n=i(8571),r=i(3328);e.compile=function(t,e){if("string"==typeof t)return s(!e,"Cannot set single message string"),new r(t);if(r.isTemplate(t))return s(!e,"Cannot set single message template"),t;s("object"==typeof t&&!Array.isArray(t),"Invalid message options"),e=e?n(e):{};for(let i in t){const n=t[i];if("root"===i||r.isTemplate(n)){e[i]=n;continue}if("string"==typeof n){e[i]=new r(n);continue}s("object"==typeof n&&!Array.isArray(n),"Invalid message for",i);const o=i;for(i in e[o]=e[o]||{},n){const t=n[i];"root"===i||r.isTemplate(t)?e[o][i]=t:(s("string"==typeof t,"Invalid message for",i,"in",o),e[o][i]=new r(t))}}return e},e.decompile=function(t){const e={};for(let i in t){const s=t[i];if("root"===i){e.root=s;continue}if(r.isTemplate(s)){e[i]=s.describe({compact:!0});continue}const n=i;for(i in e[n]={},s){const t=s[i];"root"!==i?e[n][i]=t.describe({compact:!0}):e[n].root=t}}return e},e.merge=function(t,i){if(!t)return e.compile(i);if(!i)return t;if("string"==typeof i)return new r(i);if(r.isTemplate(i))return i;const o=n(t);for(let t in i){const e=i[t];if("root"===t||r.isTemplate(e)){o[t]=e;continue}if("string"==typeof e){o[t]=new r(e);continue}s("object"==typeof e&&!Array.isArray(e),"Invalid message for",t);const n=t;for(t in o[n]=o[n]||{},e){const i=e[t];"root"===t||r.isTemplate(i)?o[n][t]=i:(s("string"==typeof i,"Invalid message for",t,"in",n),o[n][t]=new r(i))}}return o}},2294:(t,e,i)=>{const s=i(375),n=i(8160),r=i(6133),o={};e.Ids=o.Ids=class{clone(){const t=new o.Ids;return t.V_=new Map(this.V_),t.W_=new Map(this.W_),t.U_=this.U_,t}concat(t){t.U_&&(this.U_=!0);for(const[e,i]of t.V_.entries())s(!this.W_.has(e),"Schema id conflicts with existing key:",e),this.V_.set(e,i);for(const[e,i]of t.W_.entries())s(!this.V_.has(e),"Schema key conflicts with existing id:",e),this.W_.set(e,i)}fork(t,e,i){const r=this.G_(t);r.push({schema:i});const h=r.shift();let a={id:h.id,schema:e(h.schema)};s(n.isSchema(a.schema),"adjuster function failed to return a joi schema type");for(const t of r)a={id:t.id,schema:o.fork(t.schema,a.id,a.schema)};return a.schema}labels(t,e){void 0===e&&(e=[]);const i=t[0],s=this.H_(i);if(!s)return[...e,...t].join(".");const n=t.slice(1);return e=[...e,s.schema.__.label||i],n.length?s.schema.a_.labels(n,e):e.join(".")}reach(t,e){void 0===e&&(e=[]);const i=t[0],n=this.H_(i);s(n,"Schema does not contain path",[...e,...t].join("."));const r=t.slice(1);return r.length?n.schema.a_.reach(r,[...e,i]):n.schema}register(t,e){let{key:i}=void 0===e?{}:e;if(!t||!n.isSchema(t))return;(t.$_property("schemaChain")||t.a_.U_)&&(this.U_=!0);const r=t.__.id;if(r){const e=this.V_.get(r);s(!e||e.schema===t,"Cannot add different schemas with the same id:",r),s(!this.W_.has(r),"Schema id conflicts with existing key:",r),this.V_.set(r,{schema:t,id:r})}i&&(s(!this.W_.has(i),"Schema already contains key:",i),s(!this.V_.has(i),"Schema key conflicts with existing id:",i),this.W_.set(i,{schema:t,id:i}))}reset(){this.V_=new Map,this.W_=new Map,this.U_=!1}G_(t,e,i){void 0===e&&(e=[]),void 0===i&&(i=[]);const n=t[0],r=this.H_(n);s(r,"Schema does not contain path",[...e,...t].join(".")),i=[r,...i];const o=t.slice(1);return o.length?r.schema.a_.G_(o,[...e,n],i):i}H_(t){return this.V_.get(t)||this.W_.get(t)}constructor(){this.V_=new Map,this.W_=new Map,this.U_=!1}},o.fork=function(t,i,s){const n=e.schema(t,{each:(t,e)=>{let{key:n}=e;if(i===(t.__.id||n))return s},ref:!1});return n?n.$_mutateRebuild():t},e.schema=function(t,e){let i;for(const s in t.__){if("_"===s[0])continue;const n=o.scan(t.__[s],{source:"flags",name:s},e);void 0!==n&&(i=i||t.clone(),i.__[s]=n)}for(let s=0;s<t.v_.length;++s){const n=t.v_[s],r=o.scan(n.args,{source:"rules",name:n.name},e);if(void 0!==r){i=i||t.clone();const e=w.assign({},n);e.args=r,i.v_[s]=e,i.m_.get(n.name)===n&&i.m_.set(n.name,e)}}for(const s in t.$_terms){if("_"===s[0])continue;const n=o.scan(t.$_terms[s],{source:"terms",name:s},e);void 0!==n&&(i=i||t.clone(),i.$_terms[s]=n)}return i},o.scan=function(t,e,i,s,h){const a=s||[];if(null===t||"object"!=typeof t)return;let u;if(Array.isArray(t)){for(let s=0;s<t.length;++s){const n="terms"===e.source&&"keys"===e.name&&t[s].key,r=o.scan(t[s],e,i,[s,...a],n);void 0!==r&&(u=u||t.slice(),u[s]=r)}return u}if(!1!==i.schema&&n.isSchema(t)||!1!==i.ref&&r.isRef(t)){const s=i.each(t,v(d({},e),{path:a,key:h}));return s===t?void 0:s}for(const s in t){if("_"===s[0])continue;const n=o.scan(t[s],e,i,[s,...a],h);void 0!==n&&(u=u||w.assign({},t),u[s]=n)}return u}},6133:(t,e,i)=>{const s=i(375),n=i(8571),r=i(9621),o=i(8160);let h;const a={symbol:Po("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};e.create=function(t,e){void 0===e&&(e={}),s("string"==typeof t,"Invalid reference key:",t),o.assertOptions(e,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),s(!e.prefix||"object"==typeof e.prefix,"options.prefix must be of type object");const i=w.assign({},a.defaults,e);delete i.prefix;const n=i.separator,r=a.context(t,n,e.prefix);if(i.type=r.type,t=r.key,"value"===i.type)if(r.root&&(s(!n||t[0]!==n,"Cannot specify relative path with root prefix"),i.ancestor="root",t||(t=null)),n&&n===t)t=null,i.ancestor=0;else if(void 0!==i.ancestor)s(!n||!t||t[0]!==n,"Cannot combine prefix with ancestor option");else{const[e,s]=a.ancestor(t,n);s&&""===(t=t.slice(s))&&(t=null),i.ancestor=e}return i.path=n?null===t?[]:t.split(n):[t],new a.Ref(i)},e.in=function(t,i){return void 0===i&&(i={}),e.create(t,v(d({},i),{in:!0}))},e.isRef=function(t){return!!t&&!!t[o.symbols.ref]},a.Ref=class{resolve(t,e,i,n,r){return void 0===r&&(r={}),s(!this.in||r.in,"Invalid in() reference usage"),"global"===this.type?this.Ud(i.context,e,r):"local"===this.type?this.Ud(n,e,r):this.ancestor?"root"===this.ancestor?this.Ud(e.ancestors[e.ancestors.length-1],e,r):(s(this.ancestor<=e.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this.Ud(e.ancestors[this.ancestor-1],e,r)):this.Ud(t,e,r)}Ud(t,e,i){let s;if("value"===this.type&&e.mainstay.shadow&&!1!==i.shadow&&(s=e.mainstay.shadow.get(this.absolute(e))),void 0===s&&(s=r(t,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(s=this.adjust(s)),this.map){const t=this.map.get(s);void 0!==t&&(s=t)}return e.mainstay&&e.mainstay.tracer.resolve(e,this,s),s}toString(){return this.display}absolute(t){return[...t.path.slice(0,-this.ancestor),...this.path]}clone(){return new a.Ref(this)}describe(){const t={path:this.path};"value"!==this.type&&(t.type=this.type),"."!==this.separator&&(t.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(t.ancestor=this.ancestor),this.map&&(t.map=[...this.map]);for(const e of["adjust","iterables","render"])null!==this[e]&&void 0!==this[e]&&(t[e]=this[e]);return!1!==this.in&&(t.in=!0),{ref:t}}updateDisplay(){const t=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display="ref:".concat(this.type,":").concat(t));if(!this.separator)return void(this.display="ref:".concat(t));if(!this.ancestor)return void(this.display="ref:".concat(this.separator).concat(t));if("root"===this.ancestor)return void(this.display="ref:root:".concat(t));if(1===this.ancestor)return void(this.display="ref:".concat(t||".."));const e=new Array(this.ancestor+1).fill(this.separator).join("");this.display="ref:".concat(e).concat(t||"")}constructor(t){s("object"==typeof t,"Invalid reference construction"),o.assertOptions(t,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),s([!1,void 0].includes(t.separator)||"string"==typeof t.separator&&1===t.separator.length,"Invalid separator"),s(!t.adjust||"function"==typeof t.adjust,"options.adjust must be a function"),s(!t.map||Array.isArray(t.map),"options.map must be an array"),s(!t.map||!t.adjust,"Cannot set both map and adjust options"),w.assign(this,a.defaults,t),s("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}},a.Ref.prototype[o.symbols.ref]=!0,e.build=function(t){return"value"===(t=w.assign({},a.defaults,t)).type&&void 0===t.ancestor&&(t.ancestor=1),new a.Ref(t)},a.context=function(t,e,i){if(void 0===i&&(i={}),t=t.trim(),i){const s=void 0===i.global?"$":i.global;if(s!==e&&t.startsWith(s))return{key:t.slice(s.length),type:"global"};const n=void 0===i.local?"#":i.local;if(n!==e&&t.startsWith(n))return{key:t.slice(n.length),type:"local"};const r=void 0===i.root?"/":i.root;if(r!==e&&t.startsWith(r))return{key:t.slice(r.length),type:"value",root:!0}}return{key:t,type:"value"}},a.ancestor=function(t,e){if(!e)return[1,0];if(t[0]!==e)return[1,0];if(t[1]!==e)return[0,1];let i=2;for(;t[i]===e;)++i;return[i-1,i]},e.toSibling=0,e.toParent=1,e.Manager=class{register(t,s){if(t)if(s=void 0===s?e.toParent:s,Array.isArray(t))for(const e of t)this.register(e,s);else if(o.isSchema(t))for(const e of t.c_.refs)e.ancestor-s>=0&&this.refs.push({ancestor:e.ancestor-s,root:e.root});else e.isRef(t)&&"value"===t.type&&t.ancestor-s>=0&&this.refs.push({ancestor:t.ancestor-s,root:t.root}),h=h||i(3328),h.isTemplate(t)&&this.register(t.refs(),s)}get length(){return this.refs.length}clone(){const t=new e.Manager;return t.refs=n(this.refs),t}reset(){this.refs=[]}roots(){return this.refs.filter((t=>!t.ancestor)).map((t=>t.root))}constructor(){this.refs=[]}}},3378:(t,e,i)=>{const s=i(5107),n={};n.wrap=s.string().min(1).max(2).allow(!1),e.preferences=s.object({allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),context:s.object(),convert:s.boolean(),dateFormat:s.valid("date","iso","string","time","utc"),debug:s.boolean(),errors:{escapeHtml:s.boolean(),label:s.valid("path","key",!1),language:[s.string(),s.object().ref()],render:s.boolean(),stack:s.boolean(),wrap:{label:n.wrap,array:n.wrap,string:n.wrap}},externals:s.boolean(),messages:s.object(),noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:s.valid("required","optional","forbidden"),skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()}).strict(),n.nameRx=/^[a-zA-Z0-9]\w*$/,n.rule=s.object({alias:s.array().items(s.string().pattern(n.nameRx)).single(),args:s.array().items(s.string(),s.object({name:s.string().pattern(n.nameRx).required(),ref:s.boolean(),assert:s.alternatives([s.function(),s.object().schema()]).conditional("ref",{is:!0,then:s.required()}),normalize:s.function(),message:s.string().when("assert",{is:s.function(),then:s.required()})})),convert:s.boolean(),manifest:s.boolean(),method:s.function().allow(!1),multi:s.boolean(),validate:s.function()}),e.extension=s.object({type:s.alternatives([s.string(),s.object().regex()]).required(),args:s.function(),cast:s.object().pattern(n.nameRx,s.object({from:s.function().maxArity(1).required(),to:s.function().minArity(1).maxArity(2).required()})),base:s.object().schema().when("type",{is:s.object().regex(),then:s.forbidden()}),coerce:[s.function().maxArity(3),s.object({method:s.function().maxArity(3).required(),from:s.array().items(s.string()).single()})],flags:s.object().pattern(n.nameRx,s.object({setter:s.string(),default:s.any()})),manifest:{build:s.function().arity(2)},messages:[s.object(),s.string()],modifiers:s.object().pattern(n.nameRx,s.function().minArity(1).maxArity(2)),overrides:s.object().pattern(n.nameRx,s.function()),prepare:s.function().maxArity(3),rebuild:s.function().arity(1),rules:s.object().pattern(n.nameRx,n.rule),terms:s.object().pattern(n.nameRx,s.object({init:s.array().allow(null).required(),manifest:s.object().pattern(/.+/,[s.valid("schema","single"),s.object({mapped:s.object({from:s.string().required(),to:s.string().required()}).required()})])})),validate:s.function().maxArity(3)}).strict(),e.extensions=s.array().items(s.object(),s.function().arity(1)).strict(),n.desc={buffer:s.object({buffer:s.string()}),func:s.object({function:s.function().required(),options:{literal:!0}}),override:s.object({override:!0}),ref:s.object({ref:s.object({type:s.valid("value","global","local"),path:s.array().required(),separator:s.string().length(1).allow(!1),ancestor:s.number().min(0).integer().allow("root"),map:s.array().items(s.array().length(2)).min(1),adjust:s.function(),iterables:s.boolean(),in:s.boolean(),render:s.boolean()}).required()}),regex:s.object({regex:s.string().min(3)}),special:s.object({special:s.valid("deep").required()}),template:s.object({template:s.string().required(),options:s.object()}),value:s.object({value:s.alternatives([s.object(),s.array()]).required()})},n.desc.entity=s.alternatives([s.array().items(s.link("...")),s.boolean(),s.function(),s.number(),s.string(),n.desc.buffer,n.desc.func,n.desc.ref,n.desc.regex,n.desc.special,n.desc.template,n.desc.value,s.link("/")]),n.desc.values=s.array().items(null,s.boolean(),s.function(),s.number().allow(1/0,-1/0),s.string().allow(""),s.symbol(),n.desc.buffer,n.desc.func,n.desc.override,n.desc.ref,n.desc.regex,n.desc.template,n.desc.value),n.desc.messages=s.object().pattern(/.+/,[s.string(),n.desc.template,s.object().pattern(/.+/,[s.string(),n.desc.template])]),e.description=s.object({type:s.string().required(),flags:s.object({cast:s.string(),default:s.any(),description:s.string(),empty:s.link("/"),failover:n.desc.entity,id:s.string(),label:s.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:s.boolean(),unit:s.string()}).unknown(),preferences:{allowUnknown:s.boolean(),abortEarly:s.boolean(),artifacts:s.boolean(),cache:s.boolean(),convert:s.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:s.boolean(),label:["path","key"],language:[s.string(),n.desc.ref],wrap:{label:n.wrap,array:n.wrap}},externals:s.boolean(),messages:n.desc.messages,noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:["required","optional","forbidden"],skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()},allow:n.desc.values,invalid:n.desc.values,rules:s.array().min(1).items({name:s.string().required(),args:s.object().min(1),keep:s.boolean(),message:[s.string(),n.desc.messages],warn:s.boolean()}),keys:s.object().pattern(/.*/,s.link("/")),link:n.desc.ref}).pattern(/^[a-z]\w*$/,s.any())},493:(t,e,i)=>{const s=i(8571),n=i(9621),r=i(8160),o={value:Po("value")};t.exports=o.State=class{localize(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);const s=new o.State(t,e,this);return i&&s.schemas&&(s.schemas=[o.schemas(i),...s.schemas]),s}nest(t,e){const i=new o.State(this.path,this.ancestors,this);return i.schemas=i.schemas&&[o.schemas(t),...i.schemas],i.debug=e,i}shadow(t,e){this.mainstay.shadow=this.mainstay.shadow||new o.Shadow,this.mainstay.shadow.set(this.path,t,e)}snapshot(){this.mainstay.shadow&&(this.Z_=s(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.Z_),this.Z_=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this.Z_),this.Z_=void 0),this.mainstay.commit()}constructor(t,e,i){this.path=t,this.ancestors=e,this.mainstay=i.mainstay,this.schemas=i.schemas,this.debug=null}},o.schemas=function(t){return r.isSchema(t)?{schema:t}:t},o.Shadow=class{set(t,e,i){if(!t.length||"strip"===i&&"number"==typeof t[t.length-1])return;this.g_=this.g_||new Map;let s=this.g_;for(let e=0;e<t.length;++e){const i=t[e];let n=s.get(i);n||(n=new Map,s.set(i,n)),s=n}s[o.value]=e}get(t){const e=this.node(t);if(e)return e[o.value]}node(t){if(this.g_)return n(this.g_,t,{iterables:!0})}override(t,e){if(!this.g_)return;const i=t.slice(0,-1),s=t[t.length-1],r=n(this.g_,i,{iterables:!0});e?r.set(s,e):r&&r.delete(s)}constructor(){this.g_=null}}},3328:(t,e,i)=>{const s=i(375),n=i(8571),r=i(5277),o=i(1447),h=i(8160),a=i(6354),u=i(6133),c={symbol:Po("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join("\x01"),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};t.exports=c.Template=class{X_(){if(!this.source.includes("{"))return;const t=c.encode(this.source),e=c.split(t);let i=!1;const s=[],n=e.shift();n&&s.push(n);for(const t of e){const e="{"!==t[0],n=e?"}":"}}",r=t.indexOf(n);if(-1===r||"{"===t[1]){s.push("{".concat(c.decode(t)));continue}let o=t.slice(e?0:1,r);const h=":"===o[0];h&&(o=o.slice(1));const a=this.z_(c.decode(o),{raw:e,wrapped:h});s.push(a),"string"!=typeof a&&(i=!0);const u=t.slice(r+n.length);u&&s.push(c.decode(u))}i?this.B_=s:this.rendered=s.join("")}static date(t,e){return c.dateFormat[e.dateFormat].call(t)}describe(t){if(void 0===t&&(t={}),!this.q_&&t.compact)return this.source;const e={template:this.source};return this.q_&&(e.options=this.q_),this.Y_&&(e.functions=this.Y_),e}static build(t){return new c.Template(t.template,t.options||t.functions?v(d({},t.options),{functions:t.functions}):void 0)}isDynamic(){return!!this.B_}static isTemplate(t){return!!t&&!!t[h.symbols.template]}refs(){if(!this.B_)return;const t=[];for(const e of this.B_)"string"!=typeof e&&t.push(...e.refs);return t}resolve(t,e,i,s){return this.B_&&1===this.B_.length?this.K_(this.B_[0],t,e,i,s,{}):this.render(t,e,i,s)}K_(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return t.ref?t.ref.resolve(...i):t.formula.evaluate(i)}render(t,e,i,s,n){if(void 0===n&&(n={}),!this.isDynamic())return this.rendered;const o=[];for(const h of this.B_)if("string"==typeof h)o.push(h);else{const a=this.K_(h,t,e,i,s,n),u=c.stringify(a,t,e,i,s,n);if(void 0!==u){const t=h.raw||!1===(n.errors&&n.errors.escapeHtml)?u:r(u);o.push(c.wrap(t,h.wrapped&&i.errors.wrap.label))}}return o.join("")}z_(t,e){let{raw:i,wrapped:s}=e;const n=[],r=t=>{const e=u.create(t,this.q_);return n.push(e),t=>{const i=e.resolve(...t);return void 0!==i?i:null}};try{const e=this.Y_?d(d({},c.functions),this.Y_):c.functions;var h=new o.Parser(t,{reference:r,functions:e,constants:c.constants})}catch(e){throw e.message='Invalid template variable "'.concat(t,'" fails due to: ').concat(e.message),e}if(h.single){if("reference"===h.single.type){const t=n[0];return{ref:t,raw:i,refs:n,wrapped:s||"local"===t.type&&"label"===t.key}}return c.stringify(h.single.value)}return{formula:h,raw:i,refs:n}}toString(){return this.source}constructor(t,e){if(s("string"==typeof t,"Template source must be a string"),s(!t.includes("\0")&&!t.includes("\x01"),"Template source cannot contain reserved control characters"),this.source=t,this.rendered=t,this.B_=null,e){const t=e,{functions:i}=t,r=y(t,["functions"]);this.q_=w.keys(r).length?n(r):void 0,this.Y_=i,this.Y_&&(s(w.keys(this.Y_).every((t=>"string"==typeof t)),"Functions keys must be strings"),s(w.values(this.Y_).every((t=>"function"==typeof t)),"Functions values must be functions"))}else this.q_=void 0,this.Y_=void 0;this.X_()}},c.Template.prototype[h.symbols.template]=!0,c.Template.prototype.isImmutable=!0,c.encode=function(t){return t.replace(/\\(\{+)/g,((t,e)=>c.opens.slice(0,e.length))).replace(/\\(\}+)/g,((t,e)=>c.closes.slice(0,e.length)))},c.decode=function(t){return t.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},c.split=function(t){const e=[];let i="";for(let s=0;s<t.length;++s){const n=t[s];if("{"===n){let n="";for(;s+1<t.length&&"{"===t[s+1];)n+="{",++s;e.push(i),i=n}else i+=n}return e.push(i),e},c.wrap=function(t,e){return e?1===e.length?"".concat(e).concat(t).concat(e):"".concat(e[0]).concat(t).concat(e[1]):t},c.stringify=function(t,e,i,s,n,r){void 0===r&&(r={});const o=typeof t,h=s&&s.errors&&s.errors.wrap||{};let a=!1;if(u.isRef(t)&&t.render&&(a=t.in,t=t.resolve(e,i,s,n,d({in:t.in},r))),null===t)return"null";if("string"===o)return c.wrap(t,r.arrayItems&&h.string);if("number"===o||"function"===o||"symbol"===o)return t.toString();if("object"!==o)return JSON.stringify(t);if(t instanceof Date)return c.Template.date(t,s);if(t instanceof Map){const e=[];for(const[i,s]of t.entries())e.push("".concat(i.toString()," -> ").concat(s.toString()));t=e}if(!Array.isArray(t))return t.toString();const l=[];for(const o of t)l.push(c.stringify(o,e,i,s,n,d({arrayItems:!0},r)));return c.wrap(l.join(", "),!a&&h.array)},c.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},c.functions={if:(t,e,i)=>t?e:i,length:t=>"string"==typeof t?t.length:t&&"object"==typeof t?Array.isArray(t)?t.length:w.keys(t).length:null,msg(t){const[e,i,s,n,r]=this,o=r.messages;if(!o)return"";const h=a.template(e,o[0],t,i,s)||a.template(e,o[1],t,i,s);return h?h.render(e,i,s,n,r):""},number:t=>"number"==typeof t?t:"string"==typeof t?C(t):"boolean"==typeof t?t?1:0:t instanceof Date?t.getTime():null}},4946:(t,e,i)=>{const s=i(375),n=i(1687),r=i(8068),o=i(8160),h=i(3292),a=i(6354),u=i(6133),c={};t.exports=r.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:u.toSibling}},args:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return 1===i.length&&Array.isArray(i[0])?t.try(...i[0]):t.try(...i)},validate(t,e){const{schema:i,error:s,state:r,prefs:o}=e;if(i.__.match){const e=[],h=[];for(let s=0;s<i.$_terms.matches.length;++s){const n=i.$_terms.matches[s],a=r.nest(n.schema,"match.".concat(s));a.snapshot();const u=n.schema.$_validate(t,a,o);u.errors?(h.push(u.errors),a.restore()):(e.push(u.value),a.commit())}if(0===e.length)return{errors:s("alternatives.any",{details:h.map((t=>a.details(t,{override:!1})))})};if("one"===i.__.match)return 1===e.length?{value:e[0]}:{errors:s("alternatives.one")};if(e.length!==i.$_terms.matches.length)return{errors:s("alternatives.all",{details:h.map((t=>a.details(t,{override:!1})))})};const u=t=>t.$_terms.matches.some((t=>"object"===t.schema.type||"alternatives"===t.schema.type&&u(t.schema)));return u(i)?{value:e.reduce(((t,e)=>n(t,e,{mergeArrays:!1})))}:{value:e[e.length-1]}}const h=[];for(let e=0;e<i.$_terms.matches.length;++e){const s=i.$_terms.matches[e];if(s.schema){const i=r.nest(s.schema,"match.".concat(e));i.snapshot();const n=s.schema.$_validate(t,i,o);if(!n.errors)return i.commit(),n;i.restore(),h.push({schema:s.schema,reports:n.errors});continue}const n=s.ref?s.ref.resolve(t,r,o):t,a=s.is?[s]:s.switch;for(let i=0;i<a.length;++i){const h=a[i],{is:u,then:c,otherwise:l}=h,d="match.".concat(e).concat(s.switch?"."+i:"");if(u.$_match(n,r.nest(u,"".concat(d,".is")),o)){if(c)return c.$_validate(t,r.nest(c,"".concat(d,".then")),o)}else if(l)return l.$_validate(t,r.nest(l,"".concat(d,".otherwise")),o)}}return c.errors(h,e)},rules:{conditional:{method(t,e){s(!this.__.j_,"Unreachable condition"),s(!this.__.match,"Cannot combine match mode",this.__.match,"with conditional rule"),s(void 0===e.break,"Cannot use break option with alternatives conditional");const i=this.clone(),n=h.when(i,t,e),r=n.is?[n]:n.switch;for(const t of r)if(t.then&&t.otherwise){i.$_setFlag("j_",!0,{clone:!1});break}return i.$_terms.matches.push(n),i.$_mutateRebuild()}},match:{method(t){if(s(["any","one","all"].includes(t),"Invalid alternatives match mode",t),"any"!==t)for(const e of this.$_terms.matches)s(e.schema,"Cannot combine match mode",t,"with conditional rules");return this.$_setFlag("match",t)}},try:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s(e.length,"Missing alternative schemas"),o.verifyFlat(e,"try"),s(!this.__.j_,"Unreachable condition");const n=this.clone();for(const t of e)n.$_terms.matches.push({schema:n.$_compile(t)});return n.$_mutateRebuild()}}},overrides:{label(t){return this.$_parent("label",t).$_modify({each:(e,i)=>"is"!==i.path[0]&&"string"!=typeof e.__.label?e.label(t):void 0,ref:!1})}},rebuild(t){t.$_modify({each:e=>{o.isSchema(e)&&"array"===e.type&&t.$_setFlag("Q_",!0,{clone:!1})}})},manifest:{build(t,e){if(e.matches)for(const i of e.matches){const{schema:e,ref:s,is:n,not:r,then:o,otherwise:h}=i;t=e?t.try(e):s?t.conditional(s,{is:n,then:o,not:r,otherwise:h,switch:i.switch}):t.conditional(n,{then:o,otherwise:h})}return t}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),c.errors=function(t,e){let{error:i,state:s}=e;if(!t.length)return{errors:i("alternatives.any")};if(1===t.length)return{errors:t[0].reports};const n=new Set,r=[];for(const{reports:e,schema:o}of t){if(e.length>1)return c.unmatched(t,i);const h=e[0];if(h instanceof a.Report==0)return c.unmatched(t,i);if(h.state.path.length!==s.path.length){r.push({type:o.type,report:h});continue}if("any.only"===h.code){for(const t of h.local.valids)n.add(t);continue}const[u,l]=h.code.split(".");"base"!==l?r.push({type:o.type,report:h}):"object.base"===h.code?n.add(h.local.type):n.add(u)}return r.length?1===r.length?{errors:r[0].report}:c.unmatched(t,i):{errors:i("alternatives.types",{types:[...n]})}},c.unmatched=function(t,e){const i=[];for(const e of t)i.push(...e.reports);return{errors:e("alternatives.match",a.details(i,{override:!1}))}}},8068:(t,e,i)=>{const s=i(375),n=i(7629),r=i(8160),o=i(6914);t.exports=n.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(t,e){return s("function"==typeof t,"Method must be a function"),s(void 0===e||e&&"string"==typeof e,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:t,description:e}})},validate(t,e,i){let{method:s}=i;try{return s(t,e)}catch(t){return e.error("any.custom",{error:t})}},args:["method","description"],multi:!0},messages:{method(t){return this.prefs({messages:t})}},shared:{method(t){s(r.isSchema(t)&&t.__.id,"Schema must be a schema with an id");const e=this.clone();return e.$_terms.shared=e.$_terms.shared||[],e.$_terms.shared.push(t),e.$_mutateRegister(t),e}},warning:{method(t,e){return s(t&&"string"==typeof t,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:t,local:e},warn:!0})},validate:(t,e,i)=>{let{code:s,local:n}=i;return e.error(s,n)},args:["code","local"],multi:!0}},modifiers:{keep(t,e){void 0===e&&(e=!0),t.keep=e},message(t,e){t.message=o.compile(e)},warn(t,e){void 0===e&&(e=!0),t.warn=e}},manifest:{build(t,e){for(const i in e){const s=e[i];if(["examples","externals","metas","notes","tags"].includes(i))for(const e of s)t=t[i.slice(0,-1)](e);else if("alterations"!==i)if("whens"!==i){if("shared"===i)for(const e of s)t=t.shared(e)}else for(const e of s){const{ref:i,is:s,not:n,then:r,otherwise:o,concat:h}=e;t=h?t.concat(h):i?t.when(i,{is:s,not:n,then:r,otherwise:o,switch:e.switch,break:e.break}):t.when(s,{then:r,otherwise:o,break:e.break})}else{const e={};for(const{target:t,adjuster:i}of s)e[t]=i;t=t.alter(e)}}return t}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(t,e,i)=>{const s=i(375),n=i(9474),r=i(9621),o=i(8068),h=i(8160),a=i(3292),u={};t.exports=o.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},J_:{init:[]},rv:{init:[]},ov:{init:[]}},coerce:{from:"object",method(t,e){let{schema:i,state:s,prefs:n}=e;if(!Array.isArray(t))return;const r=i.$_getRule("sort");return r?u.sort(i,t,r.args.options,s,n):void 0}},validate(t,e){let{schema:i,error:s}=e;if(!Array.isArray(t)){if(i.__.single){const e=[t];return e[h.symbols.arraySingle]=!0,{value:e}}return{errors:s("array.base")}}if(i.$_getRule("items")||i.$_terms.externals)return{value:t.slice()}},rules:{has:{method(t){t=this.$_compile(t,{appendPath:!0});const e=this.$_addRule({name:"has",args:{schema:t}});return e.$_mutateRegister(t),e},validate(t,e,i){let{state:s,prefs:n,error:r}=e,{schema:o}=i;const h=[t,...s.ancestors];for(let e=0;e<t.length;++e){const i=s.localize([...s.path,e],h,o);if(o.$_match(t[e],i,n))return t}const a=o.__.label;return a?r("array.hasKnown",{patternLabel:a}):r("array.hasUnknown",null)},multi:!0},items:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];h.verifyFlat(e,"items");const s=this.$_addRule("items");for(let t=0;t<e.length;++t){const i=h.tryWithPath((()=>this.$_compile(e[t])),t,{append:!0});s.$_terms.items.push(i)}return s.$_mutateRebuild()},validate(t,e){let{schema:i,error:s,state:n,prefs:r,errorsArray:o}=e;const a=i.$_terms.ov.slice(),c=i.$_terms.ordered.slice(),l=[...i.$_terms.rv,...a],d=!t[h.symbols.arraySingle];delete t[h.symbols.arraySingle];const f=o();let _=t.length;for(let e=0;e<_;++e){const o=t[e];let h=!1,v=!1;const m=d?e:new Number(e),g=[...n.path,m];if(!i.__.sparse&&void 0===o){if(f.push(s("array.sparse",{key:m,path:g,pos:e,value:void 0},n.localize(g))),r.abortEarly)return f;c.shift();continue}const p=[t,...n.ancestors];for(const t of i.$_terms.J_)if(t.$_match(o,n.localize(g,p,t),r,{presence:"ignore"})){if(f.push(s("array.excludes",{pos:e,value:o},n.localize(g))),r.abortEarly)return f;h=!0,c.shift();break}if(h)continue;if(i.$_terms.ordered.length){if(c.length){const h=c.shift(),a=h.$_validate(o,n.localize(g,p,h),r);if(a.errors){if(f.push(...a.errors),r.abortEarly)return f}else if("strip"===h.__.result)u.fastSplice(t,e),--e,--_;else{if(!i.__.sparse&&void 0===a.value){if(f.push(s("array.sparse",{key:m,path:g,pos:e,value:void 0},n.localize(g))),r.abortEarly)return f;continue}t[e]=a.value}continue}if(!i.$_terms.items.length){if(f.push(s("array.orderedLength",{pos:e,limit:i.$_terms.ordered.length})),r.abortEarly)return f;break}}const w=[];let y=a.length;for(let h=0;h<y;++h){const c=n.localize(g,p,a[h]);c.snapshot();const l=a[h].$_validate(o,c,r);if(w[h]=l,!l.errors){if(c.commit(),t[e]=l.value,v=!0,u.fastSplice(a,h),--h,--y,!i.__.sparse&&void 0===l.value&&(f.push(s("array.sparse",{key:m,path:g,pos:e,value:void 0},n.localize(g))),r.abortEarly))return f;break}c.restore()}if(v)continue;const b=r.stripUnknown&&!!r.stripUnknown.arrays||!1;y=l.length;for(const c of l){let l;const d=a.indexOf(c);if(-1!==d)l=w[d];else{const a=n.localize(g,p,c);if(a.snapshot(),l=c.$_validate(o,a,r),!l.errors){a.commit(),"strip"===c.__.result?(u.fastSplice(t,e),--e,--_):i.__.sparse||void 0!==l.value?t[e]=l.value:(f.push(s("array.sparse",{key:m,path:g,pos:e,value:void 0},n.localize(g))),h=!0),v=!0;break}a.restore()}if(1===y){if(b){u.fastSplice(t,e),--e,--_,v=!0;break}if(f.push(...l.errors),r.abortEarly)return f;h=!0;break}}if(!h&&(i.$_terms.rv.length||i.$_terms.ov.length)&&!v){if(b){u.fastSplice(t,e),--e,--_;continue}if(f.push(s("array.includes",{pos:e,value:o},n.localize(g))),r.abortEarly)return f}}return a.length&&u.fillMissedErrors(i,f,a,t,n,r),c.length&&(u.fillOrderedErrors(i,f,c,t,n,r),f.length||u.fillDefault(c,t,n,r)),f.length?f:t},priority:!0,manifest:!1},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,e,i,s)=>{let{limit:n}=i,{name:r,operator:o,args:a}=s;return h.compare(t.length,n,o)?t:e.error("array."+r,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},ordered:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];h.verifyFlat(e,"ordered");const s=this.$_addRule("items");for(let t=0;t<e.length;++t){const i=h.tryWithPath((()=>this.$_compile(e[t])),t,{append:!0});u.validateSingle(i,s),s.$_mutateRegister(i),s.$_terms.ordered.push(i)}return s.$_mutateRebuild()}},single:{method(t){const e=void 0===t||!!t;return s(!e||!this.__.Q_,"Cannot specify single rule when array has array items"),this.$_setFlag("single",e)}},sort:{method(t){void 0===t&&(t={}),h.assertOptions(t,["by","order"]);const e={order:t.order||"ascending"};return t.by&&(e.by=a.ref(t.by,{ancestor:0}),s(!e.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:e}})},validate(t,e,i){let{error:s,state:n,prefs:r,schema:o}=e,{options:h}=i;const{value:a,errors:c}=u.sort(o,t,h,n,r);if(c)return c;for(let e=0;e<t.length;++e)if(t[e]!==a[e])return s("array.sort",{order:h.order,by:h.by?h.by.key:"value"});return t},convert:!0},sparse:{method(t){const e=void 0===t||!!t;return this.__.sparse===e?this:(e?this.clone():this.$_addRule("items")).$_setFlag("sparse",e,{clone:!1})}},unique:{method(t,e){void 0===e&&(e={}),s(!t||"function"==typeof t||"string"==typeof t,"comparator must be a function or a string"),h.assertOptions(e,["ignoreUndefined","separator"]);const i={name:"unique",args:{options:e,comparator:t}};if(t)if("string"==typeof t){const s=h.default(e.separator,".");i.path=s?t.split(s):[t]}else i.comparator=t;return this.$_addRule(i)},validate(t,e,i,o){let{state:h,error:a,schema:u}=e,{comparator:c,options:l}=i,{comparator:d,path:f}=o;const _={string:w.create(null),number:w.create(null),undefined:w.create(null),boolean:w.create(null),bigint:w.create(null),object:new Map,function:new Map,custom:new Map},v=d||n,m=l.ignoreUndefined;for(let e=0;e<t.length;++e){const i=f?r(t[e],f):t[e],n=d?_.custom:_[typeof i];if(s(n,"Failed to find unique map container for type",typeof i),n instanceof Map){const s=n.entries();let r;for(;!(r=s.next()).done;)if(v(r.value[0],i)){const i=h.localize([...h.path,e],[t,...h.ancestors]),s={pos:e,value:t[e],dupePos:r.value[1],dupeValue:t[r.value[1]]};return f&&(s.path=c),a("array.unique",s,i)}n.set(i,e)}else{if((!m||void 0!==i)&&void 0!==n[i]){const s={pos:e,value:t[e],dupePos:n[i],dupeValue:t[n[i]]};return f&&(s.path=c),a("array.unique",s,h.localize([...h.path,e],[t,...h.ancestors]))}n[i]=e}}return t},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(t,e)=>new Set(t)}},rebuild(t){t.$_terms.rv=[],t.$_terms.J_=[],t.$_terms.ov=[];for(const e of t.$_terms.items)u.validateSingle(e,t),"required"===e.__.presence?t.$_terms.ov.push(e):"forbidden"===e.__.presence?t.$_terms.J_.push(e):t.$_terms.rv.push(e);for(const e of t.$_terms.ordered)u.validateSingle(e,t)},manifest:{build:(t,e)=>(e.items&&(t=t.items(...e.items)),e.ordered&&(t=t.ordered(...e.ordered)),t)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),u.fillMissedErrors=function(t,e,i,s,n,r){const o=[];let h=0;for(const t of i){const e=t.__.label;e?o.push(e):++h}o.length?h?e.push(t.$_createError("array.includesRequiredBoth",s,{knownMisses:o,unknownMisses:h},n,r)):e.push(t.$_createError("array.includesRequiredKnowns",s,{knownMisses:o},n,r)):e.push(t.$_createError("array.includesRequiredUnknowns",s,{unknownMisses:h},n,r))},u.fillOrderedErrors=function(t,e,i,s,n,r){const o=[];for(const t of i)"required"===t.__.presence&&o.push(t);o.length&&u.fillMissedErrors(t,e,o,s,n,r)},u.fillDefault=function(t,e,i,s){const n=[];let r=!0;for(let o=t.length-1;o>=0;--o){const h=t[o],a=[e,...i.ancestors],u=h.$_validate(void 0,i.localize(i.path,a,h),s).value;if(r){if(void 0===u)continue;r=!1}n.unshift(u)}n.length&&e.push(...n)},u.fastSplice=function(t,e){let i=e;for(;i<t.length;)t[i++]=t[i];--t.length},u.validateSingle=function(t,e){("array"===t.type||t.__.Q_)&&(s(!e.__.single,"Cannot specify array item with single rule enabled"),e.$_setFlag("Q_",!0,{clone:!1}))},u.sort=function(t,e,i,s,n){const r="ascending"===i.order?1:-1,o=-1*r,h=r,a=(a,c)=>{let l=u.compare(a,c,o,h);if(null!==l||(i.by&&(a=i.by.resolve(a,s,n),c=i.by.resolve(c,s,n)),l=u.compare(a,c,o,h),null!==l))return l;const d=typeof a;if(d!==typeof c)throw t.$_createError("array.sort.mismatching",e,null,s,n);if("number"!==d&&"string"!==d)throw t.$_createError("array.sort.unsupported",e,{type:d},s,n);return"number"===d?(a-c)*r:a<c?o:h};try{return{value:e.slice().sort(a)}}catch(t){return{errors:t}}},u.compare=function(t,e,i,s){return t===e?0:void 0===t?1:void 0===e?-1:null===t?s:null===e?i:null}},4937:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o=i(2036),h={isBool:function(t){return"boolean"==typeof t}};t.exports=n.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(t,e){let{schema:i}=e;if("boolean"!=typeof t){if("string"==typeof t){const e=i.__.sensitive?t:t.toLowerCase();t="true"===e||"false"!==e&&t}return"boolean"!=typeof t&&(t=i.$_terms.truthy&&i.$_terms.truthy.has(t,null,null,!i.__.sensitive)||(!i.$_terms.falsy||!i.$_terms.falsy.has(t,null,null,!i.__.sensitive))&&t),{value:t}}},validate(t,e){let{error:i}=e;if("boolean"!=typeof t)return{value:t,errors:i("boolean.base")}},rules:{truthy:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];r.verifyFlat(e,"truthy");const n=this.clone();n.$_terms.truthy=n.$_terms.truthy||new o;for(let t=0;t<e.length;++t){const i=e[t];s(void 0!==i,"Cannot call truthy with undefined"),n.$_terms.truthy.add(i)}return n}},falsy:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];r.verifyFlat(e,"falsy");const n=this.clone();n.$_terms.falsy=n.$_terms.falsy||new o;for(let t=0;t<e.length;++t){const i=e[t];s(void 0!==i,"Cannot call falsy with undefined"),n.$_terms.falsy.add(i)}return n}},sensitive:{method(t){return void 0===t&&(t=!0),this.$_setFlag("sensitive",t)}}},cast:{number:{from:h.isBool,to:(t,e)=>t?1:0},string:{from:h.isBool,to:(t,e)=>t?"true":"false"}},manifest:{build:(t,e)=>(e.truthy&&(t=t.truthy(...e.truthy)),e.falsy&&(t=t.falsy(...e.falsy)),t)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o=i(3328),h={isDate:function(t){return t instanceof Date}};t.exports=n.extend({type:"date",coerce:{from:["number","string"],method:(t,e)=>{let{schema:i}=e;return{value:h.parse(t,i.__.format)||t}}},validate(t,e){let{schema:i,error:s,prefs:n}=e;if(t instanceof Date&&!S(t.getTime()))return;const r=i.__.format;return n.convert&&r&&"string"==typeof t?{value:t,errors:s("date.format",{format:r})}:{value:t,errors:s("date.base")}},rules:{compare:{method:!1,validate(t,e,i,s){let{date:n}=i,{name:o,operator:h,args:a}=s;const u="now"===n?Date.now():n.getTime();return r.compare(t.getTime(),u,h)?t:e.error("date."+o,{limit:a.date,value:t})},args:[{name:"date",ref:!0,normalize:t=>"now"===t?t:h.parse(t),assert:t=>null!==t,message:"must have a valid date format"}]},format:{method(t){return s(["iso","javascript","unix"].includes(t),"Unknown date format",t),this.$_setFlag("format",t)}},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{date:t},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{date:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{date:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{date:t},operator:">="})}},timestamp:{method(t){return void 0===t&&(t="javascript"),s(["javascript","unix"].includes(t),'"type" must be one of "javascript, unix"'),this.format(t)}}},cast:{number:{from:h.isDate,to:(t,e)=>t.getTime()},string:{from:h.isDate,to:(t,e)=>{let{prefs:i}=e;return o.date(t,i)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),h.parse=function(t,e){if(t instanceof Date)return t;if("string"!=typeof t&&(S(t)||!isFinite(t))||/^\s*$/.test(t))return null;if("iso"===e)return r.isIsoDate(t)?h.date(t.toString()):null;const i=t;if("string"==typeof t&&/^[+-]?\d+(\.\d+)?$/.test(t)&&(t=C(t)),e){if("javascript"===e)return h.date(1*t);if("unix"===e)return h.date(1e3*t);if("string"==typeof i)return null}return h.date(t)},h.date=function(t){const e=new Date(t);return S(e.getTime())?null:e}},390:(t,e,i)=>{const s=i(375),n=i(7824);t.exports=n.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:t}})},validate:(t,e,i)=>{let{n:s}=i;return t.length===s?t:e.error("function.arity",{n:s})}},class:{method(){return this.$_addRule("class")},validate:(t,e)=>/^\s*class\s/.test(t.toString())?t:e.error("function.class",{value:t})},minArity:{method(t){return s(Number.isSafeInteger(t)&&t>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:t}})},validate:(t,e,i)=>{let{n:s}=i;return t.length>=s?t:e.error("function.minArity",{n:s})}},maxArity:{method(t){return s(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:t}})},validate:(t,e,i)=>{let{n:s}=i;return t.length<=s?t:e.error("function.maxArity",{n:s})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(t,e,i)=>{const s=i(978),n=i(375),r=i(8571),o=i(3652),h=i(8068),a=i(8160),u=i(3292),c=i(6354),l=i(6133),f=i(3328),_={renameDefaults:{alias:!1,multiple:!1,override:!1}};t.exports=h.extend({type:"hv",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(t,e)=>t.keys(e),validate(t,e){let{schema:i,error:s,state:n,prefs:r}=e;if(!t||typeof t!==i.$_property("typeof")||Array.isArray(t))return{value:t,errors:s("object.base",{type:i.$_property("typeof")})};if(!(i.$_terms.renames||i.$_terms.dependencies||i.$_terms.keys||i.$_terms.patterns||i.$_terms.externals))return;t=_.clone(t,r);const o=[];if(i.$_terms.renames&&!_.rename(i,t,n,r,o))return{value:t,errors:o};if(!i.$_terms.keys&&!i.$_terms.patterns&&!i.$_terms.dependencies)return{value:t,errors:o};const h=new Set(w.keys(t));if(i.$_terms.keys){const e=[t,...n.ancestors];for(const s of i.$_terms.keys){const i=s.key,a=t[i];h.delete(i);const u=n.localize([...n.path,i],e,s),c=s.schema.$_validate(a,u,r);if(c.errors){if(r.abortEarly)return{value:t,errors:c.errors};void 0!==c.value&&(t[i]=c.value),o.push(...c.errors)}else"strip"===s.schema.__.result||void 0===c.value&&void 0!==a?delete t[i]:void 0!==c.value&&(t[i]=c.value)}}if(h.size||i.__.uv){const e=_.unknown(i,t,h,o,n,r);if(e)return e}if(i.$_terms.dependencies)for(const e of i.$_terms.dependencies){if(null!==e.key&&!1===_.isPresent(e.options)(e.key.resolve(t,n,r,null,{shadow:!1})))continue;const s=_.dependencies[e.rel](i,e,t,n,r);if(s){const e=i.$_createError(s.code,t,s.context,n,r);if(r.abortEarly)return{value:t,errors:e};o.push(e)}}return{value:t,errors:o}},rules:{and:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"and"),_.dependency(this,"and",null,e)}},append:{method(t){return null==t||0===w.keys(t).length?this:this.keys(t)}},assert:{method(t,e,i){f.isTemplate(t)||(t=u.ref(t)),n(void 0===i||"string"==typeof i,"Message must be a string"),e=this.$_compile(e,{appendPath:!0});const s=this.$_addRule({name:"assert",args:{subject:t,schema:e,message:i}});return s.$_mutateRegister(t),s.$_mutateRegister(e),s},validate(t,e,i){let{error:s,prefs:n,state:r}=e,{subject:o,schema:h,message:a}=i;const u=o.resolve(t,r,n),c=l.isRef(o)?o.absolute(r):[];return h.$_match(u,r.localize(c,[t,...r.ancestors],h),n)?t:s("object.assert",{subject:o,message:a})},args:["subject","schema","message"],multi:!0},instance:{method(t,e){return n("function"==typeof t,"constructor must be a function"),e=e||t.name,this.$_addRule({name:"instance",args:{constructor:t,name:e}})},validate:(t,e,i)=>{let{constructor:s,name:n}=i;return t instanceof s?t:e.error("object.instance",{type:n,value:t})},args:["constructor","name"]},keys:{method(t){n(void 0===t||"object"==typeof t,"Object schema must be a valid object"),n(!a.isSchema(t),"Object schema cannot be a joi schema");const e=this.clone();if(t)if(w.keys(t).length){e.$_terms.keys=e.$_terms.keys?e.$_terms.keys.filter((e=>!t.hasOwnProperty(e.key))):new _.Keys;for(const i in t)a.tryWithPath((()=>e.$_terms.keys.push({key:i,schema:this.$_compile(t[i])})),i)}else e.$_terms.keys=new _.Keys;else e.$_terms.keys=null;return e.$_mutateRebuild()}},length:{method(t){return this.$_addRule({name:"length",args:{limit:t},operator:"="})},validate:(t,e,i,s)=>{let{limit:n}=i,{name:r,operator:o,args:h}=s;return a.compare(w.keys(t).length,n,o)?t:e.error("object."+r,{limit:h.limit,value:t})},args:[{name:"limit",ref:!0,assert:a.limit,message:"must be a positive integer"}]},max:{method(t){return this.$_addRule({name:"max",method:"length",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"length",args:{limit:t},operator:">="})}},nand:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"nand"),_.dependency(this,"nand",null,e)}},or:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"or"),_.dependency(this,"or",null,e)}},oxor:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return _.dependency(this,"oxor",null,e)}},pattern:{method(t,e,i){void 0===i&&(i={});const s=t instanceof RegExp;s||(t=this.$_compile(t,{appendPath:!0})),n(void 0!==e,"Invalid rule"),a.assertOptions(i,["fallthrough","matches"]),s&&n(!t.flags.includes("g")&&!t.flags.includes("y"),"pattern should not use global or sticky mode"),e=this.$_compile(e,{appendPath:!0});const r=this.clone();r.$_terms.patterns=r.$_terms.patterns||[];const o={[s?"regex":"schema"]:t,rule:e};return i.matches&&(o.matches=this.$_compile(i.matches),"array"!==o.matches.type&&(o.matches=o.matches.$_root.array().items(o.matches)),r.$_mutateRegister(o.matches),r.$_setFlag("uv",!0,{clone:!1})),i.fallthrough&&(o.fallthrough=!0),r.$_terms.patterns.push(o),r.$_mutateRegister(e),r}},ref:{method(){return this.$_addRule("ref")},validate:(t,e)=>l.isRef(t)?t:e.error("object.refType",{value:t})},regex:{method(){return this.$_addRule("regex")},validate:(t,e)=>t instanceof RegExp?t:e.error("object.regex",{value:t})},rename:{method(t,e,i){void 0===i&&(i={}),n("string"==typeof t||t instanceof RegExp,"Rename missing the from argument"),n("string"==typeof e||e instanceof f,"Invalid rename to argument"),n(e!==t,"Cannot rename key to same name:",t),a.assertOptions(i,["alias","ignoreUndefined","override","multiple"]);const r=this.clone();r.$_terms.renames=r.$_terms.renames||[];for(const e of r.$_terms.renames)n(e.from!==t,"Cannot rename the same key multiple times");return e instanceof f&&r.$_mutateRegister(e),r.$_terms.renames.push({from:t,to:e,options:s(_.renameDefaults,i)}),r}},schema:{method(t){return void 0===t&&(t="any"),this.$_addRule({name:"schema",args:{type:t}})},validate:(t,e,i)=>{let{type:s}=i;return!a.isSchema(t)||"any"!==s&&t.type!==s?e.error("object.schema",{type:s}):t}},unknown:{method(t){return this.$_setFlag("unknown",!1!==t)}},with:{method(t,e,i){return void 0===i&&(i={}),_.dependency(this,"with",t,e,i)}},without:{method(t,e,i){return void 0===i&&(i={}),_.dependency(this,"without",t,e,i)}},xor:{method(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.verifyFlat(e,"xor"),_.dependency(this,"xor",null,e)}}},overrides:{default(t,e){return void 0===t&&(t=a.symbols.deepDefault),this.$_parent("default",t,e)}},rebuild(t){if(t.$_terms.keys){const e=new o.Sorter;for(const i of t.$_terms.keys)a.tryWithPath((()=>e.add(i,{after:i.schema.$_rootReferences(),group:i.key})),i.key);t.$_terms.keys=new _.Keys(...e.nodes)}},manifest:{build(t,e){if(e.keys&&(t=t.keys(e.keys)),e.dependencies)for(const{rel:i,key:s=null,peers:n,options:r}of e.dependencies)t=_.dependency(t,i,s,n,r);if(e.patterns)for(const{regex:i,schema:s,rule:n,fallthrough:r,matches:o}of e.patterns)t=t.pattern(i||s,n,{fallthrough:r,matches:o});if(e.renames)for(const{from:i,to:s,options:n}of e.renames)t=t.rename(i,s,n);return t}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),_.clone=function(t,e){if("object"==typeof t){if(e.nonEnumerables)return r(t,{shallow:!0});const i=w.create(w.getPrototypeOf(t));return w.assign(i,t),i}const i=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return t.apply(this,i)};return i.prototype=r(t.prototype),w.defineProperty(i,"name",{value:t.name,writable:!1}),w.defineProperty(i,"length",{value:t.length,writable:!1}),w.assign(i,t),i},_.dependency=function(t,e,i,s,r){n(null===i||"string"==typeof i,e,"key must be a strings"),r||(r=s.length>1&&"object"==typeof s[s.length-1]?s.pop():{}),a.assertOptions(r,["separator","isPresent"]),s=[].concat(s);const o=a.default(r.separator,"."),h=[];for(const t of s)n("string"==typeof t,e,"peers must be strings"),h.push(u.ref(t,{separator:o,ancestor:0,prefix:!1}));null!==i&&(i=u.ref(i,{separator:o,ancestor:0,prefix:!1}));const c=t.clone();return c.$_terms.dependencies=c.$_terms.dependencies||[],c.$_terms.dependencies.push(new _.Dependency(e,i,h,s,r)),c},_.dependencies={and(t,e,i,s,n){const r=[],o=[],h=e.peers.length,a=_.isPresent(e.options);for(const t of e.peers)!1===a(t.resolve(i,s,n,null,{shadow:!1}))?r.push(t.key):o.push(t.key);if(r.length!==h&&o.length!==h)return{code:"object.and",context:{present:o,presentWithLabels:_.keysToLabels(t,o),missing:r,missingWithLabels:_.keysToLabels(t,r)}}},nand(t,e,i,s,n){const r=[],o=_.isPresent(e.options);for(const t of e.peers)o(t.resolve(i,s,n,null,{shadow:!1}))&&r.push(t.key);if(r.length!==e.peers.length)return;const h=e.paths[0],a=e.paths.slice(1);return{code:"object.nand",context:{main:h,mainWithLabel:_.keysToLabels(t,h),peers:a,peersWithLabels:_.keysToLabels(t,a)}}},or(t,e,i,s,n){const r=_.isPresent(e.options);for(const t of e.peers)if(r(t.resolve(i,s,n,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:e.paths,peersWithLabels:_.keysToLabels(t,e.paths)}}},oxor(t,e,i,s,n){const r=[],o=_.isPresent(e.options);for(const t of e.peers)o(t.resolve(i,s,n,null,{shadow:!1}))&&r.push(t.key);if(!r.length||1===r.length)return;const h={peers:e.paths,peersWithLabels:_.keysToLabels(t,e.paths)};return h.present=r,h.presentWithLabels=_.keysToLabels(t,r),{code:"object.oxor",context:h}},with(t,e,i,s,n){const r=_.isPresent(e.options);for(const o of e.peers)if(!1===r(o.resolve(i,s,n,null,{shadow:!1})))return{code:"object.with",context:{main:e.key.key,mainWithLabel:_.keysToLabels(t,e.key.key),peer:o.key,peerWithLabel:_.keysToLabels(t,o.key)}}},without(t,e,i,s,n){const r=_.isPresent(e.options);for(const o of e.peers)if(r(o.resolve(i,s,n,null,{shadow:!1})))return{code:"object.without",context:{main:e.key.key,mainWithLabel:_.keysToLabels(t,e.key.key),peer:o.key,peerWithLabel:_.keysToLabels(t,o.key)}}},xor(t,e,i,s,n){const r=[],o=_.isPresent(e.options);for(const t of e.peers)o(t.resolve(i,s,n,null,{shadow:!1}))&&r.push(t.key);if(1===r.length)return;const h={peers:e.paths,peersWithLabels:_.keysToLabels(t,e.paths)};return 0===r.length?{code:"object.missing",context:h}:(h.present=r,h.presentWithLabels=_.keysToLabels(t,r),{code:"object.xor",context:h})}},_.keysToLabels=function(t,e){return Array.isArray(e)?e.map((e=>t.$_mapLabels(e))):t.$_mapLabels(e)},_.isPresent=function(t){return"function"==typeof t.isPresent?t.isPresent:t=>void 0!==t},_.rename=function(t,e,i,s,n){const r={};for(const o of t.$_terms.renames){const h=[],a="string"!=typeof o.from;if(a)for(const t in e){if(void 0===e[t]&&o.options.ignoreUndefined||t===o.to)continue;const i=o.from.exec(t);i&&h.push({from:t,to:o.to,match:i})}else!w.prototype.hasOwnProperty.call(e,o.from)||void 0===e[o.from]&&o.options.ignoreUndefined||h.push(o);for(const u of h){const h=u.from;let c=u.to;if(c instanceof f&&(c=c.render(e,i,s,u.match)),h!==c){if(!o.options.multiple&&r[c]&&(n.push(t.$_createError("object.rename.multiple",e,{from:h,to:c,pattern:a},i,s)),s.abortEarly)||w.prototype.hasOwnProperty.call(e,c)&&!o.options.override&&!r[c]&&(n.push(t.$_createError("object.rename.override",e,{from:h,to:c,pattern:a},i,s)),s.abortEarly))return!1;void 0===e[h]?delete e[c]:e[c]=e[h],r[c]=!0,o.options.alias||delete e[h]}}}return!0},_.unknown=function(t,e,i,s,n,r){if(t.$_terms.patterns){let o=!1;const h=t.$_terms.patterns.map((t=>{if(t.matches)return o=!0,[]})),a=[e,...n.ancestors];for(const o of i){const u=e[o],c=[...n.path,o];for(let l=0;l<t.$_terms.patterns.length;++l){const d=t.$_terms.patterns[l];if(d.regex){const t=d.regex.test(o);if(n.mainstay.tracer.debug(n,"rule","pattern.".concat(l),t?"pass":"error"),!t)continue}else if(!d.schema.$_match(o,n.nest(d.schema,"pattern.".concat(l)),r))continue;i.delete(o);const f=n.localize(c,a,{schema:d.rule,key:o}),_=d.rule.$_validate(u,f,r);if(_.errors){if(r.abortEarly)return{value:e,errors:_.errors};s.push(..._.errors)}if(d.matches&&h[l].push(o),e[o]=_.value,!d.fallthrough)break}}if(o)for(let i=0;i<h.length;++i){const o=h[i];if(!o)continue;const u=t.$_terms.patterns[i].matches,l=n.localize(n.path,a,u),d=u.$_validate(o,l,r);if(d.errors){const i=c.details(d.errors,{override:!1});i.matches=o;const h=t.$_createError("object.pattern.match",e,i,n,r);if(r.abortEarly)return{value:e,errors:h};s.push(h)}}}if(i.size&&(t.$_terms.keys||t.$_terms.patterns)){if(r.stripUnknown&&void 0===t.__.unknown||r.skipFunctions){const t=!(!r.stripUnknown||!0!==r.stripUnknown&&!r.stripUnknown.objects);for(const s of i)t?(delete e[s],i.delete(s)):"function"==typeof e[s]&&i.delete(s)}if(!a.default(t.__.unknown,r.allowUnknown))for(const o of i){const i=n.localize([...n.path,o],[]),h=t.$_createError("object.unknown",e[o],{child:o},i,r,{flags:!1});if(r.abortEarly)return{value:e,errors:h};s.push(h)}}},_.Dependency=class{describe(){const t={rel:this.rel,peers:this.paths};return null!==this.key&&(t.key=this.key.key),"."!==this.peers[0].separator&&(t.options=v(d({},t.options),{separator:this.peers[0].separator})),this.options.isPresent&&(t.options=v(d({},t.options),{isPresent:this.options.isPresent})),t}constructor(t,e,i,s,n){this.rel=t,this.key=e,this.peers=i,this.paths=s,this.options=n}},_.Keys=class extends Array{concat(t){const e=this.slice(),i=new Map;for(let t=0;t<e.length;++t)i.set(e[t].key,t);for(const s of t){const t=s.key,n=i.get(t);void 0!==n?e[n]={key:t,schema:e[n].schema.concat(s.schema)}:e.push(s)}return e}}},8785:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o=i(3292),h=i(6354),a={};t.exports=n.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(t,e)=>t.ref(e),validate(t,e){let{schema:i,state:n,prefs:r}=e;s(i.$_terms.link,"Uninitialized link schema");const o=a.generate(i,t,n,r),h=i.$_terms.link[0].ref;return o.$_validate(t,n.nest(o,"link:".concat(h.display,":").concat(o.type)),r)},generate:(t,e,i,s)=>a.generate(t,e,i,s),rules:{ref:{method(t){s(!this.$_terms.link,"Cannot reinitialize schema"),t=o.ref(t),s("value"===t.type||"local"===t.type,"Invalid reference type:",t.type),s("local"===t.type||"root"===t.ancestor||t.ancestor>0,"Link cannot reference itself");const e=this.clone();return e.$_terms.link=[{ref:t}],e}},relative:{method(t){return void 0===t&&(t=!0),this.$_setFlag("relative",t)}}},overrides:{concat(t){s(this.$_terms.link,"Uninitialized link schema"),s(r.isSchema(t),"Invalid schema object"),s("link"!==t.type,"Cannot merge type link with another link");const e=this.clone();return e.$_terms.whens||(e.$_terms.whens=[]),e.$_terms.whens.push({concat:t}),e.$_mutateRebuild()}},manifest:{build:(t,e)=>(s(e.link,"Invalid link description missing link"),t.ref(e.link))}}),a.generate=function(t,e,i,s){let n=i.mainstay.links.get(t);if(n)return n.I_(e,i,s).schema;const r=t.$_terms.link[0].ref,{perspective:o,path:h}=a.perspective(r,i);a.assert(o,"which is outside of schema boundaries",r,t,i,s);try{n=h.length?o.$_reach(h):o}catch(e){a.assert(!1,"to non-existing schema",r,t,i,s)}return a.assert("link"!==n.type,"which is another link",r,t,i,s),t.__.relative||i.mainstay.links.set(t,n),n.I_(e,i,s).schema},a.perspective=function(t,e){if("local"===t.type){for(const{schema:i,key:s}of e.schemas){if((i.__.id||s)===t.path[0])return{perspective:i,path:t.path.slice(1)};if(i.$_terms.shared)for(const e of i.$_terms.shared)if(e.__.id===t.path[0])return{perspective:e,path:t.path.slice(1)}}return{perspective:null,path:null}}return"root"===t.ancestor?{perspective:e.schemas[e.schemas.length-1].schema,path:t.path}:{perspective:e.schemas[t.ancestor]&&e.schemas[t.ancestor].schema,path:t.path}},a.assert=function(t,e,i,n,r,o){t||s(!1,'"'.concat(h.label(n.__,r,o),'" contains link reference "').concat(i.display,'" ').concat(e))}},3832:(t,e,i)=>{const s=i(375),n=i(8068),r=i(8160),o={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(t){const e=t.toString(),i=e.indexOf("."),s=e.indexOf("e");return(i<0?0:(s<0?e.length:s)-i-1)+(s<0?0:_.max(0,-x(e.slice(s+1))))}};t.exports=n.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(t,e){let{schema:i,error:s}=e;if(!t.match(o.numberRx))return;t=t.trim();const n={value:C(t)};if(0===n.value&&(n.value=0),!i.__.unsafe)if(t.match(/e/i)){if(o.extractSignificantDigits(t)!==o.extractSignificantDigits(String(n.value)))return n.errors=s("number.unsafe"),n}else{const e=n.value.toString();if(e.match(/e/i))return n;if(e!==o.normalizeDecimal(t))return n.errors=s("number.unsafe"),n}return n}},validate(t,e){let{schema:i,error:s,prefs:n}=e;if(t===1/0||t===-1/0)return{value:t,errors:s("number.infinity")};if(!r.isNumber(t))return{value:t,errors:s("number.base")};const o={value:t};if(n.convert){const t=i.$_getRule("precision");if(t){const e=_.pow(10,t.args.limit);o.value=_.round(o.value*e)/e}}return 0===o.value&&(o.value=0),!i.__.unsafe&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&(o.errors=s("number.unsafe")),o},rules:{compare:{method:!1,validate:(t,e,i,s)=>{let{limit:n}=i,{name:o,operator:h,args:a}=s;return r.compare(t,n,h)?t:e.error("number."+o,{limit:a.limit,value:t})},args:[{name:"limit",ref:!0,assert:r.isNumber,message:"must be a number"}]},greater:{method(t){return this.$_addRule({name:"greater",method:"compare",args:{limit:t},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(t,e)=>_.trunc(t)-t==0?t:e.error("number.integer")},less:{method(t){return this.$_addRule({name:"less",method:"compare",args:{limit:t},operator:"<"})}},max:{method(t){return this.$_addRule({name:"max",method:"compare",args:{limit:t},operator:"<="})}},min:{method(t){return this.$_addRule({name:"min",method:"compare",args:{limit:t},operator:">="})}},multiple:{method(t){const e="number"==typeof t?o.decimalPlaces(t):null,i=_.pow(10,e);return this.$_addRule({name:"multiple",args:{base:t,baseDecimalPlace:e,pfactor:i}})},validate:(t,e,i,s)=>{let{base:n,baseDecimalPlace:r,pfactor:h}=i;return o.decimalPlaces(t)>r?e.error("number.multiple",{multiple:s.args.base,value:t}):_.round(h*t)%_.round(h*n)==0?t:e.error("number.multiple",{multiple:s.args.base,value:t})},args:[{name:"base",ref:!0,assert:t=>"number"==typeof t&&isFinite(t)&&t>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(t,e)=>Number.isSafeInteger(t)&&t>=0&&t<=65535?t:e.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(t){return s(Number.isSafeInteger(t),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:t}})},validate(t,e,i){let{limit:s}=i;const n=t.toString().match(o.precisionRx);return _.max((n[1]?n[1].length:0)-(n[2]?x(n[2],10):0),0)<=s?t:e.error("number.precision",{limit:s,value:t})},convert:!0},sign:{method(t){return s(["negative","positive"].includes(t),"Invalid sign",t),this.$_addRule({name:"sign",args:{sign:t}})},validate:(t,e,i)=>{let{sign:s}=i;return"negative"===s&&t<0||"positive"===s&&t>0?t:e.error("number.".concat(s))}},unsafe:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("unsafe",t)}}},cast:{string:{from:t=>"number"==typeof t,to:(t,e)=>t.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),o.extractSignificantDigits=function(t){return t.replace(o.exponentialPartRegex,"").replace(o.dotRegex,"").replace(o.trailingZerosRegex,"").replace(o.leadingSignAndZerosRegex,"")},o.normalizeDecimal=function(t){return(t=t.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&t.endsWith("0")&&(t=t.replace(/0+$/,"")),"-0"===t?"0":t}},8966:(t,e,i)=>{const s=i(7824);t.exports=s.extend({type:"object",cast:{map:{from:t=>t&&"object"==typeof t,to:(t,e)=>new Map(w.entries(t))}}})},7417:(t,e,i)=>{const s=i(375),n=i(5380),r=i(1745),o=i(9959),h=i(6064),a=i(9926),u=i(5752),c=i(8068),l=i(8160),f={tlds:a instanceof Set&&{tlds:{allow:a,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:o.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};t.exports=c.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(t,e){let{schema:i,state:s,prefs:n}=e;const r=i.$_getRule("normalize");r&&(t=t.normalize(r.args.form));const o=i.$_getRule("case");o&&(t="upper"===o.args.direction?t.toLocaleUpperCase():t.toLocaleLowerCase());const h=i.$_getRule("trim");if(h&&h.args.enabled&&(t=t.trim()),i.$_terms.replacements)for(const e of i.$_terms.replacements)t=t.replace(e.pattern,e.replacement);const a=i.$_getRule("hex");if(a&&a.args.options.byteAligned&&t.length%2!=0&&(t="0".concat(t)),i.$_getRule("isoDate")){const e=f.isoDate(t);e&&(t=e)}if(i.__.truncate){const e=i.$_getRule("max");if(e){let r=e.args.limit;if(l.isResolvable(r)&&(r=r.resolve(t,s,n),!l.limit(r)))return{value:t,errors:i.$_createError("any.ref",r,{ref:e.args.limit,arg:"limit",reason:"must be a positive integer"},s,n)};t=t.slice(0,r)}}return{value:t}}},validate(t,e){let{schema:i,error:s}=e;if("string"!=typeof t)return{value:t,errors:s("string.base")};if(""===t){const e=i.$_getRule("min");return e&&0===e.args.limit?void 0:{value:t,errors:s("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(t,e)=>/^[a-zA-Z0-9]+$/.test(t)?t:e.error("string.alphanum")},base64:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["paddingRequired","urlSafe"]),t=d({urlSafe:!1,paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),s("boolean"==typeof t.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:t}})},validate:(t,e,i)=>{let{options:s}=i;return f.base64Regex[s.paddingRequired][s.urlSafe].test(t)?t:e.error("string.base64")}},case:{method(t){return s(["lower","upper"].includes(t),"Invalid case:",t),this.$_addRule({name:"case",args:{direction:t}})},validate:(t,e,i)=>{let{direction:s}=i;return"lower"===s&&t===t.toLocaleLowerCase()||"upper"===s&&t===t.toLocaleUpperCase()?t:e.error("string.".concat(s,"case"))},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(t,e){let i=t.length,s=0,n=1;for(;i--;){const e=t.charAt(i)*n;s+=e-9*(e>9),n^=3}return s>0&&s%10==0?t:e.error("string.creditCard")}},dataUri:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["paddingRequired"]),t=d({paddingRequired:!0},t),s("boolean"==typeof t.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:t}})},validate(t,e,i){let{options:s}=i;const n=t.match(f.dataUriRegex);return!n||n[2]&&"base64"===n[2]&&!f.base64Regex[s.paddingRequired].false.test(n[3])?e.error("string.dataUri"):t}},domain:{method(t){t&&l.assertOptions(t,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const e=f.addressOptions(t);return this.$_addRule({name:"domain",args:{options:t},address:e})},validate:(t,e,i,s)=>{let{address:r}=s;return n.isValid(t,r)?t:e.error("string.domain")}},email:{method(t){void 0===t&&(t={}),l.assertOptions(t,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),s(void 0===t.multiple||"boolean"==typeof t.multiple,"multiple option must be an boolean");const e=f.addressOptions(t),i=new RegExp("\\s*[".concat(t.separator?h(t.separator):",","]\\s*"));return this.$_addRule({name:"email",args:{options:t},regex:i,address:e})},validate(t,e,i,s){let{options:n}=i,{regex:o,address:h}=s;const a=n.multiple?t.split(o):[t],u=[];for(const t of a)r.isValid(t,h)||u.push(t);return u.length?e.error("string.email",{value:t,invalids:u}):t}},guid:{alias:"uuid",method(t){void 0===t&&(t={}),l.assertOptions(t,["version","separator"]);let e="";if(t.version){const i=[].concat(t.version);s(i.length>=1,"version must have at least 1 valid version specified");const n=new Set;for(let t=0;t<i.length;++t){const r=i[t];s("string"==typeof r,"version at position "+t+" must be a string");const o=f.guidVersions[r.toLowerCase()];s(o,"version at position "+t+" must be one of "+w.keys(f.guidVersions).join(", ")),s(!n.has(o),"version at position "+t+" must not be a duplicate"),e+=o,n.add(o)}}s(f.guidSeparators.has(t.separator),'separator must be one of true, false, "-", or ":"');const i=void 0===t.separator?"[:-]?":!0===t.separator?"[:-]":!1===t.separator?"[]?":"\\".concat(t.separator),n=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}(".concat(i,")[0-9A-F]{4}\\2?[").concat(e||"0-9A-F","][0-9A-F]{3}\\2?[").concat(e?"89AB":"0-9A-F","][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$"),"i");return this.$_addRule({name:"guid",args:{options:t},regex:n})},validate(t,e,i,s){let{regex:n}=s;const r=n.exec(t);return r?f.guidBrackets[r[1]]!==r[r.length-1]?e.error("string.guid"):t:e.error("string.guid")}},hex:{method(t){return void 0===t&&(t={}),l.assertOptions(t,["byteAligned","prefix"]),t=d({byteAligned:!1,prefix:!1},t),s("boolean"==typeof t.byteAligned,"byteAligned must be boolean"),s("boolean"==typeof t.prefix||"optional"===t.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:t}})},validate:(t,e,i)=>{let{options:s}=i;return("optional"===s.prefix?f.hexRegex.withOptionalPrefix:!0===s.prefix?f.hexRegex.withPrefix:f.hexRegex.withoutPrefix).test(t)?s.byteAligned&&t.length%2!=0?e.error("string.hexAlign"):t:e.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(t,e)=>n.isValid(t,{minDomainSegments:1})||f.ipRegex.test(t)?t:e.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(t){void 0===t&&(t={}),l.assertOptions(t,["cidr","version"]);const{cidr:e,versions:i,regex:s}=o.regex(t),n=t.version?i:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:e,version:n}},regex:s})},validate:(t,e,i,s)=>{let{options:n}=i,{regex:r}=s;return r.test(t)?t:n.version?e.error("string.ipVersion",{value:t,cidr:n.cidr,version:n.version}):e.error("string.ip",{value:t,cidr:n.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate:(t,e)=>{let{error:i}=e;return f.isoDate(t)?t:i("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(t,e)=>f.isoDurationRegex.test(t)?t:e.error("string.isoDuration")},length:{method(t,e){return f.length(this,"length",t,"=",e)},validate(t,e,i,s){let{limit:n,encoding:r}=i,{name:o,operator:h,args:a}=s;const u=!r&&t.length;return l.compare(u,n,h)?t:e.error("string."+o,{limit:a.limit,value:t,encoding:r})},args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(t,e){return f.length(this,"max",t,"<=",e)},args:["limit","encoding"]},min:{method(t,e){return f.length(this,"min",t,">=",e)},args:["limit","encoding"]},normalize:{method(t){return void 0===t&&(t="NFC"),s(f.normalizationForms.includes(t),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:t}})},validate:(t,e,i)=>{let{error:s}=e,{form:n}=i;return t===t.normalize(n)?t:s("string.normalize",{value:t,form:n})},convert:!0},pattern:{alias:"regex",method(t,e){void 0===e&&(e={}),s(t instanceof RegExp,"regex must be a RegExp"),s(!t.flags.includes("g")&&!t.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof e&&(e={name:e}),l.assertOptions(e,["invert","name"]);const i=["string.pattern",e.invert?".invert":"",e.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:t,options:e},errorCode:i})},validate:(t,e,i,s)=>{let{regex:n,options:r}=i,{errorCode:o}=s;return n.test(t)^r.invert?t:e.error(o,{name:r.name,regex:n,value:t})},args:["regex","options"],multi:!0},replace:{method(t,e){"string"==typeof t&&(t=new RegExp(h(t),"g")),s(t instanceof RegExp,"pattern must be a RegExp"),s("string"==typeof e,"replacement must be a String");const i=this.clone();return i.$_terms.replacements||(i.$_terms.replacements=[]),i.$_terms.replacements.push({pattern:t,replacement:e}),i}},token:{method(){return this.$_addRule("token")},validate:(t,e)=>/^\w+$/.test(t)?t:e.error("string.token")},trim:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:t}})},validate:(t,e,i)=>{let{enabled:s}=i;return s&&t!==t.trim()?e.error("string.trim"):t},convert:!0},truncate:{method(t){return void 0===t&&(t=!0),s("boolean"==typeof t,"enabled must be a boolean"),this.$_setFlag("truncate",t)}},uppercase:{method(){return this.case("upper")}},uri:{method(t){void 0===t&&(t={}),l.assertOptions(t,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),t.domain&&l.assertOptions(t.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:e,scheme:i}=u.regex(t),s=t.domain?f.addressOptions(t.domain):null;return this.$_addRule({name:"uri",args:{options:t},regex:e,domain:s,scheme:i})},validate(t,e,i,s){let{options:r}=i,{regex:o,domain:h,scheme:a}=s;if(["http:/","https:/"].includes(t))return e.error("string.uri");let u=o.exec(t);if(!u&&e.prefs.convert&&r.encodeUri){const e=encodeURI(t);u=o.exec(e),u&&(t=e)}if(u){const i=u[1]||u[2];return!h||r.allowRelative&&!i||n.isValid(i,h)?t:e.error("string.domain",{value:i})}return r.relativeOnly?e.error("string.uriRelativeOnly"):r.scheme?e.error("string.uriCustomScheme",{scheme:a,value:t}):e.error("string.uri")}}},manifest:{build(t,e){if(e.replacements)for(const{pattern:i,replacement:s}of e.replacements)t=t.replace(i,s);return t}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(t){if(!t)return f.tlds||t;if(s(void 0===t.minDomainSegments||Number.isSafeInteger(t.minDomainSegments)&&t.minDomainSegments>0,"minDomainSegments must be a positive integer"),s(void 0===t.maxDomainSegments||Number.isSafeInteger(t.maxDomainSegments)&&t.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===t.tlds)return t;if(!0===t.tlds||void 0===t.tlds)return s(f.tlds,"Built-in TLD list disabled"),w.assign({},t,f.tlds);s("object"==typeof t.tlds,"tlds must be true, false, or an object");const e=t.tlds.deny;if(e)return Array.isArray(e)&&(t=w.assign({},t,{tlds:{deny:new Set(e)}})),s(t.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),s(!t.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(t.tlds.deny,"tlds.deny"),t;const i=t.tlds.allow;return i?!0===i?(s(f.tlds,"Built-in TLD list disabled"),w.assign({},t,f.tlds)):(Array.isArray(i)&&(t=w.assign({},t,{tlds:{allow:new Set(i)}})),s(t.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(t.tlds.allow,"tlds.allow"),t):t},f.validateTlds=function(t,e){for(const i of t)s(n.isValid(i,{minDomainSegments:1,maxDomainSegments:1}),"".concat(e," must contain valid top level domain names"))},f.isoDate=function(t){if(!l.isIsoDate(t))return null;/.*T.*[+-]\d\d$/.test(t)&&(t+="00");const e=new Date(t);return S(e.getTime())?null:e.toISOString()},f.length=function(t,e,i,n,r){return s(!r||!1,"Invalid encoding:",r),t.$_addRule({name:e,method:"length",args:{limit:i,encoding:r},operator:n})}},8826:(t,e,i)=>{const s=i(375),n=i(8068),r={};r.Map=class extends Map{slice(){return new r.Map(this)}},t.exports=n.extend({type:"symbol",terms:{map:{init:new r.Map}},coerce:{method(t,e){let{schema:i,error:s}=e;const n=i.$_terms.map.get(t);return n&&(t=n),i.__.only&&"symbol"!=typeof t?{value:t,errors:s("symbol.map",{map:i.$_terms.map})}:{value:t}}},validate(t,e){let{error:i}=e;if("symbol"!=typeof t)return{value:t,errors:i("symbol.base")}},rules:{map:{method(t){t&&!t[Et]&&"object"==typeof t&&(t=w.entries(t)),s(t&&t[Et],"Iterable must be an iterable or object");const e=this.clone(),i=[];for(const n of t){s(n&&n[Et],"Entry must be an iterable");const[t,r]=n;s("object"!=typeof t&&"function"!=typeof t&&"symbol"!=typeof t,"Key must not be of type object, function, or Symbol"),s("symbol"==typeof r,"Value must be a Symbol"),e.$_terms.map.set(t,r),i.push(r)}return e.valid(...i)}}},manifest:{build:(t,e)=>(e.map&&(t=t.map(e.map)),t)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(t,e,i)=>{const s=i(375),n=i(8571),r=i(738),o=i(9621),h=i(8160),a=i(6354),u=i(493),c={result:Po("result")};e.entry=function(t,e,i){let n=h.defaults;i&&(s(void 0===i.warnings,"Cannot override warnings preference in synchronous validation"),s(void 0===i.artifacts,"Cannot override artifacts preference in synchronous validation"),n=h.preferences(h.defaults,i));const r=c.entry(t,e,n);s(!r.mainstay.externals.length,"Schema with external rules must use validateAsync()");const o={value:r.value};return r.error&&(o.error=r.error),r.mainstay.warnings.length&&(o.warning=a.details(r.mainstay.warnings)),r.mainstay.debug&&(o.debug=r.mainstay.debug),r.mainstay.artifacts&&(o.artifacts=r.mainstay.artifacts),o},e.entryAsync=async function(t,e,i){let s=h.defaults;i&&(s=h.preferences(h.defaults,i));const n=c.entry(t,e,s),r=n.mainstay;if(n.error)throw r.debug&&(n.error.debug=r.debug),n.error;if(r.externals.length){let e=n.value;const u=[];for(const n of r.externals){const l=n.state.path,d="link"===n.schema.type?r.links.get(n.schema):null;let f,_,v=e;const m=l.length?[e]:[],g=l.length?o(t,l):t;if(l.length){f=l[l.length-1];let t=e;for(const e of l.slice(0,-1))t=t[e],m.unshift(t);_=m[0],v=_[f]}try{const t=(t,e)=>(d||n.schema).$_createError(t,v,e,n.state,s),o=await n.method(v,{schema:n.schema,linked:d,state:n.state,prefs:i,original:g,error:t,errorsArray:c.errorsArray,warn:(t,e)=>r.warnings.push((d||n.schema).$_createError(t,v,e,n.state,s)),message:(t,e)=>(d||n.schema).$_createError("external",v,e,n.state,s,{messages:t})});if(void 0===o||o===v)continue;if(o instanceof a.Report){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(o),s.abortEarly)break;continue}if(Array.isArray(o)&&o[h.symbols.errors]){if(r.tracer.log(n.schema,n.state,"rule","external","error"),u.push(...o),s.abortEarly)break;continue}_?(r.tracer.value(n.state,"rule",v,o,"external"),_[f]=o):(r.tracer.value(n.state,"rule",e,o,"external"),e=o)}catch(t){throw s.errors.label&&(t.message+=" (".concat(n.label,")")),t}}if(n.value=e,u.length)throw n.error=a.process(u,t,s),r.debug&&(n.error.debug=r.debug),n.error}if(!s.warnings&&!s.debug&&!s.artifacts)return n.value;const u={value:n.value};return r.warnings.length&&(u.warning=a.details(r.warnings)),r.debug&&(u.debug=r.debug),r.artifacts&&(u.artifacts=r.artifacts),u},c.Mainstay=class{snapshot(){this.fv.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const t=this.fv.pop();this.externals=t.externals,this.warnings=t.warnings}commit(){this.fv.pop()}constructor(t,e,i){this.externals=[],this.warnings=[],this.tracer=t,this.debug=e,this.links=i,this.shadow=null,this.artifacts=null,this.fv=[]}},c.entry=function(t,i,s){const{tracer:n,cleanup:r}=c.tracer(i,s),o=s.debug?[]:null,h=i.a_.U_?new Map:null,l=new c.Mainstay(n,o,h),d=i.a_.U_?[{schema:i}]:null,f=new u([],[],{mainstay:l,schemas:d}),_=e.validate(t,i,f,s);r&&i.$_root.untrace();const v=a.process(_.errors,t,s);return{value:_.value,error:v,mainstay:l}},c.tracer=function(t,e){return t.$_root.S_?{tracer:t.$_root.S_._v(t)}:e.debug?(s(t.$_root.trace,"Debug mode not supported"),{tracer:t.$_root.trace()._v(t),cleanup:!0}):{tracer:c.ignore}},e.validate=function(t,e,i,s,n){if(void 0===n&&(n={}),e.$_terms.whens&&(e=e.I_(t,i,s).schema),e.u_&&(s=c.prefs(e,s)),e.l_&&s.cache){const s=e.l_.get(t);if(i.mainstay.tracer.debug(i,"validate","cached",!!s),s)return s}const r=(n,r,o)=>e.$_createError(n,t,r,o||i,s),o={original:t,prefs:s,schema:e,state:i,error:r,errorsArray:c.errorsArray,warn:(t,e,s)=>i.mainstay.warnings.push(r(t,e,s)),message:(n,r)=>e.$_createError("custom",t,r,i,s,{messages:n})};i.mainstay.tracer.entry(e,i);const a=e.w_;if(a.prepare&&void 0!==t&&s.convert){const e=a.prepare(t,o);if(e){if(i.mainstay.tracer.value(i,"prepare",t,e.value),e.errors)return c.finalize(e.value,[].concat(e.errors),o);t=e.value}}if(a.coerce&&void 0!==t&&s.convert&&(!a.coerce.from||a.coerce.from.includes(typeof t))){const e=a.coerce.method(t,o);if(e){if(i.mainstay.tracer.value(i,"coerced",t,e.value),e.errors)return c.finalize(e.value,[].concat(e.errors),o);t=e.value}}const u=e.__.empty;u&&u.$_match(c.trim(t,e),i.nest(u),h.defaults)&&(i.mainstay.tracer.value(i,"empty",t,void 0),t=void 0);const l=n.presence||e.__.presence||(e.__.j_?null:s.presence);if(void 0===t){if("forbidden"===l)return c.finalize(t,null,o);if("required"===l)return c.finalize(t,[e.$_createError("any.required",t,null,i,s)],o);if("optional"===l){if(e.__.default!==h.symbols.deepDefault)return c.finalize(t,null,o);i.mainstay.tracer.value(i,"default",t,{}),t={}}}else if("forbidden"===l)return c.finalize(t,[e.$_createError("any.unknown",t,null,i,s)],o);const d=[];if(e.d_){const n=e.d_.get(t,i,s,e.__.insensitive);if(n)return s.convert&&(i.mainstay.tracer.value(i,"valids",t,n.value),t=n.value),i.mainstay.tracer.filter(e,i,"valid",n),c.finalize(t,null,o);if(e.__.only){const n=e.$_createError("any.only",t,{valids:e.d_.values({display:!0})},i,s);if(s.abortEarly)return c.finalize(t,[n],o);d.push(n)}}if(e.f_){const n=e.f_.get(t,i,s,e.__.insensitive);if(n){i.mainstay.tracer.filter(e,i,"invalid",n);const r=e.$_createError("any.invalid",t,{invalids:e.f_.values({display:!0})},i,s);if(s.abortEarly)return c.finalize(t,[r],o);d.push(r)}}if(a.validate){const e=a.validate(t,o);if(e&&(i.mainstay.tracer.value(i,"base",t,e.value),t=e.value,e.errors)){if(!Array.isArray(e.errors))return d.push(e.errors),c.finalize(t,d,o);if(e.errors.length)return d.push(...e.errors),c.finalize(t,d,o)}}return e.v_.length?c.rules(t,d,o):c.finalize(t,d,o)},c.rules=function(t,e,i){const{schema:s,state:n,prefs:r}=i;for(const o of s.v_){const a=s.w_.rules[o.method];if(a.convert&&r.convert){n.mainstay.tracer.log(s,n,"rule",o.name,"full");continue}let u,l=o.args;if(o.Ud.length){l=w.assign({},l);for(const e of o.Ud){const i=a.argsByName.get(e),o=l[e].resolve(t,n,r),c=i.normalize?i.normalize(o):o,d=h.validateArg(c,null,i);if(d){u=s.$_createError("any.ref",o,{arg:e,ref:l[e],reason:d},n,r);break}l[e]=c}}u=u||a.validate(t,i,l,o);const d=c.rule(u,o);if(d.errors){if(n.mainstay.tracer.log(s,n,"rule",o.name,"error"),o.warn){n.mainstay.warnings.push(...d.errors);continue}if(r.abortEarly)return c.finalize(t,d.errors,i);e.push(...d.errors)}else n.mainstay.tracer.log(s,n,"rule",o.name,"pass"),n.mainstay.tracer.value(n,"rule",t,d.value,o.name),t=d.value}return c.finalize(t,e,i)},c.rule=function(t,e){return t instanceof a.Report?(c.error(t,e),{errors:[t],value:null}):Array.isArray(t)&&t[h.symbols.errors]?(t.forEach((t=>c.error(t,e))),{errors:t,value:null}):{errors:null,value:t}},c.error=function(t,e){return e.message&&t.L_(e.message),t},c.finalize=function(t,e,i){e=e||[];const{schema:n,state:r,prefs:o}=i;if(e.length){const s=c.default("failover",void 0,e,i);void 0!==s&&(r.mainstay.tracer.value(r,"failover",t,s),t=s,e=[])}if(e.length&&n.__.error)if("function"==typeof n.__.error){e=n.__.error(e),Array.isArray(e)||(e=[e]);for(const t of e)s(t instanceof g||t instanceof a.Report,"error() must return an Error object")}else e=[n.__.error];if(void 0===t){const s=c.default("default",t,e,i);r.mainstay.tracer.value(r,"default",t,s),t=s}if(n.__.cast&&void 0!==t){const e=n.w_.cast[n.__.cast];if(e.from(t)){const s=e.to(t,i);r.mainstay.tracer.value(r,"cast",t,s,n.__.cast),t=s}}if(n.$_terms.externals&&o.externals&&!1!==o.E_)for(const{method:t}of n.$_terms.externals)r.mainstay.externals.push({method:t,schema:n,state:r,label:a.label(n.__,r,o)});const h={value:t,errors:e.length?e:null};return n.__.result&&(h.value="strip"===n.__.result?void 0:i.original,r.mainstay.tracer.value(r,n.__.result,t,h.value),r.shadow(t,n.__.result)),n.l_&&!1!==o.cache&&!n.c_.length&&n.l_.set(i.original,h),void 0===t||h.errors||void 0===n.__.artifact||(r.mainstay.artifacts=r.mainstay.artifacts||new Map,r.mainstay.artifacts.has(n.__.artifact)||r.mainstay.artifacts.set(n.__.artifact,[]),r.mainstay.artifacts.get(n.__.artifact).push(r.path)),h},c.prefs=function(t,e){const i=e===h.defaults;return i&&t.u_[h.symbols.prefs]?t.u_[h.symbols.prefs]:(e=h.preferences(e,t.u_),i&&(t.u_[h.symbols.prefs]=e),e)},c.default=function(t,e,i,s){const{schema:r,state:o,prefs:a}=s,u=r.__[t];if(a.noDefaults||void 0===u)return e;if(o.mainstay.tracer.log(r,o,"rule",t,"full"),!u)return u;if("function"==typeof u){const e=u.length?[n(o.ancestors[0]),s]:[];try{return u(...e)}catch(e){return void i.push(r.$_createError("any.".concat(t),null,{error:e},o,a))}}return"object"!=typeof u?u:u[h.symbols.literal]?u.literal:h.isResolvable(u)?u.resolve(e,o,a):n(u)},c.trim=function(t,e){if("string"!=typeof t)return t;const i=e.$_getRule("trim");return i&&i.args.enabled?t.trim():t},c.ignore={active:!1,debug:r,entry:r,filter:r,log:r,resolve:r,value:r},c.errorsArray=function(){const t=[];return t[h.symbols.errors]=!0,t}},2036:(t,e,i)=>{const s=i(375),n=i(9474),r=i(8160),o={};t.exports=o.Values=class{get length(){return this.g_.size+this.c_.size}add(t,e){r.isResolvable(t)?this.c_.has(t)||(this.c_.add(t),e&&e.register(t)):this.has(t,null,null,!1)||(this.g_.add(t),"string"==typeof t&&this.vv.set(t.toLowerCase(),t))}static merge(t,e,i){if(t=t||new o.Values,e){if(e.mv)return e.clone();for(const i of[...e.g_,...e.c_])t.add(i)}if(i)for(const e of[...i.g_,...i.c_])t.remove(e);return t.length?t:null}remove(t){r.isResolvable(t)?this.c_.delete(t):(this.g_.delete(t),"string"==typeof t&&this.vv.delete(t.toLowerCase()))}has(t,e,i,s){return!!this.get(t,e,i,s)}get(t,e,i,s){if(!this.length)return!1;if(this.g_.has(t))return{value:t};if("string"==typeof t&&t&&s){const e=this.vv.get(t.toLowerCase());if(e)return{value:e}}if(!this.c_.size&&"object"!=typeof t)return!1;if("object"==typeof t)for(const e of this.g_)if(n(e,t))return{value:e};if(e)for(const r of this.c_){const o=r.resolve(t,e,i,null,{in:!0});if(void 0===o)continue;const h=r.in&&"object"==typeof o?Array.isArray(o)?o:w.keys(o):[o];for(const e of h)if(typeof e==typeof t)if(s&&t&&"string"==typeof t){if(e.toLowerCase()===t.toLowerCase())return{value:e,ref:r}}else if(n(e,t))return{value:e,ref:r}}return!1}override(){this.mv=!0}values(t){if(t&&t.display){const t=[];for(const e of[...this.g_,...this.c_])void 0!==e&&t.push(e);return t}return Array.from([...this.g_,...this.c_])}clone(){const t=new o.Values(this.g_,this.c_);return t.mv=this.mv,t}concat(t){s(!t.mv,"Cannot concat override set of values");const e=new o.Values([...this.g_,...t.g_],[...this.c_,...t.c_]);return e.mv=this.mv,e}describe(){const t=[];this.mv&&t.push({override:!0});for(const e of this.g_.values())t.push(e&&"object"==typeof e?{value:e}:e);for(const e of this.c_.values())t.push(e.describe());return t}constructor(t,e){this.g_=new Set(t),this.c_=new Set(e),this.vv=o.lowercases(t),this.mv=!1}},o.Values.prototype[r.symbols.values]=!0,o.Values.prototype.slice=o.Values.prototype.clone,o.lowercases=function(t){const e=new Map;if(t)for(const i of t)"string"==typeof i&&e.set(i.toLowerCase(),i);return e}},978:(t,e,i)=>{const s=i(375),n=i(8571),r=i(1687),o=i(9621),h={};t.exports=function(t,e,i){if(void 0===i&&(i={}),s(t&&"object"==typeof t,"Invalid defaults value: must be an object"),s(!e||!0===e||"object"==typeof e,"Invalid source value: must be true, falsy or an object"),s("object"==typeof i,"Invalid options: must be an object"),!e)return null;if(i.shallow)return h.applyToDefaultsWithShallow(t,e,i);const o=n(t);if(!0===e)return o;const a=void 0!==i.nullOverride&&i.nullOverride;return r(o,e,{nullOverride:a,mergeArrays:!1})},h.applyToDefaultsWithShallow=function(t,e,i){const a=i.shallow;s(Array.isArray(a),"Invalid keys");const u=new Map,c=!0===e?null:new Set;for(let i of a){i=Array.isArray(i)?i:i.split(".");const s=o(t,i);s&&"object"==typeof s?u.set(s,c&&o(e,i)||s):c&&c.add(i)}const l=n(t,{},u);if(!c)return l;for(const t of c)h.reachCopy(l,e,t);const d=void 0!==i.nullOverride&&i.nullOverride;return r(l,e,{nullOverride:d,mergeArrays:!1})},h.reachCopy=function(t,e,i){for(const t of i){if(!(t in e))return;const i=e[t];if("object"!=typeof i||null===i)return;e=i}const s=e;let n=t;for(let t=0;t<i.length-1;++t){const e=i[t];"object"!=typeof n[e]&&(n[e]={}),n=n[e]}n[i[i.length-1]]=s}},375:(t,e,i)=>{const s=i(7916);t.exports=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];if(!t)throw 1===i.length&&i[0]instanceof g?i[0]:new s(i)}},8571:(t,e,i)=>{const s=i(9621),n=i(4277),r=i(7043),o={needsProtoHack:new Set([n.set,n.map,n.weakSet,n.weakMap])};t.exports=o.clone=function(t,e,i){if(void 0===e&&(e={}),void 0===i&&(i=null),"object"!=typeof t||null===t)return t;let s=o.clone,h=i;if(e.shallow){if(!0!==e.shallow)return o.cloneWithShallow(t,e);s=t=>t}else if(h){const e=h.get(t);if(e)return e}else h=new Map;const a=n.getInternalProto(t);if(a===n.buffer)return!1;if(a===n.date)return new Date(t.getTime());if(a===n.regex)return new RegExp(t);const u=o.base(t,a,e);if(u===t)return t;if(h&&h.set(t,u),a===n.set)for(const i of t)u.add(s(i,e,h));else if(a===n.map)for(const[i,n]of t)u.set(i,s(n,e,h));const c=r.keys(t,e);for(const i of c){if("__proto__"===i)continue;if(a===n.array&&"length"===i){u.length=t.length;continue}const r=w.getOwnPropertyDescriptor(t,i);r?r.get||r.set?w.defineProperty(u,i,r):r.enumerable?u[i]=s(t[i],e,h):w.defineProperty(u,i,{enumerable:!1,writable:!0,configurable:!0,value:s(t[i],e,h)}):w.defineProperty(u,i,{enumerable:!0,writable:!0,configurable:!0,value:s(t[i],e,h)})}return u},o.cloneWithShallow=function(t,e){const i=e.shallow;(e=w.assign({},e)).shallow=!1;const n=new Map;for(const e of i){const i=s(t,e);"object"!=typeof i&&"function"!=typeof i||n.set(i,i)}return o.clone(t,e,n)},o.base=function(t,e,i){if(!1===i.prototype)return o.needsProtoHack.has(e)?new e.constructor:e===n.array?[]:{};const s=w.getPrototypeOf(t);if(s&&s.isImmutable)return t;if(e===n.array){const t=[];return s!==e&&w.setPrototypeOf(t,s),t}if(o.needsProtoHack.has(e)){const t=new s.constructor;return s!==e&&w.setPrototypeOf(t,s),t}return w.create(s)}},9474:(t,e,i)=>{const s=i(4277),n={mismatched:null};t.exports=function(t,e,i){return i=w.assign({prototype:!0},i),!!n.isDeepEqual(t,e,i,[])},n.isDeepEqual=function(t,e,i,r){if(t===e)return 0!==t||1/t==1/e;const o=typeof t;if(o!==typeof e||null===t||null===e)return!1;if("function"===o){if(!i.deepFunction||t.toString()!==e.toString())return!1}else if("object"!==o)return t!=t&&e!=e;const h=n.getSharedType(t,e,!!i.prototype);switch(h){case s.buffer:return!1;case s.promise:return t===e;case s.regex:return t.toString()===e.toString();case n.mismatched:return!1}for(let i=r.length-1;i>=0;--i)if(r[i].isSame(t,e))return!0;r.push(new n.SeenEntry(t,e));try{return!!n.isDeepEqualObj(h,t,e,i,r)}finally{r.pop()}},n.getSharedType=function(t,e,i){if(i)return w.getPrototypeOf(t)!==w.getPrototypeOf(e)?n.mismatched:s.getInternalProto(t);const r=s.getInternalProto(t);return r!==s.getInternalProto(e)?n.mismatched:r},n.valueOf=function(t){const e=t.valueOf;if(void 0===e)return t;try{return e.call(t)}catch(t){return t}},n.hasOwnEnumerableProperty=function(t,e){return w.prototype.propertyIsEnumerable.call(t,e)},n.isSetSimpleEqual=function(t,e){for(const i of Set.prototype.values.call(t))if(!Set.prototype.has.call(e,i))return!1;return!0},n.isDeepEqualObj=function(t,e,i,r,o){const{isDeepEqual:h,valueOf:a,hasOwnEnumerableProperty:u}=n,{keys:c,getOwnPropertySymbols:l}=w;if(t===s.array){if(!r.part){if(e.length!==i.length)return!1;for(let t=0;t<e.length;++t)if(!h(e[t],i[t],r,o))return!1;return!0}for(const t of e)for(const e of i)if(h(t,e,r,o))return!0}else if(t===s.set){if(e.size!==i.size)return!1;if(!n.isSetSimpleEqual(e,i)){const t=new Set(Set.prototype.values.call(i));for(const i of Set.prototype.values.call(e)){if(t.delete(i))continue;let e=!1;for(const s of t)if(h(i,s,r,o)){t.delete(s),e=!0;break}if(!e)return!1}}}else if(t===s.map){if(e.size!==i.size)return!1;for(const[t,s]of Map.prototype.entries.call(e))if(void 0===s&&!Map.prototype.has.call(i,t)||!h(s,Map.prototype.get.call(i,t),r,o))return!1}else if(t===s.error&&(e.name!==i.name||e.message!==i.message))return!1;const d=a(e),f=a(i);if((e!==d||i!==f)&&!h(d,f,r,o))return!1;const _=c(e);if(!r.part&&_.length!==c(i).length&&!r.skip)return!1;let v=0;for(const t of _)if(r.skip&&r.skip.includes(t))void 0===i[t]&&++v;else if(!u(i,t)||!h(e[t],i[t],r,o))return!1;if(!r.part&&_.length-v!==c(i).length)return!1;if(!1!==r.symbols){const t=l(e),s=new Set(l(i));for(const n of t){if(!r.skip||!r.skip.includes(n))if(u(e,n)){if(!u(i,n)||!h(e[n],i[n],r,o))return!1}else if(u(i,n))return!1;s.delete(n)}for(const t of s)if(u(i,t))return!1}return!0},n.SeenEntry=class{isSame(t,e){return this.obj===t&&this.ref===e}constructor(t,e){this.obj=t,this.ref=e}}},7916:(t,e,i)=>{const s=i(8761);t.exports=class extends g{constructor(t){super(t.filter((t=>""!==t)).map((t=>"string"==typeof t?t:t instanceof g?t.message:s(t))).join(" ")||"Unknown error"),"function"==typeof g.captureStackTrace&&g.captureStackTrace(this,e.assert)}}},5277:t=>{const e={};t.exports=function(t){if(!t)return"";let i="";for(let s=0;s<t.length;++s){const n=t.charCodeAt(s);e.isSafe(n)?i+=t[s]:i+=e.escapeHtmlChar(n)}return i},e.escapeHtmlChar=function(t){return e.namedHtml.get(t)||(t>=256?"&#"+t+";":"&#x".concat(t.toString(16).padStart(2,"0"),";"))},e.isSafe=function(t){return e.safeCharCodes.has(t)},e.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),e.safeCharCodes=function(){const t=new Set;for(let e=32;e<123;++e)(e>=97||e>=65&&e<=90||e>=48&&e<=57||32===e||46===e||44===e||45===e||58===e||95===e)&&t.add(e);return t}()},6064:t=>{t.exports=function(t){return t.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:t=>{t.exports=function(){}},1687:(t,e,i)=>{const s=i(375),n=i(8571),r=i(7043),o={};t.exports=o.merge=function(t,e,i){if(s(t&&"object"==typeof t,"Invalid target value: must be an object"),s(null==e||"object"==typeof e,"Invalid source value: must be null, undefined, or an object"),!e)return t;if(i=w.assign({nullOverride:!0,mergeArrays:!0},i),Array.isArray(e)){s(Array.isArray(t),"Cannot merge array onto an object"),i.mergeArrays||(t.length=0);for(let s=0;s<e.length;++s)t.push(n(e[s],{symbols:i.symbols}));return t}const h=r.keys(e,i);for(let s=0;s<h.length;++s){const r=h[s];if("__proto__"===r||!w.prototype.propertyIsEnumerable.call(e,r))continue;const a=e[r];if(a&&"object"==typeof a){if(t[r]===a)continue;!t[r]||"object"!=typeof t[r]||Array.isArray(t[r])!==Array.isArray(a)||a instanceof Date||a instanceof RegExp?t[r]=n(a,{symbols:i.symbols}):o.merge(t[r],a,i)}else(null!=a||i.nullOverride)&&(t[r]=a)}return t}},9621:(t,e,i)=>{const s=i(375),n={};t.exports=function(t,e,i){if(!1===e||null==e)return t;"string"==typeof(i=i||{})&&(i={separator:i});const r=Array.isArray(e);s(!r||!i.separator,"Separator option is not valid for array-based chain");const o=r?e:e.split(i.separator||".");let h=t;for(let t=0;t<o.length;++t){let r=o[t];const a=i.iterables&&n.iterables(h);if(Array.isArray(h)||"set"===a){const t=Number(r);Number.isInteger(t)&&(r=t<0?h.length+t:t)}if(!h||"function"==typeof h&&!1===i.functions||!a&&void 0===h[r]){s(!i.strict||t+1===o.length,"Missing segment",r,"in reach path ",e),s("object"==typeof h||!0===i.functions||"function"!=typeof h,"Invalid segment",r,"in reach path ",e),h=i.default;break}h=a?"set"===a?[...h][r]:h.get(r):h[r]}return h},n.iterables=function(t){return t instanceof Set?"set":t instanceof Map?"map":void 0}},8761:t=>{t.exports=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];try{return JSON.stringify(...e)}catch(t){return"[Cannot display object: "+t.message+"]"}}},4277:(t,e)=>{const i={};e=t.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:g.prototype,generic:w.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},i.typeMap=new Map([["[object Error]",e.error],["[object Map]",e.map],["[object Promise]",e.promise],["[object Set]",e.set],["[object WeakMap]",e.weakMap],["[object WeakSet]",e.weakSet]]),e.getInternalProto=function(t){if(Array.isArray(t))return e.array;if(t instanceof Date)return e.date;if(t instanceof RegExp)return e.regex;if(t instanceof g)return e.error;const s=w.prototype.toString.call(t);return i.typeMap.get(s)||e.generic}},7043:(t,e)=>{e.keys=function(t,e){return void 0===e&&(e={}),!1!==e.symbols?Reflect.ownKeys(t):w.getOwnPropertyNames(t)}},3652:(t,e,i)=>{const s=i(375),n={};e.Sorter=class{add(t,e){const i=[].concat((e=e||{}).before||[]),n=[].concat(e.after||[]),r=e.group||"?",o=e.sort||0;s(!i.includes(r),"Item cannot come before itself: ".concat(r)),s(!i.includes("?"),"Item cannot come before unassociated items"),s(!n.includes(r),"Item cannot come after itself: ".concat(r)),s(!n.includes("?"),"Item cannot come after unassociated items"),Array.isArray(t)||(t=[t]);for(const e of t){const t={seq:this.Zu.length,sort:o,before:i,after:n,group:r,node:e};this.Zu.push(t)}if(!e.manual){const t=this.pv();s(t,"item","?"!==r?"added into group ".concat(r):"","created a dependencies error")}return this.nodes}merge(t){Array.isArray(t)||(t=[t]);for(const e of t)if(e)for(const t of e.Zu)this.Zu.push(w.assign({},t));this.Zu.sort(n.mergeSort);for(let t=0;t<this.Zu.length;++t)this.Zu[t].seq=t;const e=this.pv();return s(e,"merge created a dependencies error"),this.nodes}sort(){const t=this.pv();return s(t,"sort created a dependencies error"),this.nodes}pv(){const t={},e=w.create(null),i=w.create(null);for(const s of this.Zu){const n=s.seq,r=s.group;i[r]=i[r]||[],i[r].push(n),t[n]=s.before;for(const t of s.after)e[t]=e[t]||[],e[t].push(n)}for(const e in t){const s=[];for(const n in t[e]){const r=t[e][n];i[r]=i[r]||[],s.push(...i[r])}t[e]=s}for(const s in e)if(i[s])for(const n of i[s])t[n].push(...e[s]);const s={};for(const e in t){const i=t[e];for(const t of i)s[t]=s[t]||[],s[t].push(e)}const n={},r=[];for(let t=0;t<this.Zu.length;++t){let e=t;if(s[t]){e=null;for(let t=0;t<this.Zu.length;++t){if(!0===n[t])continue;s[t]||(s[t]=[]);const i=s[t].length;let r=0;for(let e=0;e<i;++e)n[s[t][e]]&&++r;if(r===i){e=t;break}}}null!==e&&(n[e]=!0,r.push(e))}if(r.length!==this.Zu.length)return!1;const o={};for(const t of this.Zu)o[t.seq]=t;this.Zu=[],this.nodes=[];for(const t of r){const e=o[t];this.nodes.push(e.node),this.Zu.push(e)}return!0}constructor(){this.Zu=[],this.nodes=[]}},n.mergeSort=(t,e)=>t.sort===e.sort?0:t.sort<e.sort?-1:1},5380:(t,e,i)=>{const s=i(443),n=i(2178),r={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:s.URL||URL};e.analyze=function(t,e){if(void 0===e&&(e={}),!t)return n.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof t)throw new g("Invalid input: domain must be a string");if(t.length>256)return n.code("DOMAIN_TOO_LONG");if(r.nonAsciiRx.test(t)){if(!1===e.allowUnicode)return n.code("DOMAIN_INVALID_UNICODE_CHARS");t=t.normalize("NFC")}if(r.domainControlRx.test(t))return n.code("DOMAIN_INVALID_CHARS");t=r.punycode(t),e.allowFullyQualified&&"."===t[t.length-1]&&(t=t.slice(0,-1));const i=e.minDomainSegments||r.minDomainSegments,s=t.split(".");if(s.length<i)return n.code("DOMAIN_SEGMENTS_COUNT");if(e.maxDomainSegments&&s.length>e.maxDomainSegments)return n.code("DOMAIN_SEGMENTS_COUNT_MAX");const o=e.tlds;if(o){const t=s[s.length-1].toLowerCase();if(o.deny&&o.deny.has(t)||o.allow&&!o.allow.has(t))return n.code("DOMAIN_FORBIDDEN_TLDS")}for(let t=0;t<s.length;++t){const e=s[t];if(!e.length)return n.code("DOMAIN_EMPTY_SEGMENT");if(e.length>63)return n.code("DOMAIN_LONG_SEGMENT");if(t<s.length-1){if(!r.domainSegmentRx.test(e))return n.code("DOMAIN_INVALID_CHARS")}else if(!r.tldSegmentRx.test(e))return n.code("DOMAIN_INVALID_TLDS_CHARS")}return null},e.isValid=function(t,i){return!e.analyze(t,i)},r.punycode=function(t){t.includes("%")&&(t=t.replace(/%/g,"%25"));try{return new r.URL("http://".concat(t)).host}catch(e){return t}}},1745:(t,e,i)=>{const s=i(9848),n=i(5380),r=i(2178),o={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(s.TextEncoder||TextEncoder)};e.analyze=function(t,e){return o.email(t,e)},e.isValid=function(t,e){return!o.email(t,e)},o.email=function(t,e){if(void 0===e&&(e={}),"string"!=typeof t)throw new g("Invalid input: email must be a string");if(!t)return r.code("EMPTY_STRING");const i=!o.nonAsciiRx.test(t);if(!i){if(!1===e.allowUnicode)return r.code("FORBIDDEN_UNICODE");t=t.normalize("NFC")}const s=t.split("@");if(2!==s.length)return s.length>2?r.code("MULTIPLE_AT_CHAR"):r.code("MISSING_AT_CHAR");const[h,a]=s;if(!h)return r.code("EMPTY_LOCAL");if(!e.ignoreLength){if(t.length>254)return r.code("ADDRESS_TOO_LONG");if(o.encoder.encode(h).length>64)return r.code("LOCAL_TOO_LONG")}return o.local(h,i)||n.analyze(a,e)},o.local=function(t,e){const i=t.split(".");for(const t of i){if(!t.length)return r.code("EMPTY_LOCAL_SEGMENT");if(e){if(!o.atextRx.test(t))return r.code("INVALID_LOCAL_CHARS")}else for(const e of t){if(o.atextRx.test(e))continue;const t=o.binary(e);if(!o.atomRx.test(t))return r.code("INVALID_LOCAL_CHARS")}}},o.binary=function(t){return Array.from(o.encoder.encode(t)).map((t=>String.fromCharCode(t))).join("")},o.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,o.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(t,e)=>{e.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},e.code=function(t){return{code:t,error:e.codes[t]}}},9959:(t,e,i)=>{const s=i(375),n=i(5752);e.regex=function(t){void 0===t&&(t={}),s(void 0===t.cidr||"string"==typeof t.cidr,"options.cidr must be a string");const e=t.cidr?t.cidr.toLowerCase():"optional";s(["required","optional","forbidden"].includes(e),"options.cidr must be one of required, optional, forbidden"),s(void 0===t.version||"string"==typeof t.version||Array.isArray(t.version),"options.version must be a string or an array of string");let i=t.version||["ipv4","ipv6","ipvfuture"];Array.isArray(i)||(i=[i]),s(i.length>=1,"options.version must have at least 1 version specified");for(let t=0;t<i.length;++t)s("string"==typeof i[t],"options.version must only contain strings"),i[t]=i[t].toLowerCase(),s(["ipv4","ipv6","ipvfuture"].includes(i[t]),"options.version contains unknown version "+i[t]+" - must be one of ipv4, ipv6, ipvfuture");i=Array.from(new Set(i));const r="(?:".concat(i.map((t=>{if("forbidden"===e)return n.ip[t];const i="\\/".concat("ipv4"===t?n.ip.v4Cidr:n.ip.v6Cidr);return"required"===e?"".concat(n.ip[t]).concat(i):"".concat(n.ip[t],"(?:").concat(i,")?")})).join("|"),")"),o=new RegExp("^".concat(r,"$"));return{cidr:e,versions:i,regex:o,raw:r}}},5752:(t,e,i)=>{const s=i(375),n=i(6064),r={generate:function(){const t={},e="\\dA-Fa-f",i="["+e+"]",s="\\w-\\.~",n="!\\$&'\\(\\)\\*\\+,;=",r="%"+e,o=s+r+n+":@",h="["+o+"]",a="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";t.ipv4address="(?:"+a+"\\.){3}"+a;const u=i+"{1,4}",c="(?:"+u+":"+u+"|"+t.ipv4address+")",l="(?:"+u+":){6}"+c,d="::(?:"+u+":){5}"+c,f="(?:"+u+")?::(?:"+u+":){4}"+c,_="(?:(?:"+u+":){0,1}"+u+")?::(?:"+u+":){3}"+c,v="(?:(?:"+u+":){0,2}"+u+")?::(?:"+u+":){2}"+c,m="(?:(?:"+u+":){0,3}"+u+")?::"+u+":"+c,g="(?:(?:"+u+":){0,4}"+u+")?::"+c,p="(?:(?:"+u+":){0,5}"+u+")?::"+u,w="(?:(?:"+u+":){0,6}"+u+")?::";t.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",t.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",t.ipv6address="(?:"+l+"|"+d+"|"+f+"|"+_+"|"+v+"|"+m+"|"+g+"|"+p+"|"+w+")",t.ipvFuture="v"+i+"+\\.["+s+n+":]+",t.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",t.schemeRegex=new RegExp(t.scheme);const y="["+s+r+n+":]*",b="["+s+r+n+"]{1,255}",A="(?:\\[(?:"+t.ipv6address+"|"+t.ipvFuture+")\\]|"+t.ipv4address+"|"+b+")",S="(?:"+y+"@)?"+A+"(?::\\d*)?",T="(?:"+y+"@)?("+A+")(?::\\d*)?",k=h+"*",E=h+"+",x="(?:\\/"+k+")*",R="\\/(?:"+E+x+")?",I=E+x,C="["+s+r+n+"@]+"+x,P="(?:\\/\\/\\/"+k+x+")";return t.hierPart="(?:(?:\\/\\/"+S+x+")|"+R+"|"+I+"|"+P+")",t.hierPartCapture="(?:(?:\\/\\/"+T+x+")|"+R+"|"+I+")",t.relativeRef="(?:(?:\\/\\/"+S+x+")|"+R+"|"+C+"|)",t.relativeRefCapture="(?:(?:\\/\\/"+T+x+")|"+R+"|"+C+"|)",t.query="["+o+"\\/\\?]*(?=#|$)",t.queryWithSquareBrackets="["+o+"\\[\\]\\/\\?]*(?=#|$)",t.fragment="["+o+"\\/\\?]*",t}};r.rfc3986=r.generate(),e.ip={v4Cidr:r.rfc3986.ipv4Cidr,v6Cidr:r.rfc3986.ipv6Cidr,ipv4:r.rfc3986.ipv4address,ipv6:r.rfc3986.ipv6address,ipvfuture:r.rfc3986.ipvFuture},r.createRegex=function(t){const e=r.rfc3986,i="(?:\\?"+(t.allowQuerySquareBrackets?e.queryWithSquareBrackets:e.query)+")?(?:#"+e.fragment+")?",o=t.domain?e.relativeRefCapture:e.relativeRef;if(t.relativeOnly)return r.wrap(o+i);let h="";if(t.scheme){s(t.scheme instanceof RegExp||"string"==typeof t.scheme||Array.isArray(t.scheme),"scheme must be a RegExp, String, or Array");const i=[].concat(t.scheme);s(i.length>=1,"scheme must have at least 1 scheme specified");const r=[];for(let t=0;t<i.length;++t){const o=i[t];s(o instanceof RegExp||"string"==typeof o,"scheme at position "+t+" must be a RegExp or String"),o instanceof RegExp?r.push(o.source.toString()):(s(e.schemeRegex.test(o),"scheme at position "+t+" must be a valid scheme"),r.push(n(o)))}h=r.join("|")}const a="(?:"+(h?"(?:"+h+")":e.scheme)+":"+(t.domain?e.hierPartCapture:e.hierPart)+")",u=t.allowRelative?"(?:"+a+"|"+o+")":a;return r.wrap(u+i,h)},r.wrap=function(t,e){return{raw:t="(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])".concat(t),regex:new RegExp("^".concat(t,"$")),scheme:e}},r.uriRegex=r.createRegex({}),e.regex=function(t){return void 0===t&&(t={}),t.scheme||t.allowRelative||t.relativeOnly||t.allowQuerySquareBrackets||t.domain?r.createRegex(t):r.uriRegex}},1447:(t,e)=>{const i={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Po("formula"),settings:Po("settings")};e.Parser=class{X_(t){let s=[],n="",r=0,o=!1;const h=t=>{if(r)throw new g("Formula missing closing parenthesis");const h=s.length?s[s.length-1]:null;if(o||n||t){if(h&&"reference"===h.type&&")"===t)return h.type="function",h.value=this.yv(n,h.value),void(n="");if(")"===t){const t=new e.Parser(n,this.settings);s.push({type:"segment",value:t})}else if(o){if("]"===o)return s.push({type:"reference",value:n}),void(n="");s.push({type:"literal",value:n})}else if(i.operatorCharacters.includes(n))h&&"operator"===h.type&&i.operators.includes(h.value+n)?h.value+=n:s.push({type:"operator",value:n});else if(n.match(i.numberRx))s.push({type:"constant",value:C(n)});else if(void 0!==this.settings.constants[n])s.push({type:"constant",value:this.settings.constants[n]});else{if(!n.match(i.tokenRx))throw new g("Formula contains invalid token: ".concat(n));s.push({type:"reference",value:n})}n=""}};for(const e of t)o?e===o?(h(),o=!1):n+=e:r?"("===e?(n+=e,++r):")"===e?(--r,r?n+=e:h(e)):n+=e:e in i.literals?o=i.literals[e]:"("===e?(h(),++r):i.operatorCharacters.includes(e)?(h(),n=e,h()):" "!==e?n+=e:h();h(),s=s.map(((t,e)=>"operator"!==t.type||"-"!==t.value||e&&"operator"!==s[e-1].type?t:{type:"operator",value:"n"}));let a=!1;for(const t of s){if("operator"===t.type){if(i.operatorsPrefix.includes(t.value))continue;if(!a)throw new g("Formula contains an operator in invalid position");if(!i.operators.includes(t.value))throw new g("Formula contains an unknown operator ".concat(t.value))}else if(a)throw new g("Formula missing expected operator");a=!a}if(!a)throw new g("Formula contains invalid trailing operator");1===s.length&&["reference","literal","constant"].includes(s[0].type)&&(this.single={type:"reference"===s[0].type?"reference":"value",value:s[0].value}),this.bv=s.map((t=>{if("operator"===t.type)return i.operatorsPrefix.includes(t.value)?t:t.value;if("reference"!==t.type)return t.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(t.value))throw new g("Formula contains invalid reference ".concat(t.value));return this.settings.reference?this.settings.reference(t.value):i.reference(t.value)}))}yv(t,s){const n=this.settings.functions[s];if("function"!=typeof n)throw new g("Formula contains unknown function ".concat(s));let r=[];if(t){let e="",n=0,o=!1;const h=()=>{if(!e)throw new g("Formula contains function ".concat(s," with invalid arguments ").concat(t));r.push(e),e=""};for(let s=0;s<t.length;++s){const r=t[s];o?(e+=r,r===o&&(o=!1)):r in i.literals&&!n?(e+=r,o=i.literals[r]):","!==r||n?(e+=r,"("===r?++n:")"===r&&--n):h()}h()}return r=r.map((t=>new e.Parser(t,this.settings))),function(t){const e=[];for(const i of r)e.push(i.evaluate(t));return n.call(t,...e)}}evaluate(t){const e=this.bv.slice();for(let s=e.length-2;s>=0;--s){const n=e[s];if(n&&"operator"===n.type){const r=e[s+1];e.splice(s+1,1);const o=i.evaluate(r,t);e[s]=i.single(n.value,o)}}return i.operatorsOrder.forEach((s=>{for(let n=1;n<e.length-1;)if(s.includes(e[n])){const s=e[n],r=i.evaluate(e[n-1],t),o=i.evaluate(e[n+1],t);e.splice(n,2);const h=i.calculate(s,r,o);e[n-1]=0===h?0:h}else n+=2})),i.evaluate(e[0],t)}constructor(t,e={}){if(!e[i.settings]&&e.constants)for(const t in e.constants){const i=e.constants[t];if(null!==i&&!["boolean","number","string"].includes(typeof i))throw new g("Formula constant ".concat(t," contains invalid ").concat(typeof i," value type"))}this.settings=e[i.settings]?e:w.assign({[i.settings]:!0,constants:{},functions:{}},e),this.single=null,this.bv=null,this.X_(t)}},e.Parser.prototype[i.symbol]=!0,i.reference=function(t){return function(e){return e&&void 0!==e[t]?e[t]:null}},i.evaluate=function(t,e){return null===t?null:"function"==typeof t?t(e):t[i.symbol]?t.evaluate(e):t},i.single=function(t,e){if("!"===t)return!e;const i=-e;return 0===i?0:i},i.calculate=function(t,e,s){if("??"===t)return i.exists(e)?e:s;if("string"==typeof e||"string"==typeof s){if("+"===t)return(e=i.exists(e)?e:"")+(i.exists(s)?s:"")}else switch(t){case"^":return _.pow(e,s);case"*":return e*s;case"/":return e/s;case"%":return e%s;case"+":return e+s;case"-":return e-s}switch(t){case"<":return e<s;case"<=":return e<=s;case">":return e>s;case">=":return e>=s;case"==":return e===s;case"!=":return e!==s;case"&&":return e&&s;case"||":return e||s}return null},i.exists=function(t){return null!=t}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:t=>{t.exports=JSON.parse('{"version":"17.13.3"}')}},e={},function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,i),r.exports}(5107);var t,e},t.exports=i()}(Us);const Gs=T(Us.exports);let Hs;class Zs extends xt{getRTCPeerConnection(){return this.webRTCPeer?this.webRTCPeer.getRTCPeer():null}stop(){var t;Hs.info("Stopping"),this.webRTCPeer.closeRTCPeer(),null==(t=this.signaling)||t.close(),this.signaling=null,this.stopReconnection=!0,this.webRTCPeer=new rs}isActive(){const t=this.webRTCPeer.getRTCPeerStatus();return Hs.info("Broadcast status: ",t||"not_established"),"connected"===t}setReconnect(){this.signaling.on("migrate",(()=>this.replaceConnection())),this.autoReconnect&&(this.signaling.on(ys,(()=>{(this.firstReconnection||!this.alreadyDisconnected)&&(this.firstReconnection=!1,this.reconnect({error:new g("Signaling error: wsConnectionError")}))})),this.webRTCPeer.on(ss.connectionStateChange,(t=>{q(t),"connected"===t&&z(new Date),("failed"===t||"disconnected"===t&&this.alreadyDisconnected)&&this.firstReconnection?(this.firstReconnection=!1,this.reconnect({error:new g("Connection state change: RTCPeerConnectionState disconnected")})):"disconnected"===t?(this.alreadyDisconnected=!0,u((()=>this.reconnect({error:new g("Connection state change: RTCPeerConnectionState disconnected")})),1500)):this.alreadyDisconnected=!1})))}async reconnect(t){try{Hs.info("Attempting to reconnect..."),!this.isActive()&&!this.stopReconnection&&!this.isReconnecting&&(this.stop(),this.emit("reconnect",{timeout:Xs(this.reconnectionInterval),error:null!=t&&t.error?null==t?void 0:t.error:new g("Attempting to reconnect")}),this.isReconnecting=!0,await this.connect(this.options),this.alreadyDisconnected=!1,this.reconnectionInterval=1e3,this.firstReconnection=!0,this.isReconnecting=!1)}catch(t){this.isReconnecting=!1,this.reconnectionInterval=Xs(this.reconnectionInterval),Hs.error("Reconnection failed, retrying in ".concat(this.reconnectionInterval,"ms. "),t),u((()=>this.reconnect({error:t})),this.reconnectionInterval)}}constructor(t,e,i,s){if(super(),Hs=i,!e)throw Hs.error("Token generator is required to construct this module."),new g("Token generator is required to construct this module.");this.webRTCPeer=new rs,this.signaling=null,this.autoReconnect=s,this.reconnectionInterval=1e3,this.alreadyDisconnected=!1,this.firstReconnection=!0,this.stopReconnection=!1,this.isReconnecting=!1,this.tokenGenerator=e,this.options=null}}const Xs=t=>t<32e3?2*t:t,zs=s.RTCRtpSender&&!!RTCRtpSender.prototype.createEncodedStreams&&s.RTCRtpReceiver&&!!RTCRtpReceiver.prototype.createEncodedStreams,qs="RTCRtpScriptTransform"in s,Ys="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBGPXR5cGVvZiBnbG9iYWxUaGlzPCJ1Ij9nbG9iYWxUaGlzOnR5cGVvZiB3aW5kb3c8InUiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsPCJ1Ij9nbG9iYWw6dHlwZW9mIHNlbGY8InUiP3NlbGY6e307ZnVuY3Rpb24gVyhuKXtyZXR1cm4gbiYmbi5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwiZGVmYXVsdCIpP24uZGVmYXVsdDpufXZhciBCPXtleHBvcnRzOnt9fTsvKiEKICoganMtbG9nZ2VyIC0gaHR0cDovL2dpdGh1Yi5jb20vam9ubnlyZWV2ZXMvanMtbG9nZ2VyCiAqIEpvbm55IFJlZXZlcywgaHR0cDovL2pvbm55cmVldmVzLmNvLnVrLwogKiBqcy1sb2dnZXIgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAqLyhmdW5jdGlvbihuKXsoZnVuY3Rpb24odCl7dmFyIGU9e307ZS5WRVJTSU9OPSIxLjYuMSI7dmFyIHMscj17fSxvPWZ1bmN0aW9uKGksdSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHUuYXBwbHkoaSxhcmd1bWVudHMpfX0sYT1mdW5jdGlvbigpe3ZhciBpPWFyZ3VtZW50cyx1PWlbMF0saCxjO2ZvcihjPTE7YzxpLmxlbmd0aDtjKyspZm9yKGggaW4gaVtjXSkhKGggaW4gdSkmJmlbY10uaGFzT3duUHJvcGVydHkoaCkmJih1W2hdPWlbY11baF0pO3JldHVybiB1fSxkPWZ1bmN0aW9uKGksdSl7cmV0dXJue3ZhbHVlOmksbmFtZTp1fX07ZS5UUkFDRT1kKDEsIlRSQUNFIiksZS5ERUJVRz1kKDIsIkRFQlVHIiksZS5JTkZPPWQoMywiSU5GTyIpLGUuVElNRT1kKDQsIlRJTUUiKSxlLldBUk49ZCg1LCJXQVJOIiksZS5FUlJPUj1kKDgsIkVSUk9SIiksZS5PRkY9ZCg5OSwiT0ZGIik7dmFyIGw9ZnVuY3Rpb24oaSl7dGhpcy5jb250ZXh0PWksdGhpcy5zZXRMZXZlbChpLmZpbHRlckxldmVsKSx0aGlzLmxvZz10aGlzLmluZm99O2wucHJvdG90eXBlPXtzZXRMZXZlbDpmdW5jdGlvbihpKXtpJiYidmFsdWUiaW4gaSYmKHRoaXMuY29udGV4dC5maWx0ZXJMZXZlbD1pKX0sZ2V0TGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0LmZpbHRlckxldmVsfSxlbmFibGVkRm9yOmZ1bmN0aW9uKGkpe3ZhciB1PXRoaXMuY29udGV4dC5maWx0ZXJMZXZlbDtyZXR1cm4gaS52YWx1ZT49dS52YWx1ZX0sdHJhY2U6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLlRSQUNFLGFyZ3VtZW50cyl9LGRlYnVnOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5ERUJVRyxhcmd1bWVudHMpfSxpbmZvOmZ1bmN0aW9uKCl7dGhpcy5pbnZva2UoZS5JTkZPLGFyZ3VtZW50cyl9LHdhcm46ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLldBUk4sYXJndW1lbnRzKX0sZXJyb3I6ZnVuY3Rpb24oKXt0aGlzLmludm9rZShlLkVSUk9SLGFyZ3VtZW50cyl9LHRpbWU6ZnVuY3Rpb24oaSl7dHlwZW9mIGk9PSJzdHJpbmciJiZpLmxlbmd0aD4wJiZ0aGlzLmludm9rZShlLlRJTUUsW2ksInN0YXJ0Il0pfSx0aW1lRW5kOmZ1bmN0aW9uKGkpe3R5cGVvZiBpPT0ic3RyaW5nIiYmaS5sZW5ndGg+MCYmdGhpcy5pbnZva2UoZS5USU1FLFtpLCJlbmQiXSl9LGludm9rZTpmdW5jdGlvbihpLHUpe3MmJnRoaXMuZW5hYmxlZEZvcihpKSYmcyh1LGEoe2xldmVsOml9LHRoaXMuY29udGV4dCkpfX07dmFyIGY9bmV3IGwoe2ZpbHRlckxldmVsOmUuT0ZGfSk7KGZ1bmN0aW9uKCl7dmFyIGk9ZTtpLmVuYWJsZWRGb3I9byhmLGYuZW5hYmxlZEZvciksaS50cmFjZT1vKGYsZi50cmFjZSksaS5kZWJ1Zz1vKGYsZi5kZWJ1ZyksaS50aW1lPW8oZixmLnRpbWUpLGkudGltZUVuZD1vKGYsZi50aW1lRW5kKSxpLmluZm89byhmLGYuaW5mbyksaS53YXJuPW8oZixmLndhcm4pLGkuZXJyb3I9byhmLGYuZXJyb3IpLGkubG9nPWkuaW5mb30pKCksZS5zZXRIYW5kbGVyPWZ1bmN0aW9uKGkpe3M9aX0sZS5zZXRMZXZlbD1mdW5jdGlvbihpKXtmLnNldExldmVsKGkpO2Zvcih2YXIgdSBpbiByKXIuaGFzT3duUHJvcGVydHkodSkmJnJbdV0uc2V0TGV2ZWwoaSl9LGUuZ2V0TGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gZi5nZXRMZXZlbCgpfSxlLmdldD1mdW5jdGlvbihpKXtyZXR1cm4gcltpXXx8KHJbaV09bmV3IGwoYSh7bmFtZTppfSxmLmNvbnRleHQpKSl9LGUuY3JlYXRlRGVmYXVsdEhhbmRsZXI9ZnVuY3Rpb24oaSl7aT1pfHx7fSxpLmZvcm1hdHRlcj1pLmZvcm1hdHRlcnx8ZnVuY3Rpb24ocCxfKXtfLm5hbWUmJnAudW5zaGlmdCgiWyIrXy5uYW1lKyJdIil9O3ZhciB1PXt9LGg9ZnVuY3Rpb24oYyxwKXtGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjLGNvbnNvbGUscCl9O3JldHVybiB0eXBlb2YgY29uc29sZT4idSI/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKGMscCl7Yz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjKTt2YXIgXz1jb25zb2xlLmxvZyxnO3AubGV2ZWw9PT1lLlRJTUU/KGc9KHAubmFtZT8iWyIrcC5uYW1lKyJdICI6IiIpK2NbMF0sY1sxXT09PSJzdGFydCI/Y29uc29sZS50aW1lP2NvbnNvbGUudGltZShnKTp1W2ddPW5ldyBEYXRlKCkuZ2V0VGltZSgpOmNvbnNvbGUudGltZUVuZD9jb25zb2xlLnRpbWVFbmQoZyk6aChfLFtnKyI6ICIrKG5ldyBEYXRlKCkuZ2V0VGltZSgpLXVbZ10pKyJtcyJdKSk6KHAubGV2ZWw9PT1lLldBUk4mJmNvbnNvbGUud2Fybj9fPWNvbnNvbGUud2FybjpwLmxldmVsPT09ZS5FUlJPUiYmY29uc29sZS5lcnJvcj9fPWNvbnNvbGUuZXJyb3I6cC5sZXZlbD09PWUuSU5GTyYmY29uc29sZS5pbmZvP189Y29uc29sZS5pbmZvOnAubGV2ZWw9PT1lLkRFQlVHJiZjb25zb2xlLmRlYnVnP189Y29uc29sZS5kZWJ1ZzpwLmxldmVsPT09ZS5UUkFDRSYmY29uc29sZS50cmFjZSYmKF89Y29uc29sZS50cmFjZSksaS5mb3JtYXR0ZXIoYyxwKSxoKF8sYykpfX0sZS51c2VEZWZhdWx0cz1mdW5jdGlvbihpKXtlLnNldExldmVsKGkmJmkuZGVmYXVsdExldmVsfHxlLkRFQlVHKSxlLnNldEhhbmRsZXIoZS5jcmVhdGVEZWZhdWx0SGFuZGxlcihpKSl9LGUuc2V0RGVmYXVsdHM9ZS51c2VEZWZhdWx0cyxuLmV4cG9ydHM/bi5leHBvcnRzPWU6KGUuX3ByZXZMb2dnZXI9dC5Mb2dnZXIsZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuTG9nZ2VyPWUuX3ByZXZMb2dnZXIsZX0sdC5Mb2dnZXI9ZSl9KShGKX0pKEIpO3ZhciB6PUIuZXhwb3J0cyxEPVcoeik7Y2xhc3Mgd3tjb25zdHJ1Y3Rvcih0KXt0aGlzLmRhdGE9dCx0aGlzLmJpdE9mZnNldD0wfXJlYWRCaXRzKHQpe2lmKHRoaXMuYml0T2Zmc2V0K3Q+dGhpcy5kYXRhLmxlbmd0aCo4KXRocm93IG5ldyBFcnJvcigiQXR0ZW1wdGVkIHRvIHJlYWQgcGFzdCB0aGUgZW5kIG9mIHRoZSBiaXRzdHJlYW0iKTtsZXQgZT0wO2ZvcihsZXQgcz0wO3M8dDtzKyspe2NvbnN0IHI9TWF0aC5mbG9vcih0aGlzLmJpdE9mZnNldC84KSxvPTctdGhpcy5iaXRPZmZzZXQlOCxhPXRoaXMuZGF0YVtyXT4+byYxO2V8PWE8PHQtMS1zLHRoaXMuYml0T2Zmc2V0Kyt9cmV0dXJuIGV9c2tpcCh0KXt0aGlzLmJpdE9mZnNldCs9dH1yZWFkRXhwR29sb21iVW5zaWduZWQoKXtsZXQgdD0tMTtmb3IobGV0IGU9MDtlPT09MDt0KyspZT10aGlzLnJlYWRCaXRzKDEpO3JldHVybigxPDx0KS0xK3RoaXMucmVhZEJpdHModCl9cmVhZEV4cEdvbG9tYlNpZ25lZCgpe2NvbnN0IHQ9dGhpcy5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtyZXR1cm4gdCUyPT09MD8tKHQvMik6KHQrMSkvMn19Y29uc3QgbT17U0xJQ0VfTk9OX0lEUjoxLFNMSUNFX1BBUlRJVElPTl9BOjIsU0xJQ0VfSURSOjUsU0VJX0gyNjQ6NixTRUlfSDI2NV9QUkVGSVg6MzksU0VJX0gyNjVfU1VGRklYOjQwLFNQU19IMjY0OjcsU1BTX0gyNjU6MzMsUFBTX0gyNjQ6OCxQUFNfSDI2NTozNH0sUj17UElDX1RJTUlORzoxLFVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6NX0sRT17TEVHQUNZOjEsTkVXOjIsVElNRUNPREU6MyxPVEhFUjo0fSxqPSI2ZTljZmQyYS01OTA3LTQ5ZmYtYjM2My04OTc4YTZlODM0MGUiLHE9IjlhMjFmM2JlLTMxZjAtNGI3OC1iMGJlLWM3ZjdkYmI5NzI1MCIsTD0iZDQwZTM4ZWEtZDQxOS00YzYyLTk0ZWQtMjBhYzM3YjRlNGZhIjtjbGFzcyBWe2NvbnN0cnVjdG9yKHQ9IkgyNjQiKXt0aGlzLnNwcz1uZXcgTWFwLHRoaXMucHBzPW5ldyBNYXAsdGhpcy5hY3RpdmVTUFM9bnVsbCx0aGlzLmNvZGVjPXR9Y29sbGVjdFBQUyh0KXt0aGlzLmNvZGVjPT09IkgyNjQiP3RoaXMuY29sbGVjdEgyNjRQUFModCk6dGhpcy5jb2xsZWN0SDI2NVBQUyh0KX1jb2xsZWN0U1BTKHQpe3RoaXMuY29kZWM9PT0iSDI2NCI/dGhpcy5jb2xsZWN0SDI2NFNQUyh0KTp0aGlzLmNvbGxlY3RIMjY1U1BTKHQpfWNvbGxlY3RIMjY0U1BTKHQpe2NvbnN0IGU9bmV3IHcodCkscz1lLnJlYWRCaXRzKDgpLHI9WzEwMCwxMTAsMTIyLDI0NCw0NCw4Myw4NiwxMTgsMTI4LDEzOCwxMzksMTM0LDEzNV07ZS5za2lwKDgpLGUuc2tpcCg4KTtjb25zdCBvPWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7aWYobz4zMXx8bzwwKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzZXFfcGFyYW1ldGVyX3NldF9pZCIpO2lmKHIuaW5jbHVkZXMocykpe2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtpZihsPT09MyYmZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnNraXAoMSksZS5yZWFkQml0cygxKSl7Y29uc3QgaT1sIT09Mz84OjEyO2ZvcihsZXQgdT0wO3U8aTt1KyspaWYoZS5yZWFkQml0cygxKSl7Y29uc3QgaD11PDY/MTY6NjQ7bGV0IGM9OCxwPTg7Zm9yKGxldCBfPTA7XzxoO18rKyl7aWYocCE9PTApe2NvbnN0IGc9ZS5yZWFkRXhwR29sb21iU2lnbmVkKCk7cD0oYytnKzI1NiklMjU2fWM9cD09PTA/YzpwfX19fWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3QgYT1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKGE9PT0wKWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7ZWxzZSBpZihhPT09MSl7ZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlNpZ25lZCgpO2NvbnN0IGw9ZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKTtmb3IobGV0IGY9MDtmPGw7ZisrKWUucmVhZEV4cEdvbG9tYlNpZ25lZCgpfWUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5za2lwKDEpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRCaXRzKDEpPT09MCYmZS5za2lwKDEpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCksZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSk7bGV0IGQ7aWYoZS5yZWFkQml0cygxKSl7bGV0IGY9ZnVuY3Rpb24oYyl7Y29uc3QgcD1jLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2Muc2tpcCg0KSxjLnNraXAoNCk7Zm9yKGxldCB4PTA7eDw9cDt4KyspYy5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxjLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGMuc2tpcCgxKTtjLnNraXAoNSk7Y29uc3QgXz1jLnJlYWRCaXRzKDUpLGc9Yy5yZWFkQml0cyg1KSxBPWMucmVhZEJpdHMoNSk7cmV0dXJue2NwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6XyxkcGJfb3V0cHV0X2RlbGF5X2xlbmd0aF9taW51czE6Zyx0aW1lX29mZnNldF9sZW5ndGg6QX19O2UucmVhZEJpdHMoMSkmJmUucmVhZEJpdHMoOCk9PT0yNTUmJihlLnNraXAoMTYpLGUuc2tpcCgxNikpLGUucmVhZEJpdHMoMSkmJmUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiYoZS5za2lwKDMpLGUuc2tpcCgxKSxlLnJlYWRCaXRzKDEpJiZlLnNraXAoMjQpKSxlLnJlYWRCaXRzKDEpJiYoZS5yZWFkRXhwR29sb21iVW5zaWduZWQoKSxlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpKTtjb25zdCBsPWUucmVhZEJpdHMoMSk/e251bV91bml0c19pbl90aWNrOmUucmVhZEJpdHMoMzIpLHRpbWVfc2NhbGU6ZS5yZWFkQml0cygzMiksZml4ZWRfZnJhbWVfcmF0ZV9mbGFnOmUucmVhZEJpdHMoMSl9OnZvaWQgMCxpPWUucmVhZEJpdHMoMSk/ZihlKTp2b2lkIDAsdT1lLnJlYWRCaXRzKDEpP2YoZSk6dm9pZCAwOyhpfHx1KSYmZS5za2lwKDEpO2NvbnN0IGg9ZS5yZWFkQml0cygxKTtkPXt0aW1pbmdfaW5mbzpsLG5hbF9ocmRfcGFyYW1ldGVyczppLHZjbF9ocmRfcGFyYW1ldGVyczp1LHBpY19zdHJ1Y3RfcHJlc2VudF9mbGFnOmh9fXRoaXMuc3BzLnNldChvLHt2dWlfcGFyYW1ldGVyczpkfSl9Y29sbGVjdEgyNjVTUFModCl7fWNvbGxlY3RIMjY0UFBTKHQpe2NvbnN0IGU9bmV3IHcodCkscz1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO2lmKHM+MjU1fHxzPDApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBpY19wYXJhbWV0ZXJfc2V0X2lkIik7Y29uc3Qgcj1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpO3RoaXMucHBzLnNldChzLHtzZXFfcGFyYW1ldGVyX3NldF9pZDpyfSl9Y29sbGVjdEgyNjVQUFModCl7fWZpbmRBY3RpdmVTUFModCl7Y29uc3QgZT1uZXcgdyh0KTtlLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLGUucmVhZEV4cEdvbG9tYlVuc2lnbmVkKCk7Y29uc3Qgcz1lLnJlYWRFeHBHb2xvbWJVbnNpZ25lZCgpLHI9dGhpcy5wcHMuZ2V0KHMpO2lmKHIpe2NvbnN0IG89dGhpcy5zcHMuZ2V0KHIuc2VxX3BhcmFtZXRlcl9zZXRfaWQpO2lmKG8pe3RoaXMuYWN0aXZlU1BTPW87cmV0dXJufX10aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIHRoZSBhY3RpdmUgU1BTIil9fWNvbnN0IFM9bmV3IFY7ZnVuY3Rpb24gRyhuLHQpe2Zvcig7dDxuLmJ5dGVMZW5ndGgtNDspe2lmKG5bdF09PT0wJiZuW3QrMV09PT0wJiYoblt0KzJdPT09MXx8blt0KzJdPT09MCYmblt0KzNdPT09MSkpcmV0dXJuIHQ7dCs9MX1yZXR1cm4tMX1mdW5jdGlvbiBVKG4pe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkobi5ieXRlTGVuZ3RoKTtsZXQgZT0wLHM9MDtmb3IobGV0IHI9MjtyPG4uYnl0ZUxlbmd0aDtyKyspbltyXT09PTMmJm5bci0xXT09PTAmJm5bci0yXT09PTAmJih0LnNldChuLnN1YmFycmF5KHMsciksZSksZSs9ci1zLHM9cisxKTtyZXR1cm4gczxuLmJ5dGVMZW5ndGgmJnQuc2V0KG4uc3ViYXJyYXkocyksZSksdH1mdW5jdGlvbiBZKG4sdCl7bGV0IGU9MDtjb25zdCBzPXQ9PT0iSDI2NCI/MToyLHI9W107Zm9yKDtlPG4uYnl0ZUxlbmd0aC00Oyl7Y29uc3Qgbz1HKG4sZSk7aWYobz49ZSl7Y29uc3QgYT1uW28rMl09PT0xPzM6NCxkPUcobixvK2Ercyk7aWYoZD5vKXIucHVzaChuLnN1YmFycmF5KG8sZCkpLGU9ZDtlbHNle3IucHVzaChuLnN1YmFycmF5KG8pKTticmVha319ZWxzZSBicmVha31yZXR1cm4gcn1mdW5jdGlvbiBYKG4sdCl7bGV0IGU9ITA7cmV0dXJuIFkobix0KS5maWx0ZXIocz0+e2NvbnN0IHI9c1syXT09PTE/Mzo0LG89dD09PSJIMjY0Ij8xOjIsYT1zW3JdLGQ9dD09PSJIMjY0Ij9hJjMxOmE+PjEmNjM7aWYoZSlzd2l0Y2goZCl7Y2FzZSBtLlBQU19IMjY0OmNhc2UgbS5QUFNfSDI2NTpTLmNvbGxlY3RQUFMoVShzLnN1YmFycmF5KHIrbykpKTticmVhaztjYXNlIG0uU1BTX0gyNjQ6Y2FzZSBtLlNQU19IMjY1OlMuY29sbGVjdFNQUyhVKHMuc3ViYXJyYXkocitvKSkpO2JyZWFrO2Nhc2UgbS5TTElDRV9JRFI6Y2FzZSBtLlNMSUNFX05PTl9JRFI6Y2FzZSBtLlNMSUNFX1BBUlRJVElPTl9BOnRyeXtTLmZpbmRBY3RpdmVTUFMoVShzLnN1YmFycmF5KHIrbykpKSxlPSExfWNhdGNoKGwpe2NvbnNvbGUuaW5mbygiRmFpbGVkIHRvIGZpbmQgYWN0aXZlIFNQUy4gV2lsbCBub3QgYmUgYWJsZSB0byBleHRyYWN0IFBJQyB0aW1pbmcgbWV0YWRhdGEiKX1icmVha31yZXR1cm5bbS5TRUlfSDI2NCxtLlNFSV9IMjY1X1BSRUZJWCxtLlNFSV9IMjY1X1NVRkZJWF0uaW5jbHVkZXMoZCl9KX1mdW5jdGlvbiAkKG4pe2xldCB0PTAsZT0wO2Zvcig7bltlXT09PTI1NTspdCs9MjU1LGUrKzt0Kz1uW2VdLGUrKztsZXQgcz0wO2Zvcig7bltlXT09PTI1NTspcys9MjU1LGUrKztyZXR1cm4gcys9bltlXSxlKysse3R5cGU6dCxjb250ZW50Om4uc3ViYXJyYXkoZSxlK3MpfX1mdW5jdGlvbiBKKG4pe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkoVChxKSksZT1uZXcgVWludDhBcnJheShUKGopKSxzPW5ldyBVaW50OEFycmF5KFQoTCkpO3JldHVybiB0LmV2ZXJ5KChyLG8pPT5yPT09bltvXSk/RS5USU1FQ09ERTplLmV2ZXJ5KChyLG8pPT5yPT09bltvXSk/RS5MRUdBQ1k6cy5ldmVyeSgocixvKT0+cj09PW5bb10pP0UuTkVXOkUuT1RIRVJ9ZnVuY3Rpb24gSyhuLHQpe2xldCBlPTA7bi51dWlkPXQuc3ViYXJyYXkoZSxlKzE2KSxlKz0xNjtjb25zdCBzPUoobi51dWlkKSxyPXQuc3ViYXJyYXkoZSk7c3dpdGNoKHMpe2Nhc2UgRS5MRUdBQ1k6Y2FzZSBFLk9USEVSOm4udW5yZWdpc3RlcmVkPXI7YnJlYWs7Y2FzZSBFLlRJTUVDT0RFOm4udGltZWNvZGU9TyhyKTticmVhaztjYXNlIEUuTkVXOntsZXQgbz0wO2NvbnN0IGE9QyhEYXRlLm5vdygpKS5sZW5ndGgsZD1yLnN1YmFycmF5KG8sYSk7bys9YTtjb25zdCBsPXIuc3ViYXJyYXkobyk7bi50aW1lY29kZT1PKGQpLG4udW5yZWdpc3RlcmVkPWw7YnJlYWt9fX1mdW5jdGlvbiBPKG4pe2NvbnN0IHQ9bi5yZWR1Y2UoKG8sYSk9PihvPDxCaWdJbnQoOCkpK0JpZ0ludChhKSxCaWdJbnQoMCkpLGU9TnVtYmVyKHQpLHM9bmV3IERhdGUoZSk7cmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzLnRvSVNPU3RyaW5nKCkpfWZ1bmN0aW9uIFoobix0KXt2YXIgZixpLHUsaCxjO2lmKCFTLmFjdGl2ZVNQUyl7Y29uc29sZS53YXJuKCJDYW5ub3QgZmluZCB0aGUgYWN0aXZlIFNQUyIpO3JldHVybn1jb25zdCBlPShmPVMuYWN0aXZlU1BTLnZ1aV9wYXJhbWV0ZXJzLm5hbF9ocmRfcGFyYW1ldGVycykhPW51bGw/ZjpTLmFjdGl2ZVNQUy52dWlfcGFyYW1ldGVycy52Y2xfaHJkX3BhcmFtZXRlcnMscz17Y3BiX2RwYl9kZWxheXNfcHJlc2VudF9mbGFnOmU/MTowLGNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czE6KGk9ZT09bnVsbD92b2lkIDA6ZS5jcGJfcmVtb3ZhbF9kZWxheV9sZW5ndGhfbWludXMxKSE9bnVsbD9pOjIzLGRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMToodT1lPT1udWxsP3ZvaWQgMDplLmRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMSkhPW51bGw/dToyMyx0aW1lX29mZnNldF9sZW5ndGg6ZT8oaD1lLnRpbWVfb2Zmc2V0X2xlbmd0aCkhPW51bGw/aDoyNDp2b2lkIDAscGljX3N0cnVjdF9wcmVzZW50X2ZsYWc6KGM9Uy5hY3RpdmVTUFMudnVpX3BhcmFtZXRlcnMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpIT1udWxsP2M6MH07aWYoIXMucGljX3N0cnVjdF9wcmVzZW50X2ZsYWcpe2NvbnNvbGUud2FybigicGljX3N0cnVjdF9wcmVzZW50X2ZsYWcgaXMgbm90IHByZXNlbnQiKTtyZXR1cm59Y29uc3Qgcj1uZXcgdyh0KTtzLmNwYl9kcGJfZGVsYXlzX3ByZXNlbnRfZmxhZyYmKHIuc2tpcChzLmNwYl9yZW1vdmFsX2RlbGF5X2xlbmd0aF9taW51czErMSksci5za2lwKHMuZHBiX291dHB1dF9kZWxheV9sZW5ndGhfbWludXMxKzEpKTtjb25zdCBvPVsxLDEsMSwyLDIsMywzLDIsM10sYT1yLnJlYWRCaXRzKDQpO2lmKGE+PW8ubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwaWNfc3RydWN0Iik7Y29uc3QgZD1vW2FdLGw9W107Zm9yKGxldCBwPTA7cDxkO3ArKylpZihyLnJlYWRCaXRzKDEpKXtjb25zdCBnPXt9O3Iuc2tpcCgyKSxyLnNraXAoMSksci5za2lwKDUpO2NvbnN0IEE9ci5yZWFkQml0cygxKTtpZihyLnNraXAoMiksZy5uX2ZyYW1lcz1yLnJlYWRCaXRzKDgpLEE/KGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcubWludXRlc192YWx1ZT1yLnJlYWRCaXRzKDYpLGcuaG91cnNfdmFsdWU9ci5yZWFkQml0cyg1KSk6ci5yZWFkQml0cygxKSYmKGcuc2Vjb25kc192YWx1ZT1yLnJlYWRCaXRzKDYpLHIucmVhZEJpdHMoMSkmJihnLm1pbnV0ZXNfdmFsdWU9ci5yZWFkQml0cyg2KSxyLnJlYWRCaXRzKDEpJiYoZy5ob3Vyc192YWx1ZT1yLnJlYWRCaXRzKDUpKSkpLHMudGltZV9vZmZzZXRfbGVuZ3RoKXRyeXtnLnRpbWVfb2Zmc2V0PXIucmVhZEJpdHMocy50aW1lX29mZnNldF9sZW5ndGgpfWNhdGNoKHgpe2NvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byByZWFkIHRpbWVfb2Zmc2V0Iix4KSxnLnRpbWVfb2Zmc2V0PTB9ZWxzZSBnLnRpbWVfb2Zmc2V0PTA7bC5wdXNoKGcpfW4uc2VpUGljVGltaW5nVGltZUNvZGVBcnJheT1sfWZ1bmN0aW9uIFEobix0KXtpZih0IT09IkgyNjQiJiZ0IT09IkgyNjUiKXRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgY29kZWMgIi5jb25jYXQodCkpO2NvbnN0IGU9e307cmV0dXJuIFMuY29kZWM9dCxYKG5ldyBVaW50OEFycmF5KG4uZGF0YSksdCkuZm9yRWFjaChzPT57Y29uc3Qgcj1zWzJdPT09MT8zOjQsbz10PT09IkgyNjQiPzE6MixhPVUocy5zdWJhcnJheShyK28pKSxkPSQoYSk7c3dpdGNoKGQudHlwZSl7Y2FzZSBSLlBJQ19USU1JTkc6WihlLGQuY29udGVudCk7YnJlYWs7Y2FzZSBSLlVTRVJfREFUQV9VTlJFR0lTVEVSRUQ6SyhlLGQuY29udGVudCk7YnJlYWt9fSksZX1mdW5jdGlvbiBlZShuKXtyZXR1cm4vXlswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezEyfSQvLnRlc3Qobil9ZnVuY3Rpb24gVChuKXtyZXR1cm4gbi5yZXBsYWNlKC8tL2csIiIpLm1hdGNoKC8uezEsMn0vZykubWFwKHQ9PnBhcnNlSW50KHQsMTYpKX1mdW5jdGlvbiB0ZShuLHQsZSl7Y29uc3Qgcz1uZXcgVWludDhBcnJheShUKG4pKSxyPUMoZSksbz1uZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoSlNPTi5zdHJpbmdpZnkodCkpLGE9bmV3IFVpbnQ4QXJyYXkocy5sZW5ndGgrci5sZW5ndGgrby5sZW5ndGgpO3JldHVybiBhLnNldChzKSxhLnNldChyLHMubGVuZ3RoKSxhLnNldChvLHIubGVuZ3RoK3MubGVuZ3RoKSxhfWZ1bmN0aW9uIG5lKG4pe2NvbnN0IHQ9W10sZT1NYXRoLmZsb29yKG4uYnl0ZUxlbmd0aC8yNTUpLHM9bi5ieXRlTGVuZ3RoJTI1NTtmb3IobGV0IHI9MDtyPGU7cisrKXQucHVzaCgyNTUpO3JldHVybiB0LnB1c2gocyksbmV3IFVpbnQ4QXJyYXkoWzUsLi4udF0pfWZ1bmN0aW9uIHJlKG4pe2NvbnN0IHQ9W107Zm9yKGxldCBlPTA7ZTxuLmJ5dGVMZW5ndGg7ZSsrKWUrMjxuLmJ5dGVMZW5ndGgmJlswLDEsMiwzXS5pbmNsdWRlcyhuW2UrMl0pJiZuW2VdPT09MCYmbltlKzFdPT09MD8odC5wdXNoKG5bZV0pLHQucHVzaChuW2UrMV0pLGUrPTIsdC5wdXNoKDMpKTp0LnB1c2gobltlXSk7cmV0dXJuIHQucHVzaCgxMjgpLG5ldyBVaW50OEFycmF5KHQpfWZ1bmN0aW9uIEMobil7Y29uc3QgdD1bXTtpZighaXNOYU4obikpe2NvbnN0IGU9QmlnSW50KG4pO2ZvcihsZXQgcz0wO3M8TWF0aC5jZWlsKE1hdGguZmxvb3IoTWF0aC5sb2cyKG5ldyBOdW1iZXIobikpKzEpLzgpO3MrKyl0LnVuc2hpZnQobmV3IE51bWJlcihlPj5CaWdJbnQoOCpzKSZCaWdJbnQoMjU1KSkpfXJldHVybiBuZXcgVWludDhBcnJheSh0KX1mdW5jdGlvbiBzZSh7dXVpZDpuLHBheWxvYWQ6dCx0aW1lY29kZTplfSl7Y29uc3Qgcz1bMCwwLDAsMV0scj1bMTAyXSxvPXRlKG4sdCxlKSxhPW5lKG8pLGQ9cmUobyksbD1uZXcgVWludDhBcnJheShzLmxlbmd0aCtyLmxlbmd0aCthLmxlbmd0aCtkLmxlbmd0aCk7cmV0dXJuIGwuc2V0KHMpLGwuc2V0KHIscy5sZW5ndGgpLGwuc2V0KGEscy5sZW5ndGgrci5sZW5ndGgpLGwuc2V0KGQscy5sZW5ndGgrci5sZW5ndGgrYS5sZW5ndGgpLGx9ZnVuY3Rpb24gaWUoe3V1aWQ6bixwYXlsb2FkOnQsdGltZWNvZGU6ZX0scyl7aWYobj09PSIifHx0PT09IiIpdGhyb3cgbmV3IEVycm9yKCJ1dWlkIGFuZCBwYXlsb2FkIGNhbm5vdCBiZSBlbXB0eSIpO2VlKG4pfHwoY29uc29sZS53YXJuKCJJbnZhbGlkIFVVSUQuIFVzaW5nIGRlZmF1bHQgVVVJRC4iKSxuPUwsZT1EYXRlLm5vdygpKTtjb25zdCByPXNlKHt1dWlkOm4scGF5bG9hZDp0LHRpbWVjb2RlOmV9KSxvPW5ldyBEYXRhVmlldyhzLmRhdGEpLGE9bmV3IEFycmF5QnVmZmVyKHMuZGF0YS5ieXRlTGVuZ3RoK3IuYnl0ZUxlbmd0aCksZD1uZXcgRGF0YVZpZXcoYSk7Zm9yKGxldCBsPTA7bDxzLmRhdGEuYnl0ZUxlbmd0aDtsKyspZC5zZXRVaW50OChsLG8uZ2V0VWludDgobCkpO2ZvcihsZXQgbD0wO2w8ci5ieXRlTGVuZ3RoO2wrKylkLnNldFVpbnQ4KHMuZGF0YS5ieXRlTGVuZ3RoK2wscltsXSk7cy5kYXRhPWF9RC5nZXQoIlRyYW5zZm9ybVdvcmtlciIpLnNldExldmVsKEQuREVCVUcpO2NvbnN0IG9lPTJlMyxiPVtdO2xldCB5PSIiLFA9e307Y29uc3Qgdj17fTtsZXQgST1bXTtmdW5jdGlvbiBIKG4pe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybSh0LGUpe3ZhciBzLHI7aWYodCBpbnN0YW5jZW9mIFJUQ0VuY29kZWRWaWRlb0ZyYW1lKXtjb25zdCBvPSgocz1QW3QuZ2V0TWV0YWRhdGEoKS5wYXlsb2FkVHlwZV0pPT1udWxsP3ZvaWQgMDpzLnRvVXBwZXJDYXNlKCkpfHwoeT09bnVsbD92b2lkIDA6eS50b1VwcGVyQ2FzZSgpKTtpZihvPT09IkgyNjQiKXtjb25zdCBhPVEodCxvKTsoYS50aW1lY29kZXx8YS51bnJlZ2lzdGVyZWR8fCgocj1hLnNlaVBpY1RpbWluZ1RpbWVDb2RlQXJyYXkpPT1udWxsP3ZvaWQgMDpyLmxlbmd0aCk+MCkmJnNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJtZXRhZGF0YSIsbWlkOm4sbWV0YWRhdGE6YX0pfXNlbGYucG9zdE1lc3NhZ2Uoe2V2ZW50OiJjb21wbGV0ZSIsZnJhbWU6e3R5cGU6dC50eXBlLHRpbWVzdGFtcDp0LnRpbWVzdGFtcCxkYXRhOnQuZGF0YX19KX1lLmVucXVldWUodCl9fSl9ZnVuY3Rpb24gTSgpe09iamVjdC5rZXlzKHYpLnNvcnQoKS5qb2luKCk9PT1JLnNvcnQoKS5qb2luKCkmJihiLnNoaWZ0KCksST1bXSl9ZnVuY3Rpb24gYWUobil7Y29uc3QgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTt2W25dPXQsT2JqZWN0LmtleXModikuZmlsdGVyKHM9PnQtdltzXT5vZSkuZm9yRWFjaChzPT57ZGVsZXRlIHZbc10sZGVsZXRlIElbc119KSxNKCl9ZnVuY3Rpb24gTigpe3JldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtzdGFydCgpe30sZmx1c2goKXt9LGFzeW5jIHRyYW5zZm9ybShuLHQpe2lmKG4gaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3Qgcz1uLmdldE1ldGFkYXRhKCkuc3luY2hyb25pemF0aW9uU291cmNlO2lmKGFlKHMpLCFJLmluY2x1ZGVzKHMpJiZiLmxlbmd0aCl0cnl7aWYoIS8oaDI2WzRdKS8udGVzdCh5KSl0aHJvdyBuZXcgRXJyb3IoIlNlbmRpbmcgbWV0YWRhdGEgaXMgbm90IHN1cHBvcnRlZCB3aXRoIGFueSBvdGhlciBjb2RlYyBvdGhlciB0aGFuIEguMjY0Iik7YlswXS51dWlkPT09TCYmKGJbMF0udGltZWNvZGU9RGF0ZS5ub3coKSksaWUoYlswXSxuKSxJLnB1c2gocyl9Y2F0Y2gocil7Y29uc29sZS5lcnJvcihyKX1maW5hbGx5e00oKX19dC5lbnF1ZXVlKG4pfX0pfWZ1bmN0aW9uIGsoe3JlYWRhYmxlOm4sd3JpdGFibGU6dH0sZSl7bi5waXBlVGhyb3VnaChlKS5waXBlVG8odCl9YWRkRXZlbnRMaXN0ZW5lcigicnRjdHJhbnNmb3JtIixuPT57bGV0IHQ7aWYobi50cmFuc2Zvcm1lci5vcHRpb25zLm5hbWU9PT0ic2VuZGVyVHJhbnNmb3JtIil5PW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlYyx0PU4oKTtlbHNlIGlmKG4udHJhbnNmb3JtZXIub3B0aW9ucy5uYW1lPT09InJlY2VpdmVyVHJhbnNmb3JtIilQPW4udHJhbnNmb3JtZXIub3B0aW9ucy5wYXlsb2FkVHlwZUNvZGVjfHx7fSx5PW4udHJhbnNmb3JtZXIub3B0aW9ucy5jb2RlY3x8IiIsdD1IKG4udHJhbnNmb3JtZXIub3B0aW9ucy5taWQpO2Vsc2UgcmV0dXJuO2sobi50cmFuc2Zvcm1lcix0KX0pLGFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG49Pntjb25zdHthY3Rpb246dH09bi5kYXRhO3N3aXRjaCh0KXtjYXNlImluc2VydGFibGUtc3RyZWFtcy1zZW5kZXIiOnk9bi5kYXRhLmNvZGVjLGsobi5kYXRhLE4oKSk7YnJlYWs7Y2FzZSJpbnNlcnRhYmxlLXN0cmVhbXMtcmVjZWl2ZXIiOlA9bi5kYXRhLnBheWxvYWRUeXBlQ29kZWN8fHt9LHk9bi5kYXRhLmNvZGVjfHwiIixrKG4uZGF0YSxIKG4uZGF0YS5taWQpKTticmVhaztjYXNlIm1ldGFkYXRhLXNlaS11c2VyLWRhdGEtdW5yZWdpc3RlcmVkIjpiLnB1c2goe3V1aWQ6bi5kYXRhLnV1aWQscGF5bG9hZDpuLmRhdGEucGF5bG9hZH0pO2JyZWFrfX0pfSkoKTsK",Ks=typeof self<"u"&&self.Blob&&new Blob([(t=>j.from(atob(t),(t=>t.charCodeAt(0))))(Ys)],{type:"text/javascript;charset=utf-8"});function js(t){let e;try{if(e=Ks&&(self.URL||self.webkitURL).createObjectURL(Ks),!e)throw"";const i=new Ol(e,{name:null==t?void 0:t.name});return i.addEventListener("error",(()=>{(self.URL||self.webkitURL).revokeObjectURL(e)})),i}catch(e){return new Ol("data:text/javascript;base64,"+Ys,{name:null==t?void 0:t.name})}finally{e&&(self.URL||self.webkitURL).revokeObjectURL(e)}}const Qs=at.get("Publish"),Js={mediaStream:null,bandwidth:0,metadata:!1,disableVideo:!1,disableAudio:!1,codec:Ji.H264,simulcast:!1,scalabilityMode:null,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};function $s(t){if(!t)return new j;const e=t.length,i=new j(e/2);for(let s=0;s<e;s+=2)i[s/2]=x(t.substr(s,2),16);return i}function tn(t,e,i){if(w.prototype.hasOwnProperty.call(t,i)&&w.prototype.hasOwnProperty.call(e,i)){const s=t[i];t[i]=e[i],e[i]=s}else console.error('One or both objects do not have the property "'.concat(i,'"'))}function en(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,h)}a((s=s.apply(t,e||[])).next())}))}const sn=nn;function nn(t,e){const i=_n();return(nn=function(t,e){return i[t-=257]})(t,e)}var rn;!function(){const t=nn,e=_n();for(;;)try{if(x(t(266))/1*(-x(t(261))/2)+x(t(258))/3*(-x(t(264))/4)+-x(t(267))/5*(x(t(274))/6)+x(t(260))/7*(x(t(268))/8)+x(t(270))/9+-x(t(277))/10+x(t(263))/11==303379)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const on=Bl&&Bl[sn(276)]||"",hn=Bl&&Bl.vendor||"",an=!(null==s||!s[sn(273)]),un=on[sn(278)](sn(257)),cn=!un&&hn[sn(278)](sn(259)),ln=!un&&!cn&&on.includes(sn(272)),dn=!un&&!cn&&!ln&&on[sn(278)](sn(275)),fn=(null===(rn=null==Bl?void 0:Bl[sn(262)])||void 0===rn?void 0:rn[sn(271)])||(null==Bl?void 0:Bl[sn(271)])||"";function _n(){const t=["2403660vsbxKa","includes","Firefox","653511krAkNS","Apple","63eEorAu","2iQvmqu","userAgentData","13393182jRLBxS","4fTXBZP","Win32","74923SyWRbn","1345hVdNEb","21688LwGppn","Windows","132498ZoOcLo","platform","Edg","RTCRtpScriptTransform","9372dNMWWf","Chrome","userAgent"];return(_n=function(){return t})()}const vn={supportsRtpScriptTransform:an,isFirefox:un,isSafari:cn,isEdge:ln,isChrome:dn,platform:fn,isWindows:fn===sn(269)||fn===sn(265)},mn=gn;function gn(t,e){const i=bn();return(gn=function(t,e){return i[t-=185]})(t,e)}!function(){const t=gn,e=bn();for(;;)try{if(-x(t(380))/1+-x(t(354))/2+-x(t(464))/3*(x(t(486))/4)+-x(t(253))/5+x(t(377))/6+x(t(321))/7*(-x(t(285))/8)+-x(t(444))/9*(-x(t(279))/10)==657542)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const pn=vn[mn(496)];function wn(t,e){const i=mn;let s=new j((0|t.byteLength)+(0|e[i(442)]));return s[i(311)](t,0),s[i(311)](e,0|t.byteLength),s}const yn=(t,e,i,s)=>{const n=mn,r=s[n(203)]||1;e*=r,i*=r;const o=(u=t)instanceof ArrayBuffer?u:u[mn(492)],h=(t[n(447)]||0)+t[n(442)],a=(t[n(447)]||0)+e;var u;let c=_[n(389)](0,_[n(487)](a,h)),l=_[n(487)](c+_[n(389)](i,0),h);return c/=r,l/=r,new s(o,c,l-c)};function bn(){const t=["[MSE] source buffer error","ManagedMediaSource","BYTES_PER_ELEMENT","types","ready","valid","Num frames in chunk: ","readBits","getTrackID","mvhd","parsePPS","encrypted","dependsOn","payload","len","moov","VMHD","mse","volume","h264","setUint16","tfdt","nextDts","avc1.","audioSampleAuxInfo","message","endMSE","width","hdlr","warn","traf","readBoolean","shift","mseReady","revokeObjectURL","smhd","dts","indexOf","<PROTECTINFO>","webkitsourceclose","onMSEClose","[H264Parser] IDR without SPS/PPS, not suitable for recovery",'VALUE="',"createObjectURL","</KID>","mdhd","SMHD","getFramePayload","tkhd","flush","clRtcDrmDebugLog","getBits","2598770DahMdb","dbgQueue","dispatch","DINF","http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader","isReady","sps","nalus","endOfStream","toString","UNKNOWN","Opus","minf","onError","stco","STSC","buffered","</KIDS>","initSegment","dinf","org.w3.clearkey","mp4track","keyFrame","units","mseEnded","videoSampleAuxInfo","41695210Plpuuo","splice","ended","bitLength","seq","url","8YyaFaO","com.apple.fps","[MSE] error: ","bitsAvailable","</WRMHEADER>","trex","setData","buffer error","slice","length","readUByte","mp4a","Unsupported DRM type ","mdia","fromCharCode",'<WRMHEADER xmlns="',"index","string","both","NDR","dOps","cenc","getPayload","bind","PPS","sourceBuffer","set","Checking codec","releaseBuffer","tenc","trak","flags",'/mp4; codecs="',"[H264Parser] Both IDR and non-IDR VCL NALUs found in the same frame","clRtcDrmCreateMediaDump","STSD","6352549TgZLxu","initBrowser","IDR","trun"," - ","start","mediaSource","startsWith","stype","readSPS","addEventListener","schi","encv","createElement","getVideoFrames","onReady","href","sourceopen","setUint32","vmhd","FTYP","schm","getData","toISOString","remuxer","track","skipScalingList","STSZ","getSize","addSourceBuffer","[MSE] buffer error:","appendBufferError","off","2392886zJoPkf","destroy","sdtp","audiosamplerate",": NRI: ","reportDiscontinuity","extractNALUs","No A/V data","pps","senc","saio","concat","config","ftyp","parseNAL","esds","error","feed","Browser does not support codec","4.3.0.0","skipUEG","mp4","end","2232924PKvVOf","updating","options","227868XbMqAn","prototype","createBuffer","info","MediaSource","timestamp","mvex","isfmb","opus","max","stsz","POSITIVE_INFINITY","saiz","timescale","call","encryption","height","jmuxer","bufferControllers","open","patchSampleAuxinfo","queue","stsd","onBufferError","frameCounter","ntype","remux","getPayloadSize","isSupported","</LA_URL>","waitingForIdr","box","idr"," samples - expected 1","tracks","stbl","getNri",'<KID ALGID="AESCTR" ',"download","readUInt","join","com.microsoft.playready.recommendation",'" version="',"remuxController","Received ","frma","resetTrack","disableRemotePlayback","</DATA>","mfhd","pssh","charCodeAt","drm","mediaDuration","video","readyToDecode","from","SPS","skipLZ","data","keySystem","[MSE] sourceclose","byteLength","STTS","9mESMVl","Buffered range ","samples","byteOffset","parseHeader","codec","node","audio","Failure: Browser doesn't support MSE/MMS","subarray","replaceAll","downloadToFile","onBuffer","skipBits","mdat","isKeyframe","moof","mode","push","STCO","9ffcUcC","listener","isReset","map","enca","type","<LA_URL>","parseSPS","getElementById","no video element were found to render, provide a valid video element","sinf","doAppend","HDLR_TYPES","videoElement","stts","keyId","trackTypes","TYPES","remove","size","AUD","src","1376748eVkTXq","min","tfhd","initialized","offAll","appendBuffer","buffer","nri","skipEG","isvcl","isSafari","isTypeSupported","readyState","abort","apply","reduce","assign","calculateExpectedSizeFromSai","duration","generatePlayReadyHeader","readUEG","onMSEOpen","sampleAuxInfo","SEI","irrecoverableError","channelCount","saiIvSize","stsc"];return(bn=function(){return t})()}function An(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1/0),yn(t,e,i,j)}function Sn(t){const e=mn,i=Array[e(436)](t)[e(467)]((t=>t[e(431)](0)));return new j(i)}s[mn(455)]=(t,e,i)=>{void 0===i&&(i="application/octet-stream");const s=mn,n=h[s(334)]("a"),r=new Blob([t],{type:i});n[s(337)]=URL[s(244)](r),n[s(418)]=e,n.click(),URL[s(235)](n[s(337)])};class Tn{static get[mn(304)](){return 1}static get[mn(323)](){return 5}static get[mn(196)](){return 6}static get SPS(){return 7}static get PPS(){return 8}static get[mn(484)](){return 9}static get[mn(481)](){const t=mn;return{[Tn[t(323)]]:t(323),[Tn.SEI]:t(196),[Tn.SPS]:t(437),[Tn[t(309)]]:t(309),[Tn[t(304)]]:t(304),[Tn[t(484)]]:t(484)}}static type(t){const e=mn;return t[e(405)]in Tn[e(481)]?Tn[e(481)][t[e(405)]]:e(263)}toString(){const t=mn;return Tn[t(469)](this)+t(358)+this[t(416)]()}getNri(){return this[mn(493)]}[mn(469)](){return this[mn(405)]}[mn(459)](){const t=mn;return this[t(405)]===Tn[t(323)]}[mn(307)](){return this[mn(214)]}[mn(407)](){const t=mn;return this[t(214)][t(442)]}getSize(){return 4+this[mn(407)]()}[mn(343)](){const t=mn,e=new j(this.getSize());return new DataView(e.buffer)[t(339)](0,this.getSize()-4),e[t(311)](this[t(307)](),4),e}constructor(t){const e=mn;this.payload=t,this[e(493)]=(96&this.payload[0])>>5,this[e(405)]=31&this[e(214)][0],this[e(495)]=1==this.ntype||5==this[e(405)],this[e(329)]="",this[e(387)]=!1}}class kn{[mn(291)](t){const e=mn;this.data=t,this[e(301)]=0,this[e(282)]=8*t[e(442)]}get[mn(288)](){const t=mn;return this[t(282)]-this[t(301)]}skipBits(t){if(this[mn(288)]<t)return!1;this.index+=t}[mn(208)](t,e){return void 0===e&&(e=!0),this.getBits(t,this.index,e)}[mn(252)](t,e,i){void 0===i&&(i=!0);const s=mn;if(this.bitsAvailable<t)return 0;const n=e%8,r=this[s(439)][e/8|0]&255>>>n,o=8-n;if(o>=t)return i&&(this.index+=t),r>>o-t;{i&&(this.index+=o);const n=t-o;return r<<n|this[s(252)](n,e+o,i)}}[mn(438)](){const t=mn;let e;for(e=0;e<this.bitLength-this[t(301)];++e)if(0!==this.getBits(1,this[t(301)]+e,!1))return this.index+=e,e;return e}[mn(374)](){const t=mn;this[t(457)](1+this[t(438)]())}[mn(494)](){const t=mn;this[t(457)](1+this[t(438)]())}readUEG(){const t=mn,e=this[t(438)]();return this[t(208)](e+1)-1}readEG(){const t=this[mn(193)]();return 1&t?1+t>>>1:-1*(t>>>1)}readBoolean(){return 1===this[mn(208)](1)}[mn(295)](t){return void 0===t&&(t=1),this[mn(208)](8*t)}readUShort(){return this[mn(208)](16)}[mn(419)](){return this[mn(208)](32)}constructor(t){const e=mn;this[e(439)]=t,this[e(301)]=0,this.bitLength=8*t[e(442)]}}class En{static[mn(360)](t,e){const i=mn;let s=[],n=!1,r=!1,o=!1,h=!1,a=0,u=0,c=0,l=[];for(;a<=t.byteLength;){if(a<t.byteLength){const e=t[a++];0!==e?(1===e&&u>1&&(c=u>2?4:3,l.push(a)),u=0):++u}else c=0,l.push(a++);if(l.length>1){const i=l.shift(),d=l[0]-c;if(i<d){let c=!1;const l=31&t[i];if(l===Tn.NDR?r=!0:l===Tn.IDR?n=!0:l===Tn.SPS?(c=o,o=!0):l===Tn.PPS&&(c=h,h=!0),!c)if(!e||l!==Tn.NDR&&l!==Tn.IDR)s.push(t.subarray(i,d));else{const e=new j(d-i);let n=0;for(a=i,u=0;a<d;){let i=t[a++];u>1&&3===i&&(u=0,i=t[a++]),0!==i?u=0:++u,e[n++]=i}s.push(e.subarray(0,n))}}}}let d=!0,f=!1;return r||n?r&&n&&(console[i(230)](i(318)),d=!1):(console[i(230)]("[H264Parser] No VCL NALUs found"),d=!1),n&&(o&&h?f=!0:console[i(230)](i(242))),{valid:d,idr:f,nalus:s}}static skipScalingList(t,e){let i,s=8,n=8;for(let r=0;r<e;r++)0!==n&&(i=t.readEG(),n=(s+i+256)%256),s=0===n?s:n}static[mn(330)](t){const e=mn;let i,s,n,r,o,h,a=new kn(t),u=0,c=0,l=0,d=0,f=1;if(a[e(295)](),i=a.readUByte(),a[e(208)](5),a[e(457)](3),a.readUByte(),a[e(374)](),100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i){var v=a[e(193)]();if(3===v&&a[e(457)](1),a.skipUEG(),a[e(374)](),a[e(457)](1),a[e(232)]()){h=3!==v?8:12;for(let t=0;t<h;++t)a[e(232)]()&&(t<6?En[e(347)](a,16):En[e(347)](a,64))}}a[e(374)]();var m=a.readUEG();if(0===m)a[e(193)]();else if(1===m){a.skipBits(1),a[e(494)](),a[e(494)](),s=a[e(193)]();for(let t=0;t<s;++t)a.skipEG()}if(a.skipUEG(),a[e(457)](1),n=a[e(193)](),r=a.readUEG(),o=a[e(208)](1),0===o&&a[e(457)](1),a[e(457)](1),a[e(232)]()&&(u=a[e(193)](),c=a[e(193)](),l=a[e(193)](),d=a.readUEG()),a.readBoolean()){if(a[e(232)]()){let t;switch(a[e(295)]()){case 1:t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[a[e(295)]()<<8|a.readUByte(),a[e(295)]()<<8|a[e(295)]()]}t&&t[0]>0&&t[1]>0&&(f=t[0]/t[1])}a.readBoolean()&&a[e(457)](1),a[e(232)]()&&(a.skipBits(4),a[e(232)]()&&a[e(457)](24)),a.readBoolean()&&(a.skipUEG(),a[e(374)]()),a.readBoolean()&&(a[e(419)](),a[e(419)](),a.readBoolean())}return{width:_.ceil((16*(n+1)-2*u-2*c)*f),height:(2-o)*(r+1)*16-(o?2:4)*(l+d)}}static[mn(448)](t){const e=mn;let i=new kn(t[e(307)]());i.readUByte(),t.isfmb=0===i[e(193)](),t.stype=i[e(193)]()}[mn(471)](t){const e=mn;var i=En[e(330)](new j(t));this[e(346)][e(228)]=i[e(228)],this[e(346)][e(396)]=i[e(396)],this[e(346)].sps=[new j(t)],this[e(346)][e(449)]=e(224);let s=new DataView(t.buffer,t[e(447)]+1,4);for(let t=0;t<3;++t){var n=s.getUint8(t)[e(262)](16);n.length<2&&(n="0"+n),this.track[e(449)]+=n}}[mn(211)](t){this[mn(346)].pps=[new j(t)]}[mn(368)](t){const e=mn;if(!t)return!1;let i=!1;switch(t.type()){case Tn[e(323)]:case Tn[e(304)]:i=!0;break;case Tn[e(309)]:!this[e(346)][e(362)]&&(this.parsePPS(t[e(307)]()),!this[e(345)][e(435)]&&this[e(346)][e(362)]&&this[e(346)][e(259)]&&(this[e(345)][e(435)]=!0)),i=!0;break;case Tn[e(437)]:!this[e(346)][e(259)]&&(this[e(471)](t[e(307)]()),!this[e(345)][e(435)]&&this[e(346)][e(362)]&&this.track.sps&&(this[e(345)][e(435)]=!0)),i=!0;break;case Tn[e(484)]:break;case Tn[e(196)]:i=!0}return i}constructor(t){const e=mn;this.remuxer=t,this[e(346)]=t[e(274)]}}class xn{on(t,e){const i=mn;return!this[i(465)][t]&&(this[i(465)][t]=[]),this[i(465)][t][i(462)](e),!0}[mn(353)](t,e){const i=mn;if(this[i(465)][t]){var s=this.listener[t][i(238)](e);return s>-1&&this[i(465)][t][i(280)](s,1),!0}return!1}[mn(490)](){this[mn(465)]={}}[mn(255)](t,e){const i=mn;return!!this.listener[t]&&(this[i(465)][t][i(467)]((t=>{t[i(187)](null,[e])})),!0)}constructor(t){const e=mn;this[e(465)]={},this[e(469)]=""|t}}class Rn{static[mn(411)](t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const n=mn;let r,o=8,h=i.length,a=h;for(;h--;)i[h]&&(o+=i[h].byteLength);for(r=new j(o),r[0]=o>>>24,r[1]=o>>>16&255,r[2]=o>>>8&255,r[3]=255&o,r[n(311)](t,4),h=0,o=8;h<a;++h)i[h]&&(r[n(311)](i[h],o),o+=i[h][n(442)]);return r}hdlr(t){const e=mn;return Rn[e(411)](Rn[e(204)][e(229)],Rn[e(476)][t])}mdat(t){const e=mn;return Rn.box(Rn.types[e(458)],t)}[mn(246)](t,e){const i=mn;return Rn.box(Rn[i(204)][i(246)],new j([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,0,0,0,0,85,196,0,0]))}[mn(298)](t){const e=mn;return Rn[e(411)](Rn[e(204)][e(298)],this[e(246)](t[e(393)],t.duration),this[e(229)](t[e(469)]),this[e(265)](t))}[mn(429)](t){const e=mn;return Rn[e(411)](Rn.types[e(429)],new j([0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[mn(265)](t){const e=mn;return t[e(469)]===e(451)?Rn[e(411)](Rn[e(204)][e(265)],Rn.box(Rn[e(204)][e(236)],Rn[e(247)]),Rn.DINF,this[e(415)](t)):Rn[e(411)](Rn[e(204)][e(265)],Rn[e(256)],this[e(415)](t),Rn[e(411)](Rn[e(204)][e(340)],Rn[e(217)]))}[mn(460)](t,e,i){const s=mn;return Rn[s(411)](Rn[s(204)][s(460)],this[s(429)](t),this.traf(i,e))}moov(t,e,i){const s=mn;let n=t[s(294)],r=[];for(;n--;)r[n]=this[s(315)](t[n]);return Rn[s(411)][s(187)](null,[Rn[s(204)].moov,this[s(210)](i,e),this[s(430)](t)].concat(r)[s(365)](this[s(386)](t)))}mvex(t){const e=mn;let i=t[e(294)],s=[];for(;i--;)s[i]=this[e(290)](t[i]);return Rn.box[e(187)](null,[Rn[e(204)].mvex].concat(s))}[mn(210)](t,e){const i=mn;let s=new j([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Rn[i(411)](Rn[i(204)].mvhd,s)}[mn(356)](t){const e=mn;let i=t[e(446)]||[],s=new j(4+i.length);for(let t=0;t<i.length;t++){const n=i[t][e(316)];s[t+4]=n[e(213)]<<4|n.isDependedOn<<2|n.hasRedundancy}return Rn.box(Rn.types.sdtp,s)}[mn(415)](t){const e=mn;return Rn[e(411)](Rn.types[e(415)],this[e(402)](t),Rn.box(Rn.types[e(478)],Rn[e(443)]),Rn.box(Rn.types[e(200)],Rn[e(268)]),Rn[e(411)](Rn[e(204)][e(390)],Rn[e(348)]),Rn[e(411)](Rn[e(204)][e(267)],Rn[e(463)]))}[mn(333)](t){const e=mn;let i,s,n,r=[],o=[];for(i=0;i<t[e(259)][e(294)];i++)s=t[e(259)][i],n=s[e(442)],r.push(n>>>8&255),r[e(462)](255&n),r=r[e(365)](Array[e(381)].slice.call(s));for(i=0;i<t.pps.length;i++)s=t.pps[i],n=s[e(442)],o.push(n>>>8&255),o[e(462)](255&n),o=o[e(365)](Array[e(381)][e(293)][e(394)](s));const h=Rn[e(411)](Rn[e(204)].avcC,new j([1,r[3],r[4],r[5],255,224|t[e(259)][e(294)]][e(365)](r)[e(365)]([t[e(362)].length]).concat(o))),a=t[e(228)],u=t[e(396)],c=Rn[e(411)](Rn[e(204)][e(474)],Rn[e(411)](Rn.types[e(425)],new j([97,118,99,49])),Rn[e(411)](Rn[e(204)][e(342)],new j([0,0,0,0,...Sn(this[e(432)][e(366)].video[e(395)]),0,1,0,0])),Rn[e(411)](Rn[e(204)].schi,this[e(314)]("video")));return Rn[e(411)](Rn[e(204)][e(333)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,255&a,u>>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),h,c)}[mn(369)](t){const e=mn;let i=t.config[e(442)],s=new j(26+i+3);return s[e(311)]([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5,i]),s[e(311)](t[e(366)],26),s[e(311)]([6,1,2],26+i),s}[mn(296)](t){const e=mn,i=t.audiosamplerate;return Rn[e(411)](Rn[e(204)][e(296)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[e(198)],0,16,0,0,0,0,i>>>8&255,255&i,0,0]),Rn[e(411)](Rn[e(204)][e(369)],this.esds(t)))}dOps(t){const e=mn,i=t[e(357)];return new j([0,t[e(198)],1,56,0,0,i>>>8&255,255&i,0,0,0])}[mn(264)](t){const e=mn,i=t[e(357)];return Rn[e(411)](Rn[e(204)].Opus,new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[e(198)],0,16,0,0,0,0,i>>>8&255,255&i,0,0]),Rn[e(411)](Rn.types[e(305)],this[e(305)](t)))}[mn(468)](t){const e=mn,i=Rn[e(411)](Rn[e(204)].dOps,this[e(305)](t)),s=Rn[e(411)](Rn[e(204)].sinf,Rn[e(411)](Rn[e(204)].frma,new j([79,112,117,115])),Rn[e(411)](Rn[e(204)][e(342)],new j([0,0,0,0,...Sn(this.drm[e(366)].audio[e(395)]),0,1,0,0])),Rn[e(411)](Rn[e(204)][e(332)],this[e(314)](e(451)))),n=t[e(357)];return Rn[e(411)](Rn[e(204)][e(468)],new j([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t[e(198)],0,16,0,0,0,0,n>>>8&255,255&n,0,0]),i,s)}[mn(402)](t){const e=mn;return t[e(469)]===e(451)?Rn.box(Rn[e(204)][e(402)],Rn[e(320)],t[e(212)]?this[e(468)](t):this[e(264)](t)):Rn.box(Rn[e(204)][e(402)],Rn[e(320)],this.encv(t))}[mn(249)](t){const e=mn,i=t.id,s=t[e(191)],n=t.width,r=t[e(396)],o=t[e(219)];return Rn[e(411)](Rn[e(204)][e(249)],new j([0,0,0,7,0,0,0,0,0,0,0,0,i>>>24,i>>>16&255,i>>>8&255,255&i,0,0,0,0,s>>>24,s>>>16&255,s>>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,255&o,o%1*10&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,r>>>8&255,255&r,0,0]))}[mn(231)](t,e){var i;const s=mn,n=t.id,r=t[s(446)][0][s(483)],o=t[s(446)][0][s(191)],h=t[s(446)][0].flags,a=Rn[s(411)](Rn[s(204)][s(488)],new j([0,2,0,58,n>>>24,n>>>16&255,n>>>8&255,255&n,0,0,0,1,o>>>24,n>>>16&255,o>>>8&255,255&o,r>>>24,r>>>16&255,r>>>8&255,255&r,0,h.isNonSync,0,0])),u=Rn[s(411)](Rn[s(204)][s(222)],new j([0,0,0,0,e>>>24,e>>>16&255,e>>>8&255,255&e]));if(t[s(212)]){let e,n;if(t[s(469)]===s(434)?(e=!0,n=this[s(199)][s(434)]+(null==(i=t[s(446)][0].sampleAuxInfo)?void 0:i.byteLength)):(e=!1,n=this[s(199)][s(451)]),n>0){const i=this[s(392)](n),r=this[s(363)](t[s(446)],e),o=i.length+20+r.length+a[s(294)]+u[s(294)]+8+16+8+8,h=this[s(324)](t,o);return Rn[s(411)](Rn[s(204)][s(231)],a,u,h,i,this[s(364)](o-r[s(294)]+h[s(294)]+8),r)}{const e=this[s(363)](null,!1),i=e[s(294)]+a[s(294)]+u.length+8+16+8+8,n=this[s(324)](t,i);return Rn[s(411)](Rn[s(204)][s(231)],a,u,n,e)}}return Rn.box(Rn.types.traf,a,u,this[s(324)](t,a[s(294)]+u[s(294)]+8+16+8+8))}[mn(315)](t){const e=mn;return t[e(191)]=t[e(191)]||4294967295,Rn.box(Rn[e(204)][e(315)],this[e(249)](t),this[e(298)](t))}trex(t){const e=mn,i=t.id;return Rn[e(411)](Rn[e(204)][e(290)],new j([0,0,0,0,i>>>24,i>>>16&255,i>>>8&255,255&i,0,0,0,1,0,0,0,16,0,0,0,0,0,0,0,0]))}trun(t,e){const i=mn;let s=(t.samples||[]).length,n=new j(12);return e+=20,n[i(311)]([0,0,0,1,s>>>24,s>>>16&255,s>>>8&255,255&s,e>>>24,e>>>16&255,e>>>8&255,255&e],0),Rn.box(Rn.types[i(324)],n)}[mn(192)](t,e){const i=mn,s=i(373),n=i(257),r=function(t){const e=function(t){const e=mn;let i="";for(let s=0;s<t.length;s+=16e3){const n=t[e(453)](s,s+16e3);i+=String[e(299)][e(187)](null,n)}return i}(An(t));return btoa(e)}(function(t){const e=mn,i=[];return i[e(462)](t[3]),i[e(462)](t[2]),i[e(462)](t[1]),i[e(462)](t[0]),i.push(t[5]),i.push(t[4]),i.push(t[7]),i.push(t[6]),(t=An(t))[e(311)](i,0),t}(t));return An(function(t,e){const i=mn,s=new j(2*t.length),n=new DataView(s[i(492)]);for(let e=0;e<t[i(294)];++e){const s=t[i(431)](e);n[i(221)](2*e,s,true)}return s[i(492)]}([i(300)+n+i(422)+s+'">',"<DATA>",i(239),"<KIDS>",i(417),i(243)+r+'"',">",i(245),i(270),"</PROTECTINFO>",e?i(470)+e+i(409):"",i(428),i(289)][i(420)]("")))}[mn(430)](t){const e=mn;if(this[e(432)][e(440)][e(328)]("com.widevine"))return Rn[e(411)](Rn[e(204)][e(430)],new j([0,0,0,0,237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237,0,0,0,18,18,16,...this[e(432)][e(366)][t[0][e(469)]][e(479)]]));if(this[e(432)].keySystem===e(421)){const i=this[e(192)](this[e(432)][e(366)][t[0].type][e(479)],this.drm.licenseUrl),s=i[e(442)];return Rn[e(411)](Rn[e(204)][e(430)],new j([0,0,0,0,154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149,s>>>24,s>>>16&255,s>>>8&255,255&s,...i]))}return this[e(432)][e(440)]===e(273)?Rn[e(411)](Rn[e(204)][e(430)],new j([1,0,0,0,16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75,0,0,0,1,...this.drm.config[t[0][e(469)]][e(479)],0,0,0,0])):this[e(432)][e(440)]===e(286)?null:void console[e(370)](e(297)+this[e(432)].keySystem)}[mn(314)](t){const e=mn;let i,s,n=this[e(432)][e(366)][t];return"cbcs"===n.encryption?(i=new j([16,...n.iv]),s=25):(i=new j([]),s=0),Rn[e(411)](Rn[e(204)].tenc,new j([1,0,0,0,0,s,1,this[e(199)][t],...n[e(479)],...i]))}[mn(392)](t){return Rn[mn(411)](Rn.types.saiz,new j([0,0,0,0,t,0,0,0,1]))}[mn(364)](t){const e=mn;return Rn[e(411)](Rn[e(204)][e(364)],new j([0,0,0,0,0,0,0,1,t>>>24,t>>>16&255,t>>>8&255,255&t]))}[mn(363)](t,e){const i=mn;let s=null;return t&&(1!==t[i(294)]&&console[i(370)](i(424)+t[i(294)]+i(413)),s=t[0][i(195)]),s&&s[i(442)]?Rn[i(411)](Rn[i(204)][i(363)],new j([0,0,0,e?2:0,0,0,0,1,...s])):Rn[i(411)](Rn[i(204)][i(363)],new j([0,0,0,0,0,0,0,1]))}[mn(271)](t,e,i){const s=mn,n=this[s(216)](t,e,i);let r=new j(Rn[s(341)][s(442)]+n.byteLength);return r.set(Rn[s(341)]),r[s(311)](n,Rn[s(341)].byteLength),r}constructor(t){var e,i;const s=mn;this[s(432)]=t,this[s(199)]={video:(null==(e=t[s(366)][s(434)])?void 0:e.encryption)===s(306)?16:0,audio:(null==(i=t[s(366)][s(451)])?void 0:i.encryption)===s(306)?16:0},Rn.types={avc1:[],encv:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],Opus:[],dOps:[],enca:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pssh:[],sinf:[],frma:[],schm:[],schi:[],tenc:[],saiz:[],saio:[],senc:[]};for(let t in Rn[s(204)])Rn[s(204)][t]=[t[s(431)](0),t[s(431)](1),t.charCodeAt(2),t[s(431)](3)];const n=new j([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new j([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Rn[s(476)]={video:n,audio:r};const o=new j([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),h=new j([0,0,0,0,0,0,0,0]);Rn[s(443)]=Rn[s(268)]=Rn[s(463)]=h,Rn[s(348)]=new j([0,0,0,0,0,0,0,0,0,0,0,0]),Rn[s(217)]=new j([0,0,0,1,0,0,0,0,0,0,0,0]),Rn.SMHD=new j([0,0,0,0,0,0,0,0]),Rn[s(320)]=new j([0,0,0,0,0,0,0,1]);const a=new j([105,115,111,109]),u=new j([97,118,99,49]),c=new j([0,0,0,1]);Rn[s(341)]=Rn[s(411)](Rn[s(204)][s(367)],a,c,a,u),Rn.DINF=Rn[s(411)](Rn[s(204)][s(272)],Rn[s(411)](Rn[s(204)].dref,o))}}let In=1;class Cn{static[mn(209)](){return In++}[mn(250)](){const t=mn;this[t(274)][t(215)]=0,this.mp4track[t(446)]=[]}[mn(258)](){const t=mn;return!(!this.readyToDecode||!this[t(446)][t(294)])}constructor(){this[mn(283)]=1}}class Pn extends Cn{resetTrack(){const t=mn;this[t(283)]=1,this[t(223)]=0,this[t(237)]=0}[mn(406)](t,e,i){const s=mn;if(t.length>0)for(let n=0;n<t[s(294)];n++){let r=t[n],o=r[s(276)],h=o[s(442)];this.samples.push({units:o,size:h,duration:r.duration,sampleAuxInfo:e,timestamp:i}),this[s(274)][s(215)]+=h}}[mn(248)](){const t=mn;if(!this[t(446)])return null;let e,i=this[t(274)][t(446)];for(;this.samples[t(294)];){let s=this[t(446)][t(233)](),n=(1e3*s[t(385)]|0)-this.nextDts|0;n<5&&(n=5),this.dts=this.nextDts,this[t(223)]+=n,e={size:s.size,duration:n,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1},sampleAuxInfo:s[t(195)]};let r=new j(s.size);return r[t(311)](s.units,0),i.push(e),new j(r.buffer,0,s[t(483)])}return null}constructor(t){const e=mn;super(),this[e(435)]=!0,this[e(223)]=0,this[e(237)]=0,this[e(274)]={id:Cn[e(209)](),type:"audio",channelCount:2,audiosamplerate:48e3,len:0,fragmented:!0,timescale:t,duration:t,samples:[],codec:e(388),encrypted:!0},this[e(446)]=[]}}class Dn extends Cn{[mn(426)](){const t=mn;this[t(283)]=1,this.readyToDecode=!1,this[t(274)].sps="",this[t(274)][t(362)]="",this[t(223)]=0,this[t(237)]=0}[mn(406)](t,e,i){const s=mn;for(let n of t){let t=[],r=0;for(let e of n[s(276)])this.h264[s(368)](e)&&(t[s(462)](e),r+=e.getSize());t[s(294)]>0&&this[s(435)]&&(this[s(274)][s(215)]+=r,this[s(446)][s(462)]({units:t,size:r,keyFrame:n.keyFrame,duration:n[s(191)],sampleAuxInfo:e,timestamp:i}))}}[mn(248)](){const t=mn;if(!this[t(258)]()||!this.samples)return null;let e,i=this[t(274)][t(446)],n=this.samples[t(233)](),r=n[t(276)],o=(1e3*n.timestamp|0)-this[t(223)]|0;o<5&&(o=5),s[t(251)]&&o>5e3&&console[t(383)]("timestamp gap: "+(o/1e3|0)+" s"),this[t(237)]=this[t(223)],this.nextDts+=o,e={size:n[t(483)],duration:o,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:n[t(275)]?0:1,dependsOn:n.keyFrame?2:1},sampleAuxInfo:n[t(195)]};let h=0;for(const e of r)h+=e[t(349)]();let a=0,u=new j(h);for(const e of r)u[t(311)](e[t(343)](),a),a+=e[t(349)]();return i[t(462)](e),new j(u[t(492)],0,h)}constructor(t,e){const i=mn;super(),this[i(435)]=!1,this.nextDts=0,this[i(237)]=0,this[i(477)]=e,this.mp4track={id:Cn[i(209)](),type:i(434),len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:t,duration:t,samples:[],encrypted:!0},this[i(446)]=[],this[i(220)]=new En(this)}}class Nn extends xn{addTrack(t){const e=mn;(t===e(434)||"both"===t)&&(this[e(414)][e(434)]=new Dn(this[e(393)],this.videoElement),this[e(480)][e(462)](e(434))),(t===e(451)||t===e(303))&&(this[e(414)][e(451)]=new Pn(this.timescale),this[e(480)][e(462)](e(451)))}reset(){const t=mn;for(let e of this[t(480)])this[t(414)][e][t(426)]();this[t(489)]=!1}[mn(355)](){const t=mn;this[t(414)]={},this[t(490)]()}[mn(250)](){const t=mn;if(this[t(489)])for(let e of this[t(480)]){let i=this[t(414)][e];for(;;){let s=i.getFramePayload();if(!s||!s[t(442)])break;let n={type:e,payload:wn(this[t(375)][t(460)](i[t(283)]++,i[t(237)],i[t(274)]),this[t(375)][t(458)](s)),dts:i[t(237)]};this[t(255)](t(492),n),i[t(250)]()}}else this[t(258)]()&&(this[t(255)](t(205)),this[t(271)](),this[t(489)]=!0,this[t(250)]())}initSegment(){const t=mn;for(let e of this[t(480)]){let i=this[t(414)][e],s={type:e,payload:this[t(375)][t(271)]([i[t(274)]],this[t(433)],this[t(393)])};this.dispatch(t(492),s)}}isReady(){const t=mn;for(let e of this.trackTypes)if(!this[t(414)][e][t(435)]||!this[t(414)][e].samples[t(294)])return!1;return!0}[mn(406)](t){const e=mn;for(let i of this[e(480)]){let s=t[i];s.length>0&&this[e(414)][i][e(406)](s,i===e(451)?t[e(225)]:t.videoSampleAuxInfo,t[e(385)])}this.flush()}constructor(t,e){const i=mn;super(i(345)),this.initialized=!1,this.trackTypes=[],this[i(414)]={},this[i(393)]=1e3,this.mediaDuration=0,this[i(477)]=t,this[i(375)]=e}}class Mn extends xn{[mn(355)](){const t=mn;this[t(401)]=null,this[t(254)]=null;try{this.sourceBuffer&&(this[t(310)][t(186)](),this[t(218)].removeSourceBuffer(this[t(310)]),this[t(310)]=null)}catch(t){}this.offAll()}[mn(475)](){const t=mn;if(this.queue[t(294)]&&this[t(310)]&&!this[t(310)].updating){if(this[t(310)].buffered[t(294)]>1){for(let e=0;e<this[t(310)].buffered[t(294)];++e){const i=e<this[t(310)].buffered[t(294)]-1;s[t(251)]&&console[t(383)](t(445)+e+(i?" (remove)":"")+": "+this[t(310)][t(269)][t(326)](e)+t(325)+this[t(310)][t(269)][t(376)](e)),i&&this.sourceBuffer[t(482)](this[t(310)][t(269)].start(e),this[t(310)].buffered[t(376)](e))}if(this.sourceBuffer[t(378)])return}try{this[t(310)][t(491)](this[t(401)]),this.queue=new j}catch(e){this[t(255)](t(370),{type:this[t(469)],name:t(352),error:e})}}}[mn(371)](t){const e=mn;if(this[e(254)]&&(this.dbgQueue=wn(this[e(254)],t),100==++this[e(404)])){const t=(new Date)[e(344)]().substring(0,19)[e(454)](":","-"),i=this.type+"-"+t+".mp4";s.downloadToFile(this[e(254)],i),this[e(254)]=null}this[e(197)]||(this[e(401)]=wn(this[e(401)],t)),this.doAppend()}constructor(t,e,i){const n=mn;super(n(492)),this[n(469)]=e,this.queue=new j,s[n(319)]&&(this[n(254)]=new j,this[n(404)]=0),this.sourceBuffer=t,this[n(218)]=i,this[n(197)]=!1,this[n(310)].addEventListener(n(370),(t=>{const e=n;console.warn(e(201),t,this.type),this[e(197)]=!0,this[e(255)](e(370),{type:this[e(469)],name:"buffer",error:e(292)})}))}}class Ln extends xn{static isSupported(t){const e=mn;return s[e(202)]?s.ManagedMediaSource[e(497)](t):!!s[e(384)]&&s.MediaSource[e(497)](t)}[mn(322)](){const t=mn;typeof this.options.node===t(302)&&""==this.options[t(450)]&&console[t(370)](t(473)),this[t(234)]=!1,this.setupMSE()}setupMSE(){const t=mn;if(!s[t(202)]&&!s[t(384)])throw t(452);s.ManagedMediaSource?(this.node[t(427)]=!0,this[t(327)]=new ManagedMediaSource):this[t(327)]=new MediaSource,this[t(284)]=URL[t(244)](this[t(327)]),this.node[t(485)]=this[t(284)],this[t(277)]=!1,this[t(327)][t(331)](t(338),this.onMSEOpen[t(308)](this)),this.mediaSource.addEventListener("sourceclose",this[t(241)][t(308)](this)),this[t(327)][t(331)]("webkitsourceopen",this[t(194)][t(308)](this)),this.mediaSource[t(331)](t(240),this[t(241)].bind(this)),this[t(327)][t(331)]("error",(function(e){const i=t;console[i(370)](i(287),e[i(226)])}))}[mn(227)](){const t=mn;if(!this[t(277)])try{this.mseEnded=!0,this[t(327)][t(185)]===t(399)&&this[t(327)][t(261)]()}catch(e){console[t(370)]("mediasource is not available to end: ",e)}}[mn(359)](){this[mn(410)]=!0}[mn(371)](t){const e=mn;let i={video:[],audio:[]};if(this[e(197)]||this[e(277)]||!t||!this[e(423)])return-1;if(t[e(434)]){i.timestamp=t.timestamp;const s=this[e(190)](t.videoSampleAuxInfo,this.mp4[e(199)][e(434)]),n=s!=t[e(434)][e(442)];let r=En[e(360)](t[e(434)],n);if(!r[e(206)]||r[e(260)].length<1)return 0;if(this.waitingForIdr){if(!r[e(412)])return 0;this[e(410)]=!1}if(!pn&&t[e(278)]){const i=r[e(260)][e(188)](((t,i)=>t+4+i[e(442)]),0);i!==s&&this[e(400)](t[e(278)],this.mp4[e(199)][e(434)],i-s)}i[e(434)]=this[e(335)](r[e(260)]),i[e(278)]=t[e(278)]}return t[e(451)]&&(i[e(385)]=t[e(385)],i[e(451)]=[{units:t.audio}],i.audioSampleAuxInfo=t[e(225)]),t[e(434)]||t[e(451)]?(this[e(423)][e(406)](i),0):(console.error(e(361)),0)}[mn(335)](t){const e=mn;let i=[],s=[],n=!1,r=!1;for(let o of t){let t=new Tn(o);t.type()!==Tn.IDR&&t[e(469)]()!==Tn.NDR||En[e(448)](t),i[e(294)]&&r&&(t[e(387)]||!t[e(495)])&&(s[e(462)]({units:i,keyFrame:n}),i=[],n=!1,r=!1),i[e(462)](t),n=n||t[e(459)](),r=r||t[e(495)]}if(i[e(294)])if(r)s[e(462)]({units:i,keyFrame:n});else{let t=s[e(294)]-1;t>=0&&(s[t].units=s[t][e(276)].concat(i))}return 1!==s[e(294)]&&console[e(230)](e(207)+s[e(294)]),s}[mn(190)](t,e){const i=mn;if(!t)return 0;const s=(t[0]<<8)+t[1],n=e+2+4;let r=0,o=2;for(;0<s&&o+n<=t[i(442)];){o+=e;const i=(t[o]<<8)+t[o+1],s=(t[o+2]<<24)+(t[o+3]<<16)+(t[o+4]<<8)+t[o+5];o+=6,r+=i+s}return r}patchSampleAuxinfo(t,e,i){const s=mn;let n=2;if(0<(t[0]<<8)+t[1]&&n+(e+2+4)<=t[s(442)]){n+=e;let s=(t[n]<<8)+t[n+1];s+=i,s>=0&&(t[n]=s>>>8&255,t[n+1]=255&s)}return 0}[mn(382)](){const t=mn;if(this[t(234)]&&this[t(423)]&&this[t(423)].isReady()&&!this.bufferControllers){this.bufferControllers={};for(let e in this[t(423)][t(414)]){let i=this[t(423)][t(414)][e];const n="".concat(e,t(317))[t(365)](i[t(274)][t(449)],'"');if(s.clRtcDrmDebugLog&&console[t(383)](t(312),n),!Ln[t(408)](n))return console[t(370)](t(372)),!1;let r=this[t(327)][t(350)](n);this[t(398)][e]=new Mn(r,e,this[t(327)]),this.bufferControllers[e].on(t(370),this[t(403)][t(308)](this))}}}[mn(313)](){const t=mn;for(let e in this[t(398)])this[t(398)][e].doAppend()}onBuffer(t){const e=mn;this[e(234)]&&this[e(398)]&&this[e(398)][t.type]&&this[e(398)][t[e(469)]][e(371)](t[e(214)])}[mn(194)](){const t=mn;s[t(251)]&&console.info("[MSE] sourceopen"),this[t(327)][t(185)]!==t(281)&&(this.mediaSource.duration=Number[t(391)],this[t(234)]=!0,"function"==typeof this[t(379)][t(336)]&&this[t(379)].onReady[t(394)](null,this[t(466)]),URL[t(235)](this.url),this[t(382)]())}[mn(241)](){const t=mn;s.clRtcDrmDebugLog&&console[t(383)](t(441)),this.mseReady=!1,this[t(227)]()}[mn(403)](t){const e=mn;console.warn(e(351),t),this.irrecoverableError=!0,this[e(227)](),"function"==typeof this[e(379)][e(266)]&&this[e(379)][e(266)][e(394)](null,t)}constructor(t){const e=mn;super(e(397)),this[e(197)]=!1,this[e(410)]=!0,this[e(466)]=!1,this[e(234)]=!1,this.mseEnded=!1,this[e(379)]=w[e(189)]({},{node:"",mode:"video",debug:!1,onReady:function(){},onError:function(t){}},t),this[e(450)]=typeof this.options[e(450)]===e(302)?h[e(472)](this.options.node):this[e(379)].node,this[e(432)]=t.drm,this.mp4=new Rn(this.drm),this[e(423)]=new Nn(this.node,this[e(375)]),this[e(423)].addTrack(this[e(379)][e(461)]),this[e(423)].on(e(492),this[e(456)].bind(this)),this[e(423)].on(e(205),this[e(382)][e(308)](this)),this.initBrowser()}}function Bn(t,e){const i=On();return(Bn=function(t,e){return i[t-=222]})(t,e)}function On(){const t=["Av","1634635aeNfVS","4rWkceo","1051qHPzyB","314juHkBI","7752096GfpyFE","1023208nKrJjX","2137269uUqtNM","303058KNxeBb","1097196nHglzA"];return(On=function(){return t})()}!function(){const t=Bn,e=On();for(;;)try{if(x(t(228))/1*(-x(t(229))/2)+-x(t(222))/3*(x(t(227))/4)+x(t(226))/5+x(t(224))/6+x(t(223))/7+-x(t(231))/8+x(t(230))/9==409100)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const Fn=Vn;function Vn(t,e){const i=Hn();return(Vn=function(t,e){return i[t-=460]})(t,e)}!function(){const t=Vn,e=Hn();for(;;)try{if(-x(t(471))/1*(-x(t(474))/2)+x(t(479))/3+x(t(473))/4*(x(t(461))/5)+x(t(487))/6+-x(t(467))/7+-x(t(482))/8+-x(t(464))/9==139726)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const Wn="CrsCCAMSEKDc0WAwLAQT1SB2ogyBJEwYv4Tx7gUijgIwggEKAoIBAQC8Xc/GTRwZDtlnBThq8"+Fn(462)+"wyoYOE+M/t1oIbccwlTQ7o+BpV1X6TB7fxFyx1jsBtRsBWphU65w121zqmSiwzZzJ4xsXVQCJ"+Fn(460)+Fn(476)+Fn(480)+Fn(484)+Fn(485)+"7hyskG5ZLAyJMzTvgnV3D8/I5Y6mCFBPb/+/Ri+9bEvquPF3Ff9ip3yEHu9mcQeEYCeGe9zR/27eI5MATX39gYtCnn7dDXVxo4/rCYK0A4VemC3HRai2X3pSGcsKY7+6we7h4IycjqtuGtYg8A"+Fn(475)+"RL9KsD0v7ysBQVdUXEbJotcFz71tI5qc3jwr6GjYIPA3VzusD17PN6AGQniMwxJV12z/EgnUo"+Fn(477),Un=j[Fn(478)](s[Fn(470)](Wn),(t=>t.charCodeAt(0)));class Gn{[Fn(469)](){return this[Fn(488)]}[Fn(483)](){const t=Fn;switch(this[t(488)]){case t(489):return"https://lic.staging.drmtoday.com";case t(465):return t(481);default:return t(466)}}certificate(){return Un}constructor(t){this[Fn(488)]=t}}function Hn(){const t=["development","https://lic.drmtoday.com","462553oMrSQp","Staging","toString","atob","20047HjYCpd","Development","52chMPdC","6mbMcSk","baigovcoURAZcr1d/G0rpREjLdVLG0Gjqk63Gx688W5gh3TKemsK3R1jV0dOfj3e6uV/kTpsN","+vwmV2/NJWxKqHBKdL9JqvOnNiQUF0hDI7Wf8Wb63RYSXKE27Ky31hKgx1wuq7TTWkA+kHnJT","pcFB13osydpD2AaDsgWo5RWJcNf+fzCgtUQx/0Au9+xVm5LQBdv8Ja4f2oiHN3dw","from","146355HhTpSB","UrTEfQxfPR4dJTquE+IDLAi5yeVVxzbAgMBAAE6DGNhc3RsYWJzLmNvbUABEoADMmGXpXg/0q","https://lic.test.drmtoday.com","501688OkVRMl","baseUrl","xUuwokpsqVIHZrJfu62ar+BF8UVUKdK5oYQoiTZd9OzK3kr29kqGGk3lSgM0/p499p/FUL8oH","HzgsJ7Hajdsyzn0Vs3+VysAgaJAkXZ+k+N6Ka0WBiZlCtcunVJDiHQbz1sF9GvcePUUi2fM/h","Production","1063410zFUyaf","name","staging","pQnNI61gzHO42XZOMuxytMm0F6puNHTTqhyY3Z290YqvSDdOB+UY5QJuXJgjhvOUD9+oaLlvT","93365ZJpndd","V382D1oJAM0F/YgCQtNDLz7vTWJ+QskNGi5Dd2qzO4s48Cnx5BLvL4H0xCRSw2Ed6ekHSdrRU","production","2343546YgIYCY"];return(Hn=function(){return t})()}function Zn(t,e){const i=Xn();return(Zn=function(t,e){return i[t-=325]})(t,e)}function Xn(){const t=["1052499bnJBHn","cenc","4222tSxFth","Unsupported SampleAuxInfo version","12980Tusgux","3160ZwXFcU","40030ewyARR","16lkTHRT","1199124lbwxEr","data","105TSrukA","getUint8","12bBEpge","SampleAuxInfo corrupted (postfix not found)","getUint16","error","85265ZYYyUv","buffer","3616548TKdsLX","subarray","byteLength","SampleAuxInfo corrupted"];return(Xn=function(){return t})()}function zn(t,e){const i=jn();return(zn=function(t,e){return i[t-=295]})(t,e)}Gn[Fn(468)]=new Gn(Fn(489)),Gn[Fn(486)]=new Gn(Fn(463)),Gn[Fn(472)]=new Gn(Fn(465)),function(){const t=Zn,e=Xn();for(;;)try{if(x(t(328))/1+-x(t(332))/2*(-x(t(336))/3)+-x(t(338))/4*(-x(t(342))/5)+-x(t(344))/6+-x(t(326))/7*(x(t(333))/8)+x(t(334))/9+x(t(331))/10*(x(t(330))/11)==358550)break;e.push(e.shift())}catch(t){e.push(e.shift())}}(),function(){const t=zn,e=jn();for(;;)try{if(x(t(305))/1*(-x(t(297))/2)+-x(t(295))/3+x(t(310))/4*(x(t(309))/5)+-x(t(304))/6*(x(t(296))/7)+x(t(307))/8*(-x(t(298))/9)+-x(t(301))/10*(x(t(302))/11)+-x(t(300))/12*(-x(t(308))/13)==178039)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const qn=[];let Yn=null,Kn=0;function jn(){const t=["31476hbBsvr","850RxzAPl","4180KczaCN","push","156MUFuvQ","96571jvhWaB","buffer","26232BkewNd","4303YGAqiP","5yhGpFn","1137036pzCnTd","1035942NcoZLh","94073eTaQjy","2bXtEms","414snfiTE","slice"];return(jn=function(){return t})()}const Qn=ir;function Jn(){const t=["Data does not seem to be UTF-16 encoded!","No init data available!","getElementsByTagName","min","14BFNrBA","keystatuseschange","catch","childNodes","internal-error","Failed to reuse previous EME session: ","output-downscaled","expired","bind","5576688EKOFOG","has","length","License acquisition failed with error ","arrayBuffer","apply","CDM error generating license request: ","<Challenge","No PR challenge data!","then","license","createSession","warn","[PR] License fetched:","text/xml","clRtcDrmDebugLog","push","encode","max","json"," is not ","replace","target","rtcdrmerror","update","fromCharCode","subarray","2993694njpqat","4002692oINhTV","Content-Type","1347492MkzfDC","Data has an incorrect length, must be even.","addEventListener","buffer","onFetch","generateRequest","initData","dispatchEvent","atob","No clear key test key provided!","Challenge","New lic will be requested","oct","BYTES_PER_ELEMENT","sessionId","usable for decryption (status: ","[WV] License fetched:","Key ","5MtuOVr","byteLength","744563CKOUzg","load","floor","error","decode","indexOf","info","isSafari","edef8ba979d64acea3c827dcd51d21ed","mediaKeys","Previous lic will be reused","charCodeAt","licenseUrl","status","Failed to update the session: ","log","keyStatuses","temporary","9a04f07998404286ab92e65be0885f95","output-restricted","nodeValue","btoa","message","EME createSession() failed - no DRM available","5977680uUTwUr","getUint16","[PR] Challenge node not found","A128KW","3974463jrELhf","Failed to update the session","stringify","[EME]","delete","No media keys for media element!","set","2nMQfRz"];return(Jn=function(){return t})()}!function(){const t=ir,e=Jn();for(;;)try{if(-x(t(419))/1*(x(t(454))/2)+x(t(495))/3+x(t(496))/4*(-x(t(417))/5)+-x(t(498))/6*(-x(t(459))/7)+x(t(468))/8+-x(t(447))/9+x(t(443))/10==555073)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();let $n={licenseUrl:"",onFetch:void 0};const tr={},er=(t,e,i)=>(void 0===e&&(e=0),void 0===i&&(i=1/0),((t,e,i)=>{const s=ir,n=j[s(511)];e*=n,i*=n;const r=(a=t)instanceof ArrayBuffer?a:a[ir(501)],o=t[s(418)],h=e;var a;let u=_[s(486)](0,_[s(458)](h,o)),c=_[s(458)](u+_[s(486)](i,0),o);return u/=n,c/=n,new j(r,u,c-u)})(t,e,i));function ir(t,e){const i=Jn();return(ir=function(t,e){return i[t-=417]})(t,e)}const sr=t=>{const e=ir;let i="";for(const s of t){let t=s.toString(16);1==t[e(470)]&&(t="0"+t),i+=t}return i};let nr=null;const rr=t=>{const e=ir;return s[e(440)](String[e(493)][e(473)](null,t))[e(489)](/\+/g,"-")[e(489)](/\//g,"_")[e(489)](/=*$/,"")},or=(t,e)=>{const i=ir,s=(t=>{const e=ir,i=JSON.parse((new TextDecoder)[e(423)](t));if(console[e(434)]("CK license request:",i),null===nr)throw new g(e(507));const s=[];for(const t of i.kids){const i={kty:e(510),alg:e(446),kid:t,k:rr(nr)};s[e(484)](i)}return(new TextEncoder)[e(485)](JSON[e(449)]({keys:s}))})(e.message);e[i(490)][i(492)](s)[i(461)]((function(t){const e=i;console[e(422)](e(448),t)}))},hr=t=>{const e=ir,i=s[e(506)](t[e(489)](/-/g,"+")[e(489)](/_/g,"/")),n=new j(i[e(470)]);for(let t=0;t<i.length;++t)n[t]=i[e(430)](t);return n},ar=function(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];return en(void 0,[t,e,...s],void 0,(function*(t,e,i){void 0===i&&(i=!1);const s=ir,n=new Headers(tr);i&&n.append(s(497),s(482));const r={method:"POST",headers:n,body:e},o=yield $n[s(502)]?$n[s(502)](t,r):fetch(t,r);if(!o.ok)throw new g(s(471)+o[s(432)]);return o}))},ur=(t,e)=>{const i=ir;ar($n[i(431)],e[i(441)])[i(477)]((t=>t[i(487)]()))[i(477)]((t=>{const n=i;s[n(483)]&&console.info(n(514),t.license);const r=hr(t[n(478)])[n(501)];e[n(490)][n(492)](r)[n(461)]((t=>{console[n(422)]("Failed to update the session",t)}))}))[i(461)]((e=>{const s=i;t.dispatchEvent(new CustomEvent(s(491),{detail:{message:""+e}})),console[s(422)](e)}))},cr=(t,e)=>{const i=ir,n=((t,e)=>{const i=ir,s=new DOMParser;try{const t=function(t,e,i){void 0===i&&(i=!1);const s=ir;if(!t)return"";let n=t;if(!i&&n.byteLength%2!=0)throw console[s(422)](s(499)),new g(s(455));const r=er(n);let o;if((255===r[0]&&254===r[1]||254===r[0]&&255===r[1])&&(n=r[s(494)](2)),n instanceof ArrayBuffer)o=n;else{const t=new j(n[s(418)]);t[s(453)](er(n)),o=t[s(501)]}const h=_[s(421)](n.byteLength/2),a=new Uint16Array(h),u=new DataView(o);for(let t=0;t<h;t++)a[t]=u[s(444)](2*t,e);return function(t){const e=ir;let i="";for(let s=0;s<t[e(470)];s+=16e3){const n=t[e(494)](s,s+16e3);i+=String[e(493)].apply(null,n)}return i}(a)}(e,!0);if(t[i(424)](i(475))>-1){const e=s.parseFromString(t,i(482))[i(457)](i(508))[0][i(462)][0][i(439)];if(null===e)throw new g("No PR challenge data!");return hr(e)}console[i(480)](i(445))}catch(e){t.dispatchEvent(new CustomEvent(i(491),{detail:{message:""+e}})),console.error(e)}return null})(t,e.message);if(null===n)return t[i(505)](new CustomEvent("rtcdrmerror",{detail:{message:"No PR challenge data!"}})),void console.error(i(476));ar($n[i(431)],n[i(501)],!0)[i(477)]((t=>t[i(472)]()))[i(477)]((n=>{const r=i;s[r(483)]&&console[r(425)](r(481),n),e[r(490)].update(n)[r(461)]((function(e){const i=r;t[i(505)](new CustomEvent(i(491),{detail:{message:i(433)+e}})),console[i(422)](i(448),e)}))}))[i(461)]((e=>{const s=i;t.dispatchEvent(new CustomEvent("rtcdrmerror",{detail:{message:""+e}})),console[s(422)](e)}))},lr=(t,e)=>{const i=ir;ar($n[i(431)],e[i(441)])[i(477)]((t=>{const e=i,n=t.text();return s[e(483)]&&console.info("[FPS] License fetched:",t,n),n}))[i(477)]((t=>{const s=i;e[s(490)][s(492)](hr(t))}))[i(461)]((e=>{const s=i;t.dispatchEvent(new CustomEvent(s(491),{detail:{message:""+e}})),console[s(422)](e)}))},dr=(t,e)=>{tr[t]=e},fr=vn[Qn(426)];let _r=!fr;const vr=new Map;function mr(t){return en(this,void 0,void 0,(function*(){const e=ir;if(null===t[e(504)])throw new g(e(456));const i=t[e(490)];if(null===i)throw new g("No media element available!");const n=i[e(428)];if(null===n)throw new g(e(452));const r=sr(new j(t[e(504)])),o=r+i.id;let h=null;vr[e(469)](o)&&(h=vr.get(o),null!=h&&h.close(),vr[e(451)](o)),s[e(483)]&&console[e(425)](e(450),e(h?429:509));let a=null;try{a=n[e(479)](_r?"persistent-license":"temporary")}catch(t){console[e(434)]("EME createSession(persistent) failed:",t)}if(!a&&_r){_r=!1;try{a=n[e(479)](e(436))}catch(t){console[e(422)]("EME createSession(temporary) failed:",t)}}if(a)if(a[e(500)](e(460),(t=>{const s=e;t[s(490)][s(435)].forEach(((t,e)=>{const n=s;(t===n(466)||t===n(438)||t===n(465)||t===n(463))&&i[n(505)](new CustomEvent(n(491),{detail:{message:n(515)+sr(new j(e))+n(488)+(n(513)+t+")"),keyId:e}}))}))})),fr?a.addEventListener(e(441),lr[e(467)](null,i),!1):-1!==r[e(424)](e(427))?a.addEventListener(e(441),ur[e(467)](null,i),!1):-1!==r[e(424)](e(437))?a[e(500)](e(441),cr[e(467)](null,i),!1):a.addEventListener("message",or[e(467)](null,i),!1),h)try{(yield a[e(420)](h[e(512)]))?vr[e(453)](o,a):i.dispatchEvent(new CustomEvent(e(491),{detail:{message:"Failed to load previous EME session"}}))}catch(t){i[e(505)](new CustomEvent(e(491),{detail:{message:e(464)+t}}))}else a[e(503)](t.initDataType,t[e(504)]).then((()=>{_r&&vr[e(453)](o,a)}))[e(461)]((t=>{const s=e;i[s(505)](new CustomEvent(s(491),{detail:{message:s(474)+t}}))}));else i[e(505)](new CustomEvent(e(491),{detail:{message:e(442)}}))}))}const gr=Vr;function pr(){const t=[" too close to seek, ","fpsCertificateUrl","9880640TWxZrg","H264","ignoreAudio","Unable to create Worker!","createMediaKeys(",", restart required: ","/license-proxy-headerauth/drmtoday/RightsManager.asmx","6236Nwzlef","worker","serverCertificateUrl","serverCertificate","seq",",255]).buffer,idrFrames.push(new Uint8Array([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,","ClearKey","No valid DRM config found, call rtcDrmConfigure first.","sessionId","toISOString","indexOf","robustness","isInteger","info","includes","Development","slice","16niaptx"," frame","video/mp4","isArray","Android","end","PlayReady","streamType","1772WtcYWF","]: ","Frame gap: ","nextKeyFrameAllowedTime","use rtcDrmFeedFrame to push frames manually","Error recovery attempted","merchant","FairPlay","requestMediaKeySystemAccess(","pipeThrough","/license-server-fairplay/","isChrome","type","MSE (re)init","const DUMMY_IDR_FRAME_SLICE_HDR0=new Uint8Array([32,0,203]),DUMMY_IDR_FRAME_SLICE_HDR1=new Uint8Array([16,0,50]);","DRM config env value must be one of: ","length","GOP is getting too long, requesting a new key frame","Worker","let brokenFrame=null,idrFrames=[];function initializeDummyFrames(){brokenFrame=new Uint8Array([0,0,0,1,65,154,255","srcObject","RTCRtpScriptTransform","),idrFrames.push(idrFrames[0].slice());let $=new Uint8Array(idrFrames[1]);$.set([16,0,50],27)}let idrPicIdToggle=","now"," to ","join","setServerCertificate","audioCapabilities","lastKeyFrameTime","prevSeqNum"," seeking from ",".experiment","clRtcDrmDebugLog","Server certificate fetch failed with error ","isFirefox","org.w3.clearkey","x-dt-custom-data","jitterBufferTarget","playbackRate","enabled","keyFrameNeeded","createEncodedStreams","wvCertificateUrl","key","sai","Discarding corrupted video frame (too small)",'gle^=1]}function audioTransformFunction($,e){postMessage({streamType:"audio",frame:{timestamp:$.timestamp,data:$.',"H264 is the only supported video codec.","com.microsoft.playready.recommendation"," will be used","DRM config iv must be an instance of 16-byte long Uint8Array.","encryption","0;function generateDummyFrame($){return(brokenFrame||initializeDummyFrames(),$)?brokenFrame:idrFrames[idrPicIdTog","toString","message","status","bytesSinceKey","currentTime","supportsRtpScriptTransform","1585647fRskxG","audioElement","track","sinf","createObjectURL","enqueue","Invalid videoElement, it must be an instance of HTMLVideoElement.","7302558TqFWae","pipeTo","SampleAuxInfo extraction failed (video)","isEdge","keys","not-allowed","rtcdrmerror","btoa","?audioTransformFunction:videoTransformFunction});e.pipeThrough(a).pipeTo(x)}self.RTCTransformEvent&&(self.onrtctr",", a1d1f1 is recommended).","reportDiscontinuity","onFetch","keyId","sessionTypes","). Edge only supports PlayReady, Widevine and ClearKey.","audioEncrypted","audioStartTimestamp","frame","videoStartTimestamp","184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32]).buffer","Duplicate/reordered frame, prev seq: ","ClearKey is not supported by Safari.","bind",") not found in [","DRM config robustness can only be one of: ","persistent-license","postMessage","receiver","get","both","jmuxer","Production","Blob","timestamp","cenc","emeConfig","clear","cbcs-1-9","5iKPdqC","isWindows","PlayReady license acquisition might fail without output protection enabled (sessionId is ","). Chrome only supports Widevine and ClearKey.","mediaBufferMs should be an integer.","size","certificate","prLicenseUrl","fpsLicenseUrl","/license-proxy-widevine/cenc/","4572770OAoUlm","BYTES_PER_ELEMENT","then","SW_SECURE_CRYPTO","ansform=$=>{let e=$.transformer;handleTransform(e.options.operation,e.readable,e.writable)}),onmessage=$=>{keyFra","splice","Safari doesn't support 'cenc'/AES-CTR, use 'cbcs' instead if possible.","videoElement","rtcDrmConfigure did not specify audioElement, audio will be dropped",'audio/mp4; codecs="opus"',"object","Invalid audioElement, it must be an instance of HTMLMediaElement.","keyFrameNeededPosted","debugCreateMediaDump","next","play","6591266VeIbXo","userId","jitterBufferDelayHint",'ame(keyFrameNeeded),e.enqueue($)}function handleTransform($,e,x){let a=new TransformStream({transform:"audio"===$',"dispatchEvent","reduce"," bytes, playback at ","offset","arrayBuffer","waitingForIdr","Widevine","DRM config mediaBufferMs should be an integer.","hwSecurity","authToken","audio"," bytes)","push","licenseUrl","Default transform mode enabled, ","RTCRtpScriptTransform/TransformStream will not be created, ","GET","baseUrl","video","trim","7377TdQrIK","3000","playoutDelayHint","catch","fpsCertificate","POSITIVE_INFINITY","/license-server-fairplay/cert/","DRM config:","streams","mediaBufferMs","log","codec","onmessage","Target video element (","Applying pre-configured certificate (","webkitURL","Discarding corrupted video frame (no Annex B startcode)"," requesting a new key frame (latency ","PlayReady might not support '","No target media element!","URL","set","warn","data","config","isSafari","forEach","setMediaKeys","buffered"," - ","keySystem",'data}}),e.enqueue($)}let keyFrameNeeded=!1;function videoTransformFunction($,e){postMessage({streamType:"video",f',"paused","wvCertificate","a1d1f1","2000","keyFrameRequestInterval","Several DRM configs detected, rtcDrmOnTrack have to be called with target DRM config.","error","238HZxcdH","HW_SECURE_ALL","Invalid DRM type (","buffer","x-dt-auth-token","clRtcDrmCreateMediaDump",'rame:{type:$.type,timestamp:$.timestamp,data:$.data}}),"key"===$.type&&(keyFrameNeeded=!1),$.data=generateDummyFr',"addEventListener",") failed","keyFrameLogCntr","feed","byteLength","kind","purchase","environment","videoCapabilities","requestMediaKeySystemAccess","temporary","). It has to be a string containing a JWT.","value",".. ","string"];return(pr=function(){return t})()}!function(){const t=Vr,e=pr();for(;;)try{if(x(t(543))/1*(x(t(512))/2)+x(t(473))/3*(x(t(568))/4)+-x(t(672))/5*(-x(t(634))/6)+-x(t(536))/7+x(t(560))/8*(x(t(627))/9)+-x(t(682))/10+-x(t(449))/11==932877)break;e.push(e.shift())}catch(t){e.push(e.shift())}}();const wr=vn[gr(626)],yr=vn[gr(602)],br=vn[gr(498)],Ar=vn[gr(637)],Sr=vn[gr(579)],Tr=vn.platform,kr=vn[gr(673)],Er=Ar||Sr&&Tr===gr(564),xr=1e6*(yr?82:br?220:120),Rr=yr?5e3:2e3,Ir=yr?1.5:.5;function Cr(t){const e=gr;return typeof t!==e(692)||null===t||t instanceof Element||t instanceof Gn?t:function(t){const e=gr;return!!((null==t?void 0:t[e(515)])instanceof ArrayBuffer&&null!=t&&t[e(683)])}(t)?t[e(559)]():Array[e(563)](t)?t[e(454)](((t,e,i)=>(t[i]=Cr(e),t)),[]):t instanceof w?w[e(638)](t)[e(454)](((e,i)=>(e[i]=Cr(t[i]),e)),{}):t}class Pr{constructor(t){const e=gr;this[e(545)]="",this.licenseUrl="",this[e(503)]="",this[e(669)]=[],this[e(497)]=Cr(t),this[e(664)]=null,this[e(521)]=0,this[e(571)]=Date.now(),this.videoStartTimestamp=0,this.audioStartTimestamp=0,this.prevSeqNum=-1,this[e(596)]=0,this[e(624)]=0,this.keyFrameNeeded=!0,this.keyFrameNeededPosted=!1,this.keyFrameRequestInterval=Rr,this.worker=null}}const Dr=new Map,Nr=new j([60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60]),Mr=new j([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]),Lr=new j([213,251,214,184,46,217,62,78,249,138,228,9,49,238,51,183]);function Br(t){const e=gr;let i=!1;if((t[e(497)].video&&"clear"!==t[e(497)].video[e(619)]&&"HW"===t.config[e(471)][e(554)]||t[e(497)][e(463)]&&t[e(497)][e(463)].encryption!==e(670)&&"HW"===t[e(497)][e(463)][e(554)])&&(i=!0),t.hwSecurity=i,function(t,e){const i=gr;void 0!==e&&(t[i(497)][i(482)]=e),(void 0===t[i(497)][i(482)]||t[i(497)].mediaBufferMs<0)&&(t.config[i(482)]=100,yr?t[i(497)][i(482)]=350:!br&&kr&&(t[i(497)][i(580)]===i(566)||t[i(461)])&&(t[i(497)][i(482)]=1400))}(t,t[e(497)][e(482)]),void 0===t.config.authToken){void 0===t.config[e(450)]&&(t[e(497)][e(450)]=e(525)),void 0===t[e(497)][e(551)]&&(t.config[e(551)]=e(507));const i=s[e(641)](JSON.stringify({userId:t.config[e(450)],sessionId:t[e(497)][e(551)],merchant:t.config[e(574)]}));dr(e(604),i)}else dr(e(516),t.config[e(462)]);for(const i of[t[e(497)].audio,t[e(497)][e(471)]])i&&i[e(619)]!==e(670)&&(i[e(646)]||(i[e(646)]=Mr),i.iv||(i.iv=Lr));t[e(546)]=void 0,t[e(545)]="",t[e(466)]="";const n=t.config[e(526)][e(470)]();var r;if(t[e(497)][e(580)]===e(549)?(t.keySystem=e(603),nr=Nr):t.config.type===e(459)?(t[e(503)]="com.widevine.alpha",kr&&i&&(t[e(503)]+=e(599)),t.config.wvCertificate?t[e(546)]=t[e(497)][e(506)]:t[e(497)][e(610)]?t[e(545)]=t[e(497)][e(610)]:t[e(546)]=t.config[e(526)][e(678)](),t.config.wvLicenseUrl?t[e(466)]=t[e(497)].wvLicenseUrl:t[e(466)]=n+e(681)):t[e(497)][e(580)]===e(566)?(t[e(503)]=e(616),t[e(497)][e(679)]?t.licenseUrl=t[e(497)][e(679)]:t[e(466)]=n+e(542)):t[e(497)].type===e(575)&&(t.keySystem="com.apple.fps",t.config[e(477)]?t[e(546)]=t[e(497)][e(477)]:t[e(497)][e(535)]?t.serverCertificateUrl=t.config[e(535)]:t[e(545)]=n+e(479)+t[e(497)].merchant,t[e(497)][e(680)]?t[e(466)]=t.config.fpsLicenseUrl:t.licenseUrl=n+e(578)),r={licenseUrl:t[e(466)],onFetch:t.config[e(645)]},$n=r,t[e(669)]=[],t.config[e(580)]!==e(575)){t[e(669)][e(465)]({initDataTypes:[e(668)],sessionTypes:["persistent-license",e(529)]});for(const i of[t[e(497)][e(471)],t[e(497)][e(463)]])if(i&&i.encryption!==e(670)){const s=i==t[e(497)][e(471)]?e(471):e(463);let n;t[e(497)][e(580)]===e(459)?n="HW"===i[e(554)]?e(513):e(685):"PlayReady"===t[e(497)][e(580)]&&(n="HW"===i.robustness?e(474):e(508)),s===e(471)?t[e(669)][0][e(527)]=[{contentType:'video/mp4; codecs="avc1.640032"',encryptionScheme:"cenc"===i[e(619)]?e(668):"cbcs-1-9",robustness:n||void 0}]:t[e(669)][0][e(595)]=[{contentType:e(691),encryptionScheme:i[e(619)]===e(668)?"cenc":e(671),robustness:n||void 0}]}}else t[e(669)]=[{initDataTypes:[e(630)],videoCapabilities:[{contentType:e(562),robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:e(639),sessionTypes:["temporary"]}];s[e(600)]&&console.info(e(480),t)}function Or(t){const e=gr;s[e(600)]&&console[e(556)](e(581));let i=t[e(497)].videoElement;(!t[e(497)][e(471)]||t.config[e(471)][e(619)]===e(670))&&(i=t.config.audioElement),t[e(664)]=null;const n=!t.ignoreAudio&&t[e(497)][e(463)]&&"clear"!==t[e(497)].audio[e(619)],r=t[e(497)][e(471)]&&t.config.video[e(619)]!==e(670);t[e(624)]=0,t[e(608)]=!0,t.keyFrameNeededPosted=!1,t[e(509)]=Rr,t[e(652)]=0,t[e(650)]=0,t[e(597)]=-1,t[e(596)]=0,t.jmuxer=new Ln({node:i,mode:n?e(r?663:463):"video",fps:60,drm:t}),br&&t[e(497)].videoElement&&t[e(497)][e(689)][e(448)]()[e(684)]((()=>{}))[e(476)]((()=>{}))}function Fr(t,e,i){const n=gr;if(t[n(497)][n(471)]&&"clear"===t.config[n(471)][n(619)])return null==i||i[n(632)](e),!1;const r=Date[n(591)]();if(e.type===n(611)){const i=s[n(600)];++t[n(521)]<(i?Number[n(478)]:5)&&(console[n(556)]((new Date)[n(552)]().slice(11,-1)+" "+e[n(580)]+", "+(e[n(496)].byteLength+n(455)+t[n(497)][n(689)][n(625)])),i&&1===t[n(521)]&&function(t,e,i){void 0===e&&(e=64),void 0===i&&(i=64);const s=gr,n=new j(t[s(496)]);let r="",o=0;for(let t=0;t<e&&t<n[s(584)];++t)r+=(n[t]<16?"0":"")+n[t].toString(16)+" ";if(o<n[s(584)])for(o<n[s(584)]-i&&(r+=s(532),o=n[s(584)]-i);o<n[s(584)];o++)r+=(n[o]<16?"0":"")+n[o][s(621)](16)+" ";console.info("["+((t[s(580)]||s(463))+s(561))+s(569)+r[s(472)]())}(e,128,8)),t[n(608)]=!1,t[n(624)]=0,t[n(571)]=r+t[n(509)]}return t[n(624)]+=e.data[n(523)],!t[n(608)]&&t[n(624)]>xr&&(console[n(556)](n(585)),t[n(608)]=!0),t.jmuxer&&(function(t,e){const i=gr;0===t[i(652)]&&(t[i(652)]=e[i(667)],t[i(509)]=Rr,t[i(571)]=Date[i(591)]()+2e3);let n=null,r=!1;if(e.data[i(523)]<=4)console[i(495)](i(613)),r=!0;else{const s=new j(e[i(496)],0,4);0!=s[0]||0!=s[1]||0!=s[2]||1!=s[3]?(console[i(495)](i(489)),r=!0):(n=function(t,e){const i=Zn,s=new DataView(t[i(335)]),n=t.data[i(346)]-2,r=s[i(340)](n);if(r<n){let t=n-r;if(69!==s[i(337)](n-1))return console[i(341)](i(339)),null;if(s.getUint8(t++)>>>4!=1)return console[i(341)](i(329)),null;const o=new j(r-2);let h=0,a=0;for(;t<n-1;){let e=s.getUint8(t++);a>1&&3===e&&(a=0,e=s.getUint8(t++)),0!==e?a=0:++a,o[h++]=e}const u=new DataView(o[i(343)]),c=e===i(327)?16:0,l=c+2+6*u.getUint16(c);return l+2>h?(console.error(i(325)),null):{sai:o[i(345)](0,l),offset:n-r,seq:u.getUint16(l)}}return null}(e,t[i(497)][i(471)][i(619)]),!n&&(console.warn(i(636)),r=!0))}if(n)if(-1===t[i(597)]){if(e[i(580)]!==i(611))return 0;t[i(597)]=n[i(547)]}else{let o=n.seq-t[i(597)];if(o<-32767&&(o+=65536),o<=0)return s[i(600)]&&console[i(495)](i(654)+t[i(597)]+", curr: "+n[i(547)]),0;o>1&&(r=e[i(580)]!==i(611),console[i(495)](i(570)+t[i(597)]+i(502)+n[i(547)]+i(541)+r)),t.prevSeqNum=n[i(547)]}let o=0;r&&!t[i(664)][i(458)]&&(o=-1,t[i(664)][i(644)]());const h=(e[i(667)]-t[i(652)])/9e4;return n&&t[i(664)][i(522)]({video:new j(e.data,0,n[i(456)]),videoSampleAuxInfo:n[i(612)],timestamp:h})<0&&(o=-1,console[i(495)](i(573)),Or(t)),o>=0&&"key"===e[i(580)]&&(t[i(596)]=h,console[i(483)]((new Date)[i(552)]()[i(559)](11,-1)+" kf at "+h+", playback at "+t[i(497)].videoElement[i(625)])),o}(t,e)<0?t[n(608)]=!0:function(t){const e=gr,i=t.config[e(689)];if(!i||i[e(501)][e(584)]<1||i[e(505)]||i[e(625)]<Ir)return;const n=t[e(497)].mediaBufferMs;if(void 0===n||n<0)throw new g("targetLatency not set!");const r=i[e(501)][e(565)](i[e(501)][e(584)]-1),o=1e3*(r-i[e(625)])|0;if(!t[e(649)]&&function(t,e,i){const s=gr;let n;n=e<3*i>>>2?.875:e<=i?1:e<7*i>>>2?1.125:e<9*i>>>2?1.25:e<11*i>>>2?1.375:1.5,n!==t.playbackRate&&(t[s(606)]=n)}(i,o,n),!(o<n+50||o<5*n>>>2))if(t.lastKeyFrameTime>i[e(625)]+.1){const o=1e3*(r-t[e(596)])|0;o>40&&o>n-100?(s[e(600)]&&console.info((new Date).toISOString().slice(11,-1)+e(598)+(i[e(625)]+e(592)+t[e(596)]+" (")+(t.lastKeyFrameTime-i[e(625)])+")"),i[e(625)]=t[e(596)]):console[e(483)]((new Date)[e(552)]().slice(11,-1)+e(534)+o)}else!t[e(608)]&&Date[e(591)]()>t[e(571)]&&o>n+100&&o>3*n>>>1&&(s[e(600)]&&console[e(556)]((new Date).toISOString()[e(559)](11,-1)+e(490)+o+" ms)"),t[e(608)]=!0,t[e(509)]<16e3&&(t[e(509)]<<=1))}(t)),i?(!t[n(608)]||!Er)&&(e[n(496)]=function(t){return!Yn&&function(){const t=zn;Yn=new j([0,0,0,1,65,154,255,255]).buffer,qn[t(303)](new j([0,0,0,1,39,100,0,13,172,87,5,6,100,0,0,0,1,40,238,60,176,0,0,0,1,37,184,32,0,203,255,38,29,217,24,192,161,96,0,0,12,229,174,166,6,7,20,3,84,0,247,96,193,181,229,128,0,32,32])[t(306)]),qn[t(303)](qn[0][t(299)](0)),new j(qn[1]).set([16,0,50],27)}(),t?Yn:(Kn^=1,qn[Kn])}(t[n(608)]),i[n(632)](e)):t[n(608)]!=t[n(445)]&&(t.worker&&t[n(544)][n(660)](t[n(608)]),t[n(445)]=t[n(608)]),t[n(608)]}function Vr(t,e){const i=pr();return(Vr=function(t,e){return i[t-=445]})(t,e)}function Wr(t,e,i){const s=gr;return t[s(497)][s(463)]&&t[s(497)].audio[s(619)]!==s(670)?e[s(496)][s(523)]>0&&function(t,e){const i=gr;var s;if(!t.jmuxer||t[i(538)])return 0;0===t[i(650)]&&(t[i(650)]=e[i(667)]);const n=(e[i(667)]-t.audioStartTimestamp)/48e3;if("cbcs"===(null===(s=t.config[i(463)])||void 0===s?void 0:s[i(619)]))return t[i(664)][i(522)]({audio:new j(e[i(496)]),timestamp:n});const r=function(t){const e=Zn,i=new DataView(t.data),s=t.data[e(346)]-2,n=i.getUint16(s);if(n<s){let t=s-n;if(69!==i[e(337)](s-1))return console[e(341)](e(339)),null;if(i[e(337)](t++)>>>4!=1)return console[e(341)](e(329)),null;const r=new j(n-2);let o=0;for(;t<s-1;){const s=i[e(337)](t++);if(r[o++]=s,o>=16)break}return{sai:r,offset:s-n}}return null}(e);r?t[i(664)][i(522)]({audio:new j(e[i(496)],0,r[i(456)]),audioSampleAuxInfo:r[i(612)],timestamp:n}):console[i(511)]("SampleAuxInfo extraction failed (audio)")}(t,e):i&&i[s(632)](e),!1}function Ur(t){const e=gr;if(!t||typeof t!==e(692))throw new b("Invalid config argument type, DRM config must be an object.");if(!(t[e(689)]instanceof HTMLVideoElement))throw new b(e(633));if(t[e(628)]&&!(t.audioElement instanceof HTMLMediaElement))throw new b(e(693));if(void 0!==t[e(482)]&&!Number[e(555)](t[e(482)]))throw new b(e(460));let i=!1,n=!1,r=!1;const o=["cbcs",e(668),e(670)],h=["SW","HW"];for(const s of[t[e(471)],t[e(463)]])if(s){if(!o[e(557)](s[e(619)]))throw new RangeError("DRM config encryption value must be one of: "+o[e(593)](", "));if(br&&"cenc"===s.encryption)throw new RangeError(e(688));if(s[e(619)]!==e(670)){if(n=!0,s.keyId){if(!(s[e(646)]instanceof j)||16!==s.keyId[e(584)])throw new b("DRM config keyId must be an instance of 16-byte long Uint8Array.");r=!0}else if(br)throw new ReferenceError(e(655));if(s.iv&&(!(s.iv instanceof j)||16!==s.iv.length))throw new b(e(618));if(s[e(554)]&&!h[e(557)](s.robustness))throw new RangeError(e(658)+h[e(593)](", "));if(s===t[e(471)]&&s[e(484)]!==e(537))throw new RangeError(e(615));br&&s===t.audio&&"opus"===s.codec&&(i=!0,console.warn("Safari does not support Opus, audio will not be rendered.")),"PlayReady"===t[e(580)]&&(s[e(619)]!==e(668)&&console[e(495)](e(491)+s[e(619)]+"', it's safer to use 'cbcs' instead."),void 0===t.sessionId||t.sessionId[e(557)]("f1")||console.warn(e(674)+t.sessionId+e(643)))}}if(n){const i=[Gn[e(558)],Gn.Staging,Gn[e(665)]];if(!i.includes(t[e(526)]))throw new RangeError(e(583)+i.join(", "));if(t[e(462)]&&typeof t[e(462)]!==e(533))throw new b("Invalid authToken type ("+typeof t[e(462)]+e(530));if(t.type)if(br){if(t[e(580)]!==e(575))throw new RangeError(e(514)+t[e(580)]+"). Safari only supports FairPlay.")}else if(Sr){if(t.type!==e(459)&&"ClearKey"!==t[e(580)])throw new RangeError("Invalid DRM type ("+t.type+e(675))}else if(Ar&&t[e(580)]!==e(566)&&"Widevine"!==t[e(580)]&&"ClearKey"!==t[e(580)])throw new RangeError(e(514)+t.type+e(648))}void 0!==t.debugLog&&(s[e(600)]=t.debugLog),void 0!==t[e(446)]&&(s[e(517)]=t[e(446)]);let a=Dr.get(t[e(689)]);!a&&(a=new Pr(t),Dr[e(494)](t[e(689)],a)),a.enabled=n,a[e(538)]=i,a[e(649)]=!i&&a[e(497)][e(463)]&&a[e(497)].audio.encryption!==e(670),n&&(a[e(497)].type||(a[e(497)][e(580)]=e(br?575:459)),r||a[e(497)][e(580)]===e(549)||(a[e(497)][e(580)]=e(549)),Br(a),function(t){en(this,void 0,void 0,(function*(){const e=Vr;var i,n;let r=t[e(497)][e(689)];if((!t[e(497)][e(471)]||t[e(497)][e(471)].encryption===e(670))&&(r=t[e(497)][e(628)]),!r)throw new g(e(492));r.src="",r[e(588)]=null,yield r.setMediaKeys(null);let o=null;try{o=yield Bl[e(528)](t[e(503)],t.emeConfig)}catch(t){}if(!o&&t[e(669)][0]){const s=null===(i=t[e(669)][0][e(647)])||void 0===i?void 0:i[e(553)](e(659));if(void 0!==s&&s>=0){null===(n=t.emeConfig[0].sessionTypes)||void 0===n||n[e(687)](s,1);try{o=yield Bl[e(528)](t[e(503)],t[e(669)])}catch(t){}}}if(!o){const i=e(576)+t[e(503)]+e(520);return r.dispatchEvent(new CustomEvent(e(640),{detail:{message:i}})),void console[e(511)](i)}let h=null;try{h=yield o.createMediaKeys()}catch(t){}if(!h){const i=e(540)+t[e(503)]+e(520);return r[e(453)](new CustomEvent("rtcdrmerror",{detail:{message:i}})),void console[e(511)](i)}if(t.serverCertificate)s.clRtcDrmDebugLog&&console[e(556)](e(487)+t[e(546)][e(523)]+e(464)),yield h[e(594)](t[e(546)]);else if(t.serverCertificateUrl){const i={method:e(469)},n=t.serverCertificateUrl;try{const o=yield t[e(497)].onFetch?t.config[e(645)](n,i):fetch(n,i);if(!o.ok){const t=e(601)+o[e(623)];return void r[e(453)](new CustomEvent(e(640),{detail:{message:t}}))}const a=yield o[e(457)]();s.clRtcDrmDebugLog&&console[e(556)]("Fetched certificate from "+n+", "+a[e(523)]+" bytes"),yield h[e(594)](a)}catch(t){const i=t.name+": "+t[e(622)];return console.error(i),void r[e(453)](new CustomEvent(e(640),{detail:{message:i}}))}}yield r[e(500)](h),r[e(519)]("encrypted",mr),Or(t)}))}(a)),a[e(497)][e(689)][e(519)](e(448),(function(){const t=e;a[t(497)][t(689)][t(625)]>.5&&(a[t(571)]=Date.now())}))}const Gr=gr(582)+gr(587)+gr(548)+gr(653)+gr(590)+gr(620)+gr(614)+gr(504)+gr(518)+gr(452)+gr(642)+gr(686)+"meNeeded=$.data};";function Hr(t){const e=gr;if(0===Dr[e(677)])throw new b(e(550));let i;if(t&&t[e(689)])i=t[e(689)];else{if(1!==Dr.size)throw new b(e(510));i=Dr[e(638)]()[e(447)]()[e(531)]}const s=Dr[e(662)](i);if(!s){let t="";throw Dr[e(499)](((e,i)=>{t+=i.id+", "})),t=t.slice(0,-2),new b(e(486)+i.id+e(657)+t+"]")}return s}function Zr(t,e){const i=gr;if(t&&t[i(497)][i(689)]){const s=t[i(497)][i(689)];if(s[i(501)].length>0){const t=s.buffered[i(565)](s[i(501)][i(584)]-1)-s[i(625)];e.playoutDelayHint=e.jitterBufferDelayHint=e.jitterBufferTarget=t}u(Zr,1e3,t,e)}}const Xr=at.get("View");Xr.setLevel(at.DEBUG);const zr={metadata:!1,enableDRM:!1,disableVideo:!1,disableAudio:!1,peerConfig:{autoInitStats:!0,statsIntervalMs:1e3}};t.Director=Ps,t.Logger=at,t.PeerConnection=rs,t.Publish=class extends Zs{async connect(t){void 0===t&&(t=Js);const e=Gs.object({sourceId:Gs.string(),stereo:Gs.boolean(),dtx:Gs.boolean(),absCaptureTime:Gs.boolean(),dependencyDescriptor:Gs.boolean(),mediaStream:Gs.alternatives().try(Gs.array().items(Gs.object()),Gs.object()),bandwidth:Gs.number(),metadata:Gs.boolean(),disableVideo:Gs.boolean(),disableAudio:Gs.boolean(),codec:Gs.string().valid(...w.values(Ji)),simulcast:Gs.boolean(),scalabilityMode:Gs.string(),peerConfig:Gs.object(),record:Gs.boolean(),events:Gs.array().items(Gs.string().valid("active","inactive","viewercount")),priority:Gs.number()}),{error:i,value:s}=e.validate(t);i&&Qs.warn(i,s),this.options=v(d(d({},Js),t),{peerConfig:d(d({},Js.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.options.metadata=this.options.metadata&&this.options.codec===Ji.H264&&!this.options.disableVideo,await this.initConnection({migrate:!1})}async reconnect(t){var e,i;this.options.mediaStream=null!=(i=null==(e=this.webRTCPeer)?void 0:e.getTracks())?i:this.options.mediaStream,super.reconnect(t)}async replaceConnection(){var t,e;Qs.info("Migrating current connection"),this.options.mediaStream=null!=(e=null==(t=this.webRTCPeer)?void 0:t.getTracks())?e:this.options.mediaStream,await this.initConnection({migrate:!0})}async record(){var t;this.recordingAvailable?(this.options.record=!0,await(null==(t=this.signaling)?void 0:t.cmd("record")),Qs.info("Broadcaster start recording")):Qs.error("Record not available")}async unrecord(){var t;this.recordingAvailable?(this.options.record=!1,await(null==(t=this.signaling)?void 0:t.cmd("unrecord")),Qs.info("Broadcaster stop recording")):Qs.error("Unrecord not available")}stop(){var t;super.stop(),null==(t=this.worker)||t.terminate(),this.worker=null}async initConnection(t){var e,i;let s,n;if(Qs.debug("Broadcast option values: ",this.options),this.stopReconnection=!1,!this.options.mediaStream)throw Qs.error("Error while broadcasting. MediaStream required"),new g("MediaStream required");if(!t.migrate&&this.isActive())throw Qs.warn("Broadcast currently working"),new g("Broadcast currently working");try{n=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==n?void 0:n.iceServers,this.options.peerConfig.encodedInsertableStreams=this.options.metadata}catch(t){throw Qs.error("Error generating token."),t instanceof Es&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!n)throw Qs.error("Error while broadcasting. Publisher data required"),new g("Publisher data required");const r=Fs(n.jwt);if(this.streamName=r.millicast.streamName,this.recordingAvailable=r[Ws.atob("bWlsbGljYXN0")].record,this.options.record&&!this.recordingAvailable)throw Qs.error("Error while broadcasting. Record option detected but recording is not available"),new g("Record option detected but recording is not available");const o=new Ss({streamName:this.streamName,url:"".concat(n.urls[0],"?token=").concat(n.jwt)}),h=t.migrate?new rs:this.webRTCPeer;await h.createRTCPeer(this.options.peerConfig,es),null==(e=this.stopReemitingWebRTCPeerInstanceEvents)||e.call(this),null==(i=this.stopReemitingSignalingInstanceEvents)||i.call(this),this.stopReemitingWebRTCPeerInstanceEvents=Pt(h,this,[ss.connectionStateChange]),this.stopReemitingSignalingInstanceEvents=Pt(o,this,[As]);const a=h.getRTCLocalSDP(this.options),u=o.connect();s=await Promise.all([a,u]);const c=s[0];this.options.metadata&&(this.worker||(this.worker=new js),this.getRTCPeerConnection().getSenders().forEach((t=>{if(qs)t.transform=new RTCRtpScriptTransform(this.worker,{name:"senderTransform",codec:this.options.codec});else if(zs){const{readable:e,writable:i}=t.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-sender",codec:this.options.codec,readable:e,writable:i},[e,i])}})));let l=this.signaling;this.signaling=o;const d=this.signaling.publish(c,this.options),f=h.peer.setLocalDescription(h.sessionDescription);s=await Promise.all([d,f]);let _=s[0];!this.options.disableVideo&&this.options.bandwidth>0&&(_=h.updateBandwidthRestriction(_,this.options.bandwidth)),await h.setRTCRemoteSDP(_),Qs.info("Broadcasting to streamName: ",this.streamName);let v=this.webRTCPeer;this.webRTCPeer=h,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ss.connectionStateChange,(t=>{var e,i;["connected","disconnected","failed","closed"].includes(t)&&(null==(e=null==l?void 0:l.close)||e.call(l),null==(i=null==v?void 0:v.closeRTCPeer)||i.call(v),l=v=null)}))}sendMetadata(t,e){var i;if(void 0===e&&(e="d40e38ea-d419-4c62-94ed-20ac37b4e4fa"),null!=(i=this.options)&&i.metadata&&this.worker)this.worker.postMessage({action:"metadata-sei-user-data-unregistered",uuid:e,payload:t});else{let t="Could not send metadata due to:";this.options?this.options.metadata?this.worker||(t+="\n- Stream not being published."):(t+="\n- Metadata option is not enabled.",this.options.codec!==Ji.H264&&(t+="\n- Incompatible codec. Only H264 available."),this.options.disableVideo&&(t+="\n- Video disabled.")):t+="\n- Stream not being published.",Qs.warn(t)}}constructor(t,e,i=!0){t&&Qs.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,e,Qs,i)}},t.Signaling=Ss,t.View=class extends Zs{async connect(t){void 0===t&&(t=zr),this.options=v(d(d({},zr),t),{peerConfig:d(d({},zr.peerConfig),t.peerConfig),setSDPToPeer:!1}),this.eventQueue.length=0,await this.initConnection({migrate:!1})}async select(t){void 0===t&&(t={}),Xr.debug("Viewer select layer values: ",t),await this.signaling.cmd("select",{layer:t}),Xr.info("Connected to streamName: ",this.streamName)}async addRemoteTrack(t,e){Xr.info("Viewer adding remote track",t);const i=await this.webRTCPeer.addRemoteTrack(t,e);for(const t of e)t.addTrack(i.receiver.track);return i}async project(t,e){for(const t of e){if(!t.trackId&&!t.media)throw Xr.error("Error in projection mapping, trackId or mediaId must be set"),new g("Error in projection mapping, trackId or mediaId must be set");const e=this.webRTCPeer.getRTCPeer();if(t.mediaId&&!e.getTransceivers().find((e=>e.mid===t.mediaId.toString())))throw Xr.error("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers")),new g("Error in projection mapping, ".concat(t.mediaId," mid not found in local transceivers"))}Xr.debug("Viewer project source: layer mappings: ",t,e),await this.signaling.cmd("project",{sourceId:t,mapping:e}),Xr.info("Projection done")}async unproject(t){Xr.debug("Viewer unproject mediaIds: ",t),await this.signaling.cmd("unproject",{mediaIds:t}),Xr.info("Unprojection done")}async replaceConnection(){Xr.info("Migrating current connection"),await this.initConnection({migrate:!0})}stop(){var t,e;super.stop(),null==(t=this.drmOptionsMap)||t.clear(),this.DRMProfile=null,null==(e=this.worker)||e.terminate(),this.worker=null,this.payloadTypeCodec={},this.tracksMidValues={},this.eventQueue.length=0}async initConnection(t){var e;let i,s;if(Xr.debug("Viewer connect options values: ",this.options),this.stopReconnection=!1,!t.migrate&&this.isActive())throw Xr.warn("Viewer currently subscribed"),new g("Viewer currently subscribed");try{s=await this.tokenGenerator(),this.options.peerConfig.iceServers=null==s?void 0:s.iceServers,this.options.peerConfig.encodedInsertableStreams=zs&&(this.options.enableDRM||this.options.metadata)}catch(t){throw Xr.error("Error generating token."),t instanceof Es&&(401!==t.status&&this.autoReconnect?this.reconnect():this.stopReconnection=!0),t}if(!s)throw Xr.error("Error while subscribing. Subscriber data required"),new g("Subscriber data required");const n=Fs(s.jwt);this.streamName=n.millicast.streamName;const r=new Ss({streamName:this.streamName,url:"".concat(s.urls[0],"?token=").concat(s.jwt)});s.subscriberToken&&(this.subscriberToken=s.subscriberToken);const o=t.migrate?new rs:this.webRTCPeer;await o.createRTCPeer(this.options.peerConfig),null==(e=this.stopReemitingWebRTCPeerInstanceEvents)||e.call(this),this.stopReemitingWebRTCPeerInstanceEvents=Pt(o,this,w.values(ss).filter((t=>t!==ss.track))),this.options.metadata&&(this.worker||(this.worker=new js),this.worker.onmessage=t=>{if("metadata"===t.data.event){const e=new TextDecoder,i=t.data.metadata;if(i.mid=t.data.mid,i.track=this.tracksMidValues[t.data.mid],i.uuid){const t=i.uuid;i.uuid=t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),""),i.uuid=i.uuid.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")}if(i.timecode&&(i.timecode=new Date(e.decode(i.timecode))),i.unregistered){const t=e.decode(i.unregistered);try{const e=JSON.parse(t);i.unregistered=e}catch(t){Xr.info("The content could not be converted to JSON, returning raw bytes instead")}}this.emit("metadata",i),this.emit("onMetadata",i)}}),o.on(ss.track,(t=>{this.isMainStreamActive?this.onTrackEvent(t):this.eventQueue.push(t)})),r.on(As,(async t=>{if(this.isMainStreamActive||"active"!==t.name)"inactive"===t.name&&this.isMainStreamActive&&this.mainSourceId===t.data.sourceId&&(this.isMainStreamActive=!1),this.emit(As,t);else{if(this.mainSourceId=t.data.sourceId,!this.DRMProfile&&t.data.encryption){const t=await this.tokenGenerator();t.drmObject&&(this.DRMProfile=t.drmObject)}for(this.emit(As,t),this.isMainStreamActive=!0;this.eventQueue.length>0;)this.onTrackEvent(this.eventQueue.shift())}}));const h=o.getRTCLocalSDP(v(d({},this.options),{stereo:!0})),a=r.connect();i=await Promise.all([h,a]);const c=i[0];let l=this.signaling;this.signaling=r;const f=this.signaling.subscribe(c,v(d({},this.options),{vad:this.options.multiplexedAudioTracks>0})),_=o.peer.setLocalDescription(o.sessionDescription);i=await Promise.all([f,_]);const m=i[0];this.payloadTypeCodec=ji.getCodecPayloadType(m),await o.setRTCRemoteSDP(m),Xr.info("Connected to streamName: ",this.streamName);let p=this.webRTCPeer;this.webRTCPeer=o,this.setReconnect(),t.migrate&&this.webRTCPeer.on(ss.connectionStateChange,(t=>{var e,i;"connected"===t?u((()=>{var t,e;null==(t=null==l?void 0:l.close)||t.call(l),null==(e=null==p?void 0:p.closeRTCPeer)||e.call(p),l=p=null,Xr.info("Current connection migrated")}),1e3):["disconnected","failed","closed"].includes(t)&&(null==(e=null==l?void 0:l.close)||e.call(l),null==(i=null==p?void 0:p.closeRTCPeer)||i.call(p),l=p=null)}))}onTrackEvent(t){var e,i,n;if(this.tracksMidValues[null==(e=t.transceiver)?void 0:e.mid]=t.track,this.isDRMOn){const e=t.transceiver.mid,i=this.getDRMConfiguration(e);try{!function(t,e){const i=gr;var n,r;const o=t[i(629)][i(524)];"video"===o&&(t[i(661)][i(475)]=t[i(661)][i(451)]=t[i(661)][i(605)]=0);const h=Hr(e),a=h[i(497)].videoElement,u=h[i(497)][i(628)];if(h[i(607)]){if(h[i(497)].customTransform)s.clRtcDrmDebugLog&&console[i(556)](i(468)+i(572));else if(s[i(600)]&&console[i(556)](i(467)+(i(wr?589:609)+i(617))),wr){if(h[i(544)]=function(t){const e=gr,i=s[e(493)]||s[e(488)],n=s[e(666)],r=s[e(586)];if(!(i&&n&&r&&t))return null;const o=new n([t]);return new r(i[e(631)](o))}(Gr),null==h[i(544)])throw new g(i(539));h[i(544)][i(485)]=t=>{const e=i;t[e(496)][e(567)]===e(471)?Fr(h,t[e(496)].frame,null):Wr(h,t[e(496)][e(651)],null)},t[i(661)].transform=new RTCRtpScriptTransform(h.worker,{operation:o})}else{const e=o===i(471)?Fr:Wr,s={drm:h,transform:(t,i)=>{e(h,t,i)}},n=t.receiver.createEncodedStreams(),r=new TransformStream({transform:s.transform[i(656)](s)}),{readable:a,writable:u}=n;a[i(577)](r)[i(635)](u)}if("audio"===o&&(null===(n=h[i(497)][i(463)])||void 0===n?void 0:n.encryption)===i(670)){if(!u)return void console.warn(i(690));u[i(588)]!==t[i(481)][0]&&(u[i(588)]=t[i(481)][0]),h[i(497)].videoElement&&(t[i(661)][i(475)]=t[i(661)].jitterBufferDelayHint=t[i(661)][i(605)]=h[i(497)][i(482)],Zr(h,t[i(661)]))}else"video"===o&&"clear"===(null===(r=h.config[i(471)])||void 0===r?void 0:r[i(619)])&&a[i(588)]!==t[i(481)][0]&&(a.srcObject=t.streams[0])}else a[i(588)]!==t[i(481)][0]&&(a.srcObject=t[i(481)][0])}(t,i)}catch(t){Xr.error("Failed to apply DRM on media Id:",e,"error is: ",t),this.emit("error",new g("Failed to apply DRM on media Id: "+e+" error is: "+t))}this.worker||(this.worker=new js),this.worker.addEventListener("message",(t=>{"complete"===t.data.event&&function(t,e,i){const s=gr,n=Hr(i);t[s(580)]?Fr(n,t,e):Wr(n,t,e)}(t.data.frame,null,i)}))}if(this.options.metadata)if(qs)t.receiver.transform=new RTCRtpScriptTransform(this.worker,{name:"receiverTransform",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(i=t.transceiver)?void 0:i.mid});else if(zs){const{readable:e,writable:i}=t.receiver.createEncodedStreams();this.worker.postMessage({action:"insertable-streams-receiver",payloadTypeCodec:d({},this.payloadTypeCodec),codec:this.options.metadata&&"h264",mid:null==(n=t.transceiver)?void 0:n.mid,readable:e,writable:i},[e,i])}this.emit(ss.track,t)}getDRMConfiguration(t){return this.drmOptionsMap?this.drmOptionsMap.get(t):null}async onRtcDrmFetch(t,e){return e.headers||(e.headers=new Headers),e.headers.get("x-dt-custom-data")&&e.headers.delete("x-dt-custom-data"),this.subscriberToken?e.headers.append("Authorization","Bearer ".concat(this.subscriberToken)):Xr.warn("onRtcDrmFetch: no subscriberToken"),fetch(t,e)}configureDRM(t){if(!t)throw new g("Required DRM options is not provided");this.drmOptionsMap||(this.drmOptionsMap=new Map);const e={merchant:"dolby",environment:Gn.Production,customTransform:this.options.metadata,videoElement:t.videoElement,audioElement:t.audioElement,video:{codec:"H264",encryption:"cbcs",keyId:$s(t.videoEncryptionParams.keyId),iv:$s(t.videoEncryptionParams.iv)},audio:{codec:"opus",encryption:"clear"},onFetch:this.onRtcDrmFetch.bind(this)};t.mediaBufferMs&&(e.mediaBufferMs=t.mediaBufferMs),this.DRMProfile&&(this.DRMProfile.playReadyUrl&&(e.prLicenseUrl=this.DRMProfile.playReadyUrl),this.DRMProfile.widevineUrl&&(e.wvLicenseUrl=this.DRMProfile.widevineUrl),this.DRMProfile.fairPlayUrl&&(e.fpsLicenseUrl=this.DRMProfile.fairPlayUrl),this.DRMProfile.fairPlayCertUrl&&(e.fpsCertificateUrl=this.DRMProfile.fairPlayCertUrl));try{Ur(e),this.drmOptionsMap.set(t.videoMid,e),t.audioMid&&this.drmOptionsMap.set(t.audioMid,e),e.videoElement.addEventListener("rtcdrmerror",(t=>{Xr.error("DRM error: ",t.detail.message,"in video element:",e.videoElement.id),this.emit("error",new g(t.detail.message))}))}catch(e){Xr.error("Failed to configure DRM with options:",t,"error is:",e)}}removeDRMConfiguration(t){var e;null==(e=this.drmOptionsMap)||e.delete(t)}get isDRMOn(){return!!this.drmOptionsMap&&this.drmOptionsMap.size>0}exchangeDRMConfiguration(t,e){const i=this.getDRMConfiguration(t),s=this.getDRMConfiguration(e);if(null===i)throw new g("No DRM configuration found for "+t);if(null===s)throw new g("No DRM configuration found for "+e);tn(i.video,s.video,"keyId"),tn(i.video,s.video,"iv");try{Ur(i)}catch(t){Xr.error("Failed to configure DRM with options:",i,"error is:",t)}try{Ur(s)}catch(t){Xr.error("Failed to configure DRM with options:",s,"error is:",t)}}constructor(t,e,i=null,s=!0){t&&Xr.warn("The streamName property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, set via token generator"),super(null,e,Xr,s),this.payloadTypeCodec={},this.tracksMidValues={},this.drmOptionsMap=null,this.eventQueue=[],this.isMainStreamActive=!1,i&&(this.on(ss.track,(t=>{i.srcObject=t.streams[0]})),Xr.warn("The mediaElement property has been deprecated. In a future release, this will be removed. Please do not rely on this value. Instead, do this in either the `track` or the `active` broadcast event."))}},w.defineProperty(t,Po.toStringTag,{value:"Module"})}))})),Kl=lr((t=>{"use strict";function e(){const t=Yl();return e=function(){return t},t}r(),w.defineProperty(t,"__esModule",{value:!0}),function(t,e){for(var i in e)w.defineProperty(t,i,{enumerable:!0,get:e[i]})}(t,{Director:function(){return e().Director},View:function(){return e().View}})})),Ql=lr(((t,e)=>{r(),e.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Jl=lr(((t,e)=>{r(),e.exports=function(t,e){var i=e[0],s=e[1],n=e[2],r=e[3],o=i+i,h=s+s,a=n+n,u=i*o,c=s*o,l=s*h,d=n*o,f=n*h,_=n*a,v=r*o,m=r*h,g=r*a;return t[0]=1-l-_,t[1]=c+g,t[2]=d-m,t[3]=0,t[4]=c-g,t[5]=1-u-_,t[6]=f+v,t[7]=0,t[8]=d+m,t[9]=f-v,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),$l=lr(((t,e)=>{r(),e.exports=function(t,e,i){var s,n,r,o=i[0],h=i[1],a=i[2],u=_.sqrt(o*o+h*h+a*a);if(_.abs(u)<1e-6)return null;return o*=u=1/u,h*=u,a*=u,s=_.sin(e),n=_.cos(e),r=1-n,t[0]=o*o*r+n,t[1]=h*o*r+a*s,t[2]=a*o*r-h*s,t[3]=0,t[4]=o*h*r-a*s,t[5]=h*h*r+n,t[6]=a*h*r+o*s,t[7]=0,t[8]=o*a*r+h*s,t[9]=h*a*r-o*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),td=lr(((t,e)=>{r(),e.exports=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}})),ed=lr(((t,e)=>{r(),e.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),id=lr(((t,e)=>{r(),e.exports=function(t,e){var i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],h=e[5],a=e[6],u=e[7],c=e[8],l=e[9],d=e[10],f=e[11],_=e[12],v=e[13],m=e[14],g=e[15],p=i*h-s*o,w=i*a-n*o,y=i*u-r*o,b=s*a-n*h,A=s*u-r*h,S=n*u-r*a,T=c*v-l*_,k=c*m-d*_,E=c*g-f*_,x=l*m-d*v,R=l*g-f*v,I=d*g-f*m,C=p*I-w*R+y*x+b*E-A*k+S*T;if(!C)return null;return C=1/C,t[0]=(h*I-a*R+u*x)*C,t[1]=(n*R-s*I-r*x)*C,t[2]=(v*S-m*A+g*b)*C,t[3]=(d*A-l*S-f*b)*C,t[4]=(a*E-o*I-u*k)*C,t[5]=(i*I-n*E+r*k)*C,t[6]=(m*y-_*S-g*w)*C,t[7]=(c*S-d*y+f*w)*C,t[8]=(o*R-h*E+u*T)*C,t[9]=(s*E-i*R-r*T)*C,t[10]=(_*A-v*y+g*p)*C,t[11]=(l*y-c*A-f*p)*C,t[12]=(h*k-o*x-a*T)*C,t[13]=(i*x-s*k+n*T)*C,t[14]=(v*w-_*b-m*p)*C,t[15]=(c*b-l*w+d*p)*C,t}})),sd=lr(((t,e)=>{r(),e.exports=function(t,e,i){var s=e[0],n=e[1],r=e[2],o=e[3],h=e[4],a=e[5],u=e[6],c=e[7],l=e[8],d=e[9],f=e[10],_=e[11],v=e[12],m=e[13],g=e[14],p=e[15],w=i[0],y=i[1],b=i[2],A=i[3];return t[0]=w*s+y*h+b*l+A*v,t[1]=w*n+y*a+b*d+A*m,t[2]=w*r+y*u+b*f+A*g,t[3]=w*o+y*c+b*_+A*p,w=i[4],y=i[5],b=i[6],A=i[7],t[4]=w*s+y*h+b*l+A*v,t[5]=w*n+y*a+b*d+A*m,t[6]=w*r+y*u+b*f+A*g,t[7]=w*o+y*c+b*_+A*p,w=i[8],y=i[9],b=i[10],A=i[11],t[8]=w*s+y*h+b*l+A*v,t[9]=w*n+y*a+b*d+A*m,t[10]=w*r+y*u+b*f+A*g,t[11]=w*o+y*c+b*_+A*p,w=i[12],y=i[13],b=i[14],A=i[15],t[12]=w*s+y*h+b*l+A*v,t[13]=w*n+y*a+b*d+A*m,t[14]=w*r+y*u+b*f+A*g,t[15]=w*o+y*c+b*_+A*p,t}})),nd=lr(((t,e)=>{r(),e.exports=function(t,e,i,s,n){var r=1/_.tan(e/2),o=1/(s-n);return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*o,t[15]=0,t}})),rd=lr(((t,e)=>{r(),e.exports=function(t,e,i,s){var n,r,o,h,a,u,c,l,d,f,v,m,g,p,w,y,b,A,S,T,k,E,x,R,I=s[0],C=s[1],P=s[2],D=_.sqrt(I*I+C*C+P*P);if(_.abs(D)<1e-6)return null;I*=D=1/D,C*=D,P*=D,n=_.sin(i),r=_.cos(i),o=1-r,h=e[0],a=e[1],u=e[2],c=e[3],l=e[4],d=e[5],f=e[6],v=e[7],m=e[8],g=e[9],p=e[10],w=e[11],y=I*I*o+r,b=C*I*o+P*n,A=P*I*o-C*n,S=I*C*o-P*n,T=C*C*o+r,k=P*C*o+I*n,E=I*P*o+C*n,x=C*P*o-I*n,R=P*P*o+r,t[0]=h*y+l*b+m*A,t[1]=a*y+d*b+g*A,t[2]=u*y+f*b+p*A,t[3]=c*y+v*b+w*A,t[4]=h*S+l*T+m*k,t[5]=a*S+d*T+g*k,t[6]=u*S+f*T+p*k,t[7]=c*S+v*T+w*k,t[8]=h*E+l*x+m*R,t[9]=a*E+d*x+g*R,t[10]=u*E+f*x+p*R,t[11]=c*E+v*x+w*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}})),od=lr(((t,e)=>{r(),e.exports=function(t,e,i){var s,n,r,o,h,a,u,c,l,d,f,_,v=i[0],m=i[1],g=i[2];e===t?(t[12]=e[0]*v+e[4]*m+e[8]*g+e[12],t[13]=e[1]*v+e[5]*m+e[9]*g+e[13],t[14]=e[2]*v+e[6]*m+e[10]*g+e[14],t[15]=e[3]*v+e[7]*m+e[11]*g+e[15]):(s=e[0],n=e[1],r=e[2],o=e[3],h=e[4],a=e[5],u=e[6],c=e[7],l=e[8],d=e[9],f=e[10],_=e[11],t[0]=s,t[1]=n,t[2]=r,t[3]=o,t[4]=h,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*v+h*m+l*g+e[12],t[13]=n*v+a*m+d*g+e[13],t[14]=r*v+u*m+f*g+e[14],t[15]=o*v+c*m+_*g+e[15]);return t}}));r();var Qa=function(t){return t[t.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",t[t.LICENSE_ERROR=2e3]="LICENSE_ERROR",t[t.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",t[t.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",t[t.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",t[t.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",t[t.SOURCE_INVALID=3e3]="SOURCE_INVALID",t[t.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",t[t.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",t[t.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",t[t.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",t[t.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",t[t.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",t[t.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",t[t.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",t[t.MEDIA_ABORTED=5004]="MEDIA_ABORTED",t[t.NETWORK_ERROR=6e3]="NETWORK_ERROR",t[t.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",t[t.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",t[t.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",t[t.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",t[t.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",t[t.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",t[t.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",t[t.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",t[t.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",t[t.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",t[t.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",t[t.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",t[t.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",t[t.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",t[t.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",t[t.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",t[t.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",t[t.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",t[t.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",t[t.AD_ERROR=1e4]="AD_ERROR",t[t.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",t[t.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",t[t.PICTURE_IN_PICTURE_ERROR=11001]="PICTURE_IN_PICTURE_ERROR",t[t.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",t[t.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",t[t.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",t[t.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",t[t.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",t[t.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",t}({}),Ye=function(t){return t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE",t}({});!function(t){t.fromCode=function(e){const i=_.floor(e/1e3);if(i in t)return i;throw new b("Invalid error code: "+e)}}(Ye||(Ye={})),r(),r(),r(),r(),r(),r(),r(),r();var Xt=function(t){return t.Sv="web",t.Tv="android",t.Ev="android-tv",t.xv="ios",t.Rv="tvos",t.Iv="chromecast",t.Cv="theoliveweb",t}({});var D=Bl?Bl.userAgent:"",hd=D.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),ad=D.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),ud=D.match(/Android ([0-9\.]+)/i),cd=D.match(/Windows NT ([0-9\.]+)/i),ld=D.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),dd=D.match(/Firefox\/([0-9\.]+)/i),fd=D.match(/OPR\/(\d+\.\d+)/i),_d=D.match(/Tizen ([0-9\.]+)/i),vd=D.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),md=D.match(/HbbTV\/([0-9.]+)/i),gd=class{get Je(){return this.Pv}get Dv(){return this.Nv}get Mv(){return this.Lv}get Bv(){return this.Ov}get Fv(){return this.Vv}get Wv(){return this.Uv}get Gv(){return this.Hv}get Zv(){return this.Xv}get zv(){return this.qv}get Yv(){return this.Kv}get Qv(){return this.Jv}get iu(){return this.$v}get im(){return this.nm}get hm(){return this.um||this.lm}get ad(){return this.dm}get Qs(){return this.fm}get _m(){return this.vm}get gm(){return this.pm}get wm(){var t;return null!=(t=this.ym)?t:this.Am}get Sm(){return this.Tm}get Em(){var t;return(null==(t=s.chrome)?void 0:t.webview)&&this.xm>0}get Rm(){return this.xm}get Im(){return this.Cm}get Pm(){return this.Dm}get Nm(){return this.Mm}get Lm(){return this.Bm}get Om(){return this.Fm}get Vm(){return this.Wm}get Um(){return this.Gm}get Hm(){return this.Zm}get Xm(){return this.zm}get qm(){return this.Ym}get Km(){return this.jm}get Qm(){return this.Jm}get $m(){return this.eg}get rg(){return this.og}get hg(){return this.ag}get cg(){return this.dg}get fg(){return this._g}get vg(){return this.gg}get pg(){return!(!this.Nm&&!this.Im)&&this.wm<=56}get wg(){return this.yg}get Ag(){return this.Sg}get Tg(){return this.Eg}get xg(){return this.Rg}get Ig(){return this.Cg}get Pg(){return this.Dg}get Ng(){return this.Mg}get Lg(){return this.Bg}get IS_IOS_CHROME(){return this.Og}constructor(){this.Pv=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||Bl&&Bl.msMaxTouchPoints),this.Nv=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(D)||/(macintosh|mac(?=_powerpc)\s)/i.test(D),this.Lv=/Windows NT/i.test(D),this.Ov=cd?C(cd[1]):0,this.Vv=/Android/i.test(D),this.Uv=ud?C(ud[1]):0,this.Hv=/windows phone (8|8\.1)/i.test(D),this.Xv=/iPhone/i.test(D),this.qv=/iPad/i.test(D),this.Kv=this.Nv&&this.Pv&&!this.qv,this.Jv=/iPod/i.test(D),this.dm=/Mobile Safari/i.test(D),this.um=/EOS\d*STB/i.test(D),this.lm=/APP\d*STB/i.test(D),this.$v=(this.Xv||this.qv||this.Kv||this.Jv)&&!this.Hv,this.nm=vd?C(vd[2]):0,this.fm=this.Hv||this.$v||this.Vv||this.dm,this.vm=/CriOS/i.test(D),this.pm=Boolean(self.chrome&&/google/i.test(Bl.vendor))||this.vm,this.Tm=this.pm&&/Edg\//i.test(Bl.userAgent),this.xm=ad?x(ad[1],10):0,this.Og=Boolean(/CriOS/i.test(D)),this.Bg=Boolean(self.chrome||/Chrome/i.test(D)||this.Og),this.Am=hd?x(hd[1],10):0,this.Cm=/SMART-TV.*Tizen/i.test(D),this.Dm=_d?C(_d[1]):0,this.ym=this.Dm>0?function(t){return t>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0}(this.Dm):void 0,this.Mm=/webos|web0s/i.test(D),this.Bm=/HbbTV/i.test(D),this.Fm=!!md&&function(t){if(!t)return!1;let e=t.split(".").map(Number);return 3===e.length&&1===e[0]&&2===e[1]}(md[1]),this.Wm=/VIZIO/i.test(D),this.Gm=/Edge\/\d+/i.test(D),this.Zm=/Trident/i.test(D),this.zm=this.Zm&&!self.ActiveXObject&&"ActiveXObject"in self,this.Ym=/Vivaldi/i.test(D),this.jm=/Firefox/i.test(D)&&!/Seamonkey/i.test(D),this.Jm=dd?C(dd[1]):0,this.eg=/Safari/i.test(D)&&!/Chrome/i.test(D)&&!this.Hv&&!this.Cm,this.og=ld?C(ld[2]):0,this.ag=Boolean(fd),this.dg=fd?C(fd[1]):0,this._g=/CrKey/.test(D),this.gg=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(D),this.yg=/PlayStation 4/i.test(D),this.Sg="web"===Xt.Ev,this.Eg="web"===Xt.Tv,this.Rg=this.Eg||this.Sg,this.Cg="web"===Xt.xv,this.Dg="web"===Xt.Rv,this.Mg="web"===Xt.Iv}};gd.Fg=new gd;var Z=gd.Fg;r();var Fa={}.hasOwnProperty,pd={}.toString;function ji(t){return null!=t}function wd(t){return void 0===t}var Ms,rl=Array.isArray||function(t){return"[object Array]"===pd.call(t)};function lc(t){return V(t)&&Fa.call(t,"length")&&Sd(t.length)}function V(t){return"object"==typeof t&&null!==t}function yd(t){return V(t)&&t.constructor&&t.constructor===w}function Yt(t){return"string"==typeof t}function bd(t){return"boolean"==typeof t}function yt(t){return ji(t)&&"function"==typeof t.then}function Ad(t){return"[object Date]"===pd.call(t)}function Sd(t){return"number"==typeof t}function Td(t){return"function"==typeof t}function cr(t){return Td(t)||V(t)}function Gt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Sh(t){let e;for(;ji(e=t.firstChild);)t.removeChild(e)}function kd(t,e){t.insertBefore(e,t.firstChild)}function Ed(t){const e=t.className;return"string"==typeof e?e:e&&"string"==typeof e.baseVal?e.baseVal:""}function xd(t,e){const i=t.className;"string"==typeof i?t.className=e:i&&"string"==typeof i.baseVal&&(i.baseVal=e)}function Rd(t,e){return void 0!==t.classList?t.classList.contains(e):void 0!==t.className&&-1!==(" "+Ed(t)+" ").indexOf(" "+e+" ")}function Id(t,e){if(void 0!==t.classList)t.classList.add(e);else if(void 0!==t.className){const i=Ed(t);-1===(" "+i+" ").indexOf(" "+e+" ")&&xd(t,(i+" "+e).trim())}}function Cd(t,e){if(void 0!==t.classList)t.classList.remove(e);else if(void 0!==t.className){let i=" "+Ed(t)+" ";const s=" "+e+" ";for(;-1!==i.indexOf(s);)i=i.replace(s," ");xd(t,i.trim())}}function Pd(t,e,i){void 0===i&&(i=!Rd(t,e)),i?Id(t,e):Cd(t,e)}function Dd(t){t.stopPropagation()}function Nd(t,e){Z.Im&&Z.Pm<3?function(t,e){let i=e;switch(e){case"flex":i="-webkit-flex";break;case"inline-flex":i="-webkit-inline-flex"}t.display=i}(t,e):function(t,e){if(t.display=e,t.display!==e){let i=e;switch(e){case"flex":i="-ms-flexbox";break;case"inline-flex":i="-ms-inline-flexbox"}t.display=i}}(t,e)}function Md(t,e){const i=e.style;if(i)for(const e of w.keys(t)){const s=t[e];void 0!==s&&(i[e]=s)}}function Nh(t){const e=t.style;e.position="absolute",e.left="0",e.right="0",e.top="0",e.bottom="0",e.width="100%",e.height="100%"}function Ld(t){const e=t.style;e.position="",e.left="",e.right="",e.top="",e.bottom="",e.width="",e.height=""}function Bd(t){t.removeAttribute("title")}function Od(t){t.addEventListener("mouseover",(t=>{Bd(t.target)}))}function Fd(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}r(),r();var It=()=>{},Vd=t=>t;function Qr(t,e){let i=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=Ms.Vg();o-i>=e&&(t.apply(this,n),i=o)}}function Wd(t,e){let i=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=this;0!==i&&Ms.Wg(i),i=Ms.Ug((()=>{i=0,t.apply(o,n)}),e)}}function yl(t){let e;return()=>(void 0!==t&&(e=t(),t=void 0),e)}function Ur(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function Ud(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function Gd(){return void 0!==h?h.createElement("video"):void 0}var Hd=yl(Gd),Zd=yl((()=>"undefined"!=typeof HTMLVideoElement&&Hd()instanceof HTMLVideoElement));r(),r(),r();var Xd=null;try{Xd=new WebAssembly.Instance(new WebAssembly.Module(new j([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(y){}function fc(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function ti(t){return!0===(t&&t.Gg)}function zd(t){var e=_.clz32(t&-t);return t?31-e:e}fc.prototype.Gg,w.defineProperty(fc.prototype,"Gg",{value:!0}),fc.isLong=ti;var qd={},Yd={};function Kd(t,e){var i,s,n;return e?(n=0<=(t>>>=0)&&t<256)&&(s=Yd[t])?s:(i=_s(t,0,!0),n&&(Yd[t]=i),i):(n=-128<=(t|=0)&&t<128)&&(s=qd[t])?s:(i=_s(t,t<0?-1:0,!1),n&&(qd[t]=i),i)}function jd(t,e){if(S(t))return e?oh:Oa;if(e){if(t<0)return oh;if(t>=tf)return af}else{if(t<=-ef)return uf;if(t+1>=ef)return hf}return t<0?jd(-t,e).neg():_s(t%$d|0,t/$d|0,e)}function _s(t,e,i){return new fc(t,e,i)}fc.fromInt=Kd,fc.fromNumber=jd,fc.fromBits=_s;var Qd=_.pow;function Jd(t,e,i){if(0===t.length)throw g("empty string");if("number"==typeof e?(i=e,e=!1):e=!!e,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e?oh:Oa;if((i=i||10)<2||36<i)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw g("interior hyphen");if(0===s)return Jd(t.substring(1),e,i).neg();for(var n=jd(Qd(i,8)),r=Oa,o=0;o<t.length;o+=8){var h=_.min(8,t.length-o),a=x(t.substring(o,o+h),i);if(h<8){var u=jd(Qd(i,h));r=r.mul(u).add(jd(a))}else r=(r=r.mul(n)).add(jd(a))}return r.unsigned=e,r}function Ha(t,e){return"number"==typeof t?jd(t,e):"string"==typeof t?Jd(t,e):_s(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}fc.fromString=Jd,fc.fromValue=Ha;var $d=4294967296,tf=$d*$d,ef=tf/2,sf=Kd(1<<24),Oa=Kd(0);fc.ZERO=Oa;var oh=Kd(0,!0);fc.UZERO=oh;var nf=Kd(1);fc.ONE=nf;var rf=Kd(1,!0);fc.UONE=rf;var of=Kd(-1);fc.NEG_ONE=of;var hf=_s(-1,2147483647,!1);fc.MAX_VALUE=hf;var af=_s(-1,-1,!0);fc.MAX_UNSIGNED_VALUE=af;var uf=_s(0,-2147483648,!1);fc.MIN_VALUE=uf;var Ui=fc.prototype;Ui.toInt=function(){return this.unsigned?this.low>>>0:this.low},Ui.toNumber=function(){return this.unsigned?(this.high>>>0)*$d+(this.low>>>0):this.high*$d+(this.low>>>0)},Ui.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(uf)){var e=jd(t),i=this.div(e),s=i.mul(e).sub(this);return i.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=jd(Qd(t,6),this.unsigned),r=this,o="";;){var h=r.div(n),a=(r.sub(h.mul(n)).toInt()>>>0).toString(t);if((r=h).isZero())return a+o;for(;a.length<6;)a="0"+a;o=""+a+o}},Ui.getHighBits=function(){return this.high},Ui.getHighBitsUnsigned=function(){return this.high>>>0},Ui.getLowBits=function(){return this.low},Ui.getLowBitsUnsigned=function(){return this.low>>>0},Ui.getNumBitsAbs=function(){if(this.isNegative())return this.eq(uf)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},Ui.isZero=function(){return 0===this.high&&0===this.low},Ui.eqz=Ui.isZero,Ui.isNegative=function(){return!this.unsigned&&this.high<0},Ui.isPositive=function(){return this.unsigned||this.high>=0},Ui.isOdd=function(){return 1==(1&this.low)},Ui.isEven=function(){return 0==(1&this.low)},Ui.equals=function(t){return ti(t)||(t=Ha(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},Ui.eq=Ui.equals,Ui.notEquals=function(t){return!this.eq(t)},Ui.neq=Ui.notEquals,Ui.ne=Ui.notEquals,Ui.lessThan=function(t){return this.comp(t)<0},Ui.lt=Ui.lessThan,Ui.lessThanOrEqual=function(t){return this.comp(t)<=0},Ui.lte=Ui.lessThanOrEqual,Ui.le=Ui.lessThanOrEqual,Ui.greaterThan=function(t){return this.comp(t)>0},Ui.gt=Ui.greaterThan,Ui.greaterThanOrEqual=function(t){return this.comp(t)>=0},Ui.gte=Ui.greaterThanOrEqual,Ui.ge=Ui.greaterThanOrEqual,Ui.compare=function(t){if(ti(t)||(t=Ha(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Ui.comp=Ui.compare,Ui.negate=function(){return!this.unsigned&&this.eq(uf)?uf:this.not().add(nf)},Ui.neg=Ui.negate,Ui.add=function(t){ti(t)||(t=Ha(t));var e=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+h)>>>16,a+=(u+=i+o)>>>16,a+=e+r,_s((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},Ui.subtract=function(t){return ti(t)||(t=Ha(t)),this.add(t.neg())},Ui.sub=Ui.subtract,Ui.multiply=function(t){if(this.isZero())return this;if(ti(t)||(t=Ha(t)),Xd)return _s(Xd.mul(this.low,this.high,t.low,t.high),Xd.get_high(),this.unsigned);if(t.isZero())return this.unsigned?oh:Oa;if(this.eq(uf))return t.isOdd()?uf:Oa;if(t.eq(uf))return this.isOdd()?uf:Oa;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(sf)&&t.lt(sf))return jd(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*h)>>>16,u+=(c+=i*a)>>>16,c&=65535,u+=(c+=s*h)>>>16,c&=65535,u+=(c+=n*o)>>>16,u+=e*a+i*h+s*o+n*r,_s((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},Ui.mul=Ui.multiply,Ui.divide=function(t){if(ti(t)||(t=Ha(t)),t.isZero())throw g("division by zero");var e,i,s;if(Xd)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?_s((this.unsigned?Xd.div_u:Xd.div_s)(this.low,this.high,t.low,t.high),Xd.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?oh:Oa;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return oh;if(t.gt(this.shru(1)))return rf;s=oh}else{if(this.eq(uf))return t.eq(nf)||t.eq(of)?uf:t.eq(uf)?nf:(e=this.shr(1).div(t).shl(1)).eq(Oa)?t.isNegative()?nf:of:(i=this.sub(t.mul(e)),s=e.add(i.div(t)));if(t.eq(uf))return this.unsigned?oh:Oa;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=Oa}for(i=this;i.gte(t);){e=_.max(1,_.floor(i.toNumber()/t.toNumber()));for(var n=_.ceil(_.log(e)/_.LN2),r=n<=48?1:Qd(2,n-48),o=jd(e),h=o.mul(t);h.isNegative()||h.gt(i);)h=(o=jd(e-=r,this.unsigned)).mul(t);o.isZero()&&(o=nf),s=s.add(o),i=i.sub(h)}return s},Ui.div=Ui.divide,Ui.modulo=function(t){return ti(t)||(t=Ha(t)),Xd?_s((this.unsigned?Xd.rem_u:Xd.rem_s)(this.low,this.high,t.low,t.high),Xd.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},Ui.mod=Ui.modulo,Ui.rem=Ui.modulo,Ui.not=function(){return _s(~this.low,~this.high,this.unsigned)},Ui.countLeadingZeros=function(){return this.high?_.clz32(this.high):_.clz32(this.low)+32},Ui.clz=Ui.countLeadingZeros,Ui.countTrailingZeros=function(){return this.low?zd(this.low):zd(this.high)+32},Ui.ctz=Ui.countTrailingZeros,Ui.and=function(t){return ti(t)||(t=Ha(t)),_s(this.low&t.low,this.high&t.high,this.unsigned)},Ui.or=function(t){return ti(t)||(t=Ha(t)),_s(this.low|t.low,this.high|t.high,this.unsigned)},Ui.xor=function(t){return ti(t)||(t=Ha(t)),_s(this.low^t.low,this.high^t.high,this.unsigned)},Ui.shiftLeft=function(t){return ti(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?_s(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):_s(0,this.low<<t-32,this.unsigned)},Ui.shl=Ui.shiftLeft,Ui.shiftRight=function(t){return ti(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?_s(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):_s(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Ui.shr=Ui.shiftRight,Ui.shiftRightUnsigned=function(t){return ti(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?_s(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):_s(32===t?this.high:this.high>>>t-32,0,this.unsigned)},Ui.shru=Ui.shiftRightUnsigned,Ui.shr_u=Ui.shiftRightUnsigned,Ui.rotateLeft=function(t){var e;return ti(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?_s(this.high,this.low,this.unsigned):t<32?(e=32-t,_s(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(e=32-(t-=32),_s(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},Ui.rotl=Ui.rotateLeft,Ui.rotateRight=function(t){var e;return ti(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?_s(this.high,this.low,this.unsigned):t<32?(e=32-t,_s(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(e=32-(t-=32),_s(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},Ui.rotr=Ui.rotateRight,Ui.toSigned=function(){return this.unsigned?_s(this.low,this.high,!1):this},Ui.toUnsigned=function(){return this.unsigned?this:_s(this.low,this.high,!0)},Ui.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Ui.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},Ui.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},fc.fromBytes=function(t,e,i){return i?fc.fromBytesLE(t,e):fc.fromBytesBE(t,e)},fc.fromBytesLE=function(t,e){return new fc(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},fc.fromBytesBE=function(t,e){return new fc(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};var vo=fc;function cf(t,e){return t.lessThan(e)?t:e}r();var Hu=9007199254740991,lf=2**-52;function Vs(t,e,i){return _.min(_.max(t,e),i)}function xs(t,e,i){return t===e||_.abs(t-e)<=i}function gh(t,e){if(t===e)return!0;const i=_.abs(t-e);if(i<lf)return!0;return i<_.max(_.abs(t),_.abs(e))*lf}function df(t,e){return t%e+(t<0?e:0)}function ff(t){return t!=t}function _f(t,e){return t===e||ff(t)&&ff(e)}function vf(t,e){let i=t,s=e;for(;0!==s;){const t=i%s;i=s,s=t}return i<0?-i:i}function mf(t,e){return t.reduce(((t,i)=>t+e(i)),0)}function gf(t){return!S(t.getTime())}function Da(){return Date.now()||(new Date).getTime()}function pf(t){return t/1e3}function Ia(t){return 1e3*t}var Si=1/6,wf=vo.fromNumber(Hu);function co(t,e){if(0===e)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(wf))return t.toNumber()/e;const i=t.divide(e),s=t.subtract(i.multiply(e));return i.toNumber()+s.toNumber()/e}var yf=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!Bl||!Bl.msMaxTouchPoints),bf=Hd(),Af=!(!bf||!bf.webkitShowPlaybackTargetPicker),Sf=class{get Hg(){return void 0===this.Zg&&(this.Zg=this.Xg()),this.Zg}Xg(){return 0}get zg(){return!Z.vg}get qg(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get Yg(){return s.devicePixelRatio||1}get Kg(){return Af}get jg(){return!1}get Qg(){return!0}get Jg(){return!(!Z.$m&&!Z.iu)||!!Z.Vm}get $g(){return Z.Vm}get tp(){return!Z.iu}get ep(){return!0}get sp(){return!0}get np(){return!1}get rp(){}get op(){return!0}get hp(){return!1}get ap(){return Z.Vm}get cp(){return!1}lp(t,e){return!0}dp(t){return t>=2*Si}constructor(){this.Zg=void 0,this.fp=!1,this.Je=yf,this.Qs=!1,this._p=!0}},Tf=class extends Sf{constructor(){super()}};r();var kf=class extends Tf{get rp(){if(Z.Dv)return 4096}lp(t,e){if(t&&t.vp&&e&&e.vp){let i=Ef(t.vp,"mp4a.40.2")&&Ef(e.vp,"mp4a.40.5"),s=Ef(t.vp,"mp4a.40.5")&&Ef(e.vp,"mp4a.40.2"),n=Ef(t.vp,"mp4a.40.2")&&Ef(e.vp,"mp4a.40.34"),r=Ef(t.vp,"mp4a.40.34")&&Ef(e.vp,"mp4a.40.2"),o=Ef(t.vp,"mp4a.40.5")&&Ef(e.vp,"mp4a.40.34"),h=Ef(t.vp,"mp4a.40.34")&&Ef(e.vp,"mp4a.40.5");return!(i||s||n||r||o||h)}return!0}};function Ef(t,e){return t.indexOf(e)>-1}r();var xf=class extends Tf{dp(t){return t>=2}};r();var Rf=class extends Tf{get cp(){return Z.rg<17}constructor(){super(),this.fp=Z.rg>=11,this._p=Z.$m&&!(Z.iu&&Z.rg<10)}};r();var If,Cf=class extends Tf{get op(){return!Z.Mv||(Z.Sm?92!==Z.Rm:Z.wm>=100)}};r(),r(),r(),r(),r();var Pf=function(){const t=Gd();if(!t)return!1;const e=t.muted;return t.muted=!e,t.muted!==e}(),Df=function(){if(Z.Yv)return!1;const t=Gd();if(!t)return!1;const e=t.volume;return t.volume=e/2+.1,e!==t.volume}();var Nf=class extends Sf{Xg(){return this.mp.Hg}get rp(){return this.mp.rp}get op(){return this.mp.op}lp(t,e){return this.mp.lp(t,e)}dp(t){return this.mp.dp(t)}get cp(){return this.mp.cp}constructor(t){super(),this.mp=t,this.fp=this.mp.fp,this.Je=this.mp.Je,this._p=Pf&&this.mp._p}},Mf=class extends Nf{get np(){return Z.iu}constructor(t){super(t),this.fp=!0,this.Qs=!0}};r();var Lf=class{gp(){return new this.pp}wp(t){return this.pp.isTypeSupported(t)}constructor(t){this.pp=Bf(t)}};function Bf(t){return t&&cr(s.ManagedMediaSource)?s.ManagedMediaSource:cr(s.MediaSource)?s.MediaSource:void 0}var Of=class extends Mf{get np(){return!0}Xg(){return Bf(!0)?super.Xg():1}};r();var Ff=class extends Nf{get jg(){return Z.Pm<3}get Qg(){return Z.Pm>=3}get qg(){return s.tizen&&!this.yp&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const e=t.resolutionWidth,i=t.resolutionHeight;1===e&&1===i||(this.yp={width:e,height:i})})),this.yp}get hp(){return Z.Pm<3}lp(t,e){return super.lp(t,e)}};r();var Vf=class extends Nf{get qg(){return s.webOS&&!this.yp&&s.webOS.deviceInfo((t=>{this.yp={width:t.screenWidth,height:t.screenHeight}})),this.yp}get ep(){return!1}};r();var Wf=class extends Nf{get np(){return!0}};!function(t){If=t}(function(){const t=function(){if(Z.Km)return new kf;if(Z.Um||Z.Hm)return new xf;if(Z.$m)return new Rf;if(Z.gm)return new Cf;return new Tf}();return Z.iu?new Of(t):Z.Qs?new Mf(t):Z.Im?new Ff(t):Z.Nm?new Vf(t):Z.Dv?new Wf(t):new Nf(t)}()),r(),r(),r();var Uf=!(Z.Hm&&!Z.Xm),Kn=self.console;function Gf(t){if(V(t))try{return JSON.stringify(t)}catch(t){}return t}function Hf(t){return t.map(Gf).join(" ")}function Zf(t){const e=Kn&&Kn[t];return e?e.bind&&Uf?e.bind(Kn):function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];Kn[t](Hf(i))}:void 0}var Xf=Zf("log")||It,ct=Zf("warn")||Xf.bind(void 0,"WARNING:"),Or=Zf("error")||Xf.bind(void 0,"ERROR:"),zf=(()=>{const t=Kn&&Kn.assert;return t?t.bind&&Uf?t.bind(Kn):function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];Kn.assert(t,Hf(i))}:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];t||Or("Assertion failed:",...i)}})();function qf(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}function Yf(t,e){var i=function(t,e){var i=t.length;if(i<=1)return t;for(var s=new Array(i),n=1;n<i;n*=2){Kf(t,e,n,s);var r=t;t=s,s=r}return t}(t,e);return i!==t&&Kf(i,null,t.length,t),t}function Kf(t,e,i,s){var n,r,o,h,a,u=t.length,c=0,l=2*i;for(n=0;n<u;n+=l)for(o=(r=n+i)+i,r>u&&(r=u),o>u&&(o=u),h=n,a=r;;)if(h<r&&a<o)e(t[h],t[a])<=0?s[c++]=t[h++]:s[c++]=t[a++];else if(h<r)s[c++]=t[h++];else{if(!(a<o))break;s[c++]=t[a++]}}r();var jf=/[a-zA-Z]/,Qf=/[0-9]/,Jf=/[0-9a-fA-F]/,$f=/^0x/i,t_=/^[0-9]+$/,e_=/^[0-9a-fA-F]+$/,i_=/^[0-7]+$/,s_=w.prototype.toString,n_=Array.isArray||function(t){return"[object Array]"===s_.call(t)},r_=void 0!==Po&&"symbol"==typeof Et;function o_(t){return n_(t)?t:Array.from(t)}function h_(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function a_(t){return t>=65&&t<=90}function u_(t){return a_(t)||function(t){return t>=97&&t<=122}(t)}function c_(t){return t>=48&&t<=57}function l_(t){return c_(t)||u_(t)}function d_(t){return c_(t)||t>=65&&t<=70||t>=97&&t<=102}function f_(t){return a_(t)?t+32:t}function __(t){return c_(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function v_(t,e){return void 0===e&&(e=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(e?87:55):-1}var m_=_.min,g_=String.fromCharCode,p_=16384;function w_(t){for(var e=t.length,i=[],s=0;s<e;s+=p_){var n=m_(s+p_,e);i.push(g_.apply(null,t.slice(s,n)))}return i.join("")}var y_=2147483647,b_=/[^\0-\x7E]/,A_=/[\x2E\u3002\uFF0E\uFF61]/g,S_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T_=_.floor,k_=String.fromCharCode;function E_(t){throw new RangeError(S_[t])}function x_(t){for(var e=[],i=0,s=t.length;i<s;){var n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){var r=t.charCodeAt(i++);56320==(64512&r)?e.push(((1023&n)<<10)+(1023&r)+65536):(e.push(n),i--)}else e.push(n)}return e}var R_,I_,fr,C_=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},P_=function(t,e,i){var s=0;for(t=i?T_(t/700):t>>1,t+=T_(t/e);t>455;s+=36)t=T_(t/35);return T_(s+36*t/(t+38))},D_=function(t){return function(t,e){var i=t.split("@"),s="";i.length>1&&(s=i[0]+"@",t=i[1]);var n=function(t,e){for(var i=[],s=t.length;s--;)i[s]=e(t[s]);return i}((t=t.replace(A_,".")).split("."),e).join(".");return s+n}(t,(function(t){return b_.test(t)?"xn--"+function(t){for(var e=[],i=(t=x_(t)).length,s=128,n=0,r=72,o=0,h=t;o<h.length;o++){var a=h[o];a<128&&e.push(k_(a))}var u=e.length,c=u;for(u&&e.push("-");c<i;){for(var l=y_,d=0,f=t;d<f.length;d++){var _=f[d];_>=s&&_<l&&(l=_)}var v=c+1;l-s>T_((y_-n)/v)&&E_("overflow"),n+=(l-s)*v,s=l;for(var m=0,g=t;m<g.length;m++){var p=g[m];if(p<s&&++n>y_&&E_("overflow"),p==s){for(var w=n,y=36;;y+=36){var b=y<=r?1:y>=r+26?26:y-r;if(w<b)break;var A=w-b,S=36-b;e.push(k_(C_(b+A%S,0))),w=T_(A/S)}e.push(k_(C_(w,0))),r=P_(n,v,c==u),n=0,++c}}++n,++s}return e.join("")}(t):t}))};function Gs(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];s>65535&&(s-=65536,e.push(s>>>10&1023|55296),s=56320|1023&s),e.push(s)}return w_(e)}function N_(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function M_(t,e){return t>>e&63|128}function L_(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(N_(t),e.push(t>>12&15|224),e.push(M_(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(M_(t,12)),e.push(M_(t,6))),e.push(63&t|128)):e.push(t)}function B_(t){for(var e=[],i=0;i<t.length;i++){L_(t[i],e)}return e}function O_(){if(fr>=I_)throw new g("Invalid byte index");var t=255&R_[fr];if(fr++,128==(192&t))return 63&t;throw new g("Invalid continuation byte")}function F_(){var t,e;if(fr>I_)throw new g("Invalid byte index");if(fr===I_)return!1;if(t=255&R_[fr],fr++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|O_())>=128)return e;throw new g("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|O_()<<6|O_())>=2048)return N_(e),e;throw new g("Invalid continuation byte")}if(240==(248&t)&&(e=(7&t)<<18|O_()<<12|O_()<<6|O_())>=65536&&e<=1114111)return e;throw new g("Invalid UTF-8 detected")}function V_(t){return[37,v_(t>>4),v_(15&t)]}function W_(t){return function(t){return t>=0&&t<=31}(t)||t>126}function U_(t){return W_(t)||32===t||34===t||60===t||62===t||96===t}function G_(t){return U_(t)||35===t||63===t||123===t||125===t}function H_(t){return G_(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function Z_(t){return t<33||t>126||34===t||35===t||60===t||62===t}function X_(t){return Z_(t)||39===t}function z_(t,e){if(!e(t))return[t];for(var i=B_([t]),s=[],n=0;n<i.length;n++){var r=i[n];s.push.apply(s,V_(r))}return s}function q_(t,e){for(var i=[],s=0,n=x_(t);s<n.length;s++){var r=n[s];i.push.apply(i,z_(r,e))}return Gs(i)}function Y_(t){return function(t){for(var e=[],i=t.length,s=0;s<i;s++){var n=t[s];if(37===n&&s+2<i&&d_(t[s+1])&&d_(t[s+2])){var r=__(t[s+1])<<4|__(t[s+2]);e.push(r),s+=2}else e.push(n)}return e}(B_(t))}function K_(t){return Gs(function(t){R_=t.slice(),I_=R_.length,fr=0;for(var e,i=[];!1!==(e=F_());)i.push(e);return i}(Y_(x_(t))))}function j_(t){var e=t.length,i=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<e&&":"===t[r]){if(!(r+1<e&&":"===t[r+1]))throw new b;r+=2,n=s+=1}for(;r<e;){if(8===s)throw new b("Too many groups");if(":"!==t[r]){for(var o=0,h=0;h<4&&r<e&&Jf.test(t[r]);)o=o<<4|x(t[r],16),r+=1,h+=1;if("."===t[r]){if(0===h)throw new b;if(r-=h,s>6)throw new b;for(var a=0;r<e;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new b;r+=1}if(!Qf.test(t[r]))throw new b;for(;r<e&&Qf.test(t[r]);){var c=x(t[r],10);if(null===u)u=c;else{if(0===u)throw new b;if((u=10*u+c)>255)throw new b}r+=1}i[s]=i[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new b;break}if(":"===t[r]){if((r+=1)===e)throw new b}else if(r<e)throw new b;i[s]=o,s+=1}else{if(null!==n)throw new b("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)h_(i,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new b;return i}function Q_(t){var e=10,i=t_;return $f.test(t)?(t=t.slice(2),e=16,i=e_):t.length>=2&&"0"===t[0]&&(t=t.slice(1),e=8,i=i_),""===t?0:i.test(t)?x(t,e):void 0}var J_={bp:4},$_=/[\0\t\n\r #%/:?@\[\\\]]/,ev=/[\0\t\n\r #/:?@\[\\\]]/;function iv(t,e){if("["===t[0]){if("]"!==t[t.length-1])throw new b("Invalid IPv6 address");return{bp:2,Ap:j_(t.slice(1,-1))}}if(!e)return function(t){if(ev.test(t))throw new b("Invalid code point in opaque host");var e=q_(t,W_);return""===e?J_:{bp:3,Sp:e}}(t);var i=function(t){var e=function(t){return D_(t.toLowerCase())}(t);return e}(K_(t));if($_.test(i))throw new b("Invalid code point in host");var s=function(t){var e=t.split(".");if(""===e[e.length-1]&&e.pop(),!(e.length>4)){for(var i=[],s=0;s<e.length;s++){var n=e[s];if(""===n)return;var r=Q_(n);if(void 0===r)return;i.push(r)}for(var o=0;o<i.length-1;o++)if(i[o]>255)throw new b;if(i[i.length-1]>=_.pow(256,5-i.length))throw new b;for(var h=i.pop(),a=0;a<i.length;a++)h+=i[a]*_.pow(256,3-a);return h}}(i);return void 0!==s?{bp:1,Ap:s}:""===i?J_:{bp:0,Tp:i}}function sv(t){switch(t.bp){case 0:return t.Tp;case 1:return function(t){for(var e=[],i=t,s=1;s<=4;s++)e.push(""+(255&i)),4!==s&&e.push("."),i>>>=8;return e.reverse().join("")}(t.Ap);case 2:return"["+function(t){for(var e="",i=function(t){for(var e=0,i=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>i&&(e=s,i=n),n=0);return n>i&&(e=s,i=n),i>1?e:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}i!==n?(e+=t[n].toString(16),7!==n&&(e+=":")):(e+=0===n?"::":":",s=!0)}return e}(t.Ap)+"]";case 3:return t.Sp;case 4:return""}}var nv=/\+/g;function rv(t){return 42===t||45===t||46===t||95===t||l_(t)}function ov(t){for(var e=t.split("&"),i=[],s=0;s<e.length;s++){var n=e[s];if(""!==n){var r=n.indexOf("="),o=void 0,h=void 0;-1!==r?(o=n.slice(0,r),h=n.slice(r+1)):(o=n,h=""),o=o.replace(nv," "),h=h.replace(nv," ");var a=K_(o),u=K_(h);i.push([a,u])}}return i}function hv(t){for(var e="",i=0;i<t.length;i++){var s=t[i];i>0&&(e+="&"),e+=av(B_(x_(s[0])))+"="+av(B_(x_(s[1])))}return e}function av(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];32===s?e.push(43):rv(s)?e.push(s):e.push.apply(e,V_(s))}return w_(e)}var uv=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function cv(t){var e=""+t,i=uv.exec(e);return i?function(t,e){for(var i=t.length,s=[],n=e;n<i;n++){var r=t.charCodeAt(n);if(dv(r))if(fv(r)||n===i-1)s.push(lv);else{var o=t.charCodeAt(n+1);fv(o)?(s.push(r,o),n++):s.push(lv)}else s.push(r)}return t.slice(0,e)+w_(s)}(e,i.index):e}var lv=65533,dv=function(t){return 55296==(63488&t)},fv=function(t){return 0!=(1024&t)};function _v(t,e){var i=t[0],s=e[0];return i===s?0:i<s?-1:1}function vv(t){t.P_.length=0}function mv(t,e){!function(t,e){for(var i=0;i<e.length;i++)t[i]=e[i];t.length=e.length}(t.P_,ov(e))}function gv(t){if(t.tc){var e=hv(t.P_);""===e&&(e=null),t.tc.tc.kp=e}}var cu=function(){function t(t){if(void 0===t&&(t=void 0),this.tc=null,null==t)this.P_=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof cu&&!!n_(t.P_)&&(!r_||t[Et]===pv)}(t))this.P_=t.P_.slice();else if(function(t){return null!=t&&(!!n_(t)||!!r_&&"function"==typeof t[Et])}(t)){this.P_=[];for(var e=0,i=o_(t);e<i.length;e++){var s=o_(i[e]);if(2!==s.length)throw new b("Invalid name-value pair");this.P_.push([cv(s[0]),cv(s[1])])}}else for(var n in this.P_=[],t)w.prototype.hasOwnProperty.call(t,n)&&this.P_.push([cv(n),cv(t[n])]);else(t=cv(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.P_=ov(t)}var e=t.prototype;return e.append=function(t,e){t=cv(t),e=cv(e),this.P_.push([t,e]),gv(this)},e.delete=function(t){t=cv(t);for(var e=this.P_,i=0;i<e.length;){e[i][0]===t?e.splice(i,1):i++}gv(this)},e.get=function(t){t=cv(t);for(var e=this.P_,i=0;i<e.length;i++){var s=e[i];if(s[0]===t)return s[1]}return null},e.getAll=function(t){t=cv(t);for(var e=this.P_,i=[],s=0;s<e.length;s++){var n=e[s];n[0]===t&&i.push(n[1])}return i},e.has=function(t){t=cv(t);for(var e=this.P_,i=0;i<e.length;i++){if(e[i][0]===t)return!0}return!1},e.set=function(t,e){t=cv(t),e=cv(e);for(var i=this.P_,s=!1,n=0;n<i.length;){var r=i[n];r[0]===t?s?i.splice(n,1):(r[1]=e,s=!0,n++):n++}s||i.push([t,e]),gv(this)},e.sort=function(){Yf(this.P_,_v),gv(this)},e.toString=function(){return hv(this.P_)},e.entries=function(){return new Av(this.P_,wv)},e.keys=function(){return new Av(this.P_,yv)},e.values=function(){return new Av(this.P_,bv)},e.forEach=function(t){var e=this;this.P_.forEach((function(i){return t(i[1],i[0],e)}))},t}(),pv=cu.prototype.entries;r_&&(cu.prototype[Et]=pv);var wv=function(t){return[t[0],t[1]]},yv=function(t){return t[0]},bv=function(t){return t[1]},Av=function(){function t(t,e){this.Ep=0,this.P_=t,this.xp=e}return t.prototype.next=function(){return this.Ep<this.P_.length?{done:!1,value:this.xp(this.P_[this.Ep++])}:{done:!0,value:void 0}},t}(),Sv="null";var Xr=w.create(null);Xr.ftp=21,Xr.file=0,Xr.gopher=70,Xr.http=80,Xr.https=443,Xr.ws=80,Xr.wss=443;var Tv=/^(?:\.|%2e)$/i,kv=/^(?:\.|%2e){2}$/i;function Ev(t){return Tv.test(t)}function xv(t){return kv.test(t)}function Rv(t){return void 0!==Xr[t]}function xi(t){return Rv(t.Rp)}function Iv(t){return""!==t.Ip||""!==t.Cp}function Cv(t){var e=t.length;if(!(e>=2))return!1;if(!Dv(t.slice(0,2)))return!1;if(2!==e){var i=t[2];if(47!==i&&92!==i&&63!==i&&35!==i)return!1}return!0}function Pv(t){return 2===t.length&&jf.test(t[0])&&(":"===t[1]||"|"===t[1])}function Dv(t){return 2===t.length&&Pv(w_(t))}function Nv(t){return Pv(t)&&":"===t[1]}function Mv(t){var e=t.Pp;0!==e.length&&("file"===t.Rp&&1===e.length&&Nv(e[0])||e.pop())}function Lv(t){return null===t.Dp||J_===t.Dp||t.Np||"file"===t.Rp}var Hs=-1,Bv=/\t|\n|\r/g,Ov=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function Fv(t,e,i,s){void 0===i&&(i=null),void 0===s&&(s=null),i||(i=new Wv,t=t.replace(Ov,""));var n=null!==s?s:0;e=e||null;for(var r=[],o=!1,h=!1,a=!1,u=x_(t=t.replace(Bv,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:Hs;switch(n){case 0:if(!u_(d)){if(null===s){r.length=0,n=2;continue}throw new b("Invalid scheme")}r.push(f_(d)),n=1;break;case 1:if(l_(d)||43===d||45===d||46===d)r.push(f_(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new b("Invalid scheme")}var f=Gs(r);if(null!==s){if(Rv(i.Rp)&&!Rv(f))return;if(!Rv(i.Rp)&&Rv(f))return;if((Iv(i)||null!==i.Mp)&&"file"===f)return;if("file"===i.Rp&&(i.Dp===J_||null===i.Dp))return}if(i.Rp=f,null!==s)return void(xi(i)&&i.Mp===Xr[i.Rp]&&(i.Mp=null));r.length=0,"file"===i.Rp?n=13:xi(i)&&e&&e.Rp===i.Rp?n=3:xi(i)?n=7:47===u[l+1]?(n=4,l+=1):(i.Np=!0,i.Pp.push(""),n=18)}break;case 2:if(!e||e.Np&&35!==d)throw new b("Invalid scheme");e.Np&&35===d?(i.Rp=e.Rp,i.Pp=e.Pp.slice(),i.kp=e.kp,i.Lp="",i.Np=!0,n=20):"file"!==e.Rp?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:i.Rp=e.Rp,Hs===d?(i.Ip=e.Ip,i.Cp=e.Cp,i.Dp=e.Dp,i.Mp=e.Mp,i.Pp=e.Pp.slice(),i.kp=e.kp):47===d?n=6:63===d?(i.Ip=e.Ip,i.Cp=e.Cp,i.Dp=e.Dp,i.Mp=e.Mp,i.Pp=e.Pp.slice(),i.kp="",n=19):35===d?(i.Ip=e.Ip,i.Cp=e.Cp,i.Dp=e.Dp,i.Mp=e.Mp,i.Pp=e.Pp.slice(),i.kp=e.kp,i.Lp="",n=20):92===d&&xi(i)?n=6:(i.Ip=e.Ip,i.Cp=e.Cp,i.Dp=e.Dp,i.Mp=e.Mp,i.Pp=e.Pp.slice(),i.Pp.pop(),n=17,l-=1);break;case 6:!xi(i)||47!==d&&92!==d?47===d?n=9:(i.Ip=e.Ip,i.Cp=e.Cp,i.Dp=e.Dp,i.Mp=e.Mp,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){o&&r.unshift(37,52,48),o=!0;for(var _=0;_<r.length;_++){var v=r[_];if(58!==v||a){var m=Gs(z_(v,H_));a?i.Cp+=m:i.Ip+=m}else a=!0}r.length=0}else if(Hs===d||47===d||63===d||35===d||xi(i)&&92===d){if(o&&0===r.length)throw new b("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===i.Rp)l-=1,n=15;else if(58!==d||h)if(Hs===d||47===d||63===d||35===d||xi(i)&&92===d){if(l-=1,xi(i)&&0===r.length)throw new b("Invalid host");if(null!==s&&0===r.length&&(Iv(i)||null!==i.Mp))return;var g=iv(Gs(r),xi(i));if(i.Dp=g,r.length=0,n=16,null!==s)return}else 91===d?h=!0:93===d&&(h=!1),r.push(d);else{if(0===r.length)throw new b("Invalid host");var p=iv(Gs(r),xi(i));if(i.Dp=p,r.length=0,n=12,11===s)return}break;case 12:if(c_(d))r.push(d);else{if(!(Hs===d||47===d||63===d||35===d||xi(i)&&92===d||null!==s))throw new b("Invalid port");if(0!==r.length){var w=x(Gs(r),10);if(w>65535)throw new b("Invalid port");i.Mp=w===Xr[i.Rp]?null:w,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:i.Rp="file",47===d||92===d?n=14:e&&"file"===e.Rp?Hs===d?(i.Dp=e.Dp,i.Pp=e.Pp.slice(),i.kp=e.kp):63===d?(i.Dp=e.Dp,i.Pp=e.Pp.slice(),i.kp="",n=19):35===d?(i.Dp=e.Dp,i.Pp=e.Pp.slice(),i.kp=e.kp,i.Lp="",n=20):(Cv(u.slice(l))||(i.Dp=e.Dp,i.Pp=e.Pp.slice(),Mv(i)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(e&&"file"===e.Rp&&!Cv(u.slice(l))&&(Nv(e.Pp[0])?i.Pp.push(e.Pp[0]):i.Dp=e.Dp),n=17,l-=1);break;case 15:if(Hs===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&Dv(r))n=17;else if(0===r.length){if(i.Dp=J_,null!==s)return;n=16}else{var y=iv(Gs(r),xi(i));if(0===y.bp&&"localhost"===y.Tp&&(y=J_),i.Dp=y,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:xi(i)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(i.kp="",n=19):null===s&&35===d?(i.Lp="",n=20):Hs!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(Hs===d||47===d||xi(i)&&92===d||null===s&&(63===d||35===d)){var A=Gs(r);if(xv(A)?(Mv(i),47===d||xi(i)&&92===d||i.Pp.push("")):!Ev(A)||47===d||xi(i)&&92===d?Ev(A)||("file"===i.Rp&&0===i.Pp.length&&Dv(r)&&(J_!==i.Dp&&null!==i.Dp&&(i.Dp=J_),r[1]=58,A=Gs(r)),i.Pp.push(A)):i.Pp.push(""),r.length=0,"file"===i.Rp&&(Hs===d||63===d||35===d))for(;i.Pp.length>1&&""===i.Pp[0];)i.Pp.shift();63===d?(i.kp="",n=19):35===d&&(i.Lp="",n=20)}else r.push.apply(r,z_(d,G_));break;case 18:63===d?(i.kp="",n=19):35===d?(i.Lp="",n=20):Hs!==d&&(i.Pp[0]+=Gs(z_(d,W_)));break;case 19:null===s&&35===d?(i.Lp="",n=20):Hs!==d&&(i.kp+=Gs(z_(d,xi(i)?X_:Z_)));break;case 20:Hs===d||0===d||(i.Lp+=Gs(z_(d,U_)))}l++}return i}function Vv(t,e,i,s){try{Fv(t,e,i,s)}catch(t){}}var Wv=function(){this.Rp="",this.Ip="",this.Cp="",this.Dp=null,this.Mp=null,this.Pp=[],this.kp=null,this.Lp=null,this.Np=!1};function Uv(t){switch(t.Rp){case"blob":var e;try{e=Fv(t.Pp[0],null)}catch(t){return Sv}return Uv(e);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,e,i){return t+"://"+sv(e)+(null===i?"":":"+i)}(t.Rp,t.Dp,t.Mp);default:return Sv}}var Gv=function(){function t(t,e){var i,s=null;if(null!=e)if(function(t){return null!=t&&t instanceof Gv&&"object"==typeof t.tc}(e))s=e.tc;else try{s=Fv(String(e),null)}catch(t){throw new b("Invalid base URL: "+t.message)}try{i=Fv(String(t),s)}catch(t){throw new b("Invalid URL: "+t.message)}var n=i.kp;this.tc=i,this.kp=function(t){var e=new cu;return null!==t&&mv(e,t),e}(n),this.kp.tc=this}var e=t.prototype;return e.toString=function(){return this.href},e.toJSON=function(){return this.href},function(t,e,i){e&&qf(t.prototype,e),i&&qf(t,i)}(t,[{key:"href",get:function(){return function(t,e){void 0===e&&(e=!1);var i=t.Rp+":";if(null!==t.Dp?(i+="//",Iv(t)&&(i+=t.Ip,""!==t.Cp&&(i+=":"+t.Cp),i+="@"),i+=sv(t.Dp),null!==t.Mp&&(i+=":"+t.Mp)):null===t.Dp&&"file"===t.Rp&&(i+="//"),t.Np)i+=t.Pp[0];else for(var s=0,n=t.Pp;s<n.length;s++)i+="/"+n[s];return null!==t.kp&&(i+="?"+t.kp),e||null===t.Lp||(i+="#"+t.Lp),i}(this.tc)},set:function(t){var e;try{e=Fv(String(t),null)}catch(t){throw new b("Invalid URL: "+t.message)}this.tc=e,vv(this.kp);var i=this.tc.kp;null!==i&&mv(this.kp,i)}},{key:"origin",get:function(){return Uv(this.tc)}},{key:"protocol",get:function(){return this.tc.Rp+":"},set:function(t){Vv(t+":",null,this.tc,0)}},{key:"username",get:function(){return this.tc.Ip},set:function(t){Lv(this.tc)||(this.tc.Ip=q_(t,H_))}},{key:"password",get:function(){return this.tc.Cp},set:function(t){Lv(this.tc)||(this.tc.Cp=q_(t,H_))}},{key:"host",get:function(){var t=this.tc,e=t.Dp;if(null===e)return"";var i=t.Mp,s=sv(e);return null!==i&&(s+=":"+i),s},set:function(t){this.tc.Np||Vv(t,null,this.tc,10)}},{key:"hostname",get:function(){var t=this.tc.Dp;return null===t?"":sv(t)},set:function(t){this.tc.Np||Vv(t,null,this.tc,11)}},{key:"port",get:function(){var t=this.tc.Mp;return null===t?"":""+t},set:function(t){Lv(this.tc)||(""===t?this.tc.Mp=null:Vv(t,null,this.tc,12))}},{key:"pathname",get:function(){var t=this.tc.Pp;return this.tc.Np?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.tc.Np||(this.tc.Pp.length=0,Vv(t,null,this.tc,16))}},{key:"search",get:function(){var t=this.tc.kp;return null===t||""===t?"":"?"+t},set:function(t){t=cv(t);var e=this.tc;if(""===t)return e.kp=null,void vv(this.kp);"?"===t[0]&&(t=t.slice(1)),e.kp="",Vv(t,null,e,19),mv(this.kp,t)}},{key:"searchParams",get:function(){return this.kp}},{key:"hash",get:function(){var t=this.tc.Lp;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.tc.Lp="",Vv(t,null,this.tc,20)):this.tc.Lp=null}}]),t}();function Hv(t){return t.document&&t.document.baseURI||t.location.href||""}function Zv(){let t=s,e=t.location.href;for(;t!==s.top;){t=t.parent;try{e=t.location.href}catch(t){}}return e}r();var Xv=class{Bp(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Xf(...e)}Op(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];ct(...e)}Fp(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Or(...e)}Vp(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];zf(t,...i)}Ug(t,e){return u(t,e)}Wp(t,e){return p(t,e)}Wg(t){v(t)}Up(t){m(t)}Gp(){return this.Hp.Gp()}Zp(){return this.Hp.Zp()}Xp(){return this.Hp.Xp()}zp(){return this.Hp.zp()}qp(){return this.Hp.qp()}Yp(t,e){return this.Hp.Yp(t,e)}Kp(t){return this.Hp.Kp(t)}get jp(){return this.Qp}Nh(t,e){let i;return void 0===e&&(e=Hv(s)),i="object"!=typeof e||e instanceof Gv?e:e.href,new Gv(t,i)}Jp(t,e){if(void 0===e&&(e=Hv(s)),this.$p){const i=Yt(e)?e:e.toString();return new self.URL(t,i).href}return this.Nh(t,e).href}get Ys(){return this.ew}get iw(){return{nw:Bl&&Bl.userAgent.match(/Android /i)?"Android":"other",ow:Boolean(Bl&&Bl.userAgent.match(/Android 8.0.0/i))}}get hw(){return self&&self.location&&"https:"===self.location.protocol}get aw(){return"languages"in Bl?Bl.languages.slice():[Bl.language]}constructor(){this.Qp=new zv,this.ew=If,this.$p=qv(),self.performance&&self.performance.now?this.Vg=()=>self.performance.now():this.Vg=Da}},zv=class{get uw(){return Bl.oscpu}get Ys(){return Bl.platform}get cw(){return Bl.vendor}get lw(){return Bl.vendorSub}};function qv(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}function Bo(){return Bo=w.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)w.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},Bo.apply(this,arguments)}function Yv(){const t=w.create(null);return t.dw=void 0,delete t.dw,t}function xu(){return new Jv}function ea(){return new $v}function Kv(t){const e=xu();for(const i in t)Fa.call(t,i)&&e.set(i,t[i]);return e}function jv(t){const e=[];return t.forEach((t=>e.push(t))),e}r(),r(),r();var Qv="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,Jv=Qv||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,e){this.index=0,this.data=t,this.selector=e,this.keys=w.keys(t)}}return class{get(t){return this.data[t]}set(t,e){return this.has(t)||this.size++,this.data[t]=e,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=Yv(),this.size=0}keys(){return new t(this.data,((t,e)=>e))}values(){return new t(this.data,((t,e)=>t[e]))}entries(){return new t(this.data,((t,e)=>[e,t[e]]))}forEach(t){for(const e in this.data)t(this.data[e],e)}constructor(){this.data=Yv(),this.size=0}}}();var $v=Qv||function(){class t{next(){const t=this.fw.next();return t.done?t:{value:this._w(t.value),done:!1}}constructor(t,e){this.fw=t,this._w=e}}return class{get size(){return this.C_.size}get(t){return this.C_.get(""+t)}set(t,e){return this.C_.set(""+t,e),this}has(t){return this.C_.has(""+t)}delete(t){return this.C_.delete(""+t)}clear(){this.C_.clear()}keys(){return new t(this.C_.keys(),(t=>Number(t)))}values(){return this.C_.values()}entries(){return new t(this.C_.entries(),(t=>{let[e,i]=t;return[Number(e),i]}))}forEach(t){this.C_.forEach(((e,i)=>{t(e,Number(i))}))}constructor(){this.C_=xu()}}}();r(),r();var tm=function(t){return t.mw="9a04f079-9840-4286-ab92-e65be0885f95",t.gw="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.pw="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.ww="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",t}({}),em="urn:mpeg:dash:mp4protection:2011",im="cenc",sm="sinf",nm="skd",rm="9a04f079-9840-4286-ab92-e65be0885f95",om="urn:uuid:"+rm,Xa="com.microsoft.playready",hm="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",am="urn:uuid:"+hm,um="com.widevine.alpha",cm="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",lm="urn:uuid:"+cm,dm="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Ve="urn:uuid:"+dm,fm="com.apple.fps.1_0",_m="com.apple.streamingkeydelivery",vm="identity";r();var ge=function(t){return t.mw="playready",t.gw="widevine",t.ww="fairplay",t.pw="clearkey",t.yw="aes128",t}({}),mm={Aw:ge.mw,Sw:Xa,Tw:"cenc",Ew:rm,xw:om,Rw:"PlayReady"},rn={Aw:ge.gw,Sw:um,Tw:"cenc",Ew:hm,xw:am,Rw:"Widevine"},gm={Aw:ge.ww,Sw:fm,Tw:"skd",Ew:dm,xw:Ve,Rw:"FairPlay"},pm={Aw:ge.ww,Sw:"com.apple.fps",Tw:"sinf",Ew:dm,xw:Ve,Rw:"FairPlay"},wm={Aw:ge.pw,Sw:"org.w3.clearkey",Tw:"cenc",Ew:cm,xw:lm,Rw:"ClearKey"},ym=[mm,rn,gm,wm],bm=[mm,rn,pm,wm];function Am(t){return ym.filter((e=>e.xw===t.toLowerCase()))}r();var Sm="function"==typeof String.prototype.replaceAll?(t,e,i)=>t.replaceAll(e,i):(t,e,i)=>t.split(e).join(i);function Oh(t,e){return ji(t)&&-1!==t.indexOf(e)}var Sl="function"==typeof String.prototype.startsWith?(t,e)=>ji(t)&&t.startsWith(e):(t,e)=>ji(t)&&t.substr(0,e.length)===e,Tm="function"==typeof String.prototype.endsWith?(t,e)=>ji(t)&&t.endsWith(e):(t,e)=>ji(t)&&t.substr(t.length-e.length,e.length)===e;function lh(t,e){return t.length===e.length&&t.toUpperCase()===e.toUpperCase()}var km="function"==typeof String.prototype.repeat?(t,e)=>t.repeat(e):(t,e)=>{let i=0|e;if(0===t.length||0===i)return"";let s=t,n="";for(;1==(1&i)&&(n+=s),i>>>=1,0!==i;)s+=s;return n},Jh="function"==typeof String.prototype.padStart?(t,e,i)=>(void 0===i&&(i=" "),t.padStart(e,i)):(t,e,i)=>{void 0===i&&(i=" ");let s=i;const n=(0|e)-t.length;return n<=0?t:(n>s.length&&(s+=km(s,n/s.length)),s.slice(0,n)+t)},Em=(String.prototype.padEnd,16384),xm="function"==typeof String.fromCodePoint?t=>t.length<=Em?String.fromCodePoint(...t):Im(t,String.fromCodePoint):t=>{const e=[];for(let i of t)i>65535&&(i-=65536,e.push(i>>>10&1023|55296),i=56320|1023&i),e.push(i);return Rm(e)};function Rm(t){return t.length<=Em?String.fromCharCode(...t):Im(t,String.fromCharCode)}function Im(t,e){const i=[];for(let s=0;s<t.length;s+=Em)i.push(e(...t.slice(s,s+Em)));return i.join("")}function Cm(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}var Pm=Z.gm&&Z.wm>=42||Z.Km&&Z.Qm>=38||Z.Um||Z.Xm||Z.hg&&Z.cg>=29;function Dm(t,e){return Oh(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[Bo({contentType:t},e?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[Bo({contentType:t},e?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function dr(){return void 0!==Bl&&"function"==typeof Bl.requestMediaKeySystemAccess}function Nm(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var Mm=class{qp(){return this.Kp(rn)}Zp(){return this.Kp(wm)}zp(){return this.Kp(mm)}Xp(){return this.Kp(gm)}Kp(t){const e=t.xw,i=this.Iw.get(e);if(i)return i;const s=this.Yp(t,'video/mp4; codecs="avc1.42000a"');return this.Iw.set(e,s),s}async Yp(t,e){try{return await this.Pw.Cw(t.Sw,[Dm(e,!0)]),!0}catch(i){try{return await this.Pw.Cw(t.Sw,[Dm(e,!1)]),!0}catch(t){return!1}}}Gp(){return this.Dw||(this.Dw=this.Nw()),this.Dw}async Nw(){return"https:"!==s.location.protocol&&(!!Pm&&!await this.Zp())}constructor(t){this.Iw=xu(),this.Dw=void 0,this.Pw=t}};function Ii(t,e){return Bm(t.slice(),e)}function Lm(t,e){const i=Bm(t,e);return i!==t&&Om(i,void 0,t.length,t),t}function Bm(t,e){let i=t;const s=i.length;if(s<=1)return i;let n=new Array(s);for(let t=1;t<s;t*=2){Om(i,e,t,n);const s=i;i=n,n=s}return i}function Om(t,e,i,s){const n=t.length;let r=0;const o=2*i;let h,a,u,c,l;for(a=0;a<n;a+=o)for(u=a+i,h=u+i,u>n&&(u=n),h>n&&(h=n),c=a,l=u;;)if(c<u&&l<h)e&&e(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<h))break;s[r++]=t[l++]}}r(),r(),r(),r(),r(),r(),r(),r(),r();var Rc=function(t){return t[t.sh=0]="sh",t[t.Mw=1]="Mw",t[t.Lw=-1]="Lw",t}({}),Fm=(t,e)=>(0|t)-(0|e),eu=(t,e)=>t===e?0:t<e?-1:t>e?1:S(t)?S(e)?0:1:-1;function Vm(t,e,i){return xs(t,e,i)?0:eu(t,e)}var Wm=(t,e)=>gh(t,e)?0:eu(t,e);var Um="function"==typeof Array.prototype.find?(t,e)=>t.find(e):(t,e)=>{const i=Hr(t,e);return-1===i?void 0:t[i]},Fo=Um,Gm="function"==typeof Array.prototype.findLast?(t,e)=>t.findLast(e):(t,e)=>{const i=Zm(t,e);return-1===i?void 0:t[i]},Hm=Gm,Hr="function"==typeof Array.prototype.findIndex?(t,e)=>t.findIndex(e):(t,e)=>{for(let i=0;i<t.length;i+=1){if(e(t[i],i,t))return i}return-1},Zm="function"==typeof Array.prototype.findLastIndex?(t,e)=>t.findLastIndex(e):(t,e)=>{for(let i=t.length-1;i>=0;i-=1){if(e(t[i],i,t))return i}return-1};function we(t,e){const i=t.indexOf(e);return-1!==i&&(ka(t,i),!0)}function ka(t,e){0===e?t.shift():t.splice(e,1)}function Xm(t,e){const i=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===e){n++,i.length-=1;break}i[s++]=t[n++]}for(;n<t.length;)i[s++]=t[n++];return i}function ms(t,e){return-1!==t.indexOf(e)}function zm(t,e,i){if(t===e)return!0;if(t.length!==e.length)return!1;for(let s=0;s<t.length;s+=1)if(!i(t[s],e[s]))return!1;return!0}function En(t){t.length=0}function qm(t,e){if(t.length!==e.length)return!1;for(const i of t)if(!ms(e,i))return!1;return!0}Array.prototype.flat;var Qe="function"==typeof Array.prototype.flatMap?(t,e)=>t.flatMap(e):(t,e)=>{const i=[];for(let s=0;s<t.length;s++)i.push(...e(t[s],s));return i};function Ws(t,e){return Km(t,((t,i)=>eu(e(t),e(i))))}function Ym(t,e){return jm(t,((t,i)=>eu(e(t),e(i))))}function Km(t,e){if(0!==t.length)return t.reduce(((t,i)=>e(t,i)<=0?t:i))}function jm(t,e){return Km(t,((t,i)=>e(i,t)))}function Qm(t){return t.filter(((e,i)=>t.indexOf(e)===i))}function Jm(t,e){return Promise.all(t.map(e)).then((e=>t.filter(((t,i)=>e[i]))))}function $m(t,e,i){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!i(t[s],e[s]))return!1;return!0}function zs(t,e,i){if(null!=e){if("object"!=typeof e&&"function"!=typeof e)throw new b("Object expected.");var s,n;if(i){if(!Mt)throw new b("Symbol.asyncDispose is not defined.");s=e[Mt]}if(void 0===s){if(!El)throw new b("Symbol.dispose is not defined.");s=e[El],i&&(n=s)}if("function"!=typeof s)throw new b("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(t){return Promise.reject(t)}}),t.stack.push({value:e,dispose:s,async:i})}else i&&t.stack.push({async:!0});return e}r(),r(),r();var tg="function"==typeof SuppressedError?SuppressedError:function(t,e,i){var s=new g(i);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function lo(t){function e(e){t.error=t.hasError?new tg(e,t.error,"An error was suppressed during disposal."):e,t.hasError=!0}var i,s=0;return function n(){for(;i=t.stack.pop();)try{if(!i.async&&1===s)return s=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var r=i.dispose.call(i.value);if(i.async)return s|=2,Promise.resolve(r).then(n,(function(t){return e(t),n()}))}else s|=1}catch(t){e(t)}if(1===s)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}r(),r();var eg=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];g.apply(this,e)};(eg.prototype=w.create(g.prototype)).constructor=eg;var z=class extends eg{get name(){return"BaseError"}constructor(t,e){super(),this.message=t||"Unknown error",this.cause=e,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}},Bu=class extends z{get name(){return"AbortError"}constructor(t,e){super(t||"Aborted",e)}};function Je(t){return t instanceof g&&"AbortError"===t.name}function J(t){if(t&&t.Bw)throw new Bu}function th(t){if(Je(t))throw t}function Eu(t){if(!Je(t))throw t}function ou(t,e){return e?new Promise(((i,s)=>{if(e.Bw)return t.catch(It),s(new Bu);const n=()=>{e.Ow(n),s(new Bu)};e.Fw(n),t.then((t=>{e.Ow(n),i(t)}),(t=>{e.Ow(n),s(t)}))})):t}async function So(t,e){const i={stack:[],error:void 0,hasError:!1};try{zs(i,e,!1);return await t}catch(t){i.error=t,i.hasError=!0}finally{lo(i)}}async function ig(t,e){const i={stack:[],error:void 0,hasError:!1};try{zs(i,e,!1);return await t(e.Vw)}catch(t){i.error=t,i.hasError=!0}finally{lo(i)}}r(),r();var sg=class{Ww(){if(!this.Bw&&!this.Uw){this.Bw=!0;for(const t of this.Gw.slice())t();this.Hw()}}Hw(){if(!this.Uw){this.Uw=!0;for(const t of this.Zw.slice())t();En(this.Gw),En(this.Zw)}}Fw(t){this.Uw||this.Gw.push(t)}Ow(t){this.Uw||we(this.Gw,t)}Xw(t){this.Uw||this.Zw.push(t)}zw(t){this.Uw||we(this.Zw,t)}constructor(){this.Bw=!1,this.Uw=!1,this.Gw=[],this.Zw=[]}},da=class t{get Vw(){return this.qw}Yw(){this.qw.Ww()}Hw(){this.qw.Hw()}Kw(t){const e=this.qw;if(e.Bw)return;if(t.Bw)return void e.Ww();if(e.Uw||t.Uw)return;const i=()=>{s(),e.Ww()},s=()=>{t.Ow(i),t.zw(s),e.Ow(i),e.zw(s)};t.Fw(i),t.Xw(s),e.Fw(i),e.Xw(s)}jw(){const e=new t,i=new t,s=e.Vw,n=i.Vw,r=this.qw,o=()=>{s.Bw&&n.Uw||n.Bw&&s.Uw?r.Ww():s.Uw&&n.Uw&&r.Hw()};s.Fw(o),n.Fw(o),s.Xw(o),n.Xw(o),e.Kw(r),i.Kw(r);return r.Xw((()=>{s.Ow(o),n.Ow(o),s.zw(o),n.zw(o)})),[e,i]}static Qw(e){const i=new t;for(const t of e)void 0!==t&&i.Kw(t);return i}[El](){this.Yw()}constructor(){this.qw=new sg}},ng=Promise.resolve(),li="function"==typeof queueMicrotask?queueMicrotask:t=>{ng.then(t)};function ah(t){t.then(It,It)}async function Rs(t){try{return await Promise.all(t)}catch(e){throw await Promise.all(t.map((t=>t.catch(It)))),e}}function Fe(t,e){return new Promise(((i,s)=>{if(void 0!==e&&e.Bw)return void s(new Bu);const n=Ms.Ug((()=>{void 0!==e&&e.Ow(r),i()}),t),r=()=>{Ms.Wg(n),s(new Bu)};void 0!==e&&e.Fw(r)}))}async function rg(t,e){const i={stack:[],error:void 0,hasError:!1};try{const s=zs(i,new da,!1);return await Promise.race([t,Fe(e,s.Vw).then((()=>{throw new g("Timeout")}))])}catch(t){i.error=t,i.hasError=!0}finally{lo(i)}}function og(t,e,i){if("function"==typeof i)i.call(t,e);else for(const s of i)s.call(t,e)}var Co=class{yn(t,e){if("function"==typeof e)if("string"==typeof t)this.Jw(t,e);else for(const i of t)this.Jw(i,e)}Jw(t,e){const i=this.$w[t];void 0===i?this.$w[t]=e:"function"==typeof i?this.$w[t]=[i,e]:0===this.ey?i.push(e):this.$w[t]=i.concat(e)}iy(t){if("function"!=typeof t)return;const e=this.sy;void 0===e?this.sy=t:"function"==typeof e?this.sy=[e,t]:0===this.ey?e.push(t):this.sy=e.concat(t)}$o(){this.$w=Yv(),this.sy=void 0}wo(t){this.ey++;const e=this.$w[t.type],i=this.sy;void 0!==e&&og(this.oy,t,e),void 0!==i&&og(this.oy,t,i),this.ey--}fn(t,e){if("function"==typeof e)if("string"==typeof t)this.uy(t,e);else for(const i of t)this.uy(i,e)}uy(t,e){const i=this.$w[t];void 0!==i&&("function"==typeof i?i===e&&(this.$w[t]=void 0):0===this.ey?we(i,e):this.$w[t]=Xm(i,e))}ly(t){if("string"==typeof t)this.$w[t]=void 0;else for(const e of t)this.$w[e]=void 0}_y(t){const e=this.sy;void 0!==e&&("function"==typeof e?e===t&&(this.sy=void 0):0===this.ey?we(e,t):this.sy=Xm(e,t))}vy(t,e){return new Promise(((i,s)=>{if(e&&e.Bw)return s(new Bu);const n=t=>{o(),i(t)},r=()=>{o(),s(new Bu)},o=()=>{this.fn(t,n),e&&e.Ow(r)};this.yn(t,n),e&&e.Fw(r)}))}constructor(t){this.$w=Yv(),this.sy=void 0,this.ey=0,this.Ds=t=>{this.wo(t)},this.oy=null!=t?t:this}},hg=class extends Co{wo(t){li((()=>{super.wo(t)}))}},sn=class extends Co{iy(t){super.iy(t)}_y(t){super._y(t)}};r(),r();var pe=class{constructor(t,e=new Date){this.type=t,this.date=e}};r();var Ti=function(t){return t.gy="py",t.wy="yy",t.Ay="contentprotectionerror",t.Sy="contentprotectionsuccess",t.Ty="currentsourcechange",t.Ey="destroy",t.xy="durationchange",t.Ry="emptied",t.Iy="encrypted",t.Cy="ended",t.Py="Dy",t.Ny="My",t.Ly="By",t.Oy="Fy",t.Vy="loadstart",t.Wy="manifestupdate",t.Uy="nosupportedrepresentationfound",t.Gy="offline",t.Hy="online",t.Zy="pause",t.ro="play",t.Xy="progress",t.zy="ratechange",t.qy="representationchange",t.Yy="resize",t.Ky="seeked",t.jy="seeking",t.Qy="segmentnotfound",t.Jy="$y",t.eb="ib",t.ao="sourcechange",t.sb="timeupdate",t.ob="volumechange",t.hb="ub",t.fb="_b",t.vb="metricschange",t}({}),ag=["cenc"],ug=["cbcs","cbcs-1-9"],te=class extends pe{constructor(t){super(Ti.fb),this.mb=t}},jh=class extends pe{constructor(t,e,i,s){super("gb"),this.pb=t,this.wb=e,this.gb=i,this.yb=s}},cg=class extends pe{constructor(){super("lt")}},hh=function(t){return t.Iy="bb",t.Ab="Sb",t}({}),lg=class extends pe{constructor(t,e){super("bb"),this.Tw=t,this.Tb=e}},dg=class extends pe{constructor(){super("Sb")}};r(),r(),r();var ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),fg=16383,_g=/[\t\n\f\r ]/g;function kh(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:vg()}function vg(){throw new g("Invalid base64 input")}function mg(t){let e=t;_g.test(e)&&(e=e.replace(_g,""));let i=e.length;i%4==0&&i>=1&&"="===e[i-1]&&(i>=2&&"="===e[i-2]?i-=2:i-=1,e=e.substr(0,i));const s=i%4;if(1===s)return vg();const n=0===s?0:4-s,r=new j(function(t,e){return 3*(t+e)/4-e}(i,n)),o=n>0?i-4:i;let h,a=0,u=0;for(;a<o;a+=4)h=kh(e.charCodeAt(a))<<18|kh(e.charCodeAt(a+1))<<12|kh(e.charCodeAt(a+2))<<6|kh(e.charCodeAt(a+3)),r[u++]=h>>16&255,r[u++]=h>>8&255,r[u++]=255&h;return 2===n?(h=kh(e.charCodeAt(a))<<2|kh(e.charCodeAt(a+1))>>4,r[u++]=255&h):1===n&&(h=kh(e.charCodeAt(a))<<10|kh(e.charCodeAt(a+1))<<4|kh(e.charCodeAt(a+2))>>2,r[u++]=h>>8&255,r[u++]=255&h),r}function gg(t,e,i){return ch[t>>2]+ch[(3&t)<<4|e>>4]+ch[(15&e)<<2|i>>6]+ch[63&i]}function pg(t,e,i){const s=[];for(let n=e;n<i;n+=3)s.push(gg(t[n],t[n+1],t[n+2]));return s.join("")}function Vr(t){const e=t.length,i=e%3,s=[],n=e-i;for(let e=0;e<n;e+=fg)s.push(pg(t,e,_.min(n,e+fg)));if(1===i){const i=t[e-1];s.push(ch[i>>2]+ch[(3&i)<<4]+"==")}else if(2===i){const i=t[e-2],n=t[e-1];s.push(ch[i>>2]+ch[(3&i)<<4|n>>4]+ch[(15&n)<<2]+"=")}return s.join("")}function wg(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}function Va(t,e){const i=e.ec,s=t.getUint8(i>>3),n=1<<7-(7&i);return e.kb(1),(s&n)===n?1:0}function jo(t,e,i){let s=0;for(let n=0;n<i;n++)s=2*s+Va(t,e);return s}r(),r();var yg=class t{get ec(){return this.nc}kb(t){this.nc+=t}Eb(t){this.nc=t}xb(){return new t(this.ec)}constructor(t=0){this.nc=t}};var bg=_.clz32||function(t){let e=32,i=t>>16;return i&&(e-=16,t=i),i=t>>8,i&&(e-=8,t=i),i=t>>4,i&&(e-=4,t=i),i=t>>2,i&&(e-=2,t=i),i=t>>1,i?e-2:e-t};function Ag(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Sg(t,e){return t>>e&63|128}function Tg(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(Ag(t),e.push(t>>12&15|224),e.push(Sg(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(Sg(t,12)),e.push(Sg(t,6))),e.push(63&t|128)):e.push(t)}function kg(t,e){if(e.ec>=t.length)throw new g("Invalid byte index");const i=255&t[e.ec];if(e.kb(1),128==(192&i))return 63&i;throw new g("Invalid continuation byte")}function Eg(t,e){const i=e.ec;if(i>t.length)throw new g("Invalid byte index");if(i===t.length)return!1;const s=255&t[i];if(e.kb(1),0==(128&s))return s;if(192==(224&s)){const i=(31&s)<<6|kg(t,e);if(i>=128)return i;throw new g("Invalid continuation byte")}if(224==(240&s)){const i=(15&s)<<12|kg(t,e)<<6|kg(t,e);if(i>=2048)return Ag(i),i;throw new g("Invalid continuation byte")}if(240==(248&s)){const i=(7&s)<<18|kg(t,e)<<12|kg(t,e)<<6|kg(t,e);if(i>=65536&&i<=1114111)return i}throw new g("Invalid UTF-8 detected")}r(),r();var xg=65279;var Rg=[128,64,32,16,8,4,2,1],Ig=class{Rb(t){return Cg(this.Ib,t)}constructor(t){this.Ib=t}};function Cg(t,e){return(t&e)===e}function el(t,e){return Cg(t,Rg[e])}function oc(t,e){const i=t.getUint8(e.ec);return e.kb(1),i}function Pg(t,e,i){t.setUint8(e.ec,i),e.kb(1)}function E(t,e,i){const s=si(Rh(t),e.ec,e.ec+i);return e.kb(s.byteLength),s}function Dg(t,e,i){Rh(t).set(Rh(i),e.ec),e.kb(i.byteLength)}function Ng(t,e,i){return e.ec+i<=t.byteLength}function Mg(t,e,i,s){return void 0===s&&(s=!1),s?function(t,e,i){let s=0,n=1;for(let r=0;r<i;r++)s+=oc(t,e)*n,n*=256;return s}(t,e,i):function(t,e,i){let s=0;for(let n=0;n<i;n++)s=256*s+oc(t,e);return s}(t,e,i)}function Lg(t,e){const i=t.getUint8(e.ec);return e.kb(1),i}function Ei(t,e,i){void 0===i&&(i=!1);const s=t.getUint16(e.ec,i);return e.kb(2),s}function Bg(t,e,i,s){void 0===s&&(s=!1),t.setUint16(e.ec,i,s),e.kb(2)}function as(t,e,i){void 0===i&&(i=!1);const s=t.getUint32(e.ec,i);return e.kb(4),s}function Og(t,e,i,s){void 0===s&&(s=!1),t.setUint32(e.ec,i,s),e.kb(4)}function Yr(t,e,i){void 0===i&&(i=!1);const s=as(t,e,i),n=as(t,e,i),r=i?n:s,o=i?s:n;return vo.fromBits(o,r,!0)}function Fg(t,e,i,s){void 0===s&&(s=!1);const n=i.getHighBitsUnsigned(),r=i.getLowBitsUnsigned(),o=s?n:r;Og(t,e,s?r:n,s),Og(t,e,o,s)}function Vg(t,e){return so(t,e)}function jc(t,e,i){return Rm(ep(E(t,e,i)))}function Wg(t,e){const i=oc(t,e);let s;return 0==(128&i)?s=i:192==(224&i)?s=64*(31&i)+(63&oc(t,e)):224==(240&i)?s=4096*(15&i)+64*(63&oc(t,e))+(63&oc(t,e)):240==(248&i)&&(s=262144*(7&i)+4096*(63&oc(t,e))+64*(63&oc(t,e))+(63&oc(t,e))),s}function so(t,e){return Ug(t,e,!0)}function Ug(t,e,i){const s=[];for(;e.ec<t.byteLength;){const n=oc(t,e);if(i&&!n)break;s.push(n)}return Rm(s)}function Gg(t,e,i){const s=i.length;for(let n=0;n<s;n+=1){Pg(t,e,i.charCodeAt(n))}}function Hg(t,e){if(!(e.ec+2<=t.byteLength))return;const i=t.getUint8(e.ec),s=t.getUint8(e.ec+1);return(254!==i||255!==s)&&(255===i&&254===s||void 0)}function Zg(t,e){const i=Hg(t,e);return void 0!==i&&e.kb(2),gr(t,e,!0===i)}function gr(t,e,i){return void 0===i&&(i=!1),Xg(t,e,i,!0)}function Xg(t,e,i,s){const n=[];for(;e.ec+2<=t.byteLength;){const r=Ei(t,e,i);if(s&&!r)break;n.push(r)}return Rm(n)}function zg(t,e,i,s){void 0===s&&(s=!1);const n=i.length;for(let r=0;r<n;r+=1){Bg(t,e,i.charCodeAt(r),s)}}function uh(t){return Ug(ra(t),new Ri,!1)}function yr(t){const e=new j(t.length);return Gg(ra(e),new Ri,t),e}function qg(t,e){return void 0===e&&(e=!1),Xg(ra(t),new Ri,e,!1)}function Yg(t,e){void 0===e&&(e=!1);const i=new j(2*t.length);return zg(ra(i),new Ri,t,e),i}function Kg(t,e){return e.ec+3<=t.byteLength&&(239===t.getUint8(e.ec)&&187===t.getUint8(e.ec+1)&&191===t.getUint8(e.ec+2))}function jg(t,e){return function(t,e,i){const s=[],n=Kg(t,e);n&&e.kb(3);for(;e.ec<t.byteLength;){const n=Wg(t,e);if(void 0===n)break;if(i&&0===n)break;s.push(n)}return xm(s)}(t,e,!0)}function Qg(t){return function(t){return xm(t)}(function(t,e){const i=[],s=new Ri;let n;if(!e){if(n=Eg(t,s),!1===n)return i;n===xg||i.push(n)}for(;!1!==(n=Eg(t,s));)i.push(n);return i}(Rh(t)))}function Jg(t){return new j(function(t){const e=[];for(const i of t)Tg(i,e);return e}(function(t){const e=[];let i=0;const s=t.length;for(;i<s;){const n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){const s=t.charCodeAt(i++);56320==(64512&s)?e.push(((1023&n)<<10)+(1023&s)+65536):(e.push(n),i--)}else e.push(n)}return e}(t)))}function $g(t,e){if(Kg(t,e))return jg(t,e);if(void 0!==Hg(t,e))return Zg(t,e);if(e.ec+4<=t.byteLength){if(0===t.getUint8(e.ec)&&0===t.getUint8(e.ec+2))return gr(t,e,!1);if(0===t.getUint8(e.ec+1)&&0===t.getUint8(e.ec+3))return gr(t,e,!0)}return jg(t,e)}function si(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new j(t.buffer,t.byteOffset+e,i-e)}function mu(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+e,i-e)}function ra(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Rh(t){return new j(t.buffer,t.byteOffset,t.byteLength)}function tp(t){return t instanceof ArrayBuffer||ar(t)}function ma(t){return t instanceof ArrayBuffer?new j(t):Rh(t)}function Uc(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),t.slice?t.slice(e,i):kc(si(t,e,i))}function kc(t){if(t.slice)return t.slice(0);{const e=new j(t.byteLength);return e.set(t,0),e}}function ep(t){return[].slice.call(t)}var Ri=class t{get ec(){return this.nc}kb(t){this.nc+=t}Eb(t){this.nc=t}xb(){return new t(this.ec)}Cb(){return new yg(this.ec<<3)}constructor(t=0){this.nc=t}};function ip(t){let e=t.toLowerCase(),i=0,s=0;Sl(e,"0x")&&(e=e.substring(2));const n=new j(_.ceil(e.length/2));for(1==(1&e.length)&&(i=1,n[s++]=x(e[0],16));i<e.length;i+=2)n[s++]=x(e.substr(i,2),16);return n}function sp(t){return.001*t}var np=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],ar=ArrayBuffer.isView||(t=>t&&ms(np,pd.call(t)));function Ph(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;return _e(new j(t),new j(e))}function _e(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;for(let i=0;i<t.length;i+=1)if(t[i]!==e[i])return!1;return!0}function rp(t,e){return t===e||_e(ma(t),ma(e))}function Tu(t){const e=t.reduce(((t,e)=>t+e.byteLength),0);return op(t,e)}function op(t,e){const i=new j(e);let s=0;for(const e of t)i.set(e,s),s+=e.byteLength;return i}function hp(t,e,i){const s=new j(t.byteLength+e.byteLength),n=si(t,0,i),r=si(t,i);return s.set(n),s.set(e,i),s.set(r,i+e.byteLength),s}function ap(t){return mg(t).buffer}function up(t){return Vr(new j(t))}function pr(t){return Vr(yr(t))}var cp=new j([0]).buffer,lp=class{get Pb(){return this.Zu.length}Db(t){for(const e of this.Zu)if(rp(e[0],t))return!0;return!1}Nb(t){for(const e of this.Zu)if(rp(e[0],t))return e[1]}Mb(t,e){for(const i of this.Zu)if(rp(i[0],t))return void(i[1]=e);this.Zu.push([t,e])}Lb(t,e){this.Zu.forEach((e=>t(e[1],e[0])),e)}Bb(){En(this.Zu)}constructor(){this.Zu=[]}};r();var os=class{Ob(t){this.Ud&&(this.Ud(t),this.Hw())}Fb(t){this.Gd&&(this.Gd(t),this.Hw())}Yw(){this.Vb.catch(It),this.Fb(new Bu)}Kw(t){t.then((t=>this.Ob(t)),(t=>this.Fb(t)))}Hw(){this.Ud=void 0,this.Gd=void 0}constructor(){this.Vb=new Promise(((t,e)=>{this.Ud=t,this.Gd=e}))}};function dp(){return new j([8,4]).buffer}function fp(t,e){return t===Xa?function(t){if(t.byteLength<2*_p.length)return t;const e=new DataView(t,0,2*_p.length),i=qg(e,!0);if(i===_p)return t;return function(t){const e='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',i='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+e+up(t)+i;return Yg(s,!0).buffer}(t)}(e):e}r();var _p="<PlayReady";r(),r();var Js=class extends z{constructor(t,e,i,s){super(t,s),this.Wb=e,this.Ub=i}};r(),r(),r(),r(),r();var vp=function(t,e){return(vp=w.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)w.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function Dt(t,e){if("function"!=typeof e&&null!==e)throw new b("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}vp(t,e),t.prototype=null===e?w.create(e):(i.prototype=e.prototype,new i)}function mp(t,e,i){return t.indexOf?t.indexOf(e,i):Array.prototype.indexOf.call(t,e,i)}r(),r(),r(),r(),r(),r(),r();!function(){function t(t,e){this.Gb=t,this.Hb=e}t.prototype.get=function(t){var e=this.Gb.get(t);if(0===this.Hb||void 0===e)return e;var i=this.Gb.get(t+1)||0,s=e&(1<<8-this.Hb)-1,n=i>>8-this.Hb;return(s<<this.Hb)+n},t.prototype.getBit=function(t){if(!(t<0)){var e=this.Gb.get(_.floor((t+this.Hb)/8));if(void 0!==e)return(e&1<<7-this.Hb-t%8)>0?1:0}},w.defineProperty(t.prototype,"bitLength",{get:function(){return this.Gb.bitLength-this.Hb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"length",{get:function(){return this.Gb.length},enumerable:!1,configurable:!0})}();r(),r();_.pow(2,-52);function gp(t,e,i){return _.min(_.max(t,e),i)}function pp(t,e){return t>>8-e}function wp(t,e){return t&(1<<e)-1}var yp=function(){function t(t){this.Zb=t,this.Xb=0,this.zb=0}return w.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.Xb+this.zb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"done",{get:function(){return this.Xb===this.Zb.length&&0===this.zb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"location",{get:function(){return{byte:this.Xb,bit:this.zb}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var e=new t(this.Zb);return e.seek(this.Xb,this.zb),e},t.prototype.canReadBits=function(t){return 8*this.Xb+t+this.zb<=8*this.Zb.length},t.prototype.canReadBytes=function(t){return 0===this.zb?this.Xb+t<=this.Zb.length:this.Xb+t<this.Zb.length},t.prototype.incBit=function(){this.zb++,this.zb>7&&(this.Xb++,this.zb=0)},t.prototype.seek=function(t,e){this.Xb=t,this.zb=e},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new g("Cannot read past end of buffer.");return this.Zb.get(this.Xb)>>7-this.zb&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new g("Cannot read past end of buffer.");if(0===this.zb)return this.Zb.get(this.Xb++);var t=wp(this.Zb.get(this.Xb),8-this.zb),e=pp(this.Zb.get(this.Xb+1),this.zb);return this.Xb++,t<<this.zb|e},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");for(var e=[],i=0;i<t;i++)e.push(this.readBit());return e},t.prototype.readUInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var e=0;if(0===this.zb&&t%8==0)for(var i=t-8;i>=0;i-=8)e|=this.readByte()<<i;else for(i=t-1;i>=0;i--)e|=this.readBit()<<i;return e},t.prototype.readInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var e=this.readUInt(t);return 0===(e&1<<t-1)?e:e-_.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var e=1<<t;return e+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new g("Skipping over the buffer edge is not allowed.");var e=this.zb+t;this.Xb+=e>>3,this.zb=7&e},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new g("Cannot read past end of buffer.");for(var e=[],i=0;i<t;i++)e.push(this.readByte());return String.fromCharCode.apply(String,e)},t}();r(),r(),r();var bp=function(t,e){return t===e?0:t<e?-1:t>e?1:S(t)?S(e)?0:1:-1},R=function(){function t(){this.qb=[],this.Yb=[],this.Kb=0}return t.from=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var s=new t,n=0,r=e;n<r.length;n++){var o=r[n];s.pushRange(o)}return s},t.prototype.pushRange=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=t.length),i<0)throw new g("The buffer length must be positive.");if(0!==i){if(0===this.Yb.length)this.Yb.push(0);else{var s=this.Yb[this.Yb.length-1]+this.qb[this.qb.length-1].length;this.Yb.push(s)}this.qb.push(t.subarray(e,e+i)),this.Kb+=i}},t.prototype.concat=function(e){var i=new t;return i.pushRange(this.join()),i.pushRange(e.join()),i},t.prototype.copy=function(t,e,i,s){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=this.length),e<0||i<0||s<0)throw new RangeError;return this.slice(i,s).copyInternal(t,e)},t.prototype.copyInternal=function(t,e){for(var i=0,s=e,n=0,r=this.qb;n<r.length;n++){var o=r[n];t.set(o,s),i+=o.length,s+=o.length}return i},t.prototype.clear=function(){this.qb=[],this.Yb=[],this.Kb=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var e=this.findContainingBufferIndex(t),i=t-this.Yb[e];return this.qb[e][i]}},w.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.qb.length<1)return-1;if(this.qb.length>1){var e=this.join();this.clear(),this.pushRange(e)}var i=this.qb[0];return"number"==typeof t?mp(i,t):"undefined"!=typeof Buffer?Buffer.from(i.buffer,i.byteOffset,i.byteLength).indexOf(t):function(t,e){if(0===e.length)return 0;for(var i=e[0],s=e.length,n=t.length-s,r=0;r<=n&&!((r=mp(t,i,r))<0||r>n);r++){for(var o=r+1,h=r+s,a=1;o<h&&t[o]===e[a];o++,a++);if(o===h)return r}return-1}(i,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,e,i){if(0!==t.length){var s=0,n=t.length-1;if(1!==i(t[s],e)){if(1===i(e,t[n]))return n;for(;s!==n;){var r=_.ceil((s+n)/2);i(t[r],e)<=0?s=r:n=r-1}return s}}}(this.Yb,t,bp)},t.prototype.join=function(){if(1===this.qb.length)return this.qb[0];var t=new j(this.length);return this.copyInternal(t,0),t},w.defineProperty(t.prototype,"length",{get:function(){return this.Kb},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,e){if(e<=0||e>4)throw new g("Expected byteLength to be between 0 and 4 but was "+e);if(t<0||t>this.length-e)throw new g("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-e)+")");if(1===e)return this.get(t);for(var i=0,s=0;s<e;s++)i+=this.get(t+s)*_.pow(2,8*(e-s-1));return i},t.prototype.slice=function(e,i){void 0===i&&(i=this.length);var s=gp(e,0,this.length),n=gp(i,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,o=this.findContainingBufferIndex(s),h=this.qb[o],a=s,u=a-this.Yb[o];a+h.length-u<n;)r.pushRange(h,u,h.length-u),o+=1,u=(a+=h.length-u)-this.Yb[o],h=this.qb[o];var c=n-a;return r.pushRange(h,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var e=this.length-1,i=this.qb.length-1,s=this.qb[i],n=s.length-1;e>=0&&i>=0;){if(0!==s[n])break;if(0===n){if(0===i)return new t;i-=1,n=(s=this.qb[i]).length-1}else n-=1;e-=1}return this.slice(0,e+1)},t}(),Ap=function(){function t(e){this.jb=e||t.BUFFER_CHUNK_SIZE,this.Qb=!1,this.Jb=new R,this.Zb=new j(this.jb),this.$b=0,this.tA=0,this.zb=7}return t.prototype.closeByte=function(){this.Zb[this.$b++]=this.tA,this.$b>=this.jb&&this.closeBuffer(),this.tA=0,this.zb=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.$b&&(this.Jb.pushRange(this.Zb,0,this.$b),t&&(this.Zb=new j(this.jb)),this.$b=0)},w.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.zb},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.Qb)throw new g("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.Qb=!0,this.Jb},t.prototype.writeBit=function(t){if(this.Qb)throw new g("Cannot write to a closed BitWriter.");this.tA|=t<<this.zb,0===this.zb?this.closeByte():this.zb--},t.prototype.writeByte=function(t){if(this.Qb)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.tA=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var e=this.zb;this.tA|=pp(t,e+1),this.closeByte(),this.tA=wp(t,8-e)<<e+1,this.zb=e},t.prototype.writeBits=function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.Qb)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.$b+t.length<=this.jb?(this.Zb.set(t,this.$b),this.$b+=t.length,this.$b===this.jb&&this.closeBuffer()):(this.closeBuffer(),this.Jb.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var e=this.zb;this.tA|=pp(t[0],e+1),this.closeByte();for(var i=1;i<t.length;i++){var s=wp(t[i-1],8-e),n=pp(t[i],e+1);this.tA=s<<e+1|n,this.closeByte()}this.tA=wp(t[t.length-1],8-e)<<e+1,this.zb=e}},t.prototype.writeUInt=function(t,e){if(t<0)throw new g("Received a negative number.");if(e>32)throw new g("The max bitlength that can be provided is 32.");if(t>=_.pow(2,e))throw new g("Uint "+t+" cannot be represented in "+e+" bit(s).");if(this.isWritingStartBit&&e%8==0)for(var i=e-8;i>=0;i-=8)this.writeByte(t>>i&255);else for(i=e-1;i>=0;i--)this.writeBool((t&1<<i)>0)},t.prototype.writeInt=function(t,e){if(e>32)throw new g("The max bitlength that can be provided is 32.");if(_.abs(t)>=_.pow(2,e-1))throw new g("Signed integer "+t+" cannot be represented in "+e+" bit(s).");t<0?this.writeUInt(t+_.pow(2,e),e):this.writeUInt(t,e)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new g("Received a negative number.");for(var e=_.floor(_.log2(t+1))+1,i=0;i<e-1;i++)this.writeBit(0);this.writeUInt(t+1,e)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var e=function(t){for(var e=new j(t.length),i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(t),i=0;i<e.length;i++)this.writeByte(e[i])},t.BUFFER_CHUNK_SIZE=1024,t}();r();var Sp=function(){function t(t){this.rb=new R,this.Qd=t}return t.prototype.closeWriter=function(){void 0!==this.Qd&&(this.rb=this.rb.concat(this.Qd.close()),this.Qd=void 0)},w.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.Qd&&(this.Qd=new Ap),this.Qd},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),Fh=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new g("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(e){var i=this.getSize(),s=i>=t.LARGE_SIZE/8,n=16===this.boxType.length;e.writeUInt(s?1:i,32),e.writeString(n?"uuid":this.boxType),s&&(e.writeUInt(_.floor(i/t.LARGE_SIZE),32),e.writeUInt(i%t.LARGE_SIZE,32)),n&&e.writeString(this.boxType)},t.prototype.getSize=function(){var e=8+(this.boxType.length>4?16:0),i=this.getBoxContentSize()+e;return i>=t.LARGE_SIZE/8&&(i+=8),i},t.prototype.serialize=function(){var t=new Sp;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=_.pow(2,32),t}();function Ni(t,e){return t instanceof vo?64===e:t<_.pow(2,e)}function oe(t,e){return _.round(t*_.pow(2,e))}function vh(t,e){for(var i=0;i<e.length;i++)t.writeByte(e[i])}function nt(t,e){return t/_.pow(2,e)}r();var W=function(t){function e(e,i,s){var n=t.call(this,e)||this;if(n.version=i,!Ni(i,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Dt(e,t),w.defineProperty(e.prototype,"flags",{get:function(){return this.__},set:function(t){this.__=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},e.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},e}(Fh);r(),r();var Tp=function(t){function e(e,i){var s=t.call(this,e)||this;return s.data=i,s}return Dt(e,t),e.prototype.getBoxContentSize=function(){return this.data.length},e.prototype.serializeBoxContent=function(t){t.concat(R.from(this.data))},e}(Fh);r(),r();var kp=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();r();var Ep=16384;function xp(t){var e=t.length;if(e<=Ep)return String.fromCharCode.apply(String,t);for(var i=[],s=0;s<e;s+=Ep)i.push(String.fromCharCode.apply(String,t.slice(s,s+Ep)));return i.join("")}var Rp=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,e){return(t&e)===e}(this.raw,t)},t}();function fh(t,e){var i=t.getUint8(e.offset);return e.shift(1),i}function Ip(t,e,i){var s=Lp(Fp(t),e.offset,e.offset+i);return e.shift(s.byteLength),s}function Cp(t,e,i){return e.offset+i<=t.byteLength}function eh(t,e,i){void 0===i&&(i=!1);var s=t.getUint32(e.offset,i);return e.shift(4),s}function Pp(t,e,i){void 0===i&&(i=!1);var s=eh(t,e,i),n=eh(t,e,i),r=i?n:s,o=i?s:n;return vo.fromBits(o,r,!0)}function Dp(t,e,i){return xp(function(t){return[].slice.call(t)}(Ip(t,e,i)))}function Np(t,e){var i,s=fh(t,e);return 0==(128&s)?i=s:192==(224&s)?i=64*(31&s)+(63&fh(t,e)):224==(240&s)?i=4096*(15&s)+64*(63&fh(t,e))+(63&fh(t,e)):240==(248&s)&&(i=262144*(7&s)+4096*(63&fh(t,e))+64*(63&fh(t,e))+(63&fh(t,e))),i}function Mp(t,e){return function(t,e,i){var s=[],n=function(t,e){return e.offset+3<=t.byteLength&&239===t.getUint8(e.offset)&&187===t.getUint8(e.offset+1)&&191===t.getUint8(e.offset+2)}(t,e);n&&e.shift(3);for(;e.offset<t.byteLength;){var r=Np(t,e);if(void 0===r)break;if(i&&0===r)break;s.push(r)}return function(t){for(var e=[],i=0,s=t;i<s.length;i++){var n=s[i];n>65535&&(n-=65536,e.push(n>>>10&1023|55296),n=56320|1023&n),e.push(n)}return xp(e)}(s)}(t,e,!0)}function Lp(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new j(t.buffer,t.byteOffset+e,i-e)}function Bp(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+e,i-e)}function Op(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Fp(t){return new j(t.buffer,t.byteOffset,t.byteLength)}var Vp=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new kp(this.offset<<3)},t}();r();var Wp=function(){function t(t,e){this.data=t,this.cursor=e}return t.prototype.nextUint8=function(){return fh(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getUint16(e.offset,i);return e.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getInt16(e.offset,i);return e.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return eh(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getInt32(e.offset,i);return e.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,e,i){void 0===i&&(i=!1);var s=eh(t,e,i),n=eh(t,e,i),r=i?n:s,o=i?s:n;return vo.fromBits(o,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return Pp(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return Ip(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,e,i){for(var s=[],n=0;n<i;n++)s.push(eh(t,e));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return Dp(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return Mp(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function Ct(t,e){return t.type===e}var Up=8;function ci(t){var e=function(t,e){var i=[];for(;e.offset<t.byteLength;){var s=Gp(t,e);if(!s.complete)return{complete:!1,boxes:i};i.push(s.box)}return{complete:!0,boxes:i}}(t.data,t.cursor);if(!e.complete)throw new g("Data incomplete");return e.boxes}function Gp(t,e){var i=e.offset,s=function(t,e){var i=e.offset;if(!Cp(t,e,Up)){return{complete:!1,neededOffset:r=e.offset+Up}}var s=eh(t,e),n=Dp(t,e,4);if(1===s){if(!Cp(t,e,8)){var r=e.offset+8;return e.seek(i),{complete:!1,neededOffset:r}}s=Pp(t,e).toNumber()}if("uuid"===n){if(!Cp(t,e,16)){r=e.offset+16;return e.seek(i),{complete:!1,neededOffset:r}}n=Dp(t,e,16)}var o=e.offset,h={type:n,size:s,headerSize:o-i};return{complete:!0,header:h}}(t,e);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-i);var o=i+r;if(o>t.byteLength){var h=o;return e.seek(i),{complete:!1,neededOffset:h}}var a={type:n.type,offset:i,data:new Wp(Bp(t,i,o),new Vp(n.headerSize))};return e.seek(o),{complete:!0,box:a}}function Hp(t){return{version:t>>24,flags:new Rp(16777215&t)}}function Zp(t,e){var i,s,n,r;return 1===e?(i=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(i=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:i,modification:s,scale:n,duration:r}}function Xp(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function zp(t){var e=t.nextUint32Array(9);return{a:nt(e[0],16),b:nt(e[1],16),u:nt(e[2],30),c:nt(e[3],16),d:nt(e[4],16),v:nt(e[5],30),x:nt(e[6],16),y:nt(e[7],16),w:nt(e[8],30)}}function ai(t){return new Tp(t.type,Lp(Fp(t.data.data),t.data.cursor.offset))}var qp=function(t){function e(e,i,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=i,r.handlerType=e,r}return Dt(e,t),w.defineProperty(e.prototype,"handlerType",{get:function(){return this.eA},set:function(t){this.eA=t},enumerable:!1,configurable:!0}),e.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(i=null===(e=this.name)||void 0===e?void 0:e.length)&&void 0!==i?i:0)+1},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeString(this.handlerType),this.serializeReserved(e),this.name&&e.writer.writeString(this.name),e.writer.writeByte(0)},e}(W);function Yp(t){var e=t.data,i=Hp(e.nextUint32()),s=i.version,n=i.flags;e.skip(4);var r=e.nextChars(4);e.skip(12);var o=e.nextUTF8String();return new qp(r,o,s,n.raw)}!function(t){function e(){return t.call(this,"mdir")||this}Dt(e,t),e.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(qp);r(),r(),r();var kr=function(){function t(t,e){void 0===e&&(e=!1),this.fixed28BitMode=e,this.tag=t}return t.prototype.encodeSize=function(t){for(var e=[];t>0;)e.length>0&&(e[e.length-1]+=128),e.push(t%128),t>>=7;if(this.fixed28BitMode)for(;e.length<4;)e.push(128);return e.reverse()},w.defineProperty(t.prototype,"tag",{get:function(){return this.iA},set:function(t){if(!Ni(t,8))throw new g("Provided tag does not fit in 8 bits.");this.iA=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var e=0,i=this.encodeSize(this.getDescriptorSize());e<i.length;e++){var s=i[e];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}();r();!function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h={});var a=t.call(this,4,h.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=o,a.objectTypeIndication=e,a.streamType=i,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}Dt(e,t),w.defineProperty(e.prototype,"objectTypeIndication",{get:function(){return this.sA},set:function(t){if(!Ni(t,8))throw new g("Provided objectTypeIndication does not fit in 8 bits.");this.sA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"streamType",{get:function(){return this.nA},set:function(t){if(!Ni(t,6))throw new g("Provided streamType does not fit in 6 bits.");this.nA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"bufferSizeDb",{get:function(){return this.rA},set:function(t){if(!Ni(t,24))throw new g("Provided bufferSizeDb does not fit in 24 bits.");this.rA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"maxBitrate",{get:function(){return this.oA},set:function(t){if(!Ni(t,32))throw new g("Provided maxBitrate does not fit in 32 bits.");this.oA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"avgBitrate",{get:function(){return this.hA},set:function(t){if(!Ni(t,32))throw new g("Provided avgBitrate does not fit in 32 bits.");this.hA=t},enumerable:!1,configurable:!0}),e.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,e){return t+e.getSize()}),0)},e.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var e=0,i=this.decoderSpecificInfo;e<i.length;e++){i[e].serialize(t)}}}(kr);r();!function(t){function e(e,i){void 0===i&&(i={});var s=t.call(this,5,i.fixed28BitMode)||this;return s.data=e,s}Dt(e,t),e.prototype.getDescriptorSize=function(){return this.data.length},e.prototype.serializeDescriptorContent=function(t){t.concat(R.from(this.data))}}(kr);r(),r();var Kp=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this,6,e)||this;return i.predefined=2,i}return Dt(e,t),e.prototype.getDescriptorSize=function(){return 1},e.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},e}(kr);!function(t){function e(e,i,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=e,r.streamPriority=i,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new Kp(n.fixed28BitMode),r}Dt(e,t),w.defineProperty(e.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"esId",{get:function(){return this.aA},set:function(t){if(!Ni(t,16))throw new g("Provided esId does not fit in 16 bits.");this.aA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"streamPriority",{get:function(){return this.uA},set:function(t){if(!Ni(t,5))throw new g("Provided streamPriority does not fit in 5 bits.");this.uA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"dependsOnEsId",{get:function(){return this.cA},set:function(t){if(t&&!Ni(t,16))throw new g("Provided dependsOnEsId does not fit in 16 bits.");this.cA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"ocrEsId",{get:function(){return this.lA},set:function(t){if(t&&!Ni(t,16))throw new g("Provided ocrEsId does not fit in 16 bits.");this.lA=t},enumerable:!1,configurable:!0}),e.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},e.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(kr);r(),r(),r(),r(),r();var jp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxes=[],e}return Dt(e,t),e.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,e){return t+e.getSize()}),0)},e.prototype.serialize=function(){for(var e=t.prototype.serialize.call(this),i=0,s=this.boxes;i<s.length;i++){var n=s[i];e=e.concat(n.serialize())}return e},e}(Fh),oa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(t){},e.prototype.getBoxContentSize=function(){return 0},e}(jp),Qp=function(t){function e(e,i){var s=t.call(this,e)||this;return s.dataReferenceIndex=i,s}return Dt(e,t),w.defineProperty(e.prototype,"dataReferenceIndex",{get:function(){return this.dA},set:function(t){if(!Ni(t,16))throw new g("Provided dataReferenceIndex does not fit in 16 bits.");this.dA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 8},e.prototype.serializeBoxContent=function(t){for(var e=0;e<6;e++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},e}(oa),Jp=function(t){function e(e,i,s,n){var r,o,h=this;return(h=t.call(this,e,i)||this).extra=n,h.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,h.sampleSize=null!==(o=s.sampleSize)&&void 0!==o?o:16,h.sampleRate=s.sampleRate,h}return Dt(e,t),w.defineProperty(e.prototype,"channelCount",{get:function(){return this.fA},set:function(t){if(!Ni(t,16))throw new g("Provided channelCount does not fit in 16 bits.");this.fA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleSize",{get:function(){return this._A},set:function(t){if(!Ni(t,16))throw new g("Provided sampleSize does not fit in 16 bits.");this._A=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleRate",{get:function(){return this.vA},set:function(t){if(!Ni(oe(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.vA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(i=null===(e=this.extra)||void 0===e?void 0:e.length)&&void 0!==i?i:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.channelCount,16),e.writer.writeUInt(this.sampleSize,16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,16),e.writer.writeUInt(oe(this.sampleRate,16),32),this.extra&&vh(e.writer,this.extra)},e}(Qp);r();!function(t){function e(e){var i=t.call(this,"stco",0,0)||this;return i.entries=e,i}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.mA},set:function(t){if(!Ni(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ni(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.mA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(W);r();!function(t){function e(e){var i=t.call(this,"clap")||this;return i.cleanApertureWidthN=e.cleanApertureWidthN,i.cleanApertureWidthD=e.cleanApertureWidthD,i.cleanApertureHeightN=e.cleanApertureHeightN,i.cleanApertureHeightD=e.cleanApertureHeightD,i.horizOffN=e.horizOffN,i.horizOffD=e.horizOffD,i.vertOffN=e.vertOffN,i.vertOffD=e.vertOffD,i}Dt(e,t),w.defineProperty(e.prototype,"cleanApertureWidthN",{get:function(){return this.gA},set:function(t){if(!Ni(t,32))throw new g("Provided cleanApertureWidthN does not fit in 32 bits.");this.gA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"cleanApertureWidthD",{get:function(){return this.pA},set:function(t){if(!Ni(t,32))throw new g("Provided cleanApertureWidthD does not fit in 32 bits.");this.pA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"cleanApertureHeightN",{get:function(){return this.wA},set:function(t){if(!Ni(t,32))throw new g("Provided cleanApertureHeightN does not fit in 32 bits.");this.wA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"cleanApertureHeightD",{get:function(){return this.yA},set:function(t){if(!Ni(t,32))throw new g("Provided cleanApertureHeightD does not fit in 32 bits.");this.yA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"horizOffN",{get:function(){return this.bA},set:function(t){if(!Ni(t,32))throw new g("Provided horizOffN does not fit in 32 bits.");this.bA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"horizOffD",{get:function(){return this.AA},set:function(t){if(!Ni(t,32))throw new g("Provided horizOffD does not fit in 32 bits.");this.AA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"vertOffN",{get:function(){return this.SA},set:function(t){if(!Ni(t,32))throw new g("Provided vertOffN does not fit in 32 bits.");this.SA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"vertOffD",{get:function(){return this.TA},set:function(t){if(!Ni(t,32))throw new g("Provided vertOffD does not fit in 32 bits.");this.TA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 32},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(Fh);r();!function(t){function e(e,i){var s=t.call(this,"ctts",e,0)||this;return s.entries=i,s}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.mA},set:function(t){if(!Ni(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ni(t.sampleCount,32)||!Ni(t.sampleOffset,32)})))throw new g("Not all entries can be represented in 64 bits.");this.mA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.sampleCount,32),0===this.version?e.writer.writeUInt(n.sampleOffset,32):1===this.version&&e.writer.writeInt(n.sampleOffset,32)}}}(W);r();!function(t){function e(e){var i=t.call(this,"url ",0,void 0===e?1:0)||this;return i.location=e,i}Dt(e,t),w.defineProperty(e.prototype,"location",{get:function(){return this.kA},set:function(t){this.flags=void 0===t?1:0,this.kA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this);return this.location?e+this.location.length+1:e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.location&&(e.writer.writeString(this.location),e.writer.writeByte(0))}}(W);r();!function(t){function e(e,i,s){var n=t.call(this,"urn ",0,s)||this;return n.name=e,n.location=i,n}Dt(e,t),w.defineProperty(e.prototype,"location",{get:function(){return this.kA},set:function(t){if(1&this.flags)throw new g("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.kA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?e+this.location.length+1:e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.name),e.writer.writeByte(0),this.location&&(e.writer.writeString(this.location),e.writer.writeByte(0))}}(W);r();!function(t){function e(){return t.call(this,"dinf")||this}Dt(e,t)}(oa);r(),r();var br=function(t){function e(e,i,s){var n=t.call(this,e)||this;if(n.version=i,!Ni(i,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Dt(e,t),w.defineProperty(e.prototype,"flags",{get:function(){return this.__},set:function(t){this.__=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},e.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},e}(jp);!function(t){function e(){return t.call(this,"dref",0,0)||this}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.boxes.length,32)}}(br);r(),r();var $p=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"elst",i,s)||this;return n.entries=e,n}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"entries",{get:function(){return this.mA},set:function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];if(!Ni(s.segmentDuration,this.bitSize))throw new g("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!Ni(s.mediaTime,this.bitSize))throw new g("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!Ni(s.mediaRateInteger,16))throw new g("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!Ni(s.mediaRateFraction,16))throw new g("Provided mediaRateFraction does not fit in 16 bits.")}this.mA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(e)},e}(W),tw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return Dt(e,t),e.prototype.serializeElstBoxContent=function(t){for(var e,i=0,s=this.entries;i<s.length;i++){var n=s[i];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(e=n.mediaRateFraction)&&void 0!==e?e:0,16)}},e}($p),ew=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return Dt(e,t),e.prototype.serializeElstBoxContent=function(t){for(var e,i=0,s=this.entries;i<s.length;i++){var n=s[i];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(e=n.mediaRateFraction)&&void 0!==e?e:0,16)}},e}($p);function iw(t){for(var e=t.data,i=Hp(e.nextUint32()),s=i.version,n=i.flags,r=e.nextUint32(),o=[],h=0;h<r;h++){var a=void 0,u=void 0;0===s?(a=e.nextUint32(),u=e.nextInt32()):(a=e.nextUint64(),u=e.nextInt64());var c=e.nextInt16(),l=e.nextInt16();o.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new tw(o,n.raw):new ew(o,n.raw)}var sw=function(t){function e(){return t.call(this,"edts")||this}return Dt(e,t),e}(oa);function nw(t){for(var e=new sw,i=0,s=ci(t.data);i<s.length;i++){var n=s[i];Ct(n,"elst")?e.boxes.push(iw(n)):e.boxes.push(ai(n))}return e}r(),r();var rw=function(t){function e(e,i,s,n){var r=t.call(this,e)||this;return r.majorBrand=i,r.minorVersion=s,r.compatibleBrands=n,r}return Dt(e,t),w.defineProperty(e.prototype,"majorBrand",{get:function(){return this.EA},set:function(t){if(4!==t.length)throw new g("the provided major brand does not conform to the 4 character requirement");this.EA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"minorVersion",{get:function(){return this.xA},set:function(t){if(!Ni(t,32))throw new g("the provided minor version does not fit in 32 bits.");this.xA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"compatibleBrands",{get:function(){return this.RA},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new g("Some of the compatible brands do not conform to the 4 character requirement");this.RA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},e.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var e=0,i=this.compatibleBrands;e<i.length;e++){var s=i[e];t.writer.writeString(s)}},e}(Fh),ow=function(t){function e(e,i,s){return t.call(this,"ftyp",e,i,s)||this}return Dt(e,t),e}(rw);function hw(t){for(var e=t.data,i=e.nextChars(4),s=e.nextUint32(),n=[];e.cursor.offset<e.data.byteLength;)n.push(e.nextChars(4));return new ow(i,s,n)}r();var aw=function(t){function e(e,i){void 0===i&&(i="free");var s=t.call(this,i)||this;return s.data=e,s}return Dt(e,t),e.prototype.getBoxContentSize=function(){var t,e;return null!==(e=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0},e.prototype.serializeBoxContent=function(t){this.data&&t.concat(R.from(this.data))},e}(Fh);r(),r();var uw=function(t){function e(e,i,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=e.creation,r.modificationTime=e.modification,r.timescale=e.scale,r.duration=e.duration,r.language=i,r}return Dt(e,t),w.defineProperty(e.prototype,"creationTime",{get:function(){return this.IA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.IA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"modificationTime",{get:function(){return this.CA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.CA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"timescale",{get:function(){return this.PA},set:function(t){if(!Ni(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.PA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"duration",{get:function(){return this.DA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.DA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"language",{get:function(){return this.NA},set:function(t){if(!fw(t))throw new g("Expected an ISO-639-2/T language code");this.NA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeMdiaContent(e),e.writer.writeBit(0);for(var i=0,s=this.language;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.charCodeAt(0)-96,5)}e.writer.writeUInt(0,16)},e}(W),cw=function(t){function e(e,i,s){return void 0===s&&(s=0),t.call(this,e,i,0,s)||this}return Dt(e,t),e.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},e}(uw),lw=function(t){function e(e,i,s){return void 0===s&&(s=0),t.call(this,e,i,1,s)||this}return Dt(e,t),e.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(uw);function dw(t){var e=t.data,i=Hp(e.nextUint32()),s=i.version,n=i.flags,r=Zp(e,s),o=new yp(R.from(e.nextUint8Array(2)));o.skipBits(1);for(var h=[],a=0;a<3;a++)h.push(o.readUInt(5));var u=h.map((function(t){return String.fromCharCode(t+96)})).join("");return fw(u)||(u="und"),e.skip(2),0===s?new cw(r,u,n.raw):new lw(r,u,n.raw)}function fw(t){return/^[a-z]{3}$/.test(t)}var _w=function(t){function e(){return t.call(this,"mdia")||this}return Dt(e,t),e}(oa);function vw(t){for(var e=new _w,i=0,s=ci(t.data);i<s.length;i++){var n=s[i];Ct(n,"mdhd")?e.boxes.push(dw(n)):Ct(n,"hdlr")?e.boxes.push(Yp(n)):e.boxes.push(ai(n))}return e}r();var mw=function(t){function e(){var e=t.call(this,"mdat")||this;return e.data=new R,e}return Dt(e,t),e.prototype.getBoxContentSize=function(){return this.data.length},e.prototype.serializeBoxContent=function(t){t.concat(this.data)},e}(Fh);function gw(t){var e=t.data,i=e.nextUint8Array(e.data.byteLength-e.cursor.offset),s=new mw;return s.data.pushRange(i),s}r();!function(t){function e(){return t.call(this,"minf")||this}Dt(e,t)}(oa);r();var pw;!function(t){function e(e){var i=t.call(this,"meta",0,0)||this;return i.handler=e,i}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.handler.serialize())}}(br);r(),r(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(pw||(pw={})),r();var ww,yw,bw={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function Aw(t,e){e.writer.writeUInt(oe(t.a,16),32),e.writer.writeUInt(oe(t.b,16),32),e.writer.writeUInt(oe(0,30),32),e.writer.writeUInt(oe(t.c,16),32),e.writer.writeUInt(oe(t.d,16),32),e.writer.writeUInt(oe(0,30),32),e.writer.writeUInt(oe(t.x,16),32),e.writer.writeUInt(oe(t.y,16),32),e.writer.writeUInt(oe(1,30),32)}function Sw(t,e){var i,s,n,r;e.writer.writeUInt(null!==(i=t.isLeading)&&void 0!==i?i:ww.UNKNOWN,2),e.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:yw.UNKNOWN,2),e.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:yw.UNKNOWN,2),e.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:yw.UNKNOWN,2)}function Tw(t,e){var i,s,n;e.writer.writeUInt(0,4),Sw(t,e),e.writer.writeUInt(null!==(i=t.samplePaddingValue)&&void 0!==i?i:0,3),e.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),e.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}r(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(ww||(ww={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(yw||(yw={})),r(),r();var kw=function(){};r(),r(),r();var Ew=function(t){function e(e,i,s){var n=t.call(this,"pssh",e,0)||this;return n.systemId=i,n.data=s,n}return Dt(e,t),w.defineProperty(e.prototype,"systemId",{get:function(){return this.MA},set:function(t){if(16!==t.length)throw new g("Provided systemId length is not 16.");this.MA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"data",{get:function(){return this.Sp},set:function(t){if(!Ni(t.length,32))throw new g("Provided data length does not fit in 32 bits.");this.Sp=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},e.prototype.serializeVersionBoxContent=function(t){},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(R.from(this.systemId)),this.serializeVersionBoxContent(e),e.writer.writeUInt(this.data.length,32),e.concat(R.from(this.data))},e}(W),xw=function(t){function e(e,i){return t.call(this,0,e,i)||this}return Dt(e,t),e}(Ew),Rw=function(t){function e(e,i,s){var n=t.call(this,1,e,i)||this;return n.kIds=s,n}return Dt(e,t),w.defineProperty(e.prototype,"kIds",{get:function(){return this.LA},set:function(t){if(!Ni(t.length,32))throw new g("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new g("Not all provided key ids are 16 bytes long.");this.LA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var e=0,i=this.kIds;e<i.length;e++){var s=i[e];t.concat(R.from(s))}},e}(Ew);function Iw(t){var e=t.data.nextUint8();t.data.skip(3);var i=t.data.nextUint8Array(16),s=[];if(1===e)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var o=t.data.nextUint32(),h=t.data.nextUint8Array(o);return 1===e?new Rw(i,h,s):new xw(i,h)}r(),r();var Cw=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"mehd",i,s)||this;return n.fragmentDuration=e,n}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"fragmentDuration",{get:function(){return this.BA},set:function(t){if(!Ni(t,this.bitSize))throw new g("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.BA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},e}(W),Pw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.fragmentDuration,32)},e}(Cw),Dw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),e.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},e}(Cw);function Nw(t){var e=t.data,i=Hp(e.nextUint32()),s=i.version,n=i.flags;return 0===s?new Pw(e.nextUint32(),n.raw):new Dw(e.nextUint64(),n.raw)}r();var Mw=function(t){function e(e,i,s,n){void 0===i&&(i={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,o,h,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=e,a.defaultSampleDescriptionIndex=null!==(r=null==i?void 0:i.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(o=i.sampleDuration)&&void 0!==o?o:0,a.defaultSampleSize=null!==(h=i.sampleSize)&&void 0!==h?h:0,a.defaultSampleFlags=i.sampleFlags,a}return Dt(e,t),w.defineProperty(e.prototype,"trackId",{get:function(){return this.OA},set:function(t){if(!Ni(t,32))throw new g("Provided track id does not fit in 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.FA},set:function(t){if(!Ni(t,32))throw new g("Provided default sample description index does not fit in 32 bits.");this.FA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleDuration",{get:function(){return this.VA},set:function(t){if(!Ni(t,32))throw new g("Provided default sample duration does not fit in 32 bits.");this.VA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.WA},set:function(t){if(!Ni(t,32))throw new g("Provided default sample size does not fit in 32 bits.");this.WA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleFlags",{get:function(){return this.UA},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!Ni(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Ni(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.UA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},e.prototype.serializeBoxContent=function(e){var i;t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32),e.writer.writeUInt(this.defaultSampleDescriptionIndex,32),e.writer.writeUInt(this.defaultSampleDuration,32),e.writer.writeUInt(this.defaultSampleSize,32),Tw(null!==(i=this.defaultSampleFlags)&&void 0!==i?i:{},e)},e}(W);function Lw(t){var e=t.data,i=Hp(e.nextUint32()),s=i.version,n=i.flags,r=e.nextUint32(),o=e.nextUint32(),h=e.nextUint32(),a=e.nextUint32(),u=Xp(new yp(R.from(e.nextUint8Array(4))));return new Mw(r,{sampleDescriptionIndex:o,sampleDuration:h,sampleSize:a,sampleFlags:u},s,n.raw)}var pc=function(t){function e(){return t.call(this,"mvex")||this}return Dt(e,t),e}(oa);function Bw(t){for(var e=new pc,i=0,s=ci(t.data);i<s.length;i++){var n=s[i];Ct(n,"mehd")?e.boxes.push(Nw(n)):Ct(n,"trex")?e.boxes.push(Lw(n)):e.boxes.push(ai(n))}return e}r();var Ow=function(t){function e(i,s,n,r,o){void 0===o&&(o=0);var h,a,u,c=this;return(c=t.call(this,"mvhd",r,o)||this).creationTime=i.creation,c.modificationTime=i.modification,c.timescale=i.scale,c.duration=i.duration,c.rate=null!==(h=n.rate)&&void 0!==h?h:e.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:e.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:bw,c.GA=s,c}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"creationTime",{get:function(){return this.IA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.IA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"modificationTime",{get:function(){return this.CA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.CA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"timescale",{get:function(){return this.PA},set:function(t){if(!Ni(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.PA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"duration",{get:function(){return this.DA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.DA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"rate",{get:function(){return this.HA},set:function(t){if(!Ni(oe(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.HA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"volume",{get:function(){return this.ZA},set:function(t){if(!Ni(oe(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.ZA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"matrix",{get:function(){return this.XA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.XA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"nextTrackId",{get:function(){return this.GA},set:function(t){if(0===t)throw new g("NextTrackId cannot be 0.");if(!Ni(t,32))throw new g("NextTrackId cannot exceed 32 bits.");this.GA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeMvhdContent(e),e.writer.writeUInt(oe(this.rate,16),32),e.writer.writeUInt(oe(this.volume,8),16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),Aw(this.matrix,e);for(var i=0;i<6;i++)e.writer.writeUInt(0,32);e.writer.writeUInt(this.nextTrackId,32)},e.DEFAULT_RATE=1,e.DEFAULT_VOLUME=1,e}(W),Fw=function(t){function e(e,i,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,e,i,s,0,n)||this}return Dt(e,t),e.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},e}(Ow),Vw=function(t){function e(e,i,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,e,i,s,1,n)||this}return Dt(e,t),e.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(Ow);function Ww(t){var e=t.data,i=Hp(e.nextUint32()),s=i.version,n=i.flags,r=Zp(e,s),o=nt(e.nextUint32(),16),h=nt(e.nextUint16(),8);e.skip(2),e.skip(8);var a=zp(e);e.skip(24);var u=e.nextUint32();return 0===s?new Fw(r,u,{rate:o,volume:h,matrix:a},n.raw):new Vw(r,u,{rate:o,volume:h,matrix:a},n.raw)}r(),r();var Uw=function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h={});var a,u,c,l=this;return l=t.call(this,"tkhd",e,function(t){var e,i,s,n;return{trackEnabled:null===(e=null==t?void 0:t.trackEnabled)||void 0===e||e,trackInMovie:null===(i=null==t?void 0:t.trackInMovie)||void 0===i||i,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(h))||this,l.creationTime=i.creation,l.modificationTime=i.modification,l.trackId=s,l.duration=i.duration,l.volume=n,l.width=r,l.height=o,l.layer=null!==(a=h.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=h.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=h.matrix)&&void 0!==c?c:bw,l}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"creationTime",{get:function(){return this.IA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.IA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"modificationTime",{get:function(){return this.CA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.CA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"trackId",{get:function(){return this.OA},set:function(t){if(0===t)throw new g("trackId cannot be 0.");if(!Ni(t,32))throw new g("trackId cannot exceed 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"duration",{get:function(){return this.DA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.DA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"volume",{get:function(){return this.ZA},set:function(t){if(!Ni(oe(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this.ZA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"width",{get:function(){return this.zA},set:function(t){if(!Ni(oe(t,16),32))throw new g("Provided width does not fit in 32 bits (fixed 16.16).");this.zA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"height",{get:function(){return this.qA},set:function(t){if(!Ni(oe(t,16),32))throw new g("Provided height does not fit in 32 bits (fixed 16.16).");this.qA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"layer",{get:function(){return this.YA},set:function(t){if(!Ni(t,16))throw new g("Provided layer does not fit in 16 bits.");this.YA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"alternateGroup",{get:function(){return this.KA},set:function(t){if(!Ni(t,16))throw new g("Provided alternateGroup does not fit in 16 bits.");this.KA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"matrix",{get:function(){return this.XA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.XA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},e.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeTkhdContent(e),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.layer,16),e.writer.writeUInt(this.alternateGroup,16),e.writer.writeUInt(oe(this.volume,8),16),e.writer.writeUInt(0,16),Aw(this.matrix,e),e.writer.writeUInt(oe(this.width,16),32),e.writer.writeUInt(oe(this.height,16),32)},e}(W),Gw=function(t){function e(e,i,s,n,r,o){return t.call(this,0,e,i,s,n,r,o)||this}return Dt(e,t),e.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},e}(Uw),Hw=function(t){function e(e,i,s,n,r,o){return t.call(this,1,e,i,s,n,r,o)||this}return Dt(e,t),e.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(Uw);function Zw(t){var e,i,s,n,r=t.data,o=Hp(r.nextUint32()),h=o.version,a=o.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===h?(e=r.nextUint32(),i=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(e=r.nextUint64(),i=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),_=r.nextInt16(),v=nt(r.nextInt16(),8);r.skip(2);var m=zp(r),g=nt(r.nextUint32(),16),p=nt(r.nextUint32(),16);return 0===h?new Gw({creation:e,modification:i,duration:n},s,v,g,p,{layer:f,matrix:m,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new Hw({creation:e,modification:i,duration:n},s,v,g,p,{layer:f,matrix:m,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var Xw=function(t){function e(){return t.call(this,"trak")||this}return Dt(e,t),e}(oa);function zw(t){for(var e=new Xw,i=0,s=ci(t.data);i<s.length;i++){var n=s[i];Ct(n,"tkhd")?e.boxes.push(Zw(n)):Ct(n,"mdia")?e.boxes.push(vw(n)):Ct(n,"edts")?e.boxes.push(nw(n)):e.boxes.push(ai(n))}return e}var qw=function(t){function e(){return t.call(this,"moov")||this}return Dt(e,t),e}(oa);function Yw(t){for(var e=new qw,i=0,s=ci(t.data);i<s.length;i++){var n=s[i];Ct(n,"mvhd")?e.boxes.push(Ww(n)):Ct(n,"trak")?e.boxes.push(zw(n)):Ct(n,"mvex")?e.boxes.push(Bw(n)):Ct(n,"pssh")?e.boxes.push(Iw(n)):e.boxes.push(ai(n))}return e}r(),r(),r();var Kw=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",i,s)||this;return n.baseMediaDecodeTime=e,n}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"baseMediaDecodeTime",{get:function(){return this.jA},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.jA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},e}(W),jw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.baseMediaDecodeTime,32)},e}(Kw),mc=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return Dt(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),e.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},e}(Kw);function Qw(t){var e=t.data,i=Hp(e.nextUint32()),s=i.version,n=i.flags;return 0===s?new jw(e.nextUint32(),n.raw):new mc(e.nextUint64(),n.raw)}r();var Jw=function(t){function e(e,i){void 0===i&&(i=0);var s=t.call(this,"tfhd",i,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(e))||this;return s.trackId=e.trackId,s.baseDataOffset=e.baseDataOffset,s.sampleDescriptionIndex=e.sampleDescriptionIndex,s.defaultSampleDuration=e.defaultSampleDuration,s.defaultSampleSize=e.defaultSampleSize,s.defaultSampleFlags=e.defaultSampleFlags,s}return Dt(e,t),w.defineProperty(e.prototype,"trackId",{get:function(){return this.OA},set:function(t){if(!Ni(t,32))throw new g("Provided track id does not fit in 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"baseDataOffset",{get:function(){return this.QA},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is not set.");if(t&&!Ni(t,64))throw new g("Provided baseDataOffset does not fit in 32 bits.");this.QA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleDescriptionIndex",{get:function(){return this.JA},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is not set.");if(t&&!Ni(t,32))throw new g("Provided sampleDescriptionIndex does not fit in 32 bits.");this.JA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleDuration",{get:function(){return this.VA},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is not set.");if(t&&!Ni(t,32))throw new g("Provided defaultSampleDuration does not fit in 32 bits.");this.VA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.WA},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is not set.");if(t&&!Ni(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.WA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"defaultSampleFlags",{get:function(){return this.UA},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!Ni(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Ni(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.UA=t},enumerable:!1,configurable:!0}),e.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(e+=8),this.flags.sampleDescriptionIndexPresent&&(e+=4),this.flags.defaultSampleDurationPresent&&(e+=4),this.flags.defaultSampleSizePresent&&(e+=4),this.flags.defaultSampleFlagsPresent&&(e+=4),e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(e.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),e.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&e.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&e.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&e.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Tw(this.defaultSampleFlags,e)},e}(W);function $w(t){var e=t.data,i=e.nextUint8(),s=new yp(R.from(e.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var o=Boolean(s.readBit()),h=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=e.nextUint32(),d=c?e.nextUint64():void 0,f=u?e.nextUint32():void 0,_=a?e.nextUint32():void 0,v=h?e.nextUint32():void 0,m=o?Xp(new yp(R.from(e.nextUint8Array(4)))):void 0;return new Jw({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:_,defaultSampleSize:v,defaultSampleFlags:m},i)}r();var ty=function(t){function e(e,i,s){var n=t.call(this,"trun",e,function(t){var e,i,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(e=t.sampleDurationPresent)&&void 0!==e&&e,sampleSizePresent:null!==(i=t.sampleSizePresent)&&void 0!==i&&i,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(i))||this;return n.dataOffset=i.dataOffset,n.samples=s,n.firstSampleFlags=i.firstSampleFlags,n}return Dt(e,t),w.defineProperty(e.prototype,"dataOffset",{get:function(){return this.$A},set:function(t){if(t&&!Ni(t,32))throw new g("Provided data offset does not fit in 32 bits.");this.$A=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"firstSampleFlags",{get:function(){return this.tS},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!Ni(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Ni(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.tS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"samples",{get:function(){return this.eS},set:function(t){var e,i;if(!Ni(t.length,32))throw new g("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new g("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new g("The sample duration present flag is not set.");if(r.duration&&!Ni(r.duration,32))throw new g("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new g("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new g("The sample size present flag is not set.");if(r.size&&!Ni(r.size,32))throw new g("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is not set.");if((null===(e=r.flags)||void 0===e?void 0:e.samplePaddingValue)&&!Ni(r.flags.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null===(i=r.flags)||void 0===i?void 0:i.sampleDegradationPriority)&&!Ni(r.flags.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!Ni(r.compositionTimeOffset,32))throw new g("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.eS=t},enumerable:!1,configurable:!0}),e.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(e+=4),this.flags.firstSampleFlagsPresent&&(e+=4),this.flags.sampleDurationPresent&&(e+=4*this.samples.length),this.flags.sampleSizePresent&&(e+=4*this.samples.length),this.flags.sampleFlagsPresent&&(e+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(e+=4*this.samples.length),e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&e.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Tw(this.firstSampleFlags,e);for(var i=0,s=this.samples;i<s.length;i++){var n=s[i];this.flags.sampleDurationPresent&&e.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&e.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&Tw(n.flags,e),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?e.writer.writeUInt(n.compositionTimeOffset,32):e.writer.writeInt(n.compositionTimeOffset,32))}},e}(W);function ey(t){var e=t.data,i=e.nextUint8(),s=new yp(R.from(e.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),o=Boolean(s.readBit()),h=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=e.nextUint32(),l={sampleDurationPresent:h,sampleSizePresent:o,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=e.nextInt32()),a&&(l.firstSampleFlags=Xp(new yp(R.from(e.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var _={};h&&(_.duration=e.nextUint32()),o&&(_.size=e.nextUint32()),r&&(_.flags=Xp(new yp(R.from(e.nextUint8Array(4))))),n&&(_.compositionTimeOffset=0===i?e.nextUint32():e.nextInt32()),d.push(_)}return new ty(i,l,d)}var Eh=function(t){function e(){return t.call(this,"traf")||this}return Dt(e,t),e}(oa);function iy(t){for(var e=new Eh,i=0,s=ci(t.data);i<s.length;i++){var n=s[i];Ct(n,"tfhd")?e.boxes.push($w(n)):Ct(n,"tfdt")?e.boxes.push(Qw(n)):Ct(n,"trun")?e.boxes.push(ey(n)):e.boxes.push(ai(n))}return e}var sy=function(t){function e(){return t.call(this,"moof")||this}return Dt(e,t),e}(oa);function ny(t){for(var e=new sy,i=0,s=ci(t.data);i<s.length;i++){var n=s[i];Ct(n,"traf")?e.boxes.push(iy(n)):Ct(n,"pssh")?e.boxes.push(Iw(n)):e.boxes.push(ai(n))}return e}r();!function(t){function e(e){var i=t.call(this,"mfhd",0,0)||this;return i.sequenceNumber=e,i}Dt(e,t),w.defineProperty(e.prototype,"sequenceNumber",{get:function(){return this.iS},set:function(t){if(!Ni(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.iS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.sequenceNumber,32)}}(W);r();var ry=function(t){function e(e){var i=t.call(this,"frma")||this;return i.codingName=e,i}return Dt(e,t),w.defineProperty(e.prototype,"codingName",{get:function(){return this.sS},set:function(t){if(4!==t.length)throw new g("Provided coding name was not 4 characters long.");this.sS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},e}(Fh);r();!function(t){function e(e,i){var s=t.call(this,"pasp")||this;return s.hSpacing=e,s.vSpacing=i,s}Dt(e,t),w.defineProperty(e.prototype,"hSpacing",{get:function(){return this.nS},set:function(t){if(!Ni(t,32))throw new g("Provided hSpacing does not fit in 32 bits.");this.nS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"vSpacing",{get:function(){return this.rS},set:function(t){if(!Ni(t,32))throw new g("Provided vSpacing does not fit in 32 bits.");this.rS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 8},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(Fh);r();!function(t){function e(e,i,s){var n=t.call(this,e)||this;return n.sample=i,n.sinf=s,n}Dt(e,t),e.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},e.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(oa);r();!function(t){function e(e,i,s){var n=t.call(this,"sinf")||this;return n.schm=i,n.schi=s,n.frma=new ry(e),n}Dt(e,t),e.prototype.getBoxContentSize=function(){var t,e,i,s;return this.frma.getSize()+(null!==(e=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==e?e:0)+(null!==(s=null===(i=this.schi)||void 0===i?void 0:i.getSize())&&void 0!==s?s:0)},e.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(Fh);r();var oy=function(t){function e(e,i,s){var n=t.call(this,"saio",e,void 0===s?0:1)||this;return n.entries=i,n.explicitAuxInfoType=s,n}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"entries",{get:function(){return this.mA},set:function(t){var e=this;if(!Ni(t.length,32))throw new g("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!Ni(t,e.bitSize)})))throw new g("Not all provided entries fit in ".concat(this.bitSize," bits."));this.mA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"explicitAuxInfoType",{get:function(){return this.oS},set:function(t){if(void 0===t)this.flags=0;else{if(!Ni(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!Ni(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.oS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),void 0!==this.explicitAuxInfoType&&(e.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),e.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),e.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(e)},e}(W);(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Dt(e,t),e.prototype.serializeSaioContent=function(t){for(var e=0,i=this.entries;e<i.length;e++){var s=i[e];t.writer.writeUInt(s,32)}}})(oy),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Dt(e,t),e.prototype.serializeSaioContent=function(t){for(var e=0,i=this.entries;e<i.length;e++){var s=i[e];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(oy);r();!function(t){function e(e,i,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=e,n.sampleInfoSizes=i,n.explicitAuxInfoType=s,n}Dt(e,t),w.defineProperty(e.prototype,"defaultSampleInfoSize",{get:function(){return this.hS},set:function(t){if(!Ni(t,8))throw new g("Provided defaultSampleInfoSize does not fit in a single byte.");this.hS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"sampleInfoSizes",{get:function(){return this.aS},set:function(t){if(!Ni(t.length,32))throw new g("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!Ni(t,8)})))throw new g("Not all provided sampleInfoSizes fit in a byte.");this.aS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"explicitAuxInfoType",{get:function(){return this.oS},set:function(t){if(void 0===t)this.flags=0;else{if(!Ni(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!Ni(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.oS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},e.prototype.serializeBoxContent=function(e){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new g("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,e),void 0!==this.explicitAuxInfoType&&(e.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),e.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),e.writer.writeByte(this.defaultSampleInfoSize),e.writer.writeUInt(this.sampleInfoSizes.length,32);for(var i=0,s=this.sampleInfoSizes;i<s.length;i++){var n=s[i];e.writer.writeByte(n)}}}(W);r();!function(t){function e(e){var i=t.call(this,"sdtp",0,0)||this;return i.samples=e,i}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e);for(var i=0,s=this.samples;i<s.length;i++){Sw(s[i],e)}}}(W);r();!function(t){function e(e){return t.call(this,"stsd",e,0)||this}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.boxes.length,32)}}(br);r();var hy=function(t){function e(e,i,s){var n=t.call(this,"sgpd",e,0)||this;return n.entries=s,n.groupingType=i,n}return Dt(e,t),w.defineProperty(e.prototype,"groupingType",{get:function(){return this.uS},set:function(t){if(4!==t.length)throw new g("The provided groupingType does not equal 4 characters.");this.uS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.groupingType),this.serializeVersionBoxContent(e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];this.serializeEntryBoxContent(e,n)}},e.prototype.serializeEntryBoxContent=function(t,e){e.serializeBoxContent(t)},e}(W);(function(t){function e(e,i){return t.call(this,0,e,i)||this}Dt(e,t),e.prototype.serializeVersionBoxContent=function(t){}})(hy),function(t){function e(e,i,s){var n=t.call(this,1,e,s)||this;return n.defaultLength=i,n}Dt(e,t),w.defineProperty(e.prototype,"defaultLength",{get:function(){return this.cS},set:function(t){if(!Ni(t,32))throw new g("The provided defaultLength does not fit in 32 bits.");this.cS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},e.prototype.serializeEntryBoxContent=function(t,e){0===this.defaultLength&&t.writer.writeUInt(e.getBoxContentSize(),32),e.serializeBoxContent(t)}}(hy),function(t){function e(e,i,s,n){void 0===n&&(n=0);var r=this;if(e<2)throw new g("This constructor is only meant for versions 2 and up.");return(r=t.call(this,e,i,s)||this).defaultSampleDescriptionIndex=n,r}Dt(e,t),w.defineProperty(e.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.FA},set:function(t){if(!Ni(t,32))throw new g("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.FA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(hy);r();(function(t){function e(e){void 0===e&&(e=[]);var i=t.call(this,"stsz",0,0)||this;return i.sampleSizes=e,i}Dt(e,t),w.defineProperty(e.prototype,"sampleSizes",{get:function(){return this.lS},set:function(t){if(!Ni(t.length,32))throw new g("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!Ni(t,32)})))throw new g("Not all sampleSizes can be represented in 32 bits.");this.lS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeUInt(this.sampleSizes.length,32);for(var i=0,s=this.sampleSizes;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}})(W),function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=e,s.samples=i,s}Dt(e,t),w.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.WA},set:function(t){if(!Ni(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.WA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"samples",{get:function(){return this.eS},set:function(t){if(!Ni(t,32))throw new g("Number of allowed samples cannot fit in 32 bits.");this.eS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.defaultSampleSize,32),e.writer.writeUInt(this.samples,32)}}(W);r();!function(t){function e(){return t.call(this,"stbl")||this}Dt(e,t)}(oa);r();!function(t){function e(e){var i=t.call(this,"stsc",0,0)||this;return i.entries=e,i}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.mA},set:function(t){if(!Ni(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ni(t.firstChunk,32)||!Ni(t.sampleDescriptionIndex,32)||!Ni(t.samplesPerChunk,32)})))throw new g("Not all entries can be represented in 96 bits.");this.mA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.firstChunk,32),e.writer.writeUInt(n.samplesPerChunk,32),e.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(W);r();!function(t){function e(){return t.call(this,"schi")||this}Dt(e,t)}(oa);r();!function(t){function e(e,i,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=e,n.schemeVersion=i,n.schemeUri=s,n}Dt(e,t),w.defineProperty(e.prototype,"schemeType",{get:function(){return this.dS},set:function(t){if(4!==t.length)throw new g("The provided schemeType does not have a length of 4.");this.dS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"schemeVersion",{get:function(){return this.fS},set:function(t){if(!Ni(t,32))throw new g("The provided schemeVersion does not fit in 23 bits.");this.fS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"schemeUri",{get:function(){return this._S},set:function(t){if(t&&4!==t.length)throw new g("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this._S=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.schemeType),e.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(e.writer.writeString(this.schemeUri),e.writer.writeByte(0))}}(W);r();var ay=function(t){function e(e,i,s,n,r,o,h){void 0===h&&(h=0);var a=t.call(this,"sidx",e,h)||this;return a.referenceId=i,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=o,a}return Dt(e,t),w.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"referenceId",{get:function(){return this.vS},set:function(t){if(!Ni(t,32))throw new g("Provided referenceId does not fit in 32 bits.");this.vS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"timescale",{get:function(){return this.PA},set:function(t){if(!Ni(t,32))throw new g("Provided timescale does not fit in 32 bits.");this.PA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"earliestPresentationTime",{get:function(){return this.mS},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.mS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"firstOffset",{get:function(){return this.gS},set:function(t){if(!Ni(t,this.bitSize))throw new g("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.gS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"references",{get:function(){return this.pS},set:function(t){if(!Ni(t.length,16))throw new g("The number of provided reference items does not fit in 16 bits.");for(var e=0,i=t;e<i.length;e++){var s=i[e];if(!Ni(s.referencedSize,31))throw new g("Provided referenced size does not fit in 31 bits.");if(!Ni(s.subsegmentDuration,32))throw new g("Provided subsegment duration does not fit in 31 bits.");if(!Ni(s.sapType,3))throw new g("Provided SAP type does not fit in 3 bits.");if(!Ni(s.sapDeltaTime,28))throw new g("Provided SAP delta time does not fit in 28 bits.")}this.pS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.referenceId,32),e.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(e),e.writer.writeUInt(0,16),e.writer.writeUInt(this.references.length,16);for(var i=0,s=this.references;i<s.length;i++){var n=s[i];e.writer.writeBit(n.referenceType),e.writer.writeUInt(n.referencedSize,31),e.writer.writeUInt(n.subsegmentDuration,32),e.writer.writeBool(n.startsWithSap),e.writer.writeUInt(n.sapType,3),e.writer.writeUInt(n.sapDeltaTime,28)}},e}(W),uy=function(t){function e(e,i,s,n,r,o){return void 0===o&&(o=0),t.call(this,0,e,i,s,n,r,o)||this}return Dt(e,t),e.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},e}(ay),cy=function(t){function e(e,i,s,n,r,o){return void 0===o&&(o=0),t.call(this,1,e,i,s,n,r,o)||this}return Dt(e,t),e.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},e}(ay);r();var ly=function(t){function e(e,i,s){return t.call(this,"styp",e,i,s)||this}return Dt(e,t),e}(rw);function dy(t){for(var e=t.data,i=e.nextChars(4),s=e.nextUint32(),n=[];e.cursor.offset<e.data.byteLength;)n.push(e.nextChars(4));return new ly(i,s,n)}r();!function(t){function e(e){void 0===e&&(e=0);var i=t.call(this,"smhd",0,0)||this;return i.balance=e,i}Dt(e,t),w.defineProperty(e.prototype,"balance",{get:function(){return this.wS},set:function(t){if(t<-1||t>1)throw new g("Provided balance does not fit in the allowed range [-1, 1].");if(!Ni(oe(t,8),16))throw new g("Provided balance does not fit in 16 bits (fixed 8.8).");this.wS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(oe(this.balance,8),16),e.writer.writeUInt(0,16)}}(W);r();!function(t){function e(e){var i=t.call(this,"stss",0,0)||this;return i.entries=e,i}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.mA},set:function(t){if(!Ni(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ni(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.mA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(W);r();!function(t){function e(e){var i=t.call(this,"stts",0,0)||this;return i.entries=e,i}Dt(e,t),w.defineProperty(e.prototype,"entries",{get:function(){return this.mA},set:function(t){if(!Ni(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Ni(t.sampleCount,32)||!Ni(t.sampleDelta,32)})))throw new g("Not all entries can be represented in 64 bits.");this.mA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.sampleCount,32),e.writer.writeUInt(n.sampleDelta,32)}}}(W);r();!function(t){function e(e){var i=t.call(this,"trep",0,0)||this;return i.trackId=e,i}Dt(e,t),w.defineProperty(e.prototype,"trackId",{get:function(){return this.OA},set:function(t){if(!Ni(t,32))throw new g("The provided trackId does not fit in 32 bits.");this.OA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32)}}(br);r();!function(t){function e(){return t.call(this,"udta")||this}Dt(e,t)}(oa);r();var fy={red:0,green:0,blue:0};!function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=fy);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=e,s.opColor=i,s}Dt(e,t),w.defineProperty(e.prototype,"opColor",{get:function(){return this.yS},set:function(t){if(!Ni(t.red,16)||!Ni(t.green,16)||!Ni(t.blue,16))throw new g("Not all colors could be represented in 16 bits.");this.yS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.graphicsMode,16),e.writer.writeUInt(this.opColor.red,16),e.writer.writeUInt(this.opColor.green,16),e.writer.writeUInt(this.opColor.blue,16)}}(W);r();var _y=function(t){function e(e,i,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o,h,a,u,c,l=this;return(l=t.call(this,e,i)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(o=s.horizontal)&&void 0!==o?o:72,l.verticalResolution=null!==(h=s.vertical)&&void 0!==h?h:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return Dt(e,t),w.defineProperty(e.prototype,"width",{get:function(){return this.zA},set:function(t){if(!Ni(t,16))throw new g("Provided width does not fit in 16 bits.");this.zA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"height",{get:function(){return this.qA},set:function(t){if(!Ni(t,16))throw new g("Provided height does not fit in 16 bits.");this.qA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"horizontalResolution",{get:function(){return this.bS},set:function(t){if(!Ni(oe(t,16),32))throw new g("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.bS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"verticalResolution",{get:function(){return this.SS},set:function(t){if(!Ni(oe(t,16),32))throw new g("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.SS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"compressorName",{get:function(){return this.TS},set:function(t){if(t.length>31)throw new g("The provided compressorName should at most be 31 characters long.");this.TS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"frameCount",{get:function(){return this.kS},set:function(t){if(!Ni(t,16))throw new g("Provided frameCount does not fit in 16 bits.");this.kS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"depth",{get:function(){return this.ES},set:function(t){if(!Ni(t,16))throw new g("Provided depth does not fit in 16 bits.");this.ES=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e,i,s,n,r,o;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(i=null===(e=this.clap)||void 0===e?void 0:e.getSize())&&void 0!==i?i:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(o=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==o?o:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.width,16),e.writer.writeUInt(this.height,16),e.writer.writeUInt(oe(this.horizontalResolution,16),32),e.writer.writeUInt(oe(this.verticalResolution,16),32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.frameCount,16),e.writer.writeByte(this.compressorName.length),e.writer.writeString(this.compressorName);for(var i=0;i<31-this.compressorName.length;i++)e.writer.writeByte(0);e.writer.writeUInt(this.depth,16),e.writer.writeInt(-1,16),this.clap&&e.concat(this.clap.serialize()),this.pasp&&e.concat(this.pasp.serialize()),this.extra&&vh(e.writer,this.extra)},e}(Qp);r(),r();!function(t){function e(e){var i=t.call(this,"esds",0,0)||this;return i.esDescriptor=e,i}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof j?this.esDescriptor.length:this.esDescriptor.getSize())},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor instanceof j?e.concat(R.from(this.esDescriptor)):this.esDescriptor.serialize(e)}}(W);r();!function(t){function e(e,i,s){var n=t.call(this,"mp4a",e,s)||this;return n.esd=i,n}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.esd.serialize())}}(Jp);r();!function(t){function e(e,i,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",e,i,n)||this;return r.esDescriptor=s,r}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor.serialize(e)}}(_y);r();!function(t){function e(e,i){var s=t.call(this,"mp4s",e)||this;return s.esDescriptor=i,s}Dt(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor.serialize(e)}}(Qp);r(),r();!function(t){function e(e){var i=t.call(this,"avcC")||this;return i.decoderConfig=e,i}Dt(e,t),e.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},e.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(Fh);r();!function(){function t(t,e,i,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=i,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=e,this.spsSets=s,this.ppsSets=n}w.defineProperty(t.prototype,"version",{get:function(){return this.xS},set:function(t){if(!Ni(t,8))throw new g("Provided version does not fit in 8 bits.");this.xS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileIndication",{get:function(){return this.RS},set:function(t){if(!Ni(t,8))throw new g("Provided profileIndication does not fit in 8 bits.");this.RS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.IS},set:function(t){if(!Ni(t,8))throw new g("Provided profileCompatibility does not fit in 8 bits.");this.IS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"levelIndication",{get:function(){return this.CS},set:function(t){if(!Ni(t,8))throw new g("Provided levelIndication does not fit in 8 bits.");this.CS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"spsSets",{get:function(){return this.PS},set:function(t){if(!Ni(t.length,5))throw new g("Provided number of spsSets exceeds the max (32)");this.PS=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"ppsSets",{get:function(){return this.DS},set:function(t){if(!Ni(t.length,8))throw new g("Provided number of ppsSets exceeds the max (256)");this.DS=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,e){return t+e.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,e){return t+e.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var e=0,i=this.spsSets;e<i.length;e++){var s=i[e];t.writer.writeUInt(s.length,16),t.concat(R.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var o=r[n];t.writer.writeUInt(o.length,16),t.concat(R.from(o))}}}();r();!function(t){function e(e,i,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var o=t.call(this,"avc1",e,i,n)||this;return o.configurationBox=s,o.bitrateBox=r,o}Dt(e,t),e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(i=null===(e=this.bitrateBox)||void 0===e?void 0:e.getSize())&&void 0!==i?i:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.configurationBox.serialize()),this.bitrateBox&&e.concat(this.bitrateBox.serialize())}}(_y);r();!function(t){function e(e,i,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=e,n.max=i,n.avg=s,n}Dt(e,t),w.defineProperty(e.prototype,"bufferSizeDb",{get:function(){return this.rA},set:function(t){if(!Ni(t,32))throw new g("Provided bufferSizeDb does not fit in 32 bits.");this.rA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"max",{get:function(){return this.N_},set:function(t){if(!Ni(t,32))throw new g("Provided max does not fit in 32 bits.");this.N_=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"avg",{get:function(){return this.NS},set:function(t){if(!Ni(t,32))throw new g("Provided avg does not fit in 32 bits.");this.NS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 12},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(Fh);r(),r(),r();var vy=function(t){function e(e,i){var s,n,r,o,h=this;if(h=t.call(this,"tenc",e,0)||this,i.perSampleIvSize>0&&(null!==(n=null===(s=i.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new g("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return h.kId=i.kId,h.isProtected=null!==(r=i.isProtected)&&void 0!==r?r:1,i.perSampleIvSize>0?h.perSampleIvSize=i.perSampleIvSize:h.constantIv=null!==(o=i.constantIv)&&void 0!==o?o:new j(0),h}return Dt(e,t),w.defineProperty(e.prototype,"isProtected",{get:function(){return this.MS},set:function(t){if(!Ni(t,8))throw new g("Provided isProtected does not fit in 1 byte.");this.MS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"perSampleIvSize",{get:function(){return this.LS},set:function(t){if(![8,16].includes(t))throw new g("Provided perSampleIvSize does not match any allowed value [8, 16].");this.LS=t,this.FS=new j(0)},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"kId",{get:function(){return this.VS},set:function(t){if(16!==t.length)throw new g("Provided kId length is not 16.");this.VS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"constantIv",{get:function(){return this.FS},set:function(t){if(![8,16].includes(t.length))throw new g("Provided constant IV length does not match any allowed value [8, 16].");this.FS=t,this.LS=0},enumerable:!1,configurable:!0}),e.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeOwnContent(e)},e.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),vh(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),vh(t.writer,this.constantIv))},e}(W),my=(function(t){function e(e){return t.call(this,0,e)||this}Dt(e,t)}(vy),function(t){function e(e){var i=t.call(this,1,e)||this;return i.cryptByteBlocks=e.cryptByteBlock,i.skipByteBlocks=e.skipByteBlock,i}return Dt(e,t),w.defineProperty(e.prototype,"cryptByteBlocks",{get:function(){return this.WS},set:function(t){if(!Ni(t,4))throw new g("Provided cryptByteBlocks does not fit in 4 bits.");this.WS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"skipByteBlocks",{get:function(){return this.US},set:function(t){if(!Ni(t,4))throw new g("Provided skipByteBlocks does not fit in 4 bits.");this.US=t},enumerable:!1,configurable:!0}),e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},e}(vy));!function(t){function e(e){var i=t.call(this)||this;return i.tencBox=new my(e),i}Dt(e,t),e.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},e.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(kw);function gy(t){return void 0!==t.iv}function py(t){return void 0!==t.subsamples}r();!function(t){function e(e){var i=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return i.samples=e,i}Dt(e,t),w.defineProperty(e.prototype,"samples",{get:function(){return this.eS},set:function(t){var e;if(!Ni(t.length,32))throw new g("The number of samples provided does not fit in 32 bits.");for(var i=0,s=t;i<s.length;i++){var n=s[i];if(gy(n)&&![8,16].includes(n.iv.length))throw new g("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===e&&(e=py(n)),!0===e&&!py(n)||!1===e&&py(n))throw new g("Mix of samples with and without subsamples detected.");if(py(n)){if(!Ni(n.subsamples.length,16))throw new g("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];if(!Ni(h.clearData,16))throw new g("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!Ni(h.protectedData,23))throw new g("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=e&&e,this.eS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){for(var e=0,i=0,s=this.samples;i<s.length;i++){var n=s[i];gy(n)&&(e+=n.iv.length),py(n)&&(e+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.samples.length,32);for(var i=0,s=this.samples;i<s.length;i++){var n=s[i];if(gy(n)&&vh(e.writer,n.iv),py(n)){e.writer.writeUInt(n.subsamples.length,16);for(var r=0,o=n.subsamples;r<o.length;r++){var h=o[r];e.writer.writeUInt(h.clearData,16),e.writer.writeUInt(h.protectedData,32)}}}},e.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(W);r(),r();!function(t){function e(e,i,s,n,r){var o=t.call(this,"emsg",0,0)||this;return o.schemeIdUri=e,o.value=i,o.data=r,o.id=s,o.timescale=n.timescale,o.presentationTimeDelta=n.presentationTimeDelta,o.eventDuration=n.eventDuration,o}Dt(e,t),w.defineProperty(e.prototype,"timescale",{get:function(){return this.PA},set:function(t){if(!Ni(t,32))throw new g("The provided timescale does not fit in 32 bits.");this.PA=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"presentationTimeDelta",{get:function(){return this.GS},set:function(t){if(!Ni(t,32))throw new g("The provided presentationTimeDelta does not fit in 32 bits.");this.GS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"eventDuration",{get:function(){return this.HS},set:function(t){if(!Ni(t,32))throw new g("The provided eventDuration does not fit in 32 bits.");this.HS=t},enumerable:!1,configurable:!0}),w.defineProperty(e.prototype,"id",{get:function(){return this.ZS},set:function(t){if(!Ni(t,32))throw new g("The provided id does not fit in 32 bits.");this.ZS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.schemeIdUri),e.writer.writeByte(0),e.writer.writeString(this.value),e.writer.writeByte(0),e.writer.writeUInt(this.timescale,32),e.writer.writeUInt(this.presentationTimeDelta,32),e.writer.writeUInt(this.eventDuration,32),e.writer.writeUInt(this.id,32),e.concat(R.from(this.data))}}(W);r(),r(),r();var wy=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new Sp,e=0,i=this.boxes;e<i.length;e++){var s=i[e];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function yy(t,e){return function(i){var s=function(t,e){for(var i=t.data,s=t.cursor;s.offset<i.byteLength;){var n=Gp(i,s);if(!n.complete)return;if(Ct(n.box,e))return n.box}}(new Wp(Op(i),new Vp),t);if(!s)throw new g("".concat(t," box not found"));return e(s)}}var by=yy("moov",Yw),Ay=yy("sidx",(function(t){var e,i,s=t.data,n=Hp(s.nextUint32()),r=n.version,o=n.flags,h=s.nextUint32(),a=s.nextUint32();0===r?(e=s.nextUint32(),i=s.nextUint32()):(e=s.nextUint64(),i=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new yp(R.from(s.nextUint8Array(12))),f=d.readBit(),_=d.readUInt(31),v=d.readUInt(32),m=Boolean(d.readBit()),g=d.readUInt(3),p=d.readUInt(28);c.push({referenceType:f,referencedSize:_,subsegmentDuration:v,startsWithSap:m,sapType:g,sapDeltaTime:p})}return 0===r?new uy(h,a,e,i,c,o.raw):new cy(h,a,e,i,c,o.raw)})),Sy=yy("moof",ny),Ty=yy("pssh",Iw);function ky(t){return function(t){for(var e=new wy,i=0,s=ci(t);i<s.length;i++){var n=s[i];Ct(n,"ftyp")?e.boxes.push(hw(n)):Ct(n,"styp")?e.boxes.push(dy(n)):Ct(n,"moov")?e.boxes.push(Yw(n)):Ct(n,"moof")?e.boxes.push(ny(n)):Ct(n,"mdat")?e.boxes.push(gw(n)):e.boxes.push(ai(n))}return e}(new Wp(Op(t),new Vp))}var Ey=class extends Co{get XS(){return this.Fd}get zS(){return this.qS.expiration}get mb(){return this.YS}get KS(){return this.qS.sessionId}Ws(){if(this.jS)return this.Fd;const t=[];return t.push(Promise.resolve(this.qS.close())),t.push(Fe(1e3)),this.QS.Kw(Promise.race(t).catch(xy)),this.jS=!0,this.Fd}JS(t,e,i){if(Z.hm){const t=Ty(ma(e));if(1===t.version){e=new xw(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.qS.generateRequest(t,e)).catch(xy)}Dn(t){return Promise.resolve(this.qS.load(t)).catch(xy)}$S(){return Promise.resolve(this.qS.remove()).catch(xy)}tr(t){return Promise.resolve(this.qS.update(t)).catch(xy)}tT(){this.YS.Bb(),this.qS.keyStatuses.forEach(((t,e)=>{this.eT(e,t)})),this.wo(new te(this.YS))}eT(t,e){if("string"==typeof t){const i=t;t=e,e=i}const i=ma(t);if(this.iT===Xa&&16===i.byteLength&&(Z.Sm||Z.wg)){let t=ra(i),e=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,e,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.iT===Xa&&"status-pending"===e&&(e="usable"),this.YS.Mb(i,e)}constructor(t,e){super(),this.qS=t,this.iT=e,this.jS=!1,this.sT=()=>{this.tT()},this.nT=t=>{this.wo(new jh(this,t.messageType,fp(this.iT,t.message)))},this.rT=()=>{this.jS=!0,this.YS.Pb>0&&(this.YS.Bb(),this.wo(new te(this.YS))),this.qS.removeEventListener("keystatuseschange",this.sT),this.qS.removeEventListener("message",this.nT)},this.qS.addEventListener("keystatuseschange",this.sT),this.qS.addEventListener("message",this.nT),this.YS=new lp;const i=[];this.qS.closed&&i.push(Promise.resolve(this.qS.closed)),this.QS=new os,i.push(this.QS.Vb),this.Fd=Promise.race(i).then(this.rT,this.rT),this.tT()}};function xy(t){let e;if(t.message){const i=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);i&&(e=0|x(i[1],16))}throw new Js(t.message,void 0,e,t)}var Ry=class{async oT(t){return new Ey(this.hT.createSession(t),this.aT)}uT(t){return Promise.resolve(this.hT.setServerCertificate(t))}bn(t){return Promise.resolve(t.setMediaKeys(this.hT))}cT(t){return Promise.resolve(t.setMediaKeys(null))}er(){return Promise.resolve()}constructor(t,e,i){this.hT=t,this.aT=e,this.bd=i}},Iy=class{get aT(){return this.lT.keySystem}async dT(){const t=await this.lT.createMediaKeys();return new Ry(t,this.iT,this.fT)}_T(){return this.fT}constructor(t,e,i){this.lT=t,this.iT=e,this.fT=i}};r(),r();var uu={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function Gh(t){return Oh(t,uu.APPLICATION_MP4)||Oh(t,uu.VIDEO_MP4)||Oh(t,uu.AUDIO_MP4)}function Cy(t){return Oh(t,uu.VIDEO_WEBM)||Oh(t,uu.AUDIO_WEBM)}var Py=class{vT(t){for(const[e,i]of this.mT)if(e.toLowerCase()===t.toLowerCase())return i}constructor(t,e){this.Aw=t,this.mT=e}};function Dy(t){const e=t.trim(),i=e.indexOf(";");if(i<0)return new Py(e,[]);const s=e.substr(0,i).trim(),n=e.substr(i+1).trim(),r=[];let o=0,h=!1;for(let t=0;t<n.length;t++){const e=n[t];if(h||";"!==e)'"'===e&&(h=!h);else{const e=Ny(n.substr(o,t));e&&r.push(e),o=t+1}}if(o!==n.length){const t=Ny(n.substr(o));t&&r.push(t)}return new Py(s,r)}function Ny(t){const e=t.indexOf("=");if(e<0)return;const i=t.substr(0,e).trim();let s=t.substr(e+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[i,s]}function My(t){const e=t.trim(),i=e.indexOf(";");return i<0?e:e.substr(0,i).trim()}function Ly(t){let e=t;const i=e.match(/^avc1\.(\d+)\.(\d+)$/);if(i){const t=Number(i[1]),s=Number(i[2]);e="avc1."+Jh((t<<16|s).toString(16),6,"0")}return e}function By(t,e,i,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,gT:s.gT};let o=!1;if(s.audioCapabilities){const h=s.audioCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.audioCapabilities=h.filter((s=>Oy(t,e,i,s))),o=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const h=s.videoCapabilities.filter((t=>Boolean(t.contentType)));h.length&&(r.videoCapabilities=h.filter((s=>Oy(t,e,i,s))),o=!0,r.videoCapabilities.length&&(n=!0))}return o||(n=t(i,"video/mp4")),n?r:void 0}function Oy(t,e,i,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!ms(e,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(i,My(s.contentType))}function Fy(t){if(t.videoCapabilities)for(const e of t.videoCapabilities)if(e.contentType)return e.contentType;if(t.audioCapabilities)for(const e of t.audioCapabilities)if(e.contentType)return e.contentType}function Vy(t){const e=[];for(const i of t)i.encryptionScheme&&e.push({contentType:i.contentType,robustness:i.robustness});return t.concat(e)}function Wy(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(Uy))||!(!t.videoCapabilities||!t.videoCapabilities.some(Uy))}function Uy(t){return!t.robustness}function Gy(t,e){const i=[];for(const s of t)s.robustness?i.push(s):i.push(Bo({},s,{robustness:e}));return i}var Hy=class{async Cw(t,e){e=e.filter((t=>!t.gT));for(const t of e)t.audioCapabilities&&(t.audioCapabilities=Vy(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=Vy(t.videoCapabilities));if(t===um&&e.some(Wy)){const i=e.map((t=>function(t,e){return Bo({},t,{videoCapabilities:t.videoCapabilities?Gy(t.videoCapabilities,e):void 0,audioCapabilities:t.audioCapabilities?Gy(t.audioCapabilities,e):void 0})}(t,"SW_SECURE_CRYPTO")));try{const e=await Bl.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new Iy(e,t,s)}catch(t){}}const i=await Bl.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new Iy(i,t,s)}static pT(){return dr()}};r(),r(),r(),r();var Zy=class extends Co{get KS(){return this.wT&&this.wT.sessionId||""}get zS(){return NaN}get XS(){return this.yT.Vb}get mb(){return this.bT}async JS(t,e,i){this.AT(),this.ST=new os,this.oT(ma(e),i),await this.ST.Vb}oT(t,e){if(!t)throw new b("Expected initData to be defined but was "+t+".");const i=e&&e.playready&&e.playready.TT;let s;return s=e?this.kT.createSession(this.ET,t,i):this.kT.createSession(this.ET,t),s.addEventListener("mskeyclose",this.rT),s.addEventListener("mskeymessage",this.xT),s.addEventListener("mskeyerror",this.Ss),s.addEventListener("mskeyadded",this.IT),this.wT=s,this.CT("status-pending"),s}async Dn(t){return this.AT(),!0}async tr(t){if(this.PT=new os,this.AT(),!this.wT)return Promise.resolve();const e=ma(t);if(0===e.byteLength)throw new b("Cannot call update with an empty response.");this.wT.update(e),await this.PT.Vb}Ws(){return!this.jS&&this.wT&&(this.jS=!0,this.wT.close()),this.yT.Vb}async $S(){this.AT()}AT(){if(this.jS)throw new b("Already closing or closed.")}CT(t){this.bT.Bb(),this.bT.Mb(cp,t),this.wo(new te(this.bT))}constructor(t,e){super(),this.kT=t,this.ET=e,this.jS=!1,this.PT=void 0,this.ST=void 0,this.wT=void 0,this.rT=()=>{this.jS=!0,this.yT.Ob(void 0),this.wT&&(this.wT.removeEventListener("mskeyclose",this.rT),this.wT.removeEventListener("mskeymessage",this.xT),this.wT.removeEventListener("mskeyerror",this.Ss),this.wT.removeEventListener("mskeyadded",this.IT))},this.xT=t=>{this.ST&&(this.ST.Ob(void 0),this.ST=void 0),this.wo(new jh(this,"license-request",kc(t.message).buffer,t.destinationURL||void 0))},this.Ss=()=>{const t=this.wT&&this.wT.error;if(!t)return;const e=new Js("Unknown CDM error",t.code,t.systemCode);if(this.ST)this.ST.Fb(e),this.ST=void 0;else if(this.PT)this.PT.Fb(e),this.PT=void 0;else switch(e.Wb){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.CT("output-not-allowed");break;default:this.CT("internal-error")}},this.IT=()=>{this.ST&&(this.CT("usable"),this.ST.Ob(void 0),this.ST=void 0),this.PT&&(this.CT("usable"),this.PT.Ob(void 0),this.PT=void 0)},this.yT=new os,this.bT=new lp}},Xy=class{async oT(t){return new Zy(this.kT,this.ET)}uT(t){return Promise.resolve(!1)}bn(t){const e=()=>{t.msSetMediaKeys(this.kT),t.removeEventListener("loadedmetadata",e)};return t.readyState>=1?t.msSetMediaKeys(this.kT):t.addEventListener("loadedmetadata",e),Promise.resolve()}cT(t){return Promise.resolve()}er(){return Promise.resolve()}constructor(t,e,i){this.kT=t,this.aT=e,this.bd=i;const s=Fy(i)||"video/mp4";this.ET=My(s)}},zy=class{get aT(){return this.iT}_T(){return this.DT}dT(){const t=new s.MSMediaKeys(this.iT);return Promise.resolve(new Xy(t,this.iT,this.DT))}constructor(t,e){this.iT=t,this.DT=e}},qy=class{Cw(t,e){try{return Promise.resolve(function(t,e){if(!Yy())throw new b("Unsupported key system "+t);for(let i of e){let e=By(Ky,ag,t,i);if(e)return new zy(t,e)}throw new b("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static pT(){return Yy()}};function Yy(){return void 0!==s.MSMediaKeys&&"function"==typeof s.MSMediaKeys.isTypeSupported}function Ky(t,e){return s.MSMediaKeys.isTypeSupported(t,e)}r(),r(),r(),r();var jy=class extends Co{get KS(){return this.NT?this.NT.sessionId:""}get zS(){return NaN}get XS(){return this.yT.Vb}get mb(){return this.bT}JS(t,e,i){const s=i&&i.fairplay&&i.fairplay.MT;if(!s)throw new b("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,e,i){const s=Qg(t),n=2*s.length,r=2*e.length;let o=new ArrayBuffer(4+n+4+r+4+i.byteLength),h=new DataView(o),a=new Ri;return Og(h,a,n,!0),zg(h,a,s,!0),Og(h,a,r,!0),zg(h,a,e,!0),Og(h,a,i.byteLength,!0),Dg(h,a,i),new j(o)}(ma(e),s,this.LT);return this.NT=this.BT.createSession(this.ET,n),this.NT.addEventListener("webkitkeymessage",this.xT,!1),this.NT.addEventListener("webkitkeyadded",this.IT,!1),this.NT.addEventListener("webkitkeyerror",this.Ss,!1),this.CT("status-pending"),this.OT.Ob(this.NT),this.OT=new os,Promise.resolve()}Dn(t){return Promise.resolve(!0)}async tr(t){const e=ma(t);if(0===e.byteLength)throw new b("Cannot call update with an empty response.");this.FT=new os;(this.NT||await this.OT.Vb).update(e),await this.FT.Vb}Ws(){var t;const e=this.NT;return e&&(e.removeEventListener("webkitkeymessage",this.xT,!1),e.removeEventListener("webkitkeyadded",this.IT,!1),e.removeEventListener("webkitkeyerror",this.Ss,!1),e.close()),this.OT.Yw(),null==(t=this.FT)||t.Yw(),this.yT.Ob(void 0),this.yT.Vb}$S(){return Promise.resolve(void 0)}CT(t){this.bT.Bb(),this.bT.Mb(cp,t),this.wo(new te(this.bT))}constructor(t,e,i){super(),this.BT=t,this.ET=e,this.LT=i,this.yT=new os,this.FT=void 0,this.bT=new lp,this.NT=void 0,this.OT=new os,this.Ss=()=>{const t=this.NT&&this.NT.error;if(!t)return;const e=new Js("Unknown CDM error",t.code,t.systemCode);this.FT?(this.FT.Fb(e),this.FT=void 0):e.Wb===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.CT("output-not-allowed"):this.CT("internal-error"),this.wo(new cg)},this.xT=t=>{this.wo(new jh(this,"license-request",kc(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.IT=()=>{this.FT&&(this.FT.Ob(void 0),this.FT=void 0),this.CT("usable")}}};r();var A=class extends z{get name(){return"THEOplayerError"}get category(){return Ye.fromCode(this.code)}constructor(t,e,i){super(e,i),this.code=t}};function Qy(t,e){return t instanceof A?t:t instanceof g?new A(e,t.message,t):new A(e,String(t))}var Jy=class{getInternalMediaKeys(){return this.BT}async oT(t){if(!this.LT)throw new A(Qa.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new jy(this.BT,this.ET,this.LT)}uT(t){return this.LT=ma(t),Promise.resolve(!0)}bn(t){return t.webkitSetMediaKeys(this.BT),Promise.resolve()}cT(t){return t.webkitSetMediaKeys(null),Promise.resolve()}er(){return Promise.resolve()}constructor(t,e,i){this.BT=t,this.aT=e,this.bd=i,this.LT=void 0;const s=Fy(i)||"video/mp4";this.ET=My(s)}},$y=class{get aT(){return this.iT}_T(){return this.DT}dT(){const t=new s.WebKitMediaKeys(this.iT);return Promise.resolve(new Jy(t,this.iT,this.DT))}constructor(t,e){this.iT=t,this.DT=e}},tb=class{Cw(t,e){try{return Promise.resolve(function(t,e){if(t!==fm)throw new b(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!eb())throw new b("Unsupported key system "+t);for(let i of e){let e=By(ib,ug,t,i);if(e)return new $y(t,e)}throw new b("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static pT(){return eb()}};function eb(){return void 0!==s.WebKitMediaKeys&&"function"==typeof s.WebKitMediaKeys.isTypeSupported}function ib(t,e){return s.WebKitMediaKeys.isTypeSupported(t,e)}r();var sb=class{async Cw(t,e){for(let i of this.VT)try{return await i.Cw(t,e)}catch(t){}throw new b("Unsupported key system configuration for "+t)}constructor(t){this.VT=t}};r(),r(),r(),r(),r();var ju=class{Jo(t,e){return new Promise((i=>{const s=da.Qw([this.WT.Vw,e]),n=()=>{s.Hw()};this.UT.push((()=>{const e=nb(t,s.Vw);return i(e),e.then(n,n)})),this.GT||(this.GT=this.HT())}))}Yw(){return this.ZT(!0)}gn(){return this.XT=void 0,this.ZT(!1)}ZT(t){const e=this.GT;return this.WT.Yw(),t&&(this.WT=new da),Promise.resolve(e)}constructor(t){this.UT=[],this.GT=void 0,this.WT=new da,this.HT=()=>{if(0===this.UT.length)return this.XT?nb(this.XT,this.WT.Vw).then(this.zT,this.zT):this.zT();return this.UT.shift()().then(this.HT)},this.zT=()=>{if(0!==this.UT.length)return this.HT();this.GT=void 0},this.XT=t}};function nb(t,e){return new Promise((i=>i(t(e))))}var rb=new ju,ob=class extends Co{qT(){this.FT&&(this.CT("usable"),this.FT.Ob(void 0),this.FT=void 0)}YT(t){const e=new Js("Unknown CDM error",t.errorCode,t.systemCode);this.FT?(this.FT.Fb(e),this.FT=void 0):this.ST?(this.ST.Fb(e),this.ST=void 0):e.Wb===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.CT("output-restricted"):1===e.Ub?this.CT("expired"):this.CT("internal-error")}KT(t){0!==t.message.byteLength?(this.ST&&(this.ST.Ob(void 0),this.ST=void 0),this.wo(new jh(this,"license-request",fp(this.iT,kc(t.message).buffer),t.defaultURL||void 0))):this.ST&&(this.ST.Fb("Empty key message"),this.ST=void 0)}jT(t){this.QT||(this.QT=t,this.JT.Ob(t))}get mb(){return this.$T}get KS(){return this.ek}set KS(t){this.ek=t}get XS(){return this.yT.Vb}get zS(){return NaN}async Ws(){this.throwIfClosed(),this.FT&&(this.FT.Fb(void 0),this.FT=void 0),this.Qb=!0,this.yT.Ob(void 0)}async JS(t,e){this.throwIfClosed(),this.ST=new os,this.nk=ma(e);(this.QT||await this.JT.Vb).webkitGenerateKeyRequest(this.iT,this.nk),await this.ST.Vb}async Dn(t){return this.throwIfClosed(),!1}async $S(){this.throwIfClosed()}async tr(t){if(this.throwIfClosed(),this.FT=new os,Z.Nm||Z.Im)return rb.Jo((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.FT)return;(this.QT||await this.JT.Vb).webkitAddKey(this.iT,ma(t),this.nk,this.KS),await this.FT.Vb,Z.Im&&await Fe(500)}throwIfClosed(){if(this.Qb)throw new b("Already closing or closed.")}CT(t){this.$T.Bb(),this.$T.Mb(cp,t),this.wo(new te(this.$T))}async rk(){const t=this.QT||await this.JT.Vb;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.iT,this.ek)}catch(t){}finally{await Fe(500)}}constructor(t){super(),this.iT=t,this.ST=void 0,this.FT=void 0,this.Qb=!1,this.nk=void 0,this.QT=void 0,this.yT=new os,this.ek="",this.JT=new os,this.$T=new lp}},hb=class{bn(t){return this.QT=t,this.QT.addEventListener("webkitkeyadded",this.IT),this.QT.addEventListener("webkitkeyerror",this.hk),this.QT.addEventListener("webkitkeymessage",this.ck),this.lk.forEach(((e,i)=>e.jT(t))),this.dk.forEach((e=>e.jT(t))),Promise.resolve()}cT(t){return t.removeEventListener("webkitkeyadded",this.IT),t.removeEventListener("webkitkeyerror",this.hk),t.removeEventListener("webkitkeymessage",this.ck),this.QT=void 0,Promise.resolve()}async er(){let t=this.lk.entries(),e=t.next();for(;!e.done;)await e.value[1].rk(),e=t.next();this.lk.clear()}async oT(t,e,i){const s=new ob(this.aT);return this.QT&&s.jT(this.QT),this.dk.push(s),s}uT(t){return Promise.resolve(!1)}fk(t){if(!t)return;let e=this.lk.get(t);return e||(e=this.dk.shift(),e?(e.KS=t,this.lk.set(t,e),e):void 0)}constructor(t,e){this.aT=t,this.bd=e,this.QT=void 0,this.lk=xu(),this.dk=[],this.IT=t=>{const e=this.fk(t.sessionId);e&&e.qT()},this.hk=t=>{const e=this.fk(t.sessionId);e&&e.YT(t)},this.ck=t=>{const e=this.fk(t.sessionId);e&&e.KT(t)}}},ab=class{dT(){return Promise.resolve(new hb(this.aT,this._k))}_T(){return this._k}constructor(t,e){this.aT=t,this._k=e}},ub=class{Cw(t,e){try{return Promise.resolve(function(t,e){if(!ub.pT())throw new b("Unsupported key system "+t);for(let i of e){let e=By(cb,ag,t,i);if(e)return new ab(t,e)}throw new b("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static pT(){return Nm()}};function cb(t,e){const i=Hd();return!(!i||!i.canPlayType||""===i.canPlayType(e,t))}r();var lb,db=class{Cw(t,e){return t===um||t===Xa?Promise.resolve(void 0):Promise.reject(new g("DRM configuration not supported"))}};function fb(){return lb||(lb=function(){const t=[];tb.pT()&&t.push(new tb);Hy.pT()&&t.push(new Hy);qy.pT()&&t.push(new qy);ub.pT()&&t.push(new ub);Z.Lm&&t.push(new db);return new sb(t)}()),lb}r(),r();var _b=class{Bb(t){this.vk.delete(t)}gk(){this.vk.clear()}Nb(t){return this.vk.get(t)}Mb(t,e){this.vk.set(t,e)}constructor(){this.vk=xu()}},vb=class t{static pk(){return t.Fg||(t.Fg=mb.pT()?new mb:new _b),t.Fg}static Bb(e){t.pk().Bb(e)}static gk(){t.pk().gk()}static Nb(e){return t.pk().Nb(e)}static Mb(e,i){t.pk().Mb(e,i)}};vb.Fg=void 0;var mb=class extends vb{static pT(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}Bb(t){self.sessionStorage.removeItem(t)}gk(){self.sessionStorage.clear()}Nb(t){var e;return null!=(e=self.sessionStorage.getItem(t))?e:void 0}Mb(t,e){self.sessionStorage.setItem(t,e)}};r(),r();var gb=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(e,i)=>new t(e,i)}(t)}catch(t){}const e=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(e)return function(t){return(e,i)=>{const s=new t;if(e)for(const t of e)s.append(t);return s.getBlob(i&&i.type||"")}}(e)})();function pb(t,e,i){const s=gb([e],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,e){let i=t;const s=i.indexOf("?");if(s>=0&&(i=i.substr(0,s)),i=i.substr(i.lastIndexOf("/")+1),e){let t=i.indexOf(".");t<0&&(t=i.length),i=i.substr(0,t)+e+i.substr(t)}return i}(t,i),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}r();var wb="default";r(),r(),r(),r();var Rr=function(t){return t.wk="arraybuffer",t.yk="json",t.bk="stream",t.Ak="text",t}({});r();var na=class t{append(t,e){let i=t,s=e;i=yb(i),s=bb(s);const n=i.toLowerCase();if(this.C_.hasOwnProperty(n)){const t=this.C_[n],e=t[1];t[1]=e?e+", "+s:s}else this.C_[n]=[i,s]}delete(t){const e=yb(t).toLowerCase();delete this.C_[e]}get(t){const e=yb(t).toLowerCase();return this.C_.hasOwnProperty(e)?this.C_[e][1]:null}has(t){const e=yb(t).toLowerCase();return this.C_.hasOwnProperty(e)}set(t,e){let i=t;i=yb(i);const s=i.toLowerCase();this.C_[s]=[i,bb(e)]}forEach(t,e){for(const i in this.C_)this.C_.hasOwnProperty(i)&&t.call(e,this.C_[i][1],i,this)}asList(){const t=[];for(const e in this.C_)if(this.C_.hasOwnProperty(e)){const[i,s]=this.C_[e];t.push([i,s])}return t}Sk(){const t={};return this.forEach(((e,i)=>{t[i]=e})),t}Tk(t){t.forEach(((t,e)=>{this.append(e,t)}))}Ek(t){t.forEach(((t,e)=>{this.set(e,t)}))}constructor(e){this.C_={},e instanceof t?e.asList().forEach((t=>{let[e,i]=t;this.append(e,i)})):Array.isArray(e)?e.forEach((t=>{let[e,i]=t;this.append(e,i)})):e&&w.getOwnPropertyNames(e).forEach((t=>{this.append(t,e[t])}))}};function yb(t){let e=t;if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new b("Invalid character in header field name");return e}function bb(t){let e=t;return"string"!=typeof e&&(e=String(e)),e}r(),r(),r();var Ah=Xl(ql());r();var Ab=class extends z{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}},iu=a,Sb=cr(iu.ReadableStream)&&cr(iu.WritableStream)&&cr(iu.TransformStream)&&Td(iu.ReadableStream.prototype.pipeThrough)&&!If.cp,mh=Sb?iu.ReadableStream:Ah.ReadableStream,qo=(Sb?iu.WritableStream:Ah.WritableStream,Sb?iu.TransformStream:Ah.TransformStream),Tb=(Sb&&iu.ByteLengthQueuingStrategy?iu.ByteLengthQueuingStrategy:Ah.ByteLengthQueuingStrategy,Sb&&iu.CountQueuingStrategy?iu.CountQueuingStrategy:Ah.CountQueuingStrategy);function kb(t){return function(t){return new mh({start(e){for(const i of t)e.enqueue(i);e.close()}})}([t])}function Eb(t){return kb(function(t){return new j(t)}(t))}function He(t,e){return function(t,e){let i=e;const s=t.getReader(),n=new os,r=()=>{o();const t=new Bu;s.cancel(t).catch(It),n.Fb(t)},o=()=>{i&&(i.Ow(r),i=void 0)};i&&(i.Bw?r():i.Fw(r));const h=[],a=t=>t.done?(o(),Promise.resolve(h)):(h.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{o(),n.Ob(t)}),(t=>{o(),n.Fb(t)})),n.Vb}(t,e).then((t=>Tu(t).buffer))}function xb(t,e){let i=e;const{readable:s,writable:n}=new qo,r=n.getWriter(),o=()=>{i&&i.Yw()};return r.closed.then(o,o),t.then((t=>(i=void 0,r.releaseLock(),t.pipeTo(n).catch(It))),(t=>(i=void 0,r.releaseLock(),n.abort(t).catch(It)))),s}function Rb(t){const{readable:e,writable:i}=new qo;return t.pipeTo(i,{preventCancel:!0}).catch((e=>{let i;i=rl(e)?e[0]===e[1]||Je(e[0])&&Je(e[1])?e[0]:new Ab(e):e,t.cancel(i).catch(It)})),e.tee()}function Ib(t){return Qg(new j(t))}function Cb(t){return Jg(t).buffer}r();var Pb="content-type",Db="text/plain;charset=UTF-8",Cc=class{xk(t){return this.Rk(t).then(JSON.parse)}Ik(t,e){switch(t){case Rr.wk:return this.Ck(e);case Rr.yk:return this.xk(e);case Rr.bk:return this.Pk();case Rr.Ak:return this.Rk(e);default:throw new b}}};function Nb(t,e,i){if(t instanceof Cc)return t;if(t instanceof mh)return function(t,e){return new Lb({Aw:0,Pk:t,Dk:Mb(e)})}(t,i);const s=Mb(i),n=Promise.resolve(t).then((t=>function(t,e){if(t){if("string"==typeof t)return{Aw:Rr.Ak,Nk:t,Dk:e||Db};if(t instanceof ArrayBuffer||ar(t))return{Aw:Rr.wk,Nk:Gb(t),Dk:e};if(yd(t)||rl(t))return{Aw:Rr.yk,Nk:t,Dk:e};throw new b("Unsupported BodyInit type")}return{Aw:Rr.Ak,Nk:null,Dk:e}}(t,s)));return new Lb({Aw:1,Vb:n,Mk:e})}function Mb(t){return(t.get(Pb)||"").toLowerCase()}var Lb=class t extends Cc{get Lk(){return this.Bk}get Ok(){return 0===this.Fk.Aw}Vk(){return this.Wk.Vb}Rk(t){return this.Uk(Bb,t)}xk(t){return this.Uk(Fb,t)}Ck(t){return this.Uk(Wb,t)}Pk(){return this.Gk(function(t){return 0===t.Aw?t.Pk:xb(t.Vb.then(Ub).then(Eb),t.Mk)}(this.Fk))}Uk(t,e){if(this.Bk)return Promise.reject(new b("Already used"));this.Bk=!0;const i=t(this.Fk,e);return this.Wk.Kw(i.then(It)),i}Gk(t){if(this.Bk)throw new b("Already used");if(t.locked)throw new b("Body stream is locked");this.Bk=!0;const e=new qo,i=Promise.resolve(t.pipeTo(e.writable));return this.Wk.Kw(i),e.readable}Hk(t){this.Fk=t,1===t.Aw&&t.Vb.catch(It)}Zk(){if(this.Bk)throw new b("Already used");const e=function(t){if(0===t.Aw){const[e,i]=t.Pk.tee();return[{Aw:t.Aw,Pk:e,Dk:t.Dk},{Aw:t.Aw,Pk:i,Dk:t.Dk}]}{const[e,i]=t.Mk.jw();return[{Aw:t.Aw,Vb:t.Vb,Mk:e},{Aw:t.Aw,Vb:t.Vb,Mk:i}]}}(this.Fk),i=e[0],s=e[1];return this.Hk(i),new t(s)}constructor(t){super(),this.Bk=!1,this.Wk=new os,this.Wk.Vb.catch(It),this.Hk(t)}};function Bb(t,e){return 0===t.Aw?He(t.Pk,e).then(Ib):(e&&t.Mk.Kw(e),So(t.Vb.then(Ob),t.Mk))}function Ob(t){switch(t.Aw){case Rr.Ak:return Promise.resolve(t.Nk||"");case Rr.wk:return Promise.resolve(t.Nk).then(Ib);case Rr.yk:return Promise.resolve(t.Nk).then(JSON.stringify)}}function Fb(t,e){return 0===t.Aw?Bb(t,e).then(JSON.parse):(e&&t.Mk.Kw(e),So(t.Vb.then(Vb),t.Mk))}function Vb(t){return t.Aw===Rr.yk?Promise.resolve(t.Nk):Ob(t).then(JSON.parse)}function Wb(t,e){return 0===t.Aw?He(t.Pk,e):(e&&t.Mk.Kw(e),So(t.Vb.then(Ub),t.Mk))}function Ub(t){switch(t.Aw){case Rr.wk:return Promise.resolve(t.Nk);case Rr.Ak:case Rr.yk:return Ob(t).then(Cb)}}function Gb(t){return t instanceof ArrayBuffer?t:kc(Rh(t)).buffer}var Hb=class extends Cc{get Lk(){return this.Xk.Lk}get Ok(){return this.Xk.Ok}Vk(){return this.Xk.Vk()}Rk(t){return this.Xk.Rk(t)}xk(t){return this.Xk.xk(t)}Ck(t){return this.Xk.Ck(t)}Pk(t){return this.Xk.Pk(t)}Zk(){return this.Xk.Zk()}constructor(t){super(),this.Xk=t}};function _h(t){return t.zk>=200&&t.zk<=299||304===t.zk}var Zb=class t extends Hb{qk(t){return this.Ik(this.Yk,t)}xb(){return new t({qk:this.Zk(),Kk:this.Kk},this)}constructor(t,e){let i,s,n,r,o;e?(i=e.jk,s=e.Yk,n=e.zk,r=e.Qk,o=e.Jk):(i=[],s=Rr.Ak,n=200,r="OK",o=!1);const h=t.Kk,a=new na(t.jk||i),u=t.Yk||s,c=t.$k||(e&&e.Kk===h?e.$k:h.Gu),l=e?e.Xk:null;super(Nb(void 0!==t.qk?t.qk:l,t.Mk||new da,a)),this.jk=a,this.Kk=h,this.$k=c,this.Yk=u,this.zk=void 0!==t.zk?t.zk:n,this.Qk=void 0!==t.Qk?String(t.Qk):r,this.Jk=t.Jk||o}};r();var xe=function(t){return t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT",t}({}),Wr=function(t){return t.tE="",t.eE="manifest",t.iE="segment",t.sE="preload-hint",t.nE="content-protection",t}({}),$h=function(t){return t.tE="",t.rE="initialization-segment",t.oE="fairplay-license",t.hE="fairplay-certificate",t.aE="widevine-license",t.uE="widevine-certificate",t.cE="playready-license",t.lE="clearkey-license",t.dE="aes128-key",t}({}),Ca=function(t){return t.tE="",t.fE="audio",t._E="video",t.Ak="text",t.vE="image",t}({}),Xb=function(t){return t.mE="same-origin",t.gE="no-cors",t.pE="cors",t.wE="navigate",t}({}),ke=class{constructor(t,e){const i=t.Gu;let s,n,r,o,h,a,u,c,l,d,f,_,v,m,g;var p,w,y;e?(s=e.Nk,n=e.jk,r=e.yE,o=e.Yk,h=e.bE,a=e.AE,u=e.Vw,c=e.Aw,l=e.SE,d=e.TE,f=e.kE,_=e.EE,v=e.xE,m=e.RE,g=e.CE):(s=null,n={},r="GET",o=Rr.Ak,h=0,a=0,c="",l="",d="",f=!1,v=void 0,m=!1,g=void 0),this.Gu=i,this.Nk=t.Nk||s,this.jk=new na(t.jk||n),this.yE=t.yE||r,this.Yk=t.Yk||o,this.bE=void 0!==t.bE?Number(t.bE)||0:h,this.AE=void 0!==t.AE?Number(t.AE)||0:a,this.Vw=t.Vw||u||(new da).Vw,this.Aw=t.Aw||c,this.SE=t.SE||l,this.TE=t.TE||d,this.kE=void 0!==t.kE?Boolean(t.kE):f,this.EE=t.EE||_,this.xE=null!=(p=t.xE)?p:v,this.RE=null!=(w=t.RE)?w:m,this.CE=null!=(y=t.CE)?y:g}},zb=class{Kk(t){const e=function(t){return new Zb({qk:null,jk:{},Kk:t,$k:t.Gu,Yk:t.Yk,zk:0,Qk:Ti.Gy})}(new ke(t));return Promise.resolve(e)}PE(t){}gn(){}};var ph=class t{static get DE(){return t.NE||(t.NE=new t(new zb)),t.NE}Kk(t){const e=this.LE(t);return this.BE.Kk(e)}PE(t){return this.BE.PE(this.OE(t))}LE(e){let i=new ke(e);if(!this.FE){const e=t.VE(i.Gu);i=new ke({Gu:e},i)}return i}OE(e){let i=e.Gu;return this.FE||(i=t.VE(i)),{Gu:i,Nk:e.Nk}}static VE(t){return Ms.hw&&Sl(t,"http://")?t.replace(":","s:"):t}gn(){this.BE.gn()}constructor(t,e=!0){this.BE=t,this.FE=e}};function _c(t,e){const i=Ms.Nh(t);return qb(i,e),i.toString()}function qb(t,e){for(const i of w.keys(e))t.searchParams.set(i,e[i])}function Ki(t,e){let i=Ms.Jp(t);return e&&!Tm(i,"/")&&(i+="/"),i}ph.NE=void 0,r(),r(),r();var Yb=/cache:(.+)?(?=&|$)/,Kb="http://webcache.googleusercontent.com/search?q=cache:";function jb(t){if(!Sl(t,Kb))return"";const e=Ms.Nh(t).search.match(Yb);return e&&e.length>1?e[1]:""}function Qb(t){return Ms.Nh(".",t)}r(),r();var Sc=function(t){return t.WE="HttpOpenError",t.UE="HttpResponseError",t.GE="HttpTimeoutError",t}({}),Jb=class extends z{get Kk(){return this.HE}constructor(t,e,i){super(e,i),this.HE=t}};var $b=class extends Jb{get name(){return Sc.WE}constructor(t,e){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.Gu),e)}};r();var Mn=class extends Jb{get name(){return Sc.UE}get ZE(){return this.XE}constructor(t,e,i){super(t.Kk,null!=i?i:function(t){return"Error while loading "+t.Kk.Gu+", status code "+t.zk}(t),e),this.XE=t}};r();var tA=class extends Jb{get name(){return Sc.GE}constructor(t,e){super(t,function(t){return"Request for "+t.Gu+" timed out after "+t.bE+" seconds."}(t),e)}};r();var eA=self.fetch,iA=self.Request,sA=self.Response,nA=self.Headers,rA=self.ReadableStream,oA=self.AbortSignal,hA=self.AbortController,aA=yl((()=>{try{return Td(eA)&&cr(iA)&&cr(sA)&&cr(nA)&&"forEach"in nA.prototype&&qv()}catch(t){return!1}})),uA=["http:","https:"];var cA=yl((()=>{try{return aA()&&cr(oA)&&cr(hA)&&"signal"in iA.prototype}catch(t){return!1}})),lA=yl((()=>{try{return aA()&&cr(rA)&&"body"in sA.prototype&&!Z.hm}catch(t){return!1}}));function eo(t){return t instanceof Jb}function dA(t){return t instanceof Mn}function fA(t,e){const i=t.jk.has("content-length")?Number(t.jk.get("content-length")):void 0;let s;return s=t.Ok?function(t,e,i){return t.pipeThrough(new qo(new _A(e,i)))}(t.Pk(),e,i):async function(t,e,i){await Promise.resolve(),e(0,i);const s=await t,n=s.byteLength;return e(n,null!=i?i:n),s}(t.Ck(),e,i),new Zb({qk:s,Kk:t.Kk},t)}r(),r();var _A=class{transform(t,e){this.zE+=t.byteLength,this.qE(this.zE,this.YE),e.enqueue(t)}flush(t){var e;this.qE(this.zE,null!=(e=this.YE)?e:this.zE)}constructor(t,e){this.qE=t,this.YE=e,this.zE=0}};var vA=class{async KE(){const t=this.HE;let e,i;t.bE&&(this.jE=u((()=>{this.QE=!0,this.WT.Yw()}),t.bE),this.WT.Vw.Xw((()=>{v(this.jE)})));try{e=eA(t.Gu,{method:t.yE,headers:t.jk.Sk(),body:t.Nk,credentials:t.kE?"include":"same-origin",signal:pA(this.WT.Vw),mode:t.xE,keepalive:t.CE})}catch(e){throw new $b(t,e)}try{i=await e}catch(t){const e=this.JE(t);throw Je(e)&&this.WT.Yw(),e}const s=i.url||t.Gu,n=0===i.status&&"file:"===function(t){return Ms.Nh(t).protocol}(s)?200:i.status,r=new mA(this,i,this.WT);let o=new Zb({qk:r,Kk:t,Yk:t.Yk,jk:wA(i.headers),zk:n,Qk:i.statusText,$k:s});if(!_h(o))throw new Mn(o);return t.EE&&(o=fA(o,t.EE)),o}JE(t){return eo(t)?t:Je(t)?this.QE?new tA(this.HE):new Bu(t.message,t):this.XE?new Mn(this.XE,t):new $b(this.HE,t)}constructor(t){this.WT=new da,this.XE=void 0,this.jE=0,this.QE=!1,this.HE=t,this.WT.Kw(t.Vw),this.ZE=this.KE()}},mA=class t extends Cc{get Lk(){return this.$E.bodyUsed}get Ok(){return ji(this.$E.body)}Vk(){return this.Wk.Vb}Rk(t){return this.Uk(this.$E.text(),t)}Ck(t){return this.Uk(this.$E.arrayBuffer(),t)}Pk(){const t=this.$E.body;return t?this.Gk(t):xb(this.Ck().then(Eb),this.WT)}Zk(){const e=this.$E.clone(),[i,s]=this.WT.jw();return this.WT=i,new t(this.tx,e,s)}Uk(t,e){e&&this.WT.Kw(e);let i=ou(Promise.resolve(t),this.WT.Vw).catch((t=>{throw this.tx.JE(t)}));return i=So(i,this.WT),this.Wk.Kw(i.then(It)),i}Gk(t){return new mh(new yA(t,(t=>this.tx.JE(t)),this.WT,this.Wk),{highWaterMark:0})}constructor(t,e,i){super(),this.Wk=new os,this.tx=t,this.$E=e,this.WT=i,this.Wk.Vb.catch(It)}},gA="abort";function pA(t){if(!cA())return;const e=new hA;if(t.Bw)e.abort();else if(!t.Uw){const i=()=>{s(),e.abort()},s=()=>{e.signal.removeEventListener(gA,i),t.Ow(i),t.zw(s)};e.signal.addEventListener(gA,i),t.Fw(i),t.Xw(s)}return e.signal}function wA(t){if(function(t){return V(t)&&"function"==typeof t.forEach}(t)){const e=new na;return t.forEach(((t,i)=>{Array.isArray(t)&&2===t.length?e.append(t[0],t[1]):e.append(i,t)})),e}return new na(t)}var yA=class{start(t){this.Bd=this.ix.getReader()}async pull(t){let e;try{e=await ou(this.Bd.read(),this.WT.Vw)}catch(e){const i=this.sx(e);return this.Wk.Fb(i),this.WT.Yw(),this.Bd.cancel(i).catch(It),void t.error(i)}e.done?(this.Wk.Ob(),this.WT.Yw(),t.close()):t.enqueue(e.value)}cancel(t){return this.WT.Yw(),this.Wk.Fb(t),this.Bd.cancel(t)}constructor(t,e,i,s){this.ix=t,this.sx=e,this.WT=i,this.Wk=s}};r();var bA=class{get ZE(){return this.nx.Vb}KE(){const t=this.ox,e=this.HE;if(e.Vw.Bw)return this.hx();t.onreadystatechange=()=>this.ux(),t.onprogress=t=>this.qE(t),t.onload=()=>this.lx(),t.onloadend=()=>this._x(),t.onerror=()=>this.vx(),t.ontimeout=()=>this.mx(),t.onabort=()=>this.hx(),t.open(e.yE,e.Gu,!0),t.withCredentials=Boolean(e.kE),"responseType"in t&&e.Yk&&(e.Yk===Rr.Ak?t.responseType="text":t.responseType="arraybuffer"),e.jk.forEach(((e,i)=>{t.setRequestHeader(i,e)})),e.bE&&(t.timeout=e.bE),this.WT.Vw.Fw(this.gx);const i=e.Nk;i?t.send(i):t.send()}ux(){const t=this.ox;void 0!==t&&t.readyState>=2&&!this.wx&&(this.wx=!0,this.yx())}yx(){var t;const e=this.ox,i=function(t){const e=new na,i=t.replace(/\r?\n[\t ]+/g," ");return i.split(/\r?\n/).forEach((t=>{const i=t.split(":"),s=i.shift().trim();if(s){const t=i.join(":").trim();e.append(s,t)}})),e}(e.getAllResponseHeaders()||""),s=this.HE;var n;this.bx=new os,this.XE=new Zb({Kk:s,Yk:s.Yk,qk:this.bx.Vb,zk:e.status,Qk:e.statusText,jk:i,$k:null!=(n=e.responseURL)?n:i.get("X-Request-URL")}),null==(t=this.nx)||t.Ob(this.XE)}lx(){var t;const e=this.ox;if(void 0===e)return;let i=e.response;if(!ji(i)){const t=this.HE.Yk;i=t===Rr.Ak?e.responseText:t===Rr.wk?new ArrayBuffer(0):{}}null==(t=this.bx)||t.Ob(i)}_x(){this.gn()}qE(t){void 0!==this.ox&&(null==this.HE.EE||this.HE.EE.call(this.HE,t.loaded,t.lengthComputable?t.total:void 0))}vx(){const t=new g("Network request failed");this.XE?this.Ss(new Mn(this.XE,t)):this.Ss(new $b(this.HE,t))}mx(){this.Ss(new tA(this.HE))}hx(){this.Ss(new Bu),this.gn()}Ss(t){var e,i;null==(e=null!=(i=this.bx)?i:this.nx)||e.Fb(t)}gn(){this.ox=void 0,this.XE=void 0,this.nx=void 0,this.bx=void 0,this.WT.Hw()}constructor(t){this.WT=new da,this.XE=void 0,this.nx=new os,this.wx=!1,this.gx=()=>{var t;this.hx(),null==(t=this.ox)||t.abort()},this.HE=t,this.WT.Kw(t.Vw),this.ox=new Fl,this.KE()}};function AA(t,e,i){return new Promise(((s,n)=>{if(i&&i.Bw)return n(new Bu);const r=t=>{h(),s(t)},o=()=>{h(),n(new Bu)},h=()=>{t.removeEventListener(e,r),i&&i.Ow(o)};t.addEventListener(e,r),i&&i.Fw(o)}))}r();var SA=class{Kk(t){return function(t){if(!aA()||!function(t){try{return uA.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.Gu))return!1;if(!lA()&&t.EE)return!1;if(!t.RE&&t.yE!==xe.POST){if(Z.Nm&&Z.wm<=68)return!1;if(Z.Im)return!1}return!0}(t)?new vA(t).ZE:new bA(t).ZE}PE(t){const e=s.navigator;if(e&&e.sendBeacon)e.sendBeacon(t.Gu,gb([t.Nk],{type:t.Dk}));else{const e=t.Dk?{"Content-type":t.Dk}:void 0;this.Kk(new ke({yE:xe.POST,Gu:t.Gu,Nk:t.Nk,jk:e,xE:Xb.gE})).then((t=>{ah(t.Ck())}),It)}}gn(){}};r(),r();var qa=function(t){return t[t.Ax=1]="Ax",t[t.Sx=2]="Sx",t[t.Ak=3]="Ak",t[t.Tx=4]="Tx",t[t.kx=9]="kx",t}({});function Uh(t){return 1===t.Ex}function TA(t){return 3===t.Ex}r();var kA=class extends z{constructor(t){super("Invalid XML",t)}},EA=class{xx(t){const e=new DOMParser;let i;try{i=e.parseFromString(t,"text/xml")}catch(t){throw new kA(t)}if(!i||i.getElementsByTagName("parsererror").length>0)throw new kA;return new NA(i)}},xA=class t{get Ex(){return qa.Sx}get Rx(){var t;return null!=(t=this.Ix.localName)?t:BA(this.Ix.nodeName)}get l(){return this.Ix.nodeName}get Cx(){var t;return null!=(t=this.Ix.namespaceURI)?t:void 0}get Px(){var t;return null!=(t=this.Ix.prefix)?t:void 0}get Dx(){return this.Ix.nodeValue}Nx(t){return this.Ix.isEqualNode(t.Ix)}Mx(e){return new t(this.Ix.cloneNode(e))}constructor(t){this.Ix=t}},RA=class{get Lx(){return void 0===this.Bx&&(this.Bx=function(t){const e=[];for(let i=0;i<t.length;i++){const s=LA(t.item(i));s&&e.push(s)}return e}(this.Ox.childNodes)),this.Bx}get m(){return this.Lx.filter(MA)}Fx(t){return this.Lx.filter((e=>MA(e)&&e.Vx===t))}Wx(t,e){return this.Lx.filter((i=>MA(i)&&i.Rx===e&&i.Cx===t))}get Ux(){return this.Ox}Gx(t){this.Ox.appendChild(t.Ux),this.Bx&&this.Bx.push(t)}Nx(t){return this.Ox.isEqualNode(t.Ux)}constructor(t){this.Bx=void 0,this.Ox=t}},IA=class t extends RA{get Ex(){return qa.Ax}get Rx(){var t;return null!=(t=this.Ox.localName)?t:BA(this.Ox.nodeName)}get Cx(){var t;return null!=(t=this.Ox.namespaceURI)?t:void 0}get Px(){var t;return null!=(t=this.Ox.prefix)?t:void 0}get Vx(){return this.Ox.nodeName}get Hx(){return function(t){const e=[];for(let i=0;i<t.length;i++)e.push(new xA(t.item(i)));return e}(this.Ox.attributes)}get Zx(){return this.Ox.textContent}Xx(t){if(this.Ox.hasAttribute(t))return this.Ox.getAttribute(t)}zx(t,e){if(this.Ox.hasAttributeNS(t,e))return this.Ox.getAttributeNS(t,e)}qx(t){this.Ox.removeAttribute(t)}Yx(t,e){this.Ox.removeAttributeNS(t,e)}Kx(t,e){this.Ox.setAttribute(t,e)}jx(t,e,i){this.Ox.setAttributeNS(t,e,i)}Mx(e){return new t(this.Ox.cloneNode(e))}constructor(t){super(t)}},CA=class{get qk(){return this.Ox.nodeValue}get Ux(){return this.Ox}Nx(t){return this.qk===t.qk}constructor(t){this.Ox=t}},PA=class t extends CA{get Ex(){return qa.Ak}Mx(e){return new t(this.Ox.cloneNode(e))}constructor(t){super(t)}},DA=class t extends CA{get Ex(){return qa.Tx}Mx(e){return new t(this.Ox.cloneNode(e))}constructor(t){super(t)}},NA=class t extends RA{get Ex(){return qa.kx}get Qx(){return new IA(this.Ox.documentElement)}Mx(e){return new t(this.Ox.cloneNode(e))}constructor(t){super(t)}};function MA(t){return Uh(t)}function LA(t){switch(t.nodeType){case qa.Ax:return new IA(t);case qa.Ak:return new PA(t);case qa.Tx:return new DA(t)}}function BA(t){const e=t.indexOf(":");return e<0?t:t.substr(e+1)}!function(t){Ms=t}(new class extends Xv{get Hp(){return this.Jx||(this.Jx=new Mm(fb())),this.Jx}get $x(){return this.tR}get eR(){return this.iR}get sR(){return this.nR}get rR(){return!1}get oR(){return vb.pk()}get hR(){return{aR:pb}}get uR(){return Bl.connection&&Bl.connection.effectiveType||wb}get cR(){return Bl.connection&&Bl.connection.type||"unknown"}get lR(){return this.dR||(this.dR=new ph(new SA)),this.dR}xx(t){return this.fR.xx(t)}constructor(...t){super(...t),this.Jx=void 0,this.tR=lA(),this.iR=Z.pg||Z.hm,this.nR=(Z.pg||Z.Nm&&Z.wm<=68||Z.hm)&&!(Z.Im&&Z.Pm<3),this.dR=void 0,this.fR=new EA}}),r(),r(),r(),r(),r(),r();var OA=class extends sn{},Dc=class extends sn{get ht(){return this._R()}_R(){return this.vR.ht}mR(){return this.vR.mR()}get gR(){return this.pR()}pR(){return this.vR.gR}get wR(){return this.yR()}set wR(t){this.bR(t)}yR(){return this.vR.wR}bR(t){this.vR.wR=t}get bt(){return this.AR()}AR(){return this.vR.bt}get SR(){return this.kR()}set SR(t){this.ER(t)}kR(){return this.vR.SR}ER(t,e){this.vR.ER(t,e)}get ct(){return this.Sd()}Sd(){return this.vR.ct}get we(){return this.xR()}xR(){return this.vR.we}get RR(){return this.IR()}IR(){return this.vR.RR}get lt(){return this.PR()}get DR(){return this.NR()}PR(){return this.vR.lt}NR(){return this.vR.DR}get MR(){return this.LR()}LR(){return this.vR.MR}get OR(){return this.FR()}FR(){return this.vR.OR}get WR(){return this.UR()}UR(){return this.vR.WR}get GR(){return this.HR()}set GR(t){this.ZR(t)}HR(){return this.vR.GR}ZR(t){this.vR.GR=t}get XR(){return this.zR()}zR(){return this.vR.XR}get qR(){return this.YR()}YR(){return this.vR.qR}get KR(){return this.jR()}set KR(t){this.QR(t)}jR(){return this.vR.KR}QR(t){this.vR.KR=t}get JR(){return this.$R()}$R(){return this.vR.JR}get tI(){return this.eI()}set tI(t){this.iI(t)}eI(){return this.vR.tI}iI(t){this.vR.tI=t}get sI(){return this.nI()}nI(){return this.vR.sI}get rI(){return this.oI()}oI(){return this.vR.rI}get hI(){return this.aI()}aI(){return this.vR.hI}tu(){return this.vR.tu()}xa(t,e){return this.vR.xa(t,e)}get nt(){return this.uI()}uI(){return this.vR.nt}get cI(){return this.lI()}lI(){return this.vR.cI}get rt(){return this.dI()}dI(){return this.vR.rt}get fI(){return this._I()}_I(){return this.vR.fI}get vI(){return this.mI()}set vI(t){this.gI(t)}get pI(){return this.wI()}wI(){return this.vR.pI}mI(){return this.vR.vI}gI(t){this.vR.vI=t}get yI(){return this.vR.yI}set yI(t){this.vR.yI=t}bI(){return this.vR.bI()}Sa(){return this.vR.Sa()}AI(){return this.vR.AI()}dr(t){this.vR.dr(t)}lr(){this.vR.lr()}be(){this.vR.be()}SI(){this.vR.SI()}TI(){this.vR.TI()}kI(){this.vR.kI()}ge(){this.vR.ge()}EI(){return this.vR.EI()}xI(){return this.vR.xI()}RI(){this.vR.RI()}II(){this.vR.II()}er(){return this.vR.er()}CI(){this.vR.CI()}DI(){this.vR.DI()}NI(t){return this.vR.NI(t)}MI(t){return!1}async gn(){this.$o(),await this.vR.gn()}LI(t){return this.vR.LI(t)}constructor(t){super(),this.BI=t=>{this.MI(t)||this.wo(t)},this.vR=t,t.iy(this.BI)}};r(),r(),r();var Se=function(t){return t.OI="FI",t.VI="WI",t}({});r(),r(),r(),r();var Ds=class extends pe{get ka(){return this.su||(this.su=this.ba()),this.su}constructor(t,e){super(t,e),this.su=void 0}};function FA(t){return Boolean(t&&t.ka)}var Un=class extends Ds{constructor(t){super(t)}},nr=class extends pe{constructor(t){super(t)}},VA=class extends Un{ba(){return new WA(this.Ht.ka)}constructor(t){super(Se.OI),this.Ht=t}},WA=class extends nr{constructor(t){super("addtrack"),this.track=t}};r();var UA=class extends Un{ba(){return new GA(this.Ht.ka)}constructor(t){super(Se.VI),this.Ht=t}},GA=class extends nr{constructor(t){super("removetrack"),this.track=t}};r();var No=function(t){return t.UI="GI",t.HI="ZI",t.XI="zI",t.qI="YI",t.KI="jI",t.QI="JI",t.la="$I",t.tC="eC",t.iC="sC",t.nC="tr",t.rC="oC",t.hC="aC",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality",t}({}),to=class extends Co{get uC(){return this.cC}get ka(){return this.su||(this.su=this.ba()),this.su}get V(){return this.cC.length}lC(t){return this.cC[t]}tt(t){return!(!t||ms(this.cC,t))&&(this.cC.push(t),this.su&&this.su.push(t.ka),t.yn(No.la,this.Ds),this.wo(new VA(t)),!0)}it(t){if(!t)return!1;const e=this.cC.indexOf(t);return!(e<0)&&(ka(this.cC,e),this.su&&ka(this.su,e),t.fn(No.la,this.Ds),this.wo(new UA(t)),!0)}dC(t){return ms(this.cC,t)}er(){const t=this.cC;for(let e=t.length-1;e>=0;e-=1)this.it(t[e])}gn(){this.er(),this.$o()}constructor(){super(),this.cC=[],this.su=void 0}};r();var Ec=class extends Un{ba(){return new HA(this.Ht.ka)}constructor(t){super(No.la),this.Ht=t}},HA=class extends nr{constructor(t){super("change"),this.track=t}},ZA=class extends to{get fC(){return this._C}set fC(t){const e=this._C;if(t!==e){if(e){this.vC(e);for(const i of e.uC)t&&t.dC(i)||this.it(i)}if(this._C=t,t){const e=[];for(const i of t.uC)this.tt(i),this.mC(i)&&e.push(i);this.gC(t);for(const t of e)t.wo(new Ec(t))}}}gC(t){t.yn(Se.OI,this.pC),t.yn(Se.VI,this.wC)}vC(t){t.fn(Se.OI,this.pC),t.fn(Se.VI,this.wC)}gn(t){!t&&this._C&&this._C.gn(),super.gn()}constructor(){super(),this._C=void 0,this.pC=t=>{const e=t.Ht;this.tt(e)},this.wC=t=>{const e=t.Ht;this.it(e)}}};r(),r(),r();var XA=w.freeze||Vd;function zA(t,e,i){w.defineProperty(t,e,{writable:!1,enumerable:!0,value:i})}function qA(t){return XA(t)}function nh(t,e){for(const i of w.getOwnPropertyNames(e))w.defineProperty(t,i,w.getOwnPropertyDescriptor(e,i));return t}function nu(t){if(yd(t)){const e={};for(const i in t)Fa.call(t,i)&&(e[i]=nu(t[i]));return e}if(rl(t)){const e=new Array(t.length);for(let i=0;i<e.length;i++)i in t&&(e[i]=nu(t[i]));return e}return t}function Ai(t,e){return t===e||!(!t||!e)&&(!(!V(t)||!V(e))&&(lc(t)?!!lc(e)&&function(t,e){const i=t.length,s=e.length;if(i!==s)return!1;for(let s=0;s<i;s+=1)if(!Ai(t[s],e[s]))return!1;return!0}(t,e):!lc(e)&&function(t,e){const i=w.keys(t),s=w.keys(e);if(!i||!s||i.length!==s.length)return!1;for(const s of i)if(!Fa.call(e,s)||!Ai(t[s],e[s]))return!1;return!0}(t,e)))}function YA(t,e){if(!V(t))return!1;for(const i of e)if(!(i in t))return!1;return!0}function KA(t,e){return t.constructor===e.constructor}function jA(t){const e={};for(const i of w.keys(t)){const s=t[i];null!=s&&(e[i]=s)}return e}function QA(t){const e={};for(const i of w.keys(t)){const s=t[i];if(lc(s)){const t=[];for(let e=0;e<s.length;e+=1){const i=s[e];if(null!=i){const e=V(i)?QA(i):i;t.push(e)}}e[i]=t}else null!=s&&(e[i]=V(s)?QA(s):s)}return e}function xc(t){let e=t;if("string"==typeof e){if(e=e.toLowerCase(),"true"===e)return!0;if("false"===e)return!1}return Boolean(e)}function vi(t){return ji(t)?xc(t):void 0}function no(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function JA(t){const e=no(t);if(S(e))throw new g("Expected a valid number.");return e}function ze(t){return"string"==typeof t?t:""}function $A(t,e){if(!lc(t))return[];const i=0|t.length,s=new Array(i);for(let n=0;n<i;n++)s[n]=e(t[n]);return s}function tS(t,e){let i;return i=lc(t)?$A(t,e):e(t),i}r();var eS=[Se.OI,Se.VI,No.la];function iS(t){let e;const i=t.uC.map((t=>t.ka));return i.item=e=>{const i=0|e,s=t.lC(i);return s&&s.ka||void 0},i.addEventListener=(t,i)=>{e.yn(t,i)},i.removeEventListener=(t,i)=>{e.fn(t,i)},e=new hg(i),t.yn(eS,(t=>e.wo(t.ka))),i}r();var ln=function(t){return t[t.yC=0]="yC",t[t.bC=1]="bC",t[t.AC=2]="AC",t[t.SC=3]="SC",t[t.TC=4]="TC",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.kC=7]="kC",t}({});function sS(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function nS(){}function yi(t){const e=[No.nC,No.la,No.rC,No.hC,No.QUALITY_UNAVAILABLE];let i;const s={get activeQuality(){return t.EC&&t.EC.ka},get enabled(){return t.Rt},set enabled(e){t.Rt=xc(e)},get id(){return t.o},get uid(){return t.xC},get kind(){return t.Lt},get label(){return t.xh},set label(e){t.xh=ze(e)},get accessibility(){var e,i;return null!=(i=null==(e=t.RC)?void 0:e.map(sS))?i:[]},get language(){return t.gs},get qualities(){return t.IC.ka},set targetQuality(e){let i;i=e?function(t,e){const i=[];for(const s of t.IC.uC)for(const t of e)s.ka===t&&i.push(s);return i}(t,rl(e)?e:[e]):[],i.length>0?t.DC=i:t.DC=void 0},get targetQuality(){if(t.DC)return 1===t.DC.length?t.DC[0].ka:t.DC.map((t=>t.ka))},addEventListener(t,e){const s=tS(t,ze);i.yn(s,e)},removeEventListener(t,e){const s=tS(t,ze);i.fn(s,e)}};return i=new hg(s),t.yn(e,(t=>i.wo(t.ka))),w.defineProperty(s,"constructor",{value:nS}),s}function rS(){}function oS(t){const e=iS(t);return w.defineProperty(e,"constructor",{value:rS}),e}var Wh=class extends ZA{ba(){return oS(this)}mC(t){return t.Rt}};r(),r(),r();var bh=function(t){return t.Th="disabled",t.NC="hidden",t.Jn="showing",t}({});function vu(t){if("string"==typeof t){const e=t.toLowerCase();switch(e){case"disabled":case"hidden":case"showing":return e}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}r();var yo=function(t){return t.da="error",t}({});function hS(){}function Qh(t){const e=[No.la,No.nC,No.UI,No.HI,No.qI,No.KI,No.XI,No.QI,No.tC,No.iC],i=[yo.da];let s;const n={get kind(){return t.Lt},get label(){return t.xh},set label(e){t.xh=ze(e)},get language(){return t.gs},get id(){return t.o},get uid(){return t.xC},get inBandMetadataTrackDispatchType(){return t.MC},get mode(){return t.xE},set mode(e){e!==bh.Jn&&e!==bh.NC&&e!==bh.Th||t.LC(e)},get forced(){return Boolean(t.BC)},get accessibility(){var e,i;return null!=(i=null==(e=t.RC)?void 0:e.map(sS))?i:[]},get type(){return t.Aw},get readyState(){return t.sI},get cues(){return t.xE===bh.Th?null:t.L.ka},get activeCues(){return t.xE===bh.Th?null:t.q.ka},get src(){return t.OC||""},addEventListener(t,e){const i=tS(t,ze);s.yn(i,e)},removeEventListener(t,e){const i=tS(t,ze);s.fn(i,e)}};return s=new hg(t),t.yn(e,(t=>s.wo(t.ka))),t.yn(i,(t=>s.wo(t))),w.defineProperty(n,"constructor",{value:hS}),n}function aS(){}function uS(t){const e=iS(t);return w.defineProperty(e,"constructor",{value:aS}),e}var at=class extends ZA{ba(){return uS(this)}mC(t){return t.xE===bh.Jn}};r(),r();var cS=class extends Co{get FC(){}get VC(){return!1}get WC(){}get ka(){var t;return null!=(t=this.su)?t:this.su=lS(this)}GC(){}};function lS(t){return{goLive:()=>t.GC(),get isLive(){return t.VC},get latencies(){return t.FC},get manifest(){return t.WC},addEventListener(e,i){t.yn(fS(e),i)},removeEventListener(e,i){t.fn(fS(e),i)}}}var dS=["golive","latencyrecoveryseek"];function fS(t){const e=tS(t,ze);return(Yt(e)?[e]:e).filter((t=>ms(dS,t)))}var $c=class extends Co{set fC(t){const e=this._C;t!==e&&(e&&this.vC(e),t&&this.gC(t),this._C=t)}get fC(){return this._C}get ka(){return this.su||(this.su=lS(this)),this.su}gC(t){t.yn(dS,this.Ds)}vC(t){t.fn(dS,this.Ds)}GC(){var t;null==(t=this._C)||t.GC()}get FC(){var t;return null==(t=this._C)?void 0:t.FC}get VC(){return!!this._C&&this._C.VC}get WC(){var t;return null==(t=this._C)?void 0:t.WC}gn(){this.$o(),this._C&&this.vC(this._C),this._C=void 0}constructor(){super(),this._C=void 0,this.su=void 0,this._C=void 0}};r(),r();var _S="8E80B9CE",vS=function(t){return t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled",t}({});function mS(t){return{appID:t&&t.appID?ze(t.appID):_S}}r(),r();var yh=function(t){return t.gE="",t.HC="anonymous",t.ZC="use-credentials",t}({}),nl=function(t){return t.XC="application/dash+xml",t.zC="application/vnd.apple.mpegurl",t.qC="application/x-mpegurl",t.YC="video/mp4",t.KC="application/vnd.theoplayer.hesp+json",t.jC="application/vnd.theo.hesp+json",t.QC="millicast",t.JC="theolive",t}({});function gS(t){if(null!==t)return t}function pS(t){const e={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:gS(t.streamActivityMonitorID),adTagParameters:V(t.adTagParameters)?t.adTagParameters:{},authToken:gS(t.authToken),omidAccessModeRules:gS(t.omidAccessModeRules)};if(t.enableNonce&&(e.enableNonce=!0),"vod"===(null==t?void 0:t.availabilityType)||function(t){const e=t;return Boolean(e.videoID&&e.contentSourceID)}(t)){const i=t.videoID,s=t.contentSourceID;return i?s?Bo({},e,{availabilityType:"vod",videoID:i,contentSourceID:s}):void Ms.Op("A VOD DAI configuration was provided without valid contentSourceID which is required."):void Ms.Op("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const e=t;return Boolean(e.assetKey)}(t)){const i=t.assetKey;return i?Bo({},e,{availabilityType:"live",assetKey:i}):void Ms.Op("A Live DAI configuration was provided without valid assetKey which is required.")}Ms.Op("A DAI configuration was provided without a valid availabilityType which is required.")}function wS(t){return"google-dai"===t.integration?pS(t):Bo({},t,{integration:String(t.integration)})}r(),r(),r(),r(),r(),r();var vc,Ch="titanium",yS="conax",bS="ezdrm",AS="irdeto",SS="vudrm",TS="verimatrix",go="keyos",kS="drmtoday",ES="expressplay",xS="azure",RS="xstream",IS="vimond",CS="axinom",PS="uplynk",DS="comcast",NS="custom";function MS(t,e){if(null==t)return{};var i,s,n={},r=w.keys(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||(n[i]=t[i]);return n}function LS(t){return ji(t.token&&t.deviceId)}function BS(t){var e;const i=null==(e=t.fairplay)?void 0:e.headers;return void 0!==i&&ji(i.PreAuthorization)}function OS(t){const e=t;return LS(e)&&""!==e.token&&""!==e.deviceId&&!BS(e)}r(),r(),r(),r(),r(),function(t){t.$C=!1,t.tP=!1,t.eP=!1,t.iP=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.sP=!1,t.nP=!1,t.LOG_LCEVC_DETAILS=!1}(vc||(vc={})),r();var sr=class extends A{get name(){return"ContentProtectionError"}constructor(t,e,i,s,n,r,o,h){super(t,e,i),this.url=s,this.status=n,this.statusText=r,this.response=o,this.systemCode=h}};r();var FS=class{get rP(){return this.oP}get aT(){return this.iT}hP(t){return function(t){const e=t.onCertificateRequest;if(void 0!==e&&"function"!=typeof e)throw new b("ContentProtectionIntegration.onCertificateRequest is not a function.");const i=t.onCertificateResponse;if(void 0!==i&&"function"!=typeof i)throw new b("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new b("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new b("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new b("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.aP.build(t))}constructor(t,e,i){this.oP=t,this.iT=e,this.aP=i}};r();var VS=function(t){return t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED",t}({}),WS=class{registerContentProtectionIntegration(t,e,i){switch(this.uP(t,e,i)){case VS.FAILED:throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+e+".");case VS.OVERRIDDEN:{const i=uT(e);Ms.Op("Warning: Overwriting an earlier registered integration for "+t+" and "+i+".");break}case VS.SUCCEEDED:uT(e);0;break}}uP(t,e,i){const s=uT(e);if(!s)return VS.FAILED;let n=VS.SUCCEEDED;for(const e of this.cP.slice())e.rP===t&&e.aT===s&&(n=VS.OVERRIDDEN,we(this.cP,e));return this.cP.push(new FS(t,s,i)),n}lP(t,e){return void 0!==this.dP(t,e)}fP(t,e,i){const s=this.dP(t,e);if(!s)throw g("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+e);return s.hP(i)}dP(t,e){for(const i of this.cP)if(i.rP===t&&(!e||i.aT===e))return i}constructor(){this.cP=[]}};WS._P=new WS,r(),r();var Tt=function(t){return t.vP="moov",t.mP="mvhd",t.gP="trak",t.pP="tkhd",t.wP="mdia",t.yP="mdhd",t.bP="hdlr",t.AP="minf",t.SP="stbl",t.TP="stsd",t.kP="stsc",t.EP="mvex",t.xP="trex",t.RP="avc1",t.IP="avcC",t.CP="hev1",t.PP="hvc1",t.DP="hvcC",t.NP="vp09",t.MP="vpcC",t.LP="av01",t.BP="av1C",t.OP="dvcC",t.FP="dvvC",t.VP="dvwC",t.WP="dec3",t.UP="dvav",t.GP="dva1",t.HP="dvhe",t.ZP="dvh1",t.zP="ec-3",t.qP="colr",t.YP="pasp",t.KP="mp4a",t.jP="esds",t.QP="fLaC",t.JP="dfLa",t.$P="wvtt",t.tD="vttC",t.eD="vlab",t.iD="enca",t.sD="encv",t.nD="moof",t.rD="mfhd",t.oD="traf",t.hD="tfhd",t.aD="trun",t.uD="tfdt",t.cD="senc",t.lD="mdat",t.dD="pssh",t.fD="emsg",t._D="sidx",t.vD="styp",t.mD="ftyp",t.gD="sinf",t.pD="frma",t}({}),US=function(t){return t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof",t}({}),Zh=function(t){return t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",t}({}),Th=function(t){return t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT",t}({});r();var GS=class t{wD(){return oc(this.qk,this.yD)}bD(){return Ei(this.qk,this.yD)}SD(){return function(t,e,i){void 0===i&&(i=!1);const s=t.getInt16(e.ec,i);return e.kb(2),s}(this.qk,this.yD)}TD(){return as(this.qk,this.yD)}kD(){return function(t,e,i){void 0===i&&(i=!1);const s=t.getInt32(e.ec,i);return e.kb(4),s}(this.qk,this.yD)}ED(){return Yr(this.qk,this.yD)}xD(t){return E(this.qk,this.yD,t)}RD(t){return function(t,e,i){const s=[];for(let n=0;n<i;n++)s.push(as(t,e));return s}(this.qk,this.yD,t)}CD(t){return jc(this.qk,this.yD,t)}PD(){return jg(this.qk,this.yD)}DD(t){this.yD.kb(t)}xb(){return new t(this.qk,this.yD.xb())}constructor(t,e){this.qk=t,this.yD=e}};r(),r();function HS(t,e){return t.Aw===e}function dn(t,e){for(const i of t)if(HS(i,e))return i}var ZS=class extends z{get name(){return"DataIncompleteError"}constructor(t,e){super(),this.ND=t,this.MD=e}},Mi=class t{static LD(e){const i=e.qk,s=e.yD,n=t.BD(i,s,!1);if(!n.OD)throw new ZS(s.ec,n.m);return n.m}static BD(e,i,s){const n=[];for(;i.ec<e.byteLength;){const r=t.FD(e,i,s);if(!r.OD)return{OD:!1,m:n};n.push(r.VD)}return{OD:!0,m:n}}static WD(e,i){const s=t.FD(e,i,!1);if(!s.OD)throw new ZS(i.ec);return s.VD}static UD(e,i){const s=e.qk,n=e.yD;for(;n.ec<s.byteLength;){const e=t.FD(s,n,!1);if(!e.OD)return;if(e.VD.Aw===i)return e.VD}}static FD(e,i,s){const n=i.ec,r=t.GD(e,i);if(!r.OD)return r;const o=r.HD;let h=o.Pb;if(0===h){if(s)return i.Eb(n),{OD:!1,ZD:1/0};h=e.byteLength-n}const a=n+h;if(a>e.byteLength){const t=a;return i.Eb(n),{OD:!1,ZD:t}}const u={Aw:o.Aw,ec:n,qk:new GS(mu(e,n,a),new Ri(o.XD))};return i.Eb(a),{OD:!0,VD:u}}static GD(t,e){const i=e.ec;if(!Ng(t,e,8)){return{OD:!1,ZD:e.ec+8}}let s=as(t,e),n=jc(t,e,4);if(1===s){if(!Ng(t,e,8)){const t=e.ec+8;return e.Eb(i),{OD:!1,ZD:t}}s=Yr(t,e).toNumber()}if("uuid"===n){if(!Ng(t,e,16)){const t=e.ec+16;return e.Eb(i),{OD:!1,ZD:t}}n=jc(t,e,16)}return{OD:!0,HD:{Aw:n,Pb:s,XD:e.ec-i}}}static zD(t,e,i){const s=t.qk,n=t.yD;let r=si(Rh(s),n.ec,s.byteLength);return i&&(r=kc(r)),n.kb(r.byteLength),{Aw:e,qk:r}}static qD(e,i,s){const n=e.TD(),{version:r,flags:o}=zS(n);return{Aw:i,YD:r,KD:o,qk:t.zD(e,i,s).qk}}};function Ua(t,e){const i=ki(t,e);if(!i)throw new g("Missing "+e+" atom");return i}function ki(t,e){for(const i of t)if(i.Aw===e)return i.qk}function XS(t,e){const i=[];for(const s of t)s.Aw===e&&i.push(s.qk);return i}function zS(t){return{version:t>>24,flags:new Ig(16777215&t)}}var rr=class t{static jD(e){const i=[],s=Mi.LD(new GS(e,new Ri));for(const e of s){const s=t.QD(e);s&&i.push(s)}return i}static JD(t){return Mi.BD(t,new Ri,!1).m.some(this.$D)}static tN(e){return XS(Mi.LD(new GS(e,new Ri)),Tt.dD).map(t.eN)}static iN(e){return XS(Mi.LD(e.qk),Tt.dD).map(t.eN)}static $D(t){return t.Aw===Tt.mD||t.Aw===Tt.vD||t.Aw===Tt.vP||t.Aw===Tt.nD||t.Aw===Tt.lD||t.Aw===Tt._D||t.Aw===Tt.fD}static QD(e){switch(e.Aw){case Tt.vP:return t.sN(e.qk);case Tt.nD:return t.nN(e.qk,e.ec);case Tt.lD:return t.rN(e.qk);case Tt._D:return t.oN(e.qk);case Tt.fD:return t.hN(e.qk)}}static sN(e){const i=Mi.LD(e),s=Ua(i,Tt.mP),n=XS(i,Tt.gP),r=ki(i,Tt.EP),o=t.aN(s),h=n.map(t.uN),a=r?t.cN(r):void 0;return{Aw:Tt.vP,HD:o,Z:h,lN:a}}static aN(t){const e=t.TD(),{version:i,flags:s}=zS(e),n=1===i?t.ED():t.TD(),r=1===i?t.ED():t.TD(),o=t.TD(),h=1===i?t.ED():t.TD(),a=t.TD(),u=t.bD()>>8;t.DD(2),t.DD(8);const c=t.RD(9);t.DD(24);const l=t.TD();return{Aw:Tt.mP,YD:i,KD:s,dN:n,fN:r,_N:o,ct:h,vN:a,vI:u,mN:c,gN:l}}static uN(e){const i=Mi.LD(e),s=Ua(i,Tt.pP),n=Ua(i,Tt.wP),r=t.pN(s),o=t.wN(n);return{Aw:Tt.gP,HD:r,yN:o}}static pN(t){const e=t.TD(),{version:i,flags:s}=zS(e),n=1===i?t.ED():t.TD(),r=1===i?t.ED():t.TD(),o=t.TD();t.DD(4);const h=1===i?t.ED():t.TD();t.DD(8);const a=t.SD(),u=t.SD(),c=t.SD()/256;t.DD(2);const l=t.RD(9),d=t.TD()/65536,f=t.TD()/65536;return{Aw:Tt.pP,bN:s.Rb(1),AN:s.Rb(2),SN:s.Rb(4),dN:n,fN:r,TN:o,ct:h,kN:a,EN:u,vI:c,mN:l,ji:d,Ti:f}}static wN(e){const i=Mi.LD(e),s=Ua(i,Tt.yP),n=Ua(i,Tt.bP),r=Ua(i,Tt.AP),o=t.xN(s),h=t.RN(n),a=t.CN(r);return{Aw:Tt.wP,HD:o,PN:h,DN:a}}static xN(t){const e=t.TD(),{version:i,flags:s}=zS(e),n=1===i?t.ED():t.TD(),r=1===i?t.ED():t.TD(),o=t.TD(),h=1===i?t.ED():t.TD();t.bD();return t.DD(2),{Aw:Tt.yP,YD:i,KD:s,dN:n,fN:r,_N:o,ct:h}}static RN(t){const e=t.TD(),{version:i,flags:s}=zS(e);t.DD(4);const n=t.CD(4);t.DD(12);const r=t.PD();return{Aw:Tt.bP,YD:i,KD:s,NN:n,l:r}}static CN(e){const i=Ua(Mi.LD(e),Tt.SP),s=t.MN(i);return{Aw:Tt.AP,LN:s}}static MN(e){const i=Ua(Mi.LD(e),Tt.TP),s=t.BN(i);return{Aw:Tt.SP,ON:s}}static BN(e){const i=e.TD(),{version:s,flags:n}=zS(i),r=(e.TD(),[]),o=Mi.LD(e);for(const e of o){const i=t.FN(e.qk,e.Aw);i&&r.push(i)}return{Aw:Tt.TP,YD:s,KD:n,VN:r}}static FN(e,i){let s=t.WN(e,i);return s||(s=t.UN(e,i),s||(i===Tt.$P?t.GN(e):void 0))}static WN(e,i){return i===Tt.KP?t.HN(e):i===Tt.QP||i===Tt.QP.toLowerCase()||i===Tt.QP.toUpperCase()?t.ZN(e):i===Tt.iD?t.XN(e):i===Tt.zP?t.zN(e):void 0}static UN(e,i){return i===Tt.RP?t.qN(e):i===Tt.CP||i===Tt.PP?t.YN(e,i):i===Tt.NP?t.KN(e,i):i===Tt.LP?t.jN(e,i):i===Tt.sD?t.QN(e):i===Tt.UP||i===Tt.GP||i===Tt.HP||i===Tt.ZP?t.JN(e,i):void 0}static $N(t,e){t.DD(6);return{Aw:e,tM:t.bD()}}static eM(e,i){const s=t.$N(e,i);e.DD(8);const n=e.bD(),r=e.bD();e.DD(2),e.DD(2);return Bo({},s,{iM:n,sM:r,nM:e.TD()>>>16})}static rM(e,i){const s=t.$N(e,i);e.DD(2),e.DD(2),e.DD(12);const n=e.bD(),r=e.bD(),o=e.TD(),h=e.TD();e.DD(4);const a=e.bD();e.DD(32);const u=e.bD();return e.DD(2),Bo({},s,{ji:n,Ti:r,oM:o,hM:h,aM:a,uM:u})}static HN(e){const i=t.eM(e,Tt.KP),s=Ua(Mi.LD(e),Tt.jP);return Bo({},i,{cM:t.lM(s)})}static ZN(e){const i=t.eM(e,Tt.QP),s=Ua(Mi.LD(e),Tt.JP);return Bo({},i,{dM:t.fM(s)})}static GN(e){const i=t.$N(e,Tt.$P),s=Mi.LD(e),n=Ua(s,Tt.tD),r=t._M(n),o=ki(s,Tt.eD);return Bo({},i,{vM:r,mM:o?t.gM(o):void 0})}static _M(t){return{Aw:Tt.tD,bd:t.PD()}}static gM(t){return{Aw:Tt.eD,xh:t.PD()}}static lM(t){return Mi.qD(t,Tt.jP,!0)}static fM(t){return Mi.qD(t,Tt.JP,!0)}static qN(e){const i=t.rM(e,Tt.RP),s=Mi.LD(e),n=Ua(s,Tt.IP),r=ki(s,Tt.YP);return Bo({},i,{pM:t.wM(n),yM:r?t.bM(r):void 0})}static YN(e,i){const s=t.rM(e,i),n=Ua(Mi.LD(e),Tt.DP);return Bo({},s,{AM:t.SM(n)})}static KN(e,i){const s=t.rM(e,i),n=Ua(Mi.LD(e),Tt.MP);return Bo({},s,{TM:t.kM(n)})}static jN(e,i){const s=t.rM(e,i),n=Mi.LD(e),r=Ua(n,Tt.BP),o=t.EM(r),h=ki(n,Tt.qP);return Bo({},s,{xM:o,RM:h?t.IM(h):void 0})}static QN(e){const i=e.xb(),s=t.rM(e,Tt.sD),n=Ua(Mi.LD(e),Tt.gD),r=t.CM(n);return Bo({},s,{PM:t.UN(i,r.NM.DM),MM:r})}static JN(e,i){const s=t.rM(e,i),n=Mi.LD(e);return Bo({},s,{LM:t.BM(n)})}static zN(e){const i=t.eM(e,Tt.zP),s=Ua(Mi.LD(e),Tt.WP);return Bo({},i,{OM:t.FM(s)})}static XN(e){const i=e.xb(),s=t.eM(e,Tt.iD),n=Ua(Mi.LD(e),Tt.gD),r=t.CM(n);return Bo({},s,{PM:t.WN(i,r.NM.DM),MM:r})}static CM(e){const i=Ua(Mi.LD(e),Tt.pD),s=t.VM(i);return{Aw:Tt.gD,NM:s}}static VM(t){const e=t.CD(4);return{Aw:Tt.pD,DM:e}}static wM(t){return Mi.zD(t,Tt.IP,!0)}static SM(t){return Mi.zD(t,Tt.DP,!0)}static BM(t){const e=ki(t,Tt.OP);if(void 0!==e)return Mi.zD(e,Tt.OP,!0);const i=ki(t,Tt.FP);if(void 0!==i)return Mi.zD(i,Tt.FP,!0);const s=ki(t,Tt.VP);if(void 0!==s)return Mi.zD(s,Tt.VP,!0);throw g("Error parsing Dolby Vision configuration box.")}static FM(t){return Mi.zD(t,Tt.WP,!0)}static kM(t){return Mi.zD(t,Tt.MP,!0)}static EM(t){return Mi.zD(t,Tt.BP,!0)}static IM(t){const e=t.CD(4);switch(e){case"nclx":return{WM:US.ON_SCREEN_COLOURS,UM:t.bD(),GM:t.bD(),HM:t.bD(),ZM:0!=(128&t.wD())};case"rICC":return{WM:US.RESTRICTED_ICC_PROFILE};case"prof":return{WM:US.UNRESTRICED_ICC_PROFILE};default:throw g("Could not parse ColourInformationBox: unknown type '"+e+"'.")}}static bM(t){const e=t.TD(),i=t.TD();return{Aw:Tt.YP,XM:e,zM:i}}static cN(e){const i=XS(Mi.LD(e),Tt.xP).map(t.qM);return{Aw:Tt.EP,Z:i}}static qM(t){const e=t.TD(),{version:i,flags:s}=zS(e),n=t.TD(),r=t.TD(),o=t.TD(),h=t.TD(),a=t.TD();return{Aw:Tt.xP,YD:i,KD:s,TN:n,YM:r,KM:o,jM:h,QM:a}}static nN(e,i){const s=Mi.LD(e),n=Ua(s,Tt.rD),r=XS(s,Tt.oD),o=t.JM(n),h=r.map(t.$M);return{Aw:Tt.nD,tL:i,HD:o,Z:h}}static JM(t){const e=t.TD(),{version:i,flags:s}=zS(e),n=t.TD();return{Aw:Tt.rD,YD:i,KD:s,eL:n}}static $M(e){const i=Mi.LD(e),s=Ua(i,Tt.hD),n=XS(i,Tt.aD),r=ki(i,Tt.uD),o=t.iL(s),h=n.map((e=>t.sL(e,o))),a=r?t.nL(r):void 0;return{Aw:Tt.oD,HD:o,rL:h,oL:a}}static iL(t){const e=t.TD(),{version:i,flags:s}=zS(e),n=t.TD(),r=s.Rb(Zh.BASE_DATA_OFFSET_PRESENT)?t.ED():void 0,o=s.Rb(Zh.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.TD():void 0,h=s.Rb(Zh.DEFAULT_SAMPLE_DURATION_PRESENT)?t.TD():void 0,a=s.Rb(Zh.DEFAULT_SAMPLE_SIZE_PRESENT)?t.TD():void 0,u=s.Rb(Zh.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.TD():void 0;return{Aw:Tt.hD,YD:i,KD:s,TN:n,hL:r,aL:o,KM:h,jM:a,QM:u}}static sL(e,i){const s=e.TD(),{version:n,flags:r}=zS(s),o=e.TD(),h=r.Rb(Th.DATA_OFFSET_PRESENT)?e.kD():void 0,a=r.Rb(Th.FIRST_SAMPLE_FLAGS_PRESENT)?e.TD():void 0,u=[];for(let s=0;s<o;s++){const o=t.uL(e,r,n,i);0===s&&void 0!==a&&(o.KD=a),u.push(o)}return{Aw:Tt.aD,YD:n,KD:r,cL:o,tL:h,lL:a,dL:u}}static uL(t,e,i,s){return{ct:e.Rb(Th.SAMPLE_DURATION_PRESENT)?t.TD():s.KM,Pb:e.Rb(Th.SAMPLE_SIZE_PRESENT)?t.TD():s.jM,KD:e.Rb(Th.SAMPLE_FLAGS_PRESENT)?t.TD():s.QM,fL:e.Rb(Th.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===i?t.TD():t.kD():void 0}}static hN(t){const e=t.qk,i=t.yD,s=as(e,i),{version:n,flags:r}=zS(s);if(1===n){const t=as(e,i),s=Yr(e,i),o=as(e,i),h=as(e,i),a=Vg(e,i),u=Vg(e,i),c=Uc(Rh(e),i.ec,e.byteLength);return i.kb(c.byteLength),{Aw:Tt.fD,YD:n,KD:r,_L:a,Dx:u,_N:t,vL:s,mL:o,o:h,gL:c}}{const t=Vg(e,i),s=Vg(e,i),o=as(e,i),h=as(e,i),a=as(e,i),u=as(e,i),c=Uc(Rh(e),i.ec,e.byteLength);return i.kb(c.byteLength),{Aw:Tt.fD,KD:r,YD:n,_L:t,Dx:s,_N:o,pL:h,mL:a,o:u,gL:c}}}static rN(t){return Mi.zD(t,Tt.lD,!1)}static eN(e){const i=e.qk,s=e.yD,n=kc(Rh(i)).buffer,r=as(i,s),{version:o,flags:h}=zS(r),a=t.wL(i,s),u=[];if(o>0){const t=as(i,s);for(let e=0;e<t;e++){const t=E(i,s,16);u.push(t)}}const c=as(i,s),l=new j(n,s.ec,c);return s.kb(i.byteLength),{Aw:Tt.dD,YD:o,KD:h,yL:a,bL:u,AL:c,qk:l,SL:n}}static wL(t,e){let i="";for(let s=0;s<4;s++){const s=oc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=oc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=oc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=oc(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<6;s++){const s=oc(t,e).toString(16);i+=1===s.length?"0"+s:s}return i.toLowerCase()}static oN(t){const e=t.qk,i=t.yD,s=as(e,i),{version:n,flags:r}=zS(s),o=as(e,i),h=as(e,i);let a,u;0===n?(a=vo.fromBits(as(e,i),0,!0),u=vo.fromBits(as(e,i),0,!0)):(a=Yr(e,i),u=Yr(e,i)),i.kb(2);const c=Ei(e,i),l=[];for(let t=0;t<c;t+=1){const t=as(e,i),s=t>>31&1,n=2147483647&t,r=as(e,i),o=as(e,i),h=o>>31&1,a=o>>28&7,u=268435455&o;l.push({TL:s,kL:n,ct:r,EL:h,xL:a,RL:u})}return{Aw:Tt._D,YD:n,KD:r,IL:o,_N:h,CL:a,PL:u,DL:c,NL:l}}static nL(t){const e=t.qk,i=t.yD,s=as(e,i),{version:n,flags:r}=zS(s);let o;return o=0===n?vo.fromBits(as(e,i),0,!0):Yr(e,i),{Aw:Tt.uD,YD:n,KD:r,oL:o}}},qS={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function YS(t){if(!t)return!0;const e=t.licenseAcquisitionURL,i=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,o=t.queryParameters;return!(e||i||s||n||r||o)}function KS(t){return t&&void 0!==t.licenseAcquisitionURL}var jS=KS,QS=KS;function JS(t){if(!t)return!0;if(iT(t))return!1;const e=t.fairplay,i=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return YS(e)&&YS(i)&&YS(s)&&void 0===n&&YS(r)}function $S(t){const e=OS(t),i=function(t){var e;const i=t;return BS(i)&&""!==(null==(e=i.fairplay)?void 0:e.headers.PreAuthorization)&&!LS(i)}(t);return(!e||!i)&&(e||i)}function tT(t){return t.integration===AS}function eT(t){const e=t;if(!e)return!1;if(JS(e))return!1;const i=e.fairplay,s=e.playready,n=e.widevine,r=e.clearkey;if(iT(t))return!0;if(i&&!function(t){const e=t;return e&&(void 0!==e.certificateURL||void 0!==e.certificate)}(i))return!1;if(s&&!jS(s))return!1;if(n&&!QS(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(e.integration){if(WS._P.lP(e.integration))return!0;switch(e.integration){case Ch:if(!function(t){const e=t,i=e.integration===Ch;return i&&(sT(t)||nT(t))}(t))return!1;break;case SS:if(!rT(t))return!1;break;case TS:if(!function(t){const e=t;return e.integration===TS}(t))return!1;break;case AS:if(!tT(t))return!1;break;case yS:if(!$S(t))return!1;break;case bS:if(!function(t){const e=t;return e.integration===bS}(t))return!1;break;case go:if(!iT(t))return!1;break;case kS:if(!function(t){const e=t;return e.integration===kS&&(void 0!==e.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(e))}(t))return!1;break;case ES:if(!function(t){const e=t;return e.integration===ES}(t))return!1;break;case RS:if(!oT(t))return!1;break;case IS:if(!function(t){return t.integration===IS}(t))return!1;break;case CS:if(!hT(t))return!1;break;case xS:if(!function(t){const e=t;return e.integration===xS&&void 0!==e.token}(t))return!1;break;case PS:if(!function(t){const e=t;return e.integration===PS}(t))return!1;break;case DS:if(!function(t){const e=t;return e&&ji(e.releasePid)&&ji(e.accountId)&&ji(e.token)}(t))return!1;break;case NS:return!0;default:return!1}}return!0}function iT(t){return t.integration===go}function sT(t){return void 0!==t.authToken}function nT(t){const e=t;return void 0!==e.accountName&&void 0!==e.customerName&&void 0!==e.portalId}function rT(t){const e=t;return e.integration===SS&&void 0!==e.token}function oT(t){const e=t;return e&&e.integration===RS&&Yt(e.ticketAcquisitionURL)&&Yt(e.streamId)}function hT(t){const e=t;return e.integration===CS&&void 0!==e.token}function aT(t,e){const i=e[t];var s;const n=null!=(s=null==i?void 0:i.licenseAcquisitionURL)?s:qS[t];var r;const o=null!=(r=null==i?void 0:i.customdata)?r:e.customdata,h=o?{customData:o}:{};var a;const u=Bo({},null!=(a=null==i?void 0:i.headers)?a:{},h),c=null!=i?i:{},{customdata:l}=c;return Bo({},MS(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function uT(t){switch(t.toLowerCase()){case"widevine":case am:return am;case"playready":case om:return om;case"fairplay":case Ve:return Ve}}function cT(t,e){switch(t){case im:return function(t){const e={},i=rr.tN(new DataView(t));for(const t of i)e[t.yL]=t.SL;return e}(e);case sm:case nm:return function(t){return{[dm]:t}}(e);default:throw new A(Qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}async function lT(t,e){return void 0===e&&(e=!1),!(!t.widevine||!await Ms.qp())||(!(!t.playready||!await Ms.zp())||(!(!t.clearkey||!await Ms.Zp())||!(e||!t.fairplay||!await Ms.Xp())))}function ul(t,e,i){const s=function(t,e,i){var s;const{useCredentials:n,crossOrigin:r}=function(t,e){let i=yh.gE;return t.useCredentials?i=yh.ZC:t.crossOrigin&&(i=BT(t.crossOrigin)),i===yh.gE&&e&&e.vr&&e.vr[360]&&(i=yh.HC),{useCredentials:i===yh.ZC,crossOrigin:i}}(t,e);let o=t.liveOffset;ji(o)||(o=i&&ji(i.liveOffset)?i.liveOffset:void 0);let h=t.timeServer;ji(h)||(h=e&&ji(e.timeServer)?e.timeServer:void 0);let a=t.hlsDateRange;ji(a)||(a=i&&ji(i.hlsDateRange)?Boolean(i.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),l=Boolean(t.lowLatency),d=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),_=ji(t.dash)?fT(t.dash):void 0,v=ji(t.hls)?_T(t.hls):void 0,m=pT(gT(t.abr),null==i?void 0:i.abr),g=vi(t.lcevc),p=ji(t.ignoreEmbeddedTextTrackTypes)?YT(t.ignoreEmbeddedTextTrackTypes):[];var w;const y=PT(null!=(w=t.seamlessSwitchStrategy)?w:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch),b=IT(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:o,timeServer:h,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:l,useNativePlayback:d,useManagedMediaSource:f,dash:_,hls:v,abr:m,lcevc:g,ignoreEmbeddedTextTrackTypes:p,seamlessSwitchStrategy:y,latencyConfiguration:b}}(t,e,i),n=gS(t.src);let r=t.type;r||(r=t.src?Mu(t.src):void 0);const o=function(t,e){let i;i=ji(t.contentProtection)?t.contentProtection:ji(t.drm)?t.drm:ji(e)&&ji(e.contentProtection)?e.contentProtection:ji(e)&&ji(e.drm)?e.drm:void 0;return dT(i)}(t,e);return Bo({},s,{src:n,type:r,contentProtection:o,ssai:ji(t.ssai)?wS(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function dT(t){return eT(t)&&t.integration&&t.integration===go?function(t){const e=aT(ge.gw,t),i=aT(ge.mw,t),s=t[ge.ww]&&aT(ge.ww,t);return Bo({integration:"keyos",widevine:e,playready:i},s?{fairplay:s}:{})}(t):t}function fT(t){return{useSeamlessPeriodSwitch:PT(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:vi(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?no(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:vi(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:vi(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:vi(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards),segmentRelativeVttTiming:vi(null==t?void 0:t.segmentRelativeVttTiming),forceRecreateMediaSourceOnAudioSwitch:vi(null==t?void 0:t.forceRecreateMediaSourceOnAudioSwitch)}}function _T(t){return{discontinuityAlignment:vT(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:xc(null==t?void 0:t.delaySubtitlePreload)}}function vT(t){if(!t||!Yt(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}r(),r(),r(),r();var ee=function(t){return t.fE="audio",t._E="video",t.Ak="text",t.vE="image",t.tE="unknown",t}({});function mT(t){return"audio"===t||"video"===t}function gT(t){if(!ji(t))return;return wT($A(null==t?void 0:t.preferredAudioCodecs,ze),$A(null==t?void 0:t.preferredVideoCodecs,ze),vi(null==t?void 0:t.restrictToPlayerSize))}function pT(t,e){if(!ji(t)&&!ji(e))return;var i;return wT(yT(null==t?void 0:t.preferredAudioCodecs,null==e?void 0:e.preferredAudioCodecs),yT(null==t?void 0:t.preferredVideoCodecs,null==e?void 0:e.preferredVideoCodecs),null!=(i=null==t?void 0:t.restrictToPlayerSize)?i:null==e?void 0:e.restrictToPlayerSize)}function wT(t,e,i){if(0!==t.length||0!==e.length||void 0!==i)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===e.length?void 0:e,restrictToPlayerSize:i}}function yT(t,e){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=e?e:[]}function bT(t,e){if(void 0!==e)switch(t){case ee._E:return e.preferredVideoCodecs;case ee.fE:return e.preferredAudioCodecs;default:return}}r(),r(),r();var Jc=!1;r();var tl=function(t){return t.ML="canplay",t.LL="canplaythrough",t.BL="loadeddata",t.OL="loadedmetadata",t.tC="readystatechange",t.FL="waiting",t.VL="playing",t}({}),ro=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function AT(t,e,i){return i?t<=e:t<e}r();var se=class t{get WL(){return this.UL.slice()}Cn(t){return this.UL[2*t]}jn(t){return this.UL[2*t+1]}GL(t){return this.HL[2*t]}ZL(t){return this.HL[2*t+1]}ks(){const t=this;return{get length(){return t.V},start(e){const i=0|e;return t.XL(i),t.Cn(i)},end(e){const i=0|e;return t.XL(i),t.jn(i)}}}zL(){const e=new Array(2*this.V),i=new Array(2*this.V);for(let t=0;t<this.V;t++)e[2*t]=this.Cn(t),e[2*t+1]=this.jn(t),i[2*t]=!0,i[2*t+1]=!0;return new t(e,i)}XL(t){if(t<0)throw new g("The index provided ("+t+") must be non-negative");if(t>=this.V)throw new g("The index provided ("+t+") is greater than the maximum bound ("+this.V+")")}qL(t){if(0===this.V)return 0;if(this.kr(t))return t;if(t<=this.Cn(0))return this.Cn(0);if(t>=this.jn(this.V-1))return this.jn(this.V-1);{let e=0,i=1/0;for(let s=0;s<this.V;s++){const n=this.Cn(s),r=_.abs(n-t);r<i&&(e=n,i=r);const o=this.jn(s),h=_.abs(o-t);h<i&&(e=o,i=h)}return e}}Sn(e){let i=0,s=0;const n=[],r=[];for(;i<this.V&&s<e.V;){const t=this.Cn(i),o=this.jn(i),h=this.GL(i),a=this.ZL(i),u=e.Cn(s),c=e.jn(s),l=e.GL(s),d=e.ZL(s),f=_.max(t,u),v=_.min(o,c);let m,g;m=t===u?h&&l:f===t?h:l,g=o===c?a&&d:v===o?a:d,(f<v||m&&g&&f===v)&&(n.push(f,v),r.push(m,g)),o===c?(i+=1,s+=1):o<c?i+=1:s+=1}return new t(n,r)}YL(){const e=this.KL(),i=e.V;if(0===i)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=e.Cn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!e.GL(0)));for(let t=0;t<i-1;t++)s.push(e.jn(t),e.Cn(t+1)),n.push(!e.ZL(t),!e.GL(t+1));const o=e.jn(i-1);return o!==1/0&&(s.push(o,1/0),n.push(!e.ZL(i-1),!1)),new t(s,n)}jL(e){let i=0,s=0;const n=this.V,r=e.V,o=new Array(2*(n+r)),h=new Array(2*(n+r));let a=0;for(;i<n&&s<r;){const t=this.Cn(i),n=this.jn(i),r=e.Cn(s),u=e.jn(s);t<r||t===r&&n<u?(o[a]=t,o[a+1]=n,h[a]=this.GL(i),h[a+1]=this.ZL(i),i++):(o[a]=r,o[a+1]=u,h[a]=e.GL(s),h[a+1]=e.ZL(s),s++),a+=2}for(;i<n;)o[a]=this.Cn(i),o[a+1]=this.jn(i),h[a]=this.GL(i),h[a+1]=this.ZL(i),i++,a+=2;for(;s<r;)o[a]=e.Cn(s),o[a+1]=e.jn(s),h[a]=e.GL(s),h[a+1]=e.ZL(s),s++,a+=2;return new t(o,h)}QL(e){void 0===e&&(e=0);const i=this.V;if(i<2)return this;const s=[],n=[];let r=this.Cn(0),o=this.jn(0),h=this.GL(0),a=this.ZL(0);for(let t=1;t<i;t++){const i=this.Cn(t),u=this.jn(t);let c=this.GL(t),l=this.ZL(t);r<i&&o>u||(r===i&&(c=h||c,h=c),o===u&&(l=a||l,a=l),AT(i,o+e,a||c)?(o=u,a=l):(s.push(r,o),n.push(h,a),r=i,o=u,h=c,a=l))}return s.push(r,o),n.push(h,a),new t(s,n).KL()}KL(){const e=[],i=[];for(let t=0;t<this.V;t++){const s=this.Cn(t),n=this.jn(t),r=this.GL(t),o=this.ZL(t);s===n?(r||o)&&(e.push(s,n),i.push(!0,!0)):(e.push(s,n),i.push(r,o))}return new t(e,i)}JL(t){if(0===this.V)return t;if(0===t.V)return this;return this.jL(t).QL()}$L(t){const e=this.KL(),i=t.KL(),s=e.YL(),n=i.YL(),r=s.Sn(i),o=n.Sn(e);return r.JL(o)}kb(e){if(0===this.V||0===e)return this;const i=[],s=[];for(let t=0;t<this.V;t++){const n=this.Cn(t)+e,r=this.jn(t)+e;i.push(n,r),s.push(this.GL(t),this.ZL(t))}return new t(i,s)}tB(t){return 0===this.V||0===t.V?this:this.KL().Sn(t.KL().YL())}kr(t,e){return this.eB(t,e)>=0}iB(t,e,i,s,n){return this.sB(t,e,i,s,n)>=0}nB(t,e,i,s,n){return this.rB(t,e,i,s,n)>=0}oB(t){if(t.V!==this.V)return!1;for(let e=0;e<this.V;e++)if(this.Cn(e)!==t.Cn(e)||this.jn(e)!==t.jn(e)||this.GL(e)!==t.GL(e)||this.ZL(e)!==t.ZL(e))return!1;return!0}hB(e){const i=[],s=[];for(let t=0;t<this.V;t++){const n=this.Cn(t),r=this.jn(t),o=this.GL(t),h=this.ZL(t);e(n,r,o,h)&&(i.push(n,r),s.push(o,h))}return new t(i,s)}rB(t,e,i,s,n){void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,o=e+n;for(let t=0;t<this.V;t+=1)if(AT(this.Cn(t),o,!s||this.GL(t))&&AT(r,this.jn(t),!i||this.ZL(t)))return t;return-1}sB(t,e,i,s,n){void 0===i&&(i=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,o=e-n;for(let t=0;t<this.V;t+=1)if(AT(this.Cn(t),r,!i||this.GL(t))&&AT(o,this.jn(t),!s||this.ZL(t)))return t;return-1}eB(t,e){return this.sB(t,t,!0,!0,e)}aB(t,e){void 0===e&&(e=0);const i=t+e;for(let t=this.V-1;t>=0;t-=1)if(AT(this.Cn(t),i,this.GL(t)))return t;return-1}uB(t,e){void 0===e&&(e=0);const i=t-e;for(let t=0;t<this.V;t+=1)if(AT(i,this.jn(t),this.ZL(t)))return t;return-1}cB(t,e){void 0===e&&(e=0);const i=t+e;for(let t=0;t<this.V;t+=1)if(this.Cn(t)>i)return t;return-1}lB(e){return this.XL(e),new t([this.Cn(e),this.jn(e)],[this.GL(e),this.ZL(e)])}dB(t,e){const i=this.eB(t,e);return i<0?void 0:this.lB(i)}get fB(){let t=0;for(let e=0;e<this.V;e++){t+=this.jn(e)-this.Cn(e)}return t}static xn(e){const i=[];for(let t=0;t<e.length;t++)i.push(e.start(t),e.end(t));return new t(i)}static _B(e){return new t([e,e],[!0,!0])}static vB(e,i){return e<=i?new t([e,i]):t.mB()}static mB(){return ST}constructor(t,e){this.V=t.length>>1,this.UL=t,this.HL=e||function(t){const e=new Array(2*t);for(let i=0,s=0;i<t;i+=1,s+=2)e[s]=!0,e[s+1]=!1;return e}(this.V)}},ST=new se([]),At=.92,mt=1.08,TT=.25,kT=class extends Co{get gB(){return this.He&&this.so}get pB(){return this.wB}get Rt(){return this.He}set Rt(t){this.He=t,t?this.Cn():this.EI()}yB(t){this.bB.push(t),this.AB()}SB(t){we(this.bB,t),this.AB()}AB(){this.wB=this.TB(),this.so&&this.kB()}TB(){const t=this.EB,e=function(t,e){const i=e-t.targetOffset;return{minimumOffset:t.minimumOffset+i,targetOffset:t.targetOffset+i,maximumOffset:t.maximumOffset+i,forceSeekOffset:t.forceSeekOffset+i,minimumPlaybackRate:t.minimumPlaybackRate,maximumPlaybackRate:t.maximumPlaybackRate,leniency:t.leniency}}(this.xB,this.RB),i=[e,...this.bB],s=i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.minimumOffset)?i:0)}),t),n=i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.targetOffset)?i:0)}),s+TT),r=i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.maximumOffset)?i:0)}),n+TT);return{minimumOffset:s,targetOffset:n,maximumOffset:r,forceSeekOffset:i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=null==e?void 0:e.forceSeekOffset)?i:0)}),r+TT),minimumPlaybackRate:i.reduce(((t,e)=>{var i;return _.min(t,null!=(i=e.minimumPlaybackRate)?i:At)}),At),maximumPlaybackRate:i.reduce(((t,e)=>{var i;return _.max(t,null!=(i=e.maximumPlaybackRate)?i:mt)}),mt)}}IB(){var t;const e=null==(t=se.xn(this.ea.gR).dB(this.ea.SR))?void 0:t.jn(0),i=void 0!==e?e-this.ea.SR:0;this.CB=_.min(this.CB,i),this.PB+=1}DB(){if(this.PB<10)return;const t=.25-this.CB,e=Vs(this.RB+t,this.RB-.1,this.RB+.1);this.RB=Vs(e,this.NB,this.MB),this.CB=1/0,this.PB=0}LB(){this.BB(),this.jE=Ms.Ug((()=>this.kB()),500)}BB(){void 0!==this.jE&&(Ms.Wg(this.jE),this.jE=void 0)}Cn(){this.He&&this.OB&&(this.so||this.FB.yn(Ti.sb,this.kB),this.VB=Ms.Wp((()=>this.IB()),1e3),this.WB=Ms.Wp((()=>this.DB()),6e4),this.LB(),this.so=!0)}EI(){this.so&&(this.BB(),this.VB&&Ms.Up(this.VB),this.WB&&Ms.Up(this.WB),this.FB.fn(Ti.sb,this.kB),this.UB(1),this.so=!1)}Hw(){this.EI(),this.ea.fn(tl.FL,this.GB),this.ea.fn(tl.VL,this.HB),this.$o()}UB(t){this.FB.XB.ZB||this.ea.KR!==t&&(this.ea.KR=t)}get zB(){return this.ea.qB}constructor(t,e,i){var s;super(),this.so=!1,this.He=!1,this.bB=[],this.OB=!1,this.EB=0,this.jE=void 0,this.PB=0,this.CB=1/0,this.GB=()=>{const t=this.FB.gR,e=this.FB.SR,i=t.dB(e);i&&(this.EB=Vs(i.jn(0)-e,this.EB,.5),this.AB())},this.HB=()=>{this.OB=!0,this.ea.fn(tl.VL,this.HB),this.He&&this.Cn()},this.kB=()=>{this.BB(),this.LB();const t=this.zB;if(!t)return;const e=this.YB();if(t>this.wB.forceSeekOffset)return this.wo(new pe("latencyrecoveryseek")),void this.GC();const{minimumOffset:i,targetOffset:s,maximumOffset:n}=this.wB,r=this.FB.KR;if(e>n&&this.KB()){const t=this.wB.maximumPlaybackRate;Jc,this.UB(t)}else if(e<i&&!Ms.Ys.Jg){const t=this.wB.minimumPlaybackRate;Jc,this.UB(t)}else if(r>1&&e<s){const t=1;Jc,this.UB(t)}else if(r<1&&e>s){const t=1;Jc,this.UB(t)}},this.ea=t,this.FB=e,this.xB=i,this.NB=i.targetOffset,this.MB=i.targetOffset+(null!=(s=i.leniency)?s:0),this.RB=i.targetOffset,this.wB=this.TB(),this.ea.yn(tl.FL,this.GB),this.ea.yn(tl.VL,this.HB)}},ET=.66,xT=1.5,RT=3;function IT(t){if(!ji(t))return;const e=Ms.Ys.$g?10:0,i=t.targetOffset;var s;var n;var r;var o;var h;var a;return{minimumOffset:null!=(s=t.minimumOffset)?s:i*ET,targetOffset:i,maximumOffset:null!=(n=t.maximumOffset)?n:i*xT,forceSeekOffset:_.max(null!=(r=t.forceSeekOffset)?r:i*RT,e),minimumPlaybackRate:null!=(o=t.minimumPlaybackRate)?o:At,maximumPlaybackRate:null!=(h=t.maximumPlaybackRate)?h:mt,leniency:null!=(a=t.leniency)?a:void 0}}var Gu=function(t){return t.jB="auto",t.QB="always",t.JB="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only",t}({}),CT=function(t){return t.UPLYNK="uplynk",t.MEDIATAILOR="mediatailor",t}({});function PT(t){if(!t||!Yt(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}r(),r();var jn=function(t){return t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled",t}({});r();var DT=!1;r();var NT=function(t){return t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll",t}({});r();var Lr=function(t){return t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange",t.MILLICAST="millicast",t}({});function MT(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":case"millicast":return!0;default:return!1}}function LT(t){return!!t&&Oh(t,"mpd")}function Mu(t){let e=nl.YC;return LT(t)&&(e=nl.XC),function(t){return!!t&&Oh(t,"m3u8")}(t)&&(e=nl.zC),e}function BT(t){switch(t){case yh.HC:case yh.ZC:return t;default:return yh.gE}}function OT(t){if(!t)return!1;const e=t.toLowerCase();return Sl(e,nl.XC)}function zh(t){if(!t)return!1;const e=t.toLowerCase();return Sl(e,nl.zC)||Sl(e,nl.qC)}function Xc(t){return V(t)&&V(t.ssai)&&"google-dai"===t.ssai.integration}function Wc(t){return V(t)&&("verizon-media"===t.integration||"uplynk"===t.integration)}function FT(t){return V(t)&&("theolive"===t.type||"theolive"===t.integration)}function VT(t){return V(t)&&"mediatailor"===t.integration}function Lc(t){return V(t)&&"millicast"===t.type}function WT(t){if(t.sources)if(rl(t.sources)){for(const e of t.sources)if(Lc(e))return!0}else if(V(t.sources))return Lc(t.sources);return!1}function UT(t){if(Yt(t))return!t;if(Wc(t))return!t.id;if(Xc(t)){const e=t.ssai,i="live"===e.availabilityType&&e.assetKey,s="vod"===e.availabilityType&&e.contentSourceID&&e.videoID;return Boolean(i&&s)}return Lc(t)?!t.src||!t.streamAccountId:!t.src}function Cn(t){return Boolean(V(t)&&Yt(t.src))}function GT(t){return t.type===nl.KC||t.type===nl.jC}function zc(t){return Yt(t)||Cn(t)||Xc(t)||Wc(t)||Lc(t)}function Fn(t){if(t){if(zc(t))return UT(t);for(const e of t)if(!UT(e))return!1;return!0}return!0}function HT(){return{crossOrigin:yh.gE,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:Gu.jB,latencyConfiguration:void 0}}function ZT(){return Bo({},HT(),{src:void 0,type:nl.YC,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function XT(t){const e={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:jn.ENABLED,googleIma:{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0,allowSeekingForGoogleDai:!1},theoads:DT};return void 0===t||(void 0!==t.preload&&(e.preload=function(t){return"none"===t?NT.NONE:NT.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(e.showCountdown=xc(t.showCountdown)),void 0!==t.vpaidMode&&(e.vpaidMode=function(t){switch(t){case"insecure":return jn.INSECURE;case"disabled":return jn.DISABLED;default:return jn.ENABLED}}(t.vpaidMode)),rl(t.allowedMimeTypes)&&(e.allowedMimeTypes=t.allowedMimeTypes.filter(Yt)),void 0!==t.googleIma&&(e.googleIma=function(t){return void 0===t?{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0,allowSeekingForGoogleDai:!1}:{useNativeIma:xc(t.useNativeIma),useAdUiElementForSsai:xc(t.useAdUiElementForSsai),bitrate:null!=(e=t.bitrate)?e:-1,language:ji(t.language)?ze(t.language):void 0,uiElements:t.uiElements,allowSeekingForGoogleDai:xc(t.allowSeekingForGoogleDai)};var e}(t.googleIma)),void 0!==t.theoads?e.theoads=xc(t.theoads):e.theoads=DT),e}function zT(t){if(!lc(t))return[];const e=[];for(const i of t)V(i)&&e.push(i);return e}function qT(t){return Yt(t.src)||Lc(t)}function YT(t){return rl(t)?t.filter(MT):[]}r(),r();var Ht=function(t){return t[t.$B=0]="$B",t[t.Gn=1]="Gn",t[t.tO=2]="tO",t[t.eO=3]="eO",t[t.iO=4]="iO",t}({}),Ys=class extends pe{constructor(t,e=Ht.$B){super(Ti.Ry),this.currentTime=t,this.readyState=e}};r();var fl=class extends pe{constructor(t){super(Ti.Zy),this.currentTime=t}};r();var H=class extends pe{constructor(t){super(Ti.ro),this.currentTime=t}};r();var KT=class extends pe{constructor(t,e=Ht.Gn){super(tl.OL),this.currentTime=t,this.readyState=e}};r();var Ls=class extends pe{constructor(t){super(Ti.xy),this.duration=t}};r();var Nu=class extends pe{constructor(t,e){super(Ti.zy),this.currentTime=t,this.playbackRate=e}};r();var ri=class extends pe{constructor(t,e){super(Ti.sb),this.currentTime=t,this.currentProgramDateTime=e}};r();var Te=class extends pe{constructor(t){super(Ti.Cy),this.currentTime=t}};r();var jT=class extends pe{constructor(t,e=Ht.tO){super(tl.BL),this.currentTime=t,this.readyState=e}};r();var L=class extends pe{constructor(t){super(Ti.jy),this.currentTime=t}};r();var ha=class extends pe{constructor(t){super(Ti.Ky),this.currentTime=t}};r();var rs=class extends pe{constructor(t,e){super(Ti.ob),this.currentTime=t,this.volume=e}};r();var ho=class extends pe{constructor(t,e=Ht.eO){super(tl.ML),this.currentTime=t,this.readyState=e}};r();var QT=class extends pe{constructor(t,e=Ht.iO){super(tl.LL),this.currentTime=t,this.readyState=e}};r();var au=class extends pe{constructor(t,e){super(tl.tC),this.currentTime=t,this.readyState=e}};r();var Ga=class extends Ds{get error(){return this.errorObject.message}ba(){return this}constructor(t){super(yo.da),this.errorObject=t}};async function Ci(t,e,i,s,n){void 0===i&&(i=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(e)}catch(t){if(th(t),r<i){const t=_.min(s*2**r,n);r++,await Fe(t,e);continue}throw t}}r();var JT={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};r();var Iu=function(t){return t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture",t.NATIVE_PICTURE_IN_PICTURE="native-picture-in-picture",t}({}),$T=function(t){return t.NONE="none",t.ALL="all",t.CONTENT="content",t}({});function tk(t){switch(t){case"all":case"content":return t;default:return"none"}}function ek(t){var e;const i=nu(t||{});return i.libraryLocation&&(i.libraryLocation=Ki(i.libraryLocation,!0)),i.isEmbeddable=Boolean(i.isEmbeddable),i.cast=function(t){const e=mS(t?t.chromecast:void 0),i=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:e,strategy:i}}(i.cast),i.ads=XT(i.ads),i.analytics=zT(i.analytics),i.mutedAutoplay=tk(i.mutedAutoplay),i.allowNativeFullscreen=Boolean(i.allowNativeFullscreen),i.allowMixedContent=Boolean(i.allowMixedContent),i.persistVolume=Boolean(i.persistVolume),i.liveOffset=function(t){return Number(t)||void 0}(i.liveOffset),i.hlsDateRange=function(t){return Boolean(t)}(i.hlsDateRange),i.retainPlaybackRateOnSourceChange=Boolean(i.retainPlaybackRateOnSourceChange),i.license=function(t){return Yt(t)?t:void 0}(i.license),i.licenseUrl=function(t){if(!t)return;try{return Ki(t)}catch(t){return void Ms.Op("Invalid 'licenseUrl', falling back to default URL")}}(i.licenseUrl),i.abr=gT(i.abr),i.retryConfiguration=function(t){const e=Bo({},JT);return void 0!==t&&(void 0!==t.maxRetries&&(e.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(e.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(e.maximumBackoff=Number(t.maximumBackoff))),e}(i.retryConfiguration),i.hideDeprecationWarnings=Boolean(i.hideDeprecationWarnings),i.theoLive=function(t){if(!t)return t;return Bo({},t,{externalSessionId:t.externalSessionId?ze(t.externalSessionId):void 0,fallbackEnabled:vi(t.fallbackEnabled)})}(i.theoLive),null!=(e=i).uplynk||(e.uplynk=i.verizonMedia),i}function ik(t){return{bt:t.bt,SR:t.SR,ct:t.ct,RR:t.RR,lt:t.lt,DR:t.DR,GR:t.GR,qR:t.qR,KR:t.KR,sI:t.sI,hI:t.hI,cI:t.cI,fI:t.fI,vI:t.vI}}function sk(t,e){const i=e.vI,s=e.GR;t.vI=i,t.GR=s}function Zc(t,e,i){if(e===i)return;const s=e.bt!==i.bt,n=e.SR,r=e.ct,o=e.GR,h=e.qR,a=e.KR,u=e.sI,c=e.hI,l=(e.fI,e.cI,e.vI),d=i.SR,f=i.ct,_=i.RR,v=i.DR,m=i.GR,g=i.qR,p=i.KR,w=i.sI,y=i.hI,b=(i.fI,i.cI,i.vI);(s||u>Ht.$B&&w===Ht.$B)&&t.wo(new Ys(d,w)),g&&!h?t.wo(new fl(d)):!g&&h&&t.wo(new H(d)),w>=Ht.Gn&&(s||u<Ht.Gn)&&t.wo(new KT(d,w)),f===r||S(f)&&S(r)||t.wo(new Ls(f)),p!==a&&t.wo(new Nu(d,p)),d!==n&&t.wo(new ri(d,void 0)),_&&t.wo(new Te(d)),w>=Ht.tO&&(s||u<Ht.tO)&&t.wo(new jT(d,w)),y&&!c?t.wo(new L(d)):!y&&c&&t.wo(new ha(d)),b===l&&m===o||t.wo(new rs(d,b)),w>=Ht.eO&&(s||u<Ht.eO)&&t.wo(new ho(d,w)),w>=Ht.iO&&(s||u<Ht.iO)&&t.wo(new QT(d,w)),w!==u&&t.wo(new au(d,w)),v&&t.wo(new Ga(v))}function nk(t){switch(t){case Iu.INLINE:case Iu.FULLSCREEN:case Iu.PICTURE_IN_PICTURE:case Iu.NATIVE_PICTURE_IN_PICTURE:return t;default:return}}r();var rk=class extends pe{constructor(t){super(Ti.Ty),this.currentSource=t}};r();var Vi=class extends pe{constructor(){super(Ti.Py)}};r();var ok=class extends pe{constructor(){super(Ti.Ny)}};r(),r(),r();var To=function(t){return t.sO="enterpictureinpicture",t.nO="exitpictureinpicture",t.da="pictureinpictureerror",t}({}),hk=class extends pe{constructor(){super(To.sO)}};r();var ak=class extends pe{constructor(){super(To.nO)}},Vh=class extends Co{get fC(){return this._C}set fC(t){if(t===this._C)return;this.vC(this._C);const e=this._C.rO;this._C=t,this.gC(t),!e&&this._C.rO?this.wo(new hk):e&&!this._C.rO&&this.wo(new ak)}gC(t){t.yn(To.sO,this.Ds),t.yn(To.nO,this.Ds),t.yn(To.da,this.Ds)}vC(t){t.fn(To.sO,this.Ds),t.fn(To.nO,this.Ds),t.fn(To.da,this.Ds)}get oO(){return this._C.oO}get rO(){return this._C.rO}fo(){return this._C.fo()}_o(){return this._C._o()}gn(t){this.$o(),this.vC(this._C),t||this._C.gn()}constructor(t){super(),this._C=t,this.gC(this._C)}},uk=class extends Dc{Sa(){return this.hO}_R(){return this.aO}get MR(){return this.LR()}LR(){return this.uO}uI(){return this.Ll}dI(){return this.cO}lO(t){const e=this.vR;if(e===t)return;e._y(this.BI);const i=ik(this),s=this.AR(),n=this.bI(),r=this.AI();this.vR=t,this.aO.fC=t.ht,this.cO.fC=t.rt,this.Ll.fC=t.nt,this.hO.fC=t.Sa(),this.uO.fC=t.MR,void 0!==i&&Zc(this,i,this);const o=this.AR();o!==s&&this.wo(new rk(o)),this.bI()!==n&&this.wo(new Vi),this.AI()!==r&&this.wo(new ok),t.iy(this.BI)}async gn(){await super.gn(),this.hO.gn(),this.aO.gn(),this.cO.gn(),this.Ll.gn(),this.uO.gn()}constructor(t){super(t),this.aO=new Wh,this.cO=new Wh,this.Ll=new at,this.uO=new $c,this.hO=new Vh(t.Sa()),this.aO.fC=t.ht,this.cO.fC=t.rt,this.Ll.fC=t.nt,this.uO.fC=t.MR}};r();var ck=class extends uk{UR(){return function(t){let e=0,i=0,s=0,n=0,r=0,o=0,h=0;for(const a of t)e+=a.dO,i+=a.fO,s+=a._O,n+=a.vO,r+=a.mO,o+=a.gO.amountOfBufferedAudioSegments,h+=a.gO.amountOfBufferedVideoSegments;return{dO:e,fO:i,_O:s,vO:n,mO:r,gO:{amountOfBufferedAudioSegments:o,amountOfBufferedVideoSegments:h}}}(this.pO.map((t=>t.WR)))}EI(){return Rs(this.pO.map((t=>t.EI()))).then(It)}er(){return Rs(this.pO.map((t=>t.er()))).then(It)}SI(){if(!this.po){for(const t of this.pO)t.SI();this.po=!0}}mR(){const t=[];for(const e of this.pO)t.push(...e.mR());return t}NI(t){let e=!1;for(const i of this.pO)e=i.NI(t)||e;return e}wo(t){this.NI(t)||super.wo(t)}get fC(){return this.vR}set fC(t){this.lO(t)}wO(t){this.pO.push(t)}yO(t){we(this.pO,t)}lO(t){if(t===this.vR)return;const e=this.vR;e.lr(),super.lO(t),t.dr(e)}CI(){for(const t of this.pO)t.CI()}async gn(){this.$o(),this.vR.lr();for(const t of this.pO)this.vR!==t&&await t.gn();await super.gn()}constructor(t){super(t),this.pO=[],this.po=!1,this.bO=!1,this.wO(t)}};r();var lk=function(t){return t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR",t}({}),dk=class extends eg{get name(){return"MediaError"}constructor(t,e,i,s){super(e),this.code=t,this.message=null!=e?e:"Unknown error",this.cause=i,this.systemCode=s,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}};function fk(t){zA(t,"MEDIA_ERR_ABORTED",1),zA(t,"MEDIA_ERR_NETWORK",2),zA(t,"MEDIA_ERR_DECODE",3),zA(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),zA(t,"MEDIA_ERR_ENCRYPTED",5)}function Xs(t){var e,i;return function(t){return t.category===Ye.CONTENT_PROTECTION}(t)?new dk(5,t.message,null==(e=t.cause)?void 0:e.message,t.systemCode):new dk(_k(t.code),t.message,null==(i=t.cause)?void 0:i.message)}function _k(t){if(t===Qa.MEDIA_ABORTED)return 1;if(t===Qa.MANIFEST_LOAD_ERROR||t===Qa.MEDIA_LOAD_ERROR||t===Qa.SUBTITLE_LOAD_ERROR)return 2;if(t===Qa.MEDIA_DECODE_ERROR)return 3;if(t===Qa.MEDIA_NOT_SUPPORTED)return 4;const e=Ye.fromCode(t);return e===Ye.NETWORK?2:e===Ye.SOURCE?4:e===Ye.LICENSE?6:e===Ye.CONTENT_PROTECTION?5:e===Ye.AD?7:3}function vk(t){return new A(mk(t.code),t.message,t)}function mk(t){switch(t){case 1:return Qa.MEDIA_ABORTED;case 2:return Qa.NETWORK_ERROR;case 3:return Qa.MEDIA_DECODE_ERROR;case 4:return Qa.SOURCE_NOT_SUPPORTED;case 5:return Qa.CONTENT_PROTECTION_ERROR;case 6:return Qa.LICENSE_ERROR;case 7:return Qa.AD_ERROR}}fk(dk),fk(dk.prototype),r(),r(),r(),r(),r();var Nn=class extends to{tt(t){return super.tt(t)}ba(){return oS(this)}};r(),r(),r(),r();var Vc=class{get uC(){return this.AO}get V(){return this.AO.length}get ka(){return this.su||(this.su=function(t){const e=t.uC.map((t=>t.ka));return e.item=e=>{const i=0|e,s=t.lC(i);return s&&s.ka||void 0},e}(this)),this.su}SO(t){this.AO.push(t),this.su&&this.su.push(t.ka)}$S(t){we(this.AO,t),this.su&&we(this.su,t.ka)}lC(t){return this.AO[t]}TO(t){return rl(t)?function(t,e){for(const i of e)if(!ms(t,i))return!1;return!0}(this.AO,t):ms(this.AO,t)}er(){En(this.AO),this.su&&En(this.su)}constructor(){this.AO=[],this.su=void 0}};r();var Zs=class extends Un{ba(){return new gk(this.Ht.ka)}constructor(t){super(No.nC),this.Ht=t}},gk=class extends nr{constructor(t){super("update"),this.track=t}};r();var pk=0;function oi(){return pk++}var wk=0;var yk=0;function bk(){return yk++}var Ak=0;function Sk(){return Ak++}var Tk=0;var kk=class extends Co{get EC(){}get Rt(){return this.He}set Rt(t){this.He!==t&&(this.He=t,this.kO=t,this.wo(new Ec(this)))}get kO(){return this.EO.enabled}set kO(t){this.EO.enabled=t}get ka(){return this.su||(this.su=yi(this)),this.su}get o(){return this.ZS}get xC(){return this.xO}get Lt(){return this.EO.kind}get xh(){return this.RO}set xh(t){t!==this.RO&&(this.RO=t,this.wo(new Zs(this)))}get gs(){return this.EO.language}get xE(){return this.Rt?"enabled":"disabled"}get IO(){return this.EO}get IC(){return this.AO}get DC(){}set DC(t){}CO(t){this.Rt=t}PO(){this.Rt=this.kO}constructor(t){super(),this.Aw=ee.fE,this.He=!1,this.su=void 0,this.EO=t,this.xO=oi(),this.ZS=Tk+++"",this.RO=t.label,this.AO=new Vc,this.PO()}};r();var Ek=0;var xk=class extends Co{get EC(){}get Rt(){return this.He}set Rt(t){this.He!==t&&(this.He=t,this.kO=t,this.wo(new Ec(this)))}get kO(){return!!this.EO.selected}set kO(t){this.EO.selected=t}get ka(){return this.su||(this.su=yi(this)),this.su}get o(){return this.ZS}get xC(){return this.xO}get Lt(){return"main"}get xh(){return this.RO}set xh(t){t!==this.RO&&(this.RO=t,this.wo(new Zs(this)))}get gs(){return this.EO.language}get xE(){return this.Rt?"enabled":"disabled"}get IO(){return this.EO}get IC(){return this.AO}get DC(){}set DC(t){}PO(){this.Rt=this.kO}CO(t){this.Rt=t}constructor(t){super(),this.Aw=ee._E,this.He=!1,this.su=void 0,this.EO=t,this.xO=oi(),this.ZS=Ek+++"",this.AO=new Vc,this.RO=t.label,this.PO()}};r();var Rk=class extends pe{constructor(t){super(Ti.gy),this.OR=t}};r(),r();var ic=function(t){return t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR",t}({});r(),r();var Ik=function(t){return t.DO="cue",t.MO="region",t.LO="stylesheet",t}({});r(),r();var Ck={"line-left":"start",center:"middle","line-right":"end"},Pk={start:"line-left",middle:"center",end:"line-right"};function Dk(t,e){if("auto"===t)switch(e){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function Nk(t,e){if("auto"===t)switch(e){case"left":return 0;case"right":return 100;default:return 50}return function(t,e){const i="number"==typeof t?t:C(t);return S(i)?e:i}(t,50)}r(),r(),r();var T=function(t){return t.sO="fo",t.nO="_o",t.nC="tr",t}({}),dl=class extends Un{constructor(t,e){super(t),this.BO=e}},Kc=class extends nr{constructor(t,e){super(t),this.cue=e}};function Lt(t){const e=[T.sO,T.nO,T.nC];let i;const s={get OO(){return t},get track(){return t.Ht.ka},get id(){return t.o},get uid(){return t.xC},get startTime(){return t.FO},set startTime(e){t.FO=e},get endTime(){return t.VO},set endTime(e){t.VO=e},get content(){return t.U},addEventListener(t,e){const s=tS(t,ze);i.yn(s,e)},removeEventListener(t,e){const s=tS(t,ze);i.fn(s,e)}};return i=new hg(s),t.yn(e,(t=>i.wo(t.ka))),s}function Mk(){}function Lk(t){return nh(Lt(t),{get align(){return t.WO},get line(){return t.UO},get lineAlign(){return t.GO},get position(){return t.do},get positionAlign(){return t.HO},get region(){return t.ZO?t.ZO.ka:null},get size(){return t.Pb},get snapToLines(){return t.XO},get text(){return t.U},get vertical(){return t.Pt}})}r(),r();var bl=class extends dl{ba(){return new Bk(this.BO.ka)}constructor(t){super(T.nC,t)}},Bk=class extends Kc{constructor(t){super("update",t)}};r();var kl=class extends Un{ba(){return new Ok(this.BO.ka)}constructor(t){super(No.XI),this.BO=t}},Ok=class extends nr{constructor(t){super("updatecue"),this.cue=t}},Fk=.02;function Vk(t,e){return xs(t.zO,e.zO,Fk)&&xs(t.qO,e.qO,Fk)&&t.o===e.o}var Le=class extends Co{get FO(){return this.YO}set FO(t){var e,i;this.YO!==t&&(this.YO=t,null==(e=this.KO)||e.jO(this),this.wo(new bl(this)),null==(i=this.KO)||i.wo(new kl(this)))}get VO(){return this.QO}set VO(t){var e,i;this.QO!==t&&(this.QO=t,null==(e=this.KO)||e.jO(this),this.wo(new bl(this)),null==(i=this.KO)||i.wo(new kl(this)))}get o(){return this.ZS}get xC(){return this.xO}get ka(){return this.su||(this.su=this.ba()),this.su}ba(){return Lt(this)}get io(){return this.so}set io(t){this.so=t}get Ht(){return this.KO}set Ht(t){this.KO=t}get U(){return this.JO}set U(t){var e;this.JO!==t&&(this.JO=t,this.wo(new bl(this)),null==(e=this.KO)||e.wo(new kl(this)))}get $O(){return this.tF}set $O(t){this.tF=t}eF(t){return this===t||KA(this,t)&&Vk(this,t)&&this.iF(t)}iF(t){return Ai(this.U,t.U)}sF(t,e){this.YO=t,this.QO=e,this.zO=t,this.qO=e}gn(){this.$o()}constructor(t,e,i,s,n){super(),this.su=void 0,this.KO=void 0,this.so=!1,this.nF=-1,this.xO=Sk(),this.YO=t,this.QO=e,this.zO=t,this.qO=e,this.JO=i,this.tF=Boolean(s),this.ZS=null!=n?n:""}};function Wk(t,e){return t.U===e.U&&t.UO===e.UO&&t.GO===e.GO&&t.do===e.do&&t.HO===e.HO&&t.ZO===e.ZO&&t.XO===e.XO&&t.Pb===e.Pb&&t.WO===e.WO&&t.Pt===e.Pt}var Oi=class extends Le{get ka(){return this.su||(this.su=Lk(this)),this.su}get Aw(){return Ik.DO}iF(t){return Wk(this,t)}constructor(t,e,i,s,n){super(t,e,i,s,n),this.UO="auto",this.GO="start",this.do="auto",this.HO="auto",this.ZO=void 0,this.XO=!0,this.Pb=100,this.WO="center",this.Pt=""}};function Uk(t){const e=t.UO,i=Sd(e);return i&&!t.XO&&(e<0||e>100)?100:i?Number(e):t.XO?-1:100}function Gk(t){return Nk(t.do,t.WO)}function Hk(t){return Dk(t.HO,t.WO)}function Zk(t){const e=Hk(t),i=Gk(t);let s;switch(e){case"line-left":s=100-i;break;case"line-right":s=i;break;case"center":s=i<=50?2*i:2*(100-i)}return _.min(t.Pb,s)}function Xk(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.rF},get regionAnchorX(){return t.oF},get regionAnchorY(){return t.hF},get scrollValue(){return t.aF},get viewportAnchorX(){return t.uF},get viewportAnchorY(){return t.cF},get width(){return t.ji}}}r(),r();var zk=class{get ka(){return this.su||(this.su=Xk(this)),this.su}get Aw(){return Ik.MO}constructor(t,e,i,s,n,r,o,h){this.o=t,this.ji=e,this.rF=i,this.oF=s,this.hF=n,this.uF=r,this.cF=o,this.aF=h}};r(),r();var _o=1e6,qk=class{lF(t){return this.dF()*t}fF(t){return this._F(t)>0}vF(t){return this._F(t)>=0}mF(t,e){return this.pF(t).gF(e)}eF(t){return 0===this._F(t)}wF(t){return this._F(t)<0}gF(t){return this._F(t)<=0}yF(){return this.bF()?this.AF():this}SF(t){return this.SO(t.AF())}pF(t){return this.SF(t).yF()}};function Yk(t,e){return t.TF()?e.TF()?Rc.sh:Rc.Mw:e.TF()?Rc.Lw:t.kF()?e.kF()&&t.bF()===e.bF()?Rc.sh:t.bF()?Rc.Lw:Rc.Mw:e.bF()?Rc.Mw:Rc.Lw}r(),r();var Kk=4294967296,jk=Kk*Kk,Qk=jk*jk,Jk=Qk/2,Pi=class t{static EF(e,i,s){return s?new t(e.toUnsigned(),i.toUnsigned()):new t(e.toSigned(),i.toSigned())}static xF(e){return e.unsigned?new t(e,vo.UZERO):new t(e,e.isNegative()?vo.NEG_ONE:vo.ZERO)}static RF(e,i){if(S(e))return i?t.IF:t.CF;if(i){if(e<0)return t.IF;if(e>=Qk)return t.PF}else{if(e<=-Jk)return t.DF;if(e+1>=Jk)return t.NF}return e<0?t.RF(-e,i).AF():t.EF(vo.fromNumber(e%jk),vo.fromNumber(e/jk),i)}MF(){return this.LF.unsigned}BF(){return this.OF.isZero()&&this.LF.isZero()}bF(){return this.LF.isNegative()}FF(){return this.MF()?t.EF(this.OF,this.LF,!1):this}VF(){return this.MF()?this:t.EF(this.OF,this.LF,!0)}WF(){return this.OF}dF(){return this.bF()?-this.AF().dF():this.LF.toNumber()*jk+this.OF.toUnsigned().toNumber()}UF(){return this.OF.toInt()}eF(t){return(this.MF()===t.MF()||this.LF.getHighBits()>>>31!=1||t.LF.getHighBits()>>>31!=1)&&(this.LF.toUnsigned().eq(t.LF.toUnsigned())&&this.OF.toUnsigned().eq(t.OF.toUnsigned()))}_F(t){if(this.eF(t))return Rc.sh;const e=this.bF(),i=t.bF();if(e&&!i)return Rc.Lw;if(!e&&i)return Rc.Mw;if(!this.MF())return this.SF(t).bF()?Rc.Lw:Rc.Mw;const s=this.VF(),n=t.VF(),r=n.LF.comp(s.LF);return r>0||0===r&&n.OF.gt(s.OF)?Rc.Lw:Rc.Mw}wF(t){return this._F(t)<0}gF(t){return this._F(t)<=0}GF(t){return this._F(t)>0}HF(t){return this._F(t)>=0}ZF(){return new t(this.OF.not(),this.LF.not())}XF(e){return new t(this.OF.and(e.OF),this.LF.and(e.LF))}zF(e){return new t(this.OF.or(e.OF),this.LF.or(e.LF))}qF(e){const i=127&e;return 0===i?this:i<64?t.EF(this.OF.shl(i),this.LF.shl(i).or(this.OF.shru(64-i)),this.MF()):t.EF(vo.ZERO,this.OF.shl(i-64),this.MF())}YF(e){const i=127&e;return 0===i?this:i<64?t.EF(this.OF.shru(i).or(this.LF.shl(64-i)),this.LF.shr(i),this.MF()):t.EF(this.LF.shr(i-64),this.LF.isNegative()?vo.NEG_ONE:vo.ZERO,this.MF())}KF(e){const i=127&e;return 0===i?this:i<64?t.EF(this.OF.shru(i).or(this.LF.shl(64-i)),this.LF.shru(i),this.MF()):64===i?t.EF(this.LF,vo.ZERO,this.MF()):t.EF(this.LF.shru(i-64),vo.ZERO,this.MF())}SO(e){const i=this.LF.high>>>16,s=65535&this.LF.high,n=this.LF.low>>>16,r=65535&this.LF.low,o=this.OF.high>>>16,h=65535&this.OF.high,a=this.OF.low>>>16,u=65535&this.OF.low,c=e.LF.high>>>16,l=65535&e.LF.high,d=e.LF.low>>>16,f=65535&e.LF.low,_=e.OF.high>>>16,v=65535&e.OF.high,m=e.OF.low>>>16;let g=0,p=0,w=0,y=0,b=0,A=0,S=0,T=0;T+=u+(65535&e.OF.low),S+=T>>>16,T&=65535,S+=a+m,A+=S>>>16,S&=65535,A+=h+v,b+=A>>>16,A&=65535,b+=o+_,y+=b>>>16,b&=65535,y+=r+f,w+=y>>>16,y&=65535,w+=n+d,p+=w>>>16,w&=65535,p+=s+l,g+=p>>>16,p&=65535,g+=i+c,g&=65535;const k=this.MF(),E=vo.fromBits(w<<16|y,g<<16|p,k),x=vo.fromBits(S<<16|T,b<<16|A,k);return t.EF(x,E,k)}SF(t){return this.SO(t.AF())}AF(){return this.ZF().SO(t.jF)}QF(e){if(this.BF()||e.BF())return this.MF()?t.IF:t.CF;if(this.bF())return e.bF()?this.AF().QF(e.AF()):this.AF().QF(e).AF();if(e.bF())return this.QF(e.AF()).AF();if(this.LF.isZero()&&0===this.OF.high&&e.LF.isZero()&&0===e.OF.high)return t.xF(this.OF.multiply(e.OF));const i=vo.fromBits(4294967295,0,!0),s=this.OF.and(i),n=this.OF.shru(32),r=this.LF.and(i),o=this.LF.shru(32),h=e.OF.and(i),a=e.OF.shru(32),u=e.LF.and(i),c=e.LF.shru(32);let l=vo.UZERO,d=vo.UZERO,f=vo.UZERO,_=vo.UZERO;l=l.add(s.mul(h)),d=d.add(l.shru(32)),l=l.and(i),d=d.add(n.mul(h)),f=f.add(d.shru(32)),d=d.and(i),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(i),f=f.add(r.mul(h)),_=_.add(f.shru(32)),f=f.and(i),f=f.add(n.mul(a)),_=_.add(f.shru(32)),f=f.and(i),f=f.add(s.mul(u)),_=_.add(f.shru(32)),f=f.and(i),_=_.add(o.mul(h)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(i);const v=vo.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),m=vo.fromBits(f.getLowBitsUnsigned(),_.getLowBitsUnsigned(),!0);return t.EF(v,m,this.MF())}JF(e){let i,s,n=e;if(n.BF())throw new RangeError("division by zero");if(this.BF())return this.MF()?[t.IF,t.IF]:[t.CF,t.CF];if(this.MF()){if(n.MF()||(n=n.VF()),n.GF(this))return[t.IF,this];if(n.GF(this.KF(1)))return s=t.tV,i=this.SF(n),[s,i];s=t.IF}else{if(this.eF(t.DF)){if(n.eF(t.jF)||n.eF(t.eV))return[t.DF,t.CF];if(n.eF(t.DF))return[t.jF,t.CF];{const e=this.YF(1).iV(n).qF(1);return e.eF(t.CF)?s=n.bF()?t.jF:t.eV:(i=this.SF(n.QF(e)),s=e.SO(i.iV(n))),i=this.SF(n.QF(s)),[s,i]}}if(n.eF(t.DF))return this.MF()?[t.IF,this]:[t.CF,this];if(this.bF())return n.bF()?this.AF().JF(n.AF()):([s,i]=this.AF().JF(n),[s.AF(),i.AF()]);if(n.bF())return[s,i]=this.JF(n.AF()),[s.AF(),i.AF()];s=t.CF}for(i=this;i.HF(n);){let e=_.max(1,_.floor(i.dF()/n.dF()));const r=_.ceil(_.log(e)/_.LN2),o=r<=48?1:2**(r-48);let h=t.RF(e),a=h.QF(n);for(;a.bF()||a.GF(i);)e-=o,h=t.RF(e,this.MF()),a=h.QF(n);h.BF()&&(h=t.jF),s=s.SO(h),i=i.SF(a)}return[s,i]}iV(t){return this.JF(t)[0]}sV(t){return this.JF(t)[1]}toString(e){const i=e||10;if(i<2||i>36)throw new RangeError("radix");if(this.BF())return"0";if(this.bF()){if(this.eF(t.DF)){const e=t.RF(i),s=this.iV(e),n=s.QF(e).SF(this);return s.toString(i)+n.UF().toString(i)}return"-"+this.AF().toString(i)}const s=t.RF(i**6,this.MF());let n=this,r="";for(;;){const t=n.iV(s);let e=(n.SF(t.QF(s)).UF()>>>0).toString(i);if(n=t,n.BF())return e+r;for(;e.length<6;)e="0"+e;r=String(e)+r}}constructor(t,e){this.OF=t,this.LF=e}};Pi.CF=Pi.xF(vo.ZERO),Pi.IF=Pi.xF(vo.UZERO),Pi.jF=Pi.xF(vo.ONE),Pi.tV=Pi.xF(vo.UONE),Pi.eV=Pi.xF(vo.NEG_ONE),Pi.NF=Pi.EF(vo.NEG_ONE,vo.MAX_VALUE,!1),Pi.PF=Pi.EF(vo.MAX_UNSIGNED_VALUE,vo.MAX_UNSIGNED_VALUE,!0),Pi.DF=Pi.EF(vo.ZERO,vo.MIN_VALUE,!1),r();var Dn=class t{get kF(){return!isFinite(this.nV)}get rd(){return this.nV/this._N}static rV(e){return new t(_.ceil(e.nV),e._N)}static oV(e){return new t(_.floor(e.nV),e._N)}static hV(t,e){return t.vF(e)?t:e}static aV(t,e){return t.gF(e)?t:e}SO(e){return this._N>=e._N?new t(this.nV+e.uV(this._N).nV,this._N):new t(this.uV(e._N).nV+e.nV,e._N)}fF(t){return t.wF(this)}vF(t){return t.gF(this)}pF(e){if(this._N>=e._N){const i=_.abs(this.nV-e.uV(this._N).nV),s=this._N;return new t(i,s)}return e.pF(this)}mF(t,e){return this.pF(t).gF(e)}_F(t){return function(t,e){return t._N>=e._N?Wm(t.nV,e.uV(t._N).nV):Wm(t.uV(e._N).nV,e.nV)}(this,t)}eF(t){return 0===this._F(t)}wF(t){return this._F(t)<0}gF(t){return this._F(t)<=0}uV(e){return new t(this.nV*(e/this._N),e)}SF(e){return this._N>=e._N?new t(this.nV-e.uV(this._N).nV,this._N):new t(this.uV(e._N).nV-e.nV,e._N)}cV(e){return new t(this.nV*e,this._N)}constructor(t,e=1){this.nV=t,this._N=e}};Dn.od=new Dn(1/6,1),Dn.CF=new Dn(0),Dn.lV=new Dn(1/0),Dn.dV=1e6;var Q=class t extends qk{static fV(e,i){return void 0===i&&(i=_o),t.RF(e*i,i)}static RF(e,i){return S(e)?t._V:e===1/0?t.vV:e===-1/0?t.mV:new t(vo.fromNumber(e),i)}static xF(e,i){return new t(e,i)}static gV(e){return t.fV(e.rd,_o)}static pV(e){return new t(vo.fromNumber(e.getTime()),1e3)}static hV(t,e){return t.vF(e)?t:e}static aV(t,e){return t.gF(e)?t:e}static wV(e,i,s){return t.hV(i,t.aV(s,e))}bF(){return this.Dx.isNegative()}BF(){return 0!==this._N&&this.Dx.isZero()}kF(){return 0===this._N&&!this.Dx.isZero()}TF(){return 0===this._N&&this.Dx.isZero()}dF(){if(0===this._N)return this.Dx.isZero()?NaN:this.Dx.isNegative()?-1/0:1/0;const t=this.Dx.divide(this._N),e=this.Dx.subtract(t.multiply(this._N));return t.toNumber()+e.toNumber()/this._N}WF(){if(0===this._N)throw new g("Failed to convert timestamp");return this.Dx}yV(){return new Date(0===this._N?NaN:this.uV(1e3).Dx.toNumber())}bV(){return new Dn(0===this._N?this.dF():this.Dx.toNumber(),this._N)}uV(e,i){void 0===i&&(i=et.AV);const s=this._N;if(s===e)return this;if(0===s)return this;const n=vf(s,e),r=function(t,e,i){const[s,n]=t.JF(e);if(n.BF())return s;if(i===et.AV)return n.bF()?s.SF(Pi.jF):s;if(i===et.SV)return n.bF()?s:s.SO(Pi.jF);{const t=n.QF(Pi.RF(2));return t.bF()?t.AF().wF(e)?s:s.SF(Pi.jF):t.wF(e)?s:s.SO(Pi.jF)}}(Pi.xF(this.Dx).QF(Pi.RF(e/n)),Pi.RF(s/n),i);return new t(r.WF(),e)}_F(t){if(this===t)return Rc.sh;if(0===this._N||0===t._N)return Yk(this,t);if(this.BF())return t.BF()?Rc.sh:t.bF()?Rc.Mw:Rc.Lw;if(t.BF())return this.bF()?Rc.Lw:Rc.Mw;const e=_.min(this._N,t._N),i=this.uV(e,et.TV).Dx,s=t.uV(e,et.TV).Dx;return i.compare(s)}AF(){return 0===this._N?function(t){0;return t.TF()?t:t.bF()?Q.vV:Q.mV}(this):new t(this.Dx.negate(),this._N)}SO(e){if(0===this._N||0===e._N)return function(t,e){0;if(t.TF()||e.TF())return Q._V;if(t.kF()&&e.kF())return t.bF()===e.bF()?t:Q._V;return t.kF()?t:e}(this,e);if(this.BF())return e;if(e.BF())return this;const i=_.max(this._N,e._N),s=this.uV(i,et.TV),n=e.uV(i,et.TV);return new t(s.Dx.add(n.Dx),i)}QF(e){if(this.TF()||S(e))return t._V;if(this.kF()||!isFinite(e)){if(this.BF()||0===e)return t._V;{const i=this.bF()?t.mV:t.vV;return e<0?i.AF():i}}return this.BF()?this:new t(0===e?vo.ZERO:this.Dx.multiply(e),this._N)}iV(e){if(this.TF()||S(e))return t._V;if(this.kF())return isFinite(e)?0===e?1/e<0?this.AF():this:e<0?this.AF():this:t._V;if(!isFinite(e))return new t(vo.ZERO,this._N);if(this.BF())return 0===e?t._V:new t(vo.ZERO,this._N);if(0===e){const i=this.bF()?t.mV:t.vV;return 1/e<0?i.AF():i}return new t(this.Dx.divide(e),this._N)}kV(){return[this.Dx.low,this.Dx.high,this._N]}constructor(t,e){super(),this.Dx=t.toSigned(),this._N=e>>>0}};Q.CF=new Q(vo.ZERO,_o),Q._V=new Q(vo.ZERO,0),Q.vV=new Q(vo.ONE,0),Q.mV=new Q(vo.NEG_ONE,0),r();var $k=class t extends qk{static fV(e,i){return void 0===i&&(i=_o),t.RF(e*i,i)}static RF(e,i){return S(e)?t._V:e===1/0?t.vV:e===-1/0?t.mV:new t(BigInt(_.floor(e)),i)}static xF(e,i){return new t(BigInt(e.high)<<BigInt(32)|BigInt(e.low>>>0),i)}static gV(e){return t.fV(e.rd,_o)}static pV(e){return t.RF(e.getTime(),1e3)}static get CF(){return t.EV||(t.EV=new t(BigInt(0),_o)),t.EV}static get _V(){return t.xV||(t.xV=new t(BigInt(0),0)),t.xV}static get vV(){return t.RV||(t.RV=new t(BigInt(1),0)),t.RV}static get mV(){return t.CV||(t.CV=new t(BigInt(-1),0)),t.CV}static hV(t,e){return t.vF(e)?t:e}static aV(t,e){return t.gF(e)?t:e}static wV(e,i,s){return t.hV(i,t.aV(s,e))}bF(){return this.Dx<BigInt(0)}BF(){return 0!==this._N&&this.Dx===BigInt(0)}kF(){return 0===this._N&&this.Dx!==BigInt(0)}TF(){return 0===this._N&&this.Dx===BigInt(0)}dF(){if(0===this._N)return this.Dx===BigInt(0)?NaN:this.Dx<BigInt(0)?-1/0:1/0;const t=this.Dx/BigInt(this._N),e=this.Dx-t*BigInt(this._N);return Number(t)+Number(e)/this._N}WF(){if(0===this._N)throw new g("Failed to convert timestamp");return this.PV()}PV(){const t=this.Dx&BigInt(4294967295),e=this.Dx>>BigInt(32)&BigInt(4294967295);return vo.fromBits(Number(t),Number(e))}yV(){return new Date(0===this._N?NaN:Number(this.uV(1e3).Dx))}bV(){return new Dn(0===this._N?this.dF():Number(this.Dx),this._N)}uV(e,i){void 0===i&&(i=et.AV);const s=this._N;if(s===e)return this;if(0===s)return this;const n=vf(s,e),r=function(t,e,i){const s=t/e,n=t-s*e;if(n===BigInt(0))return s;if(i===et.AV)return n<BigInt(0)?s-BigInt(1):s;if(i===et.SV)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<e?s:s-BigInt(1):t<e?s:s+BigInt(1)}}(this.Dx*BigInt(e/n),BigInt(s/n),i);return new t(r,e)}_F(t){if(this===t)return Rc.sh;if(0===this._N||0===t._N)return Yk(this,t);if(this.BF())return t.BF()?Rc.sh:t.bF()?Rc.Mw:Rc.Lw;if(t.BF())return this.bF()?Rc.Lw:Rc.Mw;const e=_.min(this._N,t._N),i=this.uV(e,et.TV).Dx,s=t.uV(e,et.TV).Dx;return i>s?Rc.Mw:i<s?Rc.Lw:Rc.sh}AF(){return 0===this._N?function(t){0;return t.TF()?t:t.bF()?$k.vV:$k.mV}(this):new t(-this.Dx,this._N)}SO(e){if(0===this._N||0===e._N)return function(t,e){0;if(t.TF()||e.TF())return $k._V;if(t.kF()&&e.kF())return t.bF()===e.bF()?t:$k._V;return t.kF()?t:e}(this,e);if(this.BF())return e;if(e.BF())return this;const i=_.max(this._N,e._N),s=this.uV(i,et.TV),n=e.uV(i,et.TV);return new t(s.Dx+n.Dx,i)}QF(e){if(this.TF()||S(e))return t._V;if(this.kF()||!isFinite(e)){if(this.BF()||0===e)return t._V;{const i=this.bF()?t.mV:t.vV;return e<0?i.AF():i}}return this.BF()?this:new t(0===e?BigInt(0):this.Dx*BigInt(e),this._N)}iV(e){if(this.TF()||S(e))return t._V;if(this.kF())return isFinite(e)?0===e?1/e<0?this.AF():this:e<0?this.AF():this:t._V;if(!isFinite(e))return new t(BigInt(0),this._N);if(this.BF())return 0===e?t._V:new t(BigInt(0),this._N);if(0===e){const i=this.bF()?t.mV:t.vV;return 1/e<0?i.AF():i}return new t(this.Dx/BigInt(e),this._N)}kV(){const t=this.PV();return[t.low,t.high,this._N]}constructor(t,e){super(),this.Dx=BigInt.asIntN(64,t),this._N=e>>>0}};$k.EV=void 0,$k.xV=void 0,$k.RV=void 0,$k.CV=void 0;var et=function(t){return t[t.AV=0]="AV",t[t.SV=1]="SV",t[t.TV=2]="TV",t}({}),Oo=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?$k:Q;function tE(t,e){return t._F(e)}function eE(t,e){return void 0!==t?void 0!==e?Oo.aV(t,e):t:e}r();var iE=9e4,sE=yl((()=>Oo.RF(8589934592,iE))),nE=yl((()=>sE().iV(2)));r();var rE={DV:0,NV:1/0,MV:0},oE=6,hE=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],aE=[" ","\t","\n","\f","\r"],uE=/^\d*$/,cE=/.*[0-9]+.*/,lE=/^[\d.-]+$/,dE=/(^\.|\.$)/,fE=/(\D\.|\.\D)/;function _E(t,e,i){void 0===e&&(e=rE),void 0===i&&(i=!0);return vE($g(ra(t),new Ri),e,i)}function vE(t,e,i){void 0===e&&(e=rE),void 0===i&&(i=!0);const s={L:[],LV:[],BV:[]},n=mE(t),r=new Ri;if(xE(n),gl(n,(t=>"\n"!==t),r),r.ec>=n.length)return s;if(r.kb(1),"\n"!==n.charAt(r.ec)){bE(gE(n,r,false,!0,s,e,i),s)}else r.kb(1);for(gl(n,(t=>"\n"===t),r);r.ec<n.length;){bE(gE(n,r,false,!1,s,e,i),s),gl(n,(t=>"\n"===t),r)}return s}function mE(t){const e=Sm(t,"\0"," "),i=Sm(e,"\r\n","\n");return Sm(i,"\r","\n")}function gl(t,e,i){const s=i.ec;for(;i.ec<t.length&&e(t.charAt(i.ec));)i.kb(1);return t.substring(s,i.ec)}function gE(t,e,i,s,n,r,o){let h,a=0,u=e.ec,c="",l=!1,d=!1,f=null,_=null,v=null;for(;!l;)if(h=gl(t,(t=>"\n"!==t),e),a++,e.ec>=t.length?l=!0:e.kb(1),Oh(h,"--\x3e")){if(s||1!==a&&(2!==a||d)){e.Eb(u);break}d=!0,u=e.ec,f=new Oi(0,0,"",!1,c);try{AE(h,n.LV,f,r,o),c=""}catch(t){Ms.Op(t),f=null}}else{if(""===h)break;s&&Sl(h,"X-TIMESTAMP-MAP")&&(n.OV=pE(h)),s||2!==a||i||(lh("STYLE",c.replace(/ /g,""))?(_={Aw:Ik.LO},c=""):lh("REGION",c.replace(/ /g,""))&&(v=new zk("",100,3,0,100,0,100,""),c="")),c&&(c+="\n"),c+=h,u=e.ec}if(f)return f.U=c,f;if(_);else if(v)return function(t,e){const i=t.split(/\s/),s=":";for(const t of i)if(0!==t.length&&Oh(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const i=t.indexOf(s),n=t.substring(0,i),r=t.substring(i+1,t.length);switch(n.toUpperCase()){case"ID":VE(r,e);break;case"WIDTH":GE(r,e);break;case"LINES":UE(r,e);break;case"REGIONANCHOR":{const t=FE(r);t&&(e.oF=t[0],e.hF=t[1]);break}case"VIEWPORTANCHOR":{const t=FE(r);t&&(e.uF=t[0],e.cF=t[1]);break}case"SCROLL":WE(r,e)}}}(c,v),v;return null}function pE(t){const e=t.split("=")[1].trim().split(","),i=yE(e[0].trim(),"MPEGTS")?e[0]:e[1],s=yE(e[0].trim(),"LOCAL")?e[0]:e[1];var n;return{FV:wE(Number(i.split(/:(.*)/)[1].trim())||0),ph:Oo.fV(null!=(n=kE(s.split(/:(.*)/)[1].trim(),new Ri))?n:0)}}function wE(t){return Oo.RF(t,iE)}function yE(t,e){return Sl(t,e)}function bE(t,e){t&&function(t){return"cue"===t.Aw}(t)?e.L.push(t):t&&function(t){return"region"===t.Aw}(t)?e.LV.push(t):t&&function(t){return"stylesheet"===t.Aw}(t)&&e.BV.push(t)}function AE(t,e,i,s,n){const r=new Ri;IE(t,r);const o=SE(kE(t,r),s,n);if(IE(t,r),"--\x3e"!==t.substring(r.ec,r.ec+3))throw g("Something went wrong with parsing a WebVTT Cue");r.kb(3),IE(t,r);const h=SE(kE(t,r),s,n);i.sF(o,h);!function(t,e,i){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&Oh(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),o=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":ME(o,e,i);break;case"VERTICAL":BE(o,e);break;case"D":OE(o,e);break;case"LINE":case"L":DE(o,e);break;case"POSITION":case"T":NE(o,e);break;case"SIZE":case"S":LE(o,e);break;case"ALIGN":case"A":PE(o,e)}}}(t.substring(r.ec,t.length),i,e)}function SE(t,e,i){return i?t+e.DV:t}function TE(t){return/^[0-9]$/.test(t)}function kE(t,e){const i=Sm(t,",",".");let s,n,r,o=!1;if(e.ec>=i.length||!TE(i.charAt(e.ec)))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const h=gl(i,TE,e),a=x(h,10);if((h.length>2||a>59)&&(o=!0),e.ec>=i.length||":"!==i.charAt(e.ec))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");e.kb(1);const u=gl(i,TE,e);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const c=x(u,10);if(o||e.ec<i.length&&":"===i.charAt(e.ec)){if(e.ec>=i.length||":"!==i.charAt(e.ec))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");e.kb(1);const t=gl(i,TE,e);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=x(t,10)}else s=0,n=a,r=c;if(e.ec>=i.length||"."!==i.charAt(e.ec))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");e.kb(1);const l=gl(i,TE,e),d=x(l,10);if(c>59||r>59)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function EE(t){return xE(mE(t))}function xE(t){if(t.length<oE)return!1;for(const e of hE)if(Sl(t,e))return!0;return!1}function RE(t){return ms(aE,t)}function IE(t,e){for(;e.ec<t.length&&RE(t.charAt(e.ec));)e.kb(1)}function CE(t){const e=t.lastIndexOf("%");if(e>-1){const i=C(t.substring(0,e));if(!S(i)&&i>=0&&i<=100)return i}return null}function PE(t,e){const i=t.toLowerCase();switch(i){case"start":case"center":case"end":case"left":case"right":e.WO=i;break;case"middle":e.WO="center"}}function DE(t,e){let i,s;const n=t.indexOf(",");if(n>=0?(i=t.substring(0,n),s=t.substring(n+1,t.length)):(i=t,s=""),!cE.test(i))return;let r,o;if(Tm(i,"%")){const t=CE(i);if(null===t)return;r=t,o=!1}else{if(!lE.test(i)||i.lastIndexOf("-")>0)return;const t=i.indexOf(".");if(t>=0&&(t!==i.lastIndexOf(".")||!fE.test(i)||dE.test(i)))return;if(r=C(i),S(r))return;o=!0}switch(e.UO=r,e.XO=o,s=s.toLowerCase(),s){case"start":case"center":case"end":e.GO=s;break;case"middle":e.GO="center"}}function NE(t,e){let i,s;const n=t.indexOf(",");n>=0?(i=t.substring(0,n),s=t.substring(n+1,t.length)):(i=t,s="");const r=CE(i);if(null!==r)switch(e.do=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":e.HO=s;break;case"start":e.HO="line-left";break;case"middle":e.HO="center";break;case"end":e.HO="line-right"}}function ME(t,e,i){const s=Hm(i,(e=>e.o===t));void 0!==s&&(e.ZO=s)}function LE(t,e){const i=CE(t);null!==i&&(e.Pb=i)}function BE(t,e){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":e.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":e.Pt="lr";break;default:e.Pt=""}}function OE(t,e){"VERTICAL"===t.toUpperCase()?e.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(e.Pt="lr")}function FE(t){if(t.indexOf(",")>=0){const e=CE(t.substring(0,t.indexOf(","))),i=CE(t.substring(t.indexOf(",")+1,t.length));return[Vs(e||0,0,100),Vs(i||100,0,100)]}return null}function VE(t,e){e.o=t}function WE(t,e){"up"===t.toLowerCase()&&(e.aF="up")}function UE(t,e){uE.test(t)&&(e.rF=x(t))}function GE(t,e){const i=CE(t);null!==i&&(e.ji=i)}function HE(t){return t&&"Ux"in t?t.Ux:t}r(),r(),r();var ZE=class extends Le{get VV(){return this.WV}get GV(){return this.HV}get LV(){return this.ZV}get XV(){return this.zV}get ka(){return this.su||(this.su=function(t){return nh(Lt(t),{get extent(){return t.VV},get styles(){return t.GV},get regions(){return t.LV},get metadata(){return HE(t.XV)},get content(){return HE(t.U)}})}(this)),this.su}iF(t){return!!Ai(this.VV,t.VV)&&(!!Ai(this.GV,t.GV)&&(!!Ai(this.LV,t.LV)&&(this.XV&&t.XV?!!this.XV.Nx(t.XV)&&(this.U&&t.U?this.U.Nx(t.U):this.U===t.U):this.XV===t.XV)))}constructor(t,e,i,s,n,r,o,h){super(t,e,i,s),this.WV=n,this.HV=r,this.ZV=o,this.zV=h||void 0}};r();var XE=class{get qV(){return this.Df.Mx(!0)}get FO(){return this.YV}get VO(){return this.KV}constructor(t,e,i){this.YV=t,this.KV=e,Uh(i)?this.Df=function(t,e,i){for(const t of["begin","end","dur"])i.qx(t);return i}(0,0,i):this.Df=i}};r();var zE="http://www.w3.org/XML/1998/namespace";function qE(t,e,i,s){let n=t.Wx(i,e);return 0===n.length&&(n=t.Fx(s+":"+e)),n}function YE(t){const e={};for(const i of t.Hx)e[i.Rx]=i.Dx;return e}var KE=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,jE=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,QE="http://www.w3.org/ns/ttml";function JE(t,e,i,s){void 0===i&&(i=rE),void 0===s&&(s=uu.APPLICATION_TTML_XML);let n=[];const r=ra(t);return s===uu.APPLICATION_MP4?n=function(t,e,i){const s=rr.jD(t),n=dn(s,Tt.lD);if(!n)return[];return ex(ra(n.qk),e,i)}(r,e,i):s===uu.APPLICATION_TTML_XML&&(n=ex(r,e,i)),n}function $E(t,e,i){return void 0===i&&(i=rE),ix(t,e,i)}function tx(t,e){const i=ux(e.qV),s={};for(const e of i)s[e]=t[e];return s}function ex(t,e,i){return ix($g(t,new Ri),e,i)}function ix(t,e,i){const s=[];let n;try{n=Ms.xx(t)}catch(t){return s}const r=n.Qx;if("tt"!==r.Rx)return s;const o=r.Wx(QE,"head")[0],h=r.Wx(QE,"body")[0];if(!h||!o)return s;const a=nx(r.Xx("tts:extent")),u=a?{width:a[0],height:a[1]}:void 0,c=function(t){const e={},i=t.Wx(QE,"styling")[0],s=i&&i.Wx(QE,"style")||[];for(const t of s){e[t.zx(zE,"id")]=YE(t)}return e}(o),l=function(t){const e={},i=t.Wx(QE,"layout")[0],s=i&&i.Wx(QE,"region")||[];for(const t of s){const i=t.zx(zE,"id");if(!i)continue;e[i]=YE(t);const s=ax(t);for(const t in s)Fa.call(s,t)&&(e[i][t]=s[t])}return e}(o),d=a?function(t,e){const i=nu(t);for(const t of w.keys(i)){const s=nx(i[t].extent);if(s){const n=sx(s[0],e[0]),r=sx(s[1],e[1]);i[t].extent=n+" "+r}const n=nx(i[t].origin);if(n){const s=sx(n[0],e[0]),r=sx(n[1],e[1]);i[t].origin=s+" "+r}}return i}(l,a):l,f=o.Wx(QE,"metadata")[0],_=rx(h,i.DV,i.NV,i.MV);for(const t of _){const e=tx(d,t);s.push(new ZE(t.FO,t.VO,t.qV,!1,u,c,e,f))}return s}function sx(t,e){return t/e*100+"%"}function nx(t){if(!t)return;const e=t.split(" ",2);if(2!==e.length)return;const[i,s]=e;if(!Tm(i,"px")||!Tm(s,"px"))return;return[Number(i.slice(0,-2)),Number(s.slice(0,-2))]}function rx(t,e,i,s){let n,r=e,o=i,h=[];const a=[];if(Uh(t)){var u,c;r=null!=(u=hx(t.Xx("begin"),s))?u:r,n=hx(t.Xx("dur"),0),o=null!=(c=hx(t.Xx("end"),s))?c:void 0!==n?r+n:o;const e=t.Lx;for(let i=0;i<e.length;i++)("body"===t.Rx||"div"===t.Rx)&&e[i].Ex>1||(h=h.concat(rx(e[i],r,o,s)))}const l=function(t,e,i){const s=[];s.push(t,e);for(const t of i)s.push(t.FO,t.VO);s.sort(eu);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(ka(s,t+1),t--,n=s.length);return s}(r,o,h);for(let e=0;e<l.length-1;e++){const i=ox(l[e],l[e+1],h);if(i.length<=0&&cx(t)){const i=t.Mx(!1);a.push(new XE(l[e],l[e+1],i))}else if(i.length>0){const s=t.Mx(!1);i.forEach((t=>s.Gx(t.qV))),a.push(new XE(l[e],l[e+1],s))}}return a}function ox(t,e,i){const s=[];for(let n=0;n<i.length;n++){const r=i[n].FO,o=i[n].VO;(r>=t&&o<=e||r<e&&o>=e||r<t&&o>t)&&s.push(i[n])}return s}function hx(t,e){if(t){if(KE.test(t)){const i=KE.exec(t);if(!i)return;const s=Number(i[1])||0,n=Number(i[2])||0,r=Number(i[3])||0,o=i[6];return 3600*s+60*n+r+(o?Number(o)*.1**o.length:0)+e}if(jE.test(t)){const i=jE.exec(t);if(!i)return;const s=Number(i[1]);let n;switch(i[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+e}}}function ax(t){const e={},i=t.Fx("style")||[];for(const t of i){const i=YE(t);for(const t in i)Fa.call(i,t)&&(e[t]=i[t])}return e}function ux(t){let e,i=[];if(Uh(t)){e=t.Xx("region"),e&&i.push(e);const s=t.Lx;for(let t=0;t<s.length;t++)i=i.concat(ux(s[t]))}return i}function cx(t){if(Uh(t)){const e=t.Rx.toUpperCase(),i=Boolean(t.Xx("smpte:backgroundImage"));return"BR"===e||i}return t.Ex===qa.Ak}function lx(t){const e=function(t){try{return Ms.xx(t).Qx}catch(t){}}(t);return"tt"===(null==e?void 0:e.Rx)}r(),r();var ua=class extends to{tt(t){return super.tt(t)}it(t){const e=super.it(t);return e&&(t.xE=bh.Th),e}ba(){return uS(this)}};r(),r();var hs=function(t){return t.jV="subtitles",t.QV="captions",t.JV="descriptions",t.Xn="chapters",t.$V="metadata",t.tW="thumbnails",t}({}),dx=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function fx(t){return"string"==typeof t&&ms(dx,t)}function _x(t,e){return!(!fx(t)||!fx(e))&&(t===e||"subtitles"===t&&"captions"===e||"captions"===t&&"subtitles"===e)}r();var vx=class extends A{constructor(t,e,i,s,n){super(t,e,n),this.url=i,this.status=s}};function mx(t){return t===hs.jV||t===hs.QV}function gx(t){return t.some(px)}function px(t){return Oh(t,"stpp")}function wx(t){return t.some(yx)}function yx(t){return Oh(t,"vtt")||Oh(t,"wvtt")}function bx(t,e){return Gh(t)&&wx(e)}function Ax(t,e){return t===hs.tW||t===hs.$V&&e===hs.tW}function Sx(t,e,i,s){for(const n of t.L.uC){if(n.FO>i)break;e<=n.VO&&!ms(s,n)&&s.push(n)}}function Tx(t,e){return Fm(t.xC,e.xC)}function kx(t,e,i,s){const n=function(t){switch(t){case Lr.WEBVTT:return"WebVTT";case Lr.SRT:return"SRT";case Lr.TTML:return"TTML";default:return""}}(t);return new vx(Qa.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",e,i,s)}function oo(t,e){const i=[];for(const s of t.L.uC)if(s.VO<=e)i.push(s);else if(s.FO>=e)break;for(const e of i)t.eW(e)}function Ex(t,e){if(t.V>0){const i=t.Cn(0),s=_.max(0,i-10);for(const t of e)t.iW(s)}}var xx=class extends Co{tt(t){t.yn(No.la,this.sW),this.Z.tt(t),this.nW(t)}it(t){t.fn(No.la,this.sW),t.xE=bh.Th,this.Z.it(t)}rW(t){}oW(t){}nW(t){t.xE!==bh.Th?this.rW(t):this.oW(t)}hW(){for(const t of this.Z.uC)t.fn(No.la,this.sW),t.gn()}iW(t){if(t>0)for(const e of this.Z.uC)oo(e,t)}er(){return this.hW(),this.Z.er(),Promise.resolve()}async gn(){this.$o(),await this.er(),this.Z.gn()}constructor(...t){super(...t),this.Z=new ua,this.sW=t=>{const e=t.Ht;this.nW(e)}}};r();var Rx=class extends Ds{get error(){return this.errorObject.message}ba(){return this}constructor(t){super(yo.da),this.errorObject=t}},Ix=class extends xx{aW(t){if(!t.src)return;const e=t.kind||hs.jV,i=this.uW.LI(e,t.id,t.label,t.srclang,t.default);return i.OC=Ki(t.src),this.tt(i),i}async cW(t,e){t.sI=ic.LOADING;const i=new ke({Gu:t.OC,Yk:Rr.Ak,yE:xe.GET,Vw:e});let s,n;try{const t=await this.lW.Kk(i);n=t.zk,s=await t.Rk()}catch(e){return th(e),t.sI=ic.ERROR,void t.wo(new Rx(function(t,e){let i=e,s=0;if(eo(t)&&t.name===Sc.WE)i=t.Kk.Gu;else if(dA(t)){const e=t.ZE;if(i=e.$k,s=e.zk,0===s)return new vx(Qa.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",i,s,t)}return new vx(Qa.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",i,s,t)}(e,t.OC)))}try{const e=function(t){return EE(t)?Lr.WEBVTT:lx(t)?Lr.TTML:Lr.SRT}(s);t.Aw=e;let i=[];if(e===Lr.WEBVTT||e===Lr.SRT){i=vE(s).L}else e===Lr.TTML&&(i=$E(s,t));for(const e of i)t.dW(e)}catch(e){return th(e),t.sI=ic.ERROR,void t.wo(new Rx(kx(t.Aw,t.OC,n,e)))}t.sI=ic.LOADED}rW(t){ms(this.Z.uC,t)&&t.sI===ic.NONE&&this.cW(t,this.fW.Vw).catch(Eu)}Dn(){}async er(){this.fW.Yw(),this.fW=new da;for(const t of this.Z.uC)this.uW._W(t);await super.er()}constructor(t,e){super(),this.fW=new da,this.uW=t,this.lW=e}};function Cx(t,e){for(const i of t)if(i.Lt===e&&i.vW)return i}function Px(t,e){Dx(Cx(t.uC,e))}function Dx(t){void 0!==t&&(t.xE=bh.Jn)}function Nx(t,e){const i=Cx(t.uC,e)||function(t,e){for(const i of t)if(i.Lt===e)return i}(t.uC,e);Dx(i)}function Mx(t){for(const e of dx)e===hs.Xn?Nx(t,e):Px(t,e)}r(),r();var P=class extends pe{constructor(){super(Ti.Yy)}};r(),r();var Mr=function(t){return t[t.mW=0]="mW",t[t.gW=1]="gW",t}({});r(),r();var tu=class extends pe{constructor(t){super(tl.FL),this.currentTime=t}};r();var Wi=class extends pe{constructor(t){super(tl.VL),this.currentTime=t}},Lx=[tl.tC,tl.VL,Ti.ro,Ti.Zy],q=class extends Co{pW(t){!this.wW&&t>=Ht.Gn&&(this.wW=!0,this.wo(new KT(this.yW.SR,t)))}bW(t){!this.AW&&t>=Ht.tO&&(this.AW=!0,this.wo(new jT(this.yW.SR,t)))}TW(t){this.kW||(t>=Ht.eO&&this.EW<Ht.eO&&!this.yW.qR||this.xW&&t>=Ht.eO)&&this.wo(new Wi(this.yW.SR))}RW(t){!this.IW(t)||this.yW.RR||this.yW.lt||this.wo(new tu(this.yW.SR))}PW(t){this.EW<=Ht.tO&&t>=Ht.eO&&this.wo(new ho(this.yW.SR,t))}maybeDispatchCanPlayThroughEvent(t){t===Ht.iO&&this.wo(new QT(this.yW.SR,t))}IW(t){const e=!this.yW.qR&&t<=Ht.tO,i=!this.DW&&this.EW<=Ht.tO;return e&&!i}get xW(){return!this.yW.qR&&this.DW}er(){this.EW=Ht.$B,this.DW=!0,this.AW=!1,this.wW=!1}gn(){this.$o(),this.kW&&this.yW.fn(tl.VL,this.NW),this.yW.fn(Ti.ro,this.MW),this.yW.fn(Ti.Zy,this.LW),this.yW.fn(tl.tC,this.BW)}constructor(t,e=!1){super(),this.yW=t,this.kW=e,this.EW=Ht.$B,this.DW=!0,this.AW=!1,this.wW=!1,this.BW=t=>{const e=this.yW.sI;e!==this.EW&&this.wo(new au(t.currentTime,e)),e===Ht.$B&&(this.AW=!1,this.wW=!1),this.pW(e),this.bW(e),this.PW(e),this.maybeDispatchCanPlayThroughEvent(e),this.TW(e),this.RW(e),this.EW=e},this.MW=()=>{this.RW(this.EW),this.TW(this.EW),this.DW=this.yW.qR},this.LW=()=>{this.DW=this.yW.qR},this.NW=t=>{this.wo(new Wi(t.currentTime))},this.yW.yn(tl.tC,this.BW),this.yW.yn(Ti.ro,this.MW),this.yW.yn(Ti.Zy,this.LW),this.kW&&this.yW.yn(tl.VL,this.NW)}},Bx=class extends Co{get SR(){return this.yW.SR}get RR(){return this.yW.RR}get lt(){return this.yW.lt}get qR(){return this.yW.qR}get sI(){return this.yW.sI}Hw(){this.$o(),this.yW.fn(Lx,this.Ds)}constructor(t){super(),this.yW=t,this.yW.yn(Lx,this.Ds)}};r(),r(),r(),r();var Jo=class{OW(){return this.FW}VW(t){this.FW=t}get lR(){return this.lW}get WW(){return!1}get UW(){const t=this.GW.certificate;if(t)return Yt(t)?mg(t):ma(t)}ZW(){return this.GW.licenseAcquisitionURL||this.OW()}get XW(){return!1}zW(t){return Promise.resolve()}qW(t,e){return Promise.resolve(void 0)}get kE(){return Boolean(this.GW.useCredentials)}async YW(t,e,i,s){const n=this.KW(t,e,i,s);if(""===n.Gu)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.lR.Kk(n);return await t.Ik(e)}catch(t){return th(t),void await this.jW(t,n.Gu,s)}}KW(t,e,i,s){const n=this.QW().Sk(),r=this.kE,o={Gu:this.JW(),Yk:e,jk:n,Nk:t,kE:r,yE:xe.POST,bE:0,Vw:s,Aw:Wr.nE,SE:i};return new ke(o)}$W(t,e){return Promise.resolve(t)}tU(t,e,i,s){return Promise.resolve(t)}QW(){return new na(this.GW.headers||{})}async jW(t,e,i){throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}JW(t,e){let i=e;const s=this.GW.queryParameters;if(!i){const t=this.ZW();if(!t)return"";i=t}if(s||t){const e=Ms.Nh(i);t&&qb(e,t),s&&qb(e,s),i=e.href}return i}eU(t,e){return Ox(t)}iU(t){return new j(t)}async sU(t,e,i){const s=await this.eU(t,i),n=await this.YW(s,this.nU,e,i);return this.iU(n)}gn(){}constructor(t,e,i,s,n){this.FW=void 0,this.aT=t,this.rU=e,this.oU=i,this.lW=s,this.nU=n,this.GW=this.hU(e)}};function Ox(t){return Promise.resolve(kc(t).buffer)}var Fx=class extends Jo{hU(t){return t.widevine||{}}async aU(t,e){return this.UW?this.UW:this.uU(new j(t),e)}uU(t,e){return super.sU(t,$h.aE,e)}constructor(t,e,i,s){super(rn,t,e,i,s)}};r();var Vx=function(t){return t.gw="Widevine",t.cU="PlayreadyV2",t.lU="PlayreadyV3",t.mw="PlayreadyV2",t.ww="Fairplay",t}({}),Wx={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function Ux(t,e){var i,s,n,r;const o=Wx[e],h=t.accountName;return{CustomerName:t.customerName,AccountName:h,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(i=Ms.jp)?void 0:i.Ys,OSVersion:null==(s=Ms.jp)?void 0:s.uw,DRMProvider:o.DRMProvider,DRMVersion:o.DRMVersion,DRMType:o.DRMType,DeviceVendor:null==(n=Ms.jp)?void 0:n.cw,DeviceModel:null==(r=Ms.jp)?void 0:r.lw}}}function Gx(t,e){if(!t.accountName)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, accountName is not set.");if(!t.customerName)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, customerName is not set.");if(!t.portalId)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, portalId is not set.");throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration.")}function Hx(t,e,i){let s;if(sT(t))s={AuthToken:t.authToken,Payload:e};else{if(!nT(t))throw Gx(t,i);s={LatensRegistration:Ux(t,i),Payload:e}}return pr(JSON.stringify(s))}async function Zx(t,e,i){const s=t.ZE;if(!s)throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,e);const n=s;let r,o;try{r=await n.xk(i),o=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){o=""}throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.Kk.Gu,n.zk,n.Qk,o)}r();var Xx=class extends Fx{static dU(){return Ms.Ys.ep?"required":"optional"}jW(t,e,i){return Zx(t,e,i)}zW(t){return this.fU?ou(this.fU.Vb,t):(this.fU=new os,Promise.resolve())}async eU(t,e){const i=this.rU;if(!i)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return Hx(i,Vr(t),Vx.gw)}iU(t){let e;if(!t.license)throw new sr(Qa.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return e=mg(t.license),e}_U(t){return Promise.resolve(new j(t))}async aU(t,e){this.vU();const i=await this.eU(t,e),s=await this.YW(i,Rr.wk,$h.uE,e);return await this._U(s)}async uU(t,e){const i=await super.uU(t,e);return this.vU(),i}vU(){this.fU||(this.fU=new os),this.fU.Ob()}gn(){this.fU&&this.fU.Yw(),super.gn()}constructor(t,e,i){super(t,e,i,Rr.yk),this.fU=void 0}};r();var zx=class extends Fx{get mU(){if(rT(this.rU))return this.rU.token}async eU(t,e){const i=await Ox(t),s=this.oU,n=ep(new j(i)),r=this.mU;if(void 0===r)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,e,i){super(t,e,i,Rr.wk),this.VW("https://widevine-proxy.drm.technology/proxy")}};function qx(t,e){let i=e||{};return t.ticket&&t.sessionId&&(i=Bo({},i,{SessionId:t.sessionId,Ticket:t.ticket})),Bo({},i,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}r(),r();var Yx=class extends Fx{JW(t,e){let i=t;return tT(this.rU)&&(i=qx(this.rU,i)),super.JW(i,e)}constructor(t,e,i){super(t,e,i,Rr.wk),this.VW("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}};r(),r();var Kx="Conax-Custom-Data";function jx(t,e,i){const s=t&&$S(t)&&t;if(s&&!i.has(Kx)){const t=OS(s)?s.token:void 0,n=OS(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:e+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});i.set(Kx,r)}return i}var Qx=class extends Fx{QW(){const t=super.QW();return jx(this.rU,"Widevine",t)}constructor(t,e,i){super(t,e,i,Rr.wk),this.VW("https://connect.conax.com:8094/license")}};function Jx(t){const e=uh(new j(t));return mg(JSON.parse(e).license)}function $x(t){return"string"==typeof t.token?t.token:pr(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function tR(t,e,i){let s;return s=i.token?"x-dt-auth-token":"dt-custom-data",t.set(s,e),t}r(),r();var eR=class extends Fx{get mU(){return $x(this.rU)}iU(t){return Jx(t)}QW(){return tR(super.QW(),this.mU,this.rU)}constructor(t,e,i){super(t,e,i,Rr.wk),this.VW("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}};r();var iR=class extends Fx{QW(){const t=super.QW(),e=this.rU.token;return t.set("Authorization","Bearer "+e),t}constructor(t,e,i){super(t,e,i,Rr.wk)}};async function sR(t,e,i,s){if(!oT(t))throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new na;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const o=t.streamId;let h;h=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:e,licenseType:h,streamId:o},u={Gu:t.ticketAcquisitionURL,Yk:Rr.yk,jk:n,yE:xe.POST,Nk:JSON.stringify(a),Vw:s},c=await i.Kk(u);return await c.xk()}r(),r();var nR=class extends Fx{QW(){const t=super.QW();return t.set("Content-Type","application/json"),t}async eU(t,e){const i=up(t.buffer),s=this.rU,n=await sR(s,"widevine_modular",this.lR,e);this.VW(n.licenseServerUrl);const r=yr(JSON.stringify({payload:i,ticket:n.ticket}));return super.eU(r,e)}iU(t){return mg(t.license)}constructor(t,e,i){super(t,e,i,Rr.yk)}};r();var rR=class extends Fx{QW(){if(!hT(this.rU))throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.QW();return t.set("X-AxDRM-Message",this.rU.token),t}constructor(t,e,i){super(t,e,i,Rr.wk)}};function oR(t){const e=new j(2*t.length);for(let i=0;i<t.length;i+=1)e[2*i]=t.charCodeAt(i),e[2*i+1]=0;return e}r();var pu=class extends Jo{hU(t){return t.playready||{}}QW(){const t=new na(this.gU);return t.Ek(super.QW()),t}pU(t){return t.length>=1&&t[0].Lx.length>0}qW(t){const e=this.rU.playready.customData;if(e){const t=oR(e),i=oR('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+Vr(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{TT:i}})}return super.qW(t)}async eU(t,e){const i=await Ox(t);return this.wU(i)}async wU(t){var e,i;let s=null;const n=gr(new DataView(t),new Ri,!0);let r;try{r=Ms.xx(n)}catch(t){return s}const o=null==(e=r.Fx("PlayReadyKeyMessage")[0])?void 0:e.Fx("LicenseAcquisition")[0];var h;const a=null!=(h=null==o?void 0:o.Fx("Challenge"))?h:[];this.pU(a)&&(s=ap(a[0].Zx));const u=new na;var c;const l=null!=(c=null==o||null==(i=o.Fx("HttpHeaders")[0])?void 0:i.Fx("HttpHeader"))?c:[];for(const t of l){const e=t.Fx("name")[0].Zx,i=t.Fx("value")[0].Zx;u.append(e,i)}return this.gU=u,s}aU(t,e){return Promise.resolve(t)}uU(t,e){return super.sU(t,$h.cE,e)}constructor(t,e,i){super(mm,t,e,i,Rr.wk),this.gU=void 0}};r(),r();var hR=class t{static yU(t){return"3"===t.version?Vx.lU:Vx.cU}bU(){const t={};if(this.xS===Vx.lU){const e={LatensRegistration:Ux(this.AU,Vx.lU)};t["X-TITANIUM-DRM-CDATA"]=pr(JSON.stringify(e))}return t}get SU(){return this.xS}get gT(){return this.xS===Vx.cU}constructor(e){this.AU=e,this.xS=t.yU(e)}};var aR=class extends pu{qW(t){const e=this.rU;if(!this.rU)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(nT(e)){const t={};return t.playready={TT:uR(e,this.TU.SU)},Promise.resolve(t)}return Promise.reject(Gx(e,Vx.mw))}QW(){const t=new na(this.TU.bU());return t.Ek(super.QW()),t}async jW(t,e,i){const s=t.ZE;if(!s)throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e);let n,r;try{const t=await s.Ck(i),e=uh(new j(t)),h=Ms.xx(e);if(h){const t=function(t,e){return function(t,e){const i=t.m.slice(),s=[];for(;i.length>0;){const t=i.shift();e(t)?s.push(t):i.push(...t.m)}return s}(t,(t=>t.Vx===e))}(h,"CustomData");var o;if(t.length>0)n=JSON.parse(t[0].Zx),r=null==(o=n.DrmErr)?void 0:o.desc}}catch(t){}throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e,s.zk,s.Qk,r)}pU(t){if(1!==t.length)throw new sr(Qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,e,i){super(t,e,i),this.TU=new hR(this.rU)}};function uR(t,e){const i=Ux(t,e),s=i.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+pr('<LatensRegistration formatversion="'+s+'"><AccountName>'+i.AccountName+"</AccountName><CustomerName>"+i.CustomerName+"</CustomerName><PortalID>"+i.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+i.DeviceInfo.DeviceType+"</DeviceType><OSType>"+i.DeviceInfo.OSType+"</OSType><OSVersion>"+i.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+i.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+i.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+i.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+i.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+i.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=Yg(n,!0);return Yg('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+Vr(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}r();var cR=class extends pu{get mU(){if(rT(this.rU))return this.rU.token}pU(t){if(1!==t.length)throw new sr(Qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}JW(t,e){const i=Bo({},t||{},{token:this.mU});return super.JW(i,e)}constructor(t,e,i){super(t,e,i),this.VW("https://playready-license.drm.technology/rightsmanager.asmx")}};r();var lR=class extends pu{JW(t,e){let i=t;return tT(this.rU)&&(i=qx(this.rU,i)),super.JW(i,e)}constructor(t,e,i){super(t,e,i),this.VW("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}};r();var dR=class extends pu{QW(){const t=super.QW();return jx(this.rU,"PlayReady",t)}constructor(t,e,i){super(t,e,i),this.VW("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}};r();var fR=class extends pu{get mU(){return $x(this.rU)}iU(t){const e=function(t){const e=uh(new j(t));return Sl(e,"<?xml")?0:1}(t);return 1===e?Jx(t):super.iU(new j(t))}QW(){return tR(super.QW(),this.mU,this.rU)}constructor(t,e,i){super(t,e,i),this.VW("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};r();var _R=class extends pu{QW(){const t=super.QW();return this.kU&&t.set("Ticket",this.kU),t.set("Content-Type","text/xml"),t}async eU(t,e){const i=this.rU,s=await sR(i,"playready",this.lR,e);return this.VW(s.licenseServerUrl),this.kU=s.ticket,super.eU(t,e)}constructor(t,e,i){super(t,e,i)}};r();var vR=class extends pu{QW(){if(!hT(this.rU))throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.QW();return t.set("X-AxDRM-Message",this.rU.token),t}};r(),r();var lu=function(t){return t.yk="application/json",t.EU="application/x-www-form-urlencoded",t.xU="application/octet-stream",t.Ak="text/plain;charset=UTF-8",t}({}),ns=class extends Jo{get XW(){return!0}RU(){return this.GW.certificateURL||this.IU}CU(t){this.IU=t}eU(t){return Promise.resolve(this.PU(t,this.DU))}PU(t,e){return"spc="+encodeURIComponent(Vr(t))+"&assetId="+encodeURIComponent(e)}get NU(){return lu.EU}hU(t){return t.fairplay||{}}MU(t){const e=t.indexOf("?");if(e>=0)return Promise.resolve(t.substr(e+1));{const e=t.split("skd://").pop();if(e){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e))return Promise.resolve(e)}const i=t.split("/");return Promise.resolve(i[i.length-1])}}async qW(t){var e;const i=null!=(e=this.LU)?e:Qg(new j(t)),s=await this.MU(i);this.DU=s;const n={};return n.fairplay={MT:s},n}QW(){const t=super.QW();return t.set("Content-Type",this.NU),t}async aU(t,e){return this.UW?this.UW:await this.BU(e)}uU(t,e){return super.sU(t,$h.oE,e)}OU(t){const e=this.RU(),i=this.QW(),s={Gu:e,Yk:Rr.wk,jk:i,yE:xe.GET,kE:!1,Nk:null,bE:0,Vw:t,Aw:Wr.nE,SE:$h.hE};return new ke(s)}async BU(t){const e=this.OU(t),i=await this.lR.Kk(e),s=await i.Ck();return new j(s)}iU(t){let e;if("string"==typeof t){let i=t.trim();"<ckc>"===i.substr(0,5)&&"</ckc>"===i.substr(-6)&&(i=i.slice(5,-6)),e=mg(i)}else e=new j(t);return e}JW(t,e){let i=super.JW(t,e);return Sl(i,"skd:")&&(i=i.substr(4)),i}constructor(t,e,i,s,n){super(t.aT,e,i,s,n),this.DU="",this.IU=void 0,this.LU=t.FU}};r();var mR=class extends ns{get NU(){return lu.xU}MU(t){let e=t.split("://",1);return"skd"!==e[0].slice(-3).toLowerCase()?Promise.resolve(""):(e=t.split(";",2),e.length>1?Promise.resolve(e[1]):Promise.resolve(super.MU(t)))}async eU(t){return t}iU(t){return new j(t)}JW(t,e){const i=t||{};return i.p1=Da(),super.JW(i,e)}constructor(t,e,i,s){super(t,e,i,s,Rr.wk)}};r();var gR=class extends ns{get NU(){return lu.yk}get mU(){if(!rT(this.rU))throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.rU.token}PU(t,e){const i={token:this.mU,contentId:e,payload:Vr(t)};return JSON.stringify(i)}iU(t){return new j(t)}QW(){const t=super.QW();return t.set("x-vudrm-token",this.mU),t}constructor(t,e,i,s){super(t,e,i,s,Rr.wk),this.VW("https://fairplay-license.drm.technology/license"),this.CU("https://fairplay-license.drm.technology/certificate")}};r();var pR="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",wR="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",yR=class extends ns{iU(t){const e=function(t){let e;try{e=JSON.parse(t).ckc}catch(t){throw new sr(Qa.CONTENT_PROTECTION_LICENSE_INVALID,pR)}if(!e)throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,wR);return e}(uh(new DataView(t)));return super.iU(e)}constructor(t,e,i,s){super(t,e,i,s,Rr.wk)}};r();var bR=class extends ns{get NU(){return lu.yk}async eU(t){const e=this.rU;if(!e)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return Hx(e,Vr(t),Vx.ww)}iU(t){try{let e;if(Yt(t)){const i=t.trim();e=JSON.parse(i)}else e=t;if(e.license){const t=ap(e.license);return new j(t)}throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new sr(Qa.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}jW(t,e,i){return Zx(t,e,i)}constructor(t,e,i,s){super(t,e,i,s,Rr.yk)}};r();var AR=class extends ns{RU(){const t=super.RU();if(!t)return t;const e=Ms.Nh(t),i=this.rU;return tT(i)&&qb(e,{accountId:i.accountId,applicationId:i.applicationId||""}),e.href}MU(t){return tT(this.rU)?Promise.resolve(this.rU.contentId):super.MU(t)}async eU(t){return t}iU(t){return new j(t)}get NU(){return lu.xU}JW(t,e){let i=t;return tT(this.rU)&&(i=function(t,e){return Bo({},qx(t,e),{KeyId:t.keyId})}(this.rU,i)),super.JW(i,e)}constructor(t,e,i,s){super(t,e,i,s,Rr.wk),this.VW("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.CU("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}};r();var SR=class extends ns{QW(){const t=super.QW();return jx(this.rU,"FairPlay",t)}async BU(t){const e={Gu:this.RU(),Yk:Rr.wk,jk:{},yE:xe.GET,kE:!1,Nk:null,bE:0,Vw:t,Aw:Wr.nE,SE:$h.hE},i=await this.lR.Kk(e),s=await i.Ck();return new j(s)}async eU(t){return t}MU(t){const e=t.indexOf("?");if(0===t.indexOf("skd://")){let i;return i=e>=0?t.substring(6,e):t.substring(6),Promise.resolve(function(t){return uh(mg(t))}(i))}return Promise.resolve("unknown")}iU(t){try{const e=JSON.parse(t);return new j(ap(e.CkcMessage))}catch(t){throw new g("CFLRW-66")}}constructor(t,e,i,s){if(super(t,e,i,s,Rr.Ak),!$S(e))throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.VW("https://connect.conax.com:8097/license")}};r();var TR=class extends ns{MU(t){return Sl(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new sr(Qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}PU(t,e){return"spc="+Vr(t)+"&assetId="+e}constructor(t,e,i,s){super(t,e,i,s,Rr.Ak),this.VW(qS[ge.ww])}};r();var kR=class extends ns{get mU(){return $x(this.rU)}PU(t,e){const i="spc="+encodeURIComponent(Vr(t))+"&"+encodeURI(e);return"persistent"===this.GW.licenseType?i+"&offline=true":i}QW(){return tR(super.QW(),this.mU,this.rU)}constructor(t,e,i,s){super(t,e,i,s,Rr.Ak),this.VW("https://lic.drmtoday.com/license-server-fairplay/")}};r();var ER=class extends ns{MU(t){let e=t;return Sl(e,"skd:")&&(e="http:"+e.substring(4)),Sl(e,"http:")||Sl(e,"https:")?Promise.resolve(Ms.Nh(e).hostname):Promise.reject(new g("Could not parse ExpressPlay FairPlay content ID."))}async eU(t){return t}iU(t){return new j(t)}get NU(){return lu.xU}constructor(t,e,i,s){super(t,e,i,s,Rr.wk)}};r();var xR=class extends ns{QW(){const t=super.QW(),e=this.rU.token;return t.set("Authorization","Bearer "+e),t}constructor(t,e,i,s){super(t,e,i,s,Rr.Ak)}};r();var RR=class extends ns{async BU(t){const e=this.RU(),i=this.QW(),s={Gu:e,Yk:Rr.yk,jk:i,yE:xe.POST,Vw:t,Aw:Wr.nE,SE:$h.hE},n=await this.lR.Kk(s),r=await n.xk();return new j(mg(r.certificate))}get NU(){return lu.yk}async uU(t,e,i){void 0===i&&(i=Rr.Ak);const s=Vr(t),n=this.rU,r=await sR(n,"fairplay",this.lR,e),o=yr(JSON.stringify({spc:s,ticket:r.ticket})),h={Gu:this.ZW(),Yk:Rr.yk,jk:this.QW(),yE:xe.POST,Nk:o,bE:0,Vw:e,Aw:Wr.nE,SE:$h.oE},a=await this.lR.Kk(h);return mg((await a.xk()).licence)}constructor(t,e,i,s){if(super(t,e,i,s,Rr.yk),!oT(e))throw new g("Invalid Xstream DRM configuration")}};r();var IR=class extends ns{PU(t,e){return Vr(t)}iU(t){if(0===t.length)throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.iU(t)}QW(){const t=super.QW();return t.set("Content-Type","text/plain"),t}constructor(t,e,i,s){super(t,e,i,s,Rr.Ak)}};r();var CR=class extends ns{get NU(){return lu.yk}PU(t,e){return t}iU(t){return new j(t)}QW(){if(!hT(this.rU))throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.QW();return t.set("X-AxDRM-Message",this.rU.token),t}constructor(t,e,i,s){super(t,e,i,s,Rr.wk)}};r();var PR=class extends ns{get NU(){return lu.Ak}PU(t,e){const i={spc:Vr(t)};return JSON.stringify(i)}MU(t){const e=Ms.Nh(t);return this.VU=t,e.searchParams.has("b")?Promise.resolve(e.searchParams.get("b")):Promise.reject(new sr(Qa.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}JW(t,e){let i=this.ZW();return!i&&this.VU&&(i=this.VU),i&&(i=i.replace("skd://","https://")),super.JW(t,e||i)}iU(t){try{let e;if(e=Yt(t)?JSON.parse(t.trim()):t,e.ckc)return mg(e.ckc)}catch(t){throw new sr(Qa.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,e,i,s){super(t,e,i,s,Rr.yk),this.VU=void 0}};r(),r(),r();var DR=class{WU(t){return this.UU(t)}GU(t,e){throw new b(e+" must be "+this.HU+". (Received: "+t+")")}constructor(t,e){this.UU=t,this.HU=e}},Pl=(new DR((function(t){return!0}),"any"),new DR(Sd,"a number")),cl=new DR(Yt,"a string"),NR=new DR(bd,"a boolean"),Bh=(new DR(Ad,"a date"),new DR(wd,"undefined")),MR=new DR(V,"an object"),LR=new DR((function(t){return null===t}),"null");new DR((function(t){return null==t}),"null or undefined");function BR(t,e){throw new b(e+" has an incorrect type")}var OR=class{WU(t){if(!V(t))return!1;for(const e of w.keys(this.Rp)){if(!this.Rp[e].WU(t[e]))return!1}return!0}GU(t,e){if(!V(t))throw new b(e+" must be an object.");for(const i of w.keys(this.Rp)){const s=this.Rp[i];if(!s.WU(t[i]))return s.GU(t[i],e+"."+String(i))}throw new b}constructor(t){this.Rp=t}};function qe(t){return new OR(t)}function FR(t){return w.keys(t).map((e=>t[e]))}var VR=class{WU(t){return ms(this.g_,t)}GU(t,e){return BR(0,e)}constructor(t){this.g_=t}};function WR(t){return new VR(t)}var UR=class{WU(t){return this.ZU.some((e=>e.WU(t)))}GU(t,e){return BR(0,e)}constructor(t){this.ZU=t}};function gn(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new UR(e)}var GR=class{WU(t){return rl(t)&&t.every((t=>this.XU.WU(t)))}GU(t,e){if(!rl(t))throw new b(e+" must be an array.");for(let i=0;i<t.length;i++){const s=t[i];this.XU.WU(s)||this.XU.GU(s,e+"["+i+"]")}return BR(0,e)}constructor(t){this.XU=t}};function rc(t){return new GR(t)}var HR=class{WU(t){return V(t)&&w.keys(t).every((e=>this.XU.WU(t[e])))}GU(t,e){if(!V(t))throw new b(e+" must be an object.");for(const i of w.keys(t))if(!this.XU.WU(t[i]))return this.XU.GU(t[i],e+"."+i);return BR(0,e)}constructor(t){this.XU=t}};function ZR(t){return new HR(t)}var XR=class{WU(t){return this.XU().WU(t)}GU(t,e){return this.XU().GU(t,e)}constructor(t){this.XU=yl(t)}};var zR=qe({responseCode:Pl,isException:NR,description:cl,title:cl,correlationId:cl});async function qR(t,e,i,s,n){const r=function(t,e,i,s){const n={token:e.token,account:e.accountId,form:"json"},r=decodeURIComponent(_c(i,n)),o=new na({});o.append("Content-Type","application/json");const h=Vr(t),a={getFairplayLicense:{releasePid:e.releasePid,spcMessage:h}};return{Gu:r,Yk:Rr.Ak,jk:o,yE:xe.POST,Nk:JSON.stringify(a),Vw:s,Aw:Wr.nE,SE:$h.oE}}(t,e,i,n);return await async function(t,e){const i=await e.Kk(t),s=await i.xk();if(zR.WU(s))throw new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.Gu,s.responseCode);return mg(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var YR=class extends ns{MU(t){const e=t.replace("FairPlay",this.zU.releasePid);return super.MU(e)}async uU(t,e){return await qR(t,this.zU,this.ZW(),this.lR,e)}constructor(t,e,i,s){super(t,e,i,s,Rr.wk),this.zU=e}};r();var KR=class extends Jo{hU(t){return t.clearkey||{}}async YW(t,e,i,s){const n=this.GW;if(this.ZW())return super.YW(t,this.nU,i,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let e=t;return e||(e={}),{kty:"oct",kid:e.id,k:e.value}}))};return Jg(JSON.stringify(t)).buffer}throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}aU(t,e){return Promise.resolve(new j(0))}async uU(t,e){const i=await super.sU(t,$h.lE,e),s=JSON.parse(Qg(i));if(s.keys)for(const t of s.keys)t.k&&(t.k=wg(t.k)),t.kid&&(t.kid=wg(t.kid));return Jg(JSON.stringify(s))}constructor(t,e,i){super(wm,t,e,i,Rr.wk)}};r();var jR=class extends Fx{};r(),r();var QR={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function JR(t,e,i){const s=rI(e),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(e);const r=await ou(Promise.resolve(n.call(t,s)),i);return tp(r)?ma(r):nI(Bo({},QR,r))}async function $R(t,e,i,s,n){const r=t.onCertificateResponse,o=sI(e,i,s);if(!r||"function"!=typeof r)return Promise.resolve(e);return ma(await ou(Promise.resolve(r.call(t,o)),n))}async function tI(t,e,i,s){const n=await async function(t,e,i,s){const n=null==t?void 0:t.onLicenseRequest,r=iI(e,i);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const o=await ou(Promise.resolve(n.call(t,r)),s);if(tp(o))return ma(o).buffer;return Bo({fairplaySkdUrl:void 0},QR,o)}(t,e,i,s);return n instanceof ArrayBuffer?n:nI(n)}async function eI(t,e,i,s,n,r){const o=iI(i,n),h=await async function(t,e,i,s,n){const r=null==t?void 0:t.onLicenseResponse,o=sI(e,i,s);if(!r||"function"!=typeof r)return Promise.resolve(e);0;const h=await ou(Promise.resolve(r.call(t,o)),n);return ma(h)}(t,new j(e),o,s,r);return ma(h)}function iI(t,e){return Bo({},rI(t),{fairplaySkdUrl:e})}function sI(t,e,i){return{url:i.$k,status:i.zk,statusText:i.Qk,headers:i.jk.Sk(),body:t,request:e}}function nI(t){return new ke({Gu:t.url,yE:t.method,jk:t.headers,Nk:t.body,kE:t.useCredentials,Aw:Wr.nE})}function rI(t){var e;return{url:t.Gu,body:null!=(e=oI(t.Nk))?e:null,headers:t.jk.Sk(),method:t.yE,useCredentials:t.kE}}function oI(t){if(t)return"string"==typeof t?Jg(t):t instanceof ArrayBuffer?new j(t):ar(t)?Rh(t):void 0}var hI=class extends pu{aU(t,e){return Promise.resolve(t)}async uU(t,e){const i=await this.wU(kc(t).buffer),s=this.KW(i,Rr.wk,$h.cE,e),n=await tI(this.qU,s,void 0,e);if(n instanceof ArrayBuffer)return new j(n);if(""===n.Gu)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.lR.Kk(n),i=await t.Ck(e);return await eI(this.qU,i,s,t,void 0,e)}catch(t){throw th(t),new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,e,i,s){super(t,e,i),this.qU=s}};r();var aI=class extends jR{async aU(t,e){if(this.UW)return this.UW;const i=this.KW(t,Rr.wk,$h.uE,e),s=await JR(this.qU,i,e);if(s instanceof j)return s;if(""===s.Gu)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.lR.Kk(s),r=await n.Ck(e)}catch(t){throw th(t),new sr(Qa.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const o=iI(i,void 0);return await $R(this.qU,new j(r),o,n,e)}async uU(t,e){const i=this.KW(t,Rr.wk,$h.aE,e),s=await tI(this.qU,i,void 0,e);if(s instanceof ArrayBuffer)return new j(s);if(""===s.Gu)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.lR.Kk(s),n=await t.Ck(e);return await eI(this.qU,n,i,t,void 0,e)}catch(t){throw th(t),new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,e,i,s){super(t,e,i,Rr.wk),this.qU=s}};r();var uI=class extends ns{async aU(t,e){if(this.UW)return this.UW;const i=this.OU(e),s=await JR(this.qU,i,e);if(ar(s))return s;try{const t=await this.lR.Kk(s),n=await t.Ck(),r=iI(i,void 0);return await $R(this.qU,new j(n),r,t,e)}catch(t){throw th(t),new sr(Qa.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async uU(t,e){const i=this.KW(t,Rr.wk,$h.oE,e),s=await tI(this.qU,i,this.YU,e);if(s instanceof ArrayBuffer)return new j(s);if(""===s.Gu)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.lR.Kk(s),n=await t.Ck(e);return await eI(this.qU,n,i,t,this.YU,e)}catch(t){throw th(t),new sr(Qa.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}MU(t){var e;return this.YU=t,(null==(e=this.qU)?void 0:e.extractFairplayContentId)?Promise.resolve(this.qU.extractFairplayContentId(t)):super.MU(t)}constructor(t,e,i,s,n){super(t,e,i,s,Rr.wk),this.qU=n}},cI=class{KU(t,e,i,s){switch(t.aT.Aw){case ge.gw:return this.jU(e,i,s);case ge.mw:return this.QU(e,i,s);case ge.ww:return this.JU(t,e,i,s);case ge.pw:default:return this.$U(e,i,s)}}jU(t,e,i){const s=function(t){return t.integration===NS&&Yt(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&WS._P.lP(s,am)){const n=WS._P.fP(s,am,t);return new aI(t,e,i,n)}switch(s){case Ch:return new Xx(t,e,i);case SS:return new zx(t,e,i);case AS:return new Yx(t,e,i);case yS:return new Qx(t,e,i);case kS:return new eR(t,e,i);case xS:return new iR(t,e,i);case RS:return new nR(t,e,i);case CS:return new rR(t,e,i);default:return new jR(t,e,i,Rr.wk)}}QU(t,e,i){const s=t.integration;if(s&&WS._P.lP(s,om)){const n=WS._P.fP(s,om,t);return new hI(t,e,i,n)}switch(s){case Ch:return new aR(t,e,i);case SS:return new cR(t,e,i);case AS:return new lR(t,e,i);case yS:return new dR(t,e,i);case kS:return new fR(t,e,i);case RS:return new _R(t,e,i);case CS:return new vR(t,e,i);default:return new pu(t,e,i)}}JU(t,e,i,s){const n=e.integration;if(n&&WS._P.lP(n,Ve)){const r=WS._P.fP(n,Ve,e);return new uI(t,e,i,s,r)}switch(n){case bS:return new mR(t,e,i,s);case SS:return new gR(t,e,i,s);case TS:return new yR(t,e,i,s);case Ch:return new bR(t,e,i,s);case AS:return new AR(t,e,i,s);case yS:return new SR(t,e,i,s);case go:return new TR(t,e,i,s);case kS:return new kR(t,e,i,s);case ES:return new ER(t,e,i,s);case xS:return new xR(t,e,i,s);case RS:return new RR(t,e,i,s);case IS:return new IR(t,e,i,s);case CS:return new CR(t,e,i,s);case PS:return new PR(t,e,i,s);case DS:return new YR(t,e,i,s);default:return new ns(t,e,i,s,Rr.Ak)}}$U(t,e,i){return new KR(t,e,i)}tG(t){return t.Aw===ge.mw||t.Aw===ge.gw||t.Aw===ge.ww||t.Aw===ge.pw}gT(t,e){var i;if(t.Aw!==ge.mw)return!1;if(ji(null==(i=e.playready)?void 0:i.customData))return!0;const s=e.integration;return(!s||!WS._P.lP(s,Ve))&&(s===Ch&&new hR(e).gT)}dU(t,e){if(t.Aw!==ge.gw)return;const i=e.integration;return i&&WS._P.lP(i,Ve)?void 0:i===Ch?Xx.dU():void 0}};r(),r(),r();var lI="theoplayer-stored-network-info-v2",dI=25e5,wl=class{eG(t){var e;const i=null==(e=Ms.oR)?void 0:e.Nb(t);if(void 0===i)return;const s=JSON.parse(i);if(void 0!==s&&void 0!==s[this.iG]){if(!this.sG(s))return s[this.iG].availableBandwidth;var n;null==(n=Ms.oR)||n.Mb(t,JSON.stringify({}))}}nG(){const t=this.eG(lI);if(void 0!==t)return t;const e=this.eG("theoplayer-stored-network-info");return e?8*e:void 0}sG(t){const e=t[this.iG].storedTimestamp;return!!e&&Da()-e>36e5}rG(t){this.oG=t,this.hG()}aG(){var t;return null!=this.oG||(this.oG=null!=(t=this.nG())?t:dI),this.oG}constructor(){this.iG=wb,this.oG=void 0,this.hG=Qr((()=>{var t;const e={[this.iG]:{availableBandwidth:this.oG,storedTimestamp:Da()}};null==(t=Ms.oR)||t.Mb(lI,JSON.stringify(e))}),1e4)}};wl.Fg=new wl,r();var Zt=function(t){return t[t.uG=0]="uG",t[t.cG=1]="cG",t[t.lG=2]="lG",t[t.dG=3]="dG",t[t.fG=4]="fG",t[t._G=5]="_G",t[t.zC=6]="zC",t[t.vG=7]="vG",t[t.mG=8]="mG",t[t.jC=9]="jC",t[t.gG=10]="gG",t[t.QC=11]="QC",t[t.pG=12]="pG",t}({});r();var Yh=class{get wG(){return 0}get yG(){return 0}bG(t){}};r(),r();var fI=class extends pe{constructor(t){super("contentProtectionsTracked"),this.AG=t}},Xh=class extends Co{SG(t){this.AU=t}dU(t){const e=this.AU;if(void 0!==e)return this.TG.dU(t,e)}gT(t){const e=this.AU;return void 0!==e&&this.TG.gT(t,e)}kG(t){const e={aT:t.aT,EG:t.EG||[],xG:t.xG,FU:t.FU},i=this.TG.KU(e,this.AU||{},t.oU,this.lW);return e.xG&&i.VW(e.xG),new _I(i)}IG(t){if(!t)return;Fo(t,(t=>void 0!==t.oU))&&this.wo(new fI(t))}constructor(t,e=new cI){super(),this.AU=void 0,this.lW=t,this.TG=e}},_I=class{zW(t){return this.CG.zW(t)}qW(t,e,i){return this.CG.qW(e,i)}XW(){return this.CG.XW||void 0!==this.CG.UW}aU(t,e){return this.CG.aU(t,e)}uU(t,e,i){return e&&this.CG.VW(e),this.CG.uU(t,i)}Hw(){this.CG.gn()}constructor(t){this.CG=t}};r();var Fu=class extends to{DG(t){this.NG.push(t);for(const e of t.uC)this.tt(e);this.MG(t)}BG(t){we(this.NG,t),this.OG(t);for(const e of t.uC)this.FG(e)||this.it(e)}FG(t){for(const e of this.NG)if(e.dC(t))return!0;return!1}MG(t){t.yn(Se.OI,this.VG),t.yn(Se.VI,this.WG)}OG(t){t.fn(Se.OI,this.VG),t.fn(Se.VI,this.WG)}gn(){for(;this.NG.length>0;)this.BG(this.NG[0]);super.gn()}ba(){return uS(this)}constructor(t){super(),this.NG=[],this.VG=t=>{this.tt(t.Ht)},this.WG=t=>{const e=t.Ht;this.FG(e)||this.it(e)};for(const e of t)this.DG(e)}};r(),r();var vI,mI={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},gI=class{get ka(){return null!=this.su||(this.su=function(t){return{get enabled(){return t.Rt},set enabled(e){t.Rt=xc(e)},get monitoringLivePlayback(){return t.UG},get currentLatency(){return t.qB},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.bd)}}}(this)),this.su}get Rt(){var t,e;return null!=(e=this.He)?e:Boolean(null==(t=this.GG)?void 0:t.Rt)}set Rt(t){this.He=t,this.GG&&(this.GG.Rt=t)}get UG(){var t,e;return null!=(e=null==(t=this.GG)?void 0:t.gB)&&e}get qB(){var t;return null==(t=this.GG)?void 0:t.zB}get bd(){return this.GG?this.GG.pB:mI}Ma(t){this.GG=t,void 0!==this.He&&(this.GG.Rt=this.He)}er(){this.GG=void 0,this.He=void 0}};var pI=!(!s||!s.TextTrack),wI=class extends sn{get qB(){}get HG(){const t=this.FB.gR,e=this.SR;return t.kr(e,.01)}get ht(){return this.aO}get gR(){return this.FB.gR.ks()}get wR(){return this.FB.wR}set wR(t){t&&this.FB.ZG(t)}get bt(){return this.Cc}get SR(){return void 0!==this.XG?this.XG:this.FB.SR}set SR(t){this.ER(t)}ER(t,e){this.OR&&(this.XG=t),this.FB.Eb(t)}get ct(){return this.FB.ct}get RR(){return this.FB.RR}get lt(){return this.zG}get DR(){return this.qG}get MR(){}get OR(){return this.FB.OR}get WR(){return Bo({},{dO:0,fO:0,_O:0,vO:0,mO:0,gO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.FB.UR())}get GR(){return this.FB.GR}set GR(t){this.FB.GR=t}get XR(){return!0}get qR(){return this.FB.qR}get KR(){return this.FB.KR}set KR(t){this.FB.KR=t}get JR(){return this.FB.YG.played}get tI(){return this.KG}set tI(t){this.KG=t,this.jG&&(this.jG.tI=t)}get sI(){return this.FB.sI}get rI(){return this.FB.rI.ks()}get hI(){return this.FB.hI}get QG(){return this.FB.QG}get nt(){return this.Ll}get rt(){return this.cO}get cI(){return this.FB.cI}get fI(){return this.FB.fI}get vI(){return this.FB.vI}set vI(t){this.FB.vI=t}get pI(){return this.JG}get yI(){return this.FB.yI}set yI(t){this.FB.yI=t}get $G(){return this.tH}be(){this.FB.be()}ge(){this.FB.ge()}async xa(t,e,i){J(i),this.Cc=t;const s={Aw:Mr.mW,OC:t.src,Dk:t.type,eH:this.iH(t),tI:this.KG,sH:t.crossOrigin,nH:e.metadata&&e.metadata.title};this.rH.SG(t.contentProtection),this.jG=await this.FB.Dn(s),J(i),e.textTracks&&this.oH(e.textTracks),Mx(this.nt)}oH(t){for(const i of t)if(this.FB.hH()&&Z.iu&&pI&&!Ax(i.kind,i.label)&&this.aH(i)){var e;const t=null!=(e=i.kind)?e:hs.jV;this.FB.uH(i.src,t,i.label,i.srclang,i.default)}else{if(void 0===i.src)continue;this.cH.aW(i)}}aH(t){return!t.format||"webvtt"===t.format}async kI(){try{await this.FB.kI()}catch(t){}for(;!this.HG;)await this.FB.vy(Ti.Xy)}TI(){this.FB.TI()}xI(){return void 0!==this.FB.YG.webkitShowPlaybackTargetPicker}RI(){this.FB.YG.webkitShowPlaybackTargetPicker&&this.FB.YG.webkitShowPlaybackTargetPicker()}II(){this.FB.YG.webkitShowPlaybackTargetPicker&&this.FB.YG.webkitShowPlaybackTargetPicker()}AI(){return this.FB.YG}bI(){return this.FB.Ca}Sa(){return this.FB.lH}LI(t){return this.FB.dH(t)}async er(){this.Cc=void 0,this.zG=void 0,this.qG=void 0,this.jG=void 0,await this.cH.er(),this.FB.fH(),await this.FB.er(),this._H.er(),this.tI=this.KG,this.ht.er(),this.rt.er(),this.XG=void 0}async gn(){await this.er(),this.$o(),this.vH(),this.mH(),this._H.gn(),this.FB.gH=void 0,await this.wH.pH(this.FB),this.aO.gn(),this.cO.gn(),this.Ll.gn(),await this.cH.gn()}yH(){this.FB.yn(Ti.ro,this.Ds),this.FB.yn(Ti.Zy,this.Ds),this.FB.yn(Ti.sb,this.jc),this.FB.yn(Ti.Xy,this.Ds),this.FB.yn(Ti.Vy,this.Ds),this.FB.yn(Ti.jy,this.Ds),this.FB.yn(Ti.Ky,this.bH),this.FB.yn(Ti.Cy,this.Ds),this.FB.yn(Ti.zy,this.Ds),this.FB.yn(Ti.ob,this.Ds),this.FB.yn(Ti.xy,this.Ds),this.FB.yn(Ti.Yy,this.AH),this.FB.yn(tl.VL,this.HB),this.FB.yn(yo.da,this.SH),this.FB.yn(Ti.Sy,this.Ds),this.FB.yn(Ti.Ay,this.TH),this.FB.YG.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.kH)}vH(){this.FB.fn(Ti.ro,this.Ds),this.FB.fn(Ti.Zy,this.Ds),this.FB.fn(Ti.sb,this.jc),this.FB.fn(Ti.Xy,this.Ds),this.FB.fn(Ti.Vy,this.Ds),this.FB.fn(Ti.jy,this.Ds),this.FB.fn(Ti.Ky,this.bH),this.FB.fn(Ti.Cy,this.Ds),this.FB.fn(Ti.zy,this.Ds),this.FB.fn(Ti.ob,this.Ds),this.FB.fn(Ti.xy,this.Ds),this.FB.fn(Ti.Yy,this.AH),this.FB.fn(tl.VL,this.HB),this.FB.fn(yo.da,this.SH),this.FB.fn(Ti.Sy,this.Ds),this.FB.fn(Ti.Ay,this.TH),this.FB.YG.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.kH)}iH(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{aT:gm,EH:[{initDataTypes:[gm.Tw],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}xH(){const t=this.FB.YG.audioTracks,e=this.FB.YG.videoTracks;t&&(t.addEventListener("addtrack",this.RH),t.addEventListener("removetrack",this.IH),t.addEventListener("change",this.CH)),e&&(e.addEventListener("addtrack",this.PH),e.addEventListener("removetrack",this.DH),e.addEventListener("change",this.NH))}mH(){const t=this.FB.YG.audioTracks,e=this.FB.YG.videoTracks;t&&(t.removeEventListener("addtrack",this.RH),t.removeEventListener("removetrack",this.IH),t.removeEventListener("change",this.CH)),e&&(e.removeEventListener("addtrack",this.PH),e.removeEventListener("removetrack",this.DH),e.removeEventListener("change",this.NH))}oh(t){for(let e=0;e<t.V;e++){t.lC(e).PO()}}CI(){this.FB.CI()}DI(){}MH(t,e){this.zG||(this.zG=e,this.qG=t,this.wo(new Ga(t)))}constructor(t,e,i,s,n,r,o=new cI,h=fb()){super(),this.jG=void 0,this.Cc=void 0,this.zG=void 0,this.qG=void 0,this.tH=new Yh,this.JG=new gI,this.SH=t=>{const e=t.lt,i=e.code,s=new A(mk(i),"Something went wrong during native playback.",e),n=new dk(i,s.message,e.message);this.MH(s,n)},this.jc=()=>{this.wo(new ri(this.SR,this.wR))},this.bH=t=>{this.qR||(this.XG=void 0),this.wo(t)},this.HB=t=>{this.XG=void 0},this.kH=()=>{this.wo(new Rk(this.OR))},this.AH=()=>{this.fI>0&&this.cI>0&&this.wo(new P)},this.RH=t=>{const e=this.FB.YG.audioTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];AI(this.aO,i)||this.aO.tt(new kk(i))}},this.IH=t=>{const e=[],i=this.FB.YG.audioTracks;if(i){for(const t of this.aO.uC)SI(i,t.IO)||e.push(t);for(const t of e)this.aO.it(t)}},this.CH=()=>{this.oh(this.aO)},this.PH=t=>{const e=this.FB.YG.videoTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];AI(this.cO,i)||this.cO.tt(new xk(i))}},this.DH=t=>{const e=[],i=this.FB.YG.videoTracks;if(i){for(const t of this.cO.uC)SI(i,t.IO)||e.push(t);for(const t of e)this.cO.it(t)}},this.NH=()=>{this.oh(this.cO)},this.TH=t=>{this.wo(t),this.MH(t.errorObject,Xs(t.errorObject))},this.wH=e,this.lW=i,this.Pw=h,this.FB=this.wH.LH(ee._E),this.KG=this.FB.YG.preload,this._H=new q(this.FB,!0),this._H.yn(ro,this.Ds),this.rH=new Xh(i,o),this.FB.gH=this.rH,this.yH(),this.aO=new Nn,this.cO=new Nn,this.xH(),this.cH=new Ix(this.FB,this.lW),this.Ll=new Fu([this.FB.nt]),this.ge()}};function yI(t){var e,i;if(!(null==(e=(vI||(vI=s&&s.document&&s.document.createElement("video")),i=vI).canPlayType)?void 0:e.call(i,t.type)))return!1;if(t.useNativePlayback)return!0;const n=Z.iu||Z.Ig;return!t.useManagedMediaSource||!n}var bI=class{hP(t,e,i,s,n,r,o){return new wI(t,e,i,s,n,r)}BH(t,e){return yI(t)}OH(t){return lT(t)}FH(){return!1}constructor(){this.VH=Zt.pG}};function AI(t,e){for(const i of t.uC)if(i.IO===e)return i}function SI(t,e){for(let i=0;i<t.length;i++)if(t[i]===e)return!0;return!1}var TI=class{static WH(){return this.Fg}UH(t){this.GH.push(t)}get VH(){return this.HH.VH}hP(t,e,i,s,n,r,o){let h=this.HH.hP(t,e,i,s,n,r,o);for(const t of this.GH)h=t(h,i,s);return h}BH(t,e){return this.HH.BH(t,e)}OH(t){return this.HH.OH(t)}FH(){return!1}constructor(){this.HH=new bI,this.GH=[]}};function kI(t,e){return Fm(t.VH,e.VH)}TI.Fg=new TI,r(),r();var EI=class{ZH(t){this.XH.push(t),this.XH.sort(kI)}async zH(t,e){for(const i of this.XH){const s=i.BH(t,e);if(yt(s)?await s:Boolean(s))return i}}constructor(){this.XH=[]}};function O(t){II.Fg.ZH(t)}r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r(),r();var xI,RI,xo,II=class extends EI{qH(t){this.YH=t}KH(){return this.YH}async jH(t,e){const i=this.YH;let s=!1;for(const n of t){const t=await this.zH(n,e);if(t){if(JS(n.contentProtection)||await t.OH(n.contentProtection))return{xc:n,t:t};n.contentProtection&&(s=!0)}const r=i.BH(n,e);if(yt(r)?await r:Boolean(r)){if(JS(n.contentProtection)||await i.OH(n.contentProtection))return{xc:n,t:i};n.contentProtection&&(s=!0)}}if(s)throw await Ms.Gp()?new A(Qa.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported."):new A(Qa.CONTENT_PROTECTION_NOT_SUPPORTED,"The DRM configuration is not supported by this platform.");return{xc:t[0],t:i}}constructor(...t){super(...t),this.YH=TI.WH()}};II.Fg=new II,r(),r();var CI=class{gn(){Gt(this.Vs)}constructor(t){this.Vs=s&&s.document&&s.document.createElement("div"),Nh(this.Vs),t.appendChild(this.Vs)}};r(),r();var hl=function(t){return t.pG="",t.QH="none",t.$V="metadata",t.jB="auto",t}({});var PI=[yo.da,Ti.Ry,Ti.Iy,Ti.vb,Ti.gy,Ti.Py,Ti.Ny,Ti.Gy,Ti.Hy,Ti.Jy,Ti.eb,tl.ML,tl.LL,tl.BL,tl.OL,tl.tC,tl.FL,tl.VL,Ti.Ay,Ti.Sy,Ti.xy,Ti.Cy,Ti.Vy,Ti.Wy,Ti.ro,Ti.Xy,Ti.Zy,Ti.zy,Ti.Yy,Ti.jy,Ti.Ky,Ti.sb,Ti.ob,Ti.qy,Ti.Uy,Ti.Qy],DI=class extends sn{get ht(){return this.aO}get gR(){return this.ea.gR}get lt(){return this.ea.lt}get DR(){return this.ea.DR}get wR(){return this.ea.wR}set wR(t){this.ea.wR=t}get bt(){return this.JH}get SR(){return this.ea.SR}set SR(t){this.ea.SR=t}get ct(){return this.ea.ct}get RR(){return this.ea.RR}get MR(){return this.uO}get OR(){return this.ea.OR}get WR(){return this.ea.WR}get GR(){return this.ea.GR}set GR(t){this.ea.GR=t}get XR(){return this.ea.XR}get qR(){return this.ea.qR}get KR(){return this.ea.KR}set KR(t){this.ea.KR=t}get JR(){return this.ea.JR}get tI(){return this.KG}set tI(t){this.KG=t,this.ea&&(this.ea.tI=this.KG)}get sI(){return this.ea.sI}get rI(){return this.ea.rI}get hI(){return this.ea.hI}get nt(){return this.Ll}get cI(){return this.ea.cI}get rt(){return this.cO}get fI(){return this.ea.fI}get vI(){return this.ea.vI}set vI(t){this.ea.vI=t}get pI(){return this.ea.pI}get $G(){return this.ea.$G}TI(){this.ea.TI()}kI(){const t=this.ea.kI();yt(t)&&ah(t)}EI(){return this.xa(void 0)}SI(){}$H(){this.hO.fC=this.ea.Sa(),this.aO.fC=this.ea.ht,this.cO.fC=this.ea.rt,this.Ll.fC=this.ea.nt,this.uO.fC=this.ea.MR,this.ea.yn(PI,this.Ds)}tZ(){this.ea.fn(PI,this.Ds),this.aO.fC=void 0,this.cO.fC=void 0,this.Ll.fC=void 0,this.uO.fC=void 0}tu(){return this.eZ}async xa(t,e){if(J(e),this.eZ=t,!t)return;const i=t.sources.filter(qT);if(Fn(i))return;const s=await this.iZ.jH(i,t);J(e);const n=s.xc,r=s.t,o=this.bI(),h=ik(this);(this.sZ!==r||this.lt)&&(this.tZ(),await this.ea.gn(),J(e),this.sZ=r,this.ea=this.nZ(r,n),function(t,e){t.GR!==e.GR&&(t.GR=e.GR);t.vI!==e.vI&&(t.vI=e.vI);t.KR!==e.KR&&(t.KR=e.KR)}(this.ea,h),Zc(this,h,this),this.$H()),this.ea.tI=this.tI,this.rZ?this.ea.ge():this.ea.be(),await this.ea.xa(n,t,e),J(e),this.oZ(n),this.bI()!==o&&this.wo(new Vi)}oZ(t){this.JH!==t&&(this.JH=t,this.wo(new rk(t)))}xI(){return this.ea.xI()}RI(){this.ea.RI()}II(){this.ea.II()}bI(){return this.ea.bI()}Sa(){return this.hO}CI(){this.ea.CI()}DI(){this.ea.DI()}LI(t){return this.ea.LI(t)}async er(){this.eZ=void 0,this.oZ(void 0),await this.ea.er()}async gn(){this.$o(),await this.er(),await this.ea.gn(),this.aO.gn(),this.cO.gn(),this.Ll.gn(),this.hO.gn(),this.uO.gn()}ge(){this.rZ=!0,this.ea.ge()}be(){this.rZ=!1,this.ea.be()}constructor(t,e){super(),this.sZ=void 0,this.JH=void 0,this.KG=hl.QH,this.eZ=void 0,this.rZ=!0,this.aO=new Wh,this.cO=new Wh,this.Ll=new at,this.uO=new $c,this.iZ=t,this.ea=e,this.ea.tI=this.tI,this.hO=new Vh(e.Sa()),this.$H()}};r(),r(),r(),r();var rh=function(t){return t.la="fullscreenchange",t.ma="fullscreensupportchange",t.da="fullscreenerror",t}({});r();var NI=class extends pe{constructor(){super(rh.da)}},N=(rh.la,rh.ma,rh.da,class extends Co{get cs(){return!1}get ha(){return!1}fo(){this.wo(new NI)}_o(){}gn(){this.$o()}});r(),r();var ga=class extends pe{constructor(){super(To.da)}},MI=class extends Co{get oO(){return!1}get rO(){return!1}async fo(){this.wo(new ga)}async _o(){this.wo(new ga)}gn(){this.$o()}},LI=class extends Co{get wR(){}set wR(t){}get bt(){}get SR(){return this.hZ}set SR(t){this.ER(t)}ER(t,e){this.hZ!==t&&(this.hZ=t,this.aZ=!0,this.wo(new L(this.SR)))}get WR(){return{dO:0,fO:0,_O:0,vO:0,mO:0,gO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get GR(){return this.uZ}set GR(t){this.uZ!==t&&(this.uZ=t,this.wo(new rs(this.SR,this.vI)))}get qR(){return this.cZ}get KR(){return this.lZ}set KR(t){this.lZ!==t&&(this.lZ=t,this.wo(new Nu(this.SR,this.KR)))}get hI(){return this.aZ}get vI(){return this.ZA}set vI(t){this.ZA!==t&&(this.ZA=t,this.wo(new rs(this.SR,this.vI)))}get yI(){return!1}set yI(t){}get $G(){return this.tH}get qB(){}ge(){}be(){}kI(){this.cZ&&(this.cZ=!1,this.wo(new H(this.SR)),this.wo(new tu(this.SR)))}TI(){this.cZ||(this.cZ=!0,this.wo(new ri(this.SR,this.wR)),this.wo(new fl(this.SR)))}xa(t,e){return Promise.resolve()}xI(){return!1}RI(){}II(){}bI(){return this.sa}Sa(){return this.Zo}LI(t){throw new g("Adding a CustomTextTrack is not supported without setting a source.")}CI(){}DI(){}async er(){this.hZ=0,this.aZ=!1,this.TI(),this.wo(new Ys(this.hZ))}async gn(){this.$o(),this.ht.gn(),this.nt.gn(),this.rt.gn()}constructor(...t){super(...t),this.hZ=0,this.uZ=!1,this.cZ=!0,this.lZ=1,this.aZ=!1,this.ZA=1,this.ht=new Nn,this.gR=se.mB().ks(),this.ct=NaN,this.RR=!1,this.lt=void 0,this.DR=void 0,this.MR=void 0,this.OR=!1,this.XR=!0,this.JR=se.mB().ks(),this.tI=hl.QH,this.sI=Ht.$B,this.rI=se.mB().ks(),this.QG=void 0,this.nt=new ua,this.cI=0,this.rt=new Nn,this.fI=0,this.pI=new gI,this.tH=new Yh,this.sa=new N,this.Zo=new MI}},BI=class extends LI{set dZ(t){this.wH=t,this.FB=t.LH(ee._E)}AI(){var t;return null==(t=this.FB)?void 0:t.YG}async gn(){await super.gn(),this.FB&&(await this.wH.pH(this.FB),this.FB=void 0)}constructor(...t){super(...t),this.wH=void 0,this.FB=void 0}},OI=class extends DI{get we(){return this.xu}get yI(){return this.ea.yI}set yI(t){this.ea.yI=t}SI(){super.SI(),this._Z.fZ()}dr(t){sk(this,t)}lr(){}NI(t){return!1}async xa(t,e){const i=this.bI(),s=this.AI();await super.xa(t,e),this.bI()!==i&&this.wo(new Vi),this.AI()!==s&&this.wo(new ok)}ER(t,e){this.ea.ER(t,e)}nZ(t,e){return t.hP(this.xu,this._Z,this.lW,this.DT,this.vZ,this.mZ,this.gZ,e)}AI(){return this.ea.AI()}mR(){return this._Z.pZ.map((t=>t.YG))}async gn(){await super.gn(),this._Z.gn(),this.wZ.gn()}constructor(t,e,i,s,n,r,o){const h=new BI;super(II.Fg,h),this.xu=t,this.DT=e,this.lW=i,this.vZ=s,this.mZ=n,this.gZ=o,this._Z=new xI(r,this.gZ),this._Z.yZ(this.xu),h.dZ=this._Z,this.wZ=new CI(this.xu)}};r(),r();var FI=class extends sn{get ht(){return this.bZ}get gR(){return se.mB().ks()}get wR(){return new Date(NaN)}set wR(t){}get bt(){}get SR(){return 0}set SR(t){}ER(t,e){}get ct(){return 0}get we(){return this.xu}get RR(){return!0}get lt(){return this.AZ}get DR(){return this.SZ}get MR(){}get WR(){return{dO:0,fO:0,_O:0,vO:0,mO:0,gO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get GR(){return!1}set GR(t){}get XR(){return!0}get qR(){return!0}get KR(){return 0}set KR(t){}get JR(){return se.mB().ks()}get tI(){return hl.QH}set tI(t){}get sI(){return Ht.$B}get rI(){return se.mB().ks()}get hI(){return!1}get nt(){return this.TZ}get cI(){return 0}get rt(){return this.bZ}get fI(){return 0}get vI(){return 1}set vI(t){}get pI(){return this.JG}get yI(){return!1}set yI(t){}NI(t){return!0}be(){}kI(){throw this.wo(new Ga(this.SZ)),this.AZ}TI(){}tu(){}async xa(t,e){throw J(e),this.wo(new Ga(this.SZ)),this.AZ}ge(){}EI(){return Promise.resolve()}AI(){}bI(){return this.sa}Sa(){return this.Zo}mR(){return[]}SI(){}dr(t){}lr(){}get OR(){return!1}xI(){return!1}RI(){}II(){}CI(){}DI(){}LI(t){}er(){return Promise.resolve()}gn(){return this.$o(),this.bZ.gn(),this.TZ.gn(),Promise.resolve()}constructor(t,e,i){super(),this.sa=new N,this.Zo=new MI,this.JG=new gI,this.xu=t,this.AZ=e,this.bZ=new Nn,this.TZ=new ua,this.SZ=i}};function VI(t){if(t&&V(t))return Bo({},t,{integration:WI(t.integration),fairplay:zI(t.fairplay),widevine:UI(t.widevine),playready:GI(t.playready),clearkey:qI(t.clearkey),aes128:YI(t.aes128),integrationParameters:KI(t.integrationParameters),preferredKeySystems:jI(t.preferredKeySystems),useOipfDrmAgent:xc(t.useOipfDrmAgent)})}function WI(t){if(Yt(t))return t}function UI(t){if(t&&V(t))return{persistentState:HI(t.persistentState),distinctiveIdentifier:HI(t.distinctiveIdentifier),audioRobustness:ZI(t.audioRobustness),videoRobustness:ZI(t.videoRobustness),licenseAcquisitionURL:Yt(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:XI(t.licenseType),headers:t.headers,useCredentials:!!bd(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:Yt(t.certificate)||tp(t.certificate)?t.certificate:void 0}}function GI(t){if(!t)return;const e=UI(t);if(!e)return;return Bo({},e,{customData:Yt(t.customData)?t.customData:void 0})}function HI(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function ZI(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function XI(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function zI(t){if(!t)return;const e=UI(t);if(!e)return;return Bo({},e,{certificateURL:Yt(t.certificateURL)?t.certificateURL:void 0})}function qI(t){if(!t)return;const e=UI(t);if(!e)return;const i=rl(t.keys)?t.keys.map((t=>function(t){if(!t||!V(t))return;const e=t.id,i=t.value;if(!Yt(e)||!Yt(i))return;return{id:e,value:i}}(t))).filter(ji):void 0;return Bo({},e,{keys:i})}function YI(t){if(V(t))return{useCredentials:bd(t.useCredentials)?t.useCredentials:void 0}}function KI(t){if(V(t))return t}function jI(t){return t&&rl(t)?t.map((t=>uT(t))).filter(ji):[am,om,Ve]}r(),r(),r(),r();var QI={bt:void 0,SR:0,ct:NaN,RR:!1,lt:void 0,DR:void 0,GR:!1,qR:!0,KR:1,sI:Ht.$B,hI:!1,cI:0,fI:0,vI:1};r();var yu=function(t){return t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads",t.UPLYNK="uplynk",t}({}),Ih=class{get kZ(){return this.EZ}xZ(t){const e=this.EZ.filter((e=>e.RZ(t)));if(e.length>1)0;else if(0===e.length)throw g("Unknown ad integration: "+t.integration);return e[0]||null}IZ(t){this.EZ.push(t)}constructor(){this.EZ=[]}};Ih.Fg=new Ih,r(),r(),r(),r();var Ae=function(t){return t.VL="PLAYING",t.CZ="PAUSED",t.PZ="SEEK",t.DZ="STALLED",t.NZ="FAILED",t.MZ="INITIAL_BUFFERING",t.LZ="NO_ACCESS",t}({}),ba=function(t){return t.BZ="HTTP_REQUEST_STATUS_CODE_1XX",t.OZ="HTTP_REQUEST_STATUS_CODE_2XX",t.FZ="HTTP_REQUEST_STATUS_CODE_3XX",t.VZ="HTTP_REQUEST_STATUS_CODE_4XX",t.WZ="HTTP_REQUEST_STATUS_CODE_5XX",t.UZ="BUFFER_LENGTH",t.GZ="BYTES_RECEIVED",t.HZ="SEGMENT_READ_BITRATE",t.ZZ="SEGMENT_PROFILE_BITRATE",t.XZ="VIDEO_PROFILE_BITRATE",t.zZ="NUMBER_OF_FRAMES_DROPPED",t.qZ="PLAYBACK_POSITION",t.YZ="NUMBER_OF_FRAMES_DECODED",t.KZ="PLAYBACK_DELTA_TO_ORIGIN",t.jZ="STREAM_DELTA_TO_ORIGIN",t.QZ="ORIGIN_TIMESTAMP",t}({}),JI=function(t){return t.JZ="MANIFEST_URI",t.$Z="ASSET_DURATION",t.tX="NUMBER_OF_CONTENT_PROFILES",t.eX="CDN",t.iX="CONTENT_TITLE",t.sX="SERVICE_NAME",t.nX="CONTENT_TYPE",t.rX="CONTENT_DESCRIPTION",t}({}),$I=function(t){return t.oX="shutdown_normal_shutdown",t}({}),tC=function(t){return t.hX="session/",t.aX="content/",t.uX="internalError/",t.cX="drmError/",t.lX="caError/",t.dX="networkError/",t}({}),eC=class{get code(){return this.category+this.statusCode}constructor(t,e){this.category=t,this.statusCode=e}},iC=class extends Co{};r(),r(),r();var sC=function(t){return t.PAUSE="fX",t.RESUME="_X",t}({}),nC=class extends pe{constructor(){super("vX")}},Ji=class extends Co{mX(){this.gX=!0}pX(){}gn(){this.gX=!1,this.wX.fn(sC.PAUSE,this.yX),this.wX.fn(sC.RESUME,this.bX)}AX(){return isFinite(this.ea.Sd())}constructor(t,e){super(),this.ea=t,this.wX=e,this.gX=!1,this.yX=()=>{this.pX(),this.gX=!1},this.bX=()=>{this.gX=!0},this.wX.yn(sC.PAUSE,this.yX),this.wX.yn(sC.RESUME,this.bX)}},rC=class extends Ji{mX(){super.mX(),this.SX()}gn(){this.TX(),super.gn()}SX(){this.ea.yn(tl.FL,this.kX),this.ea.yn(Ti.Zy,this.EX),this.ea.yn(tl.VL,this.xX),this.ea.yn(Ti.jy,this.RX),this.ea.yn(Ti.Ky,this.IX)}TX(){this.ea.fn(tl.FL,this.kX),this.ea.fn(Ti.Zy,this.EX),this.ea.fn(tl.VL,this.xX),this.ea.fn(Ti.jy,this.RX),this.ea.fn(Ti.Ky,this.IX)}CX(){this.PX=!0}DX(){const t=this.ea.PR(),e=new eC(tC.uX,String(t.code));this.NX(Ae.NZ,e,t.message)}MX(t){this.gX&&(this.wX.LX(t),this.wo(new nC))}NX(t,e,i){this.wX.BX(t,e,i),this.wo(new nC)}OX(t,e){this.wX.FX(t,e)}constructor(...t){super(...t),this.PX=!1,this.VX=!1,this.WX=!1,this.kX=()=>{this.VX&&!this.WX&&this.MX(Ae.DZ)},this.xX=()=>{this.ea.qR||(this.VX||this.OX(new eC(tC.aX,"firstFrameDisplayed"),"now"),this.VX=!0,this.MX(Ae.VL))},this.EX=()=>{this.ea.qR&&(this.VX=!0,this.MX(Ae.CZ))},this.RX=()=>{this.PX&&(this.WX=!0,this.PX=!1,this.MX(Ae.PZ))},this.IX=()=>{this.WX=!1,this.ea.qR&&this.MX(Ae.CZ)}}};r();var oC=class extends Ji{mX(){super.mX(),this.UX(),this.SX()}gn(){this.TX(),super.gn()}SX(){this.ea.rt.yn(No.la,this.UX),this.ea.HX.GX(this.ZX),this.ea.yn(Ti.xy,this.XX)}TX(){this.ea.rt.fn(No.la,this.UX),this.ea.HX.zX(this.ZX),this.ea.fn(Ti.xy,this.XX)}qX(t){t.serviceName&&this.YX(JI.sX,t.serviceName),t.cdn&&this.YX(JI.eX,t.cdn),t.contentTitle&&this.YX(JI.iX,t.contentTitle),t.contentType&&this.YX(JI.nX,t.contentType),t.contentDescription&&this.YX(JI.rX,t.contentDescription)}YX(t,e){this.gX&&this.wX.KX(t,e)}constructor(...t){super(...t),this.XX=()=>{this.AX()&&this.YX(JI.$Z,_.round(this.ea.Sd()))},this.ZX=t=>{"manifest"===t.request.type&&this.YX(JI.JZ,t.url)},this.UX=()=>{const t=Fo(this.ea.rt.uC,(t=>t.Rt));t&&this.YX(JI.tX,t.IC.V)}}};r();var hC=class extends Ji{mX(){super.mX(),this.jX=this.ea.WR.dO,this.QX=this.ea.WR._O,this.SX(),this.JX.push(p(this.$X,1e3))}pX(){super.pX(),this.tz()}gn(){this.tz(),this.TX(),this.JX.forEach(m),En(this.JX),super.gn()}SX(){this.ea.HX.GX(this.ez),this.ea.yn(Ti.eb,this.iz)}TX(){this.ea.HX.zX(this.ez),this.ea.fn(Ti.eb,this.iz)}nz(){this.tz()}rz(t){this.oz+=t,this.cz(ba.GZ,this.oz)}lz(t,e){const i=this.fz.get(e)||0;this.cz(t,i)}_z(){const t=this.ea.WR.dO-this.jX;this.cz(ba.zZ,t)}vz(){const t=this.ea.WR._O-this.QX;this.cz(ba.YZ,t)}mz(){const t=wl.Fg.aG();this.cz(ba.HZ,sp(t))}gz(t){this.cz(ba.ZZ,sp(t)),this.cz(ba.XZ,sp(t))}tz(){if(!this.AX())return;const t=_.round(Ia(this.ea.kR()));this.cz(ba.qZ,t)}pz(){const t=se.xn(this.ea.pR()),e=this.ea.kR(),i=t.dB(e),s=i?Ia(i.jn(0)-e):0;this.cz(ba.UZ,s)}cz(t,e){this.gX&&this.wX.wz(t,e)}constructor(...t){super(...t),this.fz=xu(),this.oz=0,this.jX=0,this.QX=0,this.JX=[],this.$X=()=>{this._z(),this.vz(),this.pz()},this.iz=t=>{t.TE===ee._E&&(this.rz(t.mO),this.mz(),this.gz(t.yz),this.tz())},this.ez=t=>{const e=t.status.toString()[0],i=this.fz.get(e)||0;this.fz.set(e,i+1),this.lz(ba.BZ,"1"),this.lz(ba.OZ,"2"),this.lz(ba.FZ,"3"),this.lz(ba.VZ,"4"),this.lz(ba.WZ,"5")}}};r();function aC(t){return t&&t.integration===_C}function uC(t){if(!Yt(t.asset))throw new b("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!Yt(t)&&("live"===t||"vod"===t)}(t.streamType))throw new b("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!Yt(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new b("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!Yt(t.cdn))throw new b("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!Yt(t.contentTitle))throw new b("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!Yt(t.contentType))throw new b("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!Yt(t.contentDescription))throw new b("Agama source configuration: expected 'contentDescription' to be a string");return t}function cC(t){if(!Yt(t.config))throw new b("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!Yt(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new b("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!Yt(t.application))throw new b("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!Yt(t.applicationVersion))throw new b("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!Yt(t.userAccountID))throw new b("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!Yt(t.deviceID))throw new b("Agama player configuration: expected 'deviceID' to be a string");return t}function lC(){let t="00000000-0000-0000-0000-000000000000",e=s.navigator,i=s.screen,n=""+e.mimeTypes.length;n+=e.userAgent.replace(/\D+/g,""),n+=e.plugins.length,n+=i.height||"",n+=i.width||"",n+=i.pixelDepth||"",n+=_.floor(1e3*_.random());let r=function(t){let e,i,s=0;if(0===t.length)return"0";for(e=0;e<t.length;e++)i=t.charCodeAt(e),s=(s<<5)-s+i,s|=0;return _.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function dC(t,e,i){const s=e,n=function(t,e){return zh(e)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,e){let i=t.DsPlaylistType.VOD;"live"===e&&(i=t.DsPlaylistType.LIVE);return i}(t,i.streamType);return{asset:i.asset,playlistType:r,protocol:n,uri:s.src}}r();var In=function(t){return t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected",t}({}),fC=class{bz(){this.ea.fn(yo.da,this.Az),this.Sz(),this.Tz(),this.wX.kz()}Ez(){this.ea.xz.ka.chromecast&&this.ea.xz.ka.chromecast.addEventListener("statechange",this.Rz)}Tz(){this.ea.xz.ka.chromecast&&this.ea.xz.ka.chromecast.removeEventListener("statechange",this.Rz)}Iz(){return void 0!==this.ea.xz.ka.chromecast&&this.ea.xz.ka.chromecast.state===In.CONNECTED}gn(){this.ea.fn(Ti.ao,this.uo),this.ea.fn(Ti.ro,this.Cz),this.ea.fn(Ti.Cy,this.Pz),this.bz(),this.wX.gn()}Dz(){this.Nz||(this.Nz=new rC(this.ea,this.wX)),this.Mz||(this.Mz=new hC(this.ea,this.wX)),this.Lz||(this.Lz=new oC(this.ea,this.wX))}mX(){this.Nz&&(this.Nz.mX(),this.Nz.yn("vX",this.Bz)),this.Mz&&this.Mz.mX(),this.Lz&&this.Lz.mX()}Sz(){this.Nz&&(this.Nz.fn("vX",this.Bz),this.Nz.gn(),this.Nz=void 0),this.Mz&&(this.Mz.gn(),this.Mz=void 0),this.Lz&&(this.Lz.gn(),this.Lz=void 0)}qX(t){this.Lz&&this.Lz.qX(t)}Oz(){this.Nz&&this.Nz.DX()}CX(){this.Nz&&this.Nz.CX()}constructor(t,e,i){this.ea=t,this.wX=e,this.uo=()=>{this.Fz(),this.Pz()},this.Fz=()=>{const t=this.ea.tu(),e=t&&t.analytics;this.Vz=function(t){void 0===t&&(t=[]);for(let e of t)if(aC(e))return uC(e)}(e)},this.Pz=()=>{this.bz(),this.ea.fn(Ti.ro,this.Cz),!this.Iz()&&this.wX.Wz()&&this.ea.bt&&this.Vz&&(this.Dz(),this.ea.qR||this.ea.RR?this.ea.yn(Ti.ro,this.Cz):this.Cz())},this.Cz=()=>{this.ea.bt&&this.Vz&&(this.wX.Uz(this.ea.bt,this.Vz),this.mX(),this.qX(this.Vz),this.Ez(),this.ea.yn(yo.da,this.Az),this.ea.fn(Ti.ro,this.Cz))},this.Rz=()=>{this.Iz()&&this.bz()},this.Az=()=>{this.Oz(),this.bz()},this.Bz=()=>{this.Mz&&this.Mz.nz()};const s=function(t){void 0===t&&(t=[]);for(const e of t)if(aC(e))return cC(e)}(i.analytics);s&&this.wX.Gz()&&(this.wX.SI(s),this.wX.Wz()?(this.wX.Zz(),this.ea.yn(Ti.ao,this.uo),this.ea.yn(Ti.Cy,this.Pz)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},_C="agama";r(),r();var ku=function(t){return t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t}({});r();var vC=function(t){return t.NONE="",t.PM360="360",t.PM180="180",t}({});function mC(t){switch(t){case"":return ku.NONE;case"horizontal":return ku.HORIZONTAL;case"vertical":return ku.VERTICAL;default:throw new b}}function gC(t,e){if(e)return vC.PM360;if(null==t)return vC.NONE;switch(t){case"":return vC.NONE;case"360":return vC.PM360;case"180":return vC.PM180;default:throw new b("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}r();var qn=function(t){return t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event",t}({});r();var pC="https://content.uplynk.com";function wC(t){if(!t)return!0;const e=!function(t){return zc(t)||lc(t)&&zc(t[0])}(t.sources)||Fn(t.sources),i=!t.ads||yC(t.ads),s=""!==t.poster&&!t.poster;return e&&i&&s}function yC(t){return!t||rl(t)&&0===t.length}function bC(t){if(t&&t.sources)return AC(t.sources)}function AC(t){return Yt(t)?Mu(t):Cn(t)?t.type||t.src&&Mu(t.src):lc(t)&&t.length>0?AC(t[0]):void 0}function SC(t){if(t&&t.sources)return TC(t.sources)}function TC(t){return Yt(t)?t:Cn(t)?t.src:lc(t)&&t.length>0?TC(t[0]):void 0}function kC(t,e,i){return Wc(t)?function(t,e,i){let s=Bo({},HT(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:CT.UPLYNK,id:"",prefix:pC,preplayParameters:{},playbackUrlParameters:{},assetType:qn.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(Yt(t))return t;if(lc(t)&&Yt(t[0]))return t;if(function(t){return V(t)&&Yt(t.userId)&&(lc(t.externalId)||Yt(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return qn.CHANNEL;case"event":return qn.EVENT;default:return qn.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=xc(t.contentProtected));t.assetInfo?s.assetInfo=xc(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=ze(t.prefix)||pC);return s.ping=function(t,e){let i=!1,s=!1,n=!1;e?(i=!!bd(e.adImpressions)&&e.adImpressions,s=!!bd(e.freeWheelVideoViews)&&e.freeWheelVideoViews,n=bd(e.linearAdData)?e.linearAdData:t!==qn.ASSET):t!==qn.ASSET&&(n=!0);return{adImpressions:i,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=xC(s,t),s=IC(s,e,i),s=RC(s,t,i),s}(t,e,i):VT(t)?function(t,e,i){var s;return Bo({},EC(t,e,i),{integration:CT.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,e,i):FT(t)?function(t,e,i){return Bo({},EC(t,e,i),{type:"theolive"})}(t,e,i):Lc(t)?function(t,e,i){return Bo({},EC(t,e,i),{type:nl.QC,src:t.src,streamAccountId:t.streamAccountId,subscriberToken:t.subscriberToken,connectOptions:DC(t.connectOptions),apiUrl:t.apiUrl})}(t,e,i):EC(t,e,i)}function EC(t,e,i){let s=ZT();const n=e&&(e.contentProtection||e.drm);if(Yt(t)){if(s.src=t,s.type=Mu(t),n){const t=VI(n);s.contentProtection=dT(t)}}else if(Cn(t)||Xc(t)||Lc(t)){s.src=t.src,s.type=t.type||Mu(t.src),s.isAdvertisement=t.isAdvertisement;const e=GT(t)?t.hesp:void 0;void 0!==e&&(s.hesp=e);VT(t)&&(s.integration=t.integration);const i=VI(t.contentProtection||t.drm||n);s.contentProtection=dT(i),t.ssai&&(s.ssai=wS(t.ssai)),s=xC(s,t)}return s=IC(s,e,i),s=RC(s,t,i),s}function xC(t,e){var i,s;e.useCredentials?t.crossOrigin=yh.ZC:e.crossOrigin&&(t.crossOrigin=BT(e.crossOrigin)),Yt(e.timeServer)&&(t.timeServer=e.timeServer),e.liveOffset&&(t.liveOffset=e.liveOffset),e.hlsDateRange&&(t.hlsDateRange=e.hlsDateRange),e.lowLatency&&(t.lowLatency=xc(e.lowLatency)),e.useNativePlayback&&(t.useNativePlayback=xc(e.useNativePlayback)),e.useManagedMediaSource&&(t.useManagedMediaSource=xc(e.useManagedMediaSource)),e.dash&&(t.dash=fT(e.dash)),e.hls&&(t.hls=_T(e.hls)),e.lcevc&&(t.lcevc=xc(e.lcevc)),e.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=YT(e.ignoreEmbeddedTextTrackTypes)),e.latencyConfiguration&&(t.latencyConfiguration=IT(e.latencyConfiguration)),t.seamlessSwitchStrategy=PT(null!=(s=e.seamlessSwitchStrategy)?s:null==(i=e.dash)?void 0:i.useSeamlessPeriodSwitch);const n=vi(e.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=vi(e.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function RC(t,e,i){return t.abr=pT(Yt(e)?void 0:gT(e.abr),null==i?void 0:i.abr),t}function IC(t,e,i){var s;const n=e&&e.timeServer;return i&&i.liveOffset&&!ji(t.liveOffset)&&(t.liveOffset=i.liveOffset),i&&i.hlsDateRange&&!ji(t.hlsDateRange)&&(t.hlsDateRange=i.hlsDateRange),t.crossOrigin===yh.gE&&(null==e||null==(s=e.vr)?void 0:s[360])&&(t.crossOrigin=yh.HC),t.useCredentials=t.crossOrigin===yh.ZC,Yt(n)&&!t.timeServer&&(t.timeServer=n),t}function CC(t){const e={src:""};if(t&&t.src){if(e.src=ze(t.src),"default"in t&&(e.default=xc(t.default)),e.kind=function(t){const e=String(t||"").toLowerCase();return fx(e)?e:e?"metadata":"subtitles"}(t.kind),MT(t.format)&&(e.format=t.format),"srclang"in t){const i=t.srclang;"string"==typeof i&&""!==i&&(e.srclang=i)}if("label"in t){const i=t.label;"string"==typeof i&&""!==i&&(e.label=i)}}return e}function PC(t,e){if(V(t))try{return e.xZ(t).Xz(t)}catch(t){return}}function DC(t){if(null==t)return t;if(!V(t))throw new g("connectOptions must be an object");return t}function NC(t,e,i){if(void 0===i&&(i=Ih.Fg),wC(t))return{sources:[ZT()]};const s=nu(t);if(s.sources=function(t,e,i){if(zc(t))return[kC(t,e,i)];if(lc(t)&&zc(t[0])){const s=[];for(const n of t)s.push(kC(n,e,i));return s}return[ZT()]}(s.sources,s,e),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,e){if(!lc(t))return[];const i=[];for(let s of t)s=PC(s,e),s&&i.push(s);return i}(s.ads,i);0===t.length?delete s.ads:s.ads=t}const n=!Fn(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!lc(t))return[];const e=[];for(let i of t)i=CC(i),""!==i.src&&e.push(i);return e}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=ze(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const e=t||{};return e.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(e.stereoMode),{panoramaMode:gC(e.panoramaMode,Boolean(e[360])),stereoMode:e.stereoMode?mC(e.stereoMode):ku.NONE,nativeVR:Boolean(e.nativeVR)}}(s.vr));if("analytics"in s||(null==e?void 0:e.analytics)){const t=zT(s.analytics),i=e&&e.analytics||[];s.analytics=function(t,e){const i=nu(t);for(const s of e){const e=!t.some((t=>t.integration===s.integration));e&&s.integration!==_C&&i.push(s)}return i}(t,i)}return"mutedAutoplay"in s&&(s.mutedAutoplay=tk(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=no(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}r(),r(),r();var Ao=function(){function t(t){this.zz=t}return t.prototype.qz=function(t){var e,i,s,n,r,o,h,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.zz.charAt(64);for(e=0;e<t.length;e+=4)i=(h=this.zz.indexOf(t.charAt(e))<<18|this.zz.indexOf(t.charAt(e+1))<<12|(r=this.zz.indexOf(t.charAt(e+2)))<<6|(o=this.zz.indexOf(t.charAt(e+3))))>>>16&255,s=h>>>8&255,n=255&h,a[e/4]=String.fromCharCode(i,s,n),64===o&&(a[e/4]=String.fromCharCode(i,s)),64===r&&(a[e/4]=String.fromCharCode(i));return a.join("")},t.prototype.Yz=function(t,e){var i,s,n,r,o,h,a,u=[],c="";if((h=t.length%3)>0)for(;h++<3;)c+=this.zz.charAt(64),t+="\0";for(h=0;h<t.length;h+=3)s=(i=t.charCodeAt(h)<<16|t.charCodeAt(h+1)<<8|t.charCodeAt(h+2))>>18&63,n=i>>12&63,r=i>>6&63,o=63&i,u[h/3]=this.zz.charAt(s)+this.zz.charAt(n)+this.zz.charAt(r)+this.zz.charAt(o);return a=(a=u.join("")).slice(0,a.length-c.length),e||(a+=c),a},t.ph=new t(function(){var t,e,i,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(e=r[t],i=0;i<e.length;i+=1)s=e.charAt(i),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.Kz=new t(function(t){return t.qz("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.ph)),t}();function MC(t){return"string"==typeof t}function LC(t){return"number"==typeof t}r(),r(),r();var BC={}.toString;var le,OC=Array.isArray||function(t){return"[object Array]"===BC.call(t)};function FC(t,e){return OC(t)&&t.every(e)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(le||(le={}));var VC,WC=w.keys(le).map((function(t){return le[t]}));function UC(t){return-1!==WC.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads",t.MILLICAST="millicast"}(VC||(VC={}));var GC,HC=w.keys(VC).map((function(t){return VC[t]}));function ZC(t){return-1!==HC.indexOf(t)}function XC(t){try{var e=Ao.Kz.qz(t),i=JSON.parse(e);if(!function(t,e){var i,s=function(t){return"object"==typeof t&&null!==t}(t),n=MC(t.key),r=MC(t.customer_id),o=LC(t.generation_date),h=LC(t.expiration_date),a=FC(t.domains_page,MC),u=FC(t.domains_source,MC),c=FC(t.sdks,e?UC:MC),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?i=FC(t.features,e?ZC:MC):(i=!0,t.features=[]);if(!(s&&n&&r&&o&&h&&a&&u&&c&&l&&i))return!1;return!0}(i,!1))throw new g("The provided license could not be decoded correctly.");return i}catch(t){throw new g("The provided license could not be decoded correctly.")}}function zC(){return GC||(GC={Gu:s.location.href,jz:s.parent&&s.parent!==s,Qz:YC()}),GC}var qC=["http:","https:","ftp:","ws:","wss:"];function YC(){var t,e;try{var i;if(null==(i=s)?void 0:i.top)return s.top.location.href}catch(t){}return null==(e=s)||null==(t=e.document)?void 0:t.referrer}var $i=function(t){return t[t.Jz=0]="Jz",t[t.$z=1]="$z",t[t.tq=2]="tq",t}({}),KC=class{constructor(t,e,i,s,n=[],r="",o=Date.now(),h=[],a=!0){this.iq=t,this.nq=e,this.rq=i,this.oq=s,this.hq=n,this.aq=r,this.uq=o,this.cq=h,this.lq=a}},jC=function(t){return t.$z="expired",t.dq="invaliddomain",t.fq="invalidsource",t._q="invalidfeature",t.da="error",t}({}),QC=class t{vq(t,e){let i=[];zc(t.sources)?i=[t.sources]:lc(t.sources)&&(i=t.sources),this.mq(t,i,e),this.gq(i,e)}mq(t,e,i){if(wC(t)||0===i.rq.length||sP(i.rq))return;if(!e.every((t=>this.pq(t,i)))){const t="invalidsource",e=hP.wq(t);throw new A($C(t),e)}}gq(t,e){for(const i of t)Cn(i)&&GT(i)&&!i.bypassLicense&&this.yq([VC.HESP],e)}bq(e){return this.Aq(e.cq)&&this.Sq(e)?t.Tq(e.oq)?0:1:2}yq(t,e){for(const i of t)if(!ms(e.hq,i)){const t="invalidfeature",e=hP.kq(t,i);throw new A($C(t),e)}}Aq(t){return 0===t.length||t.some((t=>this.Eq(t)))}Eq(t){return"web"===function(t){switch(t){case le.ANDROID:return Xt.Tv;case le.ANDROIDTV:case le.FIRETV:return Xt.Ev;case le.IOS:return Xt.xv;case le.TVOS:return Xt.Rv;case le.CHROMECAST:case le.CHROMECASTCAF:return Xt.Iv;case le.THEOLIVEWEB:return Xt.Cv;default:return Xt.Sv}}(t)}static Tq(t){const e=Number(new Date);return!!t&&e<=t}Sq(t){return!(this.xq&&0!==t.nq.length&&!sP(t.nq))||!!(this.xq&&this.Rq(t.nq)&&this.Iq(t.nq))}Rq(t){return nP(this.kA.Gu,t)}Iq(t){if(!this.kA.jz)return!0;if(this.Cq)return!0;const e=this.Pq();return!!e&&nP(e,t)}Pq(){if(!this.kA.jz)return;const t=Ll.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.kA.Qz?this.kA.Qz:void 0}pq(e,i){return!!t.Dq(e,i.rq)}static Dq(t,e){return nP(this.Nq(t),e)}static Nq(t){return Yt(t)?t:Cn(t)&&t.src||""}constructor(t,e,i){this.Cq=t,this.Mq=e,this.kA=i,this.xq=oP(this.kA)}},JC=class{bq(t){return 0}vq(t,e){}yq(t,e){}};function $C(t){switch(t){case"invaliddomain":return Qa.LICENSE_INVALID_DOMAIN;case"invalidsource":return Qa.LICENSE_INVALID_SOURCE;case"expired":return Qa.LICENSE_EXPIRED;case"invalidfeature":return Qa.LICENSE_INVALID_FEATURE;case"error":return Qa.LICENSE_ERROR}}var tP="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",eP=yl((()=>{const t="\\.",e="(\\*|"+tP+")";return new RegExp("ip-range\\("+e+t+e+t+e+t+e+"\\)")}));function iP(t,e){let i=t,s=e;if(!i)return!1;if(s=s.trim(),"*"===s)return!0;if(i=i.replace(/\.+$/,""),s===i)return!0;if(Sl(s,"ip-range(")){const t="\\.",e=s.match(eP()),n=t=>"*"===t?"("+tP+")":t;if(null!==e&&5===e.length){const s=new RegExp("^"+e[1]+t+n(e[2])+t+n(e[3])+t+n(e[4])+"$");return null!==i.match(s)}}return s="."+s,-1!==i.indexOf(s,i.length-s.length)}function sP(t){return t.some((t=>"*"===t))}function nP(t,e){const i=Ms.Nh(t);if(!rP(i))return!0;for(const s of e){if(iP(i.hostname,s))return!0;if(iP(jb(t),s))return!0}return!1}function rP(t){return-1!==qC.indexOf(t.protocol)}function oP(t){const e=Ms.Nh(t.Gu);return rP(e)&&!function(t){return iP(t.hostname,"localhost")}(e)&&!function(t){return iP(t.hostname,"theoplayer.doubleclick.net")}(e)}var hP=class{static kq(t,e){return"The requested feature '"+e+"' is not available with the license for this player."}static wq(t){return"invaliddomain"===t?this.Lq:"invalidsource"===t?this.Bq:"expired"===t?this.Oq:"invalidfeature"===t?this.Fq:this.Vq}};hP.Vq="The license for this player is invalid.",hP.Oq="The usage license for this video player has expired.",hP.Lq="The current domain is incompatible with the license for this player.",hP.Bq="The provided video source is incompatible with the license for this player.",hP.Fq="The requested feature is not available with the license for this player.",r(),r();var wh=function(t){return t[t.Wq=1]="Wq",t[t.Uq=4]="Uq",t[t.Gq=5]="Gq",t[t.Hq=9]="Hq",t}({});function aP(t){const e=[t.eL,t.Zq,t.Xq];switch(t.Zq){case 1:e.push(t.OC);break;case 4:e.push(t.SR),e.push(t.lt);break;case 5:e.push(t.lt);break;case 9:e.push(t.Aw)}return e}r();var jt=new Array(256);for(let t=0;t<256;t+=1)jt[t]=(t<16?"0":"")+t.toString(16);function uP(){const t=Da(),e=(4294967296*_.random()|0)+t&3029421624,i=(4294967296*_.random()|0)+t&3595553209,s=(4294967296*_.random()|0)+t&1130486254,n=(4294967296*_.random()|0)+t&1284287105;return jt[255&e]+jt[e>>>8&255]+jt[e>>>16&255]+jt[e>>>24&255]+"-"+jt[255&i]+jt[i>>>8&255]+"-"+jt[i>>>16&15|64]+jt[i>>>24&255]+"-"+jt[63&s|128]+jt[s>>>8&255]+"-"+jt[s>>>16&255]+jt[s>>>24&255]+jt[255&n]+jt[n>>>8&255]+jt[n>>>16&255]+jt[n>>>24&255]}function cP(t){return ip(t.replace(/-/g,""))}function lP(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*_.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function dP(){return Ms.Vg()}r(),r(),r();var fP,_P="theoplayer-session-id";function vP(){if(!fP){const t=vb.Nb(_P);t?fP=t:(fP=uP(),vb.Mb(_P,fP))}return fP}r(),r();var mP=/[^\x00-\x7E]/g;function gP(t){return"\\u"+Jh(t.charCodeAt(0).toString(16),4,"0")}var pP="https://license.theoplayer.com";function wP(t){const e=function(t){const e=[];return function(t,e,i){return JSON.stringify(t,e,i).replace(mP,gP)}(t,((t,i)=>{if(V(i)){if(-1!==e.indexOf(i))return null;e.push(i)}return i}))}(function(t){return[t.zq,t.KS,t.iq,t.YD,t.qq,t.Yq,t.Kq.map(aP)]}(t));return Ao.Kz.Yz(e)}var yP=class{get Kq(){return this.Yf}jq(){return Boolean(this.qq)}get qq(){return this.Qq}async Jq(t){if(!(await this.tY.$q()).lq)return;const e={Zq:wh.Wq,Xq:Da(),OC:t};await this.OX(e)}async eY(t){if(!(await this.tY.$q()).lq)return;const e={Zq:wh.Hq,Xq:Da(),Aw:t};await this.OX(e)}async iY(t,e){const i={Zq:wh.Uq,Xq:Da(),SR:e,lt:t};await this.OX(i)}async sY(t){const e={Zq:wh.Gq,Xq:Da(),lt:t};await this.OX(e)}async OX(t){const e=await this.tY.$q();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.nY.Yz(e.iq)&&t.Zq!==wh.Gq||(t.Zq===wh.Wq?this.rY():this.jq()||this.rY(),t.eL=this.iS++,this.Yf.push(t),!function(t){return t===wh.Wq||t===wh.Gq}(t.Zq)?this.Yf.length>this.oY&&await this.hY():await this.aY())}async aY(t){for(void 0===t&&(t=!1);this.Yf.length>0;)await this.hY(t)}async uY(t){const e=await this.tY.$q();return{zq:Da(),KS:vP(),iq:this.nY.Yz(e.iq)||"dev",YD:this.xS,qq:this.Qq,Yq:this.cY,Kq:t}}async hY(t){void 0===t&&(t=!1);const e=this.Yf.splice(0,this.lY),i=await this.uY(e);t?this.PE(i):this.dY(i),this.fY=dP()}async dY(t){const e=wP(t),i=new ke({Gu:pP,Nk:e,kE:!1,Yk:Rr.Ak,jk:{"Content-Type":lu.EU},bE:4e3,yE:xe.POST});try{const t=await this.lW.Kk(i);await t.Ck()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+e}}PE(t){const e=wP(t);this.lW.PE({Gu:pP,Nk:e,Dk:lu.EU})}rY(){this.jq()&&this.aY(),this.Qq=uP(),this.iS=0}gn(){xo._Y(this.vY),m(this.mY),this.aY()}constructor(t,e,i,s=Ao.ph,n=0,r=1){this.xS=t,this.lW=e,this.tY=i,this.nY=s,this.oY=n,this.lY=r,this.Yf=[],this.Qq=null,this.fY=0,this.cY="unknown",this.iS=0,this.gY=()=>{dP()-this.fY>6e4&&this.aY()},this.vY=()=>{this.aY(!0)},xo.pY(this.vY),this.mY=p(this.gY,6e4)}};r(),r(),r();var bP=0;var AP=v,it=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,uo=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;it&&uo||(it=function(t){const e=dP(),i=_.max(0,16-(e-bP)),s=u((()=>t(e+i)),i);return bP=e+i,s},uo=AP),it=it.bind(self),uo=uo.bind(self);var SP=Z.Hm||Z.iu&&Z.rg<13;function TP(t,e,i){const s=t.getImageData(e,i,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var kP=class{get ka(){var t;return null!=(t=this.su)?t:this.su=function(t){return{drawImage(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return t.wY(e,...s)},texImage2D:(e,i,s,n,r,o)=>t.yY(e,i,s,n,r,o),requestVideoFrameCallback:e=>t.bY(e),cancelVideoFrameCallback:e=>t.AY(e)}}(this)}wY(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const n=this.SY;return void 0!==n&&(t.drawImage(n,...i),!0)}yY(t,e,i,s,n,r){let o=this.SY;return void 0!==o&&(SP&&(o=this.TY(o)),t.texImage2D(e,i,s,n,r,o),!0)}bY(t){const e=this.kY++,i=this.EY(t,e);return this.xY.set(e,{RY:t,IY:i}),e}AY(t){const e=this.xY.get(t);void 0!==e&&(this.xY.delete(t),e.IY())}EY(t,e){const i=this.SY;if(void 0===i)return It;if(i instanceof HTMLVideoElement&&i.requestVideoFrameCallback){const s=i.requestVideoFrameCallback(((i,s)=>{this.xY.delete(e),t(i,s)}));return()=>i.cancelVideoFrameCallback(s)}{let i;const s=n=>{this.CY()?(this.xY.delete(e),this.PY=!1,t(n,void 0)):i=it(s)};return i=it(s),()=>uo(i)}}CY(){return(!this.t.qR||this.PY)&&!this.t.hI&&this.t.sI>=Ht.tO}TY(t){let e=this.DY;void 0===e&&(e=h.createElement("canvas"),this.DY=e);const i=e.getContext("2d"),s=this.t,n=s.fI,r=s.cI,o=e.width,a=e.height;i.clearRect(0,0,e.width,e.height),o===n&&a===r||(e.width=n,e.height=r),i.drawImage(t,0,0,n,r);let u=!1;return n>0&&TP(i,n-1,0)&&(e.width=o,u=!0),r>0&&TP(i,0,r-1)&&(e.height=a,u=!0),u&&i.drawImage(t,0,0,n,r),e}gn(){this.xY.forEach((t=>t.IY())),this.xY.clear(),this.t.fn(Ti.Ny,this.NY),this.t.fn(Ti.Ky,this.MY),this.SY=void 0,this.DY=void 0}constructor(t){this.SY=void 0,this.su=void 0,this.DY=void 0,this.xY=ea(),this.kY=1,this.PY=!0,this.MY=()=>{this.PY=!0},this.NY=()=>{this.SY=this.t.AI(),this.xY.forEach(((t,e)=>{t.IY(),t.IY=this.EY(t.RY,e)}))},this.t=t,this.t.yn(Ti.Ny,this.NY),this.t.yn(Ti.Ky,this.MY),this.NY()}};r(),r(),r();var Ka=function(t){return t.pn="dimensionchange",t}({}),EP=class extends pe{constructor(t,e){super(Ka.pn),this.width=t,this.height=e}};r(),r();var xP,RP=class{constructor(t,e){this.we=t,this.RY=e}},IP=class extends RP{get Pu(){return this.LY}get Mu(){return this.BY}gn(){this.OY.disconnect()}constructor(t,e){super(t,e),this.LY=0,this.BY=0,this.FY=t=>{if(t.length>0){const e=t[t.length-1].contentRect;this.BY=e.width,this.LY=e.height,this.RY(this.BY,this.LY)}},this.OY=new s.ResizeObserver(this.FY),this.OY.observe(this.we)}};r(),r();var CP=["Webkit","Moz","O","ms"],PP=(()=>{let t=!1;try{if(void 0!==s&&"function"==typeof s.addEventListener){const e=w.defineProperty({},"passive",{get(){t=!0}});s.addEventListener("testPassiveEventSupport",It,e),s.removeEventListener("testPassiveEventSupport",It,e)}}catch(t){}return t})(),DP=xu();function NP(t){return DP.has(t)||DP.set(t,function(t){const e=(xP||(xP=s&&s.document&&s.document.createElement("span")),xP);if(!e||!e.style)return t;if(void 0!==e.style[t])return t;const i=t.charAt(0).toUpperCase()+t.slice(1);for(const t of CP){const s=t+i;if(void 0!==e.style[s])return s}return t}(t)),DP.get(t)}function MP(t){const e=t.style;e.position="absolute",e.left="0",e.right="0",e.bottom="0",e.top="0",e.overflow="scroll",e.zIndex="-1",e.visibility="hidden"}function LP(t){const e=t.style;e.position="absolute",e.left="0",e.top="0",e[NP("transition")]="0s"}var BP=class extends RP{gn(){uo(this.VY),this.VY=0,this.WY.removeEventListener("scroll",this.UY),this.GY.removeEventListener("scroll",this.UY),Gt(this.HY),s&&s.removeEventListener("resize",this.ZY)}get Pu(){return this.we.getBoundingClientRect().height||this.LY||0}get Mu(){return this.we.getBoundingClientRect().width||this.BY||0}constructor(t,e,i){super(t,e),this.VY=0,this.BY=NaN,this.LY=NaN,this.XY=void 0,this.er=()=>{const t=1e5;this.zY.style.width=t+"px",this.zY.style.height=t+"px",this.WY.scrollLeft=t,this.WY.scrollTop=t,this.GY.scrollLeft=t,this.GY.scrollTop=t,0===this.GY.scrollTop&&it(this.er)},this.qY=()=>{const t=this.Mu,e=this.Pu;this.RY(t,e),this.BY=t,this.LY=e,this.er(),this.VY=0},this.UY=()=>{if(this.VY)return;const t=this.Mu,e=this.Pu;t===this.BY&&e===this.LY||(this.VY=it(this.qY))},this.ZY=()=>{this.XY||(this.XY=u(this.YY,66))},this.YY=()=>{this.XY=void 0,this.KY()},this.KY=()=>{this.UY()};const n=function(t,e){return s.getComputedStyle(t,void 0).getPropertyValue(e)||t.style[e]}(t,"position");i||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.HY=r,this.WY=h.createElement("div"),this.zY=h.createElement("div"),this.GY=h.createElement("div"),this.jY=h.createElement("div"),MP(this.WY),MP(this.GY),LP(this.zY),function(t){LP(t),t.style.width="200%",t.style.height="200%"}(this.jY),r.appendChild(this.WY),r.appendChild(this.GY),this.WY.appendChild(this.zY),this.GY.appendChild(this.jY),t.appendChild(r),this.WY.addEventListener("scroll",this.UY),this.GY.addEventListener("scroll",this.UY),s&&s.addEventListener("resize",this.ZY),this.UY()}},OP=class extends Co{bn(t){this.OY||("function"==typeof s.ResizeObserver?this.OY=new IP(this.we,this.FY):this.OY=new BP(this.we,this.FY,t))}gn(){this.$o(),this.OY&&(this.OY.gn(),this.OY=void 0)}get Pu(){return this.OY?this.OY.Pu:0}get Mu(){return this.OY?this.OY.Mu:0}constructor(t){super(),this.OY=void 0,this.FY=(t,e)=>{this.wo(new EP(t,e))},this.we=t}};r(),r();var FP=class extends pe{constructor(){super(rh.la)}};r();var ao=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let e of t)if(e[1]in h)return{QY:e[0],Ko:e[1],JY:e[2],$Y:e[3],Qe:e[4],tK:e[5]}}();r();var VP=class extends pe{constructor(){super(rh.ma)}},WP=class t extends Co{static oa(t){return Boolean(ao&&h[ao.$Y]&&ao.QY in t)}fo(){const t=this.we[ao.QY]();t&&t.then?t.then(this.eK,this.iK):(h.removeEventListener(ao.tK,this.iK),h.addEventListener(ao.tK,this.iK))}_o(){const t=h[ao.Ko]();t&&t.then?t.then(this.eK,this.iK):(h.removeEventListener(ao.tK,this.iK),h.addEventListener(ao.tK,this.iK))}sK(){const t=this.cs,e=this.we===h[ao.JY];this.cs=e,t!==e&&this.wo(new FP)}nK(){this.wo(new NI)}gn(){this.$o(),h.removeEventListener(ao.Qe,this.eK),h.removeEventListener(ao.tK,this.iK)}constructor(e){super(),this.cs=!1,this.eK=()=>this.sK(),this.iK=()=>this.nK(),this.we=e,this.ha=t.oa(e),h.addEventListener(ao.Qe,this.eK),this.sK()}},UP=class t extends Co{static oa(t){return Z.iu&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}fo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("fullscreen")?Z.iu?requestAnimationFrame((()=>this.we.webkitSetPresentationMode("fullscreen"))):this.we.webkitSetPresentationMode("fullscreen"):this.we.webkitEnterFullscreen()}_o(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("inline")?this.we.webkitSetPresentationMode("inline"):this.we.webkitExitFullscreen()}sK(){const t=this.cs;let e;e=this.we.webkitPresentationMode?"fullscreen"===this.we.webkitPresentationMode:Boolean(this.we.webkitDisplayingFullscreen),this.cs=e,t!==e&&this.wo(new FP)}gn(){this.$o(),this.we.removeEventListener("webkitbeginfullscreen",this.eK),this.we.removeEventListener("webkitendfullscreen",this.eK),this.we.removeEventListener("webkitpresentationmodechanged",this.eK)}constructor(e){super(),this.cs=!1,this.eK=()=>this.sK(),this.we=e,this.ha=t.oa(e),this.we.addEventListener("webkitbeginfullscreen",this.eK),this.we.addEventListener("webkitendfullscreen",this.eK),this.we.addEventListener("webkitpresentationmodechanged",this.eK),this.sK()}},GP=class extends Co{get ha(){return!!this.rK&&this.rK.ha}get cs(){return this.oK}fo(){this.rK?this.rK.fo():this.wo(new NI)}_o(){for(const t of this.hK)t.cs&&t._o()}aK(t){this.rK=t}uK(t){this.hK.push(t),t.yn(rh.la,this.sK),t.yn(rh.da,this.Ds),this.sK()}cK(t){we(this.hK,t),t.fn(rh.la,this.sK),t.fn(rh.da,this.Ds)}lK(){for(const t of this.hK)if(t.cs)return!0;return!1}er(){this.rK=void 0,this.oK=!1;const t=this.hK.slice();for(const e of t)this.cK(e),e.gn();this.sK()}gn(){this.$o(),this.er()}constructor(...t){super(...t),this.hK=[],this.rK=void 0,this.oK=!1,this.sK=()=>{const t=this.oK,e=this.lK();t!==e&&(this.oK=e,this.wo(new FP))}}},HP=class extends Co{get ha(){return!!this.dK&&this.fK.ha}get cs(){return this.fK.cs}fo(){this.dK&&this.fK.fo()}_o(){this.fK._o()}_K(){this.fK.yn([rh.la,rh.ma],this.sK),this.fK.yn(rh.da,this.Ds)}vK(){this.fK.fn([rh.la,rh.ma],this.sK),this.fK.fn(rh.da,this.Ds)}tr(){const t=this.fK,e=this.t.bI();if(t===e)return;this.fa=!0;const i=this.cs,s=this.ha;i&&this._o(),this.vK(),this.fK=e,this._K(),i&&!this.cs&&this.ha?this.fo():this._o(),this.fa=!1,s!==this.ha&&this.wo(new VP),i!==this.cs&&this.wo(new FP)}gn(){this.$o(),this.vK(),this.t.fn(Ti.Py,this.mK)}constructor(t,e){super(),this.fa=!1,this.mK=()=>this.tr(),this.sK=t=>{this.fa||this.wo(t)},this.t=t,this.dK=e,this.fK=new N,this._K(),this.t.yn(Ti.Py,this.mK),this.tr()}};r(),r(),r();var ZP=function(t){return t.MODE_CHANGE="presentationmodechange",t.ERROR="error",t}({}),XP=class extends pe{constructor(t){super(ZP.MODE_CHANGE),this.presentationMode=t}};r(),r();var zP=class extends Co{nu(t){for(const e of this.Yf)t.yn(e,this.gK);this.pK.push(t)}wK(t){for(const e of this.Yf)t.fn(e,this.gK);this.pK.push(t)}gn(){this.$o();for(const t of this.pK)this.wK(t);En(this.pK)}constructor(t,e=!1,i){super(i),this.pK=[],this.yK=t=>{li((()=>{this.Ds(t)}))},this.Yf=t,this.gK=e?this.yK:this.Ds}},Ju=class extends sn{nu(t){t.iy(this.bK),this.pK.push(t)}wK(t){t._y(this.bK),we(this.pK,t)}gn(){this.$o();for(const t of this.pK)t._y(this.bK);En(this.pK)}constructor(t,e=!1){super(t),this.pK=[],this.yK=t=>{li((()=>{this.Ds(t)}))},this.bK=e?this.yK:this.Ds}};r();var qP=class extends Ds{get error(){return this.errorObject.message}ba(){return this}constructor(t){super(ZP.ERROR),this.errorObject=t}};r();var YP=class extends A{constructor(t,e,i){super(t,e,i)}},KP=class extends sn{get ka(){return this.su||(this.su=this.ba()),this.su}ba(){return function(t){let e,i={get currentMode(){return t.Lo()},requestMode(e){const i=nk(e);i&&t.zo(i)},supportsMode(e){const i=nk(e);return!!i&&t.qo(i)},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new Ju(i,!0),e.nu(t),i}(this)}zo(t){this.Go!==t&&(this.Go=t,this.ia=!0,this.Xo(t))}Lo(){return this.Go}qo(t){switch(t){case Iu.NATIVE_PICTURE_IN_PICTURE:return this.Zo.oO;case Iu.FULLSCREEN:return this.sa.ha;case Iu.INLINE:return!0}return!1}Xo(t){switch(this.Qo.Yw(),t){case Iu.FULLSCREEN:ah(this.Qo.Jo((t=>this.AK(t))));break;case Iu.NATIVE_PICTURE_IN_PICTURE:ah(this.Qo.Jo((t=>this.SK(t))));break;case Iu.INLINE:ah(this.Qo.Jo((t=>this.TK(t))))}}async AK(t){J(t),await this.Zo._o().catch(It),J(t);try{await this.kK(),this.wo(new XP(this.Go))}catch(e){const i=new YP(Qa.FULLSCREEN_ERROR,"Failed to enter fullscreen.");throw this.wo(new qP(i)),J(t),this.zo(Iu.INLINE),i}finally{this.ia=!1}}async SK(t){J(t),await this.Ko().catch(It),J(t);try{await this.Zo.fo(),this.wo(new XP(this.Go))}catch(e){const i=new YP(Qa.PICTURE_IN_PICTURE_ERROR,"Failed to enter native picture-in-picture.");throw this.wo(new qP(i)),J(t),this.zo(Iu.INLINE),i}finally{this.ia=!1}}async TK(t){J(t),await this.Ko().catch(It),J(t),await this.Zo._o().catch(It),this.wo(new XP(this.Go)),this.ia=!1}async kK(){if(this.sa.cs)return;const t=this.sa.vy([rh.la,rh.da]);if(this.sa.fo(),await t,!this.sa.cs)throw new g("Failed to enter fullscreen.")}async Ko(){if(!this.sa.cs)return;const t=this.sa.vy([rh.la,rh.da]);if(this.sa._o(),await t,this.sa.cs)throw new g("Failed to exit fullscreen.")}wi(){this.ia||(this.Go!==Iu.FULLSCREEN||this.sa.cs?this.Go!==Iu.FULLSCREEN&&this.sa.cs&&this.zo(Iu.FULLSCREEN):this.zo(Iu.INLINE))}gn(){this.sa.fn(rh.la,this.sK),this.sa.fn(rh.da,this.nK),this.Zo.fn(To.sO,this.EK),this.Zo.fn(To.nO,this.EK),this.Zo.fn(To.da,this.xK),this.$o()}constructor(t,e){super(),this.Go=Iu.INLINE,this.ia=!1,this.Qo=new ju,this.su=void 0,this.sK=()=>{this.wi()},this.nK=()=>{this.ia||(this.wo(new Ga(new A(Qa.FULLSCREEN_ERROR,"Failed to enter fullscreen."))),this.wi())},this.EK=()=>{this.ia||(this.Go!==Iu.NATIVE_PICTURE_IN_PICTURE||this.Zo.rO?this.Go!==Iu.NATIVE_PICTURE_IN_PICTURE&&this.Zo.rO&&this.zo(Iu.NATIVE_PICTURE_IN_PICTURE):this.zo(Iu.INLINE))},this.xK=()=>{this.ia||(this.wo(new qP(new YP(Qa.PICTURE_IN_PICTURE_ERROR,"Unexpected native picture-in-picture error."))),this.EK())},this.sa=t,this.Zo=e,this.sa.yn(rh.la,this.sK),this.sa.yn(rh.da,this.nK),this.Zo.yn(To.sO,this.EK),this.Zo.yn(To.nO,this.EK),this.Zo.yn(To.da,this.xK)}};function jP(t){let e;return{get url(){return t.Gu},get method(){return t.yE},get headers(){return e||(e=t.jk.Sk()),e},get body(){return t.Nk},get useCredentials(){return t.kE},get type(){return t.Aw},get subType(){return t.SE},get mediaType(){return t.TE},get responseType(){return t.Yk}}}function QP(t){switch(t.toLowerCase()){case"arraybuffer":return Rr.wk;case"json":return Rr.yk;case"stream":return Rr.bk;default:return Rr.Ak}}function JP(t){switch(t.toUpperCase()){case"POST":return xe.POST;case"PUT":return xe.PUT;case"DELETE":return xe.DELETE;case"HEAD":return xe.HEAD;case"OPTIONS":return xe.OPTIONS;default:return xe.GET}}function $P(t){switch(t.toLowerCase()){case"manifest":return Wr.eE;case"segment":return Wr.iE;case"preload-hint":return Wr.sE;case"content-protection":return Wr.nE;default:return Wr.tE}}function tD(t){switch(t.toLowerCase()){case"initialization-segment":return $h.rE;case"fairplay-license":return $h.oE;case"fairplay-certificate":return $h.hE;case"widevine-license":return $h.aE;case"widevine-certificate":return $h.uE;case"playready-license":return $h.cE;case"clearkey-license":return $h.lE;case"aes128-key":return $h.dE;default:return $h.tE}}function eD(t){switch(t.toLowerCase()){case"audio":return Ca.fE;case"video":return Ca._E;case"text":return Ca.Ak;case"image":return Ca.vE;default:return Ca.tE}}r(),r(),r(),r();var iD=class{get RK(){return this.IK.Vb}get ka(){return this.su||(this.su=this.CK()),this.su}get PK(){return this.DK}get NK(){return!this.DK}get MK(){return this.LK>0}get ZE(){return this.XE}OD(){this.DK=!0,this.IK.Ob(null)}BK(){this.IK.Fb(new Ab(this.FK))}VK(t){if(!this.NK)throw new b("Cannot respond more than once");if(!V(t))throw new b("Expected valid response");this.XE=this.WK(t),this.OD()}UK(){try{const t=this.GK(this.ka);t?this.HK(t):this.MK||this.PK||this.OD()}catch(t){this.FK.push(t),this.BK()}}HK(t){if(this.PK)throw new g("Request has been redirected or a response already exists");if(yt(t))this.ZK(t);else{if("function"!=typeof t)throw new b("Expected promise or function");{const e=new os,i=t=>{t?e.Fb(t):e.Ob(void 0)};try{const s=t(i);yt(s)&&e.Kw(s)}catch(t){e.Fb(t)}this.ZK(e.Vb)}}}async ZK(t){try{this.LK++,await t,this.LK--,this.MK||this.PK||(this.FK.length?this.BK():this.OD())}catch(t){this.LK--,this.FK.push(t),this.MK||this.PK||this.BK()}}constructor(t,e){this.XK=t,this.GK=e,this.IK=new os,this.FK=[],this.su=void 0,this.DK=!1,this.XE=void 0,this.LK=0}},sD=class t extends iD{get Nk(){return this.zK}get jk(){return this.XK.jk}get Kk(){return this.XK.Kk}get ZE(){return this.XE}get zk(){return this.XK.zk}get Qk(){return this.XK.Qk}get Gu(){return this.XK.$k}static qK(t,e,i){const s=void 0===t.body?i:t.body;return new Zb({qk:s,Kk:e.Kk,Yk:e.Kk.Yk,jk:t.headers,zk:t.status,Qk:t.statusText,$k:t.url,Jk:!0},e)}CK(){return function(t){let e;const i=jP(t.Kk);return{get closed(){return!t.NK},get request(){return i},get url(){return t.Gu},get status(){return t.zk},get statusText(){return t.Qk},get headers(){return e||(e=t.jk.Sk()),e},get body(){return t.Nk},respondWith:e=>t.VK(e),waitUntil:e=>t.HK(e)}}(this)}WK(e){return t.qK(e,this.XK,this.zK)}constructor(t,e,i){super(t,e),this.zK=i,this.UK()}};r();var nD=class extends iD{get Nk(){return this.XK.Nk}get NK(){return this.YK&&!this.DK}get jk(){return this.XK.jk}get yE(){return this.XK.yE}get KK(){return this.jK}get ZE(){return this.XE}get Yk(){return this.XK.Yk}get bE(){return this.XK.bE}get AE(){return this.XK.AE}get Vw(){return this.XK.Vw}get Aw(){return this.XK.Aw}get SE(){return this.XK.SE}get TE(){return this.XK.TE}get Gu(){return this.XK.Gu}get kE(){return this.XK.kE}get RE(){return this.XK.RE}get EE(){return this.XK.EE}get xE(){return this.XK.xE}get CE(){return this.XK.CE}CK(){return function(t){let e;return{get url(){return t.Gu},get method(){return t.yE},get headers(){return e||(e=t.jk.Sk()),e},get body(){return t.Nk},get closed(){return!t.NK},get useCredentials(){return t.kE},get type(){return t.Aw},get subType(){return t.SE},get mediaType(){return t.TE},get responseType(){return t.Yk},redirect:e=>t.QK(e),respondWith:e=>t.VK(e),waitUntil:e=>t.HK(e)}}(this)}WK(t){const e=this.XK.Nk,i=new Zb({qk:e,jk:{},Kk:this.XK,$k:this.XK.Gu,Yk:this.XK.Yk,zk:200,Qk:"OK"});return sD.qK(t,i,e)}QK(t){if(!this.NK)throw new b("Cannot redirect, already redirected or has a response");let e;e=Yt(t)?{url:t}:t,this.jK=function(t,e){return new ke({Gu:void 0===t.url?e.Gu:t.url,yE:void 0!==t.method?JP(t.method):void 0,jk:t.headers,Nk:t.body,kE:t.useCredentials,Aw:void 0!==t.type?$P(t.type):void 0,SE:void 0!==t.subType?tD(t.subType):void 0,TE:void 0!==t.mediaType?eD(t.mediaType):void 0,Yk:void 0!==t.responseType?QP(t.responseType):void 0},e)}(e,this.XK),this.OD()}constructor(t,e,i){super(t,e),this.jK=void 0,this.YK=i,this.UK()}};var rD=class extends ph{JK(t){this.$K.JK(t)}tj(t){this.$K.tj(t)}ej(t){this.$K.ej(t)}GX(t){this.$K.GX(t)}zX(t){this.$K.zX(t)}constructor(t,e=!0){const i=new oD(t);super(i,e),this.$K=i}},oD=class{async Kk(t){let e;try{e=await this.ij(t,t.Vw)}catch(e){if(e instanceof Jb)return await this.sj(e,t.Vw);throw e}if(e=await this.nj(e,t.Vw),_h(e))return e;throw new Mn(e)}PE(t){return this.BE.PE(t)}async ij(t,e){J(e);let i,s=t;for(const t of this.rj.slice()){J(e);const n=new nD(s,t,!i);if(!n.PK)try{await n.RK}catch(t){0;continue}n.KK&&!i?s=n.KK:n.ZE&&!i&&(i=n.ZE)}return i||this.BE.Kk(s)}async sj(t,e){let i;if(t instanceof Mn)i=t.ZE;else{const e=t.Kk;i=new Zb({qk:null,Kk:e,Yk:e.Yk,zk:0,Qk:""})}const s=await this.nj(i,e);if(s===i)throw t;if(_h(s))return s;throw new Mn(s)}async nj(t,e){let i=t;for(const t of this.hj.slice()){J(e);const s=await Promise.resolve(i.xb().qk(e)),n=new sD(i,t,s);if(!n.PK)try{await n.RK}catch(t){0;continue}i=n.ZE||i}return i}JK(t){this.rj.unshift(t)}tj(t){this.rj.push(t)}ej(t){we(this.rj,t)}GX(t){this.hj.unshift(t)}zX(t){we(this.hj,t)}gn(){this.BE.gn(),En(this.rj),En(this.hj)}constructor(t){this.rj=[],this.hj=[],this.BE=t}};r();var hD=class{get ka(){return this.su||(this.su=function(t){return{addRequestInterceptor(e){t.JK(e)},removeRequestInterceptor(e){t.ej(e)},addResponseInterceptor(e){t.GX(e)},removeResponseInterceptor(e){t.zX(e)}}}(this)),this.su}JK(t){this.lW.JK(t)}ej(t){this.lW.ej(t)}GX(t){this.lW.GX(t)}zX(t){this.lW.zX(t)}constructor(t){this.lW=t}},aD=class extends Co{get ka(){return this.su||(this.su=function(t){return{get online(){return t.XR},get estimator(){return function(t){return{get bandwidth(){return t.wG},get roundTripTime(){return t.yG}}}(t.aj)},setEstimator(e){t.uj(function(t){if(!t)return;return{get wG(){return JA(t.bandwidth)},get yG(){return JA(t.roundTripTime)},bG:e=>function(t){if(!t)return;return{cj(e){t.markRequestStart(e)},lj(e){t.markResponseStart(e)},dj(e,i){t.markResponseData(e,i)},_j(e){t.markResponseEnd(e)}}}(t.createMeasurer(jP(e)))}}(e))},addRequestInterceptor(e){t.JK(e)},removeRequestInterceptor(e){t.ej(e)},addResponseInterceptor(e){t.GX(e)},removeResponseInterceptor(e){t.zX(e)},addEventListener(e,i){t.yn(e,i)},removeEventListener(e,i){t.fn(e,i)}}}(this)),this.su}get XR(){return this.vj.XR}get aj(){return this.vZ.aj}uj(t){this.vZ.uj(t)}JK(t){this.lW.JK(t)}ej(t){this.lW.ej(t)}GX(t){this.lW.GX(t)}zX(t){this.lW.zX(t)}gn(){this.$o(),this.vj.fn(Ti.Hy,this.mj),this.vj.fn(Ti.Gy,this.gj)}constructor(t,e,i){super(e),this.vj=t,this.lW=e,this.vZ=i,this.mj=t=>{this.wo(t)},this.gj=t=>{this.wo(t)},this.vj.yn(Ti.Hy,this.mj),this.vj.yn(Ti.Gy,this.gj)}};r(),r(),r();var kt=function(t){return t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth",t}({});r();function uD(t,e,i,s,n,r){const o=[];let h=t-_.max(r,1),a=t+n;if(e&&i){const t=Vs(i,1,5),s=e-t;h=_.min(h,s);const n=e+i+t;a=_.max(a,n)}0!==h&&s.nB(0,h)&&o.push([0,h]);return s.nB(a,1/0)&&o.push([a,1/0]),o}function cD(t){return t instanceof g&&"QuotaExceededError"===t.name}r();var lD={type:kt.BANDWIDTH};function dD(t){const e=nu(lD);return Yt(t)?e.type=fD(t):V(t)&&function(t){switch(t){case kt.PERFORMANCE:case kt.QUALITY:case kt.BANDWIDTH:return!0;default:return!1}}(t.type)&&(e.type=fD(t.type)),V(t)&&V(t.metadata)&&(e.metadata=function(t){const e={},i=no(t.bitrate);return S(i)||(e.bitrate=i),e}(t.metadata)),e}function fD(t){switch(t){case"bandwidth":return kt.BANDWIDTH;case"performance":return kt.PERFORMANCE;case"quality":return kt.QUALITY}}r();var _D=class extends pe{constructor(t){super("pj"),this.wj=t}};r();var vD=class extends pe{constructor(t){super("yj"),this.bj=t}};r();var mD=class extends pe{constructor(t){super("Aj"),this.Sj=t}},gD=class extends Co{Tj(t){this.Ej=t}get xj(){switch(this.Rj.type){case kt.PERFORMANCE:return 0;case kt.QUALITY:return 1/0;case kt.BANDWIDTH:return this.Rj.metadata&&void 0!==this.Rj.metadata.bitrate?this.Rj.metadata.bitrate:wl.Fg.aG();default:return wl.Fg.aG()}}get ka(){return this.su}get bj(){return this.Rj}set bj(t){this.Rj=t,this.wo(new vD(t))}get wj(){return this.Ij}set wj(t){this.Ij=t,this.wo(new _D(t))}get Cj(){return _.min(this.Ij,this.Pj)}get Sj(){return this.Dj}set Sj(t){this.Dj=t,this.wo(new mD(t))}get Nj(){return this.Pj}get aj(){var t;return null!=(t=this.Mj)?t:this.Ej.$G}uj(t){this.Mj=t}Lj(t){let e=_.min(t,.8*this.Pj);if(e=_.max(10,e),this.Pj===e)return!1;const i=this.Cj;this.Pj=e;const s=this.Cj;return s!==i&&this.wo(new _D(s)),!0}get Bj(){return this.Oj}set Bj(t){this.Oj=t}constructor(...t){super(...t),this.su=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.bj)},set strategy(e){t.bj=dD(e)},get targetBuffer(){return t.wj},set targetBuffer(e){const i=no(e);S(i)||(t.wj=i)},get bufferLookbackWindow(){return t.Sj},set bufferLookbackWindow(e){const i=no(e);S(i)||(t.Sj=i<=0?30:i)},get maxBufferLength(){return t.Nj},get clearBufferWhenSettingTargetQuality(){return t.Bj},set clearBufferWhenSettingTargetQuality(e){t.Bj=xc(e)}}}(this),this.Rj=lD,this.Ij=20,this.Dj=30,this.Pj=1/0,this.Oj=!1,this.Mj=void 0}};r(),r();var pD=class extends Ds{ba(){return new wD}constructor(){super("$I")}},wD=class extends pe{constructor(){super("change")}};r(),r();var yD=class extends Co{gn(){this.$o();for(const t of this.Yf)this.Fj.fn(t,this.Vj)}constructor(t,e,i){super(i),this.Vj=t=>{FA(t)&&li((()=>{this.wo(t.ka)}))},this.Fj=t,this.Yf=e;for(const t of this.Yf)this.Fj.yn(t,this.Vj)}},rt=class extends sn{gn(){this.$o(),this.Fj._y(this.Vj)}constructor(t,e){super(e),this.Vj=t=>{FA(t)&&li((()=>{this.wo(t.ka)}))},this.Fj=t,this.Fj.iy(this.Vj)}};var bD=class extends sn{get FO(){return this.YO}set FO(t){if(this.VO<=t)throw new g("Start time of a clip should be smaller than the end time.");this.YO!==t&&(this.YO=t,this.wo(new pD))}get VO(){return this.QO}set VO(t){if(t<=this.FO)throw new g("End time of a clip should be larger than the start time.");this.QO!==t&&(this.QO=t,this.wo(new pD))}get ka(){return this.su||(this.su=function(t){let e,i={get startTime(){return t.FO},set startTime(e){t.FO=e},get endTime(){return t.VO},set endTime(e){t.VO=e},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new rt(t,i),i}(this)),this.su}er(){0===this.YO&&this.QO===1/0||(this.YO=0,this.QO=1/0,this.wo(new pD))}Wj(){return new se([this.FO,this.VO],[!0,!0])}constructor(...t){super(...t),this.YO=0,this.QO=1/0}};r();var AD=class t extends Dc{ER(t,e){const i=this.Uj.Wj().qL(t);super.ER(i,e),this.Gj()}IR(){return super.IR()||this.Hj}get Zj(){return this.oI().length?this.oI():this.Uj.Wj().ks()}oI(){return se.xn(super.oI()).Sn(this.Uj.Wj()).ks()}kI(){this.IR()?this.ER(this.Zj.start(0)):this.Xj(),super.kI(),this.Gj()}async xa(t,e){J(e),this.Hj=!1,this.Uj.er(),await super.xa(t,e)}gn(){return this.Uj.fn("$I",this.zj),this.vR.fn(Ti.sb,this.jc),this.qj(),super.gn()}MI(t){switch(t.type){case Ti.jy:return this.wo(t),this.Yj(),!0;case Ti.Ky:case Ti.Ry:return this.wo(t),this.Kj(),!0;case Ti.Cy:if(this.jj)return!0}return super.MI(t)}get jj(){return this.Uj.VO<this.ct}qj(){this.Qj&&(uo(this.Qj),this.Qj=void 0)}Gj(){const e=this.SR,i=this.jj&&e>=this.Uj.VO-t.od;this.Hj&&!i?(this.Hj=!1,this.qR&&this.kI()):this.Hj||!i||this.hI||this.Jj||(this.Hj=!0,this.wo(new Te(e)),this.TI())}Xj(){if(this.ct===1/0)return;const e=this.Zj,i=se.xn(e).qL(this.SR);xs(this.SR,i,t.od)||this.ER(i)}constructor(e,i){super(e),this.Hj=!1,this.Qj=void 0,this.Jj=!1,this.zj=()=>{this.Xj(),this.Gj()},this.jc=()=>{this.qj(),this.Gj();this.jj&&this.SR>=this.Uj.VO-t.$j&&!this.RR&&(this.Qj=it(this.jc))},this.Yj=()=>{this.Jj=!0},this.Kj=()=>{this.Jj&&(this.Jj=!1,this.Gj())},this.Uj=i,this.Uj.yn("$I",this.zj),this.vR.yn(Ti.sb,this.jc)}};AD.$j=1,AD.od=.001,r();var SD=class{get tQ(){return this.eQ}set tQ(t){this.eQ=t}constructor(){this.eQ=!1}};r();var TD=class extends Dc{IR(){return!this.eQ.tQ&&super.IR()}TI(){this.iQ=!0,super.TI()}kI(){this.iQ=!1,super.kI()}MI(t){if(this.eQ.tQ)switch(t.type){case Ti.Cy:return this.SR=0,this.iQ||(this.hI?this.sQ=!0:this.kI()),!0;case Ti.Ky:this.sQ&&(this.sQ=!1,this.kI());break;case Ti.Zy:if(this.sQ||super.IR())return!0}return super.MI(t)}constructor(t,e){super(t),this.sQ=!1,this.iQ=!1,this.eQ=e}};r(),r();var kD=class{get ka(){return this.su}get fO(){return this.ea.WR.fO}get vO(){return this.ea.WR.vO}get dO(){return this.ea.WR.dO}get nQ(){throw new g("Not implemented")}get rQ(){throw new g("Not implemented")}get mO(){return this.ea.WR.mO}get _O(){return this.ea.WR._O}get gO(){return this.ea.WR.gO}constructor(t){this.ea=t,this.su=function(t){return{get currentBandwidthEstimate(){return t.vO},get corruptedVideoFrames(){return t.fO},get droppedVideoFrames(){return t.dO},get totalVideoFrames(){return t._O},get totalBytesLoaded(){return t.mO},get bufferedSegments(){return t.gO}}}(this)}};function ED(t){if(!t||!Ur(t))return{dO:0,fO:0,_O:0,vO:0,mO:0,gO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const e=t.getVideoPlaybackQuality();return{dO:e.droppedVideoFrames,fO:e.corruptedVideoFrames||0,_O:e.totalVideoFrames}}return{dO:t.webkitDroppedFrameCount||0,fO:0,_O:t.webkitDecodedFrameCount||0}}r(),r();var xD=class extends Ds{ba(){return new RD}constructor(){super("oQ")}},RD=class extends pe{constructor(){super("castingchange")}};r();var ID=class extends Co{get hQ(){var t,e;return(null==(t=this.aQ)?void 0:t.hQ)||(null==(e=this.uQ)?void 0:e.hQ)||!1}get cQ(){return this.aQ}get lQ(){return this.uQ}dQ(t){this.aQ=t,this.fQ(t)}_Q(t){this.uQ=t,this.fQ(t)}fQ(t){t.yn("statechange",this.vQ)}mQ(t){t.fn("statechange",this.vQ)}get ka(){return this.su||(this.su=function(t){let e;const i={get casting(){return t.hQ},get airplay(){var e;return null==(e=t.cQ)?void 0:e.ka},get chromecast(){var e;return null==(e=t.lQ)?void 0:e.ka},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new yD(t,["oQ"],i),i}(this)),this.su}gn(){this.$o(),this.aQ&&(this.mQ(this.aQ),this.aQ=void 0),this.uQ&&(this.mQ(this.uQ),this.uQ=void 0)}constructor(...t){super(...t),this.aQ=void 0,this.uQ=void 0,this.gQ=!1,this.su=void 0,this.vQ=()=>{const t=this.gQ,e=this.hQ;t!==e&&(this.gQ=e,this.wo(new xD))}}};r(),r();var du=class{static async pQ(t,e){try{const i=new ke({Gu:t,Yk:Rr.Ak,yE:xe.GET}),s=await e.Kk(i);return(await s.qk()).trim()}catch(t){return void Je(t)}}static wQ(t){try{const e=XC(t);return new KC(e.key,e.domains_page,e.domains_source,e.expiration_date,e.features,e.customer_id,e.generation_date,e.sdks,e.send_impression)}catch(t){throw new A(Qa.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static yQ(t){void 0===t&&(t=Ao.ph),Ms.Op("The baked-in license is used. Please update the configuration with your license.");const e=t.qz("F2b-iL'[FL[S"),i=JSON.parse('["F$(:_L50F|aY"]').map((e=>t.qz(e))),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((e=>t.qz(e))),n=Number(new Date(Number(t.qz('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map((e=>t.qz(e)));return new KC(e,i,s,n,r)}static convertLicenseToDummyLicense(t){return new KC(t.iq,t.nq,t.rq,864e13,t.hq,t.aq,Date.now(),t.cq,t.lq)}};r();var Su=class t{static pk(){return t.Fg||(t.Fg=CD.pT()?new CD:new _b),t.Fg}static Bb(e){t.pk().Bb(e)}static gk(){t.pk().gk()}static Nb(e){return t.pk().Nb(e)}static Mb(e,i){t.pk().Mb(e,i)}static bQ(e){const i=t.Nb(e);if(void 0!==i)return C(i)}static AQ(e){return"true"===t.Nb(e)}};Su.Fg=void 0;var CD=class extends Su{static pT(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}Bb(t){self.localStorage.removeItem(t)}gk(){self.localStorage.clear()}Nb(t){var e;return null!=(e=self.localStorage.getItem(t))?e:void 0}Mb(t,e){self.localStorage.setItem(t,e)}},PD="https://validate.theoplayer.com/1/",DD=72e5,ND=_.floor(14399999*_.random()-DD),MD="THEOplayer.license",LD=class{async SQ(){const t=await this.TQ(this.kQ.license,this.kQ.licenseUrl);this.tY.EQ(t)}async TQ(t,e){let i,s=e;t?i=du.wQ(t):s||(i=du.yQ()),s||(s=PD+i.iq);const n=this.xQ();let r;if(i&&(r=this.RQ.bq(i),r===$i.Jz)){if(this.IQ(i.oq)&&this.IQ(null==n?void 0:n.oq)){const t=await this.CQ(s);if(t)return t}return i}if(n){if(this.RQ.bq(n)===$i.Jz){if(this.IQ(null==n?void 0:n.oq)){const t=await this.CQ(s);if(t)return t}return n}Su.Bb(MD)}const o=await du.pQ(s,this.lW);let h;if(o){h=du.wQ(o);if(this.RQ.bq(h)===$i.Jz)return Su.Mb(MD,o),h;Su.Bb(MD)}else if(!this.xq&&i&&r===$i.$z&&s===PD+i.iq)return du.convertLicenseToDummyLicense(i);if(!i&&!h)throw new A(Qa.LICENSE_ERROR,"The given license is invalid!");this.DQ(null!=i?i:h,new A(Qa.LICENSE_ERROR,"The given license is invalid!"))}async vq(t){let e=await this.tY.$q();if(this.IQ(e.oq)){var i;const t=null!=(i=this.kQ.licenseUrl)?i:PD+e.iq,s=await this.CQ(t);s&&(this.tY.EQ(s),e=s)}try{const i=this.RQ.bq(e);if(i===$i.tq){const t=jC.dq;throw new A($C(t),hP.wq(t))}if(i===$i.$z){const t=jC.$z;throw new A($C(t),hP.wq(t))}this.RQ.vq(t,e)}catch(t){this.NQ(t)}}async yq(t){const e=await this.tY.$q();try{this.RQ.yq(t,e)}catch(t){this.NQ(t)}}async CQ(t){try{const e=await du.pQ(t,this.lW);if(void 0===e)return;const i=du.wQ(e);return this.RQ.bq(i)===$i.Jz?(Su.Mb(MD,e),i):void 0}catch(t){return}}IQ(t){return!t||Number(new Date)+2592e5+ND>=t}xQ(){const t=Su.Nb(MD);if(t)return du.wQ(t)}DQ(t,e){this.tY.EQ(t),this.NQ(e)}NQ(t){throw Or(t.message),this.MQ.sY(t.message),t}constructor(t,e,i,s,n,r){this.lW=t,this.RQ=e,this.MQ=i,this.tY=s,this.kQ=n,this.kA=r,this.xq=oP(r)}};r();var BD=class{EQ(t){this.LQ=t,this.BQ.Ob()}get OQ(){return this.LQ}async $q(){return this.LQ?Promise.resolve(this.LQ):(await this.BQ.Vb,this.LQ)}constructor(){this.BQ=new os}};r(),r();var OD=class extends Ds{ba(){return new FD}constructor(){super("$I")}},FD=class extends pe{constructor(){super("change")}};function VD(t){let e;const i={get fontFamily(){return t.FQ},set fontFamily(e){t.FQ=e},get fontColor(){return t.VQ},set fontColor(e){t.VQ=e},get fontSize(){return t.WQ},set fontSize(e){t.WQ=e},get backgroundColor(){return t.UQ},set backgroundColor(e){t.UQ=e},get windowColor(){return t.GQ},set windowColor(e){t.GQ=e},get edgeStyle(){return t.HQ},set edgeStyle(e){t.HQ=e},get marginTop(){return t.ZQ},set marginTop(e){t.ZQ=e},get marginBottom(){return t.XQ},set marginBottom(e){t.XQ=e},get marginLeft(){return t.zQ},set marginLeft(e){t.zQ=e},get marginRight(){return t.qQ},set marginRight(e){t.qQ=e},addEventListener(t,i){const s=tS(t,ze);e.yn(s,i)},removeEventListener(t,i){const s=tS(t,ze);e.fn(s,i)}};return e=new hg(i),t.yn(["$I"],(t=>e.wo(t.ka))),i}r();var WD={FQ:void 0,VQ:void 0,WQ:void 0,UQ:void 0,GQ:void 0,HQ:void 0,ZQ:void 0,XQ:void 0,zQ:void 0,qQ:void 0},UD="THEOplayer.textTrackStyle.",GD=class t extends Co{get YQ(){return this.KQ}get FQ(){return this.KQ.FQ}set FQ(t){this.tr({FQ:t})}get VQ(){return this.KQ.VQ}set VQ(t){this.tr({VQ:t})}get WQ(){return this.KQ.WQ}set WQ(t){this.tr({WQ:t})}get UQ(){return this.KQ.UQ}set UQ(t){this.tr({UQ:t})}get GQ(){return this.KQ.GQ}set GQ(t){this.tr({GQ:t})}get HQ(){return this.KQ.HQ}set HQ(t){this.tr({HQ:t})}get ZQ(){return this.KQ.ZQ}set ZQ(t){this.tr({ZQ:t})}get XQ(){return this.KQ.XQ}set XQ(t){this.tr({XQ:t})}get qQ(){return this.KQ.qQ}set qQ(t){this.tr({qQ:t})}get zQ(){return this.KQ.zQ}set zQ(t){this.tr({zQ:t})}get ka(){return this.su||(this.su=VD(this)),this.su}tr(e){this.KQ=Bo({},this.KQ,e),t.jQ(this.KQ),this.wo(new OD)}static QQ(){let t=Bo({},WD);return t.FQ=Su.Nb(UD+"fontFamily")||t.FQ,t.VQ=Su.Nb(UD+"fontColor")||t.VQ,t.WQ=Su.Nb(UD+"fontSize")||t.WQ,t.UQ=Su.Nb(UD+"backgroundColor")||t.UQ,t.GQ=Su.Nb(UD+"windowColor")||t.GQ,t.HQ=Su.Nb(UD+"edgeStyle")||t.HQ,t}static jQ(t){Su.Mb(UD+"fontFamily",t.FQ||""),Su.Mb(UD+"fontColor",t.VQ||""),Su.Mb(UD+"fontSize",t.WQ||""),Su.Mb(UD+"backgroundColor",t.UQ||""),Su.Mb(UD+"windowColor",t.GQ||""),Su.Mb(UD+"edgeStyle",t.HQ||"")}constructor(){super(),this.su=void 0,this.KQ=t.QQ()}};function HD(t,e){var i,s;t.style.marginLeft=(null!=(i=e.zQ)?i:0)+"px",t.style.marginRight=(null!=(s=e.qQ)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}r(),r(),r(),r();var ZD=[Ti.ro,Ti.Zy,tl.VL,Ti.sb,Ti.Xy,Ti.Vy,Ti.jy,Ti.Ky,Ti.Cy,Ti.zy,Ti.ob,Ti.xy,tl.tC,Ti.Yy,yo.da,hh.Iy,hh.Ab,Ti.Sy,Ti.Ay,Ti.hb,Ti.fb,Ti.Ly,Ti.Oy,Ti.Ny,Ti.Py],XD={ZB:!1};function zD(t){return t.bd.Aw===Mr.gW}r();var ue=function(t){return t.JQ="$Q",t}({}),Vo=["$Q"],Ce=function(t){return t[t.tJ=0]="tJ",t[t.bk=1]="bk",t[t.eJ=2]="eJ",t}({});r(),r();var qD=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"],Mo=function(t){return t.iJ="sJ",t.nJ="rJ",t.oJ="hJ",t}({}),YD=class extends Co{get bd(){return this.DT}get YG(){return this.QT}async aJ(t,e){const i=await this.Pw.Cw(t.Sw,e),s=await i.dT();return await this.uJ(s),s}cJ(t){const e=this.hT;return e?0!==t.eH.length&&t.eH.some((t=>t.aT.Sw===e.aT)):0!==this.DT.eH.length?t.eH.some((t=>this.DT.eH.some((e=>t.aT===e.aT)))):0===t.eH.length||!this.lJ}dJ(t){return this.fJ.dJ(t),this.DT=t,Promise.resolve()}_J(t){this.fJ._J(t)}async Hw(){this.$o(),this.QT.removeEventListener("loadedmetadata",this.vJ);for(const t of qD)this.QT.removeEventListener(t,this.mJ);await this.Qo.gn(),this.gJ(),await this.fJ.er(),await this.pJ(void 0)}wJ(t){t!==this.yJ&&(this.yJ=t,t?this.bJ.Ob(void 0):this.bJ=new os)}uJ(t){return this.Qo.Jo((()=>this.pJ(t)))}async pJ(t){if(t&&!this.QT.src&&!this.QT.srcObject)throw new sr(Qa.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.QT.src||this.QT.srcObject))throw new sr(Qa.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.yJ&&await this.bJ.Vb;const e=this.hT;e&&(await e.cT(this.QT),this.hT=void 0),t&&(await t.bn(this.QT),this.hT=t)}xa(t){return this.Qo.Jo((()=>this.AJ(t)))}AJ(t){this.wJ(!1);const e=this.FB.KR;if(Yt(t))this.QT.src=t;else if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&Z.iu&&Z.rg>=17}(this.QT))try{this.QT.srcObject=t}catch(e){this.QT.src=URL.createObjectURL(t)}else this.QT.src=URL.createObjectURL(t);else KD(t)&&(this.QT.srcObject=t);this.FB.KR=e}SJ(t){return this.Qo.Jo((()=>this.TJ(t)))}TJ(t){this.AJ(t),this.QT.load()}gJ(){this.wJ(!1),Ud(this.QT)}async kJ(){this.hT&&await this.hT.er()}constructor(t,e,i,s){super(),this.yJ=!1,this.bJ=new os,this.lJ=!1,this.Qo=new ju,this.hT=void 0,this.vJ=()=>{this.lJ=!0},this.mJ=()=>{this.wJ(!0)},this.DT=t,this.FB=e,this.QT=e.YG,this.fJ=i,this.Pw=s,this.QT.addEventListener("loadedmetadata",this.vJ);for(const t of qD)this.QT.addEventListener(t,this.mJ)}};function KD(t){return"undefined"!=typeof MediaStream&&t instanceof MediaStream}var jD=class extends YD{get gR(){return se.xn(this.QT.buffered)}get ct(){return this.QT.duration}get EJ(){const t=this.ct;if(!isFinite(t))return!1;const e=this.gR;if(0===e.V)return!1;return t-e.jn(e.V-1)<Si}get tI(){return this.QT.preload}set tI(t){this.QT.preload=t}get rI(){return se.xn(this.QT.seekable)}get xJ(){return this.gR}get RJ(){if(Ur(this.QT)&&(this.QT.videoWidth>0||this.QT.videoHeight>0))return this.gR}async Tj(){const t=this.bd;switch(t.sH){case yh.HC:case yh.ZC:this.QT.setAttribute("crossorigin",t.sH);break;case yh.gE:default:this.QT.removeAttribute("crossorigin")}void 0!==t.tI?this.QT.preload=t.tI:this.QT.preload=hl.pG,void 0!==t.nH?this.QT.title=t.nH:Bd(this.QT),t.IJ?await this.SJ(t.IJ):await this.xa(t.OC),this.fJ.Dn(this,t)}cJ(t){return!1}dJ(t){return Promise.resolve(void 0)}CJ(t){return!1}PJ(){return!KD(this.DT.IJ)}async Hw(){Bd(this.QT),await super.Hw()}static DJ(t,e){return!!e.canPlayType&&Boolean(e.canPlayType(t.Dk))}};r();var K=class extends pe{constructor(t){super(Ti.Xy),this.currentTime=t}};r();var Di=class extends pe{constructor(){super(Ti.Vy)}};r(),r();var QD=function(t){return t.NJ="MJ",t}({}),JD=class extends pe{constructor(t){super("MJ"),this.LJ=t}},$D=class extends Co{get BJ(){return this.OJ}FJ(t,e){const i=new se([t,e]);this.OJ=this.OJ.JL(i),this.wo(new JD(i))}VJ(t,e){this.OJ=this.OJ.tB(new se([t,e]))}er(){this.OJ=se.mB()}gn(){this.$o()}constructor(...t){super(...t),this.OJ=se.mB()}};function tN(t,e){return void 0===e&&(e=new Tb({highWaterMark:1/0})),new mh(new eN(t,e),{highWaterMark:0})}r(),r(),r();var eN=class{start(t){this.BQ=t,this.WJ()&&this.UJ()}pull(){this.Yd.length>0?this.GJ():this.HJ=!0,this.WJ()&&this.UJ()}cancel(t){return En(this.Yd),this.Kd=0,this.HJ=!1,this.Bd.cancel(t)}GJ(){if(0===this.Yd.length)return;const t=this.Yd;this.Yd=[],this.Kd=0,this.HJ=!1,this.BQ.enqueue(t)}WJ(){if(this.HJ)return!0;return this.ZJ-this.Kd>0}UJ(){if(this.XJ)return;const t=this.Bd.read().then(this.zJ).catch(this.vx);this.XJ=t;const e=()=>{this.XJ===t&&(this.XJ=void 0)};t.then(e,e)}constructor(t,{size:e=(()=>1),highWaterMark:i=1}){this.Yd=[],this.Kd=0,this.BQ=void 0,this.HJ=!1,this.XJ=void 0,this.zJ=t=>t.done?(this.GJ(),void this.BQ.close()):(this.Yd.push(t.value),this.Kd+=this.qJ(t.value),this.HJ&&this.GJ(),this.WJ()?this.Bd.read().then(this.zJ):void 0),this.vx=t=>{this.GJ(),this.BQ.error(t)},this.Bd=t.getReader(),this.qJ=e,this.ZJ=i}};r(),r(),r(),r();var iN=class{YJ(t){this.KJ.push(t),this.Pb+=t.byteLength}jJ(t){if(this.Pb<=t)return this.QJ();const e=this.KJ;let i=0,s=0;for(;s<e.length&&i+e[s].byteLength<=t;)i+=e[s].byteLength,s++;const n=e.slice(0,s);if(s<e.length&&i<t){const r=t-i;0,n.push(si(e[s],0,r)),i+=r}return{KJ:n,Pb:i}}JJ(t){const e=this.jJ(t);return 1===e.KJ.length?e.KJ[0]:op(e.KJ,e.Pb)}QJ(){return{KJ:this.KJ,Pb:this.Pb}}$J(t){if(this.Pb<=t)return this.t$();const e=this.KJ;let i=0,s=0;for(;s<e.length&&i+e[s].byteLength<=t;)i+=e[s].byteLength,s++;const n=e.splice(0,s);if(e.length>0&&i<t){const s=t-i;0,n.push(si(e[0],0,s)),e[0]=si(e[0],s),i+=s}return this.Pb-=i,{KJ:n,Pb:i}}e$(t){const e=this.$J(t);return 1===e.KJ.length?e.KJ[0]:op(e.KJ,e.Pb)}t$(){const t=this.QJ();return this.KJ=[],this.Pb=0,t}i$(){const t=1===this.KJ.length?this.KJ[0]:op(this.KJ,this.Pb);return this.KJ=[],this.Pb=0,t}constructor(){this.KJ=[],this.Pb=0}},po=class{s$(t,e){}n$(){}r$(t){this.Yd.YJ(t),this.o$(!1)}h$(){this.o$(!0)}a$(){return 0!==this.Ba||0!==this.Yd.Pb}o$(t){for(;0!==this.Yd.Pb;){if(!t&&this.u$>this.Yd.Pb)return;switch(this.Ba){case 0:this.c$(t);break;case 1:this.l$(t);break;case 2:this.d$(t)}}}f$(){this.Ba=0,this.u$=8}c$(t){const e=ra(this.Yd.JJ(this.u$)),i=new Ri,s=Mi.GD(e,i);if(!s.OD)return this.u$=s.ZD,void(t&&this.u$>this.Yd.Pb&&this._$(this.Yd.Pb));const n=s.HD.Aw;let r=s.HD.Pb;0===r&&(r=1/0),this.s$(n,r),this.v$(n)?this.m$(r):this._$(r)}m$(t){this.Ba=1,this.u$=t}l$(t){const e=ra(this.Yd.e$(this.u$)),i=new Ri,s=Mi.FD(e,i,!t);if(!s.OD)throw new ZS(i.ec);this.n$(),this.g$(s.VD),this.f$()}_$(t){this.Ba=2,this.u$=0,this.p$=t}d$(t){const e=this.Yd.$J(this.p$);this.p$-=e.Pb;for(const t of e.KJ)this.w$(t);(0===this.p$||t&&this.p$===1/0)&&(this.n$(),this.f$())}constructor(){this.Yd=new iN,this.Ba=0,this.u$=0,this.p$=0,this.f$()}};function sN(t){return t instanceof qw}function nN(t){return t instanceof Xw}function rN(t){return t instanceof Gw||t instanceof Hw}function oN(t){return t instanceof _w}function hN(t){return t instanceof qp}function aN(t){return t instanceof pc}function uN(t){return t instanceof Mw}function cN(t){return t instanceof sy}function lN(t){return t instanceof Eh}function dN(t){return t instanceof Jw}function fN(t){return t instanceof ty}function _N(t,e){const i=Fo(t.boxes,dN);if(i&&i.flags.baseDataOffsetPresent)i.baseDataOffset=i.baseDataOffset.add(e);else for(const i of t.boxes)i instanceof ty&&i.flags.dataOffsetPresent&&(i.dataOffset=i.dataOffset+e)}r();var vN=class extends po{start(t){this.BQ=t}transform(t){this.r$(t)}flush(){this.h$()}v$(t){return t===Tt.vP||t===Tt.nD||t===Tt._D}g$(t){const e=this.y$(t);this.BQ.enqueue(e)}w$(t){this.BQ.enqueue(t)}y$(t){const e=Rh(t.qk.qk);switch(t.Aw){case"moov":return this.b$(e);case"sidx":return this.A$(e);case"moof":return this.S$(e)}return e}get T$(){if(void 0===this.k$)throw new g("Expected to have found a movie header timescale.");return this.k$}E$(t){const e=this.x$.get(t);if(void 0===e)throw new g("Expected to have found a media header timescale for track ID "+t+".");return e}b$(t){const e=by(t);for(let t=0;t<e.boxes.length;t++){const i=e.boxes[t];i instanceof Fw?e.boxes[t]=this.R$(i):i instanceof Vw?e.boxes[t]=this.I$(i):i instanceof Xw&&this.C$(i)}for(const t of e.boxes)t instanceof pc&&this.P$(t);return e.serialize().join()}R$(t){this.k$=t.timescale;const e=Yi(vo.fromNumber(t.duration,!0),this.T$,this.D$);return 0!==e.getHighBits()?this.I$(function(t){return new Vw({creation:vo.fromNumber(t.creationTime,!0),modification:vo.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:vo.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.D$,t.duration=e.toInt(),t)}I$(t){return this.k$=t.timescale,t.timescale=this.D$,t.duration=Yi(t.duration,this.T$,this.D$),t}C$(t){let e;for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof Gw?(e=s.trackId,t.boxes[i]=this.N$(s)):s instanceof Hw?(e=s.trackId,t.boxes[i]=this.M$(s)):s instanceof _w?this.L$(s,e):s instanceof sw&&this.B$(s)}}N$(t){const e=Yi(vo.fromNumber(t.duration,!0),this.T$,this.D$);return 0!==e.getHighBits()?this.M$(function(t){return new Hw({creation:vo.fromNumber(t.creationTime,!0),modification:vo.fromNumber(t.modificationTime,!0),duration:vo.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=e.toInt(),t)}M$(t){return t.duration=Yi(t.duration,this.T$,this.D$),t}L$(t,e){for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof cw?t.boxes[i]=this.O$(s,e):s instanceof lw&&(t.boxes[i]=this.F$(s,e))}}O$(t,e){this.x$.set(e,t.timescale);const i=Yi(vo.fromNumber(t.duration,!0),t.timescale,this.D$);return 0!==i.getHighBits()?this.F$(function(t){return new lw({creation:vo.fromNumber(t.creationTime,!0),modification:vo.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:vo.fromNumber(t.duration,!0)},t.language,t.flags)}(t),e):(t.timescale=this.D$,t.duration=i.toInt(),t)}F$(t,e){return this.x$.set(e,t.timescale),t.timescale=this.D$,t.duration=Yi(t.duration,t.timescale,this.D$),t}B$(t){for(const e of t.boxes)e instanceof tw?this.V$(e):e instanceof ew&&this.W$(e)}V$(t){for(const e of t.entries)e.mediaTime=gN(e.mediaTime,this.T$,this.D$),e.segmentDuration=gN(e.segmentDuration,this.T$,this.D$)}W$(t){for(const e of t.entries)e.mediaTime=Yi(e.mediaTime,this.T$,this.D$),e.segmentDuration=Yi(e.segmentDuration,this.T$,this.D$)}P$(t){for(let e=0;e<t.boxes.length;e++){const i=t.boxes[e];i instanceof Mw?this.U$(i):i instanceof Pw?t.boxes[e]=this.G$(i):i instanceof Dw&&(t.boxes[e]=this.H$(i))}}U$(t){const e=this.E$(t.trackId);t.defaultSampleDuration=gN(t.defaultSampleDuration,e,this.D$)}G$(t){const e=Yi(vo.fromNumber(t.fragmentDuration,!0),this.T$,this.D$);return 0!==e.getHighBits()?this.H$(function(t){return new Dw(vo.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=e.toInt(),t)}H$(t){return t.fragmentDuration=Yi(t.fragmentDuration,this.T$,this.D$),t}A$(t){let e=Ay(t);return e=e instanceof uy?this.Z$(e):this.X$(e),e.serialize().join()}Z$(t){const e=t.timescale,i=Yi(vo.fromNumber(t.earliestPresentationTime,!0),e,this.D$);if(0!==i.getHighBits())return this.X$(function(t){return new cy(t.referenceId,t.timescale,vo.fromNumber(t.earliestPresentationTime,!0),vo.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.D$,t.earliestPresentationTime=i.toInt();for(const i of t.references)i.subsegmentDuration=gN(i.subsegmentDuration,e,this.D$);return t}X$(t){const e=t.timescale;t.timescale=this.D$,t.earliestPresentationTime=Yi(t.earliestPresentationTime,e,this.D$);for(const i of t.references)i.subsegmentDuration=gN(i.subsegmentDuration,e,this.D$);return t}S$(t){const e=Sy(t),i=e.getSize();for(const t of e.boxes)t instanceof Eh&&this.z$(t);const s=e.getSize();if(s!==i){const t=s-i;for(const i of e.boxes)i instanceof Eh&&_N(i,t)}return e.serialize().join()}z$(t){let e;for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof Jw?(e=this.E$(s.trackId),this.q$(s,e)):s instanceof jw?t.boxes[i]=this.Y$(s,e):s instanceof mc?t.boxes[i]=this.K$(s,e):s instanceof ty&&this.j$(s,e)}}q$(t,e){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=gN(t.defaultSampleDuration,e,this.D$))}Y$(t,e){const i=Yi(vo.fromNumber(t.baseMediaDecodeTime,!0),e,this.D$);return 0!==i.getHighBits()?this.K$(function(t){return new mc(vo.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),e):(t.baseMediaDecodeTime=i.toInt(),t)}K$(t,e){return t.baseMediaDecodeTime=Yi(t.baseMediaDecodeTime,e,this.D$),t}j$(t,e){let i=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=gN(s,e,this.D$);n.duration=t-i,i=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=mN(n.compositionTimeOffset,e,this.D$))}}constructor(t){super(),this.x$=ea(),this.D$=t}};function mN(t,e,i){return vo.fromInt(t,!1).multiply(i).divide(e).toNumber()}function gN(t,e,i){return vo.fromInt(t,!0).multiply(i).divide(e).toNumber()}function Yi(t,e,i){return Pi.xF(t).QF(Pi.RF(i,!0)).iV(Pi.RF(e,!0)).WF()}var pN=class{Q$(t){return t.pipeThrough(new qo(this.J$))}constructor(t){this.J$=new vN(t)}};r(),r();var wN=function(t){return t[t.t0=64]="t0",t[t.e0=103]="e0",t[t.i0=107]="i0",t}({});function yN(t,e,i){const s=oc(t,e);if(s!==i)throw new b("Expected descriptor with tag "+i+", but found "+s)}function bN(t,e){yN(t,e,3);const i=AN(t,e),s=e.ec+i,n=Ei(t,e),r=oc(t,e),o=0!=(64&r),h=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=Ei(t,e)),o){c=jc(t,e,oc(t,e))}h&&(l=jc(t,e,2));const d=function(t,e){yN(t,e,4);const i=AN(t,e),s=e.ec+i,n=oc(t,e),r=oc(t,e),o=r>>2,h=0!=(2&r),a=Mg(t,e,3),u=as(t,e),c=as(t,e);let l;if(e.ec<s){const i=function(t,e){return t.getUint8(e.ec)}(t,e);5===i&&(l=function(t,e){yN(t,e,5);const i=AN(t,e),s=E(t,e,i);return{s0:5,n0:s}}(t,e))}return e.Eb(s),{s0:4,r0:n,o0:o,h0:h,a0:a,u0:u,c0:c,l0:l}}(t,e);return e.Eb(s),{s0:3,o:n,d0:u,Gu:c,f0:a,_0:l,v0:d}}function AN(t,e){let i=0;for(let s=0;s<4;s++){const s=oc(t,e);if(i=i<<7|127&s,!(128&s))break}return i}function SN(t,e){const i=oc(t,e),s=oc(t,e),n=oc(t,e),r=oc(t,e),o=3&oc(t,e),h=31&oc(t,e),a=[];for(let i=0;i<h;i++){const i=Ei(t,e);a.push(E(t,e,i))}const u=oc(t,e),c=[];for(let i=0;i<u;i++){const i=Ei(t,e);c.push(E(t,e,i))}return{m0:i,g0:s,p0:n,w0:r,y0:o,b0:a,A0:c}}function _u(t,e,i){if(i&&e.byte>=i)return;const s=t.Nb(e.byte);return e.byte+=1,s}function TN(t,e){return function(t,e,i){let s=0,n=i;for(;n>0;)n-=1,s=256*s+_u(t,e);return s}(t,e,2)}r(),r(),r(),r(),r(),r();var kN=class t{S0(t){this.T0=this.T0.concat(t.T0),this.k0+=t.V}E0(t,e,i){const s=this.k0,n=i-e;n>0&&(this.T0.push({x0:e,R0:i,I0:n,C0:s,P0:t}),this.k0+=n)}Nb(t){for(const e of this.T0)if(e.C0<=t&&t<e.C0+e.I0)return e.P0[t+e.x0-e.C0]}D0(t,e){let i=e;for(const e of this.T0){const s=e.R0;for(let n=e.x0;n<s;n+=1,i+=1)t[i]=e.P0[n]}return i}get V(){return this.k0}set V(t){const e=this.T0;let i=this.k0-t;if(!(t>=this.k0))if(this.k0=t,0!==t)for(let t=e.length-1;t>=0;t-=1){const s=e[t];if(i<=s.I0)return s.R0-=i,s.I0-=i,void(e.length!==t+1&&(e.length=t+1));i-=s.I0}else e.length=0}get qk(){const t=new Array(this.k0);let e=0;for(const i of this.T0){const s=i.R0;for(let n=i.x0;n<s;n+=1,e+=1)t[e]=i.P0[n]}return t}N0(){const t=new j(this.k0);let e=0;for(const i of this.T0){const s=i.R0;for(let n=i.x0;n<s;n+=1,e+=1)t[e]=i.P0[n]}return t}xb(e){const i=new t;for(const t of this.T0)i.E0(t.P0,t.x0,t.R0);return i.XV=e||Bo({},this.XV),i}constructor(){this.k0=0,this.T0=[],this.XV={}}};r();var EN=[128,64,32,16,8,4,2,1];function Pa(t,e){const i=_.floor(e.bit/8),s=0==(t.Nb(i)&EN[e.bit%8])?0:1;return e.bit+=1,s}function Go(t,e,i){let s=0,n=i;for(;n>0;)n-=1,s=2*s+Pa(t,e);return s}function xN(t,e){let i=0;for(;0===Pa(t,e)&&i<32;)i+=1;return Go(t,e,i)+2**i-1}function RN(t,e){const i=xN(t,e);return 1&i?_.floor((i+1)/2):-_.floor(i/2)}function IN(t,e){const i=[],s={byte:1};let n;do{i.push(PN(t,e,s)),n=e.Nb(s.byte)}while(void 0!==n&&128!==n);return i}function CN(t,e){let i,s=0;do{i=_u(t,e),s+=i}while(255===i);return s}function PN(t,e,i){const s=CN(e,i),n=CN(e,i),r=i.byte,o=r+n;return i.byte=o,{M0:t,L0:s,B0:n,O0:r,F0:o,V0:e}}var DN=function(t){return t[t.W0=1]="W0",t[t.U0=2]="U0",t[t.G0=3]="G0",t[t.H0=4]="H0",t[t.Z0=5]="Z0",t[t.X0=6]="X0",t[t.z0=7]="z0",t[t.q0=8]="q0",t[t.Y0=9]="Y0",t}({}),NN=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function MN(t,e,i){let s=8,n=8;for(let r=0;r<i;r+=1){if(0!==n){n=(s+RN(t,e)+256)%256}s=0===n?s:n}}var LN=class{K0(){const t=this.j0;let e=_.max(0,this.Q0+t.length-2);const i=this.J0,s=i.V;let n=0;for(;e<s;e+=1){const s=i.Nb(e);0===s?n+=1:(3===s&&n>=2&&t.push(e),n=0)}this.Q0=e-t.length}$0(t){const e=this.j0;let i=t;for(const t of e){if(!(t<=i))return i;i+=1}return i}Nb(t){if(!(t>this.J0.V))return t>this.Q0&&this.K0(),this.J0.Nb(this.$0(t))}constructor(t){this.j0=[],this.Q0=0,this.J0=t}};function BN(t){const e=new LN(t);let i,s,n,r,o,h,a=0,u=0,c=0,l=0;const d=e.Nb(1),f={bit:32};if(xN(e,f),100===d||110===d||122===d||144===d){const t=xN(e,f);3===t&&(i=Pa(e,f)),xN(e,f),xN(e,f),Pa(e,f);if(1===Pa(e,f))for(let i=0;i<(3!==t?8:12);i+=1){1===Pa(e,f)&&MN(e,f,i<6?16:64)}}const v=xN(e,f),m=xN(e,f);if(0===m)xN(e,f);else if(1===m){Pa(e,f),RN(e,f),RN(e,f);const t=xN(e,f);for(let i=0;i<t;i+=1)RN(e,f)}xN(e,f),Pa(e,f);const g=xN(e,f),p=xN(e,f),w=Pa(e,f);0===w&&Pa(e,f),Pa(e,f);1===Pa(e,f)&&(a=xN(e,f),u=xN(e,f),c=xN(e,f),l=xN(e,f));if(1===Pa(e,f)){if(1===Pa(e,f)){const t=Go(e,f,8);if(255===t)s=Go(e,f,16),n=Go(e,f,16);else{const e=NN[t];e&&(s=e[0],n=e[1])}}1===Pa(e,f)&&Pa(e,f);if(1===Pa(e,f)){Go(e,f,3),Pa(e,f);1===Pa(e,f)&&(Go(e,f,8),Go(e,f,8),Go(e,f,8))}1===Pa(e,f)&&(xN(e,f),xN(e,f)),r=Pa(e,f),1===r&&(o=Go(e,f,32),h=Go(e,f,32),Pa(e,f))}return{width:_.floor(16*(g+1)-2*a-2*u),height:_.floor((2-w)*(p+1)*16-2*c-2*l),XM:s,zM:n,t1:r?h/(2*o):void 0,e1:i,i1:v}}function ON(t){const e=dn(rr.jD(t),Tt.vP);if(!e)return;const i=e.HD._N,s=[];for(const t of e.Z){const e=t.HD.TN,i=t.yN.HD._N;let h,a,u;for(const e of t.yN.DN.LN.ON.VN){const t=FN(e);var n,r,o;if(t)h=null!=(n=t.s1)?n:h,a=null!=(r=t.n1)?r:a,u=null!=(o=t.o1)?o:u}s.push({TN:e,_N:i,s1:h,n1:a,o1:u})}return{_N:i,Z:s}}function FN(t){let e,i,s;if(t.Aw===Tt.RP){var n;const i=SN(ra(t.pM.qk),new Ri);e=function(t){return"avc1."+VN(t.g0,2)+VN(t.p0,2)+VN(t.w0,2)}(i),s=null==(n=function(t){if(0===t.b0.length)return;const e=t.b0[0],i=new kN;return i.E0(e,0,e.byteLength),BN(i)}(i))?void 0:n.t1}else if(t.Aw===Tt.CP||t.Aw===Tt.PP){const i=function(t,e){const i=e.Cb(),s=jo(t,i,8),n=jo(t,i,2),r=jo(t,i,1),o=jo(t,i,5),h=jo(t,i,32),a=[];for(let e=0;e<6;e++)a.push(jo(t,i,8));const u=jo(t,i,8);i.kb(4);const c=jo(t,i,12);i.kb(6);const l=jo(t,i,2);i.kb(6);const d=jo(t,i,2);i.kb(5);const f=jo(t,i,3);i.kb(5);const _=jo(t,i,3),v=jo(t,i,16),m=jo(t,i,2),g=jo(t,i,3),p=jo(t,i,1),w=jo(t,i,2),y=jo(t,i,8),b=[];for(let e=0;e<y;e++){const e=jo(t,i,1);i.kb(1);const s=jo(t,i,6),n=jo(t,i,16),r=[];for(let e=0;e<n;e++){const e=jo(t,i,16),s=E(t,new Ri(i.ec>>3),e);i.kb(8*e),r.push({h1:e,a1:s})}b.push({u1:e,c1:s,l1:n,d1:r})}return{m0:s,_1:n,v1:r,m1:o,g1:a,w1:u,b1:c,A1:l,S1:h,T1:d,E1:f,R1:_,I1:v,C1:g,P1:p,D1:m,y0:w,N1:y,M1:b}}(ra(t.AM.qk),new Ri);e=function(t,e){let i=t.toString()+".";switch(e._1){case 0:break;case 1:i+="A";break;case 2:i+="B";break;case 3:i+="C";break;default:return}switch(i+=e.m1.toString()+".",i+=function(t){let e=t;return e=e>>>1&1431655765|(1431655765&e)<<1,e=e>>>2&858993459|(858993459&e)<<2,e=e>>>4&252645135|(252645135&e)<<4,e=e>>>8&16711935|(16711935&e)<<8,e=e>>>16|e<<16,e}(e.S1).toString(16)+".",e.v1){case 0:i+="L";break;case 1:i+="H";break;default:return}i+=e.w1.toString();const s=e.g1.reduce(((t,e)=>0===t?e:e+1),0);for(let t=0;t<s;t++)i+="."+e.g1[t].toString(16).toUpperCase();return i}(t.Aw,i)}else if(t.Aw===Tt.UP||t.Aw===Tt.GP||t.Aw===Tt.HP||t.Aw===Tt.ZP){const i=function(t,e){const i=e.Cb(),s=jo(t,i,8),n=jo(t,i,8),r=jo(t,i,7),o=jo(t,i,6),h=Boolean(jo(t,i,1)),a=Boolean(jo(t,i,1)),u=Boolean(jo(t,i,1)),c=jo(t,i,4);return jo(t,i,28),jo(t,i,32),jo(t,i,32),jo(t,i,32),jo(t,i,32),{L1:s,B1:n,O1:r,F1:o,V1:h,W1:a,U1:u,G1:c}}(ra(t.LM.qk),new Ri);e=function(t,e){const i=t.toString(),s=Jh(e.O1.toString(),2,"0"),n=Jh(e.F1.toString(),2,"0");return i+"."+s+"."+n}(t.Aw,i)}else if(t.Aw===Tt.NP){const i=function(t,e){const i=e.Cb(),s=jo(t,i,8);i.kb(24);const n=jo(t,i,8),r=jo(t,i,8),o=jo(t,i,4),h=jo(t,i,3),a=Va(t,i),u=jo(t,i,8),c=jo(t,i,8),l=jo(t,i,8),d=jo(t,i,16),f=new Array(8);for(let e=0;e<d;e++)f[e]=jo(t,i,8);return{m0:s,O1:n,F1:r,H1:o,Z1:h,X1:a,UM:u,GM:c,HM:l,z1:d,q1:f}}(ra(t.TM.qk),new Ri);e=function(t,e){let i=t.toString()+".";return i+="0"+e.O1+".",i+=Jh(""+e.F1,2,"0")+".",i+=Jh(""+e.H1,2,"0")+".",i+=Jh(""+e.Z1,2,"0")+".",i+=Jh(""+e.UM,2,"0")+".",i+=Jh(""+e.GM,2,"0")+".",i+=Jh(""+e.HM,2,"0")+".",i+="0"+e.X1,i}(t.Aw,i)}else if(t.Aw===Tt.LP){const i=function(t,e){const i=e.Cb();i.kb(1);const s=jo(t,i,7),n=jo(t,i,3),r=jo(t,i,5),o=Va(t,i),h=Va(t,i),a=Va(t,i),u=Va(t,i),c=Va(t,i),l=Va(t,i),d=jo(t,i,2);i.kb(3);const f=Va(t,i);let _;return f?_=jo(t,i,4):i.kb(4),{YD:s,Y1:n,K1:r,j1:o,Q1:h,J1:a,t2:u,e2:c,i2:l,s2:d,n2:f,o2:_}}(ra(t.xM.qk),new Ri);e=function(t,e,i){let s=t.toString()+".";if(s+=e.Y1+".",s+=""+Jh(""+e.K1,2,"0"),s+=(0===e.j1?"M":"H")+".",s+=(1===e.J1?12:10)+".",s+=(1===e.Y1?0:e.t2)+".",s+=""+e.e2+e.i2+(1===e.e2&&1===e.i2?e.s2:"0"),i&&i.WM===US.ON_SCREEN_COLOURS){const t=i;s+="."+Jh(""+t.UM,2,"0")+"."+Jh(""+t.GM,2,"0")+"."+Jh(""+t.HM,2,"0")+"."+(t.ZM?1:0)}return s}(t.Aw,i,t.RM)}else if(t.Aw===Tt.KP){i=function(t){const e=t.v0;switch(e.r0){case wN.t0:return function(t){var e;if(!(null==(e=t.l0)?void 0:e.n0))return"mp4a.40";const i=function(t,e){let i=jo(t,e,5);31===i&&(i=32+jo(t,e,6));const s=jo(t,e,4);let n;return 15===s&&(n=jo(t,e,24)),{h2:i,a2:s,u2:n,c2:jo(t,e,4)}}(ra(t.l0.n0),new yg);return"mp4a.40."+i.h2}(e);case wN.e0:return"mp4a.40.2";case wN.i0:return"mp4a.40.34"}}(bN(ra(t.cM.qk),new Ri))}else if(t.Aw===Tt.QP)i="fLaC";else{if(t.Aw!==Tt.zP)return(t.Aw===Tt.sD||t.Aw===Tt.iD)&&t.PM?FN(t.PM):void 0;i="ec-3"}return{s1:e,n1:i,o1:s}}function VN(t,e){const i=t.toString(16);return Jh(i,e,"0")}function WN(t,e){const i=rr.jD(ra(t)),s=function(t,e){let i;for(const n of t.Z){var s;const t=null==(s=n.oL)?void 0:s.oL;if(t){const s=n.HD.TN,r=Fo(e.Z,(t=>t.TN===s)),o=Oo.xF(t,r._N);i&&!o.wF(i)||(i=o)}}return i}(dn(i,Tt.nD),e),n=dn(i,Tt.lD);return{FO:s.dF(),l2:n.qk}}r(),r();var UN=Z.$m,GN=class extends Co{get wj(){return this.Ij}set wj(t){this.Ij=t}get Sj(){return this.Dj}set Sj(t){this.Dj=t}get fa(){return this.d2||this.f2.updating}_2(t,e,i){switch(t.Aw){case Ce.tJ:case Ce.bk:return this.m2((i=>this.g2(t,e,i)),i);case Ce.eJ:throw new g("Opaque segments are not supported on web.")}}w2(t,e){switch(t.Aw){case Ce.tJ:return this.m2((e=>this.b2(t,e)),e);case Ce.bk:throw new g("Streaming initialization segments are not supported on web.");case Ce.eJ:throw new g("Opaque initialization segments are not supported on web.")}}async b2(t,e){this.A2?this.S2=ON(ra(t.qk)):(await this.T2(t,void 0,e),UN&&(this.E2=!1,this.R2=t))}async g2(t,e,i){UN&&this.E2&&this.R2&&await this.b2(this.R2,i);try{if(J(i),this.A2&&this.S2){const n=await async function(t,e){switch(t.Aw){case Ce.tJ:return t;case Ce.bk:{const i=await He(t.qk,e);return J(e),{Aw:Ce.tJ,qk:new j(i)}}case Ce.eJ:throw new g("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,i),r=WN(n.qk,this.S2);var s;t={Aw:Ce.tJ,qk:r.l2},e=Bo({},e,{MV:r.FO+(null!=(s=e.MV)?s:0)})}await this.T2(t,e,i),this.wo(new pe(ue.JQ))}finally{t.Aw===Ce.bk&&t.qk.cancel(new Bu).catch(It)}}async T2(t,e,i){switch(J(i),e&&await this.I2(e),t.Aw){case Ce.tJ:if(this.C2){const e=this.C2.Q$(kb(t.qk));return await this.P2(e,i)}return await this.D2(t.qk);case Ce.bk:if(this.C2){const e=this.C2.Q$(t.qk);return await this.P2(e,i)}return await this.P2(t.qk,i)}}async P2(t,e){const i=this.N2.gR,s=tN(t).getReader();let n=!1;try{for(;;){const t=await ou(s.read(),e);if(t.done){n=!1;break}J(e);const i=Tu(t.value);n=!0,await this.D2(i)}}catch(t){if(s.cancel(t).catch(It),n){await this.M2();const t=this.N2.gR.Sn(i.YL());for(let e=0;e<t.V;e++)await this.L2(t.Cn(e),t.jn(e))}throw t}}B2(t,e){return this.m2((()=>this.O2(t,e)))}async O2(t,e){this.f2.appendWindowStart===t&&this.f2.appendWindowEnd===e||(await this.M2(),this.f2.appendWindowStart=0,this.f2.appendWindowEnd=e,this.f2.appendWindowStart=t)}async I2(t){if(this.f2.timestampOffset!==t.MV)try{this.f2.timestampOffset=t.MV}catch(e){await this.M2(),this.f2.timestampOffset=t.MV}}async D2(t){this.f2.appendBuffer(t),this.F2=!0,await this.V2()}W2(t,e,i){return this.m2((i=>this.L2(t,e,i)),i)}async L2(t,e,i){J(i),this.f2.remove(t,e),await this.V2()}V2(){const t=this.N2.gR;return new Promise(((e,i)=>{let s,n=!1,r=()=>{n=!0},o=()=>{n=!1,s="error"},h=()=>{n=!1,s="aborted"},a=()=>{n=!1,s="sourceclose",u()},u=()=>{c(),n&&!s?(t.oB(this.N2.gR)||this.wo(new pe(ue.JQ)),e()):i(new g(s))},c=()=>{this.f2.removeEventListener("update",r),this.f2.removeEventListener("error",o),this.f2.removeEventListener("abort",h),this.f2.removeEventListener("updateend",u),this.U2.fn(Mo.nJ,a)};this.f2.addEventListener("update",r),this.f2.addEventListener("error",o),this.f2.addEventListener("abort",h),this.f2.addEventListener("updateend",u),Z.Im&&Z.Pm<3&&this.U2.yn(Mo.nJ,a)}))}G2(){return this.m2((()=>this.M2()))}async M2(){if(this.U2.sI===oM.WE){UN&&(this.E2=!0),this.f2.updating&&(this.d2=!0);try{this.f2.abort()}catch(t){0,this.d2=!1}this.fa&&await this.V2().catch(It)}}H2(){return"function"==typeof this.f2.changeType&&!Z.Em}dJ(t){if(this.Z2(),this.U2.sI===oM.X2)return;var e;this.z2=t;const i=null!=(e=this.U2.q2(t.Dk))?e:t.Dk;this.A2=HN(t.Dk,this.Y2),this.H2()&&!lh(this.Y2,i)&&(this.Y2=i,this.f2.changeType(this.Y2))}K2(){this.U2.sI!==oM.Cy||this.j2||this.fa||(this.f2.timestampOffset=this.f2.timestampOffset,this.U2.Q2())}async m2(t,e){this.Z2();const i=new da;i.Kw(this.J2.Vw),e&&i.Kw(e);try{this.j2=t(i.Vw),await this.j2,this.U2.Q2(),this.fa&&await this.V2()}finally{this.j2=void 0,i.Hw()}}Z2(){if(this.j2)throw new g("Internal error")}async Hw(){this.$o(),this.J2.Yw(),this.j2&&(await this.j2.catch(It),this.j2=void 0),this.f2.removeEventListener("updateend",this.t3),this.f2.removeEventListener("bufferedchange",this.e3)}constructor(t,e,i,s,n){var r;if(super(),this.Ij=20,this.Dj=30,this.d2=!1,this.F2=!1,this.j2=void 0,this.J2=new da,this.E2=!1,this.R2=void 0,this.A2=!1,this.S2=void 0,this.t3=()=>{this.d2=!1},this.e3=t=>{t.removedRanges&&this.wo(new pe(ue.JQ))},this.U2=e,this.N2=t,this.f2=i,this.f2.addEventListener("updateend",this.t3),this.f2.addEventListener("bufferedchange",this.e3),this.z2=s,this.Y2=n,this.A2=HN(s.Dk,n),null==(r=e.bd)?void 0:r.hp){var o;const t=null!=(o=e.bd.i3)?o:1e5;this.C2=new pN(t)}}};function HN(t,e){return Sl(t,"audio/mp4")&&Sl(e,"audio/mpeg")}r();var ZN=class{get gR(){if(this.s3.sI===oM.X2)return se.mB();let t=se.xn(this.f2.buffered).Sn(new se([0,1/0]));const e=this.n3;return void 0!==e&&t.V>0&&t.jn(t.V-1)===e&&(t=t.JL(se._B(e))),t}EJ(){return!!this.n3&&this.gR.zL().kr(this.n3)}r3(){const t=this.gR;this.n3=t.V>0?t.jn(t.V-1):0,this.s3.o3()}K2(){this.n3=void 0}constructor(t,e){this.n3=void 0,this.s3=e,this.f2=t}};function XN(t){const e=t.vT("codecs");return e?e.split(",").map((t=>t.trim())):[]}function zN(t,e){return!("opus"===t)&&!("opus"===e)||t===e}function qN(t,e){const i=YN(t)||KN(t),s=YN(e)||KN(e);return!i&&!s||t.split(".")[0]===e.split(".")[0]}function YN(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function KN(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function $n(t,e){if(t===e)return!0;const i=t.split("."),s=e.split("."),n=i[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,e]=i,[,n,r]=s;if(t!==n)return!1;if(Number(e)!==Number(r))return!1}return!0}function jN(t,e,i,s,n,r,o){const h=new ZN(n,t),a=new GN(h,t,n,i,r);return new QN(t,e,i,s,h,a,o)}r();var QN=class extends Co{get gR(){return this.N2.gR}get bd(){return this.DT}get Dk(){return this.ET}get h3(){return this.a3}get u3(){return this.l3.BJ}get wj(){return this.d3.wj}set wj(t){this.d3.wj=t}get Sj(){return this.d3.Sj}set Sj(t){this.d3.Sj=t}get fa(){return this.d3.fa}EJ(){return this.N2.EJ()}r3(){this.N2.r3()}K2(){this.N2.K2(),this.d3.K2()}f3(t,e){this.l3.FJ(t,e)}_3(t,e){this.l3.VJ(t,e)}v3(){return this.d3.G2()}_2(t,e,i){return this.d3._2(t,e,i)}w2(t,e,i){return this.d3.w2(t,i)}B2(t,e){return Z.Im&&Z.Pm<3?this.d3.B2(t,1/0):this.d3.B2(t,e)}async $S(t,e,i){this._3(t,e);const s=this.gR;await this.d3.W2(t,e,i);const n=0!==s.V&&0===this.gR.V;(Z.fg||Z.Nm)&&n&&this.FB.Eb(this.FB.SR)}cJ(t){const e=t.Dk;if(this.ET===e)return!0;const i=this.m3.get(e);if(void 0!==i)return i;const s=this.g3(t);return this.m3.set(e,s),s}g3(t){const e=this.U2.q2(t.Dk);if(void 0===e)return!1;const i=Dy(this.ET),s=Dy(e),n=XN(i),r=XN(s);if(this.d3.H2()){if(!function(t,e){return $m(t,e,qN)}(n,r))return!1;if(Z.vg&&!function(t,e){return $m(t,e,zN)}(n,r))return!1}else{if(i.Aw!==s.Aw)return!1;if(!function(t,e){return $m(t,e,$n)}(n,r))return!1}return!0}async dJ(t){const e=t.Dk;this.ET!==e&&(this.m3.clear(),this.d3.dJ(t),this.ET=e),this.DT=t,this.U2.w3()}async Hw(){this.m3.clear(),this.$o(),this.l3.gn();try{this.d3.fn(ue.JQ,this.Ds),await this.d3.Hw()}catch(t){}}constructor(t,e,i,s,n,r,o){super(),this.m3=xu(),this.U2=t,this.DT=i,this.ET=i.Dk,this.a3=s,this.FB=e,this.N2=n,this.d3=r,this.l3=o,this.d3.yn(ue.JQ,this.Ds)}};r();var wo=class{y3(){let t=this.Cn,e=this.jn;if(this.b3||this.A3){const i=.001*(Ms.Vg()-this.S3);this.b3&&(t+=i),this.A3&&(e+=i)}return se.vB(t,e)}constructor(t,e,i=!1,s=!1){this.Cn=t,this.jn=e,this.b3=i,this.A3=s,this.S3=Ms.Vg()}};r(),r();var JN=.5,$N=[Ti.ro,Ti.Zy,Ti.jy,Ti.Ky,Ti.Ly,Ti.Oy,Ti.Cy,Ti.zy,tl.tC,yo.da],tM=class{T3(t){this.E3.push(t),t.yn(QD.NJ,this.x3)}get BJ(){return this.E3.reduce(((t,e)=>t.JL(e.BJ)),se.mB())}gn(){this.R3(),this.I3.fn(tl.tC,this.C3),this.FB.fn(Ti.Xy,this.C3),this.FB.fn($N,this.P3),this.E3.forEach((t=>t.fn(QD.NJ,this.x3))),this.D3(),this.N3=!0}CJ(t){if(this.FB.RR)return!1;if(0!==this.M3)return!1;const e=this.N2.gR,i=e.eB(t);if(i>=0&&t+JN<e.jn(i))return!1;const s=i>=0?i+1:e.cB(t);if(s<0||s>=e.V)return!1;const n=e.Cn(s);if(se.vB(t,n).tB(this.BJ).fB>1)return!1;if(0===t&&!this.FB.hI)return this.L3(t,n,2e3),!0;if(Ms.eR)return this.L3(t,n,250),!0;return!(_.abs(n-t)<=.001)&&(this.B3(n),!0)}L3(t,e,i){this.D3(),this.O3=t,this.FB.yn(Ti.jy,this.F3),this.M3=Ms.Ug((()=>{this.O3===this.FB.SR&&this.B3(e),this.D3()}),i)}D3(){0!==this.M3&&(this.FB.fn(Ti.jy,this.F3),Ms.Wg(this.M3),this.M3=0)}B3(t){this.FB.Eb(t,!1,!0)}V3(){0!==this.W3&&(Ms.Wg(this.W3),this.W3=0),this.FB.fn(Ti.sb,this.sd)}U3(){this.N3||0===this.G3&&(this.V3(),this.G3=Ms.Wp(this.H3,250))}R3(){0!==this.G3&&(Ms.Up(this.G3),this.G3=0),this.V3(),this.FB.hI||(this.Z3=0)}X3(){return!this.FB.qR&&!this.FB.hI&&0!==this.FB.KR&&!this.FB.RR&&!this.FB.lt&&(this.z3()||this.I3.sI>=Ht.eO)}z3(){const t=this.FB.SR,e=this.N2.gR,i=e.eB(t);return-1!==i&&e.jn(i)>t+JN}q3(t,e){const i=e.eB(t);return i>-1?e.jn(i):t}constructor(t,e,i,s){this.N2=t,this.I3=e,this.FB=i,this.N3=!1,this.E3=[],this.M3=0,this.W3=0,this.Y3=0,this.O3=0,this.Z3=0,this.G3=0,this.K3=1,this.x3=t=>{const e=this.FB.SR,i=t.LJ.kr(e),s=t.LJ.kr(e,JN)&&this.FB.sI<=Ht.tO;(i||s)&&this.CJ(e)},this.C3=Wd((t=>{if(this.N3)return;if(this.I3.sI<=Ht.tO){const t=this.FB.SR;this.CJ(t)||this.H3()}else this.D3()}),100),this.sd=Wd((t=>{this.U3()}),100),this.F3=t=>{t.currentTime!==this.O3&&this.D3()},this.P3=()=>{this.X3()?0===this.G3&&(this.FB.yn(Ti.sb,this.sd),this.W3=Ms.Ug((()=>{this.U3()}),3500)):this.R3()},this.H3=()=>{const t=this.Y3,e=this.Z3,i=this.FB.SR,s=Ms.Vg(),n=this.N2.gR;if(t!==i)return this.Y3=i,this.Z3=s,this.K3=1,void(this.j3=Ms.sR?2e3:1e3);if(this.X3()&&0!==n.V&&e>0&&s>e+this.j3){let t;const e=this.BJ.zL().tB(n),s=e.uB(i);if(-1!==s){const n=e.Cn(s);if(n-i<1){const i=e.jn(s);0,t=i}}var r;if(!t)t=null==(r=this.Q3)?void 0:r.determineStallJumpTarget(),t||(t=i+.01*this.K3,n.kr(t)||(t=this.q3(i,n)));0,this.Y3=t,this.K3++,this.j3=_.min(2*this.j3,1e4),this.B3(t)}},this.I3.yn(tl.tC,this.C3),this.FB.yn(Ti.Xy,this.C3),this.FB.yn($N,this.P3),this.Q3=s,this.j3=Ms.sR?2e3:1e3}};function eM(t){const e=[];if(t.J3&&e.push(t.J3.gR),t.t4&&e.push(t.t4.gR),0===e.length)return se.mB();let i=0;for(const t of e)t.V>0&&(i=_.max(i,t.jn(t.V-1)));const s=t.EJ;let n=new se([0,i],[!0,s]);for(let t of e)s&&t.V>0&&(t=t.JL(new se([t.jn(t.V-1),i],[!0,!0]))),n=n.Sn(t);return n}function iM(t,e,i){const s=t.gR;let n,r=s.eB(e);if(r>=0){if(!(r+1<s.V))return Promise.resolve();n=s.Cn(r+1)}else{if(r=s.cB(e),!(r>=0))return Promise.resolve();n=s.Cn(r)}return t.$S(n,1/0,i)}function sM(t,e,i){if(!t.kr(e)){const s=t.eB(e,i);if(s>=0){const i=t.Cn(s);if(e<i)return i}}return e}r();var nM=Z.Um||Z.Hm,rM=Z.Km||Z.$m||Z.iu,oM=function(t){return t.X2="closed",t.WE="open",t.Cy="ended",t}({}),hM=class extends YD{get J3(){return this.e4}get t4(){return this.i4}get ct(){if(this.s4)return this.s4;const t=this.jG.duration;return t===Hu?1/0:t}n4(t){if(S(t)||t<0)throw new g("Invalid duration");this.r4()?this.o4(t):this.s4=t}o4(t){const e=t===1/0;if(e&&this.jG.setLiveSeekableRange){const t=2**39;this.jG.setLiveSeekableRange(0,t)}this.jG.duration=e?rM?1/0:Hu:t,this.s4=void 0}get gR(){return nM?eM(this):function(t,e){let i=e;return i.V>0&&t.EJ&&(i=i.JL(se._B(i.jn(i.V-1)))),i}(this,se.xn(this.QT.buffered))}get xJ(){var t;return null==(t=this.e4)?void 0:t.gR}get RJ(){var t;return null==(t=this.i4)?void 0:t.gR}get rI(){return this.h4.y3().Sn(new se([0,this.ct],[!0,!0]))}a4(t,e,i,s){this.h4=new wo(t,e,!!i,!!s)}get EJ(){return(!this.e4||this.e4.EJ())&&(!this.i4||this.i4.EJ())}get sI(){return this.jG.readyState}async Tj(){const t=this.DT,e=Fo(t.u4,(t=>Sl(t.Dk,"audio"))),i=Fo(t.u4,(t=>Sl(t.Dk,"video")));if(this.QT.disableRemotePlayback=!0,await this.c4(),e){const t=new $D;var s;this.l4.T3(t);const i=null!=(s=this.q2(e.Dk))?s:e.Dk;this.d4=this.jG.addSourceBuffer(i),this.e4=jN(this,this.FB,e,ee.fE,this.d4,i,t),this.e4.yn(ue.JQ,this.e3)}if(i){const t=new $D;var n;this.l4.T3(t);const e=null!=(n=this.q2(i.Dk))?n:i.Dk;this.f4=this.jG.addSourceBuffer(e),this.i4=jN(this,this.FB,i,ee._E,this.f4,e,t),this.i4.yn(ue.JQ,this.e3)}this.fJ.Dn(this,t)}async c4(){await super.SJ(this.jG),"open"!==this.sI&&await AA(this.jG,"sourceopen")}r4(){if("open"!==this.sI)return!1;const t=this.e4&&this.e4.fa,e=this.i4&&this.i4.fa;return!(t||e)}r3(){this._4=!0,this.e4&&this.e4.r3(),this.i4&&this.i4.r3(),this._4=!1,this.v4()}K2(){this.e4&&this.e4.K2(),this.i4&&this.i4.K2()}cJ(t){const e=Fo(t.u4,(t=>Sl(t.Dk,"audio"))),i=Fo(t.u4,(t=>Sl(t.Dk,"video")));if(this.e4){if(!e)return!1;if(!this.e4.cJ(e))return!1}else if(e)return!1;if(this.i4){if(!i)return!1;if(!this.i4.cJ(i))return!1}else if(i)return!1;return!!super.cJ(t)}async dJ(t){const e=Fo(t.u4,(t=>Sl(t.Dk,"audio"))),i=Fo(t.u4,(t=>Sl(t.Dk,"video"))),s=[];this.e4&&s.push(this.e4.dJ(e)),this.i4&&s.push(this.i4.dJ(i)),await Promise.all(s),await super.dJ(t)}_J(t){super._J(t)}async Hw(){if(this.jG.removeEventListener("sourceclose",this.m4),Z.Nm&&await this.kJ(),this.e4){if(await this.e4.Hw(),this.e4=void 0,Nm()&&(Z.Nm||Z.Im))try{this.jG.removeSourceBuffer(this.d4)}catch(t){}this.d4=void 0}if(this.i4){if(await this.i4.Hw(),this.i4=void 0,Nm()&&(Z.Nm||Z.Im))try{this.jG.removeSourceBuffer(this.f4)}catch(t){}this.f4=void 0}this.QT.src&&URL.revokeObjectURL(this.QT.src),this.QT.disableRemotePlayback=!1,this.FB.fn([Ti.jy,Ti.Ly],this.g4),this.l4.gn(),Z.Im&&await this.kJ(),await super.Hw()}w3(){const t=this.DT,e=t.u4.map((t=>Sl(t.Dk,"audio")&&this.e4?this.e4.bd:Sl(t.Dk,"video")&&this.i4?this.i4.bd:t));this.DT=Bo({},t,{u4:e})}o3(){this._4||this.v4()}get w4(){if(!this.EJ)return!1;const t=this.gR;return 0!==t.V&&t.Cn(t.V-1)<=this.FB.SR}v4(){this.w4&&this.r4()&&(this.jG.endOfStream(),this.s4=void 0,this.wo(new pe(Mo.iJ)),this.FB.e3())}Q2(){this.r4()&&(this.EJ?this.v4():void 0!==this.s4&&this.o4(this.s4))}CJ(t){return this.l4.CJ(t)}PJ(){return!0}q2(t){return aM(this.y4,t)}static DJ(t){const e=Bf(t.b4);if(void 0===e)return!1;if("function"!=typeof e.isTypeSupported)return!1;const i=new Lf(t.b4);for(const e of t.u4)if(void 0===aM(i,e.Dk))return!1;return!0}constructor(t,e,i,s,n,r=new Lf(t.b4),o){super(t,e,s,n),this.e4=void 0,this.d4=void 0,this.i4=void 0,this.f4=void 0,this.h4=new wo(0,1/0),this.s4=void 0,this._4=!1,this.m4=()=>{this.wo(new pe(Mo.nJ))},this.A4=()=>{this.wo(new pe(Mo.oJ))},this.g4=()=>{this.v4()},this.e3=()=>{this.FB.e3()},this.y4=r,this.jG=this.y4.gp(),this.jG.addEventListener("sourceclose",this.m4),this.jG.addEventListener("sourceopen",this.A4),this.FB.yn([Ti.jy,Ti.Ly],this.g4),this.l4=new tM(this,i,this.FB,o)}};function aM(t,e){const i=Dy(e),s=XN(i),n="audio/mp4"===i.Aw,r=n&&1===s.length&&"mp4a.40.34"===s[0];if(t.wp(e)&&(!r||!Z.$m))return e;if(r){const e=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const i of e)if(t.wp(i))return i}if(n&&1===s.length&&"flac"===s[0].toLowerCase()){const i=["flac","fLaC","FLAC"];for(const s of i){const i='audio/mp4; codecs="'+s+'"';if(t.wp(e))return i}}}r(),r();var uM=class extends pe{constructor(t){super(Ti.Ly),this.currentTime=t}},cM=[Ti.ob,Ti.zy,Ti.jy,Ti.Ly,Ti.ro,Ti.Zy],lM=class extends Co{get SR(){return this.hZ}get S4(){return this.T4}get E4(){return this.x4}get ct(){return this.DA}get RR(){return this.R4}get qR(){return this.cZ}get sI(){return this.I4}get hI(){return this.aZ}get GR(){return this.uZ}set GR(t){this.GR!==t&&(this.uZ=t,this.wo(new rs(this.SR,this.vI)))}get KR(){return this.lZ}set KR(t){this.KR!==t&&(this.lZ=t,this.wo(new Nu(this.SR,this.KR)))}get vI(){return this.ZA}set vI(t){this.vI!==t&&(this.ZA=t,this.wo(new rs(this.SR,this.vI)))}Eb(t,e,i){this.hZ!==t&&(this.hZ=t,this.T4=e,i&&!this.aZ?(this.x4=!0,this.wo(new uM(this.SR))):(this.x4=!1,this.aZ=!0,this.wo(new L(this.SR))))}TI(){this.cZ||(this.cZ=!0,this.wo(new fl(this.SR)))}kI(){this.cZ&&(this.cZ=!1,this.wo(new H(this.SR)))}Hw(){this.$o()}constructor(t,e,i,s,n,r,o,h,a,u,c){super(),this.hZ=t,this.DA=e,this.R4=i,this.cZ=s,this.aZ=n,this.uZ=r,this.lZ=o,this.ZA=h,this.I4=a,this.T4=u,this.x4=c}};function dM(t){return new lM(t.SR,t.ct,t.RR,t.qR,t.hI,t.GR,t.KR,t.vI,t.sI,!1,t.E4)}function fM(t,e){e.ct===t.ct||S(e.ct)&&S(t.ct)||t.wo(new Ls(t.ct)),t.GR=e.GR,t.vI=e.vI,t.KR=e.KR,e.qR?t.TI():t.kI().catch(It),e.SR!==t.SR||e.sI>Ht.$B&&t.sI===Ht.$B?t.Eb(e.SR,e.S4,e.E4):!e.hI&&t.hI?t.wo(new L(t.SR)):e.hI&&!t.hI&&t.sI>=Ht.tO&&t.wo(new ha(t.SR)),!e.RR&&t.RR&&t.wo(new Te(t.SR))}r(),r();var _M=class extends Co{get sI(){return this.nI()}C4(t){this.EW!==t&&(this.EW=t,this.wo(new au(this.FB.SR,t)))}P4(){this.C4(this.nI())}er(){this.C4(Ht.$B)}Hw(){this.$o()}constructor(t){super(),this.EW=Ht.$B,this.D4=()=>{this.P4()},this.FB=t}};r();var vM=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],Za=class extends _M{nI(){let t=this.FB.YG.readyState;return t>Ht.tO&&this.FB.N4?Ht.tO:(this.FB.YG.seeking&&t>Ht.Gn&&(t=Ht.Gn),t)}Hw(){for(const t of vM)this.FB.YG.removeEventListener(t,this.D4);super.Hw()}constructor(t){super(t);for(const t of vM)this.FB.YG.addEventListener(t,this.D4)}};r();var mM=class extends _M{nI(){if(this.FB.YG.readyState===Ht.$B)return Ht.$B;const t=this.M4(),e=t?t.jn-t.Cn:0;if(!t)return Ht.Gn;const i=this.FB.KR;return this.L4()||e>=3*i?Ht.iO:e>=3?Ht.eO:Ht.tO}M4(){const t=this.FB.SR,e=this.FB.gR.QL(.04),i=e.eB(t);if(!(i<0))return{Cn:t,jn:e.jn(i)}}L4(){if(this.FB.RR)return!0;const t=this.FB.ct,e=this.M4();return!!e&&t-e.jn<=.16666666666666666}Hw(){this.FB.fn([Ti.jy,Ti.Ly],this.D4);for(const t of vM)this.FB.YG.removeEventListener(t,this.D4);super.Hw()}constructor(t){super(t),this.FB.yn([Ti.jy,Ti.Ly],this.D4);for(const t of vM)this.FB.YG.addEventListener(t,this.D4)}};r(),r();var gM=[tl.tC,Ti.ro,Ti.Zy,Ti.jy,Ti.Ky,Ti.Ly,Ti.Oy,Ti.Cy,yo.da],pM=class extends Co{B4(){return(!this.yW.E4||!this.yW.O4)&&this.yW.sI<Ht.eO}F4(){return!this.yW.hI&&!(this.yW.qR||this.yW.RR||this.yW.lt||this.B4())}tr(){const t=this.V4;this.V4=this.F4(),!t&&this.V4&&this.wo(new Wi(this.yW.SR))}er(){this.V4=!1}Hw(){this.$o(),this.yW.fn(gM,this.mK)}constructor(t){super(),this.V4=!1,this.mK=()=>{this.tr()},this.yW=t,this.yW.yn(gM,this.mK)}},wM=class extends pM{F4(){return this.W4&&super.F4()}tr(){this.W4&&(this.QT.paused||this.QT.ended||this.QT.error)&&(this.W4=!1),super.tr()}er(){super.er(),this.W4=!1}Hw(){this.QT.removeEventListener(tl.VL,this.NW),super.Hw()}constructor(t){super(t),this.W4=!1,this.NW=()=>{this.W4=!0,this.tr()},this.QT=t.YG,this.QT.addEventListener(tl.VL,this.NW)}};r();var yM=class extends pe{constructor(t){super(yo.da),this.lt=t}};function bM(t,e){return t.FO<=e&&t.VO>e}function be(t,e){return function(t,e){return Vm(t.FO,e.FO,Fk)}(t,e)||function(t,e){return Vm(t.VO,e.VO,Fk)}(t,e)}function AM(t,e){return function(t,e){return Vm(t.zO,e.zO,Fk)}(t,e)||function(t,e){return Vm(t.qO,e.qO,Fk)}(t,e)}function SM(t,e,i){let s=function(t,e,i,s,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=t.length);let h=r,a=o-1;for(;h<=a;){const o=h+(a-h>>1),u=s(i(t[o]),e);if(u<0)h=o+1;else if(u>0)a=o-1;else{if(!(n&&o>r&&0===s(i(t[o-1]),e)))return o;a=o-1}}return~h}(t,e,Vd,i,!0);if(s<0)return s;for(;s<t.length&&i(e,t[s])===Rc.sh;s++)if(t[s].eF(e))return s;return-(s+1)}function TM(t,e,i){const s=SM(t,e,i);return s>=0?s:-(s+1)}function kM(t){const e=t.Ht;if(!e)return-1;if(t instanceof Le)return e.U4(t);const i=e.L;if(!i)return-1;const s=SM(i.uC,t,be);return s>=0?s:-1}function EM(t,e){const i=function(t,e,i){const s=t.length,n=e.length;let r=0,o=0;const h=[],a=[];for(;r<s&&o<n;){const s=t[r],n=e[o];s===n?(r++,o++):i(n,s)<=0?(h.push(n),o++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;o<n;)h.push(e[o]),o++;return{G4:h,H4:a}}(t,e,be);return function(t,e){const i=e.length;for(let s=0;s<i;s++)t[s]=e[s];t.length=i}(t,e),i}r(),r(),r(),r();var xM=class{get uC(){return this.Z4}get V(){return this.Z4.length}get ka(){if(this.su){const t=this.Z4;this.su.length=t.length;for(let e=0;e<t.length;e++)this.su[e]=t[e].ka}else this.su=this.ba();return this.su}ba(){return function(t){const e=[];for(let i=0;i<t.V;i++)e[i]=t.Nb(i).ka;return e.item=e=>{const i=0|e,s=t.Nb(i);return s&&s.ka||void 0},w.defineProperty(e,"constructor",{value:Mk}),e}(this)}TO(t){const e=this.Z4;for(let i=e.length-1;i>=0;i-=1){const s=e[i];if(t.eF(s))return!0}return!1}Nb(t){return this.Z4[t]}constructor(t){this.su=void 0,this.Z4=t}};r();var RM=class extends Un{ba(){return new IM(this.Ht.ka,this.sI)}constructor(t,e){super(No.tC),this.Ht=t,this.sI=e}},IM=class extends nr{constructor(t,e){super("readystatechange"),this.track=t,this.readyState=e}};r();var CM=class extends Un{ba(){return new PM(this.Ht.ka)}constructor(t){super(No.iC),this.Ht=t}},PM=class extends nr{constructor(t){super("typechange"),this.track=t}};r();var Ts=class extends Un{ba(){return new DM(this.BO.ka)}constructor(t){super(No.UI),this.BO=t}},DM=class extends nr{constructor(t){super("addcue"),this.cue=t}};r();var NM=class extends Un{ba(){return new MM(this.BO.ka)}constructor(t){super(No.HI),this.BO=t}},MM=class extends nr{constructor(t){super("removecue"),this.cue=t}},mo=class extends Co{get q(){return this.X4}get L(){return this.z4}q4(t){return Fo(this.z4.uC,(e=>e.o===t))}get vW(){return this.y_}set vW(t){this.y_=t}get BC(){return this.Y4}get ka(){return this.su||(this.su=this.ba()),this.su}ba(){return Qh(this)}get o(){return this.ZS}get xC(){return this.xO}get MC(){return this.K4}set MC(t){this.K4=t}get Lt(){return this.j4}get xh(){return this.RO}set xh(t){t!==this.RO&&(this.RO=t,this.wo(new Zs(this)))}get gs(){return this.NA}get RC(){return this.Q4}get xE(){return this.Go}set xE(t){this.J4(t)}J4(t){const e=vu(t);e!==this.xE&&(this.Go=e,e===bh.Th&&(this.t5.forEach((t=>{t.io=!1})),En(this.t5),this.e5=0),this.wo(new Ec(this)))}get sI(){return this.I4}set sI(t){this.I4!==t&&(this.I4=t,this.wo(new RM(this,this.I4)))}get OC(){return this.i5}set OC(t){this.i5=t}get Aw(){return this.bp}set Aw(t){this.bp!==t&&(this.bp=t,this.wo(new CM(this)))}dW(t){if(!t||t.Ht)return;const e=SM(this.s5,t,AM);if(e>=0)return;t.Ht=this;const i=-(e+1);this.s5.splice(i,0,t);const s=TM(this.L.uC,t,be);this.n5(t,s),this.wo(new Ts(t))}n5(t,e){this.Z4.splice(e,0,t),this.r5(e),t.nF=e,e<this.e5&&(this.e5=e)}eW(t){if(!t||t.Ht!==this)return;const e=this.U4(t);if(e<0)return;t.io=!1;const i=this.t5,s=SM(i,t,be);s>=0&&ka(i,s);const n=SM(this.s5,t,AM);n>=0&&ka(this.s5,n),this.o5(t,e),this.wo(new NM(t))}o5(t,e){ka(this.Z4,e),this.r5(e),t.nF=-1,this.e5>e&&--this.e5}jO(t){if(!t||t.Ht!==this)return;const e=this.U4(t);if(e<0)return;this.o5(t,e);const i=TM(this.L.uC,t,be);this.n5(t,i);const s=Hr(this.t5,(e=>e===t));if(s>=0){ka(this.t5,s);const e=TM(this.t5,t,be);this.t5.splice(e,0,t)}}h5(t,e){const i=this.t5,s=this.Z4;let n=this.e5,r=!1,o=1/0;e&&(n=0);for(let e=i.length-1;e>=0;e--){const s=i[e];bM(s,t)?s.VO<o&&(o=s.VO):(r=!0,ka(i,e))}for(;n<s.length&&s[n].FO<=t;){const e=s[n];bM(e,t)&&(ms(i,e)||(r=!0,i.push(e)),e.VO<o&&(o=e.VO)),n++}return n<s.length&&s[n].FO<o&&(o=s[n].FO),r&&Lm(i,be),this.e5=n,o}U4(t){return(-1===t.nF||t.nF>=this.a5)&&this.u5(),t.nF}u5(){const t=this.Z4;for(let e=this.a5;e<t.length;e++)t[e].nF=e;this.a5=t.length}r5(t){t<this.a5&&(this.a5=_.max(t,0))}LC(t){this.BC||(this.xE=t)}gn(){this.$o();const t=this.Z4.slice();for(const e of t)e.gn();En(this.Z4),En(this.s5),En(this.t5)}constructor(t,e,i,s,n,r,o,h,a){super(),this.xO=oi(),this.y_=!1,this.Go=bh.Th,this.I4=ic.NONE,this.i5=void 0,this.Z4=[],this.s5=[],this.t5=[],this.a5=0,this.e5=0,this.ZS=e||"",this.K4=h||"",this.j4=t,this.NA=s||"",this.y_=Boolean(n),this.Y4=Boolean(o),this.bp=r||Lr.DEFAULT,this.RO=i||"",this.Q4=a||[],this.z4=new xM(this.Z4),this.X4=new xM(this.t5)}};r(),r(),r();var LM=class extends dl{ba(){return new BM(this.BO.ka)}constructor(t,e){super(T.sO,t),this.nV=e}},BM=class extends Kc{constructor(t){super("enter",t)}};r();var OM=class extends dl{ba(){return new FM(this.BO.ka)}constructor(t,e){super(T.nO,t),this.nV=e}},FM=class extends Kc{constructor(t){super("exit",t)}};r();var VM=class extends Un{ba(){return new WM(this.BO.ka)}constructor(t){super(No.qI),this.BO=t}},WM=class extends nr{constructor(t){super("entercue"),this.cue=t}};r();var UM=class extends Un{ba(){return new GM(this.BO.ka)}constructor(t){super(No.KI),this.BO=t}},GM=class extends nr{constructor(t){super("exitcue"),this.cue=t}},Fs=class extends sn{get xC(){return this.xO}get FO(){return this.c5.startTime}set FO(t){this.c5.startTime=t}get VO(){return this.c5.endTime}set VO(t){this.c5.endTime=t}get U(){return this.JO}set U(t){this.JO=t}get $O(){return!!this.c5.pauseOnExit}set $O(t){this.c5.pauseOnExit=!!t}get Ht(){return this.KO}set Ht(t){this.KO=t}get o(){return this.c5.id||""}get ka(){return this.su||(this.su=this.ba()),this.su}ba(){return Lt(this)}get io(){return this.so}set io(t){this.io!==t&&(this.so=t,t?(this.wo(new LM(this,this.FO)),this.KO&&this.KO.wo(new VM(this))):(this.wo(new OM(this,this.VO)),this.KO&&this.KO.wo(new UM(this))))}eF(t){return this===t||KA(this,t)&&Vk(this,t)&&this.iF(t)}iF(t){return Ai(this.U,t.U)}gn(){this.$o(),this.c5.removeEventListener("enter",this.l5),this.c5.removeEventListener("exit",this.d5)}constructor(t){super(),this.JO=void 0,this.KO=void 0,this.su=void 0,this.so=!1,this.l5=()=>{this.io=!0},this.d5=()=>{this.io=!1},this.xO=Sk(),this.c5=t,this.zO=t.startTime,this.qO=t.endTime,this.c5.addEventListener("enter",this.l5),this.c5.addEventListener("exit",this.d5)}};r();var HM=class extends Un{ba(){return new ZM(this.Ht.ka)}constructor(t){super(No.QI),this.Ht=t}},ZM=class extends nr{constructor(t){super("cuechange"),this.track=t}};function XM(t){if(!t)return;let e=t.THEOplayerVTTRegion;return e||(e=new zM(t),t.THEOplayerVTTRegion=e),e}r(),r();var zM=class{get f5(){return this._5}get o(){return this._5.id||""}get ji(){return+this._5.width||0}set ji(t){this._5.width=t||0}get rF(){return+this._5.lines||0}set rF(t){this._5.lines=t||0}get oF(){return+this._5.regionAnchorX||0}set oF(t){this._5.regionAnchorX=t||0}get hF(){return+this._5.regionAnchorY||0}set hF(t){this._5.regionAnchorY=t||0}get uF(){return+this._5.viewportAnchorX||0}set uF(t){this._5.viewportAnchorX=t||0}get cF(){return+this._5.viewportAnchorY||0}set cF(t){this._5.viewportAnchorY=t||0}get aF(){return this._5.scroll||""}get ka(){return this.su||(this.su=Xk(this)),this.su}constructor(t){this.su=void 0,this._5=t}};var qM=class extends Fs{get U(){return this.c5.text}set U(t){this.c5.text=t}get Pt(){return this.c5.vertical||""}set Pt(t){this.c5.vertical=t||""}get XO(){return this.c5.snapToLines}set XO(t){this.c5.snapToLines=t}get UO(){return this.c5.line}set UO(t){this.c5.line=t}get Pb(){return+this.c5.size}set Pb(t){this.c5.size=Vs(t,0,100)}get ka(){return this.su||(this.su=this.ba()),this.su}ba(){return Lk(this)}iF(t){return Wk(this,t)}constructor(t){super(t)}},YM=class extends qM{get ZO(){return XM(this.c5.region)}get GO(){return this.c5.lineAlign||"start"}set GO(t){this.c5.lineAlign=t||"start"}get do(){return this.c5.position}set do(t){this.c5.position=t}get HO(){return this.c5.positionAlign||"auto"}set HO(t){this.c5.positionAlign=t||"auto"}get WO(){return this.c5.align||"center"}set WO(t){this.c5.align=t||"center"}constructor(t){super(t)}},KM=class extends qM{get ZO(){return XM(this.f5)}get f5(){return function(t,e){if(void 0===e)return;let i=t&&t.regions;return i&&i.getRegionById(e)||void 0}(this.c5.track,this.c5.regionId)}get GO(){return function(t){return"middle"===t?"center":t}(this.c5.lineAlign||"start")}set GO(t){this.c5.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get do(){return this.c5.position}set do(t){this.c5.position=function(t,e){return Nk(t,e)}(t,this.WO)}get HO(){return function(t){return Pk[t]}(this.c5.positionAlign||"middle")}set HO(t){this.c5.positionAlign=function(t,e){return Ck[Dk(t,e)]}(t||"center",this.WO)}get WO(){return function(t){return"middle"===t?"center":t}(this.c5.align||"middle")}set WO(t){this.c5.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function jM(t,e){return t.U===e.U}function QM(t,e){if(0===e.length)return;const i=e.length-1;if(e[i].FO<t.FO)return void JM(e,i,t.FO);const s=e[0];if(s.FO>t.FO)return void(t.VO=s.FO);const n=SM(e,t,be);if(n>=0)return;const r=-(n+1),o=r-1;if(o>=0){e[o].FO<t.FO&&JM(e,o,t.FO)}if(r<e.length){const i=e[r];t.VO=i.FO}}function JM(t,e,i){const s=t[e].FO;for(let n=e;n>=0&&t[n].FO===s;n--)t[n].VO=i}function $M(t){return Lt(t)}r(),r(),r(),r();var tL=class extends Fs{get U(){return this.v5}get ka(){return this.su||(this.su=this.ba()),this.su}ba(){return $M(this)}iF(t){return jM(this,t)}constructor(t,e){super(t),this.v5=e}};function eL(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function iL(t){switch(t){case 0:return so;case 1:return Zg;case 2:return gr;case 3:return jg}}function sL(t,e){const i=e.ec,s=t.byteLength,n=Rh(t);return e.kb(s-i),Uc(n,i,s).buffer}function nL(t,e){return{id:t||"",data:e instanceof ArrayBuffer?e:void 0}}function rL(t,e,i){const s=oc(t,e);if(!eL(s))return;const n=iL(s);return{id:i,language:jc(t,e,3),description:n(t,e),text:n(t,e)}}function oL(t,e,i){const s=oc(t,e);if(!eL(s))return;const n=iL(s);return{id:i,mimeType:so(t,e),fileName:n(t,e),description:n(t,e),data:sL(t,e)}}function hL(t,e,i){const s=oc(t,e);if(!eL(s))return;const n=iL(s),r=[];for(;e.ec<t.byteLength;)r.push({involvement:n(t,e),involvee:n(t,e)});return{id:i,entries:r}}function aL(t,e,i){const s=oc(t,e);if(!eL(s))return;const n=iL(s),r=jc(t,e,3),o=oc(t,e),h=oc(t,e),a=n(t,e);let u=!1;const c=[];for(;e.ec<t.byteLength;){let i;if(1===s){let s=Hg(t,e);void 0===s?s=u:u=s,i=gr(t,e,s)}else i=n(t,e);if(!i||e.ec+4>t.byteLength)break;c.push({text:i,timestamp:as(t,e)})}return{id:i,language:r,format:o,contentType:h,description:a,entries:c}}function uL(t,e,i){return{id:i,ownerIdentifier:so(t,e),identifier:sL(t,e)}}function cL(t,e,i){const s=oc(t,e);if(!eL(s))return;const n=iL(s);return{id:i,language:jc(t,e,3),description:n(t,e),text:n(t,e)}}function lL(t,e,i){const s=oc(t,e);if(!eL(s))return;return{id:i,text:iL(s)(t,e)}}function dL(t,e,i){return{id:i,url:so(t,e)}}function fL(t,e,i){const s=oc(t,e);if(!eL(s))return;const n=iL(s);return{id:i,description:n(t,e),text:n(t,e)}}function _L(t,e,i){const s=oc(t,e);if(!eL(s))return;return{id:i,description:iL(s)(t,e),url:so(t,e)}}function vL(t,e,i){switch(i){case"COM":return rL(t,e,i);case"GEO":return oL(t,e,i);case"IPL":return hL(t,e,i);case"PIC":return function(t,e,i){const s=oc(t,e);if(!eL(s))return;const n=iL(s),r=jc(t,e,3),o=oc(t,e),h=n(t,e);let a,u;return"--\x3e"===r?(a=r,u=so(t,e)):(a="image/"+r.toLowerCase(),u=sL(t,e)),{id:i,mimeType:a,pictureType:o,description:h,data:u}}(t,e,i);case"SLT":return aL(t,e,i);case"TXX":return fL(t,e,i);case"UFI":return uL(t,e,i);case"ULT":return cL(t,e,i);case"WXX":return _L(t,e,i);default:if("T"===i.charAt(0))return lL(t,e,i);if("W"===i.charAt(0))return dL(t,e,i)}}function mL(t,e,i){switch(i){case"APIC":return function(t,e,i){const s=oc(t,e);if(!eL(s))return;const n=iL(s),r=so(t,e),o=oc(t,e),h=n(t,e);let a;return a="--\x3e"===r?so(t,e):sL(t,e),{id:i,mimeType:r,pictureType:o,description:h,data:a}}(t,e,i);case"COMM":return rL(t,e,i);case"COMR":return function(t,e,i){const s=oc(t,e);if(!eL(s))return;const n=iL(s),r=so(t,e),o=jc(t,e,8),h=so(t,e),a=oc(t,e),u=n(t,e),c=n(t,e);let l,d;return e.ec<t.byteLength&&(l=so(t,e)||"image/",d=sL(t,e)),{id:i,price:r,validUntil:o,contactURL:h,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,e,i);case"GEOB":return oL(t,e,i);case"IPLS":return hL(t,e,i);case"PRIV":return function(t,e,i){return{id:i,ownerIdentifier:so(t,e),data:sL(t,e)}}(t,e,i);case"POSS":return function(t,e,i){return{id:i,format:oc(t,e),position:as(t,e)}}(t,e,i);case"SYLT":return aL(t,e,i);case"TXXX":return fL(t,e,i);case"UFID":return uL(t,e,i);case"USER":return function(t,e,i){const s=oc(t,e);if(!eL(s))return;const n=iL(s);return{id:i,language:jc(t,e,3),text:n(t,e)}}(t,e,i);case"USLT":return cL(t,e,i);case"WXXX":return _L(t,e,i);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return lL(t,e,i);default:{const s=i.charAt(0);if("T"===s)return lL(t,e,i);if("W"===s)return dL(t,e,i)}}}r(),r();var gL=10;function pL(t,e){return(127&oc(t,e))<<21|(127&oc(t,e))<<14|(127&oc(t,e))<<7|127&oc(t,e)}function wL(t,e){switch(t){case 4:return{m5:el(e,0),g5:el(e,1),p5:el(e,2),w5:el(e,3)};case 3:return{m5:el(e,0),g5:el(e,1),p5:el(e,2)};case 2:return{m5:el(e,0),y5:el(e,1)}}}function yL(t,e,i){switch(i.YD){case 3:i.KD.g5&&function(t,e){const i=e.ec,s=as(t,e)+4,n=32768&Ei(t,e);e.Eb(i+s),n&&as(t,e)}(t,e);break;case 4:i.KD.g5&&function(t,e){const i=e.ec,s=pL(t,e);e.Eb(i+s)}(t,e)}}function bL(t,e){if(t.byteLength-e.ec<gL)return null;if(73!==oc(t,e)||68!==oc(t,e)||51!==oc(t,e))return null;const i=oc(t,e),s=oc(t,e);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(i))return null;const n=oc(t,e),r=pL(t,e);return{YD:i,b5:s,KD:wL(i,n),A5:r}}function AL(t,e,i){switch(i){case 2:return function(t,e){if(e.ec+6>t.byteLength)return;return{o:jc(t,e,3),Pb:Mg(t,e,3)}}(t,e);case 3:return function(t,e){if(e.ec+10>t.byteLength)return;const i=jc(t,e,4),s=as(t,e);oc(t,e);const n=oc(t,e);return{o:i,Pb:s,KD:{y5:el(n,0),S5:el(n,1),groupingIdentity:el(n,2)}}}(t,e);case 4:return function(t,e){if(e.ec+10>t.byteLength)return;const i=jc(t,e,4),s=pL(t,e);oc(t,e);const n=oc(t,e);return{o:i,Pb:s,KD:{groupingIdentity:el(n,1),y5:el(n,4),S5:el(n,5),m5:el(n,6),T5:el(n,7)}}}(t,e)}}function SL(t){const e=Rh(t),i=new j(e.byteLength);let s=0;for(let t=0;t<e.byteLength;t++){const n=e[t];255===n&&t++,i[s]=n,s++}return ra(Uc(i,0,s))}function TL(t,e){const i=e||new Ri,s=bL(t,i);if(!s)return null;const n=function(t,e,i){const s=[],n=e.ec;let r=mu(t,n,n+i.A5);const o=new Ri;switch(e.kb(i.A5),i.YD){case 2:case 3:i.KD.m5&&(r=SL(r))}yL(t,e,i);for(;o.ec<r.byteLength;){const t=kL(r,o,i);if(void 0===t)break;s.push(t)}return s}(t,i,s);return{HD:s,k5:n}}function kL(t,e,i){const s=AL(t,e,i.YD);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.Pb)return;const n=e.ec;let r,o,h=mu(t,n,n+s.Pb);switch(e.kb(s.Pb),i.YD){case 2:{const t=s;o=h,r=vL(o,new Ri,t.o);break}case 3:{const t=s,e=new Ri;!function(t,e,i){const s=i.KD;let n,r,o;s.y5&&(n=as(t,e)),s.S5&&(r=oc(t,e)),s.groupingIdentity&&(o=oc(t,e))}(h,e,t);o=mu(h,e.ec,h.byteLength),r=mL(o,new Ri,t.o);break}case 4:{const t=s,e=new Ri;t.KD.m5&&(h=SL(h)),function(t,e,i){const s=i.KD;let n,r,o,h;s.groupingIdentity&&(n=oc(t,e)),s.y5&&(r=as(t,e)),s.S5&&(o=oc(t,e)),s.T5&&(h=pL(t,e))}(h,e,t);o=mu(h,e.ec,h.byteLength),r=mL(o,new Ri,t.o);break}}if(!r){const t=kc(Rh(o));r=nL(s.o,t.buffer)}return r}r();function EL(t){return ji(t)&&"org.id3"===t.type&&ji(t.value)}function xL(t){return function(t,e,i){return lL(t,e,i)}(new DataView(t.data),new Ri,t.key)}function RL(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return xL(t);default:let e=t.key.charAt(0);if("T"===e)return function(t){return{id:t.key,text:t.data}}(t);if("W"===e)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return nL(t.key,t.data)}(t)}r(),r();var IL=class extends Co{get q(){return this.X4}get vW(){return this.E5?this.E5.default:void 0}get L(){return this.z4}get ka(){return this.su||(this.su=this.ba()),this.su}ba(){return Qh(this)}get o(){return this.EO.id||this.E5&&this.E5.id||""}get xC(){return this.xO}get MC(){return this.EO.inBandMetadataTrackDispatchType||""}get Lt(){return this.EO.kind||hs.jV}get xh(){return this.RO}set xh(t){t!==this.RO&&(this.RO=t,void 0!==this.E5&&(this.E5.label=t),this.wo(new Zs(this)))}get gs(){return this.EO.language||""}get xE(){return this.Go}set xE(t){let e=this.xE;this.Go=vu(t),this.x5();let i=this.xE;e!==i&&this.wo(new Ec(this)),i!==bh.Th&&this.R5(ic.LOADING)}get I5(){return vu(this.EO.mode)}set I5(t){this.EO.mode=t}get IO(){return this.EO}get sI(){return this.I4}get C5(){return this.E5?+this.E5.readyState||ic.NONE:ic.LOADED}get OC(){return this.i5}get Aw(){return this.bp}set Aw(t){this.bp!==t&&(this.bp=t,this.wo(new CM(this)))}get P5(){return this.D5}set P5(t){this.D5=t,t&&(this.N5=!0,u((()=>{this.N5=!1}),50)),this.x5()}dW(t){t.Ht!==this&&(t.Ht=this,this.EO.addCue(t.c5),this.M5())}eW(t){t.Ht===this&&(t.Ht=void 0,this.EO.removeCue(t.c5),this.M5())}q4(t){var e;const i=null==(e=this.EO.cues)?void 0:e.getCueById(t);if(!i)return;const s=CL(i);return s&&lc(s)?s[0]:s}iW(t){this.L5>=t||(this.L5=t,oo(this,t))}x5(){let t=this.xE;this.P5||t!==bh.Jn?this.I5=t:this.I5=bh.NC}B5(){let t=this.xE,e=this.I5;t!==e&&(this.P5||t!==bh.Jn||e!==bh.NC)&&("metadata"===this.Lt&&e===bh.Th?this.xE=t:this.N5&&e===bh.Th&&t===bh.Jn?this.I5=t:this.xE=e)}P4(t){this.I4!==t&&(this.I4=t,this.wo(new RM(this,t)))}R5(t){let e=_.max(this.I4,this.C5,t);this.P4(e)}O5(t){let e=CL(t);if(e)return e;if(e=this.F5(t),lc(e))for(let t of e)t.Ht=this;else e.Ht=this;return e}F5(t){const e=this.V5(t);return t.THEOplayerTextTrackCue=e,e}V5(t){return t.endTime<this.L5?[]:EL(t)?(this.Aw=Lr.ID3,function(t){let e;try{e=RL(t.value)}catch(t){e=nL("")}return new tL(t,e)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.Aw=Lr.ID3,function(t){let e=[];try{let i=TL(new DataView(t.data));if(i)for(let s of i.k5)e.push(new tL(t,s))}catch(t){}return e}(t)):function(t){return"text"in t}(t)?(this.Aw=Lr.WEBVTT,function(t){return"regionId"in t}(t)?new KM(t):new YM(t)):new Fs(t)}W5(t){let e=[];if(!t)return e;let i=t.length;for(let n=0;n<i;n++){var s;let i=this.O5(null!=(s=t[n])?s:t.item(n));if(lc(i))for(let t of i)e.push(t);else e.push(i)}return e}U5(){let t=this.W5(this.EO.cues),e=EM(this.Z4,t);for(let t of e.H4)t.fn(T.nO,this.M5),t.fn(T.sO,this.M5),this.wo(new NM(t));for(let t of e.G4)t.yn(T.sO,this.M5),t.yn(T.nO,this.M5),this.wo(new Ts(t))}h5(){let t=this.W5(this.EO.activeCues),e=EM(this.t5,t);for(let t of e.H4)t.io=!1;for(let t of e.G4)t.io=!0;(e.G4.length||e.H4.length)&&this.wo(new HM(this))}LC(t){this.xE=t}gn(){this.$o();const t=this.Z4.slice();for(let e of t)e.gn();En(this.Z4),En(this.t5),this.EO.removeEventListener("cuechange",this.G5),this.EO.removeEventListener("cuechange",this.M5),this.E5&&(this.E5.removeEventListener("load",this.H5),this.E5.removeEventListener("error",this.Z5),Gt(this.E5))}constructor(t,e,i=!0){super(),this.Z4=[],this.t5=[],this.Go=bh.Th,this.I4=ic.NONE,this.i5=void 0,this.bp=Lr.DEFAULT,this.N5=!1,this.L5=0,this.G5=()=>{this.x5(),this.EO.removeEventListener("cuechange",this.G5)},this.M5=()=>{this.xE!==bh.Th&&(this.U5(),this.h5(),this.Z4.length&&this.R5(ic.LOADING))},this.H5=()=>{this.R5(ic.LOADED)},this.Z5=()=>{this.R5(ic.ERROR)},this.EO=t,this.D5=i,this.EO.addEventListener("cuechange",this.G5),this.EO.addEventListener("cuechange",this.M5),this.E5=e,this.E5&&(this.i5=Ki(this.E5.src),this.E5.addEventListener("load",this.H5),this.E5.addEventListener("error",this.Z5)),this.xO=oi(),this.RO=t.label||"",this.z4=new xM(this.Z4),this.X4=new xM(this.t5),this.xE=this.I5,li((()=>{this.M5(),this.R5(ic.NONE)}))}};function CL(t){return null==t?void 0:t.THEOplayerTextTrackCue}r(),r();function PL(t,e){return eu(t.nV,e.nV)||function(t,e){return t.Ht===e.Ht?Fm(kM(t),kM(e)):Tx(t.Ht,e.Ht)}(t.BO,e.BO)||function(t,e){return t===e?Rc.sh:t===T.sO?Rc.Lw:Rc.Mw}(t.type,e.type)}var DL=class{er(){En(this.X5);for(const t of this.Ll.slice())this.it(t);this.z5(),this.q5=0,this.An=0,En(this.Y5),this.K5=!1,this.j5=!1,this.Q5=0}tt(t){ms(this.Ll,t)||(this.Ll.push(t),t.yn(No.la,this.J5),t.xE!==bh.Th&&this.t6())}it(t){we(this.Ll,t)&&(t.fn(No.la,this.J5),t.xE!==bh.Th&&this.t6())}t6(){const t=this.Y5,e=this.Ll.filter((t=>t.xE!==bh.Th));this.Y5=e;for(const i of t)ms(e,i)||this.e6(i);for(const i of e)ms(t,i)||this.i6(i);this.Q5=0}i6(t){if(t.yn(No.UI,this.s6),t.yn(No.HI,this.n6),t.yn(No.XI,this.r6),t.L.V>0){for(const e of t.L.uC)this.o6.push(e);this.h6()}}e6(t){if(t.fn(No.UI,this.s6),t.fn(No.HI,this.n6),t.fn(No.XI,this.r6),t.L.V>0){for(const e of t.L.uC)we(this.X5,e),we(this.o6,e);this.h6()}}a6(){this.ea.hI||this.ea.qR?this.z5():this.h6()}h6(){this.K5&&0!==this.Y5.length&&(this.Q5-this.ea.SR>.25*this.ea.KR||this.q5||(this.q5=this.c6.u6(this.l6)))}z5(){this.q5&&(this.c6.d6(this.q5),this.q5=0)}f6(t){0!==this.Q5&&(t.io!==bM(t,this.ea.SR)?this.Q5=0:this.An<t.FO&&t.FO<this.Q5?this.Q5=t.FO:this.An<t.VO&&t.VO<this.Q5&&(this.Q5=t.VO))}_6(){if(!this.K5)return;if(0===this.Y5.length)return;if(this.ea.hI)return;const t=this.Y5,e=this.An,i=this.ea.SR,s=i-e<-.1;let n=this.j5||s;n&&i>e&&i-e<.1&&(n=!1),this.j5=!1;const r=[];let o=1/0;for(const e of t){const t=e.h5(i,n);t<o&&(o=t);for(const t of e.q.uC)r.push(t)}const h=this.X5.slice();if(n);else for(const s of t)Sx(s,e-Si,i,h);for(let t=h.length-1;t>=0;t--)ms(r,h[t])&&ka(h,t);const a=[];if(!n)for(let t=h.length-1;t>=0;t--){const s=h[t];s.FO>e&&s.VO<=i&&(a.push(s),ka(h,t))}for(const t of this.o6)t.FO!==t.VO&&we(a,t);En(this.o6);const u=[],c=[];for(const t of a)t.io||u.push(new LM(t,t.FO)),u.push(new OM(t,_.max(t.FO,t.VO))),t.io=!1;for(const t of h)t.io&&(u.push(new OM(t,_.max(t.FO,t.VO))),t.io=!1);for(const t of r)t.io||(u.push(new LM(t,t.FO)),t.io=!0);u.sort(PL);for(const t of u){const e=t.BO;e.wo(t);const i=e.Ht;i&&(t.type===T.sO?i.wo(new VM(e)):i.wo(new UM(e)),ms(c,i)||c.push(i))}c.sort(Tx);for(const t of c)t.wo(new HM(t));this.An=i,this.X5=r,this.Q5=o}gn(){this.er(),this.ea.fn(Ti.sb,this.v6),this.ea.fn(Ti.ro,this.m6),this.ea.fn(tl.VL,this.v6),this.ea.fn(Ti.Zy,this.v6),this.ea.fn(Ti.jy,this.g6),this.ea.fn(Ti.Ky,this.v6)}constructor(t,e){this.Ll=[],this.q5=0,this.An=0,this.X5=[],this.o6=[],this.Y5=[],this.K5=!1,this.j5=!1,this.Q5=0,this.l6=()=>{this.q5=0,this._6(),this.a6()},this.v6=()=>{this._6(),this.a6()},this.m6=()=>{this.K5=!0,this.v6()},this.g6=()=>{this.j5=!0,this.Q5=0,this.z5()},this.J5=()=>{this.t6(),this._6(),this.a6()},this.s6=t=>{const e=t.BO;ms(this.o6,e)||this.o6.push(e),this.f6(e),this.h6()},this.n6=t=>{const e=t.BO;we(this.X5,e),we(this.o6,e),this.f6(e),this.h6()},this.r6=t=>{this.f6(t.BO),this.h6()},this.c6=e,this.ea=t,t.yn(Ti.sb,this.v6),t.yn(Ti.ro,this.m6),t.yn(tl.VL,this.v6),t.yn(Ti.Zy,this.v6),t.yn(Ti.jy,this.g6),t.yn(Ti.Ky,this.v6),this.h6()}};r();var NL=class{u6(t){return it(t)}d6(t){uo(t)}},ML=new NL,su=class extends DL{constructor(t,e=ML){super(t,e)}};r(),r();var LL=class extends Le{get ka(){return this.su||(this.su=$M(this)),this.su}iF(t){return jM(this,t)}constructor(t,e,i){super(t,1/0,e,!1,i)}};r(),r();var BL=class extends mo{constructor(t,e,i=Lr.DEFAULT){super(hs.$V,"",e||"","",!1,i,!1,t)}},OL=class extends BL{dW(t){QM(t,this.Z4),super.dW(t)}ba(){return Qh(this)}constructor(t,e){super(t,e),this.Aw=Lr.ID3}},FL=class extends OL{get o(){return this.EO.id||""}get MC(){return this.EO.inBandMetadataTrackDispatchType||""}get gs(){return this.EO.language||""}J4(t){super.J4(t),this.I5=this.xE}get I5(){return vu(this.EO.mode)}set I5(t){this.EO.mode=t}get IO(){return this.EO}dW(t){super.dW(t),t.c5.track!==this.EO&&this.EO.addCue(t.c5)}eW(t){super.eW(t),t.c5.track===this.EO&&this.EO.removeCue(t.c5)}iW(t){this.L5>=t||(this.L5=t,oo(this,t))}R5(t){this.sI=_.max(this.sI,t)}U5(){let t=this.EO.cues;if(!t)return;const e=t.length,i=[],s=[];for(let o=0;o<e;o++){var n;const e=null!=(n=t[o])?n:t.item(o);if(EL(e)&&e.endTime>=this.L5){var r;const t=null!=(r=null==e?void 0:e.THEOplayerTextTrackCue)?r:new VL(e);i.push(t)}else s.push(e)}Lm(i,be);let o=EM(this.L.uC.slice(),i);for(const t of s)this.EO.removeCue(t);for(let t of o.H4)t.gn(),this.eW(t);for(let t of o.G4)this.dW(t)}gn(){this.EO.removeEventListener("cuechange",this.M5),super.gn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.L5=0,this.M5=()=>{this.xE!==bh.Th&&(this.U5(),this.R5(ic.LOADED))},this.EO=t,this.EO.addEventListener("cuechange",this.M5),this.xE=this.I5,li((()=>{this.M5()}))}},VL=class extends LL{gn(){super.gn(),this.c5.THEOplayerTextTrackCue=void 0}constructor(t){super(t.startTime,RL(t.value),t.id),this.c5=t,this.c5.THEOplayerTextTrackCue=this}};function WL(t){return"TXXX"===t.id||"TXX"===t.id}r(),r();var UL=class extends xx{p6(){this.w6.yn(Se.OI,this.VG),this.w6.yn(Se.VI,this.WG)}y6(){this.w6.fn(Se.OI,this.VG),this.w6.fn(Se.VI,this.WG)}b6(t){const e=t.L.uC[0];if(!GL(e))return;const i=function(t){const e=t.match(HL);if(!e)return;return{Ht:e[1],gs:e[2]}}(e.U.description),s=i.Ht,n=i.gs;if(this.A6(s,n))return;const r=this.uW.LI(hs.jV,t.o,s,n,!1,Lr.TTML);this.tt(r),this.S6.set(t.xC,r);for(let e of t.L.uC)GL(e)&&this.T6(e);t.yn(No.UI,this.k6)}A6(t,e){return this.Z.uC.some((i=>i.xh===t&&i.gs===e))}T6(t){if(!t.Ht)return;const e=this.S6.get(t.Ht.xC),i=$E(t.U.text,e,{DV:0,NV:1/0,MV:t.FO});for(let t of i)e.dW(t)}async er(){for(let t of this.w6.uC)t.fn(No.UI,this.k6);for(let t of this.Z.uC)this.uW._W(t);this.S6.clear(),await super.er()}async gn(){this.y6(),await super.gn()}constructor(t,e){super(),this.uW=t,this.w6=e,this.S6=ea(),this.VG=async t=>{const e=t.Ht;if(e.Aw||await e.vy(No.iC),e.Aw===Lr.ID3){for(;0===e.L.V;)await e.vy(No.UI);this.b6(e)}},this.WG=t=>{const e=t.Ht;if(e.Aw!==Lr.ID3||!this.S6.has(e.xC))return;const i=this.S6.get(e.xC);this.it(i),this.uW._W(i),e.fn(No.UI,this.k6)},this.k6=t=>{GL(t.BO)&&this.T6(t.BO)},this.p6()}};function GL(t){return function(t){return WL(t)&&HL.test(t.description)}(t.U)}var HL=/^Track:(.+),Lang:(.+)$/;r(),r();var Du=[Ti.Sy,Ti.Ay,Ti.hb,Ti.fb];r();var Bn=class extends pe{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(Ti.Ay),this.errorObject=t}};r(),r(),r();var Ps=class extends pe{constructor(t){super(Ti.Sy),this.E6=t}};r();var ZL=class extends pe{constructor(t){super("ub"),this.E6=t}},XL=new ju,zL=class extends pe{constructor(t){super("Ws"),this.session=t}},qL=class extends Co{get x6(){return this.R6}JS(){return this.I6=!0,XL.Jo((t=>this.C6(t)),this.WT.Vw)}async C6(t){try{J(t),await this.P6.zW(t);const e=await this.P6.qW(this.D6.Tw,this.D6.Tb,t);await this.N6.JS(this.D6.Tw,this.D6.Tb,e)}catch(t){th(t);const e=t instanceof Js?t.Ub:void 0,i=new sr(Qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,e);throw this.Ss(i),i}}async $W(t,e){let i;try{i=function(t){return Ph(t,dp())}(t)?await this.P6.aU(new j(t),this.WT.Vw):await this.P6.uU(new j(t),e,this.WT.Vw)}catch(t){if(Je(t))return;throw t}if(this.WT.Vw.Bw)return;const s=this.M6,n=new os;this.M6=n;try{await this.N6.tr(i),await Fe(100)}catch(t){const e=t instanceof Js?t.Ub:void 0;throw new sr(Qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,e)}finally{void 0!==s&&await s.Vb,n.Ob(),this.M6===n&&(this.M6=void 0)}}Ss(t){const e=t instanceof sr?t:new sr(Qa.CONTENT_PROTECTION_ERROR,t.message,t);this.wo(new Bn(e)),this.Ws()}L6(){this.N6.fn("gb",this.nT),this.N6.fn(Ti.fb,this.B6),this.N6.fn("lt",this.O6),this.F6=!1,this.R6=!1,this.WT.Yw(),this.wo(new zL(this))}async Ws(){let t;this.$o();do{t=this.M6,void 0!==t&&await t.Vb}while(this.M6!==t);this.L6(),await this.N6.Ws().catch(It)}constructor(t,e,i){super(),this.N6=t,this.P6=e,this.D6=i,this.I6=!1,this.F6=!1,this.WT=new da,this.R6=!1,this.nT=t=>{if(!this.WT.Vw.Bw)switch(t.wb){case"license-request":case"license-renewal":this.$W(t.gb,t.yb).catch((t=>this.Ss(t)));break;default:this.Ss(new sr(Qa.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.wb))}},this.B6=t=>{this.N6.mb.Lb(((t,e)=>{switch(t){case"usable":Ms.Ug((()=>{this.F6=!0,this.wo(new Ps(e))}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.wo(new ZL(e))}})),this.R6=!0,this.wo(t)},this.O6=t=>{this.Ss(new sr(Qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.yn("gb",this.nT),t.yn(Ti.fb,this.B6),t.yn("lt",this.O6),t.XS.then((()=>this.L6()),(t=>this.Ss(t)))}},YL=class extends Co{get aT(){return this.iT}get V6(){return this.W6.every((t=>t.x6))}XW(){return this.U6.XW()}G6(t){return this.H6||(this.H6=this.Z6(t)),this.H6}async Z6(t){J(t);const e=await this.U6.aU(new j(dp()),t);if(J(t),!this.hT)throw new g("Invalid MediaKeys when setting ServerCertificate");await this.hT.uT(e.buffer)}async X6(t){if(!this.hT)throw new g("Invalid MediaKeys when creating KeySession");try{this.z6.push(t);const e=await this.hT.oT("temporary"),i=new qL(e,this.U6,t);return this.W6.push(i),i.yn(Du,this.q6),i.yn("Ws",this.Y6),i}finally{we(this.z6,t)}}K6(t){if(t.j6)return!1;for(const e of this.W6)if(KL(e.D6,t))return!0;for(const e of this.z6)if(KL(e,t))return!0;return!1}async gn(){this.hT=void 0,this.$o();const t=this.W6.slice();En(this.W6),await Promise.all(t.map((t=>t.Ws()))),this.Q6=void 0,this.U6.Hw()}constructor(t,e,i){super(),this.W6=[],this.H6=void 0,this.z6=[],this.q6=t=>{if(t.type===Ti.fb)return null!=this.Q6||(this.Q6=new lp),t.mb.Lb(((t,e)=>{this.Q6.Mb(e,t)})),void(this.V6&&this.wo(new te(this.Q6)));this.Ds(t)},this.Y6=t=>{t.session.fn(Du,this.Ds),t.session.fn("Ws",this.Y6),we(this.W6,t.session),this.Q6=void 0},this.iT=t,this.hT=e,this.U6=i}};function KL(t,e){return!t.j6&&t.Tw===e.Tw&&Ph(t.Tb,e.Tb)}var jL=class extends Co{get J6(){var t;return null==(t=this.iT)?void 0:t.aT}get gH(){return this.U6}set gH(t){this.U6=t}Dn(t,e){this.jG=t,this.dJ(e)}dJ(t){this.DT=t,this.t9(this.WT.Vw).catch(Eu)}_J(t){this.e9(t,this.WT.Vw).catch(Eu)}async e9(t,e){var i,s;J(e);var n;if(null==(i=this.DT)?void 0:i.eH)for(const i of null!=(n=null==(s=this.DT)?void 0:s.eH)?n:[]){var r;const s=Fo(t,(t=>t.i9===i.aT.xw));if(void 0!==(null==s?void 0:s.s9)&&!(null==(r=i.EG)?void 0:r.some((t=>Ph(s.s9,t)))))try{return void await this.n9(i.aT.Tw,s.s9,e)}catch(t){th(t)}}}async t9(t){if(!Ms.Ys.Qg||!await this.r9(t))return this.DT&&this.DT.o9?await this.h9(t):void 0}async r9(t){var e,i;if(!(null==(e=this.DT)?void 0:e.eH))return!1;let s=!1;var n;for(const e of null!=(n=null==(i=this.DT)?void 0:i.eH)?n:[]){var r;for(const i of null!=(r=e.EG)?r:[])try{await this.n9(e.aT.Tw,i,t),s=!0}catch(t){th(t)}if(s)return!0}return!1}async n9(t,e,i){if(J(i),!e.byteLength)return;if(!this.DT||!this.DT.eH.length)throw new sr(Qa.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==im&&t!==nm&&t!==sm)return void 0;const s=cT(t,e),n=this.DT.eH;let r;for(const e of n){J(i);const n=s[e.aT.Ew];if(n&&e.aT.Tw===t)try{const t=await this.a9(e,i);t.XW()&&await t.G6();const s=this.FB.OR,r={Tw:e.aT.Tw,Tb:n,j6:s};if(this.u9(t,r)){const e=await t.X6(r);await e.JS()}return}catch(t){th(t),r=t}}throw await Ms.Gp()?new sr(Qa.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new sr(Qa.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async h9(t){var e;const i=null==(e=this.DT)?void 0:e.eH;if(i)for(const e of i){J(t);try{const i=await this.a9(e,t);return void(i.XW()&&await i.G6())}catch(t){th(t)}}}u9(t,e){return Ms.Ys.jg||this.FB.XB.ZB||!t.K6(e)}a9(t,e){return this.Qo.Jo((e=>this.c9(t,e)),e)}async c9(t,e){if(J(e),!this.DT||!this.U6||!this.jG)throw new g("Not initialized");if(this.iT){if(this.iT.aT!==t.aT)throw new g("Internal key system error");return this.iT}const i=this.U6,s=Bo({},t,{EH:t.EH.map((e=>{var s;return Bo({},e,{persistentState:null!=(s=e.persistentState)?s:i.dU(t.aT),gT:e.gT||i.gT(t.aT)})}))}),n=await this.jG.aJ(s.aT,s.EH),r=i.kG(s),o=new YL(s.aT,n,r);return o.yn(Du,this.Ds),this.iT=o,o}Ss(t){if(Je(t))return;const e=t instanceof sr?t:new sr(Qa.CONTENT_PROTECTION_ERROR,t.message,t);this.wo(new Bn(e))}async er(){this.jG=void 0,this.DT=void 0,this.WT.Yw(),this.WT=new da,await this.l9()}async l9(){await this.Qo.Yw();const t=this.iT;t&&(t.fn(Ti.hb,this.Ds),this.iT=void 0,await t.gn())}async Hw(){this.$o(),this.FB.fn(hh.Iy,this.d9),await this.er(),await this.Qo.gn()}constructor(t){super(),this.WT=new da,this.Qo=new ju,this.DT=void 0,this.U6=void 0,this.jG=void 0,this.iT=void 0,this.d9=t=>{this.n9(t.Tw,t.Tb,this.WT.Vw).catch((t=>this.Ss(t)))},this.FB=t,this.FB.yn(hh.Iy,this.d9)}};r();var QL=class extends pe{constructor(t){super(Ti.Oy),this.currentTime=t}};r();var JL=class extends Co{get sI(){return void 0!==this.f9?this.f9.sI:Ht.$B}P4(){var t;null==(t=this.f9)||t.P4()}er(){var t;null==(t=this.f9)||t.er()}Hw(){this.$o(),void 0!==this.f9&&(this.f9.Hw(),this.f9=void 0)}_9(t){if(this.f9===t)return;const e=this.sI;void 0!==this.f9&&this.f9.Hw(),this.f9=t,void 0!==t&&(t.yn(tl.tC,this.Ds),t.P4());const i=this.sI;e!==i&&this.wo(new au(this.v9.SR,i))}constructor(t){super(),this.v9=t}};r();var $L=class extends mo{get ka(){var t;return null!=(t=this.su)?t:this.su=tB(this)}m9(t,e,i){const s=new Oi(t,e,i,!1);return this.dW(s),s}g9(t){this.eW(t)}constructor(t,e,i){super(t,e,"",i,void 0,Lr.WEBVTT)}};function tB(t){return nh(Qh(t),{get type(){return t.Aw},addCue:(e,i,s)=>t.m9(e,i,s).ka,removeCue(e){t.g9(e.OO)}})}r();var eB=class extends IL{get ka(){var t;return null!=(t=this.su)?t:this.su=tB(this)}m9(t,e,i){const n=this.F5(new s.VTTCue(t,e,i));return this.zE?this.dW(n):this.p9.push(n),n}g9(t){we(this.p9,t),this.eW(t)}gn(){var t;super.gn(),null==(t=this.E5)||t.removeEventListener("load",this.w9),En(this.p9)}constructor(t,e){var i;super(t,e),this.zE=!1,this.p9=[],this.w9=()=>{var t;null==(t=this.E5)||t.removeEventListener("load",this.w9),this.zE=!0;for(const t of this.p9)this.dW(t);En(this.p9)},null==(i=this.E5)||i.addEventListener("load",this.w9),this.Aw=Lr.WEBVTT}},iB=Z.Um||Z.Hm,sB=Z.Lg,nB=Z.$m,rB=Z.$m&&Z.iu,oB=class extends Co{get N4(){return this.y9}get gR(){return this.jG?this.jG.gR:se.mB()}get wR(){const t=this.QG;if(!t||S(t.getTime()))return;const e=1e3*this.SR;return new Date(t.getTime()+e)}get QG(){if(this.YG.getStartDate)return this.aZ&&this.b9||(this.b9=this.YG.getStartDate()),this.b9}get SR(){return this.A9?this.A9.SR:void 0!==this.S9?this.S9:this.QT.currentTime}get Lu(){return this.Yu}get ct(){return this.A9?this.A9.ct:this.jG?this.jG.ct:this.QT.duration}get RR(){return this.hI?this.T9():this.A9?this.A9.RR:this.QT.ended||this.k9}T9(){return void 0!==this.S9&&this.ct===this.S9}get lt(){return this.zG}get YG(){return this.QT}get qR(){return this.E9?this.x9:this.A9?this.A9.qR:this.QT.paused}get JR(){return this.Ro.JL(se.xn(this.QT.played))}get Ti(){return this.QT.offsetHeight*Ms.Ys.Yg}get ji(){return this.QT.offsetWidth*Ms.Ys.Yg}get Ca(){return this.sa}get lH(){return this.Zo}get sI(){return this.R9.sI}get rI(){return this.jG?this.jG.rI:se.mB()}get hI(){return this.A9?this.A9.hI:this.aZ||this.QT.seeking&&!this.x4}get E4(){return this.A9?this.A9.E4:this.x4}get O4(){return 0!==this.I9}get GR(){return this.A9?this.A9.GR:this.QT.muted}set GR(t){this.A9?this.A9.GR=t:(this.QT.muted=t,this.C9())}get KR(){return this.A9?this.A9.KR:void 0!==this.P9?this.P9:this.QT.playbackRate}set KR(t){this.A9?this.A9.KR=t:this.qR||this.y9?(this.P9=t,this.D9()):(this.P9=void 0,this.QT.playbackRate=t,this.D9())}D9(){const t=this.KR;this.N9!==t&&(this.N9=t,this.wo(new Nu(this.SR,t)))}get M9(){return this.rZ}get vI(){return this.A9?this.A9.vI:this.QT.volume}set vI(t){this.A9?this.A9.vI=t:(this.QT.volume=t,this.C9())}C9(){const t=this.vI,e=this.GR;this.L9===t&&this.B9===e||(this.L9=t,this.B9=e,this.wo(new rs(this.SR,this.vI)))}UR(){return ED(this.QT)}kI(){this.O9||(this.O9=!0);const t=this.F9();return this.V9(),t}V9(){this.E9?this.x9&&(this.x9=!1,this.wo(new H(this.SR))):this.W9()}W9(){if(this.A9)this.A9.kI();else{Z.$m&&!Z.iu&&this.QT.preload===hl.QH&&(this.QT.preload=hl.$V);const t=this.KR,e=this.QT.play();t!==this.YG.playbackRate&&(this.KR=t),this.k9=!1,yt(e)?e.then(this.U9,this.G9):this.H9.F4()&&this.Z9()}}TI(){this.E9?this.x9||(this.x9=!0,this.wo(new fl(this.SR))):this.X9()}X9(){this.A9?this.A9.TI():(this.QT.pause(),this.H9.tr()),this.z9(new Bu)}F9(){const t=new os;return this.q9.push(t),t.Vb}Y9(){for(const t of this.q9)t.Ob(void 0);En(this.q9)}z9(t){for(const e of this.q9)e.Fb(t);En(this.q9)}Z9(){this.E9||this.A9||this.Y9()}K9(t){this.E9||this.A9||this.z9(t)}Eb(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.A9?this.A9.Eb(t,e,i):(this.j9.Yw(),this.j9=new da,this.Q9=So(this.J9(t,e,i,this.Q9,this.j9.Vw),this.j9).catch(It))}ZG(t){const e=this.QG;if(!e||S(e.getTime()))return;const i=(t.getTime()-e.getTime())/1e3;this.Eb(i)}async J9(t,e,i,s,n){try{if(this.S9=t,this.t8=t,this.e8=Ms.Vg(),i&&!this.aZ?this.x4=!0:(this.aZ=!0,this.x4=!1),this.k9&&!this.T9()&&(this.k9=!1),this.x4?(this.wo(new uM(this.SR)),Z.Im&&(t+=.05)):this.wo(new L(t)),await s.catch(It),J(n),this.jG&&!this.jG.PJ())return void this.i8();for(this.s8&&this.n8(),this.R9.sI===Ht.$B&&await this.R9.vy(tl.tC,n);0===this.QT.seekable.length||rB&&!this.O9;){const t={stack:[],error:void 0,hasError:!1};try{const e=zs(t,da.Qw([n]),!1);await Promise.race([AA(this.QT,"timeupdate",e.Vw),Fe(100,e.Vw)]),J(n)}catch(e){t.error=e,t.hasError=!0}finally{lo(t)}}let o=sM(this.gR,t,.05),h=this.rI,a=!0,u=!1;for(;;){const t={stack:[],error:void 0,hasError:!1};try{var r;if(h=this.rI,h.V>0&&!h.kr(o)&&(o=h.qL(o),a=!0),e&&!this.QT.fastSeek){const t=this.gR;if(!t.kr(o)){const e=sM(t,o,1);e!==o&&(o=e,a=!0)}}if(nB){const t=this.r8();void 0!==t&&o>t&&(o=t,a=!0)}if(!u){const t=this.o8();void 0!==t&&o>t&&(u=!0,await this.h8(t,!1,n),await AA(this.QT,"seeked",n),J(n),a=!0)}if(a){a=!1,await this.h8(o,e,n),J(n);let t=this.SR;h=this.rI,o=h.qL(o);let i=1;for(;_.abs(o-t)>=Si;)h=this.rI,o=aB(o,h,i),await this.h8(o,e,n),J(n),t=this.SR,i++}if(!(this.QT.seeking||this.R9.sI<Ht.tO))break;const i=zs(t,da.Qw([n]),!1);await Promise.race([AA(this.QT,"seeked",i.Vw),this.vy([Ti.Xy,Ti.xy],i.Vw),this.R9.vy(tl.tC,i.Vw),null==(r=this.jG)?void 0:r.vy(Mo.iJ,i.Vw)].filter(ji)),J(n)}catch(e){t.error=e,t.hasError=!0}finally{lo(t)}}this.i8()}catch(t){if(Je(t))return;0}}async h8(t,e,i){J(i);let s=this.rI;if(t=s.qL(t),this.s8){let e=!0;for(;e||this.R9.sI<Ht.eO;){const n={stack:[],error:void 0,hasError:!1};try{if(s=this.rI,s.kr(t)||(t=s.qL(t),e=!0),e){e=!1,this.S9=t,this.a8(this.SR);continue}const r=zs(n,da.Qw([i]),!1);await Promise.race([this.vy(Ti.xy,r.Vw),this.R9.vy(tl.tC,r.Vw)])}catch(t){n.error=t,n.hasError=!0}finally{lo(n)}}J(i)}const n=AA(this.QT,"seeking",i);e&&this.QT.fastSeek?this.QT.fastSeek(t):this.QT.currentTime=t,this.S9=void 0,this.a8(this.SR),this.QT.seeking&&await n}r8(){if(!this.jG||!this.jG.EJ)return;const t=this.jG.xJ,e=this.jG.RJ,i=t&&e?t.Sn(e):t||e;if(!i||0===i.V)return;const s=i.Cn(i.V-1),n=i.jn(i.V-1);return _.max(s,n-.001)}o8(){if(!this.jG||!this.jG.EJ)return;const t=this.jG.RJ;if(!t||0===t.V)return;const e=t.Cn(t.V-1);let i=t.jn(t.V-1)-.02;return i-=.001,_.max(e,i)}a8(t){this.t8!==t&&(this.t8=t,this.x4?this.wo(new uM(t)):this.wo(new L(t)))}i8(){const t=this.x4;this.aZ=!1,this.x4=!1,this.e8=0,this.t8=NaN,this.s8&&this.u8(),t?(this.wo(new QL(this.SR)),this.c8()):(this.wo(new ha(this.SR)),this.l8=!0),this.Gj()}n8(){this.E9||(this.x9=this.qR,this.E9=!0,this.X9())}u8(){this.E9&&(this.E9=!1,this.x9||this.V9())}DJ(t){for(const e of t){if(e.Aw===Mr.mW&&jD.DJ(e,this.QT))return e;if(e.Aw===Mr.gW&&hM.DJ(e))return e}}be(){this.rZ=!1,Ur(this.QT)&&(this.QT.style.display="none")}ge(){this.rZ=!0,Ur(this.QT)&&(this.QT.style.display="block")}get nt(){return this.d8}get zl(){return this.gZ}LI(t,e,i,s,n,r,o,h,a){const u=new mo(t,e,i,s,n,r,o,a,h);return this.Ll.tt(u),this.f8.tt(u),u}dH(t){const{Lt:e,xh:i,gs:n}=t;if("function"==typeof this.QT.addTextTrack&&"function"==typeof s.VTTCue){const{track:t,trackElement:s}=this._8("data:text/vtt,WEBVTT%0A%0A",e,i,n);let r=new eB(t,s);return this.v8.tt(r),this.m8.push(r),r}const r=new $L(e,i,n);return this.Ll.tt(r),this.f8.tt(r),r}hH(){return!0}uH(t,e,i,s,n){const{track:r,trackElement:o}=this._8(t,e,i,s,n),h=new IL(r,o);return this.v8.tt(h),this.m8.push(h),h}_8(t,e,i,s,n){const r=h.createElement("track");r.src=Ki(t),r.kind=e,r.label=null!=i?i:"",s&&(r.srclang=s),r.default=!!n,r.id=uP(),this.QT.appendChild(r);return{track:this.QT.textTracks.getTrackById(r.id),trackElement:r}}_W(t){this.Ll.it(t),this.f8.it(t)}fH(){for(const t of this.Ll.uC.slice())t.gn();this.Ll.er();for(const t of this.m8.slice())this.v8.it(t),t.gn();En(this.m8)}xH(){let t=this.QT.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.g8),t.addEventListener("removetrack",this.p8),t.addEventListener("change",this.w8))}mH(){let t=this.QT.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.g8),t.removeEventListener("removetrack",this.p8),t.removeEventListener("change",this.w8))}y8(t){t.mode=bh.NC;const e=new FL(t);this.v8.tt(e),this.f8.tt(e)}b8(t,e){const i=()=>{cB(t)&&(t.removeEventListener("cuechange",i),this.v8.tt(new IL(t,e)))};t.addEventListener("cuechange",i),t.mode=bh.NC}A8(t){let e=this.QT.getElementsByTagName("track");for(let i=0;i<e.length;i++){let s=e[i]||e.item(i);if(s.track===t)return s}}S8(){if(0===this.v8.V)return;const t=this.rI;if(0===t.V)return;const e=t.Cn(0);if(this.T8!==e){for(const t of this.v8.uC)t.iW(e);this.T8=e}}Dn(t){return this.k8.Jo((async e=>{if(J(e),this.jG)throw new g("Already loaded a media source");let i;if(t.Aw===Mr.mW)i=new jD(t,this,this.fJ,this.Pw),this.s8=!1,this.R9._9(this.E8());else{if(t.Aw!==Mr.gW)throw new g("Unsupported configuration");{this.s8=iB;const e=this.E8();i=new hM(t,this,e,this.fJ,this.Pw,void 0,this.Q3),this.R9._9(e),sB&&(this.yn(Ti.sb,this.x8),this.R9.yn(tl.tC,this.I8))}}return this.jG=i,await i.Tj(),i}))}E8(){return this.s8?new mM(this):new Za(this)}C8(){if(this.y9)return;const t=this.KR;this.y9=!0,this.KR=t,this.QT.playbackRate=0,this.R9&&this.R9.P4()}P8(){if(!this.y9)return;const t=this.KR;this.y9=!1,this.KR=t,this.D8()}D8(){this.QT.currentTime=this.QT.currentTime,this.R9&&this.R9.P4()}async er(){this.aZ=!1,this.x4=!1,this.l8=!1,Ms.Wg(this.I9),this.I9=0,this.Ro=se.mB(),this.j9.Yw(),this.S9=void 0,this.t8=NaN,this.b9=void 0,this.s8=!1,this.E9=!1,this.zG=void 0,this.k9=!1,this.N8=void 0,this.T8=0,this.M8=!1,this.O9=!1,this.L8&&(this.B8(),this.L8=!1),this.z9(new Bu),this.R9._9(new Za(this)),this.H9.er(),this.v8.er(),this.P8(),sB&&(uo(this.O8),this.O8=0,this.fn(Ti.sb,this.x8)),await this.k8.Yw(),await this.k8.Jo((async()=>{this.jG&&(await this.jG.Hw(),this.jG=void 0,Z.Im&&Z.Pm<3&&this.F8())}))}F8(){this.V8();const t=this.QT,e=t.parentElement,i=t.tagName.toLowerCase();this.QT=qO(i),this.retainMediaElementState(t),YO(t),null==e||e.replaceChild(this.QT,t),this.B8(),this.R9._9(this.E8()),this.H9.fn(tl.VL,this.W8),this.H9.Hw(),this.H9=new wM(this),this.H9.yn(tl.VL,this.W8),this.rZ?this.ge():this.be(),this.wo(new Vi),this.wo(new ok)}retainMediaElementState(t){this.YG.muted=t.muted,this.YG.volume=t.volume}async Hw(){this.L8=!1,this.V8(),this.mH(),await this.er(),await this.k8.gn(),this.H9.Hw(),this.R9.Hw(),await this.fJ.Hw(),this.fH(),this.Ll.gn(),this.v8.gn(),await this.U8.gn(),this.G8.gn(),this.d8.gn(),this.$o()}B8(){this.YG.addEventListener("play",this.H8),this.YG.addEventListener("pause",this.Z8),this.YG.addEventListener("timeupdate",this.X8),this.YG.addEventListener("progress",this.z8),this.YG.addEventListener("loadstart",this.q8),this.YG.addEventListener("ended",this.Y8),this.YG.addEventListener("ratechange",this.K8),this.YG.addEventListener("volumechange",this.j8),this.YG.addEventListener("durationchange",this.Q8),this.YG.addEventListener("resize",this.J8),this.YG.addEventListener("loadedmetadata",this.J8),this.YG.addEventListener("error",this.t7),this.YG.addEventListener("emptied",this.e7),this.YG.addEventListener("seeked",this.i7),this.YG.addEventListener("seeking",this.s7),dr()?(this.QT.addEventListener("encrypted",this.n7),this.QT.addEventListener("waitingforkey",this.r7)):void 0!==s.WebKitMediaKeys&&"function"==typeof s.WebKitMediaKeys.isTypeSupported?this.QT.addEventListener("webkitneedkey",this.o7):Nm()?this.QT.addEventListener("webkitneedkey",this.h7):void 0!==s.MSMediaKeys&&"function"==typeof s.MSMediaKeys.isTypeSupported&&this.QT.addEventListener("msneedkey",this.a7)}V8(){this.YG.removeEventListener("play",this.H8),this.YG.removeEventListener("pause",this.Z8),this.YG.removeEventListener("timeupdate",this.X8),this.YG.removeEventListener("progress",this.z8),this.YG.removeEventListener("loadstart",this.q8),this.YG.removeEventListener("ended",this.Y8),this.YG.removeEventListener("ratechange",this.K8),this.YG.removeEventListener("volumechange",this.j8),this.YG.removeEventListener("durationchange",this.Q8),this.YG.removeEventListener("resize",this.J8),this.YG.removeEventListener("loadedmetadata",this.J8),this.YG.removeEventListener("error",this.t7),this.YG.removeEventListener("encrypted",this.n7),this.YG.removeEventListener("waitingforkey",this.r7),this.YG.removeEventListener("webkitneedkey",this.o7),this.YG.removeEventListener("webkitneedkey",this.h7),this.YG.removeEventListener("msneedkey",this.a7),this.YG.removeEventListener("emptied",this.e7),this.YG.removeEventListener("seeked",this.i7),this.YG.removeEventListener("seeking",this.s7)}u7(){this.A9||(this.Ro=this.JR,this.A9=dM(this),this.V8(),this.A9.yn(cM,this.Ds))}l7(){if(!this.A9)return;const t=this.A9;this.A9=void 0,this.R9.P4(),fM(this,t),t.Hw(),this.B8()}c8(){const t=this.SR;this.wo(new ri(t,void 0)),this.N8=t}Gj(){this.k9||!this.RR||this.hI||(this.k9=!0,this.wo(new Te(this.SR)))}MH(t){this.zG=t,this.z9(this.zG),this.wo(new yM(this.zG))}get OR(){return!!this.QT.webkitCurrentPlaybackTargetIsWireless}get d7(){return this.f7}get XB(){return Bo({},XD)}_7(){this.f7||(jO(this.QT,Ms.Ys),this.f7=!0)}v7(t){t.appendChild(this.QT)}e3(){sB&&this.x8(),this.R9.P4()}get gH(){return this.fJ.gH}set gH(t){this.fJ.gH=t}get m7(){return this.Q3}set m7(t){this.Q3=t}get J6(){return this.fJ.J6}CI(){this.fJ.l9().catch(It),this.v8.er()}get yI(){return this.M8}set yI(t){this.M8=t,this.L8&&!this.M8&&(this.L8=!1,this.B8())}constructor(t,e,i,s){super(),this.zG=void 0,this.rZ=!0,this.jG=void 0,this.k8=new ju,this.A9=void 0,this.sa=new N,this.Zo=new MI,this.m8=[],this.S9=void 0,this.e8=0,this.t8=NaN,this.b9=void 0,this.l8=!1,this.N8=void 0,this.T8=0,this.aZ=!1,this.x4=!1,this.g7=Ht.$B,this.I9=0,this.Q9=Promise.resolve(),this.j9=new da,this.q9=[],this.Ro=se.mB(),this.P9=void 0,this.N9=1,this.B9=!1,this.L9=1,this.k9=!1,this.M8=!1,this.L8=!1,this.s8=!1,this.E9=!1,this.x9=!1,this.y9=!1,this.f7=!1,this.O8=0,this.O9=!1,this.g8=t=>{const e=t.track,i=this.A8(e);if(!uB(this.v8,e)){if(Z.$m){if(e.kind===hs.$V)return void this.y8(e);if(e.kind===hs.QV&&""===e.label&&""===e.language&&!cB(e))return void this.b8(e,i)}this.v8.tt(new IL(e,i))}},this.p8=t=>{const e=uB(this.v8,t.track);e&&this.v8.it(e)},this.w8=()=>{for(let t=0;t<this.v8.V;t++){let e=this.v8.lC(t);e instanceof IL&&e.B5()}},this.x8=()=>{if(void 0===this.jG||!zD(this.jG))return;if(this.qR)return;const t=this.jG,e=t.J3,i=t.t4;if(!e||!i)return;if(t.EJ)return void this.P8();if(t.sI===oM.X2)return;const s=e.gR,n=i.gR;if(0===s.V&&0===n.V)return void this.P8();const r=this.SR;if(r<s.Cn(0)||r<n.Cn(0))return void this.P8();if(s.kr(r)!==n.kr(r)){if(t.CJ(r))return;this.C8()}else if(this.P8(),!this.O8&&this.H9.F4()){s.$L(n).nB(r,r+.5)&&(this.O8=it(this.p7))}},this.p7=()=>{this.O8=0,this.x8()},this.I8=()=>{if(this.hI||this.E4)return;if(this.R9.sI>=Ht.eO)return;if(void 0===this.jG||!zD(this.jG))return;const t=this.jG,e=t.J3,i=t.t4;if(!e||!i)return;const s=this.SR,n=e.gR,r=i.gR;if(!n.kr(s)||!r.kr(s))return;n.$L(r).nB(s-5,s)&&(this.y9?this.P8():this.D8())},this.H8=()=>{this.wo(new H(this.SR))},this.Z8=()=>{this.K9(new Bu),this.wo(new fl(this.SR))},this.W8=()=>{this.Z9(),this.wo(new Wi(this.SR))},this.K8=()=>{this.D9()},this.Q8=()=>{this.wo(new Ls(this.ct))},this.z8=()=>{this.wo(new K(this.SR))},this.q8=()=>{this.wo(new Di)},this.i7=()=>{this.aZ||this.x4||this.l8?this.l8=!1:this.wo(new ha(this.SR))},this.s7=()=>{this.a8(this.SR),this.l8=!1},this.X8=()=>{const t=this.SR,e=this.hI,i=this.R9.sI<Ht.eO&&!this.RR,s=void 0!==this.N8,n=s&&this.N8!==t;this.S8(),(e||!s||n&&!i)&&this.c8()},this.Y8=()=>{this.Gj()},this.t7=()=>{if(null!==this.QT.error){const e=this.QT.error;var t;this.MH(new dk(null!=(t=e.code)?t:lk.DECODE,e.message||"Error decoding media",void 0,e.msExtendedCode))}},this.e7=()=>{this.M8&&(this.V8(),this.L8=!0)},this.w7=t=>{if(Ms.Wg(this.I9),this.I9=0,t.readyState<=Ht.tO)if(this.aZ||this.x4){const e=Ms.Vg()-this.e8;if(e<250)return void(this.I9=Ms.Ug((()=>this.w7(t)),250-e))}else if(void 0!==this.jG&&this.jG.CJ(this.SR))return void(this.I9=Ms.Ug((()=>this.w7(t)),250));this.g7!==t.readyState&&(this.g7=t.readyState,this.wo(t))},this.j8=()=>{this.C9()},this.J8=()=>{this.fI>0&&this.cI>0&&this.wo(new P)},this.n7=t=>{this.wo(new lg(t.initDataType,t.initData||new ArrayBuffer(0)))},this.r7=()=>{this.wo(new dg)},this.a7=t=>{const e=t.initData,i=e?kc(e).buffer:new ArrayBuffer(0);this.wo(new lg(im,i))},this.o7=t=>{if(t.initData){const e=function(t){try{const e=ra(t),i=new Ri,s=E(e,i,as(e,i,!0));return yr(qg(s,!0))}catch(t){return}}(t.initData);if(!e)return;this.wo(new lg(nm,e))}else this.wo(new lg(nm,new ArrayBuffer(0)))},this.h7=t=>{const e=t.initData,i=e?kc(e).buffer:new ArrayBuffer(0);this.wo(new lg(im,i))},this.U9=()=>{this.Z9()},this.G9=t=>{this.K9(t)},this.y7=t=>{this.wo(t),t.type===Ti.Ay&&this.MH(Xs(t.errorObject))},this.QT=t,this.Pw=e,this.Yu=i,this.gZ=s,this.R9=new JL(this),this.R9.yn(tl.tC,this.w7),this.R9._9(new Za(this)),this.H9=new wM(this),this.H9.yn(tl.VL,this.W8),this.fJ=new jL(this),this.fJ.yn(Du,this.y7),this.Ll=new ua,this.v8=new ua,this.G8=new Fu([this.Ll,this.v8]),this.U8=new UL(this,this.G8),this.d8=new Fu([this.G8,this.U8.Z]),this.f8=new su(this),this.B8(),this.xH()}};var hB=.01;function aB(t,e,i){if(void 0===i&&(i=0),!e.V)return 0;let s=e.qL(t);const n=hB*i;return s===e.Cn(0)?s+=n:s===e.jn(e.V-1)&&(s-=n),s}function uB(t,e){for(let i of t.uC)if(i.IO===e)return i}function cB(t){return!!t.cues&&t.cues.length>0}r();var lB={FQ:void 0,VQ:void 0,WQ:void 0,UQ:void 0,GQ:void 0,HQ:void 0,ZQ:void 0,XQ:void 0,zQ:void 0,qQ:void 0},dB=class extends Co{get ka(){return this.su||(this.su=VD(this)),this.su}get FQ(){}get VQ(){}get WQ(){}get UQ(){}get GQ(){}get HQ(){}get b7(){}get ZQ(){}get XQ(){}get zQ(){}get qQ(){}constructor(...t){super(...t),this.su=void 0}},fB=class extends oB{AI(){}get cI(){return 0}get fI(){return 0}constructor(t,e,i){super(t,e,i,new dB)}};r(),r();var _B=class{get we(){return this.A7}be(){this.A7.style.display="none"}ge(){this.A7.style.display="block"}v7(t){t.appendChild(this.A7)}gn(){Gt(this.A7)}constructor(t=5){let e=s.document.createElement("div");e.className="theoplayer-texttracks",e.style.position="absolute",e.style.display="none",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.width="100%",e.style.height="100%",e.style.lineHeight="1.3em",e.style.zIndex=""+t,this.A7=e,this.ge()}};function vB(t,e){return Bo({},e,jA(function(t){return{FQ:t.FQ,VQ:t.VQ,WQ:t.WQ,UQ:t.UQ,GQ:t.GQ,HQ:t.HQ,ZQ:t.ZQ,XQ:t.XQ,zQ:t.zQ,qQ:t.qQ}}(t)))}function mB(t){return t.WQ&&Tm(t.WQ,"%")?Number(t.WQ.replace("%",""))/100:t.WQ&&Tm(t.WQ,"em")?Number(t.WQ.replace("em","")):1}r(),r(),r(),r(),r();var gB=class t{get S7(){return this.T7+this.ji}set S7(t){this.T7=t-this.ji}get k7(){return this.E7+this.Ti}set k7(t){this.E7=t-this.Ti}x7(t){return this.T7<t.S7&&this.S7>t.T7&&this.E7<t.k7&&this.k7>t.E7}TO(t){return this.T7<=t.T7&&t.S7<=this.S7&&this.E7<=t.E7&&t.k7<=this.k7}xb(){return new t(this.T7,this.E7,this.ji,this.Ti)}R7(e){const i=this.T7+e,s=this.E7+e,n=_.max(0,this.ji-2*e),r=_.max(0,this.Ti-2*e);return new t(i,s,n,r)}I7(e){const i=_.min(this.T7,e.T7),s=_.max(this.S7,e.S7),n=_.min(this.E7,e.E7),r=_.max(this.k7,e.k7);return new t(i,n,s-i,r-n)}constructor(t,e,i,s){this.T7=t,this.E7=e,this.ji=i,this.Ti=s}},ie=class{C7(t){const e=this.P7(t);if(!e)return!1;for(const t of e)Gt(t);return this.D7(t),!0}get Ht(){return this.KO}get YG(){return this.QT}get Lu(){return this.Yu}get N7(){return this.M7}get L7(){return this.B7}Tj(){this.O7(),this.KO.L.uC.forEach((t=>this.dW(t))),this.Lu.yn(Ka.pn,this.F7),this.re(this.Lu.Mu,this.Lu.Pu)}V7(t){this.B7=t,this.M7=vB(this.B7,this.W7),this.M7.FQ&&(this.YG.style.fontFamily=this.M7.FQ),this.re(this.Lu.Mu,this.Lu.Pu),this.U7(!0)}G7(){return this.M7}H7(t){return this.Z7.has(t.xC)}O7(){this.KO.yn(No.UI,this.X7),this.KO.yn(No.HI,this.z7),this.KO.yn(No.la,this.q7)}Y7(){this.KO.fn(No.UI,this.X7),this.KO.fn(No.HI,this.z7),this.KO.fn(No.la,this.q7)}K7(t){t.yn(T.sO,this.j7),t.yn(T.nO,this.Q7),t.yn(T.nC,this.J7)}ttt(t){t.fn(T.sO,this.j7),t.fn(T.nO,this.Q7),t.fn(T.nC,this.J7)}dW(t){this.K7(t),t.io&&this.ett(t)}eW(t){this.ttt(t),this.itt(t)}stt(){this.KO.xE===bh.Jn?this.ntt():this.ott()}ntt(){if(!this.htt)return;this.htt=!1;const t=this.Lu.Mu,e=this.Lu.Pu;this.re(t,e),this.U7(!1)}ott(){this.htt||(this.htt=!0,this.U7(!0))}ett(t){this.htt||t.io&&!this.H7(t)&&this.U7(!1)}itt(t){this.H7(t)&&this.U7(!0)}att(t){(t.io||this.H7(t))&&this.U7(!0)}U7(t){const e=this.utt,i=this.htt?[]:this.KO.q.uC.slice();this.ctt(i,e,t),this.utt=i}P7(t){return this.Z7.get(t.xC)}ltt(t,e){this.Z7.set(t.xC,e)}D7(t){this.Z7.delete(t.xC)}dtt(t){const e=[],i=this.M7;if(void 0!==i.ZQ){const s=t.xb();s.Ti=i.ZQ,e.push(s)}if(void 0!==i.XQ){const s=t.xb();s.Ti=i.XQ,s.k7=t.k7,e.push(s)}return e}ftt(){return this.utt.slice()}gn(){Gt(this.YG),this.Z7.clear(),this.Y7(),this.KO.L.uC.forEach((t=>this.ttt(t))),this.Lu.fn(Ka.pn,this.F7)}constructor(t,e,i,s,n){this.Z7=ea(),this.htt=!0,this.B7=Bo({},lB),this.utt=[],this.X7=t=>this.dW(t.BO),this.z7=t=>this.eW(t.BO),this.q7=()=>this.stt(),this.j7=t=>this.ett(t.BO),this.Q7=t=>this.itt(t.BO),this.J7=t=>this.att(t.BO),this.F7=t=>this.re(t.width,t.height),this.KO=t,this.W7=this.M7=n,this.QT=this._tt(i),this.Yu=s,e.appendChild(this.QT)}};function pB(t,e,i,s,n){let r=t.xb(),o=r,h=1,a=!1;const u=C(getComputedStyle(e).lineHeight)/4;if(!S(u)&&u>0){for(let e=0;e<i.length&&!a;e++){for(;!bB(t,s,i[e],.01)&&(!s.TO(t)||wB(t,n));)yB(t,i[e],u);if(s.TO(t)){o=t.xb(),a=!0;break}let c=AB(t,s);h>c&&(o=t.xb(),h=c),t=r.xb()}s.TO(t)||(o=r.xb())}e.style.left=(o.T7-s.T7)/s.ji*100+"%",e.style.top=(o.E7-s.E7)/s.Ti*100+"%"}function wB(t,e){return e.some((e=>t.x7(e)))}function ru(t){return new gB(t.left,t.top,t.width,t.height)}var gi=function(t){return t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y",t}({});function yB(t,e,i){switch(e){case 0:t.T7+=i;break;case 1:t.T7-=i;break;case 2:t.E7+=i;break;case 3:t.E7-=i}}function bB(t,e,i,s){switch(i){case 0:return t.S7>e.S7+s;case 1:return t.T7<e.T7-s;case 2:return t.k7>e.k7+s;case 3:return t.E7<e.E7-s}}function AB(t,e){return _.max(0,_.min(t.S7,e.S7)-_.max(t.T7,e.T7))*_.max(0,_.min(t.k7,e.k7)-_.max(t.E7,e.E7))/(t.ji*t.Ti)}r();var SB=function(t){return t.Qc='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Yc='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.Kc='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Zc='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif',t}({});function TB(t,e){return t?{mtt:t.mtt,gtt:t.gtt,ptt:t.ptt,Bl:e}:null}function kB(t){const e=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return e?{mtt:x(e[1],16),gtt:x(e[2],16),ptt:x(e[3],16)}:null}function EB(t){return("0"+t.toString(16)).slice(-2)}function xB(t){return"#"+EB(t.mtt)+EB(t.gtt)+EB(t.ptt)}function RB(t){const e=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return e?{mtt:x(e[1],10),gtt:x(e[2],10),ptt:x(e[3],10),Bl:C(e[4])}:null}function IB(t,e){return function(t){return t?"rgba("+t.mtt+", "+t.gtt+", "+t.ptt+", "+t.Bl+")":void 0}(TB(kB(t),e/100))}var _i=function(t){return t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent",t}({});function CB(t){return PB[t||"none"]}var PB={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},DB="monospace, sans-serif",NB="Arial, Helvetica, sans-serif",MB='"Times New Roman", Times, serif',LB=Kv({monospace:"monospace",sansSerif:NB,serif:MB,monospaceSansSerif:DB,monospaceSerif:"monospace, serif",proportionalSansSerif:NB,proportionalSerif:MB,default:DB}),BB=16,OB="1.3em",FB=class extends ie{_tt(t){let e=h.createElement("div");e.className="theoplayer-ttml-texttrack-"+t;const i=e.style;return i.position="absolute",Nd(i,"flex"),i.flexDirection=i.webkitFlexDirection="column",i.overflow="hidden",i.pointerEvents="none",i.top="0",i.left="0",i.width="100%",i.height="100%",i.fontSize=BB+"px",i.lineHeight=OB,e}re(t,e){const i=_.min(t/640,e/360),s=BB*i*mB(this.N7);this.YG.style.fontSize=s+"px"}ctt(t,e,i){for(const t of e)!i&&t.io||this.C7(t);let s=[];const n=ru(this.YG.getBoundingClientRect());s.push(...this.dtt(n));for(const e of t){const t=this.wtt(e,s,n);for(const e of t)s.push(e.R7(.1))}}wtt(t,e,i){let s=this.P7(t);s||(s=this.ytt(t),this.ltt(t,s));for(const t of s)this.YG.appendChild(t);const n=[],r=[gi.POS_Y,gi.NEG_Y,gi.POS_X,gi.NEG_X];for(const t of s){pB(QB(t),t,r,i,e),n.push(QB(t))}return n}ytt(t){let e=[];const i=t.GV,s=t.LV,n=t.XV,r=t.U,o=t.VV,a=o?_.min(640/o.width,360/o.height):1,u=this.N7;if(0===w.keys(s).length){const t=h.createElement("div");KB(t),VB(r,i,n,t,t,a,u),WB(t,"body",u),t.firstChild&&e.push(t)}else for(let t of w.keys(s)){let o=h.createElement("div");o.id=t,KB(o),HB(o,"region",s[t],i,a),VB(r,i,n,o,o,a,u),WB(o,"body",u),o.firstChild&&e.push(o)}return e}V7(t){return HD(this.YG,t),super.V7(t)}constructor(t,e,i,s){super(t,e,i,s,lB)}};function VB(t,e,i,s,n,r,o){if(Uh(t)&&function(t){const e=t.Rx.toUpperCase();return"SPAN"===e||"P"===e||"BR"===e||"DIV"===e||"BODY"===e}(t)){let a=UB(t);if(!a||(null==n?void 0:n.id)===a){let a;if("BODY"===t.Rx.toUpperCase())a=n;else{if(a=function(t){let e;switch(t.Rx.toUpperCase()){case"BR":e=h.createElement("br");break;case"SPAN":e=h.createElement("span"),jB(e),GB(e,t);break;case"P":e=h.createElement("p"),function(t){jB(t);const e=t.style;e.textAlign="inherit",e.padding="0",e.margin="0"}(e),GB(e,t);break;case"DIV":e=h.createElement("div"),GB(e,t)}return e}(t),!a)return;s.appendChild(a)}!function(t,e,i,s,n){let r=e.Xx("style");zB(t,e.Rx,r,i,s,n),function(t,e,i,s){for(const n of e.Hx)qB(t,e.Rx,n.Rx,n.Dx,i,s)}(t,e,s,n)}(a,t,e,n,r),function(t,e,i){let s=null==e?void 0:e.Xx("smpte:backgroundImage");if(s){s=s.replace("#","");let n=i&&ZB(i,(t=>t.Hx.some((t=>"id"===t.Rx&&t.Dx===s))));n&&XB(t,n,e,!0)}!function(t,e){const i=e.m[0];if(!i||"metadata"!==i.Rx.toLowerCase())return;const s=i.m[0];XB(t,s,e)}(t,e)}(a,t,i),WB(a,t.Rx,o);for(const s of t.Lx)VB(s,e,i,a,n,r,o)}}else if(TA(t)){const e=h.createTextNode(t.qk);if("SPAN"!==s.nodeName.toUpperCase()){const t=h.createElement("span");jB(t),WB(t,"span",o),t.appendChild(e),s.appendChild(t)}else s.appendChild(e)}}function WB(t,e,i){const s=t.style;switch(i.FQ&&(s.fontFamily=i.FQ),i.VQ&&(s.color=i.VQ),e.toLowerCase()){case"span":i.UQ&&(s.background=i.UQ);break;case"p":case"div":i.GQ&&(s.backgroundColor=i.GQ);break;case"body":i.HQ&&(s.textShadow=CB(i.HQ))}}function UB(t){const e=t.Xx("region");if("p"===t.Rx.toLowerCase())return e;const i=[];for(const e of t.m)i.push(UB(e));return Qm(i),0===i.length?e:1===i.length?null!=(s=i[0])?s:e:void 0;var s}function GB(t,e){let i=e.zx(zE,"id");i&&(t.id=i)}function HB(t,e,i,s,n){zB(t,e,i.style,s,t,n);for(const s of w.keys(i))qB(t,e,s,i[s],t,n)}function ZB(t,e){if(e(t))return t;for(let i of t.m){const t=ZB(i,e);if(t)return t}return null}function XB(t,e,i,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const e=t&&t.Lx.length>0?t.Lx[0]:null;return e&&TA(e)?"data:image/png;base64,"+e.qk:""}(e),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,e){const i=t.style;Nd(i,"flex"),i.flexDirection=i.webkitFlexDirection="column";let s=e.Xx("smpte:backgroundImageVertical"),n="center";if(s)switch(s.toLowerCase()){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end";break;case"inherit":n="inherit"}i.justifyContent=i.webkitJustifyContent=n;let r=e.Xx("smpte:backgroundImageHorizontal"),o="center";if(r)switch(r.toLowerCase()){case"left":o="flex-start";break;case"center":o="center";break;case"right":o="flex-end";break;case"inherit":o="inherit"}i.alignItems=i.webkitAlignItems=o}(t,i),t.appendChild(n)}function zB(t,e,i,s,n,r){if(i)for(const o of i.split(" "))if(s[o])for(const i of w.keys(s[o]))"style"===i.toLowerCase()?zB(t,e,s[o][i],s,n,r):qB(t,e,i,s[o][i],n,r)}function qB(t,e,i,s,n,r){const o=t.style;switch(i){case"backgroundColor":o.backgroundColor=s;break;case"color":o.color=s;break;case"direction":o.direction=s;break;case"display":"none"===s&&(o.display="none");break;case"fontFamily":var h;o.fontFamily=null!=(h=LB.get(s))?h:s;break;case"fontSize":{let t=s;if(Tm(t,"px")){const e=Number(t.slice(0,-2));t=e*r/BB+"em"}else Tm(t,"c")&&(t=t.replace("c","em"));o.fontSize=t,o.lineHeight&&"inherit"!==o.lineHeight||(o.lineHeight=OB);break}case"fontStyle":o.fontStyle=s;break;case"fontWeight":o.fontWeight=s;break;case"lineHeight":{let t=s;if(Tm(t,"px")){const e=Number(t.slice(0,-2));t=e*r+"px"}o.lineHeight=t;break}case"opacity":o.opacity=s;break;case"overflow":o.overflow=s;break;case"padding":o.padding=s;break;case"textAlign":o.textAlign=s;break;case"textDecoration":switch(s){case"lineThrough":o.textDecoration="line-through";break;case"underline":case"overline":o.textDecoration=s;break;case"noUnderline":case"noLineThrough":case"noOverline":o.textDecoration="none"}break;case"unicodeBidi":switch(s){case"bidiOverride":o.unicodeBidi="bidi-override";break;case"normal":case"embed":case"isolate":o.unicodeBidi=s}break;case"visibility":o.visibility=s;break;case"zIndex":o.zIndex=s;break;case"displayAlign":{let t;switch(s.toLowerCase()){case"before":t="flex-start";break;case"center":t="center";break;case"after":t="flex-end";break;case"justify":t="space-between";break;default:return}o.justifyContent=o.webkitJustifyContent=t;break}case"extent":{const i=YB(e.toLowerCase())?n:t;let r,o,h=s.split(" ",2);2===h.length?(r=h[0],o=h[1]):r=o="100%",i&&(i.style.height=o,i.style.width=r);break}case"origin":{const i=YB(e.toLowerCase())?n:t,[r,o]=s.split(" ",2);i&&(r||o)&&(r&&(i.style.left=r),o&&(i.style.top=o));break}case"showBackground":case"textOutline":break;case"wrapOption":switch(s){case"wrap":o.whiteSpace="normal";break;case"noWrap":o.whiteSpace="nowrap"}break;case"writingMode":{let t,e,i,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",e="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",i="upright";break;case"tblr":t="vertical-lr",i="upright";break;case"rl":t="horizontal-tb",e="rtl";break;default:return}o.writingMode=t,o.setProperty("-webkit-writing-mode",t),e&&(o.direction=e),i&&(o.textOrientation=i,o.setProperty("-webkit-text-orientation",i)),n&&(o.unicodeBidi=n);break}case"linePadding":if(Tm(s,"c")){let t=s.replace("c","em");o.paddingLeft=o.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?o.textAlign="":o.textAlign=s}}function YB(t){return"div"===t||"p"===t||"span"===t}function KB(t){const e=t.style;Nd(e,"flex"),e.flexDirection=e.webkitFlexDirection="column",e.top="auto",e.left="5%",e.width="90%",e.height="100%",e.maxHeight="100%",e.maxWidth="100%",e.overflow="visible",e.position="absolute",e.fontFamily=NB,e.color=_i.WHITE,e.background=_i.TRANSPARENT,e.textShadow=CB("uniform"),e.textAlign="start",e.writingMode="horizontal-tb",e.setProperty("-webkit-writing-mode","horizontal-tb"),e.padding="0",e.margin="0",e.fontSize="inherit",e.lineHeight="inherit"}function jB(t){const e=t.style;e.fontFamily="inherit",e.color="inherit",e.fontSize="inherit",e.lineHeight="inherit",e.textShadow="inherit"}function QB(t){let e=ru(t.getBoundingClientRect());if("visible"===getComputedStyle(t).overflow&&t.scrollHeight>t.clientHeight){const i=t.children;for(let t=0;t<i.length;t++){const s=i[t];e=e.I7(ru(s.getBoundingClientRect()))}}return e}r(),r();var JB=void 0;function $B(t){return JB||(JB=s.document.createElement("textarea")),JB.innerHTML=t,JB.value}function tO(t,e){let i="Data",s="",n=[],r=t.charAt(e.ec),o="",h={Aw:"starttag",Vx:"",btt:[]};for(;e.ec<t.length+1;){switch(r=e.ec<t.length?t.charAt(e.ec):"EOF",i){case"Data":switch(r){case"&":let n=t.substring(e.ec).match(/&#?[0-9a-zA-Z]+;/);n?(s+=$B(n[0]),e.kb(n[0].length-1)):s+="&";break;case"<":if(s)return{Aw:"string",U:s};i="Tag";break;case"EOF":return{Aw:"string",U:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":i="StartTagAnnotation";break;case".":i="StartTagClass";break;case"/":i="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,i="TimestampTag";break;case">":return e.kb(1),h;case"EOF":return h;default:s=r,i="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":i="StartTagAnnotation";break;case"\n":o=r,i="StartTagAnnotation";break;case".":i="StartTagClass";break;case">":return e.kb(1),{Aw:"starttag",Vx:s,btt:[]};case"EOF":return{Aw:"starttag",Vx:s,btt:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(o),o="",i="StartTagAnnotation";break;case"\n":n.push(o),o=r,i="StartTagAnnotation";break;case".":n.push(o),o="";break;case">":return e.kb(1),n.push(o),{Aw:"starttag",Vx:s,btt:n};case"EOF":return n.push(o),{Aw:"starttag",Vx:s,btt:n};default:o+=r}break;case"StartTagAnnotation":switch(r){case"&":i="CharRefInAnnotation";break;case">":e.kb(1);let t=o.trim();return t=t.replace(/\s/," "),{Aw:"starttag",Vx:s,btt:n,Att:t};default:o+=r}break;case"CharRefInAnnotation":let a="";for(let i=e.ec;">"===t.charAt(i);i++)a+=t.charAt(i);o+=a||"&",i="StartTagAnnotation";break;case"EndTag":switch(r){case">":return e.kb(1),{Aw:"endtag",Vx:s};case"EOF":return{Aw:"endtag",Vx:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return e.kb(1),{Aw:"timestamp",Stt:s};case"EOF":return{Aw:"timestamp",Stt:s};default:s+=r}}e.kb(1)}return h}var eO=function(t){return t.Ttt="string",t.ktt="starttag",t.Ett="endtag",t.xtt="timestamp",t}({});function iO(t){let e;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};const i=h.documentElement,n=h.body,r=i.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=e.left+o-r,u=i.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,l=e.top+c-u;return{left:_.round(a),top:_.round(l)}}function sO(t,e,i,s){if(void 0===s&&(s=0),!t||!e)return;t.style.left="0px";let n=t.getClientRects(),r=e.getClientRects();if(0===n.length||0===r.length)return;let o=n[0],h=r[0],a=o.width/2+o.left;nO(t,h.width/2+h.left-a,i,s)}function nO(t,e,i,s){void 0===s&&(s=0),oO(t,e,"left","right",i,s)}function rO(t,e,i,s){void 0===s&&(s=0),oO(t,e,"top","bottom",i,s)}function oO(t,e,i,s,n,r){void 0===r&&(r=0);const o=t.getClientRects();if(n&&o.length>0){const t=o[0];e=Vs(e,n[i]+r-t[i],n[s]-r-t[s])}t.style[i]=e+"px"}function wu(t,e){void 0===t.textContent?t.innerText=e:t.textContent=e}r();var hO={VQ:_i.WHITE,FQ:"sans-serif",WQ:"100%",UQ:"rgba(0,0,0,0.8)",GQ:_i.TRANSPARENT,HQ:"none",ZQ:void 0,XQ:void 0,zQ:void 0,qQ:void 0},aO="theoplayer-webvtt-region-",uO="theoplayer-webvtt-styling-",cO="theoplayer-webvtt-default-style",lO=5.23,dO=1.14,fO=class extends ie{_tt(t){let e=h.createElement("div");e.className="theoplayer-webvtt-texttrack-"+t,Nh(e),e.style.overflow="hidden",e.style.pointerEvents="none";const i=this.N7.FQ;return i&&(e.style.fontFamily=i),e.style.whiteSpace="pre-line",function(){if(h.getElementById(cO))return;const t=[];for(const[e,i]of AO)t.push("."+uO+e+" { color: "+i+" !important; }"),t.push("."+uO+"Rtt"+e+" { background-color: "+i+" !important; }"),t.push("video::cue(."+e+") { color: "+i+"; }"),t.push("Itt"+e+") { background-color: "+i+"; }");const e=h.createElement("style");e.id=cO,e.innerHTML=t.join("\n"),h.body.appendChild(e)}(),e}Tj(){this.YG.appendChild(this.Ctt),super.Tj()}re(t,e){const i=_.min(t/100,e/100),s=mB(this.N7);this.Ptt.forEach((t=>{let{ZO:e,Dtt:n}=t;this.Ntt(n,i,s,e)})),this.Ntt(this.Ctt,i,s)}V7(t){HD(this.YG,t),super.V7(t)}ctt(t,e,i){const s=this.YG,n=this.Lu.Pu/100;let r=[];for(const e of t)void 0!==e.ZO&&(ms(r,e.ZO)||r.push(e.ZO));this.Ptt.forEach(((t,e)=>{let{ZO:s,Dtt:n}=t;!i&&ms(r,s)||(Gt(n),this.Ptt.delete(e))}));for(const t of e)!i&&t.io||this.C7(t);let o=[];const h=ru(this.Ctt.getBoundingClientRect());o.push(...this.dtt(h));for(const t of r){let e;this.Ptt.has(t.o)?e=this.Ptt.get(t.o).Dtt:(e=yO(t,n),s.appendChild(e),this.Ptt.set(t.o,{ZO:t,Dtt:e})),o.push(ru(e.getBoundingClientRect()))}t.sort(SO);for(const e of t){const t=this.wtt(e,o,h);void 0!==t&&o.push(t.R7(.1))}}wtt(t,e,i){var s;let n;t.ZO?(n=this.Ptt.get(t.ZO.o).Dtt,"up"===t.ZO.aF&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.Ctt;let r=null==(s=this.P7(t))?void 0:s[0];if(r||(r=this.Mtt(t),this.ltt(t,[r])),n.appendChild(r),t.ZO||(_O(r,t),t.XO?function(t,e,i,s){const n=bO(t),r=n?i.Ti:i.ji;let o=C(getComputedStyle(e).lineHeight);if(0===o||S(o))return;let h=ru(e.getBoundingClientRect()),a=_.round(Uk(t));"rl"===t.Pt&&(a=-(a+1));let u=o*a;"rl"===t.Pt&&(u=u-h.ji+o);a<0&&(u+=r,o=-o);n?h.E7+=u:h.T7+=u;const c=h.xb();let l=!1;for(;!i.TO(h)||wB(h,s);)if(n)if(o<0&&h.E7<i.E7||o>0&&h.k7>i.k7){if(h.E7=c.E7,l)break;o=-o,l=!0}else h.E7+=o;else if(o<0&&h.T7<i.T7||o>0&&h.S7>i.S7){if(h.T7=c.T7,l)break;o=-o,l=!0}else h.T7+=o;n?e.style.top=(h.E7-i.E7)/i.Ti*100+"%":e.style.left=(h.T7-i.T7)/i.ji*100+"%"}(t,r,i,e):function(t,e,i,s){let n,r=ru(e.getBoundingClientRect());if(0===r.ji||0===r.Ti)return;bO(t)?"center"===t.GO?r.E7-=r.Ti/2:"end"===t.GO&&(r.E7-=r.Ti):"center"===t.GO?r.T7-=r.ji/2:"end"===t.GO&&(r.T7-=r.ji);n=""===t.Pt?[gi.POS_Y,gi.NEG_Y,gi.POS_X,gi.NEG_X]:"lr"===t.Pt?[gi.POS_X,gi.NEG_X,gi.POS_Y,gi.NEG_Y]:[gi.NEG_X,gi.POS_X,gi.POS_Y,gi.NEG_Y];pB(r,e,n,i,s)}(t,r,i,e)),!t.ZO)return ru(r.getBoundingClientRect())}Mtt(t){let e=new Ri,i=t.U,s=this.Ltt(t),n={Btt:void 0,we:s},r=n,o="",a="",u=[n],c=[],l=[];for(;e.ec<i.length;){let t=tO(i,e);if(t.Aw===eO.Ttt){const e=h.createElement("span");wu(e,t.U),vO(e,u),""!==o&&(e.lang=o),this.Ott(e,a),r.we.appendChild(e)}else if(t.Aw===eO.ktt){const e=t.Vx.toLowerCase();switch(e){case"i":case"b":case"u":case"ruby":{let i=h.createElement(e);r.we.appendChild(i),r={Btt:t,we:i},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.Btt)?void 0:d.Vx.toLowerCase())){let e=h.createElement("rt");r.we.appendChild(e),r={Btt:t,we:e},u.push(r)}break;case"c":case"v":r={Btt:t,we:r.we},u.push(r);break;case"font":{var f;const e=null==(f=t.Att)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);e&&(a=e[1],l.push(a),r={Btt:t,we:r.we},u.push(r));break}case"lang":var _;o=null!=(_=t.Att)?_:"",c.push(o)}}else if(t.Aw===eO.Ett){var v;const e=t.Vx.toLowerCase(),i=null==(v=r.Btt)?void 0:v.Vx.toLowerCase();i===e?(u.pop(),r=u[u.length-1],"font"===e&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===i&&"ruby"===e?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===e&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.Aw===eO.xtt){let e=t.Stt,i=new Ri;try{kE(e,i)}catch(t){Or("ERROR collecting timestamp",t)}}}return s}Ott(t,e){const i=this.N7,s=this.L7;i.UQ&&(t.style.background=i.UQ);const n=s.VQ||e||i.VQ;n&&(t.style.color=n)}Ntt(t,e,i,s){if(s){let n=mO(s,e);t.style.height=n*i+"px",t.style.left=gO(s)+"%",t.style.top=pO(s,e)+"px"}t.style.fontSize=lO*e*i+"px"}Ltt(t){const e=h.createElement("div");e.style.position="absolute",e.style.margin="0",e.style.padding="0",e.style.unicodeBidi="plaintext",e.style.wordWrap="break-word",e.style.overflowWrap="break-word",e.style.width="auto",e.style.textAlign=t.WO,function(t,e){"rl"===e.Pt?t.style.writingMode="vertical-rl":"lr"===e.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(e,t),function(t,e){let i=Zk(e);bO(e)?(t.style.width=i+"%",t.style.height="auto"):(t.style.height=i+"%",t.style.width="auto")}(e,t),_O(e,t);const i=this.N7.GQ;i&&(e.style.background=i);const s=this.N7.VQ;return s&&(e.style.color=s),e.style.textShadow=CB(this.N7.HQ),e}constructor(t,e,i,s){super(t,e,i,s,hO),this.Ptt=xu(),this.Ctt=wO(3)}};function _O(t,e){let i,s,n=Hk(e),r=Gk(e),o=Zk(e);if(bO(e)){switch(n){case"line-left":i=r;break;case"center":i=r-o/2;break;case"line-right":i=r-o}s=e.XO?0:Uk(e)}else{switch(n){case"line-left":s=r;break;case"center":s=r-o/2;break;case"line-right":s=r-o}i=e.XO?0:Uk(e)}t.style.left=i+"%",t.style.top=s+"%"}function vO(t,e){for(const i of e)if(i.Btt){for(const e of i.Btt.btt)Id(t,uO+e);"v"===i.Btt.Vx.toLowerCase()&&i.Btt.Att&&Id(t,"theoplayer-webvtt-voice-"+i.Btt.Att)}}function mO(t,e){return t.rF*(lO*e)*dO}function gO(t){return t.uF-t.oF*t.ji/100}function pO(t,e){let i=t.cF,s=t.hF*mO(t,e)/100;return _.max(0,i-s)}function wO(t){let e=h.createElement("div");return e.className=aO+"default",Nh(e),e.style.wordWrap="break-word",e.style.writingMode="horizontal-tb",e.style.pointerEvents="none",e.style.width="auto",e.style.height="auto",e.style.maxHeight="100%",e.style.minHeight="0px",e.style.padding="0",e.style.boxSizing="border-box",e.style.fontSize=lO*t+"px",e.style.lineHeight=dO+"em",e}function yO(t,e){let i=wO(e);i.className=aO+t.o;let s=t.ji,n=mO(t,e);return i.style.width=s+"%",i.style.height=n+"px",i.style.left=gO(t)+"%",i.style.right="",i.style.top=pO(t,e)+"px",i.style.bottom="",i.style.boxSizing="border-box",i}function bO(t){return""===t.Pt}var AO=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function SO(t,e){const i=Uk(t),s=Uk(e),n=TO(i,t.XO),r=TO(s,e.XO);return n&&r?i-s||be(e,t)||e.xC-t.xC:be(t,e)||t.xC-e.xC}function TO(t,e){return e?t<0?t>-8:t>8:t>50}r(),r(),r();var kO=function(t){return t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics",t}({}),EO={VQ:_i.WHITE,FQ:SB.Kc,WQ:"100%",UQ:_i.BLACK,GQ:"transparent",HQ:"none",Ftt:"regular",ZQ:void 0,XQ:void 0,zQ:void 0,qQ:void 0},xO=[{Vtt:_i.WHITE,Ftt:"regular",Wtt:0},{Vtt:_i.WHITE,Ftt:"underline",Wtt:0},{Vtt:_i.GREEN,Ftt:"regular",Wtt:0},{Vtt:_i.GREEN,Ftt:"underline",Wtt:0},{Vtt:_i.BLUE,Ftt:"regular",Wtt:0},{Vtt:_i.BLUE,Ftt:"underline",Wtt:0},{Vtt:_i.CYAN,Ftt:"regular",Wtt:0},{Vtt:_i.CYAN,Ftt:"underline",Wtt:0},{Vtt:_i.RED,Ftt:"regular",Wtt:0},{Vtt:_i.RED,Ftt:"underline",Wtt:0},{Vtt:_i.YELLOW,Ftt:"regular",Wtt:0},{Vtt:_i.YELLOW,Ftt:"underline",Wtt:0},{Vtt:_i.MAGENTA,Ftt:"regular",Wtt:0},{Vtt:_i.MAGENTA,Ftt:"underline",Wtt:0},{Vtt:_i.WHITE,Ftt:"italics",Wtt:0},{Vtt:_i.WHITE,Ftt:"underline-italics",Wtt:0},{Vtt:_i.WHITE,Ftt:"regular",Wtt:0},{Vtt:_i.WHITE,Ftt:"underline",Wtt:0},{Vtt:_i.WHITE,Ftt:"regular",Wtt:4},{Vtt:_i.WHITE,Ftt:"underline",Wtt:4},{Vtt:_i.WHITE,Ftt:"regular",Wtt:8},{Vtt:_i.WHITE,Ftt:"underline",Wtt:8},{Vtt:_i.WHITE,Ftt:"regular",Wtt:12},{Vtt:_i.WHITE,Ftt:"underline",Wtt:12},{Vtt:_i.WHITE,Ftt:"regular",Wtt:16},{Vtt:_i.WHITE,Ftt:"underline",Wtt:16},{Vtt:_i.WHITE,Ftt:"regular",Wtt:20},{Vtt:_i.WHITE,Ftt:"underline",Wtt:20},{Vtt:_i.WHITE,Ftt:"regular",Wtt:24},{Vtt:_i.WHITE,Ftt:"underline",Wtt:24},{Vtt:_i.WHITE,Ftt:"regular",Wtt:28},{Vtt:_i.WHITE,Ftt:"underline",Wtt:28}],RO=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function IO(t,e){return tE(t.Utt,e.Utt)||Fm(t.eL,e.eL)}r();var Bt=32,CO=/CC([1-4])=(.*)/;function PO(t){if(!t)return[];const e=[],i=t.trim().split(";");if(i.every((t=>t.match(CO))))for(const t of i){const[,i,s]=t.match(CO);e.push({Gtt:Number(i),Htt:s})}else for(let t=0;t<i.length;t++)e.push({Gtt:t+1,Htt:i[t]});return e}var DO=class t{get Ztt(){return this.ztt.Xtt}get qtt(){return this.ztt.Ytt}get Ktt(){return this.ztt.Ytt.Wtt-this.ztt.Xtt.Wtt+1}get jtt(){return this.ztt.Ytt.Qtt-this.ztt.Xtt.Qtt+1}yr(){return this.Jtt=this.$tt(),this.tet(),this.eet(),this.Jtt}$tt(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.Ktt/Bt*this.net.iet*100+"%",t.style.height=1.2*this.jtt+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.net.ret?"calc(1em - 1ch)":"";const e=this.M7.FQ;e&&(t.style.fontFamily=e);const i=this.M7.GQ;return i&&(t.style.backgroundColor=i),t}tet(){if(!this.Jtt)return;let t=this.Ztt.Qtt/15*100,e=this.Ztt.Wtt/Bt*100,i=(Bt-this.qtt.Wtt-1)/Bt*100,s=(15-this.qtt.Qtt-1)/15*100;this.net.oet||(e=i=1,this.Jtt.style.width="98%"),s<t?this.Jtt.style.bottom=s*this.net.iet+"%":this.Jtt.style.top=t*this.net.iet+"%",i<e?this.Jtt.style.right=i+"%":this.Jtt.style.left=e+"%"}eet(){const t=this.ztt.het.sort(NO);for(let e=0;e<t.length;e++)this.aet(t[e-1],t[e]),this.uet(t[e]);this.aet(t[t.length-1],void 0)}uet(e){var i;const s=vB(this.M7,e.cet),n=t.let(s);wu(n,e.det),null==(i=this.Jtt)||i.appendChild(n)}static let(t){const e=h.createElement("span");e.style.display="inline-block",t.Ftt!==kO.FONT_ITALICS&&t.Ftt!==kO.FONT_UNDERLINE_ITALICS||(e.style.fontStyle="italic"),t.Ftt!==kO.FONT_UNDERLINE&&t.Ftt!==kO.FONT_UNDERLINE_ITALICS||(e.style.textDecoration="underline");const i=t.VQ;i&&(e.style.color=i);const s=t.UQ;return s&&(e.style.backgroundColor=s),e.style.textShadow=CB(t.HQ),e.style.height="1.2em",e}aet(t,e){let i=t?t.Ytt.Qtt:this.ztt.Xtt.Qtt;const s=e?e.Xtt.Qtt:this.ztt.Ytt.Qtt;let n=t?t.Ytt.Wtt:this.ztt.Xtt.Wtt;const r=e?e.Xtt.Wtt:this.ztt.Ytt.Wtt;i<s&&(!e||t&&t.Xtt.Qtt!==e.Xtt.Qtt?this.fet():this._et(this.ztt.Ytt.Wtt-n),n=this.ztt.Xtt.Wtt),n<r&&(e?this._et(r-n):this.fet())}fet(){var t;const e=h.createElement("br");null==(t=this.Jtt)||t.appendChild(e)}_et(t){var e;if(t<=0)return;const i=h.createElement("span");i.style.display="inline-block",wu(i,km(" ",t)),null==(e=this.Jtt)||e.appendChild(i)}constructor(t,e,i){this.ztt=t,this.net=e,this.M7=i}};function NO(t,e){return function(t,e){if(t.Qtt!==e.Qtt)return t.Qtt-e.Qtt;return t.Wtt-e.Wtt}(t.Xtt,e.Xtt)}var MO=class extends ie{_tt(t){let e=h.createElement("div");return e.className="theoplayer-cea608-texttrack-"+t,e.style.position="absolute",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.top="10%",e.style.bottom="10%",this.N7.FQ&&(e.style.fontFamily=this.N7.FQ),e}re(t,e){this.gl()}gl(){let t=mB(this.N7);this.vet=function(t){return{iet:t/100,ret:t<=100,oet:t<=150}}(100*t);const e=this.met/Bt;this.pet=e*t,this.YG.style.fontSize=this.pet+"px"}get met(){let t=this.YG.offsetWidth;return this.vet&&this.vet.oet||(t*=.8),t}ctt(t,e,i){for(const t of e)!i&&t.io||this.C7(t);for(const e of t)this.wtt(e)}wtt(t){this.vet&&this.vet.oet?this.wet(80):this.wet(100),this.gl();let e=this.P7(t);e||(e=this.ytt(t),this.ltt(t,e));for(const t of e)this.YG.appendChild(t)}ytt(t){return t.U.map((t=>new DO(t,this.vet,this.N7).yr()))}wet(t){const e=(100-t)/2;this.YG.style.left=e+"%",this.YG.style.width=t+"%"}constructor(t,e,i,s){super(t,e,i,s,EO)}},LO=class t{yet(t){for(let e of this.bet)if(e.Ht===t)return e}static Aet(t){switch(t.Aw){case Lr.TTML:case Lr.SRT:case Lr.WEBVTT:case Lr.CEA608:return!0}return!1}Tet(t){switch(t.Aw){case Lr.TTML:return new FB(t,this.ket,t.xh,this.Yu);case Lr.SRT:case Lr.WEBVTT:return new fO(t,this.ket,t.xh,this.Yu);case Lr.CEA608:return new MO(t,this.ket,t.xh,this.Yu)}}Eet(t){let e=this.yet(t);e||(e=this.Tet(t),e&&(e.Tj(),e.V7(this.gZ),this.bet.push(e),t.xE===bh.Jn&&e.ntt()))}xet(t){let e=this.bet;for(let i=e.length-1;i>=0;i-=1){let s=e[i];s.Ht===t&&(s.gn(),ka(e,i))}}Ret(e){mx(e.Lt)&&t.Aet(e)&&(e.sI===ic.ERROR?this.xet(e):this.Eet(e))}get P5(){return this.Iet.cs||this.Zo.rO}er(){for(let t of this.bet)t.Ht.fn(No.tC,this.Cet),t.Ht.fn(No.iC,this.Cet),t.gn();En(this.bet)}gn(){this.er();for(let t of this.bet)t.gn();this.Ll.fn(Se.OI,this.Pet),this.Ll.fn(Se.VI,this.Det),this.Ll.fn(No.la,this.Cet),this.Iet.fn(rh.la,this.Net),this.Zo.fn([To.sO,To.nO],this.Net),this.gZ.fn("$I",this.Met)}constructor(t,e,i,s,n,r){this.bet=[],this.Pet=t=>{let e=t.Ht;e.yn(No.tC,this.Cet),e.yn(No.iC,this.Cet),e instanceof IL&&(e.P5=this.P5),this.Ret(e)},this.Cet=t=>{let e=t.Ht;this.Ret(e)},this.Det=t=>{let e=t.Ht;e.fn(No.tC,this.Cet),e.fn(No.iC,this.Cet),this.xet(e)},this.Net=()=>{let t=this.P5;for(let e of this.Ll.uC)e instanceof IL&&(e.P5=t)},this.Met=()=>{for(let t of this.bet)t.V7(this.gZ)},this.ket=t,this.Yu=e,this.Ll=i,this.Iet=n,this.Zo=r,this.gZ=s,this.Ll.yn(Se.OI,this.Pet),this.Ll.yn(Se.VI,this.Det),this.Ll.yn(No.la,this.Cet),this.Iet.yn(rh.la,this.Net),this.Zo.yn([To.sO,To.nO],this.Net),this.gZ.yn("$I",this.Met),this.Net()}};r();var BO=class extends Co{get oO(){var t;return null!=(t=this.Let.ownerDocument.pictureInPictureEnabled)&&t}get rO(){return this.Bet}async fo(){if(this.oO){if(!this.rO){const t=this.vy([To.sO,To.da]);await this.Let.requestPictureInPicture(),await t,this.Bet||this.wo(new ga)}}else this.wo(new ga)}async _o(){if(this.oO){if(this.Bet){const t=this.vy([To.nO,To.da]);await this.Let.ownerDocument.exitPictureInPicture(),await t,this.Bet&&this.wo(new ga)}}else this.wo(new ga)}gn(){this.$o(),this.Let.removeEventListener("enterpictureinpicture",this.Oet),this.Let.removeEventListener("leavepictureinpicture",this.Fet)}constructor(t){super(),this.Bet=!1,this.Oet=()=>{this.Bet=!0,this.wo(new hk)},this.Fet=()=>{this.Bet=!1,this.wo(new ak)},this.Let=t,this.Let.addEventListener("enterpictureinpicture",this.Oet),this.Let.addEventListener("leavepictureinpicture",this.Fet)}};function OO(t){const e=new GP,i=function(t){const e=[];return WP.oa(t)&&e.push(new WP(t)),UP.oa(t)&&e.push(new UP(t)),e}(t);if(i.length>0){for(const t of i)e.uK(t);e.aK(i[0])}return e}var FO=class extends oB{get YG(){return this.QT}get cI(){return this.QT.videoHeight}get fI(){return this.QT.videoWidth}get Ca(){return this.Vet}get lH(){return this.Wet}AI(){return this.QT}async Hw(){this.Wet.gn(),this.Vet.gn(),this.Uet.gn(),this.Get.gn(),await super.Hw()}be(){super.be(),this.Uet.be()}ge(){super.ge(),this.Uet.ge()}v7(t){super.v7(t),this.Uet.v7(t)}constructor(t,e,i,s){super(t,e,i,s),this.Vet=OO(t),this.Wet=new BO(t),this.Uet=new _B,this.Get=new LO(this.Uet.we,this.Lu,this.nt,this.zl,this.Ca,this.lH)}};r(),r();r(),r();var VO=function(t){return t.Het="HELLO",t.Zet="HI_THERE",t.Xet="INITIALIZE",t.zet="APPEND_INIT",t.qet="APPEND_DATA",t.Yet="ACK",t.Ket="REMOVE",t.jet="DESTROY_SESSION",t}({}),WO=class{Qet(t){return this.Qo.Jo((async t=>{J(t);const e=new MessageChannel,i=e.port1,s=e.port2;Bl.serviceWorker.controller||await AA(Bl.serviceWorker,"install",t),"activated"!==Bl.serviceWorker.controller.state&&await AA(Bl.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};Bl.serviceWorker.controller.postMessage(n,[s]),i.start(),this.Mp=i;try{const e=await AA(i,"message",t),s=e.data;if("HI_THERE"!==s.kind)throw new g("Could not set up message channel");this.ek=s.sessionId}catch(t){throw Je(t)&&this.Jet(),t}}),t)}$et(t,e){return this.Mp,this.Qo.Jo((async()=>{if(!this.Mp)throw new g("MessageSession not set up yet or already closed.");e||(e=[]),this.Mp.postMessage(t,e);const i=await AA(this.Mp,"message");return i.data}))}tit(){return this.Qo.Jo((()=>this.Jet()))}Jet(){if(!Bl.serviceWorker.controller)return;if("activated"!==Bl.serviceWorker.controller.state)return;if(!this.Mp)return;const t={kind:"DESTROY_SESSION"};this.Mp.postMessage(t),this.Mp.close(),this.Mp=void 0}constructor(){this.Qo=new ju}};r();var UO=class{get eit(){return this.iit}sit(t,e){const i=t-e;this.iit=i>this.eit?this.iit:i}nit(t){this.iit=t}constructor(){this.iit=1/0}};r(),r(),r();var Qi=function(t){return t.fE="audio",t._E="video",t.$V="metadata",t}({}),GO=class extends Co{get gR(){return void 0===this.rit||void 0===this.oit?se.mB():new se([this.rit,this.oit])}get bd(){return{Dk:this.cY}}get h3(){return Sl(this.cY,"audio")?ee.fE:Sl(this.cY,"video")?ee._E:ee.tE}get Yq(){return this.cY}get u3(){return se.mB()}get wj(){return 30}set wj(t){}get Sj(){return 30}set Sj(t){}f3(t,e){}_3(t,e){}EJ(){return this.hit}get fa(){return this.ait}get uit(){return this.rit}get VO(){return this.oit}async v3(){}async B2(t,e){}async _2(t,e,i){if(t.Aw!==Ce.tJ)throw new g("Streaming or opaque segments are not supported yet.");const s=t.qk,n=async()=>{const t=s.buffer,i={kind:VO.qet,mediaType:HO(this.cY),segment:s,startPts:e.cit,totalDuration:e.ct};if(await this.dit.$et(i,[t]),void 0===this.rit){const t=e.cit+e.MV;this.rit=t,this.oit=t}this.oit=this.oit+e.ct,this.wo(new pe(ue.JQ))};return this.Qo.Jo((async t=>{J(t);try{this.ait=!0,await n()}finally{this.ait=!1}}),i)}async w2(t,e,i){if(t.Aw!==Ce.tJ)throw new g("Streaming or opaque initialization segments are not supported yet.");const s=t.qk,n=async()=>{const t={kind:VO.zet,mediaType:HO(this.cY),segment:s};await this.dit.$et(t,[])};return this.Qo.Jo((async t=>{J(t);try{this.ait=!0,await n()}finally{this.ait=!1}}),i)}r3(){this.hit=!0}K2(){this.hit=!1}async $S(t,e,i){const s=async()=>{const t={kind:VO.Ket,mediaType:HO(this.cY),endTime:e};await this.dit.$et(t),this.rit=void 0,this.oit=void 0,this.wo(new pe(ue.JQ))};return this.Qo.Jo((async t=>{J(t);try{this.ait=!0,await s()}finally{this.ait=!1}}),i)}cJ(t){return this.cY===t.Dk}dJ(t){return this.cY=t.Dk,Promise.resolve()}async Hw(){this.$o(),await this.Qo.gn()}constructor(t,e){super(),this.cY=t,this.dit=e,this.rit=void 0,this.oit=void 0,this.Qo=new ju,this.ait=!1,this.hit=!1}};function HO(t){return t.match(/video/)?Qi._E:Qi.fE}var ZO=class t{static fit(e,i,s,n){const r=[];for(let t=0;t<e.u4.length;t++){const s=e.u4[t].Dk;r.push(new GO(s,i))}return new t(e,r,s,n)}_it(){}get vit(){return[this.e4,this.i4].filter(ji)}get J3(){return this.e4}get gR(){return eM(this)}get bd(){return this.DT}get ct(){return 0}get EJ(){var t,e,i;const s=null==(i=null==(t=this.e4)?void 0:t.EJ())||i;var n;const r=null==(n=null==(e=this.i4)?void 0:e.EJ())||n;return s&&r}get rI(){return new se([0,1/0])}get t4(){return this.i4}async Hw(){await Promise.all([this.e4,this.i4].filter(ji).map((t=>t.Hw())))}n4(t){}a4(t,e,i,s){}r3(){var t,e;null==(t=this.e4)||t.r3(),null==(e=this.i4)||e.r3()}K2(){var t,e;null==(t=this.e4)||t.K2(),null==(e=this.i4)||e.K2()}cJ(t){return!0}dJ(t){return this.DT=t,Promise.resolve()}_J(t){}async aJ(t,e){const i=await this.Pw.Cw(t.Sw,e),s=await i.dT();return await this.uJ(s),s}async uJ(t){if(t&&!this.QT.src)throw new sr(Qa.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.QT.src)throw new sr(Qa.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const e=this.hT;e&&(await e.cT(this.QT),this.hT=void 0),t&&(await t.bn(this.QT),this.hT=t)}constructor(t,e,i,s){this.hT=void 0,this.DT=t,this.i4=Fo(e,(t=>Boolean(t.Yq.match(/video/)))),this.e4=Fo(e,(t=>Boolean(t.Yq.match(/audio/)))),this.Pw=i,this.QT=s,this._it()}},XO=class extends Co{mit(){this.Let.addEventListener("timeupdate",this.git),this.Let.addEventListener("ended",this.pit),this.Let.addEventListener("timeupdate",this.wit),this.Let.addEventListener("ratechange",this.yit),this.Let.addEventListener("volumechange",this.Ait),this.Let.addEventListener("durationchange",this.Sit),this.Let.addEventListener("playing",this.Tit),this.Let.addEventListener("seeking",this.kit),this.Let.addEventListener("play",this.Eit),this.Let.addEventListener("pause",this.xit),this.Let.addEventListener("encrypted",this.n7)}Rit(){this.Let.removeEventListener("timeupdate",this.git),this.Let.removeEventListener("ended",this.pit),this.Let.removeEventListener("timeupdate",this.wit),this.Let.removeEventListener("ratechange",this.yit),this.Let.removeEventListener("volumechange",this.Ait),this.Let.removeEventListener("durationchange",this.Sit),this.Let.removeEventListener("playing",this.Tit),this.Let.removeEventListener("seeking",this.kit),this.Let.removeEventListener("play",this.Eit),this.Let.removeEventListener("pause",this.xit)}Iit(){this.R9.yn(tl.tC,this.Ds)}Cit(){this.R9.fn(tl.tC,this.Ds)}get YG(){return this.Let}get N4(){return!1}get SR(){return this.Let.currentTime+this.Pit.eit}get qR(){return this.Let.paused}get vI(){return this.Let.volume}set vI(t){this.Let.volume=t}get KR(){return this.Let.playbackRate}set KR(t){this.Let.playbackRate=t}get Dit(){return this.Let.defaultPlaybackRate}get gR(){var t,e;return null!=(e=null==(t=this.jG)?void 0:t.gR)?e:se.mB()}get Nit(){return se.xn(this.Let.buffered)}get JR(){const t=this.Mit;return this.Ro.JL(t.kb(this.Pit.eit))}get Mit(){return se.xn(this.Let.played)}get hI(){return this.aZ}get E4(){return!1}get O4(){return!1}get ct(){return this.Let.duration}get GR(){return this.Let.muted}set GR(t){this.Let.muted=t}get cet(){return this.Let.style}get XB(){return Bo({},XD,{ZB:!0})}Eb(t,e,i){this.j9.Yw(),this.j9=new da,this.Q9=So(this.J9(t,this.Q9,this.j9.Vw),this.j9).catch(It)}async J9(t,e,i){var s;this.Ro=this.JR;const n=null==(s=this.jG)?void 0:s.vit;if(!n)return;const r=_.max(...n.map((t=>t.uit?t.uit:1/0)));this.aZ=!0,this.wo(new L(t)),await e.catch(It),J(i);try{for(this.Lit||this.Bit(),this.Let.load(),this.Oit||(this.Fit=!1,await ou(this.Let.play(),i));this.sI<Ht.tO;)await this.R9.vy(tl.tC,i);this.Vit.Ob(),this.Lit=!1,this.aZ=!1,this.wo(new ha(this.SR))}catch(t){throw this.Vit.Fb(t),t}finally{this.Wit(),this.Pit.nit(r)}}TI(){this.Oit=!0,this.Let.pause()}async kI(){this.Oit&&(this.Let.src||this._7(),await this.Vit.Vb,await this.Let.play())}async Hw(){this.dit&&this.dit.tit().catch(It),this.j9.Yw(),this.Rit(),this.Cit(),this.R9.Hw(),this.$o(),this.Ll.gn(),this.Uet.gn(),this.Get.gn()}async er(){this.dit&&this.dit.tit().catch(It),this.j9.Yw(),this.Let.removeAttribute("src"),this.Let.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.Let.removeAttribute("x-airplay-deny"),this.Let.disableRemotePlayback=!1,this.Let.load(),this.R9.er(),this.Ro=se.mB()}_7(){this.d7||(jO(this.Let,Ms.Ys),this.f7=!0)}get sI(){return this.R9.sI}Bit(){const t=this.Let.getClientRects();let e;if(!(t.length>0))return;e=t[0];const i=e.width,s=this.Let.videoWidth/this.Let.videoHeight,n=e.height;let r,o;i/n>s?(r=n*s,o=n):(o=i/s,r=i),this.Let.style.width=r+"px",this.Let.style.height=o+"px",this.Let.style.marginLeft=(i-r)/2+"px",this.Let.style.marginTop=(n-o)/2+"px",this.Let.style.backgroundColor="black"}Wit(){this.Let.style.width="100%",this.Let.style.height="100%",this.Let.style.marginLeft="",this.Let.style.marginTop="",this.Let.style.backgroundColor=""}get cI(){return this.Let.videoHeight}get fI(){return this.Let.videoWidth}get RR(){return this.Let.ended}get Ti(){return this.Let.offsetHeight*Ms.Ys.Yg}get ji(){return this.Let.offsetWidth*Ms.Ys.Yg}get OR(){return!1}get d7(){return this.f7}get wR(){}get Lu(){return this.Uit}get lt(){}get Ca(){return this.Vet}get lH(){return this.Zo}get rI(){return this.jG?this.jG.rI:se.mB()}get QG(){}get nt(){return this.Ll}get zl(){return this.gZ}get yI(){return!1}set yI(t){}uH(t,e,i,s,n){}LI(t,e,i,s,n,r,o,h,a){const u=new mo(t,e,i,s,n,r,o,a,h);return this.Ll.tt(u),this.f8.tt(u),u}dH(t){throw g("Not supported.")}DJ(t){}UR(){return ED(this.Let)}get M9(){return"block"===this.Let.style.display}ge(){this.Let.style.display="block",this.Uet.ge()}be(){this.Let.style.display="none",this.Uet.be()}u7(){}async Dn(t){if(t.Aw===Mr.mW)throw new g("Not yet implemented");await this.dit.Qet();const e=Fo(t.eH,(t=>t.aT.Aw===ge.ww)),i={kind:VO.Xet,mediaBufferConfigs:t.u4.map((t=>t.Dk)),fairPlaySdkUri:null==e?void 0:e.FU};return await this.dit.$et(i),this.jG=ZO.fit(t,this.dit,this.Pw,this.Let),this.fJ.Dn(this.jG,t),this.Let.setAttribute("x-webkit-airplay","deny"),this.Let.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.Let.disableRemotePlayback=!0,this.Let.preload="none",this.Let.src="https://theo.proxy/"+this.dit.ek+"/master.m3u8",this.jG}l7(){}_W(t){this.Ll.it(t),this.f8.it(t)}fH(){for(const t of this.Ll.uC.slice())t.gn();this.Ll.er()}ZG(t){}hH(){return!1}v7(t){t.appendChild(this.Let),this.Uet.v7(t)}AI(){return this.Let}get gH(){return this.fJ.gH}set gH(t){this.fJ.gH=t}get m7(){}set m7(t){}get J6(){}CI(){}constructor(t,e,i,s){super(),this.Lit=!0,this.dit=new WO,this.Pit=new UO,this.Oit=!0,this.Vit=new os,this.aZ=!1,this.Q9=Promise.resolve(),this.j9=new da,this.Fit=!0,this.Ro=se.mB(),this.f7=!1,this.git=()=>{this.qR||this.Nit.V<=0||this.gR.V<=0||this.Pit.sit(this.gR.jn(this.gR.V-1),this.Nit.jn(this.Nit.V-1))},this.pit=()=>{this.wo(new Te(this.SR))},this.wit=()=>{this.wo(new ri(this.SR,this.wR))},this.yit=()=>{this.wo(new Nu(this.SR,this.KR))},this.Ait=()=>{this.wo(new rs(this.SR,this.vI))},this.Sit=()=>{this.wo(new Ls(this.ct))},this.Tit=()=>{this.wo(new Wi(this.SR))},this.kit=()=>{this.Eb(this.SR)},this.Eit=async()=>{this.Fit&&this.wo(new H(this.SR)),this.Oit=!1,this.Fit=!0},this.xit=()=>{this.Oit=!0,this.wo(new fl(this.SR))},this.n7=t=>{const e=t.initDataType;var i;const s=null!=(i=t.initData)?i:new ArrayBuffer(0);this.wo(new lg(e,s))},this.Let=t,this.R9=new Za(this),this.Uit=i,this.gZ=s,this.Let.playsInline=!0,this.Let.style.width="100%",this.Let.style.height="100%",this.mit(),this.Iit(),this.Vet=OO(this.Let),this.Zo=new BO(this.Let),this.fJ=new jL(this),this.Pw=e,this.Ll=new ua,this.f8=new su(this),this.Uet=new _B,this.Get=new LO(this.Uet.we,this.Lu,this.nt,this.zl,this.Ca,this.lH)}},zO=[ee.fE,ee._E];function qO(t){const e=h.createElement(t);return Ur(e)&&e.addEventListener("contextmenu",QO),KO(e),e}function YO(t){KO(t),t.removeEventListener("contextmenu",QO)}function KO(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),Sh(t),Ud(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=hl.jB,t.controls=!1,t.style.display="none",Ur(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function jO(t,e){if(e._p){const e=t.muted;t.muted=!0,t.muted=!1,t.muted=e}else if(t.paused){const e=t.play();yt(e)&&ah(e),t.pause()}}function QO(t){t.preventDefault()}r(),r();var JO=class{Kk(t){return this.lW.Kk(t)}PE(t){this.lW.PE(t)}gn(){this.lW.gn()}constructor(t){this.lW=t}},$O=class extends JO{Kk(t){const e=new ke(t),i=this.vZ.aj.bG(e);return i?this.Git(e,i):this.lW.Kk(e)}async Git(t,e){e.cj(Ms.Vg()/1e3);const i=await this.lW.Kk(t);let s;e.lj(Ms.Vg()/1e3),s=i.Ok?i.Pk().pipeThrough(new qo(new tF(e))):i.Ck().then((t=>{const i=Ms.Vg()/1e3;return e.dj(i,new j(t)),e._j(i),t}));const n={qk:s,Kk:i.Kk};return new Zb(n,i)}constructor(t,e){super(t),this.vZ=e}},tF=class{start(t){this.BQ=t}transform(t){this.Hit.dj(Ms.Vg()/1e3,t),this.BQ.enqueue(t)}flush(){this.Hit._j(Ms.Vg()/1e3)}constructor(t){this.Hit=t}};function eF(t){return{get ratio(){return t.Oo},get thresholds(){return t.Zit.slice()}}}function iF(t){const e=[],i=_.floor(1/t);if(S(i))return[];for(let s=0;s<=i;s++){const i=Vs(s*t,0,1);e.push(i)}return e}r(),r(),r();var sF=class{get Oo(){return this.Xit}get Zit(){return this.zit}qit(t){return e=>{const i=e[e.length-1];this.Xit=i.intersectionRatio,t(i.intersectionRatio)}}get ka(){return this.su||(this.su=eF(this)),this.su}EI(){this.Yit.disconnect()}constructor(t,e,i){this.Xit=1,this.su=void 0,this.zit=iF(e);const n=this.qit(i);this.Yit=new s.IntersectionObserver(n,{root:null,threshold:this.zit}),this.Yit.observe(t)}},nF=class{get Oo(){return this.Xit}get Zit(){return this.zit}get ka(){return this.su||(this.su=eF(this)),this.su}Kit(t){this.Xit=t;const e=this.zit;let i=0;if(t>0)for(;i<e.length&&e[i]<=t;)++i;this.jit!==i&&(this.jit=i,this.Qit(t))}constructor(t,e){this.Xit=1,this.jit=-1,this.su=void 0,this.zit=iF(t),this.Qit=e}},rF=class extends nF{Jit(){const t=this.vo.getBoundingClientRect();return Vs(_.max(0,_.min(s.innerWidth,t.right)-_.max(0,t.left))*_.max(0,_.min(s.innerHeight,t.bottom)-_.max(0,t.top))/(t.width*t.height),0,1)}EI(){s.removeEventListener("scroll",this.$it)}constructor(t,e,i){super(e,i),this.$it=Qr((()=>this.Kit(this.Jit())),50),this.vo=t,s.addEventListener("scroll",this.$it,!!PP&&{passive:!0}),li((()=>this.Kit(this.Jit())))}},oF=.1,hF=class{get tst(){return this.ist}get Uo(){return this.sst}set Uo(t){if(S(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.sst=t}get ka(){return this.su||(this.su=function(t){return{get ratio(){return t.tst},get visible(){return t.tst>t.Uo},get visibleThreshold(){return t.Uo},set visibleThreshold(e){e=no(e),t.Uo=e},addObserver:(e,i)=>(e=no(e),t.No(e,i).ka),removeObserver(e){let i=t.nst(e);i&&t.Fo(i)}}}(this)),this.su}rst(t){return e=>{this.ist=e,null==t||t(this.ist)}}No(t,e){if(S(t))throw new b("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let i;return i="function"==typeof s.IntersectionObserver?new sF(this.vo,t,this.rst(e)):new rF(this.vo,t,this.rst(e)),this.ost.push(i),i}Fo(t){t.EI(),we(this.ost,t)}nst(t){for(const e of this.ost)if(e.ka===t)return e}gn(){for(const t of this.ost)t.EI();En(this.ost)}constructor(t){this.ist=1,this.sst=0,this.ost=[],this.su=void 0,this.vo=t,this.No(.1,this.rst())}};r();var aF=class extends pe{constructor(){super(Ti.Ey)}},uF=class extends sn{get hst(){return this.vZ}get bO(){return this.ast}set bO(t){this.ast=t,this.ja.bO=t}get ust(){return this.cst}get ht(){return this.ja.ht}get xz(){return this.lst}get Lu(){return this.dst}get MR(){return this.ja.MR}get WR(){return this.fst}get HX(){return this._st}get nt(){return this.ja.nt}get zl(){return this.gZ}get rt(){return this.ja.rt}get gR(){return this.pR()}pR(){return this.ja.gR}get vst(){return this.Uj}get tQ(){return this.eQ}get SR(){return this.kR()}set SR(t){this.ER(t)}kR(){return this.ja.SR}ER(t,e){this.ja.ER(t,e)}mst(){return this.kR()}get wR(){return this.ja.wR}set wR(t){this.ja.wR=t}get bt(){return this.ja.bt}get ct(){return this.Sd()}Sd(){return this.ja.ct}get we(){return this.ja.we}get RR(){return this.ja.RR}get lt(){return this.PR()}PR(){return this.ja.lt}get DR(){return this.NR()}NR(){return this.ja.DR}get Ca(){return this.ja.bI()}get lH(){return this.ja.Sa()}get yI(){return this.ja.yI}set yI(t){this.ja.yI=t}get GR(){return this.ja.GR}set GR(t){const e=Boolean(t);this.ZR(e)}ZR(t){this.ja.GR=t,t||this.qR||this.SI()}get qR(){return this.ja.qR}get KR(){return this.jR()}set KR(t){this.QR(t)}jR(){return this.ja.KR}QR(t){this.ja.KR=t}get JR(){return this.$R()}$R(){return this.ja.JR}get tI(){return this.ja.tI}set tI(t){this.ja.tI=t}get sI(){return this.ja.sI}get rI(){return this.oI()}oI(){return this.ja.rI}get hI(){return this.ja.hI}get xC(){return this.xO}get cI(){return this.ja.cI}get fI(){return this.ja.fI}get vI(){return this.ja.vI}set vI(t){const e=Vs(Number(t),0,1)||0;this.gI(e)}get pI(){return this.mZ}gI(t){this.ja.vI=t}Ma(){Zc(this,QI,this)}kI(){this.ja.kI()}TI(){this.ja.TI()}tu(){return this.eZ}async xa(t,e){if(this.eZ=t,t){this.gst.vq(t).catch(this.pst);const i=function(t){t.sources;const e=t.sources.filter((t=>wd(t.integration)));0;return t.sources=e,t}(t);await this.ja.xa(i,e)}}SI(){if(this.po)return;this.ja.SI(),this.cst.SI();const t=this.we.getElementsByTagName("video");for(let e=0;e<t.length;e++){const i=t[e];"Advertisement"===i.title&&jO(i,Ms.Ys)}this.po=!0}cs(){return this.wst.Lo()===Iu.FULLSCREEN}ge(){this.ja.ge()}be(){this.ja.be()}AI(){return this.ja.AI()}CI(){this.ja.CI()}DI(){this.ja.DI()}LI(t){return this.ja.LI(t)}async EI(){this.eZ=void 0,await this.ja.EI(),await this.ja.er()}async gn(){this.wo(new aF),this.$o(),this.lst.gn(),this.lR.gn(),this._st.gn(),this.yst.gn(),this.bst.gn(),this.wst.gn(),this.dst.gn(),this.Ast.gn(),this.cst.gn(),this._Z.gn(),await this.ja.gn()}constructor(t,e,i){super(),this.ast=!1,this.po=!1,this.eZ=void 0,this.Sst=!1,this.Ta=void 0,this.pst=t=>{if(this.Sst)return;this.Sst=!0;const e=this.Tst,i=Xs(t);this.ja.fC=new FI(this.we,i,t),ah(e.gn())},this.kst=t=>{t.type!==Ti.Hy&&t.type!==Ti.Gy&&this.wo(t)};const s=no(e.uid);S(s)?this.xO=wk++:this.xO=s,this.bd=e;const n=Ms.lR,r=new BD;this.Ast=new yP("9.2.0",n,r),this.vZ=new gD,this.mZ=new gI;const o=new $O(n,this.vZ);this.lR=new rD(o,e.allowMixedContent),this.RQ=null!=i?i:new QC(e.isEmbeddable,"9.2.0",zC()),this.gst=new LD(n,this.RQ,this.Ast,r,e,zC()),this.gst.SQ().catch(this.pst),this.dst=new OP(t),this.dst.yn(Ka.pn,this.Ds),this.gZ=new GD,this.Uj=new bD,this.eQ=new SD;const h=new OI(t,e,this.lR,this.vZ,this.mZ,this.dst,this.gZ);this.vZ.Tj(h);let a=h;a=new AD(a,this.vst),a=new TD(a,this.tQ),this.Tst=a,this.ja=new ck(this.Tst),this.ja.iy(this.kst),this.fst=new kD(this.ja),this._st=new aD(this.ja,this.lR,this.vZ),this.yst=new kP(this),this.bst=new HP(this.ja,e.allowNativeFullscreen),this.wst=new KP(this.bst,this.ja.Sa()),this.dst.bn(),this.Po=new hF(t),this._Z=new xI(this.dst,this.gZ,1,[ee._E]),this.cst=new RI(this._Z),this.lst=new ID}};r(),r();var ec=class extends sn{get hst(){return this.Est()}Est(){return this.ea.hst}get qc(){return this.xst()}xst(){return this.ea.qc}get Ast(){return this.ea.Ast}get ust(){return this.Rst()}Rst(){return this.ea.ust}get bO(){return this.ea.bO}set bO(t){this.ea.bO=t}get yst(){return this.ea.yst}get xz(){return this.ea.xz}get vst(){return this.ea.vst}get bd(){return this.ea.bd}get Lu(){return this.ea.Lu}get Ca(){return this.bI()}bI(){return this.ea.Ca}get lH(){return this.Sa()}Sa(){return this.ea.lH}get lR(){return this.ea.lR}get pI(){return this.ea.pI}get gst(){return this.ea.gst}get tQ(){return this.ea.tQ}get HX(){return this.ea.HX}get wst(){return this.ea.wst}get dst(){return this.ea.dst}get ja(){return this.ea.ja}get zl(){return this.ea.zl}get Ist(){return this.Cst()}Cst(){return this.ea.Ist}get Pst(){return this.Dst()}Dst(){return this.ea.Pst}get xC(){return this.ea.xC}get Po(){return this.ea.Po}get ht(){return this._R()}_R(){return this.ea.ht}pR(){return this.ea.pR()}get wR(){return this.yR()}set wR(t){this.bR(t)}yR(){return this.ea.wR}bR(t){this.ea.wR=t}get bt(){return this.AR()}AR(){return this.ea.bt}kR(){return this.ea.kR()}ER(t,e){this.ea.ER(t,e)}mst(){return this.ea.mst()}Sd(){return this.ea.Sd()}get we(){return this.xR()}xR(){return this.ea.we}get RR(){return this.IR()}IR(){return this.ea.RR}PR(){return this.ea.PR()}NR(){return this.ea.NR()}get MR(){return this.LR()}LR(){return this.ea.MR}get yI(){return this.ea.yI}set yI(t){this.ea.yI=t}get WR(){return this.UR()}UR(){return this.ea.WR}get GR(){return this.HR()}set GR(t){this.ZR(t)}HR(){return this.ea.GR}ZR(t){this.ea.ZR(t)}get qR(){return this.YR()}YR(){return this.ea.qR}get KR(){return this.jR()}set KR(t){this.QR(t)}jR(){return this.ea.KR}QR(t){this.ea.KR=t}$R(){return this.ea.$R()}get tI(){return this.eI()}set tI(t){this.iI(t)}eI(){return this.ea.tI}iI(t){this.ea.tI=t}get sI(){return this.nI()}nI(){return this.ea.sI}get Ta(){return this.ea.Ta}set Ta(t){this.ea.Ta=t}oI(){return this.ea.oI()}get hI(){return this.aI()}aI(){return this.ea.hI}get nt(){return this.uI()}uI(){return this.ea.nt}get cI(){return this.lI()}lI(){return this.ea.cI}get rt(){return this.dI()}dI(){return this.ea.rt}get fI(){return this._I()}_I(){return this.ea.fI}get vI(){return this.mI()}set vI(t){this.gI(t)}mI(){return this.ea.vI}gI(t){this.ea.gI(t)}SI(){this.ea.SI()}TI(){this.ea.TI()}kI(){this.ea.kI()}ge(){this.ea.ge()}be(){this.ea.be()}cs(){return this.ea.cs()}AI(){return this.ea.AI()}CI(){this.ea.CI()}DI(){this.ea.DI()}LI(t){return this.ea.LI(t)}Ma(){this.ea.Ma()}tu(){return this.ea.tu()}xa(t,e){return this.ea.xa(t,e)}EI(){return this.ea.EI()}MI(t){return!1}$H(){this.Nst&&this.ea.iy(this.BI)}tZ(){this.Nst&&this.ea._y(this.BI)}async gn(t){this.$o(),t||await this.ea.gn(),this.tZ()}constructor(t,e){super(),this.BI=t=>{this.MI(t)||this.wo(t)},this.ea=t,this.Nst=!e,this.$H()}},io=function(t){return t[t.ou=0]="ou",t[t.Mst=1]="Mst",t[t.QC=2]="QC",t[t.Lst=3]="Lst",t[t.Bst=4]="Bst",t[t.Ost=5]="Ost",t}({}),cF=[0,1,2,3,4,5],lF={};function xh(t,e){(lF[e]||(lF[e]=[])).push(t)}var dF={};function fF(t,e){(dF[e]||(dF[e]=[])).push(t)}var _F=[];function vF(t){for(const e of _F)e(t)}r();var mF=self.CustomEvent;var gF=function(){try{const t=new mF("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,e){return new CustomEvent(t,e)}:function(t,e){const i=h.createEvent("CustomEvent");return i.initCustomEvent(t,(null==e?void 0:e.bubbles)||!1,(null==e?void 0:e.cancelable)||!1,null==e?void 0:e.detail),i};r();var pF=new class{get V(){return this.pO.length}get ka(){var t;return null!=(t=this.su)?t:this.su=function(t){const e=[];for(let i=0;i<t.V;i++)e[i]=t.lC(i).ka;return e.getPlayerByUID=e=>{const i=t.Fst(e);return i&&i.ka},e}(this)}lC(t){return this.pO[t]}YJ(t){this.pO.push(t),this.ka.push(t.ka)}$S(t){const e=this.pO.indexOf(t);e<0||(ka(this.pO,e),this.su&&ka(this.su,e))}Fst(t){for(const e of this.pO)if(e.xC===t)return e}constructor(){this.pO=[],this.su=void 0}};function wF(t){let e,i;const s=e=>{i=e;const s=NC(e,t.bd);t.xa(s)};let n={get abr(){return t.hst.ka},get ads(){var e;return null==(e=t.qc)?void 0:e.ka},get audioTracks(){return t.ht.ka},get autoplay(){return t.bO},set autoplay(e){t.bO=Boolean(e)},get buffered(){return t.pR()},get canvas(){return t.yst.ka},get cast(){var e;return null==(e=t.xz)?void 0:e.ka},get clip(){return t.vst.ka},get currentProgramDateTime(){var e;return null!=(e=t.wR)?e:null},set currentProgramDateTime(e){t.wR=null!=e?e:void 0},get currentTime(){return t.kR()},set currentTime(e){t.ER(Number(e))},get duration(){return t.Sd()},get element(){return t.we},get ended(){return t.RR},get error(){return t.PR()},get errorObject(){return t.NR()},get loop(){return t.tQ.tQ},set loop(e){t.tQ.tQ=Boolean(e)},get metrics(){return t.WR.ka},get muted(){return t.GR},set muted(e){t.ZR(e)},get network(){return t.HX.ka},get paused(){return t.qR},get playbackRate(){return t.KR},set playbackRate(e){const i=Number(e);if(i<0)throw new RangeError("playbackRate must be a positive number");t.KR=i},get played(){return t.$R()},get poster(){return t.mi},set poster(e){t.mi=ze(e)},get preload(){return t.tI},set preload(e){t.tI=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(e)},get presentation(){return t.wst.ka},get readyState(){return t.sI},get seekable(){return t.oI()},get seeking(){return t.hI},get source(){return i},set source(t){s(t)},get src(){return SC(t.tu())},set src(t){s({sources:t})},get textTracks(){return t.nt.ka},get textTrackStyle(){return t.zl.ka},get theoLive(){return t.Ist},get uid(){return t.xC},get videoHeight(){return t.cI},get videoTracks(){return t.rt.ka},get videoWidth(){return t.fI},get visibility(){return t.Po.ka},get volume(){return t.vI},set volume(e){t.gI(Number(e))},get latency(){return t.pI.ka},get theoads(){return t.Pst},destroy(){t.gn(),t=null,i=void 0},play(){t.Vst()},pause(){t.TI()},stop(){i=void 0,t.EI()},prepareWithUserAction(){t.SI()},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)},setSource(t){s(t)},addTextTrack:e=>t.LI(function(t){return{Lt:ze(t.kind),xh:ze(t.label),gs:ze(t.language),Aw:ze(t.type)}}(e)).ka};return e=new Ju(n,!0),e.nu(t),e.yn("destroy",(()=>{e.gn()})),n}r(),r(),r(),r();var yF=class extends pe{constructor(t){super(Ti.ao),this.source=t}};r();var bF=class extends sn{get wR(){}set wR(t){}get SR(){return this.kR()}set SR(t){this.ER(t)}kR(){return this.hZ}mst(){return this.kR()}ER(t,e){this.aZ&&this.hZ===t||(this.hZ=t,this.aZ=!0,this.wo(new L(this.hZ)))}get qR(){return this.cZ}get KR(){return this.lZ}set KR(t){this.lZ!==t&&(this.lZ=t,this.wo(new Nu(this.hZ,this.KR)))}get sI(){return Ht.$B}get hI(){return this.aZ}kI(){this.cZ&&(this.cZ=!1,this.wo(new H(this.hZ)),this.wo(new tu(this.hZ)))}TI(){this.cZ||(this.cZ=!0,this.wo(new ri(this.hZ,this.wR)),this.wo(new fl(this.hZ)))}er(){this.hZ=0,this.aZ=!1,this.lZ=1,this.TI()}gn(){this.$o()}be(){}ge(){}constructor(){super(),this.hZ=0,this.cZ=!0,this.aZ=!1,this.lZ=1}};r();var AF={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},SF={visibility:"hidden"},TF={visibility:"visible"},kF=class{get Gu(){return void 0!==this.Wst?this.Wst:void 0!==this.Ust?this.Ust:void 0}set Gst(t){this.Ust=t,this.tr()}tr(){const t=this.ea.qR,e=this.Hst;this.Gu?this.Vs.style.backgroundImage='url("'+Cm(this.Gu)+'")':this.Vs.style.backgroundImage="",t&&this.Gu&&!e?this.ge():this.be()}ge(){Md(SF,this.ea.we),Md(TF,this.Vs)}be(){Md(SF,this.Vs),Md(TF,this.ea.we)}$H(){this.ea.yn(Ti.ao,this.Zst),this.ea.yn(Ti.ro,this.MW)}gn(){this.ea.fn(Ti.ao,this.Zst),this.ea.fn(Ti.ro,this.MW),Gt(this.Vs)}constructor(t){this.Hst=!1,this.Zst=t=>{var e;this.Hst=!this.ea.qR,this.Wst=null==(e=t.source)?void 0:e.poster,this.tr()},this.MW=()=>{this.Hst=!0,this.be()},this.ea=t,this.$H(),this.Vs=function(){let t=s&&s.document&&s.document.createElement("div");return t.className="theoplayer-poster",Md(AF,t),t}(),t.we.appendChild(this.Vs)}};r(),r(),r(),r();var ja=function(t){return t[t.Xst=0]="Xst",t[t.zst=1]="zst",t}({});function Ee(t){let e;const i={get playing(){return t.Oc},get currentAds(){return t.qst.map((t=>t.Yst()))},get currentAdBreak(){var e,i;return null!=(i=null==(e=t.Kst)?void 0:e.Yst())?i:null},get scheduledAds(){return t.jst.map((t=>t.Yst()))},get scheduledAdBreaks(){return t.Qst.map((t=>t.Yst()))},skip(){t.DD()},schedule(e){let i=PC(e,Ih.Fg);i?t.u6(i,ja.Xst,!1):console.error("Invalid ad description")},registerServerSideIntegration(e,i){t.Jst(e,i)},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new rt(t,i),i}var EF=class extends sn{get Oc(){return!!this.Uc&&this.Uc.Oc}get qst(){return this.Uc?this.Uc.qst:[]}get Kst(){return this.Uc?this.Uc.Kst:null}get jst(){return this.Uc?this.Uc.jst:[]}get Qst(){return this.Uc?this.Uc.Qst:[]}u6(t,e,i){var s;null==(s=this.Uc)||s.u6(t,e,i)}$st(t){var e;null==(e=this.Uc)||e.$st(t)}DD(){var t;null==(t=this.Uc)||t.DD()}tnt(t){var e;null==(e=this.Uc)||e.tnt(t)}Jst(t,e){var i;null==(i=this.Uc)||i.Jst(t,e)}get ka(){var t;return null!=(t=this.su)?t:this.su=Ee(this)}async gn(t){this.$o(),void 0!==this.Uc&&(this.Uc._y(this.Ds),t||await this.Uc.gn(),this.Uc=void 0)}constructor(t){var e;super(),this.su=void 0,this.Uc=t,null==(e=this.Uc)||e.iy(this.Ds)}};r(),r();var ss=class extends Ds{constructor(t,e){super(t),this.td=e}},us=class extends pe{get ad(){return this.adBreak}constructor(t,e){super(t),this.adBreak=e}},Au=class extends ss{ba(){return new xF(this.td.Yst())}constructor(t){super("ent",t)}},xF=class extends us{constructor(t){super("removeadbreak",t)}};r();var RF=class extends ss{ba(){return new IF(this.td.Yst())}constructor(t){super("int",t)}},IF=class extends us{constructor(t){super("addadbreak",t)}};r(),r();var Ra=class extends Ds{constructor(t,e){super(t),this.snt=e}},CF=class extends pe{constructor(t,e){super(t),this.ad=e}},Uu=class extends Ra{ba(){return new PF(this.snt.Yst())}constructor(t){super("nnt",t)}},PF=class extends CF{constructor(t){super("addad",t)}};r();var Lh=class extends ss{ba(){return new DF(this.td.Yst())}constructor(t){super("rnt",t)}},DF=class extends us{constructor(t){super("adbreakend",t)}};r();var La=class extends ss{ba(){return new NF(this.td.Yst())}constructor(t){super("ont",t)}},NF=class extends us{constructor(t){super("adbreakbegin",t)}};r();var cn=class extends Ra{ba(){return new MF(this.snt.Yst(),this.currentTime)}constructor(t,e){super("hnt",t),this.currentTime=e}},MF=class extends CF{constructor(t,e){super("adbegin",t),this.currentTime=e}};r();var xn=class extends Ra{ba(){return new LF(this.snt.Yst(),this.currentTime)}constructor(t,e){super("ant",t),this.currentTime=e}},LF=class extends CF{constructor(t,e){super("adend",t),this.currentTime=e}};r();var Qs=class extends Ds{ba(){return new BF}constructor(){super("unt")}},BF=class extends pe{constructor(){super("adadded")}},OF=class extends EF{get fC(){return this.Uc}set fC(t){const e=this.Uc;if(e===t)return;const i=this.qst,s=this.Kst,n=this.jst,r=this.Qst;null==e||e._y(this.Ds),this.Uc=t,null==t||t.iy(this.Ds);const o=this.qst,h=this.Kst,a=this.jst,u=this.Qst,c=[];let l=!1;for(const t of r)ms(u,t)||c.push(new Au(t));for(const t of u)ms(r,t)||c.push(new RF(t));for(const t of a)ms(n,t)||(c.push(new Uu(t)),l=!0);l&&c.push(new Qs),s!==h&&(s&&c.push(new Lh(s)),h&&c.push(new La(h)));for(const t of i)ms(o,t)||c.push(new xn(t,this.ea.kR()));for(const t of o)ms(i,t)||c.push(new cn(t,this.ea.kR()));for(const t of c)this.wo(t)}constructor(t){super(void 0),this.ea=t}};r(),r();var FF=class extends sn{get ka(){var t;return null!=(t=this.su)?t:this.su=Ee(this)}tnt(t){}Jst(t,e){}u6(t,e,i){}DD(){}$st(t){}gn(){return this.$o(),Promise.resolve()}constructor(...t){super(...t),this.Oc=!1,this.Kst=null,this.qst=[],this.Qst=[],this.jst=[],this.su=void 0}},Ue=class extends FF{u6(t,e,i){this.cnt.push({lnt:t,dnt:e,fnt:i})}DD(){}tnt(t){}Jst(t,e){this._nt.push({rP:t,vnt:e})}$st(t){const e=this._nt.slice(),i=this.cnt.slice();this.er();for(const i of e)t.Jst(i.rP,i.vnt);for(const e of i)t.u6(e.lnt,e.dnt,e.fnt)}mnt(){const t=this.cnt.map((t=>t.lnt));return this.er(),t}er(){En(this._nt),En(this.cnt)}async gn(){this.er(),await super.gn()}constructor(...t){super(...t),this._nt=[],this.cnt=[]}};r();var VF,WF=class extends pe{constructor(t){super("tizen2retry"),this.originalErrorEvent=t}};function UF(){if(!VF){let t=uF;t=function(t){return class extends ec{constructor(e,i){let s=new t(e,i);for(const t of cF)if(dF[t])for(const e of dF[t])s=e(s);super(s)}}}(t);let e=function(t){return class extends sn{get Ast(){return this.gnt.Ast}get qc(){return this.Uc}get yst(){return this.gnt.yst}get bd(){return this.gnt.bd}get lR(){return this.gnt.lR}get Ca(){return this.gnt.Ca}get lH(){return this.gnt.lH}get wst(){return this.gnt.wst}get dst(){return this.gnt.dst}get ja(){return this.gnt.ja}get hst(){return this.gnt.hst}get bO(){return this.gnt.bO}set bO(t){this.gnt.bO=t,this.pnt()}get ust(){return this.gnt.ust}get ht(){return this.gnt.ht}get xz(){return this.gnt.xz}get Lu(){return this.gnt.dst}get ka(){return this.su||(this.su=this.ba()),this.su}get MR(){return this.gnt.MR}get yI(){return this.gnt.yI}set yI(t){this.gnt.yI=t}get WR(){return this.gnt.WR}get HX(){return this.gnt.HX}get nt(){return this.gnt.nt}get zl(){return this.gnt.zl}get rt(){return this.gnt.rt}get vst(){return this.gnt.vst}get tQ(){return this.gnt.tQ}get wR(){return this.ea.wR}set wR(t){this.ea.wR=t}get bt(){return this.gnt.bt}get we(){return this.gnt.we}get RR(){return this.gnt.RR}get GR(){return this.gnt.GR}set GR(t){this.ZR(t)}get qR(){return this.ea.qR}get mi(){return this.wnt.Gu||""}set mi(t){this.wnt.Gst=t}get KR(){return this.jR()}set KR(t){this.QR(t)}jR(){return this.gnt.KR}QR(t){this.ea.KR=t}get tI(){return this.gnt.tI}set tI(t){this.gnt.tI=t}get sI(){return this.ea.sI}get Ta(){return this.gnt.Ta}set Ta(t){this.gnt.Ta=t}get hI(){return this.ea.hI}get Ist(){return this.gnt.Ist}get Pst(){return this.gnt.Pst}get xC(){return this.gnt.xC}get cI(){return this.gnt.cI}get fI(){return this.gnt.fI}get vI(){return this.gnt.vI}set vI(t){this.gI(t)}get pI(){return this.gnt.pI}get gst(){return this.gnt.gst}get Po(){return this.gnt.Po}async Jo(t,e){return this.Qo.Jo(t,e).catch(Eu)}async ynt(t,e){J(e),this.gnt.iy(this.bnt);try{await this.gnt.xa(t,e)}finally{this.gnt._y(this.bnt)}}async pnt(){const t=await this.Ant();this.Snt(t)}async Ant(){const t=this.tu();return t&&!wC(t)&&this.bO&&this.qR?this.ust.Tnt(this.GR):"none"}Snt(t){var e;const i=(null==(e=this.tu())?void 0:e.mutedAutoplay)||this.bd.mutedAutoplay;switch(t){case"all":this.Vst();break;case"muted":(this.GR||i===$T.ALL)&&(this.GR=!0,this.kI())}}xa(t){wC(this.eZ)||this.wo(new Ys(0,Ht.$B)),this.er(),this.eZ=t,ah(this.Jo((async e=>{J(e);try{await this.ynt(t,e)}catch(t){return th(t),this.eZ=void 0,void this.MH(Qy(t,Qa.SOURCE_NOT_SUPPORTED))}finally{this.knt(this.gnt)}const i=await this.Ant();this.wo(new yF(this.tu())),this.Snt(i)})))}ER(t,e){this.ea.ER(t,e)}PR(){var t;return null!=(t=this.AZ)?t:this.gnt.PR()}NR(){var t;return null!=(t=this.zG)?t:this.gnt.NR()}MH(t){void 0===this.NR()&&(this.zG=t,this.AZ=Xs(t),this.wo(new Ga(t)))}kI(){this.ea.kI()}Vst(){this.GR||this.SI(),this.kI()}SI(){this.gnt.SI()}TI(){this.ea.TI()}EI(){this.xa(void 0)}ge(){this.rZ=!0,this.ea.ge()}be(){this.rZ=!1,this.ea.be()}Ma(){this.gnt.Ma()}gI(t){this.gnt.gI(t)}ZR(t){this.gnt.ZR(t)}Aa(t){this.Ent=t,t.YJ(this)}cs(){return this.gnt.cs()}tu(){return this.eZ}AI(){return this.gnt.AI()}kR(){return this.ea.kR()}mst(){return this.ea.mst()}Sd(){return this.gnt.Sd()}pR(){return this.gnt.pR()}$R(){return this.gnt.$R()}oI(){return this.gnt.oI()}CI(){this.gnt.CI()}DI(){this.gnt.DI()}LI(t){return this.gnt.LI(t)}er(){this.eZ=void 0,this.zG=void 0,this.AZ=void 0,this.xnt=!0,En(this.Rnt),this.Int.er(),this.knt(this.Int),this.Qo.Yw(),ah(this.Qo.Jo((async t=>{J(t),await this.gnt.EI()})))}gn(){this.wo(new aF),this.wnt.gn(),this.tZ(),this.er(),ah(this.Jo((async()=>{await this.gnt.gn(),this.Ent&&(this.Ent.$S(this),this.Ent=void 0),this.Qo.gn()}))),this.$o()}knt(t){if(this.ea===t)return;const e=this.ea.qR,i=this.ea.kR(),s=this.ea.KR,n=this.ea.sI,r=this.ea.hI;this.Cnt=e,this.g7=n,this.tZ(),t.iy(this.Pnt),t===this.gnt?(void 0!==this.Uc&&(this.Uc.fC=t.qc,this.Dnt.$st(this.Uc)),(r||t.kR()!==i)&&t.ER(i),t.KR!==s&&(t.KR=s),e?t.TI():t.kI()):(void 0!==this.Uc&&(this.Uc.fC=this.Dnt,this.Dnt.er()),this.bd.retainPlaybackRateOnSourceChange?t.KR=s:1!==s&&this.wo(new Nu(this.kR(),1))),t._y(this.Pnt),this.ea=t,this.$H();for(const t of this.Rnt)this.wo(t);En(this.Rnt),this.rZ?t.ge():t.be()}$H(){this.ea.iy(this.NI)}tZ(){this.ea._y(this.NI)}ba(){return wF(this)}constructor(e,i){super(),this.Cnt=!0,this.g7=Ht.$B,this.xnt=!1,this.eZ=void 0,this.zG=void 0,this.AZ=void 0,this.bnt=t=>{t.type!==Ti.zy&&this.Rnt.push(t)},this.Pnt=t=>{(t.type!==Ti.ro||this.ea.qR)&&(t.type===Ti.Zy&&this.ea.qR||t.type===Ti.jy&&this.ea.hI&&this.ea.kR()===t.currentTime||t.type===Ti.zy&&this.ea.KR===t.playbackRate||this.wo(t))},this.NI=t=>{if(this.xnt){if(t.type===tl.FL)return;t.type!==tl.ML&&t.type!==tl.VL||(this.xnt=!1)}if(t.type===Ti.ro){if(!this.Cnt)return;this.Cnt=!1}else if(t.type===Ti.Zy){if(this.Cnt)return;this.Cnt=!0}else if(t.type===tl.tC){if(this.g7===t.readyState)return;this.g7=t.readyState}else if(t.type===Ti.Ey)return;this.wo(t)},this.gnt=new t(e,i),this.Int=new bF,this.ea=this.gnt,this.wnt=new kF(this),this.gnt.qc&&(this.Uc=new OF(this),this.Uc.fC=this.gnt.qc,this.Dnt=new Ue),this.Qo=new ju,this.Rnt=[],this.rZ=!0,this.$H()}}}(t);Z.Im&&Z.Pm<3&&(e=function(t){return class extends t{xa(t){this.Nnt=0,super.xa(t)}wo(t){if(t.type===yo.da&&this.Nnt<3)return this.Nnt++,super.wo(new WF(t)),void super.xa(this.tu());super.wo(t)}constructor(...t){super(...t),this.Nnt=0}}}(e)),e=function(t){let e=t;for(const t of cF)if(lF[t])for(const i of lF[t])e=i(e);return e}(e),VF=e}return VF}function GF(t,e){const i=ek(e),s=new(UF())(t,i);s.Ta=s;let n=s.ka;return s.Ma(),s.Aa(pF),w.defineProperty(n,"constructor",{value:GF}),n=qA(n),vF(s),n}li((()=>{self.dispatchEvent&&self.dispatchEvent(gF("theoplayerready"))})),r();var HF={base64:new class{encode(t){return Vr(t)}decode(t){return mg(t)}}};r();var ZF=JSON.parse('["hbbtv","dash","hesp","millicast","hls","chromecast","ads","theoads","airplay","spotx","vr","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","uplynk","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');r(),r(),r();var XF=class{get SR(){const t=this.ea.currentTime;return isFinite(t)?t:"now"}get Mnt(){return this.ea.src||""}er(){}constructor(t,e){this.Lnt=!1,this.Bnt=t=>{this.Ont.iY(t.error,this.SR)},this.Fnt=()=>{this.Ont.Jq(this.Mnt),this.ea.removeEventListener("playing",this.Fnt),this.Lnt=!1},this.js=()=>{var t,e,i,s;this.Lnt||(this.ea.addEventListener("playing",this.Fnt),this.Lnt=!0),null==(t=this.ea.ads)||t.removeEventListener("adbegin",this.Vnt),null==(e=this.ea.theoads)||e.removeEventListener("interstitialbegin",this.Wnt);var n,r;(null==(s=this.ea.source)||null==(i=s.ads)?void 0:i.some((t=>"theoads"===t.integration)))&&(null==(n=this.ea.ads)||n.addEventListener("adbegin",this.Vnt),null==(r=this.ea.theoads)||r.addEventListener("interstitialbegin",this.Wnt))},this.Vnt=t=>{"theoads"!==t.ad.integration||t.ad.isSlate||this.Ont.eY("ad")},this.Wnt=t=>{const e=t.interstitial;(function(t){return"adbreak"===t.type})(e)||this.Ont.eY(function(t){switch(t){case"adbreak":default:return"ad";case"overlay":return"overlay"}}(e.type))},this.Ont=e,this.ea=t,this.ea.addEventListener("error",this.Bnt),this.ea.addEventListener("sourcechange",this.js),this.js()}};!function(t){_F.push(t)}((function(t){new XF(t.ka,t.Ast)})),r();var zF="theoplayer-stored-volume",qF="theoplayer-stored-mutedstate";xh((function(t){return class extends t{ZR(t){this.bd.persistVolume&&Su.Mb(qF,""+Boolean(t)),super.ZR(t)}gI(t){this.bd.persistVolume&&Su.Mb(zF,""+Number(t)),super.gI(t)}constructor(t,e){if(super(t,e),e.persistVolume){let t=Su.bQ(zF);(void 0===t||S(t))&&(t=1);const e=Su.AQ(qF)||!1;this.vI=t,this.GR=e}}}}),io.ou);var YF="9.2.0",KF=pF.ka,jF=WS._P.registerContentProtectionIntegration.bind(WS._P);r(),r(),r(),r();var QF={pY(t){s.addEventListener("beforeunload",t)},_Y(t){s.removeEventListener("beforeunload",t)}},JF={Unt:class{get pZ(){const t=[];for(const e of this.Gnt){const i=this.Hnt.get(e);if(i){const e=i.map((t=>t.Znt));t.push(...e)}}return this.Xnt&&t.push(this.Xnt),t}yZ(t){for(const e of this.pZ)e.v7(t)}LH(t){const e=Fo(this.Hnt.get(t),(t=>t.znt));if(e)return e.znt=!1,e.Znt}qnt(t){if(!this.Xnt){var e;const t=null==(e=this.Hnt.get(ee._E))?void 0:e[0].Znt.YG;if(!t)throw new g("Error creating iOS Safari MediaController");this.Xnt=new XO(t,this.Pw,this.Yu,this.gZ),t.parentElement&&this.Xnt.v7(t.parentElement)}return this.Xnt}async pH(t){const e=t.YG,i=e.tagName.toLowerCase();await t.er(),KO(e);const s=Fo(this.Hnt.get(i)||[],(e=>t===e.Znt));s&&(s.znt=!0)}fZ(){for(const t of this.pZ)t._7()}gn(){for(const t of this.pZ){const e=t.YG;t.Hw(),YO(e),Gt(e)}this.Hnt.clear(),this.Xnt=void 0}Ynt(){for(const t of this.Gnt){const e=[];this.Hnt.set(t,e);for(let i=0;i<this.Knt;i++){const i=qO(t),s=t===ee.fE?new fB(i,this.Pw,this.Yu):new FO(i,this.Pw,this.Yu,this.gZ);e.push({Znt:s,znt:!0})}}}constructor(t,e,i=2,s=zO,n=fb()){this.Knt=i,this.Gnt=[...s],this.Pw=n,this.Yu=t,this.gZ=e,this.Hnt=xu(),this.Ynt()}},jnt:class t{Tnt(t){return this.Qnt.Jo((()=>this.Jnt(t)))}SI(){this._Z.fZ()}async Jnt(e){const i=this._Z.LH(ee._E),s=i.YG,n=await t.$nt(s,e);return await this._Z.pH(i),n}static async $nt(e,i){return Z.Nm||Z.Im?"all":(e.src||(e.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.trt(),!i&&await t.ert(e,!1)?"all":await t.ert(e,!0)?"muted":"none")}static async ert(t,e){t.muted=e;const i=t.play();try{if(!yt(i))return!Z.Qs;const t=Fe(250);return await Promise.race([i,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static trt(){return new Promise((t=>{if("function"==typeof MessageChannel){const e=new MessageChannel;e.port1.onmessage=()=>t(),e.port2.postMessage("")}else u(t,0)}))}gn(){this.Qnt.gn()}constructor(t){this._Z=t,this.Qnt=new ju}},irt:QF};r();(function(t){xI=t.Unt,RI=t.jnt,xo=t.irt})(Z.Lm&&Z.Om?Bo({},JF,{jnt:class{Tnt(t){return Promise.resolve("all")}SI(){}gn(){}}}):JF),r(),r(),r(),r();var $F=class{async BH(t){return OT(t.type)}async OH(t){return!!await lT(t,!0)}},tV=class extends $F{async BH(t){return!!Bf(t.useManagedMediaSource)&&super.BH(t)}};function eV(t){return Ki(t)}function iV(t,e){const i=Ki(t);return e?""+i+e:""+i}r(),r();var sV=class{async nrt(t){return(await this.ort.rrt(t.map(eV))).shift()}hrt(t,e){const i=iV(t,e);return this.art.Db(i)}async urt(t,e){var i;const s=iV(t,e);return null==(i=await this.crt.Nb(s))?void 0:i.data}xQ(t){return this.lrt.Nb(t)}constructor(t,e,i,s){this.ort=t,this.art=e,this.crt=i,this.lrt=s}};r(),r(),r();var Re=class{drt(t){return Promise.resolve(!1)}frt(t){return Promise.reject(nV)}_rt(t){return Promise.reject(nV)}Db(t){return Promise.resolve(!1)}Nb(t){return Promise.resolve(void 0)}vrt(t,e){return Promise.resolve(void 0)}rrt(t){return Promise.resolve([])}mrt(){return Promise.resolve([])}grt(t){return Promise.resolve([])}prt(t,e){return Promise.resolve([])}$S(t){return Promise.reject(nV)}wrt(t){return Promise.reject(nV)}yrt(){return Promise.reject(nV)}},nV="Storage disabled",rV="Storage disabled";r(),r(),r();var oV=class{get brt(){return this.qw.Vb}async drt(t){return(this.Art||await this.brt).drt(t)}async frt(t,e){return(this.Art||await this.brt).frt(t,e)}async _rt(t,e){return(this.Art||await this.brt)._rt(t,e)}async Db(t){return(this.Art||await this.brt).Db(t)}async Nb(t){return(this.Art||await this.brt).Nb(t)}async vrt(t,e){return(this.Art||await this.brt).vrt(t,e)}async rrt(t){return(this.Art||await this.brt).rrt(t)}async mrt(){return(this.Art||await this.brt).mrt()}async grt(t){return(this.Art||await this.brt).grt(t)}async prt(t,e){return(this.Art||await this.brt).prt(t,e)}async $S(t){return(this.Art||await this.brt).$S(t)}async wrt(t){return(this.Art||await this.brt).wrt(t)}async yrt(){return(this.Art||await this.brt).yrt()}constructor(t){this.qw=new os,this.Art=void 0,this.qw.Kw(t),this.qw.Vb.then((t=>{this.Art=t}))}},hV=class{get Srt(){return this.qw.Vb}async Trt(t){const e=this.krt||await this.Srt;return await e.Trt(t)}constructor(t){this.qw=new os,this.krt=void 0,this.qw.Kw(t);const e=this.qw.Vb;e.then((t=>{this.krt=t})),this.Ert=new oV(e.then((t=>t.Ert))),this.xrt=new oV(e.then((t=>t.xrt))),this.Rrt=new oV(e.then((t=>t.Rrt))),this.Irt=new oV(e.then((t=>t.Irt))),this.Crt=new oV(e.then((t=>t.Crt)))}};function aV(t){return new g("This storage cannot handle persistency type "+t)}r(),r(),r();var $a=function(t){return t.Prt="readonly",t.Drt="readwrite",t}({}),uV=class{drt(t){return Promise.resolve("temporary"===t)}frt(t,e){return void 0===e&&(e="temporary"),"temporary"!==e?Promise.reject(aV(e)):(this.Nrt(t.key),this.mA.push(t),Promise.resolve())}_rt(t,e){if(void 0===e&&(e="temporary"),"temporary"!==e)return Promise.reject(aV(e));for(const e of t)this.Nrt(e.key);for(const e of t)this.mA.push(e);return Promise.resolve()}Db(t){return Promise.resolve(Boolean(this.Mrt(t)))}Nb(t){return Promise.resolve(this.Mrt(t))}vrt(t,e){return Promise.resolve(this.Lrt(t,e))}rrt(t){const e=t?t.map((t=>this.Mrt(t))):this.mA;return Promise.resolve(e.filter(ji))}mrt(){return Promise.resolve([...this.mA])}grt(t){return this.prt(t,"key")}prt(t,e){const i=this.mA.filter((i=>i[e]===t));return Promise.resolve(i)}$S(t){return this.Nrt(t),Promise.resolve()}wrt(t){for(const e of t)this.Nrt(e);return Promise.resolve()}yrt(){return En(this.mA),Promise.resolve()}Mrt(t){return this.Lrt(t,"key")}Lrt(t,e){for(const i of this.mA)if(i[e]===t)return i}Nrt(t){const e=this.Mrt(t);e&&we(this.mA,e)}constructor(){this.mA=[]}},cV=class t{static fit(){return Promise.resolve(new t)}Trt(t){return t(this)}constructor(){this.xrt=new uV,this.Ert=new uV,this.Rrt=new uV,this.Irt=new uV,this.Crt=new uV}};r(),r();var lV=class{async drt(t){for(let e of this.Brt)if(await e.drt(t))return!0;return!1}async frt(t,e){void 0===e&&(e="persistent");for(let i of this.Brt)if(await i.drt(e))return i.frt(t);throw aV(e)}async _rt(t,e){void 0===e&&(e="persistent");for(let i of this.Brt)if(await i.drt(e))return i._rt(t);throw aV(e)}async Db(t){for(let e of this.Brt)if(await e.Db(t))return!0;return!1}async Nb(t){for(let e of this.Brt){const i=await e.Nb(t);if(i)return i}}async vrt(t,e){for(let i of this.Brt){const s=await i.vrt(t,e);if(s)return s}}async rrt(t){const e=[];for(let i of this.Brt)e.push(...await i.rrt(t));return e}async mrt(){const t=[];for(let e of this.Brt)t.push(...await e.mrt());return t}async grt(t){const e=[];for(let i of this.Brt)e.push(...await i.grt(t));return e}async prt(t,e){const i=[];for(let s of this.Brt)i.push(...await s.prt(t,e));return i}async $S(t){for(let e of this.Brt)await e.$S(t)}async wrt(t){for(let e of this.Brt)await e.wrt(t)}async yrt(){for(let t of this.Brt)await t.yrt()}constructor(t){this.Brt=t}};function dV(t){return async()=>{const e=await Promise.all(t.map((t=>t())));return fV.fit(e)}}var fV=class t{static fit(e){return Promise.resolve(new t(e))}get Irt(){return this.Ort}get Crt(){return this.Frt}get Rrt(){return this.Vrt}get xrt(){return this.Wrt}get Ert(){return this.Urt}Trt(e){if(0===this.Grt.length)return e(this);const i=[];let s=0;const n=r=>(i.push(r),s++,s<this.Grt.length?this.Grt[s].Trt(n):e(new t(i)));return this.Grt[s].Trt(n)}constructor(t){this.Grt=t,this.Ort=new lV(t.map((t=>t.Irt))),this.Frt=new lV(t.map((t=>t.Crt))),this.Vrt=new lV(t.map((t=>t.Rrt))),this.Wrt=new lV(t.map((t=>t.xrt))),this.Urt=new lV(t.map((t=>t.Ert)))}},hu=class t{static Aa(e){t.TG.Aa(e)}static get Fg(){return t.Hrt||(t.Hrt=t.TG.fit()),t.Hrt}};function We(t){return void 0!==t.cI}function _V(t){const e=Z.Nm||Z.Im,i=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),s=e&&!i,n=new Lf(!0);return async t=>{const e=t.Dk;if(!n.wp(e)&&!function(t,e){return!!t&&(Gh(t)?gx(e)||wx(e):Oh(t,uu.APPLICATION_TTML_XML)||Oh(t,uu.TEXT_VTT)||Oh(t,uu.IMAGE_JPEG))}(t.Yq,t.Zrt))return!1;const i=t.Zrt.some((t=>"ac-3"===t||"ec-3"===t));if(s&&i)return!1;if(t.AG){const i=t.AG,s=Qe(i,(t=>Am(t.i9))).filter(ji),n=await async function(t,e){for(const i of t)if(await e(i))return!0;return!1}(s,(t=>Ms.Yp(t,e)));if(!n)return!1}return!0}}hu.TG=new class{fit(){return new hV(this.Xrt())}async Xrt(){this.zrt&&(await Promise.resolve(),this.zrt=!1);for(const t of this.qrt)try{return await dV([cV.fit,t])()}catch(t){}return await dV([cV.fit,this.Yrt])()}Aa(t){if(!this.zrt)throw new g("Registration overdue");this.qrt.push(t)}constructor(t){this.qrt=[],this.zrt=!0,this.Yrt=t}}(class t{static fit(){return Promise.resolve(new t)}Trt(t){return Promise.reject(rV)}constructor(){this.xrt=new Re,this.Ert=new Re,this.Rrt=new Re,this.Irt=new Re,this.Crt=new Re}}.fit),hu.Hrt=void 0,r(),r(),r(),r();var vV=class{get Ti(){return this.Krt.offsetHeight*Ms.Ys.Yg}get ji(){return this.Krt.offsetWidth*Ms.Ys.Yg}constructor(t){this.Krt=t}};r();var mV=class{get nt(){return this.Ll}LI(t,e,i,s,n,r,o,h){const a=new mo(t,e,i,s,n,r,o,void 0,h);return this.Ll.tt(a),this.f8.tt(a),a}_W(t){this.Ll.it(t),this.f8.it(t),t.gn()}dH(t){const e=new $L(t.Lt,t.xh,t.gs);return this.Ll.tt(e),this.f8.tt(e),e}er(){for(const t of this.Ll.uC.slice())t.gn();this.Ll.er(),this.f8.er()}gn(){this.er(),this.Ll.gn(),this.f8.gn()}constructor(t,e){this.Ll=new ua,this.f8=new DL(t,e)}};r(),r();var gV=class{LH(t){return this.TG.LH(t)}qnt(t){return this.TG.qnt(t)}pH(t){return this.TG.pH(t)}constructor(t){this.TG=t}};r(),r(),r();var pV=class extends Co{get jrt(){return this.FB}get gR(){return this.pR()}pR(){return this.FB.gR}get wR(){return this.yR()}yR(){return this.FB.wR}get SR(){return this.kR()}kR(){return this.FB.SR}get Lu(){return this.FB.Lu}get ct(){return this.Sd()}Sd(){return this.FB.ct}get QG(){return this.Qrt()}Qrt(){return this.FB.QG}get RR(){return this.Jrt()}Jrt(){return this.FB.RR}get lt(){return this.FB.lt}get Ti(){return this.FB.Ti}get ji(){return this.FB.ji}get Ca(){return this.bI()}bI(){return this.FB.Ca}get lH(){return this.Sa()}Sa(){return this.FB.lH}get GR(){return this.FB.GR}set GR(t){this.FB.GR=t}get qR(){return this.$rt()}$rt(){return this.FB.qR}get KR(){return this.FB.KR}set KR(t){this.FB.KR=t}get JR(){return this.$R()}$R(){return this.FB.JR}get sI(){return this.nI()}nI(){return this.FB.sI}get rI(){return this.oI()}oI(){return this.FB.rI}get hI(){return this.aI()}aI(){return this.FB.hI}get E4(){return this.tot()}tot(){return this.FB.E4}get O4(){return this.eot()}eot(){return this.FB.O4}get nt(){return this.uI()}uI(){return this.iot}get zl(){return this.G7()}G7(){return this.FB.zl}get M9(){return this.FB.M9}get vI(){return this.FB.vI}set vI(t){this.FB.vI=t}get d7(){return this.FB.d7}get OR(){return this.FB.OR}get XB(){return this.FB.XB}get gH(){return this.rot()}set gH(t){this.oot(t)}rot(){return this.FB.gH}oot(t){this.FB.gH=t}get m7(){return this.FB.m7}set m7(t){this.hot(t)}hot(t){this.FB.m7=t}get J6(){return this.aot()}aot(){return this.FB.J6}UR(){return this.FB.UR()}kI(){return this.FB.kI()}TI(){this.FB.TI()}Eb(t,e,i){this.FB.Eb(t,e,i)}ZG(t){this.FB.ZG(t)}ge(){this.FB.ge()}be(){this.FB.be()}LI(t,e,i,s,n,r,o,h){return this.FB.LI(t,e,i,s,n,r,o,h)}dH(t){return this.FB.dH(t)}hH(){return this.FB.hH()}uH(t,e,i,s,n){return this.FB.uH(t,e,i,s,n)}_W(t){this.FB._W(t)}fH(){this.FB.fH()}DJ(t){return this.FB.DJ(t)}async Dn(t){const e=await this.FB.Dn(t);let i;return i=t.Aw===Mr.mW?this.uot(e):this.cot(e),this.jG=i,i}async er(){this.jG&&(await this.jG.Hw(),this.jG=void 0),await this.FB.er()}u7(){this.FB.u7()}l7(){this.FB.l7()}async Hw(){this.$o(),this.FB.fn(ZD,this.lot),this.iot.fC=void 0,this.iot.gn(),this.jG&&(await this.jG.Hw(),this.jG=void 0)}_7(){this.FB._7()}dot(t){this.FB.fn(ZD,this.lot),this.FB=t,this.iot.fC=t.nt,this.FB.yn(ZD,this.lot)}NI(t){this.wo(t)}constructor(t){super(),this.jG=void 0,this.iot=new at,this.lot=t=>this.NI(t),this.FB=t,this.iot.fC=t.nt,this.FB.yn(ZD,this.lot)}},wV=class extends pV{get YG(){return this.FB.YG}get N4(){return this.FB.N4}get yI(){return this.FB.yI}set yI(t){this.FB.yI=t}v7(t){this.FB.v7(t)}CI(){this.FB.CI()}constructor(t){super(t)}};r(),r(),r();var yV=class{get bd(){return this._T()}_T(){return this.jG.bd}get rI(){return this.oI()}oI(){return this.jG.rI}cJ(t){return this.jG.cJ(t)}dJ(t){return this.jG.dJ(t)}Hw(){return Promise.resolve()}constructor(t){this.jG=t}},bV=class extends yV{get J3(){return this.e4}get t4(){return this.i4}get gR(){return this.pR()}pR(){return this.jG.gR}get ct(){return this.Sd()}Sd(){return this.jG.ct}get EJ(){return this.fot()}fot(){return this.jG.EJ}n4(t){this.jG.n4(t)}a4(t,e,i,s){this.jG.a4(t,e,i,s)}r3(){this.jG.r3()}K2(){this.jG.K2()}Hw(){return this.e4&&(this.e4.Hw(),this.e4=void 0),this.i4&&(this.i4.Hw(),this.i4=void 0),super.Hw()}_ot(t){this.jG=t,this.e4?t.J3?this.e4.vot(t.J3):(this.e4.Hw(),this.e4=void 0):t.J3&&(this.e4=this.mot(t.J3),this.e4.yn(Vo,this.got)),this.i4?t.t4?this.i4.vot(t.t4):(this.i4.Hw(),this.i4=void 0):t.t4&&(this.i4=this.mot(t.t4),this.i4.yn(Vo,this.got))}_J(t){this.jG._J(t)}pot(t){}constructor(t){super(t),this.e4=void 0,this.i4=void 0,this.got=t=>this.pot(t)}};r(),r(),r();var AV=class extends Co{get Sj(){return this.Dj}set Sj(t){this.Dj=t}get gR(){return se.mB()}get bd(){return this.DT}get h3(){return ee.tE}get u3(){return se.mB()}get wot(){return!1}get wj(){return this.Ij}set wj(t){this.Ij=t}_2(t,e,i){return Promise.reject(new g("Invalid media buffer"))}v3(){return Promise.reject(new g("Invalid media buffer"))}w2(t,e,i){return Promise.reject(new g("Invalid media buffer"))}EJ(){return!1}r3(){}f3(t,e){}_3(t,e){}$S(t,e,i){return Promise.resolve()}B2(t,e){return Promise.reject(new g("Invalid media buffer"))}CO(t,e){return Promise.reject(new g("Invalid media buffer"))}cJ(t){return!1}dJ(t){return Promise.reject(new g("Invalid media buffer"))}Hw(){this.$o()}constructor(t){super(),this.Ij=0,this.Dj=0,this.DT=t}},SV=class extends Co{get Sj(){return this.yot()}set Sj(t){this.bot(t)}yot(){return this.Aot.Sj}bot(t){this.Aot.Sj=t}get gR(){return this.pR()}pR(){return this.Aot.gR}get bd(){return this._T()}_T(){return this.Aot.bd}get h3(){return this.Aot.h3}get u3(){return this.Sot()}Sot(){return this.Aot.u3}get wj(){return this.Tot()}set wj(t){this.kot(t)}Tot(){return this.Aot.wj}kot(t){this.Aot.wj=t}_2(t,e,i){return this.Aot._2(t,e,i)}v3(){return this.Aot.v3()}w2(t,e,i){return this.Aot.w2(t,e,i)}EJ(){return this.Aot.EJ()}r3(){this.Aot.r3()}f3(t,e){this.Aot.f3(t,e)}_3(t,e){this.Aot._3(t,e)}$S(t,e,i){return this.Aot.$S(t,e,i)}B2(t,e){return this.Aot.B2(t,e)}cJ(t){return this.Aot.cJ(t)}dJ(t){return this.Aot.dJ(t)}NI(t){this.wo(t)}Hw(){this.$o(),this.vot(new AV(this.bd))}vot(t){this.Aot.fn(Vo,this.Eot),this.Aot=t,this.Aot.yn(Vo,this.Eot)}constructor(t){super(),this.Eot=t=>this.NI(t),this.Aot=t,this.Aot.yn(Vo,this.Eot)}},TV=class extends SV{get Znt(){return this.FB}set Znt(t){this.FB=t}async _2(t,e,i){return J(i),await this.xot(this.FB.SR,null==e?void 0:e.cit,null==e?void 0:e.ct),J(i),t.Aw===Ce.bk?await this.Rot(t,e,i):await this.Iot(t,e,i)}async Rot(t,e,i){let s=t;for(;;){const[t,n]=Rb(s.qk);s={Aw:Ce.bk,qk:t};try{return await this.Cot(s,e,i),void n.cancel(new Bu).catch(It)}catch(t){if(cD(t)){if(await this.xot(this.FB.SR,e.cit,e.ct,i)){s={Aw:Ce.bk,qk:n};continue}}throw n.cancel(t).catch(It),t}}}async Iot(t,e,i){for(;;)try{return J(i),await this.Cot(t,e,i)}catch(t){if(cD(t)){if(await this.xot(this.FB.SR,e.cit,e.ct,i))continue}throw t}}async xot(t,e,i,s){const n=uD(t,e,i,this.gR,this.wj,this.Sj);for(const[t,e]of n)await this.Pot(t,e,s);return n.length>0}Cot(t,e,i){return super._2(t,e,i)}Pot(t,e,i){return super.$S(t,e,i)}constructor(t){super(t),this.FB=void 0}},kV=class extends bV{get Znt(){return this.FB}set Znt(t){this.FB=t,this.e4&&(this.e4.Znt=t),this.i4&&(this.i4.Znt=t)}mot(t){const e=new TV(t);return e.Znt=this.FB,e}constructor(t){super(t),this.FB=void 0,this._ot(t)}};r();var Yn=class extends yV{get tI(){return this.jG.tI}set tI(t){this.jG.tI=t}};r();var Ja=class extends pV{get YG(){return this.FB.YG}get N4(){return this.FB.N4}get fI(){return this.FB.fI}get cI(){return this.FB.cI}get yI(){return this.FB.yI}set yI(t){this.FB.yI=t}v7(t){this.FB.v7(t)}CI(){this.FB.CI()}AI(){return this.FB.AI()}constructor(t){super(t)}},EV=class extends wV{get jrt(){return this.FB}cot(t){const e=new kV(t);return e.Znt=this,e}uot(t){return new Yn(t)}},xV=class extends Ja{get jrt(){return this.FB}cot(t){const e=new kV(t);return e.Znt=this,e}uot(t){return new Yn(t)}},ut=class extends gV{LH(t){return t===ee._E?new xV(super.LH(t)):t===ee.fE?new EV(super.LH(t)):void 0}async pH(t){const e=t;await e.Hw(),await super.pH(e.jrt)}};r();var RV=class{Dot(){this.ea.DI()}gn(){s.removeEventListener("pageshow",this.Not)}constructor(t){this.Not=t=>{t.persisted&&this.Dot()},this.ea=t,s.addEventListener("pageshow",this.Not)}};r(),r(),r(),r(),r();var IV=class{Mot(t,e,i){return Promise.resolve()}Lot(t,e,i,s){let n=[];if(s){const r={DV:e.FO,NV:e.VO,MV:i.Bot.MV};s.Aw===Lr.TTML?n=JE(t,s,r,i.Yq):s.Aw===Lr.WEBVTT&&(n=_E(t,r,this.Oot).L)}return n}er(){}constructor(t){this.Oot=t}};r(),r(),r();var sl=function(t){return t.tD="vttc",t.Fot="vsid",t.Vot="iden",t.Wot="ctim",t.Uot="sttg",t.Got="payl",t.Hot="vtte",t.Zot="vtta",t}({}),Ge=class t{static Xot(e){return Boolean(t.zot[e])}static jD(e){const i=[],s=Mi.LD(new GS(e,new Ri));for(const e of s)t.Xot(e.Aw)&&i.push(t.zot[e.Aw](e.qk));return i}static qot(e){const i=Mi.LD(e),s=ki(i,sl.Fot),n=ki(i,sl.Vot),r=ki(i,sl.Wot),o=ki(i,sl.Uot),h=ki(i,sl.Got);return{Aw:sl.tD,Yot:s?t.Kot(s):void 0,jot:n?t.Qot(n):void 0,Jot:r?t.$ot(r):void 0,tht:o?t.eht(o):void 0,iht:h?t.sht(h):void 0}}static Kot(t){return{Aw:sl.Fot,nht:t.kD()}}static Qot(t){return{Aw:sl.Vot,jot:t.PD()}}static $ot(t){return{Aw:sl.Wot,rht:t.PD()}}static eht(t){return{Aw:sl.Uot,oht:t.PD()}}static sht(t){return{Aw:sl.Got,hht:t.PD()}}static aht(t){return{Aw:sl.Hot}}static uht(t){return{Aw:sl.Zot,cht:t.PD()}}};Ge.zot={[sl.tD]:Ge.qot,[sl.Hot]:Ge.aht,[sl.Zot]:Ge.uht};var CV=class{Mot(t,e,i){const s=new DataView(t.dht),n=rr.jD(s),r=Fo(n,(t=>t.Aw===Tt.vP));return r&&(this.fht=r.Z[0].yN.HD._N),Promise.resolve()}Lot(t,e,i){if(S(this.fht))return[];const s=ra(t),n=rr.jD(s),r=dn(n,Tt.nD),o=dn(n,Tt.lD);if(!r||0===r.Z.length||!o)return[];const h=function(t,e,i){const s=t.Z[0],n=s.oL?s.oL.oL.toNumber()/i:e.FO,r=[];for(const t of s.rL)r.push(...t.dL);return{_ht:n,dL:r}}(r,e,this.fht),a=i.Bot.MV;return function(t,e,i,s){const n=Ge.jD(ra(e.qk)),r=t.dL,o=t._ht+s,h=[];let a=0;for(let t=0;t<r.length;t++){const e=r[t],s=n[t];var u;const c=(null!=(u=e.ct)?u:0)/i;let l;s.Aw===sl.tD&&(l=PV(s,a,c,o)),l&&h.push(l),a+=c}return h}(h,o,this.fht,a)}er(){this.fht=NaN}constructor(){this.fht=NaN}};function PV(t,e,i,s){if(!t.iht)return void 0;const n=t.Jot?function(t){return kE(t.rht,new Ri(0))}(t.Jot):e,r=s+n,o=r+i,h=t.iht.hht;return new Oi(r,o,h,!1)}r(),r();var tc=function(t){return t[t.NZ=0]="NZ",t[t.vht=1]="vht",t[t.mht=10]="mht",t[t.ght=11]="ght",t[t.pht=12]="pht",t[t.wht=13]="wht",t[t.yht=14]="yht",t[t.bht=15]="bht",t[t.Aht=20]="Aht",t[t.Sht=21]="Sht",t[t.Tht=22]="Tht",t[t.kht=23]="kht",t[t.Eht=24]="Eht",t[t.xht=30]="xht",t[t.Rht=31]="Rht",t[t.Iht=32]="Iht",t[t.Cht=33]="Cht",t[t.Pht=34]="Pht",t[t.Dht=35]="Dht",t[t.Nht=40]="Nht",t[t.Mht=41]="Mht",t[t.Lht=42]="Lht",t[t.Bht=43]="Bht",t[t.Oht=44]="Oht",t[t.Fht=50]="Fht",t[t.Vht=51]="Vht",t[t.Wht=52]="Wht",t[t.Uht=60]="Uht",t[t.Ght=61]="Ght",t[t.Hht=62]="Hht",t[t.Zht=63]="Zht",t[t.Xht=70]="Xht",t[t.zht=71]="zht",t[t.qht=72]="qht",t[t.Yht=73]="Yht",t[t.Kht=74]="Kht",t[t.jht=75]="jht",t[t.Qht=76]="Qht",t[t.Jht=77]="Jht",t[t.$ht=90]="$ht",t[t.eat=91]="eat",t}({});function DV(t,e){const i=e.hB(((e,i)=>t.nB(e,i,!1,!1)));return t.JL(i)}function NV(t,e){const i=e.Sn(t.YL()).hB(((e,i)=>t.kr(i)));return t.JL(i)}r(),r(),r(),r();var ko=function(t){return t.iat="sat",t.nat="rat",t}({});r();var Ou=class extends z{constructor(t,e,i){super("oat"),this.Cn=t,this.jn=e,this.aat=i}},MV=class extends pe{constructor(){super("uat")}},LV=[Ti.Jy,Ti.eb,Ti.Qy,Ti.wy],BV=class extends Co{get dat(){var t,e;return(null==(t=this._at.fat)?void 0:t.aat)||(null==(e=this._at.vat)?void 0:e.aat)}get mat(){return this.gat}set pat(t){this._at.pat=t}get pat(){return this._at.pat}get zk(){return this.wat}yat(t){this.wat!==t&&(this.wat=t,this.wo(new MV))}get bat(){return this.gat.Ht.bat}get lt(){return this.zG}async Cn(t){if(!this.Aat&&!this.Sat)return;const e=this.vy("uat");this.Aat?(this.Tat.Yw(),this.Tat=new da,So(this.Eat(this.Tat.Vw),this.Tat)):(this.xat.Ob(void 0),this.xat=new os),await e}get Aat(){return"Rat"===this.wat}get Sat(){return"Iat"===this.wat}get Cat(){return"Pat"===this.wat}get Dat(){return"Nat"===this.wat}async EI(t){if(this.Cat||this.Sat)for(0,this.Tat.Yw();!this.Aat&&!this.Dat;)await this.vy("uat")}async er(t){this.Dat?(this.zG=void 0,this.yat("Rat")):await this.EI(t),this._at.er(),this.gat.er()}MH(t){this.zG=t,this.yat("Nat"),this.wo(new Ga(t))}Mat(){this.v9.yn(Ti.sb,this.vd),this.v9.yn([Ti.jy,Ti.Ly],this.We),this._at.yn(LV,this.Ds),this.Lat.yn(ko.iat,this.vd)}Bat(){this.v9.fn(Ti.sb,this.vd),this.v9.fn([Ti.jy,Ti.Ly],this.We),this._at.fn(LV,this.Ds),this.Lat.fn(ko.iat,this.vd)}async Oat(t){this.Bat(),this.Fat.Yw(),await this.EI(null!=t?t:tc.Bht),this._at.er()}async Vat(t){this.Mat(),await this.Cn(null!=t?t:tc.bht)}Wat(t,e,i){if(this.Aat)for(const s of t.gat.Uat())s.Gat<=i&&e<=s.Hat&&this.Lat.Zat.some((t=>t.o===s.Xat))&&this.gat.zat(s)}async gn(){this.$o(),this.Bat(),this.Fat.Yw(),await this.EI(tc.Oht),this._at.gn()}async Eat(t){for(;;)try{J(t),this.yat("Pat"),await this._at.qat(t),J(t),this.yat("Iat"),await ou(this.xat.Vb,t)}catch(t){if(Je(t))this.yat("Rat");else{const e=t instanceof A?t:new A(Qa.MEDIA_LOAD_ERROR,t.message,t);this.MH(e)}break}}async Yat(t){J(t),await this.EI(tc.Lht),this._at.er(),J(t),await this.Cn(tc.wht)}constructor(t,e,i,s,n){super(),this.Kat=t,this.Lat=e,this.gat=i,this._at=s,this.v9=n,this.wat="Rat",this.zG=void 0,this.xat=new os,this.Fat=new da,this.Tat=new da,this.We=t=>{if(this.Aat||this.Dat)return;if(!Ms.rR&&this._at.jat(t.currentTime))return;this.Fat.Yw(),this.Fat=new da;So(this.Yat(this.Fat.Vw),this.Fat).catch(Eu)},this.vd=Qr((()=>{if(this.Sat){try{this._at.Qat();if(this._at.Jat())return}catch(t){if(!(t instanceof Ou))throw t}this.Cn(tc.yht)}}),250),this.Mat()}};r(),r();var OV=class t{$at(t,e){return this.tut(t,!1,e)}eut(t,e){return this.tut(t,!0,e)}async tut(e,i,s){J(s.Vw);const n=await this.iut(e,i,s);return n.Ok?t.sut(n):this.nut(n)}nut(t){return t}static sut(t){return t}iut(t,e,i){var s;const n=new ke({Gu:t.Gu,Yk:Rr.wk,jk:t.rut?{Range:"bytes="+t.rut[0]+"-"+(null!=(s=t.rut[1])?s:"")}:void 0,kE:t.kE,yE:xe.GET,Aw:Wr.iE,SE:e?$h.rE:$h.tE,TE:this.out,bE:i.hut,AE:i.AE,Vw:i.Vw,RE:i.RE});return this.lW.Kk(n)}constructor(t,e){this.lW=t,this.out=e}};r(),r();var FV=class{aut(t,e){const i=this.uut**t,s=e*(1-i)+i*this.sit;S(s)||(this.sit=s,this.cut+=t)}lut(){const t=1-this.uut**this.cut;return this.sit/t}constructor(t){this.sit=0,this.cut=0,this.uut=_.exp(_.log(.5)/t)}},VV=class{aut(t,e){const i=8e3*e/t,s=t/1e3;this.fut+=e,this._ut.aut(s,i),this.vut.aut(s,i)}lut(){return this.mut()?_.min(this._ut.lut(),this.vut.lut()):this.gut}mut(){return this.fut>=this.wut}constructor(t=2,e=5,i=128e3){this.fut=0,this.gut=dI,this._ut=new FV(t),this.vut=new FV(e),this.wut=i}},WV=class{get yut(){return this.but.lut()}get mut(){return this.but.mut()}Aut(t){const e=t.Sut,i=this.Tut?t.kut-t.Eut:t.kut-t.xut,s=t.Rut;!s&&e<this.Iut||(s?this.but.aut(2*i,e):this.but.aut(i,e))}constructor(t,e){this.Tut=e,e&&mT(t)?t===ee._E?(this.Iut=5e3,this.but=new VV(.05,1,0)):(this.Iut=0,this.but=new VV(.005,.1,0)):(this.Iut=16e3,this.but=new VV)}};r(),r(),r();var UV=class{transform(t,e){this.Qd.write(t).catch(It),e.enqueue(t)}flush(){this.Qd.close().catch(It)}constructor(t){this.Qd=t}},Oe=class{Cut(){return new GV(Eb(this.dht),this.Put,this.Dut)}constructor(t,e,i){this.dht=t,this.Put=e,this.Dut=i}},GV=class t{get Pk(){return this.Nut}Ck(t){return He(this.Nut,t)}xb(){const[e,i]=Rb(this.Nut);return this.Nut=e,new t(i,this.Put,this.Dut)}Mut(){const[e,i]=function(t){const e=new qo,i=e.writable.getWriter(),s=new qo(new UV(i));return t.pipeTo(s.writable).catch((t=>{i.abort(t).catch(It)})),[s.readable,e.readable]}(this.Nut);return this.Nut=e,new t(i,this.Put,this.Dut)}Lut(t){return this.Ck(t).then((t=>new Oe(t,this.Put,this.Dut)))}constructor(t,e,i){this.Nut=t,this.Put=e,this.Dut=i}};r();var HV=class extends z{constructor(t,e,i){super(e,i),this.But=t}},ZV="Cache lookup failed.",XV=class extends Co{async Out(t,e){J(e);const i=await this.Fut.urt(t.Gu.Gu,t.Gu.rut);if(J(e),!i)throw new HV(t,ZV);const s=new Oe(i.buffer,i.byteLength,i.reference);return{But:t.But,Vut:{Aw:Ce.tJ,qk:s},aat:t.aat,Gu:t.Gu}}async Wut(t,e){J(e);const i=await this.Fut.urt(t.Gu,t.rut);if(J(e),!i)throw new HV(t,ZV);const s=new Oe(i.buffer,i.byteLength,i.reference);return{Aw:Ce.tJ,qk:s}}gn(){this.$o()}constructor(t){super(),this.Fut=t}};r();var zV=["$y","ib"],qV=class extends Co{async Out(t,e){let i;for(const s of this.Uut)try{return await s.Out(t,e)}catch(t){th(t),i=t}throw i}async Wut(t,e){let i;for(const s of this.Uut)try{return await s.Wut(t,e)}catch(t){th(t),i=t}throw i}gn(){for(const t of this.Uut)t.fn(zV,this.Ds),t.gn()}constructor(t){super(),this.Uut=t;for(const t of this.Uut)t.yn(zV,this.Ds)}};function Wn(t){return Sd(t.Gut)}function YV(t){return Wn(t)?t.Gut:t.Hut}r(),r(),r(),r();var KV=class extends pe{constructor(t,e,i,s,n,r){super(t),this.Zut=e,this.yz=i,this.eL=s,this.TN=n,this.TE=r}},jV=class extends KV{constructor(t,e,i,s,n){super(Ti.Jy,t,e,i,s,n)}};r(),r();var QV=class{constructor(t,e){this.Xut=t,this.zut=e}},JV=class extends QV{get Sut(){return this.qut}start(){}transform(t,e){this.qut+=t.byteLength,e.enqueue(t)}flush(){this.Yut(!1)}Yw(){this.Yut(!0)}Yut(t){this.Xut(this.zut,Ms.Vg(),this.Sut,t)}constructor(...t){super(...t),this.qut=0}},$V=class extends QV{get Sut(){return this.qut}start(){this.zut=Ms.Vg()}transform(t,e){this.qut+=t.byteLength,this.Kut||this.jut(t)&&this.Yut(!1),e.enqueue(t)}flush(){}Yw(){this.Yut(!0)}jut(t){const e=this.Qut(t),i=this.Jut(e);return Boolean(Fo(i,tW))}Qut(t){return this.$ut&&void 0!==this.tct?(this.$ut=Tu([this.$ut,t]),new GS(ra(this.$ut),new Ri(this.tct))):(this.$ut=t,new GS(ra(t),new Ri))}Jut(t){const e=Mi.BD(t.qk,t.yD,!0);return e.OD?(this.$ut=void 0,this.tct=void 0):this.tct=t.yD.ec,e.m}Yut(t){this.Kut||(this.Xut(this.zut,Ms.Vg(),this.Sut,t),this.Kut=!0)}constructor(...t){super(...t),this.qut=0,this.Kut=!1}};function tW(t){return t.Aw===Tt.lD}var eW=class{ect(t){const e=t.Jk?this.ict:Ms.Vg(),i=this.sct(e),s=new qo(i),n=t.Pk().pipeTo(s.writable).then((()=>({WR:{Sut:i.Sut}})),(t=>{throw i.Yw(),t}));return this.nct.Kw(n),s.readable}rct(t){const e=t.Jk?this.ict:Ms.Vg(),i=t.Ck(),s=i.then((t=>{const i=Ms.Vg();return this.Aut(e,i,t.byteLength,!1),{WR:{Sut:t.byteLength}}}),(t=>{const i=Ms.Vg();throw this.Aut(e,i,0,!0),t}));return this.nct.Kw(s),i}get hct(){return this.nct.Vb}constructor(t){this.act=t,this.nct=new os,this.Aut=(t,e,i,s)=>{const n={xut:this.ict,Eut:t,kut:e,Sut:i,Rut:s};this.act.Aut(n),this.act.mut&&wl.Fg.rG(this.act.yut)},this.nct.Vb.catch(It),this.ict=Ms.Vg()}},iW=class extends eW{sct(t){return new JV(this.Aut,t)}},sW=class extends eW{sct(t){return new $V(this.Aut,t)}};r();var nW=class extends KV{constructor(t,e,i,s,n,r,o){super(Ti.eb,t,e,i,s,n),this.uct=r,this.mO=o}};r();var an=class extends z{constructor(t,e,i){super("Error downloading segment "+YV(e),t),this.cct=e.FO,this.lct=e.VO,this.dct=i}},rW=class extends Co{fct(){return this.Tut?new sW(this.act):new iW(this.act)}async Out(t,e){J(e);const i=t.aat,s=t.Gu,n=t.But,r=YV(n),o=i.aat?i.aat.xC:-1,h=function(t){const e=t.aat;let i;i=e===function(t){return t.Zat.reduce(((t,e)=>t.wG<e.wG?t:e))}(e._ct)?Ia(5*t.But.ct):Ia(1.2*t.But.ct);return Vs(i,1e3,18e3)}(t);this.wo(new jV(s,i.wG,r,o,i.Aw));try{const t=this.fct(),a=await this.vct.$at(s,{RE:this.Tut,hut:h,Vw:e}),u=await this.mct(a,a.Ok,e,t);return ah(this.gct(t.hct,i,s,r,o,a)),{Vut:u,aat:i,But:n,Gu:s}}catch(t){throw th(t),new an(t,n,i)}}async Wut(t,e){J(e);const i=await this.vct.eut(t,{RE:false,hut:1e4,Vw:e});return await this.mct(i,false,e)}async mct(t,e,i,s){if(e){const e=s?s.ect(t):t.Pk();return{Aw:Ce.bk,qk:new GV(e)}}{const e=s?await s.rct(t):await t.Ck(i);return{Aw:Ce.tJ,qk:new Oe(e)}}}async gct(t,e,i,s,n,r){try{const o=await t;this.wo(new nW(i,e.wG,s,n,e.Aw,r.zk,o.WR.Sut))}catch(t){}}gn(){this.$o()}constructor(t,e,i){super(),this.vct=t,this.act=e,this.Tut=i}};r();var oW=.001,hW=class{get gR(){return this.pct.gR}get wct(){return this.pct.wct}get BJ(){return this.pct.BJ}get yct(){if(this.I3.sI<Ht.Gn)return!1;if(this.pct.jn<=this.bct&&this.pct.Act())return!0;const t=this.pct.HG;if(!t||0===t.V)return!1;const e=se.vB(this.v9.SR,1/0);return t.Sn(e).tB(this.pct.BJ).fB>=this.vZ.Cj}get bct(){const t=this.pct.HG;let e;if(t&&t.V>0)e=t.jn(0);else{e=this.v9.SR;const t=this.pct.BJ,i=t.eB(e);i>=0&&(e=t.jn(i))}const i=this.pct.rI.Cn(0);if(i>e){if(this.pct.Cn<=e&&this.pct.jn>=e&&i>e+oW)throw new Ou(e,i);e=i}return e=this.pct.Sct.qL(e),e}constructor(t,e,i,s){this.pct=t,this.v9=e,this.I3=i,this.vZ=s}};r();var aW=class{get Tct(){if(0===this.C_.size)return this.kct;let t=se.vB(0,1/0);return t=t.Sn(this.kct),this.C_.forEach((e=>{t=t.Sn(e)})),t}Ect(t){return this.C_.get(t.o)}xct(){let t=this.kct;return this.C_.forEach((e=>{t=t.JL(e)})),t}Rct(t){if(this.kct.kr(t))return!0;let e=!1;return this.C_.forEach((i=>{e=e||i.kr(t)})),e}Ict(t,e){const i=this.C_.get(e.o);return!!i&&i.kr(t)}iB(t,e){if(this.kct.iB(t,e))return!0;let i=!1;return this.C_.forEach((s=>{i=i||s.iB(t,e)})),i}Cct(t,e){const i=this.C_.get(e),s=i?i.JL(t):t;this.C_.set(e,s),this.kct=this.kct.JL(t)}Pct(t){this.C_.forEach(((e,i)=>{this.C_.set(i,e.JL(t))})),this.kct=this.kct.JL(t)}Dct(t){this.C_.forEach(((e,i)=>{this.C_.set(i,e.Sn(t))})),this.kct=this.kct.Sn(t)}er(){this.C_.forEach(((t,e)=>{this.C_.set(e,se.mB())})),this.kct=se.mB()}constructor(){this.C_=xu(),this.kct=se.mB()}},uW=class{get Nct(){return this.Mct}get BJ(){return this.OJ}Lct(t){for(const e of this.Ert){if(e.Gat>t)break;if(e.Hat>t)return e}}Bct(t){for(const e of this.Ert){if(e.Oct>t)break;if(e.Fct>=t)return e}}Vct(t,e){const i=[];for(const s of this.Ert){if(s.Gat>t)break;s.Hat>=e&&i.push(s)}return i}Uat(){return this.Ert}zat(t){const e=se.vB(t.Oct,t.Fct),i=e.YL();this.Mct.Dct(i),this.Mct.Cct(e,t.Xat),this.Wct(i);const s=Hr(this.Ert,(e=>t.Gat<=e.Gat));if(s<0)this.Ert.push(t);else{this.Ert[s].Hat<=t.Hat?this.Ert.splice(s,1,t):this.Ert.splice(s,0,t)}}FJ(t,e){this.OJ.Cct(t,e)}Uct(t){this.OJ.Pct(t)}Dct(t){this.Mct.Dct(t),this.OJ.Dct(t);const e=this.Mct.xct();this.Wct(e)}Wct(t){this.Ert=this.Ert.filter((e=>t.nB(e.Oct,e.Fct))).map((e=>e.Gct&&!t.iB(e.Oct,e.Fct)?function(t,e){return{Xat:t.Xat,Gat:t.Gat,Hat:t.Hat,Oct:t.Oct,Fct:t.Fct,Gct:e}}(e,!1):e))}er(){this.Mct.er(),this.OJ.er(),this.Ert=[]}gn(){this.er()}constructor(t){this.Ert=[],this.Ht=t,this.Mct=new aW,this.OJ=new aW}};r(),r();var cW=class{get pat(){return this.Hct}set pat(t){this.Hct=t}get bat(){return this.gat.Ht.bat}async Zct(t,e,i){let s;J(i);const n=this.gat.Bct(t);s=n&&xs(n.Fct,t,1e-5)?n.Hat:t;const r=this.Xct(s),o=function(t){return lW.bind(void 0,t)}(s);let h=await this.xp.zct(o,r,e,i);for(J(i);h&&this.qct(h.But);){const t=vW(h.But),s=h.aat;h=await this.xp.zct(t,[s],e,i),J(i)}if(!h)return void 0;if(!this.Yct(h.But))return h;const a=this.Kct(h.But);if(t<a.Cn)return await this.findFirstNonAppendedSegmentBeforeSegment(h,e,i,a);if(t>=a.jn)return await this.findFirstNonAppendedSegmentAfterSegment(h,e,i);if(!h.aat.jct(h.But))throw new g("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,e,i){let s=t;do{const n=vW(s.But),r=t.aat;s=await this.xp.zct(n,[r],e,i),J(i)}while(s&&this.Yct(s.But));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,e,i,s){let n=t;do{const s=_W(n.But),r=t.aat;n=await this.xp.zct(s,[r],e,i),J(i)}while(n&&this.Yct(n.But));if(!n){0;const e=t.aat.Qct.Cn;throw new Ou(e,s.Cn,t.aat)}return n}Jct(t){return this.gat.Nct.Rct(t)}$ct(t){return this.gat.Vct(t.FO,t.VO)}Yct(t){const e=this.$ct(t);return e.length>0&&function(t,e){return function(t){let e=se.mB();for(const i of t)e=e.JL(se.vB(i.Gat,i.Hat));return e}(t).iB(e.FO,e.VO)}(e,t)&&e.every(mW)}qct(t){return this.gat.BJ.iB(t.FO,t.VO)}Kct(t){const e=this.$ct(t);return{Cn:e[0].Oct,jn:e[e.length-1].Fct}}Xct(t){const e=this.tlt(t);if(0===e.length){const t=this.Hct?this.Hct:this.gat.Ht.Zat;return[t[t.length-1]]}const i=e.filter((t=>{var e;return(null==(e=t.aat)?void 0:e.znt)&&!t.elt}));return i.length>0?i:[e[e.length-1]]}tlt(t){return(this.Hct?this.Hct:this.gat.Ht.Zat).filter((e=>!this.gat.BJ.Ict(t,e)))}constructor(t,e,i){this.Kat=t,this.gat=e,this.xp=i}};async function lW(t,e,i,s){const n=e.Bot.ilt(t);if(n){if(e.slt(n)){return(await e.rlt(n,i,s)).nlt(t)}return n}}async function dW(t,e,i,s){if(Wn(t)){if(0===t.Gut)return;const n=e.Bot.olt(t);if(!n)return;return(await e.rlt(n,i,s)).hlt(t.Gut-1)}return e.Bot.ult(t)}async function fW(t,e,i,s){if(Wn(t)){const n=e.Bot.olt(t);if(!n)return;const r=await e.rlt(n,i,s);if(t.Gut+1===r.V)return;return r.hlt(t.Gut+1)}return e.Bot.clt(t)}function _W(t){return dW.bind(void 0,t)}function vW(t){return fW.bind(void 0,t)}function mW(t){return t.Gct}r();var gW=class{async zct(t,e,i,s){J(s);const n=this.llt(e,i);if(!n)return;const r=await t(n,this.dlt,s);if(!r)return;const o=n.flt(r);return{aat:n,But:r,Gu:o}}llt(t,e){if(0===t.length)return;const i=this.vlt._lt(t,this.glt?e:void 0,this.pct,this.vZ.xj);return this.glt||(this.glt=!0),i}constructor(t,e,i,s){this.vlt=t,this.pct=e,this.vZ=i,this.dlt=s,this.glt=!1}};r();var pW=class{async zct(t,e,i,s){J(s);const n=this.vlt.plt(e,i,this.pct);if(!n.length)return;let r;for(const e of n)try{J(s);const i=await t(e,this.dlt,s);if(i){const t=e.flt(i);if(await this.Fut.hrt(t.Gu,t.rut))return{But:i,aat:e,Gu:t}}}catch(t){th(t),r=t}if(r)throw r}constructor(t,e,i,s){this.vlt=t,this.pct=e,this.Fut=i,this.dlt=s}};function wW(t){return void 0!==t.KR}function yW(t,e){const i=t.ji&&e.ji,s=t.Ti&&e.Ti;if(i||s){if(i&&s)return t.ji*t.Ti-e.ji*e.Ti;if(i)return t.ji-e.ji;if(s)return t.Ti-e.Ti;return(t.ji||1)*(t.Ti||1)-(e.ji||1)*(e.Ti||1)}return 0}function bW(t,e){return yW(t,e)||function(t,e){return t.wG-e.wG}(t,e)}r(),r();var Kh=class t{_lt(e,i,s,n){let r=t.sortByQuality(e);if(void 0!==this.wlt&&void 0===i&&e.length>1){const e=t.ylt(r,this.wlt);e&&(r=e)}const o=this.plt(r,i,s,n);return o.length?o[o.length-1]:r[0]}plt(e,i,s,n){var r;const o=t.sortByQuality(e),h={yut:void 0===n||this.blt.mut?this.blt.yut:n,KR:wW(s)&&s.KR?s.KR:1,Alt:s.ji,Slt:s.Ti,Tlt:null==(r=this.klt)?void 0:r.restrictToPlayerSize};let a=o;for(const t of this.v_)a=t(a,i,h,this.ew,this.Elt);return a}static xlt(e){return t.sortByQuality(e)[0]}static Rlt(e,i){var s;return i?t.xlt(null!=(s=t.ylt(e,i))?s:e):t.xlt(e)}static ylt(t,e){for(const i of e){const e=t.filter((t=>$n(t.vp,i)));if(e.length>0)return e}}static sortByQuality(t){const e=[...t];return e.sort(bW),e}constructor(t,e,i,s,n,r){this.v_=t,this.blt=e,this.ew=i,this.klt=s,this.wlt=n,this.Elt=r}};r();var AW=(t,e,i,s,n)=>t.filter((t=>n.cJ(t)&&s.lp(e,t)));r();var SW=(t,e,i)=>t.filter((t=>function(t,e,i){const s=i.yut;if(s<=0)return!1;return.8*s>t.wG*i.KR}(t,0,i)));r();var TW=(t,e,i,s,n)=>{const r=i.Tlt;if(void 0===r&&!s.Qs)return t;if(!1===r)return t;if(t.length>0&&t[0].Aw!==ee._E)return t;for(let e=t.length-1;e>=0;e--){const s=t[e];if(s.Ti===i.Slt&&s.ji===i.Alt)return t.slice(0,e+1);if(s.Ti<i.Slt||s.ji<i.Alt)return t.slice(0,e+2)}return[]};r();var kW=class{async zct(t,e,i,s){let n;for(const r of this.Ilt)try{const n=await r.zct(t,e,i,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.Ilt=t}};r(),r();var EW=class{async Clt(t,e,i,s){let n;for(const r of this.Plt)try{return await r.Clt(t,e,i,s)}catch(t){th(t),n=t}throw n}constructor(t){this.Plt=t}};r();var xW=class{async Clt(t,e,i,s){var n;const r=await this.lW.Kk({Gu:t,Yk:Rr.wk,jk:e?{Range:"bytes="+e[0]+"-"+(null!=(n=e[1])?n:"")}:void 0,kE:i,yE:xe.GET,Aw:Wr.tE,Vw:s});return await r.Ck()}constructor(t){this.lW=t}};r();var RW=class{async Clt(t,e,i,s){const n=await this.Fut.urt(t,e);if(n)return n.buffer;if(e){const i=await this.Fut.urt(t);if(i)return Uc(new j(i.buffer),e[0],e[1])}throw new HV({Gu:t,rut:e,kE:!1})}constructor(t){this.Fut=t}};r();var IW=1.05,CW=(t,e,i,s)=>{if(!1===i.Tlt)return t;if(s.zg)return t;const n=s.qg;var r;const o=(null!=(r=null==n?void 0:n.width)?r:i.Alt)*IW;var h;const a=(null!=(h=null==n?void 0:n.height)?h:i.Slt)*IW;for(let e=t.length-1;e>=0;e--){const i=t[e];if(i.Ti<=a&&i.ji<=o)return t.slice(0,e+1)}return[]},PW=class{static fit(t,e,i,s,n,r,o,h,a,u){const c=function(t,e){return new EW([new RW(e),new xW(t)])}(r,o),l=new Kh([AW],n,Ms.Ys,h,a,u),d=new pW(l,e,o,c),f=new Kh([SW,AW,TW,CW],n,Ms.Ys,h,a,u),_=new gW(f,e,s,c),v=new kW([d,_]);return new cW(t,i,v)}};r(),r();var DW=class extends pe{constructor(t,e,i,s,n,r=0){super(Ti.Qy),this.segmentStartTime=t,this.error=e,this.trackType=i,this.track=s,this.quality=n,this.retryCount=r}};r();var NW=class extends pe{constructor(t,e){super(Ti.wy),this.track=t,this.segments=e}},MW=class extends z{constructor(t,e){super(e),this.Dlt=t}},LW=[Ti.Jy,Ti.eb],BW=class extends Co{get fat(){return this.Nlt}get vat(){return this.Mlt}set pat(t){this.Llt.pat=t}get pat(){return this.Llt.pat}get bat(){return this.gat.Ht.bat}Blt(t){return!this.R2||!t||!Ph(this.R2.dht,t.dht)}jat(t){if(!this.Nlt)return!1;const e=this.Nlt.But,i=se.vB(e.FO,e.VO),s=this.Olt.wct,n=s.eB(t);return n<0?i.kr(t,oW):i.nB(t,s.jn(n),!0,!0,oW)}async qat(t){const e=this.gat.Ht.Zat;for(;;){let n;try{var i;J(t),this.Qat();if(this.Jat())break;n=this.Flt();const r=await this.zct(n,t);if(void 0===r)break;if(this.Nlt=r,!OW(this.Nlt)){await this.Vlt(this.Nlt,t);continue}var s;if(this.Mlt&&!$n(this.Mlt.aat.Dk,this.Nlt.aat.Dk)&&await this.Elt.dJ(this.Nlt.aat),this.Nlt.aat.AG&&(!this.vat||(null==(i=this.Mlt)?void 0:i.aat)!==this.Nlt.aat))null==(s=this.rH)||s.IG(this.Nlt.aat.AG);await this.Wlt(n,this.Nlt.But,t),this.R2=await this.Ult(this.Nlt.aat,t);const o=await this.Out(this.Nlt,t),h=this.Olt.gR,a=this.Mlt;this.Mlt=await this.Glt(o,t);const u=this.Olt.gR;this.Hlt(a,this.Nlt,h,u,n),e.forEach((t=>t.elt=!1)),this.Zlt=0,this.Xlt=0}catch(i){if(i instanceof Ou){this.f3(i.Cn,i.jn,i.aat);continue}if(i instanceof MW){let s=500;if(e.every((t=>t.elt))){if(2===this.Zlt){const t=this.Olt.gR;if(this.zlt(this.Nlt),this.Hlt(this.Mlt,this.Nlt,t,t,n),e.forEach((t=>t.elt=!1)),this.Xlt+=1,this.Zlt=0,this.Xlt===this.qlt.maxRetries)throw new A(Qa.MEDIA_LOAD_ERROR,"The segments could not be loaded.",i);continue}this.Zlt++;const t=this.qlt.minimumBackoff*2**(this.Zlt-1);s=_.min(t,this.qlt.maximumBackoff)}await Fe(s,t);continue}throw this.Ylt=se.mB(),i}finally{this.Nlt=void 0}}}Hlt(t,e,i,s,n){const r=s.tB(i),o=e.aat,h=o.Klt(e.But),a=o.jct(e.But);let u=e.But.FO,c=e.But.VO;h&&(u=_.min(u,_.max(0,o.Qct.Cn-.05))),a&&(c=_.max(c,o.Qct.jn));const l=se.vB(u,c).tB(s);if(0===r.V)return void this.jlt(i,l,u,n);if(h||this.Ylt.V>0){const t=l.Sn(se.vB(u,r.Cn(0)));this.Qlt(t)}const d=r.YL().Sn(se.vB(r.Cn(0),r.jn(r.V-1)));if(this.Qlt(d),a){const t=l.Sn(se.vB(r.jn(r.V-1),c));this.Qlt(t)}if(this.Ylt.V>0){const t=this.Ylt.tB(r);this.Qlt(t),this.Ylt=se.mB()}const f=o.Bot,v=Wn(e.But)?void 0:f.ult(e.But);var m;const g=null!=(m=null==t?void 0:t.But)?m:this.Jlt(v)?v:void 0;if(g){const t=this.gat.Vct(g.FO,g.VO);if(t.length>0){const e=se.vB(t[t.length-1].Fct,r.Cn(0));this.Qlt(e)}}const p=Wn(e.But)?void 0:f.clt(e.But);if(p&&this.Jlt(p)){const t=this.gat.Vct(p.FO,p.VO);if(t.length>0){const e=se.vB(r.jn(r.V-1),t[0].Oct);this.Qlt(e)}}}jlt(t,e,i,s){let n=e;0===this.Ylt.V&&(this.Ylt=se.vB(t.jn(t.V-1),i)),0===n.V&&void 0!==s&&(n=se._B(s)),this.Ylt=this.Ylt.JL(n),this.gat.Uct(this.Ylt)}Jlt(t){return!!t&&this.gat.Vct(t.FO,t.VO).length>0}Qlt(t){const e=t.tB(this.Olt.gR);for(let t=0;t<e.V;t++)e.Cn(t)!==e.jn(t)&&this.$lt.FJ(e.Cn(t),e.jn(t))}tdt(t,e){throw new MW(t,e)}Qat(){if(this.Ylt.V>0)return;var t;const e=this.Olt.wct.JL(null!=(t=this.Olt.BJ.zL().dB(this.Olt.bct))?t:se.mB());this.gat.Dct(e),this.edt&&!this.idt(this.edt)&&(this.edt=void 0),this.wo(new NW(this.gat.Ht.bat,this.gat.Uat()))}Jat(){return this.Mlt&&this.Mlt.aat.jct(this.Mlt.But)?(this.$lt.r3(),!0):(this.edt&&this.edt.aat.jct(this.edt.But)&&this.idt(this.edt)&&this.$lt.r3(),!!this.Olt.yct)}idt(t){return this.gat.Nct.iB(t.sdt,t.ndt)}rdt(t,e,i){(!this.edt||this.edt.But.VO<t.But.VO)&&(this.edt=Bo({},t,{sdt:e,ndt:i}))}Flt(){const t=this.Olt.bct;return t}async zct(t,e){J(e);const i=this.Mlt?this.Mlt.aat:void 0,s=await this.Llt.Zct(t,i,e);if(s)return s}async Vlt(t,e){const i={stack:[],error:void 0,hasError:!1};try{const s=t.aat,n=s.Bot,r=Wn(t.But)?n.olt(t.But):t.But,o=s.hdt.odt(),h=n.adt(r);if(h&&h.getTime()<=o.getTime())return this.tdt(tc.Tht,"Segment is not available.");const a=n.udt(r).getTime()-o.getTime();0;const u=zs(i,da.Qw([e]),!1);await Promise.race([Fe(a,u.Vw),s.vy(ko.iat,u.Vw)])}catch(t){i.error=t,i.hasError=!0}finally{lo(i)}}async Ult(t,e,i){void 0===i&&(i=0),J(e);const s=t.cdt;if(!s)return this.R2;try{if(!t.ldt){const i=await this.ddt.Wut(s,e);t.ldt=i.qk}}catch(s){if(th(s),eo(s)){if(2===i)return t.elt=!0,this.tdt(tc.Dht,"Could not fetch the initializer.");const s=_.min(this.qlt.minimumBackoff*2**i,this.qlt.maximumBackoff);return await Fe(s,e),this.Ult(t,e,i+1)}throw new A(Qa.MEDIA_LOAD_ERROR,s.message,s)}J(e);try{this.Blt(t.ldt)&&await this.$lt.Mot(t.ldt,t,e)}catch(t){if(th(t),eo(t))return this.tdt(tc.Dht,"Could not append the initializer.");throw new A(Qa.MEDIA_DECODE_ERROR,t.message,t)}return t.ldt}async Out(t,e,i){void 0===i&&(i=0);try{return J(e),await this.ddt.Out(t,e)}catch(s){if(th(s),s instanceof an){if(function(t){return t instanceof tA}(s.cause))return this.fdt(new an(s,t.But,t.aat),i),this.tdt(tc.Tht,"Could not append the segment.");if(2===i)return t.aat.elt=!0,this.fdt(s,i),this.tdt(tc.Tht,"Could not fetch the segment.");const n=_.min(this.qlt.minimumBackoff*2**i,this.qlt.maximumBackoff);return await Fe(n,e),await this.Out(t,e,i+1)}throw new A(Qa.MEDIA_LOAD_ERROR,s.message,s)}}async Wlt(t,e,i){const s=this.gat.Vct(e.FO,e.VO),n=this.Olt.wct.dB(t);let r=se.mB();for(const t of s){J(i);const e=t.Oct,s=t.Fct,o=n&&n.nB(e,s)?_.max(e,n.jn(0)):e,h=s;o<h&&(r=r.JL(se.vB(o,h)))}for(let t=0;t<r.V;t++)await this.$lt._dt(r.Cn(t),r.jn(t),i);this.Qat()}async Glt(t,e){try{J(e);const i=await this.$lt.vdt(t.Vut,t.But,t.aat,e);return this.mdt(t,i.sdt,i.ndt),this.rdt(t,i.sdt,i.ndt),t}catch(e){if(th(e),eo(e))return this.fdt(new an(e,t.But,t.aat),0),this.tdt(tc.Tht,"Could not append the segment.");if(cD(e)&&this.$lt.Lj())return this.tdt(tc.Eht,"Buffer is full. Could not reduce the buffer.");throw new A(Qa.MEDIA_DECODE_ERROR,e.message,e)}}mdt(t,e,i){const s=t.aat,n=t.But;this.zat(n,s,e,i)}zat(t,e,i,s){this.gat.zat({Xat:e.o,Gat:t.FO,Hat:t.VO,Oct:i,Fct:s,Gct:!0}),this.$lt.VJ(i,s)}f3(t,e,i){const s=se.vB(t,e);i?this.gat.FJ(s,i.o):this.gat.Uct(s),this.$lt.FJ(t,e)}zlt(t){const e=se.vB(t.But.FO,t.But.VO);t.aat?this.gat.FJ(e,t.aat.o):this.gat.Uct(e)}fdt(t,e){const i=t.cct,s=this.gat.Ht.bat,n=this.gat.Ht.ka,r=t.dct.aat&&t.dct.aat.ka,o=new DW(i,t.message,s,n,r,e);this.wo(o)}er(){this.R2=void 0,this.Mlt=void 0}gn(){this.er(),this.edt=void 0,this.ddt.fn(LW,this.Ds),this.ddt.gn()}constructor(t,e,i,s,n,r,o,h,a){super(),this.Kat=t,this.gat=e,this.Olt=i,this.Llt=s,this.ddt=n,this.$lt=r,this.Elt=o,this.qlt=h,this.rH=a,this.Nlt=void 0,this.R2=void 0,this.Mlt=void 0,this.edt=void 0,this.Zlt=0,this.Xlt=0,this.Ylt=se.mB(),this.ddt.yn(LW,this.Ds)}};function OW(t){const e=t.aat,i=e.Bot,s=Wn(t.But)?i.olt(t.But):t.But;return i.gdt(s,e.hdt.odt())}var FW=0,VW=class{fit(t){const e=FW++,i=this.pct.h3,s=new uW(t),n=this.pdt&&mT(i),r=new WV(i,n),o=new hW(this.pct,this.v9,this.I3,this.vZ),h=PW.fit(e,this.pct,s,this.vZ,r,this.lW,this.Fut,this.klt,this.wlt,this.Elt),a=function(t){switch(t){case ee.fE:return Ca.fE;case ee._E:return Ca._E;case ee.Ak:return Ca.Ak;case ee.vE:return Ca.vE;default:return Ca.tE}}(i),u=function(t,e,i,s){const n=new XV(s),r=new rW(t,e,i);return new qV([n,r])}(new OV(this.lW,a),r,n,this.Fut),c=new BW(e,s,o,h,u,this.pct,this.Elt,this.qlt,this.rH);return new BV(e,t._ct,s,c,this.v9)}wdt(t,e){const i={bat:ee.Ak,_ct:e,Zat:e.Zat,ka:t.ka};return this.fit(i)}constructor(t,e,i,s,n,r,o,h,a,u,c,l){this.pct=t,this.v9=e,this.I3=i,this.lW=s,this.vZ=n,this.pdt=r,this.Fut=o,this.klt=h,this.wlt=a,this.Elt=u,this.qlt=c,this.rH=l}};r();var WW=class{cJ(t){return this.Aot.cJ(t)}dJ(t){return this.Aot.dJ(t)}constructor(t){this.Aot=t}},UW=class{cJ(t){return!0}dJ(t){return Promise.resolve(void 0)}};r(),r();var GW=class extends Ds{ba(){return new HW(this.IC.map((t=>t.ka)))}constructor(t,e){super(No.hC),this.IC=t||[],this.Ht=e}},HW=class extends pe{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}};r();var ZW=class extends Un{ba(){return new XW(this.quality.ka)}constructor(t){super(No.QUALITY_UNAVAILABLE),this.quality=t}},XW=class extends nr{constructor(t){super("qualityunavailable"),this.quality=t}};r();var zW=class extends pe{constructor(){super(No.NO_QUALITY)}};function qW(t){return{wG:t.wG,vp:t.Zrt,Ti:YW(t)?t.Ti:0,Aw:YW(t)?ee._E:ee.fE,ji:YW(t)?t.ji:0}}function YW(t){const e=t;return void 0!==e.Ti&&void 0!==e.ji}r();var KW=0,jW=class extends Co{get RC(){return this.Lat.ydt.map(QW).filter(ji)}bdt(t){for(const e of t)e.yn("update",this.Adt),this.AO.SO(e)}Sdt(t){if(!this.AO.TO(t))return;t.oW();const e=this.Tdt();if(this.kdt&&ms(this.kdt,t)){const t=this.kdt.filter((t=>t.znt));0===t.length&&e.length>0?this.DC=e:this.DC=t}else this.DC=e;this.wo(new ZW(t))}Edt(t){if(!this.AO.TO(t))return;const e=this.Tdt();t.rW(),this.kdt&&!function(t,e){return zm(t,e,((t,e)=>t===e))}(this.kdt,e)||(this.DC=this.Tdt())}Tdt(){return this.AO.uC.filter((t=>t.znt))}get EC(){return this.xdt}Rdt(t){this.xdt=t.aat,this.wo(t)}get _ct(){return this.Lat}get Rt(){return this.He}set Rt(t){this.CO(t)}get ka(){return this.su||(this.su=yi(this)),this.su}get Idt(){return this.Cdt}set Idt(t){this.Cdt=t}get o(){return this.ZS}get xC(){return this.xO}get Lt(){return this.j4}get gs(){return this.NA}get xh(){return this.RO}set xh(t){t!==this.RO&&(this.RO=t,this.wo(new Zs(this)))}get xE(){return this.Rt?"enabled":"disabled"}get DC(){return this.kdt}set DC(t){let e;if(t){const i=this.EC?qW(this.EC):void 0;e=t.filter((t=>t.znt&&Ms.Ys.lp(i,qW(t))))}else e=this.Tdt();0!==e.length?(this.kdt=t&&this.AO.TO(t)?t:void 0,this.Pdt=this.Ddt(this.kdt),this.wo(new GW(t,this))):this.wo(new zW)}get Ndt(){return this.Pdt}Ddt(t){if(!t||0===t.length)return;const e=[];for(const i of this.Zat)for(const s of t)s===i.aat&&s.znt&&e.push(i);return e}get IC(){return this.AO}get Zat(){return this.Mdt}Ldt(t){this.Bdt.push(t),this.Mdt.push(...t.Zat);const e=t.Zat.map((t=>t.aat));this.bdt(e)}get bat(){return this.Odt}get Fdt(){return this.Bdt}get Vdt(){return this.Zat.every((t=>t.Vdt))}CO(t){this.He=t,this.Cdt&&(t?this.Cdt.rW(this):this.Cdt.oW(this))}Wdt(t){this.He=t,this.Udt!==t&&(this.Udt=t,this.wo(new Ec(this)))}gn(){for(const t of this.AO.uC)t.fn("update",this.Adt);this.AO.er()}constructor(t,e,i="alternative"){super(),this.xdt=void 0,this.He=!1,this.su=void 0,this.Cdt=void 0,this.ZS="",this.Udt=!1,this.AO=new Vc,this.Mdt=[],this.kdt=void 0,this.Pdt=void 0,this.Adt=()=>this.wo(new Zs(this)),this.Bdt=[],this.Lat=t,this.ZS=String(KW++),this.xO=oi(),this.j4=i,this.NA=t.Htt,this.RO=t.xh,this.Odt=t.Aw,this.Mdt=t.Zat,this.bdt(e)}};function QW(t){if("urn:mpeg:dash:role:2011"===t.i9)return JW(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.i9){if("1"===t.Dx)return ln.bC;if("2"===t.Dx)return ln.SC}}function JW(t){if(void 0!==(null==t?void 0:t.Dx))switch(t.Dx){case"caption":return ln.yC;case"sign":return ln.AC;case"description":return ln.bC;case"enhanced-audio-intelligibility":return ln.SC;default:return}}var $W=class t extends xx{get Gdt(){return this.Hdt}set Gdt(t){this.Hdt=t}get Rt(){for(const t of this.Z.uC)if(t.xE!==bh.Th)return!0;return!1}get HG(){const t=this.v9.SR;return this.wct.dB(t,.01)}get Zdt(){return this.Gdt&&this.Xdt[this.Gdt.xC]?this.Xdt[this.Gdt.xC]:se.mB()}get zdt(){return this.Gdt&&this.qdt[this.Gdt.xC]?this.qdt[this.Gdt.xC]:se.mB()}get Sct(){return new se([0,1/0])}get gR(){return this.Zdt}get BJ(){return this.Ydt?this.Ydt.mat.BJ.Tct:se.mB()}get wct(){return DV(this.gR,this.BJ).QL(2*this.Kdt)}get Cn(){return this.jdt?this.jdt.Qct.Cn:NaN}get jn(){return this.jdt?this.jdt.Qct.jn:NaN}get RR(){const t=this.jn;return!!t&&this.v9.SR>=t}get Kdt(){var t;const e=this.Qdt();if(!e)return.04;var i;return 1/(null!=(i=this.Gdt&&(null==e||null==(t=e.Jdt)?void 0:t.dF()))?i:25)}get Ti(){return this.qA}get h3(){return ee.Ak}get KR(){return this.lZ}set KR(t){this.lZ=t}get JR(){return this.zdt}get rI(){if(!this.Gdt)return se._B(0);const t=this.$dt(this.Gdt),e=null==t?void 0:t.tft,i=null==t?void 0:t.eft;if(void 0===i||void 0===e)return se._B(0);const s=_.max(e,this.v9.SR);return new se([i,s]).zL()}get ji(){return this.zA}r3(){}Act(){return this.wct.kr(this.jn)}async vdt(t,e,i,s){const n=t.Aw===Ce.tJ?t.qk.dht:await t.qk.Ck(s),r=this.findTrackForRepresentation(i),o=this.Xdt[r.xC],h=e.FO,a=e.VO,u=new se([h,a]);o||(this.Xdt[r.xC]=se.mB(),this.qdt[r.xC]=se.mB()),this.xot(s);const c=this.Lot(new j(n),e,i,r);for(const t of c)r.dW(t);return this.Xdt[r.xC]=this.Xdt[r.xC].JL(u),{sdt:h,ndt:a}}xot(t){const e=uD(this.v9.SR,void 0,void 0,this.gR,this.vZ.Cj,this.vZ.Sj);for(const[i,s]of e)ah(this._dt(i,s,t))}Mot(t,e,i){return this.ift.Mot(t,e,i)}Lot(t,e,i,s){return this.ift.Lot(t,e,i,s)}_dt(t,e,i){const s=t,n=e;let r=new se([t,e]);for(const t of this.Z.uC){const e=[];for(const i of t.L.uC)i.FO>=s&&i.VO<=n?e.push(i):r=r.tB(new se([i.FO,i.VO]));for(const i of e)t.eW(i);const i=this.Xdt[t.xC];i&&(this.Xdt[t.xC]=i.tB(r))}return Promise.resolve()}FJ(t,e){}VJ(t,e){}Lj(){return!1}rW(t){const e=this.sft(t);if(e&&this.Gdt!==e){this.Gdt=e;for(const t of this.Z.uC)t!==e&&(t.xE=bh.Th);if(this.ift.er(),this.Ydt&&(this.Ydt.gn(),this.Ydt=void 0),this.Gdt){const t=this.$dt(this.Gdt);this.Ydt=new VW(this,this.v9,this.v9,this.lW,this.vZ,!1,this.Fut,void 0,void 0,new UW,JT,void 0).wdt(this.Gdt,t),this.Ydt.yn(yo.da,this.nft),this.Ydt.Cn(tc.ght)}}}oW(t){if(this.Gdt===t){const e=this.sft(t);e&&this.Gdt===e&&(this.Gdt=void 0),this.Ydt&&(this.Ydt.gn(),this.Ydt=void 0)}}async Dn(t){await this.er(),this.jdt=t,this.rft(t)}oft(t){const e=function(t){const e=t.Zat&&t.Zat.length>0&&t.Zat[0],i=e&&gx(e.Zrt),s=gx(t.Zrt),n=t.Yq===uu.APPLICATION_TTML_XML;return i||s||n?Lr.TTML:t.Yq===uu.TEXT_VTT||bx(t.Yq,t.Zrt)?Lr.WEBVTT:Lr.DEFAULT}(t);if(!e)throw new g("Unknown TextTrack type for Representation");const i=t.hft.concat(t.ydt);return this.aft(function(t){return ms(t.filter((t=>"urn:mpeg:dash:role:2011"===t.i9)).map((t=>t.Dx)).filter(ji),"caption")?hs.QV:hs.jV}(i),t.xh,t.Htt,!1,e,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.i9)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.Dx)))}(t.hft),t.ydt.map(JW).filter(ji))}rft(t){for(const e of t.uft){const t=this.oft(e);this.cft.set(t.xC,e),t.sI=ic.LOADED,this.tt(t)}}it(t){this.cft.delete(t.xC),super.it(t)}aft(t,e,i,s,n,r,o,h){var a;const u=r.Zat.reduce(((t,e)=>t||e.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.uW.LI(t,l,e,i,s,n,o,h)}async er(){await super.er(),this.Ydt&&(await this.Ydt.er(tc.Vht),this.Ydt.fn(yo.da,this.nft),this.Ydt=void 0),this.jdt=void 0,this.Xdt={},this.qdt={}}lft(){this.Xdt={},this.qdt={}}findTrackForRepresentation(e){for(const i of this.Z.uC){const s=this.$dt(i);if(s&&t.dft(s)===e)return i}}sft(t){return Fo(this.Z.uC,(e=>t.xC===e.xC))}$dt(t){return this.cft.get(t.xC)}Qdt(){if(!this.Gdt)return;const e=this.$dt(this.Gdt);return e?t.dft(e):void 0}static dft(t){return t.Zat&&t.Zat.length>0?t.Zat[0]:void 0}gn(){for(const t of this.Z.uC)this.uW._W(t);return super.gn()}constructor(t,e,i,s,n,r){super(),this.qA=0,this.lZ=1,this.Ydt=void 0,this.Xdt={},this.qdt={},this.zA=0,this.cft=ea(),this.nft=t=>{0},this.v9=t,this.lW=e,this.vZ=i,this.ift=s,this.Fut=n,this.uW=r}},tU=class{get nt(){return this.Ll}async cW(t){if(t.Aw!==ee.Ak)return;const e=function(t,e,i){return gx(e)||t===uu.APPLICATION_TTML_XML||t===uu.TEXT_VTT?new IV(i):bx(t,e)?new CV:void 0}(t.Yq,t.Zrt,this.Oot);if(e){const i=this.fft(e);return this._ft(i),await i.Dn(t),i}}fft(t){return new $W(this.v9,this.lW,this.vZ,t,this.Fut,this.uW)}_ft(t){this.vft.push(t),this.Ll.DG(t.Z)}async er(){for(const t of this.vft.slice())await t.er();En(this.vft),this.Ll.er()}async gn(){for(const t of this.vft)await t.gn();En(this.vft),this.Ll.gn()}constructor(t,e,i,s,n,r){this.vft=[],this.Ll=new Fu([]),this.v9=t,this.lW=e,this.vZ=i,this.Fut=s,this.uW=n,this.Oot=r}};r();var eU=class extends pe{constructor(t){super(Ti.Uy),this.error=t}};r();var Me=function(t){return t.mW="static",t.gW="dynamic",t}({});r(),r();var iU=function(t){return t.mft="gft",t}({}),sU=class extends pe{constructor(){super(iU.mft)}};r(),r();var nU=class extends pe{constructor(t,e){super(Ti.qy),this.representation=t,this.previousRepresentation=e}};r(),r(),r();var $u=function(t){return t[t.pft=0]="pft",t[t.wft=1]="wft",t[t.yft=2]="yft",t[t.bft=3]="bft",t[t.Aft=4]="Aft",t[t.Sft=5]="Sft",t}({}),Pu=function(t){return t[t.Tft=0]="Tft",t[t.kft=1]="kft",t[t.Eft=2]="Eft",t[t.xft=3]="xft",t}({});function rU(t,e,i){return i===$u.pft?i:e!==Pu.Tft&&e!==Pu.kft||i!==$u.wft&&i!==$u.yft?t?e===Pu.Eft?$u.Aft:e===Pu.xft?$u.bft:$u.pft:$u.Sft:$u.yft}function oU(t,e,i,s){const n={byte:i};let r=$u.wft;const o=[],h=31&_u(e,n,s);n.byte+=1;for(let i=0;i<h;i+=1){const h=_u(e,n,s),a=4&h,u=3&h;r=rU(Boolean(a),u,r);const c=_u(e,n,s),l=_u(e,n,s);o.push({Rft:t,eL:-1,Ift:!i,Cft:Boolean(a),Aw:u,Pft:r,Dft:c,Nft:l})}return o}function hU(t,e,i){const s=_u(t,e,i);if(!S(s))return String.fromCharCode(s)}function aU(t){const e=t.V0,i={byte:t.O0},s=t.F0,n=_u(e,i,s);if(255===n&&(i.byte+=1),181!==n)return;const r=TN(e,i);if(47!==r&&49!==r)return;if(49===r){const t=function(t,e,i){let s="",n=i;for(;n>0;)n-=1,s+=hU(t,e);return s}(e,i,4);if("GA94"!==t)return}if(3!==_u(e,i,s))return;47===r&&(i.byte+=1);const o=t;return o.Mft=i.byte,o}function uU(t){return 4===t.L0}function cU(t){const e=t.filter(uU).map(aU).filter(ji),i=[];for(const t of e)i.push(...oU(t.M0,t.V0,t.Mft,t.F0));return i}r();var lU="und";function dU(t){if(t===lU)return;const e=t.toLowerCase();for(const t of fU)if(t[1]===e||t[2]===e||t["2T"]===e||t["2B"]===e||t[3]===e)return t}var fU=[{l:"Abkhaz",ph:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",ph:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",ph:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",ph:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",ph:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",ph:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",ph:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",ph:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",ph:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",ph:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",ph:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",ph:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",ph:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",ph:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",ph:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",ph:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",ph:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",ph:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",ph:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",ph:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",ph:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",ph:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",ph:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",ph:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",ph:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",ph:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",ph:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",ph:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",ph:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",ph:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",ph:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",ph:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",ph:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",ph:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",ph:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",ph:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",ph:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",ph:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",ph:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",ph:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",ph:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",ph:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",ph:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",ph:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",ph:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",ph:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",ph:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",ph:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",ph:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",ph:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",ph:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",ph:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",ph:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",ph:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",ph:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",ph:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",ph:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",ph:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",ph:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",ph:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",ph:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",ph:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",ph:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",ph:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",ph:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",ph:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",ph:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",ph:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",ph:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",ph:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",ph:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",ph:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",ph:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",ph:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",ph:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",ph:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",ph:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",ph:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",ph:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",ph:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",ph:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",ph:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",ph:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",ph:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",ph:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",ph:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",ph:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",ph:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",ph:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",ph:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",ph:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",ph:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",ph:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",ph:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",ph:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",ph:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",ph:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",ph:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",ph:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",ph:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",ph:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",ph:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",ph:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",ph:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",ph:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",ph:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",ph:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",ph:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",ph:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",ph:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",ph:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",ph:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",ph:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",ph:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",ph:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",ph:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",ph:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",ph:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",ph:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",ph:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",ph:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",ph:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",ph:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",ph:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",ph:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",ph:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",ph:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",ph:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",ph:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",ph:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",ph:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",ph:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",ph:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",ph:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",ph:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",ph:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",ph:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",ph:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",ph:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",ph:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",ph:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",ph:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",ph:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",ph:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",ph:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",ph:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",ph:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",ph:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",ph:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",ph:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",ph:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",ph:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",ph:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",ph:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",ph:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",ph:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",ph:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",ph:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",ph:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",ph:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",ph:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",ph:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",ph:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",ph:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",ph:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",ph:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",ph:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",ph:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",ph:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",ph:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",ph:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",ph:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",ph:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",ph:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",ph:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",ph:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",ph:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",ph:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",ph:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",ph:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",ph:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",ph:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",ph:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",ph:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];r();function _U(t){var e;const i=null!=(e=function(t){const e=t.b0,i=new kN;return i.E0(e,0,e.byteLength),BN(i).t1}(t))?e:24;return t.Lft/i}function vU(t){return t.Aw===Tt.nD}function mU(t,e,i,s,n){const r=function(t,e,i,s){const n=i.Lft,r=vo.fromNumber(t.fL||0),o=s.SO(Oo.xF(r,n));return{Bft:s.dF(),Oft:s,Fft:o,Vft:s}}(t,0,i,s),o=Oo.RF(t.ct||0,i.Lft),h=t.KD||0,a=!(65536&h)&&1!==(h>>24&3);let u;const c=ra(n),l=new Ri;for(;l.ec<c.byteLength;){const t=as(c,l);if((31&Mg(c,l,1))===DN.X0){const e=new kN;e.E0(n,l.ec-1,l.ec+t-1);const i=new LN(e),s=IN(r.Fft,i);u=u||[],u.push(...cU(s))}l.kb(t-1)}return Bo({},r,{ct:o.dF(),Wft:o,Uft:r.Fft.dF(),Gft:r.Bft,Hft:a,Zft:u,Xft:!1,zft:!1})}function gU(t){return{TN:t.HD.TN,Lft:t.yN.HD._N}}function pU(t){return t.Aw===Tt.vP}r(),r(),r(),r(),r(),r(),r(),r();var nc=class{eF(t){return this.Qtt===t.Qtt&&this.Wtt===t.Wtt}constructor(t,e){this.Qtt=t,this.Wtt=e}};r();var wU=class{get det(){return this.qft}get het(){return[this]}get cet(){return this.KQ}get Xtt(){return this.Yft}get Ytt(){return new nc(this.Xtt.Qtt,this.Xtt.Wtt+this.det.length-1)}Kft(t){this.qft+=t}jft(t){for(const e of t)this.Kft(e)}constructor(t,e){this.KQ=t,this.Yft=e,this.qft=""}};function yU(t,e){return t===e||t.det===e.det&&t.Xtt.eF(e.Xtt)&&Ai(t.cet,e.cet)}function bU(t,e){return t===e||t.Xtt.eF(e.Xtt)&&t.Ytt.eF(e.Ytt)&&zm(t.het,e.het,yU)}var AU=class extends Le{iF(t){return zm(this.U,t.U,bU)}constructor(t,e,i){super(t,e,i,!1)}};r();var SU=class{Qft(t){return t.kV(this)}Jft(t){return Qe(t,((t,e)=>t.kV(this,e)))}$ft(t,e){return new TU(t,e).t_t()}},TU=class{t_t(){if(this.e_t)return[];for(let t=0;t<this.Qtt.length;t++)this.i_t(t);return this.s_t(),this.n_t}r_t(t){this.o_t=new wU(EO,new nc(this.h_t,t))}s_t(){this.o_t&&(this.n_t.push(this.o_t),this.o_t=null)}i_t(t){const e=this.Qtt[t];kU(e)?this.o_t&&this.s_t():(this.o_t||this.r_t(t),this.o_t.Kft(e))}get e_t(){return this.Qtt.every(kU)}constructor(t,e){this.Qtt=t,this.h_t=e,this.n_t=[],this.o_t=null}};function kU(t){return null==t}var EU=class{static a_t(t,e,i){if(e>=i)return;const s=Qe(t,((t,e)=>new TU(t.map((t=>t?t.u_t():null)),e).t_t()));return 0!==s.length?new AU(e,i,s):void 0}},xU="black",RU="white";r(),r();var IU=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,e)=>(t[e[0]]=e[1],t)),{}),CU=class{c_t(t){for(let e=0;e<Bt;e++)t&&(this.l_t[e]=t.l_t[e])}eF(t){for(let e=0;e<Bt;e++)if(this.l_t[e]!==t.l_t[e])return!1;return!0}d_t(){for(let t=0;t<Bt;t++)if(null!==this.l_t[t])return!1;return!0}f_t(t){this.__t!==t&&(this.__t=t),this.__t<0?this.__t=0:this.__t>Bt&&(this.__t=31)}v_t(t){const e=this.__t+t;this.f_t(e)}m_t(){this.v_t(-1),this.l_t[this.__t]=null}Kft(t){t>=144&&this.m_t();const e=function(t){return IU[t]?String.fromCharCode(IU[t]):String.fromCharCode(t)}(t);this.addParsedChar(e)}addParsedChar(t){this.__t>=Bt||(32===Number(t)?(this.l_t[this.__t]=this.g_t?"</i>":"<i>",this.g_t=!this.g_t):this.l_t[this.__t]=t,this.v_t(1))}p_t(t){for(let e=t;e<Bt;e++)this.l_t[e]=null}Bb(){this.p_t(0),this.__t=0}w_t(){this.p_t(this.__t)}y_t(t,e){const i=this.l_t;let s=null;for(let n=0;n<Bt;n++){const r=i[n];null===r?s=null:(s||(s={Hh:n,qh:t,ji:0,Ti:1,l_t:[[]]},e.push(s)),s.l_t[0].push(r),s.ji++)}}kV(t,e){return t.$ft(this.l_t,e)}constructor(){this.l_t=[],this.__t=0;for(let t=0;t<Bt;t++)this.l_t.push(null);this.g_t=!1}};var PU=class{b_t(t,e){const i="CC"+(this.A_t<<1|this.S_t+1);if(t>=e)return null;const s=(new SU).Jft(this.T_t.slice(1));return 0===s.length?null:{BO:new AU(t,e,s),Pk:i,k_t:this.A_t<<1|this.S_t+1}}er(){this.E_t(),this.x_t=1}R_t(){return this.x_t}I_t(t){this.x_t=t}f_t(t){this.T_t[this.x_t].f_t(t)}v_t(t){this.T_t[this.x_t].v_t(t)}C_t(){return this.P_t}D_t(t){this.P_t=t}Kft(t,e){if(e<32||e>127)return;let i="";switch(t){case 0:i=void 0!==NU[e]?NU[e]:String.fromCharCode(e);break;case 1:i=MU[e];break;case 2:this.N_t(),i=LU[e];break;case 3:this.N_t(),i=BU[e]}i&&this.T_t[this.x_t].addParsedChar(i)}N_t(){this.T_t[this.x_t].m_t()}M_t(t,e,i){if(t>=e)for(let s=i-1;s>=0;s--)this.T_t[t+s]=this.T_t[e+s];else for(let s=0;s<i;s++)this.T_t[t+s]=this.T_t[e+s]}L_t(t,e){for(let i=0;i<=e;i++)this.T_t[t+i]=new CU}E_t(){this.L_t(0,hc)}B_t(){this.x_t=this.P_t>0?this.P_t:0,this.E_t()}O_t(t){this.F_t=t}V_t(t){this.W_t=t}U_t(t){this.G_t=t}H_t(t){this.Z_t=t}constructor(t,e){this.T_t=new Array(hc+1);for(let t=0;t<=hc;t++)this.T_t[t]=new CU;this.x_t=1,this.P_t=0,this.A_t=t,this.S_t=e,this.F_t=!1,this.W_t=!1,this.G_t=RU,this.Z_t=xU,this.er()}},hc=15,DU=function(t){return t[t.X_t=0]="X_t",t[t.z_t=1]="z_t",t[t.q_t=2]="q_t",t[t.Y_t=3]="Y_t",t}({}),NU={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},MU={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},LU={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},BU={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},OU=class{er(){this.K_t=!0,this.j_t=0,this.bp=0,this.Q_t=this.J_t,this.$_t=void 0,this.J_t.er(),this.tvt.er(),this.evt.er()}ivt(t,e){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|e>>5&1]}svt(t,e){const i=this.ivt(t,e),s=(30&e)>>1;let n=RU,r=!1;s<7?n=WU[s]:7===s&&(r=!0);const o=1==(1&e);if(4===this.bp)return;const h=this.Q_t;if(3===this.bp&&i!==h.R_t()){const t=1+h.R_t()-h.C_t(),e=1+i-h.C_t();h.M_t(e,t,h.C_t()),h.L_t(0,e-1),h.L_t(i+1,hc-i)}h.I_t(i);const a=RO[t<<1&14|e>>5&1]-1;if(a<0)return;const u=function(t,e){const i=e>95?e-96:e-64;return{Vtt:xO[i].Vtt,Ftt:xO[i].Ftt,Wtt:xO[i].Wtt,Qtt:t}}(a,e);h.f_t(u.Wtt),this.Q_t.O_t(o),this.Q_t.V_t(r),this.Q_t.U_t(n),this.Q_t.H_t(xU)}nvt(t,e){this.Q_t.O_t(!1),this.Q_t.V_t(!1),this.Q_t.U_t(RU);const i=this.rvt(t,DU.X_t," ".charCodeAt(0));let s=RU,n=!1;const r=1==(1&e);return s=WU[(14&e)>>1],"white_italics"===s&&(s="white",n=!0),this.Q_t.O_t(r),this.Q_t.V_t(n),this.Q_t.U_t(s),i}rvt(t,e,i){if(this.Q_t.Kft(e,i),2===this.bp||3===this.bp){const e=this.ovt(this.Q_t,this.j_t,t);return this.j_t=t,e}return null}ovt(t,e,i){return this.K_t?null:2===this.bp||3===this.bp?t.b_t(i,i+10):t.b_t(e,i)}avt(t,e){let i=xU;0==(7&t)&&(i=VU[(14&e)>>1]),this.Q_t.H_t(i)}uvt(t){const e=FU,i=t.cvt,s=t.lvt;let n=null;switch(i){case e.RCL:this.dvt();break;case e.BS:this.fvt();break;case e.AOD:case e.AON:case e.DER:break;case e.RU2:n=this._vt(2,s);break;case e.RU3:n=this._vt(3,s);break;case e.RU4:n=this._vt(4,s);break;case e.FON:n=this.vvt(s);break;case e.RDC:this.mvt(s);break;case e.TR:this.gvt();break;case e.RTD:this.pvt();break;case e.EDM:n=this.wvt(s);break;case e.CR:n=this.yvt(s);break;case e.ENM:this.bvt();break;case e.EOC:n=this.Avt(s)}return n}yvt(t){const e=this.Q_t;if(3!==this.bp)return null;const i=this.ovt(e,this.j_t,t),s=e.R_t()-e.C_t()+1;return e.M_t(s-1,s,e.C_t()),e.L_t(0,s-1),e.L_t(e.R_t(),hc-e.R_t()),this.j_t=t,i}_vt(t,e){this.Q_t=this.J_t;const i=this.Q_t;let s=null;return 3!==this.bp&&4!==this.bp&&(s=this.ovt(i,this.j_t,e),this.J_t.B_t(),this.tvt.B_t(),this.K_t=!1,i.I_t(hc)),this.bp=3,i.D_t(t),s}vvt(t){return this.rvt(t,DU.X_t," ".charCodeAt(0))}wvt(t){const e=this.J_t;let i=null;return 4!==this.bp&&(i=this.ovt(e,this.j_t,t)),e.E_t(),this.K_t=!1,i}mvt(t){this.bp=2,this.Q_t=this.J_t,this.Q_t.D_t(0),this.j_t=t}bvt(){this.tvt.E_t()}Avt(t){let e=null;4!==this.bp&&(e=this.ovt(this.J_t,this.j_t,t));const i=this.tvt;return this.tvt=this.J_t,this.J_t=i,this.dvt(),this.j_t=t,e}dvt(){this.bp=1,this.Q_t=this.tvt,this.Q_t.D_t(0)}fvt(){this.Q_t.N_t()}gvt(){this.evt.er(),this.K_t=!1,this.pvt()}pvt(){this.Q_t=this.evt,this.bp=4}Svt(t,e,i){return this.Q_t.Kft(DU.X_t,e),this.rvt(t,DU.X_t,i)}Tvt(t,e,i){const s=1&e?DU.Y_t:DU.q_t;return this.rvt(t,s,i)}kvt(t){const e=t.Evt,i=t.cvt,s=t.lvt;if(this.$_t===(e<<8|i))return this.$_t=void 0,null;if(this.$_t=e<<8|i,this.xvt(e,i))this.svt(e,i);else{if(this.Rvt(e,i))return this.nvt(s,i);if(this.Ivt(e,i))this.avt(e,i);else{if(this.Cvt(e,i))return this.rvt(s,DU.z_t,i);if(this.Pvt(e,i))return this.Tvt(s,e,i);if(this.Dvt(e,i))return this.uvt(t);this.isTabOffset(e)&&this.Q_t.v_t(i-32)}}return null}isTabOffset(t){return 23===t||31===t}Dvt(t,e){return 20==(246&t)&&32==(240&e)}xvt(t,e){return 16==(240&t)&&64==(192&e)}Rvt(t,e){return 17==(247&t)&&32==(240&e)}Ivt(t,e){return 16==(247&t)&&32==(240&e)||23==(247&t)&&45==(255&e)}Cvt(t,e){return 17==(247&t)&&48==(240&e)}Pvt(t,e){return 18==(246&t)&&32==(224&e)}static Nvt(t){return 16==(112&t)}constructor(t,e){this.bp=0,this.evt=new PU(t,e),this.J_t=new PU(t,e),this.tvt=new PU(t,e),this.Q_t=this.J_t,this.j_t=0,this.$_t=void 0,this.K_t=!1}},FU={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47},VU=["black","green","blue","cyan","red","yellow","magenta","black"],WU=["white","green","blue","cyan","red","yellow","magenta","white_italics"];r(),r(),r();var UU=class{u_t(){return this.Mvt}Lvt(){return this.F_t}Bvt(){return this.W_t}Ovt(){return this.Z_t}Fvt(){return this.G_t}constructor(t,e,i,s,n){this.Mvt=t,this.F_t=e,this.W_t=i,this.Z_t=s,this.G_t=n}},GU=class{Vvt(t,e,i,s,n,r,o){this.rZ=t,this.Wvt=e,this.Uvt=i,this.Gvt=s,this.Hvt=n,this.Zvt=r,this.Xvt=o}zvt(){this.qvt=[];for(let t=0;t<ZU;t++)this.qvt.push(this.Yvt())}Yvt(){const t=[];for(let e=0;e<HU;e++)t.push(null);return t}Kvt(t){this.jvt()&&(this.qvt[this.x_t][this.Qvt]=new UU(t,this.F_t,this.W_t,this.Z_t,this.G_t),this.Qvt++)}Jvt(){this.jvt()&&(this.Qvt<=0&&this.x_t<=0||(this.Qvt<=0?(this.Qvt=this.Xvt-1,this.x_t--):this.Qvt--,this.qvt[this.x_t][this.Qvt]=null))}jvt(){const t=this.x_t<this.Zvt&&this.x_t>=0,e=this.Qvt<this.Xvt&&this.Qvt>=0;return t&&e}$vt(){return this.rZ}tmt(t){let e=0;for(let i=t;i<ZU;i++,e++)this.qvt[e]=this.qvt[i];for(let i=0;i<t;i++,e++)this.qvt[e]=this.Yvt()}emt(){if(this.x_t+1>=this.Zvt)return this.tmt(1),void(this.Qvt=0);this.x_t++,this.Qvt=0}imt(){this.qvt[this.x_t]=this.Yvt(),this.Qvt=0}b_t(t,e){if(this.YO>=t)return null;const i=EU.a_t(this.qvt,this.YO,t);return i?(this.smt(t),{BO:i,Pk:"svc"+e,k_t:e}):null}nmt(t,e){this.x_t=t,this.Qvt=e}omt(t){this.Z_t=t}hmt(t){this.G_t=t}amt(t){this.F_t=t}umt(t){this.W_t=t}cmt(){this.x_t=0,this.Qvt=0,this.F_t=!1,this.W_t=!1,this.G_t=RU,this.Z_t=xU}lmt(t){this.dmt=t}fmt(){this.rZ=!0}be(){this.rZ=!1}Ch(){this.rZ=!this.rZ}smt(t){this.YO=t}constructor(t){this._mt=t,this.rZ=!1,this.Hvt=!1,this.Uvt=0,this.Wvt=0,this.Gvt=0,this.Zvt=0,this.Xvt=0,this.dmt=2,this.qvt=[],this.YO=0,this.x_t=0,this.Qvt=0,this.W_t=!1,this.F_t=!1,this.G_t=RU,this.Z_t=xU,this.zvt()}},HU=42,ZU=15,XU=class{vmt(t){const e=t.mmt();let i=e.Dx;const s=e.lvt;if(i===jU){i=i<<16|t.mmt().Dx}return i>=0&&i<=31?this.gmt(i,s):i>=128&&i<=159?this.pmt(t,i,s):(i>=4096&&i<=4127?this.wmt(t,255&i):i>=4224&&i<=4255?this.ymt(t,255&i):i>=32&&i<=127?this.bmt(i):i>=160&&i<=255?this.Amt(i):i>=4128&&i<=4223?this.Smt(255&i):i>=4256&&i<=4351&&this.Tmt(255&i),null)}bmt(t){this.kmt&&(127!==t?this.kmt.Kvt(String.fromCharCode(t)):this.kmt.Kvt("\u266a"))}Amt(t){this.kmt&&this.kmt.Kvt(String.fromCharCode(t))}Smt(t){if(!this.kmt)return;if(void 0===QU[t])return void this.kmt.Kvt("_");const e=QU[t];this.kmt.Kvt(e)}Tmt(t){this.kmt&&(160===t?this.kmt.Kvt("[CC]"):this.kmt.Kvt("_"))}gmt(t,e){if(!this.kmt)return null;const i=this.kmt;let s=null;switch(t){case zU:i.Jvt();break;case YU:i.$vt()&&(s=i.b_t(e,this.Emt)),i.emt();break;case KU:i.$vt()&&(s=i.b_t(e,this.Emt)),i.imt();break;case qU:i.$vt()&&(s=i.b_t(e,this.Emt)),i.zvt(),i.nmt(0,0)}return s}pmt(t,e,i){if(e>=128&&e<=135){const t=7&e;this.xmt(t)}else{if(136===e){const e=t.mmt().Dx;return this.Rmt(e,i)}if(137===e){const e=t.mmt().Dx;this.Imt(e,i)}else{if(138===e){const e=t.mmt().Dx;return this.Cmt(e,i)}if(139===e){const e=t.mmt().Dx;return this.Pmt(e,i)}if(140===e){const e=t.mmt().Dx;return this.Dmt(e,i)}if(143===e)return this.er(i);if(144===e)this.Nmt(t);else if(145===e)this.Mmt(t);else if(146===e)this.nmt(t);else if(151===e)this.Lmt(t);else if(e>=152&&e<=159){const s=(15&e)-8;this.Vvt(t,s,i)}}}return null}wmt(t,e){e>=8&&e<=15?t.DD(1):e>=16&&e<=23?t.DD(2):e>=24&&e<=31&&t.DD(3)}ymt(t,e){e>=128&&e<=135?t.DD(4):e>=136&&e<=143&&t.DD(5)}xmt(t){this.Bmt[t]&&(this.kmt=this.Bmt[t])}*Omt(t){for(let e=0;e<8;e++){1==(1&t)&&this.Bmt[e]&&(yield e),t>>=1}}Rmt(t,e){let i=null;for(const s of this.Omt(t)){const t=this.Bmt[s];t.$vt()&&(i=t.b_t(e,this.Emt)),t.zvt()}return i}Imt(t,e){for(const i of this.Omt(t)){const t=this.Bmt[i];t.$vt()||t.smt(e),t.fmt()}}Cmt(t,e){let i=null;for(const s of this.Omt(t)){const t=this.Bmt[s];t.$vt()&&(i=t.b_t(e,this.Emt)),t.be()}return i}Pmt(t,e){let i=null;for(const s of this.Omt(t)){const t=this.Bmt[s];t.$vt()?i=t.b_t(e,this.Emt):t.smt(e),t.Ch()}return i}Dmt(t,e){let i=null;for(const s of this.Omt(t)){const t=this.Bmt[s];t.$vt()&&(i=t.b_t(e,this.Emt)),this.Bmt[s]=void 0}return i}er(t){const e=this.Dmt(255,t);return this.Bb(),e}Bb(){this.kmt=void 0,this.Bmt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}Nmt(t){t.DD(1);const e=t.mmt().Dx;if(!this.kmt)return;const i=(128&e)>0,s=(64&e)>0;this.kmt.umt(i),this.kmt.amt(s)}Mmt(t){const e=t.mmt().Dx,i=t.mmt().Dx;if(t.DD(1),!this.kmt)return;const s=3&e,n=(12&e)>>2,r=(48&e)>>4,o=3&i,h=(12&i)>>2,a=(48&i)>>4,u=this.Fmt(r,n,s),c=this.Fmt(a,h,o);this.kmt.hmt(u),this.kmt.omt(c)}nmt(t){const e=t.mmt().Dx,i=t.mmt().Dx;if(!this.kmt)return;const s=15&e,n=63&i;this.kmt.nmt(s,n)}Lmt(t){t.DD(1),t.DD(1);const e=t.mmt().Dx;if(t.DD(1),!this.kmt)return;const i=3&e;this.kmt.lmt(i)}Vvt(t,e,i){const s=void 0!==this.Bmt[e];if(!s){const t=new GU(e);t.smt(i),this.Bmt[e]=t}const n=t.mmt().Dx,r=t.mmt().Dx,o=t.mmt().Dx,h=t.mmt().Dx,a=t.mmt().Dx,u=t.mmt().Dx,c=(32&n)>0,l=127&r,d=(128&r)>0,f=o,_=1+(15&h),v=(240&h)>>4,m=1+(63&a);s&&0===(7&u)||this.Bmt[e].cmt(),this.Bmt[e].Vvt(c,l,f,v,d,_,m),this.kmt=this.Bmt[e]}Fmt(t,e,i){const s={0:0,1:0,2:1,3:1};return JU[s[t]<<2|s[e]<<1|s[i]]}constructor(t){this.Emt=t,this.Bmt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.kmt=void 0}},zU=8,qU=12,YU=13,KU=14,jU=16,QU={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},JU=["black","blue","green","cyan","red","magenta","yellow","white"];r();var $U=class{Vmt(t){if(t.Aw===Pu.xft){const e=63&t.Dx;return this.Wmt=2*e-1,void(this.Umt=[])}if(this.Umt&&(this.Wmt>0&&(this.Umt.push(t),this.Wmt--),0===this.Wmt)){const t=new tG(this.Umt);this.Gmt.push(t),this.Umt=null,this.Wmt=0}}Hmt(){return this.Gmt}Zmt(){this.Gmt=[]}Bb(){this.Gmt=[],this.Umt=[],this.Wmt=0}constructor(){this.Gmt=[],this.Umt=null,this.Wmt=0}},tG=class{Xmt(){return this.zmt<this.qmt.length}Ymt(){return this.zmt}mmt(){if(!this.Xmt())throw new A(Qa.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.qmt[this.zmt++]}DD(t){if(this.zmt+t>this.qmt.length)throw new A(Qa.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.zmt+=t}constructor(t){this.zmt=0,this.qmt=t}},eG=class{Bb(){this.Kmt=0,this.jmt=[],this.Qmt=[],this.Jmt.Bb(),this.er(),this.$mt.forEach((t=>{t.Bb()}))}er(){this.tgt=0,this.egt=0,this.igt.forEach((t=>{t.er()}))}sgt(t,e){if(t.Cft){const i=t.Dft,s=t.Nft,n=t.Aw;n===Pu.Tft||n===Pu.kft?this.jmt.push({lvt:e,Aw:n,Evt:i,cvt:s,ngt:this.jmt.length}):this.rgt&&(this.Qmt.push({lvt:e,Aw:n,Dx:i,ngt:this.Qmt.length}),this.Qmt.push({lvt:e,Aw:Pu.Eft,Dx:s,ngt:this.Qmt.length}))}}qz(){const t=[];this.jmt.sort(((t,e)=>t.lvt-e.lvt||t.ngt-e.ngt)),this.Qmt.sort(((t,e)=>t.lvt-e.lvt||t.ngt-e.ngt));for(const e of this.jmt){const i=this.ogt(e);i&&t.push(i)}for(const t of this.Qmt)this.Jmt.Vmt(t);const e=this.Jmt.Hmt();for(const i of e){const e=this.hgt(i);t.push(...e)}return this.Jmt.Zmt(),this.jmt=[],this.Qmt=[],t}ogt(t){const e=t.Aw;if(OU.Nvt(t.Evt)){const i=t.Evt>>3&1;0===e?this.tgt=i:this.egt=i}const i="CC"+(e<<1|(e?this.egt:this.tgt)+1),s=this.igt.get(i);return 255===t.Evt&&255===t.cvt||!t.Evt&&!t.cvt||!this.agt(t.Evt)||!this.agt(t.cvt)?(++this.Kmt>=45&&this.er(),null):(this.Kmt=0,t.Evt&=127,t.cvt&=127,t.Evt||t.cvt?OU.Nvt(t.Evt)?s.kvt(t):s.Svt(t.lvt,t.Evt,t.cvt):null)}hgt(t){const e=[];try{for(;t.Xmt();){const i=t.mmt().Dx;let s=(224&i)>>5;const n=31&i;if(7===s&&0!==n){s=63&t.mmt().Dx}if(0!==s){if(!this.$mt.has(s)){const t=new XU(s);this.$mt.set(s,t)}const i=this.$mt.get(s),r=t.Ymt();for(;t.Ymt()-r<n;){const s=i.vmt(t);s&&e.push(s)}}}}catch(t){if(!(t instanceof A&&t.code===Qa.SUBTITLE_PARSE_ERROR))throw t}return e}agt(t){let e=0;for(;t;)e^=1&t,t>>=1;return 1===e}constructor(){this.rgt=!1,this.jmt=[],this.Qmt=[],this.Jmt=new $U,this.Kmt=0,this.igt=Kv({CC1:new OU(0,0),CC2:new OU(0,1),CC3:new OU(1,0),CC4:new OU(1,1)}),this.tgt=0,this.egt=0,this.$mt=ea(),this.er()}};r();var iG=class extends pe{constructor(t,e){super("ugt"),this.k_t=t,this.BO=e}},sG=Oo.fV(.1),nG=class extends Co{cgt(t,e){this.lgt.sgt(t,e)}qz(){const t=this.lgt.qz();for(const e of t)this.wo(new iG(e.k_t,e.BO))}er(){this.lgt.Bb()}gn(){this.$o(),this.lgt.Bb()}constructor(){super(),this.lgt=new eG}},rG=class extends nG{dgt(t,e,i,s){const n=this.fgt(t,s);this._gt(n,e,i),this.qz()}fgt(t,e){const i=t.slice().sort(IO),s=this.vgt;if(0===s.length)return i;if(0===i.length)return s;let n;const r=s[0].Utt,o=s[s.length-1].Utt,h=i[0].Utt,a=s[0].aat===i[0].aat;if(o.SF(h).yF().wF(Oo.fV(2.5*e))&&a)n=s.concat(i).sort(IO);else if(h.vF(r)){let t=0;for(;t<s.length&&s[t].Utt.wF(h);)t++;let e=!1,r=!1;for(let n=t,o=0;n<s.length&&o<i.length;n++,o++)oG(s[n],i[o])?e=!0:r=!0;const o=e&&!r,a=e&&r;!e&&r?n=s.concat(i).sort(IO):o?n=s.slice(0,t).concat(i):(n=i,a&&this.er())}else n=i,this.er();return n}_gt(t,e,i){for(let s=0;s<t.length;s++){const n=t[s],r=n.Utt.dF();if(!i&&e-r<sG.dF())return void(this.vgt=t.slice(s));this.cgt(n,r)}this.vgt=[]}constructor(...t){super(...t),this.vgt=[]}};function oG(t,e){return t.Utt.eF(e.Utt)&&t.Aw===e.Aw&&t.Dft===e.Dft&&t.Nft===e.Nft}var _l=class extends xx{mgt(t){return this.ggt.get(t)}pgt(t){let e=this.ggt.get(t.Gtt);return e||(e=this.wgt(t),this.ggt.set(t.Gtt,e)),e}wgt(t){const e=[ln.yC],i=dU(t.Htt);let s=i?i.l:"";t.ygt&&(s="easy "+s,e.push(ln.TC));const n=t.xh||s||"CC"+t.Gtt,r=this.uW.LI(hs.QV,n,n,t.Htt,!1,Lr.CEA608,void 0,e);return this.tt(r),r}Mot(t){const e=rr.jD(ra(t));this.bgt=function(t){for(const e of t.Z){const t=gU(e),i=e.yN.DN.LN.ON.VN;let s=Fo(i,(t=>t.Aw===Tt.RP));if(!s){const t=i.filter((t=>t.Aw===Tt.sD)),e=Fo(t,(t=>{var e;return(null==(e=t.PM)?void 0:e.Aw)===Tt.RP}));e&&(s=e.PM)}if(!s)continue;const n=SN(ra(s.pM.qk),new Ri),r=s.yM;return Bo({},t,{TN:e.HD.TN,pM:ep(s.pM.qk),ji:s.ji,Ti:s.Ti,zM:r&&r.zM,XM:r&&r.XM,O1:n.g0,Agt:n.p0,F1:n.w0,b0:n.b0[0],A0:n.A0[0]})}}(Fo(e,pU))}vdt(t,e,i,s,n,r){var o;if(!this.bgt)return;if(!S(this.Sgt)&&xs(this.Sgt,e,1e-5))return;S(this.Tgt)||xs(this.Tgt,e,.1)||this.kgt.er();const h=function(t,e,i,s,n){const r=[],o=e.filter(vU),h=s(i);for(const e of o){const s=Fo(e.Z,(t=>t.HD.TN===i.TN));if(!s)continue;const o=s.HD.KM||0,u=s.HD.jM||0;let c=s.oL?s.oL.oL:vo.ZERO;var a;const l=e.tL+(null!=(a=s.HD.hL)?a:vo.ZERO).toNumber();for(const a of s.rL){let s=l+(a.tL||0);for(const l of a.dL){const a=l.Pb||u,d=new kN;d.E0(t,s,s+a);const f=Oo.xF(c,i.Lft);d.XV=n(l,e,i,f,Uc(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||o||h)}}}return r}(t,rr.jD(ra(t)),this.bgt,_U,mU);var a;const u=null!=(a=null==(o=jm(h,(t=>t.XV.ct)))?void 0:o.XV.ct)?a:0,c=function(t){const e=[];for(const i of t)i.XV.Zft&&e.push(...i.XV.Zft),delete i.XV.Zft;for(let t=0;t<e.length;t+=1)e[t].eL=t;return e}(h),l=Oo.fV(s),d=[];for(const t of c)d.push(Bo({},t,{aat:n,Utt:t.Rft.SO(l)}));this.kgt.dgt(d,i,r,u),this.Sgt=e,this.Tgt=i}er(){return this.kgt.er(),this.ggt.forEach((t=>{t.gn(),this.it(t),this.uW._W(t)})),this.ggt.clear(),this.bgt=void 0,this.Sgt=NaN,this.Tgt=NaN,super.er()}gn(){return this.kgt.fn("ugt",this.Egt),this.kgt.gn(),super.gn()}constructor(t){super(),this.bgt=void 0,this.Sgt=NaN,this.Tgt=NaN,this.Egt=t=>{const e=this.pgt({Gtt:t.k_t,Htt:""}),i=t.BO;for(const t of e.L.uC)i.FO<t.FO&&i.VO>t.FO?i.VO=t.FO:i.FO>t.FO&&t.VO>i.FO?t.VO=i.FO:i.FO===t.FO&&(i.VO=t.VO);e.dW(i)},this.uW=t,this.ggt=ea(),this.kgt=new rG,this.kgt.yn("ugt",this.Egt)}};r(),r();var hG=/(.*)=(.*)/,aG=/(.*):(.*)/;function uG(t){if(!t)return[];const e=[],i=t.trim().split(";");for(const t of i){const i=t.match(hG);if(i){const[,t,s]=i;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(aG)){const[,e,i]=t.match(aG);switch(e){case"lang":n=i;break;case"er":r=Boolean(Number(i))}}e.push({Gtt:Number(t),Htt:n,ygt:r})}}return e}var cG={1:1,2:3,3:2,4:4},lG="urn:scte:dash:cc:cea-608:2015",dG="urn:scte:dash:cc:cea-708:2015";r(),r();var fG=class extends Ds{ba(){return new _G(this.aat&&this.aat.ka)}constructor(t,e,i){super(No.rC),this.aat=t,this.dct=e,this.xgt=i}},_G=class extends pe{constructor(t){super("activequalitychanged"),this.quality=t}},vG=[Ti.ro,tl.tC,Ti.sb],mG=class extends Co{Rgt(t){const e=this.Ydt.mat;for(const i of e.Ht.Zat)if(e.Nct.Ict(t,i))return i}gn(){this.$o(),this.FB.fn(vG,this.Igt)}constructor(t,e){super(),this.Igt=t=>{const e=this.Cgt,i=this.Rgt(t.currentTime)||this.Ydt.dat;i&&e!==i&&(this.Cgt=i,i.aat&&this.wo(new fG(i.aat,null==i?void 0:i.ka,null==e?void 0:e.ka)))},this.FB=t,this.FB.yn(vG,this.Igt),this.Ydt=e}};function gG(t,e,i){const s=new GS(ra(t),new Ri),n=Mi.UD(s,Tt.vP);if(!n)return;const r=Mi.LD(n.qk),o=Fo(r,(t=>t.Aw===Tt.gP)),h=Fo(r,(t=>t.Aw===Tt.dD));if(!o)return;const a=Mi.UD(o.qk,Tt.wP);if(!a)return;const u=Mi.UD(a.qk,Tt.AP);if(!u)return;const c=Mi.UD(u.qk,Tt.SP);if(!c)return;const l=Mi.LD(c.qk),d=Fo(l,(t=>t.Aw===Tt.TP));if(!d)return;const f=Mi.qD(d.qk,Tt.TP,!1),_=new GS(ra(f.qk),new Ri);_.DD(4);const v=Mi.LD(_),m=[];for(const t of v){if(t.Aw===Tt.iD||t.Aw===Tt.sD)return;t.Aw===Tt.RP?m.push({Pgt:t,Dgt:Tt.sD}):t.Aw===Tt.KP&&m.push({Pgt:t,Dgt:Tt.iD})}if(!function(t,e){return void 0===t&&void 0!==e&&e.length>0}(h,e)&&0===m.length)return;let g=kc(t);const p=Fo(r,(t=>t.Aw===Tt.EP)),w=p?Mi.UD(p.qk,Tt.xP):void 0,y=w?function(t){const e=t.qk.xb();return e.DD(4),e.DD(4),e.TD()}(w):1,b=Fo(l,(t=>t.Aw===Tt.kP));b&&function(t,e,i){const s=yG(ra(t),e),n=Mi.WD(s,new Ri),r=n.qk;r.DD(4);const o=r.TD();for(let t=0;t<o;t++){r.DD(4),r.DD(4);const t=r.yD.xb(),e=r.TD();Og(r.qk,t,e+i)}}(g,b,m.length),w&&function(t,e,i){const s=yG(ra(t),e),n=Mi.WD(s,new Ri),r=n.qk;r.DD(4),r.DD(4),Og(r.qk,r.yD,i)}(g,w,1),g=function(t,e,i,s){if(i||!s)return t;let n=t;for(const t of s)n=pG(n,e,new j(t));return n}(g,n,h,e);const A=[n,o,a,u,c,d];for(let t=m.length-1;t>=0;t--){const e=m[t];g=wG(g,e.Pgt,d,A,e.Dgt,i)}return{Ngt:g,Mgt:{Lgt:m.length,YM:y}}}function pG(t,e,i){const s=hp(t,i,e.qk.qk.byteOffset+e.qk.qk.byteLength);return bG(yG(ra(s),e),i.byteLength),s}function wG(t,e,i,s,n,r){const o=function(t,e,i){0;const s=t.qk.qk,n=EG(),r=new j(s.byteLength+n.byteLength),o=ra(r);r.set(Rh(s),0),bG(o,n.byteLength),Gg(o,new Ri(IG),e),r.set(n,s.byteLength),Gg(o,new Ri(s.byteLength+xG),t.Aw),i&&Dg(o,new Ri(s.byteLength+RG),i);return r}(e,n,r),h=hp(t,o,e.qk.qk.byteOffset),a=ra(h);!function(t,e){const i=Mi.WD(t,new Ri),s=Mi.qD(i.qk,Tt.TP,!1),n=ra(s.qk),r=n.getUint32(0);n.setUint32(0,r+e)}(yG(a,i),1);for(const t of s)bG(yG(a,t),o.byteLength);return h}function yG(t,e){const i=e.qk.qk.byteOffset;return mu(t,i,i+e.qk.qk.byteLength)}function bG(t,e){const i=new Ri,s=as(t,i);if(0===s);else if(1===s){i.kb(4);const s=Yr(t,i.xb());Fg(t,i,s.add(e))}else i.Eb(0),Og(t,i,s+e)}r();var AG=class extends po{start(t){this.BQ=t}transform(t){this.r$(t),this.Bgt()}flush(){this.h$(),this.Bgt()}v$(t){return t===Tt.nD}g$(t){let e=kc(Rh(t.qk.qk));const i=Mi.WD(ra(e),new Ri);e=SG(e,i,this.Ogt),this.Fgt.push(e)}w$(t){this.Fgt.push(t)}Bgt(){for(const t of function(t){if(t.length<2)return t;const e=[];let{buffer:i,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const o=t[r];i===o.buffer&&s+n===o.byteOffset?n+=o.byteLength:(e.push(new j(i,s,n)),({buffer:i,byteOffset:s,byteLength:n}=o))}return e.push(new j(i,s,n)),e}(this.Fgt))this.BQ.enqueue(t);En(this.Fgt)}constructor(t){super(),this.Fgt=[],this.Ogt=t}};function SG(t,e,i){let s=t;const n=Mi.LD(e.qk);for(let t=n.length-1;t>=0;t--){const r=n[t];r.Aw===Tt.oD&&(s=TG(s,r,e,i))}return s}function TG(t,e,i,s){const n=yG(ra(t),e),r=Mi.WD(n,new Ri),o=Mi.LD(r.qk),h=Fo(o,(t=>t.Aw===Tt.hD));if(!h)return t;const a=h.qk,u=a.yD.xb(),c=a.TD(),{flags:l}=zS(c);a.DD(4),l.Rb(Zh.BASE_DATA_OFFSET_PRESENT)&&a.DD(8);const d=a.yD.xb();if(l.Rb(Zh.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const e=as(a.qk,d);return Og(a.qk,a.yD,e+s.Lgt),t}{Og(a.qk,u,c|Zh.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new j(4);ra(n).setUint32(0,s.YM+s.Lgt);const r=a.qk.byteOffset+d.ec;for(const t of o.filter((t=>t.Aw===Tt.aD)))kG(t,n.byteLength);for(const s of[h,e,i])bG(yG(ra(t),s),n.byteLength);return hp(t,n,r)}}function kG(t,e){const i=t.qk,s=i.TD(),{flags:n}=zS(s);if(i.DD(4),n.Rb(Th.DATA_OFFSET_PRESENT)){const t=i.xb().TD();Og(i.qk,i.yD,t+e)}}var EG=yl((()=>new j([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),xG=16,RG=64,IG=4,CG=[yo.da,Ti.Qy,Ti.Jy,Ti.eb,Ti.wy],PG=class extends Co{get Gdt(){return this.Hdt}get o(){return this.ZS}get h3(){return this.a3}get nt(){return this.Vgt}get Jdt(){return function(t){const e=29.97,i=1024,s=44100;return t===ee.fE?s/i:e}(this.a3)}get Kdt(){return 1/this.Jdt}get Rt(){return Boolean(this.Hdt&&this.Hdt.Rt)}get BJ(){const t=this.Ydt?this.Ydt.mat.BJ.Tct:se.mB();return this.Wgt().JL(t)}get gR(){let t=this.Ugt();const e=this.Ggt;return void 0!==e&&t.zL().kr(e)&&(t=t.JL(se._B(e))),t}get wct(){return DV(this.Ugt(),this.BJ.JL(this.Hgt)).QL(2*this.Kdt)}get Hgt(){const t=this.Ggt;if(t&&isFinite(t)){const e=this.Zgt.jn;if(isFinite(e)&&t<e)return new se([t,e],[!1,!0])}return se.mB()}get rI(){const t=this.Hdt;if(!t)return se._B(0);const e=t._ct.tft,i=t._ct.eft;if(void 0===i||void 0===e)return se._B(0);const s=i;let n=e>=t._ct.Qct.jn?_.max(e,this.jn):e;return n=_.max(s,n),se.vB(s,n).zL()}get HG(){return this.wct.dB(this.SR)}get Sct(){return this.Zgt.Sct}get SR(){return this.FB.SR}get Cn(){return this.Hdt?this.Hdt._ct.Qct.Cn:NaN}get jn(){const t=this.Xgt(),e=this.Ggt;return void 0===t?NaN:void 0!==e?e:t}Xgt(){var t;return null==(t=this.Hdt)?void 0:t._ct.Qct.jn}get Ti(){return this.Zgt.Ti}get ji(){return this.Zgt.ji}get zgt(){return this.Ggt}Cat(){return void 0!==this.Ydt&&this.Ydt.Cat}Act(){if(void 0===this.Ggt)return!1;const t=this.Ugt().zL(),e=t.eB(this.Ggt);return!(e<0)&&t.Cn(e)!==this.Ggt}r3(){const t=this.Zgt.Sct,e=this.Ugt().Sn(t);this.Ggt=e.V>0?e.jn(e.V-1):0;const i=t.jn(0);isFinite(i)&&this.Ggt<i&&this.FJ(this.Ggt,i),this.qgt()}async vdt(t,e,i,s){const n=i.Bot.MV,r=this.Ygt(t,e,i,n,s),o=this.Kgt(t,e,i,n,s),[h]=await Rs([o,r]);return h}async Ygt(t,e,i,s,n){if(!Gh(i.Yq))return;let r;if(t.Aw===Ce.bk){const e=t.qk.Mut(),i=await e.Ck(n);r=new j(i)}else r=new j(t.qk.dht);const o=[];if(void 0!==this.jgt&&(this.jgt.vdt(r,e.FO,s),o.push(this.jgt)),void 0!==this.Qgt){const t=i.jct(e);this.Qgt.vdt(r,e.FO,e.VO,s,i.aat,t),o.push(this.Qgt)}Ex(this.gR,o)}async Kgt(t,e,i,s,n){var r;let o;if(J(n),t.Aw===Ce.bk){let e=t.qk.Pk;this.Jgt&&(e=function(t,e){return t.pipeThrough(new qo(new AG(e)))}(e,this.Jgt)),o={Aw:Ce.bk,qk:e}}else{let e=new j(t.qk.dht);this.Jgt&&(e=function(t,e){let i=kc(t);const s=new GS(ra(i),new Ri),n=Mi.LD(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.Aw===Tt.nD&&(i=SG(i,s,e))}return i}(e,this.Jgt)),o={Aw:Ce.tJ,qk:e}}const h={cit:e.FO,ct:e.ct,MV:s,F1:null==(r=i.aat)?void 0:r.xC},a=this.Aot.gR;await this.$gt(),await this.Aot._2(o,h,n);return function(t,e,i,s){let n,r,o=e.tB(t.zL());o=o.tB(i.tB(e)),!1;0===o.V?(n=s.VO,r=n):(n=o.Cn(0),r=o.jn(0));return{sdt:n,ndt:r}}(a,this.Aot.gR,this.Aot.u3,e)}async Mot(t,e,i){var s;J(i),this.Qgt&&this.Qgt.Mot(new j(t.dht));let n=new j(t.dht);if(this.tpt(e)){const t=this.Zgt.ept;let e,i=[];t&&(i=Qe(t.ipt,(t=>t.EG)),e=t.spt.oU?cP(t.spt.oU):void 0);const s=gG(n,i,e);s?(this.Jgt=s.Mgt,n=s.Ngt):this.Jgt=void 0}const r={Aw:Ce.tJ,qk:n};await this.$gt(),await this.Aot.w2(r,{F1:null==(s=e.aat)?void 0:s.xC},i)}_dt(t,e,i){return this.Aot.$S(t,e,i)}FJ(t,e){this.Aot.f3(t,e)}VJ(t,e){this.Aot._3(t,e)}Ugt(){return this.Aot?this.Aot.gR:se.mB()}Wgt(){return this.Aot?this.Aot.u3:se.mB()}npt(){return this.Aot?this.Aot.$S(0,1/0):Promise.resolve()}rpt(){return this.Aot&&(this.Aot.fn(ue.JQ,this.Ds),this.Aot=void 0),Promise.resolve()}async opt(t){var e;const i=Kh.Rlt(null!=(e=t.Ndt)?e:t.Zat,this.wlt).Yq;this.Aot||(this.Aot=this.Zgt.hpt(i),this.Aot.yn(ue.JQ,this.Ds),this.Elt=new WW(this.Aot)),await this.$gt()}Dn(t,e){const i=da.Qw([e]);this.fW.Yw(),this.fW=i;const s=this.upt(t,this.cpt,i.Vw);return this.cpt=s,s}lpt(t){if(ms(this.dpt,Lr.CEA608))return;const e=t._ct.ydt;if(function(t){return t.some((t=>t.i9===lG||t.i9===dG))}(e)){this.Qgt=new _l(this.uW);const t=function(t){const e=[];for(const i of t)if(i.i9===lG){const t=PO(i.Dx);for(const i of t)e.push(i)}else if(i.i9===dG){const t=uG(i.Dx);for(const i of t)if(i.Gtt<=4){const t=cG[i.Gtt];e.push(Bo({},i,{Gtt:t}))}}return e}(e);for(const e of t)this.Qgt.pgt(e);this.Vgt.DG(this.Qgt.Z)}}async upt(t,e,i){J(i),e&&await e.catch(It),this.Hdt===t&&this.fpt||(await this._pt(),J(i),await this.npt(),J(i),t&&await this.cW(t))}async _pt(){const t=this.Hdt;this.Hdt=void 0,this.fpt=!1,this.Ggt=void 0,t&&(t.fn(No.hC,this.vpt),t.Wdt(!1),t.fn(No.NO_QUALITY,this.Ds)),this.mpt&&(this.mpt.gn(),this.mpt=void 0),this.Ydt&&(await this.Ydt.gn(),this.Ydt=void 0),this.Qgt&&(this.Vgt.BG(this.Qgt.Z),await this.Qgt.gn())}async cW(t){this.Hdt=t,this.lpt(t),t.yn(No.hC,this.vpt),t.yn(No.NO_QUALITY,this.Ds),await this.opt(t),this.Ydt=this.gpt(t),this.Ydt.yn(CG,this.Ds),this.Ydt.yn("uat",this.qgt),this.Ydt.pat=t.Ndt,this.mpt=new mG(this.FB,this.Ydt),this.mpt.yn(No.rC,this.Rdt),t.Wdt(!0),this.fpt=!0}gpt(t){return new VW(this,this.FB,this.FB,this.lW,this.vZ,this.pdt,this.Fut,this.klt,this.wlt,this.Elt,this.qlt,this.rH).fit(t)}async er(t){this.fW.Yw(),this.cpt&&(await this.cpt.catch(It),this.cpt=void 0),await this._pt(),t||await this.npt(),await this.rpt()}async ppt(){await this._pt()}Edt(t){var e;null==(e=this.Gdt)||e.Edt(t)}async Sdt(t,e){var i,s;await this.Oat(),null==(i=this.Gdt)||i.Sdt(e);const n=null==(s=this.Ydt)?void 0:s.mat.Nct.Ect(t);if(n&&n.V>0)for(let t=0;t<n.V;t++){var r;await(null==(r=this.Aot)?void 0:r.$S(n.Cn(t),n.jn(t)))}await this.Vat()}wpt(t){const e=t.Ht.Ndt;if(void 0===e)return this.ypt(t);if(e.some((t=>this.Elt.cJ(t))))return this.ypt(t);this.wo(new pe("bpt"))}ypt(t){this.Ydt&&this.Hdt&&this.Hdt===t.Ht&&(this.Ydt.pat=this.Hdt.Ndt)}async Oat(t){this.Ydt&&await this.Ydt.Oat(t)}async Vat(t){this.Ydt&&await this.Ydt.Vat(t)}Lj(){const t=this.gR.fB;return this.vZ.Lj(t)}$gt(){const t=this.Zgt.Sct,e=_.max(0,t.Cn(0)-.1),i=t.jn(0)+.01;return this.Aot.B2(e,i)}tpt(t){if(!Gh(t.Yq))return!1;if(this.Zgt.J6)return!0;return void 0!==this.Zgt.ept}Wat(t){if(!mT(this.a3))return;const e=this.Ydt,i=t.Ydt;void 0!==e&&void 0!==i&&e.Wat(i,this.Cn,this.jn)}async gn(t){this.$o();try{await this.er(t),await this.ppt()}catch(t){}}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d){super(),this.Hdt=void 0,this.Ydt=void 0,this.fpt=!1,this.fW=new da,this.cpt=void 0,this.Ggt=void 0,this.Aot=void 0,this.Elt=new UW,this.Jgt=void 0,this.Qgt=void 0,this.Vgt=new Fu([]),this.qgt=()=>{!this.Cat()&&this.Act()&&this.Zgt.qgt()},this.Rdt=t=>{this.Hdt.Rdt(t),this.wo(new nU(t.dct,t.xgt))},this.vpt=t=>{this.wpt(t)},this.ZS=function(){const t=DG;return DG+=1,t}(),this.a3=t,this.lW=s,this.vZ=n,this.Zgt=e,this.FB=i,this.Fut=r,this.uW=o,this.jgt=h,this.klt=a,this.wlt=a?bT(t,a):void 0,this.qlt=u,this.dpt=c,this.pdt=l,this.rH=d}};var DG=0;var NG=class extends Co{Tj(t,e){return this.Apt(t,e)}async Apt(t,e){for(const e of t)this.Spt(e);await this.Dn(e);for(const t of this.kpt.Tpt)t.Aw===ee.Ak&&(t.Zat&&0!==t.Zat.length?await this.Ept.cW(t):this.wo(new eU("No supported representation found in the AdaptationSet with mimetype : "+t.Aw)))}get xC(){return this.xO}get ct(){return this.FB.ct}xpt(t){return new PG(t,this,this.FB,this.lW,this.vZ,this.Fut,this.uW,this.jgt,this.Rpt,this.qlt,this.dpt,this.pdt,this.rH)}Cat(){return this.vft.some((t=>t.Cat()))}Act(){return 0!==this.vft.length&&this.vft.every((t=>t.Act()))}qgt(){this.Ipt()&&this.wo(new sU)}hpt(t){if(Sl(t,"audio")){if(this.U2.J3)return this.U2.J3}else if(Sl(t,"video")&&this.U2.t4)return this.U2.t4;throw new g("Cannot allocate source buffer for mime type "+t)}Cpt(t){t.yn([yo.da,Ti.qy,Ti.Qy,Ti.Jy,Ti.eb,Ti.wy],this.Ds),t.yn(ue.JQ,this.Ppt),t.yn("bpt",this.Ds)}get Rt(){return this.vft.some((t=>t.Rt))}async Dpt(t){await Promise.all(this.vft.map((e=>e.gn(t)))),En(this.vft)}get ht(){return this.aO}get gR(){if(0===this.vft.length)return se.mB();const t=this.vft.map((t=>t.gR));let e=se.vB(0,1/0);for(const i of t)e=e.Sn(i);if(0===e.V)return e;if(this.Act()){const t=e.Sn(this.Sct);if(0===t.V)return e;const i=t.jn(t.V-1);let s=0;for(const t of this.vft)s=_.max(s,t.zgt);i<=s&&(e=e.JL(new se([i,s],[!0,!0])))}return e}get J6(){return this.FB.J6}get SR(){return this.FB.SR}get ept(){return this.Npt}get jn(){if(this.Mpt){const t=this.ct;if(!S(t)&&t!==Hu)return t}if(!this.vft.length)return NaN;let t=0;for(const e of this.vft)t=_.max(t,e.jn);return t}get Mpt(){const t=this.kpt.hdt;if(t.Aw===Me.gW)return!1;const e=t.Lpt;return 0!==e.length&&this.kpt===e[e.length-1]}get rI(){if(!this.vft.length)return se.mB();let t=new se([0,1/0]);for(const e of this.vft)t=t.Sn(e.rI);if(t.V>0&&this.Mpt&&isFinite(this.ct)){const e=this.ct,i=t.jn(t.V-1);e>i&&(t=t.JL(se.vB(i,e).zL()))}return t}get xc(){return this.kpt}get nt(){return this.Ll}get rt(){return this.cO}get ji(){return this._u.ji}get Ti(){return this._u.Ti}get HG(){const t=this.SR,e=this.gR,i=e.eB(t);if(-1!==i)return{Cn:e.Cn(i),jn:e.jn(i)}}get Sct(){const t=this.kpt.Cn,e=this.Mpt?1/0:this.kpt.jn;return se.vB(t,e)}Ipt(){if(this.Cat())return!1;if(!this.Act())return!1;const t=this.gR;if(0===t.V)return!1;const e=this.SR;if(this.Mpt)return t.Cn(t.V-1)<=e;{const i=t.Sn(this.Sct);if(0===i.V)return!0;const s=i.Cn(i.V-1),n=i.jn(i.V-1)+.1;return s<=e&&e<=n}}get Bpt(){return this.Opt}async Oat(t){this.Opt||(this.Opt=!0,await Promise.all(this.vft.map((e=>e.Oat(t)))))}async Vat(t){this.Opt&&(this.Opt=!1,await Promise.all(this.vft.map((e=>e.Vat(t)))))}async gn(t){this.FB.fn(Ti.hb,this.Fpt),this.FB.fn(Ti.Sy,this.Vpt),this.$o(),this.kpt.fn(ko.nat,this.Ds),this.Wpt.Yw(),this.cpt&&(await this.cpt.catch(It),this.cpt=void 0),await this.Dpt(t),await this.Ept.gn(),this.aO.gn(),this.cO.gn(),this.Ll.gn(),this.Upt()}Spt(t){this.Gpt.push(t),t.yn("Hpt",this.Zpt);const e=t.Aw===ee.fE?this.aO:this.cO;for(const i of t.Z)e.tt(i)}Xpt(t){const e=t.Aw===ee.fE?this.aO:this.cO;for(const i of t.Z)e.it(i),i.gn();t.gn(),we(this.Gpt,t)}Upt(){for(let t=this.Gpt.length-1;t>=0;t--)this.Xpt(this.Gpt[t])}get zpt(){return this.Gpt.map((t=>t.Gdt)).filter(ji)}get qpt(){return this.vft.map((t=>t.Gdt)).filter(ji)}Dn(t,e){return this.Wpt.Yw(),this.Wpt=da.Qw([e]),this.cpt=So(this.KE(t,this.cpt,this.Wpt.Vw),this.Wpt).catch(this.Ypt),this.cpt}async KE(t,e,i){e&&await e.catch(It),J(i);const s=[],n=this.vft.slice(),r=t.slice();En(this.vft);for(const t of n){const e=t.Gdt;e&&ms(r,e)?(this.vft.push(t),s.push(t.Dn(e,i)),we(r,e)):(this.Ll.BG(t.nt),await t.gn(),J(i))}for(const t of r){const e=this.xpt(t.bat);this.Ll.DG(e.nt),this.vft.push(e),this.Cpt(e),s.push(e.Dn(t,i))}await Promise.all(s)}async dJ(t,e,i){this.U2!==i&&(this.U2=i,await this.Dpt(!1)),await this.Dn(t),this.Npt=e}async Kpt(t){for(const e of this.vft){const i=e.Gdt;if(void 0!==i)for(const s of i._ct.Zat){(s.AG||[]).some((e=>e.oU&&_e(ma(t),cP(e.oU))))&&!s.Vdt&&(s.Vdt=!0,await e.Sdt(s,s.aat),this.wo(new Bn(new sr(Qa.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions"))))}}}async jpt(t){for(const e of this.vft){const i=e.Gdt;if(void 0!==i)for(const s of i.Zat){const i=s.AG,n=s.aat;if(void 0===i||0===i.length||void 0===n)continue;const r=this.Qpt(i,t.mb);n.znt!==r&&(r?e.Edt(n):await e.Sdt(s,n))}}}Qpt(t,e){let i=!1;const s=t.reduce(((t,e)=>!e.oU||ms(t,e.oU)?t:[...t,e.oU]),[]);return e.Lb(((n,r)=>{1===s.length&&1===e.Pb&&"usable"===n&&(i=!0);t.some((t=>t.oU&&_e(ma(r),cP(t.oU))))&&"usable"===n&&(i=!0)})),i}Wat(t){if(void 0===t)return;const e=t.kpt;if(this.kpt.Jpt===e||this.kpt.$pt===e)for(const e of this.vft){const i=Fo(t.vft,(t=>t.h3===e.h3));void 0!==i&&e.Wat(i)}}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d,f){var _,v;super(),this.aO=new Nn,this.cO=new Nn,this.Gpt=[],this.Wpt=new da,this.Opt=!0,this.vft=[],this.cpt=void 0,this.Ppt=Qr((()=>{this.wo(new K(this.SR))}),350),this.Zpt=t=>{const e=t.twt.Gdt;if(e)for(const t of this.Gpt){var i;t.Gdt&&t.Gdt!==e&&t.Aw===(null==(i=e.Idt)?void 0:i.Aw)&&(t.fn("Hpt",this.Zpt),t.Gdt.Rt=!1,t.yn("Hpt",this.Zpt))}this.Ds(t)},this.Ypt=t=>{Je(t)||this.wo(new Ga(Qy(t,Qa.MEDIA_LOAD_ERROR)))},this.Fpt=t=>{const e=t.E6;e&&this.Kpt(e).catch(this.Ypt)},this.ewt=t=>{this.jpt(t).catch(this.Ypt)},this.Vpt=t=>{const e=t.E6;if(e)for(const t of this.qpt)for(const i of t._ct.Zat){const s=(i.AG||[]).some((t=>t.oU&&_e(ma(e),cP(t.oU))));i.Vdt&&s&&(i.Vdt=!1,i.aat&&t.Edt(i.aat))}},this.lW=i,this.vZ=s,this.Fut=n,this.FB=t,this.xO=oi(),this.Gpt=[],this.kpt=o,this.Npt=h,this.rH=f,this.uW=u,this.Ept=new tU(t,i,s,n,u,null==(v=null==r||null==(_=r.dash)?void 0:_.segmentRelativeVttTiming)||v),this.Ll=new Fu([this.Ept.nt]),this.qlt=l,this.dpt=d,this.kpt.yn(ko.nat,this.Ds),this._u=a,this.U2=e,this.pdt=r.lowLatency,this.jgt=c,this.Rpt=r.abr,this.FB.yn(Ti.hb,this.Fpt),this.FB.yn(Ti.Sy,this.Vpt)}};r(),r(),r();var MG=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,LG=class t{static jD(e){const i=e.match(MG);if(!i)throw new g("The given value could not be parsed as a valid DateTimeInterval");const s=Number(i[1])||0,n=Number(i[2])||0,r=Number(i[3])||0,o=Number(i[4])||0,h=Number(i[5])||0,a=Number(i[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*o+60*h+a)}get Bft(){return Oo.fV(this.iwt,1e3)}swt(){return this.iwt}nwt(){return 1e3*this.iwt}constructor(t){this.iwt=t}};r();var BG=function(t){return t.rwt="progressive",t.owt="interlaced",t.tE="unknown",t}({});r();var OG=class{dF(){return this.hwt/this.awt}constructor(t,e){this.hwt=t,this.awt=e}},FG=/^(?:true|false)$/i,VG=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function WG(t){if(void 0!==t)return LG.jD(t)}function UG(t){if(void 0===t)return;const e=t.match(VG);if(!e)throw new g("The given value could not be parsed as a valid Date");const[,i,s,n,r,o,h,a,u,c,l,d]=e,f=("-"===i?-1:1)*Number(s),v=Number(n)-1,m=Number(r),p=Number(o);let w=Number(h);const y=Number(a),b=Number("0."+(u||"")),A=_.round(1e3*b);if(c){w-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const T=new Date(Date.UTC(f,v,m,p,w,y,A));if(S(T.getTime()))throw new g("The given value could not be parsed as a valid Date");return T}function GG(t){if(!t)return;const e=/(\d+)-(\d+)/.exec(t);return e?[Na(e[1]),Na(e[2])]:void 0}function HG(t){if(void 0!==t){if(!S(Number(t)))try{return vo.fromString(t,!0)}catch(t){}throw new g("The given value could not be parsed as a valid unsigned long")}}function Na(t){if(void 0===t)return;const e=Number(t);if(!S(e))return e;throw new g("The given value could not be parsed as a valid Number")}function ZG(t){if(void 0===t)return;const e=t.split("/"),i=Number(e[0]),s=Number(e[1]||1);if(!S(i)&&!S(s))return new OG(i,s);throw new g("The given value could not be parsed as a valid frame rate")}function $e(t){if(void 0!==t){if(FG.test(t))return"true"===t.toLowerCase();if(!S(x(t)))return Boolean(x(t));throw new g("The given value could not be parsed as a valid Boolean.")}}function XG(t){return{Gu:t.Zx,uwt:$e(t.Xx("availabilityTimeComplete")),cwt:Na(t.Xx("availabilityTimeOffset"))}}function zG(t){return t.map(XG)}function qG(t){const e=sH(t),i=function(t,e,i,s){let n=t.zx(i,e);return void 0===n&&(n=t.Xx(s+":"+e)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=qE(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=ap(n.Zx)),!s){const e=qE(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==e&&(s=function(t){const e=mg(t.Zx),i=new j([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=e.length,n=12+i.length+4+s,r=new ArrayBuffer(n),o=new j(r),h=new DataView(r),a=new Ri;Og(h,a,n),Og(h,a,1886614376),Og(h,a,0),Dg(h,a,i),Og(h,a,s),Dg(h,a,e),!1;return o.buffer}(e))}return{oU:i,s9:s,i9:e.i9,Dx:e.Dx}}function YG(t){return{lwt:t.Xx("sourceURL"),rut:GG(t.Xx("range"))}}function KG(t,e){const i=t.Xx("d"),s=t.Xx("t"),n=Na(t.Xx("r"));e.push({ct:i,FO:s,dwt:n})}function jG(t){return{Hut:t.Xx("index"),fwt:GG(t.Xx("indexRange")),yN:t.Xx("media"),_wt:GG(t.Xx("mediaRange"))}}function QG(t){const e=$G(t),i=function(t){const e=t.map(jG);return e.length>0?e:void 0}(t.Fx("SegmentURL"));return Bo({},e,{vwt:i,mwt:t.Xx("xlink:href"),gwt:t.Xx("xlink:actuate")})}function JG(t){const e=$e(t.Xx("availabilityTimeComplete")),i=Na(t.Xx("availabilityTimeOffset")),s=GG(t.Xx("indexRange")),n=$e(t.Xx("indexRangeExact")),r=t.Fx("Initialization");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.Vx+" element can not have more than one Initialization element.");const o=1===r.length?YG(r[0]):void 0,h=HG(t.Xx("presentationTimeOffset")),a=t.Fx("RepresentationIndex");if(a.length>1)throw new g("The provided MPEG-DASH document's "+t.Vx+" element can not have more than one RepresentationIndex element.");return{uwt:e,cwt:i,fwt:s,pwt:n,wwt:o,ywt:h,bwt:1===a.length?YG(a[0]):void 0,Awt:WG(t.Xx("timeShiftBufferDepth")),_N:Na(t.Xx("timescale"))}}function $G(t){const e=JG(t),i=t.Fx("BitstreamSwitching"),s=i.length>0?YG(i[0]):void 0,n=Na(t.Xx("duration")),r=t.Fx("SegmentTimeline");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.Vx+" element can not have more than one SegmentTimeline element.");const o=1===r.length?function(t){const e=[],i=t.Fx("S");for(const t of i)KG(t,e);return e}(r[0]):void 0;return Bo({},e,{Swt:s,ct:n,Bot:o,Twt:Na(t.Xx("startNumber")),kwt:Na(t.Xx("endNumber"))})}function tH(t){return{Ewt:function(t){if(!t)return;const e=t.split(/\s/);return e.length>1?(e.length=2,e.map(Na)):1===e.length?e.map(Na)[0]:void 0}(t.Xx("audioSamplingRate")),Zrt:t.Xx("codecs"),xwt:$e(t.Xx("codingDependency")),AG:function(t){if(0!==t.length)return t.map(qG)}(t.Fx("ContentProtection")),Rwt:function(t){return t.map(nH)}(t.Fx("EssentialProperty")),Iwt:function(t){return t.map(rH)}(t.Fx("SupplementalProperty")),Jdt:ZG(t.Xx("frameRate")),Ti:Na(t.Xx("height")),Cwt:Na(t.Xx("maxPlayoutRate")),Pwt:Na(t.Xx("maximumSAPPeriod")),Yq:t.Xx("mimeType"),Dwt:t.Xx("profiles"),Nwt:t.Xx("sar"),Mwt:function(t){switch(t){case BG.rwt:case BG.owt:case BG.tE:return t;default:return}}(t.Xx("scanType")),Lwt:t.Xx("segmentProfiles"),Bwt:Na(t.Xx("startWithSAP")),ji:Na(t.Xx("width"))}}function eH(t){const e=zG(t.Fx("BaseURL")),i=t.Fx("SegmentBase");if(i.length>1)throw new g("The provided MPEG-DASH document's "+t.Rx+" element can not have more than one SegmentBase element.");const s=1===i.length?JG(i[0]):void 0,n=function(t){const e=t.map(QG);return e.length>0?e:void 0}(t.Fx("SegmentList")),r=t.Fx("SegmentTemplate");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.Rx+" element can not have more than one SegmentTemplate element.");const o=1===r.length?function(t){return Bo({},$G(t),{Owt:t.Xx("bitstreamSwitching"),Fwt:t.Xx("index"),Vwt:t.Xx("initialization"),Wwt:t.Xx("media")})}(r[0]):void 0;return{Uwt:e,Gwt:s,Hwt:n,Zwt:o}}function iH(t){const e=tH(t),i=eH(t),s=Na(t.Xx("bandwidth")),n=t.Xx("dependencyId"),r=t.Xx("id"),o=t.Xx("mediaStreamStructureId"),h=Na(t.Xx("qualityRanking"));if(t.Fx("SegmentBase").length>1)throw new g("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return Bo({},e,i,{wG:s,Xwt:n,o:r,zwt:o,qwt:h})}function sH(t){return{i9:t.Xx("schemeIdUri"),Dx:t.Xx("value")}}function nH(t){return sH(t)}function rH(t){return sH(t)}function oH(t){return sH(t)}function hH(t){return sH(t)}function aH(t){var e;const i=tH(t),s=eH(t),n=function(t){return t.map(hH)}(t.Fx("Accessibility")),r=$e(t.Xx("bitstreamSwitching")),o=t.Xx("contentType"),h=Na(t.Xx("group")),a=Na(t.Xx("id")),u=(null==(e=t.Fx("Label")[0])?void 0:e.Zx)||"",c=t.Xx("lang"),l=Na(t.Xx("maxBandwidth")),d=ZG(t.Xx("maxFrameRate")),f=Na(t.Xx("maxHeight")),_=Na(t.Xx("maxWidth")),v=Na(t.Xx("minBandwidth")),m=ZG(t.Xx("minFrameRate")),p=Na(t.Xx("minHeight")),w=Na(t.Xx("minWidth")),y=t.Xx("par"),b=function(t){return t.map(iH)}(t.Fx("Representation"));if(0===b.length)throw new g("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const A=function(t){return t.map(oH)}(t.Fx("Role")),S=$e(t.Xx("segmentAlignment"))||!1,T=Na(t.Xx("selectionPriority")),k=T||1,E=$e(t.Xx("subsegmentAlignment"))||!1;let x;try{x=Na(t.Xx("subsegmentStartsWithSAP"))}catch(t){}return Bo({},i,s,{ydt:n,Swt:r,Dk:o,Idt:h,o:a,xh:u,gs:c,Ywt:l,Kwt:d,Qwt:f,Jwt:_,$wt:v,tyt:m,eyt:p,iyt:w,syt:y,Zat:b,hft:A,nyt:S,VH:k,ryt:E,oyt:x,hyt:t.Xx("xlink:actuate")||"onRequest",ayt:t.Xx("xlink:href")})}function uH(t){const e=HG(t.Xx("presentationTime"))||vo.ZERO,i=HG(t.Xx("duration")),s=Na(t.Xx("id")),n=function(t){const e=t.Hx,i={};for(let t=0;t<e.length;t++)i[e[t].l]=e[t].Dx;return i}(t),r=t.Zx;return{vL:e,ct:i,o:s,Hx:n,qk:""!==r.trim()?r:t.Xx("messageData")||""}}function cH(t){return{ayt:t.Xx("xlink:href"),hyt:t.Xx("xlink:actuate"),i9:t.Xx("schemeIdUri"),Dx:t.Xx("value"),_N:Na(t.Xx("timescale")),ywt:HG(t.Xx("presentationTimeOffset")),Kq:t.Fx("Event").map(uH)}}function lH(t){const e=eH(t),i=t.Fx("AssetIdentifier");if(i.length>1)throw new g("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===i.length?function(t){return sH(t)}(i[0]):void 0,n=function(t){return t.map(aH)}(t.Fx("AdaptationSet")),r=$e(t.Xx("bitstreamSwitching")),o=WG(t.Xx("duration")),h=function(t){return t.map(cH)}(t.Fx("EventStream")),a=t.Xx("id"),u=WG(t.Xx("start")),c=(t.Fx("Subset"),t.Xx("xlink:href"));return Bo({},e,{uft:n,uyt:s,Swt:r,ct:o,cyt:h,o:a,Cn:u,hyt:t.Xx("xlink:actuate"),ayt:c})}function dH(t){const e=t.Xx("schemeIdUri");if(!e)return;return{i9:e,Dx:t.Xx("value")}}function fH(t,e){const i=UG(t.Xx("availabilityEndTime")),s=UG(t.Xx("availabilityStartTime")),n=zG(t.Fx("BaseURL")),r=t.Xx("id"),o=function(t){return t.map((t=>""+t.Zx))}(t.Fx("Location")),h=WG(t.Xx("maxSegmentDuration")),a=WG(t.Xx("maxSubsegmentDuration")),u=WG(t.Xx("mediaPresentationDuration")),c=(t.Fx("Metrics"),WG(t.Xx("minBufferTime")));if(!c)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=WG(t.Xx("minimumUpdatePeriod")),d=function(t){return t.map((t=>lH(t)))}(t.Fx("Period"));if(!d.length)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.Xx("profiles");if(!f)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=UG(t.Xx("publishTime")),v=WG(t.Xx("suggestedPresentationDelay")),m=WG(t.Xx("timeShiftBufferDepth")),p=function(t){switch(t){case Me.mW:case Me.gW:return t;default:return}}(t.Xx("type")),w=function(t){const e=[];for(const i of t){const t=dH(i);t&&e.push(t)}return e}(t.Fx("UTCTiming")),y=function(t){if(0===t.length)return;const e=t[0],i=e.Fx("Latency");if(0===i.length)return;const s=function(t){const e=t[0],i=Na(e.Xx("target"));if(void 0===i)return;const s=Na(e.Xx("min")),n=Na(e.Xx("max"));return{lyt:i,aV:s,hV:n}}(i);if(void 0===s)return;const n=function(t){if(0===t.length)return;const e=t[0],i=Na(e.Xx("max")),s=Na(e.Xx("min"));return{aV:s,hV:i}}(e.Fx("PlaybackRate"));return{dyt:s,KR:n}}(t.Fx("ServiceDescription"));return{fyt:i,_yt:s,Uwt:n,o:r,vyt:o,myt:e,gyt:h,pyt:a,wyt:u,yyt:c,byt:l,Lpt:d,Dwt:f,Ayt:_,Syt:v,Awt:m,Aw:p,Tyt:w,kyt:y}}var _H=class{Eyt(t,e){return function(t,e){if(!t)throw new g("The provided MPEG-DASH document does not contain a valid MPD root element.");return fH(t,e)}(Ms.xx(t).Qx,e)}};function vH(t){return{get bandwidth(){return t.wG},get codecs(){return t.Zrt},get id(){return t.o},get uid(){return t.xC},get name(){return t.xh},get averageBandwidth(){return t.xyt},get label(){return t.xh},set label(e){t.xh=ze(e)},get available(){return t.znt},get score(){return t.Ryt},addEventListener(e,i){t.yn(e,i)},removeEventListener(e,i){t.fn(e,i)}}}function xl(t){return nh(vH(t),{get height(){return t.Ti},get width(){return t.ji},get frameRate(){return t.Jdt},get firstFrame(){return t.Iyt}})}function Cl(t){return nh(vH(t),{get audioSamplingRate(){return t.Ewt}})}r(),r(),r(),r(),r(),r(),r(),r();var mH=class extends pe{constructor(t){super("update"),this.quality=t}},gH=class extends Co{get xh(){return this.RO}set xh(t){this.RO!==t&&(this.RO=t,this.wo(new mH(this.ka)))}get xyt(){}get znt(){return this.Cyt}get Ryt(){}oW(){this.Cyt=!1,this.wo(new mH(this.ka))}rW(){this.Cyt=!0,this.wo(new mH(this.ka))}constructor(t,e,i,s,n){super(),this.o=t,this.wG=e,this.Zrt=i,this.Pyt=n,this.xC=bk(),this.RO=s||"",this.Cyt=!0}},pH=class extends gH{get ka(){return this.su||(this.su=xl(this)),this.su}constructor(t,e,i,s,n,r,o,h,a=0){super(t,e,i,s,n),this.Jdt=r,this.ji=o,this.Ti=h,this.Iyt=a,this.su=void 0}},wH=class extends gH{get ka(){return this.su||(this.su=Cl(this)),this.su}constructor(t,e,i,s,n,r){super(t,e,i,s,n),this.Ewt=r,this.su=void 0}};r(),r();var Cu=class extends Co{get Dyt(){const t=this.Nyt();return null==t?void 0:t.Cn}get Myt(){const t=this.Nyt();return null==t?void 0:t.jn}constructor(...t){super(...t),this.Lyt=t=>{this.wo(t)}}},yH=class extends Cu{get _ct(){return this.Lat}get Ewt(){var t;return null!=(t=this.Byt.qk.Ewt)?t:this._ct.Ewt}get wG(){return this.Byt.qk.wG||0}get Zrt(){const t=this.Byt.qk;return t.Zrt?[t.Zrt]:this._ct.Zrt}get Oyt(){const t=this.Byt.qk;return t.Zrt?[t.Zrt]:[]}get vp(){return this.Byt.qk.Zrt||this._ct.vp}get xwt(){return this.Byt.qk.xwt||this._ct.xwt}get AG(){return this.Byt.qk.AG||this._ct.AG}get Dk(){return this.Yq+'; codecs="'+this.vp+'"'}get Rwt(){const t=this.Byt.qk;return t.Rwt.length?t.Rwt:this._ct.Rwt}get ka(){return this.su||(this.su=function(t){return{get id(){return t.o},get type(){return t.Aw},get bandwidth(){return t.wG},get width(){return t.ji},get height(){return t.Ti},get frameRate(){var e,i;return null!=(i=null==(e=t.Jdt)?void 0:e.dF())?i:NaN},get audioSamplingRate(){return t.Ewt}}}(this))}get Jdt(){var t;return null!=(t=this.Byt.qk.Jdt)?t:this._ct.Jdt}get Ti(){return this.Byt.qk.Ti||this._ct.Ti}get o(){return this.Byt.qk.o||""}get ldt(){return this.Fyt}set ldt(t){this.Fyt=t}get cdt(){const t=this.Byt.Vyt();if(t)return{Gu:t.Gu,rut:t.rut,kE:this.hdt.kE}}get Cwt(){return this.Byt.qk.Cwt||this._ct.Cwt||1}get Pwt(){return this.Byt.qk.Pwt||this._ct.Pwt}get hdt(){return this.Qct.hdt}get Yq(){return this.Byt.qk.Yq||this._ct.Yq}get Qct(){return this._ct.Qct}get Dwt(){return this.Byt.qk.Dwt||this._ct.Dwt}get aat(){return this.Wyt}get Nwt(){return this.Byt.qk.Nwt||this._ct.Nwt}get Mwt(){return this.Byt.qk.Mwt||this._ct.Mwt}get Uyt(){return this.Byt.Uyt}get Lwt(){return this.Byt.qk.Lwt||this._ct.Lwt}get Bot(){return this.Byt.Bot}get Bwt(){return this.Byt.qk.Bwt||this._ct.Bwt}get Aw(){const t=this.Yq.split("/")[0];return"application"===t||"text"===t||bx(this.Yq,this.Zrt)?ee.Ak:"video"===t?ee._E:"audio"===t?ee.fE:"image"===t?ee.vE:ee.tE}get ji(){return this.Byt.qk.ji||this._ct.ji}get elt(){return this.Gyt}set elt(t){this.Gyt=t}get Vdt(){return this.Hyt}set Vdt(t){this.Hyt=t}flt(t){const e=Wn(t)?this.Byt.Zyt(t):this.Byt.flt(t);return{Gu:e.Gu,rut:e.rut,kE:this.hdt.kE}}Xyt(){return this.Byt.Xyt()}Nyt(){return this.Byt.Nyt()}zyt(){return this.Byt.zyt()}slt(t){return this.Byt.slt(t)}rlt(t,e,i){return this.Byt.rlt(t,this.hdt.kE,e,i)}Klt(t){return Wn(t)?this.Bot.qyt(t,this.Byt):this.Bot.Klt(t)}jct(t){return Wn(t)?this.Bot.Yyt(t,this.Byt):this.Bot.jct(t)}gn(){this.Byt.fn(ko.iat,this.Lyt)}constructor(t,e){if(super(),this.su=void 0,this.Fyt=void 0,this.Gyt=!1,this.Hyt=!1,this.Lat=t,this.Byt=e,this.Byt.yn(ko.iat,this.Lyt),this.Aw===ee._E){var i,s;const t=null!=(s=null==(i=this.Jdt)?void 0:i.dF())?s:NaN;this.Wyt=new pH(this.o,this.wG,this.vp,"","",t,this.ji,this.Ti)}else this.Aw===ee.fE?this.Wyt=new wH(this.o,this.wG,this.vp,"","",this.Ewt):this.Wyt=void 0}},bH=class extends Cu{get ydt(){return this.Byt.qk.ydt}get Ewt(){var t;return null!=(t=this.Byt.qk.Ewt)?t:-1}get Zrt(){if(this.Byt.qk.Zrt)return[this.Byt.qk.Zrt];{const t=[];for(const e of this.Zat)e.Oyt.length&&-1===t.indexOf(e.vp)&&t.push(e.vp);return t}}get vp(){return this.Zrt.join()}get xwt(){return this.Byt.qk.xwt}get AG(){return this.Byt.qk.AG}get Dk(){return this.Yq+'; codecs="'+this.vp+'"'}get Rwt(){return this.Byt.Rwt}get Iwt(){return this.Byt.Iwt}get Jdt(){return this.Byt.qk.Jdt}get Idt(){return this.Byt.qk.Idt}get Ti(){return this.Byt.qk.Ti||0}get o(){return this.Byt.qk.o}get xh(){return this.Byt.qk.xh||""}get Cwt(){return this.Byt.qk.Cwt}get Pwt(){return this.Byt.qk.Pwt}get hdt(){return this.Qct.hdt}get Yq(){return this.Byt.qk.Yq||this.Mdt[0].Yq}get Qct(){return this.kpt}get Dwt(){return this.Byt.qk.Dwt}get Zat(){return this.Mdt}get hft(){return this.Byt.qk.hft||[]}get Nwt(){return this.Byt.qk.Nwt}get Mwt(){return this.Byt.qk.Mwt}get Lwt(){return this.Byt.qk.Lwt}get VH(){return this.Byt.qk.VH}get Bwt(){return this.Byt.qk.Bwt}get Aw(){const t=(this.Byt.qk.Dk||this.Yq).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||bx(this.Yq,this.Zrt)?ee.Ak:"video"===t?ee._E:"audio"===t?ee.fE:"image"===t?ee.vE:ee.tE}get ji(){return this.Byt.qk.ji||0}get Htt(){return this.Byt.qk.gs||""}get eft(){return this.Dyt}get tft(){const t=this.eft,e=this.Myt;if(void 0===t||void 0===e)return;const i=_.min(e,this.hdt.Kyt);return _.max(t,i)}async tr(t,e){if(0===this.Mdt.length){const i=this.Byt.Zat.map((i=>this.jyt(i,t,e)));this.Mdt=(await Promise.all(i)).filter(ji)}this.Qyt()}async jyt(t,e,i){const s=new yH(this,t),n=await e(s);if(J(i),n)return s}Qyt(){if(!this.Mdt.length)throw new g("Detected an AdaptationSet without any supported Representations.")}Nyt(){return this.Byt.Nyt()}zyt(){return this.Byt.zyt()}gn(){this.Byt.fn(ko.iat,this.Lyt);for(const t of this.Mdt)t.gn();En(this.Mdt)}constructor(t,e){super(),this.Mdt=[],this.kpt=t,this.Byt=e,this.Byt.yn(ko.iat,this.Lyt)}};function AH(t,e){const i=[];for(const s of e)for(const e of t)i.push(Ms.Nh(e,s));return i}r(),r(),r(),r(),r(),r(),r();var jl=class{Jyt(t){const e=t-this.kpt.Cn;if(e<0||e>=this.kpt.ct)return;const i=this.$yt();return void 0!==i&&xs(i,e,1e-5)?this.tbt():this.ebt(e)}ilt(t){const e=t-this.kpt.Cn;if(!(e<0))return this.ibt(_.min(e,this.kpt.ct))}tbt(){return this.sbt(0)}nbt(){const t=this.kpt.ct;if(isFinite(t))return this.ibt(t)}get rbt(){return this.kpt.hbt.obt&&void 0!==this.abt()}Xyt(t){if(this.kpt.hbt.Aw===Me.gW){if(this.rbt){const e=this.tbt(),i=this.abt();if(void 0===e||void 0===i)return;return{ubt:t,cbt:e,lbt:i}}const e=this.dbt(t);if(!e)return;return{ubt:t,cbt:this.fbt(t),lbt:e}}{0;const e=this.tbt();if(e)return{ubt:t,cbt:e,lbt:this.nbt()}}}zyt(t,e){if(e){let t=this.adt(e.cbt);const i=this.clt(e.lbt);if(i){const e=this.udt(i);(!t||e.getTime()<t.getTime())&&(t=e)}return t}{const e=this.tbt();if(e){const i=this.udt(e);if(t.getTime()<i.getTime())return i}const i=this.kpt.hbt._yt;return t.getTime()<i.getTime()?i:void 0}}dbt(t){const e=(t.getTime()-this.kpt.hbt._yt.getTime())/1e3-this.kpt.Cn+this._bt;let i=this.ibt(Vs(e,0,this.kpt.ct));if(!i)return;if(i=this.vbt(i,t),!i)return;let s=this.clt(i);for(;s&&this.gdt(s,t);)i=s,s=this.clt(i);return i}fbt(t){let e;const i=this.mbt.Awt;if(i){const s=(t.getTime()-this.kpt.hbt._yt.getTime())/1e3-this.kpt.Cn-i.swt();e=this.ibt(Vs(s,0,this.kpt.ct)),e||(e=this.tbt())}else e=this.tbt();if(!e)return;if(e=this.vbt(e,t),!e)return;let s=this.ult(e);for(;s&&this.gdt(s,t);)e=s,s=this.ult(e);return e}vbt(t,e){let i=t;for(;i&&this.udt(i).getTime()>e.getTime();)i=this.ult(i);if(!i)return;const s=this.adt(i);if(s&&s.getTime()<=e.getTime()){const t=this.ult(i);for(t&&this.gdt(t,e)&&(i=t);i;){if(this.udt(i).getTime()>e.getTime())return;if(this.gdt(i,e))break;i=this.clt(i)}if(!i)return}return i}gdt(t,e){if(this.rbt)return!0;if(this.udt(t).getTime()>e.getTime())return!1;const i=this.adt(t);return!(i&&e.getTime()>=i.getTime())}gbt(t,e){if(this.rbt)return!0;if(this.pbt(t).getTime()>e.getTime())return!1;const i=this.adt(t);return!(i&&e.getTime()>=i.getTime())}wbt(t,e,i){const s=co(e,this.PA)+this.kpt.Cn;return{Hut:t,ybt:e,FO:s,ct:i,VO:s+i}}pbt(t){return this.kpt.hbt.Aw===Me.gW?new Date(this.kpt.hbt._yt.getTime()+1e3*(t.FO+t.ct)):this.kpt.hbt._yt}udt(t){const e=this.pbt(t);return this.kpt.hbt.Aw===Me.gW?new Date(e.getTime()-1e3*this._bt):e}adt(t){let e=1/0;if(this.kpt.hbt.Aw===Me.gW){const i=this.mbt.Awt;i&&(e=this.pbt(t).getTime()+1e3*t.ct+i.nwt())}const i=this.kpt.hbt.fyt;return i&&(e=_.min(e,i.getTime())),e===1/0?void 0:new Date(e)}bbt(t,e){return t.Hut+e}get MV(){return this.kpt.Cn-co(this.Abt,this.PA)}get ywt(){return co(this.Abt,this.PA)}slt(t){return!1}rlt(t,e,i,s,n){const r=this.Sbt(t);if(!r)return Promise.reject(new g("Invalid segment"));const o=this.Tbt(r.Hut,e);return o?Promise.resolve(o):ou(this.kbt(r.Hut,e,i,s),n)}Tbt(t,e){}kbt(t,e,i,s){return Promise.reject(new g("Not supported"))}ult(t){const e=this.Sbt(t);if(e)return this.sbt(e.Hut-1)}clt(t){const e=this.Sbt(t);if(e)return this.sbt(e.Hut+1)}Sbt(t){const e=this.sbt(t.Hut);if(e&&e.FO===t.FO)return e;const i=this.Jyt(t.FO);return i&&i.FO===t.FO?i:void 0}Ebt(t,e){const i=this.olt(t);if(!i||!this.slt(i.Hut))return;const s=this.Tbt(i.Hut,e);return s?s.Ebt(t):void 0}olt(t){return this.sbt(t.xbt)}Klt(t){const e=this.Sbt(t);return!!e&&0===e.Hut}qyt(t,e){const i=this.Ebt(t,e);return!!i&&0===i.Gut}jct(t){const e=this.Sbt(t);if(!e)return!1;const i=this.nbt();return!!i&&e.Hut===i.Hut}Yyt(t,e){const i=this.Ebt(t,e);if(!i)return!1;const s=this.nbt();if(!s||i.xbt!==s.Hut)return!1;const n=this.Tbt(i.xbt,e);return i.Gut+1===n.V}Hw(){}constructor(t,e){this.kpt=t,this.mbt=e,this.PA=e._N,this._bt=e.cwt,this.Abt=e.ywt}},SH=class extends jl{sbt(t){if(t<0)return;const e=this.Rbt.multiply(t),i=co(e,this.PA),s=this.kpt.ct;if(i>=s)return;const n=this.Ibt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.wbt(t,e,s-i)}return isFinite(s)&&i+this.Cbt>s?this.wbt(t,e,s-i):this.wbt(t,e,this.Cbt)}$yt(){return 0}ebt(t){const e=_.floor(t/this.Cbt),i=this.Ibt();return void 0!==i&&e>=i?this.sbt(i):this.sbt(e)}ibt(t){if(t>=this.kpt.ct){const t=_.ceil(this.kpt.ct/this.Cbt)-1,e=this.Ibt();return void 0!==e&&t>=e?this.sbt(e):this.sbt(t)}return this.ebt(t)}Ibt(){const t=this.mbt.kwt;var e;if(void 0!==t)return t-(null!=(e=this.mbt.Twt)?e:1);const i=this.mbt.Pbt;return void 0!==i&&i>0?i-1:void 0}abt(){if(isFinite(this.kpt.ct))return this.nbt()}Dbt(t,e){return this.Rbt.multiply(t.Hut+(e-1))}tr(){}constructor(t,e){super(e,t);const i=t.Nbt,s=t.ct;if(void 0===i||void 0===s)throw new g("MultipleSegmentBase does not have a segment duration specified.");this.Rbt=i,this.Cbt=s}};function TH(t,e,i){const s=e.length;if(0===s)return-1;let n=0,r=s-1,o=t.Mbt(e[n]),h=t.Lbt(e[r]);for(;n<=r&&t.Bbt(o,i)<=0&&t.Bbt(i,h)<0;){const a=n+_.floor(t.Obt(i,o,h)*(r-n)),u=e[a],c=t.Mbt(u),l=a+1<s?t.Mbt(e[a+1]):t.Lbt(u);if(t.Bbt(l,i)<=0)n=a+1,o=l;else{if(!(t.Bbt(i,c)<0))return a;r=a-1,h=c}}return-1}function kH(t,e){return TH(EH.Fg,t,e)}r(),r(),r();var EH=class t{static get Fg(){return null!=this.Hrt||(this.Hrt=new t),this.Hrt}Mbt(t){return t.FO}Lbt(t){return t.VO}Bbt(t,e){return t.compare(e)}Obt(t,e,i){return t.subtract(e).toNumber()/i.subtract(e).toNumber()}},xH=.01,RH=class extends jl{sbt(t){if(!(t<0))return t<this.Fbt.length?this.Fbt[t].But:this.Vbt(t-this.Fbt.length)}$yt(){if(this.Fbt.length>0)return co(this.Fbt[0].FO,this.PA)}ebt(t){if(this.Wbt&&co(this.Wbt.FO,this.PA)<=t){const e=co(this.Wbt.FO,this.PA),i=co(this.Wbt.ct,this.PA),s=_.floor((t-e)/i);return this.Vbt(s)}if(this.Fbt.length>0&&xs(t,co(this.Fbt[0].FO,this.PA),1e-5))return this.Fbt[0].But;const e=kH(this.Fbt,vo.fromNumber(t*this.PA));return e<0?void 0:this.Fbt[e].But}ibt(t){if(!this.Wbt&&this.Fbt.length>0){const e=this.Fbt[this.Fbt.length-1];if(function(t,e,i){return Vm(t,e,i)>=0}(t,co(e.VO,this.PA),1e-5))return e.But}const e=this.$yt();return e&&t<e?this.Fbt[0].But:this.ebt(t)}abt(){return isFinite(this.kpt.ct)?this.nbt():this.sbt(this.Fbt.length-1)}Dbt(t){return this.Ubt(t)}Vbt(t){if(!this.Wbt)return;const e=this.Wbt.FO,i=this.Wbt.ct,s=e.add(i.multiply(t)),n=co(s,this.PA),r=this.kpt.ct;if(n>=r)return;const o=this.Fbt.length+t,h=_.min(co(i,this.PA),n+r);return this.wbt(o,s,h)}Ubt(t){return t.ybt.add(this.Abt)}tr(){const t=this.mbt.qk.Bot;if(!t)throw new g("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.Gbt(t)}Gbt(t){const e=this.Abt;this.Hbt(t,e);const i=this.Zbt(t);this.Xbt(t,e,i.zbt,i.xbt)}Hbt(t,e){const i=this.Fbt;if(0===t.length)En(i);else{const s=t[0];let n=0;const r=co(s.FO?vo.fromString(s.FO,!1).subtract(e):vo.ZERO,this.PA);for(;n<i.length&&co(i[n].FO,this.PA)<r-xH;)n++;n>0&&i.splice(0,n)}}Zbt(t){const e=this.Fbt,i=this.Sgt;let s=0,n=0;for(;s<t.length&&n<e.length;){const r=t[s].dwt||0;if(r<0)break;const o=n+r;if(o>=e.length)break;if(e[o].FO.greaterThanOrEqual(i))break;if(e[n].But.Hut===n)n=o+1;else for(;n<=o;)e[n].But.Hut=n,n++;0,s++}return{zbt:s,xbt:n}}Xbt(t,e,i,s){const n=this.Fbt;let r,o=i,h=s;for(;o<t.length;){const i=t[o],s=vo.fromString(i.ct,!1),a=i.dwt||0;let u;if(i.FO){if(u=vo.fromString(i.FO,!1).subtract(e),h>0){const t=n[h-1];t.VO.greaterThan(u)&&(t.ct=u.subtract(t.FO),t.VO=t.FO.add(t.ct))}}else u=h>0?n[h-1].VO:vo.ZERO;if(a<0){if(o+1===t.length){r={FO:u,ct:s};break}const i=vo.fromString(t[o+1].FO,!1).subtract(e);for(;u.lessThan(i);){const t=u.add(s);this.qbt(n,h,u,s,t),u=t,h++}}else{const t=h+a;for(;h<=t;){const t=u.add(s);this.qbt(n,h,u,s,t),u=t,h++}}o++}h<n.length&&n.splice(h),n.length>0&&(this.Sgt=n[n.length-1].FO),this.Wbt=r}qbt(t,e,i,s,n){if(e<t.length){const r=t[e];0,r.ct.equals(s)?r.But.Hut=e:t[e]={FO:i,ct:s,VO:n,But:this.wbt(e,i,co(s,this.PA))}}else t.push({FO:i,ct:s,VO:n,But:this.wbt(e,i,co(s,this.PA))})}constructor(t,e){super(e,t),this.Fbt=[],this.Wbt=void 0,this.Sgt=vo.ZERO,this.tr()}};r();var IH=class{get qk(){return this.Sp}get cwt(){return this.Sp&&void 0!==this.Sp.cwt?this.Sp.cwt:this.Ybt?this.Ybt.cwt:0}get ywt(){return this.Sp&&void 0!==this.Sp.ywt?this.Sp.ywt:this.Ybt?this.Ybt.ywt:vo.ZERO}get Awt(){return this.Sp&&void 0!==this.Sp.Awt?this.Sp.Awt:this.Ybt?this.Ybt.Awt:this.Qct.hbt.Awt}get _N(){return this.Sp&&void 0!==this.Sp._N?this.Sp._N:this.Ybt&&this.Ybt._N?this.Ybt._N:1}get fwt(){return this.Sp&&void 0!==this.Sp.fwt?this.Sp.fwt:this.Ybt?this.Ybt.fwt:void 0}get wwt(){return this.Sp&&void 0!==this.Sp.wwt?this.Sp.wwt:this.Ybt?this.Ybt.wwt:void 0}get Bot(){return this.Kbt||(this.Kbt=this.jbt()),this.Kbt}jbt(){if(this.Qbt=this.Jbt(),this.Qbt)return this.Qbt;if(this.Ybt)return this.Ybt.Bot;throw new g("Missing media segment information.")}Vyt(t){const e=this.wwt;if(e){return{Gu:(void 0!==e.lwt?Ms.Nh(e.lwt,t.Uwt[0]):t.Uwt[0]).href,rut:e.rut}}const i=this.fwt;if(i)return{Gu:t.Uwt[0].href,rut:[0,i[0]-1]}}tr(t){this.Sp=t,this.Qbt&&this.Qbt.tr()}Hw(){this.Qbt&&(this.Qbt.Hw(),this.Qbt=void 0)}constructor(t,e,i){this.Kbt=void 0,this.Qbt=void 0,this.Qct=t,this.Ybt=e,this.Sp=i}},gc=class extends IH{get ct(){return void 0!==this.Sp.ct?this.Sp.ct/this._N:this.Ybt&&CH(this.Ybt)?this.Ybt.ct:void 0}get Nbt(){return void 0!==this.Sp.ct?vo.fromNumber(this.Sp.ct):this.Ybt&&CH(this.Ybt)?this.Ybt.Nbt:void 0}get Twt(){return void 0!==this.Sp.Twt?this.Sp.Twt:this.Ybt&&CH(this.Ybt)?this.Ybt.Twt:void 0}get kwt(){return void 0!==this.Sp.kwt?this.Sp.kwt:this.Ybt&&CH(this.Ybt)?this.Ybt.kwt:void 0}Jbt(){return void 0!==this.Sp.Bot?new RH(this,this.Qct):void 0!==this.Sp.ct?new SH(this,this.Qct):void 0}};function CH(t){return t instanceof gc}r();var PH=class{Ob(t){return this.$bt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((e,i,s,n)=>{if("$$"===e)return"$";const r=t[i];if(void 0===r)return e;if(void 0===s)return r.toString();let o=function(t,e){switch(e){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===o?e:(o=Jh(o,Number(s),"0"),o)}))}constructor(t){this.$bt=t}};var DH=class t extends gc{get Vwt(){return this.tAt?this.tAt:this.Ybt&&this.Ybt instanceof t?this.Ybt.Vwt:void 0}get Wwt(){return this.eAt?this.eAt:this.Ybt&&this.Ybt instanceof t?this.Ybt.Wwt:void 0}Vyt(t){const e=this.Vwt;if(!e)return super.Vyt(t);const i=e.Ob({Bandwidth:t.qk.wG,RepresentationID:t.qk.o});return{Gu:Ms.Jp(i,t.Uwt[0])}}flt(t,e){var i;const s=null!=(i=e.Uyt.Twt)?i:1,n=this.Wwt.Ob({Bandwidth:e.qk.wG,Number:e.Bot.bbt(t,s),RepresentationID:e.qk.o,Time:e.Bot.Dbt(t,s)});return{Gu:Ms.Jp(n,e.Uwt[0])}}Zyt(t,e){}get Pbt(){}constructor(t,e,i){super(t,e,i),this.tAt=i.Vwt?new PH(i.Vwt):void 0,this.eAt=i.Wwt?new PH(i.Wwt):void 0}};r();var NH=class t extends gc{flt(t,e){const i=this.vwt[t.Hut],s=e.Uwt[0];let n;return n=i.yN?Ms.Nh(i.yN,s):s,{Gu:n.href,rut:i._wt}}Zyt(t,e){}get vwt(){return void 0!==this.Sp.vwt?this.Sp.vwt:this.Ybt&&this.Ybt instanceof t?this.Ybt.vwt:void 0}get Pbt(){var t;return null==(t=this.vwt)?void 0:t.length}};r(),r(),r(),r();var MH=class{Ebt(t){const e=this.hlt(t.Gut);if(e&&e.FO===t.FO)return e;const i=this.iAt(t.FO);return i&&i.FO===t.FO?i:void 0}},LH=class extends MH{get V(){return this.sAt.length}hlt(t){if(t>=0&&t<this.V)return this.nAt(this.sAt[t])}iAt(t){const e=this.rAt(t);if(this.sAt.length>0){const t=this.sAt[0];if(e<=co(t.FO,this._N))return this.nAt(t)}const i=kH(this.sAt,vo.fromNumber(e*this._N));if(!(i<0))return this.nAt(this.sAt[i])}nlt(t){const e=this.rAt(t);if(this.sAt.length>0){const t=this.sAt[this.sAt.length-1];if(e>=co(t.VO,this._N))return this.nAt(t)}return this.iAt(t)}nAt(t){const e=co(t.FO,this._N)-this.ywt,i=e+this.oAt,s=co(t.ct,this._N);return{xbt:this.xbt,Gut:t.Hut,FO:i,ybt:vo.fromNumber(e*this._N),ct:s,VO:i+s,hAt:[t.aAt,t.uAt]}}rAt(t){return t-this.oAt+this.ywt}constructor(t,e,i,s,n){super(),this.xbt=t,this._N=e,this.oAt=i,this.ywt=s,this.sAt=n}};r(),r(),r();var BH=class t{Xmt(){return this.yD.ec<this.qk.byteLength}cAt(){const e=this.lAt(),i=this.dAt(),s=this.yD.ec,n=this.qk.byteLength;let r;r=t.fAt(i)?n-s:t._At(i);const o=s+r<=n?r:n-s,h=E(this.qk,this.yD,o);return new FH(e,ra(h))}lAt(){const t=this.dAt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let e=0;for(let i=0;i<t.length;i++)e=256*e+t[i];return e}dAt(){const t=oc(this.qk,this.yD.xb());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const e=8-(31-bg(t));return Ms.Vp(e<=8&&e>=1,"Incorrect log2 value"),E(this.qk,this.yD,e)}static _At(t){if(8===t.length&&224&t[1])throw new b("EBML variable sized integer is too large");let e=0;for(let i=0;i<t.length;i++){const s=t[i];if(0===i){e=s&(1<<8-t.length)-1}else e=256*e+s}return e}static fAt(t){for(const e of OH)if(_e(t,new j(e)))return!0;return!1}constructor(t){this.qk=t,this.yD=new Ri}},OH=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],FH=class{vAt(){return this.mAt.byteOffset}gAt(){return new BH(this.mAt)}pAt(){const t=this.mAt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.mAt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let e=0;for(let i=0;i<t;i++){e=256*e+this.mAt.getUint8(i)}return e}bQ(){if(4===this.mAt.byteLength)return this.mAt.getFloat32(0);if(8===this.mAt.byteLength)return this.mAt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,e){this.id=t,this.mAt=e}};function VH(t,e){const i=function(t){const e=new BH(ra(t)),i=e.cAt();if(i.id!==UH)throw new b("Missing WebM EBML header");const s=e.cAt();if(s.id!==GH)throw new b("Missing WebM SegmentElement");const n=s.vAt(),r=function(t){const e=t.gAt();let i;for(;e.Xmt();){const t=e.cAt();if(t.id===HH){i=t;break}}if(!i)throw new b("Missing WebM InfoElement");return function(t){const e=t.gAt();let i,s=1e6;for(;e.Xmt();){const t=e.cAt();t.id===ZH?s=t.pAt():t.id===XH&&(i=t.bQ())}if(void 0===i)throw new b("Missing Duration in WebM InfoElement");const n=s/1e9,r=i*n;return{timecodeScale:n,duration:r}}(i)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(e),s=new BH(ra(t)).cAt();if(s.id!==zH)throw new b("Missing WebM CuesElement");const n=function(t,e,i,s){const n=[],r=t.gAt();let o,h;for(;r.Xmt();){const t=r.cAt();if(t.id!==qH)continue;const i=WH(t);if(!i)continue;const s=i.unscaledTime,a=e+i.relativeOffset;void 0!==o&&n.push({Hut:n.length,FO:o,ct:s.subtract(o),VO:s,aAt:h,uAt:a-1}),o=s,h=a}if(void 0!==o){0;const t=vo.fromNumber(s/i);n.push({Hut:n.length,FO:o,ct:t.subtract(o),VO:t,aAt:h,uAt:void 0})}return n}(s,i.segmentOffset,i.timecodeScale,i.duration);return{_N:_.round(1/i.timecodeScale),wAt:n}}function WH(t){const e=t.gAt(),i=e.cAt();if(i.id!==YH)throw new b("Missing CueTime in WebM CuePointElement");const s=vo.fromNumber(i.pAt()),n=e.cAt();if(n.id!==KH)throw new b("Missing CueTrackPositions in WebM CuePointElement");const r=n.gAt();let o=0;for(;r.Xmt();){const t=r.cAt();if(t.id===jH){o=t.pAt();break}}return{unscaledTime:s,relativeOffset:o}}var UH=440786851,GH=408125543,HH=357149030,ZH=2807729,XH=17545,zH=475249515,qH=187,YH=179,KH=183,jH=241,QH=class extends jl{sbt(t){if(0===t)return this.yAt}$yt(){return 0}ebt(t){return this.yAt}ibt(t){return this.ebt(t)}abt(){return this.yAt}Dbt(t,e){return vo.ZERO}Xyt(t){const e=this.bAt(t);return e&&{ubt:t,cbt:e,lbt:e}}bAt(t){const e=this.yAt;return this.gdt(e,t)?e:void 0}dbt(t){return this.bAt(t)}fbt(t){return this.bAt(t)}tr(){}slt(t){return 0===t&&void 0!==this.AAt}Tbt(t,e){const i=e.Uwt[0].href;return this.SAt.get(i)}kbt(t,e,i,s){const n=e.Uwt[0].href;let r=this.TAt.get(n);if(void 0===r){const o=e.Yq,h=this.kAt.Vw;if(Gh(o))r=this.EAt(t,n,i,s,h);else{if(!Cy(o))throw new A(Qa.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+o);r=this.xAt(t,n,e,i,s,h)}this.TAt.set(n,r)}return r}async EAt(t,e,i,s,n){const r=this.AAt,o=await s.Clt(e,r,i,n),h=this.RAt(t,o);return this.SAt.set(e,h),h}RAt(t,e){const i=this.AAt,s=Mi.WD(new DataView(e),new Ri);if(s.Aw!==Tt._D)throw new g("Invalid segment index");const n=rr.oN(s.qk),r=function(t,e){const i=[];let s=t.CL,n=e+t.PL.toNumber(),r=0;for(const e of t.NL){const t=e.kL,o=vo.fromNumber(e.ct),h=s.add(o);0===e.TL&&i.push({Hut:r++,FO:s,ct:o,VO:h,aAt:n,uAt:n+t-1}),n+=t,s=h}return i}(n,i[1]+1);return new LH(t,n._N,this.kpt.Cn,co(this.Abt,this.PA),r)}async xAt(t,e,i,s,n,r){const o=i.Vyt(),h=this.AAt,a=n.Clt(o.Gu,o.rut,s,r),u=n.Clt(e,h,s,r),[c,l]=await Promise.all([a,u]),d=this.IAt(t,l,c);return this.SAt.set(e,d),d}IAt(t,e,i){const s=VH(new j(e),new j(i));return new LH(t,s._N,this.kpt.Cn,co(this.Abt,this.PA),s.wAt)}Hw(){super.Hw(),this.kAt.Yw()}constructor(t,e){super(e,t),this.SAt=xu(),this.TAt=xu(),this.kAt=new da,this.AAt=t.fwt,this.yAt=this.wbt(0,vo.ZERO,this.kpt.ct)}},JH=class extends IH{get Twt(){}flt(t,e){return{Gu:e.Uwt[0].href}}Zyt(t,e){return{Gu:e.Uwt[0].href,rut:t.hAt}}Jbt(){return new QH(this,this.Qct)}};r();var $H=class extends pe{constructor(){super(ko.iat)}};r();var Ml=class extends Co{get qk(){return this.Sp}get Uwt(){return this.CAt}PAt(){var t,e;return null!=(e=this.mbt)?e:null==(t=this.tx)?void 0:t.PAt()}DAt(t){const e=this.Qct,i=this.tx&&this.tx.PAt();this.Sp.Zwt?this.mbt=new DH(e,i,this.Sp.Zwt):this.Sp.Hwt?this.mbt=new NH(e,i,this.Sp.Hwt[0]):this.Sp.Gwt?this.mbt=new JH(e,i,this.Sp.Gwt):t&&!i&&(this.mbt=new JH(e,i,void 0))}NAt(t,e){this.Sp=t,this.CAt=t.Uwt&&t.Uwt.length>0?AH(t.Uwt.map((t=>t.Gu)),e):e.slice(),this.mbt&&(t.Zwt?this.mbt.tr(t.Zwt):t.Hwt?this.mbt.tr(t.Hwt[0]):t.Gwt&&this.mbt.tr(t.Gwt))}Nyt(){var t;return null==(t=this.MAt)?void 0:t.LAt}zyt(){var t;return null==(t=this.MAt)?void 0:t.BAt}OAt(t){const e=this.FAt,i=this.Qct.ct,s=this.MAt,n=this.VAt(t);s&&xs(i,e,1e-5)&&sZ(s,n)||(this.FAt=i,this.MAt=n,this.wo(new $H))}Hw(){this.$o(),this.mbt&&(this.mbt.Hw(),this.mbt=void 0)}constructor(t,e,i){super(),this.mbt=void 0,this.FAt=1/0,this.MAt=void 0,this.tx=e,this.NAt(t,i)}};function tZ(t){let e,i;for(const i of t){const t=i.Nyt();if(t){e=t.Cn;break}}if(void 0!==e){for(let e=t.length-1;e>=0;e--){const s=t[e].Nyt();if(s){i=s.jn;break}}return void 0!==i?{Cn:e,jn:i}:void 0}}function eZ(t){if(0===t.length)return;let e=0,i=1/0;for(const s of t){const t=s.Nyt();if(!t)return;if(e=_.max(e,t.Cn),i=_.min(i,t.jn),e>=i)return}return{Cn:e,jn:i}}function iZ(t){let e;for(const i of t){const t=i.zyt();t&&(!e||t.getTime()<e.getTime())&&(e=t)}return e}function sZ(t,e){return function(t,e){return t&&e?t.getTime()===e.getTime():t===e}(t.BAt,e.BAt)&&function(t,e){return t&&e?xs(t.Cn,e.Cn,1e-5)&&xs(t.jn,e.jn,1e-5):t===e}(t.LAt,e.LAt)}var nZ=class extends Cu{get uft(){return this.WAt}get Zrt(){return this.uft.reduce(((t,e)=>{for(const i of e.Zrt)ms(t,i)||t.push(i);return t}),[])}get vp(){return this.Zrt.length>0?this.Zrt[0]:""}get Aw(){return this.WAt[0].Aw}get o(){return this.ZS}get hdt(){return this.kpt.hdt}get Yq(){return this.WAt[0].Yq}get Qct(){return this.kpt}get Zat(){return Qe(this.uft,(t=>t.Zat))}Nyt(){return eZ(this.WAt)}zyt(){let t;for(const e of this.WAt){const i=e.zyt();i&&(!t||i.getTime()<t.getTime())&&(t=i)}return t}gn(){this.$o();for(const t of this.WAt)t.fn(ko.iat,this.Lyt)}constructor(t,e,i){super(),this.kpt=t,this.ZS=e,this.WAt=i.slice();for(const t of i)t.yn(ko.iat,this.Lyt)}};r();var rZ=class extends pe{constructor(){super(ko.nat)}};function oZ(t){const e=[];for(const i of t){let t;const s=i.Idt;void 0===s||(t=Fo(e,(t=>t.o===s))),t||(t={o:s,uft:[]},e.push(t)),t.uft.push(i)}return e}r();var hZ=class extends Cu{get uft(){return this.WAt}get Tpt(){return this.UAt}get uyt(){return this.Byt.qk.uyt}get ct(){return this.Byt.ct}get jn(){return this.Cn+this.ct}get cyt(){return this.Byt.qk.cyt||[]}get o(){return this.Byt.o}get rat(){return this.GAt}get hdt(){return this.HAt}get $pt(){return this.HAt.ZAt(this)}get Qct(){return this}get Jpt(){return this.HAt.XAt(this)}get zAt(){return this.qAt(1/0,_.min)}get YAt(){return this.qAt(0,_.max)}qAt(t,e){if(0===this.UAt.length)return;let i=t;for(const t of this.UAt)if(mT(t.Aw)){const s=t.Myt;if(void 0===s)return;i=e(i,s)}return i}get Cn(){return this.Byt.Cn}get kE(){return this.hdt.kE}KAt(){this.GAt||(this.GAt=!0,this.wo(new rZ),this.gn())}async tr(t,e){0===this.WAt.length?(await this.jAt(this.Byt.uft,t,e),this.QAt(this.WAt),J(e)):await this.JAt(t,e)}async jAt(t,e,i){for(const s of t){const t=new bH(this,s);try{await t.tr(e,i),this.WAt.push(t)}catch(t){th(t)}}}QAt(t){const e=oZ(t);for(const t of e){const e=new nZ(this,t.o,t.uft);this.UAt.push(e)}}async JAt(t,e){for(const i of this.WAt)await i.tr(t,e)}Nyt(){return this.Byt.Nyt()}zyt(){return this.Byt.zyt()}gn(){this.$o(),this.Byt.fn(ko.iat,this.Lyt);for(const t of this.UAt)t.gn();for(const t of this.WAt)t.gn();En(this.WAt),En(this.UAt)}constructor(t,e){super(),this.WAt=[],this.UAt=[],this.GAt=!1,this.HAt=t,this.Byt=e,this.Byt.yn(ko.iat,this.Lyt)}};r();var Al=class extends pe{constructor(){super(Ti.Wy)}};r(),r();var aZ=function(t){return t.$At="tSt",t}({}),uZ=class extends pe{constructor(){super(aZ.$At)}};r(),r(),r(),r();var cZ=class extends Ml{get _ct(){return this.Lat}get Qct(){return this.Lat.Qct}get hbt(){return this.Lat.hbt}get Yq(){return this.Sp.Yq||this.Lat.Yq}get Uyt(){return this.PAt()}get Bot(){return this.Uyt.Bot}slt(t){const e=this.Yq;return!(!Gh(e)&&!Cy(e))&&this.Bot.slt(t.Hut)}rlt(t,e,i,s){return this.Bot.rlt(t,this,e,i,s)}Vyt(){return this.Uyt.Vyt(this)}flt(t){return this.Uyt.flt(t,this)}Zyt(t){return this.Uyt.Zyt(t,this)}Xyt(){return this.eSt}VAt(t){const e=this.Bot,i=e.Xyt(t),s=i&&function(t,e){const{cbt:i,lbt:s,ubt:n}=t,r=i.FO;let o;const h=e.pbt(s);if(h.getTime()<=n.getTime())o=s.VO;else{const t=(h.getTime()-n.getTime())/1e3,e=_.max(s.ct-t,0);o=s.FO+e}return{Cn:r,jn:o}}(i,e),n=this.Bot.zyt(t,i);return this.eSt=i,{ubt:t,LAt:s,BAt:n}}tr(t){this.NAt(t,this.Lat.Uwt)}constructor(t,e){super(t,e,e.Uwt),this.eSt=void 0,this.Lat=e,this.DAt(!0)}},lZ=class extends Ml{get Zat(){return this.Mdt}get Qct(){return this.kpt}get hbt(){return this.kpt.hbt}get Idt(){return this.Sp.Idt}get Yq(){var t;return this.Sp.Yq||(null==(t=this.Mdt[0])?void 0:t.qk.Yq)||""}get Rwt(){return this.qk.Rwt}get Iwt(){return this.qk.Iwt}tr(t){this.NAt(t,this.kpt.Uwt);const e=t.Zat||[];if(this.Mdt.length!==e.length)throw new g("Expected "+this.Mdt.length+' representations in adaptation set "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.Mdt[t].tr(e[t])}OAt(t){for(const e of this.Mdt)e.OAt(t);super.OAt(t)}VAt(t){return{ubt:t,LAt:eZ(this.Mdt),BAt:iZ(this.Mdt)}}Hw(){for(const t of this.Mdt)t.Hw();super.Hw()}constructor(t,e){super(t,e,e.Uwt),this.kpt=e,this.DAt(!1),this.Mdt=t.Zat.map((t=>new cZ(t,this)))}},dZ=class extends Ml{get uft(){return this.WAt}get Tpt(){return this.UAt}get Qct(){return this}get hbt(){return this.iSt}get o(){return this.Sp.o}get Cn(){return this.YV}get ct(){return this.DA}tr(t,e){this.NAt(t,this.iSt.Uwt),this.DA=e;const i=t.uft||[];if(this.WAt.length!==i.length)throw new g("Expected "+this.WAt.length+' adaptation sets in period "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.WAt[t].tr(i[t])}OAt(t){for(const e of this.WAt)e.OAt(t);super.OAt(t)}VAt(t){return{ubt:t,LAt:eZ(this.WAt),BAt:iZ(this.WAt)}}Hw(){for(const t of this.WAt)t.Hw();super.Hw()}constructor(t,e,i,s){super(e,void 0,t.Uwt),this.UAt=[],this.iSt=t,this.YV=i,this.DA=s,this.DAt(!1),this.WAt=(e.uft||[]).map((t=>new lZ(t,this))),this.UAt=oZ(this.WAt)}};r();var fZ=class{get sSt(){return this.nSt.dyt.aV}get rSt(){return this.nSt.dyt.hV}get oSt(){return this.nSt.dyt.lyt}get hSt(){var t;return null==(t=this.nSt.KR)?void 0:t.aV}get aSt(){var t;return null==(t=this.nSt.KR)?void 0:t.aV}constructor(t){this.nSt=t}},_Z=new Date("2000-01-01"),vZ=class extends Co{get qk(){return this.Sp}get Aw(){return this.Sp.Aw||Me.mW}get _yt(){return this.uSt||this.Sp._yt||this.Ayt}get fyt(){return this.Sp.fyt}get obt(){var t,e;return null!=(e=null==(t=this.cSt)?void 0:t.ignoreAvailabilityWindow)&&e}get wyt(){return this.lSt}get Uwt(){return this.CAt}get vyt(){return this.dSt}get Lpt(){return this.fSt}get Ayt(){return this.Sp.Ayt||this.An}get Awt(){return this.Sp.Awt}get _St(){return this.vSt}get mSt(){return this.An}get kyt(){return this.nSt}Nyt(){var t;return null==(t=this.MAt)?void 0:t.LAt}zyt(){var t;return null==(t=this.MAt)?void 0:t.BAt}tr(t,e,i,s){var n;const r=void 0!==this.Sp&&this.Sp.Aw===Me.gW;this.Sp=t,this.vSt=null!=s?s:i,this.An=i;const o=[Qb(e)];this.CAt=t.Uwt&&t.Uwt.length>0?AH(t.Uwt.map((t=>t.Gu)),o):o,this.dSt=t.vyt&&t.vyt.length>0?AH(t.vyt,this.CAt):[];const h=this.dSt.map((t=>t.href)),a=e.href;ms(h,a)||(this.dSt.push(e),h.push(a));const u=this.gSt.href;ms(h,u)||(this.dSt.push(this.gSt),h.push(u)),this.lSt=null==(n=t.wyt)?void 0:n.swt(),t.kyt&&(this.nSt=new fZ(t.kyt));const c=t.Aw===Me.gW,l=function(t,e,i){const s=[];for(let i=0;i<t.length;i++){const n=t[i];let r;if(n.Cn)r=n.Cn.swt();else if(i>0&&t[i-1].ct){r=s[i-1]+t[i-1].ct.swt()}else{if(0!==i||e)break;r=0}s.push(r)}const n=[];for(let e=0;e<s.length-1;e++)n.push({qk:t[e],Cn:s[e],ct:s[e+1]-s[e]});if(s.length>0){const r=s.length-1,o=t[r],h=s[r];let a=1/0;e||(a=o.ct?o.ct.swt():i-h),n.push({qk:o,Cn:h,ct:a})}return n}(t.Lpt,c,this.lSt);this.pSt(l,r,c),this.OAt(i)}pSt(t,e,i){const s=this.fSt;if(0===t.length)return void En(s);const n=t[0].qk.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const o=s.splice(0,r);for(const t of o)t.Hw();if(e&&!i&&s.length>0&&t.length>0){var h;const e=null!=(h=mZ(s[0].qk))?h:Oo.CF;var a;const i=null!=(a=mZ(t[0].qk))?a:Oo.CF;if(i.fF(e)){const n=i.SF(e);void 0!==this.lSt&&(this.lSt+=n.dF());for(let e=0;e<t.length;e++){const i=t[e];if(e<s.length){const t=s[e];i.Cn=t.Cn,bZ(i.qk,t.qk)}e===t.length-1&&(i.ct+=n.dF())}}}for(let e=0;e<t.length;e++){const i=t[e];if(e<s.length){const t=s[e];0,t.tr(i.qk,i.ct)}else s.push(new dZ(this,i.qk,i.Cn,i.ct))}}OAt(t){for(const e of this.fSt)e.OAt(t);const e=this.MAt,i=this.VAt(t);e&&sZ(e,i)||(this.MAt=i,this.wo(new $H))}VAt(t){return{ubt:t,LAt:tZ(this.fSt),BAt:iZ(this.fSt)}}abt(){if(0===this.fSt.length)return;const t=this.fSt[this.fSt.length-1];if(isFinite(t.ct))return;if(0===t.uft.length)return;const e=t.uft[0];if(0===e.Zat.length)return;const i=e.Zat[0].Bot,s=i.abt();return s?{But:s,fyt:i.adt(s)}:void 0}Hw(){this.$o();for(const t of this.fSt)t.Hw()}constructor(t,e,i,s,n){if(super(),this.MAt=void 0,this.lSt=void 0,this.uSt=void 0,this.fSt=[],this.gSt=e,this.cSt=n,this.tr(t,i,s),t.Aw===Me.gW){const t=this.abt();t&&t.fyt&&t.fyt.getTime()<_Z.getTime()&&(this.uSt=new Date(this.Ayt.getTime()-1e3*(t.But.FO+t.But.ct)),this.OAt(s))}}};function mZ(t){let e=wZ(t);var i,s;for(const s of null!=(i=t.uft)?i:[])e=eE(e,gZ(s));for(const i of null!=(s=t.cyt)?s:[])e=eE(e,yZ(i));return e}function gZ(t){let e=wZ(t);for(const i of t.Zat)e=eE(e,pZ(i));return e}function pZ(t){return wZ(t)}function wZ(t){let e;if(void 0!==t.Zwt&&(e=eE(e,yZ(t.Zwt))),void 0!==t.Gwt&&(e=eE(e,yZ(t.Gwt))),void 0!==t.Hwt)for(const i of t.Hwt)e=eE(e,yZ(i));return e}function yZ(t){var e,i;return Oo.xF(null!=(e=t.ywt)?e:vo.ZERO,null!=(i=t._N)?i:1)}function bZ(t,e){if(TZ(t,e),t.Cn=e.Cn,void 0!==t.uft&&void 0!==e.uft&&t.uft.length===e.uft.length)for(let i=0;i<t.uft.length;i++)AZ(t.uft[i],e.uft[i]);if(void 0!==t.cyt&&void 0!==e.cyt&&t.cyt.length===e.cyt.length)for(let i=0;i<t.cyt.length;i++)kZ(t.cyt[i],e.cyt[i])}function AZ(t,e){if(TZ(t,e),void 0!==t.Zat&&void 0!==e.Zat&&t.Zat.length===e.Zat.length)for(let i=0;i<t.Zat.length;i++)SZ(t.Zat[i],e.Zat[i])}function SZ(t,e){TZ(t,e)}function TZ(t,e){if(void 0!==t.Zwt&&void 0!==e.Zwt&&kZ(t.Zwt,e.Zwt),void 0!==t.Gwt&&void 0!==e.Gwt&&kZ(t.Gwt,e.Gwt),void 0!==t.Hwt&&void 0!==e.Hwt&&t.Hwt.length===e.Hwt.length)for(let i=0;i<t.Hwt.length;i++)kZ(t.Hwt[i],e.Hwt[i])}function kZ(t,e){t._N=e._N,t.ywt=e.ywt}r();var EZ=class{async Tj(t){await this.wSt(t,this.lW,this.ySt,this.bSt).catch(Eu)}odt(){return new Date(Da()+this.ASt)}async wSt(t,e,i,s){let n;if(s&&(n=await this.SSt(e,s,i)),void 0===n){J(i);for(const s of t)if(n=await this.TSt(e,s,i),void 0!==n)break}this.ASt=void 0===n?0:n-Da()}async TSt(t,e,i){switch(e.i9){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=e.Dx;if(s)return await this.SSt(t,s,i);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=e.Dx;if(t){const e=new Date(t).getTime();if(!S(e))return e}break}default:return}}async SSt(t,e,i){try{const s=await t.Kk({Gu:e,yE:xe.GET,Yk:Rr.Ak,Vw:i}),n=await s.Rk(),r=new Date(n).getTime();if(!S(r))return r}catch(t){th(t)}}constructor(t,e,i){this.lW=t,this.ySt=e,this.bSt=i,this.ASt=0}},xZ=class extends Co{get fyt(){return this.Byt&&this.Byt.fyt}get _yt(){return this.Byt&&this.Byt._yt}get obt(){return this.Byt&&this.Byt.obt}get o(){return this.Byt&&this.Byt.qk.o}get _St(){var t;return null==(t=this.Byt)?void 0:t._St}get kSt(){var t;return null==(t=this.Byt)?void 0:t.mSt}get vyt(){return this.Byt?this.Byt.vyt.map((t=>t.href)):[this.ESt]}get ESt(){return this.xSt.href}get gyt(){return this.Byt&&this.Byt.qk.gyt}get pyt(){return this.Byt&&this.Byt.qk.pyt}get wyt(){return this.Byt&&this.Byt.qk.wyt}get yyt(){return this.Byt&&this.Byt.qk.yyt}get byt(){var t,e;const i=(null==(e=this.Byt)||null==(t=e.qk.byt)?void 0:t.nwt())||0;return _.max(i,IZ)}get XR(){return this.RSt}ISt(t){const e=this.XR;this.RSt=t,e!==this.XR&&this.wo(new uZ)}get Lpt(){return this.fSt}get CSt(){return this.Aw===Me.gW?this.Kyt:this.PSt}get DSt(){const t=this.CSt;if(void 0!==t)for(const e of this.Lpt)if(e.Cn<=t&&e.jn>t)return e}get Dwt(){return this.Byt&&this.Byt.qk.Dwt}get Ayt(){return this.Byt&&this.Byt.Ayt}get zAt(){for(let t=this.fSt.length-1;t>=0;t-=1){const e=this.fSt[t].zAt;if(e)return e}}get Kyt(){const t=this.zAt;if(void 0===t)return;const e=t-this.NSt;return _.max(e,this.PSt)}get PSt(){for(const t of this.fSt){const e=t.Dyt;if(void 0!==e)return e}}get kE(){return Boolean(this.MSt.kE)}get NSt(){var t,e;if(this.MSt.LSt&&this.Aw===Me.gW)return this.MSt.LSt;const i=null==(e=this.Byt)||null==(t=e.qk.Syt)?void 0:t.swt();return void 0!==i?i:this.Aw===Me.gW?1.5*this.yyt.swt():0}get Awt(){return this.Byt&&this.Byt.Awt}get Aw(){return this.Byt?this.Byt.Aw:void 0}get kyt(){var t;return null==(t=this.Byt)?void 0:t.kyt}async tr(t,e,i){const s=[],n=[],r=t.myt?Ms.Nh(t.myt,this.xSt):this.xSt;void 0===this.Byt?(await this.BSt.Tj(t.Tyt),this.Byt=new vZ(t,this.xSt,r,this.odt(),this.cSt),this.Byt.yn(ko.iat,this.Ds)):this.Byt.tr(t,r,this.odt(),e);const o=this.Byt.Lpt;let h;if(0===o.length)h=this.fSt.slice(),En(this.fSt);else{const t=o[0].o;let e=0;for(;e<this.fSt.length&&this.fSt[e].o!==t;)e++;h=this.fSt.splice(0,e);for(let t=0;t<o.length;t++){const e=o[t];let r;t<this.fSt.length?r=this.fSt[t]:(r=new hZ(this,e),s.push(r)),n.push(r.tr(this.OSt,i))}}await Promise.all(n),this.fSt.push(...s);for(const t of h)t.KAt();this.wo(new Al)}odt(){return this.BSt.odt()}XAt(t){const e=this.fSt.indexOf(t);if(e>0)return this.fSt[e-1]}ZAt(t){const e=this.fSt.indexOf(t);if(e>=0&&e+1<this.fSt.length)return this.fSt[e+1]}Nyt(){return this.Byt?this.Byt.Nyt():void 0}zyt(){return this.Byt&&this.Byt.zyt()}OAt(t){this.Byt&&this.Byt.OAt(t)}gn(){this.$o(),this.FSt=void 0,this.ISt(!1);for(const t of this.fSt)t.gn();En(this.fSt),this.Byt&&this.Byt.Hw()}constructor(t,e,i,s,n){super(),this.Byt=void 0,this.RSt=!0,this.fSt=[],this.FSt=void 0,this.MSt=t,this.xSt=t.OC,this.OSt=e,this.lW=i,this.VSt=s,this.BSt=new EZ(this.lW,this.VSt,this.MSt.WSt),this.cSt=n}},RZ=class{get hdt(){return this.HAt}constructor(t,e,i,s,n){this.HAt=new xZ(t,e,i,s,n)}},IZ=1e3,CZ=class{get Pr(){return this.Byt}get W(){return this.USt||(this.USt=this.KE(this.GSt.Vw),ah(this.USt)),this.USt}async KE(t){this.Byt.hdt.wo(new Di);try{await this.HSt(t),this.Byt.hdt.ISt(!0)}catch(t){throw th(t),this.USt=void 0,this.Byt.hdt.ISt(!1),new g("The provided MPEG-DASH document could not be loaded - "+t.message)}this.ZSt=this.XSt(this.GSt.Vw)}async XSt(t){try{for(;this.Byt.hdt.Aw===Me.gW;)await ou(this.zSt,t)}catch(t){}}get zSt(){return this.Byt.hdt.kSt&&this.Byt.hdt.Aw===Me.gW?this.qSt(this.GSt.Vw):this.W}async YSt(t){J(t);const e=this.KSt();if(e>0){const i=_.min(e,2147483647);await Fe(i,t)}try{await this.HSt(t),this.Byt.hdt.ISt(!0)}catch(t){throw new g("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.jSt=void 0}}KSt(){const t=this.Byt.hdt.odt().getTime()-this.Byt.hdt._St.getTime();return this.Byt.hdt.byt-t}QSt(t){const e=this.Byt.hdt.zyt();if(e){const i=e.getTime()-t.getTime();if(i>0)return i}this.Byt.hdt.OAt(t);const i=this.Byt.hdt.zyt();return i?i.getTime()-t.getTime():NaN}async qSt(t){const e={stack:[],error:void 0,hasError:!1};try{null!=this.jSt||(this.jSt=this.YSt(t));const i=zs(e,da.Qw([t]),!1),s=[this.jSt,this.JSt(i.Vw)].filter(ji);await Promise.race(s).catch(Eu)}catch(t){e.error=t,e.hasError=!0}finally{lo(e)}}JSt(t){const e=this.Byt.hdt.odt(),i=this.QSt(e);if(!S(i)&&!this.Pr.hdt.obt)return this.$St(i,t)}async $St(t,e){await Fe(t,e);const i=this.Byt.hdt.odt();this.Byt.hdt.OAt(i)}async tTt(t,e){const i=await this.iTt.eTt(t,{},e);return(new _H).Eyt(i.sTt,i.$k)}gn(){return this.GSt.Yw(),this.ZSt=void 0,this.USt=void 0,this.jSt=void 0,this.Byt.hdt.gn(),Promise.resolve()}constructor(t,e,i,s,n){this.GSt=new da,this.HSt=async t=>{try{const e=this.Byt.hdt.odt(),i=await this.tTt(this.Byt.hdt.vyt,t);await this.Byt.hdt.tr(i,e,t)}catch(t){throw eo(t)&&this.Byt.hdt.ISt(!1),t}},this.iTt=s,this.Byt=new RZ(t,e,i,this.GSt.Vw,n)}};r(),r();var PZ=class extends pe{constructor(t,e){super("Hpt"),this.twt=t,this.Gdt=e}},DZ=class extends Co{get Gdt(){return this.Hdt}get Aw(){return this.bp}get Z(){return this.cC.slice()}rW(t){t&&this.Hdt!==t&&this.nTt(t)}oW(t){this.Hdt===t&&this.nTt(void 0)}nTt(t){this.Hdt=t,this.wo(new PZ(this,this.Hdt))}gn(){this.$o();for(const t of this.cC)t.Idt=void 0;En(this.cC)}constructor(t,e){super(),this.Hdt=void 0,this.bp=t,this.cC=e;for(const t of this.cC)t.Idt=this}};r(),r(),r();var NZ=class extends pe{constructor(t,e,i){super(Ti.Iy),this.currentTime=t,this.initDataType=e,this.initData=i}};function uc(t,e,i,s,n){let r=[],o=[];for(const t of e)t.Aw===ee.fE?r=r.concat(t.Z):t.Aw===ee._E&&(o=o.concat(t.Z));return[MZ(t,r,i,s,null==n?void 0:n.preferredAudioCodecs),LZ(t,o,i,s,null==n?void 0:n.preferredVideoCodecs)].filter(ji)}function MZ(t,e,i,s,n){const r=Fo(s||[],(t=>t.bat===ee.fE&&t.Rt)),o=[OZ(r,i,t),FZ(r),VZ(r),WZ(r,n),UZ(),t=>{const e=t.filter((t=>"main"===t.Lt));return e.length>0?e:t}];return BZ(e,o)}function LZ(t,e,i,s,n){const r=Fo(s||[],(t=>t.bat===ee._E&&t.Rt)),o=[OZ(r,i,t),WZ(r,n),UZ(),t=>{const e=t.filter((t=>"main"===t.Lt));return e.length>0?e:t}];return BZ(e,o)}function BZ(t,e){if(0===t.length)return;let i=t;for(const t of e){if(1===i.length)return i[0];i=t(i)}return i[0]}function OZ(t,e,i){return s=>{const n=t?t._ct.o:void 0;if(!ji(n))return s;const r=null==e?void 0:e.uyt,o=i.uyt,h=r&&o&&r.Dx===o.Dx,a=Fo(s,(t=>t._ct.o===n));return h&&a?[a]:s}}function FZ(t){return e=>{const i=t?t.gs:"",s=e.some((t=>""!==t.gs))?e.filter((t=>""!==t.gs)):e;if(""===i)return s;const n=s.filter((t=>t.gs===i));return n.length>0?n:s}}function VZ(t){return e=>{const i=t?t.Lt:"";if(""===i)return e;const s=e.filter((t=>t.Lt===i));return s.length>0?s:e}}function WZ(t,e){return t=>{if(e&&e.length>0)for(const i of e){const e=t.filter((t=>t.IC.uC.some((t=>$n(t.Zrt,i)))));if(e.length>0)return e}return t}}function UZ(){return t=>{let e=[],i=-1/0;for(const s of t){const t=s._ct.VH;t>i?(i=t,e=[s]):t===i&&e.push(s)}return e}}r(),r();var GZ=function(t){return t.rTt="api",t.oTt="start",t}({});r();var HZ={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},ZZ=class{hTt(t,e,i){const s=this.qlt.maxRetries===1/0?HZ:this.qlt;return Ci((()=>this.aTt(t,e,i)),i,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async aTt(t,e,i){let s;for(const n of t)try{const t=new ke({Gu:n,Yk:Rr.Ak,jk:e,kE:this.uTt,yE:xe.GET,Aw:Wr.eE,SE:$h.tE,Vw:i,bE:15e3,AE:5e3}),s=await this.lW.Kk(t),r=await s.Rk(i);return{sTt:r,cTt:n,$k:s.$k}}catch(t){s=t}throw s}constructor(t,e,i=HZ){this.lW=t,this.uTt=e,this.qlt=i}};r();var XZ=class{async eTt(t,e,i){let s;for(const n of this.lTt)try{return await n.eTt(t,e,i)}catch(t){th(t),s=t}throw s}constructor(t){this.lTt=t}},zZ=class{async eTt(t,e,i){const s=await this.Fut.nrt(t);if(s)return{sTt:s.data,cTt:s.locationURL,$k:s.responseURL};throw new g("Manifest fetch from cache unsuccesful")}constructor(t){this.Fut=t}},qZ=class{async eTt(t,e,i){return await this.dTt.hTt(t,e,i)}constructor(t){this.dTt=t}};function YZ(t,e){return new XZ([new zZ(e),new qZ(t)])}var KZ=class{async eTt(t,e,i){const s=await this.iTt.eTt(t,e,i);return await this.fTt(s),s}async fTt(t){await this.l_.frt({key:eV(t.cTt),locationURL:Ki(t.cTt),responseURL:Ki(t.$k),data:t.sTt,references:[this._Tt.o]})}constructor(t,e,i){this.iTt=t,this.l_=e,this._Tt=i}};r();var lt=class extends pe{constructor(){super(Ti.Hy)}};r();var fn=class extends pe{constructor(){super(Ti.Gy)}};r(),r();var jZ=class extends xx{vTt(t){return t.sI=ic.LOADED,this.tt(t),t}mTt(t){for(const e of this.Z.uC)if(e.MC===t)return e}constructor(){super()}};function QZ(t,e){return""===e?t:t+" "+e}r(),r(),r();var JZ=class extends Le{get ka(){return this.su||(this.su=function(t){return nh(Lt(t),{get attributes(){return t.Hx},get eventID(){var e;return""+(null!=(e=t.gTt)?e:"")}})}(this)),this.su}iF(t){return this.U===t.U}constructor(t,e,i,s,n){super(t,e,i,!1,null==n?void 0:n.toString()),this.Hx=s,this.gTt=n}},$Z=class extends jZ{pTt(t){const e=this.uW.LI(hs.$V,"","","",void 0,Lr.EVENT_STREAM);return e.MC=t,this.vTt(e),e}wTt(t,e,i){const s=t.i9;var n;const r=null!=(n=t.Dx)?n:"";var o;const h=null!=(o=t._N)?o:1;var a;const u=null!=(a=t.ywt)?a:vo.ZERO,c=QZ(s,r);let l=this.mTt(c);l||(l=this.pTt(c));for(const s of t.Kq)if(!tX(s,l)){const t=eX(s,h,u,e);t.VO>i&&l.dW(t)}}async Dn(t){await this.er(),this.iSt=t,this.iSt.yn(Ti.Wy,this.yTt),this.yTt()}async er(){this.iSt&&(this.iSt.fn(Ti.Wy,this.yTt),this.iSt=void 0);for(const t of this.Z.uC)this.uW._W(t);await super.er()}constructor(t){super(),this.iSt=void 0,this.yTt=()=>{var t,e;const i=null!=(e=null==(t=this.iSt.Nyt())?void 0:t.Cn)?e:0;if(i>0)for(const t of this.Z.uC)oo(t,i);for(const t of this.iSt.Lpt)if(t.jn>i)for(const e of t.cyt)this.wTt(e,t,i)},this.uW=t}};function tX(t,e){const i=t.o;if(void 0!==i){if(Fo(e.L.uC,(e=>e.gTt===i&&e.U===t.qk)))return!0}return!1}function eX(t,e,i,s){const n=t.o,r=t.vL.toSigned().subtract(i),o=t.ct,h=t.qk,a=t.Hx,u=r.toNumber()/e+s.Cn,c=o?o.toNumber()/e:void 0,l=void 0!==c?u+c:s.YAt;return new JZ(u,l,h,a,n)}function iX(t,e,i,s,n){const r=[],o=Fo(i,(t=>t.i9===em));if(void 0===o)return;const h=o.Dx?function(t){const e=t.split(":",1)[0];switch(e){case"cbcs":case"cenc":return e;default:return}}(o.Dx.toLowerCase()):"cenc";if(void 0!==h){for(const t of i)if(t.i9!==em)for(const e of Am(t.i9)){const i=n&&t.s9?[t.s9]:[];r.push({aT:e,EG:i,xG:void 0,FU:void 0})}if(r.length)return{rU:t,spt:{bTt:h,oU:o.oU},ipt:r,ATt:e===ee.fE?s.slice():[],STt:e===ee._E?s.slice():[],o9:!1}}}function sX(t,e){if(!t)return e;if(!e)return t;const i=[],s=xu();var n;return nX(i,s,t.ipt),nX(i,s,e.ipt),{rU:t.rU,spt:{bTt:t.spt.bTt,oU:null!=(n=t.spt.oU)?n:e.spt.oU},ipt:i,ATt:rX(t.ATt,e.ATt,ms),STt:rX(t.STt,e.STt,ms),o9:t.o9||e.o9||!1}}function nX(t,e,i){for(const s of i){const i=s.aT.xw;let n;e.has(i)?(n=e.get(i),n.EG=rX(n.EG,s.EG,oX)):(n=Bo({},s),t.push(n),e.set(i,n))}}function rX(t,e,i){const s=t.slice();for(const t of e)i(s,t)||s.push(t);return s}function oX(t,e){for(const i of t)if(Ph(i,e))return!0;return!1}function hX(t,e,i){let s;const n=t.AG;if(n){const r=t.Yq,o=[];for(const e of t.Zrt)o.push(r+'; codecs="'+e+'"');s=iX(e||{},t.Aw,n,o,i)}for(const n of t.Zat)s=sX(s,aX(n,e,i));return s}function aX(t,e,i){return iX(e||{},t.Aw,t.AG||[],[t.Dk],i)}function uX(t){return t?t.ipt.map((e=>{const i=cX(t.rU,e.aT),s=t.spt.bTt;return{aT:e.aT,EG:e.EG,FU:e.FU,EH:[{initDataTypes:[e.aT.Tw],audioCapabilities:lX(t.ATt,s,null==i?void 0:i.audioRobustness),videoCapabilities:lX(t.STt,s,null==i?void 0:i.videoRobustness),persistentState:null==i?void 0:i.persistentState,distinctiveIdentifier:null==i?void 0:i.distinctiveIdentifier}]}})):[]}function cX(t,e){switch(e.Aw){case ge.gw:return t.widevine;case ge.mw:return t.playready;case ge.ww:return t.fairplay;case ge.pw:return t.clearkey}}function lX(t,e,i){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:e,robustness:i})))}function dX(t,e){const i=t=>{const i=e.indexOf(t.aT.xw);return i>=0?i:e.length};return Ii(t,((t,e)=>i(t)-i(e)))}r(),r();var fX=class extends jZ{pTt(t){const e=this.uW.LI(hs.$V,t.o,"thumbnails","",!1,Lr.DEFAULT);return e.xE=bh.Jn,this.vTt(e),e}async Dn(t){await this.er(),this.iSt=t,this.iSt.yn(Ti.Wy,this.tr),this.tr()}TTt(t){this.kTt(t),this.ETt()}ETt(){const t=[];for(const e of this.Z.uC)this.xTt(e)||t.push(e);for(const e of t)this.it(e)}kTt(t){const e=[];for(const i of this.Mdt)-1===t.indexOf(i)&&e.push(i);for(const t of e)we(this.Mdt,t)}async er(){this.iSt&&(this.iSt.fn(Ti.Wy,this.tr),this.iSt=void 0);for(const t of this.Mdt)t.fn(ko.iat,this.RTt);this.Mdt.length=0;for(const t of this.Z.uC)this.uW._W(t);await super.er()}gn(){return this.RTt=void 0,super.gn()}ITt(){var t,e;const i=null!=(e=null==(t=this.iSt.Nyt())?void 0:t.Cn)?e:0;if(i>0)for(const t of this.Z.uC)oo(t,i)}CTt(t){return this.Z.uC.some((e=>e.o===t.o))}PTt(t){return Fo(this.Z.uC,(e=>e.o===t.o))}xTt(t){return this.Mdt.some((e=>t.o===e.o))}constructor(t){super(),this.Mdt=[],this.tr=()=>{const t=[];for(const e of this.iSt.Lpt)for(const i of e.uft)if(i.Aw===ee.vE&&i.Zat.length>0){const e=i.Zat[0];t.push(e),this.CTt(e)||this.pTt(e),-1===this.Mdt.indexOf(e)&&(this.Mdt.push(e),e.yn(ko.iat,this.RTt)),this.DTt(e)}this.TTt(t)},this.DTt=t=>{const e=this.PTt(t);e&&t&&e.xE!==bh.Th&&(this.ITt(),function(t,e){const i=t.Bot,s=t.Xyt();if(!s)return;const n=s.cbt,r=s.lbt,o=t.ji,h=t.Ti,[a,u]=function(t){for(const e of t)if(lh(e.i9,vX)||lh(e.i9,mX)){const t=e.Dx.match(_X);if(t){const[,e,i]=t;return[Number(e),Number(i)]}}return[1,1]}(t.Rwt);let c=n;for(;c&&c.Hut<=r.Hut;){const s=t.Uyt.ct||c.ct,n=gX(e,c,t.flt(c).Gu,o,h,a,u,s);for(const t of n)e.dW(t);c=i.clt(c)}}(t,e))},this.uW=t;const e=this;this.RTt=function(){e.DTt(this)}}},_X=/^(\d+)x(\d+)$/,vX="http://dashif.org/guidelines/thumbnail_tile",mX="http://dashif.org/thumbnail_tile";function gX(t,e,i,s,n,r,o,h){const a=[],u=e.FO,c=r*o,l=s/r,d=n/o,f=_.round(l),v=_.round(d),m=h/c;if(1===c){const e=u+m;return pX(t,u,e,i)?a:[new Le(u,e,i,!1)]}for(let s=0;s<o;s++)for(let n=0;n<r;n++){const o=u+(s*r+n)*m,h=o+m,c=i+"#xywh="+_.round(n*l)+","+_.round(s*d)+","+f+","+v;if(pX(t,o,h,c)||a.push(new Le(o,h,c,!1)),h>=e.VO)return a}return a}function pX(t,e,i,s){return t.L.uC.some((t=>t.FO===e&&t.VO===i&&t.U===s))}r(),r(),r(),r();var wX=class extends Le{get _L(){return this.NTt}get Dx(){return this.MTt}get LTt(){return this.BTt}get ka(){return this.su||(this.su=function(t){return nh(Lt(t),{get schemeIDURI(){return t._L},get value(){return t.Dx},get emsgID(){return t.LTt}})}(this)),this.su}iF(t){return _e(this.U,t.U)}constructor(t,e,i,s,n,r){super(t,e,r,!1),this.NTt=i,this.MTt=s,this.BTt=n}},yX=class t extends jZ{vdt(e,i,s){const n=rr.jD(ra(e));if(!n)return;const r=function(t,e){const i=[];for(const s of t)HS(s,e)&&i.push(s);return i}(n,Tt.fD);if(r.length){const e=t.OTt(n,i,s);this.FTt(r,e,s)}}FTt(t,e,i){for(const s of t){let t;t=1===s.YD?s.vL.toNumber()/s._N+i:e+s.pL/s._N;const n=t+s.mL/s._N;"https://aomedia.org/emsg/ID3"===s._L||"https://developer.apple.com/streaming/emsg-id3"===s._L?this.VTt(s,t):this.WTt(s,t,n)}}WTt(t,e,i){const s=QZ(t._L,t.Dx);let n=this.mTt(s);n||(n=this.UTt(s),this.vTt(n)),n.dW(new wX(e,i,t._L,t.Dx,t.o,t.gL))}VTt(t,e){const i=TL(ra(t.gL));if(!i)return;const s=QZ(t._L,t.Dx);let n=this.mTt(s);n||(n=this.GTt(s),this.vTt(n));for(const t of i.k5){const i=new LL(e,t);QM(i,n.L.uC),n.dW(i)}}static OTt(t,e,i){const s=dn(t,Tt._D);return s?co(s.CL,s._N)+i:e}UTt(t){const e=this.uW.LI(hs.$V,"","","",void 0,Lr.EMSG);return e.MC=t,e.xE=bh.NC,e}GTt(t){const e=this.uW.LI(hs.$V,"","","",void 0,Lr.ID3);return e.MC=t,e.xE=bh.NC,e}async er(){for(const t of this.Z.uC)this.uW._W(t);await super.er()}constructor(t){super(),this.uW=t}},bX=class extends yX{async Dn(t){await this.er(),this.iSt=t,this.iSt.yn(Ti.Wy,this.yTt),this.yTt()}async er(){this.iSt&&(this.iSt.fn(Ti.Wy,this.yTt),this.iSt=void 0),await super.er()}constructor(...t){super(...t),this.yTt=()=>{var t,e;const i=null!=(e=null==(t=this.iSt.Nyt())?void 0:t.Cn)?e:0;this.iW(i)}}};r(),r();var AX=class{hrt(t,e){return this.HTt?this.Fut.hrt(t,e):Promise.resolve(!1)}urt(t,e){return this.HTt?this.Fut.urt(t,e):Promise.resolve(void 0)}async nrt(t){const e=await this.Fut.nrt(t);return this.HTt=void 0!==e,e}xQ(t){return this.Fut.xQ(t)}constructor(t){this.HTt=!1,this.Fut=t}};r();var SX=class extends kT{YB(){var t;return null!=(t=this.zB)?t:0}GC(){this.ea.SR=1/0}KB(){return!0}constructor(t,e,i){super(t,e,i)}},TX=[Ti.Xy,Ti.qy,Ti.Qy,Ti.Uy,Ti.Jy],kX=[Ti.zy,Ti.ob,Ti.Ny,Ti.Py],EX=class t extends Co{ZTt(t){return!!this.jG&&this.jG.cJ(t)}async gp(t){this.jG=await this.FB.Dn(t),this.XTt(),this.zTt(),this.jG.n4(this.ct)}qTt(t){return this.jG.dJ(t)}YTt(t){return this.jG._J(t)}async KTt(){this.jTt=this.QTt,this.jG&&(await this.FB.er(),this.jG=void 0)}r3(){this.jG.r3()}K2(){const t=this.ct;this.jG.ct<t&&this.jG.n4(t),this.jG.K2()}async JTt(t){const e=this.jG,i=[];e.J3&&i.push(iM(e.J3,t)),e.t4&&i.push(iM(e.t4,t)),await Promise.all(i)}$Tt(t,e,i,s,n,r){const o=this.FB,h=this.jG;return new NG(o,h,t,e,i,s,n,r,this.tkt,o,this.jgt,this.qlt,this.dpt,this.rH)}ekt(t,e,i){return t.dJ(e,i,this.jG)}async ikt(t,e,i,s){const n=this.$Tt(this.lW,this.vZ,this.Fut,this.Cc,t,s);return n.yn(ko.nat,this.skt),n.yn(Ti.Uy,this.Ds),await n.Tj(e,i),n}nkt(t){void 0===t&&(t=!1),this.rkt.Yw(),this.j9.Yw(),this.okt.Yw(),this.okt=new da,this.hkt=So(this.akt(this.ukt,this.Q9,this.hkt,t,this.okt.Vw),this.okt).catch(this.Ypt)}async akt(t,e,i,s,n){await Promise.all([t,e,i]),J(n),await ou(this.ckt.Vb,n);const r=this.lkt;await r.Oat(),this.K2(),J(n);const o=r.xc,h=r.qpt,a=r.zpt;let u=this.dkt(o,a,o,h,!1),c=this.fkt(a,u);!s&&this.ZTt(c)?await this._kt(a,u,c):(u=this.dkt(o,a,o,h,!0),c=this.fkt(a,u),await this.vkt(a,u,c,n)),J(n),this.hI?this.Eb(this.SR):this.mkt(),this.gkt()}async _kt(t,e,i){const s=this.lkt;await this.qTt(i),this.pkt=i,await this.ekt(s,t,e),await s.Vat(tc.ght)}async vkt(t,e,i,s){const n=this.lkt;this.n8(),this.wkt();const r=this.ykt;await this.KTt(),await this.gp(i),this.pkt=i,await this.ekt(n,t,e);try{const t=this.bkt(r,!1,!0,s);ah(t),await n.Vat(tc.ght),await t}finally{this.u8(),this.Akt()}}get ht(){return this.aO}get HG(){const t=this.ykt,e=this.Skt,i=e.eB(t);if(-1!==i)return{Cn:e.Cn(i),jn:e.jn(i)}}get Skt(){var t,e,i;const s=null!=(i=null==(t=this.lkt)?void 0:t.gR)?i:se.mB();var n;const r=null!=(n=null==(e=this.Tkt)?void 0:e.gR)?n:se.mB();return s.JL(r)}get gR(){return this.Skt.ks()}get wR(){var t;const e=null==(t=this.Byt)?void 0:t.hdt,i=null==e?void 0:e._yt;if(!e||!i)return;const s=i.getTime(),n=1e3*this.SR;return new Date(n+s)}set wR(t){var e;const i=null==(e=this.Byt)?void 0:e.hdt,s=null==i?void 0:i._yt;if(!t||!i||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Eb(r-n)}get bt(){return this.Cc}get ykt(){return void 0!==this.S9?this.S9:void 0!==this.kkt?this.kkt:this.FB.SR}get SR(){return this.ykt}set SR(t){this.ER(t)}ER(t,e){this.Eb(t,t===1/0)}get ct(){let t=NaN;return this.lkt&&this.lkt.Mpt?t=this.lkt.jn:this.Byt&&void 0!==this.Byt.hdt.Aw&&(t=this.Byt.hdt.wyt?this.Byt.hdt.wyt.swt():1/0),t}get jn(){return this.ct}get RR(){return this.hI?this.T9():!(!this.lkt||!this.lkt.Mpt)&&this.FB.RR}T9(){return!!this.hI&&(!(!this.lkt||!this.lkt.Mpt)&&this.ykt===this.lkt.jn)}get lt(){return this.zG}get DR(){return this.qG}get MR(){}Ekt(){var t;const e=this.xkt;if(0===e.V)return!0;var i;const s=null!=(i=null==(t=this.HG)?void 0:t.jn)?i:this.ykt,n=e.Cn(0);return s>=n||xs(s,n,.001)}Rkt(){var t;if(!this.Byt)return!1;if(this.Byt.hdt.Aw!==Me.gW)return!1;const e=null==(t=this.lkt)?void 0:t.xc;if(e&&e.rat)return!0;const i=[];for(const t of this.Byt.hdt.Lpt){const e=t.Dyt,s=t.YAt;void 0!==e&&void 0!==s&&i.push(e,s)}const s=new se(i).QL();return function(t,e,i){if(!e.V||!i.V)return se.mB();const s=e.Cn(0),n=e.jn(e.V-1),r=t.Sn(i).YL().Sn(t).JL(e);return se.vB(r.Cn(0),r.jn(r.V-1)).$L(r).hB(((t,e)=>t<s&&e<=n&&e-t>Si))}(this.Skt,this.xkt,s).V>0}get WR(){return Bo({},this.QTt,{vO:wl.Fg.aG(),mO:this.Ikt,gO:{amountOfBufferedAudioSegments:this.Ckt,amountOfBufferedVideoSegments:this.Pkt}})}get QTt(){return function(t,e){return{dO:t.dO+e.dO,fO:t.fO+e.fO,_O:t._O+e._O}}(this.jTt,this.FB.UR())}get GR(){return this.FB.GR}set GR(t){this.FB.GR=t}get qR(){return this.E9?this.Dkt:this.lkt&&this.lkt.Mpt?this.Nkt:this.Dkt}get KR(){return this.FB.KR}set KR(t){this.FB.KR=t}get JR(){let t=this.Ro;return this.lkt&&(t=t.JL(this.Mkt)),t.QL(.1).ks()}get Mkt(){return this.FB.JR}Lkt(t){this.Ro=this.Ro.JL(t)}get tI(){return this.KG}set tI(t){this.KG=t,this.Bkt()}get sI(){let t=this.FB.sI;return this.Okt&&(t=_.max(Ht.Gn,t)),t}get xkt(){return this.Fkt(!1)}get Vkt(){return this.Fkt(!0)}get rI(){return this.xkt.ks()}get hI(){return this.aZ||this.Wkt}get Wkt(){return this.FB.hI}get E4(){return this.FB.E4}get QG(){}get Ukt(){var t,e;return null!=(e=null==(t=this.Byt)?void 0:t.hdt.Aw)?e:Me.mW}get nt(){return this.Ll}get rt(){return this.cO}get cI(){var t;return this.Gkt||(null==(t=this.Hkt())?void 0:t.Ti)||0}get fI(){var t;return this.Zkt||(null==(t=this.Hkt())?void 0:t.ji)||0}get vI(){return this.FB.vI}set vI(t){this.FB.vI=Vs(t,0,1)}get pI(){return this.JG}get yI(){return!1}set yI(t){}get $G(){return this.tH}Xkt(t){t.yn(TX,this.Ds),t.yn(Ti.eb,this.zkt),t.yn(Ti.wy,this.qkt),t.yn(yo.da,this.Ykt),t.yn(Ti.Ay,this.Kkt),t.yn(Ti.qy,this.jkt),t.yn("Hpt",this.Qkt),t.yn("bpt",this.Qkt)}Jkt(t){t.fn(TX,this.Ds),t.fn(Ti.eb,this.zkt),t.fn(Ti.wy,this.qkt),t.fn(yo.da,this.Ykt),t.fn(Ti.Ay,this.Kkt),t.fn(Ti.qy,this.jkt),t.fn("Hpt",this.Qkt),t.fn("bpt",this.Qkt)}$kt(t){t.yn(Ti.Xy,this.Ds)}tEt(t){t.fn(Ti.Xy,this.Ds)}Hkt(){if(!this.lkt)return;const t=Fo(this.lkt.zpt,(t=>t.bat===ee._E));return t?t.EC:void 0}Fkt(t){var e;const i=null==(e=this.Byt)?void 0:e.hdt;if(!i)return se.mB();const s=i.PSt;let n=t?i.zAt:i.Kyt;if(void 0===s||void 0===n)return se.mB();if(!t){const t=this.Mkt;t.V>0&&t.jn(t.V-1)>n&&(n=_.min(t.jn(t.V-1),i.zAt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),se.vB(s,n).zL()}async Dn(t,e){let i,s;J(e);const n=this.Byt.hdt;try{i=n.DSt,s=n.CSt}catch(t){throw new g("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!i)throw new g("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new g("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.eEt(t.textTracks),this.n8();const r=this.rft(i),o=uc(i,r,void 0,void 0,this.Rpt),h=this.dkt(i,o,i,o,!0);o.forEach((t=>t.Rt=!0));const a=this.fkt(o,h);await this.gp(a),this.pkt=a,J(e);const u=await this.ikt(i,r,o,h);J(e),this.iEt(u),this.u8(),J(e),await u.Vat(),J(e),!this.sEt&&s>0&&this.Eb(s,!0,GZ.oTt),this.aZ||(this.mkt(),this.nEt())}mkt(){this.rkt.Yw(),this.rkt=new da,this.ukt=So(this.rEt(this.ukt,this.hkt,this.rkt.Vw),this.rkt).catch(this.Ypt)}oEt(){this.rkt.Yw()}async rEt(t,e,i){for(await Promise.all([t,e]),J(i);;){var s;const t=null==(s=this.lkt)?void 0:s.xc;if(!t){0;break}if(!await this.hEt(t,i)){0;break}}}async hEt(t,e){var i;J(e);const s=this.lkt;for(0;this.Byt.hdt.Aw===Me.gW&&void 0===(null==(i=this.ZAt(t))?void 0:i.Dyt);)await ou(this.aEt.zSt,e),await this.uEt();for(J(e),await this.uEt(),J(e);!s.Ipt();)await s.vy(iU.mft,e),await this.uEt();J(e),await this.uEt(),J(e);const n=this.ZAt(t);return n?(this.cEt(n)?await this.lEt(n,e):await this.dEt(n,e),!0):(this.r3(),!1)}cEt(t){var e,i,s,n,r;const o=null!=(r=null==(e=this.Cc)?void 0:e.seamlessSwitchStrategy)?r:Gu.jB;if(o===Gu.QB)return!0;if(o===Gu.JB)return!1;const h=this.lkt,a=null==h?void 0:h.xc,u=null==h?void 0:h.zpt,c=uc(t,this.rft(t),a,u,this.Rpt),l=this.dkt(t,c,a,u,!1);if(o===Gu.CLEAR_ONLY&&((null==(i=this.lkt)?void 0:i.ept)||l)||o===Gu.SAME_DRM_ONLY&&!((null==(s=this.lkt)?void 0:s.ept)&&l||!(null==(n=this.lkt)?void 0:n.ept)&&!l))return!1;const d=this.fkt(c,l);return this.ZTt(d)}fEt(){return!0}_Et(t){const e=this.vEt();for(const i of e)i!==t&&(i.xE=bh.Th)}gkt(){if(void 0!==this.mEt){if(this.mEt.BC){const t=Fo(this.ht.uC,(t=>t.Rt));void 0!==t&&this.mEt.gs===t.gs||(this.mEt.xE=bh.Th)}}else this.gEt()}gEt(){if(this.vEt().length)return;const t=Fo(this.ht.uC,(t=>t.Rt));if(void 0===t)return;const e=this.nt.uC.filter((t=>t.BC));for(const i of e)if(i.gs===t.gs)return i.xE=bh.Jn,void(this.mEt=i)}vEt(){return this.nt.uC.filter((t=>t.xE===bh.Jn&&(t.Lt===hs.QV||t.Lt===hs.jV)))}pEt(t){if(t&&this.mEt){const e=function(t,e){if(""===t.gs)return;return e.filter((e=>e.gs===t.gs))[0]}(this.mEt,t.nt.uC);e&&(e.xE=bh.Jn)}}async lEt(t,e){var i,s;const n=this.lkt;let r=this.Tkt;const o=this.pkt;try{J(e);const i=n.xc,s=n.zpt,o=this.rft(t),h=uc(t,o,i,s,this.Rpt),a=this.dkt(t,h,i,s,!1);h.forEach((t=>t.Rt=!0));const u=this.fkt(h,a);for(0,await n.Oat(),this.K2(),J(e),r&&r.xc===t?(this.ZTt(u)&&await this.qTt(u),this.pkt=u):(r&&await r.gn(!0),this.ZTt(u)&&await this.qTt(u),this.pkt=u,r=await this.ikt(t,o,h,a),this.Tkt=r,this.$kt(r),this.wEt.fC=r.nt,r.Wat(n)),await r.Vat(),J(e);this.ykt<t.Cn;)await this.FB.vy(Ti.sb,e);J(e),this.iEt(r)}catch(t){throw Je(t)&&(r&&await r.Oat(),o&&this.pkt!==o&&(this.ZTt(o)&&await this.qTt(o),this.pkt=o)),t}(null==(s=this.Cc)||null==(i=s.dash)?void 0:i.forceSeekToSynchronize)&&await this.yEt(t,e)}async yEt(t,e){const i=Date.now()/1e3;if(void 0===this.bEt)this.bEt=i;else if(i-this.bEt>900){this.bEt=i,this.wkt();const s=_.max(this.ykt,t.Cn);try{await this.bkt(s,!1,!0,e)}finally{this.Akt()}}}async dEt(t,e){for(J(e),await this.lkt.Oat(),this.K2(),await this.JTt(t.Cn),J(e),this.r3();!this.FB.RR&&this.ykt<t.Cn;)await this.FB.vy([Ti.sb,Ti.Cy],e);J(e);const i=this.lkt.xc,s=this.lkt.zpt,n=this.rft(t),r=uc(t,n,i,s,this.Rpt),o=this.dkt(t,r,i,s,!0);r.forEach((t=>t.Rt=!0));const h=this.fkt(r,o);this.lkt&&(this.AEt.fn(No.la,this.SEt),await this.lkt.gn(),this.AEt.yn(No.la,this.SEt),this.lkt=void 0),this.Tkt&&(await this.Tkt.gn(),this.Tkt=void 0),this.wkt(),this.n8();const a=_.max(this.ykt,t.Cn);await this.KTt(),await this.gp(h),this.pkt=h;const u=await this.ikt(t,n,r,o);this.iEt(u);try{const t={stack:[],error:void 0,hasError:!1};try{const i=this.bkt(a,!1,!0,e);ah(i),await u.Vat();const s=zs(t,da.Qw([e]),!1);await Promise.race([i,u.vy([iU.mft],s.Vw)])}catch(e){t.error=e,t.hasError=!0}finally{lo(t)}}finally{this.u8(),this.Akt()}}async uEt(){const t=this.Tkt;t&&t.xc.rat&&(await t.gn(!0),this.Tkt=void 0)}static TEt(t,e){const i=[],s=[];let n=!e.some((t=>t.hft.some((t=>"main"===t.Dx))));for(const t of e){if(-1!==i.indexOf(t))continue;const r=RX(t.ydt.concat(t.hft),n);n=!1;const o=t.Zat.map((t=>t.aat)),h=new jW(t,o,r),a=IX(t,e);for(const t of a)h.Ldt(t),i.push(t);s.push(h)}return new DZ(t,s)}rft(e){const i=[],s=[];for(const t of e.Tpt)mT(t.Aw)&&(0===t.Zat.length?this.wo(new eU("No supported representation found in the AdaptationSet with mimetype : "+t.Aw)):t.Aw===ee.fE?i.push(...t.uft):s.push(...t.uft));const n=[];return i.length>0&&n.push(t.TEt(ee.fE,i)),s.length>0&&n.push(t.TEt(ee._E,s)),n}fkt(t,e){var i,s,n,r,o,h,a,u;const c=t.map((t=>{var e;return Kh.Rlt(null!=(e=t.Ndt)?e:t.Zat,bT(t.bat,this.Rpt))})).map((t=>({Dk:t.Dk}))),l=null==(s=this.Cc)||null==(i=s.dash)?void 0:i.desiredTimescale;var d;const f=(null==(n=this.Cc)?void 0:n.seamlessSwitchStrategy)!==Gu.JB&&(null==(r=this.Cc)?void 0:r.seamlessSwitchStrategy)!==Gu.CLEAR_ONLY&&(null==(o=this.Cc)?void 0:o.seamlessSwitchStrategy)!==Gu.SAME_DRM_ONLY&&(null!=(d=null==(a=this.Cc)||null==(h=a.dash)?void 0:h.needsTimescaleShifting)?d:Ms.Ys.hp),_=null==(u=this.Cc)?void 0:u.useManagedMediaSource;return{Aw:Mr.gW,u4:c,eH:uX(e),o9:null==e?void 0:e.o9,hp:f,i3:l,b4:_}}static kEt(t,e){if(!t.length)return;let i;for(const s of t){const t=0===s.Fdt.length;i=sX(i,hX(s._ct,e,t))}return(null==e?void 0:e.preferredKeySystems)&&i&&(i.ipt=dX(i.ipt,e.preferredKeySystems)),i}dkt(e,i,s,n,r){var o,h;const a=this.Cc.contentProtection;let u=t.kEt(i,a);if(void 0!==u)return u;var c;const l=null!=(c=null==(o=this.Cc)?void 0:o.seamlessSwitchStrategy)?c:Gu.jB;if(l===Gu.JB||l===Gu.CLEAR_ONLY||l===Gu.SAME_DRM_ONLY)return;const d=null==(h=this.lkt)?void 0:h.ept;if(!r&&void 0!==d){const t=!d.o9;if(l===Gu.jB&&t&&!this.fEt())return;return d}const f=!r&&l===Gu.jB;return u=this.EEt(e,a,s,n,f),void 0!==u?(u.o9=!0,u):void 0}EEt(e,i,s,n,r){let o=e,h=!1;for(;;){if(o=h?this.XAt(o):this.ZAt(o),void 0===o){if(h)return;h=!0,o=e;continue}const a=uc(o,this.rft(o),s,n,this.Rpt),u=t.kEt(a,i);if(r){const t=this.fkt(a,u);if(!this.ZTt(t))return}if(void 0!==u)return u}}eEt(t){for(const e of t)e.src&&this.cH.aW(e);Mx(this.cH.Z)}TI(){var t;const e=this.qR;this.Dkt=!0,e||(this.E9||(this.xEt(new Bu),this.REt()),(null==(t=this.GG)?void 0:t.gB)&&this.GG.EI(),this.IEt())}kI(){this.CEt||(this.CEt=new os),this.PEt();const t=this.CEt.Vb;return ah(t),t}PEt(){if(this.Dkt=!1,this.O9=!0,this.DEt=!1,this.Bkt(),this.RR){const t=this.xkt;t.V>0&&this.Eb(t.Cn(0))}this.E9||this.V9().then(this.NEt,this.xEt),this.skt(),this.IEt()}get Nkt(){return this.FB.qR}V9(){return this.FB.kI()}REt(){this.FB.TI()}n8(){this.E9||(this.Dkt=this.qR,this.E9=!0,this.REt())}u8(){this.E9&&(this.E9=!1,this.Dkt||this.V9().then(this.NEt,this.xEt),this.skt(),this.IEt())}IEt(){const t=this.DW,e=this.qR;t!==e&&(this.DW=e,e?this.wo(new fl(this.SR)):this.wo(new H(this.SR)))}Eb(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=GZ.rTt),this.sEt=!0,this.rkt.Yw(),this.j9.Yw(),this.aZ=!0,this.S9=t,this.DEt=this.DEt&&this.T9(),this.Lkt(this.Mkt),this.MEt(new L(this.SR)),this.j9=new da,this.Q9=So(this.J9(t,this.ukt,this.Q9,this.hkt,this.j9.Vw,e,i),this.j9).catch(this.Ypt),this.Q9}LEt(){this.j9.Yw()}async J9(t,e,i,s,n,r,o,h){var a;void 0===r&&(r=!1),void 0===o&&(o=GZ.rTt),void 0===h&&(h=!1),null==(a=this.GG)||a.EI();try{var u,c;0,await Promise.all([e,i,s]),J(n),await ou(this.ckt.Vb,n);const a=this.xkt.qL(t);this.S9=a;const l=h||(null==(c=this.Cc)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.SR,d=this.BEt(a),f=this.lkt;if(l||!f||!f.rI.kr(a)&&o!==GZ.oTt&&f.xc!==d){if(d){let t=this.Tkt;if(this.n8(),f&&await f.Oat(),t&&t.xc===d&&!l){const e=this.fkt(t.qpt,t.ept);this.K2(),this.ZTt(e)&&await this.qTt(e),this.pkt=e}else{t&&await t.gn(!0);const e=this.rft(d),i=null==f?void 0:f.xc,s=null==f?void 0:f.zpt,n=uc(d,e,i,s,this.Rpt);let r=this.dkt(d,n,i,s,!1);n.forEach((t=>t.Rt=!0));let o=this.fkt(n,r);this.cEt(d)&&!l?(this.K2(),this.ZTt(o)&&await this.qTt(o)):(r=this.dkt(d,n,i,s,!0),o=this.fkt(n,r),f&&(this.AEt.fn(No.la,this.SEt),await f.gn(),this.AEt.yn(No.la,this.SEt),this.lkt=void 0),await this.KTt(),await this.gp(o)),this.pkt=o,t=await this.ikt(d,e,n,r),this.Tkt=t,this.wEt.fC=t.nt,this.$kt(t),t.Wat(this.lkt)}await t.Vat(tc.wht),this.iEt(t)}}else{0;const t=this.Tkt;if(t&&!t.Bpt){await t.Oat(),this.K2();const e=this.fkt(f.qpt,f.ept);this.ZTt(e)&&await this.qTt(e),this.pkt=e}}0;const _=this.bkt(a,r,!1,n);ah(_),this.S9=void 0,await this.lkt.Vat(tc.wht),J(n),this.mkt(),await _,J(n),this.u8(),this.aZ=!1,this.OEt(new ha(this.SR)),this.nEt()}catch(t){if(Je(t))return void 0;0}}nEt(){if(this.qR||this.hI||void 0===this.qB)return;const t=this.SR;var e,i;this.SR+this.qB-this.pI.bd.maximumOffset<t?null==(e=this.GG)||e.Cn():null==(i=this.GG)||i.EI()}async bkt(t,e,i,s){let n,r,o=!0,h=t;for(;;){const a={stack:[],error:void 0,hasError:!1};try{const u=this.Vkt;if(u.V>0){const e=u.qL(t);h!==e&&(u.kr(h)&&this.Byt.hdt.Aw===Me.gW||(h=e,o=!0))}if(o)o=!1,null==r||r.Yw(),r=new da,r.Kw(s),n=So(this.FEt(h,e,i,r.Vw),r),ah(n);else if(!this.Wkt&&!this.E4)break;const c=zs(a,da.Qw([s]),!1);await Promise.race([n,this.vy([Ti.Qy,Ti.xy],c.Vw),this.Byt.hdt.vy(ko.iat,c.Vw)])}catch(t){a.error=t,a.hasError=!0}finally{lo(a)}}}async FEt(t,e,i,s){for(this.FB.Eb(t,e,i);this.Wkt||this.E4;)await this.FB.vy([Ti.Ky,Ti.Oy],s)}wkt(){void 0===this.kkt&&(this.kkt=this.ykt,this.FB.fn(Ti.jy,this.MEt),this.FB.fn(Ti.Ky,this.OEt))}Akt(){if(void 0===this.kkt)return;const t=this.ykt;this.kkt=void 0,this.FB.yn(Ti.jy,this.MEt),this.FB.yn(Ti.Ky,this.OEt),this.ykt!==t&&this.jc()}VEt(t){this.Ro=this.Ro.JL(t)}BEt(t){const e=this.Byt.hdt,i=e.Lpt.filter((t=>t.ct>=.2));if(0===i.length)return;const s=i[0];if(t<=s.Cn)return s;for(const e of i)if(e.jn>t)return e;return e.Aw!==Me.gW?i[i.length-1]:void 0}XAt(t){let e=t.Jpt;for(;e&&e.ct<.2;)e=e.Jpt;return e}ZAt(t){let e=t.$pt;for(;e&&e.ct<.2;)e=e.$pt;return e}async xa(t,e,i){const s={stack:[],error:void 0,hasError:!1};try{var n;if(this.rH.SG(t.contentProtection),this.WEt(),this.Cc&&!Fn(this.Cc)&&await this.er(),!t||Fn(t))return;const o=zs(s,da.Qw([i]),!1);this.fW=da.Qw([o.Vw]),this.Cc=t,this.UEt=e,this.Rpt=t.abr,this.dpt=t.ignoreEmbeddedTextTrackTypes;const h=YZ(new ZZ(this.lW,Boolean(this.Cc.useCredentials),this.qlt),this.Fut);var r;if(this.ISt(!0),this.aEt=new CZ({OC:Ms.Nh(this.Cc.src),LSt:null!=(r=null==(n=this.Cc.latencyConfiguration)?void 0:n.targetOffset)?r:this.Cc.liveOffset,WSt:this.Cc.timeServer,kE:this.Cc.useCredentials},this.GEt(this.Rpt),this.lW,h,this.Cc.dash),this.Byt=this.aEt.Pr,this.Byt.hdt.yn(Ti.Vy,this.HEt),this.Byt.hdt.yn(Ti.Wy,this.ZEt),this.Byt.hdt.yn(aZ.$At,this.XEt),this.Byt.hdt.yn(ko.iat,this.skt),await this.zEt.Dn(this.Byt.hdt),await this.qEt.Dn(this.Byt.hdt),ms(this.dpt,Lr.EMSG)||(this.jgt=new bX(this.uW),this.Ll.DG(this.jgt.Z),await this.jgt.Dn(this.Byt.hdt)),t.latencyConfiguration){const e=t.latencyConfiguration;this.GG=new SX(this,this.FB,e),this.GG.Rt=!0,this.JG.Ma(this.GG)}this.Bkt(),o.Hw()}catch(t){s.error=t,s.hasError=!0}finally{lo(s)}}async YEt(){const t=this.Byt.hdt.XR;var e,i;(this.ISt(t),t)?this.Qkt():(await Promise.all([null==(e=this.lkt)?void 0:e.Oat(tc.Mht),null==(i=this.Tkt)?void 0:i.Oat(tc.Mht)].filter(ji)),this.oEt(),this.LEt(),this.okt.Yw())}get XR(){return this.RSt}ISt(t){this.RSt!==t&&(this.RSt=t,this.wo(t?new lt:new fn))}Bkt(){this.Byt&&(this.KEt=this.jEt(this.KEt,this.fW.Vw).catch(this.Ypt))}async jEt(t,e){t&&(await t,J(e));try{this.tI===hl.jB||this.O9?await this.QEt(e):this.tI===hl.$V&&await this.JEt(e)}catch(t){throw th(t),this.MH(new A(Qa.MANIFEST_LOAD_ERROR,t.message,t)),t}}async QEt(t){await this.JEt(t),this.$Et||(this.$Et=!0,this.ckt.Kw(this.Dn(this.UEt,t)));try{await this.ckt.Vb}catch(t){th(t),this.MH(new A(Qa.MEDIA_DECODE_ERROR,t.message,t))}}async JEt(t){await ou(this.aEt.W,t);const e=this.Byt.hdt;if(void 0===this.GG&&e.Aw===Me.gW){const t=e.kyt,i=(null==t?void 0:t.oSt)?(null==t?void 0:t.oSt)/1e3:e.NSt,s={minimumOffset:(null==t?void 0:t.sSt)?(null==t?void 0:t.sSt)/1e3:.5*i,maximumOffset:(null==t?void 0:t.rSt)?(null==t?void 0:t.rSt)/1e3:1.5*i,targetOffset:i,forceSeekOffset:2.5*i,minimumPlaybackRate:At,maximumPlaybackRate:mt};this.GG=new SX(this,this.FB,s),this.JG.Ma(this.GG)}}iEt(e){const i=this.lkt;e!==i&&(this.lkt&&this.Jkt(this.lkt),this.Tkt&&this.tEt(this.Tkt),i&&this.Lkt(this.Mkt),this.lkt=e,this.Tkt=i,this.Xkt(this.lkt),this.Tkt&&this.$kt(this.Tkt),this.aO.fC=e.ht,this.cO.fC=e.rt,this.pEt(e),this.AEt.fn(No.la,this.SEt),t.txt(this.AEt),this.AEt.yn(No.la,this.SEt),this.AEt.fC=e.nt,this.wEt.fC=void 0,this.gEt())}static txt(t){for(const e of t.uC)e.xE=bh.Th}ge(){this.FB.ge()}be(){this.FB.be()}MH(t){this.zG||(ah(this.er()),this.zG=Xs(t),this.qG=t,this.wo(new Ga(t)))}WEt(){this.zG=void 0,this.qG=void 0}XTt(){const t=this.jG;t&&(t.t4&&(t.t4.wj=this.vZ.Cj),t.J3&&(t.J3.wj=this.vZ.Cj))}zTt(){const t=this.jG;t&&(t.t4&&(t.t4.Sj=this.vZ.Sj),t.J3&&(t.J3.Sj=this.vZ.Sj))}determineStallJumpTarget(){if(this.lkt)return this.lkt.Ipt()&&this.SR>this.lkt.jn-JN&&!this.lkt.Mpt?this.lkt.jn:void 0}async er(){if(this.ixt)return this.ixt;try{this.ixt=this.sxt(),await this.ixt}finally{this.ixt=void 0}}async sxt(){this.KR=1,this.fW.Yw(),this.LEt(),this.oEt(),this.okt.Yw(),this.ckt.Yw(),this.sEt=!1,this.TI(),this.O9=!1,this.DEt=!1,this.aO.fC=void 0,this.cO.fC=void 0,this.AEt.fC=void 0,this.wEt.fC=void 0,this.KEt&&(await this.KEt.catch(It),this.KEt=void 0),await Promise.all([this.ukt,this.Q9,this.hkt,this.ckt.Vb.catch(It)]),this.lkt&&(await this.lkt.gn(!0),this.lkt=void 0),this.Tkt&&(this.tEt(this.Tkt),await this.Tkt.gn(!0),this.Tkt=void 0),await this.KTt(),this.pkt=void 0,this.mEt=void 0,this._H.er(),await this.zEt.er(),await this.qEt.er(),void 0!==this.jgt&&(this.Ll.BG(this.jgt.Z),await this.jgt.gn(),this.jgt=void 0),this.uW.er(),this.Byt&&(this.Byt.hdt.fn(Ti.Vy,this.HEt),this.Byt.hdt.fn(Ti.Wy,this.ZEt),this.Byt.hdt.fn(aZ.$At,this.XEt),await this.aEt.gn(),this.Byt=void 0),this.Okt=!1,this.nxt=NaN,this.rxt=0,this.oxt=0,this.kkt=void 0,this.E9=!1,this.Ro=se.mB(),this.DW=!0,this.S9=void 0,this.hxt=!1,this.aZ=!1,this.$Et=!1,this.ckt=new os,this.Ikt=0,this.Ckt=0,this.Pkt=0,this.Cc=void 0,this.UEt=void 0,this.dpt=[],this.bEt=void 0,this.JG.er(),this.GG=void 0,this.jTt={dO:0,fO:0,_O:0},await this.cH.er(),this.FB.fH(),this.axt.er()}async gn(){this.$o(),this.WEt(),await this.er(),this.$o(),this.aO.gn(),this.cO.gn(),this.AEt.gn(),this.wEt.gn(),this.Ll.gn(),this._H.gn(),this.uxt.Hw(),await this.zEt.gn(),await this.qEt.gn(),this.uW.gn(),this.axt.gn(),this.FB.fn(Ti.xy,this.Q8),this.FB.fn(hh.Iy,this.d9),this.FB.fn(Ti.Cy,this.cxt),this.FB.fn(Ti.jy,this.MEt),this.FB.fn(Ti.Ky,this.OEt),this.FB.fn(Ti.Yy,this.jkt),this.FB.fn(Ti.sb,this.jc),this.FB.fn([Ti.ro,Ti.Zy],this.lxt),this.FB.fn(kX,this.Ds),await this.cH.gn(),this.Ll.gn(),this.vZ.fn("pj",this.dxt),this.vZ.fn("Aj",this.fxt),this.FB.fn(yo.da,this._xt),this.FB.fn([Ti.Sy,Ti.Ay],this.Ds),this.FB.fn(Ti.fb,this.ewt),this.FB.gH=void 0,this.rH.fn("contentProtectionsTracked",this.vxt),this.FB.m7=void 0}bI(){return this.FB.Ca}Sa(){return this.FB.lH}get OR(){return!1}xI(){return!1}RI(){}II(){}CI(){}DI(){this.nkt(!0)}get qB(){var t;const e=null==(t=this.Byt)?void 0:t.hdt;if(e&&e.Aw===Me.gW&&e._yt)return e.odt().getTime()/1e3-e._yt.getTime()/1e3-this.SR}LI(t){const e=this.FB.dH(t);return this.axt.tt(e),e}constructor(t,e,i,s,n,r,o){super(),this.lkt=void 0,this.Tkt=void 0,this.O9=!1,this.nxt=NaN,this.zG=void 0,this.qG=void 0,this.E9=!1,this.kkt=void 0,this.S9=void 0,this.hxt=!1,this.rxt=0,this.oxt=0,this.Okt=!1,this.fW=new da,this.ckt=new os,this.$Et=!1,this.Byt=void 0,this.aEt=void 0,this.RSt=!0,this.Dkt=!0,this.CEt=void 0,this.Ro=se.mB(),this.KG=hl.QH,this.KEt=void 0,this.DW=!0,this.Cc=void 0,this.UEt=void 0,this.Rpt=void 0,this.dpt=[],this.aZ=!1,this.rkt=new da,this.ukt=Promise.resolve(),this.j9=new da,this.Q9=Promise.resolve(),this.sEt=!1,this.DEt=!1,this.okt=new da,this.hkt=Promise.resolve(),this.pkt=void 0,this.jgt=void 0,this.Ikt=0,this.Ckt=0,this.Pkt=0,this.tH=new Yh,this.bEt=void 0,this.jTt={dO:0,fO:0,_O:0},this.jG=void 0,this.GG=void 0,this.Qkt=t=>{var e,i,s;let n;"Hpt"===(null==t?void 0:t.type)&&(n=t.Gdt),n&&(null==(e=n.Idt)?void 0:e.Aw)===ee.fE&&(null==(s=this.bt)||null==(i=s.dash)?void 0:i.forceRecreateMediaSourceOnAudioSwitch)?this.nkt(!0):this.nkt()},this.ewt=t=>{var e;null==(e=this.lkt)||e.ewt(t)},this.jc=()=>{this.wo(new ri(this.SR,this.wR))},this.d9=t=>{this.wo(new NZ(this.SR,t.Tw,t.Tb))},this.zkt=t=>{this.Ikt+=t.mO,this.wo(t)},this.qkt=t=>{const e=t.segments.filter((t=>t.Gct));t.track===ee.fE?this.Ckt=e.length:t.track===ee._E&&(this.Pkt=e.length)},this.Q8=()=>{const t=this.ct;S(t)||t===this.nxt||(this.nxt=t,this.wo(new Ls(this.nxt)))},this.lxt=()=>{this.skt(),this.IEt()},this.cxt=t=>{this.DEt||!this.RR||this.hI||(this.DEt=!0,this.wo(null!=t?t:new Te(this.SR)))},this.ZEt=t=>{this.Ds(t),this.Okt||(this.Okt=!0,this.uxt.mxt())},this.HEt=()=>{this.Byt.hdt.fn(Ti.Vy,this.HEt),this.wo(new Di)},this.Kkt=t=>{var e;if(t.errorObject.code===Qa.CONTENT_PROTECTION_OUTPUT_RESTRICTED&&(null==(e=this.lkt)?void 0:e.qpt.every((t=>!t.Vdt))))return;this.MH(t.errorObject),this.wo(t)},this.Ykt=t=>{this.MH(t.errorObject)},this.Ypt=t=>{Je(t)||this.MH(new A(Qa.MEDIA_DECODE_ERROR,t.message,t))},this.skt=()=>{if(!this.qR)if(this.Ekt())if(this.Rkt()){const t=this.Byt.hdt.CSt;this.Eb(t,!0)}else;else{const t=this.Byt.hdt.CSt;this.Eb(t,!0)}},this.MEt=t=>{this.hxt=this.hI,this.wo(t)},this.OEt=t=>{const e=this.hxt,i=this.hI;this.hxt=i,e&&!i&&this.wo(t),this.cxt()},this.jkt=()=>{const t=this.fI,e=this.cI;this.rxt===t&&this.oxt===e||(this.rxt=t,this.oxt=e,this.wo(new P))},this.SEt=t=>{const e=t.Ht;e.xE===bh.Jn?(this._Et(e),this.mEt=e):e===this.mEt&&e.xE===bh.Th&&(this.mEt=void 0,this.gEt())},this.NEt=()=>{this.E9||this.CEt&&(this.CEt.Ob(),this.CEt=void 0)},this.xEt=t=>{this.E9||this.CEt&&(this.CEt.Fb(t),this.CEt=void 0)},this.XEt=()=>{this.YEt().catch(this.Ypt)},this._xt=t=>{this.MH(vk(t.lt))},this.dxt=()=>{this.XTt()},this.fxt=()=>{this.zTt()},this.vxt=t=>{this.YTt(t.AG)},this.lW=t,this.Fut=new AX(n),this.FB=r,this.tkt=o,this.vZ=i,this.vZ.yn("pj",this.dxt),this.vZ.yn("Aj",this.fxt),this.JG=s,this.qlt=e.retryConfiguration,this.aO=new Wh,this.cO=new Wh,this.rH=new Xh(t),this.rH.yn("contentProtectionsTracked",this.vxt),this.FB.yn(Ti.xy,this.Q8),this.FB.yn(hh.Iy,this.d9),this.FB.yn(Ti.Cy,this.cxt),this.FB.yn(Ti.jy,this.MEt),this.FB.yn(Ti.Ky,this.OEt),this.FB.yn(Ti.Yy,this.jkt),this.FB.yn(Ti.sb,this.jc),this.FB.yn([Ti.ro,Ti.Zy],this.lxt),this.FB.yn(kX,this.Ds),this.FB.yn(yo.da,this._xt),this.FB.gH=this.rH,this.FB.m7=this,this.FB.yn([Ti.Sy,Ti.Ay],this.Ds),this.FB.yn(Ti.fb,this.ewt),this.uxt=new xX(this,this.FB),this._H=new q(this.uxt,!0),this._H.yn(tl.FL,this.skt),this._H.yn(ro,this.Ds),this.AEt=new at,this.AEt.yn(No.la,this.SEt),this.wEt=new at,this.uW=this.gxt(),this.zEt=new $Z(this.uW),this.qEt=new fX(this.uW),this.cH=new Ix(this.FB,this.lW),this.axt=new ua,this.Ll=new Fu([this.AEt,this.zEt.Z,this.qEt.Z,this.cH.Z,this.axt])}},xX=class extends Bx{get sI(){return this.ea.sI}mxt(){this.wo(new au(this.SR,this.sI))}constructor(t,e){super(e),this.ea=t}};function RX(t,e){const i=t.filter((t=>"urn:mpeg:dash:role:2011"===t.i9)).map((t=>t.Dx)).filter(ji);return e||ms(i,"main")?ms(i,"caption")?"captions":ms(i,"subtitle")?"subtitles":ms(i,"dub")?"translation":"main":ms(i,"sign")?"sign":ms(i,"description")?"descriptions":ms(i,"commentary")?"commentary":"alternative"}function IX(t,e){var i;const s=Fo([...t.Rwt,...t.Iwt],(t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.i9));var n;const r=null!=(n=null==s||null==(i=s.Dx)?void 0:i.split(","))?n:[],o=[];for(const t of r){const i=Number(t),s=Fo(e,(t=>t.o===i));s&&o.push(s)}return o}var un=class extends EX{AI(){if(We(this.FB))return this.FB.AI()}get Gkt(){return We(this.FB)?this.FB.cI:0}get Zkt(){return We(this.FB)?this.FB.fI:0}async gn(){var t;await super.gn(),null==(t=this.pxt)||t.gn()}cEt(t){var e,i;return((null!=(i=null==(e=this.Cc)?void 0:e.seamlessSwitchStrategy)?i:Gu.jB)!==Gu.jB||!Z.Ag)&&super.cEt(t)}fEt(){return!(Z.Im&&Z.Pm<3)&&super.fEt()}gxt(){return new mV(this,new NL)}GEt(t){return _V(t)}constructor(t,e,i,s,n,r,o){super(t,e,i,s,n,r,new vV(o)),this.Krt=o,Z.$m&&(this.pxt=new RV(this))}},CX=class extends un{async gn(){await super.gn(),await this.wH.pH(this.FB)}constructor(t,e,i,s,n,r,o,h){const a=new ut(r);super(t,e,i,s,n,a.LH(o),h),this.wH=a}};r(),r(),r(),r(),r();var PX=class extends SV{get wxt(){return this.tx.wxt}pR(){return super.pR().kb(this.wxt)}Sot(){return super.Sot().kb(this.wxt)}_2(t,e,i){const s=this.wxt;return super._2(t,{cit:e.cit-s,ct:e.ct,MV:e.MV-s},i)}B2(t,e){const i=this.wxt;return super.B2(_.max(0,t-i),_.max(0,e-i))}$S(t,e,i){const s=this.wxt;return super.$S(_.max(0,t-s),_.max(0,e-s),i)}f3(t,e){const i=this.wxt;super.f3(_.max(0,t-i),_.max(0,e-i))}_3(t,e){const i=this.wxt;super._3(_.max(0,t-i),_.max(0,e-i))}constructor(t,e){super(e),this.tx=t}},DX=class extends bV{get wxt(){return this.tx.wxt}Sd(){return super.Sd()+this.wxt}n4(t){super.n4(t-this.wxt)}oI(){return super.oI().kb(this.wxt)}a4(t,e,i,s){const n=this.wxt;super.a4(t-n,e-n,i,s)}mot(t){return new PX(this,t)}constructor(t,e){super(e),this._ot(e),this.tx=t}},NX=class extends Ja{get jrt(){return this.FB}get wxt(){return this.yxt}set wxt(t){this.yxt=t}pR(){return super.pR().kb(this.yxt)}yR(){return MX(super.yR(),this.yxt)}kR(){return super.kR()+this.yxt}Sd(){return super.Sd()+this.yxt}$R(){return super.$R().kb(this.yxt)}oI(){return super.oI().kb(this.yxt)}Eb(t,e,i){const s=_.max(0,t-this.yxt);super.Eb(s,e,i)}ZG(t){super.ZG(MX(t,-this.yxt))}uI(){return this.Ll}LI(t,e,i,s,n,r,o,h){return this.uW.LI(t,e,i,s,n,r,o,h)}dH(t){return this.uW.dH(t)}_W(t){this.uW._W(t)}fH(){this.uW.er(),super.fH()}hH(){return!1}uH(t,e,i,s,n){throw new g("Not supported")}Hw(){return this.Get.gn(),this.Uet.gn(),this.uW.gn(),this.Ll.gn(),super.Hw()}cot(t){return new DX(this,t)}uot(t){return new Yn(t)}NI(t){let e;switch(t.type){case Ti.ro:e=new H(t.currentTime+this.yxt);break;case Ti.Zy:e=new fl(t.currentTime+this.yxt);break;case tl.VL:e=new Wi(t.currentTime+this.yxt);break;case Ti.sb:e=new ri(t.currentTime+this.yxt,MX(t.currentProgramDateTime,this.yxt));break;case Ti.Xy:e=new K(t.currentTime+this.yxt);break;case Ti.jy:e=new L(t.currentTime+this.yxt);break;case Ti.Ky:e=new ha(t.currentTime+this.yxt);break;case Ti.Ly:e=new uM(t.currentTime+this.yxt);break;case Ti.Oy:e=new QL(t.currentTime+this.yxt);break;case Ti.Cy:e=new Te(t.currentTime+this.yxt);break;case Ti.zy:e=new Nu(t.currentTime+this.yxt,t.playbackRate);break;case Ti.ob:e=new rs(t.currentTime+this.yxt,t.volume);break;case Ti.xy:e=new Ls(t.duration+this.yxt);break;case tl.tC:e=new au(t.currentTime+this.yxt,t.readyState);break;default:e=t}super.NI(e)}be(){super.be(),this.Uet.be()}ge(){super.ge(),this.Uet.ge()}constructor(t){super(t),this.yxt=0,this.uW=new mV(this,new NL),this.Ll=new Fu([this.uW.nt,super.uI()]),this.Uet=new _B,this.Uet.v7(this.YG.parentElement),this.Get=new LO(this.Uet.we,this.Lu,this.Ll,this.zl,this.Ca,this.lH)}};function MX(t,e){return t?new Date(t.getTime()+1e3*e):void 0}var LX=class extends gV{LH(t){if(t===ee._E)return new NX(super.LH(t))}async pH(t){const e=t;await e.Hw(),await super.pH(e.jrt)}},BX=class extends un{async gp(t){await super.gp(t),void 0===this.bxt&&(this.bxt=this.Axt(),this.FB.wxt=this.bxt)}Axt(){if(this.ct===1/0){const t=this.xkt;if(t.V>0)return _.max(0,t.Cn(0)-300)}return 0}J9(t,e,i,s,n,r,o,h){return void 0===r&&(r=!1),void 0===o&&(o=GZ.rTt),void 0===h&&(h=!1),h||(h=this.ct===1/0&&Z.Im&&Z.Pm<3&&t<=this.SR),super.J9(t,e,i,s,n,r,o,h)}async er(){await super.er(),this.bxt=void 0,this.FB.wxt=0}async gn(){await super.gn(),await this.FB.Hw(),await this.wH.pH(this.FB)}static pT(t){var e;return(!t||"google-dai"!==(null==t||null==(e=t.ssai)?void 0:e.integration))&&(Z.Im&&Z.Pm<4)}constructor(t,e,i,s,n,r,o,h){const a=new LX(new ut(r));super(t,e,i,s,n,a.LH(o),h),this.wH=a,this.bxt=void 0}};r(),r(),r(),r(),r();var OX=class extends pV{get jrt(){return this.FB}get cI(){return this.FB.cI}get fI(){return this.FB.fI}constructor(t){super(t)}};r(),r(),r();var FX=class extends SV{yot(){return this.Sxt?this.Dj:super.yot()}bot(t){this.Sxt?this.Dj=t:super.bot(t)}pR(){return this.Sxt?this.Txt:super.pR()}_T(){return this.Sxt?this.DT:super._T()}Sot(){return this.Sxt?this.kxt:super.Sot()}Tot(){return this.Sxt?this.Ij:super.Tot()}kot(t){this.Sxt?this.Ij=t:super.kot(t)}_2(t,e,i){return this.m2((i=>this.Ext(t,e,i)),i)}Ext(t,e,i){return super._2(t,e,i)}v3(){return this.m2((()=>this.xxt()))}xxt(){return super.v3()}w2(t,e,i){return this.m2((i=>this.Rxt(t,e,i)),i)}Rxt(t,e,i){return super.w2(t,e,i)}EJ(){return this.Sxt?this.hit:super.EJ()}r3(){this.Sxt?this.Ixt=!0:super.r3()}f3(t,e){this.Sxt?(this.kxt=this.kxt.JL(new se([t,e])),this.Cxt.push({Aw:"Cct",FO:t,VO:e})):this.Pxt(t,e)}Pxt(t,e){super.f3(t,e)}B2(t,e){return this.m2((()=>this.Dxt(t,e)))}Dxt(t,e){return super.B2(t,e)}_3(t,e){this.Sxt?(this.kxt=this.kxt.tB(new se([t,e])),this.Cxt.push({Aw:"$S",FO:t,VO:e})):this.Nxt(t,e)}Nxt(t,e){super._3(t,e)}$S(t,e,i){return this.m2((i=>this.Mxt(t,e,i)),i)}Mxt(t,e,i){return super.$S(t,e,i)}dJ(t){return this.m2((()=>this.Lxt(t)))}Lxt(t){return super.dJ(t)}async m2(t,e){this.Z2(),this.Sxt&&(await ou(this.Sxt.Vb,e),this.Z2()),J(e);try{this.j2=t(e),await this.j2}finally{this.j2=void 0}}Z2(){if(this.j2)throw new g("Internal error")}async Bxt(){if(this.Sxt)throw new b("Already locked");this.Sxt=new os,this.Oxt(),this.j2&&(await this.j2.catch(It),this.Oxt())}Fxt(){var t;null==(t=this.Sxt)||t.Ob(),this.Sxt=void 0,this.Vxt()}Oxt(){this.DT=super._T(),this.Dj=super.yot(),this.Ij=super.Tot(),this.Txt=super.pR(),this.kxt=super.Sot(),this.hit=super.EJ(),this.Ixt=!1}Vxt(){this.Z2(),super.bot(this.Dj),super.kot(this.Ij);const t=this.Cxt.slice();En(this.Cxt);for(const e of t)"Cct"===e.Aw?this.Pxt(e.FO,e.VO):this.Nxt(e.FO,e.VO);this.Ixt&&super.r3(),this.Txt.oB(super.pR())||this.wo(new pe(ue.JQ))}Hw(){var t;null==(t=this.Sxt)||t.Yw(),this.Sxt=void 0,super.Hw()}constructor(t){super(t),this.j2=void 0,this.Sxt=void 0,this.Dj=0,this.Txt=se.mB(),this.kxt=se.mB(),this.Cxt=[],this.hit=!1,this.Ixt=!1,this.Ij=0,this.DT=t.bd}},VX=class extends FX{pR(){var t,e;return super.pR().JL(null!=(e=null==(t=this.Wxt)?void 0:t.gR)?e:se.mB())}Sot(){var t,e;return super.Sot().JL(null!=(e=null==(t=this.Wxt)?void 0:t.u3)?e:se.mB())}bot(t){super.bot(t),this.Wxt&&(this.Wxt.Sj=t)}kot(t){super.kot(t),this.Wxt&&(this.Wxt.wj=t)}Pxt(t,e){super.Pxt(t,e),this.Wxt&&this.Wxt.f3(t,e)}Nxt(t,e){super.Nxt(t,e),this.Wxt&&this.Wxt._3(t,e)}async Mxt(t,e,i){J(i);const s=[];s.push(super.Mxt(t,e,i)),this.Wxt&&s.push(this.Wxt.$S(t,e,i)),await Promise.all(s)}cJ(t){return!!super.cJ(t)||this.tx.Uxt(t)}Lxt(t){return super.cJ(t)?super.Lxt(t):this.tx.Gxt(t)}Hxt(t){var e,i;null==(e=this.Wxt)||e.fn(Vo,this.Eot),this.Wxt=t,null==(i=this.Wxt)||i.yn(Vo,this.Eot)}constructor(t,e){super(e),this.Wxt=void 0,this.tx=t}},WX=class extends bV{cJ(t){const e=void 0!==this.e4,i=void 0!==this.i4,s=t.u4.some((t=>Sl(t.Dk,"audio"))),n=t.u4.some((t=>Sl(t.Dk,"video")));return e===s&&i===n&&(!!super.cJ(t)||(!(!this.Zxt||!this.Zxt.cJ(t))||this.tx.Xxt(t)))}async dJ(t){return super.cJ(t)?await super.dJ(t):this.Zxt&&this.Zxt.cJ(t)?(this.zxt(),await this.dJ(t)):(await this.tx.qxt(t),await this.dJ(t))}Uxt(t){return this.cJ(this.Yxt(t))}Gxt(t){return this.dJ(this.Yxt(t))}Yxt(t){const e=this.bd,i=e.u4.map((e=>Sl(t.Dk,"audio")&&Sl(e.Dk,"audio")||Sl(t.Dk,"video")&&Sl(e.Dk,"video")?t:e));return Bo({},e,{u4:i})}a4(t,e,i,s){super.a4(t,e,i,s),this.Zxt&&this.Zxt.a4(t,e,i,s)}Kxt(){return!this.jxt&&this.Qxt}Sd(){return void 0!==this.Jxt?this.Jxt:this.Kxt()?this.DA:super.Sd()}n4(t){this.DA=t,this.Jxt=void 0,this.Kxt()||super.n4(t)}fot(){return!this.Kxt()&&super.fot()}r3(){this.Jxt=_.max(UX(this.jG.J3),UX(this.jG.t4)),this.Kxt()||super.r3()}K2(){this.Jxt=void 0,this.Kxt()||super.K2()}mot(t){return new VX(this,t)}$xt(){this.jxt=!this.jxt}zxt(){const t=this.jG,e=this.Zxt;e&&(this.jxt=!this.jxt,this._ot(e),this.tRt(t),this.Kxt()&&this.eRt())}tRt(t){var e,i;this.Zxt=t,null==(e=this.e4)||e.Hxt(null==t?void 0:t.J3),null==(i=this.i4)||i.Hxt(null==t?void 0:t.t4)}iRt(t){const e=this.jG,i=this.Zxt;if(!i)return;const s=this.jxt,n=s?e:i,r=(s?i:e).gR.dB(t);if(!r)return;const o=NV(n.gR,this.Sot()).dB(r.jn(0),Si);return!o||r.jn(0)+Si>=o.jn(0)?void 0:_.max(r.jn(0),o.Cn(0))}sRt(t,e){if(this.Qxt)return Promise.resolve();const i=this.jxt?this.Zxt:this.jG;return i?(this.Qxt=!0,this.nRt((e=>{if(J(e),this.Qxt)return async function(t,e,i){J(i);const s=[];t.J3&&s.push(iM(t.J3,e,i));t.t4&&s.push(iM(t.t4,e,i));await Promise.all(s),t.r3()}(i,t,e)}),e)):Promise.resolve()}eRt(){if(!this.Qxt)return;const t=this.jxt?this.Zxt:this.jG;if(!t)return;var e;this.Qxt=!1;const i=null!=(e=this.Jxt)?e:this.DA;t.ct<i&&t.n4(i),t.K2()}rRt(t){var e;const i=null!=(e=this.Jxt)?e:this.DA;t.n4(i),this.jxt?this._ot(t):this.tRt(t)}Sot(){var t,e,i;const s=null!=(i=null==(t=this.e4)?void 0:t.u3)?i:se.mB();var n;const r=null!=(n=null==(e=this.i4)?void 0:e.u3)?n:se.mB();return s.JL(r)}async nRt(t,e){const i=[];this.e4&&i.push(this.e4.Bxt()),this.i4&&i.push(this.i4.Bxt());try{await Promise.all(i),await t(e)}finally{this.e4&&this.e4.Fxt(),this.i4&&this.i4.Fxt()}}pot(t){t.type===ue.JQ&&this.tx.e3(),super.pot(t)}constructor(t,e){super(e),this.Zxt=void 0,this.DA=NaN,this.jxt=!1,this.Qxt=!1,this.Jxt=void 0,this._ot(e),this.tx=t}};function UX(t){if(!t)return 0;const e=t.gR;return e.V>0?e.jn(e.V-1):0}function Vu(t){return t.bd.Aw===Mr.gW}r();var GX=class extends OX{get oRt(){return this.hRt}pR(){return super.pR().JL(this.hRt.gR)}Sd(){if(!this.aRt){const t=this.jG;if(t&&Vu(t))return t.ct}return super.Sd()}Jrt(){return!!super.Jrt()&&!(!this.aRt&&!this.EJ())}$rt(){return!!super.$rt()&&!(!this.aRt&&super.Jrt()&&!this.EJ())}EJ(){const t=this.jG;return!(!t||!Vu(t))&&t.EJ}$R(){return this.Ro.JL(this.FB.JR)}oI(){return super.oI().JL(this.hRt.rI)}nI(){return super.nI()}Qrt(){var t;return null!=(t=super.Qrt())?t:this.hRt.QG}kI(){return this.cZ=!1,super.kI()}TI(){this.cZ=!0,super.TI()}u7(){this.aRt=!0,super.u7(),this.hRt.u7()}l7(){this.aRt=!1,super.l7(),this.hRt.u7()}kR(){var t;return null!=(t=this.S9)?t:super.kR()}aI(){return void 0!==this.S9||super.aI()}Eb(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.uRt.Yw(),this.j9.Yw(),this.j9=new da,this.cRt=So(this.J9(t,e,i,this.cRt,this.j9.Vw),this.j9).catch(It)}async J9(t,e,i,s,n){this.S9=t,this.t8=t,this.wo(new L(t)),s&&await s.catch(It),J(n),this.jG&&Vu(this.jG)&&this.jG.eRt(),this.S9=void 0,super.Eb(t,e,i),this.hRt.Eb(t,e,i),this.lRt()}ZG(t){const e=this.QG;if(!e||S(e.getTime()))return;const i=(t.getTime()-e.getTime())/1e3;this.Eb(i)}_7(){super._7(),this.hRt._7()}get cI(){return this.dRt.cI}get fI(){return this.dRt.fI}be(){this.rZ&&(this.rZ=!1,this.dRt.be())}ge(){this.rZ||(this.rZ=!0,this.dRt.ge())}async fRt(){var t;this.S9=void 0,this.t8=NaN,this.Ro=se.mB(),null==(t=this._Rt)||t.Yw(),this.uRt.Yw(),this.j9.Yw(),this.cRt&&(await this.cRt.catch(It),this.cRt=void 0)}oot(t){super.oot(t),this.hRt.gH=t}hot(t){super.hot(t),this.hRt.m7=t}uI(){return this.Ll}LI(t,e,i,s,n,r,o,h){return this.uW.LI(t,e,i,s,n,r,o,h)}dH(t){return this.uW.dH(t)}uH(t,e,i,s,n){throw new g("Not implemented yet")}hH(){return!1}_W(t){this.uW._W(t)}fH(){this.uW.er(),super.fH()}async Dn(t){const e=await super.Dn(t);return Vu(e)&&this.lRt(),e}async er(){await this.fRt(),await super.er(),await this.hRt.er()}async Hw(){await this.fRt(),this.uW.gn(),this.Ll.gn(),await super.Hw()}cot(t){return new WX(this,t)}uot(t){return new Yn(t)}lRt(){this.uRt.Yw(),this.uRt=new da,this.cRt=So(this.vRt(this.cRt,this.uRt.Vw),this.uRt).catch(It)}async vRt(t,e){if(t&&await t.catch(It),this.jG&&Vu(this.jG))for(;;){let t;for(J(e),this.mRt()&&this.$xt(),this.jG.eRt(),J(e);;){const i={stack:[],error:void 0,hasError:!1};try{if(J(e),this.mRt())break;if(t=this.jG.iRt(this.kR()),void 0!==t){0,this.gRt(),await this.jG.sRt(t,e),J(e),this.hRt.Eb(t);break}const s=zs(i,da.Qw([e]),!1);await Promise.race([this.vy(Ti.sb,s.Vw),this.pRt(s.Vw)])}catch(t){i.error=t,i.hasError=!0}finally{lo(i)}}for(J(e);!this.mRt();)await this.FB.vy([Ti.sb,Ti.Cy,tl.tC],e)}}mRt(){const t=this.jG;if(void 0===t||!Vu(t))return!1;const e=this.kR(),i=this.FB.gR;if(!this.FB.RR&&i.kr(e))return!1;return!!NV(this.hRt.gR,t.Sot()).nB(e,e+Si)}$xt(){if(this.wRt)return;this.wRt=!0,this.Ro=this.$R();const t=dM(this),e=this.aI(),i=this.nI(),s=this.FB,n=this.hRt,r=this.jG;r.eRt(),r.$xt(),fM(n,t),this.dot(n),this.hRt=s,s.TI(),s.GR=!0,this.wRt=!1;const o=this.aI();e!==o&&(o?this.wo(new L(this.SR)):this.wo(new ha(this.SR)));const h=this.nI();i!==h&&this.wo(new au(this.SR,h)),o||this.gRt()}gRt(){const t=this.FB,e=this.dRt;if(e===t)return;const i=this.fI,s=this.cI;this.dRt=t,this.rZ&&(e.be(),t.ge());const n=this.fI,r=this.cI;n>0&&r>0&&(i!==n||s!==r)&&this.wo(new P)}Xxt(t){return void 0!==this.hRt.DJ([t])}async qxt(t){this.gRt();const e=this.jG,i=this.hRt;await i.er();const s=await i.Dn(t);e.rRt(s)}pRt(t){return this._Rt=new os,ou(this._Rt.Vb,t)}e3(){var t;null==(t=this._Rt)||t.Ob()}NI(t){t.type===Ti.jy&&this.t8===t.currentTime||(t.type===Ti.Ky&&(this.t8=NaN,this.gRt()),t.type!==tl.tC&&t.type!==Ti.Zy&&t.type!==Ti.Cy||this.wRt||!this.mRt()?(t.type!==Ti.Cy||this.RR)&&super.NI(t):this.lRt())}constructor(t,e,i){super(t),this.aRt=!1,this.S9=void 0,this.t8=NaN,this.Ro=se.mB(),this.cZ=!0,this.wRt=!1,this.rZ=!0,this._Rt=void 0,this.cRt=void 0,this.uRt=new da,this.j9=new da,this.hRt=e,this.dRt=t,this.FB.ge(),this.hRt.be(),this.uW=new mV(this,i),this.Ll=new Fu([this.uW.nt,super.uI()])}},HX=class extends GX{get jrt(){return this.FB}get oRt(){return this.hRt}be(){super.be(),this.Uet.be()}ge(){super.ge(),this.Uet.ge()}get YG(){return this.FB.YG}get N4(){return this.FB.N4}get yI(){return this.FB.yI}set yI(t){this.FB.yI=t}v7(t){this.FB.v7(t),this.hRt.v7(t)}CI(){this.FB.CI(),this.hRt.CI()}AI(){return this.FB.AI()}Sa(){return this.hO}dot(t){const e=this.bI(),i=this.AI();super.dot(t),this.hO.fC=t.lH,this.bI()!==e&&this.wo(new Vi),this.AI()!==i&&this.wo(new ok)}Hw(){return this.hO.gn(),this.Get.gn(),this.Uet.gn(),super.Hw()}constructor(t,e){super(t,e,new NL),this.hO=new Vh(t.lH),this.Uet=new _B,this.Uet.v7(t.YG.parentElement),this.Get=new LO(this.Uet.we,this.Lu,this.nt,this.zl,this.Ca,this.lH)}},ZX=class extends gV{LH(t){if(t===ee._E){const e=super.LH(t),i=super.LH(t);return new HX(e,i)}return super.LH(t)}async pH(t){t instanceof HX?(await t.Hw(),await super.pH(t.jrt),await super.pH(t.oRt)):await super.pH(t)}},XX=class extends un{async gn(){await super.gn(),await this.wH.pH(this.FB)}static pT(t){var e;return!Z.Qs&&!Z.vg&&!(t&&"google-dai"===(null==(e=t.ssai)?void 0:e.integration))}constructor(t,e,i,s,n,r,o,h){const a=new ut(new ZX(r));super(t,e,i,s,n,a.LH(o),h),this.wH=a}};r(),r(),r();var zX=class extends bV{mot(t){return new FX(t)}_T(){return this.yRt?this.DT:super._T()}pR(){return this.yRt?this.Txt:super.pR()}Sd(){return this.yRt?this.DA:super.Sd()}n4(t){this.yRt?(this.DA=t,this.bRt=!0):super.n4(t)}oI(){return this.yRt?this.ARt?this.ARt.y3():this.h4:super.oI()}a4(t,e,i,s){this.yRt?this.ARt=new wo(t,e,i,s):super.a4(t,e,i,s)}fot(){return this.yRt?this.hit&&!1!==this.Ixt:super.fot()}r3(){this.yRt?this.Ixt=!0:super.r3()}K2(){this.yRt?this.Ixt=!1:super.K2()}cJ(t){return!this.yRt&&super.cJ(t)}dJ(t){return this.yRt?Promise.reject(new b("Not supported")):super.dJ(t)}async Bxt(){if(this.yRt)throw new b("Already locked");this.yRt=!0,this.Oxt();const t=[];this.e4&&t.push(this.e4.Bxt()),this.i4&&t.push(this.i4.Bxt()),await Promise.all(t)}Fxt(){this.yRt=!1,this.e4&&this.e4.Fxt(),this.i4&&this.i4.Fxt(),this.Vxt()}Oxt(){this.DT=super._T(),this.Txt=super.pR(),this.DA=super.Sd(),this.h4=super.oI(),this.bRt=!1,this.Ixt=void 0,this.ARt=void 0}Vxt(){if(this.bRt&&(super.n4(this.DA),this.bRt=!1),void 0!==this.ARt){const t=this.ARt;super.a4(t.Cn,t.jn,t.b3,t.A3),this.ARt=void 0}void 0!==this.Ixt&&(this.Ixt?super.r3():super.K2(),this.Ixt=void 0)}constructor(t){super(t),this.yRt=!1,this.Txt=se.mB(),this.DA=0,this.bRt=!1,this.hit=!1,this.Ixt=void 0,this.h4=se.mB(),this.ARt=void 0,this._ot(t),this.DT=t.bd}},qX=class extends Ja{get jrt(){return this.FB}kI(){return void 0!==this.jG&&Vu(this.jG)&&this.RR&&this.Eb(0),super.kI()}Eb(t,e,i){void 0!==this.jG&&Vu(this.jG)&&this.RR&&t<this.ct&&this.SRt(),super.Eb(t,e,i)}u7(){this.TRt=!0,super.u7()}l7(){this.TRt=!1,this.kRt()||super.l7()}kRt(){return this.TRt||this.ERt}xRt(){this.ERt||(this.ERt=!0,super.u7())}RRt(){this.ERt&&(this.ERt=!1,this.kRt()||super.l7())}Dn(t){this.IRt.Yw();const e=this.KE(t,this.CRt);return this.PRt=e,e}async KE(t,e){return e&&await e.catch(It),this.RRt(),await super.Dn(t)}cot(t){return new zX(t)}uot(t){return new Yn(t)}er(){this.IRt.Yw();const t=this.sxt(this.CRt);return this.PRt=t,t}async sxt(t){return t&&await t.catch(It),this.RRt(),await super.er()}SRt(){this.xRt(),this.IRt.Yw(),this.IRt=new da,this.CRt=So(this.DRt(this.PRt,this.CRt,this.IRt.Vw),this.IRt).catch(Eu)}async DRt(t,e,i){t&&await t.catch(It),e&&await e.catch(It),J(i);const s=this.jG;if(!s||!Vu(s))return;const n=s.bd;await s.Bxt(),await this.FB.er();const r=await this.FB.Dn(n);r.n4(s.ct),s._ot(r),s.Fxt(),this.RRt()}async Hw(){this.IRt.Yw(),this.CRt&&(await this.CRt.catch(It),this.CRt=void 0),this.kRt()&&super.l7(),await super.Hw()}constructor(...t){super(...t),this.TRt=!1,this.ERt=!1,this.PRt=void 0,this.CRt=void 0,this.IRt=new da}},YX=class extends gV{LH(t){if(t===ee._E)return new qX(super.LH(t))}async pH(t){const e=t;await e.Hw(),await super.pH(e.jrt)}static pT(){return Z.pg}};O(new class extends tV{hP(t,e,i,s,n,r,o,h){const a=new sV(hu.Fg.Rrt,hu.Fg.xrt,hu.Fg.Ert,hu.Fg.Crt);let u;u=BX.pT(h)?BX:XX.pT(h)?XX:CX;let c=e;return YX.pT()&&(c=new YX(c)),new u(i,s,n,r,a,c,ee._E,t)}FH(){return!0}constructor(...t){super(...t),this.VH=Zt.fG}}),r(),r(),xh((function(t){return class extends t{ba(){const t=this.MR.ka;return nh(super.ba(),{get hesp(){return t}})}}}),io.ou),r(),r(),r(),r(),r();var KX=0;function jX(t,e){if(void 0===e&&(e=!0),!t)return;let i=t;return"/"===i.charAt(0)&&(i=i.substring(1)),e&&"/"!==i.charAt(i.length-1)&&(i+="/"),i}function QX(t){var e,i,s;return Bo({},t,{baseUrl:jX(t.baseUrl),id:null!=(e=t.id)?e:String(KX++),timeBounds:Bo({},t.timeBounds,{scale:null!=(i=t.timeBounds.timescale)?i:1e3}),currentTime:t.currentTime?{value:t.currentTime.timestamp,scale:null!=(s=t.currentTime.timescale)?s:1e3}:void 0,audio:t.audio.map(sz),video:t.video.map(rz),metadata:t.metadata.map(hz),events:t.events.map(dz)})}var JX=0;function $X(t){const e=jX(t.initPattern,!1),i=jX(t.contPattern,!1);var s;return Bo({},t,{id:null!=(s=t.id)?s:String(JX++),continuationPattern:i?Sm(i,"${segmentId}","{segmentId}"):void 0,initializationPattern:e?Sm(e,"${initId}","{initId}"):void 0})}function tz(t){var e;const i=jX(t.initPattern,!1),s=jX(t.contPattern,!1);return Bo({},t,{continuationPattern:s?Sm(s,"${segmentId}","{segmentId}"):void 0,initializationPattern:i?Sm(i,"${initId}","{initId}"):void 0,segmentDuration:t.segmentDuration?{value:t.segmentDuration.duration,scale:t.segmentDuration.timescale}:void 0,segments:t.segments.map(ez),activeSegment:null==(e=Fo(t.segments,(t=>t.active)))?void 0:e.id})}function ez(t){var e;return Bo({},t,{timeBounds:Bo({},t.timeBounds,{endTime:void 0!==t.timeBounds.duration?t.timeBounds.startTime+t.timeBounds.duration:void 0,scale:null!=(e=t.timeBounds.timescale)?e:1e3})})}function iz(t){return t&&"-"===t.charAt(0)}function sz(t){let e;try{var i;e=x(null!=(i=t.channels)?i:"2")}catch(t){e=2}return iz(t.contPattern)||iz(t.initPattern)?function(t,e){const i=t.initPattern,s=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,Bo({},$X(t),{baseUrl:jX(t.baseUrl),language:"eng",channels:e,sampleRate:t.samplerate,tracks:t.tracks.map((t=>{var e,n;return t.initPattern=null!=(e=t.initPattern)?e:i,t.contPattern=null!=(n=t.contPattern)?n:s,nz(t)}))})}(t,e):Bo({},$X(t),{baseUrl:jX(t.baseUrl),language:"eng",channels:e,sampleRate:t.samplerate,tracks:t.tracks.map(nz)})}function nz(t){let e;try{var i;e=x(null!=(i=t.channels)?i:"2")}catch(t){e=2}return iz(t.contPattern)||iz(t.initPattern)?function(t,e){return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,Bo({},tz(t),{baseUrl:"./",channels:e,sampleRate:t.samplerate})}(t,e):Bo({},tz(t),{baseUrl:jX(t.baseUrl),channels:e,sampleRate:t.samplerate})}function rz(t){return iz(t.contPattern)||iz(t.initPattern)?function(t){const e=t.initPattern,i=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,Bo({},$X(t),{baseUrl:jX(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map((t=>(t.initPattern=e,t.contPattern=i,oz(t))))})}(t):Bo({},$X(t),{baseUrl:jX(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(oz)})}function oz(t){var e,i;return iz(t.contPattern)||iz(t.initPattern)?function(t){var e,i;return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,Bo({},tz(t),{baseUrl:"./",frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:Bo({},t.resolution,{sarWidth:null==(e=t.resolution.sar)?void 0:e.width,sarHeight:null==(i=t.resolution.sar)?void 0:i.height})})}(t):Bo({},tz(t),{baseUrl:jX(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:Bo({},t.resolution,{sarWidth:null==(e=t.resolution.sar)?void 0:e.width,sarHeight:null==(i=t.resolution.sar)?void 0:i.height})})}function hz(t){var e;return Bo({},t,{id:null!=(e=t.id)?e:String(JX++),schemeId:"",tracks:t.tracks.map(az)})}function az(t){return Bo({},t,{segments:t.segments.map(cz)})}var uz=0;function cz(t){return{id:uz++,timeBounds:Bo({},t.timeBounds,{scale:t.timeBounds.timescale})}}var lz=0;function dz(t){var e,i;return Bo({},t,{id:null!=(e=t.id)?e:String(lz++),timeBounds:Bo({},t.timestamp,{scale:null!=(i=t.timestamp.timescale)?i:1e3})})}var fz=class{async NRt(t,e){const i={Gu:t,Vw:e},s=await this.lR.Kk(i);let n=await s.xk(e);return function(t){const e=t;if(Yt(e.manifestVersion)&&Oh(e.manifestVersion,"alpha"))return!0;let i,s;for(const t of e.presentations){for(const e of[...t.video,...t.audio])if(e.tracks.length>0){i=e.tracks[0],s=e;break}if(ji(i))break}return(Yt(null==s?void 0:s.initPattern)||Yt(null==i?void 0:i.initPattern))&&!Yt(null==i?void 0:i.initializationPattern)&&!Yt(null==s?void 0:s.initializationPattern)}(n)&&(n=function(t){return Bo({},t,{availabilityDuration:{value:t.dvrDuration?t.dvrDuration.duration/t.dvrDuration.timescale:0},manifestVersion:"1.0.0",presentations:t.presentations.map(QX),contentBaseUrl:t.contentBaseUrl||"./"})}(n)),n}constructor(t){this.lR=t}};r();var _z=class extends Co{get ka(){return this.su||(this.su=lS(this)),this.su}GC(){return this.MRt.GC()}get FC(){return this.MRt.FC}get VC(){return this.MRt.VC}get WC(){return this.MRt.WC}yn(t,e){this.MRt.yn(t,e)}fn(t,e){this.MRt.fn(t,e)}constructor(t){super(),this.MRt=t}};r(),r(),r();var _r=class{get sit(){const t=1-this.LRt**this.BRt;return this.ORt/t}aut(t,e){const i=this.LRt**t,s=e*(1-i)+i*this.ORt;S(s)||(this.ORt=s,this.BRt+=t)}dJ(t){const e=_.exp(_.log(.5)/t);if(e===this.LRt)return;if(0===this.BRt)return void(this.LRt=e);const i=this.sit,s=1-e**this.BRt;this.ORt=i*s,this.LRt=e}constructor(t){this.ORt=0,this.BRt=0,this.LRt=_.exp(_.log(.5)/t)}},Ze=class t{get sit(){return this.mut()?_.max(this.FRt.sit,this.VRt.sit):this.WRt}aut(t){const e=Ms.Vg(),i=t;this.URt&&void 0!==this.GRt&&e-this.GRt>=this.HRt&&this.er(),this.ZRt+=1,this.FRt.aut(1,i),this.VRt.aut(1,i),this.XRt.push(i),this.XRt.length>this.zRt&&this.XRt.shift(),this.GRt=e}mut(){return void 0!==this.GRt&&Ms.Vg()-this.GRt<=this.HRt}er(){this.FRt=new _r(this.qRt),this.VRt=new _r(this.YRt),this.ZRt=0,this.XRt=[],this.GRt=void 0}constructor(e=t.KRt,i=t.jRt,s=t.gut,n=!1){this.ZRt=0,this.XRt=[],this.GRt=void 0,this.HRt=6e4,this.zRt=10,this.qRt=e,this.YRt=i,this.WRt=s,this.URt=n,this.FRt=new _r(e),this.VRt=new _r(i)}};Ze.KRt=2,Ze.jRt=5,Ze.gut=.1,r();var vz=class{cj(t){for(const e of this.QRt)e.cj(t)}lj(t){for(const e of this.QRt)e.lj(t)}dj(t,e){for(const i of this.QRt)i.dj(t,e)}_j(t){for(const e of this.QRt)e._j(t)}constructor(t){this.QRt=t}};r();var mz=class{cj(t){this.JRt=t}lj(t){this.$Rt.aut(t-this.JRt)}dj(t){}_j(t){}constructor(t){this.JRt=0,this.$Rt=t}};r();var gz=class{lj(t){this.tIt=t}dj(t,e){this.but.aut(t-this.tIt,e.byteLength),this.tIt=t}_j(t){}cj(t){}constructor(t){this.tIt=0,this.but=t}};r();var pz=class{cj(t){}dj(t,e){const i=e.byteLength,s=this.eIt;this.eIt=i;const n=t-this.An;this.An=t,this.iIt.r$(e);const r=!this.iIt.sIt(),o=i>=this.nIt;s!==Ms.Ys.rp&&r&&o&&this.but.aut(n,i)}lj(t){this.An=t}_j(t){}constructor(t,e=0){this.iIt=new wz,this.An=0,this.eIt=0,this.but=t,this.nIt=e}},wz=class extends po{sIt(){return this.rIt}r$(t){this.rIt=!1,super.r$(t)}s$(t,e){this.oIt&&this.oIt!==Tt.lD||(this.rIt=!0),super.s$(t,e),this.oIt=t}v$(t){return!1}g$(t){}w$(t){}constructor(...t){super(...t),this.oIt=void 0,this.rIt=!1}};r();var ac=function(t){return t.hIt="sample",t}({}),yz=class extends Co{rG(){if(!this.mut())return;const t=Ms.Vg();t-this.aIt>1e3&&(this.aIt=t,wl.Fg.rG(this.sit))}constructor(...t){super(...t),this.aIt=0}};r();var bz=class extends yz{get sit(){return this.mut()?this.ORt:this.uIt}mut(){return this.eS.length>=3}aut(t,e){if(0===t)return;const i={wG:8*e/t,cIt:e};if(this.eS.push(i),this.lIt+=i.cIt,this.eS.length>30){const t=this.eS.shift();this.lIt-=t.cIt}const s=this.eS.slice().sort(((t,e)=>t.wG-e.wG));let n=0;for(let t=0;t<s.length;t++){const e=s[t];if(n+=e.cIt/this.lIt,this.ORt=e.wG,n>=.5)break}this.rG(),this.wo(new pe(ac.hIt))}constructor(t){super(),this.eS=[],this.lIt=0,this.uIt=t,this.ORt=t}};r();var xt=class t extends yz{aut(t,e){const i=8*e/t;this.FRt.aut(t,i),this.VRt.aut(t,i),this.dIt+=e,this.rG(),this.wo(new pe(ac.hIt))}get sit(){return this.mut()?_.min(this.FRt.sit,this.VRt.sit):this.WRt}mut(){return this.dIt>=this.fIt}constructor(e=t.KRt,i=t.jRt,s=t._It,n=t.gut){super(),this.dIt=0,this.fIt=s,this.FRt=new _r(e),this.VRt=new _r(i),this.WRt=n}};xt._It=128e3,xt.gut=dI,xt.KRt=.5,xt.jRt=5;var Az=class{vIt(t){var e;null==(e=this.but)||e.fn(ac.hIt,this.mIt),this.but=new bz(t),this.but.yn(ac.hIt,this.mIt)}gIt(t){this.pIt.push(t)}wIt(t){we(this.pIt,t)}get wG(){var t,e;return null!=(e=null==(t=this.but)?void 0:t.sit)?e:this.yIt}get yG(){return this.bIt.sit}bG(t){if("segment"!==t.Aw)return;if("video"!==t.TE)return;const e=[new mz(this.bIt)];return this.but&&("stream"===t.Yk&&"initialization-segment"!==t.SE?e.push(new pz(this.but,1e3)):e.push(new gz(this.but))),new vz(e)}constructor(t,e){this.pIt=[],this.mIt=()=>{for(const t of this.pIt)t()},this.yIt=t>0?t:xt.gut,this.bIt=new Ze(Ze.KRt,Ze.jRt,e>0?e:Ze.gut),this.vIt(this.yIt)}};r();var Sz=class{AIt(t,e){const i=e-t;(!this.SIt||i<this.SIt)&&(this.SIt=i)}TIt(t,e){this.kIt=e-t}EIt(t,e){this.xIt=e-t}RIt(t,e){this.IIt=e-t}get CIt(){const t=Ws([this.xIt,this.IIt].filter(ji),Vd);return void 0!==t?Ms.Vg()/1e3+t:void 0!==this.kIt?Ms.Vg()/1e3+this.kIt:void 0!==this.SIt?Ms.Vg()/1e3+this.SIt:void 0}PIt(t){const e=this.CIt;if(void 0!==e)return e-t}er(){this.SIt=void 0,this.kIt=void 0,this.IIt=void 0,this.xIt=void 0}};r();var Tz=.25,kz=400,Ez={minimumOffset:.2,targetOffset:.45,maximumOffset:.7,forceSeekOffset:3,minimumPlaybackRate:At,maximumPlaybackRate:mt},xz={minimumOffset:.4,targetOffset:.65,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:At,maximumPlaybackRate:mt},Rz={minimumOffset:.4,targetOffset:.7,maximumOffset:.9,forceSeekOffset:3,minimumPlaybackRate:At,maximumPlaybackRate:mt},Iz={minimumOffset:.2,targetOffset:.45,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:At,maximumPlaybackRate:mt},Cz={minimumOffset:.5,targetOffset:1.125,maximumOffset:1.75,forceSeekOffset:2.55,minimumPlaybackRate:At,maximumPlaybackRate:mt};function Pz(t){if(Ms.iw.ow){const e=(kz+250)/1e3,i=_.max(e,t.minimumOffset),s=_.max(i+Tz,t.targetOffset),n=_.max(s+Tz,t.maximumOffset);return{minimumOffset:i,targetOffset:s,maximumOffset:n,forceSeekOffset:_.max(n+Tz,t.forceSeekOffset),minimumPlaybackRate:At,maximumPlaybackRate:mt}}return t}function Dz(){let t;return t=Ms.Ys.Jg?Iz:Ms.Ys.np?xz:Ms.Ys.sp?"Android"===Ms.iw.nw?Rz:Ez:Cz,Ms.iw.ow?Pz(t):t}r(),r(),r();var Nz=class{DIt(t){for(const e of this.Txt)e[1]=e[1].Sn(t)}NIt(t,e){let i=!0;for(const s of this.Txt){let n=s[1];n=n.tB(e),t===s[0]&&(n=n.JL(e),i=!1),s[1]=n.QL(1e-5)}i&&this.Txt.push([t,e])}MIt(t){for(const e of this.Txt)e[1]=e[1].tB(t)}LIt(t){for(let e=0;e<this.Txt.length;e++)if(this.Txt[e][1].kr(t))return this.Txt[e][0]}constructor(){this.Txt=[]}},Mz=class extends Co{get gR(){let t=se.mB();for(const[,e]of this.BIt){const i=e.cit+e.MV,s=i+e.ct;t=t.JL(se.vB(i,s))}return this.Aot.gR.JL(t)}LIt(t){return this.OIt.LIt(t)}get FIt(){return void 0!==this.VIt}get WIt(){return this.VIt?this.VIt.Vb:Promise.resolve()}async appendStream(t,e,i){if(this.FIt)throw new g("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=zs(s,da.Qw([i,this.J2.Vw]),!1).Vw;this.OIt.DIt(this.gR),this.VIt=new os;const r=tN(t).getReader();for(;;){const t=await ou(r.read(),n);if(t.done)break;const i=t.value,s={Aw:Ce.tJ,qk:Tu(i.map((t=>t.But)))},o={ct:mf(i,(t=>t.ct)),cit:i[0].lvt,MV:-e.aat.UIt};await this.g2(s,o,n);const h=o.cit+o.MV,a=h+o.ct;this.OIt.NIt(e.aat,se.vB(h,a))}}catch(t){s.error=t,s.hasError=!0}finally{lo(s)}}finally{e.GIt();const t=this.VIt;this.VIt=void 0,null==t||t.Ob()}}async _2(t,e,i,s){if(this.FIt)throw new g("Concurrent appends are not supported.");try{const n={stack:[],error:void 0,hasError:!1};try{const r=zs(n,da.Qw([s,this.J2.Vw]),!1).Vw;this.VIt=new os,await this.g2(t,e,r);const o=e.cit+e.MV,h=o+e.ct;this.OIt.DIt(this.gR),this.OIt.NIt(i,se.vB(o,h))}catch(t){n.error=t,n.hasError=!0}finally{lo(n)}}finally{const t=this.VIt;this.VIt=void 0,null==t||t.Ob()}}async g2(t,e,i){this.Aot.h3===ee._E&&this.HIt.vdt(t.qk,e.cit,e.cit+e.ct,e.MV,this.Wyt,!1);const s=this.FB.XB.ZB,n=this.Aot.gR.kr(this.FB.SR);if(s||n)return await this.ZIt(i),await this.Aot._2(t,e,i);this.BIt.push([t,e]);const r=this.BIt[0][1].cit;return this.BIt[this.BIt.length-1][1].cit-r>=.4?await this.ZIt(i):void 0}async w2(t,e){if(this.FIt)throw new g("Concurrent appends are not supported.");try{const i={stack:[],error:void 0,hasError:!1};try{const s=zs(i,da.Qw([e,this.J2.Vw]),!1).Vw;this.VIt=new os,await this.ZIt(s),await this.Aot.w2(t,{},s),this.Aot.h3===ee._E&&this.HIt.Mot(t.qk)}catch(t){i.error=t,i.hasError=!0}finally{lo(i)}}finally{const t=this.VIt;this.VIt=void 0,null==t||t.Ob()}}async $S(t,e,i){if(this.FIt)throw new g("Concurrent appends are not supported.");try{const s={stack:[],error:void 0,hasError:!1};try{const n=zs(s,da.Qw([i,this.J2.Vw]),!1).Vw;this.VIt=new os,await this.ZIt(n),await this.Aot.$S(t,e,n),this.OIt.MIt(se.vB(t,e))}catch(t){s.error=t,s.hasError=!0}finally{lo(s)}}finally{const t=this.VIt;this.VIt=void 0,null==t||t.Ob()}}async aY(t){if(this.FIt)throw new g("Concurrent appends are not supported.");try{const e={stack:[],error:void 0,hasError:!1};try{const i=zs(e,da.Qw([t,this.J2.Vw]),!1).Vw;this.VIt=new os,await this.ZIt(i)}catch(t){e.error=t,e.hasError=!0}finally{lo(e)}}finally{const t=this.VIt;this.VIt=void 0,null==t||t.Ob()}}async ZIt(t){for(const[e,i]of this.BIt)await this.Aot._2(e,i,t);En(this.BIt)}async Hw(){for(this.J2.Hw();this.FIt;)await this.WIt}constructor(t,e,i,s){super(),this.BIt=[],this.VIt=void 0,this.J2=new da,this.FB=e,this.Aot=t,this.Wyt=i,this.HIt=s,this.OIt=new Nz,this.Aot.yn(ue.JQ,this.Ds)}};r(),r();var Lz=class{async XIt(t,e){if(this.zIt>=this.qIt.maxRetries)throw t;const i=this.YIt(this.zIt++);await Fe(i,e)}YIt(t){let e=0;return 0!==t&&(e+=_.min(this.qIt.maximumBackoff,this.qIt.minimumBackoff*2**(t-1))),e}constructor(t){this.zIt=0,this.qIt=t}};r(),r();var Bz=function(t){return t.KIt="emsgdata",t}({}),Oz=class extends pe{constructor(t,e){super("emsgdata"),this.value=t,this.data=e}};r();var Fz=class{start(t){this.BQ=t}jIt(t){this.BQ.enqueue(t)}};r(),r();var vn=function(t){return t.QIt="initdata",t.MANIFEST_UPDATE="manifestupdate",t.JIt="timestamps:v1",t}({});var Vz="urn:theo:hesp:2020";function Wz(t){if(t._L!==Vz)return;const e=t.Dx;if(e===vn.QIt){return function(t){if(!t||!V(t))return;const e=t;return!Sd(e.index)||!Sd(e.offset)||e.index<0&&e.offset<0?void 0:{Aw:"initdata",index:e.index,offset:e.offset}}(JSON.parse(jg(ra(t.gL),new Ri)))}if(e===vn.MANIFEST_UPDATE){return function(t){if(!t||!V(t))return;const e=t;return!ji(e.url)||Yt(e.url)?{Aw:"manifestupdate",url:e.url}:void 0}(JSON.parse(jg(ra(t.gL),new Ri)))}if(e===vn.JIt){const e=ra(t.gL),i=new Ri,s=Yr(e,i).toNumber()/t._N,n=Yr(e,i).toNumber()/1e3,r=as(e,i)/1e3;let o;return i.ec+8<=e.byteLength&&(o={hours:as(e,i),minutes:Lg(e,i),seconds:Lg(e,i),frames:Ei(e,i)}),{Aw:vn.JIt,$It:s,tCt:n,eCt:r,iCt:o}}}var Uz=class extends Fz{transform(t){if(t.Aw===Tt.fD)try{const e=Wz(rr.hN(t.qk));e&&this.sCt.wo(new Oz(e.Aw,e))}catch(t){false}this.jIt(t)}Hw(){this.sCt.$o()}constructor(...t){super(...t),this.sCt=new Co}};r();var Gz=class{start(t){this.b_=new Hz(t)}transform(t){this.b_.r$(t)}flush(){this.b_.h$()}},Hz=class extends po{v$(t){return!0}g$(t){this.BQ.enqueue(t)}w$(t){}constructor(t){super(),this.BQ=t}};r(),r();var Zz=vo.fromNumber(Hu);var Xz=class extends Co{async Kk(t){for(;;)try{return await this.lW.Kk(t)}catch(e){if(Je(e))throw e;await this.nCt.XIt(e,t.Vw)}}constructor(t,e){super(),this.lW=t,this.nCt=e}};function zz(t,e,i,s,n,r,o,h){const a=new na;return n&&a.Ek(function(t,e){return void 0===e&&(e=Zz),new na({Range:"bytes="+t.toString()+"-"+e.toString()})}(n.start,n.end)),{Gu:t,jk:a,kE:!1,Vw:h,Aw:Wr.iE,SE:i,TE:s,bE:r,AE:o,Yk:e,RE:e===Rr.bk}}r(),r();var qz=function(t){return t[t.INITIALIZER=0]="INITIALIZER",t[t.FRAMES=1]="FRAMES",t}({}),Yz=class extends Fz{transform(t){this.rCt.push(t),t.Aw===Tt.lD&&this.oCt(this.rCt.splice(0),qz.FRAMES)}oCt(t,e){const i={_N:this.PA,Yq:this.cY},s=Tu(t.map((t=>Rh(t.qk.qk)))),n=Fo(t,Kz),r=rr.jD(n.qk.qk)[0],o={TE:this.out,Tb:i,But:s,Aw:e,ct:this.Sd(r)/this.PA,lvt:co(this.hCt(r),this.PA)};this.jIt(o)}Sd(t){const e=t.Z[0];if(!e||0===e.rL.length)return 0;var i;const s=null!=(i=e.HD.KM)?i:0;return e.rL[0].dL.reduce(((t,e)=>{var i;return t+(null!=(i=e.ct)?i:s)}),0)}hCt(t){var e,i;return null!=(i=null==(e=t.Z[0].oL)?void 0:e.oL)?i:vo.UZERO}constructor(t,e){super(),this.rCt=[],this.cY=t,this.out=this.cY.match(/video/)?Qi._E:Qi.fE,this.PA=e}};function Kz(t){return t.Aw===Tt.nD}r();var jz=class extends Co{get aat(){return this.aCt}clt(t){return t+1}get uCt(){return!1}get cCt(){return this.lCt}get FIt(){return void 0!==this.VIt}get WIt(){return this.VIt?this.VIt.Vb:Promise.resolve()}Eb(t){this.lCt=t,this.dCt=void 0,this.fCt=void 0}_Ct(){return void 0!==this.dCt}async vCt(){if(this.FIt)throw new g("Concurrent downloads are not supported.");try{this.VIt=new os;let t;if("now"===this.lCt)t=Ms.Jp(this.aCt.mCt("now"),this.aCt.gCt);else{const e=this.lCt,i=0===e?1:this.aCt.pCt(e);t=Ms.Jp(this.aCt.mCt(i),this.aCt.gCt)}const e=zz(t,Rr.wk,$h.rE,this.out,void 0,3e3,1e3,this.wCt.Vw),i=await this.yCt.Kk(e),s=await i.Ck(this.wCt.Vw),n=new j(s),{bCt:r,yN:o}=function(t){const e=Mi.LD(new GS(ra(t),new Ri)),i=Fo(e,(t=>t.Aw===Tt.vD||t.Aw===Tt.nD));if(void 0===i)return{bCt:t,yN:void 0};const s=si(t,0,i.ec),n=si(t,i.ec);return{bCt:s,yN:0===n.byteLength?void 0:n}}(n),h=rr.jD(ra(n));this.PA=function(t){const e=Fo(t,(t=>t.Aw===Tt.vP));return e.Z[0].yN.HD._N}(h);const a=function(t){const e=t.filter((t=>t.Aw===Tt.fD)),i=e.map((t=>Wz(t))),s=Fo(i,(t=>(null==t?void 0:t.Aw)===vn.QIt));if(!s)throw new g("No init data in init response");return s}(h);let u;if(this.dCt=a.index,this.fCt=a.offset,o){u=function(t,e,i){var s;const n=Fo(t,(t=>t.Aw===Tt.nD));var r;const o=co(null!=(r=null==(s=n.Z[0].oL)?void 0:s.oL)?r:vo.UZERO,i),h=n.Z[0];var a;const u=null!=(a=h.HD.KM)?a:0,c=h.rL[0],l=c.dL.reduce(((t,e)=>{var i;return t+(null!=(i=e.ct)?i:u)}),0)/i;return{cit:o,ct:l,MV:e}}(rr.jD(ra(n)),-this.aat.UIt,this.PA)}return{initialization:r,data:o,metadata:u}}finally{const t=this.VIt;this.VIt=void 0,null==t||t.Ob()}}ACt(){if(this.FIt)throw new g("Concurrent downloads are not supported.");this.VIt=new os;const t=void 0!==this.fCt?vo.fromNumber(this.fCt):void 0;return xb(this.SCt(this.dCt,t,this.wCt.Vw)).pipeThrough(new qo(new Yz(this.aat.Yq,this.PA))).pipeThrough(new qo(new Qz(this.wCt.Vw)))}async SCt(t,e,i){const s=this.TCt(t,e,i);return(await this.yCt.Kk(s)).Pk().pipeThrough(new qo(new Gz)).pipeThrough(new qo(this.kCt))}TCt(t,e,i){const s=this.aCt.ECt(t),n=void 0!==e?{start:e,end:void 0}:void 0;return zz(Ms.Jp(s,this.aCt.gCt),Rr.bk,$h.tE,this.out,n,25e3,1e3,i)}GIt(){void 0!==this.dCt&&(this.dCt=this.clt(this.dCt)),this.fCt=void 0;const t=this.VIt;this.VIt=void 0,null==t||t.Ob()}cancelDownload(){var t;this.wCt.Yw(),this.wCt=new da,this.VIt=null!=(t=this.VIt)?t:new os,this.dCt=void 0,this.fCt=void 0;const e=this.VIt;this.VIt=void 0,null==e||e.Ob()}async Hw(){this.$o(),this.kCt.Hw(),this.wCt.Yw(),await this.WIt,this.dCt=void 0,this.fCt=void 0}constructor(t,e,i){super(),this.lCt="now",this.wCt=new da,this.VIt=void 0,this.aCt=t,this.nCt=new Lz(i),this.kCt=new Uz,this.kCt.sCt.yn(Bz.KIt,this.Ds),this.lW=e,this.out=function(t){switch(t){case Qi.fE:return Ca.fE;case Qi._E:return Ca._E;default:return Ca.tE}}(t.Aw),this.yCt=new Xz(this.lW,this.nCt)}};var Qz=class{start(t){this.BQ=t,this.qw.Fw(this.xCt)}flush(){this.qw.Ow(this.xCt)}constructor(t){this.xCt=()=>{this.BQ.error(new Bu)},this.qw=t}};function Cr(t){var e;return t.value/(null!=(e=t.scale)?e:1)}r(),r(),r(),r(),r();var Jz="{initId}",$z=/{initId(?::0(?:\d+)d)?}/,tq=/{segmentId(?::0(?:\d+)d)?}/,eq=class{get o(){return this.ZS}get wG(){return this.oG}get xyt(){return this.RCt}get Ert(){return this.Fbt}get ICt(){return this.CCt}get PCt(){return this.DCt}get gCt(){return Ms.Jp(this.NCt,this.MCt.gCt)}get Zrt(){return this.LCt}get xh(){return this.RO}get BCt(){return this.OCt}get FCt(){return this.VCt}get UIt(){return this.WCt}get UCt(){return this.Cbt}tr(t){this.CCt=t.activeSegment,this.DCt=t.activeSequenceNumber,this.Fbt=t.segments}constructor(t,e,i){var s,n,r,o;this.Fbt=[],this.KO=t,this.GCt=i,this.ZS=t.id,this.oG=t.bandwidth,this.RCt=t.averageBandwidth,this.NCt=null!=(s=t.baseUrl)?s:"",this.LCt=null!=(n=t.codecs)?n:e.codecs,this.OCt=null!=(r=t.continuationPattern)?r:e.continuationPattern,this.VCt=null!=(o=t.initializationPattern)?o:e.initializationPattern,this.RO=t.label,this.WCt=t.mediaTimeOffset?Cr(t.mediaTimeOffset):0,this.Cbt=t.segmentDuration?Cr(t.segmentDuration):0,this.tr(t)}},iq=class extends eq{get Aw(){return Qi.fE}get MCt(){return this.GCt}get HCt(){return this.ZCt}get Jdt(){return this.XCt}get nM(){return this.vA}get Yq(){return'audio/mp4; codecs="'+this.Zrt+'"'}constructor(t,e,i){var s,n,r,o;super(t,e,i),this.ZCt=null!=(s=t.channels)?s:1,this.XCt=null!=(r=null!=(n=t.frameRate)?n:e.frameRate)?r:1024,this.vA=null!=(o=t.sampleRate)?o:e.sampleRate}},sq=class extends eq{get Aw(){return Qi._E}get MCt(){return this.GCt}get zCt(){return this.yp}get Jdt(){return this.XCt}get Yq(){return'video/mp4; codecs="'+this.Zrt+'"'}constructor(t,e,i){var s;super(t,e,i),this.yp=t.resolution,this.XCt=Cr(null!=(s=t.frameRate)?s:e.frameRate)}};function nq(t,e){const i=String(e);if(t===Jz||"now"===e)return i;const s=x(t.substring(9,t.lastIndexOf("d")));return Jh(i,s,"0")}function rq(t,e){const i=String(e);if(t===Jz)return i;const s=x(t.substring(12,t.lastIndexOf("d")));return Jh(i,s,"0")}var oq=class{get wst(){return this.qCt}get o(){return this.ZS}get YCt(){return this.KCt}get gCt(){return Ms.Jp(this.NCt,this.wst.gCt)}get xh(){return this.RO}get UIt(){return this.WCt}get jCt(){return this.QCt}tr(t){for(const e of this.cC){const i=Fo(t.tracks,(t=>e.o===t.id));i&&e.tr(i)}}constructor(t,e,i){var s;this.GCt=t,this.cC=i,this.qCt=e,this.ZS=t.id,this.KCt=t.alignId,this.NCt=null!=(s=t.baseUrl)?s:"",this.RO=t.label,this.WCt=t.mediaTimeOffset?Cr(t.mediaTimeOffset):0,this.QCt=t.protection,this.tr(t)}},hq=class extends oq{get MCt(){return this.GCt}get Z(){return this.cC}get gs(){return this.NA}get HCt(){return this.ZCt}tr(t){var e,i;super.tr(t),this.NA=t.language,this.ZCt=null!=(e=t.channels)?e:1,this.cY=null!=(i=t.mimeType)?i:"audio/mp4"}constructor(t,e){const i=[];super(t,e,i);for(const e of t.tracks)i.push(new iq(e,t,this))}},aq=class extends oq{get MCt(){return this.GCt}get Z(){return this.cC}get JCt(){return this.GCt.captions}tr(t){var e;super.tr(t),this.cY=null!=(e=t.mimeType)?e:"video/mp4"}constructor(t,e){const i=[];super(t,e,i);for(const e of t.tracks)i.push(new sq(e,t,this))}},uq=class{get o(){return this.ZS}get gCt(){return Ms.Jp(this.NCt,this.tPt.$Ct)}get ePt(){return this.iPt}get SR(){return this.hZ}get Kq(){return this.Yf}get sPt(){return this.nPt}get rPt(){return this.oPt}tr(t){var e;this.iPt=t.timeBounds,this.Yf=null!=(e=t.events)?e:[],this.hZ=t.currentTime?Cr(t.currentTime):void 0}constructor(t,e){var i,s,n;this.nPt=[],this.oPt=[],this.tPt=t,this.ZS=e.id,this.NCt=null!=(i=e.baseUrl)?i:"";for(const t of null!=(s=e.audio)?s:[])this.nPt.push(new hq(t,this));for(const t of null!=(n=e.video)?n:[])this.oPt.push(new aq(t,this));this.tr(e)}},cq=class{get WC(){return this.tPt}get hPt(){return this.aPt}get uPt(){return this.cPt}get lPt(){return this.dPt}get fPt(){return this._Pt}get vPt(){return this.mPt}get o0(){return this.nA}get gPt(){return this.pPt}get $Ct(){var t;return Ms.Jp(null!=(t=this.wPt)?t:"",this.yPt)}get bPt(){return this.APt}tr(t){var e;this.aPt=Cr(t.availabilityDuration),this.cPt=t.creationDate,this.dPt=t.fallbackPollRate,this._Pt=t.manifestVersion,this.nA=t.streamType,this.pPt=t.activePresentation,this.wPt=t.contentBaseUrl,this.APt=null==(e=t.timeSource)?void 0:e.url,this.tPt=t;for(const e of t.presentations){const t=Fo(this.mPt,(t=>t.o===e.id));t?t.tr(e):this.mPt.push(new uq(this,e))}this.mPt=this.mPt.filter((e=>t.presentations.some((t=>t.id===e.o))))}constructor(t,e){this.mPt=[],this.yPt=t,this.tPt=e,this.tr(e)}};r(),r();var lq=0,dq=class extends Co{get znt(){return!0}get xyt(){return this.SPt.xyt}get wG(){return this.SPt.wG}get Zrt(){return this.SPt.Zrt}get o(){return this.SPt.o}get xh(){var t;return null!=(t=this.SPt.xh)?t:""}get xC(){return this.xO}get Pyt(){return this.SPt.gCt}get Ryt(){}get Yq(){return this.SPt.Yq}get UIt(){return this.SPt.UIt}get gCt(){return this.SPt.gCt}get Aw(){return this.SPt.Aw}pCt(t){const e=(t-this.SPt.MCt.wst.SR)*this.framesPerSecond();return _.round(this.SPt.PCt+e)}TPt(t){return t+1}mCt(t){var e;let i,s=this.SPt.FCt;for(;i=null==(e=s.match($z))?void 0:e.pop();)s=s.split(i).join(nq(i,t));return s+("now"===t?"?uuid="+lP():"")}ECt(t){var e;let i,s=this.SPt.BCt;for(;i=null==(e=s.match(tq))?void 0:e.pop();)s=s.split(i).join(rq(i,t));return s}oW(){}rW(){}constructor(t){super(),this.xO=lq++,this.SPt=t}},fq=class extends dq{get kPt(){return this.SPt}get Ewt(){return this.SPt.nM}get Ht(){return this.KO}framesPerSecond(){return this.SPt.nM/this.SPt.Jdt}get ka(){return this.su||(this.su=Cl(this)),this.su}constructor(t,e){super(t),this.su=void 0,this.KO=e}},_q=class extends dq{get kPt(){return this.SPt}get Iyt(){return 0}get Jdt(){return this.SPt.Jdt}get Ti(){return this.SPt.zCt.height}get ji(){return this.SPt.zCt.width}get zCt(){return this.SPt.zCt}get Ht(){return this.KO}framesPerSecond(){return this.SPt.Jdt}get ka(){return this.su||(this.su=xl(this)),this.su}constructor(t,e){super(t),this.su=void 0,this.KO=e}};r();var jr=function(t){return t.EPt="alternative",t.xPt="main",t.RPt="commentary",t.IPt="",t.JV="descriptions",t.CPt="main-desc",t.PPt="translation",t}({}),vq=function(t){return t.EPt="alternative",t.xPt="main",t.RPt="commentary",t.IPt="",t.QV="captions",t.AC="sign",t.jV="subtitles",t}({}),mq=0,gq=class extends Co{get EC(){return this.DPt()}get Rt(){return this.He}set Rt(t){this.Rt!==t&&(this.He=t,t&&this.NPt(),this.LPt.MPt(),this.wo(new Ec(this)))}get ka(){return this.su||(this.su=yi(this)),this.su}get Idt(){return this.BPt}get o(){return this.GCt.o}get xC(){return this.xO}get xh(){var t;return null!=(t=this.GCt.xh)?t:""}get xE(){return this.Rt?"enabled":"disabled"}set xE(t){"enabled"===t?this.Rt=!0:"disabled"===t&&(this.Rt=!1)}get IC(){return this.AO}get DC(){return this.Hct}set DC(t){this.Hct=t,this.LPt.MPt(),this.wo(new GW(t,this))}CO(t){this.Rt=t}OPt(t){for(const e of this.AO.uC)e===t&&this.wo(new fG(e))}constructor(t,e,i){super(),this.AO=new Vc,this.xO=mq++,this.He=!1,this.Hct=void 0,this.GCt=e,this.LPt=i,this.BPt=new DZ(t,[]);for(const t of e.Z)this.AO.SO(this.createQuality(t))}},pq=class extends gq{get Aw(){return Qi.fE}get Lt(){return jr.xPt}get gs(){return this.GCt.gs}get MCt(){return this.GCt}NPt(){this.LPt.FPt(this)}DPt(){const t=this.LPt.VPt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new fq(t,this)}constructor(t,e){super(ee.fE,t,e)}},wq=class extends gq{get Aw(){return Qi._E}get Lt(){return vq.xPt}get gs(){return""}get MCt(){return this.GCt}get JCt(){return this.GCt.JCt}NPt(){this.LPt.WPt(this)}DPt(){const t=this.LPt.UPt;return(null==t?void 0:t.Ht)===this?t:void 0}createQuality(t){return new _q(t,this)}constructor(t,e){super(ee._E,t,e)}};function yq(t,e,i,s){if(!t)return;const n=function(t,e,i){const s=[];for(const t of e){var n;const e=null!=(n=t.mimeType)?n:"audio/mp4";var r;const i=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(e+'; codecs="'+i+'"')}return bq(t,e,s,[],i)}(t,e?[e]:[],!s),r=function(t,e,i){const s=[];for(const t of e){var n;const e=null!=(n=t.mimeType)?n:"video/mp4";var r;const i=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(e+'; codecs="'+i+'"')}return bq(t,e,[],s,i)}(t,i?[i]:[],!s),o=sX(n,r);return t.preferredKeySystems&&(null==o?void 0:o.ipt)&&(o.ipt=dX(o.ipt,t.preferredKeySystems)),o}function bq(t,e,i,s,n){const r=e.map((t=>t.protection)).filter(ji);if(!r.length)return;const o=r[0].type,h=Qe(r,(t=>t.systems)),a=Qe(h,(t=>function(t,e){void 0===e&&(e=!0);const i=[],s=e?function(t){return bm.filter((e=>e.Ew===t.toLowerCase()))}(t.schemeId):function(t){return ym.filter((e=>e.Ew===t.toLowerCase()))}(t.schemeId);for(const e of s)i.push({FU:Aq(t)?t.uri:void 0,aT:e,xG:void 0,EG:t.pssh?[mg(t.pssh).buffer]:[]});return i}(t,n)));return{rU:t,spt:{bTt:o},ipt:a,ATt:i,STt:s}}function Aq(t){return t.schemeId===tm.ww&&void 0!==t.keyFormat&&void 0!==t.keyFormatVersions}r(),r(),r();var Sq;function Tq(t){const e=t.SR,i=t.gR.dB(e);return i?i.jn(0)-e:0}Sq="Android"===Ms.iw.nw?200:300;var kq=Ms.Ys.np?1:.5,Eq=class{Cn(){1!==this.Ba&&(this.Ba=1,this.GPt=Ms.Wp((()=>{this.HPt()}),Sq),this.ZPt.gIt(this.XPt),this.FB.qR?this.zPt.yn(tl.VL,this.qPt):this.qPt())}EI(){0!==this.Ba&&(this.Ba=0,void 0!==this.GPt&&Ms.Up(this.GPt),this.ZPt.wIt(this.XPt),this.zPt.fn(tl.FL,this.YPt),this.zPt.fn(tl.VL,this.qPt),this.KPt=void 0,this.SB())}get jPt(){return xq(this.QPt.VPt,this.QPt.UPt)}async HPt(){await this.JPt,this.JPt=this.$Pt(),await this.JPt}tDt(t,e){const i=this.eDt(t,e),s=this.ZPt.wG;for(const t of i){if(t.iDt<=s)return t}return i[i.length-1]}async $Pt(){var t,e;const i=null==(t=this.QPt.VPt)?void 0:t.Ht,s=null==(e=this.QPt.UPt)?void 0:e.Ht,n=this.eDt(i,s);if(0===n.length)return void 0;const r=this.maybeSwitchToTargetQuality(n);if(r)return void await this.sDt(r);const o=this.maybeGetUpSwitch(n);o&&await this.sDt(o)}maybeSwitchToTargetQuality(t){const e=this.jPt;if(t.some((t=>Rq(t,e))))return;const i=this.ZPt.wG;for(const e of t){if(e.iDt<=i)return e}return t[t.length-1]}maybeGetUpSwitch(t){var e,i;const s=this.ZPt.wG;var n;var r;const o=(null!=(n=null==(e=this.QPt.VPt)?void 0:e.wG)?n:0)+(null!=(r=null==(i=this.QPt.UPt)?void 0:i.wG)?r:0);let h;for(const e of t){if(e.iDt<s&&e.iDt>o){h={nDt:e,Bft:Ms.Vg()};break}}if(!this.KPt||!Rq(this.KPt.nDt,null==h?void 0:h.nDt))return void(this.KPt=h);const a=Ms.Vg()-this.KPt.Bft,u=this.KPt.nDt.iDt,c=this.rDt.length>=3&&this.rDt.every((t=>t>u));if(a>1e3&&c){if(this.FB.XB.ZB||Ms.Ys.Jg){const t=2*this.ZPt.yG;if(!(Tq(this.FB)>t))return}else{const t=_.max(2*this.ZPt.yG+kq,this.GG.pB.minimumOffset);if(!(Tq(this.FB)>t))return void(this.oDt&&this.oDt.minimumOffset===t||(this.SB(),this.oDt={minimumOffset:t},this.GG.yB(this.oDt)))}return this.KPt.nDt}}async sDt(t,e){void 0===e&&(e=!1),this.KPt=void 0,this.SB();const i=this.jPt;if(i.hDt===t.hDt&&i.aDt===t.aDt)return;const s=t.hDt,n=t.aDt;i.aDt&&n&&i.aDt.wG>n.wG&&e&&(this.ZPt.vIt(t.iDt),this.rDt=[]),await this.QPt.uDt(n,s)}SB(){this.oDt&&(this.GG.SB(this.oDt),this.oDt=void 0)}eDt(t,e){let i=[],s=[];var n;t&&(i=(null==(n=t.DC)?void 0:n.length)?t.DC:t.IC.uC);if(e){var r;const t=(null==(r=e.DC)?void 0:r.length)?e.DC:e.IC.uC,i=t.slice().sort(((t,e)=>t.wG-e.wG)),n=this.cDt(i);0===n.length&&t.length>0&&n.push(Ws(t,(t=>t.wG))),s=n}const o=[],h=i.length>0?i:[void 0],a=s.length>0?s:[void 0];for(const t of h)for(const e of a)o.push(xq(t,e));return function(t){return t.sort(((t,e)=>e.iDt-t.iDt))}(o)}cDt(t){for(let e=0;e<t.length;e++){const i=t[e].zCt;if(i.height>=this.FB.Ti&&i.width>=this.FB.ji)return t.slice(0,e+1)}return t.slice()}Hw(){this.KPt=void 0,this.zPt.er(),this.SB()}constructor(t,e,i,s,n){this.FB=t,this.GG=e,this.QPt=i,this.lDt=s,this.ZPt=n,this.Ba=0,this.JPt=Promise.resolve(),this.rDt=[],this.oDt=void 0,this.YPt=()=>{var t,e;if(this.lDt.hI)return;const i=null==(t=this.QPt.VPt)?void 0:t.Ht,s=null==(e=this.QPt.UPt)?void 0:e.Ht,n=Ws(this.eDt(i,s),(t=>t.iDt));n&&(ah(this.sDt(n,!0)),this.FB.XB.ZB&&this.lDt.GC())},this.qPt=()=>{this.zPt.yn(tl.FL,this.YPt),this.zPt.fn(tl.VL,this.qPt)},this.XPt=()=>{if(this.rDt.unshift(this.ZPt.wG),this.rDt=this.rDt.slice(0,3),this.KPt){const t=this.KPt.nDt.iDt;this.ZPt.wG<t&&(this.KPt=void 0,this.SB())}},this.zPt=new q(this.FB)}};function xq(t,e){var i;var s;return{hDt:t,aDt:e,iDt:(null!=(i=null==t?void 0:t.wG)?i:0)+(null!=(s=null==e?void 0:e.wG)?s:0)}}function Rq(t,e){var i,s,n,r;return void 0===t||void 0===e?t===e:(null==(i=t.hDt)?void 0:i.o)===(null==(s=e.hDt)?void 0:s.o)&&(null==(n=t.aDt)?void 0:n.o)===(null==(r=e.aDt)?void 0:r.o)&&t.iDt===e.iDt}r();var Iq=class t{static async create(e,i,s){const n=await Cq(e,i,s);return new t(n,e,i)}get ubt(){return(this.dDt.serverTimeMs+(Ms.Vg()-this.dDt.localTimeMs))/1e3}get fDt(){return(this.dDt.localTimeMs-this.dDt.serverTimeMs)/1e3}async vRt(t,e,i){for(;!i.Bw;){await Fe(6e5,i);try{this.dDt=await Cq(t,e,i)}catch(t){th(t)}}}Hw(){this.WT.Yw()}constructor(t,e,i){this.WT=new da,this.dDt=t,this.vRt(e,i,this.WT.Vw).catch(It)}};async function Cq(t,e,i){let[s,n,r]=await Pq(t,e,i);return n>20&&([s,n,r]=await Pq(t,e,i)),{localTimeMs:s,serverTimeMs:r-n/2}}async function Pq(t,e,i){const s=Ms.Vg(),n=await e.Kk({yE:xe.GET,Gu:t,Vw:i}),r=Ms.Vg()-s,o=await n.Rk(i);return[s,r,1e3*Number(o)]}var Dq=class extends pe{constructor(){super("seek")}},Nq=function(t){return t.PZ="seek",t}({}),Mq=[Ti.ro,tl.tC,Ti.sb],Lq=class extends Co{get WC(){return this.tPt}get gR(){return this._Dt&&this.vDt?this._Dt.gR.Sn(this.vDt.gR):this._Dt?this._Dt.gR:this.vDt?this.vDt.gR:se.mB()}get VPt(){return this.mDt}get UPt(){return this.gDt}get ht(){return this.aO}get rt(){return this.cO}get pDt(){return this.wDt.Vb}get W(){return this.yDt.Vb}get rI(){return this.tPt?function(t,e,i){var s;const n=null==(s=t.vPt[0])?void 0:s.SR,r=t.hPt;if(void 0===n||void 0===r)return i>0&&i<Hu?new se([0,i],[!0,!0]):se.mB();let o=e.CIt;if(!o){const e=UG(t.uPt).getTime()/1e3;o=n+(Date.now()/1e3-e)}return new se([o-r,o],[!0,!0])}(this.tPt,this.bDt,this.FB.ct):se.mB()}async ADt(){this._Dt&&await this._Dt.$S(0,1/0),this.vDt&&await this.vDt.$S(0,1/0)}Dn(){if(!this.Cc.src)throw new A(Qa.SOURCE_INVALID,"No src property found in given source.");this.cpt||(this.cpt=this.KE(this.fW.Vw).catch(this.O6))}async KE(t){this.wo(new Di);const e=this.Cc.src,i=await this.SDt.NRt(e,t);this.tPt=new cq(e,i),this.tPt.bPt&&(this.TDt=await Iq.create(this.tPt.bPt,this.lW,t)),this.kDt();const s=this.tPt.vPt[this.tPt.vPt.length-1];this.createTracksForPresentation(s),this.wDt.Ob(),this.MPt()}FPt(t){for(const e of this.aO.uC)e.CO(e===t)}WPt(t){for(const e of this.cO.uC)e.CO(e===t)}MPt(){const t=Fo(this.aO.uC,(t=>t.Rt)),e=Fo(this.cO.uC,(t=>t.Rt));var i;for(const t of null!=(i=null==e?void 0:e.JCt)?i:[])this.EDt.pgt({Gtt:t.channel,Htt:t.language,xh:t.label});const s=this.vZ.tDt(t,e);ah(this.uDt(s.aDt,s.hDt))}kDt(){if(!this.tPt||"live"!==this.tPt.o0||!this.TDt)return;const t=this.tPt.vPt.filter((t=>t.o===this.tPt.gPt))[0].SR,e=this.TDt.fDt+new Date(this.tPt.uPt).getTime()/1e3;this.bDt.TIt(e,t)}createTracksForPresentation(t){var e,i,s,n;for(const e of null!=(s=t.sPt)?s:[])this.aO.tt(new pq(e,this));for(const e of null!=(n=t.rPt)?n:[])this.cO.tt(new wq(e,this));null==(e=this.aO.lC(0))||e.CO(!0),null==(i=this.cO.lC(0))||i.CO(!0)}get FC(){return Ws([this.xDt,this.RDt].filter(ji),(t=>t.theolive))}get IDt(){const t=this.bDt.CIt;if(void 0!==t)return t}Cn(){this.CDt=!0,this.PDt()}EI(){var t;this.CDt=!1,this.DDt().catch(this.O6),"live"===(null==(t=this.WC)?void 0:t.o0)&&(this.NDt(),this.MDt())}NDt(){this.LDt&&this.LDt.cancelDownload()}MDt(){this.BDt&&this.BDt.cancelDownload()}GC(t){this.j9.Yw(),this.j9=new da,this.Q9=ig((e=>this.ODt(t,this.Q9,e)),this.j9).catch(this.O6)}async ODt(t,e,i){if(e&&await e,await ou(this.W,i),"live"!==this.tPt.o0)throw new g("The current video source does not support Live playback.");if(J(i),await this.DDt(),J(i),this.LDt&&(this.LDt._Ct()||this.LDt.cCt!==(null!=t?t:"now"))){var s;if(this.NDt(),this._Dt){for(;this._Dt.FIt;)await ou(this._Dt.WIt,i);await this._Dt.$S(0,1/0)}null==(s=this.LDt)||s.Eb(null!=t?t:"now")}if(this.BDt&&(this.BDt._Ct()||this.BDt.cCt!==(null!=t?t:"now"))){var n;if(this.MDt(),this.vDt){for(;this.vDt.FIt;)await ou(this.vDt.WIt,i);await this.vDt.$S(0,1/0)}null==(n=this.BDt)||n.Eb(null!=t?t:"now")}this.wo(new Dq),J(i),this.Q9=void 0,this.PDt()}Eb(t){this.j9.Yw(),this.j9=new da,this.Q9=ig((e=>this.J9(t,this.Q9,e)),this.j9).catch(this.O6)}async J9(t,e,i){var s,n;e&&await e,await ou(this.W,i),J(i),await this.DDt(),J(i),this.LDt&&(this.LDt._Ct()||this.LDt.cCt!==t)&&this.NDt(),this.BDt&&(this.BDt._Ct()||this.BDt.cCt!==t)&&this.MDt(),this.wo(new Dq),J(i),null==(s=this.LDt)||s.Eb(t),null==(n=this.BDt)||n.Eb(t),this.Q9=void 0,this.PDt()}uDt(t,e){var i,s;return(null==(i=this.LDt)?void 0:i.aat)===e&&(null==(s=this.BDt)?void 0:s.aat)===t?Promise.resolve():(this.FDt.Yw(),this.FDt=new da,this.VDt=ig((i=>this.WDt(t,e,this.VDt,i)),this.FDt).catch(this.O6),this.VDt)}async WDt(t,e,i,s){i&&await i,await ou(this.wDt.Vb,s),J(s),await this.DDt(),J(s),await this.UDt(t,e),await this.GDt(t,e),J(s),this.VDt=void 0,this.PDt()}async UDt(t,e){var i,s,n;const r=null!=(n=this.IDt)?n:"now";if((null==(i=this.LDt)?void 0:i.aat)!==e){var o;const t=this.LDt&&!this.LDt._Ct(),i=null==(o=this.LDt)?void 0:o.cCt;if(this.LDt&&(await this.LDt.Hw(),this.LDt=void 0),this._Dt&&await this._Dt.WIt,e){var h,a;const s=null!=(a=null==(h=this._Dt)?void 0:h.gR)?a:se.mB(),n=t?i:s.jn(s.V-1);this.LDt=new jz(e,this.lW,this.qlt),this.LDt.yn(Bz.KIt,(t=>this.HDt(ee.fE,t))),this.LDt.Eb(null!=n?n:r)}}if((null==(s=this.BDt)?void 0:s.aat)!==t){var u;const e=this.BDt&&!this.BDt._Ct(),i=null==(u=this.BDt)?void 0:u.cCt;if(this.BDt&&(await this.BDt.Hw(),this.BDt=void 0),this.vDt&&await this.vDt.WIt,t){var c,l;const s=null!=(l=null==(c=this.vDt)?void 0:c.gR)?l:se.mB(),n=e?i:s.jn(s.V-1);this.BDt=new jz(t,this.lW,this.qlt),this.BDt.yn(Bz.KIt,(t=>this.HDt(ee._E,t))),this.BDt.Eb(null!=n?n:r)}}}async GDt(t,e){const i=function(t,e,i,s,n){const r=yq(t,null==e?void 0:e.Ht.MCt.MCt,null==i?void 0:i.Ht.MCt.MCt,s),o=uX(r),h=[];e&&h.push({Dk:e.Yq});i&&h.push({Dk:i.Yq});return{Aw:Mr.gW,u4:h,eH:o,b4:n&&!s}}(this.Cc.contentProtection,e,t,this.FB.XB.ZB,this.Cc.useManagedMediaSource);if(this.jG&&this.jG.cJ(i)){var s,n;const t=!(null==(s=this.LDt)?void 0:s._Ct());if(this._Dt&&t){for(;this._Dt.FIt;)await this._Dt.WIt;await this._Dt.aY()}const e=!(null==(n=this.BDt)?void 0:n._Ct());if(this.vDt&&e){for(var r,o;null==(r=this.vDt)?void 0:r.FIt;)await this.vDt.WIt;await(null==(o=this.vDt)?void 0:o.aY())}await this.jG.dJ(i)}else{this.NDt(),this.MDt(),this._Dt&&(await this._Dt.Hw(),this._Dt=void 0),this.vDt&&(await this.vDt.Hw(),this.vDt=void 0),this.FB.u7();try{await this.FB.er(),this.jG=await this.FB.Dn(i),this.yDt.Ob(),this.jG.J3&&this.LDt&&(this.jG.J3.yn(ue.JQ,this.Ds),this._Dt=new Mz(this.jG.J3,this.FB,e,this.EDt)),this.jG.t4&&this.BDt&&(this.jG.t4.yn(ue.JQ,this.Ds),this.vDt=new Mz(this.jG.t4,this.FB,t,this.EDt)),"live"===this.tPt.o0&&this.jG.n4(1/0)}finally{this.FB.l7()}}}PDt(){!this.CDt||this.Q9||this.VDt||this.ZDt||this.XDt||(this.vZ.Cn(),this.zDt=new da,this.BDt&&this.vDt&&(this.ZDt=this.qDt(this.BDt,this.vDt,this.zDt.Vw).catch(this.O6)),this.LDt&&this._Dt&&(this.XDt=this.qDt(this.LDt,this._Dt,this.zDt.Vw).catch(this.O6)))}async DDt(){this.vZ.EI(),this.zDt&&(this.zDt.Yw(),this.zDt=void 0),this.ZDt&&(await this.ZDt,this.ZDt=void 0),this.XDt&&(await this.XDt,this.XDt=void 0)}async qDt(t,e,i){for(await this.W;t.FIt;)await ou(t.WIt,i);for(;e.FIt;)await ou(e.WIt,i);if(!t._Ct()){const i=Ms.Vg()/1e3,s="now"===t.cCt,{initialization:n,data:r,metadata:o}=await t.vCt(),h={Aw:Ce.tJ,qk:n},a=r?{Aw:Ce.tJ,qk:r}:void 0,u=e.gR;!Ms.Ys.tp&&!this.FB.XB.ZB&&o&&u.jn(u.V-1)>o.cit&&await e.$S(o.cit,1/0),await e.w2(h),a&&await e._2(a,o,t.aat);const c=e.gR.tB(u);s&&c.V>0&&this.bDt.AIt(i,c.jn(c.V-1))}for(;!t.uCt;){J(i);const s=t.ACt();await ou(e.appendStream(s,t),i)}}async Hw(){this.fW.Yw(),this.cpt&&await this.cpt.catch(It),this.Q9&&(this.j9.Yw(),this.NDt(),this.MDt(),await this.Q9.catch(It)),this.VDt&&(this.FDt.Yw(),this.NDt(),this.MDt(),await this.VDt.catch(It)),await this.DDt(),this.LDt&&await this.LDt.Hw(),this.BDt&&await this.BDt.Hw(),this.LDt=void 0,this.BDt=void 0,this.yDt.Yw(),this.wDt.Yw(),this.jG&&(await this.FB.er(),this.jG=void 0),this._Dt=void 0,this.vDt=void 0,this.FB.fn(tl.VL,this.HB),this.FB.fn(Mq,this.updateActiveQualities),this.aO.er(),this.mDt=void 0,this.cO.er(),this.gDt=void 0,this.tPt=void 0,this.TDt&&(this.TDt.Hw(),this.TDt=void 0),this.CDt=!1}constructor(t,e,i,s,n,r,o,h,a,u){super(),this.CDt=!1,this.YDt=!1,this.aO=new Nn,this.cO=new Nn,this.KDt=void 0,this.mDt=void 0,this.gDt=void 0,this.wDt=new os,this.jG=void 0,this.cpt=void 0,this.yDt=new os,this.fW=new da,this.VDt=void 0,this.FDt=new da,this.Q9=void 0,this.j9=new da,this.LDt=void 0,this._Dt=void 0,this.XDt=void 0,this.BDt=void 0,this.vDt=void 0,this.ZDt=void 0,this.zDt=void 0,this.HB=()=>{this.YDt=!0},this.updateActiveQualities=()=>{var t,e;const i=this.FB.SR,s=null==(t=this._Dt)?void 0:t.LIt(i),n=null==(e=this.vDt)?void 0:e.LIt(i);if(this.mDt!==s&&(this.mDt=s,s))for(const t of this.aO.uC)t.OPt(s);if(this.gDt!==n&&(this.gDt=n,n))for(const t of this.cO.uC)t.OPt(n)},this.HDt=(t,e)=>{const i=e.data;if(i.Aw===vn.JIt){const{tCt:e,eCt:n,$It:r,iCt:o}=i;if(this.TDt){const i=this.TDt.ubt,s=this.FB.SR;if(this.YDt&&0!==s){const o={theolive:i-e+r-s,engine:n,distribution:i-(e+n),player:r-s};t===ee.fE?(this.RDt=o,this.bDt.RIt(this.TDt.fDt+e,r)):(this.xDt=o,this.bDt.EIt(this.TDt.fDt+e,r))}}var s;if(o)null!=this.KDt||(this.KDt=this.FB.LI(hs.$V,"timecode","timecode",void 0,!1,Lr.DEFAULT,!1,void 0)),this.KDt.dW(new Le(r,r,o,!1,void 0)),oo(this.KDt,null!=(s=this.FB.gR.Cn(0))?s:-1)}this.wo(e)},this.O6=t=>{Je(t)||(this.EI(),this.wo(new Ga(new A(Qa.MEDIA_LOAD_ERROR,t.message))))},this.Cc=t,this.SDt=e,this.FB=i,this.lW=n,this.bDt=r,this.vZ=new Eq(i,o,this,a,s),this.qlt=h,this.EDt=u,this.FB.yn(tl.VL,this.HB),this.FB.yn(Mq,this.updateActiveQualities)}};r();var Bq=class extends kT{YB(){const t=this.FB.gR;return 0===t.V?0:t.jn(t.V-1)-this.FB.SR}GC(){this.ea.GC()}TB(){return Pz(super.TB())}KB(){return!Ms.Ys.Jg}constructor(t,e,i){super(t,e,i)}},Oq=[Ti.Yy,Ti.Xy,Ti.sb,Ti.Cy,Ti.zy,Ti.ob,Ti.xy,Ti.Ny,Ti.Py],Fq=class extends Co{gC(){this.FB.yn(Oq,this.Ds),this.FB.yn(tl.VL,this.xX),this.FB.yn([Ti.ro,Ti.Zy],this.jDt),this.FB.yn(yo.da,this.QDt),this.FB.yn(Ti.sb,this.vd),this._H.yn(ro,this.Ds)}vC(){this.FB.fn(Oq,this.Ds),this.FB.fn(tl.VL,this.xX),this.FB.fn([Ti.ro,Ti.Zy],this.jDt),this.FB.fn(yo.da,this.QDt),this.FB.fn(Ti.sb,this.vd),this._H.fn(ro,this.Ds)}get ht(){return this.aO}get rt(){return this.cO}get WC(){var t,e;return null==(e=this.QPt)||null==(t=e.WC)?void 0:t.WC}get vI(){return this.FB.vI}set vI(t){this.FB.vI=t}get yI(){return!1}set yI(t){}get $G(){return this.tH}xI(){return!1}bI(){return this.FB.Ca}Sa(){return this.FB.lH}LI(t){return this.FB.dH(t)}be(){this.FB.be()}ge(){return this.FB.ge()}CI(){}DI(){}RI(){}II(){}get GR(){return this.FB.GR}set GR(t){this.FB.GR=t}get SR(){var t;return null!=(t=this.JDt)?t:this.FB.SR}set SR(t){this.ER(t)}ER(t,e){this.j9.Yw(),this.j9=new da,this.Q9=ig((e=>this.J9(t,e,this.Q9)),this.j9)}get wR(){const t=this.$Dt();if(t)return new Date(t.getTime()+1e3*this.SR)}set wR(t){const e=this.$Dt();t&&e&&(this.SR=e.getTime()-t.getTime())}$Dt(){const t=this.WC;if(!t)return;const e=new Date(t.creationDate).getTime();let i=NaN;for(const e of t.presentations)e.currentTime&&(i=e.currentTime.value/(e.currentTime.scale||1)*1e3);return S(i)?void 0:new Date(e-i)}get bt(){return this.Cc}get KR(){return this.FB.KR}set KR(t){this.FB.KR=t}get ct(){const t=this.FB.ct;return t===Hu?1/0:t}get RR(){return!1}get DR(){return this.qG}get lt(){return this.zG}get MR(){return this.tNt}get OR(){return!1}get WR(){return Bo({},{dO:0,fO:0,_O:0,vO:0,mO:0,gO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.FB.UR())}get XR(){return!0}get hI(){return this.aZ}get QG(){}get nt(){return this.Ll}get cI(){return this.FB.cI}get fI(){return this.FB.fI}get gR(){return this.Skt.ks()}get Skt(){return this.QPt?this.QPt.gR:se.mB()}get JR(){return this.FB.JR.ks()}get rI(){var t,e;return null!=(e=null==(t=this.QPt)?void 0:t.rI.ks())?e:se.mB().ks()}get qR(){return this.Oit}get VC(){return!0}get pI(){return this.mZ}get IDt(){var t;return null==(t=this.QPt)?void 0:t.IDt}get qB(){if(this.qR)return;if(!this.YDt)return;const t=this.SR,e=this.bDt.PIt(t);if(void 0===e)return;const i=this.Skt;let s=0;if(i.V>0){const e=i.jn(i.V-1);s=_.max(e-t,0)}return _.max(e,s)}get FC(){var t;return null==(t=this.QPt)?void 0:t.FC}get sI(){return this.FB.sI}get tI(){return this.eNt}set tI(t){this.eNt=t,this.iNt()}async iNt(){this.eNt!==hl.QH&&this.QPt&&(this.QPt.Dn(),this.eNt!==hl.jB&&this.eNt!==hl.pG||(await this.QPt.pDt,"vod"===this.QPt.WC.o0&&this.QPt.Cn()))}async xa(t,e,i){if(J(i),await this.er(),J(i),!GT(t))return this.qG=new A(Qa.SOURCE_INVALID,"HESP source incorrectly configured"),this.zG=Xs(this.qG),this.sNt(this.qG),Promise.resolve();const s=t;this.Cc=s;const n=new fz(this.lW);this.nNt=this.rNt(t),this.GG=new Bq(this,this.FB,this.nNt),this.GG.Rt=!0,this.GG.yn("latencyrecoveryseek",this.Ds),this.pI.Ma(this.GG),this.QPt=new Lq(s,n,this.FB,this.tH,this.lW,this.bDt,this.GG,this.qlt,this,this.EDt),this.QPt.yn(Ti.Vy,this.Ds),this.QPt.yn(yo.da,this.oNt),this.aO.fC=this.QPt.ht,this.cO.fC=this.QPt.rt,this.rH.SG(t.contentProtection),ah(this.iNt())}rNt(t){return t.latencyConfiguration?t.latencyConfiguration:Dz()}async kI(){var t;if(!this.QPt)return;this.Oit=!1,this.QPt.Dn(),await this.QPt.W,this.wo(new H(this.SR));const e=this.QPt.vy(Nq.PZ);this.GC(),await e,this.QPt.Cn(),await this.FB.kI(),null==(t=this.GG)||t.Cn()}TI(){var t;this.QPt&&(this.Oit=!0,this.wo(new fl(this.SR)),this.QPt.EI(),null==(t=this.GG)||t.EI(),this.FB.TI())}GC(){if(this.ixt)throw new g("Cannot seek while resetting");this.j9.Yw(),this.j9=new da,this.Q9=ig((t=>this.ODt(this.Q9,t)),this.j9)}hNt(){var t;null==(t=this.QPt)||t.EI()}sNt(t){this.wo(new Ga(t)),this.hNt()}async J9(t,e,i){var s;if(this.ixt)throw new g("Cannot seek while resetting");let n=t;if(this.aNt(n),this.rI.length>0&&(n=se.xn(this.rI).qL(n),this.aNt(n)),this.QPt){i&&(await i.catch(It),J(e)),(null==(s=this.GG)?void 0:s.gB)&&this.GG.EI();try{const t=this.FB.vy(Ti.Ky,e);this.FB.Eb(n),this.QPt.Eb(n),await t}catch(t){throw th(t),this.QPt.EI(),this.uNt(),t}this.cNt()}}async ODt(t,e){this.wo(new pe("golive"));const i=this.IDt;if(this.aNt(i),this.QPt){t&&(await t.catch(It),J(e));try{let t,s=this.GG.pB.targetOffset;if(await this.QPt.pDt,i&&s>=1){if(!this.GG.KB()){s-=_.min(1,.5*s)}t=i-s}else t=this.IDt?this.IDt-.2:void 0;for(this.QPt.GC(t);this.Skt.V>0;)await this.QPt.vy(ue.JQ,e);const n=this.Skt;for(;0===this.Skt.tB(n).V;)await this.QPt.vy(ue.JQ,e);t=this.Skt.Cn(this.Skt.V-1),t=this.lNt(t),this.aNt(t);const r=this.FB.vy(Ti.Ky,e);this.FB.Eb(t,!0),await r}catch(t){var s;if(Je(t))throw null==(s=this.GG)||s.Cn(),t;throw this.QPt.EI(),await this.QPt.ADt(),this.uNt(),t}this.cNt()}}aNt(t){this.aZ=!0,this.JDt=t,this.wo(new L(this.SR))}cNt(){this.aZ&&(this.JDt=void 0,this.aZ=!1,this.wo(new ha(this.SR)))}uNt(){this.JDt=void 0,this.aZ=!1}lNt(t){return t}async sxt(t,e,i){var s;J(i),t&&await t.catch(It),e&&await e.catch(It),await this.EDt.er(),null==(s=this.GG)||s.EI(),this.QPt&&(await this.QPt.Hw(),this.QPt=void 0),J(i),await this.FB.er(),J(i),this.FB.fH(),this.cO.er(),this.aO.er(),this.uNt(),this._H.er(),this.bDt.er(),this.qG=void 0,this.zG=void 0,this.Oit=!0,this.YDt=!1,this.Cc=void 0,this.ixt=void 0,this.nNt=void 0}er(){return this.j9.Yw(),this.j9=new da,this.dNt.Yw(),this.dNt=new da,this.ixt=this.sxt(this.Q9,this.ixt,this.dNt.Vw),this.ixt}async gn(){var t,e;this.vC(),this._H.gn(),this.Cc&&await this.er(),this.$o(),this.FB.gH=void 0,null==(t=this.GG)||t.fn("latencyrecoveryseek",this.Ds),null==(e=this.GG)||e.Hw(),await this.EDt.gn(),this.Ll.gn(),this.aO.gn(),this.cO.gn()}constructor(t,e,i,s,n){super(),this.QPt=void 0,this.aZ=!1,this.j9=new da,this.Q9=void 0,this.ixt=void 0,this.dNt=new da,this.Oit=!0,this.YDt=!1,this.aO=new Wh,this.cO=new Wh,this.qG=void 0,this.zG=void 0,this.eNt=hl.QH,this.vd=()=>{const t=this.gR;t.length>0&&this.EDt.iW(t.start(0))},this.jDt=()=>{this.FB.qR!==this.Oit&&(this.FB.qR?this.TI():this.kI().catch(It))},this.xX=()=>{this.YDt=!0},this.oNt=t=>{this.qG=t.errorObject,this.zG=Xs(this.qG),this.sNt(this.qG)},this.QDt=t=>{this.qG=vk(t.lt),this.zG=t.lt,this.sNt(this.qG)},this.FB=t,this._H=new q(this.FB,!0),this.lW=e,this.tH=new Az(i.xj,i.aj.yG),this.rH=new Xh(e),this.FB.gH=this.rH,this.EDt=new _l(this.FB),this.Ll=new Fu([this.FB.nt,this.EDt.Z]),this.bDt=new Sz,this.tNt=new _z(this),this.mZ=s,this.qlt=n.retryConfiguration,this.gC()}},Vq=class extends Fq{wo(t){if(this.fNt){if(t.type===Ti.Ky)return void this._Nt();if(t.type===tl.FL||t.type===Ti.jy||t.type===tl.VL)return void this.vNt.push(t)}super.wo(t)}_Nt(){this.fNt=!1,void 0!==this.mNt&&Ms.Wg(this.mNt);const t=Fo(this.vNt,(t=>t.type===tl.VL));t&&super.wo(t),En(this.vNt)}AI(){if(We(this.FB))return this.FB.AI()}async er(){this.gNt=!1,this._Nt(),await super.er()}async gn(){h.removeEventListener("visibilitychange",this.pNt),this._Nt(),await super.gn(),await this.FB.Hw(),await this.wH.pH(this.wNt)}lNt(t){return Z.$m&&Z.rg>=15&&Z.Yv?t+.25:t}constructor(t,e,i,s,n,r){super(t,e,i,s,r),this.gNt=!1,this.fNt=!1,this.vNt=[],this.mNt=void 0,this.pNt=()=>{const t=this.GR||0===this.vI;"hidden"===h.visibilityState&&!this.qR&&t?(this.TI(),this.gNt=!0):"visible"===h.visibilityState&&this.gNt&&(this.fNt=!0,this.mNt=Ms.Ug((()=>{for(const t of this.vNt)super.wo(t);this.mNt=void 0,this.fNt=!1}),2e3),ah(this.kI()),this.gNt=!1)},this.wH=n,this.wNt=t,Z.Lg&&h.addEventListener("visibilitychange",this.pNt)}};r();var Wq=class{get VH(){return Zt.jC}async BH(t,e){return function(t){if(!t)return!1;const e=t.toLowerCase();return Sl(e,nl.KC)||Sl(e,nl.jC)}(t.type)}async OH(t){return lT(t)}};O(new class extends Wq{hP(t,e,i,s,n,r,o){const h=new ut(e),a=h.LH(ee._E);return new Vq(a,i,n,r,h,s)}BH(t,e){return Ms.$x&&Sb?Z.IS_IOS_CHROME||Z.Im&&Z.Pm<6?Promise.resolve(!1):Bf(t.useManagedMediaSource)?super.BH(t,e):Promise.resolve(!1):Promise.resolve(!1)}FH(){return!1}}),r(),r();var Uq=class extends Fq{AI(){if(We(this.FB))return this.FB.AI()}async gn(){await super.gn(),await this.wH.pH(this.FB)}constructor(t,e,i,s,n,r){super(t,e,i,s,r),this.wH=n}};Z.$m&&Z.iu&&O(new class extends Wq{get VH(){return Zt.gG}async BH(t,e){var i,s;if(Z.IS_IOS_CHROME)return!1;const n=await super.BH(t,e);var r;if(null==(r=null==(s=Hd())||null==(i=s.canPlayType)?void 0:i.call(s,nl.zC))||!r||!n||!("serviceWorker"in Bl))return!1;try{const t=Bl.serviceWorker.ready;return await rg(t,1e3),!0}catch(t){return!1}}async OH(t){return!!t.fairplay&&await super.OH(t)}hP(t,e,i,s,n,r,o){if(t instanceof HTMLDivElement){const t=e.qnt(ee._E);return new Uq(t,i,n,r,e,s)}throw new A(Qa.CONFIGURATION_ERROR,"Container Div element expected.")}FH(){return!1}}),r(),r(),r(),r();var Gq="theo_live_user_id",Hq=class{incrementSequenceNumber(){this.iS+=1}get sequenceNumber(){return this.iS}constructor(t){this.externalId=t,this.id=lP(),this.userId=Zq(),this.iS=0}};function Zq(){try{const t=localStorage.getItem(Gq);if(t)return t;const e=lP();return localStorage.setItem(Gq,e),e}catch(t){return lP()}}r();var Xq=class{mgt(t){const e=this.yNt.get(t.id);if(e)return e;const i=new zq(t,this.lW,this.bNt);return this.yNt.set(t.id,i),i}constructor(t,e){this.lW=t,this.yNt=new Map,this.bNt=e}},zq=class{get ANt(){return Da()-this.SNt>36e5}tr(){this.TNt=!1,this.SNt=Da(),this.kNt=this.eTt(),this.kNt.catch((()=>this.TNt=!0))}async eTt(){const{id:t,discovery:e,devDiscovery:i}=this.ZS;if(Tm(e.pathname,"manifest.json"))return function(t){return{id:{id:t.id,discovery:Ms.Nh("dev://"),devDiscovery:void 0},name:"demo",mode:"demo",status:"playing",source:{src:t.id,type:"theo.live"},customization:{autoplay:!0}}}(this.ZS);let s=await this.ENt(t,e,this.xNt);if(s||void 0===i||(s=await this.ENt(t,i,this.xNt)),!s)throw new Yq(t);const{mode:n,status:r,fallback:o,metadata:h}=s;if("locked"===n)throw new Kq(t);if("deleted"===r)throw new jq(t);return{id:this.ZS,name:h.name,mode:n,status:r,source:Qq(s),fallback:o?await this.RNt(o,e,i,this.xNt):void 0,insights:null==h?void 0:h.insights,enhancedLogging:null==h?void 0:h.enhancedLogging,customization:null==h?void 0:h.customization,sseEndpoint:s.sseEndpoint}}async RNt(t,e,i,s){if("theo.live"!==t.type)return{src:t.src,type:t.type};let n=await this.ENt(t.src,e,s);return n||void 0===i||(n=await this.ENt(t.src,i,this.xNt)),n?Qq(n):void 0}async ENt(t,e,i){try{const s=await this.lW.Kk({Gu:Ms.Nh(t,e.toString()).toString(),jk:i});return await s.xk()}catch(t){return}}get Gtt(){return(this.TNt||this.ANt)&&this.tr(),this.kNt}constructor(t,e,i){this.ZS=t,this.lW=e,this.xNt=new na,i.discoveryHeader&&this.xNt.append("x-theolive-discovery",i.discoveryHeader),this.tr()}};var qq=class extends A{constructor(t,e,i){super(t,"Could not load channel with id "+e+": "+i),this.channelId=e,this.reason=i}},Yq=class extends qq{constructor(t){super(Qa.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel could not be found")}},Kq=class extends qq{constructor(t){super(Qa.THEO_LIVE_CHANNEL_NOT_FOUND,t,"This account has been locked")}},jq=class extends qq{constructor(t){super(Qa.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel got deleted")}};function Qq(t){var e;return{src:t.hespSrc,type:"theo.live",hlsSrc:t.hlsSrc,targetLatency:null==(e=t.metadata.customization)?void 0:e.targetLatency,contentProtection:t.drmConfig?Jq(t.drmConfig):void 0}}function Jq(t){const{integration:e,widevine:i,playready:s,fairplay:n}=t;return Bo({integration:e},i&&{widevine:{licenseAcquisitionURL:i.licenseUrl}},s&&{playready:{licenseAcquisitionURL:s.licenseUrl}},n&&{fairplay:{licenseAcquisitionURL:n.licenseUrl,certificateURL:n.certificateUrl}})}function $q(t,e,i){return{id:t,discovery:Ms.Nh(t,e),devDiscovery:i?Ms.Nh(t,i):void 0}}r(),r();var Sr=function(t){return t.STARTING="s",t.PLAYING="p",t.SEEKING="k",t.REBUFFERING="r",t.PAUSED="a",t.ENDED="e",t.QUIT="q",t}({}),pn=function(t){return t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.OTHER="o",t}({});function Xe(t){return 100*_.round(t/100)}function tY(t){const e=t.kR(),i=t.pR();for(let t=0;t<i.length;t++)if(i.start(t)<=e&&e<=i.end(t))return 1e3*(i.end(t)-e);return 0}function eY(t){return Fo(t.uC,(t=>t.Rt))}function iY(t){return t.IC.lC(0)}function sY(t){return t.IC.lC(t.IC.V-1)}r(),r();var ys=class t{static starting(e,i,s){return new t(Sr.STARTING,e,i,s)}static playing(e){return new t(Sr.PLAYING,e)}static seeking(e,i){return new t(Sr.SEEKING,e,i)}static rebuffering(e,i){return new t(Sr.REBUFFERING,e,i)}static paused(e){return new t(Sr.PAUSED,e)}static ended(e){return new t(Sr.ENDED,e)}static quit(e){return new t(Sr.QUIT,e)}get ct(){return Date.now()-this.INt}CNt(){const t=this.ea.HX.aj.wG,e=this.ea.pI.qB,i=tY(this.ea);t>0&&void 0!==i&&void 0!==e&&(this.PNt+=1,this.DNt=this.NNt(this.DNt,i),this.MNt=this.NNt(this.MNt,1e3*this.ea.pI.bd.targetOffset),this.JG=this.NNt(this.JG,1e3*e),this.LNt=this.NNt(this.LNt,t/1e3))}NNt(t,e){return t+(e-t)/this.PNt}hP(){const t={sta:this.bp,ts:this.INt,"theo-vt":this.BNt,"theo-at":this.ONt,"theo-d":this.ct,"theo-r":this.cf};return this.PNt>0?Bo({},t,{bl:Xe(this.DNt),tbl:Xe(this.MNt),ltc:Xe(this.JG),mtp:Xe(this.LNt),"theo-w":this.PNt}):t}FNt(){return new t(this.bp,this.ea,this.cf)}constructor(t,e,i,s){var n,r,o,h;this.INt=Date.now(),this.DNt=0,this.MNt=0,this.JG=0,this.LNt=0,this.PNt=0,this.bp=t,this.ea=e,this.BNt=null==(r=eY(this.ea.rt))||null==(n=r.EC)?void 0:n.o,this.ONt=null==(h=eY(this.ea.ht))||null==(o=h.EC)?void 0:o.o,this.cf=i,this.zG=s}},nY=class{VNt(){var t;const e=this.ea.pI.qB,i=tY(this.ea),s=this.ea.HX.aj.wG;return rY({bl:i?Xe(i):void 0,tbl:Xe(1e3*this.ea.pI.bd.targetOffset),ltc:e?Xe(e):void 0,mtp:s?Xe(s/1e3):void 0,sta:null==(t=this.WNt)?void 0:t.bp,su:!this.YDt||void 0,"theo-sq":this.UNt.sequenceNumber})}GNt(t){var e,i;const s=function(t,e){switch(e){case pn.VIDEO:return eY(t.rt);case pn.AUDIO:return eY(t.ht)}}(this.ea,t);return rY({br:(null==s||null==(e=s.EC)?void 0:e.wG)?Xe((null==s||null==(i=s.EC)?void 0:i.wG)/1e3):void 0,ot:t,tb:s?Xe(sY(s).wG/1e3):void 0,lb:s?Xe(iY(s).wG/1e3):void 0})}HNt(){return rY({"theo-cw":this.ea.we.clientWidth,"theo-ch":this.ea.we.clientHeight})}ZNt(){var t;return rY({sf:"e",sid:this.UNt.id,st:"l",v:2,"theo-eid":null==(t=this.UNt.externalId)?void 0:t.substring(0,128),"theo-cn":this.XNt.name.substring(0,128),"theo-v":"9.2.0","theo-t":"web","theo-u":this.UNt.userId})}zNt(){const t={"CMCD-States":btoa(JSON.stringify(this.qNt))};return this.qNt=[],t}YNt(t){this.WNt&&this.qNt.push(this.WNt.hP()),this.WNt=t}destroy(){this.KNt(),s.removeEventListener("beforeunload",this.KNt),this.ea.fn(tl.VL,this.HB),this.ea.fn(tl.FL,this.GB),this.ea.fn(Ti.Zy,this.jNt),this.ea.MR.fn("latencyrecoveryseek",this.QNt),this.ea.MR.fn("golive",this.JNt),this.ea.rt.fn(Se.OI,this.VG),this.ea.ht.fn(Se.OI,this.VG),this.ea.rt.uC.forEach((t=>t.fn(No.rC,this.Kr))),this.ea.ht.uC.forEach((t=>t.fn(No.rC,this.Kr))),this.ea.Ist.removeEventListener("intenttofallback",this.$Nt),this.ea.Ist.removeEventListener("publicationloadstart",this.tMt),this.ea.Ist.removeEventListener("publicationoffline",this.eMt),this.ea.HX.ej(this.iMt),Ms.Up(this.sMt)}constructor(t,e,i){this.qNt=[],this.YDt=!1,this.WX=!1,this.$Nt=()=>{var t;this.YNt(ys.starting(this.ea,"fallback",null==(t=this.ea.NR())?void 0:t.message))},this.tMt=()=>{this.YNt(ys.starting(this.ea,"loadChannel"))},this.eMt=()=>{this.YNt(ys.ended(this.ea))},this.VG=t=>{t.Ht.yn(No.rC,this.Kr)},this.Kr=()=>{var t,e,i,s;const n=null==(e=eY(this.ea.rt))||null==(t=e.EC)?void 0:t.o,r=null==(s=eY(this.ea.ht))||null==(i=s.EC)?void 0:i.o;n&&r&&(this.WNt&&this.WNt.bp===Sr.PLAYING&&this.WNt.BNt===n&&this.WNt.ONt===r||this.YNt(ys.playing(this.ea)))},this.HB=()=>{this.YDt=!0,this.WX=!1,this.YNt(ys.playing(this.ea))},this.QNt=()=>{this.YDt&&!this.WX&&(this.WX=!0,this.YNt(ys.seeking(this.ea,"latencyRecovery")))},this.JNt=()=>{this.YDt&&!this.WX&&(this.WX=!0,this.YNt(ys.seeking(this.ea,"goLive")))},this.GB=()=>{this.ea.hI||this.YNt(ys.rebuffering(this.ea,"visible"===h.visibilityState?void 0:"invisible"))},this.jNt=()=>{this.YNt(ys.paused(this.ea))},this.iMt=t=>{const e=Ms.Nh(t.url),i=function(t){const{pathname:e}=t;if(Tm(e,"manifest.json"))return pn.MANIFEST;if(Oh(e,"/video/"))return pn.VIDEO;if(Oh(e,"/audio/"))return pn.AUDIO;return pn.OTHER}(e);if("o"===i)return;this.UNt.incrementSequenceNumber();let s=Bo({},t.headers,{"CMCD-Request":this.VNt(),"CMCD-Object":this.GNt(i),"CMCD-Status":this.HNt(),"CMCD-Session":this.ZNt()});i===pn.VIDEO&&Tm(e.pathname,".hspc")&&this.WNt&&(this.YNt(this.WNt.FNt()),s=Bo({},s,this.zNt())),t.redirect(Bo({},t,{headers:s}))},this.KNt=()=>{this.WNt&&(this.qNt.push(this.WNt.hP()),this.WNt=void 0),this.qNt.push(ys.quit(this.ea).hP()),ah(this.ea.lR.Kk({Gu:this.nMt,jk:this.zNt(),CE:!0}))},this.ea=t,this.XNt=e,this.UNt=i,this.nMt=Ms.Nh("bye",e.source.src).href,s.addEventListener("beforeunload",this.KNt),this.ea.yn(tl.VL,this.HB),this.ea.yn(tl.FL,this.GB),this.ea.yn(Ti.Zy,this.jNt),this.ea.MR.yn("latencyrecoveryseek",this.QNt),this.ea.MR.yn("golive",this.JNt),this.ea.HX.JK(this.iMt),this.ea.rt.yn(Se.OI,this.VG),this.ea.ht.yn(Se.OI,this.VG),this.ea.Ist.addEventListener("intenttofallback",this.$Nt),this.ea.Ist.addEventListener("publicationloadstart",this.tMt),this.ea.Ist.addEventListener("publicationoffline",this.eMt),this.WNt=ys.starting(this.ea,"loadchannel"),this.sMt=Ms.Wp((()=>{var t;null==(t=this.WNt)||t.CNt()}),1e3)}};function rY(t){return w.keys(t).map((e=>function(t,e){switch(typeof e){case"boolean":return e?t:t+"=false";case"number":return t+"="+e;case"string":return t+'="'+e+'"';default:return}}(e,t[e]))).filter(Boolean).sort().join(",")}r();var oY=class extends pe{constructor(t){super("publicationloadstart"),this.publicationId=t}},hY=class extends pe{constructor(t){super("publicationoffline"),this.publicationId=t}},aY=class extends pe{constructor(t,e){super("publicationloaded"),this.publicationId=t,this.channelName=e}},uY=class extends pe{constructor(){super("intenttofallback")}},cY=class extends pe{constructor(){super("enterbadnetworkmode")}},lY=class extends pe{constructor(){super("exitbadnetworkmode")}},dY=class extends Co{get ka(){return this.su||(this.su=function(t){return{addEventListener(e,i){t.yn(e,i)},removeEventListener(e,i){t.fn(e,i)},get badNetworkMode(){return t.rMt},set badNetworkMode(e){t.rMt=e},preloadPublications:async e=>(await t.oMt(e)).map((t=>({name:t.name})))}}(this)),this.su}get rMt(){return this.ea.rMt}set rMt(t){this.ea.rMt=t}oMt(t){return this.ea.oMt(t)}constructor(t){super(),this.ea=t}};var fY=8e5,_Y=class extends ec{hMt(){this.ea.MR.yn("latencyrecoveryseek",this.QNt),this.ea.rt.yn(Se.OI,this.VG)}aMt(){this.ea.MR.fn("latencyrecoveryseek",this.QNt),this.ea.rt.fn(Se.OI,this.VG)}MI(t){return this.CDt?t.type===tl.VL?(void 0!==this.uMt?(Ms.Wg(this.uMt),this.uMt=void 0,this.YDt||this.wo(new Wi(this.kR()))):this.wo(new Wi(this.kR())),this.YDt=!0,!0):t.type===tl.FL?(this.uMt||(this.uMt=Ms.Ug((()=>{this.wo(new tu(this.kR())),this.uMt=void 0}),100)),!0):"error"===t.type?(ah(this.cMt()),!0):super.MI(t):super.MI(t)}Cst(){return this.lMt.ka}get rMt(){return this.dMt}set rMt(t){this.CDt&&(t?this.fMt():this._Mt())}fMt(){if(this.dMt)return;if(this.dMt=!0,this.lMt.wo(new cY),0===this.ea.rt.V)return;const t=this.rt.lC(0),e=Km(t.IC.uC,(t=>t.wG));var i;(null!=(i=e.xyt)?i:e.wG)<fY?(t.DC=[e],Promise.resolve().then((()=>t.DC=t.IC.uC.slice()))):this._Mt()}_Mt(){if(!this.dMt)return;if(this.dMt=!1,this.lMt.wo(new lY),0===this.ea.rt.V)return;const t=this.ea.rt.lC(0);var e;const i=vY(null!=(e=t.DC)?e:t.IC.uC);t.DC=i.length>0?i:vY(t.IC.uC)}oMt(t){return Promise.all(t.map((async t=>{const e=this.vMt.mgt($q(t,this.mMt.discoveryUrl,this.mMt.devDiscoveryUrl));return await ou(e.Gtt,this.WT.Vw)})))}addSseEndpointToSource(t){var e;if(t&&(null==(e=this.Cc)?void 0:e.ads))for(const e of this.Cc.ads){var i;if("theoads"===e.integration)null!=(i=e).sseEndpoint||(i.sseEndpoint=t)}}async xa(t,e){var i;this.CDt=!1;for(const s of null!=(i=null==t?void 0:t.sources)?i:[]){if(qT(s)&&s.type===nl.JC){if(void 0===s.src)continue;this.hMt(),this.CDt=!0,this.lMt.wo(new oY(s.src));const i=$q(s.src,this.mMt.discoveryUrl,this.mMt.devDiscoveryUrl),n=this.lMt.vy("publicationloaded");try{this.Cc=t,this.JH=s,this.gMt=this.vMt.mgt(i);const n=await this.gMt.Gtt;this.addSseEndpointToSource(n.sseEndpoint);const{enhancedLogging:r}=n;(null==r?void 0:r.enabled)&&_.random()<=r.percentage&&this.ea.HX.JK(this.pMt),this.mMt.analyticsEnabled&&"theo.live"===n.source.type&&(this.wMt=new nY(this,n,this.UNt)),await ou(this.yMt(this.ea.bO),e)}catch(t){throw this.l9(),this.dispatchErrorEvent(t),t}return void await ou(n,e).catch(th)}if("web"===Xt.Cv&&(null==t?void 0:t.contentProtection)&&(!qT(s)||s.type!==nl.jC)){const t=new A(Qa.CONFIGURATION_ERROR,"Content protection is not supported for this source type");throw this.dispatchErrorEvent(t),t}}return await super.xa(t,e)}async yMt(t){if(this.l9(),!this.gMt)return;const{source:e}=await this.gMt.Gtt,i=await this.bMt(e);if("live"===i)if("primary"===this.AMt)try{await this.SMt(t)}catch(e){await this.TMt(t)}else await this.TMt(t);else if("offline"===i)await this.eMt();else try{await this.SMt(t)}catch(t){await this.eMt()}}async bMt(t){try{const e=await this.ea.lR.Kk({Gu:t.src});return e.zk>=200&&e.zk<300?"live":404===e.zk||503===e.zk?"offline":"error"}catch(t){return"error"}}async TMt(t){if(!this.gMt)return;const e=await this.gMt.Gtt;this.AMt="primary",this.AJ(e.source,e.name,t)}async eMt(){if(!this.gMt)return;const t=await this.gMt.Gtt;this.lMt.wo(new hY(t.id.id)),this.kMt=Ms.Ug((()=>this.yMt(this.ea.bO)),15e3)}AJ(t,e,i){var s,n,r;const o=this.gMt.ZS.id;var h;const a=NC({sources:[{type:mY(t.type),src:t.src,contentProtection:t.contentProtection,useManagedMediaSource:!0,latencyConfiguration:null!=(h=null==(s=this.JH)?void 0:s.latencyConfiguration)?h:gY(t.targetLatency)},t.hlsSrc?{type:"application/x-mpegurl",src:t.hlsSrc}:void 0].filter(ji),ads:this.YDt?[]:null==(n=this.Cc)?void 0:n.ads,blockContentIfAdError:null==(r=this.Cc)?void 0:r.blockContentIfAdError,streamType:"live"});a.sources[0].bypassLicense=!0,this.ea.xa(a,(new da).Vw).then((()=>{this.lMt.wo(new aY(o,e)),i&&this.ea.kI()})).catch(this.dispatchErrorEvent)}async SMt(t){if(this.lMt.wo(new uY),!await this.EMt())throw new g("fallback not live");await this.xMt(t)}async xMt(t){var e;const i=await(null==(e=this.gMt)?void 0:e.Gtt);(null==i?void 0:i.fallback)&&(this.AMt="fallback",this.AJ(i.fallback,i.name,t))}async EMt(){var t,e;const i=await(null==(t=this.gMt)?void 0:t.Gtt);if(!(null==(e=this.mMt)?void 0:e.fallbackEnabled)||!(null==i?void 0:i.fallback))return!1;const s=await this.ea.lR.Kk({Gu:i.fallback.src});return s.zk>=200&&s.zk<300}dispatchErrorEvent(t){if(t instanceof A)return this.wo(new Ga(t));this.wo(new Ga(new A(Qa.THEO_LIVE_UNKNOWN_ERROR,t.message,t)))}async l9(){await this.ea.EI(),void 0!==this.kMt&&(Ms.Wg(this.kMt),this.kMt=void 0)}EI(){var t;return this.WT.Yw(),this.WT=new da,this.aMt(),void 0!==this.uMt&&(Ms.Wg(this.uMt),this.uMt=void 0),this.CDt=!1,this.YDt=!1,null==(t=this.wMt)||t.destroy(),this.wMt=void 0,this.Cc=void 0,this.JH=void 0,this.gMt=void 0,this.AMt=void 0,this.RMt=[],this.ea.HX.ej(this.pMt),this.dMt&&this._Mt(),super.EI()}async gn(t){var e;this.WT.Yw(),void 0!==this.uMt&&(Ms.Wg(this.uMt),this.uMt=void 0),this.$o(),this.aMt(),null==(e=this.wMt)||e.destroy(),this.ea.MR.fn("latencyrecoveryseek",this.QNt),await super.gn(t)}constructor(t,e){var i,s;super(t,e),this.CDt=!1,this.WT=new da,this.uMt=void 0,this.YDt=!1,this.RMt=[],this.dMt=!1,this.VG=t=>{const e=t.Ht;var i;e.yn(No.rC,this.Kr);const s=vY(null!=(i=e.DC)?i:e.IC.uC);e.DC=s.length>0?s:vY(e.IC.uC)},this.Kr=t=>{const e=t.aat;var i;(!e||(null!=(i=e.xyt)?i:e.wG)>=fY)&&this._Mt()},this.QNt=async()=>{this.fMt(),this.RMt.push(Ms.Vg()),this.RMt=this.RMt.filter((t=>Ms.Vg()-t<=3e5)),this.RMt.length>=3&&(this.RMt=[],await this.yMt(!0))},this.cMt=async()=>{if(this.gMt){if("demo"===(await this.gMt.Gtt).mode){this.gMt.tr();if("playing"!==(await this.gMt.Gtt).status)return void this.wo(new Ga(new A(Qa.THEO_LIVE_END_OF_DEMO,"This demo channel has been stopped automatically after 5 minutes")))}await this.yMt(!0)}},this.pMt=t=>{if("manifest"===t.type||"segment"===t.type||""===t.type){const e=Ms.Nh(t.url);e.searchParams.append("enhancedLogging","true"),t.redirect({url:e.toString()})}},this.lMt=new dY(this);const n=t.bd.theoLive;var r,o,h;this.mMt={sessionId:null!=(r=null==n?void 0:n.sessionId)?r:lP(),userId:null!=(o=null==n?void 0:n.userId)?o:Zq(),externalSessionId:null==n?void 0:n.externalSessionId,analyticsEnabled:!1!==(null==n?void 0:n.analyticsEnabled),fallbackEnabled:!1!==(null==n?void 0:n.fallbackEnabled),discoveryUrl:null!=(h=null==n?void 0:n.discoveryUrl)?h:"https://discovery.theo.live/channels/",devDiscoveryUrl:undefined},this.UNt=new Hq(null==(i=this.mMt)?void 0:i.externalSessionId),this.vMt=new Xq(t.lR,{discoveryHeader:null==(s=this.mMt)?void 0:s.discoveryHeader}),this.ea.MR.yn("latencyrecoveryseek",this.QNt)}};function vY(t){return t.filter((t=>{var e;return(null!=(e=t.xyt)?e:t.wG)>=fY}))}function mY(t){switch(t){case"theo.live":return"application/vnd.theo.hesp+json";case"hls":return"application/x-mpegurl";case"dash":return"application/dash+xml";default:throw new g("Unknown source type: "+t)}}function gY(t){return void 0===t?Dz():{minimumOffset:t-TT,targetOffset:t,maximumOffset:t+TT,forceSeekOffset:t+2.5,minimumPlaybackRate:At,maximumPlaybackRate:mt}}fF((t=>new _Y(t)),io.ou),r(),r(),r();var pY=Xl(Kl());r(),r(),r();var wY=class extends Co{get kN(){return this.IMt}tr(t,e){this.YA=t,this.IMt=e,this.su&&this.wo(new mH(this.su))}get ka(){var t;return null!=(t=this.su)?t:this.su=this.ba()}get o(){return this.YA.id}get xC(){return this.xO}get wG(){return this.YA.bitrate}get xyt(){}get Zrt(){return""}get xh(){return""}get Pyt(){return""}get znt(){return!0}get Ryt(){}rW(){throw new g("Method not implemented.")}oW(){throw new g("Method not implemented.")}gn(){this.$o()}constructor(t,e){super(),this.xO=bk(),this.su=void 0,this.YA=t,this.IMt=e}},yY=class extends wY{ba(){return xl(this)}get Jdt(){return 0}get ji(){return this.YA.targetWidth}get Ti(){return this.YA.targetHeight}get Iyt(){return 0}constructor(t,e){super(t,e)}};r();var bY=class extends Co{get Rt(){return!0}set Rt(t){}get ka(){var t;return null!=(t=this.su)?t:this.su=yi(this)}CO(t){this.Rt=t}get Idt(){}get Lt(){return this.j4}get o(){return this.ZS||"millitrack"}get xC(){return this.xO}get xh(){return""}get gs(){return""}get xE(){return this.Rt?"enabled":"disabled"}set xE(t){this.CO("enabled"===t)}get EC(){}get IC(){return this.AO}get DC(){return this.CMt}set DC(t){if(this.CMt=t,this.Rt){const e=1===(null==t?void 0:t.length)?t[0].kN:void 0;this.PMt(e)}this.wo(new GW(this.AO.uC.slice(),this)),((null==t?void 0:t.length)||this.AO.V)&&this.wo(new fG((null==t?void 0:t[0])||this.AO.lC(0)))}get RC(){}gn(){this.$o();for(const t of this.AO.uC)t.gn();this.AO.er()}constructor(t,e){super(),this.xO=oi(),this.AO=new Vc,this.ZS=t,this.j4=e}},AY=class extends bY{tr(t){for(const e of t.active){const i=Fo(t.layers,(t=>t.encodingId===e.id)),s=Fo(this.AO.uC,(t=>t.o===e.id));s?s.tr(e,i):this.AO.SO(new yY(e,i))}this.wo(new Zs(this))}get Aw(){return ee._E}PMt(t){var e;null==(e=this.DMt)||e.NMt(t)}gn(){this.DMt=void 0,super.gn()}constructor(t,e,i){super(t,e),this.DMt=i}};r();var SY=class{tr(t){this.MMt=t}get wG(){var t,e,i,s,n;var r;return(null!=(n=null==(e=this.MMt)||null==(t=e.video.inbounds)?void 0:t.reduce(((t,e)=>t+e.bitrateBitsPerSecond),0))?n:0)+(null!=(r=null==(s=this.MMt)||null==(i=s.audio.inbounds)?void 0:i.reduce(((t,e)=>t+e.bitrateBitsPerSecond),0))?r:0)}get yG(){var t,e;return null!=(e=null==(t=this.MMt)?void 0:t.currentRoundTripTime)?e:0}bG(t){}};r(),r();var TY=class extends wY{ba(){return Cl(this)}get Ewt(){return this.LMt}constructor(t,e){super(t,e),this.LMt=0}},kY=class extends bY{tr(t){for(const e of t.active){const i=Fo(t.layers,(t=>t.encodingId===e.id)),s=Fo(this.AO.uC,(t=>t.o===e.id));s?s.tr(e,i):this.AO.SO(new TY(e,i))}this.wo(new Zs(this))}get Aw(){return ee.fE}PMt(t){var e;null==(e=this.DMt)||e.BMt(t)}gn(){this.DMt=void 0,super.gn()}constructor(t,e,i){super(t,e),this.DMt=i}};r();var EY=class extends Le{ba(){return function(t){return nh(Lt(t),{get mid(){return t.XV.mid},get uuid(){return t.XV.uuid},get timecode(){return t.XV.timecode},get unregistered(){return t.XV.unregistered}})}(this)}constructor(t,e){super(t,t,void 0,!1),this.XV=e}};r();var xY=[Ti.ro,Ti.Zy,tl.VL,Ti.sb,Ti.Xy,Ti.Vy,Ti.jy,Ti.Ky,Ti.Cy,Ti.zy,Ti.ob,Ti.xy,Ti.Yy,Ti.Sy,Ti.Ay,Ti.Ny,Ti.Py],RY=["active","inactive","stopped","vad","layers","migrate","viewercount"],IY=class extends Co{NMt(t){var e;null==(e=this.Df)||e.select(t).catch(this.Ypt)}BMt(t){var e;null==(e=this.Df)||e.select(t).catch(this.Ypt)}get yI(){return!1}AI(){return this.FB.AI()}get ht(){return this.aO}get gR(){return this.FB.gR.ks()}get wR(){return this.FB.wR}set wR(t){}get bt(){return this.Cc}get SR(){return this.FB.SR}set SR(t){this.ER(t)}ER(t,e){}get ct(){return this.FB.ct}get RR(){return this.FB.RR}get lt(){return this.zG}get DR(){return this.qG}get MR(){}get OR(){return this.FB.OR}get WR(){var t,e;const i=this.OMt,s=null==i||null==(t=i.video.inbounds)?void 0:t[0],n=null==i||null==(e=i.audio.inbounds)?void 0:e[0];var r,o,h,a;return{vO:this.vZ.aj.wG,dO:null!=(r=null==s?void 0:s.framesDropped)?r:0,fO:0,_O:null!=(o=null==s?void 0:s.framesReceived)?o:0,mO:(null!=(h=null==s?void 0:s.totalBytesReceived)?h:0)+(null!=(a=null==n?void 0:n.totalBytesReceived)?a:0),gO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get GR(){return this.FB.GR}set GR(t){this.FB.GR=t}get XR(){var t,e;return null!=(e=null==(t=this.Df)?void 0:t.isActive())&&e}get qR(){return this.FB.qR}get KR(){return 1}set KR(t){}get JR(){return this.FB.JR.ks()}get tI(){return hl.QH}set tI(t){}get sI(){return this.FB.sI}get rI(){return this.FB.rI.ks()}get hI(){return this.FB.hI}get QG(){return this.FB.QG}get nt(){return this.FB.nt}get cI(){return this.FB.cI}get rt(){return this.cO}get fI(){return this.FB.fI}get vI(){return this.FB.vI}set vI(t){this.FB.vI=t}get pI(){return this.mZ}get $G(){return this.tH}get qB(){return this.mZ.qB}ge(){this.FB.ge()}be(){this.FB.be()}async kI(){this.Dn(),await this.FB.kI()}TI(){this.FB.TI()}async er(){var t;this.Cc=void 0,this.WT.Yw(),null==(t=this.Df)||t.stop(),this.Df=void 0,this.cpt&&(await this.cpt.catch(It),this.cpt=void 0),this.FMt=void 0,await this.FB.er(),this.VMt=void 0,this.WMt=0,this.FB.fH();for(const t of this.cO.uC)t.gn();this.aO.er(),this.cO.er()}async gn(){this.$o(),await this.er(),this.aO.gn(),this.cO.gn(),this._H.gn(),this.FB.fn(xY,this.Ds),this.FB.fn(yo.da,this.Ss),await this._Z.pH(this.FB)}async xa(t,e,i){J(i),this.WEt();const s=t;this.Cc=s,this.WT=new da,s.apiUrl&&pY.Director.setEndpoint(s.apiUrl);this.Df=new pY.View(void 0,(()=>pY.Director.getSubscriber({streamName:s.src,streamAccountId:s.streamAccountId,subscriberToken:s.subscriberToken})),void 0,!0),this.UMt=Bo({},s.connectOptions,{events:RY}),this.GMt()}Dn(){if(void 0!==this.cpt)return;const t=this.Df;void 0!==t&&(this.cpt=this.KE(t,this.UMt,this.WT.Vw).catch(this.Ypt))}async KE(t,e,i){J(i);try{await ou(t.connect(e),i),t.webRTCPeer.initStats({autoInitStats:!0,statsIntervalMs:1e3})}catch(e){th(e),function(t){return V(t)&&"FetchError"===t.name}(e)&&400===e.status&&(Ms.Op("[THEOplayer] Millicast connect error, reconnecting.",e),await ou(t.reconnect(),i)),this.MH(new A(Qa.NETWORK_ERROR,e.message,e))}}async HMt(t,e){J(e);try{this.FB.u7(),this.FMt=t,await this.FB.er(),await this.FB.Dn({Aw:Mr.mW,OC:"",IJ:t,Dk:nl.QC,eH:[]})}finally{this.FB.l7()}}GMt(){var t;const e=this.Df;e.on("track",(t=>this.ZMt(t))),e.on("broadcastEvent",(t=>this.XMt(t))),e.webRTCPeer.on("stats",(t=>{this.OMt=t,this.tH.tr(t)})),(null==(t=this.UMt)?void 0:t.metadata)&&e.on("metadata",(t=>this.zMt(t)))}ZMt(t){const e=this.aO.V>0,i=this.cO.V>0,s=e&&!i;if(i&&t.track.kind===ee._E||s&&t.track.kind===ee.fE){const e=t.streams[0];if(s){const t=e.getVideoTracks().slice();for(const i of t)e.removeTrack(i)}this.HMt(e,this.WT.Vw).catch(this.Ypt)}}XMt(t){switch(t.name){case"active":{this.wo(new lt);const e=t.data;for(const t of e.tracks)t.media===ee._E?this.cO.tt(new AY(t.trackId,this.cO.V?vq.EPt:vq.xPt,this)):t.media===ee.fE&&this.aO.tt(new kY(t.trackId,this.aO.V?jr.EPt:jr.xPt,this));break}case"inactive":this.wo(new fn),this.cO.er(),this.aO.er();break;case"stopped":this.wo(new fn);break;case"viewercount":default:break;case"layers":{const e=t.data;if(0===this.cO.V){const t=new AY("",vq.xPt,this);t.tr(e.medias[0]),this.cO.tt(t)}else{const t=Fo(this.cO.uC,(t=>t.Lt===vq.xPt));null==t||t.tr(e.medias[0])}break}}}zMt(t){let e=this.VMt;void 0===e&&(e=this.FB.LI(hs.$V,void 0,void 0,void 0,void 0,Lr.MILLICAST),e.xE=bh.NC,this.VMt=e);const i=this.SR,s=_.max(0,i-10);this.WMt<s&&(oo(e,s),this.WMt=s);const n=new EY(i+.001,t);e.dW(n)}MH(t){this.zG||(ah(this.er()),this.zG=Xs(t),this.qG=t,this.wo(new Ga(t)))}WEt(){this.zG=void 0,this.qG=void 0}xI(){return!1}RI(){}II(){}CI(){this.FB.CI()}DI(){const t=this.FMt;void 0!==t&&this.HMt(t,this.WT.Vw).catch(this.Ypt)}bI(){return this.FB.Ca}Sa(){return this.FB.lH}LI(t){return this.FB.dH(t)}constructor(t,e,i){super(),this._Z=t,this.vZ=e,this.mZ=i,this.WT=new da,this.cpt=void 0,this.FMt=void 0,this.cO=new Nn,this.aO=new Nn,this.WMt=0,this.tH=new SY,this.Ss=t=>{this.MH(vk(t.lt))},this.Ypt=t=>{Je(t)||this.MH(new A(Qa.MEDIA_DECODE_ERROR,t.message,t))},this.FB=this._Z.LH(ee._E),this._H=new q(this.FB,!0),this.FB.yn(xY,this.Ds),this.FB.yn(yo.da,this.Ss),this._H.yn(ro,this.Ds)}};O(new class{get VH(){return Zt.QC}hP(t,e,i,s,n,r,o,h){return new IY(e,n,r)}BH(t,e){return t.type===nl.QC}async OH(t){let e=await lT(t);return e&&(e=Boolean(t.widevine||t.fairplay)),e&&!1}FH(){return!1}}),r(),r(),r(),r();var qt=function(t){return t.qMt="currentbufferingrenditionchange",t.YMt="KMt",t.jMt="QMt",t.JMt="$Mt",t}({});r(),r();var CY=class{constructor(t,e){var i,s;this.Zrt=void 0,this.xC=bk(),this.tLt=e,this.Aw=t.Aw,this.eLt=t.eLt,this.iLt=t.iLt,this.sLt=t.sLt,this.l=t.l,this.gs=t.gs,this.nLt=t.nLt,this.rLt=t.rLt,this.oLt=void 0===t.Pyt,this.hLt=null!=(s=null==(i=t.hLt)?void 0:i.split(","))?s:[]}};function st(t,e){return t.Aw===e.Aw&&(t.l===e.l||!(!t.eLt||!e.eLt))}function PY(t,e){return void 0!==t&&void 0!==e&&DY(t,e)}function DY(t,e){return t.tLt===e.tLt}function NY(t,e){return DY(t,e)&&t.nLt===e.nLt}function MY(t,e){for(const i of t)if(NY(i,e))return!0;return!1}var LY=class extends Co{get RC(){return this.aLt}get Rt(){const t=this.uLt();if(!t)return!1;for(const e of this.IC.uC)if(e.cLt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var e;let t=null==(e=this.IC.lC(0))?void 0:e.cLt;const i=this.ea.lLt;for(const e of this.IC.uC)if(e.dLt===i){t=e.cLt;break}this.fLt(t)}else this.fLt(void 0)}get EC(){if(!this.Rt)return;const t=this.ea._Lt;for(const e of this.IC.uC)if(MY(t,e.cLt))return e}get ka(){return this.su||(this.su=yi(this)),this.su}get o(){return this.xO.toString()}get xC(){return this.xO}get xh(){return this.RO}set xh(t){t!==this.RO&&(this.RO=t,this.wo(new Zs(this)))}get gs(){return this.NA}get xE(){return this.Rt?"enabled":"disabled"}get DC(){return this.Hct}set DC(t){let e=[];if(t){e=t.filter((t=>{const e=this.EC?qW(this.EC):void 0;return Ms.Ys.lp(e,qW(t))})).filter((e=>this.IC.TO(t)&&e.znt))}else e=this.IC.uC.filter((t=>t.znt));if(0!==e.length){if(!(t===this.Hct||this.Hct&&qm(this.Hct,e))){if(this.Hct=t?e:void 0,this.ea.vLt(e.map((t=>t.dLt))),1===e.length){const t=e[0].dLt,i=this.bp===ee._E,s=this.vZ.Bj;ah(this.ea.mLt(t,{gLt:!0,pLt:s&&i,wLt:s&&!i}))}this.wo(new GW(e,this))}}else this.wo(new zW)}CO(t){this.Rt=t}gn(){this.$o(),this.ea.fn(qt.qMt,this.yLt),this.ea.fn(qt.YMt,this.bLt);for(const t of this.IC.uC)t.gn();this.IC.er()}constructor(t,e,i,s,n){var r;super(),this.bp=t,this.ea=e,this.vZ=i,this.gh=s,this.IC=n,this.Hct=void 0,this.ALt=void 0,this.SLt=()=>this.wo(new Zs(this)),this.yLt=()=>{const t=this.EC;t&&this.ALt!==t&&(this.ALt=t,this.wo(new fG(t)))},this.bLt=()=>{const t=this.Rt;this.TLt!==t&&(this.TLt=t,this.gh.wo(new Ec(this)),this.wo(new Ec(this)))},this.ALt=this.EC,this.TLt=this.Rt;const o=n.lC(0);var h,a;this.RO=null!=(h=null==o?void 0:o.cLt.l)?h:"",this.NA=null!=(a=null==o?void 0:o.cLt.gs)?a:"",this.aLt=null==o||null==(r=o.cLt)?void 0:r.hLt.map(UY).filter(ji),this.xO=oi(),this.ea.yn(qt.qMt,this.yLt),this.ea.yn(qt.YMt,this.bLt);for(let t=0;t<this.IC.V;t++){this.IC.lC(t).yn("update",this.SLt)}}},BY=class extends LY{get Lt(){return jr.xPt}uLt(){return this.ea.kLt}fLt(t){ah(this.ea.ELt(t))}constructor(t,e,i,s){super(ee.fE,t,e,i,s)}},OY=class extends LY{get Lt(){return vq.xPt}uLt(){return this.ea.xLt}fLt(t){ah(this.ea.RLt(t))}constructor(t,e,i,s){super(ee._E,t,e,i,s)}},FY=class extends Co{get o(){return String(this.dLt.o)}get xC(){return this.dLt.o}get wG(){return this.dLt.wG}get xyt(){return this.dLt.xyt}get xh(){var t;return null!=(t=this.RO)?t:this.cLt.l}set xh(t){this.xh!==t&&(this.RO=t,this.wo(new mH(this.ka)))}get Pyt(){return this.cLt.tLt.ILt()}get Ryt(){return this.dLt.Ryt}oW(){}rW(){}gn(){this.$o()}constructor(t,e){super(),this.dLt=t,this.cLt=e,this.RO="",this.znt=!0}},VY=class extends FY{get Ewt(){return 0}get Zrt(){var t;return(null==(t=this.dLt.Zrt)?void 0:t.sPt)||""}get ka(){return this.su||(this.su=this.ba()),this.su}ba(){return Cl(this)}constructor(t,e){super(t,e),this.su=void 0}},WY=class extends FY{get Zrt(){var t;return(null==(t=this.dLt.Zrt)?void 0:t.rPt)||""}get Iyt(){return this.CLt}set Iyt(t){this.CLt!==t&&(this.CLt=t,this.wo(new mH(this.ka)))}get Jdt(){var t,e;return null!=(e=null!=(t=this.XCt)?t:this.dLt.Jdt)?e:0}set Jdt(t){this.Jdt!==t&&(this.XCt=t,this.wo(new mH(this.ka)))}get Ti(){var t,e;return null!=(e=null==(t=this.dLt.zCt)?void 0:t.Ti)?e:0}get ji(){var t,e;return null!=(e=null==(t=this.dLt.zCt)?void 0:t.ji)?e:0}get ka(){return this.su||(this.su=this.ba()),this.su}ba(){return xl(this)}constructor(t,e){super(t,e),this.su=void 0,this.CLt=0,this.XCt=void 0}};function UY(t){return"public.accessibility.describes-video"===t?ln.kC:"public.accessibility.transcribes-spoken-dialog"===t?ln.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?ln.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?ln.TC:void 0}r(),r();var _t=new class{PLt(t){if(!this.Rt())return!1;const e=[];return!(e.length>0)||e.some((e=>e.toLowerCase()===t.toLowerCase()))}DLt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.PLt(t)&&Ms.Bp("DEBUG "+t+" -",...i)}DN(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.PLt(t)&&Ms.Bp("INFO "+t+" -",...i)}NLt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.PLt(t)&&Ms.Op("WARNING "+t+" -",...i)}lt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.PLt(t)&&Ms.Fp("ERROR "+t+" -",...i)}MLt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.PLt(t)&&Ms.Fp("FATAL "+t+" -",...i)}constructor(){this.Rt=()=>!1}},Mc="HLSPlaylistParser",GY="Discontinuity",Ru="Buffering",HY=class{rft(){var t;const e=null==(t=this.ea.Pr)?void 0:t.LLt;if(!e||0===e.length)return void _t.NLt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var i;const s=null!=(i=Fo(e,(t=>0!==t.BLt.length&&0!==t.OLt.length)))?i:e[0],n=e.filter((t=>t!==s));for(const t of s.BLt){const e=new Vc,i=[];e.SO(new VY(s,t)),i.push(t);for(const s of n)for(const n of s.BLt)if(st(n,t)&&!MY(i,n)){e.SO(new VY(s,n)),i.push(n);break}this.FLt.tt(new BY(this.ea,this.vZ,this.FLt,e))}for(const t of s.OLt){const e=new Vc,i=[];e.SO(new WY(s,t)),i.push(t);for(const s of n)for(const n of s.OLt)if(st(n,t)&&!MY(i,n)){e.SO(new WY(s,n)),i.push(n);break}this.VLt.tt(new OY(this.ea,this.vZ,this.VLt,e))}}WLt(){this.ULt(this.FLt),this.ULt(this.VLt)}ULt(t){const e=[];for(const i of t.uC){const t=[];for(const e of i.IC.uC)ms(e.dLt.GLt,e.cLt)||t.push(e);for(const e of t)i.IC.$S(e),e.gn();0===i.IC.V&&e.push(i)}for(const i of e)t.it(i),i.gn()}HLt(t,e){const i=this.ZLt(t);void 0!==i&&(i.Jdt=e)}XLt(t,e){const i=this.ZLt(t);void 0!==i&&(i.Iyt=e)}ZLt(t){for(const e of this.VLt.uC){const i=Fo(e.IC.uC,(e=>e.cLt===t));if(void 0!==i)return i}}constructor(t,e,i,s){this.ea=t,this.vZ=e,this.FLt=i,this.VLt=s}};r();var ZY=class{get wG(){return this.but.sit}get yG(){return this.bIt.sit}bG(t){if("segment"!==t.Aw&&"preload-hint"!==t.Aw)return;const e=[new mz(this.bIt)];return"stream"!==t.Yk||!function(t){return"segment"===t.Aw&&"initialization-segment"!==t.SE}(t)&&"preload-hint"!==t.Aw?e.push(new gz(this.but)):e.push(new pz(this.but,1e3)),new vz(e)}vIt(t){this.but=new xt(xt.KRt,xt.jRt,1,t)}constructor(t){const e=t.wG>0?t.wG:xt.gut,i=t.yG>0?t.yG:Ze.gut;this.but=new xt(xt.KRt,xt.jRt,1,e),this.bIt=new Ze(Ze.KRt,Ze.jRt,i)}};r();var XY=class extends pe{constructor(t){super(qt.JMt),this.lt=t}};r();var zY=class{DJ(t,e){const i={Aw:Mr.gW,eH:[],u4:t.map((t=>({Dk:t}))),b4:e};return Promise.resolve(void 0!==this.Znt.DJ([i]))}constructor(t){this.Znt=t}};r(),r();var qY=(t,e,i,s,n)=>t.filter((t=>!!ms(s,t)||1.1*t.wG<=i.wG)),YY=(t,e,i,s,n)=>t.filter((t=>{if(ms(s,t))return!0;let r=1/0;for(const e of t.GLt){var o,h;r=_.min(r,null!=(h=null!=(o=e.tLt.zLt)?o:e.tLt.qLt)?h:1/0)}r===1/0&&(r=1);const a=2*i.yG+t.wG*r/i.wG;return t.wG<=e.wG||n.YLt>a})),KY=(t,e,i,s,n)=>Ii(t,((t,e)=>e.wG-t.wG)),jY=(t,e,i,s,n)=>t.every((t=>t.Ryt&&!S(t.Ryt)))?Ii(t,((t,e)=>e.Ryt-t.Ryt)):t,QY=(t,e,i,s,n)=>0===s.length?t:Ii(t,((t,e)=>{const i=ms(s,t)?1:0;return(ms(s,e)?1:0)-i})),JY=(t,e,i,s,n,r)=>t.filter((t=>!t.Zrt||!e.Zrt||!(void 0!==e.Zrt.rPt&&void 0!==t.Zrt.rPt&&!$n(e.Zrt.rPt,t.Zrt.rPt)&&!r.KLt({Dk:'video/mp4; codecs="'+t.Zrt.rPt+'"'}))&&!(void 0!==e.Zrt.sPt&&void 0!==t.Zrt.sPt&&!$n(e.Zrt.sPt,t.Zrt.sPt)&&!r.jLt({Dk:'audio/mp4; codecs="'+t.Zrt.sPt+'"'})))),$Y=(t,e,i,s,n)=>{if(!1===n.Tlt)return t;if(Ms.Ys.zg)return t;const r=Ms.Ys.qg;var o;const h=(null!=(o=null==r?void 0:r.width)?o:n.ji)*IW;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Ti)*IW;for(let e=0;e<t.length;e++){const i=t[e];if(void 0===i.zCt)return t;const s=i.zCt.Ti,n=i.zCt.ji;if(s<=u&&n<=h)return t.slice(e,t.length)}return[]},tK=(t,e,i,s,n)=>function(t,e){const i=e.Tlt;if(void 0===i&&!Ms.Ys.Qs)return t;if(!1===i)return t;for(let i=0;i<t.length;i++){const s=t[i];if(void 0===s.zCt)return t;const n=s.zCt.Ti,r=s.zCt.ji;if(n===e.Ti&&r===e.ji)return t.slice(i,t.length);if(n<e.Ti||r<e.ji)return t.slice(0===i?i:i-1,t.length)}return[]}(t,n);var eK="AbrEvaluator",iK=class{get QLt(){return this.vZ.aj}JLt(t){this.v_=t}async $Lt(t,e,i,s,n){return(await this.tBt(t,e,i,s,n))[0]}async tBt(t,e,i,s,n){if(0===t.length)throw new g("AbrEvaluator - Unable to select optimal variant stream from an empty list.");_t.DLt(eK,"Performing optimal variant stream selection.");const r=this.QLt;let o=t;for(const t of this.v_){const h=t(o,e,r,i,s,n);o=rl(h)?h:await h}if(0===o.length){_t.NLt(eK,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[Ws(t,(t=>t.wG))]}return o}constructor(t){this.vZ=t,this.v_=[JY,qY,YY,KY,$Y,tK,jY,QY]}};function sK(t,e){return[t,void 0!==e?t+e-1:Hu]}function nK(t){return Boolean(t.yN)}function ft(t){return Boolean(t.Ert)}r(),r(),r(),r(),r();var Yc=function(t){return t[t.fE=0]="fE",t[t._E=1]="_E",t[t.jV=2]="jV",t[t.eBt=3]="eBt",t}({}),rK=function(t){return t[t.iBt=0]="iBt",t[t.sBt=1]="sBt",t}({}),$t=function(t){return t[t.QH=0]="QH",t[t.nBt=1]="nBt",t[t.rBt=2]="rBt",t}({}),oK=function(t){return t[t.tE=0]="tE",t[t.oBt=1]="oBt",t[t.hBt=2]="hBt",t}({});function on(t){return t?t.hAt?t.Dx+"@"+t.hAt.Cn+"-"+(null!=(e=t.hAt.V)?e:""):""+t.Dx:"";var e}function hK(t,e){if(e===t)return!0;if(e.Dx!==t.Dx)return!1;if(!t.hAt)return!0;if(e.hAt){const i=sK(t.hAt.Cn,t.hAt.V),s=sK(e.hAt.Cn,e.hAt.V);if(i[0]<=s[0])return void 0===i[1]||void 0!==s[1]&&i[1]>=s[1]}return!1}function aK(t,e){return t===e||t.Dx===e.Dx&&(t.hAt&&e.hAt?t.hAt.Cn===e.hAt.Cn&&t.hAt.V===e.hAt.V:t.hAt===e.hAt)}function uK(t){const e=!!t.aBt||void 0;return{o:t.o,uBt:t.uBt,QG:t.QG,cBt:t.cBt,ct:t.ct,lBt:t.lBt,aBt:e,dBt:t.fBt,_Bt:t.vBt,mBt:t.mBt,gBt:t.gBt}}function cK(t,e){var i,s,n;return{sPt:null!=(i=e.sPt)?i:null==t?void 0:t.sPt,rPt:null!=(s=e.rPt)?s:null==t?void 0:t.rPt,pBt:null!=(n=e.pBt)?n:null==t?void 0:t.pBt}}async function lK(t,e,i,s,n){const r=e.filter((t=>Oh(t,"audio"))),o=e.filter((t=>Oh(t,"video"))),h=[],a=i.map((t=>async function(t,e,i){if(!t.Pyt)return;if(!t.wBt)return;if(t.yE!==$t.rBt)return;const s=dK(t.wBt);if(!s)return;if(s.xw===Ve)return{aT:s,EG:[],xG:void 0,FU:t.Pyt};if(s.xw===lm&&t.wBt===vm)return{aT:s,EG:[],xG:t.Pyt,FU:void 0};{_t.DN("HLSDrmUtils","Fetching key uri "+t.Pyt+".");const n=await e.Kk({Gu:t.Pyt,kE:i});return{aT:s,EG:[await n.Ck()],xG:void 0,FU:void 0}}}(t,s,n)));var u;const c=function(t,e){if(0===e.length)return t;const i=t=>{const i=e.indexOf(t.aT.xw);return i>=0?i:e.length};return Ii(t,((t,e)=>i(t)-i(e)))}((await Promise.all(a)).filter(ji),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const e of c){const i=cX(null!=t?t:{},e.aT),s="cbcs";h.push({aT:e.aT,EG:e.EG,xG:e.xG,FU:e.FU,EH:[{initDataTypes:[e.aT.Tw],audioCapabilities:lX(r,s,null==i?void 0:i.audioRobustness),videoCapabilities:lX(o,s,null==i?void 0:i.videoRobustness),persistentState:null==i?void 0:i.persistentState,distinctiveIdentifier:null==i?void 0:i.distinctiveIdentifier}]})}return h}function dK(t){return t===am?rn:t===Xa?mm:t===_m?pm:t===vm?wm:void 0}function fK(t){if("#"!==t[0])throw new g("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function _K(t){return"#"!==t[0]?t:t.split(":",1)[0]}function vK(t){const e=t.indexOf(":");if(-1===e||t.length<e+1)throw new g("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(e+1)}function mK(t){const e=fu(vK(t));if(void 0===e)throw new g("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return e}function gK(t){const e={},i=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=i.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?e[n]=r:_t.NLt(Mc,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=i.exec(t)}return e}function pK(t,e){const i=gK(t);let s,n;try{s=i.URI?Ms.Jp(i.URI,e):void 0,n=function(t){switch(t){case"AUDIO":return Yc.fE;case"VIDEO":return Yc._E;case"SUBTITLES":return Yc.jV;case"CLOSED-CAPTIONS":return Yc.eBt}throw new g("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(i.TYPE)}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=i["GROUP-ID"],o=i.LANGUAGE,h=i["ASSOC-LANGUAGE"],a=i.NAME,u="YES"===i.DEFAULT;let c="YES"===i.AUTOSELECT;const l="YES"===i.FORCED,d=i["INSTREAM-ID"],f=i.CHARACTERISTICS,_=i.CHANNELS;if(r||_t.NLt(Mc,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),o||_t.NLt(Mc,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||_t.NLt(Mc,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===Yc.eBt?(s&&_t.NLt(Mc,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),d?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(d)||_t.NLt(Mc,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):_t.NLt(Mc,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):d&&_t.NLt(Mc,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,i.AUTOSELECT&&_t.NLt(Mc,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),i.FORCED&&n!==Yc.jV&&_t.NLt(Mc,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{yBt:h,HCt:_,hLt:f,nLt:r,iLt:c,eLt:u,sLt:l,rLt:d,gs:o,l:a,Aw:n,Pyt:s}}function wK(t,e,i){const s=gK(t);let n,r,o;try{n=Ms.Jp(i,e),o=function(t){if(void 0===t)return;const e=t.split("x"),i=Number(e[0]),s=Number(e[1]);if(S(i)||S(s))throw new g("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{ji:i,Ti:s}}(s.RESOLUTION),r=function(t){if(!t)return;let e,i,s;const n=t.split(",");for(const t of n){const n=t.trim();Sl(n,"mp4a")?e="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?e=n:Sl(n,"avc")||Sl(n,"hvc1")||Sl(n,"hev1")||Sl(n,"dvh")||Sl(n,"vp09")||Sl(n,"av01")?i=n:s=s?s+","+n:n}return{sPt:e,rPt:i,pBt:s}}(s.CODECS)}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const h=fu(s.BANDWIDTH),a=fu(s["AVERAGE-BANDWIDTH"]),u=fu(s.SCORE),c=fu(s["FRAME-RATE"]),l=s["HDCP-LEVEL"],d=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");d.push(...t.map((t=>{const e=t.split(":");return{keysystem:e[0],label:e[1]}})))}const f=s["VIDEO-RANGE"],_=s.AUDIO,v=s.VIDEO,m=s.SUBTITLES,p=s["CLOSED-CAPTIONS"];if(void 0===h?_t.NLt(Mc,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>h&&_t.NLt(Mc,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||_t.DN(Mc,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.rPt&&void 0===o&&_t.DN(Mc,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||ms(["TYPE-0","TYPE-1","NONE"],l)||_t.NLt(Mc,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||ms(["SDR","PQ","HLG"],f)||_t.NLt(Mc,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===h)throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{bBt:d,ABt:_,xyt:a,wG:h,SBt:p,Zrt:r,Jdt:c,TBt:l,zCt:o,Ryt:u,kBt:m,Pyt:n,EBt:v,xBt:f}}function yK(t,e){const i=gK(t);if(!i.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return wK(t,e,i.URI)}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function fu(t){const e=Number(t);return S(e)?void 0:e}function bK(t,e){const i=gK(t);let s,n;try{s=function(t){switch(t){case"NONE":return $t.QH;case"AES-128":return $t.nBt;case"SAMPLE-AES":return $t.rBt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new g("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(i.METHOD),n=i.URI?IK(i.URI,e):void 0}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=i.KEYFORMAT,o=i.IV,h=i.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==$t.QH){if(c=r||vm,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(dK(c)!==rn)throw new g("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=$t.rBt}else a=s;u=n,l=o?ip(o):void 0,d=h?h.split("/").map((t=>Number(t))):[1]}else a=$t.QH,(n||r||h||o)&&_t.NLt(Mc,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{yE:a,Pyt:u,RBt:l,wBt:c,IBt:d}}function AK(t){const e=vK(t);if(!e)return[void 0,""];const[i,s]=e.split(",");return[fu(i),s]}function SK(t,e){const i=t.split("@"),s=fu(i[0]),n=i.length>1?fu(i[1]):e;if(void 0===s||void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Cn:n,V:s}}function TK(t){if(void 0!==t)return SK(t,void 0)}function kK(t,e){return SK(vK(t),e)}function EK(t,e){const i=gK(t);try{const t=IK(i.URI,e);return{Dx:t,hAt:TK(i.BYTERANGE)}}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function xK(t){const e=vK(t);if(!e)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const i=new Date(e);if(!gf(i))throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return i}function RK(t){const e=gK(t),i=e["START-DATE"],s=e["END-DATE"],n=fu(e["PLANNED-DURATION"]);let r,o,h,a=fu(e.DURATION);void 0!==e["SCTE35-CMD"]&&(r=ip(e["SCTE35-CMD"]).buffer),e["SCTE35-IN"]&&(o=ip(e["SCTE35-IN"]).buffer),e["SCTE35-OUT"]&&(h=ip(e["SCTE35-OUT"]).buffer);const u="YES"===e["END-ON-NEXT"],c=function(t){const e={};for(const i of w.keys(t)){const s=t[i];void 0!==s&&Sl(i,"X-")&&(e[i]=s)}return e}(e),l=e.ID,d=e.CLASS;let f,_;if(void 0===i)_t.NLt(Mc,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+i+".");else if(f=new Date(i),_=void 0!==s?new Date(s):void 0,gf(f)||_t.NLt(Mc,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const e=new Date(f.getTime()+1e3*a);_?_.getTime()!==e.getTime()&&(_t.NLt(Mc,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),_=e):_=e}else _&&(a=(f.getTime()-_.getTime())/1e3);if(u&&(e.CLASS||_t.NLt(Mc,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),e.DURATION&&_t.NLt(Mc,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),_&&_t.NLt(Mc,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&_t.NLt(Mc,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new g("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,uBt:d,QG:f,cBt:_,ct:a,lBt:n,vBt:r,gBt:o,mBt:h,aBt:u,fBt:c}}function IK(t,e){if(void 0===t)throw new g("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return Ms.Jp(t,e)}function CK(t,e){const i=gK(t),s=fu(i.DURATION),n=IK(i.URI,e),r=TK(i.BYTERANGE),o="YES"===i.INDEPENDENT,h="YES"===i.GAP;if(void 0===s)throw new g("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,Pyt:{Dx:n,hAt:r},CBt:o,PBt:h}}function PK(t){const e=gK(t);return{DBt:"YES"===e["CAN-BLOCK-RELOAD"],NBt:fu(e["CAN-SKIP-UNTIL"]),MBt:"YES"===e["CAN-SKIP-DATERANGES"],LBt:fu(e["HOLD-BACK"]),BBt:fu(e["PART-HOLD-BACK"])}}function DK(t,e){const i=gK(t);if(void 0===i.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=IK(i.URI,e),n=fu(i["LAST-MSN"]),r=fu(i["LAST-PART"]);if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{Pyt:s,OBt:n,FBt:r}}function NK(t,e){var i;const s=gK(t),n=fu(s["SKIPPED-SEGMENTS"]),r=null==(i=s["RECENTLY-REMOVED-DATERANGES"])?void 0:i.split("\t");if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{VBt:n,WBt:r,UBt:e}}function MK(t){const e=fu(gK(t)["PART-TARGET"]);if(void 0===e)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return e}function LK(t){switch(vK(t)){case"VOD":return oK.oBt;case"EVENT":return oK.hBt;default:return _t.NLt(Mc,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),oK.tE}}function BK(t,e){const i=gK(t);let s,n;try{s=function(t){if(void 0===t)throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return rK.iBt;if("PART"===t)return rK.sBt;throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(i.TYPE),n=IK(i.URI,e)}catch(e){throw new g("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=fu(i["BYTERANGE-START"]),o=fu(i["BYTERANGE-LENGTH"]);let h;return void 0===r&&void 0===o||(h={Cn:r||0,V:o}),{Aw:s,Pyt:{Dx:n,hAt:h}}}r(),r(),r();var OK=class t{GBt(){const t=this.HBt[this.ZBt];return this.ZBt+=1,t}XBt(){return this.HBt[this.ZBt]}xb(){const e=new t("");return e.ZBt=0,e.HBt=this.HBt.slice(this.ZBt),e}static zBt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(e){this.ZBt=0,this.HBt=t.zBt(e)}};function FK(t,e,i){const s=t.Pyt;let n=t.YD,r=t.qBt,o=t.Cn;switch(i){case"#EXT-X-VERSION":n=function(t){const e=mK(t);return S(e)?(_t.NLt(Mc,"Playlist version is NaN: "+t+"."),1):e}(e);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":o=function(t){const e=gK(t),i=fu(e["TIME-OFFSET"]);if(void 0===i)throw new g("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{YBt:i,KBt:"YES"===e.PRECISE}}(e);break;case"#EXT-X-DEFINE":_t.NLt(Mc,"Ignoring unsupported #EXT-X-DEFINE: "+e+".");break;default:_t.DN(Mc,"Ignoring unrecognized line or comment: "+e+".")}return{Pyt:s,YD:n,qBt:r,Cn:o}}function VK(t,e){return t.map((t=>t.yE===$t.QH||t.RBt?t:Bo({},t,{RBt:WK(e)})))}function WK(t){const e=new DataView(new ArrayBuffer(16)),i=new Ri;return i.kb(8),Fg(e,i,vo.fromNumber(t)),new j(e.buffer)}function UK(t,e,i){_t.DN(Mc,"Parsing M3U8 playlist at "+t+".");const s=new OK(i);if("#EXTM3U"!==s.GBt())throw new g("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(i)?function(t,e){let i;try{i=Ms.Jp(t)}catch(e){throw _t.NLt(Mc,"The master playlist has no valid base URI: "+t+"."),new g("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={Pyt:i,qBt:void 0,Cn:void 0,YD:void 0};const n=[],r=[],o=[],h=[];for(;;){const t=e.GBt();if(!t)break;try{const a=fK(t);switch(a){case"#EXT-X-MEDIA":{const e=pK(t,i);n.push(e);break}case"#EXT-X-STREAM-INF":{const s=wK(t,i,e.GBt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const e=yK(t,i);o.push(e);break}case"#EXT-X-SESSION-DATA":_t.NLt(Mc,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const e=bK(t,i);h.push(e);break}default:s=FK(s,t,a)}}catch(e){_t.NLt(Mc,"Ignoring unparsable line: "+t,e)}}let a=s.YD;var u;const c=null!=(u=s.qBt)&&u,l=s.Cn;return void 0===a&&(_t.NLt(Mc,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some((t=>void 0!==t.Ryt))||o.some((t=>void 0!==t.Ryt)))&&(r.some((t=>void 0===t.Ryt))||o.some((t=>void 0===t.Ryt)))&&_t.NLt(Mc,"If one master playlist variant stream has a SCORE, all variants should have it."),{Pyt:i,YD:a,qBt:c,Cn:l,jBt:o,QBt:h,yN:n,JBt:r}}(t,s):function(t,e,i){let s={Pyt:t,qBt:void 0,Cn:void 0,YD:void 0};const n=[];let r,o,h,a,u=!1,c=!1;const l=[],d=xu();let f,_,v,m,p,w,y,b,A,S=[],T=[],k=!1,E=!1;const x=[],R=[];let I,C,P,D,N,M=0,L=!1,B=oK.tE,O=!1,F=0;try{N=Ms.Jp(t)}catch(e){throw _t.NLt(Mc,"The media playlist has no valid base URI: "+t+".",e),new g("HLSPlaylistParser - Could not parse HLS media playlist.")}const V=i.xb();for(;void 0===C||void 0===P;){const t=V.GBt();if(!t)break;try{switch(_K(t)){case"#EXT-X-MEDIA-SEQUENCE":C=mK(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":P=mK(t)}}catch(e){_t.NLt(Mc,"Ignoring unparsable line: "+t,e)}}void 0===C&&(_t.DN(Mc,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),C=0),void 0===P&&(_t.DN(Mc,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),P=0);let W=C,U=P;for(;;){const t=i.GBt();if(!t)break;let e=!1;try{const i=_K(t);switch(i){case"#EXTINF":e=!0,[f,_]=AK(t);break;case"#EXT-X-BYTERANGE":e=!0,v=kK(t,M),v&&(M=v.Cn+v.V);break;case"#EXT-X-DISCONTINUITY":e=!0,k=!0,U++;break;case"#EXT-X-KEY":{var G;e=!0;const i=bK(t,N);if(i.yE===$t.QH){d.clear(),A=void 0;break}var H;const s=null!=(H=null==(G=i.wBt)?void 0:G.toString())?H:"identity";d.set(s,i),i.yE===$t.nBt&&(A=i);break}case"#EXT-X-MAP":e=!0,p=EK(t,N),w=A;break;case"#EXT-X-PROGRAM-DATE-TIME":e=!0,y=xK(t);break;case"#EXT-X-GAP":e=!0,E=!0;break;case"#EXT-X-BITRATE":e=!0,b=mK(t);break;case"#EXT-X-TARGETDURATION":r=mK(t);break;case"#EXT-X-DATERANGE":{const e=RK(t);n.push(e);break}case"#EXT-X-PART":{e=!0;const i=CK(t,N);T.push(i);break}case"#EXT-X-PRELOAD-HINT":{const e=BK(t,N);x.push(e);break}case"#EXT-X-SKIP":{l.length>0&&_t.NLt(Mc,"#EXT-X-SKIP must appear before any #EXTINF tags."),e=!0;const i=NK(t,W);F=i.VBt,D=i.WBt,W+=i.VBt;break}case"#EXT-X-SERVER-CONTROL":{const e=PK(t);u=e.DBt,o=e.NBt,c=e.MBt,h=e.LBt,a=e.BBt;break}case"#EXT-X-RENDITION-REPORT":{const e=DK(t,N);R.push(e);break}case"#EXT-X-PART-INF":I=MK(t);break;case"#EXT-X-MEDIA-SEQUENCE":e&&_t.NLt(Mc,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":e&&_t.NLt(Mc,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":L=!0;break;case"#EXT-X-PLAYLIST-TYPE":B=LK(t);break;case"#EXT-X-I-FRAMES-ONLY":O=!0;break;default:if(Sl(i,"#"))s=FK(s,t,i);else{m=Ms.Jp(t,N);const e=p?{Pyt:p,$Bt:w}:void 0,i={QBt:VK(jv(d),W),XV:S,tOt:T,ct:f,nH:_,eOt:k,Pyt:{hAt:v,Dx:m},iOt:e,sOt:y,PBt:E,nOt:b,UBt:W,rOt:U};l.push(i),W++,S=[],T=[],f=void 0,_=void 0,k=!1,v=void 0,m=void 0,y=void 0,E=!1,b=void 0}}}catch(e){_t.NLt(Mc,"Ignoring unparsable line: "+t,e)}}if(T.length){const t=p?{Pyt:p,$Bt:A}:void 0,e={QBt:VK(jv(d),W),XV:S,tOt:T,ct:f,nH:_,eOt:k,Pyt:void 0,iOt:t,sOt:y,PBt:E,nOt:b,UBt:W,rOt:U};l.push(e)}let Z=s.YD;var X;const z=null!=(X=s.qBt)&&X,q=s.Cn;void 0===Z&&(_t.NLt(Mc,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),Z=2),void 0===r&&_t.NLt(Mc,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const Y=l.length,K=Y>0;K||_t.NLt(Mc,"The HLS media playlist contains no segments.");const j=K&&l[Y-1].tOt.length>0;return j&&void 0===I&&_t.NLt(Mc,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),j&&void 0===a&&_t.NLt(Mc,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{DBt:u,NBt:o,MBt:c,oOt:n,rOt:P,hOt:L,qBt:z,LBt:h,aOt:O,UBt:C,VBt:F,BBt:a,zLt:I,uOt:B,cOt:x,WBt:D,lOt:R,dOt:r,Ert:l,Cn:q,Pyt:N,fOt:e,YD:Z}}(t,e,s)}r(),r();var GK=class{get Pyt(){return this.tLt.Pyt}get Zrt(){return this.LCt}set Zrt(t){this.LCt=t?ZK(t):void 0,this._Ot=function(t,e){return!(void 0!==(null==t?void 0:t.sPt)&&void 0===(null==e?void 0:e.sPt)||void 0!==(null==t?void 0:t.rPt)&&void 0===(null==e?void 0:e.rPt))}(this.vOt,this.LCt)}get mOt(){return this._Ot}get GLt(){return this.gOt}get BLt(){return this.gOt.filter((t=>t.Aw===Yc.fE))}get OLt(){return this.gOt.filter((t=>t.Aw===Yc._E))}get pOt(){return this.gOt.filter((t=>t.Aw===Yc.jV))}get wOt(){return this.gOt.filter((t=>t.Aw===Yc.eBt))}yOt(t){for(const e of this.gOt){const i=e.tLt.yOt(t);if(void 0!==i)return i}}bOt(t){for(const e of this.gOt){const i=e.tLt.bOt(t);if(void 0!==i)return i}}AOt(t){we(this.gOt,t)}constructor(t,e,i){var s,n,r,o;this.o=HK++,this.Ryt=void 0,this.zCt=void 0,this.xyt=void 0,this._Ot=!1,this.gOt=[],this.tLt=e,this.wG=t.wG,this.xyt=t.xyt,this.Ryt=t.Ryt,this.vOt=t.Zrt?ZK(t.Zrt):void 0,this.LCt=this.vOt,this.zCt=t.zCt,this.Jdt=t.Jdt,this.ABt=null!=(s=t.ABt)?s:"SOt"+this.o,this.EBt=null!=(n=t.EBt)?n:"TOt"+this.o,this.kBt=null!=(r=t.kBt)?r:"kOt"+this.o,this.SBt=null!=(o=t.SBt)?o:"EOt"+this.o,this.gOt=i}},HK=0;function ZK(t){return Bo({},t,{rPt:t.rPt?Ly(t.rPt):void 0})}r(),r(),r();var XK=class{get FO(){var t;return this.YO+(null!=(t=this.xOt)?t:0)}get ROt(){return this.IOt}get COt(){return this.POt}get QBt(){return this.DOt.QBt}NOt(t,e,i){this.YO=t,this.IOt=e,this.POt=i}constructor(t,e,i,s,n,r){this.cit=void 0,this.DOt=t,this.MOt=e,this.YO=i,this.IOt=s,this.POt=n,this.ct=r.ct,this.Pyt=r.Pyt,this.CBt=r.CBt,this.PBt=r.PBt}},zK=class{get FO(){var t;return this.YO+(null!=(t=this.LOt)?t:0)}get BOt(){return this.YO}get ct(){return this.DA}get Pyt(){return this.OOt}get ROt(){return this.IOt}get COt(){return this.POt}get tOt(){return this.bv}get FOt(){return this.VOt}get VO(){var t;return this.FO+(null!=(t=this.DA)?t:this.VOt)}set xOt(t){this.LOt=t;for(const e of this.bv)e.xOt=t}get xOt(){return this.LOt}WOt(t){return this.bv[t]}UOt(t){for(let e=0;e<this.bv.length;e++){const i=this.bv[e],s=i.FO,n=s+i.ct;if(s<=t&&t<=n)return t===n&&e+1<this.bv.length?this.bv[e+1]:i}}GOt(t){for(let e=this.bv.length-1;e>=0;e--){const i=this.bv[e];if(i.FO<=t)return i}}HOt(t){let e=this.GOt(t);for(;e&&!e.CBt&&e.MOt>0;)e=this.WOt(e.MOt-1);return e}NOt(t,e,i){const s=t.tOt.length!==this.bv.length||i!==this.POt;this.IOt=e,this.POt=i,this.DA=t.ct,null!=this.sOt||(this.sOt=t.sOt),void 0===this.OOt&&(this.OOt=t.Pyt),s&&this.ZOt(t.tOt)}ZOt(t){this.bv.length>t.length&&(this.bv.length=t.length);let e=0;for(let i=0;i<t.length;i++){const s=t[i],n=this.IOt&&0===i,r=this.POt&&i===t.length-1,o=this.YO+e;if(i<this.bv.length)this.bv[i].NOt(o,n,r);else{const t=new XK(this,i,o,n,r,s);t.xOt=this.LOt,this.bv.push(t)}e+=s.ct}this.VOt=e}XOt(){En(this.bv),this.VOt=0}constructor(t,e,i,s,n){this.cit=void 0,this.bv=[],this.VOt=0,this.YO=t,this.iOt=n.iOt,this.IOt=i,this.POt=s,this.DA=n.ct,this.sOt=n.sOt,this.OOt=n.Pyt,this.PBt=n.PBt,this.UBt=n.UBt,this.eOt=n.eOt,this.rOt=e,this.QBt=n.QBt,this.ZOt(n.tOt)}};r();var qK=function(t){return t.zOt="YES",t.qOt="v2",t}({});r();var YK=class extends z{};r(),r(),r();var KK=class extends Le{get ka(){return this.su||(this.su=function(t){return nh(Lt(t),{get content(){return t.U},get class(){return t.uBt},get startDate(){return t.QG},get endDate(){return t.cBt},get duration(){return t.ct},get plannedDuration(){return t.lBt},get endOnNext(){return t.aBt},get scte35Cmd(){return t._Bt},get scte35Out(){return t.mBt},get scte35In(){return t.gBt},get customAttributes(){return t.dBt}})}(this)),this.su}get uBt(){return this.YOt}get QG(){return this.KOt}get cBt(){return this.jOt}get ct(){return this.DA}get lBt(){return this.QOt}get aBt(){return this.JOt}get _Bt(){return this.$Ot}get mBt(){return this.tFt}get gBt(){return this.eFt}get dBt(){return this.iFt}tr(t){let e=!1;var i;(void 0===this.YOt&&void 0!==t.uBt&&(e=!0,this.YOt=t.uBt),void 0===this.jOt&&void 0!==t.cBt&&(e=!0,this.jOt=t.cBt),void 0===this.DA&&void 0!==t.ct&&(e=!0,this.DA=t.ct),void 0===this.QOt&&void 0!==t.lBt&&(e=!0,this.QOt=t.lBt),!this.JOt&&t.aBt&&(e=!0,this.JOt=t.aBt),e=this.updateCustomAttributes(t,e),void 0===this.$Ot&&void 0!==t._Bt&&(e=!0,this.$Ot=t._Bt),void 0===this.tFt&&void 0!==t.mBt&&(e=!0,this.tFt=t.mBt),void 0===this.eFt&&void 0!==t.gBt&&(e=!0,this.eFt=t.gBt),this.sFt(),this.nFt(),this.rFt(),e)&&(this.wo(new bl(this)),null==(i=this.KO)||i.wo(new kl(this)))}updateCustomAttributes(t,e){let i=e;if(t.dBt)for(const e of w.keys(t.dBt))void 0===this.iFt[e]&&(i=!0,this.iFt[e]=t.dBt[e]);return i}sFt(){this.DA&&!this.jOt&&(this.jOt=new Date(this.KOt.getTime()+Ia(this.DA)))}nFt(){this.jOt&&!this.DA&&(this.DA=pf(this.jOt.getTime()-this.KOt.getTime()))}rFt(){this.QO===1/0&&(this.jOt||this.DA)&&(this.QO=jK(this.YO,this.DA,this.KOt,this.jOt))}constructor(t,e){super(e,jK(e,t.ct,t.QG,t.cBt),void 0,!1,t.o),this.YOt=t.uBt,this.KOt=t.QG,this.jOt=t.cBt,this.DA=t.ct,this.QOt=t.lBt,this.JOt=Boolean(t.aBt),this.iFt=t.dBt||{},this.$Ot=t._Bt,this.tFt=t.mBt,this.eFt=t.gBt,this.sFt(),this.nFt()}};function jK(t,e,i,s){return ji(e)?t+e:s?t+(pf(s.getTime())-pf(i.getTime())):1/0}var QK=class extends BL{tr(t,e){JK(this,$K(t),e)}dW(t){tj(this.L.uC,t),super.dW(t)}constructor(){super(void 0,void 0,Lr.DATE_RANGE)}};function JK(t,e,i){const s=t.L.uC;for(let i=s.length-1;i>=0;i--){const n=s[i],r=Fo(e,(t=>t.o===n.o));r?n.tr(r):t.eW(n)}for(const s of e){const e=s.QG;if(void 0!==e&&!t.q4(s.o)){const n=i(e),r=new KK(s,n);tj(t.L.uC,r),t.dW(r)}}}function $K(t){const e=xu(),i=[];for(const s of t)if(e.has(s.o)){const t=e.get(s.o),i=Bo({},t,jA(s),{dBt:Bo({},t.dBt,s.dBt)});e.set(s.o,i)}else e.set(s.o,s),i.push(s.o);return i.map((t=>e.get(t)))}function tj(t,e){const i=Hm(t,(t=>t.uBt===e.uBt));i&&i.aBt&&i.tr({o:i.o,cBt:e.QG})}var ej=String.fromCharCode(95),ij=ej+"HLS_msn",sj=ej+"HLS_part",nj=ej+"HLS_skip",rj="HLSMediaPlaylist",oj=class{get hOt(){if(0===this.Fbt.length)return!1;return this.Fbt[this.Fbt.length-1].COt}get ct(){return this.DA}get rI(){return this.h4}get oFt(){return this.hFt}get qLt(){return this.aFt}get zLt(){return this.uFt}get LBt(){return this.hOt?0:this.cFt?this.cFt:this.aFt?3*this.aFt:void 0}get BBt(){var t;return null!=(t=this.lFt)?t:this.uFt?3*this.uFt:void 0}get DBt(){return this.dFt}get NBt(){return this.fFt}get MBt(){return this._Ft}get uOt(){return this.vFt}get mFt(){return void 0!==this.zLt}get gFt(){if(this.hOt)return!0;const t=Ms.Vg()/1e3,e=this.pFt,i=this.wFt;return void 0!==e&&t-e<i}get pFt(){return this.yFt}get bFt(){if(this.AFt)return Ms.Vg()/1e3-this.AFt}get xOt(){return this.LOt}get wFt(){var t;return null!=(t=this.aFt)?t:void 0===this.yFt?5:1}get Ert(){return this.Fbt}get oOt(){return this.SFt}get TFt(){return this.kFt}set TFt(t){this.kFt=t}get Cn(){return this.YV}get EFt(){return this.xFt}ILt(t){if(!t)return this.Pyt;const e=Ms.Nh(this.Pyt);return void 0!==t.UBt&&e.searchParams.append(ij,String(t.UBt)),void 0!==t.RFt&&e.searchParams.append(sj,String(t.RFt)),void 0!==t.DD&&e.searchParams.append(nj,t.DD),e.href}tut(t){const e=this.Fbt;if(0===e.length)return;const i=t-e[0].UBt;return i<0||i>=e.length?void 0:e[i]}IFt(t){if(0===this.Fbt.length)return;const e=TH(hj.Fg,this.Fbt,t);if(!(e<0)){const i=this.Fbt[e];return t===i.VO&&e+1<this.Fbt.length?this.Fbt[e+1]:i}{const e=this.Fbt[this.Fbt.length-1];if(t===e.VO)return e}}CFt(t){if(0===this.Fbt.length)return;const e=this.Fbt[0];if(t<e.VO)return e;const i=this.Fbt[this.Fbt.length-1];return t>=i.FO?i:this.IFt(t)}yOt(t){const e=this.CFt(t);if(void 0===e)return;for(let i=e.UBt-this.Fbt[0].UBt;i>=0;i--){const e=this.Fbt[i];if(void 0!==e.sOt)return new Date(e.sOt.getTime()+1e3*(t-e.FO))}}bOt(t){let e;for(const i of this.Fbt)if(aj(i))if(void 0===e)e=i;else{if(!(i.sOt.getTime()<=t.getTime()))break;e=i}if(void 0!==e)return e.FO+(t.getTime()-e.sOt.getTime())/1e3}PFt(t){switch(t){case rK.iBt:return this.DFt;case rK.sBt:return this.NFt;default:return}}NOt(t){var e;void 0===this.aFt&&(this.aFt=null!=(e=t.dOt)?e:this.MFt(t));void 0===this.cFt&&void 0!==t.LBt&&(this.cFt=t.LBt),void 0===this.uFt&&void 0!==t.zLt&&(this.uFt=t.zLt),void 0===this.lFt&&void 0!==t.BBt&&(this.lFt=t.BBt),this.dFt=t.DBt,this.fFt=t.NBt,this._Ft=t.MBt,this.vFt=t.uOt,this.Gbt(t),this.LFt(t);const i=Fo(t.cOt,(t=>t.Aw===rK.iBt)),s=Fo(t.cOt,(t=>t.Aw===rK.sBt));this.DFt=i?{Pyt:i.Pyt,Aw:i.Aw,rOt:t.rOt}:void 0,this.NFt=s?{Pyt:s.Pyt,Aw:s.Aw,rOt:t.rOt}:void 0,this.yFt=Ms.Vg()/1e3;const n=this.h4.jn(this.h4.V-1);this.BFt();const r=this.h4.jn(this.h4.V-1);(!this.AFt||r-n>0)&&(this.AFt=this.yFt),null!=this.YV||(this.YV=t.Cn)}BFt(){this.hFt=this.OFt(),this.h4=this.FFt(this.hFt),this.DA=this.VFt()}OFt(){const t=this.Ert;if(0===t.length)return se.mB();const e=t[0].FO,i=t[t.length-1].VO;return new se([e,i])}FFt(t){if(0===t.V||this.hOt)return t;const e=t.Cn(0),i=t.jn(0)-this.LSt;return i<e?se._B(e):new se([e,i])}get LSt(){return this.hOt?0:null!=(i=null!=(e=null!=(t=this.WFt)?t:this.BBt)?e:this.LBt)?i:0;var t,e,i}VFt(){return 0===this.Fbt.length?0:this.hOt?mf(this.Fbt,(t=>{var e;return null!=(e=t.ct)?e:t.FOt})):1/0}MFt(t){let e;for(const i of t.Ert)if(void 0!==i.ct){const t=_.max(1,_.round(i.ct));(void 0===e||e<t)&&(e=t)}if(void 0===e)throw new g("HLSModel - Could not determine required segment target duration.");return e}Gbt(t){if(0===t.Ert.length)return En(this.Fbt),void this.UFt();const e=this.GFt(t);if(!e)return;let i,s,n;e.HFt>0&&this.Fbt.splice(0,e.HFt);const r=t.VBt;if(r>0){if(r>this.Fbt.length)throw new YK("New playlist skips over missing segments.");const e=this.Fbt[r-1];if(void 0===e.ct)throw new YK("New playlist skips over an incomplete segment.");i=e.BOt+e.ct,n=e.rOt-t.rOt,s=r;for(let t=0;t<r;t++)this.Fbt[t].XOt()}else i=e.ZFt,n=0,s=0;for(let e=0;e<t.Ert.length;e++,s++){const r=t.Ert[e],o=0===e,h=t.hOt&&e===t.Ert.length-1,a=r.ct,u=r.rOt+n;if(s<this.Fbt.length){const t=this.Fbt[s];0,t.NOt(r,o,h)}else{let t=r;if(this.Fbt.length>0&&void 0===t.iOt){t=Bo({},t,{iOt:this.Fbt[this.Fbt.length-1].iOt})}const e=new zK(i,u,o,h,t);e.xOt=this.LOt,this.Fbt.push(e)}void 0!==a&&(i+=a)}}GFt(t){if(0===this.Fbt.length)return{HFt:0,ZFt:0};const e=this.Fbt[0].UBt,i=this.Fbt[this.Fbt.length-1].UBt,s=t.Ert[0].UBt-t.VBt,n=t.Ert[t.Ert.length-1].UBt;let r=0,o=0;if(s<e){const i=this.Ert[0].sOt,n=t.Ert[0].sOt;if(!(i&&n&&i<n))return void _t.NLt(rj,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+e+")");r=this.Fbt.length,this.UFt()}else{if(n<i)return void _t.NLt(rj,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+i+")");if(i<s){var h;o=null!=(h=function(t,e){const i=Hm(t,(t=>void 0!==t.sOt));if(void 0===i)return;const s=function(t){let e=0;for(const s of t){if(s.eOt)return;if(s.sOt)return[s,e];var i;e+=null!=(i=s.ct)?i:0}return}(e.Ert);if(void 0===s)return;const[n,r]=s;if(i.rOt!==n.rOt)return;const o=(n.sOt.getTime()-i.sOt.getTime())/1e3;return i.BOt+o-r}(this.Fbt,t))?h:function(t,e,i){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:_.max(i,s.FOt),o=i*(e-s.UBt-1);return s.BOt+r+o}(this.Fbt,s,this.aFt),_t.DLt(rj,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+i+"), resetting playlist and restarting at "+o+"s"),r=this.Fbt.length,this.UFt()}else{0;const t=Hr(this.Fbt,(t=>t.UBt===s));0,o=this.Fbt[t].BOt,t>0&&(r=t)}}return{HFt:r,ZFt:o}}LFt(t){let e=t.oOt.map(uK);if(t.MBt&&t.fOt.DD===qK.qOt&&(e=this.SFt.concat(e)),this.SFt=$K(e),t.WBt)for(const e of t.WBt){const t=Hr(this.SFt,(t=>t.o===e));t>=0&&ka(this.SFt,t)}}XFt(t,e){if(this.LOt!==t){this.LOt=t;for(const t of this.Fbt)t.xOt=this.LOt;this.BFt()}this.xFt=e}UFt(){this.LOt=void 0,this.xFt=void 0}constructor(t,e,i){this.yFt=void 0,this.AFt=void 0,this.DFt=void 0,this.NFt=void 0,this.aFt=void 0,this.uFt=void 0,this.cFt=void 0,this.lFt=void 0,this.Fbt=[],this.SFt=[],this.dFt=!1,this.fFt=void 0,this._Ft=!1,this.vFt=oK.tE,this.h4=se.mB(),this.hFt=se.mB(),this.DA=void 0,this.kFt=-1/0,this.xFt=void 0,this.Pyt=t,this.YV=e,this.WFt=i}},hj=class t{static get Fg(){return null!=this.Hrt||(this.Hrt=new t),this.Hrt}Mbt(t){return t.FO}Lbt(t){return t.VO}Bbt(t,e){return eu(t,e)}Obt(t,e,i){return(t-e)/(i-e)}};function aj(t){return void 0!==t.sOt}function Wu(t){return void 0!==t.tOt}function uj(t){return Wu(t)?t.ROt:0===t.MOt&&t.DOt.ROt}function cj(t,e){return Wu(t)?Wu(e)?t.UBt+1===e.UBt:0===e.MOt&&cj(t,e.DOt):t.MOt===t.DOt.tOt.length-1?cj(t.DOt,e):!Wu(e)&&t.DOt===e.DOt&&t.MOt+1===e.MOt}r(),r(),r();var lj=class extends z{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var dj=class{zFt(t){const e=this.qFt.get(t);return void 0!==e&&fj(e)}YFt(t){if(this.KFt()>t)return Promise.reject(new lj);const e=[];for(const s of this.jFt){var i;if(s<t)null==(i=this.qFt.get(s))||i.QFt.Fb(new lj),this.qFt.delete(s);else e.push(s)}return this.jFt=e,-1===this.jFt.indexOf(t)&&this.jFt.push(t),this.JFt(t).QFt.Vb}$Ft(t){const e=this.qFt.get(t);if(!e||!fj(e))throw new g("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return e}tVt(t){return this.$Ft(t).MV}eVt(t,e){const i=Wu(e)?e:e.DOt,s=this.$Ft(i.rOt);let n=t.SO(s.MV);if(s.iVt){const t=Oo.fV(e.FO).SF(n);if(t.yF().fF(nE())){const e=_.round(t.dF()/sE().dF());n=n.SO(sE().QF(e))}}return n}sVt(t,e){return this.eVt(t,e).SF(t)}nVt(t,e,i,s,n,r){this.rVt<t&&(this.rVt=t);const o=this.JFt(t);void 0===o.MV&&(o.oVt.some((t=>t.bat===e))||(o.oVt.push({bat:e,hVt:i,aVt:s.uV(i._N),uVt:n,iVt:r}),this.cVt(o,t)))}cVt(t,e){if(t.MV||!this.lVt(t))return;const i=function(t){return jm(t,_j)}(t.oVt);t.MV=i.aVt.SF(i.hVt),t.iVt=t.oVt.some((t=>t.iVt)),t.QFt.Ob(),En(t.oVt),we(this.jFt,e)}lVt(t){return this.dVt.length>0&&this.dVt.every((e=>t.oVt.some((t=>t.bat===e))))}JFt(t){if(this.qFt.has(t))return this.qFt.get(t);{const e={MV:void 0,iVt:!1,QFt:new os,oVt:[]};return this.qFt.set(t,e),e}}fVt(t){this.dVt=t,this.qFt.forEach(((t,e)=>this.cVt(t,e)))}_Vt(){this.rVt=-1}KFt(){return this.rVt}Hw(){this.qFt.forEach((t=>t.QFt.Yw())),this.qFt.clear()}constructor(){this.dVt=[],this.qFt=ea(),this.jFt=[],this.rVt=-1}};function fj(t){return void 0!==t.MV}function _j(t,e){return-function(t,e){if(t.iVt||e.iVt)return function(t,e){let i=t.SF(e);return t.kF()||e.kF()||(i.vF(nE())?i=i.SF(sE()):i.wF(nE().AF())&&(i=i.SO(sE()))),i}(t.hVt,e.hVt)._F(Oo.CF);return t.hVt._F(e.hVt)}(t,e)||function(t,e){return t.uVt===e.uVt?Rc.sh:t.uVt?Rc.Mw:Rc.Lw}(t,e)||function(t,e){return t.aVt._F(e.aVt)}(t,e)}var vj=class{get vVt(){return this.mVt}get LLt(){return this.gVt}get NL(){return this.pVt}NOt(t,e){if(ft(t))if(0===this.gVt.length)this.wVt(t);else{if(!e)return void _t.NLt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");e.tLt.NOt(t)}else{if(0!==this.gVt.length)return void _t.NLt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.yVt(t)}}wVt(t){const e=this.bVt(t.Pyt);e.NOt(t);const i=this.AVt(Yc.fE,e),s=this.AVt(Yc._E,e),n=new GK({Pyt:e.Pyt,wG:0,xyt:0,Ryt:NaN,Zrt:void 0,zCt:void 0,Jdt:0,bBt:[],TBt:void 0,xBt:void 0,ABt:void 0,EBt:void 0,kBt:void 0,SBt:void 0},e,[i,s]);this.gVt.push(n)}yVt(t){this.mVt.push(...t.QBt);const e=this.SVt(t);for(const i of t.JBt){const s=e.filter((t=>gj(t,i)));this.TVt(i,s);const n=new GK(i,this.bVt(i.Pyt,t.Cn),s);this.gVt.push(n)}}bVt(t,e){let i=this.kVt.get(t);return void 0===i&&(i=new oj(t,e,this.WFt),this.kVt.set(t,i)),i}SVt(t){const e=[];for(const i of t.yN)if(void 0===i.Pyt){for(const s of t.JBt)if(mj(i.Aw,i.nLt,s)){const t=new CY(i,this.bVt(s.Pyt));e.push(t)}}else{const t=new CY(i,this.bVt(i.Pyt));e.push(t)}return e}AVt(t,e){return new CY({Aw:t,Pyt:void 0,nLt:"",gs:void 0,yBt:void 0,l:"",eLt:!0,iLt:!1,sLt:!1,hLt:void 0,rLt:void 0,HCt:void 0},e)}TVt(t,e){const i=e.filter((t=>t.Aw===Yc.fE)),s=e.filter((t=>t.Aw===Yc._E)),n=t.Zrt&&(t.Zrt.rPt||t.Zrt.sPt);if((!n||t.Zrt.rPt)&&0===s.length){const i=this.AVt(Yc._E,this.bVt(t.Pyt));e.push(i)}if((!n||t.Zrt.sPt)&&0===i.length){const i=this.AVt(Yc.fE,this.bVt(t.Pyt));e.push(i)}t.Zrt&&t.Zrt.pBt}EVt(t){for(const e of this.gVt)for(const i of e.GLt)if(i===t)return i}xVt(t){for(const e of this.gVt)if(e===t)return e}RVt(t){for(const e of this.gVt)if(ms(e.GLt,t))return e}Hw(){En(this.gVt),En(this.mVt),this.kVt.clear(),this.pVt.Hw()}constructor(t,e){this.gVt=[],this.mVt=[],this.kVt=xu(),this.pVt=new dj,this.IVt=t,this.WFt=e}};function mj(t,e,i){switch(t){case Yc.fE:return i.ABt===e;case Yc._E:return i.EBt===e;case Yc.jV:return i.kBt===e;case Yc.eBt:return i.SBt===e}return!1}function gj(t,e){return mj(t.Aw,t.nLt,e)&&(!t.oLt||t.tLt.Pyt===e.Pyt)}r();var pj=class extends pe{constructor(t){super(yj.CVt),this.cLt=t}};r();var wj=class extends pe{constructor(t){super(yj.PVt),this.cLt=t}},tt="HlsModelUpdater",yj=function(t){return t.CVt="DVt",t.PVt="NVt",t}({}),bj=class extends Co{get MVt(){return this.LVt}get BVt(){return this.OVt}get Pr(){return this.Byt}get FVt(){return this.VVt}async WVt(t){const e=this.Byt.IVt;if(!e)throw new g("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.wo(new Di);const i=await this.UVt(e,{},2,!0,t),s=i.tLt;if(!nK(s)&&!ft(s))throw new g("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");nK(s)||_t.DN(tt,"Detected media playlist only HLS stream."),this.GVt(s),i.HVt&&(this.OVt=!0,await this.ZVt(t)),this.LVt=!0}async XVt(t,e,i,s){const n=this.Byt.EVt(t);if(!n)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={UBt:e,RFt:i,DD:kj(n)},o=Ia(_.max(1,3*t.tLt.wFt));try{await this.zVt(n,r,s,o)}catch(t){throw th(t),this.qVt(n),t}}YVt(t,e){const i=this.Byt.EVt(t);if(!i)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={UBt:void 0,RFt:void 0,DD:kj(i)},n=Ia(_.max(1,3*t.tLt.wFt));return this.zVt(i,s,e,n)}KVt(t,e){return this.jVt.has(t.xC)||this.jVt.set(t.xC,new os),ou(this.jVt.get(t.xC).Vb,e)}qVt(t){this.wo(new wj(t))}async zVt(t,e,i,s){const n=t.tLt.ILt(e);let r;try{r=(await this.UVt(n,e,0,this.OVt,i,s)).tLt}catch(e){throw th(e),t.tLt.TFt=Ms.Vg(),e}if(!ft(r))throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.QVt&&t!==this.QVt&&!this.QVt.tLt.gFt)try{await this.YVt(this.QVt,i)}catch(e){th(e),this.QVt=t,this.JVt()}try{this.GVt(r,t)}catch(n){if(n instanceof YK&&void 0!==e.DD){const n=Bo({},e,{DD:void 0});return this.zVt(t,n,i,s)}throw n}this.QVt=t}async UVt(t,e,i,s,n,r){if(_t.DN(tt,"Loading HLS playlist at "+t+"."),s){const e=await this.$Vt(t,n);if(void 0!==e)return{tLt:e,HVt:!0}}return{tLt:await this.tWt(t,e,i,n,r),HVt:!1}}async $Vt(t,e){try{const i=await this.Fut.nrt([t]);if(J(e),void 0!==i)return UK(i.responseURL,{},i.data)}catch(t){th(t)}}async tWt(t,e,i,s,n){const r={Gu:t,Yk:Rr.Ak,kE:this.uTt,yE:xe.GET,Aw:Wr.eE,Vw:s,bE:n},o=await Ci((()=>this.eWt(r)),s,i);return UK(o.$k,e,o.qk)}async eWt(t){const e=await this.lW.Kk(t);return{qk:await e.Rk(),$k:e.$k}}async ZVt(t){J(t);const e=[];for(const i of this.Byt.LLt)for(const s of i.GLt)e.push(this.iWt(s,t));await Promise.all(e)}async iWt(t,e){try{const i=await this.Fut.nrt([t.tLt.Pyt]);J(e),void 0===i||t.tLt.gFt||await this.YVt(t,e)}catch(t){th(t)}}JVt(){for(const t of this.Byt.LLt)for(const e of t.GLt)e!==this.QVt&&void 0!==e.tLt.xOt&&(e.tLt.gFt?this.sWt(e):e.tLt.UFt())}sWt(t){if(0!==t.tLt.Ert.length){if(!this.QVt)return this.QVt=t,void this.QVt.tLt.XFt(0,void 0);if(this.nWt(this.QVt),!this.nWt(t)&&void 0===t.tLt.xOt){const e=this.rWt(t,this.QVt);_t.DLt(tt,"Assuming global timeline offset of "+e+"s for rendition "+t.tLt.Pyt+"."),t.tLt.XFt(e,void 0)}}}rWt(t,e){if(Aj(t)){const i=t.tLt.Ert[0],s=e.tLt.Ert[0];return _t.DLt(tt,"Synchronizing by start of VOD: "+s.FO+" vs "+i.FO),s.FO-i.BOt}const i=function(t,e){let i=t.length-1,s=e.length-1;for(;i>=0&&s>=0;){const n=t[i],r=e[s];if(n.rOt>r.rOt)i--;else if(n.rOt<r.rOt)s--;else if(n.eOt){if(r.eOt)return{segment:n,referenceSegment:r};s--}else i--}return}(t.tLt.Ert,e.tLt.Ert);if(void 0!==i){const{segment:t,referenceSegment:e}=i;return _t.DLt(tt,"Synchronizing by start of discontinuity #"+e.rOt+": "+e.FO+" vs "+t.FO),e.FO-t.BOt}const s=Tj(t.tLt.Ert);if(void 0!==s){const t=Tj(e.tLt.Ert);if(void 0!==t){_t.DLt(tt,"Synchronizing by PDT:",t.sOt.toISOString()+" vs "+s.sOt.getTime());return t.FO-s.BOt-(t.sOt.getTime()-s.sOt.getTime())/1e3}}const n=Sj(e),r=Sj(t);var o;const h=null!=(o=t.tLt.xOt)?o:0;return _t.DLt(tt,"Synchronizing by last segment:",n+" vs "+r),n-r+h}nWt(t){const e=this.Byt.EVt(t);if(!e)return!1;if(Aj(e))return!1;const i=function(t,e){return Hm(t,(t=>void 0!==t.cit&&e.zFt(t.rOt)))}(e.tLt.Ert,this.Byt.NL);if(void 0===i)return!1;if(e.tLt.EFt===i.rOt)return!0;const s=this.Byt.NL.eVt(i.cit,i).dF()-i.BOt;return _t.DLt(tt,"Synchronize by media timestamp: "+s+"s for rendition "+t.tLt.Pyt+"."),e.tLt.XFt(s,i.rOt),(void 0===this.QVt||void 0===this.QVt.tLt.EFt||this.QVt.tLt.EFt<i.rOt)&&(this.QVt=e),!0}GVt(t,e){var i;(this.Byt.NOt(t,e),ft(t)&&e)&&(this.VVt=e,this.sWt(e),this.wo(new pj(e)),null==(i=this.jVt.get(e.xC))||i.Ob(),this.jVt.delete(e.xC));this.wo(new Al)}oWt(t,e){for(const i of this.Byt.LLt){const s=Fo(i.OLt,(t=>t.tLt===e));void 0!==s&&void 0!==t.rPt&&(s.Zrt=cK(s.Zrt,t));const n=Fo(i.BLt,(t=>t.tLt===e));void 0!==n&&void 0!==t.sPt&&(n.Zrt=cK(n.Zrt,t)),i.mOt||void 0===s&&void 0===n||(i.Zrt=cK(i.Zrt,t))}}hWt(t,e){for(const i of this.Byt.LLt){const s=Fo(i.OLt,(t=>t.tLt===e));void 0!==s&&void 0===t.rPt&&i.AOt(s);const n=Fo(i.BLt,(t=>t.tLt===e));void 0!==n&&void 0===t.sPt&&i.AOt(n)}}Hw(){this.$o(),this.Byt.Hw(),this.jVt.forEach((t=>t.Yw())),this.jVt.clear()}constructor(t,e,i,s,n){super(),this.lW=t,this.Fut=e,this.uTt=i,this.LVt=!1,this.OVt=!1,this.QVt=void 0,this.VVt=void 0,this.jVt=ea(),this.Byt=new vj(s,n)}};function Aj(t){return t.tLt.hOt||t.tLt.uOt===oK.hBt}function Sj(t){const e=t.tLt.Ert;return e[e.length-1].VO}function Tj(t){return Hm(t,(t=>void 0!==t.sOt))}function kj(t){if(void 0!==t.tLt.NBt&&!t.tLt.hOt&&!(void 0===t.tLt.pFt||Ms.Vg()/1e3-t.tLt.pFt>=t.tLt.NBt/2))return t.tLt.MBt?qK.qOt:qK.zOt}var Ej=class{get nt(){return this.Vgt}LFt(t){if(0===t.tLt.oOt.length)return;this.aWt||(this.aWt=this.FB.LI(hs.$V,void 0,void 0,void 0,void 0,Lr.DATE_RANGE),this.Vgt.tt(this.aWt));JK(this.aWt,t.tLt.oOt,(e=>{var i;return null!=(i=t.tLt.bOt(e))?i:NaN}))}constructor(t,e){this.uWt=t=>{this.LFt(t.cLt)},this.aEt=t,this.FB=e,this.Vgt=new ua,this.aEt.yn(yj.CVt,this.uWt)}};r();var xj=class extends pe{constructor(){super(qt.qMt)}};r(),r(),r();var Rj=class{get cWt(){return this.R2}get gR(){return DV(this.Aot.gR,this.Aot.u3)}get Ert(){return this.Fbt}get zgt(){return this.Ggt}lWt(t){var e;return null==(e=this.dWt(t))?void 0:e.cLt}fWt(t){this.R2=t,this._Wt()}vdt(t,e,i,s,n,r){this.Fbt.push({cLt:t,But:e,vWt:se.vB(n,r),mWt:se.vB(i,s)}),this._Wt()}dWt(t){return Fo(this.Fbt,(e=>e.mWt.kr(t)))}tut(t){return Fo(this.Fbt,(e=>e.But===t))}ult(t,e){return Fo(this.Fbt,(i=>i.cLt===t&&cj(i.But,e)))}r3(){const t=this.gR;t.V>0&&(this.Ggt=t.jn(t.V-1))}_Wt(){const t=this.Aot.gR;this.Fbt=this.Fbt.filter((e=>0!==t.Sn(e.mWt).V))}constructor(t){this.Aot=t,this.Fbt=[],this.R2=void 0,this.Ggt=void 0}},Ij=class{get Aw(){return this.bp}get gWt(){return mT(this.bp)}get pWt(){return this.gat}get wWt(){return this.yWt}get FIt(){return void 0!==this.bWt}AWt(){if(this.FIt)throw new g("Cannot perform new operation while BufferAppender is still busy")}vot(t){this.Aot!==t&&(this.AWt(),this.Aot=t,this.gat=new Rj(t))}SWt(){return this.bWt?this.bWt.Vb:Promise.resolve()}TWt(t){const e=this.gat.zgt;return void 0!==e&&this.kWt(t,e)}kWt(t,e){var i;const s=_.min(t,e);var n;return null!=(n=null==(i=this.gat.gR.zL().tB(this.wWt).dB(s))?void 0:i.kr(e))&&n}EWt(t){return this.gat.lWt(t)}Yw(){this.WT.Yw(),this.WT=new da}w2(t){this.AWt(),this.bWt=new os;const e=e=>{this.RWt.xWt(t),this.IWt(e)};this.b2(t,this.WT.Vw).then(e,e)}async b2(t,e){_t.DLt(Ru,"Appending initializer",on(t.CWt.Pyt)),await this.Aot.w2(t,e),_t.DLt(Ru,"Appended initializer",on(t.CWt.Pyt)),this.gat.fWt(t)}Glt(t){this.AWt(),this.bWt=new os;const e=e=>{this.RWt.xWt(t),this.IWt(e)};this.PWt(t,this.WT.Vw).then(e,e)}async PWt(t,e){const i=t.cLt;if(void 0===i.tLt.qLt)throw new g("MediaBufferWrapper - Cannot append HLSAsset to "+this.bp+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.gat.gR.WL,n=this.Aot.gR;_t.DLt(Ru,"Appending",on(t.CWt.Pyt)),await this.Aot._2(t,e),_t.DLt(Ru,"Appended",on(t.CWt.Pyt),s,this.gat.gR.WL);const r=t.FO,o=r+t.ct,h=t.CWt,a=h.FO;var u;const c=h.FO+(null!=(u=h.ct)?u:0);this.gat.vdt(i,h,r,o,a,c);const l=this.Aot.gR.tB(n),d=this.gat.ult(i,h);if(this.Aw===ee._E)if(d)if(this.DWt(d))if(0===l.V){if(void 0===this.gat.tut(h)){const t=this.Aot.u3.Sn(new se([r,o]));this.yWt=this.yWt.JL(t)}}else{const t=l.Cn(0),e=new se([t,o]);if(this.yWt=this.yWt.tB(e),t>r){const e=this.Aot.u3.Sn(new se([r,t]));this.yWt=this.yWt.JL(e)}}else{const t=l.V>0&&l.Cn(0)<r?l.Cn(0):r;this.yWt=this.yWt.tB(new se([t,o]))}else if(0===l.V){const t=this.Aot.u3.Sn(new se([r,o]));this.yWt=this.yWt.JL(t)}else{var f;if(t.CWt.ROt)return;const e=l.Cn(0),i=null==(f=n.dB(r))?void 0:f.jn(0),s=i&&i>r?i:r;if(e>s){const t=this.Aot.u3.Sn(new se([s,l.Cn(0)]));this.yWt=this.yWt.JL(t)}}t.CWt.COt&&this.gat.r3()}DWt(t){const e=t.mWt,i=e.Cn(0),s=e.jn(e.V-1),n=e.GL(0),r=e.ZL(e.V-1);return this.yWt.iB(i,s,n,r)}constructor(t,e,i,s,n){this.bWt=void 0,this.WT=new da,this.yWt=se.mB(),this.IWt=t=>{this.bWt&&(t?cD(t)&&this.gWt?this.NWt.Lj(this.Aot.gR.fB)?this.bWt.Ob():this.bWt.Fb(t):Je(t)?this.bWt.Ob():this.bWt.Fb(t):this.bWt.Ob(),this.bWt=void 0)},this.bp=t,this.RWt=i,this.Aot=e,this.gat=s,this.NWt=n}};r(),r();var Cj=class{async MWt(t,e,i,s){const n=await this.LWt(e,s);return await this.BWt.MWt(t,n,i)}async LWt(t,e){var i;if((null==(i=this.OWt)?void 0:i.Gu)!==t){_t.DLt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const i=await this.lW.Kk({Gu:t,Yk:Rr.wk,yE:xe.GET,Vw:e,Aw:Wr.nE,SE:$h.dE,kE:this.uTt}),s=await i.Ck(),n=new j(s);this.OWt={Gu:t,qk:n}}return this.OWt.qk}constructor(t,e,i){this.BWt=t,this.lW=e,this.uTt=i,this.OWt=void 0}};r();var Pj=class{async Kk(t,e,i,s,n){const r=await this.FWt(t,e,i,Rr.wk,s,n),o=await r.Ck(n);return{httpStatusCode:r.zk,response:new j(o)}}async VWt(t,e,i,s,n){return(await this.FWt(t,e,i,Rr.bk,s,n)).Pk(n)}async FWt(t,e,i,s,n,r){let o;t.hAt&&(o=sK(t.hAt.Cn,t.hAt.V),0===o[0]&&o[1]===Hu&&(o=void 0));const h=o?{Range:"bytes="+o[0]+"-"+o[1]}:void 0,a=new ke({Gu:t.Dx,Yk:s,jk:h,kE:this.uTt,yE:xe.GET,Aw:e,SE:i,TE:this.out,RE:s===Rr.bk,EE:n,Vw:r});try{const e=await this.Fut.urt(t.Dx,o);if(J(r),void 0!==e)return null==n||n(e.buffer.byteLength,e.buffer.byteLength),new Zb({Kk:a,Yk:a.Yk,qk:e.buffer})}catch(t){th(t)}return await Ci((()=>ou(this.lW.Kk(a),a.Vw)),r,this.Nnt)}constructor(t,e,i,s,n=2){this.lW=t,this.Fut=e,this.out=i,this.uTt=s,this.Nnt=n}};r();var cc=class{WWt(){return this.UWt.tLt.DBt}async GWt(t,e,i){if(!this.WWt())throw new g("Could not perform blocking playlist update.");const s=this.HWt,n={UBt:t,RFt:e};return void 0!==s&&function(t,e,i){if(t.UBt===e.UBt){if(t.RFt===e.RFt)return!0;if(0===t.RFt&&void 0===e.RFt)return!0}if(t.UBt===e.UBt+1&&0===t.RFt&&void 0!==e.RFt){const t=i.tut(e.UBt);if(t&&t.Pyt&&e.RFt>=t.tOt.length)return!0}return!1}(s,n,this.UWt.tLt)||(await this.ZWt(),this.XWt(n)),this.aEt.KVt(this.UWt,i)}zWt(t){return this.XWt(),this.aEt.KVt(this.UWt,t)}XWt(t){if(!this.qWt&&!this.YWt){const e=()=>{this.qWt=void 0};this.qWt=this.KWt(t,this.jWt.Vw).then(e,e)}}async ZWt(){this.qWt&&(this.jWt.Yw(),this.jWt=new da,await this.qWt.catch(It),this.qWt=void 0)}async KWt(t,e){let i=t;for(;;){if(J(e),this.UWt.tLt.hOt&&this.UWt.tLt.gFt)return;null!=i||(i=this.QWt()),this.HWt=i;try{if(i)await this.aEt.XVt(this.UWt,i.UBt,i.RFt,e);else{const t=Ms.Vg()-this.An,i=1e3*this.UWt.tLt.wFt;t<i&&await Fe(i-t,e),await this.aEt.YVt(this.UWt,e)}}catch(t){throw this.HWt=void 0,th(t),this.aEt.qVt(this.UWt),t}i=void 0,this.An=Ms.Vg()}}QWt(){const t=this.UWt.tLt;if(!t.DBt||t.hOt||0===t.Ert.length)return;const e=t.Ert[t.Ert.length-1];return e.Pyt?{UBt:e.UBt+1,RFt:t.mFt?0:void 0}:{UBt:e.UBt,RFt:e.tOt.length}}Hw(){this.YWt=!0,ah(this.ZWt())}constructor(t,e){this.qWt=void 0,this.jWt=new da,this.An=-1/0,this.HWt=void 0,this.YWt=!1,this.aEt=t,this.UWt=e,this.XWt()}};r();var Dj=function(t){return t[t.iBt=0]="iBt",t[t.sBt=1]="sBt",t[t.iE=2]="iE",t[t.sE=3]="sE",t}({});r(),r();var ot="AssetExtractor",Nj=class{JWt(t,e,i){let s=e;for(const e of this.$Wt){if(s>=t)return!0;if(s<e.Cn)return!1;if(s<e.jn){if(i<=e.jn)return!0;s=e.jn}}return s>=t}tUt(t,e){const i=[];for(let s=0;s<this.$Wt.length;s+=1){const n=this.$Wt[s],r=t-n.Cn,o=n.qk.length,h=_.min(o,_.max(r,0)),a=_.max(0,e+r),u=Uc(n.qk,h,a);u.length&&(s=this.eUt(s,n,t,h,a),i.push(u))}return i}iUt(t,e){this.$Wt.push({Cn:t,jn:t+e.length,qk:e})}eUt(t,e,i,s,n){let r=t;this.$Wt.splice(r,1),r-=1,e.Cn<i&&(r+=1,this.$Wt.splice(r,0,{Cn:e.Cn,jn:i,qk:Uc(e.qk,0,s)}));const o=i+n-s;return o<e.jn&&(r+=1,this.$Wt.splice(r,0,{Cn:o,jn:e.jn,qk:Uc(e.qk,n)})),r}constructor(){this.$Wt=[]}},Mj=class{get sUt(){return this.nUt}async rUt(){const t=await this.Bd.read();if(t.done)throw this.nUt=1/0,new g("No more data can be read from the given stream.");return this.nUt+=t.value.length,t.value}async oUt(t){await this.Bd.cancel(t)}constructor(t,e){this.nUt=e,this.Bd=t.getReader()}},Lj=class{hUt(){this.aUt.Ob(),this.aUt=new os}uUt(t){const{aAt:e,uAt:i}=Oj(this.OOt.hAt),s=this.cUt.tUt(e,i-e);_t.DLt(ot,"Collected "+s.length+" chunks.");for(const e of s)t.enqueue(e)}async readAndSliceOutAssetBytes(t){await this.lUt.Vb;const{aAt:e,uAt:i}=Oj(this.OOt.hAt);try{for(;;){const s=this.Bd.sUt,n=await this.Bd.rUt(),r=n.length;_t.DLt(ot,"Read "+r+" at "+s+" for extraction of "+on(this.OOt));const o=_.min(s+r,e)-s;if(!(o>0)){if(s+r<=i)return _t.DLt(ot,"Extracting the read data range for extraction of "+on(this.OOt)),t.enqueue(n),this.hUt(),ah(this.readAndSliceOutAssetBytes(t));{const e=i-s,o=Uc(n,0,e),h=Uc(n,e);return o.length>0&&(_t.DLt(ot,"Extracting "+o.length+" bytes for extraction of "+on(this.OOt)),t.enqueue(o)),_t.DLt(ot,"Of the read "+r+" bytes, the last "+h.length+" will be stored locally for extraction of "+on(this.OOt)),this.cUt.iUt(s+e,h),_t.DLt(ot,"Extraction of "+on(this.OOt)+" completed as the entire request has been fulfilled."),this.dUt(t),void(this.fUt&&(_t.DLt(ot,"Aborting stream upstream as no more bytes are needed from "+on(this.OOt)+"."),await this.Bd.oUt("AssetExtraction - AbortOnEnd")))}}{const e=Uc(n,0,o),i=Uc(n,o);if(_t.DLt(ot,"Of the read "+r+" bytes, the first "+o+" will be stored locally for extraction of "+on(this.OOt)),this.cUt.iUt(s,e),i.length>0)return _t.DLt(ot,"Extracting "+i.length+" bytes for extraction of "+on(this.OOt)),t.enqueue(i),this.hUt(),ah(this.readAndSliceOutAssetBytes(t))}}}catch(e){_t.DLt(ot,"Extraction of "+on(this.OOt)+" completed as the entire source stream has been read."),this.dUt(t)}}dUt(t){t.close(),this.hUt(),this._Ut.Ob()}start(t){_t.DLt(ot,"Preparing to push all collected data to controller for extraction of "+on(this.OOt)),this.uUt(t),_t.DLt(ot,"Collected data pushed to controller for extraction of "+on(this.OOt));const{uAt:e}=Oj(this.OOt.hAt);this.Bd.sUt>=e?(_t.DLt(ot,"Extraction of "+on(this.OOt)+" completed as the entire request has been fulfilled."),this.dUt(t)):(_t.DLt(ot,"Continuing read from original stream for extraction of "+on(this.OOt)),ah(this.readAndSliceOutAssetBytes(t)))}get vUt(){return this._Ut.Vb}pull(){return this.lUt.Ob(),this.lUt=new os,this.aUt.Vb}constructor(t,e,i,s){this._Ut=new os,this.OOt=t,this.Bd=e,this.cUt=i,this.fUt=s,this.lUt=new os,this.aUt=new os}},Bj=class{TO(t){if(!hK(this.OOt,t))return!1;const{aAt:e,uAt:i}=Oj(t.hAt);return this.cUt.JWt(this.mUt.sUt,e,i)}async sgt(t,e){void 0===e&&(e=!1);const i=this.mUt,s=this.cUt;if(_t.DN(ot,"Extracting data from "+on(t)+" out of "+on(this.OOt)),this.gUt&&(_t.DLt(ot,"Awaiting previous extraction before extracting "+on(t)+" out of "+on(this.OOt)),await this.gUt),!this.TO(t))throw new g("The extractor does not contain the data requested");const n=new Lj(t,i,s,e);return this.gUt=n.vUt,new mh(n)}constructor(t,e){this.OOt=e;const{aAt:i}=Oj(this.OOt.hAt);this.mUt=new Mj(t,i),this.cUt=new Nj}};function Oj(t){if(t){const e=t.Cn;return{aAt:e,uAt:void 0!==t.V?e+t.V:Hu}}return{aAt:0,uAt:Hu}}var Fj=class{async Dn(){const t=await this.pUt.VWt(this.OOt,Wr.sE,$h.tE,void 0,this.WT.Vw);return new Bj(t,this.OOt)}TO(t){return hK(this.OOt,t)}async sgt(t,e){void 0===e&&(e=!1);const i=await this.cpt;return await ou(i.sgt(t,e),this.WT.Vw)}Yw(){this.cpt.catch(It),this.WT.Yw()}constructor(t,e){this.OOt=t,this.pUt=e,this.WT=new da,this.cpt=this.Dn()}};r();var Vj=class extends pe{constructor(t){super(gt.wUt),this.TE=t}};r();var Wj=class extends pe{constructor(t,e,i,s,n,r,o){super(gt.yUt),this.uri=t,this.bUt=e,this.TE=i,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.AUt=r,this.httpStatusCode=o}};function Uj(t,e,i){const s=Wu(i)?i:i.DOt;if(e.zFt(s.rOt)){if(void 0!==i.cit)return e.eVt(i.cit,i).dF();if(i!==s&&void 0!==s.cit){const t=e.eVt(s.cit,s).dF();return i.FO+(t-s.FO)}}const n=t.tLt.tut(s.UBt-1);if(void 0!==n&&e.zFt(n.rOt)){if(n.tOt.length>0){const t=n.WOt(n.tOt.length-1);if(void 0!==t.cit){const s=e.eVt(t.cit,t).dF();return i.FO+(s-t.FO)}}if(void 0!==n.cit){const t=e.eVt(n.cit,n).dF();return i.FO+(t-n.FO)}}const r=t.tLt.tut(s.UBt+1);if(void 0!==r&&e.zFt(r.rOt)){if(r.tOt.length>0){const t=r.WOt(0);if(void 0!==t.cit){const s=e.eVt(t.cit,t).dF();return i.FO+(s-t.FO)}}if(void 0!==r.cit){const t=e.eVt(r.cit,r).dF();return i.FO+(t-r.FO)}}return i.FO}function Gj(t){return void 0!==t.cit}function Hj(t,e,i,s){for(let n=e;n<t.length;n++){const e=t[n];if(e.rOt!==i)break;if(Gj(e)){if(s(e,n))break}}}function Zj(t,e,i,s){for(let n=e;n>=0;n--){const e=t[n];if(e.rOt!==i)break;if(Gj(e)){if(s(e,n))break}}}r();var Xj="HlsPlaylistDownloader",gt=function(t){return t.wUt="segmentdownloadprogress",t.yUt="segmentdownloaded",t}({}),zj=class extends Co{SUt(t){this.TUt.Hw(),this.TUt=new cc(this.aEt,t),this.FIt?this.kUt=t:(this.UWt=t,this.EUt=0,this.xUt=void 0,this.RUt=void 0)}get FIt(){return void 0!==this.IUt}SWt(){return this.IUt?this.IUt.Vb:Promise.resolve()}CUt(){return this.RWt.CUt()}PUt(t){this.RWt.PUt(t)}Yw(){var t,e,i;this.DUt.Yw(),this.DUt=new da,null==(t=this.NUt)||t.Yw(),this.NUt=void 0,null==(e=this.MUt)||e.Yw(),null==(i=this.LUt)||i.Yw(),this.MUt=void 0,this.LUt=void 0,this.EUt=0,this.xUt=void 0,this.RUt=void 0}Hw(){this.TUt.Hw()}get cLt(){var t;return null!=(t=this.kUt)?t:this.UWt}get uCt(){if(!this.UWt.tLt.hOt||void 0===this.xUt)return!1;const t=this.UWt.tLt.tut(this.xUt);if(!t.COt)return!1;if(void 0!==this.RUt){if(!t.WOt(this.RUt).COt)return!1}return!0}BUt(t){const e=this.UWt.tLt.IFt(t);if(!e)return!1;if(void 0!==this.xUt){const i=e.UBt===this.xUt;return void 0!==this.RUt?e.UOt(t)===e.WOt(this.RUt)&&i:i}return!1}OUt(t){let e;if(void 0===this.xUt||t<this.EUt-1e-6)e=this.FUt(t);else if(e=this.VUt(this.xUt,this.RUt),void 0!==e){const[i,s]=e,n=Uj(this.UWt,this.aEt.Pr.NL,null!=s?s:i),r=3*this.UWt.tLt.qLt;_.abs(n-t)>=r&&(e=this.FUt(t))}else if(this.UWt.tLt.hOt){if(this.UWt.tLt.tut(this.xUt).COt&&(e=this.FUt(t),void 0!==e&&e[0].UBt===this.xUt))return}if(e){this.EUt=t;const[i,s]=e;return 0===(null==s?void 0:s.MOt)&&void 0!==i.ct?[i,void 0]:[i,s]}}FUt(t){let e,i;const s=this.UWt.tLt.Ert;if(0===s.length)return;const n=this.aEt.Pr.NL,r=Oo.fV(t),o=function(t,e,i){const s=t.tLt.Ert;if(0===s.length)return;const n=t.tLt.CFt(i.dF());if(!e.zFt(n.rOt))return;const r=n.UBt-s[0].UBt,o=n.rOt;let h,a,u,c=0;if(Zj(s,r,o,((t,e)=>(h=t,c=e,!0))),void 0===h&&(Hj(s,r+1,o,((t,e)=>(h=t,c=e,!0))),void 0===h))return;return e.eVt(h.cit,h).gF(i)?(a=h,Hj(s,c+1,o,(t=>e.eVt(t.cit,t).fF(i)?(u=t,!0):(a=t,!1)))):(u=h,Zj(s,c-1,o,(t=>e.eVt(t.cit,t).gF(i)?(a=t,!0):(u=t,!1)))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.UWt,n,r);let h;if(void 0!==o){const[t,e]=o,i=n.eVt(t.cit,t),s=n.eVt(e.cit,e),a=r.SF(i).dF()/s.SF(i).dF()*(e.FO-t.FO);h=t.FO+a}else h=t;const a=s[s.length-1];return a.VO<=h?(e=a,i=a.HOt(h)):s[0].FO>h?(e=s[0],i=e.WOt(0)):(e=this.UWt.tLt.IFt(h),i=null==e?void 0:e.HOt(h)),e?[e,i]:void 0}VUt(t,e){let i,s;if(i=this.UWt.tLt.tut(t),i&&void 0!==e){if(0===i.tOt.length)return[i,void 0];s=i.WOt(e+1)}return void 0!==i&&void 0!==s||(i=this.UWt.tLt.tut(t+1),s=null==i?void 0:i.WOt(0)),i?[i,s]:void 0}AWt(){if(this.FIt)throw new g("Cannot perform new operation while PlaylistDownloader is still busy")}WUt(t){this.AWt(),this.IUt=new os,this.UUt(t,this.DUt.Vw).then(this.GUt,this.GUt)}HUt(){this.TUt.XWt()}async UUt(t,e){if(this.UWt.tLt.hOt)return;let i=this.OUt(t);for(!i&&this.TUt.WWt()&&void 0!==this.xUt&&(await this.TUt.GWt(void 0===this.RUt?this.xUt+1:this.xUt,void 0!==this.RUt?this.RUt+1:void 0,e),i=this.OUt(t)),!i&&this.TUt.WWt()&&void 0!==this.xUt&&(await this.TUt.GWt(this.xUt+1,0,e),i=this.OUt(t));!i;){_t.DN(Xj,"No next segment / part available, need to update playlist before continuing."),await this.TUt.zWt(e);const s=this.cLt.tLt.Ert;s[0].FO>t&&(this.RUt=void 0,this.xUt=void 0);s[s.length-1].UBt<this.xUt&&(this.RUt=void 0,this.xUt=void 0),i=this.OUt(t)}}ZUt(){return this.RWt.XUt()}zUt(){this.AWt();try{const t=this.UWt.tLt.PFt(rK.iBt);t&&this.qUt(t);const e=this.UWt.tLt.PFt(rK.sBt);e&&this.YUt(e)}catch(t){throw th(t),this.UWt.tLt.TFt=Ms.Vg(),this.aEt.qVt(this.UWt),t}}qUt(t){this.LUt&&!this.LUt.TO(t.Pyt)&&(this.LUt.Yw(),this.LUt=void 0),this.LUt||(this.LUt=new Fj(t.Pyt,this.pUt))}YUt(t){this.MUt&&!this.MUt.TO(t.Pyt)&&(this.MUt.Yw(),this.MUt=void 0),this.MUt||(this.MUt=new Fj(t.Pyt,this.pUt))}$at(t,e,i){this.AWt(),_t.DN(Xj,"Starting download of segment "+on(t.Pyt)+" and part "+(null==e?void 0:e.MOt)),this.IUt=new os,this.KUt(t,e,i,this.DUt.Vw).catch((t=>{throw th(t),this.UWt.tLt.TFt=Ms.Vg(),this.aEt.qVt(this.UWt),t})).then(this.GUt,this.GUt)}async KUt(t,e,i,s){let n;if(t.iOt){var r,o;if(!i||!aK(i.CWt.Pyt,null==(r=t.iOt)?void 0:r.Pyt)||t.rOt!==i.rOt){var h;null==(h=this.NUt)||h.Yw(),this.NUt=new os;const e=this.jUt(t.iOt,t,s).then((()=>{this.NUt=void 0}));this.NUt.Kw(e)}n=null==(o=this.NUt)?void 0:o.Vb}await this.QUt(t,e,n,s)}async jUt(t,e,i){const s=await this.JUt(t,e,i),n=s.iOt.qk.qk.byteLength;this.RWt.$Ut(s),this.wo(new Wj(s.iOt.CWt.Pyt,s.Aw,this.bp,e.UBt,s.cLt.xC,n,s.iOt.uct)),_t.DLt(Ru,"Download initializer complete",on(t.Pyt))}async QUt(t,e,i,s){const n=await this.tGt(t,e,s),r=n.But.qk.qk.byteLength;var o;i&&await ou(i,s),this.RWt.$Ut(n),this.wo(new Wj(n.But.CWt.Pyt,n.Aw,this.bp,t.UBt,n.cLt.xC,r,n.But.uct)),_t.DLt(Ru,"Download complete",on(null!=(o=null==e?void 0:e.Pyt)?o:t.Pyt))}async tGt(t,e,i){let s;if(e){if(this.MUt)if(this.MUt.TO(e.Pyt)){const t=await this.MUt.sgt(e.Pyt),n=await He(t,i),r=new j(n);s=Yj(e,await this.MWt(r,e.QBt,i),200)}else this.MUt.Yw(),this.MUt=void 0;s||(_t.DLt(Ru,"Start download",on(e.Pyt)),s=await this.eGt(e,i))}else _t.DLt(Ru,"Start download",on(t.Pyt)),s=await this.iut(t,i);return this.xUt=t.UBt,this.RUt=null==e?void 0:e.MOt,{Aw:"But",But:s,cLt:this.UWt,rOt:t.rOt}}async JUt(t,e,i){let s;if(this.LUt){var n;if(this.LUt.TO(t.Pyt)){const n=await ou(this.LUt.sgt(t.Pyt),i),r=await He(n,i),o=new j(r);s=qj(t,e,await this.MWt(o,t.$Bt?[t.$Bt]:[],i),200)}_t.DN(Xj,"MAP is required for segment, downloading MAP data."),null==(n=this.LUt)||n.Yw(),this.LUt=void 0}return s||(_t.DLt(Ru,"Start download",on(t.Pyt)),s=await this.iGt(t,e,i)),{Aw:"iOt",iOt:s,cLt:this.UWt,FO:e.FO,rOt:e.rOt,QBt:e.QBt}}async iGt(t,e,i){const{response:s,httpStatusCode:n}=await this.pUt.Kk(t.Pyt,Wr.iE,$h.rE,void 0,i),r=t.$Bt?[t.$Bt]:[];return qj(t,e,await this.MWt(s,r,i),n)}async iut(t,e){if(!t.Pyt)throw new g("Internal error: attempted to download an incomplete segment");let i,s;try{this.sGt(t);const n=await this.pUt.Kk(t.Pyt,Wr.iE,$h.tE,this.nGt,e);i=n.response,s=n.httpStatusCode}finally{this.rGt()}return function(t,e,i){return{qk:{qk:e,Aw:Ce.tJ},Aw:Dj.iE,uct:i,CWt:t,rOt:t.rOt}}(t,await this.MWt(i,t.QBt,e),s)}async eGt(t,e){let i,s;try{this.sGt(t);const n=await this.pUt.Kk(t.Pyt,Wr.iE,$h.tE,this.nGt,e);i=n.response,s=n.httpStatusCode}finally{this.rGt()}return Yj(t,await this.MWt(i,t.QBt,e),s)}async MWt(t,e,i){const s=Fo(e,(t=>t.yE===$t.nBt));return s?s.Pyt&&s.RBt?await this.oGt.MWt(t,s.Pyt,s.RBt,i):(_t.lt(Xj,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}sGt(t){var e,i,s;this.hGt=t,this.aGt=0,this.uGt=Ms.Vg(),this.cGt=0,this.lGt=null!=(s=null==(i=t.Pyt)||null==(e=i.hAt)?void 0:e.V)?s:0}rGt(){this.hGt=void 0,this.aGt=0,this.uGt=0,this.cGt=0,this.lGt=0}dGt(){if(void 0!==this.hGt)return{But:this.hGt,fGt:this.cGt,_Gt:this.lGt,vGt:Ms.Vg()-this.uGt}}mGt(t){return void 0!==this.hGt&&(0!==this.aGt&&(!(this.lGt>0&&this.cGt>=this.lGt)&&!(t-this.aGt<500)))}constructor(t,e,i,s,n,r,o,h){super(),this.kUt=void 0,this.IUt=void 0,this.hGt=void 0,this.aGt=0,this.uGt=0,this.cGt=0,this.lGt=0,this.DUt=new da,this.NUt=void 0,this.EUt=0,this.xUt=void 0,this.RUt=void 0,this.LUt=void 0,this.MUt=void 0,this.GUt=t=>{this.kUt&&(this.UWt=this.kUt,this.kUt=void 0,this.EUt=0,this.xUt=void 0,this.RUt=void 0),this.IUt&&(t&&!Je(t)?this.IUt.Fb(t):this.IUt.Ob(),this.IUt=void 0)},this.nGt=(t,e)=>{this.cGt=t,t>0&&0===this.aGt&&(this.aGt=Ms.Vg()),void 0!==e&&(this.lGt=e),this.wo(new Vj(this.bp))},this.bp=t,this.aEt=i,this.RWt=s,this.UWt=e,this.TUt=new cc(i,e),this.oGt=new Cj(o,n,h),this.pUt=new Pj(n,r,function(t){switch(t){case Yc._E:return Ca._E;case Yc.fE:return Ca.fE;case Yc.jV:case Yc.eBt:return Ca.Ak;default:return Ca.tE}}(e.Aw),h)}};function qj(t,e,i,s){return{qk:{qk:i,Aw:Ce.tJ},Aw:Dj.iBt,uct:s,CWt:t,rOt:e.rOt}}function Yj(t,e,i){return{qk:{qk:e,Aw:Ce.tJ},uct:i,Aw:Dj.sBt,CWt:t,rOt:t.DOt.rOt}}r();var Kj=class{get cWt(){return this.gGt}get pGt(){const t=[];for(const i of this.wGt)if("But"===i.Aw){const s=i.But.CWt,n=Uj(i.cLt,this.pVt,s);var e;t.push({But:s,cLt:i.cLt,FO:n,VO:n+(null!=(e=s.ct)?e:0)})}return t}get yGt(){const t=[];return this.bGt.forEach((e=>{for(const i of e.AGt)"But"===i.Aw&&t.push({But:i.CWt,cLt:i.cLt,FO:i.FO,VO:i.FO+i.ct})})),t}$Ut(t){"iOt"===t.Aw&&(this.gGt=t.iOt),this.wGt.push(t),this.SGt&&(this.SGt.Ob(),this.SGt=void 0)}CUt(){return this.wGt[0]}PUt(t){we(this.wGt,t)}XUt(){return null!=this.SGt||(this.SGt=new os),this.SGt.Vb}TGt(t){this.kGt(t.bat).TGt(t)}EGt(t){return this.kGt(t).EGt()}xWt(t){this.kGt(t.bat).xWt(t)}xGt(t){var e;null==(e=this.bGt.get(t))||e.Hw()}RGt(t){return this.kGt(t).RGt()}kGt(t){if(this.bGt.has(t))return this.bGt.get(t);{const e=new jj;return this.bGt.set(t,e),e}}Bb(){this.IGt(),this.CGt()}IGt(){this.gGt=void 0,En(this.wGt)}CGt(){this.bGt.forEach((t=>t.Bb()))}Hw(){this.bGt.forEach((t=>t.Hw())),this.bGt.clear(),this.Bb(),this.SGt&&(this.SGt.Yw(),this.SGt=void 0)}constructor(t){this.wGt=[],this.bGt=xu(),this.SGt=void 0,this.gGt=void 0,this.pVt=t}},jj=class{get AGt(){return this.PGt}TGt(t){this.PGt.push(t),this.DGt&&(this.DGt.Ob(),this.DGt=void 0)}EGt(){return this.PGt[0]}xWt(t){we(this.PGt,t)}RGt(){return null!=this.DGt||(this.DGt=new os),this.DGt.Vb}Bb(){En(this.PGt)}Hw(){this.Bb(),this.DGt&&(this.DGt.Yw(),this.DGt=void 0)}constructor(){this.PGt=[],this.DGt=void 0}};r();var Qj=1e-6,Jj=class{get gR(){return this.Txt}get u3(){return this.kxt}async w2(t,e){const i=t.qk.qk;if(this.NGt(i),this.MGt.Aw===Lr.TTML){this.pVt.zFt(t.rOt)||await ou(this.pVt.YFt(t.rOt),e);const s=this.LGt(i,t.rOt);for(const t of s)this.MGt.dW(t)}}async _2(t,e){if(void 0===t.qk)return;const i=t.FO,s=i+t.ct;this.Txt=this.Txt.JL(se.vB(i,s)).QL(Qj),this.f3(t.BGt,t.OGt),this._3(i,s),this.pVt.zFt(t.rOt)||await ou(this.pVt.YFt(t.rOt),e),this.g2(t.qk.qk,t.rOt,t.CWt)}g2(t,e,i){let s;this.NGt(t),s=this.MGt.Aw===Lr.WEBVTT?this.FGt(t,i):this.LGt(t,e);for(const t of s)this.MGt.dW(t)}FGt(t,e){const i=_E(t),s=i.L;var n;const r=null!=(n=i.OV)?n:{FV:Oo.CF,ph:Oo.CF};for(const t of s){const i=Oo.fV(t.FO).SF(r.ph).SO(r.FV),s=this.pVt.eVt(i,e).dF(),n=s+(t.VO-t.FO);t.sF(s,n)}return s}LGt(t,e){const i=this.pVt.tVt(e).dF();return JE(t,this.MGt,{DV:0,NV:1/0,MV:i},uu.APPLICATION_MP4)}NGt(t){this.MGt.Aw===Lr.DEFAULT&&(this.MGt.Aw=this.VGt(t)?Lr.WEBVTT:Lr.TTML)}VGt(t){return EE($g(mu(ra(t),0,_.min(t.byteLength,16)),new Ri))}f3(t,e){this.kxt=this.kxt.JL(se.vB(t,e)).QL(Qj)}_3(t,e){this.kxt=this.kxt.tB(se.vB(t,e))}constructor(t,e){this.Txt=se.mB(),this.kxt=se.mB(),this.MGt=t,this.pVt=e}};r(),r(),r();var $j=class extends pe{constructor(t,e){super(St.WGt),this.cLt=t,this.Zrt=e}};r();var tQ=class extends pe{constructor(t){super(St.UGt),this.cLt=t}};r();var eQ=class extends pe{constructor(t,e){super(St.GGt),this.cLt=t,this.Jdt=e}};r();var iQ=class extends pe{constructor(t,e){super(St.HGt),this.cLt=t,this.ZGt=e}},St=function(t){return t.WGt="XGt",t.GGt="zGt",t.HGt="qGt",t.UGt="YGt",t}({}),sQ=class extends Co{get KGt(){return this.jGt}QGt(t){for(const e of this.jGt)ms(t,e)||this.RWt.xGt(e);this.jGt=t}get FIt(){return void 0!==this.JGt}SWt(){var t,e;return null!=(e=null==(t=this.JGt)?void 0:t.Vb)?e:Promise.resolve()}AWt(){if(this.FIt)throw new g("Cannot perform new operation while transmuxer is still busy")}$Gt(t,e){}tHt(t){this.AWt(),this.JGt=new os;const e=e=>{this.eHt(t,e)};this.iHt(t,this.WT.Vw).then(e,e)}sHt(t){this.AWt(),this.JGt=new os;const e=e=>{this.eHt(t,e)};this.nHt(t,this.WT.Vw).then(e,e)}eHt(t,e){this.JGt&&(!e||Je(e)||function(t){return t instanceof lj}(e)?(Je(e)||this.RWt.PUt(t),this.JGt.Ob(),this.JGt=void 0):this.JGt.Fb(e))}rHt(t,e){this.wo(new $j(t,e))}oHt(t,e){this.wo(new eQ(t,e))}hHt(t,e,i){uj(e)&&this.wo(new iQ(t,i))}aHt(t){this.wo(new tQ(t))}TGt(t){ms(this.jGt,t.bat)&&this.RWt.TGt(t)}uHt(t){return this.RWt.EGt(t)}xWt(t){this.RWt.xWt(t)}cHt(t){return this.RWt.RGt(t)}Yw(){this.WT.Yw(),this.WT=new da}constructor(t,e,i){super(),this.JGt=void 0,this.WT=new da,this.RWt=t,this.pVt=e,this.jGt=i}};function nQ(t,e){return uj(t)?0:_.min(t.FO,e)}function rQ(t,e){var i;return _.max(t.FO,e)+(null!=(i=t.ct)?i:0)}var oQ=class extends sQ{iHt(t,e){J(e);const i={Aw:"bCt",qk:t.iOt.qk,bat:this.KGt[0],rOt:t.rOt,lHt:{Zrt:"",QBt:t.QBt},FO:t.FO,cLt:t.cLt,CWt:t.iOt.CWt};return this.TGt(i),Promise.resolve()}async nHt(t,e){J(e);const i=t.But.CWt;let s;void 0!==i.cit?(this.pVt.zFt(t.rOt)||await ou(this.pVt.YFt(t.rOt),e),s=this.pVt.eVt(i.cit,i).dF()):s=i.FO;const n=nQ(i,s),r=rQ(i,n);var o;const h={Aw:"But",qk:t.But.qk,bat:this.KGt[0],BGt:n,OGt:r,FO:s,ct:null!=(o=i.ct)?o:0,MV:0,rOt:t.rOt,cLt:t.cLt,CWt:t.But.CWt};this.TGt(h)}constructor(t,e,i){super(t,e,[i])}};function hQ(t,e){let i=se.mB();for(const s of t){let n=s.FO;if(s.cLt.tLt.hOt&&uj(s.But))n=0;else{const i=t=>s.cLt===t.cLt&&cj(t.But,s.But),r=Fo(t,i);if(void 0!==r)n=_.min(n,r.VO);else{const t=Fo(e,i);void 0!==t&&(n=_.min(n,t.mWt.jn(0)))}}i=i.JL(se.vB(n,s.VO))}return i}r();var aQ=.001,uQ=class{get dHt(){return this.fHt}get cLt(){return this._Ht.cLt}SUt(t){this._Ht.SUt(t)}get FIt(){return this._Ht.FIt||this.vHt.FIt||this.fHt.some((t=>t.FIt))}mHt(t){const e=t.slice();for(let t=this.fHt.length-1;t>=0;t--){const i=this.fHt[t];if(!i.gWt)throw new g("Invalid state");const s=Hr(e,(t=>t.Aw===i.Aw));s>=0?(i.vot(e[s]),ka(e,s)):ka(this.fHt,t)}for(const t of e){const e=new Rj(t);this.fHt.push(new Ij(t.Aw,t,this.gHt,e,this))}e.length>0&&this.gHt.Bb();const i=t.map((t=>t.Aw));this.vHt.QGt(i)}Lj(t){var e;const i=(null==(e=this.vZ)?void 0:e.Lj(t))||!1;return i&&(this.Yw(),this.gHt.Bb()),i}pHt(t){for(const t of this.fHt)if(t.Aw!==ee.Ak||t.FIt)throw new g("Invalid state");const e=new Rj(t),i=new Ij(ee.Ak,t,this.gHt,e,this);this.fHt=[i]}get cWt(){const t=this.gHt.cWt;if(t)return t;if(this.fHt.length>0){const t=this.fHt[0].pWt.cWt;if(t&&this.fHt.every((e=>e.pWt.cWt===t)))return t}}Qat(){for(const t of this.fHt)t.pWt._Wt()}get wHt(){if(0===this.fHt.length)return se.mB();const t=hQ(this.gHt.pGt.concat(this.gHt.yGt),Qe(this.fHt,(t=>t.pWt.Ert))).zL();let e=new se([0,1/0]);for(const t of this.fHt)e=e.Sn(t.pWt.gR);for(const t of this.fHt)e=e.tB(t.wWt);return e=e.JL(t),e.QL(aQ)}get yHt(){if(0===this.fHt.length)return se.mB();const t=hQ(this.gHt.yGt,Qe(this.fHt,(t=>t.pWt.Ert))).zL();let e=new se([0,1/0]);for(const t of this.fHt)e=e.Sn(t.pWt.gR);return e=e.JL(t),e}Flt(t){const e=this.wHt.dB(t,aQ);return e?e.jn(e.V-1):t}BUt(t){return!!this.wHt.dB(t,aQ)||this._Ht.BUt(t)}bHt(t){return this.yHt.kr(t,aQ)}AHt(t,e,i){for(const t of this.fHt){const i=t.pWt,s=i.zgt;if(void 0!==s&&e>=s&&!i.gR.zL().kr(s))return!0}return e-t<i}Yw(){this.SHt(),this.THt()}SHt(){this._Ht.Yw()}THt(){this.vHt.Yw(),this.dHt.forEach((t=>t.Yw()))}Hw(){this.Yw(),this._Ht.Hw()}constructor(t,e,i,s){this._Ht=t,this.gHt=e,this.vHt=i,this.vZ=s,this.fHt=[]}};r();var cQ=class extends pe{constructor(){super(qt.jMt)}};r();var lQ=class extends pe{constructor(){super(qt.YMt)}};r(),r();var dQ="LazyMediaBuffer",fQ=class extends Co{get Dk(){return this.ET}get h3(){return this.bp}get bd(){if(!this.Aot)throw new A(Qa.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.Aot.bd}get wj(){return this.Ij}set wj(t){this.Ij=t,this.Aot&&(this.Aot.wj=t)}EJ(){return this.Aot?this.Aot.EJ():this.kHt}get gR(){return this.Aot?this.Aot.gR:se.mB()}get u3(){return this.Aot?this.Aot.u3:this.l3.BJ}get Sj(){return this.Dj}set Sj(t){this.Dj=t,this.Aot&&(this.Aot.Sj=t)}f3(t,e){_t.DLt(dQ,"Marking gap from "+t+" to "+e+"."),this.l3.FJ(t,e),this.Aot&&this.Aot.f3(t,e)}_3(t,e){_t.DLt(dQ,"Removing gap from "+t+" to "+e+"."),this.l3.VJ(t,e),this.Aot&&this.Aot._3(t,e)}EHt(t){this.Aot=t,this.Aot.Sj=this.Dj,this.Aot.wj=this.Ij;const e=this.l3.BJ;for(let t=0;t<e.V;t++)this.Aot.f3(e.Cn(t),e.jn(t));var i;this.kHt&&(_t.DLt(dQ,"End of stream"),null==(i=this.Aot)||i.r3());this.Aot.yn(ue.JQ,this.Ds),this.xHt.Ob(t)}RHt(t){return ou(this.xHt.Vb,t)}async _2(t,e,i){const s=await this.RHt(i);await s._2(t,e,i)}async v3(){const t=await this.RHt();await t.v3()}async w2(t,e,i){const s=await this.RHt(i);await s.w2(t,e,i)}async $S(t,e,i){const s=await this.RHt(i);await s.$S(t,e,i)}async B2(t,e){const i=await this.RHt();await i.B2(t,e)}r3(){this.kHt=!0,this.Aot&&this.Aot.r3()}cJ(t){return!!this.Aot&&this.Aot.cJ(t)}async dJ(t){const e=await this.RHt();await e.dJ(t)}async gn(){var t;this.$o(),null==(t=this.Aot)||t.fn(ue.JQ,this.Ds)}constructor(t,e){super(),this.bp=t,this.IHt=e,this.ET=void 0,this.Aot=void 0,this.xHt=new os,this.Ij=20,this.kHt=!1,this.Dj=30,this.l3=new $D}},_Q="LazyMediaSource",vQ=class{get bd(){return{Aw:Mr.gW,u4:[],eH:[]}}get J3(){return this.CHt}get t4(){return this.PHt}get gR(){return this.jG?this.jG.gR:se.mB()}get ct(){return this.jG?this.jG.ct:this.DA}get EJ(){return!!this.jG&&this.jG.EJ}get rI(){return this.jG?this.jG.rI:new se([0,1/0])}n4(t){this.DA=t,this.jG&&this.jG.n4(t)}r3(){this.hit=!0,this.jG&&this.jG.r3()}K2(){this.hit=!1,this.jG&&this.jG.K2()}a4(t,e,i,s){this.DHt=t,this.NHt=e,this.MHt=Boolean(i),this.LHt=Boolean(s),this.jG&&this.jG.a4(t,e,i,s)}cJ(t){return!this.jG||this.jG.cJ(t)}async dJ(t){if(!this.cJ(t))throw new g("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.jG)await this.jG.dJ(t);else{var e,i;this.FB.u7();const s=await this.FB.Dn(t);S(this.DA)||s.n4(this.DA),this.hit&&s.r3(),s.a4(this.DHt,this.NHt,this.MHt,this.LHt),_t.DLt(_Q,"The MediaSource has been loaded."),this.BHt=!0,this.jG=s,null==(e=this.CHt)||e.EHt(this.jG.J3),null==(i=this.PHt)||i.EHt(this.jG.t4),this.OHt.Ob(s),this.FB.l7()}}_J(t){this.jG._J(t)}async Hw(){this.jG&&await this.jG.Hw()}constructor(t,e,i){this.FB=t,this.CHt=void 0,this.PHt=void 0,this.OHt=new os,this.jG=void 0,this.BHt=!1,this.DA=NaN,this.hit=!1,this.DHt=0,this.NHt=1/0,this.MHt=!1,this.LHt=!1,e&&(_t.DLt(_Q,"Created lazy media buffer for audio."),this.CHt=new fQ(ee.fE,this)),i&&(_t.DLt(_Q,"Created lazy media buffer for video."),this.PHt=new fQ(ee._E,this))}};function mQ(t,e){return void 0===e&&(e=!1),function(i,s){void 0===s&&(s="*");let n=pQ(i,"tag");const r=pQ(null==s?"*":s,"range"),o=[];let h,a,u,c=-1;for(;++c<r.length;)if(h=r[c].toLowerCase(),e||"*"!==h){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),h)){if(!e)return n[a];o.push(n[a])}else u.push(n[a]);n=u}return e?o:void 0}}r();mQ(((t,e)=>"*"===e||t===e||Oh(t,e+"-")),!0),mQ(((t,e)=>{const i=t.split("-"),s=e.split("-");let n=0,r=0;if("*"!==s[r]&&i[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!i[n])return!1;if(i[n]!==s[r]){if(1===i[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var gQ=mQ(((t,e)=>{let i,s=e;for(;;){if("*"===s||t===s)return!0;if(i=s.lastIndexOf("-"),i<0)return!1;"-"===s.charAt(i-2)&&(i-=2),s=s.slice(0,i)}}));function pQ(t,e){const i=t&&"string"==typeof t?[t]:t;if(!i||"object"!=typeof i||!("length"in i))throw new g("Invalid "+e+" `"+i+"`, expected non-empty string");return i}r(),r();var wQ=16384,yQ=71,bQ=188,AQ=2,SQ=3,TQ=function(t){return t[t.tE=0]="tE",t[t.YC=1]="YC",t[t.FHt=2]="FHt",t[t.VHt=3]="VHt",t}({});function kQ(t){return EQ(t)?1:function(t){return function(t){if(t.length<AQ*bQ)return-1;const e=t.length<SQ*bQ?AQ:SQ,i=_.min(1e3,t.length-e*bQ);for(let s=0;s<=i;s++){let i=!0;for(let n=0;n<e;n++)if(t[s+n*bQ]!==yQ){i=!1;break}if(i)return s}return-1}(t)>=0}(t)?2:function(t){return null!==bL(ra(t),new Ri)}(t)?3:0}function EQ(t){const e=si(t,0,_.min(t.length,wQ));return rr.JD(ra(e))}var xQ=class{get Aw(){return this.bp}get gR(){return this.Aot.gR}get u3(){return this.Aot.u3}WHt(t){return this.Aot===t}async w2(t,e){if(this.Aot.bd.Dk!==t.lHt.Zrt){const i={Dk:t.lHt.Zrt};this.Aot.cJ(i)&&(await this.Aot.dJ(i),J(e))}await this.Aot.w2(t.qk,{F1:t.cLt.xC},e),void 0!==this.EDt&&this.bp===ee._E&&EQ(t.qk.qk)&&this.EDt.Mot(t.qk.qk)}async _2(t,e){J(e),_t.DN("HlsMediaBuffer","Got media data, appending to "+this.bp+" MediaBuffer: "+on(t.CWt.Pyt));const i=t.BGt,s=t.OGt,n={cit:t.FO,ct:t.ct,MV:t.MV,F1:t.cLt.xC};void 0!==t.qk&&(await this.Aot._2(t.qk,n,e),this.UHt(t.qk,t)),this.GHt(i,s)}UHt(t,e){var i;if(!EQ(t.qk))return;const s=e.FO,n=s+e.ct,r=e.MV;if(null==(i=this.jgt)||i.vdt(t.qk,s,r),void 0!==this.EDt&&this.bp===ee._E){const i=e.CWt.COt;this.EDt.vdt(t.qk,s,n,r,e.cLt,i)}const o=[];void 0!==this.jgt&&o.push(this.jgt),void 0!==this.EDt&&o.push(this.EDt),Ex(this.gR,o)}GHt(t,e){const i=this.Aot.gR,s=new se([t,e]).tB(i);for(let t=0;t<s.V;t++)this.Aot.f3(s.Cn(t),s.jn(t));for(let t=0;t<i.V;t++)this.Aot._3(i.Cn(t),i.jn(t))}f3(t,e){this.Aot.f3(t,e)}_3(t,e){this.Aot._3(t,e)}constructor(t,e,i,s){this.bp=t,this.Aot=e,this.jgt=i,this.EDt=s}};function RQ(t){if(t.Aw!==Yc.eBt||void 0===t.rLt)return;const e=t.rLt.match(/^CC([1-4])$/);if(e)return Number(e[1]);const i=t.rLt.match(/^SERVICE([\d+])$/);return i?Number(i[1]):void 0}r(),r(),r();var IQ=class{KLt(t){var e,i,s;return null==(s=null==(i=this.jG)||null==(e=i.t4)?void 0:e.cJ(t))||s}jLt(t){var e,i,s;return null==(s=null==(i=this.jG)||null==(e=i.J3)?void 0:e.cJ(t))||s}constructor(t){this.jG=t}},Ba="LLHLSPlayer",CQ=[tl.LL,tl.BL,tl.OL,tl.tC],PQ=[Ti.zy,Ti.Sy,Ti.Ny,Ti.Py],DQ=2e3,NQ=class extends Co{get qB(){var t;const e=[this.HHt,this.ZHt].filter(ji);if(0===e.length||this.ct!==1/0)return;const i=null==(t=this.wR)?void 0:t.getTime();if(i){return(Date.now()-i)/1e3}let s;for(const t of e){const e=t.tLt.rI;if(0===e.V)continue;const i=e.jn(e.V-1)+t.tLt.LSt,n=t.tLt.bFt,r=i+(null!=n?n:0)-this.SR;(!s||s<r)&&(s=r)}return s}XHt(){if(void 0===this.zHt)return!1;const t=Ms.Vg();if(!this.zHt._Ht.mGt(t))return!1;const e=this.zHt._Ht.dGt();if(void 0===e||void 0===e.But.ct)return!1;const i=this.SR,s=this.KR,n=this.zHt.wHt.dB(i);if((void 0!==n?n.jn(0)-i:0)>=2*e.But.ct*s)return!1;if(e.fGt>0&&0===e._Gt)return e.vGt>1e3*e.But.ct*.8;return 8*e._Gt/this.vZ.aj.wG>=1.8*e.But.ct}async qHt(){var t;const e=await this.$Lt();if(void 0===e)return;const i=null==(t=this.zHt)?void 0:t._Ht.dGt();if(void 0===i)return;const s=this.YHt;if(i._Gt>0){if(_.max(0,i._Gt-i.fGt)<=i._Gt*(e.wG/s.wG))return}const n=e.wG<s.wG;await this.mLt(e,{gLt:n})}KHt(t){return Ws(t,(t=>t.wG))}async jHt(){let t=await this.QHt();if(0===t.length)return;const e=await this.JHt(t);e.length>0&&(t=e);const i=this.KHt(t);void 0!==i&&(await this.mLt(i,{gLt:!0}),this.tH.vIt(i.wG))}get $Ht(){const t=[this.ZHt,this.HHt].filter(ji);for(const e of t){if(!e.tLt.hOt)return!1;const t=e.tLt.Ert,i=t[t.length-1];if(i&&i.rOt!==this.tZt)return!1}return!0}get lLt(){return this.YHt}get kLt(){return this.ZHt}get xLt(){return this.HHt}get eZt(){return this.iZt}get ht(){return this.aO}get gR(){return this.FB.gR.ks()}get _Lt(){const t=[];if(this.YHt){const e=this.FB.SR;for(const i of this.sZt)for(const s of i.dHt){const i=s.EWt(e);i&&!ms(t,i)&&t.push(i)}}return t}get wR(){if(this.YHt){const t=this.FB.SR;return this.YHt.yOt(t)}}set wR(t){if(!t||!this.YHt)return;const e=this.YHt.bOt(t);void 0!==e&&this.ER(e,{nZt:!1,rZt:!0})}get bt(){return this.oZt}get SR(){var t;return null!=(t=this.hZt)?t:this.FB.SR}set SR(t){this.ER(t)}ER(t,e){var i,s,n,r;_t.DN(Ba,"Seeking to "+t+" s.");const o={nZt:null!=(s=null==e?void 0:e.nZt)?s:t===1/0,rZt:null==(n=null==e?void 0:e.rZt)||n,KBt:null!=(r=null==e?void 0:e.KBt)&&r};this.hZt=t,this.aZt=o,this.uZt=!0,this.sEt=!0,null==(i=this.GG)||i.EI(),this.wo(new L(t)),this.j9.Yw(),this.cZt&&(Ms.Wg(this.lZt),o.rZt?this.lZt=Ms.Ug((()=>this.dZt(t,o)),50):this.dZt(t,o))}dZt(t,e){Ms.Wg(this.lZt);const i=[this.cpt,this.fZt,this.Q9].filter(ji);this.j9=new da,this.j9.Kw(this.fW.Vw),this.Q9=So(this.J9(i,t,e,this.j9.Vw),this.j9).catch(this._Zt)}get ct(){var t,e,i,s,n,r,o;if(!this.$Ht)return null!=(o=null!=(r=null!=(n=null==(t=this.ZHt)?void 0:t.tLt.ct)?n:null==(e=this.HHt)?void 0:e.tLt.ct)?r:null==(s=this.aEt)||null==(i=s.FVt)?void 0:i.tLt.ct)?o:[this.ZHt,this.HHt].filter(ji).every((t=>function(t){if(void 0===t)return!1;return t.tLt.Ert.length>0&&!t.tLt.hOt}(t)))?1/0:NaN;const h=this.FB.ct;if(S(h)){var a,u;const t=null==(u=this.aEt)||null==(a=u.FVt)?void 0:a.tLt.ct;if(void 0!==t)return t}return h}get RR(){if(!this.$Ht)return!1;if(this.hI&&this.cZt){var t,e;const i=this.SR,s=null==(t=this.ZHt)?void 0:t.tLt.ct,n=null==(e=this.HHt)?void 0:e.tLt.ct;return!(void 0!==s&&i<s)&&!(void 0!==n&&i<n)}return this.FB.RR}get lt(){return this.zG}get DR(){return this.qG}get MR(){}get OR(){return!1}get WR(){return Bo({},{dO:0,fO:0,_O:0,vO:0,mO:0,gO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.FB.UR(),{mO:this.Ikt,vO:this.vZ.aj.wG})}get Pr(){var t;return null==(t=this.aEt)?void 0:t.Pr}get GR(){return this.FB.GR}set GR(t){this.FB.GR=t}get XR(){return this.RSt}set XR(t){this.RSt!==t&&(this.RSt=t,this.wo(t?new lt:new fn))}get qR(){return this.FB.qR}get KR(){return this.FB.KR}set KR(t){_t.DN(Ba,"Setting playback rate to "+t+"."),this.FB.KR=t}get JR(){return this.Mkt.ks()}get Mkt(){return this.FB.JR}get tI(){return this.KG}set tI(t){this.KG!==t&&(this.KG=t,this.vZt())}get sI(){let t=this.FB.sI;return this.Okt&&(t=_.max(Ht.Gn,t)),t}get rI(){return this.xkt.ks()}get xkt(){let t=this.h4;const e=[this.ZHt,this.HHt].filter(ji);if(t.V>0&&e.some((t=>!t.tLt.hOt))){const i=this.Mkt,s=t.jn(t.V-1);if(i.V>0&&i.jn(i.V-1)>s){let n=i.jn(i.V-1);const r=BQ(e);r.V>0&&(n=_.min(n,r.jn(r.V-1))),t=t.JL(new se([s,n]))}}return t}BFt(){let t=function(t){if(0===t.length)return se.mB();let e=new se([0,1/0]),i=0;for(const s of t){const t=s.tLt.rI;t.V>0&&(e=e.Sn(t),i=_.max(i,t.Cn(0)))}if(e.V>0)return e;return se._B(i)}([this.ZHt,this.HHt].filter(ji));0!==t.V&&(this.jG&&this.$Ht&&this.jG.ct!==1/0&&(t=new se([t.Cn(0),this.jG.ct])),this.h4=t,this.mZt&&this.jgt.iW(t.Cn(0)),this.gZt&&this.EDt.iW(t.Cn(0)))}get hI(){var t;return null!=(t=this.uZt)?t:this.FB.hI}get QG(){}get nt(){return this.Ll}get rt(){return this.cO}get cI(){var t,e;return this.FB.cI||(null==(e=this.YHt)||null==(t=e.zCt)?void 0:t.Ti)||0}get fI(){var t,e;return this.FB.fI||(null==(e=this.YHt)||null==(t=e.zCt)?void 0:t.ji)||0}get vI(){return this.FB.vI}set vI(t){_t.DN(Ba,"Setting volume to "+t+"."),this.FB.vI=t}get pI(){return this.mZ}get yI(){return!1}set yI(t){}get $G(){return this.tH}xI(){return!1}bI(){return this.FB.Ca}Sa(){return this.FB.lH}LI(t){return this.FB.dH(t)}be(){_t.DN(Ba,"Hiding the player."),this.FB.be()}TI(){var t;_t.DN(Ba,"Pausing the player."),this.FB.TI(),(null==(t=this.GG)?void 0:t.gB)&&this.GG.EI()}async kI(){this.O9=!0;const t=this.FB.kI();if(this.RR){const t=this.xkt;t.V>0&&this.ER(t.Cn(0),{rZt:!1})}this.cZt||await this.vZt(),this.skt(),await t,this.nEt()}skt(){var t;if(!this.Ekt())if(null==(t=this.lLt)?void 0:t.tLt.hOt){var e;let t=!0,i=0;const s=null==(e=this.YHt)?void 0:e.tLt.Cn;if(!this.sEt&&s&&(t=!s.KBt,i=s.YBt,i<0)){const t=this.lLt.tLt.oFt;i+=t.jn(t.V-1)}this.dZt(i,{nZt:t})}else this.dZt(1/0,{nZt:!0});this.pZt()&&this.dZt(1/0,{nZt:!0})}Ekt(){var t;const e=this.xkt;if(0===e.V)return!0;const i=null==(t=this.wZt)?void 0:t.eB(this.SR);return(i&&i>0?this.wZt.jn(i):this.SR)>=e.Cn(0)}get wZt(){var t,e;const i=null==(t=this.yZt)?void 0:t.wHt,s=null==(e=this.zHt)?void 0:e.wHt;return i?s?s.Sn(i):i:s}pZt(){return GQ(this.SR,this.ZHt)||GQ(this.SR,this.HHt)}WEt(){this.zG=void 0,this.qG=void 0}MH(t){this.zG||(ah(this.er()),this.zG=Xs(t),this.qG=t,this.wo(new Ga(t)))}ge(){_t.DN(Ba,"Showing the player."),this.FB.ge()}RI(){throw new g("Not implemented")}II(){throw new g("Not implemented")}CI(){}DI(){this.cZt&&ah(this.bZt(this.ZHt,this.HHt,this.iZt,{DI:!0}))}async xa(t,e,i){const s={stack:[],error:void 0,hasError:!1};try{var n;if(_t.DN(Ba,"Setting the player source to "+t.src+"."),this.WEt(),this.oZt&&!Fn(this.oZt)&&(await this.er(),J(i)),!t.src||Fn(t))return;const o=zs(s,da.Qw([i]),!1);var r;this.fW=da.Qw([o.Vw]),this.rH.SG(t.contentProtection),this.oZt=t,this.AZt=t.seamlessSwitchStrategy,this.gZt=!ms(t.ignoreEmbeddedTextTrackTypes,Lr.CEA608),this.mZt=!ms(t.ignoreEmbeddedTextTrackTypes,Lr.EMSG),this.yn(qt.JMt,this.handleBufferingErrorEvent);const h=null!=(r=null==(n=t.latencyConfiguration)?void 0:n.targetOffset)?r:t.liveOffset;if(this.aEt=new bj(this.lW,this.Fut,t.useCredentials,Ms.Jp(t.src),h),this.aEt.yn(yj.CVt,this.uWt),this.aEt.yn(yj.PVt,this.SZt),this.aEt.yn(Ti.Vy,this.Ds),this.aEt.yn(Ti.Wy,this.Ds),t.hlsDateRange&&(this.TZt=new Ej(this.aEt,this.FB),this.Ll.DG(this.TZt.nt)),null!=this.kZt||(this.kZt=this.EZt.fit()),e.textTracks&&this.oH(e.textTracks),t.latencyConfiguration){const e=t.latencyConfiguration;this.GG=new SX(this,this.FB,e),this.GG.Rt=!0,this.pI.Ma(this.GG)}Mx(this.Ll),this.vZt(),o.Hw()}catch(t){s.error=t,s.hasError=!0}finally{lo(s)}}vZt(){return this.cpt=this.xZt(this.cpt,this.fW.Vw).catch(this.Ypt),this.cpt}async xZt(t,e){if(t&&(await t,J(e)),!this.aEt)return;const i=this.KG;i===hl.jB||this.O9?await this.KE(e):i===hl.$V&&await this.RZt(e)}async RZt(t){if(void 0===this.aEt||this.Okt)return;if(!this.aEt.MVt){try{await this.aEt.WVt(t)}catch(t){throw th(t),this.XR=!1,new A(Qa.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.IZt.rft()}const e=await this.CZt();this.PZt(e);const i=this.DZt(e.BLt),s=this.NZt(e.OLt),n=this.MZt(e.pOt);if(!n){const t=OQ(e.wOt);t&&(_t.DN(Ba,"Detected initial closed caption rendition."),this.LZt(e,t))}await this.bZt(i,s,n,{BZt:!0}),this.Okt=!0,this.uxt.mxt(),this.OZt()}OZt(){const t=[this.ZHt,this.HHt].filter(ji);if(t.some((t=>t.tLt.hOt)))return;if(this.GG)return;const e=_.max(...t.map((t=>{var e;return null!=(e=t.tLt.LSt)?e:0}))),i={minimumOffset:.66*e,maximumOffset:2*e,targetOffset:1*e,forceSeekOffset:3*e,minimumPlaybackRate:At,maximumPlaybackRate:mt};this.GG=new SX(this,this.FB,i),this.mZ.Ma(this.GG)}async CZt(){if(this.FZt=this.aEt.Pr.LLt,!this.FZt.length)throw new A(Qa.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.VZt(this.FZt);if(0===t.length)throw new A(Qa.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const e=await this.JHt(t);return e.length>0&&(t=e),_t.DN(Ba,"Selecting initial active variant stream."),function(t,e,i,s){void 0===s&&(s=JT.maximumBackoff);const n=function(t,e){if(void 0===e)return t;const i=e.preferredVideoCodecs,s=e.preferredAudioCodecs;if(void 0!==i){let e;for(const n of i){const i=t.filter((t=>t.Zrt&&t.Zrt.rPt&&$n(t.Zrt.rPt,n)));if(0===i.length)continue;if(void 0===s)return i;void 0===e&&(e=i);const r=FQ(i,s);if(void 0!==r)return r}if(void 0!==e)return e}if(void 0!==s){const e=FQ(t,s);if(void 0!==e)return e}return t}(t,e),r=WQ(n,s);switch(i.bj.type){case kt.BANDWIDTH:{const t=i.xj,e=r.filter((e=>e.wG<=t));if(e.length>0)return Ym(e,(t=>t.wG))}case kt.PERFORMANCE:return Ws(r,(t=>t.wG));case kt.QUALITY:return Ym(r,(t=>t.wG))}}(t,this.oZt.abr,this.vZ,this.qlt.maximumBackoff)}DZt(t){if(this.WZt){const t=this.UZt(this.WZt);if(t)return t}return VQ(t)}NZt(t){if(this.GZt){const t=this.UZt(this.GZt);if(t)return t}return VQ(t)}MZt(t){for(const t of this.Ll.uC)t.xE===bh.Jn&&(this.HZt=this.ZZt(t));if(this.HZt){const t=this.UZt(this.HZt);if(t)return t}return OQ(t)}ZZt(t){return Fo(this.YHt.pOt,(e=>t===this.XZt.get(e.xC)))}async KE(t){this.cZt||(await this.RZt(t),J(t),this.cZt=!0,await this.bZt(this.ZHt,this.HHt,this.iZt,{BZt:!0}))}oH(t){for(const e of t)e.src&&this.cH.aW(e)}LZt(t,e){if(!this.gZt)return;const i=function(t){const e=[];for(const i of t){const t=RQ(i);void 0!==t&&e.push({Gtt:t,Htt:i.gs||"",xh:i.l})}return e}(t.wOt);for(const t of i)this.EDt.pgt(t);if(void 0!==e){const t=RQ(e);this.EDt.mgt(t).xE=bh.Jn}}get sZt(){return[this.yZt,this.zHt,this.zZt].filter(ji)}vLt(t){for(const e of t)if(!this.qZt(e))throw new g("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.FZt=t}qZt(t){const e=this.Pr;return!!e&&ms(e.LLt,t)}UZt(t){if(t&&this.YHt)return Fo(this.YHt.GLt,(e=>e===t))}PZt(t){var e;if(_t.DN(Ba,"Setting active variant stream."),this.YHt===t)return;const i=(null==(e=this.YHt)?void 0:e.kBt)!==(null==t?void 0:t.kBt);if(this.YHt&&i)for(const t of this.YHt.pOt)this._W(t);if(this.YHt=t,this.wo(new cQ),this.jkt(),t&&i)for(const e of t.pOt)this.YZt(e)}YZt(t){const e=this.FB.LI(hs.jV,void 0,t.l,t.gs,t.eLt,void 0,void 0,t.hLt.map(UY).filter(ji));e.yn(No.la,this.onTextTrackChange),this.XZt.set(t.xC,e),this.KZt.tt(e)}_W(t){const e=this.XZt.get(t.xC);e&&(e.fn(No.la,this.onTextTrackChange),this.KZt.it(e),this.XZt.delete(t.xC),this.FB._W(e))}async QHt(){var t;const e=null!=(t=this.FZt)?t:this.Pr.LLt;if(0===e.length&&!this.FZt)return _t.DN(Ba,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===e.length&&!this.FZt)return _t.DN(Ba,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const i=await this.VZt(e);if(0===i.length)return _t.NLt(Ba,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=WQ(i,this.qlt.maximumBackoff);return 0===s.length?(this.jZt||(_t.NLt(Ba,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.QZt++,await this.JZt(i)),[]):s}async $Zt(){const t=await this.$Lt();if(void 0===t)return;const e=!!this.YHt&&t.wG<this.YHt.wG;await this.mLt(t,{gLt:e})}async $Lt(){var t,e;const i=await this.QHt();if(0===i.length)return;const s=Tq(this.FB),n=await this.JHt(i),r={ji:this.FB.ji,Ti:this.FB.Ti,YLt:s,Tlt:null==(e=this.oZt)||null==(t=e.abr)?void 0:t.restrictToPlayerSize},o=await this.tXt.$Lt(i,this.YHt,n,r,new IQ(this.jG));return!!this.YHt&&o.wG<this.YHt.wG||this.eXt(o,s)?o:void 0}eXt(t,e){var i;if(t===this.lLt)return!1;const s=this.lLt&&UQ(this.lLt,this.qlt.maximumBackoff),n=UQ(t,this.qlt.maximumBackoff);if(!s&&n)return!0;(!this.KPt||this.KPt.dLt.wG>t.wG)&&(this.KPt={dLt:t,Bft:Ms.Vg()});const r=Ms.Vg()-this.KPt.Bft;var o;const h=null!=(o=null==(i=this.xLt)?void 0:i.tLt.qLt)?o:1/0;return e>=_.max(h-1,5)||r>1e3}async JZt(t){this.jZt=!0;let e=!1;for(const i of t)try{const t=this.HHt?Fo(i.OLt,(t=>st(t,this.HHt))):void 0;if(void 0===t)continue;await this.YVt(t),t.tLt.TFt=-1/0,e=!0}catch(t){}if(e)this.QZt=0,await this.iXt();else{if(this.QZt>=this.qlt.maxRetries)return void this.MH(new A(Qa.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=_.min(this.qlt.minimumBackoff*2**(this.QZt-1),this.qlt.maximumBackoff);await Fe(t)}this.jZt=!1,await this.$Zt()}async VZt(t){let e=await Jm(t,(async t=>{var e,i,s;const n=[(null==(e=t.Zrt)?void 0:e.sPt)?'audio/mp4; codecs="'+t.Zrt.sPt+'"':void 0,(null==(i=t.Zrt)?void 0:i.rPt)?'video/mp4; codecs="'+t.Zrt.rPt+'"':void 0].filter(ji);return 0===n.length||await this.sXt.DJ(n,null==(s=this.oZt)?void 0:s.useManagedMediaSource)}));return e.some((t=>{var e;return null==(e=t.Zrt)?void 0:e.rPt}))&&(e=e.filter((t=>!t.Zrt||t.Zrt.rPt||0!==t.OLt.length))),e.some((t=>{var e;return null==(e=t.Zrt)?void 0:e.sPt}))&&(e=e.filter((t=>!t.Zrt||t.Zrt.sPt||0!==t.BLt.length))),e}JHt(t){return this.aEt.BVt?Jm(t,(t=>async function(t,e){for(const i of t)if(!await e(i))return!1;return!0}([VQ(t.BLt),VQ(t.OLt),OQ(t.pOt),OQ(t.wOt)].filter(ji),(t=>this.nXt(t))))):Promise.resolve([])}async nXt(t){if(0===t.tLt.Ert.length)return!1;const e=t.tLt.Ert[0];if(!e.Pyt)return!1;const i=e.Pyt,s=i.hAt?sK(i.hAt.Cn,i.hAt.V):void 0;try{return await this.Fut.hrt(i.Dx,s)}catch(t){return!1}}async mLt(t,e){if(!this.cZt)throw new g("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.qZt(t))throw new g("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.YHt)return void _t.DN(Ba,"Trying to set the already active variant stream, ignoring.");const i=this.ZHt?Fo(t.BLt,(t=>st(t,this.ZHt))):void 0,s=this.HHt?Fo(t.OLt,(t=>st(t,this.HHt))):void 0,n=this.iZt?Fo(t.pOt,(t=>st(t,this.iZt))):void 0;this.PZt(t),this.KPt=void 0,await this.bZt(i,s,n,e)}async ELt(t){if(!this.YHt)return void(this.WZt=t);const e=this.UZt(t);if(t&&!e)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");if(this.kLt===e)return;const i=ji(e)!==ji(this.ZHt);_t.DN(Ba,"Switching audio rendition"),await this.bZt(e,this.HHt,this.iZt,{wLt:!0,gLt:i})}async RLt(t){if(!this.YHt)return void(this.GZt=t);const e=this.UZt(t);if(t&&!e)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");if(this.xLt===e)return;const i=ji(e)!==ji(this.HHt);_t.DN(Ba,"Switching video rendition"),await this.bZt(this.ZHt,e,this.iZt,{pLt:!0,gLt:i})}async rXt(t){if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active subtitle rendition to undefined.");if(!this.Okt)return void(this.HZt=t);const e=this.UZt(t);if(!e)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");_t.DN(Ba,"Switching subtitle rendition"),await this.bZt(this.ZHt,this.HHt,e)}async oXt(t,e){if(this.jZt)return;const i=0===this.rt.V;t.Aw===Yc._E||t.Aw===Yc.fE&&i?this.FZt&&this.FZt.length<=1?(t.Aw===Yc._E&&this.HHt!==t?await this.bZt(this.ZHt,t,this.iZt):t.Aw===Yc.fE&&i&&this.ZHt!==t&&await this.bZt(t,this.HHt,this.iZt),await this.hXt(t,e)):await this.$Zt():await this.hXt(t,e)}async YVt(t,e){try{await this.aEt.YVt(t,e)}catch(i){throw th(i),(eo(i)||dA(i))&&await this.oXt(t,e),i}}async hXt(t,e){if(!ms(this.aXt,t)){this.aXt.push(t);try{const i=t.Aw===Yc.jV||t.Aw===Yc.eBt?1/0:this.qlt.maxRetries;await Ci((()=>this.retryOfflineRenditionsCallback(t,e)),e,i,this.qlt.minimumBackoff,this.qlt.maximumBackoff)}catch(t){this.MH(new A(Qa.MEDIA_LOAD_ERROR,t.message,t))}finally{we(this.aXt,t),t.tLt.TFt===-1/0&&await this.iXt()}}}bZt(t,e,i,s){void 0===s&&(s={});const n={gLt:s.gLt||!1,wLt:s.wLt||!1,pLt:s.pLt||!1,DI:s.DI||!1,BZt:s.BZt||!1};return n.BZt||n.DI||this.ZHt!==t||this.HHt!==e||this.iZt!==i?void 0===t&&void 0===e?Promise.reject(new g("Trying to buffer no media renditions.")):(this.ZHt=t,this.HHt=e,this.iZt=i,this.BFt(),this.wo(new lQ),this.j9.Yw(),this.j9=new da,this.j9.Kw(this.fW.Vw),this.uXt.Yw(),this.uXt=new da,this.uXt.Kw(this.fW.Vw),this.fZt=So(this.cXt([this.fZt,this.Q9].filter(ji),t,e,i,n,this.uXt.Vw),this.uXt).catch(this._Zt),this.fZt):Promise.resolve()}async lXt(t,e,i,s){var n,r;const o=[];if(o.push(this.dXt(e,s)),PY(t,e)||o.push(this.dXt(t,s)),null==(r=this.oZt)||null==(n=r.hls)?void 0:n.delaySubtitlePreload)return Promise.all(o).then((()=>this.dXt(i,s)));const h=this.dXt(i,s);return Promise.all([...o,h])}async dXt(t,e){if(t)try{await this.aEt.YVt(t,e)}catch(i){th(i),(eo(i)||dA(i))&&await this.fXt(t,e)}}async fXt(t,e){if(this.jZt)return;const i=0===this.rt.V;if(t.Aw===Yc._E||t.Aw===Yc.fE&&i)if(this.FZt&&this.FZt.length<=1)await this.hXt(t,e);else{const t=await this.CZt();this.PZt(t);const e=this.DZt(t.BLt),i=this.NZt(t.OLt),s=this.MZt(t.pOt);await this.bZt(e,i,s)}else await this.hXt(t,e)}async cXt(t,e,i,s,n,r){var o;if(!this.cZt)return void await this.lXt(e,i,s,r);await Promise.all(t.map((t=>t.catch(It)))),this._Xt(),await this.vXt(r),await this.mXt();const h=[];n.wLt&&this.jG&&this.jG.J3&&h.push(this.jG.J3.$S(0,1/0)),n.pLt&&this.jG&&this.jG.t4&&h.push(this.jG.t4.$S(0,1/0)),await Promise.all(h),J(r);const a=await this.gXt(e,i,n.DI,r);this.pXt(e,i,n.gLt||a),this.wXt(s,n.gLt),J(r);const u=[i,PY(e,i)?void 0:e,s].filter(ji);try{await Promise.all(u.filter((t=>!t.tLt.gFt)).map((t=>{var e;return null==(e=this.aEt)?void 0:e.KVt(t,r)})))}catch(t){th(t)}if(J(r),this.o4(),this.BFt(),void 0!==this.hZt)this.dZt(this.hZt,this.aZt);else if(!this.sEt&&(null==(o=this.YHt)?void 0:o.tLt.Cn)){const t=this.YHt.tLt,e=t.Cn;let i=e.YBt;if(e.YBt<0){const e=t.oFt;i+=e.jn(e.V-1)}this.dZt(i,{nZt:!e.KBt})}else!this.sEt&&u.every((t=>!t.tLt.hOt))?this.dZt(1/0,{nZt:!0}):this.sZt.length>0&&this.yXt()}async gXt(t,e,i,s){var n,r;const o=void 0!==t&&t!==e,h=void 0!==e,a=await this.bXt(t,e,this.YHt);if(J(s),!i&&this.jG&&!a)return!1;const u=void 0!==(null==(n=this.jG)?void 0:n.J3),c=void 0!==(null==(r=this.jG)?void 0:r.t4);if(!i&&!(o!==u||h!==c)&&a&&this.jG&&this.jG.cJ(a))return await this.vXt(s),await this.jG.dJ(a),!0;for(const t of this.sZt)t.dHt.forEach((t=>t.Yw()));this.FB.u7();try{this.jG&&await this.FB.er(),this.jG=await this.AXt(a,o,h)}finally{this.FB.l7()}return!0}async bXt(t,e,i){var s,n;const r=i.Zrt,o=[];if(void 0!==t){var h,a;const e=null!=(a=null==(h=t.Zrt)?void 0:h.sPt)?a:null==r?void 0:r.sPt;if(!e)return;{const t='audio/mp4; codecs="'+e+'"';_t.DN(Ba,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),o.push(t)}}if(void 0!==e){var u,c;const t=null!=(c=null==(u=e.Zrt)?void 0:u.rPt)?c:null==r?void 0:r.rPt;if(!t)return;{const e='video/mp4; codecs="'+t+'"';_t.DN(Ba,"Configuring MediaSource for initial video rendition with codec: "+e+"."),o.push(e)}}if(0===o.length)return void _t.NLt(Ba,"No codecs found on the active variant stream.");var l;const d=null!=(l=null==e||null==(s=e.tLt.Ert[0])?void 0:s.QBt)?l:[];var f;const _=null!=(f=null==t||null==(n=t.tLt.Ert[0])?void 0:n.QBt)?f:[],v=this.aEt.Pr,m=await lK(this.oZt.contentProtection,o,v.vVt.concat(_).concat(d),this.lW,this.oZt.useCredentials);return{Aw:Mr.gW,u4:o.map((t=>({Dk:t}))),eH:m,b4:this.oZt.useManagedMediaSource}}async AXt(t,e,i){let s;return s=t?await this.FB.Dn(t):new vQ(this.FB,e,i),this.jG=s,this.o4(),this.XTt(),this.zTt(),s}o4(){const t=this.jG;if(t&&S(t.ct)){var e,i,s;const n=null!=(s=null==(e=this.ZHt)?void 0:e.tLt.ct)?s:null==(i=this.HHt)?void 0:i.tLt.ct;void 0!==n&&n>0&&t.n4(n)}this.BFt()}XTt(){const t=this.jG;t&&(t.t4&&(t.t4.wj=this.vZ.Cj),t.J3&&(t.J3.wj=this.vZ.Cj))}zTt(){const t=this.jG;t&&(t.t4&&(t.t4.Sj=this.vZ.Sj),t.J3&&(t.J3.Sj=this.vZ.Sj))}pXt(t,e,i){if(!this.jG)throw new g("Invalid state");this.jG.J3?this.e4&&this.e4.WHt(this.jG.J3)||(this.e4=new xQ(ee.fE,this.jG.J3,this.mZt?this.jgt:void 0,this.gZt?this.EDt:void 0)):this.e4=void 0,this.jG.t4?this.i4&&this.i4.WHt(this.jG.t4)||(this.i4=new xQ(ee._E,this.jG.t4,this.mZt?this.jgt:void 0,this.gZt?this.EDt:void 0)):this.i4=void 0;const s=PY(t,e);if(this.i4&&e){const t=s&&this.e4?[this.i4,this.e4]:[this.i4];this.zHt?(i&&(this.zHt.Yw(),this.zHt.gHt.Bb()),this.zHt.cLt!==e&&this.zHt.SUt(e)):(this.zHt=function(t,e,i,s,n,r,o,h,a,u){const c=s.Pr.NL,l=new Kj(c),d=new zj(ee._E,t,s,l,n,r,o,u),f=e.map((t=>t.Aw)),_=h.pTt(l,s.Pr.NL,f),v=new uQ(d,l,_,a);return v.mHt(e),v}(e,t,this.FB,this.aEt,this.lW,this.Fut,this.BWt,this.kZt,this.vZ,this.oZt.useCredentials),this.zHt._Ht.yn(gt.wUt,this.SXt),this.zHt._Ht.yn(gt.yUt,this.TXt),this.zHt.vHt.yn(St.WGt,this.kXt),this.zHt.vHt.yn(St.GGt,this.EXt),this.zHt.vHt.yn(St.HGt,this.xXt),this.zHt.vHt.yn(St.UGt,this.RXt)),this.zHt.mHt(t)}else{var n;null==(n=this.zHt)||n.Hw(),this.zHt=void 0}var r;this.e4&&t&&!s?(this.yZt?(i&&(this.yZt.Yw(),this.yZt.gHt.Bb()),this.yZt.cLt!==t&&this.yZt.SUt(t)):(this.yZt=function(t,e,i,s,n,r,o,h,a,u){const c=s.Pr.NL,l=new Kj(c),d=new zj(ee.fE,t,s,l,n,r,o,u),f=h.pTt(l,s.Pr.NL,[e.Aw]),_=new uQ(d,l,f,a);return _.mHt([e]),_}(t,this.e4,this.FB,this.aEt,this.lW,this.Fut,this.BWt,this.kZt,this.vZ,this.oZt.useCredentials),this.yZt._Ht.yn(gt.yUt,this.TXt),this.yZt.vHt.yn(St.WGt,this.kXt),this.yZt.vHt.yn(St.UGt,this.RXt)),this.yZt.mHt([this.e4])):(null==(r=this.yZt)||r.Hw(),this.yZt=void 0);this.IXt()}wXt(t,e){if(this.zZt){this.zZt._Ht.cLt===t?e&&(this.zZt.Yw(),this.zZt.gHt.Bb()):(this.zZt.Hw(),this.zZt=void 0)}if(!this.zZt&&t){const e=this.XZt.get(t.xC);e.xE=bh.Jn,this.zZt=function(t,e,i,s,n,r,o){const h=i.Pr.NL,a=new Jj(e,h),u=new Kj(h),c=new zj(ee.Ak,t,i,u,s,n,r,o),l=new oQ(u,h,ee.Ak),d=new uQ(c,u,l);return d.pHt(a),d}(t,e,this.aEt,this.lW,this.Fut,this.BWt,this.oZt.useCredentials)}}IXt(){const t=[this.e4,this.i4].filter(ji).map((t=>t.Aw));this.aEt.Pr.NL.fVt(t)}async J9(t,e,i,s){let n;if(await Promise.all(t.map((t=>t.catch(It)))),J(s),await this.mXt(),J(s),this.hZt=void 0,this.uZt=void 0,this.sEt=!0,i.KBt){n=BQ([this.ZHt,this.HHt].filter(ji))}else n=this.xkt;const r=n.qL(e),o=this.FB.vy(Ti.Ky,s);this.FB.Eb(r,i.nZt),this.cZt&&this.sZt.length>0&&(this.aEt.Pr.NL._Vt(),this.CXt(this.FB.SR),this.yXt()),await o,this.nEt()}nEt(){const t=this.qB;if(this.qR||this.hI||void 0===t)return;const e=this.SR;var i,s;t+this.SR-this.pI.bd.maximumOffset<e?null==(i=this.GG)||i.Cn():null==(s=this.GG)||s.EI()}CXt(t){for(const e of this.sZt)e.BUt(t)||(e.SHt(),e.gHt.IGt()),e.bHt(t)||(e.THt(),e.gHt.CGt())}_Xt(){for(const t of this.sZt)t.Yw()}mXt(){return Promise.all([this.DDt(),this.PXt(),this.DXt()])}yXt(){this.PDt(),this.NXt(),this.MXt()}async iXt(){this.cZt&&this.sZt.length>0&&(this.sZt.forEach((t=>t.SHt())),await this.DDt(),this.PDt(),this.sZt.forEach((t=>t._Ht.HUt())))}PDt(){if(this.LXt)return;const t=()=>{this.LXt=void 0};this.BXt=new da,this.BXt.Kw(this.fW.Vw),this.LXt=So(this.qDt(this.BXt.Vw),this.BXt).catch(this._Zt).then(t,t)}async DDt(){var t;null==(t=this.BXt)||t.Yw();const e=this.LXt;this.LXt=void 0,e&&await e}async qDt(t){J(t);const e=this.sZt;for(;;){const i={stack:[],error:void 0,hasError:!1};try{const s=[],n=this.FB.SR;for(const t of e){const e=t._Ht,i=t.Flt(n);if(e.FIt)s.push(e.SWt());else if(t.AHt(n,i,this.vZ.Cj)){const n=e.OUt(i);if(void 0===n){if(e.cLt.tLt.hOt)continue;const t=e.cLt.tLt.Ert;t.length&&t[0].FO>i&&(this.SR=1/0),e.zUt(),e.WUt(i)}else{const[i,s]=n;e.$at(i,s,t.cWt),t.vHt.$Gt(i,s)}s.push(e.SWt())}}const r=zs(i,da.Qw([t]),!1);if(0===s.length){e.every((t=>t._Ht.uCt))||s.push(this.FB.vy(Ti.sb,r.Vw));for(const t of e)s.push(t.vHt.vy(St.UGt,r.Vw))}await ou(Promise.race(s),r.Vw)}catch(t){i.error=t,i.hasError=!0}finally{lo(i)}}}NXt(){if(this.OXt)return;const t=()=>{this.OXt=void 0};this.FXt=new da,this.FXt.Kw(this.fW.Vw),this.OXt=So(this.VXt(this.FXt.Vw),this.FXt).catch(this._Zt).then(t,t)}async PXt(){var t;null==(t=this.FXt)||t.Yw();const e=this.OXt;this.OXt=void 0,e&&await e}async VXt(t){J(t);const e=this.sZt;for(;;){const i=[];for(const t of e){const e=t._Ht,s=t.vHt;if(s.FIt)i.push(s.SWt());else{const t=e.CUt();t?"But"===t.Aw?(s.sHt(t),i.push(s.SWt())):"iOt"===t.Aw&&(s.tHt(t),i.push(s.SWt())):i.push(e.ZUt())}}if(0===i.length)break;await ou(Promise.race(i),t)}}MXt(){if(this.WXt)return;this.UXt=new da,this.UXt.Kw(this.fW.Vw);const t=()=>{this.WXt=void 0};this.WXt=So(this.GXt(this.UXt.Vw),this.UXt).catch(this._Zt).then(t,t)}async DXt(){var t;null==(t=this.UXt)||t.Yw();const e=this.WXt;this.WXt=void 0,e&&await e}async GXt(t){for(;;){const e=this.sZt;e.forEach((t=>t.Qat()));const i=this.FB.SR,s=[],n=[];for(const t of e){const e=t.vHt;for(const r of t.dHt){const t=r.gWt?s:n;if(r.FIt)t.push(r.SWt());else if(!r.TWt(i)){const i=e.uHt(r.Aw);i?"But"===i.Aw&&i.rOt===this.tZt?(r.Glt(i),t.push(r.SWt())):"bCt"===i.Aw&&i.rOt===this.tZt&&(r.w2(i),t.push(r.SWt())):n.push(e.cHt(r.Aw))}}}if(0===s.length){if(await this.HXt(e,i,t))continue}if(0===s.length&&0===n.length){e.every((t=>t.dHt.length>0&&t.dHt.every((t=>t.TWt(i)))))&&this.jG.r3();break}await ou(Promise.race([...s,...n]),t)}}async HXt(t,e,i){const s=[],n=[];for(const i of t){const t=i.Flt(e);for(const r of i.dHt){if(!r.gWt)continue;const o=i.vHt.uHt(r.Aw);if(void 0!==o){if(o.rOt===this.tZt)return!1;s.push(o)}else{if(i.FIt||i.AHt(e,t,this.vZ.Cj)||!r.kWt(e,t))return!1;{const t=r.pWt.cWt;void 0!==t&&n.push(t)}}}}if(0===s.length)return!1;const r=Ym(s,(t=>t.rOt)).rOt;if(s.every((t=>"bCt"===t.Aw&&t.rOt===r))){const t=Ws(s,(t=>t.FO)).FO,e=[...s,...n],r=await this.ZXt(e);this.XXt(r)?(_t.DLt(GY,"Seamless switch from",this.jG.bd,"to",r),await this.jG.dJ(r),_t.DLt(GY,"Seamless switch complete.")):await this.zXt(t,r,i),this.tZt=s[0].rOt}else for(const e of t)for(const t of e.dHt){let i=e.vHt.uHt(t.Aw);for(;void 0!==i&&("bCt"!==i.Aw||i.rOt!==r);)_t.DLt(GY,"Removing append for other discontinuity, expecting "+r,i),e.vHt.xWt(i),i=e.vHt.uHt(t.Aw)}return!0}XXt(t){return this.AZt===Gu.QB||this.AZt!==Gu.JB&&this.jG.cJ(t)}async ZXt(t){const e=t.map((t=>t.lHt.Zrt)),i=e.map((t=>({Dk:t}))),s=Qe(t,(t=>t.lHt.QBt));s.push(...this.aEt.Pr.vVt);let n=await lK(this.oZt.contentProtection,e,s,this.lW,this.oZt.useCredentials);return 0===n.length&&this.jG&&this.jG.bd.eH.length>0&&(n=this.jG.bd.eH),{Aw:Mr.gW,u4:i,eH:n,b4:this.oZt.useManagedMediaSource}}async zXt(t,e,i){var s;const n=this.jG,r=n.ct,o=this.gR.length>0&&this.SR<t;if(o)try{for(_t.DLt(GY,"Marking end of stream and waiting for ended to switch discontinuity."),n.r3();!this.FB.RR&&this.FB.SR<t;)await this.FB.vy([Ti.sb,Ti.Cy],i)}catch(t){throw n.K2(),n.n4(r),t}_t.DLt(GY,"Perform hard switch from",null==(s=this.jG)?void 0:s.bd,"to",e);try{this.FB.u7(),this.SR<t&&this.FB.Eb(t,!0,!0),this.i4=void 0,this.e4=void 0,this.IXt(),await this.FB.er(),this.jG=await this.FB.Dn(e),this.o4(),this.XTt(),this.zTt(),this.jG.t4&&(this.i4=new xQ(ee._E,this.jG.t4,this.mZt?this.jgt:void 0,this.gZt?this.EDt:void 0),this.i4.f3(t-1,t)),this.jG.J3&&(this.e4=new xQ(ee.fE,this.jG.J3,this.mZt?this.jgt:void 0,this.gZt?this.EDt:void 0),this.e4.f3(t-1,t)),this.IXt()}finally{o&&ah(this.FB.kI()),this.FB.l7()}if(this.zHt){const t=void 0!==this.e4&&void 0===this.yZt?[this.i4,this.e4]:[this.i4];this.zHt.mHt(t)}this.yZt&&this.yZt.mHt([this.e4]),_t.DLt(GY,"Hard switch complete.")}vXt(t){return ou(Rs(Qe(this.sZt,(t=>t.dHt.map((t=>t.SWt()))))),t)}jkt(){const t=this.fI,e=this.cI;this.rxt===t&&this.oxt===e||(this.rxt=t,this.oxt=e,this.wo(new P))}async gn(){_t.DN(Ba,"Unloading the player."),this.qXt(),this.WEt(),await this.er(),this.FB.gH=void 0,this.KZt.gn(),await this.cH.gn(),await this.jgt.gn(),await this.EDt.gn(),this.aO.gn(),this.cO.gn(),this.Ll.gn(),this.YXt.gn(),this.uxt.Hw(),this.BWt.Hw(),this.kZt&&(this.kZt.Hw(),this.kZt=void 0)}async er(){_t.DN(Ba,"Resetting the player."),this.fn(qt.JMt,this.handleBufferingErrorEvent),this.tZt=-1,this.fW.Yw(),this.j9.Yw(),this.j9=new da,this.j9.Kw(this.fW.Vw),this.uXt.Yw(),this.uXt=new da,this.uXt.Kw(this.fW.Vw);const t=[this.cpt,this.Q9,this.fZt].filter(ji);await Promise.all(t.map((t=>t.catch(It)))),this.cpt=void 0,this.Q9=void 0,this.fZt=void 0,this.ZHt=void 0,this.HHt=void 0,this.iZt=void 0,this.FZt=void 0,this.WZt=void 0,this.GZt=void 0,this.HZt=void 0,this.WZt=void 0,this.GZt=void 0,this.HZt=void 0,this.GG=void 0,this.mZ.er(),this.aXt=[],this.PZt(void 0),this._Xt(),await this.mXt(),this.yZt&&(this.yZt.Hw(),this.yZt=void 0),this.zHt&&(this.zHt.Hw(),this.zHt=void 0),this.zZt&&(this.zZt.Hw(),this.zZt=void 0),this.e4=void 0,this.i4=void 0,this.jG=void 0,this.aEt&&(this.aEt.Hw(),this.aEt=void 0),this.TZt&&(this.Ll.BG(this.TZt.nt),this.TZt=void 0),await this.cH.er(),await this.jgt.er(),await this.EDt.er(),this.FB.fH(),await this.FB.er(),this.oZt=void 0,this.cZt=!1,this.h4=se.mB(),this.hZt=void 0,this.nxt=void 0,this.rxt=0,this.oxt=0,this.uZt=void 0,this.sEt=!1,this.O9=!1,Ms.Wg(this.lZt),this.Okt=!1,this.KXt=!1,this.Ikt=0,this.AZt=Gu.jB,this.YXt.er(),this.jXt(),this.wo(new Ys(this.SR,this.sI))}jXt(){for(const t of this.aO.uC)t.gn();for(const t of this.cO.uC)t.gn();for(const t of this.Ll.uC)t.gn();this.aO.er(),this.cO.er(),this.Ll.er(),this.XZt.clear()}QXt(){this.YXt.yn(CQ,this.Ds),this.YXt.yn(tl.VL,this.HB),this.YXt.yn(tl.FL,this.JXt),this.YXt.yn(tl.ML,this.$Xt),this.vZ.yn("pj",this.dxt),this.vZ.yn("Aj",this.fxt),this.FB.yn(PQ,this.Ds),this.FB.yn(yo.da,this._xt),this.FB.yn(Ti.Ay,this.handleContentProtectionErrorEvent),this.FB.yn(Ti.xy,this.tzt),this.FB.yn(Ti.Cy,this.Mh),this.FB.yn(Ti.Zy,this.jNt),this.FB.yn(Ti.ro,this.ezt),this.FB.yn(Ti.Xy,this.izt),this.FB.yn(tl.tC,this.BW),this.FB.yn(Ti.sb,this.v6),this.FB.yn(Ti.jy,this.We),this.FB.yn(Ti.Ky,this.bH),this.FB.yn(Ti.Yy,this.szt),this.FB.yn(Ti.ob,this.nzt)}qXt(){this.YXt.fn(CQ,this.Ds),this.YXt.fn(tl.VL,this.HB),this.YXt.fn(tl.FL,this.JXt),this.YXt.fn(tl.ML,this.$Xt),this.vZ.fn("pj",this.dxt),this.vZ.fn("Aj",this.fxt),this.FB.fn(PQ,this.Ds),this.FB.fn(yo.da,this._xt),this.FB.fn(Ti.Ay,this.handleContentProtectionErrorEvent),this.FB.fn(Ti.xy,this.tzt),this.FB.fn(Ti.Cy,this.Mh),this.FB.fn(Ti.Zy,this.jNt),this.FB.fn(Ti.ro,this.ezt),this.FB.fn(Ti.Xy,this.izt),this.FB.fn(tl.tC,this.BW),this.FB.fn(Ti.sb,this.v6),this.FB.fn(Ti.jy,this.We),this.FB.fn(Ti.Ky,this.bH),this.FB.fn(Ti.Yy,this.szt),this.FB.fn(Ti.ob,this.nzt)}constructor(t,e,i,s,n,r,o,h){super(),this.vZ=i,this.mZ=s,this.BWt=n,this.EZt=r,this.XZt=ea(),this.gZt=!0,this.mZt=!0,this.cZt=!1,this.oZt=void 0,this.jG=void 0,this.cpt=void 0,this.fW=new da,this.aEt=void 0,this.WZt=void 0,this.GZt=void 0,this.HZt=void 0,this.YHt=void 0,this.ZHt=void 0,this.HHt=void 0,this.iZt=void 0,this.FZt=void 0,this.aXt=[],this.e4=void 0,this.i4=void 0,this.yZt=void 0,this.zHt=void 0,this.zZt=void 0,this.kZt=void 0,this.uXt=new da,this.fZt=void 0,this.j9=new da,this.Q9=void 0,this.tZt=-1,this.BXt=void 0,this.FXt=void 0,this.UXt=void 0,this.LXt=void 0,this.OXt=void 0,this.WXt=void 0,this.RSt=!0,this.QZt=0,this.jZt=!1,this.KG=hl.QH,this.zG=void 0,this.qG=void 0,this.h4=se.mB(),this.rzt=[],this.hZt=void 0,this.aZt=void 0,this.sEt=!1,this.O9=!1,this.nxt=void 0,this.rxt=0,this.oxt=0,this.uZt=void 0,this.lZt=0,this.Okt=!1,this.KXt=!1,this.AZt=Gu.jB,this.KPt=void 0,this.ozt=void 0,this.Ikt=0,this.handleContentProtectionErrorEvent=t=>{this.zG=Xs(t.errorObject),this.qG=t.errorObject,this.Ds(t)},this.handleBufferingErrorEvent=t=>{this.MH(new A(Qa.MEDIA_LOAD_ERROR,t.lt.message,t.lt))},this._xt=t=>{this.MH(vk(t.lt))},this.tzt=()=>{this.BFt();const t=this.ct;t!==this.nxt&&(this.nxt=t,this.wo(new Ls(this.nxt)))},this.Mh=()=>{this.RR&&this.wo(new Te(this.SR))},this.jNt=()=>{this.wo(new fl(this.SR))},this.ezt=()=>{this.skt(),this.wo(new H(this.SR))},this.HB=()=>{void 0!==this.ozt&&(Ms.Wg(this.ozt),this.ozt=void 0),this.wo(new Wi(this.SR))},this.izt=()=>{this.wo(new K(this.SR))},this.BW=()=>{this.wo(new au(this.SR,this.sI))},this.v6=()=>{const t=this._Lt;qm(this.rzt,t)||(this.wo(new xj),this.rzt=t),this.wo(new ri(this.SR,this.wR))},this.SXt=Qr((t=>{t.TE===ee._E&&this.XHt()&&ah(this.qHt())}),200),this.TXt=t=>{var e;this.Ikt+=t.AUt;const i=this.rt.V>0?t.TE===ee._E:t.TE===ee.fE;"But"===t.bUt&&i&&ah(this.$Zt()),this.wo(new nW(function(t){if(t){if(void 0!==t.hAt){var e,i;const s=t.hAt.Cn+(null!=(i=t.hAt.V)?i:0);return{Gu:t.Dx,rut:[null==(e=t.hAt)?void 0:e.Cn,s],kE:!0}}return{Gu:t.Dx.toString()||"",kE:!0}}return{Gu:"",kE:!0}}(t.uri),(null==(e=this.lLt)?void 0:e.wG)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.TE,t.httpStatusCode,t.AUt))},this.We=()=>{this.wo(new L(this.SR))},this.bH=()=>{this.wo(new ha(this.SR))},this.szt=()=>{this.jkt()},this.nzt=()=>{this.wo(new rs(this.SR,this.vI))},this.JXt=()=>{this.FB.hI?this.wo(new tu(this.SR)):(null!=this.ozt||(this.ozt=Ms.Ug((()=>{this.KXt&&(this.KPt=void 0,ah(this.jHt()))}),2500)),this.skt(),this.wo(new tu(this.SR)))},this.$Xt=()=>{this.KXt=!0,this.wo(new ho(this.SR,this.sI))},this._Zt=t=>{Je(t)||eo(t)||dA(t)||(this._Xt(),ah(this.mXt()),this.wo(new XY(t)))},this.uWt=()=>{this.BFt()},this.SZt=t=>{ah(this.oXt(t.cLt,this.fW.Vw))},this.Ypt=t=>{if(Je(t))return;const e=t instanceof A?t:new A(Qa.MEDIA_DECODE_ERROR,t.message,t);this.MH(e)},this.onTextTrackChange=t=>{if(!this.YHt)return;const e=t.Ht,i=this.ZZt(e);i&&(e.xE===bh.NC||e.xE===bh.Jn?(ah(this.rXt(i)),this.XZt.forEach((t=>{t!==e&&(t.xE=bh.Th)}))):this.iZt&&this.iZt===i&&ah(this.bZt(this.ZHt,this.HHt,void 0)))},this.retryOfflineRenditionsCallback=async(t,e)=>{this.eZt!==t&&this.kLt!==t&&this.xLt!==t||(await this.aEt.YVt(t,e),t.tLt.TFt=-1/0)},this.dxt=()=>{this.XTt()},this.fxt=()=>{this.zTt()},this.kXt=t=>{const e=this.YHt,i=null==e?void 0:e.mOt;if(this.aEt.oWt(t.Zrt,t.cLt.tLt),!i&&(this.aEt.hWt(t.Zrt,t.cLt.tLt),this.IZt.WLt(),e)){const t=void 0!==this.ZHt&&!ms(e.BLt,this.ZHt),i=void 0!==this.HHt&&!ms(e.OLt,this.HHt);(t||i)&&this.bZt(t?void 0:this.ZHt,i?void 0:this.HHt,this.iZt).catch(It)}},this.EXt=t=>{this.IZt.HLt(t.cLt,t.Jdt)},this.xXt=t=>{this.IZt.XLt(t.cLt,t.ZGt.dF())},this.RXt=t=>{this.aEt.nWt(t.cLt)},this.Fut=new AX(o),this.FB=t,this.lW=e,this.tH=new ZY(this.vZ.aj),this.sXt=new zY(this.FB),this.tXt=new iK(this.vZ),this.qlt=h.retryConfiguration,this.aO=new Nn,this.cO=new Nn,this.IZt=new HY(this,this.vZ,this.aO,this.cO),this.KZt=new ua,this.cH=new Ix(this.FB,this.lW),this.jgt=new yX(this.FB),this.EDt=new _l(this.FB),this.Ll=new Fu([this.KZt,this.cH.Z,this.jgt.Z,this.EDt.Z,this.FB.nt]),this.rH=new Xh(this.lW),this.FB.gH=this.rH,this.uxt=new LQ(this,this.FB),this.YXt=new q(this.uxt,!0),this.QXt()}},MQ=class{async BH(t,e){return!!zh(t.type)&&!t.useNativePlayback}async OH(t){return!!t.aes128||await lT(t,!0)}},LQ=class extends Bx{get sI(){return this.ea.sI}mxt(){this.wo(new au(this.SR,this.sI))}constructor(t,e){super(e),this.ea=t}};function BQ(t){return t.reduce(((t,e)=>t.Sn(e.tLt.oFt)),new se([0,1/0]))}function OQ(t){const e=Fo(t,(t=>t.eLt)),i=t.filter((t=>t.iLt)),s=Ms.aw,n=i.map((t=>t.gs)).filter(ji),r=gQ(n,s);return r?Fo(i,(t=>t.gs===r)):e}function FQ(t,e){for(const i of e){const e=t.filter((t=>t.Zrt&&t.Zrt.sPt&&$n(t.Zrt.sPt,i)));if(0!==e.length)return e}}function VQ(t){var e;return null!=(e=OQ(t))?e:t[0]}function WQ(t,e){return t.filter((t=>UQ(t,e)))}function UQ(t,e){const i=e+DQ,s=0===t.OLt.length||t.OLt.some((t=>t.tLt.TFt<Ms.Vg()-i)),n=0===t.BLt.length||t.BLt.some((t=>t.tLt.TFt<Ms.Vg()-i));return s&&n}function GQ(t,e){if(!e||e.tLt.hOt)return!1;const i=e.tLt.Ert;return 0!==i.length&&i[0].FO>t}r(),r();var HQ=class{async MWt(t,e,i){try{const s=await crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:i},s,t);return new j(n)}catch(t){throw new A(Qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}Hw(){}static pT(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}};r(),r(),r(),r();var bc=class extends pe{constructor(t,e){super(t),this.data=e}},ZQ=["message","messageerror","error"];r();var XQ=class extends pe{constructor(t){super(yo.da),this.error=t}},zQ=class extends Co{get hzt(){return this.azt.Vw.Bw}uzt(t,e){this.hzt||(void 0!==this.czt?this.czt.uzt(t,e):this.lzt.push({gb:t,dzt:e}))}fzt(){this.hzt||(this.azt.Yw(),En(this.lzt),void 0!==this.czt&&this.czt.fzt())}constructor(t){super(),this.czt=void 0,this.lzt=[],this._zt=t=>{if(this.hzt)t.fzt();else{this.czt=t,this.czt.yn(ZQ,this.Ds);for(const e of this.lzt)t.uzt(e.gb,e.dzt);En(this.lzt)}},this.vzt=t=>{if(this.hzt)return;const e=t instanceof g?t:new g("Could not create Worker.");this.wo(new XQ(e)),this.fzt()},this.azt=new da,t(this.azt.Vw).then(this._zt,this.vzt)}};r(),r();var qQ=class extends Co{uzt(t,e){e?this.czt.postMessage(t,e):this.czt.postMessage(t)}fzt(){this.$o(),this.czt.removeEventListener("message",this.mzt),this.czt.removeEventListener("messageerror",this.gzt),this.czt.removeEventListener("error",this.t7),this.czt.terminate()}constructor(t,e){super(),this.mzt=t=>{this.wo(new bc("message",t.data))},this.gzt=t=>{this.wo(new bc("messageerror",t.data))},this.t7=t=>{null==t.preventDefault||t.preventDefault.call(t);const e=t.error instanceof g?t.error:new g(t.message);this.wo(new XQ(e)),this.fzt()},this.czt=new Ol(t,e),this.czt.addEventListener("message",this.mzt),this.czt.addEventListener("messageerror",this.gzt),this.czt.addEventListener("error",this.t7)}};r();var YQ=0,KQ=class extends Co{uzt(t,e){e?this.pzt.contentWindow.postMessage({type:"message",data:t},"*",e):this.pzt.contentWindow.postMessage({type:"message",data:t},"*")}fzt(){var t;this.pzt.removeEventListener("load",this.wzt),self.removeEventListener("message",this.yzt),null==(t=this.pzt.contentWindow)||t.postMessage({type:"terminate"},"*"),Gt(this.pzt)}constructor(t,e){super(),this.wzt=()=>{this.pzt.removeEventListener("load",this.wzt),this.pzt.contentWindow.postMessage({type:"initialize",id:this.ZS,script:this.bzt},"*")},this.yzt=t=>{t.origin===this.Azt&&t.data.id===this.ZS&&("initialized"===t.data.type||("error"===t.data.type?(this.wo(new XQ(new g(t.data.data.message))),this.fzt()):this.wo(new bc("message",t.data.data))))},this.ZS=YQ++,this.bzt=t;const i=Ms.Nh("iframe.html",e);this.pzt=function(t){const e=h.createElement("iframe");return e.width="0",e.height="0",e.style.display="none",e.role="",e.src=t,h.body.appendChild(e),e}(i.href),this.Azt=i.origin,this.pzt.addEventListener("load",this.wzt),self.addEventListener("message",this.yzt)}};function jQ(t,e,i){const s=Ms.Jp(t,e);return new zQ((t=>async function(t,e,i,s){let n;try{return n=new qQ(t,i),await JQ(n,s),n}catch(t){null==n||n.fzt(),th(t)}if(QQ&&gb){let e;try{const i=await Ms.lR.Kk({Gu:t,yE:xe.GET,Yk:Rr.Ak,Vw:s});e=await i.Rk(s)}catch(t){th(t)}if(e){let t;try{const r=gb([e],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new qQ(t,i),await JQ(n,s),n}catch(t){null==n||n.fzt(),th(t),QQ=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new KQ(t,e),await JQ(n,s),n}catch(t){throw null==n||n.fzt(),t}}(s,e,i,t)))}var QQ=!0;async function JQ(t,e){const i=await t.vy(["message","error"],e);if("error"===i.type)throw function(t){return new A(Qa.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(i.error);if(!function(t){return yd(t)&&"9.2.0"===t.Szt}(i.data))throw new A(Qa.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (9.2.0).");return i}r();var $Q=function(t){return t.Tzt="MWt",t.kzt="oUt",t}({}),tJ=function(t){return t.Ezt="xzt",t.Rzt="Izt",t}({}),eJ=class{Czt(){const t=jQ(this.Pzt,this.Dzt,{name:"THEOplayer decrypt worker"});return t.yn("message",this.Nzt),t.yn("error",this.Mzt),t}MWt(t,e,i){const s=""+ ++this.Lzt,n={Bzt:$Q.Tzt,Ozt:s,Fzt:t,Vzt:e,Wzt:i},r=new os;return this.Uzt.set(s,r),null!=this.czt||(this.czt=this.Czt()),this.czt.uzt(n),r.Vb}Hw(t){void 0===t&&(t=new Bu),this.Uzt.forEach((e=>e.Fb(t))),this.Uzt.clear(),this.czt&&(this.czt.fzt(),this.czt=void 0)}constructor(t){this.czt=void 0,this.Lzt=0,this.Uzt=xu(),this.Nzt=t=>{const e=t.data,i=e.Gzt,s=this.Uzt.get(i);if(s)if(this.Uzt.delete(i),e.Hzt===tJ.Ezt)s.Ob(e.Zzt);else if(e.Hzt===tJ.Rzt){const t=e.Xzt,i=e.zzt?new g(e.zzt):void 0,n=new A(Qa.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",i);s.Fb(n)}},this.Mzt=t=>{const e=new A(Qa.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.Hw(e)},this.Dzt=t;try{this.Pzt=Ms.Jp("theoplayer.d.js",t)}catch(t){throw new A(Qa.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function iJ(t){return HQ.pT()?new HQ:new eJ(t)}function sJ(t){const e=Fo(t.boxes,oN);if(!e)return;const i=Fo(e.boxes,hN);return i?i.handlerType:void 0}function nJ(t){const e=new wy;return e.boxes.push(...t.boxes),e}function rJ(t){const e=new pc;return e.boxes.push(...t.boxes),e}r(),r(),r(),r();var oJ=8;function hJ(t,e){const i=function(t){const e=new qw;return e.boxes.push(...t.boxes),e}(t),s=uJ(e);for(let t=0;t<i.boxes.length;t++){const n=i.boxes[t];if(n===e)i.boxes[t]=new aw(new j(e.getSize()-oJ));else if(aN(n)){const e=n,r=Hr(e.boxes,(t=>t instanceof Mw&&t.trackId===s));if(r>=0){const s=e.boxes[r],n=rJ(e);n.boxes[r]=new aw(new j(s.getSize()-oJ)),i.boxes[t]=n}}}return i}function aJ(t,e){const i=function(t){const e=new sy;return e.boxes.push(...t.boxes),e}(t);for(let t=0;t<i.boxes.length;t++){const s=i.boxes[t];if(lN(s)){const n=Fo(s.boxes,dN);n&&n.trackId===e&&(i.boxes[t]=new aw(new j(s.getSize()-oJ)))}}return i}function uJ(t){return Fo(t.boxes,rN).trackId}function cJ(t,e,i,s){const n=Fo(t.boxes,dN),r=i.uV(e).WF();let o=vo.ZERO;for(const e of t.boxes){if(e instanceof mc){o=cf(e.baseMediaDecodeTime,r),e.baseMediaDecodeTime=e.baseMediaDecodeTime.subtract(o);break}if(e instanceof jw){o=cf(vo.fromNumber(e.baseMediaDecodeTime),r),e.baseMediaDecodeTime-=o.toNumber();break}}if(o.isZero())return;const h=Fo(t.boxes,fN);if(void 0!==h&&h.samples.length>0){const t=h.samples;if(!h.flags.sampleDurationPresent){h.flags.sampleDurationPresent=!0;const e=null!=s?s:n.defaultSampleDuration;for(const i of t)i.duration=e}t[0].duration+=o.toNumber(),h.samples=t}}r();var lJ="Mp4Transmuxer",dJ=class extends sQ{iHt(t,e){J(e);const i=t.cLt,s=ON(ra(t.iOt.qk.qk));if(!s)throw new g("Mp4Transmuxer - Unable to parse "+i.Aw+" MP4 initializer.");this.S2=s;const n=function(t){let e,i;for(const s of t.Z)e||(e=s.n1),i||(i=s.s1);if(e||i)return{sPt:e,rPt:i,pBt:void 0};return}(s);n&&this.rHt(i,n);const r=function(t){for(const e of t.Z)if(void 0!==e.o1)return e.o1;return}(s);void 0!==r&&this.oHt(i,r);const o=function(t){var e;const i=ky(t),s=Fo(i.boxes,sN),n=s.boxes.filter(nN),r=Fo(n,(t=>sJ(t)===pw.AUDIO)),o=Fo(n,(t=>sJ(t)===pw.VIDEO)),h={sPt:{TN:r?uJ(r):void 0},rPt:{TN:o?uJ(o):void 0}},a=null==(e=Fo(s.boxes,aN))?void 0:e.boxes.filter(uN);var u,c;const l=a?{sPt:null!=(u=Fo(a,(t=>t.trackId===h.sPt.TN)))?u:void 0,rPt:null!=(c=Fo(a,(t=>t.trackId===h.rPt.TN)))?c:void 0}:void 0;var d,f;if(l&&(h.sPt.KM=null==(d=l.sPt)?void 0:d.defaultSampleDuration,h.rPt.KM=null==(f=l.rPt)?void 0:f.defaultSampleDuration),!r||!o)return{sPt:r?t:void 0,rPt:o?t:void 0,XV:h};const _=nJ(i),v=nJ(i),m=i.boxes.indexOf(s);_.boxes[m]=hJ(s,o),v.boxes[m]=hJ(s,r);const g=_.serialize().join(),p=v.serialize().join();return{sPt:g,rPt:p,XV:h}}(t.iOt.qk.qk);if(this.qzt=o.XV,o.rPt){const e=Fo(s.Z,(t=>t.TN===o.XV.rPt.TN)),i={Aw:"bCt",qk:{Aw:Ce.tJ,qk:o.rPt},bat:ee._E,rOt:t.rOt,lHt:{Zrt:'video/mp4; codecs="'+e.s1+'"',QBt:t.QBt},FO:t.FO,cLt:t.cLt,CWt:t.iOt.CWt};this.TGt(i)}if(o.sPt){const e=Fo(s.Z,(t=>t.TN===o.XV.sPt.TN)),i={Aw:"bCt",qk:{Aw:Ce.tJ,qk:o.sPt},bat:ee.fE,rOt:t.rOt,lHt:{Zrt:'audio/mp4; codecs="'+e.n1+'"',QBt:t.QBt},FO:t.FO,cLt:t.cLt,CWt:t.iOt.CWt};this.TGt(i)}return Promise.resolve()}async nHt(t,e){J(e);const i=t.But.CWt;_t.DN(lJ,"Transmuxing fMP4: "+on(i.Pyt));const s=t.But.qk,n=fJ(s.qk,this.S2),r=Km(n.map((t=>t.uit)),tE);if(void 0!==r&&(i.cit=r,this.aHt(t.cLt)),!this.pVt.zFt(t.rOt)){const s=Oo.fV(i.FO);if(n.length>0){const e=Km(n.map((t=>t.Yzt)),tE);for(const n of this.KGt)this.pVt.nVt(t.rOt,n,e,s,_J(i),!1);this.aHt(t.cLt)}this.pVt.zFt(t.rOt)||await ou(this.pVt.YFt(t.rOt),e)}const o=this.pVt.tVt(t.rOt),h=i.cit?this.pVt.eVt(i.cit,i).dF():i.FO,a=nQ(i,h);var u;const c={BGt:a,OGt:rQ(i,a),FO:h,ct:null!=(u=i.ct)?u:0,MV:o.dF(),rOt:t.rOt,cLt:t.cLt,CWt:t.But.CWt},l=function(t,e){if(void 0===e.sPt.TN)return{sPt:void 0,rPt:t};if(void 0===e.rPt.TN)return{sPt:t,rPt:void 0};const i=ky(t),s=nJ(i),n=nJ(i);for(let t=0;t<i.boxes.length;t++){const r=i.boxes[t];cN(r)&&(s.boxes[t]=aJ(r,e.rPt.TN),n.boxes[t]=aJ(r,e.sPt.TN))}const r=s.serialize().join(),o=n.serialize().join();return{sPt:r,rPt:o}}(s.qk,this.qzt);if(l.rPt){var d;const e=this.qzt.rPt.TN,s=Fo(this.S2.Z,(t=>t.TN===e)),o=Fo(n,(t=>t.TN===e)),h=this.Kzt(l.rPt,s,o,null==(d=this.qzt)?void 0:d.rPt.KM,i);this.jzt=s,this.hHt(t.cLt,i,o.uit.SF(r));const a=Bo({Aw:"But",qk:{Aw:Ce.tJ,qk:h},bat:ee._E},c);this.TGt(a)}if(l.sPt){const t=Bo({Aw:"But",qk:{Aw:Ce.tJ,qk:l.sPt},bat:ee.fE},c);this.TGt(t)}this.Qzt=i,this.Jzt=n}Kzt(t,e,i,s,n){if(!_J(n))return t;if(!this.Qzt||!this.jzt||!this.Jzt)return t;const r=this.jzt.TN,o=Fo(this.Jzt,(t=>t.TN===r)),h=this.pVt.eVt(o.$zt,this.Qzt),a=this.pVt.eVt(i.uit,n).SF(h).uV(e._N);if(a.gF(Oo.CF))return t;if(a.fF(Oo.fV(.5)))return t;const u=Wu(n)?n:n.DOt;return _t.DLt(lJ,"Stretching first video frame of segment #"+u.UBt+" to fill gap of "+a.dF()+"s"),function(t,e,i,s){const n=ky(t),r=Fo(n.boxes,cN);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof Eh&&cJ(t,e,i,s);const n=r.getSize();if(n!==t){const e=n-t;for(const t of r.boxes)t instanceof Eh&&_N(t,e)}}return n.serialize().join()}(t,e._N,a,s)}constructor(...t){super(...t),this.S2=void 0,this.qzt=void 0,this.Qzt=void 0,this.Jzt=void 0,this.jzt=void 0}};function fJ(t,e){const i=dn(rr.jD(ra(t)),Tt.nD);if(!i)throw new g("Mp4Transmuxer - Unable to parse segment or part.");return function(t,e){const i=[];for(const n of t.Z){if(!n.oL||0===n.rL.length||0===n.rL[0].dL.length)continue;const t=n.HD.TN,r=Fo(e.Z,(e=>e.TN===t));let o=0,h=1/0,a=0;const u=n.HD.KM||0;for(const t of n.rL)for(const e of t.dL){const t=e.fL||0,i=o+t;var s;o+=null!=(s=e.ct)?s:u;const n=o+t;i<h&&(h=i),n>a&&(a=n)}const c=Oo.xF(n.oL.oL,r._N);i.push({TN:t,Yzt:c,uit:c.SO(Oo.RF(h,r._N)),tqt:c.SO(Oo.RF(o,r._N)),$zt:c.SO(Oo.RF(a,r._N))})}return i}(i,e)}function _J(t){return Wu(t)?t.eOt:0===t.MOt&&t.DOt.eOt}var vJ="MpegtsTransmuxer",mJ=class extends dJ{iHt(t,e){return super.iHt(t,e)}$Gt(t,e){if(super.$Gt(t,e),this.tx.eqt())return;var i;const s=null!=(i=null==e?void 0:e.Pyt)?i:t.Pyt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.Dx)&&this.tx.iqt()}sqt(t){let e;return t.cLt===this.nqt&&this.rqt.has(t.rOt)?e=this.rqt.get(t.rOt):(e=kQ(t.But.qk.qk),this.nqt=t.cLt,this.rqt.set(t.rOt,e)),e}async nHt(t,e){J(e);const i=this.sqt(t),s=t.But;if(i!==TQ.FHt&&i!==TQ.VHt)return super.nHt(t,e);if(s.CWt.QBt.some(pJ))throw new A(Qa.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.tx.iqt();let r;i===TQ.FHt?(_t.DN(vJ,"Transmuxing MPEG-TS: "+on(s.CWt.Pyt)),r=await n.oqt({data:s.qk.qk,metadata:this.hqt})):(_t.DN(vJ,"Transmuxing raw audio: "+on(s.CWt.Pyt)),r=await n.aqt({data:s.qk.qk,metadata:this.hqt})),J(e),this.rHt(t.cLt,{sPt:r.metadata.audio_codec,rPt:r.metadata.video_codec,pBt:void 0}),r.metadata.video_frame_rate&&this.oHt(t.cLt,r.metadata.video_frame_rate);const o=wJ(r.metadata.first_decode_timestamp),h=wJ(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?wJ(r.metadata.first_video_presentation_timestamp):void 0;if(s.CWt.cit=h,this.aHt(t.cLt),void 0!==a&&this.hHt(t.cLt,s.CWt,function(t,e){let i=t.SF(e);return i.wF(Oo.CF)&&(i=i.SO(sE())),i}(a,h)),!this.pVt.zFt(t.rOt)){const i=Oo.fV(s.CWt.FO);for(const e of this.KGt)this.pVt.nVt(t.rOt,e,o,i,_J(s.CWt),!0);this.aHt(t.cLt),this.pVt.zFt(t.rOt)||await ou(this.pVt.YFt(t.rOt),e)}const u=this.pVt.sVt(o,s.CWt);this.hqt=r.metadata;const c=this.pVt.eVt(h,s.CWt).dF(),l=nQ(s.CWt,c);var d;const f={BGt:l,OGt:rQ(s.CWt,l),FO:c,ct:null!=(d=s.CWt.ct)?d:0,MV:u.dF(),rOt:t.rOt,cLt:t.cLt,CWt:s.CWt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.KGt){const e=Bo({Aw:"But",qk:void 0,bat:t},f);this.TGt(e)}return}const _=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.uqt||this.cqt!==t.rOt||!_e(this.uqt,r.data.audio_init))){const e=this.pVt.eVt(s.CWt.cit,s.CWt).dF(),i={Aw:"bCt",qk:{Aw:Ce.tJ,qk:r.data.audio_init},bat:ee.fE,rOt:t.rOt,lHt:{Zrt:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',QBt:s.CWt.QBt},FO:e,cLt:t.cLt,CWt:s.CWt};this.uqt=r.data.audio_init,this.cqt=t.rOt,this.TGt(i)}const e=Bo({Aw:"But",qk:{Aw:Ce.tJ,qk:r.data.audio_media},bat:ee.fE},f);this.TGt(e)}else if(t.But.CWt.COt&&ms(this.KGt,ee.fE)){const t=Bo({Aw:"But",qk:void 0,bat:ee.fE},f);this.TGt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.lqt||this.dqt!==t.rOt||!_e(this.lqt,r.data.video_init))){const e=this.pVt.eVt(s.CWt.cit,s.CWt).dF(),i={Aw:"bCt",qk:{Aw:Ce.tJ,qk:r.data.video_init},bat:ee._E,rOt:t.rOt,lHt:{Zrt:'video/mp4; codecs="'+r.metadata.video_codec+'"',QBt:s.CWt.QBt},FO:e,cLt:t.cLt,CWt:s.CWt};this.lqt=r.data.video_init,this.dqt=t.rOt,this.fqt=ON(ra(r.data.video_init)),this.TGt(i)}const e=this.fqt.Z[0],i=fJ(r.data.video_media,this.fqt)[0],n=this.Kzt(r.data.video_media,e,i,void 0,s.CWt);this.jzt=e;const o=Bo({Aw:"But",qk:{Aw:Ce.tJ,qk:n},bat:ee._E},f);this.TGt(o),_.push(i)}else if(t.But.CWt.COt&&ms(this.KGt,ee._E)){const t=Bo({Aw:"But",qk:void 0,bat:ee._E},f);this.TGt(t)}this.Qzt=s.CWt,this.Jzt=_}Yw(){this.uqt=void 0,this.lqt=void 0,this.cqt=-1,this.dqt=-1,super.Yw()}constructor(t,e,i,s){super(e,i,s),this.hqt=void 0,this.uqt=void 0,this.lqt=void 0,this.fqt=void 0,this.cqt=-1,this.dqt=-1,this.nqt=void 0,this.rqt=ea(),this.tx=t}},gJ=class{pTt(t,e,i){return new mJ(this,t,e,i)}};function pJ(t){return t.yE===$t.rBt}function wJ(t){return Oo.xF(vo.fromBits(t.low,t.high),t.base)}r(),r();var yJ=function(t){return t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4",t}({}),bJ=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=Z.wm;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(mg("AGFzbQEAAAA="))}catch(t){return!1}}();return bJ=()=>t,t};var AJ=class{oqt(t){return this._qt(yJ.MPEGTS_TO_FMP4,t)}aqt(t){return this._qt(yJ.RAW_AUDIO_TO_FMP4,t)}Czt(){const t=jQ(this.Pzt,this.Dzt,{name:"THEOplayer transmux worker"});return t.yn("message",this.Nzt),t.yn("error",this.Mzt),t}_qt(t,e){const i=++this.Lzt,s={type:t,id:i,input:e},n=new os;return this.Uzt.set(i,n),this.czt.uzt(s),n.Vb}Hw(t){void 0===t&&(t=new Bu),this.Uzt.forEach((e=>e.Fb(t))),this.Uzt.clear(),this.czt.fzt()}constructor(t){this.Lzt=0,this.Uzt=ea(),this.Nzt=t=>{const e=t.data;if(void 0!==e.requestId){const t=this.Uzt.get(e.requestId);if(!t)return;this.Uzt.delete(e.requestId),e.success?t.Ob(e.output):t.Fb(new A(e.errorCode,e.error))}else e.success||this.Hw(new A(e.errorCode,e.error))},this.Mzt=t=>{const e=new A(Qa.MEDIA_DECODE_ERROR,t.error.message,t.error);this.Hw(e)},this.Dzt=t;const e=bJ()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.Pzt=Ms.Jp(e,t)}catch(t){throw new A(Qa.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.czt=this.Czt()}},SJ=class extends gJ{eqt(){return void 0!==this.czt}iqt(){var t;return null!=(t=this.czt)?t:this.czt=new AJ(this.vqt)}Hw(){this.czt&&(this.czt.Hw(),this.czt=void 0)}constructor(t){super(),this.vqt=t,this.czt=void 0}},TJ=class{fit(){return new SJ(this.vqt)}constructor(t){this.vqt=t}},kJ=class extends NQ{AI(){return this.FB.AI()}get yI(){return this.FB.yI}set yI(t){this.FB.yI=t}async gn(){var t;await super.gn(),null==(t=this.pxt)||t.gn()}constructor(t,e,i,s,n,r,o,h){super(t,e,i,s,n,r,o,h),Z.$m&&(this.pxt=new RV(this))}},EJ=class extends kJ{async gn(){await super.gn(),await this.wH.pH(this.FB)}constructor(t,e,i,s,n,r,o,h){const a=new ut(t);super(a.LH(ee._E),e,i,s,n,r,o,h),this.wH=a}},xJ=class extends MQ{async BH(t,e){return!!Bf(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(Z.iu||Z.Ig))&&super.BH(t,e))}async OH(t){return!(t.clearkey&&!t.fairplay&&Z.$m)&&super.OH(t)}};O(new class extends xJ{hP(t,e,i,s,n,r,o){return new EJ(e,i,n,r,iJ(s.libraryLocation),new TJ(s.libraryLocation),new sV(hu.Fg.Rrt,hu.Fg.xrt,hu.Fg.Ert,hu.Fg.Crt),s)}FH(){return!0}constructor(...t){super(...t),this.VH=Zt.zC}}),_t.Rt=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)},r(),r(),r(),r();var RJ=class{hrt(t,e){return Promise.resolve(!1)}urt(t,e){return Promise.resolve(void 0)}nrt(t){return Promise.resolve(void 0)}xQ(t){return Promise.resolve(void 0)}},IJ=class extends Co{mqt(){var t;return null==(t=this.gqt)?void 0:t.tLt}Cn(){ah(Ci((()=>this.pqt(this.WT.Vw)),this.WT.Vw))}async pqt(t){await this.aEt.WVt(t),this.wqt&&(this.yqt(this.wqt.ji,this.wqt.Ti),this.wqt=void 0),this.I6=!0}bqt(t,e){this.I6?this.yqt(t,e):this.wqt={ji:t,Ti:e}}yqt(t,e){const i=this.Aqt(t,e),s=null==i?void 0:i.OLt[0];s!==this.gqt&&(this.Sqt(),void 0!==s&&(this.gqt=s,this.Tqt=new cc(this.aEt,s),this.Tqt.XWt()))}Sqt(){this.gqt=void 0,this.Tqt&&(this.Tqt.Hw(),this.Tqt=void 0)}Aqt(t,e){const i=Fo(this.aEt.Pr.LLt,(i=>void 0!==i.zCt&&i.zCt.ji===t&&i.zCt.Ti===e));return null!=i?i:this.aEt.Pr.LLt[0]}gn(){this.$o(),this.WT.Yw(),this.WT.Hw(),this.Sqt(),this.aEt.Hw()}constructor(t,e,i){super(),this.gqt=void 0,this.Tqt=void 0,this.wqt=void 0,this.WT=new da,this.kqt=()=>{this.wo(new Al)},this.Cc=t,this.aEt=new bj(i,new RJ,t.useCredentials,t.src,t.liveOffset),this.aEt.yn(Ti.Wy,this.Ds),this.I6=!1}};r();var CJ=class extends sn{get ht(){return this.f9.ht}get gR(){return this.f9.gR}get wR(){return this.f9.wR}set wR(t){this.f9.wR=t}get bt(){return this.f9.bt}get SR(){return this.f9.SR}set SR(t){this.f9.SR=t}ER(t,e){this.SR=t}get ct(){return this.f9.ct}get RR(){return this.f9.RR}get DR(){return this.f9.DR}get MR(){return this.f9.MR}get lt(){return this.f9.lt}get OR(){return this.f9.OR}get WR(){return this.f9.WR}get GR(){return this.f9.GR}set GR(t){this.f9.GR=t}get XR(){return this.f9.XR}get qR(){return this.f9.qR}get KR(){return this.f9.KR}set KR(t){this.f9.KR=t}get JR(){return this.f9.JR}get tI(){return this.f9.tI}set tI(t){this.f9.tI=t}get sI(){return this.f9.sI}get rI(){return this.f9.rI}get hI(){return this.f9.hI}get QG(){return this.f9.QG}get nt(){return this.f9.nt}get cI(){return this.f9.cI}get rt(){return this.f9.rt}get fI(){return this.f9.fI}get vI(){return this.f9.vI}set vI(t){this.f9.vI=t}get pI(){return this.f9.pI}get yI(){return this.f9.yI}set yI(t){this.f9.yI=t}get $G(){return this.f9.$G}get qB(){}xI(){return this.f9.xI()}bI(){return this.f9.bI()}Sa(){return this.f9.Sa()}LI(t){return this.f9.LI(t)}AI(){return this.f9.AI()}be(){return this.f9.be()}CI(){return this.f9.CI()}DI(){return this.f9.DI()}TI(){return this.f9.TI()}kI(){return this.f9.kI()}er(){return this.f9.er()}xa(t,e,i){return this.f9.xa(t,e,i)}ge(){return this.f9.ge()}RI(){return this.f9.RI()}II(){return this.f9.II()}gn(){this.$o();for(const t of PI)this.f9.fn(t,this.Ds);return this.f9.gn()}constructor(t){super(),this.f9=t;for(const t of PI)this.f9.yn(t,this.Ds)}},PJ=class extends CJ{async xa(t,e,i){await super.xa(t,e,i),t.hlsDateRange&&this.Eyt(t,e)}Eyt(t,e){this.Eqt=new IJ(t,e,this.xqt),this.Eqt.yn(Ti.Wy,this.handleManifestUpdate),this.Eqt.Cn()}er(){return this.aWt&&(this.nt.it(this.aWt),this.f8.it(this.aWt),this.aWt.gn(),this.aWt=void 0,this.Rqt=!1),this.Eqt&&(this.Eqt.gn(),this.Eqt=void 0),this.f8.er(),super.er()}gn(){return this.fn(Ti.Yy,this.szt),this.Eqt&&(this.Eqt.gn(),this.Eqt=void 0),this.f8.gn(),super.gn()}constructor(t,e,i){super(t),this.Eqt=void 0,this.Rqt=!1,this.aWt=void 0,this.handleManifestUpdate=()=>{const t=this.Eqt.mqt();if(t){const e=this.QG;if(e){const i=e.getTime();let s=this.aWt;s||(s=new QK,this.aWt=s),s.tr(t.oOt,(t=>(t.getTime()-i)/1e3)),!this.Rqt&&s.L.V>0&&(this.nt.tt(s),this.f8.tt(s),this.Rqt=!0)}}},this.szt=()=>{this.Eqt&&this.Eqt.bqt(this.fI,this.cI)},this.xqt=e,this.f8=new su(this),this.yn(Ti.Yy,this.szt)}};!function(t){TI.WH().UH(t)}((function(t,e,i){return new PJ(t,e,i)})),r(),r(),r(),r();var Xi=class extends z{get name(){return"CastError"}constructor(t,e=""){super("An error occurred while casting."),this.errorCode=t,this.description=e}};async function DJ(t){LJ()||await async function(t){if(null==t?void 0:t.Bw)return Promise.reject(new Bu);const{Vb:e,Ob:i,Fb:n}=function(){let t,e;return{Vb:new Promise(((i,s)=>{t=i,e=s})),Ob:t,Fb:e}}(),r=s.__onGCastApiAvailable,o=()=>{s.__onGCastApiAvailable=r,n(new Bu)};return s.__onGCastApiAvailable=(e,h)=>{e?i():n(new g(h)),null==t||t.Ow(o),s.__onGCastApiAvailable=r,r&&r(e,h)},null==t||t.Fw(o),e}(t),MJ()||await Fe(100,t),MJ()||(Ms.Op('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await NJ())}var NJ=yl((()=>function(t){return new Promise(((e,i)=>{const s=h.createElement("script");s.onload=()=>e(),s.onerror=t=>i((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch((()=>{throw new Xi("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))));function MJ(){return Boolean("undefined"!=typeof cast&&cast.framework)}function LJ(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function BJ(t,e,i,s){if(ji(e))for(const i of w.keys(e)){if("type"===i||"images"===i)continue;const s=e[i];ji(s)&&(t[i]=s)}!function(t,e,i,s){if(!ji(i)&&!ji(null==e?void 0:e.images))return;t.images=[],i&&t.images.push(new s.Image(i));if(null==e?void 0:e.images)if(Yt(e.images))t.images.push(new s.Image(e.images));else if(rl(e.images))for(const i of e.images){let e;var n,r;if(Yt(i))e=new s.Image(i);else e=new s.Image(i.src),e.height=null!=(n=i.height)?n:null,e.width=null!=(r=i.width)?r:null;t.images.push(e)}}(t,e,i,s)}function OJ(t,e,i){return void 0===i&&(i=chrome),function(t,e,i){switch(null==t?void 0:t.type){case"movie":{const s=new i.MovieMediaMetadata;return BJ(s,t,e,i),s}case"audio":{const s=new i.MusicTrackMediaMetadata;return BJ(s,t,e,i),!ji(s.artist)&&ji(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new i.TvShowMediaMetadata;return BJ(s,t,e,i),!ji(s.title)&&ji(t.episodeTitle)&&(s.title=t.episodeTitle),!ji(s.season)&&ji(t.seasonNumber)&&(s.season=t.seasonNumber),!ji(s.episode)&&ji(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new i.GenericMediaMetadata;return BJ(s,t,e,i),s}}}(t,e,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(i))}function FJ(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function VJ(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return Fo(t.items,(e=>e.itemId===t.currentItemId))}r(),r(),r(),r(),r();var WJ="urn:x-cast:com.theoplayer.cast";r(),r();var UJ=function(t){return t.Iqt="theoplayer_receiver_info",t.Cqt="theoplayer_trackpropertychange",t.Pqt="theoplayer_propertychange",t}({});r();var GJ=function(t){return t.SKIP_AD="SKIP_AD",t}({});r();function Ir(t){h.createElement("img").src=t}r(),r(),r();var HJ=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function ZJ(t){if(!Yt(t))return;const e=t.match(HJ);return e?3600*x(e[1],10)+60*x(e[2],10)+Number(e[3])+(Number(e[4])||0)/1e3:void 0}function XJ(t){if(void 0===t)return;const e=t.match(/^([1-9]?\d|100)%$/);return e?x(e[1])/100:void 0}function bt(t,e){return"vmap"===t.type||!ji(t.type)&&!ji(e)}function zJ(t,e){return"vast"===t.type||!ji(t.type)&&ji(e)}r(),r(),r();var qJ=class{},YJ=class extends qJ{get Dqt(){return this.Uc}Nqt(){return null!=this.Mqt||(this.Mqt=Qe(this.Uc,(t=>t.Nqt()))),this.Mqt}constructor(t){super(),this.Uc=t.sort(((t,e)=>t.eL-e.eL))}};r(),r();var KJ=class extends qJ{get o(){return this.Lqt}get eL(){return this.Bqt}get Oqt(){return this.Fqt}constructor(t,e){super(),this.Lqt=t,this.Bqt=e,this.Fqt=!1}},jJ=class extends KJ{get Vqt(){return this.Wqt}get Uqt(){return this.Gqt}get Hqt(){return this.Zqt}get Xqt(){return this.zqt}get lt(){return this.zG}Nqt(){if(void 0===this.qqt){let t,e,i,s=[];for(const n of this.Wqt)n.Yqt&&(t=n.Yqt),n.Kqt&&(e=n.Kqt),n.jqt&&(i=n.jqt),s=s.concat(n.universalAdIds);this.qqt={Xqt:this.Xqt,Yqt:t,Qqt:e,jqt:i,lt:this.lt,Jqt:s}}return[this.qqt]}constructor(t,e,i,s,n,r,o){super(t,e),this.Gqt=i,this.Zqt=s,this.zqt=n,this.Wqt=r,this.zG=o}};r(),r();var QJ=class{get $qt(){return this.tYt}get eYt(){return this.iYt}constructor(t,e){this.tYt=t,this.iYt=e}},JJ=class{get sYt(){return this.nYt}get rYt(){return this.oYt}get hYt(){return this.aYt}get uYt(){return this.cYt}get td(){return this.lYt}set td(t){this.lYt=t}get dYt(){return this.fYt}get _Yt(){return this.vYt}mYt(){this.vYt=!0}get Uqt(){return this.Gqt}constructor(t,e,i,s,n,r){this.nYt=t,this.oYt=e,this.aYt=i,this.cYt=s,this.vYt=!1,this.fYt=n,this.Gqt=r}};r();var $J=function(t){return t.gYt="all",t.pYt="any",t.QH="none",t}({});var t$=class{get wYt(){return this.yYt}get bYt(){return this.AYt}constructor(t,e){this.yYt=t,this.AYt=e}},e$=class{get o(){return this.ZS}get ji(){return this.zA}get Ti(){return this.qA}get SYt(){return this.TYt}get kYt(){return this.EYt}get xYt(){return this.RYt}get IYt(){return this.CYt}get PYt(){return this.DYt}get NYt(){return this.MYt}get LYt(){return this.BYt}get sYt(){return this.nYt}get rYt(){return this.oYt}get hYt(){return this.aYt}get OYt(){return this.FYt}get eYt(){return this.VYt}get WYt(){return this.UYt}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d,f,_,v){this.zA=t,this.qA=e,this.ZS=i,this.TYt=s,this.EYt=n,this.RYt=r,this.CYt=o,this.DYt=h,this.MYt=a,this.BYt=u,this.nYt=c,this.oYt=l,this.aYt=d,this.FYt=f,this.VYt=_,this.UYt=v}};r();var i$=class{get id(){return this.ZS}get uri(){return this.OOt}constructor(t,e){this.ZS=t,this.OOt=e}},Pr=class{get GYt(){return this.HYt}get ZYt(){return this.XYt}get zYt(){return this.qYt}get YYt(){return this.KYt}constructor(t,e,i,s){this.HYt=t,this.XYt=e,this.qYt=i,this.KYt=s}},s$=class extends KJ{get Xqt(){return this.zqt}get jYt(){return this.QYt}get JYt(){return this.$Yt}get Vqt(){return this.Wqt}get tKt(){return this.eKt}get iKt(){return this.sKt}get lt(){return this.zG}Nqt(){return void 0===this.QYt?[]:(null!=this.Mqt||(this.Mqt=this.QYt.Nqt().map((t=>this.nKt(t)))),this.Mqt)}nKt(t){let e,i,s;for(const t of this.Vqt)t.Yqt&&(e=t.Yqt),t.Kqt&&(i=t.Kqt),t.jqt&&(s=t.jqt);const n=t.Xqt.concat(this.Xqt);let r=t.Yqt;if(e&&t.Yqt){const i=new Pr(t.Yqt.rKt.GYt,t.Yqt.rKt.ZYt,t.Yqt.rKt.zYt.concat(e.rKt.zYt),t.Yqt.rKt.YYt.concat(e.rKt.YYt));r=t.Yqt,r.rKt=i,r.eYt=r.eYt.concat(e.eYt)}let o=t.Qqt;if(i&&i.$qt){var h,a;const s=[];for(const t of i.$qt)s.concat(t.uYt.zYt);const n=[];var u,c;for(const i of null!=(u=null==(h=t.Qqt)?void 0:h.$qt)?u:[]){var l,d,f;const r=new Pr(i.uYt.GYt,i.uYt.ZYt,i.uYt.zYt.concat(s),(null!=(d=null==(l=t.Yqt)?void 0:l.rKt.YYt)?d:[]).concat(null!=(f=null==e?void 0:e.rKt.YYt)?f:[]));n.push(new JJ(i.sYt,i.rYt,i.hYt,r,i.dYt,i.Uqt))}o=new QJ(n,(null!=(c=null==(a=t.Qqt)?void 0:a.eYt)?c:[]).concat(i.eYt))}let _=t.jqt;if(_){var v;let e=_.wYt;var m,g;s&&s.wYt&&(e=s.wYt),_=new t$(e,(null!=(m=null==(v=t.jqt)?void 0:v.bYt)?m:[]).concat(null!=(g=null==s?void 0:s.bYt)?g:[]))}let p=t.lt;return this.lt&&(p=this.lt),{Xqt:n,Yqt:r,Qqt:o,jqt:_,lt:p,Jqt:t.Jqt}}constructor(t,e,i,s,n,r,o,h,a){super(t,e),this.zqt=i,this.QYt=s,this.$Yt=n,this.Wqt=r,this.eKt=o,this.sKt=h,this.zG=a}};r();var n$=class{get o(){return this.ZS}get oKt(){return this.hKt}get aKt(){return this.uKt}get PYt(){return this.DYt}get Yqt(){return this.cKt}get Kqt(){return this.lKt}get jqt(){return this.dKt}get universalAdIds(){return this.fKt}constructor(t,e,i,s,n,r,o,h){this.ZS=t,this.hKt=e,this.uKt=i,this.DYt=s,this.cKt=n,this.lKt=r,this.dKt=o,this.fKt=h}};r();var r$=class{get ct(){return this._Kt}get vKt(){return this.mKt}get eYt(){return this.iYt}set eYt(t){this.iYt=t}set rKt(t){this.gKt=t}get rKt(){return this.gKt}get pKt(){return this.wKt}set pKt(t){this.wKt=t}get yKt(){return this.vYt}get td(){return this.lYt}set td(t){this.lYt=t}get dYt(){return this.fYt}get Uqt(){return this.Gqt}mYt(){this.vYt=!0}get bKt(){return this.AKt}set bKt(t){this.AKt=t}get SKt(){return this.TKt}constructor(t,e,i,s,n,r,o,h){this._Kt=t,this.mKt=e,this.iYt=i,this.gKt=s,this.wKt=n,this.vYt=!1,this.fYt=r,this.Gqt=o,this.TKt=h}};function re(t,e){return a$(t)&&t.getAttribute(e)||void 0}function o$(t,e){return h$(t,e,void 0,!1)}function h$(t,e,i,s){return e===(t.localName?t.localName:t.nodeName)&&(s&&i?i===t.namespaceURI:!i||!t.namespaceURI||i===t.namespaceURI)}function fs(t,e){const i=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);a$(n)&&o$(n,e)&&i.push(n)}return i}function a$(t){return t&&1===t.nodeType}function u$(t,e){const i=(new DOMParser).parseFromString(t,e);if(!i||i.getElementsByTagName("parsererror").length>0)throw new g('Invalid document for MIME type "'+e+'"');return i}function c$(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function l$(t){return"data:application/xml,"+encodeURIComponent(t)}r(),r();var dc=function(t){return t.kKt="mute",t.EKt="unmute",t.Zy="pause",t.xKt="resume",t.RKt="rewind",t.IKt="skip",t.CKt="playerExpand",t.PKt="playerCollapse",t.DKt="fullscreen",t.NKt="exitFullscreen",t.MKt="expand",t.COLLAPSE="collapse",t.oTt="start",t.LKt="firstQuartile",t.BKt="thirdQuartile",t.OKt="midpoint",t.FKt="complete",t.VKt="acceptInvitationLinear",t.WKt="acceptInvitation",t.UKt="timeSpentViewing",t.GKt="otherAdInteraction",t.Xy="progress",t.HKt="creativeView",t.ZKt="adExpand",t.XKt="adCollapse",t.zKt="minimize",t.qKt="close",t.YKt="closeLinear",t.KKt="overlayViewDuration",t.jKt="breakStart",t.QKt="breakEnd",t.da="error",t}({});function d$(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}var f$=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function _$(t){return void 0!==t&&-1!==f$.indexOf(t)}var v$=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function m$(t){return void 0!==t&&-1!==v$.indexOf(t)}var g$=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function p$(t){return void 0!==t&&-1!==g$.indexOf(t)}function w$(t,e){if(void 0===t||""===t||void 0===e)return;let i=t.match(/^(\d+):(\d+):(\d+)$/);return i?C(i[1]||"0")+60*C(i[2]||"0")+C(i[3]||"0"):(i=t.match(/^(100|[1-9]\d|\d)%$/),i?C(i[1]||"0")*e/100:void 0)}var y$=class{get FX(){return this.JKt}get ec(){return this.$Kt}get eventURL(){return this.tjt}constructor(t,e,i){this.JKt=t,this.$Kt=e,this.tjt=i}};r();var b$=class{get ejt(){return this.ijt}constructor(t){this.ijt=t}},A$=class extends b${get GYt(){return this.HYt}get WYt(){return this.UYt}get sjt(){return this.njt}constructor(t,e,i,s){super(t),this.njt=e,this.HYt=i,this.UYt=s}},S$=class extends b${constructor(t){super(t)}},T$=class extends b${constructor(t){super(t)}};r();var k$={rjt:{Wb:100,gb:"XML parsing error."},ojt:{Wb:303,gb:"Empty or invalid VAST error."},hjt:{Wb:400,gb:"General linear error"},ajt:{Wb:403,gb:"Unsupported MIME-type or missing mediafiles error"},ujt:{Wb:500,gb:"General nonlinear error"},dX:{Wb:900,gb:"Network error"}},E$=class{get cjt(){return this.ljt}djt(t){if(!this.cjt)return;const e=this.cjt.replace(/\[ERRORCODE]/,""+t.Wb);Ir(e)}constructor(t){this.ljt=t}};r();var Gr=class extends z{get fjt(){return this._jt}get vjt(){var t;return null!=(t=this.mjt)?t:900}constructor(t,e,i,s){super(i||e&&x$[e]||t,s),this._jt=t,this.mjt=e,this.gjt=i}},Fc=function(t){return t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general",t}({}),$s=function(t){return t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED",t}({}),x$={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function R$(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case nl.zC:case nl.qC:case nl.XC:return!0;default:return!1}}function I$(t){const e=Hd();return!!(R$(t)||t&&e&&(null==e?void 0:e.canPlayType)&&e.canPlayType(t))||(Eo("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function C$(t,e){for(const i of e){new E$(i).djt(t)}}function Eo(t){0}r(),r();var P$=class{get pjt(){return this.wjt}get yjt(){return this.bjt}constructor(t,e){this.wjt=t,this.bjt=e}},D$=class t{async Ajt(e,i){if(bt(e.sources,e.timeOffset)){const s=await t.Sjt(e.sources.src,i),n=s&&s.documentElement;if(!n)throw new Gr(Fc.NETWORK,$s.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(o$(n,"VMAP"))return await this.Tjt(n,e,i);if(o$(n,"VAST")){const t=await this.kjt(n,i,!1);if(t){const i=new B$("",!0,!0,t);return[new Tc("start",i,N$.Ejt,"",[],!1,!0,e)]}return[]}throw new Gr(Fc.GENERAL,$s.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(zJ(e.sources,e.timeOffset))return[new L$(String(e.timeOffset),e,i)];throw new Gr(Fc.GENERAL,$s.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async xjt(e,i,s,n){let r;void 0===n&&(n=[]);try{r=await t.Sjt(e,i)}catch(t){throw C$(t instanceof Gr&&t.vjt===$s.VAST_MALFORMED_RESPONSE?k$.ojt:k$.dX,n),t}const o=r&&r.documentElement;if(o&&o$(o,"VAST"))return await this.kjt(o,i,s,n);o&&o$(o,"VMAP")&&ct("Received VMAP ad when expecting VAST. Please set the type of your ad source in the configuration, or make sure to not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included.")}async Rjt(t,e,i,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new Gr(Fc.GENERAL,$s.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.xjt(t.sources.src,s,!1),o=new B$("",!0,!0,r),h=new Tc(e,o,N$.Ejt,"",[],!1,!0,t);return h.Ijt=i,h}static async requestSuccessOnly(t,e){let i;try{i=await e.Kk(t)}catch(t){throw new Gr(Fc.NETWORK,$s.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!_h(i))throw new Gr(Fc.NETWORK,$s.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return i}static async Sjt(t,e){const i=new ke({Gu:t,Yk:Rr.Ak,yE:xe.GET}),s=await this.requestSuccessOnly(i,e);try{return function(t){return u$(t,"text/xml")}(await s.qk())}catch(t){throw new Gr(Fc.NETWORK,$s.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async kjt(t,e,i,s){void 0===s&&(s=[]);const n=[],r=[],o=[];if(!t||!o$(t,"VAST")){if(C$(k$.ojt,s),i)throw new Gr(Fc.PARSING,$s.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new Gr(Fc.PARSING,$s.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}if(0!==fs(t,"Ad").length){for(const i of fs(t,"Ad"))try{const t=await this.Cjt(i,e,s);0===t.eL?n.push(t):r.push(t)}catch(t){o.push(t)}if(0===n.length&&0===r.length&&o.length>0)throw o[0];if(1===n.length&&0===r.length)return n[0];if(0===n.length&&0!==r.length)return new YJ(r);if(n.length>0||r.length>0)return new YJ(r.concat(n))}if(0!==fs(t,"Error").length)for(const e of fs(t,"Error")){Eo(k$.ojt.gb);const t=e.textContent;t&&s.push(t.trim())}if(C$(k$.ojt,s),i)throw new Gr(Fc.PARSING,$s.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new Gr(Fc.PARSING,$s.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}async Tjt(t,e,i){const s=[],n=fs(t,"AdBreak");for(const t of n)try{const n=await this.Pjt(t,e,i);n&&s.push(n)}catch(t){Ms.Bp(t)}return s}async Cjt(e,i,s){const n=re(e,"id")||"";let r=Na(re(e,"sequence"));r||(r=0);const o=fs(e,"InLine"),h=fs(e,"Wrapper");if(0!==h.length)return await this.Djt(h[0],n,r,i,s);if(0!==o.length)return t.Njt(o[0],n,r,s);throw new Gr(Fc.PARSING,$s.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static Njt(e,i,s,n){const r=fs(e,"Error")[0];let o;r&&r.textContent&&(o=r.textContent,n.push(o));const h=fs(e,"AdSystem")[0];let a,u="";h&&(u=h.textContent||u);const c=fs(e,"AdTitle")[0];c&&(a=c.textContent||void 0);const l=[];for(const t of fs(e,"Impression"))t.textContent&&l.push(t.textContent);const d=t.Mjt(fs(e,"Creatives")[0],u,n);return new jJ(i,s,u,a,l,d,new E$(o))}async Djt(e,i,s,n,r){const o=fs(e,"Error")[0];let h="";o&&o.textContent&&(h=o.textContent,r.push(h));const a=fs(e,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of fs(e,"Impression"))t.textContent&&c.push(t.textContent);const l=fs(e,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.xjt(d,n,!0,r),_=fs(e,"Creatives")[0];let v=[];_&&(v=t.Ljt(_,u,r));let m=$e(re(e,"followAdditionalWrappers"));m||(m=!0);let g=$e(re(e,"allowMultipleAds"));g||(g=!0);let p=$e(re(e,"fallbackOnNoAd"));return p||(p=!1),new s$(i,s,c,f,m,v,g,p,new E$(h))}static Ljt(e,i,s){const n=[];for(const r of fs(e,"Creative")){let e=re(r,"id");e||(e="");let o=Na(re(r,"sequence"));o||(o=0);let h=re(r,"adId");h||(h="");const a=fs(r,"Linear")[0];let u;a&&(u=t.Bjt(a,"wrapper",e,i,s));const c=fs(r,"NonLinearAds")[0];let l,d;if(c)try{d=t.Ojt(c,e,i),l=d}catch(t){}const f=fs(r,"CompanionAds")[0];let _;f&&(_=t.Fjt(f)),n.push(new n$(e,h,o,"",u,l,_,[]))}return n}static Mjt(e,i,s){const n=[];for(const r of fs(e,"Creative")){let e=re(r,"id");e||(e="");let o=Na(re(r,"sequence"));o||(o=0);let h=re(r,"adId");h||(h="");let a=re(r,"apiFramework");a||(a="");const u=fs(r,"Linear")[0];let c;if(u)try{c=t.Bjt(u,"inline",e,i,s)}catch(t){}if(0===(null==c?void 0:c.ct))throw new Gr(Fc.PARSING,$s.VAST_UNEXPECTED_DURATION_ERROR,"The VAST response had a duration of 0 seconds, so skipping the ad(s).");const l=fs(r,"NonLinearAds")[0];let d,f;if(l)try{f=t.Ojt(l,e,i),d=f}catch(t){}const _=fs(r,"CompanionAds")[0];let v;_&&(v=t.Fjt(_));const m=fs(r,"UniversalAdId"),g=t.parseUniversalAdIds(m);n.push(new n$(e,h,o,a,c,d,v,g))}return n}static Bjt(e,i,s,n,r){const o=fs(e,"Duration")[0];let h=0;if(o)h=ZJ(o.textContent)||0;else if(!o&&"inline"===i)throw new Gr(Fc.PARSING,$s.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=re(e,"skipoffset");let u=-1;if(a){let t=ZJ(a);if(void 0===t&&a.indexOf("%")>-1){const e=_.abs(Number(a.replace(/(?![0-9])./g,"")))/100;S(e)||(t=h*e)}void 0!==t&&(u=t)}const c=fs(e,"MediaFiles")[0];let l=[],d=[];if(c&&(l=function(t,e){const i=[];for(const s of fs(t,"MediaFile")){const t=re(s,"delivery"),n=re(s,"type");if(!n){Eo();continue}if(!e(n))continue;let r=Na(re(s,"width")),o=Na(re(s,"height"));r||(Eo(),r=0),o||(Eo(),o=0);const h={delivery:t,type:n,width:r,height:o,contentURL:""+s.textContent};i.push(h)}return i}(c,I$),d=function(t){const e=fs(t,"ClosedCaptionFiles");if(0===e.length)return[];const i=e[0],s=[];for(const t of fs(i,"ClosedCaptionFile")){const e=re(t,"type");e||Eo();const i=re(t,"language");i||Eo();const n={type:null!=e?e:"",language:null!=i?i:"",contentURL:(""+t.textContent).trim()};s.push(n)}return s}(c)),"inline"===i&&(!c||0===l.length))throw C$(k$.ajt,r),new Gr(Fc.PARSING,$s.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const f=fs(e,"TrackingEvents")[0];let v=[];f&&(v=t.Vjt(f,_$,"linear"));const m=fs(e,"VideoClicks")[0],g=t.Wjt(m);return new r$(h,l,v,g,u,s,n,d)}static Wjt(e){if(!e)return new Pr("","",[],[]);const i=fs(e,"ClickThrough")[0];let s,n="";i&&(s=i.textContent||void 0,n=re(i,"id")||"");const r=t.Ujt(fs(e,"ClickTracking")),o=t.Ujt(fs(e,"CustomClick"));return new Pr(s,n,r,o)}static Ujt(t){const e=[];for(const i of t){const t=i.textContent;if(!t)continue;const s=re(i,"id")||"";e.push(new i$(s,t))}return e}static Vjt(t,e,i){const s=[];for(const n of fs(t,"Tracking")){const r=re(n,"event");if(!e(r)){Eo();continue}let o="";"linear"===i&&(o=re(t,"offset")||"0");const h=n.textContent;h&&s.push(new y$(r,o,h))}return s}static Ojt(e,i,s){const n=[];for(const r of fs(e,"NonLinear")){const e=fs(r,"NonLinearClickThrough")[0];let o;e&&(o=e.textContent||void 0);const h=t.Ujt(fs(r,"NonLinearClickTracking")),a=fs(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=re(a,"creativeType"),e=a.textContent||"",i=fs(a.parentNode,"NonLinearClickThrough")[0];let s="";i&&(s=i.textContent||""),u=new A$(e,t,s,"")}const c=t.Gjt(r),l=t.parseHtmlResource(r);if(!u&&!c&&!l){Eo();continue}const d=new Pr(o,"",h,[]);n.push(new JJ(u,c,l,d,i,s))}if(0===n.length)throw new Gr(Fc.PARSING,$s.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=fs(e,"TrackingEvents")[0];let o=[];return r&&(o=t.Vjt(r,m$,"nonlinear")),new QJ(n,o)}static parseUniversalAdIds(t){const e=[];for(const r of t){var i;const t=null!=(i=re(r,"idRegistry"))?i:"";var s,n;const o=null!=(n=null!=(s=re(r,"idValue"))?s:r.textContent)?n:"";e.push(new P$(t,o))}return e}static Fjt(e){let i=re(e,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(i)||(i=$J.QH);const s=[];for(const i of fs(e,"Companion")){let e=Na(re(i,"width")),n=Na(re(i,"height")),r=re(i,"id"),o=Na(re(i,"assetWidth")),h=Na(re(i,"assetHeight")),a=Na(re(i,"expandedWidth")),u=Na(re(i,"rxpandedHeight")),c=re(i,"apiFramework"),l=re(i,"adSlotId"),d=Na(re(i,"pxratio"));const f=fs(i,"AltText")[0];let _=f?f.textContent:"";e||(Eo(),e=0),n||(Eo(),n=0),r||(r=""),o||(o=0),h||(h=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),_||(_="");const v=t.Hjt(i),m=t.Gjt(i),g=t.parseHtmlResource(i),p=fs(i,"TrackingEvents")[0];let w=[];p&&(w=t.Vjt(p,p$,"companion"));const y=fs(i,"CompanionClickThrough")[0];let b;y&&(b=y.textContent||void 0);const A=t.Ujt(fs(i,"CompanionClickTracking"));(v||m||g)&&s.push(new e$(e,n,r,o,h,a,u,c,l,d,v,m,g,new Pr(b,"",A,[]),w,_))}return new t$(i,s)}static Hjt(t){const e=fs(t,"StaticResource")[0];let i;if(e&&e.parentNode){let t=re(e,"creativeType");t||(t="");const s=e.textContent,n=fs(e.parentNode,"AltText")[0],r=fs(e.parentNode,"CompanionClickThrough")[0];let o,h="";n&&(h=n.textContent||""),r&&(o=r.textContent||void 0),s&&(i=new A$(s,t,o,h))}return i}static Gjt(t){const e=fs(t,"IFrameResource")[0];let i;if(e){const t=e.textContent||"";i=new S$(t)}return i}static parseHtmlResource(t){const e=fs(t,"HTMLResource")[0];let i;if(e){const t=e.textContent||"";i=new T$(t)}return i}async Pjt(e,i,s){const n=re(e,"timeOffset")||"0",r=re(e,"breakType")||N$.tE;let o=re(e,"breakId"),h=$e(re(e,"repeatAfter"));if(void 0===o&&(o=""),void 0===h&&(h=!1),!(void 0!==M$.Zjt(n)))throw new Gr(Fc.PARSING,$s.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=fs(e,"AdSource")[0],u=fs(e,"TrackingEvents")[0];let c=[];u&&(c=t.Vjt(u,d$,"vmap"));let l=re(a,"id");l||(l="");let d=$e(re(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=$e(re(a,"followRedirects"));f||(f=!0);const _=fs(a,"AdTagURI")[0];let v="";const m=fs(a,"VASTAdData")[0];if(!_||!_.textContent){if(m){if(m.firstElementChild&&h$(m.firstElementChild,"VAST")){const t=await this.kjt(m.firstElementChild,s,!1);if(t){const e=new B$(l,d,f,t);return new Tc(n,e,r,o,c,h,!1,i)}return}throw new Gr(Fc.PARSING,$s.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new Gr(Fc.PARSING,$s.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{v=_.textContent;const t=nu(i);return t.sources.src=v,new L$(n,t,s)}catch(t){return}}},N$=function(t){return t.tE="",t.Ejt="linear",t.Xjt="nonlinear",t.zjt="display",t}({}),M$=class{static qjt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static Yjt(t){}static Kjt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static jjt(t){const e=t.split(":");let i=0;return i+=3600*Number(e[0]),i+=60*Number(e[1]),i+=Number(e[2]),i}static Qjt(t){if(t<=0)return"00:00:00.000";const e=_.floor(t),i=t-e;return this.Jjt(e/3600,2)+":"+this.Jjt(e/60%60,2)+":"+this.Jjt(e%60,2)+"."+this.Jjt(1e3*i,3)}static Jjt(t,e){return("00"+_.floor(t)).slice(-e)}static $jt(t,e){const i=this.Zjt(t);if(0===i)switch(t){case"start":return 0;case"end":return-1}else{if(2===i)return XJ(t)*e;if(1===i)return ZJ(t);if(3===i)return this.Kjt(t);if(4===i){const e=Number(t);if(!S(e)&&e>=-1)return e}}}static Zjt(t){return"start"===t||"end"===t?0:void 0!==ZJ(t.toString())?1:void 0!==XJ(t.toString())?2:void 0!==this.Yjt(t.toString())?3:S(Number(t))?void 0:4}},Tc=class{get tQt(){return this.eQt.integration}get iQt(){return this.sQt}get YBt(){return this.nQt}get pKt(){return this.wKt}set pKt(t){this.wKt=t}get eYt(){return this.VYt}get rQt(){return this.oQt}get hQt(){return this.aQt}get lnt(){return this.eQt}get uQt(){return this.Ijt.rd}get W(){return!0}Dn(){return Promise.resolve()}get Ijt(){return this.cQt}set Ijt(t){this.cQt=t}constructor(t,e,i,s,n,r,o,h){this.wKt=-1,this.sQt=e,this.nQt=t,this.lQt=i,this.oQt=s,this.aQt=r,this.VYt=n,this.dQt=o,this.eQt=h}},L$=class{get tQt(){return this.lYt.tQt}get iQt(){return this.lYt.iQt}get YBt(){return this.lYt.YBt}get pKt(){return this.lYt.pKt}set pKt(t){this.lYt.pKt=t}get eYt(){return this.lYt.eYt}get rQt(){return this.lYt.rQt}get hQt(){return this.lYt.hQt}get lnt(){return this.lYt.lnt}get uQt(){return this.lYt.uQt}get W(){return this.zE}Dn(){var t;return null!=(t=this.fQt)?t:this.fQt=this.KE()}async KE(){const t=new D$;this.lYt=await t.Rjt(this.lnt,this.YBt,this.Ijt,this.lW),this.zE=!0}get Ijt(){return this.lYt.Ijt}set Ijt(t){this.lYt.Ijt=t}constructor(t,e,i){this.zE=!1,this.lW=i,this.lYt=new Tc(t,void 0,"","",[],!1,!1,e)}},B$=class{get o(){return this.ZS}get tKt(){return this._Qt}get vQt(){return this.mQt}get Dqt(){return this.gQt}constructor(t,e,i,s){this.ZS=t,this._Qt=e,this.gQt=s,this.mQt=i}};function O$(t,e){let i;if(t.vastAdsRequest&&(i=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return l$(t.adsResponse);return}(t.vastAdsRequest)),!i){const e=function(t){const e=t.contentUrl||t.contentId;if(!e)return;const i=t.contentType||"video/mp4",s=LT(i)||zh(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+M$.Qjt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+M$.Qjt(t.whenSkippable)+'"':"",o='<MediaFile delivery="'+s+'" type="'+i+'">'+c$(e)+"</MediaFile>",h=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+c$(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+o+"</MediaFiles>"+h+"</Linear>",u=t.title?"<AdTitle>"+c$(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);e&&(i=l$(e))}const s=t.customData;if(i){const n={integration:null==s?void 0:s.integration,sources:{src:i,type:"vast"},timeOffset:e};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}var F$=function(t){return t.pQt="error",t.wQt="sourceupdate",t}({}),V$=class extends pe{constructor(t){super("error"),this.lt=t}},W$=class extends pe{constructor(t,e){super("sourceupdate"),this.bt=t,this.xc=e}},U$=class extends Co{get yN(){return this.yQt}bQt(t){this.AQt.bQt(t)}SQt(t){this.AQt.SQt(t)}TQt(t){this.AQt.TQt(t)}kQt(t){this.AQt.kQt(t)}EQt(t){this.yQt.addUpdateListener(t)}xQt(t){this.yQt.removeUpdateListener(t)}RQt(){const t=new os,e=new chrome.cast.media.GetStatusRequest;return this.yQt.getStatus(e,(()=>{t.Ob({bt:this.AR(),xc:this.tu()})}),(e=>t.Fb(e))),t.Vb}AR(){var t;return null==(t=this.yQt.customData)?void 0:t.currentSource}tu(){var t;let e;if(null==(t=this.UNt.IQt())?void 0:t.version){var i;e=null==(i=this.yQt.customData)?void 0:i.sourceDescription}else{var s;const t=null==(s=VJ(this.yQt))?void 0:s.customData;(function(t){return V(t)&&t.theoplayer_version>=1&&ji(t.streamStart)&&ji(t.isLive)&&ji(t.sourceDescription)})(t)&&(e=t.sourceDescription),e||(e=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:G$(t)}}(this.yQt.media))}return e}TI(){const t=new chrome.cast.media.PauseRequest;this.yQt.pause(t,It,this.CQt)}EI(){const t=new chrome.cast.media.StopRequest;this.yQt.stop(t,It,this.CQt)}kI(){const t=new chrome.cast.media.PlayRequest;this.yQt.play(t,It,this.CQt)}Eb(t,e){const i=new chrome.cast.media.SeekRequest;return i.currentTime=t,i.resumeState=e?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,e)=>{this.yQt.seek(i,t,(t=>{var i;e(new Xi(FJ(t.code),null!=(i=t.description)?i:void 0))}))}))}QR(t){this.AQt.$et(WJ,function(t){return{type:UJ.Pqt,properties:{playbackRate:t}}}(t)).catch(this.PQt)}DQt(t){const e=new chrome.cast.media.EditTracksInfoRequest(t);this.yQt.editTracksInfo(e,It,this.CQt)}NQt(){return this.yQt.getEstimatedTime()}MQt(){return this.yQt.getEstimatedBreakClipTime()}LQt(){return this.yQt.getEstimatedBreakTime()}BQt(){this.AQt.$et("urn:x-cast:com.google.cast.media",{type:GJ.SKIP_AD,requestId:this.OQt++,mediaSessionId:this.yQt.mediaSessionId}).catch(this.PQt)}gn(){this.$o()}constructor(t,e,i){super(e),this.OQt=0,this.PQt=t=>{this.wo(new V$(t))},this.CQt=t=>{var e;const i=new Xi(FJ(t.code),null!=(e=t.description)?e:void 0);this.PQt(i)},this.UNt=t,this.AQt=e,this.yQt=i}};function G$(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?Qe(t.breaks,(e=>function(t,e){const i=[];if(t.isWatched)return i;for(const s of t.breakClipIds){const n=Fo(e,(t=>t.id===s));if(n){const e=O$(n,t.position);e&&i.push(e)}}return i}(e,t.breakClips))):[]}r();var H$=class{FQt(t,e){this.UNt.addMessageListener(t,e)}VQt(t,e){this.UNt.removeMessageListener(t,e)}$et(t,e){return new Promise(((i,s)=>{this.UNt.sendMessage(t,e,i,(t=>{var e;s(new Xi(FJ(t.code),null!=(e=t.description)?e:void 0))}))}))}gn(){}constructor(t){this.UNt=t}};function Z$(t){return"vmap"===t||"adrule"===t}function X$(t){if(t)return Yt(t)&&""!==t?{src:ze(t),type:void 0}:function(t){return V(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:ze(t.src),type:z$(t.type)}:void 0}function z$(t){if(Yt(t)){const e=t.toLowerCase();switch(e){case"vast":case"vmap":case"adrule":return e;default:return void ct("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||ct("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function q$(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return HJ.test(t)}(t))return M$.jjt(t);if(Y$(t))return t}return Number(t)>=0?Number(t):void 0}}function Y$(t){return new RegExp(/^\d{1,2}%$/).test(t)}function K$(t){const e=[],i=(t,s)=>{if(rl(s))for(let e=0,n=s.length;e<n;e++){const n=V(s[e])&&s[e]?String(e):"";i(t+"["+encodeURIComponent(n)+"]",s[e])}else if(V(s))for(const e of w.keys(s))i(t+"["+encodeURIComponent(e)+"]",s[e]);else((t,i)=>{e.push(t+"="+encodeURIComponent(null!=i?i:""))})(t,String(s))};for(const e of w.keys(t))i(encodeURIComponent(e),t[e]);return e.join("&")}r(),r(),r();var j$=function(t){return t.Iqt="receiver_info",t.hBt="event",t.WQt="propertychange",t.Cqt="trackevent",t}({}),Q$=class{UQt(t){let e;try{e=JSON.parse(t)}catch(t){0}return e}bQt(t){this.GQt.push(t)}SQt(t){we(this.GQt,t)}TQt(t){this.HQt.push(t)}kQt(t){we(this.HQt,t)}ZQt(t){this.XQt=t}$et(t,e){return this.zQt.$et(t,e)}gn(){this.zQt.VQt(WJ,this.qQt),En(this.HQt),En(this.GQt),this.XQt=void 0}constructor(t){this.GQt=[],this.HQt=[],this.qQt=(t,e)=>{const i=this.UQt(e);if(i)if(i.type===j$.WQt)for(const t of this.GQt)for(const e of w.keys(i.properties))t(e,i.properties[e]);else if(i.type===j$.hBt)for(const t of this.HQt)t(i.event);else i.type===j$.Cqt&&this.XQt&&i.event.trackState&&this.XQt(i.event.trackId,i.event.trackState.targetQualityIds)},this.zQt=t,this.zQt.FQt(WJ,this.qQt)}};r(),r();var Qu=function(t){return t.YQt="medialoadedchange",t.ob="volumechange",t.pQt="casterror",t.KQt="playererror",t.jQt="targetqualitychanged",t.QQt="receiverinfochanged",t}({}),J$=class extends pe{constructor(){super("medialoadedchange")}},$$=class extends pe{constructor(t,e){super("volumechange"),this.vI=t,this.GR=e}},t0=class extends pe{constructor(t){super("casterror"),this.lt=t}},e0=class extends pe{constructor(t){super("playererror"),this.lt=t}},i0=class extends pe{constructor(t,e){super("targetqualitychanged"),this.TN=t,this.JQt=e}},s0=class extends pe{constructor(){super("receiverinfochanged")}},n0=class extends Co{$Qt(t,e,i){this.AQt.$et(WJ,function(t,e,i){return{type:UJ.Cqt,trackID:t,trackType:e,properties:{targetQuality:i}}}(t,e,i)).catch(this.PQt)}tJt(){this.zQt.FQt(WJ,this.eJt),this.AQt.$et(WJ,{type:UJ.Iqt}).catch(It)}IQt(){return this.iJt}sJt(){return this.UNt.getSessionObj()}nJt(t){!this.rJt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.rJt=new U$(this,this.AQt,t),this.oJt(),this.wo(new J$),this.rJt.EQt(this.hJt))}aJt(){return this.rJt}async uJt(t){const e=function(t){const e=function(t,e,i,s){const[n,r]=function(t){for(const i of t.sources)if(Cn(i)){const t=i.src;if(t){var e;const s=null!=(e=i.type)?e:Mu(t);if(r0(s))return[t,s]}}var i,s;return[null!=(i=SC(t))?i:"",null!=(s=bC(t))?s:""]}(t),o=new chrome.cast.media.MediaInfo(n,r);return o.metadata=OJ(t.metadata,t.poster),o.streamType=s,function(t,e,i){const s=[],n=[];let r,o=0,h=0;for(const t of e){const e=X$(t.sources);if(e)if(bt(e,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=e.src;else if(zJ(e,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=M$.$jt(r,i))?u:0,d=void 0!==c?M$.$jt(c,i):void 0,f=new chrome.cast.media.BreakClip("bc"+h++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=e.src,f.whenSkippable=d,f.customData={integration:t.integration};let _=Fo(n,(t=>t.position===l));void 0===_&&(_=new chrome.cast.media.Break("b"+o++,[],l),n.push(_)),_.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(o,e,i),o}(t.cJt,t.qc,t.ct,t.o0),i=new chrome.cast.media.LoadRequest(e);return i.autoplay=!0,i.currentTime=t.SR,i.customData=t.lJt,i}(t);let i;try{i=await this.UNt.loadMedia(e)}catch(t){i=t}if(i)throw new Xi(FJ(i))}ZR(t){this.sJt().setReceiverMuted(t,It,this.dJt)}gI(t){this.sJt().setReceiverVolumeLevel(t,It,this.dJt)}fJt(){return this.sJt().receiver.friendlyName}gn(){this.$o(),this.UNt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this._Jt),this.sJt().removeUpdateListener(this.oJt),this.zQt.VQt(WJ,this.eJt),this.AQt.gn(),this.zQt.gn()}constructor(t){super(),this.iJt=void 0,this.PQt=t=>{this.wo(new t0(t))},this.vJt=(t,e)=>{"error"===t&&this.wo(new e0(e))},this.mJt=(t,e)=>{this.wo(new i0(t,e))},this.eJt=(t,e)=>{const i=JSON.parse(e);i.type===j$.Iqt&&(this.iJt=i.info,this.wo(new s0))},this.oJt=()=>{const t=this.sJt(),{level:e,muted:i}=t.receiver.volume;this.wo(new $$(null!=e?e:void 0,null!=i?i:void 0))},this._Jt=()=>this.nJt(this.UNt.getMediaSession()),this.hJt=t=>{var e;t||(null==(e=this.rJt)||e.xQt(this.hJt),this.rJt=void 0,this.wo(new J$))},this.dJt=t=>{var e;const i=new Xi(FJ(t.code),null!=(e=t.description)?e:void 0);this.PQt(i)},this.UNt=t,this.UNt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this._Jt),this.zQt=new H$(t.getSessionObj()),this.AQt=new Q$(this.zQt),this.AQt.bQt(this.vJt),this.AQt.ZQt(this.mJt),this.sJt().addUpdateListener(this.oJt),this.oJt(),this.tJt();const e=this.UNt.getMediaSession();e&&this.nJt(e)}};function r0(t){switch(t){case nl.zC:case nl.XC:case nl.qC:case nl.YC:return!0}return!1}var o0=function(t){return t.gJt="statechange",t}({}),h0=class extends pe{constructor(t){super("statechange"),this.Pft=t}};r(),r(),r(),r();var a0=class extends Co{xst(){return this.Uc}pR(){return se.mB()}kR(){return this.hZ+this.pJt}mst(){return this.kR()}yR(){}Sd(){return this.DA}IR(){return this.R4}PR(){}YR(){return this.cZ}wJt(){}jR(){return this.lZ}QR(t){this.lZ!==t&&(this.lZ=t,this.wo(new Nu(this.ea.SR,t)))}nI(){return Ht.$B}$R(){return se.mB()}oI(){return se.mB()}aI(){return!1}_R(){return this.aO}dI(){return this.cO}uI(){return this.Ll}DQt(t){}_I(){return this.yJt}lI(){return this.bJt}kI(){this.cZ=!1}TI(){this.cZ=!0}Eb(t){this.hZ=t-this.pJt}AJt(){return this.pJt}SJt(t){this.pJt=t}$st(t){this.Uc.$st(t)}EI(){}gn(){this.$o(),this.aO.gn(),this.cO.gn(),this.Ll.gn(),this.Uc.gn()}constructor(t,e,i,s,n,r,o,h,a){super(),this.ea=t,this.pJt=0,this.aO=new Nn,this.cO=new Nn,this.Ll=new ua,this.Uc=new Ue,this.pJt=e,this.hZ=i-e,this.DA=s,this.R4=n,this.cZ=r,this.lZ=o,this.yJt=h,this.bJt=a}};r(),r(),r(),r();var Lo=function(t){return t.TJt="ccmodechangerequest",t.kJt="cctargetqualitychangerequest",t.EJt="cctrackchangerequest",t}({}),u0=class extends pe{constructor(t,e,i){super(Lo.TJt),this.track=t,this.trackId=e,this.mode=i}};r();var c0=function(t){return t.Ak="TEXT",t.fE="AUDIO",t._E="VIDEO",t}({}),l0=function(t){return t.jV="SUBTITLES",t.QV="CAPTIONS",t.JV="DESCRIPTIONS",t.Xn="CHAPTERS",t.$V="METADATA",t}({});function d0(t){return"AUDIO"===t.type}function f0(t){return"VIDEO"===t.type}function _0(t){return"TEXT"===t.type}var v0=class extends Co{get ka(){return this.su||(this.su=Qh(this)),this.su}get xh(){return this.RO}set xh(t){t!==this.RO&&(this.RO=t,this.wo(new Zs(this)))}get q(){return this.X4}get L(){return this.z4}get xE(){return this.Go}set xE(t){const e=vu(t);this.Go!==e&&(this.Go=e,this.xJt!==e&&this.wo(new u0(this,this.xC,e)),this.wo(new Ec(this)))}get RJt(){return this.xJt}set RJt(t){const e=vu(t),i=this.Go!==e;this.Go=e,this.xJt=e,i&&this.wo(new Ec(this))}q4(t){return Fo(this.z4.uC,(e=>e.o===t))}LC(t){this.xE=t}IJt(t){}gn(){}er(){}constructor(t){super(),this.su=void 0;const e=t.customData;this.xC=Number(t.trackId)||0,this.o=""+(e&&e.id||this.xC),this.RO=e&&e.label||t.name||"",this.gs=e&&e.language||t.language||"",this.MC=e&&e.inBandMetadataTrackDispatchType||"",this.Lt=e&&e.kind||function(t){switch(t){case l0.jV:return hs.jV;case l0.QV:return hs.QV;case l0.JV:return hs.JV;case l0.Xn:return hs.Xn;case l0.$V:return hs.$V}return}(t.subtype)||"subtitles",this.sI=ic.NONE,this.Aw=e&&void 0!==e.type?function(t){return MT(t)?t:Lr.DEFAULT}(e.type):Lr.WEBVTT,this.Z4=[],this.z4=new xM(this.Z4),this.t5=[],this.X4=new xM(this.t5),this.Go=vu(e&&e.mode||bh.Th),this.xJt=this.Go}};r(),r();var m0=class extends pe{constructor(t,e){super(Lo.EJt),this.trackId=t,this.enabled=e}};r();var g0=class extends pe{constructor(t,e){super(Lo.kJt),this.track=t,this.targetQuality=e}};r();var p0=function(t){return t.fE="audio",t._E="video",t.Ak="text",t}({}),w0=class extends Co{get EC(){return this.xdt}get DC(){return this.kdt}set DC(t){this.CJt(t),this.wo(new g0(this,t))}get IC(){return this.AO}get xh(){return this.RO}set xh(t){t!==this.RO&&(this.RO=t,this.wo(new Zs(this)))}get Rt(){return this.He}set Rt(t){this.He!==t&&(this.He=t,this.PJt!==t&&this.wo(new m0(this.xC,t)),this.wo(new Ec(this)))}get DJt(){return this.PJt}set DJt(t){const e=this.He!==t;this.He=t,this.PJt=t,e&&this.wo(new Ec(this))}get ka(){return this.su||(this.su=yi(this)),this.su}get xE(){return this.Rt?"enabled":"disabled"}CO(t){this.Rt=t}IJt(t){if(t.targetQualityIds){const e=[];for(const i of this.AO.uC)t.targetQualityIds.indexOf(i.o)>-1&&e.push(i);const i=e.length?e:void 0;this.CJt(i)}}CJt(t){(function(t,e){return!t&&e||t&&!e||t&&e&&!qm(t,e)})(this.kdt,t)&&(this.kdt=t&&this.AO.TO(t)?t:void 0,this.wo(new GW(this.kdt,this)))}unload(){for(const t of this.AO.uC)t.fn("update",this.SLt);this.AO.er()}constructor(t){super(),this.xdt=void 0,this.AO=new Vc,this.kdt=void 0,this.su=void 0,this.SLt=()=>this.wo(new Zs(this));const e=t.customData;if(this.xC=Number(t.trackId)||0,this.o=""+(e&&e.id||this.xC),this.RO=e&&e.label||t.name||"",this.gs=e&&e.language||t.language||"",this.Lt=e&&e.kind||"main",this.He=e&&e.enabled,this.PJt=this.He,d0(t)){this.h3=p0.fE;const e=t.customData&&t.customData.qualities;if(e)for(const t of e){const e=new wH(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);e.yn("update",this.SLt),this.AO.SO(e)}}else{this.h3=p0._E;const e=t.customData&&t.customData.qualities;if(e)for(const t of e){const e=new pH(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);e.yn("update",this.SLt),this.AO.SO(e)}}}};r();var y0=function(t){return t.NJt="legacy",t.MJt="caf",t}({});r(),r(),r(),r();var b0=class{Ic(){if(this.LJt>=this.Uc.length)return;const t=this.Uc[this.LJt];return this.LJt+=1,t}lt(){return this.Ic()}constructor(t){this.LJt=0,this.Uc=t}};function A0(t){var e,i,s;return null!=(s=null==(i=t.iQt)||null==(e=i.Dqt)?void 0:e.Nqt())?s:[]}var S0=class{},T0=class{Yst(){var t;return null!=(t=this.su)?t:this.su=function(t){return{get ads(){return t.qc.map((t=>t.Yst()))},get integration(){return t.tQt},get maxDuration(){return t.BJt},get maxRemainingDuration(){return t.OJt},get timeOffset(){return t.YBt},get customData(){return t.lJt}}}(this)}constructor(){this.su=void 0}},k0=class{get FJt(){return this.VJt}get t(){return this.ea}constructor(t,e){this.VJt=t,this.ea=e}},E0=class extends T0{get Ijt(){return this.cQt}get qc(){const t=[];for(const s of this.cQt.WJt)for(const n of A0(s)){var e,i;const r=null!=(i=null==(e=n.jqt)?void 0:e.bYt)?i:[];if(n.Yqt&&t.push(this.UJt(n.Yqt,r,n.Jqt,s.lnt)),n.Qqt)for(const e of n.Qqt.$qt)t.push(this.GJt(e,r,n.Qqt,n.Jqt,s.lnt))}return t}UJt(t,e,i,s){const n=Fo(this.HJt,(e=>e.Yqt===t));if(void 0!==n)return n;const r=new C0(t,e,this,this.ZJt,i,s);return this.HJt.push(r),r}GJt(t,e,i,s,n){const r=Fo(this.XJt,(e=>e.Qqt===t));if(void 0!==r)return r;const o=new I0(t,e,i,this,this.ZJt,s,n);return this.XJt.push(o),o}get tQt(){return yu.CSAI}get YBt(){const t=this.cQt.rd;return t>=0?t:this.ZJt.t.Sd()}get OJt(){let t=0;for(const e of this.cQt.WJt)for(const i of A0(e))i.Yqt&&!i.Yqt.yKt&&(t+=i.Yqt.ct);return this.ZJt&&this.ZJt.FJt&&(t+=this.ZJt.FJt.ct-this.ZJt.FJt.SR),t}get BJt(){let t=0;for(const e of this.cQt.WJt)for(const i of A0(e))i.Yqt&&(t+=i.Yqt.ct);return t}get lJt(){}constructor(t,e){super(),this.HJt=[],this.XJt=[],this.cQt=t,this.ZJt=e}},x0={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},R0=class extends S0{get td(){return this.lYt}get lnt(){return this.eQt}get Jqt(){return this.fKt}zJt(){return this.qJt}YJt(){this.qJt=!0}KJt(t){return Bo({},x0,{resourceURI:t.ejt||""})}jJt(t){return Bo({},x0,{contentHTML:t.ejt.trim(),type:"HTMLResource"})}QJt(t){var e,i;return Bo({},x0,{clickThrough:(null==(e=t.GYt)?void 0:e.trim())||"",resourceURI:(null==(i=t.ejt)?void 0:i.trim())||"",altText:t.WYt||"",type:"StaticResource"})}JJt(t,e,i){if(!t||!e)return;const s="<img "+(i?"title='"+i+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(e)+"' target='_blank' rel='noopener'>"+s+"</a>"}jqt(t){return t?t.map((t=>{let e;const i={adSlotId:t.NYt||"",height:t.Ti||0,width:t.ji||0};if(t.sYt){var s;const i=this.QJt(t.sYt),n=i.clickThrough||(null==(s=t.OYt)?void 0:s.GYt);e=Bo({},i,{contentHTML:this.JJt(i.resourceURI,n,i.altText)||""})}else if(t.hYt)e=this.jJt(t.hYt);else{if(!t.rYt)return;e=this.KJt(t.rYt)}return nh(e,i)})).filter((t=>void 0!==t)):[]}$Jt(){return this.t$t.Uqt}constructor(t,e,i,s,n,r){super(),this.qJt=!1,this.t$t=t,this.AYt=e,this.lYt=i,this.ZJt=s,this.fKt=n,this.eQt=r}},I0=class extends R0{get Qqt(){return this.t$t}get Kqt(){return this.e$t}ba(){const t=this.lYt,e={companions:this.jqt(this.AYt),type:"nonlinear",id:this.t$t.dYt,skipOffset:this.pKt,integration:this.eQt.integration,adSystem:this.t$t.Uqt,get adBreak(){return t.Yst()},creativeId:this.t$t.dYt,universalAdIds:this.fKt.map((t=>({adIdRegistry:t.pjt,adIdValue:t.yjt})))};return this.t$t.rYt?nh(this.KJt(this.t$t.rYt),e):this.t$t.hYt?nh(this.jJt(this.t$t.hYt),e):this.t$t.sYt?nh(this.QJt(this.t$t.sYt),e):e}Yst(){var t;return null!=(t=this.su)?t:this.su=this.ba()}i$t(){var t,e;return null!=(e=null==(t=this.t$t.sYt)?void 0:t.ejt)?e:""}s$t(){var t,e,i;return null!=(i=null==(e=this.t$t)||null==(t=e.sYt)?void 0:t.sjt)?i:""}get pKt(){const t=this.t$t.td;return t&&t.lnt&&void 0!==t.lnt.skipOffset?M$.$jt(t.lnt.skipOffset,this.ZJt.FJt.ct):(null==(e=this.t$t.td)?void 0:e.pKt)||-1;var e}constructor(t,e,i,s,n,r,o){super(t,e,s,n,r,o),this.e$t=i}},C0=class extends R0{get Yqt(){return this.t$t}ba(){var t;const e=this.lYt,i=this.t$t;return{companions:this.jqt(this.AYt),duration:i.ct,id:i.dYt,mediaFiles:i.vKt,get mediaUrl(){return i.bKt},skipOffset:this.pKt,type:"linear",integration:this.eQt.integration,adSystem:i.Uqt,width:void 0,height:void 0,get adBreak(){return e.Yst()},clickThrough:null==(t=i.rKt)?void 0:t.GYt,creativeId:i.dYt,universalAdIds:this.fKt.map((t=>({adIdRegistry:t.pjt,adIdValue:t.yjt}))),closedCaptionFiles:i.SKt}}Yst(){var t;return null!=(t=this.su)?t:this.su=this.ba()}i$t(){return this.t$t.vKt.length>0?this.t$t.vKt[0].contentURL:""}s$t(){return this.t$t.vKt.length>0?this.t$t.vKt[0].type:""}get pKt(){const t=this.t$t.td;return t&&t.lnt&&void 0!==t.lnt.skipOffset?M$.$jt(t.lnt.skipOffset,this.ZJt.FJt.ct):this.t$t.pKt||-1}constructor(t,e,i,s,n,r){super(t,e,i,s,n,r)}};function P0(t){return t instanceof C0}r();var I=function(t){return t.n$t="csai",t.r$t="google-ima",t.Yh="google-dai",t.o$t="freewheel",t.h$t="mediatailor",t.Iv="chromecast",t.Lst="theoads",t}({});r();var bn=class extends Ra{ba(){return new D0(this.snt.Yst())}constructor(t){super("a$t",t)}},D0=class extends CF{constructor(t){super("updatead",t)}};r();var N0=class extends Ra{ba(){return new M0(this.snt.Yst())}constructor(t){super("u$t",t)}},M0=class extends CF{constructor(t){super("adloaded",t)}},L0=class extends sn{get Oc(){return void 0!==this.c$t}get qst(){return this.t$t?[this.t$t]:[]}get Kst(){var t;return null!=(t=this.c$t)?t:null}get jst(){return Qe(this.l$t,(t=>{const e=t.qc;if(t===this.c$t&&void 0!==this.t$t){const t=e.indexOf(this.t$t);if(t>=0)return e.slice(t+1)}return t.d$t()?[]:e}))}get Qst(){return this.l$t.filter((t=>t===this.c$t||!t.d$t()))}get ka(){var t;return null!=(t=this.su)?t:this.su=Ee(this)}u6(t,e,i){throw new b("Scheduling ads while casting is not supported.")}DD(){this.yQt.BQt()}tnt(t){var e;null==(e=this.f$t)||e.tnt(t)}Jst(t,e){var i;null==(i=this.f$t)||i.Jst(t,e)}_$t(t){return Fo(this.l$t,(e=>e.o===t))}v$t(t,e,i,s){const n=this.l$t,r=[];let o=!1;for(const n of t){let t=this._$t(n.id);void 0===t&&(t=new B0(n),s.push(new RF(t))),!ji(t.m$t)&&ji(i)&&(t.m$t=this.g$t(t.p$t,i));const h=t.qc;t.tr(n,e,i,s);const a=t.qc;for(const t of a)ms(h,t)||(s.push(new Uu(t)),o=!0);r.push(t)}this.l$t=r,o&&s.push(new Qs);for(const t of n)ms(r,t)||s.push(new Au(t))}w$t(t,e){const i=this.c$t,s=this.t$t;let n,r;if(t){var o;const{breakId:e,breakClipId:i}=t;n=e?this._$t(e):void 0,r=i?null==(o=this.c$t)?void 0:o.y$t(i):void 0}if(this.c$t=n,this.t$t=r,n!==i&&(void 0!==i&&(i.b$t=void 0,e.push(new Lh(i))),void 0!==n&&(n.b$t=this.yQt,e.push(new La(n)))),r!==s){const t=this.ea.kR();void 0!==s&&e.push(new xn(s,t)),void 0!==r&&e.push(new cn(r,t))}}g$t(t,e){if(!e||!e.breaks)return;const i=Fo(e.breaks,(e=>e.id===t.id));return i}$st(t){const e=[];for(const t of this.l$t){let i=t.qc;if(t===this.c$t&&void 0!==this.t$t){const t=i.indexOf(this.t$t);t>=0&&(i=i.slice(t))}else if(t.d$t())continue;for(const t of i){const i=t.A$t();i&&e.push(i)}}for(const i of e)t.u6(i,ja.Xst,!1)}gn(){return this.$o(),this.yQt.xQt(this.th),void 0!==this.c$t&&(this.c$t.b$t=void 0,this.c$t=void 0),this.t$t=void 0,En(this.l$t),Promise.resolve(void 0)}constructor(t,e,i){super(),this.l$t=[],this.c$t=void 0,this.t$t=void 0,this.su=void 0,this.th=t=>{var e;if(!t)return;const i=this.yQt.yN,{breakStatus:s}=i,{breakClips:n,breaks:r}=i.media,o=null==(e=VJ(i))?void 0:e.media,h=[];r&&n&&this.v$t(r,n,o,h),this.w$t(s,h);for(const t of h)this.wo(t)},this.ea=t,this.yQt=e,this.f$t=i,this.yQt.EQt(this.th)}},B0=class extends T0{get p$t(){return this.S$t}get o(){return this.S$t.id}get qc(){return this.Uc}get tQt(){return I.Iv}get BJt(){let t=this.S$t.duration;return void 0===t&&this.Uc.length>0&&(t=mf(this.Uc,(t=>t.ct)),S(t)&&(t=void 0)),t}get OJt(){const t=this.BJt;if(void 0!==t&&void 0!==this.b$t){const e=this.b$t.LQt();if(void 0!==e)return _.max(0,t-e)}return t}get YBt(){return this.S$t.position}get lJt(){}d$t(){return this.S$t.isWatched}y$t(t){return Fo(this.Uc,(e=>e.o===t))}tr(t,e,i,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const o=t.breakClipIds[r],h=Fo(e,(t=>t.id===o));if(void 0===h)continue;const a=r<this.Uc.length?this.Uc[r]:new O0(h,this);!ji(a.T$t)&&ji(i)&&(a.T$t=this.k$t(i,o,r)),a.tr(h,s),n.push(a)}this.S$t=t,this.Uc=n}k$t(t,e,i){if(!t||!t.breakClips)return;let s=Fo(t.breakClips,(t=>t.id===e));if(!s){var n;const e=null==(n=this.m$t)?void 0:n.breakClipIds[i];e&&(s=Fo(t.breakClips,(t=>t.id===e)))}return s}constructor(t){super(),this.m$t=void 0,this.Uc=[],this.b$t=void 0,this.S$t=t}},O0=class{get E$t(){return this.x$t}get o(){return this.x$t.id}get bYt(){return[]}get ct(){var t;return null!=(t=this.x$t.duration)?t:NaN}get vKt(){const t=this.i$t();return t?[{contentURL:t,delivery:"progressive",type:this.s$t(),width:0,height:0}]:[]}get bKt(){return this.i$t()}get pKt(){const{whenSkippable:t}=this.x$t;return void 0===t?void 0:t<0?-1:t}get GYt(){return this.x$t.clickThroughUrl}get dYt(){}get Jqt(){return[]}get lJt(){}$Jt(){return""}s$t(){var t;return null!=(t=this.x$t.contentType)?t:""}i$t(){var t,e;return null!=(e=null!=(t=this.x$t.contentUrl)?t:this.x$t.contentId)?e:""}tr(t,e){const i=this.o,s=this.ct,n=this.x$t.contentUrl;this.x$t=t;const r=this.o,o=this.ct,h=this.x$t.contentUrl;i===r&&(s===o||S(s)&&S(o))&&n===h||e.push(new bn(this)),S(s)&&!S(o)&&e.push(new N0(this))}A$t(){let t;return this.T$t&&(t=O$(this.T$t,this.td.YBt)),t||(t=O$(this.x$t,this.td.YBt)),t}Yst(){var t;return null!=(t=this.su)?t:this.su=this.ba()}ba(){const t=this;return{get companions(){return t.bYt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.vKt},get mediaUrl(){return t.bKt},get closedCaptionFiles(){return[]},get skipOffset(){return t.pKt},type:"linear",integration:I.Iv,get adSystem(){return t.$Jt()},width:void 0,height:void 0,get adBreak(){return t.td.Yst()},get resourceURI(){return t.i$t()},get clickThrough(){return t.GYt},get creativeId(){return t.dYt},get customData(){return t.lJt},get isSlate(){return!1},get universalAdIds(){return t.Jqt.map((t=>({adIdRegistry:t.pjt,adIdValue:t.yjt})))}}}constructor(t,e){this.su=void 0,this.x$t=t,this.td=e}};r();var pt=class extends Co{get R$t(){return this.I$t}set R$t(t){this.I$t!==t&&(this.I$t=t,this.Vs.href=null!=t?t:"",t?this.rW():this.oW())}rW(){if(this.He)return;this.He=!0,this.Vs.style.display="",this.C$t||(this.tx.style.cursor="pointer");const t=this.C$t?this.Vs:this.tx;Ms.Ys.Je?(t.addEventListener("touchstart",this.P$t),t.addEventListener("touchend",this.D$t)):(t.addEventListener("mousedown",this.P$t),t.addEventListener("click",this.D$t))}oW(){if(!this.He)return;this.He=!1,this.Vs.style.display="none",this.C$t||(this.tx.style.cursor="");const t=this.C$t?this.Vs:this.tx;Ms.Ys.Je?(t.removeEventListener("touchstart",this.P$t),t.removeEventListener("touchend",this.D$t)):(t.removeEventListener("mousedown",this.P$t),t.removeEventListener("click",this.D$t))}Hw(){this.$o(),this.oW(),this.tx.removeChild(this.Vs)}constructor(t,e=Ms.Ys.Je){super(),this.He=!1,this.P$t=t=>{t.stopPropagation(),this.wo(new pe("clickstart"))},this.D$t=t=>{t.stopPropagation(),this.wo(new pe("click"))},this.tx=t,this.C$t=e,this.Vs=h.createElement("a"),this.Vs.style.position="absolute",this.Vs.style.zIndex="11",this.Vs.target="qu",this.C$t?(wu(this.Vs,"learn more"),this.Vs.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Vs.setAttribute("rel","noopener")):Nh(this.Vs),this.tx.appendChild(this.Vs),this.oW()}};r(),r();var F0=[1200,992,768,576],V0={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},W0=class{N$t(t){let e=U0(t);e!==this.M$t&&(Id(this.Vs,e),Cd(this.Vs,this.M$t),this.M$t=e)}gn(){this.Yu.fn(Ka.pn,this.mn)}constructor(t,e){this.Vs=t,this.Yu=e,this.mn=t=>{this.N$t(t.width)},this.M$t=U0(e.Mu),Id(this.Vs,this.M$t),e.yn(Ka.pn,this.mn)}};function U0(t){for(let e of F0)if(t>e)return V0[e];return"theo-size-xs"}var G0=class extends Co{get we(){return this.Vs}get xE(){return this.Go}get Rk(){return this.ed.textContent||""}set Rk(t){wu(this.ed,t)}L$t(t){"countdown"!==this.Go&&(this.Go="countdown",this.B$t(),this.we.classList.remove("theoplayer-ad-skip-button"),this.we.classList.add("theoplayer-ad-skip-countdown")),this.Rk="You can skip in "+_.round(t)+" seconds"}O$t(){"skip"!==this.Go&&(this.Go="skip",this.Rk="Skip Ad",this.F$t(),this.we.classList.remove("theoplayer-ad-skip-countdown"),this.we.classList.add("theoplayer-ad-skip-button"))}F$t(){this.we.addEventListener("mouseup",this.V$t),this.we.addEventListener("touchend",this.V$t)}B$t(){this.we.removeEventListener("mouseup",this.V$t),this.we.removeEventListener("touchend",this.V$t)}gn(){this.$o(),this.B$t(),this.Qu.gn(),Gt(this.Vs),Gt(this.ed),this.W$t&&Gt(this.W$t)}constructor(t,e){super(),this.V$t=()=>{this.wo(new pe("DD"))},this.Vs=h.createElement("div"),this.we.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.we.style.position="absolute",this.ed=h.createElement("span"),this.we.appendChild(this.ed),e&&(this.W$t=h.createElement("div"),this.W$t.className="theoplayer-ad-skip-poster",this.W$t.style.backgroundImage='url("'+Cm(e)+'")',this.we.appendChild(this.W$t)),this.Go="countdown",this.Qu=new W0(this.we,t)}},H0=class extends Co{U$t(){const t=this.yQt.yN.activeTrackIds;if(t){if(this.G$t()){const e=this.cO.uC.map((t=>t.o)),i=this.aO.uC.map((t=>t.o));ms(e.concat(i),"0")&&t.push(0)}Y0(t,this.aO),Y0(t,this.cO),function(t,e){const i=!1;for(const i of e.uC)i.RJt=ms(t,i.xC)?bh.Jn:bh.Th}(t,this.Ll)}}H$t(){var t;const e=null==(t=this.yQt.yN.media)?void 0:t.tracks;if(!e)return;const i=e.filter(d0),s=e.filter(f0),n=e.filter(_0);if(this.G$t()&&0===s.length&&0!==this._I()){const t=this.Z$t();s.push(t)}if(this.G$t()&&0===i.length){const t=this.X$t();i.push(t)}z0(this.aO,i.map((t=>t.trackId))),z0(this.cO,s.map((t=>t.trackId))),z0(this.Ll,n.map((t=>t.trackId))),q0(i,this.aO),q0(s,this.cO),function(t,e){let i=!1;for(const s of t){let t=X0(e,s.trackId);t||(t=new v0(s),e.tt(t),i=!0)}}(n,this.Ll)}z$t(){this.cZ||(this.q$t=p(this.vd,250))}Y$t(){m(this.q$t)}K$t(){this.Y$t(),this.z$t()}j$t(){var t;const e=this.yQt.yN,i=e.media;var s;const n=null!=(s=null==i?void 0:i.duration)?s:NaN,r=(null==i?void 0:i.streamType)===chrome.cast.media.StreamType.LIVE||n<0,o=r?1/0:n;this.DA=o,this.Q$t();const h=e.getEstimatedLiveSeekableRange(),a=null==(t=e.customData)?void 0:t.buffers;if(ji(h)){const{start:t,end:e,isMovingWindow:i=r,isLiveDone:s=!1}=h;this.BFt(t,e,i,s)}else if(ji(a)){const[t,e]=a.seekable;this.BFt(t,e,r,!1)}else r?this.BFt(void 0,void 0,!0,!1):this.BFt(0,o,!1,!1)}J$t(){const t=this.yQt.yN,e=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||Z0(t);this.$$t=e,this.cZ!==e&&(this.cZ=e,this.cZ?this.wo(new fl(this.kR())):this.wo(new H(this.kR())))}eh(){const{playbackRate:t}=this.yQt.yN;this.t0t!==t&&(this.t0t=void 0,this.lZ!==t&&(this.lZ=t,this.wo(new Nu(this.kR(),t))))}e0t(){const{playerState:t}=this.yQt.yN;let e;switch(t){case chrome.cast.media.PlayerState.IDLE:e=Ht.$B;break;case chrome.cast.media.PlayerState.BUFFERING:e=Ht.Gn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:e=Ht.eO}this.P4(e),this.i0t()}BFt(t,e,i,s){ji(t)&&ji(e)?this.h4=new wo(t,e,i,i&&!s):this.h4=void 0}s0t(t,e){this.bJt=null!=e?e:this.bJt,this.yJt=null!=t?t:this.yJt,this.wo(new P)}We(t){this.n0t!==t?(this.aZ=!0,this.wo(new L(this.kR()))):this.n0t=void 0}bH(){if(!this.aZ)return;this.aZ=!1;const t=this.kR();this.wo(new ri(t,this.yR())),this.wo(new ha(t))}Mh(){this.R4=!0,this.IR()&&this.wo(new Te(this.kR()))}Q$t(){const t=this.nxt,e=this.Sd();t===e||S(t)&&S(e)||(this.nxt=e,this.wo(new Ls(e)))}r0t(){const t=this.kR();this.aZ||this.o0t===t||(this.o0t=t,this.wo(new ri(t,this.yR())))}wJt(){this.cZ&&(this.cZ=!1,this.wo(new H(this.kR())),this.P4(Ht.$B))}xst(){return this.Uc}pR(){return this.Txt.kb(this.pJt)}kR(){if(this.Uc.Oc){const t=this.yQt.MQt();if(void 0!==t)return t}return this.mst()}mst(){return void 0!==this.h0t?this.pJt+this.h0t:this.R4?this.Sd():this.pJt+this.yQt.NQt()}yR(){if(this.a0t)return new Date(this.mst()+this.a0t)}Sd(){if(this.Uc.Oc){var t;const e=null==(t=this.Uc.qst[0])?void 0:t.ct;if(void 0!==e&&!S(e))return e}return this.pJt+this.DA}PR(){return this.zG}IR(){return!this.Uc.Oc&&this.R4}YR(){return this.cZ}jR(){return this.lZ}QR(t){this.lZ!==t&&(this.t0t=this.lZ,this.lZ=t,this.wo(new Nu(this.kR(),t)),this.yQt.QR(t))}nI(){return this.I4}$R(){return this.Uc.Oc?se.vB(0,this.kR()):this.Ro.kb(this.pJt)}oI(){var t,e;if(this.Uc.Oc)return se.mB();let i=null!=(e=null==(t=this.h4)?void 0:t.y3().kb(this.pJt))?e:se.mB();if(i.V>0){const t=i.jn(i.V-1);i=i.JL(se.vB(t,this.kR()))}return i}aI(){return this.aZ}_R(){return this.aO}dI(){return this.cO}uI(){return this.Ll}Z$t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.lI(),id:"0",name:"",width:this._I()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:c0._E}}X$t(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:c0.fE}}G$t(){var t,e;return!(void 0!==(null==(t=this.UNt.IQt())?void 0:t.version))||(null==(e=this.UNt.IQt())?void 0:e.sdkType)===y0.MJt}DQt(t){this.G$t()&&we(t,0),this.yQt.DQt(t)}_I(){return this.yJt}lI(){return this.bJt}kI(){this.cZ&&(this.cZ=!1,this.$$t=!1,this.wo(new H(this.kR()))),this.yQt.kI()}TI(){this.cZ||(this.cZ=!0,this.$$t=!0,this.wo(new fl(this.kR()))),this.yQt.TI()}Eb(t){if(this.Uc.Oc)return;let e=_.max(0,t-this.pJt);e=_.round(1e6*e)/1e6;const i=this.h0t;this.h0t=e,this.$$t=this.YR(),this.n0t=e,this.aZ=!0,this.wo(new L(this.kR())),void 0===i&&(this.G$t()?this.u0t(e):this.J9(e))}J9(t){this.yQt.Eb(t,this.$$t).then(this.c0t(t)).catch(this.PQt)}c0t(t){return()=>{void 0!==this.h0t&&(this.h0t===t?this.h0t=void 0:this.J9(this.h0t))}}P4(t){this.I4!==t&&(this.I4=t,this.wo(new au(this.kR(),t))),void 0===this.h0t&&this.aZ&&t>=Ht.tO&&this.bH(),this.i0t()}i0t(){if(this.cZ)return void(this.l0t=!1);const t=this.I4>=Ht.eO;this.l0t!==t&&(this.l0t=t,t?this.wo(new Wi(this.kR())):this.wo(new tu(this.kR())))}d0t(){this.f0t||(this.f0t=h.createElement("div"),this.ea.we.appendChild(this.f0t),this.f0t.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.f0t.style.zIndex="10",Nh(this.f0t)),this.f0t.style.display=this.Uc.Oc?"":"none"}_0t(){var t;const e=null==(t=this.Uc.qst[0])?void 0:t.GYt;e&&!this.v0t?(this.v0t=new pt(this.f0t,!0),this.v0t.R$t=e,this.v0t.yn("clickstart",this.m0t)):this.v0t&&(this.v0t.R$t=e)}g0t(){var t;const e=null==(t=this.Uc.qst[0])?void 0:t.pKt;if(void 0===e||e<0)return void(this.p0t&&(this.p0t.gn(),this.p0t=void 0));if(!this.p0t){var i;const t=null==(i=this.ea.Ta)?void 0:i.mi;this.p0t=new G0(this.ea.Lu,t),this.f0t.appendChild(this.p0t.we),this.p0t.yn("DD",this.w0t)}const s=this.yQt.MQt();void 0!==s&&(s<e?this.p0t.L$t(e-s):this.p0t.O$t())}AJt(){return this.pJt}SJt(t){this.pJt=t}$st(t){}EI(){this.yQt.EI()}gn(){this.$o(),this.Uc.gn(),this.v0t&&(this.v0t.Hw(),this.v0t=void 0),this.p0t&&(this.p0t.gn(),this.p0t=void 0),this.f0t&&(Gt(this.f0t),this.f0t=void 0),this.yQt.kQt(this.C3),this.yQt.SQt(this.y0t),this.yQt.xQt(this.hJt),this.yQt.fn(F$.pQt,this.b0t),this.yQt.gn()}constructor(t,e,i,s,n){super(),this.Txt=se.mB(),this.a0t=void 0,this.R4=!1,this.zG=void 0,this.t0t=void 0,this.I4=Ht.$B,this.l0t=!1,this.Ro=se.mB(),this.h4=void 0,this.aZ=!1,this.aO=new Nn,this.cO=new Nn,this.Ll=new ua,this.nxt=NaN,this.h0t=void 0,this.$$t=!1,this.o0t=NaN,this.n0t=void 0,this.q$t=0,this.y0t=(t,e)=>{switch(t){case"buffered":this.Txt=new se(e),this.wo(new K(this.kR()));break;case"currentProgramDateTime":this.a0t=new Date(e).getTime()-this.kR();break;case"played":this.Ro=new se(e);break;case"seekable":this.j$t();break;case"videoHeight":this.s0t(void 0,e);break;case"videoWidth":this.s0t(e,void 0)}},this.C3=t=>{switch(t.type){case Ti.jy:this.We(t.currentTime);break;case Ti.Ky:this.bH();break;case Ti.qy:this.wo(new nU(t.representation,t.previousRepresentation));break;case Ti.Qy:this.wo(new DW(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case Ti.Iy:this.wo(new NZ(t.currentTime,t.initDataType,t.initData));break;case Ti.Ay:this.wo(new Bn(new sr(Qa.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case Ti.Sy:this.wo(new Ps)}},this.hJt=t=>{this.j$t(),this.J$t(),this.eh(),this.e0t(),this.r0t(),this.K$t(),this.H$t(),this.U$t(),this.d0t(),this._0t(),this.g0t(),t||Z0(this.yQt.yN)&&this.Mh()},this.vd=()=>{this.r0t(),this.g0t()},this.b0t=t=>{this.wo(t)},this.u0t=Wd((t=>this.J9(t)),50),this.PQt=t=>{this.h0t=void 0,this.wo(new V$(t))},this.m0t=()=>{this.TI()},this.w0t=()=>{this.Uc.DD()},this.ea=t,this.UNt=i,this.yQt=s,this.Uc=new L0(t,s,e.qc),this.pJt=n.AJt(),this.DA=n.Sd()-this.pJt,this.cZ=n.YR(),this.lZ=n.jR(),this.yJt=n._I(),this.bJt=n.lI(),this.yQt.TQt(this.C3),this.yQt.bQt(this.y0t),this.yQt.EQt(this.hJt),this.yQt.yn(F$.pQt,this.b0t),this.yQt.RQt().then((t=>{this.wo(new W$(t.bt,t.xc))}),this.PQt)}};function Z0(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function X0(t,e){for(const i of t.uC)if(i.xC===e)return i}function z0(t,e){let i=!1;for(let s=0;s<t.V;s++){const n=t.lC(s);-1===e.indexOf(n.xC)&&(t.it(n),s--,i=!0)}return i}function q0(t,e){let i=!1;for(const s of t){let t=X0(e,s.trackId);t||(t=new w0(s),e.tt(t),i=!0)}return i}function Y0(t,e){for(const i of e.uC)i.DJt=ms(t,i.xC);return!1}r();var K0=class{Tnt(t){return Promise.resolve("all")}SI(){}gn(){}};r();function j0(t,e,i){if(S(t))return i;if(t===1/0){if("live"===i||"dvr"===i)return i;if(e&&e.length>0){if(e.end(e.length-1)-e.start(0)>60)return"dvr"}return"live"}return"vod"}var Q0=[Ti.Cy,Ti.xy,Ti.zy,Ti.Yy,Ti.Zy,Ti.ro,Ti.Xy,Ti.sb,Ti.jy,Ti.Ky,tl.FL,tl.VL,Ti.qy,Ti.Qy,Ti.Iy,Ti.Ay,Ti.Sy],J0=class extends ec{oZ(t){if(!t)return;Ai(this.JH&&QA(this.JH),t&&QA(t))||(this.JH=t,this.wo(new rk(t)))}A0t(t){if(!t)return;const e=NC(t,this.ea.bd);Ai(this.Cc&&QA(this.Cc),e&&QA(e))||(this.Ba.SJt(0),this.Cc=e,this.wo(new yF(e)),this.Ba.wJt())}S0t(t){for(const e of this.rt.uC)if(e.xC===t)return e;for(const e of this.ht.uC)if(e.xC===t)return e}get Pft(){return this.Ba}set Pft(t){const e=this.Ba;e&&(e.fn(F$.pQt,this.b0t),e.fn(F$.wQt,this.T0t),e.fn(Q0,this.Ds),e.fn(tl.tC,this.BW),t.SJt(e.AJt()),e.$st(t.xst())),this.Ba=t,this.aO.fC=t._R(),this.cO.fC=t.dI(),this.Ll.fC=t.uI(),this.Uc.fC=t.xst(),e&&e.gn(),t.yn(F$.pQt,this.b0t),t.yn(F$.wQt,this.T0t),t.yn(Q0,this.Ds),t.yn(tl.tC,this.BW)}get io(){return this.so}get qc(){return this.xst()}xst(){return this.Uc}Rst(){return this.cst}_R(){return this.aO}pR(){return this.Ba.pR().ks()}get k0t(){return this.E0t||this.Cc}set k0t(t){this.E0t=t}async Dn(t,e){var i;t&&await this.uJt(t,null!=(i=t.ads)?i:[],t.streamType,NaN,0,null!=e?e:0)}async x0t(t){var e;const i=null!=(e=this.E0t)?e:this.Cc;if(!i)return;var s;const n=this.E0t?null!=(s=this.E0t.ads)?s:[]:this.mnt(),r=this.ea.Sd(),o=this.ea.oI(),h=j0(r,o,i.streamType),a=o.length>0?o.start(0):0,u=null!=t?t:this.mst();await this.uJt(i,n,h,r,a,u)}mnt(){const t=new Ue;return this.Uc.$st(t),t.mnt()}yR(){return this.Ba.yR()}AR(){return this.JH}get SR(){return this.kR()}set SR(t){this.ER(t)}kR(){return this.Ba.kR()}mst(){return this.Ba.mst()}ER(t,e){this.R0t||(this.UNt.aJt()||this.R0t||!this.Cc?this.Ba.Eb(t):this.Dn(this.Cc,t))}Sd(){return this.Ba.Sd()}IR(){return this.Ba.IR()}PR(){return this.zG}NR(){return this.qG}LR(){return this.uO}UR(){return this.ea.WR}HR(){return this.uZ}ZR(t){this.uZ=t,this.wo(new rs(this.SR,this.vI)),this.UNt.ZR(t)}YR(){return this.Ba.YR()}jR(){return this.Ba.jR()}QR(t){this.Ba.QR(t)}$R(){return this.Ba.$R().ks()}eI(){return hl.jB}iI(t){}nI(){return this.Ba.nI()}oI(){return this.Ba.oI().ks()}aI(){return this.Ba.aI()}tu(){return this.Cc}async xa(t){this.Cc=t,await this.Dn(t),this.E0t=void 0,this.Ba.wJt()}uI(){return this.Ll}lI(){return this.Ba.lI()}_I(){return this.Ba._I()}dI(){return this.cO}mI(){return this.ZA}gI(t){this.ZA=t,this.wo(new rs(this.SR,this.vI)),this.UNt.gI(t)}get yI(){return!1}set yI(t){}AI(){}bI(){return this.sa}SI(){}kI(){this.UNt.aJt()||this.R0t||!this.Cc?this.Ba.kI():this.Dn(this.Cc)}TI(){this.Ba.TI()}dr(){this.so=!0}lr(){this.JH=void 0,this.so=!1}ge(){}be(){}async uJt(t,e,i,s,n,r){this.R0t=!0,this.I0t(),this.Ba.SJt(n);const o="live"===i||"dvr"===i,h=function(t,e,i){return{theoplayer_version:1,streamStart:t,isLive:e,sourceDescription:i}}(n,o,t),a={cJt:t,qc:e,SR:_.max(0,r-n),ct:s,o0:o?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,lJt:h};try{await this.UNt.uJt(a)}catch(t){this.C0t(t)}finally{this.R0t=!1}}P0t(){this.D0t(this.aO),this.D0t(this.cO),this.N0t(this.Ll)}D0t(t){for(const e of t.uC)this.M0t(e);t.yn(Se.OI,(t=>{this.M0t(t.Ht),this.L0t()}))}N0t(t){for(const e of t.uC)this.B0t(e);t.yn(Se.OI,(t=>{this.B0t(t.Ht),this.L0t()}))}M0t(t){t.yn(Lo.kJt,this.vpt),t.yn(Lo.EJt,this.O0t),t.yn(Lo.EJt,this.U$t)}B0t(t){t.yn(Lo.TJt,this.F0t),t.yn(Lo.TJt,this.U$t)}V0t(){const t=[];for(const e of this.rt.uC)e.Rt&&t.push(e.xC);for(const e of this.ht.uC)e.Rt&&t.push(e.xC);for(const e of this.nt.uC)e.xE===bh.Jn&&t.push(e.xC);this.Ba.DQt(t)}W0t(t,e,i){this.U0t=t,this.G0t=e,this.H0t=i}Z0t(t){var e,i;if(!t)return!1;return(null!=(i=null==(e=this.UNt.IQt())?void 0:e.version)?i:-1)>=2?t.map((t=>t.o)):[t[0].o]}X0t(t){this.z0t=t}CI(){}DI(){}LI(t){throw new g("Can't add a track while casting.")}async EI(){this.Ba.EI(),this.I0t()}I0t(){this.EW=Ht.$B,this.wW=!1,this.AW=!1,this.zG=void 0,this.qG=void 0}async gn(){this.I0t(),this.$o(),this.Pft=this.q0t(),this.UNt.fn(Qu.pQt,this.b0t),this.UNt.fn(Qu.KQt,this.cMt),this.UNt.fn(Qu.ob,this.Y0t),this.UNt.fn(Qu.YQt,this.K0t),this.UNt.fn(Qu.jQt,this.j0t),this.UNt.gn()}q0t(){return new a0(this,this.Ba.AJt(),this.Ba.kR(),this.Ba.Sd(),this.Ba.IR(),this.Ba.YR(),this.Ba.jR(),this.Ba._I(),this.Ba.lI())}constructor(t,e){super(t,!0),this.so=!1,this.z0t=It,this.EW=Ht.$B,this.wW=!1,this.AW=!1,this.R0t=!1,this.E0t=void 0,this.zG=void 0,this.qG=void 0,this.aO=new Wh,this.cO=new Wh,this.Ll=new at,this.sa=new N,this.uO=new cS,this.cst=new K0,this.U0t=void 0,this.G0t=void 0,this.H0t=void 0,this.Y0t=t=>{var e,i;(ji(t.vI)&&!xs(t.vI,this.ZA,1e-5)||ji(t.GR)&&t.GR!==this.uZ)&&(this.ZA=null!=(e=t.vI)?e:this.ZA,this.uZ=null!=(i=t.GR)?i:this.uZ,this.wo(new rs(this.SR,this.ZA)))},this.K0t=()=>{const t=this.UNt.aJt();this.Pft=t?new H0(this,this.ea,this.UNt,t,this.Ba):this.q0t()},this.T0t=t=>{this.oZ(t.bt),this.A0t(t.xc)},this.j0t=t=>{const e=this.S0t(t.TN);if(!e)return void 0;const i={targetQualityIds:t.JQt};e.IJt(i)},this.b0t=t=>{this.C0t(t.lt)},this.C0t=t=>{this.z0t&&this.z0t(t)},this.cMt=t=>{this.zG=t.lt,this.qG=vk(this.zG),this.wo(new Ga(this.qG))},this.O0t=t=>{if(!t.enabled)return;const e=this.rt.uC.some((e=>e.xC===t.trackId))?this.rt:this.ht;for(const i of e.uC)i.Rt&&i.xC!==t.trackId&&(i.Rt=!1)},this.F0t=t=>{if(t.mode===bh.Jn)for(const e of this.nt.uC)e.xE===bh.Jn&&e.xC!==t.trackId&&_x(e.Lt,t.track.Lt)&&(e.xE=bh.Th)},this.U$t=Wd((()=>{this.V0t()}),50),this.L0t=()=>{const t=[];var e;const i=null!=(e=Fo(this.ht.uC,(t=>a1(t,this.U0t))))?e:Fo(this.ht.uC,(t=>t.Rt));var s;i&&t.push(i.xC);const n=null!=(s=Fo(this.nt.uC,(t=>a1(t,this.G0t))))?s:Fo(this.nt.uC,(t=>t.xE===bh.Jn));var r;n&&t.push(n.xC);const o=null!=(r=Fo(this.rt.uC,(t=>a1(t,this.H0t))))?r:Fo(this.rt.uC,(t=>t.Rt));o&&t.push(o.xC),0!==t.length&&this.Ba.DQt(t)},this.vpt=t=>{const e=this.Z0t(t.targetQuality),i=t.track;this.UNt.$Qt(i.xC,i.h3,e)},this.BW=t=>{this.wo(t);const e=t.readyState;!this.wW&&this.EW===Ht.$B&&e>=Ht.Gn&&(this.wW=!0,this.wo(new KT(t.currentTime))),!this.AW&&this.EW<=Ht.Gn&&e>=Ht.tO&&(this.AW=!0,this.wo(new jT(t.currentTime))),this.EW<=Ht.tO&&e>=Ht.eO&&this.wo(new ho(t.currentTime)),this.EW<=Ht.eO&&e===Ht.iO&&this.wo(new QT(t.currentTime)),this.EW=e},this.ZA=this.ea.vI,this.uZ=this.ea.GR,this.UNt=e,this.UNt.yn(Qu.pQt,this.b0t),this.UNt.yn(Qu.KQt,this.cMt),this.UNt.yn(Qu.ob,this.Y0t),this.UNt.yn(Qu.YQt,this.K0t),this.UNt.yn(Qu.jQt,this.j0t),this.Uc=new OF(this),this.JH=this.ea.bt,this.Cc=this.ea.tu(),this.Pft=new a0(this,0,this.ea.mst(),this.ea.Sd(),this.ea.RR,this.ea.qR,this.ea.KR,this.ea.fI,this.ea.cI),this.P0t()}};r();var $0=class extends Ds{ba(){return new t1(this.lt)}constructor(t){super("error"),this.lt=t}},t1=class extends pe{constructor(t){super("error"),this.error=t}};r();var e1=class extends pe{constructor(t){super("statechange"),this.state=t}};function i1(t,e){let i;return{get casting(){return t.hQ},get error(){return t.lt},get receiverName(){return t.Q0t},get state(){return t.Pft},start(){t.Cn()},stop(){t.EI()},join(){t.J0t()},leave(){t.$0t()},set connectionCallback(t){null==e||e.t1t(t)},get connectionCallback(){return null==e?void 0:e.e1t()},get source(){return i||t.xc},set source(e){i=e,t.xc=e},addEventListener(e,i){const s=tS(e,ze);t.yn(s,i)},removeEventListener(e,i){const s=tS(e,ze);t.fn(s,i)}}}r();var s1=class extends sn{get hQ(){return this.Pft===In.CONNECTING||this.Pft===In.CONNECTED}get lt(){return this.zG}get ka(){return this.su||(this.su=i1(this,this.i1t)),this.su}get Q0t(){var t;return null==(t=this.i1t.s1t())?void 0:t.fJt()}get xc(){return this.ea?this.ea.k0t:this.E0t}set xc(t){this.E0t=t?NC(t,this.n1t.bd):void 0,this.ea&&(this.ea.k0t=this.E0t,this.E0t&&this.ea.Dn(this.E0t))}get Pft(){return this.Ba}set Pft(t){let e=t;this.r1t||e!==In.CONNECTING&&e!==In.CONNECTED||(e=In.AVAILABLE),this.Ba!==e&&(this.Ba=e,this.wo(new e1(this.Pft)))}async o1t(){if(!this.h1t)throw new g("Chromecast must be initialized before starting a session");await this.h1t,this.i1t.s1t()||await this.i1t.a1t()}async Cn(){this.r1t=!0;try{if(this.Pft=In.CONNECTING,await this.o1t(),await this.u1t(),this.ea){const t=this.n1t.tu(),e=this.i1t.c1t(t);this.ea.k0t=e?NC(e,this.n1t.bd):this.E0t,this.ea.x0t()}this.Pft=In.CONNECTED,await this.n1t.EI()}catch(t){this.l1t(!1).catch(It),this.Pft=In.AVAILABLE,Je(t)||this.O6(t)}}async J0t(){this.r1t=!0;try{if(this.Pft=In.CONNECTING,await this.o1t(),await this.u1t(),this.ea){const t=this.n1t.tu(),e=this.i1t.d1t(t);e&&(this.ea.k0t=NC(e,this.n1t.bd))}this.Pft=In.CONNECTED,await this.n1t.EI()}catch(t){await this.l1t(!0).catch(It),this.Pft=In.AVAILABLE,Je(t)||this.O6(t)}}async f1t(){this.i1t.s1t()&&await this.Cn()}async u1t(){null!=this.ea||(this.ea=this._1t()),this.zG=void 0,this.n1t.TI(),await this.vj.v1t(this.ea)}_1t(){const t=new J0(this.n1t,this.i1t.s1t());return t.X0t(this.O6),t}m1t(){this.ea&&(this.ea.gn(),this.ea=void 0)}async l1t(t){if(this.r1t=!1,!this.ea)return;const e=this.ea.io,i=this.ea.tu(),s=this.ea.mst();try{if(e){let e;e=t?this.i1t.g1t(i):this.i1t.p1t(i),null!=e||(e=i),await this.vj.w1t(e,e===i),this.n1t.ER(s),this.n1t.kI()}}finally{this.m1t()}}$0t(){this.hQ&&(this.i1t.y1t(!1),this.l1t(!0).catch(this.O6))}EI(){this.hQ&&(this.i1t.y1t(!0),this.l1t(!1).catch(this.O6))}gn(){this.fW.Yw(),this.i1t.fn(o0.gJt,this.b1t),this.$o(),this.m1t()}constructor(t,e,i,s){super(),this.zG=void 0,this.su=void 0,this.ea=void 0,this.Ba=In.UNAVAILABLE,this.r1t=!1,this.fW=new da,this.A1t=()=>{this.i1t.yn(o0.gJt,this.b1t),this.Pft=this.i1t.S1t()},this.b1t=t=>{const e=t.Pft;this.Pft=e,e!==In.UNAVAILABLE&&e!==In.AVAILABLE||this.l1t(!1).catch(this.O6)},this.E0t=void 0,this.O6=t=>{Je(t)||t instanceof Xi&&(this.zG=t,this.wo(new $0(t).ka))},this.vj=t,this.n1t=e,this.i1t=s,this.DT=i.chromecast,this.h1t=So(this.i1t.Tj(this.DT,this.fW.Vw),this.fW),this.h1t.then(this.A1t).catch(this.O6)}};r();var n1=class extends sn{get hQ(){return!1}get lt(){}get Q0t(){}get xc(){}set xc(t){}get Pft(){return In.UNAVAILABLE}get ka(){return this.su||(this.su=i1(this)),this.su}J0t(){Ms.Op("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}$0t(){Ms.Op("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Cn(){Ms.Op("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}EI(){Ms.Op("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}f1t(){return Promise.resolve()}gn(){}};function r1(t){return{bt:t.bt,SR:t.kR(),ct:t.Sd(),RR:t.RR,lt:t.PR(),DR:t.NR(),GR:t.GR,qR:t.qR,KR:t.KR,sI:t.sI,hI:t.hI,cI:t.cI,fI:t.fI,vI:t.vI}}r(),r();var o1=class extends ec{xst(){return this.Uc}_R(){return this.aO}get MR(){return this.LR()}LR(){return this.uO}Sa(){return this.hO}uI(){return this.Ll}dI(){return this.cO}switchContexts(t){this.ea=t,this.aO.fC=t.ht,this.cO.fC=t.rt,this.Ll.fC=t.nt,this.hO.fC=t.lH,this.uO.fC=t.MR,this.Uc.fC=t.qc}T1t(t){this.ea!==t&&(this.tZ(),this.switchContexts(t),this.$H())}lO(t){if(this.ea===t)return;let e;this.tZ(),this.Nst&&(e=r1(this));const i=this.AR(),s=this.bI(),n=this.AI();if(this.switchContexts(t),void 0!==e){Zc(this,e,r1(this))}const r=this.AR();r!==i&&this.wo(new rk(r)),this.bI()!==s&&this.wo(new Vi),this.AI()!==n&&this.wo(new ok),this.$H()}async gn(t){await super.gn(t),this.hO.gn(t),this.aO.gn(t),this.cO.gn(t),this.Ll.gn(t),this.uO.gn(),await this.Uc.gn(t)}constructor(t,e){super(t,e),this.aO=new Wh,this.cO=new Wh,this.Ll=new at,this.uO=new $c,this.hO=new Vh(t.lH),this.aO.fC=t.ht,this.cO.fC=t.rt,this.Ll.fC=t.nt,this.uO.fC=t.MR,this.Uc=new OF(this),this.Uc.fC=t.qc}},h1=class extends o1{tu(){const t=super.tu();return!t&&this.k1t.hQ&&this.k1t.xc?this.k1t.xc:t}xa(t,e){return this.Qo.Jo((e=>(this.E1t=new da,this.E1t.Kw(e),So(super.xa(t,this.E1t.Vw),this.E1t))),e)}kI(){super.kI(),this.bd.cast.strategy!==vS.AUTO||this.k1t.hQ||this.k1t.f1t()}v1t(t){return this.Qo.Jo((e=>this.x1t(t,e)))}w1t(t,e){return void 0===t&&(t=void 0),void 0===e&&(e=!1),this.Qo.Jo((i=>this.R1t(t,e,i)))}x1t(t,e){J(e),this.I1t.qc&&this.I1t.qc.$st(t.qc),this.C1t(),this.P1t=Fo(this.I1t.ht.uC,(t=>t.Rt)),this.mEt=Fo(this.I1t.nt.uC,(t=>"showing"===t.xE)),this.D1t=Fo(this.I1t.rt.uC,(t=>t.Rt)),this.N1t=t,this.N1t.W0t(this.P1t,this.mEt,this.D1t),this.lO(t),this.N1t.dr()}async R1t(t,e,i){J(i);const s=this.N1t;if(void 0!==s)try{if(t){await this.I1t.EI(),J(i);const s=NC(t,this.I1t.bd);e&&(s.ads=void 0),this.E1t=new da,this.E1t.Kw(i),await So(this.I1t.xa(s,this.E1t.Vw),this.E1t)}e&&this.I1t.qc&&s.qc.$st(this.I1t.qc)}catch(t){Eu(t)}finally{s.lr(),this.lO(this.I1t),this.P1t=Fo(this.N1t.ht.uC,(t=>t.Rt)),this.mEt=Fo(this.N1t.nt.uC,(t=>"showing"===t.xE)),this.D1t=Fo(this.N1t.rt.uC,(t=>t.Rt)),this.I1t.ht.yn(Se.OI,this.M1t),this.I1t.nt.yn(Se.OI,this.L1t),this.I1t.rt.yn(Se.OI,this.B1t),this.I1t.yn(tl.OL,this.C1t),this.N1t===s&&(this.N1t=void 0)}}EI(){var t;return this.P1t=void 0,this.mEt=void 0,this.D1t=void 0,this.C1t(),null==(t=this.E1t)||t.Yw(),this.Qo.Jo((()=>super.EI()))}async gn(){var t;null==(t=this.E1t)||t.Yw(),this.k1t.gn(),await this.w1t(),await this.Qo.gn(),await super.gn()}constructor(t,e){super(t),this.Qo=new ju,this.P1t=void 0,this.mEt=void 0,this.D1t=void 0,this.M1t=t=>{const e=t.Ht;a1(this.P1t,e)&&(e.Rt=!0)},this.L1t=t=>{const e=t.Ht;a1(this.mEt,e)&&(e.xE=bh.Jn)},this.B1t=t=>{const e=t.Ht;a1(this.D1t,e)&&(e.Rt=!0)},this.C1t=()=>{this.I1t.ht.fn(Se.OI,this.M1t),this.I1t.nt.fn(Se.OI,this.L1t),this.I1t.rt.fn(Se.OI,this.B1t)},this.I1t=t,this.bd.cast.strategy!==vS.DISABLED?this.k1t=new s1(this,t,this.bd.cast,e):this.k1t=new n1,this.xz._Q(this.k1t)}};function a1(t,e){return void 0!==t&&void 0!==e&&(t.gs===e.gs&&e.xh===t.xh)}r();var u1=new class extends Co{t1t(t){this.O1t=t}e1t(){return this.O1t}s1t(){return this.F1t}S1t(){switch(this.V1t.getCastState()){case cast.framework.CastState.CONNECTED:return In.CONNECTED;case cast.framework.CastState.CONNECTING:return In.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return In.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return In.UNAVAILABLE}}async Tj(t,e){await DJ(e),this.V1t=cast.framework.CastContext.getInstance(),this.V1t.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.vQ),this.V1t.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async a1t(){try{const t=await this.V1t.requestSession();if(t)throw t}catch(t){throw new Xi(FJ(t))}}c1t(t){var e;return null==(e=this.O1t)?void 0:e.onStart(t)}p1t(t){var e;return null==(e=this.O1t)?void 0:e.onStop(t)}d1t(t){var e;return null==(e=this.O1t)?void 0:e.onJoin(t)}g1t(t){var e;return null==(e=this.O1t)?void 0:e.onLeave(t)}y1t(t){this.V1t.endCurrentSession(t)}constructor(...t){super(...t),this.F1t=void 0,this.O1t=void 0,this.vQ=()=>{const t=this.S1t();this.F1t=t===In.CONNECTED?new n0(this.V1t.getCurrentSession()):void 0,this.wo(new h0(t))}}},c1=new class{get ka(){return this.su||(this.su=function(t){return{initialize(e){const i=t.Tj(mS(e));return i.catch(It),i},startSession(){const e=t.a1t();return e.catch(It),e},endSession(){t.W1t()}}}(this)),this.su}async Tj(t){this.h1t||(this.h1t=this.U1t(t)),await this.h1t}async U1t(t){await this.i1t.Tj(t)}async a1t(){if(!this.h1t)throw new g("Chromecast must be initialized before starting a session");await this.h1t,this.i1t.s1t()||await this.i1t.a1t()}G1t(){this.i1t.y1t(!1)}W1t(){this.i1t.y1t(!0)}constructor(t){this.h1t=void 0,this.su=void 0,this.i1t=t}}(u1),l1={get chromecast(){return c1.ka}};fF((t=>new h1(t,u1)),io.Bst),r(),r(),r(),r(),r(),r(),r();var d1=class{H1t(t,e,i,s){t.kZ.forEach((t=>{if(!this.Z1t(t.X1t)){const n=t.z1t(e,i,s);n&&this.q1t(n)}}))}Z1t(t){return this.Y1t.get(t)}q1t(t){this.Y1t.set(t.K1t,t),this.j1t.set(t.K1t,t.Q1t),this.J1t.nu(t.$1t)}tnt(t){this.j1t.has(t.K1t)||(this.j1t.set(t.K1t,t),this.J1t.nu(t.$1t))}t2t(t){return this.j1t.forEach(t)}e2t(t){return this.Y1t.forEach(t)}i2t(t){let e=!1;return this.Y1t.forEach((i=>{e=i.i2t(t)||e})),e}async gn(){const t=[];this.Y1t.forEach((e=>t.push(e.gn()))),this.j1t.forEach((e=>t.push(e.gn()))),await Promise.all(t),this.Y1t.clear(),this.j1t.clear()}constructor(t){this.J1t=t,this.Y1t=xu(),this.j1t=xu()}};r();var qh=class t extends Ds{ba(){return new f1(this.fjt,this.gb,this.Wb,this.xc)}static s2t(e){return new t(Fc.GENERAL,e.gb,e.vjt)}static n2t(e,i){return new t(e.fjt,e.message,e.vjt,i)}constructor(t,e,i,s){super("r2t"),this.fjt=t,this.gb=e,this.Wb=i,this.xc=s}},f1=class extends pe{constructor(t,e,i,s){super("aderror"),this.problemType=t,this.message=e,this.errorCode=i,this.source=s}},_1=class extends Ju{get o2t(){return this.h2t}get Oc(){let t=!1;return this.a2t((e=>{t=t||e.u2t})),t}get qst(){const t=[];return this.a2t((e=>{const i=e.qst;i.length&&t.push(...i)})),t}get Kst(){let t=null;return this.a2t((e=>{null!=t||(t=e.Kst)})),t}get jst(){const t=[];return this.a2t((e=>{t.push(...e.jst)})),t}get Qst(){const t=[];return this.a2t((e=>{t.push(...e.Qst)})),t}$st(t){this.a2t((e=>{e.$st(t)}))}get ka(){var t;return null!=(t=this.su)?t:this.su=Ee(this)}u6(t,e,i){try{this.c2t=i;const s=Ih.Fg.xZ(t);if(s.X1t===I.Lst)return;const n=this.h2t.Z1t(s.X1t);if(!n)throw new Gr(Fc.ADBLOCK,void 0,"Ads could not be loaded.");e!==ja.zst&&this.O9||this.d2t.l2t(n),s.u6(t,e,n,this.c2t)}catch(e){0,this.wo(qh.n2t(e,t.sources))}}DD(){this.a2t((t=>{t.DD()}))}tnt(t){this.h2t.tnt(t)}Jst(t,e){return this.d2t.Jst(t,e)}f2t(t){this.h2t.e2t((e=>{e.f2t(t)}))}i2t(t){return this.h2t.i2t(t)}a2t(t){return this.h2t.t2t(t)}SI(){this.h2t.e2t((t=>t.SI()))}async er(){this.O9=!1;const t=[];this.h2t.e2t((e=>t.push(e.EI()))),await Promise.all(t)}async gn(){this.$o(),await this.h2t.gn(),this.d2t.fn(Ti.ro,this.Eit),this.fn("r2t",this._2t)}constructor(t){super(),this.c2t=!1,this.O9=!1,this.su=void 0,this._2t=t=>{if(!this.c2t)return;const e=new dk(lk.ADVERTISEMENT_ERROR,t.gb),i=new A(Qa.AD_BLOCKER_DETECTED,t.gb+" Turn off your AdBlocker and try again.",e);this.d2t.MH(i)},this.Eit=()=>{this.O9=!0},this.d2t=t,this.h2t=new d1(this),this.yn("r2t",this._2t),t.yn(Ti.ro,this.Eit)}};r(),r(),r();var Zi=class extends T0{get qc(){return this.Uc}get BJt(){return this.v2t}set BJt(t){this.v2t=t}get OJt(){return this.m2t}set OJt(t){this.m2t=t}set YBt(t){this.nQt=t}get YBt(){return this.nQt}get lJt(){return this.g2t}p2t(){this.w2t=!0}y2t(t){this.Uc.push(t),this.w2t=!1}b2t(t){we(this.Uc,t)}get JR(){return this.w2t}constructor(t){super(),this.nQt=t,this.Uc=[],this.v2t=-1,this.m2t=-1,this.g2t=void 0,this.w2t=!1}},v1=class extends Zi{get tQt(){return this.A2t}get jst(){return this.S2t}tr(t){void 0!==t.maxDuration&&(this.v2t=t.maxDuration),void 0!==t.customData&&(this.g2t=t.customData)}T2t(t){const e=this.Uc.indexOf(t);return e>=0&&e<this.Uc.length-1}y2t(t){super.y2t(t),this.S2t.push(t)}k2t(t){we(this.S2t,t)}b2t(t){super.b2t(t),we(this.S2t,t)}constructor(t,e){super(e.timeOffset),this.S2t=[],this.A2t=t,this.tr(e)}};r(),r();var Ns=function(t){return t.Ejt="linear",t.E2t="nonlinear",t.tE="unknown",t}({}),m1=function(t){return t.NONE="none",t.READY="ready",t}({}),cs=class extends S0{x2t(t,e,i,s,n,r){this.ZS=t,this.zA=e,this.qA=i,this.DA=s,this.AYt=n,this.wKt=r,this.R2t="ready"}get I2t(){return this.R2t}get bYt(){return this.AYt}get ct(){return this.DA}Yst(){var t;return null!=(t=this.su)?t:this.su=this.ba()}get Ti(){return this.qA}get o(){return this.ZS}get pKt(){return this.wKt}get ji(){return this.zA}get C2t(){return this.P2t}get GYt(){return this.HYt}get dYt(){return this.fYt}get Jqt(){return this.fKt}get lJt(){return this.g2t}get D2t(){return this.N2t}$Jt(){}s$t(){return""}i$t(){return this.M2t}constructor(t,e){super(),this.P2t=e,this.ZS=void 0,this.wKt=void 0,this.zA=void 0,this.qA=void 0,this.DA=void 0,this.fKt=[],this.AYt=[],this.R2t="none",this.g2t=void 0,this.N2t=!1,this.td=t}};function zo(t){return{get adSystem(){return t.$Jt()},get readyState(){return t.I2t},get adBreak(){return t.td.Yst()},get duration(){return t.ct},get companions(){return t.bYt.map((t=>t.ka))},get resourceURI(){return t.i$t()},get clickThrough(){return t.GYt},get width(){return t.ji},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t.C2t)},get height(){return t.Ti},get id(){return t.o},get skipOffset(){return t.pKt},get integration(){return t.tQt},get creativeId(){return t.dYt},get universalAdIds(){return t.Jqt},get customData(){return t.lJt},get isSlate(){return t.D2t}}}r();var g1=class{get NYt(){return this.MYt}get WYt(){return this.UYt}get L2t(){return this.B2t}get GYt(){return this.HYt}get Ti(){return this.qA}get ejt(){return this.M2t}get ji(){return this.zA}get ka(){var t;return null!=(t=this.su)?t:this.su=function(t){return{get adSlotId(){return t.NYt},get altText(){return t.WYt},get contentHTML(){return t.L2t},get clickThrough(){return t.GYt},get height(){return t.Ti},get resourceURI(){return t.ejt},get width(){return t.ji}}}(this)}O2t(t){if(t.GYt&&t.ejt)return;const e=function(t){try{return u$(t,"text/html")}catch(t){return}}(t.L2t);e&&(this.HYt=p1(e,"a","href"),this.M2t=p1(e,"img","src"))}constructor(t){var e;this.su=void 0,this.HYt=void 0,this.M2t=void 0,this.MYt=t.NYt,this.zA=t.ji,this.qA=t.Ti,this.B2t=t.L2t,this.HYt=t.GYt,this.M2t=t.ejt,this.UYt=null!=(e=t.WYt)?e:"",this.O2t(t)}};function p1(t,e,i){const s=t.querySelector(e);return s&&s.getAttribute(i)||""}var w1=class extends cs{get tQt(){return this.A2t}get F2t(){return this.V2t}set F2t(t){this.V2t=t}ba(){return zo(this)}tr(t){t.id&&(this.ZS=t.id),void 0!==t.skipOffset&&(this.wKt=t.skipOffset),void 0!==t.width&&(this.zA=t.width),void 0!==t.height&&(this.qA=t.height),void 0!==t.duration&&(this.DA=t.duration),void 0!==t.readyState&&(this.R2t=function(t){return"ready"===t?m1.READY:m1.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.M2t=t.resourceURI),void 0!==t.clickThrough&&(this.HYt=t.clickThrough),void 0!==t.companions&&(this.AYt=[...t.companions].map(y1)),void 0!==t.creativeId&&(this.fYt=t.creativeId),void 0!==t.universalAdIds&&(this.fKt=t.universalAdIds),void 0!==t.customData&&(this.g2t=t.customData)}constructor(t,e,i){super(i,function(t){return"linear"===t?Ns.Ejt:"nonlinear"===t?Ns.E2t:Ns.tE}(e.type)),this.V2t=0,this.A2t=t,this.tr(e)}};function y1(t){const e={NYt:t.adSlotId,WYt:t.altText,L2t:t.contentHTML,Dk:void 0,GYt:t.clickThrough,Ti:t.height,ejt:t.resourceURI,ji:t.width};return new g1(e)}r();var Ho=class extends Ra{ba(){return new b1(this.snt.Yst(),this.W2t)}get W2t(){return this.U2t}constructor(t,e){super("G2t",t),this.U2t=e}},b1=class extends CF{constructor(t,e){super("adskip",t),this.playedPercentage=e}};r();var wc=class extends ss{ba(){return new A1(this.td.Yst())}constructor(t){super("H2t",t)}},A1=class extends us{constructor(t){super("updateadbreak",t)}};r();var S1=class extends ss{ba(){return new T1(this.td.Yst())}constructor(t){super("Z2t",t)}},T1=class extends us{constructor(t){super("adbreakchange",t)}};r();var Is=class extends Ra{ba(){return new k1(this.snt.Yst(),this.currentTime)}constructor(t,e){super("X2t",t),this.currentTime=e}},k1=class extends CF{constructor(t,e){super("adfirstquartile",t),this.currentTime=e}};r();var ks=class extends Ra{ba(){return new E1(this.snt.Yst(),this.currentTime)}constructor(t,e){super("z2t",t),this.currentTime=e}},E1=class extends CF{constructor(t,e){super("admidpoint",t),this.currentTime=e}};r();var Cs=class extends Ra{ba(){return new x1(this.snt.Yst(),this.currentTime)}constructor(t,e){super("q2t",t),this.currentTime=e}},x1=class extends CF{constructor(t,e){super("adthirdquartile",t),this.ad=t,this.currentTime=e}},R1=class{get qc(){return this.Uc}get WJt(){return this.l$t}get ka(){var t;return null!=(t=this.su)?t:this.su=function(t){return{get integration(){return t.tQt},get ads(){return t.qc.map((t=>t.Yst()))},get adBreaks(){return t.WJt.map((t=>t.Yst()))},createAd:(e,i)=>t.Y2t(e,i?t.K2t(i):void 0).Yst(),updateAd(e,i){t.j2t(t.Q2t(e),i)},updateAdProgress(e,i){const s=Vs(Number(i),0,1);t.J2t(t.Q2t(e),s)},beginAd(e){t.k2t(t.Q2t(e))},endAd(e){t.$2t(t.Q2t(e))},skipAd(e){t.BQt(t.Q2t(e))},removeAd(e){t.b2t(t.Q2t(e))},createAdBreak:e=>t.t3t(e).Yst(),updateAdBreak(e,i){t.e3t(t.K2t(e),i)},removeAdBreak(e){t.i3t(t.K2t(e))},removeAllAds(){t.s3t()},error(e){t.n3t(e)},fatalError(e,i){const s=i?Number(i):void 0;t.r3t(e,s)}}}(this)}get PN(){return this.U6}set PN(t){this.U6=t}get u2t(){return this.o3t.some((t=>t.C2t===Ns.Ejt))}get K1t(){return this.tQt}get qst(){return this.o3t}get Kst(){var t;return null!=(t=this.c$t)?t:null}get jst(){return Qe(this.l$t,(t=>t.jst))}get Qst(){return this.l$t.filter((t=>!t.JR))}DD(){var t;if(0===this.o3t.length)return;const e=this.o3t[0];(null==(t=this.U6)?void 0:t.skipAd)?this.U6.skipAd(e.Yst()):this.BQt(e)}$st(t){}Y2t(t,e){var i;const s=null!=e?e:this.h3t({timeOffset:null!=(i=t.timeOffset)?i:0}),n=new w1(this.tQt,t,s);return s.y2t(n),this.Uc.push(n),this.$1t.wo(new Uu(n)),n}j2t(t,e){t.tr(e),this.$1t.wo(new bn(t))}J2t(t,e){if(!ms(this.o3t,t))throw new g("Cannot update ad progress on a non-started ad");const i=t.F2t,s=_.max(i,e);t.F2t=s;const n=this.d2t.kR();i<.25&&s>=.25&&this.$1t.wo(new Is(t,n)),i<.5&&s>=.5&&this.$1t.wo(new ks(t,n)),i<.75&&s>=.75&&this.$1t.wo(new Cs(t,n))}k2t(t){ms(this.o3t,t)||(this.o3t.push(t),t.td.k2t(t),this.a3t(t.td),this.$1t.wo(new cn(t,this.d2t.kR())))}BQt(t){if(!ms(this.o3t,t))return;const e=t.td.T2t(t);this.$1t.wo(new Ho(t,t.F2t)),this.u3t(t,e)}$2t(t){if(!ms(this.o3t,t))return;const e=t.td.T2t(t);this.$1t.wo(new xn(t,this.d2t.kR())),this.u3t(t,e)}b2t(t){if(!ms(this.Uc,t))return;const e=t.td.T2t(t);we(this.Uc,t),t.td.b2t(t),this.$1t.wo(new S1(t.td)),this.u3t(t,e)}t3t(t){const e=new v1(this.tQt,t);return this.l$t.push(e),this.$1t.wo(new RF(e)),e}e3t(t,e){t.tr(e),this.$1t.wo(new wc(t))}i3t(t){if(ms(this.l$t,t)){for(const e of t.qc.slice())this.b2t(e);we(this.l$t,t),this.$1t.wo(new Au(t))}}s3t(){for(const t of this.l$t.slice())this.i3t(t)}n3t(t){this.$1t.wo(new qh(Fc.GENERAL,t.message))}r3t(t,e){const i=new A(null!=e?e:Qa.AD_ERROR,t.message,t);this.d2t.MH(i)}c3t(t){return Fo(this.l$t,(e=>e.YBt===t))}h3t(t){var e;return null!=(e=this.c3t(t.timeOffset))?e:this.t3t(t)}u3t(t,e){we(this.o3t,t);const i=t.td;0!==this.o3t.length||this.c$t!==i||e||(i.p2t(),this.a3t(void 0))}a3t(t){this.c$t!==t&&(void 0!==this.c$t&&this.$1t.wo(new Lh(this.c$t)),this.c$t=t,void 0!==t&&this.$1t.wo(new La(t)))}Q2t(t){const e=Fo(this.Uc,(e=>e.Yst()===t));if(void 0===e)throw new g('Invalid ad for integration "'+this.tQt+'"');return e}K2t(t){const e=Fo(this.l$t,(e=>e.Yst()===t));if(void 0===e)throw new g('Invalid ad break for integration "'+this.tQt+'"');return e}async xa(t,e){var i;if(J(e),null==(i=this.U6)?void 0:i.setSource){let e=await Promise.resolve(this.U6.setSource(t));return wC(e)&&(e=t),NC(e,this.d2t.bd)}return t}async l3t(){var t;(null==(t=this.U6)?void 0:t.resetSource)?await Promise.resolve(this.U6.resetSource()):this.s3t()}async gn(){var t;(null==(t=this.U6)?void 0:t.destroy)&&await Promise.resolve(this.U6.destroy()).catch(It),this.s3t(),this.a3t(void 0),this.U6=void 0,this.$1t.gn()}constructor(t,e){this.$1t=new Ju,this.Uc=[],this.l$t=[],this.o3t=[],this.tQt=t,this.d2t=e}};r();var I1=class{destroy(){this.removeAdListeners()}get player(){return this.ea}set player(t){this.ea&&this.removeAdListeners(),this.ea=t,this.addAdListeners()}get inAdBreak(){return this.d3t}addAdListeners(){var t,e;null==(t=this.ea.qc)||t.yn("ont",this.jd),null==(e=this.ea.qc)||e.yn("rnt",this.Td)}removeAdListeners(){var t,e;null==(t=this.ea.qc)||t.fn("ont",this.jd),null==(e=this.ea.qc)||e.fn("rnt",this.Td)}constructor(t){this.P9=void 0,this.d3t=!1,this.jd=t=>{1!==this.ea.KR&&(this.P9=this.ea.KR,this.ea.KR=1),this.d3t=!0},this.Td=t=>{this.d3t=!1,void 0!==this.P9&&(this.ea.KR=this.P9,this.P9=void 0)},this.ea=t,this.addAdListeners()}},C1=class extends o1{xst(){return this.f3t}get _3t(){return this.v3t}SI(){this.I1t.SI(),this.f3t.SI()}kI(){void 0===this.zG?(void 0!==this.m3t&&this.g3t(this.m3t),super.kI()):this.wo(new Ga(this.zG))}async xa(t,e){J(e);let i=t;if(i)for(const t of this.p3t)i=await t.xa(i,e);if(await super.xa(i,e),J(e),null==i?void 0:i.ads){const t=Boolean(i.blockContentIfAdError);this.f3t.f2t(i.playAdsAfterTime);for(const e of i.ads)this.f3t.u6(e,ja.zst,t)}}async EI(){this.zG=void 0,this.AZ=void 0,await this.f3t.er(),this.w1t(),await super.EI();for(const t of this.p3t)await t.l3t()}g3t(t){this.w3t=this.ea.KR;const e=this.ea.vI,i=this.ea.GR;t.gI(e),t.ZR(i),this.v3t=t,this.m3t=void 0,this.lO(t)}l2t(t){void 0===this.v3t&&(this.m3t=t)}w1t(){this.m3t=void 0,void 0!==this.v3t&&(this.I1t.KR=this.w3t,this.I1t.vI=this.vI,this.I1t.GR=this.GR,this.lO(this.I1t),this.v3t=void 0)}PR(){var t;return null!=(t=this.AZ)?t:super.PR()}NR(){var t;return null!=(t=this.zG)?t:super.NR()}MH(t){void 0===this.NR()&&(this.zG=t,this.AZ=Xs(t),this.wo(new Ga(t)))}MI(t){return void 0===this.v3t&&this.f3t.i2t(t)}Jst(t,e){try{const i=new R1(t,this);i.PN=e(i.ka),this.f3t.tnt(i),this.p3t.push(i),t!==yu.UPLYNK&&(this.y3t=new I1(this))}catch(e){this.f3t.wo(new qh(Fc.GENERAL,'Error while constructing ad integration "'+t+'": '+e+'"'))}}QR(t){var e;(null==(e=this.y3t)?void 0:e.inAdBreak)||super.QR(t)}async gn(){var t;for(const t of this.p3t)await t.gn().catch(It);await this.f3t.gn(),this.w1t(),null==(t=this.y3t)||t.destroy(),this.y3t=void 0,await super.gn()}constructor(t,e){super(t),this.p3t=[],this.zG=void 0,this.AZ=void 0,this.w3t=1,this.I1t=t,this.f3t=new _1(this),this.f3t.o2t.H1t(e,t,this,t.bd)}};fF((t=>new C1(t,Ih.Fg)),io.Mst),r(),r(),r();var P1=0!==Z.rg?Z.rg:Z.im,D1=Z.iu&&P1<12,Pt=class extends ec{get SR(){return this.kR()}set SR(t){this.ER(t)}mst(){return this.ea.mst()}get ct(){return this.Sd()}get MR(){return this.uO}get rI(){return this.oI()}get pI(){return this.JG}get $1t(){return this.b3t}get ht(){return this.aO}get u2t(){return this.d2t._3t===this}pR(){return se.mB().ks()}yR(){}bR(t){}jR(){return 1}QR(t){}$R(){return new se([0,this.SR]).ks()}aI(){return!1}uI(){return this.Ll}dI(){return this.cO}cs(){return this.bI().cs}bI(){return this.sa}Ma(){}async gn(){this.$o(),this.aO.gn(),this.cO.gn(),this.Ll.gn(),this.b3t.gn(),this.ea.fn(Ti.Ty,this.Ds)}A3t(){D1&&this.S3t(),this.u2t||this.d2t.g3t(this)}w1t(){this.u2t&&(D1&&this.T3t(),Z.Ig&&this.we.querySelectorAll("video[src]").forEach((t=>{t.src=""})),Ms.Ys.ap&&this.ea.DI(),this.d2t.w1t())}S3t(){this.k3t||(s.addEventListener("blur",this.E3t),s.addEventListener("focus",this.x3t),this.k3t=!0)}T3t(){s.removeEventListener("blur",this.E3t),s.removeEventListener("focus",this.x3t),this.k3t=!1}R3t(){requestAnimationFrame((()=>this.ea.be()))}constructor(t,e){super(t,!0),this.d2t=e,this.k3t=!1,this.cO=new Nn,this.aO=new Nn,this.Ll=new ua,this.uO=new cS,this.b3t=new Ju,this.sa=new N,this.JG=new gI,this.E3t=()=>{this.ea.ge()},this.x3t=()=>{this.R3t()},this.ea.yn(Ti.Ty,this.Ds)}};r(),r();var N1=0,M1="theoplayer-wrapper",L1=class t{get I3t(){return this.C3t}get P3t(){return this.D3t}get N3t(){return 1===this.D3t.length&&Z$(this.D3t[0].sources.type)}get M3t(){return this.L3t}B3t(t){const e=this.O3t===t.timeOffset;return!this.F3t&&e}get V3t(){return this.W3t}get U3t(){return Y$(this.G3t)&&!this.F3t}get O3t(){return this.G3t}get rd(){return this.H3t}Z3t(){if(S(this.H3t)){let t=this.O3t;if(void 0===t)return void(this.H3t=0);if("string"==typeof t&&Y$(t)){const e=this.ea.Sd();S(e)||e===1/0||(t=XJ(t)*e)}S(t)||(this.H3t=t)}}get X3t(){return this.z3t}set X3t(t){this.z3t=t}get q3t(){return this.Y3t}set q3t(t){this.Y3t=t,this.K3t=!1}get j3t(){return this.Q3t}J3t(t){this.Q3t.push(t)}$3t(){if(!this.F3t){let t,e,i=this.C3t===ja.zst&&void 0===this.t4t&&1===this.D3t.length;const s=this.D3t[0];if(!i&&1===this.D3t.length){const t=Ms.Nh(s.sources.src).searchParams.get("output");t&&t.toLowerCase().indexOf("vmap")>-1&&(i=!0,void 0!==this.t4t&&ct("Do not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included."))}if(Z$(s.sources.type)||i)t=s.sources.src;else{if(S(this.ea.Sd())&&"end"===this.e4t())return;e=this.i4t()}let n=this.ea.Sd();(S(n)||n===1/0)&&(n=-3),this.F3t={s4t:this.ea.we.offsetWidth,n4t:this.ea.we.offsetHeight,r4t:this.ea.we.offsetWidth,o4t:this.ea.we.offsetHeight,h4t:this.ast,a4t:this.uZ,u4t:t,c4t:e,l4t:s.omidAccessModeRules,d4t:n}}return this.F3t}i4t(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.D3t.map(((t,e)=>this.f4t(t.sources,e))).join("\n")+"</vmap:VMAP>"}f4t(t,e){const i=this.e4t(),s=t.src;return'<vmap:AdBreak timeOffset="'+i+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.xC+"-"+e+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+M1+"-"+this.xC+"-"+e+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}e4t(){if(0===this.O3t)return"start";if(this.O3t===1/0)return"end";const t=this.O3t;if("string"==typeof t&&Y$(t)){const e=XJ(t)*this.ea.Sd();return M$.Qjt(e)}return M$.Qjt(this.O3t||0)}_4t(t){this.D3t.push(t)}v4t(t){const e=M1+"-"+this.xC+"-";for(const i of t)if(Sl(i,e)){const t=Number(i.slice(e.length));if(!S(t)&&t>=0&&t<this.D3t.length)return t}return-1}static m4t(t){if(void 0!==t)return-1===t?1/0:t}g4t(){this.W3t=!0}get bO(){return this.ast}set bO(t){this.ast=t}get GR(){return this.uZ}set GR(t){this.uZ=t}constructor(e,i,s,n){this.C3t=i,this.ea=s,this.L3t=n,this.H3t=NaN,this.z3t=!1,this.Y3t=!1,this.W3t=!1,this.Q3t=[],this.ast=!1,this.uZ=!1,this.D3t=[],this.xC=++N1,this.t4t=e.timeOffset,this.G3t=t.m4t(this.t4t),this.Z3t(),this.D3t.push(e)}};r();var B1=class{get p4t(){return this.w4t.p4t}get y4t(){return this.w4t.y4t}get jst(){return this.w4t.jst}get t(){return this.w4t.t}f2t(t){this.b4t=t}A4t(t){return!(this.p4t&&!this.p4t.V3t&&"nonlinear"!==this.y4t.C2t)||this.p4t.rd>t.rd&&this.p4t.rd!==t.rd}S4t(t){if(t.length)return t.sort(((t,e)=>t.rd-e.rd))[0]}T4t(){if(this.jst.length)return this.S4t(this.k4t(this.t.kR()))}E4t(){if(!(void 0!==this.b4t&&this.b4t>=0))return this.jst.filter((t=>!t.X3t&&0===t.rd&&t!==this.p4t))[0]}k4t(t){if(!this.x4t&&(this.x4t=!this.jst.some((t=>S(t.rd))),!this.x4t))return[];const e=this.jst.filter((e=>!e.X3t&&(e.N3t||!S(e.rd)&&t<=e.rd)));return void 0===this.b4t?e:e.filter((t=>t.N3t||void 0===t.O3t||t.rd>this.b4t))}constructor(t){this.x4t=!1,this.w4t=t,this.b4t=void 0}},O1=function(t){return t[t.R4t=0]="R4t",t[t.I4t=1]="I4t",t[t.C4t=2]="C4t",t}({}),F1=class{SI(){this.po=!0,this.P4t&&this.D4t()}N4t(t,e){this.M4t(t,e);const i=Fo(this.jst,(e=>e.B3t(t)));if(i)i._4t(t);else{var s;const i=new L1(t,e,this.ea,null==(s=t.replaceContent)||s);this.S2t.push(i),2===this.L4t&&this.B4t.t3t(i.rd,i,i.O3t),this.O4t(e,i)}}get y4t(){return this.F4t}get jst(){return this.S2t}get t(){return this.ea}get BZt(){return Boolean(this.cpt)}get L4t(){return this.V4t}W4t(){if(we(this.jst,this.p4t),this.p4t){for(const t of this.p4t.j3t)this.B4t.U4t();this.p4t=void 0}}G4t(){for(const t of this.S2t)for(const e of t.j3t)this.B4t.H4t(e,!0);En(this.S2t)}async Z4t(t){this.W4t(),this.X4t=!0,this.p4t=t,this.z4t=t.rd,this.cpt=this.q4t(t),await this.cpt,this.cpt=void 0}async q4t(t){this.Y4t(t);const e=t.$3t();if(!e)return this.X4t=!1,void(this.p4t=void 0);const i=this.F4t.K4t(e);t.X3t=!0;try{await i,t.I3t===ja.Xst&&this.F4t.j4t()}catch(t){0,this.p4t=void 0,await this.D4t()}}Y4t(t){this.po?t.bO=!0:t.bO=this.d2t.bO,t.GR=this.d2t.GR}Q4t(){var t;return null!=(t=this.J4t.E4t())?t:this.J4t.T4t()}async D4t(){if(this.p4t&&!this.p4t.V3t)return this.cpt;const t=this.Q4t();t&&await this.Z4t(t)}get p4t(){return this.$4t}set p4t(t){this.$4t=t}get X4t(){return this.t5t}set X4t(t){this.t5t=t}er(){this.W4t(),En(this.S2t),this.z4t=0,this.p4t=void 0,this.cpt=void 0,this.X4t=!1}q3t(){this.X4t=!1,this.p4t&&(this.p4t.q3t=!0)}async O4t(t,e){t===ja.Xst&&this.po&&this.J4t.A4t(e)&&!this.BZt&&"linear"!==this.F4t.C2t&&(!this.p4t||this.p4t&&this.p4t.X3t)&&(await Promise.resolve(),await this.Z4t(e))}g4t(){this.p4t&&this.p4t.g4t()}get e5t(){if(this.BZt||this.X4t)return!1;if(this.p4t&&!this.p4t.V3t)return!1;return!!this.S2t.filter((t=>this.p4t!==t)).length&&Boolean(this.Q4t())}async i5t(){if(!this.e5t)return void 0;const t=this.Q4t();t&&await this.Z4t(t)}M4t(t,e){const i=t.sources.type,s=e===ja.zst&&void 0===t.timeOffset,n=Z$(i)||s?1:2;n!==this.V4t&&(this.V4t=n,this.G4t(),this.F4t.FJt&&!this.BZt&&"linear"!==this.F4t.C2t&&(this.F4t.FJt.Hw(),this.p4t=void 0,this.cpt=void 0),this.z4t=0,this.P4t=!0)}f2t(t){this.J4t.f2t(t)}gn(){this.ea.fn(Ti.xy,this.XX)}constructor(t,e,i,s,n){this.V4t=0,this.cpt=void 0,this.t5t=!1,this.XX=()=>{const t=this.S2t.filter((t=>t.U3t));for(const e of t){e.Z3t();const t=e.O3t;this.B4t.s5t(t,e.rd)}this.po&&this.e5t&&this.D4t()},this.S2t=[],this.F4t=t,this.po=!1,this.P4t=!1,this.ea=e,this.d2t=i,this.p4t=void 0,this.z4t=0,this.J4t=new B1(this),this.cst=s,this.B4t=n,this.ea.yn(Ti.xy,this.XX)}};r(),r();var ls=function(t){return t.n5t="contentResumeRequested",t.r5t="contentPauseRequested",t.o5t="click",t.xy="durationChange",t.h5t="expandedChanged",t.a5t="start",t.u5t="impression",t.CZ="pause",t.c5t="resume",t.l5t="adProgress",t.d5t="adBuffering",t.f5t="firstQuartile",t.OKt="midpoint",t._5t="thirdQuartile",t.FKt="complete",t.v5t="userClose",t.m5t="linearChanged",t.g5t="loaded",t.p5t="adCanPlay",t.w5t="adMetadata",t.y5t="adBreakReady",t.b5t="interaction",t.A5t="allAdsCompleted",t.S5t="skip",t.T5t="skippableStateChanged",t.k5t="log",t.E5t="viewableImpression",t.x5t="volumeChange",t.R5t="mute",t}({});r();var V1=function(t){return t.I5t="adError",t}({});r();var W1=function(t){return t[t.C5t=-1]="C5t",t[t.P5t=-1]="P5t",t[t.D5t=-1]="D5t",t[t.N5t=101]="N5t",t[t.M5t=102]="M5t",t[t.L5t=200]="L5t",t[t.B5t=201]="B5t",t[t.O5t=202]="O5t",t[t.F5t=300]="F5t",t[t.V5t=301]="V5t",t[t.W5t=302]="W5t",t[t.U5t=303]="U5t",t[t.G5t=400]="G5t",t[t.H5t=402]="H5t",t[t.Z5t=403]="Z5t",t[t.X5t=405]="X5t",t[t.z5t=500]="z5t",t[t.q5t=501]="q5t",t[t.Y5t=-1]="Y5t",t[t.K5t=503]="K5t",t[t.j5t=602]="j5t",t[t.Q5t=900]="Q5t",t[t.J5t=901]="J5t",t[t.$5t=1005]="$5t",t[t.t6t=1007]="t6t",t[t.e6t=1009]="e6t",t[t.i6t=1010]="i6t",t[t.s6t=1011]="s6t",t[t.n6t=1012]="n6t",t[t.r6t=1013]="r6t",t[t.o6t=1020]="o6t",t[t.h6t=1021]="h6t",t[t.a6t=1101]="a6t",t[t.u6t=1204]="u6t",t[t.c6t=1205]="c6t",t[t.l6t=1300]="l6t",t[t.d6t=-1]="d6t",t[t.f6t=-1]="f6t",t[t._6t=-1]="_6t",t[t.v6t=-1]="v6t",t}({}),U1=function(t){return t.m6t="adLoadError",t.g6t="adPlayError",t}({});function G1(t,e){if(t===ls.l5t){const t=e;return{p6t:t.adBreakDuration,w6t:t.adPosition,SR:t.currentTime,ct:t.duration,y6t:t.totalAds}}return e}function H1(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return U1.m6t;case google.ima.AdError.Type.AD_PLAY:return U1.g6t}}function Z1(t){return V(t)&&Td(t.getVastErrorCode)}function X1(t){const e=t.getInnerError(),i=e&&Z1(e)?X1(e):void 0;return{gb:t.getMessage(),vjt:t.getErrorCode(),b6t:t.getVastErrorCode(),Aw:H1(t.getType()),A6t:i}}function z1(t){if(ji(t))return t}r(),r();var q1=class extends Co{S6t(t){this.F4t.wo(t)}T6t(t){this.VJt=t,this.VJt.yn(V1.I5t,this.k6t),this.VJt.yn(ls.r5t,this.E6t),this.VJt.yn(ls.n5t,this.x6t),this.VJt.yn(ls.A5t,this.R6t),this.VJt.yn(ls.a5t,this.I6t),this.VJt.yn(ls.FKt,this.C6t),this.VJt.yn(ls.S5t,this.P6t),this.VJt.yn(ls.v5t,this.D6t),this.VJt.yn(ls.o5t,this.N6t),this.VJt.yn(ls.p5t,this.M6t),this.VJt.yn(ls.CZ,(()=>{this.F4t.qR||(this.F4t.L6t(!0),this.F4t.wo(new fl(this.F4t.SR))),this.B6t(!0)})),this.VJt.yn(ls.c5t,(()=>{this.F4t.qR&&(this.F4t.L6t(!1),this.F4t.wo(new H(this.F4t.SR)))})),this.VJt.yn(ls.R5t,(()=>{const e=t.mI();e>=0&&this.O6t(e)})),this.VJt.yn(ls.x5t,(()=>{const e=t.mI();e>=0&&this.O6t(e)})),this.VJt.yn(ls.w5t,(t=>{this.V6t.F6t(t.type)})),this.VJt.yn(ls.xy,(t=>{t.snt&&this.W6t(t.snt.ct)})),this.VJt.yn(ls.k5t,(async t=>{const e=t.U6t.adError,i=Z1(e)?X1(e):void 0;i&&(this.G6t(i)?await this.H6t(t):this.Z6t(i)?await this.X6t(i):this.z6t(i)&&this.q6t(i))})),this.VJt.yn(ls.g5t,(t=>{if(t.snt&&(this.F4t.q3t(),this.V6t.Y6t(t.snt),this.K6t=0,t.snt.j6t)){var e;const t=this.F4t.sI,i=Ht.$B;this.F4t.C4(i);const s=this.F4t.SR,n=this.F4t.sI;n!==t&&this.S6t(new Ys(s,n)),null==(e=this.VJt)||e.gI(this.F4t.Q6t()),this.S6t(new KT(s,i))}})),this.VJt.yn([ls.d5t,ls.u5t,ls.f5t,ls.OKt,ls._5t],(t=>{t.snt&&this.V6t.J6t(t.snt,t.type,this.F4t.SR)})),this.VJt.yn(ls.f5t,this.$6t),this.VJt.yn(ls.l5t,this.t9t)}async switchToPlayerIfNoNextAd(){if(this.VJt){const t=this.VJt.e9t();t&&this.i9t(t)||(this.F4t.e5t()?await this.F4t.i5t():(this.F4t.s9t(),this.ea.qR&&!this.ea.RR&&this.ea.kI()))}else if(this.F4t.e5t())await this.F4t.i5t();else{const t=this.F4t.qR;this.F4t.s9t(),t||this.ea.kI()}}i9t(t){const e=t.n9t,i=null==e?void 0:e.y6t;return(null==e?void 0:e.w6t)!==i}Up(){this.F4t.Ec&&(m(this.F4t.Ec),this.F4t.Ec=null)}z6t(t){return t.Aw===U1.m6t}Z6t(t){return t.Aw===U1.g6t}G6t(t){return t.vjt===W1.e6t}async X6t(t){var e;this.q6t(t);const i=[W1.G5t,W1.J5t,W1.h6t,W1.c6t];var s;this.F4t.fnt||ms(i,t.vjt)||ms(i,null==(e=t.A6t)?void 0:e.vjt)||(this.F4t.r9t.X4t=!1,null==(s=this.F4t.r9t.p4t)||s.g4t(),await this.switchToPlayerIfNoNextAd())}q6t(t){this.F4t.n3t(t)}async o9t(){this.V6t.U4t(),this.F4t.g4t(),"nonlinear"===this.F4t.C2t&&(this.V6t.h9t(-1,!1),this.F4t.a9t(void 0)),"nonlinear"!==this.F4t.C2t&&"none"!==this.F4t.C2t||this.F4t.e5t()&&await this.F4t.i5t(),this.F4t.u9t(),this.F4t.u2t?this.F4t.w1t():this.c9t()&&this.ea.wo(new Te(this.ea.kR()))}c9t(){return this.F4t.l9t&&!this.F4t.d9t&&this.ea.RR}setCountdownTimer(){this.Up(),this.F4t.Ec=p((()=>this.B6t()),250)}async H6t(t){void 0!==t.snt&&(this.F4t.r9t.X4t=!1,this.F4t.g4t(),this.F4t.e5t()?await this.F4t.i5t():this.F4t.L6t(!0))}W6t(t){this.F4t.ct!==t&&t>=0&&(this.F4t.n4(t),this.S6t(new Ls(this.F4t.ct)))}O6t(t){this.F4t.Q6t()!==t&&(0===t?this.F4t.f9t(t,!0,!1):this.F4t.f9t(t,!1,!1))}async _9t(){this.F4t.v9t&&void 0!==this.ea.PR()&&(this.m9t=new da,await So(this.ea.xa(this.ea.tu(),this.m9t.Vw),this.m9t),this.g9t&&this.ea.ER(this.g9t),this.g9t=void 0)}B6t(t){if(this.VJt){const t=this.VJt.p9t();t>this.F4t.ct&&this.W6t(_.round(t))}const e=this.F4t.SR;(t||!this.F4t.qR&&e!==this.F4t.w9t)&&(this.F4t.wo(new ri(e,void 0)),this.F4t.w9t=e)}er(){this.m9t&&(this.m9t.Yw(),this.m9t=void 0),this.y9t=!1,this.K6t=0}gn(){this.er(),this.$o()}constructor(t,e,i){super(),this.F4t=t,this.ea=e,this.V6t=i,this.y9t=!1,this.m9t=void 0,this.g9t=void 0,this.K6t=0,this.$6t=t=>{if(!t.snt||!t.snt.n9t)return;const e=t.snt.n9t;this.V6t.e3t(e.YBt,e.y6t,e.BJt)},this.t9t=t=>{var e,i,s;if(this.K6t>=5)return;this.K6t++;const n=t.U6t;if(!function(t){return V(t)&&void 0!==t.p6t&&void 0!==t.y6t}(n))return;const r=null==(s=this.VJt)||null==(i=s.e9t())||null==(e=i.n9t)?void 0:e.YBt;void 0!==r&&this.V6t.e3t(r,n.y6t,n.p6t)},this.k6t=async t=>{t.U6t.b9t&&await this.X6t(t.U6t.b9t)},this.R6t=async()=>{this.y9t=!0,this.F4t.g4t(),await this.x6t()},this.I6t=t=>{if(!t.snt)return;const e=t.snt;this.F4t.a9t(e),this.F4t.ge(),this.F4t.A9t(),this.F4t.S9t=!0,this.V6t.T9t(e);const i=e.ct;if(this.W6t(i),e.j6t){const t=this.F4t.SR,e=this.F4t.sI;this.F4t.C4(Ht.eO),this.S6t(new jT(t,e)),this.S6t(new ho(t,e)),this.S6t(new QT(t,e)),this.F4t.qR||this.S6t(new Wi(this.F4t.SR)),this.setCountdownTimer(),this.B6t(!0)}else this.F4t.w1t(),this.ea.ge(),this.F4t.qR||this.ea.kI()},this.C6t=t=>{var e;if(!t.snt)return;const i=t.snt;if(this.Up(),this.V6t.h9t(this.F4t.ct,i.j6t),this.F4t.sI!==Ht.$B){const t=Ht.$B;this.F4t.C4(t);const e=this.F4t.SR;this.S6t(new Ys(e,t))}this.W6t(NaN),this.F4t.S9t=!1,null==(e=this.VJt)||e.gI(this.F4t.Q6t())},this.P6t=t=>{t.snt&&(this.C6t(t),this.V6t.P6t(t.snt,this.F4t.SR,this.F4t.ct))},this.D6t=t=>{t.snt&&(this.V6t.h9t(-1,t.snt.j6t),this.F4t.g4t(),!t.snt.j6t&&this.F4t.e5t()&&this.F4t.i5t())},this.N6t=t=>{t.snt&&(t.snt.j6t?this.F4t.TI():this.ea.TI())},this.M6t=()=>{var t;(this.F4t.S9t=!0,this.F4t.k9t)&&(null==(t=this.VJt)||t.TI(),this.F4t.k9t=!1)},this.E6t=t=>{var e;if(!t.snt)return;this.F4t.v9t&&(this.g9t=this.ea.kR(),this.ea.CI(),this.ea.yI=!0),this.F4t.E9t=!0;const i=t.snt;this.V6t.jd(i);const s=i.ct;this.F4t.a9t(i),this.W6t(s),this.F4t.L6t(!1),this.F4t.ge(),this.F4t.A3t(),this.F4t.v9t||this.ea.be(),this.ea.TI(),this.F4t.x9t(i);0===(null==(e=i.n9t)?void 0:e.YBt)||this.F4t.wo(new tu(this.F4t.SR))},this.x6t=async t=>{const e=null==t?void 0:t.snt;this.F4t.E9t=!1,"linear"===this.F4t.C2t&&this.V6t.Td(),e&&e.ct>=0&&this.W6t(e.ct),this.ea.Sd()===1/0&&this.F4t.R9t(),this.F4t.S9t=!1,this.y9t&&await this.o9t(),this.F4t.L6t(!0);try{await this._9t()}catch(t){return void(Je(t)||this.wo(new XQ(t)))}if(this.F4t.w1t(),this.F4t.be(),this.ea.RR||this.ea.kI(),e&&this.F4t.a9t(e),this.F4t.l9t){if(this.F4t.v9t){var i;const t=this.ea.AI(),e=null==(i=this.ea.bt)?void 0:i.src;t&&e&&(t.src=e)}this.F4t.d9t=!0}this.ea.yI=!1,this.F4t.e5t()&&await this.F4t.i5t()}}};r(),r();var Y1=class extends Zi{get tQt(){return I.r$t}constructor(t,e,i){super(t),this.I9t=e,this.C9t=i}};r(),r(),r();var K1=class extends cs{set P9t(t){this.D9t=t}get P9t(){return this.D9t}get tQt(){return I.Yh}$Jt(){var t;return null==(t=this.N9t)?void 0:t.Uqt}get M9t(){var t;return null==(t=this.N9t)?void 0:t.PYt}get dYt(){var t;return null==(t=this.N9t)?void 0:t.dYt}get ON(){var t;return null==(t=this.N9t)?void 0:t.ON}get nH(){var t;return null==(t=this.N9t)?void 0:t.nH}get L9t(){var t,e;return null!=(e=null==(t=this.N9t)?void 0:t.L9t)?e:[]}get B9t(){var t,e;return null!=(e=null==(t=this.N9t)?void 0:t.B9t)?e:[]}get O9t(){var t,e;return null!=(e=null==(t=this.N9t)?void 0:t.O9t)?e:[]}ba(){return function(t,e){return nh(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get description(){return e.ON},get apiFramework(){return e.M9t},get creativeId(){return e.dYt},get title(){return e.nH},get wrapperAdIds(){return e.L9t},get wrapperAdSystems(){return e.B9t},get wrapperCreativeIds(){return e.O9t}})}(zo(this),this)}F9t(t){this.N9t=t;const e=j1(t);this.x2t(t.oKt,t.V9t,t.W9t,t.ct,e,-1)}constructor(t,e){super(t,e),this.D9t=0,this.N9t=void 0}};function j1(t){return t.jqt.map((t=>new g1(t)))}var Q1=class extends cs{ba(){return function(t,e){return nh(t,{get adSystem(){return e.$Jt()},get apiFramework(){return e.M9t},get bitrate(){return e.U9t},get contentType(){return e.Dk},get creativeId(){return e.dYt},get description(){return e.ON},get mediaUrl(){return e.bKt},get title(){return e.nH},get traffickingParameters(){return e.G9t},get traffickingParametersString(){return e.H9t},get wrapperAdIds(){return e.L9t},get wrapperAdSystems(){return e.B9t},get wrapperCreativeIds(){return e.O9t},get universalAdIds(){return e.Jqt}})}(zo(this),this)}F9t(t){this.N9t=t,this.x2t(t.oKt,t.V9t,t.W9t,t.ct,j1(t),t.Z9t),this.P2t=t.j6t?Ns.Ejt:Ns.E2t}get tQt(){return I.r$t}$Jt(){return this.N9t?Bc(this.N9t.Uqt):void 0}get M9t(){return this.N9t?Bc(this.N9t.PYt):void 0}get U9t(){return this.N9t?this.N9t.X9t:0}get Dk(){return this.N9t?Bc(this.N9t.Dk):void 0}get dYt(){return this.N9t?Bc(this.N9t.dYt):void 0}get z9t(){return this.N9t?Bc(this.N9t.z9t):void 0}get ON(){var t;return null==(t=this.N9t)?void 0:t.ON}get bKt(){var t;const e=null==(t=this.N9t)?void 0:t.bKt;return ji(e)?e:this.AKt}set bKt(t){this.AKt=t}get nH(){var t;return null==(t=this.N9t)?void 0:t.nH}get G9t(){return this.N9t?Bc(this.N9t.G9t):void 0}get H9t(){return this.N9t?Bc(this.N9t.H9t):void 0}get L9t(){var t,e;return null!=(e=null==(t=this.N9t)?void 0:t.L9t)?e:[]}get B9t(){var t,e;return null!=(e=null==(t=this.N9t)?void 0:t.B9t)?e:[]}get O9t(){var t,e;return null!=(e=null==(t=this.N9t)?void 0:t.O9t)?e:[]}get Jqt(){var t,e;return null!=(e=null==(t=this.N9t)?void 0:t.Jqt.map((t=>({adIdRegistry:t.q9t,adIdValue:t.Y9t}))))?e:[]}constructor(t){super(t,Ns.tE),this.N9t=void 0,this.AKt=void 0}};function Bc(t){return null===t?void 0:t}r(),r();var J1=class{get $1t(){return this.V6t.$1t}get K1t(){return this.K9t}get u2t(){return this.V6t.u2t}get Kst(){var t;return null!=(t=this.V6t.Kst)?t:null}get qst(){const t=this.V6t.j9t;return t?[t]:[]}get jst(){return this.V6t.jst}get Qst(){return this.V6t.Qst}$st(t){this.V6t.$st(t)}DD(){this.V6t.DD()}gn(){return Promise.resolve()}constructor(t,e){this.V6t=t,this.K9t=e}},$1=class{get Q9t(){return this.J9t}get $1t(){return this.b3t}get u2t(){return this.$9t}get j9t(){return this.t$t}get Kst(){return this.c$t}get jst(){return Qe(this.l$t,(t=>{if(t.JR)return[];const e=t.qc;if(t===this.c$t&&void 0!==this.t$t){const t=e.indexOf(this.t$t);if(t>=0)return e.slice(t+1)}return e}))}get Qst(){return this.l$t.filter((t=>!t.JR))}constructor(t,e){this.b3t=t,this.l$t=[],this.$9t=!1,this.J9t=new J1(this,e)}};r();var t2=class extends Ra{ba(){return new e2(this.snt.Yst())}constructor(t){super("t8t",t)}},e2=class extends CF{constructor(t){super("adimpression",t)}};r();var i2=class extends Ds{ba(){return new s2(this.snt.Yst())}constructor(t){super("e8t"),this.snt=t}},s2=class extends pe{constructor(t){super("adbuffering"),this.ad=t}};r();var n2=class extends Ds{ba(){return new r2}constructor(){super("i8t")}},r2=class extends pe{constructor(){super("admetadata")}},o2=class t extends $1{s8t(t,e){for(let i=0;i<t;i++){const t=new Q1(e);e.y2t(t),this.$1t.wo(new Uu(t))}}t3t(t,e,i){let s=t;s===1/0&&(s=-1);const n=new Y1(s,i,e);this.l$t.push(n),e.J3t(n),this.$1t.wo(new RF(n))}s5t(t,e){for(const i of this.l$t)S(i.YBt)&&i.I9t===t&&(i.YBt=e,this.$1t.wo(new wc(i)))}H4t(t,e){void 0===e&&(e=!1),e&&we(this.l$t,t),this.$1t.wo(new Au(t))}U4t(){if(this.Kst){this.H4t(this.Kst,!0);const t=Boolean(this.t$t&&this.t$t.C2t===Ns.Ejt);this.n8t(void 0,t)}}j2t(t,e){const i=e.n9t;if(!i)return;const s=i.w6t-1,n=t.qc[s];return n.F9t(e),this.$1t.wo(new bn(n)),n.td.BJt=i.BJt,n}get u2t(){return this.r8t.u2t}o8t(t){if(!ms(this.h8t,t)){if(t){if(this.t$t===t)return;this.t$t=t;for(const e of this.a8t)this.F6t(e,t,this.r8t.SR)}else{if(!this.t$t)return;const t=new xn(this.t$t,this.t$t.td.YBt);this.h8t.push(this.t$t),this.t$t=void 0,this.b3t.wo(t)}En(this.a8t)}}n8t(t,e){if(t){var i;if((null==(i=this.Kst)?void 0:i.YBt)===t.YBt)return;this.c$t=t,e&&this.$1t.wo(new La(this.c$t))}else{if(!this.c$t)return;const t=new Lh(this.c$t);this.c$t=void 0,En(this.h8t),e&&this.b3t.wo(t)}}u8t(t){return this.l$t.filter((e=>xs(e.YBt,t,.01)))[0]}static c8t(t,e){if(e.n9t)return t.qc[e.n9t.w6t-1]}jd(t){if(!t.n9t)return;const e=t.n9t,i=this.u8t(e.YBt);i&&(En(this.a8t),this.n8t(i,t.j6t))}Td(){this.Kst&&this.$1t.wo(new Lh(this.Kst)),En(this.a8t),this.U4t()}T9t(e){if(!this.c$t&&e.n9t){const t=this.u8t(e.n9t.YBt);this.n8t(t,e.j6t)}if(this.c$t){const i=t.c8t(this.c$t,e);if(!i)return;this.j2t(this.c$t,e);const s=e.bKt;ji(s)&&!ji(i.bKt)&&(i.bKt=s,this.$1t.wo(new bn(i))),this.o8t(i),this.$1t.wo(new cn(this.t$t,i.td.YBt))}else 0}h9t(t,e){if(this.o8t(void 0),!e&&this.Kst){const t=this.Kst;this.n8t(void 0,!1),this.H4t(t)}}Y6t(t){const e=t.n9t;if(!e)return;const i=this.u8t(e.YBt);if(!i)return;this.e3t(e.YBt,e.y6t,e.BJt);const s=this.j2t(i,t);s&&this.$1t.wo(new N0(s))}e3t(t,e,i){const s=this.u8t(t);if(!s)return;const n=s.qc.length;if(e>n){const t=e-n;this.s8t(t,s),s.BJt=i,this.$1t.wo(new wc(s))}}P6t(e,i,s){if(!this.c$t)return;const n=t.c8t(this.c$t,e);if(n){const t=i/s;this.$1t.wo(new Ho(n,t))}}J6t(e,i,s){if(!this.c$t)return;let n=this.t$t;if(!n){const s=t.c8t(this.c$t,e);if(!s||ms(this.h8t,s))return void this.a8t.push(i);n=s,this.j2t(this.c$t,e),this.o8t(n)}this.F6t(i,n,s)}F6t(t,e,i){t===ls.w5t?this.$1t.wo(new n2):t===ls.u5t&&e?this.$1t.wo(new t2(e)):t===ls.d5t&&e?this.$1t.wo(new i2(e)):t===ls.f5t&&e&&i?this.$1t.wo(new Is(e,i)):t===ls.OKt&&e&&i?this.$1t.wo(new ks(e,i)):t===ls._5t&&e&&i&&this.$1t.wo(new Cs(e,i))}DD(){this.r8t.DD()}$st(t){this.r8t.$st(t)}er(){const t=Boolean(this.t$t&&this.t$t.C2t===Ns.Ejt);this.o8t(void 0),this.n8t(void 0,t);for(const t of this.l$t)this.H4t(t);En(this.l$t),En(this.a8t),En(this.h8t)}gn(){this.er()}constructor(t,e){super(t,I.r$t),this.r8t=e,this.a8t=[],this.h8t=[]}};function h2(t){const e=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const e=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case jn.ENABLED:return e.ENABLED;case jn.INSECURE:return e.INSECURE;case jn.DISABLED:default:return e.DISABLED}}(t.ads.vpaidMode)),e.setPlayerVersion("9.2.0"),e.setPlayerType("THEOplayer"),e.setAutoPlayAdBreaks(!0),e.setDisableCustomPlaybackForIOS10Plus(!a2(t));const i=function(t){var e,i,s;const n=null==(i=t.ads)||null==(e=i.googleIma)?void 0:e.language;if(void 0!==n)return n;const r=null==(s=t.ui)?void 0:s.language;if(Yt(r))return r;return}(t);i&&e.setLocale(i)}function a2(t){return Z.iu&&t.allowNativeFullscreen}r();var u2=class t extends Pt{get Q1t(){return this.B4t.Q9t}get l8t(){return this.B4t}get r9t(){return this.w4t}get v9t(){return a2(this.kQ)}d8t(t,e,i){e===ja.zst&&void 0!==i&&(this.c2t=i),this.w4t.N4t(t,e)}static get K1t(){return I.r$t}get K1t(){return t.K1t}get f8t(){return this.kQ.ads.preload===NT.MIDROLL_AND_POSTROLL}$st(t){const e=this._8t();for(const i of e)bt(i.sources,i.timeOffset)||t.u6(i,ja.Xst,!1)}_8t(){const t=[],{qst:e,jst:i}=this.Q1t,s=[];for(const n of e.concat(i)){const e=n.td.C9t;if(ms(s,e.xC))continue;const i=e.v4t(n.L9t);i>=0?t.push(...e.P3t.slice(i)):t.push(...e.P3t),s.push(e.xC)}for(const e of this.w4t.jst)e.X3t||t.push(...e.P3t);return Qm(t)}set C2t(t){this.P2t=t}get C2t(){return this.P2t}get FJt(){return this.VJt}set FJt(t){this.VJt=t,this.v8t=!1}kR(){if(!this.FJt)return 0;const t=this.FJt.p9t();return S(this.ct)||t<0?0:this.ct-t}ER(t,e){}Sd(){return this.DA||NaN}n4(t){this.DA=t}HR(){return this.ea.GR}ZR(t){this.f9t(this.vI,t,!0)}YR(){return this.cZ}L6t(t){this.cZ=t}get S9t(){return this.m8t}set S9t(t){this.m8t=t}get fnt(){return this.c2t}get l9t(){return this.g8t}get k9t(){return this.p8t}set k9t(t){this.p8t=t}get d9t(){return this.w8t}set d9t(t){this.w8t=t}lI(){var t,e,i;return null!=(i=null==(e=this.FJt)||null==(t=e.e9t())?void 0:t.W9t)?i:0}_I(){var t,e,i;return null!=(i=null==(e=this.FJt)||null==(t=e.e9t())?void 0:t.V9t)?i:0}mR(){return[]}f2t(t){this.b4t=t,this.w4t.f2t(t)}j4t(){!this.v8t&&this.FJt&&(this.FJt.Cn(),this.v8t=!0)}a9t(t){this.C2t=t?t.j6t?"linear":"nonlinear":"none"}oI(){return se.mB().ks()}mI(){return this.ea.vI}gI(t){this.f9t(t,this.GR,!0)}Q6t(){return this.ea.GR?0:this.ea.vI}f9t(t,e,i){const s=this.ea.vI!==t||this.ea.GR!==e;s&&(this.ea.vI=t,this.ea.GR=e),this.FJt&&i&&this.FJt.gI(this.Q6t()),s&&this.wo(new rs(this.SR,this.vI))}IR(){return!1}PR(){if(this.y8t&&this.c2t)return this.y8t}NR(){if(this.b8t&&this.c2t)return this.b8t}nI(){return this.I4}C4(t){this.I4=t,this.wo(new au(this.SR,t))}get E9t(){return this.A8t}set E9t(t){this.A8t=t}SI(){this.ea.fn(Ti.ro,this.S8t),this.po||(this.po=!0,this.w4t.SI(),this.A9t())}async kI(){if(this.T8t)return;this.k8t.Yw(),this.k8t=new da;const t=this.qR;this.L6t(!1),this.wo(new H(this.SR)),this.E8t()||(this.v9t||this.ea.be(),this.wo(new tu(this.SR))),this.S9t||(this.k9t=!1);const e=Boolean(this.FJt);this.T8t=this.w4t.D4t();try{await this.T8t}finally{this.T8t=void 0}try{J(this.k8t.Vw)}catch(t){return}if(this.po||this.S8t(),!this.y8t||!this.c2t)if(this.FJt){if(t)if(e)try{J(this.k8t.Vw),this.FJt.x8t(),this.wo(new Wi(this.SR))}catch(t){return}else this.j4t()}else this.c2t||(this.w1t(),this.d2t.kI())}TI(){var t;this.qR||(this.L6t(!0),this.wo(new fl(this.SR))),this.k8t.Yw(),this.S9t?null==(t=this.FJt)||t.TI():this.k9t=!0}DD(){var t;null==(t=this.FJt)||t.DD()}u9t(){this.FJt&&(this.I8t.R8t(),this.FJt.EI(),this.FJt.Hw(),this.FJt=void 0,this.C2t="none",this.v8t=!1)}async EI(){var t;this.w9t=0,this.w4t.er(),this.k8t.Yw(),this.L6t(!0),this.g8t=!1,this.w8t=!1,this.S9t=!1,this.B4t.er(),this.u9t(),this.s9t(),null==(t=this.C8t)||t.er(),this.k9t=!1,this.I8t.Hw()}ge(){this.P8t.ge(),this.v9t&&this.ea.ge()}be(){this.P8t.be()}D8t(){return Boolean(this.FJt)&&ms(this.FJt.N8t(),-1)&&!this.g8t}q3t(){this.w4t.q3t()}e5t(){return this.w4t.e5t}g4t(){this.w4t.g4t()}i5t(){return this.w4t.i5t()}i2t(t){if(this.D8t()){if(t.type===Ti.Zy&&this.ea.RR)return!0;if(t.type===Ti.Cy)return this.g8t=!0,this.I8t.R8t(),!0}return!1}E8t(){return Boolean(this.FJt&&this.FJt.e9t())}async K4t(t){try{this.u9t();const e=this.M8t();this.P8t.Tj(),this.FJt=await this.I8t.K4t(t,this.C8t,e),this.L8t(this.FJt)}catch(t){this.B8t.X6t(t)}}L8t(t){if(t.gI(this.Q6t()),this.w4t.L4t===O1.I4t){const e=t.N8t();if(e.length)for(const t of e)this.B4t.t3t(t,this.w4t.p4t);else this.B4t.t3t(this.w4t.p4t.rd,this.w4t.p4t)}this.B8t.er(),this.B8t.T6t(t)}AI(){if(this.VJt&&this.v9t&&this.E8t())return this.ea.AI()}bI(){return this.v9t&&this.u2t?this.ea.Ca:super.bI()}M8t(){const t=!!(this.w4t.L4t===O1.I4t)&&this.f8t;let e,i;void 0!==this.kQ.ads.googleIma.uiElements?e=this.kQ.ads.googleIma.uiElements:this.kQ.ads.showCountdown||(e=[]),void 0!==this.kQ.ads.allowedMimeTypes&&(i=this.kQ.ads.allowedMimeTypes);return{O8t:i,F8t:e,V8t:t,U9t:this.kQ.ads.googleIma.bitrate,W8t:void 0,U8t:this.b4t}}A9t(){if(this.VJt){const t=this.M8t();this.VJt.G8t(t)}}n3t(t){this.y8t=new dk(lk.ADVERTISEMENT_ERROR,t.gb),this.b8t=new A(Qa.AD_ERROR,"There was a problem playing ads.",this.y8t),this.$1t.wo(qh.s2t(t))}s9t(){this.u2t&&(this.ea.ge(),this.w1t(),this.be())}R9t(){var t;if(this.ea.kR()===1/0||0===this.ea.oI().length)return;(null==(t=this.w4t.p4t)?void 0:t.M3t)&&-1!==this.H8t&&(this.ea.ER(this.ea.kR()+this.H8t),this.H8t=-1)}x9t(t){var e,i;this.H8t=null!=(i=null==(e=t.n9t)?void 0:e.BJt)?i:-1}w1t(){super.w1t(),this.ea.ge(),this.v9t&&!this.ea.RR&&this.ea.kI()}R3t(){this.v9t||super.R3t()}async gn(){this.B8t.fn(yo.da,this.Z8t),await super.gn(),this.u9t(),this.I8t.fn("X8t",this.z8t),this.I8t.Hw(),this.P8t.Hw(),this.w4t.gn(),this.B8t.gn()}constructor(t,e,i,s,n,r,o){super(t,e),this.po=!1,this.c2t=!1,this.y8t=void 0,this.b8t=void 0,this.H8t=-1,this.P2t="none",this.A8t=!1,this.v8t=!1,this.k8t=new da,this.m8t=!1,this.p8t=!1,this.z8t=t=>{this.$1t.wo(t)},this.Z8t=t=>{this.y8t=new dk(lk.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.b8t=vk(this.y8t)},this.w9t=NaN,this.S8t=()=>{this.po||this.SI()},this.kQ=i,this.cZ=!0,this.DA=NaN,this.I4=Ht.$B,this.g8t=!1,this.w8t=!1,this.B4t=new o2(this.$1t,this),this.B8t=new q1(this,this.ea,this.B4t),this.B8t.yn(yo.da,this.Z8t),this.ea.yn(Ti.ro,this.S8t),this.w4t=new F1(this,this.ea,this.d2t,s,this.B4t),this.C8t=o,this.I8t=r,this.P8t=n,this.be(),this.I8t.yn("X8t",this.z8t)}};r();var c2=class{registerWebImaAdPlayerConstructor(t){this.q8t=t}createAdPlayer(t,e,i){return l2()&&this.q8t?this.q8t(t,e,i):void 0}};function l2(){if(Boolean(s.google&&s.google.ima)){return!(1===w.keys(s.google.ima).length&&s.google.ima.dai)}return!1}c2.Fg=new c2;var d2=class{get X1t(){return u2.K1t}RZ(t){return t&&t.integration===yu.GOOGLE_IMA}z1t(t,e,i){return c2.Fg.createAdPlayer(t,e,i)}u6(t,e,i,s){i.d8t(t,e,s)}Xz(t){const e=X$(t.sources);if(!e)return;const i={integration:yu.GOOGLE_IMA,sources:e,omidAccessModeRules:z1(t.omidAccessModeRules)},s=q$(t.timeOffset);return void 0!==s&&(i.timeOffset=s),i}};Ih.Fg.IZ(new d2),r(),r(),r(),r();var f2=class extends Ds{ba(){return new _2}constructor(){super("u$t")}},_2=class extends pe{constructor(){super("adloaded")}},v2=-1,m2=class{get WJt(){return this.l$t}get Y8t(){return this.K8t}get Hut(){return this.Ep}get j8t(){return this.G3t}get Q8t(){return this.J8t}get rd(){if(S(this.$8t)){const t=M$.$jt(this.G3t,this.ZJt.t.Sd());void 0===t||S(t)||(this.$8t=t)}return this.$8t}t7t(){return this.Ep<this.l$t.length}Ic(){let t;return this.Ep<this.l$t.length&&(t=this.l$t[this.Ep],this.Ep++),t}e7t(t){t.Ijt=this,this.l$t.push(t)}async i7t(t){let e=!1;for(const i of this.l$t)try{await i.Dn(),e=!0}catch(e){0,we(this.l$t,i);const s=i.lnt.sources,n="string"==typeof s?s:s.src;t.wo(qh.n2t(e,n))}return this.J8t=!0,e}YJt(){this.qJt=!0}zJt(){return this.qJt}s7t(){return this.l$t.some((t=>A0(t).some((t=>t.Yqt))))}constructor(t,e){this.l$t=[],this.qJt=!1,this.G3t=t,this.Ep=0,this.ZJt=e,this.$8t=NaN,this.J8t=!1,this.K8t=new E0(this,this.ZJt)}},g2=class t extends sn{get n7t(){let t=0;for(const e of this.r7t)e.zJt()||(t+=1);return t}o7t(){this.a7t.h7t()}Cn(){this.To(),this.u7t.yn("ant",this.a7t.c7t)}jn(){this.Bo(),this.u7t.fn("ant",this.a7t.c7t),this.Y3=this.YO,this.a7t.er();for(const t of this.r7t)t.YJt();En(this.r7t)}To(){this.l7t||(this.ea.yn(Ti.sb,this.d7t),this.l7t=!0)}Bo(){this.l7t&&(this.ea.fn(Ti.sb,this.d7t),this.l7t=!1)}get jst(){return this.r7t}f7t(){return this._7t(new ri(v2,void 0))}v7t(t){return this.m7t(t,0,0).length>0}g7t(t,e){let i,s=0;for(const n of this.r7t){if(n.zJt())continue;const r=n.rd;r>=t&&r<=e&&r>=s&&!S(r)&&(i=n,s=i.rd)}return i}p7t(t){return this._7t(new ri(t,void 0))}w7t(){if(!this.y7t&&void 0!==this.b4t){this.y7t=!this.r7t.some((t=>S(t.rd)));for(const t of this.r7t)t.rd!==v2&&t.rd<=this.b4t&&!t.zJt()&&t.YJt()}}b7t(t){for(const e of t)e.YJt();this.v3t.A7t(t),0===this.n7t&&this.Bo()}m7t(t,e,i){return this.r7t.filter((s=>{if(s.zJt())return!1;const n=s.rd;return this.S7t(n,t)||this.T7t(n,t,e,i)}))}S7t(t,e){switch(e){case 0:return 0===t;case v2:return t===v2;default:return!1}}T7t(t,e,i,s){if(t<0)return!1;const n=t-e;return-1!==n&&n<=i&&n>=-s}k7t(e){if(e&&e.length>0){for(const i of e){const e=t.m4t(i.YBt);let s=this.Ymt(i);-1===s&&(this.y7t=void 0===this.b4t,this.r7t.push(new m2(e,this.E7t)),s=this.r7t.length-1);this.r7t[s].e7t(i)}this.To()}}static m4t(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}Ymt(e){const i=t.m4t(e.YBt);return Hr(this.r7t,(e=>i===t.m4t(e.j8t)))}x7t(t){we(this.r7t,t)}f2t(t){this.b4t=t,this.y7t=void 0===t}constructor(t,e,i,s){super(),this.y7t=!1,this.d7t=t=>ah(this._7t(t)),this._7t=async t=>{this.w7t();const e=t.currentTime,i=t.currentTime!==v2?this.g7t(this.Y3,t.currentTime):this.m7t(t.currentTime,0,0)[0];let s,n;const r=this.ea.Sd()-10;if(n=this.v7t(v2)&&_.ceil(e)===_.ceil(r)?this.m7t(v2,10,0).filter((t=>!t.Q8t)):this.m7t(e,10,0).filter((t=>!t.Q8t)),n.length){const t=(await Promise.all(n.map((t=>t.i7t(this.u7t))))).some((t=>!0===t));t&&this.wo(new f2),(!t||!this.a7t.R7t||n[0].rd<this.a7t.R7t.rd)&&(s=n[0])}i&&(i!==this.a7t.R7t&&(s=i),this.b7t([i])),s&&(this.a7t.c7t(),this.a7t.R7t=s,await this.a7t.h7t()),S(this.ea.Sd())||(this.Y3=t.currentTime)},this.ea=t,this.v3t=e,this.E7t=new k0(this.v3t,this.ea),this.b4t=void 0,this.y7t=!1,t.Sd()!==1/0?this.YO=0:this.YO=t.kR(),this.Y3=this.YO,this.r7t=[],this.u7t=i,this.a7t=s,this.l7t=!1}};r(),r();var p2=class extends sn{get I7t(){return this.f0t}get $1t(){return this.b3t}C7t(){this.P7t(),this.D7t(),this.zG=void 0}N7t(t){this.M7t=this.M7t.concat(t)}L7t(t){this.B7t=this.B7t.concat(t)}D7t(){this.M7t=[]}P7t(){this.B7t=[]}O7t(t){for(const e of this.M7t)e.FX===t&&Ir(e.eventURL)}ge(){this.I7t.style.display=""}be(){this.I7t.style.display="none"}gn(){this.$o(),this.b3t.$o(),Gt(this.f0t)}constructor(t,e){super(),this.B7t=[],this.M7t=[],this.zG=void 0,this.b3t=new sn,this.F7t=t=>{t.stopPropagation(),this.V7t()},this.V7t=()=>{for(const t of this.B7t)for(const e of t.zYt)Ir(e.uri)},this.f0t=h.createElement("div"),this.f0t.style.display="none",this.W7t=t,this.U7t=e}};function w2(t,e){let i=e;if(!function(t){return"ui"in t}(t))return i;const s=t.ui.language;let n;if(Yt(s)){const e=t.ui.languages;if(!e)return i;n=e[s]}else n=s;return n&&n[e]&&(i=n[e]),i}r(),r();var y2={[nl.XC]:1,[nl.zC]:2,[nl.qC]:2};function b2(t,e){const i=e?e.map((t=>t.toLowerCase())):e;return Ii(t.filter((t=>{const e=t.type.toLowerCase();return!!rl(i)&&-1!==i.indexOf(e)&&R$(e)})),((t,e)=>y2[t.type]-y2[e.type])).map(A2)}function A2(t){return ul({src:t.contentURL,type:t.type,isAdvertisement:!0})}function S2(t,e){return yW(T2(t),T2(e))}function T2(t){return{Ti:t.height,ji:t.width}}function k2(t,e,i,s){const n=function(t,e,i,s){let n,r=1/0;const o=t.filter((t=>!R$(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(o.length){for(const t of o){const s=(_.abs(t.width/e-1)+_.abs(t.height/i-1))/2;s<r&&(r=s,n=t)}return n||o.sort(S2)[0]}}(t.vKt,e.width,e.height,i),r=b2(t.vKt,i);if(n){const t=A2(n);t&&r.push(t)}var o;r.length>0&&(t.bKt=null==(o=r[0].src)?void 0:o.trim());return NC({sources:r},s)}var E2=class extends p2{get G7t(){return this.H7t}get SR(){return this.Z7t.SR}get ct(){let t=this.Z7t.ct;return S(t)&&this.cKt&&(t=this.cKt.ct||0),t}get RR(){return this.Z7t.RR}get GR(){return this.Z7t.GR}set GR(t){this.Z7t.GR=t,t?this.O7t(dc.kKt):this.O7t(dc.EKt)}get qR(){return this.Z7t.qR}get sI(){return this.Z7t.sI}get vI(){return this.Z7t.vI}set vI(t){this.Z7t.vI=t}get cI(){return this.Z7t.cI}get fI(){return this.Z7t.fI}get X7t(){return this.z7t}kI(){this.Z7t.qR&&(this.Z7t.kI(),this.wo(new H(this.SR)),this.H7t&&this.O7t(dc.xKt),this.H7t=!0)}TI(){this.Z7t.qR||(this.Z7t.TI(),this.wo(new fl(this.SR)),this.O7t(dc.Zy))}async EI(){var t;null==(t=this.WT)||t.Yw(),this.WT=void 0,this.be(),this.H7t=!1,this.q7t=!0,this.Y7t(),this.K7t(),await this.j7t()}Q7t(t){void 0===t&&(t=!0),this.H7t=!1,t&&this.O7t(dc.FKt),this.be(),this.U7t()}J7t(){var t;const e=null==(t=this.v3t.Ta)?void 0:t.mi,i=new G0(this.Yu,e);return this.I7t.appendChild(i.we),i.yn("DD",this.$7t),i}tte(){this.cKt&&this.cKt.rKt.GYt&&(this.v0t=new pt(this.I7t),this.v0t.R$t=this.cKt.rKt.GYt,this.v0t.yn("clickstart",this.ete),this.v0t.yn("click",this.V7t))}ite(t,e){for(const i of this.M7t)if(i.FX===dc.Xy){const s=w$(i.ec,e);void 0!==s&&this.Y3<s&&s<=t&&Ir(i.eventURL)}}async ste(){if(!this.cKt||!this.nte)return;const t=k2(this.cKt,this.nte,this.DT.ads.allowedMimeTypes,this.DT);if(!t.sources.length)return await this.Z7t.er(),this.W7t(""),void this.cKt.mYt();this.WT=new da,this.q7t=!0,await So(this.Z7t.xa(t,this.WT.Vw),this.WT),this.Z7t.ge(),this.cKt.mYt(),this.tte()}async rte(t,e,i){this.z7t=t,this.cKt=t.Yqt,this.Z7t.yn(Ti.sb,this.ote),this.Z7t.yn(Ti.xy,this.hte),this.Z7t.yn(Ti.ob,this.ate),this.Z7t.yn(ro,this.Ds),this.cKt.eYt&&0!==this.cKt.eYt.length&&this.N7t(this.cKt.eYt),this.cKt.rKt&&this.L7t(this.cKt.rKt),this.zG=e,this.nte=i,0!==this.cKt.vKt.length&&(this.Z7t.yn(yo.da,this.ute),await this.ste(),this.Z7t.yn(Ti.Cy,this.cte),this.Z7t.yn(Ti.sb,this.dte),this.Z7t.yn(tl.VL,this.fte),this.Z7t.yn(Ti.Yy,this.Ds))}BQt(){this.G7t&&this._te&&this.$7t()}get _te(){return this.cKt&&-1!==this.cKt.pKt&&this.Z7t.SR>=this.cKt.pKt}vte(){this.O7t(dc.oTt),this.z7t&&this.$1t.wo(new cn(this.z7t,this.SR))}async j7t(){this.Z7t.fn(yo.da,this.ute),this.Z7t.fn(Ti.Cy,this.cte),this.Z7t.fn(Ti.sb,this.dte),this.Z7t.fn(tl.VL,this.Ds),this.Z7t.fn(tl.VL,this.fte),this.Z7t.fn(Ti.Yy,this.Ds),this.Z7t.fn(Ti.sb,this.ote),this.Z7t.fn(Ti.xy,this.hte),this.Z7t.fn(Ti.ob,this.ate),this.Z7t.fn(ro,this.Ds),this.z7t&&(this.z7t.YJt(),this.$1t.wo(new xn(this.z7t,this.SR))),this.mte(),this.C7t(),this.Y7t(),this.K7t(),this.z7t=void 0,this.cKt=void 0,this.nte=void 0,await this.Z7t.er(),this.Z7t.be(),this.I7t.style.cursor="",this.pte=0,this.Y3=-1,this.wte&&(this.yte.j7t(),this.wte=!1)}mte(){this.v0t&&(this.v0t.Hw(),this.v0t=void 0)}K7t(){this.bte&&(Gt(this.bte),this.bte=void 0)}Y7t(){this.p0t&&(this.p0t.gn(),this.p0t=void 0)}Ate(){this.wte=!0}Ste(){var t;this.bte||(this.bte=h.createElement("div"),this.bte.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.I7t.appendChild(this.bte));const e=null==(t=this.z7t)?void 0:t.td;if(!e)return;const i=e.qc.filter(P0);let s=w2(this.DT,"The content will play in")+" "+_.round(e.OJt)+" "+w2(this.DT,"seconds");if(i.length>1){const t=i.filter((t=>t.zJt())).length;s+=". "+w2(this.DT,"Ad")+" "+(t+1)+"/"+i.length}wu(this.bte,s)}constructor(t,e,i,s,n,r,o){super(t,e),this.yte=i,this.DT=s,this.v3t=n,this.Yu=r,this.Z7t=o,this.H7t=!1,this.pte=0,this.Y3=-1,this.WT=new da,this.q7t=!0,this.cte=()=>{this.Q7t()},this.fte=()=>{this.WT=void 0,this.H7t||(this.vte(),this.H7t=!0),this.q7t&&(this.q7t=!1,this.v3t.o7t()),this.I7t.style.display="block",this.Z7t.fn(tl.VL,this.fte),this.H7t=!0},this.dte=()=>{const t=this.SR,e=this.ct,i=t/e;(0===this.pte&&i>=.25?(this.O7t(dc.LKt),this.pte=1):1===this.pte&&i>=.5?(this.O7t(dc.OKt),this.pte=2):2===this.pte&&i>=.75&&(this.O7t(dc.BKt),this.pte=3),this.ite(t,e),this.Ste(),this.Y3=t,this.cKt)&&(-1!==this.cKt.pKt&&this.cKt.pKt<this.cKt.ct&&(null!=this.p0t||(this.p0t=this.J7t()),this.SR<this.cKt.pKt?this.p0t.L$t(this.cKt.pKt-this.SR):this.p0t.O$t()))},this.ute=()=>{var t,e;this.WT=void 0,this.Z7t.fn(yo.da,this.ute),this.q7t=!0,null==(t=this.zG)||t.djt(k$.hjt),this.H7t=!1,this.Z7t.be();const i=(null==(e=this.Z7t.bt)?void 0:e.src)||"";this.W7t(i)},this.ote=()=>{this.Ds(new ri(this.SR,void 0))},this.hte=()=>{this.Ds(new Ls(this.ct))},this.ate=()=>{this.Ds(new rs(this.SR,this.vI))},this.ete=()=>{this.v3t.TI()},this.$7t=()=>{this.z7t&&(this.O7t(dc.IKt),this.$1t.wo(new Ho(this.z7t,this.SR/this.ct)),this.Q7t(!1))},this.I7t.className="theoplayer-ad-linear",this.I7t.style.zIndex="10",Nh(this.I7t),this.Z7t.be(),this.wte=!1}};r(),r();var x2=class t extends Co{get we(){return this.Vs}F$t(){this.we.addEventListener("mouseup",this.V$t),this.we.addEventListener("touchend",this.V$t),this.we.addEventListener("mousedown",this.Tte)}B$t(){this.we.removeEventListener("mouseup",this.V$t),this.we.removeEventListener("touchend",this.V$t),this.we.removeEventListener("mousedown",this.Tte)}static pr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}gn(){this.B$t(),Gt(this.Vs)}constructor(){super(),this.V$t=t=>{this.wo(new pe("DD")),this.Tte(t)},this.Tte=t=>{t.stopPropagation()},this.Vs=t.pr(),this.F$t()}},R2=class extends p2{get kte(){return this.Ete}get xte(){return this.vu}C7t(){super.C7t(),this.I7t&&Sh(this.I7t)}async rte(t,e,i){this.e$t&&this.j7t(),this.Ete=t,this.e$t=t.Kqt,0!==this.e$t.eYt.length&&this.N7t(this.e$t.eYt),this.zG=e,0!==this.e$t.$qt.length&&(this.L7t(this.e$t.$qt[0].uYt),this.I7t.addEventListener("error",this.Rte),this.I7t.addEventListener("load",this.Ite),await this.ste(),this.Cte())}BQt(){var t;if(void 0!==this.Pte)return;const e=null==(t=this.e$t)?void 0:t.$qt[0];e&&e.td&&-1!==e.td.pKt&&(this.O7t(dc.IKt),this.$1t.wo(new Ho(this.Ete,0)),this.Dte())}vte(){void 0!==this.Ete&&this.$1t.wo(new cn(this.Ete,this.v3t.SR))}EI(){this.j7t(),this.Ete=void 0,this.e$t=void 0}j7t(){this.Nte(),void 0!==this.Ete&&(this.Ete.YJt(),this.$1t.wo(new xn(this.Ete,this.v3t.SR))),this.C7t(),this.Mte(),void 0!==this.Pte&&(v(this.Pte),this.Pte=void 0)}Nte(){this.I7t.removeEventListener("load",this.Ite),this.I7t.removeEventListener("error",this.Rte)}async ste(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const e=this.e$t.$qt[0],i=h.createElement("a");if(e.uYt.GYt&&(i.href=e.uYt.GYt,i.target="qu",i.setAttribute("rel","noopener")),e.rYt){const t=e.rYt,s=h.createElement("iframe");s.src=t.ejt,i.appendChild(s)}else if(e.sYt){const t=e.sYt,s=h.createElement("img");s.src=t.ejt,i.appendChild(s)}else if(e.hYt){const t=e.hYt,s=h.createElement("iframe");s.src=t.ejt,i.appendChild(s)}e.mYt(),i.addEventListener("mousedown",this.F7t),i.addEventListener("touchend",this.F7t),this.I7t.firstChild&&(Sh(this.I7t),this.j7t()),t.appendChild(i),this.I7t.appendChild(t),this.ge()}Cte(){var t;if(!this.e$t)return;const e=null==(t=this.e$t.$qt[0].td)?void 0:t.pKt;void 0!==e&&-1!==e&&(this.Pte=s.setTimeout(this.Lte,1e3*e))}Mte(){this.vu&&(this.vu.fn("DD",this.Bte),this.vu.gn()),this.vu=void 0}get Ote(){return this.v3t.Fte()}constructor(t,e,i){super(t,e),this.Ite=()=>{this.Nte(),this.O7t(dc.HKt),this.U7t()},this.Rte=t=>{var e,i;this.Nte(),null==(e=this.zG)||e.djt(k$.ujt);const s=null==(i=this.e$t)?void 0:i.$qt[0];var n,r;const o=null!=(r=null!=(n=null==s?void 0:s.rYt)?n:null==s?void 0:s.sYt)?r:null==s?void 0:s.hYt;var h;this.W7t(null!=(h=null==o?void 0:o.ejt)?h:"")},this.Dte=()=>{this.be(),Sh(this.I7t),this.U7t(),this.Ete=void 0,this.e$t=void 0},this.Lte=()=>{this.vu||(this.Pte=void 0,this.vu=new x2,this.I7t.children[0].appendChild(this.vu.we),this.vu.yn("DD",this.Bte))},this.Bte=()=>{this.O7t(dc.IKt),this.BQt()},this.I7t.className="theoplayer-ad-nonlinear",this.I7t.style.position="absolute",this.I7t.style.width="100%",this.I7t.style.bottom="3em",this.I7t.style.zIndex="10",this.I7t.style.textAlign="center",this.v3t=i}};r();var I2=class{static async Vte(t,e,i){let s=[],n=t.shift();for(;n;){try{const t=await(new D$).Ajt(n,e);s=s.concat(t)}catch(t){0;const e=qh.n2t(t,n.sources.src);i.wo(e)}n=t.shift()}return s}};r(),r(),r();var C2=class extends Ds{ba(){return new P2}constructor(){super("uat")}},P2=class extends pe{constructor(){super("statechange")}};r();var Wt=function(t){return t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted",t}({});r(),r();var D2=class{get Ku(){return this.Zu}get V(){return this.Zu.length}get ka(){return this.su||(this.su=this.ba()),this.su}lC(t){return this.Zu[t]}SO(t){this.Zu.push(t),this.su&&this.su.push(t.ka),this.Wte(t)}Ute(t){for(const e of t)this.SO(e)}Gte(t,e){e>=0&&e<=this.Zu.length&&(this.Zu.splice(e,0,t),this.su&&this.su.splice(e,0,t.ka),this.Wte(t))}TO(t){return ms(this.Zu,t)}$S(t){this.Hte(this.Zu.indexOf(t))}Hte(t){if(!(t>=0&&t<this.Zu.length))return;const e=this.Zu[t];ka(this.Zu,t),this.su&&ka(this.su,t),this.Zte(e)}Bb(){const t=this.Zu.slice();En(this.Zu),this.su&&En(this.su);for(const e of t)this.Zte(e)}constructor(){this.Zu=[],this.su=void 0}},N2=class extends D2{ba(){return function(t){const e=function(t){const e=t.Ku.map((t=>t.ka));return e.item=e=>{const i=0|e,s=t.lC(i);return s&&s.ka||void 0},e}(t),i=new rt(t,e);return e.addEventListener=(t,e)=>{i.yn(t,e)},e.removeEventListener=(t,e)=>{i.fn(t,e)},e}(this)}yn(t,e){this.Xte.yn(t,e)}iy(t){this.Xte.iy(t)}$o(){this.Xte.$o()}wo(t){this.Xte.wo(t)}fn(t,e){this.Xte.fn(t,e)}ly(t){this.Xte.ly(t)}_y(t){this.Xte._y(t)}vy(t,e){return this.Xte.vy(t,e)}constructor(...t){super(...t),this.Xte=new sn,this.Ds=t=>{this.wo(t)}}};r();var M2=class extends pe{constructor(t){super("addtask"),this.task=t}},L2=class extends Ds{ba(){return new M2(this.zte.ka)}constructor(t){super("qte"),this.zte=t}};r();var B2=class extends pe{constructor(t){super("removetask"),this.task=t}},O2=class extends Ds{ba(){return new B2(this.task.ka)}constructor(t){super("Yte"),this.task=t}},F2=class extends N2{Wte(t){this.wo(new L2(t))}Zte(t){this.wo(new O2(t))}constructor(){super()}},V2=class extends Co{async SI(){await this.Kte(),this.yat("initialised")}async Kte(){try{await this.jte()}catch(t){0}}async jte(){const t=await this.l_.mrt();for(const e of t){const t=this.Jte.Qte(e.id,e.sourceDescription,e.parameters,this.$te);this.eee(t),this.UT.SO(t),await t.iee}}get zk(){return this.wat}yat(t){this.wat=t,this.wo(new C2)}get see(){return this.UT}Qte(t,e,i){void 0===i&&(i="persistent");const s=this.Jte.nee(t,e,i);return this.ree(s,i),this.UT.SO(s),this.eee(s),s}async ree(t,e){try{await this.oee(t,e)}catch(t){throw g("Unable to persist task - "+t)}}async oee(t,e){await this.l_.frt({key:t.o,id:t.o,sourceDescription:t.xc,parameters:t.mT},e)}eee(t){t.yn("uat",(()=>{t.zk===Wt.EVICTED&&this.UT.$S(t)}))}constructor(t,e,i){super(),this.wat="uninitialised",this.UT=new F2,this.Jte=e,this.$te=i,this.l_=t,this.SI()}};r(),r(),r(),r();var W2=class{get fB(){return this.hee}get aee(){return this.uee}get cee(){return this.lee.fB}get dee(){let t=0,e=0;return this.AO.forEach((i=>{t+=i.timeRanges.fB,e+=i.totalQualityDurationToCache})),0===e?0:_.min(1,t/e)}get lee(){return this.fee}eF(t){return!!Ai(this.AO,t.AO)&&(!!_f(this.uee,t.uee)&&(!!_f(this.fB,t.fB)&&(!!_f(this.cee,t.cee)&&this.lee.oB(t.lee))))}constructor(t,e,i){if(this.uee=t,this.AO=e,this.hee=i,0===this.AO.size)this.fee=se.mB();else{let t=new se([-1/0,1/0]);this.AO.forEach((e=>{t=t.Sn(e.timeRanges)})),this.fee=t}}};W2.QUALITY_TIME_RANGES_NULL_OBJECT=xu(),W2.CACHE_PROGRESSION_NULL_OBJECT=new W2(0,W2.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),W2._ee=W2.CACHE_PROGRESSION_NULL_OBJECT,r(),r(),r(),r();var U2=class extends pe{constructor(){super("progress")}},G2=class extends Ds{ba(){return new U2}constructor(){super("F2t")}};r(),r();var H2=class extends z{get name(){return"vee"}constructor(t,e){super(t,e)}};r(),r(),r();var Z2=function(t){return t[t.XC=0]="XC",t[t.zC=1]="zC",t}({});async function X2(t,e,i){const s=[];for(const n of t.Tpt)s.push(z2(n,e,i));return{mee:await Promise.all(s)}}async function z2(t,e,i){const s=[];for(const n of t.uft)q2(n)||s.push(j2(n,e,i));return{Z:await Promise.all(s),Aw:t.Aw}}function q2(t){return t.Zat.every(K2)}var Y2=1;function K2(t){return t.Cwt!==Y2&&Boolean(t.Cwt)}async function j2(t,e,i){const s=[];for(const e of t.Zat)K2(e)||s.push(Q2(e,i));const n=await Promise.all(s),r=t.Zrt[0],o=t.AG,h=o?function(t,e){const i=[],s=function(t){return t?Oh(t,"avc")?uu.VIDEO_H264:Oh(t,"hev")||Oh(t,"hvc")||Oh(t,"hvt")||Oh(t,"lhv")||Oh(t,"lhe")||Oh(t,"lht")?uu.VIDEO_H265:Oh(t,"mp4")?uu.VIDEO_MP4:Oh(t,"mpeg2")?uu.VIDEO_MPEG2:Oh(t,"mpeg")?uu.VIDEO_MPEG:uu.VIDEO_UNKNOWN:uu.VIDEO_UNKNOWN}(t);for(const t of e){const e=t.i9.split(":").pop(),n=t.s9;i.push({mimeType:s,uuid:e,data:n})}const n=Z2.XC,r=im;return{type:n,schemeType:r,schemeDatas:i}}(r,o):void 0,a=hX(t,e,!0);return{IC:n,gs:t.Htt,Aw:t.Aw,eH:h,ept:a}}async function Q2(t,e){const i={stack:[],error:void 0,hasError:!1};try{const r=zs(i,new da,!1),o=await async function(t,e,i){const s=[],n=t.Bot;t.cdt&&s.push({FO:0,ct:0,gee:t.cdt});const r=n.tbt();let o=r;for(;o;){if(t.slt(o)){const n=await t.rlt(o,e,i);for(let e=0;e<n.V;e++)s.push(J2(n.hlt(e),t))}else s.push(J2(o,t));o=n.clt(o)}const h=n.nbt(),a=h.VO-r.FO;return{ct:a,Ert:s}}(t,e,r.Vw),h={o:$2(t),NL:o,wG:t.wG,vp:t.vp,Ti:t.Ti,Aw:t.Aw,ji:t.ji};switch(t.Aw){case ee.Ak:break;case ee._E:var s,n;h.Jdt=null!=(n=null==(s=t.Jdt)?void 0:s.dF())?n:NaN;break;case ee.fE:h.audioSamplingRate=t.Ewt}return h}catch(t){i.error=t,i.hasError=!0}finally{lo(i)}}function J2(t,e){return{FO:t.FO,ct:t.ct,gee:e.flt(t)}}function $2(t){return t.Qct.Cn+"-"+(""+t.o)}function t3(t,e){const i=function(t){const e=function(t){const e=xu();for(const i of t){let t=e.get(i.nLt);t||(t={Aw:i.Aw,yN:[]},e.set(i.nLt,t)),t.yN.push(i)}return e}(t),i=ea();return e.forEach((t=>{for(const e of t.yN){let s=i.get(t.Aw);s||(s=xu(),i.set(t.Aw,s));let n=s.get(e.l);n||(n=[],s.set(e.l,n)),n.push(e)}})),i}(t);return function(t,e){const i=ea();return t.forEach(((t,s)=>{const n=xu();t.forEach(((t,i)=>{const r=[];for(const i of t){const t=e3(i,s,e);r.push(t)}n.set(i,r)})),i.set(s,n)})),i}(i,e)}function e3(t,e,i){const s=t.nLt,n={cLt:t,LLt:[]};for(const t of i)mj(e,s,t)&&n.LLt.push(t);return n}async function i3(t,e){const i=await e.eTt([t],{});return UK(i.$k,{},i.sTt)}async function s3(t,e){return nK(t)?async function(t,e){const i=t3(t.yN,t.JBt),s=await async function(t,e){const i=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await o3(n,s,e);i.push(r)}return i}(i,e),n=await async function(t,e){const i=[];for(const h of t){var s,n;const t=await c3(h.Pyt,e);var r,o;t.wG=h.wG,t.vp=h.Zrt?r3(h.Zrt):"",t.Ti=null!=(r=null==(s=h.zCt)?void 0:s.Ti)?r:0,t.ji=null!=(o=null==(n=h.zCt)?void 0:n.ji)?o:0,i.push(t)}return{Aw:ee.tE,Z:[{gs:lU,Aw:ee.tE,IC:i}]}}(t.JBt,e);return s.push(n),{ct:n3(s),pee:[t.Pyt],Lpt:[{mee:s}]}}(t,e):function(t){const e=l3(t);return{ct:e.ct,pee:[t.Pyt],Lpt:[{mee:[{Aw:ee.tE,Z:[{Aw:ee.tE,gs:lU,IC:[{o:t.Pyt,NL:e,wG:0,vp:"",Ti:0,Aw:ee.tE,ji:0}]}]}]}]}}(t)}function n3(t){let e=-1/0;for(const i of t)for(const t of i.Z)e=_.max(e,...t.IC.map((t=>t.NL.ct)));return e}function r3(t){return[t.sPt,t.rPt,t.pBt].filter(ji).join(",")}async function o3(t,e,i){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,e]=t.value,n=await h3(e,i);s.push(n)}return{Aw:a3(e),Z:s}}async function h3(t,e){const i=[],s=t[0].cLt;for(const s of t){const t=await u3(s,e);i.push(t)}return{gs:s.gs||lU,Aw:a3(s.Aw),IC:i}}function a3(t){switch(t){case Yc.fE:return ee.fE;case Yc._E:return ee._E;case Yc.jV:case Yc.eBt:return ee.Ak;default:return ee.tE}}function u3(t,e){const i=function(t){const e=t.cLt.Pyt,i=t.LLt.map((t=>t.Pyt));return e||(i.length?i[0]:void 0)}(t);return c3(i,e)}async function c3(t,e){let i={ct:0,Ert:[]};if(t){const s=await i3(t,e);ft(s)&&(i=l3(s))}return{o:t||"default",wee:t,NL:i,wG:0,vp:"",Ti:0,Aw:ee.tE,ji:0}}function l3(t){const e=[];let i,s=0;for(const n of t.Ert){const t=s;!n.iOt||void 0!==i&&aK(n.iOt.Pyt,i)||(e.push(d3(n.iOt,t)),i=n.iOt.Pyt),e.push(f3(n,t)),s+=n.ct}return{ct:s,Ert:e}}function d3(t,e){return{FO:e,ct:0,gee:_3(t.Pyt)}}function f3(t,e){return{FO:e,ct:t.ct,gee:_3(t.Pyt)}}function _3(t){return{Gu:t.Dx,rut:t.hAt?[t.hAt.Cn,t.hAt.Cn+t.hAt.V]:void 0,kE:!1}}r(),r();var v3=class{async yee(t){if(!t.src)throw new g("Invalid typed source");const e=t.type;if(zh(e))return await this.bee(t);if(OT(e))return await this.Aee(t);throw new g("Unexpected source type")}async bee(t){try{const e=await i3(t.src,this.iTt);return await s3(e,this.iTt)}catch(t){throw new g("Unable to fetch HLS manifest")}}async Aee(t){try{const e=new CZ({OC:Ms.Nh(t.src),LSt:t.liveOffset,WSt:t.timeServer,kE:t.useCredentials},this.See,ph.DE,this.iTt,t.dash);return await e.W,await async function(t,e,i){const s=[];for(const n of t.Lpt)s.push(X2(n,e,i));const n=await Promise.all(s);return{ct:t.wyt.swt(),pee:[t.ESt],Lpt:n}}(e.Pr.hdt,t.contentProtection,this.dlt)}catch(t){throw new g("Unable to fetch DASH manifest")}}constructor(t,e,i){this.iTt=t,this.dlt=e,this.See=i}};r();var m3=class{Tee(){const t=new os;return this.kee.push(t),this.Eee(),t.Vb}async xee(t,e){try{await t}finally{this.Ree-=1,this.Eee(),0===this.kee.length&&0===this.Ree&&e.Ob(!0)}}Eee(){if(this.kee.length>0&&this.Ree<this.Iee){this.kee.shift().Ob(),this.Ree+=1}}constructor(t){this.kee=[],this.Ree=0,this.Iee=t}};var g3=class extends Co{get iee(){return this.SI()}async SI(){const t=new v3(this.iTt,this.dlt,this.See);this.tPt=await t.yee(this.Cee);const e=function(t,e){if(Yt(t)){if(Oh(t,"%"))return C(t)/100*e;throw new g("Unexpected - Invalid string supplied as amount to cache.")}return e<t?e:t}(this._Tt.mT.amount,this.tPt.ct);let i;this.hee=e;const s=eV(this.tPt.pee[0]),n=(await this.krt.xrt.prt(s,"manifestURL")).filter((t=>ms(t.references,this._Tt.o))),r=[],o=this._Tt.mT.bandwidth;for(const t of this.tPt.Lpt)for(const e of t.mee)for(const t of w3(e,this._Tt.mT.preferredTrackSelection))for(const e of b3(t.IC,o))r.push(e);this.Pee=_.ceil(r.map((t=>t.wG*function(t,e){let i=0;for(const s of t.NL.Ert.map((t=>t.ct)))if(i+=s,i>=e)return i;return i}(t,e)/8)).reduce(((t,e)=>t+e),0));const h=xu();if(n&&0!==n.length){const t=n.reduce(((t,e)=>t+e.byteSize),0);for(const t of n){const e=t.qualityId,i=new se(t.startsAndEnds);if(h.has(e))h.get(e).timeRanges=h.get(e).timeRanges.JL(i).QL(5e-4);else{const t=Fo(r,(t=>t.o===e));var a;const s=_.min(this.hee,null!=(a=null==t?void 0:t.NL.ct)?a:1/0);h.set(e,{timeRanges:i,totalQualityDurationToCache:s})}}i=new W2(t,h,this.hee)}else{for(const t of r)h.set(t.o,{timeRanges:se.mB(),totalQualityDurationToCache:_.min(t.NL.ct,this.hee)});i=new W2(0,h,this.hee)}this.Dee=i}get Nee(){return this.Pee}get Dee(){return this.Mee}set Dee(t){this.Mee.eF(t)||(this.Mee=t,t.eF(W2._ee)||this.wo(new G2))}async pi(t){await this.po,await this.Lee(this.tPt,t)}async Lee(t,e){if(!t.pee)throw new g("Unexpected - manifest is missing locations");await this.Bee();const i=[];for(const s of t.Lpt)i.push(this.Oee(s,t.pee[0],e));return Rs(i)}async Bee(){const t=await this.Fee.mrt();for(const e of t){const t=await this.krt.Rrt.Nb(e.key);if(t)await p3(t,this._Tt.o,this.krt.Rrt,this.$te);else try{await this.krt.Rrt.frt(e,this.$te)}catch(t){throw new H2("Unable to store manifest with url: "+e.locationURL,t)}}await this.Fee.yrt()}Oee(t,e,i){const s=[];for(const n of t.mee){const t=w3(n,this._Tt.mT.preferredTrackSelection);for(const n of t)s.push(this.Vee(n,e,i))}return Rs(s)}async Vee(t,e,i){const s=this._Tt.mT.bandwidth,n=b3(t.IC,s);t.Aw===ee._E&&t.ept&&t.ept.rU.widevine&&"persistent"===t.ept.rU.widevine.licenseType&&(await this.Wee(t.ept),J(i));const r=[];for(const t of n)r.push(this.Uee(t,e,i));return Rs(r)}async Uee(t,e,i){J(i);const s=t.NL.Ert[0].FO+this.hee,n=[];let r=!1;for(const o of t.NL.Ert){if(o.FO>=s||this.stopIfFailed(r))break;await this.Gee(i),await this.Hee.Tee(),n.push(this.Hee.xee(this.Zee(o,t,e),this.Xee).catch((t=>(r=!0,Promise.reject(t)))))}return Rs(n)}async Gee(t){if(null==t?void 0:t.Bw)throw await this.Xee.Vb,new Bu}async zee(){return await this.po.catch(It),this.tPt}Wee(t){return Promise.resolve()}qee(){return Ms.Op("License renewal unsupported in this SDK."),Promise.resolve()}async Zee(t,e,i){const s=this.krt.xrt,n=iV(t.gee.Gu,t.gee.rut),r=await s.Nb(n);if(r)await p3(r,this._Tt.o,s,this.$te),this.Yee(r,!1);else try{const s=await this.Kee(t.gee),{segmentMetadataEntry:n,segmentEntry:r}=this.jee(t,e,i,s);await this.krt.Trt((async t=>{await t.xrt.frt(n,this.$te),await t.Ert.frt(r,this.$te)})),this.Yee(n,!0)}catch(e){throw new H2("Unable to store segment with url: "+t.gee.Gu,e)}}async Kee(t){const e=await this.vct.$at(t,{hut:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,AE:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.mct(e)}async mct(t){return{buffer:await t.Ck()}}jee(t,e,i,s){const n=iV(t.gee.Gu,t.gee.rut),r=t.FO,o=t.ct,h=this.Qee(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:eV(i),qualityId:e.o,byteSize:h,startsAndEnds:new se([r,r+o]).WL,references:[this._Tt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:eV(i),data:s,references:[this._Tt.o]}}}Qee(t){return t.buffer.byteLength}Yee(t,e){const i=t.qualityId,s=this.Mee,n=s.AO;n.get(i).timeRanges=n.get(i).timeRanges.JL(new se(t.startsAndEnds)).QL(5e-4),this.Dee=new W2(e?s.aee+t.byteSize:s.aee,n,this.hee)}stopIfFailed(t){return!1}constructor(t,e,i,s,n,r,o,h){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.Xee=new os,this.Mee=W2._ee,this._Tt=t,this.krt=e,this.iTt=i,this.Fee=s,this.vct=n,this.dlt=r,this.See=h,this.$te=o,this.Pee=-1;const a=this._Tt.xc.sources[0];this.Cee=a,this.po=this.SI(),this.Hee=new m3(this._Tt.mT.parallelTasksThreshold)}};async function p3(t,e,i,s){ms(t.references,e)||(t.references.push(e),await i.frt(t,s))}function w3(t,e){switch(t.Aw){case ee.fE:return y3(t.Z,e.audioTrackSelection);case ee.Ak:return y3(t.Z,e.textTrackSelection);default:return y3(t.Z,[])}}function y3(t,e){if(0===e.length)return t.length?[t[0]]:[];const i=[];for(const s of t)e.indexOf(s.gs)>-1&&i.push(s);return i}function b3(t,e){if(!t.length)return[];const i=[...t].sort(bW),s=i.filter((t=>t.wG<=e));return s.length>0?[s.pop()]:[i.shift()]}var A3=class{async Jee(){await this.krt.Trt((async t=>{await this.$ee(t),await this.tie(t),await this.eie(t),await this.iie(t)}))}async $ee(t){const e=t.Irt,i=this._Tt.o;await e.$S(i)}async tie(t){const e=t.xrt,i=t.Ert,s=this._Tt.xc.sources[0];if(!Cn(s))return;const n=eV(s.src),r=(await e.prt(n,"manifestURL")).filter((t=>ms(t.references,this._Tt.o)));for(const t of r)we(t.references,this._Tt.o),0===t.references.length?(await e.$S(t.key),await i.$S(t.key)):await e.frt(t)}async eie(t){const e=t.Rrt,i=this.sie(),s=(await e.rrt(i)).filter((t=>ms(t.references,this._Tt.o)));for(const t of s)we(t.references,this._Tt.o),0===t.references.length?await e.$S(t.key):await e.frt(t)}sie(){if(!this.tPt)return[];const t=this._Tt.xc.sources[0];if(!Cn(t))return[];const e=eV(t.src),i=function(t){if(!t)return[];const e=[];for(const i of t.Lpt)for(const t of i.mee)for(const i of t.Z)for(const t of i.IC)t.wee&&e.push(t.wee);return function(t){return t.reduce(((t,e)=>(t.indexOf(e)<0&&t.push(e),t)),[])}(e)}(this.tPt).map((t=>({src:t}))).map((t=>eV(t.src)));return[e,...i]}async iie(t){const e=t.Crt,i=(await e.mrt()).filter((t=>ms(t.references,this._Tt.o)));for(const t of i)we(t.references,this._Tt.o),0===t.references.length?(await e.$S(t.key),this.nie(t)):await e.frt(t)}nie(t){}constructor(t,e,i){this._Tt=t,this.krt=e,this.tPt=i}},S3=new class{fit(t,e,i){return new A3(t,e,i)}};r(),r();var T3=class{get ka(){return this.su||(this.su=function(t){return{renew(e){t.rie(e)}}}(this)),this.su}rie(t){this.oie(t)}async oie(t){try{await this.hie.qee(t)}catch(t){0,this.tx.yat(Wt.ERROR)}}constructor(t,e){this.tx=t,this.hie=e}},k3=class extends sn{get iee(){return this.hie.iee}get ka(){return this.su||(this.su=function(t){let e,i={get id(){return t.o},get status(){return t.zk},get source(){return t.xc},get parameters(){return t.mT},get duration(){return t.ct},get cached(){return t.aie.ks()},get secondsCached(){return t.uie},get percentageCached(){return t.cie},get bytes(){return t.lie},get bytesCached(){return t.die},get license(){return t.$q.ka},start(){t.Cn()},pause(){t.TI()},remove(){t.$S()},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new yD(t,["F2t","uat"],i),i}(this)),this.su}get o(){return this.ZS}get $q(){return this.fie}get zk(){return this.wat}yat(t){this.wat!==t&&(this.wat=t,this.wo(new C2))}get xc(){return this.Cc}get mT(){return this._ie}get ct(){return this.hie.Dee.fB}get aie(){return this.hie.Dee.lee}get uie(){return this.hie.Dee.cee}get cie(){return this.hie.Dee.dee}get lie(){return this.hie.Nee}get die(){return this.hie.Dee.aee}Cn(){this.wat===Wt.EVICTED||this.wat===Wt.DONE||this.mie()}async mie(){try{this.yat(Wt.LOADING);const t=new da;this.gie=t,await this.hie.pi(t.Vw),this.yat(Wt.DONE)}catch(t){Je(t)?this.yat(Wt.IDLE):this.yat(Wt.ERROR)}finally{this.gie.Hw()}}TI(){this.gie.Yw()}$S(){this.zk===Wt.LOADING?(this.yn("uat",this.evictOnLoading),this.TI()):this.pie()}async pie(){try{const t=await this.hie.zee();await S3.fit(this,this.krt,t).Jee(),this.hie.Dee=W2._ee,this.yat(Wt.EVICTED)}catch(t){0,this.yat(Wt.ERROR)}}constructor(t,e,i,s,n,r){super(),this.gie=new da,this.evictOnLoading=()=>{this.fn("uat",this.evictOnLoading),this.pie()},this.ZS=t,this.Cc=e,this._ie=i,this.krt=s,this.hie=n.fit(this,this.krt,r),this.fie=new T3(this,this.hie),this.wat=1===this.hie.Dee.dee?Wt.DONE:Wt.IDLE,this.hie.yn("F2t",(t=>{this.Ds(t),1===this.cie&&this.yat(Wt.DONE)}));const o=new Date,h=this._ie.expirationDate.getTime()-o.getTime();(function(t){return t<2147483647})(h)&&u((()=>this.pie()),h)}};var E3=class{nee(t,e,i){const s=uP();return this.Qte(s,t,e,i)}Qte(t,e,i,s){return new k3(t,e,i,this.krt,this.wie,s)}constructor(t,e){this.krt=t,this.wie=e}};r();var x3=30,R3=5;function I3(t){if(!t)throw new g("Unexpected - The cache parameters are undefined");const e=function(t){if(Yt(t)&&!Oh(t,"%"))return x(t);return t}(t.amount);!function(t){if(function(t){return Yt(t)&&Oh(t,"%")}(t)){const e=C(t);if(S(e)||e<0||e>100)throw new g("The amount as percentage must be between 0 and 100 percent.")}if(!Yt(t)&&S(t))throw new g("The amount must be a number or a string")}(e);const i=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+x3),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||Ad(t)&&t>new Date}(t))throw new g("Invalid expiration date for the cache parameters")}(i);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(S(t)||t<0)throw new g("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return R3;if(S(t))throw new g("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:e,expirationDate:i,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var C3=class{set R7t(t){this.yie=t,this.bie=0,this.Aie=0,this.Sie=void 0}get R7t(){return this.yie}Q4t(){if(!this.yie)return;const t=this.yie.WJt;for(;this.bie<t.length;){const e=t[this.bie];for(void 0===this.Sie&&(this.Sie=A0(e),this.Aie=0);this.Aie<this.Sie.length;){const t=this.Sie[this.Aie];if(this.Aie++,void 0!==t.Yqt)return t.Yqt}this.bie++,this.Sie=void 0}}er(){for(this.R7t=void 0,this.WT.Yw(),this.WT=new da;this.Tie.length;)this.c7t()}kie(t){return new V2(this.krt.Irt,t,"temporary")}async xZt(t){const e=b2(t.vKt,this.kQ.ads.allowedMimeTypes);if(!e.length)return;const i=await II.Fg.jH(e,NC({sources:e}));if(!i.t.FH())return;this.hie||(this.hie=new this.wie(this.lW));const s=this.krt,n=new E3(s,this.hie),r=this.kie(n).Qte(NC({sources:i.xc}),I3({amount:10,bandwidth:wl.Fg.aG()||this.vZ.xj}),"temporary");this.Tie.push(r);const o=this.hie.fit(r,s,"temporary");this.WT.Yw(),this.WT=new da,So(o.pi(this.WT.Vw),this.WT).then(It),this.Eie(o,t)}constructor(t,e,i,s){this.Tie=[],this.bie=0,this.Aie=0,this.h7t=async()=>{const t=this.Q4t();t&&await this.xZt(t)},this.c7t=()=>{const t=this.Tie.shift();null==t||t.$S()},this.Eie=async(t,e)=>{let i=!1;for(;!i;)await t.vy("F2t"),i=1===t.Dee.dee;e.ct<5&&this.h7t()},this.kQ=t,this.lW=e,this.WT=new da,this.wie=i,this.vZ=s,this.krt=new cV}};r(),r();var P3={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new se([0,0]).WL,references:[]},D3={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},N3=class t extends RW{async Clt(t,e,i,s){try{return await super.Clt(t,e,i,s)}catch(t){th(t)}const n=await this.xie.Clt(t,e,i,s);return await this.Rie(t,e,n),n}async Rie(e,i,s){if(void 0===this.Iie)return;const n=this.krt.xrt,r=iV(e,i),o=await n.Nb(r);if(o)await p3(o,this.Iie,n,this.$te);else try{const e={buffer:s},{segmentMetadataEntry:i,segmentEntry:n}=t.jee(r,e,this.Iie);await this.krt.Trt((async t=>{await t.xrt.frt(i,this.$te),await t.Ert.frt(n,this.$te)}))}catch(t){throw new H2("Unable to store segment with url: "+e,t)}}static jee(t,e,i){return{segmentMetadataEntry:Bo({},P3,{key:t,segmentURLsegmentByteRange:t,references:[i]}),segmentEntry:Bo({},D3,{key:t,segmentURLsegmentByteRange:t,data:e,references:[i]})}}constructor(t,e,i,s,n){super(t),this.xie=new xW(e),this.krt=i,this.Iie=s,this.$te=n}};var M3=class{fit(t,e,i){void 0===i&&(i="persistent");const s=t.xc.sources[0];if(FT(s))throw new g("Caching THEOlive sources is not supported");const n=Boolean(s.useCredentials),r=new OV(this.lW,Ca.tE),o=new ZZ(this.lW,n),h=new sV(e.Rrt,e.xrt,e.Ert,e.Crt),a=function(t,e,i,s,n){return new N3(e,t,i,s,n)}(this.lW,h,e,t.o,i),u=new uV,c=new KZ(YZ(o,h),u,t);return this.Cie(t,e,c,u,r,a,i)}constructor(t){this.lW=t}},L3=class extends M3{Cie(t,e,i,s,n,r,o){return new g3(t,e,i,s,n,r,o,_V())}},B3=L3,O3=class t extends Pt{get Q1t(){return this}static get K1t(){return I.n$t}get K1t(){return t.K1t}d8t(t,e,i){e===ja.Xst&&this.O9?ah(this.K4t([t])):this.Pie.push(t)}kR(){return this.Die.G7t?this.Die.SR:this.mst()}ER(t,e){}Sd(){return this.Die.ct}IR(){return this.Die.RR}PR(){}NR(){}HR(){return this.Die.GR}ZR(t){this.GR!==t&&(this.Die.GR=t,this.wo(new rs(this.SR,this.vI)))}YR(){return this.Die.qR}nI(){return this.Die.sI}oI(){return se.mB().ks()}lI(){return this.Die.cI}_I(){return this.Die.fI}mI(){return this.Die.vI}gI(t){this.vI!==t&&(this.Die.vI=t,this.wo(new rs(this.SR,this.vI)))}async kI(){if(this.Nie)return;this.wo(new H(this.SR)),this.Mie(),this.Pie.length&&(this.Nie=this.K4t(this.Pie),await this.Nie,this.Nie=void 0),await this.Lie.p7t(this.ea.kR());const t=this.Bie;4!==t&&1!==t&&5!==t||(!this.c$t&&this.Oie.length?this.Fie():this.c$t?(this.Vie=!0,this.Die.kI()):(this.w1t(),this.ea.kI()),this.Bie=3)}TI(){3===this.Bie&&(this.Die.TI(),this.Bie=4)}o7t(){this.Lie.o7t()}Cn(){this.Bie=1,this.Lie.Cn()}async EI(){this.Lie&&(this.Lie.jn(),this.Wie(!1),this.yte.EI(),this.Bie=5,this.c$t&&(this.Lie.x7t(this.c$t.Ijt),this.c$t=void 0)),this.O9=!1,this.Vie=!1,En(this.Oie),this.u2t&&(this.w1t(),this.ea.ge()),En(this.Pie),await this.Die.EI(),await this.Z7t.er()}DD(){this.Die.BQt(),this.yte.BQt()}SI(){this.Z7t.SI(),this.Mie()}i2t(t){return!(t.type!==Ti.Cy||!this.Lie||!this.Lie.v7t(-1))&&(this.Lie.f7t().then(It),!0)}ge(){void 0!==this.Die.X7t&&(this.Z7t.ge(),this.Die.ge()),void 0!==this.yte.kte&&this.yte.ge()}be(){this.Z7t.be(),this.Die.be(),this.yte.be()}async K4t(t){const e=await I2.Vte(t,this.lW,this.$1t);if(!e.length){const t="Ads could not be loaded.";return this.$1t.wo(qh.n2t(new Gr(Fc.ADBLOCK,$s.FILE_NOT_FOUND),t)),void(this.O9&&!this.c$t&&0===this.Oie.length&&this.Uie())}this.Lie.k7t(e),this.$1t.wo(new Qs),this.u2t||this.ea.qR||this.Lie.p7t(this.ea.kR()),0!==this.Bie&&5!==this.Bie||this.Cn()}A7t(t){this.Oie.push(...t);for(const e of t)this.O9&&!this.u2t&&this.Fie()}async Fie(){if(2!==this.Bie&&!this.Gie){0,this.Gie=!0,this.Bie=2;const t=this.c$t;this.Hie(),this.c$t?(await this.c$t.Ijt.i7t(this.$1t),this.Zie()||(this.Gie=!1),this.$1t.wo(new S1(this.Xie(this.c$t))),await this.zie()):((null==t?void 0:t.Ijt.s7t())&&this.$1t.wo(new Lh(this.Xie(t))),this.Gie=!1,this.Bie=1,this.Uie())}}Uie(){this.w1t(),this.ea.ge(),this.ea.RR?this.ea.wo(new Te(this.ea.kR())):this.ea.kI()}Hie(){let t;if(this.c$t&&this.Zie())t=this.c$t.Ijt;else{if(0===this.Oie.length)return;t=this.Oie.shift()}if(!t)return;const e=t.Ic();e?this.c$t=e:(this.c$t&&(this.Lie.x7t(this.c$t.Ijt),this.c$t=void 0),this.c$t=void 0)}async zie(){const t=this.c$t?function(t){var e,i;const s=null==(i=t.iQt)||null==(e=i.Dqt)?void 0:e.Nqt();return void 0===s?void 0:new b0(s)}(this.c$t):void 0;if(t){if(!this.c$t)return;this.qie=t,this.Yie(this.c$t.eYt),this.Kie(dc.jKt);const e=this.qie.Ic();this.c$t.Ijt.s7t()&&(this.yte.j7t(),1===this.c$t.Ijt.Hut&&this.$1t.wo(new La(this.Xie(this.c$t)))),await this.rte(e)}else this.Bie=1,this.Gie=!1,this.c$t=void 0,this.Fie()}async rte(t){if(t){var e;let s=ji(t.Yqt),n=ji(t.Qqt);var i;const r=null!=(i=null==(e=t.jqt)?void 0:e.bYt)?i:[],o=r.length>0,h=this.c$t,a=this.Xie(h);if(t.Yqt){if(t.Yqt.td=h,void 0!==h.lnt.skipOffset){const e=M$.$jt(h.lnt.skipOffset,t.Yqt.ct);void 0!==e&&e<t.Yqt.ct&&(t.Yqt.pKt=e)}const e=a.UJt(t.Yqt,r,t.Jqt,h.lnt);this.yte.j7t(),this.A3t(),await this.Die.rte(e,t.lt,{width:this.ea.we.offsetWidth,height:this.ea.we.offsetHeight}),s=!0}if(t.Qqt){const e=t.Qqt.$qt[0];if(e.td=h,void 0!==h.lnt.skipOffset){const t=M$.$jt(h.lnt.skipOffset,this.ea.Sd());t&&(e.td.pKt=t)}const i=s?[]:r,o=a.GJt(e,i,t.Qqt,t.Jqt,h.lnt);s&&this.Die.Ate(),await this.yte.rte(o,t.lt,{width:this.ea.we.offsetWidth,height:this.ea.we.offsetHeight}),n=!0}if(s){this.Bie=3,this.Die.ge();const t=0===a.YBt;this.Vie=t,this.Z7t.TI(),this.Die.kI(),this.ea.TI(),this.ea.be(),this.A3t(),this.Die.vte()}n&&(this.Bie=3,this.yte.ge(),this.yte.vte()),(s||n||o)&&this.jie(t.Xqt),s||n||await this.Qie(),!s&&n&&(this.Zie()||this.Oie.length>0?this.Fie():(this.Uie(),this.c$t=h))}else null===t?await this.Qie():this.Wie(!0)}Qie(){const t=this.qie;return this.rte(t&&t.Ic())}Wie(t){this.Kie(dc.QKt),this.Jie(),this.Bie=1;const e=void 0!==this.c$t&&this.c$t.Ijt.t7t();if(this.Gie=!1,e)t&&(this.Bie=1,this.Fie());else{if(!this.u2t)return;this.ea.ge(),!this.ea.RR&&t&&this.ea.kI(),this.w1t()}}w1t(){this.$ie(),super.w1t()}$ie(){if(this.ea.RR&&(this.Bie=5),this.c$t){const t=this.c$t.Ijt;t.s7t()&&this.$1t.wo(new Lh(this.Xie(this.c$t))),this.Lie.x7t(t),this.c$t=void 0}}Yie(t){this.tse=this.tse.concat(t)}Jie(){this.tse=[]}ese(t){this.ea.we.appendChild(t)}Kie(t){for(const e of this.tse)e.FX===t&&Ir(e.eventURL)}jie(t){this.Die.O7t(dc.HKt);for(const e of t)Ir(e)}get Kst(){return this.c$t?this.Xie(this.c$t):null}get qst(){return this.c$t?[this.Die.X7t,this.yte.kte].filter(ji):[]}get jst(){const t=this.Oie.concat(this.Lie.jst.filter((t=>!t.zJt())));return Qe(t,(t=>t.Y8t.qc.filter((t=>!t.zJt()))))}get Qst(){return this.Lie.jst.map((t=>t.Y8t))}$st(t){const e=this._8t();for(const i of e)bt(i.sources,i.timeOffset)||t.u6(i,ja.Xst,!1)}_8t(){const t=[];for(const e of this.qst.concat(this.jst))t.push(e.lnt);const e=this.Oie.concat(this.Lie.jst.filter((t=>!t.zJt())));for(const i of e)for(const e of i.WJt)e.W||t.push(e.lnt);return t.push(...this.Pie),Qm(t)}Zie(){return!!this.c$t&&A0(this.c$t).some((t=>t.Yqt))}Xie(t){return t.Ijt.Y8t}Fte(){return this.ise}AI(){return this.Z7t.AI()}mR(){return this.Z7t.mR()}f2t(t){this.Lie.f2t(t)}async gn(){await super.gn(),this.ea.fn(Ti.ro,this.Mie),this.$1t.wK(this.Die.$1t),this.$1t.wK(this.yte.$1t),this.$1t.wK(this.Lie),this.Die.gn(),this.yte.gn(),await this.Z7t.gn()}constructor(t,e,i,s,n,r){super(t,e),this.Oie=[],this.Bie=0,this.tse=[],this.Gie=!1,this.O9=!1,this.Vie=!0,this.Pie=[],this.sse=t=>{t.type===Ti.ro&&this.Vie?this.Vie=!1:this.wo(t)},this.Mie=()=>{this.O9=!0},this.nse=async()=>(this.Bie=1,await this.Die.j7t(),this.rte(this.qie.Ic())),this.rse=async t=>{const e=new Gr(Fc.PLAYBACK,$s.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.$1t.wo(qh.n2t(e,t)),await this.Die.j7t(),this.rte(this.qie.Ic())},this.ose=()=>(this.yte.j7t(),this.rte(this.qie.Ic())),this.hse=t=>{const e=new Gr(Fc.PLAYBACK,$s.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.$1t.wo(qh.n2t(e,t)),this.yte.j7t(),this.rte(this.qie.Ic())},this.lW=r,this.Z7t=i,this.yte=new R2(this.hse,this.ose,this),this.Die=new E2(this.rse,this.nse,this.yte,s,this,t.Lu,i),this.ese(this.yte.I7t),this.ese(this.Die.I7t);const o=new C3(s,r,L3,n);this.Lie=new g2(this.ea,this,this.$1t,o),this.Die.iy(this.sse),this.yte.iy(this.Ds),this.$1t.nu(this.Die.$1t),this.$1t.nu(this.yte.$1t),this.$1t.nu(this.Lie),this.ise=new k0(this,this.ea),this.Lu.yn(Ka.pn,this.Ds),this.ea.yn(Ti.ro,this.Mie)}};Ih.Fg.IZ(new class{get X1t(){return O3.K1t}RZ(t){return t&&("string"!=typeof t.integration||t.integration===yu.DEFAULT||t.integration===yu.CSAI||t.integration===yu.THEO)}z1t(t,e,i){const s=new OI(t.we,i,t.lR,t.hst,t.pI,t.dst,t.zl);return new O3(t,e,s,i,t.hst,t.lR)}u6(t,e,i,s){i.d8t(t,e,s)}Xz(t){const e=X$(t.sources);if(!e)return;const i={integration:yu.CSAI,sources:e};"vast"===i.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===i.sources.type&&void 0!==t.timeOffset&&ct("Do not set timeOffset for VMAP ad sources. VMAP ads have their own offsets included.");const s=q$(t.timeOffset);void 0!==s&&(i.timeOffset=s);const n=q$(t.skipOffset);return void 0!==n&&(i.skipOffset=n),i}}),r(),r();var F3=class{Tj(){var t;this.I6||(null==(t=this.P8t)||t.initialize(),this.I6=!0)}get I7t(){return this.f0t}get ase(){return this.use.offsetHeight}get cse(){return this.use.offsetWidth}get lse(){return this.P8t}dse(t){"linear"===t?this.f0t.style.marginTop="0px":"nonlinear"===t&&(this.f0t.style.marginTop="-45px")}ge(){this.f0t.style.opacity="1",this.f0t.style.pointerEvents=""}be(){this.f0t.style.opacity="0",this.f0t.style.pointerEvents="none"}Hw(){var t;null==(t=this.P8t)||t.destroy(),this.P8t=void 0}constructor(t,e){this.P8t=void 0,this.I6=!1,this.Let=t;const i=h.createElement("div");i.className="theoplayer-ima-wrapper",Nh(i),i.style.zIndex="10",Z.Qs&&function(t,e){t.addEventListener(e,Dd)}(i,"mousedown"),e.appendChild(i);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.use=s,i.appendChild(s),this.f0t=i,this.P8t=new google.ima.AdDisplayContainer(this.use,this.Let)}};r(),r(),r();var V3=class{get oKt(){return this.fse.getAdId()}get n9t(){const t=this.fse.getAdPodInfo();if(void 0!==t)try{return{w6t:t.getAdPosition(),BJt:t.getMaxDuration(),_se:t.getPodIndex(),YBt:t.getTimeOffset(),y6t:t.getTotalAds(),vse:t.getIsBumper()}}catch(t){return}}get Uqt(){return this.fse.getAdSystem()}get gse(){return this.fse.getAdvertiserName()}get PYt(){var t;return null!=(t=this.fse.getApiFramework())?t:void 0}get jqt(){return this.AYt.map((t=>({NYt:t.getAdSlotId(),Dk:t.getContentType(),L2t:t.getContent(),Ti:t.getHeight(),ji:t.getWidth()})))}get Dk(){var t;return null!=(t=this.fse.getContentType())?t:void 0}get dYt(){return this.fse.getCreativeId()}get z9t(){return this.fse.getCreativeAdId()}get pse(){return this.fse.getDealId()}get ON(){return this.fse.getDescription()}get ct(){return this.fse.getDuration()}get ji(){return this.fse.getWidth()}get Ti(){return this.fse.getHeight()}get bKt(){var t;return null!=(t=this.fse.getMediaUrl())?t:void 0}get wse(){return this.fse.getMinSuggestedDuration()}get Z9t(){return this.fse.getSkipTimeOffset()}get yse(){return this.fse.getSurveyUrl()}get nH(){return this.fse.getTitle()}get G9t(){return this.fse.getTraffickingParameters()}get H9t(){return this.fse.getTraffickingParametersString()}get Jqt(){return this.fse.getUniversalAdIds().map((t=>({q9t:t.getAdIdRegistry(),Y9t:t.getAdIdValue()})))}get F8t(){return this.fse.getUiElements()}get X9t(){return this.fse.getVastMediaBitrate()}get W9t(){return this.fse.getVastMediaHeight()}get V9t(){return this.fse.getVastMediaWidth()}get L9t(){return this.fse.getWrapperAdIds()}get B9t(){return this.fse.getWrapperAdSystems()}get O9t(){return this.fse.getWrapperCreativeIds()}get j6t(){return this.fse.isLinear()}constructor(t){this.fse=t;const e=new google.ima.CompanionAdSelectionSettings;e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,e.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,e.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.AYt=t.getCompanionAds(0,0,e)}};function W3(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var U3=class extends Co{gI(t){var e;null==(e=this.VJt)||e.setVolume(t)}mI(){return this.VJt.getVolume()}p9t(){return this.VJt.getRemainingTime()}Hw(){En(this.Uc),this.Yu.fn(Ka.pn,this.bse),this.VJt.removeEventListener(google.ima.AdEvent.Type.LOADED,this.Ase),this.VJt.removeEventListener(W3(),this.forwardAdEventListener),this.VJt.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.VJt.destroy()}Cn(){this.VJt.start()}x8t(){this.VJt.resume()}TI(){this.VJt.pause()}DD(){this.VJt.skip()}EI(){this.VJt.stop()}e9t(){const t=this.VJt.getCurrentAd();if(t)return this.Sse(t)}N8t(){return this.VJt.getCuePoints()}Sse(t){let e=Fo(this.Uc,(e=>e.fse===t));return e||(e=new V3(t),this.Uc.push(e)),e}G8t(t){this.VJt.updateAdsRenderingSettings(X3(t))}constructor(t,e,i){super(),this.Uc=[],this.Ase=t=>{t.getAd().isLinear()?this.P8t.dse("linear"):this.P8t.dse("nonlinear")},this.bse=()=>{this.VJt.resize(this.P8t.cse,this.P8t.ase,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const e=t.getAd(),i=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:ls.n5t,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:ls.r5t,[google.ima.AdEvent.Type.CLICK]:ls.o5t,[google.ima.AdEvent.Type.DURATION_CHANGE]:ls.xy,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:ls.h5t,[google.ima.AdEvent.Type.STARTED]:ls.a5t,[google.ima.AdEvent.Type.IMPRESSION]:ls.u5t,[google.ima.AdEvent.Type.PAUSED]:ls.CZ,[google.ima.AdEvent.Type.RESUMED]:ls.c5t,[google.ima.AdEvent.Type.AD_PROGRESS]:ls.l5t,[google.ima.AdEvent.Type.AD_BUFFERING]:ls.d5t,[google.ima.AdEvent.Type.FIRST_QUARTILE]:ls.f5t,[google.ima.AdEvent.Type.MIDPOINT]:ls.OKt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:ls._5t,[google.ima.AdEvent.Type.COMPLETE]:ls.FKt,[google.ima.AdEvent.Type.USER_CLOSE]:ls.v5t,[google.ima.AdEvent.Type.LINEAR_CHANGED]:ls.m5t,[google.ima.AdEvent.Type.LOADED]:ls.g5t,[google.ima.AdEvent.Type.AD_CAN_PLAY]:ls.p5t,[google.ima.AdEvent.Type.AD_METADATA]:ls.w5t,[google.ima.AdEvent.Type.AD_BREAK_READY]:ls.y5t,[google.ima.AdEvent.Type.INTERACTION]:ls.b5t,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:ls.A5t,[google.ima.AdEvent.Type.SKIPPED]:ls.S5t,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:ls.T5t,[google.ima.AdEvent.Type.LOG]:ls.k5t,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:ls.E5t,[google.ima.AdEvent.Type.VOLUME_CHANGED]:ls.x5t,[google.ima.AdEvent.Type.VOLUME_MUTED]:ls.R5t}[t]}(t.type),s={type:i,date:new Date,snt:e?this.Sse(e):void 0,U6t:G1(i,t.getAdData())};this.wo(s)},this.forwardAdErrorEventListener=t=>{this.wo({date:new Date,snt:void 0,type:V1.I5t,U6t:{b9t:X1(t.getError())}})},this.VJt=t,this.P8t=e,this.Yu=i,this.Yu.yn(Ka.pn,this.bse),this.VJt.init(this.P8t.cse,this.P8t.ase,google.ima.ViewMode.NORMAL),this.VJt.addEventListener(google.ima.AdEvent.Type.LOADED,this.Ase),this.VJt.addEventListener(W3(),this.forwardAdEventListener),this.VJt.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}};r();var G3=class extends Ds{get Tse(){return this.kse}get I7t(){return this.f0t}ba(){return new H3(this.kse)}constructor(t,e){super("X8t"),this.kse=t,this.f0t=e}},H3=class extends pe{get adsManager(){return this.kse}constructor(t){super("adsmanagerloaded"),this.kse=t}},Z3=class extends Co{R8t(){var t;null==(t=this.I8t)||t.contentComplete()}async K4t(t,e,i){if(this.Ese)throw new g("Only one ImaAdsRequest can be made at a time.");if(!this.xse.lse)throw new g("AdDisplayContainer is not initialized.");this.I8t=new google.ima.AdsLoader(this.xse.lse),this.I8t.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.I8t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.Ese=new os,this.Rse=e,this.Ise=i;const s=new google.ima.AdsRequest;return t.u4t?s.adTagUrl=t.u4t:t.c4t&&(s.adsResponse=t.c4t),s.linearAdSlotWidth=t.s4t,s.linearAdSlotHeight=t.n4t,s.nonLinearAdSlotWidth=t.r4t,s.nonLinearAdSlotHeight=t.o4t,s.contentDuration=t.d4t,s.setAdWillAutoPlay(t.h4t),s.setAdWillPlayMuted(t.a4t),t.l4t&&(s.omidAccessModeRules=t.l4t),this.I8t.requestAds(s),this.Ese.Vb}Hw(){var t;void 0!==this.I8t&&(this.I8t.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.I8t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.I8t.destroy(),this.I8t=void 0),null==(t=this.Ese)||t.Fb("AdsLoader destroyed"),this.Ese=void 0}constructor(t,e){super(),this.onAdsManagerLoadedListener=t=>{if(this.Rse&&this.Ise&&this.Ese){var e;const i=X3(this.Ise),s=this.Rse,n=t.getAdsManager({get currentTime(){return s.SR},get duration(){return s.ct}},i),r=new U3(n,this.xse,this.Yu);this.wo(new G3(n,this.xse.I7t)),null==(e=this.Ese)||e.Ob(r),this.Ese=void 0}},this.onAdsManagerErrorListener=t=>{var e;const i={gb:t.getError().getMessage(),b6t:t.getError().getVastErrorCode(),vjt:t.getError().getErrorCode(),Aw:H1(t.getError().getType()),A6t:void 0};null==(e=this.Ese)||e.Fb(i),this.Ese=void 0},this.Yu=e,this.xse=t}};function X3(t){const e=new google.ima.AdsRenderingSettings;return e.enablePreloading=t.V8t,t.F8t&&(e.uiElements=t.F8t),e.mimeTypes=t.O8t,void 0!==t.U8t&&(e.playAdsAfterTime=t.U8t),void 0!==t.W8t&&(e.loadVideoTimeout=t.W8t),void 0!==t.U9t&&(e.bitrate=t.U9t),void 0!==t.U8t&&(e.playAdsAfterTime=t.U8t),e.restoreCustomPlaybackStateOnAdBreakComplete=!0,e}r();var z3=class extends Co{get SR(){return this.ea.hI?this.Cse:this.ea.kR()}get ct(){return this.ea.Sd()}get GR(){return this.ea.GR}get vI(){return this.ea.vI}er(){this.Cse=0}constructor(t){super(),this.ea=t,this.Cse=this.ea.kR(),this.ea.yn(Ti.sb,(()=>{this.ea.hI||(this.Cse=this.ea.kR()),this.wo(new ri(this.SR,void 0))}))}};c2.Fg.registerWebImaAdPlayerConstructor((function(t,e,i){h2(i);const s=a2(i)?t.AI():void 0,n=new F3(s,t.we),r=new Z3(n,t.Lu),o=new z3(t);return new u2(t,e,i,t.ust,n,r,o)})),r(),r(),r();var q3=class extends ec{get Pse(){return this.ea===this.Tst?this.v3t:this.Tst}dr(t,e,i,s,n){this.ea===this.v3t&&this.v3t.Dse(),(n||!s.qR||s.RR)&&this.ea.kI()}ER(t,e){}bR(t){}Nse(t,e){const i=t-this.v3t.Mse;return super.ER(i,e)}Lse(t){return super.bR(t)}AR(){return this.Tst.bt}tu(){return this.Tst.tu()}Sd(){return this.Tst.Sd()}oI(){const t=se.xn(this.Tst.oI()).kb(this.v3t.Mse);if(this.Bse())return t.ks();const e=se.xn(this.v3t.oI());let i=e;return $4(this.Tst)||(i=t.JL(e)),i=i.Sn(se.vB(0,this.kR())),i.ks()}kR(){return this.Ose(super.kR())}Ose(t){return this.ea===this.v3t?this.v3t.Fse+t:this.v3t.Mse+t}yR(){return this.Vse(super.kR())}Vse(t){return this.ea===this.v3t&&this.Wse?new Date(this.Wse.getTime()+1e3*t):this.Tst.wR}pR(){const t=se.xn(this.Tst.pR()).kb(this.v3t.Mse);if(this.Bse())return t.ks();const e=se.xn(this.v3t.pR());if(t.jn(t.V-1)<e.Cn(0))return e.ks();return t.JL(e).ks()}MI(t){switch(t.type){case Ti.sb:return this.wo(new ri(this.Ose(t.currentTime),t.currentProgramDateTime)),!0;case Ti.Xy:return this.wo(new K(this.Ose(t.currentTime))),!0;case Ti.ro:return this.wo(new H(this.Ose(t.currentTime))),!0;case Ti.Zy:return this.wo(new fl(this.Ose(t.currentTime))),!0;case Ti.Cy:return this.wo(new Te(this.Ose(t.currentTime))),!0;case Ti.jy:return this.wo(new L(this.Ose(t.currentTime))),!0;case Ti.Ky:return this.wo(new ha(this.Ose(t.currentTime))),!0;case Ti.zy:return this.wo(new Nu(this.Ose(t.currentTime),t.playbackRate)),!0;case Ti.ob:return this.Use?(this.wo(new rs(this.Ose(t.currentTime),t.volume)),!0):(this.Use=!0,!0);case Ti.Ry:return this.wo(new Ys(this.Ose(t.currentTime),t.readyState)),!0;case tl.ML:return this.wo(new ho(this.Ose(t.currentTime),t.readyState)),!0;case tl.LL:return this.wo(new QT(this.Ose(t.currentTime),t.readyState)),!0;case tl.BL:return this.wo(new jT(this.Ose(t.currentTime),t.readyState)),!0;case tl.OL:return this.wo(new KT(this.Ose(t.currentTime),t.readyState)),!0;case tl.tC:return this.wo(new au(this.Ose(t.currentTime),t.readyState)),!0;case tl.FL:return this.wo(new tu(this.Ose(t.currentTime))),!0;case tl.VL:return this.wo(new Wi(this.Ose(t.currentTime))),!0;case Ti.Iy:return this.wo(new NZ(this.Ose(t.currentTime),t.initDataType,t.initData)),!0}return super.MI(t)}async gn(){await super.gn(!0)}constructor(t,e,i){super(i),this.Use=!0,this.Tst=t,this.v3t=e,this.Wse=t.wR}};function Y3(t,e){e.GR=t.GR,e.vI=t.vI,e.KR=t.KR}r();var K3=class extends q3{dr(t,e,i,s,n){super.dr(t,e,i,s,n),this.Pse.TI();this.Gse(e,i).style.flex="1"}lr(t,e,i){this.Gse(e,i).style.flex="0"}constructor(t,e,i){super(t,e,i)}},j3=class extends K3{Bse(){return!0}Gse(t,e){return t}Hse(t,e){return e}ER(t,e){return super.Nse(t,e)}bR(t){return super.Lse(t)}constructor(t,e){super(t,e,t)}},Q3=class extends q3{Bse(){return!1}dr(t,e,i,s,n){super.dr(t,e,i,s,n),this.Use=!1,this.ea.Zse(),e.style.flex="1"}lr(t,e,i){this.ea.Xse(),e.style.flex="0"}Sd(){return this.ea.Sd()}constructor(t,e){super(t,e,e)}},J3=class extends K3{Bse(){return!1}Gse(t,e){return e}Hse(t,e){return t}dr(t,e,i,s,n){super.dr(t,e,i,s,n);for(const t of[e,i])t.style.transition=""}lr(t,e,i){super.lr(t,e,i)}constructor(t,e){super(t,e,e)}};r(),r();var $3=class extends Ds{ba(){return new t4(this.interstitial.Yst())}constructor(t){super("zse"),this.interstitial=t}},t4=class extends pe{constructor(t){super("interstitialupdate"),this.interstitial=t}},Ke=function(t){return t.SINGLE="SINGLE",t.DOUBLE="DOUBLE",t.LSHAPE_AD="LSHAPE_AD",t.LSHAPE_CONTENT="LSHAPE_CONTENT",t}({}),e4=class extends Co{get qse(){var t,e;const i=null!=(e=null!=(t=this.Yse)?t:this.DA)?e:this.QOt;return void 0!==i?this.FO+i:this.QO?this.QO:void 0}get ct(){const t=this.qse;return void 0===t?void 0:t-this.FO}get F2t(){var t;return null!=(t=this.V2t)?t:0}Kse(t){if(!this.ct)return;const e=(t-(this.FO+this.jse))/this.ct;e<this.F2t||(this.V2t=_.min(e,1),1===this.V2t&&(this.JR=!0))}tr(t){var e,i,s,n;this.DA=null!=(e=t.ct)?e:this.DA,this.QO=null!=(i=t.VO)?i:this.QO,this.Yse=null!=(s=t.Qse)?s:this.Yse,this.jse=null!=(n=t.Jse)?n:this.jse,this.$se(),this.wo(new $3(this))}$se(){void 0===this.DA&&void 0!==this.QO?this.DA=this.QO-this.FO:void 0===this.QO&&void 0!==this.DA&&(this.QO=this.FO+this.DA)}constructor(t){super(),this.jse=0,this.JR=!1,this.o=t.o,this.FO=t.FO,this.QO=t.VO,this.QOt=t.lBt,this.DA=t.ct,this.Yse=t.Qse,this.lvt=t.lvt,this.tne=t.tne,this.$se()}};r();var i4=class extends q3{Bse(){return!0}dr(t,e,i,s,n){super.dr(t,e,i,s,n),Y3(this.ea,this.Pse),this.Pse.GR=!0,t.style.backgroundImage="url('"+this.ene+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center",this.ine=this.Tst.nt.uC.filter((t=>t.xE===bh.Jn));for(const t of this.ine)t.xE=bh.Th;for(const t of[e,i])t.style.flex="1",t.style.borderWidth="20px",t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}lr(t,e,i){for(const t of[e,i])t.style.flex="0",t.style.borderWidth="0px";var s;for(const t of null!=(s=this.ine)?s:[])t.xE=bh.Jn;this.ine=void 0}PR(){return this.Tst.PR()||this.v3t.PR()}NR(){return this.Tst.NR()||this.v3t.NR()}nI(){return _.min(this.Tst.sI,this.v3t.sI)}kI(){this.Tst.kI(),this.v3t.kI()}TI(){this.Tst.TI(),this.v3t.TI()}constructor(t,e,i){super(t,e,e),this.ine=void 0,this.ene=i}};r();var s4=class extends q3{dr(t,e,i,s,n){super.dr(t,e,i,s,n);this.Hse(e,i).style.visibility="hidden",this.Pse.TI(),t.style.backgroundImage="url('"+this.ene+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center";const r=this.Gse(e,i);r.style.flex="1",r.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        ";for(const t of[e,i])t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}lr(t,e,i){const s=this.Gse(e,i);s.style.flex="0",s.style.transform="";this.Hse(e,i).style.visibility=""}constructor(t,e,i,s){super(t,e,i),this.ene=s}},n4=class extends s4{Bse(){return!0}Gse(t,e){return t}Hse(t,e){return e}constructor(t,e,i){super(t,e,t,i)}},r4=class extends s4{Bse(){return!1}Gse(t,e){return e}Hse(t,e){return t}constructor(t,e,i){super(t,e,e,i)}};function o4(t){const e=h.createElement("div"),i=h.createElement("div");return function(t,e){let i;for(;ji(i=t.firstChild);)e.appendChild(i)}(t,e),Id(t,"theo-ads-sgai-container"),Id(e,"theo-ads-sgai-content-player"),Id(i,"theo-ads-sgai-ad-player"),t.appendChild(e),t.appendChild(i),{contentElement:e,adElement:i}}function h4(t){const e=t.style;e.position="relative",e.backgroundColor="transparent",e.backgroundRepeat="no-repeat",e.backgroundAttachment="scroll",e.border="0 solid transparent",e.borderWidth="0px",e.flex="0"}function a4(t){const e=t.style;e.display="",e.backgroundColor="",e.backgroundRepeat="",e.backgroundAttachment="",e.border="",e.borderWidth="",e.flex="",e.transform="",e.transition="",e.backgroundImage="",e.backgroundSize="",e.backgroundPosition="",e.alignItems="",e.position=""}function u4(t){return!Sl(t.Pyt,"theo-ads://dai.break")}r(),r(),r(),r();var c4=class extends ec{},l4=class extends c4{dr(t,e){t.style.flex="1"}lr(t){t.style.flex="0"}constructor(t){super(t)}};r();var d4=class extends c4{dr(t,e){e.style.backgroundImage="url('"+this.ene+"')",e.style.backgroundSize="contain",e.style.backgroundPosition="center",t.style.flex="1",t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", "),t.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        "}lr(t){t.style.flex="0",t.style.transform=""}constructor(t,e){super(t),this.ene=e}};r();var f4=class extends Ds{ba(){return new _4(this.interstitial.Yst())}constructor(t){super("sne"),this.interstitial=t}},_4=class extends pe{constructor(t){super("interstitialbegin"),this.interstitial=t}};function v4(t){return{get id(){return t.o},get duration(){return t.ct},get startTime(){return t.FO},get type(){return"adbreak"},get layout(){return function(t){switch(t){case Ke.SINGLE:return"single";case Ke.DOUBLE:return"double";case Ke.LSHAPE_CONTENT:case Ke.LSHAPE_AD:return"l-shape"}}(t.nne)},get ads(){return t.qc.map((t=>t.Yst()))},get backdropUri(){return t.rne}}}r(),r(),r(),r();var m4=function(t){return t.image="image",t}({}),g4=function(t){return t.png="png",t.svg="svg",t}({}),p4=class extends e4{get Aw(){return"overlay"}get GYt(){return this.hne}get ane(){return this.une}tr(t){var e,i;this.une=null!=(e=t.imageUrl)?e:this.une,this.hne=null!=(i=t.clickThrough)?i:this.hne,super.tr(t)}Yst(){var t;return null!=(t=this.su)?t:this.su=function(t){return{get type(){return"overlay"},get id(){return t.o},get duration(){return t.ct},get startTime(){return t.FO},get clickThrough(){return t.GYt},get imageUrl(){return t.ane},get position(){return function(t){return{get top(){return t.E7},get bottom(){return t.k7},get left(){return t.T7},get right(){return t.S7}}}(t.do)},get size(){return function(t){return{get width(){return t.ji},get height(){return t.Ti}}}(t.Pb)}}}(this)}constructor(t){super(t),this.cne=t.Aw,this.do=t.do,this.Pb=t.Pb,this.lne=t.lne,this.dne=t.dne,this.ejt=t.ejt,this.hne=t.fne}};r();var w4=class extends e4{get Aw(){return"adbreak"}get qc(){return this.Uc}tr(t){var e;t.ad&&this.Uc.push(t.ad),this.rne=null!=(e=t.backdropUri)?e:this.rne,super.tr(t)}Yst(){var t;return null!=(t=this.su)?t:this.su=v4(this)}constructor(t){super(t),this.Uc=[],this.Pyt=t.Pyt,this.nne=t.nne||Ke.SINGLE,this._ne=t._ne,this.vne=t.vne,this.rne=t.mne}},y4="com.theoplayer.theoads.interstitial",b4="com.theoplayer.theoads.overlay",A4=class{get gne(){return this.pne}wne(t){this.yne=new EventSource(t),this.yne.addEventListener("adbreak",this.bne),this.yne.addEventListener("streaminfo",this.Ane)}Sne(t){if(!ms(this.Tne,t)){this.Tne.push(t);for(const e of t.uC)this.kne(e);t.yn(Se.OI,this.Hn),t.yn(Se.VI,this.qn)}}Ene(t){if(ms(this.Tne,t)){we(this.Tne,t),t.fn(Se.OI,this.Hn),t.fn(Se.VI,this.qn);for(const e of t.uC)this.xne(e)}}kne(t){!this.Rne&&function(t){return t.Lt===hs.$V&&t.Aw===Lr.DATE_RANGE}(t)&&this.Ine!==t?this.Cne(t):this.Rne&&function(t){return t.Lt===hs.$V&&t.Aw===Lr.ID3}(t)&&this.Pne!==t&&this.Dne(t)}xne(t){this.Ine===t?this.Cne(void 0):this.Pne===t&&this.Dne(void 0)}Cne(t){const e=this.Ine;if(void 0!==e){if(e.L)for(const t of e.L.uC)this.Nne(t);e.fn(No.UI,this.Mne),e.fn(No.XI,this.Lne),e.fn(No.qI,this.Bne),e.fn(No.HI,this.One),e.xE=bh.NC}if(this.Ine=t,void 0!==t){if(t.L)for(const e of t.L.uC)this.Fne(e);t.yn(No.UI,this.Mne),t.yn(No.XI,this.Lne),t.yn(No.qI,this.Bne),t.yn(No.HI,this.One),t.xE=bh.NC}}Dne(t){const e=this.Pne;if(void 0!==e){if(e.L)for(const t of e.L.uC)this.Nne(t);e.fn(No.UI,this.Vne),e.fn(No.qI,this.Bne),e.fn(No.HI,this.One),e.xE=bh.NC}if(this.Pne=t,void 0!==t){if(t.L)for(const e of t.L.uC)this.Wne(e);t.yn(No.UI,this.Vne),t.yn(No.qI,this.Bne),t.yn(No.HI,this.One),t.xE=bh.NC}}Une(t){try{var e,i;const s=JSON.parse(t.data),n=s.networkCode,r=null==(e=s.assetKeys)?void 0:e[0];this.DMt.Gne(n,r),null==(i=this.yne)||i.removeEventListener("streaminfo",this.Ane)}catch(t){Ms.Fp("Error parsing the Server sent stream info",t)}}Hne(t){const e=this.DMt.wR;if(void 0!==e)try{const n=JSON.parse(t.data);var i;const r=null!=(i=n.podDuration)?i:n.adBreakDuration;if(void 0===r)return void Ms.Fp("Tried to schedule an ad break without knowing the duration");const o=(Date.parse(n.startDate)-e.getTime())/1e3;if(o<=-r)return;const h="theo-ads://dai.break/?d="+r,a=this.DMt.kR()+o,u=n.networkCode,c=n.assetKey,l=n.podId?x(n.podId):void 0;var s;const d=new w4({o:t.id,FO:a,Pyt:null!=(s=n.assetURI)?s:h,nne:this.Zne||Ke[n.layout],_ne:u,vne:c,lBt:r,tne:l,mne:n.backdropURI,lvt:n.startPTS});this.Xne(d,void 0)}catch(t){Ms.Fp("Error parsing the Server sent event",t)}else Ms.Fp("Tried to schedule an ad break without knowing the Program Date Time of the player")}Fne(t){if((t.uBt===y4||t.uBt===b4)&&t.dBt["X-ASSET-URI"])switch(t.uBt){case b4:try{var e;const i=atob(t.dBt["X-COM-THEOPLAYER-THEOADS-OVERLAY-PROPERTIES"]),s=JSON.parse(i),n=m4[s.type],r=this.DMt.zne(t.FO),o=isFinite(t.VO)?this.DMt.zne(t.VO):void 0,h=new p4({o:t.o,Aw:n||m4.image,FO:r,VO:o,ct:t.ct,lBt:t.lBt,do:T4(s.position),Pb:k4(s.size),lne:s.opacity,dne:S4(s.gamProperties),ejt:null==(e=s.resourceURI)?void 0:e.map((t=>function(t){const e=g4[t.type];let i=t.default;Z.Qs&&t.phone?i=t.phone:Z.vg&&t.tv&&(i=t.tv);return{Aw:e,Pyt:i}}(t))),fne:s.clickThroughURI});this.Xne(h,t)}catch(t){Ms.Fp(t)}break;case y4:{const e=t.dBt["X-RESUME-OFFSET"],n=this.qne||t.dBt["X-ASSET-URI"],r=Ms.Nh(n);var i;const o=null!=(i=r.searchParams.get("n"))?i:void 0;var s;const h=null!=(s=r.searchParams.get("k"))?s:void 0,a=this.DMt.zne(t.FO),u=isFinite(t.VO)?this.DMt.zne(t.VO):void 0;let c;(function(t){return Sl(t,"theo-ads://dai.break")})(n)&&(c=function(t){const e=t.split("?")[1],i={},s=new URLSearchParams(e);return i.d=Number(s.get("d"))||void 0,i.k=s.get("k")||void 0,i.n=s.get("n")||void 0,i.p=Number(s.get("p"))||void 0,i}(n));const l=new w4({o:t.o,FO:a,Pyt:n,nne:this.Zne||Ke[t.dBt["X-COM-THEOPLAYER-THEOADS-LAYOUT"]]||Ke.SINGLE,_ne:o,vne:h,mne:t.dBt["X-COM-THEOPLAYER-THEOADS-BACKDROP"],VO:u,ct:t.ct,lBt:t.lBt,tne:null==c?void 0:c.p,Qse:void 0!==e?Number(e):void 0});this.Xne(l,t),this.Yne=l}}}Wne(t){const e=t.U;if(!function(t){return"GEO"===t.id||"GEOB"===t.id}(e)||!function(t){return"Anvatos"===t.description&&"application/json"===t.mimeType}(e))return;const i=jg(new DataView(e.data),new Ri),s=new cu(i),n=s.get("type");if("cue"===n){let e=Number(s.get("duration"))/1e3||void 0;const i=new cu(s.get("payload")),n=Number(i.get("dur"))||void 0,r=Number(i.get("s_bd"))||void 0;if(void 0!==n?e=n:void 0!==r&&(e=r/10),!e)return void 0;const o="theo-ads://dai.break/?d="+e,h=Number(s.get("pts"))||void 0,a=this.DMt.zne(t.FO),u=new w4({o:this.qne||t.o,FO:a,Pyt:o,nne:this.Zne||Ke.SINGLE,lBt:e,lvt:h});this.Xne(u,t)}else if("cue_end"===n){const e=this.Yne;e&&e.tr({ct:this.DMt.zne(t.FO)-e.FO})}}Kne(t){const e=this.jne.get(t.xC);e&&this.DMt.Qne(e.FO)}Jne(t){for(const e of this.pne)if(t.o===e.o&&t.Aw===e.Aw)return!0;return!1}Xne(t,e){var i;const s=t.FO+(null!=(i=t.ct)?i:1/0);this.Jne(t)||this.DMt.kR()>=s||(this.pne.push(t),e&&this.jne.set(e.xC,t),this.DMt.Xne(t))}$ne(t){const e=this.jne.get(t.xC);if(void 0===e)return;const i=t.dBt["X-RESUME-OFFSET"],s=isFinite(t.VO)?this.DMt.zne(t.VO):void 0;e.tr({ct:t.ct,VO:s,Qse:void 0!==i?Number(i):void 0})}Nne(t){this.tre(t)}tre(t){void 0!==this.jne.get(t.xC)&&this.jne.delete(t.xC)}ere(t){t.forEach((t=>this.ire(t)))}ire(t){we(this.pne,t)}er(){var t,e,i;this.Yne=void 0,this.Cne(void 0),this.Dne(void 0);for(const t of this.Tne.slice())this.Ene(t);En(this.Tne),En(this.pne),this.jne.clear(),null==(t=this.yne)||t.removeEventListener("adbreak",this.bne),null==(e=this.yne)||e.removeEventListener("streaminfo",this.Ane),null==(i=this.yne)||i.close(),this.yne=void 0}gn(){this.er()}constructor(t){this.Rne=!1,this.pne=[],this.jne=ea(),this.Tne=[],this.Hn=t=>{this.kne(t.Ht)},this.qn=t=>{this.xne(t.Ht)},this.Mne=t=>{this.Fne(t.BO)},this.Vne=t=>{this.Wne(t.BO)},this.Bne=t=>{this.Kne(t.BO)},this.One=t=>{this.Nne(t.BO)},this.Lne=t=>{this.$ne(t.BO)},this.bne=t=>{this.Hne(t)},this.Ane=t=>{this.Une(t)},this.DMt=t}};function S4(t){if(!t)return;let e=t.sz.default;return Z.Qs&&t.sz.phone?e=t.sz.phone:Z.vg&&t.sz.tv&&(e=t.sz.tv),{sre:t.iu,nre:e}}function T4(t){let e,i,s,n;return t.top&&t.top>=0&&t.top<=100?e=t.top:t.bottom&&t.bottom>=0&&t.bottom<=100?i=t.bottom:e=10,t.left&&t.left>=0&&t.left<=100?s=t.left:t.right&&t.right>=0&&t.right<=100?n=t.right:s=10,{E7:e,k7:i,T7:s,S7:n}}function k4(t){let e,i;return e=t.width&&t.width>=0&&t.width<=100?t.width:10,i=t.height&&t.height>=0&&t.height<=100?t.height:10,{ji:e,Ti:i}}r();var E4=class extends Co{get rre(){return this.ea.rre.map((t=>t.Yst()))}get ore(){return this.ea.ore.map((t=>t.Yst()))}hre(t){this.ea.are(t)}get ka(){var t;return null!=(t=this.su)?t:this.su=function(t){return{get currentInterstitials(){return t.rre},get scheduledInterstitials(){return t.ore},replaceAdTagParameters(e){t.hre(e)},addEventListener(e,i){t.yn(e,i)},removeEventListener(e,i){t.fn(e,i)}}}(this)}constructor(t){super(),this.ea=t}};r(),r();var Xo=Promise;r();var x4=class extends Zi{ure(t){this.Uc.push(t)}get JR(){return this.lre.JR}get tQt(){return I.Lst}get BJt(){var t;return null!=(t=this.lre.ct)?t:-1}get YBt(){return this.lre.FO}get lJt(){}get dre(){return this.lre}constructor(t){var e;super(t.FO),this.lre=t,this.OJt=null!=(e=this.lre.ct)?e:-1}},Ft=function(t){return t[t.GOOGLE=0]="GOOGLE",t[t.DEFAULT=1]="DEFAULT",t}({}),R4=class extends Co{get WJt(){return this.l$t}get _re(){return this.vre}get Kst(){return this.c$t}get j9t(){return this.t$t}mre(){this.wre()}Xne(t){const e=new x4(t);this.l$t.push(e)}ire(t){const e=this.c3t(t);we(this.l$t,e)}c3t(t){return Fo(this.l$t,(e=>e.dre===t))}yre(){this.v3t.yn(Ti.Vy,this.Are),this.v3t.yn(tl.LL,this.Sre),this.v3t.yn(Ti.Cy,this.Tre),this.v3t.yn(Ti.sb,this.v6)}wre(){this.v3t.fn(Ti.Vy,this.Are),this.v3t.fn(tl.LL,this.Sre),this.v3t.fn(Ti.Cy,this.Tre),this.v3t.fn(Ti.sb,this.v6)}vd(t){var e;null==(e=this.vre)||e.Kse(this.Ose(t.currentTime))}async kre(t,e,i,s){const n={stack:[],error:void 0,hasError:!1};try{var r;this.yre(),null==(r=this.fW)||r.Yw();const o=zs(n,da.Qw([e]),!1);this.fW=o;const h=o.Vw;return J(h),await this.v3t.xa(NC(t),h),Z.iu&&Z.$m&&(this.v3t.kI(),this.v3t.TI()),i&&this.v3t.ER(i),s&&this.v3t.kI(),await Xo.race([this.vy("aderror",h).then(Xo.reject),this.vy("adloaded",h).then((()=>Xo.resolve()))])}catch(t){n.error=t,n.hasError=!0}finally{lo(n)}}Td(t){this.vre&&(this.vre.Kse(t),this.vre.JR=!0,this.ire(this.vre),this.vre=void 0),this.t$t&&(this.b3t.wo(new xn(this.t$t,t)),this.t$t=void 0),this.c$t&&(this.b3t.wo(new Lh(this.c$t)),this.c$t=void 0),this.wre()}Ose(t){var e,i;return(null!=(i=null==(e=this.vre)?void 0:e.FO)?i:0)+t}async er(){var t;null==(t=this.fW)||t.Yw(),this.fW=void 0,this.wre(),this.l$t=[],this.t$t=void 0,this.c$t=void 0,this.vre=void 0}async gn(){await this.er(),await this.Ere.gn()}constructor(t,e,i){super(),this.b3t=new Ju,this.l$t=[],this.v6=t=>{this.vd(t)},this.Tre=()=>{this.wre()},this.Are=()=>{this.wo(new pe("adloading"))},this.Sre=()=>{this.wo(new pe("adloaded"))},this.v3t=t,this.Ere=e,this.l$t=i,this.Ere.xre(this),this.b3t=e.$1t}};r();var I4=class{xre(t){this.Rre=t}get $1t(){return this.b3t}get u2t(){var t;return void 0!==(null==(t=this.Rre)?void 0:t.Kst)}get K1t(){return I.Lst}get qst(){var t;return(null==(t=this.Rre)?void 0:t.j9t)?[this.Rre.j9t]:[]}get Kst(){var t,e;return null!=(e=null==(t=this.Rre)?void 0:t.Kst)?e:null}get jst(){return this.Rre?Qe(this.Rre.WJt,(t=>{var e;const i=t.qc;if(t===(null==(e=this.Rre)?void 0:e.Kst)&&void 0!==this.Rre.j9t){const t=i.indexOf(this.Rre.j9t);if(t>=0)return i.slice(t+1)}return t.JR?[]:i})):[]}get Qst(){return this.Rre?this.Rre.WJt.filter((t=>{var e;return t===(null==(e=this.Rre)?void 0:e.Kst)||!t.JR})):[]}DD(){}$st(t){}gn(){return this.Rre=void 0,Promise.resolve(void 0)}constructor(){this.b3t=new Ju}};r(),r(),r(),r();var C4=class extends cs{ba(){return zo(this)}get tQt(){return I.Lst}constructor(t){super(t,function(t){return t===Ke.LSHAPE_CONTENT?Ns.E2t:Ns.Ejt}(t.dre.nne)),t.ure(this)}};var P4=class extends C4{$Jt(){return this.Ire.getAdSystem()}i$t(){return this.td.dre.Pyt}get o(){return this.Ire.getAdId()}get ct(){return this.Ire.getDuration()}get GYt(){var t,e;return null==(e=this.Ire)||null==(t=e.ad)?void 0:t.clickThroughUrl}get dYt(){return this.Ire.getCreativeId()}get pKt(){return this.Ire.getSkipTimeOffset()}constructor(t,e){super(t),this.Ire=e}};r();var D4=class extends C4{constructor(t){super(t),this.N2t=!0,this.DA=t.OJt}},N4="ott_placement",M4="theoads_slot",L4="urn:google:dai:2018",B4=class extends R4{get Cre(){return Ft.GOOGLE}async Pre(t,e,i,s){t&&e&&(t!==this.Dre||e!==this.Nre)?await this.dJ(t,e,i,s):i!==this.Mre&&this.are(i)}async dJ(t,e,i,n){if(void 0===this.Lre){var r,o;if(void 0===(null==(o=s.google)||null==(r=o.ima)?void 0:r.dai))throw new g("IMA DAI SDK missing for THEOads");this.Lre=new google.ima.dai.api.StreamManager(this.v3t.we.querySelector("video"),this.Bre)}this.Dre=t,this.Nre=e,this.Mre=i;const h=this.Lre;this.Ore(),h.reset();const a=new google.ima.dai.api.PodStreamRequest;a.networkCode=this.Dre,a.customAssetKey=this.Nre,a.adTagParameters=this.Mre,this.Fre&&(a.streamActivityMonitorId=this.Fre),a.format="hls";const u=this.Vre([google.ima.dai.api.StreamEvent.Type.STREAM_INITIALIZED,google.ima.dai.api.StreamEvent.Type.ERROR]).then((t=>{if(t.type===google.ima.dai.api.StreamEvent.Type.ERROR)throw new g("DAI stream request failed");this.Wre=t.getStreamData(),this.Ure()}));this.Lre.requestStream(a),await ou(u,n)}Vre(t,e){return new Xo(((i,s)=>{var n;if(e&&e.Bw)return s(new Bu);const r=t=>{h(),i(t)},o=()=>{h(),s(new Bu)},h=()=>{var i;null==(i=this.Lre)||i.removeEventListener(t,r),e&&e.Ow(o)};null==(n=this.Lre)||n.addEventListener(t,r),e&&e.Fw(o)}))}are(t){var e;this.Mre=t,this.Gre=!this.Mre[N4],null==(e=this.Lre)||e.replaceAdTagParameters(t)}async Hre(t){var e,i;return(null==(e=this.vre)?void 0:e.tne)&&!S(this.vre.tne)?this.vre.tne:this.Zre&&(null==(i=this.vre)?void 0:i.lvt)?await Ci((()=>this.Xre()),t,4,500,5e3):void 0}async Xre(){const t=this.Zre+"/"+this.Dre+"/"+this.Nre+"/"+this.vre.lvt+".json",e=new ke({Gu:t,Yk:Rr.yk,yE:xe.GET,bE:1e3});let i;try{i=await this.v3t.lR.Kk(e)}catch(t){throw new Gr(Fc.NETWORK,$s.UNKNOWN_AD_RESPONSE,"The ad's PodId could not be loaded.")}if(!_h(i))throw new Gr(Fc.NETWORK,$s.UNKNOWN_ERROR,"Something went wrong while requesting JSON from server.");const s=await i.qk();if(s)return s.podid}async zre(t,e,i,s){void 0===s&&(s=!1);const n=await this.qre(t,e,i);return this.kre({sources:{src:n}},i,void 0,s)}async qre(t,e,i){this.vre=t;const s=t._ne,n=t.vne;!function(t,e,i){const s=new cu(t.cust_params);s.set(M4,function(t){switch(t){case Ke.DOUBLE:return"double";case Ke.SINGLE:return"single";case Ke.LSHAPE_AD:case Ke.LSHAPE_CONTENT:return"l-shape"}}(e)),t.cust_params=s.toString(),i&&(t[N4]=function(t){switch(t){case Ke.DOUBLE:return"3";case Ke.SINGLE:return"99";case Ke.LSHAPE_AD:case Ke.LSHAPE_CONTENT:return"4"}}(e))}(this.Mre,t.nne,this.Gre),await this.Pre(s,n,this.Mre,i);const r=Ms.Nh(t.Pyt),o=Number(r.searchParams.get("d")),h=_.floor(1e3*_.min(o,t.qse-e)),a=await this.Hre(i);if(!a)throw new g("Something went wrong with retrieving the PodID from the server.");return this.Wre.getStandalonePodManifestUrl((()=>a),h)}yre(){this.v3t.yn(Ti.Cy,this.Yre),this.v3t.nt.yn(Se.OI,this.Hn),super.yre()}wre(){super.wre(),this.v3t.fn(Ti.Cy,this.Yre),this.v3t.nt.fn(Se.OI,this.Hn)}Ure(){var t;null==(t=this.Lre)||t.addEventListener([google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.RESUMED],this.Kre)}Ore(){var t;null==(t=this.Lre)||t.removeEventListener([google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.RESUMED],this.Kre)}Td(t){super.Td(t),this.jre=void 0}async er(){var t;await super.er(),this.Ore(),null==(t=this.Lre)||t.reset(),this.Lre=void 0,this.Wre=void 0,this.Fre=void 0,this.Nre=void 0,this.Dre=void 0,this.Gre=!0}async gn(){var t;await super.gn(),null==(t=this.Qre)||t.gn()}constructor(t,e,i,s,n,r,o){super(t,e,s),this.Gre=!0,this.Yre=()=>{this.Td(this.Ose(this.v3t.kR()))},this.Hn=t=>{const e=t.Ht;if(e.Lt===hs.$V&&!(e.Aw!==Lr.ID3&&e.Aw!==Lr.EVENT_STREAM||e.Aw===Lr.EVENT_STREAM&&e.MC!==L4)){if(e.yn(No.UI,this.Jre),e.yn(No.HI,this.One),e.L)for(const t of e.L.uC)this.Jre(new Ts(t));e.xE=bh.NC,this.Qre=e}},this.Jre=t=>{t.BO.yn(T.sO,this.$re)},this.One=t=>{t.BO.fn(T.sO,this.$re)},this.$re=t=>{var e,i;if(this.Wre)if((null==(e=this.Qre)?void 0:e.Aw)===Lr.ID3){const e=t.BO.U;var s;if(WL(e))if(this.jre!==e.text)this.jre=e.text,null==(s=this.Lre)||s.processMetadata("ID3",e.text,t.BO.FO)}else if((null==(i=this.Qre)?void 0:i.Aw)===Lr.EVENT_STREAM){var n;const e=t.BO.U;null==(n=this.Lre)||n.processMetadata(L4,e,t.BO.FO)}},this.Kre=t=>{switch(this.c$t&&(this.c$t.OJt=this.v3t.Sd()-this.v3t.kR()),t.type){case google.ima.dai.api.StreamEvent.Type.ERROR:this.b3t.wo(new qh(Fc.GENERAL));break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED:this.c$t=this.c3t(this.vre),this.b3t.wo(new La(this.c$t)),this.toe=Ms.Ug(this.eoe,250);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:Ms.Wg(this.toe);break;case google.ima.dai.api.StreamEvent.Type.STARTED:{var e;const i=t.getAd();this.t$t=new P4(this.c$t,i),null==(e=this.vre)||e.tr({ad:this.t$t}),this.b3t.wo(new cn(this.t$t,this.Ose(this.v3t.kR())));break}case google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE:this.b3t.wo(new Is(this.t$t,this.Ose(this.v3t.kR())));break;case google.ima.dai.api.StreamEvent.Type.MIDPOINT:this.b3t.wo(new ks(this.t$t,this.Ose(this.v3t.kR())));break;case google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE:this.b3t.wo(new Cs(this.t$t,this.Ose(this.v3t.kR())));break;case google.ima.dai.api.StreamEvent.Type.COMPLETE:this.b3t.wo(new xn(this.t$t,this.Ose(this.v3t.kR()))),this.t$t=void 0;break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:if(!this.c$t)break;this.c$t.OJt>1&&this.eoe()}},this.eoe=()=>{var t;this.t$t=new D4(this.c$t),null==(t=this.vre)||t.tr({ad:this.t$t}),this.b3t.wo(new cn(this.t$t,this.Ose(this.v3t.kR())))},this.Bre=i,this.Mre=null!=n?n:{},this.Gre=!this.Mre[N4],this.Fre=r,this.Zre=o}};var O4=class{get rre(){return this.ioe}get soe(){return this.noe}get roe(){return this.Mre}set roe(t){this.Mre=t}async ooe(t){this.ioe.push(t),this.noe.style.display="";const e=h.createElement("div");e.className="theoplayer-theoads-overlay",e.style.display="",this.hoe.set(t.o,e);const i=h.createElement("a"),s=await this.aoe(t);if(s.clickThroughURI&&(this.noe.style.zIndex="11",i.href=s.clickThroughURI,i.target="qu",i.setAttribute("rel","noopener"),i.addEventListener("mousedown",this.F7t),i.addEventListener("touchend",this.F7t)),t.cne===m4.image&&(i.style.backgroundImage="url("+s.resourceURI+")",i.style.backgroundSize="contain",i.style.backgroundPosition="center",i.style.backgroundRepeat="no-repeat",s.impressionURI)){const t=h.createElement("img");t.src=s.impressionURI,t.style.display="none",i.appendChild(t)}Nh(i),e.appendChild(i),e.style.cssText=this.uoe(t),this.noe.appendChild(e)}coe(t){const e=this.hoe.get(t.o);e&&(this.noe.contains(e)&&this.noe.removeChild(e),this.hoe.delete(t.o),0===this.hoe.size&&(this.noe.style.display="none"),we(this.ioe,t))}loe(){this.hoe.forEach(((t,e)=>{this.noe.contains(t)&&this.noe.removeChild(t)})),this.hoe.clear(),this.ioe=[]}uoe(t){const e=t.do;let i=0,s=1;if(this.noe.clientWidth>0&&this.noe.clientHeight>0){const t=this.ea.fI/this.ea.cI,e=this.soe.clientWidth,n=this.soe.clientHeight,r=e/t,o=(n-r)/2;i=0===n?0:_.floor(o/n*100),s=0===n?1:_.floor(100*(1-(n-r)/n))/100}let n="position:absolute;zIndex:10;";if(e.T7&&(n+="left:"+e.T7+"%;"),e.S7&&(n+="right:"+e.S7+"%;"),e.E7){n+="top:"+(e.E7*s+i)+"%;"}if(e.k7){n+="bottom:"+(e.k7*s+i)+"%;"}const r=t.Pb;return r.ji&&(n+="width:"+r.ji+"%;"),r.Ti&&(n+="height:"+r.Ti*s+"%;"),t.lne&&t.lne>0&&t.lne<=100&&(n+="opacity:"+t.lne/100+";"),n}async doe(t){if(!t)return;const e=this.foe(t);return e?await this._oe(e,this.lW):void 0}async aoe(t){const e={resourceURI:""},i=await this.doe(t.dne);if(i)e.resourceURI=i.image,e.impressionURI=i.impression;else if(t.ejt){const i=Fo(t.ejt,(t=>t.Aw===g4.svg));i&&(e.resourceURI=i.Pyt);const s=Fo(t.ejt,(t=>t.Aw===g4.png));s&&(e.resourceURI=s.Pyt)}var s;return e.clickThroughURI=null!=(s=null==i?void 0:i.clickThrough)?s:t.GYt,t.tr({imageUrl:e.resourceURI,clickThrough:e.clickThroughURI}),e}foe(t){const e=new cu(this.Mre);return e.set("iu",t.sre),e.set("sz",t.nre),e.set("c",String(this.voe)),e.get(N4)||e.set(N4,"5"),"https://securepubads.g.doubleclick.net/gampad/adx?"+e.toString()}async _oe(t,e){const i=new ke({Gu:t,Yk:Rr.yk,yE:xe.GET});try{const t=await e.Kk(i);return await t.qk()}catch(t){throw new Gr(Fc.NETWORK,$s.UNKNOWN_AD_RESPONSE,"The ad source could not be loaded.",t)}}er(){this.loe(),this.noe.style.display="none"}constructor(t,e,i){this.ioe=[],this.hoe=xu(),this.voe=(new Date).getTime(),this.moe=()=>{this.ioe.forEach((t=>{this.hoe.get(t.o).style.cssText=this.uoe(t)}))},this.F7t=t=>{t.stopPropagation()},this.ea=t,this.ea.yn(Ka.pn,this.moe);const s=h.createElement("div");s.style.display="none",s.className="theoads-image-overlays-container",e.appendChild(s),Nh(s),this.noe=s,this.goe=i,this.lW=Ms.lR}};r();function F4(t){return t&&t.integration===yu.THEOADS}Ih.Fg.IZ(new class{get X1t(){return I.Lst}RZ(t){return F4(t)}z1t(t,e,i){}u6(t,e,i,s){}Xz(t){const e={integration:yu.THEOADS,adTagParameters:V(t.adTagParameters)?t.adTagParameters:{},useId3:Boolean(t.useId3)};return Yt(t.networkCode)&&(e.networkCode=ze(t.networkCode)),Yt(t.customAssetKey)&&(e.customAssetKey=ze(t.customAssetKey)),Yt(t.backdropDoubleBox)&&(e.backdropDoubleBox=ze(t.backdropDoubleBox)),Yt(t.backdropLShape)&&(e.backdropLShape=ze(t.backdropLShape)),Yt(t.overrideLayout)&&(e.overrideLayout=function(t){switch(t){case"single":case"l-shape":case"double":case"single-if-mobile":return t;default:return}}(t.overrideLayout)),Yt(t.overrideAdSrc)&&(e.overrideAdSrc=ze(t.overrideAdSrc)),Yt(t.retrievePodIdURI)&&(e.retrievePodIdURI=ze(t.retrievePodIdURI)),Yt(t.sseEndpoint)&&(e.sseEndpoint=ze(t.sseEndpoint)),Yt(t.streamActivityMonitorId)&&(e.streamActivityMonitorId=ze(t.streamActivityMonitorId)),e}}),r();var V4=class extends pe{constructor(t){super("addinterstitial"),this.interstitial=t}};r();var W4=class extends Ds{ba(){return new U4(this.interstitial.Yst())}constructor(t){super("poe"),this.interstitial=t}},U4=class extends pe{constructor(t){super("interstitialend"),this.interstitial=t}};r();var G4=class extends Ds{ba(){return new H4(this.interstitial.Yst(),this.gb)}constructor(t,e){super("woe"),this.interstitial=t,this.gb=e}},H4=class extends pe{constructor(t,e){super("interstitialerror"),this.interstitial=t,this.message=e}};r(),r();var Z4=class extends C4{constructor(t,e){super(t),this.DA=_.min(e,this.td.BJt)}},X4=class extends R4{get Cre(){return Ft.DEFAULT}Pre(t,e,i,s){return Xo.resolve()}dJ(t,e,i,s){return Xo.resolve()}are(t){}zre(t,e,i,s){let n;if(void 0===s&&(s=!1),this.vre=t,t.FO<e){const i=_.min(t.ct,t.qse-e);n=t.ct-i,t.tr({ct:i,Jse:n})}return this.kre({sources:{src:t.Pyt}},i,n,s)}async qre(t,e,i){return this.vre=t,t.Pyt}yre(){super.yre(),this.v3t.yn(tl.VL,this.yoe),this.v3t.yn(Ti.Cy,this.Y8),this.v3t.yn(yo.da,this.Mzt)}wre(){this.v3t.fn(tl.VL,this.yoe),this.v3t.fn(Ti.Cy,this.Y8),this.v3t.fn(yo.da,this.Mzt),super.wre()}vd(t){var e;const i=this.Ose(t.currentTime),s=this.vre.F2t;this.vre.Kse(i);const n=this.vre.F2t;s<.25&&n>=.25?this.b3t.wo(new Is(this.t$t,i)):s<.5&&n>.5?this.b3t.wo(new ks(this.t$t,i)):s<.75&&n>=.75?this.b3t.wo(new Cs(this.t$t,i)):(null==(e=this.vre)?void 0:e.JR)&&this.Td(i)}Td(t){super.Td(t),this.O9=!1}async er(){await super.er(),this.O9=!1}constructor(...t){super(...t),this.O9=!1,this.Mzt=()=>{this.wo(new qh(Fc.GENERAL))},this.yoe=t=>{!this.O9&&this.vre&&(this.O9=!0,this.c$t=this.c3t(this.vre),this.t$t=new Z4(this.c$t,this.v3t.Sd()),this.vre.tr({ad:this.j9t}),this.b3t.wo(new La(this.c$t)),this.b3t.wo(new cn(this.t$t,this.Ose(t.currentTime))))},this.Y8=t=>{this.Td(this.Ose(t.currentTime))}}},z4=class extends o1{get rre(){var t;return[null==(t=this.Rre)?void 0:t._re,...this.boe.rre].filter(ji)}get ore(){return this.Aoe.gne}xst(){return this.Tst.qc}Dst(){return this.Soe.ka}get roe(){var t,e,i;return null!=(i=null!=(e=this.Mre)?e:null==(t=this.Toe)?void 0:t.adTagParameters)?i:{}}xR(){return this.Vs}Est(){return this.Tst.hst}PR(){var t;return null!=(t=this.AZ)?t:super.PR()}NR(){var t;return null!=(t=this.zG)?t:super.NR()}SI(){this.Tst.SI()}zne(t){return t}async xa(t,e){if(await super.xa(t,e),void 0===t||void 0===t.ads)return;const i=Fo(t.ads,F4);if(void 0===i)return;this.koe(),this.Toe=i,this.Eoe=i.backdropLShape,this.boe.roe=i.adTagParameters,this.Tst.yn(tl.OL,this.xoe),this.Tst.yn(tl.BL,this.Cd),this.Roe(),this.Aoe.Zne=function(t){switch(t){case"single":return Ke.SINGLE;case"l-shape":return Ke.LSHAPE_AD;case"double":return Ke.DOUBLE;case"single-if-mobile":return Z.Qs?Ke.SINGLE:void 0;default:return}}(this.Toe.overrideLayout),this.Aoe.qne=this.Toe.overrideAdSrc,this.Aoe.Rne=this.Toe.useId3;const s=void 0===i.networkCode||void 0===i.customAssetKey;await this.Ioe(s)}async Ioe(t){var e,i,s;const n=this.Z1t(),r=this.Coe();var o;const h=null!=(o=null==(e=this.Rre)?void 0:e.WJt)?o:[];var a;t&&(null==(i=this.Rre)?void 0:i.Cre)!==Ft.DEFAULT&&(await(null==(a=this.Rre)?void 0:a.er()),this.Rre=new X4(n,this.goe,h));if(!t&&(null==(s=this.Rre)?void 0:s.Cre)!==Ft.GOOGLE){var u,c,l,d,f,_,v,m,g;await(null==(u=this.Rre)?void 0:u.er()),this.Rre=new B4(n,this.goe,r,h,this.roe,null==(c=this.Toe)?void 0:c.streamActivityMonitorId,null==(l=this.Toe)?void 0:l.retrievePodIdURI);const t=null!=(g=null==(d=this.Poe)?void 0:d._ne)?g:null==(f=this.Toe)?void 0:f.networkCode;var p;const e=null!=(p=null==(_=this.Poe)?void 0:_.vne)?p:null==(v=this.Toe)?void 0:v.customAssetKey;await(null==(m=this.Rre)?void 0:m.Pre(t,e,this.roe))}}async Gne(t,e){var i,s;this.Poe||void 0===t||void 0===e||((null==(i=this.Rre)?void 0:i.Cre)!==Ft.GOOGLE&&await this.Ioe(!1),await(null==(s=this.Rre)?void 0:s.Pre(t,e,this.roe)))}MH(t){void 0===this.NR()&&(this.zG=t,this.AZ=Xs(t),this.wo(new Ga(t)))}Roe(){this.Tst.yn(Ti.sb,this.Doe),this.Tst.yn(Ti.jy,this.RX),this.Tst.yn(Ti.Xy,this.EE)}Noe(){this.Tst.fn(Ti.sb,this.Doe),this.Tst.fn(Ti.jy,this.RX),this.Tst.fn(Ti.Xy,this.EE)}Moe(){this.goe.$1t.yn("rnt",this.Loe)}Boe(){this.goe.$1t.fn("rnt",this.Loe)}w1t(){this.Ooe()}async Foe(){this.Ooe()}Ooe(){const t=this.ea.cI,e=this.ea.fI;t===this.Voe&&e===this.Woe||(this.Voe=t,this.Woe=e,this.wo(new P))}Xne(t){var e;q4(t)&&(null==(e=this.Rre)||e.Xne(t),this.Qne(this.kR()));t.yn("zse",this.Uoe),this.Soe.wo(new V4(t.Yst()))}ire(t){var e;(this.Aoe.ire(t),q4(t))?null==(e=this.Rre)||e.ire(t):Y4(t)&&(this.boe.coe(t),this.Goe.delete(t.o));t.fn("zse",this.Uoe),this.Soe.wo(new W4(t).ka)}Qne(t){this.Hoe(t),this.Zoe()}Hoe(t){this.Xoe(t),this.zoe(t),this.qoe(t)}Xoe(t){let e;const i=[];for(const s of this.Aoe.gne.filter(q4)){if(s.JR){i.push(s);continue}const n=s.qse;void 0!==n&&t>=n?(s.JR=!0,i.push(s)):void 0!==e&&e.FO<s.FO||(e=s)}for(const t of i)this.ire(t);this.Poe!==e&&(this.Poe=e,this.Yoe())}Yoe(){var t,e;null==(t=this.Rre)||t.mre(),null==(e=this.Koe)||e.Yw(),this.joe=void 0,this.Qoe=void 0}zoe(t){if(void 0===this.Poe||void 0!==this.joe||this.Joe)return;let e=!1;const i=se.xn(this.Tst.pR()).dB(t);if(void 0!==i&&(e=i.jn(0)>=this.Poe.FO),q4(this.Poe)){const i=this.Poe,s=i.qse,n=t>=i.FO&&(void 0===s||t<s);(e||n)&&(this.Koe=new da,this.joe=So(this.zre(i,t,this.Koe.Vw),this.Koe).catch((t=>{Je(t)||(this.Soe.wo(new G4(i,"Could not load the ad break.").ka),i.JR=!0,this.Poe=void 0)})))}}qoe(t){if(void 0===this.Poe||void 0!==this.Qoe||this.Joe)return;const e=this.Poe.qse;var i;t>=this.Poe.FO&&(void 0===e||t<e)&&(this.Qoe=null==(i=this.joe)?void 0:i.then((()=>this.Foe())))}are(t){var e,i,s;this.Mre=t,null==(i=this.Rre)||i.are(null!=(s=null!=t?t:null==(e=this.Toe)?void 0:e.adTagParameters)?s:{}),this.boe.roe=t}Zoe(){const t=this.kR(),e=[];this.Goe.forEach((i=>{t>=i.FO&&(void 0===i.qse||t<i.qse)||e.push(i)})),e.forEach((t=>this.ire(t)));for(const e of this.Aoe.gne.filter(Y4)){const i=e.qse;if(void 0!==i&&t>=i)continue;const s=e.FO,n=e.FO+e.ct;t>=s&&t<=n&&!this.Goe.has(e.o)&&(this.boe.ooe(e).catch((t=>{this.Soe.wo(new G4(e,"Could not load the overlay.").ka)})),this.Soe.wo(new f4(e).ka),this.Goe.set(e.o,e))}}async EI(){var t,e;this.zG=void 0,this.AZ=void 0,this.Toe=void 0,this.$oe=!0,this.the=NaN,this.Woe=NaN,this.Voe=NaN,this.Poe=void 0,null==(t=this.Koe)||t.Yw(),this.joe=void 0,this.Qoe=void 0,await(null==(e=this.Rre)?void 0:e.er()),this.Rre=void 0,this.Aoe.er(),this.boe.er(),this.Goe.clear(),this.Tst.fn(tl.OL,this.xoe),this.Tst.fn(tl.BL,this.Cd),this.Noe(),this.Boe(),this.Yoe(),await super.EI()}async gn(){var t;await this.EI().catch(It),this.Aoe.gn(),await(null==(t=this.Rre)?void 0:t.gn()),await super.gn()}MI(t){switch(t.type){case Ti.Vy:case Ti.Ty:case tl.OL:return!this.$oe;case tl.BL:return!this.$oe||(this.$oe=!1,!1);case Ti.xy:{const t=this.Sd();return t!==this.the&&(this.the=t,this.wo(new Ls(t))),!0}case Ti.Yy:return this.Ooe(),!0}return super.MI(t)}constructor(t){var e;super(t),this.zG=void 0,this.AZ=void 0,this.Goe=xu(),this.$oe=!0,this.the=NaN,this.Woe=NaN,this.Voe=NaN,this.Joe=!1,this.Cd=()=>{this.Tst.fn(tl.BL,this.xoe),this.Aoe.Sne(this.ea.nt)},this.koe=async()=>{try{await this.gst.yq([VC.THEOADS])}catch(t){await this.EI().catch(It),this.MH(Qy(t,Qa.LICENSE_INVALID_FEATURE))}},this.xoe=()=>{var t;this.Tst.fn(tl.OL,this.xoe),(null==(t=this.Toe)?void 0:t.sseEndpoint)&&this.Aoe.wne(this.Toe.sseEndpoint)},this.Doe=()=>{this.Hoe(this.kR()),this.Zoe()},this.RX=()=>{this.Hoe(this.kR()),this.Zoe()},this.EE=()=>{this.zoe(this.kR())},this.Loe=()=>{this.w1t()},this.Uoe=t=>{this.Soe.wo(t.ka)},this.Tst=t,this.Vs=t.we;const{contentElement:i,adElement:s}=o4(this.Vs);this.ehe=i,this.ihe=s,Nh(this.ehe),Nh(this.ihe),this.Soe=new E4(this),this.goe=new I4,null==(e=this.Tst.qc)||e.tnt(this.goe),this.Aoe=new A4(this),this.boe=new O4(this,i,this.goe)}};function q4(t){return"adbreak"===t.Aw}function Y4(t){return"overlay"===t.Aw}var K4=class extends z4{Sd(){var t;return null!=(t=this.DA)?t:super.Sd()}tu(){var t;return null!=(t=this.Cc)?t:super.tu()}kR(){return this.zne(super.kR())}pR(){const t=super.pR();return se.xn(t).kb(this.she).ks()}oI(){const t=super.oI();return se.xn(t).kb(this.she).ks()}zne(t){return t+this.she}async xa(t,e){await super.xa(t,e),this.Toe&&(this.Cc=t,this.nhe=new l4(this.Tst),this.nhe.dr(this.Tst.we,this.Tst.we.parentElement),this.lO(this.nhe))}Roe(){super.Roe(),this.Tst.yn(Ti.xy,this.tzt),this.Tst.yn(tl.VL,this.NW)}Noe(){super.Noe(),this.Tst.fn(Ti.xy,this.tzt),this.Tst.fn(tl.VL,this.NW)}Z1t(){return this.Tst}Coe(){return this.ehe}ER(t,e){this.rhe=!0,super.ER(t,e)}Moe(){super.Moe(),this.Tst.yn(Ti.Cy,this.Loe)}Boe(){super.Boe(),this.Tst.fn(Ti.Cy,this.Loe)}kI(){super.kI(),this.wo(new H(this.kR())),this.ohe=!0,this.hhe=!1}TI(){this.hhe=!0,super.TI()}async zre(t,e,i){var s;const n=u4(t);await this.Ioe(n),this.ahe=await(null==(s=this.Rre)?void 0:s.qre(t,e,i))}async Foe(){var t,e,i;if(void 0===this.Poe||void 0===this.ahe)return;this.Noe(),null==(t=this.Koe)||t.Yw(),this.Koe=new da;const s=u4(this.Poe);return await this.Ioe(s),this.uhe=this.Tst.wR,null==(e=this.nhe)||e.lr(this.Tst.we),this.dhe=!0,this.she=this.kR(),this.Tst.yn(tl.BL,this.fhe),this.Tst.yn(tl.VL,this.NW),this.Soe.wo(new f4(this.Poe).ka),await(null==(i=this.Rre)?void 0:i.kre({sources:{src:this.ahe}},this.Koe.Vw,void 0,!0)),this.nhe=this._he(this.Poe.nne,this.Eoe),this.T1t(this.nhe),this.nhe.dr(this.we,this.Tst.we.parentElement),this.Moe(),this.Joe=!0,this.vhe=!1,super.Foe()}_he(t,e){switch(t){case Ke.LSHAPE_AD:return new d4(this.Tst,e);case Ke.SINGLE:default:return new l4(this.Tst)}}async w1t(){var t;this.Poe&&(this.uhe=this.uhe?new Date(Number(this.uhe)+1e3*this.Poe.ct):void 0,this.Poe=void 0,this.Boe(),this.dhe=!0,this.she=this.kR(),this.Aoe.Ene(this.Tst.nt),this.Tst.yn(tl.BL,this.fhe),this.Tst.yn(tl.BL,this.Cd),this.Tst.yn(tl.VL,this.NW),await this.Tst.xa(this.Cc,(new da).Vw),null==(t=this.nhe)||t.lr(this.Tst.we),this.nhe=new l4(this.Tst),this.nhe.dr(this.Tst.we,this.Tst.we.parentElement),this.T1t(this.nhe),this.Tst.kI(),this.vhe=!0,this.Joe=!1,this.Roe(),super.w1t())}async EI(){this.nhe=void 0,this.DA=void 0,this.she=0,this.ahe=void 0,this.uhe=void 0,this.vhe=!0,this.dhe=!1,this.ohe=!0,this.hhe=!0,this.Tst.fn(tl.BL,this.fhe),await super.EI()}MI(t){if(void 0!==this.nhe)switch(t.type){case Ti.ro:return!0;case Ti.Zy:if(!this.hhe)return!0;this.hhe=!1;break;case tl.VL:if(!this.ohe)return!0;this.ohe=!1;break;case tl.FL:if(this.dhe)return!0;this.ohe=!0;break;case Ti.Ky:if(this.dhe&&!this.rhe)return!0;this.rhe=!1;break;case Ti.jy:if(this.dhe&&!this.rhe)return!0;break;case Ti.Cy:if(!this.vhe)return!0}return super.MI(t)}constructor(...t){super(...t),this.she=0,this.dhe=!0,this.rhe=!1,this.ohe=!0,this.hhe=!0,this.vhe=!0,this.tzt=t=>{this.DA=t.duration},this.NW=()=>{this.Tst.fn(tl.VL,this.NW),this.dhe=!1},this.fhe=()=>{this.Tst.fn(tl.BL,this.fhe),this.uhe&&(this.Tst.wR=this.uhe,this.uhe=void 0),this.Tst.kR()>0&&(this.she-=this.Tst.kR())}}};r();var j4=class extends o1{get Fse(){return this.mhe}get Mse(){return this.ghe}Dse(){this.mhe=this.Tst.kR()+this.ghe}Zse(){var t;if(void 0!==this.phe)return;const e=this.whe;this.whe=void 0,null==(t=this.yhe)||t.Yw(),$4(this.Tst)&&(this.bhe=new da,this.phe=So(this.Ahe(e,this.bhe.Vw),this.bhe).catch(Eu))}Xse(){var t;const e=this.phe;this.phe=void 0,null==(t=this.bhe)||t.Yw(),this.yhe=new da,this.whe=So(this.She(e,this.yhe.Vw),this.yhe).catch(Eu)}Sa(){return this.Tst.lH}khe(){this.Ehe={source:this.Tst.tu(),duration:this.Tst.Sd(),currentTime:this.Tst.kR(),preload:this.Tst.tI,autoplay:this.Tst.bO}}async xhe(t){this.Tst.tI=hl.jB,this.Tst.bO=!1,this.v3t.GR=!0;const e=this.v3t.tu();await this.Tst.xa(e,t),this.Tst.ER(this.v3t.kR())}async Rhe(t){this.Ehe&&(this.Tst.tI=this.Ehe.preload,this.Tst.bO=this.Ehe.autoplay,await this.Tst.xa(this.Ehe.source,t),this.Ehe=void 0)}async Ahe(t,e){await(null==t?void 0:t.catch(It)),this.khe(),this.Ihe=this.Tst.wR,await this.Tst.EI(),await this.xhe(e),this.T1t(this.Tst),this.Tst.kI()}async She(t,e){await(null==t?void 0:t.catch(It)),this.Che=this.v3t.kR(),this.ghe=this.Che+this.Fse,await this.Tst.EI(),await this.v3t.EI(),await this.Rhe(e),this.T1t(this.v3t),this.Tst.yn(tl.OL,this.Phe),this.Tst.kI()}tu(){return this.Ehe?this.Ehe.source:super.tu()}Sd(){return this.Ehe?this.Ehe.duration:super.Sd()}oI(){const t=super.oI();return se.xn(t).kb(this.Fse).ks()}pR(){const t=super.pR();return se.xn(t).kb(this.Fse).ks()}er(){this.ghe=0,this.mhe=0,this.Che=0,this.Ihe=void 0}async gn(){await super.gn(),this.er(),this.Tst.fn(tl.OL,this.Phe)}constructor(t,e){super(e),this.mhe=0,this.ghe=0,this.Che=0,this.Phe=()=>{if(this.Tst.fn(tl.OL,this.Phe),this.Ihe){const t=this.Ihe;t.setSeconds(this.Ihe.getSeconds()+this.Che),this.Tst.wR=t,this.Ihe=void 0}this.ghe-=this.Tst.kR()},this.Tst=t,this.v3t=e}};r();var Q4=class extends ec{xa(t,e){var i;return void 0!==Fo(null!=(i=null==t?void 0:t.ads)?i:[],F4)?Promise.reject(new A(Qa.CONFIGURATION_ERROR,"THEOads must be enabled in the player configuration.")):super.xa(t,e)}},J4=class extends z4{Dhe(){this.Tst.wst.yn("presentationmodechange",this.Nhe)}Mhe(){this.Tst.wst.fn("presentationmodechange",this.Nhe)}get wst(){return this.Tst.wst}async xa(t,e){await super.xa(t,e),this.Toe&&(this.Lhe=this.Toe.backdropDoubleBox,this.Bhe(),this.Ohe(new j3(this.Tst,this.v3t),!1,!0))}Ohe(t,e,i){var s;void 0!==this.Fhe&&(this.Fhe.lr(this.we,this.ehe,this.ihe),this.Fhe.gn());const n=null!=(s=this.Fhe)?s:this,r=null!=t?t:this.Tst;Y3(n,r),null==t||t.dr(this.we,this.ehe,this.ihe,n,e),this.Fhe=t,i?this.lO(r):this.T1t(r)}Bhe(){this.Vhe||(this.Vhe=!0,Ld(this.ehe),Ld(this.ihe),h4(this.Vs),h4(this.ehe),h4(this.ihe),function(t){const e=t.style;e.display="flex",e.alignItems="center"}(this.Vs))}Whe(){this.Vhe&&(this.Vhe=!1,a4(this.Vs),a4(this.ehe),a4(this.ihe),Nh(this.ehe),Nh(this.ihe))}Z1t(){return this.v3t}Coe(){return this.Bre}SI(){super.SI(),this.v3t.SI()}ER(t,e){this.Uhe=!0,super.ER(t,e)}zne(t){return t+this.v3t.Mse}Moe(){super.Moe(),this.v3t.yn(Ti.Xy,this.Ghe),this.v3t.yn(Ti.Cy,this.Loe),this.Tst.yn(Ti.Wy,this.Hhe)}Boe(){super.Boe(),this.v3t.fn(Ti.Xy,this.Ghe),this.v3t.fn(Ti.Cy,this.Loe),this.Tst.fn(Ti.Wy,this.Hhe)}Zhe(){var t,e;const i=null==(t=this.Poe)?void 0:t.qse;if(void 0===i||(null==(e=this.Fhe)?void 0:e.Bse())||xs(this.Tst.kR(),i,.001))return;const s=se.xn(this.v3t.pR()),n=this.v3t.oI(),r=_.min(n.end(n.length-1),this.Poe.ct);s.zL().kr(r)&&this.Tst.ER(i,{KBt:!0})}async zre(t,e,i){var s;const n=u4(t);await this.Ioe(n),await(null==(s=this.Rre)?void 0:s.zre(t,e,i))}async Foe(){const t=this.Poe;if(void 0===t)return;const e=t.nne,i=this._he(e,t);return this.Noe(),Z.$m&&Z.rg>=16&&Z.rg<18&&this.v3t.ER(this.v3t.kR()),Z.Zv&&!i.Bse()&&(a4(this.ehe),Nh(this.ehe)),this.Ohe(i,this.ohe,!1),this.Soe.wo(new f4(t).ka),this.Moe(),this.Joe=!0,this.Xhe=!1,this.Qoe=void 0,super.Foe()}_he(t,e){if($4(this.Tst))return new Q3(this.Tst,this.v3t);switch(t){case Ke.DOUBLE:return e.rne||e.tr({backdropUri:this.Lhe}),new i4(this.Tst,this.v3t,e.rne);case Ke.LSHAPE_AD:return e.rne||e.tr({backdropUri:this.Eoe}),new r4(this.Tst,this.v3t,e.rne);case Ke.LSHAPE_CONTENT:return e.rne||e.tr({backdropUri:this.Eoe}),new n4(this.Tst,this.v3t,e.rne);case Ke.SINGLE:default:return new J3(this.Tst,this.v3t)}}w1t(){var t;if(void 0===this.Poe)return;this.Boe(),Z.Zv&&(Ld(this.ehe),h4(this.ehe)),function(t){return t instanceof Q3}(this.Fhe)&&(this.Aoe.Ene(this.Tst.nt),this.Tst.yn(tl.BL,this.Cd)),this.Ohe(new j3(this.Tst,this.v3t),!0,!1);(null==(t=this.Fhe)?void 0:t.Bse())||(this.Uhe=!1,this.Tst.ER(this.Poe.qse,{KBt:!0})),this.v3t.EI(),this.Roe(),this.Joe=!1,this.Xhe=!1,this.Poe=void 0,super.w1t()}async EI(){this.ohe=!0,this.Uhe=!0,this.Xhe=!0,this.Joe=!1,this.Ohe(void 0,!1,!0),await this.v3t.EI(),this.Whe(),await super.EI()}async gn(){this.Mhe(),await this.v3t.gn(),await super.gn()}MI(t){if(void 0!==this.Fhe)switch(t.type){case Ti.ro:if(!this.Xhe)return this.Xhe=!0,!0;this.ohe=!0;break;case Ti.Zy:if(this.RR&&this.Joe)return!0;break;case tl.VL:if(!this.ohe)return!0;this.ohe=!1;break;case tl.FL:this.ohe=!0;break;case Ti.jy:if(!this.Uhe)return!0;break;case Ti.Ky:if(!this.Uhe)return this.Uhe=!0,!0}return super.MI(t)}constructor(t){super(t),this.Xhe=!0,this.ohe=!0,this.Uhe=!0,this.Vhe=!1,this.Nhe=t=>{if(this.Fhe&&!function(t){return t instanceof Q3}(this.Fhe)&&this.Joe)switch(t.presentationMode){case"native-picture-in-picture":this.Ohe(new Q3(this.Tst,this.v3t),!1,!1);break;case"fullscreen":a2(this.bd)&&this.Ohe(new Q3(this.Tst,this.v3t),!1,!1);break}},this.Ghe=t=>{$4(this.Tst)||this.Zhe()},this.Hhe=t=>{$4(this.Tst)||this.Zhe()};const e=new C1(new uF(this.ihe,t.bd,new JC),Ih.Fg);e.tI=hl.jB,e.bO=!1,this.v3t=new j4(this.Tst,e),this.Bre=function(t){const e=h.createElement("div");return Id(e,"theo-ads-sgai-ima-container"),function(t){t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%"}(e),t.appendChild(e),e}(this.ihe),this.Dhe()}};function $4(t){const e=t.wst.Lo()===Iu.FULLSCREEN&&a2(t.bd);return t.lH.rO||e}fF((t=>t.bd.ads.theoads?Z.Im||Z.Nm||Z.Vm?new K4(t):new J4(t):new Q4(t)),io.Lst),r(),r(),r(),r(),r();var t5=class extends Co{get ka(){return this.su||(this.su=function(t){return{get casting(){return t.hQ},get state(){return t.Pft},start(){t.RI()},stop(){t.II()},addEventListener(e,i){const s=tS(e,ze);t.yn(s,i)},removeEventListener(e,i){const s=tS(e,ze);t.fn(s,i)}}}(this)),this.su}constructor(...t){super(...t),this.su=void 0}},e5=class extends t5{get hQ(){return this.Pft===In.CONNECTED}get Pft(){return this.Ba}zhe(){this.qhe(),this.Zgt.yn(Ti.ao,this.Yhe),this.Fa(In.AVAILABLE)}qhe(){this.ea&&this.ea.fn(Ti.gy,this.handleAirplayChangedEvent),this.Khe?this.ea=this.vj:this.ea=this.jhe,this.ea.yn(Ti.gy,this.handleAirplayChangedEvent)}get Khe(){return this.vj.xI()}async Qhe(){if(this.ea){if(this.Khe){if(!this.ea.qR){const t=new Promise((t=>u(t,800))),e=this.ea.vy(Ti.Zy,this.Jhe.Vw);await Promise.race([e,t])}this.ea.kI()}else{this.$he=this.vj.SR,this.tae=this.vj.wR,this.jhe.yn(Ti.sb,this.handleAirplayPlayerTimeUpdate),this.eae=this.vj.fC,this.vj.fC=this.jhe,this.eae.TI(),this.eae.be(),this.jhe.ge(),this.jhe.GR=this.eae.GR,this.jhe.KR=this.eae.KR,this.jhe.vI=this.eae.vI;const t=this.jhe.vy(Ti.Ky);this.jhe.SR=this.eae.SR,await t,this.jhe.kI(),this.jhe.GR=this.eae.GR,this.jhe.KR=this.eae.KR,this.jhe.vI=this.eae.vI}this.Fa(In.CONNECTED)}}iae(){if(this.eae){this.jhe.fn(Ti.sb,this.handleAirplayPlayerTimeUpdate),this.eae.GR=this.jhe.GR,this.eae.KR=this.jhe.KR,this.eae.vI=this.jhe.vI;Z.$m&&!Z.iu&&this.vj.ct===1/0?this.tae?this.eae.wR=this.tae:this.eae.SR=1/0:this.eae.SR=this.$he,this.tae=void 0,this.$he=void 0,this.eae.ge(),this.jhe.be(),this.jhe.qR||this.eae.kI(),this.vj.fC=this.eae,this.jhe.er(),this.eae=void 0}else this.ea&&(this.ea.SR=this.ea.SR+1e-4);this.Fa(In.AVAILABLE)}preloadPlayer(t){if(J(t),this.ea.sI<Ht.Gn){const e=this.ea.vy(tl.OL,t);return this.ea.tI=hl.$V,e}return Promise.resolve()}Fa(t){t!==this.Ba&&(this.Ba=t,this.wo(new e1(this.Ba)))}RI(){let t;this.Zgt.SI(),this.Jhe.Yw(),this.Jhe=new da,t=this.Khe?this.sae(this.Jhe.Vw):this.nae(this.Jhe.Vw),ah(So(t,this.Jhe))}async sae(t){await this.preloadPlayer(t),this.vj.RI()}async nae(t){try{await this.jhe.er();const e=this.vj.tu();if(void 0===e)throw new g("Not possible to start Airplay without a source");await this.jhe.xa(e,t);const i=this.jhe.vy(tl.VL,t);this.jhe.kI(),await rg(i,3e3),this.jhe.TI(),J(t),this.jhe.RI()}catch(t){if(Je(t))return;0}}II(){this.ea.II()}gn(){var t;this.$o(),this.Zgt.fn(Ti.ao,this.Yhe),this.Jhe.Yw(),this.vj.yO(this.jhe),null==(t=this.jhe)||t.gn()}constructor(t,e,i){super(),this.Ba=In.UNAVAILABLE,this.Jhe=new da,this.Yhe=()=>{var t;const e=null==(t=this.vj.tu())?void 0:t.sources.filter(qT);(null==e?void 0:e.some(yI))?this.Fa(In.AVAILABLE):this.Fa(In.UNAVAILABLE)},this.handleAirplayChangedEvent=()=>{this.ea&&this.ea.OR?this.Qhe():this.Pft===In.CONNECTED&&this.iae()},this.handleAirplayPlayerTimeUpdate=t=>{this.$he=t.currentTime,this.tae=this.vj.wR},this.Zgt=t,this.vj=e,this.jhe=i,this.jhe.be(),e.wO(i),this.zhe()}};r();var i5=class extends t5{get hQ(){return!1}get Pft(){return In.UNAVAILABLE}RI(){}II(){}};r();var s5=class extends sn{DI(){this.rae.DI()}LI(t){throw new g("Can't add a track while using AirPlay.")}get ht(){return this.rae.ht}get gR(){return this.rae.gR}get bt(){return this.JH}get SR(){return this.rae.SR}set SR(t){this.ER(t)}ER(t,e){this.rae.ER(t,e)}get wR(){return this.rae.wR}get ct(){return this.rae.ct}get we(){return this.Vs}get RR(){return this.rae.RR}get lt(){return this.rae.lt}get DR(){return this.rae.DR}get MR(){return this.rae.MR}get OR(){return this.rae.OR}get yI(){return this.rae.yI}get pI(){return this.rae.pI}get WR(){return this.rae.WR}get GR(){return this.rae.GR}set GR(t){this.rae.GR=t}get XR(){return this.rae.XR}get qR(){return this.rae.qR}get KR(){return this.rae.KR}set KR(t){this.rae.KR=t}get JR(){return this.rae.JR}get tI(){return this.rae.tI}set tI(t){this.rae.tI=t}get sI(){return this.rae.sI}get rI(){return this.rae.rI}get hI(){return this.rae.hI}xI(){return this.rae.xI()}RI(){this.rae.RI()}II(){this.rae.II()}get nt(){return this.rae.nt}get cI(){return this.rae.cI}get fI(){return this.rae.fI}get rt(){return this.rae.rt}get vI(){return this.rae.vI}set vI(t){this.rae.vI=t}kI(){ah(this.rae.kI())}TI(){this.rae.TI()}async EI(){}tu(){return this.Cc}async xa(t,e){let i;if(J(e),this.Cc=t,Fn(t.sources))i=ul({src:""});else{const e=t.sources.filter(qT);for(const t of e)if(yI(t)){i=t;break}}if(!i)throw new g("Unsupported source.");await this.rae.xa(i,t,e),this.oZ(i)}oZ(t){this.JH!==t&&(this.JH=t,this.wo(new rk(t)))}AI(){return this.rae.AI()}mR(){return[]}SI(){this.oae.fZ()}dr(t){sk(this,t)}lr(){}NI(t){return!1}CI(){this.rae.CI()}async er(){this.JH=void 0,this.Cc=void 0,await this.rae.er()}ge(){this.rae.ge()}be(){this.rae.be()}bI(){return this.rae.bI()}Sa(){return this.rae.Sa()}async gn(){this.$o(),this.oae.gn(),await this.rae.gn(),this.aO.gn(),this.cO.gn(),this.Ll.gn()}constructor(t,e,i,s,n,r,o){super(),this.JH=void 0,this.Cc=void 0,this.aO=new Wh,this.cO=new Wh,this.Ll=new at,this.Vs=t,this.oae=new xI(r,o,1,[ee._E]),this.oae.yZ(t),this.rae=new wI(t,this.oae,e,i,s,n),this.rae.iy(this.Ds),this.aO.fC=this.rae.ht,this.cO.fC=this.rae.rt,this.Ll.fC=this.rae.nt}},n5=class extends ec{async gn(){this.hae.gn(),await super.gn()}constructor(t){super(t);const e=new s5(this.ja.we,this.lR,this.bd,this.hst,this.pI,this.dst,this.zl);this.hae=new e5(this,this.ja,e),this.xz.dQ(this.hae),this.yn(Ti.Ty,(()=>{this.hae.qhe()}))}};fF((t=>Ms.Ys.Kg?new n5(t):(t.xz.dQ(new i5),t)),io.Bst),r(),r();var r5="VPAID";function o5(t){return"spotx"===t.integration}Ih.Fg.IZ(new class t{get X1t(){return this.aae.X1t}RZ(t){return o5(t)}z1t(e,i,s){return s.ads||(s.ads=XT({})),s.ads.vpaidMode=s.ads.vpaidMode||t.uae(),this.aae.z1t(e,i,s)}u6(e,i,s,n){!function(t){if(!o5(t))throw new g("Unknown ad integration: "+t.integration)}(e);const r=t.cae(e,s.we);this.aae.u6(r,i,s,n)}Xz(t){const e=nu(t);if(!S(e.id))return e.queryParameters||(e.queryParameters={}),e.custom&&(e.queryParameters.custom?ct('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(e.queryParameters.custom=e.custom,delete e.custom)),e.app&&(e.queryParameters.app?ct('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(e.queryParameters.app=e.app,delete e.app)),e.device&&(e.queryParameters.device?ct('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(e.queryParameters.device=e.device,delete e.device)),e.user&&(e.queryParameters.user?ct('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(e.queryParameters.user=e.user,delete e.user)),e.ipAddress&&(e.queryParameters.ip_addr?ct('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(e.queryParameters.ip_addr=e.ipAddress,delete e.ipAddress)),e.maximumAdDuration&&(e.queryParameters.VMaxd?ct('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(e.queryParameters.VMaxd=e.maximumAdDuration,delete e.maximumAdDuration)),e}static cae(e,i){return{integration:yu.SPOTX,sources:{src:t.lae(e,s.location.href,i.offsetWidth,i.offsetHeight,Z.Ig)}}}static lae(e,i,s,n,r){if(e.sources)return e.sources;let o=n,h=s;r&&0===h&&(h=320,o=180);const a={custom_skin:1,player_width:h,player_height:o};e.cacheBuster&&(a.cb=_.random()),t.dae(i)&&(a.content_page_url=i);const u=Bo({},a,e.queryParameters);return u[r5]||u.VPI||(u[r5]="js"),"https://search.spotxchange.com/vast/2.0/"+e.id+"?"+t.fae(u)}static dae(t){return Sl(t,"http://")||Sl(t,"https://")}static fae(t){return K$(t)}static uae(){return Z.Um?jn.ENABLED:jn.INSECURE}constructor(){this.aae=new d2}}),r(),r(),r(),r();var h5=_.PI/180,a5=180/_.PI,u5=class{Mb(t,e){return this.x=t,this.y=e,this}c_t(t){return this.x=t.x,this.y=t.y,this}_ae(t){return this.Mb(t[0],t[1])}vae(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}mae(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}constructor(t,e){this.x=t||0,this.y=e||0}},Xu=class{Mb(t,e,i){return this.x=t,this.y=e,this.z=i,this}c_t(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}_ae(t){return this.Mb(t[0],t[1],t[2])}vae(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}V(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}gae(){const t=this.V();if(0!==t){const e=1/t;this.pae(e)}else this.x=0,this.y=0,this.z=0;return this}pae(t){this.x*=t,this.y*=t,this.z*=t}wae(t){const e=this.x,i=this.y,s=this.z,n=t.x,r=t.y,o=t.z,h=t.w,a=h*e+r*s-o*i,u=h*i+o*e-n*s,c=h*s+n*i-r*e,l=-n*e-r*i-o*s;return this.x=a*h+l*-n+u*-o-c*-r,this.y=u*h+l*-r+c*-n-a*-o,this.z=c*h+l*-o+a*-r-u*-n,this}yae(t){return this.x*t.x+this.y*t.y+this.z*t.z}bae(t,e){const i=t.x,s=t.y,n=t.z,r=e.x,o=e.y,h=e.z;return this.x=s*h-n*o,this.y=n*r-i*h,this.z=i*o-s*r,this}constructor(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}},Ko=class{Mb(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this}c_t(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}_ae(t){return this.Mb(t[0],t[1],t[2],t[3])}vae(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}yae(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}QF(t){return this.Aae(this,t)}Aae(t,e){const i=t.x,s=t.y,n=t.z,r=t.w,o=e.x,h=e.y,a=e.z,u=e.w;return this.x=i*u+r*o+s*a-n*h,this.y=s*u+r*h+n*o-i*a,this.z=n*u+r*a+i*h-s*o,this.w=r*u-i*o-s*h-n*a,this}Sae(){return this.x*=-1,this.y*=-1,this.z*=-1,this.gae(),this}Tae(){const t=this.x,e=this.y,i=this.z,s=this.w,n=t*e+i*s;let r,o,h;if(n>.499)r=2*_.atan2(t,s),o=_.PI/2,h=0;else if(n<-.499)r=-2*_.atan2(t,s),o=-_.PI/2,h=0;else{const a=t*t,u=e*e,c=i*i;r=_.atan2(2*e*s-2*t*i,1-2*u-2*c),o=_.asin(2*n),h=_.atan2(2*t*s-2*e*i,1-2*a-2*c)}return new c5(r,h,o)}gae(){let t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,e,i,s){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==s?s:1}},c5=class{Mb(t,e,i){return this.kae=t,this.Eae=e,this.xae=i,this}c_t(t){return this.Mb(t.kae,t.Eae,t.xae)}SO(t){return this.kae+=t.kae,this.Eae+=t.Eae,this.xae+=t.xae,this}SF(t){return this.kae-=t.kae,this.Eae-=t.Eae,this.xae-=t.xae,this}Rae(){const t=this.kae,e=this.xae,i=this.Eae,s=_.cos(t/2),n=_.cos(e/2),r=_.cos(i/2),o=_.sin(t/2),h=_.sin(e/2),a=_.sin(i/2),u=s*n,c=o*h;return new Ko(u*a+c*r,o*n*r+s*h*a,s*h*r-o*n*a,u*r-c*a)}constructor(t,e,i){this.kae=t||0,this.Eae=e||0,this.xae=i||0}};r();var l5=["Iae","uat","Cae","error"];r();var d5=function(t){return t.Rs="unavailable",t.Pae="available",t.Ga="presenting",t}({});r();var f5=class{rW(){this.He||(this.He=!0,this.Vs.addEventListener("mousedown",this.Dae),this.Vs.addEventListener("touchstart",this.Nae),s.addEventListener("mousemove",this.hr),s.addEventListener("touchmove",this.Mae),s.addEventListener("mouseup",this.Lae),s.addEventListener("touchend",this.Bae),this.Oae(s))}oW(){this.He&&(this.He=!1,this.Vs.removeEventListener("mousedown",this.Dae),this.Vs.removeEventListener("touchstart",this.Nae),s.removeEventListener("mousemove",this.hr),s.removeEventListener("touchmove",this.Mae),s.removeEventListener("mouseup",this.Lae),s.removeEventListener("touchend",this.Bae),this.Fae(s))}Oae(t){if(function(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}(t));else if(Fd(t))try{t.parent.addEventListener("mouseup",this.Lae),this.Oae(t.parent)}catch(e){t.document.documentElement.addEventListener("mouseleave",this.Vae)}}Fae(t){if(t.document.documentElement.removeEventListener("mouseleave",this.Vae),Fd(t))try{t.parent.removeEventListener("mouseup",this.Lae),this.Fae(t.parent)}catch(t){}}Wae(){this.Uae=!1}Gae(){const t=this.Zae.Hae;t.yaw+=2*_.PI*this.Xae.x*.4/this.Vs.clientWidth,t.pitch+=2*_.PI*this.Xae.y*.5/this.Vs.clientHeight,t.pitch=Vs(t.pitch,-_.PI/2,_.PI/2),this.Zae.Hae=t}zae(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Vs}gn(){this.oW()}constructor(t,e){this.He=!1,this.qae=new u5,this.Yae=new u5,this.Xae=new u5,this.Uae=!1,this.Dae=t=>{this.qae.Mb(t.clientX,t.clientY),this.Uae=!0,t.preventDefault(),t.stopPropagation()},this.Nae=t=>{t.touches&&1===t.touches.length&&(this.qae.Mb(t.touches[0].pageX,t.touches[0].pageY),this.Uae=!0,t.preventDefault())},this.hr=t=>{if(this.Uae||this.zae()){if(this.zae()){const e=t.movementX||t.mozMovementX||0,i=t.movementY||t.mozMovementY||0;this.Yae.Mb(this.qae.x-e,this.qae.y-i)}else this.Yae.Mb(t.clientX,t.clientY);this.Xae.mae(this.Yae,this.qae),this.qae.c_t(this.Yae),this.Gae()}},this.Mae=t=>{this.Uae&&(this.Yae.Mb(t.touches[0].pageX,t.touches[0].pageY),this.Xae.mae(this.Yae,this.qae),this.qae.c_t(this.Yae),this.Gae())},this.Lae=()=>{this.Wae()},this.Bae=()=>{this.Wae()},this.Vae=()=>{this.Wae()},this.Zae=t,this.Vs=e}};r();var _5=class extends Ds{ba(){return new v5}constructor(){super("Cae")}},v5=class extends pe{constructor(){super("stereochange")}};r();var m5=class{Kae(t){t.clearColor(...this.UQ),t.clear(t.COLOR_BUFFER_BIT)}jae(t,e){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.Qae.forEach((i=>{i.jae(t,e)}))}Jae(t){this.Qae.push(t)}$ae(){this.Qae=[]}constructor(){this.UQ=[0,0,0,1],this.Qae=[]}};r(),r(),r();var g5=class{tue(t,e,i){const s=t.createBuffer();return null===s?(ct("Failed to create buffer."),null):(t.bindBuffer(e,s),t.bufferData(e,i,t.STATIC_DRAW),s)}constructor(t,e,i,s,n){this.eue=t,this.Zb=this.tue(t,e,i),this.iue=s,this.bp=n,this.sue=!1,this.nue=0,this.nc=0}},p5=class extends g5{rW(t){if(null===this.Zb)return void ct("Attempted to enable buffer that failed to initialize.");if(null===t)return void ct("Attempted to enable attribute without location.");const e=this.eue;e.bindBuffer(e.ARRAY_BUFFER,this.Zb),e.vertexAttribPointer(t,this.iue,this.bp,this.sue,this.nue,this.nc),e.enableVertexAttribArray(t)}oW(t){t&&this.eue.disableVertexAttribArray(t)}constructor(t,e,i){super(t,t.ARRAY_BUFFER,e,i,t.FLOAT)}};var w5=class extends g5{rue(){const t=this.eue;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.Zb),t.drawElements(t.TRIANGLES,this.oue,this.bp,this.nc)}constructor(t,e){super(t,t.ELEMENT_ARRAY_BUFFER,e,1,t.UNSIGNED_SHORT),this.oue=e.length}};r();var y5=function(t){return t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor",t}({}),ta=function(t){return t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture",t}({}),b5=function(t){return t.Normal="vNormal",t.Color="vColor",t.UV="vUV",t}({}),A5=class{hue(t,e,i){const s=this.aue(t,t.VERTEX_SHADER,e),n=this.aue(t,t.FRAGMENT_SHADER,i);if(null===s||null===n)return ct("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(ct("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(ct("Failed to initialize shader program"),null))}aue(t,e,i){const s=t.createShader(e);if(null===s)return ct("failed to create shader."),null;if(t.shaderSource(s,i),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(s);return ct("Failed to compile shader with error: "+e),t.deleteShader(s),null}return s}uue(){return this.lue}due(t){const e=this.lue;if(null===e)return ct("Attempted to retrieve attribute location when shader program was not initialized"),null;const i=this.eue.getAttribLocation(e,t);return-1===i?null:i}fue(t){const e=this.lue;if(null===e)return ct("Attempted to retrieve uniform location when shader program was not initialized"),null;const i=this.eue.getUniformLocation(e,t);return null===i&&Or("Attempted to retrieve nonexistent uniform: "+t),i}constructor(t,e,i){this.eue=t,this.lue=this.hue(this.eue,e,i)}},S5=class{_ue(){const t=this.vue.length,e=_.max(...this.mue);return e>=t?(Or("Created geometry where largest index ("+e+") is larger than/equal to attribute array size ("+t+")"),!1):(e<t-1&&ct("Created geometry where largest index ("+e+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.gue||this.gue.length===t||(Or("Created geometry where position ("+t+") and uv ("+this.gue.length+") buffers have different length."),!1))}pue(t,e){if(!this._ue())throw new g("Failed to validate buffers for WebGLGeometry.");const i=function(t,e){const i=[];return e.forEach((t=>{i.push(t.x,t.y,t.z)})),new p5(t,new Float32Array(i),3)}(t,this.vue),s=function(t,e){return new w5(t,new Uint16Array(e))}(t,this.mue),n=function(t,e){const i=[];return e.forEach((t=>{i.push(t.x,t.y)})),new p5(t,new Float32Array(i),2)}(t,this.gue);return new T5(i,s,n,e)}constructor(t,e,i){this.vue=t,this.mue=e,this.gue=i}},T5=class{wue(){this.vue.rW(this.yue),null!==this.bue&&this.gue.rW(this.bue)}Aue(){this.vue.oW(this.yue),null!==this.bue&&this.gue.oW(this.bue)}jae(){this.mue.rue()}constructor(t,e,i,s){this.vue=t;const n=s.due(y5.VertexPos);if(null===n)throw new g("Failed to get position attribute location.");this.yue=n,this.gue=i,this.bue=s.due(y5.VertexUV),this.mue=e}},k5=class extends S5{constructor(t=1,e=32,i=16,s=0,n=2*_.PI,r=0,o=_.PI){let h=0;const a=_.min(r+o,_.PI),u=[],c=[],l=[],d=[];for(let u=0;u<=i;u++){const f=[],v=u/i;let m=0;0===u&&0===r?m=.5/e:u===i&&a===_.PI&&(m=-.5/e);for(let i=0;i<=e;i++){const a=i/e,u=-t*_.cos(s+a*n)*_.sin(r+v*o),d=t*_.cos(r+v*o),g=t*_.sin(s+a*n)*_.sin(r+v*o);c.push(new Xu(u,d,g)),l.push(new u5(a+m,1-v)),f.push(h++)}d.push(f)}for(let t=0;t<i;t++)for(let s=0;s<e;s++){const e=d[t][s+1],n=d[t][s],o=d[t+1][s],h=d[t+1][s+1];(0!==t||r>0)&&u.push(e,n,h),(t!==i-1||a<_.PI)&&u.push(n,o,h)}super(c,u,l)}};r(),r();var E5=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],x5=class{Sue(){const t=this.eue;t.activeTexture(this.Tue),t.bindTexture(t.TEXTURE_2D,this.kue)}dr(){const t=this.eue;t.activeTexture(this.Tue),t.bindTexture(t.TEXTURE_2D,this.kue),t.uniform1i(this.Eue,0)}xue(t){const e=this.eue;e.bindTexture(e.TEXTURE_2D,this.kue),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,this.F1,this.Rue,this.Iue,this.Cue,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1)}Pue(t){const e=this.eue;e.bindTexture(e.TEXTURE_2D,this.kue),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),t.yst.yY(e,e.TEXTURE_2D,this.F1,this.Rue,this.Iue,this.Cue),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,e){if(this.eue=t,this.kue=t.createTexture(),null===this.kue)throw new g("Failed to create texture");const i=e.fue(ta.Texture);if(null===i)throw new g("Failed to get texture location.");this.Eue=i,t.bindTexture(t.TEXTURE_2D,this.kue),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.Tue=t.TEXTURE0,this.F1=0,this.Rue=t.RGBA,this.Iue=t.RGBA,this.Cue=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.F1,this.Rue,2,2,0,this.Iue,this.Cue,new j(E5))}},R5="\n    attribute vec4 "+y5.VertexPos+";\n    attribute vec2 "+y5.VertexUV+";\n\n    uniform mat4 "+ta.ModelViewMat+";\n    uniform mat4 "+ta.ProjectionMat+";\n    \n    varying mediump vec2 "+b5.UV+";\n    \n    void main() {\n      gl_Position = "+ta.ProjectionMat+" * "+ta.ModelViewMat+" * "+y5.VertexPos+";\n      "+b5.UV+" = "+y5.VertexUV+";\n    }\n",I5="\n    varying mediump vec2 "+b5.UV+";\n    \n    uniform sampler2D "+ta.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+ta.Texture+", "+b5.UV+");\n    }\n",C5=class{uue(){return this.lue}rW(){this.eue.useProgram(this.lue.uue()),this.kue.dr()}Due(t){this.kue.xue(t)}Nue(t){this.kue.Pue(t)}constructor(t){this.eue=t,this.lue=new A5(t,R5,I5),this.kue=new x5(t,this.lue)}};r(),r();var P5=Xl(Ql()),D5=Xl(Jl()),N5=(Xl($l()),Xl(td())),M5=(Xl(ed()),Xl(id())),L5=Xl(sd()),B5=Xl(nd()),O5=Xl(rd()),F5=Xl(od()),V5=class{jae(t,e){if(this.Mue(e.Lue)){this.Bue.wue(),this.Oue.rW();const i=this.Fue,s=e.Vue,n=(0,L5.default)(s,s,i);t.uniformMatrix4fv(this.Wue,!1,n);const r=e.Uue;t.uniformMatrix4fv(this.Gue,!1,r),this.Bue.jae(),this.Bue.Aue()}}Mue(t){return"none"===this.Lue||"right"!==t&&"left"===this.Lue||"right"===t&&"right"===this.Lue}get Fue(){const t=(0,P5.default)(),e=this.do;return(0,F5.default)(t,t,e.vae()),(0,O5.default)(t,t,this.Hue.x,new Float32Array([1,0,0])),(0,O5.default)(t,t,this.Hue.y,new Float32Array([0,1,0])),(0,O5.default)(t,t,this.Hue.z,new Float32Array([0,0,1])),t}constructor(t,e,i,s){this.do=new Xu,this.Hue=new Xu,this.Lue="none",this.Oue=i;const n=i.uue();this.Bue=e.pue(t,n),s&&(this.Lue=s);const r=n.fue(ta.ModelViewMat);if(null===r)throw new g("Failed to get model view matrix location.");this.Wue=r;const o=n.fue(ta.ProjectionMat);if(null===o)throw new g("Failed to get projection matrix location.");this.Gue=o}};r();var W5=class{Zue(){const t=(0,P5.default)();return(0,B5.default)(t,this.Xue,this.zue,this.Yue,this.Kue)}jue(){this.Que=this.Zue()}get Uue(){return new Float32Array(this.Que)}set Uue(t){this.Que=t}Jue(){const t=(0,P5.default)(),e=(0,N5.default)((0,P5.default)(),this.$ue.vae()),i=(0,D5.default)((0,P5.default)(),this.tce.vae());return(0,L5.default)(t,e,i),(0,M5.default)(t,t),t}ece(){this.sce=this.Jue()}get Vue(){return new Float32Array(this.sce)}nce(){this.ece(),this.jue()}er(){this.$ue=new Xu,this.Hue=new Ko,this.nce()}rce(t){const e=this.tce.Tae();e.SO(t),this.Hue=e.Rae()}oce(t){this.Hue=t.Rae()}get hce(){return this.Xue}set hce(t){this.Xue=t,this.jue()}get ace(){return this.zue}set ace(t){this.zue=t,this.jue()}get do(){return(new Xu).c_t(this.$ue)}set do(t){this.$ue=t,this.ece()}get Hue(){return(new Ko).c_t(this.tce)}set Hue(t){this.tce=t,this.ece()}constructor(t){this.Xue=72*_.PI/180,this.zue=1.77,this.Yue=.1,this.Kue=100,this.Lue="none",this.$ue=new Xu,this.tce=new Ko,this.Que=this.Zue(),this.sce=this.Jue(),t&&(this.Lue=t)}};r();var U5=class extends Ds{ba(){return new G5}constructor(){super("Iae")}},G5=class extends pe{constructor(){super("directionchange")}},H5=1e-4,Z5=class extends Co{mo(){this.uce(),this.eue?Bl.xr?(Bl.xr.addEventListener("devicechange",this.cce),this.lce().then((()=>{this.dce?(this.fce(),this._ce()):this.sNt("XR: Inline session not available. Panorama functionality will not work.",Qa.VR_PRESENTATION_ERROR)}))):this.sNt("Your browser does not support WebXR",Qa.VR_PLATFORM_UNSUPPORTED):this.sNt("Your browser does not support webGL",Qa.VR_PLATFORM_UNSUPPORTED)}_ce(){this.ea.Ca.yn(rh.la,this.mn),this.ea.yn(Ka.pn,this.mn),this.ea.yn(Ti.ao,this.uo),this.ea.yn(Ti.Ky,this.IX)}uce(){this.vce=h.createElement("canvas"),this.vce.className="theoplayer-vr",this.vce.style.zIndex="2",this.vce.style.background="black",this.vce.style.display="none",this.ea.we.appendChild(this.vce),Nh(this.vce);let t=this.vce.getContext("webgl2");t||(t=this.vce.getContext("webgl")),t&&(this.eue=t,this.mce=new f5(this,this.vce))}async lce(){Bl.xr?await Promise.all([Bl.xr.isSessionSupported("inline").then((t=>{this.dce=t})).catch((t=>{this.dce=!1,this.sNt("exception when calling xr.isSessionSupported for inline session: "+t,Qa.VR_PRESENTATION_ERROR)})),Bl.xr.isSessionSupported("immersive-vr").then((t=>{this.gce=t})).catch((t=>{this.gce=!1,this.sNt("exception when calling xr.isSessionSupported for immersive-vr session: "+t,Qa.VR_PRESENTATION_ERROR)}))]):(this.dce=!1,this.gce=!1)}fce(){const t=this.pce();this.DT=t,this.wce=Boolean(t),this.wce&&(this.yce=(null==t?void 0:t.stereoMode)||ku.NONE,this.bce=(null==t?void 0:t.panoramaMode)||vC.NONE,this.Ace&&(this.Sce(this.bce,this.yce),this.Tce()))}Sce(t,e){if(!this.eue||t===vC.NONE)return;const i=this.eue;let s,n;this.kce.$ae(),t===vC.PM360?(s=2*_.PI,n=-_.PI/2):(s=_.PI,n=-_.PI);const r=new k5(16,60,40,0,s),o=[],h=[];for(let t=0;t<r.gue.length;t++){const i=r.gue[t];switch(e){case ku.NONE:o.push(i),h.push(i);break;case ku.VERTICAL:o.push(new u5(i.x,.5*i.y)),h.push(new u5(i.x,.5*i.y+.5));break;case ku.HORIZONTAL:o.push(new u5(.5*i.x,i.y)),h.push(new u5(.5*i.x+.5,i.y))}}r.vue.forEach((t=>{t.x*=-1}));const a=new S5(r.vue,r.mue,o),u=new S5(r.vue,r.mue,h);this.Ece=new C5(i);const c=new V5(i,a,this.Ece,"left");c.Hue.y=n,this.kce.Jae(c);const l=new V5(i,u,this.Ece,"right");l.Hue.y=n,this.kce.Jae(l)}Tce(){this.vce.style.display="block",this.xce(),this.dce&&this.ea.yn(Ti.ro,this.Rce)}Ice(){this.Cce(),this.ea.fn(Ti.ro,this.Rce),this.vce.style.display="none"}Pce(){this.Dce(),this.Nce()}async Mce(){if(!this.Lce&&this.dce)try{const t=await ou(Bl.xr.requestSession("inline"),this.fW.Vw);let e;e=Z.Qs?Z.gm?"viewer":"local":"viewer";const i=await t.requestReferenceSpace(e);t.addEventListener("end",this.Dce),this.Bce=i,this.Lce=t,this.mce.rW(),this.Oce(),await t.updateRenderState({baseLayer:new XRWebGLLayer(t,this.eue),inlineVerticalFieldOfView:this.Xue*h5})}catch(t){this.Dce(),this.sNt(t,Qa.VR_PRESENTATION_ERROR)}}Dce(){this.Lce&&(this.Cce(),this.mce.oW(),this.Lce.removeEventListener("end",this.Nce),this.Lce.end(),this.Lce=null,this.xce())}async Fce(){if(!this.Vce&&this.gce){this.Cce();try{const t=await ou(Bl.xr.requestSession("immersive-vr"),this.fW.Vw),e=await t.requestReferenceSpace("local");t.addEventListener("end",this.Nce),this.Wce=e,this.Vce=t,await this.Uce(),this.Oce()}catch(t){this.Nce(),this.sNt(t,Qa.VR_PRESENTATION_ERROR)}}}async Uce(){const t=this.eue,e=this.Vce;this.vce&&t&&e&&!this.Gce&&(this.vce.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),this.vce.addEventListener("webglcontextrestored",(()=>{this.Sce(this.bce,this.yce)})),this.Gce=!0,await t.makeXRCompatible(),await e.updateRenderState({baseLayer:new XRWebGLLayer(e,t)}))}xce(){if(!this.Vce&&this.eue){const t=this.eue,e=this.vce.clientWidth,i=this.vce.clientHeight;if(0===e||0===i)return;const s=Ms.Ys.Yg;this.vce.width=e*s,this.vce.height=i*s,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}Oce(){null===this.Hce&&(this.Zce(),this.Xce?this.Hce=this.Xce.requestAnimationFrame(this.zce):(this.qce(),ct("XR: Attempted to start animation loop without inline or immersive session.")))}Cce(){null!==this.Hce&&(this.qce(),this.Xce?this.Xce.cancelAnimationFrame(this.Hce):ct("XR: Attempted to stop animation loop by cancelAnimationFrame even though there is no session running."),this.Hce=null)}Zce(){if(null!==this.Yce)return;const t=this.ea.AI();if(void 0===t||!(t instanceof HTMLVideoElement))return void ct("No video source.");if("function"!=typeof t.requestVideoFrameCallback)return;const e=()=>{this.Ece.Nue(this.ea),this.Yce=t.requestVideoFrameCallback(e)};this.Kce=t,this.Yce=t.requestVideoFrameCallback(e)}qce(){var t,e;null!==this.Yce&&(null==(e=this.Kce)||null==(t=e.cancelVideoFrameCallback)||t.call(e,this.Yce),this.Kce=null,this.Yce=null)}jce(){return!!this.Qce||(Z.iu?this.Jce&&this.$ce:this.Jce)}tle(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.$ce="granted"===t}))}ele(){return(!this.qR()||Boolean(this.sle))&&this.nle()}qR(){return this.ea.qR}nle(){return this.ea.sI>=2}get wce(){return this.rle}set wce(t){const e=this.Pft;this.rle=t,this.Pft!==e&&this.wo(new C2)}get Ace(){return this.bce!==vC.NONE}get bce(){return this.ole}set bce(t){const e=this.Pft;this.ole=t,this.Pft!==e&&this.wo(new C2)}get gce(){return this.hle}set gce(t){const e=this.Pft;this.hle=t,this.Pft!==e&&this.wo(new C2)}get ale(){return this.gce}get Xce(){return this.Vce||this.Lce}get Vce(){return this.Qce}set Vce(t){const e=this.Pft;this.Qce=t,this.Pft!==e&&this.wo(new C2)}get ule(){return this.Wce||this.Bce}get cle(){const t=this.lle.Tae();return{yaw:t.kae*a5,pitch:t.Eae*a5,roll:t.xae*a5}}set cle(t){const e=X5(t&&t.pitch||0)*h5,i=X5(t&&t.roll||0)*h5,s=X5(t&&t.yaw||0)*h5,n=new c5(s,e,i),r=this.lle.Tae(),o=this.dle.Tae();this.lle=n.Rae(),this.dle=n.SF(r).SO(o).Rae()}get Hae(){const t=this.dle.Tae();return{yaw:t.kae,pitch:t.Eae,roll:t.xae}}set Hae(t){const e=z5(t&&t.pitch||0),i=z5(t&&t.roll||0),s=z5(t&&t.yaw||0),n=new c5(s,e,i);this.dle=n.Rae()}get Pft(){return this.wce?this.Vce?d5.Ga:d5.Pae:d5.Rs}get fle(){return null!==this.Vce}set fle(t){const e=this.fle;t&&this.gce?this.Fce():this.Nce(),this.fle!==e&&this.wo(new _5)}get _le(){return this.Jce}set _le(t){null===this.Qce&&(this.Jce=t,t&&Z.iu&&this.tle())}get vle(){return this.Xue}set vle(t){t&&t>=0&&t<=180&&(this.Xue=t,null!==this.Lce&&this.Lce.updateRenderState({inlineVerticalFieldOfView:this.Xue*h5}))}sNt(t,e){Or(t),this.wo(new Ga(new A(e,t)))}pce(){const t=this.ea.tu();return t&&t.vr}gn(){this.fW.Yw(),this.Pce(),this.$o(),this.ea=void 0,this.eue=void 0}constructor(t){super(),this.fW=new da,this.dce=!1,this.hle=!1,this.lle=new Ko,this.mle=new Ko,this.dle=new Ko,this.Xue=74,this.Jce=!1,this.DT=void 0,this.yce=ku.NONE,this.rle=!1,this.ole=vC.NONE,this.kce=new m5,this.Lce=null,this.Qce=null,this.Bce=null,this.Wce=null,this.Gce=!1,this.Hce=null,this.Kce=null,this.Yce=null,this.sle=0,this.$ce=!1,this.cce=()=>{this.lce()},this.uo=()=>{this.Ice(),this.Pce(),this.fce()},this.Rce=()=>{this.Mce()},this.Nce=()=>{this.Vce&&(Xf("Ending immersive session"),this.Cce(),this.Vce.removeEventListener("end",this.Nce),this.Vce.end(),this.Vce=null,this.Wce=null,this.Gce=!1,this.Lce?this.Oce():this.Mce())},this.mn=()=>{this.xce()},this.zce=(t,e)=>{if(!this.eue)return;const i=this.eue,s=this.Xce;if(null===this.Yce&&this.ele()&&(this.Ece.Nue(this.ea),this.sle>0&&(this.sle-=1)),null===s||void 0===e)return void ct("Attempted to run webXR animation loop without session or xrFrame.");this.Hce=s.requestAnimationFrame(this.zce);const n=s.renderState.baseLayer,r=e.getViewerPose(this.ule);if(void 0===n||void 0===r)return void ct("Attempted to run webXR animation loop without glLayer or viewerPose.");i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer);let o=new c5,h=0;for(const t of r.views){const e=new W5(t.eye);if(e.Uue=t.projectionMatrix,this.jce()){let i;if(Z.Qs&&Z.gm&&null===this.Qce){if(i=t.transform.inverse.orientation,0===i.x&&0===i.y&&0===i.z&&1===i.w)return}else i=t.transform.orientation;e.Hue=new Ko(i.x,i.y,i.z,i.w)}this.Lce&&e.rce(this.dle.Tae()),o=o.SO(e.Hue.Tae()),h+=1;const s=n.getViewport(t);s&&i.viewport(s.x,s.y,s.width,s.height),this.kce.jae(i,e)}const a=new c5(o.kae/h,o.Eae/h,o.xae);this.lle=a.Rae(),function(t,e){const i=t.yae(e);return 1-i*i<H5}(this.lle,this.mle)||(this.mle.c_t(this.lle),this.wo(new U5))},this.IX=()=>{this.sle=5},this.ea=t,this.ka=function(t){let e,i={get stereo(){return t.fle},set stereo(e){t.fle=e},get useDeviceMotionControls(){return t._le},set useDeviceMotionControls(e){t._le=e},get direction(){return t.cle},set direction(e){t.cle=e},get verticalFOV(){return t.vle},set verticalFOV(e){t.vle=e},get canPresentVR(){return t.ale},get state(){return t.Pft},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new yD(t,l5,i),i}(this),this.mo()}};function X5(t){return df(t+180,360)-180}function z5(t){return df(t+_.PI,2*_.PI)-_.PI}xh((function(t){return class extends t{ba(){return nh(super.ba(),{vr:this.Zae.ka})}gn(){this.Zae.gn(),super.gn()}constructor(t,e){super(t,e),this.Zae=new Z5(this)}}}),io.ou),r(),r();var q5=class extends sn{get ka(){return this.su||(this.su=function(t){let e,i={get status(){return t.zk},get tasks(){return t.see},get network(){return t.HX.ka},createTask:(e,i)=>t.ple(e,i),addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new rt(t,i),i}(this)),this.su}get zk(){return this.wle.zk}get see(){return this.wle.see.ka}get HX(){return this._st}ple(t,e,i){let s,n;if(void 0===i&&(i="persistent"),!t)throw new g("Unexpected - The source description is undefined");if(s=NC(t),n=I3(e),wC(s))throw new g("Invalid source description");return this.wle.Qte(s,n).ka}constructor(t,e){super(),this.wle=t,this._st=e,this.wle.yn("uat",this.Ds)}};var Y5=function(){const t=new rD(Ms.lR,!1),e=hu.Fg,i=new B3(t),s=new E3(e,i),n=new hD(t),r=new V2(e.Irt,s,"persistent");return new q5(r,n)}().ka;function K5(t,e){if("function"==typeof t.getAll){return kn(void 0===e?t.getAll():t.getAll(e))}return function(t){let e=new os,i=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(i.push(s.value),s.continue()):e.Ob(i),It()},t.onerror=()=>{e.Fb(t.error),It()},e.Vb}(void 0===e?t.openCursor():t.openCursor(e))}function kn(t){return new Promise(((e,i)=>{t.onsuccess=()=>{e(t.result),It()},t.onerror=()=>{i(t.error),It()}}))}r(),r(),r(),r(),r(),r();var j5=class{Yw(){if(this.io)try{this.Trt.abort(),this.io=!1}catch(t){}}constructor(t){this.Trt=t,this.io=!0,this.Vb=new Promise(((t,e)=>{this.Trt.oncomplete=()=>{this.io=!1,t(),It()},this.Trt.onerror=()=>{this.io&&(this.io=!1,e(this.Trt.error||new g("Transaction error")),It())},this.Trt.onabort=()=>{this.io=!1,e(new g("Transaction aborted")),It()}}))}};async function Q5(t,e,i){const s=new j5(t);try{const[t]=await Promise.all([e(i),s.Vb]);return t}catch(t){if(!s.io)throw new H2("IDBTransaction committed prematurely",t);throw t}finally{s.Yw()}}var J5=class{get l(){return this.tx.l}drt(t){return Promise.resolve("persistent"===t)}frt(t,e){if(void 0===e&&(e="persistent"),"persistent"!==e)return Promise.reject(aV(e));return kn(this.yle($a.Drt).put(t))}async _rt(t,e){if(void 0===e&&(e="persistent"),"persistent"!==e)return Promise.reject(aV(e));for(const i of t)await this.frt(i,e)}async Db(t){return Boolean(await this.Nb(t))}Nb(t){return kn(this.yle($a.Prt).get(t))}vrt(t,e){return kn(this.yle($a.Prt).index(e).get(t))}async rrt(t){const e=[];for(let i of t){const t=await this.Nb(i);t&&e.push(t)}return e}mrt(){return K5(this.yle($a.Prt))}grt(t){return K5(this.yle($a.Prt),t)}prt(t,e){return K5(this.yle($a.Prt).index(e),t)}$S(t){return kn(this.yle($a.Drt).delete(t))}async wrt(t){for(const e of t)await this.$S(e)}yrt(){return kn(this.yle($a.Drt).clear())}yle(t){if(!this.ble)throw new g("Lock was released");if(!function(t,e){return t===$a.Prt&&e===$a.Prt||e===$a.Drt}(t,this.ble.mode))throw new g("Incompatible transaction mode: "+this.ble.mode+", expected "+t);return this.ble.objectStore(this.l)}Ale(){this.tx.Sle(this),this.ble=void 0}constructor(t,e){this.tx=t,this.ble=e}};var $5=class{drt(t){return Promise.resolve("persistent"===t)}frt(t,e){return void 0===e&&(e="persistent"),"persistent"!==e?Promise.reject(aV(e)):this.Trt($a.Drt,(e=>e.frt(t)))}_rt(t,e){return void 0===e&&(e="persistent"),"persistent"!==e?Promise.reject(aV(e)):this.Trt($a.Drt,(e=>e._rt(t)))}Db(t){return this.Trt($a.Prt,(e=>e.Db(t)))}Nb(t){return this.Trt($a.Prt,(e=>e.Nb(t)))}vrt(t,e){return this.Trt($a.Prt,(i=>i.vrt(t,e)))}rrt(t){return this.Trt($a.Prt,(e=>e.rrt(t)))}mrt(){return this.Trt($a.Prt,(t=>t.mrt()))}grt(t){return this.Trt($a.Prt,(e=>e.grt(t)))}prt(t,e){return this.Trt($a.Prt,(i=>i.prt(t,e)))}$S(t){return this.Trt($a.Drt,(e=>e.$S(t)))}wrt(t){return this.Trt($a.Drt,(e=>e.wrt(t)))}yrt(){return this.Trt($a.Drt,(t=>t.yrt()))}Bxt(t){return this.Tle(),this.Sxt=new J5(this,t),this.Sxt}Tle(){if(void 0!==this.Sxt)throw new g("Already locked")}Sle(t){if(this.Sxt!==t)throw new g("Incorrect lock");this.Sxt=void 0}Jo(t){return this.Qo.Jo(t)}Trt(t,e){return this.Jo((()=>this.kle(t,e)))}async kle(t,e){this.Tle();const i=this.Ele.transaction(this.l,t),s=this.Bxt(i);try{return await Q5(i,e,s)}finally{s.Ale()}}xle(t){this.Tle();const e=this.Ele.transaction(this.l,t);return this.Bxt(e)}static Rle(t,e){let i;const s=new Promise((t=>{i=t})),n=t.reduce(((t,e)=>t.then((()=>{let t;const i=new Promise((e=>{t=e}));return e.Jo((()=>(t(),s))).catch(It),i}))),Promise.resolve());return i(n.then(e)),s}constructor(t,e){this.Sxt=void 0,this.Qo=new ju,this.Ele=t,this.l=e}};r(),r(),r(),r(),r();var t6={YD:17,Ile:async t=>{const{transaction:e,database:i}=t,s=e.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)i.deleteObjectStore(s[t]);i.createObjectStore(r6,{keyPath:"id"}),i.createObjectStore(o6,{keyPath:"key"}),i.createObjectStore(h6,{keyPath:"key"});i.createObjectStore(a6,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");i.createObjectStore(u6,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},e6=class{async Cle(t){for(const e of this.Ple)this.Dle<e.YD&&await e.Ile(t)}constructor(t){this.Dle=t}},i6=class extends e6{get Ple(){return[t6]}},s6=new class{Nle(t){this.Mle=t}fit(t){return this.Mle(t)}constructor(){this.Mle=t=>new i6(t)}},n6=18,r6="cachingTask",o6="licences",h6="manifest",a6="segment",u6="segmentMetadata";async function c6(){!function(){if("undefined"==typeof indexedDB)throw new g("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",n6);return t.addEventListener("upgradeneeded",l6),await kn(t)}async function l6(t){const e=t.oldVersion<=n6?t.oldVersion:-1,i=t.target,s=i.result,n=i.transaction,r=s6.fit(e),o={database:s,transaction:n};await Q5(n,(t=>r.Cle(t)),o)}var d6=class{static get Fg(){return this.Hrt||(this.Hrt=c6()),this.Hrt}};d6.Hrt=void 0,r();var f6=class{Trt(t){return t(this)}Ale(){this.xrt.Ale(),this.Ert.Ale(),this.Rrt.Ale(),this.Irt.Ale(),this.Crt.Ale()}constructor(t,e){this.xrt=t.xrt.Bxt(e),this.Ert=t.Ert.Bxt(e),this.Rrt=t.Rrt.Bxt(e),this.Irt=t.Irt.Bxt(e),this.Crt=t.Crt.Bxt(e)}};hu.Aa(class t{static async fit(){const e=await d6.Fg;return new t(e)}Trt(t){const e=this.allCollections;return $5.Rle(e,(()=>this.kle(e,t)))}async kle(t,e){const i=t.map((t=>t.l)),s=this.Ele.transaction(i,$a.Drt),n=new f6(this,s);try{return await Q5(s,e,n)}finally{n.Ale()}}get allCollections(){return[this.Ert,this.xrt,this.Rrt,this.Irt,this.Crt]}constructor(t){this.Ele=t,this.xrt=new $5(t,u6),this.Ert=new $5(t,a6),this.Rrt=new $5(t,h6),this.Irt=new $5(t,r6),this.Crt=new $5(t,o6)}}.fit),r(),r(),r();var _6=class{Lle(t){const e=this.vj.mR(),i=t.createGain();for(const s of e){t.createMediaElementSource(s).connect(i)}return i}get ka(){return this.su||(this.su=this.ba()),this.su}ba(){const t=this;return{createAudioSourceNode:e=>t.Lle(e)}}constructor(t){this.su=void 0,this.vj=t}};xh((function(t){return class extends t{ba(){const t=this.Ble.ka;return nh(super.ba(),{get audio(){return t}})}constructor(t,e){super(t,e),this.Ble=new _6(this.ja)}}}),io.ou),r(),r();xh((function(t){return class e extends t{xa(t){const i=e.Ole(this.bd.analytics),s=e.Ole(t?t.analytics:void 0);i||s?this.Fle(Bo({},i,s)):this.Vle&&this.Vle.disable(),super.xa(t)}Fle(t){if(this.Vle)this.Vle.enable(),this.Vle.setOptions(t);else{const e=s.youbora;if(!e)throw new g("Youbora JavaScript library not loaded.");if(!e.adapters.TheoPlayer2)throw new g("TheoPlayer2 adapter not available on Youbora JavasScript library");const i=new e.Plugin(t);i.setAdapter(new e.adapters.TheoPlayer2(this.ka)),this.qc&&e.adapters.TheoPlayer2.NativeAdsAdapter&&i.setAdsAdapter(new e.adapters.TheoPlayer2.NativeAdsAdapter(this.ka)),this.Vle=i}}static Ole(t){if(t){const e=t.filter((t=>"youbora"===t.integration));if(0===e.length)return;if(e.length>1)throw new g("Only one youbora analytics configuration expected");const i=e[0],{integration:s}=i;return MS(i,["integration"])}}gn(){this.Vle&&this.Vle.disable(),super.gn()}constructor(t,e){super(t,e)}}}),io.Ost),r(),r(),r();var v6=1,m6=0,g6=1e3,p6=class t extends OA{Wle(){const t=this.ct===1/0,e=t?v6:m6,i=t?-1:this.ct,s=Qe(this.ea.rt.uC,this.Ule);this.Gle.setPresentationInformation(new this.Hle(e,i,s))}Ule(t){const e=t.IC.uC,i=[];for(let t=0;t<e.length;t++){const s=e[t];s.ji&&s.Ti&&i.push({trackIdx:t,bitrate:s.wG,width:s.ji,height:s.Ti,codecIdentifier:s.Zrt})}return i}Zle(){return this.ea.kR()*g6}get ct(){return this.ea.Sd()*g6}get Xle(){return this.zle}get qle(){return this.Yle}set qle(t){this.Yle=t,t&&this.Gle.reportPlayerState(t)}set Kle(t){this.jle=t}Qle(){return p((()=>{this.Jle(),this.$le()}),t.tde)}hMt(){this.ea.qc&&(this.ea.qc.yn("hnt",this.ede),this.ea.qc.yn("ant",this.ide),this.ea.qc.yn("r2t",this.sde),this.ea.qc.yn("G2t",this.rde)),this.ea.yn(Ti.Cy,this.Yre),this.ea.yn(yo.da,this.O6),this.ea.yn(Ti.Zy,this.ode),this.ea.yn(Ti.ro,this.Rce),this.ea.yn(tl.VL,this.xX),this.ea.yn(Ti.Yy,this.FY),this.ea.yn(Ti.Ky,this.IX),this.ea.yn(tl.FL,this.kX),this.ea.yn(Ti.Jy,this.hde)}aMt(){this.ea.qc&&(this.ea.qc.fn("hnt",this.ede),this.ea.qc.fn("ant",this.ide),this.ea.qc.fn("r2t",this.sde),this.ea.qc.fn("G2t",this.rde)),this.ea.fn(Ti.Cy,this.Yre),this.ea.fn(yo.da,this.O6),this.ea.fn(Ti.Zy,this.ode),this.ea.fn(Ti.ro,this.Rce),this.ea.fn(tl.VL,this.xX),this.ea.fn(Ti.Yy,this.FY),this.ea.fn(Ti.Ky,this.IX),this.ea.fn(tl.FL,this.kX),this.ea.fn(Ti.Jy,this.hde)}gn(){m(this.ade),this.aMt()}constructor(t,e,i,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.ea=t,this.DT=e,this.Gle=i,this.ude=s,this.cde=n,this.Hle=r,this.lde=!0,this.zle=!1,this.jle=void 0,this.Yle=void 0,this.dde=void 0,this.ede=t=>{const e=t.snt;e.i$t();var i;i=e.Yst().duration;const s="linear"===e.Yst().type;e.s$t(),e.$Jt();s&&(this.zle=!0),this.Kle=this.cde.AD_IMPRESSION,this.Kle=this.cde.AD_STARTED},this.ide=t=>{this.zle=!1,this.Kle=this.cde.AD_COMPLETED},this.sde=t=>{t.fjt===Fc.ADBLOCK?this.Kle=this.cde.AD_BLOCKED:this.Kle=this.cde.AD_ERROR},this.rde=()=>{this.Kle=this.cde.AD_SKIPPED},this.hde=t=>{var e,i,s,n;t.TE===ee._E&&(this.dde&&t.yz!==this.dde&&this.Gle.reportABRSwitch(this.dde,t.yz),this.dde=t.yz,this.Gle.reportChunkRequest(new MMChunkInformation(t.TN,t.yz,t.eL,t.Zut.Gu,void 0,void 0,null!=(s=null==(e=t.Zut.rut)?void 0:e[0])?s:0,null!=(n=null==(i=t.Zut.rut)?void 0:i[1])?n:-1)))},this.Yre=t=>{this.qle=this.ude.STOPPED,this.wo(t)},this.O6=t=>{this.qle=this.ude.ERROR,this.Gle.reportError(t.error,this.Zle())},this.ode=()=>{this.Xle?this.Kle=this.cde.AD_PAUSED:this.qle=this.ude.PAUSED},this.Rce=()=>{this.Xle&&(this.Kle=this.cde.AD_PLAY)},this.xX=()=>{this.Xle?(this.jle===this.cde.AD_PAUSED&&(this.Kle=this.cde.AD_RESUMED),this.Kle=this.cde.AD_PLAYING):(this.lde&&(this.lde=!1,this.Wle(),this.qle=this.ude.STARTED),this.qle!==this.ude.PAUSED&&this.qle!==this.ude.BUFFERING||(this.qle=this.ude.RESUMED))},this.FY=()=>{this.Gle.reportPresentationSize(this.ea.fI,this.ea.cI)},this.IX=t=>{this.Xle||this.qle!==this.ude.PAUSED||this.Gle.reportPlayerSeekCompleted(t.currentTime*g6)},this.kX=()=>{this.Xle||(this.qle=this.ude.BUFFERING)},this.$le=()=>{this.Gle.reportDownloadRate(_.floor(wl.Fg.aG()))},this.Jle=()=>{this.Xle||this.Gle.reportPlaybackPosition(this.Zle())},this.qle=this.ude.INITIALIZED,this.hMt(),this.ade=this.Qle()}};p6.tde=2e3,xh((function(t){return class extends t{gn(){super.gn(),this.fde()}constructor(t,e){super(t,e),this._de=void 0,this.vde=void 0,this.mde=()=>{this.vde=void 0,this.fde();const t=super.tu();t&&(this.vde=function(t,e){const i=function(t,e){if(t&&t.analytics)for(const e of t.analytics)if("smartsight"===e.integration)return e;if(e&&e.analytics)for(const t of e.analytics)if("smartsight"===t.integration)return t;return}(t,e);if(!i)return;return i}(t,this.bd)),this.gde()},this.gde=()=>{if(!this._de&&this.vde&&this.bt&&this.bt.src&&!this.qR){const t=MMSmartStreaming.getInstance();!function(t,e,i){t.registerMMSmartStreaming(i.playerName,i.customerID,i.subscriberID,i.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","9.2.0"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",e,i.metaURL,i.assetID)}(t,this.bt.src,this.vde),this._de=new p6(this,this.vde,t),this._de.yn("ended",this.fde)}},this.fde=()=>{this._de&&(this._de.gn(),this._de=void 0)},this.yn(Ti.ao,this.mde),this.yn(Ti.Ty,this.gde),this.yn(Ti.ro,this.gde)}}}),io.Ost),r(),r();var w6=String.fromCharCode(95);var y6=class t{get ka(){return this.su||(this.su=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(e){t.sendEvent=e}}}(this)),this.su}get id(){return this.ZS}get adsManager(){return this.kse}get ids(){return this.a_}get adContainer(){return this.f0t}get sendEvent(){return this.pde}set sendEvent(t){for(let t of this.wde)this.kse.removeEventListener(t.type,t.listener);this.wde=[],this.pde=t,this.yde()}get imaSDK(){return!0}bde(){for(let t in google.ima.AdEvent.Type){const e=google.ima.AdEvent.Type[t];this.kse.addEventListener(e,this.Ade),this.wde.push({type:e,listener:this.Ade})}}Sde(){En(this.wde);for(let t in google.ima.AdEvent.Type){const e=google.ima.AdEvent.Type[t];this.kse.removeEventListener(e,this.Ade)}}Tde(t){this.Yf.push({type:t.type,adVolume:this.adsManager.getVolume()})}yde(){null==this.pde||this.pde.call(this,this.Yf),this.Yf=[]}static kde(e){return t.Ede[e]||e}constructor(e,i,s,n){this.Ade=e=>{this.Tde({type:t.kde(e.type)})},this.ZS=e,this.kse=i,this.a_=s,this.f0t=n,this.wde=[],this.Yf=[]}};y6.Ede={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var b6=class{xde(t,e){this.Rde=h.createElement("script"),this.Rde.id=t.id,this.Rde.type="text/javascript",t.adContainer.appendChild(this.Rde),this.Rde.src="https://z.moatads.com/"+e+"/moatvideo.js#"+t.id,this.Ide=t.id,s[this.Ide]=t.ka}Cde(){this.Rde&&Gt(this.Rde),this.Ide&&(s[this.Ide]=void 0)}constructor(){this.Rde=void 0,this.Ide=void 0}};xh((function(t){return class e extends t{xa(t){var i,s,n;this.Pde(),null==(i=this.Dde)||i.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.Nde),null==(s=this.Dde)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Pde),null==(n=this.Dde)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Mde),this.Dde=void 0,this.f0t=void 0,super.xa(t);const r=t&&t.analytics;this.Lde=e.Bde(r);this.qc&&this.Lde&&l2()&&this.Ode()}gn(){var t,e,i;this.Pde(),null==(t=this.Dde)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.Nde),null==(e=this.Dde)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Pde),null==(i=this.Dde)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Mde),this.Dde=void 0,this.f0t=void 0,this.qc&&this.qc.fn("X8t",this.z8t),super.gn()}Ode(){this.qc&&this.qc.yn("X8t",this.z8t)}Fde(t,e,i){const s=w6+"moatApi"+_.floor(1e8*_.random());this.Vde=new y6(s,t,e,i),this.Vde.bde(),this.Wde.xde(this.Vde,this.Lde.partnerCode)}static Bde(t){if(t){const e=t.filter((t=>"moat"===t.integration));if(0===e.length)return;if(e.length>1)throw new g("Only one Moat analytics configuration expected");return e[0]}}constructor(t,e){super(t,e),this.Lde=void 0,this.Vde=void 0,this.Dde=void 0,this.f0t=void 0,this.Mde=()=>{this.Fde(this.Dde,{partnerCode:this.Lde.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.f0t)},this.z8t=t=>{this.Dde=t.Tse,this.f0t=t.I7t,this.Pde(),this.Dde.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.Nde),this.Dde.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Pde),this.Dde.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Mde)},this.Nde=t=>{const e=t.getAd().getAdPodInfo();e.getAdPosition()<e.getTotalAds()&&(this.Pde(),this.Mde())},this.Pde=()=>{this.Vde&&(this.Vde.Sde(),this.Vde=void 0),this.Wde.Cde()},this.Wde=new b6}}}),io.Ost),r(),r(),r();var A6=class extends pe{constructor(t,e,i){super(t,new Date),this.Ude=e,this.snt=i}},gs=function(t){return t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete",t}({}),S6=class extends A6{constructor(t,e){super("DAILoaded",t,e)}},T6=class extends A6{constructor(t,e){super("DAIAdBreakStarted",t,e)}},k6=class extends A6{constructor(t,e){super("DAIAdBreakEnded",t,e)}},E6=class extends A6{constructor(t,e){super("DAIAdProgress",t,e)}},x6=class extends A6{constructor(t,e){super("DAICuePointsChanged",t,e)}},R6=class extends A6{constructor(t,e){super("DAIClick",t,e)}},I6=class extends A6{constructor(t,e){super("DAIError",t,e)}},C6=class extends A6{constructor(t,e){super("DAIStarted",t,e)}},P6=class extends A6{constructor(t,e){super("DAIFirstQuartile",t,e)}},D6=class extends A6{constructor(t,e){super("DAIMidpoint",t,e)}},N6=class extends A6{constructor(t,e){super("DAIStreamInitialized",t,e)}},M6=class extends A6{constructor(t,e){super("DAIThirdQuartile",t,e)}},L6=class extends A6{constructor(t,e){super("DAIComplete",t,e)}};var B6=class extends Co{replaceAdTagParameters(t){return this.Lre.replaceAdTagParameters(null!=t?t:null)}Gde(t){return this.Lre.contentTimeForStreamTime(t)}Hde(t){return this.Lre.streamTimeForContentTime(t)}VWt(t,e){const i=function(t){return"vod"===t.availabilityType?new s.google.ima.dai.api.VODStreamRequest(Bo({},O6(t),{contentSourceId:t.contentSourceID,videoId:t.videoID})):new s.google.ima.dai.api.LiveStreamRequest(Bo({},O6(t),{assetKey:t.assetKey}))}(t);t.enableNonce&&(i.enableNonce=!0),this.Lre.requestStream(i)}er(){this.Zde(!1),this.Lre.reset()}gn(){this.$o();const t=google.ima.dai.api.StreamEvent.Type;this.Lre.removeEventListener(t.AD_BREAK_STARTED,this.Xde),this.Lre.removeEventListener(t.AD_PROGRESS,this.zde),this.Lre.removeEventListener(t.CLICK,this.V$t),this.Lre.removeEventListener(t.COMPLETE,this.qde),this.Lre.removeEventListener(t.CUEPOINTS_CHANGED,this.Yde),this.Lre.removeEventListener(t.ERROR,this.Ss),this.Lre.removeEventListener(t.FIRST_QUARTILE,this.Kde),this.Lre.removeEventListener(t.LOADED,this.jde),this.Lre.removeEventListener(t.MIDPOINT,this.Qde),this.Lre.removeEventListener(t.STARTED,this.Jde),this.Lre.removeEventListener(t.STREAM_INITIALIZED,this.$de),this.Lre.removeEventListener(t.THIRD_QUARTILE,this.tfe),this.Lre.removeEventListener(t.AD_BREAK_ENDED,this.efe),this.er(),this.ife&&Gt(this.ife)}sfe(t){this.Lre.onTimedMetadata(t)}nfe(t,e,i){this.Lre.processMetadata(t,e,i)}rfe(t){const e=this.Lre.previousCuePointForStreamTime(t);if(e)return{VO:e.end,FO:e.start,JR:e.played}}ofe(t,e){const i=this.rfe(t);if(!i)return;const s=t>e&&i.VO>e,n=i.VO>t&&i.FO<=t;return i.JR||!s&&!n?void 0:i.FO}Zde(t){this.v0t&&(this.v0t.style.display=t?"block":"none")}constructor(t,e,i){super(),this.Lre=t,this.v0t=e,this.ife=i,this.Xde=t=>{this.Zde(!0);const e=F6(t),i=W6(t);this.wo(new T6(e,i))},this.efe=t=>{this.Zde(!1);const e=F6(t),i=W6(t);this.wo(new k6(e,i))},this.zde=t=>{const e=F6(t),i=W6(t);this.wo(new E6(e,i))},this.V$t=t=>{const e=F6(t),i=W6(t);this.wo(new R6(e,i))},this.qde=t=>{const e=F6(t),i=W6(t);this.wo(new L6(e,i))},this.Yde=t=>{const e=F6(t),i=W6(t);this.wo(new x6(e,i))},this.Ss=t=>{const e=F6(t),i=W6(t);this.wo(new I6(e,i))},this.Kde=t=>{const e=F6(t),i=W6(t);this.wo(new P6(e,i))},this.jde=t=>{const e=F6(t),i=W6(t);this.wo(new S6(e,i))},this.Qde=t=>{const e=F6(t),i=W6(t);this.wo(new D6(e,i))},this.Jde=t=>{const e=F6(t),i=W6(t);this.wo(new C6(e,i))},this.$de=t=>{const e=F6(t),i=W6(t);this.wo(new N6(e,i))},this.tfe=t=>{const e=F6(t),i=W6(t);this.wo(new M6(e,i))},this.v0t&&(this.v0t.style.display="none",this.Lre.setClickElement(this.v0t));const s=google.ima.dai.api.StreamEvent.Type;this.Lre.addEventListener(s.AD_BREAK_STARTED,this.Xde),this.Lre.addEventListener(s.AD_PROGRESS,this.zde),this.Lre.addEventListener(s.CLICK,this.V$t),this.Lre.addEventListener(s.COMPLETE,this.qde),this.Lre.addEventListener(s.CUEPOINTS_CHANGED,this.Yde),this.Lre.addEventListener(s.ERROR,this.Ss),this.Lre.addEventListener(s.FIRST_QUARTILE,this.Kde),this.Lre.addEventListener(s.LOADED,this.jde),this.Lre.addEventListener(s.MIDPOINT,this.Qde),this.Lre.addEventListener(s.STARTED,this.Jde),this.Lre.addEventListener(s.STREAM_INITIALIZED,this.$de),this.Lre.addEventListener(s.THIRD_QUARTILE,this.tfe),this.Lre.addEventListener(s.AD_BREAK_ENDED,this.efe)}};function O6(t){const e=google.ima.dai.api.StreamRequest.StreamFormat;var i;return{apiKey:t.apiKey,authToken:t.authToken,format:"dash"===t.format?e.DASH:e.HLS,networkCode:t.networkCode,streamActivityMonitorId:t.streamActivityMonitorID,adTagParameters:t.adTagParameters,omidAccessModeRules:null!=(i=z1(t.omidAccessModeRules))?i:{}}}function F6(t){const e=t.getStreamData(),i=e.adProgressData;let s;i&&(s={p6t:i.adBreakDuration,hfe:i.duration,w6t:i.adPosition,SR:i.currentTime,ct:i.duration,y6t:i.totalAds});return{afe:s,ufe:(e.cuepoints||[]).map((t=>({FO:t.start,VO:t.end,JR:t.played}))),cfe:e.errorMessage||void 0,lfe:e.manifestFormat||void 0,dfe:e.streamId||void 0,ffe:(e.subtitles||[]).map((t=>({_fe:t.webvtt,vfe:t.ttml,gs:t.language}))),Gu:e.url}}function V6(t){return{NYt:t.getAdSlotId(),L2t:t.getContent(),Dk:t.getContentType(),Ti:t.getHeight(),ji:t.getWidth()}}function W6(t){const e=t.getAd();if(!e)return;const i=e.getAdPodInfo(),s=e.getCompanionAds().map(V6);return{oKt:e.getAdId(),n9t:{w6t:i.getAdPosition(),BJt:i.getMaxDuration(),_se:i.getPodIndex(),YBt:i.getTimeOffset(),y6t:i.getTotalAds()},Uqt:e.getAdSystem(),gse:e.getAdvertiserName(),PYt:e.getApiFramework(),jqt:s,dYt:e.getCreativeId(),z9t:e.getCreativeAdId(),pse:e.getDealId(),ON:e.getDescription(),ct:e.getDuration(),nH:e.getTitle(),mfe:e.getUniversalAdIdRegistry(),gfe:e.getUniversalAdIdValue(),W9t:e.getVastMediaHeight(),V9t:e.getVastMediaWidth(),L9t:e.getWrapperAdIds(),B9t:e.getWrapperAdSystems(),O9t:e.getWrapperCreativeIds()}}function U6(){const t=h.body.lastElementChild;if(t instanceof HTMLIFrameElement&&"Advertisement"===t.title)return t}r(),r(),r();var G6="theo-dai-clickthrough",H6="urn:google:dai:2018",Z6=class{get ka(){const t=this,e=this.pfe;return{contentTimeForStreamTime:e=>t.Lre?t.Lre.Gde(e):e,streamTimeForContentTime:e=>t.Lre?t.Lre.Hde(e):e,replaceAdTagParameters(e){t.Lre&&t.Lre.replaceAdTagParameters(e)},get snapback(){return t.wfe},set snapback(e){t.wfe=e},get sourceTransformer(){return e.yfe},set sourceTransformer(t){e.yfe=t}}}ER(t){this.j9.Yw(),this.j9=new da;ah(So(this.Nse(t,this.j9.Vw),this.j9))}async Nse(t,e){if(J(e),!this.bfe||!this.Lre)return this.ea.Afe(t);if(this.bfe.Kst&&!this.Sfe)return;const i=this.ea.kR();if(this.wfe){const s=this.Lre.ofe(t,i);if(s){this.ea.Afe(s),await this.Lre.vy(gs.AD_BREAK_ENDED,e);if(this.Lre.rfe(t).VO>t)return}}this.ea.Afe(t)}oI(){const t=this.bfe&&this.bfe.Kst;if(t){const e=se.xn(this.ea.Tfe()),i=t.YBt,s=i+t.BJt,n=new se([i,s]);return e.Sn(n).ks()}return this.ea.Tfe()}async ynt(t,e){if(!t)return this.ea.kfe(t,e);let i=t;try{this.ea.nt.yn(Se.OI,this.Efe),i=await this.pfe.xfe(t,e),this.bfe&&this.Lre&&(this.Rfe=!0)}catch(t){if(th(t),t.code===lk.LICENSE_INVALID)return;const e=new A(Qa.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.zG=Xs(e),this.qG=e,this.ea.wo(new Ga(e)),e}await this.ea.kfe(i,e)}er(){if(this.Rfe){if(this.ea.nt.fn(Se.OI,this.Efe),this.Qre){this.Qre.fn(No.UI,this.Ife);for(const t of this.Qre.L.uC)t.fn(T.sO,this.Cfe);this.Qre=void 0}this.zG=void 0,this.qG=void 0,this.j9.Yw(),this.bfe&&this.bfe.er(),this.Lre&&this.Lre.er(),this.Rfe=!1}}get lt(){return this.zG||this.ea.Pfe()}get DR(){return this.qG||this.ea.Dfe()}gn(){this.er(),this.ea.Nfe(),this.Lre&&this.Lre.gn()}constructor(t,e,i,s,n){this.Qre=void 0,this.zG=void 0,this.qG=void 0,this.j9=new da,this.Rfe=!1,this.wfe=!0,this.Efe=t=>{const e=t.Ht;e.Lt===hs.$V&&(e.Aw===Lr.ID3||e.Aw===Lr.EVENT_STREAM&&e.MC===H6)&&(e.xE=bh.NC,this.Qre=e,e.yn(No.UI,this.Ife))},this.Ife=t=>{t.BO.yn(T.sO,this.Cfe)},this.Cfe=t=>{var e,i;if(this.Lre)if((null==(e=this.Qre)?void 0:e.Aw)===Lr.ID3){const e=t.BO.U;"TXXX"===e.id&&this.Lre.sfe({TXXX:e.text})}else if((null==(i=this.Qre)?void 0:i.Aw)===Lr.EVENT_STREAM){const e=t.BO.U;this.Lre.nfe(H6,e,t.nV)}},this.ea=t,this.Lre=e,this.bfe=i,this.pfe=s,this.Sfe=n,i&&e&&this.ea.qc&&this.ea.qc.tnt(i.Q9t)}};r(),r();var X6=class extends Zi{get Mfe(){return this.Lfe}get tQt(){return I.Yh}constructor(t,e,i,s=!0){super(i),this.Lfe=s,this.v2t=t,this.m2t=e}},z6=class extends $1{Bfe(){const t=[gs.STARTED,gs.FIRST_QUARTILE,gs.MIDPOINT,gs.THIRD_QUARTILE,gs.COMPLETE];this.Lre.yn(t,this.Ofe),this.Lre.yn(gs.AD_BREAK_ENDED,this.efe),this.Lre.yn(gs.AD_PROGRESS,this.zde),this.Lre.yn(gs.CUEPOINTS_CHANGED,this.Yde)}get u2t(){return this.$9t}get $1t(){return this.b3t}Ffe(t){let e=t.n9t.YBt,i=this.c$t||this.findAdBreakWithPredicate(e,(t=>!t.JR));if(!i){const s=t.n9t.BJt;e=this.ea.kR(),i=new X6(s,s,e,!1),i.p2t(),this.l$t.push(i)}return i}Vfe(t){switch(t){case gs.STARTED:this.$9t=!0;break;case gs.AD_BREAK_ENDED:this.$9t=!1}}Wfe(t,e,i){if(e)switch(t){case gs.STARTED:case gs.FIRST_QUARTILE:case gs.MIDPOINT:case gs.THIRD_QUARTILE:case gs.COMPLETE:this.$1t.wo(new La(this.c$t))}if(i)switch(t){case gs.STARTED:case gs.FIRST_QUARTILE:case gs.MIDPOINT:case gs.THIRD_QUARTILE:case gs.COMPLETE:this.$1t.wo(new cn(this.t$t,this.t$t.P9t))}switch(t){case gs.COMPLETE:this.$1t.wo(new xn(this.t$t,this.j9t.P9t));break;case gs.AD_BREAK_ENDED:this.$1t.wo(new Lh(this.Kst))}switch(t){case gs.FIRST_QUARTILE:this.$1t.wo(new Is(this.t$t,this.j9t.P9t));break;case gs.MIDPOINT:this.$1t.wo(new ks(this.t$t,this.j9t.P9t));break;case gs.THIRD_QUARTILE:this.$1t.wo(new Cs(this.t$t,this.j9t.P9t))}}Ufe(t){const e=t.snt,i=this.Ffe(e),s=function(t,e){if(t.qc.length)return!1;for(let i=0;i<e;i++){const e=new K1(t,Ns.Ejt);t.y2t(e)}return!0}(i,e.n9t.y6t),n=function(t,e){const i=e.n9t.w6t-1;return t.qc[i]}(i,e),r=function(t,e){return t.I2t!==m1.READY&&(t.F9t(e),!0)}(n,e);this.t$t=n,this.c$t=i,i.p2t(),this.Wfe(t.type,s,r)}Gfe(t){for(const e of this.l$t)if(gh(t,e.YBt))return e}findAdBreakWithPredicate(t,e){for(const i of this.l$t)if(gh(i.YBt,t)&&e(i))return i}get Hfe(){const t=this.findAdBreakWithPredicate(0,(t=>t.Mfe));let e=0;return t&&(e=t.BJt),e}Zfe(t,e){let i;for(const s of this.l$t)s.YBt>=t&&s.YBt<=e&&!s.JR&&(!i||s.YBt>=i.YBt)&&(i=s);return i}DD(){}$st(t){}er(){this.t$t&&(this.$1t.wo(new xn(this.t$t,this.t$t.P9t)),this.t$t=void 0),this.c$t&&(this.$1t.wo(new Lh(this.c$t)),this.c$t=void 0),this.$9t=!1,En(this.l$t)}gn(){this.er(),this.$1t.gn()}constructor(t,e){super(new Ju,I.Yh),this.Lre=t,this.ea=e,this.zde=t=>{const e=this.c$t;if(!e||!this.t$t)return;const i=t.Ude.afe;this.t$t.P9t=i.SR,function(t,e){const i=e.w6t,s=e.p6t,n=e.SR,r=mf(t.qc.slice(0,i-1),(t=>{var e;return null!=(e=t.ct)?e:0}));t.OJt=s-n-r}(e,i)},this.Yde=t=>{const e=t.Ude.ufe;if(e)for(const t of e)if(!this.Gfe(t.FO)){const e=t.VO-t.FO,i=new X6(e,e,t.FO,!0);this.l$t.push(i)}},this.Ofe=t=>{this.Vfe(t.type),this.Ufe(t)},this.efe=t=>{this.$9t=!1,this.t$t=void 0;const e=this.Kst;e&&(e.OJt=0,this.Wfe(t.type,!1,!1),this.c$t=void 0)},this.Bfe()}};function q6(t){if(t.sources)if(rl(t.sources)){for(const e of t.sources)if(Xc(e))return!0}else if(V(t.sources))return Xc(t.sources);return!1}r();var Y6=class{async xfe(t,e){const i=[],s=[];for(const e of t.sources)if(Xc(e)){if(!this.Lre)continue;i.push(e)}else s.push(e);if(0===i.length)return t;let n,r;for(;void 0===n&&0!==i.length;){const{xc:o}=await II.Fg.jH(i,t),h=o;J(e);try{n=await this.Xfe(h,e),s.push(n)}catch(t){th(t),r=t,we(i,h)}}if(0!==t.sources.length&&0===s.length)throw new g("Fatal: unable to play DAI streams.");return r&&ct(r.message),Bo({},t,{sources:s})}async Xfe(t,e){if(!this.Lre)throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const i=this.Lre.vy(gs.LOADED,e),s=this.Lre.vy(gs.ERROR,e),n=t.type===nl.XC?"dash":"hls";this.Lre.VWt(Bo({},t.ssai,{format:n}));const r=await Promise.race([i,s]);if(r.type===gs.LOADED){const e=t.type===nl.XC?nl.XC:nl.qC;return ul(Bo({},t,{src:this.yfe?await this.yfe(r.Ude.Gu||""):r.Ude.Gu,type:e}))}throw g(r.Ude.cfe)}constructor(t){this.Lre=t,this.yfe=t=>t}};xh(function(t){return e=>class extends e{ba(){const t=super.ba(),e=t.ads;if(e){const t=this.zfe.ka;nh(e,{get dai(){return t}})}return t}get Gl(){return this.qfe}Afe(t){super.ER(t)}ER(t,e){this.zfe.ER(t)}Tfe(){return super.oI()}oI(){return this.zfe.oI()}xa(t){return this.zfe.er(),super.xa(t)}async kfe(t,e){return super.ynt(t,e)}async ynt(t,e){return this.zfe.ynt(t,e)}Pfe(){return super.PR()}Dfe(){return super.NR()}PR(){return this.zfe.lt}NR(){return this.zfe.DR}Nfe(){super.gn()}gn(){this.zfe.gn(),this.v0t&&(Gt(this.v0t),this.v0t.removeEventListener("keydown",this.Yfe),this.v0t.removeEventListener("click",this.Yfe),this.v0t=void 0),this.Kfe&&(Gt(this.Kfe),this.Kfe=void 0)}constructor(e,i){super(e,i),this.qfe=!1,this.Yfe=t=>{13===t.which&&this.v0t.click(),this.TI()};const s=this.AI(),n=i.ads.googleIma.useAdUiElementForSsai;var r;const o=null!=(r=i.ads.googleIma.allowSeekingForGoogleDai)&&r;let a,u;try{var c;n?(this.Kfe=h.createElement("div"),Nh(this.Kfe),this.Kfe.className="theo-dai-ad-ui"):(this.v0t=h.createElement("button"),this.v0t.className=G6),a=t(s,this.v0t,this.Kfe),u=new z6(a,this);const e=null!=(c=this.v0t)?c:this.Kfe;e&&this.we.appendChild(e),this.qfe=!0}catch(t){this.v0t=void 0,this.Kfe=void 0}const l=new Y6(a);this.zfe=new Z6(this,a,u,l,o),this.v0t&&(this.v0t.addEventListener("keydown",this.Yfe),this.v0t.addEventListener("click",this.Yfe))}}}((function(t,e,i){if(!(s.google&&s.google.ima&&V(s.google.ima.dai)))throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const n=U6(),r=new google.ima.dai.api.StreamManager(t,i),o=U6();return new B6(r,e,o&&o!==n?o:void 0)})),io.Mst),r(),r(),r();var K6=class{get jfe(){return void 0===this.Qfe?0:(performance.now()-this.Qfe)/1e3}Jfe(t){this.$fe=t,this.e_e.t_e(t),this.ea.yn(Ti.ro,this.Rce),this.ea.yn(Ti.Cy,this.Yre),this.ea.yn(Ti.sb,this.Doe),this.ea.yn(yo.da,this.O6),this.ea.yn(tl.FL,this.i_e),this.ea.yn([tl.ML,tl.LL,tl.VL],this.s_e),this.ea.yn(Ti.xy,this.n_e),xo.pY(this.KNt)}r_e(){this.ea.fn(Ti.ro,this.Rce),this.ea.fn(Ti.Cy,this.Yre),this.ea.fn(Ti.sb,this.Doe),this.ea.fn(yo.da,this.O6),this.ea.fn(tl.FL,this.i_e),this.ea.fn([tl.ML,tl.LL,tl.VL],this.s_e),this.ea.fn(Ti.xy,this.n_e),xo._Y(this.KNt),this.o_e||(this.e_e.h_e(this.a_e),this.e_e.u_e()),this.c_e&&this.l_e(),this.$fe=void 0,this.d_e=!1,this.o_e=!1,this.a_e=-1/0,En(this.f_e)}__e(){this.d_e&&this.e_e.v_e(),this.Qfe=performance.now(),this.m_e=p(this.g_e,6e4)}l_e(){this.e_e.p_e(this.jfe),this.c_e=!1,this.Qfe=void 0,this.m_e&&(m(this.m_e),this.m_e=void 0)}w_e(){if(S(this.ea.Sd()))return;const t=10*function(t,e){return _.floor(t/e)}(this.ea.kR()/this.ea.Sd()*100,10);ms(this.f_e,t)||(this.f_e.push(t),this.e_e.y_e(t))}constructor(t,e){this.ea=t,this.e_e=e,this.d_e=!1,this.o_e=!1,this.f_e=[],this.a_e=-1/0,this.c_e=!1,this.Rce=()=>{this.d_e||(this.e_e.b_e(),this.c_e&&this.e_e.v_e(),this.d_e=!0)},this.Yre=()=>{this.e_e.A_e(),this.o_e=!0},this.Doe=()=>{this.a_e<this.ea.kR()&&(this.a_e=this.ea.kR()),this.w_e()},this.i_e=()=>{this.d_e&&(this.S_e=performance.now(),this.e_e.T_e(this.ea.kR()))},this.s_e=()=>{this.S_e&&(this.e_e.k_e((performance.now()-this.S_e)/1e3),this.S_e=void 0)},this.O6=()=>{this.a_e<this.ea.kR()&&(this.a_e=this.ea.kR()),this.e_e.Bnt(this.ea.PR().message)},this.n_e=()=>{const t=this.ea.Sd()===1/0;t&&!this.c_e&&(this.c_e=t,this.__e())},this.KNt=()=>{this.e_e.h_e(this.a_e),this.e_e.E_e()},this.g_e=()=>{void 0!==this.Qfe&&this.e_e.x_e(this.jfe)}}};r();var j6=class{t_e(t){this.R_e(["setDocumentTitle",t.itemTitle]),this.R_e(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.R_e(["trackPageView"])}b_e(){this.I_e("item first play","viewing","1")}u_e(){this.I_e("item skipped","skipped","1")}y_e(t){this.I_e("item progress","percent",""+t)}E_e(){this.I_e("item abandoned","window closed","1")}h_e(t){this.I_e("item time","watched",""+t)}A_e(){this.I_e("item finished","ended","1")}T_e(t){this.I_e("buffering started","timestamp",""+t)}k_e(t){this.I_e("buffering ended","duration",""+t)}Bnt(t){this.I_e("error","message",""+t)}v_e(){this.I_e("livestream first play","viewing","1")}x_e(t){this.I_e("livestream progress","duration",""+t)}p_e(t){this.I_e("livestream time","watched",""+t)}I_e(t,e,i){this.R_e(["trackEvent","Video",t,e,i])}R_e(t){const e="undefined"!=typeof _paq?_paq:void 0;e?e.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}};r();var Q6=class{get C_e(){if(!this.P_e)return;const t=this.ea.kR()/this.P_e;return _.floor(4*t)+1}get D_e(){return void 0!==this.P_e}Jfe(){this.Uc.yn("hnt",this.ede),this.Uc.yn("ant",this.ide),this.Uc.yn("G2t",this.rde),this.Uc.yn("r2t",this.sde),this.ea.yn(Ti.sb,this.Doe),xo.pY(this.KNt)}r_e(){this.Uc.fn("hnt",this.ede),this.Uc.fn("ant",this.ide),this.Uc.fn("G2t",this.rde),this.Uc.fn("r2t",this.sde),this.ea.fn(Ti.sb,this.Doe),En(this.N_e),xo._Y(this.KNt),this.P_e=void 0}constructor(t,e,i){this.ea=t,this.Uc=e,this.e_e=i,this.N_e=[],this.ede=()=>{this.P_e=this.ea.Sd(),this.e_e.M_e(this.P_e)},this.ide=()=>{this.P_e&&(this.e_e.L_e(this.P_e),En(this.N_e),this.P_e=void 0)},this.rde=t=>{if(!this.P_e)return;const e=this.P_e-this.P_e*t.W2t;this.e_e.B_e(e),this.P_e=void 0},this.sde=()=>{this.P_e=this.ea.Sd(),this.e_e.O_e()},this.Doe=()=>{const t=this.C_e;if(this.D_e&&t&&!ms(this.N_e,t)){switch(t){case 1:this.e_e.F_e();break;case 2:this.e_e.V_e();break;case 3:this.e_e.W_e();break;case 4:this.e_e.U_e()}this.N_e.push(t)}},this.KNt=()=>{this.e_e.G_e()}}};r();var J6=class{M_e(t){this.e_e.I_e("ad start","duration",""+t)}L_e(t){this.e_e.I_e("ad finished","duration",""+t)}B_e(t){this.e_e.I_e("ad skipped","remaining time",""+t)}O_e(){this.e_e.I_e("ad blocker","detected","1")}F_e(){this.e_e.I_e("ad progress","firstQuartile","")}V_e(){this.e_e.I_e("ad progress","secondQuartile","")}W_e(){this.e_e.I_e("ad progress","thirdQuartile","")}U_e(){this.e_e.I_e("ad progress","fourthQuartile","")}G_e(){this.e_e.I_e("ad abandoned","window closed","1")}constructor(t){this.e_e=t}};function $6(t){return t&&"streamone"===t.integration}xh((function(t){return class extends t{gn(){this.fn(Ti.ao,this.uo),this.H_e&&(this.Z_e&&this.Z_e.r_e(),this.X_e&&this.X_e.r_e(),this.H_e=!1),super.gn()}constructor(t,e){super(t,e),this.H_e=!1,this.uo=()=>{this.H_e&&(this.Z_e.r_e(),this.X_e&&this.X_e.r_e());const t=this.tu();if(this.H_e=!1,!t)return;const e=function(t){if(t.analytics)for(let e of t.analytics)if($6(e))return e}(t);e&&(this.H_e=!0,this.Z_e.Jfe(e),this.X_e&&this.X_e.Jfe())};const i=new j6;if(this.Z_e=new K6(this,i),this.qc){const t=new J6(i);this.X_e=new Q6(this,this.qc,t)}this.yn(Ti.ao,this.uo)}}}),io.Ost),r(),r(),r(),r(),r(),r();var t9=class extends SV{async w2(t,e,i){const s=await e9(t);await super.w2(s,e,i),this.z_e(s,e)}async _2(t,e,i){const s=await e9(t);await super._2(s,e,i),this.z_e(s,e)}z_e(t,e){const i=this.Y_e.q_e;if(void 0===i)return;const s=e.F1;let n;if(this.K_e!==s&&(this.K_e=s,i.setLevelSwitching(s),i.setContainerFormat(2)),function(t){return Fa.call(t,"cit")}(e)){const t=e.cit,r=e.cit+e.ct;n=e.MV,i.newPts(t,r,"video",s)}else 0;i.appendBuffer(t.qk,"video",s,n)}async $S(t,e,i){var s;await super.$S(t,e,i),null==(s=this.Y_e.q_e)||s.flushBuffer(t,e)}constructor(t,e){super(t),this.Y_e=e,this.K_e=void 0}};async function e9(t){switch(t.Aw){case Ce.tJ:return t;case Ce.bk:{const e=await He(t.qk);return{Aw:Ce.tJ,qk:new j(e)}}case Ce.eJ:throw new g("Opaque initialization segments are not supported on web.")}}var i9=class extends bV{mot(t){return t.h3===ee._E?new t9(t,this.Y_e):new SV(t)}constructor(t,e){super(t),this.Y_e=e,this._ot(t)}},s9=class extends Ja{get q_e(){return this.j_e}Q_e(){this.j_e=new LCEVCdec.LCEVCdec(this.FB.YG,this.J_e,{})}ge(){super.ge(),this.$_e()}be(){super.be(),this.J_e.style.display="none"}er(){return this.J_e.style.display="none",void 0!==this.j_e&&(this.j_e.close(),this.Q_e()),super.er()}Hw(){return this.tve=!0,void 0!==this.j_e&&(this.j_e.close(),this.j_e=void 0),Gt(this.J_e),super.Hw()}MH(t){this.wo(new yM(new dk(lk.ABORTED,t)))}$_e(){this.FB.YG.style.display="none",this.J_e.style.display="block"}get jrt(){return this.FB}cot(t){return new i9(t,this)}uot(t){return new Yn(t)}constructor(t){super(t),this.tve=!1,this.eve=t=>{this.tve||(t||this.MH("LCEVC SDK failed to initialize."),this.Q_e())},this.ive=()=>{this.tve||this.MH("LCEVC SDK failed to initialize.")},this.J_e=h.createElement("canvas"),Nh(this.J_e),this.J_e.style.display="none";const e=t.YG;var i;e.parentElement.insertBefore(this.J_e,null!=(i=e.nextSibling)?i:null),LCEVCdec.ready.then(this.eve,this.ive)}},n9=class extends gV{LH(t){if(t===ee._E)return this.sve=new s9(super.LH(t)),this.sve}async pH(t){this.sve=void 0;const e=t;await e.Hw(),await super.pH(e.jrt)}get nve(){return this.sve}},r9=class extends un{async gn(){for(const t of this.cO.uC)t.fn(No.rC,this.rve);this.rt.fn(Se.OI,this.ove),this.rt.fn(Se.VI,this.hve),await super.gn(),await this.FB.Hw(),await this.wH.pH(this.FB)}constructor(t,e,i,s,n,r,o,h){const a=new n9(r),u=new ut(a);super(t,e,i,s,n,u.LH(o),h),this.ove=t=>{t.Ht.yn(No.rC,this.rve)},this.hve=t=>{t.Ht.fn(No.rC,this.rve)},this.rve=t=>{var e;const i=null==(e=this.uve.nve)?void 0:e.q_e,s=t.aat.xC;null==i||i.setCurrentLevel(s)},this.wH=u,this.uve=a,this.cO.yn(Se.OI,this.ove),this.cO.yn(Se.VI,this.hve)}};O(new class extends tV{hP(t,e,i,s,n,r,o){const h=new sV(hu.Fg.Rrt,hu.Fg.xrt,hu.Fg.Ert,hu.Fg.Crt);let a=e;return YX.pT()&&(a=new YX(a)),new r9(i,s,n,r,h,a,ee._E,t)}async BH(t){if(!t.lcevc)return!1;if(!await super.BH(t))return!1;if(void 0===s.LCEVCdec)throw new A(Qa.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}FH(){return!1}constructor(...t){super(...t),this.VH=Zt.cG}}),r();var o9=class extends kJ{async gn(){for(const t of this.cO.uC)t.fn(No.rC,this.rve);this.rt.fn(Se.OI,this.ove),this.rt.fn(Se.VI,this.hve),await super.gn(),await this.wH.pH(this.FB)}constructor(t,e,i,s,n,r,o,h){const a=new n9(t),u=new ut(a);super(u.LH(ee._E),e,i,s,n,r,o,h),this.ove=t=>{t.Ht.yn(No.rC,this.rve)},this.hve=t=>{t.Ht.fn(No.rC,this.rve)},this.rve=t=>{var e;const i=null==(e=this.uve.nve)?void 0:e.q_e,s=t.aat.cLt.xC;null==i||i.setCurrentLevel(s)},this.wH=u,this.uve=a,this.cO.yn(Se.OI,this.ove),this.cO.yn(Se.VI,this.hve)}};O(new class extends xJ{hP(t,e,i,s,n,r,o){return new o9(e,i,n,r,iJ(s.libraryLocation),new TJ(s.libraryLocation),new sV(hu.Fg.Rrt,hu.Fg.xrt,hu.Fg.Ert,hu.Fg.Crt),s)}async BH(t,e){if(!t.lcevc)return!1;if(!await super.BH(t,e))return!1;if(void 0===s.LCEVCdec)throw new A(Qa.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}FH(){return!1}constructor(...t){super(...t),this.VH=Zt._G}}),r(),r(),r(),r();var h9=function(t){return t.cve="er",t.lve="dve",t}({}),a9="freewheel-nonlinear-ad",u9=[Ti.xy,Ti.sb,Ti.ob,Ti.Zy,tl.VL,Ti.ro],c9=class t extends Pt{SI(){this.wH.fZ()}fve(){this._ve.yn("ont",this.vve),this._ve.yn(["hnt","ant"],this.mve),this._ve.yn("rnt",this.Uie)}gve(){this._ve.fn("ont",this.vve),this._ve.fn(["hnt","ant"],this.mve),this._ve.fn("rnt",this.Uie)}pve(){this.$1t.nu(this._ve.wve)}yve(){this._ve.bve.yn(u9,this.Ds)}Ave(){this._ve.bve.fn(u9,this.Ds)}get Q1t(){return this}static get K1t(){return I.o$t}get K1t(){return t.K1t}get Kst(){var t;return null!=(t=this._ve.wve.Kst)?t:null}get qst(){const t=this._ve.wve.j9t;return t?[t]:[]}$st(t){}kR(){return this._ve.bve.SR}ER(t,e){}Sd(){return this._ve.bve.ct}IR(){return this._ve.bve.RR}PR(){return this.zG}NR(){return this.qG}lI(){return 0}_I(){return 0}mI(){return this._ve.bve.vI}gI(t){this._ve.bve.vI=t}HR(){return this._ve.bve.GR}ZR(t){this._ve.bve.GR=t}nI(){return this._ve.bve.sI}get jst(){return this._ve.wve.jst}get Qst(){return this._ve.wve.Qst}oI(){return this._ve.bve.rI}YR(){return this._ve.bve.qR}i2t(t){if(this.u2t||this._ve.i2t(t),this._ve.Sve){if(t.type===Ti.Zy&&this.ea.RR)return!0;if(t.type===Ti.Cy)return this._ve.kve.Tve(),!0}return!1}be(){this._ve.be()}TI(){this.qR||this._ve.bve.TI()}async Eve(){if(!this._ve.xve)try{await this._ve.K4t()}catch(t){this.Rve(t,Fc.GENERAL)}}async Ive(){if(this._ve.bve.Cve)return this._ve.bve.kI(),!1;if(this._ve.Pve)try{await this._ve.kve.Dve()}catch(t){this.Rve(t,Fc.PLAYBACK)}return!0}get Nve(){return ji(this.PR())}Rve(t,e){t.name!==h9.cve&&this.$1t.wo(new qh(e,"Ads could not be loaded."))}async kI(){if(this.qR&&this.wo(new H(this.SR)),await this.Eve(),this.Nve)return;const t=await this.Ive();!this.Nve&&t&&this.Uie()}d8t(t,e,i){e===ja.zst&&this._ve.d8t(t)}ge(){this._ve.ge()}DD(){this._ve.bve.DD()}AI(){return this.Let}mR(){return this.wH.pZ.map((t=>t.YG))}f2t(t){}async gn(){await this.EI(),this._ve.gn(),await this.wH.pH(this.FB),this.gve(),this.Ave(),this.$1t.wK(this._ve.wve)}async EI(){this._ve.er(),this.u2t&&(this.ea.ge(),this.w1t(),this.be())}constructor(t,e,i,s,n){super(t,e),this.zG=void 0,this.qG=void 0,this.mve=t=>{const e=t.snt,i="hnt"===t.type;if(e.C2t===Ns.E2t){const t=this.ea.we.classList;i?t.add(a9):t.remove(a9)}i?this.ge():this.be()},this.vve=()=>{this.A3t(),this.ea.TI(),this.ea.be()},this.Uie=()=>{this._ve.xve&&(this.ea.RR||this.ea.kI(),this.be(),this.ea.ge(),this.w1t())},this._ve=s,this.wH=i,this.FB=n,this.Let=n.YG,this.Let.controls=!1,this.fve(),this.pve(),this.yve()}};r(),r(),r();var l9=class extends Zi{get Mve(){return this.Lve}get Bve(){return this.qc[this.Ove]}set Fve(t){this.Ove=t}get Fve(){return this.Ove}get C2t(){return this.P2t}get tQt(){return I.o$t}constructor(t,e,i,s){super(i),this.Lve=s,this.Ove=0,this.P2t=f9(s),this.v2t=t,this.m2t=e}};r();var d9=class extends cs{get Vve(){return this.Wve}set Vve(t){this.Wve!==t&&(this.Wve=t)}get Ti(){return this.td.Mve.getHeight()}get ji(){return this.td.Mve.getWidth()}get GYt(){return this.Vve.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get tQt(){return I.o$t}ba(){return zo(this)}constructor(t,e,i){super(t,e),this.Wve=i}};function f9(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?Ns.E2t:Ns.Ejt}var _9=class t extends sn{async Uve(t,e){this.Gve=t,this.Hve=e,this.Zve(t),await e,this.Xve()}get zve(){return this.qve}get Yve(){return this.Kve}get jve(){return this.Qve}get Kst(){return this.c$t}get j9t(){return this.t$t}get jst(){const t=[];if(this.c$t){const e=this.c$t.Fve;e>=0&&t.push(...this.c$t.qc.slice(e+1))}for(const e of this.Jve)t.push(...e.qc);return t}get Qst(){return this.Jve}Xve(){this.$ve()}Zve(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.tme),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.eme),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.ime),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.nme),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.rme)}ome(){this.Gve&&(this.Gve.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.tme),this.Gve.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.eme),this.Gve.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.ime),this.Gve.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.nme),this.Gve.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.rme))}$ve(){this.qve=this.hme(this.ame),this.Kve=this.hme(this.ume).concat(this.hme(this.cme)),this.Qve=this.hme(this.lme),this.Jve=this.qve.concat(this.Kve).concat(this.Qve)}hme(t){if(!this.Gve)return[];const e=this.Gve.getSlotsByTimePositionClass(t);return this.dme(e)}fme(t){if(!this.c$t)return void 0;const e=t.getSlot().getAdInstances().indexOf(t);-1!==e&&(this.c$t.Fve=e);const i=this.c$t.Bve;return i&&(i.Vve=t),i}_me(t){return Fo(this.Jve,(e=>e.Mve===t))}dme(e){return e.map((e=>{const i=e.getTotalDuration(),s=t.vme(e);return new l9(i,i,s,e)}))}static mme(t,e){const i=t.getAdInstances(),s=[];for(const t of i){const i=f9(t.getSlot()),n=new d9(e,i,t),r=[];n.x2t(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),e.y2t(n),s.push(n)}return s}w0t(){const t=this.j9t;t&&this.wo(new Ho(t,this.gme()))}pme(){const t=this.j9t;t&&(this.wo(new xn(t,t.Vve.getPlayheadTime())),this.t$t=void 0)}wme(t){const e=this.Kst;e&&(e.OJt=function(t,e,i){void 0===i&&(i=0);let s=0;const n=t.qc.length;for(let r=e;r<n;r++){const n=t.qc[r],o=n.ct;if(n){let t=o;r===e&&(t=Vs(o-i,0,o)),s+=t}}return s}(e,e.Fve,t))}static vme(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}gme(){const t=this.j9t;if(!t)return 0;const e=t.Vve;return e.getPlayheadTime()/e.getDuration()}yme(t){we(this.Jve,t),we(this.qve,t),we(this.Kve,t),we(this.Qve,t)}er(){this.ome(),this.qve.length=0,this.Kve.length=0,this.Qve.length=0,this.Jve.length=0,this.t$t=void 0,this.c$t=void 0,this.Gve=void 0,this.Hve=void 0}gn(){this.er(),this.$o()}constructor(e,i){super(),this.Vs=e,this.QT=i,this.ame=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.ume=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.lme=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.cme=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.qve=[],this.Kve=[],this.Qve=[],this.Jve=[],this.tme=e=>{const i=e.slot,s=this._me(i);s&&(t.mme(i,s),this.c$t=s,s.p2t(),this.yme(s),s.C2t===Ns.Ejt&&this.wo(new La(s)))},this.eme=()=>{const t=this.Kst;t&&t.C2t===Ns.Ejt&&(this.wo(new Lh(t)),this.QT.src=""),this.c$t=void 0},this.ime=t=>{const e=this.fme(t.adInstance);e&&(this.wo(new cn(e,e.Vve.getPlayheadTime())),this.t$t=e),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Vs.style.cursor="pointer",this.Vs.addEventListener("click",this.bme))},this.nme=()=>{this.Vs.style.cursor="",this.Vs.removeEventListener("click",this.bme)},this.bme=()=>{this.j9t&&this.j9t.Vve.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.rme=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.pme();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.w0t(),this.pme()}}}};r();var v9=class t extends sn{Ame(){if(this.Ogt){this.Ogt.setAdVolume(m9(this.GR,this.vI))}}Sme(t){this.Ogt=t,this.Zve(t)}Zve(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.Tme),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.kme),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Eme),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.xme),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.Rme),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Ime)}Cme(){const t=this.Ogt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.Tme),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.kme),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Eme),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.xme),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.Rme),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Ime))}kI(){this.Byt.Kst&&(this.Byt.Kst.Mve.resume(),this.qR=!1)}TI(){this.Byt.Kst&&(this.Byt.Kst.Mve.pause(),this.qR=!0)}get SR(){const t=this.Byt.j9t;return t&&(this.SR=t.Vve.getPlayheadTime()),this.hZ}set SR(t){this.hZ=t}get ct(){return this.DA}get Cve(){return!!this.Byt&&void 0!==this.Byt.Kst}get qR(){return this.cZ}set qR(t){this.cZ=t}get vI(){return this.ZA}set vI(t){this.Ogt&&this.Ogt.setAdVolume(t),this.ZA=t}get GR(){return this.Ogt&&(this.Pme=0===this.Ogt.getAdVolume()),this.Pme}set GR(t){this.Ogt&&this.Ogt.setAdVolume(m9(t,this.vI)),this.Pme=t}get rI(){return this.h4}get RR(){return this.R4}set RR(t){this.R4=t}get sI(){return this.I4}static Dme(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}Nme(e){const i=t.Dme(e);this.Ogt&&i&&this.Ogt.setVideoState(i)}DD(){const t=this.Byt.j9t;t&&t.Vve.skip()}er(){if(this.Cme(),this.Ogt){this.Nme("stop"),this.Ogt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.Ogt.getTemporalSlots();for(const e of t)e.stop();this.Ogt.dispose(),this.Ogt=void 0}this.DA=NaN,this.RR=!1,this.I4=Ht.$B,this.SR=0,this.Mme=0,this.qR=!0,void 0!==this.Lme&&(m(this.Lme),this.Lme=void 0)}gn(){this.er(),this.$o(),this.Byt.fn("ont",this.jd),this.Yu.fn(Ka.pn,this.kme),this.f0t.removeEventListener("click",this.Bme)}constructor(t,e,i,s){super(),this.ea=t,this.Yu=e,this.Byt=i,this.f0t=s,this.h4=se.mB().ks(),this.cZ=!0,this.DA=NaN,this.Pme=!1,this.R4=!1,this.I4=Ht.$B,this.hZ=0,this.Mme=0,this.Tme=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const e=t.Vve,i=e.getPlayheadTime(),s=e.getDuration();return i>=s||gh(s,i)})(this.Byt.j9t)||(this.qR=!0,this.wo(new fl(this.SR)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.qR=!1,this.wo(new Wi(this.SR));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.Ogt){const t=this.Ogt.getAdVolume();0===t?this.Pme=!0:this.ZA=t,this.wo(new rs(this.SR,this.vI))}}},this.Eme=()=>{this.RR=!1;const t=this.qR;if(this.qR=!1,t&&(this.wo(new H(this.SR)),this.wo(new Wi(this.SR))),this.I4=Ht.eO,this.SR=0,!this.Byt.j9t)return;const e=this.Byt.j9t.Vve;this.DA=e.getDuration(),this.wo(new Ls(this.DA)),this.Lme=p((()=>{if(!this.Cve)return void this.Up();this.Byt.wme(this.SR);const t=e.getPlayheadTime();xs(t,this.Mme,.001)||this.wo(new ri(t,void 0)),this.Mme=t}),250),this.Ogt&&this.Ogt.setAdVolume(m9(this.GR,this.vI))},this.Bme=()=>{const t=this.Byt.j9t;t&&(t.C2t===Ns.E2t?this.ea.TI():this.qR||this.TI())},this.Up=()=>{m(this.Lme),this.Lme=void 0},this.xme=()=>{this.Up(),this.RR=!0},this.Rme=()=>{this.Nme("pause")},this.Ime=()=>{this.Nme("playing")},this.jd=t=>{t.td.C2t===Ns.Ejt&&(this.qR=!1)},this.kme=()=>{this.Ogt&&this.Ogt.resize(this.Yu.Mu,this.Yu.Pu)},this.ZA=t.vI,i.yn("ont",this.jd),this.Yu.yn(Ka.pn,this.kme),this.f0t.addEventListener("click",this.Bme)}};function m9(t,e){return t?0:e}r(),r();var g9=class extends z{get name(){return h9.lve}constructor(){super("A FreeWheel Ad Error occurred")}};r();var p9=class extends z{get name(){return h9.cve}constructor(){super("A FreeWheel Reset Error Occurred")}},w9=0;var y9=class{Ome(t,e,i){t.setNetwork(e.networkId),t.setServer(e.adServerUrl);const s=this.Ogt;if(s.setProfile(e.profile),e.assetId&&e.assetDuration&&s.setVideoAsset(e.assetId,e.assetDuration),e.siteSectionId&&s.setSiteSection(e.siteSectionId),s.registerVideoDisplayBase(i),e.cuePoints&&e.cuePoints.length)for(const t of e.cuePoints)s.addTemporalSlot("cue-"+ ++w9,t.adUnit,t.timeOffset);const n=e.customData;if(V(n)){const t=w.keys(n);for(const e of t){const t=n[e];s.addKeyValue(e,t)}}}async Fme(){this.Ogt.submitRequest(),await this.Vme.Vb}er(){this.Ogt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Wme),this.Vme.Fb(new p9)}constructor(t,e,i,s){this.Ogt=e,this.Wme=t=>{this.Ogt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Wme),t.success?this.Vme.Ob(void 0):this.Vme.Fb(new g9)},this.Ome(t,i,s),e.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Wme),this.Vme=new os}};r(),r();var b9=class{Ume(){this.Gve.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.eme),this.Gve.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.eme)}get Gme(){return this.qw.Vb}oUt(){this.Ume(),this.qw.Fb(new p9)}constructor(t){this.Gve=t,this.eme=t=>{this.Ume(),this.qw.Ob(void 0)},this.X6t=t=>{this.Ume(),this.qw.Fb(new g9)},this.qw=new os,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.eme),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.X6t)}},A9=class{wO(t){this.Gve=t}Dve(){return this.Hme(this.Zme.zve)}Tve(){this.Hme(this.Zme.jve)}async Hme(t){if(this.Gve)for(;t.length>0;){this.Xme=new b9(this.Gve);const e=this.Xme.Gme,i=this.Zme.Kst;i&&i.C2t===Ns.E2t&&i.Mve.stop();t.shift().Mve.play();try{await e}finally{this.Xme=void 0}}}er(){this.Xme&&(this.Xme.oUt(),this.Xme=void 0),this.zme=0}gn(){this.ea.fn(Ti.sb,this.qme)}constructor(t,e){this.ea=t,this.Zme=e,this.zme=0,this.qme=()=>{const t=this.ea.kR();for(const e of this.Zme.Yve){const i=new se([this.zme,t],[!0,!0]),s=e.Mve.getTimePosition();if(i.kr(s))switch(e.Mve.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.Hme([e]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:e.Mve.play(),e.Mve.setVisible(!0)}}this.zme=t},t.yn(Ti.sb,this.qme)}},S9=0,T9=class t extends Ju{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++S9}get Sve(){return 0!==this.wve.jve.length}get Pve(){return 0!==this.wve.zve.length}async K4t(){if(!this.eQt)throw new g("Invalid state");const t=this.Yme,e=t.newContext();e.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),e.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const i=new y9(t,e,this.eQt,this.Kme),s=this.wve.Uve(e,i.Fme());this.jme.wO(e),this.bve.Sme(e),this.Qme=i;try{await s}finally{this.bve.Ame(),this.Jme=!0}}get bve(){return this.V6t}get wve(){return this.$me}get xve(){return this.Jme}static tge(t,e,i){const s=h.createElement("div");return s.id=i,s.className="theo-freewheel",e.classList.add("theo-freewheel-video"),s.appendChild(e),t.appendChild(s),s}get kve(){return this.jme}i2t(t){this.bve.Nme(t.type)}ge(){this.f0t.style.display="block",this.QT.style.display="block"}be(){this.f0t.style.display="none",this.QT.style.display="none"}d8t(t){this.eQt=t}er(){this.Jme=!1,this.eQt=void 0,this.wve.er(),this.jme.er(),this.Qme&&(this.Qme.er(),this.Qme=void 0),this.bve.er(),this.QT.src=""}gn(){this.er(),this.V6t.gn(),this.jme.gn(),this.wve.gn(),this.f0t.remove(),this.ea.we.removeChild(this.f0t)}constructor(e,i,n){super(),this.ea=e,this.QT=i,this.Jme=!1,this.Kme=t.createUniqueDisplayBaseId(),this.f0t=t.tge(e.we,i,this.Kme),this.Yme=new s.tv.freewheel.SDK.AdManager,this.$me=new _9(this.f0t,this.QT),this.jme=new A9(this.ea,this.wve),this.nu(this.wve),this.V6t=new v9(e,n,this.wve,this.f0t)}};function k9(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function E9(t,e,i){if(void 0!==e&&S(e)||e<0||e===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return i}return q$(e)}Ih.Fg.IZ(new class{get X1t(){return I.o$t}RZ(t){return t.integration===yu.FREEWHEEL}z1t(t,e,i){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new xI(t.Lu,t.zl,1,[ee._E]);n.yZ(t.we);const r=n.LH(ee._E),o=new T9(t,r.YG,t.Lu);return new c9(t,e,n,o,r)}Xz(t){const e=nu(t);rl(e.cuePoints)||(e.cuePoints=[]);const i=[],s=t.assetDuration||0;for(const t of e.cuePoints){const e=E9(t.adUnit,t.timeOffset,s),n=k9(t.adUnit);!S(e)&&Yt(n)?(t.adUnit=n,t.timeOffset=e,i.push(t)):Ms.Op("Invalid adUnit/timeOffset combination. Cue was removed.")}return e.cuePoints=i,e}u6(t,e,i,s){i.d8t(t,e,s)}}),r(),r(),r(),r(),r();var x9=self.theoplayerDeviceMetadata;function sa(t){return t.navigator&&t.navigator.userAgent||""}r(),r(),r(),r();var R9={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function tn(t,e){const i=R9[e];return!!i&&Boolean(sa(t).match(i))}function I9(t){return tn(t,"Android")}function C9(t){return tn(t,"Windows Phone")}function P9(t){return tn(t,"iOS")&&!C9(t)}function D9(t){return tn(t,"Ubuntu")}var Ic=/Windows (NT|Phone) ([0-9.]+)/i,N9=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,M9={"Windows 10":Ic,"Windows 8.1":Ic,"Windows 8":Ic,"Windows 7":Ic,"Windows Vista":Ic,"Windows Server 2003":Ic,"Windows XP":Ic,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":N9,"Mac OS":N9,"Chrome OS":void 0};function L9(t,e){const i=M9[e];return i?sa(t).match(i):null}function B9(t){return t.split(/[_.]/).map((t=>x(t,10)))}function O9(t){if(function(t){return Boolean(sa(t).match(/Windows/i))}(t)){if(function(t){return tn(t,"Windows 10")}(t))return"Windows 10";if(C9(t))return"Windows Phone";if(function(t){return tn(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return tn(t,"Windows 8")}(t))return"Windows 8";if(function(t){return tn(t,"Windows 7")}(t))return"Windows 7";if(function(t){return tn(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return tn(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return tn(t,"Windows XP")}(t))return"Windows XP"}else{if(I9(t))return"Android";if(P9(t))return"iOS";if(function(t){return tn(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return tn(t,"Mac OS")}(t))return"Mac OS";if(D9(t))return"Ubuntu";if(function(t){return tn(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return tn(t,"Linux")&&!D9(t)}(t))return"Linux"}}function F9(t,e){const i=function(t){const e=L9(t,"Windows 10");return e&&e.length>2?B9(e[2]):void 0}(t),s=function(t){const e=L9(t,"Mac OS X");return e&&e.length>2?B9(e[2]):void 0}(t),n=function(t){const e=L9(t,"Android");return e&&e.length>1?B9(e[1]):void 0}(t),r=function(t){const e=L9(t,"iOS");return e&&e.length>3?B9(e[3]):void 0}(t),o=function(t){const e=L9(t,"Chrome OS");return e&&e.length>0?B9(e[0]):void 0}(t);return i?i.length>e?i[e]:void 0:s?s.length>e?s[e]:void 0:n?n.length>e?n[e]:void 0:r?r.length>e?r[e]:void 0:o&&o.length>e?o[e]:void 0}function V9(t){const e=function(t){return F9(t,0)}(t),i=function(t){return F9(t,1)}(t),s=function(t){return F9(t,2)}(t);if(void 0!==e)return void 0===i?""+e:void 0===s?e+"."+i:e+"."+i+"."+s}var W9={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function U9(t,e){const i=W9[e];return!!i&&Boolean(sa(t).match(i))}function G9(t){return Boolean(sa(t).match(/Mobi/i))}function H9(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||Z9(t)}function Z9(t){return U9(t,"Chrome iOS")}function X9(t){return U9(t,"Firefox")&&!q9(t)}function z9(t){return U9(t,"Firefox Mobile")&&!q9(t)&&G9(t)}function q9(t){return U9(t,"Seamonkey")}function Y9(t){return U9(t,"Firefox iOS")&&!q9(t)}function K9(t){return U9(t,"Safari")&&!U9(t,"Chrome")&&!Z.Gv}function j9(t){return Boolean(n8(t))}function Q9(t){return U9(t,"Edge")}function J9(t){return U9(t,"Edge Chromium")}function $9(t){return U9(t,"IE")}function t8(t){return U9(t,"Vivaldi")}var e8=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,i8={Chrome:e8,"Chrome Mobile":e8,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:e8,HeadlessChrome:e8,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function s8(t,e){const i=i8[e];return i?sa(t).match(i):null}function n8(t){return s8(t,"Opera")}function r8(t){const e=function(t){return s8(t,"Firefox")}(t);return e?C(e[1]):0}function o8(t){const e=function(t){return s8(t,"Firefox iOS")}(t);return e?C(e[1].split(".")[0]):0}function h8(t){const e=function(t){return s8(t,"Safari")}(t);return e?C(e[2].split(".")[0]):0}function a8(t){const e=function(t){return s8(t,"Edge")}(t);return e?C(e[1]):0}function u8(t){const e=function(t){return s8(t,"Edge Chromium")}(t);return e?C(e[1]):0}function c8(t){const e=function(t){return s8(t,"IE")}(t);return e?C(e[2]):0}function l8(t){const e=function(t){return s8(t,"Vivaldi")}(t);return e?C(e[1]):0}function d8(t){if(I9(t))return H9(t)?"Chrome Mobile":X9(t)||z9(t)?"Firefox Mobile":Q9(t)?"Edge Mobile":j9(t)?"Opera Mobile":"Android Browser";if(P9(t)){if(H9(t)||Z9(t))return"Chrome iOS";if(X9(t)||Y9(t))return"Firefox iOS";if(Q9(t))return"Edge Mobile";if(K9(t)||function(t){return K9(t)&&G9(t)}(t))return"Safari Mobile";if(j9(t))return"Opera Mobile"}return function(t){return U9(t,"Chromium")}(t)?"Chromium":function(t){return U9(t,"HeadlessChrome")}(t)?"HeadlessChrome":H9(t)?"Chrome":X9(t)?"Firefox":K9(t)?"Safari":Q9(t)?"Edge":J9(t)?"Edge Chromium":$9(t)?"IE":j9(t)?"Opera":t8(t)?"Vivaldi":void 0}function f8(t){return t8(t)?l8(t):Z9(t)?Number(function(t){const e=i8["Chrome iOS"];return e&&e.exec(sa(t))||[]}(t)[1]):H9(t)?Number(function(t){const e=i8.Chrome;return e&&e.exec(sa(t))||[]}(t)[1]):X9(t)||z9(t)?r8(t):Y9(t)?o8(t):K9(t)?h8(t):Q9(t)?a8(t):J9(t)?u8(t):$9(t)?c8(t):j9(t)?function(t){const e=n8(t);return e&&e[0].indexOf("Opera")>-1?C(e[5]):e?C(e[2].split(".")[0]):0}(t):void 0}var _8=function(t){return t.ege="pc",t.ige="console",t.sge="settop",t.nge="mobile",t.rge="tablet",t.oge="smarttv",t.hge="searchbot",t}({});function v8(t){const e=sa(t);return e.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":e.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(e)?"tablet":/Mobi/.test(e)?"mobile":e.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":e.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(d8(t))}(t)?"pc":void 0}var m8=class{Zz(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){let t=vb.Nb("deviceId");if(t)return t;let e=lC();return vb.Mb("deviceId",e),e}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"9.2.0"),this.age(t),this.uge(),this.cge(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const e=t.connectionType;e?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,e):(this.lge(),Bl.connection&&Bl.connection.addEventListener&&Bl.connection.addEventListener("change",this.lge))}age(t){this.dge(t);const e=t.deviceManufacturer||x9&&x9.manufacturer;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,e);const i=t.deviceModel||x9&&x9.model;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,i)}dge(t){const e=t.deviceType||function(){const t=v8(self);switch(t){case _8.ige:return"game-console";case _8.oge:return"tv";case _8.sge:return"media-streamer";default:return t}}();e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,e)}uge(){const t=d8(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const e=f8(self);void 0!==e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,e.toString())}cge(t){const e=t.deviceOs||O9(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,e);const i=t.deviceOsVersion||V9(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,i.toString())}gn(){Bl.connection&&Bl.connection.removeEventListener&&Bl.connection.removeEventListener("change",this.lge)}constructor(t,e){this.empClient=t,this.agama=e,this.lge=()=>{const t=Ms.cR;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const e=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(Ms.uR);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,e)}}}};xh(function(t){return e=>class extends e{ER(t,e){this.fge&&this.fge.CX(),super.ER(t)}gn(){this.fge&&this.fge.gn(),super.gn()}constructor(e,i){super(e,i),this.wX=new t,this.fge=new fC(this,this.wX,i)}}}(class extends iC{SI(t){this._ge=t,this.vge&&(this.wX=function(t,e){const i=function(t,e){switch(e){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(e,t.logLevel);e.setLogLevel(i);const s=new e.EMPClient(t.config);return function(t,e){return t.setExternalConfig(e.config),t}(s,t)}(t,this.vge),this.wX&&(this.mge=new m8(this.wX,this.vge),this.po=!0))}Gz(){return this.vge||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),!!this.vge}Wz(){return this.po}wz(t,e){if(this.wX&&this.vge)switch(t){case ba.UZ:this.wX.setMeasurement(this.vge.Measurement.BUFFER_LENGTH,e);break;case ba.GZ:this.wX.setMeasurement(this.vge.Measurement.BYTES_RECEIVED,e);break;case ba.ZZ:this.wX.setMeasurement(this.vge.Measurement.SEGMENT_PROFILE_BITRATE,e);break;case ba.XZ:this.wX.setMeasurement(this.vge.Measurement.VIDEO_PROFILE_BITRATE,e);break;case ba.HZ:this.wX.setMeasurement(this.vge.Measurement.SEGMENT_READ_BITRATE,e);break;case ba.BZ:this.wX.setMeasurement(this.vge.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,e);break;case ba.OZ:this.wX.setMeasurement(this.vge.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,e);break;case ba.FZ:this.wX.setMeasurement(this.vge.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,e);break;case ba.VZ:this.wX.setMeasurement(this.vge.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,e);break;case ba.WZ:this.wX.setMeasurement(this.vge.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,e);break;case ba.qZ:this.wX.setMeasurement(this.vge.Measurement.PLAYBACK_POSITION,e);break;case ba.YZ:this.wX.setMeasurement(this.vge.Measurement.NUMBER_OF_FRAMES_DECODED,e);break;case ba.zZ:this.wX.setMeasurement(this.vge.Measurement.NUMBER_OF_FRAMES_DROPPED,e)}}KX(t,e){if(this.wX&&this.vge)switch(t){case JI.$Z:this.wX.setSessionMetadata(this.vge.SessionMetadata.ASSET_DURATION,e);break;case JI.JZ:this.wX.setSessionMetadata(this.vge.SessionMetadata.MANIFEST_URI,e);break;case JI.tX:this.wX.setSessionMetadata(this.vge.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,e);break;case JI.sX:this.wX.setSessionMetadata(this.vge.SessionMetadata.SERVICE_NAME,e);break;case JI.eX:this.wX.setSessionMetadata(this.vge.SessionMetadata.CDN,e);break;case JI.iX:this.wX.setSessionMetadata(this.vge.SessionMetadata.CONTENT_TITLE,e);break;case JI.nX:this.wX.setSessionMetadata(this.vge.SessionMetadata.CONTENT_TYPE,e);break;case JI.rX:this.wX.setSessionMetadata(this.vge.SessionMetadata.CONTENT_DESCRIPTION,e)}}Zz(){this.mge&&this._ge&&this.mge.Zz(this._ge)}Uz(t,e){this.vge&&this.wX&&(this.kz(),function(t,e,i,s){const n=dC(t,i,s);e.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.vge,this.wX,t,e),this.gge=!0)}gn(){this.mge&&this.mge.gn(),this.pge($I.oX),this.wX=void 0}LX(t){this.wge(t)}FX(t,e){this.wX&&this.wX.event(t.code,e)}kz(){this.wX&&this.gge&&(this.wX.exitSession(),this.gge=!1)}pge(t){if(this.wX&&this.vge&&(this.kz(),t===$I.oX))this.wX.shutdown(this.vge.ShutdownType.NORMAL_SHUTDOWN)}BX(t,e,i){this.wge(t,e,i)}wge(t,e,i){if(this.wX&&this.vge)switch(t){case Ae.VL:this.yge(this.vge.ViewState.PLAYING,e,i);break;case Ae.NZ:this.yge(this.vge.ViewState.FAILED,e,i);break;case Ae.MZ:this.yge(this.vge.ViewState.INITIAL_BUFFERING,e,i);break;case Ae.CZ:this.yge(this.vge.ViewState.PAUSED,e,i);break;case Ae.PZ:this.yge(this.vge.ViewState.SEEK,e,i);break;case Ae.DZ:this.yge(this.vge.ViewState.STALLED,e,i);break;case Ae.LZ:this.yge(this.vge.ViewState.NO_ACCESS,e,i)}}yge(t,e,i){if(this.wX)if(e){const s=function(t){return t||""}(i);this.wX.viewStateExtended(t,e.code,s)}else this.wX.viewStateChanged(t)}constructor(){super(),this.po=!1,this.gge=!1,this.vge=s.Agama}}),io.Ost),r(),r(),r(),r(),r();var g8=function(t){return t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last",t}({});r();var _n=function(t){return t.VOD="vod",t.LIVE="live",t}({}),p8=class{get ka(){return this.bge.ka}get lt(){return this.zG}get DR(){return this.qG}Age(t){this.zG=Xs(t),this.qG=t,this.ea.wo(new Ga(t))}xa(t){this.Sge.resetSource(),this.Tge.Bb(),this.kge=!1,this.ea.Ege(t)}async ynt(t,e){if(this.xge.er(),this.kge=!1,!t||!function(t){return t.sources.some((t=>t.integration===CT.UPLYNK))}(t))return await this.ea.Rge(t,e);try{this.Ige=await this.Cge.xfe(t),await this.ea.Rge(this.Ige,e)}catch(t){this.Age(new A(Qa.MANIFEST_LOAD_ERROR,t.message,t))}}gn(){this.j9.Yw(),this.Pge.Yw(),this.ea.fn(Ti.Ty,this.Dge),this.ea.fn(Ti.ro,this.Rce),this.ea.fn(Ti.sb,this.Doe),this.ea.fn(Ti.Cy,this.Yre),this.ea.fn(tl.BL,this.Cd);for(const t of this.Sge.WJt.Ku)t.fn("Nge",this.Mge),t.fn("ont",this.Lge),t.fn("rnt",this.Bge);this.Sge.WJt.fn("int",this.Oge),this.Sge.WJt.fn("ent",this.Fge),this.Sge.destroy(),this.v0t&&(this.v0t.Hw(),this.v0t=void 0),this.kge=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const e=await this.Vge.eTt(t.integrationData.source.prefix,t.integrationData.source.id,this.Pge.Vw,t.integrationData.preplayResponse.sid);this.bge.Wge(e),this.Tge.Uge(e,this.Sge.WJt.Ku)}catch(t){0}}Gge(t){this.Sge.Hge(t),this.Sge.qst.forEach((e=>e.Zge(t))),this.Sge.Xge(this.ea.oI()),this._0t()}ER(t){if(this.Sge.Kst)return;this.j9.Yw(),this.j9=new da;ah(So(this.Nse(t,this.j9.Vw),this.j9))}async Nse(t,e){if(J(e),t<this.ea.kR())return void this.zge(t);let i=[];switch(this.Sge.qge){case g8.PLAY_ALL:i=this.Sge.Yge(this.ea.kR(),t),await this.Kge(t,i,e);break;case g8.PLAY_LAST:const s=this.Sge.Yge(this.ea.kR(),t).pop();i=s?[s]:[],await this.Kge(t,i,e);break;case g8.PLAY_NONE:this.jge(t)}}zge(t){const e=Fo(this.Sge.WJt.Ku,(e=>e.rut.kr(t)));e?this.ea.Qge(e.FO):this.ea.Qge(t)}jge(t){const e=this.Sge.Yge(this.ea.kR(),t).pop();e&&e.rut.kr(t)?this.ea.Qge(e.VO):this.ea.Qge(t)}async Kge(t,e,i){for(const t of e)await this.Jge(t,i);const s=e[e.length-1];s&&s.rut.kr(t)?this.ea.kR()<t&&this.ea.Qge(s.VO):this.ea.Qge(t)}async Jge(t,e){t.fn("Nge",this.Mge);const i=Promise.race([t.vy("rnt",e),t.vy("Nge",e)]);this.Gge(this.ea.kR()),t.io||this.ea.Qge(t.FO),await i,t.yn("Nge",this.Mge)}_0t(){const t=Fo(this.Sge.qst,(t=>t.$ge.length>0));if(t){const e=t.$ge[0];this.v0t||(this.v0t=new pt(this.ea.we),this.v0t.yn("clickstart",this.tpe)),this.v0t.R$t=e}else this.v0t&&(this.v0t.Hw(),this.v0t=void 0)}constructor(t,e,i,s,n,r,o){this.ea=t,this.xge=e,this.Cge=i,this.Sge=s,this.bge=n,this.Vge=r,this.Tge=o,this.zG=void 0,this.qG=void 0,this.j9=new da,this.Pge=new da,this.epe=void 0,this.kge=!1,this.v0t=void 0,this.Dge=t=>{const e=t.currentSource;if(!e||!e.integrationData)return;const{preplayResponse:i,source:s}=e.integrationData;this.bge.ipe(i),i&&i.type===_n.VOD&&i.ads&&this.Sge.Uge(i.ads),this.xge.spe=e.integrationData,s.assetInfo&&ah(this.fetchAssetInfo(e))},this.Rce=()=>{this.kge=!0},this.Doe=()=>{this.kge&&this.Gge(this.ea.kR())},this.Yre=()=>{this.kge&&(this.Gge(1/0),this.kge=!1)},this.Cd=()=>{ah(this.xge.Cn())},this.Mge=t=>{this.j9.Yw(),this.j9=new da;ah(So(this.Nse(t.td.VO,this.j9.Vw),this.j9))},this.Lge=()=>{1!==this.ea.KR&&(this.epe=this.ea.KR,this.ea.KR=1)},this.Bge=()=>{void 0!==this.epe&&(this.ea.KR=this.epe,this.epe=void 0)},this.Oge=t=>{t.td.yn("Nge",this.Mge),t.td.yn("ont",this.Lge),t.td.yn("rnt",this.Bge)},this.Fge=t=>{t.td.fn("Nge",this.Mge),t.td.fn("ont",this.Lge),t.td.fn("rnt",this.Bge)},this.tpe=()=>{this.ea.TI()},this.ea.yn(Ti.Ty,this.Dge),this.ea.yn(Ti.ro,this.Rce),this.ea.yn(Ti.sb,this.Doe),this.ea.yn(Ti.Cy,this.Yre),this.ea.yn(tl.BL,this.Cd),this.Sge.WJt.yn("int",this.Oge),this.Sge.WJt.yn("ent",this.Fge)}};r(),r();var w8=qe({breaksIndex:Pl,adsIndex:Pl,startTime:Pl,endTime:Pl}),y8=qe({index:Pl,timeOffset:Pl}),b8=qe({duration:Pl,apiFramework:gn(cl,LR),creative:cl,mimeType:cl,width:Pl,height:Pl,companions:rc(function(t){return new XR(t)}((()=>b8))),extensions:gn(Bh,rc(MR)),fw_parameters:gn(Bh,ZR(cl)),events:ZR(rc(cl))}),A8=qe({type:WR(["linear","nonlinear"]),position:WR(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:Pl,duration:Pl,ads:rc(b8),events:ZR(rc(cl))}),S8=qe({breaks:rc(A8),breakOffsets:gn(Bh,rc(y8)),placeholderOffsets:gn(Bh,rc(w8))}),T8=qe({required:gn(Bh,NR),fairplayCertificateURL:gn(Bh,cl),widevineLicenseURL:gn(Bh,cl),playreadyLicenseURL:gn(Bh,cl)}),k8={type:WR(FR(_n)),playURL:cl,prefix:cl,sid:cl,drm:gn(Bh,T8)},E8=qe(Bo({},k8,{type:WR([_n.VOD]),ads:S8,interstitialURL:gn(cl,LR,Bh)})),x8=gn(E8,qe(Bo({},k8,{type:WR([_n.LIVE])})));r();var R8=cl,I8=qe({userId:cl,externalId:gn(cl,rc(cl))}),C8=class{async eTt(t){try{return this.npe(t)}catch(t){throw t}}async npe(t){const e=await async function(t){const e=t.prefix,i=P8[t.assetType],s=function(t){if(rc(R8).WU(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(R8.WU(t))return t;if(I8.WU(t)&&rl(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(I8.WU(t))return"ext/"+t.userId+"/"+t.externalId;throw new b("Invalid asset id")}(t.id),n=await async function(t){if(t&&await Ms.Xp())return{rmt:"fps",manifest:"m3u8"};if(t&&await Ms.qp())return{rmt:"wv",manifest:"mpd"};if(t&&await Ms.zp())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),r=function(t,e){const i=D8(t,e);return i?{"ad.cping":"1","ad.pingf":String(i)}:{}}(t.assetType,t.ping);let o={};rl(t.preplayParameters)?t.preplayParameters.forEach((t=>{o[t[0]]=t[1]})):o=t.preplayParameters;const h=e+"/preplay/"+i+s+".json";return _c(h,Bo({v:"2"},o,n,r,o))}(t),i=this.lW.Kk({yE:xe.GET,Gu:e,Yk:Rr.yk}),s=await i,n=Bo({},await s.qk(),{type:t.assetType===qn.ASSET?_n.VOD:_n.LIVE});return x8.WU(n)||x8.GU(n,"PreplayResponse"),n}constructor(t){this.lW=t}},P8={[qn.ASSET]:"",[qn.CHANNEL]:"channel/",[qn.EVENT]:"event/"};function D8(t,e){const i=t!==qn.ASSET;return(!i&&e.adImpressions?1:0)+(!i&&e.freeWheelVideoViews?2:0)+(i&&e.linearAdData?4:0)}r(),r();var N8=qe({ad_id:cl,apiFramework:gn(LR,cl),companions:rc(MR),creative:cl,duration:Pl,mimeType:cl,height:Pl,width:Pl,extensions:gn(Bh,rc(MR)),fw_parameters:gn(Bh,ZR(cl))}),M8=qe({breakId:cl,ads:rc(N8),type:WR(["linear","nonlinear"]),position:WR(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:Pl,duration:Pl,height:gn(Bh,Pl),width:gn(Bh,Pl),events:ZR(rc(cl))}),L8=qe({breaks:rc(M8)}),B8=qe({next_time:Pl,ads:gn(Bh,L8),extensions:gn(Bh,rc(MR)),error:gn(Bh,cl),currentBreakEnd:gn(Bh,Pl)}),O8=function(t){return t.oTt="start",t.PZ="seek",t}({}),F8=class{async eTt(t,e){try{return this.npe(t,e)}catch(t){throw t}}async npe(t,e){const i=function(t){const e={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(e.ft=String(t.seekTime));t.event&&(e.ev=t.event);return _c(t.zonePrefix+"/session/ping/"+t.sessionId+".json",Bo({},e))}(t),s=this.lW.Kk({yE:xe.GET,Gu:i,Yk:Rr.yk,Vw:e}),n=await s,r=await n.qk();return B8.WU(r)||B8.GU(r,"PingResponse"),r}constructor(t){this.lW=t}};r(),r();var V8=class extends Ds{get ZE(){return this.XE}ba(){return new W8(this.XE)}constructor(t){super("rpe"),this.XE=t}},W8=class extends pe{constructor(t){super("pingresponse"),this.response=t}};r();var U8=class extends Ds{get lt(){return this.zG}ba(){return new G8(this.zG)}constructor(t){super("ope"),this.zG=t}},G8=class extends pe{constructor(t){super("pingerror"),this.error=t}},H8=class extends Co{set spe(t){this.hpe=t}get ape(){return this.upe}async Cn(){const t=this.hpe;if(!t)return;0!==D8(t.source.assetType,t.source.ping)&&(this.upe=this.ea.oI().start(0),await this.cpe(O8.oTt),this.ea.yn("timeupdate",this.lpe),this.ea.yn("seeking",this.dpe))}async cpe(t,e){const i=this.hpe.preplayResponse,s={};if(S(this.upe))return void 0;if(ji(this.fpe)&&gh(this.fpe,this.ea.kR()-this.upe))return;void 0!==e&&(s.seekTime=e),void 0!==t&&(s.event=t);let n,r=this.ea.kR()-this.upe;t===O8.oTt?r=0:t!==O8.PZ&&this._pe&&(r=_.min(r,this._pe)),this.fpe=r;try{var o;const t=await this.vpe.eTt(Bo({zonePrefix:i.prefix,sessionId:i.sid,currentTime:r,hasFreeWheelVideoViews:null==(o=this.hpe)?void 0:o.source.ping.freeWheelVideoViews},s),this.WT.Vw);this.wo(new V8(t)),this._pe=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){Je(t)||(n=t.message)}finally{n&&this.wo(new U8(n))}}er(){this._pe=void 0,this.hpe=void 0,this.upe=NaN,this.mpe=!1,this.gpe=NaN,this.fpe=void 0,this.ea.fn("seeking",this.dpe),this.ea.fn("timeupdate",this.lpe),this.ppe()}ppe(){this.WT.Yw(),this.WT=new da}gn(){this.er()}constructor(t,e){super(),this.vpe=t,this.ea=e,this.upe=NaN,this._pe=void 0,this.mpe=!1,this.gpe=NaN,this.WT=new da,this.fpe=void 0,this.lpe=async()=>{const t=this.ea.kR();if(this.gpe=t,this.mpe||wd(this._pe)||S(this.upe))return;this.upe+this._pe<=t&&(this.mpe=!0,await this.cpe(),this.mpe=!1)},this.dpe=()=>{if(this.ea.kR()===this.upe)return;this.mpe&&this.ppe(),this.gpe=this.ea.kR();const t=this.gpe-(this.upe||0);S(t)?ah(this.cpe(O8.PZ,0)):ah(this.cpe(O8.PZ,t))}}};r();var Z8=class{async xfe(t){const e=[];for(const i of t.sources)if(Wc(i))try{const s=z8({source:i,preplayResponse:await this.wpe.eTt(i)},t,this.kQ);s.src&&(s.src=_c(s.src,i.playbackUrlParameters)),e.push(s)}catch(t){0}else e.push(i);if(0!==t.sources.length&&0===e.length)throw new g("Fatal: unable to play UplynkSources.");return Bo({},t,{sources:e})}constructor(t,e){this.wpe=t,this.kQ=e}};function X8(t){return!!t.sources&&(rl(t.sources)?t.sources.some(Wc):Wc(t.sources))}function z8(t,e,i){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=ul({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},e,i);return r.integrationData=t,r}r(),r(),r();var q8=class extends Ds{ba(){return new Y8(this.td.ka)}constructor(t,e){super("ont"),this.td=t,this.nV=e}},Y8=class extends pe{constructor(t){super("adbreakbegin"),this.adBreak=t}};r();var K8=class extends Ds{ba(){return new j8(this.td.ka)}constructor(t,e){super("rnt"),this.td=t,this.nV=e}},j8=class extends pe{constructor(t){super("adbreakend"),this.adBreak=t}};r();var Q8=class extends Ds{ba(){return new J8(this.td.ka)}constructor(t){super("Nge"),this.td=t}},J8=class extends pe{constructor(t){super("adbreakskip"),this.adBreak=t}};r(),r();var $8=class extends Ds{ba(){return new t7(this.td.ka)}constructor(t){super("H2t"),this.td=t}},t7=class extends pe{constructor(t){super("updateadbreak"),this.adBreak=t}},e7=class extends sn{get ka(){return this.su||(this.su=function(t){let e;const i={get startTime(){return t.FO},get endTime(){return t.VO},get duration(){return t.ct},get ads(){return t.qc.ka},get skipOffset(){return t.pKt},set skipOffset(e){t.pKt=e},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new rt(t,i),i}(this)),this.su}get FO(){return this.YO}get VO(){return this.DA?this.YO+this.DA:void 0}ype(t){this.DA=t-this.FO;for(const e of this.qc.Ku)e.FO>t&&this.qc.$S(e);this.wo(new $8(this))}get ct(){return this.DA}get rut(){const t=this.VO;return ji(t)?new se([this.FO,t]):se.mB()}get qc(){return this.Uc}get bpe(){return this.Ape}get io(){return this.so}get pKt(){return this.c_e?-1:this.wKt}set pKt(t){this.c_e||(this.wKt=t)}Rct(t){return t>=this.FO&&(wd(this.ct)||t<=this.FO+this.ct)}Spe(t){return-1!==this.pKt&&(!!ji(this.VO)&&t-this.FO>=this.pKt)}DD(){this.Uc.Ku.forEach((t=>t.DD())),this.wo(new Q8(this))}Tpe(t){const e=ji(this.VO)&&t>=this.VO,i=this.FO<=t&&!e&&!this.io,s=this.io&&this.VO&&t>=this.VO;i&&(this.so=!0,this.wo(new q8(this,this.FO))),this.Uc.Ku.forEach((e=>e.Tpe(t))),s&&(this.Ape=!0,this.so=!1,this.wo(new K8(this,this.VO)))}constructor(t,e,i,s,n){super(),this.YO=t,this.DA=e,this.Uc=i,this.c_e=s,this.so=!1,this.Ape=!1,this.wKt=n}};r(),r();var i7=class extends Ds{ba(){return new s7(this.snt.ka)}constructor(t,e){super("hnt"),this.snt=t,this.nV=e}},s7=class extends pe{constructor(t){super("adbegin"),this.ad=t}};r();var n7=class extends Ds{ba(){return new r7(this.snt.ka)}constructor(t,e){super("ant"),this.snt=t,this.nV=e}},r7=class extends pe{constructor(t){super("adend"),this.ad=t}};r(),r();var o7=class extends Ds{ba(){return new h7(this.snt.ka)}constructor(t){super("kpe"),this.snt=t}},h7=class extends pe{constructor(t){super("removead"),this.ad=t}},Oc=class extends N2{Wte(t){}Zte(t){this.wo(new o7(t))}constructor(){super()}};r();var a7=class extends Ds{ba(){return new u7(this.snt.ka)}constructor(t){super("X2t"),this.snt=t}},u7=class extends pe{constructor(t){super("adfirstquartile"),this.ad=t}},c7=class extends Ds{ba(){return new l7(this.snt.ka)}constructor(t){super("z2t"),this.snt=t}},l7=class extends pe{constructor(t){super("admidpoint"),this.ad=t}},d7=class extends Ds{ba(){return new f7(this.snt.ka)}constructor(t){super("q2t"),this.snt=t}},f7=class extends pe{constructor(t){super("adthirdquartile"),this.ad=t}},_7=class extends Ds{ba(){return new v7(this.snt.ka)}constructor(t){super("Epe"),this.snt=t}},v7=class extends pe{constructor(t){super("adcomplete"),this.ad=t}};r();var m7=class t extends sn{static xpe(e,i){return new t(e,i.duration,i.apiFramework||"",i.creative,i.mimeType,i.width,i.height,i.companions.map((i=>t.xpe(e,i))),i.extensions,i.fw_parameters,i.events,void 0)}static Rpe(e,i){return new t(e,i.duration,i.apiFramework||"",i.creative,i.mimeType,i.width,i.height,i.companions.map((i=>t.Rpe(e,i))),i.extensions,i.fw_parameters,void 0,i.ad_id)}get ka(){return this.su||(this.su=function(t){let e;const i={get apiFramework(){return t.PYt},get companions(){return t.bYt.ka},get creative(){return t.Ipe},get duration(){return t.ct},get endTime(){return t.VO},get events(){return t.Kq},get extensions(){return t.Cpe},get freeWheelParameters(){return t.Ppe},get height(){return t.Ti},get mimeType(){return t.Yq},get startTime(){return t.FO},get width(){return t.ji},addEventListener(t,i){e.yn(t,i)},removeEventListener(t,i){e.fn(t,i)}};return e=new rt(t,i),i}(this)),this.su}get FO(){return this.YO}get VO(){return this.YO+this.DA}get ct(){return this.DA}get PYt(){return this.DYt}get Ipe(){return this.Dpe}get Yq(){return this.cY}get ji(){return this.zA}get Ti(){return this.qA}get Kq(){return this.Yf}get bYt(){return this.AYt}get Cpe(){return this.Npe}get Ppe(){return this.Mpe}get io(){return this.so}get $ge(){var t;return null!=(t=this.Yf.clickthroughs)?t:[]}Tpe(t){const e=this.FO<=t&&t<this.VO,i=e&&!this.io,s=!e&&this.io;i&&(this.Lpe=!1,this.Bpe=!1,this.Ope=!1,this.Fpe=!1,this.so=!0,this.wo(new i7(this,this.FO))),s&&(this.so=!1,this.wo(new n7(this,this.VO)))}Zge(t){const e=(t-this.FO)/this.ct;!this.Lpe&&e>=.25&&(this.Lpe=!0,this.wo(new a7(this))),!this.Bpe&&e>=.5&&(this.Bpe=!0,this.wo(new c7(this))),!this.Ope&&e>=.75&&(this.Ope=!0,this.wo(new d7(this))),!this.Fpe&&e>=.9999&&(this.Fpe=!0,this.wo(new _7(this)))}DD(){this.Lpe=!0,this.Bpe=!0,this.Ope=!0,this.Fpe=!0}gn(){this.fn("hnt",this.Vpe),this.fn("ant",this.Wpe)}constructor(t,e,i,s,n,r,o,h,a=[],u={},c={},l){super(),this.YO=t,this.DA=e,this.DYt=i,this.Dpe=s,this.cY=n,this.zA=r,this.qA=o,this.Npe=a,this.Mpe=u,this.Yf=c,this.hKt=l,this.AYt=new Oc,this.so=!1,this.Lpe=!1,this.Bpe=!1,this.Ope=!1,this.Fpe=!1,this.Vpe=()=>this.Zge(this.YO),this.Wpe=()=>this.Zge(this.VO),this.AYt.Ute(h),this.yn("hnt",this.Vpe),this.yn("ant",this.Wpe)}};r(),r();var g7=class extends Ds{ba(){return new p7(this.td.ka)}constructor(t){super("int"),this.td=t}},p7=class extends pe{constructor(t){super("addadbreak"),this.adBreak=t}};r();var w7=class extends Ds{ba(){return new y7(this.td.ka)}constructor(t){super("ent"),this.td=t}},y7=class extends pe{constructor(t){super("removeadbreak"),this.adBreak=t}},b7=class extends N2{Wte(t){this.wo(new g7(t))}Zte(t){this.wo(new w7(t))}constructor(){super()}},A7=class{get ka(){return this.su||(this.su=function(t){return{get adBreaks(){return t.WJt.ka},get currentAdBreak(){if(t.Kst)return t.Kst.ka},get currentAds(){return t.Kst?t.Kst.qc.ka:(new Oc).ka},skip(){t.DD()}}}(this)),this.su}get WJt(){return this.l$t}get Kst(){return Fo(this.l$t.Ku,(t=>t.io))}get qst(){return this.Kst?this.Kst.qc.Ku.filter((t=>t.io)):[]}get Upe(){if(0===this.WJt.V||0===this.ea.oI().length)return;const t=this.ea.oI().end(this.ea.oI().length-1);return Fo(this.WJt.Ku,(e=>e.Rct(t)))}get qge(){return this.Gpe}Xge(t){if(0===t.length)return;const e=se.xn(t);for(const t of this.l$t.Ku.slice())ji(t.VO)&&e.Cn(0)>t.VO&&this.l$t.$S(t)}Uge(t){const e=!function(t){return ji(t.breakOffsets)}(t),i=e?this.xge.ape:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+i;const n=new Oc;let r=0;for(const i of s.ads){const s=e?m7.Rpe(t,i):m7.xpe(t,i);n.SO(s),t+=s.ct,r+=s.ct}const o=s.timeOffset+i,h=e?void 0:s.duration,a=new e7(o,h,n,e,this.Hpe);e&&this.Zpe.push({lYt:a,ORt:o+r}),this.l$t.SO(a)}}Xpe(t){const e=this.Upe;e&&e.ype(t+this.xge.ape)}Hge(t){this.zpe=t,this.l$t.Ku.forEach((e=>e.Tpe(t)))}DD(){const t=this.zpe,e=this.Kst;t&&e&&e.Spe(t)&&e.DD()}skipAd(t){this.DD()}Yge(t,e){let i=[];for(const s of this.WJt.Ku)!s.bpe&&s.FO>=t&&s.FO<e&&i.push(s);return i}destroy(){this.ea.fn("timeupdate",this.qpe),this.xge.fn("rpe",this.Ype)}resetSource(){var t;for(const t of this.WJt.Ku){for(const e of t.qc.Ku)e.$o();t.$o()}this.WJt.Bb(),null==(t=this.Kpe)||t.removeAllAds(),this.zpe=void 0,this.Zpe=[]}jpe(t){return Fo(this.Kpe.ads,(e=>e.creativeId===t.Ipe))}constructor(t,e,i,s){var n;this.Zpe=[],this.Kpe=void 0,this.Qpe=t=>(this.Kpe=t,this),this.Ype=t=>{t.ZE.ads&&this.Uge(t.ZE.ads),t.ZE.currentBreakEnd&&this.Xpe(t.ZE.currentBreakEnd)},this.qpe=t=>{if(0===this.Zpe.length||0===this.ea.oI().length)return;const e=this.ea.oI().end(this.ea.oI().length-1);for(const t of this.Zpe.slice())ji(t.lYt.ct)?we(this.Zpe,t):t.ORt<e&&(t.lYt.ype(t.ORt),we(this.Zpe,t))},this.wd=t=>{var e;const i=null==(e=this.Kpe)?void 0:e.createAdBreak({timeOffset:t.td.FO,maxDuration:t.td.ct,customData:t.td});t.td.yn("Nge",this.Jpe);for(const e of t.td.qc.Ku){var s,n;const r={type:"linear",timeOffset:e.FO,duration:e.ct,creativeId:e.Ipe,skipOffset:t.td.pKt,clickThrough:null==(s=e.$ge)?void 0:s[0],customData:e};null==(n=this.Kpe)||n.createAd(r,i),e.yn("hnt",this.T9t),e.yn("ant",this.$pe),e.yn("X2t",this.twe),e.yn("z2t",this.iwe),e.yn("q2t",this.nwe),e.yn("Epe",this.pme)}},this.Jpe=t=>{for(const s of t.td.qc.Ku){const t=this.jpe(s);var e,i;if(t)null==(e=this.Kpe)||e.beginAd(t),null==(i=this.Kpe)||i.skipAd(t)}},this._d=t=>{for(const e of t.td.qc.Ku)e.$o();t.td.$o()},this.T9t=t=>{const e=this.jpe(t.snt);var i;e&&(null==(i=this.Kpe)||i.beginAd(e))},this.$pe=t=>{const e=this.jpe(t.snt);var i;e&&(null==(i=this.Kpe)||i.endAd(e))},this.twe=t=>{const e=this.jpe(t.snt);var i;e&&(null==(i=this.Kpe)||i.updateAdProgress(e,.25))},this.iwe=t=>{const e=this.jpe(t.snt);var i;e&&(null==(i=this.Kpe)||i.updateAdProgress(e,.5))},this.nwe=t=>{const e=this.jpe(t.snt);var i;e&&(null==(i=this.Kpe)||i.updateAdProgress(e,.75))},this.pme=t=>{const e=this.jpe(t.snt);var i;e&&(null==(i=this.Kpe)||i.updateAdProgress(e,1))},this.ea=t,this.xge=e,this.l$t=new b7,this.l$t.yn("int",this.wd),this.l$t.yn("ent",this._d),this.Hpe=i,this.Gpe=s,t.yn("timeupdate",this.qpe),this.xge.yn("rpe",this.Ype),null==(n=this.ea.qc)||n.Jst(yu.UPLYNK,this.Qpe)}};r(),r(),r();var S7=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED",t}({}),T7=function(t){return t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED",t}({}),k7=class t{static rwe(e,i,s){const n=new Ig(e.rating_flags);return new t(i,s,e.duration,Boolean(e.audio_only),e.boundary_details,Boolean(e.error),e.tv_rating,e.max_slice,e.thumb_prefix,e.slice_dur,e.movie_rating,e.owner,e.meta,e.rates,e.thumbs,e.poster_url,e.default_poster_url,e.desc,n.Rb(1),n.Rb(2),n.Rb(4),n.Rb(8),e.external_id,Boolean(e.is_ad),e.asset)}get ka(){return this.su||(this.su=function(t){return{startTime:t.FO,endTime:t.VO,duration:t.ct,audioOnly:t.owe,boundaryDetails:t.hwe,error:t.lt,tvRating:t.awe,maxSlice:t.uwe,thumbPrefix:t.cwe,sliceDuration:t.lwe,movieRating:t.dwe,ownerId:t.fwe,metadata:t.XV,rates:t._we,thumbnailResolutions:t.vwe,posterUrl:t.mwe,defaultPosterUrl:t.gwe,description:t.ON,hasAdultLanguage:t.pwe,hasSexualSituations:t.wwe,hasViolence:t.ywe,hasDrugSituations:t.bwe,externalId:t.Awe,isAd:t.Swe,assetId:t.Twe}}(this)),this.su}constructor(t,e,i,s,n,r,o,h,a,u,c,l,d,f,_,v,m,g,p,w,y,b,A,S,T){this.FO=t,this.VO=e,this.ct=i,this.owe=s,this.hwe=n,this.lt=r,this.awe=o,this.uwe=h,this.cwe=a,this.lwe=u,this.dwe=c,this.fwe=l,this.XV=d,this._we=f,this.vwe=_,this.mwe=v,this.gwe=m,this.ON=g,this.pwe=p,this.wwe=w,this.ywe=y,this.bwe=b,this.Awe=A,this.Swe=S,this.Twe=T}};var E7=qe({duration:Pl,offset:Pl}),x7=qe({c3:E7}),R7=qe({c7:E7}),I7=qe({halftime:E7}),C7=WR(FR(T7)),P7=WR(FR(S7)),D7=qe({width:gn(Bh,Pl),prefix:cl,bw:Pl,bh:Pl,height:gn(Bh,Pl)}),N7=qe({audio_only:Pl,boundary_details:gn(Bh,rc(gn(x7,R7,I7))),error:Pl,tv_rating:C7,max_slice:Pl,thumb_prefix:cl,slice_dur:Pl,movie_rating:P7,owner:cl,meta:MR,rates:rc(Pl),thumbs:rc(D7),poster_url:cl,duration:Pl,default_poster_url:cl,desc:cl,rating_flags:Pl,external_id:cl,is_ad:Pl,asset:cl}),M7=class{async eTt(t,e,i,s){const n=function(t,e,i){if(R8.WU(e))return[L7(t,e,i)];if(rc(R8).WU(e))return e.map((e=>L7(t,e,i)));if(I8.WU(e)){return(rl(e.externalId)?e.externalId:[e.externalId]).map((s=>L7(t,"ext/"+e.userId+"/"+s,i)))}throw new b("Invalid asset id")}(t,e,s),r=n.map((t=>Ci((()=>this.npe(t)),i)));return(await Promise.all(r)).filter(ji)}async npe(t){const e=this.lW.Kk({yE:xe.GET,Gu:t,Yk:Rr.yk}),i=await e,s=await i.qk();return N7.WU(s)||N7.GU(s,"AssetInfoResponse"),s}constructor(t){this.lW=t}};function L7(t,e,i){return i?t+"/player/assetinfo/"+e+".json?pbs="+i:t+"/player/assetinfo/"+e+".json"}r(),r();var B7=class extends Ds{ba(){return new O7(this.ud.ka)}constructor(t){super("kwe"),this.ud=t}},O7=class extends pe{constructor(t){super("removeasset"),this.asset=t}};r();var F7=class extends Ds{ba(){return new V7(this.ud.ka)}constructor(t){super("xwe"),this.ud=t}},V7=class extends pe{constructor(t){super("addasset"),this.asset=t}},W7=class extends N2{Uge(t,e){let i,s=0;for(const n of t){i=s+n.duration;for(const t of e)s<=t.FO&&t.FO<i&&(i+=t.ct||0);this.SO(k7.rwe(n,s,i)),s=i}}Wte(t){this.wo(new F7(t))}Zte(t){this.wo(new B7(t))}constructor(){super()}};r(),r();var U7=class extends Ds{ba(){return new G7(this.ZE)}constructor(t){super("Rwe"),this.ZE=t}},G7=class extends pe{constructor(t){super("preplayresponse"),this.response=t}};r();var H7=class extends Ds{ba(){return new Z7(this.ZE)}constructor(t){super("Iwe"),this.ZE=t}},Z7=class extends pe{constructor(t){super("assetinforesponse"),this.response=t}},X7=class extends sn{ipe(t){t&&this.wo(new U7(nu(t)))}Wge(t){t.forEach((t=>this.wo(new H7(t))))}get ka(){return this.su||(this.su=this.ba()),this.su}ba(){let t;const e=this,i={get ads(){return e.Sge.ka},get assets(){return e.Tge.ka},addEventListener(e,i){t.yn(e,i)},removeEventListener(e,i){t.fn(e,i)}};return t=new rt(e,i),i}constructor(t,e,i){super(),this.Sge=t,this.Tge=e,this.xge=i,i.yn("rpe",this.Ds),i.yn("ope",this.Ds)}},z7=class{Cwe(t,e){const i=new C8(t.lR),s=new F8(t.lR),n=function(t){if(t.uplynk&&ji(t.uplynk.defaultSkipOffset))return function(t){return Sd(t)?t:-1}(t.uplynk.defaultSkipOffset);return-1}(e),r=function(t){var e,i;const s=null!=(i=null==(e=t.uplynk)?void 0:e.onSeekOverAd)?i:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(s)}(e),o=new H8(s,t),h=new Z8(i,e),a=new A7(t,o,n,r),u=new M7(t.lR),c=new W7,l=new X7(a,c,o);return new p8(t,o,h,a,l,u,c)}};xh((function(t){return class extends t{Ege(t){super.xa(t)}Rge(t,e){return super.ynt(t,e)}Qge(t){super.ER(t)}PR(){var t;return null!=(t=this.Pwe.lt)?t:super.PR()}NR(){var t;return null!=(t=this.Pwe.DR)?t:super.NR()}ER(t,e){this.Pwe.ER(t)}xa(t){this.Pwe.xa(t)}ynt(t,e){return this.Pwe.ynt(t,e)}ba(){const t=this.Pwe.ka;return nh(super.ba(),{get uplynk(){return t}})}gn(){this.Pwe.gn(),super.gn()}constructor(t,e){super(t,e),this.Pwe=(new z7).Cwe(this,e)}}}),io.Mst),r(),r(),r(),r();var za=function(t){return t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error",t}({});r();var q7=class extends cs{ba(){return zo(this)}get tQt(){return I.h$t}get FO(){return this.YO}get eYt(){return this.VYt}constructor(t,e,i,s){super(t,e),this.VYt=s,this.YO=i}};r();var Y7=class extends Zi{get sOt(){return this.Dwe}get tQt(){return I.h$t}constructor(t,e,i){if(super(e),this.v2t=t,this.m2t=t,i){const t=new Date(i);gf(t)&&(this.Dwe=t)}}},K7=class{gC(){this.ea.yn(tl.VL,this.HB),this.ea.yn(Ti.Zy,this.jNt),this.ea.yn(Ti.ro,this.ezt),this.ea.yn(Ti.jy,this.We),this.ea.yn(Ti.Cy,this.Mh),this.ea.yn(Ti.sb,this.vd),this.ea.yn(Ti.ob,this.Y0t),this.ea.yn(ZP.MODE_CHANGE,this.Nwe)}vC(){this.ea.fn(tl.VL,this.HB),this.ea.fn(Ti.Zy,this.jNt),this.ea.fn(Ti.ro,this.ezt),this.ea.fn(Ti.jy,this.We),this.ea.fn(Ti.Cy,this.Mh),this.ea.fn(Ti.sb,this.vd),this.ea.fn(Ti.ob,this.Y0t),this.ea.fn(ZP.MODE_CHANGE,this.Nwe)}get Mwe(){return this.Lwe}get qst(){const t=this.Mwe;if(!t)return[];const e=[],i=this.Bwe();for(const s of t.qc)i>=s.FO&&this.zme<=s.FO+s.ct&&e.push(s);return e}Bwe(){return this.ea.kR()-this.Owe}Fwe(){if(this.Vwe)return;if(this.ea.Sd()!==1/0)return void(0===this.Wwe.length&&(this.Vwe=this.Uwe()));const t=()=>{var t;null==(t=this.Gwe)||t.Hw(),this.Gwe=void 0,this.Vwe=void 0};this.Gwe=new da,this.Vwe=this.Hwe(this.Gwe.Vw).catch(this.O6).then(t,t)}async Zwe(){const t=_.min(1e3*2**this.Xwe,3e4);try{var e;await Fe(t,null==(e=this.Gwe)?void 0:e.Vw),this.Xwe++}catch(t){if(Je(t))return void(this.Xwe=0)}this.Fwe()}async Hwe(t){for(;J(t),!this.ea.qR;){const e=Ms.Vg()-this.zwe;if(e>1e4)await this.Uwe(t),this.zwe=Ms.Vg(),this.Xwe=0;else{const i=1e4-e;await Fe(i,t)}}}qwe(t){const e=t.sOt;if(e&&this.ea.wR&&0===this.Owe&&!this.Ywe&&0!==_.floor(this.ea.oI().start(0))){const i=(this.ea.wR.getTime()-e.getTime())/1e3,s=this.ea.kR()-t.YBt;this.Owe=s-i}}async Uwe(t){try{const e=await this.ea.lR.Kk({Gu:this.Kwe}),i=await e.xk(t);if(0===i.avails.length)return void(0!==this.Wwe.length&&(this.Wwe=[]));if(i.avails.length===this.Wwe.length&&i.avails[0].startTimeInSeconds===this.Wwe[0].YBt)return void this.qwe(this.Wwe[0]);const s=[];for(const t of i.avails){const e=new Y7(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const i of t.ads){const t=new q7(e,Ns.Ejt,i.startTimeInSeconds,i.trackingEvents);t.x2t(i.adId,i.width,i.height,i.durationInSeconds,[],i.skipoffset),e.y2t(t)}s.push(e),this.qwe(e)}this.Wwe=Ii(s,((t,e)=>t.YBt-e.YBt))}catch(t){throw th(t),new g("Failed to poll MediaTailor tracking events")}}jwe(){var t;null==(t=this.Gwe)||t.Yw(),this.Gwe=void 0,this.Vwe=void 0,this.zwe=-1/0}Qwe(){if(0===this.Wwe.length)return;const t=this.Wwe[this.Wwe.length-1],e=this.Bwe();if(t.YBt+t.BJt<this.zme){var i;this.Lwe&&(null==(i=this.ea.qc)||i.wo(new Lh(this.Lwe)),this.Lwe=void 0)}else{for(const t of this.Wwe){const i=t.YBt;if(!(i+t.BJt<this.zme)&&(i<=e&&i+t.BJt>this.zme)){var s;if(this.Mwe===t)return;return this.Lwe=t,void(null==(s=this.ea.qc)||s.wo(new La(this.Lwe)))}}var n;if(this.Lwe)null==(n=this.ea.qc)||n.wo(new Lh(this.Lwe)),this.Lwe=void 0}}Jwe(){const t=this.qst;if(0===t.length)return;let e=[];for(const i of t){const t=i.eYt.filter((t=>ms(this.$we,t.eventType)));e=e.concat(t)}for(const t of e)this.tye(t.startTimeInSeconds)&&(t.eventType===za.COMPLETE&&this.iye(za.ENGAGED_VIEW),this.sye(t))}nye(t,e){return e.eYt.filter((e=>lh(e.eventType,t)))[0]}iye(t){const e=this.qst;if(0===e.length)return;const i=this.nye(t,e[0]);i&&this.sye(i)}sye(t){this.Wfe(t.eventType);for(const e of t.beaconUrls){const t={yE:xe.GET,Gu:e,Nk:"",Yk:Rr.yk};0,ah(this.rye(t))}}Wfe(t){let e;const i=this.qst;switch(t){case za.START:e=new cn(i[i.length-1],this.ea.kR());break;case za.COMPLETE:e=new xn(i[0],this.ea.kR());break;case za.FIRST_QUARTILE:e=new Is(i[0],this.ea.kR());break;case za.MID_POINT:e=new ks(i[0],this.ea.kR());break;case za.THIRD_QUARTILE:e=new Cs(i[0],this.ea.kR())}var s;void 0!==e&&(null==(s=this.ea.qc)||s.wo(e))}async rye(t){const e=await this.ea.lR.Kk(t);e.zk}tye(t){const e=this.Bwe();return t>=this.zme&&t<e}gn(){this.vC(),this.jwe(),this.zme=-1}constructor(t,e,i){this.zwe=-1/0,this.Lwe=void 0,this.Owe=0,this.Wwe=[],this.Pme=!1,this.oK=!1,this.zme=-1,this.Gwe=void 0,this.Vwe=void 0,this.Xwe=0,this.HB=()=>{this.Fwe()},this.ezt=()=>{this.iye(za.RESUME)},this.jNt=()=>{this.jwe(),this.iye(za.PAUSE)},this.We=()=>{this.jwe(),this.zme=-1},this.Mh=()=>{this.jwe()},this.vd=()=>{-1===this.zme&&(this.zme=this.Bwe()),this.Qwe(),this.Jwe(),this.zme=this.Bwe()},this.Y0t=()=>{if(this.Pme!==this.ea.GR){this.Pme=this.ea.GR;const t=this.Pme?za.MUTE:za.UNMUTE;this.iye(t)}},this.Nwe=()=>{if(this.oK!==this.ea.cs()){this.oK=this.ea.cs();const t=this.oK?za.FULL_SCREEN:za.EXIT_FULL_SCREEN;this.iye(t)}},this.O6=t=>{Je(t)||(this.iye(za.ERROR),ah(this.Zwe()))},this.$we=[za.START,za.FIRST_QUARTILE,za.MID_POINT,za.THIRD_QUARTILE,za.COMPLETE,za.IMPRESSION,za.CREATIVE_VIEW],this.ea=t,this.Kwe=e,this.Ywe=i,this.gC()}};xh((function(t){return class extends t{xa(t){return this.oye&&(this.oye.gn(),this.oye=void 0,this.WEt()),super.xa(t)}async ynt(t,e){if(!t||!function(t){return t.sources.some((t=>t.integration===CT.MEDIATAILOR))}(t))return super.ynt(t,e);try{const i=await this.aye(t,e);this.uye=new I1(this),await super.ynt(i,e)}catch(t){this.MH(new A(Qa.MANIFEST_LOAD_ERROR,t.message,t))}}QR(t){var e;(null==(e=this.uye)?void 0:e.inAdBreak)||super.QR(t)}ER(t,e){var i;(null==(i=this.oye)?void 0:i.Mwe)||super.ER(t,e)}PR(){var t;return null!=(t=this.zG)?t:super.PR()}NR(){var t;return null!=(t=this.qG)?t:super.NR()}MH(t){this.zG=Xs(t),this.qG=t,this.wo(new Ga(t))}WEt(){this.zG=void 0,this.qG=void 0}async aye(t,e){let i=[];for(const s of t.sources){if(!VT(s)){i.push(s);continue}const t=s;if(!t.src){i.push(s);continue}const n=await this.cye(t,e);J(e);const r=Bo({},t,{integration:void 0,src:n});i.push(r)}const s=nu(t);return s.sources=i,s}async cye(t,e){const i=t.src||"",s=i.match(/.+?(?=\/v1\/)/);if(!s)throw new g("Could not find MediaTailor session initialization url");const n=s[0],r=Oh(i,"?ads."),o=r?{Gu:i,Yk:Rr.yk}:{Gu:i,yE:xe.POST,Nk:JSON.stringify({adParams:t.adParams}),Yk:Rr.yk},h=await Ci((()=>this.lye(o,e)),e);let a;try{if(a=n+h.manifestUrl,!r){const t=n+h.trackingUrl,e=LT(a);this.oye=new K7(this,t,e)}}catch(t){throw new g("Something went wrong parsing the MediaTailor session initialization response")}return a}async lye(t,e){try{const i=await this.lR.Kk(t);return await i.xk(e)}catch(t){throw th(t),new g("Failed to initialize MediaTailor session manifest")}}gn(){var t;this.oye&&(this.oye.gn(),this.oye=void 0),this.WEt(),null==(t=this.uye)||t.destroy(),this.uye=void 0,super.gn()}constructor(t,e){super(t,e),this.oye=void 0,this.zG=void 0,this.qG=void 0,this.uye=void 0}}}),io.Ost),r(),r(),r(),r(),r();var Ma=function(t){return t[t.dye=0]="dye",t[t.VL=1]="VL",t[t.CZ=2]="CZ",t[t.fye=3]="fye",t[t._ye=4]="_ye",t[t.vye=5]="vye",t[t.da=6]="da",t}({});r();var j7=class extends Co{get EC(){}get Rt(){return this.He}set Rt(t){this.CO(t)}get ka(){var t;return null!=(t=this.su)?t:this.su=yi(this)}get o(){return String(this.cu.componentTag)||"hbbtvaudiotrack"}get Lt(){return this.j4}get xh(){return this.RO}get gs(){return""}get xE(){return this.Rt?"enabled":"disabled"}set xE(t){this.CO("enabled"===t)}get IC(){return this.AO}get DC(){}set DC(t){}get xC(){return this.xO}CO(t){this.He=t,t?this.DMt.mye(this.cu):this.DMt.gye(this.cu)}constructor(t,e,i,s,n=!1){super(),this.xO=oi(),this.AO=new Vc,this.cu=t,this.RO=e,this.j4=i,this.He=n,this.DMt=s}};r(),r(),r();var Q7=function(t){return t.mw="urn:dvb:casystemid:19219",t.gw="urn:dvb:casystemid:19156",t}({}),J7=function(t){return t.mw="application/vnd.ms-playready.initiator+xml",t.gw="application/widevine+xml",t}({});function $7(t,e,i){switch(t){case"urn:dvb:casystemid:19219":return function(t){return'<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><LicenseServerUriOverride><LA_URL>'+(null!=t?t:"")+"</LA_URL></LicenseServerUriOverride></PlayReadyInitiator>"}(e);case"urn:dvb:casystemid:19156":if(!i)throw new g("Content URL is needed for Widevine license request");return function(t,e){return'<?xml version="1.0" encoding="utf-8"?><WidevineCredentialsInfo xmlns="http://www.smarttv-alliance.org/DRM/widevine/2012/protocols/"><ContentURL>'+c$(null!=e?e:"")+"</ContentURL><DeviceID></DeviceID><StreamID></StreamID><ClientIP></ClientIP><DRMServerURL>"+c$(null!=t?t:"")+"</DRMServerURL><DRMAckServerURL></DRMAckServerURL><DRMHeartBeatURL></DRMHeartBeatURL><DRMHeartBeatPeriod></DRMHeartBeatPeriod><UserData></UserData><Portal></Portal><StoreFront></StoreFront><BandwidthCheckURL></BandwidthCheckURL><BandwidthCheckInterval></BandwidthCheckInterval></WidevineCredentialsInfo>"}(e,i);default:throw new g("DRM key system is not supported")}}var ttt=class extends jL{pye(t){this.wye(),this.xu=t}async yye(t){if(!t.eH.length)return void this.wye();if(!this.xu)throw new g("The OIPF DRM agent has to be attached to the DOM");let e;this.Aye||(this.Aye=h.createElement("object"),this.Aye.type="application/oipfDrmAgent",this.xu.appendChild(this.Aye),this.Aye.onDRMMessageResult=this.Sye,this.Aye.onDRMRightsError=this.Tye,this.kye=h.createElement("object"),this.kye.type="application/oipfCapabilities",this.xu.appendChild(this.kye));for(const i of t.eH){let s,n,r;if(i.aT===mm)s=Q7.mw,n=J7.mw,r=$7(Q7.mw,i.xG);else{if(i.aT!==rn)continue;s=Q7.gw,n=J7.gw,r=$7(Q7.gw,i.xG,t.OC)}try{return await this.$et(n,r,s),void this.wo(new Ps)}catch(t){e=t}}e&&this.wo(new Bn(e))}Hw(){return this.Eye=void 0,this.xu=void 0,super.Hw()}$et(t,e,i){var s,n;return this.Eye=new os,this.xye=null==(n=this.Aye)||null==(s=n.sendDRMMessage)?void 0:s.call(n,t,e,i),this.xye||null==this.Eye.Fb||this.Eye.Fb.call(this.Eye,new sr(Qa.CONTENT_PROTECTION_INTERNAL_ERROR,"No DRM message returned by OIPF DRM agent")),this.Eye.Vb}Rye(t){switch(t){case 5:return Qa.CONTENT_PROTECTION_NOT_SUPPORTED;case 2:case 1:case 3:case 4:case 6:return Qa.CONTENT_PROTECTION_INTERNAL_ERROR;default:return Qa.CONTENT_PROTECTION_ERROR}}Iye(t){switch(t){case 2:return"The DRM agent was unable to complete the request";case 3:return"The specified MIME type is unknown for the specified DRM system";case 4:return"User consent is needed for that action";case 5:return"The specified DRM System is unknown";case 6:return"The license message has the wrong format";default:return"Unspecified error occurred"}}Cye(t){return 0===t?Qa.CONTENT_PROTECTION_LICENSE_ERROR:1===t?Qa.CONTENT_PROTECTION_LICENSE_INVALID:Qa.CONTENT_PROTECTION_ERROR}Pye(t){switch(t){case 0:return"No license, consumption of the content is blocked";case 1:return"Invalid license, consumption of the content is blocked";case 2:return"Valid license, consumption of the content is unblocked";default:return"Unknown error occurred"}}wye(){this.Aye&&(Gt(this.Aye),this.Aye=void 0),this.kye&&(Gt(this.kye),this.kye=void 0)}async n9(t,e,i){}constructor(...t){super(...t),this.Aye=void 0,this.kye=void 0,this.xu=void 0,this.xye=void 0,this.Eye=void 0,this.Sye=(t,e,i)=>{var s,n,r,o;if(0===i)return void(null==(o=this.Eye)||null==(r=o.Ob)||r.call(o,t));const h=this.Rye(i),a=this.Iye(i),u=new sr(h,a);null==(n=this.Eye)||null==(s=n.Fb)||s.call(n,u)},this.Tye=(t,e,i,s)=>{const n=this.Cye(t),r=this.Pye(t),o=new sr(n,r);this.wo(new Bn(o))}}};r();var ett=class{get rI(){return se.vB(0,this.FB.ct)}get tI(){return hl.QH}set tI(t){}get bd(){return this.DT}cJ(t){return!1}dJ(t){return Xo.resolve(void 0)}async yye(t){await this.fJ.yye(this.DT)}Hw(){return Xo.resolve(void 0)}constructor(t,e,i){this.DT=t,this.FB=e,this.fJ=i}},itt=class extends Co{get gR(){return se.mB()}get wR(){}get QG(){}get Lu(){return this.Yu}get rI(){var t,e;return null!=(e=null==(t=this.jG)?void 0:t.rI)?e:se.mB()}get hI(){return this.aZ}get O4(){return!1}get OR(){return!1}get XB(){return Bo({},XD)}get lt(){return this.zG}get N4(){return!1}get Ca(){return this.sa}get d7(){return!0}get E4(){return!1}get yI(){return!0}set yI(t){}get zl(){return this.gZ}get nt(){return this.d8}get M9(){return this.rZ}get lH(){return this.Zo}v7(t){this.fJ.pye(t),this.Uet.v7(t)}DJ(t){for(const e of t)if(e.Aw===Mr.mW)return e}async Dn(t){if(this.jG)throw new g("Already loaded a media source");if(t.Aw===Mr.mW)return this.jG=new ett(t,this,this.fJ),await this.jG.yye(t),this.jG;throw new g("Unsupported media source configuration for HbbTV")}async Dye(t){await this.Nye()}async kI(){await this.Nye()}ZG(t){}async er(){this.jG=void 0,this.Mye=void 0}async Hw(){await this.er(),this.Ll.gn(),this.d8.gn(),this.Uet.gn(),this.Get.gn(),this.fJ.fn(Du,this.Ds),await this.fJ.Hw()}ge(){this.rZ=!0,this.Uet.ge()}be(){this.rZ=!1,this.Uet.be()}hH(){return!1}uH(t,e,i,s,n){throw new g("Adding native sideloaded text tracks is not supported on HbbTV")}u7(){}l7(){}_7(){}UR(){return{dO:0,fO:0,_O:0}}CI(){}dH(t){throw new g("Adding custom text tracks is not supported on HbbTV")}AI(){}LI(t,e,i,s,n,r,o,h,a){const u=new mo(t,e,i,s,n,r,o,a,h);return this.Ll.tt(u),this.f8.tt(u),u}fH(){for(const t of this.Ll.uC.slice())t.gn();this.Ll.er()}_W(t){this.Ll.it(t),this.f8.it(t)}Lye(){const t=h.getElementsByTagName("object");for(let e=0;e<t.length;e++){const i=t.item(e);if("video/broadcast"===i.type){const t=i;return t.onPlayStateChange=this.Bye,0===t.playState&&(null==t.bindToCurrentChannel||t.bindToCurrentChannel.call(t)),t}}}Nye(){var t,e;if(!this.Oye||3===this.Oye.playState||0===this.Oye.playState)return Promise.resolve("");if(null==(t=this.Mye)?void 0:t.Vb)return null==(e=this.Mye)?void 0:e.Vb;this.Mye=new os;try{null==this.Oye.stop||this.Oye.stop.call(this.Oye)}catch(t){Ms.Fp("Unable to stop broadcast for HbbTV",t),this.Mye.Fb(new g("Unable to stop broadcast for HbbTV"))}return this.Mye.Vb}constructor(t,e){super(),this.Yu=t,this.gZ=e,this.sa=new N,this.Zo=new MI,this.Ll=new ua,this.jG=void 0,this.aZ=!1,this.zG=void 0,this.EW=Ht.$B,this.rZ=!0,this.Mye=void 0,this.Bye=()=>{var t,e,i,s;(null==(t=this.Oye)?void 0:t.playState)&&((null==(e=this.Mye)?void 0:e.Vb)||2!==this.Oye.playState||this.Nye().catch(It),3===this.Oye.playState&&(null==(s=this.Mye)||null==(i=s.Ob)||i.call(s,String(this.Oye.playState)),this.Mye=void 0))},this.fJ=new ttt(this),this.fJ.yn(Du,this.Ds),this.d8=new Fu([this.Ll]),this.f8=new su(this),this.Uet=new _B,this.Get=new LO(this.Uet.we,this.Lu,this.nt,this.zl,this.Ca,this.lH),this.Oye=this.Lye(),this.Nye().catch(It)}},stt=class extends itt{get YG(){}get ht(){return this.aO}get rt(){return this.cO}get KR(){return this.lZ}set KR(t){this.lZ=t,this.qR||this.Fye.play(t)}get GR(){return this.Fye.muted}set GR(t){this.Fye.muted=t}get vI(){var t,e;return(null!=(e=null!=(t=this.Fye.volume)?t:null==this.Fye.getVolume?void 0:this.Fye.getVolume.call(this.Fye))?e:100)/100}set vI(t){null==this.Fye.setVolume||this.Fye.setVolume.call(this.Fye,100*t)}get SR(){return this.Fye.playPosition?this.Fye.playPosition/1e3:0}get ct(){return!this.Fye.playTime||this.Fye.playTime<0?1/0:this.Fye.playTime/1e3}get RR(){return this.Fye.playState===Ma.vye}get Ti(){return this.Fye.offsetHeight*Ms.Ys.Yg}get ji(){return this.Fye.offsetWidth*Ms.Ys.Yg}get qR(){return this.Fye.playState===Ma.CZ}get JR(){return se.mB()}get sI(){return this.I4}get cI(){return 0}get fI(){return 0}v7(t){super.v7(t),t.appendChild(this.Fye)}async Dn(t){if(t.Aw===Mr.mW){const e=await super.Dn(t);return await this.Dye(t),this.Fye.onPlayStateChange=this.Vye,e}throw new g("Unsupported media source configuration for HbbTV")}async Dye(t){this.Fye.type=Mu(t.OC),this.Fye.data=t.OC,await super.Dye(t)}async kI(){await super.kI(),this.Fye.play(this.lZ),this.wo(new H(this.SR))}TI(){this.Fye.play(0),this.wo(new fl(this.SR))}Eb(t,e,i){this.Fye.seek(1e3*t),this.aZ=!0,this.wo(new L(this.SR))}async er(){void 0!==this.jG&&this.Fye.stop(),this.Wye&&(Ms.Up(this.Wye),this.Wye=void 0),await super.er(),Sh(this.Fye),this.Fye.data&&this.Fye.removeAttribute("data"),this.aO.er(),this.cO.er()}async Hw(){await super.Hw(),Gt(this.Fye)}ge(){super.ge(),this.Fye.style.display="block"}be(){super.be(),this.Fye.style.display="none"}mye(t){const e=this.Uye(t);if(!e)throw new g("Selected track does not exist on HbbTV");null==this.Fye.selectComponent||this.Fye.selectComponent.call(this.Fye,e)}gye(t){const e=this.Uye(t);if(!e)throw new g("Selected track does not exist on HbbTV");null==this.Fye.unselectComponent||this.Fye.unselectComponent.call(this.Fye,e)}Uye(t){var e;const i=null!=(e=null==this.Fye.getComponents?void 0:this.Fye.getComponents.call(this.Fye,t.type))?e:this.Gye();return this.Hye(i,t)}Zye(t){var e;const i=null!=(e=null==this.Fye.getCurrentActiveComponents?void 0:this.Fye.getCurrentActiveComponents.call(this.Fye,1))?e:this.Gye();this.aO.er();for(let e=0;e<t.length;e++){const s=t.item(e);this.aO.tt(new j7(s,s.language,this.aO.V?jr.EPt:jr.xPt,this,this.Xye(i,s)))}}zye(t){var e;const i=null!=(e=null==this.Fye.getCurrentActiveComponents?void 0:this.Fye.getCurrentActiveComponents.call(this.Fye,0))?e:this.Gye();this.cO.er();for(let e=0;e<t.length;e++){const s=t.item(e);this.cO.tt(new j7(s,String(s.aspectRatio),this.cO.V?vq.EPt:vq.xPt,this,this.Xye(i,s)))}}Gye(){return{length:0,item:t=>{}}}Xye(t,e){return void 0!==this.Hye(t,e)}Hye(t,e){for(let i=0;i<t.length;i++){const s=t.item(i);if(this.qye(s,e))return s}}qye(t,e){return t.pid===e.pid&&t.componentTag===e.componentTag&&t.type===e.type&&t.encoding===e.encoding&&t.encrypted===e.encrypted}Yye(t){switch(t){case 0:return lk.SRC_NOT_SUPPORTED;case 1:case 5:case 6:return lk.NETWORK;default:return lk.DECODE}}constructor(t,e,i){super(e,i),this.Fye=t,this.lZ=1,this.aO=new Nn,this.cO=new Nn,this.I4=Ht.$B,this.Kye=void 0,this.Wye=void 0,this.Vye=()=>{if(!this.Fye.playState)return;this.EW=this.I4,this.jye=this.Qye,this.Qye=this.Fye.playState;const t=this.ct;switch(t!==this.Kye&&(this.wo(new Ls(t)),this.Kye=t),this.Wye&&this.Qye!==Ma.VL&&(Ms.Up(this.Wye),this.Wye=void 0),this.Qye){case Ma.fye:this.I4=Ht.$B;break;case Ma._ye:if(this.jye===Ma.fye){var e;const t=null!=(e=null==this.Fye.getComponents?void 0:this.Fye.getComponents.call(this.Fye,1))?e:this.Gye();var i;const s=null!=(i=null==this.Fye.getComponents?void 0:this.Fye.getComponents.call(this.Fye,0))?i:this.Gye();if(0===t.length&&0===s.length)break;this.Zye(t),this.zye(s)}this.I4=Ht.Gn;break;case Ma.VL:this.aZ&&(this.aZ=!1,this.wo(new ha(this.SR))),this.wo(new Wi(this.SR)),this.I4=Ht.eO,this.Wye=Ms.Wp(this.Jye,250);break;case Ma.da:this.I4=Ht.$B,this.wo(new yM(new dk(this.Yye(this.Fye.error))));break;case Ma.vye:this.wo(new Te(this.SR));case Ma.CZ:case Ma.dye:}this.I4!==this.EW&&this.wo(new au(this.SR,this.I4))},this.Jye=()=>{this.wo(new ri(this.SR,void 0))}}};r();var ntt=class extends itt{get YG(){return this.QT}get ht(){return this.aO}get rt(){return this.cO}get KR(){return this.QT.playbackRate}set KR(t){this.QT.playbackRate=t}get GR(){return this.QT.muted}set GR(t){this.QT.muted=t}get vI(){return this.QT.volume}set vI(t){this.QT.volume=t}get SR(){return this.QT.currentTime}get ct(){return this.QT.duration}get RR(){return this.QT.ended}get Ti(){return this.QT.offsetHeight*Ms.Ys.Yg}get ji(){return this.QT.offsetWidth*Ms.Ys.Yg}get qR(){return this.QT.paused}get JR(){return se.xn(this.QT.played)}get sI(){return this.R9.sI}get cI(){return this.QT.videoHeight}get fI(){return this.QT.videoWidth}v7(t){super.v7(t),t.appendChild(this.QT)}async Dn(t){if(t.Aw===Mr.mW){const e=await super.Dn(t);return await this.Dye(t),e}throw new g("Unsupported media source configuration for HbbTV")}async Dye(t){switch(t.sH){case yh.HC:case yh.ZC:this.QT.setAttribute("crossorigin",t.sH);break;case yh.gE:default:this.QT.removeAttribute("crossorigin")}void 0!==t.tI?this.QT.preload=t.tI:this.QT.preload=hl.pG,void 0!==t.nH?this.QT.title=t.nH:Bd(this.QT);const e=this.KR;this.QT.src=t.OC,this.KR=e,await super.Dye(t)}async kI(){await super.kI(),await this.QT.play()}TI(){this.QT.pause()}Eb(t,e,i){e&&this.QT.fastSeek?this.QT.fastSeek(t):this.QT.currentTime=t,this.aZ=!0,this.wo(new L(this.SR))}async er(){await super.er(),Sh(this.QT),this.QT.src&&this.QT.removeAttribute("src"),this.aO.er(),this.cO.er()}async Hw(){await super.Hw(),this.H9.Hw(),this.R9.Hw(),this.V8(),this.mH(),Gt(this.QT)}ge(){super.ge(),this.QT.style.display="block",this.QT.style.height="100%",this.QT.style.width="100%"}be(){super.be(),this.QT.style.display="none"}B8(){this.YG.addEventListener("play",this.MW),this.YG.addEventListener("pause",this.LW),this.YG.addEventListener("timeupdate",this.jc),this.YG.addEventListener("progress",this.$ye),this.YG.addEventListener("loadstart",this.Ts),this.YG.addEventListener("ended",this.Tc),this.YG.addEventListener("ratechange",this.tbe),this.YG.addEventListener("volumechange",this.nzt),this.YG.addEventListener("durationchange",this.tzt),this.YG.addEventListener("loadedmetadata",this.ebe),this.YG.addEventListener("emptied",this.ibe),this.YG.addEventListener("seeked",this.sbe),this.YG.addEventListener("seeking",this.nbe),this.YG.addEventListener("error",this.rbe),dr()&&this.YG.addEventListener("encrypted",this.d9)}V8(){this.YG.removeEventListener("play",this.MW),this.YG.removeEventListener("pause",this.LW),this.YG.removeEventListener("timeupdate",this.jc),this.YG.removeEventListener("progress",this.$ye),this.YG.removeEventListener("loadstart",this.Ts),this.YG.removeEventListener("ended",this.Tc),this.YG.removeEventListener("ratechange",this.tbe),this.YG.removeEventListener("volumechange",this.nzt),this.YG.removeEventListener("durationchange",this.tzt),this.YG.removeEventListener("loadedmetadata",this.ebe),this.YG.removeEventListener("emptied",this.ibe),this.YG.removeEventListener("seeked",this.sbe),this.YG.removeEventListener("seeking",this.nbe),this.YG.removeEventListener("error",this.rbe),this.YG.removeEventListener("encrypted",this.d9)}MH(t){this.zG=t,this.wo(new yM(this.zG))}xH(){const t=this.QT.audioTracks,e=this.QT.videoTracks;t&&(t.addEventListener("addtrack",this.obe),t.addEventListener("removetrack",this.hbe),t.addEventListener("change",this.abe)),e&&(e.addEventListener("addtrack",this.ube),e.addEventListener("removetrack",this.cbe),e.addEventListener("change",this.lbe))}mH(){const t=this.QT.audioTracks,e=this.QT.videoTracks;t&&(t.removeEventListener("addtrack",this.obe),t.removeEventListener("removetrack",this.hbe),t.removeEventListener("change",this.abe)),e&&(e.removeEventListener("addtrack",this.ube),e.removeEventListener("removetrack",this.cbe),e.removeEventListener("change",this.lbe))}oh(t){for(let e=0;e<t.V;e++){t.lC(e).PO()}}constructor(t,e,i){super(e,i),this.QT=t,this.aO=new Nn,this.cO=new Nn,this.dbe=void 0,this.MW=()=>{this.wo(new H(this.SR))},this.LW=()=>{this.wo(new fl(this.SR))},this.jc=()=>{const t=this.SR,e=this.hI,i=void 0!==this.dbe,s=i&&this.dbe!==t;(e||!i||s)&&(this.wo(new ri(t,void 0)),this.dbe=t)},this.$ye=()=>{this.wo(new K(this.SR))},this.Ts=()=>{this.wo(new Di)},this.Tc=()=>{this.wo(new Te(this.SR))},this.tbe=()=>{this.wo(new Nu(this.SR,this.KR))},this.nzt=()=>{this.wo(new rs(this.SR,this.vI))},this.tzt=()=>{this.wo(new Ls(this.ct))},this.ebe=()=>{},this.ibe=()=>{},this.sbe=()=>{this.aZ&&(this.aZ=!1),this.wo(new ha(this.SR))},this.nbe=()=>{this.wo(new L(this.SR))},this.BW=t=>{this.EW!==t.readyState&&(this.EW=t.readyState,this.wo(t))},this.NW=()=>{this.wo(new Wi(this.SR))},this.rbe=()=>{if(null!==this.QT.error){const e=this.QT.error;var t;this.MH(new dk(null!=(t=e.code)?t:lk.DECODE,e.message||"Error decoding media",void 0,e.msExtendedCode))}},this.d9=t=>{this.wo(new lg(t.initDataType,t.initData||new ArrayBuffer(0)))},this.ube=t=>{const e=this.QT.videoTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];AI(this.cO,i)||this.cO.tt(new xk(i))}},this.cbe=t=>{const e=[],i=this.QT.videoTracks;if(i){for(const t of this.cO.uC)SI(i,t.IO)||e.push(t);for(const t of e)this.cO.it(t)}},this.lbe=t=>{this.oh(this.cO)},this.obe=t=>{const e=this.QT.audioTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];AI(this.aO,i)||this.aO.tt(new kk(i))}},this.hbe=t=>{const e=[],i=this.QT.audioTracks;if(i){for(const t of this.aO.uC)SI(i,t.IO)||e.push(t);for(const t of e)this.aO.it(t)}},this.abe=t=>{this.oh(this.aO)},this.R9=new JL(this),this.R9.yn(tl.tC,this.BW),this.R9._9(new Za(this)),this.H9=new wM(this),this.H9.yn(tl.VL,this.NW),this.B8(),this.xH()}},rtt=[Ti.ro,Ti.Zy,tl.VL,Ti.jy,Ti.Ky,Ti.Cy,Ti.xy,Ti.Sy,Ti.Ay,Ti.sb,Ti.Xy,Ti.Vy,Ti.zy,Ti.ob,Ti.Yy,Ti.Ny,Ti.Py],ott=class extends Co{get ht(){return this.FB.ht}get gR(){return this.FB.gR.ks()}get qB(){}get wR(){return this.FB.wR}set wR(t){t&&this.FB.ZG(t)}get bt(){return this.Cc}get SR(){return this.FB.SR}set SR(t){this.FB.Eb(t)}get $G(){return this.tH}get ct(){return this.FB.ct}get RR(){return this.FB.RR}get DR(){return this.qG}get lt(){return this.zG}get MR(){}get OR(){return!1}get yI(){return this.FB.yI}set yI(t){this.FB.yI=t}get pI(){return this.mZ}get WR(){return Bo({},{dO:0,fO:0,_O:0,vO:0,mO:0,gO:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.FB.UR())}get GR(){return this.FB.GR}set GR(t){this.FB.GR=t}get XR(){return!0}get qR(){return this.FB.qR}get KR(){return this.FB.KR}set KR(t){this.FB.KR=t}get JR(){return this.FB.JR.ks()}get tI(){return this.KG}set tI(t){this.KG=t,this.jG&&(this.jG.tI=t)}get sI(){return this.FB.sI}get rI(){return this.FB.rI.ks()}get hI(){return this.FB.hI}get QG(){return this.FB.QG}get nt(){return this.Ll}get cI(){return this.FB.cI}get rt(){return this.FB.rt}get fI(){return this.FB.fI}get vI(){return this.FB.vI}set vI(t){this.FB.vI=t}LI(t){return this.FB.dH(t)}xI(){return!1}bI(){return this.FB.Ca}AI(){}be(){this.FB.be()}CI(){this.FB.CI()}TI(){this.FB.TI()}async kI(){await this.FB.kI()}DI(){throw new g("Recreate media source is not supported on HbbTV")}ER(t,e){this.FB.Eb(t)}async xa(t,e,i){var s;J(i),this.Cc=t;const n={Aw:Mr.mW,OC:t.src,Dk:t.type,eH:this.iH(t),tI:this.KG,sH:t.crossOrigin,nH:null==(s=e.metadata)?void 0:s.title};this.jG=await this.FB.Dn(n),e.textTracks&&this.oH(e.textTracks),Mx(this.nt)}ge(){this.FB.ge()}RI(){}II(){}Sa(){return this.FB.lH}async er(){this.Cc=void 0,this.zG=void 0,this.qG=void 0,this.jG=void 0,await this.cH.er(),this.FB.fH(),await this.FB.er()}async gn(){await this.er(),this._H.gn(),this.FB.fn(rtt,this.Ds),this.FB.fn(yo.da,this.SH),await this.FB.Hw(),this.vn.gn(),this.Ll.gn(),await this.cH.gn()}MH(t,e){this.zG||(this.zG=e,this.qG=t,this.wo(new Ga(t)))}oH(t){for(const e of t)void 0!==e.src&&this.cH.aW(e)}iH(t){if(!t.contentProtection)return[];const e=[];return t.contentProtection.widevine&&e.push({aT:rn,xG:t.contentProtection.widevine.licenseAcquisitionURL,EH:[]}),t.contentProtection.playready&&e.push({aT:mm,xG:t.contentProtection.playready.licenseAcquisitionURL,EH:[]}),this.fbe(e,t.contentProtection.preferredKeySystems)}fbe(t,e){if(void 0===e||0===e.length)return t;const i=t=>{const i=e.indexOf(t.aT.xw);return i>=0?i:e.length};return Ii(t,((t,e)=>i(t)-i(e)))}constructor(t,e,i,s){super(),this.jG=void 0,this.tH=new Yh,this.Cc=void 0,this.zG=void 0,this.qG=void 0,this.KG=hl.QH,this.SH=t=>{const e=t.lt,i=e.code,s=new A(mk(i),"Something went wrong during HbbTV playback.",e),n=Xs(s);this.MH(s,n)},this.vn=new OP(t),this.vn.bn(),this.FB=Zd()?new ntt(h.createElement(ee._E),this.vn,s):new stt(h.createElement("object"),this.vn,s),this.FB.v7(t),this.FB.yn(rtt,this.Ds),this.FB.yn(yo.da,this.SH),this._H=new q(this.FB,!0),this._H.yn(ro,this.Ds),this.cH=new Ix(this.FB,e),this.Ll=new Fu([this.FB.nt,this.cH.Z]),this.mZ=i}};O(new class{hP(t,e,i,s,n,r,o,h){return new ott(t,i,r,o)}BH(t,e){var i;return!(!Z.Lm||t.type!==nl.YC&&!OT(t.type)&&!zh(t.type))&&!(Zd()&&!(null==(i=t.contentProtection)?void 0:i.useOipfDrmAgent)&&(!t.contentProtection||dr()))}async OH(t){return!!await lT(t,!0)}FH(){return!1}constructor(){this.VH=Zt.uG}});export{Po as a,Et as b,r as c,Z as d,ji as e,rl as f,V as g,Yt as h,Gt as i,kd as j,Rd as k,Id as l,Cd as m,Pd as n,Nh as o,Bd as p,Od as q,Ms as r,It as s,Qr as t,Vs as u,Pf as v,Df as w,Zv as x,Bo as y,Oh as z,Cm as A,Ii as B,Rc as C,eu as D,Fo as E,we as F,ms as G,En as H,J as I,ah as J,Co as K,pe as L,Ti as M,Qa as N,Ye as O,qA as P,nh as Q,Ai as R,YA as S,xc as T,no as U,_k as V,ic as W,Dn as X,bh as Y,hs as Z,_x as _,mx as $,Ht as aa,tu as ba,io as ca,xh as da,vF as ea,se as fa,WT as ga,Ys as ha,Ls as ia,Iu as ja,ek as ka,nk as la,rh as ma,In as na,yC as oa,it as pa,Ka as qa,EP as ra,NP as sa,OP as ta,FP as ua,ao as va,WP as wa,ZP as xa,XP as ya,zP as za,KP as Aa,Di as Ba,SB as Ca,TB as Da,kB as Ea,xB as Fa,RB as Ga,IB as Ha,iO as Ia,sO as Ja,nO as Ka,rO as La,wu as Ma,oF as Na,hF as Oa,pF as Pa,UF as Qa,GF as Ra,HF as Sa,ZF as Ta,YF as Ua,KF as Va,jF as Wa,lU as Xa,dU as Ya,I as Za,W0 as _a,j0 as $a,l1 as ab,d5 as bb,Y5 as cb,G6 as db,q6 as eb,X8 as fb};